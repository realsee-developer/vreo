import{g as D2,r as ue,c as It,d as wu,_ as ta,e as Ho,f as ct,h as ht,i as Uo,V as gt,k as Yf,S as Kf,l as En,m as na,n as ar,o as wt,F as ws,q as L2,s as Wl,B as Tt,t as Ct,M as st,D as fn,u as nt,a as H,b as oo,T as wi,L as ci,v as Bu,w as Jf,x as Vy,y as Ue,z as tl,C as Fu,E as di,W as R2,H as Ty,J as Zf,U as kc,K as Hu,N as Jt,O as hi,P as qn,Q as Pn,X as mr,Y as z2,Z as Wr,$ as Uu,a0 as Nu,a1 as Tn,a2 as qe,a3 as on,a4 as El,a5 as nl,a6 as Zt,a7 as _y,a8 as Oo,a9 as B2,aa as ky,ab as F2,ac as H2,ad as Iy,ae as ep,af as jy,ag as Dy,ah as Ly,ai as tp,aj as Tr,ak as _n,al as fi,am as Ry,an as Bs,ao as Hi,ap as rl,aq as U2,ar as zy,as as np,at as By,au as xu,av as Fy,aw as ph,ax as Da,ay as N2,az as W2,aA as xv,aB as Ha,aC as vh,aD as G2,aE as Q2,aF as Hy,aG as So,aH as Uy,aI as Ny,aJ as Wy,aK as mh,aL as Gy,aM as Qy,aN as rp,aO as Xy,aP as gh,aQ as Pv,aR as X2,aS as Ev,aT as xa,aU as q2,aV as Cv,aW as Y2,aX as qy,aY as Sv,aZ as K2,a_ as J2,a$ as Z2,b0 as e3,b1 as Ov,b2 as Yy,b3 as t3,b4 as n3,b5 as $v,b6 as Ky,b7 as r3,b8 as i3,b9 as o3,ba as s3,bb as Mv,bc as a3,bd as Vv,be as l3,bf as Jy,bg as u3,bh as Zy,R as c3,p as Pa,bi as d3}from"./index-Cc9jxIgg.js";var ud={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Tv;function h3(){return Tv||(Tv=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var l in o)e.call(o,l)&&o[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(ud)),ud.exports}var f3=h3();const No=D2(f3);function Je(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw new Error(typeof n=="number"?"[MobX] minified error nr: "+n+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+n)}var p3={};function ip(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:p3}var v3=Object.assign,Wu=Object.getOwnPropertyDescriptor,vi=Object.defineProperty,Ic=Object.prototype,yh=[];Object.freeze(yh);var op={};Object.freeze(op);var m3=typeof Proxy<"u",g3=Object.toString();function eA(){m3||Je("Proxy not available")}function tA(n){var e=!1;return function(){if(!e)return e=!0,n.apply(this,arguments)}}var xs=function(){};function Pr(n){return typeof n=="function"}function Io(n){var e=typeof n;switch(e){case"string":case"symbol":case"number":return!0}return!1}function jc(n){return n!==null&&typeof n=="object"}function Qi(n){if(!jc(n))return!1;var e=Object.getPrototypeOf(n);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===g3}function nA(n){var e=n==null?void 0:n.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Dc(n,e,t){vi(n,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function rA(n,e,t){vi(n,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function Wo(n,e){var t="isMobX"+n;return e.prototype[t]=!0,function(r){return jc(r)&&r[t]===!0}}function ra(n){return n instanceof Map}function Cl(n){return n instanceof Set}var iA=typeof Object.getOwnPropertySymbols<"u";function y3(n){var e=Object.keys(n);if(!iA)return e;var t=Object.getOwnPropertySymbols(n);return t.length?[].concat(e,t.filter(function(r){return Ic.propertyIsEnumerable.call(n,r)})):e}var Lc=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:iA?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames;function oA(n){return n===null?null:typeof n=="object"?""+n:n}function mi(n,e){return Ic.hasOwnProperty.call(n,e)}var A3=Object.getOwnPropertyDescriptors||function(e){var t={};return Lc(e).forEach(function(r){t[r]=Wu(e,r)}),t};function b3(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function sp(n,e,t){return e&&b3(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fs(){return Fs=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fs.apply(this,arguments)}function sA(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Ah(n,e)}function Ah(n,e){return Ah=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ah(n,e)}function cd(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function w3(n,e){if(n){if(typeof n=="string")return _v(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _v(n,e)}}function _v(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ps(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=w3(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kr=Symbol("mobx-stored-annotations");function Lr(n){function e(t,r){Sl(t,r,n)}return Object.assign(e,n)}function Sl(n,e,t){mi(n,kr)||Dc(n,kr,Fs({},n[kr])),$3(t)||(n[kr][e]=t)}function x3(n){return mi(n,kr)||Dc(n,kr,Fs({},n[kr])),n[kr]}var Be=Symbol("mobx administration"),Ol=function(){function n(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=n.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},e.reportObserved=function(){return SA(this)},e.reportChanged=function(){Wn(),OA(this),Gn()},e.toString=function(){return this.name_},n}(),ap=Wo("Atom",Ol);function lp(n,e,t){e===void 0&&(e=xs),t===void 0&&(t=xs);var r=new Ol(n);return e!==xs&&S5(r,e),t!==xs&&DA(r,t),r}function P3(n,e){return JA(n,e)}function E3(n,e){return Object.is?Object.is(n,e):n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Hs={structural:P3,default:E3};function Us(n,e,t){return BA(n)?n:Array.isArray(n)?ut.array(n,{name:t}):Qi(n)?ut.object(n,void 0,{name:t}):ra(n)?ut.map(n,{name:t}):Cl(n)?ut.set(n,{name:t}):typeof n=="function"&&!dp(n)&&!qu(n)?nA(n)?sl(n):ol(t,n):n}function C3(n,e,t){if(n==null||Nc(n)||Hc(n)||Go(n)||oa(n))return n;if(Array.isArray(n))return ut.array(n,{name:t,deep:!1});if(Qi(n))return ut.object(n,void 0,{name:t,deep:!1});if(ra(n))return ut.map(n,{name:t,deep:!1});if(Cl(n))return ut.set(n,{name:t,deep:!1})}function Rc(n){return n}function S3(n,e){return JA(n,e)?e:n}var O3="override";function $3(n){return n.annotationType_===O3}function $l(n,e){return{annotationType_:n,options_:e,make_:M3,extend_:V3}}function M3(n,e,t,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(n,e,t,!1)===null?0:1;if(r===n.target_)return this.extend_(n,e,t,!1)===null?0:2;if(dp(t.value))return 1;var o=aA(n,this,e,t,!1);return vi(r,e,o),2}function V3(n,e,t,r){var i=aA(n,this,e,t);return n.defineProperty_(e,i,r)}function T3(n,e,t,r){e.annotationType_,r.value}function aA(n,e,t,r,i){var o,s,a,l,u,c,d;i===void 0&&(i=ye.safeDescriptors),T3(n,e,t,r);var h=r.value;if((o=e.options_)!=null&&o.bound){var f;h=h.bind((f=n.proxy_)!=null?f:n.target_)}return{value:Ns((s=(a=e.options_)==null?void 0:a.name)!=null?s:t.toString(),h,(l=(u=e.options_)==null?void 0:u.autoAction)!=null?l:!1,(c=e.options_)!=null&&c.bound?(d=n.proxy_)!=null?d:n.target_:void 0),configurable:i?n.isPlainObject_:!0,enumerable:!1,writable:!i}}function lA(n,e){return{annotationType_:n,options_:e,make_:_3,extend_:k3}}function _3(n,e,t,r){var i;if(r===n.target_)return this.extend_(n,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!mi(n.target_,e)||!qu(n.target_[e]))&&this.extend_(n,e,t,!1)===null)return 0;if(qu(t.value))return 1;var o=uA(n,this,e,t,!1,!1);return vi(r,e,o),2}function k3(n,e,t,r){var i,o=uA(n,this,e,t,(i=this.options_)==null?void 0:i.bound);return n.defineProperty_(e,o,r)}function I3(n,e,t,r){e.annotationType_,r.value}function uA(n,e,t,r,i,o){o===void 0&&(o=ye.safeDescriptors),I3(n,e,t,r);var s=r.value;if(qu(s)||(s=sl(s)),i){var a;s=s.bind((a=n.proxy_)!=null?a:n.target_),s.isMobXFlow=!0}return{value:s,configurable:o?n.isPlainObject_:!0,enumerable:!1,writable:!o}}function up(n,e){return{annotationType_:n,options_:e,make_:j3,extend_:D3}}function j3(n,e,t){return this.extend_(n,e,t,!1)===null?0:1}function D3(n,e,t,r){return L3(n,this,e,t),n.defineComputedProperty_(e,Fs({},this.options_,{get:t.get,set:t.set}),r)}function L3(n,e,t,r){e.annotationType_,r.get}function zc(n,e){return{annotationType_:n,options_:e,make_:R3,extend_:z3}}function R3(n,e,t){return this.extend_(n,e,t,!1)===null?0:1}function z3(n,e,t,r){var i,o;return B3(n,this),n.defineObservableProperty_(e,t.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:Us,r)}function B3(n,e,t,r){e.annotationType_}var F3="true",H3=cA();function cA(n){return{annotationType_:F3,options_:n,make_:U3,extend_:N3}}function U3(n,e,t,r){var i,o;if(t.get)return Bc.make_(n,e,t,r);if(t.set){var s=Ns(e.toString(),t.set);return r===n.target_?n.defineProperty_(e,{configurable:ye.safeDescriptors?n.isPlainObject_:!0,set:s})===null?0:2:(vi(r,e,{configurable:!0,set:s}),2)}if(r!==n.target_&&typeof t.value=="function"){var a;if(nA(t.value)){var l,u=(l=this.options_)!=null&&l.autoBind?sl.bound:sl;return u.make_(n,e,t,r)}var c=(a=this.options_)!=null&&a.autoBind?ol.bound:ol;return c.make_(n,e,t,r)}var d=((i=this.options_)==null?void 0:i.deep)===!1?ut.ref:ut;if(typeof t.value=="function"&&(o=this.options_)!=null&&o.autoBind){var h;t.value=t.value.bind((h=n.proxy_)!=null?h:n.target_)}return d.make_(n,e,t,r)}function N3(n,e,t,r){var i,o;if(t.get)return Bc.extend_(n,e,t,r);if(t.set)return n.defineProperty_(e,{configurable:ye.safeDescriptors?n.isPlainObject_:!0,set:Ns(e.toString(),t.set)},r);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var s;t.value=t.value.bind((s=n.proxy_)!=null?s:n.target_)}var a=((o=this.options_)==null?void 0:o.deep)===!1?ut.ref:ut;return a.extend_(n,e,t,r)}var W3="observable",G3="observable.ref",Q3="observable.shallow",X3="observable.struct",dA={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(dA);function Gl(n){return n||dA}var hA=zc(W3),q3=zc(G3,{enhancer:Rc}),Y3=zc(Q3,{enhancer:C3}),K3=zc(X3,{enhancer:S3}),fA=Lr(hA);function Ql(n){return n.deep===!0?Us:n.deep===!1?Rc:Z3(n.defaultDecorator)}function J3(n){var e;return n?(e=n.defaultDecorator)!=null?e:cA(n):void 0}function Z3(n){var e,t;return n&&(e=(t=n.options_)==null?void 0:t.enhancer)!=null?e:Us}function pA(n,e,t){if(Io(e)){Sl(n,e,hA);return}return BA(n)?n:Qi(n)?ut.object(n,e,t):Array.isArray(n)?ut.array(n,e):ra(n)?ut.map(n,e):Cl(n)?ut.set(n,e):typeof n=="object"&&n!==null?n:ut.box(n,e)}Object.assign(pA,fA);var e5={box:function(e,t){var r=Gl(t);return new $s(e,Ql(r),r.name,!0,r.equals)},array:function(e,t){var r=Gl(t);return(ye.useProxies===!1||r.proxy===!1?K5:H5)(e,Ql(r),r.name)},map:function(e,t){var r=Gl(t);return new NA(e,Ql(r),r.name)},set:function(e,t){var r=Gl(t);return new QA(e,Ql(r),r.name)},object:function(e,t,r){return V5(ye.useProxies===!1||(r==null?void 0:r.proxy)===!1?Uc({},r):z5({},r),e,t)},ref:Lr(q3),shallow:Lr(Y3),deep:fA,struct:Lr(K3)},ut=v3(pA,e5),vA="computed",t5="computed.struct",mA=up(vA),n5=up(t5,{equals:Hs.structural}),Bc=function(e,t){if(Io(t))return Sl(e,t,mA);if(Qi(e))return Lr(up(vA,e));var r=Qi(t)?t:{};return r.get=e,r.name||(r.name=e.name||""),new il(r)};Object.assign(Bc,mA);Bc.struct=Lr(n5);var kv,Iv,Gu=0,r5=1,i5=(kv=(Iv=Wu(function(){},"name"))==null?void 0:Iv.configurable)!=null?kv:!1,jv={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ns(n,e,t,r){t===void 0&&(t=!1);function i(){return gA(n,t,e,r||this,arguments)}return i.isMobxAction=!0,i5&&(jv.value=n,Object.defineProperty(i,"name",jv)),i}function gA(n,e,t,r,i){var o=o5(n,e);try{return t.apply(r,i)}catch(s){throw o.error_=s,s}finally{s5(o)}}function o5(n,e,t,r){var i=!1,o=0,s=ye.trackingDerivation,a=!e||!s;Wn();var l=ye.allowStateChanges;a&&(ia(),l=Ml(!0));var u=Ms(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:u,notifySpy_:i,startTime_:o,actionId_:r5++,parentActionId_:Gu};return Gu=c.actionId_,c}function s5(n){Gu!==n.actionId_&&Je(30),Gu=n.parentActionId_,n.error_!==void 0&&(ye.suppressReactionErrors=!0),Vl(n.prevAllowStateChanges_),Wi(n.prevAllowStateReads_),Gn(),n.runAsAction_&&Ni(n.prevDerivation_),ye.suppressReactionErrors=!1}function cp(n,e){var t=Ml(n);try{return e()}finally{Vl(t)}}function Ml(n){var e=ye.allowStateChanges;return ye.allowStateChanges=n,e}function Vl(n){ye.allowStateChanges=n}var yA;yA=Symbol.toPrimitive;var $s=function(n){sA(e,n);function e(r,i,o,s,a){var l;return o===void 0&&(o="ObservableValue"),a===void 0&&(a=Hs.default),l=n.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=a,l.value_=i(r,void 0,o),l}var t=e.prototype;return t.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==ye.UNCHANGED&&this.setNewValue_(i)},t.prepareNewValue_=function(i){if(ir(this)){var o=or(this,{object:this,type:Rr,newValue:i});if(!o)return ye.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?ye.UNCHANGED:i},t.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),wr(this)&&xr(this,{type:Rr,object:this,newValue:i,oldValue:o})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(i){return Tl(this,i)},t.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:Rr,newValue:this.value_,oldValue:void 0}),_l(this,i)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return oA(this.get())},t[yA]=function(){return this.valueOf()},e}(Ol),AA;AA=Symbol.toPrimitive;var il=function(){function n(t){this.dependenciesState_=tt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Qu(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=$o.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||Je(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=Ns("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Hs.structural:Hs.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=n.prototype;return e.onBecomeStale_=function(){d5(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},e.get=function(){if(this.isComputing_&&Je(32,this.name_,this.derivation),ye.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)bh(this)&&(this.warnAboutUntrackedRead_(),Wn(),this.value_=this.computeValue_(!1),Gn());else if(SA(this),bh(this)){var r=ye.trackingContext;this.keepAlive_&&!r&&(ye.trackingContext=this),this.trackAndCompute()&&c5(this),ye.trackingContext=r}var i=this.value_;if(Pu(i))throw i.cause;return i},e.set=function(r){if(this.setter_){this.isRunningSetter_&&Je(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter_=!1}}else Je(34,this.name_)},e.trackAndCompute=function(){var r=this.value_,i=this.dependenciesState_===tt.NOT_TRACKING_,o=this.computeValue_(!0),s=i||Pu(r)||Pu(o)||!this.equals_(r,o);return s&&(this.value_=o),s},e.computeValue_=function(r){this.isComputing_=!0;var i=Ml(!1),o;if(r)o=bA(this,this.derivation,this.scope_);else if(ye.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(s){o=new Qu(s)}return Vl(i),this.isComputing_=!1,o},e.suspend_=function(){this.keepAlive_||(wh(this),this.value_=void 0)},e.observe_=function(r,i){var o=this,s=!0,a=void 0;return w5(function(){var l=o.get();if(!s||i){var u=ia();r({observableKind:"computed",debugObjectName:o.name_,type:Rr,object:o,newValue:l,oldValue:a}),Ni(u)}s=!1,a=l})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return oA(this.get())},e[AA]=function(){return this.valueOf()},n}(),Fc=Wo("ComputedValue",il),tt;(function(n){n[n.NOT_TRACKING_=-1]="NOT_TRACKING_",n[n.UP_TO_DATE_=0]="UP_TO_DATE_",n[n.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",n[n.STALE_=2]="STALE_"})(tt||(tt={}));var $o;(function(n){n[n.NONE=0]="NONE",n[n.LOG=1]="LOG",n[n.BREAK=2]="BREAK"})($o||($o={}));var Qu=function(e){this.cause=void 0,this.cause=e};function Pu(n){return n instanceof Qu}function bh(n){switch(n.dependenciesState_){case tt.UP_TO_DATE_:return!1;case tt.NOT_TRACKING_:case tt.STALE_:return!0;case tt.POSSIBLY_STALE_:{for(var e=Ms(!0),t=ia(),r=n.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(Fc(s)){if(ye.disableErrorBoundaries)s.get();else try{s.get()}catch{return Ni(t),Wi(e),!0}if(n.dependenciesState_===tt.STALE_)return Ni(t),Wi(e),!0}}return xA(n),Ni(t),Wi(e),!1}}}function bA(n,e,t){var r=Ms(!0);xA(n),n.newObserving_=new Array(n.observing_.length+100),n.unboundDepsCount_=0,n.runId_=++ye.runId;var i=ye.trackingDerivation;ye.trackingDerivation=n,ye.inBatch++;var o;if(ye.disableErrorBoundaries===!0)o=e.call(t);else try{o=e.call(t)}catch(s){o=new Qu(s)}return ye.inBatch--,ye.trackingDerivation=i,a5(n),Wi(r),o}function a5(n){for(var e=n.observing_,t=n.observing_=n.newObserving_,r=tt.UP_TO_DATE_,i=0,o=n.unboundDepsCount_,s=0;s<o;s++){var a=t[s];a.diffValue_===0&&(a.diffValue_=1,i!==s&&(t[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(t.length=i,n.newObserving_=null,o=e.length;o--;){var l=e[o];l.diffValue_===0&&EA(l,n),l.diffValue_=0}for(;i--;){var u=t[i];u.diffValue_===1&&(u.diffValue_=0,u5(u,n))}r!==tt.UP_TO_DATE_&&(n.dependenciesState_=r,n.onBecomeStale_())}function wh(n){var e=n.observing_;n.observing_=[];for(var t=e.length;t--;)EA(e[t],n);n.dependenciesState_=tt.NOT_TRACKING_}function wA(n){var e=ia();try{return n()}finally{Ni(e)}}function ia(){var n=ye.trackingDerivation;return ye.trackingDerivation=null,n}function Ni(n){ye.trackingDerivation=n}function Ms(n){var e=ye.allowStateReads;return ye.allowStateReads=n,e}function Wi(n){ye.allowStateReads=n}function xA(n){if(n.dependenciesState_!==tt.UP_TO_DATE_){n.dependenciesState_=tt.UP_TO_DATE_;for(var e=n.observing_,t=e.length;t--;)e[t].lowestObserverState_=tt.UP_TO_DATE_}}var Eu=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Cu=!0,PA=!1,ye=function(){var n=ip();return n.__mobxInstanceCount>0&&!n.__mobxGlobals&&(Cu=!1),n.__mobxGlobals&&n.__mobxGlobals.version!==new Eu().version&&(Cu=!1),Cu?n.__mobxGlobals?(n.__mobxInstanceCount+=1,n.__mobxGlobals.UNCHANGED||(n.__mobxGlobals.UNCHANGED={}),n.__mobxGlobals):(n.__mobxInstanceCount=1,n.__mobxGlobals=new Eu):(setTimeout(function(){PA||Je(35)},1),new Eu)}();function l5(){if((ye.pendingReactions.length||ye.inBatch||ye.isRunningReactions)&&Je(36),PA=!0,Cu){var n=ip();--n.__mobxInstanceCount===0&&(n.__mobxGlobals=void 0),ye=new Eu}}function u5(n,e){n.observers_.add(e),n.lowestObserverState_>e.dependenciesState_&&(n.lowestObserverState_=e.dependenciesState_)}function EA(n,e){n.observers_.delete(e),n.observers_.size===0&&CA(n)}function CA(n){n.isPendingUnobservation_===!1&&(n.isPendingUnobservation_=!0,ye.pendingUnobservations.push(n))}function Wn(){ye.inBatch++}function Gn(){if(--ye.inBatch===0){$A();for(var n=ye.pendingUnobservations,e=0;e<n.length;e++){var t=n[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof il&&t.suspend_())}ye.pendingUnobservations=[]}}function SA(n){var e=ye.trackingDerivation;return e!==null?(e.runId_!==n.lastAccessedBy_&&(n.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=n,!n.isBeingObserved_&&ye.trackingContext&&(n.isBeingObserved_=!0,n.onBO())),!0):(n.observers_.size===0&&ye.inBatch>0&&CA(n),!1)}function OA(n){n.lowestObserverState_!==tt.STALE_&&(n.lowestObserverState_=tt.STALE_,n.observers_.forEach(function(e){e.dependenciesState_===tt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=tt.STALE_}))}function c5(n){n.lowestObserverState_!==tt.STALE_&&(n.lowestObserverState_=tt.STALE_,n.observers_.forEach(function(e){e.dependenciesState_===tt.POSSIBLY_STALE_?e.dependenciesState_=tt.STALE_:e.dependenciesState_===tt.UP_TO_DATE_&&(n.lowestObserverState_=tt.UP_TO_DATE_)}))}function d5(n){n.lowestObserverState_===tt.UP_TO_DATE_&&(n.lowestObserverState_=tt.POSSIBLY_STALE_,n.observers_.forEach(function(e){e.dependenciesState_===tt.UP_TO_DATE_&&(e.dependenciesState_=tt.POSSIBLY_STALE_,e.onBecomeStale_())}))}var jo=function(){function n(t,r,i,o){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=tt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=$o.NONE,this.name_=t,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=o}var e=n.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ye.pendingReactions.push(this),$A())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Wn(),this.isScheduled_=!1;var r=ye.trackingContext;if(ye.trackingContext=this,bh(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}ye.trackingContext=r,Gn()}},e.track=function(r){if(!this.isDisposed_){Wn(),this.isRunning_=!0;var i=ye.trackingContext;ye.trackingContext=this;var o=bA(this,r,void 0);ye.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&wh(this),Pu(o)&&this.reportExceptionInDerivation_(o.cause),Gn()}},e.reportExceptionInDerivation_=function(r){var i=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(ye.disableErrorBoundaries)throw r;var o="[mobx] uncaught error in '"+this+"'";ye.suppressReactionErrors||console.error(o,r),ye.globalReactionErrorHandlers.forEach(function(s){return s(r,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Wn(),wh(this),Gn()))},e.getDisposer_=function(){var r=this.dispose.bind(this);return r[Be]=this,r},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(r){r===void 0&&(r=!1),D5(this,r)},n}(),h5=100,xh=function(e){return e()};function $A(){ye.inBatch>0||ye.isRunningReactions||xh(f5)}function f5(){ye.isRunningReactions=!0;for(var n=ye.pendingReactions,e=0;n.length>0;){++e===h5&&(console.error("[mobx] cycle in reaction: "+n[0]),n.splice(0));for(var t=n.splice(0),r=0,i=t.length;r<i;r++)t[r].runReaction_()}ye.isRunningReactions=!1}var Xu=Wo("Reaction",jo);function p5(n){var e=xh;xh=function(r){return n(function(){return e(r)})}}function Ua(){return!1}function v5(n){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var MA="action",m5="action.bound",VA="autoAction",g5="autoAction.bound",TA="<unnamed action>",_A=$l(MA),y5=$l(m5,{bound:!0}),kA=$l(VA,{autoAction:!0}),A5=$l(g5,{autoAction:!0,bound:!0});function IA(n){var e=function(r,i){if(Pr(r))return Ns(r.name||TA,r,n);if(Pr(i))return Ns(r,i,n);if(Io(i))return Sl(r,i,n?kA:_A);if(Io(r))return Lr($l(n?VA:MA,{name:r,autoAction:n}))};return e}var hn=IA(!1);Object.assign(hn,_A);var ol=IA(!0);Object.assign(ol,kA);hn.bound=Lr(y5);ol.bound=Lr(A5);function b5(n){return gA(n.name||TA,!1,n,this,void 0)}function dp(n){return Pr(n)&&n.isMobxAction===!0}function w5(n,e){var t,r;e===void 0&&(e=op);var i=(t=(r=e)==null?void 0:r.name)!=null?t:"Autorun",o=!e.scheduler&&!e.delay,s;if(o)s=new jo(i,function(){this.track(u)},e.onError,e.requiresObservable);else{var a=jA(e),l=!1;s=new jo(i,function(){l||(l=!0,a(function(){l=!1,s.isDisposed_||s.track(u)}))},e.onError,e.requiresObservable)}function u(){n(s)}return s.schedule_(),s.getDisposer_()}var x5=function(e){return e()};function jA(n){return n.scheduler?n.scheduler:n.delay?function(e){return setTimeout(e,n.delay)}:x5}function Es(n,e,t){var r;t===void 0&&(t=op);var i=(r=t.name)!=null?r:"Reaction",o=hn(i,t.onError?P5(t.onError,e):e),s=!t.scheduler&&!t.delay,a=jA(t),l=!0,u=!1,c,d,h=t.compareStructural?Hs.structural:t.equals||Hs.default,f=new jo(i,function(){l||s?p():u||(u=!0,a(p))},t.onError,t.requiresObservable);function p(){if(u=!1,!f.isDisposed_){var v=!1;f.track(function(){var b=cp(!1,function(){return n(f)});v=l||!h(c,b),d=c,c=b}),(l&&t.fireImmediately||!l&&v)&&o(c,d,f),l=!1}}return f.schedule_(),f.getDisposer_()}function P5(n,e){return function(){try{return e.apply(this,arguments)}catch(t){n.call(this,t)}}}var E5="onBO",C5="onBUO";function S5(n,e,t){return LA(E5,n,e,t)}function DA(n,e,t){return LA(C5,n,e,t)}function LA(n,e,t,r){var i=Ws(e),o=Pr(r)?r:t,s=n+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var a=i[s];a&&(a.delete(o),a.size===0&&delete i[s])}}var O5="never",Xl="always",$5="observed";function M5(n){n.isolateGlobalState===!0&&l5();var e=n.useProxies,t=n.enforceActions;if(e!==void 0&&(ye.useProxies=e===Xl?!0:e===O5?!1:typeof Proxy<"u"),e==="ifavailable"&&(ye.verifyProxies=!0),t!==void 0){var r=t===Xl?Xl:t===$5;ye.enforceActions=r,ye.allowStateChanges=!(r===!0||r===Xl)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in n&&(ye[i]=!!n[i])}),ye.allowStateReads=!ye.observableRequiresReaction,n.reactionScheduler&&p5(n.reactionScheduler)}function V5(n,e,t,r){var i=A3(e),o=Uc(n,r)[Be];Wn();try{Lc(i).forEach(function(s){o.extend_(s,i[s],t&&s in t?t[s]:!0)})}finally{Gn()}return n}function T5(n,e){return RA(Ws(n,e))}function RA(n){var e={name:n.name_};return n.observing_&&n.observing_.length>0&&(e.dependencies=_5(n.observing_).map(RA)),e}function _5(n){return Array.from(new Set(n))}var k5=0;function zA(){this.message="FLOW_CANCELLED"}zA.prototype=Object.create(Error.prototype);var Dv=lA("flow"),I5=lA("flow.bound",{bound:!0}),sl=Object.assign(function(e,t){if(Io(t))return Sl(e,t,Dv);var r=e,i=r.name||"<unnamed flow>",o=function(){var a=this,l=arguments,u=++k5,c=hn(i+" - runid: "+u+" - init",r).apply(a,l),d,h=void 0,f=new Promise(function(p,v){var b=0;d=v;function g(C){h=void 0;var V;try{V=hn(i+" - runid: "+u+" - yield "+b++,c.next).call(c,C)}catch(M){return v(M)}E(V)}function y(C){h=void 0;var V;try{V=hn(i+" - runid: "+u+" - yield "+b++,c.throw).call(c,C)}catch(M){return v(M)}E(V)}function E(C){if(Pr(C==null?void 0:C.then)){C.then(E,v);return}return C.done?p(C.value):(h=Promise.resolve(C.value),h.then(g,y))}g(void 0)});return f.cancel=hn(i+" - runid: "+u+" - cancel",function(){try{h&&Lv(h);var p=c.return(void 0),v=Promise.resolve(p.value);v.then(xs,xs),Lv(v),d(new zA)}catch(b){d(b)}}),f};return o.isMobXFlow=!0,o},Dv);sl.bound=Lr(I5);function Lv(n){Pr(n.cancel)&&n.cancel()}function qu(n){return(n==null?void 0:n.isMobXFlow)===!0}function j5(n,e){return n?Nc(n)||!!n[Be]||ap(n)||Xu(n)||Fc(n):!1}function BA(n){return j5(n)}function D5(){Je("trace() is not available in production builds");for(var n=!1,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[t.length-1]=="boolean"&&(n=t.pop());var i=L5(t);if(!i)return Je("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===$o.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=n?$o.BREAK:$o.LOG}function L5(n){switch(n.length){case 0:return ye.trackingDerivation;case 1:return Ws(n[0]);case 2:return Ws(n[0],n[1])}}function li(n,e){e===void 0&&(e=void 0),Wn();try{return n.apply(e)}finally{Gn()}}function as(n){return n[Be]}var R5={has:function(e,t){return as(e).has_(t)},get:function(e,t){return as(e).get_(t)},set:function(e,t,r){var i;return Io(t)?(i=as(e).set_(t,r,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var r;return Io(t)?(r=as(e).delete_(t,!0))!=null?r:!0:!1},defineProperty:function(e,t,r){var i;return(i=as(e).defineProperty_(t,r))!=null?i:!0},ownKeys:function(e){return as(e).ownKeys_()},preventExtensions:function(e){Je(13)}};function z5(n,e){var t,r;return eA(),n=Uc(n,e),(r=(t=n[Be]).proxy_)!=null?r:t.proxy_=new Proxy(n,R5)}function ir(n){return n.interceptors_!==void 0&&n.interceptors_.length>0}function Tl(n,e){var t=n.interceptors_||(n.interceptors_=[]);return t.push(e),tA(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function or(n,e){var t=ia();try{for(var r=[].concat(n.interceptors_||[]),i=0,o=r.length;i<o&&(e=r[i](e),e&&!e.type&&Je(14),!!e);i++);return e}finally{Ni(t)}}function wr(n){return n.changeListeners_!==void 0&&n.changeListeners_.length>0}function _l(n,e){var t=n.changeListeners_||(n.changeListeners_=[]);return t.push(e),tA(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function xr(n,e){var t=ia(),r=n.changeListeners_;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](e);Ni(t)}}function hp(n,e,t){var r=Uc(n,t)[Be];Wn();try{var i;(i=e)!=null||(e=x3(n)),Lc(e).forEach(function(o){return r.make_(o,e[o])})}finally{Gn()}return n}var Rv="splice",Rr="update",B5=1e4,F5={get:function(e,t){var r=e[Be];return t===Be?r:t==="length"?r.getArrayLength_():typeof t=="string"&&!isNaN(t)?r.get_(parseInt(t)):mi(Yu,t)?Yu[t]:e[t]},set:function(e,t,r){var i=e[Be];return t==="length"&&i.setArrayLength_(r),typeof t=="symbol"||isNaN(t)?e[t]=r:i.set_(parseInt(t),r),!0},preventExtensions:function(){Je(15)}},fp=function(){function n(t,r,i,o){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new Ol(t),this.enhancer_=function(s,a){return r(s,a,"ObservableArray[..]")}}var e=n.prototype;return e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},e.intercept_=function(r){return Tl(this,r)},e.observe_=function(r,i){return i===void 0&&(i=!1),i&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),_l(this,r)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&Je("Out of range: "+r);var i=this.values_.length;if(r!==i)if(r>i){for(var o=new Array(r-i),s=0;s<r-i;s++)o[s]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(r,i-r)},e.updateArrayLength_=function(r,i){r!==this.lastKnownLength_&&Je(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&KA(r+i+1)},e.spliceWithArray_=function(r,i,o){var s=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?i=a-r:i==null?i=0:i=Math.max(0,Math.min(i,a-r)),o===void 0&&(o=yh),ir(this)){var l=or(this,{object:this.proxy_,type:Rv,index:r,removedCount:i,added:o});if(!l)return yh;i=l.removedCount,o=l.added}if(o=o.length===0?o:o.map(function(d){return s.enhancer_(d,void 0)}),this.legacyMode_){var u=o.length-i;this.updateArrayLength_(a,u)}var c=this.spliceItemsIntoValues_(r,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(r,o,c),this.dehanceValues_(c)},e.spliceItemsIntoValues_=function(r,i,o){if(o.length<B5){var s;return(s=this.values_).splice.apply(s,[r,i].concat(o))}else{var a=this.values_.slice(r,r+i),l=this.values_.slice(r+i);this.values_.length+=o.length-i;for(var u=0;u<o.length;u++)this.values_[r+u]=o[u];for(var c=0;c<l.length;c++)this.values_[r+o.length+c]=l[c];return a}},e.notifyArrayChildUpdate_=function(r,i,o){var s=!this.owned_&&Ua(),a=wr(this),l=a||s?{observableKind:"array",object:this.proxy_,type:Rr,debugObjectName:this.atom_.name_,index:r,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),a&&xr(this,l)},e.notifyArraySplice_=function(r,i,o){var s=!this.owned_&&Ua(),a=wr(this),l=a||s?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Rv,index:r,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&xr(this,l)},e.get_=function(r){if(r<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r]);console.warn("[mobx.array] Attempt to read an array index ("+r+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},e.set_=function(r,i){var o=this.values_;if(r<o.length){this.atom_;var s=o[r];if(ir(this)){var a=or(this,{type:Rr,object:this.proxy_,index:r,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,s);var l=i!==s;l&&(o[r]=i,this.notifyArrayChildUpdate_(r,i,s))}else r===o.length?this.spliceWithArray_(r,0,[i]):Je(17,r,o.length)},n}();function H5(n,e,t,r){t===void 0&&(t="ObservableArray"),r===void 0&&(r=!1),eA();var i=new fp(t,e,r,!1);rA(i.values_,Be,i);var o=new Proxy(i.values_,F5);if(i.proxy_=o,n&&n.length){var s=Ml(!0);i.spliceWithArray_(0,0,n),Vl(s)}return o}var Yu={clear:function(){return this.splice(0)},replace:function(e){var t=this[Be];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var s=this[Be];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(e);case 2:return s.spliceWithArray_(e,t)}return s.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,r){return this[Be].spliceWithArray_(e,t,r)},push:function(){for(var e=this[Be],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,r),e.values_.length},pop:function(){return this.splice(Math.max(this[Be].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Be],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.spliceWithArray_(0,0,r),e.values_.length},reverse:function(){return ye.trackingDerivation&&Je(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ye.trackingDerivation&&Je(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Be],r=t.dehanceValues_(t.values_).indexOf(e);return r>-1?(this.splice(r,1),!0):!1}};Gt("concat",xi);Gt("flat",xi);Gt("includes",xi);Gt("indexOf",xi);Gt("join",xi);Gt("lastIndexOf",xi);Gt("slice",xi);Gt("toString",xi);Gt("toLocaleString",xi);Gt("every",so);Gt("filter",so);Gt("find",so);Gt("findIndex",so);Gt("flatMap",so);Gt("forEach",so);Gt("map",so);Gt("some",so);Gt("reduce",FA);Gt("reduceRight",FA);function Gt(n,e){typeof Array.prototype[n]=="function"&&(Yu[n]=e(n))}function xi(n){return function(){var e=this[Be];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[n].apply(t,arguments)}}function so(n){return function(e,t){var r=this,i=this[Be];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[n](function(s,a){return e.call(t,s,a,r)})}}function FA(n){return function(){var e=this,t=this[Be];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(o,s,a){return i(o,s,a,e)},r[n].apply(r,arguments)}}var U5=Wo("ObservableArrayAdministration",fp);function Hc(n){return jc(n)&&U5(n[Be])}var HA,UA,N5={},Ui="add",Ku="delete";HA=Symbol.iterator;UA=Symbol.toStringTag;var NA=function(){function n(t,r,i){var o=this;r===void 0&&(r=Us),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Be]=N5,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,Pr(Map)||Je(18),this.keysAtom_=lp("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,cp(!0,function(){o.merge(t)})}var e=n.prototype;return e.has_=function(r){return this.data_.has(r)},e.has=function(r){var i=this;if(!ye.trackingDerivation)return this.has_(r);var o=this.hasMap_.get(r);if(!o){var s=o=new $s(this.has_(r),Rc,"ObservableMap.key?",!1);this.hasMap_.set(r,s),DA(s,function(){return i.hasMap_.delete(r)})}return o.get()},e.set=function(r,i){var o=this.has_(r);if(ir(this)){var s=or(this,{type:o?Rr:Ui,object:this,newValue:i,name:r});if(!s)return this;i=s.newValue}return o?this.updateValue_(r,i):this.addValue_(r,i),this},e.delete=function(r){var i=this;if(this.keysAtom_,ir(this)){var o=or(this,{type:Ku,object:this,name:r});if(!o)return!1}if(this.has_(r)){var s=Ua(),a=wr(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Ku,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return li(function(){var u;i.keysAtom_.reportChanged(),(u=i.hasMap_.get(r))==null||u.setNewValue_(!1);var c=i.data_.get(r);c.setNewValue_(void 0),i.data_.delete(r)}),a&&xr(this,l),!0}return!1},e.updateValue_=function(r,i){var o=this.data_.get(r);if(i=o.prepareNewValue_(i),i!==ye.UNCHANGED){var s=Ua(),a=wr(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Rr,object:this,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),a&&xr(this,l)}},e.addValue_=function(r,i){var o=this;this.keysAtom_,li(function(){var u,c=new $s(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(r,c),i=c.value_,(u=o.hasMap_.get(r))==null||u.setNewValue_(!0),o.keysAtom_.reportChanged()});var s=Ua(),a=wr(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:Ui,object:this,name:r,newValue:i}:null;a&&xr(this,l)},e.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var r=this,i=this.keys();return al({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:r.get(l)}}})},e.entries=function(){var r=this,i=this.keys();return al({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:[l,r.get(l)]}}})},e[HA]=function(){return this.entries()},e.forEach=function(r,i){for(var o=Ps(this),s;!(s=o()).done;){var a=s.value,l=a[0],u=a[1];r.call(i,u,l,this)}},e.merge=function(r){var i=this;return Go(r)&&(r=new Map(r)),li(function(){Qi(r)?y3(r).forEach(function(o){return i.set(o,r[o])}):Array.isArray(r)?r.forEach(function(o){var s=o[0],a=o[1];return i.set(s,a)}):ra(r)?(r.constructor!==Map&&Je(19,r),r.forEach(function(o,s){return i.set(s,o)})):r!=null&&Je(20,r)}),this},e.clear=function(){var r=this;li(function(){wA(function(){for(var i=Ps(r.keys()),o;!(o=i()).done;){var s=o.value;r.delete(s)}})})},e.replace=function(r){var i=this;return li(function(){for(var o=W5(r),s=new Map,a=!1,l=Ps(i.data_.keys()),u;!(u=l()).done;){var c=u.value;if(!o.has(c)){var d=i.delete(c);if(d)a=!0;else{var h=i.data_.get(c);s.set(c,h)}}}for(var f=Ps(o.entries()),p;!(p=f()).done;){var v=p.value,b=v[0],g=v[1],y=i.data_.has(b);if(i.set(b,g),i.data_.has(b)){var E=i.data_.get(b);s.set(b,E),y||(a=!0)}}if(!a)if(i.data_.size!==s.size)i.keysAtom_.reportChanged();else for(var C=i.data_.keys(),V=s.keys(),M=C.next(),z=V.next();!M.done;){if(M.value!==z.value){i.keysAtom_.reportChanged();break}M=C.next(),z=V.next()}i.data_=s}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(r,i){return _l(this,r)},e.intercept_=function(r){return Tl(this,r)},sp(n,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:UA,get:function(){return"Map"}}]),n}(),Go=Wo("ObservableMap",NA);function W5(n){if(ra(n)||Go(n))return n;if(Array.isArray(n))return new Map(n);if(Qi(n)){var e=new Map;for(var t in n)e.set(t,n[t]);return e}else return Je(21,n)}var WA,GA,G5={};WA=Symbol.iterator;GA=Symbol.toStringTag;var QA=function(){function n(t,r,i){r===void 0&&(r=Us),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Be]=G5,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Pr(Set)||Je(22),this.atom_=lp(this.name_),this.enhancer_=function(o,s){return r(o,s,i)},t&&this.replace(t)}var e=n.prototype;return e.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},e.clear=function(){var r=this;li(function(){wA(function(){for(var i=Ps(r.data_.values()),o;!(o=i()).done;){var s=o.value;r.delete(s)}})})},e.forEach=function(r,i){for(var o=Ps(this),s;!(s=o()).done;){var a=s.value;r.call(i,a,a,this)}},e.add=function(r){var i=this;if(this.atom_,ir(this)){var o=or(this,{type:Ui,object:this,newValue:r});if(!o)return this}if(!this.has(r)){li(function(){i.data_.add(i.enhancer_(r,void 0)),i.atom_.reportChanged()});var s=!1,a=wr(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:Ui,object:this,newValue:r}:null;a&&xr(this,l)}return this},e.delete=function(r){var i=this;if(ir(this)){var o=or(this,{type:Ku,object:this,oldValue:r});if(!o)return!1}if(this.has(r)){var s=!1,a=wr(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:Ku,object:this,oldValue:r}:null;return li(function(){i.atom_.reportChanged(),i.data_.delete(r)}),a&&xr(this,l),!0}return!1},e.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},e.entries=function(){var r=0,i=Array.from(this.keys()),o=Array.from(this.values());return al({next:function(){var a=r;return r+=1,a<o.length?{value:[i[a],o[a]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var r=this,i=0,o=Array.from(this.data_.values());return al({next:function(){return i<o.length?{value:r.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},e.replace=function(r){var i=this;return oa(r)&&(r=new Set(r)),li(function(){Array.isArray(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):Cl(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):r!=null&&Je("Cannot initialize set from "+r)}),this},e.observe_=function(r,i){return _l(this,r)},e.intercept_=function(r){return Tl(this,r)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[WA]=function(){return this.values()},sp(n,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:GA,get:function(){return"Set"}}]),n}(),oa=Wo("ObservableSet",QA),zv=Object.create(null),Bv="remove",XA=function(){function n(t,r,i,o){r===void 0&&(r=new Map),o===void 0&&(o=H3),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=r,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new Ol("ObservableObject.keys"),this.isPlainObject_=Qi(this.target_)}var e=n.prototype;return e.getObservablePropValue_=function(r){return this.values_.get(r).get()},e.setObservablePropValue_=function(r,i){var o=this.values_.get(r);if(o instanceof il)return o.set(i),!0;if(ir(this)){var s=or(this,{type:Rr,object:this.proxy_||this.target_,name:r,newValue:i});if(!s)return null;i=s.newValue}if(i=o.prepareNewValue_(i),i!==ye.UNCHANGED){var a=wr(this),l=!1,u=a||l?{type:Rr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),a&&xr(this,u)}return!0},e.get_=function(r){return ye.trackingDerivation&&!mi(this.target_,r)&&this.has_(r),this.target_[r]},e.set_=function(r,i,o){return o===void 0&&(o=!1),mi(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,i):o?Reflect.set(this.target_,r,i):(this.target_[r]=i,!0):this.extend_(r,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},e.has_=function(r){if(!ye.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(r);return i||(i=new $s(r in this.target_,Rc,"ObservableObject.key?",!1),this.pendingKeys_.set(r,i)),i.get()},e.make_=function(r,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(r in this.target_)){var o;if((o=this.target_[kr])!=null&&o[r])return;Je(1,i.annotationType_,this.name_+"."+r.toString())}for(var s=this.target_;s&&s!==Ic;){var a=Wu(s,r);if(a){var l=i.make_(this,r,a,s);if(l===0)return;if(l===1)break}s=Object.getPrototypeOf(s)}Hv(this,i,r)}},e.extend_=function(r,i,o,s){if(s===void 0&&(s=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(r,i,s);var a=o.extend_(this,r,i,s);return a&&Hv(this,o,r),a},e.defineProperty_=function(r,i,o){o===void 0&&(o=!1);try{Wn();var s=this.delete_(r);if(!s)return s;if(ir(this)){var a=or(this,{object:this.proxy_||this.target_,name:r,type:Ui,newValue:i.value});if(!a)return null;var l=a.newValue;i.value!==l&&(i=Fs({},i,{value:l}))}if(o){if(!Reflect.defineProperty(this.target_,r,i))return!1}else vi(this.target_,r,i);this.notifyPropertyAddition_(r,i.value)}finally{Gn()}return!0},e.defineObservableProperty_=function(r,i,o,s){s===void 0&&(s=!1);try{Wn();var a=this.delete_(r);if(!a)return a;if(ir(this)){var l=or(this,{object:this.proxy_||this.target_,name:r,type:Ui,newValue:i});if(!l)return null;i=l.newValue}var u=Fv(r),c={configurable:ye.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:u.get,set:u.set};if(s){if(!Reflect.defineProperty(this.target_,r,c))return!1}else vi(this.target_,r,c);var d=new $s(i,o,"ObservableObject.key",!1);this.values_.set(r,d),this.notifyPropertyAddition_(r,d.value_)}finally{Gn()}return!0},e.defineComputedProperty_=function(r,i,o){o===void 0&&(o=!1);try{Wn();var s=this.delete_(r);if(!s)return s;if(ir(this)){var a=or(this,{object:this.proxy_||this.target_,name:r,type:Ui,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=Fv(r),u={configurable:ye.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,r,u))return!1}else vi(this.target_,r,u);this.values_.set(r,new il(i)),this.notifyPropertyAddition_(r,void 0)}finally{Gn()}return!0},e.delete_=function(r,i){if(i===void 0&&(i=!1),!mi(this.target_,r))return!0;if(ir(this)){var o=or(this,{object:this.proxy_||this.target_,name:r,type:Bv});if(!o)return null}try{var s,a;Wn();var l=wr(this),u=!1,c=this.values_.get(r),d=void 0;if(!c&&(l||u)){var h;d=(h=Wu(this.target_,r))==null?void 0:h.value}if(i){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(c&&(this.values_.delete(r),c instanceof $s&&(d=c.value_),OA(c)),this.keysAtom_.reportChanged(),(s=this.pendingKeys_)==null||(a=s.get(r))==null||a.set(r in this.target_),l||u){var f={type:Bv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:d,name:r};l&&xr(this,f)}}finally{Gn()}return!0},e.observe_=function(r,i){return _l(this,r)},e.intercept_=function(r){return Tl(this,r)},e.notifyPropertyAddition_=function(r,i){var o,s,a=wr(this),l=!1;if(a||l){var u=a||l?{type:Ui,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:i}:null;a&&xr(this,u)}(o=this.pendingKeys_)==null||(s=o.get(r))==null||s.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Lc(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},n}();function Uc(n,e){var t;if(mi(n,Be))return n;var r=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new XA(n,new Map,String(r),J3(e));return Dc(n,Be,i),n}var Q5=Wo("ObservableObjectAdministration",XA);function Fv(n){return zv[n]||(zv[n]={get:function(){return this[Be].getObservablePropValue_(n)},set:function(t){return this[Be].setObservablePropValue_(n,t)}})}function Nc(n){return jc(n)?Q5(n[Be]):!1}function Hv(n,e,t){var r;(r=n.target_[kr])==null||delete r[t]}var X5=YA(0),dd=0,qA=function(){};function q5(n,e){Object.setPrototypeOf?Object.setPrototypeOf(n.prototype,e):n.prototype.__proto__!==void 0?n.prototype.__proto__=e:n.prototype=e}q5(qA,Array.prototype);var pp=function(n,e,t){sA(r,n);function r(o,s,a,l){var u;a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),u=n.call(this)||this;var c=new fp(a,s,l,!0);if(c.proxy_=cd(u),rA(cd(u),Be,c),o&&o.length){var d=Ml(!0);u.spliceWithArray(0,0,o),Vl(d)}return Object.defineProperty(cd(u),"0",X5),u}var i=r.prototype;return i.concat=function(){this[Be].atom_.reportObserved();for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(u){return Hc(u)?u.slice():u}))},i[t]=function(){var o=this,s=0;return al({next:function(){return s<o.length?{value:o[s++],done:!1}:{done:!0,value:void 0}}})},sp(r,[{key:"length",get:function(){return this[Be].getArrayLength_()},set:function(s){this[Be].setArrayLength_(s)}},{key:e,get:function(){return"Array"}}]),r}(qA,Symbol.toStringTag,Symbol.iterator);Object.entries(Yu).forEach(function(n){var e=n[0],t=n[1];e!=="concat"&&Dc(pp.prototype,e,t)});function YA(n){return{enumerable:!1,configurable:!0,get:function(){return this[Be].get_(n)},set:function(t){this[Be].set_(n,t)}}}function Y5(n){vi(pp.prototype,""+n,YA(n))}function KA(n){if(n>dd){for(var e=dd;e<n+100;e++)Y5(e);dd=n}}KA(1e3);function K5(n,e,t){return new pp(n,e,t)}function Ws(n,e){if(typeof n=="object"&&n!==null){if(Hc(n))return e!==void 0&&Je(23),n[Be].atom_;if(oa(n))return n[Be];if(Go(n)){if(e===void 0)return n.keysAtom_;var t=n.data_.get(e)||n.hasMap_.get(e);return t||Je(25,e,Ph(n)),t}if(Nc(n)){if(!e)return Je(26);var r=n[Be].values_.get(e);return r||Je(27,e,Ph(n)),r}if(ap(n)||Fc(n)||Xu(n))return n}else if(Pr(n)&&Xu(n[Be]))return n[Be];Je(28)}function J5(n,e){if(n||Je(29),ap(n)||Fc(n)||Xu(n)||Go(n)||oa(n))return n;if(n[Be])return n[Be];Je(24,n)}function Ph(n,e){var t;if(e!==void 0)t=Ws(n,e);else{if(dp(n))return n.name;Nc(n)||Go(n)||oa(n)?t=J5(n):t=Ws(n)}return t.name_}var Uv=Ic.toString;function JA(n,e,t){return t===void 0&&(t=-1),Eh(n,e,t)}function Eh(n,e,t,r,i){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var o=typeof n;if(o!=="function"&&o!=="object"&&typeof e!="object")return!1;var s=Uv.call(n);if(s!==Uv.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(n)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}n=Nv(n),e=Nv(e);var a=s==="[object Array]";if(!a){if(typeof n!="object"||typeof e!="object")return!1;var l=n.constructor,u=e.constructor;if(l!==u&&!(Pr(l)&&l instanceof l&&Pr(u)&&u instanceof u)&&"constructor"in n&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),r=r||[],i=i||[];for(var c=r.length;c--;)if(r[c]===n)return i[c]===e;if(r.push(n),i.push(e),a){if(c=n.length,c!==e.length)return!1;for(;c--;)if(!Eh(n[c],e[c],t-1,r,i))return!1}else{var d=Object.keys(n),h;if(c=d.length,Object.keys(e).length!==c)return!1;for(;c--;)if(h=d[c],!(mi(e,h)&&Eh(n[h],e[h],t-1,r,i)))return!1}return r.pop(),i.pop(),!0}function Nv(n){return Hc(n)?n.slice():ra(n)||Go(n)||Cl(n)||oa(n)?Array.from(n.entries()):n}function al(n){return n[Symbol.iterator]=Z5,n}function Z5(){return this}["Symbol","Map","Set"].forEach(function(n){var e=ip();typeof e[n]>"u"&&Je("MobX requires global '"+n+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:v5,extras:{getDebugName:Ph},$mobx:Be});if(!ue.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!hp)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function e4(n){n()}function t4(n){n||(n=e4),M5({reactionScheduler:n})}function n4(n){return T5(n)}var Wv=typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry;function ZA(n){var e={reaction:n,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+r4};return e}var r4=1e4,i4=1e4;function o4(n){var e=new Map,t=1,r=new n(function(o){var s=e.get(o);s&&(s.reaction.dispose(),e.delete(o))});return{addReactionToTrack:function(i,o,s){var a=t++;return r.register(s,a,i),i.current=ZA(o),i.current.finalizationRegistryCleanupToken=a,e.set(a,i.current),i.current},recordReactionAsCommitted:function(i){r.unregister(i),i.current&&i.current.finalizationRegistryCleanupToken&&e.delete(i.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var s4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function a4(){var n=new Set,e;function t(){e&&(clearTimeout(e),a())}function r(){var l,u;if(n.size>0){try{for(var c=s4(n),d=c.next();!d.done;d=c.next()){var h=d.value,f=h.current;f&&(f.reaction.dispose(),h.current=null)}}catch(p){l={error:p}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}n.clear()}e&&(clearTimeout(e),e=void 0)}function i(){e===void 0&&(e=setTimeout(a,i4))}function o(l){n.add(l),i()}function s(l){n.delete(l)}function a(){e=void 0;var l=Date.now();n.forEach(function(u){var c=u.current;c&&l>=c.cleanAt&&(c.reaction.dispose(),u.current=null,n.delete(u))}),n.size>0&&i()}return{addReactionToTrack:function(l,u,c){return l.current=ZA(u),o(l),l.current},recordReactionAsCommitted:s,forceCleanupTimerToRunNowForTests:t,resetCleanupScheduleForTests:r}}var eb=Wv?o4(Wv):a4(),l4=eb.addReactionToTrack,u4=eb.recordReactionAsCommitted,Gv=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o};function Qv(n){return"observer".concat(n)}var c4=function(){function n(){}return n}();function d4(){return new c4}function h4(n,e){e===void 0&&(e="observed");var t=Gv(It.useState(d4),1),r=t[0],i=Gv(It.useState(),2),o=i[1],s=function(){return o([])},a=It.useRef(null);if(!a.current)var l=new jo(Qv(e),function(){u.mounted?s():u.changedBeforeMount=!0}),u=l4(a,l,r);var c=a.current.reaction;It.useDebugValue(c,n4),It.useEffect(function(){return u4(a),a.current?(a.current.mounted=!0,a.current.changedBeforeMount&&(a.current.changedBeforeMount=!1,s())):(a.current={reaction:new jo(Qv(e),function(){s()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},s()),function(){a.current.reaction.dispose(),a.current=null}},[]);var d,h;if(c.track(function(){try{d=n()}catch(f){h=f}}),h)throw h;return d}var tb=typeof Symbol=="function"&&Symbol.for,Xv=tb?Symbol.for("react.forward_ref"):typeof ue.forwardRef=="function"&&ue.forwardRef(function(n){return null}).$$typeof,qv=tb?Symbol.for("react.memo"):typeof ue.memo=="function"&&ue.memo(function(n){return null}).$$typeof;function f4(n,e){var t;if(qv&&n.$$typeof===qv)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r=(t=void 0)!==null&&t!==void 0?t:!1,i=n,o=n.displayName||n.name;if(Xv&&n.$$typeof===Xv&&(r=!0,i=n.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var s=function(a,l){return h4(function(){return i(a,l)},o)};return o!==""&&(s.displayName=o),n.contextTypes&&(s.contextTypes=n.contextTypes),r&&(s=ue.forwardRef(s)),s=ue.memo(s),v4(n,s),s}var p4={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function v4(n,e){Object.keys(n).forEach(function(t){p4[t]||Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}t4(wu.unstable_batchedUpdates);var Yv=0;function m4(n){if(typeof Symbol=="function")return Symbol(n);var e="__$mobx-react "+n+" ("+Yv+")";return Yv++,e}var hd={};function Xi(n){return hd[n]||(hd[n]=m4(n)),hd[n]}function nb(n,e){if(Kv(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!Object.hasOwnProperty.call(e,t[i])||!Kv(n[t[i]],e[t[i]]))return!1;return!0}function Kv(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function ui(n,e,t){Object.hasOwnProperty.call(n,e)?n[e]=t:Object.defineProperty(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t})}var Jv=Xi("patchMixins"),rb=Xi("patchedDefinition");function g4(n,e){var t=n[Jv]=n[Jv]||{},r=t[e]=t[e]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function Zv(n,e){for(var t=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];e.locks++;try{var s;return n!=null&&(s=n.apply(this,i)),s}finally{e.locks--,e.locks===0&&e.methods.forEach(function(a){a.apply(t,i)})}}function em(n,e){var t=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];Zv.call.apply(Zv,[this,n,e].concat(o))};return t}function tm(n,e,t){var r=g4(n,e);r.methods.indexOf(t)<0&&r.methods.push(t);var i=Object.getOwnPropertyDescriptor(n,e);if(!(i&&i[rb])){var o=n[e],s=ib(n,e,i?i.enumerable:void 0,r,o);Object.defineProperty(n,e,s)}}function ib(n,e,t,r,i){var o,s=em(i,r);return o={},o[rb]=!0,o.get=function(){return s},o.set=function(l){if(this===n)s=em(l,r);else{var u=ib(this,e,t,r,l);Object.defineProperty(this,e,u)}},o.configurable=!0,o.enumerable=t,o}var Vs=Be||"$mobx",nm=Xi("isMobXReactObserver"),Ch=Xi("isUnmounted"),Ju=Xi("skipRender"),Su=Xi("isForcingUpdate");function y4(n){var e=n.prototype;if(n[nm]){var t=Ou(e);console.warn("The provided component class ("+t+`)
                has already been declared as an observer component.`)}else n[nm]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(n.__proto__!==ue.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=rm;else if(e.shouldComponentUpdate!==rm)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}fd(e,"props"),fd(e,"state"),n.contextType&&fd(e,"context");var r=e.render;if(typeof r!="function"){var i=Ou(e);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return e.render=function(){return this.render=A4.call(this,r),this.render()},tm(e,"componentDidMount",function(){this[Ch]=!1,this.render[Vs]||ue.Component.prototype.forceUpdate.call(this)}),tm(e,"componentWillUnmount",function(){var o=this.render[Vs];if(o)o.dispose(),this.render[Vs]=null;else{var s=Ou(this);console.warn("The reactive render of an observer class component ("+s+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[Ch]=!0}),n}function Ou(n){return n.displayName||n.name||n.constructor&&(n.constructor.displayName||n.constructor.name)||"<component>"}function A4(n){var e=this;ui(this,Ju,!1),ui(this,Su,!1);var t=Ou(this),r=n.bind(this),i=!1,o=function(){var l=new jo(t+".render()",function(){if(!i&&(i=!0,e[Ch]!==!0)){var u=!0;try{ui(e,Su,!0),e[Ju]||ue.Component.prototype.forceUpdate.call(e),u=!1}finally{ui(e,Su,!1),u&&(l.dispose(),e.render[Vs]=null)}}});return l.reactComponent=e,l};function s(){var a;i=!1;var l=(a=s[Vs])!=null?a:s[Vs]=o(),u=void 0,c=void 0;if(l.track(function(){try{c=cp(!1,r)}catch(d){u=d}}),u)throw u;return c}return s}function rm(n,e){return this.state!==e?!0:!nb(this.props,n)}function fd(n,e){var t=Xi("reactProp_"+e+"_valueHolder"),r=Xi("reactProp_"+e+"_atomHolder");function i(){return this[r]||ui(this,r,lp("reactive "+e)),this[r]}Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var s=!1;return Ms&&Wi&&(s=Ms(!0)),i.call(this).reportObserved(),Ms&&Wi&&Wi(s),this[t]},set:function(s){!this[Su]&&!nb(this[t],s)?(ui(this,t,s),ui(this,Ju,!0),i.call(this).reportChanged(),ui(this,Ju,!1)):ui(this,t,s)}})}function vp(n){return n.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(ue.Component,n)||Object.prototype.isPrototypeOf.call(ue.PureComponent,n)?y4(n):f4(n)}if(!ue.Component)throw new Error("mobx-react requires React to be available");if(!ut)throw new Error("mobx-react requires mobx to be available");function b4(n){if(Array.isArray(n))return n}function w4(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,s,a;try{for(t=t.call(n);!(i=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw a}}return r}}function Sh(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ob(n,e){if(n){if(typeof n=="string")return Sh(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sh(n,e)}}function x4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xn(n,e){return b4(n)||w4(n,e)||ob(n,e)||x4()}function pd(n,e){n&&Object.keys(e).forEach(function(t){var r=e[t].toString();n instanceof Element?n.setAttribute("data-".concat(t),r):n instanceof Document?n.documentElement.setAttribute("data-".concat(t),r):n instanceof HTMLElement?n.dataset[t]=r:n.setAttribute("data-".concat(t),r)})}function P4(n){if(!n)return"";var e=n.lastIndexOf("."),t=n.substring(e+1);return t.toLowerCase()}function $u(n){var e=P4(n),t=E4(e);return t}function E4(n){return n?/jpg|jpeg|png$/.test(n)?"image":/mp3|wav$/.test(n)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(n)?"video":"unknown":"unknown"}function im(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ql(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?im(Object(t),!0).forEach(function(r){ct(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):im(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function C4(n){var e=S4();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function S4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var O4=function(n){ta(t,n);var e=C4(t);function t(r){var i,o=r.five,s=r.container,a=r.configs;return Ho(this,t),i=e.call(this),ct(ht(i),"playing",!1),ct(ht(i),"ended",!1),ct(ht(i),"loading",!1),ct(ht(i),"containerSize",{width:0,height:0}),ct(ht(i),"waveAppearance",null),ct(ht(i),"appearance",{waveStyle:"wave"}),ct(ht(i),"avatar",{}),ct(ht(i),"visible",!1),ct(ht(i),"popUp",null),ct(ht(i),"drawerConfig",null),i.configs=a,i.container=s,i.five=o,i.appSize=a.appSize,i.appearance=ql(ql({},i.appearance),a.appearance),hp(ht(i),{visible:ut,setVisible:hn,playing:ut,setPlaying:hn,loading:ut,setLoading:hn,popUp:ut.ref,openPopUp:hn,drawerConfig:ut.ref,openDrawer:hn,ended:ut,waveAppearance:ut,avatar:ut,containerSize:ut,setContainerSize:hn,appearance:ut,setAppearance:hn,configs:ut.ref,setEnded:hn,setAvatar:hn}),Es(function(){return[i.appearance.waveStyle,i.loading]},function(l){var u=Xn(l,2),c=u[0],d=u[1];if(d===null){i.waveAppearance=null;return}if(c==="wave")switch(d){case!0:i.waveAppearance="double";break;case!1:i.waveAppearance="solid";break}else if(c==="solid")switch(d){case!0:i.waveAppearance="swap";break;case!1:i.waveAppearance="expand";break}},{fireImmediately:!0}),i.appSize?pd(i.container,{size:i.appSize}):Es(function(){return i.containerSize},function(l){if(l!=null&&l.width){var u=l.width,c=l.height,d=function(){return u<=500?"S":u<=1024?"M":u<=2048?"L":"XL"}(),h=function(){return c>u?"portrait":"landscape"}();pd(i.container,{size:d}),pd(i.container,{orientation:h})}},{fireImmediately:!0}),Es(function(){return i.ended},function(l){l&&i.emit("paused",!0)}),Es(function(){return i.playing},function(l){i.ended||i.emit(l?"playing":"paused")}),i}return Uo(t,[{key:"agentType",get:function(){var i,o,s=$u((i=this.videoAgentScene)===null||i===void 0?void 0:i.videoAgentMesh.videoUrl);return(o=this.avatar)!==null&&o!==void 0&&o.force?"avatar":s==="video"?"video":"none"}},{key:"openPopUp",value:function(i){if(!i){this.popUp=null;return}this.popUp=i}},{key:"setLoading",value:function(i){this.loading=i}},{key:"setAvatar",value:function(i){this.avatar=i}},{key:"setContainerSize",value:function(i,o){this.containerSize={width:i,height:o}}},{key:"setVisible",value:function(i){this.visible=i}},{key:"setPlaying",value:function(i){this.playing=i}},{key:"setEnded",value:function(i){this.ended=i}},{key:"setAppearance",value:function(i){this.appearance=ql(ql({},this.appearance),i)}},{key:"openDrawer",value:function(i){if(!i){var o;this.drawerConfig={content:"",height:(o=this.drawerConfig)===null||o===void 0?void 0:o.height};return}this.drawerConfig=i}},{key:"ready",get:function(){return!!this.videoAgentScene}},{key:"currentTime",get:function(){var i;return((i=this.videoAgentScene)===null||i===void 0?void 0:i.videoAgentMesh.currentTime)||0}},{key:"currentKeyframes",get:function(){var i=this;if(!this.vreoUnit)return[];var o=this.vreoUnit.keyframes;return o.filter(function(s){if(s.parsed||s.end<i.currentTime||s.start>i.currentTime)return!1;if(s.type===gt.BgMusic)return!0;var a=i.currentTime-s.start;return a<=100&&a>=0})}},{key:"mediaInstance",get:function(){var i;return(i=this.videoAgentScene)===null||i===void 0?void 0:i.videoAgentMesh.mediaInstance}},{key:"requestAnimationFrameLoop",value:function(i){var o,s,a=this;if((o=this.mediaInstance)!==null&&o!==void 0&&o.ended&&this.mediaInstance.currentTime!==0){var l;if(this.ended)return;(l=this.vreoUnit)===null||l===void 0||l.keyframes.forEach(function(h){return h.parsed=!1}),this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause(),this.mediaInstance.currentTime=0;return}if(!this.playing){var u;if(!((u=this.mediaInstance)!==null&&u!==void 0&&u.paused)){var c;(c=this.mediaInstance)===null||c===void 0||c.pause()}return}(s=this.mediaInstance)!==null&&s!==void 0&&s.paused&&this.playing&&this.mediaInstance.play();var d=this.currentKeyframes;d.forEach(function(h){h.parsed||(h.parsed=!0,a.emit(h.type,h,a.currentTime),i&&i(h.type,h,a.currentTime))})}},{key:"run",value:function(i){var o=this;this.stopInterval||(this.stopInterval=Yf(function(){return o.requestAnimationFrameLoop(i)}))}},{key:"clear",value:function(){var i,o;this.setPlaying(!1),(i=this.vreoUnit)===null||i===void 0||i.keyframes.forEach(function(s){return s.parsed=!1}),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.pause(),this.mediaInstance.currentTime=0),(o=this.stopInterval)===null||o===void 0||o.call(this),this.stopInterval=void 0}},{key:"dispose",value:function(){this.clear()}}]),t}(Kf),sb=ue.createContext(null);function sn(){var n=It.useContext(sb);if(!n)throw new Error(' "ControllerContext"');return n}function ao(){var n=sn();if(!n.five)throw new Error(' "five" ');return n.five}function $4(){var n=ao();return function(e){return n.project2d(e,!1)}}var Zu;(function(n){n.Move="Move",n.Rotate="Rotate"})(Zu||(Zu={}));var ll;(function(n){n.Clockwise="Clockwise",n.Anticlockwise="Anticlockwise",n.Loop="Loop"})(ll||(ll={}));var M4=Math.PI,vd=M4*2,md=!1;function Ea(n,e,t){return n===e?n:n+(e-n)*t}function V4(n,e,t,r){var i=t===ll.Clockwise,o=i?n-e:e-n,s=o%vd,a=s<0?s+vd:s,l=i?-a:a,u=n+l*r;return u%vd}var T4=function(e){var t=function(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{preload:!0};return new Promise(function(){var l=ar(wt.mark(function u(c,d){var h,f,p,v;return wt.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(md=!0,a.asyncStartCallback&&a.asyncStartCallback(),e.panoIndex!==void 0){g.next=4;break}return g.abrupt("return",d(!1));case 4:if(!(o.mode&&o.mode!==e.currentMode)){g.next=8;break}return g.next=7,e.changeMode(o.mode,o,s);case 7:return g.abrupt("return",c(!0));case 8:if(o.mode!==ws.Mode.Floorplan){g.next=10;break}return g.abrupt("return",c(!0));case 10:if(!(a.preload&&o.panoIndex!==void 0&&o.panoIndex!==e.panoIndex)){g.next=13;break}return g.next=13,e.preloadPano(o.panoIndex);case 13:if((h=a.asyncEndCallback)===null||h===void 0||h.call(a),!(o.panoIndex===void 0&&o.fov===void 0&&o.latitude===void 0&&o.longitude===void 0)){g.next=16;break}return g.abrupt("return",c(!0));case 16:if(f=o.panoIndex!==void 0?o.panoIndex:e.panoIndex,f===void 0){g.next=26;break}return p=performance.now(),g.next=21,e.ready();case 21:return v=Object.assign({},o,{duration:s-(performance.now()-p),moveEndCallback:function(){return c(!0)},moveCancelCallback:function(){c(!0)},effect:o.transEffect||"fly"}),g.next=24,e.moveToPano(f,v);case 24:g.next=27;break;case 26:d(!1);case 27:case"end":return g.stop()}},u)}));return function(u,c){return l.apply(this,arguments)}}())},r=function(){var i=ar(wt.mark(function o(s,a){var l,u,c,d,h,f,p,v,b,g=arguments;return wt.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(c=g.length>2&&g[2]!==void 0?g[2]:{},md=!1,(l=c.asyncStartCallback)===null||l===void 0||l.call(c),!(s.mode&&e.currentMode!==s.mode)){E.next=6;break}return E.next=6,e.changeMode(s.mode,s.mode===ws.Mode.Panorama?{latitude:0}:void 0);case 6:if(!(s.mode===ws.Mode.Panorama&&e.currentMode===ws.Mode.Panorama&&s.panoIndex!==void 0&&s.panoIndex!==e.panoIndex)){E.next=12;break}if(!c.preload){E.next=10;break}return E.next=10,e.preloadPano(s.panoIndex);case 10:return E.next=12,new Promise(function(C,V){e.moveToPano(s.panoIndex,{moveEndCallback:function(){return C(!0)},moveCancelCallback:function(){return V(!1)},effect:"fade"})});case 12:return E.next=14,e.ready();case 14:return(u=c.asyncEndCallback)===null||u===void 0||u.call(c),d=e.getCurrentState(),h=function(){return s}(),f=!1,p=performance.now(),v=a,s.rotation===ll.Loop&&(v=s.rotateSpeed?Math.ceil(Math.abs(h.longitude-d.longitude)/s.rotateSpeed*1e3):a,v=Math.min(a,v)),b=function C(){if(f||md){e.off("renderFrame",C);return}var V={};if(s.rotation!==ll.Loop){var M=(performance.now()-p)/a;V={fov:Ea(d.fov,h.fov,M),latitude:Ea(d.latitude,h.latitude,M),longitude:V4(d.longitude,h.longitude,s.rotation,M)}}else{var z=(performance.now()-p)/v,U=Math.floor(z),D=z-U,m=U%2===1,A=m?1-D:D;V={fov:Ea(d.fov,h.fov,A),latitude:Ea(d.latitude,h.latitude,A),longitude:Ea(d.longitude,h.longitude,A)}}e.setState(V,!0)},e.on("renderFrame",b),E.next=25,new Promise(function(C){setTimeout(function(){f=!0,e.off("renderFrame",b),C(!0)},a)});case 25:return E.abrupt("return",E.sent);case 26:case"end":return E.stop()}},o)}));return function(s,a){return i.apply(this,arguments)}}();return{move:t,rotate:r}};function _4(){var n=sn(),e=ao(),t=ue.useRef();return ue.useEffect(function(){var r=function(){var i=ar(wt.mark(function o(s){var a,l,u,c,d;return wt.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t.current||(t.current=T4(e)),a=s.start,l=s.end,u=s.data,c=u,d=c.effect,d!==Zu.Rotate){f.next=9;break}return f.next=7,t.current.rotate(u,l-a);case 7:f.next=21;break;case 9:if(d!==Zu.Move){f.next=14;break}return f.next=12,t.current.move(u,l-a);case 12:f.next=21;break;case 14:if(!(c.panoIndex!==void 0&&c.panoIndex!==e.panoIndex)){f.next=19;break}return f.next=17,t.current.move(u,l-a);case 17:f.next=21;break;case 19:return f.next=21,t.current.rotate(u,l-a);case 21:case"end":return f.stop()}},o)}));return function(s){return i.apply(this,arguments)}}();return n.on(gt.CameraMovement,r),function(){n.off(gt.CameraMovement,r)}},[n]),ue.createElement(ue.Fragment,null)}var oi=new Map;function ab(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n)return function(){};if(t&&e(n.clientWidth,n.clientHeight),typeof ResizeObserver<"u"&&ResizeObserver){var r=new ResizeObserver(function(){return e(n.clientWidth,n.clientHeight)});return r.observe(n),oi.set(n,oi.get(n)||1),function(){n&&r.unobserve(n),oi.get(n)===1&&oi.delete(n)}}else{var i=document.createElement("iframe");return i.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",i.classList.add("resize-sensor-iframe"),n.appendChild(i),i.contentWindow?(i.contentWindow.addEventListener("resize",function(){e(i.clientWidth,i.clientHeight)}),oi.set(n,oi.get(n)||1),function(){n.removeChild(i),oi.get(n)===1&&oi.delete(n)}):function(){}}}function k4(n){return n&&oi.get(n)||!1}function I4(){var n=It.useRef(null),e=sn();return It.useEffect(function(){if(n.current){var t=e.container.parentElement;if(!k4(t)){var r=ab(t,function(i,o){e.setContainerSize(i,o)});return function(){r()}}}},[]),It.createElement("div",{className:"resizeObserver-element",ref:n})}var j4=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,D4=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1,L4=D4||j4,Ts=document.createElement("video");Ts.setAttribute("playsinline","true");Ts.setAttribute("webkit-playsinline","true");L4&&Ts.paused&&Ts.addEventListener("click",function(){return Ts.play()},{once:!0});function om(n){var e=n.url,t=n.children;return ue.createElement("div",{className:"vreo-infoPanel-container"},ue.createElement("div",{className:"vreo-infoPanel"},t,ue.createElement("img",{src:e})))}function sm(n){var e=n.url,t=n.children,r=ue.useRef(null),i=sn();return ue.useEffect(function(){var o,s,a=((o=i.configs)===null||o===void 0||(s=o.videos)===null||s===void 0?void 0:s.videoPanel)||Ts;if(r.current){a.src=e,r.current.contains(a)||r.current.appendChild(a);var l=function u(){a.removeEventListener("canplaythrough",u);try{a.play()}catch{}};return a.addEventListener("canplaythrough",l),a.load(),function(){var u;a.pause(),(u=r.current)!==null&&u!==void 0&&u.contains(a)&&r.current.removeChild(a)}}},[r.current]),ue.createElement("div",{className:"vreo-infoPanel-container"},ue.createElement("div",{className:"vreo-infoPanel"},t,ue.createElement("div",{className:"vreo-infoPanel-inner",ref:r})))}var Yl=function(e){return!e.title&&!e.subTitle?null:ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"vreo-infoPanel-title"},ue.createElement("div",{className:"vreo-infoPanel-t1"},e.title),ue.createElement("div",{className:"vreo-infoPanel-t2"},e.subTitle)))};function R4(){var n=ue.useRef(),e=sn();return ue.useEffect(function(){var t;if(((t=e.configs)===null||t===void 0?void 0:t.keyframeMap.InfoPanel)!==!1){var r=function(o){var s=o.start,a=o.end,l=o.data,u=l,c=u.title,d=u.subTitle,h=u.style;do{if(h===L2.PopUp){u.type===Wl.Image?e.openPopUp(ue.createElement(om,{url:u.url},ue.createElement(Yl,{title:c,subTitle:d}))):u.type===Wl.Video&&e.openPopUp(ue.createElement(sm,{url:u.url},ue.createElement(Yl,{title:c,subTitle:d})));break}u.type===Wl.Image?e.openDrawer({content:ue.createElement(om,{url:u.url},ue.createElement(Yl,{title:c,subTitle:d})),height:"60vh"}):u.type===Wl.Video&&e.openDrawer({content:ue.createElement(sm,{url:u.url},ue.createElement(Yl,{title:c,subTitle:d})),height:"60vh"})}while(!1);n.current=setTimeout(function(){e.openDrawer(!1),e.openPopUp(!1)},a-s)};return e.on(gt.InfoPanel,r),e.on("ended",function(){e.openPopUp(!1)}),e.on("paused",function(){e.openPopUp(!1)}),function(){e.off(gt.InfoPanel,r),n.current&&clearTimeout(n.current)}}},[e]),ue.createElement(ue.Fragment,null)}var z4=function(e,t){var r=t.videoElement,i={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:r},o=function(p){i.videoTexture&&(i.videoTexture.image.muted=p,i.videoTexture.image.play())},s=function(){return i.videoTexture?i.videoTexture.image.muted:!0},a=function(){if(!i.enabled&&i.videoTexture){i.enabled=!0,i.videoMeshes=u(),i.videoMeshes.forEach(function(v){return e.scene.add(v)});var p=function(){if(i.videoTexture){var b=function g(){var y;i.videoTexture&&((y=i.videoTexture)===null||y===void 0||y.image.removeEventListener("timeupdate",g),i.videoTextureEnabled=!0,i.videoMeshes.forEach(function(E){E.material.map!==i.videoTexture&&(E.material.map=i.videoTexture)}),e.needsRender=!0)};i.videoTexture.image.addEventListener("timeupdate",b),i.videoTexture&&i.videoMeshes.length&&i.videoTexture.image.play()}};if(e.model.loaded)p();else return e.once("modelLoaded",function(){return p()})}},l=function(){i.enabled&&(i.enabled=!1,i.videoMeshes.forEach(function(p){p.geometry.dispose(),p.material.dispose(),e.scene.remove(p),i.videoTexture&&i.videoTexture.image.pause()}),i.videoMeshes=[],e.needsRender=!0)},u=function(){return i.rectPoints.map(function(p,v){var b=new Tt,g=128,y=[];y.push(p[0].x,p[0].y,p[0].z);for(var E=1;E<g;E++)y.push(p[0].x+(p[1].x-p[0].x)*E/g,p[0].y+(p[1].y-p[0].y)*E/g,p[0].z+(p[1].z-p[0].z)*E/g);y.push(p[1].x,p[1].y,p[1].z),y.push(p[2].x,p[2].y,p[2].z);for(var C=1;C<g;C++)y.push(p[2].x+(p[3].x-p[2].x)*C/g,p[2].y+(p[3].y-p[2].y)*C/g,p[2].z+(p[3].z-p[2].z)*C/g);y.push(p[3].x,p[3].y,p[3].z);var V=[];V.push(0,1);for(var M=1;M<g;M++)V.push(0,1-M/g);V.push(0,0),V.push(1,0);for(var z=1;z<g;z++)V.push(1,z/g);V.push(1,1);for(var U=[],D=0;D<g;D++)U.push(D,D+1,g*2-D,D,g*2-D,g*2+1-D);b.setAttribute("position",new Ct(new Float32Array(y),3)),b.setAttribute("uv",new Ct(new Float32Array(V),2)),b.setIndex(new Ct(new Uint32Array(U),1));var m=new st({map:i.videoTextureEnabled?i.videoTexture:i.imageTexture,side:fn}),A=new nt(b,m);return A.renderOrder=1,A.name="video-".concat(v,"-").concat(performance.now()),A})},c=function(p){var v=new wi().load(p);return v.minFilter=ci,v.magFilter=ci,v.format=Bu,v},d=function(p,v){return new Promise(function(b,g){var y=new XMLHttpRequest;y.onreadystatechange=function(){if(y.readyState==4)if(y.status==200){var E=window.URL||window.webkitURL;v=v||document.createElement("video"),v.crossOrigin="anonymous",v.autoplay=!0,v.muted=!0,v.loop=!0,v.playsInline=!0,v.src=E.createObjectURL(y.response);var C=new Jf(v);C.minFilter=ci,C.magFilter=ci,C.format=Bu,b(Object.assign(C,{videoSource:p}))}else g(new Error("Video download Error: "+y.status))},y.onerror=function(E){return g(E)},y.open("GET",p),y.responseType="blob",y.send()})},h=function(){var f=ar(wt.mark(function p(v,b){var g,y,E;return wt.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return g=v.video_src,y=v.video_poster_src,E=v.points,i.videoSource=g,i.rectPoints=E.map(function(M){return M.map(function(z){var U=z.x,D=z.y,m=z.z;return new H(U,D,m)})}),i.imageTexture=c(y),b&&(i.videoElement=b),V.next=7,d(i.videoSource,i.videoElement);case 7:i.videoTexture=V.sent,i.enabled=!!v.enable,i.enabled&&a();case 10:case"end":return V.stop()}},p)}));return function(v,b){return f.apply(this,arguments)}}();return e.on("modeChange",function(){return o(!0)}),e.on("wantsTapGesture",function(f){if(i.enabled){var p=f.intersectObjects(e.scene.children,!0),v=Xn(p,1),b=v[0];if(b&&/^video/.test(b.object.name))return i.videoTexture&&o(!i.videoTexture.image.muted),!1}}),e.on("panoArrived",function(){if(i.enabled&&!s()){var f=e.camera.position,p=i.rectPoints.find(function(v){var b=v.reduce(function(g,y){return new H(g.x+y.x/v.length,g.y+y.y/v.length,g.z+y.z/v.length)},new H);return v.map(function(g){return new H((g.x+b.x)/2,(g.y+b.y)/2,(g.z+b.z)/2)}).filter(function(g){g=g.clone().sub(f).normalize();var y=new oo(f,g),E=y.intersectObjects(e.scene.children,!0),C=Xn(E,1),V=C[0];return!!V&&/^video/.test(V.object.name)}).length>=2});p||o(!0)}}),e.on("renderFrame",function(){i.videoMeshes.forEach(function(f){f&&(f.needsRender=!0)})}),e.on("load",function(f){f.modelTVVideoData&&h(f.modelTVVideoData)}),{enable:a,disable:l,load:h}};function B4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Na(n,e,t){return B4()?Na=Reflect.construct:Na=function(i,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(i,a),u=new l;return s&&Vy(u,s.prototype),u},Na.apply(null,arguments)}function F4(n){if(Array.isArray(n))return Sh(n)}function H4(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function U4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N4(n){return F4(n)||H4(n)||ob(n)||U4()}function W4(n){var e=new Ue;return e.fromArray(n),function(t){var r=Na(H,N4(t));return r.applyMatrix4(e),r.toArray()}}function G4(){var n=sn(),e=ao(),t=ue.useRef(),r=ue.useRef();return ue.useEffect(function(){var i=function(){var o=ar(wt.mark(function s(a){var l,u,c,d,h,f,p,v,b,g,y;return wt.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return t.current||(t.current=z4(e,{})),c=a.start,d=a.end,h=a.data,f=h.videoSrc,p=h.videoPosterSrc,v=h.vertexs,b=h.matrixWorld,g=function(){if(v.length<4)throw new Error("ModelVideo:  ....");if(v.length===4)return v;var V=new tl;return v.forEach(function(M){return V.expandByPoint(new H(M.x,M.y,M.z))}),[new H(V.min.x,V.max.y,V.max.z),new H(V.min.x,V.min.y,V.max.z),new H(V.max.x,V.min.y,V.max.z),new H(V.max.x,V.max.y,V.max.z)]}(),y=function(){if(b){var V=W4(b);return[g.map(function(M){var z=V([M.x,M.y,M.z]);return{x:z[0],y:z[1],z:z[2]}})]}return[g]}(),t.current.disable(),C.next=8,t.current.load({video_src:f,video_poster_src:p,points:y},(l=n.configs)===null||l===void 0||(u=l.videos)===null||u===void 0?void 0:u.modelTVVideo);case 8:t.current.enable(),r.current=setTimeout(function(){var V;return(V=t.current)===null||V===void 0?void 0:V.disable()},d-c);case 10:case"end":return C.stop()}},s)}));return function(a){return o.apply(this,arguments)}}();return n.on(gt.ModelVideo,i),function(){n.off(gt.ModelVideo,i),r.current&&clearTimeout(r.current)}},[n]),ue.createElement(ue.Fragment,null)}var Oh=function(n,e){return Oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Oh(n,e)};function sa(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Oh(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mp=function(n){sa(e,n);function e(){var t=n.call(this)||this;t.type="LineSegmentsGeometry";var r=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],i=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],o=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];return t.setIndex(o),t.setAttribute("position",new mr(r,3)),t.setAttribute("uv",new mr(i,2)),t}return e.prototype.applyMatrix4=function(t){var r=this.attributes.instanceStart,i=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(t),i.applyMatrix4(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},e.prototype.setPositions=function(t){var r;t instanceof Float32Array?r=t:Array.isArray(t)?r=new Float32Array(t):r=new Float32Array;var i=new Fu(r,6,1);return this.setAttribute("instanceStart",new di(i,3,0)),this.setAttribute("instanceEnd",new di(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},e.prototype.setColors=function(t){var r;t instanceof Float32Array?r=t:Array.isArray(t)?r=new Float32Array(t):r=new Float32Array;var i=new Fu(r,6,1);return this.setAttribute("instanceColorStart",new di(i,3,0)),this.setAttribute("instanceColorEnd",new di(i,3,3)),this},e.prototype.fromWireframeGeometry=function(t){return this.setPositions(t.attributes.position.array),this},e.prototype.fromEdgesGeometry=function(t){return this.setPositions(t.attributes.position.array),this},e.prototype.fromMesh=function(t){return this.fromWireframeGeometry(new R2(t.geometry)),this},e.prototype.fromLineSegments=function(t){var r=t.geometry;if(r instanceof Ty){var i=new Tt().fromGeometry(r);this.setPositions(i.attributes.position.array)}else r instanceof Tt&&this.setPositions(r.attributes.position.array);return this},e.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new tl);var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){var i=new tl;this.boundingBox.setFromBufferAttribute(t),i.setFromBufferAttribute(r),this.boundingBox.union(i)}},e.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new Zf),this.boundingBox===null&&this.computeBoundingBox();var t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){var i=this.boundingSphere.center;this.boundingBox.getCenter(i);for(var o=0,s=new H,a=0,l=t.count;a<l;a++)s.fromBufferAttribute(t,a),o=Math.max(o,i.distanceToSquared(s)),s.fromBufferAttribute(r,a),o=Math.max(o,i.distanceToSquared(s));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},e.prototype.toJSON=function(){},e}(z2);Object.assign(mp.prototype,{isLineSegmentsGeometry:!0});var gd={uniforms:kc.merge([Hu.common,Hu.fog,{linewidth:{value:1},resolution:{value:new Jt(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},Wc=function(n){sa(e,n);function e(t){var r=n.call(this,{uniforms:kc.clone(gd.uniforms),vertexShader:gd.vertexShader,fragmentShader:gd.fragmentShader,clipping:!0})||this;return r.type="LineMaterial",r.dashed=!1,Object.defineProperties(r,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(i){this.uniforms.diffuse.value=i}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(i){this.uniforms.linewidth.value=i}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(i){this.uniforms.dashScale.value=i}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(i){this.uniforms.dashSize.value=i}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(i){this.uniforms.gapSize.value=i}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(i){this.uniforms.opacity.value=i}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(i){this.uniforms.resolution.value.copy(i)}}}),r.setValues(t),r}return e}(Wr);Object.assign(Wc.prototype,{isLineMaterial:!0});var lb=function(n){sa(e,n);function e(t,r){var i=n.call(this)||this;return i.type="LineSegments2",i.geometry=t!==void 0?t:new mp,i.material=r!==void 0?r:new Wc({color:Math.random()*16777215}),i}return e.prototype.computeLineDistances=function(){for(var t=this.geometry,r=t.attributes.instanceStart,i=t.attributes.instanceEnd,o=new Float32Array(2*r.count),s=new H,a=new H,l=0,u=0,c=r.count;l<c;l++,u+=2)s.fromBufferAttribute(r,l),a.fromBufferAttribute(i,l),o[u]=u===0?0:o[u-1],o[u+1]=o[u]+s.distanceTo(a);var d=new Fu(o,2,1);return t.setAttribute("instanceDistanceStart",new di(d,1,0)),t.setAttribute("instanceDistanceEnd",new di(d,1,1)),this},e.prototype.raycast=function(t,r){t.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var i=t.ray,o=t.camera,s=o.projectionMatrix,a=this.geometry,l=this.material,u=l.resolution,c=l.linewidth,d=a.attributes.instanceStart,h=a.attributes.instanceEnd,f=new hi,p=new hi,v=new hi,b=new H,g=new Ue,y=new qn,E=new H;i.at(1,v),v.w=1,v.applyMatrix4(o.matrixWorldInverse),v.applyMatrix4(s),v.multiplyScalar(1/v.w),v.x*=u.x/2,v.y*=u.y/2,v.z=0,b.copy(v);var C=this.matrixWorld;g.multiplyMatrices(o.matrixWorldInverse,C);for(var V=0,M=d.count;V<M;V++){f.fromBufferAttribute(d,V),p.fromBufferAttribute(h,V),f.w=1,p.w=1,f.applyMatrix4(g),p.applyMatrix4(g),f.applyMatrix4(s),p.applyMatrix4(s),f.multiplyScalar(1/f.w),p.multiplyScalar(1/p.w);var z=f.z<-1&&p.z<-1,U=f.z>1&&p.z>1;if(!(z||U)){f.x*=u.x/2,f.y*=u.y/2,p.x*=u.x/2,p.y*=u.y/2,y.start.copy(f),y.start.z=0,y.end.copy(p),y.end.z=0;var D=y.closestPointToPointParameter(b,!0);y.at(D,E);var m=Pn.lerp(f.z,p.z,D),A=m>=-1&&m<=1,x=b.distanceTo(E)<c*.5;if(A&&x){y.start.fromBufferAttribute(d,V),y.end.fromBufferAttribute(h,V),y.start.applyMatrix4(C),y.end.applyMatrix4(C);var S=new H,$=new H;i.distanceSqToSegment(y.start,y.end,$,S),r.push({point:$,pointOnLine:S,distance:i.origin.distanceTo($),object:this,faceIndex:V})}}}},e}(nt);Object.assign(lb.prototype,{isLineSegments2:!0});var gp=function(n){sa(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.type="Line2",i}return e}(lb);Object.assign(gp.prototype,{isLine2:!0});var yp=function(n){sa(e,n);function e(){var t=n.call(this)||this;return t.type="LineGeometry",t}return e.prototype.setPositions=function(t){for(var r=t.length-3,i=new Float32Array(2*r),o=0;o<r;o+=3)i[2*o]=t[o],i[2*o+1]=t[o+1],i[2*o+2]=t[o+2],i[2*o+3]=t[o+3],i[2*o+4]=t[o+4],i[2*o+5]=t[o+5];return n.prototype.setPositions.call(this,i),this},e.prototype.setColors=function(t){for(var r=t.length-3,i=new Float32Array(2*r),o=0;o<r;o+=3)i[2*o]=t[o],i[2*o+1]=t[o+1],i[2*o+2]=t[o+2],i[2*o+3]=t[o+3],i[2*o+4]=t[o+4],i[2*o+5]=t[o+5];return n.prototype.setColors.call(this,i),this},e.prototype.fromLine=function(t){var r=t.geometry;if(r instanceof Ty){var i=new Tt().fromGeometry(r);this.setPositions(i.attributes.position.array)}else r instanceof Tt&&this.setPositions(r.attributes.position.array);return this},e.prototype.copy=function(){return this},e}(mp);Object.assign(yp.prototype,{isLineGeometry:!0});var Q4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==",am=14467195,X4=8,q4=2,Y4=20,lm=null,ub=function(n){sa(e,n);function e(t,r){t===void 0&&(t=new H),r===void 0&&(r=new H);var i=n.call(this)||this;i.type="FiveLine",i.needsRender=!0;var o=new yp,s=new Wc({color:am,linewidth:q4,dashScale:Y4,dashed:!1});i.line=new gp(o,s);var a=new Tt,l=new Uu({color:am,size:X4,map:lm||(lm=new wi().load(Q4)),sizeAttenuation:!1,transparent:!0});return i.points=new Nu(a,l),i.points.renderOrder=11,i.points.frustumCulled=!1,i.setPoints(t,r),i.add(i.line,i.points),i}return Object.defineProperty(e,"version",{get:function(){return"6.4.0-alpha.40"},enumerable:!1,configurable:!0}),e.prototype.setPoints=function(t,r){var i=[].concat(t.toArray(),r.toArray());this.points.geometry.setAttribute("position",new Ct(new Float32Array(i),3)),this.line.geometry.setPositions(i),this.line.computeLineDistances(),this.needsRender=!0},e.prototype.getPoints=function(){var t=this.points.geometry.attributes.position.array;return[new H(t[0],t[1],t[2]),new H(t[3],t[4],t[5])]},e.prototype.setMaterial=function(t){var r=this.line.material;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];i==="dashed"?(r.dashed=o,o?r.defines.USE_DASH="":delete r.defines.USE_DASH,r.needsUpdate=!0):r[i]=t[i]}this.needsRender=!0},e.prototype.setResolution=function(t,r){var i=this.line.material.resolution;(i.x!==t||i.y!==r)&&(i.set(t,r),this.needsRender=!0)},e}(Tn);Object.assign(ub.prototype,{isFiveLine:!0});var cb={Linear:{None:function(n){return n}}},La;typeof self>"u"&&typeof process<"u"&&process.hrtime?La=function(){var n=process.hrtime();return n[0]*1e3+n[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?La=self.performance.now.bind(self.performance):Date.now!==void 0?La=Date.now:La=function(){return new Date().getTime()};var As=La,K4=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,t){e===void 0&&(e=As()),t===void 0&&(t=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],s=!t;o&&o.update(e,s)===!1&&!t&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),db={Linear:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),o=db.Utils.Linear;return e<0?o(n[0],n[1],r):e>1?o(n[t],n[t-1],t-r):o(n[i],n[i+1>t?t:i+1],r-i)},Utils:{Linear:function(n,e,t){return(e-n)*t+n}}},hb=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),fb=new K4,J4=function(){function n(e,t){t===void 0&&(t=fb),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=cb.Linear.None,this._interpolationFunction=db.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=hb.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),t!==void 0&&(this._duration=t),this},n.prototype.duration=function(e){return this._duration=e,this},n.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?As()+parseFloat(e):e:As(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},n.prototype._setupProperties=function(e,t,r,i){for(var o in r){var s=e[o],a=Array.isArray(s),l=a?"array":typeof s,u=!a&&Array.isArray(r[o]);if(!(l==="undefined"||l==="function")){if(u){var c=r[o];if(c.length===0)continue;c=c.map(this._handleRelativeValue.bind(this,s)),r[o]=[s].concat(c)}if((l==="object"||a)&&s&&!u){t[o]=a?[]:{};for(var d in s)t[o][d]=s[d];i[o]=a?[]:{},this._setupProperties(s,t[o],r[o],i[o])}else typeof t[o]>"u"&&(t[o]=s),a||(t[o]*=1),u?i[o]=r[o].slice().reverse():i[o]=t[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return e===void 0&&(e=As()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},n.prototype.resume=function(e){return e===void 0&&(e=As()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return this._group=e,this},n.prototype.delay=function(e){return this._delayTime=e,this},n.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return this._yoyo=e,this},n.prototype.easing=function(e){return this._easingFunction=e,this},n.prototype.interpolation=function(e){return this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){if(e===void 0&&(e=As()),t===void 0&&(t=!0),this._isPaused)return!0;var r,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=this._duration===0||i>1?1:i;var s=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),i===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,r,i){for(var o in r)if(t[o]!==void 0){var s=t[o]||0,a=r[o],l=Array.isArray(e[o]),u=Array.isArray(a),c=!l&&u;c?e[o]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[o],s,a,i):(a=this._handleRelativeValue(s,a),typeof a=="number"&&(e[o]=s+(a-s)*i))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n}();hb.nextId;var Br=fb;Br.getAll.bind(Br);Br.removeAll.bind(Br);Br.add.bind(Br);var Z4=Br.remove.bind(Br);Br.update.bind(Br);function ex(n){var e=tx();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function tx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nx=function(n){ta(t,n);var e=ex(t);function t(){var r;Ho(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),ct(ht(r),"disposeMethods",[]),ct(ht(r),"onDispose",function(a){return r.disposeMethods.push(a),ht(r)}),ct(ht(r),"play",function(){return r.start(),r.animationFrameDisposer=Yf(function(){return r.update()}),ht(r)}),ct(ht(r),"dispose",function(){var a,l;r.stop(),(a=(l=r).animationFrameDisposer)===null||a===void 0||a.call(l),r.disposeMethods.forEach(function(u){return u()}),r.disposeMethods=[],Z4(ht(r))}),r}return Uo(t)}(J4);function rx(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cb.Linear.None,t=new nx({progress:0}).to({progress:1});return n!==void 0&&t.duration(n),e!==void 0&&t.easing(e),t}function ix(n,e,t){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",i=new wi().load(r),o=new qe(16777215),s=new ub;s.setMaterial({linewidth:2,color:o});var a=s.points.material;return a.map=i,a.color.set(o),s.line.material.depthTest=!1,rx().onUpdate(function(l){var u=l.progress,c=.5-u/2,d=.5+u/2,h=e.clone().lerp(t,c),f=e.clone().lerp(t,d);s.setPoints(h,f)}).onStart(function(){return n.scene.add(s)}).onDispose(function(){n.scene.remove(s),n.needsRender=!0})}function ox(){var n=ue.useState(null),e=Xn(n,2),t=e[0],r=e[1],i=ao(),o=ue.useRef(null),s=ue.useState(null),a=Xn(s,2),l=a[0],u=a[1],c=ue.useRef(),d=sn(),h=$4(),f=function(){o.current&&o.current.dispose()};return ue.useEffect(function(){var p=function(b){var g=b.start,y=b.end,E=b.data,C=E,V=Xn(C.twoVertexs,2),M=V[0],z=V[1],U=new H(M.x,M.y,M.z),D=new H(z.x,z.y,z.z);o.current=ix(i,U.clone(),D.clone()),o.current.play();var m=U.lerp(D,.5),A=U.distanceTo(D),x=h(m);if(x){var S=x.x,$=x.y;r({center:m,distance:A}),u({left:S,top:$}),c.current=setTimeout(function(){r(null),u(null),f()},y-g)}};return d.on(gt.PanoEffect,p),function(){d.off(gt.PanoEffect,p),c.current&&clearTimeout(c.current),f()}},[d]),ue.useEffect(function(){var p=function(){if(t!=null&&t.center){var b=t.center,g=b.x,y=b.y,E=b.z,C=h(new H(g,y,E));if(C){var V=C.x,M=C.y;u({left:V,top:M})}}};return i.on("currentStateChange",p),function(){i.off("currentStateChange",p)}},[t==null?void 0:t.center]),ue.createElement(ue.Fragment,null,ue.createElement("div",{className:No("PanoEffect",{"PanoEffect--notHidden":t}),style:{left:((l==null?void 0:l.left)||0)+"px",top:((l==null?void 0:l.top)||0)+"px"}},(t==null?void 0:t.distance.toFixed(4))+"m"))}function sx(){console.debug("%c %c@realsee/dnalogel %cv3.67.2",["background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')","background-repeat: no-repeat","background-position: 0 center","padding-left: 8px"].join(";"),"","background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px")}function ax(){const n=typeof OffscreenCanvas<"u",e=n&&new OffscreenCanvas(1,1).getContext("webgl")!==null;n&&!e&&Object.assign(window,{OffscreenCanvas:function(t,r){const i=document.createElement("canvas");return i.width=t,i.height=r,i}})}Promise.resolve();var _s=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-_s.Bounce.Out(1-n)},Out:function(n){return n<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375},InOut:function(n){return n<.5?_s.Bounce.In(n*2)*.5:_s.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Ra=function(){return performance.now()},lx=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,t){e===void 0&&(e=Ra()),t===void 0&&(t=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],s=!t;o&&o.update(e,s)===!1&&!t&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),$h={Linear:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),o=$h.Utils.Linear;return e<0?o(n[0],n[1],r):e>1?o(n[t],n[t-1],t-r):o(n[i],n[i+1>t?t:i+1],r-i)},Utils:{Linear:function(n,e,t){return(e-n)*t+n}}},pb=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),Mh=new lx,ux=function(){function n(e,t){t===void 0&&(t=Mh),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=_s.Linear.None,this._interpolationFunction=$h.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=pb.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,t){if(e===void 0&&(e=Ra()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,t,r,i,o){for(var s in r){var a=e[s],l=Array.isArray(a),u=l?"array":typeof a,c=!l&&Array.isArray(r[s]);if(!(u==="undefined"||u==="function")){if(c){var d=r[s];if(d.length===0)continue;for(var h=[a],f=0,p=d.length;f<p;f+=1){var v=this._handleRelativeValue(a,d[f]);if(isNaN(v)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(v)}c&&(r[s]=h)}if((u==="object"||l)&&a&&!c){t[s]=l?[]:{};var b=a;for(var g in b)t[s][g]=b[g];i[s]=l?[]:{};var d=r[s];if(!this._isDynamic){var y={};for(var g in d)y[g]=d[g];r[s]=d=y}this._setupProperties(b,t[s],d,i[s],o)}else(typeof t[s]>"u"||o)&&(t[s]=a),l||(t[s]*=1),c?i[s]=r[s].slice().reverse():i[s]=t[s]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return e===void 0&&(e=Ra()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},n.prototype.resume=function(e){return e===void 0&&(e=Ra()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e===void 0&&(e=Mh),this._group=e,this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=_s.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=$h.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){var r=this,i;if(e===void 0&&(e=Ra()),t===void 0&&(t=!0),this._isPaused)return!0;var o,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(r._duration===0||a>u)return 1;var b=Math.trunc(a/l),g=a-b*l,y=Math.min(g/r._duration,1);return y===0&&a===r._duration?1:y},d=c(),h=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,v=this._chainedTweens.length;p<v;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,r,i){for(var o in r)if(t[o]!==void 0){var s=t[o]||0,a=r[o],l=Array.isArray(e[o]),u=Array.isArray(a),c=!l&&u;c?e[o]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[o],s,a,i):(a=this._handleRelativeValue(s,a),typeof a=="number"&&(e[o]=s+(a-s)*i))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n}();pb.nextId;var Fr=Mh;Fr.getAll.bind(Fr);Fr.removeAll.bind(Fr);Fr.add.bind(Fr);var cx=Fr.remove.bind(Fr);Fr.update.bind(Fr);function ji(){return((1+Math.random())*65536|0).toString(16).substring(1)}function ul(){return(ji()+ji()+"-"+ji()+"-4"+ji().substr(0,3)+"-"+ji()+"-"+ji()+ji()+ji()).toLowerCase()}function dx(n){return typeof Symbol>"u"?`$Symbol<${n}>$`:Symbol(n)}const Wa=dx("$$EVENT$$");function Kl(n){return n[Wa]||(n[Wa]={}),n[Wa]}function hx(n){n[Wa]&&delete n[Wa]}let Cn=class{hasListener(e){const t=Kl(this);return!!(t!=null&&t[e]&&t[e].length>0)}on(e,t,r){const i=Kl(this);return i[e]||(i[e]=[]),i[e].push([t,r||!1]),()=>this.off(e,t)}once(e,t){return this.on(e,t,!0)}off(e,t){if(e===void 0){hx(this);return}const r=Kl(this);if(r[e]||(r[e]=[]),t===void 0){r[e].length=0;return}let i=0;for(;i<r[e].length&&r[e][i][0]!==t;i++);i<r[e].length&&r[e].splice(i,1)}emit(e,...t){let r=!1;const i=Kl(this)[e]||[];for(let o of i.slice()){const[s,a=!1]=o,l=s(...t);a&&this.off(e,s),l===!1&&(r=!0)}return r}};const fx=({x:n,y:e,z:t})=>new H(n,e,t),qi=n=>new H().fromArray(n),Xe=n=>{if(n)return n instanceof H?n:Array.isArray(n)?qi(n):fx(n)};function px(n){if(n)return Array.isArray(n)?typeof n[0]=="number"?Xe(n):n.map(Xe):Xe(n)}function yd(n,e,t){const{x:r,y:i,z:o}=e.clone().project(n);return o>1?void 0:{leftPx:(r+1)/2*t.x,topPx:(-i+1)/2*t.y}}function aa(n){var e;return((e=n.models)==null?void 0:e.filter(t=>t.name===n.state.workCode)[0])||n.model}var vx=Object.defineProperty,mx=(n,e,t)=>e in n?vx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gx=(n,e,t)=>(mx(n,e+"",t),t);let vb=class extends Cn{constructor(e){super(),gx(this,"five"),this.five=e}};const cl=(n,e)=>{if(!e)return n;const t=new H,r=new on,i=new H;return e.decompose(t,r,i),n.clone().multiply(i).applyQuaternion(r).add(t)};var yx=Object.defineProperty,Ax=(n,e,t)=>e in n?yx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bx=(n,e,t)=>(Ax(n,e+"",t),t);const Ad=new Map;let wx=class extends vb{constructor(e){super(e),bx(this,"_workCode")}get fromType(){var e,t;const r=this.workCode;if(Ad.has(r))return Ad.get(r);const i=(t=(e=JSON.parse(this.work.raw.works[0]))==null?void 0:e.from_type)!=null?t:"vr";return Ad.set(r,i),i}set workCode(e){this._workCode=e}get workCode(){var e;return(e=this._workCode)!=null?e:this.five.state.workCode}get work(){var e,t;return(t=(e=this.five.works)==null?void 0:e.find(r=>r.workCode===this.workCode))!=null?t:this.five.work}get observers(){var e;return(e=this.work)==null?void 0:e.observers}get transform(){var e,t,r,i;const o=(i=(e=this.work)==null?void 0:e.transform)!=null?i:(r=(t=this.work)==null?void 0:t.options)==null?void 0:r.transform;return o?o.clone():new Ue}getResolvedObserver(e){return this.five.works.getResolvedObserver({workCode:this.workCode,panoIndex:e})}getObserverPosition(e){var t;const r=(t=this.getObserver(e))==null?void 0:t.position;if(r)return cl(r,this.transform)}getObserverStandingPosition(e){var t;const r=(t=this.getObserver(e))==null?void 0:t.standingPosition;if(r)return cl(r,this.transform)}getObserver(e){var t;return(t=this.observers)==null?void 0:t[e]}};var xx=Object.defineProperty,Px=(n,e,t)=>e in n?xx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ex=(n,e,t)=>(Px(n,e+"",t),t);let Ap=class extends vb{constructor(e){super(e),Ex(this,"workUtil",new wx(this.five))}get version(){return this.five.constructor.version}get majorVersion(){return Number(this.version.split(".")[0])}get model(){return aa(this.five)}moveToPano(e,t){const r=this.majorVersion===5?e:{workCode:this.workUtil.workCode,panoIndex:e};return this.five.moveToPano(r,t)}},ec=class extends oo{intersectObject(e,t=!0,r=[]){return Vh(e,this,r,t),r.sort(um),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)Vh(e[i],this,r,t);return r.sort(um),r}};function um(n,e){return n.distance-e.distance}function Vh(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const o=n.children;for(let s=0,a=o.length;s<a;s++)Vh(o[s],e,t,!0)}}function bp(n,e,t,r){let i=!0;if(n.type!=="Line2"&&(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0)){const o=n.children;for(let s=0,a=o.length;s<a;s++)o[s].type!=="Line2"&&bp(o[s],e,t,!0)}}const Mo=new ec;Mo.params.Points.threshold=.02;function Th(n,e){if(!e||typeof ResizeObserver>"u"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",n),unobserve:()=>window.removeEventListener("resize",n)};{const t=new ResizeObserver(n);return{observe:()=>t.observe(e),unobserve:()=>t.unobserve(e)}}}function Cx(n,e=200){let t;return function(...r){t||(n(...r),t=setTimeout(function(){t=null},e))}}function mb(n,e){let t=!1;const r=Cx(()=>{t||(t=!0,n.ready().then(()=>{e(),t=!1}))},150);return n.on("camera.update",r),()=>{n.off("camera.update",r)}}var _h={},Sx={get exports(){return _h},set exports(n){_h=n}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(n){(function(e,t,r,i){var o=["","webkit","Moz","MS","ms","o"],s=t.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function d(O,I,W){return setTimeout(E(O,W),I)}function h(O,I,W){return Array.isArray(O)?(f(O,W[I],W),!0):!1}function f(O,I,W){var le;if(O)if(O.forEach)O.forEach(I,W);else if(O.length!==i)for(le=0;le<O.length;)I.call(W,O[le],le,O),le++;else for(le in O)O.hasOwnProperty(le)&&I.call(W,O[le],le,O)}function p(O,I,W){var le="DEPRECATED METHOD: "+I+`
`+W+` AT 
`;return function(){var me=new Error("get-stack-trace"),Oe=me&&me.stack?me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",We=e.console&&(e.console.warn||e.console.log);return We&&We.call(e.console,le,Oe),O.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(O){if(O===i||O===null)throw new TypeError("Cannot convert undefined or null to object");for(var I=Object(O),W=1;W<arguments.length;W++){var le=arguments[W];if(le!==i&&le!==null)for(var me in le)le.hasOwnProperty(me)&&(I[me]=le[me])}return I}:v=Object.assign;var b=p(function(O,I,W){for(var le=Object.keys(I),me=0;me<le.length;)(!W||W&&O[le[me]]===i)&&(O[le[me]]=I[le[me]]),me++;return O},"extend","Use `assign`."),g=p(function(O,I){return b(O,I,!0)},"merge","Use `assign`.");function y(O,I,W){var le=I.prototype,me;me=O.prototype=Object.create(le),me.constructor=O,me._super=le,W&&v(me,W)}function E(O,I){return function(){return O.apply(I,arguments)}}function C(O,I){return typeof O==a?O.apply(I&&I[0]||i,I):O}function V(O,I){return O===i?I:O}function M(O,I,W){f(m(I),function(le){O.addEventListener(le,W,!1)})}function z(O,I,W){f(m(I),function(le){O.removeEventListener(le,W,!1)})}function U(O,I){for(;O;){if(O==I)return!0;O=O.parentNode}return!1}function D(O,I){return O.indexOf(I)>-1}function m(O){return O.trim().split(/\s+/g)}function A(O,I,W){if(O.indexOf&&!W)return O.indexOf(I);for(var le=0;le<O.length;){if(W&&O[le][W]==I||!W&&O[le]===I)return le;le++}return-1}function x(O){return Array.prototype.slice.call(O,0)}function S(O,I,W){for(var le=[],me=[],Oe=0;Oe<O.length;){var We=O[Oe][I];A(me,We)<0&&le.push(O[Oe]),me[Oe]=We,Oe++}return le=le.sort(function(ft,An){return ft[I]>An[I]}),le}function $(O,I){for(var W,le,me=I[0].toUpperCase()+I.slice(1),Oe=0;Oe<o.length;){if(W=o[Oe],le=W?W+me:I,le in O)return le;Oe++}return i}var T=1;function F(){return T++}function R(O){var I=O.ownerDocument||O;return I.defaultView||I.parentWindow||e}var ne=/mobile|tablet|ip(ad|hone|od)|android/i,ce="ontouchstart"in e,Z=$(e,"PointerEvent")!==i,he=ce&&ne.test(navigator.userAgent),pe="touch",ge="pen",Me="mouse",_="kinect",j=25,N=1,B=2,X=4,L=8,G=1,K=2,J=4,re=8,te=16,se=K|J,ve=re|te,Ce=se|ve,ke=["x","y"],Ve=["clientX","clientY"];function Pe(O,I){var W=this;this.manager=O,this.callback=I,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(le){C(O.options.enable,[O])&&W.handler(le)},this.init()}Pe.prototype={handler:function(){},init:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&z(this.element,this.evEl,this.domHandler),this.evTarget&&z(this.target,this.evTarget,this.domHandler),this.evWin&&z(R(this.element),this.evWin,this.domHandler)}};function Fe(O){var I,W=O.options.inputClass;return W?I=W:Z?I=jn:he?I=Oi:ce?I=Xr:I=en,new I(O,it)}function it(O,I,W){var le=W.pointers.length,me=W.changedPointers.length,Oe=I&N&&le-me===0,We=I&(X|L)&&le-me===0;W.isFirst=!!Oe,W.isFinal=!!We,Oe&&(O.session={}),W.eventType=I,Ze(O,W),O.emit("hammer.input",W),O.recognize(W),O.session.prevInput=W}function Ze(O,I){var W=O.session,le=I.pointers,me=le.length;W.firstInput||(W.firstInput=Mt(I)),me>1&&!W.firstMultiple?W.firstMultiple=Mt(I):me===1&&(W.firstMultiple=!1);var Oe=W.firstInput,We=W.firstMultiple,ft=We?We.center:Oe.center,An=I.center=pt(le);I.timeStamp=c(),I.deltaTime=I.timeStamp-Oe.timeStamp,I.angle=Vt(ft,An),I.distance=Xt(ft,An),zt(W,I),I.offsetDirection=Ne(I.deltaX,I.deltaY);var tn=Qt(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=tn.x,I.overallVelocityY=tn.y,I.overallVelocity=u(tn.x)>u(tn.y)?tn.x:tn.y,I.scale=We?ur(We.pointers,le):1,I.rotation=We?Gr(We.pointers,le):0,I.maxPointers=W.prevInput?I.pointers.length>W.prevInput.maxPointers?I.pointers.length:W.prevInput.maxPointers:I.pointers.length,an(W,I);var bn=O.element;U(I.srcEvent.target,bn)&&(bn=I.srcEvent.target),I.target=bn}function zt(O,I){var W=I.center,le=O.offsetDelta||{},me=O.prevDelta||{},Oe=O.prevInput||{};(I.eventType===N||Oe.eventType===X)&&(me=O.prevDelta={x:Oe.deltaX||0,y:Oe.deltaY||0},le=O.offsetDelta={x:W.x,y:W.y}),I.deltaX=me.x+(W.x-le.x),I.deltaY=me.y+(W.y-le.y)}function an(O,I){var W=O.lastInterval||I,le=I.timeStamp-W.timeStamp,me,Oe,We,ft;if(I.eventType!=L&&(le>j||W.velocity===i)){var An=I.deltaX-W.deltaX,tn=I.deltaY-W.deltaY,bn=Qt(le,An,tn);Oe=bn.x,We=bn.y,me=u(bn.x)>u(bn.y)?bn.x:bn.y,ft=Ne(An,tn),O.lastInterval=I}else me=W.velocity,Oe=W.velocityX,We=W.velocityY,ft=W.direction;I.velocity=me,I.velocityX=Oe,I.velocityY=We,I.direction=ft}function Mt(O){for(var I=[],W=0;W<O.pointers.length;)I[W]={clientX:l(O.pointers[W].clientX),clientY:l(O.pointers[W].clientY)},W++;return{timeStamp:c(),pointers:I,center:pt(I),deltaX:O.deltaX,deltaY:O.deltaY}}function pt(O){var I=O.length;if(I===1)return{x:l(O[0].clientX),y:l(O[0].clientY)};for(var W=0,le=0,me=0;me<I;)W+=O[me].clientX,le+=O[me].clientY,me++;return{x:l(W/I),y:l(le/I)}}function Qt(O,I,W){return{x:I/O||0,y:W/O||0}}function Ne(O,I){return O===I?G:u(O)>=u(I)?O<0?K:J:I<0?re:te}function Xt(O,I,W){W||(W=ke);var le=I[W[0]]-O[W[0]],me=I[W[1]]-O[W[1]];return Math.sqrt(le*le+me*me)}function Vt(O,I,W){W||(W=ke);var le=I[W[0]]-O[W[0]],me=I[W[1]]-O[W[1]];return Math.atan2(me,le)*180/Math.PI}function Gr(O,I){return Vt(I[1],I[0],Ve)+Vt(O[1],O[0],Ve)}function ur(O,I){return Xt(I[0],I[1],Ve)/Xt(O[0],O[1],Ve)}var In={mousedown:N,mousemove:B,mouseup:X},Ci="mousedown",Sr="mousemove mouseup";function en(){this.evEl=Ci,this.evWin=Sr,this.pressed=!1,Pe.apply(this,arguments)}y(en,Pe,{handler:function(O){var I=In[O.type];I&N&&O.button===0&&(this.pressed=!0),I&B&&O.which!==1&&(I=X),this.pressed&&(I&X&&(this.pressed=!1),this.callback(this.manager,I,{pointers:[O],changedPointers:[O],pointerType:Me,srcEvent:O}))}});var Et={pointerdown:N,pointermove:B,pointerup:X,pointercancel:L,pointerout:L},Sn={2:pe,3:ge,4:Me,5:_},cr="pointerdown",Bt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(cr="MSPointerDown",Bt="MSPointerMove MSPointerUp MSPointerCancel");function jn(){this.evEl=cr,this.evWin=Bt,Pe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(jn,Pe,{handler:function(O){var I=this.store,W=!1,le=O.type.toLowerCase().replace("ms",""),me=Et[le],Oe=Sn[O.pointerType]||O.pointerType,We=Oe==pe,ft=A(I,O.pointerId,"pointerId");me&N&&(O.button===0||We)?ft<0&&(I.push(O),ft=I.length-1):me&(X|L)&&(W=!0),!(ft<0)&&(I[ft]=O,this.callback(this.manager,me,{pointers:I,changedPointers:[O],pointerType:Oe,srcEvent:O}),W&&I.splice(ft,1))}});var Dn={touchstart:N,touchmove:B,touchend:X,touchcancel:L},Qr="touchstart",Ln="touchstart touchmove touchend touchcancel";function Si(){this.evTarget=Qr,this.evWin=Ln,this.started=!1,Pe.apply(this,arguments)}y(Si,Pe,{handler:function(O){var I=Dn[O.type];if(I===N&&(this.started=!0),!!this.started){var W=Jn.call(this,O,I);I&(X|L)&&W[0].length-W[1].length===0&&(this.started=!1),this.callback(this.manager,I,{pointers:W[0],changedPointers:W[1],pointerType:pe,srcEvent:O})}}});function Jn(O,I){var W=x(O.touches),le=x(O.changedTouches);return I&(X|L)&&(W=S(W.concat(le),"identifier")),[W,le]}var Ko={touchstart:N,touchmove:B,touchend:X,touchcancel:L},dr="touchstart touchmove touchend touchcancel";function Oi(){this.evTarget=dr,this.targetIds={},Pe.apply(this,arguments)}y(Oi,Pe,{handler:function(O){var I=Ko[O.type],W=da.call(this,O,I);W&&this.callback(this.manager,I,{pointers:W[0],changedPointers:W[1],pointerType:pe,srcEvent:O})}});function da(O,I){var W=x(O.touches),le=this.targetIds;if(I&(N|B)&&W.length===1)return le[W[0].identifier]=!0,[W,W];var me,Oe,We=x(O.changedTouches),ft=[],An=this.target;if(Oe=W.filter(function(tn){return U(tn.target,An)}),I===N)for(me=0;me<Oe.length;)le[Oe[me].identifier]=!0,me++;for(me=0;me<We.length;)le[We[me].identifier]&&ft.push(We[me]),I&(X|L)&&delete le[We[me].identifier],me++;if(ft.length)return[S(Oe.concat(ft),"identifier"),ft]}var ha=2500,fo=25;function Xr(){Pe.apply(this,arguments);var O=E(this.handler,this);this.touch=new Oi(this.manager,O),this.mouse=new en(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}y(Xr,Pe,{handler:function(O,I,W){var le=W.pointerType==pe,me=W.pointerType==Me;if(!(me&&W.sourceCapabilities&&W.sourceCapabilities.firesTouchEvents)){if(le)Ft.call(this,I,W);else if(me&&fa.call(this,W))return;this.callback(O,I,W)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ft(O,I){O&N?(this.primaryTouch=I.changedPointers[0].identifier,Jo.call(this,I)):O&(X|L)&&Jo.call(this,I)}function Jo(O){var I=O.changedPointers[0];if(I.identifier===this.primaryTouch){var W={x:I.clientX,y:I.clientY};this.lastTouches.push(W);var le=this.lastTouches,me=function(){var Oe=le.indexOf(W);Oe>-1&&le.splice(Oe,1)};setTimeout(me,ha)}}function fa(O){for(var I=O.srcEvent.clientX,W=O.srcEvent.clientY,le=0;le<this.lastTouches.length;le++){var me=this.lastTouches[le],Oe=Math.abs(I-me.x),We=Math.abs(W-me.y);if(Oe<=fo&&We<=fo)return!0}return!1}var Zo=$(s.style,"touchAction"),es=Zo!==i,ts="compute",Ht="auto",po="manipulation",hr="none",qr="pan-x",Yr="pan-y",$i=va();function qt(O,I){this.manager=O,this.set(I)}qt.prototype={set:function(O){O==ts&&(O=this.compute()),es&&this.manager.element.style&&$i[O]&&(this.manager.element.style[Zo]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return f(this.manager.recognizers,function(I){C(I.options.enable,[I])&&(O=O.concat(I.getTouchAction()))}),pa(O.join(" "))},preventDefaults:function(O){var I=O.srcEvent,W=O.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var le=this.actions,me=D(le,hr)&&!$i[hr],Oe=D(le,Yr)&&!$i[Yr],We=D(le,qr)&&!$i[qr];if(me){var ft=O.pointers.length===1,An=O.distance<2,tn=O.deltaTime<250;if(ft&&An&&tn)return}if(!(We&&Oe)&&(me||Oe&&W&se||We&&W&ve))return this.preventSrc(I)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function pa(O){if(D(O,hr))return hr;var I=D(O,qr),W=D(O,Yr);return I&&W?hr:I||W?I?qr:Yr:D(O,po)?po:Ht}function va(){if(!es)return!1;var O={},I=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(W){O[W]=I?e.CSS.supports("touch-action",W):!0}),O}var Mi=1,ln=2,Or=4,mn=8,On=mn,Zn=16,_t=32;function gn(O){this.options=v({},this.defaults,O||{}),this.id=F(),this.manager=null,this.options.enable=V(this.options.enable,!0),this.state=Mi,this.simultaneous={},this.requireFail=[]}gn.prototype={defaults:{},set:function(O){return v(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(h(O,"recognizeWith",this))return this;var I=this.simultaneous;return O=Vi(O,this),I[O.id]||(I[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return h(O,"dropRecognizeWith",this)?this:(O=Vi(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(h(O,"requireFailure",this))return this;var I=this.requireFail;return O=Vi(O,this),A(I,O)===-1&&(I.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(h(O,"dropRequireFailure",this))return this;O=Vi(O,this);var I=A(this.requireFail,O);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var I=this,W=this.state;function le(me){I.manager.emit(me,O)}W<mn&&le(I.options.event+ns(W)),le(I.options.event),O.additionalEvent&&le(O.additionalEvent),W>=mn&&le(I.options.event+ns(W))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=_t},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(_t|Mi)))return!1;O++}return!0},recognize:function(O){var I=v({},O);if(!C(this.options.enable,[this,I])){this.reset(),this.state=_t;return}this.state&(On|Zn|_t)&&(this.state=Mi),this.state=this.process(I),this.state&(ln|Or|mn|Zn)&&this.tryEmit(I)},process:function(O){},getTouchAction:function(){},reset:function(){}};function ns(O){return O&Zn?"cancel":O&mn?"end":O&Or?"move":O&ln?"start":""}function rs(O){return O==te?"down":O==re?"up":O==K?"left":O==J?"right":""}function Vi(O,I){var W=I.manager;return W?W.get(O):O}function yn(){gn.apply(this,arguments)}y(yn,gn,{defaults:{pointers:1},attrTest:function(O){var I=this.options.pointers;return I===0||O.pointers.length===I},process:function(O){var I=this.state,W=O.eventType,le=I&(ln|Or),me=this.attrTest(O);return le&&(W&L||!me)?I|Zn:le||me?W&X?I|mn:I&ln?I|Or:ln:_t}});function Ti(){yn.apply(this,arguments),this.pX=null,this.pY=null}y(Ti,yn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ce},getTouchAction:function(){var O=this.options.direction,I=[];return O&se&&I.push(Yr),O&ve&&I.push(qr),I},directionTest:function(O){var I=this.options,W=!0,le=O.distance,me=O.direction,Oe=O.deltaX,We=O.deltaY;return me&I.direction||(I.direction&se?(me=Oe===0?G:Oe<0?K:J,W=Oe!=this.pX,le=Math.abs(O.deltaX)):(me=We===0?G:We<0?re:te,W=We!=this.pY,le=Math.abs(O.deltaY))),O.direction=me,W&&le>I.threshold&&me&I.direction},attrTest:function(O){return yn.prototype.attrTest.call(this,O)&&(this.state&ln||!(this.state&ln)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var I=rs(O.direction);I&&(O.additionalEvent=this.options.event+I),this._super.emit.call(this,O)}});function $r(){yn.apply(this,arguments)}y($r,yn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[hr]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&ln)},emit:function(O){if(O.scale!==1){var I=O.scale<1?"in":"out";O.additionalEvent=this.options.event+I}this._super.emit.call(this,O)}});function Kr(){gn.apply(this,arguments),this._timer=null,this._input=null}y(Kr,gn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ht]},process:function(O){var I=this.options,W=O.pointers.length===I.pointers,le=O.distance<I.threshold,me=O.deltaTime>I.time;if(this._input=O,!le||!W||O.eventType&(X|L)&&!me)this.reset();else if(O.eventType&N)this.reset(),this._timer=d(function(){this.state=On,this.tryEmit()},I.time,this);else if(O.eventType&X)return On;return _t},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===On&&(O&&O.eventType&X?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function fr(){yn.apply(this,arguments)}y(fr,yn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[hr]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&ln)}});function _i(){yn.apply(this,arguments)}y(_i,yn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:se|ve,pointers:1},getTouchAction:function(){return Ti.prototype.getTouchAction.call(this)},attrTest:function(O){var I=this.options.direction,W;return I&(se|ve)?W=O.overallVelocity:I&se?W=O.overallVelocityX:I&ve&&(W=O.overallVelocityY),this._super.attrTest.call(this,O)&&I&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&u(W)>this.options.velocity&&O.eventType&X},emit:function(O){var I=rs(O.offsetDirection);I&&this.manager.emit(this.options.event+I,O),this.manager.emit(this.options.event,O)}});function Jr(){gn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(Jr,gn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[po]},process:function(O){var I=this.options,W=O.pointers.length===I.pointers,le=O.distance<I.threshold,me=O.deltaTime<I.time;if(this.reset(),O.eventType&N&&this.count===0)return this.failTimeout();if(le&&me&&W){if(O.eventType!=X)return this.failTimeout();var Oe=this.pTime?O.timeStamp-this.pTime<I.interval:!0,We=!this.pCenter||Xt(this.pCenter,O.center)<I.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!We||!Oe?this.count=1:this.count+=1,this._input=O;var ft=this.count%I.taps;if(ft===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=On,this.tryEmit()},I.interval,this),ln):On}return _t},failTimeout:function(){return this._timer=d(function(){this.state=_t},this.options.interval,this),_t},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==On&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function er(O,I){return I=I||{},I.recognizers=V(I.recognizers,er.defaults.preset),new vo(O,I)}er.VERSION="2.0.7",er.defaults={domEvents:!1,touchAction:ts,enable:!0,inputTarget:null,inputClass:null,preset:[[fr,{enable:!1}],[$r,{enable:!1},["rotate"]],[_i,{direction:se}],[Ti,{direction:se},["swipe"]],[Jr],[Jr,{event:"doubletap",taps:2},["tap"]],[Kr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ma=1,is=2;function vo(O,I){this.options=v({},er.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=Fe(this),this.touchAction=new qt(this,this.options.touchAction),ki(this,!0),f(this.options.recognizers,function(W){var le=this.add(new W[0](W[1]));W[2]&&le.recognizeWith(W[2]),W[3]&&le.requireFailure(W[3])},this)}vo.prototype={set:function(O){return v(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?is:ma},recognize:function(O){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(O);var W,le=this.recognizers,me=I.curRecognizer;(!me||me&&me.state&On)&&(me=I.curRecognizer=null);for(var Oe=0;Oe<le.length;)W=le[Oe],I.stopped!==is&&(!me||W==me||W.canRecognizeWith(me))?W.recognize(O):W.reset(),!me&&W.state&(ln|Or|mn)&&(me=I.curRecognizer=W),Oe++}},get:function(O){if(O instanceof gn)return O;for(var I=this.recognizers,W=0;W<I.length;W++)if(I[W].options.event==O)return I[W];return null},add:function(O){if(h(O,"add",this))return this;var I=this.get(O.options.event);return I&&this.remove(I),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(h(O,"remove",this))return this;if(O=this.get(O),O){var I=this.recognizers,W=A(I,O);W!==-1&&(I.splice(W,1),this.touchAction.update())}return this},on:function(O,I){if(O!==i&&I!==i){var W=this.handlers;return f(m(O),function(le){W[le]=W[le]||[],W[le].push(I)}),this}},off:function(O,I){if(O!==i){var W=this.handlers;return f(m(O),function(le){I?W[le]&&W[le].splice(A(W[le],I),1):delete W[le]}),this}},emit:function(O,I){this.options.domEvents&&ga(O,I);var W=this.handlers[O]&&this.handlers[O].slice();if(!(!W||!W.length)){I.type=O,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var le=0;le<W.length;)W[le](I),le++}},destroy:function(){this.element&&ki(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ki(O,I){var W=O.element;if(W.style){var le;f(O.options.cssProps,function(me,Oe){le=$(W.style,Oe),I?(O.oldCssProps[le]=W.style[le],W.style[le]=me):W.style[le]=O.oldCssProps[le]||""}),I||(O.oldCssProps={})}}function ga(O,I){var W=t.createEvent("Event");W.initEvent(O,!0,!0),W.gesture=I,I.target.dispatchEvent(W)}v(er,{INPUT_START:N,INPUT_MOVE:B,INPUT_END:X,INPUT_CANCEL:L,STATE_POSSIBLE:Mi,STATE_BEGAN:ln,STATE_CHANGED:Or,STATE_ENDED:mn,STATE_RECOGNIZED:On,STATE_CANCELLED:Zn,STATE_FAILED:_t,DIRECTION_NONE:G,DIRECTION_LEFT:K,DIRECTION_RIGHT:J,DIRECTION_UP:re,DIRECTION_DOWN:te,DIRECTION_HORIZONTAL:se,DIRECTION_VERTICAL:ve,DIRECTION_ALL:Ce,Manager:vo,Input:Pe,TouchAction:qt,TouchInput:Oi,MouseInput:en,PointerEventInput:jn,TouchMouseInput:Xr,SingleTouchInput:Si,Recognizer:gn,AttrRecognizer:yn,Tap:Jr,Pan:Ti,Swipe:_i,Pinch:$r,Rotate:fr,Press:Kr,on:M,off:z,each:f,merge:g,extend:b,assign:v,inherit:y,bindFn:E,prefixed:$});var ya=typeof e<"u"?e:typeof self<"u"?self:{};ya.Hammer=er,n.exports?n.exports=er:e[r]=er})(window,document,"Hammer")})(Sx);var Ox=Object.defineProperty,$x=(n,e,t)=>e in n?Ox(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nt=(n,e,t)=>($x(n,typeof e!="symbol"?e+"":e,t),t);let Mx=class{constructor(e,t){Nt(this,"width"),Nt(this,"height"),Nt(this,"containerDom"),Nt(this,"hooks",new Cn),Nt(this,"canvas",document.createElement("canvas")),Nt(this,"config"),Nt(this,"state",{enabled:!1}),Nt(this,"five"),Nt(this,"scale"),Nt(this,"offset",{x:0,y:0}),Nt(this,"context"),Nt(this,"renderCenter",new H),Nt(this,"hammer"),Nt(this,"offsetRange"),Nt(this,"isPanning",!1),Nt(this,"imageData",new ImageData(1,1)),Nt(this,"onPanstart",()=>{this.isPanning=!0,this.canvas.style.boxShadow="0 2px 30px 0 rgba(0,0,0,0.20)"}),Nt(this,"onPan",l=>{if(!this.isPanning||!this.offsetRange||this.hooks.emit("wantsPanGesture",l))return;const{translateX:u,translateY:c}=this.getPanOffset(l,this.offsetRange);this.canvas.style.transform=`translate3d(${u}px, ${c}px, 100px)`}),Nt(this,"onPanend",l=>{if(this.isPanning=!1,this.canvas.style.boxShadow="none",!this.offsetRange)return;const{translateX:u,translateY:c}=this.getPanOffset(l,this.offsetRange);this.canvas.style.transform=`translate3d(${u}px, ${c}px, 100px)`,this.offset={x:u,y:c}});var r,i,o,s;if(!e.renderer){console.error("Five Render ");return}this.five=e,this.scale=(r=t==null?void 0:t.scale)!=null?r:2,this.width=(i=t==null?void 0:t.width)!=null?i:190,this.height=(s=(o=t==null?void 0:t.height)!=null?o:t==null?void 0:t.width)!=null?s:190,this.config={dragEnabled:(t==null?void 0:t.dragEnabled)||!1,autoFixPCPosition:(t==null?void 0:t.autoFixPCPosition)||!1,initialPosition:(t==null?void 0:t.initialPosition)||{left:"0",top:"0"}};const a=this.canvas.getContext("2d");if(!a)throw new Error("CANNOT CREATE CONTEXT2D");this.context=a,this.config.dragEnabled&&(this.hammer=new _h(this.canvas),this.hammer.on("pan",this.onPan),this.hammer.on("panstart",this.onPanstart),this.hammer.on("panend",this.onPanend)),this.initStyle()}enable(){if(!this.state.enabled)return this.state.enabled=!0,this.containerDom&&this._appendTo(this.containerDom),this}disable(){if(this.state.enabled)return this.state.enabled=!1,this.canvas.style.visibility="hidden",this.canvas.remove(),this}dispose(){var e;this.clear(),this.disable(),(e=this.hammer)==null||e.destroy()}appendTo(e){var t;return this.containerDom&&((t=this.containerDom)==null||t.removeChild(this.canvas)),this.containerDom=e,this.state.enabled&&this._appendTo(e),this}clear(){var e;return(e=this.context)==null||e.clearRect(0,0,this.canvas.width,this.canvas.height),this}renderWithPoint(e){this.containerDom&&this.state.enabled&&(this.renderCenter=e,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}renderWithScreenPoint(e){this.containerDom&&this.state.enabled&&(this.renderCenter=e,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}resetOffset(){this.offset={x:0,y:0},this.canvas.style.transform="translate3d(0px, 0px, 100px)"}render(){if(!this.five.renderer||!this.containerDom)return;const{scale:e,context:t,width:r,height:i}=this,o=this.five.renderer.getSize(new Jt),[s,a]=(()=>{if(this.renderCenter.isVector3){const b=this.renderCenter.clone().project(this.five.camera);return[(b.x+1)/2*o.x,(b.y+1)/2*o.y]}else return[this.renderCenter.x,o.y-this.renderCenter.y]})(),l=1,u=r/e,c=i/e,d=l*e,h=new Map;this.five.scene.traverse(b=>{b.disableGetPixel===!0&&(h.set(b,b.visible),b.visible=!1)});const f=this.five.getPixels(s-u/2,a-u/2,u,c,d);h.forEach((b,g)=>{g.visible=b});const p=Math.floor(r*l),v=Math.floor(i*l);Vx(f,p,v),(this.imageData.width!==p||this.imageData.height!==v)&&(this.imageData=new ImageData(p,v)),this.imageData.data.set(f),t.putImageData(this.imageData,0,0),this.canvas.style.visibility="visible"}getRenderCenter(){return this.renderCenter}_appendTo(e){if(this.resetOffset(),e.appendChild(this.canvas),!this.offsetRange){const t=this.canvas.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.right-t.right,o=r.bottom-t.bottom,s=r.left-t.left,a=r.top-t.top;this.offsetRange={min:{x:s,y:a},max:{x:i,y:o}}}}autoFixPCPosition(){if(!this.containerDom)return;const{width:e,height:t}=this,{clientWidth:r,clientHeight:i}=this.containerDom,[o,s,a]=(()=>{if(this.renderCenter.isVector3){const l=this.renderCenter.clone().project(this.five.camera);return[(l.x+1)/2*r,-(l.x-1)/2*r,-(l.y-1)/2*i]}else return[this.renderCenter.x,r-this.renderCenter.x,this.renderCenter.y]})();o<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left="90px"):a<183?(this.canvas.style.top="90px",this.canvas.style.left=-e/2+"px"):s<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left=-e-90+"px"):(this.canvas.style.left=-e/2+"px",this.canvas.style.top=-t-90+"px"),this.canvas.style.transform=`translate3d(${o}px, ${a}px, 10px)`,this.offset={x:o,y:a}}initStyle(){const e=this.canvas;e.classList.add("five-plugin__magnifier"),e.style.position="absolute",e.style.pointerEvents=this.config.dragEnabled?"all":"none",e.style.borderRadius="50%",e.style.zIndex="99";const t=1;e.setAttribute("width",(this.width*t).toString()),e.setAttribute("height",(this.height*t).toString()),e.style.border="2px solid rgba(255,255,255,0.20)",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.top=this.config.initialPosition.top,e.style.left=this.config.initialPosition.left,e.style.transform="translate(0,0,100px)",e.style.visibility="hidden",this.config.dragEnabled&&(this.canvas.style.cursor="pointer")}getPanOffset(e,t){const{min:{x:r,y:i},max:{x:o,y:s}}=t,a=this.offset.x+e.deltaX,l=this.offset.y+e.deltaY,u=Math.min(Math.max(a,r),o),c=Math.min(Math.max(l,i),s);return{translateX:u,translateY:c}}};function Jl(n,e,t){const r=n[e],i=n[t];r===void 0||i===void 0||(n[e]=i,n[t]=r)}function Vx(n,e,t){const r=t/2;for(let i=1;i<=r;i++){const o=t-(i-1);for(let s=1;s<=e;s++){const a=(i-1)*e+s-1,l=(o-1)*e+s-1;Jl(n,a*4+0,l*4+0),Jl(n,a*4+1,l*4+1),Jl(n,a*4+2,l*4+2),Jl(n,a*4+3,l*4+3)}}}const Tx="data:image/png;base64,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";function Gs(n,e){const t=Math.round(n);return t%2===0?t:t+(e!=null&&e.floor?-1:1)}var _x=Object.defineProperty,kx=(n,e,t)=>e in n?_x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ix=(n,e,t)=>(kx(n,e+"",t),t);let gb=class extends nt{constructor(e,t){const r=new st({opacity:0,color:0,transparent:!1,side:fn}),i=new El(e,t);super(i,r),Ix(this,"name","opacity-mesh")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}};function Yn(...n){const e=new H;return n.forEach(t=>e.add(t)),e.divideScalar(n.length),e}const wp=n=>n?n.visible===!1?!1:wp(n.parent):!0;var Ai=function(n){Tn.call(this),this.element=n,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.remove()})})};Ai.prototype=Object.create(Tn.prototype);Ai.prototype.constructor=Ai;var tc=function(n){Ai.call(this,n)};tc.prototype=Object.create(Ai.prototype);tc.prototype.constructor=tc;let jx=function(n){let e=this,t,r,i,o,s=new Ue,a={camera:{fov:0,style:""},objects:new Map},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l;let u=document.createElement("div");u.style.WebkitTransformStyle="preserve-3d",u.style.transformStyle="preserve-3d",u.style.pointerEvents="none",l.appendChild(u),this.getSize=function(){return{width:t,height:r}},this.setSize=function(v,b){t=v,r=b,i=t/2,o=r/2,l.style.width=v+"px",l.style.height=b+"px",u.style.width=v+"px",u.style.height=b+"px"};function c(v){return Math.abs(v)<1e-10?0:v}function d(v){let b=v.elements;return"matrix3d("+c(b[0])+","+c(-b[1])+","+c(b[2])+","+c(b[3])+","+c(b[4])+","+c(-b[5])+","+c(b[6])+","+c(b[7])+","+c(b[8])+","+c(-b[9])+","+c(b[10])+","+c(b[11])+","+c(b[12])+","+c(-b[13])+","+c(b[14])+","+c(b[15])+")"}function h(v,b){let g=v.elements;return"translate(-50%,-50%)"+("matrix3d("+c(g[0])+","+c(g[1])+","+c(g[2])+","+c(g[3])+","+c(-g[4])+","+c(-g[5])+","+c(-g[6])+","+c(-g[7])+","+c(g[8])+","+c(g[9])+","+c(g[10])+","+c(g[11])+","+c(g[12])+","+c(g[13])+","+c(g[14])+","+c(g[15])+")")}function f(v){var b;if(v.isCSS3DObject){const g=(b=v.mode)!=null?b:"front";(!n||g===n)&&(v.element.style.display="none")}for(let g=0,y=v.children.length;g<y;g++)f(v.children[g])}function p(v,b,g,y,E){var C;if(v.visible===!1){f(v);return}if(v.isCSS3DObject){const V=(C=v.mode)!=null?C:"front";if(n&&V!==n)return;v.flag=E;const M=v.layers.test(g.layers)===!0,z=v.element;if(z.style.display=M===!0?"":"none",M){v.onBeforeRender(e,b,g);let U;v.isCSS3DSprite?(s.copy(g.matrixWorldInverse),s.transpose(),s.copyPosition(v.matrixWorld),s.scale(v.scale),s.elements[3]=0,s.elements[7]=0,s.elements[11]=0,s.elements[15]=1,U=h(s)):U=h(v.matrixWorld);let D=a.objects.get(v);if(D===void 0||D.style!==U){z.style.WebkitTransform=U,z.style.transform=U;let m={style:U};a.objects.set(v,m)}z.style.display=v.visible?"":"none",z.parentNode!==u&&u.appendChild(z),v.onAfterRender(e,b,g)}}for(let V=0,M=v.children.length;V<M;V++)p(v.children[V],b,g,y,E)}this.render=function(v,b){let g=b.projectionMatrix.elements[5]*o;if(a.camera.fov!==g&&(b.isPerspectiveCamera?(l.style.WebkitPerspective=g+"px",l.style.perspective=g+"px"):(l.style.WebkitPerspective="",l.style.perspective=""),a.camera.fov=g),v.autoUpdate===!0&&v.updateMatrixWorld(),b.parent===null&&b.updateMatrixWorld(),b.isOrthographicCamera)var y=-(b.right+b.left)/2,E=(b.top+b.bottom)/2;let C=b.isOrthographicCamera?"scale("+g+")translate("+c(y)+"px,"+c(E)+"px)"+d(b.matrixWorldInverse):"translateZ("+g+"px)"+d(b.matrixWorldInverse),V=C+"translate("+i+"px,"+o+"px)";a.camera.style!==V&&(u.style.WebkitTransform=V,u.style.transform=V,a.camera.style=V);const M=v.uuid+"_"+performance.now().toString();p(v,v,b,C,M),a.objects.forEach(function(z,U){U.flag!==M&&(U.element.remove(),a.objects.delete(U))})}};const zr=document.createElement("div");zr.classList.add("behindFiveElement");zr.style.position="absolute";zr.style.top="0";zr.style.left="0";zr.style.width="100%";zr.style.height="100%";zr.style.pointerEvents="none";function yb(n){var e,t,r,i,o;const s=(o=(t=bd(n.getElement()))!=null?t:bd((e=n.getElement())==null?void 0:e.parentElement))!=null?o:bd((i=(r=n.getElement())==null?void 0:r.parentElement)==null?void 0:i.parentElement),a=s==null?void 0:s.parentElement;if(a)return a.contains(zr)||s.parentElement.insertBefore(zr,s),zr;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md")}function bd(n){var e;if(!n)return;const t=(e=n.style.position)!=null?e:getComputedStyle(n).position;if(t!=="fixed"&&t!=="absolute"&&t!=="relative")return;const r=getComputedStyle(n),i=r.backgroundColor,o=r.backgroundImage;if(!(i!=="transparent"&&i!=="rgba(0, 0, 0, 0)"&&i!==""||o!=="none"&&o!==""))return n}function Yi(n){return!Ge(n)}function Ge(n){return n!=null}var Dx=Object.defineProperty,Lx=(n,e,t)=>e in n?Dx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ls=(n,e,t)=>(Lx(n,typeof e!="symbol"?e+"":e,t),t);const wd={uniforms:kc.merge([Hu.common,Hu.fog,{linewidth:{value:1},resolution:{value:new Jt(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) < dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};let Ab=class extends Wr{constructor(e){super({uniforms:kc.clone(wd.uniforms),vertexShader:wd.vertexShader,fragmentShader:wd.fragmentShader,clipping:!0}),ls(this,"color"),ls(this,"dashed"),ls(this,"dashScale"),ls(this,"dashSize"),ls(this,"gapSize"),ls(this,"resolution"),this.type="LineMaterial",this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get(){return this.uniforms.diffuse.value},set(t){this.uniforms.diffuse.value=t}},linewidth:{enumerable:!0,get(){return this.uniforms.linewidth.value},set(t){this.uniforms.linewidth.value=t}},dashScale:{enumerable:!0,get(){return this.uniforms.dashScale.value},set(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get(){return this.uniforms.dashSize.value},set(t){this.uniforms.dashSize.value=t}},gapSize:{enumerable:!0,get(){return this.uniforms.gapSize.value},set(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}}}),this.setValues(e)}};Object.assign(Ab.prototype,{isLineMaterial:!0});const xd=new H;let Rx=class extends Zf{expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xd.subVectors(e,this.center);const t=xd.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(xd,i/r),this.radius+=i}return this}};var bb={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},xp={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},zx=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],nc={CSS:{},springs:{}};function Ir(n,e,t){return Math.min(Math.max(n,e),t)}function Ga(n,e){return n.indexOf(e)>-1}function Pd(n,e){return n.apply(null,e)}var _e={arr:function(n){return Array.isArray(n)},obj:function(n){return Ga(Object.prototype.toString.call(n),"Object")},pth:function(n){return _e.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||_e.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n>"u"},nil:function(n){return _e.und(n)||n===null},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return _e.hex(n)||_e.rgb(n)||_e.hsl(n)},key:function(n){return!bb.hasOwnProperty(n)&&!xp.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function wb(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function xb(n,e){var t=wb(n),r=Ir(_e.und(t[0])?1:t[0],.1,100),i=Ir(_e.und(t[1])?100:t[1],.1,100),o=Ir(_e.und(t[2])?10:t[2],.1,100),s=Ir(_e.und(t[3])?0:t[3],.1,100),a=Math.sqrt(i/r),l=o/(2*Math.sqrt(i*r)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*a+-s)/u:-s+a;function h(p){var v=e?e*p/1e3:p;return l<1?v=Math.exp(-v*l*a)*(c*Math.cos(u*v)+d*Math.sin(u*v)):v=(c+d*v)*Math.exp(-v*a),p===0||p===1?p:1-v}function f(){var p=nc.springs[n];if(p)return p;for(var v=1/6,b=0,g=0;;)if(b+=v,h(b)===1){if(g++,g>=16)break}else g=0;var y=b*v*1e3;return nc.springs[n]=y,y}return e?h:f}function Bx(n){return n===void 0&&(n=10),function(e){return Math.ceil(Ir(e,1e-6,1)*n)*(1/n)}}var Fx=function(){var n=11,e=1/(n-1);function t(c,d){return 1-3*d+3*c}function r(c,d){return 3*d-6*c}function i(c){return 3*c}function o(c,d,h){return((t(d,h)*c+r(d,h))*c+i(d))*c}function s(c,d,h){return 3*t(d,h)*c*c+2*r(d,h)*c+i(d)}function a(c,d,h,f,p){var v,b,g=0;do b=d+(h-d)/2,v=o(b,f,p)-c,v>0?h=b:d=b;while(Math.abs(v)>1e-7&&++g<10);return b}function l(c,d,h,f){for(var p=0;p<4;++p){var v=s(d,h,f);if(v===0)return d;var b=o(d,h,f)-c;d-=b/v}return d}function u(c,d,h,f){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var p=new Float32Array(n);if(c!==d||h!==f)for(var v=0;v<n;++v)p[v]=o(v*e,c,h);function b(g){for(var y=0,E=1,C=n-1;E!==C&&p[E]<=g;++E)y+=e;--E;var V=(g-p[E])/(p[E+1]-p[E]),M=y+V*e,z=s(M,c,h);return z>=.001?l(g,M,c,h):z===0?M:a(g,y,y+e,c,h)}return function(g){return c===d&&h===f||g===0||g===1?g:o(b(g),d,f)}}return u}(),Pb=function(){var n={linear:function(){return function(r){return r}}},e={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Expo:function(){return function(r){return r?Math.pow(2,10*r-10):0}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var i,o=4;r<((i=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((i*3-2)/22-r,2)}},Elastic:function(r,i){r===void 0&&(r=1),i===void 0&&(i=.5);var o=Ir(r,1,10),s=Ir(i,.1,2);return function(a){return a===0||a===1?a:-o*Math.pow(2,10*(a-1))*Math.sin((a-1-s/(Math.PI*2)*Math.asin(1/o))*(Math.PI*2)/s)}}},t=["Quad","Cubic","Quart","Quint"];return t.forEach(function(r,i){e[r]=function(){return function(o){return Math.pow(o,i+2)}}}),Object.keys(e).forEach(function(r){var i=e[r];n["easeIn"+r]=i,n["easeOut"+r]=function(o,s){return function(a){return 1-i(o,s)(1-a)}},n["easeInOut"+r]=function(o,s){return function(a){return a<.5?i(o,s)(a*2)/2:1-i(o,s)(a*-2+2)/2}},n["easeOutIn"+r]=function(o,s){return function(a){return a<.5?(1-i(o,s)(1-a*2))/2:(i(o,s)(a*2-1)+1)/2}}}),n}();function Pp(n,e){if(_e.fnc(n))return n;var t=n.split("(")[0],r=Pb[t],i=wb(n);switch(t){case"spring":return xb(n,e);case"cubicBezier":return Pd(Fx,i);case"steps":return Pd(Bx,i);default:return Pd(r,i)}}function Eb(n){try{var e=document.querySelectorAll(n);return e}catch{return}}function Gc(n,e){for(var t=n.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<t;o++)if(o in n){var s=n[o];e.call(r,s,o,n)&&i.push(s)}return i}function Qc(n){return n.reduce(function(e,t){return e.concat(_e.arr(t)?Qc(t):t)},[])}function cm(n){return _e.arr(n)?n:(_e.str(n)&&(n=Eb(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function Ep(n,e){return n.some(function(t){return t===e})}function Cp(n){var e={};for(var t in n)e[t]=n[t];return e}function kh(n,e){var t=Cp(n);for(var r in n)t[r]=e.hasOwnProperty(r)?e[r]:n[r];return t}function Xc(n,e){var t=Cp(n);for(var r in e)t[r]=_e.und(n[r])?e[r]:n[r];return t}function Hx(n){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return e?"rgba("+e[1]+",1)":n}function Ux(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=n.replace(e,function(a,l,u,c){return l+l+u+u+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),i=parseInt(r[1],16),o=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+i+","+o+","+s+",1)"}function Nx(n){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),t=parseInt(e[1],10)/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100,o=e[4]||1;function s(h,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(f-h)*6*p:p<1/2?f:p<2/3?h+(f-h)*(2/3-p)*6:h}var a,l,u;if(r==0)a=l=u=i;else{var c=i<.5?i*(1+r):i+r-i*r,d=2*i-c;a=s(d,c,t+1/3),l=s(d,c,t),u=s(d,c,t-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+o+")"}function Wx(n){if(_e.rgb(n))return Hx(n);if(_e.hex(n))return Ux(n);if(_e.hsl(n))return Nx(n)}function gi(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function Gx(n){if(Ga(n,"translate")||n==="perspective")return"px";if(Ga(n,"rotate")||Ga(n,"skew"))return"deg"}function Ih(n,e){return _e.fnc(n)?n(e.target,e.id,e.total):n}function jr(n,e){return n.getAttribute(e)}function Sp(n,e,t){var r=gi(e);if(Ep([t,"deg","rad","turn"],r))return e;var i=nc.CSS[e+t];if(!_e.und(i))return i;var o=100,s=document.createElement(n.tagName),a=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;a.appendChild(s),s.style.position="absolute",s.style.width=o+t;var l=o/s.offsetWidth;a.removeChild(s);var u=l*parseFloat(e);return nc.CSS[e+t]=u,u}function Cb(n,e,t){if(e in n.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0";return t?Sp(n,i,t):i}}function Op(n,e){if(_e.dom(n)&&!_e.inp(n)&&(!_e.nil(jr(n,e))||_e.svg(n)&&n[e]))return"attribute";if(_e.dom(n)&&Ep(zx,e))return"transform";if(_e.dom(n)&&e!=="transform"&&Cb(n,e))return"css";if(n[e]!=null)return"object"}function Sb(n){if(_e.dom(n)){for(var e=n.style.transform||"",t=/(\w+)\(([^)]*)\)/g,r=new Map,i;i=t.exec(e);)r.set(i[1],i[2]);return r}}function Qx(n,e,t,r){var i=Ga(e,"scale")?1:0+Gx(e),o=Sb(n).get(e)||i;return t&&(t.transforms.list.set(e,o),t.transforms.last=e),r?Sp(n,o,r):o}function $p(n,e,t,r){switch(Op(n,e)){case"transform":return Qx(n,e,r,t);case"css":return Cb(n,e,t);case"attribute":return jr(n,e);default:return n[e]||0}}function Mp(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=gi(n)||0,i=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function Ob(n,e){if(_e.col(n))return Wx(n);if(/\s/g.test(n))return n;var t=gi(n),r=t?n.substr(0,n.length-t.length):n;return e?r+e:r}function Vp(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Xx(n){return Math.PI*2*jr(n,"r")}function qx(n){return jr(n,"width")*2+jr(n,"height")*2}function Yx(n){return Vp({x:jr(n,"x1"),y:jr(n,"y1")},{x:jr(n,"x2"),y:jr(n,"y2")})}function $b(n){for(var e=n.points,t=0,r,i=0;i<e.numberOfItems;i++){var o=e.getItem(i);i>0&&(t+=Vp(r,o)),r=o}return t}function Kx(n){var e=n.points;return $b(n)+Vp(e.getItem(e.numberOfItems-1),e.getItem(0))}function Mb(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return Xx(n);case"rect":return qx(n);case"line":return Yx(n);case"polyline":return $b(n);case"polygon":return Kx(n)}}function Jx(n){var e=Mb(n);return n.setAttribute("stroke-dasharray",e),e}function Zx(n){for(var e=n.parentNode;_e.svg(e)&&_e.svg(e.parentNode);)e=e.parentNode;return e}function Vb(n,e){var t=e||{},r=t.el||Zx(n),i=r.getBoundingClientRect(),o=jr(r,"viewBox"),s=i.width,a=i.height,l=t.viewBox||(o?o.split(" "):[0,0,s,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s,h:a,vW:l[2],vH:l[3]}}function eP(n,e){var t=_e.str(n)?Eb(n)[0]:n,r=e||100;return function(i){return{property:i,el:t,svg:Vb(t),totalLength:Mb(t)*(r/100)}}}function tP(n,e,t){function r(c){c===void 0&&(c=0);var d=e+c>=1?e+c:0;return n.el.getPointAtLength(d)}var i=Vb(n.el,n.svg),o=r(),s=r(-1),a=r(1),l=t?1:i.w/i.vW,u=t?1:i.h/i.vH;switch(n.property){case"x":return(o.x-i.x)*l;case"y":return(o.y-i.y)*u;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function dm(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Ob(_e.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:_e.str(n)||e?r.split(t):[]}}function Tp(n){var e=n?Qc(_e.arr(n)?n.map(cm):cm(n)):[];return Gc(e,function(t,r,i){return i.indexOf(t)===r})}function Tb(n){var e=Tp(n);return e.map(function(t,r){return{target:t,id:r,total:e.length,transforms:{list:Sb(t)}}})}function nP(n,e){var t=Cp(e);if(/^spring/.test(t.easing)&&(t.duration=xb(t.easing)),_e.arr(n)){var r=n.length,i=r===2&&!_e.obj(n[0]);i?n={value:n}:_e.fnc(e.duration)||(t.duration=e.duration/r)}var o=_e.arr(n)?n:[n];return o.map(function(s,a){var l=_e.obj(s)&&!_e.pth(s)?s:{value:s};return _e.und(l.delay)&&(l.delay=a?0:e.delay),_e.und(l.endDelay)&&(l.endDelay=a===o.length-1?e.endDelay:0),l}).map(function(s){return Xc(s,t)})}function rP(n){for(var e=Gc(Qc(n.map(function(o){return Object.keys(o)})),function(o){return _e.key(o)}).reduce(function(o,s){return o.indexOf(s)<0&&o.push(s),o},[]),t={},r=function(o){var s=e[o];t[s]=n.map(function(a){var l={};for(var u in a)_e.key(u)?u==s&&(l.value=a[u]):l[u]=a[u];return l})},i=0;i<e.length;i++)r(i);return t}function iP(n,e){var t=[],r=e.keyframes;r&&(e=Xc(rP(r),e));for(var i in e)_e.key(i)&&t.push({name:i,tweens:nP(e[i],n)});return t}function oP(n,e){var t={};for(var r in n){var i=Ih(n[r],e);_e.arr(i)&&(i=i.map(function(o){return Ih(o,e)}),i.length===1&&(i=i[0])),t[r]=i}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function sP(n,e){var t;return n.tweens.map(function(r){var i=oP(r,e),o=i.value,s=_e.arr(o)?o[1]:o,a=gi(s),l=$p(e.target,n.name,a,e),u=t?t.to.original:l,c=_e.arr(o)?o[0]:u,d=gi(c)||gi(l),h=a||d;return _e.und(s)&&(s=u),i.from=dm(c,h),i.to=dm(Mp(s,c),h),i.start=t?t.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Pp(i.easing,i.duration),i.isPath=_e.pth(o),i.isPathTargetInsideSVG=i.isPath&&_e.svg(e.target),i.isColor=_e.col(i.from.original),i.isColor&&(i.round=1),t=i,i})}var _b={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,i){if(r.list.set(e,t),e===r.last||i){var o="";r.list.forEach(function(s,a){o+=a+"("+s+") "}),n.style.transform=o}}};function kb(n,e){var t=Tb(n);t.forEach(function(r){for(var i in e){var o=Ih(e[i],r),s=r.target,a=gi(o),l=$p(s,i,a,r),u=a||gi(l),c=Mp(Ob(o,u),l),d=Op(s,i);_b[d](s,i,c,r.transforms,!0)}})}function aP(n,e){var t=Op(n.target,e.name);if(t){var r=sP(e,n),i=r[r.length-1];return{type:t,property:e.name,animatable:n,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}function lP(n,e){return Gc(Qc(n.map(function(t){return e.map(function(r){return aP(t,r)})})),function(t){return!_e.und(t)})}function Ib(n,e){var t=n.length,r=function(o){return o.timelineOffset?o.timelineOffset:0},i={};return i.duration=t?Math.max.apply(Math,n.map(function(o){return r(o)+o.duration})):e.duration,i.delay=t?Math.min.apply(Math,n.map(function(o){return r(o)+o.delay})):e.delay,i.endDelay=t?i.duration-Math.max.apply(Math,n.map(function(o){return r(o)+o.duration-o.endDelay})):e.endDelay,i}var hm=0;function uP(n){var e=kh(bb,n),t=kh(xp,n),r=iP(t,n),i=Tb(n.targets),o=lP(i,r),s=Ib(o,t),a=hm;return hm++,Xc(e,{id:a,children:[],animatables:i,animations:o,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}var gr=[],jb=function(){var n;function e(){!n&&(!fm()||!Pt.suspendWhenDocumentHidden)&&gr.length>0&&(n=requestAnimationFrame(t))}function t(i){for(var o=gr.length,s=0;s<o;){var a=gr[s];a.paused?(gr.splice(s,1),o--):(a.tick(i),s++)}n=s>0?requestAnimationFrame(t):void 0}function r(){Pt.suspendWhenDocumentHidden&&(fm()?n=cancelAnimationFrame(n):(gr.forEach(function(i){return i._onDocumentVisibility()}),jb()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),e}();function fm(){return!!document&&document.hidden}function Pt(n){n===void 0&&(n={});var e=0,t=0,r=0,i,o=0,s=null;function a(y){var E=window.Promise&&new Promise(function(C){return s=C});return y.finished=E,E}var l=uP(n);a(l);function u(){var y=l.direction;y!=="alternate"&&(l.direction=y!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,i.forEach(function(E){return E.reversed=l.reversed})}function c(y){return l.reversed?l.duration-y:y}function d(){e=0,t=c(l.currentTime)*(1/Pt.speed)}function h(y,E){E&&E.seek(y-E.timelineOffset)}function f(y){if(l.reversePlayback)for(var E=o;E--;)h(y,i[E]);else for(var C=0;C<o;C++)h(y,i[C])}function p(y){for(var E=0,C=l.animations,V=C.length;E<V;){var M=C[E],z=M.animatable,U=M.tweens,D=U.length-1,m=U[D];D&&(m=Gc(U,function(j){return y<j.end})[0]||m);for(var A=Ir(y-m.start-m.delay,0,m.duration)/m.duration,x=isNaN(A)?1:m.easing(A),S=m.to.strings,$=m.round,T=[],F=m.to.numbers.length,R=void 0,ne=0;ne<F;ne++){var ce=void 0,Z=m.to.numbers[ne],he=m.from.numbers[ne]||0;m.isPath?ce=tP(m.value,x*Z,m.isPathTargetInsideSVG):ce=he+x*(Z-he),$&&(m.isColor&&ne>2||(ce=Math.round(ce*$)/$)),T.push(ce)}var pe=S.length;if(!pe)R=T[0];else{R=S[0];for(var ge=0;ge<pe;ge++){S[ge];var Me=S[ge+1],_=T[ge];isNaN(_)||(Me?R+=_+Me:R+=_+" ")}}_b[M.type](z.target,M.property,R,z.transforms),M.currentValue=R,E++}}function v(y){l[y]&&!l.passThrough&&l[y](l)}function b(){l.remaining&&l.remaining!==!0&&l.remaining--}function g(y){var E=l.duration,C=l.delay,V=E-l.endDelay,M=c(y);l.progress=Ir(M/E*100,0,100),l.reversePlayback=M<l.currentTime,i&&f(M),!l.began&&l.currentTime>0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),M<=C&&l.currentTime!==0&&p(0),(M>=V&&l.currentTime!==E||!E)&&p(E),M>C&&M<V?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),v("change"),p(M)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,v("changeComplete")),l.currentTime=Ir(M,0,E),l.began&&v("update"),y>=E&&(t=0,b(),l.remaining?(e=r,v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(s(),a(l)))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,i=l.children,o=i.length;for(var E=o;E--;)l.children[E].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(y,E){return kb(y,E),l},l.tick=function(y){r=y,e||(e=r),g((r+(t-e))*Pt.speed)},l.seek=function(y){g(c(y))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,gr.push(l),d(),jb())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(y){var E=Tp(y);Db(E,l)},l.reset(),l.autoplay&&l.play(),l}function pm(n,e){for(var t=e.length;t--;)Ep(n,e[t].animatable.target)&&e.splice(t,1)}function Db(n,e){var t=e.animations,r=e.children;pm(n,t);for(var i=r.length;i--;){var o=r[i],s=o.animations;pm(n,s),!s.length&&!o.children.length&&r.splice(i,1)}!t.length&&!r.length&&e.pause()}function cP(n){for(var e=Tp(n),t=gr.length;t--;){var r=gr[t];Db(e,r)}}function dP(n,e){e===void 0&&(e={});var t=e.direction||"normal",r=e.easing?Pp(e.easing):null,i=e.grid,o=e.axis,s=e.from||0,a=s==="first",l=s==="center",u=s==="last",c=_e.arr(n),d=parseFloat(c?n[0]:n),h=c?parseFloat(n[1]):0,f=gi(c?n[1]:n)||0,p=e.start||0+(c?d:0),v=[],b=0;return function(g,y,E){if(a&&(s=0),l&&(s=(E-1)/2),u&&(s=E-1),!v.length){for(var C=0;C<E;C++){if(!i)v.push(Math.abs(s-C));else{var V=l?(i[0]-1)/2:s%i[0],M=l?(i[1]-1)/2:Math.floor(s/i[0]),z=C%i[0],U=Math.floor(C/i[0]),D=V-z,m=M-U,A=Math.sqrt(D*D+m*m);o==="x"&&(A=-D),o==="y"&&(A=-m),v.push(A)}b=Math.max.apply(Math,v)}r&&(v=v.map(function(S){return r(S/b)*b})),t==="reverse"&&(v=v.map(function(S){return o?S<0?S*-1:-S:Math.abs(b-S)}))}var x=c?(h-d)/b:d;return p+x*(Math.round(v[y]*100)/100)+f}}function hP(n){n===void 0&&(n={});var e=Pt(n);return e.duration=0,e.add=function(t,r){var i=gr.indexOf(e),o=e.children;i>-1&&gr.splice(i,1);function s(h){h.passThrough=!0}for(var a=0;a<o.length;a++)s(o[a]);var l=Xc(t,kh(xp,n));l.targets=l.targets||n.targets;var u=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=_e.und(r)?u:Mp(r,u),s(e),e.seek(l.timelineOffset);var c=Pt(l);s(c),o.push(c);var d=Ib(o,n);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}Pt.version="3.2.1";Pt.speed=1;Pt.suspendWhenDocumentHidden=!0;Pt.running=gr;Pt.remove=cP;Pt.get=$p;Pt.set=kb;Pt.convertPx=Sp;Pt.path=eP;Pt.setDashoffset=Jx;Pt.stagger=dP;Pt.timeline=hP;Pt.easing=Pp;Pt.penner=Pb;Pt.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n};function fP(n,e,t=!0){if(!n)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const r=()=>{const o=Gs(n.clientWidth,{floor:!0}),s=Gs(n.clientHeight,{floor:!0});e(o,s)};if(typeof ResizeObserver>"u"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>r(),unobserve:()=>{}};const i=new ResizeObserver(r);return t&&r(),{observe:()=>i.observe(n),unobserve:()=>i.unobserve(n)}}var pP=Object.defineProperty,vP=(n,e,t)=>e in n?pP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zl=(n,e,t)=>(vP(n,typeof e!="symbol"?e+"":e,t),t);let rc=class extends jx{constructor(e){super(e),Zl(this,"wrapper"),Zl(this,"domElementWrapper",document.createElement("div")),Zl(this,"requestAnimationFrameId"),Zl(this,"resizeDisoper"),this.domElementWrapper.classList.add("ICSS3DRendererWrapper"),this.domElementWrapper.style.position="absolute",this.domElementWrapper.style.top="0",this.domElementWrapper.style.left="0",this.domElementWrapper.style.width="100%",this.domElementWrapper.style.height="100%",this.domElementWrapper.style.userSelect="none",this.domElementWrapper.style.pointerEvents="none",this.domElement.classList.add("ICSS3DRenderer"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none",this.domElementWrapper.appendChild(this.domElement)}setWrapper(e){if(!e)throw new Error("CSS3DRenderer: wrapper is required");if((()=>{for(let r=0;r<e.children.length;r++)if(e.children.item(r)===this.domElementWrapper)return!0;return!1})())return;const t=this.wrapper;return t&&t.contains(this.domElementWrapper)&&this.domElementWrapper.remove(),this.appendToElement(e),this.wrapper=e,this}appendToElement(e){e.appendChild(this.domElementWrapper);const t=(o,s)=>this.setSize(o,s),{observe:r,unobserve:i}=fP(this.domElementWrapper,t,!0);r(),this.resizeDisoper=i,this.wrapper=e}renderEveryFrame(e,t){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,e),this.requestAnimationFrameId)return;const r=()=>{this.requestAnimationFrameId=requestAnimationFrame(r),e.visible&&this.render(e,t)};r()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var e;this.stopRender(),(e=this.resizeDisoper)==null||e.call(this),this.domElementWrapper.remove()}};function Pi(n){return arguments.length===0?[]:Array.isArray(n)?n:[n]}function Qs(n){const e=[];return Pi(n).forEach(t=>{t.traverse(r=>{(r.isCSS3DObjectPlus||r.isCSS3DObject||r.isCSS3DSprite)&&e.push(r)})}),e}var mP=Object.defineProperty,gP=(n,e,t)=>e in n?mP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yP=(n,e,t)=>(gP(n,e+"",t),t);let AP=class extends nl{constructor(){super()}add(...e){return super.add(...e),Qs(e).forEach(t=>{t.mode="front"}),this}},bP=class extends nl{constructor(e){if(super(),yP(this,"scene"),!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return super.add(...e),Qs(e).forEach(t=>{t.mode="behind",this.scene.add(t.getOpacityMesh())}),this}remove(...e){return Qs(e).forEach(t=>{var r;(r=t.opacityMesh)==null||r.removeFromParent(),t.opacityMesh=null}),super.remove(...e),this}};var wP=Object.defineProperty,xP=(n,e,t)=>e in n?wP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mu=(n,e,t)=>(xP(n,typeof e!="symbol"?e+"":e,t),t);let Lb=class extends Zt{constructor(e){super(),Mu(this,"isCSS3DGroup",!0),Mu(this,"mode"),Mu(this,"CSS3DObjectLength",0),this.mode=e}add(...e){return Qs(e).forEach(t=>{t.mode=this.mode}),super.add(...e),this.updateLength(),this}setVisible(e){this.visible=e,this.traverse(t=>{t.isCSS3DObjectPlus&&t.updateVisible()})}remove(...e){return super.remove(...e),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=Qs(this).length}},PP=class extends Lb{constructor(){super("front")}},EP=class extends Lb{constructor(e){if(super("behind"),Mu(this,"scene"),!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return Qs(e).forEach(t=>{this.scene.add(t.getOpacityMesh())}),super.add(...e),this}};const CP="data:image/png;base64,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";var SP=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function Do(n){return SP(this,null,function*(){return new Promise(e=>{if(OP(n))e();else{const t=r=>{const i=aa(n);r===i&&(n.off("modelLoaded",t),e())};n.on("modelLoaded",t)}})})}function OP(n){var e;return(e=aa(n))==null?void 0:e.loaded}let Ca=[null,null,()=>null];function qc(n){var e;if(Ca){if(Ca[0]===n)return Ca[2];(e=Ca[1])==null||e.dispose()}const t=new rc("front");t.domElementWrapper.style.zIndex="1";const r=new rc("behind");Do(n).then(()=>{var o;const s=(o=n.getElement())==null?void 0:o.parentElement,a=yb(n);if(!s)return console.error("initialCSS3DRender: five element is not exist"),()=>null;if(t.appendToElement(s),t.renderEveryFrame(n.scene,n.camera),!a)return console.error("initialCSS3DRender: behindWrapper is not exist"),()=>null;r.appendToElement(a),r.renderEveryFrame(n.scene,n.camera)});const i=()=>{t.dispose(),r.dispose()};return Ca=[n,t,i],i}const $P=16777215,MP=16777215,VP=1,TP=.5,_p=.6;var _P=Object.defineProperty,kP=(n,e,t)=>e in n?_P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vm=(n,e,t)=>(kP(n,typeof e!="symbol"?e+"":e,t),t);let Er=class extends Tn{constructor(){super(),vm(this,"name","IObject3D"),vm(this,"needsRender")}removeChildren(){for(;this.children.length>0;)this.remove(this.children[0]);return this}add(...e){const t=e.filter(Boolean);return t.length===0?this:super.add(...t)}addIfNotExists(...e){return e.forEach(t=>{this.children.includes(t)||this.add(t)}),this}remove(...e){if(e.length===0)return this;const t=e.filter(Boolean);return super.remove(...t)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}};function kp(n,e){if(!document.getElementById("LineLengthTagStyle")){const r=document.createElement("style");r.id="LineLengthTagStyle",document.head.appendChild(r),r.innerHTML=`
    .LineLengthTag {
      cursor: default;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial-BoldMT;
      font-weight: BoldMT;
      color: #041066;
      letter-spacing: 0;
      line-height: 20px;
      background-color: #FFFFFF;
      border-radius: 12px;
      padding: 2px 8px;
      left: 50%;
      transform: translate(-50%, -50%);
      word-break: keep-all;
      --distance-scale: 1; /* Default scale if not provided */
      transition: font-size 0.5s ease; /* Smooth transition for font size */
    }
    
    /* sm screen */
    @media screen and (max-width: 499px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* md screen */
    @media screen and (min-width: 500px) and (max-width: 929px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* lg screen */
    @media screen and (min-width: 930px) and (max-width: 1365px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xl screen */
    @media screen and (min-width: 1366px) and (max-width: 2549px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xxl screen */
    @media screen and (min-width: 2550px) {
      .LineLengthTag {
        font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
      }
    }
    `}const t=e!=null&&e.offsetY?`translateY(${e.offsetY}px)`:"";return`
    <div class="LineLengthTag" style="${t?`transform: translate(-50%, -50%) ${t};`:""}${e!=null&&e.style?" "+e.style:""}">
      ${n}
    </div>
  `}function dl(n,e){const t=Pi(e).map(r=>n.localToWorld(r.clone()));return Array.isArray(e)?t:t[0]}function IP(n,e){const t=Pi(e).map(r=>n.worldToLocal(r.clone()));return Array.isArray(e)?t:t[0]}let Vu=class extends yp{constructor(...e){super(...e),this.setAttribute("instanceStart",new Ct(new Float32Array,3)),this.setAttribute("instanceEnd",new Ct(new Float32Array,3))}fromEdgesGeometry(e){if(e.attributes.position.array.length<6)return this.setAttribute("position",new Ct(new Float32Array,3)),this.setAttribute("instanceStart",new Ct(new Float32Array,3)),this.setAttribute("instanceEnd",new Ct(new Float32Array,3)),this;if(e instanceof _y){const t=new Fu(e.attributes.position.array,6,1);this.setPositions(e.attributes.position.array),this.setAttribute("instanceStart",new di(t,3,0)),this.setAttribute("instanceEnd",new di(t,3,3))}else super.fromEdgesGeometry(e);return this}toJSON(){return{type:"FiveLineGeometry",attributes:this.attributes}}};var jP=Object.defineProperty,DP=(n,e,t)=>e in n?jP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mm=(n,e,t)=>(DP(n,typeof e!="symbol"?e+"":e,t),t);let LP=class extends Wc{constructor(e){var t;super(e),mm(this,"_three_color"),mm(this,"_dashed"),Ge(e==null?void 0:e.color)&&(this.three_color=(t=e==null?void 0:e.color)!=null?t:16777215),Object.keys(e).forEach(r=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(r)||r in this&&(this[r]=e[r])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(r){this._dashed=r,r?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}},gm=class extends gp{constructor(e,t){super(e,t)}toJSON(){return{type:"Five_THREE_Line2",geometryAttributes:this.geometry.attributes}}};var RP=Object.defineProperty,zP=(n,e,t)=>e in n?RP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ym=(n,e,t)=>(zP(n,typeof e!="symbol"?e+"":e,t),t);let BP=class extends Ab{constructor(e){var t;super(e),ym(this,"_three_color"),ym(this,"_dashed"),Ge(e==null?void 0:e.color)&&(this.three_color=(t=e==null?void 0:e.color)!=null?t:16777215),Object.keys(e).forEach(r=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(r)||r in this&&(this[r]=e[r])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(r){this._dashed=r,r?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}};function FP(n,e="m"){let t;if(e==="m")return t=n.toFixed(2),t==="0.00"?void 0:t+"m";if(e==="mm")return t=(n*1e3).toFixed(0),t==="0"?void 0:t+"mm";if(e==="ft"){const r=Math.floor(n/.3048),i=Math.floor(n%.3048/.0254);return r===0&&i===0?void 0:`${r}${i}`}}function HP(n,e="m"){let t;if(e==="m")return t=n.toFixed(2),t==="0.00"?void 0:t+"m";if(e==="mm")return t=(n*1e3*1e3).toFixed(0),t==="0"?void 0:t+"mm";if(e==="ft"){const r=(n*10.76).toFixed(1);return r==="0.0"?void 0:r+"ft"}}var UP=Object.defineProperty,NP=(n,e,t)=>e in n?UP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Am=(n,e,t)=>(NP(n,typeof e!="symbol"?e+"":e,t),t);const Po=class{static checkDom(e){let t=e,r=!0;for(;t.parent;)r===!0&&t.visible===!1&&(r=!1),t=t.parent;t.type==="Scene"?(e._onAdded(),r?e._onShowed():e._onHidden()):e._onRemoved()}static checkDomEveryFrame(){Po.checkDomEveryFrameIsRunning||(Po.checkDomEveryFrameIsRunning=!0,Po._checkDomEveryFrame())}static _checkDomEveryFrame(){Po.cacheObject.forEach(e=>Po.checkDom(e)),requestAnimationFrame(Po._checkDomEveryFrame)}};let Vn=Po;Am(Vn,"cacheObject",new Set),Am(Vn,"checkDomEveryFrameIsRunning",!1);var WP=Object.defineProperty,GP=Object.defineProperties,QP=Object.getOwnPropertyDescriptors,bm=Object.getOwnPropertySymbols,XP=Object.prototype.hasOwnProperty,qP=Object.prototype.propertyIsEnumerable,jh=(n,e,t)=>e in n?WP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sa=(n,e)=>{for(var t in e||(e={}))XP.call(e,t)&&jh(n,t,e[t]);if(bm)for(var t of bm(e))qP.call(e,t)&&jh(n,t,e[t]);return n},wm=(n,e)=>GP(n,QP(e)),Lt=(n,e,t)=>(jh(n,typeof e!="symbol"?e+"":e,t),t);class Hr extends Er{constructor(e){var t,r,i,o;super(),Lt(this,"name","LineMesh"),Lt(this,"type","Line2"),Lt(this,"object"),Lt(this,"points",[]),Lt(this,"doms",[]),Lt(this,"highlighted",!1),Lt(this,"_geometry"),Lt(this,"line1"),Lt(this,"line2"),Lt(this,"opacityBeforeHighlight"),Lt(this,"colorBeforeHighlight"),Lt(this,"paramsStyle",{}),Lt(this,"lastRenderDomItem"),Lt(this,"lastFOV"),Lt(this,"_onAdded",()=>{this.doms.length===0&&this.paramsStyle.lengthEnable&&this.updateDomItems()}),Lt(this,"_onRemoved",()=>{this.doms.forEach(u=>u.destroy()),this.doms=[]}),Lt(this,"_onShowed",()=>{this.doms.forEach(u=>u.container.style.display="block")}),Lt(this,"_onHidden",()=>{this.doms.forEach(u=>u.container.style.display="none")}),Lt(this,"onCameraUpdate",()=>{var u;(u=this.five)!=null&&u.camera&&this.lastFOV!==this.five.camera.fov&&(this.lastFOV=this.five.camera.fov,this.updateDomItems({force:!0}))}),Lt(this,"onPanoArrived",()=>{setTimeout(()=>this.updateDomItems({force:!0}),100)}),this.paramsStyle=Sa({dashed:!1,lineOpacity:1},e),this.geometry=new Vu;const s={color:new qe((t=e==null?void 0:e.lineColor)!=null?t:MP),linewidth:(r=e==null?void 0:e.lineWidth)!=null?r:VP,dashScale:1,dashSize:.02,gapSize:.02,opacity:(i=e==null?void 0:e.lineOpacity)!=null?i:1,depthWrite:!1,transparent:!0},a=new LP(wm(Sa({},s),{dashed:!1,depthTest:!0})),l=new BP(wm(Sa({},s),{dashed:!0,depthTest:!1}));if(this.line1=new gm(this.geometry,a),this.line2=new gm(this.geometry,l),this.line1.renderOrder=2,this.line2.renderOrder=2,this.line1.name="line1",this.line2.name="line2",this.add(this.line1),this.five){const u=(o=this.five.renderer)==null?void 0:o.getSize(new Jt);u&&this.setResolution(u.width,u.height),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onPanoArrived)}e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points),this.addEventListener("removed",()=>{this.five&&(this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onPanoArrived)),Vn.cacheObject.delete(this),Vn.checkDom(this)}),this.addEventListener("added",()=>{Vn.cacheObject.add(this)}),Vn.checkDomEveryFrame()}get style(){return{lineColor:this.color,lineWidth:this.lineWidth,lineOpacity:this.lineOpacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:this.paramsStyle.lengthEnable,tip:this.paramsStyle.tip}}get lineOpacity(){var e;return(e=this.line1.material.opacity)!=null?e:this.paramsStyle.lineOpacity}get lineWidth(){var e;return(e=this.line1.material.linewidth)!=null?e:this.paramsStyle.lineWidth}get color(){var e;return new qe((e=this.line1.material.three_color)!=null?e:this.paramsStyle.lineColor)}get dashed(){return this.paramsStyle.dashed}get occlusionVisibility(){return this.paramsStyle.occlusionVisibility}get occlusionMode(){return this.paramsStyle.occlusionMode}get five(){var e,t;const r=(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five;return r||console.error(" Sculpt.modules.init(five) "),r}set geometry(e){var t;this._geometry=e,this.line1&&(this.line1.geometry=e),this.line2&&(this.line2.geometry=e),(t=this.line1)==null||t.computeLineDistances()}get geometry(){return this._geometry}updateMatrixWorld(e){var t;if(super.updateMatrixWorld(e),this.points){const r=(t=dl(this,this.points))==null?void 0:t.map(i=>i.toArray().join(",")).join(",");r!==this.lastRenderDomItem&&(this.updateDomItems(),this.lastRenderDomItem=r)}}setPoints(e){if(this.points.length===0&&e.length===0)return;const t=e.map(Xe).filter(Ge);if(this.points=t,t.length<2){const i=new Vu;this.line1.geometry=i,this.line2.geometry=i,this.updateDomItems();return}const r=t.flatMap(i=>[i.x,i.y,i.z]);if(r.length>2){this.line1.geometry.dispose();const i=new Vu;this.line1.geometry=i,this.line2.geometry=i}this.line1.geometry.setPositions(r),this.line1.computeLineDistances(),this.updateDomItems(),this.needsRender=!0}setResolution(e,t){const r=this.line1.material.resolution;(r.x!==e||r.y!==t)&&(r.set(e,t),this.needsRender=!0);const i=this.line2.material.resolution;(i.x!==e||i.y!==t)&&(i.set(e,t),this.needsRender=!0)}setStyle(e){var t,r,i,o;if(this.paramsStyle=Sa(Sa({},this.paramsStyle),e),Ge(e.lineColor)){const l=new qe(e.lineColor);this.line1.material.three_color=l,this.line2.material.three_color=l}Ge(e.lineWidth)&&(this.line1.material.linewidth=e.lineWidth,this.line2.material.linewidth=e.lineWidth),Ge(e.dashed)&&(this.line1.material.dashed=e.dashed),Ge(e.lineOpacity)&&(this.line1.material.opacity=e.lineOpacity,this.line2.material.opacity=e.lineOpacity),this.updateDomItems({force:!0});const s=(r=(t=e.occlusionVisibility)!=null?t:this.paramsStyle.occlusionVisibility)!=null?r:!0,a=(o=(i=e.occlusionMode)!=null?i:this.paramsStyle.occlusionMode)!=null?o:"translucence";s?this.dashed?(this.remove(this.line2),this.line1.material.dashed=!0,this.line1.material.depthTest=!1):a==="depthTest"?(this.remove(this.line2),this.line1.material.dashed=!1,this.line1.material.depthTest=!1):a==="translucence"&&(this.line1.material.depthTest=!0,this.line2.material.depthTest=!1,this.line1.material.dashed=!0,this.line2.material.dashed=!0,this.addIfNotExists(this.line2)):(this.remove(this.line2),this.line1.material.depthTest=!0,this.line1.material.dashed=this.paramsStyle.dashed),this.doms.forEach(l=>l.intersectCheck=!s),this.needsRender=!0}highlight(e){var t,r;if(this.highlighted=!0,e!=null&&e.color){const i=new qe(e.color);this.colorBeforeHighlight=(t=this.colorBeforeHighlight)!=null?t:this.line1.material.three_color,this.line1.material.three_color=i,this.line2.material.three_color=i}else{this.opacityBeforeHighlight=(r=this.opacityBeforeHighlight)!=null?r:this.line1.material.opacity;const i=this.opacityBeforeHighlight*_p;this.line1.material.opacity=i,this.line2.material.opacity=i}this.needsRender=!0}unhighlight(){this.highlighted&&(this.highlighted=!1,Ge(this.opacityBeforeHighlight)&&(this.line1.material.opacity=this.opacityBeforeHighlight,this.line2.material.opacity=this.line1.material.opacity,this.opacityBeforeHighlight=void 0),Ge(this.colorBeforeHighlight)&&(this.line1.material.three_color=this.colorBeforeHighlight,this.line2.material.three_color=this.colorBeforeHighlight,this.colorBeforeHighlight=void 0),this.needsRender=!0)}updateDomItems(e){const t=()=>{this.doms.forEach(i=>i.destroy()),this.doms=[]};if(!this.points||this.points.length<2||!this.paramsStyle.lengthEnable&&!this.paramsStyle.tip)return t();if(!this.five)return console.error("Five not found");const r=this.points.map((i,o)=>o!==0?[this.points[o-1],i]:null).filter(Ge).map(i=>dl(this,i));r.forEach(([i,o],s)=>{var a;const l=Yn(i,o);this.doms[s]=(a=this.doms[s])!=null?a:(()=>{var c;const d=new Ip(this.five),h=(c=this.paramsStyle.occlusionVisibility)!=null?c:!0;return d.intersectCheck=!h,d.simulate3D=!0,d})(),this.doms[s].setPosition(l,[i,o]);const u=(c,d)=>{var h,f,p;const v=(h=d==null?void 0:d.force)!=null?h:!1;if(!(this.doms[s].__text===c&&!v))if(this.doms[s].__text=c,c instanceof HTMLElement)this.doms[s].container.innerHTML="",this.doms[s].container.appendChild(c);else if(c){const b=(()=>{if(!this.five||!this.five.camera)return 0;const U=this.five.getElement();if(!U)return 0;const D=U.clientWidth,m=U.clientHeight,A=D/2,x=m/2,S=i.clone().project(this.five.camera),$=o.clone().project(this.five.camera),T={x:S.x*A,y:S.y*x},F={x:$.x*A,y:$.y*x};return Math.sqrt(Math.pow(F.x-T.x,2)+Math.pow(F.y-T.y,2))})(),g=!this.five||!this.five.camera?20:Yn(i,o).distanceTo(this.five.camera.position),y=((p=(f=this.five)==null?void 0:f.camera)==null?void 0:p.fov)||60,E=2*Math.tan(.5*y/180*Math.PI),C=`--distance-scale: ${Math.max(Math.min(1-E*g/40,1),0)};`,V=U=>{const D=document.createElement("div");D.classList.add("LineLengthTag"),D.style.visibility="hidden",D.style.position="absolute",D.style.padding="2px 8px",D.style.fontFamily="Arial-BoldMT",D.style.fontSize="14px",D.innerText=U,document.body.appendChild(D);const m=D.offsetWidth;return document.body.removeChild(D),m};let M=0;const z=V(c);b>0&&z>b&&(M=-20),this.doms[s].container.innerHTML=kp(c,{style:`${C} ${this.paramsStyle.cssStyle||""}`,offsetY:M})}else this.doms[s].container.innerHTML=""};if(this.paramsStyle.tip)u(this.paramsStyle.tip,e);else{const c=FP(i.distanceTo(o),this.paramsStyle.lengthUnit);u(c||null,e)}}),this.doms.length>r.length&&(this.doms.slice(r.length).forEach(i=>i.destroy()),this.doms.length=r.length)}}var YP=Object.defineProperty,KP=(n,e,t)=>e in n?YP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xm=(n,e,t)=>(KP(n,typeof e!="symbol"?e+"":e,t),t);let JP=class extends tc{constructor(){super(...arguments),xm(this,"isCSS3DSprite",!0),xm(this,"isCSS3DObject",!0)}};var ZP=Object.defineProperty,e7=Object.defineProperties,t7=Object.getOwnPropertyDescriptors,Pm=Object.getOwnPropertySymbols,n7=Object.prototype.hasOwnProperty,r7=Object.prototype.propertyIsEnumerable,Dh=(n,e,t)=>e in n?ZP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Em=(n,e)=>{for(var t in e||(e={}))n7.call(e,t)&&Dh(n,t,e[t]);if(Pm)for(var t of Pm(e))r7.call(e,t)&&Dh(n,t,e[t]);return n},Cm=(n,e)=>e7(n,t7(e)),go=(n,e,t)=>(Dh(n,typeof e!="symbol"?e+"":e,t),t);const i7=`
varying vec2 vUv;
varying float vRadius;
varying float vDistanceToCamera;
varying float vCenterDistanceToCamera;
void main() {
  vUv = uv;
  // 
  vRadius = length(position.xy);
  // 
  vec3 worldPosition = vec3(modelViewMatrix * vec4(position, 1.0));
  vDistanceToCamera = distance(cameraPosition, worldPosition);
  vCenterDistanceToCamera = distance(cameraPosition, vec3(0.0));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);
}
`,o7=`
varying vec2 vUv;
varying float vRadius;

uniform float borderWidth;
uniform float radius;

void main() {
  vec2 uv = vUv;

  if (vRadius > radius - borderWidth && vRadius < radius) {
    // 
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3);
  } else {
    // 
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.2);
  }
}
`;function s7(){const n=new Oo(.2,64),e=new Wr({side:fn,uniforms:{borderWidth:{value:.01},radius:{value:.2}},vertexShader:i7,fragmentShader:o7,depthTest:!1,transparent:!0,blending:Iy,blendEquation:H2,blendSrc:F2,blendDst:ky,blendDstAlpha:B2});return new nt(n,e)}function a7(){const n=new Zt,e={lineWidth:1,lineColor:3407837,lineOpacity:.7,occlusionVisibility:!0},t=new Hr(Cm(Em({points:[{x:-.5},{x:.5}]},e),{lineColor:3407837})),r=new Hr(Cm(Em({points:[{y:-.5},{y:.5}]},e),{lineColor:3407837}));return n.add(t,r),n}function l7(n){const e=new jy;e.add(new Dy(new H(0,0,0),new H(0,0,n)));const t=new Ly(e,32,.003),r=new st({color:10994687,depthTest:!1,transparent:!0});return new nt(t,r)}function u7(){const n=new ep(.03,.035,64),e=new st({color:16777215,depthTest:!1,transparent:!0,side:fn});return new nt(n,e)}function c7(){const n=new tp(.018,32,32),e=new st({color:5085183,depthTest:!1,transparent:!0});return new nt(n,e)}function d7(){const n=document.createElement("img");n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAMAAAB8FU7dAAAAw1BMVEUAAACDuuiAsu11q/x8r/+HxtKHxtKIx9J4ut6Hx9Jcn/uNwNlmmf+RuP9ppf9orel3ud2HxtJrpf9oremev/9ppP9orelQmP9ZoPWSuP92q/9cnv9prel4ut53qv9orelYoPWIxdJPmP+HxtGRuP9oo/+Suf9Qmf92q/+RuP+DsP9Pmv+FxdFtre2SyMiRuP9PmP+evv9ppf9cnv+rxf9orepZofV4ut52q/+Dsf+Esv+5y/93q/9aofbF0f93rP9qpf8IzZ1iAAAAL3RSTlMAEg4s3dK5nodgVQoF/Pf39vbt7evr39rV1NTOzs6srJ+fiIZ9fWlpW09ERCwcHMH8LhIAAADRSURBVBjTjdDHkoMwEIThBrzOm3POOQwSYCRhe/f9n2p75FD2zX/VXL5qOAjzkixLsFL6fOFF5PwpXUj/eEwx7Oh9Jq+FdV5MqZkXlU9K4KZsmqY02x/A8LSwv14o0ylJWkP087WVhDfcjmjj5b/E3+CEpDPdGY58C7tKfzSiiA9uB4dV/NIF7yVQ7AGuq0lOIzrvnLP2Et2aMzUqryge8FVX0Zjl5XkG3KsR593pM2zVEScjvbMU7IdGjF19IzZ43Ceyve4Ai5Jep93u9BJs3j/gXjHbRgy31AAAAABJRU5ErkJggg==";const e=new JP(n);return n.style.pointerEvents="none",e.scale.set(.003,.003,.003),e}let h7=class extends Tn{constructor(e){super(),go(this,"disableGetPixel",!0),go(this,"planeMesh"),go(this,"ringMesh"),go(this,"crossline"),go(this,"lineMesh"),go(this,"ballMesh"),go(this,"cssBallMesh");const t=.18;this.planeMesh=s7(),this.ringMesh=u7(),this.crossline=a7(),this.lineMesh=l7(t),this.ballMesh=c7(),this.cssBallMesh=d7(),this.ballMesh.position.setZ(t),this.cssBallMesh.position.setZ(t),this.planeMesh.renderOrder=0,this.ringMesh.renderOrder=1,this.crossline.renderOrder=2,this.lineMesh.renderOrder=3,this.ballMesh.renderOrder=4,this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.ringMesh,this.cssBallMesh),qc(e)}updateWithIntersect(e){if(!e.face)return;const t=(()=>{const i=e.face.normal.clone().normalize();return i.y>.99?new H(0,1,0):i.y<-.99?new H(0,-1,0):i.x>.99?new H(1,0,0):i.x<-.99?new H(-1,0,0):i.z>.99?new H(0,0,1):i.z<-.99?new H(0,0,-1):i.y<.01&&i.y>-.01?new H(i.x,0,i.z):i})(),r=new H().addVectors(e.point,t);this.position.copy(e.point),this.lookAt(r)}show(){this.visible=!0,this.add(this.cssBallMesh)}hide(){this.visible=!1,this.remove(this.cssBallMesh)}dispose(){}};const f7="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var p7=Object.defineProperty,v7=Object.defineProperties,m7=Object.getOwnPropertyDescriptors,Sm=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,Om=(n,e,t)=>e in n?p7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A7=(n,e)=>{for(var t in e||(e={}))g7.call(e,t)&&Om(n,t,e[t]);if(Sm)for(var t of Sm(e))y7.call(e,t)&&Om(n,t,e[t]);return n},b7=(n,e)=>v7(n,m7(e));function kl(n,e,t){return x7(n,e)}function w7(n,e=3){const t=new H().addVectors(n.ray.origin,n.ray.direction.clone().normalize().multiplyScalar(e)),r=n.ray.direction.clone().negate();return{distance:e,point:t,object:new Tn,face:new Tr(0,0,0,r),raycaster:n,isVirtual:!0}}function x7(n,e){const t=aa(n).intersectRaycaster(e)[0];if(t)return b7(A7({},t),{raycaster:e,isVirtual:!1})}function P7(n,e){const{x:t,y:r}=e,i=t*2-1,o=r*2-1,s=new oo;return s.setFromCamera({x:i,y:o},n.camera),s.params.Points.threshold=.02,s}const $m=`url("data:image/svg+xml,%3Csvg width='12px' height='12px' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M6,12 C9.3137085,12 12,9.3137085 12,6 C12,2.6862915 9.3137085,0 6,0 C2.6862915,0 0,2.6862915 0,6 C0,9.3137085 2.6862915,12 6,12 Z' fill='%23FF5959'%3E%3C/path%3E%3Cg transform='translate(2, 2)' stroke='%23FFFFFF'%3E%3Ccircle cx='4' cy='4' r='4'%3E%3C/circle%3E%3Cline x1='1.07141075' y1='1.23997894' x2='6.64700843' y2='6.81557662'%3E%3C/line%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 6 6, auto`,E7=new H;function Ki(n){const{raycaster:e,line:t,clampToLine:r=!0}=n,i=new _n().setFromNormalAndCoplanarPoint(e.ray.direction.clone().normalize(),new H),o=i.projectPoint(t.start,new H),s=i.projectPoint(t.end,new H),a=new qn(o,s),l=a.closestPointToPoint(e.ray.origin,r,E7),u=l.distanceTo(s),c=l.distanceTo(o),d=a.distance();if(u>c&&u>d){const h=-l.distanceTo(o)/d,f=t.start.clone().sub(t.end).normalize();return t.start.clone().sub(f.clone().multiplyScalar(h*t.distance()))}else{const h=l.distanceTo(o)/d;return new H().lerpVectors(t.start,t.end,h)}}var C7=Object.defineProperty,S7=Object.defineProperties,O7=Object.getOwnPropertyDescriptors,Mm=Object.getOwnPropertySymbols,$7=Object.prototype.hasOwnProperty,M7=Object.prototype.propertyIsEnumerable,Lh=(n,e,t)=>e in n?C7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vm=(n,e)=>{for(var t in e||(e={}))$7.call(e,t)&&Lh(n,t,e[t]);if(Mm)for(var t of Mm(e))M7.call(e,t)&&Lh(n,t,e[t]);return n},V7=(n,e)=>S7(n,O7(e)),_r=(n,e,t)=>(Lh(n,typeof e!="symbol"?e+"":e,t),t),eu=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const T7=3,Rh="CSS3DRenderer",za=`${Rh}@${T7}`,us=()=>{console.error(`${za} is disposed`)},Rt={css3DObjects:[],frontModeStore:{css3DRenderer:new rc},behindModeStore:{css3DRenderer:new rc}};function Tm(n){return Rt.css3DObjects.find(e=>e.id===n)}function _7(n){Rt.frontModeStore.css3DRenderer.setWrapper(n)}function k7(n){Rt.behindModeStore.css3DRenderer.setWrapper(n)}let ic=class{constructor(e){_r(this,"hooks",new Cn),_r(this,"state",{enabled:!0,visible:!0,disposed:!1}),_r(this,"_scene"),_r(this,"store",{frontModeGroup:new PP}),_r(this,"create3DElement",(t,r,i)=>{if(this.state.disposed)return us();const o=(()=>{const M={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none",wrapperStyle:{}};return Object.assign(M,i)})(),s=r.map(Xe);if((s==null?void 0:s.length)<4)return console.error(`${za}: requires 4 point but params may have fewer`);const{ratio:a,devicePixelRatio:l,mode:u,autoRender:c,container:d,pointerEvents:h,wrapperStyle:f}=o;let p=!1;const v=this.createObject(s,{ratio:a,dpr:l,container:d,mode:u,pointerEvents:h,wrapperStyle:f});Rt.css3DObjects.push(v),o.scene&&this.setScene(o.scene);const b=()=>{if(p)return;const M=v.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();M&&M.add(v)},g=()=>{p||(b(),this.render(t),this.hooks.emit("render"))},y=M=>this.setVisibleById(v.id,M),E=M=>this.setEnabledById(v.id,M),C=()=>(p=!0,v.removeFromParent(),!0),V=u==="front"?Rt.frontModeStore.css3DRenderer:Rt.behindModeStore.css3DRenderer;return c&&g(),{id:v.uuid,container:d,css3DObject:v,render:c?void 0:g,show:()=>y(!0),hide:()=>y(!1),setVisible:y,enable:()=>E(!0),disable:()=>E(!1),setEnabled:E,dispose:C,appendToElement:M=>V.setWrapper(M)}}),_r(this,"setVisibleById",(t,r)=>{var i;(i=Tm(t))==null||i.setVisible(r)}),_r(this,"setEnabledById",(t,r)=>{const i=Tm(t);if(!i)return;const o=i.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});o&&(r?o.add(i):o.remove(i))}),_r(this,"createObject",(t,r)=>{const i=new zb(V7(Vm({cornerPoints:t},r),{style:r.wrapperStyle}));return i.element.classList.add(`${Rh}__container`),i.element.id=`${Rh}__container--${i.uuid}`,i}),e&&this.setScene(e)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return Rt.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return Rt.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return Rt.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return Rt.behindModeStore.css3DRenderer}setScene(e){this._scene=e}getCurrentState(){return this.state}setState(e,t={userAction:!0}){if(this.state.disposed)return us();const r=Vm({},this.state);this.state=Object.assign(this.state,e),r.visible!==this.state.visible&&(e.visible?this.handleShow():this.handleHide()),r.enabled!==this.state.enabled&&(e.enabled?this.handleEnable():this.handleDisable()),r.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:r,userAction:t.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return eu(this,arguments,function*({userAction:e}={userAction:!0}){if(this.state.disposed)return us();this.setState({visible:!0},{userAction:e}),this.hooks.emit("show",{userAction:e})})}hide(){return eu(this,arguments,function*({userAction:e}={userAction:!0}){if(this.state.disposed)return us();this.setState({visible:!1},{userAction:e}),this.hooks.emit("hide",{userAction:e})})}enable({userAction:e}={userAction:!0}){if(this.state.disposed)return us();this.setState({enabled:!0},{userAction:e}),this.hooks.emit("enable",{userAction:e})}disable({userAction:e}={userAction:!0}){if(this.state.disposed)return us();this.setState({enabled:!1},{userAction:e}),this.hooks.emit("disable",{userAction:e})}getFrontCSS3DScene({createSceneIfNotExists:e=!1}={}){var t;const r=(t=Rt.frontModeStore)==null?void 0:t.css3DScene;if(r)return r;if(e){const i=new AP;Rt.frontModeStore.css3DScene=i}return Rt.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:e=!1}={}){var t,r;const i=(t=Rt.behindModeStore)==null?void 0:t.css3DScene;if(i)return i;if(e){const o=(r=Rt.behindModeStore.scene)!=null?r:this.scene;if(!o){console.error(`${za}: scene is required when mode is behind`);return}const s=new bP(o);Rt.behindModeStore.css3DScene=s,Rt.behindModeStore.scene=o}return Rt.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:e=!0}={}){const t=this.getFrontCSS3DScene({createSceneIfNotExists:e});return e&&t&&(t.getObjectById(this.store.frontModeGroup.id)||t.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:e=!0}={}){var t;const r=this.getBehindCSS3DScene({createSceneIfNotExists:e});if(e&&r&&this.scene){const i=(t=this.store.behindModeGroup)!=null?t:new EP(this.scene);this.store.behindModeGroup=i,r.getObjectById(i.id)||r.add(i)}return this.store.behindModeGroup}render(e){var t,r;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const i=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!i)return console.error(`${za}: css3DScene is required when mode is front`);Rt.frontModeStore.css3DRenderer.renderEveryFrame(i,e)}if(((r=(t=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:t.CSS3DObjectLength)!=null?r:0)>0){const i=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!i)return console.error(`${za}: css3DScene is required when mode is behind`);Rt.behindModeStore.css3DRenderer.renderEveryFrame(i,e)}}handleShow(){return eu(this,null,function*(){var e;this.store.frontModeGroup.setVisible(!0),(e=this.store.behindModeGroup)==null||e.setVisible(!0)})}handleHide(){return eu(this,null,function*(){var e;this.store.frontModeGroup.setVisible(!1),(e=this.store.behindModeGroup)==null||e.setVisible(!1)})}handleEnable(){var e,t;(e=this.getFrontCSS3DScene())==null||e.add(this.store.frontModeGroup),this.store.behindModeGroup&&((t=this.getBehindCSS3DScene())==null||t.add(this.store.behindModeGroup))}handleDisable(){var e,t,r;this.store.frontModeGroup.children.forEach(i=>{i instanceof Ai&&i.element instanceof Element&&i.element.parentNode!==null&&i.element.remove()}),(e=this.store.behindModeGroup)==null||e.children.forEach(i=>{i instanceof Ai&&i.element instanceof Element&&i.element.parentNode!==null&&i.element.remove()}),(t=this.getFrontCSS3DScene())==null||t.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((r=this.getBehindCSS3DScene())==null||r.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}};_r(ic,"setFrontModeContainer",_7),_r(ic,"setBehindModeContainer",k7);var I7=Object.defineProperty,j7=(n,e,t)=>e in n?I7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wt=(n,e,t)=>(j7(n,typeof e!="symbol"?e+"":e,t),t);const Rb=1,_m=`CSS3DObjectPlus@${Rb}`,D7=.00216,L7=.003;class zb extends Ai{constructor(e){var t,r,i,o,s;if(Yi(e.cornerPoints)&&Yi(e.width))throw new Error("cornerPoints and width cannot be both empty");const a=(t=e.container)!=null?t:document.createElement("div"),l=(r=e.cornerPoints)!=null?r:(()=>{const D=e.width/2;return[new H(-D,D,0),new H(-D,-D,0),new H(D,-D,0),new H(D,D,0)]})(),u=(i=e.ratio)!=null?i:L7,c=(o=e.dpr)!=null?o:1,d=(s=e.pointerEvents)!=null?s:"auto",h=Math.max(D7,u),f=l[0].distanceTo(l[1]),p=l[1].distanceTo(l[2]),v=Gs(f/u*c),b=Gs(p/u*c),g=Yn(...l);let y;if(h===u)a.style.width=`${v}px`,a.style.height=`${b}px`,y=a;else{const D=document.createElement("div");D.style.width=`${v}px`,D.style.height=`${b}px`,D.style.pointerEvents="none";const m=u/h;a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width=`${m*v}px`,a.style.height=`${m*b}px`,D.appendChild(a),y=D}if(super(y),Wt(this,"version",Rb),Wt(this,"isCSS3DObjectPlus",!0),Wt(this,"isCSS3DObject",!0),Wt(this,"name",_m),Wt(this,"container"),Wt(this,"width"),Wt(this,"height"),Wt(this,"domWidthPx"),Wt(this,"domHeightPx"),Wt(this,"cornerPoints"),Wt(this,"centerPosition"),Wt(this,"ratio"),Wt(this,"mode","front"),Wt(this,"hooks",new Cn),Wt(this,"opacityMesh"),Wt(this,"selfVisible",!0),Wt(this,"setVisible",D=>{this.selfVisible=D,this.visible=wp(this.parent)&&this.selfVisible,this.opacityMesh&&(this.opacityMesh.visible=this.visible)}),Wt(this,"updateVisible",()=>{this.setVisible(this.selfVisible)}),Wt(this,"createOpacityMesh",D=>{const{domWidthPx:m,domHeightPx:A}=D,x=new gb(m,A);return x.position.copy(D.position),x.rotation.copy(D.rotation),x.scale.copy(D.scale),x}),a.style.pointerEvents=d,Object.assign(a.style,e.style),this.scale.set(h,h,h),this.cornerPoints=l,this.ratio=u,this.container=a,e.mode&&(this.mode=e.mode),h===u)this.width=f,this.height=p,this.domWidthPx=v,this.domHeightPx=b,this.centerPosition=g;else{const D=u/h;this.width=D*f,this.height=D*p,this.domWidthPx=D*v,this.domHeightPx=D*b,this.centerPosition=new H().subVectors(g,l[0]).multiplyScalar(D).add(l[0])}a.classList.add(`${_m}__container`);const E=new H().subVectors(l[1],l[0]),C=new H().subVectors(l[3],l[0]),V=new H().crossVectors(E,C).normalize();this.lookAt(V);const M=this.up.clone().applyQuaternion(this.quaternion),z=C.clone(),U=new H().crossVectors(M,z).normalize();this.rotateOnWorldAxis(U,M.angleTo(z)),this.position.copy(g),this.addEventListener("added",()=>{var D;this.mode==="front"&&((D=this.opacityMesh)==null||D.removeFromParent())}),this.addEventListener("removed",()=>{var D;(D=this.opacityMesh)==null||D.removeFromParent()})}removeFromParent(){var e;const t=this.parent;return t!==null&&t.remove(this),(e=this.opacityMesh)==null||e.removeFromParent(),this}removeOpacityMesh(){var e;return(e=this.opacityMesh)==null||e.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var e;this.container.remove(),this.removeFromParent(),(e=this.opacityMesh)==null||e.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const e=this.createOpacityMesh(this);return this.opacityMesh=e,e}}applyMatrix4(e){var t;super.applyMatrix4(e),(t=this.opacityMesh)==null||t.applyMatrix4(e)}applyQuaternion(e){var t;return super.applyQuaternion(e),(t=this.opacityMesh)==null||t.applyQuaternion(e),this}applyScaleMatrix4(e){var t;this.scale.applyMatrix4(e),(t=this.opacityMesh)==null||t.scale.applyMatrix4(e)}}var R7=Object.defineProperty,z7=(n,e,t)=>e in n?R7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Oa=(n,e,t)=>(z7(n,typeof e!="symbol"?e+"":e,t),t);const B7=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,F7=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function H7(){const n=new El(.4,.4),e=Tx,t=new wi().load(e);t.encoding=fi,t.minFilter=ci;const r=new st({map:t,transparent:!0,depthTest:!1});return new nt(n,r)}function U7(){const n=new jy;n.add(new Dy(new H(0,0,0),new H(0,0,.1)));const e=new Ly(n,8,.003),t=new Wr({vertexShader:B7,fragmentShader:F7,depthTest:!1,transparent:!0});return new nt(e,t)}function N7(){const n=new tp(.01,20,20),e=new st({color:10349931,depthTest:!1,transparent:!0,side:fn}),t=new nt(n,e);return t.position.set(0,0,.1),t}function W7(){const n=new zb({pointerEvents:"none",cornerPoints:[new H(-.2,.2,0),new H(-.2,-.2,0),new H(.2,-.2,0),new H(.2,.2,0)]}),e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.backgroundImage=`url(${CP})`,e.style.backgroundSize="100%",e.style.backgroundRepeat="no-repeat",n.container.appendChild(e),n}let G7=class extends Tn{constructor(e){super(),Oa(this,"planeMesh"),Oa(this,"lineMesh"),Oa(this,"ballMesh"),Oa(this,"borderMesh"),Oa(this,"five"),this.planeMesh=H7(),this.lineMesh=U7(),this.ballMesh=N7(),this.borderMesh=W7(),this.addEventListener("added",()=>{this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),this.addEventListener("removed",()=>{this.remove(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),qc(e),this.five=e}updateWithIntersect(e){var t;const r=(t=e==null?void 0:e.face)!=null&&t.normal?new H().addVectors(e.point,e.face.normal):this.five.camera.position;this.position.copy(e.point),this.lookAt(r)}show(){this.visible=!0,this.borderMesh.parent||this.add(this.borderMesh)}hide(){this.visible=!1,this.remove(this.borderMesh)}dispose(){var e;(e=this.planeMesh.material.map)==null||e.dispose()}};var Q7=Object.defineProperty,X7=(n,e,t)=>e in n?Q7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pr=(n,e,t)=>(X7(n,typeof e!="symbol"?e+"":e,t),t);let q7=class{constructor(e,t){pr(this,"five"),pr(this,"hooks",new Cn),pr(this,"position",null),pr(this,"magnifier",null),pr(this,"pointHelper",null),pr(this,"state",{enabled:!1,visible:!0}),pr(this,"group",new Zt),pr(this,"show",()=>{var u,c;this.state.visible||(this.state.visible=!0,(u=this.pointHelper)==null||u.show(),(c=this.magnifier)==null||c.enable(),this.five.needsRender=!0)}),pr(this,"hide",()=>{var u,c;this.state.visible&&(this.state.visible=!1,(u=this.pointHelper)==null||u.hide(),(c=this.magnifier)==null||c.disable(),this.five.needsRender=!0)}),pr(this,"updateWithIntersect",(u,c={emitEvent:!0})=>{var d;if(!u)return;this.abortUpdateMagnifier(),this.position=u,c.emitEvent&&this.hooks.emit("intersectionUpdate",u),(d=this.pointHelper)==null||d.updateWithIntersect(u);const h=()=>{var f;return(f=this.magnifier)==null?void 0:f.renderWithPoint(u.point)};this.abortUpdateMagnifier=()=>this.five.off("renderFrame",h),this.five.once("renderFrame",h),this.five.needsRender=!0}),pr(this,"abortUpdateMagnifier",()=>{});var r,i,o,s,a;this.five=e,this.magnifier=(t==null?void 0:t.magnifier)!==void 0?t.magnifier:new Mx(e,(r=t==null?void 0:t.magnifierParams)!=null?r:{dragEnabled:!0});let l;(t==null?void 0:t.pointHelper)==="default"||(t==null?void 0:t.pointHelper)===void 0?l=new G7(e):(t==null?void 0:t.pointHelper)==="highlight"?l=new h7(e):l=t.pointHelper,this.pointHelper=l,this.group.name="five-point-selector",this.five.scene.add(this.group),(a=this.magnifier)==null||a.appendTo((s=(o=t.container)!=null?o:(i=e.getElement())==null?void 0:i.parentElement)!=null?s:document.body)}enable(){var e;this.state.enabled||(this.state.enabled=!0,this.pointHelper&&this.group.add(this.pointHelper),(e=this.magnifier)==null||e.enable(),this.five.needsRender=!0,this.hooks.emit("enabled"))}disable(){var e;this.state.enabled&&(this.state.enabled=!1,this.pointHelper&&this.group.remove(this.pointHelper),(e=this.magnifier)==null||e.disable(),this.hooks.emit("disabled"))}dispose(){this.hooks.off(),this.disable(),this.magnifier=null,this.pointHelper=null}};var Y7=Object.defineProperty,K7=Object.defineProperties,J7=Object.getOwnPropertyDescriptors,km=Object.getOwnPropertySymbols,Z7=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,zh=(n,e,t)=>e in n?Y7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yo=(n,e)=>{for(var t in e||(e={}))Z7.call(e,t)&&zh(n,t,e[t]);if(km)for(var t of km(e))eE.call(e,t)&&zh(n,t,e[t]);return n},Im=(n,e)=>K7(n,J7(e)),He=(n,e,t)=>(zh(n,typeof e!="symbol"?e+"":e,t),t);const jm=new H,cs=()=>!1;let tE=class extends Cn{constructor(e,t){var r,i,o,s;super(),He(this,"_cursorError",!1),He(this,"actionIfNoIntersection","virtualPoint"),He(this,"plane"),He(this,"planeMode","onlyVirtual"),He(this,"pointSelectorHelper"),He(this,"five"),He(this,"hook",this),He(this,"adhereEnabled",!0),He(this,"adhereRadius",.1),He(this,"adherePlane",[]),He(this,"adhereLine",[]),He(this,"_outOfFive",!1),He(this,"_enabled",!1),He(this,"mode"),He(this,"pressDown",!1),He(this,"adherePoints"),He(this,"setPressDown"),He(this,"lastFiveHelperVisible"),He(this,"lastIntersection"),He(this,"mousePosition"),He(this,"_mouseDownInfo"),He(this,"_touchStartInfo"),He(this,"config",{}),He(this,"select",u=>{u&&this.updatePointSelectorHelperIntersect(u);const c=this.emit("wantsSelect",this.position);return c||(this.pointSelectorHelper.hide(),this.emit("select",this.position),console.debug(this.position)),!c}),He(this,"onKeyDown",u=>{u.key==="Shift"&&(this.adhereEnabled=!1)}),He(this,"onKeyUp",u=>{u.key==="Shift"&&(this.adhereEnabled=!0)}),He(this,"onMouseWheel",u=>{this.updateByMousePosition(u);const c=()=>this.updateByMousePosition();this.five.off("render.prepare",c),this.five.on("render.prepare",c),setTimeout(()=>{this.five.off("render.prepare",c)},200)}),He(this,"onEnter",()=>{this.cursorError||this.pointSelectorHelper.show(),this.outOfFive=!1}),He(this,"onMouseEnter",()=>{this.onEnter(),this.emit("intersectionUpdate",this.position)}),He(this,"onMouseLeave",()=>{this.pointSelectorHelper.hide(),this.outOfFive=!0,this.emit("intersectionUpdate",void 0)}),He(this,"onMouseDown",u=>{this._mouseDownInfo={clientX:u.clientX,clientY:u.clientY,timestamp:performance.now()}}),He(this,"onMouseUp",u=>{if(!this._mouseDownInfo)return;const{clientX:c,clientY:d,timestamp:h}=this._mouseDownInfo;Math.abs(u.clientX-c)<2&&Math.abs(u.clientY-d)<2&&performance.now()-h<500?this.select():this._mouseDownInfo=null}),He(this,"onTouchStart",u=>{this._touchStartInfo={clientX:u.touches[0].clientX,clientY:u.touches[0].clientY,timestamp:performance.now()},this.setPressDown=setTimeout(()=>{if(this.setPressDown=void 0,this.mousePosition={clientX:u.touches[0].clientX,clientY:u.touches[0].clientY},!this.mouseNdcPosition)return;const c=this.updateByNdcPosition(this.mouseNdcPosition);this.pressDown=c},200)}),He(this,"onTouchMove",u=>{if(this.setPressDown){let c=!1;if(this._touchStartInfo){const{clientX:d,clientY:h}=this._touchStartInfo;(Math.abs(u.touches[0].clientX-d)>2||Math.abs(u.touches[0].clientY-h)>2)&&(c=!0)}c&&(clearTimeout(this.setPressDown),this.setPressDown=void 0);return}if(this.pressDown){if(this.mousePosition={clientX:u.touches[0].clientX,clientY:u.touches[0].clientY},!this.mouseNdcPosition)return;this.updateByNdcPosition(this.mouseNdcPosition)}}),He(this,"onTouchEnd",u=>{if(this.setPressDown){clearTimeout(this.setPressDown),this.setPressDown=void 0;return}this.pressDown&&(setTimeout(()=>{this.pressDown=!1},100),this.select())}),He(this,"updateByMousePosition",u=>{if(this.five.getElement()){if(!u||(u==null?void 0:u.buttons)!==0){this.pointSelectorHelper.hide();return}else this.pointSelectorHelper.show();u&&(this.mousePosition={clientX:u.clientX,clientY:u.clientY}),this.updateByNdcPosition(this.mouseNdcPosition)}}),He(this,"updateByNdcPosition",u=>{var c,d,h;const f=P7(this.five,u);let p=kl(this.five,f);if(p){if(this.plane&&this.planeMode==="vertical"&&(p=Im(yo({},p),{point:this.plane.projectPoint(p.point,new H),face:new Tr(0,0,0,this.plane.normal.clone()),originalPoint:p.point.clone()})),this.plane&&this.planeMode==="onlyPlane"){const v=f.ray.intersectPlane(this.plane,jm);if(!v)return!1;p={distance:this.five.camera.position.distanceTo(v),point:v.clone(),originalPoint:p.point.clone(),face:new Tr(0,0,0,this.plane.normal.clone()),raycaster:f}}return this.updatePointSelectorHelperIntersect(p),this.lastIntersection=p,!0}if(this.plane){const v=f.ray.intersectPlane(this.plane,jm);if(v){const b={distance:this.five.camera.position.distanceTo(v),point:v.clone(),object:new Tn,face:new Tr(0,0,0,this.plane.normal.clone()),raycaster:f,isVirtual:!0};return this.updatePointSelectorHelperIntersect(b),!0}}if(this.actionIfNoIntersection==="lastPoint")return this.updatePointSelectorHelperIntersect(this.lastIntersection),!0;if(this.actionIfNoIntersection==="virtualPoint"){const v=w7(f,(c=this.lastIntersection)==null?void 0:c.distance);return v.face=new Tr(0,0,0,(h=(d=this.lastIntersection)==null?void 0:d.face)==null?void 0:h.normal),v.isVirtual=!0,this.lastIntersection=v,this.updatePointSelectorHelperIntersect(v),!0}else if(this.actionIfNoIntersection==="disable")return this.updatePointSelectorHelperIntersect(null),!1}),He(this,"updatePointSelectorHelperIntersect",u=>{var c,d,h,f,p,v,b,g;if(!u){this.pointSelectorHelper.hide(),this.pointSelectorHelper.position=u,this.emit("intersectionUpdate",u),this.five.getElement().style.cursor=$m;return}this.onEnter(),this.cursorError||(this.five.getElement().style.cursor="");const y=yo({},u);if(this.adhereEnabled&&this.mouseNdcPosition&&this.five.renderer){const E={x:this.mouseNdcPosition.x,y:1-this.mouseNdcPosition.y},C=this.five.renderer.getSize(new Jt);if(this.adhereEnabled&&typeof this.adherePoints=="function"&&typeof this.adhereRadius=="number"){for(const V of this.adherePlane){const M=V.distanceToPoint(u.point);let z=V.projectPoint(u.point,new H);(!this.plane||this.plane.distanceToPoint(z)<.01)&&(z=(d=(c=this.plane)==null?void 0:c.projectPoint(z,new H))!=null?d:z,M<this.adhereRadius&&(y.point=z.clone(),y.adherePoint=z.clone(),this.plane||(y.face=new Tr(0,0,0,V.normal.clone())),y.isAdsorbed=!0))}for(const V of this.adhereLine){let M=V.closestPointToPoint(u.point,!1,new H);if(M.distanceTo(u.point)<this.adhereRadius)(!this.plane||this.plane.distanceToPoint(M)<.01)&&(M=(f=(h=this.plane)==null?void 0:h.projectPoint(M,new H))!=null?f:M,y.point=M.clone(),y.adhereLine=V.clone(),y.isAdsorbed=!0);else{const z=Ki({raycaster:new ec(this.five.camera.position,u.point.clone().sub(this.five.camera.position).normalize()),line:V,clampToLine:!1}),U=z.clone().project(this.five.camera);if(U.z<=1){const D={x:(U.x+1)/2,y:(1-U.y)/2},m={x:Math.abs(D.x-E.x)*C.width,y:Math.abs(D.y-E.y)*C.height};let A=z.clone();m.x<10&&m.y<10&&(!this.plane||this.plane.distanceToPoint(A)<.01)&&(A=(v=(p=this.plane)==null?void 0:p.projectPoint(A,new H))!=null?v:A,y.point=A.clone(),y.adhereLine=V.clone(),y.isAdsorbed=!0)}}}for(const V of this.adherePoints({intersection:u,pointSelectorInstance:this})){const M=V instanceof Tr?new H(V.a,V.b,V.c):V;if(M.IsAlwaysVisible=V.IsAlwaysVisible,!(this.plane&&this.plane.distanceToPoint(M)>.01))if(M.distanceTo(u.point)<this.adhereRadius){y.point=(g=(b=this.plane)==null?void 0:b.projectPoint(M,new H))!=null?g:M.clone(),!this.plane&&V instanceof Tr&&(y.face=V),y.isAdsorbed=!0;break}else{const z=M.clone().project(this.five.camera);if(z.z>1)continue;const U=this.five.renderer.getSize(new Jt),D={x:(z.x+1)/2,y:(1-z.y)/2},m={x:Math.abs(D.x-E.x)*U.width,y:Math.abs(D.y-E.y)*U.height};if(m.x<10&&m.y<10){let A=!1;if(M.IsAlwaysVisible)A=!0;else{const x=new oo;x.setFromCamera(M.clone(),this.five.camera);const S=this.five.model.intersectRaycaster(x,void 0,!0)[0],$=.1,T=this.five.camera.position.distanceTo(M);S&&S.distance<T+$&&(A=!0)}if(A){y.point=M.clone(),!this.plane&&V instanceof Tr&&(y.face=V),y.isAdsorbed=!0;break}}}}}}this.pointSelectorHelper.updateWithIntersect(y,{emitEvent:!1}),this.emit("intersectionUpdate",y)}),He(this,"mousePositionToNdcPosition",u=>{const c=this.five.getElement();if(!c)return null;const{top:d,left:h,width:f,height:p}=c.getBoundingClientRect(),{clientX:v,clientY:b}=u;return{x:(v-h)/f,y:1-(b-d)/p}}),He(this,"onFiveWantsPanGesture",()=>{if(this.pressDown)return!1}),He(this,"renderScreenCenter",()=>{this.updateByNdcPosition({x:.5,y:.5})}),He(this,"emitIntersectionUpdate",u=>{this.emit("intersectionUpdate",u)}),this.five=e,this.config=yo(yo({},this.config),t),this.actionIfNoIntersection=(i=(r=t==null?void 0:t.actionIfNoIntersection)!=null?r:t==null?void 0:t.actionIfNoModelUnderMouse)!=null?i:"virtualPoint";const a=(o=t==null?void 0:t.mode)!=null?o:"auto";a==="auto"?this.mode=f7?"fixed":"cursor":this.mode=a;const l={autoFixPCPosition:this.mode==="cursor",initialPosition:this.mode==="fixed"?{left:"35%",top:"20%"}:void 0};this.pointSelectorHelper=new q7(this.five,Im(yo({},t==null?void 0:t.helper),{magnifierParams:yo(yo({},l),(s=t==null?void 0:t.helper)==null?void 0:s.magnifierParams)})),this.pointSelectorHelper.hide()}get position(){if(!this.outOfFive)return this.pointSelectorHelper.position}get outOfFive(){return this._outOfFive}get enabled(){return this._enabled}get cursorError(){return this._cursorError}set cursorError(e){this._cursorError=e,this.five.getElement().style.cursor=e?$m:"",e?this.pointSelectorHelper.hide():this.pointSelectorHelper.show()}set outOfFive(e){this._outOfFive=e}set enabled(e){this._enabled=e}get mouseNdcPosition(){return this.mousePosition?this.mousePositionToNdcPosition(this.mousePosition):null}enable(){if(this.enabled)return;this.enabled=!0,this.outOfFive=!1,this.pointSelectorHelper.enable(),this.pointSelectorHelper.hide();const e=this.five.getElement();if(!e)throw new Error("five element not found");this.mode==="cursor"?(this.five.on("wantsMoveToPano",cs),this.five.on("wantsChangeMode",cs),this.five.on("wantsTapGesture",cs),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mousemove",this.updateByMousePosition),e.addEventListener("wheel",this.onMouseWheel),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseout",this.onMouseLeave),this.five.on("wantsPanGesture",this.onFiveWantsPanGesture)):this.mode==="fixed"&&(this.five.on("panoArrived",this.renderScreenCenter),this.five.on("panGesture",this.renderScreenCenter),this.five.on("interiaPan",this.renderScreenCenter),this.renderScreenCenter(),this.pointSelectorHelper.show()),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.on("intersectionUpdate",this.emitIntersectionUpdate),this.lastFiveHelperVisible=this.five.helperVisible,this.five.helperVisible=!1,this.emit("enable")}disable(){if(!this.enabled)return;this.enabled=!1,this.adherePoints=null,this.adhereLine=[],this.adherePlane=[],this.plane=void 0,this.pointSelectorHelper.disable(),this.five.getElement().style.cursor="";const e=this.five.getElement();this.five.off("wantsPanGesture",this.onFiveWantsPanGesture),this.five.off("wantsMoveToPano",cs),this.five.off("wantsChangeMode",cs),this.five.off("wantsTapGesture",cs),this.five.helperVisible=this.lastFiveHelperVisible,e==null||e.removeEventListener("touchstart",this.onTouchStart),e==null||e.removeEventListener("touchmove",this.onTouchMove),e==null||e.removeEventListener("touchend",this.onTouchEnd),e==null||e.removeEventListener("mousedown",this.onMouseDown),e==null||e.removeEventListener("mouseup",this.onMouseUp),e==null||e.removeEventListener("mousemove",this.updateByMousePosition),e==null||e.removeEventListener("wheel",this.onMouseWheel),e==null||e.removeEventListener("mouseenter",this.onMouseEnter),e==null||e.removeEventListener("mouseout",this.onMouseLeave),this.five.off("panoArrived",this.renderScreenCenter),this.five.off("panGesture",this.renderScreenCenter),this.five.off("interiaPan",this.renderScreenCenter),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.off("intersectionUpdate",this.emitIntersectionUpdate),this.emit("disable")}dispose(){this.disable(),this.pointSelectorHelper.dispose()}setAdherePoints(e,t){e?typeof e=="function"?this.adherePoints=e:this.adherePoints=()=>e:this.adherePoints=null}};var nE=Object.defineProperty,rE=(n,e,t)=>e in n?nE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vt=(n,e,t)=>(rE(n,typeof e!="symbol"?e+"":e,t),t),iE=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const oE=new Jt;let Ip=class{constructor(e,t,r){vt(this,"container"),vt(this,"visible",!1),vt(this,"enabled",!1),vt(this,"visibles",[]),vt(this,"wrapper"),vt(this,"positionsForRotate"),vt(this,"intersectCheck",!0),vt(this,"extraObjectsForIntersectCheck",[]),vt(this,"simulate3D",!1),vt(this,"tagWrapper"),vt(this,"five"),vt(this,"originPosition"),vt(this,"transformedPosition"),vt(this,"disposer"),vt(this,"config"),vt(this,"fiveUtil"),vt(this,"disposers",[]),vt(this,"onModeChange",()=>{this.visibles[3]=void 0,this.updateVisible()}),vt(this,"onPanoArrived",()=>{this.visibles[3]=void 0,this.updateVisible()}),vt(this,"onCameraUpdate",()=>{this.visible!==!1&&this.updateScreenPosition()}),vt(this,"onCameraFovUpdate",()=>{this.onCameraUpdate(),this.five.off("render.prepare",this.onCameraUpdate),this.five.on("render.prepare",this.onCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.onCameraUpdate)},1e3)}),vt(this,"onFiveEveryReady",()=>{this.five.state.mode!=="Panorama"&&this.updateVisible()}),vt(this,"updateVisible",()=>{this.visible&&(this.updateIntersectCheckVisible(),this.needsRender=!0)}),vt(this,"applyVisible",()=>{this.visibles[3]===!0||this.visibles.every(a=>a!==!1)?(this.container.style.opacity="1",this.container.style.pointerEvents="auto"):(this.container.style.opacity="0",this.container.style.pointerEvents="none")}),vt(this,"updateIntersectCheckVisible",()=>{var a,l;if(!this.position)return;if(!this.intersectCheck){this.visibles[1]=!0;return}let u=!1,c=.01;this.fiveUtil.workUtil.fromType==="poincare"&&(c=.05);const d=this.transformedPosition.clone().sub(this.five.camera.position).normalize();Mo.set(this.five.camera.position,d);const h=(a=aa(this.five).intersectRaycaster(Mo))!=null?a:[],f=(l=Mo.intersectObjects(this.extraObjectsForIntersectCheck,!0))!=null?l:[],p=[...h,...f].sort((v,b)=>v.distance-b.distance)[0];p?u=(p==null?void 0:p.distance)+c>this.transformedPosition.distanceTo(this.five.camera.position):u=!0,this.visibles[1]=u});var i,o,s;this.five=e,this.fiveUtil=(i=e.__fiveUtil__)!=null?i:e.__fiveUtil__=new Ap(e),this.originPosition=t?Xe(t).clone():void 0,this.transformedPosition=(o=this.originPosition)==null?void 0:o.clone(),this.positionsForRotate=(s=r==null?void 0:r.positionsForRotate)==null?void 0:s.map(a=>Xe(a).clone()),this.config=r??{},this.container=(()=>{const a=document.createElement("div");return a.classList.add("light-tag"),a.style.width="0",a.style.height="0",a.style.position="absolute",r!=null&&r.disableOpacityTransition||(a.style.transition="opacity 0.2s linear"),a})(),this.addResizeListener(),this.show(),this.enable(),setTimeout(()=>{this.updateVisible(),this.needsRender=!0},0)}get position(){return this.transformedPosition}set needsRender(e){this.applyVisible()}show(e){this.visible=!0,this.visibles[0]=!0,e!=null&&e.force&&(this.visibles[3]=!0),this.container.style.opacity="1",this.container.style.pointerEvents="auto",this.updateVisible(),this.onCameraUpdate()}hide(){this.visible=!1,this.visibles[0]=!1,this.container.style.opacity="0",this.container.style.pointerEvents="none"}enable(){return iE(this,null,function*(){var e,t,r,i;if(this.enabled||(this.enabled=!0,yield Do(this.five),!this.enabled))return;if(this.wrapper=(t=this.config.wrapper)!=null?t:(e=this.five.getElement())==null?void 0:e.parentElement,!this.wrapper){console.error("lighttag: wrapper is required");return}const o=`light-tag-wrapper-${(i=(r=this.config)==null?void 0:r.namespace)!=null?i:"default"}`;if(!this.tagWrapper){let a=Array.from(this.wrapper.children).find(l=>l.id===o);if(!a){const l=document.createElement("div");a=l,l.id=o,l.style.position="absolute",l.style.overflow="hidden",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.pointerEvents="none",l.style.zIndex="1",this.wrapper.appendChild(a)}this.tagWrapper=a}this.tagWrapper.appendChild(this.container),this.updateVisible();const s=mb(this.five,this.onFiveEveryReady);this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraFovUpdate),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposer=()=>{s(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraFovUpdate),this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)}})}disable(){var e,t;this.enabled&&(this.enabled=!1,(e=this.tagWrapper)==null||e.removeChild(this.container),(t=this.disposer)==null||t.call(this))}destroy(){this.disable(),this.container.remove(),this.disposers.forEach(e=>e())}setPosition(e,t){this.transformedPosition=Xe(e).clone(),this.positionsForRotate=t==null?void 0:t.map(r=>Xe(r).clone()),this.onCameraUpdate(),setTimeout(()=>this.onCameraUpdate(),0)}setTransformMatrix(e){var t;this.transformedPosition=(t=this.originPosition)==null?void 0:t.clone().applyMatrix4(e),this.onCameraUpdate()}updateScreenPosition(){var e;if(!this.transformedPosition){this.container.style.left="-100%",this.container.style.top="-100%";return}const t=(e=this.five.renderer)==null?void 0:e.getSize(oE);if(!t){this.container.style.left="-100%",this.container.style.top="-100%";return}const r=yd(this.five.camera,this.transformedPosition,t);if(!r){this.container.style.left="-100%",this.container.style.top="-100%";return}const i=(()=>{if(!this.simulate3D)return 1;const s=3*Math.tan(.5*this.five.camera.fov/180*Math.PI),a=this.transformedPosition.distanceTo(this.five.camera.position);return Math.max(Math.min(1-s*a/40,1),.75)})(),o=(()=>{if(this.positionsForRotate===void 0||this.positionsForRotate.length!==2)return 0;const[s,a]=this.positionsForRotate,l=yd(this.five.camera,s,t),u=yd(this.five.camera,a,t);if(!l||!u)return 0;const c=l.leftPx>u.leftPx?u:l,d=l.leftPx>u.leftPx?l:u,h=d.leftPx-c.leftPx,f=d.topPx-c.topPx;return Math.atan2(f,h)*(180/Math.PI)})();this.container.style.left=r.leftPx+"px",this.container.style.top=r.topPx+"px",this.container.style.transformOrigin="center",this.container.style.transform=`scale(${i})`,o&&(this.container.style.transform+=` rotate(${o}deg)`)}addResizeListener(){const e=this.five.getElement();if(e){const{observe:t,unobserve:r}=Th(this.onCameraUpdate,e);t(),this.disposers.push(r)}}};function jp(n){return Bb(n,"box3")}function sE(n){return Bb(n,"sphere")}function aE(n,e){const t=e==="box3"?new tl:new Rx,r=new H;if(n.updateWorldMatrix(!1,!1),n.traverse(i=>{var o;if(i.name==="shadow"||i.type==="Line2")return;const s=i.geometry;if(i.updateWorldMatrix(!1,!1),s!==void 0){const a=(o=s==null?void 0:s.attributes)==null?void 0:o.position;if(a)for(let l=0,u=a.count;l<u;l++)r.fromBufferAttribute(a,l).applyMatrix4(i.matrixWorld),t.expandByPoint(r);else s.vertices&&s.vertices.forEach(l=>{const u=l.clone().applyMatrix4(i.matrixWorld);t.expandByPoint(u)})}}),!t.isEmpty())return t}function Bb(n,e){const t=aE(n,e);return t&&t.applyMatrix4(lE(n.matrixWorld.clone())),t}const lE=n=>{const e=n.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],v=e[13],b=e[14],g=e[15],y=d*b*u-v*h*u+v*l*f-a*b*f-d*l*g+a*h*g,E=p*h*u-c*b*u-p*l*f+s*b*f+c*l*g-s*h*g,C=c*v*u-p*d*u+p*a*f-s*v*f-c*a*g+s*d*g,V=p*d*l-c*v*l-p*a*h+s*v*h+c*a*b-s*d*b,M=t*y+r*E+i*C+o*V;if(M===0)return n.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/M;return e[0]=y*z,e[1]=(v*h*o-d*b*o-v*i*f+r*b*f+d*i*g-r*h*g)*z,e[2]=(a*b*o-v*l*o+v*i*u-r*b*u-a*i*g+r*l*g)*z,e[3]=(d*l*o-a*h*o-d*i*u+r*h*u+a*i*f-r*l*f)*z,e[4]=E*z,e[5]=(c*b*o-p*h*o+p*i*f-t*b*f-c*i*g+t*h*g)*z,e[6]=(p*l*o-s*b*o-p*i*u+t*b*u+s*i*g-t*l*g)*z,e[7]=(s*h*o-c*l*o+c*i*u-t*h*u-s*i*f+t*l*f)*z,e[8]=C*z,e[9]=(p*d*o-c*v*o-p*r*f+t*v*f+c*r*g-t*d*g)*z,e[10]=(s*v*o-p*a*o+p*r*u-t*v*u-s*r*g+t*a*g)*z,e[11]=(c*a*o-s*d*o-c*r*u+t*d*u+s*r*f-t*a*f)*z,e[12]=V*z,e[13]=(c*v*i-p*d*i+p*r*h-t*v*h-c*r*b+t*d*b)*z,e[14]=(p*a*i-s*v*i-p*r*l+t*v*l+s*r*b-t*a*b)*z,e[15]=(s*d*i-c*a*i+c*r*l-t*d*l-s*r*h+t*a*h)*z,n};function uE(n){return/^https?:\/\/|^\/\//.test(n)||/^data:/.test(n)}function cE(n,e){return uE(e)?e:`${n}${e}`}function Ee(){}const Ji=n=>n;function Dp(n,e){for(const t in e)n[t]=e[t];return n}function dE(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Fb(n){return n()}function Dm(){return Object.create(null)}function vn(n){n.forEach(Fb)}function lr(n){return typeof n=="function"}function De(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let tu;function pn(n,e){return tu||(tu=document.createElement("a")),tu.href=e,n===tu.href}function hE(n){return Object.keys(n).length===0}function Zi(n,e,t,r){if(n){const i=Hb(n,e,t,r);return n[0](i)}}function Hb(n,e,t,r){return n[1]&&r?Dp(t.ctx.slice(),n[1](r(e))):t.ctx}function eo(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function to(n,e,t,r,i,o){if(i){const s=Hb(e,t,r,o);n.p(s,i)}}function no(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Xs(n){return n??""}function ks(n){return n&&lr(n.destroy)?n.destroy:Ee}function Lm(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Ub=typeof window<"u";let Lp=Ub?()=>window.performance.now():()=>Date.now(),Rp=Ub?n=>requestAnimationFrame(n):Ee;const Is=new Set;function Nb(n){Is.forEach(e=>{e.c(n)||(Is.delete(e),e.f())}),Is.size!==0&&Rp(Nb)}function zp(n){let e;return Is.size===0&&Rp(Nb),{promise:new Promise(t=>{Is.add(e={c:n,f:t})}),abort(){Is.delete(e)}}}function Y(n,e){n.appendChild(e)}function Qe(n,e,t){const r=Bp(n);if(!r.getElementById(e)){const i=ie("style");i.id=e,i.textContent=t,Wb(r,i)}}function Bp(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function fE(n){const e=ie("style");return Wb(Bp(n),e),e.sheet}function Wb(n,e){return Y(n.head||n,e),e.sheet}function ae(n,e,t){n.insertBefore(e,t||null)}function oe(n){n.parentNode&&n.parentNode.removeChild(n)}function hl(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function ie(n){return document.createElement(n)}function Ae(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function dt(n){return document.createTextNode(n)}function $e(){return dt(" ")}function at(){return dt("")}function Ye(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function Gb(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function P(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function pE(n){return Array.from(n.childNodes)}function yt(n,e){e=""+e,n.data!==e&&(n.data=e)}function fe(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Se(n,e,t){n.classList[t?"add":"remove"](e)}function Qb(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}let vE=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=Ae(t.nodeName):this.e=ie(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)ae(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(oe)}};const oc=new Map;let sc=0;function mE(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function gE(n,e){const t={stylesheet:fE(e),rules:{}};return oc.set(n,t),t}function ac(n,e,t,r,i,o,s,a=0){const l=16.666/r;let u=`{
`;for(let b=0;b<=1;b+=l){const g=e+(t-e)*o(b);u+=b*100+`%{${s(g,1-g)}}
`}const c=u+`100% {${s(t,1-t)}}
}`,d=`__svelte_${mE(c)}_${a}`,h=Bp(n),{stylesheet:f,rules:p}=oc.get(h)||gE(h,n);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${c}`,f.cssRules.length));const v=n.style.animation||"";return n.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${i}ms 1 both`,sc+=1,d}function lc(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),sc-=i,sc||yE())}function yE(){Rp(()=>{sc||(oc.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&oe(e)}),oc.clear())})}let fl;function pi(n){fl=n}function Qo(){if(!fl)throw new Error("Function called outside component initialization");return fl}function lo(n){Qo().$$.on_mount.push(n)}function AE(n){Qo().$$.after_update.push(n)}function la(n){Qo().$$.on_destroy.push(n)}function uo(){const n=Qo();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=Qb(e,t,{cancelable:r});return i.slice().forEach(s=>{s.call(n,o)}),!o.defaultPrevented}return!0}}function uc(n,e){return Qo().$$.context.set(n,e),e}function Ur(n){return Qo().$$.context.get(n)}function bi(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const bs=[],$t=[];let js=[];const Bh=[],Xb=Promise.resolve();let Fh=!1;function qb(){Fh||(Fh=!0,Xb.then(ai))}function Rm(){return qb(),Xb}function kn(n){js.push(n)}function Fp(n){Bh.push(n)}const Ed=new Set;let ds=0;function ai(){if(ds!==0)return;const n=fl;do{try{for(;ds<bs.length;){const e=bs[ds];ds++,pi(e),bE(e.$$)}}catch(e){throw bs.length=0,ds=0,e}for(pi(null),bs.length=0,ds=0;$t.length;)$t.pop()();for(let e=0;e<js.length;e+=1){const t=js[e];Ed.has(t)||(Ed.add(t),t())}js.length=0}while(bs.length);for(;Bh.length;)Bh.pop()();Fh=!1,Ed.clear(),pi(n)}function bE(n){if(n.fragment!==null){n.update(),vn(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(kn)}}function wE(n){const e=[],t=[];js.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),js=e}let $a;function Hp(){return $a||($a=Promise.resolve(),$a.then(()=>{$a=null})),$a}function Vo(n,e,t){n.dispatchEvent(Qb(`${e?"intro":"outro"}${t}`))}const Tu=new Set;let Dr;function Ie(){Dr={r:0,c:[],p:Dr}}function je(){Dr.r||vn(Dr.c),Dr=Dr.p}function q(n,e){n&&n.i&&(Tu.delete(n),n.i(e))}function ee(n,e,t,r){if(n&&n.o){if(Tu.has(n))return;Tu.add(n),Dr.c.push(()=>{Tu.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const Up={duration:0};function Xo(n,e,t){const r={direction:"in"};let i=e(n,t,r),o=!1,s,a,l=0;function u(){s&&lc(n,s)}function c(){const{delay:h=0,duration:f=300,easing:p=Ji,tick:v=Ee,css:b}=i||Up;b&&(s=ac(n,0,1,f,h,p,b,l++)),v(0,1);const g=Lp()+h,y=g+f;a&&a.abort(),o=!0,kn(()=>Vo(n,!0,"start")),a=zp(E=>{if(o){if(E>=y)return v(1,0),Vo(n,!0,"end"),u(),o=!1;if(E>=g){const C=p((E-g)/f);v(C,1-C)}}return o})}let d=!1;return{start(){d||(d=!0,lc(n),lr(i)?(i=i(r),Hp().then(c)):c())},invalidate(){d=!1},end(){o&&(u(),o=!1)}}}function ua(n,e,t){const r={direction:"out"};let i=e(n,t,r),o=!0,s;const a=Dr;a.r+=1;function l(){const{delay:u=0,duration:c=300,easing:d=Ji,tick:h=Ee,css:f}=i||Up;f&&(s=ac(n,1,0,c,u,d,f));const p=Lp()+u,v=p+c;kn(()=>Vo(n,!1,"start")),zp(b=>{if(o){if(b>=v)return h(0,1),Vo(n,!1,"end"),--a.r||vn(a.c),!1;if(b>=p){const g=d((b-p)/c);h(1-g,g)}}return o})}return lr(i)?Hp().then(()=>{i=i(r),l()}):l(),{end(u){u&&i.tick&&i.tick(1,0),o&&(s&&lc(n,s),o=!1)}}}function zm(n,e,t,r){const i={direction:"both"};let o=e(n,t,i),s=r?0:1,a=null,l=null,u=null;function c(){u&&lc(n,u)}function d(f,p){const v=f.b-s;return p*=Math.abs(v),{a:s,b:f.b,d:v,duration:p,start:f.start,end:f.start+p,group:f.group}}function h(f){const{delay:p=0,duration:v=300,easing:b=Ji,tick:g=Ee,css:y}=o||Up,E={start:Lp()+p,b:f};f||(E.group=Dr,Dr.r+=1),a||l?l=E:(y&&(c(),u=ac(n,s,f,v,p,b,y)),f&&g(0,1),a=d(E,v),kn(()=>Vo(n,f,"start")),zp(C=>{if(l&&C>l.start&&(a=d(l,v),l=null,Vo(n,a.b,"start"),y&&(c(),u=ac(n,s,a.b,a.duration,0,b,o.css))),a){if(C>=a.end)g(s=a.b,1-s),Vo(n,a.b,"end"),l||(a.b?c():--a.group.r||vn(a.group.c)),a=null;else if(C>=a.start){const V=C-a.start;s=a.a+a.d*b(V/a.duration),g(s,1-s)}}return!!(a||l)}))}return{run(f){lr(o)?Hp().then(()=>{o=o(i),h(f)}):h(f)},end(){c(),a=l=null}}}function cc(n,e){const t=e.token={};function r(i,o,s,a){if(e.token!==t)return;e.resolved=a;let l=e.ctx;s!==void 0&&(l=l.slice(),l[s]=a);const u=i&&(e.current=i)(l);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==o&&d&&(Ie(),ee(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),je())}):e.block.d(1),u.c(),q(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[o]=u),c&&ai()}if(dE(n)){const i=Qo();if(n.then(o=>{pi(i),r(e.then,1,e.value,o),pi(null)},o=>{if(pi(i),r(e.catch,2,e.error,o),pi(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Yb(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function xE(n,e){n.d(1),e.delete(n.key)}function Kb(n,e){ee(n,1,1,()=>{e.delete(n.key)})}function Np(n,e,t,r,i,o,s,a,l,u,c,d){let h=n.length,f=o.length,p=h;const v={};for(;p--;)v[n[p].key]=p;const b=[],g=new Map,y=new Map,E=[];for(p=f;p--;){const z=d(i,o,p),U=t(z);let D=s.get(U);D?E.push(()=>D.p(z,e)):(D=u(U,z),D.c()),g.set(U,b[p]=D),U in v&&y.set(U,Math.abs(p-v[U]))}const C=new Set,V=new Set;function M(z){q(z,1),z.m(a,c),s.set(z.key,z),c=z.first,f--}for(;h&&f;){const z=b[f-1],U=n[h-1],D=z.key,m=U.key;z===U?(c=z.first,h--,f--):g.has(m)?!s.has(D)||C.has(D)?M(z):V.has(m)?h--:y.get(D)>y.get(m)?(V.add(D),M(z)):(C.add(m),h--):(l(U,s),h--)}for(;h--;){const z=n[h];g.has(z.key)||l(z,s)}for(;f;)M(b[f-1]);return vn(E),b}function Jb(n,e){const t={},r={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(t[l]=a[l],i[l]=1);n[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in t||(t[s]=void 0);return t}function Zb(n){return typeof n=="object"&&n!==null?n:{}}function Wp(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function xe(n){n&&n.c()}function be(n,e,t,r){const{fragment:i,after_update:o}=n.$$;i&&i.m(e,t),r||kn(()=>{const s=n.$$.on_mount.map(Fb).filter(lr);n.$$.on_destroy?n.$$.on_destroy.push(...s):vn(s),n.$$.on_mount=[]}),o.forEach(kn)}function we(n,e){const t=n.$$;t.fragment!==null&&(wE(t.after_update),vn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function PE(n,e){n.$$.dirty[0]===-1&&(bs.push(n),qb(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Le(n,e,t,r,i,o,s,a=[-1]){const l=fl;pi(n);const u=n.$$={fragment:null,ctx:[],props:o,update:Ee,not_equal:i,bound:Dm(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Dm(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(d,h,...f)=>{const p=f.length?f[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),c&&PE(n,d)),h}):[],u.update(),c=!0,vn(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=pE(e.target);u.fragment&&u.fragment.l(d),d.forEach(oe)}else u.fragment&&u.fragment.c();e.intro&&q(n.$$.fragment),be(n,e.target,e.anchor,e.customElement),ai()}pi(l)}let Re=class{$destroy(){we(this,1),this.$destroy=Ee}$on(e,t){if(!lr(t))return Ee;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!hE(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ew=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(i,o){return i[0]===t?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(t,r){var i=n(this.__entries__,t);~i?this.__entries__[i][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,i=n(r,t);~i&&r.splice(i,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var s=o[i];t.call(r,s[1],s[0])}},e}()}(),Hh=typeof window<"u"&&typeof document<"u"&&window.document===document,dc=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),EE=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(dc):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),CE=2;function SE(n,e){var t=!1,r=!1,i=0;function o(){t&&(t=!1,n()),r&&a()}function s(){EE(o)}function a(){var l=Date.now();if(t){if(l-i<CE)return;r=!0}else t=!0,r=!1,setTimeout(s,e);i=l}return a}var OE=20,$E=["top","right","bottom","left","width","height","size","weight"],ME=typeof MutationObserver<"u",VE=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=SE(this.refresh.bind(this),OE)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!Hh||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ME?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Hh||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,i=$E.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),tw=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];Object.defineProperty(n,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return n},qs=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||dc},nw=Yc(0,0,0,0);function hc(n){return parseFloat(n)||0}function Bm(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,i){var o=n["border-"+i+"-width"];return r+hc(o)},0)}function TE(n){for(var e=["top","right","bottom","left"],t={},r=0,i=e;r<i.length;r++){var o=i[r],s=n["padding-"+o];t[o]=hc(s)}return t}function _E(n){var e=n.getBBox();return Yc(0,0,e.width,e.height)}function kE(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return nw;var r=qs(n).getComputedStyle(n),i=TE(r),o=i.left+i.right,s=i.top+i.bottom,a=hc(r.width),l=hc(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=Bm(r,"left","right")+o),Math.round(l+s)!==t&&(l-=Bm(r,"top","bottom")+s)),!jE(n)){var u=Math.round(a+o)-e,c=Math.round(l+s)-t;Math.abs(u)!==1&&(a-=u),Math.abs(c)!==1&&(l-=c)}return Yc(i.left,i.top,a,l)}var IE=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof qs(n).SVGGraphicsElement}:function(n){return n instanceof qs(n).SVGElement&&typeof n.getBBox=="function"}}();function jE(n){return n===qs(n).document.documentElement}function DE(n){return Hh?IE(n)?_E(n):kE(n):nw}function LE(n){var e=n.x,t=n.y,r=n.width,i=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return tw(s,{x:e,y:t,width:r,height:i,top:t,right:e+r,bottom:i+t,left:e}),s}function Yc(n,e,t,r){return{x:n,y:e,width:t,height:r}}var RE=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Yc(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=DE(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),zE=function(){function n(e,t){var r=LE(t);tw(this,{target:e,contentRect:r})}return n}(),BE=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new ew,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new RE(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof qs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new zE(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),rw=typeof WeakMap<"u"?new WeakMap:new ew,iw=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=VE.getInstance(),r=new BE(e,t,this);rw.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){iw.prototype[n]=function(){var e;return(e=rw.get(this))[n].apply(e,arguments)}});var FE=function(){return typeof dc.ResizeObserver<"u"?dc.ResizeObserver:iw}();function Gp(n){new FE((e,t)=>{var r,i,o,s,a,l;for(const u of e){const{borderBoxSize:c,contentRect:d}=u,h=(o=(i=(r=c==null?void 0:c[0])==null?void 0:r.inlineSize)!=null?i:d.width)!=null?o:n.clientWidth,f=(l=(a=(s=c==null?void 0:c[0])==null?void 0:s.blockSize)!=null?a:d.height)!=null?l:n.clientHeight;n.dispatchEvent(new CustomEvent("clientWidth",{detail:h})),n.dispatchEvent(new CustomEvent("clientHeight",{detail:f}))}}).observe(n)}function Ys(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function pl(n){const e=n-1;return e*e*e+1}function Lo(n,{delay:e=0,duration:t=400,easing:r=Ji}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:o=>`opacity: ${o*i}`}}function Fm(n,{delay:e=0,duration:t=400,easing:r=pl,x:i=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(n),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-s),[d,h]=Lm(i),[f,p]=Lm(o);return{delay:e,duration:t,easing:r,css:(v,b)=>`
			transform: ${u} translate(${(1-v)*d}${h}, ${(1-v)*f}${p});
			opacity: ${l-c*b}`}}function fc(n,{delay:e=0,speed:t,duration:r,easing:i=Ys}={}){let o=n.getTotalLength();const s=getComputedStyle(n);return s.strokeLinecap!=="butt"&&(o+=parseInt(s.strokeWidth)),r===void 0?t===void 0?r=800:r=o/t:typeof r=="function"&&(r=r(o)),{delay:e,duration:r,easing:i,css:(a,l)=>`
			stroke-dasharray: ${o};
			stroke-dashoffset: ${l*o};
		`}}const hs=[];function HE(n,e=Ee){let t;const r=new Set;function i(a){if(De(n,a)&&(n=a,t)){const l=!hs.length;for(const u of r)u[1](),hs.push(u,n);if(l){for(let u=0;u<hs.length;u+=2)hs[u][0](hs[u+1]);hs.length=0}}}function o(a){i(a(n))}function s(a,l=Ee){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||Ee),a(n),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function UE(n){return n*180/Math.PI}var NE=Object.defineProperty,WE=(n,e,t)=>e in n?NE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ao=(n,e,t)=>(WE(n,typeof e!="symbol"?e+"":e,t),t);let ow=class{constructor(e,t){Ao(this,"VERSION","3.67.2"),Ao(this,"NAME"),Ao(this,"five"),Ao(this,"workUtil"),Ao(this,"fiveUtil"),Ao(this,"hooks",new Cn),Ao(this,"staticPrefix","//vr-image-4.realsee-cdn.cn"),this.five=e,this.fiveUtil=new Ap(e),this.workUtil=this.fiveUtil.workUtil,t!=null&&t.staticPrefix&&(this.staticPrefix=t.staticPrefix)}set workCode(e){this.workUtil.workCode=e,this.onWorkCodeChange()}get workCode(){return this.workUtil.workCode}updateFive(e){this.five=e,this.fiveUtil.five=e,this.workUtil.five=e}getCurrentState(){return this.state}absoluteUrl(e){return cE(this.staticPrefix,e)}onWorkCodeChange(){}};function Uh(n,e,t=4){return Math.abs(n-e)<Math.pow(10,-t)}function GE(n,e,t=4){const r=Math.PI*2,i=n%r,o=e%r,s=Math.min(i,o),a=Math.max(i,o);return Uh(s,a,t)||Uh(s+r,a,t)}Object.assign(window,{nearlyEqual:Uh,nearlyEqualRad:GE});/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var sw={},Un=void 0,QE=sw;function Qp(n,e){var t=n.split("."),r=QE;!(t[0]in r)&&r.execScript&&r.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)!t.length&&e!==Un?r[i]=e:r=r[i]?r[i]:r[i]={}}var mt=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"&&typeof DataView<"u";function Qa(n){var e=n.length,t=0,r=Number.POSITIVE_INFINITY,i,o,s,a,l,u,c,d,h,f;for(d=0;d<e;++d)n[d]>t&&(t=n[d]),n[d]<r&&(r=n[d]);for(i=1<<t,o=new(mt?Uint32Array:Array)(i),s=1,a=0,l=2;s<=t;){for(d=0;d<e;++d)if(n[d]===s){for(u=0,c=a,h=0;h<s;++h)u=u<<1|c&1,c>>=1;for(f=s<<16|d,h=u;h<i;h+=l)o[h]=f;++a}++s,a<<=1,l<<=1}return[o,t,r]}function co(n,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=mt?new Uint8Array(n):n,this.m=!1,this.i=pc,this.r=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case Xp:this.b=32768,this.c=new(mt?Uint8Array:Array)(32768+this.h+258);break;case pc:this.b=0,this.c=new(mt?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var Xp=0,pc=1,Hm={t:Xp,s:pc};co.prototype.k=function(){for(;!this.m;){var n=rr(this,3);switch(n&1&&(this.m=!0),n>>>=1,n){case 0:var e=this.input,t=this.a,r=this.c,i=this.b,o=e.length,s=Un,a=Un,l=r.length,u=Un;if(this.d=this.f=0,t+1>=o)throw Error("invalid uncompressed block header: LEN");if(s=e[t++]|e[t++]<<8,t+1>=o)throw Error("invalid uncompressed block header: NLEN");if(a=e[t++]|e[t++]<<8,s===~a)throw Error("invalid uncompressed block header: length verify");if(t+s>e.length)throw Error("input buffer is broken");switch(this.i){case Xp:for(;i+s>r.length;){if(u=l-i,s-=u,mt)r.set(e.subarray(t,t+u),i),i+=u,t+=u;else for(;u--;)r[i++]=e[t++];this.b=i,r=this.e(),i=this.b}break;case pc:for(;i+s>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(mt)r.set(e.subarray(t,t+s),i),i+=s,t+=s;else for(;s--;)r[i++]=e[t++];this.a=t,this.b=i,this.c=r;break;case 1:this.j(XE,qE);break;case 2:for(var c=rr(this,5)+257,d=rr(this,5)+1,h=rr(this,4)+4,f=new(mt?Uint8Array:Array)(Cd.length),p=Un,v=Un,b=Un,g=Un,y=Un,E=Un,C=Un,M=Un,V=Un,M=0;M<h;++M)f[Cd[M]]=rr(this,3);if(!mt)for(M=h,h=f.length;M<h;++M)f[Cd[M]]=0;for(p=Qa(f),g=new(mt?Uint8Array:Array)(c+d),M=0,V=c+d;M<V;)switch(y=vl(this,p),y){case 16:for(C=3+rr(this,2);C--;)g[M++]=E;break;case 17:for(C=3+rr(this,3);C--;)g[M++]=0;E=0;break;case 18:for(C=11+rr(this,7);C--;)g[M++]=0;E=0;break;default:E=g[M++]=y}v=Qa(mt?g.subarray(0,c):g.slice(0,c)),b=Qa(mt?g.subarray(c):g.slice(c)),this.j(v,b);break;default:throw Error("unknown BTYPE: "+n)}}return this.n()};var Um=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Cd=mt?new Uint16Array(Um):Um,Nm=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],aw=mt?new Uint16Array(Nm):Nm,Wm=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],vc=mt?new Uint8Array(Wm):Wm,Gm=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],lw=mt?new Uint16Array(Gm):Gm,Qm=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mc=mt?new Uint8Array(Qm):Qm,Nh=new(mt?Uint8Array:Array)(288),Eo,Xm;Eo=0;for(Xm=Nh.length;Eo<Xm;++Eo)Nh[Eo]=143>=Eo?8:255>=Eo?9:279>=Eo?7:8;var XE=Qa(Nh),Wh=new(mt?Uint8Array:Array)(30),_u,qm;_u=0;for(qm=Wh.length;_u<qm;++_u)Wh[_u]=5;var qE=Qa(Wh);function rr(n,e){for(var t=n.f,r=n.d,i=n.input,o=n.a,s=i.length,a;r<e;){if(o>=s)throw Error("input buffer is broken");t|=i[o++]<<r,r+=8}return a=t&(1<<e)-1,n.f=t>>>e,n.d=r-e,n.a=o,a}function vl(n,e){for(var t=n.f,r=n.d,i=n.input,o=n.a,s=i.length,a=e[0],l=e[1],u,c;r<l&&!(o>=s);)t|=i[o++]<<r,r+=8;if(u=a[t&(1<<l)-1],c=u>>>16,c>r)throw Error("invalid code length: "+c);return n.f=t>>c,n.d=r-c,n.a=o,u&65535}co.prototype.j=function(n,e){var t=this.c,r=this.b;this.o=n;for(var i=t.length-258,o,s,a,l;(o=vl(this,n))!==256;)if(256>o)r>=i&&(this.b=r,t=this.e(),r=this.b),t[r++]=o;else for(s=o-257,l=aw[s],0<vc[s]&&(l+=rr(this,vc[s])),o=vl(this,e),a=lw[o],0<mc[o]&&(a+=rr(this,mc[o])),r>=i&&(this.b=r,t=this.e(),r=this.b);l--;)t[r]=t[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r};co.prototype.w=function(n,e){var t=this.c,r=this.b;this.o=n;for(var i=t.length,o,s,a,l;(o=vl(this,n))!==256;)if(256>o)r>=i&&(t=this.e(),i=t.length),t[r++]=o;else for(s=o-257,l=aw[s],0<vc[s]&&(l+=rr(this,vc[s])),o=vl(this,e),a=lw[o],0<mc[o]&&(a+=rr(this,mc[o])),r+l>i&&(t=this.e(),i=t.length);l--;)t[r]=t[r++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=r};co.prototype.e=function(){var n=new(mt?Uint8Array:Array)(this.b-32768),e=this.b-32768,t,r,i=this.c;if(mt)n.set(i.subarray(32768,n.length));else for(t=0,r=n.length;t<r;++t)n[t]=i[t+32768];if(this.g.push(n),this.l+=n.length,mt)i.set(i.subarray(e,e+32768));else for(t=0;32768>t;++t)i[t]=i[e+t];return this.b=32768,i};co.prototype.z=function(n){var e,t=this.input.length/this.a+1|0,r,i,o,s=this.input,a=this.c;return n&&(typeof n.p=="number"&&(t=n.p),typeof n.u=="number"&&(t+=n.u)),2>t?(r=(s.length-this.a)/this.o[2],o=258*(r/2)|0,i=o<a.length?a.length+o:a.length<<1):i=a.length*t,mt?(e=new Uint8Array(i),e.set(a)):e=a,this.c=e};co.prototype.n=function(){var n=0,e=this.c,t=this.g,r,i=new(mt?Uint8Array:Array)(this.l+(this.b-32768)),o,s,a,l;if(t.length===0)return mt?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(o=0,s=t.length;o<s;++o)for(r=t[o],a=0,l=r.length;a<l;++a)i[n++]=r[a];for(o=32768,s=this.b;o<s;++o)i[n++]=e[o];return this.g=[],this.buffer=i};co.prototype.v=function(){var n,e=this.b;return mt?this.r?(n=new Uint8Array(e),n.set(this.c.subarray(0,e))):n=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),n=this.c),this.buffer=n};function qp(n,e){var t,r;switch(this.input=n,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),t=n[this.a++],r=n[this.a++],t&15){case Ym:this.method=Ym;break;default:throw Error("unsupported compression method")}if(((t<<8)+r)%31!==0)throw Error("invalid fcheck flag:"+((t<<8)+r)%31);if(r&32)throw Error("fdict flag is not supported");this.q=new co(n,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}qp.prototype.k=function(){var n=this.input,e,t;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if(typeof r=="string"){var i=r.split(""),o,s;for(o=0,s=i.length;o<s;o++)i[o]=(i[o].charCodeAt(0)&255)>>>0;r=i}for(var a=1,l=0,u=r.length,c,d=0;0<u;){c=1024<u?1024:u,u-=c;do a+=r[d++],l+=a;while(--c);a%=65521,l%=65521}if(t!==(l<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var Ym=8;Qp("Zlib.Inflate",qp);Qp("Zlib.Inflate.prototype.decompress",qp.prototype.k);var Gh={ADAPTIVE:Hm.s,BLOCK:Hm.t},Xa,qa,Ds,Km;if(Object.keys)Xa=Object.keys(Gh);else for(qa in Xa=[],Ds=0,Gh)Xa[Ds++]=qa;Ds=0;for(Km=Xa.length;Ds<Km;++Ds)qa=Xa[Ds],Qp("Zlib.Inflate.BufferType."+qa,Gh[qa]);var Jm=sw.Zlib,uw={findSpan:function(n,e,t){var r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;for(var i=n,o=r,s=Math.floor((i+o)/2);e<t[s]||e>=t[s+1];)e<t[s]?o=s:i=s,s=Math.floor((i+o)/2);return s},calcBasisFunctions:function(n,e,t,r){var i=[],o=[],s=[];i[0]=1;for(var a=1;a<=t;++a){o[a]=e-r[n+1-a],s[a]=r[n+a]-e;for(var l=0,u=0;u<a;++u){var c=s[u+1],d=o[a-u],h=i[u]/(c+d);i[u]=l+c*h,l=d*h}i[a]=l}return i},calcBSplinePoint:function(n,e,t,r){for(var i=this.findSpan(n,r,e),o=this.calcBasisFunctions(i,r,n,e),s=new hi(0,0,0,0),a=0;a<=n;++a){var l=t[i-n+a],u=o[a],c=l.w*u;s.x+=l.x*c,s.y+=l.y*c,s.z+=l.z*c,s.w+=l.w*u}return s},calcBasisFunctionDerivatives:function(n,e,t,r,i){for(var o=[],s=0;s<=t;++s)o[s]=0;for(var a=[],s=0;s<=r;++s)a[s]=o.slice(0);for(var l=[],s=0;s<=t;++s)l[s]=o.slice(0);l[0][0]=1;for(var u=o.slice(0),c=o.slice(0),d=1;d<=t;++d){u[d]=e-i[n+1-d],c[d]=i[n+d]-e;for(var h=0,f=0;f<d;++f){var p=c[f+1],v=u[d-f];l[d][f]=p+v;var b=l[f][d-1]/l[d][f];l[f][d]=h+p*b,h=v*b}l[d][d]=h}for(var d=0;d<=t;++d)a[0][d]=l[d][t];for(var f=0;f<=t;++f){for(var g=0,y=1,E=[],s=0;s<=t;++s)E[s]=o.slice(0);E[0][0]=1;for(var C=1;C<=r;++C){var V=0,M=f-C,z=t-C;f>=C&&(E[y][0]=E[g][0]/l[z+1][M],V=E[y][0]*l[M][z]);for(var U=M>=-1?1:-M,D=f-1<=z?C-1:t-f,d=U;d<=D;++d)E[y][d]=(E[g][d]-E[g][d-1])/l[z+1][M+d],V+=E[y][d]*l[M+d][z];f<=z&&(E[y][C]=-E[g][C-1]/l[z+1][f],V+=E[y][C]*l[f][z]),a[C][f]=V;var d=g;g=y,y=d}}for(var f=t,C=1;C<=r;++C){for(var d=0;d<=t;++d)a[C][d]*=f;f*=t-C}return a},calcBSplineDerivatives:function(n,e,t,r,i){for(var o=i<n?i:n,s=[],a=this.findSpan(n,r,e),l=this.calcBasisFunctionDerivatives(a,r,n,o,e),u=[],c=0;c<t.length;++c){var d=t[c].clone(),h=d.w;d.x*=h,d.y*=h,d.z*=h,u[c]=d}for(var f=0;f<=o;++f){for(var d=u[a-n].clone().multiplyScalar(l[f][0]),p=1;p<=n;++p)d.add(u[a-n+p].clone().multiplyScalar(l[f][p]));s[f]=d}for(var f=o+1;f<=i+1;++f)s[f]=new hi(0,0,0);return s},calcKoverI:function(n,e){for(var t=1,r=2;r<=n;++r)t*=r;for(var i=1,r=2;r<=e;++r)i*=r;for(var r=2;r<=n-e;++r)i*=r;return t/i},calcRationalCurveDerivatives:function(n){for(var e=n.length,t=[],r=[],i=0;i<e;++i){var o=n[i];t[i]=new H(o.x,o.y,o.z),r[i]=o.w}for(var s=[],a=0;a<e;++a){for(var l=t[a].clone(),i=1;i<=a;++i)l.sub(s[a-i].clone().multiplyScalar(this.calcKoverI(a,i)*r[i]));s[a]=l.divideScalar(r[0])}return s},calcNURBSDerivatives:function(n,e,t,r,i){var o=this.calcBSplineDerivatives(n,e,t,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(n,e,t,r,i,o,s,a){for(var l=this.findSpan(n,o,t),u=this.findSpan(e,s,r),c=this.calcBasisFunctions(l,o,n,t),d=this.calcBasisFunctions(u,s,e,r),h=[],f=0;f<=e;++f){h[f]=new hi(0,0,0,0);for(var p=0;p<=n;++p){var v=i[l-n+p][u-e+f].clone(),b=v.w;v.x*=b,v.y*=b,v.z*=b,h[f].add(v.multiplyScalar(c[p]))}}for(var g=new hi(0,0,0,0),f=0;f<=e;++f)g.add(h[f].multiplyScalar(d[f]));g.divideScalar(g.w),a.set(g.x,g.y,g.z)}},Ro=function(n,e,t,r,i){Ry.call(this),this.degree=n,this.knots=e,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(var o=0;o<t.length;++o){var s=t[o];this.controlPoints[o]=new hi(s.x,s.y,s.z,s.w)}};Ro.prototype=Object.create(Ry.prototype);Ro.prototype.constructor=Ro;Ro.prototype.getPoint=function(n,e){var t=e||new H,r=this.knots[this.startKnot]+n*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=uw.calcBSplinePoint(this.degree,this.knots,this.controlPoints,r);return i.w!=1&&i.divideScalar(i.w),t.set(i.x,i.y,i.z)};Ro.prototype.getTangent=function(n,e){var t=e||new H,r=this.knots[0]+n*(this.knots[this.knots.length-1]-this.knots[0]),i=uw.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,r,1);return t.copy(i[1]).normalize(),t};(function(){var n,e,t;function r(m){Bs.call(this,m)}r.prototype=Object.assign(Object.create(Bs.prototype),{constructor:r,load:function(m,A,x,S){var $=this,T=$.path===""?Hi.extractUrlBase(m):$.path,F=new rl(this.manager);F.setPath($.path),F.setResponseType("arraybuffer"),F.load(m,function(R){try{A($.parse(R,T))}catch(ne){S?S(ne):console.error(ne),$.manager.itemError(m)}},x,S)},parse:function(m,A){if(d(m))n=new l().parse(m);else{var x=M(m);if(!h(x))throw new Error("THREE.FBXLoader: Unknown format.");if(f(x)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+f(x));n=new a().parse(x)}var S=new wi(this.manager).setPath(this.resourcePath||A).setCrossOrigin(this.crossOrigin);return new i(S,this.manager).parse(n)}});function i(m,A){this.textureLoader=m,this.manager=A}i.prototype={constructor:i,parse:function(){e=this.parseConnections();var m=this.parseImages(),A=this.parseTextures(m),x=this.parseMaterials(A),S=this.parseDeformers(),$=new o().parse(S);return this.parseScene(S,$,x),t},parseConnections:function(){var m=new Map;if("Connections"in n){var A=n.Connections.connections;A.forEach(function(x){var S=x[0],$=x[1],T=x[2];m.has(S)||m.set(S,{parents:[],children:[]});var F={ID:$,relationship:T};m.get(S).parents.push(F),m.has($)||m.set($,{parents:[],children:[]});var R={ID:S,relationship:T};m.get($).children.push(R)})}return m},parseImages:function(){var m={},A={};if("Video"in n.Objects){var x=n.Objects.Video;for(var S in x){var $=x[S],T=parseInt(S);if(m[T]=$.RelativeFilename||$.Filename,"Content"in $){var F=$.Content instanceof ArrayBuffer&&$.Content.byteLength>0,R=typeof $.Content=="string"&&$.Content!=="";if(F||R){var ne=this.parseImage(x[S]);A[$.RelativeFilename||$.Filename]=ne}}}}for(var T in m){var ce=m[T];A[ce]!==void 0?m[T]=A[ce]:m[T]=m[T].split("\\").pop()}return m},parseImage:function(m){var A=m.Content,x=m.RelativeFilename||m.Filename,S=x.slice(x.lastIndexOf(".")+1).toLowerCase(),$;switch(S){case"bmp":$="image/bmp";break;case"jpg":case"jpeg":$="image/jpeg";break;case"png":$="image/png";break;case"tif":$="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",x),$="image/tga";break;default:console.warn('FBXLoader: Image type "'+S+'" is not supported.');return}if(typeof A=="string")return"data:"+$+";base64,"+A;var T=new Uint8Array(A);return window.URL.createObjectURL(new Blob([T],{type:$}))},parseTextures:function(m){var A=new Map;if("Texture"in n.Objects){var x=n.Objects.Texture;for(var S in x){var $=this.parseTexture(x[S],m);A.set(parseInt(S),$)}}return A},parseTexture:function(m,A){var x=this.loadTexture(m,A);x.ID=m.id,x.name=m.attrName;var S=m.WrapModeU,$=m.WrapModeV,T=S!==void 0?S.value:0,F=$!==void 0?$.value:0;if(x.wrapS=T===0?Ha:vh,x.wrapT=F===0?Ha:vh,"Scaling"in m){var R=m.Scaling.value;x.repeat.x=R[0],x.repeat.y=R[1]}return x},loadTexture:function(m,A){var x,S=this.textureLoader.path,$=e.get(m.id).children;$!==void 0&&$.length>0&&A[$[0].ID]!==void 0&&(x=A[$[0].ID],(x.indexOf("blob:")===0||x.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var T,F=m.FileName.slice(-3).toLowerCase();if(F==="tga"){var R=this.manager.getHandler(".tga");R===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",m.RelativeFilename),T=new xv):T=R.load(x)}else F==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",m.RelativeFilename),T=new xv):T=this.textureLoader.load(x);return this.textureLoader.setPath(S),T},parseMaterials:function(m){var A=new Map;if("Material"in n.Objects){var x=n.Objects.Material;for(var S in x){var $=this.parseMaterial(x[S],m);$!==null&&A.set(parseInt(S),$)}}return A},parseMaterial:function(m,A){var x=m.id,S=m.attrName,$=m.ShadingModel;if(typeof $=="object"&&($=$.value),!e.has(x))return null;var T=this.parseParameters(m,A,x),F;switch($.toLowerCase()){case"phong":F=new xu;break;case"lambert":F=new W2;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',$),F=new xu;break}return F.setValues(T),F.name=S,F},parseParameters:function(m,A,x){var S={};m.BumpFactor&&(S.bumpScale=m.BumpFactor.value),m.Diffuse?S.color=new qe().fromArray(m.Diffuse.value):m.DiffuseColor&&m.DiffuseColor.type==="Color"&&(S.color=new qe().fromArray(m.DiffuseColor.value)),m.DisplacementFactor&&(S.displacementScale=m.DisplacementFactor.value),m.Emissive?S.emissive=new qe().fromArray(m.Emissive.value):m.EmissiveColor&&m.EmissiveColor.type==="Color"&&(S.emissive=new qe().fromArray(m.EmissiveColor.value)),m.EmissiveFactor&&(S.emissiveIntensity=parseFloat(m.EmissiveFactor.value)),m.Opacity&&(S.opacity=parseFloat(m.Opacity.value)),S.opacity<1&&(S.transparent=!0),m.ReflectionFactor&&(S.reflectivity=m.ReflectionFactor.value),m.Shininess&&(S.shininess=m.Shininess.value),m.Specular?S.specular=new qe().fromArray(m.Specular.value):m.SpecularColor&&m.SpecularColor.type==="Color"&&(S.specular=new qe().fromArray(m.SpecularColor.value));var $=this;return e.get(x).children.forEach(function(T){var F=T.relationship;switch(F){case"Bump":S.bumpMap=$.getTexture(A,T.ID);break;case"Maya|TEX_ao_map":S.aoMap=$.getTexture(A,T.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":S.map=$.getTexture(A,T.ID),S.map.encoding=fi;break;case"DisplacementColor":S.displacementMap=$.getTexture(A,T.ID);break;case"EmissiveColor":S.emissiveMap=$.getTexture(A,T.ID),S.emissiveMap.encoding=fi;break;case"NormalMap":case"Maya|TEX_normal_map":S.normalMap=$.getTexture(A,T.ID);break;case"ReflectionColor":S.envMap=$.getTexture(A,T.ID),S.envMap.mapping=N2,S.envMap.encoding=fi;break;case"SpecularColor":S.specularMap=$.getTexture(A,T.ID),S.specularMap.encoding=fi;break;case"TransparentColor":case"TransparencyFactor":S.alphaMap=$.getTexture(A,T.ID),S.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",F);break}}),S},getTexture:function(m,A){return"LayeredTexture"in n.Objects&&A in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),A=e.get(A).children[0].ID),m.get(A)},parseDeformers:function(){var m={},A={};if("Deformer"in n.Objects){var x=n.Objects.Deformer;for(var S in x){var $=x[S],T=e.get(parseInt(S));if($.attrType==="Skin"){var F=this.parseSkeleton(T,x);F.ID=S,T.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),F.geometryID=T.parents[0].ID,m[S]=F}else if($.attrType==="BlendShape"){var R={id:S};R.rawTargets=this.parseMorphTargets(T,x),R.id=S,T.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),A[S]=R}}}return{skeletons:m,morphTargets:A}},parseSkeleton:function(m,A){var x=[];return m.children.forEach(function(S){var $=A[S.ID];if($.attrType==="Cluster"){var T={ID:S.ID,indices:[],weights:[],transformLink:new Ue().fromArray($.TransformLink.a)};"Indexes"in $&&(T.indices=$.Indexes.a,T.weights=$.Weights.a),x.push(T)}}),{rawBones:x,bones:[]}},parseMorphTargets:function(m,A){for(var x=[],S=0;S<m.children.length;S++){var $=m.children[S],T=A[$.ID],F={name:T.attrName,initialWeight:T.DeformPercent,id:T.id,fullWeights:T.FullWeights.a};if(T.attrType!=="BlendShapeChannel")return;F.geoID=e.get(parseInt($.ID)).children.filter(function(R){return R.relationship===void 0})[0].ID,x.push(F)}return x},parseScene:function(m,A,x){t=new Zt;var S=this.parseModels(m.skeletons,A,x),$=n.Objects.Model,T=this;S.forEach(function(R){var ne=$[R.ID];T.setLookAtProperties(R,ne);var ce=e.get(R.ID).parents;ce.forEach(function(Z){var he=S.get(Z.ID);he!==void 0&&he.add(R)}),R.parent===null&&t.add(R)}),this.bindSkeleton(m.skeletons,A,S),this.createAmbientLight(),this.setupMorphMaterials(),t.traverse(function(R){if(R.userData.transformData){R.parent&&(R.userData.transformData.parentMatrixWorld=R.parent.matrix);var ne=E(R.userData.transformData);R.applyMatrix4(ne)}});var F=new s().parse();t.children.length===1&&t.children[0].isGroup&&(t.children[0].animations=F,t=t.children[0]),t.animations=F},parseModels:function(m,A,x){var S=new Map,$=n.Objects.Model;for(var T in $){var F=parseInt(T),R=$[T],ne=e.get(F),ce=this.buildSkeleton(ne,m,F,R.attrName);if(!ce){switch(R.attrType){case"Camera":ce=this.createCamera(ne);break;case"Light":ce=this.createLight(ne);break;case"Mesh":ce=this.createMesh(ne,A,x);break;case"NurbsCurve":ce=this.createCurve(ne,A);break;case"LimbNode":case"Root":ce=new ph;break;case"Null":default:ce=new Zt;break}ce.name=R.attrName?Da.sanitizeNodeName(R.attrName):"",ce.ID=F}this.getTransformData(ce,R),S.set(F,ce)}return S},buildSkeleton:function(m,A,x,S){var $=null;return m.parents.forEach(function(T){for(var F in A){var R=A[F];R.rawBones.forEach(function(ne,ce){if(ne.ID===T.ID){var Z=$;$=new ph,$.matrixWorld.copy(ne.transformLink),$.name=S?Da.sanitizeNodeName(S):"",$.ID=x,R.bones[ce]=$,Z!==null&&$.add(Z)}})}}),$},createCamera:function(m){var A,x;if(m.children.forEach(function(he){var pe=n.Objects.NodeAttribute[he.ID];pe!==void 0&&(x=pe)}),x===void 0)A=new Tn;else{var S=0;x.CameraProjectionType!==void 0&&x.CameraProjectionType.value===1&&(S=1);var $=1;x.NearPlane!==void 0&&($=x.NearPlane.value/1e3);var T=1e3;x.FarPlane!==void 0&&(T=x.FarPlane.value/1e3);var F=window.innerWidth,R=window.innerHeight;x.AspectWidth!==void 0&&x.AspectHeight!==void 0&&(F=x.AspectWidth.value,R=x.AspectHeight.value);var ne=F/R,ce=45;x.FieldOfView!==void 0&&(ce=x.FieldOfView.value);var Z=x.FocalLength?x.FocalLength.value:null;switch(S){case 0:A=new Xy(ce,ne,$,T),Z!==null&&A.setFocalLength(Z);break;case 1:A=new rp(-F/2,F/2,R/2,-R/2,$,T);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+S+"."),A=new Tn;break}}return A},createLight:function(m){var A,x;if(m.children.forEach(function(Z){var he=n.Objects.NodeAttribute[Z.ID];he!==void 0&&(x=he)}),x===void 0)A=new Tn;else{var S;x.LightType===void 0?S=0:S=x.LightType.value;var $=16777215;x.Color!==void 0&&($=new qe().fromArray(x.Color.value));var T=x.Intensity===void 0?1:x.Intensity.value/100;x.CastLightOnObject!==void 0&&x.CastLightOnObject.value===0&&(T=0);var F=0;x.FarAttenuationEnd!==void 0&&(x.EnableFarAttenuation!==void 0&&x.EnableFarAttenuation.value===0?F=0:F=x.FarAttenuationEnd.value);var R=1;switch(S){case 0:A=new mh($,T,F,R);break;case 1:A=new Qy($,T);break;case 2:var ne=Math.PI/3;x.InnerAngle!==void 0&&(ne=Pn.degToRad(x.InnerAngle.value));var ce=0;x.OuterAngle!==void 0&&(ce=Pn.degToRad(x.OuterAngle.value),ce=Math.max(ce,1)),A=new Gy($,T,F,ne,ce,R);break;default:console.warn("THREE.FBXLoader: Unknown light type "+x.LightType.value+", defaulting to a PointLight."),A=new mh($,T);break}x.CastShadows!==void 0&&x.CastShadows.value===1&&(A.castShadow=!0)}return A},createMesh:function(m,A,x){var S,$=null,T=null,F=[];return m.children.forEach(function(R){A.has(R.ID)&&($=A.get(R.ID)),x.has(R.ID)&&F.push(x.get(R.ID))}),F.length>1?T=F:F.length>0?T=F[0]:(T=new xu({color:13421772}),F.push(T)),"color"in $.attributes&&F.forEach(function(R){R.vertexColors=!0}),$.FBX_Deformer?(F.forEach(function(R){R.skinning=!0}),S=new Fy($,T),S.normalizeSkinWeights()):S=new nt($,T),S},createCurve:function(m,A){var x=m.children.reduce(function($,T){return A.has(T.ID)&&($=A.get(T.ID)),$},null),S=new np({color:3342591,linewidth:1});return new By(x,S)},getTransformData:function(m,A){var x={};"InheritType"in A&&(x.inheritType=parseInt(A.InheritType.value)),"RotationOrder"in A?x.eulerOrder=C(A.RotationOrder.value):x.eulerOrder="ZYX","Lcl_Translation"in A&&(x.translation=A.Lcl_Translation.value),"PreRotation"in A&&(x.preRotation=A.PreRotation.value),"Lcl_Rotation"in A&&(x.rotation=A.Lcl_Rotation.value),"PostRotation"in A&&(x.postRotation=A.PostRotation.value),"Lcl_Scaling"in A&&(x.scale=A.Lcl_Scaling.value),"ScalingOffset"in A&&(x.scalingOffset=A.ScalingOffset.value),"ScalingPivot"in A&&(x.scalingPivot=A.ScalingPivot.value),"RotationOffset"in A&&(x.rotationOffset=A.RotationOffset.value),"RotationPivot"in A&&(x.rotationPivot=A.RotationPivot.value),m.userData.transformData=x},setLookAtProperties:function(m,A){if("LookAtProperty"in A){var x=e.get(m.ID).children;x.forEach(function(S){if(S.relationship==="LookAtProperty"){var $=n.Objects.Model[S.ID];if("Lcl_Translation"in $){var T=$.Lcl_Translation.value;m.target!==void 0?(m.target.position.fromArray(T),t.add(m.target)):m.lookAt(new H().fromArray(T))}}})}},bindSkeleton:function(m,A,x){var S=this.parsePoseNodes();for(var $ in m){var T=m[$],F=e.get(parseInt(T.ID)).parents;F.forEach(function(R){if(A.has(R.ID)){var ne=R.ID,ce=e.get(ne);ce.parents.forEach(function(Z){if(x.has(Z.ID)){var he=x.get(Z.ID);he.bind(new zy(T.bones),S[Z.ID])}})}})}},parsePoseNodes:function(){var m={};if("Pose"in n.Objects){var A=n.Objects.Pose;for(var x in A)if(A[x].attrType==="BindPose"){var S=A[x].PoseNode;Array.isArray(S)?S.forEach(function($){m[$.Node]=new Ue().fromArray($.Matrix.a)}):m[S.Node]=new Ue().fromArray(S.Matrix.a)}}return m},createAmbientLight:function(){if("GlobalSettings"in n&&"AmbientColor"in n.GlobalSettings){var m=n.GlobalSettings.AmbientColor.value,A=m[0],x=m[1],S=m[2];if(A!==0||x!==0||S!==0){var $=new qe(A,x,S);t.add(new U2($,1))}}},setupMorphMaterials:function(){var m=this;t.traverse(function(A){A.isMesh&&A.geometry.morphAttributes.position&&A.geometry.morphAttributes.position.length&&(Array.isArray(A.material)?A.material.forEach(function(x,S){m.setupMorphMaterial(A,x,S)}):m.setupMorphMaterial(A,A.material))})},setupMorphMaterial:function(m,A,x){var S=m.uuid,$=A.uuid,T=!1;if(t.traverse(function(R){R.isMesh&&(Array.isArray(R.material)?R.material.forEach(function(ne){ne.uuid===$&&R.uuid!==S&&(T=!0)}):R.material.uuid===$&&R.uuid!==S&&(T=!0))}),T===!0){var F=A.clone();F.morphTargets=!0,x===void 0?m.material=F:m.material[x]=F}else A.morphTargets=!0}};function o(){}o.prototype={constructor:o,parse:function(m){var A=new Map;if("Geometry"in n.Objects){var x=n.Objects.Geometry;for(var S in x){var $=e.get(parseInt(S)),T=this.parseGeometry($,x[S],m);A.set(parseInt(S),T)}}return A},parseGeometry:function(m,A,x){switch(A.attrType){case"Mesh":return this.parseMeshGeometry(m,A,x);case"NurbsCurve":return this.parseNurbsGeometry(A)}},parseMeshGeometry:function(m,A,x){var S=x.skeletons,$=[],T=m.parents.map(function(Z){return n.Objects.Model[Z.ID]});if(T.length!==0){var F=m.children.reduce(function(Z,he){return S[he.ID]!==void 0&&(Z=S[he.ID]),Z},null);m.children.forEach(function(Z){x.morphTargets[Z.ID]!==void 0&&$.push(x.morphTargets[Z.ID])});var R=T[0],ne={};"RotationOrder"in R&&(ne.eulerOrder=C(R.RotationOrder.value)),"InheritType"in R&&(ne.inheritType=parseInt(R.InheritType.value)),"GeometricTranslation"in R&&(ne.translation=R.GeometricTranslation.value),"GeometricRotation"in R&&(ne.rotation=R.GeometricRotation.value),"GeometricScaling"in R&&(ne.scale=R.GeometricScaling.value);var ce=E(ne);return this.genGeometry(A,F,$,ce)}},genGeometry:function(m,A,x,S){var $=new Tt;m.attrName&&($.name=m.attrName);var T=this.parseGeoNode(m,A),F=this.genBuffers(T),R=new mr(F.vertex,3);if(R.applyMatrix4(S),$.setAttribute("position",R),F.colors.length>0&&$.setAttribute("color",new mr(F.colors,3)),A&&($.setAttribute("skinIndex",new G2(F.weightsIndices,4)),$.setAttribute("skinWeight",new mr(F.vertexWeights,4)),$.FBX_Deformer=A),F.normal.length>0){var ne=new Q2().getNormalMatrix(S),ce=new mr(F.normal,3);ce.applyNormalMatrix(ne),$.setAttribute("normal",ce)}if(F.uvs.forEach(function(Me,_){var j="uv"+(_+1).toString();_===0&&(j="uv"),$.setAttribute(j,new mr(F.uvs[_],2))}),T.material&&T.material.mappingType!=="AllSame"){var Z=F.materialIndex[0],he=0;if(F.materialIndex.forEach(function(Me,_){Me!==Z&&($.addGroup(he,_-he,Z),Z=Me,he=_)}),$.groups.length>0){var pe=$.groups[$.groups.length-1],ge=pe.start+pe.count;ge!==F.materialIndex.length&&$.addGroup(ge,F.materialIndex.length-ge,Z)}$.groups.length===0&&$.addGroup(0,F.materialIndex.length,F.materialIndex[0])}return this.addMorphTargets($,m,x,S),$},parseGeoNode:function(m,A){var x={};if(x.vertexPositions=m.Vertices!==void 0?m.Vertices.a:[],x.vertexIndices=m.PolygonVertexIndex!==void 0?m.PolygonVertexIndex.a:[],m.LayerElementColor&&(x.color=this.parseVertexColors(m.LayerElementColor[0])),m.LayerElementMaterial&&(x.material=this.parseMaterialIndices(m.LayerElementMaterial[0])),m.LayerElementNormal&&(x.normal=this.parseNormals(m.LayerElementNormal[0])),m.LayerElementUV){x.uv=[];for(var S=0;m.LayerElementUV[S];)x.uv.push(this.parseUVs(m.LayerElementUV[S])),S++}return x.weightTable={},A!==null&&(x.skeleton=A,A.rawBones.forEach(function($,T){$.indices.forEach(function(F,R){x.weightTable[F]===void 0&&(x.weightTable[F]=[]),x.weightTable[F].push({id:T,weight:$.weights[R]})})})),x},genBuffers:function(m){var A={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},x=0,S=0,$=!1,T=[],F=[],R=[],ne=[],ce=[],Z=[],he=this;return m.vertexIndices.forEach(function(pe,ge){var Me=!1;pe<0&&(pe=pe^-1,Me=!0);var _=[],j=[];if(T.push(pe*3,pe*3+1,pe*3+2),m.color){var N=b(ge,x,pe,m.color);R.push(N[0],N[1],N[2])}if(m.skeleton){if(m.weightTable[pe]!==void 0&&m.weightTable[pe].forEach(function(K){j.push(K.weight),_.push(K.id)}),j.length>4){$||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),$=!0);var B=[0,0,0,0],X=[0,0,0,0];j.forEach(function(K,J){var re=K,te=_[J];X.forEach(function(se,ve,Ce){if(re>se){Ce[ve]=re,re=se;var ke=B[ve];B[ve]=te,te=ke}})}),_=B,j=X}for(;j.length<4;)j.push(0),_.push(0);for(var L=0;L<4;++L)ce.push(j[L]),Z.push(_[L])}if(m.normal){var N=b(ge,x,pe,m.normal);F.push(N[0],N[1],N[2])}if(m.material&&m.material.mappingType!=="AllSame")var G=b(ge,x,pe,m.material)[0];m.uv&&m.uv.forEach(function(K,J){var re=b(ge,x,pe,K);ne[J]===void 0&&(ne[J]=[]),ne[J].push(re[0]),ne[J].push(re[1])}),S++,Me&&(he.genFace(A,m,T,G,F,R,ne,ce,Z,S),x++,S=0,T=[],F=[],R=[],ne=[],ce=[],Z=[])}),A},genFace:function(m,A,x,S,$,T,F,R,ne,ce){for(var Z=2;Z<ce;Z++)m.vertex.push(A.vertexPositions[x[0]]),m.vertex.push(A.vertexPositions[x[1]]),m.vertex.push(A.vertexPositions[x[2]]),m.vertex.push(A.vertexPositions[x[(Z-1)*3]]),m.vertex.push(A.vertexPositions[x[(Z-1)*3+1]]),m.vertex.push(A.vertexPositions[x[(Z-1)*3+2]]),m.vertex.push(A.vertexPositions[x[Z*3]]),m.vertex.push(A.vertexPositions[x[Z*3+1]]),m.vertex.push(A.vertexPositions[x[Z*3+2]]),A.skeleton&&(m.vertexWeights.push(R[0]),m.vertexWeights.push(R[1]),m.vertexWeights.push(R[2]),m.vertexWeights.push(R[3]),m.vertexWeights.push(R[(Z-1)*4]),m.vertexWeights.push(R[(Z-1)*4+1]),m.vertexWeights.push(R[(Z-1)*4+2]),m.vertexWeights.push(R[(Z-1)*4+3]),m.vertexWeights.push(R[Z*4]),m.vertexWeights.push(R[Z*4+1]),m.vertexWeights.push(R[Z*4+2]),m.vertexWeights.push(R[Z*4+3]),m.weightsIndices.push(ne[0]),m.weightsIndices.push(ne[1]),m.weightsIndices.push(ne[2]),m.weightsIndices.push(ne[3]),m.weightsIndices.push(ne[(Z-1)*4]),m.weightsIndices.push(ne[(Z-1)*4+1]),m.weightsIndices.push(ne[(Z-1)*4+2]),m.weightsIndices.push(ne[(Z-1)*4+3]),m.weightsIndices.push(ne[Z*4]),m.weightsIndices.push(ne[Z*4+1]),m.weightsIndices.push(ne[Z*4+2]),m.weightsIndices.push(ne[Z*4+3])),A.color&&(m.colors.push(T[0]),m.colors.push(T[1]),m.colors.push(T[2]),m.colors.push(T[(Z-1)*3]),m.colors.push(T[(Z-1)*3+1]),m.colors.push(T[(Z-1)*3+2]),m.colors.push(T[Z*3]),m.colors.push(T[Z*3+1]),m.colors.push(T[Z*3+2])),A.material&&A.material.mappingType!=="AllSame"&&(m.materialIndex.push(S),m.materialIndex.push(S),m.materialIndex.push(S)),A.normal&&(m.normal.push($[0]),m.normal.push($[1]),m.normal.push($[2]),m.normal.push($[(Z-1)*3]),m.normal.push($[(Z-1)*3+1]),m.normal.push($[(Z-1)*3+2]),m.normal.push($[Z*3]),m.normal.push($[Z*3+1]),m.normal.push($[Z*3+2])),A.uv&&A.uv.forEach(function(he,pe){m.uvs[pe]===void 0&&(m.uvs[pe]=[]),m.uvs[pe].push(F[pe][0]),m.uvs[pe].push(F[pe][1]),m.uvs[pe].push(F[pe][(Z-1)*2]),m.uvs[pe].push(F[pe][(Z-1)*2+1]),m.uvs[pe].push(F[pe][Z*2]),m.uvs[pe].push(F[pe][Z*2+1])})},addMorphTargets:function(m,A,x,S){if(x.length!==0){m.morphTargetsRelative=!0,m.morphAttributes.position=[];var $=this;x.forEach(function(T){T.rawTargets.forEach(function(F){var R=n.Objects.Geometry[F.geoID];R!==void 0&&$.genMorphGeometry(m,A,R,S,F.name)})})}},genMorphGeometry:function(m,A,x,S,$){for(var T=A.PolygonVertexIndex!==void 0?A.PolygonVertexIndex.a:[],F=x.Vertices!==void 0?x.Vertices.a:[],R=x.Indexes!==void 0?x.Indexes.a:[],ne=m.attributes.position.count*3,ce=new Float32Array(ne),Z=0;Z<R.length;Z++){var he=R[Z]*3;ce[he]=F[Z*3],ce[he+1]=F[Z*3+1],ce[he+2]=F[Z*3+2]}var pe={vertexIndices:T,vertexPositions:ce},ge=this.genBuffers(pe),Me=new mr(ge.vertex,3);Me.name=$||x.attrName,Me.applyMatrix4(S),m.morphAttributes.position.push(Me)},parseNormals:function(m){var A=m.MappingInformationType,x=m.ReferenceInformationType,S=m.Normals.a,$=[];return x==="IndexToDirect"&&("NormalIndex"in m?$=m.NormalIndex.a:"NormalsIndex"in m&&($=m.NormalsIndex.a)),{dataSize:3,buffer:S,indices:$,mappingType:A,referenceType:x}},parseUVs:function(m){var A=m.MappingInformationType,x=m.ReferenceInformationType,S=m.UV.a,$=[];return x==="IndexToDirect"&&($=m.UVIndex.a),{dataSize:2,buffer:S,indices:$,mappingType:A,referenceType:x}},parseVertexColors:function(m){var A=m.MappingInformationType,x=m.ReferenceInformationType,S=m.Colors.a,$=[];return x==="IndexToDirect"&&($=m.ColorIndex.a),{dataSize:4,buffer:S,indices:$,mappingType:A,referenceType:x}},parseMaterialIndices:function(m){var A=m.MappingInformationType,x=m.ReferenceInformationType;if(A==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:x};for(var S=m.Materials.a,$=[],T=0;T<S.length;++T)$.push(T);return{dataSize:1,buffer:S,indices:$,mappingType:A,referenceType:x}},parseNurbsGeometry:function(m){if(Ro===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Tt;var A=parseInt(m.Order);if(isNaN(A))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",m.Order,m.id),new Tt;for(var x=A-1,S=m.KnotVector.a,$=[],T=m.Points.a,F=0,R=T.length;F<R;F+=4)$.push(new hi().fromArray(T,F));var ne,ce;if(m.Form==="Closed")$.push($[0]);else if(m.Form==="Periodic"){ne=x,ce=S.length-1-ne;for(var F=0;F<x;++F)$.push($[F])}var Z=new Ro(x,S,$,ne,ce),he=Z.getPoints($.length*7),pe=new Float32Array(he.length*3);he.forEach(function(Me,_){Me.toArray(pe,_*3)});var ge=new Tt;return ge.setAttribute("position",new Ct(pe,3)),ge}};function s(){}s.prototype={constructor:s,parse:function(){var m=[],A=this.parseClips();if(A!==void 0)for(var x in A){var S=A[x],$=this.addClip(S);m.push($)}return m},parseClips:function(){if(n.Objects.AnimationCurve!==void 0){var m=this.parseAnimationCurveNodes();this.parseAnimationCurves(m);var A=this.parseAnimationLayers(m),x=this.parseAnimStacks(A);return x}},parseAnimationCurveNodes:function(){var m=n.Objects.AnimationCurveNode,A=new Map;for(var x in m){var S=m[x];if(S.attrName.match(/S|R|T|DeformPercent/)!==null){var $={id:S.id,attr:S.attrName,curves:{}};A.set($.id,$)}}return A},parseAnimationCurves:function(m){var A=n.Objects.AnimationCurve;for(var x in A){var S={id:A[x].id,times:A[x].KeyTime.a.map(p),values:A[x].KeyValueFloat.a},$=e.get(S.id);if($!==void 0){var T=$.parents[0].ID,F=$.parents[0].relationship;F.match(/X/)?m.get(T).curves.x=S:F.match(/Y/)?m.get(T).curves.y=S:F.match(/Z/)?m.get(T).curves.z=S:F.match(/d|DeformPercent/)&&m.has(T)&&(m.get(T).curves.morph=S)}}},parseAnimationLayers:function(m){var A=n.Objects.AnimationLayer,x=new Map;for(var S in A){var $=[],T=e.get(parseInt(S));if(T!==void 0){var F=T.children;F.forEach(function(R,ne){if(m.has(R.ID)){var ce=m.get(R.ID);if(ce.curves.x!==void 0||ce.curves.y!==void 0||ce.curves.z!==void 0){if($[ne]===void 0){var Z=e.get(R.ID).parents.filter(function(j){return j.relationship!==void 0})[0].ID;if(Z!==void 0){var he=n.Objects.Model[Z.toString()];if(he===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",R);return}var pe={modelName:he.attrName?Da.sanitizeNodeName(he.attrName):"",ID:he.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};t.traverse(function(j){j.ID===he.id&&(pe.transform=j.matrix,j.userData.transformData&&(pe.eulerOrder=j.userData.transformData.eulerOrder))}),pe.transform||(pe.transform=new Ue),"PreRotation"in he&&(pe.preRotation=he.PreRotation.value),"PostRotation"in he&&(pe.postRotation=he.PostRotation.value),$[ne]=pe}}$[ne]&&($[ne][ce.attr]=ce)}else if(ce.curves.morph!==void 0){if($[ne]===void 0){var ge=e.get(R.ID).parents.filter(function(X){return X.relationship!==void 0})[0].ID,Me=e.get(ge).parents[0].ID,_=e.get(Me).parents[0].ID,Z=e.get(_).parents[0].ID,he=n.Objects.Model[Z],pe={modelName:he.attrName?Da.sanitizeNodeName(he.attrName):"",morphName:n.Objects.Deformer[ge].attrName};$[ne]=pe}$[ne][ce.attr]=ce}}}),x.set(parseInt(S),$)}}return x},parseAnimStacks:function(m){var A=n.Objects.AnimationStack,x={};for(var S in A){var $=e.get(parseInt(S)).children;$.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var T=m.get($[0].ID);x[S]={name:A[S].attrName,layer:T}}return x},addClip:function(m){var A=[],x=this;return m.layer.forEach(function(S){A=A.concat(x.generateTracks(S))}),new Wy(m.name,-1,A)},generateTracks:function(m){var A=[],x=new H,S=new on,$=new H;if(m.transform&&m.transform.decompose(x,S,$),x=x.toArray(),S=new So().setFromQuaternion(S,m.eulerOrder).toArray(),$=$.toArray(),m.T!==void 0&&Object.keys(m.T.curves).length>0){var T=this.generateVectorTrack(m.modelName,m.T.curves,x,"position");T!==void 0&&A.push(T)}if(m.R!==void 0&&Object.keys(m.R.curves).length>0){var F=this.generateRotationTrack(m.modelName,m.R.curves,S,m.preRotation,m.postRotation,m.eulerOrder);F!==void 0&&A.push(F)}if(m.S!==void 0&&Object.keys(m.S.curves).length>0){var R=this.generateVectorTrack(m.modelName,m.S.curves,$,"scale");R!==void 0&&A.push(R)}if(m.DeformPercent!==void 0){var ne=this.generateMorphTrack(m);ne!==void 0&&A.push(ne)}return A},generateVectorTrack:function(m,A,x,S){var $=this.getTimesForAllAxes(A),T=this.getKeyframeTrackValues($,A,x);return new Ny(m+"."+S,$,T)},generateRotationTrack:function(m,A,x,S,$,T){A.x!==void 0&&(this.interpolateRotations(A.x),A.x.values=A.x.values.map(Pn.degToRad)),A.y!==void 0&&(this.interpolateRotations(A.y),A.y.values=A.y.values.map(Pn.degToRad)),A.z!==void 0&&(this.interpolateRotations(A.z),A.z.values=A.z.values.map(Pn.degToRad));var F=this.getTimesForAllAxes(A),R=this.getKeyframeTrackValues(F,A,x);S!==void 0&&(S=S.map(Pn.degToRad),S.push(T),S=new So().fromArray(S),S=new on().setFromEuler(S)),$!==void 0&&($=$.map(Pn.degToRad),$.push(T),$=new So().fromArray($),$=new on().setFromEuler($).inverse());for(var ne=new on,ce=new So,Z=[],he=0;he<R.length;he+=3)ce.set(R[he],R[he+1],R[he+2],T),ne.setFromEuler(ce),S!==void 0&&ne.premultiply(S),$!==void 0&&ne.multiply($),ne.toArray(Z,he/3*4);return new Uy(m+".quaternion",F,Z)},generateMorphTrack:function(m){var A=m.DeformPercent.curves.morph,x=A.values.map(function($){return $/100}),S=t.getObjectByName(m.modelName).morphTargetDictionary[m.morphName];return new Hy(m.modelName+".morphTargetInfluences["+S+"]",A.times,x)},getTimesForAllAxes:function(m){var A=[];return m.x!==void 0&&(A=A.concat(m.x.times)),m.y!==void 0&&(A=A.concat(m.y.times)),m.z!==void 0&&(A=A.concat(m.z.times)),A=A.sort(function(x,S){return x-S}).filter(function(x,S,$){return $.indexOf(x)==S}),A},getKeyframeTrackValues:function(m,A,x){var S=x,$=[],T=-1,F=-1,R=-1;return m.forEach(function(ne){if(A.x&&(T=A.x.times.indexOf(ne)),A.y&&(F=A.y.times.indexOf(ne)),A.z&&(R=A.z.times.indexOf(ne)),T!==-1){var ce=A.x.values[T];$.push(ce),S[0]=ce}else $.push(S[0]);if(F!==-1){var Z=A.y.values[F];$.push(Z),S[1]=Z}else $.push(S[1]);if(R!==-1){var he=A.z.values[R];$.push(he),S[2]=he}else $.push(S[2])}),$},interpolateRotations:function(m){for(var A=1;A<m.values.length;A++){var x=m.values[A-1],S=m.values[A]-x,$=Math.abs(S);if($>=180){for(var T=$/180,F=S/T,R=x+F,ne=m.times[A-1],ce=m.times[A]-ne,Z=ce/T,he=ne+Z,pe=[],ge=[];he<m.times[A];)pe.push(he),he+=Z,ge.push(R),R+=F;m.times=D(m.times,A,pe),m.values=D(m.values,A,ge)}}}};function a(){}a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(m){this.nodeStack.push(m),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(m,A){this.currentProp=m,this.currentPropName=A},parse:function(m){this.currentIndent=0,this.allNodes=new c,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var A=this,x=m.split(/[\r\n]+/);return x.forEach(function(S,$){var T=S.match(/^[\s\t]*;/),F=S.match(/^[\s\t]*$/);if(!(T||F)){var R=S.match("^\\t{"+A.currentIndent+"}(\\w+):(.*){",""),ne=S.match("^\\t{"+A.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),ce=S.match("^\\t{"+(A.currentIndent-1)+"}}");R?A.parseNodeBegin(S,R):ne?A.parseNodeProperty(S,ne,x[++$]):ce?A.popStack():S.match(/^[^\s\t}]/)&&A.parseNodePropertyContinued(S)}}),this.allNodes},parseNodeBegin:function(m,A){var x=A[1].trim().replace(/^"/,"").replace(/"$/,""),S=A[2].split(",").map(function(R){return R.trim().replace(/^"/,"").replace(/"$/,"")}),$={name:x},T=this.parseNodeAttr(S),F=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(x,$):x in F?(x==="PoseNode"?F.PoseNode.push($):F[x].id!==void 0&&(F[x]={},F[x][F[x].id]=F[x]),T.id!==""&&(F[x][T.id]=$)):typeof T.id=="number"?(F[x]={},F[x][T.id]=$):x!=="Properties70"&&(x==="PoseNode"?F[x]=[$]:F[x]=$),typeof T.id=="number"&&($.id=T.id),T.name!==""&&($.attrName=T.name),T.type!==""&&($.attrType=T.type),this.pushStack($)},parseNodeAttr:function(m){var A=m[0];m[0]!==""&&(A=parseInt(m[0]),isNaN(A)&&(A=m[0]));var x="",S="";return m.length>1&&(x=m[1].replace(/^(\w+)::/,""),S=m[2]),{id:A,name:x,type:S}},parseNodeProperty:function(m,A,x){var S=A[1].replace(/^"/,"").replace(/"$/,"").trim(),$=A[2].replace(/^"/,"").replace(/"$/,"").trim();S==="Content"&&$===","&&($=x.replace(/"/g,"").replace(/,$/,"").trim());var T=this.getCurrentNode(),F=T.name;if(F==="Properties70"){this.parseNodeSpecialProperty(m,S,$);return}if(S==="C"){var R=$.split(",").slice(1),ne=parseInt(R[0]),ce=parseInt(R[1]),Z=$.split(",").slice(3);Z=Z.map(function(he){return he.trim().replace(/^"/,"")}),S="connections",$=[ne,ce],z($,Z),T[S]===void 0&&(T[S]=[])}S==="Node"&&(T.id=$),S in T&&Array.isArray(T[S])?T[S].push($):S!=="a"?T[S]=$:T.a=$,this.setCurrentProp(T,S),S==="a"&&$.slice(-1)!==","&&(T.a=V($))},parseNodePropertyContinued:function(m){var A=this.getCurrentNode();A.a+=m,m.slice(-1)!==","&&(A.a=V(A.a))},parseNodeSpecialProperty:function(m,A,x){var S=x.split('",').map(function(ce){return ce.trim().replace(/^\"/,"").replace(/\s/,"_")}),$=S[0],T=S[1],F=S[2],R=S[3],ne=S[4];switch(T){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":ne=parseFloat(ne);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":ne=V(ne);break}this.getPrevNode()[$]={type:T,type2:F,flag:R,value:ne},this.setCurrentProp(this.getPrevNode(),$)}};function l(){}l.prototype={constructor:l,parse:function(m){var A=new u(m);A.skip(23);var x=A.getUint32();console.info("THREE.FBXLoader: FBX binary version: "+x);for(var S=new c;!this.endOfContent(A);){var $=this.parseNode(A,x);$!==null&&S.add($.name,$)}return S},endOfContent:function(m){return m.size()%16===0?(m.getOffset()+160+16&-16)>=m.size():m.getOffset()+160+16>=m.size()},parseNode:function(m,A){var x={},S=A>=7500?m.getUint64():m.getUint32(),$=A>=7500?m.getUint64():m.getUint32();A>=7500?m.getUint64():m.getUint32();var T=m.getUint8(),F=m.getString(T);if(S===0)return null;for(var R=[],ne=0;ne<$;ne++)R.push(this.parseProperty(m));var ce=R.length>0?R[0]:"",Z=R.length>1?R[1]:"",he=R.length>2?R[2]:"";for(x.singleProperty=$===1&&m.getOffset()===S;S>m.getOffset();){var pe=this.parseNode(m,A);pe!==null&&this.parseSubNode(F,x,pe)}return x.propertyList=R,typeof ce=="number"&&(x.id=ce),Z!==""&&(x.attrName=Z),he!==""&&(x.attrType=he),F!==""&&(x.name=F),x},parseSubNode:function(m,A,x){if(x.singleProperty===!0){var S=x.propertyList[0];Array.isArray(S)?(A[x.name]=x,x.a=S):A[x.name]=S}else if(m==="Connections"&&x.name==="C"){var $=[];x.propertyList.forEach(function(he,pe){pe!==0&&$.push(he)}),A.connections===void 0&&(A.connections=[]),A.connections.push($)}else if(x.name==="Properties70"){var T=Object.keys(x);T.forEach(function(he){A[he]=x[he]})}else if(m==="Properties70"&&x.name==="P"){var F=x.propertyList[0],R=x.propertyList[1],ne=x.propertyList[2],ce=x.propertyList[3],Z;F.indexOf("Lcl ")===0&&(F=F.replace("Lcl ","Lcl_")),R.indexOf("Lcl ")===0&&(R=R.replace("Lcl ","Lcl_")),R==="Color"||R==="ColorRGB"||R==="Vector"||R==="Vector3D"||R.indexOf("Lcl_")===0?Z=[x.propertyList[4],x.propertyList[5],x.propertyList[6]]:Z=x.propertyList[4],A[F]={type:R,type2:ne,flag:ce,value:Z}}else A[x.name]===void 0?typeof x.id=="number"?(A[x.name]={},A[x.name][x.id]=x):A[x.name]=x:x.name==="PoseNode"?(Array.isArray(A[x.name])||(A[x.name]=[A[x.name]]),A[x.name].push(x)):A[x.name][x.id]===void 0&&(A[x.name][x.id]=x)},parseProperty:function(m){var A=m.getString(1);switch(A){case"C":return m.getBoolean();case"D":return m.getFloat64();case"F":return m.getFloat32();case"I":return m.getInt32();case"L":return m.getInt64();case"R":var x=m.getUint32();return m.getArrayBuffer(x);case"S":var x=m.getUint32();return m.getString(x);case"Y":return m.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var S=m.getUint32(),$=m.getUint32(),T=m.getUint32();if($===0)switch(A){case"b":case"c":return m.getBooleanArray(S);case"d":return m.getFloat64Array(S);case"f":return m.getFloat32Array(S);case"i":return m.getInt32Array(S);case"l":return m.getInt64Array(S)}typeof Jm>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var F=new Jm.Inflate(new Uint8Array(m.getArrayBuffer(T))),R=new u(F.decompress().buffer);switch(A){case"b":case"c":return R.getBooleanArray(S);case"d":return R.getFloat64Array(S);case"f":return R.getFloat32Array(S);case"i":return R.getInt32Array(S);case"l":return R.getInt64Array(S)}default:throw new Error("THREE.FBXLoader: Unknown property type "+A)}}};function u(m,A){this.dv=new DataView(m),this.offset=0,this.littleEndian=A!==void 0?A:!0}u.prototype={constructor:u,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(m){this.offset+=m},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(m){for(var A=[],x=0;x<m;x++)A.push(this.getBoolean());return A},getUint8:function(){var m=this.dv.getUint8(this.offset);return this.offset+=1,m},getInt16:function(){var m=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,m},getInt32:function(){var m=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,m},getInt32Array:function(m){for(var A=[],x=0;x<m;x++)A.push(this.getInt32());return A},getUint32:function(){var m=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,m},getInt64:function(){var m,A;return this.littleEndian?(m=this.getUint32(),A=this.getUint32()):(A=this.getUint32(),m=this.getUint32()),A&2147483648?(A=~A&4294967295,m=~m&4294967295,m===4294967295&&(A=A+1&4294967295),m=m+1&4294967295,-(A*4294967296+m)):A*4294967296+m},getInt64Array:function(m){for(var A=[],x=0;x<m;x++)A.push(this.getInt64());return A},getUint64:function(){var m,A;return this.littleEndian?(m=this.getUint32(),A=this.getUint32()):(A=this.getUint32(),m=this.getUint32()),A*4294967296+m},getFloat32:function(){var m=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,m},getFloat32Array:function(m){for(var A=[],x=0;x<m;x++)A.push(this.getFloat32());return A},getFloat64:function(){var m=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,m},getFloat64Array:function(m){for(var A=[],x=0;x<m;x++)A.push(this.getFloat64());return A},getArrayBuffer:function(m){var A=this.dv.buffer.slice(this.offset,this.offset+m);return this.offset+=m,A},getString:function(m){for(var A=[],x=0;x<m;x++)A[x]=this.getUint8();var S=A.indexOf(0);return S>=0&&(A=A.slice(0,S)),Hi.decodeText(new Uint8Array(A))}};function c(){}c.prototype={constructor:c,add:function(m,A){this[m]=A}};function d(m){var A="Kaydara FBX Binary  \0";return m.byteLength>=A.length&&A===M(m,0,A.length)}function h(m){var A=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],x=0;function S(F){var R=m[F-1];return m=m.slice(x+F),x++,R}for(var $=0;$<A.length;++$){var T=S(1);if(T===A[$])return!1}return!0}function f(m){var A=/FBXVersion: (\d+)/,x=m.match(A);if(x){var S=parseInt(x[1]);return S}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(m){return m/46186158e3}var v=[];function b(m,A,x,S){var $;switch(S.mappingType){case"ByPolygonVertex":$=m;break;case"ByPolygon":$=A;break;case"ByVertice":$=x;break;case"AllSame":$=S.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+S.mappingType)}S.referenceType==="IndexToDirect"&&($=S.indices[$]);var T=$*S.dataSize,F=T+S.dataSize;return U(v,S.buffer,T,F)}var g=new So,y=new H;function E(m){var A=new Ue,x=new Ue,S=new Ue,$=new Ue,T=new Ue,F=new Ue,R=new Ue,ne=new Ue,ce=new Ue,Z=new Ue,he=new Ue,pe=m.inheritType?m.inheritType:0;if(m.translation&&A.setPosition(y.fromArray(m.translation)),m.preRotation){var ge=m.preRotation.map(Pn.degToRad);ge.push(m.eulerOrder),x.makeRotationFromEuler(g.fromArray(ge))}if(m.rotation){var ge=m.rotation.map(Pn.degToRad);ge.push(m.eulerOrder),S.makeRotationFromEuler(g.fromArray(ge))}if(m.postRotation){var ge=m.postRotation.map(Pn.degToRad);ge.push(m.eulerOrder),$.makeRotationFromEuler(g.fromArray(ge))}m.scale&&T.scale(y.fromArray(m.scale)),m.scalingOffset&&R.setPosition(y.fromArray(m.scalingOffset)),m.scalingPivot&&F.setPosition(y.fromArray(m.scalingPivot)),m.rotationOffset&&ne.setPosition(y.fromArray(m.rotationOffset)),m.rotationPivot&&ce.setPosition(y.fromArray(m.rotationPivot)),m.parentMatrixWorld&&(Z=m.parentMatrixWorld);var Me=x.multiply(S).multiply($),_=new Ue;Z.extractRotation(_);var j=new Ue;j.copyPosition(Z);var N=new Ue;N.getInverse(_).multiply(Z);var B=new Ue;if(pe===0)B.copy(_).multiply(Me).multiply(N).multiply(T);else if(pe===1)B.copy(_).multiply(N).multiply(Me).multiply(T);else{var X=new Ue().getInverse(T),L=new Ue().multiply(N).multiply(X);B.copy(_).multiply(Me).multiply(L).multiply(T)}var G=new Ue().getInverse(ce),K=new Ue().getInverse(F),J=new Ue;J.copy(A).multiply(ne).multiply(ce).multiply(x).multiply(S).multiply($).multiply(G).multiply(R).multiply(F).multiply(T).multiply(K);var re=new Ue().copyPosition(J),te=new Ue().copy(Z).multiply(re);return he.copyPosition(te),J=new Ue().multiply(he).multiply(B),J}function C(m){m=m||0;var A=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return m===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),A[0]):A[m]}function V(m){var A=m.split(",").map(function(x){return parseFloat(x)});return A}function M(m,A,x){return A===void 0&&(A=0),x===void 0&&(x=m.byteLength),Hi.decodeText(new Uint8Array(m,A,x))}function z(m,A){for(var x=0,S=m.length,$=A.length;x<$;x++,S++)m[S]=A[x]}function U(m,A,x,S){for(var $=x,T=0;$<S;$++,T++)m[T]=A[$];return m}function D(m,A,x){return m.slice(0,A).concat(x).concat(m.slice(A))}return r})();const gc=window.requestAnimationFrame||(n=>setTimeout(n,16)),YE=window.cancelAnimationFrame||clearTimeout;function cw(n,e=0){e<=0?gc(n):gc(()=>cw(n,e-1))}function KE(n,e=60){let t=-1,r=0,i=-1;const o=1e3/e;function s(a){i===-1&&(i=a),t=gc(s),!(a-r<o)&&(r=a,n==null||n(a-i))}return t=gc(s),function(){YE(t)}}var dw=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const JE=new wi;function ZE(n){return dw(this,null,function*(){return new Promise((e,t)=>{JE.load(n,e,void 0,t)}).then(e=>(e.encoding=fi,e.minFilter=gh,e.magFilter=gh,e))})}function hw(n){return dw(this,null,function*(){return ZE(n).then(e=>{const t=n.startsWith("data:")?n.includes("png"):new URL(n,location.href).pathname.toLowerCase().endsWith(".png");return{texture:e,transparent:t}})})}var eC=Object.defineProperty,tC=(n,e,t)=>e in n?eC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fs=(n,e,t)=>(tC(n,typeof e!="symbol"?e+"":e,t),t);let nC=class extends ux{constructor(){super(...arguments),fs(this,"disposeMethods",[]),fs(this,"animationFrameDisposer"),fs(this,"onDispose",e=>(this.disposeMethods.push(e),this)),fs(this,"play",()=>{var e;return this.start(0),(e=this.animationFrameDisposer)==null||e.call(this),this.animationFrameDisposer=KE(t=>this.update(t)),this}),fs(this,"stop",()=>{var e;return super.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this}),fs(this,"dispose",()=>{var e;this.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this.disposeMethods.forEach(t=>t()),this.disposeMethods=[],cx(this)})}};function rC(n,e=_s.Linear.None){const t=new nC({progress:0}).to({progress:1});return n!==void 0&&t.duration(n),e!==void 0&&t.easing(e),t}var iC=Object.defineProperty,oC=Object.defineProperties,sC=Object.getOwnPropertyDescriptors,Zm=Object.getOwnPropertySymbols,aC=Object.prototype.hasOwnProperty,lC=Object.prototype.propertyIsEnumerable,eg=(n,e,t)=>e in n?iC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uC=(n,e)=>{for(var t in e||(e={}))aC.call(e,t)&&eg(n,t,e[t]);if(Zm)for(var t of Zm(e))lC.call(e,t)&&eg(n,t,e[t]);return n},cC=(n,e)=>oC(n,sC(e));const dC=1,hC=new qe(16777215);new qe(6522623);const fC=new qe(16777215);new qe(6522623);const pC=6,vC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",mC=new wi().load(vC),gC={pointTexture:mC,pointSize:pC,lineWidth:dC,lineColor:hC,pointColor:fC,lineRenderOrder:20,pointsRenderOrder:20};cC(uC({},gC),{dashed:!0});var yc={},yC={get exports(){return yc},set exports(n){yc=n}};yC.exports=Kc;yc.default=Kc;function Kc(n,e,t){t=t||2;var r=e&&e.length,i=r?e[0]*t:n.length,o=fw(n,0,i,t,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,d,h,f;if(r&&(o=PC(n,e,o,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(var p=t;p<i;p+=t)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return ml(o,s,t,a,l,f,0),s}function fw(n,e,t,r,i){var o,s;if(i===qh(n,e,t,r)>0)for(o=e;o<t;o+=r)s=tg(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=tg(o,n[o],n[o+1],s);return s&&Jc(s,s.next)&&(yl(s),s=s.next),s}function zo(n,e){if(!n)return n;e||(e=n);var t=n,r;do if(r=!1,!t.steiner&&(Jc(t,t.next)||St(t.prev,t,t.next)===0)){if(yl(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function ml(n,e,t,r,i,o,s){if(n){!s&&o&&$C(n,r,i,o);for(var a=n,l,u;n.prev!==n.next;){if(l=n.prev,u=n.next,o?bC(n,r,i,o):AC(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),yl(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=wC(zo(n),e,t),ml(n,e,t,r,i,o,2)):s===2&&xC(n,e,t,r,i,o):ml(zo(n),e,t,r,i,o,1);break}}}}function AC(n){var e=n.prev,t=n,r=n.next;if(St(e,t,r)>=0)return!1;for(var i=e.x,o=t.x,s=r.x,a=e.y,l=t.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,d=a<l?a<u?a:u:l<u?l:u,h=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u,p=r.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&Cs(i,a,o,l,s,u,p.x,p.y)&&St(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function bC(n,e,t,r){var i=n.prev,o=n,s=n.next;if(St(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,d=o.y,h=s.y,f=a<l?a<u?a:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,v=a>l?a>u?a:u:l>u?l:u,b=c>d?c>h?c:h:d>h?d:h,g=Qh(f,p,e,t,r),y=Qh(v,b,e,t,r),E=n.prevZ,C=n.nextZ;E&&E.z>=g&&C&&C.z<=y;){if(E.x>=f&&E.x<=v&&E.y>=p&&E.y<=b&&E!==i&&E!==s&&Cs(a,c,l,d,u,h,E.x,E.y)&&St(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=f&&C.x<=v&&C.y>=p&&C.y<=b&&C!==i&&C!==s&&Cs(a,c,l,d,u,h,C.x,C.y)&&St(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=g;){if(E.x>=f&&E.x<=v&&E.y>=p&&E.y<=b&&E!==i&&E!==s&&Cs(a,c,l,d,u,h,E.x,E.y)&&St(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=y;){if(C.x>=f&&C.x<=v&&C.y>=p&&C.y<=b&&C!==i&&C!==s&&Cs(a,c,l,d,u,h,C.x,C.y)&&St(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function wC(n,e,t){var r=n;do{var i=r.prev,o=r.next.next;!Jc(i,o)&&pw(i,r,r.next,o)&&gl(i,o)&&gl(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),yl(r),yl(r.next),r=n=o),r=r.next}while(r!==n);return zo(r)}function xC(n,e,t,r,i,o){var s=n;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&TC(s,a)){var l=vw(s,a);s=zo(s,s.next),l=zo(l,l.next),ml(s,e,t,r,i,o,0),ml(l,e,t,r,i,o,0);return}a=a.next}s=s.next}while(s!==n)}function PC(n,e,t,r){var i=[],o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:n.length,u=fw(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(VC(u));for(i.sort(EC),o=0;o<i.length;o++)t=CC(i[o],t);return t}function EC(n,e){return n.x-e.x}function CC(n,e){var t=SC(n,e);if(!t)return e;var r=vw(t,n);return zo(r,r.next),zo(t,t.next)}function SC(n,e){var t=e,r=n.x,i=n.y,o=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>o&&(o=a,s=t.x<t.next.x?t:t.next,a===r))return s}t=t.next}while(t!==e);if(!s)return null;var l=s,u=s.x,c=s.y,d=1/0,h;t=s;do r>=t.x&&t.x>=u&&r!==t.x&&Cs(i<c?r:o,i,u,c,i<c?o:r,i,t.x,t.y)&&(h=Math.abs(i-t.y)/(r-t.x),gl(t,n)&&(h<d||h===d&&(t.x>s.x||t.x===s.x&&OC(s,t)))&&(s=t,d=h)),t=t.next;while(t!==l);return s}function OC(n,e){return St(n.prev,n,e.prev)<0&&St(e.next,n,n.next)<0}function $C(n,e,t,r){var i=n;do i.z===0&&(i.z=Qh(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,MC(i)}function MC(n){var e,t,r,i,o,s,a,l,u=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,u*=2}while(s>1);return n}function Qh(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function VC(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Cs(n,e,t,r,i,o,s,a){return(i-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(r-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(r-a)}function TC(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!_C(n,e)&&(gl(n,e)&&gl(e,n)&&kC(n,e)&&(St(n.prev,n,e.prev)||St(n,e.prev,e))||Jc(n,e)&&St(n.prev,n,n.next)>0&&St(e.prev,e,e.next)>0)}function St(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Jc(n,e){return n.x===e.x&&n.y===e.y}function pw(n,e,t,r){var i=ru(St(n,e,t)),o=ru(St(n,e,r)),s=ru(St(t,r,n)),a=ru(St(t,r,e));return!!(i!==o&&s!==a||i===0&&nu(n,t,e)||o===0&&nu(n,r,e)||s===0&&nu(t,n,r)||a===0&&nu(t,e,r))}function nu(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ru(n){return n>0?1:n<0?-1:0}function _C(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&pw(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function gl(n,e){return St(n.prev,n,n.next)<0?St(n,e,n.next)>=0&&St(n,n.prev,e)>=0:St(n,e,n.prev)<0||St(n,n.next,e)<0}function kC(n,e){var t=n,r=!1,i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function vw(n,e){var t=new Xh(n.i,n.x,n.y),r=new Xh(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function tg(n,e,t,r){var i=new Xh(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function yl(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Xh(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Kc.deviation=function(n,e,t,r){var i=e&&e.length,o=i?e[0]*t:n.length,s=Math.abs(qh(n,0,o,t));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:n.length;s-=Math.abs(qh(n,u,c,t))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*t,f=r[a+1]*t,p=r[a+2]*t;d+=Math.abs((n[h]-n[p])*(n[f+1]-n[h+1])-(n[h]-n[f])*(n[p+1]-n[h+1]))}return s===0&&d===0?0:Math.abs((d-s)/s)};function qh(n,e,t,r){for(var i=0,o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}Kc.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,i=0;i<n.length;i++){for(var o=0;o<n[i].length;o++)for(var s=0;s<e;s++)t.vertices.push(n[i][o][s]);i>0&&(r+=n[i-1].length,t.holes.push(r))}return t};function ho(n){if(n.length<3){console.error("points.length < 3");return}const[e,t,r]=n;return new H().subVectors(r,t).cross(new H().subVectors(e,t)).normalize()}function mw(n){if(n.length<3)return[];const e=ho(n),t=new on().setFromUnitVectors(e,new H(0,1,0)),r=n.map(i=>i.clone().applyQuaternion(t)).flatMap(i=>[i.x,i.z]);return yc(r)}function IC(n,e){const t=Array.isArray(e)?e:[e];for(let r=0;r<t.length;r++){const i=n.start,o=n.end,s=t[r].start,a=t[r].end;if(!(Ma(i,s)||Ma(i,a)||Ma(o,s)||Ma(o,a)||Ma(i,o))&&jC([i.x,i.y,i.z],[o.x,o.y,o.z],[s.x,s.y,s.z],[a.x,a.y,a.z]))return!0}return!1}function jC(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1],e[2]-n[2]],o=[r[0]-t[0],r[1]-t[1],r[2]-t[2]],s=[[i[0],-o[0]],[i[1],-o[1]],[i[2],-o[2]]],a=[t[0]-n[0],t[1]-n[1],t[2]-n[2]],l=DC(s,a);if(l===null)return!1;const[u,c]=l;return!!(ng(u)&&ng(c))}function DC(n,e){if(LC(n)===0)return null;const t=RC(n);return zC(t,e)}function LC(n){return n[0][0]*n[1][1]-n[0][1]*n[1][0]}function RC(n){const e=n[0][0]*n[1][1]-n[0][1]*n[1][0];return[[n[1][1]/e,-n[0][1]/e],[-n[1][0]/e,n[0][0]/e]]}function zC(n,e){return[n[0][0]*e[0]+n[0][1]*e[1],n[1][0]*e[0]+n[1][1]*e[1]]}function ng(n){return n>=0&&n<=1}function Ma(n,e){return n.x===e.x&&n.y===e.y&&n.z===e.z}function BC(n,e){const t=[...new Set(n)];if(t.length<3)return;if(t.at(-1).equals(t[0])||t.push(t[0]),e!=null&&e.checkLinesIntersect&&t.length>=5){const a=t.map((l,u)=>u===0?null:{start:t[u-1],end:t[u]}).filter(Boolean);for(let l=0;l<a.length;l++)if(IC(a[l],a.slice(l)))return}const r=t.flatMap(a=>[a.x,a.y,a.z]),i=new mr(r,3),o=mw(t),s=new Tt;return s.setAttribute("position",i),s.setIndex(o),s.name="PolygonGeometry",s}new Tt;function FC(n){const e=HC(n);if(e.length===0){console.warn("No geometry triangles found"),console.debug({geometry:n,triangles:e});return}let t=0,r=new H;for(const[i,o,s]of e){const a=Yp(i,o,s),l=gw(i,o,s,a);t+=a,r.add(l)}return r=r.divideScalar(t),{center:r,area:t}}function Yp(n,e,t){return e.clone().sub(n).cross(t.clone().sub(n)).length()/2}function gw(n,e,t,r){const i=r??Yp(n,e,t);return Yn(n,e,t).multiplyScalar(i)}function HC(n){var e;const t=n.getAttribute("position"),r=(e=n.getIndex())==null?void 0:e.array;if(!t||!r)return[];let i=[];for(let o=0;o<r.length;o+=3){const s=r[o],a=r[o+1],l=r[o+2],u=new H().fromArray([t.getX(s),t.getY(s),t.getZ(s)]),c=new H().fromArray([t.getX(a),t.getY(a),t.getZ(a)]),d=new H().fromArray([t.getX(l),t.getY(l),t.getZ(l)]);i.push([u,c,d])}return i}function UC(n,e){const{top:t,left:r,width:i,height:o}=e.getBoundingClientRect();return new Jt((n.x-r)/i*2-1,-(n.y-t)/o*2+1)}var xt={},NC={get exports(){return xt},set exports(n){xt=n}};function Ac(n){return n===null?"null":typeof n>"u"?"undefined":typeof n=="object"?Array.isArray(n)?"array":"object":typeof n}function yw(n){return Ac(n)==="object"?Kh(n):Ac(n)==="array"?Yh(n):n}function Yh(n){return n.map(yw)}function Kh(n){const e={};for(const t in n)n.hasOwnProperty(t)&&(e[t]=yw(n[t]));return e}function Zc(n,e=[],t={}){const r={arrayBehaviour:t.arrayBehaviour||"replace"},i=e.map(s=>s||{}),o=n||{};for(let s=0;s<i.length;s++){const a=i[s],l=Object.keys(a);for(let u=0;u<l.length;u++){const c=l[u],d=a[c],h=Ac(d),f=Ac(o[c]);if(h==="object")if(f!=="undefined"){const p=f==="object"?o[c]:{};o[c]=Zc({},[p,Kh(d)],r)}else o[c]=Kh(d);else if(h==="array")if(f==="array"){const p=Yh(d);o[c]=r.arrayBehaviour==="merge"?o[c].concat(p):p}else o[c]=Yh(d);else o[c]=d}}return o}NC.exports=function(n,...e){return Zc(n,e)};xt.noMutate=function(...n){return Zc({},n)};xt.withOptions=function(n,e,t){return Zc(n,e,t)};function Al(n){return typeof n=="object"?n===null?{}:n:{}}var WC=Object.defineProperty,GC=Object.defineProperties,QC=Object.getOwnPropertyDescriptors,rg=Object.getOwnPropertySymbols,XC=Object.prototype.hasOwnProperty,qC=Object.prototype.propertyIsEnumerable,Jh=(n,e,t)=>e in n?WC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ig=(n,e)=>{for(var t in e||(e={}))XC.call(e,t)&&Jh(n,t,e[t]);if(rg)for(var t of rg(e))qC.call(e,t)&&Jh(n,t,e[t]);return n},YC=(n,e)=>GC(n,QC(e)),Rn=(n,e,t)=>(Jh(n,typeof e!="symbol"?e+"":e,t),t);let Zh=class{constructor(e,t){Rn(this,"_five"),Rn(this,"dragging",!1),Rn(this,"boundObject",{}),Rn(this,"config"),Rn(this,"handleWantsGesture",(i,o)=>{if(o.length!==1)return;const s=o[0];if(s.raycaster){const a=new ec;a.ray=s.raycaster.ray,a.near=s.raycaster.near,a.far=s.raycaster.far,a.camera=s.raycaster.camera,a.layers=s.raycaster.layers,a.params=s.raycaster.params,s.raycaster=a}if(s){if(i==="mouseMove"&&this.onDomEvent("hover",s),i==="tap"){const a=new MouseEvent("click",{clientX:s.x,clientY:s.y}),l=this.onDomEvent("click",s,a),u=this.onDomEvent("wantDblclick",s,a,this.boundObject.dblclick);if(l===!1||u===!1)return!1}if(this.dragging)return!1}}),Rn(this,"handleDomEvent",(i,o,s)=>{const a={x:o.clientX,y:o.clientY};this.onDomEvent(i,a,o,s)}),Rn(this,"handleMouseEvent",i=>{this.handleDomEvent(i.type,i)}),Rn(this,"handleMousedown",i=>{this.handleDomEvent("mousedown",i),this.handleDomEvent("dragstart",i,this.haveDragEventObject)}),Rn(this,"handleMouseup",i=>{var o;this.dragging=!1,(o=this.haveDragEventObject)==null||o.forEach(s=>{s._dragging&&(s._dragging=!1,this.notify({eventName:"dragend",object:s,originEvent:i,raycaster:this.getRaycaster({x:i.clientX,y:i.clientY})}))}),this.handleDomEvent("mouseup",i)}),Rn(this,"handleMousemove",i=>{var o;this.dragging&&((o=this.boundObject.drag)==null||o.forEach(s=>{s._dragging&&this.notify({eventName:"drag",object:s,originEvent:i,raycaster:this.getRaycaster({x:i.clientX,y:i.clientY})})}))}),Rn(this,"onDomEvent",(i,o,s,a=this.boundObject[i])=>{var l,u,c,d,h;if(!o||!a||(a==null?void 0:a.length)===0)return;const f=[];((l=this.config)==null?void 0:l.fiveModels)!==null&&((u=this.config)!=null&&u.fiveModels?f.push(...this.config.fiveModels):f.push(this.model));const p=f.filter(C=>C.loaded),v=(c=o.raycaster)!=null?c:this.getRaycaster(o);v.params.Points.threshold=.04;const b=v.intersectObjects(a,!0),g=[];if(p.forEach(C=>{const V=C.intersectRaycaster(v);g.push(...V)}),g.length>0&&b.length>0&&g[0].distance+.01<b[0].distance)return;const E=(d=b==null?void 0:b[0])==null?void 0:d.object;if(i==="wantDblclick")return!1;if((!E||!this.objectIsBound(E))&&i==="hover")for(const C of(h=this.boundObject.hover)!=null?h:[])C._hovered&&this.notify({eventName:"unHover",object:C});if(E&&E&&this.notify({eventName:i,object:E,originEvent:s,raycaster:v,intersects:b,fiveModelIntersects:g}))return!1}),Rn(this,"objectIsBound",i=>{let o=i._domEvent,s=i.parent;for(;typeof o>"u"&&s;)o=s._domEvent,s=s.parent;return!!o}),Rn(this,"notify",i=>{var o,s,a,l,u,c,d;const{eventName:h,object:f,originEvent:p,raycaster:v,intersects:b,fiveModelIntersects:g}=i;if(!f)return!1;let y=!1,E=[];const C=[],V=()=>{if(!b)return!1;const D=b.slice(1);return D[0]?this.notify(YC(ig({},i),{object:D[0].object,intersects:D})):!1};let M=f;for(C.push(M);M.parent;)M=M.parent,C.push(M);const z=C[C.length-1];if((o=this.config)!=null&&o.noEmitWhenNotInScene&&z.type!=="Scene")return V();let U=!1;for(const D of C){if(y)break;D.draggable&&(h==="dragstart"&&(D._dragging=!0,this.dragging=!0),h==="dragend"&&(D._dragging=!1,this.dragging=!1));const m=D._domEvent;if(!m)continue;const A=m[`${h}Handler`];if(A)for(const[x,S]of A){if(S!=null&&S.noEmitWhenNotInScene&&z.type!=="Scene")continue;if(S.skipPano&&g){const T=(s=g[0])==null?void 0:s.point;if(T&&(u=(l=(a=this.five.observers)==null?void 0:a[this.five.panoIndex])==null?void 0:l.accessibleNodes)!=null&&u.some(F=>{var R;const ne=(R=this.five.works.getResolvedObserver({workCode:this.five.state.workCode,panoIndex:F}))==null?void 0:R.standingPosition;return(ne==null?void 0:ne.distanceTo(T))<.3}))continue}if(((c=this.config)!=null&&c.noEmitWhenHide||S!=null&&S.noEmitWhenHide)&&!wp(D))continue;if(U=!0,h==="hover"){if(D._hovered)continue;D._hovered=!0;for(const T of(d=this.boundObject.hover)!=null?d:[])T!==D&&T._hovered&&this.notify({eventName:"unHover",object:T})}if(h==="unHover"){if(!D._hovered)continue;D._hovered=!1}const $=x({type:h,target:D,origDomEvent:p,raycaster:v,intersects:b,stopPropagation:()=>{y=!0}});E.push($??!0)}}if(U===!1)return V();if(h==="click"||h==="wantDblclick")return E.some(D=>D===!0)});var r;this.five=e,this.config=t,e.off("wantsGesture",this.handleWantsGesture),e.on("wantsGesture",this.handleWantsGesture),document.addEventListener("mousedown",this.handleMousedown),document.addEventListener("dblclick",this.handleMouseEvent),document.addEventListener("mouseup",this.handleMouseup),document.addEventListener("mousemove",this.handleMousemove),window.__FIVE_DOM_EVENTS__=(r=window.__FIVE_DOM_EVENTS__)!=null?r:[],window.__FIVE_DOM_EVENTS__.push(this)}get five(){return this._five}set five(e){var t;(t=this._five)==null||t.off("wantsGesture",this.handleWantsGesture),this._five=e,this._five.on("wantsGesture",this.handleWantsGesture)}get haveDragEventObject(){return[...new Set([this.boundObject.dragend,this.boundObject.drag,this.boundObject.dragstart].flat())].filter(Boolean)}get model(){return aa(this.five)}addAutoBindEventListener(e,t,r,i){const o=()=>this.addEventListener(e,t,r,i),s=()=>this.removeEventListener(e,t,r,i);return e.addEventListener("added",o),e.addEventListener("removed",s),e.addEventListener("dispose",s),()=>{e.removeEventListener("added",o),e.removeEventListener("removed",s),e.removeEventListener("dispose",s)}}addEventListener(e,t,r,i){e._domEvent||(e._domEvent={}),e._domEvent[`${t}Handler`]||(e._domEvent[`${t}Handler`]=[]),this.boundObject[t]||(this.boundObject[t]=[]),this.boundObject[t].includes(e)||this.boundObject[t].push(e),e._domEvent[`${t}Handler`].push([r,ig({noEmitWhenHide:!1,noEmitWhenNotInScene:!1},i)])}removeEventListener(e,t,r,...i){var o,s;if(!e._domEvent||(t===void 0&&(Object.keys(this.boundObject).forEach(l=>{var u,c;const d=(u=this.boundObject[l])==null?void 0:u.findIndex(h=>h===e);d!==-1&&((c=this.boundObject[l])==null||c.splice(d,1))}),e._domEvent={}),!e._domEvent[`${t}Handler`]))return;if(r===void 0){delete e._domEvent[`${t}Handler`];return}const a=e._domEvent[`${t}Handler`].findIndex(l=>l[0]===r);if(a!==-1&&(e._domEvent[`${t}Handler`].splice(a,1),e._domEvent[`${t}Handler`].length===0&&delete e._domEvent[`${t}Handler`],e._domEvent&&Object.keys(e._domEvent).length===0&&delete e._domEvent,!e._domEvent)){const l=(o=this.boundObject[t])==null?void 0:o.findIndex(u=>u===e);l!==-1&&((s=this.boundObject[t])==null||s.splice(l,1))}}clear(){this.boundObject={}}dispose(){var e;(e=this.five)==null||e.off("wantsGesture",this.handleWantsGesture),document.removeEventListener("mousedown",this.handleMousedown),document.removeEventListener("mouseup",this.handleMouseup),document.removeEventListener("mousemove",this.handleMousemove),this.boundObject={}}toJSON(){return{boundObject:this.boundObject}}getRaycaster(e){const t=this.five.getElement();if(!t)return;const r=UC(e,t),i=new ec;return i.setFromCamera(r,this.five.camera),i}};var KC=Object.defineProperty,JC=Object.defineProperties,ZC=Object.getOwnPropertyDescriptors,bc=Object.getOwnPropertySymbols,Aw=Object.prototype.hasOwnProperty,bw=Object.prototype.propertyIsEnumerable,ef=(n,e,t)=>e in n?KC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,og=(n,e)=>{for(var t in e||(e={}))Aw.call(e,t)&&ef(n,t,e[t]);if(bc)for(var t of bc(e))bw.call(e,t)&&ef(n,t,e[t]);return n},sg=(n,e)=>JC(n,ZC(e)),e8=(n,e)=>{var t={};for(var r in n)Aw.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&bc)for(var r of bc(n))e.indexOf(r)<0&&bw.call(n,r)&&(t[r]=n[r]);return t},zn=(n,e,t)=>(ef(n,typeof e!="symbol"?e+"":e,t),t);const t8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==";let ag=null,bl=class extends Er{constructor(e){var t,r,i;super(),zn(this,"name","PointMesh"),zn(this,"dom"),zn(this,"opacityBeforeHighlight"),zn(this,"highlighted",!1),zn(this,"fontMesh"),zn(this,"backgroundMesh"),zn(this,"lastRenderDomItem"),zn(this,"paramsStyle"),zn(this,"_visible",!0),zn(this,"_onAdded",()=>{this.dom||this.updateDom()}),zn(this,"_onRemoved",()=>{var p;(p=this.dom)==null||p.destroy(),this.dom=void 0}),zn(this,"_onShowed",()=>{this.dom&&(this.dom.container.style.display="block")}),zn(this,"_onHidden",()=>{this.dom&&(this.dom.container.style.display="none")});const o=e??{},{point:s}=o,a=e8(o,["point"]);this.paramsStyle=a??{};const l=new Tt;l.setAttribute("position",new mr([0,0,0],3));const u={transparent:!0,side:fn,size:(t=e==null?void 0:e.size)!=null?t:8,map:ag||(ag=new wi().load(t8)),sizeAttenuation:!1},c=new Uu(sg(og({},u),{color:(r=e==null?void 0:e.color)!=null?r:16777215,depthTest:!0,opacity:(i=e==null?void 0:e.opacity)!=null?i:1})),d=new Uu(sg(og({},u),{size:c.size,color:c.color,depthWrite:!1,depthTest:!1,opacity:c.opacity*.5})),h=new Nu(l,c),f=new Nu(l,d);this.fontMesh=h,this.backgroundMesh=f,h.name="FontMesh",f.name="BackgroundMesh",h.renderOrder=10,f.renderOrder=0,this.add(h,f),e!=null&&e.point&&this.position.copy(Xe(e.point)),e&&this.setStyle(e),this.addEventListener("removed",()=>{Vn.cacheObject.delete(this),Vn.checkDom(this)}),this.addEventListener("added",()=>{Vn.cacheObject.add(this)}),Vn.checkDomEveryFrame()}get color(){return this.fontMesh.material.color}get size(){return this.fontMesh.material.size}get style(){return{color:this.color,size:this.size,opacity:this.fontMesh.material.opacity,occlusionVisibility:this.fontMesh.material.depthTest,occlusionMode:this.backgroundMesh.visible?"depthWrite":"depthTest"}}get five(){var e,t;return(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five}setStyle(e){Ge(e.color)&&(this.fontMesh.material.setValues({color:e.color}),this.backgroundMesh.material.setValues({color:e.color})),Ge(e.size)&&(this.fontMesh.material.setValues({side:e.size}),this.backgroundMesh.material.setValues({side:e.size})),Ge(e.occlusionVisibility)&&(e.occlusionVisibility?e.occlusionMode==="depthTest"?(this.fontMesh.material.depthTest=!1,this.backgroundMesh.visible=!1):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!0):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!1))}highlight(){this.highlighted||(this.highlighted=!0,this.opacityBeforeHighlight=this.fontMesh.material.opacity,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight*_p}))}unhighlight(){this.highlighted&&(this.highlighted=!1,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight}))}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=dl(this,this.position).toArray().join(",");t!==this.lastRenderDomItem&&(this.updateDom(),this.lastRenderDomItem=t)}updateDom(){const e=this.paramsStyle.tip;e&&!this.dom&&(this.dom=new Ip(this.five),this.dom.intersectCheck=!1,this.dom.simulate3D=!0,this.dom.container.style.display=this.visible?"block":"none");const t=r=>{this.dom&&this.dom.__text!==r&&(this.dom.__text=r,r instanceof HTMLElement?(this.dom.container.innerHTML="",this.dom.container.appendChild(r)):r?this.dom.container.innerHTML=kp(r,{style:""}):this.dom.container.innerHTML="")};e?(t(e),this.dom.setPosition(this.position.clone())):t(null)}};var n8=Object.defineProperty,r8=Object.defineProperties,i8=Object.getOwnPropertyDescriptors,lg=Object.getOwnPropertySymbols,o8=Object.prototype.hasOwnProperty,s8=Object.prototype.propertyIsEnumerable,tf=(n,e,t)=>e in n?n8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iu=(n,e)=>{for(var t in e||(e={}))o8.call(e,t)&&tf(n,t,e[t]);if(lg)for(var t of lg(e))s8.call(e,t)&&tf(n,t,e[t]);return n},ug=(n,e)=>r8(n,i8(e)),bo=(n,e,t)=>(tf(n,typeof e!="symbol"?e+"":e,t),t);let nf=class extends Hr{constructor(e){super(),bo(this,"name","LineWithDotsMesh"),bo(this,"pointGroup",new Er),bo(this,"_paramsStyle"),bo(this,"setStyle",t=>{super.setStyle(t),this._paramsStyle=iu(iu({},this._paramsStyle),t),this.pointMeshes.forEach(r=>{var i,o,s;return r.setStyle(ug(iu({},this._paramsStyle),{color:(s=(i=this._paramsStyle)==null?void 0:i.pointColor)!=null?s:(o=this._paramsStyle)==null?void 0:o.lineColor,tip:void 0}))}),this.updateEdgePointsVisibility(),this.needsRender=!0}),bo(this,"highlight",t=>{super.highlight(t),this.pointMeshes.forEach(r=>r.highlight())}),bo(this,"unhighlight",()=>{super.unhighlight(),this.pointMeshes.forEach(t=>t.unhighlight())}),bo(this,"updateEdgePointsVisibility",()=>{var t;Ge((t=this._paramsStyle)==null?void 0:t.pointVisibility)&&(this.startPoint&&(this.startPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.startPoint:this._paramsStyle.pointVisibility),this.endPoint&&(this.endPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.endPoint:this._paramsStyle.pointVisibility))}),this.add(this.pointGroup),e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points)}get startPoint(){return this.pointMeshes[0]}get endPoint(){return this.pointMeshes.length<2?null:this.pointMeshes[this.pointMeshes.length-1]}get visiblePointMeshes(){return this.pointMeshes.filter(e=>e.visible)}get pointMeshes(){return this.pointGroup.children}setPoints(e){super.setPoints(e);const t=e.map(Xe).filter(Ge);this.pointGroup.removeChildren(),this.addIfNotExists(this.pointGroup),t.forEach(r=>{var i,o,s;const a=new bl(ug(iu({},this.style),{color:(s=(i=this._paramsStyle)==null?void 0:i.pointColor)!=null?s:(o=this._paramsStyle)==null?void 0:o.lineColor,tip:void 0}));a.position.copy(r),this.pointGroup.add(a)}),this.updateEdgePointsVisibility(),this.needsRender=!0}};var a8=Object.defineProperty,cg=Object.getOwnPropertySymbols,l8=Object.prototype.hasOwnProperty,u8=Object.prototype.propertyIsEnumerable,rf=(n,e,t)=>e in n?a8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dg=(n,e)=>{for(var t in e||(e={}))l8.call(e,t)&&rf(n,t,e[t]);if(cg)for(var t of cg(e))u8.call(e,t)&&rf(n,t,e[t]);return n},Di=(n,e,t)=>(rf(n,typeof e!="symbol"?e+"":e,t),t);let ed=class extends Er{constructor(e){var t,r;super(),Di(this,"name","ColoredMesh"),Di(this,"meshFont"),Di(this,"meshBackground"),Di(this,"paramsStyle",{}),Di(this,"_geometry",new Tt),Di(this,"highlighted",!1),Di(this,"opacityBeforeHighlight"),Di(this,"colorBeforeHighlight"),this.paramsStyle=e??{};const i=new st({color:new qe((t=e==null?void 0:e.color)!=null?t:$P).convertSRGBToLinear(),transparent:!0,side:fn,depthTest:!0,depthWrite:!1,opacity:(r=e==null?void 0:e.opacity)!=null?r:TP}),o=new st({color:16777215,transparent:!0,side:fn,depthTest:!1,depthWrite:!1,opacity:.3/.5*i.opacity}),s=new nt(this.geometry,i),a=new nt(this.geometry,o);s.name="MeshFront",a.name="MeshBackground",s.renderOrder=1,a.renderOrder=0,this.meshFont=s,this.meshBackground=a,this.add(s),this.setOcclusionVisibility({occlusionVisibility:e==null?void 0:e.occlusionVisibility,occlusionMode:e==null?void 0:e.occlusionMode})}get style(){return{color:this.color,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get color(){return this.meshFont.material.color}get opacity(){return this.meshFont.material.opacity}get occlusionVisibility(){return!!this.meshBackground.parent||this.meshFont.material.depthTest===!1}get occlusionMode(){return this.meshFont.material.depthTest===!1?"depthTest":"translucence"}set geometry(e){this._geometry=e,this.meshFont.geometry=e,this.meshBackground.geometry=e}get geometry(){return this._geometry}setStyle(e){this.paramsStyle=dg(dg({},this.paramsStyle),e),Ge(e.color)&&(this.meshFont.material.color.set(new qe(e.color).convertSRGBToLinear()),this.needsRender=!0),Ge(e.opacity)&&(this.meshFont.material.opacity=e.opacity,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.needsRender=!0),this.setOcclusionVisibility(e)}highlight(e){var t,r;this.highlighted=!0,Ge(e==null?void 0:e.color)?(this.colorBeforeHighlight=(t=this.colorBeforeHighlight)!=null?t:this.meshFont.material.color.clone(),this.meshFont.material.color.set(new qe(e.color).convertSRGBToLinear())):(this.opacityBeforeHighlight=(r=this.opacityBeforeHighlight)!=null?r:this.opacity,this.meshFont.material.opacity=this.opacity*_p,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity),this.needsRender=!0}unhighlight(){this.highlighted=!1,Ge(this.opacityBeforeHighlight)&&(this.meshFont.material.opacity=this.opacityBeforeHighlight,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.opacityBeforeHighlight=void 0),Ge(this.colorBeforeHighlight)&&(this.meshFont.material.color=new qe(this.colorBeforeHighlight),this.colorBeforeHighlight=void 0),this.needsRender=!0}setOcclusionVisibility(e){var t,r,i;const o=(r=(t=e.occlusionMode)!=null?t:this.paramsStyle.occlusionMode)!=null?r:"translucence",s=(i=e.occlusionVisibility)!=null?i:this.paramsStyle.occlusionVisibility;Ge(s)&&(s?o==="depthTest"?(this.meshFont.material.depthTest=!1,this.remove(this.meshBackground)):o==="translucence"&&(this.meshFont.material.depthTest=!0,this.addIfNotExists(this.meshBackground)):(this.meshFont.material.depthTest=!0,this.remove(this.meshBackground)))}};var c8=Object.defineProperty,d8=Object.defineProperties,h8=Object.getOwnPropertyDescriptors,hg=Object.getOwnPropertySymbols,f8=Object.prototype.hasOwnProperty,p8=Object.prototype.propertyIsEnumerable,of=(n,e,t)=>e in n?c8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Sd=(n,e)=>{for(var t in e||(e={}))f8.call(e,t)&&of(n,t,e[t]);if(hg)for(var t of hg(e))p8.call(e,t)&&of(n,t,e[t]);return n},v8=(n,e)=>d8(n,h8(e)),Bn=(n,e,t)=>(of(n,typeof e!="symbol"?e+"":e,t),t);const Kp=new Tt;Kp.name="blankGeometry";Kp.isBlank=!0;let Jp=class extends ed{constructor(e){super(e),Bn(this,"name","PolygonMesh"),Bn(this,"points",[]),Bn(this,"planeHelperNeedUpdate",!0),Bn(this,"geometryInfoNeedUpdate",!0),Bn(this,"_paramsStyle"),Bn(this,"areaDom"),Bn(this,"planeHelper",null),Bn(this,"_geometryInfo",null),Bn(this,"lastRenderAreaItem"),Bn(this,"_onAdded",()=>{this.areaDom||this.updateAreaItems()}),Bn(this,"_onRemoved",()=>{var t;(t=this.areaDom)==null||t.destroy(),this.areaDom=void 0}),Bn(this,"_onShowed",()=>{this.areaDom&&(this.areaDom.container.style.display="block")}),Bn(this,"_onHidden",()=>{this.areaDom&&(this.areaDom.container.style.display="none")}),e!=null&&e.points&&this.setPoints(e.points),this._paramsStyle=e??{},this.updateAreaItems(),this.addEventListener("removed",()=>{Vn.cacheObject.delete(this),Vn.checkDom(this)}),this.addEventListener("added",()=>{Vn.cacheObject.add(this)}),Vn.checkDomEveryFrame()}get normal(){return this.points.length>=3?new H().crossVectors(this.points[1].clone().sub(this.points[0]),this.points[2].clone().sub(this.points[0])).normalize():new H(0,0,1)}get style(){return v8(Sd({},super.style),{lengthEnable:this._paramsStyle.lengthEnable})}get isBlank(){return!!this.geometry.isBlank}get center(){var e;return(e=this.geometryInfo)==null?void 0:e.center.clone()}get geometryInfo(){return this.geometryInfoNeedUpdate&&(this.isBlank?this._geometryInfo=null:this._geometryInfo=FC(this.geometry),this.geometryInfoNeedUpdate=!1),this._geometryInfo}get five(){var e,t;return(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.center){const t=dl(this,this.center).toArray().join(",");t!==this.lastRenderAreaItem&&(this.updateAreaItems(),this.lastRenderAreaItem=t)}}setStyle(e){var t;this._paramsStyle=Sd(Sd({},this._paramsStyle),e),super.setStyle(this._paramsStyle);const r=(t=this._paramsStyle.occlusionVisibility)!=null?t:!0;this.areaDom&&(this.areaDom.intersectCheck=!r),this.updateAreaItems()}setPoints(e,t){var r,i;const o=e.map(Xe);this.points=o,this.geometry=(i=BC(this.points,{checkLinesIntersect:(r=t==null?void 0:t.checkLinesIntersect)!=null?r:!0}))!=null?i:Kp,this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0,this.updateAreaItems()}projectPoint(e){return e&&(this.planeHelperNeedUpdate&&this.updatePlaneHelper(),this.planeHelper?this.planeHelper.projectPoint(e,new H):e)}updatePlaneHelper(){this.points.length>=3?this.planeHelper=new _n().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.planeHelper=null,this.planeHelperNeedUpdate=!1}updateAreaItems(){var e;const t=()=>{var i;(i=this.areaDom)==null||i.destroy(),this.areaDom=void 0};if(!this._paramsStyle.lengthEnable||!this.geometryInfo)return t();if(!this.five)return console.error("Five not found");this.areaDom=(e=this.areaDom)!=null?e:(()=>{var i;const o=new Ip(this.five),s=(i=this._paramsStyle.occlusionVisibility)!=null?i:!0;return o.intersectCheck=!s,o.simulate3D=!0,o})(),this.areaDom.setPosition(this.center);const r=HP(this.geometryInfo.area,this._paramsStyle.lengthUnit);r?this.areaDom.container.innerHTML=kp(r,{style:"color: #FFFFFF; background: #3366FF"}):this.areaDom.container.innerHTML=""}};function m8(n,e){return!(Math.abs(n.x-e.x)>1e-5||Math.abs(n.y-e.y)>1e-5||Math.abs(n.z-e.z)>1e-5)}const Od=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function $d(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),t)}function Va(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent&&n.detachEvent("on".concat(e),t)}function ww(n,e){const t=e.slice(0,e.length-1);for(let r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function xw(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function g8(n,e){const t=n.length>=e.length?n:e,r=n.length>=e.length?e:n;let i=!0;for(let o=0;o<t.length;o++)r.indexOf(t[o])===-1&&(i=!1);return i}const wl={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Od?173:189,"=":Od?61:187,";":Od?59:186,"'":222,"[":219,"]":221,"\\":220},Nr={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},ku={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},rn={16:!1,18:!1,17:!1,91:!1},Ot={};for(let n=1;n<20;n++)wl["f".concat(n)]=111+n;let bt=[],Ya=null,Pw="all";const si=new Map,Il=n=>wl[n.toLowerCase()]||Nr[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),y8=n=>Object.keys(wl).find(e=>wl[e]===n),A8=n=>Object.keys(Nr).find(e=>Nr[e]===n);function Ew(n){Pw=n||"all"}function xl(){return Pw||"all"}function b8(){return bt.slice(0)}function w8(){return bt.map(n=>y8(n)||A8(n)||String.fromCharCode(n))}function x8(){const n=[];return Object.keys(Ot).forEach(e=>{Ot[e].forEach(t=>{let{key:r,scope:i,mods:o,shortcut:s}=t;n.push({scope:i,shortcut:s,mods:o,keys:r.split("+").map(a=>Il(a))})})}),n}function P8(n){const e=n.target||n.srcElement,{tagName:t}=e;let r=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function E8(n){return typeof n=="string"&&(n=Il(n)),bt.indexOf(n)!==-1}function C8(n,e){let t,r;n||(n=xl());for(const i in Ot)if(Object.prototype.hasOwnProperty.call(Ot,i))for(t=Ot[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1).forEach(o=>{let{element:s}=o;return Zp(s)}):r++;xl()===n&&Ew(e||"all")}function S8(n){let e=n.keyCode||n.which||n.charCode;const t=bt.indexOf(e);if(t>=0&&bt.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&bt.splice(0,bt.length),(e===93||e===224)&&(e=91),e in rn){rn[e]=!1;for(const r in Nr)Nr[r]===e&&(Qn[r]=!1)}}function Cw(n){if(typeof n>"u")Object.keys(Ot).forEach(i=>{Array.isArray(Ot[i])&&Ot[i].forEach(o=>ou(o)),delete Ot[i]}),Zp(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&ou(i)});else if(typeof n=="object")n.key&&ou(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];let[i,o]=t;typeof i=="function"&&(o=i,i=""),ou({key:n,scope:i,method:o,splitKey:"+"})}}const ou=n=>{let{key:e,scope:t,method:r,splitKey:i="+"}=n;xw(e).forEach(o=>{const s=o.split(i),a=s.length,l=s[a-1],u=l==="*"?"*":Il(l);if(!Ot[u])return;t||(t=xl());const c=a>1?ww(Nr,s):[],d=[];Ot[u]=Ot[u].filter(h=>{const f=(r?h.method===r:!0)&&h.scope===t&&g8(h.mods,c);return f&&d.push(h.element),!f}),d.forEach(h=>Zp(h))})};function fg(n,e,t,r){if(e.element!==r)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const o in rn)Object.prototype.hasOwnProperty.call(rn,o)&&(!rn[o]&&e.mods.indexOf(+o)>-1||rn[o]&&e.mods.indexOf(+o)===-1)&&(i=!1);(e.mods.length===0&&!rn[16]&&!rn[18]&&!rn[17]&&!rn[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(bt),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function pg(n,e){const t=Ot["*"];let r=n.keyCode||n.which||n.charCode;if(!Qn.filter.call(this,n))return;if((r===93||r===224)&&(r=91),bt.indexOf(r)===-1&&r!==229&&bt.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(a=>{const l=ku[a];n[a]&&bt.indexOf(l)===-1?bt.push(l):!n[a]&&bt.indexOf(l)>-1?bt.splice(bt.indexOf(l),1):a==="metaKey"&&n[a]&&(bt=bt.filter(u=>u in ku||u===r))}),r in rn){rn[r]=!0;for(const a in Nr)Nr[a]===r&&(Qn[a]=!0);if(!t)return}for(const a in rn)Object.prototype.hasOwnProperty.call(rn,a)&&(rn[a]=n[ku[a]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(bt.indexOf(17)===-1&&bt.push(17),bt.indexOf(18)===-1&&bt.push(18),rn[17]=!0,rn[18]=!0);const i=xl();if(t)for(let a=0;a<t.length;a++)t[a].scope===i&&(n.type==="keydown"&&t[a].keydown||n.type==="keyup"&&t[a].keyup)&&fg(n,t[a],i,e);if(!(r in Ot))return;const o=Ot[r],s=o.length;for(let a=0;a<s;a++)if((n.type==="keydown"&&o[a].keydown||n.type==="keyup"&&o[a].keyup)&&o[a].key){const l=o[a],{splitKey:u}=l,c=l.key.split(u),d=[];for(let h=0;h<c.length;h++)d.push(Il(c[h]));d.sort().join("")===bt.sort().join("")&&fg(n,l,i,e)}}function Qn(n,e,t){bt=[];const r=xw(n);let i=[],o="all",s=document,a=0,l=!1,u=!0,c="+",d=!1,h=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(o=e.scope),e.element&&(s=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(d=e.capture),typeof e.splitKey=="string"&&(c=e.splitKey),e.single===!0&&(h=!0)),typeof e=="string"&&(o=e),h&&Cw(n,o);a<r.length;a++)n=r[a].split(c),i=[],n.length>1&&(i=ww(Nr,n)),n=n[n.length-1],n=n==="*"?"*":Il(n),n in Ot||(Ot[n]=[]),Ot[n].push({keyup:l,keydown:u,scope:o,mods:i,shortcut:r[a],method:t,key:r[a],splitKey:c,element:s});if(typeof s<"u"&&window){if(!si.has(s)){const f=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return pg(v,s)},p=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;pg(v,s),S8(v)};si.set(s,{keydownListener:f,keyupListenr:p,capture:d}),$d(s,"keydown",f,d),$d(s,"keyup",p,d)}if(!Ya){const f=()=>{bt=[]};Ya={listener:f,capture:d},$d(window,"focus",f,d)}}}function O8(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Ot).forEach(t=>{Ot[t].filter(r=>r.scope===e&&r.shortcut===n).forEach(r=>{r&&r.method&&r.method()})})}function Zp(n){const e=Object.values(Ot).flat();if(e.findIndex(t=>{let{element:r}=t;return r===n})<0){const{keydownListener:t,keyupListenr:r,capture:i}=si.get(n)||{};t&&r&&(Va(n,"keyup",r,i),Va(n,"keydown",t,i),si.delete(n))}if((e.length<=0||si.size<=0)&&(Object.keys(si).forEach(t=>{const{keydownListener:r,keyupListenr:i,capture:o}=si.get(t)||{};r&&i&&(Va(t,"keyup",i,o),Va(t,"keydown",r,o),si.delete(t))}),si.clear(),Object.keys(Ot).forEach(t=>delete Ot[t]),Ya)){const{listener:t,capture:r}=Ya;Va(window,"focus",t,r),Ya=null}}const Md={getPressedKeyString:w8,setScope:Ew,getScope:xl,deleteScope:C8,getPressedKeyCodes:b8,getAllKeyCodes:x8,isPressed:E8,filter:P8,trigger:O8,unbind:Cw,keyMap:wl,modifier:Nr,modifierMap:ku};for(const n in Md)Object.prototype.hasOwnProperty.call(Md,n)&&(Qn[n]=Md[n]);if(typeof window<"u"){const n=window.hotkeys;Qn.noConflict=e=>(e&&window.hotkeys===Qn&&(window.hotkeys=n),Qn),window.hotkeys=Qn}const $8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAA53+RiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZqADAAQAAAABAAAAZgAAAACBRx3mAAAKZ0lEQVR4Ae2d65PVRBDFWUF8IAoiLIJICaVAUSgUfvH//2RpgRRUCSgI5QIFAiryfrieX3Y6Jtnk5nGTubn3dlf15j3Tc066e2aSzd2yxWWUCKyM0qoJRq2vr2Pz1qCsv5VRrW5Zz+i/Wn8jfbWyssL+uZFREyMSAP3tjG7TOqQYIVpN1tkuavHYa+14FfS5lk9FFvtGKaMiJniDEbFdiEGE2QiI5gGs4wnmHew3j+D8rBdRBmWh7wQ1cl9q+0nQxyKKckYh1uiZGiNCAM9AM5vsDn/Z952t+t5VfTukHwSFSIh9JH2o+h5rOVMxEKIbEbzDyOAOBhhCzQsBwzKKBDveV2UfS3dJuUmo/4H0nmzBM6NLdGIKhHCn4hkvpDNP0LINez6S7pFCEqHtnvRuzJtF9aXxm/VBJUMIsR4PIb4/n9UdWddY2fuezjkghSS8+Q/pmuzlRhpconiMGklCp6HUR5iAkNEkWtlTKbKdfARBq1JIuSnb8aJBZVBi1ChCA4TgIRDxTI2aScxW3VOJ2kJn4aj0QymdhF/VlqdaDiKDEaOGELK42xA8hNA196J24TlHpESB62rX2hCN6p0YGU6ZEILhuD5eYmMMbc6/qI207Zh0r5Tcc1lt7DX39EqMDCZkQQpLur30thZW1N5DatyXUtp5Ue0lxPUivREjI+n/W+ia21zSFlW1m5zztZQx2QWRc79tGWXn90JMIIVBGomdOaiFCl1lwGX3qf2EtrNSxkCX1P5b2eNd1qcmRkbZHBS9rqUjxUAXDoTvM1LyzhWRc92OdVlORUyGlDcyZLCuY5eGzeIa4QGe30g/k/4sTK51tYO80ElkhOWU107KBoTCgRD+UyDopJZMwP7eBeBOxARSkpzipJTCfkF76QidDuTcLT1rwk5G5q1EFRFLGc0nOaXVxUtysm5WsPlB+pf0rDCjU9BKWhGjCoihkII8Ca67seV/cwgIGwac30t5WnpG2NFzayytiFGpkILHLG3vqzGyOlHkMA11TkpYOyVtLI2JEeN0i2F9tFP1jVsd8USRQzi7LN0rDD9vWnUjYlQg51myX+hplqbAtTlP5NzQ+Twq+EpY8ji7VhoRo1LSvFJbop9QhcAlHeBZFJOftVJLTCaELdwscS06PZ4gr4GUX6S7hOn+uqInEqMC6IV5CKtDseFxkXNbp/4pPSpsJ44hJxKjAghhnPNM6tIPAldVDKQcnlRcJTHBW5jK7v29rkkGLfoxeQ3vrN2RfiqMK8c2lcToQveW4e4Smz87WFVFKTEFb5nLlyeqGjyG/fIaUgOPpPdX5ZpSYnSBPR723DIck3gN+Jf20KqIIYzxZmSvLxgM18b5K1nY8vzqoXRfmfWbiAkJifkwJt9chkWAcLZdmPPeQE42EaOjNspfiPfAcq0d3wZjGgaevIabkxwxmaTPq0dL9UJFDpVIG8KY5zb8VwGzATkuchs6gRlk9nkYEwiRBGLAPPcwrUgMA0oRuRivs0YCdtpqGHDSycrNOheJwWM8t0wLdYvrQ8r4R5fszF6WEqMYR0/MicmiE28dr6F3lk7RpMQEUjDFH4SBQlzBY+gIpOGsSAz5he6bS0QEhDkzLBBjQ5WkN2Am4EZOiqERf0lPuDSUsdMnLOMTYjVCDL3iRJJQFgaWPLzxubEAzAwW5PZtgYs0lEEKJHkomwEjoUqIIc/QM06JoavM830OuMwGAXOK5F0A65WxdGJmQ4jVilOg8JB6jBMDGrMVi1alxPiM8uzIMY9JopiFMnIMYqxtbPnfmAgY9jliMMBIimmM15VHAHKSqGVksEFss+386b4VAwHDPvGc3IYTEwP/yjqsV5wjBo+BJCOq8mo/MBgCYA8POWLYgDHrBGjVJTICSTdZdeaIYY6MA+nsZmSjvLoNp8BjkolkC108ToaYdHbTkYqOAE4BMclEckJMeO7MXE0ygRbdJK8QBJgjS78Lah7DAbwmfYLGDpeoCJDfbSIz1wuDGPusVVSLvLIEAYhJn4dlPYbnzlv1oMa9JvKdknk7Jn11LEsMr9DQAci93xTZxmWtznJ7+oZSSkx4O4YDTkz82wNiSPzJGIbqU2KCLXjNTnvuHPb5YngE6Cqn3kJ1RWJ48YyT0hfPOMllOATkBHgLKSTNL9RWJOZv7cOdPuGgSxQEGNQz2q8mJsQ4/plmj5gskhbFymWqJKQMiOHDSYz6UykD/76OEs52p2f5ylAIWBjL5Rcq20SMmOOjzrjVKie4DIoA3sI3RdMRv9W2iZhwgE847Zar8R0ZlwEQELaM9PGY0v/eqyLmji4g5h2SugyDADMsJP3mxMi1mLOBnH1i1qdoBESfkvGWyn9CrvIY7LglpX99mA2XXhFgsphhSeWXRyqJkdfQAbgt5XsnPuAUEH1IE2+hnkpighE3tCSsnQjbvpgeATpUeEtpbrHiJxITcs01ncwHAg7aRb7shoAwpHtMb6z288gTiaF6kUMngNkAvoDKwNOlAwLCjnxNbmEWedO4pVhkLTHhgstaQsqpYgG+3RgBGxNWJvxsSY2IEcM8DrgiXRXzX2QL8PV6BDIhjC/xps9cJl3ZiBgKUIE3tbgrPaGK+FVVlwYICCtyCrmFqZfcDPKkyxsTEwq5qCW9CX7hgekElwkICCPyCiGMEX6jEGbFtSJGjJO07EcEvlPFyf8LWmG+/B+BDClMbbX+mHgrYqhW5PAjAj9K+Srdt8EArboUEGAqC3x51tIor2Svb00MF6sics15KU86T0tdMgjoZoUUcguekr4rljmldrVzKFKFazKAPHNcS9yV34BkudQSSAFXJig7kQKAnYnhYlV8PZByjLK0fl77SHRLJ2q7DSCNlMY9sDKwKGxqkVEHVMhJKU8/z4mc2pHt1JWOqIBACr0vUkPn8JVtUi/EUKCMI98wM8Cd0uvvDqu80YraTS5hqgUsSfSdw1e2kb0RQ6Eykp4ansOAit+7X9NyYUXtJcdCCmR06n1VgdMrMVQiY4mxx6V4EB98vrpooU1tBDfreRkpvXZ8eidGBici43lMcERKvvlN5NDFnnsJXkJEQOh5TZXkN4rZ/HcwYqhKjSAhHpUS4njLE4KeaDl3oraQS/ASErx5SeuBY9OGD0qMGaFG8Yvdh6U0jvB2WwRNfIKnc0Yhsh0i8BAeexCuyCWD9zqjEKPGWO4hvEES8lB6R41sNbmXXBnhT/CQLCGErMq3Wvo2KRoxZrgazJ23KqVzgAcx9/ZA+kgkDRYaVH6tyDbwwD56W3Ri8BBeX41GiOpKJDoxVnG4I/GePVLAIG5DEo+xa5+J65zeJNws5h2Uyw1CqOX32XrtbVF4E5kZMVnjBAyvR/ESO50EbGJah05CogKn13yk+vAGbgZTrSZk4B2j+LG8URADKogAI9FC0g4pPTqAQ/AmYnxW2cedbWp3Nm2iHJYo4bKo2pV+7IBEnuisvANjijIqYorGhTsbghhdQxJ3usV+rSbgQoyRwtKU4xxD2Af4eCKEGhF2XLvGJaMmpgwqkYXNkIQXsJ71DggwomwJGW/G5A2yx2VeEfgPPUASVA2Hk1IAAAAASUVORK5CYII=",M8=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient id="grad1" x1="22.39%" y1="67.34%" x2="56.24%" y2="-36.34%">
            <stop stop-color="#FFFFFF" offset="0%"/>
            <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill-rule="nonzero" transform="translate(3.39, 2.29)">
        <path d="M14.39,3.17C14.82,3.17,15.17,3.52,15.17,3.96C15.17,4.4,14.82,4.75,14.39,4.75L14.06,4.75L13.16,15.72C13.08,16.68,12.29,17.42,11.34,17.42H3.87C2.92,17.42,2.13,16.68,2.06,15.72L1.15,4.75L0.83,4.75C0.4,4.75,0.05,4.4,0.05,3.96C0.05,3.52,0.4,3.17,0.83,3.17L14.39,3.17ZM12.49,4.75L2.72,4.75L3.61,15.59C3.62,15.71,3.7,15.8,3.81,15.82L3.87,15.83H11.34C11.48,15.83,11.59,15.73,11.6,15.59L12.49,4.75ZM6.04,7.39C6.48,7.39,6.83,7.74,6.83,8.18V12.4C6.83,12.84,6.48,13.19,6.04,13.19C5.61,13.19,5.26,12.84,5.26,12.4V8.18C5.26,7.74,5.61,7.39,6.04,7.39ZM9.17,7.39C9.61,7.39,9.96,7.74,9.96,8.18V12.4C9.96,12.84,9.61,13.19,9.17,13.19C8.74,13.19,8.39,12.84,8.39,12.4V8.18C8.39,7.74,8.74,7.39,9.17,7.39ZM10.22,0C10.65,0,11,0.35,11,0.79C11,1.23,10.65,1.58,10.22,1.58H5C4.57,1.58,4.22,1.23,4.22,0.79C4.22,0.35,4.57,0,5,0H10.22Z" fill="url(#grad1)"/>
    </g>
</svg>`;var V8=Object.defineProperty,T8=(n,e,t)=>e in n?V8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vg=(n,e,t)=>(T8(n,typeof e!="symbol"?e+"":e,t),t);const _8={auto:"",pen:"","pen-forbidden":"","pen-crosshair":"","pne-polygon":"","pen-circle":"","crosshair-rectangle":"","crosshair-circle":""},k8={position:"absolute",width:"34px",height:"34px",transform:"translate(-50%, -40px)",borderRadius:"50%",cursor:"pointer",zIndex:"9999",userSelect:"none",display:"flex",pointerEvents:"auto",alignItems:"center",justifyContent:"center",backgroundSize:"34px 34px",backgroundPosition:"center",backgroundRepeat:"no-repeat"},I8=`
  <div style="width: 32px; height: 32px; background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
    ${M8}
  </div>
`;let j8=class{constructor(e){vg(this,"container"),vg(this,"deleteButton"),this.container=e??document.documentElement}setType(e){const t=_8[e];t?this.container.style.cursor=`url(${t}), auto`:this.container.style.cursor=e}showDeleteButton(e){const{clientX:t,clientY:r,container:i=this.container,onClick:o}=e;let s=this.deleteButton;return s||(s=document.createElement("div"),Object.assign(s.style,k8),s.style.backgroundImage=`url(${$8})`,s.innerHTML=I8),this.deleteButton=s,i.appendChild(s),s.style.left=`${t}px`,s.style.top=`${r}px`,s.onclick=()=>{i.removeChild(s),o()},s}removeDeleteButton(){this.deleteButton&&this.deleteButton.remove()}tip(e){return()=>this.closeTip()}closeTip(){}reset(){this.container.style.cursor="auto"}};var sf={},D8={get exports(){return sf},set exports(n){sf=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(D8);const wc=sf,L8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",Sw="data:image/png;base64,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",af="data:image/png;base64,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",R8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==";function Ls(n){return n.toLowerCase().includes("panorama")}function Ar(n){return!Ls(n)}var z8=Object.defineProperty,mg=Object.getOwnPropertySymbols,B8=Object.prototype.hasOwnProperty,F8=Object.prototype.propertyIsEnumerable,gg=(n,e,t)=>e in n?z8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ow=(n,e)=>{for(var t in e||(e={}))B8.call(e,t)&&gg(n,t,e[t]);if(mg)for(var t of mg(e))F8.call(e,t)&&gg(n,t,e[t]);return n};const yr=new Map,su=new Map;function H8(n){Pi(n).forEach(e=>{var t,r,i;yr.has(e)||(e instanceof HTMLElement?yr.set(e,{opacity:e.style.opacity===""?void 0:e.style.opacity,visible:{display:e.style.display,visibility:e.style.visibility}}):e.isObject3D&&(e.material?e.material instanceof Wr?yr.set(e,{opacity:(t=e.material.uniforms.opacity)==null?void 0:t.value,transparent:e.material.transparent,visible:e.visible}):yr.set(e,{opacity:(r=e.material)==null?void 0:r.opacity,transparent:(i=e.material)==null?void 0:i.transparent,visible:e.visible}):yr.set(e,{visible:e.visible})))})}function yg(n){Pi(n).forEach(e=>{const t=yr.get(e);t&&(e instanceof HTMLElement&&(e.style.opacity=t.opacity===void 0?"":t.opacity,e.style.display=t.visible.display,e.style.visibility=t.visible.visibility),e.isObject3D&&(e.visible=t.visible,e.material&&(e.material instanceof Wr?(e.material.uniforms.opacity&&(e.material.uniforms.opacity.value=t.opacity),e.material.transparent=t.transparent):(e.material.opacity=t.opacity,e.material.transparent=t.transparent))),yr.delete(e))})}function $w(n,e){var t;const r=(t=e==null?void 0:e.traverseTHREEObject)!=null?t:!0;let i=Pi(n);const o=[];i.forEach(l=>{l&&(l instanceof HTMLElement?o.push(l):l.isObject3D&&(r?(o.push(l),l.traverse(u=>{u&&o.push(u)})):o.push(l)))}),i=[...new Set(o.filter(Boolean))],H8(i);const s=Pt(Ow({targets:i,duration:300,easing:"linear",direction:"alternate",loop:4,autoplay:!1,update:l=>{var u;l.animatables.forEach(c=>{var d;const h=c.target;if(!yr.has(h))return;const f=Number((d=yr.get(h).opacity)!=null?d:1)*(100-l.progress)/100;h instanceof HTMLElement?h.style.opacity=String(f):h.material&&(h.material instanceof Wr?(h.material.uniforms.opacity&&(h.material.uniforms.opacity.value=f),h.material.transparent=!0):(h.material.opacity=f,h.material.transparent=!0))}),(u=e==null?void 0:e.updateRender)==null||u.call(e)}},e));s.preComplete=()=>{s!=null&&s.completed||(s==null||s.pause(),yg(i),setTimeout(()=>{var l;return(l=e==null?void 0:e.updateRender)==null?void 0:l.call(e)}))};const a=su.get(n);return a==null||a.pause(),a==null||a.seek(0),su.set(n,s),s.play(),s.finished.then(()=>{var l;yg(i),setTimeout(()=>{su.get(n)===s&&su.delete(n)},1e3),(l=e==null?void 0:e.updateRender)==null||l.call(e)}),s}function U8(n,e){return $w(n,Ow({update:t=>{var r;t.animatables.forEach(i=>{var o,s;const a=i.target;if(!yr.has(a))return;const l=yr.get(a),u=Number((s=(o=l==null?void 0:l.opacity)!=null?o:e==null?void 0:e.maxOpacity)!=null?s:1)*(t.progress/100);a instanceof HTMLElement?(a.style.opacity=String(u),a.style.visibility="visible"):a.isObject3D&&(Pi(n).includes(a)&&(a.visible=!0),a.material&&(a.material instanceof Wr?(a.material.uniforms.opacity&&(a.material.uniforms.opacity.value=u),a.material.transparent=!0):(a.material.opacity=u,a.material.transparent=!0)))}),(r=e==null?void 0:e.updateRender)==null||r.call(e)}},e))}function N8(n){return n.stickType==="Plane"}function W8(n){return n.stickType==="3DPoint"}function To(n){return n.stickType==="Model"&&n.contentType==="MediaModel"}function G8(n){return n.stickType==="Model"&&n.contentType==="Model"}function Q8(n){return n.stickType==="Plane"&&n.contentType==="MediaPlane"}const Ag=(n,e=16.666666666666668)=>{let t=null;const r=n;return(...i)=>{t&&clearTimeout(t),t=setTimeout(()=>{r==null||r(...i),t&&clearTimeout(t),t=null},e)}};function X8(n,e=200){let t;return function(...r){t||(n.apply(this,r),t=setTimeout(function(){t=null},e))}}function ev(n){return n.stickType?n.stickType:n.pointType==="PointTag"&&n.dimensionType==="3D"?"3DPoint":n.pointType==="PlaneTag"?"Plane":"2DPoint"}function q8(n){var e,t,r,i;if(n.stickType||(n.stickType=ev(n)),n.contentType==="VRLink"||n.contentType==="PanoLink"||n.contentType==="Link"){const o=n;!((t=(e=o.data)==null?void 0:e.icon)!=null&&t.url)&&!((i=(r=o.style)==null?void 0:r.point)!=null&&i.url)&&(o.data.icon={url:"//vr-static.realsee-cdn.cn/release/web/test.09dee741.png",steps:28})}return n.extraData&&(n.data?n.data.extraData=n.extraData:n.data={extraData:n.extraData}),n}var Y8=Object.defineProperty,K8=(n,e,t)=>e in n?Y8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ta=(n,e,t)=>(K8(n,typeof e!="symbol"?e+"":e,t),t);const Ks="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",Ka={};var tv=(n=>(n.Default="default",n.GetAudioDuration="getAudioDuration",n.PlayAudio="playAudio",n))(tv||{});function J8(n,e){const t=(e==null?void 0:e.namespace)||"default",r=Ka[t]||(Ka[t]=[]);let i=r.find(o=>!o.realSrc||o.realSrc===Ks);return i||(console.warn("",Ka),i=new Mw(Ks),r.push(i)),n&&(i.src=n),i}function Z8(n,e){const t=(e==null?void 0:e.namespace)||"default",r=Ka[t]||(Ka[t]=[]),i=n-r.length;if(!(i<=0))for(let o=0;o<i;o++)r.push(new Mw(Ks))}let Mw=class extends(typeof Audio>"u"?class{}:Audio){constructor(e){super(e),Ta(this,"preload","auto"),Ta(this,"crossOrigin","anonymous"),Ta(this,"realSrc",""),Ta(this,"inited",!1),Ta(this,"removeDocumentEventListener"),this.realSrc=e??"",this.muted=!0,super.autoplay=!0,super.addEventListener("ended",()=>{this.src=""});const t=()=>e6(this);document.addEventListener("click",t),document.addEventListener("touchend",t),this.removeDocumentEventListener=()=>{document.removeEventListener("click",t),document.removeEventListener("touchend",t)}}get isBlankAudio(){return this.realSrc===Ks||!this.realSrc}get src(){return super.src}set src(e){super.src=e,this.realSrc=e,this.removeDocumentEventListener()}get muted(){return super.muted}set muted(e){super.muted=e}clear(){this.currentTime=0,this.src=Ks}};function e6(n){n&&(n.inited||(n.src&&(n.inited=!0,n.removeDocumentEventListener()),n.src===Ks&&n.play()))}const Vw={visibleConfig:{intersectRaycaster:{enabled:!0,distanceAccuracy:.01,checkPoints:"corner",needPassed:1}},clickable:!0,simulate3D:!1,renderType:"Dom"},t6={globalConfig:{visibleConfig:{followModelVisibility:!0},unfoldedConfig:{autoUnfold:{enable:!0,strategy:"MinimumDistance",distance:{max:5}}},tag3DConfig:{ratio:.0035},popoverConfig:{enabled:!1,trigger:"hover",triggerDelay:500,placement:"auto",autoPlacementBaseSpace:{top:.2,right:.15,bottom:.2},transitionDuration:100,toolbar:{showMore:!0,showShare:!0},viewMoreText:""}},contentTypeConfig:{"[Mapview]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"[Floorplan]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"Any-Audio-plane":{unfoldedConfig:{keep:"unfolded"}},Link:{unfoldedConfig:{keep:"unfolded"}},Panorama:{unfoldedConfig:{keep:"unfolded"}},VRLink:{unfoldedConfig:{keep:"unfolded"}},PanoLink:{unfoldedConfig:{keep:"unfolded"}},MediaPlane:{unfoldedConfig:{keep:"unfolded"},initialData:{autoplayConfig:{autoplayCarousel:!0,autoplayVideo:!1,autoplayVideoInCarousel:!1}}},"Model-Any":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{visibleFiveMode:"all"}},Marketing:{popoverConfig:{enabled:!1}},Audio:{popoverConfig:{toolbar:{showMore:!1}}}}};function n6(n,e,t){const r=new _n().setFromNormalAndCoplanarPoint(t,e),i=e.clone().sub(n).cross(new H(0,1,0)).setLength(.01),o=new H(0,.01,0);return[e.clone().sub(i).sub(o),e.clone().add(i).sub(o),e.clone().add(i).add(o),e.clone().sub(i).add(o)].map(s=>r.projectPoint(s,new H))}const r6=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;navigator.userAgent.toLowerCase().indexOf("android");const Iu=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,i6=r6&&Iu;function o6(n){if(n.length!==4)return!1;const[e,t,r,i]=n,o=e.distanceTo(t),s=t.distanceTo(r),a=r.distanceTo(i),l=i.distanceTo(e),u=e.distanceTo(r),c=t.distanceTo(i);return o===a&&s===l&&u===c}var s6=Object.defineProperty,a6=(n,e,t)=>e in n?s6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lf=(n,e,t)=>(a6(n,typeof e!="symbol"?e+"":e,t),t);let Vd=class extends nt{constructor(e,t,r){if(e.length!==4)throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");const[i,o,s,a]=e,l=Yn(...e),u=[i.clone().sub(l),o.clone().sub(l),s.clone().sub(l),a.clone().sub(l)],c=new Tw(u,r);super(c,t),lf(this,"name","QuadrangleMesh"),this.position.copy(l)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}},Tw=class extends Tt{constructor(e,t){super(),lf(this,"name","QuadrangleGeometry"),lf(this,"points"),this.points=e;const r=t??(o6(e)?64:1);if(e.length!==4){console.error("Invalid number of points, it's not a quadrangle");return}const[i,o,s,a]=e,[l,u,c,d]=[new Jt(0,0),new Jt(1,0),new Jt(1,1),new Jt(0,1)],h=[],f=[];h.push(...i.toArray()),f.push(...l.toArray());for(let v=1;v<r;v++)h.push(i.x+(o.x-i.x)*v/r,i.y+(o.y-i.y)*v/r,i.z+(o.z-i.z)*v/r),f.push(l.x+(u.x-l.x)*v/r,l.y+(u.y-l.y)*v/r);h.push(...o.toArray()),f.push(...u.toArray()),h.push(...s.toArray()),f.push(...c.toArray());for(let v=1;v<r;v++)h.push(s.x+(a.x-s.x)*v/r,s.y+(a.y-s.y)*v/r,s.z+(a.z-s.z)*v/r),f.push(c.x+(d.x-c.x)*v/r,c.y+(d.y-c.y)*v/r);h.push(...a.toArray()),f.push(...d.toArray());const p=[];for(let v=0;v<r;v++)p.push(v,v+1,r*2-v,v,r*2-v,r*2+1-v);this.setAttribute("position",new Ct(new Float32Array(h),3)),this.setAttribute("uv",new Ct(new Float32Array(f),2)),this.setIndex(new Ct(new Uint32Array(p),1))}};function l6(n,e){let t=!Iu;const r=document.createElement("video");r.preload="metadata",r.crossOrigin="anonymous",r.muted=!0,r.loop=!0,r.playsInline=!0,r.autoplay=!0;const i=new Jf(r);i.minFilter=ci,i.magFilter=ci,i.encoding=fi,i.metadataLoaded=!1,r.src=n;const o=()=>{i.metadataLoaded||(i.dispatchEvent({type:"videoLoaded"}),i.metadataLoaded=!0)};if(Iu||(r.onloadedmetadata=()=>{o()}),Iu){const s=()=>{if(!t){if(!r.paused){o();return}r.muted=!0,r.play().then(()=>{t=!0,r.pause(),r.currentTime=0,o()}).catch(()=>{console.warn("video auto play error")})}};document.addEventListener("click",s,{once:!0}),document.addEventListener("touchend",s,{once:!0})}return i}function Ba(n,e,t){if(n==="fill")return e;if(n==="contain"){const[r,i,o,s]=e,a=r.distanceTo(i),l=o.distanceTo(s),u=r.distanceTo(s),c=i.distanceTo(o),d=a,h=u,f=d/h;if(f>t){const p=h*t,v=new H().subVectors(i,r).multiplyScalar((a-p)/2/a),b=new H().subVectors(o,s).multiplyScalar((l-p)/2/l);return[r.clone().add(v),i.clone().sub(v),o.clone().sub(b),s.clone().add(b)]}else if(f<t){const p=d/t,v=new H().subVectors(s,r).multiplyScalar((u-p)/2/u),b=new H().subVectors(o,i).multiplyScalar((c-p)/2/c);return[r.clone().add(v),i.clone().add(b),o.clone().sub(b),s.clone().sub(v)]}else return e}else return console.warn(`objectFit: ${n} is not supported yet`),e}var u6=Object.defineProperty,c6=(n,e,t)=>e in n?u6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Li=(n,e,t)=>(c6(n,typeof e!="symbol"?e+"":e,t),t);let d6=class extends Wr{constructor(e){super(),Li(this,"transparent",!1),Li(this,"blending",Iy),Li(this,"blendSrc",ky),Li(this,"blendDst",Pv),Li(this,"blendSrcAlpha",X2),Li(this,"blendDstAlpha",Pv),Li(this,"vertexShader",`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `),Li(this,"fragmentShader",`
    uniform sampler2D map;
    // 
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `),this.uniforms={map:{value:e}}}};const td={Z_FIGHTING_OFFSET:.01};var h6=Object.defineProperty,f6=(n,e,t)=>e in n?h6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yt=(n,e,t)=>(f6(n,typeof e!="symbol"?e+"":e,t),t),ei=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});let _w=class extends nt{constructor(){super(...arguments),Yt(this,"name","MediaPlane"),Yt(this,"src")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}dispose(){this.traverse(e=>{if(e.isMesh){const t=e;t.geometry.dispose(),(t.material instanceof Array?t.material:[t.material]).forEach(r=>{r.dispose()})}})}},uf=class extends _w{constructor(e,t,r){var i;super(),Yt(this,"name","PanoTagPluginImagePlane"),this.src=e;const o=(i=r==null?void 0:r.resolveZFighting)!=null?i:!0;let s=t;if(o){const a=ho(t).multiplyScalar(td.Z_FIGHTING_OFFSET);s=t.map(l=>l.clone().add(a))}hw(e).then(({texture:a,transparent:l})=>{var u;const c=new st({map:a,transparent:l}),d=Ba((u=r==null?void 0:r.objectFit)!=null?u:"contain",s,a.image.width/a.image.height),h=Yn(...d),f=d.map(v=>v.clone().sub(h)),p=new Tw(f);this.position.copy(h),this.geometry=p,this.material=c}).catch(a=>{console.error(`Imageplane error: ${a==null?void 0:a.message}`)})}},kw=class extends _w{constructor(e,t,r){const{videoCoverSrc:i,objectFit:o="contain",playButton:s="withText",paused:a=!0,videoTextureMap:l,ImageTextureMap:u,domEvents:c}=r??{};super(),Yt(this,"isVideoPlane",!0),Yt(this,"name","PanoTagPluginImagePlane"),Yt(this,"videoInstance"),Yt(this,"onVideoReady"),Yt(this,"objectFit"),Yt(this,"buttonSrc"),Yt(this,"videoCoverSrc"),Yt(this,"domEvents"),Yt(this,"disposers",[]),Yt(this,"cornerPoints"),Yt(this,"videoMesh"),Yt(this,"coverMesh"),Yt(this,"buttonMesh"),Yt(this,"videoTextureMap"),Yt(this,"ImageTextureMap"),this.cornerPoints=t,this.src=e,this.buttonSrc=s==="withText"?Sw:s==="withoutText"?af:typeof s=="string"?s:af,this.videoCoverSrc=i,this.objectFit=o,this.videoTextureMap=l,this.ImageTextureMap=u,this.domEvents=c,this.position.copy(Yn(...t)),this.videoCoverSrc&&a?this.addCoverMesh().then(()=>this.addButtonMesh()):this.addVideoMesh().then(()=>{a?this.addButtonMesh():this.play(!0)}),this.addEventListener("removed",()=>{this.remove(...this.children)}),this.addEventListener("dispose",()=>{var d;(d=this.disposers)==null||d.forEach(h=>h==null?void 0:h())})}play(e=!1){return ei(this,null,function*(){this.videoMesh||(yield this.addVideoMesh()),this.showPlayUI(),this.videoInstance.paused&&this.videoInstance.play().then(()=>this.showPlayUI()).catch(t=>{this.pause(),console.error("play error",t)}),this.videoInstance.muted=e,this.render()})}pause(){this.videoInstance&&(this.videoInstance.pause(),this.showPauseUI().then(()=>this.render()))}initialRenderHooks(e){const t=e(()=>{var r;this.videoMesh&&((r=this.videoInstance)==null?void 0:r.paused)===!1&&(this.videoMesh.needsRender=!0)});this.disposers.push(()=>t)}showPlayUI(){this.coverMesh&&(this.coverMesh.visible=!1),this.remove(this.buttonMesh),this.videoMesh.visible=!0}showPauseUI(){return ei(this,null,function*(){this.coverMesh?(this.coverMesh.visible=!0,this.videoMesh&&(this.videoMesh.visible=!1)):(yield this.addCoverMesh(),this.coverMesh&&(this.videoMesh.visible=!1)),this.addButtonMesh().then(()=>this.render())})}render(){var e;this.videoMesh&&(this.videoMesh.needsRender=!0),this.coverMesh&&(this.coverMesh.needsRender=!0),this.buttonMesh&&(this.buttonMesh.needsRender=!0),this.videoMesh&&((e=this.videoInstance)==null?void 0:e.paused)===!1&&(this.videoMesh.needsRender=!0)}addCoverMesh(){return ei(this,null,function*(){if(this.children.includes(this.coverMesh))return;const e=yield ei(this,null,function*(){if(this.coverMesh)return this.coverMesh;if(!this.videoCoverSrc)return;const{texture:t,transparent:r}=yield this.getImageTexture(this.videoCoverSrc),i=new st({transparent:!1,map:t}),o=Ba(this.objectFit,this.cornerPoints,t.image.width/t.image.height),s=new Vd(o,i);return s.position.copy(new H(0,0,0)),s.name="videoCoverMesh",s});return e&&(this.children.includes(this.coverMesh)||(this.add(e),this.coverMesh=e)),e})}addVideoMesh(){return ei(this,null,function*(){var e;if(this.children.includes(this.videoMesh))return;const t=yield ei(this,null,function*(){if(this.videoMesh)return this.videoMesh;if(!this.src)return;const i=this.getVideoTexture(this.src),o=new st({transparent:!1,map:i}),s=yield new Promise(l=>{i.metadataLoaded?l(Ba(this.objectFit,this.cornerPoints,i.image.videoWidth/i.image.videoHeight)):i.addEventListener("videoLoaded",()=>l(Ba(this.objectFit,this.cornerPoints,i.image.videoWidth/i.image.videoHeight)))}),a=new Vd(s,o);return a.name="videoMesh",a.position.copy(new H(0,0,0)),a});if(!t)return;this.domEvents.addAutoBindEventListener(t,"click",()=>{!this.videoInstance.paused&&this.videoInstance.muted?this.videoInstance.muted=!1:this.pause()},{noEmitWhenHide:!0});const r=t.material.map.image;return(e=this.onVideoReady)==null||e.call(this,r),r.addEventListener("playing",()=>{this.coverMesh||this.remove(this.buttonMesh),this.render()}),r.addEventListener("pause",()=>{this.videoInstance.paused&&(this.showPauseUI(),this.render())}),this.children.includes(this.videoMesh)||(this.add(t),this.videoMesh=t,this.videoInstance=r),t})}addButtonMesh(){return ei(this,null,function*(){if(this.children.includes(this.buttonMesh))return;const e=yield ei(this,null,function*(){var t,r,i,o;if(this.buttonMesh)return this.buttonMesh;const s=(r=(t=this.videoMesh)==null?void 0:t.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3]))!=null?r:1/0,a=(o=(i=this.coverMesh)==null?void 0:i.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3]))!=null?o:1/0,l=this.cornerPoints[0].distanceTo(this.cornerPoints[3]),u=Math.min(s,a,l)/l*.3,{texture:c,transparent:d}=yield this.getImageTexture(this.buttonSrc),h=Ba("contain",this.cornerPoints,c.image.width/c.image.height),f=new Vd(h,new d6(c));f.position.copy(new H(0,0,0)),f.name="buttonMesh",f.scale.set(u,u,u),this.domEvents.addAutoBindEventListener(f,"click",()=>{this.play()},{noEmitWhenHide:!0});const p=ho(h).multiplyScalar(td.Z_FIGHTING_OFFSET);return f.position.add(p),f});return this.children.includes(this.buttonMesh)||(this.add(e),this.buttonMesh=e),e})}getImageTexture(e){return ei(this,null,function*(){var t,r;if((t=this.ImageTextureMap)!=null&&t.has(e))return this.ImageTextureMap.get(e);const i=yield hw(e);return(r=this.ImageTextureMap)==null||r.set(e,i),i})}getVideoTexture(e){var t,r;if((t=this.videoTextureMap)!=null&&t.has(e))return this.videoTextureMap.get(e);const i=l6(e);return(r=this.videoTextureMap)==null||r.set(e,i),i}};var p6=Object.defineProperty,bg=Object.getOwnPropertySymbols,v6=Object.prototype.hasOwnProperty,m6=Object.prototype.propertyIsEnumerable,cf=(n,e,t)=>e in n?p6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wg=(n,e)=>{for(var t in e||(e={}))v6.call(e,t)&&cf(n,t,e[t]);if(bg)for(var t of bg(e))m6.call(e,t)&&cf(n,t,e[t]);return n},xg=(n,e,t)=>(cf(n,typeof e!="symbol"?e+"":e,t),t);let Iw=class df{constructor(){xg(this,"cache_raycasterDistance",new Map),xg(this,"cache_visible",new Map)}clear(){this.cache_visible.clear(),this.cache_raycasterDistance.clear()}static generateCameraTagKey(e,t,r=3){const i=wg(wg({},t.five.getCurrentState()),e),o=i.mode==="Panorama"?t.workUtil.getObserverPosition(i.panoIndex):t.five.camera.position;return o?[o.x.toFixed(r),o.y.toFixed(r),o.z.toFixed(r),t.id].join(","):void 0}getVisible(e,t,r=1){const i=df.generateCameraTagKey(t,e,r);if(i)return this.cache_visible.get(i)}setVisible(e,t,r,i=1){const o=df.generateCameraTagKey(t,e,i);o&&this.cache_visible.set(o,r)}};function xc(n){return Object.entries(n)}function Pc(n){var e,t;typeof n.visibleConfig=="object"&&n.visibleConfig.keep&&(n.visibleConfig.keep==="visible"?n.visibleConfig={keep:n.visibleConfig.keep,visibleFiveMode:(e=n.visibleConfig)==null?void 0:e.visibleFiveMode}:n.visibleConfig.keep==="hidden"&&(n.visibleConfig={keep:n.visibleConfig.keep})),typeof n.unfoldedConfig=="object"&&(n.unfoldedConfig.disableFold&&(n.unfoldedConfig={keep:"unfolded"}),n.unfoldedConfig.disableUnfold&&(n.unfoldedConfig={keep:"folded"}),n.unfoldedConfig.keep&&(n.unfoldedConfig={keep:n.unfoldedConfig.keep}));const r=(t=n.initialState)!=null?t:{};return typeof n.unfoldedConfig=="object"&&(n.unfoldedConfig.keep==="unfolded"?r.unfolded=!0:n.unfoldedConfig.keep==="folded"&&(r.unfolded=!1)),typeof n.visibleConfig=="object"&&(n.visibleConfig.keep==="visible"?r.visible=!0:n.visibleConfig.keep==="hidden"&&(r.visible=!1)),n.initialState=r,n}var g6=Object.defineProperty,y6=Object.defineProperties,A6=Object.getOwnPropertyDescriptors,Pg=Object.getOwnPropertySymbols,b6=Object.prototype.hasOwnProperty,w6=Object.prototype.propertyIsEnumerable,hf=(n,e,t)=>e in n?g6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x6=(n,e)=>{for(var t in e||(e={}))b6.call(e,t)&&hf(n,t,e[t]);if(Pg)for(var t of Pg(e))w6.call(e,t)&&hf(n,t,e[t]);return n},P6=(n,e)=>y6(n,A6(e)),dn=(n,e,t)=>(hf(n,typeof e!="symbol"?e+"":e,t),t);class E6 extends ow{constructor(e){super(e),dn(this,"tags",[]),dn(this,"cache",new Iw),dn(this,"config",t6),dn(this,"renderQueue",new Map),dn(this,"params"),dn(this,"mediaStore",HE({currentMediaElement:null})),dn(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),dn(this,"domEvents",new Zh(this.five)),dn(this,"_cache_pointTag"),dn(this,"_cache_2DPointTag"),dn(this,"_cache_css3DTag"),dn(this,"_container",null),dn(this,"timeoutIds",[]),dn(this,"whyHide",t=>{const r=this.getTagById(t);return r?r.whyHide():{reason:`tag ${t} not found`}}),dn(this,"loadVideoFirstFrame",()=>{i6&&this.hooks.emit("loadVideoFirstFrame")}),dn(this,"tagsDo",(t,r,i=!0)=>{let o=[...t??this.tags].sort((u,c)=>u.getSquaredDistance()-c.getSquaredDistance());this.timeoutIds.forEach(u=>clearTimeout(u)),this.timeoutIds.length=0;for(let u=0;u<20;u++){const c=o[u];c&&(r(c),i&&(c._updating=!1))}o=o.slice(20);const s=o.length>1e3,a=s?30:17,l=s?1:3;for(let u=0;u<o.length;u+=l){const c=[];for(let h=0;h<l;h++)o[u+h]&&c.push(o[u+h]);c.forEach(h=>{i&&(h._updating=!0)});const d=setTimeout(()=>{c.forEach(h=>{r(h),i&&(h._updating=!1)})},u*a);this.timeoutIds.push(d)}}),this.mediaStore.subscribe(({currentMediaElement:t})=>{this.tags.forEach(r=>{var i;if(r.mediaPlane instanceof kw&&t!==r.mediaPlane.videoInstance){if(!((i=r.mediaPlane.videoInstance)!=null&&i.src)||t===r.mediaPlane.videoInstance)return;r.mediaPlane.pause()}})})}get container(){var e;return this._container||((e=this.five.getElement())==null?void 0:e.parentElement)}set container(e){this._container=e}set tagsLengthWillUpdate(e){e&&(this._cache_pointTag=this.tags.filter(t=>t.stickType==="2DPoint"||t.stickType==="3DPoint").filter(t=>t.position),this._cache_2DPointTag=this.tags.filter(t=>t.stickType==="2DPoint").filter(t=>t.position),this._cache_css3DTag=this.tags.filter(t=>t.stickType==="3DPoint"||t.stickType==="Plane"||t.stickType==="Model"&&t.contentType==="MediaModel").filter(t=>{const r=t.computeRenderType();return r==="BehindDom"||r==="Dom"}))}get filterPointTag(){var e;return(e=this._cache_pointTag)!=null?e:[]}get filter2DPointTag(){var e;return(e=this._cache_2DPointTag)!=null?e:[]}get filterCSS3DTag(){var e;return(e=this._cache_css3DTag)!=null?e:[]}updateFive(e){super.updateFive(e),this.domEvents.dispose(),this.domEvents=new Zh(e)}addRenderQueue(e){var t,r;const{type:i,keys:o=[],tags:s=[]}=e;this.renderQueue.has(i)?this.renderQueue.set(i,{keys:Array.from(new Set([...(t=this.renderQueue.get(i).keys)!=null?t:[],...o])),tags:Array.from(new Set([...(r=this.renderQueue.get(i).tags)!=null?r:[],...s]))}):this.renderQueue.set(i,{keys:o,tags:s})}getTagById(e){const t=this.tags.find(r=>r.id===e);if(!t){console.warn(`getTagById Error: can't find tag id: ${e}`);return}return t}pauseCurrentMedia(){this.mediaStore.set({currentMediaElement:null})}getTagConfig(e,t){var r,i,o;const s=this.calculateTagConfig(e,{useCache:t==null?void 0:t.useCache}),a=(r=t==null?void 0:t.fiveMode)!=null?r:this.five.getCurrentState().mode,l=(i=s.configWithFiveMode)==null?void 0:i[a];return(o=l??s)!=null?o:{}}getPositions(e){if(N8(e))return e.position;if(To(e))return e.data.mediaPosition;if(W8(e))return n6(this.five.camera.position,Xe(e.position),Xe(e.normal))}addObjectClickHandler(e,t,r){if(!t||!this.domEvents)return()=>{};const i=()=>!(!e.currentVisible||e.loading),o=s=>{if(!i())return!1;r(s.origDomEvent)};return this.domEvents.addEventListener(t,"click",o),()=>{var s;(s=this.domEvents)==null||s.removeEventListener(t,"click",o)}}checkDisposed(){return this.store.disposed?(console.error("PanoTagPluginController has been disposed"),!0):!1}calculateTagConfig(e,t){var r,i,o,s,a;const l=(r=t==null?void 0:t.useCache)!=null?r:!0;if(!e)return(i=this.config.globalConfig)!=null?i:{};if(l){if((o=e==null?void 0:e.computedConfig)!=null&&o._isMerged)return e.computedConfig;if((s=e==null?void 0:e.config)!=null&&s._isMerged)return e.config}const u={},c={},d={};this.config.contentTypeConfig&&Object.entries(this.config.contentTypeConfig).forEach(([y,E])=>{var C,V;const M=y,z=M.split("-"),U=y.startsWith("["),D=U?z[0].slice(1,-1):void 0,m=U?z.slice(1):z,A=D?["PanoramaLike","ModelLike"].includes(D)?(C=c[D])!=null?C:c[D]={}:(V=d[D])!=null?V:d[D]={}:u;if(!A[M]){if(m.length===0&&(A[M]=E),m.length===1){const[x]=m;(e.contentType===x||x==="Any")&&(A[M]=E)}if(m.length===2){const[x="Any",S="Any"]=m;x==="Mixin"&&e.contentType===S&&(A[M]=E),(e.stickType===x||x==="Any")&&(e.contentType===S||S==="Any")&&(A[M]=E)}if(m.length===3){const[x="Any",S,$]=m;if(S==="Audio"&&e.contentType==="Audio"){const T=e;(T.stickType===x||x==="Any")&&T.data.appearance===$&&(A[M]=E)}}}});const h=(a=e.initialConfig)!=null?a:{},f=xt({},Vw,this.config.globalConfig,...Object.values(u)),p=xt({},f,h),v={},b=Object.values(ws.Mode);xc(c).forEach(([y,E])=>{b.forEach(C=>{(y==="PanoramaLike"&&Ls(C)||y==="ModelLike"&&Ar(C))&&(v[C]=xt({},f,...Object.values(E),h,{_isMerged:!0}))})}),xc(d).forEach(([y,E])=>{const C=v[y];v[y]=xt({},f,C,...Object.values(E),h,{_isMerged:!0})});const g=P6(x6({},p),{configWithFiveMode:v});return Pc(g),Object.values(v).forEach(y=>Pc(y)),g._isMerged=!0,g}}var C6=Object.defineProperty,S6=(n,e,t)=>e in n?C6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ri=(n,e,t)=>(S6(n,typeof e!="symbol"?e+"":e,t),t);let O6=class extends E6{constructor(e){super(e),Ri(this,"rendererMap",new Map),Ri(this,"contentTypeMap",new Map),Ri(this,"group",new Zt),Ri(this,"imagePlaneGroup",new Zt),Ri(this,"gltfObjectGroup",new Zt),Ri(this,"enabledModelTagSet",new Set),Ri(this,"temporaryState",{visible:!0}),Ri(this,"TagContainerSvelte"),this.group.name="PanoTagPluginModelGroup",this.gltfObjectGroup.name="PanoTagPluginGLTFObjectGroup",this.imagePlaneGroup.name="ImagePlaneGroup",this.group.add(this.gltfObjectGroup),this.group.add(this.imagePlaneGroup)}registerRenderer(e,t,r){var i;this.rendererMap.set(e,{renderer:t,usePoint:(i=r==null?void 0:r.usePoint)!=null?i:!1})}bindRenderer(e,t){this.contentTypeMap.set(e,t)}disposeAllCSS3DContainer(){for(const[,e]of this.store.css3DRenderDisposer)e==null||e.forEach(t=>t==null?void 0:t());this.store.css3DRenderDisposer=new Map}clearUnusedPanelTag(){this.filter2DPointTag.forEach(e=>{var t;(t=e.tag3DContentSvelte)==null||t.dispose(),e.tag3DContentSvelte=void 0});for(const[e,t]of this.store.css3DRenderDisposer){const r=this.getTagById(e);(!r||r.stickType==="2DPoint")&&(t==null||t.forEach(i=>i==null?void 0:i()),this.store.css3DRenderDisposer.delete(e))}}};function $6(n,e){e.forEach(t=>{const r=new tp(.02,16,16),i=[],o=[new st({color:16776960}),new st({color:16711935}),new st({color:16711680}),new st({color:65535})];if(t.position.length===4)t.position.forEach((s,a)=>{const l=o[a],u=new nt(r,l);u.position.copy(qi(s)),i.push(u)});else{const s=o[0],a=new nt(r,s);a.position.copy(qi(t.position)),i.push(a)}i.forEach(s=>{s.material.depthTest=!1,n.scene.add(s)})})}var M6=Object.defineProperty,V6=(n,e,t)=>e in n?M6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Td=(n,e,t)=>(V6(n,typeof e!="symbol"?e+"":e,t),t);let T6=class{constructor(e){Td(this,"plugin"),Td(this,"logBound",!1),Td(this,"bindLogByObject",t=>{Object.getOwnPropertyNames(t).forEach(r=>{try{typeof t[r]=="function"&&(t[r]=new Proxy(t[r],{apply:(i,o,s)=>(["render"].includes(r)||this.log(r,{obj:t},...s),i.apply(o,s))}))}catch{}})}),this.plugin=e}get debug(){return this.plugin.debug}addDebugPoints(){try{$6(this.plugin.five,this.plugin.tags)}catch(e){console.error(e)}}bindLog(){this.logBound||(this.logBound=!0,this.bindLogByObject(this.plugin),this.bindLogByObject(this.plugin.constructor.prototype))}log(e,...t){let r=new Error().stack;console.debug(`%cPanoTagPlugin%c${e}`,"background-color: #35e0ed; color: black; padding:0 6px; border-radius: 3px","padding: 0 3px; color: #f3f47c",...t,{stack:r})}closeIntersectRaycaster(){this.plugin.tags.forEach(e=>{var t;Al((t=e==null?void 0:e.initialConfig)==null?void 0:t.visibleConfig).intersectRaycaster&&(e.initialConfig.visibleConfig.intersectRaycaster.enabled=!1)}),this.plugin.changeGlobalConfig({visibleConfig:{intersectRaycaster:{enabled:!1}}})}};var _6=Object.defineProperty,k6=Object.defineProperties,I6=Object.getOwnPropertyDescriptors,Eg=Object.getOwnPropertySymbols,j6=Object.prototype.hasOwnProperty,D6=Object.prototype.propertyIsEnumerable,Cg=(n,e,t)=>e in n?_6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L6=(n,e)=>{for(var t in e||(e={}))j6.call(e,t)&&Cg(n,t,e[t]);if(Eg)for(var t of Eg(e))D6.call(e,t)&&Cg(n,t,e[t]);return n},R6=(n,e)=>k6(n,I6(e));function _d(n,e,t){var r,i,o,s,a;const l=(r=t==null?void 0:t.useCache)!=null?r:!0;if(!n)return(i=e.globalConfig)!=null?i:{};if(l){if((o=n==null?void 0:n.computedConfig)!=null&&o._isMerged)return n.computedConfig;if((s=n==null?void 0:n.config)!=null&&s._isMerged)return n.config}const u={},c={},d={};e.contentTypeConfig&&Object.entries(e.contentTypeConfig).forEach(([y,E])=>{var C,V;const M=y,z=M.split("-"),U=y.startsWith("["),D=U?z[0].slice(1,-1):void 0,m=U?z.slice(1):z,A=D?["PanoramaLike","ModelLike"].includes(D)?(C=c[D])!=null?C:c[D]={}:(V=d[D])!=null?V:d[D]={}:u;if(!A[M]){if(m.length===0&&(A[M]=E),m.length===1){const[x]=m;(n.contentType===x||x==="Any")&&(A[M]=E)}if(m.length===2){const[x="Any",S="Any"]=m;x==="Mixin"&&n.contentType===S&&(A[M]=E),(n.stickType===x||x==="Any")&&(n.contentType===S||S==="Any")&&(A[M]=E)}if(m.length===3){const[x="Any",S,$]=m;if(S==="Audio"&&n.contentType==="Audio"){const T=n;(T.stickType===x||x==="Any")&&T.data.appearance===$&&(A[M]=E)}}}});const h=(a=n.initialConfig)!=null?a:{},f=xt({},Vw,e.globalConfig,...Object.values(u)),p=xt({},f,h),v={},b=Object.values(ws.Mode);xc(c).forEach(([y,E])=>{b.forEach(C=>{(y==="PanoramaLike"&&Ls(C)||y==="ModelLike"&&Ar(C))&&(v[C]=xt({},f,...Object.values(E),h,{_isMerged:!0}))})}),xc(d).forEach(([y,E])=>{const C=v[y];v[y]=xt({},f,C,...Object.values(E),h,{_isMerged:!0})});const g=R6(L6({},p),{configWithFiveMode:v});return Pc(g),Object.values(v).forEach(y=>Pc(y)),g._isMerged=!0,g}const kd=Math.PI*2;function ff(n){return(n%kd+kd)%kd}function jw(n){return{longitude:ff(-Math.atan2(n.x,-n.z)),latitude:-Math.asin(n.y/1)}}var z6=Object.defineProperty,Sg=Object.getOwnPropertySymbols,B6=Object.prototype.hasOwnProperty,F6=Object.prototype.propertyIsEnumerable,Og=(n,e,t)=>e in n?z6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$g=(n,e)=>{for(var t in e||(e={}))B6.call(e,t)&&Og(n,t,e[t]);if(Sg)for(var t of Sg(e))F6.call(e,t)&&Og(n,t,e[t]);return n},H6=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function U6(n,e,t){return H6(this,null,function*(){var r,i;if(!e)return;const o=(r=t==null?void 0:t.distance)!=null?r:3,s=new Ap(n),a=n.camera.position.clone().sub(e).setY(0).normalize(),l=n.state.mode==="Mapview"?n.state.fov:60,u=o,c=u*Math.cos(Pn.degToRad(l/2)),d=u*Math.sin(Pn.degToRad(l/2));let h=0;const f=[],p=g=>{const y=Pn.degToRad(g);return a.clone().applyAxisAngle(new H(0,1,0),y).clone().multiplyScalar(c).add(new H(0,d,0)).add(e)};for(;h!==360;){let g=0;const y=p(h);if((E=>{const C=E.distanceTo(y),V=new oo(E,y.clone().sub(E).normalize()),M=s.model.intersectRaycaster(V,void 0,!0)[0],z=M==null?void 0:M.distance;Ge(z)?z>C&&(g+=1):g+=1})(e),f[g]=h,g===1)break;h+=30}const v=p((i=f[1])!=null?i:0),b=jw(e.clone().sub(v).normalize());if(n.state.mode==="Mapview")return n.updateCamera($g({offset:e,distance:o},b),800);n.setState($g({mode:"Mapview",offset:e,distance:o},b)),yield n.ready()})}function pf(n){const e=(()=>{if(To(n)&&n.matrix){const t=new Ue().fromArray(n.matrix);return n.data.mediaPosition.map(r=>Xe(r).clone().applyMatrix4(t))}else return n.position})();return px(e)}function Mg(n){const e=pf(n);return Yn(...Array.isArray(e)?e:[e])}function au(n,e){if(n===void 0)return;const{min:t,max:r}=e??{};if(!(t===void 0&&r===void 0))return!(typeof r=="number"&&r<n||typeof t=="number"&&t>n)}function Vg(n){const e=n.split("?")[0].split(".").pop();return e?e.toLowerCase():""}function N6(n,e){if(!n)return 0;const t=n.observers;if(!e||!t)return console.error("getFloorIndex: invalid arguments: ",{point:e,observer:t}),0;const r=[];t.forEach(o=>{var s,a,l;const u=(a=(s=o.floorIndex)!=null?s:o.floor_index)!=null?a:0;r[u]||(r[u]=[]),r[u].push(cl(o.position,(l=n.options)==null?void 0:l.transform).y)});const i=r.map(o=>o.reduce((s,a)=>s+a,0)/o.length);for(let o=i.length-1;o>0;o--)if(e.y>=i[o])return o;return 0}function qo(){let n,e;return{promise:new Promise((t,r)=>{n=t,e=r}),resolve:n,reject:e}}var W6=Object.defineProperty,G6=Object.defineProperties,Q6=Object.getOwnPropertyDescriptors,Ec=Object.getOwnPropertySymbols,Dw=Object.prototype.hasOwnProperty,Lw=Object.prototype.propertyIsEnumerable,Id=Math.pow,vf=(n,e,t)=>e in n?W6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mn=(n,e)=>{for(var t in e||(e={}))Dw.call(e,t)&&vf(n,t,e[t]);if(Ec)for(var t of Ec(e))Lw.call(e,t)&&vf(n,t,e[t]);return n},Tg=(n,e)=>G6(n,Q6(e)),X6=(n,e)=>{var t={};for(var r in n)Dw.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Ec)for(var r of Ec(n))e.indexOf(r)<0&&Lw.call(n,r)&&(t[r]=n[r]);return t},ot=(n,e,t)=>(vf(n,typeof e!="symbol"?e+"":e,t),t),lu=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class nv{constructor(e,t){ot(this,"plugin"),ot(this,"id"),ot(this,"contentType"),ot(this,"stickType"),ot(this,"enabled"),ot(this,"config"),ot(this,"data"),ot(this,"state"),ot(this,"temporaryState",{visible:!0}),ot(this,"originPosition"),ot(this,"position"),ot(this,"fiveState"),ot(this,"model"),ot(this,"matrix"),ot(this,"screenPosition"),ot(this,"normal"),ot(this,"mediaPlane"),ot(this,"hooks"),ot(this,"zIndex"),ot(this,"play"),ot(this,"pause"),ot(this,"tag3DContentSvelte"),ot(this,"dom"),ot(this,"contentDom"),ot(this,"initialConfig"),ot(this,"computedConfig"),ot(this,"cache"),ot(this,"entryFromModel"),ot(this,"_updating",!1),ot(this,"hoverEnabled"),ot(this,"ready",()=>{const{promise:v,resolve:b}=qo();if(!this._updating)b();else{const g=setInterval(()=>{this._updating||(clearInterval(g),b())},17);setTimeout(()=>{clearInterval(g),b()},300)}return v});var r,i,o,s,a,l;this.plugin=e;const u=ev(t);t.stickType=u;const c=JSON.parse(JSON.stringify(t.data)),d=(r=t.initialConfig)!=null?r:t.config?JSON.parse(JSON.stringify(t.config)):{};t.initialConfig=d;const h=_d(t,e.config),f=this.getConfig(t);t.config=f,this.id=(i=t.id)!=null?i:ul(),this.enabled=(o=t.enabled)!=null?o:!0,this.contentType=t.contentType,this.hoverEnabled=(a=(s=f.popoverConfig)==null?void 0:s.enabled)!=null?a:!0,this.data=(l=f.initialData)!=null&&l.important?xt(t.data,c,f.initialData):xt(t.data,f.initialData,c);let p;typeof f.unfoldedConfig=="object"?f.unfoldedConfig.keep==="unfolded"?p=!0:f.unfoldedConfig.keep==="folded"?p=!1:p=!this.can("fold"):p=!this.can("fold"),this.state=Mn({visible:void 0,unfolded:p},f.initialState),this.isPopoverConfigEnabled()&&(this.state.unfolded=!1),this.originPosition=t.position,t.originPosition=this.originPosition,this.position=(()=>{const v=t.originPosition;if(!v)return;const b=e.workUtil.transform;return Array.isArray(v)&&v.length===4?v.map(Xe).map(g=>cl(g,b).toArray()):cl(Xe(v),b).toArray()})(),this.matrix=t.matrix?(()=>{const v=new Ue().fromArray(t.matrix);return v.premultiply(e.workUtil.transform),v.elements})():t.matrix,this.initialConfig=d,this.computedConfig=h,this.stickType=u,this.config=t.config,this.fiveState=t.fiveState,this.normal=t.normal,this.cache=new Iw,this.hooks=new Cn,Object.keys(t).forEach(v=>{this[v]===void 0&&t[v]!==void 0&&(this[v]=t[v])})}get visible(){var e;return((e=this.temporaryState)==null?void 0:e.visible)!==!1&&this.state.visible!==!1&&this.enabled!==!1}get five(){return this.plugin.five}get fiveUtil(){return this.plugin.fiveUtil}get workUtil(){return this.plugin.workUtil}get centerPosition(){const e=pf(this);return Yn(...Array.isArray(e)?e:[e])}get currentConfig(){var e,t;const r=_d(this,this.plugin.config,{useCache:!0}),i=this.five.getCurrentState().mode,o=(e=r.configWithFiveMode)==null?void 0:e[i];return(t=o??r)!=null?t:{}}get currentVisible(){return!(!this.plugin.state.enabled||!this.plugin.state.visible||!this.enabled||!this.state.visible)}get sharedCache(){return this.plugin.cache}applyVisible(){throw new Error("Method not implemented.")}find(e){return lu(this,null,function*(){var t;const r=this.fiveState;if(!this.fiveState)return this;const i=(t=e==null?void 0:e.targetMode)!=null?t:this.five.state.mode;if(i==="Panorama"){const o=r==null?void 0:r.panoIndex;if(Yi(o))return this;const s=this.workUtil.getObserverPosition(o),a=this.centerPosition.clone().sub(s).normalize();this.five.setState(Mn({mode:"Panorama",workCode:this.workUtil.workCode,panoIndex:o},jw(a))),yield this.five.ready()}else i==="Mapview"&&(yield U6(this.five,this.centerPosition,e==null?void 0:e.pointConfig));return this})}blink(e){return lu(this,null,function*(){var t,r,i,o;yield this.ready();const s=(t=this.enabled)!=null?t:!0,a=(r=this.state)==null?void 0:r.visible,l=s&&a;l===!1&&(this.state.visible=!0,this.enabled=!0,this.applyVisible(),this.plugin.render(),this.computeRenderType()!=="Mesh"?yield new Promise(c=>lu(this,null,function*(){if(this.dom||this.contentDom){c();return}const d=setInterval(()=>{(this.dom||this.contentDom)&&(c(),clearInterval(d))},16.7)})):this.stickType==="Model"&&!((i=this.model)!=null&&i.object)?yield(o=this.model)==null?void 0:o.promise:this.stickType==="Plane"&&(yield new Promise(c=>lu(this,null,function*(){if(this.mediaPlane){c();return}const d=setInterval(()=>{this.mediaPlane&&(c(),clearInterval(d))},16.7)}))),this.dom&&(this.dom.style.visibility="hidden"),this.contentDom&&(this.contentDom.style.visibility="hidden"));const u=(()=>{var c,d,h;const f=[];return f.push(this.dom),f.push((d=(c=this.tag3DContentSvelte)==null?void 0:c.css3DInstance)==null?void 0:d.container),f.push((h=this.model)==null?void 0:h.object),f.push(this.mediaPlane),f.filter(Boolean)})();if(!u.length){console.warn("tagDom is empty");return}yield(l?$w:U8)(u,Mn({begin:()=>{l===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))},updateRender:()=>{this.five.needsRender=!0}},e)).finished,s===!1&&(this.enabled=!1,this.updateVisible()),a===!1&&this.updateVisible(),l===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))})}unfold(){}unfoldAndFoldOthers(){}fold(){}enable(){this.enabled=!0,this.hooks.emit("enable"),this.applyVisible()}disable(){this.enabled=!1,this.hooks.emit("disable"),this.applyVisible()}changeData(e,t=!0){return this.setData(e,t)}changePosition(e){return this.setPosition(e)}setData(e,t=!0){t?this.data=xt(this.data,e):this.data=Mn(Mn({},this.data),e),this.hooks.emit("dataChanged",this.data)}setPosition(e){throw new Error("Method not implemented.")}set(e,t=!0){this.plugin.tagsLengthWillUpdate=!0,t?xt(this,e):Object.assign(this,e),this.cache.clear()}updateConfig(){var e;const t=this.getConfig(void 0,{useCache:!1});this.computedConfig=t;const r=this.getConfig();if(this.config=r,this.config.initialData){const i=JSON.parse(JSON.stringify(this.data));this.data=(e=r.initialData)!=null&&e.important?xt(this.data,i,r.initialData):xt(this.data,r.initialData,i)}this.cache.clear()}updateVisible(){this.enabled?(this.state.visible=this.getVisible(),this.applyVisible()):this.applyVisible(),this._updating=!1}updateZIndex(){const e=this.getSquaredDistance();this.zIndex=Math.round((1e4-(e??0))*100)}getConfig(e,t){var r,i,o;const s=_d(e??this,this.plugin.config,{useCache:t==null?void 0:t.useCache}),a=(r=t==null?void 0:t.fiveMode)!=null?r:this.five.getCurrentState().mode,l=(i=s.configWithFiveMode)==null?void 0:i[a];return(o=l??s)!=null?o:{}}getDistance(e,t=3){const r=Mn(Mn({},this.five.getCurrentState()),e),{panoIndex:i,mode:o}=r,s=o==="Panorama"?this.workUtil.getObserverPosition(i):this.five.camera.position,a=this.centerPosition;return!s||!a?-1:s.distanceTo(a)}getSquaredDistance(){const e=this.five.camera.position;let t;return Array.isArray(this.position[0])?t=this.position[0]:t=this.position,Id(t[0]-e.x,2)+Id(t[1]-e.y,2)+Id(t[2]-e.z,2)}getVisible(e){if(!this.enabled||!this.plugin.state.enabled||!this.fiveUtil.model)return!1;const t=Mn(Mn({},this.five.getCurrentState()),e);let r=this.cache.getVisible(this,t);return Yi(r)&&(r=this.computeVisible(t).value,this.cache.setVisible(this,t,r)),r}getUnfoldedByPanoIndex(e){return this.currentVisible?this.computeUnfoldedByPanoIndex(e)&&this.getUnfoldedByCamera():void 0}getUnfoldedByCamera(){return this.currentVisible?this.computeUnfoldedByCamera():void 0}can(e){var t,r;if((e==="fold"||e==="unfold")&&((r=(t=this.currentConfig)==null?void 0:t.popoverConfig)==null?void 0:r.enabled)===!0)return!1;const i=this.currentConfig;if(!i||typeof i!="object")return!0;if(e==="show"||e==="hide"){if(!i.visibleConfig||typeof i.visibleConfig!="object")return!0;if(e==="show"&&i.visibleConfig.keep==="hidden"||e==="hide"&&i.visibleConfig.keep==="visible")return!1}if(e==="fold"||e==="unfold"){if(!i.unfoldedConfig||typeof i.unfoldedConfig!="object")return!0;if(e==="fold"&&i.unfoldedConfig.keep==="unfolded"||e==="unfold"&&i.unfoldedConfig.keep==="folded")return!1}return!0}onClick(e){}computeRenderType(){const e=(()=>{if(this.stickType==="3DPoint")return"Dom";const t=this.getConfig();if(!t||typeof t!="object"||!t.renderType)return;const r=this.data.mediaData;if(!(!r||r.length===0)&&t.renderType==="Mesh"){if(Q8(this)){if(r.length===1){if(r[0].type==="Video")return navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"Dom":"Mesh";if(r[0].type==="Image")return Vg(r[0].url)==="gif"?"Dom":"Mesh"}}else if(To(this))return r.length===1&&r[0].type==="Image"?Vg(r[0].url)==="gif"?"Dom":"Mesh":"BehindDom"}})();return e??"Dom"}computeVisible(e){const t=Mn(Mn({},this.five.getCurrentState()),e),{panoIndex:r,mode:i}=t,o=[];return(()=>{var s,a,l,u;const c=(s=this.getConfig().visibleConfig)!=null?s:{};if(typeof c=="function")return{value:c(this.five,{tag:this,distance:this.getDistance(t,void 0)}),checkedList:o,reason:"config function result"};{if(c.keep==="hidden")return{value:!1,checkedList:o,reason:"config.keep is hidden"};if(c.keep==="visible")return{value:!0,checkedList:o,reason:"config.keep is visible"};const d=this.computeVisibleByFiveMode(c,i);if((d==null?void 0:d.value)===!1)return d;if(c.followModelVisibility===!0&&["poincare","aerophoto","sand"].includes(this.workUtil.fromType)&&(i==="Floorplan"||i==="Mapview")){const h=this.computeVisibleByFloorIndex(),{value:f}=h,p=X6(h,["value"]);if(f===!1)return Mn({value:!1,checkedList:o,reason:"followModelVisibility check failed"},p)}if(Ls(i)&&c.visiblePanoIndex!==void 0&&c.visiblePanoIndex!=="all"&&r!==void 0){if(o.push("visiblePanoIndex"),Array.isArray(c.visiblePanoIndex)&&!c.visiblePanoIndex.includes(r))return{value:!1,checkedList:o,reason:`current panoIndex is not included in visiblePano. currentPanoIndex: ${r}, visiblePanoIndex: ${c.visiblePanoIndex}`};if(c.visiblePanoIndex==="current"&&r!==((a=this.fiveState)==null?void 0:a.panoIndex))return{value:!1,checkedList:o,reason:`current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${r}, tag.panoIndex: ${(l=this.fiveState)==null?void 0:l.panoIndex}`}}if(c.visibleDistance!==void 0&&(o.push("visibleDistance"),c.visibleDistance!=="unLimited")){const h=this.getDistance(t,1);if(au(h,c.visibleDistance)===!1)return{value:!1,checkedList:o,panoIndex:r,visibleDistance:c.visibleDistance,reason:`distance is not in visibleDistance. distance: ${h}, visibleDistance: ${c.visibleDistance.min} - ${c.visibleDistance.max}`}}if(c.intersectRaycaster!==!1&&(typeof c.intersectRaycaster!="object"||c.intersectRaycaster.enabled!==!1)){if(o.push("intersectRaycaster"),r===void 0)return{value:!1,checkedList:o,reason:`intersectRaycaster check failed: panoIndex is ${r}`};if(r===((u=this.fiveState)==null?void 0:u.panoIndex))o.push("intersectCheckSkiped");else{const h=this.computeVisibleByIntersect(r);if(h.value===!1)return Object.assign(h,{checkedList:o})}}return{value:!0,checkedList:o,reason:"all check passed"}}})()}computeVisibleByFiveMode(e,t){const r=()=>{var i,o;let s=typeof e.visibleFiveMode=="function"?e.visibleFiveMode(this):e.visibleFiveMode;if(s||(s=(o=(i=this.fiveState)==null?void 0:i.mode)!=null?o:this.workUtil.observers.length?"Panorama":"ModelLike"),Array.isArray(s))return s.includes(t);if(s==="ModelLike")return Ar(t);if(s==="PanoramaLike")return!Ls(t);if(s==="all")return!0;if(typeof s=="string")return s===t};if((()=>{var i;const o=r();if(Ge((i=this.fiveState)==null?void 0:i.panoIndex)&&e.entryFromModel){if(Ar(t)&&o?this.entryFromModel=!1:this.entryFromModel=!0,Ar(t))return!0}else this.entryFromModel=!1;return o})()===!1)return{value:!1,reason:"current mode is not included in visibleFiveMode",visibleFiveMode:e.visibleFiveMode,mode:t}}computeVisibleByIntersect(e){var t,r,i,o;const s=Al(Al((t=this.getConfig().visibleConfig)!=null?t:{}).intersectRaycaster),a=e??this.five.getCurrentState().panoIndex,l=Ls(this.five.getCurrentState().mode)?this.workUtil.getObserverPosition(a):this.five.camera.position;if(l===void 0)return{value:!1,reason:{type:"startPosition is undefined",fivePanoIndex:a}};const u=Pi((()=>{var h;const f=(h=s.checkPoints)!=null?h:"center";return f==="center"?Mg(this):f==="corner"?pf(this):Array.isArray(f)?f:[]})());let c=0,d=0;for(const h of u){const f=new H().subVectors(h,l).normalize();let p;Mo.set(l,f);const[v]=this.fiveUtil.model.intersectRaycaster(Mo);p=v==null?void 0:v.distance;const b=(()=>{if(!To(this))return;const C=this.plugin.tags.filter(To).map(M=>{var z;return(z=M.model)==null?void 0:z.object}).filter(Ge),[V]=Mo.intersectObjects(C,!0);return V})(),g=l.distanceTo(h),y=(r=s.distanceAccuracy)!=null?r:.01;p=Math.min(p??1/0,(i=b==null?void 0:b.distance)!=null?i:1/0),p+y>=g?c++:d++;const E=(o=s.needPassed)!=null?o:1;if(c>=E)return{value:!0}}return d===0?{value:!0}:{value:!1,reason:{type:"intersectRaycaster check failed",passedCount:c,needPassed:s.needPassed,model:this.fiveUtil.model.name}}}computeVisibleByFloorIndex(){var e,t,r,i,o,s,a;let l=0;const u=(e=this.fiveState)==null?void 0:e.panoIndex;u!==void 0?l=(t=this.workUtil.getObserver(u))==null?void 0:t.floorIndex:l=N6(this.workUtil.work,(a=(s=(i=(r=this.model)==null?void 0:r.object)==null?void 0:i.position)!=null?s:(o=this.mediaPlane)==null?void 0:o.position)!=null?a:Mg(this));const c=this.fiveUtil.model.shownFloor;return{value:c===null||c===l,currentFiveFloorIndex:c,tagFloorIndex:l}}computeUnfoldedByPanoIndex(e){const t=this.getConfig().unfoldedConfig;if(t){if(typeof t=="function")return t(this.five,{tag:this,distance:this.getDistance({panoIndex:e})});if(t.keep==="folded")return!1;if(t.keep==="unfolded")return!0;if(t.unfoldDistance&&au(this.getDistance({panoIndex:e}),t.unfoldDistance)===!1)return!1}}computeUnfoldedByCamera(){var e;if(this.entryFromModel&&Ar(this.five.state.mode))return!1;const t=this.getConfig().unfoldedConfig;if(t){if(typeof t=="function")return t(this.five,{tag:this,distance:this.getDistance()});if(t.keep==="folded")return!1;if(t.keep==="unfolded")return!0;if(t.autoUnfold===void 0||t.autoUnfold===!1||t.autoUnfold.enable===!1||!t.autoUnfold.strategy)return;if(t.autoUnfold.strategy==="ScreenPostion"){const r=this.computeTagProject();if(r&&au(r.x,t.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(t.autoUnfold.strategy==="MinimumDistance"){const r=this.plugin.filterPointTag.filter(i=>i.currentVisible).filter(i=>{const o=this.computeTagProject();if(!o)return!1;const{x:s,y:a,z:l}=o;return!(Math.abs(l)>1||Math.abs(s)>1||Math.abs(a)>1)}).map(i=>({tag:i,id:i.id,tagConfig:i.getConfig().unfoldedConfig})).filter(({tagConfig:i})=>{var o,s;return!(typeof i=="function"||i.keep||i.autoUnfold===!1||((o=i.autoUnfold)==null?void 0:o.enable)===!1||((s=i.autoUnfold)==null?void 0:s.strategy)!=="MinimumDistance")}).map(i=>Tg(Mn({},i),{distance:i.tag.getDistance()})).filter(({distance:i,tagConfig:o})=>{const s=o.autoUnfold.distance;return!(s&&au(i,s)===!1)}).sort((i,o)=>i.distance-o.distance).findIndex(i=>i.id===this.id);if(r===-1||!(r<=((e=t.autoUnfold.maxNumber)!=null?e:1)-1))return!1}return t.autoUnfold.strategy!=="FoldWhenMove"}}computeTagProject(){const e=this.centerPosition;if(!e)return;const{x:t,y:r,z:i}=e.project(this.five.camera);if(!(i>1))return{x:t,y:r,z:i}}addObjectClickHandler(e,t,r){if(!t||!this.plugin.domEvents)return()=>{};const i=()=>!(!e.currentVisible||e.loading),o=s=>{if(!i())return!1;r(s.origDomEvent)};return this.plugin.domEvents.addEventListener(t,"click",o),()=>{var s;(s=this.plugin.domEvents)==null||s.removeEventListener(t,"click",o)}}whyHide(){var e;if(!this.plugin.state.enabled)return{reason:`plugin.state.enabled is ${this.plugin.state.enabled}`};if(!this.plugin.state.visible)return{reason:`plugin.state.visible is ${this.plugin.state.visible}`};if(!this.enabled)return{reason:`tag ${this.id} enabled is: ${this.enabled}`};const t=Tg(Mn({},this.computeVisible()),{tagInstance:this});return t.value!==this.state.visible?{reason:", err: 0",info:t}:this.state.visible?{reason:"",info:t}:t.value===!0?{reason:", err: 1",info:t}:{reason:(e=t.reason.type)!=null?e:t.reason,info:t}}destroy(){var e,t;const r=this.plugin.tags.findIndex(i=>i.id===this.id);if(r===-1){console.warn(`Destroy failed: tag ${this.id} not found`);return}this.disable(),(t=(e=this.tag3DContentSvelte)==null?void 0:e.dispose)==null||t.call(e),this.hooks.off(),this.cache.clear(),this.plugin.tags.splice(r,1),this.plugin.tagsLengthWillUpdate=!0,this.plugin.hooks.emit("tagsLengthChange")}isPopoverConfigEnabled(){var e,t;return((t=(e=this.currentConfig)==null?void 0:e.popoverConfig)==null?void 0:t.enabled)===!0}isHoverEnabled(){var e;return!(((e=this.plugin)==null?void 0:e.globalHoverEnabled)===!1||this.hoverEnabled===!1)}}var q6=Object.defineProperty,Y6=(n,e,t)=>e in n?q6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_g=(n,e,t)=>(Y6(n,typeof e!="symbol"?e+"":e,t),t);const K6=new Jt;let J6=class extends nv{constructor(e,t){super(e,t),_g(this,"__Object__"),_g(this,"requestIdleCallbackId")}unfoldAndFoldOthers(){if(this.isPopoverConfigEnabled())return;const e=this.can("fold"),t=this.can("unfold");e&&t&&(this.state.unfolded=!this.state.unfolded,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.state.unfolded&&this.plugin.tags.forEach(r=>{r.id!==this.id&&r.fold()}))}onClick(e){e.target==="TagPoint"&&this.unfoldAndFoldOthers()}applyVisible(){var e,t;this.currentVisible&&this.updateScreenPosition(),(e=this.tag3DContentSvelte)!=null&&e.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible),(t=this.tag3DContentSvelte)==null||t.svelteApp.$set({state:this.plugin.state,temporaryState:this.temporaryState}),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}unfold(){this.isPopoverConfigEnabled()||this.setUnfold(!0)}fold(){this.isPopoverConfigEnabled()||this.setUnfold(!1)}setUnfold(e){if(this.isPopoverConfigEnabled())return;const t=this.can("fold"),r=this.can("unfold");t&&r&&(this.state.unfolded=e,this.hooks.emit(e?"unfolded":"folded"),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))}setPosition(e){this.originPosition=e,this.position=e,this.cache.clear(),this.updateVisible(),this.updateScreenPosition(),this.updateZIndex(),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateScreenPosition(e){var t;if(this.stickType!=="2DPoint"&&this.stickType!=="3DPoint")return;const{force:r=!1}=e??{},i=r?this.state.visible:this.currentVisible,o=(t=this.__Object__)!=null?t:{timeoutId:void 0,inAnimation:!1};if(this.__Object__=o,!i&&this.screenPosition?(o.inAnimation=!0,o.timeoutId=setTimeout(()=>{requestAnimationFrame(()=>{this.currentVisible||(o.inAnimation=!1,this.screenPosition=null,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))})},1e3)):o.timeoutId&&(clearTimeout(o.timeoutId),o.inAnimation=!1,o.timeoutId=void 0),!i&&!o.inAnimation)return;const s=this.computeTagProject();if(s&&this.five.renderer){const a=(()=>{if(!this.currentConfig.simulate3D)return 1;const u=2*Math.tan(.5*this.five.camera.fov/180*Math.PI),c=this.getDistance(void 0,1);return Math.max(Math.min(1-u*c/40,1),.7)})(),l=this.five.renderer.getSize(K6);this.screenPosition={leftPx:(s.x+1)/2*l.x,topPx:(-s.y+1)/2*l.y,scale:a}}else this.screenPosition=null;this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}set(e,t=!0){super.set(e,t),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),e.position&&this.setPosition(this.position)}setData(...e){super.setData(...e),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateUnfoldedByPanoIndex(){if(this.isPopoverConfigEnabled())return;const e=this.getUnfoldedByPanoIndex();if(this.state&&(e!==void 0&&(this.state.unfolded=e),e&&!this.state.visible)){const t=this.getConfig();typeof t.unfoldedConfig=="object"&&t.unfoldedConfig.autoFoldWhenHide!==!1&&(this.state.unfolded=!1)}}computeNormal(){return new H().fromArray(this.normal)}};var Z6=Object.defineProperty,eS=(n,e,t)=>e in n?Z6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fn=(n,e,t)=>(eS(n,typeof e!="symbol"?e+"":e,t),t);const Rw=1,kg=`CSS3DObject@${Rw}`,tS=.00216,nS=.003;let zw=class extends Ai{constructor(e){var t,r,i,o,s;if(Yi(e.cornerPoints)&&Yi(e.width))throw new Error("cornerPoints and width cannot be both empty");const a=(t=e.container)!=null?t:document.createElement("div"),l=(r=e.cornerPoints)!=null?r:(()=>{const D=e.width/2;return[new H(-D,D,0),new H(-D,-D,0),new H(D,-D,0),new H(D,D,0)]})(),u=(i=e.ratio)!=null?i:nS,c=(o=e.dpr)!=null?o:1,d=(s=e.pointerEvents)!=null?s:"auto",h=Math.max(tS,u),f=l[0].distanceTo(l[1]),p=l[1].distanceTo(l[2]);let v=Gs(f/u*c),b=Gs(p/u*c);const g=Yn(...l);let y;if(h===u)a.style.width=`${v}px`,a.style.height=`${b}px`,y=a;else{const D=document.createElement("div");D.style.width=`${v}px`,D.style.height=`${b}px`,D.style.pointerEvents="none";const m=u/h;a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width=`${m*v}px`,a.style.height=`${m*b}px`,D.appendChild(a),y=D}if(super(y),Fn(this,"version",Rw),Fn(this,"isCSS3DObject",!0),Fn(this,"name",kg),Fn(this,"container"),Fn(this,"width"),Fn(this,"height"),Fn(this,"domWidthPx"),Fn(this,"domHeightPx"),Fn(this,"cornerPoints"),Fn(this,"centerPosition"),Fn(this,"ratio"),Fn(this,"_mode","front"),Fn(this,"_opacityMesh"),y.id=this.id.toString(),a.style.pointerEvents=d,Object.assign(a.style,e.style),this.scale.set(h,h,h),this.cornerPoints=l,this.ratio=u,this.container=a,e.mode&&(this.mode=e.mode),h===u)this.width=f,this.height=p,this.centerPosition=g;else{const D=u/h;this.width=D*f,this.height=D*p,v=D*v,b=D*b,this.centerPosition=new H().subVectors(g,l[0]).multiplyScalar(D).add(l[0])}this.domWidthPx=v,this.domHeightPx=b,a.classList.add(`${kg}__container`);const E=new H().subVectors(l[1],l[0]),C=new H().subVectors(l[3],l[0]),V=new H().crossVectors(E,C).normalize();this.lookAt(V);const M=this.up.clone().applyQuaternion(this.quaternion),z=C.clone(),U=new H().crossVectors(M,z).normalize();this.rotateOnWorldAxis(U,M.angleTo(z)),this.position.copy(g),this._opacityMesh=new gb(v,b),this._opacityMesh.visible=e.mode==="behind",this.add(this._opacityMesh)}get mode(){return this._mode}set mode(e){this._mode=e,this._opacityMesh&&(this._opacityMesh.visible=e==="behind")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}dispose(){this.container.remove(),this.removeFromParent()}};var mf=function(n,e){return mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},mf(n,e)};function Bw(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mf(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rS=function(){function n(_){Bs.call(this,_),this.dracoLoader=null,this.ddsLoader=null}n.prototype=Object.assign(Object.create(Bs.prototype),{constructor:n,load:function(_,j,N,B){var X=this,L;this.resourcePath!==""?L=this.resourcePath:this.path!==""?L=this.path:L=Hi.extractUrlBase(_),X.manager.itemStart(_);var G=function(J){B?B(J):console.error(J),X.manager.itemError(_),X.manager.itemEnd(_)},K=new rl(X.manager);K.setPath(this.path),K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),X.crossOrigin==="use-credentials"&&K.setWithCredentials(!0),K.load(_,function(J){try{X.parse(J,L,function(re){j(re),X.manager.itemEnd(_)},G)}catch(re){G(re)}},N,G)},setDRACOLoader:function(_){return this.dracoLoader=_,this},setDDSLoader:function(_){return this.ddsLoader=_,this},parse:function(_,j,N,B){var X,L={};if(typeof _=="string")X=_;else{var G=Hi.decodeText(new Uint8Array(_,0,4));if(G===l){try{L[t.KHR_BINARY_GLTF]=new d(_)}catch(ve){B&&B(ve);return}X=L[t.KHR_BINARY_GLTF].content}else X=Hi.decodeText(new Uint8Array(_))}var K=JSON.parse(X);if(K.asset===void 0||K.asset.version[0]<2){B&&B(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}if(K.extensionsUsed)for(var J=0;J<K.extensionsUsed.length;++J){var re=K.extensionsUsed[J],te=K.extensionsRequired||[];switch(re){case t.KHR_LIGHTS_PUNCTUAL:L[re]=new i(K);break;case t.KHR_MATERIALS_CLEARCOAT:L[re]=new s;break;case t.KHR_MATERIALS_TRANSMISSION:L[re]=new a;break;case t.KHR_MATERIALS_UNLIT:L[re]=new o;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:L[re]=new v;break;case t.KHR_DRACO_MESH_COMPRESSION:L[re]=new h(K,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:L[re]=new r(this.ddsLoader);break;case t.KHR_TEXTURE_TRANSFORM:L[re]=new f;break;case t.KHR_MESH_QUANTIZATION:L[re]=new b;break;case t.REALSEE_MATERIALS_LIGHTMAP:L[re]=new y;break;default:te.indexOf(re)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+re+'".')}}var se=new he(K,L,{path:j||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});se.fileLoader.setRequestHeader(this.requestHeader),se.parse(N,B)}});function e(){var _={};return{get:function(j){return _[j]},add:function(j,N){_[j]=N},remove:function(j){delete _[j]},removeAll:function(){_={}}}}var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds",REALSEE_MATERIALS_LIGHTMAP:"REALSEE_materials_lightmap"};function r(_){if(!_)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=_}function i(_){this.name=t.KHR_LIGHTS_PUNCTUAL;var j=_.extensions&&_.extensions[t.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=j.lights||[]}i.prototype.loadLight=function(_){var j=this.lightDefs[_],N,B=new qe(16777215);j.color!==void 0&&B.fromArray(j.color);var X=j.range!==void 0?j.range:0;switch(j.type){case"directional":N=new Qy(B),N.target.position.set(0,0,-1),N.add(N.target);break;case"point":N=new mh(B),N.distance=X;break;case"spot":N=new Gy(B),N.distance=X,j.spot=j.spot||{},j.spot.innerConeAngle=j.spot.innerConeAngle!==void 0?j.spot.innerConeAngle:0,j.spot.outerConeAngle=j.spot.outerConeAngle!==void 0?j.spot.outerConeAngle:Math.PI/4,N.angle=j.spot.outerConeAngle,N.penumbra=1-j.spot.innerConeAngle/j.spot.outerConeAngle,N.target.position.set(0,0,-1),N.add(N.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+j.type+'".')}return N.position.set(0,0,0),N.decay=2,j.intensity!==void 0&&(N.intensity=j.intensity),N.name=j.name||"light_"+_,Promise.resolve(N)};function o(){this.name=t.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(){return st},o.prototype.extendParams=function(_,j,N){var B=[];_.color=new qe(1,1,1),_.opacity=1;var X=j.pbrMetallicRoughness;if(X){if(Array.isArray(X.baseColorFactor)){var L=X.baseColorFactor;_.color.fromArray(L),_.opacity=L[3]}X.baseColorTexture!==void 0&&B.push(N.assignTexture(_,"map",X.baseColorTexture))}return Promise.all(B)};function s(){this.name=t.KHR_MATERIALS_CLEARCOAT}s.prototype.getMaterialType=function(){return Ev},s.prototype.extendParams=function(_,j,N){var B=[],X=j.extensions[this.name];if(X.clearcoatFactor!==void 0&&(_.clearcoat=X.clearcoatFactor),X.clearcoatTexture!==void 0&&B.push(N.assignTexture(_,"clearcoatMap",X.clearcoatTexture)),X.clearcoatRoughnessFactor!==void 0&&(_.clearcoatRoughness=X.clearcoatRoughnessFactor),X.clearcoatRoughnessTexture!==void 0&&B.push(N.assignTexture(_,"clearcoatRoughnessMap",X.clearcoatRoughnessTexture)),X.clearcoatNormalTexture!==void 0&&(B.push(N.assignTexture(_,"clearcoatNormalMap",X.clearcoatNormalTexture)),X.clearcoatNormalTexture.scale!==void 0)){var L=X.clearcoatNormalTexture.scale;_.clearcoatNormalScale=new Jt(L,L)}return Promise.all(B)};function a(){this.name=t.KHR_MATERIALS_TRANSMISSION}a.prototype.getMaterialType=function(){return Ev},a.prototype.extendParams=function(_,j,N){var B=[],X=j.extensions[this.name];return X.transmissionFactor!==void 0&&(_.premultipliedAlpha=!0,_.transparent=!0,_.opacity=_.opacity!==void 0?_.opacity:.5),Promise.all(B)};var l="glTF",u=12,c={JSON:1313821514,BIN:5130562};function d(_){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var j=new DataView(_,0,u);if(this.header={magic:Hi.decodeText(new Uint8Array(_.slice(0,4))),version:j.getUint32(4,!0),length:j.getUint32(8,!0)},this.header.magic!==l)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var N=new DataView(_,u),B=0;B<N.byteLength;){var X=N.getUint32(B,!0);B+=4;var L=N.getUint32(B,!0);if(B+=4,L===c.JSON){var G=new Uint8Array(_,u+B,X);this.content=Hi.decodeText(G)}else if(L===c.BIN){var K=u+B;this.body=_.slice(K,K+X)}B+=X}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(_,j){if(!j)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=j,this.dracoLoader.preload()}h.prototype.decodePrimitive=function(_,j){var N=this.json,B=this.dracoLoader,X=_.extensions[this.name].bufferView,L=_.extensions[this.name].attributes,G={},K={},J={};for(var re in L){var te=U[re]||re.toLowerCase();G[te]=L[re]}for(re in _.attributes){var te=U[re]||re.toLowerCase();if(L[re]!==void 0){var se=N.accessors[_.attributes[re]],ve=C[se.componentType];J[te]=ve,K[te]=se.normalized===!0}}return j.getDependency("bufferView",X).then(function(Ce){return new Promise(function(ke){B.decodeDracoFile(Ce,function(Ve){for(var Pe in Ve.attributes){var Fe=Ve.attributes[Pe],it=K[Pe];it!==void 0&&(Fe.normalized=it)}ke(Ve)},G,J)})})};function f(){this.name=t.KHR_TEXTURE_TRANSFORM}f.prototype.extendTexture=function(_,j){return _=_.clone(),j.offset!==void 0&&_.offset.fromArray(j.offset),j.rotation!==void 0&&(_.rotation=j.rotation),j.scale!==void 0&&_.repeat.fromArray(j.scale),j.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),_.needsUpdate=!0,_};function p(_){xa.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var j=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),N=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),B=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),X=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),L=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),G={specular:{value:new qe().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=G,this.onBeforeCompile=function(K){for(var J in G)K.uniforms[J]=G[J];K.fragmentShader=K.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),K.fragmentShader=K.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),K.fragmentShader=K.fragmentShader.replace("#include <roughnessmap_pars_fragment>",j),K.fragmentShader=K.fragmentShader.replace("#include <metalnessmap_pars_fragment>",N),K.fragmentShader=K.fragmentShader.replace("#include <roughnessmap_fragment>",B),K.fragmentShader=K.fragmentShader.replace("#include <metalnessmap_fragment>",X),K.fragmentShader=K.fragmentShader.replace("#include <lights_physical_fragment>",L)},Object.defineProperties(this,{specular:{get:function(){return G.specular.value},set:function(K){G.specular.value=K}},specularMap:{get:function(){return G.specularMap.value},set:function(K){G.specularMap.value=K}},glossiness:{get:function(){return G.glossiness.value},set:function(K){G.glossiness.value=K}},glossinessMap:{get:function(){return G.glossinessMap.value},set:function(K){G.glossinessMap.value=K,K?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(_)}p.prototype=Object.create(xa.prototype),p.prototype.constructor=p,p.prototype.copy=function(_){return xa.prototype.copy.call(this,_),this.specularMap=_.specularMap,this.specular.copy(_.specular),this.glossinessMap=_.glossinessMap,this.glossiness=_.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function v(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return p},extendParams:function(_,j,N){var B=j.extensions[this.name];_.color=new qe(1,1,1),_.opacity=1;var X=[];if(Array.isArray(B.diffuseFactor)){var L=B.diffuseFactor;_.color.fromArray(L),_.opacity=L[3]}if(B.diffuseTexture!==void 0&&X.push(N.assignTexture(_,"map",B.diffuseTexture)),_.emissive=new qe(0,0,0),_.glossiness=B.glossinessFactor!==void 0?B.glossinessFactor:1,_.specular=new qe(1,1,1),Array.isArray(B.specularFactor)&&_.specular.fromArray(B.specularFactor),B.specularGlossinessTexture!==void 0){var G=B.specularGlossinessTexture;X.push(N.assignTexture(_,"glossinessMap",G)),X.push(N.assignTexture(_,"specularMap",G))}return Promise.all(X)},createMaterial:function(_){var j=new p(_);return j.fog=!0,j.color=_.color,j.map=_.map===void 0?null:_.map,j.lightMap=null,j.lightMapIntensity=1,j.aoMap=_.aoMap===void 0?null:_.aoMap,j.aoMapIntensity=1,j.emissive=_.emissive,j.emissiveIntensity=1,j.emissiveMap=_.emissiveMap===void 0?null:_.emissiveMap,j.bumpMap=_.bumpMap===void 0?null:_.bumpMap,j.bumpScale=1,j.normalMap=_.normalMap===void 0?null:_.normalMap,j.normalMapType=q2,_.normalScale&&(j.normalScale=_.normalScale),j.displacementMap=null,j.displacementScale=1,j.displacementBias=0,j.specularMap=_.specularMap===void 0?null:_.specularMap,j.specular=_.specular,j.glossinessMap=_.glossinessMap===void 0?null:_.glossinessMap,j.glossiness=_.glossiness,j.alphaMap=null,j.envMap=_.envMap===void 0?null:_.envMap,j.envMapIntensity=1,j.refractionRatio=.98,j}}}function b(){this.name=t.KHR_MESH_QUANTIZATION}function g(_,j,N,B){Cv.call(this,_,j,N,B)}g.prototype=Object.create(Cv.prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(_){for(var j=this.resultBuffer,N=this.sampleValues,B=this.valueSize,X=_*B*3+B,L=0;L!==B;L++)j[L]=N[X+L];return j},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(_,j,N,B){for(var X=this.resultBuffer,L=this.sampleValues,G=this.valueSize,K=G*2,J=G*3,re=B-j,te=(N-j)/re,se=te*te,ve=se*te,Ce=_*J,ke=Ce-J,Ve=-2*ve+3*se,Pe=ve-se,Fe=1-Ve,it=Pe-se+te,Ze=0;Ze!==G;Ze++){var zt=L[ke+Ze+G],an=L[ke+Ze+K]*re,Mt=L[Ce+Ze+G],pt=L[Ce+Ze]*re;X[Ze]=Fe*zt+it*an+Ve*Mt+Pe*pt}return X};function y(_){this.parser=_,this.name=t.REALSEE_MATERIALS_LIGHTMAP}y.prototype.getMaterialType=function(_){return xu},y.prototype.extendParams=function(_,j,N){if(!j.extensions||!j.extensions[this.name])return Promise.resolve();var B=[],X=j.extensions[this.name];return X.lightMapTexture!==void 0&&B.push(N.assignTexture(_,"lightMap",X.lightMapTexture)),X.lightMapIntensity!==void 0&&(_.lightMapIntensity=X.lightMapIntensity),Promise.all(B)};var E={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},C={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},V={9728:gh,9729:ci,9984:Z2,9985:J2,9986:K2,9987:Sv},M={33071:vh,33648:e3,10497:Ha},z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},D={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},m={CUBICSPLINE:void 0,LINEAR:$v,STEP:n3},A={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},x={"image/png":qy,"image/jpeg":Bu};function S(_,j){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(j)&&/^\//.test(_)&&(j=j.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:j+_)}function $(_){return _.DefaultMaterial===void 0&&(_.DefaultMaterial=new xa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:a3})),_.DefaultMaterial}function T(_,j,N){for(var B in N.extensions)_[B]===void 0&&(j.userData.gltfExtensions=j.userData.gltfExtensions||{},j.userData.gltfExtensions[B]=N.extensions[B])}function F(_,j){j.extras!==void 0&&(typeof j.extras=="object"?Object.assign(_.userData,j.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+j.extras))}function R(_,j,N){for(var B=!1,X=!1,L=0,G=j.length;L<G;L++){var K=j[L];if(K.POSITION!==void 0&&(B=!0),K.NORMAL!==void 0&&(X=!0),B&&X)break}if(!B&&!X)return Promise.resolve(_);for(var J=[],re=[],L=0,G=j.length;L<G;L++){var K=j[L];if(B){var te=K.POSITION!==void 0?N.getDependency("accessor",K.POSITION):_.attributes.position;J.push(te)}if(X){var te=K.NORMAL!==void 0?N.getDependency("accessor",K.NORMAL):_.attributes.normal;re.push(te)}}return Promise.all([Promise.all(J),Promise.all(re)]).then(function(se){var ve=se[0],Ce=se[1];return B&&(_.morphAttributes.position=ve),X&&(_.morphAttributes.normal=Ce),_.morphTargetsRelative=!0,_})}function ne(_,j){if(_.updateMorphTargets(),j.weights!==void 0)for(var N=0,B=j.weights.length;N<B;N++)_.morphTargetInfluences[N]=j.weights[N];if(j.extras&&Array.isArray(j.extras.targetNames)){var X=j.extras.targetNames;if(_.morphTargetInfluences.length===X.length){_.morphTargetDictionary={};for(var N=0,B=X.length;N<B;N++)_.morphTargetDictionary[X[N]]=N}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ce(_){var j=_.extensions&&_.extensions[t.KHR_DRACO_MESH_COMPRESSION],N;return j?N="draco:"+j.bufferView+":"+j.indices+":"+Z(j.attributes):N=_.indices+":"+Z(_.attributes)+":"+_.mode,N}function Z(_){for(var j="",N=Object.keys(_).sort(),B=0,X=N.length;B<X;B++)j+=N[B]+":"+_[N[B]]+";";return j}function he(_,j,N){this.json=_||{},this.extensions=j||{},this.options=N||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.textureLoader=new wi(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new rl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}he.prototype.parse=function(_,j){var N=this,B=this.json,X=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(L){var G={scene:L[0][B.scene||0],scenes:L[0],animations:L[1],cameras:L[2],asset:B.asset,parser:N,userData:{}};T(X,G,B),F(G,B),_(G)}).catch(j)},he.prototype.markDefs=function(){for(var _=this.json.nodes||[],j=this.json.skins||[],N=this.json.meshes||[],B={},X={},L=0,G=j.length;L<G;L++)for(var K=j[L].joints,J=0,re=K.length;J<re;J++)_[K[J]].isBone=!0;for(var te=0,se=_.length;te<se;te++){var ve=_[te];ve.mesh!==void 0&&(B[ve.mesh]===void 0&&(B[ve.mesh]=X[ve.mesh]=0),B[ve.mesh]++,ve.skin!==void 0&&(N[ve.mesh].isSkinnedMesh=!0))}this.json.meshReferences=B,this.json.meshUses=X},he.prototype.getDependency=function(_,j){var N=_+":"+j,B=this.cache.get(N);if(!B){switch(_){case"scene":B=this.loadScene(j);break;case"node":B=this.loadNode(j);break;case"mesh":B=this.loadMesh(j);break;case"accessor":B=this.loadAccessor(j);break;case"bufferView":B=this.loadBufferView(j);break;case"buffer":B=this.loadBuffer(j);break;case"material":B=this.loadMaterial(j);break;case"texture":B=this.loadTexture(j);break;case"skin":B=this.loadSkin(j);break;case"animation":B=this.loadAnimation(j);break;case"camera":B=this.loadCamera(j);break;case"light":B=this.extensions[t.KHR_LIGHTS_PUNCTUAL].loadLight(j);break;default:throw new Error("Unknown type: "+_)}this.cache.add(N,B)}return B},he.prototype.getDependencies=function(_){var j=this.cache.get(_);if(!j){var N=this,B=this.json[_+(_==="mesh"?"es":"s")]||[];j=Promise.all(B.map(function(X,L){return N.getDependency(_,L)})),this.cache.add(_,j)}return j},he.prototype.loadBuffer=function(_){var j=this.json.buffers[_],N=this.fileLoader;if(j.type&&j.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+j.type+" buffer type is not supported.");if(j.uri===void 0&&_===0)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var B=this.options;return new Promise(function(X,L){N.load(S(j.uri,B.path),X,void 0,function(){L(new Error('THREE.GLTFLoader: Failed to load buffer "'+j.uri+'".'))})})},he.prototype.loadBufferView=function(_){var j=this.json.bufferViews[_];return this.getDependency("buffer",j.buffer).then(function(N){var B=j.byteLength||0,X=j.byteOffset||0;return N.slice(X,X+B)})},he.prototype.loadAccessor=function(_){var j=this,N=this.json,B=this.json.accessors[_];if(B.bufferView===void 0&&B.sparse===void 0)return Promise.resolve(null);var X=[];return B.bufferView!==void 0?X.push(this.getDependency("bufferView",B.bufferView)):X.push(null),B.sparse!==void 0&&(X.push(this.getDependency("bufferView",B.sparse.indices.bufferView)),X.push(this.getDependency("bufferView",B.sparse.values.bufferView))),Promise.all(X).then(function(L){var G=L[0],K=z[B.type],J=C[B.componentType],re=J.BYTES_PER_ELEMENT,te=re*K,se=B.byteOffset||0,ve=B.bufferView!==void 0?N.bufferViews[B.bufferView].byteStride:void 0,Ce=B.normalized===!0,ke,Ve;if(ve&&ve!==te){var Pe=Math.floor(se/ve),Fe="InterleavedBuffer:"+B.bufferView+":"+B.componentType+":"+Pe+":"+B.count,it=j.cache.get(Fe);it||(ke=new J(G,Pe*ve,B.count*ve/re),it=new Y2(ke,ve/re),j.cache.add(Fe,it)),Ve=new di(it,K,se%ve/re,Ce)}else G===null?ke=new J(B.count*K):ke=new J(G,se,B.count*K),Ve=new Ct(ke,K,Ce);if(B.sparse!==void 0){var Ze=z.SCALAR,zt=C[B.sparse.indices.componentType],an=B.sparse.indices.byteOffset||0,Mt=B.sparse.values.byteOffset||0,pt=new zt(L[1],an,B.sparse.count*Ze),Qt=new J(L[2],Mt,B.sparse.count*K);G!==null&&(Ve=new Ct(Ve.array.slice(),Ve.itemSize,Ve.normalized));for(var Ne=0,Xt=pt.length;Ne<Xt;Ne++){var Vt=pt[Ne];if(Ve.setX(Vt,Qt[Ne*K]),K>=2&&Ve.setY(Vt,Qt[Ne*K+1]),K>=3&&Ve.setZ(Vt,Qt[Ne*K+2]),K>=4&&Ve.setW(Vt,Qt[Ne*K+3]),K>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ve})},he.prototype.loadTexture=function(_){var j=this,N=this.json,B=this.options,X=this.textureLoader,L=self.URL||self.webkitURL,G=N.textures[_],K=G.extensions||{},J;K[t.MSFT_TEXTURE_DDS]?J=N.images[K[t.MSFT_TEXTURE_DDS].source]:J=N.images[G.source];var re=J.uri,te=!1;return J.bufferView!==void 0&&(re=j.getDependency("bufferView",J.bufferView).then(function(se){te=!0;var ve=new Blob([se],{type:J.mimeType});return re=L.createObjectURL(ve),re})),Promise.resolve(re).then(function(se){var ve=B.manager.getHandler(se);return ve||(ve=K[t.MSFT_TEXTURE_DDS]?j.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:X),new Promise(function(Ce,ke){ve.load(S(se,B.path),Ce,void 0,ke)})}).then(function(se){te===!0&&L.revokeObjectURL(re),se.flipY=!1,G.name&&(se.name=G.name),J.mimeType in x&&(se.format=x[J.mimeType]);var ve=N.samplers||{},Ce=ve[G.sampler]||{};return se.magFilter=V[Ce.magFilter]||ci,se.minFilter=V[Ce.minFilter]||Sv,se.wrapS=M[Ce.wrapS]||Ha,se.wrapT=M[Ce.wrapT]||Ha,j.associations.set(se,{type:"textures",index:_}),se})},he.prototype.assignTexture=function(_,j,N){var B=this;return this.getDependency("texture",N.index).then(function(X){if(!X.isCompressedTexture)switch(j){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":X.format=Bu;break}if(N.texCoord!==void 0&&N.texCoord!=0&&!(j==="aoMap"&&N.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+N.texCoord+" for texture "+j+" not yet supported."),B.extensions[t.KHR_TEXTURE_TRANSFORM]){var L=N.extensions!==void 0?N.extensions[t.KHR_TEXTURE_TRANSFORM]:void 0;if(L){var G=B.associations.get(X);X=B.extensions[t.KHR_TEXTURE_TRANSFORM].extendTexture(X,L),B.associations.set(X,G)}}_[j]=X})},he.prototype.assignFinalMaterial=function(_){var j=_.geometry,N=_.material,B=j.attributes.tangent!==void 0,X=j.attributes.color!==void 0,L=j.attributes.normal===void 0,G=_.isSkinnedMesh===!0,K=Object.keys(j.morphAttributes).length>0,J=K&&j.morphAttributes.normal!==void 0;if(_.isPoints){var re="PointsMaterial:"+N.uuid,te=this.cache.get(re);te||(te=new Uu,Ov.prototype.copy.call(te,N),te.color.copy(N.color),te.map=N.map,te.sizeAttenuation=!1,this.cache.add(re,te)),N=te}else if(_.isLine){var re="LineBasicMaterial:"+N.uuid,se=this.cache.get(re);se||(se=new np,Ov.prototype.copy.call(se,N),se.color.copy(N.color),this.cache.add(re,se)),N=se}if(B||X||L||G||K){var re="ClonedMaterial:"+N.uuid+":";N.isGLTFSpecularGlossinessMaterial&&(re+="specular-glossiness:"),G&&(re+="skinning:"),B&&(re+="vertex-tangents:"),X&&(re+="vertex-colors:"),L&&(re+="flat-shading:"),K&&(re+="morph-targets:"),J&&(re+="morph-normals:");var ve=this.cache.get(re);ve||(ve=N.clone(),G&&(ve.skinning=!0),B&&(ve.vertexTangents=!0),X&&(ve.vertexColors=!0),L&&(ve.flatShading=!0),K&&(ve.morphTargets=!0),J&&(ve.morphNormals=!0),this.cache.add(re,ve),this.associations.set(ve,this.associations.get(N))),N=ve}N.aoMap&&j.attributes.uv2===void 0&&j.attributes.uv!==void 0&&j.setAttribute("uv2",j.attributes.uv),N.normalScale&&!B&&(N.normalScale.y=-N.normalScale.y),N.clearcoatNormalScale&&!B&&(N.clearcoatNormalScale.y=-N.clearcoatNormalScale.y),_.material=N},he.prototype.loadMaterial=function(_){var j=this,N=this.json,B=this.extensions,X=N.materials[_],L,G={},K=X.extensions||{},J=[];if(K[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var re=B[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];L=re.getMaterialType(),J.push(re.extendParams(G,X,j))}else if(K[t.KHR_MATERIALS_UNLIT]){var te=B[t.KHR_MATERIALS_UNLIT];L=te.getMaterialType(),J.push(te.extendParams(G,X,j))}else{L=xa;var se=X.pbrMetallicRoughness||{};if(G.color=new qe(1,1,1),G.opacity=1,Array.isArray(se.baseColorFactor)){var ve=se.baseColorFactor;G.color.fromArray(ve),G.opacity=ve[3]}se.baseColorTexture!==void 0&&J.push(j.assignTexture(G,"map",se.baseColorTexture)),G.metalness=se.metallicFactor!==void 0?se.metallicFactor:1,G.roughness=se.roughnessFactor!==void 0?se.roughnessFactor:1,se.metallicRoughnessTexture!==void 0&&(J.push(j.assignTexture(G,"metalnessMap",se.metallicRoughnessTexture)),J.push(j.assignTexture(G,"roughnessMap",se.metallicRoughnessTexture)))}X.doubleSided===!0&&(G.side=fn);var Ce=X.alphaMode||A.OPAQUE;if(Ce===A.BLEND?(G.transparent=!0,G.depthWrite=!1):(G.transparent=!1,Ce===A.MASK&&(G.alphaTest=X.alphaCutoff!==void 0?X.alphaCutoff:.5)),X.normalTexture!==void 0&&L!==st&&(J.push(j.assignTexture(G,"normalMap",X.normalTexture)),G.normalScale=new Jt(1,1),X.normalTexture.scale!==void 0&&G.normalScale.set(X.normalTexture.scale,X.normalTexture.scale)),X.occlusionTexture!==void 0&&L!==st&&(J.push(j.assignTexture(G,"aoMap",X.occlusionTexture)),X.occlusionTexture.strength!==void 0&&(G.aoMapIntensity=X.occlusionTexture.strength)),X.emissiveFactor!==void 0&&L!==st&&(G.emissive=new qe().fromArray(X.emissiveFactor)),X.emissiveTexture!==void 0&&L!==st&&J.push(j.assignTexture(G,"emissiveMap",X.emissiveTexture)),K[t.KHR_MATERIALS_CLEARCOAT]){var ke=B[t.KHR_MATERIALS_CLEARCOAT];L=ke.getMaterialType(),J.push(ke.extendParams(G,{extensions:K},j))}if(K[t.KHR_MATERIALS_TRANSMISSION]){var ke=B[t.KHR_MATERIALS_TRANSMISSION];L=ke.getMaterialType(),J.push(ke.extendParams(G,{extensions:K},j))}if(K[t.REALSEE_MATERIALS_LIGHTMAP]){var Ve=B[t.REALSEE_MATERIALS_LIGHTMAP];L=Ve.getMaterialType(),J.push(Ve.extendParams(G,{extensions:K},j))}return Promise.all(J).then(function(){var Pe;return L===p?Pe=B[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(G):Pe=new L(G),X.name&&(Pe.name=X.name),Pe.map&&(Pe.map.encoding=fi),Pe.emissiveMap&&(Pe.emissiveMap.encoding=fi),F(Pe,X),j.associations.set(Pe,{type:"materials",index:_}),X.extensions&&T(B,Pe,X),Pe})};function pe(_,j,N){var B=j.attributes,X=new tl;if(B.POSITION!==void 0){var L=N.json.accessors[B.POSITION],G=L.min,K=L.max;if(G!==void 0&&K!==void 0)X.set(new H(G[0],G[1],G[2]),new H(K[0],K[1],K[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var J=j.targets;if(J!==void 0){for(var re=new H,te=new H,se=0,ve=J.length;se<ve;se++){var Ce=J[se];if(Ce.POSITION!==void 0){var L=N.json.accessors[Ce.POSITION],G=L.min,K=L.max;G!==void 0&&K!==void 0?(te.setX(Math.max(Math.abs(G[0]),Math.abs(K[0]))),te.setY(Math.max(Math.abs(G[1]),Math.abs(K[1]))),te.setZ(Math.max(Math.abs(G[2]),Math.abs(K[2]))),re.max(te)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}X.expandByVector(re)}_.boundingBox=X;var ke=new Zf;X.getCenter(ke.center),ke.radius=X.min.distanceTo(X.max)/2,_.boundingSphere=ke}function ge(_,j,N){var B=j.attributes,X=[];function L(re,te){return N.getDependency("accessor",re).then(function(se){_.setAttribute(te,se)})}for(var G in B){var K=U[G]||G.toLowerCase();K in _.attributes||X.push(L(B[G],K))}if(j.indices!==void 0&&!_.index){var J=N.getDependency("accessor",j.indices).then(function(re){_.setIndex(re)});X.push(J)}return F(_,j),pe(_,j,N),Promise.all(X).then(function(){return j.targets!==void 0?R(_,j.targets,N):_})}function Me(_,j){var N=_.getIndex();if(N===null){var B=[],X=_.getAttribute("position");if(X!==void 0){for(var L=0;L<X.count;L++)B.push(L);_.setIndex(B),N=_.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),_}var G=N.count-2,K=[];if(j===Vv)for(var L=1;L<=G;L++)K.push(N.getX(0)),K.push(N.getX(L)),K.push(N.getX(L+1));else for(var L=0;L<G;L++)L%2===0?(K.push(N.getX(L)),K.push(N.getX(L+1)),K.push(N.getX(L+2))):(K.push(N.getX(L+2)),K.push(N.getX(L+1)),K.push(N.getX(L)));K.length/3!==G&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var J=_.clone();return J.setIndex(K),J}return he.prototype.loadGeometries=function(_){var j=this,N=this.extensions,B=this.primitiveCache;function X(ve){return N[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ve,j).then(function(Ce){return ge(Ce,ve,j)})}for(var L=[],G=0,K=_.length;G<K;G++){var J=_[G],re=ce(J),te=B[re];if(te)L.push(te.promise);else{var se;J.extensions&&J.extensions[t.KHR_DRACO_MESH_COMPRESSION]?se=X(J):se=ge(new Tt,J,j),B[re]={primitive:J,promise:se},L.push(se)}}return Promise.all(L)},he.prototype.loadMesh=function(_){for(var j=this,N=this.json,B=N.meshes[_],X=B.primitives,L=[],G=0,K=X.length;G<K;G++){var J=X[G].material===void 0?$(this.cache):this.getDependency("material",X[G].material);L.push(J)}return L.push(j.loadGeometries(X)),Promise.all(L).then(function(re){for(var te=re.slice(0,re.length-1),se=re[re.length-1],ve=[],Ce=0,ke=se.length;Ce<ke;Ce++){var Ve=se[Ce],Pe=X[Ce],Fe,it=te[Ce];if(Pe.mode===E.TRIANGLES||Pe.mode===E.TRIANGLE_STRIP||Pe.mode===E.TRIANGLE_FAN||Pe.mode===void 0)Fe=B.isSkinnedMesh===!0?new Fy(Ve,it):new nt(Ve,it),Fe.isSkinnedMesh===!0&&!Fe.geometry.attributes.skinWeight.normalized&&Fe.normalizeSkinWeights(),Pe.mode===E.TRIANGLE_STRIP?Fe.geometry=Me(Fe.geometry,l3):Pe.mode===E.TRIANGLE_FAN&&(Fe.geometry=Me(Fe.geometry,Vv));else if(Pe.mode===E.LINES)Fe=new Yy(Ve,it);else if(Pe.mode===E.LINE_STRIP)Fe=new By(Ve,it);else if(Pe.mode===E.LINE_LOOP)Fe=new t3(Ve,it);else if(Pe.mode===E.POINTS)Fe=new Nu(Ve,it);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Pe.mode);Object.keys(Fe.geometry.morphAttributes).length>0&&ne(Fe,B),Fe.name=B.name||"mesh_"+_,se.length>1&&(Fe.name+="_"+Ce),F(Fe,B),j.assignFinalMaterial(Fe),ve.push(Fe)}if(ve.length===1)return ve[0];for(var Ze=new Zt,Ce=0,ke=ve.length;Ce<ke;Ce++)Ze.add(ve[Ce]);return Ze})},he.prototype.loadCamera=function(_){var j,N=this.json.cameras[_],B=N[N.type];if(!B){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return N.type==="perspective"?j=new Xy(Pn.radToDeg(B.yfov),B.aspectRatio||1,B.znear||1,B.zfar||2e6):N.type==="orthographic"&&(j=new rp(-B.xmag,B.xmag,B.ymag,-B.ymag,B.znear,B.zfar)),N.name&&(j.name=N.name),F(j,N),Promise.resolve(j)},he.prototype.loadSkin=function(_){var j=this.json.skins[_],N={joints:j.joints};return j.inverseBindMatrices===void 0?Promise.resolve(N):this.getDependency("accessor",j.inverseBindMatrices).then(function(B){return N.inverseBindMatrices=B,N})},he.prototype.loadAnimation=function(_){for(var j=this.json,N=j.animations[_],B=[],X=[],L=[],G=[],K=[],J=0,re=N.channels.length;J<re;J++){var te=N.channels[J],se=N.samplers[te.sampler],ve=te.target,Ce=ve.node!==void 0?ve.node:ve.id,ke=N.parameters!==void 0?N.parameters[se.input]:se.input,Ve=N.parameters!==void 0?N.parameters[se.output]:se.output;B.push(this.getDependency("node",Ce)),X.push(this.getDependency("accessor",ke)),L.push(this.getDependency("accessor",Ve)),G.push(se),K.push(ve)}return Promise.all([Promise.all(B),Promise.all(X),Promise.all(L),Promise.all(G),Promise.all(K)]).then(function(Pe){for(var Fe=Pe[0],it=Pe[1],Ze=Pe[2],zt=Pe[3],an=Pe[4],Mt=[],pt=0,Qt=Fe.length;pt<Qt;pt++){var Ne=Fe[pt],Xt=it[pt],Vt=Ze[pt],Gr=zt[pt],ur=an[pt];if(Ne!==void 0){Ne.updateMatrix(),Ne.matrixAutoUpdate=!0;var In;switch(D[ur.path]){case D.weights:In=Hy;break;case D.rotation:In=Uy;break;case D.position:case D.scale:default:In=Ny;break}var Ci=Ne.name?Ne.name:Ne.uuid,Sr=Gr.interpolation!==void 0?m[Gr.interpolation]:$v,en=[];D[ur.path]===D.weights?Ne.traverse(function(Ln){Ln.isMesh===!0&&Ln.morphTargetInfluences&&en.push(Ln.name?Ln.name:Ln.uuid)}):en.push(Ci);var Et=Vt.array;if(Vt.normalized){var Sn;if(Et.constructor===Int8Array)Sn=1/127;else if(Et.constructor===Uint8Array)Sn=1/255;else if(Et.constructor==Int16Array)Sn=1/32767;else if(Et.constructor===Uint16Array)Sn=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var cr=new Float32Array(Et.length),Bt=0,jn=Et.length;Bt<jn;Bt++)cr[Bt]=Et[Bt]*Sn;Et=cr}for(var Bt=0,jn=en.length;Bt<jn;Bt++){var Dn=new In(en[Bt]+"."+D[ur.path],Xt.array,Et,Sr);Gr.interpolation==="CUBICSPLINE"&&(Dn.createInterpolant=function(Jn){return new g(this.times,this.values,this.getValueSize()/3,Jn)},Dn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Mt.push(Dn)}}}var Qr=N.name?N.name:"animation_"+_;return new Wy(Qr,void 0,Mt)})},he.prototype.loadNode=function(_){var j=this.json,N=this.extensions,B=this,X=j.meshReferences,L=j.meshUses,G=j.nodes[_];return function(){var K=[];return G.mesh!==void 0&&K.push(B.getDependency("mesh",G.mesh).then(function(J){var re;if(X[G.mesh]>1){var te=L[G.mesh]++;re=J.clone(),re.name+="_instance_"+te}else re=J;return G.weights!==void 0&&re.traverse(function(se){if(se.isMesh)for(var ve=0,Ce=G.weights.length;ve<Ce;ve++)se.morphTargetInfluences[ve]=G.weights[ve]}),re})),G.camera!==void 0&&K.push(B.getDependency("camera",G.camera)),G.extensions&&G.extensions[t.KHR_LIGHTS_PUNCTUAL]&&G.extensions[t.KHR_LIGHTS_PUNCTUAL].light!==void 0&&K.push(B.getDependency("light",G.extensions[t.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(K)}().then(function(K){var J;if(G.isBone===!0?J=new ph:K.length>1?J=new Zt:K.length===1?J=K[0]:J=new Tn,J!==K[0])for(var re=0,te=K.length;re<te;re++)J.add(K[re]);if(G.name&&(J.userData.name=G.name,J.name=Da.sanitizeNodeName(G.name)),F(J,G),G.extensions&&T(N,J,G),G.matrix!==void 0){var se=new Ue;se.fromArray(G.matrix),J.applyMatrix4(se)}else G.translation!==void 0&&J.position.fromArray(G.translation),G.rotation!==void 0&&J.quaternion.fromArray(G.rotation),G.scale!==void 0&&J.scale.fromArray(G.scale);return B.associations.set(J,{type:"nodes",index:_}),J})},he.prototype.loadScene=function(){function _(j,N,B,X){var L=B.nodes[j];return X.getDependency("node",j).then(function(G){if(L.skin===void 0)return G;var K;return X.getDependency("skin",L.skin).then(function(J){K=J;for(var re=[],te=0,se=K.joints.length;te<se;te++)re.push(X.getDependency("node",K.joints[te]));return Promise.all(re)}).then(function(J){return G.traverse(function(re){if(re.isMesh){for(var te=[],se=[],ve=0,Ce=J.length;ve<Ce;ve++){var ke=J[ve];if(ke){te.push(ke);var Ve=new Ue;K.inverseBindMatrices!==void 0&&Ve.fromArray(K.inverseBindMatrices.array,ve*16),se.push(Ve)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',K.joints[ve])}re.bind(new zy(te,se),re.matrixWorld)}}),G})}).then(function(G){N.add(G);var K=[];if(L.children)for(var J=L.children,re=0,te=J.length;re<te;re++){var se=J[re];K.push(_(se,G,B,X))}return Promise.all(K)})}return function(j){var N=this.json,B=this.extensions,X=this.json.scenes[j],L=this,G=new Zt;X.name&&(G.name=X.name),F(G,X),X.extensions&&T(B,G,X);for(var K=X.nodes||[],J=[],re=0,te=K.length;re<te;re++)J.push(_(K[re],G,N,L));return Promise.all(J).then(function(){return G})}}(),n}(),Nn=function(n){Bs.call(this,n),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};Nn.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Nn,setDecoderPath:function(n){return this.decoderPath=n,this},setDecoderConfig:function(n){return this.decoderConfig=n,this},setWorkerLimit:function(n){return this.workerLimit=n,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(n,e,t,r){var i=new rl(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),this.crossOrigin==="use-credentials"&&i.setWithCredentials(!0),i.load(n,o=>{var s={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,s).then(e).catch(r)},t,r)},decodeDracoFile:function(n,e,t,r){var i={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(n,i).then(e)},decodeGeometry:function(n,e){for(var t in e.attributeTypes){var r=e.attributeTypes[t];r.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[t]=r.name)}var i=JSON.stringify(e);if(Nn.taskCache.has(n)){var o=Nn.taskCache.get(n);if(o.key===i)return o.promise;if(n.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var s,a=this.workerNextTaskID++,l=n.byteLength,u=this._getWorker(a,l).then(c=>(s=c,new Promise((d,h)=>{s._callbacks[a]={resolve:d,reject:h},s.postMessage({type:"decode",id:a,taskConfig:e,buffer:n},[n])}))).then(c=>this._createGeometry(c.geometry));return u.catch(()=>!0).then(()=>{s&&a&&this._releaseTask(s,a)}),Nn.taskCache.set(n,{key:i,promise:u}),u},_createGeometry:function(n){var e=new Tt;n.index&&e.setIndex(new Ct(n.index.array,1));for(var t=0;t<n.attributes.length;t++){var r=n.attributes[t],i=r.name,o=r.array,s=r.itemSize;e.setAttribute(i,new Ct(o,s))}return e},_loadLibrary:function(n,e){var t=new rl(this.manager);return t.setPath(this.decoderPath),t.setResponseType(e),new Promise((r,i)=>{t.load(n,r,void 0,i)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var n=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return n?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(t=>{var r=t[0];n||(this.decoderConfig.wasmBinary=t[1]);var i=Nn.DRACOWorker.toString(),o=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending},_getWorker:function(n,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(i){var o=i.data;switch(o.type){case"decode":t._callbacks[o.id].resolve(o);break;case"error":t._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort(function(r,i){return r._taskLoad>i._taskLoad?-1:1});var t=this.workerPool[this.workerPool.length-1];return t._taskCosts[n]=e,t._taskLoad+=e,t})},_releaseTask:function(n,e){n._taskLoad-=n._taskCosts[e],delete n._callbacks[e],delete n._taskCosts[e]},debug:function(){console.log("Task load: ",this.workerPool.map(n=>n._taskLoad))},dispose:function(){for(var n=0;n<this.workerPool.length;++n)this.workerPool[n].terminate();return this.workerPool.length=0,this}});Nn.DRACOWorker=function(){var n,e;onmessage=function(i){var o=i.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(l){n.onModuleLoaded=function(u){l({draco:u})},DracoDecoderModule(n)});break;case"decode":var s=o.buffer,a=o.taskConfig;e.then(l=>{var u=l.draco,c=new u.Decoder,d=new u.DecoderBuffer;d.Init(new Int8Array(s),s.byteLength);try{var h=t(u,c,d,a),f=h.attributes.map(p=>p.array.buffer);h.index&&f.push(h.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:h},f)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{u.destroy(d),u.destroy(c)}});break}};function t(i,o,s,a){var l=a.attributeIDs,u=a.attributeTypes,c,d,h=o.GetEncodedGeometryType(s);if(h===i.TRIANGULAR_MESH)c=new i.Mesh,d=o.DecodeBufferToMesh(s,c);else if(h===i.POINT_CLOUD)c=new i.PointCloud,d=o.DecodeBufferToPointCloud(s,c);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||c.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());var f={index:null,attributes:[]};for(var p in l){var v=self[u[p]],b,g;if(a.useUniqueIDs)g=l[p],b=o.GetAttributeByUniqueId(c,g);else{if(g=o.GetAttributeId(c,i[l[p]]),g===-1)continue;b=o.GetAttribute(c,g)}f.attributes.push(r(i,o,c,p,v,b))}if(h===i.TRIANGULAR_MESH){for(var y=c.num_faces(),E=y*3,C=new Uint32Array(E),V=new i.DracoInt32Array,M=0;M<y;++M){o.GetFaceFromMesh(c,M,V);for(var z=0;z<3;++z)C[M*3+z]=V.GetValue(z)}f.index={array:C,itemSize:1},i.destroy(V)}return i.destroy(c),f}function r(i,o,s,a,l,u){var c=u.num_components(),d=s.num_points(),h=d*c,f,p;switch(l){case Float32Array:f=new i.DracoFloat32Array,o.GetAttributeFloatForAllPoints(s,u,f),p=new Float32Array(h);break;case Int8Array:f=new i.DracoInt8Array,o.GetAttributeInt8ForAllPoints(s,u,f),p=new Int8Array(h);break;case Int16Array:f=new i.DracoInt16Array,o.GetAttributeInt16ForAllPoints(s,u,f),p=new Int16Array(h);break;case Int32Array:f=new i.DracoInt32Array,o.GetAttributeInt32ForAllPoints(s,u,f),p=new Int32Array(h);break;case Uint8Array:f=new i.DracoUInt8Array,o.GetAttributeUInt8ForAllPoints(s,u,f),p=new Uint8Array(h);break;case Uint16Array:f=new i.DracoUInt16Array,o.GetAttributeUInt16ForAllPoints(s,u,f),p=new Uint16Array(h);break;case Uint32Array:f=new i.DracoUInt32Array,o.GetAttributeUInt32ForAllPoints(s,u,f),p=new Uint32Array(h);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var v=0;v<h;v++)p[v]=f.GetValue(v);return i.destroy(f),{name:a,array:p,itemSize:c}}};Nn.taskCache=new WeakMap;Nn.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")};Nn.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")};Nn.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")};Nn.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var gf=function(n){Ky.call(this,n)};gf.prototype=Object.assign(Object.create(Ky.prototype),{constructor:gf,parse:function(n,e){var t={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=542327876,i=131072,o=512,s=1024,a=2048,l=4096,u=8192,c=16384,d=32768,h=4;function f(J){return J.charCodeAt(0)+(J.charCodeAt(1)<<8)+(J.charCodeAt(2)<<16)+(J.charCodeAt(3)<<24)}function p(J){return String.fromCharCode(J&255,J>>8&255,J>>16&255,J>>24&255)}function v(J,re,te,se){for(var ve=te*se*4,Ce=new Uint8Array(J,re,ve),ke=new Uint8Array(ve),Ve=0,Pe=0,Fe=0;Fe<se;Fe++)for(var it=0;it<te;it++){var Ze=Ce[Pe];Pe++;var zt=Ce[Pe];Pe++;var an=Ce[Pe];Pe++;var Mt=Ce[Pe];Pe++,ke[Ve]=an,Ve++,ke[Ve]=zt,Ve++,ke[Ve]=Ze,Ve++,ke[Ve]=Mt,Ve++}return ke}var b=f("DXT1"),g=f("DXT3"),y=f("DXT5"),E=f("ETC1"),C=31,V=0,M=1,z=2,U=3,D=4,m=7,A=20,x=21,S=22,$=23,T=24,F=25,R=26,ne=28,ce=new Int32Array(n,0,C);if(ce[V]!==r)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),t;if(!ce[A]&h)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),t;var Z,he=ce[x],pe=!1;switch(he){case b:Z=8,t.format=s3;break;case g:Z=16,t.format=o3;break;case y:Z=16,t.format=i3;break;case E:Z=8,t.format=r3;break;default:if(ce[S]===32&&ce[$]&16711680&&ce[T]&65280&&ce[F]&255&&ce[R]&4278190080)pe=!0,Z=64,t.format=qy;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(he)),t}t.mipmapCount=1,ce[z]&i&&e!==!1&&(t.mipmapCount=Math.max(1,ce[m]));var ge=ce[ne];if(t.isCubemap=!!(ge&o),t.isCubemap&&(!(ge&s)||!(ge&a)||!(ge&l)||!(ge&u)||!(ge&c)||!(ge&d)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),t;t.width=ce[D],t.height=ce[U];for(var Me=ce[M]+4,_=t.isCubemap?6:1,j=0;j<_;j++)for(var N=t.width,B=t.height,X=0;X<t.mipmapCount;X++){if(pe)var G=v(n,Me,N,B),L=G.length;else var L=Math.max(4,N)/4*Math.max(4,B)/4*Z,G=new Uint8Array(n,Me,L);var K={data:G,width:N,height:B};t.mipmaps.push(K),Me+=L,N=Math.max(N>>1,1),B=Math.max(B>>1,1)}return t}});var Ig=function(n){Bw(e,n);function e(t){var r=n.call(this)||this;return r.needsRender=!0,t&&t.children.length&&r.add.apply(r,t.children),r.mixer=new Mv(r),r}return e.prototype.clone=function(){var t=n.prototype.clone.call(this,!0),r=new Mv(t);return t.mixer=r,t.needsRender=!0,t},e}(Zt),iS="https://vr-public.realsee-cdn.cn/release/static/image/release/five/resource/draco/1.5.6/",oS=function(n){Bw(e,n);function e(t){var r=n.call(this,t)||this;return r.ddsLoader=new gf(t),r.dracoLoader=new Nn(t),r.dracoLoader.setDecoderPath(iS),r}return Object.defineProperty(e,"version",{get:function(){return"6.4.0-alpha.40"},enumerable:!1,configurable:!0}),e.prototype.load=function(t,r,i,o){return n.prototype.load.call(this,t,r,i,o)},e.prototype.parse=function(t,r,i,o){return n.prototype.parse.call(this,t,r,function(s){var a=new Ig(s.scene),l=s.scenes.map(function(u){return u===s.scene?a:new Ig(u)});i(Object.assign(s,{scene:a,scenes:l}))},o)},e}(rS);const sS=new oS;function aS(n){return new Promise((e,t)=>{function r(o){e(o)}function i(o){t(o)}sS.load(n,r,void 0,i)})}function Fw(n){if(!n||n.length<3)return;const e=n.map(Xe),t=e[1].clone().sub(e[0]),r=e[2].clone().sub(e[1]);return t.cross(r)}function lS(n){Qe(n,"svelte-xuejcm",".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}")}function jg(n){let e,t,r,i,o,s,a,l=n[3]&&Dg(n);return{c(){e=ie("div"),t=Ae("svg"),r=Ae("defs"),i=Ae("linearGradient"),o=Ae("stop"),s=Ae("stop"),l&&l.c(),P(o,"offset","25%"),P(o,"stop-color",n[5]),P(o,"stop-opacity","1"),P(s,"offset","100%"),P(s,"stop-color",n[5]),P(s,"stop-opacity","0.5"),P(i,"x1",.5),P(i,"y1",.5),P(i,"x2",n[8]),P(i,"y2",.5),P(i,"id",n[10]),P(i,"gradientUnits","userSpaceOnUse"),P(t,"class","straight-line svelte-xuejcm"),P(t,"viewBox",a="0 0 "+n[8]+" "+n[7]),P(t,"preserveAspectRatio","none"),P(e,"class","line svelte-xuejcm"),Se(e,"vertical",n[9]),Se(e,"horizontal",!n[9]),fe(e,"width",n[8]+"px"),fe(e,"height",n[7]+"px")},m(u,c){ae(u,e,c),Y(e,t),Y(t,r),Y(r,i),Y(i,o),Y(i,s),l&&l.m(t,null)},p(u,c){c&32&&P(o,"stop-color",u[5]),c&32&&P(s,"stop-color",u[5]),c&256&&P(i,"x2",u[8]),u[3]?l?(l.p(u,c),c&8&&q(l,1)):(l=Dg(u),l.c(),q(l,1),l.m(t,null)):l&&(Ie(),ee(l,1,1,()=>{l=null}),je()),c&384&&a!==(a="0 0 "+u[8]+" "+u[7])&&P(t,"viewBox",a),c&512&&Se(e,"vertical",u[9]),c&512&&Se(e,"horizontal",!u[9]),c&256&&fe(e,"width",u[8]+"px"),c&128&&fe(e,"height",u[7]+"px")},d(u){u&&oe(e),l&&l.d()}}}function Dg(n){let e,t,r,i,o;return{c(){e=Ae("path"),P(e,"fill","none"),P(e,"stroke",t=n[4]?`url(#${n[10]})`:n[5]),P(e,"stroke-width",1),P(e,"d",n[6])},m(s,a){ae(s,e,a),o=!0},p(s,a){n=s,(!o||a&48&&t!==(t=n[4]?`url(#${n[10]})`:n[5]))&&P(e,"stroke",t),(!o||a&64)&&P(e,"d",n[6])},i(s){o||(s&&kn(()=>{o&&(i&&i.end(1),r=Xo(e,fc,{duration:n[2],delay:n[0],easing:Ji}),r.start())}),o=!0)},o(s){r&&r.invalidate(),s&&(i=ua(e,fc,{duration:n[2],delay:n[1],easing:Ji})),o=!1},d(s){s&&oe(e),s&&i&&i.end()}}}function uS(n){let e,t=n[8]&&jg(n);return{c(){t&&t.c(),e=at()},m(r,i){t&&t.m(r,i),ae(r,e,i)},p(r,[i]){r[8]?t?t.p(r,i):(t=jg(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(r){t&&t.d(r),r&&oe(e)}}}function cS(n,e,t){let r,i,o,s,{inDelay:a=0}=e,{outDelay:l=0}=e,{duration:u=1e3}=e,{unfolded:c}=e,{length:d}=e,{direction:h="horizontal"}=e,{useLinearColor:f=!1}=e,{color:p="white"}=e;const v=ul();return n.$$set=b=>{"inDelay"in b&&t(0,a=b.inDelay),"outDelay"in b&&t(1,l=b.outDelay),"duration"in b&&t(2,u=b.duration),"unfolded"in b&&t(3,c=b.unfolded),"length"in b&&t(11,d=b.length),"direction"in b&&t(12,h=b.direction),"useLinearColor"in b&&t(4,f=b.useLinearColor),"color"in b&&t(5,p=b.color)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,r=h==="vertical"),n.$$.dirty&2048&&t(8,i=d),n.$$.dirty&2048&&t(6,s=`M0.5 0.5 H ${d}`)},t(7,o=1),[a,l,u,c,f,p,s,o,i,r,v,d,h]}let rv=class extends Re{constructor(e){super(),Le(this,e,cS,uS,De,{inDelay:0,outDelay:1,duration:2,unfolded:3,length:11,direction:12,useLinearColor:4,color:5},lS)}};function dS(n){Qe(n,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function Lg(n){let e,t,r,i,o;return{c(){e=ie("div"),P(e,"class","shadow svelte-faoauy"),P(e,"style",t=`
      left: ${tr(n[5])};
      bottom: ${tr(n[6])};
      border-radius: ${n[10]?"9999px":"0"};
      box-shadow: 0 0 ${tr(n[11])} ${tr(n[12])} rgba(0, 0, 0, ${n[13]});
      ${n[8]?"transform: translateX(-50%); left: 50%":""}
      ${n[9]?"transform: translateX(-50%); top: 50%":""}
      ${n[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),fe(e,"width",tr(n[3])),fe(e,"height",tr(n[4])),fe(e,"z-index",n[14])},m(s,a){ae(s,e,a),o=!0},p(s,a){n=s,(!o||a&16352&&t!==(t=`
      left: ${tr(n[5])};
      bottom: ${tr(n[6])};
      border-radius: ${n[10]?"9999px":"0"};
      box-shadow: 0 0 ${tr(n[11])} ${tr(n[12])} rgba(0, 0, 0, ${n[13]});
      ${n[8]?"transform: translateX(-50%); left: 50%":""}
      ${n[9]?"transform: translateX(-50%); top: 50%":""}
      ${n[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&P(e,"style",t);const l=a&16352;(l||a&16360)&&fe(e,"width",tr(n[3])),(l||a&16368)&&fe(e,"height",tr(n[4])),(l||a&32736)&&fe(e,"z-index",n[14])},i(s){o||(s&&kn(()=>{o&&(i&&i.end(1),r=Xo(e,Lo,{duration:n[0]}),r.start())}),o=!0)},o(s){r&&r.invalidate(),s&&(i=ua(e,Lo,{duration:n[1]})),o=!1},d(s){s&&oe(e),s&&i&&i.end()}}}function hS(n){let e,t=n[2]&&Lg(n);return{c(){t&&t.c(),e=at()},m(r,i){t&&t.m(r,i),ae(r,e,i)},p(r,[i]){r[2]?t?(t.p(r,i),i&4&&q(t,1)):(t=Lg(r),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(Ie(),ee(t,1,1,()=>{t=null}),je())},i(r){q(t)},o(r){ee(t)},d(r){t&&t.d(r),r&&oe(e)}}}function tr(n){return typeof n=="number"?n/16+"rem":n}function fS(n,e,t){let{inDelay:r=1e3}=e,{outDelay:i=1e3}=e,{visible:o=!0}=e,{width:s=0}=e,{height:a=0}=e,{left:l=0}=e,{bottom:u=0}=e,{center:c=!1}=e,{horizontalCenter:d=!1}=e,{verticalCenter:h=!1}=e,{round:f=!1}=e,{blurRadius:p}=e,{spreadRadius:v}=e,{opacity:b=.15}=e,{zIndex:g=-1}=e;return n.$$set=y=>{"inDelay"in y&&t(0,r=y.inDelay),"outDelay"in y&&t(1,i=y.outDelay),"visible"in y&&t(2,o=y.visible),"width"in y&&t(3,s=y.width),"height"in y&&t(4,a=y.height),"left"in y&&t(5,l=y.left),"bottom"in y&&t(6,u=y.bottom),"center"in y&&t(7,c=y.center),"horizontalCenter"in y&&t(8,d=y.horizontalCenter),"verticalCenter"in y&&t(9,h=y.verticalCenter),"round"in y&&t(10,f=y.round),"blurRadius"in y&&t(11,p=y.blurRadius),"spreadRadius"in y&&t(12,v=y.spreadRadius),"opacity"in y&&t(13,b=y.opacity),"zIndex"in y&&t(14,g=y.zIndex)},[r,i,o,s,a,l,u,c,d,h,f,p,v,b,g]}let Cr=class extends Re{constructor(e){super(),Le(this,e,fS,hS,De,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,round:10,blurRadius:11,spreadRadius:12,opacity:13,zIndex:14},dS)}};function pS(n,e){const[t,r]=e;if(t>=r||r<=1||t<=1)return-1;const i={},o=s=>(i[s]||(i[s]=n(s)),i[s]);for(let s=t;s<r;s++){const a=o(s),l=o(s-1);if(a<l)return s}return-1}function vS(){return Math.random().toString(36).slice(-6)}const uu=vS();function mS(n){Qe(n,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function Rg(n,e,t){const r=n.slice();return r[19]=e[t].id,r[0]=e[t].content,r[20]=e,r[21]=t,r}function gS(n){let e,t=n[0]+"",r,i=n[21];const o=()=>n[10](e,i),s=()=>n[10](null,i);return{c(){e=ie("span"),r=dt(t),P(e,"class","text-char svelte-1b2n9wi")},m(a,l){ae(a,e,l),Y(e,r),o()},p(a,l){n=a,l&4&&t!==(t=n[0]+"")&&yt(r,t),i!==n[21]&&(s(),i=n[21],o())},d(a){a&&oe(e),s()}}}function yS(n){let e;return{c(){e=ie("br")},m(t,r){ae(t,e,r)},p:Ee,d(t){t&&oe(e)}}}function AS(n){let e,t=n[21];const r=()=>n[9](e,t),i=()=>n[9](null,t);return{c(){e=ie("span"),e.textContent="",P(e,"class","text-char svelte-1b2n9wi")},m(o,s){ae(o,e,s),r()},p(o,s){n=o,t!==n[21]&&(i(),t=n[21],r())},d(o){o&&oe(e),i()}}}function zg(n,e){let t,r;function i(a,l){return a[0]===a[3]?AS:a[0]===a[4]?yS:gS}let o=i(e),s=o(e);return{key:n,first:null,c(){t=at(),s.c(),r=at(),this.first=t},m(a,l){ae(a,t,l),s.m(a,l),ae(a,r,l)},p(a,l){e=a,o===(o=i(e))&&s?s.p(e,l):(s.d(1),s=o(e),s&&(s.c(),s.m(r.parentNode,r)))},d(a){a&&oe(t),s.d(a),a&&oe(r)}}}function bS(n){let e=[],t=new Map,r,i=n[2];const o=s=>s[19];for(let s=0;s<i.length;s+=1){let a=Rg(n,i,s),l=o(a);t.set(l,e[s]=zg(l,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=at()},m(s,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(s,a);ae(s,r,a)},p(s,[a]){a&30&&(i=s[2],e=Np(e,a,o,1,s,i,t,r.parentNode,xE,zg,r,Rg))},i:Ee,o:Ee,d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&oe(r)}}}function wS(n,e,t){let r,{inDelay:i=0}=e,{outDelay:o=0}=e,{content:s}=e,{unfolded:a}=e,{isFistUnfoldedUpdate:l=!0}=e;const u=`__EMOJI_SPLIT_${uu}__`,c=`__EMOJI_${uu}__`,d=`__SPACE_${uu}__`,h=`__NEW_LINE_${uu}__`;let f,p,v=[];function b(M){const z=[],U=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu"));return M.slice().replace(U,D=>`${u}${c}${D}${u}`).split(u).forEach(D=>D.startsWith(c)?z.push({id:ul(),content:D.slice(c.length)}):z.push(...D.split("").map(m=>m===" "?d:m===`
`?h:m).map(m=>({id:ul(),content:m})))),z}function g(){if(!p)return;const M=!a;p.reversed!==M&&p.reverse(),p.play()}function y(M){if(l){t(5,l=!1);return}clearTimeout(f),f=setTimeout(g,M?i:o)}function E(M){const z=function(){const U=pS(D=>M[D].getBoundingClientRect().x,[Math.min(M.length-1,10),Math.min(M.length-1,30)]);if(U>0)return U}();p=Pt({targets:M.slice(0,z).filter(Ge),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:Pt.stagger(50),easing:"easeInOutCubic"}),a&&p.seek(p.duration)}function C(M,z){$t[M?"unshift":"push"](()=>{v[z]=M,t(1,v)})}function V(M,z){$t[M?"unshift":"push"](()=>{v[z]=M,t(1,v)})}return n.$$set=M=>{"inDelay"in M&&t(6,i=M.inDelay),"outDelay"in M&&t(7,o=M.outDelay),"content"in M&&t(0,s=M.content),"unfolded"in M&&t(8,a=M.unfolded),"isFistUnfoldedUpdate"in M&&t(5,l=M.isFistUnfoldedUpdate)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=b(s)),n.$$.dirty&256&&y(a),n.$$.dirty&2&&E(v.filter(M=>!!M))},[s,v,r,d,h,l,i,o,a,C,V]}let Hw=class extends Re{constructor(e){super(),Le(this,e,wS,bS,De,{inDelay:6,outDelay:7,content:0,unfolded:8,isFistUnfoldedUpdate:5},mS)}};function xS(n){Qe(n,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function Bg(n){let e,t,r,i,o,s,a,l,u,c;return t=new Cr({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){e=ie("div"),xe(t.$$.fragment),r=$e(),i=ie("div"),P(i,"class",o="arrow "+n[0]+" svelte-1ogmlqq"),fe(i,"background-image","url("+L8+")"),P(e,"class","arrow-wrapper svelte-1ogmlqq")},m(d,h){ae(d,e,h),be(t,e,null),Y(e,r),Y(e,i),l=!0,u||(c=Ye(i,"click",n[5]),u=!0)},p(d,h){n=d,(!l||h&1&&o!==(o="arrow "+n[0]+" svelte-1ogmlqq"))&&P(i,"class",o)},i(d){l||(q(t.$$.fragment,d),d&&kn(()=>{l&&(a&&a.end(1),s=Xo(i,Lo,{duration:n[2],delay:n[3],easing:Ys}),s.start())}),l=!0)},o(d){ee(t.$$.fragment,d),s&&s.invalidate(),d&&(a=ua(i,Lo,{duration:n[2],delay:n[4],easing:Ys})),l=!1},d(d){d&&oe(e),we(t),d&&a&&a.end(),u=!1,c()}}}function PS(n){let e,t,r=n[1]&&Bg(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[1]?r?(r.p(i,o),o&2&&q(r,1)):(r=Bg(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function ES(n,e,t){let{direction:r="right"}=e,{visible:i=!0}=e,{duration:o=0}=e,{inDelay:s=0}=e,{outDelay:a=0}=e;function l(u){bi.call(this,n,u)}return n.$$set=u=>{"direction"in u&&t(0,r=u.direction),"visible"in u&&t(1,i=u.visible),"duration"in u&&t(2,o=u.duration),"inDelay"in u&&t(3,s=u.inDelay),"outDelay"in u&&t(4,a=u.outDelay)},[r,i,o,s,a,l]}let CS=class extends Re{constructor(e){super(),Le(this,e,ES,PS,De,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},xS)}};function SS(n,e,t=20,r=5){return new Promise((i,o)=>{let s=0;const a=setInterval(()=>{const l=n();e(l)?(clearInterval(a),i(l)):s>=r&&(clearInterval(a),o(l)),s++},t)})}function OS(n){Qe(n,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function Fg(n){let e,t,r;return t=new Hw({props:{unfolded:n[0],content:n[1],inDelay:500,outDelay:n[5]}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","text svelte-1fuzm7v"),fe(e,"transform",n[7])},m(i,o){ae(i,e,o),be(t,e,null),n[10](e),r=!0},p(i,o){const s={};o&1&&(s.unfolded=i[0]),o&2&&(s.content=i[1]),o&32&&(s.outDelay=i[5]),t.$set(s),o&128&&fe(e,"transform",i[7])},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t),n[10](null)}}}function Hg(n){let e,t,r;return t=new CS({props:{direction:n[6],visible:n[0],inDelay:600,duration:1e3}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","arrow svelte-1fuzm7v")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o&64&&(s.direction=i[6]),o&1&&(s.visible=i[0]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function $S(n){let e,t,r,i=n[1]&&Fg(n),o=n[3]<n[4]&&Hg(n);return{c(){i&&i.c(),e=$e(),o&&o.c(),t=at()},m(s,a){i&&i.m(s,a),ae(s,e,a),o&&o.m(s,a),ae(s,t,a),r=!0},p(s,[a]){s[1]?i?(i.p(s,a),a&2&&q(i,1)):(i=Fg(s),i.c(),q(i,1),i.m(e.parentNode,e)):i&&(Ie(),ee(i,1,1,()=>{i=null}),je()),s[3]<s[4]?o?(o.p(s,a),a&24&&q(o,1)):(o=Hg(s),o.c(),q(o,1),o.m(t.parentNode,t)):o&&(Ie(),ee(o,1,1,()=>{o=null}),je())},i(s){r||(q(i),q(o),r=!0)},o(s){ee(i),ee(o),r=!1},d(s){i&&i.d(s),s&&oe(e),o&&o.d(s),s&&oe(t)}}}function MS(n,e,t){let r,i,o,{visible:s=!1}=e,{textUnfolded:a=!1}=e,{content:l}=e,u,c=0,d=0,h=0;function f(p){$t[p?"unshift":"push"](()=>{u=p,t(2,u)})}return n.$$set=p=>{"visible"in p&&t(0,s=p.visible),"textUnfolded"in p&&t(8,a=p.textUnfolded),"content"in p&&t(1,l=p.content)},n.$$.update=()=>{if(n.$$.dirty&7&&u&&s&&l){const{lineHeight:p}=getComputedStyle(u);t(4,h=u.offsetHeight),SS(()=>u==null?void 0:u.offsetHeight,Boolean).then(()=>{t(4,h=u.offsetHeight)}),t(3,d=Number(p.replace("px","")))}n.$$.dirty&280&&t(9,c=a?d-h:0),n.$$.dirty&512&&t(7,r=`translateY(${c}px)`),n.$$.dirty&256&&t(6,i=a?"left":"right"),n.$$.dirty&256&&t(5,o=a?450:0)},[s,l,u,d,h,o,i,r,a,c,f]}let Uw=class extends Re{constructor(e){super(),Le(this,e,MS,$S,De,{visible:0,textUnfolded:8,content:1},OS)}};function VS(n){Qe(n,"svelte-5hip41",".content.svelte-5hip41{--height:62.4375rem;width:-moz-max-content;width:max-content;height:var(--height);padding:calc(var(--height) - 1.125rem) 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function Ug(n){var e,t;let r,i,o,s,a,l,u,c,d;return r=new Cr({props:{visible:n[2],left:n[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),o=new rv({props:{unfolded:n[2],length:n[3],outDelay:n[4]+40*Math.min((t=(e=n[6][0])==null?void 0:e.content.length)!=null?t:10,15),useLinearColor:!0}}),l=new Uw({props:{visible:n[2],textUnfolded:n[1],content:n[5]}}),{c(){xe(r.$$.fragment),i=$e(),xe(o.$$.fragment),s=$e(),a=ie("div"),xe(l.$$.fragment),P(a,"class","content svelte-5hip41")},m(h,f){be(r,h,f),ae(h,i,f),be(o,h,f),ae(h,s,f),ae(h,a,f),be(l,a,null),u=!0,c||(d=[ks(Gp.call(null,a)),Ye(a,"clientWidth",n[10]),Ye(a,"click",n[7])],c=!0)},p(h,f){var p,v;const b={};f&4&&(b.visible=h[2]),f&8&&(b.left=h[3]/2+"px"),r.$set(b);const g={};f&4&&(g.unfolded=h[2]),f&8&&(g.length=h[3]),f&16&&(g.outDelay=h[4]+40*Math.min((v=(p=h[6][0])==null?void 0:p.content.length)!=null?v:10,15)),o.$set(g);const y={};f&4&&(y.visible=h[2]),f&2&&(y.textUnfolded=h[1]),f&32&&(y.content=h[5]),l.$set(y)},i(h){u||(q(r.$$.fragment,h),q(o.$$.fragment,h),q(l.$$.fragment,h),u=!0)},o(h){ee(r.$$.fragment,h),ee(o.$$.fragment,h),ee(l.$$.fragment,h),u=!1},d(h){we(r,h),h&&oe(i),we(o,h),h&&oe(s),h&&oe(a),we(l),c=!1,vn(d)}}}function TS(n){let e,t,r=n[0].state&&Ug(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state?r?(r.p(i,o),o&1&&q(r,1)):(r=Ug(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function _S(n,e,t){let r,i,o,s,a,{tag:l}=e,u,c=!1,d=[];function h(){t(1,c=!c)}const f=p=>{t(3,u=p.detail)};return n.$$set=p=>{"tag"in p&&t(0,l=p.tag)},n.$$.update=()=>{var p,v,b,g;n.$$.dirty&1&&t(2,r=!!((p=l.state)!=null&&p.unfolded)),n.$$.dirty&1&&t(9,i=(b=(v=l.data.title)!=null?v:l.data.text)!=null?b:""),n.$$.dirty&1&&t(8,o=(g=l.data.description)!=null?g:""),n.$$.dirty&768&&t(5,s=(()=>{if(i&&o)return i+`
`+o;if(i)return i;if(o)return o})()),n.$$.dirty&4&&(r||setTimeout(()=>{t(1,c=!1)},20)),n.$$.dirty&2&&t(4,a=c?450:0)},[l,c,r,u,a,s,d,h,o,i,f]}let kS=class extends Re{constructor(e){super(),Le(this,e,_S,TS,De,{tag:0},VS)}};function br(n){return typeof n=="number"?n/16+"rem":n}function IS(n){Qe(n,"svelte-1j0cz4o",'.text.svelte-1j0cz4o{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-1j0cz4o-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-1j0cz4o{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-1j0cz4o-blink 1.2s infinite}.placeholder.svelte-1j0cz4o{opacity:0.5}.placeholder.svelte-1j0cz4o:empty::after{content:" "}')}function jS(n){let e;const t=n[6].default,r=Zi(t,n,n[5],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&32)&&to(r,t,i,i[5],e?eo(t,i[5],o,null):no(i[5]),null)},i(i){e||(q(r,i),e=!0)},o(i){ee(r,i),e=!1},d(i){r&&r.d(i)}}}function DS(n){var e,t;let r,i,o=((e=n[3])==null?void 0:e.inputting)&&Ng(),s=typeof((t=n[3])==null?void 0:t.placeholder)=="string"&&Wg(n);return{c(){o&&o.c(),r=$e(),s&&s.c(),i=at()},m(a,l){o&&o.m(a,l),ae(a,r,l),s&&s.m(a,l),ae(a,i,l)},p(a,l){var u,c;(u=a[3])!=null&&u.inputting?o||(o=Ng(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null),typeof((c=a[3])==null?void 0:c.placeholder)=="string"?s?s.p(a,l):(s=Wg(a),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i:Ee,o:Ee,d(a){o&&o.d(a),a&&oe(r),s&&s.d(a),a&&oe(i)}}}function LS(n){let e;return{c(){e=dt(n[2])},m(t,r){ae(t,e,r)},p(t,r){r&4&&yt(e,t[2])},i:Ee,o:Ee,d(t){t&&oe(e)}}}function Ng(n){let e;return{c(){e=ie("div"),P(e,"class","caret svelte-1j0cz4o")},m(t,r){ae(t,e,r)},d(t){t&&oe(e)}}}function Wg(n){let e,t=n[3].placeholder+"",r;return{c(){e=ie("span"),r=dt(t),P(e,"class","placeholder svelte-1j0cz4o")},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o&8&&t!==(t=i[3].placeholder+"")&&yt(r,t)},d(i){i&&oe(e)}}}function RS(n){let e,t,r,i;const o=[LS,DS,jS],s=[];function a(l,u){return l[2]?0:l[4]?1:2}return t=a(n),r=s[t]=o[t](n),{c(){e=ie("div"),r.c(),P(e,"class","text svelte-1j0cz4o"),fe(e,"max-width",typeof n[1]=="number"?br(n[1]):n[1]),fe(e,"-webkit-line-clamp",n[0])},m(l,u){ae(l,e,u),s[t].m(e,null),i=!0},p(l,[u]){let c=t;t=a(l),t===c?s[t].p(l,u):(Ie(),ee(s[c],1,1,()=>{s[c]=null}),je(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),q(r,1),r.m(e,null)),u&2&&fe(e,"max-width",typeof l[1]=="number"?br(l[1]):l[1]),u&1&&fe(e,"-webkit-line-clamp",l[0])},i(l){i||(q(r),i=!0)},o(l){ee(r),i=!1},d(l){l&&oe(e),s[t].d()}}}function zS(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{maxLine:s=null}=e,{maxWidth:a=null}=e,{text:l=null}=e,{edit:u=null}=e;return n.$$set=c=>{"maxLine"in c&&t(0,s=c.maxLine),"maxWidth"in c&&t(1,a=c.maxWidth),"text"in c&&t(2,l=c.text),"edit"in c&&t(3,u=c.edit),"$$scope"in c&&t(5,o=c.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&t(4,r=typeof(u==null?void 0:u.placeholder)=="string"||(u==null?void 0:u.inputting))},[s,a,l,u,r,o,i]}let iv=class extends Re{constructor(e){super(),Le(this,e,zS,RS,De,{maxLine:0,maxWidth:1,text:2,edit:3},IS)}};function BS(n){Qe(n,"svelte-1oxrkr1",".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}")}function Gg(n){var e,t;let r,i,o,s,a,l,u,c,d;r=new rv({props:{unfolded:n[1],direction:"vertical",length:15,duration:500,inDelay:200,useLinearColor:!0}}),u=new iv({props:{text:n[4],edit:(e=n[0].data.edit)==null?void 0:e.title,maxLine:n[2]}});let h=(n[0].data.description||((t=n[0].data.edit)==null?void 0:t.description))&&Qg(n);return{c(){xe(r.$$.fragment),i=$e(),o=ie("div"),s=ie("div"),a=ie("div"),l=ie("div"),xe(u.$$.fragment),c=$e(),h&&h.c(),P(l,"class","title svelte-1oxrkr1"),P(a,"class","plane svelte-1oxrkr1"),P(s,"class","plane__wrapper svelte-1oxrkr1"),fe(s,"transform",n[1]?"translateY(-15px)":"translateY(0)"),P(o,"class","plane__container svelte-1oxrkr1"),Se(o,"unfolded",n[1]),Se(o,"folded",n[5])},m(f,p){be(r,f,p),ae(f,i,p),ae(f,o,p),Y(o,s),Y(s,a),Y(a,l),be(u,l,null),Y(a,c),h&&h.m(a,null),d=!0},p(f,p){var v,b;const g={};p&2&&(g.unfolded=f[1]),r.$set(g);const y={};p&16&&(y.text=f[4]),p&1&&(y.edit=(v=f[0].data.edit)==null?void 0:v.title),p&4&&(y.maxLine=f[2]),u.$set(y),f[0].data.description||(b=f[0].data.edit)!=null&&b.description?h?(h.p(f,p),p&1&&q(h,1)):(h=Qg(f),h.c(),q(h,1),h.m(a,null)):h&&(Ie(),ee(h,1,1,()=>{h=null}),je()),p&2&&fe(s,"transform",f[1]?"translateY(-15px)":"translateY(0)"),(!d||p&2)&&Se(o,"unfolded",f[1]),(!d||p&32)&&Se(o,"folded",f[5])},i(f){d||(q(r.$$.fragment,f),q(u.$$.fragment,f),q(h),d=!0)},o(f){ee(r.$$.fragment,f),ee(u.$$.fragment,f),ee(h),d=!1},d(f){we(r,f),f&&oe(i),f&&oe(o),we(u),h&&h.d()}}}function Qg(n){var e;let t,r,i;return r=new iv({props:{text:n[0].data.description,edit:(e=n[0].data.edit)==null?void 0:e.description,maxLine:n[3]}}),{c(){t=ie("div"),xe(r.$$.fragment),P(t,"class","description svelte-1oxrkr1")},m(o,s){ae(o,t,s),be(r,t,null),i=!0},p(o,s){var a;const l={};s&1&&(l.text=o[0].data.description),s&1&&(l.edit=(a=o[0].data.edit)==null?void 0:a.description),s&8&&(l.maxLine=o[3]),r.$set(l)},i(o){i||(q(r.$$.fragment,o),i=!0)},o(o){ee(r.$$.fragment,o),i=!1},d(o){o&&oe(t),we(r)}}}function FS(n){let e,t,r=n[0].state&&Gg(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state?r?(r.p(i,o),o&1&&q(r,1)):(r=Gg(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function HS(n,e,t){let r,i,o,s,a,{tag:l}=e;return n.$$set=u=>{"tag"in u&&t(0,l=u.tag)},n.$$.update=()=>{var u,c,d,h,f;n.$$.dirty&1&&t(1,r=!!((u=l.state)!=null&&u.unfolded)),n.$$.dirty&2&&t(5,i=!r),n.$$.dirty&1&&t(4,o=(d=(c=l.data.title)!=null?c:l.data.text)!=null?d:""),n.$$.dirty&1&&t(3,s=(h=l.data.descriptionMaxRows)!=null?h:null),n.$$.dirty&1&&t(2,a=(f=l.data.titleMaxRows)!=null?f:null)},[l,r,a,s,o,i]}let US=class extends Re{constructor(e){super(),Le(this,e,HS,FS,De,{tag:0},BS)}};function NS(n){let e,t;return e=new US({props:{tag:n[0]}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=r[0]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function WS(n){let e,t;return e=new kS({props:{tag:n[0]}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=r[0]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function GS(n){let e,t,r,i;const o=[WS,NS],s=[];function a(l,u){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(e=a(n))&&(t=s[e]=o[e](n)),{c(){t&&t.c(),r=at()},m(l,u){~e&&s[e].m(l,u),ae(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?~e&&s[e].p(l,u):(t&&(Ie(),ee(s[c],1,1,()=>{s[c]=null}),je()),~e?(t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),q(t,1),t.m(r.parentNode,r)):t=null)},i(l){i||(q(t),i=!0)},o(l){ee(t),i=!1},d(l){~e&&s[e].d(l),l&&oe(r)}}}function QS(n,e,t){let r,{tag:i}=e;return n.$$set=o=>{"tag"in o&&t(0,i=o.tag)},n.$$.update=()=>{var o;n.$$.dirty&1&&t(1,r=(o=i.data.appearance)!=null?o:"line")},[i,r]}let XS=class extends Re{constructor(e){super(),Le(this,e,QS,GS,De,{tag:0})}};function qS(n){Qe(n,"svelte-blgtit",".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}")}function Xg(n){let e,t,r,i;return{c(){e=Ae("path"),P(e,"fill","none"),P(e,"stroke","url(#"+n[4]+")"),P(e,"stroke-width","1"),P(e,"d","M0 21 L14 0.5 L105 0.5")},m(o,s){ae(o,e,s),i=!0},p(o,s){n=o},i(o){i||(o&&kn(()=>{i&&(r&&r.end(1),t=Xo(e,fc,{duration:n[1],delay:n[0],easing:pl}),t.start())}),i=!0)},o(o){t&&t.invalidate(),o&&(r=ua(e,fc,{duration:n[1],delay:n[2],easing:Ys})),i=!1},d(o){o&&oe(e),o&&r&&r.end()}}}function YS(n){let e,t,r,i,o,s=n[3]&&Xg(n);return{c(){e=Ae("svg"),t=Ae("defs"),r=Ae("linearGradient"),i=Ae("stop"),o=Ae("stop"),s&&s.c(),P(i,"offset","25%"),P(i,"stop-color","white"),P(i,"stop-opacity","1"),P(o,"offset","100%"),P(o,"stop-color","white"),P(o,"stop-opacity","0.5"),P(r,"id",n[4]),P(r,"gradientUnits","userSpaceOnUse"),P(e,"class","line svelte-blgtit"),P(e,"viewBox","0 0 105 21")},m(a,l){ae(a,e,l),Y(e,t),Y(t,r),Y(r,i),Y(r,o),s&&s.m(e,null)},p(a,[l]){a[3]?s?(s.p(a,l),l&8&&q(s,1)):(s=Xg(a),s.c(),q(s,1),s.m(e,null)):s&&(Ie(),ee(s,1,1,()=>{s=null}),je())},i(a){q(s)},o(a){ee(s)},d(a){a&&oe(e),s&&s.d()}}}function KS(n,e,t){let{inDelay:r=0}=e,{duration:i=1e3}=e,{outDelay:o=0}=e,{unfolded:s}=e;const a=ul();return n.$$set=l=>{"inDelay"in l&&t(0,r=l.inDelay),"duration"in l&&t(1,i=l.duration),"outDelay"in l&&t(2,o=l.outDelay),"unfolded"in l&&t(3,s=l.unfolded)},[r,i,o,s,a]}let JS=class extends Re{constructor(e){super(),Le(this,e,KS,YS,De,{inDelay:0,duration:1,outDelay:2,unfolded:3},qS)}};function ZS(n){Qe(n,"svelte-1mgyhhn",`:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`)}function e9(n){let e,t,r;return{c(){e=ie("button"),P(e,"class","sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"),Se(e,"sc-carousel-dot__dot_active",n[0])},m(i,o){ae(i,e,o),t||(r=Ye(e,"click",n[1]),t=!0)},p(i,[o]){o&1&&Se(e,"sc-carousel-dot__dot_active",i[0])},i:Ee,o:Ee,d(i){i&&oe(e),t=!1,r()}}}function t9(n,e,t){let{active:r=!1}=e;function i(o){bi.call(this,n,o)}return n.$$set=o=>{"active"in o&&t(0,r=o.active)},[r,i]}let n9=class extends Re{constructor(e){super(),Le(this,e,t9,e9,De,{active:0},ZS)}};function r9(n){Qe(n,"svelte-670fde",".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}")}function qg(n,e,t){const r=n.slice();return r[5]=e[t],r[7]=t,r}function Yg(n,e){let t,r,i,o;function s(){return e[3](e[7])}return r=new n9({props:{active:e[1]===e[7]}}),r.$on("click",s),{key:n,first:null,c(){t=ie("div"),xe(r.$$.fragment),i=$e(),P(t,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=t},m(a,l){ae(a,t,l),be(r,t,null),Y(t,i),o=!0},p(a,l){e=a;const u={};l&3&&(u.active=e[1]===e[7]),r.$set(u)},i(a){o||(q(r.$$.fragment,a),o=!0)},o(a){ee(r.$$.fragment,a),o=!1},d(a){a&&oe(t),we(r)}}}function i9(n){let e,t=[],r=new Map,i,o=Array(n[0]);const s=a=>a[7];for(let a=0;a<o.length;a+=1){let l=qg(n,o,a),u=s(l);r.set(u,t[a]=Yg(u,l))}return{c(){e=ie("div");for(let a=0;a<t.length;a+=1)t[a].c();P(e,"class","sc-carousel-dots__container svelte-670fde")},m(a,l){ae(a,e,l);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);i=!0},p(a,[l]){l&7&&(o=Array(a[0]),Ie(),t=Np(t,l,s,1,a,o,r,e,Kb,Yg,null,qg),je())},i(a){if(!i){for(let l=0;l<o.length;l+=1)q(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)ee(t[l]);i=!1},d(a){a&&oe(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function o9(n,e,t){const r=uo();let{pagesCount:i=1}=e,{currentPageIndex:o=0}=e;function s(l){r("pageChange",l)}const a=l=>s(l);return n.$$set=l=>{"pagesCount"in l&&t(0,i=l.pagesCount),"currentPageIndex"in l&&t(1,o=l.currentPageIndex)},[i,o,s,a]}let s9=class extends Re{constructor(e){super(),Le(this,e,o9,i9,De,{pagesCount:0,currentPageIndex:1},r9)}};const Js="prev",ro="next";function a9(n){Qe(n,"svelte-1bftafx",":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}")}function l9(n){let e,t,r,i;return{c(){e=ie("button"),t=ie("i"),P(t,"class","sc-carousel-arrow__arrow svelte-1bftafx"),Se(t,"sc-carousel-arrow__arrow-next",n[0]===ro),Se(t,"sc-carousel-arrow__arrow-prev",n[0]===Js),P(e,"class","sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"),Se(e,"sc-carousel-arrow__circle_disabled",n[1])},m(o,s){ae(o,e,s),Y(e,t),r||(i=Ye(e,"click",n[2]),r=!0)},p(o,[s]){s&1&&Se(t,"sc-carousel-arrow__arrow-next",o[0]===ro),s&1&&Se(t,"sc-carousel-arrow__arrow-prev",o[0]===Js),s&2&&Se(e,"sc-carousel-arrow__circle_disabled",o[1])},i:Ee,o:Ee,d(o){o&&oe(e),r=!1,i()}}}function u9(n,e,t){let{direction:r=ro}=e,{disabled:i=!1}=e;function o(s){bi.call(this,n,s)}return n.$$set=s=>{"direction"in s&&t(0,r=s.direction),"disabled"in s&&t(1,i=s.disabled)},[r,i,o]}let Nw=class extends Re{constructor(e){super(),Le(this,e,u9,l9,De,{direction:0,disabled:1},a9)}};function c9(n){Qe(n,"svelte-i7yfid",".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}")}function d9(n){let e;return{c(){e=ie("div"),P(e,"class","sc-carousel-progress__indicator svelte-i7yfid"),fe(e,"width",n[0]+"%")},m(t,r){ae(t,e,r)},p(t,[r]){r&1&&fe(e,"width",t[0]+"%")},i:Ee,o:Ee,d(t){t&&oe(e)}}}const Kg=100;function h9(n,e,t){let r,{value:i=0}=e;return n.$$set=o=>{"value"in o&&t(1,i=o.value)},n.$$.update=()=>{n.$$.dirty&2&&t(0,r=Math.min(Math.max(i*Kg,0),Kg))},[r,i]}let f9=class extends Re{constructor(e){super(),Le(this,e,h9,d9,De,{value:1},c9)}};function p9(n,e){n.addEventListener("mousedown",e),n.addEventListener("touchstart",e,{passive:!0})}function v9(n,e){n.removeEventListener("mousedown",e),n.removeEventListener("touchstart",e)}function m9(n,e){n.addEventListener("mouseup",e),n.addEventListener("touchend",e)}function Jg(n,e){n.removeEventListener("mouseup",e),n.removeEventListener("touchend",e)}function g9(n,e){n.addEventListener("mousemove",e),n.addEventListener("touchmove",e)}function Zg(n,e){n.removeEventListener("mousemove",e),n.removeEventListener("touchmove",e)}function ov(n){return function(e,t){n.dispatchEvent(new CustomEvent(e,{detail:t}))}}const y9=110,A9=9,b9=111,w9=20;function jd(n){if("TouchEvent"in window&&n instanceof TouchEvent){const e=n.touches[0];return{x:e?e.clientX:0,y:e?e.clientY:0}}return{x:n.clientX,y:n.clientY}}function x9(n,{thresholdProvider:e}){const t=ov(n);let r,i,o=0,s,a=!1;function l(){return Date.now()-s>=b9&&Math.abs(o)>=w9}function u(h){s=Date.now(),o=0,a=!0;const f=jd(h);r=f.x,i=f.y,t("swipeStart",{x:r,y:i}),g9(window,c),m9(window,d)}function c(h){if(!a)return;const f=jd(h),p=f.x-r,v=f.y-i;r=f.x,i=f.y,t("swipeMove",{x:r,y:i,dx:p,dy:v}),p!==0&&Math.sign(p)!==Math.sign(o)&&(o=0),o+=p,Math.abs(o)>e()&&(t("swipeThresholdReached",{direction:o>0?Js:ro}),Jg(window,d),Zg(window,c))}function d(h){if(Jg(window,d),Zg(window,c),a=!1,!l()){t("swipeFailed");return}const f=jd(h);t("swipeEnd",{x:f.x,y:f.y})}return p9(n,u),{destroy(){v9(n,u)}}}function P9(n,e){n.addEventListener("mouseenter",e)}function E9(n,e){n.removeEventListener("mouseenter",e)}function C9(n,e){n.addEventListener("mouseleave",e)}function e0(n,e){n.removeEventListener("mouseleave",e)}function S9(n){const e=ov(n);function t(){C9(n,r),e("hovered",{value:!0})}function r(){e("hovered",{value:!1}),e0(n,r)}return P9(n,t),{destroy(){E9(n,t),e0(n,r)}}}const O9=(n,e)=>{const t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)};function Rs(n,e,t){return Math.max(n,Math.min(e,t))}function $9(n,e){n.addEventListener("touchstart",e,{passive:!0})}function M9(n,e){n.removeEventListener("touchstart",e)}function V9(n,e){n.addEventListener("touchend",e)}function t0(n,e){n.removeEventListener("touchend",e)}function T9(n){const e=ov(n);let t=0,r={x:0,y:0};function i({tapEndedAt:a,tapEndedPos:l}){const u=a-t,c=O9(r,l);return u<=y9&&c<=A9}function o(a){t=Date.now();const l=a.touches[0];r={x:l.clientX,y:l.clientY},V9(n,s)}function s(a){t0(n,s);const l=a.changedTouches[0];i({tapEndedAt:Date.now(),tapEndedPos:{x:l.clientX,y:l.clientY}})&&e("tapped")}return $9(n,o),{destroy(){M9(n,o),t0(n,s)}}}function _9({currentParticleIndex:n,particlesCount:e,clonesCountHead:t,clonesCountTotal:r,particlesToScroll:i}){return n===e-t?0:n===0?Ww({particlesCountWithoutClones:e-r,particlesToScroll:i})-1:Math.floor((n-t)/i)}function k9({currentParticleIndex:n,particlesToScroll:e}){return Math.ceil(n/e)}function I9({currentParticleIndex:n,particlesCount:e,clonesCountHead:t,clonesCountTotal:r,infinite:i,particlesToScroll:o}){return i?_9({currentParticleIndex:n,particlesCount:e,clonesCountHead:t,clonesCountTotal:r,particlesToScroll:o}):k9({currentParticleIndex:n,particlesToScroll:o})}function Ww({particlesCountWithoutClones:n,particlesToScroll:e}){return Math.ceil(n/e)}function j9({particlesCountWithoutClones:n,particlesToScroll:e,particlesToShow:t}){const r=Gw({particlesCountWithoutClones:n,particlesToScroll:e,particlesToShow:t});return Math.ceil(n/e)-r}function D9({infinite:n,particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:r}){return n?Ww({particlesCountWithoutClones:e,particlesToScroll:t}):j9({particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:r})}function L9({pageIndex:n,clonesCountHead:e,clonesCountTail:t,particlesToScroll:r,particlesCount:i}){return Rs(0,Math.min(e+n*r,i-t),i-1)}function R9({pageIndex:n,particlesToScroll:e,particlesCount:t,particlesToShow:r}){return Rs(0,Math.min(n*e,t-r),t-1)}function Dd({infinite:n,pageIndex:e,clonesCountHead:t,clonesCountTail:r,particlesToScroll:i,particlesCount:o,particlesToShow:s}){return n?L9({pageIndex:e,clonesCountHead:t,clonesCountTail:r,particlesToScroll:i,particlesCount:o}):R9({pageIndex:e,particlesToScroll:i,particlesCount:o,particlesToShow:s})}function z9({particlesContainerChildren:n,particleWidth:e}){for(let t=0;t<n.length;t++)n[t].style.minWidth=`${e}px`,n[t].style.maxWidth=`${e}px`}function Gw({particlesToScroll:n,particlesToShow:e,particlesCountWithoutClones:t}){const r=n-e;let i=e;for(;;){const o=t-i-r;if(o<e)return Math.max(o,0);i+=e+r}}function B9(n){return new ResizeObserver(e=>{n({width:e[0].contentRect.width})})}var F9=Object.defineProperty,H9=Object.defineProperties,U9=Object.getOwnPropertyDescriptors,n0=Object.getOwnPropertySymbols,N9=Object.prototype.hasOwnProperty,W9=Object.prototype.propertyIsEnumerable,r0=(n,e,t)=>e in n?F9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G9=(n,e)=>{for(var t in e||(e={}))N9.call(e,t)&&r0(n,t,e[t]);if(n0)for(var t of n0(e))W9.call(e,t)&&r0(n,t,e[t]);return n},Q9=(n,e)=>H9(n,U9(e));function X9({clonesCountHead:n,clonesCountTail:e,particlesContainerChildren:t}){const r=[];for(let s=0;s<e;s++)r.push(t[s].cloneNode(!0));const i=[],o=t.length;for(let s=o-1;s>o-1-n;s--)i.push(t[s].cloneNode(!0));return{clonesToAppend:r,clonesToPrepend:i}}function q9({particlesContainer:n,clonesToAppend:e,clonesToPrepend:t}){for(let r=0;r<e.length;r++)n.append(e[r]);for(let r=0;r<t.length;r++)n.prepend(t[r])}function Y9({infinite:n,particlesToShow:e,partialPageSize:t}){const r=n?{head:Math.ceil(t||e),tail:Math.ceil(e)}:{head:0,tail:0};return Q9(G9({},r),{total:r.head+r.tail})}const Ja=(n,e,t)=>n&&n.hasOwnProperty(e)?n[e]:t,yf=n=>e=>{n[e]&&n[e]()};var sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K9="Expected a function",Qw="__lodash_hash_undefined__",J9="[object Function]",Z9="[object GeneratorFunction]",eO="[object Symbol]",tO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nO=/^\w*$/,rO=/^\./,iO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oO=/[\\^$.*+?()[\]{}|]/g,sO=/\\(\\)?/g,aO=/^\[object .+?Constructor\]$/,lO=typeof sr=="object"&&sr&&sr.Object===Object&&sr,uO=typeof self=="object"&&self&&self.Object===Object&&self,sv=lO||uO||Function("return this")();function cO(n,e){return n==null?void 0:n[e]}function dO(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}var hO=Array.prototype,fO=Function.prototype,Xw=Object.prototype,Ld=sv["__core-js_shared__"],i0=function(){var n=/[^.]+$/.exec(Ld&&Ld.keys&&Ld.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),qw=fO.toString,av=Xw.hasOwnProperty,Yw=Xw.toString,pO=RegExp("^"+qw.call(av).replace(oO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),o0=sv.Symbol,vO=hO.splice,mO=Kw(sv,"Map"),Pl=Kw(Object,"create"),s0=o0?o0.prototype:void 0,a0=s0?s0.toString:void 0;function Bo(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function gO(){this.__data__=Pl?Pl(null):{}}function yO(n){return this.has(n)&&delete this.__data__[n]}function AO(n){var e=this.__data__;if(Pl){var t=e[n];return t===Qw?void 0:t}return av.call(e,n)?e[n]:void 0}function bO(n){var e=this.__data__;return Pl?e[n]!==void 0:av.call(e,n)}function wO(n,e){var t=this.__data__;return t[n]=Pl&&e===void 0?Qw:e,this}Bo.prototype.clear=gO;Bo.prototype.delete=yO;Bo.prototype.get=AO;Bo.prototype.has=bO;Bo.prototype.set=wO;function ca(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function xO(){this.__data__=[]}function PO(n){var e=this.__data__,t=nd(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():vO.call(e,t,1),!0}function EO(n){var e=this.__data__,t=nd(e,n);return t<0?void 0:e[t][1]}function CO(n){return nd(this.__data__,n)>-1}function SO(n,e){var t=this.__data__,r=nd(t,n);return r<0?t.push([n,e]):t[r][1]=e,this}ca.prototype.clear=xO;ca.prototype.delete=PO;ca.prototype.get=EO;ca.prototype.has=CO;ca.prototype.set=SO;function Yo(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function OO(){this.__data__={hash:new Bo,map:new(mO||ca),string:new Bo}}function $O(n){return rd(this,n).delete(n)}function MO(n){return rd(this,n).get(n)}function VO(n){return rd(this,n).has(n)}function TO(n,e){return rd(this,n).set(n,e),this}Yo.prototype.clear=OO;Yo.prototype.delete=$O;Yo.prototype.get=MO;Yo.prototype.has=VO;Yo.prototype.set=TO;function nd(n,e){for(var t=n.length;t--;)if(HO(n[t][0],e))return t;return-1}function _O(n,e){e=DO(e,n)?[e]:jO(e);for(var t=0,r=e.length;n!=null&&t<r;)n=n[BO(e[t++])];return t&&t==r?n:void 0}function kO(n){if(!Zw(n)||RO(n))return!1;var e=UO(n)||dO(n)?pO:aO;return e.test(FO(n))}function IO(n){if(typeof n=="string")return n;if(uv(n))return a0?a0.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function jO(n){return Jw(n)?n:zO(n)}function rd(n,e){var t=n.__data__;return LO(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Kw(n,e){var t=cO(n,e);return kO(t)?t:void 0}function DO(n,e){if(Jw(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||uv(n)?!0:nO.test(n)||!tO.test(n)||e!=null&&n in Object(e)}function LO(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function RO(n){return!!i0&&i0 in n}var zO=lv(function(n){n=WO(n);var e=[];return rO.test(n)&&e.push(""),n.replace(iO,function(t,r,i,o){e.push(i?o.replace(sO,"$1"):r||t)}),e});function BO(n){if(typeof n=="string"||uv(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function FO(n){if(n!=null){try{return qw.call(n)}catch{}try{return n+""}catch{}}return""}function lv(n,e){if(typeof n!="function"||e&&typeof e!="function")throw new TypeError(K9);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s),s};return t.cache=new(lv.Cache||Yo),t}lv.Cache=Yo;function HO(n,e){return n===e||n!==n&&e!==e}var Jw=Array.isArray;function UO(n){var e=Zw(n)?Yw.call(n):"";return e==J9||e==Z9}function Zw(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function NO(n){return!!n&&typeof n=="object"}function uv(n){return typeof n=="symbol"||NO(n)&&Yw.call(n)==eO}function WO(n){return n==null?"":IO(n)}function GO(n,e,t){var r=n==null?void 0:_O(n,e);return r===void 0?t:r}var cu=GO,Cc={},QO={get exports(){return Cc},set exports(n){Cc=n}};(function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object GeneratorFunction]",h="[object Map]",f="[object Number]",p="[object Object]",v="[object Promise]",b="[object RegExp]",g="[object Set]",y="[object String]",E="[object Symbol]",C="[object WeakMap]",V="[object ArrayBuffer]",M="[object DataView]",z="[object Float32Array]",U="[object Float64Array]",D="[object Int8Array]",m="[object Int16Array]",A="[object Int32Array]",x="[object Uint8Array]",S="[object Uint8ClampedArray]",$="[object Uint16Array]",T="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,R=/\w*$/,ne=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,Z={};Z[o]=Z[s]=Z[V]=Z[M]=Z[a]=Z[l]=Z[z]=Z[U]=Z[D]=Z[m]=Z[A]=Z[h]=Z[f]=Z[p]=Z[b]=Z[g]=Z[y]=Z[E]=Z[x]=Z[S]=Z[$]=Z[T]=!0,Z[u]=Z[c]=Z[C]=!1;var he=typeof sr=="object"&&sr&&sr.Object===Object&&sr,pe=typeof self=="object"&&self&&self.Object===Object&&self,ge=he||pe||Function("return this")(),Me=e&&!e.nodeType&&e,_=Me&&!0&&n&&!n.nodeType&&n,j=_&&_.exports===Me;function N(w,k){return w.set(k[0],k[1]),w}function B(w,k){return w.add(k),w}function X(w,k){for(var Q=-1,de=w?w.length:0;++Q<de&&k(w[Q],Q,w)!==!1;);return w}function L(w,k){for(var Q=-1,de=k.length,ze=w.length;++Q<de;)w[ze+Q]=k[Q];return w}function G(w,k,Q,de){var ze=-1,Te=w?w.length:0;for(de;++ze<Te;)Q=k(Q,w[ze],ze,w);return Q}function K(w,k){for(var Q=-1,de=Array(w);++Q<w;)de[Q]=k(Q);return de}function J(w,k){return w==null?void 0:w[k]}function re(w){var k=!1;if(w!=null&&typeof w.toString!="function")try{k=!!(w+"")}catch{}return k}function te(w){var k=-1,Q=Array(w.size);return w.forEach(function(de,ze){Q[++k]=[ze,de]}),Q}function se(w,k){return function(Q){return w(k(Q))}}function ve(w){var k=-1,Q=Array(w.size);return w.forEach(function(de){Q[++k]=de}),Q}var Ce=Array.prototype,ke=Function.prototype,Ve=Object.prototype,Pe=ge["__core-js_shared__"],Fe=function(){var w=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),it=ke.toString,Ze=Ve.hasOwnProperty,zt=Ve.toString,an=RegExp("^"+it.call(Ze).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mt=j?ge.Buffer:void 0,pt=ge.Symbol,Qt=ge.Uint8Array,Ne=se(Object.getPrototypeOf,Object),Xt=Object.create,Vt=Ve.propertyIsEnumerable,Gr=Ce.splice,ur=Object.getOwnPropertySymbols,In=Mt?Mt.isBuffer:void 0,Ci=se(Object.keys,Object),Sr=I(ge,"DataView"),en=I(ge,"Map"),Et=I(ge,"Promise"),Sn=I(ge,"Set"),cr=I(ge,"WeakMap"),Bt=I(Object,"create"),jn=wn(Sr),Dn=wn(en),Qr=wn(Et),Ln=wn(Sn),Si=wn(cr),Jn=pt?pt.prototype:void 0,Ko=Jn?Jn.valueOf:void 0;function dr(w){var k=-1,Q=w?w.length:0;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function Oi(){this.__data__=Bt?Bt(null):{}}function da(w){return this.has(w)&&delete this.__data__[w]}function ha(w){var k=this.__data__;if(Bt){var Q=k[w];return Q===r?void 0:Q}return Ze.call(k,w)?k[w]:void 0}function fo(w){var k=this.__data__;return Bt?k[w]!==void 0:Ze.call(k,w)}function Xr(w,k){var Q=this.__data__;return Q[w]=Bt&&k===void 0?r:k,this}dr.prototype.clear=Oi,dr.prototype.delete=da,dr.prototype.get=ha,dr.prototype.has=fo,dr.prototype.set=Xr;function Ft(w){var k=-1,Q=w?w.length:0;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function Jo(){this.__data__=[]}function fa(w){var k=this.__data__,Q=Zn(k,w);if(Q<0)return!1;var de=k.length-1;return Q==de?k.pop():Gr.call(k,Q,1),!0}function Zo(w){var k=this.__data__,Q=Zn(k,w);return Q<0?void 0:k[Q][1]}function es(w){return Zn(this.__data__,w)>-1}function ts(w,k){var Q=this.__data__,de=Zn(Q,w);return de<0?Q.push([w,k]):Q[de][1]=k,this}Ft.prototype.clear=Jo,Ft.prototype.delete=fa,Ft.prototype.get=Zo,Ft.prototype.has=es,Ft.prototype.set=ts;function Ht(w){var k=-1,Q=w?w.length:0;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function po(){this.__data__={hash:new dr,map:new(en||Ft),string:new dr}}function hr(w){return O(this,w).delete(w)}function qr(w){return O(this,w).get(w)}function Yr(w){return O(this,w).has(w)}function $i(w,k){return O(this,w).set(w,k),this}Ht.prototype.clear=po,Ht.prototype.delete=hr,Ht.prototype.get=qr,Ht.prototype.has=Yr,Ht.prototype.set=$i;function qt(w){this.__data__=new Ft(w)}function pa(){this.__data__=new Ft}function va(w){return this.__data__.delete(w)}function Mi(w){return this.__data__.get(w)}function ln(w){return this.__data__.has(w)}function Or(w,k){var Q=this.__data__;if(Q instanceof Ft){var de=Q.__data__;if(!en||de.length<t-1)return de.push([w,k]),this;Q=this.__data__=new Ht(de)}return Q.set(w,k),this}qt.prototype.clear=pa,qt.prototype.delete=va,qt.prototype.get=Mi,qt.prototype.has=ln,qt.prototype.set=Or;function mn(w,k){var Q=Aa(w)||os(w)?K(w.length,String):[],de=Q.length,ze=!!de;for(var Te in w)Ze.call(w,Te)&&!(ze&&(Te=="length"||ft(Te,de)))&&Q.push(Te);return Q}function On(w,k,Q){var de=w[k];(!(Ze.call(w,k)&&zl(de,Q))||Q===void 0&&!(k in w))&&(w[k]=Q)}function Zn(w,k){for(var Q=w.length;Q--;)if(zl(w[Q][0],k))return Q;return-1}function _t(w,k){return w&&ki(k,wa(k),w)}function gn(w,k,Q,de,ze,Te,et){var Ke;if(de&&(Ke=Te?de(w,ze,Te,et):de(w)),Ke!==void 0)return Ke;if(!Mr(w))return w;var Dt=Aa(w);if(Dt){if(Ke=me(w),!k)return vo(w,Ke)}else{var lt=le(w),un=lt==c||lt==d;if(Bl(w))return $r(w,k);if(lt==p||lt==o||un&&!Te){if(re(w))return Te?w:{};if(Ke=Oe(un?{}:w),!k)return ga(w,_t(Ke,w))}else{if(!Z[lt])return Te?w:{};Ke=We(w,lt,gn,k)}}et||(et=new qt);var $n=et.get(w);if($n)return $n;if(et.set(w,Ke),!Dt)var Ut=Q?ya(w):wa(w);return X(Ut||w,function(cn,nn){Ut&&(nn=cn,cn=w[nn]),On(Ke,nn,gn(cn,k,Q,de,nn,w,et))}),Ke}function ns(w){return Mr(w)?Xt(w):{}}function rs(w,k,Q){var de=k(w);return Aa(w)?de:L(de,Q(w))}function Vi(w){return zt.call(w)}function yn(w){if(!Mr(w)||tn(w))return!1;var k=ba(w)||re(w)?an:ne;return k.test(wn(w))}function Ti(w){if(!bn(w))return Ci(w);var k=[];for(var Q in Object(w))Ze.call(w,Q)&&Q!="constructor"&&k.push(Q);return k}function $r(w,k){if(k)return w.slice();var Q=new w.constructor(w.length);return w.copy(Q),Q}function Kr(w){var k=new w.constructor(w.byteLength);return new Qt(k).set(new Qt(w)),k}function fr(w,k){var Q=k?Kr(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.byteLength)}function _i(w,k,Q){var de=k?Q(te(w),!0):te(w);return G(de,N,new w.constructor)}function Jr(w){var k=new w.constructor(w.source,R.exec(w));return k.lastIndex=w.lastIndex,k}function er(w,k,Q){var de=k?Q(ve(w),!0):ve(w);return G(de,B,new w.constructor)}function ma(w){return Ko?Object(Ko.call(w)):{}}function is(w,k){var Q=k?Kr(w.buffer):w.buffer;return new w.constructor(Q,w.byteOffset,w.length)}function vo(w,k){var Q=-1,de=w.length;for(k||(k=Array(de));++Q<de;)k[Q]=w[Q];return k}function ki(w,k,Q,de){Q||(Q={});for(var ze=-1,Te=k.length;++ze<Te;){var et=k[ze],Ke=void 0;On(Q,et,Ke===void 0?w[et]:Ke)}return Q}function ga(w,k){return ki(w,W(w),k)}function ya(w){return rs(w,wa,W)}function O(w,k){var Q=w.__data__;return An(k)?Q[typeof k=="string"?"string":"hash"]:Q.map}function I(w,k){var Q=J(w,k);return yn(Q)?Q:void 0}var W=ur?se(ur,Object):ad,le=Vi;(Sr&&le(new Sr(new ArrayBuffer(1)))!=M||en&&le(new en)!=h||Et&&le(Et.resolve())!=v||Sn&&le(new Sn)!=g||cr&&le(new cr)!=C)&&(le=function(w){var k=zt.call(w),Q=k==p?w.constructor:void 0,de=Q?wn(Q):void 0;if(de)switch(de){case jn:return M;case Dn:return h;case Qr:return v;case Ln:return g;case Si:return C}return k});function me(w){var k=w.length,Q=w.constructor(k);return k&&typeof w[0]=="string"&&Ze.call(w,"index")&&(Q.index=w.index,Q.input=w.input),Q}function Oe(w){return typeof w.constructor=="function"&&!bn(w)?ns(Ne(w)):{}}function We(w,k,Q,de){var ze=w.constructor;switch(k){case V:return Kr(w);case a:case l:return new ze(+w);case M:return fr(w,de);case z:case U:case D:case m:case A:case x:case S:case $:case T:return is(w,de);case h:return _i(w,de,Q);case f:case y:return new ze(w);case b:return Jr(w);case g:return er(w,de,Q);case E:return ma(w)}}function ft(w,k){return k=k??i,!!k&&(typeof w=="number"||ce.test(w))&&w>-1&&w%1==0&&w<k}function An(w){var k=typeof w;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?w!=="__proto__":w===null}function tn(w){return!!Fe&&Fe in w}function bn(w){var k=w&&w.constructor,Q=typeof k=="function"&&k.prototype||Ve;return w===Q}function wn(w){if(w!=null){try{return it.call(w)}catch{}try{return w+""}catch{}}return""}function Rl(w){return gn(w,!0,!0)}function zl(w,k){return w===k||w!==w&&k!==k}function os(w){return sd(w)&&Ze.call(w,"callee")&&(!Vt.call(w,"callee")||zt.call(w)==o)}var Aa=Array.isArray;function ss(w){return w!=null&&Fl(w.length)&&!ba(w)}function sd(w){return Hl(w)&&ss(w)}var Bl=In||ld;function ba(w){var k=Mr(w)?zt.call(w):"";return k==c||k==d}function Fl(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=i}function Mr(w){var k=typeof w;return!!w&&(k=="object"||k=="function")}function Hl(w){return!!w&&typeof w=="object"}function wa(w){return ss(w)?mn(w):Ti(w)}function ad(){return[]}function ld(){return!1}n.exports=Rl})(QO,Cc);const XO=Cc;var Sc={},qO={get exports(){return Sc},set exports(n){Sc=n}};(function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Function]",p="[object GeneratorFunction]",v="[object Map]",b="[object Number]",g="[object Null]",y="[object Object]",E="[object Promise]",C="[object Proxy]",V="[object RegExp]",M="[object Set]",z="[object String]",U="[object Symbol]",D="[object Undefined]",m="[object WeakMap]",A="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",$="[object Float64Array]",T="[object Int8Array]",F="[object Int16Array]",R="[object Int32Array]",ne="[object Uint8Array]",ce="[object Uint8ClampedArray]",Z="[object Uint16Array]",he="[object Uint32Array]",pe=/[\\^$.*+?()[\]{}|]/g,ge=/^\[object .+?Constructor\]$/,Me=/^(?:0|[1-9]\d*)$/,_={};_[S]=_[$]=_[T]=_[F]=_[R]=_[ne]=_[ce]=_[Z]=_[he]=!0,_[a]=_[l]=_[A]=_[c]=_[x]=_[d]=_[h]=_[f]=_[v]=_[b]=_[y]=_[V]=_[M]=_[z]=_[m]=!1;var j=typeof sr=="object"&&sr&&sr.Object===Object&&sr,N=typeof self=="object"&&self&&self.Object===Object&&self,B=j||N||Function("return this")(),X=e&&!e.nodeType&&e,L=X&&!0&&n&&!n.nodeType&&n,G=L&&L.exports===X,K=G&&j.process,J=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),re=J&&J.isTypedArray;function te(w,k){for(var Q=-1,de=w==null?0:w.length,ze=0,Te=[];++Q<de;){var et=w[Q];k(et,Q,w)&&(Te[ze++]=et)}return Te}function se(w,k){for(var Q=-1,de=k.length,ze=w.length;++Q<de;)w[ze+Q]=k[Q];return w}function ve(w,k){for(var Q=-1,de=w==null?0:w.length;++Q<de;)if(k(w[Q],Q,w))return!0;return!1}function Ce(w,k){for(var Q=-1,de=Array(w);++Q<w;)de[Q]=k(Q);return de}function ke(w){return function(k){return w(k)}}function Ve(w,k){return w.has(k)}function Pe(w,k){return w==null?void 0:w[k]}function Fe(w){var k=-1,Q=Array(w.size);return w.forEach(function(de,ze){Q[++k]=[ze,de]}),Q}function it(w,k){return function(Q){return w(k(Q))}}function Ze(w){var k=-1,Q=Array(w.size);return w.forEach(function(de){Q[++k]=de}),Q}var zt=Array.prototype,an=Function.prototype,Mt=Object.prototype,pt=B["__core-js_shared__"],Qt=an.toString,Ne=Mt.hasOwnProperty,Xt=function(){var w=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Vt=Mt.toString,Gr=RegExp("^"+Qt.call(Ne).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ur=G?B.Buffer:void 0,In=B.Symbol,Ci=B.Uint8Array,Sr=Mt.propertyIsEnumerable,en=zt.splice,Et=In?In.toStringTag:void 0,Sn=Object.getOwnPropertySymbols,cr=ur?ur.isBuffer:void 0,Bt=it(Object.keys,Object),jn=W(B,"DataView"),Dn=W(B,"Map"),Qr=W(B,"Promise"),Ln=W(B,"Set"),Si=W(B,"WeakMap"),Jn=W(Object,"create"),Ko=wn(jn),dr=wn(Dn),Oi=wn(Qr),da=wn(Ln),ha=wn(Si),fo=In?In.prototype:void 0,Xr=fo?fo.valueOf:void 0;function Ft(w){var k=-1,Q=w==null?0:w.length;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function Jo(){this.__data__=Jn?Jn(null):{},this.size=0}function fa(w){var k=this.has(w)&&delete this.__data__[w];return this.size-=k?1:0,k}function Zo(w){var k=this.__data__;if(Jn){var Q=k[w];return Q===r?void 0:Q}return Ne.call(k,w)?k[w]:void 0}function es(w){var k=this.__data__;return Jn?k[w]!==void 0:Ne.call(k,w)}function ts(w,k){var Q=this.__data__;return this.size+=this.has(w)?0:1,Q[w]=Jn&&k===void 0?r:k,this}Ft.prototype.clear=Jo,Ft.prototype.delete=fa,Ft.prototype.get=Zo,Ft.prototype.has=es,Ft.prototype.set=ts;function Ht(w){var k=-1,Q=w==null?0:w.length;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function po(){this.__data__=[],this.size=0}function hr(w){var k=this.__data__,Q=$r(k,w);if(Q<0)return!1;var de=k.length-1;return Q==de?k.pop():en.call(k,Q,1),--this.size,!0}function qr(w){var k=this.__data__,Q=$r(k,w);return Q<0?void 0:k[Q][1]}function Yr(w){return $r(this.__data__,w)>-1}function $i(w,k){var Q=this.__data__,de=$r(Q,w);return de<0?(++this.size,Q.push([w,k])):Q[de][1]=k,this}Ht.prototype.clear=po,Ht.prototype.delete=hr,Ht.prototype.get=qr,Ht.prototype.has=Yr,Ht.prototype.set=$i;function qt(w){var k=-1,Q=w==null?0:w.length;for(this.clear();++k<Q;){var de=w[k];this.set(de[0],de[1])}}function pa(){this.size=0,this.__data__={hash:new Ft,map:new(Dn||Ht),string:new Ft}}function va(w){var k=I(this,w).delete(w);return this.size-=k?1:0,k}function Mi(w){return I(this,w).get(w)}function ln(w){return I(this,w).has(w)}function Or(w,k){var Q=I(this,w),de=Q.size;return Q.set(w,k),this.size+=Q.size==de?0:1,this}qt.prototype.clear=pa,qt.prototype.delete=va,qt.prototype.get=Mi,qt.prototype.has=ln,qt.prototype.set=Or;function mn(w){var k=-1,Q=w==null?0:w.length;for(this.__data__=new qt;++k<Q;)this.add(w[k])}function On(w){return this.__data__.set(w,r),this}function Zn(w){return this.__data__.has(w)}mn.prototype.add=mn.prototype.push=On,mn.prototype.has=Zn;function _t(w){var k=this.__data__=new Ht(w);this.size=k.size}function gn(){this.__data__=new Ht,this.size=0}function ns(w){var k=this.__data__,Q=k.delete(w);return this.size=k.size,Q}function rs(w){return this.__data__.get(w)}function Vi(w){return this.__data__.has(w)}function yn(w,k){var Q=this.__data__;if(Q instanceof Ht){var de=Q.__data__;if(!Dn||de.length<t-1)return de.push([w,k]),this.size=++Q.size,this;Q=this.__data__=new qt(de)}return Q.set(w,k),this.size=Q.size,this}_t.prototype.clear=gn,_t.prototype.delete=ns,_t.prototype.get=rs,_t.prototype.has=Vi,_t.prototype.set=yn;function Ti(w,k){var Q=os(w),de=!Q&&zl(w),ze=!Q&&!de&&ss(w),Te=!Q&&!de&&!ze&&Hl(w),et=Q||de||ze||Te,Ke=et?Ce(w.length,String):[],Dt=Ke.length;for(var lt in w)Ne.call(w,lt)&&!(et&&(lt=="length"||ze&&(lt=="offset"||lt=="parent")||Te&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||We(lt,Dt)))&&Ke.push(lt);return Ke}function $r(w,k){for(var Q=w.length;Q--;)if(Rl(w[Q][0],k))return Q;return-1}function Kr(w,k,Q){var de=k(w);return os(w)?de:se(de,Q(w))}function fr(w){return w==null?w===void 0?D:g:Et&&Et in Object(w)?le(w):bn(w)}function _i(w){return Mr(w)&&fr(w)==a}function Jr(w,k,Q,de,ze){return w===k?!0:w==null||k==null||!Mr(w)&&!Mr(k)?w!==w&&k!==k:er(w,k,Q,de,Jr,ze)}function er(w,k,Q,de,ze,Te){var et=os(w),Ke=os(k),Dt=et?l:Oe(w),lt=Ke?l:Oe(k);Dt=Dt==a?y:Dt,lt=lt==a?y:lt;var un=Dt==y,$n=lt==y,Ut=Dt==lt;if(Ut&&ss(w)){if(!ss(k))return!1;et=!0,un=!1}if(Ut&&!un)return Te||(Te=new _t),et||Hl(w)?ki(w,k,Q,de,ze,Te):ga(w,k,Dt,Q,de,ze,Te);if(!(Q&i)){var cn=un&&Ne.call(w,"__wrapped__"),nn=$n&&Ne.call(k,"__wrapped__");if(cn||nn){var Ii=cn?w.value():w,Zr=nn?k.value():k;return Te||(Te=new _t),ze(Ii,Zr,Q,de,Te)}}return Ut?(Te||(Te=new _t),ya(w,k,Q,de,ze,Te)):!1}function ma(w){if(!Fl(w)||An(w))return!1;var k=Bl(w)?Gr:ge;return k.test(wn(w))}function is(w){return Mr(w)&&ba(w.length)&&!!_[fr(w)]}function vo(w){if(!tn(w))return Bt(w);var k=[];for(var Q in Object(w))Ne.call(w,Q)&&Q!="constructor"&&k.push(Q);return k}function ki(w,k,Q,de,ze,Te){var et=Q&i,Ke=w.length,Dt=k.length;if(Ke!=Dt&&!(et&&Dt>Ke))return!1;var lt=Te.get(w);if(lt&&Te.get(k))return lt==k;var un=-1,$n=!0,Ut=Q&o?new mn:void 0;for(Te.set(w,k),Te.set(k,w);++un<Ke;){var cn=w[un],nn=k[un];if(de)var Ii=et?de(nn,cn,un,k,w,Te):de(cn,nn,un,w,k,Te);if(Ii!==void 0){if(Ii)continue;$n=!1;break}if(Ut){if(!ve(k,function(Zr,mo){if(!Ve(Ut,mo)&&(cn===Zr||ze(cn,Zr,Q,de,Te)))return Ut.push(mo)})){$n=!1;break}}else if(!(cn===nn||ze(cn,nn,Q,de,Te))){$n=!1;break}}return Te.delete(w),Te.delete(k),$n}function ga(w,k,Q,de,ze,Te,et){switch(Q){case x:if(w.byteLength!=k.byteLength||w.byteOffset!=k.byteOffset)return!1;w=w.buffer,k=k.buffer;case A:return!(w.byteLength!=k.byteLength||!Te(new Ci(w),new Ci(k)));case c:case d:case b:return Rl(+w,+k);case h:return w.name==k.name&&w.message==k.message;case V:case z:return w==k+"";case v:var Ke=Fe;case M:var Dt=de&i;if(Ke||(Ke=Ze),w.size!=k.size&&!Dt)return!1;var lt=et.get(w);if(lt)return lt==k;de|=o,et.set(w,k);var un=ki(Ke(w),Ke(k),de,ze,Te,et);return et.delete(w),un;case U:if(Xr)return Xr.call(w)==Xr.call(k)}return!1}function ya(w,k,Q,de,ze,Te){var et=Q&i,Ke=O(w),Dt=Ke.length,lt=O(k),un=lt.length;if(Dt!=un&&!et)return!1;for(var $n=Dt;$n--;){var Ut=Ke[$n];if(!(et?Ut in k:Ne.call(k,Ut)))return!1}var cn=Te.get(w);if(cn&&Te.get(k))return cn==k;var nn=!0;Te.set(w,k),Te.set(k,w);for(var Ii=et;++$n<Dt;){Ut=Ke[$n];var Zr=w[Ut],mo=k[Ut];if(de)var wv=et?de(mo,Zr,Ut,k,w,Te):de(Zr,mo,Ut,w,k,Te);if(!(wv===void 0?Zr===mo||ze(Zr,mo,Q,de,Te):wv)){nn=!1;break}Ii||(Ii=Ut=="constructor")}if(nn&&!Ii){var Ul=w.constructor,Nl=k.constructor;Ul!=Nl&&"constructor"in w&&"constructor"in k&&!(typeof Ul=="function"&&Ul instanceof Ul&&typeof Nl=="function"&&Nl instanceof Nl)&&(nn=!1)}return Te.delete(w),Te.delete(k),nn}function O(w){return Kr(w,wa,me)}function I(w,k){var Q=w.__data__;return ft(k)?Q[typeof k=="string"?"string":"hash"]:Q.map}function W(w,k){var Q=Pe(w,k);return ma(Q)?Q:void 0}function le(w){var k=Ne.call(w,Et),Q=w[Et];try{w[Et]=void 0;var de=!0}catch{}var ze=Vt.call(w);return de&&(k?w[Et]=Q:delete w[Et]),ze}var me=Sn?function(w){return w==null?[]:(w=Object(w),te(Sn(w),function(k){return Sr.call(w,k)}))}:ad,Oe=fr;(jn&&Oe(new jn(new ArrayBuffer(1)))!=x||Dn&&Oe(new Dn)!=v||Qr&&Oe(Qr.resolve())!=E||Ln&&Oe(new Ln)!=M||Si&&Oe(new Si)!=m)&&(Oe=function(w){var k=fr(w),Q=k==y?w.constructor:void 0,de=Q?wn(Q):"";if(de)switch(de){case Ko:return x;case dr:return v;case Oi:return E;case da:return M;case ha:return m}return k});function We(w,k){return k=k??s,!!k&&(typeof w=="number"||Me.test(w))&&w>-1&&w%1==0&&w<k}function ft(w){var k=typeof w;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?w!=="__proto__":w===null}function An(w){return!!Xt&&Xt in w}function tn(w){var k=w&&w.constructor,Q=typeof k=="function"&&k.prototype||Mt;return w===Q}function bn(w){return Vt.call(w)}function wn(w){if(w!=null){try{return Qt.call(w)}catch{}try{return w+""}catch{}}return""}function Rl(w,k){return w===k||w!==w&&k!==k}var zl=_i(function(){return arguments}())?_i:function(w){return Mr(w)&&Ne.call(w,"callee")&&!Sr.call(w,"callee")},os=Array.isArray;function Aa(w){return w!=null&&ba(w.length)&&!Bl(w)}var ss=cr||ld;function sd(w,k){return Jr(w,k)}function Bl(w){if(!Fl(w))return!1;var k=fr(w);return k==f||k==p||k==u||k==C}function ba(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=s}function Fl(w){var k=typeof w;return w!=null&&(k=="object"||k=="function")}function Mr(w){return w!=null&&typeof w=="object"}var Hl=re?ke(re):is;function wa(w){return Aa(w)?Ti(w):vo(w)}function ad(){return[]}function ld(){return!1}n.exports=sd})(qO,Sc);const YO=Sc,KO=(n,e)=>YO(n,e),JO=n=>Object.keys(n||{}),ZO=(n,e)=>{const t={};return n.forEach(r=>{t[r]=e[r]}),t},e$=()=>{const n={},e=(t,r)=>{const{watcherName:i,fn:o}=t,{prop:s,value:a}=r;n[i]||(n[i]={deps:{},fn:o}),n[i].deps[s]=a};return{subscribers:n,subscribe(t,r){t&&e(t,r)},notify(t,r){Object.entries(n).forEach(([i,{deps:o,fn:s}])=>{const a=JO(o);if(a.includes(r)){const l=ZO(a,t);KO(o,l)||(n[i].deps=l,s())}})}}},t$=()=>{let n=null;return{targetWatcher(e,t){n={watcherName:e,fn:t},n.fn(),n=null},getTarget(){return n}}};function n$(n,e){const t=cu(n,"data",{}),r=cu(n,"watch",{}),i=cu(n,"methods",{}),o=cu(e,"onChange",()=>{}),{subscribe:s,notify:a,subscribers:l}=e$(),{targetWatcher:u,getTarget:c}=t$();let d;const h={},f=()=>({data:d,methods:h});let p=!1;const v=g=>(...y)=>{p=!0;const E=g(...y);return p=!1,E};Object.entries(i).forEach(([g,y])=>{h[g]=v((...E)=>y(f(),...E)),Object.defineProperty(h[g],"name",{value:g})}),d=new Proxy(XO(t),{get(g,y){return c()&&!p&&s(c(),{prop:y,value:g[y]}),Reflect.get(...arguments)},set(g,y,E){return g[y]===E||(Reflect.set(...arguments),c()||(o&&o(y,E),a(d,y))),!0}}),Object.entries(r).forEach(([g,y])=>{u(g,()=>{y(f())})});const b=[d,h];return b._internal={_getSubscribers(){return l}},b}function r$({pageIndex:n,particlesToShow:e,particlesToScroll:t,particlesCount:r}){const i=n===0?0:e-t,o=n*e-n*i,s=o+Math.max(e,t)-1,a=[];for(let l=o;l<=Math.min(r-1,s);l++)a.push(l);return a}function i$({infinite:n,pageIndex:e,pagesCount:t,particlesCount:r,particlesToShow:i,particlesToScroll:o}){const s=Rs(0,e,t-1);let a=s-1,l=s+1;a=n?a<0?t-1:a:Math.max(0,a),l=n?l>t-1?0:l:Math.min(t-1,l);const u=[...new Set([a,s,l,0,t-1])].sort((d,h)=>d-h),c=u.flatMap(d=>r$({pageIndex:d,particlesToShow:i,particlesToScroll:o,particlesCount:r}));return{pageIndexes:u,particleIndexes:[...new Set(c)].sort((d,h)=>d-h)}}const o$=(n,e)=>(n(),setInterval(n,e));var s$=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const a$=35,l0=1;let l$=class{constructor({onProgressValueChange:e}){this._onProgressValueChange=e,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(e){this._autoplayDuration=e}start(e){return new Promise(t=>{this.reset();const r=Math.min(a$,Math.max(this._autoplayDuration,1));let i=-r;this._interval=o$(()=>s$(this,null,function*(){if(this._paused)return;i+=r;const o=i/this._autoplayDuration;this._onProgressValueChange(o),o>l0&&(this.reset(),yield e(),t())}),r)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(l0)}};var ti=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function u$(n){const e=new l$({onProgressValueChange:o=>{n("progressValue",1-o)}}),t=n$({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:o}){o.loaded=i$({infinite:o.infinite,pageIndex:o.currentPageIndex,pagesCount:o.pagesCount,particlesCount:o.particlesCountWithoutClones,particlesToShow:o.particlesToShow,particlesToScroll:o.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:o}){o.currentPageIndex=I9({currentParticleIndex:o.currentParticleIndex,particlesCount:o.particlesCount,clonesCountHead:o.clonesCountHead,clonesCountTotal:o.clonesCountTotal,infinite:o.infinite,particlesToScroll:o.particlesToScroll})},setPartialPageSize({data:o}){o.partialPageSize=Gw({particlesToScroll:o.particlesToScroll,particlesToShow:o.particlesToShow,particlesCountWithoutClones:o.particlesCountWithoutClones})},setClonesCount({data:o}){const{head:s,tail:a}=Y9({infinite:o.infinite,particlesToShow:o.particlesToShow,partialPageSize:o.partialPageSize});o.clonesCountHead=s,o.clonesCountTail=a,o.clonesCountTotal=s+a},setProgressManagerAutoplayDuration({data:o}){e.setAutoplayDuration(o.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:o,focused:s}}){o&&(s?e.pause():e.resume())},initDuration({data:o}){o.durationMs=o.durationMsInit},applyAutoplay({data:o,methods:{_applyAutoplayIfNeeded:s}}){o.autoplay&&s(o.autoplay)},setPagesCount({data:o}){o.pagesCount=D9({infinite:o.infinite,particlesCountWithoutClones:o.particlesCountWithoutClones,particlesToScroll:o.particlesToScroll,particlesToShow:o.particlesToShow})},setParticlesToShow({data:o}){o.particlesToShow=Rs(1,o.particlesToShowInit,o.particlesCountWithoutClones)},setParticlesToScroll({data:o}){o.particlesToScroll=Rs(1,o.particlesToScrollInit,o.particlesCountWithoutClones)}},methods:{_prev({data:o}){o.currentParticleIndex=Dd({infinite:o.infinite,pageIndex:o.currentPageIndex-1,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},_next({data:o}){o.currentParticleIndex=Dd({infinite:o.infinite,pageIndex:o.currentPageIndex+1,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},_moveToParticle({data:o},s){o.currentParticleIndex=Rs(0,s,o.particlesCount-1)},toggleFocused({data:o}){o.focused=!o.focused},_applyAutoplayIfNeeded(o){return ti(this,arguments,function*({data:s,methods:a}){if(!s.infinite&&(s.autoplayDirection===ro&&s.currentParticleIndex===s.particlesCount-1||s.autoplayDirection===Js&&s.currentParticleIndex===0)){e.reset();return}if(s.autoplay){const l=()=>yf({[ro]:()=>ti(this,null,function*(){return a.showNextPage()}),[Js]:()=>ti(this,null,function*(){return a.showPrevPage()})})(s.autoplayDirection);yield e.start(l)}})},_jumpIfNeeded(o){return ti(this,arguments,function*({data:s,methods:a}){let l=!1;return s.infinite&&(s.currentParticleIndex===0?(yield a.showParticle(s.particlesCount-s.clonesCountTotal,{animated:!1}),l=!0):s.currentParticleIndex===s.particlesCount-s.clonesCountTail&&(yield a.showParticle(s.clonesCountHead,{animated:!1}),l=!0)),l})},changePage(o,s,a){return ti(this,arguments,function*({data:l,methods:u},c,d){e.reset(),!l.disabled&&(l.disabled=!0,c(),yield u.offsetPage({animated:Ja(d,"animated",!0)}),l.disabled=!1,!(yield u._jumpIfNeeded())&&u._applyAutoplayIfNeeded())})},showNextPage(o,s){return ti(this,arguments,function*({data:a,methods:l},u){a.disabled||(yield l.changePage(l._next,u))})},showPrevPage(o,s){return ti(this,arguments,function*({data:a,methods:l},u){a.disabled||(yield l.changePage(l._prev,u))})},showParticle(o,s,a){return ti(this,arguments,function*({methods:l},u,c){yield l.changePage(()=>l._moveToParticle(u),c)})},_getParticleIndexByPageIndex({data:o},s){return Dd({infinite:o.infinite,pageIndex:s,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},showPage(o,s,a){return ti(this,arguments,function*({methods:l},u,c){const d=l._getParticleIndexByPageIndex(u);yield l.showParticle(d,c)})},offsetPage({data:o},s){const a=Ja(s,"animated",!0);return new Promise(l=>{o.durationMs=a?o.durationMsInit:0,o.offset=-o.currentParticleIndex*o.particleWidth,setTimeout(()=>{l()},o.durationMs)})}}},{onChange:n}),[r,i]=t;return[{data:r,progressManager:e},i,t._internal]}var wo=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function c$(n){Qe(n,"svelte-sme1z4",":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}")}const d$=n=>({currentPageIndex:n[0]&32,pagesCount:n[0]&1024,loaded:n[0]&64}),u0=n=>({currentPageIndex:n[5],pagesCount:n[10],showPage:n[15],loaded:n[6]}),h$=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),c0=n=>({showNextPage:n[14].showNextPage,loaded:n[6],currentPageIndex:n[5]}),f$=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),d0=n=>({loaded:n[6],currentPageIndex:n[5]}),p$=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),h0=n=>({showPrevPage:n[14].showPrevPage,loaded:n[6],currentPageIndex:n[5]});function f0(n){let e;const t=n[37].prev,r=Zi(t,n,n[36],h0),i=r||v$(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s[0]&96|s[1]&32)&&to(r,t,o,o[36],e?eo(t,o[36],s,p$):no(o[36]),h0):i&&i.p&&(!e||s[0]&36)&&i.p(o,e?s:[-1,-1])},i(o){e||(q(i,o),e=!0)},o(o){ee(i,o),e=!1},d(o){i&&i.d(o)}}}function v$(n){let e,t,r;return t=new Nw({props:{direction:"prev",disabled:!n[2]&&n[5]===0}}),t.$on("click",n[23]),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","sc-carousel__arrow-container svelte-sme1z4")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o[0]&36&&(s.disabled=!i[2]&&i[5]===0),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function p0(n){let e,t,r;return t=new f9({props:{value:n[7]}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","sc-carousel-progress__container svelte-sme1z4")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o[0]&128&&(s.value=i[7]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function v0(n){let e;const t=n[37].next,r=Zi(t,n,n[36],c0),i=r||m$(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s[0]&96|s[1]&32)&&to(r,t,o,o[36],e?eo(t,o[36],s,h$):no(o[36]),c0):i&&i.p&&(!e||s[0]&1060)&&i.p(o,e?s:[-1,-1])},i(o){e||(q(i,o),e=!0)},o(o){ee(i,o),e=!1},d(o){i&&i.d(o)}}}function m$(n){let e,t,r;return t=new Nw({props:{direction:"next",disabled:!n[2]&&n[5]===n[10]-1}}),t.$on("click",n[14].showNextPage),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","sc-carousel__arrow-container svelte-sme1z4")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o[0]&1060&&(s.disabled=!i[2]&&i[5]===i[10]-1),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function m0(n){let e;const t=n[37].dots,r=Zi(t,n,n[36],u0),i=r||g$(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s[0]&1120|s[1]&32)&&to(r,t,o,o[36],e?eo(t,o[36],s,d$):no(o[36]),u0):i&&i.p&&(!e||s[0]&1056)&&i.p(o,e?s:[-1,-1])},i(o){e||(q(i,o),e=!0)},o(o){ee(i,o),e=!1},d(o){i&&i.d(o)}}}function g$(n){let e,t;return e=new s9({props:{pagesCount:n[10],currentPageIndex:n[5]}}),e.$on("pageChange",n[41]),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i[0]&1024&&(o.pagesCount=r[10]),i[0]&32&&(o.currentPageIndex=r[5]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function y$(n){let e,t,r,i,o,s,a,l,u,c,d,h,f=n[1]&&f0(n);const p=n[37].default,v=Zi(p,n,n[36],d0);let b=n[3]&&p0(n),g=n[1]&&v0(n),y=n[4]&&m0(n);return{c(){e=ie("div"),t=ie("div"),f&&f.c(),r=$e(),i=ie("div"),o=ie("div"),v&&v.c(),a=$e(),b&&b.c(),l=$e(),g&&g.c(),u=$e(),y&&y.c(),P(o,"class","sc-carousel__pages-container svelte-sme1z4"),fe(o,"transform","translateX("+n[8]+"px)"),fe(o,"transition-duration",n[9]+"ms"),fe(o,"transition-timing-function",n[0]),P(i,"class","sc-carousel__pages-window svelte-sme1z4"),P(t,"class","sc-carousel__content-container svelte-sme1z4"),P(e,"class","sc-carousel__carousel-container svelte-sme1z4")},m(E,C){ae(E,e,C),Y(e,t),f&&f.m(t,null),Y(t,r),Y(t,i),Y(i,o),v&&v.m(o,null),n[39](o),Y(i,a),b&&b.m(i,null),n[40](i),Y(t,l),g&&g.m(t,null),Y(e,u),y&&y.m(e,null),c=!0,d||(h=[ks(s=x9.call(null,o,{thresholdProvider:n[38]})),Ye(o,"swipeStart",n[16]),Ye(o,"swipeMove",n[18]),Ye(o,"swipeEnd",n[19]),Ye(o,"swipeFailed",n[20]),Ye(o,"swipeThresholdReached",n[17]),ks(S9.call(null,i)),Ye(i,"hovered",n[21]),ks(T9.call(null,i)),Ye(i,"tapped",n[22])],d=!0)},p(E,C){E[1]?f?(f.p(E,C),C[0]&2&&q(f,1)):(f=f0(E),f.c(),q(f,1),f.m(t,r)):f&&(Ie(),ee(f,1,1,()=>{f=null}),je()),v&&v.p&&(!c||C[0]&96|C[1]&32)&&to(v,p,E,E[36],c?eo(p,E[36],C,f$):no(E[36]),d0),(!c||C[0]&256)&&fe(o,"transform","translateX("+E[8]+"px)"),(!c||C[0]&512)&&fe(o,"transition-duration",E[9]+"ms"),(!c||C[0]&1)&&fe(o,"transition-timing-function",E[0]),s&&lr(s.update)&&C[0]&2048&&s.update.call(null,{thresholdProvider:E[38]}),E[3]?b?(b.p(E,C),C[0]&8&&q(b,1)):(b=p0(E),b.c(),q(b,1),b.m(i,null)):b&&(Ie(),ee(b,1,1,()=>{b=null}),je()),E[1]?g?(g.p(E,C),C[0]&2&&q(g,1)):(g=v0(E),g.c(),q(g,1),g.m(t,null)):g&&(Ie(),ee(g,1,1,()=>{g=null}),je()),E[4]?y?(y.p(E,C),C[0]&16&&q(y,1)):(y=m0(E),y.c(),q(y,1),y.m(e,null)):y&&(Ie(),ee(y,1,1,()=>{y=null}),je())},i(E){c||(q(f),q(v,E),q(b),q(g),q(y),c=!0)},o(E){ee(f),ee(v,E),ee(b),ee(g),ee(y),c=!1},d(E){E&&oe(e),f&&f.d(),v&&v.d(E),n[39](null),b&&b.d(),n[40](null),g&&g.d(),y&&y.d(),d=!1,vn(h)}}}function A$(n,e,t){let{$$slots:r={},$$scope:i}=e,o=[],s,a,l=0,u=0,c=1;const[{data:d,progressManager:h},f,p]=u$((te,se)=>{yf({currentPageIndex:()=>t(5,s=se),progressValue:()=>t(7,a=se),offset:()=>t(8,l=se),durationMs:()=>t(9,u=se),pagesCount:()=>t(10,c=se),loaded:()=>t(6,o=se)})(te)}),v=uo();let{timingFunction:b="ease-in-out"}=e,{arrows:g=!0}=e,{infinite:y=!0}=e,{initialPageIndex:E=0}=e,{duration:C=500}=e,{autoplay:V=!1}=e,{autoplayDuration:M=3e3}=e,{autoplayDirection:z=ro}=e,{pauseOnFocus:U=!1}=e,{autoplayProgressVisible:D=!1}=e,{dots:m=!0}=e,{swiping:A=!0}=e,{particlesToShow:x=1}=e,{particlesToScroll:S=1}=e;function $(te,se){return wo(this,null,function*(){const ve=Ja(se,"animated",!0);if(typeof te!="number")throw new Error("pageIndex should be a number");yield f.showPage(te,{animated:ve})})}function T(te){return wo(this,null,function*(){const se=Ja(te,"animated",!0);yield f.showPrevPage({animated:se})})}function F(te){return wo(this,null,function*(){const se=Ja(te,"animated",!0);yield f.showNextPage({animated:se})})}let R=0,ne,ce;const Z=B9(({width:te})=>{t(11,R=te),d.particleWidth=R/d.particlesToShow,z9({particlesContainerChildren:ce.children,particleWidth:d.particleWidth}),f.offsetPage({animated:!1})});function he(){const{clonesToAppend:te,clonesToPrepend:se}=X9({clonesCountHead:d.clonesCountHead,clonesCountTail:d.clonesCountTail,particlesContainerChildren:ce.children});q9({particlesContainer:ce,clonesToAppend:te,clonesToPrepend:se})}lo(()=>{wo(this,null,function*(){yield Rm(),ce&&ne&&(d.particlesCountWithoutClones=ce.children.length,yield Rm(),d.infinite&&he(),d.particlesCount=ce.children.length,f.showPage(E,{animated:!1}),Z.observe(ne))})}),la(()=>{Z.disconnect(),h.reset()});function pe(te){return wo(this,null,function*(){yield f.showPage(te,{animated:!0})})}function ge(){A&&(d.durationMs=0)}function Me(te){return wo(this,null,function*(){A&&(yield yf({[ro]:f.showNextPage,[Js]:f.showPrevPage})(te.detail.direction))})}function _(te){A&&(d.offset+=te.detail.dx)}function j(){A&&f.showParticle(d.currentParticleIndex)}function N(){return wo(this,null,function*(){A&&(yield f.offsetPage({animated:!0}))})}function B(te){d.focused=te.detail.value}function X(){f.toggleFocused()}function L(){f.showPrevPage()}const G=()=>R/3;function K(te){$t[te?"unshift":"push"](()=>{ce=te,t(13,ce)})}function J(te){$t[te?"unshift":"push"](()=>{ne=te,t(12,ne)})}const re=te=>pe(te.detail);return n.$$set=te=>{"timingFunction"in te&&t(0,b=te.timingFunction),"arrows"in te&&t(1,g=te.arrows),"infinite"in te&&t(2,y=te.infinite),"initialPageIndex"in te&&t(24,E=te.initialPageIndex),"duration"in te&&t(25,C=te.duration),"autoplay"in te&&t(26,V=te.autoplay),"autoplayDuration"in te&&t(27,M=te.autoplayDuration),"autoplayDirection"in te&&t(28,z=te.autoplayDirection),"pauseOnFocus"in te&&t(29,U=te.pauseOnFocus),"autoplayProgressVisible"in te&&t(3,D=te.autoplayProgressVisible),"dots"in te&&t(4,m=te.dots),"swiping"in te&&t(30,A=te.swiping),"particlesToShow"in te&&t(31,x=te.particlesToShow),"particlesToScroll"in te&&t(32,S=te.particlesToScroll),"$$scope"in te&&t(36,i=te.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&32&&v("pageChange",s),n.$$.dirty[0]&4&&(d.infinite=y),n.$$.dirty[0]&33554432&&(d.durationMsInit=C),n.$$.dirty[0]&67108864&&(d.autoplay=V),n.$$.dirty[0]&134217728&&(d.autoplayDuration=M),n.$$.dirty[0]&268435456&&(d.autoplayDirection=z),n.$$.dirty[0]&536870912&&(d.pauseOnFocus=U),n.$$.dirty[1]&1&&(d.particlesToShowInit=x),n.$$.dirty[1]&2&&(d.particlesToScrollInit=S)},[b,g,y,D,m,s,o,a,l,u,c,R,ne,ce,f,pe,ge,Me,_,j,N,B,X,L,E,C,V,M,z,U,A,x,S,$,T,F,i,r,G,K,J,re]}class b$ extends Re{constructor(e){super(),Le(this,e,A$,y$,De,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},c$,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}function w$(n){Qe(n,"svelte-159ski6",".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}")}function g0(n){let e;function t(o,s){if(o[2].type==="Image")return P$;if(o[2].type==="Video")return x$}let r=t(n),i=r&&r(n);return{c(){e=ie("div"),i&&i.c(),P(e,"class","media-item svelte-159ski6"),P(e,"draggable","false")},m(o,s){ae(o,e,s),i&&i.m(e,null)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i&&i.d(1),i=r&&r(o),i&&(i.c(),i.m(e,null)))},d(o){o&&oe(e),i&&i.d()}}}function x$(n){let e,t,r,i,o,s;function a(c,d){return c[8]&&c[2].videoCoverUrl?C$:E$}let l=a(n),u=l(n);return{c(){u.c(),e=$e(),t=ie("div"),r=ie("div"),i=ie("div"),P(i,"class","video-icon-img svelte-159ski6"),fe(i,"background-image","url("+n[21]()+")"),Se(i,"canPlay",n[5]),P(r,"class","video-icon svelte-159ski6"),Se(r,"large",n[4]==="large"),Se(r,"small",n[4]==="small"),P(t,"class","video-play-button-container svelte-159ski6"),Se(t,"showPlayButton",n[11])},m(c,d){u.m(c,d),ae(c,e,d),ae(c,t,d),Y(t,r),Y(r,i),o||(s=Ye(i,"click",n[22]),o=!0)},p(c,d){l===(l=a(c))&&u?u.p(c,d):(u.d(1),u=l(c),u&&(u.c(),u.m(e.parentNode,e))),d&8&&fe(i,"background-image","url("+c[21]()+")"),d&32&&Se(i,"canPlay",c[5]),d&16&&Se(r,"large",c[4]==="large"),d&16&&Se(r,"small",c[4]==="small"),d&2048&&Se(t,"showPlayButton",c[11])},d(c){u.d(c),c&&oe(e),c&&oe(t),o=!1,s()}}}function P$(n){let e,t,r;return{c(){e=ie("img"),P(e,"class","media-content svelte-159ski6"),pn(e.src,t=n[2].url)||P(e,"src",t),P(e,"alt",r=n[2].name),P(e,"draggable",!1),fe(e,"object-fit",n[7])},m(i,o){ae(i,e,o)},p(i,o){o&4&&!pn(e.src,t=i[2].url)&&P(e,"src",t),o&4&&r!==(r=i[2].name)&&P(e,"alt",r),o&128&&fe(e,"object-fit",i[7])},d(i){i&&oe(e)}}}function E$(n){let e,t,r,i,o,s;return{c(){e=ie("video"),P(e,"class","media-content svelte-159ski6"),pn(e.src,t=n[2].videoCoverUrl?n[2].url:n[2].url+"#t=0.1")||P(e,"src",t),P(e,"poster",r=n[2].videoCoverUrl),P(e,"preload",i=n[2].videoCoverUrl?"none":"auto"),P(e,"disablepictureinpicture",""),e.playsInline=!0,P(e,"paused",""),e.muted=!0,P(e,"draggable",!1),e.loop=!1,P(e,"crossorigin",""),e.autoplay=n[6],e.controls=!1,Se(e,"showPlayButton",n[11]),fe(e,"object-fit",n[7])},m(a,l){ae(a,e,l),n[20](e),o||(s=[Ye(e,"play",n[15]),Ye(e,"pause",n[16]),Ye(e,"error",n[17]),Ye(e,"ended",n[18]),Ye(e,"click",n[19])],o=!0)},p(a,l){l&4&&!pn(e.src,t=a[2].videoCoverUrl?a[2].url:a[2].url+"#t=0.1")&&P(e,"src",t),l&4&&r!==(r=a[2].videoCoverUrl)&&P(e,"poster",r),l&4&&i!==(i=a[2].videoCoverUrl?"none":"auto")&&P(e,"preload",i),l&64&&(e.autoplay=a[6]),l&2048&&Se(e,"showPlayButton",a[11]),l&128&&fe(e,"object-fit",a[7])},d(a){a&&oe(e),n[20](null),o=!1,vn(s)}}}function C$(n){let e,t,r;return{c(){e=ie("img"),P(e,"class","media-content svelte-159ski6"),pn(e.src,t=n[2].videoCoverUrl)||P(e,"src",t),P(e,"alt",r=n[2].name),P(e,"draggable",!1),fe(e,"object-fit",n[7])},m(i,o){ae(i,e,o)},p(i,o){o&4&&!pn(e.src,t=i[2].videoCoverUrl)&&P(e,"src",t),o&4&&r!==(r=i[2].name)&&P(e,"alt",r),o&128&&fe(e,"object-fit",i[7])},d(i){i&&oe(e)}}}function S$(n){let e,t=n[2]&&g0(n);return{c(){t&&t.c(),e=at()},m(r,i){t&&t.m(r,i),ae(r,e,i)},p(r,[i]){r[2]?t?t.p(r,i):(t=g0(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(r){t&&t.d(r),r&&oe(e)}}}function O$(n,e,t){let r,i,{mediaInstance:o={videoInstance:void 0,paused:!0}}=e,{tag:s}=e,{media:a}=e,{playButtonIfNeed:l="withoutText"}=e,{playButtonSizeIfNeed:u="small"}=e,{canPlay:c=!0}=e,{autoplayVideo:d=!1}=e,{objectFit:h="fill"}=e,{disableVideoIfHavePoster:f=!1}=e,p=!0,v=!1;function b(){t(9,v=(a==null?void 0:a.type)==="Video"&&!!a.videoCoverUrl)}const g=Ur("mediaStore"),y=Ur("hooks"),E=()=>{v||r&&(t(10,r.muted=!0,r),r.play(),r.pause(),t(10,r.muted=!1,r),t(9,v=!0))};y.on("loadVideoFirstFrame",E),lo(()=>{g.subscribe(({currentMediaElement:x})=>{x!==r&&(r==null||r.pause())})});const C=x=>{t(11,p=!1),t(0,o.paused=!1,o),t(9,v=!0),r&&g.set({currentMediaElement:r}),y.emit("playStateChange",{event:x,state:"playing",tag:s,mediaInstance:r})},V=x=>{t(11,p=!0),t(0,o.paused=!0,o),y.emit("playStateChange",{event:x,state:"paused",tag:s,mediaInstance:r})},M=x=>{t(11,p=!0),t(0,o.paused=!0,o),y.emit("playStateChange",{event:x,state:"paused",tag:s,mediaInstance:r})},z=x=>{t(11,p=!0),t(0,o.paused=!0,o),y.emit("playStateChange",{event:x,state:"paused",tag:s,mediaInstance:r})},U=x=>{r&&r.pause()};function D(x){$t[x?"unshift":"push"](()=>{o.videoInstance=x,t(0,o)})}const m=()=>l==="withText"?Sw:l==="withoutText"?af:l,A=x=>{c&&r&&(t(10,r.muted=!1,r),r.play())};return n.$$set=x=>{"mediaInstance"in x&&t(0,o=x.mediaInstance),"tag"in x&&t(1,s=x.tag),"media"in x&&t(2,a=x.media),"playButtonIfNeed"in x&&t(3,l=x.playButtonIfNeed),"playButtonSizeIfNeed"in x&&t(4,u=x.playButtonSizeIfNeed),"canPlay"in x&&t(5,c=x.canPlay),"autoplayVideo"in x&&t(6,d=x.autoplayVideo),"objectFit"in x&&t(7,h=x.objectFit),"disableVideoIfHavePoster"in x&&t(8,f=x.disableVideoIfHavePoster)},n.$$.update=()=>{if(n.$$.dirty&1&&t(10,r=o.videoInstance),n.$$.dirty&4&&t(14,i=a==null?void 0:a.url),n.$$.dirty&16384&&i&&b(),n.$$.dirty&1024&&r&&t(11,p=r.paused),n.$$.dirty&1540&&(a==null?void 0:a.type)==="Video"&&!v){const x=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,S=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1&&x;r&&S&&r.paused&&(document.removeEventListener("WeixinJSBridgeReady",E),document.removeEventListener("touchstart",E),document.removeEventListener("click",E),document.addEventListener("WeixinJSBridgeReady",E),document.addEventListener("touchstart",E),document.addEventListener("click",E))}},[o,s,a,l,u,c,d,h,f,v,r,p,g,y,i,C,V,M,z,U,D,m,A]}let e2=class extends Re{constructor(e){super(),Le(this,e,O$,S$,De,{mediaInstance:0,tag:1,media:2,playButtonIfNeed:3,playButtonSizeIfNeed:4,canPlay:5,autoplayVideo:6,objectFit:7,disableVideoIfHavePoster:8},w$)}};function $$(n){Qe(n,"svelte-1mrbqlg",".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}")}function y0(n,e,t){const r=n.slice();return r[28]=e[t],r[29]=e,r[30]=t,r}function A0(n){let e,t,r,i,o,s,a;const l=[V$,M$],u=[];function c(d,h){return d[13]&&d[10].length>1?0:1}return r=c(n),i=u[r]=l[r](n),{c(){e=ie("div"),t=ie("div"),i.c(),P(t,"class","media-list svelte-1mrbqlg"),Se(t,"carouselEnabled",n[13]),P(e,"class","media-list-wrapper svelte-1mrbqlg"),Se(e,"unfolded",n[5])},m(d,h){ae(d,e,h),Y(e,t),u[r].m(t,null),a=!0},p(d,h){n=d;let f=r;r=c(n),r===f?u[r].p(n,h):(Ie(),ee(u[f],1,1,()=>{u[f]=null}),je(),i=u[r],i?i.p(n,h):(i=u[r]=l[r](n),i.c()),q(i,1),i.m(t,null)),(!a||h[0]&8192)&&Se(t,"carouselEnabled",n[13]),(!a||h[0]&32)&&Se(e,"unfolded",n[5])},i(d){a||(q(i),d&&kn(()=>{a&&(s&&s.end(1),o=Xo(e,Fm,n[6]?{y:4,duration:n[4],delay:n[2],easing:Ji}:void 0),o.start())}),a=!0)},o(d){ee(i),o&&o.invalidate(),d&&(s=ua(e,Fm,n[6]?{y:4,duration:n[4],delay:n[3],easing:Ji}:void 0)),a=!1},d(d){d&&oe(e),u[r].d(),d&&s&&s.end()}}}function M$(n){let e,t,r;const i=[{media:n[1][0]},{autoplayVideo:n[14]},n[7],{tag:n[0]}];function o(a){n[21](a)}let s={};for(let a=0;a<i.length;a+=1)s=Dp(s,i[a]);return n[8][0]!==void 0&&(s.mediaInstance=n[8][0]),e=new e2({props:s}),$t.push(()=>Wp(e,"mediaInstance",o)),{c(){xe(e.$$.fragment)},m(a,l){be(e,a,l),r=!0},p(a,l){const u=l[0]&16515?Jb(i,[l[0]&2&&{media:a[1][0]},l[0]&16384&&{autoplayVideo:a[14]},l[0]&128&&Zb(a[7]),l[0]&1&&{tag:a[0]}]):{};!t&&l[0]&256&&(t=!0,u.mediaInstance=a[8][0],Fp(()=>t=!1)),e.$set(u)},i(a){r||(q(e.$$.fragment,a),r=!0)},o(a){ee(e.$$.fragment,a),r=!1},d(a){we(e,a)}}}function V$(n){let e,t,r={dots:!1,arrows:!1,$$slots:{default:[T$]},$$scope:{ctx:n}};return e=new b$({props:r}),n[19](e),e.$on("pageChange",n[20]),{c(){xe(e.$$.fragment)},m(i,o){be(e,i,o),t=!0},p(i,o){const s={};o[0]&1409|o[1]&1&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(q(e.$$.fragment,i),t=!0)},o(i){ee(e.$$.fragment,i),t=!1},d(i){n[19](null),we(e,i)}}}function b0(n){let e,t,r;const i=[n[7],{media:n[28]},{tag:n[0]}];function o(a){n[18](a,n[30])}let s={};for(let a=0;a<i.length;a+=1)s=Dp(s,i[a]);return n[8][n[30]]!==void 0&&(s.mediaInstance=n[8][n[30]]),e=new e2({props:s}),$t.push(()=>Wp(e,"mediaInstance",o)),{c(){xe(e.$$.fragment)},m(a,l){be(e,a,l),r=!0},p(a,l){n=a;const u=l[0]&1153?Jb(i,[l[0]&128&&Zb(n[7]),l[0]&1024&&{media:n[28]},l[0]&1&&{tag:n[0]}]):{};!t&&l[0]&256&&(t=!0,u.mediaInstance=n[8][n[30]],Fp(()=>t=!1)),e.$set(u)},i(a){r||(q(e.$$.fragment,a),r=!0)},o(a){ee(e.$$.fragment,a),r=!1},d(a){we(e,a)}}}function T$(n){let e,t,r=n[10],i=[];for(let s=0;s<r.length;s+=1)i[s]=b0(y0(n,r,s));const o=s=>ee(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=at()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);ae(s,e,a),t=!0},p(s,a){if(a[0]&1409){r=s[10];let l;for(l=0;l<r.length;l+=1){const u=y0(s,r,l);i[l]?(i[l].p(u,a),q(i[l],1)):(i[l]=b0(u),i[l].c(),q(i[l],1),i[l].m(e.parentNode,e))}for(Ie(),l=r.length;l<i.length;l+=1)o(l);je()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)q(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)ee(i[a]);t=!1},d(s){hl(i,s),s&&oe(e)}}}function _$(n){let e,t,r=n[5]&&A0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,o){i[5]?r?(r.p(i,o),o[0]&32&&q(r,1)):(r=A0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function k$(n,e,t){let r,i,o,s,{tag:a}=e,{mediaData:l}=e,{inDelay:u=0}=e,{outDelay:c=0}=e,{duration:d=0}=e,{unfolded:h=!0}=e,{animation:f=!0}=e,{mediaItemConfig:p}=e,{enableCarousel:v=!0}=e,{autoplayConfig:b={}}=e;const{autoplayVideo:g=!1,autoplayCarousel:y=!0,autoplayVideoInCarousel:E=!1}=b;let C=[],V=0,M,z=null;const U=Ur("hooks"),D=Ur("mediaStore");function m(){const T=C[V],F=T==null?void 0:T.videoInstance;F&&(F.paused?(F.muted=!1,F.play()):F.pause())}lo(()=>{U.on("click",T=>{var F;(F=a.tag3DContentSvelte)!=null&&F.css3DInstance&&T.tag.id===a.id&&T.target==="TagContent"&&m()}),t(0,a.play=()=>{const T=C[V],F=T==null?void 0:T.videoInstance;F&&(F.muted=!1,F.play())},a),t(0,a.pause=()=>{const T=C[V],F=T==null?void 0:T.videoInstance;F&&F.pause()},a),z=setInterval(()=>{s&&(M==null||M.goToNext())},3e3)}),la(()=>{clearInterval(z),U.off("click",m)});function A(T,F){n.$$.not_equal(C[F],T)&&(C[F]=T,t(8,C))}function x(T){$t[T?"unshift":"push"](()=>{M=T,t(12,M)})}const S=T=>{r||D.set({currentMediaElement:null}),t(11,V=T.detail)};function $(T){n.$$.not_equal(C[0],T)&&(C[0]=T,t(8,C))}return n.$$set=T=>{"tag"in T&&t(0,a=T.tag),"mediaData"in T&&t(1,l=T.mediaData),"inDelay"in T&&t(2,u=T.inDelay),"outDelay"in T&&t(3,c=T.outDelay),"duration"in T&&t(4,d=T.duration),"unfolded"in T&&t(5,h=T.unfolded),"animation"in T&&t(6,f=T.animation),"mediaItemConfig"in T&&t(7,p=T.mediaItemConfig),"enableCarousel"in T&&t(16,v=T.enableCarousel),"autoplayConfig"in T&&t(17,b=T.autoplayConfig)},n.$$.update=()=>{n.$$.dirty[0]&256&&t(9,r=C.every(T=>T.paused)),n.$$.dirty[0]&65538&&t(13,i=v&&(l==null?void 0:l.length)>1),n.$$.dirty[0]&2&&t(10,o=l),n.$$.dirty[0]&1536&&(s=o.length>1&&y&&r)},[a,l,u,c,d,h,f,p,C,r,o,V,M,i,g,D,v,b,A,x,S,$]}class t2 extends Re{constructor(e){super(),Le(this,e,k$,_$,De,{tag:0,mediaData:1,inDelay:2,outDelay:3,duration:4,unfolded:5,animation:6,mediaItemConfig:7,enableCarousel:16,autoplayConfig:17},$$,[-1,-1])}}function I$(n){Qe(n,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function w0(n){let e,t,r,i,o,s,a,l;e=new Cr({props:{visible:n[3],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),i=new JS({props:{unfolded:n[3],outDelay:400}});let u=n[2]&&x0(n),c=n[1]&&P0(n);return{c(){xe(e.$$.fragment),t=$e(),r=ie("div"),xe(i.$$.fragment),o=$e(),u&&u.c(),s=$e(),c&&c.c(),a=at(),P(r,"class","line svelte-1f7m1lj")},m(d,h){be(e,d,h),ae(d,t,h),ae(d,r,h),be(i,r,null),ae(d,o,h),u&&u.m(d,h),ae(d,s,h),c&&c.m(d,h),ae(d,a,h),l=!0},p(d,h){const f={};h&8&&(f.visible=d[3]),e.$set(f);const p={};h&8&&(p.unfolded=d[3]),i.$set(p),d[2]?u?(u.p(d,h),h&4&&q(u,1)):(u=x0(d),u.c(),q(u,1),u.m(s.parentNode,s)):u&&(Ie(),ee(u,1,1,()=>{u=null}),je()),d[1]?c?(c.p(d,h),h&2&&q(c,1)):(c=P0(d),c.c(),q(c,1),c.m(a.parentNode,a)):c&&(Ie(),ee(c,1,1,()=>{c=null}),je())},i(d){l||(q(e.$$.fragment,d),q(i.$$.fragment,d),q(u),q(c),l=!0)},o(d){ee(e.$$.fragment,d),ee(i.$$.fragment,d),ee(u),ee(c),l=!1},d(d){we(e,d),d&&oe(t),d&&oe(r),we(i),d&&oe(o),u&&u.d(d),d&&oe(s),c&&c.d(d),d&&oe(a)}}}function x0(n){let e,t,r;return t=new Hw({props:{unfolded:n[3],content:n[2],inDelay:500}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","text svelte-1f7m1lj")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o&8&&(s.unfolded=i[3]),o&4&&(s.content=i[2]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function P0(n){let e,t,r;return t=new t2({props:{autoplayConfig:{autoplayCarousel:!1},unfolded:n[3],mediaData:n[1],tag:n[0],enableCarousel:!1,mediaItemConfig:{canPlay:!1,playButtonSizeIfNeed:"small",disableVideoIfHavePoster:!0},inDelay:500,duration:500}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","media-wrapper svelte-1f7m1lj")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o&8&&(s.unfolded=i[3]),o&2&&(s.mediaData=i[1]),o&1&&(s.tag=i[0]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function j$(n){let e,t,r=n[0].state&&w0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state?r?(r.p(i,o),o&1&&q(r,1)):(r=w0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function D$(n,e,t){let r,i,o,s,{tag:a}=e;return n.$$set=l=>{"tag"in l&&t(0,a=l.tag)},n.$$.update=()=>{var l,u,c;n.$$.dirty&1&&t(3,r=a.state?a.state.unfolded:!1),n.$$.dirty&1&&t(4,i=(u=(l=a.data.title)!=null?l:a.data.text)!=null?u:""),n.$$.dirty&16&&t(2,o=((c=i.length)!=null?c:0)>7?i.substring(0,6)+"...":i),n.$$.dirty&1&&t(1,s=a.data.mediaData)},[a,s,o,r,i]}let L$=class extends Re{constructor(e){super(),Le(this,e,D$,j$,De,{tag:0},I$)}};function R$(n){Qe(n,"svelte-1707m54",'@charset "UTF-8";.svelte-1707m54.svelte-1707m54{box-sizing:border-box}.marketing.svelte-1707m54.svelte-1707m54{transform:translateY(-100%)}.marketing.svelte-1707m54 .line.svelte-1707m54{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-1707m54 .content.svelte-1707m54{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-1707m54 .content .headerImage.svelte-1707m54{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.title-wrapper.svelte-1707m54.svelte-1707m54{position:relative;width:100%;height:1.125rem}.title-wrapper.svelte-1707m54 .title.svelte-1707m54{border-radius:0.25rem;width:100%;padding-left:0.625rem;padding-right:0.625rem}.title-wrapper.svelte-1707m54 .title .text.svelte-1707m54{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem}.footer.svelte-1707m54.svelte-1707m54{box-sizing:border-box;width:100%;padding:0.5rem 0.625rem 0;display:flex;justify-content:space-between;align-items:center}.footer.svelte-1707m54 .price-section.svelte-1707m54{flex-shrink:0;max-width:calc(100% - 1.875rem);overflow:hidden;white-space:nowrap}.footer.svelte-1707m54 .price-section .value.svelte-1707m54{font-size:0.875rem;line-height:1rem;font-weight:normal;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.footer.svelte-1707m54 .price-section .unit.svelte-1707m54{font-size:0.625rem;margin-left:0.125rem}.footer.svelte-1707m54 .action-section.svelte-1707m54{display:flex;align-items:center;height:0.875rem}.footer.svelte-1707m54 .action-section .highlight-text.svelte-1707m54{font-size:0.625rem;line-height:0.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:8.75rem}.footer.svelte-1707m54 .action-section .arrow.svelte-1707m54{display:flex;align-items:center;margin-left:0.25rem;flex-shrink:0;width:0.625rem}.footer.svelte-1707m54 .action-section .arrow svg.svelte-1707m54{width:0.375rem;height:0.625rem}.tags-wrapper.svelte-1707m54.svelte-1707m54{position:relative;overflow:hidden;height:1rem;margin-top:0.25rem}.tags-wrapper.svelte-1707m54 .tags.svelte-1707m54{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap;padding-left:0.625rem;padding-right:0.375rem}.tags-wrapper.svelte-1707m54 .tags .tag.svelte-1707m54{display:block;text-align:center;flex-shrink:0;flex-grow:0;font-size:0.625rem;height:1rem;line-height:1rem;margin-right:0.25rem;margin-bottom:0.25rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.marketing.light.svelte-1707m54 .content.svelte-1707m54{background-color:white}.marketing.light.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-1707m54 .content .footer.svelte-1707m54{color:#946700;fill:#946700}.marketing.dark.svelte-1707m54 .content.svelte-1707m54{background-color:rgba(0, 0, 0, 0.5)}.marketing.dark.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-1707m54 .content .footer.svelte-1707m54{color:#ead09a;fill:#ead09a}.marketing.unfolded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 1);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-1707m54 .content.svelte-1707m54{opacity:1;transform:translateY(0);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .content.svelte-1707m54{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}.tag.svelte-1707m54.svelte-1707m54,.text.svelte-1707m54.svelte-1707m54{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}')}function E0(n,e,t){const r=n.slice();return r[0]=e[t],r}function C0(n,e,t){const r=n.slice();return r[0]=e[t],r}function S0(n){let e,t;return{c(){e=ie("img"),P(e,"class","headerImage svelte-1707m54"),pn(e.src,t=n[1].headerPictureUrl)||P(e,"src",t),P(e,"alt","")},m(r,i){ae(r,e,i)},p(r,i){i&2&&!pn(e.src,t=r[1].headerPictureUrl)&&P(e,"src",t)},d(r){r&&oe(e)}}}function O0(n){let e,t,r,i,o,s=n[4]||[],a=[];for(let c=0;c<s.length;c+=1)a[c]=$0(C0(n,s,c));let l=n[3]||[],u=[];for(let c=0;c<l.length;c+=1)u[c]=M0(E0(n,l,c));return{c(){e=ie("div"),t=ie("div");for(let c=0;c<a.length;c+=1)a[c].c();r=$e();for(let c=0;c<u.length;c+=1)u[c].c();P(t,"class","tags svelte-1707m54"),P(e,"class","tags-wrapper svelte-1707m54")},m(c,d){ae(c,e,d),Y(e,t);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);Y(t,r);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);i||(o=[ks(Gp.call(null,t)),Ye(t,"clientHeight",n[18])],i=!0)},p(c,d){if(d&16){s=c[4]||[];let h;for(h=0;h<s.length;h+=1){const f=C0(c,s,h);a[h]?a[h].p(f,d):(a[h]=$0(f),a[h].c(),a[h].m(t,r))}for(;h<a.length;h+=1)a[h].d(1);a.length=s.length}if(d&8){l=c[3]||[];let h;for(h=0;h<l.length;h+=1){const f=E0(c,l,h);u[h]?u[h].p(f,d):(u[h]=M0(f),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}},d(c){c&&oe(e),hl(a,c),hl(u,c),i=!1,vn(o)}}}function $0(n){let e,t=n[0]+"",r;return{c(){e=ie("div"),r=dt(t),P(e,"class","tag primary-tag svelte-1707m54"),fe(e,"min-width",cv)},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o&16&&t!==(t=i[0]+"")&&yt(r,t)},d(i){i&&oe(e)}}}function M0(n){let e,t=n[0]+"",r;return{c(){e=ie("div"),r=dt(t),P(e,"class","tag secondary-tag svelte-1707m54"),fe(e,"min-width",cv)},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o&8&&t!==(t=i[0]+"")&&yt(r,t)},d(i){i&&oe(e)}}}function V0(n){let e,t,r,i,o,s=n[2]&&T0(n),a=!n[2]&&n[1].highlightText&&k0(n);return{c(){e=ie("div"),s&&s.c(),t=$e(),r=ie("div"),a&&a.c(),i=$e(),o=ie("span"),o.innerHTML='<svg viewBox="0 0 6 9" class="svelte-1707m54"><g transform="translate(-3, -2)" fill-rule="nonzero" class="svelte-1707m54"><path d="M4.43868724,2.12056563 C4.28121824,1.95989074 4.02582143,1.95979988 3.86824251,2.1203627 C3.72498894,2.26632889 3.71189225,2.49481723 3.82900374,2.65587166 L6.57092402,5.92894326 C6.72651763,6.11470411 6.72651763,6.38529589 6.57092402,6.57105674 L3.86804348,9.79798499 C3.72488984,9.94405307 3.71194952,10.1725507 3.8291712,10.3335217 L3.86824251,10.3796373 C4.01149607,10.5256035 4.23559087,10.5387981 4.39346025,10.4192733 L4.43868724,10.3794344 L8.1144599,6.5985342 C8.30312347,6.40447482 8.30312347,6.09552518 8.1144599,5.9014658 L4.43868724,2.12056563 Z" class="svelte-1707m54"></path></g></svg>',P(o,"class","arrow svelte-1707m54"),P(r,"class","action-section svelte-1707m54"),P(e,"class","footer svelte-1707m54")},m(l,u){ae(l,e,u),s&&s.m(e,null),Y(e,t),Y(e,r),a&&a.m(r,null),Y(r,i),Y(r,o)},p(l,u){l[2]?s?s.p(l,u):(s=T0(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),!l[2]&&l[1].highlightText?a?a.p(l,u):(a=k0(l),a.c(),a.m(r,i)):a&&(a.d(1),a=null)},d(l){l&&oe(e),s&&s.d(),a&&a.d()}}}function T0(n){let e,t,r=n[1].price.value+"",i,o,s=n[1].price.unit&&_0(n);return{c(){e=ie("div"),t=ie("span"),i=dt(r),o=$e(),s&&s.c(),P(t,"class","value svelte-1707m54"),P(e,"class","price-section svelte-1707m54")},m(a,l){ae(a,e,l),Y(e,t),Y(t,i),Y(e,o),s&&s.m(e,null)},p(a,l){l&2&&r!==(r=a[1].price.value+"")&&yt(i,r),a[1].price.unit?s?s.p(a,l):(s=_0(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&oe(e),s&&s.d()}}}function _0(n){let e,t=n[1].price.unit+"",r;return{c(){e=ie("span"),r=dt(t),P(e,"class","unit svelte-1707m54")},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o&2&&t!==(t=i[1].price.unit+"")&&yt(r,t)},d(i){i&&oe(e)}}}function k0(n){let e,t=n[1].highlightText+"",r;return{c(){e=ie("span"),r=dt(t),P(e,"class","highlight-text svelte-1707m54")},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o&2&&t!==(t=i[1].highlightText+"")&&yt(r,t)},d(i){i&&oe(e)}}}function z$(n){let e,t,r,i,o,s,a,l,u,c,d=n[1].title+"",h,f,p,v,b;t=new Cr({props:{visible:n[5],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let g=n[1].headerPictureUrl&&S0(n),y=n[6]&&O0(n),E=(n[2]||n[1].highlightText)&&V0(n);return{c(){e=ie("div"),xe(t.$$.fragment),r=$e(),i=ie("div"),o=$e(),s=ie("div"),g&&g.c(),a=$e(),l=ie("div"),u=ie("div"),c=ie("div"),h=dt(d),f=$e(),y&&y.c(),p=$e(),E&&E.c(),P(i,"class","line svelte-1707m54"),fe(i,"transition-delay",n[5]?n[9]+"ms":n[8]+"ms"),P(c,"class","text svelte-1707m54"),P(u,"class","title svelte-1707m54"),P(l,"class","title-wrapper svelte-1707m54"),P(s,"class","content svelte-1707m54"),fe(s,"max-width",br(n[12])),fe(s,"transition-delay",n[5]?n[7]+"ms":"0ms"),P(e,"class",v=Xs(`marketing ${n[10]}`)+" svelte-1707m54"),Se(e,"unfolded",n[5]),Se(e,"folded",n[11])},m(C,V){ae(C,e,V),be(t,e,null),Y(e,r),Y(e,i),Y(e,o),Y(e,s),g&&g.m(s,null),Y(s,a),Y(s,l),Y(l,u),Y(u,c),Y(c,h),Y(s,f),y&&y.m(s,null),Y(s,p),E&&E.m(s,null),b=!0},p(C,[V]){const M={};V&32&&(M.visible=C[5]),t.$set(M),V&800&&fe(i,"transition-delay",C[5]?C[9]+"ms":C[8]+"ms"),C[1].headerPictureUrl?g?g.p(C,V):(g=S0(C),g.c(),g.m(s,a)):g&&(g.d(1),g=null),(!b||V&2)&&d!==(d=C[1].title+"")&&yt(h,d),C[6]?y?y.p(C,V):(y=O0(C),y.c(),y.m(s,p)):y&&(y.d(1),y=null),C[2]||C[1].highlightText?E?E.p(C,V):(E=V0(C),E.c(),E.m(s,null)):E&&(E.d(1),E=null),V&160&&fe(s,"transition-delay",C[5]?C[7]+"ms":"0ms"),(!b||V&1024&&v!==(v=Xs(`marketing ${C[10]}`)+" svelte-1707m54"))&&P(e,"class",v),(!b||V&1056)&&Se(e,"unfolded",C[5]),(!b||V&3072)&&Se(e,"folded",C[11])},i(C){b||(q(t.$$.fragment,C),b=!0)},o(C){ee(t.$$.fragment,C),b=!1},d(C){C&&oe(e),we(t),g&&g.d(),y&&y.d(),E&&E.d()}}}const cv=40;function B$(n,e,t){let r,i,o,s,a,l,u,c,d,h,f,p,{tag:v}=e,b,g=(()=>{var M;const z=(M=v.data.limitWidth)!=null?M:!0;if(typeof z=="number")return z;if(z===!0)return 172})(),y=0,E=!1;function C(M){Math.abs(b-M)>5&&(t(14,b=M),setTimeout(()=>{t(16,E=!1)},100))}const V=M=>C(M.detail);return n.$$set=M=>{"tag"in M&&t(0,v=M.tag)},n.$$.update=()=>{var M,z,U,D;n.$$.dirty&1&&t(5,r=(z=(M=v.state)==null?void 0:M.unfolded)!=null?z:!1),n.$$.dirty&32&&t(11,i=!r),n.$$.dirty&1&&t(1,o=v.data),n.$$.dirty&2&&t(2,s=Ge((U=o.price)==null?void 0:U.value)&&((D=o.price)==null?void 0:D.value)!==""),n.$$.dirty&1&&t(10,a=v.data.theme||"light"),n.$$.dirty&114688&&(!E||g&&g>0)&&(t(15,y=Math.max(1,Math.floor(((g||172)-20)/cv))),b!==void 0&&b>40&&t(15,y=Math.max(1,y-1)),t(16,E=!0)),n.$$.dirty&32770&&t(4,l=(o.brandTags||[]).filter(Boolean).slice(0,y)),n.$$.dirty&32784&&t(17,u=Math.max(0,y-l.length)),n.$$.dirty&131074&&t(3,c=(o.tags||[]).filter(Boolean).slice(0,u)),n.$$.dirty&24&&t(6,p=l.length>0||c.length>0),n.$$.dirty&6&&(s||o.highlightText)},t(9,d=400),t(8,h=140),t(7,f=580),[v,o,s,c,l,r,p,f,h,d,a,i,g,C,b,y,E,u,V]}class F$ extends Re{constructor(e){super(),Le(this,e,B$,z$,De,{tag:0},R$)}}const At=n=>n;var Rd=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});let H$=class{static checkBrowserSupport(){var e,t,r,i;const o=navigator.userAgent,s=document.createElement("audio");let a="Unknown",l="Unknown";o.includes("Edge/")?(a="Microsoft Edge",l=((e=o.match(/Edge\/(\d+)/))==null?void 0:e[1])||"Unknown"):o.includes("Chrome/")?(a="Chrome",l=((t=o.match(/Chrome\/(\d+)/))==null?void 0:t[1])||"Unknown"):o.includes("Firefox/")?(a="Firefox",l=((r=o.match(/Firefox\/(\d+)/))==null?void 0:r[1])||"Unknown"):o.includes("Safari/")&&!o.includes("Chrome")&&(a="Safari",l=((i=o.match(/Version\/(\d+)/))==null?void 0:i[1])||"Unknown");const u=[{name:"MP3",mime:"audio/mpeg"},{name:"OGG",mime:"audio/ogg"},{name:"WAV",mime:"audio/wav"},{name:"M4A",mime:"audio/mp4"},{name:"AAC",mime:"audio/aac"},{name:"WEBM",mime:"audio/webm"}],c=[],d=[];return u.forEach(h=>{const f=s.canPlayType(h.mime);f==="probably"?c.push(`${h.name} ()`):f==="maybe"?(c.push(`${h.name} ()`),d.push(`${h.name} `)):d.push(`${h.name} `)}),{browser:`${a} ${l}`,version:l,supportedFormats:c,warnings:d}}static testAudioUrl(e){return Rd(this,null,function*(){try{const t=yield fetch(e,{method:"HEAD"});return{accessible:t.ok,status:t.status,contentType:t.headers.get("content-type")||void 0,contentLength:parseInt(t.headers.get("content-length")||"0")||void 0}}catch(t){return{accessible:!1,error:t instanceof Error?t.message:String(t)}}})}static testAudioElement(e){return Rd(this,null,function*(){return new Promise(t=>{const r=new Audio;let i=!1;const o=()=>{i||(i=!0,r.removeEventListener("loadedmetadata",s),r.removeEventListener("error",l),r.removeEventListener("canplay",a))},s=()=>{o(),t({success:!0,duration:r.duration,networkState:r.networkState,readyState:r.readyState})},a=()=>{o(),t({success:!0,canPlay:"canplay",duration:r.duration,networkState:r.networkState,readyState:r.readyState})},l=()=>{o(),t({success:!1,error:r.error?`${r.error.code}: ${r.error.message}`:"Unknown audio error",networkState:r.networkState,readyState:r.readyState})};r.addEventListener("loadedmetadata",s),r.addEventListener("canplay",a),r.addEventListener("error",l),setTimeout(()=>{i||(o(),t({success:!1,error:"",networkState:r.networkState,readyState:r.readyState}))},1e4),r.src=e,r.load()})})}static diagnoseAudio(e){return Rd(this,null,function*(){var t;console.group(" "),console.group("1. ");const r=this.checkBrowserSupport();console.log(":",r.browser),console.log(":",r.supportedFormats),r.warnings.length>0&&console.warn(":",r.warnings),console.groupEnd(),console.group("2. URL"),console.log("URL:",e);try{new URL(e,window.location.href),console.log(" URL")}catch{console.error(" URL"),console.groupEnd(),console.groupEnd();return}const i=(t=e.split(".").pop())==null?void 0:t.toLowerCase();i&&(console.log(":",i.toUpperCase()),["mp3","ogg","wav","m4a","aac","webm"].includes(i)?console.log(" "):console.warn(" ")),console.groupEnd(),console.group("3. ");const o=yield this.testAudioUrl(e);o.accessible?(console.log(" "),console.log("HTTP:",o.status),o.contentType&&console.log(":",o.contentType),o.contentLength&&console.log(":",(o.contentLength/1024).toFixed(2),"KB")):(console.error(" "),o.status&&console.error("HTTP:",o.status),o.error&&console.error(":",o.error)),console.groupEnd(),console.group("4. ");const s=yield this.testAudioElement(e);s.success?(console.log(" "),s.duration&&console.log(":",s.duration.toFixed(2),""),console.log(":",this.getNetworkStateDescription(s.networkState)),console.log(":",this.getReadyStateDescription(s.readyState))):(console.error(" "),console.error(":",s.error),console.log(":",this.getNetworkStateDescription(s.networkState)),console.log(":",this.getReadyStateDescription(s.readyState))),console.groupEnd(),console.groupEnd()})}static getNetworkStateDescription(e){switch(e){case 0:return"NETWORK_EMPTY - ";case 1:return"NETWORK_IDLE - ";case 2:return"NETWORK_LOADING - ";case 3:return"NETWORK_NO_SOURCE - ";default:return` (${e})`}}static getReadyStateDescription(e){switch(e){case 0:return"HAVE_NOTHING - ";case 1:return"HAVE_METADATA - ";case 2:return"HAVE_CURRENT_DATA - ";case 3:return"HAVE_FUTURE_DATA - ";case 4:return"HAVE_ENOUGH_DATA - ";default:return` (${e})`}}};var U$=Object.defineProperty,N$=(n,e,t)=>e in n?U$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ps=(n,e,t)=>(N$(n,typeof e!="symbol"?e+"":e,t),t),W$=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});let G$=class extends Audio{constructor(e){super(),ps(this,"sharedAudioSrc"),ps(this,"sharedAudioPaused",!0),ps(this,"sharedAudioCurrentTime",0),ps(this,"tryplaying",!1),ps(this,"audioInstance"),ps(this,"eventListenerDisposer"),this.sharedAudioSrc=e,e&&this.validateAudioSource(e)}get paused(){var e;return(e=this.sharedAudioPaused)!=null?e:!0}get currentTime(){return this.sharedAudioCurrentTime}get duration(){var e;return((e=this.audioInstance)==null?void 0:e.duration)||0}play(){return W$(this,null,function*(){var e,t,r;if(this.tryplaying)return;this.tryplaying=!0,(!this.audioInstance||((e=this.audioInstance)==null?void 0:e.realSrc)!==this.sharedAudioSrc)&&(this.audioInstance=J8(this.sharedAudioSrc,{namespace:tv.PlayAudio})),(t=this.eventListenerDisposer)==null||t.call(this),this.eventListenerDisposer=this.addEventListeners(),this.audioInstance.currentTime=(r=this.currentTime)!=null?r:0;const i=this.audioInstance.currentTime!==this.currentTime;this.audioInstance.play().then(()=>{var o;this.audioInstance.muted=!1,i&&(this.audioInstance.currentTime=(o=this.currentTime)!=null?o:0),this.sharedAudioPaused=!1}).catch(o=>{var s;this.handlePlayError(o),this.endedHandler(),(s=this.onerror)==null||s.call(this,o)}).finally(()=>{this.tryplaying=!1})})}pause(e){var t;if(this.audioInstance&&!this.paused){if(this.sharedAudioPaused=!0,(t=this.eventListenerDisposer)==null||t.call(this),this.audioInstance.ended){this.endedHandler();return}this.audioInstance.paused||this.audioInstance.pause(),this.onpause(e??new Event("pause")),this.clear()}}dispose(){var e;(e=this.eventListenerDisposer)==null||e.call(this),this.clear(),this.audioInstance=void 0}clear(){var e;(e=this.audioInstance)==null||e.clear()}handlePlayError(e){var t,r,i,o;const s=navigator.userAgent,a=this.sharedAudioSrc;if(console.group(" "),console.error(":",e),console.error(":",e.name),console.error(":",e.message),console.error(":",a),console.error(":",s),console.error(":",{exists:!!this.audioInstance,readyState:(t=this.audioInstance)==null?void 0:t.readyState,networkState:(r=this.audioInstance)==null?void 0:r.networkState,error:(i=this.audioInstance)==null?void 0:i.error}),e.name==="NotSupportedError"){if(e.message.includes("no supported source was found")&&(console.error(" : "),console.error(" :"),console.error("   1. "),console.error("   2. "),console.error("   3.  (: MP3, OGG, WAV)"),console.error("   4. CORS"),a)){const l=(o=a.split(".").pop())==null?void 0:o.toLowerCase(),u=["mp3","ogg","wav","m4a","aac"];l&&!u.includes(l)&&(console.error(`     : .${l}`),console.error(`    : ${u.join(", ")}`))}}else e.name==="AbortError"?console.error(" : "):e.name==="NotAllowedError"?console.error(" :  ()"):e.message==="The operation is not supported."?console.error(" : "):console.error(" ");console.groupEnd(),e.name==="NotSupportedError"&&a&&(console.error(" "),console.error(`AudioDiagnostics.diagnoseAudio("${a}")`))}validateAudioSource(e){var t;try{new URL(e,window.location.href)}catch{console.warn(" URL:",e),H$.diagnoseAudio(e);return}const r=(t=e.split(".").pop())==null?void 0:t.toLowerCase(),i=["mp3","ogg","wav","m4a","aac","webm"];r&&!i.includes(r)&&(console.warn(" :",r),console.warn(" :",i.join(", ")),console.warn(' AudioDiagnostics.diagnoseAudio("'+e+'")')),this.checkBrowserSupport(r)}checkBrowserSupport(e){if(!e)return;const t=document.createElement("audio"),r={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",m4a:"audio/mp4",aac:"audio/aac",webm:"audio/webm"}[e];if(r){const i=t.canPlayType(r);i===""?(console.warn(`  ${e.toUpperCase()} `),console.warn(" ")):console.info(i==="maybe"?`  ${e.toUpperCase()}  ()`:`  ${e.toUpperCase()} `)}}endedHandler(e){var t,r;(t=this.onended)==null||t.call(this,e??new Event("ended")),(r=this.eventListenerDisposer)==null||r.call(this),this.sharedAudioPaused=!0,this.sharedAudioCurrentTime=0,this.clear()}addEventListeners(){const e=this.audioInstance;if(!e)return;const t=d=>{var h;this.sharedAudioCurrentTime=e.currentTime,(h=this.ontimeupdate)==null||h.call(this,d)},r=d=>{var h;e.isBlankAudio||(this.sharedAudioPaused=!1,(h=this.onplay)==null||h.call(this,d))},i=d=>{this.pause(d)},o=d=>{this.endedHandler(d)},s=d=>{var h;this.sharedAudioPaused=!0,(h=this.onerror)==null||h.call(this,d)},a=d=>{var h;return(h=this.oncanplay)==null?void 0:h.call(this,d)},l=d=>{var h;return(h=this.oncanplaythrough)==null?void 0:h.call(this,d)},u=d=>{var h;return(h=this.onloadeddata)==null?void 0:h.call(this,d)},c=d=>{var h;return(h=this.onloadedmetadata)==null?void 0:h.call(this,d)};return e.addEventListener("timeupdate",t),e.addEventListener("play",r),e.addEventListener("pause",i),e.addEventListener("ended",o),e.addEventListener("error",s),e.addEventListener("canplay",a),e.addEventListener("canplaythrough",l),e.addEventListener("loadeddata",u),e.addEventListener("loadedmetadata",c),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("play",r),e.removeEventListener("pause",i),e.removeEventListener("ended",o),e.removeEventListener("error",s),e.removeEventListener("canplay",a),e.removeEventListener("canplaythrough",l),e.removeEventListener("loadeddata",u),e.removeEventListener("loadedmetadata",c)}}};var Q$=Object.defineProperty,I0=Object.getOwnPropertySymbols,X$=Object.prototype.hasOwnProperty,q$=Object.prototype.propertyIsEnumerable,j0=(n,e,t)=>e in n?Q$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_a=(n,e)=>{for(var t in e||(e={}))X$.call(e,t)&&j0(n,t,e[t]);if(I0)for(var t of I0(e))q$.call(e,t)&&j0(n,t,e[t]);return n};function Y$(n){Qe(n,"svelte-13e7hxv",".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}")}function K$(n){let e,t,r,i;const o=n[8].default,s=Zi(o,n,n[7],null);return{c(){e=ie("div"),s&&s.c(),P(e,"class","audio svelte-13e7hxv"),P(e,"style",n[0])},m(a,l){ae(a,e,l),s&&s.m(e,null),t=!0,r||(i=Ye(e,"click",Gb(n[1])),r=!0)},p(a,[l]){s&&s.p&&(!t||l&128)&&to(s,o,a,a[7],t?eo(o,a[7],l,null):no(a[7]),null),(!t||l&1)&&P(e,"style",a[0])},i(a){t||(q(s,a),t=!0)},o(a){ee(s,a),t=!1},d(a){a&&oe(e),s&&s.d(a),r=!1,i()}}}function J$(n,e,t){let{$$slots:r={},$$scope:i}=e,{url:o}=e,{enable:s=!0}=e,{style:a=""}=e,{hooksInfo:l}=e;const u=uo(),c=Ur("hooks"),d=Ur("mediaStore");let h,f=!0;function p(){t(5,h.onplay=b=>{c.emit("playStateChange",_a({event:b,state:"playing",mediaInstance:h},l)),u("play"),t(6,f=!1)},h),t(5,h.onpause=b=>{c.emit("playStateChange",_a({event:b,state:"paused",mediaInstance:h},l)),u("pause"),t(6,f=!0)},h),t(5,h.onended=b=>{c.emit("playStateChange",_a({event:b,state:"paused",mediaInstance:h},l)),u("pause"),t(6,f=!0)},h),t(5,h.onloadedmetadata=b=>{typeof h.duration=="number"&&!Number.isNaN(h.duration)&&u("duration",h.duration)},h),t(5,h.onerror=b=>{u("pause"),t(6,f=!0)},h),t(5,h.ontimeupdate=b=>{u("timeupdate",h.currentTime)},h)}d.subscribe(({currentMediaElement:b})=>{b!==h&&(f||h==null||h.pause())});function v(b){h&&(c.emit("click",_a({event:b,target:"AudioTagPlayIcon",audioInstance:h},l)),d.set({currentMediaElement:h}),c.emit("playStateChange",_a({event:b,state:h.paused?"playing":"paused",mediaInstance:h},l)),h.paused?h.play():h.pause())}return n.$$set=b=>{"url"in b&&t(2,o=b.url),"enable"in b&&t(3,s=b.enable),"style"in b&&t(0,a=b.style),"hooksInfo"in b&&t(4,l=b.hooksInfo),"$$scope"in b&&t(7,i=b.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&(o||u("duration",0)),n.$$.dirty&36&&(h==null||h.dispose(),t(5,h=new G$(o)),u("audioRef",h),setTimeout(()=>u("audioRef",h),200),p()),n.$$.dirty&40&&(s||h==null||h.pause()),n.$$.dirty&72&&u(s&&!f?"play":"pause")},[a,v,o,s,l,h,f,i,r]}let dv=class extends Re{constructor(e){super(),Le(this,e,J$,K$,De,{url:2,enable:3,style:0,hooksInfo:4},Y$)}};function Z$(n){Qe(n,"svelte-6pnkgc",".audio-icon__wrapper.svelte-6pnkgc.svelte-6pnkgc{display:inline-block}.audio-icon.svelte-6pnkgc.svelte-6pnkgc{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%}.audio-icon.svelte-6pnkgc .sound-wave__container.svelte-6pnkgc{position:absolute;pointer-events:none;top:0;left:0;width:100%;height:100%}@keyframes svelte-6pnkgc-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}")}function D0(n){let e,t;return e=new Cr({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function eM(n){let e,t,r,i,o,s,a,l,u,c,d,h,f,p,v=n[0]&&D0();return{c(){e=ie("div"),v&&v.c(),t=$e(),r=ie("div"),i=ie("div"),o=Ae("svg"),s=Ae("defs"),a=Ae("linearGradient"),l=Ae("stop"),u=Ae("stop"),c=Ae("linearGradient"),d=Ae("stop"),h=Ae("stop"),f=Ae("path"),P(l,"stop-color","rgba(255, 255, 255, 1)"),P(l,"stop-opacity",".5"),P(l,"offset","0%"),P(u,"stop-color","rgba(255, 255, 255, 1)"),P(u,"offset","100%"),P(a,"x1","8.653%"),P(a,"y1","15.676%"),P(a,"x2","85.159%"),P(a,"y2","79.274%"),P(a,"id","dnalogel-audio-icon-linear-gradient-1"),P(d,"stop-color","rgba(255, 255, 255, 1)"),P(d,"offset","0%"),P(h,"stop-color","rgba(255, 255, 255, 1)"),P(h,"stop-opacity","0"),P(h,"offset","100%"),P(c,"x1","0%"),P(c,"y1","0%"),P(c,"x2","64.422%"),P(c,"y2","62.326%"),P(c,"id","dnalogel-audio-icon-linear-gradient-2"),P(f,"d",n[3]),P(f,"fill","url(#dnalogel-audio-icon-linear-gradient-1)"),P(f,"fill-rule","nonzero"),P(f,"stroke","url(#dnalogel-audio-icon-linear-gradient-2)"),P(f,"stroke-width",".5"),P(o,"viewBox","0 0 24 24"),P(o,"version","1.1"),P(o,"aria-label","audio-icon"),P(i,"class","sound-wave__container svelte-6pnkgc"),P(r,"class","audio-icon svelte-6pnkgc"),P(e,"class","audio-icon__wrapper svelte-6pnkgc"),P(e,"style",n[1]),fe(e,"width",n[4]),fe(e,"height",n[4])},m(b,g){ae(b,e,g),v&&v.m(e,null),Y(e,t),Y(e,r),Y(r,i),Y(i,o),Y(o,s),Y(s,a),Y(a,l),Y(a,u),Y(s,c),Y(c,d),Y(c,h),Y(o,f),n[10](i),p=!0},p(b,[g]){b[0]?v?g&1&&q(v,1):(v=D0(),v.c(),q(v,1),v.m(e,t)):v&&(Ie(),ee(v,1,1,()=>{v=null}),je()),(!p||g&8)&&P(f,"d",b[3]),(!p||g&2)&&P(e,"style",b[1]);const y=g&2;(y||g&18)&&fe(e,"width",b[4]),(y||g&18)&&fe(e,"height",b[4])},i(b){p||(q(v),p=!0)},o(b){ee(v),p=!1},d(b){b&&oe(e),v&&v.d(),n[10](null)}}}function tM(n,e,t){let r,i,{playing:o}=e,{shadow:s=!1}=e,{style:a=null}=e,{width:l="100%"}=e,{animated:u=!0}=e,c,d=0,h=null;const f=["M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm1.534 3.282-1.29 1.289.186.183a5.86 5.86 0 0 1 1.663 4.095c0 1.555-.605 2.965-1.786 4.236l1.118 1.12.2-.19a7.46 7.46 0 0 0 2.225-5.322 7.46 7.46 0 0 0-2.316-5.411Zm-2.046 2.047-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-2.264 7.109-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-.512 5.329-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z"];la(()=>{h&&(clearInterval(h),t(9,h=null))});function p(v){$t[v?"unshift":"push"](()=>{c=v,t(2,c)})}return n.$$set=v=>{"playing"in v&&t(5,o=v.playing),"shadow"in v&&t(0,s=v.shadow),"style"in v&&t(1,a=v.style),"width"in v&&t(6,l=v.width),"animated"in v&&t(7,u=v.animated)},n.$$.update=()=>{var v;n.$$.dirty&64&&t(4,r=typeof l=="number"?br(l):l),n.$$.dirty&800&&(o?h||t(9,h=setInterval(()=>{t(8,d=(d+1)%f.length)},500)):(h&&(clearInterval(h),t(9,h=null)),t(8,d=0))),n.$$.dirty&384&&t(3,i=(v=f[u?d:0])!=null?v:f[0])},[s,a,c,i,r,o,l,u,d,h,p]}let id=class extends Re{constructor(e){super(),Le(this,e,tM,eM,De,{playing:5,shadow:0,style:1,width:6,animated:7},Z$)}};function nM(n){Qe(n,"svelte-1s6gk4a",".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}")}function L0(n){var e,t;let r,i,o,s,a,l,u,c,d,h,f,p,v,b;i=new Cr({props:{visible:n[6],left:n[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}});let g=n[6]&&R0(n);return d=new Uw({props:{visible:n[6],textUnfolded:n[1],content:n[5]}}),f=new rv({props:{unfolded:n[6],length:n[3],outDelay:n[4]+20*Math.min((t=(e=n[5])==null?void 0:e.length)!=null?t:10,15),useLinearColor:!0}}),{c(){r=ie("div"),xe(i.$$.fragment),o=$e(),s=ie("div"),a=ie("div"),l=ie("div"),g&&g.c(),u=$e(),c=ie("div"),xe(d.$$.fragment),h=$e(),xe(f.$$.fragment),P(l,"class","audio-icon svelte-1s6gk4a"),fe(c,"display","inline-block"),P(a,"class","wrapper svelte-1s6gk4a"),P(s,"class","content svelte-1s6gk4a"),P(r,"class","audio-tag svelte-1s6gk4a"),Se(r,"unfolded",n[6])},m(y,E){ae(y,r,E),be(i,r,null),Y(r,o),Y(r,s),Y(s,a),Y(a,l),g&&g.m(l,null),Y(a,u),Y(a,c),be(d,c,null),Y(r,h),be(f,r,null),p=!0,v||(b=[Ye(c,"click",n[7]),ks(Gp.call(null,c)),Ye(c,"clientWidth",n[12])],v=!0)},p(y,E){var C,V;const M={};E&64&&(M.visible=y[6]),E&8&&(M.left=y[3]/2+"px"),i.$set(M),y[6]?g?(g.p(y,E),E&64&&q(g,1)):(g=R0(y),g.c(),q(g,1),g.m(l,null)):g&&(Ie(),ee(g,1,1,()=>{g=null}),je());const z={};E&64&&(z.visible=y[6]),E&2&&(z.textUnfolded=y[1]),E&32&&(z.content=y[5]),d.$set(z);const U={};E&64&&(U.unfolded=y[6]),E&8&&(U.length=y[3]),E&48&&(U.outDelay=y[4]+20*Math.min((V=(C=y[5])==null?void 0:C.length)!=null?V:10,15)),f.$set(U),(!p||E&64)&&Se(r,"unfolded",y[6])},i(y){p||(q(i.$$.fragment,y),q(g),q(d.$$.fragment,y),q(f.$$.fragment,y),p=!0)},o(y){ee(i.$$.fragment,y),ee(g),ee(d.$$.fragment,y),ee(f.$$.fragment,y),p=!1},d(y){y&&oe(r),we(i),g&&g.d(),we(d),we(f),v=!1,vn(b)}}}function R0(n){let e,t,r,i,o,s,a;return t=new Cr({props:{center:!0,blurRadius:15,spreadRadius:6}}),i=new dv({props:{enable:n[6],url:n[0].data.audioUrl,hooksInfo:{tag:n[0]},$$slots:{default:[rM]},$$scope:{ctx:n}}}),i.$on("play",n[8]),i.$on("pause",n[9]),i.$on("error",n[10]),i.$on("audioRef",n[11]),{c(){e=ie("div"),xe(t.$$.fragment),r=$e(),xe(i.$$.fragment),P(e,"class","audio svelte-1s6gk4a")},m(l,u){ae(l,e,u),be(t,e,null),Y(e,r),be(i,e,null),a=!0},p(l,u){n=l;const c={};u&64&&(c.enable=n[6]),u&1&&(c.url=n[0].data.audioUrl),u&1&&(c.hooksInfo={tag:n[0]}),u&8196&&(c.$$scope={dirty:u,ctx:n}),i.$set(c)},i(l){a||(q(t.$$.fragment,l),q(i.$$.fragment,l),l&&kn(()=>{a&&(s&&s.end(1),o=Xo(e,Lo,{duration:1e3,delay:0,easing:Ys}),o.start())}),a=!0)},o(l){var u,c;ee(t.$$.fragment,l),ee(i.$$.fragment,l),o&&o.invalidate(),l&&(s=ua(e,Lo,{duration:1e3,delay:20*Math.min((c=(u=n[5])==null?void 0:u.length)!=null?c:10,15),easing:Ys})),a=!1},d(l){l&&oe(e),we(t),we(i),l&&s&&s.end()}}}function rM(n){let e,t,r;return t=new id({props:{playing:n[2]}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","audio-icon__wrapper svelte-1s6gk4a")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o&4&&(s.playing=i[2]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function iM(n){let e,t,r=n[0].state&&L0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state?r?(r.p(i,o),o&1&&q(r,1)):(r=L0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function oM(n,e,t){let r,i,o,{tag:s}=e,a=!1,l=!1,u;function c(){t(1,a=!a)}const d=()=>{t(2,l=!0)},h=()=>{t(2,l=!1)},f=()=>{t(2,l=!1)};function p(b){bi.call(this,n,b)}const v=b=>{t(3,u=b.detail)};return n.$$set=b=>{"tag"in b&&t(0,s=b.tag)},n.$$.update=()=>{var b,g,y;n.$$.dirty&1&&t(6,r=!!((b=s.state)!=null&&b.unfolded)),n.$$.dirty&1&&t(5,i=(y=(g=s.data.title)!=null?g:s.data.text)!=null?y:""),n.$$.dirty&2&&t(4,o=a?450:0)},[s,a,l,u,o,i,r,c,d,h,f,p,v]}class sM extends Re{constructor(e){super(),Le(this,e,oM,iM,De,{tag:0},nM)}}function aM(n){Qe(n,"svelte-nclraj",".audio-tag__wrapper.svelte-nclraj{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-nclraj{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3)}.audio__inner.svelte-nclraj{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-nclraj{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-nclraj{position:relative;vertical-align:top;pointer-events:none;width:1.5rem;height:1.5rem}")}function z0(n){let e,t,r,i;return r=new dv({props:{style:"width: max-content; height: max-content;",enable:n[0].state.visible,url:n[0].data.audioUrl,hooksInfo:{tag:n[0]},$$slots:{default:[uM]},$$scope:{ctx:n}}}),r.$on("play",n[5]),r.$on("pause",n[6]),r.$on("error",n[7]),r.$on("timeupdate",n[8]),r.$on("duration",n[9]),r.$on("audioRef",n[10]),{c(){e=ie("div"),t=ie("div"),xe(r.$$.fragment),P(t,"class","audio-tag svelte-nclraj"),P(e,"class","audio-tag__wrapper svelte-nclraj")},m(o,s){ae(o,e,s),Y(e,t),be(r,t,null),i=!0},p(o,s){const a={};s&1&&(a.enable=o[0].state.visible),s&1&&(a.url=o[0].data.audioUrl),s&1&&(a.hooksInfo={tag:o[0]}),s&2072&&(a.$$scope={dirty:s,ctx:o}),r.$set(a)},i(o){i||(q(r.$$.fragment,o),i=!0)},o(o){ee(r.$$.fragment,o),i=!1},d(o){o&&oe(e),we(r)}}}function lM(n){let e;return{c(){e=dt(n[4])},m(t,r){ae(t,e,r)},p(t,r){r&16&&yt(e,t[4])},d(t){t&&oe(e)}}}function uM(n){let e,t,r,i,o,s,a;return r=new id({props:{playing:n[3]}}),s=new iv({props:{maxWidth:72,maxLine:1,$$slots:{default:[lM]},$$scope:{ctx:n}}}),{c(){e=ie("div"),t=ie("div"),xe(r.$$.fragment),i=$e(),o=ie("div"),xe(s.$$.fragment),P(t,"class","audio-icon__wrapper svelte-nclraj"),P(o,"class","text svelte-nclraj"),P(e,"class","audio__inner svelte-nclraj")},m(l,u){ae(l,e,u),Y(e,t),be(r,t,null),Y(e,i),Y(e,o),be(s,o,null),a=!0},p(l,u){const c={};u&8&&(c.playing=l[3]),r.$set(c);const d={};u&2064&&(d.$$scope={dirty:u,ctx:l}),s.$set(d)},i(l){a||(q(r.$$.fragment,l),q(s.$$.fragment,l),a=!0)},o(l){ee(r.$$.fragment,l),ee(s.$$.fragment,l),a=!1},d(l){l&&oe(e),we(r),we(s)}}}function cM(n){let e,t,r=n[0].state&&z0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state?r?(r.p(i,o),o&1&&q(r,1)):(r=z0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function dM(n,e,t){let r,{tag:i}=e,o=0,s=0,a=!1;const l=()=>{t(3,a=!0)},u=()=>{t(3,a=!1)},c=()=>{t(3,a=!1)},d=p=>{t(1,o=p.detail)},h=p=>{t(2,s=p.detail)};function f(p){bi.call(this,n,p)}return n.$$set=p=>{"tag"in p&&t(0,i=p.tag)},n.$$.update=()=>{var p,v;n.$$.dirty&1&&t(4,r=(v=(p=i.data.title)!=null?p:i.data.text)!=null?v:"")},[i,o,s,a,r,l,u,c,d,h,f]}class hM extends Re{constructor(e){super(),Le(this,e,dM,cM,De,{tag:0},aM)}}function fM(n){let e,t;return e=new hM({props:{tag:n[0]}}),e.$on("audioRef",n[2]),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=r[0]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function pM(n){let e,t;return e=new sM({props:{tag:n[0]}}),e.$on("audioRef",n[2]),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=r[0]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function vM(n){let e,t,r,i;const o=[pM,fM],s=[];function a(l,u){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(e=a(n))&&(t=s[e]=o[e](n)),{c(){t&&t.c(),r=at()},m(l,u){~e&&s[e].m(l,u),ae(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?~e&&s[e].p(l,u):(t&&(Ie(),ee(s[c],1,1,()=>{s[c]=null}),je()),~e?(t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),q(t,1),t.m(r.parentNode,r)):t=null)},i(l){i||(q(t),i=!0)},o(l){ee(t),i=!1},d(l){~e&&s[e].d(l),l&&oe(r)}}}function mM(n,e,t){let r,{tag:i}=e,o;function s(a){o=a.detail}return i.play=()=>o.play(),i.pause=()=>o.pause(),n.$$set=a=>{"tag"in a&&t(0,i=a.tag)},n.$$.update=()=>{var a;n.$$.dirty&1&&t(1,r=(a=i.data.appearance)!=null?a:"line")},[i,r,s]}class gM extends Re{constructor(e){super(),Le(this,e,mM,vM,De,{tag:0})}}function yM(n){Qe(n,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function B0(n){var e;let t,r,i;return r=new t2({props:{mediaItemConfig:{canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(e=n[4])!=null?e:"withText",disableVideoIfHavePoster:!1,objectFit:n[2]},unfolded:n[6],mediaData:n[5],enableCarousel:n[1],autoplayConfig:n[3],tag:n[0],inDelay:500,duration:500}}),{c(){t=ie("div"),xe(r.$$.fragment),P(t,"class","media-wrapper svelte-10cw0el")},m(o,s){ae(o,t,s),be(r,t,null),i=!0},p(o,s){var a;const l={};s&20&&(l.mediaItemConfig={canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(a=o[4])!=null?a:"withText",disableVideoIfHavePoster:!1,objectFit:o[2]}),s&64&&(l.unfolded=o[6]),s&32&&(l.mediaData=o[5]),s&2&&(l.enableCarousel=o[1]),s&8&&(l.autoplayConfig=o[3]),s&1&&(l.tag=o[0]),r.$set(l)},i(o){i||(q(r.$$.fragment,o),i=!0)},o(o){ee(r.$$.fragment,o),i=!1},d(o){o&&oe(t),we(r)}}}function AM(n){let e,t,r=n[0].state&&n[5]&&B0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].state&&i[5]?r?(r.p(i,o),o&33&&q(r,1)):(r=B0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function bM(n,e,t){let r,i,o,s,a,l,{tag:u}=e;return n.$$set=c=>{"tag"in c&&t(0,u=c.tag)},n.$$.update=()=>{var c,d;n.$$.dirty&1&&t(6,r=u.state?u.state.unfolded:!1),n.$$.dirty&1&&t(5,i=u.data.mediaData),n.$$.dirty&1&&t(1,o=u.data.enableCarousel),n.$$.dirty&1&&t(4,s=u.data.playIcon),n.$$.dirty&3&&t(3,a=(c=u.data.autoplayConfig)!=null?c:{autoplay:o??!0,autoplayVideo:!0}),n.$$.dirty&1&&t(2,l=(d=u.data.objectFit)!=null?d:u.data.adaptationMode==="stretch"?"fill":u.data.adaptationMode==="proportional"?"contain":void 0)},[u,o,l,a,s,i,r]}class wM extends Re{constructor(e){super(),Le(this,e,bM,AM,De,{tag:0},yM)}}var xM=Object.defineProperty,PM=Object.defineProperties,EM=Object.getOwnPropertyDescriptors,F0=Object.getOwnPropertySymbols,CM=Object.prototype.hasOwnProperty,SM=Object.prototype.propertyIsEnumerable,H0=(n,e,t)=>e in n?xM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,n2=(n,e)=>{for(var t in e||(e={}))CM.call(e,t)&&H0(n,t,e[t]);if(F0)for(var t of F0(e))SM.call(e,t)&&H0(n,t,e[t]);return n},r2=(n,e)=>PM(n,EM(e)),hv=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const zd=new Map;function i2(n){return hv(this,null,function*(){return new Promise((e,t)=>{if(!n){t(Error("url is empty"));return}const r=new Image;r.src=n,r.onload=()=>e({width:r.width,height:r.height}),r.onerror=t})})}function OM(n){return hv(this,null,function*(){const{url:e,ratio:t=3}=n,r=(()=>{if(zd.has(e))return zd.get(e);const s=i2(e);return zd.set(e,s),s})(),{width:i,height:o}=yield r;return r2(n2({},n),{width:i/t,height:o/t})})}function $M(n){return hv(this,null,function*(){const{steps:e,url:t,ratio:r=3,fps:i=24}=n;if(!e)throw new Error("KeyframeIcon requires steps");const{width:o,height:s}=yield i2(t),a=o/r,l=s/r,u=a/e,c=l,d=1/i*e+"s";return r2(n2({},n),{width:u,height:c,duration:d})})}var MM=Object.defineProperty,VM=Object.defineProperties,TM=Object.getOwnPropertyDescriptors,U0=Object.getOwnPropertySymbols,_M=Object.prototype.hasOwnProperty,kM=Object.prototype.propertyIsEnumerable,N0=(n,e,t)=>e in n?MM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,o2=(n,e)=>{for(var t in e||(e={}))_M.call(e,t)&&N0(n,t,e[t]);if(U0)for(var t of U0(e))kM.call(e,t)&&N0(n,t,e[t]);return n},s2=(n,e)=>VM(n,TM(e)),W0=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function IM(n){Qe(n,"svelte-1j3azjf",'@keyframes svelte-1j3azjf-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-bg.svelte-1j3azjf{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden}.icon-bg-circle.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-1j3azjf::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;z-index:1;border:0.0625rem solid rgba(255,255,255,0.6)}.icon-image.svelte-1j3azjf{position:relative;display:block;width:auto}.icon-keyframe.svelte-1j3azjf{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-1j3azjf-sprites-animation;animation-delay:0}')}function G0(n){n[1]=n[21].width}function Q0(n){n[1]=n[21].width,n[18]=n[21].height,n[19]=n[21].steps,n[20]=n[21].duration}function X0(n){let e,t,r,i=n[0]&&q0();function o(l,u){return l[8]?DM:jM}let s=o(n),a=s(n);return{c(){e=ie("div"),i&&i.c(),t=$e(),a.c(),P(e,"class","icon"),fe(e,"width",n[1])},m(l,u){ae(l,e,u),i&&i.m(e,null),Y(e,t),a.m(e,null),r=!0},p(l,u){l[0]?i?u&1&&q(i,1):(i=q0(),i.c(),q(i,1),i.m(e,t)):i&&(Ie(),ee(i,1,1,()=>{i=null}),je()),s===(s=o(l))&&a?a.p(l,u):(a.d(1),a=s(l),a&&(a.c(),a.m(e,null))),u&2&&fe(e,"width",l[1])},i(l){r||(q(i),r=!0)},o(l){ee(i),r=!1},d(l){l&&oe(e),i&&i.d(),a.d()}}}function q0(n){let e,t;return e=new Cr({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function jM(n){let e,t,r={ctx:n,current:null,token:null,hasCatch:!1,pending:zM,then:RM,catch:LM,value:21};return cc(t=n[13](At({url:n[7],ratio:n[5]})),r),{c(){e=at(),r.block.c()},m(i,o){ae(i,e,o),r.block.m(i,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e},p(i,o){n=i,r.ctx=n,o&160&&t!==(t=n[13](At({url:n[7],ratio:n[5]})))&&cc(t,r)||Yb(r,n,o)},d(i){i&&oe(e),r.block.d(i),r.token=null,r=null}}}function DM(n){let e,t,r={ctx:n,current:null,token:null,hasCatch:!1,pending:HM,then:FM,catch:BM,value:21};return cc(t=n[12](At({url:n[7],steps:n[2],fps:n[6],ratio:n[5]})),r),{c(){e=at(),r.block.c()},m(i,o){ae(i,e,o),r.block.m(i,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e},p(i,o){n=i,r.ctx=n,o&228&&t!==(t=n[12](At({url:n[7],steps:n[2],fps:n[6],ratio:n[5]})))&&cc(t,r)||Yb(r,n,o)},d(i){i&&oe(e),r.block.d(i),r.token=null,r=null}}}function LM(n){return{c:Ee,m:Ee,p:Ee,d:Ee}}function RM(n){G0(n);let e,t,r,i=n[11]&&Y0(n);return{c(){i&&i.c(),e=$e(),t=ie("img"),P(t,"alt","tag-icon"),P(t,"class","icon-image svelte-1j3azjf"),pn(t.src,r=n[7])||P(t,"src",r),fe(t,"width",br(Ss({originWidth:n[1],scale:n[4],wantedWidth:n[3]}).width)),fe(t,"max-width","initial")},m(o,s){i&&i.m(o,s),ae(o,e,s),ae(o,t,s)},p(o,s){G0(o),o[11]?i?i.p(o,s):(i=Y0(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),s&128&&!pn(t.src,r=o[7])&&P(t,"src",r),s&184&&fe(t,"width",br(Ss({originWidth:o[1],scale:o[4],wantedWidth:o[3]}).width))},d(o){i&&i.d(o),o&&oe(e),o&&oe(t)}}}function Y0(n){let e,t,r,i,o;return{c(){e=ie("div"),t=ie("div"),r=ie("div"),i=$e(),o=ie("div"),P(r,"class","icon-bg-circle-inner svelte-1j3azjf"),fe(r,"background",n[11]),fe(r,"opacity",n[10]),P(o,"class","icon-bg-circle-inner-shadow svelte-1j3azjf"),P(t,"class","icon-bg-circle svelte-1j3azjf"),P(e,"class","icon-bg svelte-1j3azjf")},m(s,a){ae(s,e,a),Y(e,t),Y(t,r),Y(t,i),Y(t,o)},p(s,a){a&2048&&fe(r,"background",s[11]),a&1024&&fe(r,"opacity",s[10])},d(s){s&&oe(e)}}}function zM(n){return{c:Ee,m:Ee,p:Ee,d:Ee}}function BM(n){return{c:Ee,m:Ee,p:Ee,d:Ee}}function FM(n){Q0(n);let e,t=`url(${n[7]})`,r=`steps(${n[19]-1})`;return{c(){e=ie("div"),P(e,"class","icon-keyframe svelte-1j3azjf"),fe(e,"width",br(Ss({originWidth:n[1],originHeight:n[18],scale:n[4],wantedWidth:n[3]}).width)),fe(e,"height",br(Ss({originWidth:n[1],originHeight:n[18],scale:n[4],wantedWidth:n[3]}).height)),fe(e,"background-image",t),fe(e,"animation-duration",n[20]),fe(e,"animation-timing-function",r)},m(i,o){ae(i,e,o)},p(i,o){Q0(i),o&252&&fe(e,"width",br(Ss({originWidth:i[1],originHeight:i[18],scale:i[4],wantedWidth:i[3]}).width)),o&252&&fe(e,"height",br(Ss({originWidth:i[1],originHeight:i[18],scale:i[4],wantedWidth:i[3]}).height)),o&128&&t!==(t=`url(${i[7]})`)&&fe(e,"background-image",t),o&228&&fe(e,"animation-duration",i[20]),o&228&&r!==(r=`steps(${i[19]-1})`)&&fe(e,"animation-timing-function",r)},d(i){i&&oe(e)}}}function HM(n){return{c:Ee,m:Ee,p:Ee,d:Ee}}function UM(n){let e,t,r=n[9]&&X0(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[9]?r?(r.p(i,o),o&512&&q(r,1)):(r=X0(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function Ss(n){const{originWidth:e,originHeight:t,scale:r=1,wantedWidth:i}=n,o=(i??e)*r,s=typeof t=="number"?o*(t/e):void 0;return s2(o2({},n),{width:o,height:s})}function NM(n,e,t){let r,i,o,s,a,l,u,c,d,h,f,{width:p=null}=e,{icon:v=null}=e,{shadow:b=!1}=e;const g=uo();function y(V){return W0(this,null,function*(){const M=yield $M(V);return g("iconLoaded",M),M})}function E(V){return W0(this,null,function*(){if(typeof f=="number")return s2(o2({},V),{width:f});const M=yield OM(V);return g("iconLoaded",M),M})}function C(){h||g("iconLoaded")}return lo(()=>{C()}),n.$$set=V=>{"width"in V&&t(1,p=V.width),"icon"in V&&t(14,v=V.icon),"shadow"in V&&t(0,b=V.shadow)},n.$$.update=()=>{var V,M,z;n.$$.dirty&16384&&t(7,r=v==null?void 0:v.url),n.$$.dirty&16384&&t(11,i=v==null?void 0:v.bgcolor),n.$$.dirty&16384&&t(10,o=(V=v==null?void 0:v.bgopacity)!=null?V:.6),n.$$.dirty&16384&&t(2,s=(M=v==null?void 0:v.steps)!=null?M:1),n.$$.dirty&16384&&t(6,a=v==null?void 0:v.fps),n.$$.dirty&16384&&t(5,l=v==null?void 0:v.ratio),n.$$.dirty&16384&&t(4,u=(z=v==null?void 0:v.scale)!=null?z:1),n.$$.dirty&16384&&t(3,c=v==null?void 0:v.width),n.$$.dirty&252&&t(9,d=At({url:r,steps:s,fps:a,ratio:l,scale:u,width:c})),n.$$.dirty&4&&t(8,h=s>1),n.$$.dirty&2&&(f=p)},C(),[b,p,s,c,u,l,a,r,h,d,o,i,y,E,v]}let a2=class extends Re{constructor(e){super(),Le(this,e,NM,UM,De,{width:1,icon:14,shadow:0},IM)}};function WM(n){Qe(n,"svelte-e58ijk",".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function K0(n){let e,t,r,i,o,s;return t=new Cr({props:{outDelay:0,inDelay:0,center:!0,width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){e=ie("div"),xe(t.$$.fragment),r=$e(),i=ie("div"),o=dt(n[2]),P(i,"class","text svelte-e58ijk"),fe(i,"top",n[1]),P(e,"class","text-wrapper svelte-e58ijk")},m(a,l){ae(a,e,l),be(t,e,null),Y(e,r),Y(e,i),Y(i,o),s=!0},p(a,l){(!s||l&4)&&yt(o,a[2]),l&2&&fe(i,"top",a[1])},i(a){s||(q(t.$$.fragment,a),s=!0)},o(a){ee(t.$$.fragment,a),s=!1},d(a){a&&oe(e),we(t)}}}function GM(n){let e,t,r,i;t=new a2({props:{icon:n[0],shadow:!0}}),t.$on("iconLoaded",n[8]);let o=n[2]&&n[3]&&K0(n);return{c(){e=ie("div"),xe(t.$$.fragment),r=$e(),o&&o.c(),P(e,"class","wrapper svelte-e58ijk")},m(s,a){ae(s,e,a),be(t,e,null),Y(e,r),o&&o.m(e,null),i=!0},p(s,[a]){const l={};a&1&&(l.icon=s[0]),t.$set(l),s[2]&&s[3]?o?(o.p(s,a),a&12&&q(o,1)):(o=K0(s),o.c(),q(o,1),o.m(e,null)):o&&(Ie(),ee(o,1,1,()=>{o=null}),je())},i(s){i||(q(t.$$.fragment,s),q(o),i=!0)},o(s){ee(t.$$.fragment,s),ee(o),i=!1},d(s){s&&oe(e),we(t),o&&o.d()}}}const QM=4;function XM(n,e,t){let r,i,o,s,a,l,u,{tag:c}=e;const d=()=>{t(3,r=!0)};return n.$$set=h=>{"tag"in h&&t(4,c=h.tag)},n.$$.update=()=>{var h,f,p,v,b,g,y,E;n.$$.dirty&16&&t(2,i=(h=c.data.title)!=null?h:c.data.text),n.$$.dirty&16&&t(0,o=(p=c.data.icon)!=null?p:(f=c.style)==null?void 0:f.point),n.$$.dirty&16&&t(6,s=(b=(v=c.style)==null?void 0:v.point)==null?void 0:b.width),n.$$.dirty&16&&t(5,a=(E=(y=(g=c.style)==null?void 0:g.point)==null?void 0:y.scale)!=null?E:1),n.$$.dirty&1&&t(7,l=o==null?void 0:o.bgcolor),n.$$.dirty&224&&t(1,u=l&&s&&typeof s=="number"?br(s*.414*a/2+QM):0)},t(3,r=!1),[o,u,i,r,c,a,s,l,d]}class qM extends Re{constructor(e){super(),Le(this,e,XM,GM,De,{tag:4},WM)}}var YM=Object.defineProperty,KM=Object.defineProperties,JM=Object.getOwnPropertyDescriptors,J0=Object.getOwnPropertySymbols,ZM=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,Z0=(n,e,t)=>e in n?YM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tV=(n,e)=>{for(var t in e||(e={}))ZM.call(e,t)&&Z0(n,t,e[t]);if(J0)for(var t of J0(e))eV.call(e,t)&&Z0(n,t,e[t]);return n},nV=(n,e)=>KM(n,JM(e));function rV(n){Qe(n,"svelte-ezi5lu",`.icon.svelte-ezi5lu{font-size:0}.icon-bg.svelte-ezi5lu{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden;z-index:-1}.icon-bg-circle.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-ezi5lu::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.2), rgba(255,255,255,1));z-index:1;mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%);-webkit-mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%)}`)}function e1(n){let e,t;return e=new Cr({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function t1(n){let e,t,r,i,o;return{c(){e=ie("div"),t=ie("div"),r=ie("div"),i=$e(),o=ie("div"),P(r,"class","icon-bg-circle-inner svelte-ezi5lu"),fe(r,"background",n[4]),fe(r,"opacity",n[3]),P(o,"class","icon-bg-circle-inner-shadow svelte-ezi5lu"),P(t,"class","icon-bg-circle svelte-ezi5lu"),P(e,"class","icon-bg svelte-ezi5lu")},m(s,a){ae(s,e,a),Y(e,t),Y(t,r),Y(t,i),Y(t,o)},p(s,a){a&16&&fe(r,"background",s[4]),a&8&&fe(r,"opacity",s[3])},d(s){s&&oe(e)}}}function iV(n){let e,t,r,i,o,s,a,l,u,c,d,h,f,p,v,b=n[1]&&e1(),g=n[4]&&t1(n);return{c(){e=ie("div"),b&&b.c(),t=$e(),g&&g.c(),r=$e(),i=Ae("svg"),o=Ae("linearGradient"),s=Ae("stop"),a=Ae("stop"),l=Ae("linearGradient"),u=Ae("stop"),c=Ae("stop"),d=Ae("g"),h=Ae("path"),f=Ae("path"),p=Ae("path"),P(s,"offset","0"),P(s,"stop-color","#fff"),P(a,"offset","1"),P(a,"stop-color","#fff"),P(a,"stop-opacity",".7"),P(o,"id","a"),P(o,"x1","78.74567%"),P(o,"x2","5.663764%"),P(o,"y1","94.075617%"),P(o,"y2","5.924383%"),P(u,"offset","0"),P(u,"stop-color","#fff"),P(c,"offset","1"),P(c,"stop-color","#fff"),P(c,"stop-opacity","0"),P(l,"id","b"),P(l,"x1","16.588502%"),P(l,"x2","68.285986%"),P(l,"y1","5.924383%"),P(l,"y2","63.800896%"),P(h,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-13.0396582-.5c.259 0 .504-.063.728-.196.441-.259.721-.728.721-1.26 0-.441-.189-.833-.504-1.085.259-.259.434-.63.434-1.022 0-.245-.063-.476-.182-.679-.252-.413-.693-.658-1.197-.658-.238 0-.462.056-.665.175-.42.238-.679.665-.679 1.162v.035h.721v-.035c0-.315.294-.616.623-.616.357 0 .651.287.651.616 0 .371-.287.658-.651.658h-.14v.728h.14c.399 0 .728.322.728.721s-.329.735-.728.735-.728-.336-.728-.735v-.105h-.728v.105c0 .266.063.511.196.728.259.448.728.728 1.26.728zm3.647 0c.273 0 .518-.07.749-.203.448-.273.742-.763.742-1.302 0-.273-.07-.518-.203-.749-.273-.448-.749-.742-1.288-.742-.077 0-.133 0-.168.007l.875-1.911h-.805l-1.274 2.793c-.091.189-.133.392-.133.602 0 .273.07.525.203.756.273.455.749.749 1.302.749zm0-.742c-.427 0-.763-.336-.763-.763 0-.42.343-.77.763-.77s.77.35.77.77-.35.763-.77.763zm3.654.749c.504 0 .952-.273 1.204-.7.126-.21.189-.441.189-.693v-2.086c0-.511-.273-.98-.693-1.239-.217-.126-.448-.189-.7-.189-.511 0-.98.273-1.232.714-.133.217-.196.455-.196.714v2.086c0 .504.273.952.714 1.204.217.126.455.189.714.189zm0-.721c-.371 0-.693-.301-.693-.672v-2.086c0-.399.308-.693.693-.693.371 0 .651.294.651.693v2.086c0 .385-.28.672-.651.672zm3.2140391-2.11266016c.2734375 0 .5132649-.09855143.7194824-.29565429.2062174-.19710287.3093262-.44376628.3093262-.73999024 0-.28710937-.0991211-.53035481-.2973633-.72973633-.1982422-.19938151-.4420573-.29907226-.7314453-.29907226-.2825521 0-.5257976.10026042-.7297364.30078125s-.3059082.44661458-.3059082.73828125c0 .2734375.0968425.51269531.2905274.71777344.1936849.20507812.4420573.30761718.7451172.30761718zm0-.37255859c-.1822917 0-.3383789-.06494141-.4682618-.19482422-.1298828-.12988281-.1948242-.28369141-.1948242-.46142578 0-.18457031.0655111-.34122721.1965332-.4699707.1310222-.12874349.2865397-.19311524.4665528-.19311524.180013 0 .3343912.06494141.4631347.19482422s.1931153.28369141.1931153.46142578c0 .18457031-.0655111.34122722-.1965332.46997071-.1310222.12874349-.2842611.19311523-.4597168.19311523z"),P(h,"fill","url(#a)"),P(h,"fill-rule","nonzero"),P(f,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-.537 1.917-.0556083.04651904c-1.6129673 1.27557869-4.7855335 2.07278608-8.4073917 2.07278608-3.5667171 0-6.69228643-.77164105-8.32741897-2.0099189l-.13658103-.10838622.00030512 6.082c0 1.4658868 3.60570734 2.8999734 8.15878222 2.9616322l.30491266.0020627c4.6959533 0 8.4636949-1.4652329 8.4636949-2.9636949zm-5.2016582-7.317c.252 0 .483.063.7.189.42.259.693.728.693 1.239v2.086l-.00756.14868c-.02016.19488-.08064.37632-.18144.54432-.252.427-.7.7-1.204.7-.259 0-.497-.063-.714-.189-.441-.252-.714-.7-.714-1.204v-2.086l.007616-.15288c.020384-.20048.081984-.38752.188384-.56112.252-.441.721-.714 1.232-.714zm-7.301 0c.504 0 .945.245 1.197.658.119.203.182.434.182.679 0 .392-.175.763-.434 1.022.315.252.504.644.504 1.085 0 .532-.28 1.001-.721 1.26-.224.133-.469.196-.728.196-.532 0-1.001-.28-1.26-.728-.133-.217-.196-.462-.196-.728v-.105h.728v.105c0 .399.329.735.728.735s.728-.336.728-.735-.329-.721-.728-.721h-.14v-.728h.14c.364 0 .651-.287.651-.658 0-.329-.294-.616-.651-.616-.329 0-.623.301-.623.616v.035h-.721v-.035c0-.497.259-.924.679-1.162.203-.119.427-.175.665-.175zm4.354 0-.875 1.911c.035-.007.091-.007.168-.007.539 0 1.015.294 1.288.742.133.231.203.476.203.749 0 .539-.294 1.029-.742 1.302-.231.133-.476.203-.749.203-.553 0-1.029-.294-1.302-.749-.133-.231-.203-.483-.203-.756 0-.21.042-.413.133-.602l1.274-2.793zm2.947.735c-.385 0-.693.294-.693.693v2.086l.0077784.09927273c.051172.32396694.3479489.57272727.6852216.57272727.371 0 .651-.287.651-.672v-2.086l-.0068002-.10607288c-.044861-.34395191-.3069271-.58692712-.6441998-.58692712zm-3.654 1.89c-.42 0-.763.35-.763.77 0 .427.336.763.763.763.42 0 .77-.343.77-.763s-.35-.77-.77-.77zm6.8680391-2.61611328c.289388 0 .5332031.09969075.7314453.29907226.1982422.19938152.2973633.44262696.2973633.72973633 0 .29622396-.1031088.54288737-.3093262.73999024-.2062175.19710286-.4460449.29565429-.7194824.29565429-.3030599 0-.5514323-.10253906-.7451172-.30761718-.1936849-.20507813-.2905274-.44433594-.2905274-.71777344 0-.29166667.1019694-.53776042.3059082-.73828125s.4471843-.30078125.7297364-.30078125zm0 .37255859c-.1800131 0-.3355306.06437175-.4665528.19311524-.1310221.12874349-.1965332.28540039-.1965332.4699707 0 .17773437.0649414.33154297.1948242.46142578.1298829.12988281.2859701.19482422.4682618.19482422.1754557 0 .3286946-.06437174.4597168-.19311523.1310221-.12874349.1965332-.2854004.1965332-.46997071 0-.17773437-.0643718-.33154297-.1931153-.46142578s-.2831217-.19482422-.4631347-.19482422z"),P(f,"fill","url(#b)"),P(f,"fill-rule","nonzero"),P(p,"d","m3.00030998 2.79110119v5.21779762c-1.84142801-.64087734-3.00030998-1.57225753-3.00030998-2.60889881s1.15888197-1.96802147 3.00030998-2.60889881zm12.00038752.00035068c1.8408432.64086639 2.9993025 1.57209591 2.9993025 2.60854813s-1.1584593 1.96768174-2.9993025 2.60854813z"),P(p,"fill","#d8d8d8"),P(p,"opacity",".6"),P(d,"fill","none"),P(d,"fill-rule","evenodd"),P(d,"transform","translate(3 3.1)"),P(i,"height",n[2]),P(i,"width",n[2]),P(i,"viewBox","0 0 24 24"),P(i,"xmlns","http://www.w3.org/2000/svg"),P(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),P(e,"class","icon svelte-ezi5lu"),fe(e,"width",n[0])},m(y,E){ae(y,e,E),b&&b.m(e,null),Y(e,t),g&&g.m(e,null),Y(e,r),Y(e,i),Y(i,o),Y(o,s),Y(o,a),Y(i,l),Y(l,u),Y(l,c),Y(i,d),Y(d,h),Y(d,f),Y(d,p),v=!0},p(y,[E]){y[1]?b?E&2&&q(b,1):(b=e1(),b.c(),q(b,1),b.m(e,t)):b&&(Ie(),ee(b,1,1,()=>{b=null}),je()),y[4]?g?g.p(y,E):(g=t1(y),g.c(),g.m(e,r)):g&&(g.d(1),g=null),(!v||E&4)&&P(i,"height",y[2]),(!v||E&4)&&P(i,"width",y[2]),E&1&&fe(e,"width",y[0])},i(y){v||(q(b),v=!0)},o(y){ee(b),v=!1},d(y){y&&oe(e),b&&b.d(),g&&g.d()}}}function oV(n){const{originWidth:e,originHeight:t,scale:r=1,wantedWidth:i}=n,o=(i??e)*r,s=typeof t=="number"?o*(t/e):void 0;return nV(tV({},n),{width:o,height:s})}function sV(n,e,t){let r,i,o,s,a,{width:l=null}=e,{icon:u=null}=e,{shadow:c=!1}=e;return n.$$set=d=>{"width"in d&&t(0,l=d.width),"icon"in d&&t(5,u=d.icon),"shadow"in d&&t(1,c=d.shadow)},n.$$.update=()=>{var d,h;n.$$.dirty&32&&t(4,r=u==null?void 0:u.bgcolor),n.$$.dirty&32&&t(3,i=(d=u==null?void 0:u.bgopacity)!=null?d:.6),n.$$.dirty&32&&t(7,o=(h=u==null?void 0:u.scale)!=null?h:1),n.$$.dirty&32&&t(6,s=u==null?void 0:u.width),n.$$.dirty&192&&t(2,a=oV({originWidth:24,originHeight:24,scale:o,wantedWidth:s}).width)},[l,c,a,i,r,u,s,o]}class aV extends Re{constructor(e){super(),Le(this,e,sV,iV,De,{width:0,icon:5,shadow:1},rV)}}function lV(n){Qe(n,"svelte-yq4ru9",".wrapper.svelte-yq4ru9{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}")}function uV(n){let e,t,r;return t=new aV({props:{icon:n[0],shadow:!0}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","wrapper svelte-yq4ru9")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,[o]){const s={};o&1&&(s.icon=i[0]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function cV(n,e,t){let r,{tag:i}=e;return n.$$set=o=>{"tag"in o&&t(1,i=o.tag)},n.$$.update=()=>{var o,s;n.$$.dirty&2&&t(0,r=(s=i.data.icon)!=null?s:(o=i.style)==null?void 0:o.point)},[r,i]}let dV=class extends Re{constructor(e){super(),Le(this,e,cV,uV,De,{tag:1},lV)}};function hV(n){Qe(n,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function fV(n){let e,t;return{c(){e=new vE(!1),t=at(),e.a=t},m(r,i){e.m(n[2],r,i),ae(r,t,i)},p:Ee,d(r){r&&oe(t),r&&e.d()}}}function pV(n){let e,t=typeof n[2]=="string"&&fV(n);return{c(){e=ie("div"),t&&t.c(),P(e,"class","customElement__container svelte-kzl2aj"),Se(e,"unfolded",n[1])},m(r,i){ae(r,e,i),t&&t.m(e,null),n[5](e)},p(r,[i]){typeof r[2]=="string"&&t.p(r,i),i&2&&Se(e,"unfolded",r[1])},i:Ee,o:Ee,d(r){r&&oe(e),t&&t.d(),n[5](null)}}}function vV(n,e,t){var r,i;let o,{tag:s}=e,{rendererMap:a=new Map}=e,l,u=(i=s.element)!=null?i:(r=a.get(s.contentType))==null?void 0:r.renderer,c;lo(()=>{l&&(u instanceof Element?(l.appendChild(u),c=()=>{u instanceof Element&&u.remove()}):typeof u=="function"&&(c=u(l,s)))}),la(()=>{c==null||c()});function d(h){$t[h?"unshift":"push"](()=>{l=h,t(0,l)})}return n.$$set=h=>{"tag"in h&&t(3,s=h.tag),"rendererMap"in h&&t(4,a=h.rendererMap)},n.$$.update=()=>{n.$$.dirty&8&&t(1,o=s.state.unfolded)},[l,o,u,s,a,d]}let mV=class extends Re{constructor(e){super(),Le(this,e,vV,pV,De,{tag:3,rendererMap:4},hV)}};function gV(n){Qe(n,"svelte-1fy4duy",'@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1fy4duy{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif;transition:opacity 0.2s linear}.content__container.unClickable.svelte-1fy4duy{pointer-events:none !important}.content__container.unClickable.svelte-1fy4duy *{pointer-events:none !important}.content__wrapper.svelte-1fy4duy{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1fy4duy{opacity:0;pointer-events:none}.content__container.hide.svelte-1fy4duy *{pointer-events:none !important}.content__container.disable.svelte-1fy4duy{display:none}.content.svelte-1fy4duy{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1fy4duy:not(.unfolded){pointer-events:none}.content.svelte-1fy4duy:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1fy4duy{pointer-events:auto;cursor:pointer}')}function yV(n){let e,t;return{c(){e=ie("div"),P(e,"data-info","tag content is keep folded"),P(e,"data-id",t=n[0].id)},m(r,i){ae(r,e,i)},p(r,i){i&1&&t!==(t=r[0].id)&&P(e,"data-id",t)},i:Ee,o:Ee,d(r){r&&oe(e)}}}function AV(n){let e,t,r,i,o,s,a,l,u,c,d,h,f,p,v,b,g;const y=[OV,SV,CV,EV,PV,xV,wV],E=[];function C(V,M){return M&9&&(i=null),M&9&&(o=null),M&9&&(s=null),M&9&&(a=null),M&9&&(l=null),M&9&&(u=null),M&9&&(c=null),i==null&&(i=!!(["Text"].includes(V[0].contentType)||["Text"].includes(V[3].get(V[0].contentType)))),i?0:(o==null&&(o=!!(["ImageText","Image","Video"].includes(V[0].contentType)||["ImageText","Image","Video"].includes(V[3].get(V[0].contentType)))),o?1:(s==null&&(s=!!(["Audio"].includes(V[0].contentType)||["Audio"].includes(V[3].get(V[0].contentType)))),s?2:(a==null&&(a=!!(["Marketing"].includes(V[0].contentType)||["Marketing"].includes(V[3].get(V[0].contentType)))),a?3:(l==null&&(l=!!(["Link","VRLink","PanoLink","Sticker"].includes(V[0].contentType)||["Link","VRLink","PanoLink","Sticker"].includes(V[3].get(V[0].contentType)))),l?4:(u==null&&(u=!!(["MediaPlane","MediaModel"].includes(V[0].contentType)||["MediaPlane","MediaModel"].includes(V[3].get(V[0].contentType)))),u?5:(c==null&&(c=!!(["Panorama"].includes(V[0].contentType)||["Panorama"].includes(V[3].get(V[0].contentType)))),c?6:-1))))))}return~(d=C(n,-1))&&(h=E[d]=y[d](n)),{c(){var V;e=ie("div"),t=ie("div"),r=ie("div"),h&&h.c(),P(r,"class","content svelte-1fy4duy"),Se(r,"unfolded",(V=n[0].state)==null?void 0:V.unfolded),P(t,"class","content__wrapper svelte-1fy4duy"),P(e,"class",f=Xs(wc("content__container",n[0].className))+" svelte-1fy4duy"),P(e,"data-id",p=n[0].id),Se(e,"disable",n[0].enabled===!1),Se(e,"hide",n[5]),Se(e,"unClickable",n[0].config.clickable===!1),fe(e,"width",n[0].stickType==="Plane"||n[0].contentType==="MediaModel"?"100%":0),fe(e,"height",n[0].stickType==="Plane"||n[0].contentType==="MediaModel"?"100%":0)},m(V,M){ae(V,e,M),Y(e,t),Y(t,r),~d&&E[d].m(r,null),n[16](e),v=!0,b||(g=Ye(e,"click",n[17],!0),b=!0)},p(V,M){var z;let U=d;d=C(V,M),d===U?~d&&E[d].p(V,M):(h&&(Ie(),ee(E[U],1,1,()=>{E[U]=null}),je()),~d?(h=E[d],h?h.p(V,M):(h=E[d]=y[d](V),h.c()),q(h,1),h.m(r,null)):h=null),(!v||M&1)&&Se(r,"unfolded",(z=V[0].state)==null?void 0:z.unfolded),(!v||M&1&&f!==(f=Xs(wc("content__container",V[0].className))+" svelte-1fy4duy"))&&P(e,"class",f),(!v||M&1&&p!==(p=V[0].id))&&P(e,"data-id",p),(!v||M&1)&&Se(e,"disable",V[0].enabled===!1),(!v||M&33)&&Se(e,"hide",V[5]),(!v||M&1)&&Se(e,"unClickable",V[0].config.clickable===!1),M&1&&fe(e,"width",V[0].stickType==="Plane"||V[0].contentType==="MediaModel"?"100%":0),M&1&&fe(e,"height",V[0].stickType==="Plane"||V[0].contentType==="MediaModel"?"100%":0)},i(V){v||(q(h),v=!0)},o(V){ee(h),v=!1},d(V){V&&oe(e),~d&&E[d].d(),n[16](null),b=!1,g()}}}function bV(n){let e,t,r,i,o,s,a;return t=new mV({props:{tag:At(n[0]),rendererMap:n[2]}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class",r=Xs(wc("content__container",n[0].className))+" svelte-1fy4duy"),P(e,"data-id",i=n[0].id),Se(e,"custom-tag-disable",n[0].enabled===!1),Se(e,"custom-tag-hide",n[5])},m(l,u){ae(l,e,u),be(t,e,null),n[14](e),o=!0,s||(a=Ye(e,"click",n[15]),s=!0)},p(l,u){const c={};u&1&&(c.tag=At(l[0])),u&4&&(c.rendererMap=l[2]),t.$set(c),(!o||u&1&&r!==(r=Xs(wc("content__container",l[0].className))+" svelte-1fy4duy"))&&P(e,"class",r),(!o||u&1&&i!==(i=l[0].id))&&P(e,"data-id",i),(!o||u&1)&&Se(e,"custom-tag-disable",l[0].enabled===!1),(!o||u&33)&&Se(e,"custom-tag-hide",l[5])},i(l){o||(q(t.$$.fragment,l),o=!0)},o(l){ee(t.$$.fragment,l),o=!1},d(l){l&&oe(e),we(t),n[14](null),s=!1,a()}}}function wV(n){let e,t;return e=new dV({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function xV(n){let e,t;return e=new wM({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function PV(n){let e,t;return e=new qM({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function EV(n){let e,t;return e=new F$({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function CV(n){let e,t;return e=new gM({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function SV(n){let e,t;return e=new L$({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function OV(n){let e,t;return e=new XS({props:{tag:At(n[0])}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.tag=At(r[0])),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function $V(n){let e,t,r,i,o;const s=[bV,AV,yV],a=[];function l(u,c){return c&5&&(e=null),e==null&&(e=!!(u[0].element||u[2].has(u[0].contentType))),e?0:u[4]?1:2}return t=l(n,-1),r=a[t]=s[t](n),{c(){r.c(),i=at()},m(u,c){a[t].m(u,c),ae(u,i,c),o=!0},p(u,[c]){let d=t;t=l(u,c),t===d?a[t].p(u,c):(Ie(),ee(a[d],1,1,()=>{a[d]=null}),je(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),q(r,1),r.m(i.parentNode,i))},i(u){o||(q(r),o=!0)},o(u){ee(r),o=!1},d(u){a[t].d(u),u&&oe(i)}}}function MV(n,e,t){let r,i,o,s,a,l,{tag:u}=e,{hooks:c}=e,{rendererMap:d=new Map}=e,{contentTypeMap:h=new Map}=e,{state:f}=e,{mediaStore:p}=e,{temporaryState:v}=e;uc("hooks",c),uc("mediaStore",p);let b,g;function y(U){U?c.emit("exposure",{id:s,type:"start"}):c.emit("exposure",{id:s,type:"end"})}function E(U,D,m){var A,x;return!(!U.enabled||!D.visible||!D.enabled||!m.visible||!((A=U.state)!=null&&A.visible)||((x=U.temporaryState)==null?void 0:x.visible)===!1||U instanceof l2&&U.loading)}function C(U){$t[U?"unshift":"push"](()=>{u.contentDom=U,t(0,u)})}const V=U=>c.emit("click",{event:U,target:"TagContent",tag:u});function M(U){$t[U?"unshift":"push"](()=>{u.contentDom=U,t(0,u)})}const z=U=>{u.entryFromModel&&Ar(u.five.state.mode)?(U.stopPropagation(),u.find({targetMode:"Panorama"})):c.emit("click",{event:U,target:"TagContent",tag:u})};return n.$$set=U=>{"tag"in U&&t(0,u=U.tag),"hooks"in U&&t(1,c=U.hooks),"rendererMap"in U&&t(2,d=U.rendererMap),"contentTypeMap"in U&&t(3,h=U.contentTypeMap),"state"in U&&t(6,f=U.state),"mediaStore"in U&&t(7,p=U.mediaStore),"temporaryState"in U&&t(8,v=U.temporaryState)},n.$$.update=()=>{var U,D,m,A,x,S,$,T,F,R,ne;n.$$.dirty&1&&t(12,r=(U=u.state)==null?void 0:U.unfolded),n.$$.dirty&1&&t(11,i=(D=u.state)==null?void 0:D.visible),n.$$.dirty&321&&t(13,o=f.visible&&v.visible&&((m=u.state)==null?void 0:m.visible)),n.$$.dirty&1&&(s=u.id),n.$$.dirty&321&&t(5,a=!E(u,f,v)),n.$$.dirty&8192&&y(o),n.$$.dirty&7681&&u.hooks&&(r!==void 0&&r!==g&&(t(10,g=r),r?(x=(A=u.hooks).emit)==null||x.call(A,"unfolded"):($=u==null?void 0:(S=u.hooks).emit)==null||$.call(S,"folded")),i!==void 0&&i!==b&&(t(9,b=i),i?(F=(T=u.hooks).emit)==null||F.call(T,"show"):(ne=(R=u.hooks).emit)==null||ne.call(R,"hide"))),n.$$.dirty&1&&t(4,l=!(typeof u.config.unfoldedConfig=="object"&&u.config.unfoldedConfig.keep==="folded"))},[u,c,d,h,l,a,f,p,v,b,g,i,r,o,C,V,M,z]}class fv extends Re{constructor(e){super(),Le(this,e,MV,$V,De,{tag:0,hooks:1,rendererMap:2,contentTypeMap:3,state:6,mediaStore:7,temporaryState:8},gV)}}var VV=Object.defineProperty,TV=Object.defineProperties,_V=Object.getOwnPropertyDescriptors,n1=Object.getOwnPropertySymbols,kV=Object.prototype.hasOwnProperty,IV=Object.prototype.propertyIsEnumerable,Af=(n,e,t)=>e in n?VV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,r1=(n,e)=>{for(var t in e||(e={}))kV.call(e,t)&&Af(n,t,e[t]);if(n1)for(var t of n1(e))IV.call(e,t)&&Af(n,t,e[t]);return n},jV=(n,e)=>TV(n,_V(e)),i1=(n,e,t)=>(Af(n,typeof e!="symbol"?e+"":e,t),t),o1=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class l2 extends nv{constructor(e,t){super(e,t),i1(this,"loading",!1),i1(this,"loadModel",()=>o1(this,null,function*(){var r,i;const o=this.data.modelUrl;if(!o||(this.loading=!0,yield Do(this.five),!this.plugin.tags.includes(this)))return;const s=aS(o).then(u=>o1(this,null,function*(){var c;const d=Object.assign(u.scene,{customID:this.id,isTagModel:!0,removeEventListener:this.getConfig().clickable===!1?()=>{}:this.addObjectClickHandler(this,u.scene,h=>{this.plugin.hooks.emit("click",{target:"TagModel",tag:this,event:h})})});return new Ue().fromArray(this.matrix).decompose(d.position,d.quaternion,d.scale),d.updateWorldMatrix(!0,!0),d.visible=this.visible,(c=this.getConfig().modelConfig)!=null&&c.autoLookAtEnabled&&d.lookAt(this.five.camera.position.clone().setY(d.position.y)),d}));this.model={promise:s};const a=yield s;if(this.loading=!1,((r=this.model)==null?void 0:r.promise)!==s||!this.plugin.tags.includes(this))return;this.model.object=a;const l=this.plugin.gltfObjectGroup.children.find(u=>u.customID===this.id);if(l&&(this.plugin.gltfObjectGroup.remove(l),l.removeEventListener()),To(this)){const u=this.data.mediaPosition.map(qi);if(this.computeRenderType()==="Mesh"&&!this.mediaPlane){this.mediaPlane=new uf(this.data.mediaData[0].url,u,{objectFit:this.data.objectFit});const c=new H().addVectors(u[0],u[2]).divideScalar(2);this.mediaPlane.position.copy(c),a.add(this.mediaPlane)}if(this.computeRenderType()!=="Mesh"){(i=this.tag3DContentSvelte)==null||i.dispose();const c=document.createElement("div");c.classList.add("tag-media-container");const d="black";c.style.backgroundColor=d,c.style.border=`3px solid ${d}`;const h=r1({mode:"behind",cornerPoints:u,container:c},this.config.tag3DConfig),f=this.computeRenderType()==="BehindDom"||h.mode==="behind"?"behind":"front",p=new zw(jV(r1({},h),{mode:f})),v=this.computeNormal();p.position.add(v.clone().setLength(td.Z_FIGHTING_OFFSET)),a.add(p);let b;p.mode==="behind"&&this.config.clickable!==!1&&(b=this.addObjectClickHandler(this,p,y=>{this.plugin.hooks.emit("click",{event:y,target:"TagContent",tag:this})}));const g=new fv({target:c,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:g,domContainer:{css3DObject:p},css3DInstance:p,initialNormal:v,currentNormal:v,dispose:()=>{g.$destroy(),p.dispose(),b==null||b()}}}}return this.plugin.gltfObjectGroup.add(a),a})),this.state.unfolded=!0,qc(this.five),this.loadModel().then(()=>this.updateVisible())}applyVisible(){var e,t;(e=this.tag3DContentSvelte)==null||e.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(t=this.model)!=null&&t.object&&(this.model.object.visible=this.visible)}set(...e){super.set(...e),this.loadModel()}setData(...e){var t;super.setData(...e);const r=this.data.mediaPosition.map(qi);this.computeRenderType()==="Mesh"?this.mediaPlane&&this.mediaPlane.src!==this.data.mediaData[0].url&&(this.mediaPlane.removeFromParent(),this.mediaPlane=new uf(this.data.mediaData[0].url,r,{objectFit:this.data.objectFit})):(t=this.tag3DContentSvelte)==null||t.svelteApp.$set({tag:this})}computeNormal(){return Fw(this.data.mediaPosition)}}var DV=Object.defineProperty,LV=Object.defineProperties,RV=Object.getOwnPropertyDescriptors,s1=Object.getOwnPropertySymbols,zV=Object.prototype.hasOwnProperty,BV=Object.prototype.propertyIsEnumerable,a1=(n,e,t)=>e in n?DV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,l1=(n,e)=>{for(var t in e||(e={}))zV.call(e,t)&&a1(n,t,e[t]);if(s1)for(var t of s1(e))BV.call(e,t)&&a1(n,t,e[t]);return n},FV=(n,e)=>LV(n,RV(e)),HV=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const UV=new Map,NV=new Map;class WV extends nv{constructor(e,t){super(e,t),this.state.unfolded=!0,this.loadModel()}applyVisible(){var e,t,r,i,o,s;this.computeRenderType()==="Mesh"?((t=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:t.type)==="Video"?this.renderVideoPlane():((i=(r=this.data.mediaData)==null?void 0:r[0])==null?void 0:i.type)==="Image"&&this.renderImagePlane():((o=this.tag3DContentSvelte)==null||o.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(s=this.tag3DContentSvelte)!=null&&s.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible,this.five.needsRender=!0))}set(e,t=!0){super.set(e,t),Do(this.five).then(()=>{this.tag3DContentSvelte&&(e.data?this.tag3DContentSvelte.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}):e.position&&this.loadModel())})}setData(...e){var t,r,i,o,s;super.setData(...e),this.computeRenderType()==="Mesh"?((r=(t=this.data.mediaData)==null?void 0:t[0])==null?void 0:r.type)==="Video"?this.renderVideoPlane():((o=(i=this.data.mediaData)==null?void 0:i[0])==null?void 0:o.type)==="Image"&&this.renderImagePlane():(s=this.tag3DContentSvelte)==null||s.svelteApp.$set({tag:this})}loadModel(){return HV(this,null,function*(){var e,t,r,i,o,s;if(yield Do(this.five),this.computeRenderType()==="Mesh")((t=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:t.type)==="Video"?this.renderVideoPlane():((i=(r=this.data.mediaData)==null?void 0:r[0])==null?void 0:i.type)==="Image"&&this.renderImagePlane();else{qc(this.five);const a=this.position.map(Xe);(s=(o=this.tag3DContentSvelte)==null?void 0:o.dispose)==null||s.call(o);const l=document.createElement("div");l.classList.add("tag-media-container");const u=l1({mode:"front",cornerPoints:a,container:l},this.config.tag3DConfig),c=this.computeRenderType()==="BehindDom"||u.mode==="behind"?"behind":"front",d=new zw(FV(l1({},u),{mode:c})),h=this.computeNormal();d.position.add(h.clone().setLength(td.Z_FIGHTING_OFFSET)),this.plugin.group.add(d);let f;d.mode==="behind"&&this.config.clickable!==!1&&(f=this.addObjectClickHandler(this,d,v=>{this.plugin.hooks.emit("click",{event:v,target:"TagContent",tag:this})}));const p=new fv({target:l,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:p,domContainer:{css3DObject:d},css3DInstance:d,initialNormal:h,currentNormal:h,dispose:()=>{p.$destroy(),d.dispose(),f==null||f()}},this.five.needsRender=!0}})}renderVideoPlane(){var e;const t=this.data.mediaData[0];if(!t)return;const{url:r}=t;if(!r)return;const i=this.currentVisible,o=!!(this.mediaPlane&&!i),s=!!(!this.mediaPlane&&i),a=!!(this.mediaPlane&&this.mediaPlane.src!==r);if((o||a)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),s||a){const l=this.position.map(qi),u=new kw(r,l,{videoCoverSrc:t.videoCoverUrl,playButton:this.data.playIcon,paused:!((e=this.data.autoplayConfig)!=null&&e.autoplayVideo),objectFit:this.data.objectFit,videoTextureMap:UV,ImageTextureMap:NV,domEvents:this.plugin.domEvents});this.plugin.domEvents.addAutoBindEventListener(u,"click",d=>{var h;!((h=u.videoInstance)!=null&&h.paused)&&u.videoInstance.muted===!1&&this.plugin.hooks.emit("playStateChange",{event:d,state:"playing",tag:this,mediaInstance:u.videoInstance})}),u.onVideoReady=d=>{d.addEventListener("play",h=>{this.plugin.mediaStore.set({currentMediaElement:u.videoInstance}),this.plugin.hooks.emit("playStateChange",{event:h,state:"playing",tag:this,mediaInstance:u.videoInstance})}),d.addEventListener("pause",h=>{this.plugin.hooks.emit("playStateChange",{event:h,state:"paused",tag:this,mediaInstance:u.videoInstance})}),d.addEventListener("ended",h=>{this.plugin.hooks.emit("playStateChange",{event:h,state:"paused",tag:this,mediaInstance:u.videoInstance})})};const c=d=>(this.five.on("renderFrame",d),()=>this.five.off("renderFrame",d));u.initialRenderHooks(c),this.mediaPlane=u,this.play=()=>u.play(),this.pause=()=>u.pause(),this.plugin.imagePlaneGroup.add(this.mediaPlane)}this.five.needsRender=!0}renderImagePlane(){const e=this.data.mediaData[0];if(!e)return;const{url:t}=e;if(!t)return;const r=this.position.map(qi),i=this.currentVisible,o=!!(this.mediaPlane&&!i),s=!!(!this.mediaPlane&&i),a=!!(this.mediaPlane&&this.mediaPlane.src!==t);(o||a)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),(s||a)&&(this.mediaPlane=new uf(t,r,{objectFit:this.data.objectFit}),this.getConfig().clickable!==!1&&this.plugin.domEvents.addAutoBindEventListener(this.mediaPlane,"click",l=>{this.plugin.hooks.emit("click",{tag:this,target:"TagContent",event:l.origDomEvent})},{noEmitWhenHide:!0}),this.plugin.imagePlaneGroup.add(this.mediaPlane)),this.five.needsRender=!0}computeNormal(){return Fw(this.position)}}function GV(n){Qe(n,"svelte-cksy1a",".audio-tag-point.svelte-cksy1a{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;border-radius:100%;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3);display:flex;align-items:center;justify-content:center}")}function QV(n){let e,t,r,i,o;return t=new id({props:{playing:n[0],width:24}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","audio-tag-point svelte-cksy1a")},m(s,a){ae(s,e,a),be(t,e,null),r=!0,i||(o=[Ye(e,"click",function(){lr(n[2])&&n[2].apply(this,arguments)}),Ye(e,"mouseenter",function(){lr(n[3])&&n[3].apply(this,arguments)}),Ye(e,"mouseleave",function(){lr(n[4])&&n[4].apply(this,arguments)})],i=!0)},p(s,a){n=s;const l={};a&1&&(l.playing=n[0]),t.$set(l)},i(s){r||(q(t.$$.fragment,s),r=!0)},o(s){ee(t.$$.fragment,s),r=!1},d(s){s&&oe(e),we(t),i=!1,vn(o)}}}function XV(n){let e,t;return e=new dv({props:{url:n[1].data.audioUrl,enable:n[1].state.visible,style:"width: max-content; height: max-content;",hooksInfo:{tag:n[1]},$$slots:{default:[QV]},$$scope:{ctx:n}}}),e.$on("play",n[5].play),e.$on("pause",n[5].pause),e.$on("error",n[5].error),e.$on("timeupdate",n[5].timeupdate),e.$on("duration",n[5].duration),e.$on("audioRef",n[5].audioRef),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,[i]){const o={};i&2&&(o.url=r[1].data.audioUrl),i&2&&(o.enable=r[1].state.visible),i&2&&(o.hooksInfo={tag:r[1]}),i&157&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function qV(n,e,t){let{playing:r=!1}=e,{tag:i}=e,{handlePointClick:o=()=>{}}=e,{handleMouseEnter:s=()=>{}}=e,{handleMouseLeave:a=()=>{}}=e;const l=uo(),u={audioRef:c=>l("audioRef",c.detail),play:()=>{t(0,r=!0),l("play")},pause:()=>{t(0,r=!1),l("pause")},error:()=>{t(0,r=!1),l("pause")},timeupdate:c=>l("timeupdate",c.detail),duration:c=>l("duration",c.detail)};return n.$$set=c=>{"playing"in c&&t(0,r=c.playing),"tag"in c&&t(1,i=c.tag),"handlePointClick"in c&&t(2,o=c.handlePointClick),"handleMouseEnter"in c&&t(3,s=c.handleMouseEnter),"handleMouseLeave"in c&&t(4,a=c.handleMouseLeave)},[r,i,o,s,a,u]}let YV=class extends Re{constructor(e){super(),Le(this,e,qV,XV,De,{playing:0,tag:1,handlePointClick:2,handleMouseEnter:3,handleMouseLeave:4},GV)}};function KV(n){Qe(n,"svelte-dorxu0",'@charset "UTF-8";.tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;pointer-events:auto;cursor:pointer;width:141%;height:141%;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1000000}.audio-tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1}.tag-point-wrapper.svelte-dorxu0.svelte-dorxu0{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);cursor:pointer;z-index:1040}.tag-folded-point.svelte-dorxu0.svelte-dorxu0,.tag-unfolded-point.svelte-dorxu0.svelte-dorxu0{transition:all 0.5s}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1 !important;scale:1 !important}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0 !important;scale:1 !important}')}function JV(n){let e;return{c(){e=ie("div"),P(e,"class","audio-tag-point-click-helper svelte-dorxu0")},m(t,r){ae(t,e,r),n[18](e)},p:Ee,d(t){t&&oe(e),n[18](null)}}}function ZV(n){let e,t,r;return{c(){e=ie("div"),P(e,"class","tag-point-click-helper svelte-dorxu0")},m(i,o){ae(i,e,o),n[17](e),t||(r=[Ye(e,"click",n[15]),Ye(e,"mouseenter",n[16]),Ye(e,"mouseleave",function(){lr(n[3])&&n[3].apply(this,arguments)})],t=!0)},p(i,o){n=i},d(i){i&&oe(e),n[17](null),t=!1,vn(r)}}}function eT(n){let e,t;return e=new a2({props:{icon:n[8],width:n[7]}}),e.$on("iconLoaded",n[21]),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&256&&(o.icon=r[8]),i&128&&(o.width=r[7]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function tT(n){let e,t;return e=new YV({props:{tag:At(n[1]),handlePointClick:n[19],handleMouseEnter:n[20],handleMouseLeave:n[3]}}),e.$on("audioRef",n[13].audioRef),e.$on("play",n[13].play),e.$on("pause",n[13].pause),e.$on("timeupdate",n[13].timeupdate),e.$on("duration",n[13].duration),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.tag=At(r[1])),i&16&&(o.handlePointClick=r[19]),i&6&&(o.handleMouseEnter=r[20]),i&8&&(o.handleMouseLeave=r[3]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function nT(n){let e,t,r,i,o,s,a,l,u,c;function d(g,y){return g[6]?JV:ZV}let h=d(n),f=h(n);r=new Cr({props:{center:!0,blurRadius:15,spreadRadius:5,opacity:.3}});const p=[tT,eT],v=[];function b(g,y){return g[6]?0:1}return l=b(n),u=v[l]=p[l](n),{c(){e=ie("div"),f.c(),t=$e(),xe(r.$$.fragment),i=$e(),o=ie("div"),s=$e(),a=ie("div"),u.c(),P(o,"class","tag-unfolded-point svelte-dorxu0"),fe(o,"transition-delay",(n[9]?n[11]:0)+"ms"),P(a,"class","tag-folded-point svelte-dorxu0"),fe(a,"transition-delay",(n[9]?n[11]:0)+"ms"),P(e,"class","tag-point-wrapper svelte-dorxu0"),Se(e,"unfolded",n[5]),Se(e,"folded",n[9]),Se(e,"disable-unfold",n[1].isPopoverConfigEnabled())},m(g,y){ae(g,e,y),f.m(e,null),Y(e,t),be(r,e,null),Y(e,i),Y(e,o),Y(e,s),Y(e,a),v[l].m(a,null),c=!0},p(g,[y]){h===(h=d(g))&&f?f.p(g,y):(f.d(1),f=h(g),f&&(f.c(),f.m(e,t))),y&512&&fe(o,"transition-delay",(g[9]?g[11]:0)+"ms");let E=l;l=b(g),l===E?v[l].p(g,y):(Ie(),ee(v[E],1,1,()=>{v[E]=null}),je(),u=v[l],u?u.p(g,y):(u=v[l]=p[l](g),u.c()),q(u,1),u.m(a,null)),y&512&&fe(a,"transition-delay",(g[9]?g[11]:0)+"ms"),(!c||y&32)&&Se(e,"unfolded",g[5]),(!c||y&512)&&Se(e,"folded",g[9]),(!c||y&2)&&Se(e,"disable-unfold",g[1].isPopoverConfigEnabled())},i(g){c||(q(r.$$.fragment,g),q(u),c=!0)},o(g){ee(r.$$.fragment,g),ee(u),c=!1},d(g){g&&oe(e),f.d(),we(r),v[l].d()}}}function rT(n,e,t){var r,i;let o,s,a,l,u;const c=Ur("hooks"),d=uo();let{tag:h}=e,f,p=!1;const v=()=>{f!==void 0&&clearTimeout(f),p=!0,f=setTimeout(()=>{p=!1},800)},b=R=>{p||(h.entryFromModel&&Ar(h.five.state.mode)?h.find({targetMode:"Panorama"}).then(()=>h.unfoldAndFoldOthers()):c.emit("click",{event:R,target:"TagPoint",tag:h}))},g=h.contentType==="Text"&&h.data.appearance==="plane"?500:800;let{tagPointClickHelper:y=null}=e,{handleMouseEnter:E=()=>{}}=e,{handleMouseLeave:C=()=>{}}=e,{handleTagPointClick:V=()=>{}}=e;const M=()=>!0,z=(i=(r=h.config.popoverConfig)==null?void 0:r.beforeOpen)!=null?i:M;let{audioInstance:U=null}=e;const D={audioRef:R=>{t(14,U=R.detail),d("audioInstanceReady",U)},play:()=>d("audioPlay"),pause:()=>d("audioPause"),timeupdate:R=>d("audioTimeUpdate",R.detail),duration:R=>d("audioDuration",R.detail)},m=R=>{V(R),b(R)},A=R=>{z(h)&&E(R)};function x(R){$t[R?"unshift":"push"](()=>{y=R,t(0,y)})}function S(R){$t[R?"unshift":"push"](()=>{y=R,t(0,y)})}const $=R=>{V(R),b(R)},T=R=>{z(h)&&E(R)};function F(R){bi.call(this,n,R)}return n.$$set=R=>{"tag"in R&&t(1,h=R.tag),"tagPointClickHelper"in R&&t(0,y=R.tagPointClickHelper),"handleMouseEnter"in R&&t(2,E=R.handleMouseEnter),"handleMouseLeave"in R&&t(3,C=R.handleMouseLeave),"handleTagPointClick"in R&&t(4,V=R.handleTagPointClick),"audioInstance"in R&&t(14,U=R.audioInstance)},n.$$.update=()=>{var R,ne,ce,Z;n.$$.dirty&2&&t(5,o=(R=h.state)==null?void 0:R.unfolded),n.$$.dirty&32&&t(9,s=!o),n.$$.dirty&2&&t(8,a=(ce=(ne=h.style)==null?void 0:ne.point)!=null&&ce.url?(Z=h.style)==null?void 0:Z.point:{url:R8}),n.$$.dirty&2&&t(7,l=(()=>{var he,pe,ge,Me;const _=(pe=(he=h.style)==null?void 0:he.point)==null?void 0:pe.width;if(typeof _=="number")return _;const j=(Me=(ge=h.style)==null?void 0:ge.point)==null?void 0:Me.size;if(typeof j=="number")return j;if(j==="S")return 18;if(j==="M")return 20;if(j==="L")return 24;if(j==="XL")return 28})()),n.$$.dirty&2&&t(6,u=h.contentType==="Audio"&&h.data.appearance==="plane")},v(),[y,h,E,C,V,o,u,l,a,s,b,g,z,D,U,m,A,x,S,$,T,F]}class iT extends Re{constructor(e){super(),Le(this,e,rT,nT,De,{tag:1,tagPointClickHelper:0,handleMouseEnter:2,handleMouseLeave:3,handleTagPointClick:4,audioInstance:14},KV)}get tag(){return this.$$.ctx[1]}set tag(e){this.$$set({tag:e}),ai()}get tagPointClickHelper(){return this.$$.ctx[0]}set tagPointClickHelper(e){this.$$set({tagPointClickHelper:e}),ai()}get handleMouseEnter(){return this.$$.ctx[2]}set handleMouseEnter(e){this.$$set({handleMouseEnter:e}),ai()}get handleMouseLeave(){return this.$$.ctx[3]}set handleMouseLeave(e){this.$$set({handleMouseLeave:e}),ai()}get handleTagPointClick(){return this.$$.ctx[4]}set handleTagPointClick(e){this.$$set({handleTagPointClick:e}),ai()}get audioInstance(){return this.$$.ctx[14]}set audioInstance(e){this.$$set({audioInstance:e}),ai()}}const oT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfklEQVRYCe2Yu2tVQRCHb1QQFQRBKzEkooJoISL+ATYW/kXBSrBKLxZaidaKhSCxs1Asg4qgRhHBB6IkKr4f3yd3vCfHezfnsTGnuD/4ZWf3zO7M7M4+biZ6vd5muBsehydg1/EdB6/3uTBR8vYg9dPQoLqILzg1A++Gc+tD6JevKR/AY/BXB3kSn+bhX5QD8MNLuAnugz87xMv4cg0uw7AAVDDKo3Ar7MJKPMWPWeiELsOoAFS8D00l98laBvEN+6fgO/gPRgWg4iL8Ct3Ya5lKl7B/Bw7FhqGtg8ariAZwYND0X6V7WNOHkVg38svgw1nED/2qyykDIRfLsmy93Falvza1nUQqhaLjZ4Q38HA0UOqQ+0LExoqy2PaDipNkGfp+r9L/PHqPVE6hSgD2fw63w51QR7wN3dw6EqVOhhylQSmL0K3S/zb6ydT5MyJ/qgagvhfcEbjRCogZjzLVFjqWRbnYJ+S3CGegAa+IOgE44DPo/RCOrEZp3r+ClVAnAAd0djy5puBqOD/HuLdgZdQNwIEfQ4/WLdB8zsUXjHUBRoohrowmAWhgAbofRI6VMD3PwSUHrIMmATi+Z7S39B6YYwV8pHlp1UbTADTkhp6GPvjarMIT+l+BjdAmAA1q/FDfsmOZCuVgUu3v0b8IvSwboW0AGvaVuDdh3YCGwXYvK1eyMdoGoGF/xW2D3tTl2U/V59G/CVvBMz0HbjDILujRWgUfUbJPa+RYAZ0w970998Mqp5I/D30gtkauAHTEH0BuyimYSp05vj+EWZAzAB1yP/jc2AFNz2Ign6ibNj4KsyGeutkGLAw0iewdIfx/jkeuz/AxxjMwnoGMM/AbzDbNM/bhiRQAAAAASUVORK5CYII=",sT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMApb6gupm3s7CprZWRfoeOg4qdenZzLG9ka04KJR4EET04MBlfDzTkzgAAAMpJREFUOMvd0dsSgiAQBuA1o7KMTJRUEE+9/zOGjhmjIHvdtyizM1zAv/C3lOS8BjxZlNpbAhJ/zTig1PkCdS1RZotSgF/FDBXiAXcT8z6jyZLp5PfPGthXJCsF7GrpRgs7BvrcoAM4qexhkSl3orGVM1t5c5COEVPiQIU9UZISvXRNi6S/3pptF87S8dNl9p1lxCQIw2CsadfMnmwHzoJdbJNo5LHKto6uHlENBhVfvGJlJnpGMLLtTyg9zPj5iHLhoAmeHw9YORcf/XMbuOSlzkgAAAAASUVORK5CYII=",aT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACtUlEQVRYCcWXzUtWQRSHb1ZWL1FYIH2AkSaEBbkMsTYFQVCbdkVQ7Vr3L/RXRQURIrVopxAuBEmIwCBqkfZBz2/0yLV35oz39X4c+HnHuXPOM2c+ztWi6MZ6Q91wi/GuwLe6SPgy0NdtZzwN9LmyPaAfLZg4j9A9tB+1Ah6D8wyNC2jWdMZ3AT1Ahwxoz6bAIwCeoisoyoh22qwGfF7F7zE66vnXCe4Buo9m0UEPqnd1gSeJ9QSNKij2C7nwvYLlfxupElWKVWkwwct2ml8eorOlzt9b7cOlvmhzUPA1oinT/6+J4oUCEaWVOquCdU1UfSZQDKCM1V/rHqu4qyAcQSmzRNyDJWcbmAqkfl2Tm0jg3PjaMladvYOOb0GzmTBOlh3nZaAMdU3Ke5nbO4uXG1ekvseTAG+gqmbXKeuXAs9kPeMDLOPsUsfA2le3wMeZodcy1lK7FgMfcz3yL//khxTJPU755pZQS10+jKk4UfB6cvRmRXJeh1cDZ7yMuwf3wFZAcisTzVjOb7zozjs71QMdLsVdQq8cwJ5feQfhC9FX0Xmk76vdAPmoHdNf+vch+1zGxoQ+D4x/8Q0tIN3rU8j2LhXQTrXFTY0bsgHETJr26yNaQ+eQskkFVMaC6+mtzK7AxAimpV9EZ9AJFIMLqv7cylQCE6/4iT6gDXQBGcgm0UjGcLZthZayn0AqsQamGSZTe8YKbPaDxjukrJW94LYCte4xcftMAB083fuLSAdPcFlth2szXPznV7rn0Uk0hhpdauLvMF07HbzP6BIaRrb3fc/d3GP8K9knRs8h3XkVnT6o+poAEzdcu7c8de3sz+IdE2gKLLhMB+89mkL6L2Qb3jQYVqj3L3nqPxBNIMDbAMMKtVsHTx+c60gHr3XTnr9oK+NydvrYjHYB1iS+l2fSZrv3D/+KTyvCdHWgAAAAAElFTkSuQmCC",lT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACpklEQVRYCcWYPYwOURSGP38Rv4lEsZoVkq0oNEQjEopNFCQSlUIkJCqFUiLR0ah1SIROgWQLQSNBKUIhGwUNUZD4K/w/b3wnmZ1v7tx3xsw4ybsz994z57nn3J9lR6PRaCUa3BZD3Dw4FaDAs/8DLOYdtHVouDJeis6hbUPClwA7gjSBPWgFeop+oV5NwKIdoHEBTRc7+3iPjJXhb6TnWqTsv6EXqBcrZxwQrfthdBqti84unylwMLbwch7tjI6unjmwOKvRCXQMdXbLOeDvAGXb0Rk0o8a/WtXm0iaLjabNJskWoeVoB9IeeIlijNdm5mS8bBzyRyH0Xt5PoQ2FvkavDjhKXQ48RcdJtKs84LQdcGSs8pZNS7UPaeM1OnYOODIulro8gY10HEf2LxsHXJdxcQJraBxE+1H22DlgBf+J6jKWT1RGWR9F0+pMmQNWQK1l1Rqn4q5i4BBKlt4Bp4I7/Tp2M1WODjjWOFfqqvjq240mquWAVWqt8cTH9Dmm225T2dEB6xutcc6iMlV+gi8wF9xkVy8ApBou2Mk4xVD/x/KgA44Stl3jz0BftwHHxdB2Vz8sQ9V2Mo7v2mR8j4/nI0Dx6QRTqZV1LuPwU/wv6DaaKLEGZQ44Sv33i/TPmNwzXO6ir2lXDxyZaJJ1WWvsFhI4a00yroO+gnQDfcgSxw4OuC5jXSxz6IELDD8HLN+qm+st/VfRGzk0NQesTRM3V5Rbx0SZRrsp19rVxaDvaVxC88XONu9OxrHGjwBcR7XHxJ2EA9Zdexk9doM6fjnwc4JcRPYxcaDySYG1aa4hXQi9WBVYl4H+HJG8Z7uYSRl8k6BXUOtj4k4qwNqpZ9ET98Mu/O4TJPkP7y4AVTF0I61HKvGgJvAn9G5Q6hiW/Z9dH5P6A8K2bfEUA9VoAAAAAElFTkSuQmCC",uT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfElEQVRYCe2XP2sVQRTFd0VsIgmpTAqx1EAStLAIpowgFmohFkEQ0+UbBEEJCpJvkE4REguVoBY2EaysLJSkSCzFQq1EMQg2z9+Jc2EyziSzb/eZJ7wLlzv37v1zzuy82aRstVr9RVGModfQGfR/kHuAfICulz5ayJzBf4oe9uNdtP4BlktlWb42TDsIKAiJs5gnltBl9jLgV31MfxHQQ0jcxsz6iV2wXgT8rRBHisAhEl+gI2HBPvkbzD0PgV/h/CgBJfEWjmOeoyKznyLQFwD/PgYiSUDJkLiOmYsV/sPYAuDvp+btSkBFkFDx6VSDDsffAF6bmJQcAkNUP0J1tbZcJ6uTr7VZPba1nxuLhblhT12ZVyDwWYkpsaLU8+04b0FX651dk5p/eBPwO67M2IiDsWAYUyNITBCfCp91yH+ZA16zs96AEiGgPzkW0SPyOyhf6D0Lge85M7IJqBkkxjELOY1r5MwBfi23PusIWTM1hsRj/IsWa9g+qwJesysRcGCXsaPoUec3ZT7SSL0rSaUjZJ15C8dYz6NNfaX1tZ1n9z9gK0lbBDQBErpapytNSyc/BPyeV2asvJ0jtN1HAyGho3QC9T9Util+TDVhXDHJZrvgVWxNta4sENDVegPtq1z8p2ALcxcCWVdmbEYtAmoIiVOYq7HmGbElwL/NyEumtH2ErKMAQEJ/ep+0WKZ9Vxe85tQm4MCuYIfRQefvZb6SoJracqB2Bxqwk7oGBUg2R1dcDen1pPZvwB/PURrHP+fHIuvVJo6O9W2UgJq638Mky34b4uxP7CvAR/81DHKz3cYJ2GSI6Gs94Pxv2E9NHRub0bO9HejtQFH8BvWooa9jGY/wAAAAAElFTkSuQmCC",cT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAK3RSTlMA/Pfx6+XZ39TIwry2sJ+qpY3Ok4jNgpl8dnEGmEUfDi5hOycxmn5YGGhjcHcwqwAAAMZJREFUOMvd0e0OgiAUgGEqs9IiLdNCRQS/6v4vMGrNofJxfvfIzuZ2fugL+ls5ZYwiOPEk0ktA95vHD4Pt0/uIgr6fpCOSI7c+UfSAH4gnGtd+lVwnkgrZkSzLCnmK75QPse+XeKG0FsXRAqaWovFZIza3rU9atWmfHQ2YoWgUGkT6tl1g1GmLHiw0bYfgcrvI8xlyyqG+BwOaw3srvCjqO8zaCn/n4IvJFYdbp1C98NQDSJWiG5CxLffWIB5HUsXbFVjLqzcmgh9KFWWqZgAAAABJRU5ErkJggg==",dT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACiElEQVRYCcWYsUscQRSH74LaBE60MU2wsBALBQsbTSuEFCkCKmghYmUjdmohiIUpU6WxSZEQQrqkjZA/IEXESksREbEQBRFEOL+nOzK3O7NvvNudG/g5s29m3je/mbnz2EqlDaVer9detIEryOF2geejG2abJ9BdVDDASXQeDQyoC22hS3SDyncMZBDtInH6BC71cgFa4Cx/o6H0mXakA0U8A3xFno9oHHW5chbuGOgkoJ9ozAU0scIcA6yRdAW9Q06XBip1IWCgI+RaRa8lKaX+WPn/tgQGKM7m0BRSXdrLaBoMtJ9Ey2jATpi0q45YQ6gpMFC5QLPoZUO2Zzw8CwxQLtAikjPN29rizhjoKLAZ1IO00vpWAxRnH5B8LqWtugkZk7vVQOUCCbQPmaK6YaA6xgsGKuf4HqXPMsSxWaS3dn5lAh1kxlvPLNUN89TFOcFMfOOBhobVxWXAybnKx8ZXVDdMVMdkwEzq9hGTuOpGmf/Q7QJr81Q3JFAX5wJfauSAfnVxLvApiW9ykqtumKuOyYCr1eotE//mgEO6mnJcAX5I9j8egprUM68hnHFseoH/p/0VXZhYUqvbyDh1jBcsEOBHVJ/RnjwXWXLBApIzRz9ofkPXEgso6nGoYANJtn6b5wMTy6lb2+p0YuBX6BPx70huv68U59gmAJcbv4mO7bjVLtaxldhcvHViv+x4aDv4jF0JcS4X7wt9a+jMGlPOVluAhybwfRpLaDfpU7daHZAkCq74fy6/uTdQL+pE8tMprc6WtpqEmZJcvGk6/mU6YwVwv4AO0QlqeCNQ+hoAOl9FlA4WAPD4L19sZywg7uumFDz+CzazAJzvmHbUGvBEVKCBAa7dA6h+CDnUpjBPAAAAAElFTkSuQmCC",hT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACXElEQVRYCcWYQSgFQRjHdyUlRU5ykCMOxMHJSXlnV4nk7OTISRw8N7koJSeKg+Ig5R3l4kBOHF8u5KD3IoVa/692XtPXzOz3Ztfu1jQz35v5ft//2++1uxNEUdQZFHC1gDlcADcg8EIR4ACp/kWbyB0eg9/Ql3KFx+Av9DW0dbS2XAJgYFJeQRv4bzgVF7+GYDgHfJH/kOU8JMVw+IP2bWg3sK2EYfiCPtPLpFgHjGNyguAyL7wkxXomLhDENtTX9ch8x0mKyW8UO59Cvwv1I/E8VScBhxqhB+MyFR5aqr+dBKxxG8NpjDYB729YmhxIwCrV3HUfDGuAexWeBKynmsMp3bOAL6M19XiVgG2K9SAGMVkFfEw3usYSsEux7rsDkznAZ9ASC08C1p1LxqNYtAS4s/AkYEmq+ZpuwOddqZeAJSptt6MEuPFJJwHbnEoCojWTpnsuAfM0moCuNe3Y0Ms3ScBpFROzywfsUqP8NR2cRLFy7uqTgqvxzRKwRI1rTR3P8KoPOEkN98nn19xA86wU24K7hNonE7jVZPSw8VS/w8epKcXKtwRsU6N8UK+vucecoPTWar0kYK7G5IzWfKIdA3hnWsBtErCuhu9X80cM9gEVv4FKwC7FlM4jAK9UBNJeArb5esYPO4BWbQtcdgnYlOozOD0E1FlAacH6/ldMtgB80I0+Y4lidY8rAGT2CSMBfwC44VNArkwkgW+x+V8+U21gKpoyVB64ok71G96H6NRHnYHkdhShjpsUOPfDl8KOmwo5YNtLVSS+m1FY+aulYAFu6rvWVyDf9wc6+wpavsNbLQAAAABJRU5ErkJggg==";function fT(n){Qe(n,"svelte-16evpcg",".tag-popover-arrow-wrapper.svelte-16evpcg{position:absolute;transform-origin:center;background-position:center;background-repeat:no-repeat;background-size:100% 100%}.tag-popover-arrow-top.svelte-16evpcg{width:1rem;height:0.625rem;top:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-bottom.svelte-16evpcg{width:1rem;height:0.625rem;bottom:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-left.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;left:0.5rem;transform:translateY(-50%)}.tag-popover-arrow-right.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;right:0.5rem;transform:translateY(-50%)}")}function u1(n){let e,t,r;return{c(){e=ie("div"),P(e,"class",t="tag-popover-arrow-wrapper tag-popover-arrow-"+n[0]+" theme-"+n[2]+" svelte-16evpcg"),P(e,"style",r=`background-image: url(${n[3]})`)},m(i,o){ae(i,e,o)},p(i,o){o&5&&t!==(t="tag-popover-arrow-wrapper tag-popover-arrow-"+i[0]+" theme-"+i[2]+" svelte-16evpcg")&&P(e,"class",t),o&8&&r!==(r=`background-image: url(${i[3]})`)&&P(e,"style",r)},d(i){i&&oe(e)}}}function pT(n){let e,t=n[1]&&u1(n);return{c(){t&&t.c(),e=at()},m(r,i){t&&t.m(r,i),ae(r,e,i)},p(r,[i]){r[1]?t?t.p(r,i):(t=u1(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(r){t&&t.d(r),r&&oe(e)}}}function vT(n,e,t){let r,{direction:i="bottom"}=e,{show:o=!0}=e,{theme:s="dark"}=e;return n.$$set=a=>{"direction"in a&&t(0,i=a.direction),"show"in a&&t(1,o=a.show),"theme"in a&&t(2,s=a.theme)},n.$$.update=()=>{n.$$.dirty&5&&t(3,r=(()=>{switch(s){case"dark":switch(i){case"top":return sT;case"bottom":return oT;case"left":return aT;case"right":return lT}case"light":switch(i){case"top":return cT;case"bottom":return uT;case"left":return dT;case"right":return hT}}})())},[i,o,s,r]}let mT=class extends Re{constructor(e){super(),Le(this,e,vT,pT,De,{direction:0,show:1,theme:2},fT)}};function gT(n){Qe(n,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function yT(n){let e,t,r,i,o,s,a,l,u,c;return{c(){e=ie("div"),t=Ae("svg"),r=Ae("defs"),i=Ae("linearGradient"),o=Ae("stop"),s=Ae("stop"),a=Ae("linearGradient"),l=Ae("stop"),u=Ae("stop"),c=Ae("path"),P(o,"stop-color",n[1]),P(o,"offset","0%"),P(s,"stop-color",n[1]),P(s,"stop-opacity",".5"),P(s,"offset","100%"),P(i,"x1","53.2804066%"),P(i,"y1","100%"),P(i,"x2","64.4764442%"),P(i,"y2","2.52981206%"),P(i,"id","video-icon-gradient-a"),P(l,"stop-color",n[1]),P(l,"offset","0%"),P(u,"stop-color",n[1]),P(u,"stop-opacity","0"),P(u,"offset","100%"),P(a,"x1","50%"),P(a,"y1","-5.89066117%"),P(a,"x2","60.3018289%"),P(a,"y2","32.0415872%"),P(a,"id","video-icon-gradient-b"),P(c,"d","M8.0883645,5.35 C8.27319183,5.35 8.45426937,5.40368245 8.61098984,5.50477659 L20.4341152,13.1314044 C20.6662958,13.2811749 20.8173539,13.5140616 20.8743923,13.7691613 C20.9300733,14.0181899 20.8962437,14.2885953 20.7601668,14.5243865 L8.61098984,22.4950731 C8.38014238,22.6439836 8.11267156,22.6823641 7.86680489,22.6238045 C7.62023287,22.5650769 7.39563144,22.408984 7.25097187,22.1700998 C7.15226844,22.0071054 7.1,21.8187509 7.1,21.6265526 L7.1,6.37329702 C7.1,6.09035119 7.2108925,5.83405961 7.39059316,5.64859123 C7.56916841,5.46428435 7.81578724,5.35 8.0883645,5.35 Z"),P(c,"fill","url(#video-icon-gradient-a)"),P(c,"fill-rule","nonzero"),P(c,"stroke","url(#video-icon-gradient-b)"),P(c,"stroke-width",".2"),P(t,"xmlns","http://www.w3.org/2000/svg"),P(t,"viewBox","0 0 28 28"),P(t,"width",n[0]),P(t,"height",n[0]),P(e,"class","icon-container svelte-1d6rvbz"),fe(e,"--bg-color",n[2])},m(d,h){ae(d,e,h),Y(e,t),Y(t,r),Y(r,i),Y(i,o),Y(i,s),Y(r,a),Y(a,l),Y(a,u),Y(t,c)},p(d,[h]){h&2&&P(o,"stop-color",d[1]),h&2&&P(s,"stop-color",d[1]),h&2&&P(l,"stop-color",d[1]),h&2&&P(u,"stop-color",d[1]),h&1&&P(t,"width",d[0]),h&1&&P(t,"height",d[0]),h&4&&fe(e,"--bg-color",d[2])},i:Ee,o:Ee,d(d){d&&oe(e)}}}function AT(n,e,t){let{size:r="28"}=e,{color:i="#ffffff"}=e,{bgColor:o="#0000004d"}=e;return n.$$set=s=>{"size"in s&&t(0,r=s.size),"color"in s&&t(1,i=s.color),"bgColor"in s&&t(2,o=s.bgColor)},[r,i,o]}let u2=class extends Re{constructor(e){super(),Le(this,e,AT,yT,De,{size:0,color:1,bgColor:2},gT)}};function bT(n){Qe(n,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function wT(n){let e,t,r,i,o,s,a,l,u,c,d,h,f,p,v,b;return{c(){e=ie("div"),t=Ae("svg"),r=Ae("defs"),i=Ae("linearGradient"),o=Ae("stop"),s=Ae("stop"),a=Ae("linearGradient"),l=Ae("stop"),u=Ae("stop"),c=Ae("linearGradient"),d=Ae("stop"),h=Ae("stop"),f=Ae("g"),p=Ae("path"),v=Ae("path"),b=Ae("path"),P(o,"stop-color","#FFF"),P(o,"offset","0%"),P(s,"stop-color","#FFF"),P(s,"stop-opacity",".5"),P(s,"offset","100%"),P(i,"x1","54.417371%"),P(i,"y1","106.742364%"),P(i,"x2","72.619444%"),P(i,"y2","8.15444328%"),P(i,"id","xmfpi7cnc__sgsykm5x9a"),P(l,"stop-color","#FFF"),P(l,"offset","0%"),P(u,"stop-color","#FFF"),P(u,"stop-opacity","0"),P(u,"offset","100%"),P(a,"x1","50%"),P(a,"y1",".73169217%"),P(a,"x2","66.0966077%"),P(a,"y2","34.1694374%"),P(a,"id","xmfpi7cnc__tjqs3iy6kb"),P(d,"stop-color","#FFF"),P(d,"offset","0%"),P(h,"stop-color","#FFF"),P(h,"stop-opacity",".5"),P(h,"offset","100%"),P(c,"x1","55.1256353%"),P(c,"y1","273.650936%"),P(c,"x2","55.1256353%"),P(c,"y2","81.7206937%"),P(c,"id","xmfpi7cnc__rs5hxavsyc"),P(p,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M4.9603418,4.9 C5.2193418,4.9 5.4643418,4.837 5.6883418,4.704 C6.1293418,4.445 6.4093418,3.976 6.4093418,3.444 C6.4093418,3.003 6.2203418,2.611 5.9053418,2.359 C6.1643418,2.1 6.3393418,1.729 6.3393418,1.337 C6.3393418,1.092 6.2763418,0.861 6.1573418,0.658 C5.9053418,0.245 5.4643418,0 4.9603418,0 C4.7223418,0 4.4983418,0.056 4.2953418,0.175 C3.8753418,0.413 3.6163418,0.84 3.6163418,1.337 L3.6163418,1.372 L4.3373418,1.372 L4.3373418,1.337 C4.3373418,1.022 4.6313418,0.721 4.9603418,0.721 C5.3173418,0.721 5.6113418,1.008 5.6113418,1.337 C5.6113418,1.708 5.3243418,1.995 4.9603418,1.995 L4.8203418,1.995 L4.8203418,2.723 L4.9603418,2.723 C5.3593418,2.723 5.6883418,3.045 5.6883418,3.444 C5.6883418,3.843 5.3593418,4.179 4.9603418,4.179 C4.5613418,4.179 4.2323418,3.843 4.2323418,3.444 L4.2323418,3.339 L3.5043418,3.339 L3.5043418,3.444 C3.5043418,3.71 3.5673418,3.955 3.7003418,4.172 C3.9593418,4.62 4.4283418,4.9 4.9603418,4.9 Z M8.6073418,4.9 C8.8803418,4.9 9.1253418,4.83 9.3563418,4.697 C9.8043418,4.424 10.0983418,3.934 10.0983418,3.395 C10.0983418,3.122 10.0283418,2.877 9.8953418,2.646 C9.6223418,2.198 9.1463418,1.904 8.6073418,1.904 C8.5303418,1.904 8.4743418,1.904 8.4393418,1.911 L9.3143418,0 L8.5093418,0 L7.2353418,2.793 C7.1443418,2.982 7.1023418,3.185 7.1023418,3.395 C7.1023418,3.668 7.1723418,3.92 7.3053418,4.151 C7.5783418,4.606 8.0543418,4.9 8.6073418,4.9 Z M8.6073418,4.158 C8.1803418,4.158 7.8443418,3.822 7.8443418,3.395 C7.8443418,2.975 8.1873418,2.625 8.6073418,2.625 C9.0273418,2.625 9.3773418,2.975 9.3773418,3.395 C9.3773418,3.815 9.0273418,4.158 8.6073418,4.158 Z M12.2613418,4.907 C12.7653418,4.907 13.2133418,4.634 13.4653418,4.207 C13.5913418,3.997 13.6543418,3.766 13.6543418,3.514 L13.6543418,3.514 L13.6543418,1.428 C13.6543418,0.917 13.3813418,0.448 12.9613418,0.189 C12.7443418,0.063 12.5133418,0 12.2613418,0 C11.7503418,0 11.2813418,0.273 11.0293418,0.714 C10.8963418,0.931 10.8333418,1.169 10.8333418,1.428 L10.8333418,1.428 L10.8333418,3.514 C10.8333418,4.018 11.1063418,4.466 11.5473418,4.718 C11.7643418,4.844 12.0023418,4.907 12.2613418,4.907 Z M12.2613418,4.186 C11.8903418,4.186 11.5683418,3.885 11.5683418,3.514 L11.5683418,3.514 L11.5683418,1.428 C11.5683418,1.029 11.8763418,0.735 12.2613418,0.735 C12.6323418,0.735 12.9123418,1.029 12.9123418,1.428 L12.9123418,1.428 L12.9123418,3.514 C12.9123418,3.899 12.6323418,4.186 12.2613418,4.186 Z M15.4753809,2.07333984 C15.7488184,2.07333984 15.9886458,1.97478841 16.1948633,1.77768555 C16.4010807,1.58058268 16.5041895,1.33391927 16.5041895,1.03769531 C16.5041895,0.750585938 16.4050684,0.507340495 16.2068262,0.307958984 C16.008584,0.108577474 15.7647689,0.00888671875 15.4753809,0.00888671875 C15.1928288,0.00888671875 14.9495833,0.109147135 14.7456445,0.309667969 C14.5417057,0.510188802 14.4397363,0.756282552 14.4397363,1.04794922 C14.4397363,1.32138672 14.5365788,1.56064453 14.7302637,1.76572266 C14.9239486,1.97080078 15.172321,2.07333984 15.4753809,2.07333984 Z M15.4753809,1.70078125 C15.2930892,1.70078125 15.137002,1.63583984 15.0071191,1.50595703 C14.8772363,1.37607422 14.8122949,1.22226563 14.8122949,1.04453125 C14.8122949,0.859960938 14.877806,0.703304036 15.0088281,0.574560547 C15.1398503,0.445817057 15.2953678,0.381445313 15.4753809,0.381445313 C15.6553939,0.381445313 15.8097721,0.446386719 15.9385156,0.576269531 C16.0672591,0.706152344 16.1316309,0.859960938 16.1316309,1.03769531 C16.1316309,1.22226563 16.0661198,1.37892253 15.9350977,1.50766602 C15.8040755,1.63640951 15.6508366,1.70078125 15.4753809,1.70078125 Z"),P(p,"fill","url(#xmfpi7cnc__sgsykm5x9a)"),P(p,"transform","translate(3 3.1)"),P(v,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M17.8,6.499 L17.7806846,6.52607583 C16.6077599,8.0452893 13.108676,9.1 9,9.1 C4.87821133,9.1 1.38089175,8.04047836 0.214303539,6.51942435 L0.2,6.5 L0.2,13.4 C0.2,15.1332693 3.96631253,16.6348245 8.69056715,16.6979358 L9,16.7 C13.8681548,16.7 17.8,15.1709491 17.8,13.4 L17.8,6.499 Z M12.2613418,0 C12.5133418,0 12.7443418,0.063 12.9613418,0.189 C13.3813418,0.448 13.6543418,0.917 13.6543418,1.428 L13.6543418,3.514 L13.6467818,3.66268 C13.6266218,3.85756 13.5661418,4.039 13.4653418,4.207 C13.2133418,4.634 12.7653418,4.907 12.2613418,4.907 C12.0023418,4.907 11.7643418,4.844 11.5473418,4.718 C11.1063418,4.466 10.8333418,4.018 10.8333418,3.514 L10.8333418,1.428 L10.8409578,1.27512 C10.8613418,1.07464 10.9229418,0.8876 11.0293418,0.714 C11.2813418,0.273 11.7503418,0 12.2613418,0 Z M9.3143418,0 L8.4393418,1.911 C8.4743418,1.904 8.5303418,1.904 8.6073418,1.904 C9.1463418,1.904 9.6223418,2.198 9.8953418,2.646 C10.0283418,2.877 10.0983418,3.122 10.0983418,3.395 C10.0983418,3.934 9.8043418,4.424 9.3563418,4.697 C9.1253418,4.83 8.8803418,4.9 8.6073418,4.9 C8.0543418,4.9 7.5783418,4.606 7.3053418,4.151 C7.1723418,3.92 7.1023418,3.668 7.1023418,3.395 C7.1023418,3.185 7.1443418,2.982 7.2353418,2.793 L8.5093418,0 L9.3143418,0 Z M4.9603418,0 C5.4643418,0 5.9053418,0.245 6.1573418,0.658 C6.2763418,0.861 6.3393418,1.092 6.3393418,1.337 C6.3393418,1.729 6.1643418,2.1 5.9053418,2.359 C6.2203418,2.611 6.4093418,3.003 6.4093418,3.444 C6.4093418,3.976 6.1293418,4.445 5.6883418,4.704 C5.4643418,4.837 5.2193418,4.9 4.9603418,4.9 C4.4283418,4.9 3.9593418,4.62 3.7003418,4.172 C3.5673418,3.955 3.5043418,3.71 3.5043418,3.444 L3.5043418,3.339 L4.2323418,3.339 L4.2323418,3.444 C4.2323418,3.843 4.5613418,4.179 4.9603418,4.179 C5.3593418,4.179 5.6883418,3.843 5.6883418,3.444 C5.6883418,3.045 5.3593418,2.723 4.9603418,2.723 L4.8203418,2.723 L4.8203418,1.995 L4.9603418,1.995 C5.3243418,1.995 5.6113418,1.708 5.6113418,1.337 C5.6113418,1.008 5.3173418,0.721 4.9603418,0.721 C4.6313418,0.721 4.3373418,1.022 4.3373418,1.337 L4.3373418,1.372 L3.6163418,1.372 L3.6163418,1.337 C3.6163418,0.84 3.8753418,0.413 4.2953418,0.175 C4.4983418,0.056 4.7223418,0 4.9603418,0 Z M12.2613418,0.2 C11.8228535,0.2 11.4197491,0.433900098 11.199862,0.818512412 C11.0880596,1.00092699 11.0333418,1.20205175 11.0333418,1.428 L11.0333418,3.514 C11.0333418,3.94076817 11.2630074,4.32517296 11.6477689,4.54504221 C11.8340054,4.65317955 12.0373271,4.707 12.2613418,4.707 C12.685768,4.707 13.0724302,4.4792625 13.2938432,4.10410085 C13.4010506,3.92542185 13.4543418,3.73002084 13.4543418,3.514 L13.4543418,1.428 C13.4543418,0.993663172 13.2236099,0.585702454 12.8609147,0.361957789 C12.673578,0.253181671 12.4771013,0.2 12.2613418,0.2 Z M4.9603418,0.2 C4.75293536,0.2 4.56476024,0.248895899 4.39394431,0.349004437 C4.11167513,0.508956972 3.91907748,0.764507622 3.84741774,1.06716925 L3.829,1.171 L4.157,1.171 L4.1635929,1.14325273 C4.24904453,0.829489942 4.53273472,0.571946496 4.86075855,0.527713496 L4.9603418,0.521 C5.42264158,0.521 5.8113418,0.89242465 5.8113418,1.337 C5.8113418,1.78012728 5.4916909,2.13625035 5.06824166,2.18841646 L5.02,2.191 L5.02,2.526 L5.06813812,2.52919506 C5.49271718,2.57829524 5.83232975,2.91371045 5.88206553,3.33657664 L5.8883418,3.444 C5.8883418,3.95419336 5.46908818,4.379 4.9603418,4.379 C4.48793444,4.379 4.09269177,4.01271264 4.03863877,3.55189651 L4.037,3.539 L3.709,3.539 L3.71100539,3.58140766 C3.72435814,3.71571552 3.75785509,3.84083114 3.8121867,3.95771875 L3.87348876,4.07189941 C4.09978468,4.46333019 4.50573915,4.7 4.9603418,4.7 C5.18808795,4.7 5.39698916,4.6443932 5.58705743,4.53154283 C5.97364119,4.30450157 6.2093418,3.89738234 6.2093418,3.444 C6.2093418,3.06849319 6.05147644,2.73203269 5.78040279,2.51517376 L5.60591531,2.37558378 L5.76392044,2.21757864 C5.99772857,1.98377051 6.1393418,1.65985061 6.1393418,1.337 C6.1393418,1.12891147 6.08649325,0.932616859 5.98661394,0.762172929 C5.77036899,0.407771483 5.39348118,0.2 4.9603418,0.2 Z M9.002,0.2 L8.638,0.2 L7.41554213,2.87976312 C7.3587619,2.9976913 7.32347683,3.1241874 7.30938306,3.25833536 L7.3023418,3.395 C7.3023418,3.62951354 7.36137928,3.8474981 7.47684038,4.04810085 C7.72111603,4.45522692 8.1383802,4.7 8.6073418,4.7 C8.83989632,4.7 9.05100342,4.64201988 9.25226776,4.52621184 C9.649754,4.28399367 9.8983418,3.85400396 9.8983418,3.395 C9.8983418,3.16244548 9.84036168,2.95133838 9.72455364,2.75007403 C9.48026964,2.34919774 9.06277079,2.104 8.6073418,2.104 L8.51445661,2.10475811 C8.49442789,2.10527049 8.48389809,2.10604952 8.47856502,2.10711614 L8.0943966,2.18394982 L8.25749731,1.82773787 L9.002,0.2 Z M12.2613418,0.535 C12.7468356,0.535 13.1123418,0.922491584 13.1123418,1.428 L13.1123418,3.514 C13.1123418,4.00744192 12.7448365,4.386 12.2613418,4.386 C11.7777279,4.386 11.3683418,3.99355405 11.3683418,3.514 L11.3683418,1.428 C11.3683418,0.922753743 11.7615956,0.535 12.2613418,0.535 Z M8.6073418,2.425 C9.13779875,2.425 9.5773418,2.86454305 9.5773418,3.395 C9.5773418,3.92471151 9.13856864,4.358 8.6073418,4.358 C8.06988485,4.358 7.6443418,3.93245695 7.6443418,3.395 C7.6443418,2.86377316 8.07763029,2.425 8.6073418,2.425 Z M12.2613418,0.735 C11.8763418,0.735 11.5683418,1.029 11.5683418,1.428 L11.5683418,3.514 L11.5761202,3.61327273 C11.6272922,3.93723967 11.9240691,4.186 12.2613418,4.186 C12.6323418,4.186 12.9123418,3.899 12.9123418,3.514 L12.9123418,1.428 L12.9055416,1.32192712 C12.8606806,0.977975207 12.5986145,0.735 12.2613418,0.735 Z M8.6073418,2.625 C8.1873418,2.625 7.8443418,2.975 7.8443418,3.395 C7.8443418,3.822 8.1803418,4.158 8.6073418,4.158 C9.0273418,4.158 9.3773418,3.815 9.3773418,3.395 C9.3773418,2.975 9.0273418,2.625 8.6073418,2.625 Z M15.4753809,0.00888671875 C15.7647689,0.00888671875 16.008584,0.108577474 16.2068262,0.307958984 C16.4050684,0.507340495 16.5041895,0.750585938 16.5041895,1.03769531 C16.5041895,1.33391927 16.4010807,1.58058268 16.1948633,1.77768555 C15.9886458,1.97478841 15.7488184,2.07333984 15.4753809,2.07333984 C15.172321,2.07333984 14.9239486,1.97080078 14.7302637,1.76572266 C14.5365788,1.56064453 14.4397363,1.32138672 14.4397363,1.04794922 C14.4397363,0.756282552 14.5417057,0.510188802 14.7456445,0.309667969 C14.9495833,0.109147135 15.1928288,0.00888671875 15.4753809,0.00888671875 Z M15.4753809,0.381445313 C15.2953678,0.381445313 15.1398503,0.445817057 15.0088281,0.574560547 C14.877806,0.703304036 14.8122949,0.859960938 14.8122949,1.04453125 C14.8122949,1.22226563 14.8772363,1.37607422 15.0071191,1.50595703 C15.137002,1.63583984 15.2930892,1.70078125 15.4753809,1.70078125 C15.6508366,1.70078125 15.8040755,1.63640951 15.9350977,1.50766602 C16.0661198,1.37892253 16.1316309,1.22226563 16.1316309,1.03769531 C16.1316309,0.859960938 16.0672591,0.706152344 15.9385156,0.576269531 C15.8097721,0.446386719 15.6553939,0.381445313 15.4753809,0.381445313 Z"),P(v,"fill","url(#xmfpi7cnc__tjqs3iy6kb)"),P(v,"transform","translate(3 3.1)"),P(b,"d","M3.00030998,2.79110119 L3.00030998,8.00889881 C1.15888197,7.36802147 0,6.43664128 0,5.4 C0,4.36335872 1.15888197,3.43197853 3.00030998,2.79110119 Z M15.0006975,2.79145187 C16.8415407,3.43231826 18,4.36354778 18,5.4 C18,6.43645222 16.8415407,7.36768174 15.0006975,8.00854813 Z"),P(b,"fill","url(#xmfpi7cnc__rs5hxavsyc)"),P(b,"transform","translate(3 3.1)"),P(f,"fill-rule","nonzero"),P(f,"fill","none"),P(t,"xmlns","http://www.w3.org/2000/svg"),P(t,"viewBox","0 0 24 24"),P(t,"width",n[0]),P(t,"height",n[0]),P(e,"class","icon-container svelte-1d6rvbz"),fe(e,"--bg-color",n[1])},m(g,y){ae(g,e,y),Y(e,t),Y(t,r),Y(r,i),Y(i,o),Y(i,s),Y(r,a),Y(a,l),Y(a,u),Y(r,c),Y(c,d),Y(c,h),Y(t,f),Y(f,p),Y(f,v),Y(f,b)},p(g,[y]){y&1&&P(t,"width",g[0]),y&1&&P(t,"height",g[0]),y&2&&fe(e,"--bg-color",g[1])},i:Ee,o:Ee,d(g){g&&oe(e)}}}function xT(n,e,t){let{size:r="28"}=e,{color:i="#ffffff"}=e,{bgColor:o="#0000004d"}=e;return n.$$set=s=>{"size"in s&&t(0,r=s.size),"color"in s&&t(2,i=s.color),"bgColor"in s&&t(1,o=s.bgColor)},[r,o,i]}let PT=class extends Re{constructor(e){super(),Le(this,e,xT,wT,De,{size:0,color:2,bgColor:1},bT)}};function c2(n){if(!n)return null;try{if(n.includes("youtu.be"))return new URL(n).pathname.substring(1);if(n.includes("youtube.com")){const r=new URL(n),i=new URLSearchParams(r.search).get("v");if(i)return i;if(r.pathname.includes("/embed/"))return r.pathname.split("/embed/")[1];if(r.pathname.includes("/shorts/"))return r.pathname.split("/shorts/")[1];if(r.pathname.includes("/live/"))return r.pathname.split("/live/")[1]}}catch{}const e=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/|live\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,t=n.match(e);return t&&t[1]?t[1]:null}function d2(n){if(!n)return null;try{if(n.includes("vimeo.com")){const r=new URL(n).pathname.split("/").filter(Boolean);if(r.length>0){const i=r[0];if(/^\d+$/.test(i)&&i.length>=5)return i}}}catch{}const e=/^.*vimeo\.com\/[A-Za-z\/]*(\d+)/,t=n.match(e);return t&&t[1]&&t[1].length>=5?t[1]:null}function bf(n){return n?/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(n):!1}function wf(n){return n?/^(http(s)?:\/\/)?((w){3}.)?vimeo\.com\/(.+)/.test(n):!1}function ET(n,e){if(bf(n)){const t=c2(n);if(!t)return"";const r=new URL(`https://www.youtube.com/embed/${t}`);return(e==null?void 0:e.start)!==void 0&&r.searchParams.set("start",e.start.toString()),(e==null?void 0:e.autoplay)!==void 0&&r.searchParams.set("autoplay",e.autoplay.toString()),r.toString()}if(wf(n)){const t=d2(n);if(!t)return"";const r=new URL(`https://player.vimeo.com/video/${t}`);return(e==null?void 0:e.autoplay)!==void 0&&r.searchParams.set("autoplay",e.autoplay.toString()),r.toString()}return n}function CT(n){Qe(n,"svelte-16y5k2u",".pano-tag-audio-popup-inline-player-wrapper.svelte-16y5k2u{width:100%;height:1.75rem;background-color:rgba(255, 255, 255, 0.06);border-radius:0.125rem;display:flex;align-items:center;cursor:pointer}.pano-tag-audio-popup-inline-player-icon.svelte-16y5k2u{width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}.pano-tag-audio-popup-inline-player-progress.svelte-16y5k2u{flex-grow:1;display:flex;position:relative;height:100%;align-items:center}.pano-tag-audio-popup-inline-player-progress-bar.svelte-16y5k2u{width:0;height:100%;background:linear-gradient(to right, rgba(238, 238, 238, 0) 0, rgba(216, 216, 216, 0.3) 100%);position:absolute;top:0;left:0;z-index:0}.pano-tag-audio-popup-inline-player-elapsed-time.svelte-16y5k2u{position:absolute;z-index:1;font-weight:500;font-size:0.875rem;color:#ffffff;line-height:1.25rem;padding-left:0.25rem}")}function ST(n){let e,t,r,i,o,s,a,l,u,c,d,h;return r=new id({props:{playing:n[0],width:24}}),{c(){e=ie("div"),t=ie("div"),xe(r.$$.fragment),i=$e(),o=ie("div"),s=ie("div"),a=$e(),l=ie("div"),u=dt(n[1]),P(t,"class","pano-tag-audio-popup-inline-player-icon svelte-16y5k2u"),P(s,"class","pano-tag-audio-popup-inline-player-progress-bar svelte-16y5k2u"),fe(s,"width",n[2]+"%"),P(l,"class","pano-tag-audio-popup-inline-player-elapsed-time svelte-16y5k2u"),P(o,"class","pano-tag-audio-popup-inline-player-progress svelte-16y5k2u"),P(e,"class","pano-tag-audio-popup-inline-player-wrapper svelte-16y5k2u")},m(f,p){ae(f,e,p),Y(e,t),be(r,t,null),Y(e,i),Y(e,o),Y(o,s),Y(o,a),Y(o,l),Y(l,u),c=!0,d||(h=Ye(e,"click",Gb(function(){lr(n[3])&&n[3].apply(this,arguments)})),d=!0)},p(f,[p]){n=f;const v={};p&1&&(v.playing=n[0]),r.$set(v),(!c||p&4)&&fe(s,"width",n[2]+"%"),(!c||p&2)&&yt(u,n[1])},i(f){c||(q(r.$$.fragment,f),c=!0)},o(f){ee(r.$$.fragment,f),c=!1},d(f){f&&oe(e),we(r),d=!1,h()}}}function OT(n,e,t){let{playing:r=!1}=e,{elapsedTime:i="00:00"}=e,{progress:o=0}=e,{onClick:s=()=>{}}=e;return n.$$set=a=>{"playing"in a&&t(0,r=a.playing),"elapsedTime"in a&&t(1,i=a.elapsedTime),"progress"in a&&t(2,o=a.progress),"onClick"in a&&t(3,s=a.onClick)},[r,i,o,s]}let $T=class extends Re{constructor(e){super(),Le(this,e,OT,ST,De,{playing:0,elapsedTime:1,progress:2,onClick:3},CT)}};function MT(n){Qe(n,"svelte-tc67u7",'@charset "UTF-8";.tag-popup.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{position:absolute;pointer-events:auto;padding:0.625rem 0.625rem 0.625rem 1.125rem;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;transform-origin:center}.tag-popup-top.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-50%, -100%);left:50%}.tag-popup-bottom.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-50%, 0);left:50%}.tag-popup-left.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-100%, -50%);top:50%}.tag-popup-right.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(0, -50%);top:50%}.tag-popup-top-left.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(calc(2.625rem - 100%), -100%)}.tag-popup-top-right.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-2.625rem, -100%)}.tag-popup-bottom-left.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(calc(2.625rem - 100%), 0)}.tag-popup-bottom-right.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-2.625rem, 0)}.tag-popup-left-top.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-100%, -2.625rem)}.tag-popup-left-bottom.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(-100%, calc(2.625rem - 100%))}.tag-popup-right-top.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(0, -2.625rem)}.tag-popup-right-bottom.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{transform:translate(0, calc(2.625rem - 100%))}.tag-popup-content.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{position:relative;pointer-events:auto;cursor:pointer;padding:1.25rem;border-radius:0.375rem;max-width:17.5rem;width:17.5rem;background:rgba(0, 0, 0, 0.7490196078)}.tag-popup-top.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-top-left.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-top-right.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-bottom.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-bottom-left.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-bottom-right.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-left.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-left-top.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-left-bottom.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-right.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-right-top.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7,.tag-popup-right-bottom.svelte-tc67u7 .tag-popup-content.svelte-tc67u7.svelte-tc67u7{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.light.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{background:#ffffff}.tag-popup-title.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{margin:0;font-size:1rem;font-weight:600;line-height:1.375rem;letter-spacing:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;color:#ffffff}.light.svelte-tc67u7 .tag-popup-title.svelte-tc67u7.svelte-tc67u7{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-description.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{margin:0;font-size:0.875rem;font-weight:400;color:#ffffff;line-height:1.25rem;max-height:5rem;overflow:hidden;word-wrap:break-word;word-break:break-word;white-space:pre-wrap}.light.svelte-tc67u7 .tag-popup-description.svelte-tc67u7.svelte-tc67u7{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-tags.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{display:flex;align-items:center;margin:0;margin-bottom:0}.tag-popup-tags.svelte-tc67u7 .tag-popup-tag.svelte-tc67u7+.tag-popup-tag.svelte-tc67u7{margin-left:0.25rem}.tag-popup-tag.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{padding:0.125rem 0.25rem;display:flex;align-items:center;justify-content:center;border-radius:0.25rem;font-size:0.75rem;line-height:1.125rem;letter-spacing:0;border-radius:0.125rem;max-width:7.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-popup-tag-primary.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{color:#ffffff;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.light.svelte-tc67u7 .tag-popup-tag-primary.svelte-tc67u7.svelte-tc67u7{color:#946700;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.tag-popup-tag-secondary.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{color:#ffffff;background:rgba(255, 255, 255, 0.1490196078)}.light.svelte-tc67u7 .tag-popup-tag-secondary.svelte-tc67u7.svelte-tc67u7{color:rgba(0, 0, 0, 0.5019607843);background:rgba(0, 0, 0, 0.0588235294)}.tag-popup-price.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{font-family:DINAlternate-Bold;font-weight:700;font-size:1.25rem;color:#ae7900;letter-spacing:0;text-align:center;display:flex;justify-content:flex-start;align-items:center;width:100%;margin:0}.tag-popup-media.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{width:15rem;height:10rem;margin:0 auto;overflow:hidden;border-radius:0.25rem;display:flex;align-items:center;justify-content:center;position:relative}.tag-popup-media.svelte-tc67u7 img.svelte-tc67u7.svelte-tc67u7{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.tag-popup-media-type.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.tag-popup-media-index.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{position:absolute;right:0.375rem;bottom:0.375rem;padding:0.0625rem 0.25rem;background:rgba(0, 0, 0, 0.5);border-radius:0.125rem;font-weight:bold;font-size:0.75rem;color:#ffffff;letter-spacing:0;line-height:1.125rem}.iframe-overlay.svelte-tc67u7.svelte-tc67u7.svelte-tc67u7{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;z-index:10}.tag-popup-content.svelte-tc67u7>.svelte-tc67u7+.svelte-tc67u7{margin-top:0.5rem}.tag-popup-content.svelte-tc67u7>.svelte-tc67u7.svelte-tc67u7:first-child{margin-top:0 !important}')}const VT=n=>({}),c1=n=>({}),TT=n=>({}),d1=n=>({});function h1(n,e,t){const r=n.slice();return r[2]=e[t],r}function f1(n,e,t){const r=n.slice();return r[2]=e[t],r}function p1(n){let e,t;return{c(){e=ie("h3"),t=dt(n[5]),P(e,"class","tag-popup-title svelte-tc67u7")},m(r,i){ae(r,e,i),Y(e,t)},p(r,i){i[0]&32&&yt(t,r[5])},d(r){r&&oe(e)}}}function v1(n){let e,t,r=n[4],i=[];for(let a=0;a<r.length;a+=1)i[a]=m1(f1(n,r,a));let o=n[13],s=[];for(let a=0;a<o.length;a+=1)s[a]=g1(h1(n,o,a));return{c(){e=ie("div");for(let a=0;a<i.length;a+=1)i[a].c();t=$e();for(let a=0;a<s.length;a+=1)s[a].c();P(e,"class","tag-popup-tags svelte-tc67u7")},m(a,l){ae(a,e,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);Y(e,t);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null)},p(a,l){if(l[0]&16){r=a[4];let u;for(u=0;u<r.length;u+=1){const c=f1(a,r,u);i[u]?i[u].p(c,l):(i[u]=m1(c),i[u].c(),i[u].m(e,t))}for(;u<i.length;u+=1)i[u].d(1);i.length=r.length}if(l[0]&8192){o=a[13];let u;for(u=0;u<o.length;u+=1){const c=h1(a,o,u);s[u]?s[u].p(c,l):(s[u]=g1(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=o.length}},d(a){a&&oe(e),hl(i,a),hl(s,a)}}}function m1(n){let e,t=n[2]+"",r;return{c(){e=ie("div"),r=dt(t),P(e,"class","tag-popup-tag tag-popup-tag-primary svelte-tc67u7")},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o[0]&16&&t!==(t=i[2]+"")&&yt(r,t)},d(i){i&&oe(e)}}}function g1(n){let e,t=n[2]+"",r;return{c(){e=ie("div"),r=dt(t),P(e,"class","tag-popup-tag tag-popup-tag-secondary svelte-tc67u7")},m(i,o){ae(i,e,o),Y(e,r)},p(i,o){o[0]&8192&&t!==(t=i[2]+"")&&yt(r,t)},d(i){i&&oe(e)}}}function _T(n){let e,t,r,i,o,s,a,l;s=new u2({});let u=n[15]>1&&y1(n);return{c(){e=ie("div"),t=ie("video"),i=$e(),o=ie("div"),xe(s.$$.fragment),a=$e(),u&&u.c(),pn(t.src,r=n[2].data.mediaData[0].url)||P(t,"src",r),P(t,"class","tag-popup-video-fallback"),t.controls=!1,t.autoplay=!1,t.muted=!0,t.loop=!0,P(t,"preload","metadata"),P(t,"disablepictureinpicture",""),t.playsInline=!0,fe(t,"width","100%"),fe(t,"height","100%"),fe(t,"object-fit","cover"),P(o,"class","tag-popup-media-type svelte-tc67u7"),P(e,"class","tag-popup-media svelte-tc67u7")},m(c,d){ae(c,e,d),Y(e,t),Y(e,i),Y(e,o),be(s,o,null),Y(e,a),u&&u.m(e,null),l=!0},p(c,d){(!l||d[0]&4&&!pn(t.src,r=c[2].data.mediaData[0].url))&&P(t,"src",r),c[15]>1?u?u.p(c,d):(u=y1(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(c){l||(q(s.$$.fragment,c),l=!0)},o(c){ee(s.$$.fragment,c),l=!1},d(c){c&&oe(e),we(s),u&&u.d()}}}function kT(n){let e,t,r,i,o,s,a,l,u;const c=[DT,jT],d=[];function h(p,v){return p[7]?0:p[18]?1:-1}~(s=h(n))&&(a=d[s]=c[s](n));let f=n[15]>1&&A1(n);return{c(){e=ie("div"),t=ie("img"),o=$e(),a&&a.c(),l=$e(),f&&f.c(),pn(t.src,r=n[19])||P(t,"src",r),P(t,"alt",i=n[5]||""),P(t,"draggable","false"),P(t,"class","svelte-tc67u7"),P(e,"class","tag-popup-media svelte-tc67u7")},m(p,v){ae(p,e,v),Y(e,t),Y(e,o),~s&&d[s].m(e,null),Y(e,l),f&&f.m(e,null),u=!0},p(p,v){(!u||v[0]&524288&&!pn(t.src,r=p[19]))&&P(t,"src",r),(!u||v[0]&32&&i!==(i=p[5]||""))&&P(t,"alt",i);let b=s;s=h(p),s!==b&&(a&&(Ie(),ee(d[b],1,1,()=>{d[b]=null}),je()),~s?(a=d[s],a||(a=d[s]=c[s](p),a.c()),q(a,1),a.m(e,l)):a=null),p[15]>1?f?f.p(p,v):(f=A1(p),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(p){u||(q(a),u=!0)},o(p){ee(a),u=!1},d(p){p&&oe(e),~s&&d[s].d(),f&&f.d()}}}function IT(n){let e,t,r,i,o,s,a=n[15]>1&&b1(n);return{c(){e=ie("div"),t=ie("iframe"),i=$e(),o=ie("div"),s=$e(),a&&a.c(),P(t,"title",n[16]),pn(t.src,r=n[17])||P(t,"src",r),P(t,"class","tag-popup-video-iframe"),P(t,"frameborder","0"),P(t,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),P(t,"referrerpolicy","strict-origin-when-cross-origin"),t.allowFullscreen=!0,fe(t,"width","100%"),fe(t,"height","100%"),fe(t,"position","absolute"),fe(t,"top","0"),fe(t,"left","0"),P(o,"class","iframe-overlay svelte-tc67u7"),P(e,"class","tag-popup-media svelte-tc67u7")},m(l,u){ae(l,e,u),Y(e,t),Y(e,i),Y(e,o),Y(e,s),a&&a.m(e,null)},p(l,u){u[0]&65536&&P(t,"title",l[16]),u[0]&131072&&!pn(t.src,r=l[17])&&P(t,"src",r),l[15]>1?a?a.p(l,u):(a=b1(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Ee,o:Ee,d(l){l&&oe(e),a&&a.d()}}}function y1(n){let e,t,r,i;return{c(){e=ie("div"),t=dt(n[14]),r=dt("/"),i=dt(n[15]),P(e,"class","tag-popup-media-index svelte-tc67u7")},m(o,s){ae(o,e,s),Y(e,t),Y(e,r),Y(e,i)},p(o,s){s[0]&16384&&yt(t,o[14]),s[0]&32768&&yt(i,o[15])},d(o){o&&oe(e)}}}function jT(n){let e,t,r;return t=new PT({}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","tag-popup-media-type svelte-tc67u7")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function DT(n){let e,t,r;return t=new u2({}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","tag-popup-media-type svelte-tc67u7")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function A1(n){let e,t,r,i;return{c(){e=ie("div"),t=dt(n[14]),r=dt("/"),i=dt(n[15]),P(e,"class","tag-popup-media-index svelte-tc67u7")},m(o,s){ae(o,e,s),Y(e,t),Y(e,r),Y(e,i)},p(o,s){s[0]&16384&&yt(t,o[14]),s[0]&32768&&yt(i,o[15])},d(o){o&&oe(e)}}}function b1(n){let e,t,r,i;return{c(){e=ie("div"),t=dt(n[14]),r=dt("/"),i=dt(n[15]),P(e,"class","tag-popup-media-index svelte-tc67u7")},m(o,s){ae(o,e,s),Y(e,t),Y(e,r),Y(e,i)},p(o,s){s[0]&16384&&yt(t,o[14]),s[0]&32768&&yt(i,o[15])},d(o){o&&oe(e)}}}function w1(n){let e,t;return{c(){e=ie("div"),t=dt(n[20]),P(e,"class","tag-popup-description svelte-tc67u7")},m(r,i){ae(r,e,i),Y(e,t)},p(r,i){i[0]&1048576&&yt(t,r[20])},d(r){r&&oe(e)}}}function x1(n){let e,t,r;return t=new $T({props:{playing:n[1],progress:n[9],elapsedTime:n[10],onClick:n[22]}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","tag-popup-audio-player-wrapper svelte-tc67u7")},m(i,o){ae(i,e,o),be(t,e,null),r=!0},p(i,o){const s={};o[0]&2&&(s.playing=i[1]),o[0]&512&&(s.progress=i[9]),o[0]&1024&&(s.elapsedTime=i[10]),t.$set(s)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){i&&oe(e),we(t)}}}function P1(n){let e,t,r,i,o=n[11]&&E1(n);return{c(){e=ie("div"),o&&o.c(),t=$e(),r=ie("span"),i=dt(n[12]),P(r,"class","tag-popup-price-value"),P(e,"class","tag-popup-price svelte-tc67u7")},m(s,a){ae(s,e,a),o&&o.m(e,null),Y(e,t),Y(e,r),Y(r,i)},p(s,a){s[11]?o?o.p(s,a):(o=E1(s),o.c(),o.m(e,t)):o&&(o.d(1),o=null),a[0]&4096&&yt(i,s[12])},d(s){s&&oe(e),o&&o.d()}}}function E1(n){let e,t;return{c(){e=ie("span"),t=dt(n[11]),P(e,"class","tag-popup-price-unit")},m(r,i){ae(r,e,i),Y(e,t)},p(r,i){i[0]&2048&&yt(t,r[11])},d(r){r&&oe(e)}}}function LT(n){let e,t,r,i,o,s,a,l,u,c,d,h,f,p,v=n[5]&&p1(n),b=n[3]&&(n[4].length>0||n[13].length>0)&&v1(n);const g=[IT,kT,_T],y=[];function E(A,x){var S;return A[6]&&A[17]?0:A[19]?1:A[7]&&A[2].data.mediaData&&(S=A[2].data.mediaData[0])!=null&&S.url?2:-1}~(o=E(n))&&(s=y[o]=g[o](n));let C=n[20]&&w1(n),V=n[8]&&x1(n),M=n[12]&&P1(n);const z=n[38].toolbar,U=Zi(z,n,n[37],d1),D=n[38].arrow,m=Zi(D,n,n[37],c1);return{c(){e=ie("div"),t=ie("div"),v&&v.c(),r=$e(),b&&b.c(),i=$e(),s&&s.c(),a=$e(),C&&C.c(),l=$e(),V&&V.c(),u=$e(),M&&M.c(),c=$e(),U&&U.c(),d=$e(),m&&m.c(),P(t,"class",h="tag-popup-content "+n[21]+" svelte-tc67u7"),P(e,"class",f="tag-popup tag-popup-"+n[0]+" svelte-tc67u7")},m(A,x){ae(A,e,x),Y(e,t),v&&v.m(t,null),Y(t,r),b&&b.m(t,null),Y(t,i),~o&&y[o].m(t,null),Y(t,a),C&&C.m(t,null),Y(t,l),V&&V.m(t,null),Y(t,u),M&&M.m(t,null),Y(t,c),U&&U.m(t,null),Y(t,d),m&&m.m(t,null),p=!0},p(A,x){A[5]?v?v.p(A,x):(v=p1(A),v.c(),v.m(t,r)):v&&(v.d(1),v=null),A[3]&&(A[4].length>0||A[13].length>0)?b?b.p(A,x):(b=v1(A),b.c(),b.m(t,i)):b&&(b.d(1),b=null);let S=o;o=E(A),o===S?~o&&y[o].p(A,x):(s&&(Ie(),ee(y[S],1,1,()=>{y[S]=null}),je()),~o?(s=y[o],s?s.p(A,x):(s=y[o]=g[o](A),s.c()),q(s,1),s.m(t,a)):s=null),A[20]?C?C.p(A,x):(C=w1(A),C.c(),C.m(t,l)):C&&(C.d(1),C=null),A[8]?V?(V.p(A,x),x[0]&256&&q(V,1)):(V=x1(A),V.c(),q(V,1),V.m(t,u)):V&&(Ie(),ee(V,1,1,()=>{V=null}),je()),A[12]?M?M.p(A,x):(M=P1(A),M.c(),M.m(t,c)):M&&(M.d(1),M=null),U&&U.p&&(!p||x[1]&64)&&to(U,z,A,A[37],p?eo(z,A[37],x,TT):no(A[37]),d1),m&&m.p&&(!p||x[1]&64)&&to(m,D,A,A[37],p?eo(D,A[37],x,VT):no(A[37]),c1),(!p||x[0]&2097152&&h!==(h="tag-popup-content "+A[21]+" svelte-tc67u7"))&&P(t,"class",h),(!p||x[0]&1&&f!==(f="tag-popup tag-popup-"+A[0]+" svelte-tc67u7"))&&P(e,"class",f)},i(A){p||(q(s),q(V),q(U,A),q(m,A),p=!0)},o(A){ee(s),ee(V),ee(U,A),ee(m,A),p=!1},d(A){A&&oe(e),v&&v.d(),b&&b.d(),~o&&y[o].d(),C&&C.d(),V&&V.d(),M&&M.d(),U&&U.d(A),m&&m.d(A)}}}function RT(n){const e=Math.floor(n/60),t=Math.floor(n%60);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function zT(n,e,t){let r,i,o,s,a,l,u,c,d,h,f,p,v,b,g,y,E,C,V,M,z,U,D,m,A,x,{$$slots:S={},$$scope:$}=e,{tag:T}=e,{config:F={}}=e,{theme:R=void 0}=e,{placement:ne="right-top"}=e,{audioInstance:ce=null}=e,{audioPlaying:Z=!1}=e,{audioCurrentTime:he=0}=e,{audioDuration:pe=0}=e,ge=0,Me="00:00",_=null,j=0,N=0;function B(){return pe>0?he/pe*100:0}function X(){if(!Z||pe<=0){_=null;return}const J=(Date.now()-j)/1e3,re=he+J,te=Math.min(re/pe*100,100)-N;Math.abs(te)>.05&&(N+=te*.2),_=requestAnimationFrame(X)}function L(){if(!i)return;const J=B();pe>0?(Z||(N=J),t(9,ge=N),t(10,Me=RT(N/100*pe)),j=Date.now()):(N=0,t(9,ge=0),t(10,Me="00:00"))}function G(){Z&&pe>0?_||X():_&&(cancelAnimationFrame(_),_=null)}function K(){ce&&(ce.paused?ce.play():ce.pause())}return la(()=>{_&&(cancelAnimationFrame(_),_=null)}),n.$$set=J=>{"tag"in J&&t(2,T=J.tag),"config"in J&&t(23,F=J.config),"theme"in J&&t(24,R=J.theme),"placement"in J&&t(0,ne=J.placement),"audioInstance"in J&&t(25,ce=J.audioInstance),"audioPlaying"in J&&t(1,Z=J.audioPlaying),"audioCurrentTime"in J&&t(26,he=J.audioCurrentTime),"audioDuration"in J&&t(27,pe=J.audioDuration),"$$scope"in J&&t(37,$=J.$$scope)},n.$$.update=()=>{var J,re,te,se,ve,Ce;n.$$.dirty[0]&4&&t(3,r=T.contentType==="Marketing"),n.$$.dirty[0]&4&&t(8,i=T.contentType==="Audio"),n.$$.dirty[0]&8&&t(36,o=r?"light":"dark"),n.$$.dirty[0]&16777220|n.$$.dirty[1]&32&&t(21,s=T.data.theme!==void 0&&T.data.theme!==null?T.data.theme:R??o),n.$$.dirty[0]&4&&t(35,a=T.data.title||T.data.name||""),n.$$.dirty[0]&4&&t(34,l=T.data.description||T.data.tooltip||""),n.$$.dirty[1]&16&&t(5,u=a||""),n.$$.dirty[1]&8&&t(20,c=l||""),n.$$.dirty[0]&201326594&&L(),n.$$.dirty[0]&134217730&&G(),n.$$.dirty[0]&268&&t(33,d=(()=>{var ke,Ve,Pe,Fe,it,Ze,zt,an,Mt,pt,Qt;if(i||r)return null;if(T.data.mediaData&&T.data.mediaData.length>0){const Ne=T.data.mediaData[0];if(Ne.type==="Video"){if(Ne.videoCoverUrl)return Ne.videoCoverUrl;if(Ne.url){const Xt=Ne.url.toLowerCase();if(bf(Xt)){const Vt=c2(Xt);if(Vt)return`https://img.youtube.com/vi/${Vt}/hqdefault.jpg`}if(wf(Xt)){const Vt=d2(Xt);if(Vt)return`https://vumbnail.com/${Vt}.jpg`}return}}if(T.contentType==="Panorama")return(Qt=(zt=(Pe=(Ve=(ke=T.data.mediaData)==null?void 0:ke[0])==null?void 0:Ve.cube)==null?void 0:Pe.front)!=null?zt:(Ze=(it=(Fe=T.data.mediaData)==null?void 0:Fe[0])==null?void 0:it.thumbnail)==null?void 0:Ze.split("?")[0])!=null?Qt:(pt=(Mt=(an=T.data.mediaData)==null?void 0:an[0])==null?void 0:Mt.url)==null?void 0:pt.split("?")[0];if(Ne.url||Ne.thumbnail)return Ne.url||Ne.thumbnail}return T.data.imageUrl})()),n.$$.dirty[0]&8388612|n.$$.dirty[1]&4&&t(19,h=F!=null&&F.imageURLTransform&&(d!=null&&d.includes("realsee-cdn")||d!=null&&d.includes("ljcdn.com"))?F.imageURLTransform(d,{width:280,height:280}):d||T.data.mediaUrl||""),n.$$.dirty[0]&4&&t(7,f=T.contentType==="Video"||T.data.mediaType==="video"),n.$$.dirty[0]&4&&t(18,p=T.contentType==="Panorama"||T.data.mediaType==="panorama"),n.$$.dirty[0]&132&&t(32,v=f&&T.data.mediaData&&((J=T.data.mediaData[0])==null?void 0:J.url)&&bf(T.data.mediaData[0].url)),n.$$.dirty[0]&132&&t(31,b=f&&T.data.mediaData&&((re=T.data.mediaData[0])==null?void 0:re.url)&&wf(T.data.mediaData[0].url)),n.$$.dirty[1]&3&&t(6,g=v||b),n.$$.dirty[0]&68&&t(17,y=g&&T.data.mediaData&&(te=T.data.mediaData[0])!=null&&te.url?ET(T.data.mediaData[0].url,{autoplay:0}):""),n.$$.dirty[0]&32|n.$$.dirty[1]&3&&t(16,E=v?"YouTube video player":b?"Vimeo video player":u),n.$$.dirty[0]&4&&t(15,C=((se=T.data.mediaData)==null?void 0:se.length)||0),n.$$.dirty[0]&12&&t(30,M=r?T.data.brandTags||[]:[]),n.$$.dirty[0]&12&&t(29,z=r?T.data.tags||[]:[]),n.$$.dirty[0]&1073741824&&t(4,U=M.filter(Boolean).slice(0,2)),n.$$.dirty[0]&16&&t(28,D=Math.max(0,2-U.length)),n.$$.dirty[0]&805306368&&t(13,m=D>0?z.filter(Boolean).slice(0,D):[]),n.$$.dirty[0]&12&&t(12,A=r&&((ve=T.data.price)==null?void 0:ve.value)||""),n.$$.dirty[0]&12&&t(11,x=r&&((Ce=T.data.price)==null?void 0:Ce.unit)||"")},t(14,V=1),[ne,Z,T,r,U,u,g,f,i,ge,Me,x,A,m,V,C,E,y,p,h,c,s,K,F,R,ce,he,pe,D,z,M,b,v,d,l,a,o,$,S]}let BT=class extends Re{constructor(e){super(),Le(this,e,zT,LT,De,{tag:2,config:23,theme:24,placement:0,audioInstance:25,audioPlaying:1,audioCurrentTime:26,audioDuration:27},MT,[-1,-1])}};function FT(n){let e,t,r,i,o,s,a,l,u,c,d,h,f;return{c(){e=Ae("svg"),t=Ae("defs"),r=Ae("linearGradient"),i=Ae("stop"),o=Ae("stop"),a=Ae("linearGradient"),l=Ae("stop"),u=Ae("stop"),d=Ae("path"),P(i,"stop-color",n[1]),P(i,"offset","0%"),P(o,"stop-color",n[1]),P(o,"stop-opacity",".5"),P(o,"offset","100%"),P(r,"id",s="arrow-right-icon-gradient-"+n[1]),P(r,"x1","96.2%"),P(r,"y1","50%"),P(r,"x2","0%"),P(r,"y2","50%"),P(l,"stop-color",n[1]),P(l,"offset","0%"),P(u,"stop-color",n[1]),P(u,"stop-opacity","0"),P(u,"offset","100%"),P(a,"id",c="arrow-right-icon-stroke-"+n[1]),P(a,"x1","50%"),P(a,"y1","9.83%"),P(a,"x2","41.99%"),P(a,"y2","24.46%"),P(d,"d","M4.84572153,2.14166669 C4.94036186,2.14170036 5.03490004,2.17870347 5.10676798,2.25203341 L9.39516942,6.66308361 C9.48635681,6.75687897 9.53195051,6.87843949 9.53195051,7 C9.53195051,7.12156051 9.48635681,7.24312103 9.39516942,7.33691639 L5.11673708,11.7390017 C5.02118573,11.813978 4.92122439,11.8514005 4.82705048,11.851434 C4.73517505,11.8514667 4.65029153,11.8150862 4.59276829,11.7576692 C4.51856427,11.6593496 4.48179951,11.5564146 4.48176638,11.4595899 C4.48173399,11.3649536 4.51747117,11.2773335 4.58937836,11.2035272 L7.74273899,7.43877755 C7.84906128,7.31184097 7.90222243,7.15592048 7.90222243,7 C7.90222243,6.84407952 7.84906128,6.68815903 7.74273449,6.56121708 L4.54804918,2.74803934 C4.65338339,2.20863952 4.74441906,2.14163065 4.84572153,2.14166669 Z"),P(d,"fill",h=`url(#arrow-right-icon-gradient-${n[1]})`),P(d,"fill-rule","nonzero"),P(d,"stroke",f=`url(#arrow-right-icon-stroke-${n[1]})`),P(d,"stroke-width",".2"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"viewBox","0 0 14 14"),P(e,"width",n[0]),P(e,"height",n[0]),fe(e,"opacity",n[2])},m(p,v){ae(p,e,v),Y(e,t),Y(t,r),Y(r,i),Y(r,o),Y(t,a),Y(a,l),Y(a,u),Y(e,d)},p(p,[v]){v&2&&P(i,"stop-color",p[1]),v&2&&P(o,"stop-color",p[1]),v&2&&s!==(s="arrow-right-icon-gradient-"+p[1])&&P(r,"id",s),v&2&&P(l,"stop-color",p[1]),v&2&&P(u,"stop-color",p[1]),v&2&&c!==(c="arrow-right-icon-stroke-"+p[1])&&P(a,"id",c),v&2&&h!==(h=`url(#arrow-right-icon-gradient-${p[1]})`)&&P(d,"fill",h),v&2&&f!==(f=`url(#arrow-right-icon-stroke-${p[1]})`)&&P(d,"stroke",f),v&1&&P(e,"width",p[0]),v&1&&P(e,"height",p[0]),v&4&&fe(e,"opacity",p[2])},i:Ee,o:Ee,d(p){p&&oe(e)}}}function HT(n,e,t){let{size:r="14"}=e,{color:i="#ffffff"}=e,{opacity:o=1}=e;return n.$$set=s=>{"size"in s&&t(0,r=s.size),"color"in s&&t(1,i=s.color),"opacity"in s&&t(2,o=s.opacity)},[r,i,o]}let UT=class extends Re{constructor(e){super(),Le(this,e,HT,FT,De,{size:0,color:1,opacity:2})}};function NT(n){let e,t,r,i,o,s,a,l,u,c,d,h,f;return{c(){e=Ae("svg"),t=Ae("defs"),r=Ae("linearGradient"),i=Ae("stop"),o=Ae("stop"),a=Ae("linearGradient"),l=Ae("stop"),u=Ae("stop"),d=Ae("path"),P(i,"stop-color",n[1]),P(i,"offset","0%"),P(o,"stop-color",n[1]),P(o,"stop-opacity",".5"),P(o,"offset","100%"),P(r,"id",s="share-icon-gradient-"+n[1]),P(r,"x1","41.65%"),P(r,"y1","59.05%"),P(r,"x2","66.13%"),P(r,"y2","9.07%"),P(l,"stop-color",n[1]),P(l,"offset","0%"),P(u,"stop-color",n[1]),P(u,"stop-opacity","0"),P(u,"offset","100%"),P(a,"id",c="share-icon-stroke-"+n[1]),P(a,"x1","55.68%"),P(a,"y1","2.48%"),P(a,"x2","60.83%"),P(a,"y2","14.28%"),P(d,"d","M12.4937515,2.60140991 L12.6834904,2.60248871 C13.307774,2.63121157 13.9222065,2.90874077 14.3642696,3.436433 C14.7794904,3.93278385 14.923342,4.60854408 14.8265514,5.24548738 C14.7279361,5.89144103 14.4428997,6.3527969 14.063774,6.65956953 C13.6079793,7.02837949 13.0189069,7.17403325 12.4632035,7.15562178 C11.7380729,7.13162078 11.0390809,7.42803145 10.5261758,7.9357119 C9.96083448,8.49643643 9.67596892,9.19792997 9.69443632,9.91942004 C9.66449732,10.8859455 9.96309104,11.5807243 10.4796578,12.092029 C11.0239965,12.6296813 11.7402488,12.9101676 12.4817091,12.8884813 C13.0940469,12.8705618 13.7481304,13.0495781 14.2150699,13.5117611 C14.6987029,13.9904677 14.9268415,14.6256711 14.8974895,15.2508921 C14.8684928,15.868544 14.5880857,16.4761837 14.055365,16.9134138 C13.5533941,17.3248246 12.8689122,17.4672624 12.2258037,17.3713572 C11.5727886,17.2736846 11.1063284,16.991503 10.7961882,16.6159844 C10.4239402,16.1652655 10.2768519,15.5827583 10.2954352,15.0332376 C10.3197006,14.3149783 10.0202124,13.6224897 9.50703789,13.1145427 C8.94671715,12.5587885 8.2455275,12.2800717 7.51547371,12.2927077 C7.23521908,12.3053648 6.95603622,12.2673623 6.69423123,12.1827116 C6.1605306,11.9588888 5.9529663,11.8380114 5.77703284,11.66387 C5.40155143,11.2922134 5.1829777,10.8272392 5.11950899,10.3459077 C5.05433663,9.85165608 5.15259721,9.34024891 5.41443015,8.89062791 C5.61688125,8.49864777 5.91421421,8.21950306 6.25529625,8.03627882 C6.64911257,7.8247265 7.1008248,7.74055154 7.53306889,7.75691992 L7.73219905,7.75624362 C8.39290266,7.7280909 9.01896921,7.44343917 9.49037385,6.97683639 C10.0339806,6.43762468 10.3173723,5.72806794 10.2954528,4.99382841 C10.2784266,4.38712951 10.4592448,3.74020534 10.9258673,3.27833603 C11.4093877,2.79921041 12.051472,2.57340998 12.6834904,2.60248871 Z"),P(d,"fill",h=`url(#share-icon-gradient-${n[1]})`),P(d,"fill-rule","nonzero"),P(d,"stroke",f=`url(#share-icon-stroke-${n[1]})`),P(d,"stroke-width",".2"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"viewBox","0 0 20 20"),P(e,"width",n[0]),P(e,"height",n[0]),fe(e,"opacity",n[2])},m(p,v){ae(p,e,v),Y(e,t),Y(t,r),Y(r,i),Y(r,o),Y(t,a),Y(a,l),Y(a,u),Y(e,d)},p(p,[v]){v&2&&P(i,"stop-color",p[1]),v&2&&P(o,"stop-color",p[1]),v&2&&s!==(s="share-icon-gradient-"+p[1])&&P(r,"id",s),v&2&&P(l,"stop-color",p[1]),v&2&&P(u,"stop-color",p[1]),v&2&&c!==(c="share-icon-stroke-"+p[1])&&P(a,"id",c),v&2&&h!==(h=`url(#share-icon-gradient-${p[1]})`)&&P(d,"fill",h),v&2&&f!==(f=`url(#share-icon-stroke-${p[1]})`)&&P(d,"stroke",f),v&1&&P(e,"width",p[0]),v&1&&P(e,"height",p[0]),v&4&&fe(e,"opacity",p[2])},i:Ee,o:Ee,d(p){p&&oe(e)}}}function WT(n,e,t){let{size:r="20"}=e,{color:i="#ffffff"}=e,{opacity:o=1}=e;return n.$$set=s=>{"size"in s&&t(0,r=s.size),"color"in s&&t(1,i=s.color),"opacity"in s&&t(2,o=s.opacity)},[r,i,o]}let GT=class extends Re{constructor(e){super(),Le(this,e,WT,NT,De,{size:0,color:1,opacity:2})}};function QT(n){Qe(n,"svelte-18owx9v",".tag-popover-toolbar.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;margin-top:0.75rem;padding-top:0;border-top:none}.tag-popover-toolbar.both-buttons.svelte-18owx9v.svelte-18owx9v{justify-content:space-between}.tag-popover-toolbar.single-button.svelte-18owx9v.svelte-18owx9v{justify-content:flex-end}.tag-popover-toolbar-dark.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:#ffffff}.tag-popover-toolbar-light.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:rgba(0, 0, 0, 0.85)}.tag-popover-btn.view-more.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;font-weight:500;font-size:0.875rem;letter-spacing:0;line-height:1.25rem}.tag-popover-btn.share.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}")}function C1(n){let e,t,r,i,o=n[0].showMore&&S1(n),s=n[0].showShare&&O1(n);return{c(){e=ie("div"),o&&o.c(),t=$e(),s&&s.c(),P(e,"class",r="tag-popover-toolbar tag-popover-toolbar-"+n[1]+" "+(n[0].showMore&&n[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v")},m(a,l){ae(a,e,l),o&&o.m(e,null),Y(e,t),s&&s.m(e,null),i=!0},p(a,l){a[0].showMore?o?(o.p(a,l),l&1&&q(o,1)):(o=S1(a),o.c(),q(o,1),o.m(e,t)):o&&(Ie(),ee(o,1,1,()=>{o=null}),je()),a[0].showShare?s?(s.p(a,l),l&1&&q(s,1)):(s=O1(a),s.c(),q(s,1),s.m(e,null)):s&&(Ie(),ee(s,1,1,()=>{s=null}),je()),(!i||l&3&&r!==(r="tag-popover-toolbar tag-popover-toolbar-"+a[1]+" "+(a[0].showMore&&a[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v"))&&P(e,"class",r)},i(a){i||(q(o),q(s),i=!0)},o(a){ee(o),ee(s),i=!1},d(a){a&&oe(e),o&&o.d(),s&&s.d()}}}function S1(n){let e,t,r,i,o,s,a;return i=new UT({props:{size:"14",color:n[1]==="light"?"#000000":"#ffffff",opacity:n[1]==="light"?.8:1}}),{c(){e=ie("div"),t=dt(n[2]),r=$e(),xe(i.$$.fragment),P(e,"class","tag-popover-btn view-more svelte-18owx9v")},m(l,u){ae(l,e,u),Y(e,t),Y(e,r),be(i,e,null),o=!0,s||(a=Ye(e,"click",n[3]),s=!0)},p(l,u){(!o||u&4)&&yt(t,l[2]);const c={};u&2&&(c.color=l[1]==="light"?"#000000":"#ffffff"),u&2&&(c.opacity=l[1]==="light"?.8:1),i.$set(c)},i(l){o||(q(i.$$.fragment,l),o=!0)},o(l){ee(i.$$.fragment,l),o=!1},d(l){l&&oe(e),we(i),s=!1,a()}}}function O1(n){let e,t,r,i,o;return t=new GT({props:{size:"20",color:n[1]==="light"?"#000000":"#ffffff",opacity:n[1]==="light"?.8:1}}),{c(){e=ie("div"),xe(t.$$.fragment),P(e,"class","tag-popover-btn share svelte-18owx9v")},m(s,a){ae(s,e,a),be(t,e,null),r=!0,i||(o=Ye(e,"click",n[4]),i=!0)},p(s,a){const l={};a&2&&(l.color=s[1]==="light"?"#000000":"#ffffff"),a&2&&(l.opacity=s[1]==="light"?.8:1),t.$set(l)},i(s){r||(q(t.$$.fragment,s),r=!0)},o(s){ee(t.$$.fragment,s),r=!1},d(s){s&&oe(e),we(t),i=!1,o()}}}function XT(n){let e,t,r=(n[0].showMore||n[0].showShare)&&C1(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[0].showMore||i[0].showShare?r?(r.p(i,o),o&1&&q(r,1)):(r=C1(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function qT(n,e,t){let r;const i=Ur("hooks");uo();let{tag:o}=e,{toolbar:s={showMore:!0,showShare:!0}}=e,{theme:a="dark"}=e,{closePopover:l=void 0}=e;function u(d){d.stopPropagation(),typeof l=="function"&&l(),i.emit("click",{event:d,target:"TagPopoverViewMore",tag:o})}function c(d){d.stopPropagation(),typeof l=="function"&&l(),i.emit("click",{event:d,target:"TagPopoverShare",tag:o})}return n.$$set=d=>{"tag"in d&&t(5,o=d.tag),"toolbar"in d&&t(0,s=d.toolbar),"theme"in d&&t(1,a=d.theme),"closePopover"in d&&t(6,l=d.closePopover)},n.$$.update=()=>{n.$$.dirty&32&&t(2,r=Ge(o.data.highlightText)&&o.data.highlightText.trim()!==""?o.data.highlightText:Ge(o.config.popoverConfig.viewMoreText)&&o.config.popoverConfig.viewMoreText.trim()!==""?o.config.popoverConfig.viewMoreText:"")},[s,a,r,u,c,o,l]}let YT=class extends Re{constructor(e){super(),Le(this,e,qT,XT,De,{tag:5,toolbar:0,theme:1,closePopover:6},QT)}};function KT(n){let e,t;return e=new YT({props:{toolbar:{showMore:n[7].showMore===void 0?!0:n[7].showMore,showShare:n[7].showShare===void 0?!0:n[7].showShare},theme:n[2],tag:n[4],closePopover:n[8]}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i&128&&(o.toolbar={showMore:r[7].showMore===void 0?!0:r[7].showMore,showShare:r[7].showShare===void 0?!0:r[7].showShare}),i&4&&(o.theme=r[2]),i&16&&(o.tag=r[4]),i&256&&(o.closePopover=r[8]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function JT(n){let e,t,r,i;return e=new mT({props:{show:n[0],direction:n[1],theme:n[2]}}),r=new BT({props:{placement:n[3],tag:n[4],config:n[5],theme:n[6],audioInstance:n[9],audioPlaying:n[10],audioCurrentTime:n[11],audioDuration:n[12],$$slots:{toolbar:[KT]},$$scope:{ctx:n}}}),r.$on("resize",n[13]),{c(){xe(e.$$.fragment),t=$e(),xe(r.$$.fragment)},m(o,s){be(e,o,s),ae(o,t,s),be(r,o,s),i=!0},p(o,[s]){const a={};s&1&&(a.show=o[0]),s&2&&(a.direction=o[1]),s&4&&(a.theme=o[2]),e.$set(a);const l={};s&8&&(l.placement=o[3]),s&16&&(l.tag=o[4]),s&32&&(l.config=o[5]),s&64&&(l.theme=o[6]),s&512&&(l.audioInstance=o[9]),s&1024&&(l.audioPlaying=o[10]),s&2048&&(l.audioCurrentTime=o[11]),s&4096&&(l.audioDuration=o[12]),s&16788&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){i||(q(e.$$.fragment,o),q(r.$$.fragment,o),i=!0)},o(o){ee(e.$$.fragment,o),ee(r.$$.fragment,o),i=!1},d(o){we(e,o),o&&oe(t),we(r,o)}}}function ZT(n,e,t){let{showArrow:r}=e,{arrowDirection:i}=e,{effectiveTheme:o}=e,{adjustedPlacement:s}=e,{tag:a}=e,{config:l}=e,{theme:u}=e,{toolbar:c}=e,{closePopover:d}=e,{audioInstance:h=null}=e,{audioPlaying:f=!1}=e,{audioCurrentTime:p=0}=e,{audioDuration:v=0}=e;function b(g){bi.call(this,n,g)}return n.$$set=g=>{"showArrow"in g&&t(0,r=g.showArrow),"arrowDirection"in g&&t(1,i=g.arrowDirection),"effectiveTheme"in g&&t(2,o=g.effectiveTheme),"adjustedPlacement"in g&&t(3,s=g.adjustedPlacement),"tag"in g&&t(4,a=g.tag),"config"in g&&t(5,l=g.config),"theme"in g&&t(6,u=g.theme),"toolbar"in g&&t(7,c=g.toolbar),"closePopover"in g&&t(8,d=g.closePopover),"audioInstance"in g&&t(9,h=g.audioInstance),"audioPlaying"in g&&t(10,f=g.audioPlaying),"audioCurrentTime"in g&&t(11,p=g.audioCurrentTime),"audioDuration"in g&&t(12,v=g.audioDuration)},[r,i,o,s,a,l,u,c,d,h,f,p,v,b]}class e_ extends Re{constructor(e){super(),Le(this,e,ZT,JT,De,{showArrow:0,arrowDirection:1,effectiveTheme:2,adjustedPlacement:3,tag:4,config:5,theme:6,toolbar:7,closePopover:8,audioInstance:9,audioPlaying:10,audioCurrentTime:11,audioDuration:12})}}function t_(n){Qe(n,"svelte-11cjg3j",'@charset "UTF-8";.tag-popover.svelte-11cjg3j{position:absolute;z-index:1000010;pointer-events:auto;width:auto;height:auto;padding:0;margin:0;visibility:visible;opacity:1}.tag-popover-content.svelte-11cjg3j{cursor:pointer;pointer-events:auto}.tag-popover-content.audio-tag-popover.svelte-11cjg3j{cursor:default}')}function $1(n){let e,t,r,i,o,s,a,l,u;return r=new e_({props:{showArrow:n[13],arrowDirection:n[12],effectiveTheme:n[18],adjustedPlacement:n[8],tag:n[0],config:n[1],theme:n[2],toolbar:n[16],audioInstance:n[4],audioPlaying:n[5],audioCurrentTime:n[6],audioDuration:n[7],closePopover:n[24]}}),r.$on("viewMore",n[20]),r.$on("share",n[21]),r.$on("resize",n[22]),{c(){e=ie("div"),t=ie("div"),xe(r.$$.fragment),P(t,"class","tag-popover-content svelte-11cjg3j"),Se(t,"audio-tag-popover",n[11]),P(e,"class",o="tag-popover tag-popover-"+n[18]+" tag-popover-"+n[8]+" svelte-11cjg3j"),P(e,"data-tag-id",s=n[0].id),fe(e,"z-index",n[17]),fe(e,"left",n[14].x+"px"),fe(e,"top",n[14].y+"px")},m(c,d){ae(c,e,d),Y(e,t),be(r,t,null),n[35](t),n[36](e),a=!0,l||(u=[Ye(t,"mouseenter",n[33]),Ye(t,"mouseleave",n[34]),Ye(t,"click",n[23])],l=!0)},p(c,d){n=c;const h={};d[0]&8192&&(h.showArrow=n[13]),d[0]&4096&&(h.arrowDirection=n[12]),d[0]&262144&&(h.effectiveTheme=n[18]),d[0]&256&&(h.adjustedPlacement=n[8]),d[0]&1&&(h.tag=n[0]),d[0]&2&&(h.config=n[1]),d[0]&4&&(h.theme=n[2]),d[0]&65536&&(h.toolbar=n[16]),d[0]&16&&(h.audioInstance=n[4]),d[0]&32&&(h.audioPlaying=n[5]),d[0]&64&&(h.audioCurrentTime=n[6]),d[0]&128&&(h.audioDuration=n[7]),r.$set(h),(!a||d[0]&2048)&&Se(t,"audio-tag-popover",n[11]),(!a||d[0]&262400&&o!==(o="tag-popover tag-popover-"+n[18]+" tag-popover-"+n[8]+" svelte-11cjg3j"))&&P(e,"class",o),(!a||d[0]&1&&s!==(s=n[0].id))&&P(e,"data-tag-id",s),(!a||d[0]&131072)&&fe(e,"z-index",n[17]),(!a||d[0]&16384)&&fe(e,"left",n[14].x+"px"),(!a||d[0]&16384)&&fe(e,"top",n[14].y+"px")},i(c){a||(q(r.$$.fragment,c),kn(()=>{a&&(i||(i=zm(t,n[19],{duration:n[15],easing:pl,y:n[12]==="top"?-8:n[12]==="bottom"?8:0,x:n[12]==="left"?-8:n[12]==="right"?8:0},!0)),i.run(1))}),a=!0)},o(c){ee(r.$$.fragment,c),i||(i=zm(t,n[19],{duration:n[15],easing:pl,y:n[12]==="top"?-8:n[12]==="bottom"?8:0,x:n[12]==="left"?-8:n[12]==="right"?8:0},!1)),i.run(0),a=!1},d(c){c&&oe(e),we(r),n[35](null),c&&i&&i.end(),n[36](null),l=!1,vn(u)}}}function n_(n){let e,t,r=n[3]&&n[14]&&$1(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,o){i[3]&&i[14]?r?(r.p(i,o),o[0]&16392&&q(r,1)):(r=$1(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function r_(n,e,t){let r,i,o,s,a,l,u,c,d,h;const f=Ur("hooks");let{tag:p}=e,{config:v={}}=e,{triggerElement:b}=e,{wrapperElement:g=document.body}=e,{popoverContainer:y=null}=e,{theme:E=void 0}=e,{visible:C=!0}=e,{closePopover:V=void 0}=e,{audioInstance:M=null}=e,{audioPlaying:z=!1}=e,{audioCurrentTime:U=0}=e,{audioDuration:D=0}=e;const m=uo();let A,x={width:0,height:0},S=null,$=i;function T(L,{duration:G=400,easing:K=pl,x:J=0,y:re=0}){return{duration:G,css:(te,se)=>`
          opacity: ${te};
          transform: translate(${se*J}px, ${se*re}px);
        `}}const F=()=>{if(!p.screenPosition||!b||!g)return i;const L=(v==null?void 0:v.autoPlacementBaseSpace)||{top:.2,bottom:.2,right:.15},G=g.clientWidth,K=g.clientHeight,J=K*L.top,re=K*(1-L.bottom),te=G*(1-L.right),se=p.screenPosition.leftPx,ve=p.screenPosition.topPx,Ce=x.width||280,ke=x.height||200;return ve<=J?se<=te?se+Ce<=G&&ve+ke<=K?"right-top":"bottom-left":se-Ce>=0&&ve+ke<=K?"left-top":"bottom-right":ve>=re?se<=te?se+Ce<=G&&ve-ke>=0?"right-bottom":"top-left":se-Ce>=0&&ve-ke>=0?"left-bottom":"top-right":se<=te?se+Ce<=G?"right-top":"left-top":se-Ce>=0?"left-top":"right-top"},R=(L,G)=>{switch(L){case"top":case"top-left":case"top-right":return{x:G.left+G.width/2,y:G.top};case"bottom":case"bottom-left":case"bottom-right":return{x:G.left+G.width/2,y:G.top+G.height};case"left":case"left-top":case"left-bottom":return{x:G.left,y:G.top+G.height/2};case"right":case"right-top":case"right-bottom":return{x:G.left+G.width,y:G.top+G.height/2};default:return{x:G.left+G.width/2,y:G.top}}},ne=L=>{_(),f&&f.emit("click",{event:L.detail.event,target:"TagPopoverViewMore",tag:p})},ce=L=>{_(),f&&f.emit("click",{event:L.detail.event,target:"TagPopoverShare",tag:p})},Z=L=>{t(29,x=L.detail),x.width>0&&x.height>0&&t(8,$=F())},he=L=>{h||_(),L.stopPropagation(),f.emit("click",{event:L,target:"TagPopoverContent",tag:p})};let pe=null,ge=!1;function Me(){y&&pe&&pe.parentNode!==y&&y.appendChild(pe)}lo(()=>{(!g||g===document.body)&&console.warn("TagPopover  document.body  wrapperElement"),ge=!0,Me(),g&&g!==document.body&&t(25,g.style.overflow="hidden",g)}),AE(()=>{ge&&Me()}),la(()=>{pe&&pe.parentNode&&pe.parentNode.removeChild(pe),g&&g!==document.body&&t(25,g.style.overflow="",g)});function _(){typeof V=="function"&&V(),m("close")}function j(L){bi.call(this,n,L)}function N(L){bi.call(this,n,L)}function B(L){$t[L?"unshift":"push"](()=>{A=L,t(9,A)})}function X(L){$t[L?"unshift":"push"](()=>{pe=L,t(10,pe)})}return n.$$set=L=>{"tag"in L&&t(0,p=L.tag),"config"in L&&t(1,v=L.config),"triggerElement"in L&&t(26,b=L.triggerElement),"wrapperElement"in L&&t(25,g=L.wrapperElement),"popoverContainer"in L&&t(27,y=L.popoverContainer),"theme"in L&&t(2,E=L.theme),"visible"in L&&t(3,C=L.visible),"closePopover"in L&&t(28,V=L.closePopover),"audioInstance"in L&&t(4,M=L.audioInstance),"audioPlaying"in L&&t(5,z=L.audioPlaying),"audioCurrentTime"in L&&t(6,U=L.audioCurrentTime),"audioDuration"in L&&t(7,D=L.audioDuration)},n.$$.update=()=>{if(n.$$.dirty[0]&5&&t(18,r=Ge(E)?E:Ge(p.data.theme)&&["light","dark"].includes(p.data.theme)?p.data.theme:p.contentType==="Marketing"?"light":"dark"),n.$$.dirty[0]&2&&t(32,i=(v==null?void 0:v.placement)||"right-top"),n.$$.dirty[0]&2&&t(16,a=typeof(v==null?void 0:v.toolbar)=="boolean"?v.toolbar?{showMore:!0,showShare:!0}:{showMore:!1,showShare:!1}:(v==null?void 0:v.toolbar)||{showMore:!0,showShare:!0}),n.$$.dirty[1]&2&&(i==="auto"?t(8,$=F()):t(8,$=i)),n.$$.dirty[0]&2&&t(15,l=(v==null?void 0:v.transitionDuration)||350),n.$$.dirty[0]&67108865&&p.screenPosition&&b&&t(8,$=F()),n.$$.dirty[0]&536870912&&x.width>0&&x.height>0&&t(8,$=F()),n.$$.dirty[0]&67109121&&p.screenPosition&&$&&b){const L=b.getBoundingClientRect();L.width>0&&L.height>0&&t(30,S=R($,L))}n.$$.dirty[0]&1073741824&&t(14,u=S),n.$$.dirty[1]&1&&t(13,c=typeof o=="boolean"?o:!0),n.$$.dirty[0]&256&&t(12,d=(()=>{switch($){case"top":case"top-left":case"top-right":return"bottom";case"bottom":case"bottom-left":case"bottom-right":return"top";case"left":case"left-top":case"left-bottom":return"right";case"right":case"right-top":case"right-bottom":return"left";default:return"bottom"}})()),n.$$.dirty[0]&1&&t(11,h=p.contentType==="Audio"&&p.data.appearance==="plane")},t(31,o=!0),t(17,s=1060),[p,v,E,C,M,z,U,D,$,A,pe,h,d,c,u,l,a,s,r,T,ne,ce,Z,he,_,g,b,y,V,x,S,o,i,j,N,B,X]}class i_ extends Re{constructor(e){super(),Le(this,e,r_,n_,De,{tag:0,config:1,triggerElement:26,wrapperElement:25,popoverContainer:27,theme:2,visible:3,closePopover:28,audioInstance:4,audioPlaying:5,audioCurrentTime:6,audioDuration:7},t_,[-1,-1])}}function o_(n){Qe(n,"svelte-2g2g8a",".tag.svelte-2g2g8a{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto;will-change:opacity;transition:opacity 0.2s linear}.tag.enableZIndex.svelte-2g2g8a{position:absolute}.tag.hide.svelte-2g2g8a{opacity:0;pointer-events:none}.tag.hide.svelte-2g2g8a *{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a *{pointer-events:none !important}")}function M1(n){let e,t,r,i,o,s,a,l,u,c;const d=[a_,s_],h=[];function f(g,y){return g[10]?0:1}t=f(n),r=h[t]=d[t](n);const p=[u_,l_],v=[];function b(g,y){return g[25]?0:1}return o=b(n),s=v[o]=p[o](n),{c(){e=ie("div"),r.c(),i=$e(),s.c(),P(e,"class","tag svelte-2g2g8a"),P(e,"data-tag-id",n[23]),P(e,"data-tag-unfolded",n[8]),P(e,"data-content-type",a=n[0].contentType),P(e,"data-popover-enabled",l=n[0].isPopoverConfigEnabled()),P(e,"id",u=`tag-${n[23]}`),Se(e,"unClickable",n[0].config.clickable===!1),Se(e,"hide",n[21]),Se(e,"enableZIndex",n[18]),fe(e,"z-index",n[18]),fe(e,"transform",`translate3d(${n[20]}, ${n[19]}, 0) scale(${n[9].scale})`)},m(g,y){ae(g,e,y),h[t].m(e,null),Y(e,i),v[o].m(e,null),n[36](e),c=!0},p(g,y){let E=t;t=f(g),t===E?h[t].p(g,y):(Ie(),ee(h[E],1,1,()=>{h[E]=null}),je(),r=h[t],r?r.p(g,y):(r=h[t]=d[t](g),r.c()),q(r,1),r.m(e,i));let C=o;o=b(g),o===C?v[o].p(g,y):(Ie(),ee(v[C],1,1,()=>{v[C]=null}),je(),s=v[o],s?s.p(g,y):(s=v[o]=p[o](g),s.c()),q(s,1),s.m(e,null)),(!c||y[0]&8388608)&&P(e,"data-tag-id",g[23]),(!c||y[0]&256)&&P(e,"data-tag-unfolded",g[8]),(!c||y[0]&1&&a!==(a=g[0].contentType))&&P(e,"data-content-type",a),(!c||y[0]&1&&l!==(l=g[0].isPopoverConfigEnabled()))&&P(e,"data-popover-enabled",l),(!c||y[0]&8388608&&u!==(u=`tag-${g[23]}`))&&P(e,"id",u),(!c||y[0]&1)&&Se(e,"unClickable",g[0].config.clickable===!1),(!c||y[0]&2097152)&&Se(e,"hide",g[21]),(!c||y[0]&262144)&&Se(e,"enableZIndex",g[18]),y[0]&262144&&fe(e,"z-index",g[18]),y[0]&1573376&&fe(e,"transform",`translate3d(${g[20]}, ${g[19]}, 0) scale(${g[9].scale})`)},i(g){c||(q(r),q(s),c=!0)},o(g){ee(r),ee(s),c=!1},d(g){g&&oe(e),h[t].d(),v[o].d(),n[36](null)}}}function s_(n){let e;return{c(){e=ie("div"),P(e,"data-info","tag point is disable")},m(t,r){ae(t,e,r)},p:Ee,i:Ee,o:Ee,d(t){t&&oe(e)}}}function a_(n){let e,t,r;function i(s){n[34](s)}let o={tag:n[0],handleMouseEnter:n[30],handleMouseLeave:n[31],handleTagPointClick:n[32]};return n[12]!==void 0&&(o.tagPointClickHelper=n[12]),e=new iT({props:o}),$t.push(()=>Wp(e,"tagPointClickHelper",i)),n[35](e),e.$on("audioInstanceReady",n[27].audioInstanceReady),e.$on("audioPlay",n[27].audioPlay),e.$on("audioPause",n[27].audioPause),e.$on("audioTimeUpdate",n[27].audioTimeUpdate),e.$on("audioDuration",n[27].audioDuration),{c(){xe(e.$$.fragment)},m(s,a){be(e,s,a),r=!0},p(s,a){const l={};a[0]&1&&(l.tag=s[0]),!t&&a[0]&4096&&(t=!0,l.tagPointClickHelper=s[12],Fp(()=>t=!1)),e.$set(l)},i(s){r||(q(e.$$.fragment,s),r=!0)},o(s){ee(e.$$.fragment,s),r=!1},d(s){n[35](null),we(e,s)}}}function l_(n){let e;return{c(){e=ie("div"),P(e,"data-info","tag content is disable")},m(t,r){ae(t,e,r)},p:Ee,i:Ee,o:Ee,d(t){t&&oe(e)}}}function u_(n){let e,t;return e=new fv({props:{mediaStore:n[1],tag:At(n[0]),hooks:n[26],state:n[4],temporaryState:n[5],rendererMap:n[2],contentTypeMap:n[3]}}),{c(){xe(e.$$.fragment)},m(r,i){be(e,r,i),t=!0},p(r,i){const o={};i[0]&2&&(o.mediaStore=r[1]),i[0]&1&&(o.tag=At(r[0])),i[0]&16&&(o.state=r[4]),i[0]&32&&(o.temporaryState=r[5]),i[0]&4&&(o.rendererMap=r[2]),i[0]&8&&(o.contentTypeMap=r[3]),e.$set(o)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function V1(n){var e;let t,r;return t=new i_({props:{tag:n[0],config:n[0].config.popoverConfig,theme:(e=n[0].config.popoverConfig)==null?void 0:e.theme,wrapperElement:n[6],triggerElement:n[12],popoverContainer:n[7],visible:!0,closePopover:n[33],audioInstance:n[14],audioPlaying:n[15],audioCurrentTime:n[16],audioDuration:n[17]}}),t.$on("mouseenter",n[28]),t.$on("mouseleave",n[29]),t.$on("close",n[33]),{c(){xe(t.$$.fragment)},m(i,o){be(t,i,o),r=!0},p(i,o){var s;const a={};o[0]&1&&(a.tag=i[0]),o[0]&1&&(a.config=i[0].config.popoverConfig),o[0]&1&&(a.theme=(s=i[0].config.popoverConfig)==null?void 0:s.theme),o[0]&64&&(a.wrapperElement=i[6]),o[0]&4096&&(a.triggerElement=i[12]),o[0]&128&&(a.popoverContainer=i[7]),o[0]&16384&&(a.audioInstance=i[14]),o[0]&32768&&(a.audioPlaying=i[15]),o[0]&65536&&(a.audioCurrentTime=i[16]),o[0]&131072&&(a.audioDuration=i[17]),t.$set(a)},i(i){r||(q(t.$$.fragment,i),r=!0)},o(i){ee(t.$$.fragment,i),r=!1},d(i){we(t,i)}}}function c_(n){var e;let t,r=n[0].isPopoverConfigEnabled()&&n[24]&&(n[11]||((e=n[0].config.popoverConfig)==null?void 0:e.debug)),i,o,s=n[9]&&(!n[22]||n[11])&&M1(n),a=r&&V1(n);return{c(){s&&s.c(),t=$e(),a&&a.c(),i=at()},m(l,u){s&&s.m(l,u),ae(l,t,u),a&&a.m(l,u),ae(l,i,u),o=!0},p(l,u){var c;l[9]&&(!l[22]||l[11])?s?(s.p(l,u),u[0]&4196864&&q(s,1)):(s=M1(l),s.c(),q(s,1),s.m(t.parentNode,t)):s&&(Ie(),ee(s,1,1,()=>{s=null}),je()),u[0]&16779265&&(r=l[0].isPopoverConfigEnabled()&&l[24]&&(l[11]||((c=l[0].config.popoverConfig)==null?void 0:c.debug))),r?a?(a.p(l,u),u[0]&16779265&&q(a,1)):(a=V1(l),a.c(),q(a,1),a.m(i.parentNode,i)):a&&(Ie(),ee(a,1,1,()=>{a=null}),je())},i(l){o||(q(s),q(a),o=!0)},o(l){ee(s),ee(a),o=!1},d(l){s&&s.d(l),l&&oe(t),a&&a.d(l),l&&oe(i)}}}function d_(n,e,t){let r,i,o,s,a,l,u,c,d,h,f,{tag:p}=e,{mediaStore:v}=e,{rendererMap:b=new Map}=e,{contentTypeMap:g=new Map}=e,{state:y}=e,{temporaryState:E}=e,{wrapperElement:C=null}=e,{popoverContainer:V=null}=e;const M=Ur("hooks");let z=!1,U,D,m=null,A=!1,x=!1,S=null,$=null,T=!1,F=0,R=0;const ne={audioInstanceReady:L=>{t(14,$=L.detail),t(15,T=!$.paused)},audioPlay:()=>{t(15,T=!0)},audioPause:()=>{t(15,T=!1)},audioTimeUpdate:L=>{t(16,F=L.detail)},audioDuration:L=>{t(17,R=L.detail)}};let ce=!1;const Z=L=>{if(D&&clearTimeout(D),L===!0&&!ce){ce=!0,t(11,z=!0);return}D=setTimeout(()=>{var G;!A&&!x&&!((G=p.config.popoverConfig)!=null&&G.debug)&&(ce=!1,t(11,z=!1))},300)},he=()=>{A=!0,D&&clearTimeout(D)},pe=()=>{A=!1,Z(!1)},ge=L=>{var G,K,J,re,te,se;if(x=!0,p.isPopoverConfigEnabled()&&p.isHoverEnabled()&&((K=(G=p.currentConfig)==null?void 0:G.popoverConfig)==null?void 0:K.trigger)==="hover"){if(D&&clearTimeout(D),U!==void 0)return;((re=(J=p.currentConfig)==null?void 0:J.popoverConfig)==null?void 0:re.triggerDelay)>0?U=setTimeout(()=>{Z(!0),p.hooks.emit("hover",{event:L,tag:p}),U=void 0},(se=(te=p.currentConfig)==null?void 0:te.popoverConfig)==null?void 0:se.triggerDelay):(Z(!0),p.hooks.emit("hover",{event:L,tag:p}))}},Me=L=>{var G,K;x=!1,p.isHoverEnabled()&&p.isPopoverConfigEnabled()&&((K=(G=p.currentConfig)==null?void 0:G.popoverConfig)==null?void 0:K.trigger)==="hover"&&(U!==void 0&&(clearTimeout(U),U=void 0),Z(!1))},_=L=>{var G,K;const J=p.contentType==="Audio"&&p.data.appearance==="plane";p.isPopoverConfigEnabled()&&p.isHoverEnabled()&&((K=(G=p.currentConfig)==null?void 0:G.popoverConfig)==null?void 0:K.trigger)==="click"&&(J?z||(t(11,z=!0),p.hooks.emit("hover",{event:L,tag:p})):(t(11,z=!z),z&&p.hooks.emit("hover",{event:L,tag:p})))};function j(){ce=!1,t(11,z=!1)}lo(()=>()=>{U&&clearTimeout(U),D&&clearTimeout(D)});function N(L){m=L,t(12,m)}function B(L){$t[L?"unshift":"push"](()=>{S=L,t(13,S)})}function X(L){$t[L?"unshift":"push"](()=>{p.dom=L,t(0,p)})}return n.$$set=L=>{"tag"in L&&t(0,p=L.tag),"mediaStore"in L&&t(1,v=L.mediaStore),"rendererMap"in L&&t(2,b=L.rendererMap),"contentTypeMap"in L&&t(3,g=L.contentTypeMap),"state"in L&&t(4,y=L.state),"temporaryState"in L&&t(5,E=L.temporaryState),"wrapperElement"in L&&t(6,C=L.wrapperElement),"popoverContainer"in L&&t(7,V=L.popoverContainer)},n.$$.update=()=>{var L,G,K,J;n.$$.dirty[0]&5&&t(10,r=(()=>{var re,te,se;return((te=(re=p.style)==null?void 0:re.point)==null?void 0:te.enabled)===!1||((se=b.get(p.contentType))==null?void 0:se.usePoint)===!1||p.contentType==="Sticker"||p.contentType==="Link"||p.contentType==="VRLink"||p.contentType==="PanoLink"?!1:p.contentType==="Panorama"?!0:p.contentType==="Audio"&&p.data.appearance==="plane"?p.isPopoverConfigEnabled():!0})()),n.$$.dirty[0]&1025&&t(25,i=!(p.isPopoverConfigEnabled()&&p.contentType==="Panorama"||p.isPopoverConfigEnabled()&&p.contentType==="ImageText"||p.isPopoverConfigEnabled()&&p.contentType==="Text"||p.isPopoverConfigEnabled()&&p.contentType==="Audio"||p.stickType!=="2DPoint"||p.entryFromModel&&Ar(p.five.state.mode)&&r)),n.$$.dirty[0]&1&&t(24,o=(()=>{var re;return p.contentType==="Marketing"?!!(p.data.title||p.data.name||p.data.description||p.data.tooltip||(re=p.data.price)!=null&&re.value||p.data.brandTags&&p.data.brandTags.length>0||p.data.tags&&p.data.tags.length>0||p.data.imageUrl||p.data.mediaUrl||p.data.mediaData&&p.data.mediaData.length>0):!!(p.data.title||p.data.name||p.data.text||p.data.description||p.data.tooltip||p.data.imageUrl||p.data.mediaUrl||p.data.mediaData&&p.data.mediaData.length>0)})()),n.$$.dirty[0]&1&&t(23,s=p.id),n.$$.dirty[0]&1&&t(9,a=p.screenPosition),n.$$.dirty[0]&1&&t(22,l=p.enabled===!1||!p.state),n.$$.dirty[0]&513&&t(21,u=!((L=p.state)!=null&&L.visible)||((G=p.temporaryState)==null?void 0:G.visible)===!1||!a),n.$$.dirty[0]&1&&t(8,c=((K=p.state)==null?void 0:K.unfolded)&&!p.isPopoverConfigEnabled()),n.$$.dirty[0]&512&&t(20,d=(a==null?void 0:a.leftPx)+"px"),n.$$.dirty[0]&512&&t(19,h=(a==null?void 0:a.topPx)+"px"),n.$$.dirty[0]&257&&t(18,f=c?((J=p.zIndex)!=null?J:0)+(c?1e6:0):void 0)},[p,v,b,g,y,E,C,V,c,a,r,z,m,S,$,T,F,R,f,h,d,u,l,s,o,i,M,ne,he,pe,ge,Me,_,j,N,B,X]}class h_ extends Re{constructor(e){super(),Le(this,e,d_,c_,De,{tag:0,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,wrapperElement:6,popoverContainer:7},o_,[-1,-1])}}let ni=null;function f_(n=2e6){return ni&&document.body.contains(ni)?(ni.style.zIndex=String(n),ni):(ni=document.createElement("div"),ni.className="tag-popover-container",Object.assign(ni.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:String(n),pointerEvents:"none",overflow:"hidden"}),document.body.appendChild(ni),ni)}function p_(n){Qe(n,"svelte-9ehqs9",".tag--container.svelte-9ehqs9{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0);transition:opacity 0.2s linear;overflow:hidden}.tag--container.hide.svelte-9ehqs9{opacity:0 !important;pointer-events:none}.tag--container.hide.svelte-9ehqs9 *{pointer-events:none !important}")}function T1(n,e,t){const r=n.slice();return r[12]=e[t],r}function _1(n){let e,t=[],r=new Map,i,o,s,a=n[0];const l=u=>u[12].id;for(let u=0;u<a.length;u+=1){let c=T1(n,a,u),d=l(c);r.set(d,t[u]=k1(d,c))}return{c(){var u;e=ie("div");for(let c=0;c<t.length;c+=1)t[c].c();P(e,"class","tag--container svelte-9ehqs9"),P(e,"data-infive",i=!n[4].visible||!n[5].visible?"1":"0"),Se(e,"hide",!n[4].visible||!n[5].visible),fe(e,"z-index",(u=n[6])!=null?u:"")},m(u,c){ae(u,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);n[10](e),s=!0},p(u,c){var d;c&447&&(a=u[0],Ie(),t=Np(t,c,l,1,u,a,r,e,Kb,k1,null,T1),je()),(!s||c&48&&i!==(i=!u[4].visible||!u[5].visible?"1":"0"))&&P(e,"data-infive",i),(!s||c&48)&&Se(e,"hide",!u[4].visible||!u[5].visible),c&64&&fe(e,"z-index",(d=u[6])!=null?d:"")},i(u){if(!s){for(let c=0;c<a.length;c+=1)q(t[c]);o||kn(()=>{o=Xo(e,Lo,{}),o.start()}),s=!0}},o(u){for(let c=0;c<t.length;c+=1)ee(t[c]);s=!1},d(u){u&&oe(e);for(let c=0;c<t.length;c+=1)t[c].d();n[10](null)}}}function k1(n,e){let t,r,i;return r=new h_({props:{state:e[4],temporaryState:e[5],tag:e[12],mediaStore:e[1],rendererMap:e[2],contentTypeMap:e[3],wrapperElement:e[7],popoverContainer:e[8]}}),{key:n,first:null,c(){t=at(),xe(r.$$.fragment),this.first=t},m(o,s){ae(o,t,s),be(r,o,s),i=!0},p(o,s){e=o;const a={};s&16&&(a.state=e[4]),s&32&&(a.temporaryState=e[5]),s&1&&(a.tag=e[12]),s&2&&(a.mediaStore=e[1]),s&4&&(a.rendererMap=e[2]),s&8&&(a.contentTypeMap=e[3]),s&128&&(a.wrapperElement=e[7]),s&256&&(a.popoverContainer=e[8]),r.$set(a)},i(o){i||(q(r.$$.fragment,o),i=!0)},o(o){ee(r.$$.fragment,o),i=!1},d(o){o&&oe(t),we(r,o)}}}function v_(n){let e,t,r=n[4].enabled&&_1(n);return{c(){r&&r.c(),e=at()},m(i,o){r&&r.m(i,o),ae(i,e,o),t=!0},p(i,[o]){i[4].enabled?r?(r.p(i,o),o&16&&q(r,1)):(r=_1(i),r.c(),q(r,1),r.m(e.parentNode,e)):r&&(Ie(),ee(r,1,1,()=>{r=null}),je())},i(i){t||(q(r),t=!0)},o(i){ee(r),t=!1},d(i){r&&r.d(i),i&&oe(e)}}}function m_(n,e,t){let{tags:r=[]}=e,{hooks:i}=e,{mediaStore:o}=e,{rendererMap:s}=e,{contentTypeMap:a}=e,{state:l}=e,{temporaryState:u}=e,{zIndex:c=void 0}=e,d=null,h=null,f=2e3;uc("hooks",i),uc("mediaStore",o),lo(()=>{t(8,h=f_(f))});function p(v){$t[v?"unshift":"push"](()=>{d=v,t(7,d)})}return n.$$set=v=>{"tags"in v&&t(0,r=v.tags),"hooks"in v&&t(9,i=v.hooks),"mediaStore"in v&&t(1,o=v.mediaStore),"rendererMap"in v&&t(2,s=v.rendererMap),"contentTypeMap"in v&&t(3,a=v.contentTypeMap),"state"in v&&t(4,l=v.state),"temporaryState"in v&&t(5,u=v.temporaryState),"zIndex"in v&&t(6,c=v.zIndex)},n.$$.update=()=>{var v,b,g,y;n.$$.dirty&1&&r&&r.length>0&&(f=(y=(g=(b=(v=r[0])==null?void 0:v.config)==null?void 0:b.popoverConfig)==null?void 0:g.zIndex)!=null?y:2e6)},[r,o,s,a,l,u,c,d,h,i,p]}class g_ extends Re{constructor(e){super(),Le(this,e,m_,v_,De,{tags:0,hooks:9,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,zIndex:6},p_)}}var y_=Object.defineProperty,A_=Object.defineProperties,b_=Object.getOwnPropertyDescriptors,I1=Object.getOwnPropertySymbols,w_=Object.prototype.hasOwnProperty,x_=Object.prototype.propertyIsEnumerable,xf=(n,e,t)=>e in n?y_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,du=(n,e)=>{for(var t in e||(e={}))w_.call(e,t)&&xf(n,t,e[t]);if(I1)for(var t of I1(e))x_.call(e,t)&&xf(n,t,e[t]);return n},j1=(n,e)=>A_(n,b_(e)),xn=(n,e,t)=>(xf(n,typeof e!="symbol"?e+"":e,t),t),ri=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const P_="Dnalogel-PanoTagPlugin";class E_ extends O6{constructor(e,t){super(e),xn(this,"state",{enabled:!0,visible:!0}),xn(this,"debug"),xn(this,"debugUtil",new T6(this)),xn(this,"globalHoverEnabled",!0),xn(this,"changeTagModel",(r,i)=>ri(this,null,function*(){var o;r.data=xt({},r.data,i),yield(o=r.loadModel)==null?void 0:o.call(r)})),xn(this,"handleFiveModeChange",r=>{const i=()=>{this.filter2DPointTag.forEach(o=>{o.state.visible=!1,o.applyVisible()}),this.five.ready().then(()=>{this.tagsDo(this.tags,o=>{o.updateVisible(),To(o)&&r!=="Panorama"&&this.changeTagMode(o,"behind")})})};this.tags.length<500?i():this.five.ready().then(()=>i())}),xn(this,"handleFiveWantsMoveToPano",r=>{if(this.tags.length>500){this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]});return}else this.temporaryState.visible=!0,this.tags.forEach(i=>{i.temporaryState.visible=!0}),this.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.tags.forEach(i=>i.applyVisible())}),xn(this,"clickhandler",r=>{r.tag.onClick(r)}),xn(this,"handleFiveCameraUpdate",()=>{this.filterPointTag.forEach(r=>r.updateScreenPosition())}),xn(this,"handleFiveCameraFovUpdate",()=>{this.handleFiveCameraUpdate(),this.five.off("render.prepare",this.handleFiveCameraUpdate),this.five.on("render.prepare",this.handleFiveCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.handleFiveCameraUpdate)},1e3)}),xn(this,"handleFivePanoArrived",()=>ri(this,null,function*(){this.filter2DPointTag.forEach(r=>{r.state.visible=!1,r.applyVisible()}),this.tagsDo(this.tags,r=>{r.updateVisible()}),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}),yield this.setUnfolded(),this.tags.filter(G8).filter(r=>{var i;return(i=r.getConfig().modelConfig)==null?void 0:i.autoLookAtEnabled}).forEach(r=>{var i;const o=new nt(new Jy,new st),s=(i=r.model)==null?void 0:i.object;if(!s)return;o.position.copy(s.position),o.quaternion.copy(s.quaternion);const a=this.five.camera.position;o.lookAt(a.clone().setY(o.position.y));const l=s.quaternion.clone(),u=o.quaternion.clone(),c=rC();c.onUpdate(({progress:d})=>{s.quaternion.copy(l.clone().slerp(u,d))}),c.play()})})),xn(this,"handleFiveModelShownFloorChange",()=>{this.tagsDo(this.tags,r=>r.updateVisible())}),xn(this,"onFiveRefined",Ag(()=>{Ar(this.five.getCurrentState().mode)?this.setUnfoldedByCamera():this.tags.forEach(r=>r.cache.clear()),this.tagsDo(this.tags,r=>r.updateVisible())})),xn(this,"onFiveEveryReady",()=>{this.setUnfoldedByCamera(),Ar(this.five.getCurrentState().mode)&&this.tagsDo(this.tags,r=>r.updateVisible())}),xn(this,"render",()=>{this.renderQueue.forEach((r,i)=>{const{keys:o}=r;if(i==="TagContainerSvelte"){const s=this.filterPointTag.filter(l=>l.screenPosition),a={hooks:this.hooks,tags:s,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore,rendererMap:this.rendererMap,contentTypeMap:this.contentTypeMap,zIndex:this.params.containerZIndex};if(this.TagContainerSvelte){let l={};if(o.length===0)l=a;else for(const u of o)l[u]=a[u];this.TagContainerSvelte.$set(l)}else{if(!this.container)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new g_({target:this.container,props:j1(du({},a),{state:j1(du({},this.state),{enabled:!1})})}),cw(()=>{var l;(l=this.TagContainerSvelte)==null||l.$set({state:this.state})})}}}),this.renderQueue.clear()}),this.params=xt({},{debug:!1,config:this.config},du({},t)),this.debug=this.params.debug,this.config=this.params.config,this.debug&&this.debugUtil.bindLog(),Z8(1,{namespace:tv.PlayAudio});try{Array.isArray(window.__PANOTAGPLUGIN_DEBUG_LIST__)||(window.__PANOTAGPLUGIN_DEBUG_LIST__=[]),this.NAME=P_+"-"+window.__PANOTAGPLUGIN_DEBUG_LIST__.length,window.__PANOTAGPLUGIN_DEBUG_LIST__.push(this),window.__PANOTAGPLUGIN_DEBUG__||Object.defineProperty(window,"__PANOTAGPLUGIN_DEBUG__",{get:function(){return window.__PANOTAGPLUGIN_DEBUG_LIST__.sort((r,i)=>i.tags.length-r.tags.length)[0]}})}catch{}}appendTo(e){var t,r,i;this.container=e;const o=(r=(t=this.TagContainerSvelte)==null?void 0:t.$$)==null?void 0:r.root;o&&o!==this.container&&((i=this.TagContainerSvelte)==null||i.$destroy(),this.TagContainerSvelte=void 0)}load(e){return ri(this,null,function*(){var t,r;this.clearTags();try{console.debug(this.NAME," load:",{data:JSON.parse(JSON.stringify(e))})}catch{}this.config=xt({},this.config,{globalConfig:(t=e.globalConfig)!=null?t:{},contentTypeConfig:(r=e.contentTypeConfig)!=null?r:{}});const i=yield this.addTag(e.tagList);return this.hooks.emit("loaded"),i})}addTag(e){return ri(this,null,function*(){const t=(Array.isArray(e)?e:[e]).filter(r=>r.position).map(r=>{const i=ev(r);if(i==="2DPoint"||i==="3DPoint")return new J6(this,r);if(i==="Model")return new l2(this,r);if(i==="Plane")return new WV(this,r)});return t.forEach(q8),this.tags.push(...t),this.tagsLengthWillUpdate=!0,Do(this.five).then(()=>ri(this,null,function*(){var r,i;this.store.eventListenerDisposer&&((i=(r=this.store).eventListenerDisposer)==null||i.call(r)),this.state.enabled&&this.handleEnable(),this.addResizeListener(),this.clearUnusedPanelTag(),this.tagsDo(t,o=>{this.tags.includes(o)&&(o.updateVisible(),o.updateZIndex())}),this.setUnfolded(),this.addRenderQueue({type:"TagContainerSvelte"}),this.hooks.emit("tagsLengthChange")}))})}changeConfig(e,t=!0){t?this.config=xt({},this.config,e):this.config=e,this.tags.forEach(r=>{r.updateConfig()}),this.tagsDo(this.tags,r=>r.updateVisible())}changeGlobalConfig(e,t=!0){t?this.config.globalConfig=xt({},this.config.globalConfig,e):this.config.globalConfig=e,this.tags.forEach(r=>{r.updateConfig()}),this.tagsDo(this.tags,r=>{r.updateVisible()})}changeContentTypeConfig(e,t,r=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),r?this.config.contentTypeConfig[e]=xt({},this.config.contentTypeConfig[e],t):this.config.contentTypeConfig[e]=t,this.tags.forEach(i=>{i.updateConfig()}),this.tagsDo(this.tags,i=>{i.updateVisible()})}show(e){return ri(this,null,function*(){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({visible:!0},{userAction:t}),this.hooks.emit("show",{userAction:t})})}hide(e){return ri(this,null,function*(){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({visible:!1},{userAction:t}),this.hooks.emit("hide",{userAction:t})})}enable(e){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({enabled:!0},{userAction:t}),this.hooks.emit("enable",{userAction:t})}disable(e){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({enabled:!1},{userAction:t}),this.hooks.emit("disable",{userAction:t})}setState(e,t){if(this.checkDisposed())return;const{userAction:r=!0}=t??{},i=du({},this.state);this.state=Object.assign(this.state,e),i.visible!==this.state.visible&&(e.visible?this.handleShow():this.handleHide()),i.enabled!==this.state.enabled&&(e.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:i,userAction:r})}dispose(){var e,t,r,i,o,s;this.pauseCurrentMedia(),this.disposeAllCSS3DContainer(),(e=this.TagContainerSvelte)==null||e.$destroy(),this.filterCSS3DTag.forEach(a=>{var l;return(l=a.tag3DContentSvelte)==null?void 0:l.svelteApp.$destroy()}),this.tags.forEach(a=>a.cache.clear()),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(t=this.store.disposers)==null||t.forEach(a=>a==null?void 0:a()),this.store.disposers=[],(i=(r=this.store).eventListenerDisposer)==null||i.call(r),this.store.eventListenerDisposer=void 0,(s=(o=this.store).resizeObserverDisposer)==null||s.call(o),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.gltfObjectGroup.remove(...this.gltfObjectGroup.children),this.imagePlaneGroup.remove(...this.imagePlaneGroup.children),this.five.needsRender=!0,this.store.disposed=!0,this.hooks.emit("dispose")}blinkTagById(e,t){return ri(this,null,function*(){var r;return(r=this.getTagById(e))==null?void 0:r.blink(t)})}changeUnfoldedById(e,t){const r=this.getTagById(e);t?r==null||r.unfold():r==null||r.fold()}changeEnabledById(e,t){var r;const i=this.getTagById(e);i&&(i.enabled=t,(r=i.hooks)==null||r.emit(t?"enable":"disable"))}changeTagNormalById(e,t){const r=this.getTagById(e);r&&r.tag3DContentSvelte&&(r.tag3DContentSvelte.currentNormal=qi(t))}changePositionById(e,t){const r=this.getTagById(e);r&&r.setPosition(t)}changeDataById(e,t,r=!0){const i=this.getTagById(e);i&&(i.setData(t,r),this.clearUnusedPanelTag(),i.hooks.emit("dataChanged",i.data))}changeStickTypeById(e,t,r=!0){this.changeTagById(e,t,r)}changeTagById(e,t,r=!0){const i=this.getTagById(e);i&&(i.set(t),i.updateVisible(),this.clearUnusedPanelTag(),i.hooks.emit("dataChanged",i.data))}destroyTagById(e){(Array.isArray(e)?e:[e]).forEach(t=>{var r;return(r=this.getTagById(t))==null?void 0:r.destroy()})}updateRenderAllTags(){this.tagsDo(this.tags,e=>e.updateVisible()),this.five.needsRender=!0}clearTags(){var e;this.tags.length&&(this.tags.forEach(t=>{var r,i,o,s,a,l;(r=t.tag3DContentSvelte)==null||r.dispose(),(o=(i=t.mediaPlane)==null?void 0:i.parent)==null||o.remove(t.mediaPlane),(l=(a=(s=t.model)==null?void 0:s.object)==null?void 0:a.parent)==null||l.remove(t.model.object)}),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(e=this.TagContainerSvelte)==null||e.$destroy(),this.TagContainerSvelte=void 0,this.disposeAllCSS3DContainer()),this.enabledModelTagSet.clear(),this.cache.clear()}setUnfolded(){return ri(this,null,function*(){return new Promise(e=>{setTimeout(()=>{this.setUnfoldedByCamera(),e()},100)})})}handleShow(){this.state.visible=!0,this.group.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.updateRenderAllTags(),this.five.needsRender=!0}handleHide(){this.pauseCurrentMedia(),this.state.visible=!1,this.group.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.five.needsRender=!0}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.five.scene.children.includes(this.group)||this.five.scene.add(this.group),this.five.needsRender=!0}handleDisable(){var e,t,r;this.pauseCurrentMedia(),this.state.enabled=!1,(t=(e=this.store).eventListenerDisposer)==null||t.call(e),this.five.scene.remove(this.group),(r=this.TagContainerSvelte)==null||r.$set({tags:[]}),this.five.needsRender=!0}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const e=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=e,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(this.store.disposed)return;const e=this.five.getElement(),t=()=>{this.state.enabled&&(this.filterPointTag.forEach(l=>l.updateScreenPosition({force:!0})),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},r=()=>{this.state.enabled&&(this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},{observe:i,unobserve:o}=Th(X8(()=>{this.store.resizeObserverDisposer&&r()},500),e),{observe:s,unobserve:a}=Th(Ag(()=>t(),400),e);return i(),s(),()=>{o(),a()}}setUnfoldedByCamera(){let e=!1;this.filterPointTag.forEach(t=>{const r=t.getUnfoldedByCamera();if(t.state&&r!==void 0){if(r===!0&&t.screenPosition){const i=t.getConfig().unfoldedConfig;Al(i).keep!=="unfolded"&&(e=!0)}t.state.unfolded=r}}),e&&this.filterPointTag.forEach(t=>{const r=t.getConfig().unfoldedConfig;typeof r=="object"&&(r.autoUnfold||r.autoUnfold===!1||Al(r.autoUnfold).enable===!1||r.keep)||t.state&&(t.state.unfolded=!1)})}changeTagMode(e,t){var r;(r=e.tag3DContentSvelte)!=null&&r.css3DInstance&&(e.tag3DContentSvelte.css3DInstance.mode=t)}addEventListener(){const{five:e,hooks:t}=this,r=mb(this.five,this.onFiveEveryReady);return this.handleFivePanoArrived(),e.on("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.on("models.refined",this.onFiveRefined),e.on("modeChange",this.handleFiveModeChange),e.on("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.on("cameraUpdate",this.handleFiveCameraUpdate),e.on("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.on("panoArrived",this.handleFivePanoArrived),e.on("panoArrived",this.loadVideoFirstFrame),e.on("render.prepare",this.render),t.on("click",this.clickhandler),()=>{r(),e.off("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.off("models.refined",this.onFiveRefined),e.off("modeChange",this.handleFiveModeChange),e.off("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.off("cameraUpdate",this.handleFiveCameraUpdate),e.off("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.off("panoArrived",this.handleFivePanoArrived),e.off("panoArrived",this.loadVideoFirstFrame),e.off("render.prepare",this.render),t.off("click",this.clickhandler),this.store.eventListenerDisposer=void 0}}setTagHoverEnabled(e,t){const r=this.getTagById(e);r&&(r.hoverEnabled=t)}getTagHoverEnabled(e){const t=this.getTagById(e);return t==null?void 0:t.hoverEnabled}setGlobalHoverEnabled(e){this.globalHoverEnabled=e}getGlobalHoverEnabled(){return this.globalHoverEnabled}}const C_=(n,e)=>new E_(n,e);function pv(n,e,t){if(t){const r=new H().subVectors(n.position,t).applyQuaternion(n.quaternion.clone().inverse()).applyQuaternion(e).add(t);n.position.copy(r)}n.quaternion.copy(e)}var S_=Object.defineProperty,O_=(n,e,t)=>e in n?S_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bd=(n,e,t)=>(O_(n,typeof e!="symbol"?e+"":e,t),t);let jl=class extends Er{constructor(e,t){var r,i;super(),Bd(this,"originObject3D"),Bd(this,"onRender"),Bd(this,"positionFrom"),this.originObject3D=e,this.onRender=(r=t==null?void 0:t.onRender)!=null?r:()=>{},this.positionFrom=(i=t==null?void 0:t.positionFrom)!=null?i:"objectPosition"}get helperObject(){return this}render(){this.onRender()}enable(){this.parent.children.includes(this)||this.parent.add(this)}disable(){this.removeFromParent()}show(){this.visible=!0,this.render()}hide(){this.visible=!1,this.render()}raycasterIntersectObject(e,t=[]){return e.intersectObject(this,!0,t)}initialPosition(e){var t,r;this.positionFrom==="objectPosition"?this.position.copy(this.originObject3D.position):this.positionFrom==="boundingBox"?this.position.copy((t=jp(this.originObject3D))==null?void 0:t.getCenter(new H).applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom==="boundingSphere"?this.position.copy((r=sE(this.originObject3D))==null?void 0:r.center.clone().applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom instanceof H?this.position.copy(this.positionFrom):this.positionFrom instanceof Function&&this.position.copy(this.positionFrom(this.originObject3D)),e&&this.position.add(e)}setScaleByCamera(e){}initQuaternion(e){if(this.quaternion.copy(this.originObject3D.quaternion),e&&(e.xAxis||e.yAxis||e.zAxis)){const t=e.xAxis instanceof Function?e.xAxis():e.xAxis,r=e.yAxis instanceof Function?e.yAxis():e.yAxis,i=e.zAxis instanceof Function?e.zAxis():e.zAxis;let o=t==null?void 0:t.clone(),s=r==null?void 0:r.clone(),a=i==null?void 0:i.clone();if(o&&!s&&!s){const l=new on().setFromUnitVectors(new H(1,0,0),o.normalize());this.applyQuaternion(l)}if(s&&!o&&!a){const l=new on().setFromUnitVectors(new H(0,1,0),s.normalize());this.applyQuaternion(l)}if(a&&!o&&!s){const l=new on().setFromUnitVectors(new H(0,0,1),a.normalize());this.applyQuaternion(l)}if([o,s,a].filter(Ge).length>=2){o||(o=new H().crossVectors(s,a).normalize()),s||(s=new H().crossVectors(o,a).normalize()),a||(a=new H().crossVectors(o,s).normalize()),o.applyQuaternion(this.quaternion),s.applyQuaternion(this.quaternion),a.applyQuaternion(this.quaternion);const l=new Ue().makeBasis(o,s,a),u=new on().setFromRotationMatrix(l);this.quaternion.copy(u)}}}applyHelperScaleMatrix4(e,t){this.scale.applyMatrix4(e)}setHelperQuaternion(e,t){this.initQuaternion(),pv(this,this.quaternion.clone().premultiply(e),t)}applyHelperQuaternion(e,t){if(t){const r=new H().subVectors(this.position,t).applyQuaternion(e).add(t);this.position.copy(r)}this.applyQuaternion(e)}dispose(){this.removeFromParent()}},$_=class extends jl{},M_=class extends jl{},V_=class extends jl{},T_=class extends jl{},__=class extends jl{};var k_=Object.defineProperty,I_=(n,e,t)=>e in n?k_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,h2=(n,e,t)=>(I_(n,e+"",t),t);let j_=class extends Zt{constructor(e){super(),h2(this,"direction"),this.direction=e||"x"}},D1=class extends nt{constructor(e,t,r){super(e,t),h2(this,"direction"),this.direction=r||"x"}};var D_=Object.defineProperty,L_=(n,e,t)=>e in n?D_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vs=(n,e,t)=>(L_(n,typeof e!="symbol"?e+"":e,t),t);let Fd=class extends j_{constructor(e){var t;super(e.direction),vs(this,"line"),vs(this,"arrow"),vs(this,"lineHeight",.4),vs(this,"arrowHeight",.1),vs(this,"renderOrder",50),vs(this,"name","ArrowGroup");const r=new qe((t=e.color)!=null?t:16214315),i=new st({color:r,depthTest:!1,depthWrite:!1,transparent:!0}),o=new u3(.04,.1,32),s=new D1(o,i.clone(),e.direction);s.name=`arrow-${e.direction}`,this.arrow=s;const a=.004,l=new Zy(a,a,.4,32),u=new D1(l,i.clone(),e.direction);u.name=`line-${e.direction}`,this.line=u,this.formatArrow(),this.formatLine(),this.add(this.arrow,this.line)}formatArrow(){this.arrow.geometry.translate(0,this.lineHeight+this.arrowHeight/2,0),this.direction==="x"?(this.arrow.geometry.rotateX(Math.PI/2),this.arrow.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.arrow.geometry.rotateX(Math.PI/2)}formatLine(){this.line.geometry.translate(0,this.lineHeight/2,0),this.direction==="x"?(this.line.geometry.rotateX(Math.PI/2),this.line.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.line.geometry.rotateX(Math.PI/2)}};const Hd={X:15618642,Y:4765519,Z:4227839};let zs=class{static get X(){return new qe(Hd.X).convertSRGBToLinear().clone()}static get Y(){return new qe(Hd.Y).convertSRGBToLinear().clone()}static get Z(){return new qe(Hd.Z).convertSRGBToLinear().clone()}};function vv(n,e,t){const r=n.position.distanceTo(e),i=n.fov,o=n.distance||3,s=r/3,a=i/90,l=o/3,u=s*a*l,c=(t==null?void 0:t.min)||.6,d=t==null?void 0:t.max;return c&&u<c?c:d&&u>d?d:u}function R_(n,e,t){return n<e?e:n>t?t:n}function z_(n){let e=n.pose.latitude,t=n.pose.longitude;if(Yi(e)||Yi(t)){const r=n.matrix.elements;e=Math.asin(R_(r[9],-1,1)),Math.abs(r[9])<.9999999?t=ff(Math.atan2(r[8],r[10])):t=ff(Math.atan2(-r[2],r[0]))}return{latitude:e,longitude:t}}function B_(n){const{latitude:e,longitude:t}=n,r=new H;return L1-e<.03?r.set(0,1,0):Ud(0,t)?r.set(0,0,1):Ud(Math.PI,t)?r.set(0,0,-1):Ud(L1,t)?r.set(1,0,0):r.set(-1,0,0),r}const L1=Number((Math.PI/2).toFixed(5));function Ud(n,e){return typeof n!="number"||typeof e!="number"?!1:Math.abs(n-e)<.001}var F_=Object.defineProperty,H_=(n,e,t)=>e in n?F_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hu=(n,e,t)=>(H_(n,typeof e!="symbol"?e+"":e,t),t);let U_=class extends $_{constructor(e,t){super(e,t),hu(this,"name","MoveHelper"),hu(this,"xArrow"),hu(this,"yArrow"),hu(this,"zArrow"),t.xArrowEnable!==!1&&(this.xArrow=new Fd({direction:"x",color:zs.X})),t.yArrowEnable!==!1&&(this.yArrow=new Fd({direction:"y",color:zs.Y})),t.zArrowEnable!==!1&&(this.zArrow=new Fd({direction:"z",color:zs.Z})),this.add(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean))}update(e){if(this.xArrow&&(this.xArrow.visible=!0),this.yArrow&&(this.yArrow.visible=!0),this.zArrow&&(this.zArrow.visible=!0),e.type==="OrthographicCamera"){const t=new H(1,0,0).applyQuaternion(this.quaternion),r=new H(0,1,0).applyQuaternion(this.quaternion),i=new H(0,0,1).applyQuaternion(this.quaternion),o=z_(e),s=B_(o),a=.0872665;Math.abs(t.angleTo(s)-0)<a||Math.abs(t.angleTo(s)-Math.PI)<a?this.xArrow&&(this.xArrow.visible=!1):Math.abs(r.angleTo(s)-0)<a||Math.abs(r.angleTo(s)-Math.PI)<a?this.yArrow&&(this.yArrow.visible=!1):(Math.abs(i.angleTo(s)-0)<a||Math.abs(i.angleTo(s)-Math.PI)<a)&&this.zArrow&&(this.zArrow.visible=!1)}}show(){super.show(),this.xArrow&&this.add(this.xArrow),this.yArrow&&this.add(this.yArrow),this.zArrow&&this.add(this.zArrow)}setScaleByCamera(e){this.scale.setScalar(vv(e,this.position))}showDraggingHelper(e){this.xArrow&&(e.includes("x")?this.add(this.xArrow):this.remove(this.xArrow)),this.yArrow&&(e.includes("y")?this.add(this.yArrow):this.remove(this.yArrow)),this.zArrow&&(e.includes("z")?this.add(this.zArrow):this.remove(this.zArrow))}dispose(){this.remove(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean)),super.dispose()}};function _o(n,e){return N_(document.createElement("div"),n)}function N_(n,e){if(!e)return n;for(const t in e)t&&e[t]&&(n.style[t]=e[t]);return n}var W_=Object.defineProperty,R1=Object.getOwnPropertySymbols,G_=Object.prototype.hasOwnProperty,Q_=Object.prototype.propertyIsEnumerable,z1=(n,e,t)=>e in n?W_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X_=(n,e)=>{for(var t in e||(e={}))G_.call(e,t)&&z1(n,t,e[t]);if(R1)for(var t of R1(e))Q_.call(e,t)&&z1(n,t,e[t]);return n};function q_(n){const e=_o(X_({position:"absolute",display:"block",borderRadius:"4px",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",pointerEvents:"none",userSelect:"none",zIndex:"99999",backgroundColor:"rgba(0,0,0,0.7)",fontSize:"12px",color:"#fff",letterSpacing:"0",lineHeight:"18px"},n)),t=()=>{e.style.display!=="block"&&e.style.top&&e.style.left&&(e.style.display="block")};return{element:e,show:t,hide:()=>{e.style.display="none",e.style.top="",e.style.left=""},setLeftTop:(r,i)=>{e.style.left=r,e.style.top=i,t()}}}var Y_=Object.defineProperty,K_=(n,e,t)=>e in n?Y_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Kt=(n,e,t)=>(K_(n,typeof e!="symbol"?e+"":e,t),t);let J_=class extends V_{constructor(e,t){super(e,t),Kt(this,"name","RotateHelper"),Kt(this,"xCircle"),Kt(this,"yCircle"),Kt(this,"zCircle"),Kt(this,"children",[]),Kt(this,"angleTips"),Kt(this,"container"),(t==null?void 0:t.yzCircleEnable)!==!1&&(this.xCircle=new Nd({direction:"x",color:zs.X})),(t==null?void 0:t.xzCircleEnable)!==!1&&(this.yCircle=new Nd({direction:"y",color:zs.Y})),(t==null?void 0:t.xyCircleEnable)!==!1&&(this.zCircle=new Nd({direction:"z",color:zs.Z})),t!=null&&t.container&&(t==null?void 0:t.angleTipsEnable)!==!1&&(this.container=t==null?void 0:t.container,this.angleTips=q_({display:"none"}),this.container.appendChild(this.angleTips.element)),this.add(...[this.xCircle,this.yCircle,this.zCircle].filter(Boolean)),this.show()}hide(){this.children.forEach(e=>e.hide())}show(){var e;this.children.forEach(t=>t.showCircle()),(e=this.angleTips)==null||e.hide()}setScaleByCamera(e){this.scale.setScalar(vv(e,this.position))}showDraggingHelper(e){var t;this.hide(),this.children.filter(r=>e.includes(r.direction)).forEach(r=>r.showRing()),(t=this.angleTips)==null||t.show()}dispose(){var e,t;this.removeFromParent(),(t=(e=this.angleTips)==null?void 0:e.element)==null||t.remove()}},Nd=class extends Zt{constructor(e){super(),Kt(this,"direction"),Kt(this,"circle"),Kt(this,"ring"),Kt(this,"angleSector"),this.direction=e.direction,this.circle=new Z_(e),this.ring=new ek(e),this.angleSector=new tk(e),this.add(this.circle,this.ring,this.angleSector),this.direction==="y"?this.rotateX(Math.PI/2):this.direction==="x"&&this.rotateY(-Math.PI/2)}showCircle(){this.add(this.circle),this.remove(this.ring,this.angleSector)}showRing(){this.add(this.ring,this.angleSector),this.remove(this.circle)}hide(){this.remove(this.ring,this.angleSector,this.circle)}},Z_=class extends nt{constructor(e){var t;super(),Kt(this,"direction"),Kt(this,"gapAngle",.02),Kt(this,"geometry",new ep(.25,.3,20,8,this.gapAngle,Math.PI/2-this.gapAngle*2)),this.material=new st({opacity:.6,color:(t=e.color)!=null?t:16777215,transparent:!0,side:fn,depthTest:!1,depthWrite:!1}),this.renderOrder=50,this.direction=e.direction,this.geometry.name=`RotateHelperCircleGeometry-${this.direction}`}},ek=class extends Zt{constructor(e){super(),Kt(this,"direction"),this.direction=e.direction;const t=.015,r=new Array(8).fill(null).map((i,o)=>{const s=new ep(.25,.3,20,8,Math.PI/4*o+t,Math.PI/4-t*2),a=new st({opacity:1,color:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:fn});this.renderOrder=50;const l=new nt(s,a);return l.name=`AxesDashedRing-${this.direction}-${o}`,l});this.add(...r)}},tk=class extends nt{constructor(e){var t;switch(super(),Kt(this,"direction"),Kt(this,"baseAxes"),Kt(this,"angleDirection"),e.direction){case"x":this.baseAxes=new H(0,0,1);break;case"y":this.baseAxes=new H(1,0,0);break;case"z":this.baseAxes=new H(1,0,0);break}const r=.3+5e-4;this.geometry=new Oo(r,48,0,1e-4),this.material=new st({opacity:.4,color:(t=e.color)!=null?t:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:fn}),this.renderOrder=50,this.direction=e.direction,this.angleDirection=this.direction==="z"?1:-1}};var nk=Object.defineProperty,B1=Object.getOwnPropertySymbols,rk=Object.prototype.hasOwnProperty,ik=Object.prototype.propertyIsEnumerable,F1=(n,e,t)=>e in n?nk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ok=(n,e)=>{for(var t in e||(e={}))rk.call(e,t)&&F1(n,t,e[t]);if(B1)for(var t of B1(e))ik.call(e,t)&&F1(n,t,e[t]);return n};function sk(){const n=_o({width:"100%",height:"100%",left:"0",top:"0",position:"absolute",pointerEvents:"none"}),e=_o({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),t=_o({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"absolute",border:"1px solid rgba(255,255,255,0.4)"});n.appendChild(e),e.appendChild(t);const r="-4px",i={direction:"nesw",element:zi({cursor:"nesw-resize",left:r,bottom:r})},o={direction:"ns",element:zi({cursor:"ns-resize",bottom:r})},s={direction:"nwse",element:zi({cursor:"nwse-resize",right:r,bottom:r})},a={direction:"ew",element:zi({cursor:"ew-resize",right:r})},l={direction:"nesw",element:zi({cursor:"nesw-resize",right:r,top:r})},u={direction:"ns",element:zi({cursor:"ns-resize",top:r})},c={direction:"nwse",element:zi({cursor:"nwse-resize",left:r,top:r})},d={direction:"ew",element:zi({cursor:"ew-resize",left:r})};return new Array(o,a,u,d,i,s,l,c).forEach(h=>e.appendChild(h.element)),{container:n,squares:[i,o,s,a,l,u,c,d]}}function zi(n){const e=_o(ok({background:"#FFFFFF",width:"9px",height:"9px",position:"absolute",pointerEvents:"none"},n)),t=_o({width:"15px",height:"15px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"}),r=_o({width:"15px",height:"15px",cursor:n==null?void 0:n.cursor,pointerEvents:"auto",background:"transparent"});return r.draggable=!0,t.appendChild(r),e.appendChild(t),e}var ak=Object.defineProperty,lk=(n,e,t)=>e in n?ak(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vr=(n,e,t)=>(lk(n,typeof e!="symbol"?e+"":e,t),t);let uk=class extends __{constructor(e,t,r,i){super(e),Vr(this,"name","CSS3DScaleHelper"),Vr(this,"points",[]),Vr(this,"cornerPositions",[]),Vr(this,"css3DInstance"),Vr(this,"plane"),Vr(this,"css3DRenderer",new ic),Vr(this,"camera"),Vr(this,"scene"),Vr(this,"container"),Vr(this,"enabled",!1),this.camera=r,this.scene=i,this.container=t,this.initRectangleScaleHelper()}get helperObject(){var e;if(!((e=this.css3DInstance)!=null&&e.css3DObject))throw new Error("css3DInstance is not initialized");return this.css3DInstance.css3DObject}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}applyMatrix4(e){var t;super.applyMatrix4(e),this.helperObject.applyMatrix4(e),(t=this.plane)==null||t.applyMatrix4(e),this.cornerPositions.forEach(r=>r.applyMatrix4(e))}showDraggingHelper(){}applyHelperScaleMatrix4(e,t){var r;(r=this.plane)==null||r.scale.applyMatrix4(e),this.helperObject.applyScaleMatrix4(e)}updatePoints(){const e=this.calculatePointPosition(this.cornerPositions);this.points.forEach((t,r)=>{t.position.copy(e[r])})}applyHelperQuaternion(e,t){var r;const i=(r=this.css3DInstance)==null?void 0:r.css3DObject;if(i){const o=new H().subVectors(i.position,t).applyQuaternion(e).add(t);i.position.copy(o),i.applyQuaternion(e)}if(this.plane){const o=new H().subVectors(this.plane.position,t).applyQuaternion(e).add(t);this.plane.position.copy(o),this.plane.applyQuaternion(e)}this.cornerPositions.forEach(o=>{const s=new H().subVectors(o,t).applyQuaternion(e).add(t);o.copy(s)})}enable(){var e;this.enabled||(this.enabled=!0,(e=this.css3DInstance)==null||e.enable(),this.plane&&this.scene.add(this.plane))}disable(){var e;this.enabled&&(this.enabled=!1,(e=this.css3DInstance)==null||e.disable(),this.plane&&this.scene.remove(this.plane))}show(){var e;(e=this.css3DInstance)==null||e.show(),this.plane&&(this.plane.visible=!0)}hide(){var e;(e=this.css3DInstance)==null||e.hide(),this.plane&&(this.plane.visible=!1)}dispose(){this.disable(),this.css3DRenderer.dispose()}initRectangleScaleHelper(){var e,t;const r=this.getCornerPositions();if(!r)return;this.cornerPositions=r;const i=this.css3DRenderer.create3DElement(this.camera,r,{ratio:.003});if(!i)return;this.css3DInstance=i,i.appendToElement(this.container);const o=i.css3DObject.container,{container:s,squares:a}=sk();this.points=a.map((l,u)=>({direction:l.direction,point:l.element,position:this.calculatePointPosition(r)[u]})),o.insertBefore(s,(e=o.children[0])!=null?e:null),this.helperObject.position.copy(this.originObject3D.position),(t=this.plane)==null||t.position.copy(this.originObject3D.position)}getCornerPositions(){const{originObject3D:e}=this;if(e.isCSS3DObject&&e.cornerPoints)return e.cornerPoints;console.error(" ScaleHelper")}calculatePointPosition(e){return[e[0].clone(),e[0].clone().add(e[1]).divideScalar(2),e[1].clone(),e[1].clone().add(e[2]).divideScalar(2),e[2].clone(),e[2].clone().add(e[3]).divideScalar(2),e[3].clone(),e[3].clone().add(e[0]).divideScalar(2)]}};var ck=Object.defineProperty,dk=(n,e,t)=>e in n?ck(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fu=(n,e,t)=>(dk(n,typeof e!="symbol"?e+"":e,t),t);let hk=class extends M_{constructor(e){super(e),fu(this,"name","BoundingBoxHelper"),fu(this,"box"),fu(this,"outline"),fu(this,"positionAttribute"),this.positionAttribute=new Ct(new Float32Array(8*3),3),this.box=this.createBox(),this.outline=this.createOutline(),this.add(this.box,this.outline),this.update()}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}setHelperQuaternion(e,t){pv(this,e,t)}raycasterIntersectObject(e,t){return e.intersectObject(this,!1,t)}raycast(e,t){this.box.raycast(e,t)}update(){const e=jp(this.originObject3D);if(!e)return;const{min:t,max:r}=e;this.positionAttribute.setXYZ(0,r.x,r.y,r.z),this.positionAttribute.setXYZ(1,t.x,r.y,r.z),this.positionAttribute.setXYZ(2,t.x,t.y,r.z),this.positionAttribute.setXYZ(3,r.x,t.y,r.z),this.positionAttribute.setXYZ(4,r.x,r.y,t.z),this.positionAttribute.setXYZ(5,t.x,r.y,t.z),this.positionAttribute.setXYZ(6,t.x,t.y,t.z),this.positionAttribute.setXYZ(7,r.x,t.y,t.z),this.positionAttribute.needsUpdate=!0}createOutline(){const e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),t=new Tt;t.setIndex(new Ct(e,1)),t.setAttribute("position",this.positionAttribute);const r=new np({color:64767,linewidth:1,opacity:1,toneMapped:!1}),i=new Yy(t,r);return i.matrixAutoUpdate=!1,i}createBox(){const e=new Uint16Array([0,1,2,0,2,3,0,3,7,0,7,4,0,4,5,0,5,1,6,1,5,6,2,1,6,5,4,6,4,7,6,3,2,6,7,3]),t=new Tt;t.setIndex(new Ct(e,1)),t.setAttribute("position",this.positionAttribute);const r=new st({color:64767,opacity:.1,depthTest:!1,transparent:!0});return new nt(t,r)}};const pu=new Map;function fk(n){if(pu.has(n))return pu.get(n).hooks;const e=new Cn;let t=null,r;const i=()=>{t=requestAnimationFrame(i);const s=n.projectionMatrix.toArray().join(",")+n.matrixWorld.toArray().join(",");s!==r&&(r=s,e.emit("cameraUpdate"))};i();const o=()=>{pu.delete(n),cancelAnimationFrame(t)};return pu.set(n,{hooks:e,dispose:o}),e}var pk=Object.defineProperty,vk=(n,e,t)=>e in n?pk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kt=(n,e,t)=>(vk(n,typeof e!="symbol"?e+"":e,t),t);let Dl=class{constructor(e,t){kt(this,"originObject3D"),kt(this,"hooks"),kt(this,"preventTapDefaultEvent",!1),kt(this,"internalHooks"),kt(this,"disposers",[]),kt(this,"helperObject3D"),kt(this,"camera"),kt(this,"model"),kt(this,"scene"),kt(this,"container"),kt(this,"domEvents"),kt(this,"isDragging",!1),kt(this,"enabled",!1),kt(this,"name","BaseController"),kt(this,"boundingBox"),kt(this,"config"),kt(this,"onRender"),kt(this,"cameraHooks"),kt(this,"onWantsTapGesture",f=>{if(this.getIntersectObject(f))return!1}),kt(this,"updateHelperScale",()=>{this.helperObject3D.setScaleByCamera(this.camera)}),kt(this,"getBox",()=>this.boundingBox?this.boundingBox:(this.boundingBox=jp(this.originObject3D),this.boundingBox));var r,i,o;this.hooks=(r=e.sharedHooks)!=null?r:new Cn,this.internalHooks=(i=e.sharedInternalHooks)!=null?i:new Cn,this.camera=e.camera,this.model=e.model,this.originObject3D=e.originObject3D,this.helperObject3D=e.helperObject3D,this.container=e.container,this.scene=e.scene,this.domEvents=e.domEvents,this.onRender=(o=e.onRender)!=null?o:()=>{},this.config=t??{},this.initialHelperPosition(),this.initialHelperQuaternion(),this.updateHelperScale(),this.cameraHooks=fk(this.camera),this.enable();const s=this.onSetOriginObjectScale.bind(this),a=this.onSetOriginObjectRotate.bind(this),l=this.onSetOriginObjectPosition.bind(this),u=this.onApplyOriginObjectScale.bind(this),c=this.onApplyOriginObjectRotate.bind(this),d=this.onApplyOriginObjectPosition.bind(this),h=this.initialHelperPosition.bind(this);this.cameraHooks.on("cameraUpdate",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",h),this.internalHooks.on("setObjectScale",s),this.internalHooks.on("setObjectRotate",a),this.internalHooks.on("setObjectPosition",l),this.internalHooks.on("applyObjectPosition",d),this.internalHooks.on("applyObjectRotate",c),this.internalHooks.on("applyObjectScale",u),this.hooks.on("moveEnd",this.updateHelperScale),this.internalHooks.on("setObjectPosition",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",this.updateHelperScale),this.disposers.push(()=>{this.cameraHooks.off("cameraUpdate",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",h),this.internalHooks.off("setObjectScale",s),this.internalHooks.off("setObjectRotate",a),this.internalHooks.off("setObjectPosition",l),this.internalHooks.off("applyObjectPosition",d),this.internalHooks.off("applyObjectRotate",c),this.internalHooks.off("applyObjectScale",u),this.hooks.off("moveEnd",this.updateHelperScale),this.internalHooks.off("setObjectPosition",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",this.updateHelperScale)})}initialHelperPosition(){this.helperObject3D.initialPosition(this.calculateOffset(this.config.offset))}initialHelperQuaternion(){this.helperObject3D.initQuaternion(this.config)}enable(){this.enabled||(this.enabled=!0,this.scene.add(this.helperObject3D),this.helperObject3D.enable(),this.render())}disable(){this.enabled&&(this.enabled=!1,this.helperObject3D.disable(),this.render())}show(){this.helperObject3D.show(),this.render()}hide(){this.helperObject3D.hide(),this.render()}dispose(){var e;(e=this.disposers)==null||e.forEach(t=>t==null?void 0:t()),this.helperObject3D.dispose(),this.render()}applyHelperMatrix4(e){this.helperObject3D.applyMatrix4(e)}applyHelperQuaternion(e,t){this.helperObject3D.applyHelperQuaternion(e,t)}applyHelperScaleMatrix4(e,t){this.helperObject3D.applyHelperScaleMatrix4(e,t)}onWantsGesture(e,t,r){if(this.isDragging)return!1}onIntersectionOnModelUpdate(e){}onApplyOriginObjectScale(e){this.applyHelperScaleMatrix4(e.matrix,e.origin)}onApplyOriginObjectRotate(e){this.applyHelperQuaternion(e.quaternion,e.origin)}onApplyOriginObjectPosition(e){this.applyHelperMatrix4(e.matrix)}onSetOriginObjectScale(e){this.helperObject3D.scale.copy(e),this.updateOffsetByScale(e)}onSetOriginObjectRotate(e,t){this.helperObject3D.setHelperQuaternion(e,t)}onSetOriginObjectPosition(e){this.helperObject3D.position.copy(e.clone().add(this.calculateOffset(this.config.offset)))}render(){this.onRender()}updateOffsetByScale(e){if(this.boundingBox&&this.config.offset){const t=this.originObject3D.position,r=new H().subVectors(this.boundingBox.max,t).multiply(e).add(t),i=new H().subVectors(this.boundingBox.min,t).multiply(e).add(t),o=this.calculateOffset(this.config.offset,{min:i,max:r});this.helperObject3D.initialPosition(o)}}hoverListener(e,t=16777215,r=1){const i=Pi(e).filter(Ge),o=[];for(const s of i)if(s.material||s instanceof Zt){const a=s instanceof Zt?s.children.filter(h=>h instanceof nt):[s];a.forEach(h=>{var f,p;h.__originalColor__=(f=h.__originalColor__)!=null?f:h.material.color.clone(),h.__originalOpacity__=(p=h.__originalOpacity__)!=null?p:h.material.opacity});const l=()=>{a.forEach(h=>{h.material.color.set(t),h.material.opacity=r}),this.render()},u=()=>{a.forEach(h=>{h.material.color.copy(h.__originalColor__),h.material.opacity=h.__originalOpacity__}),this.render()},c=()=>{this.isDragging||l()},d=()=>{this.isDragging||u()};for(const h of a)this.domEvents.addEventListener(h,"mouseover",c),this.domEvents.addEventListener(h,"mouseout",d),this.hooks.on("moveStart",l),this.hooks.on("moveEnd",u),this.hooks.on("rotateEnd",u),this.hooks.on("scaleEnd",u),o.push(()=>{this.domEvents.removeEventListener(h,"mouseover",c),this.domEvents.removeEventListener(h,"mouseout",d),this.hooks.off("moveStart",l),this.hooks.off("moveEnd",u),this.hooks.off("rotateEnd",u),this.hooks.off("scaleEnd",u)})}return()=>o.forEach(s=>s==null?void 0:s())}getIntersectObject(e){const t=this.camera.position,r=this.helperObject3D;if(!r)return;const i=this.helperObject3D.raycasterIntersectObject(e)[0];if(!i)return;const o=i;if(o.object=r,this.model.intersectRaycaster){const s=this.model.intersectRaycaster(e)[0];if(s&&s.point.distanceTo(t)<o.point.distanceTo(t))return}return o.object}calculateOffset(e,t){const r=new H(0,0,0);if(!e)return r;const i=()=>t||this.getBox();if(typeof e.x=="number")r.setX(e.x);else if(typeof e.x=="object"){const o=i();r.setX((o.max.x-o.min.x)*e.x.percents)}if(typeof e.y=="number")r.setY(e.y);else if(typeof e.y=="object"){const o=i();r.setY((o.max.y-o.min.y)*e.y.percents)}if(typeof e.z=="number")r.setZ(e.z);else if(typeof e.z=="object"){const o=i();r.setZ((o.max.z-o.min.z)*e.z.percents)}return r}};function mk(n,e){const{offsetWidth:t,offsetHeight:r}=e,{top:i,left:o}=e.getBoundingClientRect();return Object.assign(new Jt,{x:(n.x-o)/t*2-1,y:-(n.y-i)/r*2+1})}function od(n,e,t){if(!e||!t||!n)return;const r=mk(e,t);if(Math.abs(r.x)===1||Math.abs(r.y)===1)return;const i=new oo;return i.setFromCamera(r,n),i.params.Points.threshold=.1,i}var gk=Object.defineProperty,yk=(n,e,t)=>e in n?gk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bi=(n,e,t)=>(yk(n,typeof e!="symbol"?e+"":e,t),t);let Ak=class extends Dl{constructor(...e){super(...e),Bi(this,"name","MoveController"),Bi(this,"startInfo"),Bi(this,"_moveByMouse",{enabled:!1}),Bi(this,"mouseInfo"),Bi(this,"mousedownEventListenerDisposer"),Bi(this,"dragStart",s=>{if(this.moveByMouseEnable||this.isDragging)return;const a=s==null?void 0:s.intersect;if(!a)return this.dragEnd();const l=(a==null?void 0:a.object).direction;if(!l)return this.dragEnd();const u=new H(1,0,0).applyQuaternion(this.helperObject3D.quaternion),c=new H(0,1,0).applyQuaternion(this.helperObject3D.quaternion),d=new H(0,0,1).applyQuaternion(this.helperObject3D.quaternion),h=(()=>{switch(l){case"x":return u;case"y":return c;case"z":return d}})(),f=a.point.clone(),p=new qn(f.clone().sub(h.normalize()),f.clone().add(h.normalize()));this.startInfo={startVectorProject:f,line:p},this.helperObject3D.showDraggingHelper([l]),this.hooks.emit("moveStart"),this.isDragging=!0}),Bi(this,"dragging",s=>{if(!this.isDragging||!this.startInfo)return;const a="touches"in s?s.touches[0].clientX:s.x,l="touches"in s?s.touches[0].clientY:s.y,u=od(this.camera,{x:a,y:l},this.container);return u?(this.move(u),!1):this.dragEnd()}),Bi(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("moveEnd"))});const t=this.helperObject3D;this.hoverListener([t.xArrow,t.yArrow,t.zArrow]);const r=this.show.bind(this),i=this.hide.bind(this),o=()=>{this.helperObject3D.update(this.camera),this.render()};o(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",i),this.hooks.on("rotateEnd",r),this.hooks.on("scaleStart",i),this.hooks.on("scaleEnd",r),this.hooks.on("moveByMouseEnable",i),this.hooks.on("moveByMouseDisable",r),this.cameraHooks.on("cameraUpdate",o),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",i),this.hooks.off("rotateEnd",r),this.hooks.off("scaleStart",i),this.hooks.off("scaleEnd",r),this.hooks.off("moveByMouseEnable",i),this.hooks.off("moveByMouseDisable",r),this.cameraHooks.off("cameraUpdate",o)}),this.moveByMouseEnable&&this.moveByMouse()}get moveByMouseEnable(){return this._moveByMouse.enabled}dispose(){var e;super.dispose(),(e=this.disposers)==null||e.forEach(t=>t==null?void 0:t())}moveByMouse(e){this._moveByMouse={enabled:!0,useFaceNormal:e==null?void 0:e.useFaceNormal},this.preventTapDefaultEvent=!0;const t=this.handleMouseDown.bind(this),r=this.handleMouseUp.bind(this);this.hooks.emit("moveByMouseEnable"),setTimeout(()=>{this.container.addEventListener("mousedown",t),this.container.addEventListener("mouseup",r)}),this.mousedownEventListenerDisposer=()=>{this.container.removeEventListener("mousedown",t),this.container.removeEventListener("mouseup",r)}}disableMoveByMouse(){var e;this._moveByMouse={enabled:!1},this.preventTapDefaultEvent=!1,this.hooks.emit("moveByMouseDisable"),(e=this.mousedownEventListenerDisposer)==null||e.call(this)}onIntersectionOnModelUpdate(e){var t,r,i;if(!this.moveByMouseEnable)return;const{point:o,face:s}=e;if(!this.hooks.emit("wantToMove",o)){if(this.originObject3D.position.copy(o),(this._moveByMouse.useFaceNormal===!0||typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.enable!==!1)&&s!=null&&s.normal){const a=typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.alignmentVector?this._moveByMouse.useFaceNormal.alignmentVector:{x:0,y:1,z:0},l=new H((t=a.x)!=null?t:0,(r=a.y)!=null?r:0,(i=a.z)!=null?i:0),u=typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.fixedFaceNormal?this._moveByMouse.useFaceNormal.fixedFaceNormal(s.normal):s.normal;this.originObject3D.quaternion.setFromUnitVectors(l,u),this.internalHooks.emit("setObjectRotate",this.originObject3D.quaternion.clone())}this.internalHooks.emit("setObjectPosition",o),this.hooks.emit("move",o)}}handleMouseDown(e){const{x:t,y:r}=e;this.mouseInfo={x:t,y:r,mouseDownTimestamp:Date.now()}}handleMouseUp(e){if(!this.mouseInfo)return;const{x:t,y:r}=e;this.mouseInfo.x===t&&this.mouseInfo.y===r&&Date.now()-this.mouseInfo.mouseDownTimestamp<500&&(this.disableMoveByMouse(),this.mouseInfo=void 0)}move(e){if(!this.startInfo)return this.dragEnd();const{line:t,startVectorProject:r}=this.startInfo,i=this.originObject3D,o=Ki({raycaster:e,line:t,clampToLine:!1}),s=o.clone().sub(r),a=new Ue;a.setPosition(s);const l=i.position.clone().applyMatrix4(a);this.hooks.emit("wantToMove",l)||(i.applyMatrix4(a),r.copy(o),this.internalHooks.emit("applyObjectPosition",{matrix:a}),this.hooks.emit("move",l))}};var bk=Object.defineProperty,wk=(n,e,t)=>e in n?bk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ka=(n,e,t)=>(wk(n,typeof e!="symbol"?e+"":e,t),t);let Ia=class{constructor(e,t,r,i,o,s,a,l){ka(this,"helperController"),ka(this,"five"),ka(this,"onFiveWantsTapGesture",p=>{if(!this.helperController)return;if(this.helperController.preventTapDefaultEvent)return!1;const v=this.helperController.onWantsTapGesture(p);return this.five.needsRender=!0,v}),ka(this,"onFiveWantsGesture",(...p)=>{if(!this.helperController)return;const v=this.helperController.onWantsGesture(...p);return this.five.needsRender=!0,v}),ka(this,"onFiveIntersectionOnModelUpdate",(...p)=>{this.helperController&&this.helperController.onIntersectionOnModelUpdate(...p)});const{camera:u,model:c,scene:d}=e,h=e.getElement();if(this.five=e,!u||!c||!h||!d)return;const f=()=>{e.needsRender=!0};this.helperController=new r({camera:u,model:c,domEvents:t,originObject3D:i,helperObject3D:o,container:h,scene:d,onRender:f,sharedHooks:a,sharedInternalHooks:l},s),e.on("wantsTapGesture",this.onFiveWantsTapGesture),e.on("wantsGesture",this.onFiveWantsGesture),e.on("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate)}dispose(){var e;this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("wantsGesture",this.onFiveWantsGesture),this.five.off("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate),(e=this.helperController)==null||e.dispose()}};var xk=Object.defineProperty,H1=Object.getOwnPropertySymbols,Pk=Object.prototype.hasOwnProperty,Ek=Object.prototype.propertyIsEnumerable,Pf=(n,e,t)=>e in n?xk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ja=(n,e)=>{for(var t in e||(e={}))Pk.call(e,t)&&Pf(n,t,e[t]);if(H1)for(var t of H1(e))Ek.call(e,t)&&Pf(n,t,e[t]);return n},vu=(n,e,t)=>(Pf(n,typeof e!="symbol"?e+"":e,t),t),U1=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const Ck="v1.0.1",Sk="Object3DHelper",mv=`${Sk}@${Ck}`,Ok=()=>{console.error(`${mv} is disposed`)},$k=()=>{console.warn(`${mv} is disabled`)},Mk=()=>{console.error(`${mv} is disabled`)};let Vk=class{constructor(e){vu(this,"controllers",{}),vu(this,"state",{visible:!0,enabled:!0,disposed:!1}),vu(this,"hooks",new Cn),vu(this,"eventListener",{}),e&&this.addControllers(e),this.setState(this.state)}show(e){return U1(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return U1(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,t){if(this.state.disposed)return Ok();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return Mk();const r=ja({},this.state);this.state=ja(ja({},this.state),e),e.disposed!==void 0&&e.disposed!==r.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&this.handleVisible(e.visible),e.enabled!==void 0&&this.handleEnable(e.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:r})}addControllers(e){this.controllers=ja(ja({},this.controllers),e),this.setState(this.state)}initialHelperMatrix(){this.everyControllerDo(e=>{e.initialHelperPosition(),e.initialHelperQuaternion()})}getCurrentState(){return this.state}handleEnable(e,t=!0){e?(this.everyControllerDo(r=>{r.enable()}),this.hooks.emit("enable",{userAction:t})):(this.everyControllerDo(r=>{r.disable()}),this.hooks.emit("disable",{userAction:t})),this.state.enabled=e}handleVisible(e,t=!0){e?(this.everyControllerDo(r=>{r.show()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:t}))):(this.everyControllerDo(r=>{r.hide()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:t}))),this.state.visible=e}everyControllerDo(e){Object.values(this.controllers).forEach(t=>{t&&e(t)})}handleDispose(){var e,t;Object.values(this.controllers).forEach(r=>{r==null||r.dispose()});for(const r in this.controllers){if(!r)continue;const i=r;(t=(e=this.eventListener)[i])==null||t.call(e)}}actionIfStateIsEnabled(e,t){if(this.state.enabled)return e();t!=null&&t.warnLog&&$k()}};function Wd(n){return n*Math.PI/180}var Tk=Object.defineProperty,_k=(n,e,t)=>e in n?Tk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gd=(n,e,t)=>(_k(n,typeof e!="symbol"?e+"":e,t),t);let Qd=new on,kk=class extends Dl{constructor(...e){var t,r,i;super(...e),Gd(this,"name","RotateController"),Gd(this,"startInfo"),Gd(this,"removeListener");const o=this.helperObject3D;this.hoverListener([(t=o.xCircle)==null?void 0:t.circle,(r=o.yCircle)==null?void 0:r.circle,(i=o.zCircle)==null?void 0:i.circle].filter(Boolean));const s=this.dragStart.bind(this),a=this.dragging.bind(this),l=this.dragEnd.bind(this),u=this.show.bind(this),c=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",s),document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),this.domEvents.addEventListener(this.helperObject3D,"touchstart",s),document.addEventListener("touchmove",a),document.addEventListener("touchend",l),this.hooks.on("moveStart",c),this.hooks.on("moveEnd",u),this.hooks.on("scaleStart",c),this.hooks.on("scaleEnd",u),this.hooks.on("moveByMouseEnable",c),this.hooks.on("moveByMouseDisable",u),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",s),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",s),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",l),this.hooks.off("moveStart",c),this.hooks.off("moveEnd",u),this.hooks.off("scaleStart",c),this.hooks.off("scaleEnd",u),this.hooks.off("moveByMouseEnable",c),this.hooks.off("moveByMouseDisable",u)})}get rotateCenter(){return this.helperObject3D.position.clone()}setRotateAngle(e){const{x:t=0,y:r=0,z:i=0}=e,o=new So(Wd(t),Wd(r),Wd(i)),s=new on().setFromEuler(o);if(this.hooks.emit("wantToRotate",s))return;const{originObject3D:a,rotateCenter:l}=this;pv(a,s,l),this.internalHooks.emit("setObjectRotate",s,l),this.hooks.emit("rotate",s),this.render()}onApplyOriginObjectRotate(e){this.isDragging||super.onApplyOriginObjectRotate(e)}onApplyOriginObjectScale(e){}dragStart(e){if(this.isDragging)return;const t=e==null?void 0:e.intersect;if(!t)return this.dragEnd();const r=(t==null?void 0:t.object).direction;if(!r)return this.dragEnd();const i=t.point,o=this.getAngleHelper(r);this.setTipsAngle(0);const s=i.clone();s.y+=.2,this.setTipsPosition(s);const a=this.helperObject3D.quaternion.clone(),l=(()=>{if(r==="x")return new H(1,0,0).applyQuaternion(a);if(r==="y")return new H(0,1,0).applyQuaternion(a);if(r==="z")return new H(0,0,1).applyQuaternion(a)})(),u=new _n().setFromNormalAndCoplanarPoint(l,i),c=u.projectPoint(i.clone(),new H).clone().sub(this.rotateCenter),d=c.angleTo(o.baseAxes.clone().applyQuaternion(a));this.setAngleHelperStart(r,d),this.setAngleHelperLength(r,0),this.startInfo={direction:r,startVector:c,plane:u,angleHelper:o,angle:0,helperQuaternion:a.clone()},Qd=new on,this.helperObject3D.showDraggingHelper([r]),this.hooks.emit("rotateStart"),this.isDragging=!0}dragging(e){if(!this.isDragging)return;const t="touches"in e?e.touches[0].clientX:e.x,r="touches"in e?e.touches[0].clientY:e.y,i=od(this.camera,{x:t,y:r},this.container);return i?(this.rotate(i),!1):this.dragEnd()}rotate(e){if(!this.startInfo)return this.dragEnd();const{startVector:t,plane:r,angleHelper:i,direction:o,helperQuaternion:s}=this.startInfo,{originObject3D:a}=this,l=e.ray.intersectPlane(r,new H);if(!l)return;const u=this.rotateCenter.clone(),c=r.projectPoint(l.clone(),new H).clone().sub(u);if(t.angleTo(c)===0)return;const d=new on().setFromUnitVectors(t.clone().normalize(),c.clone().normalize()),h=a.quaternion.clone().premultiply(d);if(this.hooks.emit("wantToRotate",h))return;const f=new So().setFromQuaternion(new on().setFromUnitVectors(t.clone().normalize().applyQuaternion(s.clone().inverse()),c.clone().normalize().applyQuaternion(s.clone().inverse())),`${o.toUpperCase()}${"XZY".replace(o.toUpperCase(),"")}`)[o]*i.angleDirection;if(this.startInfo.angle+=f,this.setAngleHelperLength(o,this.startInfo.angle),this.setTipsAngle(UE(this.startInfo.angle)),u){const p=new H().subVectors(a.position,u).applyQuaternion(d).add(u);a.position.copy(p)}a.applyQuaternion(d),Qd.premultiply(d),this.internalHooks.emit("applyObjectRotate",{quaternion:d,origin:u}),this.hooks.emit("rotate",a.quaternion),this.startInfo.startVector=c}dragEnd(){this.isDragging&&(this.applyHelperQuaternion(Qd,this.rotateCenter),this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("rotateEnd"))}getAngleHelper(e){var t,r,i;switch(e){case"x":return(t=this.helperObject3D.xCircle)==null?void 0:t.angleSector;case"y":return(r=this.helperObject3D.yCircle)==null?void 0:r.angleSector;case"z":return(i=this.helperObject3D.zCircle)==null?void 0:i.angleSector}}setAngleHelperStart(e,t){const r=this.getAngleHelper(e);if(!r){console.warn("angleHelper is undefined");return}if(r instanceof nt&&r.geometry instanceof Oo){const{radius:i,segments:o,thetaLength:s}=r.geometry.parameters;r.geometry=new Oo(i,o,t,s)}else console.warn("only support THREE.CircleGeometry")}setAngleHelperLength(e,t){const r=t>=0?Math.max(t,.001):Math.min(t,-.001),i=this.getAngleHelper(e);if(i instanceof nt&&i.geometry instanceof Oo){const{radius:o,thetaStart:s}=i.geometry.parameters,a=Math.ceil(Math.abs(r)*(40/(2*Math.PI)));i.geometry=new Oo(o,a,s,r)}else console.warn("only support THREE.CircleGeometry")}setTipsAngle(e){var t;const r=(t=this.helperObject3D.angleTips)==null?void 0:t.element;r&&(r.innerText=`${e.toFixed(0)}`)}setTipsPosition(e){const t=this.helperObject3D.angleTips;if(!t)return;const r=e.project(this.camera),{x:i,y:o,z:s}=r;if(s>1)return;const a=(i+1)/2*100+"%",l=(-o+1)/2*100+"%";t.setLeftTop(a,l)}};var Ik=Object.defineProperty,jk=(n,e,t)=>e in n?Ik(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,N1=(n,e,t)=>(jk(n,typeof e!="symbol"?e+"":e,t),t);let Dk=class extends Dl{constructor(...e){super(...e),N1(this,"startInfo"),N1(this,"name","RectangleScaleController")}enable(){this.helperObject3D.enable(),super.enable()}disable(){this.helperObject3D.disable(),super.disable()}show(){this.helperObject3D.show(),super.show()}hide(){this.helperObject3D.hide(),super.hide()}onApplyOriginObjectPosition(e){this.isDragging||super.onApplyOriginObjectPosition(e)}onApplyOriginObjectScale(e){this.helperObject3D.applyHelperScaleMatrix4(e.matrix,e.origin)}getDragPlane(){const e=new _n,t=this.helperObject3D.cornerPositions;if(t.length!==0)return t.length<3?e.setFromNormalAndCoplanarPoint(this.originObject3D.getWorldDirection(new H),t[0]):e.setFromCoplanarPoints(t[0],t[1],t[2]),e}dragStart(e,t){var r,i;(i=(r=this.helperObject3D).updatePoints)==null||i.call(r);const o=this.getDragPlane();if(!o)return this.dragEnd();this.startInfo={startPoint:{position:t.position.clone(),direction:t.direction},plane:o},this.hooks.emit("scaleStart"),this.render(),this.isDragging=!0}dragging(e){if(!this.isDragging)return;const t=od(this.camera,e,this.container);if(!t)return this.dragEnd();this.scale(t)}scale(e){var t,r;if(!this.startInfo)return;const i=this.originObject3D,{startPoint:o,plane:s}=this.startInfo,a=this.helperObject3D.cornerPositions;if(a.length<4)return this.dragEnd();const l=e.ray.intersectPlane(s,new H);if(!l||m8(l,this.camera.position))return;const u=new H().addVectors(a[0],a[2]).divideScalar(2),{position:c,direction:d}=o,h=new H().subVectors(a[1],a[0]),f=new H().subVectors(a[3],a[0]),p=m=>{const A=new H(0,0,0);if(!this.startInfo)return A;const x=(m==="ew"?h:f).clone(),S=c.clone().projectOnVector(x),$=l.clone().projectOnVector(x),T=u.clone().projectOnVector(x);if($.equals(S))return A;if(m==="ns"&&typeof this.startInfo.dragPointInCenterBottom!="boolean"){const ne=new H().subVectors($,T),ce=ne.x<0&&x.x>=0,Z=ne.y<0&&x.y>=0,he=ne.z<0&&x.z>=0;this.startInfo.dragPointInCenterBottom=ce||Z||he}if(m==="ew"&&typeof this.startInfo.dragPointInCenterLeft!="boolean"){const ne=new H().subVectors($,T),ce=ne.x<0&&x.x>=0,Z=ne.y<0&&x.y>=0,he=ne.z<0&&x.z>=0;this.startInfo.dragPointInCenterLeft=ce||Z||he}const F=new H().subVectors($,S),R=F.length();return R>.3?(console.warn("offset.length() > 0.3, skipped",R),A):F},v=p("ew"),b=p("ns"),g=()=>{const m=v;this.helperObject3D.cornerPositions.forEach((A,x)=>{var S;(S=this.startInfo)!=null&&S.dragPointInCenterLeft?(x===0||x===3)&&A.add(m):(x===1||x===2)&&A.add(m)})},y=()=>{const m=b;this.helperObject3D.cornerPositions.forEach((A,x)=>{var S;(S=this.startInfo)!=null&&S.dragPointInCenterBottom?(x===0||x===1)&&A.add(m):(x===2||x===3)&&A.add(m)})};switch(d){case"ew":g();break;case"ns":y();break;case"nesw":case"nwse":g(),y()}const E=new H().subVectors(a[1],a[0]).length()/h.length(),C=new H().subVectors(a[3],a[0]).length()/f.length(),V=new H(E,C,1),M=new Ue().scale(V);i.isCSS3DObjectPlus&&i.applyScaleMatrix4?i.applyScaleMatrix4(M):i.scale.applyMatrix4(M),o.position.copy(l);const z=new H().addVectors(a[0],a[2]).divideScalar(2),U=new H().subVectors(z,u),D=new Ue().setPosition(U);i.applyMatrix4(D),(t=this.helperObject3D.css3DInstance)==null||t.css3DObject.applyMatrix4(D),(r=this.helperObject3D.plane)==null||r.applyMatrix4(D),this.internalHooks.emit("applyObjectScale",{matrix:M}),this.internalHooks.emit("applyObjectPosition",{matrix:D}),this.render()}dragEnd(){this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.hooks.emit("scaleEnd"),this.render())}};var Lk=Object.defineProperty,Rk=(n,e,t)=>e in n?Lk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zk=(n,e,t)=>(Rk(n,e+"",t),t);let Bk=class extends Dk{constructor(...e){super(...e),zk(this,"name","CSS3DScaleController"),this.addHTMLEventListener()}addHTMLEventListener(){this.helperObject3D.points.forEach(e=>{if(!e)return;const t=e.point,r=s=>this.dragStart(s,e),i=this.dragging.bind(this),o=this.dragEnd.bind(this);t.addEventListener("dragstart",r),t.addEventListener("drag",i),t.addEventListener("dragend",o)})}};var Fk=Object.defineProperty,Hk=(n,e,t)=>e in n?Fk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Uk=(n,e,t)=>(Hk(n,e+"",t),t);let Nk=class extends Dl{constructor(...e){super(...e),Uk(this,"name","BoundingBoxController")}};var Wk=Object.defineProperty,Gk=(n,e,t)=>e in n?Wk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xd=(n,e,t)=>(Gk(n,typeof e!="symbol"?e+"":e,t),t);let Qk=class extends T_{constructor(e,t){super(e,t),Xd(this,"name","ScaleHelper"),Xd(this,"scaleMeshes",[]),Xd(this,"positions",[]),t&&(this.positions=t.positions)}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}initialPosition(e){this.position.copy(this.originObject3D.position);const t=typeof this.positions=="function"?this.positions():this.positions;t&&(this.scaleMeshes=t.map((r,i)=>{var o;const s=(o=this.scaleMeshes[i])!=null?o:Xk();return s.position.copy(r.handlePosition),s.scalePosition=r,this.addIfNotExists(s),s}))}setScaleByCamera(e){this.scaleMeshes.forEach(t=>{t.scale.setScalar(vv(e,t.scalePosition.handlePosition.clone().applyMatrix4(this.matrixWorld)))})}};function Xk(){const n=new Zt;n.name="ScaleHelperCube";const e=.05,t=new Jy(e,e,e),r=new st({color:16776960,transparent:!0,side:fn}),i=new st({color:16776960,opacity:.4,depthTest:!1,depthWrite:!1,transparent:!0,side:fn}),o=new nt(t,r),s=new nt(t,i);return o.name="ScaleHelperCube-front",s.name="ScaleHelperCube-behind",o.renderOrder=11,s.renderOrder=10,n.add(o,s),n}var qk=Object.defineProperty,Yk=(n,e,t)=>e in n?qk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ms=(n,e,t)=>(Yk(n,typeof e!="symbol"?e+"":e,t),t);let Kk=class extends Dl{constructor(...e){super(...e),ms(this,"name","ScaleController"),ms(this,"startInfo"),ms(this,"dragStart",i=>{if(this.isDragging)return;this.isDragging=!0;const{intersect:o}=i,s=this.camera.position;let a=o.object;a.scalePosition||(a=o.object.parent);const l=a.scalePosition.basePosition.clone(),u=a.scalePosition.handlePosition.clone().clone().sub(l).clone(),c=new qn(l,l.clone().add(u.normalize().multiplyScalar(5)));c.applyMatrix4(this.helperObject3D.matrixWorld);const d=new oo(s,o.point.clone().sub(s)),h=Ki({raycaster:d,line:c});this.startInfo={line:c,scaleStartPoint:h,draggingObject:a},this.helperObject3D.scaleMeshes.forEach(f=>{f.uuid!==a.uuid&&(f.visible=!1)}),a.visible=!0,this.hooks.emit("scaleStart")}),ms(this,"dragging",i=>{if(!this.isDragging||!this.startInfo)return;const o="touches"in i?i.touches[0].clientX:i.x,s="touches"in i?i.touches[0].clientY:i.y,a=od(this.camera,{x:o,y:s},this.container);return a?(this.scale(a),!1):this.dragEnd()}),ms(this,"scale",i=>{var o,s;if(!this.startInfo)return;const{line:a,scaleStartPoint:l,draggingObject:u}=this.startInfo,{scalePosition:c}=u,d=Ki({raycaster:i,line:a,clampToLine:!1});d.applyMatrix4(new Ue().getInverse(this.helperObject3D.matrixWorld.clone())),(s=(o=this.config)==null?void 0:o.scaleCallback)==null||s.call(o,{intersectPoint:d,scalePosition:c,offset:d.clone().sub(l)}),u.position.copy(d.clone()),this.hooks.emit("scale",new H(1,1,1))}),ms(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.scaleMeshes.forEach(i=>{i.visible=!0}),this.internalHooks.emit("initialHelperPosition"),this.hooks.emit("scaleEnd"))});const t=this.show.bind(this),r=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",r),this.hooks.on("rotateEnd",t),this.hooks.on("moveStart",r),this.hooks.on("moveEnd",t),this.hooks.on("moveByMouseEnable",r),this.hooks.on("moveByMouseDisable",t),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",r),this.hooks.off("rotateEnd",t),this.hooks.off("moveStart",r),this.hooks.off("moveEnd",t),this.hooks.off("moveByMouseEnable",r),this.hooks.off("moveByMouseDisable",t)})}initialHelperPosition(){this.helperObject3D.initialPosition();const e=this;e.offHoverListener&&e.offHoverListener(),e.offHoverListener=this.hoverListener(this.helperObject3D.scaleMeshes)}setScale(e){var t,r,i;let o=1,s=1,a=1;typeof e=="number"?(o=e,s=e,a=e):typeof e=="object"&&(o=(t=e.x)!=null?t:1,s=(r=e.y)!=null?r:1,a=(i=e.z)!=null?i:1);const l=new H(o,s,a);this.hooks.emit("wantToScale",l)||(this.originObject3D.scale.copy(l),this.internalHooks.emit("setObjectScale",l),this.hooks.emit("scale",l),this.render())}};function rt(n,e){this._camera=n||null,this._domElement=e||document,this._raycaster=new oo,this._selected=null,this._boundObjs={};var t=this;this._$onClick=function(){t._onClick.apply(t,arguments)},this._$onDblClick=function(){t._onDblClick.apply(t,arguments)},this._$onMouseMove=function(){t._onMouseMove.apply(t,arguments)},this._$onMouseDown=function(){t._onMouseDown.apply(t,arguments)},this._$onMouseUp=function(){t._onMouseUp.apply(t,arguments)},this._$onTouchMove=function(){t._onTouchMove.apply(t,arguments)},this._$onTouchStart=function(){t._onTouchStart.apply(t,arguments)},this._$onTouchEnd=function(){t._onTouchEnd.apply(t,arguments)},this._$onContextmenu=function(){t._onContextmenu.apply(t,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)}rt.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)};rt.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"];rt.prototype._getRelativeMouseXY=function(n){var e=n.target||n.srcElement;e.nodeType===3&&(e=e.parentNode);var t={x:0,y:0},r=e,i=getComputedStyle(r,null);t.y+=parseInt(i.getPropertyValue("padding-top"),10),t.x+=parseInt(i.getPropertyValue("padding-left"),10);do t.x+=r.offsetLeft,t.y+=r.offsetTop,i=getComputedStyle(r,null),t.x+=parseInt(i.getPropertyValue("border-left-width"),10),t.y+=parseInt(i.getPropertyValue("border-top-width"),10);while(r=r.offsetParent);var o={width:e===window?window.innerWidth:e.offsetWidth,height:e===window?window.innerHeight:e.offsetHeight};return{x:Number((n.pageX-t.x)/o.width)*2-1,y:-((n.pageY-t.y)/o.height)*2+1}};rt.prototype._objectCtxInit=function(n){n._3xDomEvent={}};rt.prototype._objectCtxDeinit=function(n){delete n._3xDomEvent};rt.prototype._objectCtxIsInit=function(n){return!!n._3xDomEvent};rt.prototype._objectCtxGet=function(n){return n._3xDomEvent};rt.prototype.camera=function(n){return n&&(this._camera=n),this._camera};rt.prototype.bind=function(n,e,t,r){console.assert(rt.eventNames.indexOf(e)!==-1,"not available events:"+e),this._objectCtxIsInit(n)||this._objectCtxInit(n);var i=this._objectCtxGet(n);i[e+"Handlers"]||(i[e+"Handlers"]=[]),i[e+"Handlers"].push({callback:t,useCapture:r}),this._boundObjs[e]===void 0&&(this._boundObjs[e]=[]),this._boundObjs[e].push(n)};rt.prototype.addEventListener=rt.prototype.bind;rt.prototype.unbind=function(n,e,t,r){console.assert(rt.eventNames.indexOf(e)!==-1,"not available events:"+e),this._objectCtxIsInit(n)||this._objectCtxInit(n);var i=this._objectCtxGet(n);i[e+"Handlers"]||(i[e+"Handlers"]=[]);for(var o=i[e+"Handlers"],s=0;s<o.length;s++){var a=o[s];if(t==a.callback&&r==a.useCapture){o.splice(s,1);break}}var l=this._boundObjs[e].indexOf(n);this._boundObjs[e].splice(l,1)};rt.prototype.removeEventListener=rt.prototype.unbind;rt.prototype._bound=function(n,e){var t=this._objectCtxGet(e);return t?!!t[n+"Handlers"]:!1};rt.prototype._onMove=function(n,e,t,r){var i=this._boundObjs[n];if(!(i===void 0||i.length===0)){var o=new Jt;o.set(e,t),this._raycaster.setFromCamera(o,this._camera);var s=this._raycaster.intersectObjects(i),a=this._selected;if(s.length>0){var l,u,c,d=s[0],h=d.object;this._selected=h,c=this._bound("mousemove",h),a!=h&&(l=this._bound("mouseover",h),u=a&&this._bound("mouseout",a))}else u=a&&this._bound("mouseout",a),this._selected=null;c&&this._notify("mousemove",h,r,d),l&&this._notify("mouseover",h,r,d),u&&this._notify("mouseout",a,r,d)}};rt.prototype._onEvent=function(n,e,t,r){var i=this._boundObjs[n];if(!(i===void 0||i.length===0)){var o=new Jt;o.set(e,t),this._raycaster.setFromCamera(o,this._camera);var s=this._raycaster.intersectObjects(i,!0);if(s.length!==0){for(var a=s[0],l=a.object,u=this._objectCtxGet(l),c=l.parent;typeof u>"u"&&c;)u=this._objectCtxGet(c),c=c.parent;u&&this._notify(n,l,r,a)}}};rt.prototype._notify=function(n,e,t,r){var i=this._objectCtxGet(e),o=i?i[n+"Handlers"]:null;if(!i||!o||o.length===0){e.parent&&this._notify(n,e.parent,t,r);return}for(var o=i[n+"Handlers"],s=0;s<o.length;s++){var a=o[s],l=!0;a.callback({type:n,target:e,origDomEvent:t,intersect:r,stopPropagation:function(){l=!1}}),l&&a.useCapture===!1&&e.parent&&this._notify(n,e.parent,t,r)}};rt.prototype._onMouseDown=function(n){return this._onMouseEvent("mousedown",n)};rt.prototype._onMouseUp=function(n){return this._onMouseEvent("mouseup",n)};rt.prototype._onMouseEvent=function(n,e){var t=this._getRelativeMouseXY(e);this._onEvent(n,t.x,t.y,e)};rt.prototype._onMouseMove=function(n){var e=this._getRelativeMouseXY(n);this._onMove("mousemove",e.x,e.y,n),this._onMove("mouseover",e.x,e.y,n),this._onMove("mouseout",e.x,e.y,n)};rt.prototype._onClick=function(n){this._onMouseEvent("click",n)};rt.prototype._onDblClick=function(n){this._onMouseEvent("dblclick",n)};rt.prototype._onContextmenu=function(n){this._onMouseEvent("contextmenu",n)};rt.prototype._onTouchStart=function(n){return this._onTouchEvent("touchstart",n)};rt.prototype._onTouchEnd=function(n){return this._onTouchEvent("touchend",n)};rt.prototype._onTouchMove=function(n){if(n.touches.length==1){var e=Number(n.touches[0].pageX/window.innerWidth)*2-1,t=-(n.touches[0].pageY/window.innerHeight)*2+1;this._onMove("mousemove",e,t,n),this._onMove("mouseover",e,t,n),this._onMove("mouseout",e,t,n)}};rt.prototype._onTouchEvent=function(n,e){var t=e.touches;if(t.length==0&&(t=e.changedTouches),t.length==1){var r=Number(t[0].pageX/window.innerWidth)*2-1,i=-(t[0].pageY/window.innerHeight)*2+1;this._onEvent(n,r,i,e)}};var Jk=Object.defineProperty,W1=Object.getOwnPropertySymbols,Zk=Object.prototype.hasOwnProperty,eI=Object.prototype.propertyIsEnumerable,Ef=(n,e,t)=>e in n?Jk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hn=(n,e)=>{for(var t in e||(e={}))Zk.call(e,t)&&Ef(n,t,e[t]);if(W1)for(var t of W1(e))eI.call(e,t)&&Ef(n,t,e[t]);return n},gs=(n,e,t)=>(Ef(n,typeof e!="symbol"?e+"":e,t),t),G1=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const Cf="Object3DHelperPlugin",gv=Cf,tI=()=>{console.error(`${gv} is disposed`)},nI=()=>{console.warn(`${gv} is disabled`)},rI=()=>{console.error(`${gv} is disabled`)};class iI extends ow{constructor(e){super(e),gs(this,"name",Cf),gs(this,"state",{visible:!0,enabled:!0,disposed:!1}),gs(this,"objectHelperMap",new Map),gs(this,"css3DObjectParentMap",new Map),gs(this,"css3DObjectModeMap",new Map),gs(this,"css3DRender"),this.five=e,this.css3DRender=new ic(this.five.scene),console.warn("Object3DHelper: fivefive: { backgroundAlpha: 0, backgroundColor: 0x000000 }"),Object.assign(window,{[`__${Cf.toUpperCase()}_DEBUG__`]:this})}show(e){return G1(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return G1(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,t){if(this.state.disposed)return tI();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return rI();const r=Hn({},this.state);this.state=Hn(Hn({},this.state),e),e.disposed!==void 0&&e.disposed!==r.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&e.visible!==r.visible&&this.handleVisible(e.visible),e.enabled!==void 0&&e.enabled!==r.enabled&&this.handleEnable(e.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:r})}getObject3DHelper(e){return this.objectHelperMap.get(e)}addObject3DHelper(e,t={}){var r;if(!e){console.error("Object3D is undefined");return}if(this.objectHelperMap.has(e)){console.warn(`Object3DHelperPlugin: object3D ${e.name} is already has helper`);return}const i=new Vk,o=[],s=(r=this.five.getElement())==null?void 0:r.parentElement,a=this.five.camera,l=Hn(Hn({},{moveHelper:!0,rotateHelper:!0,scaleHelper:!0,boundingBoxHelper:!1,positionFrom:"objectPosition"}),t),{moveHelper:u,rotateHelper:c,scaleHelper:d,boundingBoxHelper:h}=l,f=i.hooks,p=new Cn,v=new rt(this.five.camera,this.five.getElement()),b=g=>{if(g)return typeof g=="boolean"?g:g.enable};if(b(u)){const g=Hn(Hn({},this.getConfig(l.moveHelper)),l),y=new U_(e,Hn({},g)),E=new Ia(this.five,v,Ak,e,y,g,f,p);i.addControllers({moveController:E.helperController}),o.push(()=>E.dispose())}if(b(c)){const g=Hn(Hn({},this.getConfig(l.rotateHelper)),l),y=new J_(e,Hn({container:s},g)),E=new Ia(this.five,v,kk,e,y,g,f,p);i.addControllers({rotateController:E.helperController}),o.push(()=>E.dispose())}if(b(h)){const g=new hk(e),y=new Ia(this.five,v,Nk,e,g,void 0,f,p);i.addControllers({boundingBoxController:y.helperController})}if(b(d))if(e.isCSS3DObject&&s){const g=new uk(e,s,a,this.five.scene),y=new Ia(this.five,v,Bk,e,g,void 0,f,p);i.addControllers({scaleController:y.helperController}),o.push(()=>y.dispose()),Do(this.five).then(()=>{var E,C;if(e.isCSS3DObjectPlus){const V=e;if(!V||V.mode!=="front")return;const M=(E=this.css3DRender.behindModeCSS3DRenderer.wrapper)!=null?E:yb(this.five);M&&(this.css3DObjectParentMap.set(V,V.parent),V.removeFromParent(),this.css3DRender.behindModeCSS3DRenderer.setWrapper(M),(C=this.css3DRender.getBehindCSS3DObjectGroup())==null||C.add(V),this.css3DRender.render(this.five.camera))}else e.isCSS3DObject&&(this.css3DObjectModeMap.set(e,e.mode),e.mode="behind")})}else{const g=Hn(Hn({},this.getConfig(l.scaleHelper)),l),y=new Qk(e,g),E=new Ia(this.five,v,Kk,e,y,g,f,p);i.addControllers({scaleController:E.helperController}),o.push(()=>E.dispose())}return this.objectHelperMap.set(e,{helper:i,disposers:o}),i.controllers}removeObject3DHelper(e){if(!this.objectHelperMap.has(e))return;const{helper:t,disposers:r}=this.objectHelperMap.get(e);if(t){if(e.isCSS3DObjectPlus){const i=e,o=this.css3DObjectParentMap.get(i);o&&o.add(i),this.css3DRender.render(this.five.camera)}else if(e.isCSS3DObject){const i=this.css3DObjectModeMap.get(e);e.mode=i}this.objectHelperMap.delete(e),t.dispose(),r==null||r.forEach(i=>i==null?void 0:i())}}handleEnable(e,t=!0){e?(this.everyHelperDo(r=>r.enable()),this.hooks.emit("enable",{userAction:t})):(this.everyHelperDo(r=>r.disable()),this.hooks.emit("disable",{userAction:t})),this.state.enabled=e}handleVisible(e,t=!0){e?(this.everyHelperDo(r=>r.show()),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:t}))):(this.everyHelperDo(r=>r.hide()),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:t}))),this.state.visible=e}handleDispose(){this.everyHelperDo((e,t)=>{e.dispose(),t==null||t.forEach(r=>r==null?void 0:r())})}everyHelperDo(e){this.objectHelperMap.forEach(({helper:t,disposers:r})=>{t&&e(t,r)})}actionIfStateIsEnabled(e,t){if(this.state.enabled)return e();t!=null&&t.warnLog&&nI()}getConfig(e){if(e&&typeof e!="boolean"&&e.enable)return e}}var oI=Object.defineProperty,sI=(n,e,t)=>e in n?oI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xo=(n,e,t)=>(sI(n,typeof e!="symbol"?e+"":e,t),t);let aI=class{constructor(){xo(this,"five"),xo(this,"_cursor"),xo(this,"_pointSelector"),xo(this,"_fiveDomEvents"),xo(this,"_object3DHelper"),xo(this,"inited",!1),xo(this,"init",e=>{this.inited=!0,this.five=e,this._cursor=void 0,this._pointSelector=void 0,this._fiveDomEvents=void 0,this._object3DHelper=void 0})}get cursor(){if(!this.inited)throw new Error("Global not inited");return this._cursor?this._cursor:(this._cursor=new j8(this.five.getElement()),this._cursor)}get pointSelector(){if(!this.inited)throw new Error("Global not inited");return this._pointSelector?this._pointSelector:(this._pointSelector=new tE(this.five,{mode:"cursor"}),this._pointSelector)}get fiveDomEvents(){if(!this.inited)throw new Error("Global not inited");return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Zh(this.five,{noEmitWhenNotInScene:!0}),this._fiveDomEvents)}get object3DHelper(){if(!this.inited)throw new Error("Global not inited");return this._object3DHelper?this._object3DHelper:(this._object3DHelper=new iI(this.five),this._object3DHelper)}};const f2=new aI;window.globalModules=f2;function p2(n,e){return n?e(n)?n:n.parent?p2(n.parent,e):null:null}function lI(n){const e=[...n];if(n.length<3)return n;const t=n[n.length-1],r=n[0];return t.equals(r)||e.push(r),e}var uI=Object.defineProperty,cI=Object.defineProperties,dI=Object.getOwnPropertyDescriptors,Oc=Object.getOwnPropertySymbols,v2=Object.prototype.hasOwnProperty,m2=Object.prototype.propertyIsEnumerable,Sf=(n,e,t)=>e in n?uI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Za=(n,e)=>{for(var t in e||(e={}))v2.call(e,t)&&Sf(n,t,e[t]);if(Oc)for(var t of Oc(e))m2.call(e,t)&&Sf(n,t,e[t]);return n},yv=(n,e)=>cI(n,dI(e)),hI=(n,e)=>{var t={};for(var r in n)v2.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Oc)for(var r of Oc(n))e.indexOf(r)<0&&m2.call(n,r)&&(t[r]=n[r]);return t},Os=(n,e,t)=>(Sf(n,typeof e!="symbol"?e+"":e,t),t);let g2=class extends Er{constructor(e){super(),Os(this,"name","PolylineBaseMesh"),Os(this,"lines",[]),Os(this,"withDots"),Os(this,"paramsStyle");const t=e,{withDots:r,points:i}=t,o=hI(t,["withDots","points"]);this.withDots=r??!0,i&&this.setPoints(i),o&&this.setStyle(o)}get style(){var e;return{lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:(e=this.paramsStyle)==null?void 0:e.lengthEnable}}get opacity(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.lineOpacity)!=null?r:(t=this.paramsStyle)==null?void 0:t.lineOpacity}get lineColor(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.color)!=null?r:(t=this.paramsStyle)!=null&&t.lineColor?new qe(this.paramsStyle.lineColor):void 0}get lineWidth(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.lineWidth)!=null?r:(t=this.paramsStyle)==null?void 0:t.lineWidth}get dashed(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.dashed)!=null?r:(t=this.paramsStyle)==null?void 0:t.dashed}get occlusionVisibility(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.occlusionVisibility)!=null?r:(t=this.paramsStyle)==null?void 0:t.occlusionVisibility}get occlusionMode(){var e,t,r;return(r=(e=this.lines[0])==null?void 0:e.occlusionMode)!=null?r:(t=this.paramsStyle)==null?void 0:t.occlusionMode}get points(){var e,t,r;return this.lines.map(i=>i.points[0]).concat((r=(t=this.lines)==null?void 0:t[((e=this.lines)==null?void 0:e.length)-1])==null?void 0:r.points[1]).filter(Boolean)}setPoints(e,t={closed:!1}){let r=e.map(Xe);t.closed&&(r=lI(r)),r.forEach((i,o)=>{var s;const a=r[o+1];if(o!==0&&a===void 0)return;const l=(s=this.lines[o])!=null?s:(()=>{const u=new nf(yv(Za({},this.style),{pointVisibility:this.withDots?{startPoint:o===0,endPoint:!0}:!1}));return this.lines[o]=u,this.add(u),u})();l.setStyle(this.style),l.setPoints([i,a])}),r.length===0?(this.lines.forEach(i=>i.removeFromParent()),this.lines=[]):r.length===1||this.lines.length>r.length-1&&this.lines.splice(r.length-1).forEach(i=>i.removeFromParent())}setStyle(e){this.paramsStyle=Za(Za({},this.paramsStyle),e),this.lines.forEach(t=>t.setStyle(this.paramsStyle))}highlight(){this.lines.forEach(e=>e.highlight())}unhighlight(){this.lines.forEach(e=>e.unhighlight())}},Fo=class extends g2{constructor(...e){super(yv(Za({},e[0]),{withDots:!1})),Os(this,"name","PolylineMesh")}},Gi=class extends g2{constructor(...e){super(yv(Za({},e[0]),{withDots:!0})),Os(this,"name","PolylineWithDotsMesh")}};var fI=Object.defineProperty,pI=Object.defineProperties,vI=Object.getOwnPropertyDescriptors,Q1=Object.getOwnPropertySymbols,mI=Object.prototype.hasOwnProperty,gI=Object.prototype.propertyIsEnumerable,Of=(n,e,t)=>e in n?fI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qd=(n,e)=>{for(var t in e||(e={}))mI.call(e,t)&&Of(n,t,e[t]);if(Q1)for(var t of Q1(e))gI.call(e,t)&&Of(n,t,e[t]);return n},X1=(n,e)=>pI(n,vI(e)),ii=(n,e,t)=>(Of(n,typeof e!="symbol"?e+"":e,t),t);const Yd=new Map;let Ei=class y2 extends Er{constructor(e,t){var r,i;super(),ii(this,"name","Sculpt"),ii(this,"isSculptObject",!0),ii(this,"draggable"),ii(this,"selected"),ii(this,"config"),ii(this,"on",(o,s,a)=>jt.modules.fiveDomEvents.addEventListener(this,o,s,a)),ii(this,"off",(...o)=>jt.modules.fiveDomEvents.removeEventListener(this,...o)),ii(this,"applyObjectMatrixWorld",(o,s)=>{const a=s??this;return a.updateMatrixWorld(),dl(a,o)}),ii(this,"applyObjectReversalMatrixWorld",(o,s)=>{const a=s??this;return a.updateMatrixWorld(),IP(a,o)}),e!=null&&e.id&&(this.uuid=e.id),this.config=qd({defaultAction:!0,occlusionVisibility:!0,occlusionMode:"translucence"},t),e&&(Ge((r=this.config)==null?void 0:r.occlusionMode)&&(e.style=X1(qd({},e.style),{occlusionMode:this.config.occlusionMode})),Ge((i=this.config)==null?void 0:i.occlusionVisibility)&&(e.style=X1(qd({},e.style),{occlusionVisibility:this.config.occlusionVisibility}))),Qn("esc",()=>{this.stopCreating()}),this.config.defaultAction&&(Qn("backspace, delete",()=>{this.selected&&this.delete()}),this.on("click",()=>{var o;this.editing||(this.select({only:!0}),this.editor.enable(),(o=this.parent)==null||o.children.forEach(s=>{var a;s instanceof y2&&s!==this&&((a=s._editor)==null||a.disable())}))}),Qn("esc",()=>{this.selected&&this.unselect()}))}get editing(){return this.pointSelector.enabled}get baseData(){return{id:this.uuid,type:this.type}}get pointSelector(){return jt.modules.pointSelector}undo(){throw new Error("Method not implemented.")}redo(){throw new Error("Method not implemented.")}canUndo(){throw new Error("Method not implemented.")}canRedo(){throw new Error("Method not implemented.")}stopCreating(){jt.modules.pointSelector.disable()}delete(){var e;this.stopCreating(),this.removeFromParent(),this.off(),(e=this.editor)==null||e.disable()}select(e={only:!1}){if(this.selected)return;this.selected=!0,this.highlight(),Yd.has(this.parent.uuid)||Yd.set(this.parent.uuid,[]);const t=Yd.get(this.parent.uuid);t.push(this),e.only&&(t==null||t.forEach(r=>{r!==this&&r.unselect()}))}unselect(){var e;this.selected&&(this.selected=!1,this.unhighlight(),(e=this._editor)==null||e.disable())}highlight(){}unhighlight(){}showDeleteButton(e,t){jt.modules.cursor.showDeleteButton({clientX:e,clientY:t,container:document.body,onClick:()=>this.delete()}),jt.modules.five.once("cameraUpdate",()=>{jt.modules.cursor.removeDeleteButton()})}};var yI=Object.defineProperty,q1=Object.getOwnPropertySymbols,AI=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable,$f=(n,e,t)=>e in n?yI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wI=(n,e)=>{for(var t in e||(e={}))AI.call(e,t)&&$f(n,t,e[t]);if(q1)for(var t of q1(e))bI.call(e,t)&&$f(n,t,e[t]);return n},$c=(n,e,t)=>($f(n,typeof e!="symbol"?e+"":e,t),t);let Av=class extends Er{constructor(e){super(),$c(this,"hooks",new Cn),$c(this,"originObject"),this.originObject=e}enable(){this.originObject.add(this)}disable(){this.originObject.remove(this)}},Ll=class extends Av{constructor(e,t){super(e),$c(this,"objectHelperConfig"),$c(this,"onObjectUpdate",()=>{this.hooks.emit("objectUpdate")}),this.objectHelperConfig=t}get helper(){var e;return(e=jt.modules.object3DHelper.getObject3DHelper(this.originObject))==null?void 0:e.helper}enable(){super.enable();const e=typeof this.objectHelperConfig=="function"?this.objectHelperConfig():this.objectHelperConfig;jt.modules.object3DHelper.addObject3DHelper(this.originObject,wI({positionFrom:"boundingBox"},e));const t=jt.modules.object3DHelper.getObject3DHelper(this.originObject).helper;t.hooks.on("move",this.onObjectUpdate),t.hooks.on("rotate",this.onObjectUpdate),t.hooks.on("scale",this.onObjectUpdate)}disable(){var e,t,r;super.disable(),(e=this.helper)==null||e.hooks.off("move",this.onObjectUpdate),(t=this.helper)==null||t.hooks.off("rotate",this.onObjectUpdate),(r=this.helper)==null||r.hooks.off("scale",this.onObjectUpdate),jt.modules.object3DHelper.removeObject3DHelper(this.originObject)}initialHelperMatrix(){var e;(e=this.helper)==null||e.initialHelperMatrix()}};var xI=Object.defineProperty,PI=(n,e,t)=>e in n?xI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ju=(n,e,t)=>(PI(n,typeof e!="symbol"?e+"":e,t),t);let bv=class extends Av{constructor(e){super(e),ju(this,"draggingPoints",[]),ju(this,"onDragstart",t=>{const r=t.target;this.draggingPoints=this.pointMeshes.filter(i=>i.position.equals(r.position))}),ju(this,"onDragend",t=>{this.draggingPoints=[]})}get pointMeshes(){return this.children.filter(e=>e instanceof bl)}get pointHandles(){return this.children}enable(){super.enable(),this.points.filter(Ge).forEach(e=>{const t=new bl;t.visible=!1,t.position.copy(e),t.draggable=!0,jt.modules.fiveDomEvents.addEventListener(t,"drag",this.onDrag),jt.modules.fiveDomEvents.addEventListener(t,"dragstart",this.onDragstart),jt.modules.fiveDomEvents.addEventListener(t,"dragend",this.onDragend),this.add(t)})}disable(){super.disable(),this.removeChildren()}},EI=class extends bv{constructor(e){super(e),ju(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const r=kl(jt.modules.five,t.raycaster);this.draggingPoints.forEach(i=>i.position.copy(r.point)),this.originObject.lineMesh.setPoints(this.pointMeshes.map(i=>i.position))})}get points(){return this.originObject.lineMesh.points}};var CI=Object.defineProperty,SI=(n,e,t)=>e in n?CI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,OI=(n,e,t)=>(SI(n,e+"",t),t);let $I=class extends bv{constructor(e){super(e),OI(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const r=kl(jt.modules.five,t.raycaster);this.draggingPoints.forEach(i=>i.position.copy(r.point)),this.originObject.polyLineMesh.setPoints(this.pointMeshes.map(i=>i.position))})}get points(){return this.originObject.polyLineMesh.points}};function Kn(n){return Array.isArray(n)?n.map(e=>[e.x,e.y,e.z]):[n.x,n.y,n.z]}var MI=Object.defineProperty,VI=Object.defineProperties,TI=Object.getOwnPropertyDescriptors,Y1=Object.getOwnPropertySymbols,_I=Object.prototype.hasOwnProperty,kI=Object.prototype.propertyIsEnumerable,Mf=(n,e,t)=>e in n?MI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Du=(n,e)=>{for(var t in e||(e={}))_I.call(e,t)&&Mf(n,t,e[t]);if(Y1)for(var t of Y1(e))kI.call(e,t)&&Mf(n,t,e[t]);return n},A2=(n,e)=>VI(n,TI(e)),mu=(n,e,t)=>(Mf(n,typeof e!="symbol"?e+"":e,t),t),II=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class K1 extends Ei{constructor(e,t){super(e,t),mu(this,"type","Polyline"),mu(this,"polyLineMesh"),mu(this,"_editor"),mu(this,"creatingObject"),e&&(this.polyLineMesh=new Gi(Du(Du({},e.style),e)),this.add(this.polyLineMesh))}get editor(){return this._editor||(this._editor=new $I(this)),this._editor}get data(){return A2(Du({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.polyLineMesh.points)),style:{lineColor:new qe(this.polyLineMesh.lineColor).getHex(),lineWidth:this.polyLineMesh.lineWidth,dashed:this.polyLineMesh.dashed}})}setData(e){e.points&&this.polyLineMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Xe))),this.polyLineMesh.setStyle(e.style)}highlight(){var e;(e=this.polyLineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.polyLineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return II(this,null,function*(){this.removeChildren();const t=new Gi(e);this.polyLineMesh=t,this.add(this.polyLineMesh),this.creatingObject=jI(t,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function jI(n,e,t){var r;const i=n.parent;if(!i)return;const{promise:o,resolve:s,reject:a}=qo(),l=(r=t==null?void 0:t.limit)!=null?r:"none",u=new Fo(n.style);i.add(u);const c=new Fo(A2(Du({},n.style),{dashed:!0,lengthEnable:!1}));i.add(c),e.enable();const d=[];let h,f,p;const v=[],b=()=>d.length>0,g=()=>v.length>0,y=()=>{b()&&(v.push(d.pop()),n.setPoints(d),V(p),e.pointSelectorHelper.magnifier.render())},E=()=>{g()&&(d.push(v.pop()),n.setPoints(d),V(p),e.pointSelectorHelper.magnifier.render())},C=M=>{v.length=0;const z=d.length===0?M.point:h.clone();d.push(z),n.setPoints(d)},V=M=>{const z=()=>{u.setPoints([]),c.setPoints([]),h=null};if(!M||(p=M,!(d!=null&&d.length)))return z();const U=d.at(-1).clone();l==="none"?(h=M.point,u.setPoints([U,h])):l==="xoz"?(f=f??new _n().setFromNormalAndCoplanarPoint(new H(0,1,0),d[0]),e.plane=f,h=f.projectPoint(M.point,new H),u.setPoints([U,h]),c.setPoints([h,M.point])):l==="y"&&(d.length===1?(h=M.point,u.setPoints([U,h])):(f=f??new _n().setFromCoplanarPoints(d[0],d[1],new H(0,1,0).add(d[0])),e.plane=f,h=f.projectPoint(M.point,new H),u.setPoints([U,h]),c.setPoints([h,M.point])))};return e.on("select",C),e.on("intersectionUpdate",V),e.on("disable",()=>{if(e.off("select",C),e.off("intersectionUpdate",V),e.plane=null,i.remove(u),i.remove(c),d.length<2)return i.remove(n),a(new Error("Cancelled"));s()}),{finished:o,canUndo:b,canRedo:g,undo:y,redo:E}}var DI=Object.defineProperty,LI=(n,e,t)=>e in n?DI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RI=(n,e,t)=>(LI(n,e+"",t),t);let zI=class extends Av{constructor(e){super(e),RI(this,"onDrag",t=>{var r;const i=kl(jt.modules.five,t.raycaster);(r=this.originObject.pointMesh)==null||r.position.copy(i.point)})}enable(){super.enable(),this.originObject.draggable=!0,this.originObject.on("drag",this.onDrag)}disable(){super.disable(),this.originObject.draggable=!1,this.originObject.off("drag",this.onDrag)}};var BI=Object.defineProperty,FI=Object.defineProperties,HI=Object.getOwnPropertyDescriptors,J1=Object.getOwnPropertySymbols,UI=Object.prototype.hasOwnProperty,NI=Object.prototype.propertyIsEnumerable,Vf=(n,e,t)=>e in n?BI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Kd=(n,e)=>{for(var t in e||(e={}))UI.call(e,t)&&Vf(n,t,e[t]);if(J1)for(var t of J1(e))NI.call(e,t)&&Vf(n,t,e[t]);return n},WI=(n,e)=>FI(n,HI(e)),Jd=(n,e,t)=>(Vf(n,typeof e!="symbol"?e+"":e,t),t),GI=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});let Z1=class extends Ei{constructor(e,t){super(e,t),Jd(this,"type","Point"),Jd(this,"pointMesh"),Jd(this,"_editor"),e&&(this.pointMesh=new bl(Kd(Kd({},e.style),e)),this.add(this.pointMesh))}get editor(){return this._editor||(this._editor=new zI(this)),this._editor}get data(){return WI(Kd({},this.baseData),{point:Kn(this.applyObjectMatrixWorld(this.pointMesh.position)),style:{color:this.pointMesh.color.getHex(),size:this.pointMesh.size}})}setData(e){e.point&&this.pointMesh.position.copy(Xe(e.point)),this.pointMesh.setStyle(e.style)}highlight(){var e;(e=this.pointMesh)==null||e.highlight()}unhighlight(){var e;(e=this.pointMesh)==null||e.unhighlight()}setStyle(e){this.pointMesh.setStyle(e)}create(e){return GI(this,null,function*(){this.pointMesh&&this.remove(this.pointMesh),this.add(this.pointMesh=new bl(e)),yield QI(this.pointMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}};function QI(n,e){return new Promise((t,r)=>{e.enable(),n.visible=!1;const i=l=>{l&&(n.visible=!0,n.position.copy(l.point))},o=l=>{l&&(n.visible=!0,n.position.copy(l.point),s())},s=()=>{e.off("select",o),e.off("disable",a),e.off("intersectionUpdate",i),e.disable(),t()},a=()=>{e.off("select",o),e.off("disable",a),e.off("intersectionUpdate",i),n.removeFromParent(),r(new Error("Cancelled"))};e.on("intersectionUpdate",i),e.on("disable",a),e.once("select",o)})}var XI=Object.defineProperty,qI=Object.defineProperties,YI=Object.getOwnPropertyDescriptors,Mc=Object.getOwnPropertySymbols,b2=Object.prototype.hasOwnProperty,w2=Object.prototype.propertyIsEnumerable,Tf=(n,e,t)=>e in n?XI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gu=(n,e)=>{for(var t in e||(e={}))b2.call(e,t)&&Tf(n,t,e[t]);if(Mc)for(var t of Mc(e))w2.call(e,t)&&Tf(n,t,e[t]);return n},ey=(n,e)=>qI(n,YI(e)),KI=(n,e)=>{var t={};for(var r in n)b2.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Mc)for(var r of Mc(n))e.indexOf(r)<0&&w2.call(n,r)&&(t[r]=n[r]);return t},ty=(n,e,t)=>(Tf(n,typeof e!="symbol"?e+"":e,t),t);let JI=class extends Jp{constructor(e){const t=e??{},{points:r}=t,i=KI(t,["points"]);super(),ty(this,"name","PolygonWithEdgeMesh"),ty(this,"line",new Fo),r&&this.setPoints(r),i&&this.setStyle(i)}get style(){return ey(gu({},super.style),{lineWidth:this.lineWidth,lineColor:this.lineColor})}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}raycast(e,t){return this.children.forEach(r=>{bp(r,e,t,!0)}),!1}setPoints(e,t){super.setPoints(e,gu({closed:!0},t)),this.points&&(this.line.setPoints(this.points,gu({closed:!0},t)),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),e.lineOpacity!==void 0?this.line.setStyle(ey(gu({},e),{lineOpacity:e.lineOpacity})):this.line.setStyle(e),this.needsRender=!0}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}};var ZI=Object.defineProperty,ej=(n,e,t)=>e in n?ZI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tj=(n,e,t)=>(ej(n,e+"",t),t);class _f extends JI{constructor(){super(...arguments),tj(this,"name","AreaMesh")}}var nj=Object.defineProperty,rj=(n,e,t)=>e in n?nj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ij=(n,e,t)=>(rj(n,e+"",t),t);let oj=class extends bv{constructor(e){super(e),ij(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const r=kl(jt.modules.five,t.raycaster),i=this.originObject.areaMesh.projectPoint(r.point);this.draggingPoints.forEach(o=>o.position.copy(i)),this.originObject.areaMesh.setPoints(this.pointMeshes.map(o=>o.position))})}get points(){return this.originObject.areaMesh.points}};var sj=Object.defineProperty,aj=Object.defineProperties,lj=Object.getOwnPropertyDescriptors,ny=Object.getOwnPropertySymbols,uj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable,kf=(n,e,t)=>e in n?sj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lu=(n,e)=>{for(var t in e||(e={}))uj.call(e,t)&&kf(n,t,e[t]);if(ny)for(var t of ny(e))cj.call(e,t)&&kf(n,t,e[t]);return n},x2=(n,e)=>aj(n,lj(e)),yu=(n,e,t)=>(kf(n,typeof e!="symbol"?e+"":e,t),t),dj=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class ry extends Ei{constructor(e,t){super(e,t),yu(this,"type","Polygon"),yu(this,"areaMesh"),yu(this,"_editor"),yu(this,"creatingObject"),e&&(this.areaMesh=new _f(Lu(Lu({},e.style),e)),this.add(this.areaMesh))}get editor(){return this._editor||(this._editor=new oj(this)),this._editor}get data(){return this.updateMatrixWorld(),x2(Lu({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.areaMesh.points)),style:{color:this.areaMesh.color.getHex(),lineColor:this.areaMesh.lineColor.getHex(),lineWidth:this.areaMesh.lineWidth}})}setData(e){e.points&&this.areaMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Xe))),this.areaMesh.setStyle(e.style)}highlight(){var e;(e=this.areaMesh)==null||e.highlight()}unhighlight(){var e;(e=this.areaMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return dj(this,null,function*(){this.children.forEach(r=>{r.parent===this&&this.remove(r)}),this.children.length=0;const t=new _f(e);this.areaMesh=t,this.add(this.areaMesh),this.creatingObject=P2(this.areaMesh,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function P2(n,e,t){var r;const{promise:i,resolve:o,reject:s}=qo(),a=n.parent;if(!a){s(new Error("No container"));return}const l=(r=t==null?void 0:t.limit)!=null?r:"none",u=new Fo(n.style);a==null||a.add(u);const c=new Fo(x2(Lu({},n.style),{dashed:!0,lengthEnable:!1}));a==null||a.add(c),e.enable();const d=[];let h,f,p=!1,v;const b=[],g=()=>d.length>0,y=()=>b.length>0,E=()=>{g()&&(b.push(d.pop()),M(v),e.pointSelectorHelper.magnifier.render())},C=()=>{y()&&(d.push(b.pop()),M(v),e.pointSelectorHelper.magnifier.render())},V=D=>{b.length=0;const m=d.length===0?D.point:h.clone();d.push(m),n.setPoints(d,{closed:!1}),p&&(z(),o())},M=D=>{const m=()=>{u.setPoints([]),c.setPoints([]),n.setPoints(d),e.pointSelectorHelper.magnifier.render()};if(!D||(v=D,!(d!=null&&d.length)))return m();const A=d.at(-1).clone();if(d.length<3&&(l==="none"?(h=D.point,u.setPoints([A,h]),c.setPoints([])):l==="xoz"?(f=f??new _n().setFromNormalAndCoplanarPoint(new H(0,1,0),d[0]),e.plane=f,h=f.projectPoint(D.point,new H),u.setPoints([A,h]),c.setPoints([h,D.point])):l==="y"&&(d.length===1?(h=D.point,u.setPoints([A,h]),c.setPoints([])):(f=f??new _n().setFromCoplanarPoints(d[0],d[1],new H(0,1,0).add(d[0])),e.plane=f,h=f.projectPoint(D.point,new H),u.setPoints([A,h]),c.setPoints([h,D.point])))),d.length>=3){h=n.projectPoint(D.point);const x=d[0],S=.2;x.distanceTo(h)<S||x.distanceTo(D.point)<S?(h=x,D.point.copy(x),e.pointSelectorHelper.updateWithIntersect(D,{emitEvent:!1}),p=!0):p=!1,u.setPoints([A,h]),c.setPoints([h,D.point])}d.length>=2?(n.setPoints([...d,h],{closed:!1}),n.line.setPoints(n.points.slice(0,-1)),n.isBlank?(e.cursorError=!0,u.setStyle({lineColor:16734553}),c.setStyle({lineColor:16734553})):(e.cursorError=!1,u.setStyle({lineColor:n.lineColor}),c.setStyle({lineColor:n.lineColor}))):n.setPoints([])},z=()=>{e.off("select",V),e.off("intersectionUpdate",M),e.off("disable",U),e.plane=null,e.disable(),a==null||a.remove(u,c)},U=()=>{z(),a==null||a.remove(n,c,u),s(new Error("Cancelled"))};return e.on("select",V),e.on("intersectionUpdate",M),e.on("disable",U),{finished:i,canUndo:g,canRedo:y,undo:E,redo:C}}function hj(n){const e=[...n],t=[];for(let r=0;r<e.length-2;r++)t.push(0,r+1,r+2);return t}function fj(n){const e=n.map(t=>new H(t[0],t[1],t[2]));return mw(e)}var pj=Object.defineProperty,vj=(n,e,t)=>e in n?pj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zd=(n,e,t)=>(vj(n,typeof e!="symbol"?e+"":e,t),t);let mj=class extends Tt{constructor(e){super(),Zd(this,"bottomPositions",[]),Zd(this,"topPosition",[]),Zd(this,"_type","Concave"),e&&this.setPosition(e)}setPosition(e){var t,r,i;const o=(t=e.bottomPositions)!=null?t:this.bottomPositions,s=(r=e.topPosition)!=null?r:this.topPosition;if(this._type=(i=e.type)!=null?i:this._type,this.bottomPositions=o,this.topPosition=s,!o||o.length<3){console.error("PrismGeometry: Invalid parameters",o,s,e),this.bottomPositions=[],this.setAttribute("position",new Ct(new Float32Array([]),3));return}const a=[],l=[];l.push(...o),l[0][0]===l.at(-1)[0]&&l[0][1]===l.at(-1)[1]&&l[0][2]===l.at(-1)[2]&&(l.length-=1);const u=this._type==="Concave"?fj(l):hj(l);if(a.push(...u),s&&s.length===3){const c=[s[0]-o[0][0],s[1]-o[0][1],s[2]-o[0][2]],d=l.map(f=>[f[0]+c[0],f[1]+c[1],f[2]+c[2]]);l.push(...d);const h=a.map(f=>f+l.length/2);a.push(...h);for(let f=0;f<l.length/2-1;f++)a.push(f,f+1,f+l.length/2),a.push(f+1,f+l.length/2+1,f+l.length/2);a.push(0,l.length/2,l.length/2-1),a.push(l.length/2,l.length-1,l.length/2-1)}this.setAttribute("position",new mr(l.flat(),3)),this.setIndex(a),this.computeBoundingSphere()}};var gj=Object.defineProperty,iy=Object.getOwnPropertySymbols,yj=Object.prototype.hasOwnProperty,Aj=Object.prototype.propertyIsEnumerable,If=(n,e,t)=>e in n?gj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,oy=(n,e)=>{for(var t in e||(e={}))yj.call(e,t)&&If(n,t,e[t]);if(iy)for(var t of iy(e))Aj.call(e,t)&&If(n,t,e[t]);return n},ys=(n,e,t)=>(If(n,typeof e!="symbol"?e+"":e,t),t);let jf=class extends Er{constructor(e){super(),ys(this,"name","PrismMesh"),ys(this,"_geometryInfoCache"),ys(this,"geometryInfoNeedUpdate",!0),ys(this,"edgeMesh",new Hr),ys(this,"prismMesh",new ed),ys(this,"paramStyle"),this.prismMesh.name="PrismMesh",this.prismMesh.geometry=new mj,this.edgeMesh.name="EdgeMesh",this.addIfNotExists(this.prismMesh,this.edgeMesh),e&&this.setPoints(e),this.setStyle(e)}get topPosition(){return new H().fromArray(this.prismMesh.geometry.topPosition)}get bottomPositions(){return this.prismMesh.geometry.bottomPositions.map(e=>new H().fromArray(e))}get topPositions(){const e=this.bottomPositions[0].clone().sub(this.topPosition);return this.bottomPositions.map(t=>t.clone().sub(e))}get style(){return{color:this.color,lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get opacity(){return this.prismMesh.opacity}get occlusionVisibility(){return this.prismMesh.occlusionVisibility}get occlusionMode(){return this.prismMesh.occlusionMode}get center(){return this.localCenter.clone()}get localCenter(){var e;return(e=this.geometryInfo.center.clone())!=null?e:new H(9999,9999,9999)}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.prismMesh.geometry.bottomPositions,t=this.prismMesh.geometry.topPosition;if(!e||e.length<3||!t){this._geometryInfoCache=void 0;return}const r=e.map((l,u)=>u>=e.length-2?null:[new H().fromArray(e[0]),new H().fromArray(e[u+1]),new H().fromArray(e[u+2])]).filter(Boolean);if(r.length===0){this._geometryInfoCache=void 0;return}let i=0,o=new H;for(const[l,u,c]of r){const d=Yp(l,u,c),h=gw(l,u,c,d);i+=d,o.add(h)}o=o.divideScalar(i);const s=new H().fromArray(t).sub(new H().fromArray(e[0])),a=o.clone().add(s.divideScalar(2));this._geometryInfoCache={center:a}}return this._geometryInfoCache}get worldCenter(){return this.updateMatrixWorld(),this.localToWorld(this.localCenter)}get color(){return this.prismMesh.color}get lineWidth(){return this.edgeMesh.style.lineWidth}get lineColor(){return this.edgeMesh.color}setStyle(e={}){this.paramStyle=oy(oy({},this.paramStyle),e),this.prismMesh.setStyle(this.paramStyle),this.edgeMesh.setStyle(this.paramStyle)}setPoints(e){var t;this.prismMesh.geometry.setPosition({bottomPositions:(t=e.points)==null?void 0:t.map(Xe).map(r=>r.toArray()),topPosition:e.heightPoint?Xe(e.heightPoint).toArray():void 0}),this.edgeMesh.geometry=new Vu().fromEdgesGeometry(new _y(this.prismMesh.geometry)),this.geometryInfoNeedUpdate=!0}highlight(){this.prismMesh.highlight()}unhighlight(){this.prismMesh.unhighlight()}raycast(e,t){return this.children.forEach(r=>bp(r,e,t,!0)),!1}},bj=class extends Ll{constructor(e){super(e,()=>({positionFrom:()=>e.worldCenter,yAxis:()=>e.up,scaleHelper:{enable:!0,positions:()=>{const t=e.bottomPositions,r=e.topPosition,i=new H().subVectors(r,t[0]),o=e.geometryInfo.center,s=o.clone().sub(i.clone().divideScalar(2)),a=o.clone().add(i.clone().divideScalar(2));return[{id:"top",handlePosition:a,basePosition:s},{id:"bottom",handlePosition:s,basePosition:a}]},scaleCallback:t=>{const{intersectPoint:r,scalePosition:i}=t,{id:o,basePosition:s,handlePosition:a}=i;if(o==="top"){const l=r.clone().sub(s);e.setPoints({heightPoint:e.bottomPositions[0].clone().add(l)})}else if(o==="bottom"){const l=r.clone().sub(s);e.setPoints({points:e.topPositions.map(u=>u.clone().add(l))})}}}}))}};var wj=Object.defineProperty,xj=Object.defineProperties,Pj=Object.getOwnPropertyDescriptors,sy=Object.getOwnPropertySymbols,Ej=Object.prototype.hasOwnProperty,Cj=Object.prototype.propertyIsEnumerable,Df=(n,e,t)=>e in n?wj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eh=(n,e)=>{for(var t in e||(e={}))Ej.call(e,t)&&Df(n,t,e[t]);if(sy)for(var t of sy(e))Cj.call(e,t)&&Df(n,t,e[t]);return n},Sj=(n,e)=>xj(n,Pj(e)),th=(n,e,t)=>(Df(n,typeof e!="symbol"?e+"":e,t),t),E2=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class ay extends Ei{constructor(e,t){super(e,t),th(this,"type","Prism"),th(this,"prismMesh"),th(this,"_editor"),e&&(this.prismMesh=new jf(eh(eh({},e.style),e)),this.add(this.prismMesh))}get editor(){return this._editor||(this._editor=new bj(this.prismMesh)),this._editor}get data(){return Sj(eh({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.prismMesh.bottomPositions,this.prismMesh)),heightPoint:Kn(this.applyObjectMatrixWorld(this.prismMesh.topPosition,this.prismMesh)),style:{color:this.prismMesh.color.getHex(),lineWidth:this.prismMesh.lineWidth,lineColor:this.prismMesh.lineColor.getHex()}})}setData(e){this.prismMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Xe),this.prismMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Xe(e.heightPoint),this.prismMesh):void 0}),this.prismMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.prismMesh)==null||e.highlight()}unhighlight(){var e;(e=this.prismMesh)==null||e.unhighlight()}create(e){return E2(this,null,function*(){this.prismMesh=new jf(e),this.add(this.prismMesh),yield Oj(this.prismMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function Oj(n,e){return E2(this,null,function*(){const t=n.parent,r=new _f(n.style);t.add(r),yield P2(r,e).finished,t.remove(r),n.setPoints({points:r.points});const i=new Hr;i.name="LineHelper",t.add(i);const o=r.points.at(-1),s=ho(r.points),a=o.clone().add(s.clone().multiplyScalar(100)),l=o.clone().sub(s.clone().multiplyScalar(100));return i.setPoints([a,l]),e.enable(),new Promise((u,c)=>{const d=v=>{f(),u()},h=v=>{if(!(v!=null&&v.raycaster))return;const b=Ki({raycaster:v.raycaster,line:new qn(a,l)});b&&n.setPoints({heightPoint:b})},f=()=>{e.off("select",d),e.off("intersectionUpdate",h),e.off("disable",p),t.remove(i),e.disable()},p=()=>{f(),t.remove(n),c(new Error("Cancelled"))};e.on("select",d),e.on("intersectionUpdate",h),e.on("disable",p)})})}let $j=class extends Ll{constructor(e){super(e,()=>({yAxis:()=>{const t=e.points;return ho(t).normalize()},zAxis:()=>{const t=e.points;return t[0].clone().sub(t[1]).normalize()},scaleHelper:{enable:!0,positions:()=>{const t=e.points,r=t[0].clone().lerp(t[3],.5),i=t[1].clone().lerp(t[2],.5),o=t[0].clone().lerp(t[1],.5),s=t[3].clone().lerp(t[2],.5);return[{id:"left",handlePosition:r,basePosition:i},{id:"right",handlePosition:i,basePosition:r},{id:"top",handlePosition:o,basePosition:s},{id:"bottom",handlePosition:s,basePosition:o}]},scaleCallback:t=>{const{intersectPoint:r,scalePosition:i}=t,{id:o,basePosition:s}=i,a=r.clone().sub(s),l=e.points;o==="top"?e.setPoints([l[3].clone().add(a),l[2].clone().add(a),l[2],l[3]]):o==="bottom"?e.setPoints([l[0],l[1],l[1].clone().add(a),l[0].clone().add(a)]):o==="left"?e.setPoints([l[1].clone().add(a),l[1],l[2],l[2].clone().add(a)]):o==="right"&&e.setPoints([l[0],l[0].clone().add(a),l[3].clone().add(a),l[3]])}}}))}};var Mj=Object.defineProperty,Vj=(n,e,t)=>e in n?Mj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ly=(n,e,t)=>(Vj(n,typeof e!="symbol"?e+"":e,t),t);let Tj=class extends Tt{constructor(e){if(super(),ly(this,"name","RectangleGeometry"),ly(this,"points"),e.length!==4){console.error("Invalid number of points, it's not a rectangle");return}this.points=e.slice(0,4),this.setAttribute("position",new Ct(new Float32Array(this.points.flatMap(t=>t.toArray())),3)),this.setIndex(new Ct(new Uint16Array([0,1,2,0,2,3]),1))}};var _j=Object.defineProperty,kj=(n,e,t)=>e in n?_j(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ij=(n,e,t)=>(kj(n,e+"",t),t);let C2=class extends Jp{constructor(e){super(e),Ij(this,"name","RectangleMesh")}get color(){return this.meshFont.material.color}setPoints(e){const t=e.map(Xe).filter(Ge);if(t.length<3){console.error("Invalid position");return}if(e.length===3){const[r,i,o]=t,s=r.clone().add(o).sub(i);t.push(s)}this.points=t,this.geometry=new Tj(t),this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0}};var jj=Object.defineProperty,Vc=Object.getOwnPropertySymbols,S2=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable,Lf=(n,e,t)=>e in n?jj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uy=(n,e)=>{for(var t in e||(e={}))S2.call(e,t)&&Lf(n,t,e[t]);if(Vc)for(var t of Vc(e))O2.call(e,t)&&Lf(n,t,e[t]);return n},Dj=(n,e)=>{var t={};for(var r in n)S2.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Vc)for(var r of Vc(n))e.indexOf(r)<0&&O2.call(n,r)&&(t[r]=n[r]);return t},cy=(n,e,t)=>(Lf(n,typeof e!="symbol"?e+"":e,t),t);let Rf=class extends C2{constructor(e){const t=e??{},{points:r}=t,i=Dj(t,["points"]);super(),cy(this,"name","RectangleWithEdgeMesh"),cy(this,"line",new Fo),r&&this.setPoints(r),i&&this.setStyle(i)}get style(){return uy(uy({},super.style),this.line.style)}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}setPoints(e){super.setPoints(e),this.points&&(this.line.setPoints([this.points[0],this.points[1],this.points[2],this.points[3],this.points[0]]),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),this.line.setStyle(e)}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}};function $2(n,e){const t=ho(n),r=Yn(...n),i=e.clone().sub(r);return t.dot(i)>=0?n:n.slice().reverse()}var Lj=Object.defineProperty,Rj=Object.defineProperties,zj=Object.getOwnPropertyDescriptors,dy=Object.getOwnPropertySymbols,Bj=Object.prototype.hasOwnProperty,Fj=Object.prototype.propertyIsEnumerable,zf=(n,e,t)=>e in n?Lj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yi=(n,e)=>{for(var t in e||(e={}))Bj.call(e,t)&&zf(n,t,e[t]);if(dy)for(var t of dy(e))Fj.call(e,t)&&zf(n,t,e[t]);return n},ko=(n,e)=>Rj(n,zj(e)),nh=(n,e,t)=>(zf(n,typeof e!="symbol"?e+"":e,t),t),Hj=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class hy extends Ei{constructor(e,t){super(e,t),nh(this,"type","Rectangle"),nh(this,"rectangleMesh"),nh(this,"_editor"),e&&(this.rectangleMesh=new Rf(yi(yi({},e.style),e)),this.add(this.rectangleMesh))}get editor(){return this._editor||(this._editor=new $j(this.rectangleMesh)),this._editor}get data(){return ko(yi({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.rectangleMesh.points,this.rectangleMesh)),style:{color:this.rectangleMesh.color.getHex(),opacity:this.rectangleMesh.opacity,lineWidth:this.rectangleMesh.lineWidth,lineColor:this.rectangleMesh.lineColor.getHex()}})}setData(e){e.points&&this.rectangleMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Xe),this.rectangleMesh)),this.rectangleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.rectangleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.rectangleMesh)==null||e.unhighlight()}create(e){return Hj(this,null,function*(){this.removeChildren();const t=new Rf(e);this.rectangleMesh=t,this.add(this.rectangleMesh),yield M2(this.rectangleMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}}function M2(n,e,t){var r;return((r=t==null?void 0:t.drawMethod)!=null?r:"diagonal")==="diagonal"?Nj(n,e,t):Wj(n,e,t)}function Uj(n,e){const t=[];return n.scene.traverse(r=>{var i;if(r.visible&&!((i=e==null?void 0:e.excludes)!=null&&i.includes(r))&&(r instanceof C2||r instanceof Jp)){const o=r.points.map(s=>{const a=new Tr(s.x,s.y,s.z,r.normal);return r.style.occlusionVisibility&&(a.IsAlwaysVisible=!0),a});t.push(...o)}}),t}function Nj(n,e,t){var r;const{promise:i,reject:o,resolve:s}=qo(),a=n.parent;if(!a)return o(new Error("No container"));const l=(r=t==null?void 0:t.limit)!=null?r:"none",u=new Gi(ko(yi({},n.style),{dashed:!0})),c=new Gi(ko(yi({},n.style),{dashed:!0,lengthEnable:!1})),d=new Gi(ko(yi({},n.style),{dashed:!1,lengthEnable:!1}));a.add(u,d,c),e.enable();const h=[];let f=new H,p=new H;const v=new _n,b=()=>{h.push(f.clone()),h.length===1?(l==="xoz"&&v.setFromNormalAndCoplanarPoint(new H(0,1,0),h[0]),l==="none"&&v.setFromNormalAndCoplanarPoint(p,h[0])):h.length===2?l==="y"||l==="xoz"?(y(),s()):d.setPoints([h[0],h[1]]):h.length===3&&(y(),s())},g=C=>{var V,M;if(!(C!=null&&C.raycaster))return;const z=(V=h.at(-1))==null?void 0:V.clone();if(h.length===0){f=C.point.clone(),p=(M=C.face)==null?void 0:M.normal;return}if(h.length===1&&l==="y"){const U=new qn(new H(0,1,0).add(h[0]),new H(0,-1,0).add(h[0])).closestPointToPoint(C.point,!1,new H);n.setPoints([h[0],U,C.point]);return}if(h.length===1&&l==="xoz"){const U=new qn(new H(1,0,0).add(h[0]),new H(-1,0,0).add(h[0])),D=C.raycaster.ray.intersectPlane(v,new H),m=U.closestPointToPoint(D,!1,new H);n.setPoints([h[0],m,D]);return}if(h.length===1&&l==="none"){v?(f=C.raycaster.ray.intersectPlane(v,new H),c.setPoints([f,C.point])):f=C.point.clone(),u.setPoints([z,f]);return}if(h.length===2&&l==="none"){a.remove(u);const U=C.raycaster.ray.intersectPlane(v,new H),D=h[0].distanceTo(h[1])/2,m=new H().lerpVectors(h[0],h[1],.5),A=new H().subVectors(U,m).normalize();f=new H().addVectors(m,A.multiplyScalar(D));const x=[h[0],f,h[1]],S=$2(x,jt.modules.five.camera.position);n.setPoints(S);return}},y=()=>{e.off("select",b),e.off("intersectionUpdate",g),e.off("disable",E),e.disable(),a==null||a.remove(u,d,c)},E=()=>{y(),a==null||a.remove(n),o(new Error("Cancelled"))};return e.on("select",b),e.on("intersectionUpdate",g),e.on("disable",E),i}function Wj(n,e,t){var r;const{promise:i,reject:o,resolve:s}=qo(),a=n.parent;if(!a)return o(new Error("No container"));const l=(r=t==null?void 0:t.limit)!=null?r:"none",u=new Gi(ko(yi({},n.style),{dashed:!0})),c=new Gi(ko(yi({},n.style),{dashed:!0,lengthEnable:!1})),d=new Gi(ko(yi({},n.style),{dashed:!1,lengthEnable:!1}));a.add(u,d,c),e.enable(),e.setAdherePoints(Uj(e.five,{excludes:[n]}));const h=[];let f=new H,p=new H;const v=new _n,b=()=>{if(h.push(f.clone()),h.length===1)e.planeMode="onlyPlane",l==="y"&&(e.adhereLine=[new qn(h[0],new H(0,1,0).add(h[0]))]),l==="xoz"&&(v.setFromNormalAndCoplanarPoint(new H(0,1,0),h[0]),e.plane=v),l==="none"&&(v.setFromNormalAndCoplanarPoint(p,h[0]),e.plane=v);else if(h.length===2){e.planeMode="vertical",l==="y"&&(e.adhereLine=[]);let C=!1;h[0].x===h[1].x&&h[0].z===h[1].z&&(C=!0),l==="y"&&!C&&(v.setFromCoplanarPoints(h[0],h[1],new H(0,1,0).add(h[0])),e.plane=v),d.setPoints([h[0],h[1]])}else h.length===3&&(y(),s())},g=C=>{var V,M,z,U;if(!C||!(C!=null&&C.raycaster))return;const D=(V=h.at(-1))==null?void 0:V.clone();if(h.length===0){f=C.point.clone(),p=(M=C.face)==null?void 0:M.normal;return}if(h.length===1){f=C.point,c.setPoints([(z=C.originalPoint)!=null?z:C.point,C.point]),u.setPoints([D,f]);return}if(h.length===2){if(!e.plane){const S=ho([h[0],h[1],C.point]);v.setFromNormalAndCoplanarPoint(S,h[0])}c.setPoints([(U=C.originalPoint)!=null?U:C.point,C.point]);const m=new H().crossVectors(h[0].clone().sub(h[1]),v.normal).normalize();f=new qn(h[1].clone().add(m),h[1].clone().sub(m)).closestPointToPoint(C.point,!1,new H);const A=[h[0],h[1],f],x=$2(A,jt.modules.five.camera.position);n.setPoints(x);return}},y=()=>{e.setAdherePoints([]),e.adhereLine=[],e.adherePlane=[],e.plane=void 0,e.off("select",b),e.off("intersectionUpdate",g),e.off("disable",E),e.disable(),a==null||a.remove(u,d,c)},E=()=>{y(),a==null||a.remove(n),o(new Error("Cancelled"))};return e.on("select",b),e.on("intersectionUpdate",g),e.on("disable",E),i}class Gj extends Ll{constructor(e){super(e,()=>({yAxis:()=>e.normal}))}}function V2(n){return Math.max(32,Math.min(128,Math.floor(n*40)))}var Qj=Object.defineProperty,Xj=(n,e,t)=>e in n?Qj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rh=(n,e,t)=>(Xj(n,typeof e!="symbol"?e+"":e,t),t);class qj extends ed{constructor(e){super(e),rh(this,"_normal"),rh(this,"_center"),rh(this,"_radius"),e!=null&&e.center&&e!=null&&e.normal&&e!=null&&e.radius&&this.setPoints(e)}get center(){return this.position.clone()}get normal(){return this._normal}set normal(e){this._normal=e}get radius(){var e,t;return(t=(e=this.meshFont.geometry)==null?void 0:e.parameters)==null?void 0:t.radius}setPoints(e){var t,r,i;if(this._center=(t=Xe(e.center))!=null?t:this._center,this._normal=((r=Xe(e.normal))!=null?r:this._normal).normalize(),this._radius=(i=e.radius)!=null?i:this._radius,Ge(this._radius)&&this._radius!==this.radius){const o=V2(this._radius);this.geometry=new Oo(this._radius,o)}this._center&&this.position.copy(this._center),this._normal&&(this.lookAt(this._normal.clone().add(this._center)),this.normal=this._normal.clone()),this.needsRender=!0}}var Yj=Object.defineProperty,fy=Object.getOwnPropertySymbols,Kj=Object.prototype.hasOwnProperty,Jj=Object.prototype.propertyIsEnumerable,Zj=(n,e,t)=>e in n?Yj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eD=(n,e)=>{var t={};for(var r in n)Kj.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fy)for(var r of fy(n))e.indexOf(r)<0&&Jj.call(n,r)&&(t[r]=n[r]);return t},tD=(n,e,t)=>(Zj(n,e+"",t),t);class Tc extends qj{constructor(e){const t=e??{},{normal:r,radius:i,center:o}=t,s=eD(t,["normal","radius","center"]);super(s),tD(this,"edgeLine"),this.edgeLine=new Hr(s),this.add(this.edgeLine),r&&i&&o&&this.setPoints({normal:r,radius:i,center:o})}setPoints(...e){super.setPoints(...e);const t=this.meshFont.geometry.vertices.slice(1);this.edgeLine.setPoints(t.concat(t[0]))}setStyle(e){super.setStyle(e),this.edgeLine.setStyle(e)}highlight(){super.highlight(),this.edgeLine.highlight()}unhighlight(){super.unhighlight(),this.edgeLine.unhighlight()}}var nD=Object.defineProperty,rD=Object.defineProperties,iD=Object.getOwnPropertyDescriptors,py=Object.getOwnPropertySymbols,oD=Object.prototype.hasOwnProperty,sD=Object.prototype.propertyIsEnumerable,Bf=(n,e,t)=>e in n?nD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ih=(n,e)=>{for(var t in e||(e={}))oD.call(e,t)&&Bf(n,t,e[t]);if(py)for(var t of py(e))sD.call(e,t)&&Bf(n,t,e[t]);return n},aD=(n,e)=>rD(n,iD(e)),oh=(n,e,t)=>(Bf(n,typeof e!="symbol"?e+"":e,t),t),lD=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});let vy=class extends Ei{constructor(e,t){super(e,t),oh(this,"type","Circle"),oh(this,"circleMesh"),oh(this,"_editor"),e&&(this.circleMesh=new Tc(ih(ih({},e.style),e)),this.add(this.circleMesh))}get editor(){return this._editor||(this._editor=new Gj(this.circleMesh)),this._editor}get data(){return aD(ih({},this.baseData),{center:Kn(this.applyObjectMatrixWorld(this.circleMesh.center,this.circleMesh)),normal:Kn(this.circleMesh.normal.clone().applyQuaternion(this.circleMesh.quaternion)),radius:this.circleMesh.radius,style:{color:this.circleMesh.color.getHex()}})}setData(e){this.circleMesh.setPoints({center:e.center?this.applyObjectReversalMatrixWorld(Xe(e.center),this.circleMesh):void 0,normal:e.normal?Xe(e.normal):void 0,radius:e.radius}),this.circleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.circleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.circleMesh)==null||e.unhighlight()}create(e){return lD(this,null,function*(){this.children.forEach(r=>{r.parent===this&&this.remove(r)}),this.children.length=0;const t=new Tc(e);this.circleMesh=t,this.add(this.circleMesh),yield T2(this.circleMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}};function T2(n,e){return new Promise((t,r)=>{const i=n.parent;if(!i){r(new Error("No container"));return}const o=new Fo({dashed:!0});i.add(o),e.enable();let s,a;const l=h=>{if(h){if(!s){s={point:h.point,normal:h.face.normal};return}s&&a&&(c(),t())}},u=h=>{if(!h||!s)return;const f=new _n().setFromNormalAndCoplanarPoint(s.normal,s.point);if(a=h.raycaster.ray.intersectPlane(f,new H),a){const p=s.point.distanceTo(a);n.setPoints({center:s.point,normal:s.normal,radius:p})}},c=()=>{e.off("select",l),e.off("intersectionUpdate",u),e.off("disable",d),e.disable(),i==null||i.remove(o)},d=()=>{c(),i==null||i.remove(n,o),r(new Error("Cancelled"))};e.on("select",l),e.on("intersectionUpdate",u),e.on("disable",d)})}var uD=Object.defineProperty,my=Object.getOwnPropertySymbols,cD=Object.prototype.hasOwnProperty,dD=Object.prototype.propertyIsEnumerable,Ff=(n,e,t)=>e in n?uD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gy=(n,e)=>{for(var t in e||(e={}))cD.call(e,t)&&Ff(n,t,e[t]);if(my)for(var t of my(e))dD.call(e,t)&&Ff(n,t,e[t]);return n},Fi=(n,e,t)=>(Ff(n,typeof e!="symbol"?e+"":e,t),t);let yy=class extends Er{constructor(e){super(),Fi(this,"bottomCircle"),Fi(this,"topCircle"),Fi(this,"edgeMesh"),Fi(this,"highlighted",!1),Fi(this,"params"),Fi(this,"_topCenter"),Fi(this,"_bottomCenter"),Fi(this,"_radius"),this.params=e,this.bottomCircle=new Tc(e),this.bottomCircle.name="bottomCircle",this.topCircle=new Tc(e),this.topCircle.name="topCircle",this.edgeMesh=new ed(e),e!=null&&e.bottomCenter&&e!=null&&e.topCenter&&e!=null&&e.radius&&this.setPoints(e),this.addIfNotExists(this.bottomCircle)}get bottomCenter(){return this.bottomCircle.center}get topCenter(){return this.topCircle.center}get normal(){return this.bottomCircle.normal}get radius(){return this.bottomCircle.radius}get color(){return this.bottomCircle.color}setPoints(e){var t,r;if(this._topCenter=(t=Xe(e.topCenter))!=null?t:this.topCenter,this._bottomCenter=(r=Xe(e.bottomCenter))!=null?r:this.bottomCenter,this._radius=Ge(e.radius)?e.radius:this.radius,this._topCenter&&this._bottomCenter){const i=this._topCenter.clone().sub(this._bottomCenter).normalize();this.bottomCircle.setPoints({center:this._bottomCenter,normal:i,radius:this._radius}),this.setTopCenter(this._topCenter)}this.needsRender=!0}setTopCenter(e){this.addIfNotExists(this.topCircle),this.topCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setBottomCenter(e){this.addIfNotExists(this.bottomCircle),this.bottomCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setStyle(e){this.params=gy(gy({},this.params),e),this.bottomCircle.setStyle(this.params),this.topCircle.setStyle(this.params)}highlight(){this.highlighted||(this.highlighted=!0,this.edgeMesh.highlight(),this.bottomCircle.highlight(),this.topCircle.highlight(),this.needsRender=!0)}unhighlight(){this.highlighted&&(this.highlighted=!1,this.edgeMesh.unhighlight(),this.bottomCircle.unhighlight(),this.topCircle.unhighlight(),this.needsRender=!0)}setEdgeMesh(){this.addIfNotExists(this.edgeMesh);const e=this.topCircle.center,t=this.bottomCircle.center;this.edgeMesh.geometry.dispose(),this.edgeMesh.geometry=new Zy(this.radius,this.radius,e.distanceTo(t),V2(this.radius),1,!0);const r=new on().setFromUnitVectors(new H(0,1,0),this.normal.clone().normalize());this.edgeMesh.position.copy(new H().lerpVectors(t,e,.5)),this.edgeMesh.quaternion.copy(r)}};class hD extends Ll{constructor(e){super(e,()=>{const t=()=>{const r=e.topCenter,i=e.bottomCenter,o=new H().lerpVectors(r,i,.5);return{topCenter:r,bottomCenter:i,boxCenter:o}};return{positionFrom:"boundingBox",yAxis:()=>e.normal,scaleHelper:{enable:!0,positions:()=>{const r=t();return[{id:"top",handlePosition:r.topCenter,basePosition:r.bottomCenter},{id:"bottom",handlePosition:r.bottomCenter,basePosition:r.topCenter}]},scaleCallback:r=>{const{intersectPoint:i,scalePosition:o}=r,{id:s}=o;s==="top"?e.setTopCenter(i):s==="bottom"&&e.setBottomCenter(i)}}}})}}var fD=Object.defineProperty,pD=Object.defineProperties,vD=Object.getOwnPropertyDescriptors,Ay=Object.getOwnPropertySymbols,mD=Object.prototype.hasOwnProperty,gD=Object.prototype.propertyIsEnumerable,Hf=(n,e,t)=>e in n?fD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sh=(n,e)=>{for(var t in e||(e={}))mD.call(e,t)&&Hf(n,t,e[t]);if(Ay)for(var t of Ay(e))gD.call(e,t)&&Hf(n,t,e[t]);return n},yD=(n,e)=>pD(n,vD(e)),ah=(n,e,t)=>(Hf(n,typeof e!="symbol"?e+"":e,t),t),_2=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class by extends Ei{constructor(e,t){super(e,t),ah(this,"type","Cylinder"),ah(this,"cylinderMesh"),ah(this,"_editor"),e&&(this.cylinderMesh=new yy(sh(sh({},e.style),e)),this.add(this.cylinderMesh))}get editor(){return this._editor||(this._editor=new hD(this.cylinderMesh)),this._editor}get data(){return yD(sh({},this.baseData),{bottomCenter:Kn(this.applyObjectMatrixWorld(this.cylinderMesh.bottomCenter,this.cylinderMesh)),topCenter:Kn(this.applyObjectMatrixWorld(this.cylinderMesh.topCenter,this.cylinderMesh)),radius:this.cylinderMesh.radius,style:{color:this.cylinderMesh.color.getHex()}})}setData(e){this.cylinderMesh.setPoints({bottomCenter:e.bottomCenter?this.applyObjectReversalMatrixWorld(Xe(e.bottomCenter),this.cylinderMesh):void 0,topCenter:e.topCenter?this.applyObjectReversalMatrixWorld(Xe(e.topCenter),this.cylinderMesh):void 0}),this.cylinderMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.cylinderMesh)==null||e.highlight()}unhighlight(){var e;(e=this.cylinderMesh)==null||e.unhighlight()}create(e){return _2(this,null,function*(){this.cylinderMesh=new yy(e),this.add(this.cylinderMesh),yield AD(this.cylinderMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function AD(n,e){return _2(this,null,function*(){const t=n.parent;yield T2(n.bottomCircle,e);const r=new Hr;r.name="LineHelper",t.add(r);const i=e.position.point,o=n.normal.clone().normalize(),s=i.clone().add(o.clone().multiplyScalar(100)),a=i.clone().sub(o.clone().multiplyScalar(100));return r.setPoints([s,a]),e.enable(),new Promise((l,u)=>{const c=p=>{h(),l()},d=p=>{if(!(p!=null&&p.raycaster))return;const v=Ki({raycaster:p.raycaster,line:new qn(s,a)}),b=new _n().setFromNormalAndCoplanarPoint(n.normal,n.bottomCenter).projectPoint(v,new H),g=v.clone().sub(b),y=n.bottomCenter.clone().add(g);v&&n.setTopCenter(y)},h=()=>{e.off("select",c),e.off("intersectionUpdate",d),e.off("disable",f),t.remove(r),e.disable()},f=()=>{h(),t.remove(n),u(new Error("Cancelled"))};e.on("select",c),e.on("intersectionUpdate",d),e.on("disable",f)})})}class bD extends Ll{constructor(e){super(e,()=>({positionFrom:()=>e.worldCenter,yAxis:()=>new H().subVectors(e.topPosition,e.bottomPositions[0]).normalize(),zAxis:()=>new H().subVectors(e.bottomPositions[0],e.bottomPositions[1]).normalize(),scaleHelper:{enable:!0,positions:()=>{const t=e.bottomPositions,r=e.topPosition,i=new H().subVectors(r,t[0]),o=new H().subVectors(t[1],t[0]),s=new H().subVectors(t[2],t[1]),a=e.geometryInfo.center,l=a.clone().sub(i.clone().divideScalar(2)),u=a.clone().add(i.clone().divideScalar(2)),c=a.clone().sub(o.clone().divideScalar(2)),d=a.clone().add(o.clone().divideScalar(2)),h=a.clone().sub(s.clone().divideScalar(2)),f=a.clone().add(s.clone().divideScalar(2));return[{id:"top",handlePosition:u,basePosition:l},{id:"bottom",handlePosition:l,basePosition:u},{id:"left",handlePosition:c,basePosition:d},{id:"right",handlePosition:d,basePosition:c},{id:"front",handlePosition:h,basePosition:f},{id:"back",handlePosition:f,basePosition:h}]},scaleCallback:t=>{const{intersectPoint:r,scalePosition:i}=t,{id:o,basePosition:s}=i,a=e.bottomPositions,l=e.topPositions;let u=new H().subVectors(e.topPosition,a[0]),c;if(o==="top")u=r.clone().sub(s),c=a;else if(o==="bottom"){const d=r.clone().sub(s);c=l.map(h=>h.clone().add(d)),u=void 0}else if(o==="left"){const d=r.clone().sub(s);c=[a[1].clone().add(d),a[1],a[2],a[2].clone().add(d)]}else if(o==="right"){const d=r.clone().sub(s);c=[a[0],a[0].clone().add(d),a[3].clone().add(d),a[3]]}else if(o==="front"){const d=r.clone().sub(s);c=[a[3].clone().add(d),a[2].clone().add(d),a[2],a[3]]}else if(o==="back"){const d=r.clone().sub(s);c=[a[0],a[1],a[1].clone().add(d),a[0].clone().add(d)]}e.setPoints({points:c,heightPoint:u?c[0].clone().add(u):void 0})}}}))}}var wD=Object.defineProperty,xD=(n,e,t)=>e in n?wD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PD=(n,e,t)=>(xD(n,e+"",t),t);let wy=class extends jf{constructor(){super(...arguments),PD(this,"name","BoxMesh")}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.bottomPositions,t=this.topPosition;if(!e||e.length<3||!t){this._geometryInfoCache=void 0;return}const r=Yn(...e),i=t.clone().sub(e[0]),o=r.clone().add(i.clone().divideScalar(2));this._geometryInfoCache={center:o}}return this._geometryInfoCache}};var ED=Object.defineProperty,CD=Object.defineProperties,SD=Object.getOwnPropertyDescriptors,xy=Object.getOwnPropertySymbols,OD=Object.prototype.hasOwnProperty,$D=Object.prototype.propertyIsEnumerable,Uf=(n,e,t)=>e in n?ED(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lh=(n,e)=>{for(var t in e||(e={}))OD.call(e,t)&&Uf(n,t,e[t]);if(xy)for(var t of xy(e))$D.call(e,t)&&Uf(n,t,e[t]);return n},MD=(n,e)=>CD(n,SD(e)),uh=(n,e,t)=>(Uf(n,typeof e!="symbol"?e+"":e,t),t),Nf=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class Py extends Ei{constructor(e,t){super(e,t),uh(this,"type","Box"),uh(this,"boxMesh"),uh(this,"_editor"),e&&(this.boxMesh=new wy(lh(lh({},e.style),e)),this.add(this.boxMesh))}get editor(){return this._editor||(this._editor=new bD(this.boxMesh)),this._editor}get data(){return MD(lh({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.boxMesh.bottomPositions,this.boxMesh)),heightPoint:Kn(this.applyObjectMatrixWorld(this.boxMesh.topPosition,this.boxMesh)),style:{color:this.boxMesh.color.getHex(),opacity:this.boxMesh.opacity,lineWidth:this.boxMesh.lineWidth,lineColor:this.boxMesh.lineColor.getHex()}})}setData(e){this.boxMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Xe),this.boxMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Xe(e.heightPoint),this.boxMesh):void 0}),this.boxMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.boxMesh)==null||e.highlight()}unhighlight(){var e;(e=this.boxMesh)==null||e.unhighlight()}create(e){return Nf(this,null,function*(){this.removeChildren(),this.boxMesh=new wy(e),this.add(this.boxMesh),yield VD(this.boxMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}}function VD(n,e,t){return Nf(this,null,function*(){return new Promise((r,i)=>Nf(this,null,function*(){const o=n.parent;if(!o){i(new Error("No container"));return}const s=new Rf(n.style);o.add(s),yield M2(s,e,t),o.remove(s),n.setPoints({points:s.points});const a=new Hr,l=ho(n.bottomPositions),u=Yn(...n.bottomPositions),c=u.clone().add(l.clone().multiplyScalar(100)),d=u.clone().sub(l.clone().multiplyScalar(100));a.setPoints([c,d]),o.add(a),e.enable();const h=b=>{p(),r()},f=b=>{if(!(b!=null&&b.raycaster))return;const g=Ki({raycaster:b.raycaster,line:new qn(c,d)});if(g){const y=g.clone().sub(u);n.setPoints({heightPoint:n.bottomPositions[0].clone().add(y)})}},p=()=>{e.off("select",h),e.off("intersectionUpdate",f),e.off("disable",v),e.disable(),o==null||o.remove(a)},v=()=>{p(),o==null||o.remove(n),i(new Error("Cancelled"))};e.on("select",h),e.on("intersectionUpdate",f),e.on("disable",v)}))})}function TD(n,e){for(let t=n.length-1;t>=0;t--)e(n[t])}var _D=Object.defineProperty,kD=Object.defineProperties,ID=Object.getOwnPropertyDescriptors,Ey=Object.getOwnPropertySymbols,jD=Object.prototype.hasOwnProperty,DD=Object.prototype.propertyIsEnumerable,Wf=(n,e,t)=>e in n?_D(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ru=(n,e)=>{for(var t in e||(e={}))jD.call(e,t)&&Wf(n,t,e[t]);if(Ey)for(var t of Ey(e))DD.call(e,t)&&Wf(n,t,e[t]);return n},k2=(n,e)=>kD(n,ID(e)),Au=(n,e,t)=>(Wf(n,typeof e!="symbol"?e+"":e,t),t),LD=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});class Cy extends Ei{constructor(e,t){super(e,t),Au(this,"type","Line"),Au(this,"lineMesh"),Au(this,"_editor"),Au(this,"creatingObject"),e&&(this.lineMesh=new nf(Ru(Ru({},e.style),e)),this.add(this.lineMesh))}get editor(){return this._editor||(this._editor=new EI(this)),this._editor}get data(){return k2(Ru({},this.baseData),{points:Kn(this.applyObjectMatrixWorld(this.lineMesh.points)),style:{lineColor:new qe(this.lineMesh.color).getHex(),lineWidth:this.lineMesh.lineWidth,dashed:this.lineMesh.dashed}})}setData(e){e.points&&this.lineMesh.setPoints(e.points),this.lineMesh.setStyle(e.style)}highlight(){var e;(e=this.lineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.lineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return LD(this,null,function*(){this.removeChildren();const t=new nf(e);this.lineMesh=t,this.add(this.lineMesh),this.creatingObject=RD(t,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function RD(n,e,t){var r;const i=n.parent;if(!i)return;const{promise:o,resolve:s,reject:a}=qo(),l=(r=t==null?void 0:t.limit)!=null?r:"none",u=new Hr(n.style);i.add(u);const c=new Hr(k2(Ru({},n.style),{dashed:!0,lengthEnable:!1}));i.add(c),e.enable();const d=[];let h,f,p;const v=[],b=()=>d.length>0,g=()=>v.length>0,y=()=>{b()&&(v.push(d.pop()),n.setPoints(d),V(p),e.pointSelectorHelper.magnifier.render())},E=()=>{g()&&(d.push(v.pop()),n.setPoints(d),V(p),e.pointSelectorHelper.magnifier.render())},C=U=>{if(!U)return;v.length=0;const D=d.length===0?U.point:h.clone();d.push(D),n.setPoints(d),d.length===2&&(M(),s())},V=U=>{const D=()=>{u.setPoints([]),c.setPoints([]),e.pointSelectorHelper.magnifier.render()};if(!(d!=null&&d.length)||!U)return D();p=U;const m=d.at(-1).clone();l==="none"?(h=U.point,u.setPoints([m,h])):l==="xoz"?(e.plane=f,f=f??new _n().setFromNormalAndCoplanarPoint(new H(0,1,0),d[0]),h=f.projectPoint(U.point,new H),u.setPoints([m,h]),c.setPoints([h,U.point])):l==="y"&&(U.isVirtual?(h=Ki({raycaster:U.raycaster,line:new qn(d[0].clone(),new H(0,1,0).add(d[0])),clampToLine:!1}),c.setPoints([])):(h=new qn(d[0].clone(),new H(0,1,0).add(d[0])).closestPointToPoint(U.point,!1,new H),c.setPoints([h,U.point])),u.setPoints([m,h]))},M=()=>{e.off("select",C),e.off("intersectionUpdate",V),e.off("disable",z),e.plane=null,e.disable(),i==null||i.remove(u,c)},z=()=>{M(),d.length!==2&&(i==null||i.remove(n)),a(new Error("Cancelled"))};return e.on("select",C),e.on("intersectionUpdate",V),e.on("disable",z),{finished:o,canUndo:b,canRedo:g,undo:y,redo:E}}var zD=Object.defineProperty,BD=Object.defineProperties,FD=Object.getOwnPropertyDescriptors,Sy=Object.getOwnPropertySymbols,HD=Object.prototype.hasOwnProperty,UD=Object.prototype.propertyIsEnumerable,Gf=(n,e,t)=>e in n?zD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ch=(n,e)=>{for(var t in e||(e={}))HD.call(e,t)&&Gf(n,t,e[t]);if(Sy)for(var t of Sy(e))UD.call(e,t)&&Gf(n,t,e[t]);return n},ND=(n,e)=>BD(n,FD(e)),Co=(n,e,t)=>(Gf(n,typeof e!="symbol"?e+"":e,t),t),vr=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});const Fa=class extends Cn{constructor(n,e){super(),Co(this,"group"),Co(this,"theme"),Co(this,"five"),Co(this,"creatingItem",null),Co(this,"undo",()=>{var t;console.log("undo"),(t=this.creatingItem)==null||t.undo(),this.five.needsRender=!0}),Co(this,"redo",()=>{var t;console.log("redo"),(t=this.creatingItem)==null||t.redo(),this.five.needsRender=!0}),this.five=n,this.theme=e,this.group=new Er,this.group.name="Sculpt",n.scene.add(this.group),Fa.modules.init(n),Qn("ctrl+z, command+z",this.undo),Qn("ctrl+shift+z, command+shift+z",this.redo),Fa.modules.fiveDomEvents.addEventListener(this.group,"click",({intersects:t,origDomEvent:r})=>{var i;const o=p2((i=t==null?void 0:t[0])==null?void 0:i.object,s=>s.isSculptObject);return o&&!o.editing?this.emit("click",r,o):!1}),window.__SCULPT_DEBUG__=this,window.__SCULPT_MODULES_DEBUG__=Fa.modules}get data(){return{items:this.items.map(n=>{try{return n.data}catch(e){return console.error(e),null}}).filter(Ge)}}get items(){return this.group.children}load(n,e){var t;this.clear();const r=(t=n==null?void 0:n.items)==null?void 0:t.map(i=>{var o;const s=ND(ch({},i),{style:ch(ch({},(o=this.theme)==null?void 0:o[i.type.toLowerCase()]),i.style)});return i.type==="Point"?new Z1(s,e):i.type==="line"?new Cy(s,e):i.type==="Polyline"?new K1(s,e):i.type==="Polygon"?new ry(s,e):i.type==="Prism"?new ay(s,e):i.type==="Rectangle"?new hy(s,e):i.type==="Circle"?new vy(s,e):i.type==="Cylinder"?new by(s,e):i.type==="Box"?new Py(s,e):null});this.group.add(...r),this.five.needsRender=!0}getItemById(n){return this.items.find(e=>e.uuid===n)}putObject(n){var e;this.group.add(n);const t=Fa.modules.object3DHelper,r=t.addObject3DHelper(n);return(e=r==null?void 0:r.moveController)==null||e.moveByMouse(),t}createPoint(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.point,n[0]),this.createItem(Z1,...n)})}createLine(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.line,n[0]),this.createItem(Cy,...n)})}createline(...n){return vr(this,null,function*(){this.createLine(...n)})}createPolyline(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.polyline,n[0]),this.createItem(K1,...n)})}createPolygon(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.polygon,n[0]),this.createItem(ry,...n)})}createPrism(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.prism,n[0]),this.createItem(ay,...n)})}createRectangle(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.rectangle,n[0]),this.createItem(hy,...n)})}createCircle(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.circle,n[0]),this.createItem(vy,...n)})}createCylinder(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.cylinder,n[0]),this.createItem(by,...n)})}createBox(...n){return vr(this,null,function*(){var e,t;return Object.assign((e=n[0])!=null?e:{},(t=this.theme)==null?void 0:t.box,n[0]),this.createItem(Py,...n)})}canUndo(){var n;return this.creatingItem?(n=this.creatingItem)==null?void 0:n.canUndo():!1}canRedo(){var n;return this.creatingItem?(n=this.creatingItem)==null?void 0:n.canRedo():!1}clear(){TD(this.items,n=>n.delete()),this.five.needsRender=!0}createItem(n,...e){return vr(this,null,function*(){this.creatingItem&&(this.creatingItem.stopCreating(),this.creatingItem=null);const t=new n;this.creatingItem=t,this.group.add(t);const{promise:r,resolve:i,reject:o}=qo();return yield t.create(...e).then((...s)=>(this.creatingItem=null,i(t),s)).catch(s=>{o(s),this.group.remove(t)}),r})}};let jt=Fa;Co(jt,"modules",f2);ax();sx();function WD(){var n=ue.useRef(),e=sn(),t=ao(),r=ue.useRef(C_(t,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:!1,unfoldDistance:{max:100}}}}}));return ue.useEffect(function(){var i;if(((i=e.configs)===null||i===void 0?void 0:i.keyframeMap.PanoTag)!==!1){var o=function(a){if(r.current){var l=a.start,u=a.end,c=a.data,d=c,h=Date.now().toString(),f="PointTag",p="2D",v=[d.vertex.x,d.vertex.y,d.vertex.z],b=function(){return d.imgUrl?{id:h,pointType:f,position:v,dimensionType:p,contentType:"ImageText",stickType:"2DPoint",data:{text:d.text,mediaData:[{type:"Image",url:d.imgUrl}]}}:{id:h,pointType:f,position:v,dimensionType:p,contentType:"Text",stickType:"2DPoint",data:{text:d.text}}}();r.current.load({tagList:[b]});var g=r.current.getTagById(h);g&&(g.state.unfolded=!0,r.current.updateRenderAllTags()),n.current=setTimeout(function(){var y,E=r.current.getTagById(h);E&&(E.state&&(E.state.unfolded=!1,r.current.updateRenderAllTags()),(y=E.hooks)===null||y===void 0||y.on("folded",function(){setTimeout(function(){E.state&&(E.state.visible=!1,r.current.destroyTagById(h))},1500)}))},u-l)}};return e.on(gt.PanoTag,o),function(){e.off(gt.PanoTag,o),n.current&&clearTimeout(n.current)}}},[e]),null}var io=function(n){Tn.call(this),this.element=n,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})};io.prototype=Object.create(Tn.prototype);io.prototype.constructor=io;var _c=function(n){io.call(this,n)};_c.prototype=Object.create(io.prototype);_c.prototype.constructor=_c;var Oy=function(){var n=this,e,t,r,i,o=new Ue,s={camera:{fov:0,style:""},objects:new WeakMap},a=document.createElement("div");a.style.overflow="hidden",this.domElement=a;var l=document.createElement("div");l.style.WebkitTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",l.style.pointerEvents="none",a.appendChild(l);var u=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:e,height:t}},this.setSize=function(g,y){e=g,t=y,r=e/2,i=t/2,a.style.width=g+"px",a.style.height=y+"px",l.style.width=g+"px",l.style.height=y+"px"};function c(g){return Math.abs(g)<1e-10?0:g}function d(g){var y=g.elements;return"matrix3d("+c(y[0])+","+c(-y[1])+","+c(y[2])+","+c(y[3])+","+c(y[4])+","+c(-y[5])+","+c(y[6])+","+c(y[7])+","+c(y[8])+","+c(-y[9])+","+c(y[10])+","+c(y[11])+","+c(y[12])+","+c(-y[13])+","+c(y[14])+","+c(y[15])+")"}function h(g,y){var E=g.elements,C="matrix3d("+c(E[0])+","+c(E[1])+","+c(E[2])+","+c(E[3])+","+c(-E[4])+","+c(-E[5])+","+c(-E[6])+","+c(-E[7])+","+c(E[8])+","+c(E[9])+","+c(E[10])+","+c(E[11])+","+c(E[12])+","+c(E[13])+","+c(E[14])+","+c(E[15])+")";return u?"translate(-50%,-50%)translate("+r+"px,"+i+"px)"+y+C:"translate(-50%,-50%)"+C}function f(g,y,E,C){if(g instanceof io){g.onBeforeRender(n,y,E);var V;g instanceof _c?(o.copy(E.matrixWorldInverse),o.transpose(),o.copyPosition(g.matrixWorld),o.scale(g.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,V=h(o,C)):V=h(g.matrixWorld,C);var M=g.element,z=s.objects.get(g);if(z===void 0||z.style!==V){M.style.WebkitTransform=V,M.style.transform=V;var U={style:V};u&&(U.distanceToCameraSquared=p(E,g)),s.objects.set(g,U)}M.style.display=g.visible?"":"none",M.parentNode!==l&&l.appendChild(M),g.onAfterRender(n,y,E)}for(var D=0,m=g.children.length;D<m;D++)f(g.children[D],y,E,C)}var p=function(){var g=new H,y=new H;return function(E,C){return g.setFromMatrixPosition(E.matrixWorld),y.setFromMatrixPosition(C.matrixWorld),g.distanceToSquared(y)}}();function v(g){var y=[];return g.traverse(function(E){E instanceof io&&y.push(E)}),y}function b(g){for(var y=v(g).sort(function(M,z){var U=s.objects.get(M).distanceToCameraSquared,D=s.objects.get(z).distanceToCameraSquared;return U-D}),E=y.length,C=0,V=y.length;C<V;C++)y[C].element.style.zIndex=E-C}this.render=function(g,y){var E=y.projectionMatrix.elements[5]*i;if(s.camera.fov!==E&&(y.isPerspectiveCamera?(a.style.WebkitPerspective=E+"px",a.style.perspective=E+"px"):(a.style.WebkitPerspective="",a.style.perspective=""),s.camera.fov=E),g.autoUpdate===!0&&g.updateMatrixWorld(),y.parent===null&&y.updateMatrixWorld(),y.isOrthographicCamera)var C=-(y.right+y.left)/2,V=(y.top+y.bottom)/2;var M=y.isOrthographicCamera?"scale("+E+")translate("+c(C)+"px,"+c(V)+"px)"+d(y.matrixWorldInverse):"translateZ("+E+"px)"+d(y.matrixWorldInverse),z=M+"translate("+r+"px,"+i+"px)";s.camera.style!==z&&!u&&(l.style.WebkitTransform=z,l.style.transform=z,s.camera.style=z),f(g,g,y,M),u&&b(g)}};function bu(n,e){var t=Math.round(n);return t%2===0?t:t+(e!=null&&e.smaller?-1:1)}function GD(n,e){return new H((n.x+e.x)/2,(n.y+e.y)/2,(n.z+e.z)/2)}var QD=function(e){var t=e.x,r=e.y,i=e.z;return new H(t,r,i)};function XD(n,e){if(!e||typeof ResizeObserver>"u")return{observe:function(){return window.addEventListener("resize",n)},unobserve:function(){return window.removeEventListener("resize",n)}};var t=new ResizeObserver(n);return{observe:function(){return t.observe(e)},unobserve:function(){return t.unobserve(e)}}}var qD=function(e){var t={disposeCallbacks:[]},r=function(){for(var s,a,l,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];var h=c[0].map(function(ge){return ge instanceof H?ge:QD(ge)}),f=c[1];if((h==null?void 0:h.length)<4)return console.error("points must be equal or greater than than 4");if(!(e!=null&&(s=e.model)!==null&&s!==void 0&&s.loaded))return console.error("five.model.loaded is: ",e==null||(a=e.model)===null||a===void 0?void 0:a.loaded);var p=e.getElement();if(!p)return console.error("five.getElement() is "+p);var v=[],b=(f==null?void 0:f.ratio)||.00216;b<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");var g=(f==null?void 0:f.dpr)||1,y=(f==null?void 0:f.mode)||"front",E=(l=f==null?void 0:f.autoRender)!==null&&l!==void 0?l:!0,C=(f==null?void 0:f.behindFiveContainer)||p.parentElement||document.body,V=(f==null?void 0:f.container)||document.createElement("div");V.classList.add("__Dnalogel-plugin--CSS3DRenderPlugin");var M=i(h,{ratio:b,dpr:g,container:V,mode:y}),z=M.css3DObject,U=M.mesh,D,m=y==="front"&&!t.frontMode,A=y==="behind"&&!t.behindMode,x=!(m||A),S=!1,$=null;A&&(t.behindMode={scene:new nl,css3DRenderer:new Oy}),m&&(t.frontMode={scene:new nl,css3DRenderer:new Oy});var T=y==="behind"?t.behindMode:t.frontMode,F=T.scene,R=T.css3DRenderer,ne=function(){if(x)return function(){F.add(z)};var ge=function(){var j=bu(p.clientWidth,{smaller:!0}),N=bu(p.clientHeight,{smaller:!0});R.setSize(j,N)};ge(),D=XD(ge,p),R.domElement.style.position="absolute",R.domElement.style.top="0",R.domElement.style.userSelect="none",R.domElement.style.pointerEvents="none";var Me=function _(){S||($=requestAnimationFrame(_),R.render(F,e.camera))};return function(){var _,j;F.add(z),(_=D)===null||_===void 0||(j=_.observe)===null||j===void 0||j.call(_),Me(),y==="behind"&&U&&(e.scene.add(U),v.push(function(){return U&&e.scene.remove(U)}))}}();if(m){var ce=p.parentElement||document.body;ce.appendChild(R.domElement)}if(A){var Z=C;Z.appendChild(R.domElement)}var he=function(){if(S=!0,v.forEach(function(j){return j==null?void 0:j()}),F.remove(z),typeof $=="number"&&cancelAnimationFrame($),F.children.length===0&&(R.domElement.remove(),y==="front"&&(t.frontMode=void 0),y==="behind"&&(t.behindMode=void 0),!t.behindMode&&!t.frontMode)){var Me,_;(Me=D)===null||Me===void 0||(_=Me.unobserve)===null||_===void 0||_.call(Me)}return!0},pe=t.disposeCallbacks.findIndex(function(ge){return ge===he});return pe!==-1?t.disposeCallbacks.splice(pe,1):t.disposeCallbacks.push(he),E&&ne(),{container:V,dispose:he,css3DObject:z,render:E?void 0:ne}},i=function(s,a){var l=a.ratio,u=a.dpr,c=a.container,d=a.mode,h=s[0].distanceTo(s[1]),f=s[1].distanceTo(s[2]),p=bu(h/l*u),v=bu(f/l*u),b=new io(c);b.scale.set(l,l,l),c.style.width=p+"px",c.style.height=v+"px",c.style.pointerEvents="none";var g=GD(s[0],s[2]),y=s[1].clone().sub(s[0]),E=s[2].clone().sub(s[1]),C=new H(0,1,0).angleTo(new H(0,E.y,E.z)),V=new H(1,0,0).angleTo(new H(y.x,0,y.z)),M=y.angleTo(new H(y.x,0,y.z)),z=(E.z>0?-1:1)*C,U=(y.z<0?1:-1)*V,D=(y.x>0&&y.y<0||y.x<0&&y.y>0?-1:1)*M;b.rotateOnWorldAxis(new H(1,0,0),z),b.rotateOnWorldAxis(new H(0,1,0),U),b.rotateOnWorldAxis(new H(0,0,1),D),b.position.set(g.x,g.y,g.z);var m;if(d==="behind"){var A=new st({opacity:0,transparent:!1,side:fn}),x=new El(p,v);m=new nt(x,A),m.name="CSS3DRenderPlugin-mesh",m.position.copy(b.position),m.rotation.copy(b.rotation),m.scale.copy(b.scale)}return{css3DObject:b,mesh:m}};return{create3DDomContainer:r,disposeAll:function(){t.disposeCallbacks.forEach(function(s){return s==null?void 0:s()}),t.disposeCallbacks=[]}}},YD=function(e,t,r,i){var o=r/375,s=i/375,a=new El(o,s);if(t){var l=new H(t.x+e.x,t.y+e.y,t.z+e.z);a.lookAt(l)}var u=new st({color:16776960,side:fn}),c=new nt(a,u),d=e.clone();c.position.copy(d);var h=Xn(c.geometry.vertices,4),f=h[0],p=h[1],v=h[2],b=h[3],g=d.clone().add(b),y=d.clone().add(v),E=d.clone().add(p),C=d.clone().add(f);return[g,y,C,E]};function KD(){var n=ue.useRef(),e=sn(),t=ao(),r=ue.useRef();return ue.useEffect(function(){var i;if(((i=e.configs)===null||i===void 0?void 0:i.keyframeMap.PanoTextLabel)!==!1){var o=function(a){var l,u,c,d=a.start,h=a.end,f=a.data,p=f;if(f.text!==""){var v=p.vertex,b=v.x,g=v.y,y=v.z,E=new H(b,g,y),C=new H((l=p.normal)===null||l===void 0?void 0:l.x,(u=p.normal)===null||u===void 0?void 0:u.y,(c=p.normal)===null||c===void 0?void 0:c.z),V=200,M=30,z=YD(E,p.normal&&C,V,M);r.current||(r.current=qD(t));var U=r.current.create3DDomContainer(z),D=U==null?void 0:U.css3DObject;if(f.quaternion){var m=new on(f.quaternion.x,f.quaternion.y,f.quaternion.z,f.quaternion.w);D==null||D.quaternion.copy(m)}U!=null&&U.container&&c3.render(ue.createElement("div",{className:"PanoTextLabel PanoTextLabel--notHidden"},ue.createElement("div",{className:"PanoTextLabel-wrapper"},ue.createElement("div",{style:{fontSize:"".concat(f.fontSize||16,"px")},className:"PanoText-innerText"},f.text||""))),U==null?void 0:U.container),n.current=setTimeout(function(){var A;(A=r.current)===null||A===void 0||A.disposeAll()},h-d)}};return e.on(gt.PanoTextLabel,o),function(){e.off(gt.PanoTextLabel,o),n.current&&clearTimeout(n.current)}}},[e]),ue.createElement(ue.Fragment,null)}function JD(){var n=ue.useState(""),e=Xn(n,2),t=e[0],r=e[1],i=ue.useState(!0),o=Xn(i,2),s=o[0],a=o[1],l=ue.useRef(null),u=sn();return ue.useEffect(function(){var c;if(((c=u.configs)===null||c===void 0?void 0:c.keyframeMap.Prompter)!==!1){var d=function(f){var p=f.start,v=f.end,b=f.data;r(b.text),a(!1),l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout(function(){a(!0),r(""),l.current&&clearTimeout(l.current),l.current=null},v-p)};return u.on(gt.Prompter,d),function(){u.off(gt.Prompter,d)}}},[u]),ue.createElement("div",{className:No("vreo-prompter",ct({"vreo-prompter--hidden":s},"vreo-prompter-left--".concat(u.agentType),!0))},ue.createElement("div",{className:"vreo-prompter-text"},ue.createElement("div",{className:"vreo-prompter-innerText"},t)))}function ZD(){var n=sn(),e=ao(),t=ue.useRef(null),r=ue.useRef(null),i=ue.useCallback(function(){if(r.current=null,t.current){var a=Pa(t.current);e.load(a)}},[]),o=ue.useCallback(function(){if(t.current){var a=Pa(t.current);Object.assign(window,{$rawWork:a}),e.load(a)}},[]),s=ue.useCallback(function(){r.current&&e.load(r.current)},[]);return ue.useEffect(function(){var a=function(u){var c,d,h,f,p;!t.current&&(c=e.work)!==null&&c!==void 0&&(d=c.raw)!==null&&d!==void 0&&d.works&&(t.current=e.work.raw.works);var v=u.data;if(v.work){r.current=Pa(v.work),e.load(r.current);return}var b=(h=e.work)===null||h===void 0||(f=h.raw)===null||f===void 0||(p=f.works)===null||p===void 0?void 0:p[0];if(!b){console.warn("UpdateVRPanorama:  work ");return}if(v.dynamic_scene&&!v.panorama){var g=JSON.parse(b),y=g.panorama,E=v.dynamic_scene.images.index;y.list[E]=v.dynamic_scene.images,v.panorama=y,delete v.dynamic_scene}Object.assign(window,{$work1:JSON.parse(b),$work2:v,parseWork:Pa}),r.current=Pa([b,v]),e.load(r.current)};return n.on(gt.UpdateVRPanorama,a),n.on(gt.Exit,i),n.on("loaded",i),n.on("paused",o),n.on("playing",s),function(){n.off(gt.UpdateVRPanorama,a),n.off(gt.Exit,i),n.off("loaded",i),n.off("paused",o),n.off("playing",s)}},[]),ue.createElement(ue.Fragment,null)}var eL=function(e){if(e){var t=function r(){e.removeEventListener("canplaythrough",r);try{e.play()}catch{}};e.addEventListener("canplaythrough",t),e.load()}},tL=Math.PI,dh=tL*2;function nL(){var n=ue.useRef(null),e=ue.useRef(),t=sn(),r=ue.useRef(),i=ue.useState(!1),o=Xn(i,2),s=o[0],a=o[1],l=ao(),u=function(d){e.current&&(e.current.src=d)};return ue.useEffect(function(){var c=function(){var h=ar(wt.mark(function f(p){var v,b,g,y,E,C,V,M,z,U,D,m;return wt.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:v=p.start,b=p.end,g=p.data,y=g.videoSrc,E=g.fov,C=g.direction,V=g.panoIndex,M=g.vector,z=function(){if(M)return[M.longitude,M.latitude];if(!C)return[0,0];var S=-Math.atan2(C.x,-C.z);S=(S%dh+dh)%dh;var $=-Math.asin(C.y/1);return[S,$]}(),U=Xn(z,2),D=U[0],m=U[1],l.setState({fov:E,panoIndex:V,longitude:D,latitude:m},!0),u(y),eL(e.current),a(!0),r.current=setTimeout(function(){var S;(S=e.current)===null||S===void 0||S.pause(),a(!1),u("")},b-v);case 8:case"end":return x.stop()}},f)}));return function(p){return h.apply(this,arguments)}}();t.on(gt.VideoEffect,c);var d=function(){var f;r.current&&clearTimeout(r.current),(f=e.current)===null||f===void 0||f.pause(),a(!1),u("")};return t.on("paused",function(){return d()}),t.on("ended",function(){return d()}),function(){t.off(gt.VideoEffect,c),r.current&&clearTimeout(r.current)}},[t]),ue.useEffect(function(){var c,d;if(n.current){var h=((c=t.configs)===null||c===void 0||(d=c.videos)===null||d===void 0?void 0:d.videoEffect)||document.createElement("video");h.setAttribute("playsinline","true"),h.setAttribute("webkit-playsinline","true"),h.setAttribute("autoplay","true"),h.setAttribute("key","VideoEffect-video"),h.setAttribute("class","VideoEffect-video"),e.current=h,n.current.append(e.current),document.addEventListener("WeixinJSBridgeReady",function(){var f;(f=e.current)===null||f===void 0||f.play()},!1),n.current}},[]),ue.createElement("div",{ref:n,className:No("VideoEffect",{"VideoEffect--visible":s})})}var rL={blob:function(e){var t=function(){return null};return new Promise(function(r,i){var o=new XMLHttpRequest,s=function(){o.ontimeout=t,o.onreadystatechange=t,o.onprogress=t,o.onabort=t};o.ontimeout=function(){i(new Error("timeout")),s()},o.onreadystatechange=function(){o.readyState===4&&(o.status===0&&!o.response||(o.status===200||o.status===0?(r(o.response),s()):(i(new Error("status:"+o.status)),s())))},o.open("GET",e,!0),o.responseType="blob",o.send(null)})}};function iL(n){var e=oL();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function oL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sL=function(n){ta(t,n);var e=iL(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.duration;return Ho(this,t),r=e.call(this),ct(ht(r),"$timestamp",null),ct(ht(r),"$currentTime",0),ct(ht(r),"$duration",0),ct(ht(r),"muted",!1),ct(ht(r),"src",""),o&&(r.$duration=o),r}return Uo(t,[{key:"setAttribute",value:function(i,o){}},{key:"play",value:function(){var i=this;this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()),this.stopInterval=Yf(function(){return i.requestAnimationFrameLoop()}),this.emit("play")}},{key:"pause",value:function(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}},{key:"requestAnimationFrameLoop",value:function(){if(this.$timestamp!==null){var i=performance.now();this.$currentTime+=i-this.$timestamp,this.$timestamp=i,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}}},{key:"currentTime",get:function(){return this.$currentTime/1e3},set:function(i){this.$currentTime=i*1e3}},{key:"duration",get:function(){return this.$duration},set:function(i){this.$duration=i}},{key:"ended",get:function(){return this.$currentTime===this.$duration}},{key:"paused",get:function(){return!this.stopInterval}},{key:"addEventListener",value:function(i,o){this.on(i,o)}},{key:"removeEventListener",value:function(i,o){this.off(i,o)}}]),t}(Kf);function aL(n){var e=lL();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function lL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var uL=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,cL=function(){return`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`},nr={},dL=function(n){ta(t,n);var e=aL(t);function t(r,i,o,s){var a,l,u,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{preload:!0};if(Ho(this,t),!c.videoInstance)if(nr.videoInstance)c.videoInstance=nr.videoInstance;else{var d=document.createElement("video");d.style.opacity="0",d.style.pointerEvents="none",d.style.display="none",document.body.append(d),c.videoInstance=d,nr.videoInstance=d,d.playsInline=!0,d.controls=!1}var h=new El(r,i,o,s),f=new Jf(c.videoInstance),p=new Wr({uniforms:{map:{value:f},enable:{value:0}},vertexShader:uL,fragmentShader:cL(),transparent:!0});if(u=e.call(this,h,p),u.options=c,u.freeze=!1,u.paused=!0,c.audioInstance)u.audioInstance=c.audioInstance;else if(nr.audioInstance)u.audioInstance=nr.audioInstance;else{var v=document.createElement("audio");v.crossOrigin="",v.muted=!1,v.autoplay=!1,v.style.display="none",document.body.appendChild(v),u.audioInstance=v,nr.audioInstance=v}u.audioLikeInstance=new sL,hp(ht(u),{paused:ut});var b=function(C){return b5(function(){return u.paused=C})},g=function(){return b(!0)},y=function(){return b(!1)};return u.audioInstance.addEventListener("pause",g),u.audioInstance.addEventListener("play",y),(a=u.options.videoInstance)===null||a===void 0||a.addEventListener("pause",g),(l=u.options.videoInstance)===null||l===void 0||l.addEventListener("play",y),u.audioLikeInstance.addEventListener("pause",g),u.audioLikeInstance.addEventListener("play",y),u.$removeEventListener=function(){var E,C;u.audioInstance.removeEventListener("pause",g),u.audioInstance.removeEventListener("play",y),(E=u.options.videoInstance)===null||E===void 0||E.removeEventListener("pause",g),(C=u.options.videoInstance)===null||C===void 0||C.removeEventListener("play",y),u.audioLikeInstance.removeEventListener("pause",g),u.audioLikeInstance.removeEventListener("play",y)},u}return Uo(t,[{key:"mediaInstance",get:function(){if(!this.videoUrl)return this.audioLikeInstance;if($u(this.videoUrl)==="audio")return this.audioInstance;var i=this.material.uniforms,o=i.map.value.image;return o}},{key:"update",value:function(){var r=ar(wt.mark(function o(s){var a=this,l,u;return wt.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.videoUrl!==s){d.next=2;break}return d.abrupt("return");case 2:return this.videoUrl=s,this.freeze=!0,d.next=6,this.mediaInstance.pause();case 6:if(l=this.material.uniforms,this.mediaInstance.muted=!0,!(this.options.preload||this.options.preload===void 0||$u(this.videoUrl)==="video")){d.next=18;break}return d.t1=URL,d.next=12,rL.blob(this.videoUrl);case 12:return d.t2=d.sent,d.next=15,d.t1.createObjectURL.call(d.t1,d.t2);case 15:d.t0=d.sent,d.next=19;break;case 18:d.t0=this.videoUrl;case 19:this.mediaInstance.src=d.t0,this.mediaInstance.setAttribute("data-src",this.videoUrl),u=function h(){a.mediaInstance.currentTime!==0&&(a.freeze=!1,a.mediaInstance.muted=!1,l.enable.value=$u(a.videoUrl)?1:0,a.mediaInstance.removeEventListener("timeupdate",h,!1))},this.mediaInstance.addEventListener("timeupdate",u,!1);case 23:case"end":return d.stop()}},o,this)}));function i(o){return r.apply(this,arguments)}return i}()},{key:"play",value:function(){var r=ar(wt.mark(function o(){var s=this,a,l,u,c=arguments;return wt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(a=c.length>0&&c[0]!==void 0?c[0]:"",l=c.length>1&&c[1]!==void 0?c[1]:0,u=c.length>2?c[2]:void 0,a=a||"",!(u&&!a)){h.next=10;break}return this.currentTime&&(this.mediaInstance.currentTime=l),this.mediaInstance.duration=u,this.videoUrl="",this.mediaInstance.play(),h.abrupt("return",!0);case 10:if(a){h.next=18;break}if(!this.videoUrl){h.next=16;break}return h.next=14,this.mediaInstance.play();case 14:h.next=17;break;case 16:console.warn("");case 17:return h.abrupt("return",!0);case 18:if(a!==this.videoUrl){h.next=23;break}return this.mediaInstance.currentTime=l,h.next=22,this.mediaInstance.play();case 22:return h.abrupt("return",!0);case 23:return h.next=25,this.update(a);case 25:return this.mediaInstance.pause(),h.next=28,new Promise(function(f){return setTimeout(ar(wt.mark(function p(){return wt.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return s.mediaInstance.currentTime=l,b.next=3,s.mediaInstance.play();case 3:f(!0);case 4:case"end":return b.stop()}},p)})),20)});case 28:return h.abrupt("return",h.sent);case 29:case"end":return h.stop()}},o,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"currentTime",get:function(){return this.mediaInstance.currentTime*1e3}},{key:"dispose",value:function(){this.$removeEventListener(),nr.audioInstance&&(document.body.removeChild(nr.audioInstance),nr.audioInstance=void 0),nr.videoInstance&&(document.body.removeChild(nr.videoInstance),nr.videoInstance=void 0)}}]),t}(nt),hL=Uo(function n(e,t){var r=this;if(Ho(this,n),ct(this,"scene",new nl),ct(this,"camera",new rp(-240,240,135,-135)),ct(this,"renderer",new d3({alpha:!0})),ct(this,"disposers",[]),ct(this,"run",function(){!(r.videoAgentMesh.paused||r.videoAgentMesh.freeze)&&r.videoAgentMesh.currentTime>1e3&&r.renderer.render(r.scene,r.camera),requestAnimationFrame(r.run)}),ct(this,"dispose",function(){var s;(s=r.videoAgentMesh)===null||s===void 0||s.dispose(),r.disposers.forEach(function(a){return a==null?void 0:a()})}),this.videoAgentMesh=new dL(480,270,1,1,t),e){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);var i=this.renderer.domElement;i.classList.add("VideoAgent-canvas");var o=ab(e,function(s,a){r.renderer.setSize(s*window.devicePixelRatio,a*window.devicePixelRatio),i.style.width="".concat(s,"px"),i.style.height="".concat(a,"px")});this.disposers.push(o),e.append(i),this.scene.add(this.videoAgentMesh),this.run()}});function fL(n){var e,t=ue.useRef(null),r=sn(),i=ue.useMemo(function(){var s;return((s=r.avatar)===null||s===void 0?void 0:s.url)&&r.avatar.force===!0},[r.avatar]),o=ue.useMemo(function(){var s;return i?!1:((s=r.videoAgentScene)===null||s===void 0?void 0:s.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[r.videoAgentScene,i]);return ue.useEffect(function(){if(!t.current)throw new Error("React  ...");if(r.videoAgentScene){console.warn('VideoAgentScene" ');return}var s=new hL(t.current,n.options);return r.videoAgentScene=s,function(){var a;r.dispose(),(a=r.videoAgentScene)===null||a===void 0||a.dispose()}},[]),ue.createElement(ue.Fragment,null,ue.createElement("div",{className:"Avatar",style:{display:i?"block":"none"}},ue.createElement("div",{className:"Avatar-wrapper ratio-1-1"},ue.createElement("img",{className:"Avatar-img",src:(e=r.avatar)===null||e===void 0?void 0:e.url,onClick:function(){var a;return(a=n.onClick)===null||a===void 0?void 0:a.call(n)}}))),ue.createElement("div",{className:No("VideoAgent",{hide:!o})},ue.createElement("div",{className:"VideoAgent-container"},ue.createElement("div",{className:"VideoAgent-wrapper ratio-16-9"},ue.createElement("div",{className:"VideoAgent-inner",ref:t},ue.createElement("div",{className:"VideoAgent-play",onClick:function(){var a;return(a=n.onClick)===null||a===void 0?void 0:a.call(n)}}))))))}function pL(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&(n=En(n),n!==null););return n}function zu(){return typeof Reflect<"u"&&Reflect.get?zu=Reflect.get:zu=function(e,t,r){var i=pL(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},zu.apply(this,arguments)}function vL(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Qf(n){var e=typeof Map=="function"?new Map:void 0;return Qf=function(r){if(r===null||!vL(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Na(r,arguments,En(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Vy(i,r)},Qf(n)}function mL(n){var e=gL();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function gL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zs="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",ea=[];function yL(n){var e=ea.find(function(t){return!t.realSrc||t.realSrc===Zs});return e||(e=new I2(Zs),ea.push(e)),n&&(e.src=n),e}function AL(){return Xf.apply(this,arguments)}function Xf(){return Xf=ar(wt.mark(function n(){var e,t,r,i,o=arguments;return wt.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=o.length>0&&o[0]!==void 0?o[0]:100,t=o.length>1&&o[1]!==void 0?o[1]:2e3,console.log("waitForBlankAudioGenerated, needGenerate: ",ea.some(function(l){return!l.ended&&l.src===Zs})),r=Date.now(),i=!1;case 5:if(!(ea.some(function(l){return!l.ended&&l.src===Zs})&&!i)){a.next=13;break}if(!(Date.now()-r>t)){a.next=9;break}return i=!0,a.abrupt("return",Promise.resolve());case 9:return a.next=11,new Promise(function(l){return setTimeout(l,e)});case 11:a.next=5;break;case 13:case"end":return a.stop()}},n)})),Xf.apply(this,arguments)}function bL(n){var e=n-ea.length;if(!(e<=0))for(var t=0;t<e;t++)ea.push(new I2(Zs))}function wL(n){n.inited||(n.src&&(n.inited=!0,n.removeDocumentEventListener()),n.src===Zs&&n.play())}var I2=function(n){ta(t,n);var e=mL(t);function t(r){var i,o;Ho(this,t),o=e.call(this,r),ct(ht(o),"preload","auto"),ct(ht(o),"realSrc",""),ct(ht(o),"inited",!1),o.realSrc=r??"",zu((i=ht(o),En(t.prototype)),"addEventListener",i).call(i,"ended",function(){o.src=""});var s=function(){return wL(ht(o))};return document.addEventListener("click",s),document.addEventListener("touchend",s),o.removeDocumentEventListener=function(){document.removeEventListener("click",s),document.removeEventListener("touchend",s)},o}return Uo(t,[{key:"src",get:function(){return this.getAttribute("src")||""},set:function(i){this.setAttribute("src",i),this.realSrc=i}}]),t}(Qf(Audio));function xL(){var n=sn();return ue.useEffect(function(){var e=function(){var t=ar(wt.mark(function r(i,o){var s,a,l,u,c;return wt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=i.start,i.end,a=(o-s)/1e3,!(a<0||a>=i.end-i.start)){h.next=4;break}return h.abrupt("return");case 4:l=yL(i.data.url),l.currentTime=Math.max(0,a),l.play(),u=function(){l.removeEventListener("pause",c),l.pause(),l.src=""},l.addEventListener("ended",function(){u()}),c=function(){l.realSrc===i.data.url&&l.play()},l.addEventListener("pause",c),n.once("paused",function(){u()});case 12:case"end":return h.stop()}},r)}));return function(i,o){return t.apply(this,arguments)}}();return n.on(gt.BgMusic,e),function(){n.off(gt.BgMusic,e)}}),ue.createElement(ue.Fragment,null)}var j2="https://vr-public.realsee-cdn.cn/release/static/image/release/",PL={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},el=typeof navigator<"u"?navigator.userAgent:"",EL=/(iPhone|iPad|iPod)/i.test(el),CL=/safari/i.test(el)&&!/chrome/i.test(el)&&/version/i.test(el),SL=/microMessenger/i.test(el),OL=EL||CL,$L=typeof MediaSource<"u"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function ML(n){var e=It.useMemo(function(){var i,o=(i=n==null?void 0:n.appearance)!==null&&i!==void 0?i:"solid";return PL[o]},[n==null?void 0:n.appearance]),t=It.useMemo(function(){return e.height/e.width},[e]),r=null;return SL?r=It.createElement(qf,{wave:e,prefix:n==null?void 0:n.staticPrefix}):OL?r=It.createElement($y,{format:"hevc",wave:e,prefix:n==null?void 0:n.staticPrefix}):$L?r=It.createElement($y,{format:"vp9",wave:e,prefix:n==null?void 0:n.staticPrefix}):r=It.createElement(qf,{wave:e,prefix:n==null?void 0:n.staticPrefix}),It.createElement("div",{className:"vreo-wave",onClick:n==null?void 0:n.onClick},It.createElement("div",{style:{position:"relative",width:"100%",paddingTop:"".concat(t*100,"%")}},It.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0}},r)))}var $y=function(e){var t=e.wave,r=e.format,i=e.prefix,o=i===void 0?j2:i,s=ue.useRef(null),a=ue.useState(!1),l=Xn(a,2),u=l[0],c=l[1],d=ue.useState(!1),h=Xn(d,2),f=h[0],p=h[1],v=o+t[r];ue.useEffect(function(){c(!1)},[v]);var b=ue.useCallback(function(){s.current&&s.current.play(),c(!0)},[]),g=ue.useCallback(function(){p(!0)},[]);return f?It.createElement(qf,{wave:t,prefix:o}):It.createElement("video",{style:{opacity:u?1:0},preload:"auto",ref:s,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:b,onError:g,muted:!0,loop:!0,src:v})},qf=function(e){var t=e.wave,r=e.prefix,i=r===void 0?j2:r,o=i+t.png;return It.createElement("div",{style:{width:"100%",height:"100%",backgroundImage:"url(".concat(o,")"),backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:"steps(".concat(t.frames-1,")"),animationDuration:"".concat(t.frames/25,"s"),animationIterationCount:"infinite"}})},VL=vp(function(n){var e,t,r,i,o=n.controller;return ue.createElement("div",{className:No("vreo-panel",{"vreo-panel--hidden":!o.visible})},ue.createElement("div",{className:"vreo-panel-inner"},ue.createElement(ML,{onClick:(e=o.configs)===null||e===void 0?void 0:e.onWaveClick,appearance:(t=o.waveAppearance)!==null&&t!==void 0?t:"single",staticPrefix:o.configs.waveStaticPrefix}),ue.createElement(fL,{onClick:function(){var a;if((a=o.configs)!==null&&a!==void 0&&a.onAvatarClick){o.configs.onAvatarClick();return}o.playing?o.setPlaying(!1):o.setPlaying(!0)},options:((r=o.configs)===null||r===void 0?void 0:r.videoAgentMeshOptions)||{}}),ue.createElement(JD,null),(i=o.configs)===null||i===void 0?void 0:i.customPanelChildren))});function TL(){var n=sn();return ue.createElement(ue.Fragment,null,ue.createElement(ue.Fragment,null,ue.createElement(I4,null),ue.createElement(_4,null),ue.createElement(G4,null),ue.createElement(ZD,null),ue.createElement(nL,null),ue.createElement(WD,null),ue.createElement(KD,null),ue.createElement(R4,null),ue.createElement(ox,null),ue.createElement(xL,null)),ue.createElement(VL,{controller:n}))}var _L=vp(function(n){var e,t=n.controller,r="400px",i=function(){var o,s=(o=t.drawerConfig)===null||o===void 0?void 0:o.height;return s?typeof s=="number"?s+"px":s:"max-content"}();return ue.createElement("div",{className:No("vreo-drawer",{"vreo-drawer-visible":t.drawerConfig&&t.drawerConfig.content}),onClick:function(){return t.openDrawer(!1)}},ue.createElement("div",{className:"vreo-drawer-inner",style:{height:i,maxHeight:r}},((e=t.drawerConfig)===null||e===void 0?void 0:e.content)||""))});function kL(){var n=sn();return ue.createElement(_L,{controller:n})}var IL=vp(function(n){var e=n.controller;return ue.createElement("div",{className:No("vreo-PopUp",{"vreo-PopUp-visible":e.popUp}),onClick:function(){return e.openPopUp(!1)}},ue.createElement("div",{className:"vreo-PopUp-inner"},e.popUp||""))});function jL(){var n=sn();return ue.createElement(IL,{controller:n})}var hh,fh;function DL(n){var e=LL();return function(){var r=En(n),i;if(e){var o=En(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return na(this,i)}}function LL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var RL=3,My="vreo-app-dhjskadhksahdjskahdjksa",zL=Number((hh=(fh=location.search.match(/audio_cache=(\d+)/))===null||fh===void 0?void 0:fh[1])!==null&&hh!==void 0?hh:RL),hB=function(n){ta(t,n);var e=DL(t);function t(r){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ho(this,t),i=e.call(this),i.$five=r,bL(zL),o.container||(o.container=o.containter),!o.container){var s,a=document.getElementById(My);a&&(wu.unmountComponentAtNode(a),a.remove());var l=document.createElement("div");l.id=My,o.container=l;var u=(s=r.getElement())===null||s===void 0?void 0:s.parentNode;u?u.append(l):document.body.append(l)}return o.container.classList.contains("vreo-app")||o.container.classList.add("vreo-app"),i.configs=Object.freeze(Object.assign({keyframeMap:{}},o)),i.controller=new O4({five:r,container:o.container,configs:i.configs}),wu.render(ue.createElement(sb.Provider,{value:i.controller},ue.createElement(TL,null),ue.createElement(kL,null),ue.createElement(jL,null),i.configs.customKeyframes&&i.configs.customKeyframes.map(function(c,d){return ue.createElement(c,{key:d,subscribe:{on:function(f,p){return i.on(f,p)},once:function(f,p){return i.once(f,p)},off:function(f,p){return i.off(f,p)}},five:r})})),o.container),Es(function(){return i.controller.ended},function(c){c&&i.emit("paused",!0)}),Es(function(){return i.controller.playing},function(c){i.controller.ended||i.emit(c?"playing":"paused")}),i}return Uo(t,[{key:"load",value:function(){var r=ar(wt.mark(function o(s){var a,l,u,c,d=this,h,f,p,v,b,g,y=arguments;return wt.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(h=y.length>1&&y[1]!==void 0?y[1]:0,f=y.length>2&&y[2]!==void 0?y[2]:!1,p=y.length>3&&y[3]!==void 0?y[3]:!1,this.controller.clear(),this.controller.setLoading(!0),p&&(s=JSON.parse(JSON.stringify(s))),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=s,(a=this.controller.mediaInstance)===null||a===void 0||a.pause(),this.$five.imageOptions.size&&(l=this.configs.imageOptions)!==null&&l!==void 0&&l.size&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),!(f||f===void 0&&this.configs.autoPreload)){C.next=20;break}v=s.keyframes.filter(function(V){if(V.type!==gt.CameraMovement)return!1;var M=V.data;return M.panoIndex!==void 0}).reduce(function(V,M){var z=M.data.panoIndex;return V[z]||(V[z]=!0),V},{}),b=Object.keys(v),g=0;case 14:if(!(g<b.length)){C.next=20;break}return C.next=17,this.$five.preloadPano(Number(b[g]));case 17:g++,C.next=14;break;case 20:return this.emit("loaded",s),this.controller.emit("loaded",s),(u=this.controller.videoAgentScene)!==null&&u!==void 0&&u.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=h/1e3),this.controller.setAvatar(s.video.avatar),C.next=26,AL();case 26:return C.next=28,(c=this.controller.videoAgentScene)===null||c===void 0?void 0:c.videoAgentMesh.play(s.video.url,h/1e3,s.video.duration);case 28:return this.controller.setEnded(!1),this.play(),this.controller.run(function(V,M){return d.emit(V,M,d.controller.currentTime)}),this.controller.setLoading(!1),C.abrupt("return",!0);case 33:case"end":return C.stop()}},o,this)}));function i(o){return r.apply(this,arguments)}return i}()},{key:"paused",get:function(){return!this.controller.playing}},{key:"play",value:function(i){var o;return this.controller.playing||(i&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=i/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setEnded(!1),this.controller.setPlaying(!0),(o=this.controller.vreoUnit)===null||o===void 0||o.keyframes.forEach(function(s){s.type===gt.BgMusic&&(s.parsed=!1)})),!0}},{key:"setAppearance",value:function(i){this.controller.setAppearance(i)}},{key:"pause",value:function(){this.controller.setPlaying(!1)}},{key:"show",value:function(){this.controller.setVisible(!0)}},{key:"hide",value:function(){this.controller.setVisible(!1)}},{key:"getCurrentTime",value:function(){return this.controller.currentTime}},{key:"dispose",value:function(){this.controller.dispose(),this.configs.container&&wu.unmountComponentAtNode(this.configs.container)}}]),t}(Kf);console.log(`
    
    
    
    
    
    
    
    
`);export{qD as C,hB as P,Xn as _,rx as t};
