# CHANGELOG

## [2.4.3] - 2025-01-19

### 🔧 构建系统优化
- **修复构建错误**: 解决 TypeScript 5.8+ 严格模式下的类型兼容性问题
- **IAudio 类修复**: 修复 `super.src` 访问私有属性的问题，改用标准 DOM API
- **构建配置优化**: 更新 `tsconfig.build.json`，跳过第三方库类型检查，提升构建性能

### 📚 文档系统完善
- **零警告文档生成**: 解决了所有 TypeDoc 生成警告，实现完全无警告的文档构建
- **类型定义完善**: 添加缺失的类型导出（`Appearance`、`WaveAppearance`、`AppSize`、`AudioLikeOptions` 等）
- **JSDoc 格式优化**: 修复 CSS3DRenderPlugin 的参数注释格式，提升文档可读性
- **外部库警告过滤**: 配置 TypeDoc 忽略外部依赖库的警告，专注于项目代码质量

### 🛠️ 开发体验提升
- **Git 链接禁用**: 禁用 TypeDoc 源码链接，避免每次构建因 commit hash 变化产生无关的文档更新
- **验证配置优化**: 优化 TypeDoc 验证设置，减少不必要的警告信息
- **构建性能提升**: 通过跳过外部库检查，显著提升构建速度

### ✅ 质量保证
- **构建流程验证**: 所有构建脚本（build、docs、packages）运行正常
- **类型安全**: 确保 TypeScript 编译无错误，维护代码类型安全
- **文档质量**: 文档生成过程完全无警告，提供高质量的 API 文档

## [2.4.1] - 2025-06-03

### 🎯 重大改进
- **现代化工具链升级**: 完成 Vite 2.6.14 → 6.3.5 的重大升级
- **TypeScript 5.8**: 升级到最新的 TypeScript 5.8.3，支持更严格的类型检查
- **TypeDoc 0.28.5**: 升级文档生成工具，支持更丰富的文档功能
- **完整的代码注释系统**: 为所有关键业务逻辑添加详细的中文注释

### 📝 文档增强
- **VideoAgentMesh**: 媒体处理核心逻辑的详细注释，包括智能资源加载策略
- **Controller**: 播放控制和响应式状态管理的完整注释
- **UpdateVRPanorama**: VR场景更新和状态切换机制的深度解释
- **CameraMovement**: 相机运动和智能动画选择算法的详细说明
- **Player**: 六阶段加载流程和播放控制逻辑的完整注释

### 🔧 代码质量提升
- **业务逻辑解释**: 不仅说明"做什么"，更解释"为什么这样做"
- **复杂算法拆解**: 将复杂的业务流程分步骤详细说明
- **性能优化说明**: 详细注释性能考虑和资源管理策略
- **状态管理机制**: 响应式编程和状态同步的完整注释

### 🚀 开发体验改进
- **完整的 IDE 支持**: 所有方法和属性都有详细的类型提示
- **丰富的代码示例**: 为主要 API 提供实用的使用示例
- **调试友好**: 添加了大量有助于问题排查的注释信息
- **文档一致性**: 统一的 JSDoc 标准和注释风格

### 🛠️ 技术升级
- **Vite 6.3.5**: 享受更快的构建速度和更好的开发体验
- **TypeScript 5.8.3**: 更严格的类型检查，更好的代码质量保证
- **@vitejs/plugin-react 4.3.3**: 最新的 React 插件支持
- **esbuild 压缩**: 更快的构建输出

### 🐛 修复问题
- **拼写错误修复**: 修复了 `AduioLike.ts` → `AudioLike.ts` 等文件名拼写错误
- **类型兼容性**: 修复了 TypeScript 5.8 的严格类型检查问题
- **React 18 兼容**: 修复了 React 18 的 children 属性类型问题
- **空值检查**: 加强了空值安全检查，提高代码健壮性

### 📊 构建优化
- **目标**: 使用 `esnext` 目标，充分利用现代 JS 特性
- **压缩**: 使用 `esbuild` 获得更好的构建性能
- **文档生成**: 支持更多语言的代码高亮和更丰富的 JSDoc 标签

### 📚 升级指南
详细的升级说明请参考: [VITE_UPGRADE_GUIDE.md](./VITE_UPGRADE_GUIDE.md)

---

# 2.0.0
- fix: 重新实现了运镜功能，修复了运镜掉帧的问题
- break-change：修复了模型态切换全景态时的目标点位为0时，有可能不会真正移动到目标位置的问题。该问题的修复会导致之前的一些基于此bug制作的导览出现问题，需要重新制作。

# 1.0.0-alpha.21
- fix: 多段BgMusic播放问题

# 1.0.0-alpha.19
- fix: 多段BgMusic可以重复播放

# 1.0.0-alpha.18
- fix: 修复无音频版本中途播放会从头开始的问题

# 1.0.0-alpha.1
- feat: css样式适配: 手机横竖屏, pad, pc
- feat: 新增两种波浪风格: 'wave' | 'solid'
- feat: 标签调用dna插件
- fix: 图片/视频 弹窗UI问题

# 0.2.0-alpha.25
- feat: rotate 不指定顺时针或者逆时针，则按照锐角交互。

# 0.2.0-alpha.24
- fix: 修复 CSS3DRender 与插件库样式冲突问题。
- fix: 修复示例 wrapper 定位问题。

# 0.2.0-alpha.23
- fix: 修复21版本针对非旋转运镜使用了旋转速度问题修复的代码丢失问题。

# 0.2.0-alpha.22
- fix: 修复运镜顺时针逆时针反向问题。

# 0.2.0-alpha.21
- fix: 修复非旋转运镜使用了旋转速度问题。

# 0.2.0-alpha.20
- fix: 修复 `paused` 事件抛出 `ended` 回调带来的重复抛出事件问题。

# 0.2.0-alpha.19
- feat: 新增 `getCurrentTime()` 方法，支持实时获取当前播放时间点；
- feat: 新增 `ended` 标识，当检测到 video 实例 `ended` 以后会在 `paused` 事件里抛出 `true` 回调。
