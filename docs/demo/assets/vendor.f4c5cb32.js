var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(ca){if(ca.__esModule)return ca;var ga=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(ca).forEach(function(_s){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}),ga}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(ca){if(ca==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ca)}function shouldUseNative(){try{if(!Object.assign)return!1;var ca=new String("abc");if(ca[5]="de",Object.getOwnPropertyNames(ca)[0]==="5")return!1;for(var ga={},_s=0;_s<10;_s++)ga["_"+String.fromCharCode(_s)]=_s;var Ss=Object.getOwnPropertyNames(ga).map(function(Cs){return ga[Cs]});if(Ss.join("")!=="0123456789")return!1;var Ms={};return"abcdefghijklmnopqrst".split("").forEach(function(Cs){Ms[Cs]=Cs}),Object.keys(Object.assign({},Ms)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(ca,ga){for(var _s,Ss=toObject(ca),Ms,Cs=1;Cs<arguments.length;Cs++){_s=Object(arguments[Cs]);for(var Ts in _s)hasOwnProperty.call(_s,Ts)&&(Ss[Ts]=_s[Ts]);if(getOwnPropertySymbols){Ms=getOwnPropertySymbols(_s);for(var Bs=0;Bs<Ms.length;Bs++)propIsEnumerable.call(_s,Ms[Bs])&&(Ss[Ms[Bs]]=_s[Ms[Bs]])}}return Ss};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$2=n$5?Symbol.for("react.portal"):60106,r$4=n$5?Symbol.for("react.fragment"):60107,t$3=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$3=n$5?Symbol.for("react.provider"):60109,w$2=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$2=n$5?Symbol.for("react.suspense"):60113,z$1=n$5?Symbol.for("react.memo"):60115,A$2=n$5?Symbol.for("react.lazy"):60116,B$1=typeof Symbol=="function"&&Symbol.iterator;function C$3(ca){for(var ga="https://reactjs.org/docs/error-decoder.html?invariant="+ca,_s=1;_s<arguments.length;_s++)ga+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+ca+"; visit "+ga+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$3={};function F$3(ca,ga,_s){this.props=ca,this.context=ga,this.refs=E$3,this.updater=_s||D$1}F$3.prototype.isReactComponent={};F$3.prototype.setState=function(ca,ga){if(typeof ca!="object"&&typeof ca!="function"&&ca!=null)throw Error(C$3(85));this.updater.enqueueSetState(this,ca,ga,"setState")};F$3.prototype.forceUpdate=function(ca){this.updater.enqueueForceUpdate(this,ca,"forceUpdate")};function G$2(){}G$2.prototype=F$3.prototype;function H$2(ca,ga,_s){this.props=ca,this.context=ga,this.refs=E$3,this.updater=_s||D$1}var I$2=H$2.prototype=new G$2;I$2.constructor=H$2;l$3(I$2,F$3.prototype);I$2.isPureReactComponent=!0;var J$2={current:null},K$2=Object.prototype.hasOwnProperty,L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ca,ga,_s){var Ss,Ms={},Cs=null,Ts=null;if(ga!=null)for(Ss in ga.ref!==void 0&&(Ts=ga.ref),ga.key!==void 0&&(Cs=""+ga.key),ga)K$2.call(ga,Ss)&&!L$3.hasOwnProperty(Ss)&&(Ms[Ss]=ga[Ss]);var Bs=arguments.length-2;if(Bs===1)Ms.children=_s;else if(1<Bs){for(var Ps=Array(Bs),Ls=0;Ls<Bs;Ls++)Ps[Ls]=arguments[Ls+2];Ms.children=Ps}if(ca&&ca.defaultProps)for(Ss in Bs=ca.defaultProps,Bs)Ms[Ss]===void 0&&(Ms[Ss]=Bs[Ss]);return{$$typeof:p$3,type:ca,key:Cs,ref:Ts,props:Ms,_owner:J$2.current}}function N$3(ca,ga){return{$$typeof:p$3,type:ca.type,key:ga,ref:ca.ref,props:ca.props,_owner:ca._owner}}function O$3(ca){return typeof ca=="object"&&ca!==null&&ca.$$typeof===p$3}function escape$1(ca){var ga={"=":"=0",":":"=2"};return"$"+(""+ca).replace(/[=:]/g,function(_s){return ga[_s]})}var P$3=/\/+/g,Q$2=[];function R$3(ca,ga,_s,Ss){if(Q$2.length){var Ms=Q$2.pop();return Ms.result=ca,Ms.keyPrefix=ga,Ms.func=_s,Ms.context=Ss,Ms.count=0,Ms}return{result:ca,keyPrefix:ga,func:_s,context:Ss,count:0}}function S$3(ca){ca.result=null,ca.keyPrefix=null,ca.func=null,ca.context=null,ca.count=0,10>Q$2.length&&Q$2.push(ca)}function T$2(ca,ga,_s,Ss){var Ms=typeof ca;(Ms==="undefined"||Ms==="boolean")&&(ca=null);var Cs=!1;if(ca===null)Cs=!0;else switch(Ms){case"string":case"number":Cs=!0;break;case"object":switch(ca.$$typeof){case p$3:case q$2:Cs=!0}}if(Cs)return _s(Ss,ca,ga===""?"."+U$2(ca,0):ga),1;if(Cs=0,ga=ga===""?".":ga+":",Array.isArray(ca))for(var Ts=0;Ts<ca.length;Ts++){Ms=ca[Ts];var Bs=ga+U$2(Ms,Ts);Cs+=T$2(Ms,Bs,_s,Ss)}else if(ca===null||typeof ca!="object"?Bs=null:(Bs=B$1&&ca[B$1]||ca["@@iterator"],Bs=typeof Bs=="function"?Bs:null),typeof Bs=="function")for(ca=Bs.call(ca),Ts=0;!(Ms=ca.next()).done;)Ms=Ms.value,Bs=ga+U$2(Ms,Ts++),Cs+=T$2(Ms,Bs,_s,Ss);else if(Ms==="object")throw _s=""+ca,Error(C$3(31,_s==="[object Object]"?"object with keys {"+Object.keys(ca).join(", ")+"}":_s,""));return Cs}function V$3(ca,ga,_s){return ca==null?0:T$2(ca,"",ga,_s)}function U$2(ca,ga){return typeof ca=="object"&&ca!==null&&ca.key!=null?escape$1(ca.key):ga.toString(36)}function W$3(ca,ga){ca.func.call(ca.context,ga,ca.count++)}function aa$1(ca,ga,_s){var Ss=ca.result,Ms=ca.keyPrefix;ca=ca.func.call(ca.context,ga,ca.count++),Array.isArray(ca)?X$2(ca,Ss,_s,function(Cs){return Cs}):ca!=null&&(O$3(ca)&&(ca=N$3(ca,Ms+(!ca.key||ga&&ga.key===ca.key?"":(""+ca.key).replace(P$3,"$&/")+"/")+_s)),Ss.push(ca))}function X$2(ca,ga,_s,Ss,Ms){var Cs="";_s!=null&&(Cs=(""+_s).replace(P$3,"$&/")+"/"),ga=R$3(ga,Cs,Ss,Ms),V$3(ca,aa$1,ga),S$3(ga)}var Y$2={current:null};function Z$2(){var ca=Y$2.current;if(ca===null)throw Error(C$3(321));return ca}var ba$1={ReactCurrentDispatcher:Y$2,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$2,IsSomeRendererActing:{current:!1},assign:l$3};react_production_min.Children={map:function(ca,ga,_s){if(ca==null)return ca;var Ss=[];return X$2(ca,Ss,null,ga,_s),Ss},forEach:function(ca,ga,_s){if(ca==null)return ca;ga=R$3(null,null,ga,_s),V$3(ca,W$3,ga),S$3(ga)},count:function(ca){return V$3(ca,function(){return null},null)},toArray:function(ca){var ga=[];return X$2(ca,ga,null,function(_s){return _s}),ga},only:function(ca){if(!O$3(ca))throw Error(C$3(143));return ca}};react_production_min.Component=F$3;react_production_min.Fragment=r$4;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$2;react_production_min.StrictMode=t$3;react_production_min.Suspense=y$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$1;react_production_min.cloneElement=function(ca,ga,_s){if(ca==null)throw Error(C$3(267,ca));var Ss=l$3({},ca.props),Ms=ca.key,Cs=ca.ref,Ts=ca._owner;if(ga!=null){if(ga.ref!==void 0&&(Cs=ga.ref,Ts=J$2.current),ga.key!==void 0&&(Ms=""+ga.key),ca.type&&ca.type.defaultProps)var Bs=ca.type.defaultProps;for(Ps in ga)K$2.call(ga,Ps)&&!L$3.hasOwnProperty(Ps)&&(Ss[Ps]=ga[Ps]===void 0&&Bs!==void 0?Bs[Ps]:ga[Ps])}var Ps=arguments.length-2;if(Ps===1)Ss.children=_s;else if(1<Ps){Bs=Array(Ps);for(var Ls=0;Ls<Ps;Ls++)Bs[Ls]=arguments[Ls+2];Ss.children=Bs}return{$$typeof:p$3,type:ca.type,key:Ms,ref:Cs,props:Ss,_owner:Ts}};react_production_min.createContext=function(ca,ga){return ga===void 0&&(ga=null),ca={$$typeof:w$2,_calculateChangedBits:ga,_currentValue:ca,_currentValue2:ca,_threadCount:0,Provider:null,Consumer:null},ca.Provider={$$typeof:v$3,_context:ca},ca.Consumer=ca};react_production_min.createElement=M$3;react_production_min.createFactory=function(ca){var ga=M$3.bind(null,ca);return ga.type=ca,ga};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ca){return{$$typeof:x$2,render:ca}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(ca){return{$$typeof:A$2,_ctor:ca,_status:-1,_result:null}};react_production_min.memo=function(ca,ga){return{$$typeof:z$1,type:ca,compare:ga===void 0?null:ga}};react_production_min.useCallback=function(ca,ga){return Z$2().useCallback(ca,ga)};react_production_min.useContext=function(ca,ga){return Z$2().useContext(ca,ga)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(ca,ga){return Z$2().useEffect(ca,ga)};react_production_min.useImperativeHandle=function(ca,ga,_s){return Z$2().useImperativeHandle(ca,ga,_s)};react_production_min.useLayoutEffect=function(ca,ga){return Z$2().useLayoutEffect(ca,ga)};react_production_min.useMemo=function(ca,ga){return Z$2().useMemo(ca,ga)};react_production_min.useReducer=function(ca,ga,_s){return Z$2().useReducer(ca,ga,_s)};react_production_min.useRef=function(ca){return Z$2().useRef(ca)};react_production_min.useState=function(ca){return Z$2().useState(ca)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ca){var ga,_s,Ss,Ms,Cs;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Ts=null,Bs=null,Ps=function(){if(Ts!==null)try{var du=ca.unstable_now();Ts(!0,du),Ts=null}catch(vu){throw setTimeout(Ps,0),vu}},Ls=Date.now();ca.unstable_now=function(){return Date.now()-Ls},ga=function(du){Ts!==null?setTimeout(ga,0,du):(Ts=du,setTimeout(Ps,0))},_s=function(du,vu){Bs=setTimeout(du,vu)},Ss=function(){clearTimeout(Bs)},Ms=function(){return!1},Cs=ca.unstable_forceFrameRate=function(){}}else{var Rs=window.performance,Ds=window.Date,$s=window.setTimeout,Fs=window.clearTimeout;if(typeof console!="undefined"){var Gs=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Gs!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Rs=="object"&&typeof Rs.now=="function")ca.unstable_now=function(){return Rs.now()};else{var Vs=Ds.now();ca.unstable_now=function(){return Ds.now()-Vs}}var ks=!1,Os=null,Ns=-1,Us=5,Hs=0;Ms=function(){return ca.unstable_now()>=Hs},Cs=function(){},ca.unstable_forceFrameRate=function(du){0>du||125<du?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Us=0<du?Math.floor(1e3/du):5};var zs=new MessageChannel,js=zs.port2;zs.port1.onmessage=function(){if(Os!==null){var du=ca.unstable_now();Hs=du+Us;try{Os(!0,du)?js.postMessage(null):(ks=!1,Os=null)}catch(vu){throw js.postMessage(null),vu}}else ks=!1},ga=function(du){Os=du,ks||(ks=!0,js.postMessage(null))},_s=function(du,vu){Ns=$s(function(){du(ca.unstable_now())},vu)},Ss=function(){Fs(Ns),Ns=-1}}function Ws(du,vu){var pu=du.length;du.push(vu);e:for(;;){var yu=pu-1>>>1,Su=du[yu];if(Su!==void 0&&0<tu(Su,vu))du[yu]=vu,du[pu]=Su,pu=yu;else break e}}function Qs(du){return du=du[0],du===void 0?null:du}function qs(du){var vu=du[0];if(vu!==void 0){var pu=du.pop();if(pu!==vu){du[0]=pu;e:for(var yu=0,Su=du.length;yu<Su;){var Tu=2*(yu+1)-1,bu=du[Tu],Au=Tu+1,Bu=du[Au];if(bu!==void 0&&0>tu(bu,pu))Bu!==void 0&&0>tu(Bu,bu)?(du[yu]=Bu,du[Au]=pu,yu=Au):(du[yu]=bu,du[Tu]=pu,yu=Tu);else if(Bu!==void 0&&0>tu(Bu,pu))du[yu]=Bu,du[Au]=pu,yu=Au;else break e}}return vu}return null}function tu(du,vu){var pu=du.sortIndex-vu.sortIndex;return pu!==0?pu:du.id-vu.id}var Ys=[],Ks=[],Js=1,eu=null,Zs=3,au=!1,ru=!1,su=!1;function lu(du){for(var vu=Qs(Ks);vu!==null;){if(vu.callback===null)qs(Ks);else if(vu.startTime<=du)qs(Ks),vu.sortIndex=vu.expirationTime,Ws(Ys,vu);else break;vu=Qs(Ks)}}function gu(du){if(su=!1,lu(du),!ru)if(Qs(Ys)!==null)ru=!0,ga(hu);else{var vu=Qs(Ks);vu!==null&&_s(gu,vu.startTime-du)}}function hu(du,vu){ru=!1,su&&(su=!1,Ss()),au=!0;var pu=Zs;try{for(lu(vu),eu=Qs(Ys);eu!==null&&(!(eu.expirationTime>vu)||du&&!Ms());){var yu=eu.callback;if(yu!==null){eu.callback=null,Zs=eu.priorityLevel;var Su=yu(eu.expirationTime<=vu);vu=ca.unstable_now(),typeof Su=="function"?eu.callback=Su:eu===Qs(Ys)&&qs(Ys),lu(vu)}else qs(Ys);eu=Qs(Ys)}if(eu!==null)var Tu=!0;else{var bu=Qs(Ks);bu!==null&&_s(gu,bu.startTime-vu),Tu=!1}return Tu}finally{eu=null,Zs=pu,au=!1}}function wu(du){switch(du){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Mu=Cs;ca.unstable_IdlePriority=5,ca.unstable_ImmediatePriority=1,ca.unstable_LowPriority=4,ca.unstable_NormalPriority=3,ca.unstable_Profiling=null,ca.unstable_UserBlockingPriority=2,ca.unstable_cancelCallback=function(du){du.callback=null},ca.unstable_continueExecution=function(){ru||au||(ru=!0,ga(hu))},ca.unstable_getCurrentPriorityLevel=function(){return Zs},ca.unstable_getFirstCallbackNode=function(){return Qs(Ys)},ca.unstable_next=function(du){switch(Zs){case 1:case 2:case 3:var vu=3;break;default:vu=Zs}var pu=Zs;Zs=vu;try{return du()}finally{Zs=pu}},ca.unstable_pauseExecution=function(){},ca.unstable_requestPaint=Mu,ca.unstable_runWithPriority=function(du,vu){switch(du){case 1:case 2:case 3:case 4:case 5:break;default:du=3}var pu=Zs;Zs=du;try{return vu()}finally{Zs=pu}},ca.unstable_scheduleCallback=function(du,vu,pu){var yu=ca.unstable_now();if(typeof pu=="object"&&pu!==null){var Su=pu.delay;Su=typeof Su=="number"&&0<Su?yu+Su:yu,pu=typeof pu.timeout=="number"?pu.timeout:wu(du)}else pu=wu(du),Su=yu;return pu=Su+pu,du={id:Js++,callback:vu,priorityLevel:du,startTime:Su,expirationTime:pu,sortIndex:-1},Su>yu?(du.sortIndex=Su,Ws(Ks,du),Qs(Ys)===null&&du===Qs(Ks)&&(su?Ss():su=!0,_s(gu,Su-yu))):(du.sortIndex=pu,Ws(Ys,du),ru||au||(ru=!0,ga(hu))),du},ca.unstable_shouldYield=function(){var du=ca.unstable_now();lu(du);var vu=Qs(Ys);return vu!==eu&&eu!==null&&vu!==null&&vu.callback!==null&&vu.startTime<=du&&vu.expirationTime<eu.expirationTime||Ms()},ca.unstable_wrapCallback=function(du){var vu=Zs;return function(){var pu=Zs;Zs=vu;try{return du.apply(this,arguments)}finally{Zs=pu}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react$1.exports,n$4=objectAssign,r$3=scheduler.exports;function u$3(ca){for(var ga="https://reactjs.org/docs/error-decoder.html?invariant="+ca,_s=1;_s<arguments.length;_s++)ga+="&args[]="+encodeURIComponent(arguments[_s]);return"Minified React error #"+ca+"; visit "+ga+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u$3(227));function ba(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=Array.prototype.slice.call(arguments,3);try{ga.apply(_s,Ls)}catch(Rs){this.onError(Rs)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(ca){da=!0,ea=ca}};function ja(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){da=!1,ea=null,ba.apply(ia,arguments)}function ka(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){if(ja.apply(this,arguments),da){if(da){var Ls=ea;da=!1,ea=null}else throw Error(u$3(198));fa||(fa=!0,ha=Ls)}}var la=null,ma=null,na=null;function oa(ca,ga,_s){var Ss=ca.type||"unknown-event";ca.currentTarget=na(_s),ka(Ss,ga,void 0,ca),ca.currentTarget=null}var pa=null,qa={};function ra(){if(pa)for(var ca in qa){var ga=qa[ca],_s=pa.indexOf(ca);if(!(-1<_s))throw Error(u$3(96,ca));if(!sa[_s]){if(!ga.extractEvents)throw Error(u$3(97,ca));sa[_s]=ga,_s=ga.eventTypes;for(var Ss in _s){var Ms=void 0,Cs=_s[Ss],Ts=ga,Bs=Ss;if(ta.hasOwnProperty(Bs))throw Error(u$3(99,Bs));ta[Bs]=Cs;var Ps=Cs.phasedRegistrationNames;if(Ps){for(Ms in Ps)Ps.hasOwnProperty(Ms)&&ua(Ps[Ms],Ts,Bs);Ms=!0}else Cs.registrationName?(ua(Cs.registrationName,Ts,Bs),Ms=!0):Ms=!1;if(!Ms)throw Error(u$3(98,Ss,ca))}}}}function ua(ca,ga,_s){if(va[ca])throw Error(u$3(100,ca));va[ca]=ga,wa[ca]=ga.eventTypes[_s].dependencies}var sa=[],ta={},va={},wa={};function xa(ca){var ga=!1,_s;for(_s in ca)if(ca.hasOwnProperty(_s)){var Ss=ca[_s];if(!qa.hasOwnProperty(_s)||qa[_s]!==Ss){if(qa[_s])throw Error(u$3(102,_s));qa[_s]=Ss,ga=!0}}ga&&ra()}var ya=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za=null,Aa=null,Ba=null;function Ca(ca){if(ca=ma(ca)){if(typeof za!="function")throw Error(u$3(280));var ga=ca.stateNode;ga&&(ga=la(ga),za(ca.stateNode,ca.type,ga))}}function Da(ca){Aa?Ba?Ba.push(ca):Ba=[ca]:Aa=ca}function Ea(){if(Aa){var ca=Aa,ga=Ba;if(Ba=Aa=null,Ca(ca),ga)for(ca=0;ca<ga.length;ca++)Ca(ga[ca])}}function Fa(ca,ga){return ca(ga)}function Ga(ca,ga,_s,Ss,Ms){return ca(ga,_s,Ss,Ms)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){(Aa!==null||Ba!==null)&&(Ha(),Ea())}function Ma(ca,ga,_s){if(Ka)return ca(ga,_s);Ka=!0;try{return Ia(ca,ga,_s)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};function Ra(ca){return Oa.call(Qa,ca)?!0:Oa.call(Pa,ca)?!1:Na.test(ca)?Qa[ca]=!0:(Pa[ca]=!0,!1)}function Sa(ca,ga,_s,Ss){if(_s!==null&&_s.type===0)return!1;switch(typeof ga){case"function":case"symbol":return!0;case"boolean":return Ss?!1:_s!==null?!_s.acceptsBooleans:(ca=ca.toLowerCase().slice(0,5),ca!=="data-"&&ca!=="aria-");default:return!1}}function Ta(ca,ga,_s,Ss){if(ga===null||typeof ga=="undefined"||Sa(ca,ga,_s,Ss))return!0;if(Ss)return!1;if(_s!==null)switch(_s.type){case 3:return!ga;case 4:return ga===!1;case 5:return isNaN(ga);case 6:return isNaN(ga)||1>ga}return!1}function v$2(ca,ga,_s,Ss,Ms,Cs){this.acceptsBooleans=ga===2||ga===3||ga===4,this.attributeName=Ss,this.attributeNamespace=Ms,this.mustUseProperty=_s,this.propertyName=ca,this.type=ga,this.sanitizeURL=Cs}var C$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ca){C$2[ca]=new v$2(ca,0,!1,ca,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ca){var ga=ca[0];C$2[ga]=new v$2(ga,1,!1,ca[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ca){C$2[ca]=new v$2(ca,2,!1,ca.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ca){C$2[ca]=new v$2(ca,2,!1,ca,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ca){C$2[ca]=new v$2(ca,3,!1,ca.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(ca){C$2[ca]=new v$2(ca,3,!0,ca,null,!1)});["capture","download"].forEach(function(ca){C$2[ca]=new v$2(ca,4,!1,ca,null,!1)});["cols","rows","size","span"].forEach(function(ca){C$2[ca]=new v$2(ca,6,!1,ca,null,!1)});["rowSpan","start"].forEach(function(ca){C$2[ca]=new v$2(ca,5,!1,ca.toLowerCase(),null,!1)});var Ua=/[\-:]([a-z])/g;function Va(ca){return ca[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(ca){var ga=ca.replace(Ua,Va);C$2[ga]=new v$2(ga,1,!1,ca,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(ca){C$2[ca]=new v$2(ca,1,!1,ca.toLowerCase(),null,!1)});C$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(ca){C$2[ca]=new v$2(ca,1,!1,ca.toLowerCase(),null,!0)});var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa.hasOwnProperty("ReactCurrentDispatcher")||(Wa.ReactCurrentDispatcher={current:null});Wa.hasOwnProperty("ReactCurrentBatchConfig")||(Wa.ReactCurrentBatchConfig={suspense:null});function Xa(ca,ga,_s,Ss){var Ms=C$2.hasOwnProperty(ga)?C$2[ga]:null,Cs=Ms!==null?Ms.type===0:Ss?!1:!(!(2<ga.length)||ga[0]!=="o"&&ga[0]!=="O"||ga[1]!=="n"&&ga[1]!=="N");Cs||(Ta(ga,_s,Ms,Ss)&&(_s=null),Ss||Ms===null?Ra(ga)&&(_s===null?ca.removeAttribute(ga):ca.setAttribute(ga,""+_s)):Ms.mustUseProperty?ca[Ms.propertyName]=_s===null?Ms.type===3?!1:"":_s:(ga=Ms.attributeName,Ss=Ms.attributeNamespace,_s===null?ca.removeAttribute(ga):(Ms=Ms.type,_s=Ms===3||Ms===4&&_s===!0?"":""+_s,Ss?ca.setAttributeNS(Ss,ga,_s):ca.setAttribute(ga,_s))))}var Ya=/^(.*)[\\\/]/,E$2=typeof Symbol=="function"&&Symbol.for,Za=E$2?Symbol.for("react.element"):60103,$a=E$2?Symbol.for("react.portal"):60106,ab=E$2?Symbol.for("react.fragment"):60107,bb=E$2?Symbol.for("react.strict_mode"):60108,cb=E$2?Symbol.for("react.profiler"):60114,db=E$2?Symbol.for("react.provider"):60109,eb=E$2?Symbol.for("react.context"):60110,fb=E$2?Symbol.for("react.concurrent_mode"):60111,gb=E$2?Symbol.for("react.forward_ref"):60112,hb=E$2?Symbol.for("react.suspense"):60113,ib=E$2?Symbol.for("react.suspense_list"):60120,jb=E$2?Symbol.for("react.memo"):60115,kb=E$2?Symbol.for("react.lazy"):60116,lb=E$2?Symbol.for("react.block"):60121,mb=typeof Symbol=="function"&&Symbol.iterator;function nb(ca){return ca===null||typeof ca!="object"?null:(ca=mb&&ca[mb]||ca["@@iterator"],typeof ca=="function"?ca:null)}function ob(ca){if(ca._status===-1){ca._status=0;var ga=ca._ctor;ga=ga(),ca._result=ga,ga.then(function(_s){ca._status===0&&(_s=_s.default,ca._status=1,ca._result=_s)},function(_s){ca._status===0&&(ca._status=2,ca._result=_s)})}}function pb(ca){if(ca==null)return null;if(typeof ca=="function")return ca.displayName||ca.name||null;if(typeof ca=="string")return ca;switch(ca){case ab:return"Fragment";case $a:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if(typeof ca=="object")switch(ca.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var ga=ca.render;return ga=ga.displayName||ga.name||"",ca.displayName||(ga!==""?"ForwardRef("+ga+")":"ForwardRef");case jb:return pb(ca.type);case lb:return pb(ca.render);case kb:if(ca=ca._status===1?ca._result:null)return pb(ca)}return null}function qb(ca){var ga="";do{e:switch(ca.tag){case 3:case 4:case 6:case 7:case 10:case 9:var _s="";break e;default:var Ss=ca._debugOwner,Ms=ca._debugSource,Cs=pb(ca.type);_s=null,Ss&&(_s=pb(Ss.type)),Ss=Cs,Cs="",Ms?Cs=" (at "+Ms.fileName.replace(Ya,"")+":"+Ms.lineNumber+")":_s&&(Cs=" (created by "+_s+")"),_s=`
    in `+(Ss||"Unknown")+Cs}ga+=_s,ca=ca.return}while(ca);return ga}function rb(ca){switch(typeof ca){case"boolean":case"number":case"object":case"string":case"undefined":return ca;default:return""}}function sb(ca){var ga=ca.type;return(ca=ca.nodeName)&&ca.toLowerCase()==="input"&&(ga==="checkbox"||ga==="radio")}function tb(ca){var ga=sb(ca)?"checked":"value",_s=Object.getOwnPropertyDescriptor(ca.constructor.prototype,ga),Ss=""+ca[ga];if(!ca.hasOwnProperty(ga)&&typeof _s!="undefined"&&typeof _s.get=="function"&&typeof _s.set=="function"){var Ms=_s.get,Cs=_s.set;return Object.defineProperty(ca,ga,{configurable:!0,get:function(){return Ms.call(this)},set:function(Ts){Ss=""+Ts,Cs.call(this,Ts)}}),Object.defineProperty(ca,ga,{enumerable:_s.enumerable}),{getValue:function(){return Ss},setValue:function(Ts){Ss=""+Ts},stopTracking:function(){ca._valueTracker=null,delete ca[ga]}}}}function xb(ca){ca._valueTracker||(ca._valueTracker=tb(ca))}function yb(ca){if(!ca)return!1;var ga=ca._valueTracker;if(!ga)return!0;var _s=ga.getValue(),Ss="";return ca&&(Ss=sb(ca)?ca.checked?"true":"false":ca.value),ca=Ss,ca!==_s?(ga.setValue(ca),!0):!1}function zb(ca,ga){var _s=ga.checked;return n$4({},ga,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_s!=null?_s:ca._wrapperState.initialChecked})}function Ab(ca,ga){var _s=ga.defaultValue==null?"":ga.defaultValue,Ss=ga.checked!=null?ga.checked:ga.defaultChecked;_s=rb(ga.value!=null?ga.value:_s),ca._wrapperState={initialChecked:Ss,initialValue:_s,controlled:ga.type==="checkbox"||ga.type==="radio"?ga.checked!=null:ga.value!=null}}function Bb(ca,ga){ga=ga.checked,ga!=null&&Xa(ca,"checked",ga,!1)}function Cb(ca,ga){Bb(ca,ga);var _s=rb(ga.value),Ss=ga.type;if(_s!=null)Ss==="number"?(_s===0&&ca.value===""||ca.value!=_s)&&(ca.value=""+_s):ca.value!==""+_s&&(ca.value=""+_s);else if(Ss==="submit"||Ss==="reset"){ca.removeAttribute("value");return}ga.hasOwnProperty("value")?Db(ca,ga.type,_s):ga.hasOwnProperty("defaultValue")&&Db(ca,ga.type,rb(ga.defaultValue)),ga.checked==null&&ga.defaultChecked!=null&&(ca.defaultChecked=!!ga.defaultChecked)}function Eb(ca,ga,_s){if(ga.hasOwnProperty("value")||ga.hasOwnProperty("defaultValue")){var Ss=ga.type;if(!(Ss!=="submit"&&Ss!=="reset"||ga.value!==void 0&&ga.value!==null))return;ga=""+ca._wrapperState.initialValue,_s||ga===ca.value||(ca.value=ga),ca.defaultValue=ga}_s=ca.name,_s!==""&&(ca.name=""),ca.defaultChecked=!!ca._wrapperState.initialChecked,_s!==""&&(ca.name=_s)}function Db(ca,ga,_s){(ga!=="number"||ca.ownerDocument.activeElement!==ca)&&(_s==null?ca.defaultValue=""+ca._wrapperState.initialValue:ca.defaultValue!==""+_s&&(ca.defaultValue=""+_s))}function Fb(ca){var ga="";return aa.Children.forEach(ca,function(_s){_s!=null&&(ga+=_s)}),ga}function Gb(ca,ga){return ca=n$4({children:void 0},ga),(ga=Fb(ga.children))&&(ca.children=ga),ca}function Hb(ca,ga,_s,Ss){if(ca=ca.options,ga){ga={};for(var Ms=0;Ms<_s.length;Ms++)ga["$"+_s[Ms]]=!0;for(_s=0;_s<ca.length;_s++)Ms=ga.hasOwnProperty("$"+ca[_s].value),ca[_s].selected!==Ms&&(ca[_s].selected=Ms),Ms&&Ss&&(ca[_s].defaultSelected=!0)}else{for(_s=""+rb(_s),ga=null,Ms=0;Ms<ca.length;Ms++){if(ca[Ms].value===_s){ca[Ms].selected=!0,Ss&&(ca[Ms].defaultSelected=!0);return}ga!==null||ca[Ms].disabled||(ga=ca[Ms])}ga!==null&&(ga.selected=!0)}}function Ib(ca,ga){if(ga.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},ga,{value:void 0,defaultValue:void 0,children:""+ca._wrapperState.initialValue})}function Jb(ca,ga){var _s=ga.value;if(_s==null){if(_s=ga.children,ga=ga.defaultValue,_s!=null){if(ga!=null)throw Error(u$3(92));if(Array.isArray(_s)){if(!(1>=_s.length))throw Error(u$3(93));_s=_s[0]}ga=_s}ga==null&&(ga=""),_s=ga}ca._wrapperState={initialValue:rb(_s)}}function Kb(ca,ga){var _s=rb(ga.value),Ss=rb(ga.defaultValue);_s!=null&&(_s=""+_s,_s!==ca.value&&(ca.value=_s),ga.defaultValue==null&&ca.defaultValue!==_s&&(ca.defaultValue=_s)),Ss!=null&&(ca.defaultValue=""+Ss)}function Lb(ca){var ga=ca.textContent;ga===ca._wrapperState.initialValue&&ga!==""&&ga!==null&&(ca.value=ga)}var Mb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb(ca){switch(ca){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(ca,ga){return ca==null||ca==="http://www.w3.org/1999/xhtml"?Nb(ga):ca==="http://www.w3.org/2000/svg"&&ga==="foreignObject"?"http://www.w3.org/1999/xhtml":ca}var Pb,Qb=function(ca){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(ga,_s,Ss,Ms){MSApp.execUnsafeLocalFunction(function(){return ca(ga,_s,Ss,Ms)})}:ca}(function(ca,ga){if(ca.namespaceURI!==Mb.svg||"innerHTML"in ca)ca.innerHTML=ga;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+ga.valueOf().toString()+"</svg>",ga=Pb.firstChild;ca.firstChild;)ca.removeChild(ca.firstChild);for(;ga.firstChild;)ca.appendChild(ga.firstChild)}});function Rb(ca,ga){if(ga){var _s=ca.firstChild;if(_s&&_s===ca.lastChild&&_s.nodeType===3){_s.nodeValue=ga;return}}ca.textContent=ga}function Sb(ca,ga){var _s={};return _s[ca.toLowerCase()]=ga.toLowerCase(),_s["Webkit"+ca]="webkit"+ga,_s["Moz"+ca]="moz"+ga,_s}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};ya&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);function Wb(ca){if(Ub[ca])return Ub[ca];if(!Tb[ca])return ca;var ga=Tb[ca],_s;for(_s in ga)if(ga.hasOwnProperty(_s)&&_s in Vb)return Ub[ca]=ga[_s];return ca}var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function cc(ca){var ga=bc.get(ca);return ga===void 0&&(ga=new Map,bc.set(ca,ga)),ga}function dc(ca){var ga=ca,_s=ca;if(ca.alternate)for(;ga.return;)ga=ga.return;else{ca=ga;do ga=ca,(ga.effectTag&1026)!=0&&(_s=ga.return),ca=ga.return;while(ca)}return ga.tag===3?_s:null}function ec(ca){if(ca.tag===13){var ga=ca.memoizedState;if(ga===null&&(ca=ca.alternate,ca!==null&&(ga=ca.memoizedState)),ga!==null)return ga.dehydrated}return null}function fc(ca){if(dc(ca)!==ca)throw Error(u$3(188))}function gc(ca){var ga=ca.alternate;if(!ga){if(ga=dc(ca),ga===null)throw Error(u$3(188));return ga!==ca?null:ca}for(var _s=ca,Ss=ga;;){var Ms=_s.return;if(Ms===null)break;var Cs=Ms.alternate;if(Cs===null){if(Ss=Ms.return,Ss!==null){_s=Ss;continue}break}if(Ms.child===Cs.child){for(Cs=Ms.child;Cs;){if(Cs===_s)return fc(Ms),ca;if(Cs===Ss)return fc(Ms),ga;Cs=Cs.sibling}throw Error(u$3(188))}if(_s.return!==Ss.return)_s=Ms,Ss=Cs;else{for(var Ts=!1,Bs=Ms.child;Bs;){if(Bs===_s){Ts=!0,_s=Ms,Ss=Cs;break}if(Bs===Ss){Ts=!0,Ss=Ms,_s=Cs;break}Bs=Bs.sibling}if(!Ts){for(Bs=Cs.child;Bs;){if(Bs===_s){Ts=!0,_s=Cs,Ss=Ms;break}if(Bs===Ss){Ts=!0,Ss=Cs,_s=Ms;break}Bs=Bs.sibling}if(!Ts)throw Error(u$3(189))}}if(_s.alternate!==Ss)throw Error(u$3(190))}if(_s.tag!==3)throw Error(u$3(188));return _s.stateNode.current===_s?ca:ga}function hc(ca){if(ca=gc(ca),!ca)return null;for(var ga=ca;;){if(ga.tag===5||ga.tag===6)return ga;if(ga.child)ga.child.return=ga,ga=ga.child;else{if(ga===ca)break;for(;!ga.sibling;){if(!ga.return||ga.return===ca)return null;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}}return null}function ic(ca,ga){if(ga==null)throw Error(u$3(30));return ca==null?ga:Array.isArray(ca)?Array.isArray(ga)?(ca.push.apply(ca,ga),ca):(ca.push(ga),ca):Array.isArray(ga)?[ca].concat(ga):[ca,ga]}function jc(ca,ga,_s){Array.isArray(ca)?ca.forEach(ga,_s):ca&&ga.call(_s,ca)}var kc=null;function lc(ca){if(ca){var ga=ca._dispatchListeners,_s=ca._dispatchInstances;if(Array.isArray(ga))for(var Ss=0;Ss<ga.length&&!ca.isPropagationStopped();Ss++)oa(ca,ga[Ss],_s[Ss]);else ga&&oa(ca,ga,_s);ca._dispatchListeners=null,ca._dispatchInstances=null,ca.isPersistent()||ca.constructor.release(ca)}}function mc(ca){if(ca!==null&&(kc=ic(kc,ca)),ca=kc,kc=null,ca){if(jc(ca,lc),kc)throw Error(u$3(95));if(fa)throw ca=ha,fa=!1,ha=null,ca}}function nc(ca){return ca=ca.target||ca.srcElement||window,ca.correspondingUseElement&&(ca=ca.correspondingUseElement),ca.nodeType===3?ca.parentNode:ca}function oc(ca){if(!ya)return!1;ca="on"+ca;var ga=ca in document;return ga||(ga=document.createElement("div"),ga.setAttribute(ca,"return;"),ga=typeof ga[ca]=="function"),ga}var pc=[];function qc(ca){ca.topLevelType=null,ca.nativeEvent=null,ca.targetInst=null,ca.ancestors.length=0,10>pc.length&&pc.push(ca)}function rc(ca,ga,_s,Ss){if(pc.length){var Ms=pc.pop();return Ms.topLevelType=ca,Ms.eventSystemFlags=Ss,Ms.nativeEvent=ga,Ms.targetInst=_s,Ms}return{topLevelType:ca,eventSystemFlags:Ss,nativeEvent:ga,targetInst:_s,ancestors:[]}}function sc(ca){var ga=ca.targetInst,_s=ga;do{if(!_s){ca.ancestors.push(_s);break}var Ss=_s;if(Ss.tag===3)Ss=Ss.stateNode.containerInfo;else{for(;Ss.return;)Ss=Ss.return;Ss=Ss.tag!==3?null:Ss.stateNode.containerInfo}if(!Ss)break;ga=_s.tag,ga!==5&&ga!==6||ca.ancestors.push(_s),_s=tc(Ss)}while(_s);for(_s=0;_s<ca.ancestors.length;_s++){ga=ca.ancestors[_s];var Ms=nc(ca.nativeEvent);Ss=ca.topLevelType;var Cs=ca.nativeEvent,Ts=ca.eventSystemFlags;_s===0&&(Ts|=64);for(var Bs=null,Ps=0;Ps<sa.length;Ps++){var Ls=sa[Ps];Ls&&(Ls=Ls.extractEvents(Ss,ga,Cs,Ms,Ts))&&(Bs=ic(Bs,Ls))}mc(Bs)}}function uc(ca,ga,_s){if(!_s.has(ca)){switch(ca){case"scroll":vc(ga,"scroll",!0);break;case"focus":case"blur":vc(ga,"focus",!0),vc(ga,"blur",!0),_s.set("blur",null),_s.set("focus",null);break;case"cancel":case"close":oc(ca)&&vc(ga,ca,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(ca)===-1&&F$2(ca,ga)}_s.set(ca,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(ca,ga){var _s=cc(ga);Hc.forEach(function(Ss){uc(Ss,ga,_s)}),Ic.forEach(function(Ss){uc(Ss,ga,_s)})}function Kc(ca,ga,_s,Ss,Ms){return{blockedOn:ca,topLevelType:ga,eventSystemFlags:_s|32,nativeEvent:Ms,container:Ss}}function Lc(ca,ga){switch(ca){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete(ga.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(ga.pointerId)}}function Mc(ca,ga,_s,Ss,Ms,Cs){return ca===null||ca.nativeEvent!==Cs?(ca=Kc(ga,_s,Ss,Ms,Cs),ga!==null&&(ga=Nc(ga),ga!==null&&xc(ga)),ca):(ca.eventSystemFlags|=Ss,ca)}function Oc(ca,ga,_s,Ss,Ms){switch(ga){case"focus":return Bc=Mc(Bc,ca,ga,_s,Ss,Ms),!0;case"dragenter":return Cc=Mc(Cc,ca,ga,_s,Ss,Ms),!0;case"mouseover":return Dc=Mc(Dc,ca,ga,_s,Ss,Ms),!0;case"pointerover":var Cs=Ms.pointerId;return Ec.set(Cs,Mc(Ec.get(Cs)||null,ca,ga,_s,Ss,Ms)),!0;case"gotpointercapture":return Cs=Ms.pointerId,Fc.set(Cs,Mc(Fc.get(Cs)||null,ca,ga,_s,Ss,Ms)),!0}return!1}function Pc(ca){var ga=tc(ca.target);if(ga!==null){var _s=dc(ga);if(_s!==null){if(ga=_s.tag,ga===13){if(ga=ec(_s),ga!==null){ca.blockedOn=ga,r$3.unstable_runWithPriority(ca.priority,function(){yc(_s)});return}}else if(ga===3&&_s.stateNode.hydrate){ca.blockedOn=_s.tag===3?_s.stateNode.containerInfo:null;return}}}ca.blockedOn=null}function Qc(ca){if(ca.blockedOn!==null)return!1;var ga=Rc(ca.topLevelType,ca.eventSystemFlags,ca.container,ca.nativeEvent);if(ga!==null){var _s=Nc(ga);return _s!==null&&xc(_s),ca.blockedOn=ga,!1}return!0}function Sc(ca,ga,_s){Qc(ca)&&_s.delete(ga)}function Tc(){for(zc=!1;0<Ac.length;){var ca=Ac[0];if(ca.blockedOn!==null){ca=Nc(ca.blockedOn),ca!==null&&wc(ca);break}var ga=Rc(ca.topLevelType,ca.eventSystemFlags,ca.container,ca.nativeEvent);ga!==null?ca.blockedOn=ga:Ac.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(ca,ga){ca.blockedOn===ga&&(ca.blockedOn=null,zc||(zc=!0,r$3.unstable_scheduleCallback(r$3.unstable_NormalPriority,Tc)))}function Vc(ca){function ga(Ms){return Uc(Ms,ca)}if(0<Ac.length){Uc(Ac[0],ca);for(var _s=1;_s<Ac.length;_s++){var Ss=Ac[_s];Ss.blockedOn===ca&&(Ss.blockedOn=null)}}for(Bc!==null&&Uc(Bc,ca),Cc!==null&&Uc(Cc,ca),Dc!==null&&Uc(Dc,ca),Ec.forEach(ga),Fc.forEach(ga),_s=0;_s<Gc.length;_s++)Ss=Gc[_s],Ss.blockedOn===ca&&(Ss.blockedOn=null);for(;0<Gc.length&&(_s=Gc[0],_s.blockedOn===null);)Pc(_s),_s.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(ca,ga){for(var _s=0;_s<ca.length;_s+=2){var Ss=ca[_s],Ms=ca[_s+1],Cs="on"+(Ms[0].toUpperCase()+Ms.slice(1));Cs={phasedRegistrationNames:{bubbled:Cs,captured:Cs+"Capture"},dependencies:[Ss],eventPriority:ga},Zc.set(Ss,ga),Yc.set(Ss,Cs),Wc[Ms]=Cs}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r$3.unstable_UserBlockingPriority,ed=r$3.unstable_runWithPriority,fd=!0;function F$2(ca,ga){vc(ga,ca,!1)}function vc(ca,ga,_s){var Ss=Zc.get(ga);switch(Ss===void 0?2:Ss){case 0:Ss=gd.bind(null,ga,1,ca);break;case 1:Ss=hd.bind(null,ga,1,ca);break;default:Ss=id.bind(null,ga,1,ca)}_s?ca.addEventListener(ga,Ss,!0):ca.addEventListener(ga,Ss,!1)}function gd(ca,ga,_s,Ss){Ja||Ha();var Ms=id,Cs=Ja;Ja=!0;try{Ga(Ms,ca,ga,_s,Ss)}finally{(Ja=Cs)||La()}}function hd(ca,ga,_s,Ss){ed(dd,id.bind(null,ca,ga,_s,Ss))}function id(ca,ga,_s,Ss){if(fd)if(0<Ac.length&&-1<Hc.indexOf(ca))ca=Kc(null,ca,ga,_s,Ss),Ac.push(ca);else{var Ms=Rc(ca,ga,_s,Ss);if(Ms===null)Lc(ca,Ss);else if(-1<Hc.indexOf(ca))ca=Kc(Ms,ca,ga,_s,Ss),Ac.push(ca);else if(!Oc(Ms,ca,ga,_s,Ss)){Lc(ca,Ss),ca=rc(ca,Ss,null,ga);try{Ma(sc,ca)}finally{qc(ca)}}}}function Rc(ca,ga,_s,Ss){if(_s=nc(Ss),_s=tc(_s),_s!==null){var Ms=dc(_s);if(Ms===null)_s=null;else{var Cs=Ms.tag;if(Cs===13){if(_s=ec(Ms),_s!==null)return _s;_s=null}else if(Cs===3){if(Ms.stateNode.hydrate)return Ms.tag===3?Ms.stateNode.containerInfo:null;_s=null}else Ms!==_s&&(_s=null)}}ca=rc(ca,Ss,_s,ga);try{Ma(sc,ca)}finally{qc(ca)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(ca){kd.forEach(function(ga){ga=ga+ca.charAt(0).toUpperCase()+ca.substring(1),jd[ga]=jd[ca]})});function ld(ca,ga,_s){return ga==null||typeof ga=="boolean"||ga===""?"":_s||typeof ga!="number"||ga===0||jd.hasOwnProperty(ca)&&jd[ca]?(""+ga).trim():ga+"px"}function md(ca,ga){ca=ca.style;for(var _s in ga)if(ga.hasOwnProperty(_s)){var Ss=_s.indexOf("--")===0,Ms=ld(_s,ga[_s],Ss);_s==="float"&&(_s="cssFloat"),Ss?ca.setProperty(_s,Ms):ca[_s]=Ms}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(ca,ga){if(ga){if(nd[ca]&&(ga.children!=null||ga.dangerouslySetInnerHTML!=null))throw Error(u$3(137,ca,""));if(ga.dangerouslySetInnerHTML!=null){if(ga.children!=null)throw Error(u$3(60));if(!(typeof ga.dangerouslySetInnerHTML=="object"&&"__html"in ga.dangerouslySetInnerHTML))throw Error(u$3(61))}if(ga.style!=null&&typeof ga.style!="object")throw Error(u$3(62,""))}}function pd(ca,ga){if(ca.indexOf("-")===-1)return typeof ga.is=="string";switch(ca){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb.html;function rd(ca,ga){ca=ca.nodeType===9||ca.nodeType===11?ca:ca.ownerDocument;var _s=cc(ca);ga=wa[ga];for(var Ss=0;Ss<ga.length;Ss++)uc(ga[Ss],ca,_s)}function sd(){}function td(ca){if(ca=ca||(typeof document!="undefined"?document:void 0),typeof ca=="undefined")return null;try{return ca.activeElement||ca.body}catch{return ca.body}}function ud(ca){for(;ca&&ca.firstChild;)ca=ca.firstChild;return ca}function vd(ca,ga){var _s=ud(ca);ca=0;for(var Ss;_s;){if(_s.nodeType===3){if(Ss=ca+_s.textContent.length,ca<=ga&&Ss>=ga)return{node:_s,offset:ga-ca};ca=Ss}e:{for(;_s;){if(_s.nextSibling){_s=_s.nextSibling;break e}_s=_s.parentNode}_s=void 0}_s=ud(_s)}}function wd(ca,ga){return ca&&ga?ca===ga?!0:ca&&ca.nodeType===3?!1:ga&&ga.nodeType===3?wd(ca,ga.parentNode):"contains"in ca?ca.contains(ga):ca.compareDocumentPosition?!!(ca.compareDocumentPosition(ga)&16):!1:!1}function xd(){for(var ca=window,ga=td();ga instanceof ca.HTMLIFrameElement;){try{var _s=typeof ga.contentWindow.location.href=="string"}catch{_s=!1}if(_s)ca=ga.contentWindow;else break;ga=td(ca.document)}return ga}function yd(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga&&(ga==="input"&&(ca.type==="text"||ca.type==="search"||ca.type==="tel"||ca.type==="url"||ca.type==="password")||ga==="textarea"||ca.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd(ca,ga){switch(ca){case"button":case"input":case"select":case"textarea":return!!ga.autoFocus}return!1}function Gd(ca,ga){return ca==="textarea"||ca==="option"||ca==="noscript"||typeof ga.children=="string"||typeof ga.children=="number"||typeof ga.dangerouslySetInnerHTML=="object"&&ga.dangerouslySetInnerHTML!==null&&ga.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd(ca){for(;ca!=null;ca=ca.nextSibling){var ga=ca.nodeType;if(ga===1||ga===3)break}return ca}function Kd(ca){ca=ca.previousSibling;for(var ga=0;ca;){if(ca.nodeType===8){var _s=ca.data;if(_s===zd||_s===Cd||_s===Bd){if(ga===0)return ca;ga--}else _s===Ad&&ga++}ca=ca.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(ca){var ga=ca[Md];if(ga)return ga;for(var _s=ca.parentNode;_s;){if(ga=_s[Od]||_s[Md]){if(_s=ga.alternate,ga.child!==null||_s!==null&&_s.child!==null)for(ca=Kd(ca);ca!==null;){if(_s=ca[Md])return _s;ca=Kd(ca)}return ga}ca=_s,_s=ca.parentNode}return null}function Nc(ca){return ca=ca[Md]||ca[Od],!ca||ca.tag!==5&&ca.tag!==6&&ca.tag!==13&&ca.tag!==3?null:ca}function Pd(ca){if(ca.tag===5||ca.tag===6)return ca.stateNode;throw Error(u$3(33))}function Qd(ca){return ca[Nd]||null}function Rd(ca){do ca=ca.return;while(ca&&ca.tag!==5);return ca||null}function Sd(ca,ga){var _s=ca.stateNode;if(!_s)return null;var Ss=la(_s);if(!Ss)return null;_s=Ss[ga];e:switch(ga){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ss=!Ss.disabled)||(ca=ca.type,Ss=!(ca==="button"||ca==="input"||ca==="select"||ca==="textarea")),ca=!Ss;break e;default:ca=!1}if(ca)return null;if(_s&&typeof _s!="function")throw Error(u$3(231,ga,typeof _s));return _s}function Td(ca,ga,_s){(ga=Sd(ca,_s.dispatchConfig.phasedRegistrationNames[ga]))&&(_s._dispatchListeners=ic(_s._dispatchListeners,ga),_s._dispatchInstances=ic(_s._dispatchInstances,ca))}function Ud(ca){if(ca&&ca.dispatchConfig.phasedRegistrationNames){for(var ga=ca._targetInst,_s=[];ga;)_s.push(ga),ga=Rd(ga);for(ga=_s.length;0<ga--;)Td(_s[ga],"captured",ca);for(ga=0;ga<_s.length;ga++)Td(_s[ga],"bubbled",ca)}}function Vd(ca,ga,_s){ca&&_s&&_s.dispatchConfig.registrationName&&(ga=Sd(ca,_s.dispatchConfig.registrationName))&&(_s._dispatchListeners=ic(_s._dispatchListeners,ga),_s._dispatchInstances=ic(_s._dispatchInstances,ca))}function Wd(ca){ca&&ca.dispatchConfig.registrationName&&Vd(ca._targetInst,null,ca)}function Xd(ca){jc(ca,Ud)}var Yd=null,Zd=null,$d=null;function ae$1(){if($d)return $d;var ca,ga=Zd,_s=ga.length,Ss,Ms="value"in Yd?Yd.value:Yd.textContent,Cs=Ms.length;for(ca=0;ca<_s&&ga[ca]===Ms[ca];ca++);var Ts=_s-ca;for(Ss=1;Ss<=Ts&&ga[_s-Ss]===Ms[Cs-Ss];Ss++);return $d=Ms.slice(ca,1<Ss?1-Ss:void 0)}function be$1(){return!0}function ce$1(){return!1}function G$1(ca,ga,_s,Ss){this.dispatchConfig=ca,this._targetInst=ga,this.nativeEvent=_s,ca=this.constructor.Interface;for(var Ms in ca)ca.hasOwnProperty(Ms)&&((ga=ca[Ms])?this[Ms]=ga(_s):Ms==="target"?this.target=Ss:this[Ms]=_s[Ms]);return this.isDefaultPrevented=(_s.defaultPrevented!=null?_s.defaultPrevented:_s.returnValue===!1)?be$1:ce$1,this.isPropagationStopped=ce$1,this}n$4(G$1.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ca=this.nativeEvent;ca&&(ca.preventDefault?ca.preventDefault():typeof ca.returnValue!="unknown"&&(ca.returnValue=!1),this.isDefaultPrevented=be$1)},stopPropagation:function(){var ca=this.nativeEvent;ca&&(ca.stopPropagation?ca.stopPropagation():typeof ca.cancelBubble!="unknown"&&(ca.cancelBubble=!0),this.isPropagationStopped=be$1)},persist:function(){this.isPersistent=be$1},isPersistent:ce$1,destructor:function(){var ca=this.constructor.Interface,ga;for(ga in ca)this[ga]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$1,this._dispatchInstances=this._dispatchListeners=null}});G$1.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(ca){return ca.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$1.extend=function(ca){function ga(){}function _s(){return Ss.apply(this,arguments)}var Ss=this;ga.prototype=Ss.prototype;var Ms=new ga;return n$4(Ms,_s.prototype),_s.prototype=Ms,_s.prototype.constructor=_s,_s.Interface=n$4({},Ss.Interface,ca),_s.extend=Ss.extend,de$1(_s),_s};de$1(G$1);function ee$1(ca,ga,_s,Ss){if(this.eventPool.length){var Ms=this.eventPool.pop();return this.call(Ms,ca,ga,_s,Ss),Ms}return new this(ca,ga,_s,Ss)}function fe$1(ca){if(!(ca instanceof this))throw Error(u$3(279));ca.destructor(),10>this.eventPool.length&&this.eventPool.push(ca)}function de$1(ca){ca.eventPool=[],ca.getPooled=ee$1,ca.release=fe$1}var ge$1=G$1.extend({data:null}),he$1=G$1.extend({data:null}),ie$1=[9,13,27,32],je$1=ya&&"CompositionEvent"in window,ke$1=null;ya&&"documentMode"in document&&(ke$1=document.documentMode);var le$1=ya&&"TextEvent"in window&&!ke$1,me$1=ya&&(!je$1||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$1={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$1=!1;function qe$1(ca,ga){switch(ca){case"keyup":return ie$1.indexOf(ga.keyCode)!==-1;case"keydown":return ga.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$1(ca){return ca=ca.detail,typeof ca=="object"&&"data"in ca?ca.data:null}var se$1=!1;function te$1(ca,ga){switch(ca){case"compositionend":return re$1(ga);case"keypress":return ga.which!==32?null:(pe$1=!0,ne$1);case"textInput":return ca=ga.data,ca===ne$1&&pe$1?null:ca;default:return null}}function ue$1(ca,ga){if(se$1)return ca==="compositionend"||!je$1&&qe$1(ca,ga)?(ca=ae$1(),$d=Zd=Yd=null,se$1=!1,ca):null;switch(ca){case"paste":return null;case"keypress":if(!(ga.ctrlKey||ga.altKey||ga.metaKey)||ga.ctrlKey&&ga.altKey){if(ga.char&&1<ga.char.length)return ga.char;if(ga.which)return String.fromCharCode(ga.which)}return null;case"compositionend":return me$1&&ga.locale!=="ko"?null:ga.data;default:return null}}var ve$1={eventTypes:oe$1,extractEvents:function(ca,ga,_s,Ss){var Ms;if(je$1)e:{switch(ca){case"compositionstart":var Cs=oe$1.compositionStart;break e;case"compositionend":Cs=oe$1.compositionEnd;break e;case"compositionupdate":Cs=oe$1.compositionUpdate;break e}Cs=void 0}else se$1?qe$1(ca,_s)&&(Cs=oe$1.compositionEnd):ca==="keydown"&&_s.keyCode===229&&(Cs=oe$1.compositionStart);return Cs?(me$1&&_s.locale!=="ko"&&(se$1||Cs!==oe$1.compositionStart?Cs===oe$1.compositionEnd&&se$1&&(Ms=ae$1()):(Yd=Ss,Zd="value"in Yd?Yd.value:Yd.textContent,se$1=!0)),Cs=ge$1.getPooled(Cs,ga,_s,Ss),Ms?Cs.data=Ms:(Ms=re$1(_s),Ms!==null&&(Cs.data=Ms)),Xd(Cs),Ms=Cs):Ms=null,(ca=le$1?te$1(ca,_s):ue$1(ca,_s))?(ga=he$1.getPooled(oe$1.beforeInput,ga,_s,Ss),ga.data=ca,Xd(ga)):ga=null,Ms===null?ga:ga===null?Ms:[Ms,ga]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga==="input"?!!we$1[ca.type]:ga==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$1(ca,ga,_s){return ca=G$1.getPooled(ye$1.change,ca,ga,_s),ca.type="change",Da(_s),Xd(ca),ca}var Ae$1=null,Be$1=null;function Ce$1(ca){mc(ca)}function De$1(ca){var ga=Pd(ca);if(yb(ga))return ca}function Ee$1(ca,ga){if(ca==="change")return ga}var Fe$1=!1;ya&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$1(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$1),Be$1=Ae$1=null)}function He$1(ca){if(ca.propertyName==="value"&&De$1(Be$1))if(ca=ze$1(Be$1,ca,nc(ca)),Ja)mc(ca);else{Ja=!0;try{Fa(Ce$1,ca)}finally{Ja=!1,La()}}}function Ie$1(ca,ga,_s){ca==="focus"?(Ge$1(),Ae$1=ga,Be$1=_s,Ae$1.attachEvent("onpropertychange",He$1)):ca==="blur"&&Ge$1()}function Je$1(ca){if(ca==="selectionchange"||ca==="keyup"||ca==="keydown")return De$1(Be$1)}function Ke$1(ca,ga){if(ca==="click")return De$1(ga)}function Le$1(ca,ga){if(ca==="input"||ca==="change")return De$1(ga)}var Me$1={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(ca,ga,_s,Ss){var Ms=ga?Pd(ga):window,Cs=Ms.nodeName&&Ms.nodeName.toLowerCase();if(Cs==="select"||Cs==="input"&&Ms.type==="file")var Ts=Ee$1;else if(xe$1(Ms))if(Fe$1)Ts=Le$1;else{Ts=Je$1;var Bs=Ie$1}else(Cs=Ms.nodeName)&&Cs.toLowerCase()==="input"&&(Ms.type==="checkbox"||Ms.type==="radio")&&(Ts=Ke$1);if(Ts&&(Ts=Ts(ca,ga)))return ze$1(Ts,_s,Ss);Bs&&Bs(ca,Ms,ga),ca==="blur"&&(ca=Ms._wrapperState)&&ca.controlled&&Ms.type==="number"&&Db(Ms,"number",Ms.value)}},Ne$1=G$1.extend({view:null,detail:null}),Oe$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(ca){var ga=this.nativeEvent;return ga.getModifierState?ga.getModifierState(ca):(ca=Oe$1[ca])?!!ga[ca]:!1}function Qe$1(){return Pe$1}var Re$1=0,Se$1=0,Te$1=!1,Ue$1=!1,Ve$1=Ne$1.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$1,button:null,buttons:null,relatedTarget:function(ca){return ca.relatedTarget||(ca.fromElement===ca.srcElement?ca.toElement:ca.fromElement)},movementX:function(ca){if("movementX"in ca)return ca.movementX;var ga=Re$1;return Re$1=ca.screenX,Te$1?ca.type==="mousemove"?ca.screenX-ga:0:(Te$1=!0,0)},movementY:function(ca){if("movementY"in ca)return ca.movementY;var ga=Se$1;return Se$1=ca.screenY,Ue$1?ca.type==="mousemove"?ca.screenY-ga:0:(Ue$1=!0,0)}}),We$1=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$1={eventTypes:Xe$1,extractEvents:function(ca,ga,_s,Ss,Ms){var Cs=ca==="mouseover"||ca==="pointerover",Ts=ca==="mouseout"||ca==="pointerout";if(Cs&&(Ms&32)==0&&(_s.relatedTarget||_s.fromElement)||!Ts&&!Cs)return null;if(Cs=Ss.window===Ss?Ss:(Cs=Ss.ownerDocument)?Cs.defaultView||Cs.parentWindow:window,Ts){if(Ts=ga,ga=(ga=_s.relatedTarget||_s.toElement)?tc(ga):null,ga!==null){var Bs=dc(ga);(ga!==Bs||ga.tag!==5&&ga.tag!==6)&&(ga=null)}}else Ts=null;if(Ts===ga)return null;if(ca==="mouseout"||ca==="mouseover")var Ps=Ve$1,Ls=Xe$1.mouseLeave,Rs=Xe$1.mouseEnter,Ds="mouse";else(ca==="pointerout"||ca==="pointerover")&&(Ps=We$1,Ls=Xe$1.pointerLeave,Rs=Xe$1.pointerEnter,Ds="pointer");if(ca=Ts==null?Cs:Pd(Ts),Cs=ga==null?Cs:Pd(ga),Ls=Ps.getPooled(Ls,Ts,_s,Ss),Ls.type=Ds+"leave",Ls.target=ca,Ls.relatedTarget=Cs,_s=Ps.getPooled(Rs,ga,_s,Ss),_s.type=Ds+"enter",_s.target=Cs,_s.relatedTarget=ca,Ss=Ts,Ds=ga,Ss&&Ds)e:{for(Ps=Ss,Rs=Ds,Ts=0,ca=Ps;ca;ca=Rd(ca))Ts++;for(ca=0,ga=Rs;ga;ga=Rd(ga))ca++;for(;0<Ts-ca;)Ps=Rd(Ps),Ts--;for(;0<ca-Ts;)Rs=Rd(Rs),ca--;for(;Ts--;){if(Ps===Rs||Ps===Rs.alternate)break e;Ps=Rd(Ps),Rs=Rd(Rs)}Ps=null}else Ps=null;for(Rs=Ps,Ps=[];Ss&&Ss!==Rs&&(Ts=Ss.alternate,!(Ts!==null&&Ts===Rs));)Ps.push(Ss),Ss=Rd(Ss);for(Ss=[];Ds&&Ds!==Rs&&(Ts=Ds.alternate,!(Ts!==null&&Ts===Rs));)Ss.push(Ds),Ds=Rd(Ds);for(Ds=0;Ds<Ps.length;Ds++)Vd(Ps[Ds],"bubbled",Ls);for(Ds=Ss.length;0<Ds--;)Vd(Ss[Ds],"captured",_s);return(Ms&64)==0?[Ls]:[Ls,_s]}};function Ze$1(ca,ga){return ca===ga&&(ca!==0||1/ca==1/ga)||ca!==ca&&ga!==ga}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(ca,ga){if($e$1(ca,ga))return!0;if(typeof ca!="object"||ca===null||typeof ga!="object"||ga===null)return!1;var _s=Object.keys(ca),Ss=Object.keys(ga);if(_s.length!==Ss.length)return!1;for(Ss=0;Ss<_s.length;Ss++)if(!af.call(ga,_s[Ss])||!$e$1(ca[_s[Ss]],ga[_s[Ss]]))return!1;return!0}var cf=ya&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(ca,ga){var _s=ga.window===ga?ga.document:ga.nodeType===9?ga:ga.ownerDocument;return hf||ef==null||ef!==td(_s)?null:(_s=ef,"selectionStart"in _s&&yd(_s)?_s={start:_s.selectionStart,end:_s.selectionEnd}:(_s=(_s.ownerDocument&&_s.ownerDocument.defaultView||window).getSelection(),_s={anchorNode:_s.anchorNode,anchorOffset:_s.anchorOffset,focusNode:_s.focusNode,focusOffset:_s.focusOffset}),gf&&bf(gf,_s)?null:(gf=_s,ca=G$1.getPooled(df.select,ff,ca,ga),ca.type="select",ca.target=ef,Xd(ca),ca))}var kf={eventTypes:df,extractEvents:function(ca,ga,_s,Ss,Ms,Cs){if(Ms=Cs||(Ss.window===Ss?Ss.document:Ss.nodeType===9?Ss:Ss.ownerDocument),!(Cs=!Ms)){e:{Ms=cc(Ms),Cs=wa.onSelect;for(var Ts=0;Ts<Cs.length;Ts++)if(!Ms.has(Cs[Ts])){Ms=!1;break e}Ms=!0}Cs=!Ms}if(Cs)return null;switch(Ms=ga?Pd(ga):window,ca){case"focus":(xe$1(Ms)||Ms.contentEditable==="true")&&(ef=Ms,ff=ga,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(_s,Ss);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(_s,Ss)}return null}},lf=G$1.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$1.extend({clipboardData:function(ca){return"clipboardData"in ca?ca.clipboardData:window.clipboardData}}),nf=Ne$1.extend({relatedTarget:null});function of(ca){var ga=ca.keyCode;return"charCode"in ca?(ca=ca.charCode,ca===0&&ga===13&&(ca=13)):ca=ga,ca===10&&(ca=13),32<=ca||ca===13?ca:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$1.extend({key:function(ca){if(ca.key){var ga=pf[ca.key]||ca.key;if(ga!=="Unidentified")return ga}return ca.type==="keypress"?(ca=of(ca),ca===13?"Enter":String.fromCharCode(ca)):ca.type==="keydown"||ca.type==="keyup"?qf[ca.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$1,charCode:function(ca){return ca.type==="keypress"?of(ca):0},keyCode:function(ca){return ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0},which:function(ca){return ca.type==="keypress"?of(ca):ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$1.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$1}),uf=G$1.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(ca){return"deltaX"in ca?ca.deltaX:"wheelDeltaX"in ca?-ca.wheelDeltaX:0},deltaY:function(ca){return"deltaY"in ca?ca.deltaY:"wheelDeltaY"in ca?-ca.wheelDeltaY:"wheelDelta"in ca?-ca.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(ca,ga,_s,Ss){var Ms=Yc.get(ca);if(!Ms)return null;switch(ca){case"keypress":if(of(_s)===0)return null;case"keydown":case"keyup":ca=rf;break;case"blur":case"focus":ca=nf;break;case"click":if(_s.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ca=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ca=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ca=tf;break;case Xb:case Yb:case Zb:ca=lf;break;case $b:ca=uf;break;case"scroll":ca=Ne$1;break;case"wheel":ca=vf;break;case"copy":case"cut":case"paste":ca=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ca=We$1;break;default:ca=G$1}return ga=ca.getPooled(Ms,ga,_s,Ss),Xd(ga),ga}};if(pa)throw Error(u$3(101));pa=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra();var xf=Nc;la=Qd;ma=xf;na=Pd;xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$1,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$1});var yf=[],zf=-1;function H$1(ca){0>zf||(ca.current=yf[zf],yf[zf]=null,zf--)}function I$1(ca,ga){zf++,yf[zf]=ca.current,ca.current=ga}var Af={},J$1={current:Af},K$1={current:!1},Bf=Af;function Cf(ca,ga){var _s=ca.type.contextTypes;if(!_s)return Af;var Ss=ca.stateNode;if(Ss&&Ss.__reactInternalMemoizedUnmaskedChildContext===ga)return Ss.__reactInternalMemoizedMaskedChildContext;var Ms={},Cs;for(Cs in _s)Ms[Cs]=ga[Cs];return Ss&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=ga,ca.__reactInternalMemoizedMaskedChildContext=Ms),Ms}function L$2(ca){return ca=ca.childContextTypes,ca!=null}function Df(){H$1(K$1),H$1(J$1)}function Ef(ca,ga,_s){if(J$1.current!==Af)throw Error(u$3(168));I$1(J$1,ga),I$1(K$1,_s)}function Ff(ca,ga,_s){var Ss=ca.stateNode;if(ca=ga.childContextTypes,typeof Ss.getChildContext!="function")return _s;Ss=Ss.getChildContext();for(var Ms in Ss)if(!(Ms in ca))throw Error(u$3(108,pb(ga)||"Unknown",Ms));return n$4({},_s,{},Ss)}function Gf(ca){return ca=(ca=ca.stateNode)&&ca.__reactInternalMemoizedMergedChildContext||Af,Bf=J$1.current,I$1(J$1,ca),I$1(K$1,K$1.current),!0}function Hf(ca,ga,_s){var Ss=ca.stateNode;if(!Ss)throw Error(u$3(169));_s?(ca=Ff(ca,ga,Bf),Ss.__reactInternalMemoizedMergedChildContext=ca,H$1(K$1),H$1(J$1),I$1(J$1,ca)):H$1(K$1),I$1(K$1,_s)}var If=r$3.unstable_runWithPriority,Jf=r$3.unstable_scheduleCallback,Kf=r$3.unstable_cancelCallback,Lf=r$3.unstable_requestPaint,Mf=r$3.unstable_now,Nf=r$3.unstable_getCurrentPriorityLevel,Of=r$3.unstable_ImmediatePriority,Pf=r$3.unstable_UserBlockingPriority,Qf=r$3.unstable_NormalPriority,Rf=r$3.unstable_LowPriority,Sf=r$3.unstable_IdlePriority,Tf={},Uf=r$3.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$3(332))}}function bg(ca){switch(ca){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$3(332))}}function cg(ca,ga){return ca=bg(ca),If(ca,ga)}function dg(ca,ga,_s){return ca=bg(ca),Jf(ca,ga,_s)}function eg(ca){return Wf===null?(Wf=[ca],Xf=Jf(Of,fg)):Wf.push(ca),Tf}function gg(){if(Xf!==null){var ca=Xf;Xf=null,Kf(ca)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var ca=0;try{var ga=Wf;cg(99,function(){for(;ca<ga.length;ca++){var _s=ga[ca];do _s=_s(!0);while(_s!==null)}}),Wf=null}catch(_s){throw Wf!==null&&(Wf=Wf.slice(ca+1)),Jf(Of,gg),_s}finally{Yf=!1}}}function hg(ca,ga,_s){return _s/=10,1073741821-(((1073741821-ca+ga/10)/_s|0)+1)*_s}function ig(ca,ga){if(ca&&ca.defaultProps){ga=n$4({},ga),ca=ca.defaultProps;for(var _s in ca)ga[_s]===void 0&&(ga[_s]=ca[_s])}return ga}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(ca){var ga=jg.current;H$1(jg),ca.type._context._currentValue=ga}function pg(ca,ga){for(;ca!==null;){var _s=ca.alternate;if(ca.childExpirationTime<ga)ca.childExpirationTime=ga,_s!==null&&_s.childExpirationTime<ga&&(_s.childExpirationTime=ga);else if(_s!==null&&_s.childExpirationTime<ga)_s.childExpirationTime=ga;else break;ca=ca.return}}function qg(ca,ga){kg=ca,mg=lg=null,ca=ca.dependencies,ca!==null&&ca.firstContext!==null&&(ca.expirationTime>=ga&&(rg=!0),ca.firstContext=null)}function sg(ca,ga){if(mg!==ca&&ga!==!1&&ga!==0)if((typeof ga!="number"||ga===1073741823)&&(mg=ca,ga=1073741823),ga={context:ca,observedBits:ga,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=ga,kg.dependencies={expirationTime:0,firstContext:ga,responders:null}}else lg=lg.next=ga;return ca._currentValue}var tg=!1;function ug(ca){ca.updateQueue={baseState:ca.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(ca,ga){ca=ca.updateQueue,ga.updateQueue===ca&&(ga.updateQueue={baseState:ca.baseState,baseQueue:ca.baseQueue,shared:ca.shared,effects:ca.effects})}function wg(ca,ga){return ca={expirationTime:ca,suspenseConfig:ga,tag:0,payload:null,callback:null,next:null},ca.next=ca}function xg(ca,ga){if(ca=ca.updateQueue,ca!==null){ca=ca.shared;var _s=ca.pending;_s===null?ga.next=ga:(ga.next=_s.next,_s.next=ga),ca.pending=ga}}function yg(ca,ga){var _s=ca.alternate;_s!==null&&vg(_s,ca),ca=ca.updateQueue,_s=ca.baseQueue,_s===null?(ca.baseQueue=ga.next=ga,ga.next=ga):(ga.next=_s.next,_s.next=ga)}function zg(ca,ga,_s,Ss){var Ms=ca.updateQueue;tg=!1;var Cs=Ms.baseQueue,Ts=Ms.shared.pending;if(Ts!==null){if(Cs!==null){var Bs=Cs.next;Cs.next=Ts.next,Ts.next=Bs}Cs=Ts,Ms.shared.pending=null,Bs=ca.alternate,Bs!==null&&(Bs=Bs.updateQueue,Bs!==null&&(Bs.baseQueue=Ts))}if(Cs!==null){Bs=Cs.next;var Ps=Ms.baseState,Ls=0,Rs=null,Ds=null,$s=null;if(Bs!==null){var Fs=Bs;do{if(Ts=Fs.expirationTime,Ts<Ss){var Gs={expirationTime:Fs.expirationTime,suspenseConfig:Fs.suspenseConfig,tag:Fs.tag,payload:Fs.payload,callback:Fs.callback,next:null};$s===null?(Ds=$s=Gs,Rs=Ps):$s=$s.next=Gs,Ts>Ls&&(Ls=Ts)}else{$s!==null&&($s=$s.next={expirationTime:1073741823,suspenseConfig:Fs.suspenseConfig,tag:Fs.tag,payload:Fs.payload,callback:Fs.callback,next:null}),Ag(Ts,Fs.suspenseConfig);e:{var Vs=ca,ks=Fs;switch(Ts=ga,Gs=_s,ks.tag){case 1:if(Vs=ks.payload,typeof Vs=="function"){Ps=Vs.call(Gs,Ps,Ts);break e}Ps=Vs;break e;case 3:Vs.effectTag=Vs.effectTag&-4097|64;case 0:if(Vs=ks.payload,Ts=typeof Vs=="function"?Vs.call(Gs,Ps,Ts):Vs,Ts==null)break e;Ps=n$4({},Ps,Ts);break e;case 2:tg=!0}}Fs.callback!==null&&(ca.effectTag|=32,Ts=Ms.effects,Ts===null?Ms.effects=[Fs]:Ts.push(Fs))}if(Fs=Fs.next,Fs===null||Fs===Bs){if(Ts=Ms.shared.pending,Ts===null)break;Fs=Cs.next=Ts.next,Ts.next=Bs,Ms.baseQueue=Cs=Ts,Ms.shared.pending=null}}while(1)}$s===null?Rs=Ps:$s.next=Ds,Ms.baseState=Rs,Ms.baseQueue=$s,Bg(Ls),ca.expirationTime=Ls,ca.memoizedState=Ps}}function Cg(ca,ga,_s){if(ca=ga.effects,ga.effects=null,ca!==null)for(ga=0;ga<ca.length;ga++){var Ss=ca[ga],Ms=Ss.callback;if(Ms!==null){if(Ss.callback=null,Ss=Ms,Ms=_s,typeof Ss!="function")throw Error(u$3(191,Ss));Ss.call(Ms)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=new aa.Component().refs;function Fg(ca,ga,_s,Ss){ga=ca.memoizedState,_s=_s(Ss,ga),_s=_s==null?ga:n$4({},ga,_s),ca.memoizedState=_s,ca.expirationTime===0&&(ca.updateQueue.baseState=_s)}var Jg={isMounted:function(ca){return(ca=ca._reactInternalFiber)?dc(ca)===ca:!1},enqueueSetState:function(ca,ga,_s){ca=ca._reactInternalFiber;var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms=wg(Ss,Ms),Ms.payload=ga,_s!=null&&(Ms.callback=_s),xg(ca,Ms),Ig(ca,Ss)},enqueueReplaceState:function(ca,ga,_s){ca=ca._reactInternalFiber;var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms=wg(Ss,Ms),Ms.tag=1,Ms.payload=ga,_s!=null&&(Ms.callback=_s),xg(ca,Ms),Ig(ca,Ss)},enqueueForceUpdate:function(ca,ga){ca=ca._reactInternalFiber;var _s=Gg(),Ss=Dg.suspense;_s=Hg(_s,ca,Ss),Ss=wg(_s,Ss),Ss.tag=2,ga!=null&&(Ss.callback=ga),xg(ca,Ss),Ig(ca,_s)}};function Kg(ca,ga,_s,Ss,Ms,Cs,Ts){return ca=ca.stateNode,typeof ca.shouldComponentUpdate=="function"?ca.shouldComponentUpdate(Ss,Cs,Ts):ga.prototype&&ga.prototype.isPureReactComponent?!bf(_s,Ss)||!bf(Ms,Cs):!0}function Lg(ca,ga,_s){var Ss=!1,Ms=Af,Cs=ga.contextType;return typeof Cs=="object"&&Cs!==null?Cs=sg(Cs):(Ms=L$2(ga)?Bf:J$1.current,Ss=ga.contextTypes,Cs=(Ss=Ss!=null)?Cf(ca,Ms):Af),ga=new ga(_s,Cs),ca.memoizedState=ga.state!==null&&ga.state!==void 0?ga.state:null,ga.updater=Jg,ca.stateNode=ga,ga._reactInternalFiber=ca,Ss&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=Ms,ca.__reactInternalMemoizedMaskedChildContext=Cs),ga}function Mg(ca,ga,_s,Ss){ca=ga.state,typeof ga.componentWillReceiveProps=="function"&&ga.componentWillReceiveProps(_s,Ss),typeof ga.UNSAFE_componentWillReceiveProps=="function"&&ga.UNSAFE_componentWillReceiveProps(_s,Ss),ga.state!==ca&&Jg.enqueueReplaceState(ga,ga.state,null)}function Ng(ca,ga,_s,Ss){var Ms=ca.stateNode;Ms.props=_s,Ms.state=ca.memoizedState,Ms.refs=Eg,ug(ca);var Cs=ga.contextType;typeof Cs=="object"&&Cs!==null?Ms.context=sg(Cs):(Cs=L$2(ga)?Bf:J$1.current,Ms.context=Cf(ca,Cs)),zg(ca,_s,Ms,Ss),Ms.state=ca.memoizedState,Cs=ga.getDerivedStateFromProps,typeof Cs=="function"&&(Fg(ca,ga,Cs,_s),Ms.state=ca.memoizedState),typeof ga.getDerivedStateFromProps=="function"||typeof Ms.getSnapshotBeforeUpdate=="function"||typeof Ms.UNSAFE_componentWillMount!="function"&&typeof Ms.componentWillMount!="function"||(ga=Ms.state,typeof Ms.componentWillMount=="function"&&Ms.componentWillMount(),typeof Ms.UNSAFE_componentWillMount=="function"&&Ms.UNSAFE_componentWillMount(),ga!==Ms.state&&Jg.enqueueReplaceState(Ms,Ms.state,null),zg(ca,_s,Ms,Ss),Ms.state=ca.memoizedState),typeof Ms.componentDidMount=="function"&&(ca.effectTag|=4)}var Og=Array.isArray;function Pg(ca,ga,_s){if(ca=_s.ref,ca!==null&&typeof ca!="function"&&typeof ca!="object"){if(_s._owner){if(_s=_s._owner,_s){if(_s.tag!==1)throw Error(u$3(309));var Ss=_s.stateNode}if(!Ss)throw Error(u$3(147,ca));var Ms=""+ca;return ga!==null&&ga.ref!==null&&typeof ga.ref=="function"&&ga.ref._stringRef===Ms?ga.ref:(ga=function(Cs){var Ts=Ss.refs;Ts===Eg&&(Ts=Ss.refs={}),Cs===null?delete Ts[Ms]:Ts[Ms]=Cs},ga._stringRef=Ms,ga)}if(typeof ca!="string")throw Error(u$3(284));if(!_s._owner)throw Error(u$3(290,ca))}return ca}function Qg(ca,ga){if(ca.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call(ga)==="[object Object]"?"object with keys {"+Object.keys(ga).join(", ")+"}":ga,""))}function Rg(ca){function ga(ks,Os){if(ca){var Ns=ks.lastEffect;Ns!==null?(Ns.nextEffect=Os,ks.lastEffect=Os):ks.firstEffect=ks.lastEffect=Os,Os.nextEffect=null,Os.effectTag=8}}function _s(ks,Os){if(!ca)return null;for(;Os!==null;)ga(ks,Os),Os=Os.sibling;return null}function Ss(ks,Os){for(ks=new Map;Os!==null;)Os.key!==null?ks.set(Os.key,Os):ks.set(Os.index,Os),Os=Os.sibling;return ks}function Ms(ks,Os){return ks=Sg(ks,Os),ks.index=0,ks.sibling=null,ks}function Cs(ks,Os,Ns){return ks.index=Ns,ca?(Ns=ks.alternate,Ns!==null?(Ns=Ns.index,Ns<Os?(ks.effectTag=2,Os):Ns):(ks.effectTag=2,Os)):Os}function Ts(ks){return ca&&ks.alternate===null&&(ks.effectTag=2),ks}function Bs(ks,Os,Ns,Us){return Os===null||Os.tag!==6?(Os=Tg(Ns,ks.mode,Us),Os.return=ks,Os):(Os=Ms(Os,Ns),Os.return=ks,Os)}function Ps(ks,Os,Ns,Us){return Os!==null&&Os.elementType===Ns.type?(Us=Ms(Os,Ns.props),Us.ref=Pg(ks,Os,Ns),Us.return=ks,Us):(Us=Ug(Ns.type,Ns.key,Ns.props,null,ks.mode,Us),Us.ref=Pg(ks,Os,Ns),Us.return=ks,Us)}function Ls(ks,Os,Ns,Us){return Os===null||Os.tag!==4||Os.stateNode.containerInfo!==Ns.containerInfo||Os.stateNode.implementation!==Ns.implementation?(Os=Vg(Ns,ks.mode,Us),Os.return=ks,Os):(Os=Ms(Os,Ns.children||[]),Os.return=ks,Os)}function Rs(ks,Os,Ns,Us,Hs){return Os===null||Os.tag!==7?(Os=Wg(Ns,ks.mode,Us,Hs),Os.return=ks,Os):(Os=Ms(Os,Ns),Os.return=ks,Os)}function Ds(ks,Os,Ns){if(typeof Os=="string"||typeof Os=="number")return Os=Tg(""+Os,ks.mode,Ns),Os.return=ks,Os;if(typeof Os=="object"&&Os!==null){switch(Os.$$typeof){case Za:return Ns=Ug(Os.type,Os.key,Os.props,null,ks.mode,Ns),Ns.ref=Pg(ks,null,Os),Ns.return=ks,Ns;case $a:return Os=Vg(Os,ks.mode,Ns),Os.return=ks,Os}if(Og(Os)||nb(Os))return Os=Wg(Os,ks.mode,Ns,null),Os.return=ks,Os;Qg(ks,Os)}return null}function $s(ks,Os,Ns,Us){var Hs=Os!==null?Os.key:null;if(typeof Ns=="string"||typeof Ns=="number")return Hs!==null?null:Bs(ks,Os,""+Ns,Us);if(typeof Ns=="object"&&Ns!==null){switch(Ns.$$typeof){case Za:return Ns.key===Hs?Ns.type===ab?Rs(ks,Os,Ns.props.children,Us,Hs):Ps(ks,Os,Ns,Us):null;case $a:return Ns.key===Hs?Ls(ks,Os,Ns,Us):null}if(Og(Ns)||nb(Ns))return Hs!==null?null:Rs(ks,Os,Ns,Us,null);Qg(ks,Ns)}return null}function Fs(ks,Os,Ns,Us,Hs){if(typeof Us=="string"||typeof Us=="number")return ks=ks.get(Ns)||null,Bs(Os,ks,""+Us,Hs);if(typeof Us=="object"&&Us!==null){switch(Us.$$typeof){case Za:return ks=ks.get(Us.key===null?Ns:Us.key)||null,Us.type===ab?Rs(Os,ks,Us.props.children,Hs,Us.key):Ps(Os,ks,Us,Hs);case $a:return ks=ks.get(Us.key===null?Ns:Us.key)||null,Ls(Os,ks,Us,Hs)}if(Og(Us)||nb(Us))return ks=ks.get(Ns)||null,Rs(Os,ks,Us,Hs,null);Qg(Os,Us)}return null}function Gs(ks,Os,Ns,Us){for(var Hs=null,zs=null,js=Os,Ws=Os=0,Qs=null;js!==null&&Ws<Ns.length;Ws++){js.index>Ws?(Qs=js,js=null):Qs=js.sibling;var qs=$s(ks,js,Ns[Ws],Us);if(qs===null){js===null&&(js=Qs);break}ca&&js&&qs.alternate===null&&ga(ks,js),Os=Cs(qs,Os,Ws),zs===null?Hs=qs:zs.sibling=qs,zs=qs,js=Qs}if(Ws===Ns.length)return _s(ks,js),Hs;if(js===null){for(;Ws<Ns.length;Ws++)js=Ds(ks,Ns[Ws],Us),js!==null&&(Os=Cs(js,Os,Ws),zs===null?Hs=js:zs.sibling=js,zs=js);return Hs}for(js=Ss(ks,js);Ws<Ns.length;Ws++)Qs=Fs(js,ks,Ws,Ns[Ws],Us),Qs!==null&&(ca&&Qs.alternate!==null&&js.delete(Qs.key===null?Ws:Qs.key),Os=Cs(Qs,Os,Ws),zs===null?Hs=Qs:zs.sibling=Qs,zs=Qs);return ca&&js.forEach(function(tu){return ga(ks,tu)}),Hs}function Vs(ks,Os,Ns,Us){var Hs=nb(Ns);if(typeof Hs!="function")throw Error(u$3(150));if(Ns=Hs.call(Ns),Ns==null)throw Error(u$3(151));for(var zs=Hs=null,js=Os,Ws=Os=0,Qs=null,qs=Ns.next();js!==null&&!qs.done;Ws++,qs=Ns.next()){js.index>Ws?(Qs=js,js=null):Qs=js.sibling;var tu=$s(ks,js,qs.value,Us);if(tu===null){js===null&&(js=Qs);break}ca&&js&&tu.alternate===null&&ga(ks,js),Os=Cs(tu,Os,Ws),zs===null?Hs=tu:zs.sibling=tu,zs=tu,js=Qs}if(qs.done)return _s(ks,js),Hs;if(js===null){for(;!qs.done;Ws++,qs=Ns.next())qs=Ds(ks,qs.value,Us),qs!==null&&(Os=Cs(qs,Os,Ws),zs===null?Hs=qs:zs.sibling=qs,zs=qs);return Hs}for(js=Ss(ks,js);!qs.done;Ws++,qs=Ns.next())qs=Fs(js,ks,Ws,qs.value,Us),qs!==null&&(ca&&qs.alternate!==null&&js.delete(qs.key===null?Ws:qs.key),Os=Cs(qs,Os,Ws),zs===null?Hs=qs:zs.sibling=qs,zs=qs);return ca&&js.forEach(function(Ys){return ga(ks,Ys)}),Hs}return function(ks,Os,Ns,Us){var Hs=typeof Ns=="object"&&Ns!==null&&Ns.type===ab&&Ns.key===null;Hs&&(Ns=Ns.props.children);var zs=typeof Ns=="object"&&Ns!==null;if(zs)switch(Ns.$$typeof){case Za:e:{for(zs=Ns.key,Hs=Os;Hs!==null;){if(Hs.key===zs){switch(Hs.tag){case 7:if(Ns.type===ab){_s(ks,Hs.sibling),Os=Ms(Hs,Ns.props.children),Os.return=ks,ks=Os;break e}break;default:if(Hs.elementType===Ns.type){_s(ks,Hs.sibling),Os=Ms(Hs,Ns.props),Os.ref=Pg(ks,Hs,Ns),Os.return=ks,ks=Os;break e}}_s(ks,Hs);break}else ga(ks,Hs);Hs=Hs.sibling}Ns.type===ab?(Os=Wg(Ns.props.children,ks.mode,Us,Ns.key),Os.return=ks,ks=Os):(Us=Ug(Ns.type,Ns.key,Ns.props,null,ks.mode,Us),Us.ref=Pg(ks,Os,Ns),Us.return=ks,ks=Us)}return Ts(ks);case $a:e:{for(Hs=Ns.key;Os!==null;){if(Os.key===Hs)if(Os.tag===4&&Os.stateNode.containerInfo===Ns.containerInfo&&Os.stateNode.implementation===Ns.implementation){_s(ks,Os.sibling),Os=Ms(Os,Ns.children||[]),Os.return=ks,ks=Os;break e}else{_s(ks,Os);break}else ga(ks,Os);Os=Os.sibling}Os=Vg(Ns,ks.mode,Us),Os.return=ks,ks=Os}return Ts(ks)}if(typeof Ns=="string"||typeof Ns=="number")return Ns=""+Ns,Os!==null&&Os.tag===6?(_s(ks,Os.sibling),Os=Ms(Os,Ns),Os.return=ks,ks=Os):(_s(ks,Os),Os=Tg(Ns,ks.mode,Us),Os.return=ks,ks=Os),Ts(ks);if(Og(Ns))return Gs(ks,Os,Ns,Us);if(nb(Ns))return Vs(ks,Os,Ns,Us);if(zs&&Qg(ks,Ns),typeof Ns=="undefined"&&!Hs)switch(ks.tag){case 1:case 0:throw ks=ks.type,Error(u$3(152,ks.displayName||ks.name||"Component"))}return _s(ks,Os)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(ca){if(ca===Zg)throw Error(u$3(174));return ca}function dh(ca,ga){switch(I$1(bh,ga),I$1(ah,ca),I$1($g,Zg),ca=ga.nodeType,ca){case 9:case 11:ga=(ga=ga.documentElement)?ga.namespaceURI:Ob(null,"");break;default:ca=ca===8?ga.parentNode:ga,ga=ca.namespaceURI||null,ca=ca.tagName,ga=Ob(ga,ca)}H$1($g),I$1($g,ga)}function eh(){H$1($g),H$1(ah),H$1(bh)}function fh(ca){ch(bh.current);var ga=ch($g.current),_s=Ob(ga,ca.type);ga!==_s&&(I$1(ah,ca),I$1($g,_s))}function gh(ca){ah.current===ca&&(H$1($g),H$1(ah))}var M$2={current:0};function hh(ca){for(var ga=ca;ga!==null;){if(ga.tag===13){var _s=ga.memoizedState;if(_s!==null&&(_s=_s.dehydrated,_s===null||_s.data===Bd||_s.data===Cd))return ga}else if(ga.tag===19&&ga.memoizedProps.revealOrder!==void 0){if((ga.effectTag&64)!=0)return ga}else if(ga.child!==null){ga.child.return=ga,ga=ga.child;continue}if(ga===ca)break;for(;ga.sibling===null;){if(ga.return===null||ga.return===ca)return null;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}return null}function ih(ca,ga){return{responder:ca,props:ga}}var jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N$2=null,O$2=null,P$2=null,mh=!1;function Q$1(){throw Error(u$3(321))}function nh(ca,ga){if(ga===null)return!1;for(var _s=0;_s<ga.length&&_s<ca.length;_s++)if(!$e$1(ca[_s],ga[_s]))return!1;return!0}function oh(ca,ga,_s,Ss,Ms,Cs){if(lh=Cs,N$2=ga,ga.memoizedState=null,ga.updateQueue=null,ga.expirationTime=0,jh.current=ca===null||ca.memoizedState===null?ph:qh,ca=_s(Ss,Ms),ga.expirationTime===lh){Cs=0;do{if(ga.expirationTime=0,!(25>Cs))throw Error(u$3(301));Cs+=1,P$2=O$2=null,ga.updateQueue=null,jh.current=rh,ca=_s(Ss,Ms)}while(ga.expirationTime===lh)}if(jh.current=sh,ga=O$2!==null&&O$2.next!==null,lh=0,P$2=O$2=N$2=null,mh=!1,ga)throw Error(u$3(300));return ca}function th(){var ca={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$2.memoizedState=P$2=ca:P$2=P$2.next=ca,P$2}function uh(){if(O$2===null){var ca=N$2.alternate;ca=ca!==null?ca.memoizedState:null}else ca=O$2.next;var ga=P$2===null?N$2.memoizedState:P$2.next;if(ga!==null)P$2=ga,O$2=ca;else{if(ca===null)throw Error(u$3(310));O$2=ca,ca={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$2.memoizedState=P$2=ca:P$2=P$2.next=ca}return P$2}function vh(ca,ga){return typeof ga=="function"?ga(ca):ga}function wh(ca){var ga=uh(),_s=ga.queue;if(_s===null)throw Error(u$3(311));_s.lastRenderedReducer=ca;var Ss=O$2,Ms=Ss.baseQueue,Cs=_s.pending;if(Cs!==null){if(Ms!==null){var Ts=Ms.next;Ms.next=Cs.next,Cs.next=Ts}Ss.baseQueue=Ms=Cs,_s.pending=null}if(Ms!==null){Ms=Ms.next,Ss=Ss.baseState;var Bs=Ts=Cs=null,Ps=Ms;do{var Ls=Ps.expirationTime;if(Ls<lh){var Rs={expirationTime:Ps.expirationTime,suspenseConfig:Ps.suspenseConfig,action:Ps.action,eagerReducer:Ps.eagerReducer,eagerState:Ps.eagerState,next:null};Bs===null?(Ts=Bs=Rs,Cs=Ss):Bs=Bs.next=Rs,Ls>N$2.expirationTime&&(N$2.expirationTime=Ls,Bg(Ls))}else Bs!==null&&(Bs=Bs.next={expirationTime:1073741823,suspenseConfig:Ps.suspenseConfig,action:Ps.action,eagerReducer:Ps.eagerReducer,eagerState:Ps.eagerState,next:null}),Ag(Ls,Ps.suspenseConfig),Ss=Ps.eagerReducer===ca?Ps.eagerState:ca(Ss,Ps.action);Ps=Ps.next}while(Ps!==null&&Ps!==Ms);Bs===null?Cs=Ss:Bs.next=Ts,$e$1(Ss,ga.memoizedState)||(rg=!0),ga.memoizedState=Ss,ga.baseState=Cs,ga.baseQueue=Bs,_s.lastRenderedState=Ss}return[ga.memoizedState,_s.dispatch]}function xh(ca){var ga=uh(),_s=ga.queue;if(_s===null)throw Error(u$3(311));_s.lastRenderedReducer=ca;var Ss=_s.dispatch,Ms=_s.pending,Cs=ga.memoizedState;if(Ms!==null){_s.pending=null;var Ts=Ms=Ms.next;do Cs=ca(Cs,Ts.action),Ts=Ts.next;while(Ts!==Ms);$e$1(Cs,ga.memoizedState)||(rg=!0),ga.memoizedState=Cs,ga.baseQueue===null&&(ga.baseState=Cs),_s.lastRenderedState=Cs}return[Cs,Ss]}function yh(ca){var ga=th();return typeof ca=="function"&&(ca=ca()),ga.memoizedState=ga.baseState=ca,ca=ga.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:ca},ca=ca.dispatch=zh.bind(null,N$2,ca),[ga.memoizedState,ca]}function Ah(ca,ga,_s,Ss){return ca={tag:ca,create:ga,destroy:_s,deps:Ss,next:null},ga=N$2.updateQueue,ga===null?(ga={lastEffect:null},N$2.updateQueue=ga,ga.lastEffect=ca.next=ca):(_s=ga.lastEffect,_s===null?ga.lastEffect=ca.next=ca:(Ss=_s.next,_s.next=ca,ca.next=Ss,ga.lastEffect=ca)),ca}function Bh(){return uh().memoizedState}function Ch(ca,ga,_s,Ss){var Ms=th();N$2.effectTag|=ca,Ms.memoizedState=Ah(1|ga,_s,void 0,Ss===void 0?null:Ss)}function Dh(ca,ga,_s,Ss){var Ms=uh();Ss=Ss===void 0?null:Ss;var Cs=void 0;if(O$2!==null){var Ts=O$2.memoizedState;if(Cs=Ts.destroy,Ss!==null&&nh(Ss,Ts.deps)){Ah(ga,_s,Cs,Ss);return}}N$2.effectTag|=ca,Ms.memoizedState=Ah(1|ga,_s,Cs,Ss)}function Eh(ca,ga){return Ch(516,4,ca,ga)}function Fh(ca,ga){return Dh(516,4,ca,ga)}function Gh(ca,ga){return Dh(4,2,ca,ga)}function Hh(ca,ga){if(typeof ga=="function")return ca=ca(),ga(ca),function(){ga(null)};if(ga!=null)return ca=ca(),ga.current=ca,function(){ga.current=null}}function Ih(ca,ga,_s){return _s=_s!=null?_s.concat([ca]):null,Dh(4,2,Hh.bind(null,ga,ca),_s)}function Jh(){}function Kh(ca,ga){return th().memoizedState=[ca,ga===void 0?null:ga],ca}function Lh(ca,ga){var _s=uh();ga=ga===void 0?null:ga;var Ss=_s.memoizedState;return Ss!==null&&ga!==null&&nh(ga,Ss[1])?Ss[0]:(_s.memoizedState=[ca,ga],ca)}function Mh(ca,ga){var _s=uh();ga=ga===void 0?null:ga;var Ss=_s.memoizedState;return Ss!==null&&ga!==null&&nh(ga,Ss[1])?Ss[0]:(ca=ca(),_s.memoizedState=[ca,ga],ca)}function Nh(ca,ga,_s){var Ss=ag();cg(98>Ss?98:Ss,function(){ca(!0)}),cg(97<Ss?97:Ss,function(){var Ms=kh.suspense;kh.suspense=ga===void 0?null:ga;try{ca(!1),_s()}finally{kh.suspense=Ms}})}function zh(ca,ga,_s){var Ss=Gg(),Ms=Dg.suspense;Ss=Hg(Ss,ca,Ms),Ms={expirationTime:Ss,suspenseConfig:Ms,action:_s,eagerReducer:null,eagerState:null,next:null};var Cs=ga.pending;if(Cs===null?Ms.next=Ms:(Ms.next=Cs.next,Cs.next=Ms),ga.pending=Ms,Cs=ca.alternate,ca===N$2||Cs!==null&&Cs===N$2)mh=!0,Ms.expirationTime=lh,N$2.expirationTime=lh;else{if(ca.expirationTime===0&&(Cs===null||Cs.expirationTime===0)&&(Cs=ga.lastRenderedReducer,Cs!==null))try{var Ts=ga.lastRenderedState,Bs=Cs(Ts,_s);if(Ms.eagerReducer=Cs,Ms.eagerState=Bs,$e$1(Bs,Ts))return}catch{}finally{}Ig(ca,Ss)}}var sh={readContext:sg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useResponder:Q$1,useDeferredValue:Q$1,useTransition:Q$1},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(ca,ga,_s){return _s=_s!=null?_s.concat([ca]):null,Ch(4,2,Hh.bind(null,ga,ca),_s)},useLayoutEffect:function(ca,ga){return Ch(4,2,ca,ga)},useMemo:function(ca,ga){var _s=th();return ga=ga===void 0?null:ga,ca=ca(),_s.memoizedState=[ca,ga],ca},useReducer:function(ca,ga,_s){var Ss=th();return ga=_s!==void 0?_s(ga):ga,Ss.memoizedState=Ss.baseState=ga,ca=Ss.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:ga},ca=ca.dispatch=zh.bind(null,N$2,ca),[Ss.memoizedState,ca]},useRef:function(ca){var ga=th();return ca={current:ca},ga.memoizedState=ca},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=yh(ca),Ss=_s[0],Ms=_s[1];return Eh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=yh(!1),_s=ga[0];return ga=ga[1],[Kh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=wh(vh),Ss=_s[0],Ms=_s[1];return Fh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=wh(vh),_s=ga[0];return ga=ga[1],[Lh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(ca,ga){var _s=xh(vh),Ss=_s[0],Ms=_s[1];return Fh(function(){var Cs=kh.suspense;kh.suspense=ga===void 0?null:ga;try{Ms(ca)}finally{kh.suspense=Cs}},[ca,ga]),Ss},useTransition:function(ca){var ga=xh(vh),_s=ga[0];return ga=ga[1],[Lh(Nh.bind(null,ga,ca),[ga,ca]),_s]}},Oh=null,Ph=null,Qh=!1;function Rh(ca,ga){var _s=Sh(5,null,null,0);_s.elementType="DELETED",_s.type="DELETED",_s.stateNode=ga,_s.return=ca,_s.effectTag=8,ca.lastEffect!==null?(ca.lastEffect.nextEffect=_s,ca.lastEffect=_s):ca.firstEffect=ca.lastEffect=_s}function Th(ca,ga){switch(ca.tag){case 5:var _s=ca.type;return ga=ga.nodeType!==1||_s.toLowerCase()!==ga.nodeName.toLowerCase()?null:ga,ga!==null?(ca.stateNode=ga,!0):!1;case 6:return ga=ca.pendingProps===""||ga.nodeType!==3?null:ga,ga!==null?(ca.stateNode=ga,!0):!1;case 13:return!1;default:return!1}}function Uh(ca){if(Qh){var ga=Ph;if(ga){var _s=ga;if(!Th(ca,ga)){if(ga=Jd(_s.nextSibling),!ga||!Th(ca,ga)){ca.effectTag=ca.effectTag&-1025|2,Qh=!1,Oh=ca;return}Rh(Oh,_s)}Oh=ca,Ph=Jd(ga.firstChild)}else ca.effectTag=ca.effectTag&-1025|2,Qh=!1,Oh=ca}}function Vh(ca){for(ca=ca.return;ca!==null&&ca.tag!==5&&ca.tag!==3&&ca.tag!==13;)ca=ca.return;Oh=ca}function Wh(ca){if(ca!==Oh)return!1;if(!Qh)return Vh(ca),Qh=!0,!1;var ga=ca.type;if(ca.tag!==5||ga!=="head"&&ga!=="body"&&!Gd(ga,ca.memoizedProps))for(ga=Ph;ga;)Rh(ca,ga),ga=Jd(ga.nextSibling);if(Vh(ca),ca.tag===13){if(ca=ca.memoizedState,ca=ca!==null?ca.dehydrated:null,!ca)throw Error(u$3(317));e:{for(ca=ca.nextSibling,ga=0;ca;){if(ca.nodeType===8){var _s=ca.data;if(_s===Ad){if(ga===0){Ph=Jd(ca.nextSibling);break e}ga--}else _s!==zd&&_s!==Cd&&_s!==Bd||ga++}ca=ca.nextSibling}Ph=null}}else Ph=Oh?Jd(ca.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R$2(ca,ga,_s,Ss){ga.child=ca===null?Yg(ga,null,_s,Ss):Xg(ga,ca.child,_s,Ss)}function Zh(ca,ga,_s,Ss,Ms){_s=_s.render;var Cs=ga.ref;return qg(ga,Ms),Ss=oh(ca,ga,_s,Ss,Cs,Ms),ca!==null&&!rg?(ga.updateQueue=ca.updateQueue,ga.effectTag&=-517,ca.expirationTime<=Ms&&(ca.expirationTime=0),$h(ca,ga,Ms)):(ga.effectTag|=1,R$2(ca,ga,Ss,Ms),ga.child)}function ai$1(ca,ga,_s,Ss,Ms,Cs){if(ca===null){var Ts=_s.type;return typeof Ts=="function"&&!bi$1(Ts)&&Ts.defaultProps===void 0&&_s.compare===null&&_s.defaultProps===void 0?(ga.tag=15,ga.type=Ts,ci$1(ca,ga,Ts,Ss,Ms,Cs)):(ca=Ug(_s.type,null,Ss,null,ga.mode,Cs),ca.ref=ga.ref,ca.return=ga,ga.child=ca)}return Ts=ca.child,Ms<Cs&&(Ms=Ts.memoizedProps,_s=_s.compare,_s=_s!==null?_s:bf,_s(Ms,Ss)&&ca.ref===ga.ref)?$h(ca,ga,Cs):(ga.effectTag|=1,ca=Sg(Ts,Ss),ca.ref=ga.ref,ca.return=ga,ga.child=ca)}function ci$1(ca,ga,_s,Ss,Ms,Cs){return ca!==null&&bf(ca.memoizedProps,Ss)&&ca.ref===ga.ref&&(rg=!1,Ms<Cs)?(ga.expirationTime=ca.expirationTime,$h(ca,ga,Cs)):di$1(ca,ga,_s,Ss,Cs)}function ei$1(ca,ga){var _s=ga.ref;(ca===null&&_s!==null||ca!==null&&ca.ref!==_s)&&(ga.effectTag|=128)}function di$1(ca,ga,_s,Ss,Ms){var Cs=L$2(_s)?Bf:J$1.current;return Cs=Cf(ga,Cs),qg(ga,Ms),_s=oh(ca,ga,_s,Ss,Cs,Ms),ca!==null&&!rg?(ga.updateQueue=ca.updateQueue,ga.effectTag&=-517,ca.expirationTime<=Ms&&(ca.expirationTime=0),$h(ca,ga,Ms)):(ga.effectTag|=1,R$2(ca,ga,_s,Ms),ga.child)}function fi$1(ca,ga,_s,Ss,Ms){if(L$2(_s)){var Cs=!0;Gf(ga)}else Cs=!1;if(qg(ga,Ms),ga.stateNode===null)ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),Lg(ga,_s,Ss),Ng(ga,_s,Ss,Ms),Ss=!0;else if(ca===null){var Ts=ga.stateNode,Bs=ga.memoizedProps;Ts.props=Bs;var Ps=Ts.context,Ls=_s.contextType;typeof Ls=="object"&&Ls!==null?Ls=sg(Ls):(Ls=L$2(_s)?Bf:J$1.current,Ls=Cf(ga,Ls));var Rs=_s.getDerivedStateFromProps,Ds=typeof Rs=="function"||typeof Ts.getSnapshotBeforeUpdate=="function";Ds||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Bs!==Ss||Ps!==Ls)&&Mg(ga,Ts,Ss,Ls),tg=!1;var $s=ga.memoizedState;Ts.state=$s,zg(ga,Ss,Ts,Ms),Ps=ga.memoizedState,Bs!==Ss||$s!==Ps||K$1.current||tg?(typeof Rs=="function"&&(Fg(ga,_s,Rs,Ss),Ps=ga.memoizedState),(Bs=tg||Kg(ga,_s,Bs,Ss,$s,Ps,Ls))?(Ds||typeof Ts.UNSAFE_componentWillMount!="function"&&typeof Ts.componentWillMount!="function"||(typeof Ts.componentWillMount=="function"&&Ts.componentWillMount(),typeof Ts.UNSAFE_componentWillMount=="function"&&Ts.UNSAFE_componentWillMount()),typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4)):(typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4),ga.memoizedProps=Ss,ga.memoizedState=Ps),Ts.props=Ss,Ts.state=Ps,Ts.context=Ls,Ss=Bs):(typeof Ts.componentDidMount=="function"&&(ga.effectTag|=4),Ss=!1)}else Ts=ga.stateNode,vg(ca,ga),Bs=ga.memoizedProps,Ts.props=ga.type===ga.elementType?Bs:ig(ga.type,Bs),Ps=Ts.context,Ls=_s.contextType,typeof Ls=="object"&&Ls!==null?Ls=sg(Ls):(Ls=L$2(_s)?Bf:J$1.current,Ls=Cf(ga,Ls)),Rs=_s.getDerivedStateFromProps,(Ds=typeof Rs=="function"||typeof Ts.getSnapshotBeforeUpdate=="function")||typeof Ts.UNSAFE_componentWillReceiveProps!="function"&&typeof Ts.componentWillReceiveProps!="function"||(Bs!==Ss||Ps!==Ls)&&Mg(ga,Ts,Ss,Ls),tg=!1,Ps=ga.memoizedState,Ts.state=Ps,zg(ga,Ss,Ts,Ms),$s=ga.memoizedState,Bs!==Ss||Ps!==$s||K$1.current||tg?(typeof Rs=="function"&&(Fg(ga,_s,Rs,Ss),$s=ga.memoizedState),(Rs=tg||Kg(ga,_s,Bs,Ss,Ps,$s,Ls))?(Ds||typeof Ts.UNSAFE_componentWillUpdate!="function"&&typeof Ts.componentWillUpdate!="function"||(typeof Ts.componentWillUpdate=="function"&&Ts.componentWillUpdate(Ss,$s,Ls),typeof Ts.UNSAFE_componentWillUpdate=="function"&&Ts.UNSAFE_componentWillUpdate(Ss,$s,Ls)),typeof Ts.componentDidUpdate=="function"&&(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate=="function"&&(ga.effectTag|=256)):(typeof Ts.componentDidUpdate!="function"||Bs===ca.memoizedProps&&Ps===ca.memoizedState||(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Bs===ca.memoizedProps&&Ps===ca.memoizedState||(ga.effectTag|=256),ga.memoizedProps=Ss,ga.memoizedState=$s),Ts.props=Ss,Ts.state=$s,Ts.context=Ls,Ss=Rs):(typeof Ts.componentDidUpdate!="function"||Bs===ca.memoizedProps&&Ps===ca.memoizedState||(ga.effectTag|=4),typeof Ts.getSnapshotBeforeUpdate!="function"||Bs===ca.memoizedProps&&Ps===ca.memoizedState||(ga.effectTag|=256),Ss=!1);return gi$1(ca,ga,_s,Ss,Cs,Ms)}function gi$1(ca,ga,_s,Ss,Ms,Cs){ei$1(ca,ga);var Ts=(ga.effectTag&64)!=0;if(!Ss&&!Ts)return Ms&&Hf(ga,_s,!1),$h(ca,ga,Cs);Ss=ga.stateNode,Yh.current=ga;var Bs=Ts&&typeof _s.getDerivedStateFromError!="function"?null:Ss.render();return ga.effectTag|=1,ca!==null&&Ts?(ga.child=Xg(ga,ca.child,null,Cs),ga.child=Xg(ga,null,Bs,Cs)):R$2(ca,ga,Bs,Cs),ga.memoizedState=Ss.state,Ms&&Hf(ga,_s,!0),ga.child}function hi$1(ca){var ga=ca.stateNode;ga.pendingContext?Ef(ca,ga.pendingContext,ga.pendingContext!==ga.context):ga.context&&Ef(ca,ga.context,!1),dh(ca,ga.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$1(ca,ga,_s){var Ss=ga.mode,Ms=ga.pendingProps,Cs=M$2.current,Ts=!1,Bs;if((Bs=(ga.effectTag&64)!=0)||(Bs=(Cs&2)!=0&&(ca===null||ca.memoizedState!==null)),Bs?(Ts=!0,ga.effectTag&=-65):ca!==null&&ca.memoizedState===null||Ms.fallback===void 0||Ms.unstable_avoidThisFallback===!0||(Cs|=1),I$1(M$2,Cs&1),ca===null){if(Ms.fallback!==void 0&&Uh(ga),Ts){if(Ts=Ms.fallback,Ms=Wg(null,Ss,0,null),Ms.return=ga,(ga.mode&2)==0)for(ca=ga.memoizedState!==null?ga.child.child:ga.child,Ms.child=ca;ca!==null;)ca.return=Ms,ca=ca.sibling;return _s=Wg(Ts,Ss,_s,null),_s.return=ga,Ms.sibling=_s,ga.memoizedState=ii$1,ga.child=Ms,_s}return Ss=Ms.children,ga.memoizedState=null,ga.child=Yg(ga,null,Ss,_s)}if(ca.memoizedState!==null){if(ca=ca.child,Ss=ca.sibling,Ts){if(Ms=Ms.fallback,_s=Sg(ca,ca.pendingProps),_s.return=ga,(ga.mode&2)==0&&(Ts=ga.memoizedState!==null?ga.child.child:ga.child,Ts!==ca.child))for(_s.child=Ts;Ts!==null;)Ts.return=_s,Ts=Ts.sibling;return Ss=Sg(Ss,Ms),Ss.return=ga,_s.sibling=Ss,_s.childExpirationTime=0,ga.memoizedState=ii$1,ga.child=_s,Ss}return _s=Xg(ga,ca.child,Ms.children,_s),ga.memoizedState=null,ga.child=_s}if(ca=ca.child,Ts){if(Ts=Ms.fallback,Ms=Wg(null,Ss,0,null),Ms.return=ga,Ms.child=ca,ca!==null&&(ca.return=Ms),(ga.mode&2)==0)for(ca=ga.memoizedState!==null?ga.child.child:ga.child,Ms.child=ca;ca!==null;)ca.return=Ms,ca=ca.sibling;return _s=Wg(Ts,Ss,_s,null),_s.return=ga,Ms.sibling=_s,_s.effectTag|=2,Ms.childExpirationTime=0,ga.memoizedState=ii$1,ga.child=Ms,_s}return ga.memoizedState=null,ga.child=Xg(ga,ca,Ms.children,_s)}function ki$1(ca,ga){ca.expirationTime<ga&&(ca.expirationTime=ga);var _s=ca.alternate;_s!==null&&_s.expirationTime<ga&&(_s.expirationTime=ga),pg(ca.return,ga)}function li$1(ca,ga,_s,Ss,Ms,Cs){var Ts=ca.memoizedState;Ts===null?ca.memoizedState={isBackwards:ga,rendering:null,renderingStartTime:0,last:Ss,tail:_s,tailExpiration:0,tailMode:Ms,lastEffect:Cs}:(Ts.isBackwards=ga,Ts.rendering=null,Ts.renderingStartTime=0,Ts.last=Ss,Ts.tail=_s,Ts.tailExpiration=0,Ts.tailMode=Ms,Ts.lastEffect=Cs)}function mi$1(ca,ga,_s){var Ss=ga.pendingProps,Ms=Ss.revealOrder,Cs=Ss.tail;if(R$2(ca,ga,Ss.children,_s),Ss=M$2.current,(Ss&2)!=0)Ss=Ss&1|2,ga.effectTag|=64;else{if(ca!==null&&(ca.effectTag&64)!=0)e:for(ca=ga.child;ca!==null;){if(ca.tag===13)ca.memoizedState!==null&&ki$1(ca,_s);else if(ca.tag===19)ki$1(ca,_s);else if(ca.child!==null){ca.child.return=ca,ca=ca.child;continue}if(ca===ga)break e;for(;ca.sibling===null;){if(ca.return===null||ca.return===ga)break e;ca=ca.return}ca.sibling.return=ca.return,ca=ca.sibling}Ss&=1}if(I$1(M$2,Ss),(ga.mode&2)==0)ga.memoizedState=null;else switch(Ms){case"forwards":for(_s=ga.child,Ms=null;_s!==null;)ca=_s.alternate,ca!==null&&hh(ca)===null&&(Ms=_s),_s=_s.sibling;_s=Ms,_s===null?(Ms=ga.child,ga.child=null):(Ms=_s.sibling,_s.sibling=null),li$1(ga,!1,Ms,_s,Cs,ga.lastEffect);break;case"backwards":for(_s=null,Ms=ga.child,ga.child=null;Ms!==null;){if(ca=Ms.alternate,ca!==null&&hh(ca)===null){ga.child=Ms;break}ca=Ms.sibling,Ms.sibling=_s,_s=Ms,Ms=ca}li$1(ga,!0,_s,null,Cs,ga.lastEffect);break;case"together":li$1(ga,!1,null,null,void 0,ga.lastEffect);break;default:ga.memoizedState=null}return ga.child}function $h(ca,ga,_s){ca!==null&&(ga.dependencies=ca.dependencies);var Ss=ga.expirationTime;if(Ss!==0&&Bg(Ss),ga.childExpirationTime<_s)return null;if(ca!==null&&ga.child!==ca.child)throw Error(u$3(153));if(ga.child!==null){for(ca=ga.child,_s=Sg(ca,ca.pendingProps),ga.child=_s,_s.return=ga;ca.sibling!==null;)ca=ca.sibling,_s=_s.sibling=Sg(ca,ca.pendingProps),_s.return=ga;_s.sibling=null}return ga.child}var ni$1,oi$1,pi$1,qi$1;ni$1=function(ca,ga){for(var _s=ga.child;_s!==null;){if(_s.tag===5||_s.tag===6)ca.appendChild(_s.stateNode);else if(_s.tag!==4&&_s.child!==null){_s.child.return=_s,_s=_s.child;continue}if(_s===ga)break;for(;_s.sibling===null;){if(_s.return===null||_s.return===ga)return;_s=_s.return}_s.sibling.return=_s.return,_s=_s.sibling}};oi$1=function(){};pi$1=function(ca,ga,_s,Ss,Ms){var Cs=ca.memoizedProps;if(Cs!==Ss){var Ts=ga.stateNode;switch(ch($g.current),ca=null,_s){case"input":Cs=zb(Ts,Cs),Ss=zb(Ts,Ss),ca=[];break;case"option":Cs=Gb(Ts,Cs),Ss=Gb(Ts,Ss),ca=[];break;case"select":Cs=n$4({},Cs,{value:void 0}),Ss=n$4({},Ss,{value:void 0}),ca=[];break;case"textarea":Cs=Ib(Ts,Cs),Ss=Ib(Ts,Ss),ca=[];break;default:typeof Cs.onClick!="function"&&typeof Ss.onClick=="function"&&(Ts.onclick=sd)}od(_s,Ss);var Bs,Ps;_s=null;for(Bs in Cs)if(!Ss.hasOwnProperty(Bs)&&Cs.hasOwnProperty(Bs)&&Cs[Bs]!=null)if(Bs==="style")for(Ps in Ts=Cs[Bs],Ts)Ts.hasOwnProperty(Ps)&&(_s||(_s={}),_s[Ps]="");else Bs!=="dangerouslySetInnerHTML"&&Bs!=="children"&&Bs!=="suppressContentEditableWarning"&&Bs!=="suppressHydrationWarning"&&Bs!=="autoFocus"&&(va.hasOwnProperty(Bs)?ca||(ca=[]):(ca=ca||[]).push(Bs,null));for(Bs in Ss){var Ls=Ss[Bs];if(Ts=Cs!=null?Cs[Bs]:void 0,Ss.hasOwnProperty(Bs)&&Ls!==Ts&&(Ls!=null||Ts!=null))if(Bs==="style")if(Ts){for(Ps in Ts)!Ts.hasOwnProperty(Ps)||Ls&&Ls.hasOwnProperty(Ps)||(_s||(_s={}),_s[Ps]="");for(Ps in Ls)Ls.hasOwnProperty(Ps)&&Ts[Ps]!==Ls[Ps]&&(_s||(_s={}),_s[Ps]=Ls[Ps])}else _s||(ca||(ca=[]),ca.push(Bs,_s)),_s=Ls;else Bs==="dangerouslySetInnerHTML"?(Ls=Ls?Ls.__html:void 0,Ts=Ts?Ts.__html:void 0,Ls!=null&&Ts!==Ls&&(ca=ca||[]).push(Bs,Ls)):Bs==="children"?Ts===Ls||typeof Ls!="string"&&typeof Ls!="number"||(ca=ca||[]).push(Bs,""+Ls):Bs!=="suppressContentEditableWarning"&&Bs!=="suppressHydrationWarning"&&(va.hasOwnProperty(Bs)?(Ls!=null&&rd(Ms,Bs),ca||Ts===Ls||(ca=[])):(ca=ca||[]).push(Bs,Ls))}_s&&(ca=ca||[]).push("style",_s),Ms=ca,(ga.updateQueue=Ms)&&(ga.effectTag|=4)}};qi$1=function(ca,ga,_s,Ss){_s!==Ss&&(ga.effectTag|=4)};function ri$1(ca,ga){switch(ca.tailMode){case"hidden":ga=ca.tail;for(var _s=null;ga!==null;)ga.alternate!==null&&(_s=ga),ga=ga.sibling;_s===null?ca.tail=null:_s.sibling=null;break;case"collapsed":_s=ca.tail;for(var Ss=null;_s!==null;)_s.alternate!==null&&(Ss=_s),_s=_s.sibling;Ss===null?ga||ca.tail===null?ca.tail=null:ca.tail.sibling=null:Ss.sibling=null}}function si$1(ca,ga,_s){var Ss=ga.pendingProps;switch(ga.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$2(ga.type)&&Df(),null;case 3:return eh(),H$1(K$1),H$1(J$1),_s=ga.stateNode,_s.pendingContext&&(_s.context=_s.pendingContext,_s.pendingContext=null),ca!==null&&ca.child!==null||!Wh(ga)||(ga.effectTag|=4),oi$1(ga),null;case 5:gh(ga),_s=ch(bh.current);var Ms=ga.type;if(ca!==null&&ga.stateNode!=null)pi$1(ca,ga,Ms,Ss,_s),ca.ref!==ga.ref&&(ga.effectTag|=128);else{if(!Ss){if(ga.stateNode===null)throw Error(u$3(166));return null}if(ca=ch($g.current),Wh(ga)){Ss=ga.stateNode,Ms=ga.type;var Cs=ga.memoizedProps;switch(Ss[Md]=ga,Ss[Nd]=Cs,Ms){case"iframe":case"object":case"embed":F$2("load",Ss);break;case"video":case"audio":for(ca=0;ca<ac.length;ca++)F$2(ac[ca],Ss);break;case"source":F$2("error",Ss);break;case"img":case"image":case"link":F$2("error",Ss),F$2("load",Ss);break;case"form":F$2("reset",Ss),F$2("submit",Ss);break;case"details":F$2("toggle",Ss);break;case"input":Ab(Ss,Cs),F$2("invalid",Ss),rd(_s,"onChange");break;case"select":Ss._wrapperState={wasMultiple:!!Cs.multiple},F$2("invalid",Ss),rd(_s,"onChange");break;case"textarea":Jb(Ss,Cs),F$2("invalid",Ss),rd(_s,"onChange")}od(Ms,Cs),ca=null;for(var Ts in Cs)if(Cs.hasOwnProperty(Ts)){var Bs=Cs[Ts];Ts==="children"?typeof Bs=="string"?Ss.textContent!==Bs&&(ca=["children",Bs]):typeof Bs=="number"&&Ss.textContent!==""+Bs&&(ca=["children",""+Bs]):va.hasOwnProperty(Ts)&&Bs!=null&&rd(_s,Ts)}switch(Ms){case"input":xb(Ss),Eb(Ss,Cs,!0);break;case"textarea":xb(Ss),Lb(Ss);break;case"select":case"option":break;default:typeof Cs.onClick=="function"&&(Ss.onclick=sd)}_s=ca,ga.updateQueue=_s,_s!==null&&(ga.effectTag|=4)}else{switch(Ts=_s.nodeType===9?_s:_s.ownerDocument,ca===qd&&(ca=Nb(Ms)),ca===qd?Ms==="script"?(ca=Ts.createElement("div"),ca.innerHTML="<script><\/script>",ca=ca.removeChild(ca.firstChild)):typeof Ss.is=="string"?ca=Ts.createElement(Ms,{is:Ss.is}):(ca=Ts.createElement(Ms),Ms==="select"&&(Ts=ca,Ss.multiple?Ts.multiple=!0:Ss.size&&(Ts.size=Ss.size))):ca=Ts.createElementNS(ca,Ms),ca[Md]=ga,ca[Nd]=Ss,ni$1(ca,ga,!1,!1),ga.stateNode=ca,Ts=pd(Ms,Ss),Ms){case"iframe":case"object":case"embed":F$2("load",ca),Bs=Ss;break;case"video":case"audio":for(Bs=0;Bs<ac.length;Bs++)F$2(ac[Bs],ca);Bs=Ss;break;case"source":F$2("error",ca),Bs=Ss;break;case"img":case"image":case"link":F$2("error",ca),F$2("load",ca),Bs=Ss;break;case"form":F$2("reset",ca),F$2("submit",ca),Bs=Ss;break;case"details":F$2("toggle",ca),Bs=Ss;break;case"input":Ab(ca,Ss),Bs=zb(ca,Ss),F$2("invalid",ca),rd(_s,"onChange");break;case"option":Bs=Gb(ca,Ss);break;case"select":ca._wrapperState={wasMultiple:!!Ss.multiple},Bs=n$4({},Ss,{value:void 0}),F$2("invalid",ca),rd(_s,"onChange");break;case"textarea":Jb(ca,Ss),Bs=Ib(ca,Ss),F$2("invalid",ca),rd(_s,"onChange");break;default:Bs=Ss}od(Ms,Bs);var Ps=Bs;for(Cs in Ps)if(Ps.hasOwnProperty(Cs)){var Ls=Ps[Cs];Cs==="style"?md(ca,Ls):Cs==="dangerouslySetInnerHTML"?(Ls=Ls?Ls.__html:void 0,Ls!=null&&Qb(ca,Ls)):Cs==="children"?typeof Ls=="string"?(Ms!=="textarea"||Ls!=="")&&Rb(ca,Ls):typeof Ls=="number"&&Rb(ca,""+Ls):Cs!=="suppressContentEditableWarning"&&Cs!=="suppressHydrationWarning"&&Cs!=="autoFocus"&&(va.hasOwnProperty(Cs)?Ls!=null&&rd(_s,Cs):Ls!=null&&Xa(ca,Cs,Ls,Ts))}switch(Ms){case"input":xb(ca),Eb(ca,Ss,!1);break;case"textarea":xb(ca),Lb(ca);break;case"option":Ss.value!=null&&ca.setAttribute("value",""+rb(Ss.value));break;case"select":ca.multiple=!!Ss.multiple,_s=Ss.value,_s!=null?Hb(ca,!!Ss.multiple,_s,!1):Ss.defaultValue!=null&&Hb(ca,!!Ss.multiple,Ss.defaultValue,!0);break;default:typeof Bs.onClick=="function"&&(ca.onclick=sd)}Fd(Ms,Ss)&&(ga.effectTag|=4)}ga.ref!==null&&(ga.effectTag|=128)}return null;case 6:if(ca&&ga.stateNode!=null)qi$1(ca,ga,ca.memoizedProps,Ss);else{if(typeof Ss!="string"&&ga.stateNode===null)throw Error(u$3(166));_s=ch(bh.current),ch($g.current),Wh(ga)?(_s=ga.stateNode,Ss=ga.memoizedProps,_s[Md]=ga,_s.nodeValue!==Ss&&(ga.effectTag|=4)):(_s=(_s.nodeType===9?_s:_s.ownerDocument).createTextNode(Ss),_s[Md]=ga,ga.stateNode=_s)}return null;case 13:return H$1(M$2),Ss=ga.memoizedState,(ga.effectTag&64)!=0?(ga.expirationTime=_s,ga):(_s=Ss!==null,Ss=!1,ca===null?ga.memoizedProps.fallback!==void 0&&Wh(ga):(Ms=ca.memoizedState,Ss=Ms!==null,_s||Ms===null||(Ms=ca.child.sibling,Ms!==null&&(Cs=ga.firstEffect,Cs!==null?(ga.firstEffect=Ms,Ms.nextEffect=Cs):(ga.firstEffect=ga.lastEffect=Ms,Ms.nextEffect=null),Ms.effectTag=8))),_s&&!Ss&&(ga.mode&2)!=0&&(ca===null&&ga.memoizedProps.unstable_avoidThisFallback!==!0||(M$2.current&1)!=0?S$2===ti$1&&(S$2=ui$1):((S$2===ti$1||S$2===ui$1)&&(S$2=vi$1),wi$1!==0&&T$1!==null&&(xi$1(T$1,U$1),yi$1(T$1,wi$1)))),(_s||Ss)&&(ga.effectTag|=4),null);case 4:return eh(),oi$1(ga),null;case 10:return og(ga),null;case 17:return L$2(ga.type)&&Df(),null;case 19:if(H$1(M$2),Ss=ga.memoizedState,Ss===null)return null;if(Ms=(ga.effectTag&64)!=0,Cs=Ss.rendering,Cs===null){if(Ms)ri$1(Ss,!1);else if(S$2!==ti$1||ca!==null&&(ca.effectTag&64)!=0)for(Cs=ga.child;Cs!==null;){if(ca=hh(Cs),ca!==null){for(ga.effectTag|=64,ri$1(Ss,!1),Ms=ca.updateQueue,Ms!==null&&(ga.updateQueue=Ms,ga.effectTag|=4),Ss.lastEffect===null&&(ga.firstEffect=null),ga.lastEffect=Ss.lastEffect,Ss=ga.child;Ss!==null;)Ms=Ss,Cs=_s,Ms.effectTag&=2,Ms.nextEffect=null,Ms.firstEffect=null,Ms.lastEffect=null,ca=Ms.alternate,ca===null?(Ms.childExpirationTime=0,Ms.expirationTime=Cs,Ms.child=null,Ms.memoizedProps=null,Ms.memoizedState=null,Ms.updateQueue=null,Ms.dependencies=null):(Ms.childExpirationTime=ca.childExpirationTime,Ms.expirationTime=ca.expirationTime,Ms.child=ca.child,Ms.memoizedProps=ca.memoizedProps,Ms.memoizedState=ca.memoizedState,Ms.updateQueue=ca.updateQueue,Cs=ca.dependencies,Ms.dependencies=Cs===null?null:{expirationTime:Cs.expirationTime,firstContext:Cs.firstContext,responders:Cs.responders}),Ss=Ss.sibling;return I$1(M$2,M$2.current&1|2),ga.child}Cs=Cs.sibling}}else{if(!Ms)if(ca=hh(Cs),ca!==null){if(ga.effectTag|=64,Ms=!0,_s=ca.updateQueue,_s!==null&&(ga.updateQueue=_s,ga.effectTag|=4),ri$1(Ss,!0),Ss.tail===null&&Ss.tailMode==="hidden"&&!Cs.alternate)return ga=ga.lastEffect=Ss.lastEffect,ga!==null&&(ga.nextEffect=null),null}else 2*$f()-Ss.renderingStartTime>Ss.tailExpiration&&1<_s&&(ga.effectTag|=64,Ms=!0,ri$1(Ss,!1),ga.expirationTime=ga.childExpirationTime=_s-1);Ss.isBackwards?(Cs.sibling=ga.child,ga.child=Cs):(_s=Ss.last,_s!==null?_s.sibling=Cs:ga.child=Cs,Ss.last=Cs)}return Ss.tail!==null?(Ss.tailExpiration===0&&(Ss.tailExpiration=$f()+500),_s=Ss.tail,Ss.rendering=_s,Ss.tail=_s.sibling,Ss.lastEffect=ga.lastEffect,Ss.renderingStartTime=$f(),_s.sibling=null,ga=M$2.current,I$1(M$2,Ms?ga&1|2:ga&1),_s):null}throw Error(u$3(156,ga.tag))}function zi$1(ca){switch(ca.tag){case 1:L$2(ca.type)&&Df();var ga=ca.effectTag;return ga&4096?(ca.effectTag=ga&-4097|64,ca):null;case 3:if(eh(),H$1(K$1),H$1(J$1),ga=ca.effectTag,(ga&64)!=0)throw Error(u$3(285));return ca.effectTag=ga&-4097|64,ca;case 5:return gh(ca),null;case 13:return H$1(M$2),ga=ca.effectTag,ga&4096?(ca.effectTag=ga&-4097|64,ca):null;case 19:return H$1(M$2),null;case 4:return eh(),null;case 10:return og(ca),null;default:return null}}function Ai$1(ca,ga){return{value:ca,source:ga,stack:qb(ga)}}var Bi$1=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(ca,ga){var _s=ga.source,Ss=ga.stack;Ss===null&&_s!==null&&(Ss=qb(_s)),_s!==null&&pb(_s.type),ga=ga.value,ca!==null&&ca.tag===1&&pb(ca.type);try{console.error(ga)}catch(Ms){setTimeout(function(){throw Ms})}}function Di$1(ca,ga){try{ga.props=ca.memoizedProps,ga.state=ca.memoizedState,ga.componentWillUnmount()}catch(_s){Ei$1(ca,_s)}}function Fi$1(ca){var ga=ca.ref;if(ga!==null)if(typeof ga=="function")try{ga(null)}catch(_s){Ei$1(ca,_s)}else ga.current=null}function Gi$1(ca,ga){switch(ga.tag){case 0:case 11:case 15:case 22:return;case 1:if(ga.effectTag&256&&ca!==null){var _s=ca.memoizedProps,Ss=ca.memoizedState;ca=ga.stateNode,ga=ca.getSnapshotBeforeUpdate(ga.elementType===ga.type?_s:ig(ga.type,_s),Ss),ca.__reactInternalSnapshotBeforeUpdate=ga}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$1(ca,ga){if(ga=ga.updateQueue,ga=ga!==null?ga.lastEffect:null,ga!==null){var _s=ga=ga.next;do{if((_s.tag&ca)===ca){var Ss=_s.destroy;_s.destroy=void 0,Ss!==void 0&&Ss()}_s=_s.next}while(_s!==ga)}}function Ii$1(ca,ga){if(ga=ga.updateQueue,ga=ga!==null?ga.lastEffect:null,ga!==null){var _s=ga=ga.next;do{if((_s.tag&ca)===ca){var Ss=_s.create;_s.destroy=Ss()}_s=_s.next}while(_s!==ga)}}function Ji$1(ca,ga,_s){switch(_s.tag){case 0:case 11:case 15:case 22:Ii$1(3,_s);return;case 1:if(ca=_s.stateNode,_s.effectTag&4)if(ga===null)ca.componentDidMount();else{var Ss=_s.elementType===_s.type?ga.memoizedProps:ig(_s.type,ga.memoizedProps);ca.componentDidUpdate(Ss,ga.memoizedState,ca.__reactInternalSnapshotBeforeUpdate)}ga=_s.updateQueue,ga!==null&&Cg(_s,ga,ca);return;case 3:if(ga=_s.updateQueue,ga!==null){if(ca=null,_s.child!==null)switch(_s.child.tag){case 5:ca=_s.child.stateNode;break;case 1:ca=_s.child.stateNode}Cg(_s,ga,ca)}return;case 5:ca=_s.stateNode,ga===null&&_s.effectTag&4&&Fd(_s.type,_s.memoizedProps)&&ca.focus();return;case 6:return;case 4:return;case 12:return;case 13:_s.memoizedState===null&&(_s=_s.alternate,_s!==null&&(_s=_s.memoizedState,_s!==null&&(_s=_s.dehydrated,_s!==null&&Vc(_s))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$1(ca,ga,_s){switch(typeof Li$1=="function"&&Li$1(ga),ga.tag){case 0:case 11:case 14:case 15:case 22:if(ca=ga.updateQueue,ca!==null&&(ca=ca.lastEffect,ca!==null)){var Ss=ca.next;cg(97<_s?97:_s,function(){var Ms=Ss;do{var Cs=Ms.destroy;if(Cs!==void 0){var Ts=ga;try{Cs()}catch(Bs){Ei$1(Ts,Bs)}}Ms=Ms.next}while(Ms!==Ss)})}break;case 1:Fi$1(ga),_s=ga.stateNode,typeof _s.componentWillUnmount=="function"&&Di$1(ga,_s);break;case 5:Fi$1(ga);break;case 4:Mi$1(ca,ga,_s)}}function Ni$1(ca){var ga=ca.alternate;ca.return=null,ca.child=null,ca.memoizedState=null,ca.updateQueue=null,ca.dependencies=null,ca.alternate=null,ca.firstEffect=null,ca.lastEffect=null,ca.pendingProps=null,ca.memoizedProps=null,ca.stateNode=null,ga!==null&&Ni$1(ga)}function Oi$1(ca){return ca.tag===5||ca.tag===3||ca.tag===4}function Pi$1(ca){e:{for(var ga=ca.return;ga!==null;){if(Oi$1(ga)){var _s=ga;break e}ga=ga.return}throw Error(u$3(160))}switch(ga=_s.stateNode,_s.tag){case 5:var Ss=!1;break;case 3:ga=ga.containerInfo,Ss=!0;break;case 4:ga=ga.containerInfo,Ss=!0;break;default:throw Error(u$3(161))}_s.effectTag&16&&(Rb(ga,""),_s.effectTag&=-17);e:t:for(_s=ca;;){for(;_s.sibling===null;){if(_s.return===null||Oi$1(_s.return)){_s=null;break e}_s=_s.return}for(_s.sibling.return=_s.return,_s=_s.sibling;_s.tag!==5&&_s.tag!==6&&_s.tag!==18;){if(_s.effectTag&2||_s.child===null||_s.tag===4)continue t;_s.child.return=_s,_s=_s.child}if(!(_s.effectTag&2)){_s=_s.stateNode;break e}}Ss?Qi$1(ca,_s,ga):Ri$1(ca,_s,ga)}function Qi$1(ca,ga,_s){var Ss=ca.tag,Ms=Ss===5||Ss===6;if(Ms)ca=Ms?ca.stateNode:ca.stateNode.instance,ga?_s.nodeType===8?_s.parentNode.insertBefore(ca,ga):_s.insertBefore(ca,ga):(_s.nodeType===8?(ga=_s.parentNode,ga.insertBefore(ca,_s)):(ga=_s,ga.appendChild(ca)),_s=_s._reactRootContainer,_s!=null||ga.onclick!==null||(ga.onclick=sd));else if(Ss!==4&&(ca=ca.child,ca!==null))for(Qi$1(ca,ga,_s),ca=ca.sibling;ca!==null;)Qi$1(ca,ga,_s),ca=ca.sibling}function Ri$1(ca,ga,_s){var Ss=ca.tag,Ms=Ss===5||Ss===6;if(Ms)ca=Ms?ca.stateNode:ca.stateNode.instance,ga?_s.insertBefore(ca,ga):_s.appendChild(ca);else if(Ss!==4&&(ca=ca.child,ca!==null))for(Ri$1(ca,ga,_s),ca=ca.sibling;ca!==null;)Ri$1(ca,ga,_s),ca=ca.sibling}function Mi$1(ca,ga,_s){for(var Ss=ga,Ms=!1,Cs,Ts;;){if(!Ms){Ms=Ss.return;e:for(;;){if(Ms===null)throw Error(u$3(160));switch(Cs=Ms.stateNode,Ms.tag){case 5:Ts=!1;break e;case 3:Cs=Cs.containerInfo,Ts=!0;break e;case 4:Cs=Cs.containerInfo,Ts=!0;break e}Ms=Ms.return}Ms=!0}if(Ss.tag===5||Ss.tag===6){e:for(var Bs=ca,Ps=Ss,Ls=_s,Rs=Ps;;)if(Ki$1(Bs,Rs,Ls),Rs.child!==null&&Rs.tag!==4)Rs.child.return=Rs,Rs=Rs.child;else{if(Rs===Ps)break e;for(;Rs.sibling===null;){if(Rs.return===null||Rs.return===Ps)break e;Rs=Rs.return}Rs.sibling.return=Rs.return,Rs=Rs.sibling}Ts?(Bs=Cs,Ps=Ss.stateNode,Bs.nodeType===8?Bs.parentNode.removeChild(Ps):Bs.removeChild(Ps)):Cs.removeChild(Ss.stateNode)}else if(Ss.tag===4){if(Ss.child!==null){Cs=Ss.stateNode.containerInfo,Ts=!0,Ss.child.return=Ss,Ss=Ss.child;continue}}else if(Ki$1(ca,Ss,_s),Ss.child!==null){Ss.child.return=Ss,Ss=Ss.child;continue}if(Ss===ga)break;for(;Ss.sibling===null;){if(Ss.return===null||Ss.return===ga)return;Ss=Ss.return,Ss.tag===4&&(Ms=!1)}Ss.sibling.return=Ss.return,Ss=Ss.sibling}}function Si$1(ca,ga){switch(ga.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,ga);return;case 1:return;case 5:var _s=ga.stateNode;if(_s!=null){var Ss=ga.memoizedProps,Ms=ca!==null?ca.memoizedProps:Ss;ca=ga.type;var Cs=ga.updateQueue;if(ga.updateQueue=null,Cs!==null){for(_s[Nd]=Ss,ca==="input"&&Ss.type==="radio"&&Ss.name!=null&&Bb(_s,Ss),pd(ca,Ms),ga=pd(ca,Ss),Ms=0;Ms<Cs.length;Ms+=2){var Ts=Cs[Ms],Bs=Cs[Ms+1];Ts==="style"?md(_s,Bs):Ts==="dangerouslySetInnerHTML"?Qb(_s,Bs):Ts==="children"?Rb(_s,Bs):Xa(_s,Ts,Bs,ga)}switch(ca){case"input":Cb(_s,Ss);break;case"textarea":Kb(_s,Ss);break;case"select":ga=_s._wrapperState.wasMultiple,_s._wrapperState.wasMultiple=!!Ss.multiple,ca=Ss.value,ca!=null?Hb(_s,!!Ss.multiple,ca,!1):ga!==!!Ss.multiple&&(Ss.defaultValue!=null?Hb(_s,!!Ss.multiple,Ss.defaultValue,!0):Hb(_s,!!Ss.multiple,Ss.multiple?[]:"",!1))}}}return;case 6:if(ga.stateNode===null)throw Error(u$3(162));ga.stateNode.nodeValue=ga.memoizedProps;return;case 3:ga=ga.stateNode,ga.hydrate&&(ga.hydrate=!1,Vc(ga.containerInfo));return;case 12:return;case 13:if(_s=ga,ga.memoizedState===null?Ss=!1:(Ss=!0,_s=ga.child,Ti$1=$f()),_s!==null)e:for(ca=_s;;){if(ca.tag===5)Cs=ca.stateNode,Ss?(Cs=Cs.style,typeof Cs.setProperty=="function"?Cs.setProperty("display","none","important"):Cs.display="none"):(Cs=ca.stateNode,Ms=ca.memoizedProps.style,Ms=Ms!=null&&Ms.hasOwnProperty("display")?Ms.display:null,Cs.style.display=ld("display",Ms));else if(ca.tag===6)ca.stateNode.nodeValue=Ss?"":ca.memoizedProps;else if(ca.tag===13&&ca.memoizedState!==null&&ca.memoizedState.dehydrated===null){Cs=ca.child.sibling,Cs.return=ca,ca=Cs;continue}else if(ca.child!==null){ca.child.return=ca,ca=ca.child;continue}if(ca===_s)break;for(;ca.sibling===null;){if(ca.return===null||ca.return===_s)break e;ca=ca.return}ca.sibling.return=ca.return,ca=ca.sibling}Ui$1(ga);return;case 19:Ui$1(ga);return;case 17:return}throw Error(u$3(163))}function Ui$1(ca){var ga=ca.updateQueue;if(ga!==null){ca.updateQueue=null;var _s=ca.stateNode;_s===null&&(_s=ca.stateNode=new Bi$1),ga.forEach(function(Ss){var Ms=Vi$1.bind(null,ca,Ss);_s.has(Ss)||(_s.add(Ss),Ss.then(Ms,Ms))})}}var Wi$1=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(ca,ga,_s){_s=wg(_s,null),_s.tag=3,_s.payload={element:null};var Ss=ga.value;return _s.callback=function(){Yi$1||(Yi$1=!0,Zi$1=Ss),Ci$1(ca,ga)},_s}function $i$1(ca,ga,_s){_s=wg(_s,null),_s.tag=3;var Ss=ca.type.getDerivedStateFromError;if(typeof Ss=="function"){var Ms=ga.value;_s.payload=function(){return Ci$1(ca,ga),Ss(Ms)}}var Cs=ca.stateNode;return Cs!==null&&typeof Cs.componentDidCatch=="function"&&(_s.callback=function(){typeof Ss!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(ca,ga));var Ts=ga.stack;this.componentDidCatch(ga.value,{componentStack:Ts!==null?Ts:""})}),_s}var bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$1=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$2=V$2,T$1=null,X$1=null,U$1=0,S$2=ti$1,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$1=null,Yi$1=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$2&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(ca,ga,_s){if(ga=ga.mode,(ga&2)==0)return 1073741823;var Ss=ag();if((ga&4)==0)return Ss===99?1073741823:1073741822;if((W$2&fj)!==V$2)return U$1;if(_s!==null)ca=hg(ca,_s.timeoutMs|0||5e3,250);else switch(Ss){case 99:ca=1073741823;break;case 98:ca=hg(ca,150,100);break;case 97:case 96:ca=hg(ca,5e3,250);break;case 95:ca=2;break;default:throw Error(u$3(326))}return T$1!==null&&ca===U$1&&--ca,ca}function Ig(ca,ga){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(ca=xj(ca,ga),ca!==null){var _s=ag();ga===1073741823?(W$2&ej)!==V$2&&(W$2&(fj|gj))===V$2?yj(ca):(Z$1(ca),W$2===V$2&&gg()):Z$1(ca),(W$2&4)===V$2||_s!==98&&_s!==99||(tj===null?tj=new Map([[ca,ga]]):(_s=tj.get(ca),(_s===void 0||_s>ga)&&tj.set(ca,ga)))}}function xj(ca,ga){ca.expirationTime<ga&&(ca.expirationTime=ga);var _s=ca.alternate;_s!==null&&_s.expirationTime<ga&&(_s.expirationTime=ga);var Ss=ca.return,Ms=null;if(Ss===null&&ca.tag===3)Ms=ca.stateNode;else for(;Ss!==null;){if(_s=Ss.alternate,Ss.childExpirationTime<ga&&(Ss.childExpirationTime=ga),_s!==null&&_s.childExpirationTime<ga&&(_s.childExpirationTime=ga),Ss.return===null&&Ss.tag===3){Ms=Ss.stateNode;break}Ss=Ss.return}return Ms!==null&&(T$1===Ms&&(Bg(ga),S$2===vi$1&&xi$1(Ms,U$1)),yi$1(Ms,ga)),Ms}function zj(ca){var ga=ca.lastExpiredTime;if(ga!==0||(ga=ca.firstPendingTime,!Aj(ca,ga)))return ga;var _s=ca.lastPingedTime;return ca=ca.nextKnownPendingLevel,ca=_s>ca?_s:ca,2>=ca&&ga!==ca?0:ca}function Z$1(ca){if(ca.lastExpiredTime!==0)ca.callbackExpirationTime=1073741823,ca.callbackPriority=99,ca.callbackNode=eg(yj.bind(null,ca));else{var ga=zj(ca),_s=ca.callbackNode;if(ga===0)_s!==null&&(ca.callbackNode=null,ca.callbackExpirationTime=0,ca.callbackPriority=90);else{var Ss=Gg();if(ga===1073741823?Ss=99:ga===1||ga===2?Ss=95:(Ss=10*(1073741821-ga)-10*(1073741821-Ss),Ss=0>=Ss?99:250>=Ss?98:5250>=Ss?97:95),_s!==null){var Ms=ca.callbackPriority;if(ca.callbackExpirationTime===ga&&Ms>=Ss)return;_s!==Tf&&Kf(_s)}ca.callbackExpirationTime=ga,ca.callbackPriority=Ss,ga=ga===1073741823?eg(yj.bind(null,ca)):dg(Ss,Bj.bind(null,ca),{timeout:10*(1073741821-ga)-$f()}),ca.callbackNode=ga}}}function Bj(ca,ga){if(wj=0,ga)return ga=Gg(),Cj(ca,ga),Z$1(ca),null;var _s=zj(ca);if(_s!==0){if(ga=ca.callbackNode,(W$2&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),ca===T$1&&_s===U$1||Ej(ca,_s),X$1!==null){var Ss=W$2;W$2|=fj;var Ms=Fj();do try{Gj();break}catch(Bs){Hj(ca,Bs)}while(1);if(ng(),W$2=Ss,cj.current=Ms,S$2===hj)throw ga=kj,Ej(ca,_s),xi$1(ca,_s),Z$1(ca),ga;if(X$1===null)switch(Ms=ca.finishedWork=ca.current.alternate,ca.finishedExpirationTime=_s,Ss=S$2,T$1=null,Ss){case ti$1:case hj:throw Error(u$3(345));case ij:Cj(ca,2<_s?2:_s);break;case ui$1:if(xi$1(ca,_s),Ss=ca.lastSuspendedTime,_s===Ss&&(ca.nextKnownPendingLevel=Ij(Ms)),lj===1073741823&&(Ms=Ti$1+pj-$f(),10<Ms)){if(oj){var Cs=ca.lastPingedTime;if(Cs===0||Cs>=_s){ca.lastPingedTime=_s,Ej(ca,_s);break}}if(Cs=zj(ca),Cs!==0&&Cs!==_s)break;if(Ss!==0&&Ss!==_s){ca.lastPingedTime=Ss;break}ca.timeoutHandle=Hd(Jj.bind(null,ca),Ms);break}Jj(ca);break;case vi$1:if(xi$1(ca,_s),Ss=ca.lastSuspendedTime,_s===Ss&&(ca.nextKnownPendingLevel=Ij(Ms)),oj&&(Ms=ca.lastPingedTime,Ms===0||Ms>=_s)){ca.lastPingedTime=_s,Ej(ca,_s);break}if(Ms=zj(ca),Ms!==0&&Ms!==_s)break;if(Ss!==0&&Ss!==_s){ca.lastPingedTime=Ss;break}if(mj!==1073741823?Ss=10*(1073741821-mj)-$f():lj===1073741823?Ss=0:(Ss=10*(1073741821-lj)-5e3,Ms=$f(),_s=10*(1073741821-_s)-Ms,Ss=Ms-Ss,0>Ss&&(Ss=0),Ss=(120>Ss?120:480>Ss?480:1080>Ss?1080:1920>Ss?1920:3e3>Ss?3e3:4320>Ss?4320:1960*bj(Ss/1960))-Ss,_s<Ss&&(Ss=_s)),10<Ss){ca.timeoutHandle=Hd(Jj.bind(null,ca),Ss);break}Jj(ca);break;case jj:if(lj!==1073741823&&nj!==null){Cs=lj;var Ts=nj;if(Ss=Ts.busyMinDurationMs|0,0>=Ss?Ss=0:(Ms=Ts.busyDelayMs|0,Cs=$f()-(10*(1073741821-Cs)-(Ts.timeoutMs|0||5e3)),Ss=Cs<=Ms?0:Ms+Ss-Cs),10<Ss){xi$1(ca,_s),ca.timeoutHandle=Hd(Jj.bind(null,ca),Ss);break}}Jj(ca);break;default:throw Error(u$3(329))}if(Z$1(ca),ca.callbackNode===ga)return Bj.bind(null,ca)}}return null}function yj(ca){var ga=ca.lastExpiredTime;if(ga=ga!==0?ga:1073741823,(W$2&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),ca===T$1&&ga===U$1||Ej(ca,ga),X$1!==null){var _s=W$2;W$2|=fj;var Ss=Fj();do try{Kj();break}catch(Ms){Hj(ca,Ms)}while(1);if(ng(),W$2=_s,cj.current=Ss,S$2===hj)throw _s=kj,Ej(ca,ga),xi$1(ca,ga),Z$1(ca),_s;if(X$1!==null)throw Error(u$3(261));ca.finishedWork=ca.current.alternate,ca.finishedExpirationTime=ga,T$1=null,Jj(ca),Z$1(ca)}return null}function Lj(){if(tj!==null){var ca=tj;tj=null,ca.forEach(function(ga,_s){Cj(_s,ga),Z$1(_s)}),gg()}}function Mj(ca,ga){var _s=W$2;W$2|=1;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}}function Nj(ca,ga){var _s=W$2;W$2&=-2,W$2|=ej;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}}function Ej(ca,ga){ca.finishedWork=null,ca.finishedExpirationTime=0;var _s=ca.timeoutHandle;if(_s!==-1&&(ca.timeoutHandle=-1,Id(_s)),X$1!==null)for(_s=X$1.return;_s!==null;){var Ss=_s;switch(Ss.tag){case 1:Ss=Ss.type.childContextTypes,Ss!=null&&Df();break;case 3:eh(),H$1(K$1),H$1(J$1);break;case 5:gh(Ss);break;case 4:eh();break;case 13:H$1(M$2);break;case 19:H$1(M$2);break;case 10:og(Ss)}_s=_s.return}T$1=ca,X$1=Sg(ca.current,null),U$1=ga,S$2=ti$1,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(ca,ga){do{try{if(ng(),jh.current=sh,mh)for(var _s=N$2.memoizedState;_s!==null;){var Ss=_s.queue;Ss!==null&&(Ss.pending=null),_s=_s.next}if(lh=0,P$2=O$2=N$2=null,mh=!1,X$1===null||X$1.return===null)return S$2=hj,kj=ga,X$1=null;e:{var Ms=ca,Cs=X$1.return,Ts=X$1,Bs=ga;if(ga=U$1,Ts.effectTag|=2048,Ts.firstEffect=Ts.lastEffect=null,Bs!==null&&typeof Bs=="object"&&typeof Bs.then=="function"){var Ps=Bs;if((Ts.mode&2)==0){var Ls=Ts.alternate;Ls?(Ts.updateQueue=Ls.updateQueue,Ts.memoizedState=Ls.memoizedState,Ts.expirationTime=Ls.expirationTime):(Ts.updateQueue=null,Ts.memoizedState=null)}var Rs=(M$2.current&1)!=0,Ds=Cs;do{var $s;if($s=Ds.tag===13){var Fs=Ds.memoizedState;if(Fs!==null)$s=Fs.dehydrated!==null;else{var Gs=Ds.memoizedProps;$s=Gs.fallback===void 0?!1:Gs.unstable_avoidThisFallback!==!0?!0:!Rs}}if($s){var Vs=Ds.updateQueue;if(Vs===null){var ks=new Set;ks.add(Ps),Ds.updateQueue=ks}else Vs.add(Ps);if((Ds.mode&2)==0){if(Ds.effectTag|=64,Ts.effectTag&=-2981,Ts.tag===1)if(Ts.alternate===null)Ts.tag=17;else{var Os=wg(1073741823,null);Os.tag=2,xg(Ts,Os)}Ts.expirationTime=1073741823;break e}Bs=void 0,Ts=ga;var Ns=Ms.pingCache;if(Ns===null?(Ns=Ms.pingCache=new Wi$1,Bs=new Set,Ns.set(Ps,Bs)):(Bs=Ns.get(Ps),Bs===void 0&&(Bs=new Set,Ns.set(Ps,Bs))),!Bs.has(Ts)){Bs.add(Ts);var Us=Oj.bind(null,Ms,Ps,Ts);Ps.then(Us,Us)}Ds.effectTag|=4096,Ds.expirationTime=ga;break e}Ds=Ds.return}while(Ds!==null);Bs=Error((pb(Ts.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb(Ts))}S$2!==jj&&(S$2=ij),Bs=Ai$1(Bs,Ts),Ds=Cs;do{switch(Ds.tag){case 3:Ps=Bs,Ds.effectTag|=4096,Ds.expirationTime=ga;var Hs=Xi$1(Ds,Ps,ga);yg(Ds,Hs);break e;case 1:Ps=Bs;var zs=Ds.type,js=Ds.stateNode;if((Ds.effectTag&64)==0&&(typeof zs.getDerivedStateFromError=="function"||js!==null&&typeof js.componentDidCatch=="function"&&(aj===null||!aj.has(js)))){Ds.effectTag|=4096,Ds.expirationTime=ga;var Ws=$i$1(Ds,Ps,ga);yg(Ds,Ws);break e}}Ds=Ds.return}while(Ds!==null)}X$1=Pj(X$1)}catch(Qs){ga=Qs;continue}break}while(1)}function Fj(){var ca=cj.current;return cj.current=sh,ca===null?sh:ca}function Ag(ca,ga){ca<lj&&2<ca&&(lj=ca),ga!==null&&ca<mj&&2<ca&&(mj=ca,nj=ga)}function Bg(ca){ca>wi$1&&(wi$1=ca)}function Kj(){for(;X$1!==null;)X$1=Qj(X$1)}function Gj(){for(;X$1!==null&&!Uf();)X$1=Qj(X$1)}function Qj(ca){var ga=Rj(ca.alternate,ca,U$1);return ca.memoizedProps=ca.pendingProps,ga===null&&(ga=Pj(ca)),dj.current=null,ga}function Pj(ca){X$1=ca;do{var ga=X$1.alternate;if(ca=X$1.return,(X$1.effectTag&2048)==0){if(ga=si$1(ga,X$1,U$1),U$1===1||X$1.childExpirationTime!==1){for(var _s=0,Ss=X$1.child;Ss!==null;){var Ms=Ss.expirationTime,Cs=Ss.childExpirationTime;Ms>_s&&(_s=Ms),Cs>_s&&(_s=Cs),Ss=Ss.sibling}X$1.childExpirationTime=_s}if(ga!==null)return ga;ca!==null&&(ca.effectTag&2048)==0&&(ca.firstEffect===null&&(ca.firstEffect=X$1.firstEffect),X$1.lastEffect!==null&&(ca.lastEffect!==null&&(ca.lastEffect.nextEffect=X$1.firstEffect),ca.lastEffect=X$1.lastEffect),1<X$1.effectTag&&(ca.lastEffect!==null?ca.lastEffect.nextEffect=X$1:ca.firstEffect=X$1,ca.lastEffect=X$1))}else{if(ga=zi$1(X$1),ga!==null)return ga.effectTag&=2047,ga;ca!==null&&(ca.firstEffect=ca.lastEffect=null,ca.effectTag|=2048)}if(ga=X$1.sibling,ga!==null)return ga;X$1=ca}while(X$1!==null);return S$2===ti$1&&(S$2=jj),null}function Ij(ca){var ga=ca.expirationTime;return ca=ca.childExpirationTime,ga>ca?ga:ca}function Jj(ca){var ga=ag();return cg(99,Sj.bind(null,ca,ga)),null}function Sj(ca,ga){do Dj();while(rj!==null);if((W$2&(fj|gj))!==V$2)throw Error(u$3(327));var _s=ca.finishedWork,Ss=ca.finishedExpirationTime;if(_s===null)return null;if(ca.finishedWork=null,ca.finishedExpirationTime=0,_s===ca.current)throw Error(u$3(177));ca.callbackNode=null,ca.callbackExpirationTime=0,ca.callbackPriority=90,ca.nextKnownPendingLevel=0;var Ms=Ij(_s);if(ca.firstPendingTime=Ms,Ss<=ca.lastSuspendedTime?ca.firstSuspendedTime=ca.lastSuspendedTime=ca.nextKnownPendingLevel=0:Ss<=ca.firstSuspendedTime&&(ca.firstSuspendedTime=Ss-1),Ss<=ca.lastPingedTime&&(ca.lastPingedTime=0),Ss<=ca.lastExpiredTime&&(ca.lastExpiredTime=0),ca===T$1&&(X$1=T$1=null,U$1=0),1<_s.effectTag?_s.lastEffect!==null?(_s.lastEffect.nextEffect=_s,Ms=_s.firstEffect):Ms=_s:Ms=_s.firstEffect,Ms!==null){var Cs=W$2;W$2|=gj,dj.current=null,Dd=fd;var Ts=xd();if(yd(Ts)){if("selectionStart"in Ts)var Bs={start:Ts.selectionStart,end:Ts.selectionEnd};else e:{Bs=(Bs=Ts.ownerDocument)&&Bs.defaultView||window;var Ps=Bs.getSelection&&Bs.getSelection();if(Ps&&Ps.rangeCount!==0){Bs=Ps.anchorNode;var Ls=Ps.anchorOffset,Rs=Ps.focusNode;Ps=Ps.focusOffset;try{Bs.nodeType,Rs.nodeType}catch{Bs=null;break e}var Ds=0,$s=-1,Fs=-1,Gs=0,Vs=0,ks=Ts,Os=null;t:for(;;){for(var Ns;ks!==Bs||Ls!==0&&ks.nodeType!==3||($s=Ds+Ls),ks!==Rs||Ps!==0&&ks.nodeType!==3||(Fs=Ds+Ps),ks.nodeType===3&&(Ds+=ks.nodeValue.length),(Ns=ks.firstChild)!==null;)Os=ks,ks=Ns;for(;;){if(ks===Ts)break t;if(Os===Bs&&++Gs===Ls&&($s=Ds),Os===Rs&&++Vs===Ps&&(Fs=Ds),(Ns=ks.nextSibling)!==null)break;ks=Os,Os=ks.parentNode}ks=Ns}Bs=$s===-1||Fs===-1?null:{start:$s,end:Fs}}else Bs=null}Bs=Bs||{start:0,end:0}}else Bs=null;Ed={activeElementDetached:null,focusedElem:Ts,selectionRange:Bs},fd=!1,Y$1=Ms;do try{Tj()}catch(qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,qs),Y$1=Y$1.nextEffect}while(Y$1!==null);Y$1=Ms;do try{for(Ts=ca,Bs=ga;Y$1!==null;){var Us=Y$1.effectTag;if(Us&16&&Rb(Y$1.stateNode,""),Us&128){var Hs=Y$1.alternate;if(Hs!==null){var zs=Hs.ref;zs!==null&&(typeof zs=="function"?zs(null):zs.current=null)}}switch(Us&1038){case 2:Pi$1(Y$1),Y$1.effectTag&=-3;break;case 6:Pi$1(Y$1),Y$1.effectTag&=-3,Si$1(Y$1.alternate,Y$1);break;case 1024:Y$1.effectTag&=-1025;break;case 1028:Y$1.effectTag&=-1025,Si$1(Y$1.alternate,Y$1);break;case 4:Si$1(Y$1.alternate,Y$1);break;case 8:Ls=Y$1,Mi$1(Ts,Ls,Bs),Ni$1(Ls)}Y$1=Y$1.nextEffect}}catch(qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,qs),Y$1=Y$1.nextEffect}while(Y$1!==null);if(zs=Ed,Hs=xd(),Us=zs.focusedElem,Bs=zs.selectionRange,Hs!==Us&&Us&&Us.ownerDocument&&wd(Us.ownerDocument.documentElement,Us)){for(Bs!==null&&yd(Us)&&(Hs=Bs.start,zs=Bs.end,zs===void 0&&(zs=Hs),"selectionStart"in Us?(Us.selectionStart=Hs,Us.selectionEnd=Math.min(zs,Us.value.length)):(zs=(Hs=Us.ownerDocument||document)&&Hs.defaultView||window,zs.getSelection&&(zs=zs.getSelection(),Ls=Us.textContent.length,Ts=Math.min(Bs.start,Ls),Bs=Bs.end===void 0?Ts:Math.min(Bs.end,Ls),!zs.extend&&Ts>Bs&&(Ls=Bs,Bs=Ts,Ts=Ls),Ls=vd(Us,Ts),Rs=vd(Us,Bs),Ls&&Rs&&(zs.rangeCount!==1||zs.anchorNode!==Ls.node||zs.anchorOffset!==Ls.offset||zs.focusNode!==Rs.node||zs.focusOffset!==Rs.offset)&&(Hs=Hs.createRange(),Hs.setStart(Ls.node,Ls.offset),zs.removeAllRanges(),Ts>Bs?(zs.addRange(Hs),zs.extend(Rs.node,Rs.offset)):(Hs.setEnd(Rs.node,Rs.offset),zs.addRange(Hs)))))),Hs=[],zs=Us;zs=zs.parentNode;)zs.nodeType===1&&Hs.push({element:zs,left:zs.scrollLeft,top:zs.scrollTop});for(typeof Us.focus=="function"&&Us.focus(),Us=0;Us<Hs.length;Us++)zs=Hs[Us],zs.element.scrollLeft=zs.left,zs.element.scrollTop=zs.top}fd=!!Dd,Ed=Dd=null,ca.current=_s,Y$1=Ms;do try{for(Us=ca;Y$1!==null;){var js=Y$1.effectTag;if(js&36&&Ji$1(Us,Y$1.alternate,Y$1),js&128){Hs=void 0;var Ws=Y$1.ref;if(Ws!==null){var Qs=Y$1.stateNode;switch(Y$1.tag){case 5:Hs=Qs;break;default:Hs=Qs}typeof Ws=="function"?Ws(Hs):Ws.current=Hs}}Y$1=Y$1.nextEffect}}catch(qs){if(Y$1===null)throw Error(u$3(330));Ei$1(Y$1,qs),Y$1=Y$1.nextEffect}while(Y$1!==null);Y$1=null,Vf(),W$2=Cs}else ca.current=_s;if(qj)qj=!1,rj=ca,sj=ga;else for(Y$1=Ms;Y$1!==null;)ga=Y$1.nextEffect,Y$1.nextEffect=null,Y$1=ga;if(ga=ca.firstPendingTime,ga===0&&(aj=null),ga===1073741823?ca===vj?uj++:(uj=0,vj=ca):uj=0,typeof Uj=="function"&&Uj(_s.stateNode,Ss),Z$1(ca),Yi$1)throw Yi$1=!1,ca=Zi$1,Zi$1=null,ca;return(W$2&ej)!==V$2||gg(),null}function Tj(){for(;Y$1!==null;){var ca=Y$1.effectTag;(ca&256)!=0&&Gi$1(Y$1.alternate,Y$1),(ca&512)==0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$1=Y$1.nextEffect}}function Dj(){if(sj!==90){var ca=97<sj?97:sj;return sj=90,cg(ca,Vj)}}function Vj(){if(rj===null)return!1;var ca=rj;if(rj=null,(W$2&(fj|gj))!==V$2)throw Error(u$3(331));var ga=W$2;for(W$2|=gj,ca=ca.current.firstEffect;ca!==null;){try{var _s=ca;if((_s.effectTag&512)!=0)switch(_s.tag){case 0:case 11:case 15:case 22:Hi$1(5,_s),Ii$1(5,_s)}}catch(Ss){if(ca===null)throw Error(u$3(330));Ei$1(ca,Ss)}_s=ca.nextEffect,ca.nextEffect=null,ca=_s}return W$2=ga,gg(),!0}function Wj(ca,ga,_s){ga=Ai$1(_s,ga),ga=Xi$1(ca,ga,1073741823),xg(ca,ga),ca=xj(ca,1073741823),ca!==null&&Z$1(ca)}function Ei$1(ca,ga){if(ca.tag===3)Wj(ca,ca,ga);else for(var _s=ca.return;_s!==null;){if(_s.tag===3){Wj(_s,ca,ga);break}else if(_s.tag===1){var Ss=_s.stateNode;if(typeof _s.type.getDerivedStateFromError=="function"||typeof Ss.componentDidCatch=="function"&&(aj===null||!aj.has(Ss))){ca=Ai$1(ga,ca),ca=$i$1(_s,ca,1073741823),xg(_s,ca),_s=xj(_s,1073741823),_s!==null&&Z$1(_s);break}}_s=_s.return}}function Oj(ca,ga,_s){var Ss=ca.pingCache;Ss!==null&&Ss.delete(ga),T$1===ca&&U$1===_s?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(ca,U$1):oj=!0:Aj(ca,_s)&&(ga=ca.lastPingedTime,ga!==0&&ga<_s||(ca.lastPingedTime=_s,Z$1(ca)))}function Vi$1(ca,ga){var _s=ca.stateNode;_s!==null&&_s.delete(ga),ga=0,ga===0&&(ga=Gg(),ga=Hg(ga,ca,null)),ca=xj(ca,ga),ca!==null&&Z$1(ca)}var Rj;Rj=function(ca,ga,_s){var Ss=ga.expirationTime;if(ca!==null){var Ms=ga.pendingProps;if(ca.memoizedProps!==Ms||K$1.current)rg=!0;else{if(Ss<_s){switch(rg=!1,ga.tag){case 3:hi$1(ga),Xh();break;case 5:if(fh(ga),ga.mode&4&&_s!==1&&Ms.hidden)return ga.expirationTime=ga.childExpirationTime=1,null;break;case 1:L$2(ga.type)&&Gf(ga);break;case 4:dh(ga,ga.stateNode.containerInfo);break;case 10:Ss=ga.memoizedProps.value,Ms=ga.type._context,I$1(jg,Ms._currentValue),Ms._currentValue=Ss;break;case 13:if(ga.memoizedState!==null)return Ss=ga.child.childExpirationTime,Ss!==0&&Ss>=_s?ji$1(ca,ga,_s):(I$1(M$2,M$2.current&1),ga=$h(ca,ga,_s),ga!==null?ga.sibling:null);I$1(M$2,M$2.current&1);break;case 19:if(Ss=ga.childExpirationTime>=_s,(ca.effectTag&64)!=0){if(Ss)return mi$1(ca,ga,_s);ga.effectTag|=64}if(Ms=ga.memoizedState,Ms!==null&&(Ms.rendering=null,Ms.tail=null),I$1(M$2,M$2.current),!Ss)return null}return $h(ca,ga,_s)}rg=!1}}else rg=!1;switch(ga.expirationTime=0,ga.tag){case 2:if(Ss=ga.type,ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ca=ga.pendingProps,Ms=Cf(ga,J$1.current),qg(ga,_s),Ms=oh(null,ga,Ss,ca,Ms,_s),ga.effectTag|=1,typeof Ms=="object"&&Ms!==null&&typeof Ms.render=="function"&&Ms.$$typeof===void 0){if(ga.tag=1,ga.memoizedState=null,ga.updateQueue=null,L$2(Ss)){var Cs=!0;Gf(ga)}else Cs=!1;ga.memoizedState=Ms.state!==null&&Ms.state!==void 0?Ms.state:null,ug(ga);var Ts=Ss.getDerivedStateFromProps;typeof Ts=="function"&&Fg(ga,Ss,Ts,ca),Ms.updater=Jg,ga.stateNode=Ms,Ms._reactInternalFiber=ga,Ng(ga,Ss,ca,_s),ga=gi$1(null,ga,Ss,!0,Cs,_s)}else ga.tag=0,R$2(null,ga,Ms,_s),ga=ga.child;return ga;case 16:e:{if(Ms=ga.elementType,ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ca=ga.pendingProps,ob(Ms),Ms._status!==1)throw Ms._result;switch(Ms=Ms._result,ga.type=Ms,Cs=ga.tag=Xj(Ms),ca=ig(Ms,ca),Cs){case 0:ga=di$1(null,ga,Ms,ca,_s);break e;case 1:ga=fi$1(null,ga,Ms,ca,_s);break e;case 11:ga=Zh(null,ga,Ms,ca,_s);break e;case 14:ga=ai$1(null,ga,Ms,ig(Ms.type,ca),Ss,_s);break e}throw Error(u$3(306,Ms,""))}return ga;case 0:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),di$1(ca,ga,Ss,Ms,_s);case 1:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),fi$1(ca,ga,Ss,Ms,_s);case 3:if(hi$1(ga),Ss=ga.updateQueue,ca===null||Ss===null)throw Error(u$3(282));if(Ss=ga.pendingProps,Ms=ga.memoizedState,Ms=Ms!==null?Ms.element:null,vg(ca,ga),zg(ga,Ss,null,_s),Ss=ga.memoizedState.element,Ss===Ms)Xh(),ga=$h(ca,ga,_s);else{if((Ms=ga.stateNode.hydrate)&&(Ph=Jd(ga.stateNode.containerInfo.firstChild),Oh=ga,Ms=Qh=!0),Ms)for(_s=Yg(ga,null,Ss,_s),ga.child=_s;_s;)_s.effectTag=_s.effectTag&-3|1024,_s=_s.sibling;else R$2(ca,ga,Ss,_s),Xh();ga=ga.child}return ga;case 5:return fh(ga),ca===null&&Uh(ga),Ss=ga.type,Ms=ga.pendingProps,Cs=ca!==null?ca.memoizedProps:null,Ts=Ms.children,Gd(Ss,Ms)?Ts=null:Cs!==null&&Gd(Ss,Cs)&&(ga.effectTag|=16),ei$1(ca,ga),ga.mode&4&&_s!==1&&Ms.hidden?(ga.expirationTime=ga.childExpirationTime=1,ga=null):(R$2(ca,ga,Ts,_s),ga=ga.child),ga;case 6:return ca===null&&Uh(ga),null;case 13:return ji$1(ca,ga,_s);case 4:return dh(ga,ga.stateNode.containerInfo),Ss=ga.pendingProps,ca===null?ga.child=Xg(ga,null,Ss,_s):R$2(ca,ga,Ss,_s),ga.child;case 11:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),Zh(ca,ga,Ss,Ms,_s);case 7:return R$2(ca,ga,ga.pendingProps,_s),ga.child;case 8:return R$2(ca,ga,ga.pendingProps.children,_s),ga.child;case 12:return R$2(ca,ga,ga.pendingProps.children,_s),ga.child;case 10:e:{Ss=ga.type._context,Ms=ga.pendingProps,Ts=ga.memoizedProps,Cs=Ms.value;var Bs=ga.type._context;if(I$1(jg,Bs._currentValue),Bs._currentValue=Cs,Ts!==null)if(Bs=Ts.value,Cs=$e$1(Bs,Cs)?0:(typeof Ss._calculateChangedBits=="function"?Ss._calculateChangedBits(Bs,Cs):1073741823)|0,Cs===0){if(Ts.children===Ms.children&&!K$1.current){ga=$h(ca,ga,_s);break e}}else for(Bs=ga.child,Bs!==null&&(Bs.return=ga);Bs!==null;){var Ps=Bs.dependencies;if(Ps!==null){Ts=Bs.child;for(var Ls=Ps.firstContext;Ls!==null;){if(Ls.context===Ss&&(Ls.observedBits&Cs)!=0){Bs.tag===1&&(Ls=wg(_s,null),Ls.tag=2,xg(Bs,Ls)),Bs.expirationTime<_s&&(Bs.expirationTime=_s),Ls=Bs.alternate,Ls!==null&&Ls.expirationTime<_s&&(Ls.expirationTime=_s),pg(Bs.return,_s),Ps.expirationTime<_s&&(Ps.expirationTime=_s);break}Ls=Ls.next}}else Ts=Bs.tag===10&&Bs.type===ga.type?null:Bs.child;if(Ts!==null)Ts.return=Bs;else for(Ts=Bs;Ts!==null;){if(Ts===ga){Ts=null;break}if(Bs=Ts.sibling,Bs!==null){Bs.return=Ts.return,Ts=Bs;break}Ts=Ts.return}Bs=Ts}R$2(ca,ga,Ms.children,_s),ga=ga.child}return ga;case 9:return Ms=ga.type,Cs=ga.pendingProps,Ss=Cs.children,qg(ga,_s),Ms=sg(Ms,Cs.unstable_observedBits),Ss=Ss(Ms),ga.effectTag|=1,R$2(ca,ga,Ss,_s),ga.child;case 14:return Ms=ga.type,Cs=ig(Ms,ga.pendingProps),Cs=ig(Ms.type,Cs),ai$1(ca,ga,Ms,Cs,Ss,_s);case 15:return ci$1(ca,ga,ga.type,ga.pendingProps,Ss,_s);case 17:return Ss=ga.type,Ms=ga.pendingProps,Ms=ga.elementType===Ss?Ms:ig(Ss,Ms),ca!==null&&(ca.alternate=null,ga.alternate=null,ga.effectTag|=2),ga.tag=1,L$2(Ss)?(ca=!0,Gf(ga)):ca=!1,qg(ga,_s),Lg(ga,Ss,Ms),Ng(ga,Ss,Ms,_s),gi$1(null,ga,Ss,!0,ca,_s);case 19:return mi$1(ca,ga,_s)}throw Error(u$3(156,ga.tag))};var Uj=null,Li$1=null;function Yj(ca){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ga.isDisabled||!ga.supportsFiber)return!0;try{var _s=ga.inject(ca);Uj=function(Ss){try{ga.onCommitFiberRoot(_s,Ss,void 0,(Ss.current.effectTag&64)==64)}catch{}},Li$1=function(Ss){try{ga.onCommitFiberUnmount(_s,Ss)}catch{}}}catch{}return!0}function Zj(ca,ga,_s,Ss){this.tag=ca,this.key=_s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ga,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ss,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(ca,ga,_s,Ss){return new Zj(ca,ga,_s,Ss)}function bi$1(ca){return ca=ca.prototype,!(!ca||!ca.isReactComponent)}function Xj(ca){if(typeof ca=="function")return bi$1(ca)?1:0;if(ca!=null){if(ca=ca.$$typeof,ca===gb)return 11;if(ca===jb)return 14}return 2}function Sg(ca,ga){var _s=ca.alternate;return _s===null?(_s=Sh(ca.tag,ga,ca.key,ca.mode),_s.elementType=ca.elementType,_s.type=ca.type,_s.stateNode=ca.stateNode,_s.alternate=ca,ca.alternate=_s):(_s.pendingProps=ga,_s.effectTag=0,_s.nextEffect=null,_s.firstEffect=null,_s.lastEffect=null),_s.childExpirationTime=ca.childExpirationTime,_s.expirationTime=ca.expirationTime,_s.child=ca.child,_s.memoizedProps=ca.memoizedProps,_s.memoizedState=ca.memoizedState,_s.updateQueue=ca.updateQueue,ga=ca.dependencies,_s.dependencies=ga===null?null:{expirationTime:ga.expirationTime,firstContext:ga.firstContext,responders:ga.responders},_s.sibling=ca.sibling,_s.index=ca.index,_s.ref=ca.ref,_s}function Ug(ca,ga,_s,Ss,Ms,Cs){var Ts=2;if(Ss=ca,typeof ca=="function")bi$1(ca)&&(Ts=1);else if(typeof ca=="string")Ts=5;else e:switch(ca){case ab:return Wg(_s.children,Ms,Cs,ga);case fb:Ts=8,Ms|=7;break;case bb:Ts=8,Ms|=1;break;case cb:return ca=Sh(12,_s,ga,Ms|8),ca.elementType=cb,ca.type=cb,ca.expirationTime=Cs,ca;case hb:return ca=Sh(13,_s,ga,Ms),ca.type=hb,ca.elementType=hb,ca.expirationTime=Cs,ca;case ib:return ca=Sh(19,_s,ga,Ms),ca.elementType=ib,ca.expirationTime=Cs,ca;default:if(typeof ca=="object"&&ca!==null)switch(ca.$$typeof){case db:Ts=10;break e;case eb:Ts=9;break e;case gb:Ts=11;break e;case jb:Ts=14;break e;case kb:Ts=16,Ss=null;break e;case lb:Ts=22;break e}throw Error(u$3(130,ca==null?ca:typeof ca,""))}return ga=Sh(Ts,_s,ga,Ms),ga.elementType=ca,ga.type=Ss,ga.expirationTime=Cs,ga}function Wg(ca,ga,_s,Ss){return ca=Sh(7,ca,Ss,ga),ca.expirationTime=_s,ca}function Tg(ca,ga,_s){return ca=Sh(6,ca,null,ga),ca.expirationTime=_s,ca}function Vg(ca,ga,_s){return ga=Sh(4,ca.children!==null?ca.children:[],ca.key,ga),ga.expirationTime=_s,ga.stateNode={containerInfo:ca.containerInfo,pendingChildren:null,implementation:ca.implementation},ga}function ak(ca,ga,_s){this.tag=ga,this.current=null,this.containerInfo=ca,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=_s,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(ca,ga){var _s=ca.firstSuspendedTime;return ca=ca.lastSuspendedTime,_s!==0&&_s>=ga&&ca<=ga}function xi$1(ca,ga){var _s=ca.firstSuspendedTime,Ss=ca.lastSuspendedTime;_s<ga&&(ca.firstSuspendedTime=ga),(Ss>ga||_s===0)&&(ca.lastSuspendedTime=ga),ga<=ca.lastPingedTime&&(ca.lastPingedTime=0),ga<=ca.lastExpiredTime&&(ca.lastExpiredTime=0)}function yi$1(ca,ga){ga>ca.firstPendingTime&&(ca.firstPendingTime=ga);var _s=ca.firstSuspendedTime;_s!==0&&(ga>=_s?ca.firstSuspendedTime=ca.lastSuspendedTime=ca.nextKnownPendingLevel=0:ga>=ca.lastSuspendedTime&&(ca.lastSuspendedTime=ga+1),ga>ca.nextKnownPendingLevel&&(ca.nextKnownPendingLevel=ga))}function Cj(ca,ga){var _s=ca.lastExpiredTime;(_s===0||_s>ga)&&(ca.lastExpiredTime=ga)}function bk(ca,ga,_s,Ss){var Ms=ga.current,Cs=Gg(),Ts=Dg.suspense;Cs=Hg(Cs,Ms,Ts);e:if(_s){_s=_s._reactInternalFiber;t:{if(dc(_s)!==_s||_s.tag!==1)throw Error(u$3(170));var Bs=_s;do{switch(Bs.tag){case 3:Bs=Bs.stateNode.context;break t;case 1:if(L$2(Bs.type)){Bs=Bs.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Bs=Bs.return}while(Bs!==null);throw Error(u$3(171))}if(_s.tag===1){var Ps=_s.type;if(L$2(Ps)){_s=Ff(_s,Ps,Bs);break e}}_s=Bs}else _s=Af;return ga.context===null?ga.context=_s:ga.pendingContext=_s,ga=wg(Cs,Ts),ga.payload={element:ca},Ss=Ss===void 0?null:Ss,Ss!==null&&(ga.callback=Ss),xg(Ms,ga),Ig(Ms,Cs),Cs}function ck(ca){if(ca=ca.current,!ca.child)return null;switch(ca.child.tag){case 5:return ca.child.stateNode;default:return ca.child.stateNode}}function dk(ca,ga){ca=ca.memoizedState,ca!==null&&ca.dehydrated!==null&&ca.retryTime<ga&&(ca.retryTime=ga)}function ek(ca,ga){dk(ca,ga),(ca=ca.alternate)&&dk(ca,ga)}function fk(ca,ga,_s){_s=_s!=null&&_s.hydrate===!0;var Ss=new ak(ca,ga,_s),Ms=Sh(3,null,null,ga===2?7:ga===1?3:0);Ss.current=Ms,Ms.stateNode=Ss,ug(Ms),ca[Od]=Ss.current,_s&&ga!==0&&Jc(ca,ca.nodeType===9?ca:ca.ownerDocument),this._internalRoot=Ss}fk.prototype.render=function(ca){bk(ca,this._internalRoot,null,null)};fk.prototype.unmount=function(){var ca=this._internalRoot,ga=ca.containerInfo;bk(null,ca,null,function(){ga[Od]=null})};function gk(ca){return!(!ca||ca.nodeType!==1&&ca.nodeType!==9&&ca.nodeType!==11&&(ca.nodeType!==8||ca.nodeValue!==" react-mount-point-unstable "))}function hk(ca,ga){if(ga||(ga=ca?ca.nodeType===9?ca.documentElement:ca.firstChild:null,ga=!(!ga||ga.nodeType!==1||!ga.hasAttribute("data-reactroot"))),!ga)for(var _s;_s=ca.lastChild;)ca.removeChild(_s);return new fk(ca,0,ga?{hydrate:!0}:void 0)}function ik(ca,ga,_s,Ss,Ms){var Cs=_s._reactRootContainer;if(Cs){var Ts=Cs._internalRoot;if(typeof Ms=="function"){var Bs=Ms;Ms=function(){var Ls=ck(Ts);Bs.call(Ls)}}bk(ga,Ts,ca,Ms)}else{if(Cs=_s._reactRootContainer=hk(_s,Ss),Ts=Cs._internalRoot,typeof Ms=="function"){var Ps=Ms;Ms=function(){var Ls=ck(Ts);Ps.call(Ls)}}Nj(function(){bk(ga,Ts,ca,Ms)})}return ck(Ts)}function jk(ca,ga,_s){var Ss=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a,key:Ss==null?null:""+Ss,children:ca,containerInfo:ga,implementation:_s}}wc=function(ca){if(ca.tag===13){var ga=hg(Gg(),150,100);Ig(ca,ga),ek(ca,ga)}};xc=function(ca){ca.tag===13&&(Ig(ca,3),ek(ca,3))};yc=function(ca){if(ca.tag===13){var ga=Gg();ga=Hg(ga,ca,null),Ig(ca,ga),ek(ca,ga)}};za=function(ca,ga,_s){switch(ga){case"input":if(Cb(ca,_s),ga=_s.name,_s.type==="radio"&&ga!=null){for(_s=ca;_s.parentNode;)_s=_s.parentNode;for(_s=_s.querySelectorAll("input[name="+JSON.stringify(""+ga)+'][type="radio"]'),ga=0;ga<_s.length;ga++){var Ss=_s[ga];if(Ss!==ca&&Ss.form===ca.form){var Ms=Qd(Ss);if(!Ms)throw Error(u$3(90));yb(Ss),Cb(Ss,Ms)}}}break;case"textarea":Kb(ca,_s);break;case"select":ga=_s.value,ga!=null&&Hb(ca,!!_s.multiple,ga,!1)}};Fa=Mj;Ga=function(ca,ga,_s,Ss,Ms){var Cs=W$2;W$2|=4;try{return cg(98,ca.bind(null,ga,_s,Ss,Ms))}finally{W$2=Cs,W$2===V$2&&gg()}};Ha=function(){(W$2&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia=function(ca,ga){var _s=W$2;W$2|=2;try{return ca(ga)}finally{W$2=_s,W$2===V$2&&gg()}};function kk(ca,ga){var _s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk(ga))throw Error(u$3(200));return jk(ca,ga,null,_s)}var lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(ca){jc(ca,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};(function(ca){var ga=ca.findFiberByHostInstance;return Yj(n$4({},ca,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(_s){return _s=hc(_s),_s===null?null:_s.stateNode},findFiberByHostInstance:function(_s){return ga?ga(_s):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(ca){if(ca==null)return null;if(ca.nodeType===1)return ca;var ga=ca._reactInternalFiber;if(ga===void 0)throw typeof ca.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(ca)));return ca=hc(ga),ca=ca===null?null:ca.stateNode,ca};reactDom_production_min.flushSync=function(ca,ga){if((W$2&(fj|gj))!==V$2)throw Error(u$3(187));var _s=W$2;W$2|=1;try{return cg(99,ca.bind(null,ga))}finally{W$2=_s,gg()}};reactDom_production_min.hydrate=function(ca,ga,_s){if(!gk(ga))throw Error(u$3(200));return ik(null,ca,ga,!0,_s)};reactDom_production_min.render=function(ca,ga,_s){if(!gk(ga))throw Error(u$3(200));return ik(null,ca,ga,!1,_s)};reactDom_production_min.unmountComponentAtNode=function(ca){if(!gk(ca))throw Error(u$3(40));return ca._reactRootContainer?(Nj(function(){ik(null,null,ca,!1,function(){ca._reactRootContainer=null,ca[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(ca,ga){return kk(ca,ga,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ca,ga,_s,Ss){if(!gk(_s))throw Error(u$3(200));if(ca==null||ca._reactInternalFiber===void 0)throw Error(u$3(38));return ik(ca,ga,_s,!1,Ss)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ca){console.error(ca)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(ca){return typeof ca=="number"&&isFinite(ca)&&Math.floor(ca)===ca});Math.sign===void 0&&(Math.sign=function(ca){return ca<0?-1:ca>0?1:+ca});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(ca){if(ca==null)throw new TypeError("Cannot convert undefined or null to object");const ga=Object(ca);for(let _s=1;_s<arguments.length;_s++){const Ss=arguments[_s];if(Ss!=null)for(const Ms in Ss)Object.prototype.hasOwnProperty.call(Ss,Ms)&&(ga[Ms]=Ss[Ms])}return ga});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(ca,ga){this._listeners===void 0&&(this._listeners={});var _s=this._listeners;_s[ca]===void 0&&(_s[ca]=[]),_s[ca].indexOf(ga)===-1&&_s[ca].push(ga)},hasEventListener:function(ca,ga){if(this._listeners===void 0)return!1;var _s=this._listeners;return _s[ca]!==void 0&&_s[ca].indexOf(ga)!==-1},removeEventListener:function(ca,ga){if(this._listeners!==void 0){var _s=this._listeners,Ss=_s[ca];if(Ss!==void 0){var Ms=Ss.indexOf(ga);Ms!==-1&&Ss.splice(Ms,1)}}},dispatchEvent:function(ca){if(this._listeners!==void 0){var ga=this._listeners,_s=ga[ca.type];if(_s!==void 0){ca.target=this;for(var Ss=_s.slice(0),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].call(this,ca)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var ca=Math.random()*4294967295|0,ga=Math.random()*4294967295|0,_s=Math.random()*4294967295|0,Ss=Math.random()*4294967295|0,Ms=_lut[ca&255]+_lut[ca>>8&255]+_lut[ca>>16&255]+_lut[ca>>24&255]+"-"+_lut[ga&255]+_lut[ga>>8&255]+"-"+_lut[ga>>16&15|64]+_lut[ga>>24&255]+"-"+_lut[_s&63|128]+_lut[_s>>8&255]+"-"+_lut[_s>>16&255]+_lut[_s>>24&255]+_lut[Ss&255]+_lut[Ss>>8&255]+_lut[Ss>>16&255]+_lut[Ss>>24&255];return Ms.toUpperCase()},clamp:function(ca,ga,_s){return Math.max(ga,Math.min(_s,ca))},euclideanModulo:function(ca,ga){return(ca%ga+ga)%ga},mapLinear:function(ca,ga,_s,Ss,Ms){return Ss+(ca-ga)*(Ms-Ss)/(_s-ga)},lerp:function(ca,ga,_s){return(1-_s)*ca+_s*ga},smoothstep:function(ca,ga,_s){return ca<=ga?0:ca>=_s?1:(ca=(ca-ga)/(_s-ga),ca*ca*(3-2*ca))},smootherstep:function(ca,ga,_s){return ca<=ga?0:ca>=_s?1:(ca=(ca-ga)/(_s-ga),ca*ca*ca*(ca*(ca*6-15)+10))},randInt:function(ca,ga){return ca+Math.floor(Math.random()*(ga-ca+1))},randFloat:function(ca,ga){return ca+Math.random()*(ga-ca)},randFloatSpread:function(ca){return ca*(.5-Math.random())},degToRad:function(ca){return ca*MathUtils.DEG2RAD},radToDeg:function(ca){return ca*MathUtils.RAD2DEG},isPowerOfTwo:function(ca){return(ca&ca-1)==0&&ca!==0},ceilPowerOfTwo:function(ca){return Math.pow(2,Math.ceil(Math.log(ca)/Math.LN2))},floorPowerOfTwo:function(ca){return Math.pow(2,Math.floor(Math.log(ca)/Math.LN2))},setQuaternionFromProperEuler:function(ca,ga,_s,Ss,Ms){var Cs=Math.cos,Ts=Math.sin,Bs=Cs(_s/2),Ps=Ts(_s/2),Ls=Cs((ga+Ss)/2),Rs=Ts((ga+Ss)/2),Ds=Cs((ga-Ss)/2),$s=Ts((ga-Ss)/2),Fs=Cs((Ss-ga)/2),Gs=Ts((Ss-ga)/2);switch(Ms){case"XYX":ca.set(Bs*Rs,Ps*Ds,Ps*$s,Bs*Ls);break;case"YZY":ca.set(Ps*$s,Bs*Rs,Ps*Ds,Bs*Ls);break;case"ZXZ":ca.set(Ps*Ds,Ps*$s,Bs*Rs,Bs*Ls);break;case"XZX":ca.set(Bs*Rs,Ps*Gs,Ps*Fs,Bs*Ls);break;case"YXY":ca.set(Ps*Fs,Bs*Rs,Ps*Gs,Bs*Ls);break;case"ZYZ":ca.set(Ps*Gs,Ps*Fs,Bs*Rs,Bs*Ls);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Ms)}}};function Vector2(ca,ga){this.x=ca||0,this.y=ga||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(ca){this.x=ca}},height:{get:function(){return this.y},set:function(ca){this.y=ca}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(ca,ga){return this.x=ca,this.y=ga,this},setScalar:function(ca){return this.x=ca,this.y=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this},multiply:function(ca){return this.x*=ca.x,this.y*=ca.y,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},applyMatrix3:function(ca){var ga=this.x,_s=this.y,Ss=ca.elements;return this.x=Ss[0]*ga+Ss[3]*_s+Ss[6],this.y=Ss[1]*ga+Ss[4]*_s+Ss[7],this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(ca){return this.x*ca.x+this.y*ca.y},cross:function(ca){return this.x*ca.y-this.y*ca.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var ca=Math.atan2(-this.y,-this.x)+Math.PI;return ca},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,_s=this.y-ca.y;return ga*ga+_s*_s},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this},rotateAround:function(ca,ga){var _s=Math.cos(ga),Ss=Math.sin(ga),Ms=this.x-ca.x,Cs=this.y-ca.y;return this.x=Ms*_s-Cs*Ss+ca.x,this.y=Ms*Ss+Cs*_s+ca.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=this.elements;return Ls[0]=ca,Ls[1]=Ss,Ls[2]=Ts,Ls[3]=ga,Ls[4]=Ms,Ls[5]=Bs,Ls[6]=_s,Ls[7]=Cs,Ls[8]=Ps,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(ca){var ga=this.elements,_s=ca.elements;return ga[0]=_s[0],ga[1]=_s[1],ga[2]=_s[2],ga[3]=_s[3],ga[4]=_s[4],ga[5]=_s[5],ga[6]=_s[6],ga[7]=_s[7],ga[8]=_s[8],this},extractBasis:function(ca,ga,_s){return ca.setFromMatrix3Column(this,0),ga.setFromMatrix3Column(this,1),_s.setFromMatrix3Column(this,2),this},setFromMatrix4:function(ca){var ga=ca.elements;return this.set(ga[0],ga[4],ga[8],ga[1],ga[5],ga[9],ga[2],ga[6],ga[10]),this},multiply:function(ca){return this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var _s=ca.elements,Ss=ga.elements,Ms=this.elements,Cs=_s[0],Ts=_s[3],Bs=_s[6],Ps=_s[1],Ls=_s[4],Rs=_s[7],Ds=_s[2],$s=_s[5],Fs=_s[8],Gs=Ss[0],Vs=Ss[3],ks=Ss[6],Os=Ss[1],Ns=Ss[4],Us=Ss[7],Hs=Ss[2],zs=Ss[5],js=Ss[8];return Ms[0]=Cs*Gs+Ts*Os+Bs*Hs,Ms[3]=Cs*Vs+Ts*Ns+Bs*zs,Ms[6]=Cs*ks+Ts*Us+Bs*js,Ms[1]=Ps*Gs+Ls*Os+Rs*Hs,Ms[4]=Ps*Vs+Ls*Ns+Rs*zs,Ms[7]=Ps*ks+Ls*Us+Rs*js,Ms[2]=Ds*Gs+$s*Os+Fs*Hs,Ms[5]=Ds*Vs+$s*Ns+Fs*zs,Ms[8]=Ds*ks+$s*Us+Fs*js,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[3]*=ca,ga[6]*=ca,ga[1]*=ca,ga[4]*=ca,ga[7]*=ca,ga[2]*=ca,ga[5]*=ca,ga[8]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],_s=ca[1],Ss=ca[2],Ms=ca[3],Cs=ca[4],Ts=ca[5],Bs=ca[6],Ps=ca[7],Ls=ca[8];return ga*Cs*Ls-ga*Ts*Ps-_s*Ms*Ls+_s*Ts*Bs+Ss*Ms*Ps-Ss*Cs*Bs},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var _s=ca.elements,Ss=this.elements,Ms=_s[0],Cs=_s[1],Ts=_s[2],Bs=_s[3],Ps=_s[4],Ls=_s[5],Rs=_s[6],Ds=_s[7],$s=_s[8],Fs=$s*Ps-Ls*Ds,Gs=Ls*Rs-$s*Bs,Vs=Ds*Bs-Ps*Rs,ks=Ms*Fs+Cs*Gs+Ts*Vs;if(ks===0)return this.set(0,0,0,0,0,0,0,0,0);var Os=1/ks;return Ss[0]=Fs*Os,Ss[1]=(Ts*Ds-$s*Cs)*Os,Ss[2]=(Ls*Cs-Ts*Ps)*Os,Ss[3]=Gs*Os,Ss[4]=($s*Ms-Ts*Rs)*Os,Ss[5]=(Ts*Bs-Ls*Ms)*Os,Ss[6]=Vs*Os,Ss[7]=(Cs*Rs-Ds*Ms)*Os,Ss[8]=(Ps*Ms-Cs*Bs)*Os,this},transpose:function(){var ca,ga=this.elements;return ca=ga[1],ga[1]=ga[3],ga[3]=ca,ca=ga[2],ga[2]=ga[6],ga[6]=ca,ca=ga[5],ga[5]=ga[7],ga[7]=ca,this},getNormalMatrix:function(ca){return this.setFromMatrix4(ca).getInverse(this).transpose()},transposeIntoArray:function(ca){var ga=this.elements;return ca[0]=ga[0],ca[1]=ga[3],ca[2]=ga[6],ca[3]=ga[1],ca[4]=ga[4],ca[5]=ga[7],ca[6]=ga[2],ca[7]=ga[5],ca[8]=ga[8],this},setUvTransform:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Bs=Math.cos(Ms),Ps=Math.sin(Ms);this.set(_s*Bs,_s*Ps,-_s*(Bs*Cs+Ps*Ts)+Cs+ca,-Ss*Ps,Ss*Bs,-Ss*(-Ps*Cs+Bs*Ts)+Ts+ga,0,0,1)},scale:function(ca,ga){var _s=this.elements;return _s[0]*=ca,_s[3]*=ca,_s[6]*=ca,_s[1]*=ga,_s[4]*=ga,_s[7]*=ga,this},rotate:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca),Ss=this.elements,Ms=Ss[0],Cs=Ss[3],Ts=Ss[6],Bs=Ss[1],Ps=Ss[4],Ls=Ss[7];return Ss[0]=ga*Ms+_s*Bs,Ss[3]=ga*Cs+_s*Ps,Ss[6]=ga*Ts+_s*Ls,Ss[1]=-_s*Ms+ga*Bs,Ss[4]=-_s*Cs+ga*Ps,Ss[7]=-_s*Ts+ga*Ls,this},translate:function(ca,ga){var _s=this.elements;return _s[0]+=ca*_s[2],_s[3]+=ca*_s[5],_s[6]+=ca*_s[8],_s[1]+=ga*_s[2],_s[4]+=ga*_s[5],_s[7]+=ga*_s[8],this},equals:function(ca){for(var ga=this.elements,_s=ca.elements,Ss=0;Ss<9;Ss++)if(ga[Ss]!==_s[Ss])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=0;_s<9;_s++)this.elements[_s]=ca[_s+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var _s=this.elements;return ca[ga]=_s[0],ca[ga+1]=_s[1],ca[ga+2]=_s[2],ca[ga+3]=_s[3],ca[ga+4]=_s[4],ca[ga+5]=_s[5],ca[ga+6]=_s[6],ca[ga+7]=_s[7],ca[ga+8]=_s[8],ca}});var _canvas,ImageUtils={getDataURL:function(ca){var ga;if(typeof HTMLCanvasElement=="undefined")return ca.src;if(ca instanceof HTMLCanvasElement)ga=ca;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=ca.width,_canvas.height=ca.height;var _s=_canvas.getContext("2d");ca instanceof ImageData?_s.putImageData(ca,0,0):_s.drawImage(ca,0,0,ca.width,ca.height),ga=_canvas}return ga.width>2048||ga.height>2048?ga.toDataURL("image/jpeg",.6):ga.toDataURL("image/png")}},textureId=0;function Texture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=ca!==void 0?ca:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=ga!==void 0?ga:Texture.DEFAULT_MAPPING,this.wrapS=_s!==void 0?_s:ClampToEdgeWrapping,this.wrapT=Ss!==void 0?Ss:ClampToEdgeWrapping,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.minFilter=Cs!==void 0?Cs:LinearMipmapLinearFilter,this.anisotropy=Ps!==void 0?Ps:1,this.format=Ts!==void 0?Ts:RGBAFormat,this.internalFormat=null,this.type=Bs!==void 0?Bs:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Ls!==void 0?Ls:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.name=ca.name,this.image=ca.image,this.mipmaps=ca.mipmaps.slice(0),this.mapping=ca.mapping,this.wrapS=ca.wrapS,this.wrapT=ca.wrapT,this.magFilter=ca.magFilter,this.minFilter=ca.minFilter,this.anisotropy=ca.anisotropy,this.format=ca.format,this.internalFormat=ca.internalFormat,this.type=ca.type,this.offset.copy(ca.offset),this.repeat.copy(ca.repeat),this.center.copy(ca.center),this.rotation=ca.rotation,this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrix.copy(ca.matrix),this.generateMipmaps=ca.generateMipmaps,this.premultiplyAlpha=ca.premultiplyAlpha,this.flipY=ca.flipY,this.unpackAlignment=ca.unpackAlignment,this.encoding=ca.encoding,this},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";if(!ga&&ca.textures[this.uuid]!==void 0)return ca.textures[this.uuid];var _s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Ss=this.image;if(Ss.uuid===void 0&&(Ss.uuid=MathUtils.generateUUID()),!ga&&ca.images[Ss.uuid]===void 0){var Ms;if(Array.isArray(Ss)){Ms=[];for(var Cs=0,Ts=Ss.length;Cs<Ts;Cs++)Ms.push(ImageUtils.getDataURL(Ss[Cs]))}else Ms=ImageUtils.getDataURL(Ss);ca.images[Ss.uuid]={uuid:Ss.uuid,url:Ms}}_s.image=Ss.uuid}return ga||(ca.textures[this.uuid]=_s),_s},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(ca){if(this.mapping!==UVMapping)return ca;if(ca.applyMatrix3(this.matrix),ca.x<0||ca.x>1)switch(this.wrapS){case RepeatWrapping:ca.x=ca.x-Math.floor(ca.x);break;case ClampToEdgeWrapping:ca.x=ca.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.x)%2)===1?ca.x=Math.ceil(ca.x)-ca.x:ca.x=ca.x-Math.floor(ca.x);break}if(ca.y<0||ca.y>1)switch(this.wrapT){case RepeatWrapping:ca.y=ca.y-Math.floor(ca.y);break;case ClampToEdgeWrapping:ca.y=ca.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.y)%2)===1?ca.y=Math.ceil(ca.y)-ca.y:ca.y=ca.y-Math.floor(ca.y);break}return this.flipY&&(ca.y=1-ca.y),ca}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function Vector4(ca,ga,_s,Ss){this.x=ca||0,this.y=ga||0,this.z=_s||0,this.w=Ss!==void 0?Ss:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(ca){this.z=ca}},height:{get:function(){return this.w},set:function(ca){this.w=ca}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(ca,ga,_s,Ss){return this.x=ca,this.y=ga,this.z=_s,this.w=Ss,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this.w=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setW:function(ca){return this.w=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;case 3:this.w=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this.w=ca.w!==void 0?ca.w:1,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this.w+=ca.w,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this.w+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this.w=ca.w+ga.w,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this.w+=ca.w*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this.w-=ca.w,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this.w-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this.w=ca.w-ga.w,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this.w*=ca,this},applyMatrix4:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=this.w,Cs=ca.elements;return this.x=Cs[0]*ga+Cs[4]*_s+Cs[8]*Ss+Cs[12]*Ms,this.y=Cs[1]*ga+Cs[5]*_s+Cs[9]*Ss+Cs[13]*Ms,this.z=Cs[2]*ga+Cs[6]*_s+Cs[10]*Ss+Cs[14]*Ms,this.w=Cs[3]*ga+Cs[7]*_s+Cs[11]*Ss+Cs[15]*Ms,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},setAxisAngleFromQuaternion:function(ca){this.w=2*Math.acos(ca.w);var ga=Math.sqrt(1-ca.w*ca.w);return ga<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ca.x/ga,this.y=ca.y/ga,this.z=ca.z/ga),this},setAxisAngleFromRotationMatrix:function(ca){var ga,_s,Ss,Ms,Cs=.01,Ts=.1,Bs=ca.elements,Ps=Bs[0],Ls=Bs[4],Rs=Bs[8],Ds=Bs[1],$s=Bs[5],Fs=Bs[9],Gs=Bs[2],Vs=Bs[6],ks=Bs[10];if(Math.abs(Ls-Ds)<Cs&&Math.abs(Rs-Gs)<Cs&&Math.abs(Fs-Vs)<Cs){if(Math.abs(Ls+Ds)<Ts&&Math.abs(Rs+Gs)<Ts&&Math.abs(Fs+Vs)<Ts&&Math.abs(Ps+$s+ks-3)<Ts)return this.set(1,0,0,0),this;ga=Math.PI;var Os=(Ps+1)/2,Ns=($s+1)/2,Us=(ks+1)/2,Hs=(Ls+Ds)/4,zs=(Rs+Gs)/4,js=(Fs+Vs)/4;return Os>Ns&&Os>Us?Os<Cs?(_s=0,Ss=.707106781,Ms=.707106781):(_s=Math.sqrt(Os),Ss=Hs/_s,Ms=zs/_s):Ns>Us?Ns<Cs?(_s=.707106781,Ss=0,Ms=.707106781):(Ss=Math.sqrt(Ns),_s=Hs/Ss,Ms=js/Ss):Us<Cs?(_s=.707106781,Ss=.707106781,Ms=0):(Ms=Math.sqrt(Us),_s=zs/Ms,Ss=js/Ms),this.set(_s,Ss,Ms,ga),this}var Ws=Math.sqrt((Vs-Fs)*(Vs-Fs)+(Rs-Gs)*(Rs-Gs)+(Ds-Ls)*(Ds-Ls));return Math.abs(Ws)<.001&&(Ws=1),this.x=(Vs-Fs)/Ws,this.y=(Rs-Gs)/Ws,this.z=(Ds-Ls)/Ws,this.w=Math.acos((Ps+$s+ks-1)/2),this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this.w=Math.min(this.w,ca.w),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this.w=Math.max(this.w,ca.w),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this.w=Math.max(ca.w,Math.min(ga.w,this.w)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this.w=Math.max(ca,Math.min(ga,this.w)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z+this.w*ca.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this.w+=(ca.w-this.w)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this.z=ca.z+(ga.z-ca.z)*_s,this.w=ca.w+(ga.w-ca.w)*_s,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z&&ca.w===this.w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this.w=ca[ga+3],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca[ga+3]=this.w,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this.w=ca.getW(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(ca,ga,_s){this.width=ca,this.height=ga,this.scissor=new Vector4(0,0,ca,ga),this.scissorTest=!1,this.viewport=new Vector4(0,0,ca,ga),_s=_s||{},this.texture=new Texture(void 0,_s.mapping,_s.wrapS,_s.wrapT,_s.magFilter,_s.minFilter,_s.format,_s.type,_s.anisotropy,_s.encoding),this.texture.image={},this.texture.image.width=ca,this.texture.image.height=ga,this.texture.generateMipmaps=_s.generateMipmaps!==void 0?_s.generateMipmaps:!1,this.texture.minFilter=_s.minFilter!==void 0?_s.minFilter:LinearFilter,this.depthBuffer=_s.depthBuffer!==void 0?_s.depthBuffer:!0,this.stencilBuffer=_s.stencilBuffer!==void 0?_s.stencilBuffer:!0,this.depthTexture=_s.depthTexture!==void 0?_s.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(ca,ga){(this.width!==ca||this.height!==ga)&&(this.width=ca,this.height=ga,this.texture.image.width=ca,this.texture.image.height=ga,this.dispose()),this.viewport.set(0,0,ca,ga),this.scissor.set(0,0,ca,ga)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.width=ca.width,this.height=ca.height,this.viewport.copy(ca.viewport),this.texture=ca.texture.clone(),this.depthBuffer=ca.depthBuffer,this.stencilBuffer=ca.stencilBuffer,this.depthTexture=ca.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(ca,ga,_s){WebGLRenderTarget.call(this,ca,ga,_s),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(ca){return WebGLRenderTarget.prototype.copy.call(this,ca),this.samples=ca.samples,this}});function Quaternion(ca,ga,_s,Ss){this._x=ca||0,this._y=ga||0,this._z=_s||0,this._w=Ss!==void 0?Ss:1}Object.assign(Quaternion,{slerp:function(ca,ga,_s,Ss){return _s.copy(ca).slerp(ga,Ss)},slerpFlat:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Bs=_s[Ss+0],Ps=_s[Ss+1],Ls=_s[Ss+2],Rs=_s[Ss+3],Ds=Ms[Cs+0],$s=Ms[Cs+1],Fs=Ms[Cs+2],Gs=Ms[Cs+3];if(Rs!==Gs||Bs!==Ds||Ps!==$s||Ls!==Fs){var Vs=1-Ts,ks=Bs*Ds+Ps*$s+Ls*Fs+Rs*Gs,Os=ks>=0?1:-1,Ns=1-ks*ks;if(Ns>Number.EPSILON){var Us=Math.sqrt(Ns),Hs=Math.atan2(Us,ks*Os);Vs=Math.sin(Vs*Hs)/Us,Ts=Math.sin(Ts*Hs)/Us}var zs=Ts*Os;if(Bs=Bs*Vs+Ds*zs,Ps=Ps*Vs+$s*zs,Ls=Ls*Vs+Fs*zs,Rs=Rs*Vs+Gs*zs,Vs===1-Ts){var js=1/Math.sqrt(Bs*Bs+Ps*Ps+Ls*Ls+Rs*Rs);Bs*=js,Ps*=js,Ls*=js,Rs*=js}}ca[ga]=Bs,ca[ga+1]=Ps,ca[ga+2]=Ls,ca[ga+3]=Rs},multiplyQuaternionsFlat:function(ca,ga,_s,Ss,Ms,Cs){var Ts=_s[Ss],Bs=_s[Ss+1],Ps=_s[Ss+2],Ls=_s[Ss+3],Rs=Ms[Cs],Ds=Ms[Cs+1],$s=Ms[Cs+2],Fs=Ms[Cs+3];return ca[ga]=Ts*Fs+Ls*Rs+Bs*$s-Ps*Ds,ca[ga+1]=Bs*Fs+Ls*Ds+Ps*Rs-Ts*$s,ca[ga+2]=Ps*Fs+Ls*$s+Ts*Ds-Bs*Rs,ca[ga+3]=Ls*Fs-Ts*Rs-Bs*Ds-Ps*$s,ca}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(ca){this._w=ca,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(ca,ga,_s,Ss){return this._x=ca,this._y=ga,this._z=_s,this._w=Ss,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(ca){return this._x=ca.x,this._y=ca.y,this._z=ca.z,this._w=ca.w,this._onChangeCallback(),this},setFromEuler:function(ca,ga){if(!(ca&&ca.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var _s=ca._x,Ss=ca._y,Ms=ca._z,Cs=ca.order,Ts=Math.cos,Bs=Math.sin,Ps=Ts(_s/2),Ls=Ts(Ss/2),Rs=Ts(Ms/2),Ds=Bs(_s/2),$s=Bs(Ss/2),Fs=Bs(Ms/2);switch(Cs){case"XYZ":this._x=Ds*Ls*Rs+Ps*$s*Fs,this._y=Ps*$s*Rs-Ds*Ls*Fs,this._z=Ps*Ls*Fs+Ds*$s*Rs,this._w=Ps*Ls*Rs-Ds*$s*Fs;break;case"YXZ":this._x=Ds*Ls*Rs+Ps*$s*Fs,this._y=Ps*$s*Rs-Ds*Ls*Fs,this._z=Ps*Ls*Fs-Ds*$s*Rs,this._w=Ps*Ls*Rs+Ds*$s*Fs;break;case"ZXY":this._x=Ds*Ls*Rs-Ps*$s*Fs,this._y=Ps*$s*Rs+Ds*Ls*Fs,this._z=Ps*Ls*Fs+Ds*$s*Rs,this._w=Ps*Ls*Rs-Ds*$s*Fs;break;case"ZYX":this._x=Ds*Ls*Rs-Ps*$s*Fs,this._y=Ps*$s*Rs+Ds*Ls*Fs,this._z=Ps*Ls*Fs-Ds*$s*Rs,this._w=Ps*Ls*Rs+Ds*$s*Fs;break;case"YZX":this._x=Ds*Ls*Rs+Ps*$s*Fs,this._y=Ps*$s*Rs+Ds*Ls*Fs,this._z=Ps*Ls*Fs-Ds*$s*Rs,this._w=Ps*Ls*Rs-Ds*$s*Fs;break;case"XZY":this._x=Ds*Ls*Rs-Ps*$s*Fs,this._y=Ps*$s*Rs-Ds*Ls*Fs,this._z=Ps*Ls*Fs+Ds*$s*Rs,this._w=Ps*Ls*Rs+Ds*$s*Fs;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Cs)}return ga!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(ca,ga){var _s=ga/2,Ss=Math.sin(_s);return this._x=ca.x*Ss,this._y=ca.y*Ss,this._z=ca.z*Ss,this._w=Math.cos(_s),this._onChangeCallback(),this},setFromRotationMatrix:function(ca){var ga=ca.elements,_s=ga[0],Ss=ga[4],Ms=ga[8],Cs=ga[1],Ts=ga[5],Bs=ga[9],Ps=ga[2],Ls=ga[6],Rs=ga[10],Ds=_s+Ts+Rs,$s;return Ds>0?($s=.5/Math.sqrt(Ds+1),this._w=.25/$s,this._x=(Ls-Bs)*$s,this._y=(Ms-Ps)*$s,this._z=(Cs-Ss)*$s):_s>Ts&&_s>Rs?($s=2*Math.sqrt(1+_s-Ts-Rs),this._w=(Ls-Bs)/$s,this._x=.25*$s,this._y=(Ss+Cs)/$s,this._z=(Ms+Ps)/$s):Ts>Rs?($s=2*Math.sqrt(1+Ts-_s-Rs),this._w=(Ms-Ps)/$s,this._x=(Ss+Cs)/$s,this._y=.25*$s,this._z=(Bs+Ls)/$s):($s=2*Math.sqrt(1+Rs-_s-Ts),this._w=(Cs-Ss)/$s,this._x=(Ms+Ps)/$s,this._y=(Bs+Ls)/$s,this._z=.25*$s),this._onChangeCallback(),this},setFromUnitVectors:function(ca,ga){var _s=1e-6,Ss=ca.dot(ga)+1;return Ss<_s?(Ss=0,Math.abs(ca.x)>Math.abs(ca.z)?(this._x=-ca.y,this._y=ca.x,this._z=0,this._w=Ss):(this._x=0,this._y=-ca.z,this._z=ca.y,this._w=Ss)):(this._x=ca.y*ga.z-ca.z*ga.y,this._y=ca.z*ga.x-ca.x*ga.z,this._z=ca.x*ga.y-ca.y*ga.x,this._w=Ss),this.normalize()},angleTo:function(ca){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(ca),-1,1)))},rotateTowards:function(ca,ga){var _s=this.angleTo(ca);if(_s===0)return this;var Ss=Math.min(1,ga/_s);return this.slerp(ca,Ss),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(ca){return this._x*ca._x+this._y*ca._y+this._z*ca._z+this._w*ca._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var ca=this.length();return ca===0?(this._x=0,this._y=0,this._z=0,this._w=1):(ca=1/ca,this._x=this._x*ca,this._y=this._y*ca,this._z=this._z*ca,this._w=this._w*ca),this._onChangeCallback(),this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(ca,ga)):this.multiplyQuaternions(this,ca)},premultiply:function(ca){return this.multiplyQuaternions(ca,this)},multiplyQuaternions:function(ca,ga){var _s=ca._x,Ss=ca._y,Ms=ca._z,Cs=ca._w,Ts=ga._x,Bs=ga._y,Ps=ga._z,Ls=ga._w;return this._x=_s*Ls+Cs*Ts+Ss*Ps-Ms*Bs,this._y=Ss*Ls+Cs*Bs+Ms*Ts-_s*Ps,this._z=Ms*Ls+Cs*Ps+_s*Bs-Ss*Ts,this._w=Cs*Ls-_s*Ts-Ss*Bs-Ms*Ps,this._onChangeCallback(),this},slerp:function(ca,ga){if(ga===0)return this;if(ga===1)return this.copy(ca);var _s=this._x,Ss=this._y,Ms=this._z,Cs=this._w,Ts=Cs*ca._w+_s*ca._x+Ss*ca._y+Ms*ca._z;if(Ts<0?(this._w=-ca._w,this._x=-ca._x,this._y=-ca._y,this._z=-ca._z,Ts=-Ts):this.copy(ca),Ts>=1)return this._w=Cs,this._x=_s,this._y=Ss,this._z=Ms,this;var Bs=1-Ts*Ts;if(Bs<=Number.EPSILON){var Ps=1-ga;return this._w=Ps*Cs+ga*this._w,this._x=Ps*_s+ga*this._x,this._y=Ps*Ss+ga*this._y,this._z=Ps*Ms+ga*this._z,this.normalize(),this._onChangeCallback(),this}var Ls=Math.sqrt(Bs),Rs=Math.atan2(Ls,Ts),Ds=Math.sin((1-ga)*Rs)/Ls,$s=Math.sin(ga*Rs)/Ls;return this._w=Cs*Ds+this._w*$s,this._x=_s*Ds+this._x*$s,this._y=Ss*Ds+this._y*$s,this._z=Ms*Ds+this._z*$s,this._onChangeCallback(),this},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._w===this._w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this._x=ca[ga],this._y=ca[ga+1],this._z=ca[ga+2],this._w=ca[ga+3],this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._w,ca},fromBufferAttribute:function(ca,ga){return this._x=ca.getX(ga),this._y=ca.getY(ga),this._z=ca.getZ(ga),this._w=ca.getW(ga),this},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(ca,ga,_s){this.x=ca||0,this.y=ga||0,this.z=_s||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(ca,ga,_s){return this.x=ca,this.y=ga,this.z=_s,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(ca,ga)):(this.x*=ca.x,this.y*=ca.y,this.z*=ca.z,this)},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this},multiplyVectors:function(ca,ga){return this.x=ca.x*ga.x,this.y=ca.y*ga.y,this.z=ca.z*ga.z,this},applyEuler:function(ca){return ca&&ca.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(ca))},applyAxisAngle:function(ca,ga){return this.applyQuaternion(_quaternion.setFromAxisAngle(ca,ga))},applyMatrix3:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements;return this.x=Ms[0]*ga+Ms[3]*_s+Ms[6]*Ss,this.y=Ms[1]*ga+Ms[4]*_s+Ms[7]*Ss,this.z=Ms[2]*ga+Ms[5]*_s+Ms[8]*Ss,this},applyNormalMatrix:function(ca){return this.applyMatrix3(ca).normalize()},applyMatrix4:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements,Cs=1/(Ms[3]*ga+Ms[7]*_s+Ms[11]*Ss+Ms[15]);return this.x=(Ms[0]*ga+Ms[4]*_s+Ms[8]*Ss+Ms[12])*Cs,this.y=(Ms[1]*ga+Ms[5]*_s+Ms[9]*Ss+Ms[13])*Cs,this.z=(Ms[2]*ga+Ms[6]*_s+Ms[10]*Ss+Ms[14])*Cs,this},applyQuaternion:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.x,Cs=ca.y,Ts=ca.z,Bs=ca.w,Ps=Bs*ga+Cs*Ss-Ts*_s,Ls=Bs*_s+Ts*ga-Ms*Ss,Rs=Bs*Ss+Ms*_s-Cs*ga,Ds=-Ms*ga-Cs*_s-Ts*Ss;return this.x=Ps*Bs+Ds*-Ms+Ls*-Ts-Rs*-Cs,this.y=Ls*Bs+Ds*-Cs+Rs*-Ms-Ps*-Ts,this.z=Rs*Bs+Ds*-Ts+Ps*-Cs-Ls*-Ms,this},project:function(ca){return this.applyMatrix4(ca.matrixWorldInverse).applyMatrix4(ca.projectionMatrix)},unproject:function(ca){return this.applyMatrix4(ca.projectionMatrixInverse).applyMatrix4(ca.matrixWorld)},transformDirection:function(ca){var ga=this.x,_s=this.y,Ss=this.z,Ms=ca.elements;return this.x=Ms[0]*ga+Ms[4]*_s+Ms[8]*Ss,this.y=Ms[1]*ga+Ms[5]*_s+Ms[9]*Ss,this.z=Ms[2]*ga+Ms[6]*_s+Ms[10]*Ss,this.normalize()},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this.z/=ca.z,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this},clampLength:function(ca,ga){var _s=this.length();return this.divideScalar(_s||1).multiplyScalar(Math.max(ca,Math.min(ga,_s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this},lerpVectors:function(ca,ga,_s){return this.x=ca.x+(ga.x-ca.x)*_s,this.y=ca.y+(ga.y-ca.y)*_s,this.z=ca.z+(ga.z-ca.z)*_s,this},cross:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(ca,ga)):this.crossVectors(this,ca)},crossVectors:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=ga.x,Ts=ga.y,Bs=ga.z;return this.x=Ss*Bs-Ms*Ts,this.y=Ms*Cs-_s*Bs,this.z=_s*Ts-Ss*Cs,this},projectOnVector:function(ca){var ga=ca.lengthSq();if(ga===0)return this.set(0,0,0);var _s=ca.dot(this)/ga;return this.copy(ca).multiplyScalar(_s)},projectOnPlane:function(ca){return _vector.copy(this).projectOnVector(ca),this.sub(_vector)},reflect:function(ca){return this.sub(_vector.copy(ca).multiplyScalar(2*this.dot(ca)))},angleTo:function(ca){var ga=Math.sqrt(this.lengthSq()*ca.lengthSq());if(ga===0)return Math.PI/2;var _s=this.dot(ca)/ga;return Math.acos(MathUtils.clamp(_s,-1,1))},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,_s=this.y-ca.y,Ss=this.z-ca.z;return ga*ga+_s*_s+Ss*Ss},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)+Math.abs(this.z-ca.z)},setFromSpherical:function(ca){return this.setFromSphericalCoords(ca.radius,ca.phi,ca.theta)},setFromSphericalCoords:function(ca,ga,_s){var Ss=Math.sin(ga)*ca;return this.x=Ss*Math.sin(_s),this.y=Math.cos(ga)*ca,this.z=Ss*Math.cos(_s),this},setFromCylindrical:function(ca){return this.setFromCylindricalCoords(ca.radius,ca.theta,ca.y)},setFromCylindricalCoords:function(ca,ga,_s){return this.x=ca*Math.sin(ga),this.y=_s,this.z=ca*Math.cos(ga),this},setFromMatrixPosition:function(ca){var ga=ca.elements;return this.x=ga[12],this.y=ga[13],this.z=ga[14],this},setFromMatrixScale:function(ca){var ga=this.setFromMatrixColumn(ca,0).length(),_s=this.setFromMatrixColumn(ca,1).length(),Ss=this.setFromMatrixColumn(ca,2).length();return this.x=ga,this.y=_s,this.z=Ss,this},setFromMatrixColumn:function(ca,ga){return this.fromArray(ca.elements,ga*4)},setFromMatrix3Column:function(ca,ga){return this.fromArray(ca.elements,ga*3)},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca},fromBufferAttribute:function(ca,ga,_s){return _s!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s,Fs,Gs,Vs){var ks=this.elements;return ks[0]=ca,ks[4]=ga,ks[8]=_s,ks[12]=Ss,ks[1]=Ms,ks[5]=Cs,ks[9]=Ts,ks[13]=Bs,ks[2]=Ps,ks[6]=Ls,ks[10]=Rs,ks[14]=Ds,ks[3]=$s,ks[7]=Fs,ks[11]=Gs,ks[15]=Vs,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(ca){var ga=this.elements,_s=ca.elements;return ga[0]=_s[0],ga[1]=_s[1],ga[2]=_s[2],ga[3]=_s[3],ga[4]=_s[4],ga[5]=_s[5],ga[6]=_s[6],ga[7]=_s[7],ga[8]=_s[8],ga[9]=_s[9],ga[10]=_s[10],ga[11]=_s[11],ga[12]=_s[12],ga[13]=_s[13],ga[14]=_s[14],ga[15]=_s[15],this},copyPosition:function(ca){var ga=this.elements,_s=ca.elements;return ga[12]=_s[12],ga[13]=_s[13],ga[14]=_s[14],this},extractBasis:function(ca,ga,_s){return ca.setFromMatrixColumn(this,0),ga.setFromMatrixColumn(this,1),_s.setFromMatrixColumn(this,2),this},makeBasis:function(ca,ga,_s){return this.set(ca.x,ga.x,_s.x,0,ca.y,ga.y,_s.y,0,ca.z,ga.z,_s.z,0,0,0,0,1),this},extractRotation:function(ca){var ga=this.elements,_s=ca.elements,Ss=1/_v1.setFromMatrixColumn(ca,0).length(),Ms=1/_v1.setFromMatrixColumn(ca,1).length(),Cs=1/_v1.setFromMatrixColumn(ca,2).length();return ga[0]=_s[0]*Ss,ga[1]=_s[1]*Ss,ga[2]=_s[2]*Ss,ga[3]=0,ga[4]=_s[4]*Ms,ga[5]=_s[5]*Ms,ga[6]=_s[6]*Ms,ga[7]=0,ga[8]=_s[8]*Cs,ga[9]=_s[9]*Cs,ga[10]=_s[10]*Cs,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromEuler:function(ca){ca&&ca.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var ga=this.elements,_s=ca.x,Ss=ca.y,Ms=ca.z,Cs=Math.cos(_s),Ts=Math.sin(_s),Bs=Math.cos(Ss),Ps=Math.sin(Ss),Ls=Math.cos(Ms),Rs=Math.sin(Ms);if(ca.order==="XYZ"){var Ds=Cs*Ls,$s=Cs*Rs,Fs=Ts*Ls,Gs=Ts*Rs;ga[0]=Bs*Ls,ga[4]=-Bs*Rs,ga[8]=Ps,ga[1]=$s+Fs*Ps,ga[5]=Ds-Gs*Ps,ga[9]=-Ts*Bs,ga[2]=Gs-Ds*Ps,ga[6]=Fs+$s*Ps,ga[10]=Cs*Bs}else if(ca.order==="YXZ"){var Vs=Bs*Ls,ks=Bs*Rs,Os=Ps*Ls,Ns=Ps*Rs;ga[0]=Vs+Ns*Ts,ga[4]=Os*Ts-ks,ga[8]=Cs*Ps,ga[1]=Cs*Rs,ga[5]=Cs*Ls,ga[9]=-Ts,ga[2]=ks*Ts-Os,ga[6]=Ns+Vs*Ts,ga[10]=Cs*Bs}else if(ca.order==="ZXY"){var Vs=Bs*Ls,ks=Bs*Rs,Os=Ps*Ls,Ns=Ps*Rs;ga[0]=Vs-Ns*Ts,ga[4]=-Cs*Rs,ga[8]=Os+ks*Ts,ga[1]=ks+Os*Ts,ga[5]=Cs*Ls,ga[9]=Ns-Vs*Ts,ga[2]=-Cs*Ps,ga[6]=Ts,ga[10]=Cs*Bs}else if(ca.order==="ZYX"){var Ds=Cs*Ls,$s=Cs*Rs,Fs=Ts*Ls,Gs=Ts*Rs;ga[0]=Bs*Ls,ga[4]=Fs*Ps-$s,ga[8]=Ds*Ps+Gs,ga[1]=Bs*Rs,ga[5]=Gs*Ps+Ds,ga[9]=$s*Ps-Fs,ga[2]=-Ps,ga[6]=Ts*Bs,ga[10]=Cs*Bs}else if(ca.order==="YZX"){var Us=Cs*Bs,Hs=Cs*Ps,zs=Ts*Bs,js=Ts*Ps;ga[0]=Bs*Ls,ga[4]=js-Us*Rs,ga[8]=zs*Rs+Hs,ga[1]=Rs,ga[5]=Cs*Ls,ga[9]=-Ts*Ls,ga[2]=-Ps*Ls,ga[6]=Hs*Rs+zs,ga[10]=Us-js*Rs}else if(ca.order==="XZY"){var Us=Cs*Bs,Hs=Cs*Ps,zs=Ts*Bs,js=Ts*Ps;ga[0]=Bs*Ls,ga[4]=-Rs,ga[8]=Ps*Ls,ga[1]=Us*Rs+js,ga[5]=Cs*Ls,ga[9]=Hs*Rs-zs,ga[2]=zs*Rs-Hs,ga[6]=Ts*Ls,ga[10]=js*Rs+Us}return ga[3]=0,ga[7]=0,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromQuaternion:function(ca){return this.compose(_zero,ca,_one)},lookAt:function(ca,ga,_s){var Ss=this.elements;return _z.subVectors(ca,ga),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(_s,_z),_x.lengthSq()===0&&(Math.abs(_s.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(_s,_z)),_x.normalize(),_y.crossVectors(_z,_x),Ss[0]=_x.x,Ss[4]=_y.x,Ss[8]=_z.x,Ss[1]=_x.y,Ss[5]=_y.y,Ss[9]=_z.y,Ss[2]=_x.z,Ss[6]=_y.z,Ss[10]=_z.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(ca,ga)):this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var _s=ca.elements,Ss=ga.elements,Ms=this.elements,Cs=_s[0],Ts=_s[4],Bs=_s[8],Ps=_s[12],Ls=_s[1],Rs=_s[5],Ds=_s[9],$s=_s[13],Fs=_s[2],Gs=_s[6],Vs=_s[10],ks=_s[14],Os=_s[3],Ns=_s[7],Us=_s[11],Hs=_s[15],zs=Ss[0],js=Ss[4],Ws=Ss[8],Qs=Ss[12],qs=Ss[1],tu=Ss[5],Ys=Ss[9],Ks=Ss[13],Js=Ss[2],eu=Ss[6],Zs=Ss[10],au=Ss[14],ru=Ss[3],su=Ss[7],lu=Ss[11],gu=Ss[15];return Ms[0]=Cs*zs+Ts*qs+Bs*Js+Ps*ru,Ms[4]=Cs*js+Ts*tu+Bs*eu+Ps*su,Ms[8]=Cs*Ws+Ts*Ys+Bs*Zs+Ps*lu,Ms[12]=Cs*Qs+Ts*Ks+Bs*au+Ps*gu,Ms[1]=Ls*zs+Rs*qs+Ds*Js+$s*ru,Ms[5]=Ls*js+Rs*tu+Ds*eu+$s*su,Ms[9]=Ls*Ws+Rs*Ys+Ds*Zs+$s*lu,Ms[13]=Ls*Qs+Rs*Ks+Ds*au+$s*gu,Ms[2]=Fs*zs+Gs*qs+Vs*Js+ks*ru,Ms[6]=Fs*js+Gs*tu+Vs*eu+ks*su,Ms[10]=Fs*Ws+Gs*Ys+Vs*Zs+ks*lu,Ms[14]=Fs*Qs+Gs*Ks+Vs*au+ks*gu,Ms[3]=Os*zs+Ns*qs+Us*Js+Hs*ru,Ms[7]=Os*js+Ns*tu+Us*eu+Hs*su,Ms[11]=Os*Ws+Ns*Ys+Us*Zs+Hs*lu,Ms[15]=Os*Qs+Ns*Ks+Us*au+Hs*gu,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[4]*=ca,ga[8]*=ca,ga[12]*=ca,ga[1]*=ca,ga[5]*=ca,ga[9]*=ca,ga[13]*=ca,ga[2]*=ca,ga[6]*=ca,ga[10]*=ca,ga[14]*=ca,ga[3]*=ca,ga[7]*=ca,ga[11]*=ca,ga[15]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],_s=ca[4],Ss=ca[8],Ms=ca[12],Cs=ca[1],Ts=ca[5],Bs=ca[9],Ps=ca[13],Ls=ca[2],Rs=ca[6],Ds=ca[10],$s=ca[14],Fs=ca[3],Gs=ca[7],Vs=ca[11],ks=ca[15];return Fs*(+Ms*Bs*Rs-Ss*Ps*Rs-Ms*Ts*Ds+_s*Ps*Ds+Ss*Ts*$s-_s*Bs*$s)+Gs*(+ga*Bs*$s-ga*Ps*Ds+Ms*Cs*Ds-Ss*Cs*$s+Ss*Ps*Ls-Ms*Bs*Ls)+Vs*(+ga*Ps*Rs-ga*Ts*$s-Ms*Cs*Rs+_s*Cs*$s+Ms*Ts*Ls-_s*Ps*Ls)+ks*(-Ss*Ts*Ls-ga*Bs*Rs+ga*Ts*Ds+Ss*Cs*Rs-_s*Cs*Ds+_s*Bs*Ls)},transpose:function(){var ca=this.elements,ga;return ga=ca[1],ca[1]=ca[4],ca[4]=ga,ga=ca[2],ca[2]=ca[8],ca[8]=ga,ga=ca[6],ca[6]=ca[9],ca[9]=ga,ga=ca[3],ca[3]=ca[12],ca[12]=ga,ga=ca[7],ca[7]=ca[13],ca[13]=ga,ga=ca[11],ca[11]=ca[14],ca[14]=ga,this},setPosition:function(ca,ga,_s){var Ss=this.elements;return ca.isVector3?(Ss[12]=ca.x,Ss[13]=ca.y,Ss[14]=ca.z):(Ss[12]=ca,Ss[13]=ga,Ss[14]=_s),this},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var _s=this.elements,Ss=ca.elements,Ms=Ss[0],Cs=Ss[1],Ts=Ss[2],Bs=Ss[3],Ps=Ss[4],Ls=Ss[5],Rs=Ss[6],Ds=Ss[7],$s=Ss[8],Fs=Ss[9],Gs=Ss[10],Vs=Ss[11],ks=Ss[12],Os=Ss[13],Ns=Ss[14],Us=Ss[15],Hs=Fs*Ns*Ds-Os*Gs*Ds+Os*Rs*Vs-Ls*Ns*Vs-Fs*Rs*Us+Ls*Gs*Us,zs=ks*Gs*Ds-$s*Ns*Ds-ks*Rs*Vs+Ps*Ns*Vs+$s*Rs*Us-Ps*Gs*Us,js=$s*Os*Ds-ks*Fs*Ds+ks*Ls*Vs-Ps*Os*Vs-$s*Ls*Us+Ps*Fs*Us,Ws=ks*Fs*Rs-$s*Os*Rs-ks*Ls*Gs+Ps*Os*Gs+$s*Ls*Ns-Ps*Fs*Ns,Qs=Ms*Hs+Cs*zs+Ts*js+Bs*Ws;if(Qs===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var qs=1/Qs;return _s[0]=Hs*qs,_s[1]=(Os*Gs*Bs-Fs*Ns*Bs-Os*Ts*Vs+Cs*Ns*Vs+Fs*Ts*Us-Cs*Gs*Us)*qs,_s[2]=(Ls*Ns*Bs-Os*Rs*Bs+Os*Ts*Ds-Cs*Ns*Ds-Ls*Ts*Us+Cs*Rs*Us)*qs,_s[3]=(Fs*Rs*Bs-Ls*Gs*Bs-Fs*Ts*Ds+Cs*Gs*Ds+Ls*Ts*Vs-Cs*Rs*Vs)*qs,_s[4]=zs*qs,_s[5]=($s*Ns*Bs-ks*Gs*Bs+ks*Ts*Vs-Ms*Ns*Vs-$s*Ts*Us+Ms*Gs*Us)*qs,_s[6]=(ks*Rs*Bs-Ps*Ns*Bs-ks*Ts*Ds+Ms*Ns*Ds+Ps*Ts*Us-Ms*Rs*Us)*qs,_s[7]=(Ps*Gs*Bs-$s*Rs*Bs+$s*Ts*Ds-Ms*Gs*Ds-Ps*Ts*Vs+Ms*Rs*Vs)*qs,_s[8]=js*qs,_s[9]=(ks*Fs*Bs-$s*Os*Bs-ks*Cs*Vs+Ms*Os*Vs+$s*Cs*Us-Ms*Fs*Us)*qs,_s[10]=(Ps*Os*Bs-ks*Ls*Bs+ks*Cs*Ds-Ms*Os*Ds-Ps*Cs*Us+Ms*Ls*Us)*qs,_s[11]=($s*Ls*Bs-Ps*Fs*Bs-$s*Cs*Ds+Ms*Fs*Ds+Ps*Cs*Vs-Ms*Ls*Vs)*qs,_s[12]=Ws*qs,_s[13]=($s*Os*Ts-ks*Fs*Ts+ks*Cs*Gs-Ms*Os*Gs-$s*Cs*Ns+Ms*Fs*Ns)*qs,_s[14]=(ks*Ls*Ts-Ps*Os*Ts-ks*Cs*Rs+Ms*Os*Rs+Ps*Cs*Ns-Ms*Ls*Ns)*qs,_s[15]=(Ps*Fs*Ts-$s*Ls*Ts+$s*Cs*Rs-Ms*Fs*Rs-Ps*Cs*Gs+Ms*Ls*Gs)*qs,this},scale:function(ca){var ga=this.elements,_s=ca.x,Ss=ca.y,Ms=ca.z;return ga[0]*=_s,ga[4]*=Ss,ga[8]*=Ms,ga[1]*=_s,ga[5]*=Ss,ga[9]*=Ms,ga[2]*=_s,ga[6]*=Ss,ga[10]*=Ms,ga[3]*=_s,ga[7]*=Ss,ga[11]*=Ms,this},getMaxScaleOnAxis:function(){var ca=this.elements,ga=ca[0]*ca[0]+ca[1]*ca[1]+ca[2]*ca[2],_s=ca[4]*ca[4]+ca[5]*ca[5]+ca[6]*ca[6],Ss=ca[8]*ca[8]+ca[9]*ca[9]+ca[10]*ca[10];return Math.sqrt(Math.max(ga,_s,Ss))},makeTranslation:function(ca,ga,_s){return this.set(1,0,0,ca,0,1,0,ga,0,0,1,_s,0,0,0,1),this},makeRotationX:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(1,0,0,0,0,ga,-_s,0,0,_s,ga,0,0,0,0,1),this},makeRotationY:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(ga,0,_s,0,0,1,0,0,-_s,0,ga,0,0,0,0,1),this},makeRotationZ:function(ca){var ga=Math.cos(ca),_s=Math.sin(ca);return this.set(ga,-_s,0,0,_s,ga,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(ca,ga){var _s=Math.cos(ga),Ss=Math.sin(ga),Ms=1-_s,Cs=ca.x,Ts=ca.y,Bs=ca.z,Ps=Ms*Cs,Ls=Ms*Ts;return this.set(Ps*Cs+_s,Ps*Ts-Ss*Bs,Ps*Bs+Ss*Ts,0,Ps*Ts+Ss*Bs,Ls*Ts+_s,Ls*Bs-Ss*Cs,0,Ps*Bs-Ss*Ts,Ls*Bs+Ss*Cs,Ms*Bs*Bs+_s,0,0,0,0,1),this},makeScale:function(ca,ga,_s){return this.set(ca,0,0,0,0,ga,0,0,0,0,_s,0,0,0,0,1),this},makeShear:function(ca,ga,_s){return this.set(1,ga,_s,0,ca,1,_s,0,ca,ga,1,0,0,0,0,1),this},compose:function(ca,ga,_s){var Ss=this.elements,Ms=ga._x,Cs=ga._y,Ts=ga._z,Bs=ga._w,Ps=Ms+Ms,Ls=Cs+Cs,Rs=Ts+Ts,Ds=Ms*Ps,$s=Ms*Ls,Fs=Ms*Rs,Gs=Cs*Ls,Vs=Cs*Rs,ks=Ts*Rs,Os=Bs*Ps,Ns=Bs*Ls,Us=Bs*Rs,Hs=_s.x,zs=_s.y,js=_s.z;return Ss[0]=(1-(Gs+ks))*Hs,Ss[1]=($s+Us)*Hs,Ss[2]=(Fs-Ns)*Hs,Ss[3]=0,Ss[4]=($s-Us)*zs,Ss[5]=(1-(Ds+ks))*zs,Ss[6]=(Vs+Os)*zs,Ss[7]=0,Ss[8]=(Fs+Ns)*js,Ss[9]=(Vs-Os)*js,Ss[10]=(1-(Ds+Gs))*js,Ss[11]=0,Ss[12]=ca.x,Ss[13]=ca.y,Ss[14]=ca.z,Ss[15]=1,this},decompose:function(ca,ga,_s){var Ss=this.elements,Ms=_v1.set(Ss[0],Ss[1],Ss[2]).length(),Cs=_v1.set(Ss[4],Ss[5],Ss[6]).length(),Ts=_v1.set(Ss[8],Ss[9],Ss[10]).length(),Bs=this.determinant();Bs<0&&(Ms=-Ms),ca.x=Ss[12],ca.y=Ss[13],ca.z=Ss[14],_m1.copy(this);var Ps=1/Ms,Ls=1/Cs,Rs=1/Ts;return _m1.elements[0]*=Ps,_m1.elements[1]*=Ps,_m1.elements[2]*=Ps,_m1.elements[4]*=Ls,_m1.elements[5]*=Ls,_m1.elements[6]*=Ls,_m1.elements[8]*=Rs,_m1.elements[9]*=Rs,_m1.elements[10]*=Rs,ga.setFromRotationMatrix(_m1),_s.x=Ms,_s.y=Cs,_s.z=Ts,this},makePerspective:function(ca,ga,_s,Ss,Ms,Cs){Cs===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Ts=this.elements,Bs=2*Ms/(ga-ca),Ps=2*Ms/(_s-Ss),Ls=(ga+ca)/(ga-ca),Rs=(_s+Ss)/(_s-Ss),Ds=-(Cs+Ms)/(Cs-Ms),$s=-2*Cs*Ms/(Cs-Ms);return Ts[0]=Bs,Ts[4]=0,Ts[8]=Ls,Ts[12]=0,Ts[1]=0,Ts[5]=Ps,Ts[9]=Rs,Ts[13]=0,Ts[2]=0,Ts[6]=0,Ts[10]=Ds,Ts[14]=$s,Ts[3]=0,Ts[7]=0,Ts[11]=-1,Ts[15]=0,this},makeOrthographic:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.elements,Bs=1/(ga-ca),Ps=1/(_s-Ss),Ls=1/(Cs-Ms),Rs=(ga+ca)*Bs,Ds=(_s+Ss)*Ps,$s=(Cs+Ms)*Ls;return Ts[0]=2*Bs,Ts[4]=0,Ts[8]=0,Ts[12]=-Rs,Ts[1]=0,Ts[5]=2*Ps,Ts[9]=0,Ts[13]=-Ds,Ts[2]=0,Ts[6]=0,Ts[10]=-2*Ls,Ts[14]=-$s,Ts[3]=0,Ts[7]=0,Ts[11]=0,Ts[15]=1,this},equals:function(ca){for(var ga=this.elements,_s=ca.elements,Ss=0;Ss<16;Ss++)if(ga[Ss]!==_s[Ss])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=0;_s<16;_s++)this.elements[_s]=ca[_s+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var _s=this.elements;return ca[ga]=_s[0],ca[ga+1]=_s[1],ca[ga+2]=_s[2],ca[ga+3]=_s[3],ca[ga+4]=_s[4],ca[ga+5]=_s[5],ca[ga+6]=_s[6],ca[ga+7]=_s[7],ca[ga+8]=_s[8],ca[ga+9]=_s[9],ca[ga+10]=_s[10],ca[ga+11]=_s[11],ca[ga+12]=_s[12],ca[ga+13]=_s[13],ca[ga+14]=_s[14],ca[ga+15]=_s[15],ca}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(ca,ga,_s,Ss){this._x=ca||0,this._y=ga||0,this._z=_s||0,this._order=Ss||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(ca){this._order=ca,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(ca,ga,_s,Ss){return this._x=ca,this._y=ga,this._z=_s,this._order=Ss||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(ca){return this._x=ca._x,this._y=ca._y,this._z=ca._z,this._order=ca._order,this._onChangeCallback(),this},setFromRotationMatrix:function(ca,ga,_s){var Ss=MathUtils.clamp,Ms=ca.elements,Cs=Ms[0],Ts=Ms[4],Bs=Ms[8],Ps=Ms[1],Ls=Ms[5],Rs=Ms[9],Ds=Ms[2],$s=Ms[6],Fs=Ms[10];switch(ga=ga||this._order,ga){case"XYZ":this._y=Math.asin(Ss(Bs,-1,1)),Math.abs(Bs)<.9999999?(this._x=Math.atan2(-Rs,Fs),this._z=Math.atan2(-Ts,Cs)):(this._x=Math.atan2($s,Ls),this._z=0);break;case"YXZ":this._x=Math.asin(-Ss(Rs,-1,1)),Math.abs(Rs)<.9999999?(this._y=Math.atan2(Bs,Fs),this._z=Math.atan2(Ps,Ls)):(this._y=Math.atan2(-Ds,Cs),this._z=0);break;case"ZXY":this._x=Math.asin(Ss($s,-1,1)),Math.abs($s)<.9999999?(this._y=Math.atan2(-Ds,Fs),this._z=Math.atan2(-Ts,Ls)):(this._y=0,this._z=Math.atan2(Ps,Cs));break;case"ZYX":this._y=Math.asin(-Ss(Ds,-1,1)),Math.abs(Ds)<.9999999?(this._x=Math.atan2($s,Fs),this._z=Math.atan2(Ps,Cs)):(this._x=0,this._z=Math.atan2(-Ts,Ls));break;case"YZX":this._z=Math.asin(Ss(Ps,-1,1)),Math.abs(Ps)<.9999999?(this._x=Math.atan2(-Rs,Ls),this._y=Math.atan2(-Ds,Cs)):(this._x=0,this._y=Math.atan2(Bs,Fs));break;case"XZY":this._z=Math.asin(-Ss(Ts,-1,1)),Math.abs(Ts)<.9999999?(this._x=Math.atan2($s,Ls),this._y=Math.atan2(Bs,Cs)):(this._x=Math.atan2(-Rs,Fs),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+ga)}return this._order=ga,_s!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(ca,ga,_s){return _matrix.makeRotationFromQuaternion(ca),this.setFromRotationMatrix(_matrix,ga,_s)},setFromVector3:function(ca,ga){return this.set(ca.x,ca.y,ca.z,ga||this._order)},reorder:function(ca){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,ca)},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._order===this._order},fromArray:function(ca){return this._x=ca[0],this._y=ca[1],this._z=ca[2],ca[3]!==void 0&&(this._order=ca[3]),this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._order,ca},toVector3:function(ca){return ca?ca.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});function Layers(){this.mask=1|0}Object.assign(Layers.prototype,{set:function(ca){this.mask=1<<ca|0},enable:function(ca){this.mask|=1<<ca|0},enableAll:function(){this.mask=4294967295|0},toggle:function(ca){this.mask^=1<<ca|0},disable:function(ca){this.mask&=~(1<<ca|0)},disableAll:function(){this.mask=0},test:function(ca){return(this.mask&ca.mask)!=0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var ca=new Vector3,ga=new Euler,_s=new Quaternion,Ss=new Vector3(1,1,1);function Ms(){_s.setFromEuler(ga,!1)}function Cs(){ga.setFromQuaternion(_s,void 0,!1)}ga._onChange(Ms),_s._onChange(Cs),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:ca},rotation:{configurable:!0,enumerable:!0,value:ga},quaternion:{configurable:!0,enumerable:!0,value:_s},scale:{configurable:!0,enumerable:!0,value:Ss},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(ca),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(ca){return this.quaternion.premultiply(ca),this},setRotationFromAxisAngle:function(ca,ga){this.quaternion.setFromAxisAngle(ca,ga)},setRotationFromEuler:function(ca){this.quaternion.setFromEuler(ca,!0)},setRotationFromMatrix:function(ca){this.quaternion.setFromRotationMatrix(ca)},setRotationFromQuaternion:function(ca){this.quaternion.copy(ca)},rotateOnAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.premultiply(_q1),this},rotateX:function(ca){return this.rotateOnAxis(_xAxis,ca)},rotateY:function(ca){return this.rotateOnAxis(_yAxis,ca)},rotateZ:function(ca){return this.rotateOnAxis(_zAxis,ca)},translateOnAxis:function(ca,ga){return _v1$1.copy(ca).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(ga)),this},translateX:function(ca){return this.translateOnAxis(_xAxis,ca)},translateY:function(ca){return this.translateOnAxis(_yAxis,ca)},translateZ:function(ca){return this.translateOnAxis(_zAxis,ca)},localToWorld:function(ca){return ca.applyMatrix4(this.matrixWorld)},worldToLocal:function(ca){return ca.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(ca,ga,_s){ca.isVector3?_target.copy(ca):_target.set(ca,ga,_s);var Ss=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Ss&&(_m1$1.extractRotation(Ss.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.add(arguments[ga]);return this}return ca===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",ca),this):(ca&&ca.isObject3D?(ca.parent!==null&&ca.parent.remove(ca),ca.parent=this,this.children.push(ca),ca.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",ca),this)},remove:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.remove(arguments[ga]);return this}var _s=this.children.indexOf(ca);return _s!==-1&&(ca.parent=null,this.children.splice(_s,1),ca.dispatchEvent(_removedEvent)),this},attach:function(ca){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),ca.parent!==null&&(ca.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(ca.parent.matrixWorld)),ca.applyMatrix4(_m1$1),ca.updateWorldMatrix(!1,!1),this.add(ca),this},getObjectById:function(ca){return this.getObjectByProperty("id",ca)},getObjectByName:function(ca){return this.getObjectByProperty("name",ca)},getObjectByProperty:function(ca,ga){if(this[ca]===ga)return this;for(var _s=0,Ss=this.children.length;_s<Ss;_s++){var Ms=this.children[_s],Cs=Ms.getObjectByProperty(ca,ga);if(Cs!==void 0)return Cs}},getWorldPosition:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),ca.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),ca=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,ca,_scale),ca},getWorldScale:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,ca),ca},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(ga[8],ga[9],ga[10]).normalize()},raycast:function(){},traverse:function(ca){ca(this);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].traverse(ca)},traverseVisible:function(ca){if(this.visible!==!1){ca(this);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].traverseVisible(ca)}},traverseAncestors:function(ca){var ga=this.parent;ga!==null&&(ca(ga),ga.traverseAncestors(ca))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||ca)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,ca=!0);for(var ga=this.children,_s=0,Ss=ga.length;_s<Ss;_s++)ga[_s].updateMatrixWorld(ca)},updateWorldMatrix:function(ca,ga){var _s=this.parent;if(ca===!0&&_s!==null&&_s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),ga===!0)for(var Ss=this.children,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms].updateWorldMatrix(!1,!0)},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string",_s={};ga&&(ca={geometries:{},materials:{},textures:{},images:{},shapes:{}},_s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Ss={};Ss.uuid=this.uuid,Ss.type=this.type,this.name!==""&&(Ss.name=this.name),this.castShadow===!0&&(Ss.castShadow=!0),this.receiveShadow===!0&&(Ss.receiveShadow=!0),this.visible===!1&&(Ss.visible=!1),this.frustumCulled===!1&&(Ss.frustumCulled=!1),this.renderOrder!==0&&(Ss.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Ss.userData=this.userData),Ss.layers=this.layers.mask,Ss.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Ss.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ss.type="InstancedMesh",Ss.count=this.count,Ss.instanceMatrix=this.instanceMatrix.toJSON());function Ms(ks,Os){return ks[Os.uuid]===void 0&&(ks[Os.uuid]=Os.toJSON(ca)),Os.uuid}if(this.isMesh||this.isLine||this.isPoints){Ss.geometry=Ms(ca.geometries,this.geometry);var Cs=this.geometry.parameters;if(Cs!==void 0&&Cs.shapes!==void 0){var Ts=Cs.shapes;if(Array.isArray(Ts))for(var Bs=0,Ps=Ts.length;Bs<Ps;Bs++){var Ls=Ts[Bs];Ms(ca.shapes,Ls)}else Ms(ca.shapes,Ts)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Rs=[],Bs=0,Ps=this.material.length;Bs<Ps;Bs++)Rs.push(Ms(ca.materials,this.material[Bs]));Ss.material=Rs}else Ss.material=Ms(ca.materials,this.material);if(this.children.length>0){Ss.children=[];for(var Bs=0;Bs<this.children.length;Bs++)Ss.children.push(this.children[Bs].toJSON(ca).object)}if(ga){var Ds=Vs(ca.geometries),$s=Vs(ca.materials),Fs=Vs(ca.textures),Gs=Vs(ca.images),Ts=Vs(ca.shapes);Ds.length>0&&(_s.geometries=Ds),$s.length>0&&(_s.materials=$s),Fs.length>0&&(_s.textures=Fs),Gs.length>0&&(_s.images=Gs),Ts.length>0&&(_s.shapes=Ts)}return _s.object=Ss,_s;function Vs(ks){var Os=[];for(var Ns in ks){var Us=ks[Ns];delete Us.metadata,Os.push(Us)}return Os}},clone:function(ca){return new this.constructor().copy(this,ca)},copy:function(ca,ga){if(ga===void 0&&(ga=!0),this.name=ca.name,this.up.copy(ca.up),this.position.copy(ca.position),this.quaternion.copy(ca.quaternion),this.scale.copy(ca.scale),this.matrix.copy(ca.matrix),this.matrixWorld.copy(ca.matrixWorld),this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrixWorldNeedsUpdate=ca.matrixWorldNeedsUpdate,this.layers.mask=ca.layers.mask,this.visible=ca.visible,this.castShadow=ca.castShadow,this.receiveShadow=ca.receiveShadow,this.frustumCulled=ca.frustumCulled,this.renderOrder=ca.renderOrder,this.userData=JSON.parse(JSON.stringify(ca.userData)),ga===!0)for(var _s=0;_s<ca.children.length;_s++){var Ss=ca.children[_s];this.add(Ss.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),ca.background!==null&&(this.background=ca.background.clone()),ca.environment!==null&&(this.environment=ca.environment.clone()),ca.fog!==null&&(this.fog=ca.fog.clone()),ca.overrideMaterial!==null&&(this.overrideMaterial=ca.overrideMaterial.clone()),this.autoUpdate=ca.autoUpdate,this.matrixAutoUpdate=ca.matrixAutoUpdate,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return this.background!==null&&(ga.object.background=this.background.toJSON(ca)),this.environment!==null&&(ga.object.environment=this.environment.toJSON(ca)),this.fog!==null&&(ga.object.fog=this.fog.toJSON()),ga},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(ca,ga){this.min=ca!==void 0?ca:new Vector3(1/0,1/0,1/0),this.max=ga!==void 0?ga:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromArray:function(ca){for(var ga=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Bs=0,Ps=ca.length;Bs<Ps;Bs+=3){var Ls=ca[Bs],Rs=ca[Bs+1],Ds=ca[Bs+2];Ls<ga&&(ga=Ls),Rs<_s&&(_s=Rs),Ds<Ss&&(Ss=Ds),Ls>Ms&&(Ms=Ls),Rs>Cs&&(Cs=Rs),Ds>Ts&&(Ts=Ds)}return this.min.set(ga,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromBufferAttribute:function(ca){for(var ga=1/0,_s=1/0,Ss=1/0,Ms=-1/0,Cs=-1/0,Ts=-1/0,Bs=0,Ps=ca.count;Bs<Ps;Bs++){var Ls=ca.getX(Bs),Rs=ca.getY(Bs),Ds=ca.getZ(Bs);Ls<ga&&(ga=Ls),Rs<_s&&(_s=Rs),Ds<Ss&&(Ss=Ds),Ls>Ms&&(Ms=Ls),Rs>Cs&&(Cs=Rs),Ds>Ts&&(Ts=Ds)}return this.min.set(ga,_s,Ss),this.max.set(Ms,Cs,Ts),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,_s=ca.length;ga<_s;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var _s=_vector$1.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(_s),this.max.copy(ca).add(_s),this},setFromObject:function(ca){return this.makeEmpty(),this.expandByObject(ca)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},expandByObject:function(ca){ca.updateWorldMatrix(!1,!1);var ga=ca.geometry;ga!==void 0&&(ga.boundingBox===null&&ga.computeBoundingBox(),_box.copy(ga.boundingBox),_box.applyMatrix4(ca.matrixWorld),this.union(_box));for(var _s=ca.children,Ss=0,Ms=_s.length;Ss<Ms;Ss++)this.expandByObject(_s[Ss]);return this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y||ca.z<this.min.z||ca.z>this.max.z)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y&&this.min.z<=ca.min.z&&ca.max.z<=this.max.z},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),ga=new Vector3),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y),(ca.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y||ca.max.z<this.min.z||ca.min.z>this.max.z)},intersectsSphere:function(ca){return this.clampPoint(ca.center,_vector$1),_vector$1.distanceToSquared(ca.center)<=ca.radius*ca.radius},intersectsPlane:function(ca){var ga,_s;return ca.normal.x>0?(ga=ca.normal.x*this.min.x,_s=ca.normal.x*this.max.x):(ga=ca.normal.x*this.max.x,_s=ca.normal.x*this.min.x),ca.normal.y>0?(ga+=ca.normal.y*this.min.y,_s+=ca.normal.y*this.max.y):(ga+=ca.normal.y*this.max.y,_s+=ca.normal.y*this.min.y),ca.normal.z>0?(ga+=ca.normal.z*this.min.z,_s+=ca.normal.z*this.max.z):(ga+=ca.normal.z*this.max.z,_s+=ca.normal.z*this.min.z),ga<=-ca.constant&&_s>=-ca.constant},intersectsTriangle:function(ca){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(ca.a,_center),_v1$2.subVectors(ca.b,_center),_v2.subVectors(ca.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var ga=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(ga,_v0,_v1$2,_v2,_extents)||(ga=[1,0,0,0,1,0,0,0,1],!satForAxes(ga,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),ga=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(ga,_v0,_v1$2,_v2,_extents))},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$1.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},getBoundingSphere:function(ca){return ca===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(ca.center),ca.radius=this.getSize(_vector$1).length()*.5,ca},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this.isEmpty()&&this.makeEmpty(),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},applyMatrix4:function(ca){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(ca),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(ca),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(ca),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(ca),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(ca),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(ca),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(ca),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(ca),this.setFromPoints(_points),this)},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});function satForAxes(ca,ga,_s,Ss,Ms){var Cs,Ts;for(Cs=0,Ts=ca.length-3;Cs<=Ts;Cs+=3){_testAxis.fromArray(ca,Cs);var Bs=Ms.x*Math.abs(_testAxis.x)+Ms.y*Math.abs(_testAxis.y)+Ms.z*Math.abs(_testAxis.z),Ps=ga.dot(_testAxis),Ls=_s.dot(_testAxis),Rs=Ss.dot(_testAxis);if(Math.max(-Math.max(Ps,Ls,Rs),Math.min(Ps,Ls,Rs))>Bs)return!1}return!0}var _box$1=new Box3;function Sphere(ca,ga){this.center=ca!==void 0?ca:new Vector3,this.radius=ga!==void 0?ga:-1}Object.assign(Sphere.prototype,{set:function(ca,ga){return this.center.copy(ca),this.radius=ga,this},setFromPoints:function(ca,ga){var _s=this.center;ga!==void 0?_s.copy(ga):_box$1.setFromPoints(ca).getCenter(_s);for(var Ss=0,Ms=0,Cs=ca.length;Ms<Cs;Ms++)Ss=Math.max(Ss,_s.distanceToSquared(ca[Ms]));return this.radius=Math.sqrt(Ss),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.center.copy(ca.center),this.radius=ca.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(ca){return ca.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(ca){return ca.distanceTo(this.center)-this.radius},intersectsSphere:function(ca){var ga=this.radius+ca.radius;return ca.center.distanceToSquared(this.center)<=ga*ga},intersectsBox:function(ca){return ca.intersectsSphere(this)},intersectsPlane:function(ca){return Math.abs(ca.distanceToPoint(this.center))<=this.radius},clampPoint:function(ca,ga){var _s=this.center.distanceToSquared(ca);return ga===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca),_s>this.radius*this.radius&&(ga.sub(this.center).normalize(),ga.multiplyScalar(this.radius).add(this.center)),ga},getBoundingBox:function(ca){return ca===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),ca=new Box3),this.isEmpty()?(ca.makeEmpty(),ca):(ca.set(this.center,this.center),ca.expandByScalar(this.radius),ca)},applyMatrix4:function(ca){return this.center.applyMatrix4(ca),this.radius=this.radius*ca.getMaxScaleOnAxis(),this},translate:function(ca){return this.center.add(ca),this},equals:function(ca){return ca.center.equals(this.center)&&ca.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(ca,ga){this.origin=ca!==void 0?ca:new Vector3,this.direction=ga!==void 0?ga:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(ca,ga){return this.origin.copy(ca),this.direction.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.origin.copy(ca.origin),this.direction.copy(ca.direction),this},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Ray: .at() target is now required"),ga=new Vector3),ga.copy(this.direction).multiplyScalar(ca).add(this.origin)},lookAt:function(ca){return this.direction.copy(ca).sub(this.origin).normalize(),this},recast:function(ca){return this.origin.copy(this.at(ca,_vector$2)),this},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),ga=new Vector3),ga.subVectors(ca,this.origin);var _s=ga.dot(this.direction);return _s<0?ga.copy(this.origin):ga.copy(this.direction).multiplyScalar(_s).add(this.origin)},distanceToPoint:function(ca){return Math.sqrt(this.distanceSqToPoint(ca))},distanceSqToPoint:function(ca){var ga=_vector$2.subVectors(ca,this.origin).dot(this.direction);return ga<0?this.origin.distanceToSquared(ca):(_vector$2.copy(this.direction).multiplyScalar(ga).add(this.origin),_vector$2.distanceToSquared(ca))},distanceSqToSegment:function(ca,ga,_s,Ss){_segCenter.copy(ca).add(ga).multiplyScalar(.5),_segDir.copy(ga).sub(ca).normalize(),_diff.copy(this.origin).sub(_segCenter);var Ms=ca.distanceTo(ga)*.5,Cs=-this.direction.dot(_segDir),Ts=_diff.dot(this.direction),Bs=-_diff.dot(_segDir),Ps=_diff.lengthSq(),Ls=Math.abs(1-Cs*Cs),Rs,Ds,$s,Fs;if(Ls>0)if(Rs=Cs*Bs-Ts,Ds=Cs*Ts-Bs,Fs=Ms*Ls,Rs>=0)if(Ds>=-Fs)if(Ds<=Fs){var Gs=1/Ls;Rs*=Gs,Ds*=Gs,$s=Rs*(Rs+Cs*Ds+2*Ts)+Ds*(Cs*Rs+Ds+2*Bs)+Ps}else Ds=Ms,Rs=Math.max(0,-(Cs*Ds+Ts)),$s=-Rs*Rs+Ds*(Ds+2*Bs)+Ps;else Ds=-Ms,Rs=Math.max(0,-(Cs*Ds+Ts)),$s=-Rs*Rs+Ds*(Ds+2*Bs)+Ps;else Ds<=-Fs?(Rs=Math.max(0,-(-Cs*Ms+Ts)),Ds=Rs>0?-Ms:Math.min(Math.max(-Ms,-Bs),Ms),$s=-Rs*Rs+Ds*(Ds+2*Bs)+Ps):Ds<=Fs?(Rs=0,Ds=Math.min(Math.max(-Ms,-Bs),Ms),$s=Ds*(Ds+2*Bs)+Ps):(Rs=Math.max(0,-(Cs*Ms+Ts)),Ds=Rs>0?Ms:Math.min(Math.max(-Ms,-Bs),Ms),$s=-Rs*Rs+Ds*(Ds+2*Bs)+Ps);else Ds=Cs>0?-Ms:Ms,Rs=Math.max(0,-(Cs*Ds+Ts)),$s=-Rs*Rs+Ds*(Ds+2*Bs)+Ps;return _s&&_s.copy(this.direction).multiplyScalar(Rs).add(this.origin),Ss&&Ss.copy(_segDir).multiplyScalar(Ds).add(_segCenter),$s},intersectSphere:function(ca,ga){_vector$2.subVectors(ca.center,this.origin);var _s=_vector$2.dot(this.direction),Ss=_vector$2.dot(_vector$2)-_s*_s,Ms=ca.radius*ca.radius;if(Ss>Ms)return null;var Cs=Math.sqrt(Ms-Ss),Ts=_s-Cs,Bs=_s+Cs;return Ts<0&&Bs<0?null:Ts<0?this.at(Bs,ga):this.at(Ts,ga)},intersectsSphere:function(ca){return this.distanceSqToPoint(ca.center)<=ca.radius*ca.radius},distanceToPlane:function(ca){var ga=ca.normal.dot(this.direction);if(ga===0)return ca.distanceToPoint(this.origin)===0?0:null;var _s=-(this.origin.dot(ca.normal)+ca.constant)/ga;return _s>=0?_s:null},intersectPlane:function(ca,ga){var _s=this.distanceToPlane(ca);return _s===null?null:this.at(_s,ga)},intersectsPlane:function(ca){var ga=ca.distanceToPoint(this.origin);if(ga===0)return!0;var _s=ca.normal.dot(this.direction);return _s*ga<0},intersectBox:function(ca,ga){var _s,Ss,Ms,Cs,Ts,Bs,Ps=1/this.direction.x,Ls=1/this.direction.y,Rs=1/this.direction.z,Ds=this.origin;return Ps>=0?(_s=(ca.min.x-Ds.x)*Ps,Ss=(ca.max.x-Ds.x)*Ps):(_s=(ca.max.x-Ds.x)*Ps,Ss=(ca.min.x-Ds.x)*Ps),Ls>=0?(Ms=(ca.min.y-Ds.y)*Ls,Cs=(ca.max.y-Ds.y)*Ls):(Ms=(ca.max.y-Ds.y)*Ls,Cs=(ca.min.y-Ds.y)*Ls),_s>Cs||Ms>Ss||((Ms>_s||_s!==_s)&&(_s=Ms),(Cs<Ss||Ss!==Ss)&&(Ss=Cs),Rs>=0?(Ts=(ca.min.z-Ds.z)*Rs,Bs=(ca.max.z-Ds.z)*Rs):(Ts=(ca.max.z-Ds.z)*Rs,Bs=(ca.min.z-Ds.z)*Rs),_s>Bs||Ts>Ss)||((Ts>_s||_s!==_s)&&(_s=Ts),(Bs<Ss||Ss!==Ss)&&(Ss=Bs),Ss<0)?null:this.at(_s>=0?_s:Ss,ga)},intersectsBox:function(ca){return this.intersectBox(ca,_vector$2)!==null},intersectTriangle:function(ca,ga,_s,Ss,Ms){_edge1.subVectors(ga,ca),_edge2.subVectors(_s,ca),_normal.crossVectors(_edge1,_edge2);var Cs=this.direction.dot(_normal),Ts;if(Cs>0){if(Ss)return null;Ts=1}else if(Cs<0)Ts=-1,Cs=-Cs;else return null;_diff.subVectors(this.origin,ca);var Bs=Ts*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Bs<0)return null;var Ps=Ts*this.direction.dot(_edge1.cross(_diff));if(Ps<0||Bs+Ps>Cs)return null;var Ls=-Ts*_diff.dot(_normal);return Ls<0?null:this.at(Ls/Cs,Ms)},applyMatrix4:function(ca){return this.origin.applyMatrix4(ca),this.direction.transformDirection(ca),this},equals:function(ca){return ca.origin.equals(this.origin)&&ca.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(ca,ga){this.normal=ca!==void 0?ca:new Vector3(1,0,0),this.constant=ga!==void 0?ga:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(ca,ga){return this.normal.copy(ca),this.constant=ga,this},setComponents:function(ca,ga,_s,Ss){return this.normal.set(ca,ga,_s),this.constant=Ss,this},setFromNormalAndCoplanarPoint:function(ca,ga){return this.normal.copy(ca),this.constant=-ga.dot(this.normal),this},setFromCoplanarPoints:function(ca,ga,_s){var Ss=_vector1.subVectors(_s,ga).cross(_vector2.subVectors(ca,ga)).normalize();return this.setFromNormalAndCoplanarPoint(Ss,ca),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.normal.copy(ca.normal),this.constant=ca.constant,this},normalize:function(){var ca=1/this.normal.length();return this.normal.multiplyScalar(ca),this.constant*=ca,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(ca){return this.normal.dot(ca)+this.constant},distanceToSphere:function(ca){return this.distanceToPoint(ca.center)-ca.radius},projectPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),ga=new Vector3),ga.copy(this.normal).multiplyScalar(-this.distanceToPoint(ca)).add(ca)},intersectLine:function(ca,ga){ga===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),ga=new Vector3);var _s=ca.delta(_vector1),Ss=this.normal.dot(_s);if(Ss===0)return this.distanceToPoint(ca.start)===0?ga.copy(ca.start):void 0;var Ms=-(ca.start.dot(this.normal)+this.constant)/Ss;if(!(Ms<0||Ms>1))return ga.copy(_s).multiplyScalar(Ms).add(ca.start)},intersectsLine:function(ca){var ga=this.distanceToPoint(ca.start),_s=this.distanceToPoint(ca.end);return ga<0&&_s>0||_s<0&&ga>0},intersectsBox:function(ca){return ca.intersectsPlane(this)},intersectsSphere:function(ca){return ca.intersectsPlane(this)},coplanarPoint:function(ca){return ca===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),ca=new Vector3),ca.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(ca,ga){var _s=ga||_normalMatrix.getNormalMatrix(ca),Ss=this.coplanarPoint(_vector1).applyMatrix4(ca),Ms=this.normal.applyMatrix3(_s).normalize();return this.constant=-Ss.dot(Ms),this},translate:function(ca){return this.constant-=ca.dot(this.normal),this},equals:function(ca){return ca.normal.equals(this.normal)&&ca.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(ca,ga,_s){this.a=ca!==void 0?ca:new Vector3,this.b=ga!==void 0?ga:new Vector3,this.c=_s!==void 0?_s:new Vector3}Object.assign(Triangle,{getNormal:function(ca,ga,_s,Ss){Ss===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Ss=new Vector3),Ss.subVectors(_s,ga),_v0$1.subVectors(ca,ga),Ss.cross(_v0$1);var Ms=Ss.lengthSq();return Ms>0?Ss.multiplyScalar(1/Math.sqrt(Ms)):Ss.set(0,0,0)},getBarycoord:function(ca,ga,_s,Ss,Ms){_v0$1.subVectors(Ss,ga),_v1$3.subVectors(_s,ga),_v2$1.subVectors(ca,ga);var Cs=_v0$1.dot(_v0$1),Ts=_v0$1.dot(_v1$3),Bs=_v0$1.dot(_v2$1),Ps=_v1$3.dot(_v1$3),Ls=_v1$3.dot(_v2$1),Rs=Cs*Ps-Ts*Ts;if(Ms===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Ms=new Vector3),Rs===0)return Ms.set(-2,-1,-1);var Ds=1/Rs,$s=(Ps*Bs-Ts*Ls)*Ds,Fs=(Cs*Ls-Ts*Bs)*Ds;return Ms.set(1-$s-Fs,Fs,$s)},containsPoint:function(ca,ga,_s,Ss){return Triangle.getBarycoord(ca,ga,_s,Ss,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){return this.getBarycoord(ca,ga,_s,Ss,_v3),Bs.set(0,0),Bs.addScaledVector(Ms,_v3.x),Bs.addScaledVector(Cs,_v3.y),Bs.addScaledVector(Ts,_v3.z),Bs},isFrontFacing:function(ca,ga,_s,Ss){return _v0$1.subVectors(_s,ga),_v1$3.subVectors(ca,ga),_v0$1.cross(_v1$3).dot(Ss)<0}});Object.assign(Triangle.prototype,{set:function(ca,ga,_s){return this.a.copy(ca),this.b.copy(ga),this.c.copy(_s),this},setFromPointsAndIndices:function(ca,ga,_s,Ss){return this.a.copy(ca[ga]),this.b.copy(ca[_s]),this.c.copy(ca[Ss]),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.a.copy(ca.a),this.b.copy(ca.b),this.c.copy(ca.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),ca=new Vector3),ca.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(ca){return Triangle.getNormal(this.a,this.b,this.c,ca)},getPlane:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),ca=new Plane),ca.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(ca,ga){return Triangle.getBarycoord(ca,this.a,this.b,this.c,ga)},getUV:function(ca,ga,_s,Ss,Ms){return Triangle.getUV(ca,this.a,this.b,this.c,ga,_s,Ss,Ms)},containsPoint:function(ca){return Triangle.containsPoint(ca,this.a,this.b,this.c)},isFrontFacing:function(ca){return Triangle.isFrontFacing(this.a,this.b,this.c,ca)},intersectsBox:function(ca){return ca.intersectsTriangle(this)},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),ga=new Vector3);var _s=this.a,Ss=this.b,Ms=this.c,Cs,Ts;_vab.subVectors(Ss,_s),_vac.subVectors(Ms,_s),_vap.subVectors(ca,_s);var Bs=_vab.dot(_vap),Ps=_vac.dot(_vap);if(Bs<=0&&Ps<=0)return ga.copy(_s);_vbp.subVectors(ca,Ss);var Ls=_vab.dot(_vbp),Rs=_vac.dot(_vbp);if(Ls>=0&&Rs<=Ls)return ga.copy(Ss);var Ds=Bs*Rs-Ls*Ps;if(Ds<=0&&Bs>=0&&Ls<=0)return Cs=Bs/(Bs-Ls),ga.copy(_s).addScaledVector(_vab,Cs);_vcp.subVectors(ca,Ms);var $s=_vab.dot(_vcp),Fs=_vac.dot(_vcp);if(Fs>=0&&$s<=Fs)return ga.copy(Ms);var Gs=$s*Ps-Bs*Fs;if(Gs<=0&&Ps>=0&&Fs<=0)return Ts=Ps/(Ps-Fs),ga.copy(_s).addScaledVector(_vac,Ts);var Vs=Ls*Fs-$s*Rs;if(Vs<=0&&Rs-Ls>=0&&$s-Fs>=0)return _vbc.subVectors(Ms,Ss),Ts=(Rs-Ls)/(Rs-Ls+($s-Fs)),ga.copy(Ss).addScaledVector(_vbc,Ts);var ks=1/(Vs+Gs+Ds);return Cs=Gs*ks,Ts=Ds*ks,ga.copy(_s).addScaledVector(_vab,Cs).addScaledVector(_vac,Ts)},equals:function(ca){return ca.a.equals(this.a)&&ca.b.equals(this.b)&&ca.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(ca,ga,_s){return ga===void 0&&_s===void 0?this.set(ca):this.setRGB(ca,ga,_s)}function hue2rgb(ca,ga,_s){return _s<0&&(_s+=1),_s>1&&(_s-=1),_s<1/6?ca+(ga-ca)*6*_s:_s<1/2?ga:_s<2/3?ca+(ga-ca)*6*(2/3-_s):ca}function SRGBToLinear(ca){return ca<.04045?ca*.0773993808:Math.pow(ca*.9478672986+.0521327014,2.4)}function LinearToSRGB(ca){return ca<.0031308?ca*12.92:1.055*Math.pow(ca,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(ca){return ca&&ca.isColor?this.copy(ca):typeof ca=="number"?this.setHex(ca):typeof ca=="string"&&this.setStyle(ca),this},setScalar:function(ca){return this.r=ca,this.g=ca,this.b=ca,this},setHex:function(ca){return ca=Math.floor(ca),this.r=(ca>>16&255)/255,this.g=(ca>>8&255)/255,this.b=(ca&255)/255,this},setRGB:function(ca,ga,_s){return this.r=ca,this.g=ga,this.b=_s,this},setHSL:function(ca,ga,_s){if(ca=MathUtils.euclideanModulo(ca,1),ga=MathUtils.clamp(ga,0,1),_s=MathUtils.clamp(_s,0,1),ga===0)this.r=this.g=this.b=_s;else{var Ss=_s<=.5?_s*(1+ga):_s+ga-_s*ga,Ms=2*_s-Ss;this.r=hue2rgb(Ms,Ss,ca+1/3),this.g=hue2rgb(Ms,Ss,ca),this.b=hue2rgb(Ms,Ss,ca-1/3)}return this},setStyle:function(ca){function ga(Ds){Ds!==void 0&&parseFloat(Ds)<1&&console.warn("THREE.Color: Alpha component of "+ca+" will be ignored.")}var _s;if(_s=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(ca)){var Ss,Ms=_s[1],Cs=_s[2];switch(Ms){case"rgb":case"rgba":if(Ss=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(255,parseInt(Ss[1],10))/255,this.g=Math.min(255,parseInt(Ss[2],10))/255,this.b=Math.min(255,parseInt(Ss[3],10))/255,ga(Ss[5]),this;if(Ss=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs))return this.r=Math.min(100,parseInt(Ss[1],10))/100,this.g=Math.min(100,parseInt(Ss[2],10))/100,this.b=Math.min(100,parseInt(Ss[3],10))/100,ga(Ss[5]),this;break;case"hsl":case"hsla":if(Ss=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Cs)){var Ts=parseFloat(Ss[1])/360,Bs=parseInt(Ss[2],10)/100,Ps=parseInt(Ss[3],10)/100;return ga(Ss[5]),this.setHSL(Ts,Bs,Ps)}break}}else if(_s=/^\#([A-Fa-f0-9]+)$/.exec(ca)){var Ls=_s[1],Rs=Ls.length;if(Rs===3)return this.r=parseInt(Ls.charAt(0)+Ls.charAt(0),16)/255,this.g=parseInt(Ls.charAt(1)+Ls.charAt(1),16)/255,this.b=parseInt(Ls.charAt(2)+Ls.charAt(2),16)/255,this;if(Rs===6)return this.r=parseInt(Ls.charAt(0)+Ls.charAt(1),16)/255,this.g=parseInt(Ls.charAt(2)+Ls.charAt(3),16)/255,this.b=parseInt(Ls.charAt(4)+Ls.charAt(5),16)/255,this}return ca&&ca.length>0?this.setColorName(ca):this},setColorName:function(ca){var ga=_colorKeywords[ca];return ga!==void 0?this.setHex(ga):console.warn("THREE.Color: Unknown color "+ca),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(ca){return this.r=ca.r,this.g=ca.g,this.b=ca.b,this},copyGammaToLinear:function(ca,ga){return ga===void 0&&(ga=2),this.r=Math.pow(ca.r,ga),this.g=Math.pow(ca.g,ga),this.b=Math.pow(ca.b,ga),this},copyLinearToGamma:function(ca,ga){ga===void 0&&(ga=2);var _s=ga>0?1/ga:1;return this.r=Math.pow(ca.r,_s),this.g=Math.pow(ca.g,_s),this.b=Math.pow(ca.b,_s),this},convertGammaToLinear:function(ca){return this.copyGammaToLinear(this,ca),this},convertLinearToGamma:function(ca){return this.copyLinearToGamma(this,ca),this},copySRGBToLinear:function(ca){return this.r=SRGBToLinear(ca.r),this.g=SRGBToLinear(ca.g),this.b=SRGBToLinear(ca.b),this},copyLinearToSRGB:function(ca){return this.r=LinearToSRGB(ca.r),this.g=LinearToSRGB(ca.g),this.b=LinearToSRGB(ca.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(ca){ca===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),ca={h:0,s:0,l:0});var ga=this.r,_s=this.g,Ss=this.b,Ms=Math.max(ga,_s,Ss),Cs=Math.min(ga,_s,Ss),Ts,Bs,Ps=(Cs+Ms)/2;if(Cs===Ms)Ts=0,Bs=0;else{var Ls=Ms-Cs;switch(Bs=Ps<=.5?Ls/(Ms+Cs):Ls/(2-Ms-Cs),Ms){case ga:Ts=(_s-Ss)/Ls+(_s<Ss?6:0);break;case _s:Ts=(Ss-ga)/Ls+2;break;case Ss:Ts=(ga-_s)/Ls+4;break}Ts/=6}return ca.h=Ts,ca.s=Bs,ca.l=Ps,ca},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(ca,ga,_s){return this.getHSL(_hslA),_hslA.h+=ca,_hslA.s+=ga,_hslA.l+=_s,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(ca){return this.r+=ca.r,this.g+=ca.g,this.b+=ca.b,this},addColors:function(ca,ga){return this.r=ca.r+ga.r,this.g=ca.g+ga.g,this.b=ca.b+ga.b,this},addScalar:function(ca){return this.r+=ca,this.g+=ca,this.b+=ca,this},sub:function(ca){return this.r=Math.max(0,this.r-ca.r),this.g=Math.max(0,this.g-ca.g),this.b=Math.max(0,this.b-ca.b),this},multiply:function(ca){return this.r*=ca.r,this.g*=ca.g,this.b*=ca.b,this},multiplyScalar:function(ca){return this.r*=ca,this.g*=ca,this.b*=ca,this},lerp:function(ca,ga){return this.r+=(ca.r-this.r)*ga,this.g+=(ca.g-this.g)*ga,this.b+=(ca.b-this.b)*ga,this},lerpHSL:function(ca,ga){this.getHSL(_hslA),ca.getHSL(_hslB);var _s=MathUtils.lerp(_hslA.h,_hslB.h,ga),Ss=MathUtils.lerp(_hslA.s,_hslB.s,ga),Ms=MathUtils.lerp(_hslA.l,_hslB.l,ga);return this.setHSL(_s,Ss,Ms),this},equals:function(ca){return ca.r===this.r&&ca.g===this.g&&ca.b===this.b},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.r=ca[ga],this.g=ca[ga+1],this.b=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.r,ca[ga+1]=this.g,ca[ga+2]=this.b,ca},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(ca,ga,_s,Ss,Ms,Cs){this.a=ca,this.b=ga,this.c=_s,this.normal=Ss&&Ss.isVector3?Ss:new Vector3,this.vertexNormals=Array.isArray(Ss)?Ss:[],this.color=Ms&&Ms.isColor?Ms:new Color,this.vertexColors=Array.isArray(Ms)?Ms:[],this.materialIndex=Cs!==void 0?Cs:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.a=ca.a,this.b=ca.b,this.c=ca.c,this.normal.copy(ca.normal),this.color.copy(ca.color),this.materialIndex=ca.materialIndex;for(var ga=0,_s=ca.vertexNormals.length;ga<_s;ga++)this.vertexNormals[ga]=ca.vertexNormals[ga].clone();for(var ga=0,_s=ca.vertexColors.length;ga<_s;ga++)this.vertexColors[ga]=ca.vertexColors[ga].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(ca){if(ca!==void 0)for(var ga in ca){var _s=ca[ga];if(_s===void 0){console.warn("THREE.Material: '"+ga+"' parameter is undefined.");continue}if(ga==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_s===FlatShading;continue}var Ss=this[ga];if(Ss===void 0){console.warn("THREE."+this.type+": '"+ga+"' is not a property of this material.");continue}Ss&&Ss.isColor?Ss.set(_s):Ss&&Ss.isVector3&&_s&&_s.isVector3?Ss.copy(_s):this[ga]=_s}},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";ga&&(ca={textures:{},images:{}});var _s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};_s.uuid=this.uuid,_s.type=this.type,this.name!==""&&(_s.name=this.name),this.color&&this.color.isColor&&(_s.color=this.color.getHex()),this.roughness!==void 0&&(_s.roughness=this.roughness),this.metalness!==void 0&&(_s.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(_s.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(_s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(_s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(_s.specular=this.specular.getHex()),this.shininess!==void 0&&(_s.shininess=this.shininess),this.clearcoat!==void 0&&(_s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(_s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(_s.clearcoatMap=this.clearcoatMap.toJSON(ca).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(_s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(ca).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(_s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(ca).uuid,_s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(_s.map=this.map.toJSON(ca).uuid),this.matcap&&this.matcap.isTexture&&(_s.matcap=this.matcap.toJSON(ca).uuid),this.alphaMap&&this.alphaMap.isTexture&&(_s.alphaMap=this.alphaMap.toJSON(ca).uuid),this.lightMap&&this.lightMap.isTexture&&(_s.lightMap=this.lightMap.toJSON(ca).uuid),this.aoMap&&this.aoMap.isTexture&&(_s.aoMap=this.aoMap.toJSON(ca).uuid,_s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(_s.bumpMap=this.bumpMap.toJSON(ca).uuid,_s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(_s.normalMap=this.normalMap.toJSON(ca).uuid,_s.normalMapType=this.normalMapType,_s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(_s.displacementMap=this.displacementMap.toJSON(ca).uuid,_s.displacementScale=this.displacementScale,_s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(_s.roughnessMap=this.roughnessMap.toJSON(ca).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(_s.metalnessMap=this.metalnessMap.toJSON(ca).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(_s.emissiveMap=this.emissiveMap.toJSON(ca).uuid),this.specularMap&&this.specularMap.isTexture&&(_s.specularMap=this.specularMap.toJSON(ca).uuid),this.envMap&&this.envMap.isTexture&&(_s.envMap=this.envMap.toJSON(ca).uuid,_s.reflectivity=this.reflectivity,_s.refractionRatio=this.refractionRatio,this.combine!==void 0&&(_s.combine=this.combine),this.envMapIntensity!==void 0&&(_s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(_s.gradientMap=this.gradientMap.toJSON(ca).uuid),this.size!==void 0&&(_s.size=this.size),this.sizeAttenuation!==void 0&&(_s.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(_s.blending=this.blending),this.flatShading===!0&&(_s.flatShading=this.flatShading),this.side!==FrontSide&&(_s.side=this.side),this.vertexColors&&(_s.vertexColors=!0),this.opacity<1&&(_s.opacity=this.opacity),this.transparent===!0&&(_s.transparent=this.transparent),_s.depthFunc=this.depthFunc,_s.depthTest=this.depthTest,_s.depthWrite=this.depthWrite,_s.stencilWrite=this.stencilWrite,_s.stencilWriteMask=this.stencilWriteMask,_s.stencilFunc=this.stencilFunc,_s.stencilRef=this.stencilRef,_s.stencilFuncMask=this.stencilFuncMask,_s.stencilFail=this.stencilFail,_s.stencilZFail=this.stencilZFail,_s.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(_s.rotation=this.rotation),this.polygonOffset===!0&&(_s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(_s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(_s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(_s.linewidth=this.linewidth),this.dashSize!==void 0&&(_s.dashSize=this.dashSize),this.gapSize!==void 0&&(_s.gapSize=this.gapSize),this.scale!==void 0&&(_s.scale=this.scale),this.dithering===!0&&(_s.dithering=!0),this.alphaTest>0&&(_s.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(_s.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(_s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(_s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(_s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(_s.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(_s.morphTargets=!0),this.morphNormals===!0&&(_s.morphNormals=!0),this.skinning===!0&&(_s.skinning=!0),this.visible===!1&&(_s.visible=!1),this.toneMapped===!1&&(_s.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(_s.userData=this.userData);function Ss(Ts){var Bs=[];for(var Ps in Ts){var Ls=Ts[Ps];delete Ls.metadata,Bs.push(Ls)}return Bs}if(ga){var Ms=Ss(ca.textures),Cs=Ss(ca.images);Ms.length>0&&(_s.textures=Ms),Cs.length>0&&(_s.images=Cs)}return _s},clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.name=ca.name,this.fog=ca.fog,this.blending=ca.blending,this.side=ca.side,this.flatShading=ca.flatShading,this.vertexColors=ca.vertexColors,this.opacity=ca.opacity,this.transparent=ca.transparent,this.blendSrc=ca.blendSrc,this.blendDst=ca.blendDst,this.blendEquation=ca.blendEquation,this.blendSrcAlpha=ca.blendSrcAlpha,this.blendDstAlpha=ca.blendDstAlpha,this.blendEquationAlpha=ca.blendEquationAlpha,this.depthFunc=ca.depthFunc,this.depthTest=ca.depthTest,this.depthWrite=ca.depthWrite,this.stencilWriteMask=ca.stencilWriteMask,this.stencilFunc=ca.stencilFunc,this.stencilRef=ca.stencilRef,this.stencilFuncMask=ca.stencilFuncMask,this.stencilFail=ca.stencilFail,this.stencilZFail=ca.stencilZFail,this.stencilZPass=ca.stencilZPass,this.stencilWrite=ca.stencilWrite;var ga=ca.clippingPlanes,_s=null;if(ga!==null){var Ss=ga.length;_s=new Array(Ss);for(var Ms=0;Ms!==Ss;++Ms)_s[Ms]=ga[Ms].clone()}return this.clippingPlanes=_s,this.clipIntersection=ca.clipIntersection,this.clipShadows=ca.clipShadows,this.shadowSide=ca.shadowSide,this.colorWrite=ca.colorWrite,this.precision=ca.precision,this.polygonOffset=ca.polygonOffset,this.polygonOffsetFactor=ca.polygonOffsetFactor,this.polygonOffsetUnits=ca.polygonOffsetUnits,this.dithering=ca.dithering,this.alphaTest=ca.alphaTest,this.premultipliedAlpha=ca.premultipliedAlpha,this.visible=ca.visible,this.toneMapped=ca.toneMapped,this.userData=JSON.parse(JSON.stringify(ca.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function MeshBasicMaterial(ca){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(ca)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(ca,ga,_s){if(Array.isArray(ca))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=ca,this.itemSize=ga,this.count=ca!==void 0?ca.length/ga:0,this.normalized=_s===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.name=ca.name,this.array=new ca.array.constructor(ca.array),this.itemSize=ca.itemSize,this.count=ca.count,this.normalized=ca.normalized,this.usage=ca.usage,this},copyAt:function(ca,ga,_s){ca*=this.itemSize,_s*=ga.itemSize;for(var Ss=0,Ms=this.itemSize;Ss<Ms;Ss++)this.array[ca+Ss]=ga.array[_s+Ss];return this},copyArray:function(ca){return this.array.set(ca),this},copyColorsArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ss),Cs=new Color),ga[_s++]=Cs.r,ga[_s++]=Cs.g,ga[_s++]=Cs.b}return this},copyVector2sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ss),Cs=new Vector2),ga[_s++]=Cs.x,ga[_s++]=Cs.y}return this},copyVector3sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ss),Cs=new Vector3),ga[_s++]=Cs.x,ga[_s++]=Cs.y,ga[_s++]=Cs.z}return this},copyVector4sArray:function(ca){for(var ga=this.array,_s=0,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];Cs===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ss),Cs=new Vector4),ga[_s++]=Cs.x,ga[_s++]=Cs.y,ga[_s++]=Cs.z,ga[_s++]=Cs.w}return this},applyMatrix3:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix3(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix4(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyNormalMatrix(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(ca){for(var ga=0,_s=this.count;ga<_s;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.transformDirection(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},getX:function(ca){return this.array[ca*this.itemSize]},setX:function(ca,ga){return this.array[ca*this.itemSize]=ga,this},getY:function(ca){return this.array[ca*this.itemSize+1]},setY:function(ca,ga){return this.array[ca*this.itemSize+1]=ga,this},getZ:function(ca){return this.array[ca*this.itemSize+2]},setZ:function(ca,ga){return this.array[ca*this.itemSize+2]=ga,this},getW:function(ca){return this.array[ca*this.itemSize+3]},setW:function(ca,ga){return this.array[ca*this.itemSize+3]=ga,this},setXY:function(ca,ga,_s){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this},setXYZ:function(ca,ga,_s,Ss){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this.array[ca+2]=Ss,this},setXYZW:function(ca,ga,_s,Ss,Ms){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=_s,this.array[ca+2]=Ss,this.array[ca+3]=Ms,this},onUpload:function(ca){return this.onUploadCallback=ca,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int8Array(ca),ga,_s)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint8Array(ca),ga,_s)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint8ClampedArray(ca),ga,_s)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int16Array(ca),ga,_s)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint16Array(ca),ga,_s)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Int32Array(ca),ga,_s)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Uint32Array(ca),ga,_s)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Float32Array(ca),ga,_s)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(ca,ga,_s){BufferAttribute.call(this,new Float64Array(ca),ga,_s)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(ca){for(var ga,_s=[],Ss=void 0,Ms=ca.faces,Cs=0;Cs<Ms.length;Cs++){var Ts=Ms[Cs];Ts.materialIndex!==Ss&&(Ss=Ts.materialIndex,ga!==void 0&&(ga.count=Cs*3-ga.start,_s.push(ga)),ga={start:Cs*3,materialIndex:Ss})}ga!==void 0&&(ga.count=Cs*3-ga.start,_s.push(ga)),this.groups=_s},fromGeometry:function(ca){var ga=ca.faces,_s=ca.vertices,Ss=ca.faceVertexUvs,Ms=Ss[0]&&Ss[0].length>0,Cs=Ss[1]&&Ss[1].length>0,Ts=ca.morphTargets,Bs=Ts.length,Ps;if(Bs>0){Ps=[];for(var Ls=0;Ls<Bs;Ls++)Ps[Ls]={name:Ts[Ls].name,data:[]};this.morphTargets.position=Ps}var Rs=ca.morphNormals,Ds=Rs.length,$s;if(Ds>0){$s=[];for(var Ls=0;Ls<Ds;Ls++)$s[Ls]={name:Rs[Ls].name,data:[]};this.morphTargets.normal=$s}var Fs=ca.skinIndices,Gs=ca.skinWeights,Vs=Fs.length===_s.length,ks=Gs.length===_s.length;_s.length>0&&ga.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Ls=0;Ls<ga.length;Ls++){var Os=ga[Ls];this.vertices.push(_s[Os.a],_s[Os.b],_s[Os.c]);var Ns=Os.vertexNormals;if(Ns.length===3)this.normals.push(Ns[0],Ns[1],Ns[2]);else{var Us=Os.normal;this.normals.push(Us,Us,Us)}var Hs=Os.vertexColors;if(Hs.length===3)this.colors.push(Hs[0],Hs[1],Hs[2]);else{var zs=Os.color;this.colors.push(zs,zs,zs)}if(Ms===!0){var js=Ss[0][Ls];js!==void 0?this.uvs.push(js[0],js[1],js[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ls),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Cs===!0){var js=Ss[1][Ls];js!==void 0?this.uvs2.push(js[0],js[1],js[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ls),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Ws=0;Ws<Bs;Ws++){var Qs=Ts[Ws].vertices;Ps[Ws].data.push(Qs[Os.a],Qs[Os.b],Qs[Os.c])}for(var Ws=0;Ws<Ds;Ws++){var qs=Rs[Ws].vertexNormals[Ls];$s[Ws].data.push(qs.a,qs.b,qs.c)}Vs&&this.skinIndices.push(Fs[Os.a],Fs[Os.b],Fs[Os.c]),ks&&this.skinWeights.push(Gs[Os.a],Gs[Os.b],Gs[Os.c])}return this.computeGroups(ca),this.verticesNeedUpdate=ca.verticesNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this}});function arrayMax(ca){if(ca.length===0)return-1/0;let ga=ca[0];for(let _s=1,Ss=ca.length;_s<Ss;++_s)ca[_s]>ga&&(ga=ca[_s]);return ga}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(ca){Array.isArray(ca)?this.index=new(arrayMax(ca)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ca,1):this.index=ca},getAttribute:function(ca){return this.attributes[ca]},setAttribute:function(ca,ga){return this.attributes[ca]=ga,this},deleteAttribute:function(ca){return delete this.attributes[ca],this},addGroup:function(ca,ga,_s){this.groups.push({start:ca,count:ga,materialIndex:_s!==void 0?_s:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(ca,ga){this.drawRange.start=ca,this.drawRange.count=ga},applyMatrix4:function(ca){var ga=this.attributes.position;ga!==void 0&&(ga.applyMatrix4(ca),ga.needsUpdate=!0);var _s=this.attributes.normal;if(_s!==void 0){var Ss=new Matrix3().getNormalMatrix(ca);_s.applyNormalMatrix(Ss),_s.needsUpdate=!0}var Ms=this.attributes.tangent;return Ms!==void 0&&(Ms.transformDirection(ca),Ms.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(ca){return _m1$2.makeRotationX(ca),this.applyMatrix4(_m1$2),this},rotateY:function(ca){return _m1$2.makeRotationY(ca),this.applyMatrix4(_m1$2),this},rotateZ:function(ca){return _m1$2.makeRotationZ(ca),this.applyMatrix4(_m1$2),this},translate:function(ca,ga,_s){return _m1$2.makeTranslation(ca,ga,_s),this.applyMatrix4(_m1$2),this},scale:function(ca,ga,_s){return _m1$2.makeScale(ca,ga,_s),this.applyMatrix4(_m1$2),this},lookAt:function(ca){return _obj.lookAt(ca),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(ca){var ga=ca.geometry;if(ca.isPoints||ca.isLine){var _s=new Float32BufferAttribute(ga.vertices.length*3,3),Ss=new Float32BufferAttribute(ga.colors.length*3,3);if(this.setAttribute("position",_s.copyVector3sArray(ga.vertices)),this.setAttribute("color",Ss.copyColorsArray(ga.colors)),ga.lineDistances&&ga.lineDistances.length===ga.vertices.length){var Ms=new Float32BufferAttribute(ga.lineDistances.length,1);this.setAttribute("lineDistance",Ms.copyArray(ga.lineDistances))}ga.boundingSphere!==null&&(this.boundingSphere=ga.boundingSphere.clone()),ga.boundingBox!==null&&(this.boundingBox=ga.boundingBox.clone())}else ca.isMesh&&ga&&ga.isGeometry&&this.fromGeometry(ga);return this},setFromPoints:function(ca){for(var ga=[],_s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.push(Ms.x,Ms.y,Ms.z||0)}return this.setAttribute("position",new Float32BufferAttribute(ga,3)),this},updateFromObject:function(ca){var ga=ca.geometry;if(ca.isMesh){var _s=ga.__directGeometry;if(ga.elementsNeedUpdate===!0&&(_s=void 0,ga.elementsNeedUpdate=!1),_s===void 0)return this.fromGeometry(ga);_s.verticesNeedUpdate=ga.verticesNeedUpdate,_s.normalsNeedUpdate=ga.normalsNeedUpdate,_s.colorsNeedUpdate=ga.colorsNeedUpdate,_s.uvsNeedUpdate=ga.uvsNeedUpdate,_s.groupsNeedUpdate=ga.groupsNeedUpdate,ga.verticesNeedUpdate=!1,ga.normalsNeedUpdate=!1,ga.colorsNeedUpdate=!1,ga.uvsNeedUpdate=!1,ga.groupsNeedUpdate=!1,ga=_s}var Ss;return ga.verticesNeedUpdate===!0&&(Ss=this.attributes.position,Ss!==void 0&&(Ss.copyVector3sArray(ga.vertices),Ss.needsUpdate=!0),ga.verticesNeedUpdate=!1),ga.normalsNeedUpdate===!0&&(Ss=this.attributes.normal,Ss!==void 0&&(Ss.copyVector3sArray(ga.normals),Ss.needsUpdate=!0),ga.normalsNeedUpdate=!1),ga.colorsNeedUpdate===!0&&(Ss=this.attributes.color,Ss!==void 0&&(Ss.copyColorsArray(ga.colors),Ss.needsUpdate=!0),ga.colorsNeedUpdate=!1),ga.uvsNeedUpdate&&(Ss=this.attributes.uv,Ss!==void 0&&(Ss.copyVector2sArray(ga.uvs),Ss.needsUpdate=!0),ga.uvsNeedUpdate=!1),ga.lineDistancesNeedUpdate&&(Ss=this.attributes.lineDistance,Ss!==void 0&&(Ss.copyArray(ga.lineDistances),Ss.needsUpdate=!0),ga.lineDistancesNeedUpdate=!1),ga.groupsNeedUpdate&&(ga.computeGroups(ca.geometry),this.groups=ga.groups,ga.groupsNeedUpdate=!1),this},fromGeometry:function(ca){return ca.__directGeometry=new DirectGeometry().fromGeometry(ca),this.fromDirectGeometry(ca.__directGeometry)},fromDirectGeometry:function(ca){var ga=new Float32Array(ca.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(ga,3).copyVector3sArray(ca.vertices)),ca.normals.length>0){var _s=new Float32Array(ca.normals.length*3);this.setAttribute("normal",new BufferAttribute(_s,3).copyVector3sArray(ca.normals))}if(ca.colors.length>0){var Ss=new Float32Array(ca.colors.length*3);this.setAttribute("color",new BufferAttribute(Ss,3).copyColorsArray(ca.colors))}if(ca.uvs.length>0){var Ms=new Float32Array(ca.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Ms,2).copyVector2sArray(ca.uvs))}if(ca.uvs2.length>0){var Cs=new Float32Array(ca.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Cs,2).copyVector2sArray(ca.uvs2))}this.groups=ca.groups;for(var Ts in ca.morphTargets){for(var Bs=[],Ps=ca.morphTargets[Ts],Ls=0,Rs=Ps.length;Ls<Rs;Ls++){var Ds=Ps[Ls],$s=new Float32BufferAttribute(Ds.data.length*3,3);$s.name=Ds.name,Bs.push($s.copyVector3sArray(Ds.data))}this.morphAttributes[Ts]=Bs}if(ca.skinIndices.length>0){var Fs=new Float32BufferAttribute(ca.skinIndices.length*4,4);this.setAttribute("skinIndex",Fs.copyVector4sArray(ca.skinIndices))}if(ca.skinWeights.length>0){var Gs=new Float32BufferAttribute(ca.skinWeights.length*4,4);this.setAttribute("skinWeight",Gs.copyVector4sArray(ca.skinWeights))}return ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca!==void 0){if(this.boundingBox.setFromBufferAttribute(ca),ga)for(var _s=0,Ss=ga.length;_s<Ss;_s++){var Ms=ga[_s];_box$2.setFromBufferAttribute(Ms),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca){var _s=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(ca),ga)for(var Ss=0,Ms=ga.length;Ss<Ms;Ss++){var Cs=ga[Ss];_boxMorphTargets.setFromBufferAttribute(Cs),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(_s);for(var Ts=0,Ss=0,Ms=ca.count;Ss<Ms;Ss++)_vector$4.fromBufferAttribute(ca,Ss),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));if(ga)for(var Ss=0,Ms=ga.length;Ss<Ms;Ss++)for(var Cs=ga[Ss],Bs=this.morphTargetsRelative,Ps=0,Ls=Cs.count;Ps<Ls;Ps++)_vector$4.fromBufferAttribute(Cs,Ps),Bs&&(_offset.fromBufferAttribute(ca,Ps),_vector$4.add(_offset)),Ts=Math.max(Ts,_s.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Ts),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var ca=this.index,ga=this.attributes;if(ga.position){var _s=ga.position.array;if(ga.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(_s.length),3));else for(var Ss=ga.normal.array,Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms]=0;var Ts=ga.normal.array,Bs,Ps,Ls,Rs=new Vector3,Ds=new Vector3,$s=new Vector3,Fs=new Vector3,Gs=new Vector3;if(ca)for(var Vs=ca.array,Ms=0,Cs=ca.count;Ms<Cs;Ms+=3)Bs=Vs[Ms+0]*3,Ps=Vs[Ms+1]*3,Ls=Vs[Ms+2]*3,Rs.fromArray(_s,Bs),Ds.fromArray(_s,Ps),$s.fromArray(_s,Ls),Fs.subVectors($s,Ds),Gs.subVectors(Rs,Ds),Fs.cross(Gs),Ts[Bs]+=Fs.x,Ts[Bs+1]+=Fs.y,Ts[Bs+2]+=Fs.z,Ts[Ps]+=Fs.x,Ts[Ps+1]+=Fs.y,Ts[Ps+2]+=Fs.z,Ts[Ls]+=Fs.x,Ts[Ls+1]+=Fs.y,Ts[Ls+2]+=Fs.z;else for(var Ms=0,Cs=_s.length;Ms<Cs;Ms+=9)Rs.fromArray(_s,Ms),Ds.fromArray(_s,Ms+3),$s.fromArray(_s,Ms+6),Fs.subVectors($s,Ds),Gs.subVectors(Rs,Ds),Fs.cross(Gs),Ts[Ms]=Fs.x,Ts[Ms+1]=Fs.y,Ts[Ms+2]=Fs.z,Ts[Ms+3]=Fs.x,Ts[Ms+4]=Fs.y,Ts[Ms+5]=Fs.z,Ts[Ms+6]=Fs.x,Ts[Ms+7]=Fs.y,Ts[Ms+8]=Fs.z;this.normalizeNormals(),ga.normal.needsUpdate=!0}},merge:function(ca,ga){if(!(ca&&ca.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",ca);return}ga===void 0&&(ga=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var _s=this.attributes;for(var Ss in _s)if(ca.attributes[Ss]!==void 0)for(var Ms=_s[Ss],Cs=Ms.array,Ts=ca.attributes[Ss],Bs=Ts.array,Ps=Ts.itemSize*ga,Ls=Math.min(Bs.length,Cs.length-Ps),Rs=0,Ds=Ps;Rs<Ls;Rs++,Ds++)Cs[Ds]=Bs[Rs];return this},normalizeNormals:function(){for(var ca=this.attributes.normal,ga=0,_s=ca.count;ga<_s;ga++)_vector$4.x=ca.getX(ga),_vector$4.y=ca.getY(ga),_vector$4.z=ca.getZ(ga),_vector$4.normalize(),ca.setXYZ(ga,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function ca(Vs,ks){for(var Os=Vs.array,Ns=Vs.itemSize,Us=Vs.normalized,Hs=new Os.constructor(ks.length*Ns),zs=0,js=0,Ws=0,Qs=ks.length;Ws<Qs;Ws++){zs=ks[Ws]*Ns;for(var qs=0;qs<Ns;qs++)Hs[js++]=Os[zs++]}return new BufferAttribute(Hs,Ns,Us)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var ga=new BufferGeometry,_s=this.index.array,Ss=this.attributes;for(var Ms in Ss){var Cs=Ss[Ms],Ts=ca(Cs,_s);ga.setAttribute(Ms,Ts)}var Bs=this.morphAttributes;for(Ms in Bs){for(var Ps=[],Ls=Bs[Ms],Rs=0,Ds=Ls.length;Rs<Ds;Rs++){var Cs=Ls[Rs],Ts=ca(Cs,_s);Ps.push(Ts)}ga.morphAttributes[Ms]=Ps}ga.morphTargetsRelative=this.morphTargetsRelative;for(var $s=this.groups,Rs=0,Fs=$s.length;Rs<Fs;Rs++){var Gs=$s[Rs];ga.addGroup(Gs.start,Gs.count,Gs.materialIndex)}return ga},toJSON:function(){var ca={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),Object.keys(this.userData).length>0&&(ca.userData=this.userData),this.parameters!==void 0){var ga=this.parameters;for(var _s in ga)ga[_s]!==void 0&&(ca[_s]=ga[_s]);return ca}ca.data={attributes:{}};var Ss=this.index;Ss!==null&&(ca.data.index={type:Ss.array.constructor.name,array:Array.prototype.slice.call(Ss.array)});var Ms=this.attributes;for(var _s in Ms){var Cs=Ms[_s],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),ca.data.attributes[_s]=Ts}var Bs={},Ps=!1;for(var _s in this.morphAttributes){for(var Ls=this.morphAttributes[_s],Rs=[],Ds=0,$s=Ls.length;Ds<$s;Ds++){var Cs=Ls[Ds],Ts=Cs.toJSON();Cs.name!==""&&(Ts.name=Cs.name),Rs.push(Ts)}Rs.length>0&&(Bs[_s]=Rs,Ps=!0)}Ps&&(ca.data.morphAttributes=Bs,ca.data.morphTargetsRelative=this.morphTargetsRelative);var Fs=this.groups;Fs.length>0&&(ca.data.groups=JSON.parse(JSON.stringify(Fs)));var Gs=this.boundingSphere;return Gs!==null&&(ca.data.boundingSphere={center:Gs.center.toArray(),radius:Gs.radius}),ca},clone:function(){return new BufferGeometry().copy(this)},copy:function(ca){var ga,_s,Ss;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var Ms=ca.index;Ms!==null&&this.setIndex(Ms.clone());var Cs=ca.attributes;for(ga in Cs){var Ts=Cs[ga];this.setAttribute(ga,Ts.clone())}var Bs=ca.morphAttributes;for(ga in Bs){var Ps=[],Ls=Bs[ga];for(_s=0,Ss=Ls.length;_s<Ss;_s++)Ps.push(Ls[_s].clone());this.morphAttributes[ga]=Ps}this.morphTargetsRelative=ca.morphTargetsRelative;var Rs=ca.groups;for(_s=0,Ss=Rs.length;_s<Ss;_s++){var Ds=Rs[_s];this.addGroup(Ds.start,Ds.count,Ds.materialIndex)}var $s=ca.boundingBox;$s!==null&&(this.boundingBox=$s.clone());var Fs=ca.boundingSphere;return Fs!==null&&(this.boundingSphere=Fs.clone()),this.drawRange.start=ca.drawRange.start,this.drawRange.count=ca.drawRange.count,this.userData=ca.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(ca,ga){Object3D.call(this),this.type="Mesh",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=ca.morphTargetInfluences.slice()),ca.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},ca.morphTargetDictionary)),this},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Bs=ca.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(ca,ga){var _s=this.geometry,Ss=this.material,Ms=this.matrixWorld;if(Ss!==void 0&&(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere.copy(_s.boundingSphere),_sphere.applyMatrix4(Ms),ca.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Ms),_ray.copy(ca.ray).applyMatrix4(_inverseMatrix),!(_s.boundingBox!==null&&_ray.intersectsBox(_s.boundingBox)===!1)))){var Cs;if(_s.isBufferGeometry){var Ts,Bs,Ps,Ls=_s.index,Rs=_s.attributes.position,Ds=_s.morphAttributes.position,$s=_s.morphTargetsRelative,Fs=_s.attributes.uv,Gs=_s.attributes.uv2,Vs=_s.groups,ks=_s.drawRange,Os,Ns,Us,Hs,zs,js,Ws,Qs;if(Ls!==null)if(Array.isArray(Ss))for(Os=0,Us=Vs.length;Os<Us;Os++)for(zs=Vs[Os],js=Ss[zs.materialIndex],Ws=Math.max(zs.start,ks.start),Qs=Math.min(zs.start+zs.count,ks.start+ks.count),Ns=Ws,Hs=Qs;Ns<Hs;Ns+=3)Ts=Ls.getX(Ns),Bs=Ls.getX(Ns+1),Ps=Ls.getX(Ns+2),Cs=checkBufferGeometryIntersection(this,js,ca,_ray,Rs,Ds,$s,Fs,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Ns/3),Cs.face.materialIndex=zs.materialIndex,ga.push(Cs));else for(Ws=Math.max(0,ks.start),Qs=Math.min(Ls.count,ks.start+ks.count),Os=Ws,Us=Qs;Os<Us;Os+=3)Ts=Ls.getX(Os),Bs=Ls.getX(Os+1),Ps=Ls.getX(Os+2),Cs=checkBufferGeometryIntersection(this,Ss,ca,_ray,Rs,Ds,$s,Fs,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Os/3),ga.push(Cs));else if(Rs!==void 0)if(Array.isArray(Ss))for(Os=0,Us=Vs.length;Os<Us;Os++)for(zs=Vs[Os],js=Ss[zs.materialIndex],Ws=Math.max(zs.start,ks.start),Qs=Math.min(zs.start+zs.count,ks.start+ks.count),Ns=Ws,Hs=Qs;Ns<Hs;Ns+=3)Ts=Ns,Bs=Ns+1,Ps=Ns+2,Cs=checkBufferGeometryIntersection(this,js,ca,_ray,Rs,Ds,$s,Fs,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Ns/3),Cs.face.materialIndex=zs.materialIndex,ga.push(Cs));else for(Ws=Math.max(0,ks.start),Qs=Math.min(Rs.count,ks.start+ks.count),Os=Ws,Us=Qs;Os<Us;Os+=3)Ts=Os,Bs=Os+1,Ps=Os+2,Cs=checkBufferGeometryIntersection(this,Ss,ca,_ray,Rs,Ds,$s,Fs,Gs,Ts,Bs,Ps),Cs&&(Cs.faceIndex=Math.floor(Os/3),ga.push(Cs))}else if(_s.isGeometry){var qs,tu,Ys,Ks=Array.isArray(Ss),Js=_s.vertices,eu=_s.faces,Zs,au=_s.faceVertexUvs[0];au.length>0&&(Zs=au);for(var ru=0,su=eu.length;ru<su;ru++){var lu=eu[ru],gu=Ks?Ss[lu.materialIndex]:Ss;if(gu!==void 0&&(qs=Js[lu.a],tu=Js[lu.b],Ys=Js[lu.c],Cs=checkIntersection(this,gu,ca,_ray,qs,tu,Ys,_intersectionPoint),Cs)){if(Zs&&Zs[ru]){var hu=Zs[ru];_uvA.copy(hu[0]),_uvB.copy(hu[1]),_uvC.copy(hu[2]),Cs.uv=Triangle.getUV(_intersectionPoint,qs,tu,Ys,_uvA,_uvB,_uvC,new Vector2)}Cs.face=lu,Cs.faceIndex=ru,ga.push(Cs)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){var Ps;if(ga.side===BackSide?Ps=Ss.intersectTriangle(Ts,Cs,Ms,!0,Bs):Ps=Ss.intersectTriangle(Ms,Cs,Ts,ga.side!==DoubleSide,Bs),Ps===null)return null;_intersectionPointWorld.copy(Bs),_intersectionPointWorld.applyMatrix4(ca.matrixWorld);var Ls=_s.ray.origin.distanceTo(_intersectionPointWorld);return Ls<_s.near||Ls>_s.far?null:{distance:Ls,point:_intersectionPointWorld.clone(),object:ca}}function checkBufferGeometryIntersection(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds){_vA.fromBufferAttribute(Ms,Ls),_vB.fromBufferAttribute(Ms,Rs),_vC.fromBufferAttribute(Ms,Ds);var $s=ca.morphTargetInfluences;if(ga.morphTargets&&Cs&&$s){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Fs=0,Gs=Cs.length;Fs<Gs;Fs++){var Vs=$s[Fs],ks=Cs[Fs];Vs!==0&&(_tempA.fromBufferAttribute(ks,Ls),_tempB.fromBufferAttribute(ks,Rs),_tempC.fromBufferAttribute(ks,Ds),Ts?(_morphA.addScaledVector(_tempA,Vs),_morphB.addScaledVector(_tempB,Vs),_morphC.addScaledVector(_tempC,Vs)):(_morphA.addScaledVector(_tempA.sub(_vA),Vs),_morphB.addScaledVector(_tempB.sub(_vB),Vs),_morphC.addScaledVector(_tempC.sub(_vC),Vs)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}ca.isSkinnedMesh&&(ca.boneTransform(Ls,_vA),ca.boneTransform(Rs,_vB),ca.boneTransform(Ds,_vC));var Os=checkIntersection(ca,ga,_s,Ss,_vA,_vB,_vC,_intersectionPoint);if(Os){Bs&&(_uvA.fromBufferAttribute(Bs,Ls),_uvB.fromBufferAttribute(Bs,Rs),_uvC.fromBufferAttribute(Bs,Ds),Os.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Ps&&(_uvA.fromBufferAttribute(Ps,Ls),_uvB.fromBufferAttribute(Ps,Rs),_uvC.fromBufferAttribute(Ps,Ds),Os.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var Ns=new Face3(Ls,Rs,Ds);Triangle.getNormal(_vA,_vB,_vC,Ns.normal),Os.face=Ns}return Os}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(ca){for(var ga=new Matrix3().getNormalMatrix(ca),_s=0,Ss=this.vertices.length;_s<Ss;_s++){var Ms=this.vertices[_s];Ms.applyMatrix4(ca)}for(var _s=0,Ss=this.faces.length;_s<Ss;_s++){var Cs=this.faces[_s];Cs.normal.applyMatrix3(ga).normalize();for(var Ts=0,Bs=Cs.vertexNormals.length;Ts<Bs;Ts++)Cs.vertexNormals[Ts].applyMatrix3(ga).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(ca){return _m1$3.makeRotationX(ca),this.applyMatrix4(_m1$3),this},rotateY:function(ca){return _m1$3.makeRotationY(ca),this.applyMatrix4(_m1$3),this},rotateZ:function(ca){return _m1$3.makeRotationZ(ca),this.applyMatrix4(_m1$3),this},translate:function(ca,ga,_s){return _m1$3.makeTranslation(ca,ga,_s),this.applyMatrix4(_m1$3),this},scale:function(ca,ga,_s){return _m1$3.makeScale(ca,ga,_s),this.applyMatrix4(_m1$3),this},lookAt:function(ca){return _obj$1.lookAt(ca),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(ca){var ga=this,_s=ca.index!==null?ca.index.array:void 0,Ss=ca.attributes;if(Ss.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Ms=Ss.position.array,Cs=Ss.normal!==void 0?Ss.normal.array:void 0,Ts=Ss.color!==void 0?Ss.color.array:void 0,Bs=Ss.uv!==void 0?Ss.uv.array:void 0,Ps=Ss.uv2!==void 0?Ss.uv2.array:void 0;Ps!==void 0&&(this.faceVertexUvs[1]=[]);for(var Ls=0;Ls<Ms.length;Ls+=3)ga.vertices.push(new Vector3().fromArray(Ms,Ls)),Ts!==void 0&&ga.colors.push(new Color().fromArray(Ts,Ls));function Rs(Os,Ns,Us,Hs){var zs=Ts===void 0?[]:[ga.colors[Os].clone(),ga.colors[Ns].clone(),ga.colors[Us].clone()],js=Cs===void 0?[]:[new Vector3().fromArray(Cs,Os*3),new Vector3().fromArray(Cs,Ns*3),new Vector3().fromArray(Cs,Us*3)],Ws=new Face3(Os,Ns,Us,js,zs,Hs);ga.faces.push(Ws),Bs!==void 0&&ga.faceVertexUvs[0].push([new Vector2().fromArray(Bs,Os*2),new Vector2().fromArray(Bs,Ns*2),new Vector2().fromArray(Bs,Us*2)]),Ps!==void 0&&ga.faceVertexUvs[1].push([new Vector2().fromArray(Ps,Os*2),new Vector2().fromArray(Ps,Ns*2),new Vector2().fromArray(Ps,Us*2)])}var Ds=ca.groups;if(Ds.length>0)for(var Ls=0;Ls<Ds.length;Ls++)for(var $s=Ds[Ls],Fs=$s.start,Gs=$s.count,Vs=Fs,ks=Fs+Gs;Vs<ks;Vs+=3)_s!==void 0?Rs(_s[Vs],_s[Vs+1],_s[Vs+2],$s.materialIndex):Rs(Vs,Vs+1,Vs+2,$s.materialIndex);else if(_s!==void 0)for(var Ls=0;Ls<_s.length;Ls+=3)Rs(_s[Ls],_s[Ls+1],_s[Ls+2]);else for(var Ls=0;Ls<Ms.length/3;Ls+=3)Rs(Ls,Ls+1,Ls+2);return this.computeFaceNormals(),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var ca=this.boundingSphere.center,ga=this.boundingSphere.radius,_s=ga===0?1:1/ga,Ss=new Matrix4;return Ss.set(_s,0,0,-_s*ca.x,0,_s,0,-_s*ca.y,0,0,_s,-_s*ca.z,0,0,0,1),this.applyMatrix4(Ss),this},computeFaceNormals:function(){for(var ca=new Vector3,ga=new Vector3,_s=0,Ss=this.faces.length;_s<Ss;_s++){var Ms=this.faces[_s],Cs=this.vertices[Ms.a],Ts=this.vertices[Ms.b],Bs=this.vertices[Ms.c];ca.subVectors(Bs,Ts),ga.subVectors(Cs,Ts),ca.cross(ga),ca.normalize(),Ms.normal.copy(ca)}},computeVertexNormals:function(ca){ca===void 0&&(ca=!0);var ga,_s,Ss,Ms,Cs,Ts;for(Ts=new Array(this.vertices.length),ga=0,_s=this.vertices.length;ga<_s;ga++)Ts[ga]=new Vector3;if(ca){var Bs,Ps,Ls,Rs=new Vector3,Ds=new Vector3;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Bs=this.vertices[Cs.a],Ps=this.vertices[Cs.b],Ls=this.vertices[Cs.c],Rs.subVectors(Ls,Ps),Ds.subVectors(Bs,Ps),Rs.cross(Ds),Ts[Cs.a].add(Rs),Ts[Cs.b].add(Rs),Ts[Cs.c].add(Rs)}else for(this.computeFaceNormals(),Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Cs=this.faces[Ss],Ts[Cs.a].add(Cs.normal),Ts[Cs.b].add(Cs.normal),Ts[Cs.c].add(Cs.normal);for(ga=0,_s=this.vertices.length;ga<_s;ga++)Ts[ga].normalize();for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++){Cs=this.faces[Ss];var $s=Cs.vertexNormals;$s.length===3?($s[0].copy(Ts[Cs.a]),$s[1].copy(Ts[Cs.b]),$s[2].copy(Ts[Cs.c])):($s[0]=Ts[Cs.a].clone(),$s[1]=Ts[Cs.b].clone(),$s[2]=Ts[Cs.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var ca,ga,_s;for(this.computeFaceNormals(),ca=0,ga=this.faces.length;ca<ga;ca++){_s=this.faces[ca];var Ss=_s.vertexNormals;Ss.length===3?(Ss[0].copy(_s.normal),Ss[1].copy(_s.normal),Ss[2].copy(_s.normal)):(Ss[0]=_s.normal.clone(),Ss[1]=_s.normal.clone(),Ss[2]=_s.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var ca,ga,_s,Ss,Ms;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)for(Ms=this.faces[_s],Ms.__originalFaceNormal?Ms.__originalFaceNormal.copy(Ms.normal):Ms.__originalFaceNormal=Ms.normal.clone(),Ms.__originalVertexNormals||(Ms.__originalVertexNormals=[]),ca=0,ga=Ms.vertexNormals.length;ca<ga;ca++)Ms.__originalVertexNormals[ca]?Ms.__originalVertexNormals[ca].copy(Ms.vertexNormals[ca]):Ms.__originalVertexNormals[ca]=Ms.vertexNormals[ca].clone();var Cs=new Geometry;for(Cs.faces=this.faces,ca=0,ga=this.morphTargets.length;ca<ga;ca++){if(!this.morphNormals[ca]){this.morphNormals[ca]={},this.morphNormals[ca].faceNormals=[],this.morphNormals[ca].vertexNormals=[];var Ts=this.morphNormals[ca].faceNormals,Bs=this.morphNormals[ca].vertexNormals,Ls,Rs;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ls=new Vector3,Rs={a:new Vector3,b:new Vector3,c:new Vector3},Ts.push(Ls),Bs.push(Rs)}var Ps=this.morphNormals[ca];Cs.vertices=this.morphTargets[ca].vertices,Cs.computeFaceNormals(),Cs.computeVertexNormals();var Ls,Rs;for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ls=Ps.faceNormals[_s],Rs=Ps.vertexNormals[_s],Ls.copy(Ms.normal),Rs.a.copy(Ms.vertexNormals[0]),Rs.b.copy(Ms.vertexNormals[1]),Rs.c.copy(Ms.vertexNormals[2])}for(_s=0,Ss=this.faces.length;_s<Ss;_s++)Ms=this.faces[_s],Ms.normal=Ms.__originalFaceNormal,Ms.vertexNormals=Ms.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(ca,ga,_s){if(!(ca&&ca.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",ca);return}var Ss,Ms=this.vertices.length,Cs=this.vertices,Ts=ca.vertices,Bs=this.faces,Ps=ca.faces,Ls=this.colors,Rs=ca.colors;_s===void 0&&(_s=0),ga!==void 0&&(Ss=new Matrix3().getNormalMatrix(ga));for(var Ds=0,$s=Ts.length;Ds<$s;Ds++){var Fs=Ts[Ds],Gs=Fs.clone();ga!==void 0&&Gs.applyMatrix4(ga),Cs.push(Gs)}for(var Ds=0,$s=Rs.length;Ds<$s;Ds++)Ls.push(Rs[Ds].clone());for(Ds=0,$s=Ps.length;Ds<$s;Ds++){var Vs=Ps[Ds],ks,Os,Ns,Us=Vs.vertexNormals,Hs=Vs.vertexColors;ks=new Face3(Vs.a+Ms,Vs.b+Ms,Vs.c+Ms),ks.normal.copy(Vs.normal),Ss!==void 0&&ks.normal.applyMatrix3(Ss).normalize();for(var zs=0,js=Us.length;zs<js;zs++)Os=Us[zs].clone(),Ss!==void 0&&Os.applyMatrix3(Ss).normalize(),ks.vertexNormals.push(Os);ks.color.copy(Vs.color);for(var zs=0,js=Hs.length;zs<js;zs++)Ns=Hs[zs],ks.vertexColors.push(Ns.clone());ks.materialIndex=Vs.materialIndex+_s,Bs.push(ks)}for(var Ds=0,$s=ca.faceVertexUvs.length;Ds<$s;Ds++){var Ws=ca.faceVertexUvs[Ds];this.faceVertexUvs[Ds]===void 0&&(this.faceVertexUvs[Ds]=[]);for(var zs=0,js=Ws.length;zs<js;zs++){for(var Qs=Ws[zs],qs=[],tu=0,Ys=Qs.length;tu<Ys;tu++)qs.push(Qs[tu].clone());this.faceVertexUvs[Ds].push(qs)}}},mergeMesh:function(ca){if(!(ca&&ca.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",ca);return}ca.matrixAutoUpdate&&ca.updateMatrix(),this.merge(ca.geometry,ca.matrix)},mergeVertices:function(){var ca={},ga=[],_s=[],Ss,Ms,Cs=4,Ts=Math.pow(10,Cs),Bs,Ps,Ls,Rs,Ds,$s;for(Bs=0,Ps=this.vertices.length;Bs<Ps;Bs++)Ss=this.vertices[Bs],Ms=Math.round(Ss.x*Ts)+"_"+Math.round(Ss.y*Ts)+"_"+Math.round(Ss.z*Ts),ca[Ms]===void 0?(ca[Ms]=Bs,ga.push(this.vertices[Bs]),_s[Bs]=ga.length-1):_s[Bs]=_s[ca[Ms]];var Fs=[];for(Bs=0,Ps=this.faces.length;Bs<Ps;Bs++){Ls=this.faces[Bs],Ls.a=_s[Ls.a],Ls.b=_s[Ls.b],Ls.c=_s[Ls.c],Rs=[Ls.a,Ls.b,Ls.c];for(var Gs=0;Gs<3;Gs++)if(Rs[Gs]===Rs[(Gs+1)%3]){Fs.push(Bs);break}}for(Bs=Fs.length-1;Bs>=0;Bs--){var Vs=Fs[Bs];for(this.faces.splice(Vs,1),Ds=0,$s=this.faceVertexUvs.length;Ds<$s;Ds++)this.faceVertexUvs[Ds].splice(Vs,1)}var ks=this.vertices.length-ga.length;return this.vertices=ga,ks},setFromPoints:function(ca){this.vertices=[];for(var ga=0,_s=ca.length;ga<_s;ga++){var Ss=ca[ga];this.vertices.push(new Vector3(Ss.x,Ss.y,Ss.z||0))}return this},sortFacesByMaterialIndex:function(){for(var ca=this.faces,ga=ca.length,_s=0;_s<ga;_s++)ca[_s]._id=_s;function Ss(Ls,Rs){return Ls.materialIndex-Rs.materialIndex}ca.sort(Ss);var Ms=this.faceVertexUvs[0],Cs=this.faceVertexUvs[1],Ts,Bs;Ms&&Ms.length===ga&&(Ts=[]),Cs&&Cs.length===ga&&(Bs=[]);for(var _s=0;_s<ga;_s++){var Ps=ca[_s]._id;Ts&&Ts.push(Ms[Ps]),Bs&&Bs.push(Cs[Ps])}Ts&&(this.faceVertexUvs[0]=Ts),Bs&&(this.faceVertexUvs[1]=Bs)},toJSON:function(){var ca={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),this.parameters!==void 0){var ga=this.parameters;for(var _s in ga)ga[_s]!==void 0&&(ca[_s]=ga[_s]);return ca}for(var Ss=[],Ms=0;Ms<this.vertices.length;Ms++){var Cs=this.vertices[Ms];Ss.push(Cs.x,Cs.y,Cs.z)}for(var Ts=[],Bs=[],Ps={},Ls=[],Rs={},Ds=[],$s={},Ms=0;Ms<this.faces.length;Ms++){var Fs=this.faces[Ms],Gs=!0,Vs=!1,ks=this.faceVertexUvs[0][Ms]!==void 0,Os=Fs.normal.length()>0,Ns=Fs.vertexNormals.length>0,Us=Fs.color.r!==1||Fs.color.g!==1||Fs.color.b!==1,Hs=Fs.vertexColors.length>0,zs=0;if(zs=qs(zs,0,0),zs=qs(zs,1,Gs),zs=qs(zs,2,Vs),zs=qs(zs,3,ks),zs=qs(zs,4,Os),zs=qs(zs,5,Ns),zs=qs(zs,6,Us),zs=qs(zs,7,Hs),Ts.push(zs),Ts.push(Fs.a,Fs.b,Fs.c),Ts.push(Fs.materialIndex),ks){var js=this.faceVertexUvs[0][Ms];Ts.push(Ks(js[0]),Ks(js[1]),Ks(js[2]))}if(Os&&Ts.push(tu(Fs.normal)),Ns){var Ws=Fs.vertexNormals;Ts.push(tu(Ws[0]),tu(Ws[1]),tu(Ws[2]))}if(Us&&Ts.push(Ys(Fs.color)),Hs){var Qs=Fs.vertexColors;Ts.push(Ys(Qs[0]),Ys(Qs[1]),Ys(Qs[2]))}}function qs(Js,eu,Zs){return Zs?Js|1<<eu:Js&~(1<<eu)}function tu(Js){var eu=Js.x.toString()+Js.y.toString()+Js.z.toString();return Ps[eu]!==void 0||(Ps[eu]=Bs.length/3,Bs.push(Js.x,Js.y,Js.z)),Ps[eu]}function Ys(Js){var eu=Js.r.toString()+Js.g.toString()+Js.b.toString();return Rs[eu]!==void 0||(Rs[eu]=Ls.length,Ls.push(Js.getHex())),Rs[eu]}function Ks(Js){var eu=Js.x.toString()+Js.y.toString();return $s[eu]!==void 0||($s[eu]=Ds.length/2,Ds.push(Js.x,Js.y)),$s[eu]}return ca.data={},ca.data.vertices=Ss,ca.data.normals=Bs,Ls.length>0&&(ca.data.colors=Ls),Ds.length>0&&(ca.data.uvs=[Ds]),ca.data.faces=Ts,ca},clone:function(){return new Geometry().copy(this)},copy:function(ca){var ga,_s,Ss,Ms,Cs,Ts;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var Bs=ca.vertices;for(ga=0,_s=Bs.length;ga<_s;ga++)this.vertices.push(Bs[ga].clone());var Ps=ca.colors;for(ga=0,_s=Ps.length;ga<_s;ga++)this.colors.push(Ps[ga].clone());var Ls=ca.faces;for(ga=0,_s=Ls.length;ga<_s;ga++)this.faces.push(Ls[ga].clone());for(ga=0,_s=ca.faceVertexUvs.length;ga<_s;ga++){var Rs=ca.faceVertexUvs[ga];for(this.faceVertexUvs[ga]===void 0&&(this.faceVertexUvs[ga]=[]),Ss=0,Ms=Rs.length;Ss<Ms;Ss++){var Ds=Rs[Ss],$s=[];for(Cs=0,Ts=Ds.length;Cs<Ts;Cs++){var Fs=Ds[Cs];$s.push(Fs.clone())}this.faceVertexUvs[ga].push($s)}}var Gs=ca.morphTargets;for(ga=0,_s=Gs.length;ga<_s;ga++){var Vs={};if(Vs.name=Gs[ga].name,Gs[ga].vertices!==void 0)for(Vs.vertices=[],Ss=0,Ms=Gs[ga].vertices.length;Ss<Ms;Ss++)Vs.vertices.push(Gs[ga].vertices[Ss].clone());if(Gs[ga].normals!==void 0)for(Vs.normals=[],Ss=0,Ms=Gs[ga].normals.length;Ss<Ms;Ss++)Vs.normals.push(Gs[ga].normals[Ss].clone());this.morphTargets.push(Vs)}var ks=ca.morphNormals;for(ga=0,_s=ks.length;ga<_s;ga++){var Os={};if(ks[ga].vertexNormals!==void 0)for(Os.vertexNormals=[],Ss=0,Ms=ks[ga].vertexNormals.length;Ss<Ms;Ss++){var Ns=ks[ga].vertexNormals[Ss],Us={};Us.a=Ns.a.clone(),Us.b=Ns.b.clone(),Us.c=Ns.c.clone(),Os.vertexNormals.push(Us)}if(ks[ga].faceNormals!==void 0)for(Os.faceNormals=[],Ss=0,Ms=ks[ga].faceNormals.length;Ss<Ms;Ss++)Os.faceNormals.push(ks[ga].faceNormals[Ss].clone());this.morphNormals.push(Os)}var Hs=ca.skinWeights;for(ga=0,_s=Hs.length;ga<_s;ga++)this.skinWeights.push(Hs[ga].clone());var zs=ca.skinIndices;for(ga=0,_s=zs.length;ga<_s;ga++)this.skinIndices.push(zs[ga].clone());var js=ca.lineDistances;for(ga=0,_s=js.length;ga<_s;ga++)this.lineDistances.push(js[ga]);var Ws=ca.boundingBox;Ws!==null&&(this.boundingBox=Ws.clone());var Qs=ca.boundingSphere;return Qs!==null&&(this.boundingSphere=Qs.clone()),this.elementsNeedUpdate=ca.elementsNeedUpdate,this.verticesNeedUpdate=ca.verticesNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.lineDistancesNeedUpdate=ca.lineDistancesNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(ga,_s,Ss,Ms,Cs,Ts){super();this.type="BoxGeometry",this.parameters={width:ga,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts},this.fromBufferGeometry(new BoxBufferGeometry(ga,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(ga,_s,Ss,Ms,Cs,Ts){super();this.type="BoxBufferGeometry",this.parameters={width:ga,height:_s,depth:Ss,widthSegments:Ms,heightSegments:Cs,depthSegments:Ts};const Bs=this;ga=ga||1,_s=_s||1,Ss=Ss||1,Ms=Math.floor(Ms)||1,Cs=Math.floor(Cs)||1,Ts=Math.floor(Ts)||1;const Ps=[],Ls=[],Rs=[],Ds=[];let $s=0,Fs=0;Gs("z","y","x",-1,-1,Ss,_s,ga,Ts,Cs,0),Gs("z","y","x",1,-1,Ss,_s,-ga,Ts,Cs,1),Gs("x","z","y",1,1,ga,Ss,_s,Ms,Ts,2),Gs("x","z","y",1,-1,ga,Ss,-_s,Ms,Ts,3),Gs("x","y","z",1,-1,ga,_s,Ss,Ms,Cs,4),Gs("x","y","z",-1,-1,ga,_s,-Ss,Ms,Cs,5),this.setIndex(Ps),this.setAttribute("position",new Float32BufferAttribute(Ls,3)),this.setAttribute("normal",new Float32BufferAttribute(Rs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ds,2));function Gs(Vs,ks,Os,Ns,Us,Hs,zs,js,Ws,Qs,qs){const tu=Hs/Ws,Ys=zs/Qs,Ks=Hs/2,Js=zs/2,eu=js/2,Zs=Ws+1,au=Qs+1;let ru=0,su=0;const lu=new Vector3;for(let gu=0;gu<au;gu++){const hu=gu*Ys-Js;for(let wu=0;wu<Zs;wu++){const Mu=wu*tu-Ks;lu[Vs]=Mu*Ns,lu[ks]=hu*Us,lu[Os]=eu,Ls.push(lu.x,lu.y,lu.z),lu[Vs]=0,lu[ks]=0,lu[Os]=js>0?1:-1,Rs.push(lu.x,lu.y,lu.z),Ds.push(wu/Ws),Ds.push(1-gu/Qs),ru+=1}}for(let gu=0;gu<Qs;gu++)for(let hu=0;hu<Ws;hu++){const wu=$s+hu+Zs*gu,Mu=$s+hu+Zs*(gu+1),du=$s+(hu+1)+Zs*(gu+1),vu=$s+(hu+1)+Zs*gu;Ps.push(wu,Mu,vu),Ps.push(Mu,du,vu),su+=6}Bs.addGroup(Fs,su,qs),Fs+=su,$s+=ru}}}function cloneUniforms(ca){var ga={};for(var _s in ca){ga[_s]={};for(var Ss in ca[_s]){var Ms=ca[_s][Ss];Ms&&(Ms.isColor||Ms.isMatrix3||Ms.isMatrix4||Ms.isVector2||Ms.isVector3||Ms.isVector4||Ms.isTexture)?ga[_s][Ss]=Ms.clone():Array.isArray(Ms)?ga[_s][Ss]=Ms.slice():ga[_s][Ss]=Ms}}return ga}function mergeUniforms(ca){for(var ga={},_s=0;_s<ca.length;_s++){var Ss=cloneUniforms(ca[_s]);for(var Ms in Ss)ga[Ms]=Ss[Ms]}return ga}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(ca){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,ca!==void 0&&(ca.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(ca))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.fragmentShader=ca.fragmentShader,this.vertexShader=ca.vertexShader,this.uniforms=cloneUniforms(ca.uniforms),this.defines=Object.assign({},ca.defines),this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.lights=ca.lights,this.clipping=ca.clipping,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.extensions=Object.assign({},ca.extensions),this};ShaderMaterial.prototype.toJSON=function(ca){var ga=Material.prototype.toJSON.call(this,ca);ga.uniforms={};for(var _s in this.uniforms){var Ss=this.uniforms[_s],Ms=Ss.value;Ms&&Ms.isTexture?ga.uniforms[_s]={type:"t",value:Ms.toJSON(ca).uuid}:Ms&&Ms.isColor?ga.uniforms[_s]={type:"c",value:Ms.getHex()}:Ms&&Ms.isVector2?ga.uniforms[_s]={type:"v2",value:Ms.toArray()}:Ms&&Ms.isVector3?ga.uniforms[_s]={type:"v3",value:Ms.toArray()}:Ms&&Ms.isVector4?ga.uniforms[_s]={type:"v4",value:Ms.toArray()}:Ms&&Ms.isMatrix3?ga.uniforms[_s]={type:"m3",value:Ms.toArray()}:Ms&&Ms.isMatrix4?ga.uniforms[_s]={type:"m4",value:Ms.toArray()}:ga.uniforms[_s]={value:Ms}}Object.keys(this.defines).length>0&&(ga.defines=this.defines),ga.vertexShader=this.vertexShader,ga.fragmentShader=this.fragmentShader;var Cs={};for(var Ts in this.extensions)this.extensions[Ts]===!0&&(Cs[Ts]=!0);return Object.keys(Cs).length>0&&(ga.extensions=Cs),ga};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),this.matrixWorldInverse.copy(ca.matrixWorldInverse),this.projectionMatrix.copy(ca.projectionMatrix),this.projectionMatrixInverse.copy(ca.projectionMatrixInverse),this},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(-ga[8],-ga[9],-ga[10]).normalize()},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(ca,ga){Object3D.prototype.updateWorldMatrix.call(this,ca,ga),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(ca,ga,_s,Ss){Camera.call(this),this.type="PerspectiveCamera",this.fov=ca!==void 0?ca:50,this.zoom=1,this.near=_s!==void 0?_s:.1,this.far=Ss!==void 0?Ss:2e3,this.focus=10,this.aspect=ga!==void 0?ga:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.fov=ca.fov,this.zoom=ca.zoom,this.near=ca.near,this.far=ca.far,this.focus=ca.focus,this.aspect=ca.aspect,this.view=ca.view===null?null:Object.assign({},ca.view),this.filmGauge=ca.filmGauge,this.filmOffset=ca.filmOffset,this},setFocalLength:function(ca){var ga=.5*this.getFilmHeight()/ca;this.fov=MathUtils.RAD2DEG*2*Math.atan(ga),this.updateProjectionMatrix()},getFocalLength:function(){var ca=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/ca},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(ca,ga,_s,Ss,Ms,Cs){this.aspect=ca/ga,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=this.near,ga=ca*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,_s=2*ga,Ss=this.aspect*_s,Ms=-.5*Ss,Cs=this.view;if(this.view!==null&&this.view.enabled){var Ts=Cs.fullWidth,Bs=Cs.fullHeight;Ms+=Cs.offsetX*Ss/Ts,ga-=Cs.offsetY*_s/Bs,Ss*=Cs.width/Ts,_s*=Cs.height/Bs}var Ps=this.filmOffset;Ps!==0&&(Ms+=ca*Ps/this.getFilmWidth()),this.projectionMatrix.makePerspective(Ms,Ms+Ss,ga,ga-_s,ca,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.fov=this.fov,ga.object.zoom=this.zoom,ga.object.near=this.near,ga.object.far=this.far,ga.object.focus=this.focus,ga.object.aspect=this.aspect,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga.object.filmGauge=this.filmGauge,ga.object.filmOffset=this.filmOffset,ga}});var fov=90,aspect=1;function CubeCamera(ca,ga,_s){if(Object3D.call(this),this.type="CubeCamera",_s.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=_s;var Ss=new PerspectiveCamera(fov,aspect,ca,ga);Ss.layers=this.layers,Ss.up.set(0,-1,0),Ss.lookAt(new Vector3(1,0,0)),this.add(Ss);var Ms=new PerspectiveCamera(fov,aspect,ca,ga);Ms.layers=this.layers,Ms.up.set(0,-1,0),Ms.lookAt(new Vector3(-1,0,0)),this.add(Ms);var Cs=new PerspectiveCamera(fov,aspect,ca,ga);Cs.layers=this.layers,Cs.up.set(0,0,1),Cs.lookAt(new Vector3(0,1,0)),this.add(Cs);var Ts=new PerspectiveCamera(fov,aspect,ca,ga);Ts.layers=this.layers,Ts.up.set(0,0,-1),Ts.lookAt(new Vector3(0,-1,0)),this.add(Ts);var Bs=new PerspectiveCamera(fov,aspect,ca,ga);Bs.layers=this.layers,Bs.up.set(0,-1,0),Bs.lookAt(new Vector3(0,0,1)),this.add(Bs);var Ps=new PerspectiveCamera(fov,aspect,ca,ga);Ps.layers=this.layers,Ps.up.set(0,-1,0),Ps.lookAt(new Vector3(0,0,-1)),this.add(Ps),this.update=function(Ls,Rs){this.parent===null&&this.updateMatrixWorld();var Ds=Ls.xr.enabled,$s=Ls.getRenderTarget();Ls.xr.enabled=!1;var Fs=_s.texture.generateMipmaps;_s.texture.generateMipmaps=!1,Ls.setRenderTarget(_s,0),Ls.render(Rs,Ss),Ls.setRenderTarget(_s,1),Ls.render(Rs,Ms),Ls.setRenderTarget(_s,2),Ls.render(Rs,Cs),Ls.setRenderTarget(_s,3),Ls.render(Rs,Ts),Ls.setRenderTarget(_s,4),Ls.render(Rs,Bs),_s.texture.generateMipmaps=Fs,Ls.setRenderTarget(_s,5),Ls.render(Rs,Ps),Ls.setRenderTarget($s),Ls.xr.enabled=Ds},this.clear=function(Ls,Rs,Ds,$s){for(var Fs=Ls.getRenderTarget(),Gs=0;Gs<6;Gs++)Ls.setRenderTarget(_s,Gs),Ls.clear(Rs,Ds,$s);Ls.setRenderTarget(Fs)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(ca,ga,_s){Number.isInteger(ga)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),ga=_s),WebGLRenderTarget.call(this,ca,ca,ga)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(ca,ga){this.texture.type=ga.type,this.texture.format=ga.format,this.texture.encoding=ga.encoding;var _s=new Scene,Ss={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Ms=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Ss.uniforms),vertexShader:Ss.vertexShader,fragmentShader:Ss.fragmentShader,side:BackSide,blending:NoBlending});Ms.uniforms.tEquirect.value=ga;var Cs=new Mesh(new BoxBufferGeometry(5,5,5),Ms);_s.add(Cs);var Ts=new CubeCamera(1,10,this);return Ts.update(ca,_s),Cs.geometry.dispose(),Cs.material.dispose(),this};function DataTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds){Texture.call(this,null,Cs,Ts,Bs,Ps,Ls,Ss,Ms,Rs,Ds),this.image={data:ca||null,width:ga||1,height:_s||1},this.magFilter=Ps!==void 0?Ps:NearestFilter,this.minFilter=Ls!==void 0?Ls:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(ca,ga,_s,Ss,Ms,Cs){this.planes=[ca!==void 0?ca:new Plane,ga!==void 0?ga:new Plane,_s!==void 0?_s:new Plane,Ss!==void 0?Ss:new Plane,Ms!==void 0?Ms:new Plane,Cs!==void 0?Cs:new Plane]}Object.assign(Frustum.prototype,{set:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.planes;return Ts[0].copy(ca),Ts[1].copy(ga),Ts[2].copy(_s),Ts[3].copy(Ss),Ts[4].copy(Ms),Ts[5].copy(Cs),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++)ga[_s].copy(ca.planes[_s]);return this},setFromProjectionMatrix:function(ca){var ga=this.planes,_s=ca.elements,Ss=_s[0],Ms=_s[1],Cs=_s[2],Ts=_s[3],Bs=_s[4],Ps=_s[5],Ls=_s[6],Rs=_s[7],Ds=_s[8],$s=_s[9],Fs=_s[10],Gs=_s[11],Vs=_s[12],ks=_s[13],Os=_s[14],Ns=_s[15];return ga[0].setComponents(Ts-Ss,Rs-Bs,Gs-Ds,Ns-Vs).normalize(),ga[1].setComponents(Ts+Ss,Rs+Bs,Gs+Ds,Ns+Vs).normalize(),ga[2].setComponents(Ts+Ms,Rs+Ps,Gs+$s,Ns+ks).normalize(),ga[3].setComponents(Ts-Ms,Rs-Ps,Gs-$s,Ns-ks).normalize(),ga[4].setComponents(Ts-Cs,Rs-Ls,Gs-Fs,Ns-Os).normalize(),ga[5].setComponents(Ts+Cs,Rs+Ls,Gs+Fs,Ns+Os).normalize(),this},intersectsObject:function(ca){var ga=ca.geometry;return ga.boundingSphere===null&&ga.computeBoundingSphere(),_sphere$1.copy(ga.boundingSphere).applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(ca){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(ca){for(var ga=this.planes,_s=ca.center,Ss=-ca.radius,Ms=0;Ms<6;Ms++){var Cs=ga[Ms].distanceToPoint(_s);if(Cs<Ss)return!1}return!0},intersectsBox:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++){var Ss=ga[_s];if(_vector$5.x=Ss.normal.x>0?ca.max.x:ca.min.x,_vector$5.y=Ss.normal.y>0?ca.max.y:ca.min.y,_vector$5.z=Ss.normal.z>0?ca.max.z:ca.min.z,Ss.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(ca){for(var ga=this.planes,_s=0;_s<6;_s++)if(ga[_s].distanceToPoint(ca)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var ca=null,ga=!1,_s=null;function Ss(Ms,Cs){ga!==!1&&(_s(Ms,Cs),ca.requestAnimationFrame(Ss))}return{start:function(){ga!==!0&&_s!==null&&(ca.requestAnimationFrame(Ss),ga=!0)},stop:function(){ga=!1},setAnimationLoop:function(Ms){_s=Ms},setContext:function(Ms){ca=Ms}}}function WebGLAttributes(ca,ga){var _s=ga.isWebGL2,Ss=new WeakMap;function Ms(Ls,Rs){var Ds=Ls.array,$s=Ls.usage,Fs=ca.createBuffer();ca.bindBuffer(Rs,Fs),ca.bufferData(Rs,Ds,$s),Ls.onUploadCallback();var Gs=5126;return Ds instanceof Float32Array?Gs=5126:Ds instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Ds instanceof Uint16Array?Gs=5123:Ds instanceof Int16Array?Gs=5122:Ds instanceof Uint32Array?Gs=5125:Ds instanceof Int32Array?Gs=5124:Ds instanceof Int8Array?Gs=5120:Ds instanceof Uint8Array&&(Gs=5121),{buffer:Fs,type:Gs,bytesPerElement:Ds.BYTES_PER_ELEMENT,version:Ls.version}}function Cs(Ls,Rs,Ds){var $s=Rs.array,Fs=Rs.updateRange;ca.bindBuffer(Ds,Ls),Fs.count===-1?ca.bufferSubData(Ds,0,$s):(_s?ca.bufferSubData(Ds,Fs.offset*$s.BYTES_PER_ELEMENT,$s,Fs.offset,Fs.count):ca.bufferSubData(Ds,Fs.offset*$s.BYTES_PER_ELEMENT,$s.subarray(Fs.offset,Fs.offset+Fs.count)),Fs.count=-1)}function Ts(Ls){return Ls.isInterleavedBufferAttribute&&(Ls=Ls.data),Ss.get(Ls)}function Bs(Ls){Ls.isInterleavedBufferAttribute&&(Ls=Ls.data);var Rs=Ss.get(Ls);Rs&&(ca.deleteBuffer(Rs.buffer),Ss.delete(Ls))}function Ps(Ls,Rs){Ls.isInterleavedBufferAttribute&&(Ls=Ls.data);var Ds=Ss.get(Ls);Ds===void 0?Ss.set(Ls,Ms(Ls,Rs)):Ds.version<Ls.version&&(Cs(Ds.buffer,Ls,Rs),Ds.version=Ls.version)}return{get:Ts,remove:Bs,update:Ps}}function PlaneGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:ca,height:ga,widthSegments:_s,heightSegments:Ss},this.fromBufferGeometry(new PlaneBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:ca,height:ga,widthSegments:_s,heightSegments:Ss},ca=ca||1,ga=ga||1;var Ms=ca/2,Cs=ga/2,Ts=Math.floor(_s)||1,Bs=Math.floor(Ss)||1,Ps=Ts+1,Ls=Bs+1,Rs=ca/Ts,Ds=ga/Bs,$s,Fs,Gs=[],Vs=[],ks=[],Os=[];for(Fs=0;Fs<Ls;Fs++){var Ns=Fs*Ds-Cs;for($s=0;$s<Ps;$s++){var Us=$s*Rs-Ms;Vs.push(Us,-Ns,0),ks.push(0,0,1),Os.push($s/Ts),Os.push(1-Fs/Bs)}}for(Fs=0;Fs<Bs;Fs++)for($s=0;$s<Ts;$s++){var Hs=$s+Ps*Fs,zs=$s+Ps*(Fs+1),js=$s+1+Ps*(Fs+1),Ws=$s+1+Ps*Fs;Gs.push(Hs,zs,Ws),Gs.push(zs,js,Ws)}this.setIndex(Gs),this.setAttribute("position",new Float32BufferAttribute(Vs,3)),this.setAttribute("normal",new Float32BufferAttribute(ks,3)),this.setAttribute("uv",new Float32BufferAttribute(Os,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(ca,ga,_s,Ss){var Ms=new Color(0),Cs=0,Ts,Bs,Ps=null,Ls=0,Rs=null;function Ds(Fs,Gs,Vs,ks){var Os=Gs.background,Ns=ca.xr,Us=Ns.getSession&&Ns.getSession();if(Us&&Us.environmentBlendMode==="additive"&&(Os=null),Os===null?$s(Ms,Cs):Os&&Os.isColor&&($s(Os,1),ks=!0),(ca.autoClear||ks)&&ca.clear(ca.autoClearColor,ca.autoClearDepth,ca.autoClearStencil),Os&&(Os.isCubeTexture||Os.isWebGLCubeRenderTarget||Os.mapping===CubeUVReflectionMapping)){Bs===void 0&&(Bs=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Bs.geometry.deleteAttribute("normal"),Bs.geometry.deleteAttribute("uv"),Bs.onBeforeRender=function(zs,js,Ws){this.matrixWorld.copyPosition(Ws.matrixWorld)},Object.defineProperty(Bs.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),_s.update(Bs));var Hs=Os.isWebGLCubeRenderTarget?Os.texture:Os;Bs.material.uniforms.envMap.value=Hs,Bs.material.uniforms.flipEnvMap.value=Hs.isCubeTexture?-1:1,(Ps!==Os||Ls!==Hs.version||Rs!==ca.toneMapping)&&(Bs.material.needsUpdate=!0,Ps=Os,Ls=Hs.version,Rs=ca.toneMapping),Fs.unshift(Bs,Bs.geometry,Bs.material,0,0,null)}else Os&&Os.isTexture&&(Ts===void 0&&(Ts=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ts.geometry.deleteAttribute("normal"),Object.defineProperty(Ts.material,"map",{get:function(){return this.uniforms.t2D.value}}),_s.update(Ts)),Ts.material.uniforms.t2D.value=Os,Os.matrixAutoUpdate===!0&&Os.updateMatrix(),Ts.material.uniforms.uvTransform.value.copy(Os.matrix),(Ps!==Os||Ls!==Os.version||Rs!==ca.toneMapping)&&(Ts.material.needsUpdate=!0,Ps=Os,Ls=Os.version,Rs=ca.toneMapping),Fs.unshift(Ts,Ts.geometry,Ts.material,0,0,null))}function $s(Fs,Gs){ga.buffers.color.setClear(Fs.r,Fs.g,Fs.b,Gs,Ss)}return{getClearColor:function(){return Ms},setClearColor:function(Fs,Gs){Ms.set(Fs),Cs=Gs!==void 0?Gs:1,$s(Ms,Cs)},getClearAlpha:function(){return Cs},setClearAlpha:function(Fs){Cs=Fs,$s(Ms,Cs)},render:Ds}}function WebGLBufferRenderer(ca,ga,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts(Ls){Cs=Ls}function Bs(Ls,Rs){ca.drawArrays(Cs,Ls,Rs),_s.update(Rs,Cs)}function Ps(Ls,Rs,Ds,$s){if($s!==0){var Fs,Gs;if(Ms)Fs=ca,Gs="drawArraysInstanced";else if(Fs=ga.get("ANGLE_instanced_arrays"),Gs="drawArraysInstancedANGLE",Fs===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Fs[Gs](Cs,Rs,Ds,$s),_s.update(Ds,Cs,$s)}}this.setMode=Ts,this.render=Bs,this.renderInstances=Ps}function WebGLCapabilities(ca,ga,_s){var Ss;function Ms(){if(Ss!==void 0)return Ss;var js=ga.get("EXT_texture_filter_anisotropic");return js!==null?Ss=ca.getParameter(js.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Ss=0,Ss}function Cs(js){if(js==="highp"){if(ca.getShaderPrecisionFormat(35633,36338).precision>0&&ca.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";js="mediump"}return js==="mediump"&&ca.getShaderPrecisionFormat(35633,36337).precision>0&&ca.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Ts=typeof WebGL2RenderingContext!="undefined"&&ca instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&ca instanceof WebGL2ComputeRenderingContext,Bs=_s.precision!==void 0?_s.precision:"highp",Ps=Cs(Bs);Ps!==Bs&&(console.warn("THREE.WebGLRenderer:",Bs,"not supported, using",Ps,"instead."),Bs=Ps);var Ls=_s.logarithmicDepthBuffer===!0,Rs=ca.getParameter(34930),Ds=ca.getParameter(35660),$s=ca.getParameter(3379),Fs=ca.getParameter(34076),Gs=ca.getParameter(34921),Vs=ca.getParameter(36347),ks=ca.getParameter(36348),Os=ca.getParameter(36349),Ns=Ds>0,Us=Ts||!!ga.get("OES_texture_float"),Hs=Ns&&Us,zs=Ts?ca.getParameter(36183):0;return{isWebGL2:Ts,getMaxAnisotropy:Ms,getMaxPrecision:Cs,precision:Bs,logarithmicDepthBuffer:Ls,maxTextures:Rs,maxVertexTextures:Ds,maxTextureSize:$s,maxCubemapSize:Fs,maxAttributes:Gs,maxVertexUniforms:Vs,maxVaryings:ks,maxFragmentUniforms:Os,vertexTextures:Ns,floatFragmentTextures:Us,floatVertexTextures:Hs,maxSamples:zs}}function WebGLClipping(){var ca=this,ga=null,_s=0,Ss=!1,Ms=!1,Cs=new Plane,Ts=new Matrix3,Bs={value:null,needsUpdate:!1};this.uniform=Bs,this.numPlanes=0,this.numIntersection=0,this.init=function(Rs,Ds,$s){var Fs=Rs.length!==0||Ds||_s!==0||Ss;return Ss=Ds,ga=Ls(Rs,$s,0),_s=Rs.length,Fs},this.beginShadows=function(){Ms=!0,Ls(null)},this.endShadows=function(){Ms=!1,Ps()},this.setState=function(Rs,Ds,$s,Fs,Gs,Vs){if(!Ss||Rs===null||Rs.length===0||Ms&&!$s)Ms?Ls(null):Ps();else{var ks=Ms?0:_s,Os=ks*4,Ns=Gs.clippingState||null;Bs.value=Ns,Ns=Ls(Rs,Fs,Os,Vs);for(var Us=0;Us!==Os;++Us)Ns[Us]=ga[Us];Gs.clippingState=Ns,this.numIntersection=Ds?this.numPlanes:0,this.numPlanes+=ks}};function Ps(){Bs.value!==ga&&(Bs.value=ga,Bs.needsUpdate=_s>0),ca.numPlanes=_s,ca.numIntersection=0}function Ls(Rs,Ds,$s,Fs){var Gs=Rs!==null?Rs.length:0,Vs=null;if(Gs!==0){if(Vs=Bs.value,Fs!==!0||Vs===null){var ks=$s+Gs*4,Os=Ds.matrixWorldInverse;Ts.getNormalMatrix(Os),(Vs===null||Vs.length<ks)&&(Vs=new Float32Array(ks));for(var Ns=0,Us=$s;Ns!==Gs;++Ns,Us+=4)Cs.copy(Rs[Ns]).applyMatrix4(Os,Ts),Cs.normal.toArray(Vs,Us),Vs[Us+3]=Cs.constant}Bs.value=Vs,Bs.needsUpdate=!0}return ca.numPlanes=Gs,ca.numIntersection=0,Vs}}function WebGLExtensions(ca){var ga={};return{get:function(_s){if(ga[_s]!==void 0)return ga[_s];var Ss;switch(_s){case"WEBGL_depth_texture":Ss=ca.getExtension("WEBGL_depth_texture")||ca.getExtension("MOZ_WEBGL_depth_texture")||ca.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ss=ca.getExtension("EXT_texture_filter_anisotropic")||ca.getExtension("MOZ_EXT_texture_filter_anisotropic")||ca.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ss=ca.getExtension("WEBGL_compressed_texture_s3tc")||ca.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ss=ca.getExtension("WEBGL_compressed_texture_pvrtc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ss=ca.getExtension(_s)}return Ss===null&&console.warn("THREE.WebGLRenderer: "+_s+" extension not supported."),ga[_s]=Ss,Ss}}}function WebGLGeometries(ca,ga,_s){var Ss=new WeakMap,Ms=new WeakMap;function Cs(Rs){var Ds=Rs.target,$s=Ss.get(Ds);$s.index!==null&&ga.remove($s.index);for(var Fs in $s.attributes)ga.remove($s.attributes[Fs]);Ds.removeEventListener("dispose",Cs),Ss.delete(Ds);var Gs=Ms.get($s);Gs&&(ga.remove(Gs),Ms.delete($s)),_s.memory.geometries--}function Ts(Rs,Ds){var $s=Ss.get(Ds);return $s||(Ds.addEventListener("dispose",Cs),Ds.isBufferGeometry?$s=Ds:Ds.isGeometry&&(Ds._bufferGeometry===void 0&&(Ds._bufferGeometry=new BufferGeometry().setFromObject(Rs)),$s=Ds._bufferGeometry),Ss.set(Ds,$s),_s.memory.geometries++,$s)}function Bs(Rs){var Ds=Rs.index,$s=Rs.attributes;Ds!==null&&ga.update(Ds,34963);for(var Fs in $s)ga.update($s[Fs],34962);var Gs=Rs.morphAttributes;for(var Fs in Gs)for(var Vs=Gs[Fs],ks=0,Os=Vs.length;ks<Os;ks++)ga.update(Vs[ks],34962)}function Ps(Rs){var Ds=[],$s=Rs.index,Fs=Rs.attributes.position,Gs=0;if($s!==null){var Vs=$s.array;Gs=$s.version;for(var ks=0,Os=Vs.length;ks<Os;ks+=3){var Ns=Vs[ks+0],Us=Vs[ks+1],Hs=Vs[ks+2];Ds.push(Ns,Us,Us,Hs,Hs,Ns)}}else{var Vs=Fs.array;Gs=Fs.version;for(var ks=0,Os=Vs.length/3-1;ks<Os;ks+=3){var Ns=ks+0,Us=ks+1,Hs=ks+2;Ds.push(Ns,Us,Us,Hs,Hs,Ns)}}var zs=new(arrayMax(Ds)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Ds,1);zs.version=Gs,ga.update(zs,34963);var js=Ms.get(Rs);js&&ga.remove(js),Ms.set(Rs,zs)}function Ls(Rs){var Ds=Ms.get(Rs);if(Ds){var $s=Rs.index;$s!==null&&Ds.version<$s.version&&Ps(Rs)}else Ps(Rs);return Ms.get(Rs)}return{get:Ts,update:Bs,getWireframeAttribute:Ls}}function WebGLIndexedBufferRenderer(ca,ga,_s,Ss){var Ms=Ss.isWebGL2,Cs;function Ts($s){Cs=$s}var Bs,Ps;function Ls($s){Bs=$s.type,Ps=$s.bytesPerElement}function Rs($s,Fs){ca.drawElements(Cs,Fs,Bs,$s*Ps),_s.update(Fs,Cs)}function Ds($s,Fs,Gs,Vs){if(Vs!==0){var ks,Os;if(Ms)ks=ca,Os="drawElementsInstanced";else if(ks=ga.get("ANGLE_instanced_arrays"),Os="drawElementsInstancedANGLE",ks===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ks[Os](Cs,Gs,Bs,Fs*Ps,Vs),_s.update(Gs,Cs,Vs)}}this.setMode=Ts,this.setIndex=Ls,this.render=Rs,this.renderInstances=Ds}function WebGLInfo(ca){var ga={geometries:0,textures:0},_s={frame:0,calls:0,triangles:0,points:0,lines:0};function Ss(Cs,Ts,Bs){switch(Bs=Bs||1,_s.calls++,Ts){case 4:_s.triangles+=Bs*(Cs/3);break;case 1:_s.lines+=Bs*(Cs/2);break;case 3:_s.lines+=Bs*(Cs-1);break;case 2:_s.lines+=Bs*Cs;break;case 0:_s.points+=Bs*Cs;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ts);break}}function Ms(){_s.frame++,_s.calls=0,_s.triangles=0,_s.points=0,_s.lines=0}return{memory:ga,render:_s,programs:null,autoReset:!0,reset:Ms,update:Ss}}function absNumericalSort(ca,ga){return Math.abs(ga[1])-Math.abs(ca[1])}function WebGLMorphtargets(ca){var ga={},_s=new Float32Array(8);function Ss(Ms,Cs,Ts,Bs){var Ps=Ms.morphTargetInfluences,Ls=Ps===void 0?0:Ps.length,Rs=ga[Cs.id];if(Rs===void 0){Rs=[];for(var Ds=0;Ds<Ls;Ds++)Rs[Ds]=[Ds,0];ga[Cs.id]=Rs}for(var $s=Ts.morphTargets&&Cs.morphAttributes.position,Fs=Ts.morphNormals&&Cs.morphAttributes.normal,Ds=0;Ds<Ls;Ds++){var Gs=Rs[Ds];Gs[1]!==0&&($s&&Cs.deleteAttribute("morphTarget"+Ds),Fs&&Cs.deleteAttribute("morphNormal"+Ds))}for(var Ds=0;Ds<Ls;Ds++){var Gs=Rs[Ds];Gs[0]=Ds,Gs[1]=Ps[Ds]}Rs.sort(absNumericalSort);for(var Vs=0,Ds=0;Ds<8;Ds++){var Gs=Rs[Ds];if(Gs){var ks=Gs[0],Os=Gs[1];if(Os){$s&&Cs.setAttribute("morphTarget"+Ds,$s[ks]),Fs&&Cs.setAttribute("morphNormal"+Ds,Fs[ks]),_s[Ds]=Os,Vs+=Os;continue}}_s[Ds]=0}var Ns=Cs.morphTargetsRelative?1:1-Vs;Bs.getUniforms().setValue(ca,"morphTargetBaseInfluence",Ns),Bs.getUniforms().setValue(ca,"morphTargetInfluences",_s)}return{update:Ss}}function WebGLObjects(ca,ga,_s,Ss){var Ms=new WeakMap;function Cs(Bs){var Ps=Ss.render.frame,Ls=Bs.geometry,Rs=ga.get(Bs,Ls);return Ms.get(Rs)!==Ps&&(Ls.isGeometry&&Rs.updateFromObject(Bs),ga.update(Rs),Ms.set(Rs,Ps)),Bs.isInstancedMesh&&_s.update(Bs.instanceMatrix,34962),Rs}function Ts(){Ms=new WeakMap}return{update:Cs,dispose:Ts}}function CubeTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){ca=ca!==void 0?ca:[],ga=ga!==void 0?ga:CubeReflectionMapping,Ts=Ts!==void 0?Ts:RGBFormat,Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(ca){this.image=ca}});function DataTexture2DArray(ca,ga,_s,Ss){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(ca,ga,_s,Ss){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:_s||1,depth:Ss||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(ca,ga,_s){var Ss=ca[0];if(Ss<=0||Ss>0)return ca;var Ms=ga*_s,Cs=arrayCacheF32[Ms];if(Cs===void 0&&(Cs=new Float32Array(Ms),arrayCacheF32[Ms]=Cs),ga!==0){Ss.toArray(Cs,0);for(var Ts=1,Bs=0;Ts!==ga;++Ts)Bs+=_s,ca[Ts].toArray(Cs,Bs)}return Cs}function arraysEqual(ca,ga){if(ca.length!==ga.length)return!1;for(var _s=0,Ss=ca.length;_s<Ss;_s++)if(ca[_s]!==ga[_s])return!1;return!0}function copyArray(ca,ga){for(var _s=0,Ss=ga.length;_s<Ss;_s++)ca[_s]=ga[_s]}function allocTexUnits(ca,ga){var _s=arrayCacheI32[ga];_s===void 0&&(_s=new Int32Array(ga),arrayCacheI32[ga]=_s);for(var Ss=0;Ss!==ga;++Ss)_s[Ss]=ca.allocateTextureUnit();return _s}function setValueV1f(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1f(this.addr,ga),_s[0]=ga)}function setValueV2f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y)&&(ca.uniform2f(this.addr,ga.x,ga.y),_s[0]=ga.x,_s[1]=ga.y);else{if(arraysEqual(_s,ga))return;ca.uniform2fv(this.addr,ga),copyArray(_s,ga)}}function setValueV3f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y||_s[2]!==ga.z)&&(ca.uniform3f(this.addr,ga.x,ga.y,ga.z),_s[0]=ga.x,_s[1]=ga.y,_s[2]=ga.z);else if(ga.r!==void 0)(_s[0]!==ga.r||_s[1]!==ga.g||_s[2]!==ga.b)&&(ca.uniform3f(this.addr,ga.r,ga.g,ga.b),_s[0]=ga.r,_s[1]=ga.g,_s[2]=ga.b);else{if(arraysEqual(_s,ga))return;ca.uniform3fv(this.addr,ga),copyArray(_s,ga)}}function setValueV4f(ca,ga){var _s=this.cache;if(ga.x!==void 0)(_s[0]!==ga.x||_s[1]!==ga.y||_s[2]!==ga.z||_s[3]!==ga.w)&&(ca.uniform4f(this.addr,ga.x,ga.y,ga.z,ga.w),_s[0]=ga.x,_s[1]=ga.y,_s[2]=ga.z,_s[3]=ga.w);else{if(arraysEqual(_s,ga))return;ca.uniform4fv(this.addr,ga),copyArray(_s,ga)}}function setValueM2(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix2fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat2array.set(Ss),ca.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(_s,Ss)}}function setValueM3(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix3fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat3array.set(Ss),ca.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(_s,Ss)}}function setValueM4(ca,ga){var _s=this.cache,Ss=ga.elements;if(Ss===void 0){if(arraysEqual(_s,ga))return;ca.uniformMatrix4fv(this.addr,!1,ga),copyArray(_s,ga)}else{if(arraysEqual(_s,Ss))return;mat4array.set(Ss),ca.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(_s,Ss)}}function setValueT1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTexture2D(ga||emptyTexture,Ms)}function setValueT2DArray1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture2DArray(ga||emptyTexture2dArray,Ms)}function setValueT3D1(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.setTexture3D(ga||emptyTexture3d,Ms)}function setValueT6(ca,ga,_s){var Ss=this.cache,Ms=_s.allocateTextureUnit();Ss[0]!==Ms&&(ca.uniform1i(this.addr,Ms),Ss[0]=Ms),_s.safeSetTextureCube(ga||emptyCubeTexture,Ms)}function setValueV1i(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1i(this.addr,ga),_s[0]=ga)}function setValueV2i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform2iv(this.addr,ga),copyArray(_s,ga))}function setValueV3i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform3iv(this.addr,ga),copyArray(_s,ga))}function setValueV4i(ca,ga){var _s=this.cache;arraysEqual(_s,ga)||(ca.uniform4iv(this.addr,ga),copyArray(_s,ga))}function setValueV1ui(ca,ga){var _s=this.cache;_s[0]!==ga&&(ca.uniform1ui(this.addr,ga),_s[0]=ga)}function getSingularSetter(ca){switch(ca){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ca,ga){ca.uniform1fv(this.addr,ga)}function setValueV1iArray(ca,ga){ca.uniform1iv(this.addr,ga)}function setValueV2iArray(ca,ga){ca.uniform2iv(this.addr,ga)}function setValueV3iArray(ca,ga){ca.uniform3iv(this.addr,ga)}function setValueV4iArray(ca,ga){ca.uniform4iv(this.addr,ga)}function setValueV2fArray(ca,ga){var _s=flatten(ga,this.size,2);ca.uniform2fv(this.addr,_s)}function setValueV3fArray(ca,ga){var _s=flatten(ga,this.size,3);ca.uniform3fv(this.addr,_s)}function setValueV4fArray(ca,ga){var _s=flatten(ga,this.size,4);ca.uniform4fv(this.addr,_s)}function setValueM2Array(ca,ga){var _s=flatten(ga,this.size,4);ca.uniformMatrix2fv(this.addr,!1,_s)}function setValueM3Array(ca,ga){var _s=flatten(ga,this.size,9);ca.uniformMatrix3fv(this.addr,!1,_s)}function setValueM4Array(ca,ga){var _s=flatten(ga,this.size,16);ca.uniformMatrix4fv(this.addr,!1,_s)}function setValueT1Array(ca,ga,_s){var Ss=ga.length,Ms=allocTexUnits(_s,Ss);ca.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTexture2D(ga[Cs]||emptyTexture,Ms[Cs])}function setValueT6Array(ca,ga,_s){var Ss=ga.length,Ms=allocTexUnits(_s,Ss);ca.uniform1iv(this.addr,Ms);for(var Cs=0;Cs!==Ss;++Cs)_s.safeSetTextureCube(ga[Cs]||emptyCubeTexture,Ms[Cs])}function getPureArraySetter(ca){switch(ca){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(ca,ga,_s){this.id=ca,this.addr=_s,this.cache=[],this.setValue=getSingularSetter(ga.type)}function PureArrayUniform(ca,ga,_s){this.id=ca,this.addr=_s,this.cache=[],this.size=ga.size,this.setValue=getPureArraySetter(ga.type)}PureArrayUniform.prototype.updateCache=function(ca){var ga=this.cache;ca instanceof Float32Array&&ga.length!==ca.length&&(this.cache=new Float32Array(ca.length)),copyArray(ga,ca)};function StructuredUniform(ca){this.id=ca,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(ca,ga,_s){for(var Ss=this.seq,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms){var Ts=Ss[Ms];Ts.setValue(ca,ga[Ts.id],_s)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(ca,ga){ca.seq.push(ga),ca.map[ga.id]=ga}function parseUniform(ca,ga,_s){var Ss=ca.name,Ms=Ss.length;for(RePathPart.lastIndex=0;;){var Cs=RePathPart.exec(Ss),Ts=RePathPart.lastIndex,Bs=Cs[1],Ps=Cs[2]==="]",Ls=Cs[3];if(Ps&&(Bs=Bs|0),Ls===void 0||Ls==="["&&Ts+2===Ms){addUniform(_s,Ls===void 0?new SingleUniform(Bs,ca,ga):new PureArrayUniform(Bs,ca,ga));break}else{var Rs=_s.map,Ds=Rs[Bs];Ds===void 0&&(Ds=new StructuredUniform(Bs),addUniform(_s,Ds)),_s=Ds}}}function WebGLUniforms(ca,ga){this.seq=[],this.map={};for(var _s=ca.getProgramParameter(ga,35718),Ss=0;Ss<_s;++Ss){var Ms=ca.getActiveUniform(ga,Ss),Cs=ca.getUniformLocation(ga,Ms.name);parseUniform(Ms,Cs,this)}}WebGLUniforms.prototype.setValue=function(ca,ga,_s,Ss){var Ms=this.map[ga];Ms!==void 0&&Ms.setValue(ca,_s,Ss)};WebGLUniforms.prototype.setOptional=function(ca,ga,_s){var Ss=ga[_s];Ss!==void 0&&this.setValue(ca,_s,Ss)};WebGLUniforms.upload=function(ca,ga,_s,Ss){for(var Ms=0,Cs=ga.length;Ms!==Cs;++Ms){var Ts=ga[Ms],Bs=_s[Ts.id];Bs.needsUpdate!==!1&&Ts.setValue(ca,Bs.value,Ss)}};WebGLUniforms.seqWithValue=function(ca,ga){for(var _s=[],Ss=0,Ms=ca.length;Ss!==Ms;++Ss){var Cs=ca[Ss];Cs.id in ga&&_s.push(Cs)}return _s};function WebGLShader(ca,ga,_s){var Ss=ca.createShader(ga);return ca.shaderSource(Ss,_s),ca.compileShader(Ss),Ss}var programIdCount=0;function addLineNumbers(ca){for(var ga=ca.split(`
`),_s=0;_s<ga.length;_s++)ga[_s]=_s+1+": "+ga[_s];return ga.join(`
`)}function getEncodingComponents(ca){switch(ca){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+ca)}}function getShaderErrors(ca,ga,_s){var Ss=ca.getShaderParameter(ga,35713),Ms=ca.getShaderInfoLog(ga).trim();if(Ss&&Ms==="")return"";var Cs=ca.getShaderSource(ga);return"THREE.WebGLShader: gl.getShaderInfoLog() "+_s+`
`+Ms+addLineNumbers(Cs)}function getTexelDecodingFunction(ca,ga){var _s=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return "+_s[0]+"ToLinear"+_s[1]+"; }"}function getTexelEncodingFunction(ca,ga){var _s=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return LinearTo"+_s[0]+_s[1]+"; }"}function getToneMappingFunction(ca,ga){var _s;switch(ga){case LinearToneMapping:_s="Linear";break;case ReinhardToneMapping:_s="Reinhard";break;case Uncharted2ToneMapping:_s="Uncharted2";break;case CineonToneMapping:_s="OptimizedCineon";break;case ACESFilmicToneMapping:_s="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+ga)}return"vec3 "+ca+"( vec3 color ) { return "+_s+"ToneMapping( color ); }"}function generateExtensions(ca){var ga=[ca.extensionDerivatives||ca.envMapCubeUV||ca.bumpMap||ca.tangentSpaceNormalMap||ca.clearcoatNormalMap||ca.flatShading||ca.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ca.extensionFragDepth||ca.logarithmicDepthBuffer)&&ca.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ca.extensionDrawBuffers&&ca.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ca.extensionShaderTextureLOD||ca.envMap)&&ca.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return ga.filter(filterEmptyLine).join(`
`)}function generateDefines(ca){var ga=[];for(var _s in ca){var Ss=ca[_s];Ss!==!1&&ga.push("#define "+_s+" "+Ss)}return ga.join(`
`)}function fetchAttributeLocations(ca,ga){for(var _s={},Ss=ca.getProgramParameter(ga,35721),Ms=0;Ms<Ss;Ms++){var Cs=ca.getActiveAttrib(ga,Ms),Ts=Cs.name;_s[Ts]=ca.getAttribLocation(ga,Ts)}return _s}function filterEmptyLine(ca){return ca!==""}function replaceLightNums(ca,ga){return ca.replace(/NUM_DIR_LIGHTS/g,ga.numDirLights).replace(/NUM_SPOT_LIGHTS/g,ga.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,ga.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,ga.numPointLights).replace(/NUM_HEMI_LIGHTS/g,ga.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,ga.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,ga.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,ga.numPointLightShadows)}function replaceClippingPlaneNums(ca,ga){return ca.replace(/NUM_CLIPPING_PLANES/g,ga.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,ga.numClippingPlanes-ga.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ca){return ca.replace(includePattern,includeReplacer)}function includeReplacer(ca,ga){var _s=ShaderChunk[ga];if(_s===void 0)throw new Error("Can not resolve #include <"+ga+">");return resolveIncludes(_s)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(ca){return ca.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(ca,ga,_s,Ss){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(ca,ga,_s,Ss)}function loopReplacer(ca,ga,_s,Ss){for(var Ms="",Cs=parseInt(ga);Cs<parseInt(_s);Cs++)Ms+=Ss.replace(/\[ i \]/g,"[ "+Cs+" ]").replace(/UNROLLED_LOOP_INDEX/g,Cs);return Ms}function generatePrecision(ca){var ga="precision "+ca.precision+` float;
precision `+ca.precision+" int;";return ca.precision==="highp"?ga+=`
#define HIGH_PRECISION`:ca.precision==="mediump"?ga+=`
#define MEDIUM_PRECISION`:ca.precision==="lowp"&&(ga+=`
#define LOW_PRECISION`),ga}function generateShadowMapTypeDefine(ca){var ga="SHADOWMAP_TYPE_BASIC";return ca.shadowMapType===PCFShadowMap?ga="SHADOWMAP_TYPE_PCF":ca.shadowMapType===PCFSoftShadowMap?ga="SHADOWMAP_TYPE_PCF_SOFT":ca.shadowMapType===VSMShadowMap&&(ga="SHADOWMAP_TYPE_VSM"),ga}function generateEnvMapTypeDefine(ca){var ga="ENVMAP_TYPE_CUBE";if(ca.envMap)switch(ca.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:ga="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:ga="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:ga="ENVMAP_TYPE_SPHERE";break}return ga}function generateEnvMapModeDefine(ca){var ga="ENVMAP_MODE_REFLECTION";if(ca.envMap)switch(ca.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_MODE_REFRACTION";break}return ga}function generateEnvMapBlendingDefine(ca){var ga="ENVMAP_BLENDING_NONE";if(ca.envMap)switch(ca.combine){case MultiplyOperation:ga="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:ga="ENVMAP_BLENDING_MIX";break;case AddOperation:ga="ENVMAP_BLENDING_ADD";break}return ga}function WebGLProgram(ca,ga,_s){var Ss=ca.getContext(),Ms=_s.defines,Cs=_s.vertexShader,Ts=_s.fragmentShader,Bs=generateShadowMapTypeDefine(_s),Ps=generateEnvMapTypeDefine(_s),Ls=generateEnvMapModeDefine(_s),Rs=generateEnvMapBlendingDefine(_s),Ds=ca.gammaFactor>0?ca.gammaFactor:1,$s=_s.isWebGL2?"":generateExtensions(_s),Fs=generateDefines(Ms),Gs=Ss.createProgram(),Vs,ks;if(_s.isRawShaderMaterial?(Vs=[Fs].filter(filterEmptyLine).join(`
`),Vs.length>0&&(Vs+=`
`),ks=[$s,Fs].filter(filterEmptyLine).join(`
`),ks.length>0&&(ks+=`
`)):(Vs=[generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Fs,_s.instancing?"#define USE_INSTANCING":"",_s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ds,"#define MAX_BONES "+_s.maxBones,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Ls:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.displacementMap&&_s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.flatShading?"#define FLAT_SHADED":"",_s.skinning?"#define USE_SKINNING":"",_s.useVertexTexture?"#define BONE_TEXTURE":"",_s.morphTargets?"#define USE_MORPHTARGETS":"",_s.morphNormals&&_s.flatShading===!1?"#define USE_MORPHNORMALS":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Bs:"",_s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ks=[$s,generatePrecision(_s),"#define SHADER_NAME "+_s.shaderName,Fs,_s.alphaTest?"#define ALPHATEST "+_s.alphaTest+(_s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Ds,_s.useFog&&_s.fog?"#define USE_FOG":"",_s.useFog&&_s.fogExp2?"#define FOG_EXP2":"",_s.map?"#define USE_MAP":"",_s.matcap?"#define USE_MATCAP":"",_s.envMap?"#define USE_ENVMAP":"",_s.envMap?"#define "+Ps:"",_s.envMap?"#define "+Ls:"",_s.envMap?"#define "+Rs:"",_s.lightMap?"#define USE_LIGHTMAP":"",_s.aoMap?"#define USE_AOMAP":"",_s.emissiveMap?"#define USE_EMISSIVEMAP":"",_s.bumpMap?"#define USE_BUMPMAP":"",_s.normalMap?"#define USE_NORMALMAP":"",_s.normalMap&&_s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_s.normalMap&&_s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_s.clearcoatMap?"#define USE_CLEARCOATMAP":"",_s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_s.specularMap?"#define USE_SPECULARMAP":"",_s.roughnessMap?"#define USE_ROUGHNESSMAP":"",_s.metalnessMap?"#define USE_METALNESSMAP":"",_s.alphaMap?"#define USE_ALPHAMAP":"",_s.sheen?"#define USE_SHEEN":"",_s.vertexTangents?"#define USE_TANGENT":"",_s.vertexColors?"#define USE_COLOR":"",_s.vertexUvs?"#define USE_UV":"",_s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_s.gradientMap?"#define USE_GRADIENTMAP":"",_s.flatShading?"#define FLAT_SHADED":"",_s.doubleSided?"#define DOUBLE_SIDED":"",_s.flipSided?"#define FLIP_SIDED":"",_s.shadowMapEnabled?"#define USE_SHADOWMAP":"",_s.shadowMapEnabled?"#define "+Bs:"",_s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",_s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_s.logarithmicDepthBuffer&&_s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(_s.extensionShaderTextureLOD||_s.envMap)&&_s.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_s.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",_s.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",_s.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",_s.toneMapping):"",_s.dithering?"#define DITHERING":"",_s.outputEncoding||_s.mapEncoding||_s.matcapEncoding||_s.envMapEncoding||_s.emissiveMapEncoding||_s.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",_s.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",_s.mapEncoding):"",_s.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",_s.matcapEncoding):"",_s.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",_s.envMapEncoding):"",_s.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",_s.emissiveMapEncoding):"",_s.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",_s.lightMapEncoding):"",_s.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",_s.outputEncoding):"",_s.depthPacking?"#define DEPTH_PACKING "+_s.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Cs=resolveIncludes(Cs),Cs=replaceLightNums(Cs,_s),Cs=replaceClippingPlaneNums(Cs,_s),Ts=resolveIncludes(Ts),Ts=replaceLightNums(Ts,_s),Ts=replaceClippingPlaneNums(Ts,_s),Cs=unrollLoops(Cs),Ts=unrollLoops(Ts),_s.isWebGL2&&!_s.isRawShaderMaterial){var Os=!1,Ns=/^\s*#version\s+300\s+es\s*\n/;_s.isShaderMaterial&&Cs.match(Ns)!==null&&Ts.match(Ns)!==null&&(Os=!0,Cs=Cs.replace(Ns,""),Ts=Ts.replace(Ns,"")),Vs=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Vs,ks=[`#version 300 es
`,"#define varying in",Os?"":"out highp vec4 pc_fragColor;",Os?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ks}var Us=Vs+Cs,Hs=ks+Ts,zs=WebGLShader(Ss,35633,Us),js=WebGLShader(Ss,35632,Hs);if(Ss.attachShader(Gs,zs),Ss.attachShader(Gs,js),_s.index0AttributeName!==void 0?Ss.bindAttribLocation(Gs,0,_s.index0AttributeName):_s.morphTargets===!0&&Ss.bindAttribLocation(Gs,0,"position"),Ss.linkProgram(Gs),ca.debug.checkShaderErrors){var Ws=Ss.getProgramInfoLog(Gs).trim(),Qs=Ss.getShaderInfoLog(zs).trim(),qs=Ss.getShaderInfoLog(js).trim(),tu=!0,Ys=!0;if(Ss.getProgramParameter(Gs,35714)===!1){tu=!1;var Ks=getShaderErrors(Ss,zs,"vertex"),Js=getShaderErrors(Ss,js,"fragment");console.error("THREE.WebGLProgram: shader error: ",Ss.getError(),"35715",Ss.getProgramParameter(Gs,35715),"gl.getProgramInfoLog",Ws,Ks,Js)}else Ws!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Ws):(Qs===""||qs==="")&&(Ys=!1);Ys&&(this.diagnostics={runnable:tu,programLog:Ws,vertexShader:{log:Qs,prefix:Vs},fragmentShader:{log:qs,prefix:ks}})}Ss.deleteShader(zs),Ss.deleteShader(js);var eu;this.getUniforms=function(){return eu===void 0&&(eu=new WebGLUniforms(Ss,Gs)),eu};var Zs;return this.getAttributes=function(){return Zs===void 0&&(Zs=fetchAttributeLocations(Ss,Gs)),Zs},this.destroy=function(){Ss.deleteProgram(Gs),this.program=void 0},this.name=_s.shaderName,this.id=programIdCount++,this.cacheKey=ga,this.usedTimes=1,this.program=Gs,this.vertexShader=zs,this.fragmentShader=js,this}function WebGLPrograms(ca,ga,_s){var Ss=[],Ms=_s.isWebGL2,Cs=_s.logarithmicDepthBuffer,Ts=_s.floatVertexTextures,Bs=_s.precision,Ps=_s.maxVertexUniforms,Ls=_s.vertexTextures,Rs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Ds=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function $s(Vs,ks){var Os;if(ks){var Ns=ShaderLib[ks];Os={name:Vs.type,uniforms:UniformsUtils.clone(Ns.uniforms),vertexShader:Ns.vertexShader,fragmentShader:Ns.fragmentShader}}else Os={name:Vs.type,uniforms:Vs.uniforms,vertexShader:Vs.vertexShader,fragmentShader:Vs.fragmentShader};return Os}function Fs(Vs){var ks=Vs.skeleton,Os=ks.bones;if(Ts)return 1024;var Ns=Ps,Us=Math.floor((Ns-20)/4),Hs=Math.min(Us,Os.length);return Hs<Os.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Os.length+" bones. This GPU supports "+Hs+"."),0):Hs}function Gs(Vs){var ks;return Vs?Vs.isTexture?ks=Vs.encoding:Vs.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ks=Vs.texture.encoding):ks=LinearEncoding,ks}this.getParameters=function(Vs,ks,Os,Ns,Us,Hs,zs){var js=Ns.fog,Ws=Vs.isMeshStandardMaterial?Ns.environment:null,Qs=Vs.envMap||Ws,qs=Rs[Vs.type],tu=zs.isSkinnedMesh?Fs(zs):0;Vs.precision!==null&&(Bs=_s.getMaxPrecision(Vs.precision),Bs!==Vs.precision&&console.warn("THREE.WebGLProgram.getParameters:",Vs.precision,"not supported, using",Bs,"instead."));var Ys=$s(Vs,qs);Vs.onBeforeCompile(Ys,ca);var Ks=ca.getRenderTarget(),Js={isWebGL2:Ms,shaderID:qs,shaderName:Ys.name,uniforms:Ys.uniforms,vertexShader:Ys.vertexShader,fragmentShader:Ys.fragmentShader,defines:Vs.defines,isRawShaderMaterial:Vs.isRawShaderMaterial,isShaderMaterial:Vs.isShaderMaterial,precision:Bs,instancing:zs.isInstancedMesh===!0,supportsVertexTextures:Ls,outputEncoding:Ks!==null?Gs(Ks.texture):ca.outputEncoding,map:!!Vs.map,mapEncoding:Gs(Vs.map),matcap:!!Vs.matcap,matcapEncoding:Gs(Vs.matcap),envMap:!!Qs,envMapMode:Qs&&Qs.mapping,envMapEncoding:Gs(Qs),envMapCubeUV:!!Qs&&(Qs.mapping===CubeUVReflectionMapping||Qs.mapping===CubeUVRefractionMapping),lightMap:!!Vs.lightMap,lightMapEncoding:Gs(Vs.lightMap),aoMap:!!Vs.aoMap,emissiveMap:!!Vs.emissiveMap,emissiveMapEncoding:Gs(Vs.emissiveMap),bumpMap:!!Vs.bumpMap,normalMap:!!Vs.normalMap,objectSpaceNormalMap:Vs.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Vs.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!Vs.clearcoatMap,clearcoatRoughnessMap:!!Vs.clearcoatRoughnessMap,clearcoatNormalMap:!!Vs.clearcoatNormalMap,displacementMap:!!Vs.displacementMap,roughnessMap:!!Vs.roughnessMap,metalnessMap:!!Vs.metalnessMap,specularMap:!!Vs.specularMap,alphaMap:!!Vs.alphaMap,gradientMap:!!Vs.gradientMap,sheen:!!Vs.sheen,combine:Vs.combine,vertexTangents:Vs.normalMap&&Vs.vertexTangents,vertexColors:Vs.vertexColors,vertexUvs:!!Vs.map||!!Vs.bumpMap||!!Vs.normalMap||!!Vs.specularMap||!!Vs.alphaMap||!!Vs.emissiveMap||!!Vs.roughnessMap||!!Vs.metalnessMap||!!Vs.clearcoatMap||!!Vs.clearcoatRoughnessMap||!!Vs.clearcoatNormalMap||!!Vs.displacementMap,uvsVertexOnly:!(!!Vs.map||!!Vs.bumpMap||!!Vs.normalMap||!!Vs.specularMap||!!Vs.alphaMap||!!Vs.emissiveMap||!!Vs.roughnessMap||!!Vs.metalnessMap||!!Vs.clearcoatNormalMap)&&!!Vs.displacementMap,fog:!!js,useFog:Vs.fog,fogExp2:js&&js.isFogExp2,flatShading:Vs.flatShading,sizeAttenuation:Vs.sizeAttenuation,logarithmicDepthBuffer:Cs,skinning:Vs.skinning&&tu>0,maxBones:tu,useVertexTexture:Ts,morphTargets:Vs.morphTargets,morphNormals:Vs.morphNormals,maxMorphTargets:ca.maxMorphTargets,maxMorphNormals:ca.maxMorphNormals,numDirLights:ks.directional.length,numPointLights:ks.point.length,numSpotLights:ks.spot.length,numRectAreaLights:ks.rectArea.length,numHemiLights:ks.hemi.length,numDirLightShadows:ks.directionalShadowMap.length,numPointLightShadows:ks.pointShadowMap.length,numSpotLightShadows:ks.spotShadowMap.length,numClippingPlanes:Us,numClipIntersection:Hs,dithering:Vs.dithering,shadowMapEnabled:ca.shadowMap.enabled&&Os.length>0,shadowMapType:ca.shadowMap.type,toneMapping:Vs.toneMapped?ca.toneMapping:NoToneMapping,physicallyCorrectLights:ca.physicallyCorrectLights,premultipliedAlpha:Vs.premultipliedAlpha,alphaTest:Vs.alphaTest,doubleSided:Vs.side===DoubleSide,flipSided:Vs.side===BackSide,depthPacking:Vs.depthPacking!==void 0?Vs.depthPacking:!1,index0AttributeName:Vs.index0AttributeName,extensionDerivatives:Vs.extensions&&Vs.extensions.derivatives,extensionFragDepth:Vs.extensions&&Vs.extensions.fragDepth,extensionDrawBuffers:Vs.extensions&&Vs.extensions.drawBuffers,extensionShaderTextureLOD:Vs.extensions&&Vs.extensions.shaderTextureLOD,rendererExtensionFragDepth:Ms||ga.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Ms||ga.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Ms||ga.get("EXT_shader_texture_lod")!==null,onBeforeCompile:Vs.onBeforeCompile};return Js},this.getProgramCacheKey=function(Vs){var ks=[];if(Vs.shaderID?ks.push(Vs.shaderID):(ks.push(Vs.fragmentShader),ks.push(Vs.vertexShader)),Vs.defines!==void 0)for(var Os in Vs.defines)ks.push(Os),ks.push(Vs.defines[Os]);if(Vs.isRawShaderMaterial===void 0){for(var Ns=0;Ns<Ds.length;Ns++)ks.push(Vs[Ds[Ns]]);ks.push(ca.outputEncoding),ks.push(ca.gammaFactor)}return ks.push(Vs.onBeforeCompile.toString()),ks.join()},this.acquireProgram=function(Vs,ks){for(var Os,Ns=0,Us=Ss.length;Ns<Us;Ns++){var Hs=Ss[Ns];if(Hs.cacheKey===ks){Os=Hs,++Os.usedTimes;break}}return Os===void 0&&(Os=new WebGLProgram(ca,ks,Vs),Ss.push(Os)),Os},this.releaseProgram=function(Vs){if(--Vs.usedTimes==0){var ks=Ss.indexOf(Vs);Ss[ks]=Ss[Ss.length-1],Ss.pop(),Vs.destroy()}},this.programs=Ss}function WebGLProperties(){var ca=new WeakMap;function ga(Cs){var Ts=ca.get(Cs);return Ts===void 0&&(Ts={},ca.set(Cs,Ts)),Ts}function _s(Cs){ca.delete(Cs)}function Ss(Cs,Ts,Bs){ca.get(Cs)[Ts]=Bs}function Ms(){ca=new WeakMap}return{get:ga,remove:_s,update:Ss,dispose:Ms}}function painterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.program!==ga.program?ca.program.id-ga.program.id:ca.material.id!==ga.material.id?ca.material.id-ga.material.id:ca.z!==ga.z?ca.z-ga.z:ca.id-ga.id}function reversePainterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.z!==ga.z?ga.z-ca.z:ca.id-ga.id}function WebGLRenderList(){var ca=[],ga=0,_s=[],Ss=[],Ms={id:-1};function Cs(){ga=0,_s.length=0,Ss.length=0}function Ts(Ds,$s,Fs,Gs,Vs,ks){var Os=ca[ga];return Os===void 0?(Os={id:Ds.id,object:Ds,geometry:$s,material:Fs,program:Fs.program||Ms,groupOrder:Gs,renderOrder:Ds.renderOrder,z:Vs,group:ks},ca[ga]=Os):(Os.id=Ds.id,Os.object=Ds,Os.geometry=$s,Os.material=Fs,Os.program=Fs.program||Ms,Os.groupOrder=Gs,Os.renderOrder=Ds.renderOrder,Os.z=Vs,Os.group=ks),ga++,Os}function Bs(Ds,$s,Fs,Gs,Vs,ks){var Os=Ts(Ds,$s,Fs,Gs,Vs,ks);(Fs.transparent===!0?Ss:_s).push(Os)}function Ps(Ds,$s,Fs,Gs,Vs,ks){var Os=Ts(Ds,$s,Fs,Gs,Vs,ks);(Fs.transparent===!0?Ss:_s).unshift(Os)}function Ls(Ds,$s){_s.length>1&&_s.sort(Ds||painterSortStable),Ss.length>1&&Ss.sort($s||reversePainterSortStable)}function Rs(){for(var Ds=ga,$s=ca.length;Ds<$s;Ds++){var Fs=ca[Ds];if(Fs.id===null)break;Fs.id=null,Fs.object=null,Fs.geometry=null,Fs.material=null,Fs.program=null,Fs.group=null}}return{opaque:_s,transparent:Ss,init:Cs,push:Bs,unshift:Ps,finish:Rs,sort:Ls}}function WebGLRenderLists(){var ca=new WeakMap;function ga(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",ga),ca.delete(Cs)}function _s(Ms,Cs){var Ts=ca.get(Ms),Bs;return Ts===void 0?(Bs=new WebGLRenderList,ca.set(Ms,new WeakMap),ca.get(Ms).set(Cs,Bs),Ms.addEventListener("dispose",ga)):(Bs=Ts.get(Cs),Bs===void 0&&(Bs=new WebGLRenderList,Ts.set(Cs,Bs))),Bs}function Ss(){ca=new WeakMap}return{get:_s,dispose:Ss}}function UniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var _s;switch(ga.type){case"DirectionalLight":_s={direction:new Vector3,color:new Color};break;case"SpotLight":_s={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_s={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":_s={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":_s={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ca[ga.id]=_s,_s}}}function ShadowUniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var _s;switch(ga.type){case"DirectionalLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":_s={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ca[ga.id]=_s,_s}}}var nextVersion=0;function shadowCastingLightsFirst(ca,ga){return(ga.castShadow?1:0)-(ca.castShadow?1:0)}function WebGLLights(){for(var ca=new UniformsCache,ga=ShadowUniformsCache(),_s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Ss=0;Ss<9;Ss++)_s.probe.push(new Vector3);var Ms=new Vector3,Cs=new Matrix4,Ts=new Matrix4;function Bs(Ps,Ls,Rs){for(var Ds=0,$s=0,Fs=0,Gs=0;Gs<9;Gs++)_s.probe[Gs].set(0,0,0);var Vs=0,ks=0,Os=0,Ns=0,Us=0,Hs=0,zs=0,js=0,Ws=Rs.matrixWorldInverse;Ps.sort(shadowCastingLightsFirst);for(var Gs=0,Qs=Ps.length;Gs<Qs;Gs++){var qs=Ps[Gs],tu=qs.color,Ys=qs.intensity,Ks=qs.distance,Js=qs.shadow&&qs.shadow.map?qs.shadow.map.texture:null;if(qs.isAmbientLight)Ds+=tu.r*Ys,$s+=tu.g*Ys,Fs+=tu.b*Ys;else if(qs.isLightProbe)for(var eu=0;eu<9;eu++)_s.probe[eu].addScaledVector(qs.sh.coefficients[eu],Ys);else if(qs.isDirectionalLight){var Zs=ca.get(qs);if(Zs.color.copy(qs.color).multiplyScalar(qs.intensity),Zs.direction.setFromMatrixPosition(qs.matrixWorld),Ms.setFromMatrixPosition(qs.target.matrixWorld),Zs.direction.sub(Ms),Zs.direction.transformDirection(Ws),qs.castShadow){var au=qs.shadow,ru=ga.get(qs);ru.shadowBias=au.bias,ru.shadowRadius=au.radius,ru.shadowMapSize=au.mapSize,_s.directionalShadow[Vs]=ru,_s.directionalShadowMap[Vs]=Js,_s.directionalShadowMatrix[Vs]=qs.shadow.matrix,Hs++}_s.directional[Vs]=Zs,Vs++}else if(qs.isSpotLight){var Zs=ca.get(qs);if(Zs.position.setFromMatrixPosition(qs.matrixWorld),Zs.position.applyMatrix4(Ws),Zs.color.copy(tu).multiplyScalar(Ys),Zs.distance=Ks,Zs.direction.setFromMatrixPosition(qs.matrixWorld),Ms.setFromMatrixPosition(qs.target.matrixWorld),Zs.direction.sub(Ms),Zs.direction.transformDirection(Ws),Zs.coneCos=Math.cos(qs.angle),Zs.penumbraCos=Math.cos(qs.angle*(1-qs.penumbra)),Zs.decay=qs.decay,qs.castShadow){var au=qs.shadow,ru=ga.get(qs);ru.shadowBias=au.bias,ru.shadowRadius=au.radius,ru.shadowMapSize=au.mapSize,_s.spotShadow[Os]=ru,_s.spotShadowMap[Os]=Js,_s.spotShadowMatrix[Os]=qs.shadow.matrix,js++}_s.spot[Os]=Zs,Os++}else if(qs.isRectAreaLight){var Zs=ca.get(qs);Zs.color.copy(tu).multiplyScalar(Ys),Zs.position.setFromMatrixPosition(qs.matrixWorld),Zs.position.applyMatrix4(Ws),Ts.identity(),Cs.copy(qs.matrixWorld),Cs.premultiply(Ws),Ts.extractRotation(Cs),Zs.halfWidth.set(qs.width*.5,0,0),Zs.halfHeight.set(0,qs.height*.5,0),Zs.halfWidth.applyMatrix4(Ts),Zs.halfHeight.applyMatrix4(Ts),_s.rectArea[Ns]=Zs,Ns++}else if(qs.isPointLight){var Zs=ca.get(qs);if(Zs.position.setFromMatrixPosition(qs.matrixWorld),Zs.position.applyMatrix4(Ws),Zs.color.copy(qs.color).multiplyScalar(qs.intensity),Zs.distance=qs.distance,Zs.decay=qs.decay,qs.castShadow){var au=qs.shadow,ru=ga.get(qs);ru.shadowBias=au.bias,ru.shadowRadius=au.radius,ru.shadowMapSize=au.mapSize,ru.shadowCameraNear=au.camera.near,ru.shadowCameraFar=au.camera.far,_s.pointShadow[ks]=ru,_s.pointShadowMap[ks]=Js,_s.pointShadowMatrix[ks]=qs.shadow.matrix,zs++}_s.point[ks]=Zs,ks++}else if(qs.isHemisphereLight){var Zs=ca.get(qs);Zs.direction.setFromMatrixPosition(qs.matrixWorld),Zs.direction.transformDirection(Ws),Zs.direction.normalize(),Zs.skyColor.copy(qs.color).multiplyScalar(Ys),Zs.groundColor.copy(qs.groundColor).multiplyScalar(Ys),_s.hemi[Us]=Zs,Us++}}_s.ambient[0]=Ds,_s.ambient[1]=$s,_s.ambient[2]=Fs;var su=_s.hash;(su.directionalLength!==Vs||su.pointLength!==ks||su.spotLength!==Os||su.rectAreaLength!==Ns||su.hemiLength!==Us||su.numDirectionalShadows!==Hs||su.numPointShadows!==zs||su.numSpotShadows!==js)&&(_s.directional.length=Vs,_s.spot.length=Os,_s.rectArea.length=Ns,_s.point.length=ks,_s.hemi.length=Us,_s.directionalShadow.length=Hs,_s.directionalShadowMap.length=Hs,_s.pointShadow.length=zs,_s.pointShadowMap.length=zs,_s.spotShadow.length=js,_s.spotShadowMap.length=js,_s.directionalShadowMatrix.length=Hs,_s.pointShadowMatrix.length=zs,_s.spotShadowMatrix.length=js,su.directionalLength=Vs,su.pointLength=ks,su.spotLength=Os,su.rectAreaLength=Ns,su.hemiLength=Us,su.numDirectionalShadows=Hs,su.numPointShadows=zs,su.numSpotShadows=js,_s.version=nextVersion++)}return{setup:Bs,state:_s}}function WebGLRenderState(){var ca=new WebGLLights,ga=[],_s=[];function Ss(){ga.length=0,_s.length=0}function Ms(Ps){ga.push(Ps)}function Cs(Ps){_s.push(Ps)}function Ts(Ps){ca.setup(ga,_s,Ps)}var Bs={lightsArray:ga,shadowsArray:_s,lights:ca};return{init:Ss,state:Bs,setupLights:Ts,pushLight:Ms,pushShadow:Cs}}function WebGLRenderStates(){var ca=new WeakMap;function ga(Ms){var Cs=Ms.target;Cs.removeEventListener("dispose",ga),ca.delete(Cs)}function _s(Ms,Cs){var Ts;return ca.has(Ms)===!1?(Ts=new WebGLRenderState,ca.set(Ms,new WeakMap),ca.get(Ms).set(Cs,Ts),Ms.addEventListener("dispose",ga)):ca.get(Ms).has(Cs)===!1?(Ts=new WebGLRenderState,ca.get(Ms).set(Cs,Ts)):Ts=ca.get(Ms).get(Cs),Ts}function Ss(){ca=new WeakMap}return{get:_s,dispose:Ss}}function MeshDepthMaterial(ca){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(ca)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.depthPacking=ca.depthPacking,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this};function MeshDistanceMaterial(ca){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(ca)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.referencePosition.copy(ca.referencePosition),this.nearDistance=ca.nearDistance,this.farDistance=ca.farDistance,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(ca,ga,_s){var Ss=new Frustum,Ms=new Vector2,Cs=new Vector2,Ts=new Vector4,Bs=[],Ps=[],Ls={},Rs={0:BackSide,1:FrontSide,2:DoubleSide},Ds=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),$s=Ds.clone();$s.defines.HORIZONAL_PASS=1;var Fs=new BufferGeometry;Fs.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Gs=new Mesh(Fs,Ds),Vs=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(zs,js,Ws){if(Vs.enabled!==!1&&!(Vs.autoUpdate===!1&&Vs.needsUpdate===!1)&&zs.length!==0){var Qs=ca.getRenderTarget(),qs=ca.getActiveCubeFace(),tu=ca.getActiveMipmapLevel(),Ys=ca.state;Ys.setBlending(NoBlending),Ys.buffers.color.setClear(1,1,1,1),Ys.buffers.depth.setTest(!0),Ys.setScissorTest(!1);for(var Ks=0,Js=zs.length;Ks<Js;Ks++){var eu=zs[Ks],Zs=eu.shadow;if(Zs===void 0){console.warn("THREE.WebGLShadowMap:",eu,"has no shadow.");continue}Ms.copy(Zs.mapSize);var au=Zs.getFrameExtents();if(Ms.multiply(au),Cs.copy(Zs.mapSize),(Ms.x>_s||Ms.y>_s)&&(Ms.x>_s&&(Cs.x=Math.floor(_s/au.x),Ms.x=Cs.x*au.x,Zs.mapSize.x=Cs.x),Ms.y>_s&&(Cs.y=Math.floor(_s/au.y),Ms.y=Cs.y*au.y,Zs.mapSize.y=Cs.y)),Zs.map===null&&!Zs.isPointLightShadow&&this.type===VSMShadowMap){var ru={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Zs.map=new WebGLRenderTarget(Ms.x,Ms.y,ru),Zs.map.texture.name=eu.name+".shadowMap",Zs.mapPass=new WebGLRenderTarget(Ms.x,Ms.y,ru),Zs.camera.updateProjectionMatrix()}if(Zs.map===null){var ru={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Zs.map=new WebGLRenderTarget(Ms.x,Ms.y,ru),Zs.map.texture.name=eu.name+".shadowMap",Zs.camera.updateProjectionMatrix()}ca.setRenderTarget(Zs.map),ca.clear();for(var su=Zs.getViewportCount(),lu=0;lu<su;lu++){var gu=Zs.getViewport(lu);Ts.set(Cs.x*gu.x,Cs.y*gu.y,Cs.x*gu.z,Cs.y*gu.w),Ys.viewport(Ts),Zs.updateMatrices(eu,lu),Ss=Zs.getFrustum(),Hs(js,Ws,Zs.camera,eu,this.type)}!Zs.isPointLightShadow&&this.type===VSMShadowMap&&ks(Zs,Ws)}Vs.needsUpdate=!1,ca.setRenderTarget(Qs,qs,tu)}};function ks(zs,js){var Ws=ga.update(Gs);Ds.uniforms.shadow_pass.value=zs.map.texture,Ds.uniforms.resolution.value=zs.mapSize,Ds.uniforms.radius.value=zs.radius,ca.setRenderTarget(zs.mapPass),ca.clear(),ca.renderBufferDirect(js,null,Ws,Ds,Gs,null),$s.uniforms.shadow_pass.value=zs.mapPass.texture,$s.uniforms.resolution.value=zs.mapSize,$s.uniforms.radius.value=zs.radius,ca.setRenderTarget(zs.map),ca.clear(),ca.renderBufferDirect(js,null,Ws,$s,Gs,null)}function Os(zs,js,Ws){var Qs=zs<<0|js<<1|Ws<<2,qs=Bs[Qs];return qs===void 0&&(qs=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:zs,skinning:js}),Bs[Qs]=qs),qs}function Ns(zs,js,Ws){var Qs=zs<<0|js<<1|Ws<<2,qs=Ps[Qs];return qs===void 0&&(qs=new MeshDistanceMaterial({morphTargets:zs,skinning:js}),Ps[Qs]=qs),qs}function Us(zs,js,Ws,Qs,qs,tu,Ys){var Ks=null,Js=Os,eu=zs.customDepthMaterial;if(Qs.isPointLight===!0&&(Js=Ns,eu=zs.customDistanceMaterial),eu===void 0){var Zs=!1;Ws.morphTargets===!0&&(Zs=js.morphAttributes&&js.morphAttributes.position&&js.morphAttributes.position.length>0);var au=!1;zs.isSkinnedMesh===!0&&(Ws.skinning===!0?au=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",zs));var ru=zs.isInstancedMesh===!0;Ks=Js(Zs,au,ru)}else Ks=eu;if(ca.localClippingEnabled&&Ws.clipShadows===!0&&Ws.clippingPlanes.length!==0){var su=Ks.uuid,lu=Ws.uuid,gu=Ls[su];gu===void 0&&(gu={},Ls[su]=gu);var hu=gu[lu];hu===void 0&&(hu=Ks.clone(),gu[lu]=hu),Ks=hu}return Ks.visible=Ws.visible,Ks.wireframe=Ws.wireframe,Ys===VSMShadowMap?Ks.side=Ws.shadowSide!==null?Ws.shadowSide:Ws.side:Ks.side=Ws.shadowSide!==null?Ws.shadowSide:Rs[Ws.side],Ks.clipShadows=Ws.clipShadows,Ks.clippingPlanes=Ws.clippingPlanes,Ks.clipIntersection=Ws.clipIntersection,Ks.wireframeLinewidth=Ws.wireframeLinewidth,Ks.linewidth=Ws.linewidth,Qs.isPointLight===!0&&Ks.isMeshDistanceMaterial===!0&&(Ks.referencePosition.setFromMatrixPosition(Qs.matrixWorld),Ks.nearDistance=qs,Ks.farDistance=tu),Ks}function Hs(zs,js,Ws,Qs,qs){if(zs.visible!==!1){var tu=zs.layers.test(js.layers);if(tu&&(zs.isMesh||zs.isLine||zs.isPoints)&&(zs.castShadow||zs.receiveShadow&&qs===VSMShadowMap)&&(!zs.frustumCulled||Ss.intersectsObject(zs))){zs.modelViewMatrix.multiplyMatrices(Ws.matrixWorldInverse,zs.matrixWorld);var Ys=ga.update(zs),Ks=zs.material;if(Array.isArray(Ks))for(var Js=Ys.groups,eu=0,Zs=Js.length;eu<Zs;eu++){var au=Js[eu],ru=Ks[au.materialIndex];if(ru&&ru.visible){var su=Us(zs,Ys,ru,Qs,Ws.near,Ws.far,qs);ca.renderBufferDirect(Ws,null,Ys,su,zs,au)}}else if(Ks.visible){var su=Us(zs,Ys,Ks,Qs,Ws.near,Ws.far,qs);ca.renderBufferDirect(Ws,null,Ys,su,zs,null)}}for(var lu=zs.children,gu=0,hu=lu.length;gu<hu;gu++)Hs(lu[gu],js,Ws,Qs,qs)}}}function WebGLState(ca,ga,_s){var Ss=_s.isWebGL2;function Ms(){var fu=!1,ku=new Vector4,Vu=null,nl=new Vector4(0,0,0,0);return{setMask:function(Gu){Vu!==Gu&&!fu&&(ca.colorMask(Gu,Gu,Gu,Gu),Vu=Gu)},setLocked:function(Gu){fu=Gu},setClear:function(Gu,ol,sl,ul,ml){ml===!0&&(Gu*=ul,ol*=ul,sl*=ul),ku.set(Gu,ol,sl,ul),nl.equals(ku)===!1&&(ca.clearColor(Gu,ol,sl,ul),nl.copy(ku))},reset:function(){fu=!1,Vu=null,nl.set(-1,0,0,0)}}}function Cs(){var fu=!1,ku=null,Vu=null,nl=null;return{setTest:function(Gu){Gu?Tu(2929):bu(2929)},setMask:function(Gu){ku!==Gu&&!fu&&(ca.depthMask(Gu),ku=Gu)},setFunc:function(Gu){if(Vu!==Gu){if(Gu)switch(Gu){case NeverDepth:ca.depthFunc(512);break;case AlwaysDepth:ca.depthFunc(519);break;case LessDepth:ca.depthFunc(513);break;case LessEqualDepth:ca.depthFunc(515);break;case EqualDepth:ca.depthFunc(514);break;case GreaterEqualDepth:ca.depthFunc(518);break;case GreaterDepth:ca.depthFunc(516);break;case NotEqualDepth:ca.depthFunc(517);break;default:ca.depthFunc(515)}else ca.depthFunc(515);Vu=Gu}},setLocked:function(Gu){fu=Gu},setClear:function(Gu){nl!==Gu&&(ca.clearDepth(Gu),nl=Gu)},reset:function(){fu=!1,ku=null,Vu=null,nl=null}}}function Ts(){var fu=!1,ku=null,Vu=null,nl=null,Gu=null,ol=null,sl=null,ul=null,ml=null;return{setTest:function(al){fu||(al?Tu(2960):bu(2960))},setMask:function(al){ku!==al&&!fu&&(ca.stencilMask(al),ku=al)},setFunc:function(al,dl,vl){(Vu!==al||nl!==dl||Gu!==vl)&&(ca.stencilFunc(al,dl,vl),Vu=al,nl=dl,Gu=vl)},setOp:function(al,dl,vl){(ol!==al||sl!==dl||ul!==vl)&&(ca.stencilOp(al,dl,vl),ol=al,sl=dl,ul=vl)},setLocked:function(al){fu=al},setClear:function(al){ml!==al&&(ca.clearStencil(al),ml=al)},reset:function(){fu=!1,ku=null,Vu=null,nl=null,Gu=null,ol=null,sl=null,ul=null,ml=null}}}var Bs=new Ms,Ps=new Cs,Ls=new Ts,Rs=ca.getParameter(34921),Ds=new Uint8Array(Rs),$s=new Uint8Array(Rs),Fs=new Uint8Array(Rs),Gs={},Vs=null,ks=null,Os=null,Ns=null,Us=null,Hs=null,zs=null,js=null,Ws=null,Qs=!1,qs=null,tu=null,Ys=null,Ks=null,Js=null,eu=ca.getParameter(35661),Zs=!1,au=0,ru=ca.getParameter(7938);ru.indexOf("WebGL")!==-1?(au=parseFloat(/^WebGL\ ([0-9])/.exec(ru)[1]),Zs=au>=1):ru.indexOf("OpenGL ES")!==-1&&(au=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ru)[1]),Zs=au>=2);var su=null,lu={},gu=new Vector4,hu=new Vector4;function wu(fu,ku,Vu){var nl=new Uint8Array(4),Gu=ca.createTexture();ca.bindTexture(fu,Gu),ca.texParameteri(fu,10241,9728),ca.texParameteri(fu,10240,9728);for(var ol=0;ol<Vu;ol++)ca.texImage2D(ku+ol,0,6408,1,1,0,6408,5121,nl);return Gu}var Mu={};Mu[3553]=wu(3553,3553,1),Mu[34067]=wu(34067,34069,6),Bs.setClear(0,0,0,1),Ps.setClear(1),Ls.setClear(0),Tu(2929),Ps.setFunc(LessEqualDepth),nu(!1),uu(CullFaceBack),Tu(2884),Nu(NoBlending);function du(){for(var fu=0,ku=Ds.length;fu<ku;fu++)Ds[fu]=0}function vu(fu){pu(fu,0)}function pu(fu,ku){if(Ds[fu]=1,$s[fu]===0&&(ca.enableVertexAttribArray(fu),$s[fu]=1),Fs[fu]!==ku){var Vu=Ss?ca:ga.get("ANGLE_instanced_arrays");Vu[Ss?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](fu,ku),Fs[fu]=ku}}function yu(){for(var fu=0,ku=$s.length;fu!==ku;++fu)$s[fu]!==Ds[fu]&&(ca.disableVertexAttribArray(fu),$s[fu]=0)}function Su(fu,ku,Vu,nl,Gu,ol){Ss===!0&&(Vu===5124||Vu===5125)?ca.vertexAttribIPointer(fu,ku,Vu,nl,Gu,ol):ca.vertexAttribPointer(fu,ku,Vu,nl,Gu,ol)}function Tu(fu){Gs[fu]!==!0&&(ca.enable(fu),Gs[fu]=!0)}function bu(fu){Gs[fu]!==!1&&(ca.disable(fu),Gs[fu]=!1)}function Au(fu){return Vs!==fu?(ca.useProgram(fu),Vs=fu,!0):!1}var Bu={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Ss)Bu[MinEquation]=32775,Bu[MaxEquation]=32776;else{var Lu=ga.get("EXT_blend_minmax");Lu!==null&&(Bu[MinEquation]=Lu.MIN_EXT,Bu[MaxEquation]=Lu.MAX_EXT)}var Qu={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Nu(fu,ku,Vu,nl,Gu,ol,sl,ul){if(fu===NoBlending){ks&&(bu(3042),ks=!1);return}if(ks||(Tu(3042),ks=!0),fu!==CustomBlending){if(fu!==Os||ul!==Qs){if((Ns!==AddEquation||zs!==AddEquation)&&(ca.blendEquation(32774),Ns=AddEquation,zs=AddEquation),ul)switch(fu){case NormalBlending:ca.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ca.blendFunc(1,1);break;case SubtractiveBlending:ca.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:ca.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fu);break}else switch(fu){case NormalBlending:ca.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ca.blendFunc(770,1);break;case SubtractiveBlending:ca.blendFunc(0,769);break;case MultiplyBlending:ca.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fu);break}Us=null,Hs=null,js=null,Ws=null,Os=fu,Qs=ul}return}Gu=Gu||ku,ol=ol||Vu,sl=sl||nl,(ku!==Ns||Gu!==zs)&&(ca.blendEquationSeparate(Bu[ku],Bu[Gu]),Ns=ku,zs=Gu),(Vu!==Us||nl!==Hs||ol!==js||sl!==Ws)&&(ca.blendFuncSeparate(Qu[Vu],Qu[nl],Qu[ol],Qu[sl]),Us=Vu,Hs=nl,js=ol,Ws=sl),Os=fu,Qs=null}function ju(fu,ku){fu.side===DoubleSide?bu(2884):Tu(2884);var Vu=fu.side===BackSide;ku&&(Vu=!Vu),nu(Vu),fu.blending===NormalBlending&&fu.transparent===!1?Nu(NoBlending):Nu(fu.blending,fu.blendEquation,fu.blendSrc,fu.blendDst,fu.blendEquationAlpha,fu.blendSrcAlpha,fu.blendDstAlpha,fu.premultipliedAlpha),Ps.setFunc(fu.depthFunc),Ps.setTest(fu.depthTest),Ps.setMask(fu.depthWrite),Bs.setMask(fu.colorWrite);var nl=fu.stencilWrite;Ls.setTest(nl),nl&&(Ls.setMask(fu.stencilWriteMask),Ls.setFunc(fu.stencilFunc,fu.stencilRef,fu.stencilFuncMask),Ls.setOp(fu.stencilFail,fu.stencilZFail,fu.stencilZPass)),Iu(fu.polygonOffset,fu.polygonOffsetFactor,fu.polygonOffsetUnits)}function nu(fu){qs!==fu&&(fu?ca.frontFace(2304):ca.frontFace(2305),qs=fu)}function uu(fu){fu!==CullFaceNone?(Tu(2884),fu!==tu&&(fu===CullFaceBack?ca.cullFace(1029):fu===CullFaceFront?ca.cullFace(1028):ca.cullFace(1032))):bu(2884),tu=fu}function Pu(fu){fu!==Ys&&(Zs&&ca.lineWidth(fu),Ys=fu)}function Iu(fu,ku,Vu){fu?(Tu(32823),(Ks!==ku||Js!==Vu)&&(ca.polygonOffset(ku,Vu),Ks=ku,Js=Vu)):bu(32823)}function Ku(fu){fu?Tu(3089):bu(3089)}function Fu(fu){fu===void 0&&(fu=33984+eu-1),su!==fu&&(ca.activeTexture(fu),su=fu)}function Ru(fu,ku){su===null&&Fu();var Vu=lu[su];Vu===void 0&&(Vu={type:void 0,texture:void 0},lu[su]=Vu),(Vu.type!==fu||Vu.texture!==ku)&&(ca.bindTexture(fu,ku||Mu[fu]),Vu.type=fu,Vu.texture=ku)}function il(){var fu=lu[su];fu!==void 0&&fu.type!==void 0&&(ca.bindTexture(fu.type,null),fu.type=void 0,fu.texture=void 0)}function Ju(){try{ca.compressedTexImage2D.apply(ca,arguments)}catch(fu){console.error("THREE.WebGLState:",fu)}}function Xu(){try{ca.texImage2D.apply(ca,arguments)}catch(fu){console.error("THREE.WebGLState:",fu)}}function Ou(){try{ca.texImage3D.apply(ca,arguments)}catch(fu){console.error("THREE.WebGLState:",fu)}}function Uu(fu){gu.equals(fu)===!1&&(ca.scissor(fu.x,fu.y,fu.z,fu.w),gu.copy(fu))}function $u(fu){hu.equals(fu)===!1&&(ca.viewport(fu.x,fu.y,fu.z,fu.w),hu.copy(fu))}function Hu(){for(var fu=0;fu<$s.length;fu++)$s[fu]===1&&(ca.disableVertexAttribArray(fu),$s[fu]=0);Gs={},su=null,lu={},Vs=null,Os=null,qs=null,tu=null,Bs.reset(),Ps.reset(),Ls.reset()}return{buffers:{color:Bs,depth:Ps,stencil:Ls},initAttributes:du,enableAttribute:vu,enableAttributeAndDivisor:pu,disableUnusedAttributes:yu,vertexAttribPointer:Su,enable:Tu,disable:bu,useProgram:Au,setBlending:Nu,setMaterial:ju,setFlipSided:nu,setCullFace:uu,setLineWidth:Pu,setPolygonOffset:Iu,setScissorTest:Ku,activeTexture:Fu,bindTexture:Ru,unbindTexture:il,compressedTexImage2D:Ju,texImage2D:Xu,texImage3D:Ou,scissor:Uu,viewport:$u,reset:Hu}}function WebGLTextures(ca,ga,_s,Ss,Ms,Cs,Ts){var Bs=Ms.isWebGL2,Ps=Ms.maxTextures,Ls=Ms.maxCubemapSize,Rs=Ms.maxTextureSize,Ds=Ms.maxSamples,$s=new WeakMap,Fs,Gs=!1;try{Gs=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Vs(nu,uu){return Gs?new OffscreenCanvas(nu,uu):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function ks(nu,uu,Pu,Iu){var Ku=1;if((nu.width>Iu||nu.height>Iu)&&(Ku=Iu/Math.max(nu.width,nu.height)),Ku<1||uu===!0)if(typeof HTMLImageElement!="undefined"&&nu instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&nu instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&nu instanceof ImageBitmap){var Fu=uu?MathUtils.floorPowerOfTwo:Math.floor,Ru=Fu(Ku*nu.width),il=Fu(Ku*nu.height);Fs===void 0&&(Fs=Vs(Ru,il));var Ju=Pu?Vs(Ru,il):Fs;Ju.width=Ru,Ju.height=il;var Xu=Ju.getContext("2d");return Xu.drawImage(nu,0,0,Ru,il),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+nu.width+"x"+nu.height+") to ("+Ru+"x"+il+")."),Ju}else return"data"in nu&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+nu.width+"x"+nu.height+")."),nu;return nu}function Os(nu){return MathUtils.isPowerOfTwo(nu.width)&&MathUtils.isPowerOfTwo(nu.height)}function Ns(nu){return Bs?!1:nu.wrapS!==ClampToEdgeWrapping||nu.wrapT!==ClampToEdgeWrapping||nu.minFilter!==NearestFilter&&nu.minFilter!==LinearFilter}function Us(nu,uu){return nu.generateMipmaps&&uu&&nu.minFilter!==NearestFilter&&nu.minFilter!==LinearFilter}function Hs(nu,uu,Pu,Iu){ca.generateMipmap(nu);var Ku=Ss.get(uu);Ku.__maxMipLevel=Math.log(Math.max(Pu,Iu))*Math.LOG2E}function zs(nu,uu,Pu){if(Bs===!1)return uu;if(nu!==null){if(ca[nu]!==void 0)return ca[nu];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+nu+"'")}var Iu=uu;return uu===6403&&(Pu===5126&&(Iu=33326),Pu===5131&&(Iu=33325),Pu===5121&&(Iu=33321)),uu===6407&&(Pu===5126&&(Iu=34837),Pu===5131&&(Iu=34843),Pu===5121&&(Iu=32849)),uu===6408&&(Pu===5126&&(Iu=34836),Pu===5131&&(Iu=34842),Pu===5121&&(Iu=32856)),(Iu===33325||Iu===33326||Iu===34842||Iu===34836)&&ga.get("EXT_color_buffer_float"),Iu}function js(nu){return nu===NearestFilter||nu===NearestMipmapNearestFilter||nu===NearestMipmapLinearFilter?9728:9729}function Ws(nu){var uu=nu.target;uu.removeEventListener("dispose",Ws),qs(uu),uu.isVideoTexture&&$s.delete(uu),Ts.memory.textures--}function Qs(nu){var uu=nu.target;uu.removeEventListener("dispose",Qs),tu(uu),Ts.memory.textures--}function qs(nu){var uu=Ss.get(nu);uu.__webglInit!==void 0&&(ca.deleteTexture(uu.__webglTexture),Ss.remove(nu))}function tu(nu){var uu=Ss.get(nu),Pu=Ss.get(nu.texture);if(!!nu){if(Pu.__webglTexture!==void 0&&ca.deleteTexture(Pu.__webglTexture),nu.depthTexture&&nu.depthTexture.dispose(),nu.isWebGLCubeRenderTarget)for(var Iu=0;Iu<6;Iu++)ca.deleteFramebuffer(uu.__webglFramebuffer[Iu]),uu.__webglDepthbuffer&&ca.deleteRenderbuffer(uu.__webglDepthbuffer[Iu]);else ca.deleteFramebuffer(uu.__webglFramebuffer),uu.__webglDepthbuffer&&ca.deleteRenderbuffer(uu.__webglDepthbuffer),uu.__webglMultisampledFramebuffer&&ca.deleteFramebuffer(uu.__webglMultisampledFramebuffer),uu.__webglColorRenderbuffer&&ca.deleteRenderbuffer(uu.__webglColorRenderbuffer),uu.__webglDepthRenderbuffer&&ca.deleteRenderbuffer(uu.__webglDepthRenderbuffer);Ss.remove(nu.texture),Ss.remove(nu)}}var Ys=0;function Ks(){Ys=0}function Js(){var nu=Ys;return nu>=Ps&&console.warn("THREE.WebGLTextures: Trying to use "+nu+" texture units while this GPU supports only "+Ps),Ys+=1,nu}function eu(nu,uu){var Pu=Ss.get(nu);if(nu.isVideoTexture&&Bu(nu),nu.version>0&&Pu.__version!==nu.version){var Iu=nu.image;if(Iu===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Iu.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Mu(Pu,nu,uu);return}}_s.activeTexture(33984+uu),_s.bindTexture(3553,Pu.__webglTexture)}function Zs(nu,uu){var Pu=Ss.get(nu);if(nu.version>0&&Pu.__version!==nu.version){Mu(Pu,nu,uu);return}_s.activeTexture(33984+uu),_s.bindTexture(35866,Pu.__webglTexture)}function au(nu,uu){var Pu=Ss.get(nu);if(nu.version>0&&Pu.__version!==nu.version){Mu(Pu,nu,uu);return}_s.activeTexture(33984+uu),_s.bindTexture(32879,Pu.__webglTexture)}function ru(nu,uu){if(nu.image.length===6){var Pu=Ss.get(nu);if(nu.version>0&&Pu.__version!==nu.version){wu(Pu,nu),_s.activeTexture(33984+uu),_s.bindTexture(34067,Pu.__webglTexture),ca.pixelStorei(37440,nu.flipY);for(var Iu=nu&&(nu.isCompressedTexture||nu.image[0].isCompressedTexture),Ku=nu.image[0]&&nu.image[0].isDataTexture,Fu=[],Ru=0;Ru<6;Ru++)!Iu&&!Ku?Fu[Ru]=ks(nu.image[Ru],!1,!0,Ls):Fu[Ru]=Ku?nu.image[Ru].image:nu.image[Ru];var il=Fu[0],Ju=Os(il)||Bs,Xu=Cs.convert(nu.format),Ou=Cs.convert(nu.type),Uu=zs(nu.internalFormat,Xu,Ou);hu(34067,nu,Ju);var $u;if(Iu){for(var Ru=0;Ru<6;Ru++){$u=Fu[Ru].mipmaps;for(var Hu=0;Hu<$u.length;Hu++){var fu=$u[Hu];nu.format!==RGBAFormat&&nu.format!==RGBFormat?Xu!==null?_s.compressedTexImage2D(34069+Ru,Hu,Uu,fu.width,fu.height,0,fu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_s.texImage2D(34069+Ru,Hu,Uu,fu.width,fu.height,0,Xu,Ou,fu.data)}}Pu.__maxMipLevel=$u.length-1}else{$u=nu.mipmaps;for(var Ru=0;Ru<6;Ru++)if(Ku){_s.texImage2D(34069+Ru,0,Uu,Fu[Ru].width,Fu[Ru].height,0,Xu,Ou,Fu[Ru].data);for(var Hu=0;Hu<$u.length;Hu++){var fu=$u[Hu],ku=fu.image[Ru].image;_s.texImage2D(34069+Ru,Hu+1,Uu,ku.width,ku.height,0,Xu,Ou,ku.data)}}else{_s.texImage2D(34069+Ru,0,Uu,Xu,Ou,Fu[Ru]);for(var Hu=0;Hu<$u.length;Hu++){var fu=$u[Hu];_s.texImage2D(34069+Ru,Hu+1,Uu,Xu,Ou,fu.image[Ru])}}Pu.__maxMipLevel=$u.length}Us(nu,Ju)&&Hs(34067,nu,il.width,il.height),Pu.__version=nu.version,nu.onUpdate&&nu.onUpdate(nu)}else _s.activeTexture(33984+uu),_s.bindTexture(34067,Pu.__webglTexture)}}function su(nu,uu){_s.activeTexture(33984+uu),_s.bindTexture(34067,Ss.get(nu).__webglTexture)}var lu={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},gu={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function hu(nu,uu,Pu){Pu?(ca.texParameteri(nu,10242,lu[uu.wrapS]),ca.texParameteri(nu,10243,lu[uu.wrapT]),(nu===32879||nu===35866)&&ca.texParameteri(nu,32882,lu[uu.wrapR]),ca.texParameteri(nu,10240,gu[uu.magFilter]),ca.texParameteri(nu,10241,gu[uu.minFilter])):(ca.texParameteri(nu,10242,33071),ca.texParameteri(nu,10243,33071),(nu===32879||nu===35866)&&ca.texParameteri(nu,32882,33071),(uu.wrapS!==ClampToEdgeWrapping||uu.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ca.texParameteri(nu,10240,js(uu.magFilter)),ca.texParameteri(nu,10241,js(uu.minFilter)),uu.minFilter!==NearestFilter&&uu.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Iu=ga.get("EXT_texture_filter_anisotropic");if(Iu){if(uu.type===FloatType&&ga.get("OES_texture_float_linear")===null||uu.type===HalfFloatType&&(Bs||ga.get("OES_texture_half_float_linear"))===null)return;(uu.anisotropy>1||Ss.get(uu).__currentAnisotropy)&&(ca.texParameterf(nu,Iu.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(uu.anisotropy,Ms.getMaxAnisotropy())),Ss.get(uu).__currentAnisotropy=uu.anisotropy)}}function wu(nu,uu){nu.__webglInit===void 0&&(nu.__webglInit=!0,uu.addEventListener("dispose",Ws),nu.__webglTexture=ca.createTexture(),Ts.memory.textures++)}function Mu(nu,uu,Pu){var Iu=3553;uu.isDataTexture2DArray&&(Iu=35866),uu.isDataTexture3D&&(Iu=32879),wu(nu,uu),_s.activeTexture(33984+Pu),_s.bindTexture(Iu,nu.__webglTexture),ca.pixelStorei(37440,uu.flipY),ca.pixelStorei(37441,uu.premultiplyAlpha),ca.pixelStorei(3317,uu.unpackAlignment);var Ku=Ns(uu)&&Os(uu.image)===!1,Fu=ks(uu.image,Ku,!1,Rs),Ru=Os(Fu)||Bs,il=Cs.convert(uu.format),Ju=Cs.convert(uu.type),Xu=zs(uu.internalFormat,il,Ju);hu(Iu,uu,Ru);var Ou,Uu=uu.mipmaps;if(uu.isDepthTexture)Xu=6402,Bs?uu.type===FloatType?Xu=36012:uu.type===UnsignedIntType?Xu=33190:uu.type===UnsignedInt248Type?Xu=35056:Xu=33189:uu.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),uu.format===DepthFormat&&Xu===6402&&uu.type!==UnsignedShortType&&uu.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),uu.type=UnsignedShortType,Ju=Cs.convert(uu.type)),uu.format===DepthStencilFormat&&Xu===6402&&(Xu=34041,uu.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),uu.type=UnsignedInt248Type,Ju=Cs.convert(uu.type))),_s.texImage2D(3553,0,Xu,Fu.width,Fu.height,0,il,Ju,null);else if(uu.isDataTexture)if(Uu.length>0&&Ru){for(var $u=0,Hu=Uu.length;$u<Hu;$u++)Ou=Uu[$u],_s.texImage2D(3553,$u,Xu,Ou.width,Ou.height,0,il,Ju,Ou.data);uu.generateMipmaps=!1,nu.__maxMipLevel=Uu.length-1}else _s.texImage2D(3553,0,Xu,Fu.width,Fu.height,0,il,Ju,Fu.data),nu.__maxMipLevel=0;else if(uu.isCompressedTexture){for(var $u=0,Hu=Uu.length;$u<Hu;$u++)Ou=Uu[$u],uu.format!==RGBAFormat&&uu.format!==RGBFormat?il!==null?_s.compressedTexImage2D(3553,$u,Xu,Ou.width,Ou.height,0,Ou.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_s.texImage2D(3553,$u,Xu,Ou.width,Ou.height,0,il,Ju,Ou.data);nu.__maxMipLevel=Uu.length-1}else if(uu.isDataTexture2DArray)_s.texImage3D(35866,0,Xu,Fu.width,Fu.height,Fu.depth,0,il,Ju,Fu.data),nu.__maxMipLevel=0;else if(uu.isDataTexture3D)_s.texImage3D(32879,0,Xu,Fu.width,Fu.height,Fu.depth,0,il,Ju,Fu.data),nu.__maxMipLevel=0;else if(Uu.length>0&&Ru){for(var $u=0,Hu=Uu.length;$u<Hu;$u++)Ou=Uu[$u],_s.texImage2D(3553,$u,Xu,il,Ju,Ou);uu.generateMipmaps=!1,nu.__maxMipLevel=Uu.length-1}else _s.texImage2D(3553,0,Xu,il,Ju,Fu),nu.__maxMipLevel=0;Us(uu,Ru)&&Hs(Iu,uu,Fu.width,Fu.height),nu.__version=uu.version,uu.onUpdate&&uu.onUpdate(uu)}function du(nu,uu,Pu,Iu){var Ku=Cs.convert(uu.texture.format),Fu=Cs.convert(uu.texture.type),Ru=zs(uu.texture.internalFormat,Ku,Fu);_s.texImage2D(Iu,0,Ru,uu.width,uu.height,0,Ku,Fu,null),ca.bindFramebuffer(36160,nu),ca.framebufferTexture2D(36160,Pu,Iu,Ss.get(uu.texture).__webglTexture,0),ca.bindFramebuffer(36160,null)}function vu(nu,uu,Pu){if(ca.bindRenderbuffer(36161,nu),uu.depthBuffer&&!uu.stencilBuffer){var Iu=33189;if(Pu){var Ku=uu.depthTexture;Ku&&Ku.isDepthTexture&&(Ku.type===FloatType?Iu=36012:Ku.type===UnsignedIntType&&(Iu=33190));var Fu=Au(uu);ca.renderbufferStorageMultisample(36161,Fu,Iu,uu.width,uu.height)}else ca.renderbufferStorage(36161,Iu,uu.width,uu.height);ca.framebufferRenderbuffer(36160,36096,36161,nu)}else if(uu.depthBuffer&&uu.stencilBuffer){if(Pu){var Fu=Au(uu);ca.renderbufferStorageMultisample(36161,Fu,35056,uu.width,uu.height)}else ca.renderbufferStorage(36161,34041,uu.width,uu.height);ca.framebufferRenderbuffer(36160,33306,36161,nu)}else{var Ru=Cs.convert(uu.texture.format),il=Cs.convert(uu.texture.type),Iu=zs(uu.texture.internalFormat,Ru,il);if(Pu){var Fu=Au(uu);ca.renderbufferStorageMultisample(36161,Fu,Iu,uu.width,uu.height)}else ca.renderbufferStorage(36161,Iu,uu.width,uu.height)}ca.bindRenderbuffer(36161,null)}function pu(nu,uu){var Pu=uu&&uu.isWebGLCubeRenderTarget;if(Pu)throw new Error("Depth Texture with cube render targets is not supported");if(ca.bindFramebuffer(36160,nu),!(uu.depthTexture&&uu.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Ss.get(uu.depthTexture).__webglTexture||uu.depthTexture.image.width!==uu.width||uu.depthTexture.image.height!==uu.height)&&(uu.depthTexture.image.width=uu.width,uu.depthTexture.image.height=uu.height,uu.depthTexture.needsUpdate=!0),eu(uu.depthTexture,0);var Iu=Ss.get(uu.depthTexture).__webglTexture;if(uu.depthTexture.format===DepthFormat)ca.framebufferTexture2D(36160,36096,3553,Iu,0);else if(uu.depthTexture.format===DepthStencilFormat)ca.framebufferTexture2D(36160,33306,3553,Iu,0);else throw new Error("Unknown depthTexture format")}function yu(nu){var uu=Ss.get(nu),Pu=nu.isWebGLCubeRenderTarget===!0;if(nu.depthTexture){if(Pu)throw new Error("target.depthTexture not supported in Cube render targets");pu(uu.__webglFramebuffer,nu)}else if(Pu){uu.__webglDepthbuffer=[];for(var Iu=0;Iu<6;Iu++)ca.bindFramebuffer(36160,uu.__webglFramebuffer[Iu]),uu.__webglDepthbuffer[Iu]=ca.createRenderbuffer(),vu(uu.__webglDepthbuffer[Iu],nu,!1)}else ca.bindFramebuffer(36160,uu.__webglFramebuffer),uu.__webglDepthbuffer=ca.createRenderbuffer(),vu(uu.__webglDepthbuffer,nu,!1);ca.bindFramebuffer(36160,null)}function Su(nu){var uu=Ss.get(nu),Pu=Ss.get(nu.texture);nu.addEventListener("dispose",Qs),Pu.__webglTexture=ca.createTexture(),Ts.memory.textures++;var Iu=nu.isWebGLCubeRenderTarget===!0,Ku=nu.isWebGLMultisampleRenderTarget===!0,Fu=Os(nu)||Bs;if(Bs&&nu.texture.format===RGBFormat&&(nu.texture.type===FloatType||nu.texture.type===HalfFloatType)&&(nu.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Iu){uu.__webglFramebuffer=[];for(var Ru=0;Ru<6;Ru++)uu.__webglFramebuffer[Ru]=ca.createFramebuffer()}else if(uu.__webglFramebuffer=ca.createFramebuffer(),Ku)if(Bs){uu.__webglMultisampledFramebuffer=ca.createFramebuffer(),uu.__webglColorRenderbuffer=ca.createRenderbuffer(),ca.bindRenderbuffer(36161,uu.__webglColorRenderbuffer);var il=Cs.convert(nu.texture.format),Ju=Cs.convert(nu.texture.type),Xu=zs(nu.texture.internalFormat,il,Ju),Ou=Au(nu);ca.renderbufferStorageMultisample(36161,Ou,Xu,nu.width,nu.height),ca.bindFramebuffer(36160,uu.__webglMultisampledFramebuffer),ca.framebufferRenderbuffer(36160,36064,36161,uu.__webglColorRenderbuffer),ca.bindRenderbuffer(36161,null),nu.depthBuffer&&(uu.__webglDepthRenderbuffer=ca.createRenderbuffer(),vu(uu.__webglDepthRenderbuffer,nu,!0)),ca.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Iu){_s.bindTexture(34067,Pu.__webglTexture),hu(34067,nu.texture,Fu);for(var Ru=0;Ru<6;Ru++)du(uu.__webglFramebuffer[Ru],nu,36064,34069+Ru);Us(nu.texture,Fu)&&Hs(34067,nu.texture,nu.width,nu.height),_s.bindTexture(34067,null)}else _s.bindTexture(3553,Pu.__webglTexture),hu(3553,nu.texture,Fu),du(uu.__webglFramebuffer,nu,36064,3553),Us(nu.texture,Fu)&&Hs(3553,nu.texture,nu.width,nu.height),_s.bindTexture(3553,null);nu.depthBuffer&&yu(nu)}function Tu(nu){var uu=nu.texture,Pu=Os(nu)||Bs;if(Us(uu,Pu)){var Iu=nu.isWebGLCubeRenderTarget?34067:3553,Ku=Ss.get(uu).__webglTexture;_s.bindTexture(Iu,Ku),Hs(Iu,uu,nu.width,nu.height),_s.bindTexture(Iu,null)}}function bu(nu){if(nu.isWebGLMultisampleRenderTarget)if(Bs){var uu=Ss.get(nu);ca.bindFramebuffer(36008,uu.__webglMultisampledFramebuffer),ca.bindFramebuffer(36009,uu.__webglFramebuffer);var Pu=nu.width,Iu=nu.height,Ku=16384;nu.depthBuffer&&(Ku|=256),nu.stencilBuffer&&(Ku|=1024),ca.blitFramebuffer(0,0,Pu,Iu,0,0,Pu,Iu,Ku,9728),ca.bindFramebuffer(36160,uu.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Au(nu){return Bs&&nu.isWebGLMultisampleRenderTarget?Math.min(Ds,nu.samples):0}function Bu(nu){var uu=Ts.render.frame;$s.get(nu)!==uu&&($s.set(nu,uu),nu.update())}var Lu=!1,Qu=!1;function Nu(nu,uu){nu&&nu.isWebGLRenderTarget&&(Lu===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Lu=!0),nu=nu.texture),eu(nu,uu)}function ju(nu,uu){nu&&nu.isWebGLCubeRenderTarget&&(Qu===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Qu=!0),nu=nu.texture),nu&&nu.isCubeTexture||Array.isArray(nu.image)&&nu.image.length===6?ru(nu,uu):su(nu,uu)}this.allocateTextureUnit=Js,this.resetTextureUnits=Ks,this.setTexture2D=eu,this.setTexture2DArray=Zs,this.setTexture3D=au,this.setTextureCube=ru,this.setTextureCubeDynamic=su,this.setupRenderTarget=Su,this.updateRenderTargetMipmap=Tu,this.updateMultisampleRenderTarget=bu,this.safeSetTexture2D=Nu,this.safeSetTextureCube=ju}function WebGLUtils(ca,ga,_s){var Ss=_s.isWebGL2;function Ms(Cs){var Ts;if(Cs===UnsignedByteType)return 5121;if(Cs===UnsignedShort4444Type)return 32819;if(Cs===UnsignedShort5551Type)return 32820;if(Cs===UnsignedShort565Type)return 33635;if(Cs===ByteType)return 5120;if(Cs===ShortType)return 5122;if(Cs===UnsignedShortType)return 5123;if(Cs===IntType)return 5124;if(Cs===UnsignedIntType)return 5125;if(Cs===FloatType)return 5126;if(Cs===HalfFloatType)return Ss?5131:(Ts=ga.get("OES_texture_half_float"),Ts!==null?Ts.HALF_FLOAT_OES:null);if(Cs===AlphaFormat)return 6406;if(Cs===RGBFormat)return 6407;if(Cs===RGBAFormat)return 6408;if(Cs===LuminanceFormat)return 6409;if(Cs===LuminanceAlphaFormat)return 6410;if(Cs===DepthFormat)return 6402;if(Cs===DepthStencilFormat)return 34041;if(Cs===RedFormat)return 6403;if(Cs===RedIntegerFormat)return 36244;if(Cs===RGFormat)return 33319;if(Cs===RGIntegerFormat)return 33320;if(Cs===RGBIntegerFormat)return 36248;if(Cs===RGBAIntegerFormat)return 36249;if(Cs===RGB_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT1_Format||Cs===RGBA_S3TC_DXT3_Format||Cs===RGBA_S3TC_DXT5_Format)if(Ts=ga.get("WEBGL_compressed_texture_s3tc"),Ts!==null){if(Cs===RGB_S3TC_DXT1_Format)return Ts.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT1_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Cs===RGBA_S3TC_DXT3_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Cs===RGBA_S3TC_DXT5_Format)return Ts.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Cs===RGB_PVRTC_4BPPV1_Format||Cs===RGB_PVRTC_2BPPV1_Format||Cs===RGBA_PVRTC_4BPPV1_Format||Cs===RGBA_PVRTC_2BPPV1_Format)if(Ts=ga.get("WEBGL_compressed_texture_pvrtc"),Ts!==null){if(Cs===RGB_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Cs===RGB_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Cs===RGBA_PVRTC_4BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Cs===RGBA_PVRTC_2BPPV1_Format)return Ts.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Cs===RGB_ETC1_Format)return Ts=ga.get("WEBGL_compressed_texture_etc1"),Ts!==null?Ts.COMPRESSED_RGB_ETC1_WEBGL:null;if((Cs===RGB_ETC2_Format||Cs===RGBA_ETC2_EAC_Format)&&(Ts=ga.get("WEBGL_compressed_texture_etc"),Ts!==null)){if(Cs===RGB_ETC2_Format)return Ts.COMPRESSED_RGB8_ETC2;if(Cs===RGBA_ETC2_EAC_Format)return Ts.COMPRESSED_RGBA8_ETC2_EAC}if(Cs===RGBA_ASTC_4x4_Format||Cs===RGBA_ASTC_5x4_Format||Cs===RGBA_ASTC_5x5_Format||Cs===RGBA_ASTC_6x5_Format||Cs===RGBA_ASTC_6x6_Format||Cs===RGBA_ASTC_8x5_Format||Cs===RGBA_ASTC_8x6_Format||Cs===RGBA_ASTC_8x8_Format||Cs===RGBA_ASTC_10x5_Format||Cs===RGBA_ASTC_10x6_Format||Cs===RGBA_ASTC_10x8_Format||Cs===RGBA_ASTC_10x10_Format||Cs===RGBA_ASTC_12x10_Format||Cs===RGBA_ASTC_12x12_Format||Cs===SRGB8_ALPHA8_ASTC_4x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x4_Format||Cs===SRGB8_ALPHA8_ASTC_5x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x5_Format||Cs===SRGB8_ALPHA8_ASTC_6x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x5_Format||Cs===SRGB8_ALPHA8_ASTC_8x6_Format||Cs===SRGB8_ALPHA8_ASTC_8x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x5_Format||Cs===SRGB8_ALPHA8_ASTC_10x6_Format||Cs===SRGB8_ALPHA8_ASTC_10x8_Format||Cs===SRGB8_ALPHA8_ASTC_10x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x10_Format||Cs===SRGB8_ALPHA8_ASTC_12x12_Format)return Ts=ga.get("WEBGL_compressed_texture_astc"),Ts!==null?Cs:null;if(Cs===RGBA_BPTC_Format)return Ts=ga.get("EXT_texture_compression_bptc"),Ts!==null?Cs:null;if(Cs===UnsignedInt248Type)return Ss?34042:(Ts=ga.get("WEBGL_depth_texture"),Ts!==null?Ts.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Ms}}function ArrayCamera(ca){PerspectiveCamera.call(this),this.cameras=ca||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(ca){return this._targetRay!==null&&this._targetRay.dispatchEvent(ca),this._grip!==null&&this._grip.dispatchEvent(ca),this},disconnect:function(ca){return this.dispatchEvent({type:"disconnected",data:ca}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(ca,ga,_s){var Ss=null,Ms=null,Cs=this._targetRay,Ts=this._grip;return ca&&(Cs!==null&&(Ss=ga.getPose(ca.targetRaySpace,_s),Ss!==null&&(Cs.matrix.fromArray(Ss.transform.matrix),Cs.matrix.decompose(Cs.position,Cs.rotation,Cs.scale))),Ts!==null&&ca.gripSpace&&(Ms=ga.getPose(ca.gripSpace,_s),Ms!==null&&(Ts.matrix.fromArray(Ms.transform.matrix),Ts.matrix.decompose(Ts.position,Ts.rotation,Ts.scale)))),Cs!==null&&(Cs.visible=Ss!==null),Ts!==null&&(Ts.visible=Ms!==null),this}});function WebXRManager(ca,ga){var _s=this,Ss=null,Ms=1,Cs=null,Ts="local-floor",Bs=null,Ps=[],Ls=new Map,Rs=new PerspectiveCamera;Rs.layers.enable(1),Rs.viewport=new Vector4;var Ds=new PerspectiveCamera;Ds.layers.enable(2),Ds.viewport=new Vector4;var $s=[Rs,Ds],Fs=new ArrayCamera;Fs.layers.enable(1),Fs.layers.enable(2);var Gs=null,Vs=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Ys){var Ks=Ps[Ys];return Ks===void 0&&(Ks=new WebXRController,Ps[Ys]=Ks),Ks.getTargetRaySpace()},this.getControllerGrip=function(Ys){var Ks=Ps[Ys];return Ks===void 0&&(Ks=new WebXRController,Ps[Ys]=Ks),Ks.getGripSpace()};function ks(Ys){var Ks=Ls.get(Ys.inputSource);Ks&&Ks.dispatchEvent({type:Ys.type})}function Os(){Ls.forEach(function(Ys,Ks){Ys.disconnect(Ks)}),Ls.clear(),ca.setFramebuffer(null),ca.setRenderTarget(ca.getRenderTarget()),tu.stop(),_s.isPresenting=!1,_s.dispatchEvent({type:"sessionend"})}function Ns(Ys){Cs=Ys,tu.setContext(Ss),tu.start(),_s.isPresenting=!0,_s.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Ys){Ms=Ys,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ys){Ts=Ys,_s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Cs},this.getSession=function(){return Ss},this.setSession=function(Ys){if(Ss=Ys,Ss!==null){Ss.addEventListener("select",ks),Ss.addEventListener("selectstart",ks),Ss.addEventListener("selectend",ks),Ss.addEventListener("squeeze",ks),Ss.addEventListener("squeezestart",ks),Ss.addEventListener("squeezeend",ks),Ss.addEventListener("end",Os);var Ks=ga.getContextAttributes();Ks.xrCompatible!==!0&&ga.makeXRCompatible();var Js={antialias:Ks.antialias,alpha:Ks.alpha,depth:Ks.depth,stencil:Ks.stencil,framebufferScaleFactor:Ms},eu=new XRWebGLLayer(Ss,ga,Js);Ss.updateRenderState({baseLayer:eu}),Ss.requestReferenceSpace(Ts).then(Ns),Ss.addEventListener("inputsourceschange",Us)}};function Us(Ys){for(var Ks=Ss.inputSources,Js=0;Js<Ps.length;Js++)Ls.set(Ks[Js],Ps[Js]);for(var Js=0;Js<Ys.removed.length;Js++){var eu=Ys.removed[Js],Zs=Ls.get(eu);Zs&&(Zs.dispatchEvent({type:"disconnected",data:eu}),Ls.delete(eu))}for(var Js=0;Js<Ys.added.length;Js++){var eu=Ys.added[Js],Zs=Ls.get(eu);Zs&&Zs.dispatchEvent({type:"connected",data:eu})}}var Hs=new Vector3,zs=new Vector3;function js(Ys,Ks,Js){Hs.setFromMatrixPosition(Ks.matrixWorld),zs.setFromMatrixPosition(Js.matrixWorld);var eu=Hs.distanceTo(zs),Zs=Ks.projectionMatrix.elements,au=Js.projectionMatrix.elements,ru=Zs[14]/(Zs[10]-1),su=Zs[14]/(Zs[10]+1),lu=(Zs[9]+1)/Zs[5],gu=(Zs[9]-1)/Zs[5],hu=(Zs[8]-1)/Zs[0],wu=(au[8]+1)/au[0],Mu=ru*hu,du=ru*wu,vu=eu/(-hu+wu),pu=vu*-hu;Ks.matrixWorld.decompose(Ys.position,Ys.quaternion,Ys.scale),Ys.translateX(pu),Ys.translateZ(vu),Ys.matrixWorld.compose(Ys.position,Ys.quaternion,Ys.scale),Ys.matrixWorldInverse.getInverse(Ys.matrixWorld);var yu=ru+vu,Su=su+vu,Tu=Mu-pu,bu=du+(eu-pu),Au=lu*su/Su*yu,Bu=gu*su/Su*yu;Ys.projectionMatrix.makePerspective(Tu,bu,Au,Bu,yu,Su)}function Ws(Ys,Ks){Ks===null?Ys.matrixWorld.copy(Ys.matrix):Ys.matrixWorld.multiplyMatrices(Ks.matrixWorld,Ys.matrix),Ys.matrixWorldInverse.getInverse(Ys.matrixWorld)}this.getCamera=function(Ys){Fs.near=Ds.near=Rs.near=Ys.near,Fs.far=Ds.far=Rs.far=Ys.far,(Gs!==Fs.near||Vs!==Fs.far)&&(Ss.updateRenderState({depthNear:Fs.near,depthFar:Fs.far}),Gs=Fs.near,Vs=Fs.far);var Ks=Ys.parent,Js=Fs.cameras;Ws(Fs,Ks);for(var eu=0;eu<Js.length;eu++)Ws(Js[eu],Ks);Ys.matrixWorld.copy(Fs.matrixWorld);for(var Zs=Ys.children,eu=0,au=Zs.length;eu<au;eu++)Zs[eu].updateMatrixWorld(!0);return Js.length===2?js(Fs,Rs,Ds):Fs.projectionMatrix.copy(Rs.projectionMatrix),Fs};var Qs=null;function qs(Ys,Ks){if(Bs=Ks.getViewerPose(Cs),Bs!==null){var Js=Bs.views,eu=Ss.renderState.baseLayer;ca.setFramebuffer(eu.framebuffer);var Zs=!1;Js.length!==Fs.cameras.length&&(Fs.cameras.length=0,Zs=!0);for(var au=0;au<Js.length;au++){var ru=Js[au],su=eu.getViewport(ru),lu=$s[au];lu.matrix.fromArray(ru.transform.matrix),lu.projectionMatrix.fromArray(ru.projectionMatrix),lu.viewport.set(su.x,su.y,su.width,su.height),au===0&&Fs.matrix.copy(lu.matrix),Zs===!0&&Fs.cameras.push(lu)}}for(var gu=Ss.inputSources,au=0;au<Ps.length;au++){var hu=Ps[au],wu=gu[au];hu.update(wu,Ks,Cs)}Qs&&Qs(Ys,Ks)}var tu=new WebGLAnimation;tu.setAnimationLoop(qs),this.setAnimationLoop=function(Ys){Qs=Ys},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(ca){function ga(Os,Ns){Os.fogColor.value.copy(Ns.color),Ns.isFog?(Os.fogNear.value=Ns.near,Os.fogFar.value=Ns.far):Ns.isFogExp2&&(Os.fogDensity.value=Ns.density)}function _s(Os,Ns,Us,Hs,zs){Ns.isMeshBasicMaterial?Ss(Os,Ns):Ns.isMeshLambertMaterial?(Ss(Os,Ns),Ps(Os,Ns)):Ns.isMeshToonMaterial?(Ss(Os,Ns),Rs(Os,Ns)):Ns.isMeshPhongMaterial?(Ss(Os,Ns),Ls(Os,Ns)):Ns.isMeshStandardMaterial?(Ss(Os,Ns,Us),Ns.isMeshPhysicalMaterial?$s(Os,Ns,Us):Ds(Os,Ns,Us)):Ns.isMeshMatcapMaterial?(Ss(Os,Ns),Fs(Os,Ns)):Ns.isMeshDepthMaterial?(Ss(Os,Ns),Gs(Os,Ns)):Ns.isMeshDistanceMaterial?(Ss(Os,Ns),Vs(Os,Ns)):Ns.isMeshNormalMaterial?(Ss(Os,Ns),ks(Os,Ns)):Ns.isLineBasicMaterial?(Ms(Os,Ns),Ns.isLineDashedMaterial&&Cs(Os,Ns)):Ns.isPointsMaterial?Ts(Os,Ns,Hs,zs):Ns.isSpriteMaterial?Bs(Os,Ns):Ns.isShadowMaterial?(Os.color.value.copy(Ns.color),Os.opacity.value=Ns.opacity):Ns.isShaderMaterial&&(Ns.uniformsNeedUpdate=!1)}function Ss(Os,Ns,Us){Os.opacity.value=Ns.opacity,Ns.color&&Os.diffuse.value.copy(Ns.color),Ns.emissive&&Os.emissive.value.copy(Ns.emissive).multiplyScalar(Ns.emissiveIntensity),Ns.map&&(Os.map.value=Ns.map),Ns.alphaMap&&(Os.alphaMap.value=Ns.alphaMap),Ns.specularMap&&(Os.specularMap.value=Ns.specularMap);var Hs=Ns.envMap||Us;Hs&&(Os.envMap.value=Hs,Os.flipEnvMap.value=Hs.isCubeTexture?-1:1,Os.reflectivity.value=Ns.reflectivity,Os.refractionRatio.value=Ns.refractionRatio,Os.maxMipLevel.value=ca.get(Hs).__maxMipLevel),Ns.lightMap&&(Os.lightMap.value=Ns.lightMap,Os.lightMapIntensity.value=Ns.lightMapIntensity),Ns.aoMap&&(Os.aoMap.value=Ns.aoMap,Os.aoMapIntensity.value=Ns.aoMapIntensity);var zs;Ns.map?zs=Ns.map:Ns.specularMap?zs=Ns.specularMap:Ns.displacementMap?zs=Ns.displacementMap:Ns.normalMap?zs=Ns.normalMap:Ns.bumpMap?zs=Ns.bumpMap:Ns.roughnessMap?zs=Ns.roughnessMap:Ns.metalnessMap?zs=Ns.metalnessMap:Ns.alphaMap?zs=Ns.alphaMap:Ns.emissiveMap&&(zs=Ns.emissiveMap),zs!==void 0&&(zs.isWebGLRenderTarget&&(zs=zs.texture),zs.matrixAutoUpdate===!0&&zs.updateMatrix(),Os.uvTransform.value.copy(zs.matrix));var js;Ns.aoMap?js=Ns.aoMap:Ns.lightMap&&(js=Ns.lightMap),js!==void 0&&(js.isWebGLRenderTarget&&(js=js.texture),js.matrixAutoUpdate===!0&&js.updateMatrix(),Os.uv2Transform.value.copy(js.matrix))}function Ms(Os,Ns){Os.diffuse.value.copy(Ns.color),Os.opacity.value=Ns.opacity}function Cs(Os,Ns){Os.dashSize.value=Ns.dashSize,Os.totalSize.value=Ns.dashSize+Ns.gapSize,Os.scale.value=Ns.scale}function Ts(Os,Ns,Us,Hs){Os.diffuse.value.copy(Ns.color),Os.opacity.value=Ns.opacity,Os.size.value=Ns.size*Us,Os.scale.value=Hs*.5,Ns.map&&(Os.map.value=Ns.map),Ns.alphaMap&&(Os.alphaMap.value=Ns.alphaMap);var zs;Ns.map?zs=Ns.map:Ns.alphaMap&&(zs=Ns.alphaMap),zs!==void 0&&(zs.matrixAutoUpdate===!0&&zs.updateMatrix(),Os.uvTransform.value.copy(zs.matrix))}function Bs(Os,Ns){Os.diffuse.value.copy(Ns.color),Os.opacity.value=Ns.opacity,Os.rotation.value=Ns.rotation,Ns.map&&(Os.map.value=Ns.map),Ns.alphaMap&&(Os.alphaMap.value=Ns.alphaMap);var Us;Ns.map?Us=Ns.map:Ns.alphaMap&&(Us=Ns.alphaMap),Us!==void 0&&(Us.matrixAutoUpdate===!0&&Us.updateMatrix(),Os.uvTransform.value.copy(Us.matrix))}function Ps(Os,Ns){Ns.emissiveMap&&(Os.emissiveMap.value=Ns.emissiveMap)}function Ls(Os,Ns){Os.specular.value.copy(Ns.specular),Os.shininess.value=Math.max(Ns.shininess,1e-4),Ns.emissiveMap&&(Os.emissiveMap.value=Ns.emissiveMap),Ns.bumpMap&&(Os.bumpMap.value=Ns.bumpMap,Os.bumpScale.value=Ns.bumpScale,Ns.side===BackSide&&(Os.bumpScale.value*=-1)),Ns.normalMap&&(Os.normalMap.value=Ns.normalMap,Os.normalScale.value.copy(Ns.normalScale),Ns.side===BackSide&&Os.normalScale.value.negate()),Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias)}function Rs(Os,Ns){Os.specular.value.copy(Ns.specular),Os.shininess.value=Math.max(Ns.shininess,1e-4),Ns.gradientMap&&(Os.gradientMap.value=Ns.gradientMap),Ns.emissiveMap&&(Os.emissiveMap.value=Ns.emissiveMap),Ns.bumpMap&&(Os.bumpMap.value=Ns.bumpMap,Os.bumpScale.value=Ns.bumpScale,Ns.side===BackSide&&(Os.bumpScale.value*=-1)),Ns.normalMap&&(Os.normalMap.value=Ns.normalMap,Os.normalScale.value.copy(Ns.normalScale),Ns.side===BackSide&&Os.normalScale.value.negate()),Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias)}function Ds(Os,Ns,Us){Os.roughness.value=Ns.roughness,Os.metalness.value=Ns.metalness,Ns.roughnessMap&&(Os.roughnessMap.value=Ns.roughnessMap),Ns.metalnessMap&&(Os.metalnessMap.value=Ns.metalnessMap),Ns.emissiveMap&&(Os.emissiveMap.value=Ns.emissiveMap),Ns.bumpMap&&(Os.bumpMap.value=Ns.bumpMap,Os.bumpScale.value=Ns.bumpScale,Ns.side===BackSide&&(Os.bumpScale.value*=-1)),Ns.normalMap&&(Os.normalMap.value=Ns.normalMap,Os.normalScale.value.copy(Ns.normalScale),Ns.side===BackSide&&Os.normalScale.value.negate()),Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias),(Ns.envMap||Us)&&(Os.envMapIntensity.value=Ns.envMapIntensity)}function $s(Os,Ns,Us){Ds(Os,Ns,Us),Os.reflectivity.value=Ns.reflectivity,Os.clearcoat.value=Ns.clearcoat,Os.clearcoatRoughness.value=Ns.clearcoatRoughness,Ns.sheen&&Os.sheen.value.copy(Ns.sheen),Ns.clearcoatMap&&(Os.clearcoatMap.value=Ns.clearcoatMap),Ns.clearcoatRoughnessMap&&(Os.clearcoatRoughnessMap.value=Ns.clearcoatRoughnessMap),Ns.clearcoatNormalMap&&(Os.clearcoatNormalScale.value.copy(Ns.clearcoatNormalScale),Os.clearcoatNormalMap.value=Ns.clearcoatNormalMap,Ns.side===BackSide&&Os.clearcoatNormalScale.value.negate()),Os.transparency.value=Ns.transparency}function Fs(Os,Ns){Ns.matcap&&(Os.matcap.value=Ns.matcap),Ns.bumpMap&&(Os.bumpMap.value=Ns.bumpMap,Os.bumpScale.value=Ns.bumpScale,Ns.side===BackSide&&(Os.bumpScale.value*=-1)),Ns.normalMap&&(Os.normalMap.value=Ns.normalMap,Os.normalScale.value.copy(Ns.normalScale),Ns.side===BackSide&&Os.normalScale.value.negate()),Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias)}function Gs(Os,Ns){Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias)}function Vs(Os,Ns){Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias),Os.referencePosition.value.copy(Ns.referencePosition),Os.nearDistance.value=Ns.nearDistance,Os.farDistance.value=Ns.farDistance}function ks(Os,Ns){Ns.bumpMap&&(Os.bumpMap.value=Ns.bumpMap,Os.bumpScale.value=Ns.bumpScale,Ns.side===BackSide&&(Os.bumpScale.value*=-1)),Ns.normalMap&&(Os.normalMap.value=Ns.normalMap,Os.normalScale.value.copy(Ns.normalScale),Ns.side===BackSide&&Os.normalScale.value.negate()),Ns.displacementMap&&(Os.displacementMap.value=Ns.displacementMap,Os.displacementScale.value=Ns.displacementScale,Os.displacementBias.value=Ns.displacementBias)}return{refreshFogUniforms:ga,refreshMaterialUniforms:_s}}function WebGLRenderer(ca){ca=ca||{};var ga=ca.canvas!==void 0?ca.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),_s=ca.context!==void 0?ca.context:null,Ss=ca.alpha!==void 0?ca.alpha:!1,Ms=ca.depth!==void 0?ca.depth:!0,Cs=ca.stencil!==void 0?ca.stencil:!0,Ts=ca.antialias!==void 0?ca.antialias:!1,Bs=ca.premultipliedAlpha!==void 0?ca.premultipliedAlpha:!0,Ps=ca.preserveDrawingBuffer!==void 0?ca.preserveDrawingBuffer:!1,Ls=ca.powerPreference!==void 0?ca.powerPreference:"default",Rs=ca.failIfMajorPerformanceCaveat!==void 0?ca.failIfMajorPerformanceCaveat:!1,Ds=null,$s=null;this.domElement=ga,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Fs=this,Gs=!1,Vs=null,ks=0,Os=0,Ns=null,Us=null,Hs=-1,zs={geometry:null,program:null,wireframe:!1},js=null,Ws=null,Qs=new Vector4,qs=new Vector4,tu=null,Ys=ga.width,Ks=ga.height,Js=1,eu=null,Zs=null,au=new Vector4(0,0,Ys,Ks),ru=new Vector4(0,0,Ys,Ks),su=!1,lu=new Frustum,gu=new WebGLClipping,hu=!1,wu=!1,Mu=new Matrix4,du=new Vector3;function vu(){return Ns===null?Js:1}var pu;try{var yu={alpha:Ss,depth:Ms,stencil:Cs,antialias:Ts,premultipliedAlpha:Bs,preserveDrawingBuffer:Ps,powerPreference:Ls,failIfMajorPerformanceCaveat:Rs};if(ga.addEventListener("webglcontextlost",$u,!1),ga.addEventListener("webglcontextrestored",Hu,!1),pu=_s||ga.getContext("webgl",yu)||ga.getContext("experimental-webgl",yu),pu===null)throw ga.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");pu.getShaderPrecisionFormat===void 0&&(pu.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(iu){throw console.error("THREE.WebGLRenderer: "+iu.message),iu}var Su,Tu,bu,Au,Bu,Lu,Qu,Nu,ju,nu,uu,Pu,Iu,Ku,Fu,Ru,il,Ju;function Xu(){Su=new WebGLExtensions(pu),Tu=new WebGLCapabilities(pu,Su,ca),Tu.isWebGL2===!1&&(Su.get("WEBGL_depth_texture"),Su.get("OES_texture_float"),Su.get("OES_texture_half_float"),Su.get("OES_texture_half_float_linear"),Su.get("OES_standard_derivatives"),Su.get("OES_element_index_uint"),Su.get("ANGLE_instanced_arrays")),Su.get("OES_texture_float_linear"),Ju=new WebGLUtils(pu,Su,Tu),bu=new WebGLState(pu,Su,Tu),bu.scissor(qs.copy(ru).multiplyScalar(Js).floor()),bu.viewport(Qs.copy(au).multiplyScalar(Js).floor()),Au=new WebGLInfo(pu),Bu=new WebGLProperties,Lu=new WebGLTextures(pu,Su,bu,Bu,Tu,Ju,Au),Qu=new WebGLAttributes(pu,Tu),Nu=new WebGLGeometries(pu,Qu,Au),ju=new WebGLObjects(pu,Nu,Qu,Au),Fu=new WebGLMorphtargets(pu),nu=new WebGLPrograms(Fs,Su,Tu),uu=new WebGLMaterials(Bu),Pu=new WebGLRenderLists,Iu=new WebGLRenderStates,Ku=new WebGLBackground(Fs,bu,ju,Bs),Ru=new WebGLBufferRenderer(pu,Su,Au,Tu),il=new WebGLIndexedBufferRenderer(pu,Su,Au,Tu),Au.programs=nu.programs,Fs.capabilities=Tu,Fs.extensions=Su,Fs.properties=Bu,Fs.renderLists=Pu,Fs.state=bu,Fs.info=Au}Xu();var Ou=new WebXRManager(Fs,pu);this.xr=Ou;var Uu=new WebGLShadowMap(Fs,ju,Tu.maxTextureSize);this.shadowMap=Uu,this.getContext=function(){return pu},this.getContextAttributes=function(){return pu.getContextAttributes()},this.forceContextLoss=function(){var iu=Su.get("WEBGL_lose_context");iu&&iu.loseContext()},this.forceContextRestore=function(){var iu=Su.get("WEBGL_lose_context");iu&&iu.restoreContext()},this.getPixelRatio=function(){return Js},this.setPixelRatio=function(iu){iu!==void 0&&(Js=iu,this.setSize(Ys,Ks,!1))},this.getSize=function(iu){return iu===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),iu=new Vector2),iu.set(Ys,Ks)},this.setSize=function(iu,_u,xu){if(Ou.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ys=iu,Ks=_u,ga.width=Math.floor(iu*Js),ga.height=Math.floor(_u*Js),xu!==!1&&(ga.style.width=iu+"px",ga.style.height=_u+"px"),this.setViewport(0,0,iu,_u)},this.getDrawingBufferSize=function(iu){return iu===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),iu=new Vector2),iu.set(Ys*Js,Ks*Js).floor()},this.setDrawingBufferSize=function(iu,_u,xu){Ys=iu,Ks=_u,Js=xu,ga.width=Math.floor(iu*xu),ga.height=Math.floor(_u*xu),this.setViewport(0,0,iu,_u)},this.getCurrentViewport=function(iu){return iu===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),iu=new Vector4),iu.copy(Qs)},this.getViewport=function(iu){return iu.copy(au)},this.setViewport=function(iu,_u,xu,Eu){iu.isVector4?au.set(iu.x,iu.y,iu.z,iu.w):au.set(iu,_u,xu,Eu),bu.viewport(Qs.copy(au).multiplyScalar(Js).floor())},this.getScissor=function(iu){return iu.copy(ru)},this.setScissor=function(iu,_u,xu,Eu){iu.isVector4?ru.set(iu.x,iu.y,iu.z,iu.w):ru.set(iu,_u,xu,Eu),bu.scissor(qs.copy(ru).multiplyScalar(Js).floor())},this.getScissorTest=function(){return su},this.setScissorTest=function(iu){bu.setScissorTest(su=iu)},this.setOpaqueSort=function(iu){eu=iu},this.setTransparentSort=function(iu){Zs=iu},this.getClearColor=function(){return Ku.getClearColor()},this.setClearColor=function(){Ku.setClearColor.apply(Ku,arguments)},this.getClearAlpha=function(){return Ku.getClearAlpha()},this.setClearAlpha=function(){Ku.setClearAlpha.apply(Ku,arguments)},this.clear=function(iu,_u,xu){var Eu=0;(iu===void 0||iu)&&(Eu|=16384),(_u===void 0||_u)&&(Eu|=256),(xu===void 0||xu)&&(Eu|=1024),pu.clear(Eu)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ga.removeEventListener("webglcontextlost",$u,!1),ga.removeEventListener("webglcontextrestored",Hu,!1),Pu.dispose(),Iu.dispose(),Bu.dispose(),ju.dispose(),Ou.dispose(),ml.stop()};function $u(iu){iu.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Gs=!0}function Hu(){console.log("THREE.WebGLRenderer: Context Restored."),Gs=!1,Xu()}function fu(iu){var _u=iu.target;_u.removeEventListener("dispose",fu),ku(_u)}function ku(iu){Vu(iu),Bu.remove(iu)}function Vu(iu){var _u=Bu.get(iu).program;iu.program=void 0,_u!==void 0&&nu.releaseProgram(_u)}function nl(iu,_u){iu.render(function(xu){Fs.renderBufferImmediate(xu,_u)})}this.renderBufferImmediate=function(iu,_u){bu.initAttributes();var xu=Bu.get(iu);iu.hasPositions&&!xu.position&&(xu.position=pu.createBuffer()),iu.hasNormals&&!xu.normal&&(xu.normal=pu.createBuffer()),iu.hasUvs&&!xu.uv&&(xu.uv=pu.createBuffer()),iu.hasColors&&!xu.color&&(xu.color=pu.createBuffer());var Eu=_u.getAttributes();iu.hasPositions&&(pu.bindBuffer(34962,xu.position),pu.bufferData(34962,iu.positionArray,35048),bu.enableAttribute(Eu.position),pu.vertexAttribPointer(Eu.position,3,5126,!1,0,0)),iu.hasNormals&&(pu.bindBuffer(34962,xu.normal),pu.bufferData(34962,iu.normalArray,35048),bu.enableAttribute(Eu.normal),pu.vertexAttribPointer(Eu.normal,3,5126,!1,0,0)),iu.hasUvs&&(pu.bindBuffer(34962,xu.uv),pu.bufferData(34962,iu.uvArray,35048),bu.enableAttribute(Eu.uv),pu.vertexAttribPointer(Eu.uv,2,5126,!1,0,0)),iu.hasColors&&(pu.bindBuffer(34962,xu.color),pu.bufferData(34962,iu.colorArray,35048),bu.enableAttribute(Eu.color),pu.vertexAttribPointer(Eu.color,3,5126,!1,0,0)),bu.disableUnusedAttributes(),pu.drawArrays(4,0,iu.count),iu.count=0};var Gu=new Scene;this.renderBufferDirect=function(iu,_u,xu,Eu,Du,el){_u===null&&(_u=Gu);var Zu=Du.isMesh&&Du.matrixWorld.determinant()<0,zu=gl(iu,_u,Eu,Du);bu.setMaterial(Eu,Zu);var Yu=!1;(zs.geometry!==xu.id||zs.program!==zu.id||zs.wireframe!==(Eu.wireframe===!0))&&(zs.geometry=xu.id,zs.program=zu.id,zs.wireframe=Eu.wireframe===!0,Yu=!0),(Eu.morphTargets||Eu.morphNormals)&&(Fu.update(Du,xu,Eu,zu),Yu=!0),Du.isInstancedMesh===!0&&(Yu=!0);var rl=xu.index,ll=xu.attributes.position;if(rl===null){if(ll===void 0||ll.count===0)return}else if(rl.count===0)return;var Xs=1;Eu.wireframe===!0&&(rl=Nu.getWireframeAttribute(xu),Xs=2);var ou,cu=Ru;rl!==null&&(ou=Qu.get(rl),cu=il,cu.setIndex(ou)),Yu&&(ol(Du,xu,Eu,zu),rl!==null&&pu.bindBuffer(34963,ou.buffer));var mu=rl!==null?rl.count:ll.count,Cu=xu.drawRange.start*Xs,qu=xu.drawRange.count*Xs,tl=el!==null?el.start*Xs:0,cl=el!==null?el.count*Xs:1/0,Wu=Math.max(Cu,tl),hl=Math.min(mu,Cu+qu,tl+cl)-1,Al=Math.max(0,hl-Wu+1);if(Al!==0){if(Du.isMesh)Eu.wireframe===!0?(bu.setLineWidth(Eu.wireframeLinewidth*vu()),cu.setMode(1)):cu.setMode(4);else if(Du.isLine){var Cl=Eu.linewidth;Cl===void 0&&(Cl=1),bu.setLineWidth(Cl*vu()),Du.isLineSegments?cu.setMode(1):Du.isLineLoop?cu.setMode(2):cu.setMode(3)}else Du.isPoints?cu.setMode(0):Du.isSprite&&cu.setMode(4);if(Du.isInstancedMesh)cu.renderInstances(xu,Wu,Al,Du.count);else if(xu.isInstancedBufferGeometry){var Pl=Math.min(xu.instanceCount,xu._maxInstanceCount);cu.renderInstances(xu,Wu,Al,Pl)}else cu.render(Wu,Al)}};function ol(iu,_u,xu,Eu){if(!(Tu.isWebGL2===!1&&(iu.isInstancedMesh||_u.isInstancedBufferGeometry)&&Su.get("ANGLE_instanced_arrays")===null)){bu.initAttributes();var Du=_u.attributes,el=Eu.getAttributes(),Zu=xu.defaultAttributeValues;for(var zu in el){var Yu=el[zu];if(Yu>=0){var rl=Du[zu];if(rl!==void 0){var ll=rl.normalized,Xs=rl.itemSize,ou=Qu.get(rl);if(ou===void 0)continue;var cu=ou.buffer,mu=ou.type,Cu=ou.bytesPerElement;if(rl.isInterleavedBufferAttribute){var qu=rl.data,tl=qu.stride,cl=rl.offset;qu&&qu.isInstancedInterleavedBuffer?(bu.enableAttributeAndDivisor(Yu,qu.meshPerAttribute),_u._maxInstanceCount===void 0&&(_u._maxInstanceCount=qu.meshPerAttribute*qu.count)):bu.enableAttribute(Yu),pu.bindBuffer(34962,cu),bu.vertexAttribPointer(Yu,Xs,mu,ll,tl*Cu,cl*Cu)}else rl.isInstancedBufferAttribute?(bu.enableAttributeAndDivisor(Yu,rl.meshPerAttribute),_u._maxInstanceCount===void 0&&(_u._maxInstanceCount=rl.meshPerAttribute*rl.count)):bu.enableAttribute(Yu),pu.bindBuffer(34962,cu),bu.vertexAttribPointer(Yu,Xs,mu,ll,0,0)}else if(zu==="instanceMatrix"){var ou=Qu.get(iu.instanceMatrix);if(ou===void 0)continue;var cu=ou.buffer,mu=ou.type;bu.enableAttributeAndDivisor(Yu+0,1),bu.enableAttributeAndDivisor(Yu+1,1),bu.enableAttributeAndDivisor(Yu+2,1),bu.enableAttributeAndDivisor(Yu+3,1),pu.bindBuffer(34962,cu),pu.vertexAttribPointer(Yu+0,4,mu,!1,64,0),pu.vertexAttribPointer(Yu+1,4,mu,!1,64,16),pu.vertexAttribPointer(Yu+2,4,mu,!1,64,32),pu.vertexAttribPointer(Yu+3,4,mu,!1,64,48)}else if(Zu!==void 0){var Wu=Zu[zu];if(Wu!==void 0)switch(Wu.length){case 2:pu.vertexAttrib2fv(Yu,Wu);break;case 3:pu.vertexAttrib3fv(Yu,Wu);break;case 4:pu.vertexAttrib4fv(Yu,Wu);break;default:pu.vertexAttrib1fv(Yu,Wu)}}}}bu.disableUnusedAttributes()}}this.compile=function(iu,_u){$s=Iu.get(iu,_u),$s.init(),iu.traverse(function(Eu){Eu.isLight&&($s.pushLight(Eu),Eu.castShadow&&$s.pushShadow(Eu))}),$s.setupLights(_u);const xu={};iu.traverse(function(Eu){let Du=Eu.material;if(Du)if(Array.isArray(Du))for(let el=0;el<Du.length;el++){let Zu=Du[el];Zu.uuid in xu||(pl(Zu,iu,Eu),xu[Zu.uuid]=!0)}else Du.uuid in xu||(pl(Du,iu,Eu),xu[Du.uuid]=!0)})};var sl=null;function ul(iu){Ou.isPresenting||sl&&sl(iu)}var ml=new WebGLAnimation;ml.setAnimationLoop(ul),typeof window!="undefined"&&ml.setContext(window),this.setAnimationLoop=function(iu){sl=iu,Ou.setAnimationLoop(iu),ml.start()},this.render=function(iu,_u){var xu,Eu;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),xu=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Eu=arguments[3]),!(_u&&_u.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Gs){zs.geometry=null,zs.program=null,zs.wireframe=!1,Hs=-1,js=null,iu.autoUpdate===!0&&iu.updateMatrixWorld(),_u.parent===null&&_u.updateMatrixWorld(),Ou.enabled&&Ou.isPresenting&&(_u=Ou.getCamera(_u)),iu.onBeforeRender(Fs,iu,_u,xu||Ns),$s=Iu.get(iu,_u),$s.init(),Mu.multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse),lu.setFromProjectionMatrix(Mu),wu=this.localClippingEnabled,hu=gu.init(this.clippingPlanes,wu,_u),Ds=Pu.get(iu,_u),Ds.init(),al(iu,_u,0,Fs.sortObjects),Ds.finish(),Fs.sortObjects===!0&&Ds.sort(eu,Zs),hu&&gu.beginShadows();var Du=$s.state.shadowsArray;Uu.render(Du,iu,_u),$s.setupLights(_u),hu&&gu.endShadows(),this.info.autoReset&&this.info.reset(),xu!==void 0&&this.setRenderTarget(xu),Ku.render(Ds,iu,_u,Eu);var el=Ds.opaque,Zu=Ds.transparent;if(iu.overrideMaterial){var zu=iu.overrideMaterial;el.length&&dl(el,iu,_u,zu),Zu.length&&dl(Zu,iu,_u,zu)}else el.length&&dl(el,iu,_u),Zu.length&&dl(Zu,iu,_u);iu.onAfterRender(Fs,iu,_u),Ns!==null&&(Lu.updateRenderTargetMipmap(Ns),Lu.updateMultisampleRenderTarget(Ns)),bu.buffers.depth.setTest(!0),bu.buffers.depth.setMask(!0),bu.buffers.color.setMask(!0),bu.setPolygonOffset(!1),Ds=null,$s=null}};function al(iu,_u,xu,Eu){if(iu.visible!==!1){var Du=iu.layers.test(_u.layers);if(Du){if(iu.isGroup)xu=iu.renderOrder;else if(iu.isLOD)iu.autoUpdate===!0&&iu.update(_u);else if(iu.isLight)$s.pushLight(iu),iu.castShadow&&$s.pushShadow(iu);else if(iu.isSprite){if(!iu.frustumCulled||lu.intersectsSprite(iu)){Eu&&du.setFromMatrixPosition(iu.matrixWorld).applyMatrix4(Mu);var el=ju.update(iu),Zu=iu.material;Zu.visible&&Ds.push(iu,el,Zu,xu,du.z,null)}}else if(iu.isImmediateRenderObject)Eu&&du.setFromMatrixPosition(iu.matrixWorld).applyMatrix4(Mu),Ds.push(iu,null,iu.material,xu,du.z,null);else if((iu.isMesh||iu.isLine||iu.isPoints)&&(iu.isSkinnedMesh&&iu.skeleton.frame!==Au.render.frame&&(iu.skeleton.update(),iu.skeleton.frame=Au.render.frame),!iu.frustumCulled||lu.intersectsObject(iu))){Eu&&du.setFromMatrixPosition(iu.matrixWorld).applyMatrix4(Mu);var el=ju.update(iu),Zu=iu.material;if(Array.isArray(Zu))for(var zu=el.groups,Yu=0,rl=zu.length;Yu<rl;Yu++){var ll=zu[Yu],Xs=Zu[ll.materialIndex];Xs&&Xs.visible&&Ds.push(iu,el,Xs,xu,du.z,ll)}else Zu.visible&&Ds.push(iu,el,Zu,xu,du.z,null)}}for(var ou=iu.children,Yu=0,rl=ou.length;Yu<rl;Yu++)al(ou[Yu],_u,xu,Eu)}}function dl(iu,_u,xu,Eu){for(var Du=0,el=iu.length;Du<el;Du++){var Zu=iu[Du],zu=Zu.object,Yu=Zu.geometry,rl=Eu===void 0?Zu.material:Eu,ll=Zu.group;if(xu.isArrayCamera){Ws=xu;for(var Xs=xu.cameras,ou=0,cu=Xs.length;ou<cu;ou++){var mu=Xs[ou];zu.layers.test(mu.layers)&&(bu.viewport(Qs.copy(mu.viewport)),$s.setupLights(mu),vl(zu,_u,mu,Yu,rl,ll))}}else Ws=null,vl(zu,_u,xu,Yu,rl,ll)}}function vl(iu,_u,xu,Eu,Du,el){if(iu.onBeforeRender(Fs,_u,xu,Eu,Du,el),$s=Iu.get(_u,Ws||xu),iu.modelViewMatrix.multiplyMatrices(xu.matrixWorldInverse,iu.matrixWorld),iu.normalMatrix.getNormalMatrix(iu.modelViewMatrix),iu.isImmediateRenderObject){var Zu=gl(xu,_u,Du,iu);bu.setMaterial(Du),zs.geometry=null,zs.program=null,zs.wireframe=!1,nl(iu,Zu)}else Fs.renderBufferDirect(xu,_u,Eu,Du,iu,el);iu.onAfterRender(Fs,_u,xu,Eu,Du,el),$s=Iu.get(_u,Ws||xu)}function pl(iu,_u,xu){var Eu=Bu.get(iu),Du=$s.state.lights,el=$s.state.shadowsArray,Zu=Du.state.version,zu=nu.getParameters(iu,Du.state,el,_u,gu.numPlanes,gu.numIntersection,xu),Yu=nu.getProgramCacheKey(zu),rl=Eu.program,ll=!0;if(rl===void 0)iu.addEventListener("dispose",fu);else if(rl.cacheKey!==Yu)Vu(iu);else if(Eu.lightsStateVersion!==Zu)Eu.lightsStateVersion=Zu,ll=!1;else{if(zu.shaderID!==void 0)return;ll=!1}ll&&(rl=nu.acquireProgram(zu,Yu),Eu.program=rl,Eu.uniforms=zu.uniforms,Eu.outputEncoding=zu.outputEncoding,iu.program=rl);var Xs=rl.getAttributes();if(iu.morphTargets){iu.numSupportedMorphTargets=0;for(var ou=0;ou<Fs.maxMorphTargets;ou++)Xs["morphTarget"+ou]>=0&&iu.numSupportedMorphTargets++}if(iu.morphNormals){iu.numSupportedMorphNormals=0;for(var ou=0;ou<Fs.maxMorphNormals;ou++)Xs["morphNormal"+ou]>=0&&iu.numSupportedMorphNormals++}var cu=Eu.uniforms;(!iu.isShaderMaterial&&!iu.isRawShaderMaterial||iu.clipping===!0)&&(Eu.numClippingPlanes=gu.numPlanes,Eu.numIntersection=gu.numIntersection,cu.clippingPlanes=gu.uniform),Eu.environment=iu.isMeshStandardMaterial?_u.environment:null,Eu.fog=_u.fog,Eu.needsLights=wl(iu),Eu.lightsStateVersion=Zu,Eu.needsLights&&(cu.ambientLightColor.value=Du.state.ambient,cu.lightProbe.value=Du.state.probe,cu.directionalLights.value=Du.state.directional,cu.directionalLightShadows.value=Du.state.directionalShadow,cu.spotLights.value=Du.state.spot,cu.spotLightShadows.value=Du.state.spotShadow,cu.rectAreaLights.value=Du.state.rectArea,cu.pointLights.value=Du.state.point,cu.pointLightShadows.value=Du.state.pointShadow,cu.hemisphereLights.value=Du.state.hemi,cu.directionalShadowMap.value=Du.state.directionalShadowMap,cu.directionalShadowMatrix.value=Du.state.directionalShadowMatrix,cu.spotShadowMap.value=Du.state.spotShadowMap,cu.spotShadowMatrix.value=Du.state.spotShadowMatrix,cu.pointShadowMap.value=Du.state.pointShadowMap,cu.pointShadowMatrix.value=Du.state.pointShadowMatrix);var mu=Eu.program.getUniforms(),Cu=WebGLUniforms.seqWithValue(mu.seq,cu);Eu.uniformsList=Cu}function gl(iu,_u,xu,Eu){Lu.resetTextureUnits();var Du=_u.fog,el=xu.isMeshStandardMaterial?_u.environment:null,Zu=Ns===null?Fs.outputEncoding:Ns.texture.encoding,zu=Bu.get(xu),Yu=$s.state.lights;if(hu&&(wu||iu!==js)){var rl=iu===js&&xu.id===Hs;gu.setState(xu.clippingPlanes,xu.clipIntersection,xu.clipShadows,iu,zu,rl)}xu.version===zu.__version?(zu.program===void 0||xu.fog&&zu.fog!==Du||zu.environment!==el||zu.needsLights&&zu.lightsStateVersion!==Yu.state.version||zu.numClippingPlanes!==void 0&&(zu.numClippingPlanes!==gu.numPlanes||zu.numIntersection!==gu.numIntersection)||zu.outputEncoding!==Zu)&&pl(xu,_u,Eu):(pl(xu,_u,Eu),zu.__version=xu.version);var ll=!1,Xs=!1,ou=!1,cu=zu.program,mu=cu.getUniforms(),Cu=zu.uniforms;if(bu.useProgram(cu.program)&&(ll=!0,Xs=!0,ou=!0),xu.id!==Hs&&(Hs=xu.id,Xs=!0),ll||js!==iu){if(mu.setValue(pu,"projectionMatrix",iu.projectionMatrix),Tu.logarithmicDepthBuffer&&mu.setValue(pu,"logDepthBufFC",2/(Math.log(iu.far+1)/Math.LN2)),js!==iu&&(js=iu,Xs=!0,ou=!0),xu.isShaderMaterial||xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshStandardMaterial||xu.envMap){var qu=mu.map.cameraPosition;qu!==void 0&&qu.setValue(pu,du.setFromMatrixPosition(iu.matrixWorld))}(xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshLambertMaterial||xu.isMeshBasicMaterial||xu.isMeshStandardMaterial||xu.isShaderMaterial)&&mu.setValue(pu,"isOrthographic",iu.isOrthographicCamera===!0),(xu.isMeshPhongMaterial||xu.isMeshToonMaterial||xu.isMeshLambertMaterial||xu.isMeshBasicMaterial||xu.isMeshStandardMaterial||xu.isShaderMaterial||xu.skinning)&&mu.setValue(pu,"viewMatrix",iu.matrixWorldInverse)}if(xu.skinning){mu.setOptional(pu,Eu,"bindMatrix"),mu.setOptional(pu,Eu,"bindMatrixInverse");var tl=Eu.skeleton;if(tl){var cl=tl.bones;if(Tu.floatVertexTextures){if(tl.boneTexture===void 0){var Wu=Math.sqrt(cl.length*4);Wu=MathUtils.ceilPowerOfTwo(Wu),Wu=Math.max(Wu,4);var hl=new Float32Array(Wu*Wu*4);hl.set(tl.boneMatrices);var Al=new DataTexture(hl,Wu,Wu,RGBAFormat,FloatType);tl.boneMatrices=hl,tl.boneTexture=Al,tl.boneTextureSize=Wu}mu.setValue(pu,"boneTexture",tl.boneTexture,Lu),mu.setValue(pu,"boneTextureSize",tl.boneTextureSize)}else mu.setOptional(pu,tl,"boneMatrices")}}return(Xs||zu.receiveShadow!==Eu.receiveShadow)&&(zu.receiveShadow=Eu.receiveShadow,mu.setValue(pu,"receiveShadow",Eu.receiveShadow)),Xs&&(mu.setValue(pu,"toneMappingExposure",Fs.toneMappingExposure),mu.setValue(pu,"toneMappingWhitePoint",Fs.toneMappingWhitePoint),zu.needsLights&&bl(Cu,ou),Du&&xu.fog&&uu.refreshFogUniforms(Cu,Du),uu.refreshMaterialUniforms(Cu,xu,el,Js,Ks),Cu.ltc_1!==void 0&&(Cu.ltc_1.value=UniformsLib.LTC_1),Cu.ltc_2!==void 0&&(Cu.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(pu,zu.uniformsList,Cu,Lu)),xu.isShaderMaterial&&xu.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(pu,zu.uniformsList,Cu,Lu),xu.uniformsNeedUpdate=!1),xu.isSpriteMaterial&&mu.setValue(pu,"center",Eu.center),mu.setValue(pu,"modelViewMatrix",Eu.modelViewMatrix),mu.setValue(pu,"normalMatrix",Eu.normalMatrix),mu.setValue(pu,"modelMatrix",Eu.matrixWorld),cu}function bl(iu,_u){iu.ambientLightColor.needsUpdate=_u,iu.lightProbe.needsUpdate=_u,iu.directionalLights.needsUpdate=_u,iu.directionalLightShadows.needsUpdate=_u,iu.pointLights.needsUpdate=_u,iu.pointLightShadows.needsUpdate=_u,iu.spotLights.needsUpdate=_u,iu.spotLightShadows.needsUpdate=_u,iu.rectAreaLights.needsUpdate=_u,iu.hemisphereLights.needsUpdate=_u}function wl(iu){return iu.isMeshLambertMaterial||iu.isMeshToonMaterial||iu.isMeshPhongMaterial||iu.isMeshStandardMaterial||iu.isShadowMaterial||iu.isShaderMaterial&&iu.lights===!0}this.setFramebuffer=function(iu){Vs!==iu&&Ns===null&&pu.bindFramebuffer(36160,iu),Vs=iu},this.getActiveCubeFace=function(){return ks},this.getActiveMipmapLevel=function(){return Os},this.getRenderTarget=function(){return Ns},this.setRenderTarget=function(iu,_u,xu){Ns=iu,ks=_u,Os=xu,iu&&Bu.get(iu).__webglFramebuffer===void 0&&Lu.setupRenderTarget(iu);var Eu=Vs,Du=!1;if(iu){var el=Bu.get(iu).__webglFramebuffer;iu.isWebGLCubeRenderTarget?(Eu=el[_u||0],Du=!0):iu.isWebGLMultisampleRenderTarget?Eu=Bu.get(iu).__webglMultisampledFramebuffer:Eu=el,Qs.copy(iu.viewport),qs.copy(iu.scissor),tu=iu.scissorTest}else Qs.copy(au).multiplyScalar(Js).floor(),qs.copy(ru).multiplyScalar(Js).floor(),tu=su;if(Us!==Eu&&(pu.bindFramebuffer(36160,Eu),Us=Eu),bu.viewport(Qs),bu.scissor(qs),bu.setScissorTest(tu),Du){var Zu=Bu.get(iu.texture);pu.framebufferTexture2D(36160,36064,34069+(_u||0),Zu.__webglTexture,xu||0)}},this.readRenderTargetPixels=function(iu,_u,xu,Eu,Du,el,Zu){if(!(iu&&iu.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var zu=Bu.get(iu).__webglFramebuffer;if(iu.isWebGLCubeRenderTarget&&Zu!==void 0&&(zu=zu[Zu]),zu){var Yu=!1;zu!==Us&&(pu.bindFramebuffer(36160,zu),Yu=!0);try{var rl=iu.texture,ll=rl.format,Xs=rl.type;if(ll!==RGBAFormat&&Ju.convert(ll)!==pu.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Xs!==UnsignedByteType&&Ju.convert(Xs)!==pu.getParameter(35738)&&!(Xs===FloatType&&(Tu.isWebGL2||Su.get("OES_texture_float")||Su.get("WEBGL_color_buffer_float")))&&!(Xs===HalfFloatType&&(Tu.isWebGL2?Su.get("EXT_color_buffer_float"):Su.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pu.checkFramebufferStatus(36160)===36053?_u>=0&&_u<=iu.width-Eu&&xu>=0&&xu<=iu.height-Du&&pu.readPixels(_u,xu,Eu,Du,Ju.convert(ll),Ju.convert(Xs),el):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Yu&&pu.bindFramebuffer(36160,Us)}}},this.copyFramebufferToTexture=function(iu,_u,xu){xu===void 0&&(xu=0);var Eu=Math.pow(2,-xu),Du=Math.floor(_u.image.width*Eu),el=Math.floor(_u.image.height*Eu),Zu=Ju.convert(_u.format);Lu.setTexture2D(_u,0),pu.copyTexImage2D(3553,xu,Zu,iu.x,iu.y,Du,el,0),bu.unbindTexture()},this.copyTextureToTexture=function(iu,_u,xu,Eu){Eu===void 0&&(Eu=0);var Du=_u.image.width,el=_u.image.height,Zu=Ju.convert(xu.format),zu=Ju.convert(xu.type);Lu.setTexture2D(xu,0),_u.isDataTexture?pu.texSubImage2D(3553,Eu,iu.x,iu.y,Du,el,Zu,zu,_u.image.data):_u.isCompressedTexture?pu.compressedTexSubImage2D(3553,Eu,iu.x,iu.y,_u.mipmaps[0].width,_u.mipmaps[0].height,Zu,_u.mipmaps[0].data):pu.texSubImage2D(3553,Eu,iu.x,iu.y,Zu,zu,_u.image),Eu===0&&xu.generateMipmaps&&pu.generateMipmap(3553),bu.unbindTexture()},this.initTexture=function(iu){Lu.setTexture2D(iu,0),bu.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(ca,ga){this.name="",this.color=new Color(ca),this.density=ga!==void 0?ga:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(ca,ga,_s){this.name="",this.color=new Color(ca),this.near=ga!==void 0?ga:1,this.far=_s!==void 0?_s:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(ca,ga){this.array=ca,this.stride=ga,this.count=ca!==void 0?ca.length/ga:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.array=new ca.array.constructor(ca.array),this.count=ca.count,this.stride=ca.stride,this.usage=ca.usage,this},copyAt:function(ca,ga,_s){ca*=this.stride,_s*=ga.stride;for(var Ss=0,Ms=this.stride;Ss<Ms;Ss++)this.array[ca+Ss]=ga.array[_s+Ss];return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(ca){return this.onUploadCallback=ca,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(ca,ga,_s,Ss){this.name="",this.data=ca,this.itemSize=ga,this.offset=_s,this.normalized=Ss===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(ca){for(var ga=0,_s=this.data.count;ga<_s;ga++)_vector$6.x=this.getX(ga),_vector$6.y=this.getY(ga),_vector$6.z=this.getZ(ga),_vector$6.applyMatrix4(ca),this.setXYZ(ga,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset]=ga,this},setY:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+1]=ga,this},setZ:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+2]=ga,this},setW:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+3]=ga,this},getX:function(ca){return this.data.array[ca*this.data.stride+this.offset]},getY:function(ca){return this.data.array[ca*this.data.stride+this.offset+1]},getZ:function(ca){return this.data.array[ca*this.data.stride+this.offset+2]},getW:function(ca){return this.data.array[ca*this.data.stride+this.offset+3]},setXY:function(ca,ga,_s){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this},setXYZ:function(ca,ga,_s,Ss){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this.data.array[ca+2]=Ss,this},setXYZW:function(ca,ga,_s,Ss,Ms){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=_s,this.data.array[ca+2]=Ss,this.data.array[ca+3]=Ms,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var _s=ga*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)ca.push(this.data.array[_s+Ss]);return new BufferAttribute(new this.array.constructor(ca),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var _s=ga*this.data.stride+this.offset,Ss=0;Ss<this.itemSize;Ss++)ca.push(this.data.array[_s+Ss]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:ca,normalized:this.normalized}}});function SpriteMaterial(ca){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(ca)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.rotation=ca.rotation,this.sizeAttenuation=ca.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(ca){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var ga=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),_s=new InterleavedBuffer(ga,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(_s,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(_s,2,3,!1))}this.geometry=_geometry,this.material=ca!==void 0?ca:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(ca,ga){ca.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(ca.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(ca.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),ca.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var _s=this.material.rotation,Ss,Ms;_s!==0&&(Ms=Math.cos(_s),Ss=Math.sin(_s));var Cs=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Ts=ca.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Ts===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Cs,_worldScale,Ss,Ms),_uvB$1.set(0,1),Ts=ca.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Ts===null))){var Bs=ca.ray.origin.distanceTo(_intersectPoint);Bs<ca.near||Bs>ca.far||ga.push({distance:Bs,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.center!==void 0&&this.center.copy(ca.center),this}});function transformVertex(ca,ga,_s,Ss,Ms,Cs){_alignedPosition.subVectors(ca,_s).addScalar(.5).multiply(Ss),Ms!==void 0?(_rotatedPosition.x=Cs*_alignedPosition.x-Ms*_alignedPosition.y,_rotatedPosition.y=Ms*_alignedPosition.x+Cs*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ca.copy(ga),ca.x+=_rotatedPosition.x,ca.y+=_rotatedPosition.y,ca.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(ca){Object3D.prototype.copy.call(this,ca,!1);for(var ga=ca.levels,_s=0,Ss=ga.length;_s<Ss;_s++){var Ms=ga[_s];this.addLevel(Ms.object.clone(),Ms.distance)}return this.autoUpdate=ca.autoUpdate,this},addLevel:function(ca,ga){ga===void 0&&(ga=0),ga=Math.abs(ga);for(var _s=this.levels,Ss=0;Ss<_s.length&&!(ga<_s[Ss].distance);Ss++);return _s.splice(Ss,0,{distance:ga,object:ca}),this.add(ca),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(ca){var ga=this.levels;if(ga.length>0){for(var _s=1,Ss=ga.length;_s<Ss&&!(ca<ga[_s].distance);_s++);return ga[_s-1].object}return null},raycast:function(ca,ga){var _s=this.levels;if(_s.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Ss=ca.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Ss).raycast(ca,ga)}},update:function(ca){var ga=this.levels;if(ga.length>1){_v1$4.setFromMatrixPosition(ca.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var _s=_v1$4.distanceTo(_v2$2)/ca.zoom;ga[0].object.visible=!0;for(var Ss=1,Ms=ga.length;Ss<Ms&&_s>=ga[Ss].distance;Ss++)ga[Ss-1].object.visible=!1,ga[Ss].object.visible=!0;for(this._currentLevel=Ss-1;Ss<Ms;Ss++)ga[Ss].object.visible=!1}},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);this.autoUpdate===!1&&(ga.object.autoUpdate=!1),ga.object.levels=[];for(var _s=this.levels,Ss=0,Ms=_s.length;Ss<Ms;Ss++){var Cs=_s[Ss];ga.object.levels.push({object:Cs.object.uuid,distance:Cs.distance})}return ga}});function SkinnedMesh(ca,ga){ca&&ca.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,ca,ga),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(ca,ga){this.skeleton=ca,ga===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),ga=this.matrixWorld),this.bindMatrix.copy(ga),this.bindMatrixInverse.getInverse(ga)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var ca=new Vector4,ga=this.geometry.attributes.skinWeight,_s=0,Ss=ga.count;_s<Ss;_s++){ca.x=ga.getX(_s),ca.y=ga.getY(_s),ca.z=ga.getZ(_s),ca.w=ga.getW(_s);var Ms=1/ca.manhattanLength();Ms!==1/0?ca.multiplyScalar(Ms):ca.set(1,0,0,0),ga.setXYZW(_s,ca.x,ca.y,ca.z,ca.w)}},updateMatrixWorld:function(ca){Mesh.prototype.updateMatrixWorld.call(this,ca),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var ca=new Vector3,ga=new Vector4,_s=new Vector4,Ss=new Vector3,Ms=new Matrix4;return function(Cs,Ts){var Bs=this.skeleton,Ps=this.geometry;ga.fromBufferAttribute(Ps.attributes.skinIndex,Cs),_s.fromBufferAttribute(Ps.attributes.skinWeight,Cs),ca.fromBufferAttribute(Ps.attributes.position,Cs).applyMatrix4(this.bindMatrix),Ts.set(0,0,0);for(var Ls=0;Ls<4;Ls++){var Rs=_s.getComponent(Ls);if(Rs!==0){var Ds=ga.getComponent(Ls);Ms.multiplyMatrices(Bs.bones[Ds].matrixWorld,Bs.boneInverses[Ds]),Ts.addScaledVector(Ss.copy(ca).applyMatrix4(Ms),Rs)}}return Ts.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(ca,ga){if(ca=ca||[],this.bones=ca.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,ga===void 0)this.calculateInverses();else if(this.bones.length===ga.length)this.boneInverses=ga.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var _s=0,Ss=this.bones.length;_s<Ss;_s++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var ca=0,ga=this.bones.length;ca<ga;ca++){var _s=new Matrix4;this.bones[ca]&&_s.getInverse(this.bones[ca].matrixWorld),this.boneInverses.push(_s)}},pose:function(){var ca,ga,_s;for(ga=0,_s=this.bones.length;ga<_s;ga++)ca=this.bones[ga],ca&&ca.matrixWorld.getInverse(this.boneInverses[ga]);for(ga=0,_s=this.bones.length;ga<_s;ga++)ca=this.bones[ga],ca&&(ca.parent&&ca.parent.isBone?(ca.matrix.getInverse(ca.parent.matrixWorld),ca.matrix.multiply(ca.matrixWorld)):ca.matrix.copy(ca.matrixWorld),ca.matrix.decompose(ca.position,ca.quaternion,ca.scale))},update:function(){for(var ca=this.bones,ga=this.boneInverses,_s=this.boneMatrices,Ss=this.boneTexture,Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts=ca[Ms]?ca[Ms].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Ts,ga[Ms]),_offsetMatrix.toArray(_s,Ms*16)}Ss!==void 0&&(Ss.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(ca){for(var ga=0,_s=this.bones.length;ga<_s;ga++){var Ss=this.bones[ga];if(Ss.name===ca)return Ss}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(ca,ga,_s){Mesh.call(this,ca,ga),this.instanceMatrix=new BufferAttribute(new Float32Array(_s*16),16),this.count=_s,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(ca,ga){ga.fromArray(this.instanceMatrix.array,ca*16)},raycast:function(ca,ga){var _s=this.matrixWorld,Ss=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Ms=0;Ms<Ss;Ms++){this.getMatrixAt(Ms,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(_s,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(ca,_instanceIntersects);for(var Cs=0,Ts=_instanceIntersects.length;Cs<Ts;Cs++){var Bs=_instanceIntersects[Cs];Bs.instanceId=Ms,Bs.object=this,ga.push(Bs)}_instanceIntersects.length=0}},setMatrixAt:function(ca,ga){ga.toArray(this.instanceMatrix.array,ca*16)},updateMorphTargets:function(){}});function LineBasicMaterial(ca){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(ca)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.linewidth=ca.linewidth,this.linecap=ca.linecap,this.linejoin=ca.linejoin,this.morphTargets=ca.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(ca,ga,_s){_s===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,_s=[0],Ss=1,Ms=ga.count;Ss<Ms;Ss++)_start.fromBufferAttribute(ga,Ss-1),_end.fromBufferAttribute(ga,Ss),_s[Ss]=_s[Ss-1],_s[Ss]+=_start.distanceTo(_end);ca.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry){var Cs=ca.vertices,_s=ca.lineDistances;_s[0]=0;for(var Ss=1,Ms=Cs.length;Ss<Ms;Ss++)_s[Ss]=_s[Ss-1],_s[Ss]+=Cs[Ss-1].distanceTo(Cs[Ss])}return this},raycast:function(ca,ga){var _s=this.geometry,Ss=this.matrixWorld,Ms=ca.params.Line.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$2.copy(_s.boundingSphere),_sphere$2.applyMatrix4(Ss),_sphere$2.radius+=Ms,ca.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Ss),_ray$1.copy(ca.ray).applyMatrix4(_inverseMatrix$1);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs,Bs=new Vector3,Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,Ds=this&&this.isLineSegments?2:1;if(_s.isBufferGeometry){var $s=_s.index,Fs=_s.attributes,Gs=Fs.position.array;if($s!==null)for(var Vs=$s.array,ks=0,Os=Vs.length-1;ks<Os;ks+=Ds){var Ns=Vs[ks],Us=Vs[ks+1];Bs.fromArray(Gs,Ns*3),Ps.fromArray(Gs,Us*3);var Hs=_ray$1.distanceSqToSegment(Bs,Ps,Rs,Ls);if(!(Hs>Ts)){Rs.applyMatrix4(this.matrixWorld);var zs=ca.ray.origin.distanceTo(Rs);zs<ca.near||zs>ca.far||ga.push({distance:zs,point:Ls.clone().applyMatrix4(this.matrixWorld),index:ks,face:null,faceIndex:null,object:this})}}else for(var ks=0,Os=Gs.length/3-1;ks<Os;ks+=Ds){Bs.fromArray(Gs,3*ks),Ps.fromArray(Gs,3*ks+3);var Hs=_ray$1.distanceSqToSegment(Bs,Ps,Rs,Ls);if(!(Hs>Ts)){Rs.applyMatrix4(this.matrixWorld);var zs=ca.ray.origin.distanceTo(Rs);zs<ca.near||zs>ca.far||ga.push({distance:zs,point:Ls.clone().applyMatrix4(this.matrixWorld),index:ks,face:null,faceIndex:null,object:this})}}}else if(_s.isGeometry)for(var js=_s.vertices,Ws=js.length,ks=0;ks<Ws-1;ks+=Ds){var Hs=_ray$1.distanceSqToSegment(js[ks],js[ks+1],Rs,Ls);if(!(Hs>Ts)){Rs.applyMatrix4(this.matrixWorld);var zs=ca.ray.origin.distanceTo(Rs);zs<ca.near||zs>ca.far||ga.push({distance:zs,point:Ls.clone().applyMatrix4(this.matrixWorld),index:ks,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Bs=ca.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(ca,ga){Line$1.call(this,ca,ga),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,_s=[],Ss=0,Ms=ga.count;Ss<Ms;Ss+=2)_start$1.fromBufferAttribute(ga,Ss),_end$1.fromBufferAttribute(ga,Ss+1),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);ca.setAttribute("lineDistance",new Float32BufferAttribute(_s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry)for(var Cs=ca.vertices,_s=ca.lineDistances,Ss=0,Ms=Cs.length;Ss<Ms;Ss+=2)_start$1.copy(Cs[Ss]),_end$1.copy(Cs[Ss+1]),_s[Ss]=Ss===0?0:_s[Ss-1],_s[Ss+1]=_s[Ss]+_start$1.distanceTo(_end$1);return this}});function LineLoop(ca,ga){Line$1.call(this,ca,ga),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(ca){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(ca)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.size=ca.size,this.sizeAttenuation=ca.sizeAttenuation,this.morphTargets=ca.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(ca,ga){Object3D.call(this),this.type="Points",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(ca,ga){var _s=this.geometry,Ss=this.matrixWorld,Ms=ca.params.Points.threshold;if(_s.boundingSphere===null&&_s.computeBoundingSphere(),_sphere$3.copy(_s.boundingSphere),_sphere$3.applyMatrix4(Ss),_sphere$3.radius+=Ms,ca.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Ss),_ray$2.copy(ca.ray).applyMatrix4(_inverseMatrix$2);var Cs=Ms/((this.scale.x+this.scale.y+this.scale.z)/3),Ts=Cs*Cs;if(_s.isBufferGeometry){var Bs=_s.index,Ps=_s.attributes,Ls=Ps.position.array;if(Bs!==null)for(var Rs=Bs.array,Ds=0,$s=Rs.length;Ds<$s;Ds++){var Fs=Rs[Ds];_position$1.fromArray(Ls,Fs*3),testPoint(_position$1,Fs,Ts,Ss,ca,ga,this)}else for(var Ds=0,Gs=Ls.length/3;Ds<Gs;Ds++)_position$1.fromArray(Ls,Ds*3),testPoint(_position$1,Ds,Ts,Ss,ca,ga,this)}else for(var Vs=_s.vertices,Ds=0,Gs=Vs.length;Ds<Gs;Ds++)testPoint(Vs[Ds],Ds,Ts,Ss,ca,ga,this)}},updateMorphTargets:function(){var ca=this.geometry,ga,_s,Ss;if(ca.isBufferGeometry){var Ms=ca.morphAttributes,Cs=Object.keys(Ms);if(Cs.length>0){var Ts=Ms[Cs[0]];if(Ts!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,_s=Ts.length;ga<_s;ga++)Ss=Ts[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ss]=ga}}else{var Bs=ca.morphTargets;Bs!==void 0&&Bs.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(ca,ga,_s,Ss,Ms,Cs,Ts){var Bs=_ray$2.distanceSqToPoint(ca);if(Bs<_s){var Ps=new Vector3;_ray$2.closestPointToPoint(ca,Ps),Ps.applyMatrix4(Ss);var Ls=Ms.ray.origin.distanceTo(Ps);if(Ls<Ms.near||Ls>Ms.far)return;Cs.push({distance:Ls,distanceToRay:Math.sqrt(Bs),point:Ps,index:ga,face:null,object:Ts})}}function VideoTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps),this.format=Ts!==void 0?Ts:RGBFormat,this.minFilter=Cs!==void 0?Cs:LinearFilter,this.magFilter=Ms!==void 0?Ms:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var ca=this.image;ca.readyState>=ca.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds){Texture.call(this,null,Cs,Ts,Bs,Ps,Ls,Ss,Ms,Rs,Ds),this.image={width:ga,height:_s},this.mipmaps=ca,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){Texture.call(this,ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(ca,ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls){if(Ls=Ls!==void 0?Ls:DepthFormat,Ls!==DepthFormat&&Ls!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");_s===void 0&&Ls===DepthFormat&&(_s=UnsignedShortType),_s===void 0&&Ls===DepthStencilFormat&&(_s=UnsignedInt248Type),Texture.call(this,null,Ss,Ms,Cs,Ts,Bs,Ls,_s,Ps),this.image={width:ca,height:ga},this.magFilter=Ts!==void 0?Ts:NearestFilter,this.minFilter=Bs!==void 0?Bs:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(ca){BufferGeometry.call(this),this.type="WireframeGeometry";var ga=[],_s,Ss,Ms,Cs,Ts,Bs=[0,0],Ps={},Ls,Rs,Ds,$s,Fs=["a","b","c"],Gs;if(ca&&ca.isGeometry){var Vs=ca.faces;for(_s=0,Ms=Vs.length;_s<Ms;_s++){var ks=Vs[_s];for(Ss=0;Ss<3;Ss++)Rs=ks[Fs[Ss]],Ds=ks[Fs[(Ss+1)%3]],Bs[0]=Math.min(Rs,Ds),Bs[1]=Math.max(Rs,Ds),$s=Bs[0]+","+Bs[1],Ps[$s]===void 0&&(Ps[$s]={index1:Bs[0],index2:Bs[1]})}for($s in Ps)Ls=Ps[$s],Gs=ca.vertices[Ls.index1],ga.push(Gs.x,Gs.y,Gs.z),Gs=ca.vertices[Ls.index2],ga.push(Gs.x,Gs.y,Gs.z)}else if(ca&&ca.isBufferGeometry){var Os,Ns,Us,Hs,zs,js,Ws,Qs;if(Gs=new Vector3,ca.index!==null){for(Os=ca.attributes.position,Ns=ca.index,Us=ca.groups,Us.length===0&&(Us=[{start:0,count:Ns.count,materialIndex:0}]),Cs=0,Ts=Us.length;Cs<Ts;++Cs)for(Hs=Us[Cs],zs=Hs.start,js=Hs.count,_s=zs,Ms=zs+js;_s<Ms;_s+=3)for(Ss=0;Ss<3;Ss++)Rs=Ns.getX(_s+Ss),Ds=Ns.getX(_s+(Ss+1)%3),Bs[0]=Math.min(Rs,Ds),Bs[1]=Math.max(Rs,Ds),$s=Bs[0]+","+Bs[1],Ps[$s]===void 0&&(Ps[$s]={index1:Bs[0],index2:Bs[1]});for($s in Ps)Ls=Ps[$s],Gs.fromBufferAttribute(Os,Ls.index1),ga.push(Gs.x,Gs.y,Gs.z),Gs.fromBufferAttribute(Os,Ls.index2),ga.push(Gs.x,Gs.y,Gs.z)}else for(Os=ca.attributes.position,_s=0,Ms=Os.count/3;_s<Ms;_s++)for(Ss=0;Ss<3;Ss++)Ws=3*_s+Ss,Gs.fromBufferAttribute(Os,Ws),ga.push(Gs.x,Gs.y,Gs.z),Qs=3*_s+(Ss+1)%3,Gs.fromBufferAttribute(Os,Qs),ga.push(Gs.x,Gs.y,Gs.z)}this.setAttribute("position",new Float32BufferAttribute(ga,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(ca,ga,_s){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:ca,slices:ga,stacks:_s},this.fromBufferGeometry(new ParametricBufferGeometry(ca,ga,_s)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(ca,ga,_s){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:ca,slices:ga,stacks:_s};var Ss=[],Ms=[],Cs=[],Ts=[],Bs=1e-5,Ps=new Vector3,Ls=new Vector3,Rs=new Vector3,Ds=new Vector3,$s=new Vector3,Fs,Gs;ca.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Vs=ga+1;for(Fs=0;Fs<=_s;Fs++){var ks=Fs/_s;for(Gs=0;Gs<=ga;Gs++){var Os=Gs/ga;ca(Os,ks,Ls),Ms.push(Ls.x,Ls.y,Ls.z),Os-Bs>=0?(ca(Os-Bs,ks,Rs),Ds.subVectors(Ls,Rs)):(ca(Os+Bs,ks,Rs),Ds.subVectors(Rs,Ls)),ks-Bs>=0?(ca(Os,ks-Bs,Rs),$s.subVectors(Ls,Rs)):(ca(Os,ks+Bs,Rs),$s.subVectors(Rs,Ls)),Ps.crossVectors(Ds,$s).normalize(),Cs.push(Ps.x,Ps.y,Ps.z),Ts.push(Os,ks)}}for(Fs=0;Fs<_s;Fs++)for(Gs=0;Gs<ga;Gs++){var Ns=Fs*Vs+Gs,Us=Fs*Vs+Gs+1,Hs=(Fs+1)*Vs+Gs+1,zs=(Fs+1)*Vs+Gs;Ss.push(Ns,Us,zs),Ss.push(Us,Hs,zs)}this.setIndex(Ss),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:ca,indices:ga,radius:_s,detail:Ss},this.fromBufferGeometry(new PolyhedronBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:ca,indices:ga,radius:_s,detail:Ss},_s=_s||1,Ss=Ss||0;var Ms=[],Cs=[];Ts(Ss),Ps(_s),Ls(),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2)),Ss===0?this.computeVertexNormals():this.normalizeNormals();function Ts(Os){for(var Ns=new Vector3,Us=new Vector3,Hs=new Vector3,zs=0;zs<ga.length;zs+=3)$s(ga[zs+0],Ns),$s(ga[zs+1],Us),$s(ga[zs+2],Hs),Bs(Ns,Us,Hs,Os)}function Bs(Os,Ns,Us,Hs){var zs=Math.pow(2,Hs),js=[],Ws,Qs;for(Ws=0;Ws<=zs;Ws++){js[Ws]=[];var qs=Os.clone().lerp(Us,Ws/zs),tu=Ns.clone().lerp(Us,Ws/zs),Ys=zs-Ws;for(Qs=0;Qs<=Ys;Qs++)Qs===0&&Ws===zs?js[Ws][Qs]=qs:js[Ws][Qs]=qs.clone().lerp(tu,Qs/Ys)}for(Ws=0;Ws<zs;Ws++)for(Qs=0;Qs<2*(zs-Ws)-1;Qs++){var Ks=Math.floor(Qs/2);Qs%2==0?(Ds(js[Ws][Ks+1]),Ds(js[Ws+1][Ks]),Ds(js[Ws][Ks])):(Ds(js[Ws][Ks+1]),Ds(js[Ws+1][Ks+1]),Ds(js[Ws+1][Ks]))}}function Ps(Os){for(var Ns=new Vector3,Us=0;Us<Ms.length;Us+=3)Ns.x=Ms[Us+0],Ns.y=Ms[Us+1],Ns.z=Ms[Us+2],Ns.normalize().multiplyScalar(Os),Ms[Us+0]=Ns.x,Ms[Us+1]=Ns.y,Ms[Us+2]=Ns.z}function Ls(){for(var Os=new Vector3,Ns=0;Ns<Ms.length;Ns+=3){Os.x=Ms[Ns+0],Os.y=Ms[Ns+1],Os.z=Ms[Ns+2];var Us=Vs(Os)/2/Math.PI+.5,Hs=ks(Os)/Math.PI+.5;Cs.push(Us,1-Hs)}Fs(),Rs()}function Rs(){for(var Os=0;Os<Cs.length;Os+=6){var Ns=Cs[Os+0],Us=Cs[Os+2],Hs=Cs[Os+4],zs=Math.max(Ns,Us,Hs),js=Math.min(Ns,Us,Hs);zs>.9&&js<.1&&(Ns<.2&&(Cs[Os+0]+=1),Us<.2&&(Cs[Os+2]+=1),Hs<.2&&(Cs[Os+4]+=1))}}function Ds(Os){Ms.push(Os.x,Os.y,Os.z)}function $s(Os,Ns){var Us=Os*3;Ns.x=ca[Us+0],Ns.y=ca[Us+1],Ns.z=ca[Us+2]}function Fs(){for(var Os=new Vector3,Ns=new Vector3,Us=new Vector3,Hs=new Vector3,zs=new Vector2,js=new Vector2,Ws=new Vector2,Qs=0,qs=0;Qs<Ms.length;Qs+=9,qs+=6){Os.set(Ms[Qs+0],Ms[Qs+1],Ms[Qs+2]),Ns.set(Ms[Qs+3],Ms[Qs+4],Ms[Qs+5]),Us.set(Ms[Qs+6],Ms[Qs+7],Ms[Qs+8]),zs.set(Cs[qs+0],Cs[qs+1]),js.set(Cs[qs+2],Cs[qs+3]),Ws.set(Cs[qs+4],Cs[qs+5]),Hs.copy(Os).add(Ns).add(Us).divideScalar(3);var tu=Vs(Hs);Gs(zs,qs+0,Os,tu),Gs(js,qs+2,Ns,tu),Gs(Ws,qs+4,Us,tu)}}function Gs(Os,Ns,Us,Hs){Hs<0&&Os.x===1&&(Cs[Ns]=Os.x-1),Us.x===0&&Us.z===0&&(Cs[Ns]=Hs/2/Math.PI+.5)}function Vs(Os){return Math.atan2(Os.z,-Os.x)}function ks(Os){return Math.atan2(-Os.y,Math.sqrt(Os.x*Os.x+Os.z*Os.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(ca,ga){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new TetrahedronBufferGeometry(ca,ga)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(ca,ga){var _s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Ss=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,_s,Ss,ca,ga),this.type="TetrahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(ca,ga){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new OctahedronBufferGeometry(ca,ga)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(ca,ga){var _s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Ss=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,_s,Ss,ca,ga),this.type="OctahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(ca,ga){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new IcosahedronBufferGeometry(ca,ga)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(ca,ga){var _s=(1+Math.sqrt(5))/2,Ss=[-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,0,0,-1,_s,0,1,_s,0,-1,-_s,0,1,-_s,_s,0,-1,_s,0,1,-_s,0,-1,-_s,0,1],Ms=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Ss,Ms,ca,ga),this.type="IcosahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(ca,ga){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new DodecahedronBufferGeometry(ca,ga)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(ca,ga){var _s=(1+Math.sqrt(5))/2,Ss=1/_s,Ms=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,-Ss,-_s,0,-Ss,_s,0,Ss,-_s,0,Ss,_s,0,-_s,0,-Ss,_s,0,-Ss,-_s,0,Ss,_s,0,Ss],Cs=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Ms,Cs,ca,ga),this.type="DodecahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(ca,ga,_s,Ss,Ms,Cs){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:ca,tubularSegments:ga,radius:_s,radialSegments:Ss,closed:Ms},Cs!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Ts=new TubeBufferGeometry(ca,ga,_s,Ss,Ms);this.tangents=Ts.tangents,this.normals=Ts.normals,this.binormals=Ts.binormals,this.fromBufferGeometry(Ts),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(ca,ga,_s,Ss,Ms){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:ca,tubularSegments:ga,radius:_s,radialSegments:Ss,closed:Ms},ga=ga||64,_s=_s||1,Ss=Ss||8,Ms=Ms||!1;var Cs=ca.computeFrenetFrames(ga,Ms);this.tangents=Cs.tangents,this.normals=Cs.normals,this.binormals=Cs.binormals;var Ts=new Vector3,Bs=new Vector3,Ps=new Vector2,Ls=new Vector3,Rs,Ds,$s=[],Fs=[],Gs=[],Vs=[];ks(),this.setIndex(Vs),this.setAttribute("position",new Float32BufferAttribute($s,3)),this.setAttribute("normal",new Float32BufferAttribute(Fs,3)),this.setAttribute("uv",new Float32BufferAttribute(Gs,2));function ks(){for(Rs=0;Rs<ga;Rs++)Os(Rs);Os(Ms===!1?ga:0),Us(),Ns()}function Os(Hs){Ls=ca.getPointAt(Hs/ga,Ls);var zs=Cs.normals[Hs],js=Cs.binormals[Hs];for(Ds=0;Ds<=Ss;Ds++){var Ws=Ds/Ss*Math.PI*2,Qs=Math.sin(Ws),qs=-Math.cos(Ws);Bs.x=qs*zs.x+Qs*js.x,Bs.y=qs*zs.y+Qs*js.y,Bs.z=qs*zs.z+Qs*js.z,Bs.normalize(),Fs.push(Bs.x,Bs.y,Bs.z),Ts.x=Ls.x+_s*Bs.x,Ts.y=Ls.y+_s*Bs.y,Ts.z=Ls.z+_s*Bs.z,$s.push(Ts.x,Ts.y,Ts.z)}}function Ns(){for(Ds=1;Ds<=ga;Ds++)for(Rs=1;Rs<=Ss;Rs++){var Hs=(Ss+1)*(Ds-1)+(Rs-1),zs=(Ss+1)*Ds+(Rs-1),js=(Ss+1)*Ds+Rs,Ws=(Ss+1)*(Ds-1)+Rs;Vs.push(Hs,zs,Ws),Vs.push(zs,js,Ws)}}function Us(){for(Rs=0;Rs<=ga;Rs++)for(Ds=0;Ds<=Ss;Ds++)Ps.x=Rs/ga,Ps.y=Ds/Ss,Gs.push(Ps.x,Ps.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.path=this.parameters.path.toJSON(),ca};function TorusKnotGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},Ts!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(ca,ga,_s,Ss,Ms,Cs)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(ca,ga,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:_s,radialSegments:Ss,p:Ms,q:Cs},ca=ca||1,ga=ga||.4,_s=Math.floor(_s)||64,Ss=Math.floor(Ss)||8,Ms=Ms||2,Cs=Cs||3;var Ts=[],Bs=[],Ps=[],Ls=[],Rs,Ds,$s=new Vector3,Fs=new Vector3,Gs=new Vector3,Vs=new Vector3,ks=new Vector3,Os=new Vector3,Ns=new Vector3;for(Rs=0;Rs<=_s;++Rs){var Us=Rs/_s*Ms*Math.PI*2;for(Ys(Us,Ms,Cs,ca,Gs),Ys(Us+.01,Ms,Cs,ca,Vs),Os.subVectors(Vs,Gs),Ns.addVectors(Vs,Gs),ks.crossVectors(Os,Ns),Ns.crossVectors(ks,Os),ks.normalize(),Ns.normalize(),Ds=0;Ds<=Ss;++Ds){var Hs=Ds/Ss*Math.PI*2,zs=-ga*Math.cos(Hs),js=ga*Math.sin(Hs);$s.x=Gs.x+(zs*Ns.x+js*ks.x),$s.y=Gs.y+(zs*Ns.y+js*ks.y),$s.z=Gs.z+(zs*Ns.z+js*ks.z),Bs.push($s.x,$s.y,$s.z),Fs.subVectors($s,Gs).normalize(),Ps.push(Fs.x,Fs.y,Fs.z),Ls.push(Rs/_s),Ls.push(Ds/Ss)}}for(Ds=1;Ds<=_s;Ds++)for(Rs=1;Rs<=Ss;Rs++){var Ws=(Ss+1)*(Ds-1)+(Rs-1),Qs=(Ss+1)*Ds+(Rs-1),qs=(Ss+1)*Ds+Rs,tu=(Ss+1)*(Ds-1)+Rs;Ts.push(Ws,Qs,tu),Ts.push(Qs,qs,tu)}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Bs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ps,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2));function Ys(Ks,Js,eu,Zs,au){var ru=Math.cos(Ks),su=Math.sin(Ks),lu=eu/Js*Ks,gu=Math.cos(lu);au.x=Zs*(2+gu)*.5*ru,au.y=Zs*(2+gu)*su*.5,au.z=Zs*Math.sin(lu)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(ca,ga,_s,Ss,Ms){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:ca,tube:ga,radialSegments:_s,tubularSegments:Ss,arc:Ms},this.fromBufferGeometry(new TorusBufferGeometry(ca,ga,_s,Ss,Ms)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(ca,ga,_s,Ss,Ms){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:ca,tube:ga,radialSegments:_s,tubularSegments:Ss,arc:Ms},ca=ca||1,ga=ga||.4,_s=Math.floor(_s)||8,Ss=Math.floor(Ss)||6,Ms=Ms||Math.PI*2;var Cs=[],Ts=[],Bs=[],Ps=[],Ls=new Vector3,Rs=new Vector3,Ds=new Vector3,$s,Fs;for($s=0;$s<=_s;$s++)for(Fs=0;Fs<=Ss;Fs++){var Gs=Fs/Ss*Ms,Vs=$s/_s*Math.PI*2;Rs.x=(ca+ga*Math.cos(Vs))*Math.cos(Gs),Rs.y=(ca+ga*Math.cos(Vs))*Math.sin(Gs),Rs.z=ga*Math.sin(Vs),Ts.push(Rs.x,Rs.y,Rs.z),Ls.x=ca*Math.cos(Gs),Ls.y=ca*Math.sin(Gs),Ds.subVectors(Rs,Ls).normalize(),Bs.push(Ds.x,Ds.y,Ds.z),Ps.push(Fs/Ss),Ps.push($s/_s)}for($s=1;$s<=_s;$s++)for(Fs=1;Fs<=Ss;Fs++){var ks=(Ss+1)*$s+Fs-1,Os=(Ss+1)*($s-1)+Fs-1,Ns=(Ss+1)*($s-1)+Fs,Us=(Ss+1)*$s+Fs;Cs.push(ks,Os,Us),Cs.push(Os,Ns,Us)}this.setIndex(Cs),this.setAttribute("position",new Float32BufferAttribute(Ts,3)),this.setAttribute("normal",new Float32BufferAttribute(Bs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ps,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(ca,ga,_s){_s=_s||2;var Ss=ga&&ga.length,Ms=Ss?ga[0]*_s:ca.length,Cs=linkedList(ca,0,Ms,_s,!0),Ts=[];if(!Cs||Cs.next===Cs.prev)return Ts;var Bs,Ps,Ls,Rs,Ds,$s,Fs;if(Ss&&(Cs=eliminateHoles(ca,ga,Cs,_s)),ca.length>80*_s){Bs=Ls=ca[0],Ps=Rs=ca[1];for(var Gs=_s;Gs<Ms;Gs+=_s)Ds=ca[Gs],$s=ca[Gs+1],Ds<Bs&&(Bs=Ds),$s<Ps&&(Ps=$s),Ds>Ls&&(Ls=Ds),$s>Rs&&(Rs=$s);Fs=Math.max(Ls-Bs,Rs-Ps),Fs=Fs!==0?1/Fs:0}return earcutLinked(Cs,Ts,_s,Bs,Ps,Fs),Ts}};function linkedList(ca,ga,_s,Ss,Ms){var Cs,Ts;if(Ms===signedArea(ca,ga,_s,Ss)>0)for(Cs=ga;Cs<_s;Cs+=Ss)Ts=insertNode(Cs,ca[Cs],ca[Cs+1],Ts);else for(Cs=_s-Ss;Cs>=ga;Cs-=Ss)Ts=insertNode(Cs,ca[Cs],ca[Cs+1],Ts);return Ts&&equals(Ts,Ts.next)&&(removeNode(Ts),Ts=Ts.next),Ts}function filterPoints(ca,ga){if(!ca)return ca;ga||(ga=ca);var _s=ca,Ss;do if(Ss=!1,!_s.steiner&&(equals(_s,_s.next)||area(_s.prev,_s,_s.next)===0)){if(removeNode(_s),_s=ga=_s.prev,_s===_s.next)break;Ss=!0}else _s=_s.next;while(Ss||_s!==ga);return ga}function earcutLinked(ca,ga,_s,Ss,Ms,Cs,Ts){if(!!ca){!Ts&&Cs&&indexCurve(ca,Ss,Ms,Cs);for(var Bs=ca,Ps,Ls;ca.prev!==ca.next;){if(Ps=ca.prev,Ls=ca.next,Cs?isEarHashed(ca,Ss,Ms,Cs):isEar(ca)){ga.push(Ps.i/_s),ga.push(ca.i/_s),ga.push(Ls.i/_s),removeNode(ca),ca=Ls.next,Bs=Ls.next;continue}if(ca=Ls,ca===Bs){Ts?Ts===1?(ca=cureLocalIntersections(filterPoints(ca),ga,_s),earcutLinked(ca,ga,_s,Ss,Ms,Cs,2)):Ts===2&&splitEarcut(ca,ga,_s,Ss,Ms,Cs):earcutLinked(filterPoints(ca),ga,_s,Ss,Ms,Cs,1);break}}}}function isEar(ca){var ga=ca.prev,_s=ca,Ss=ca.next;if(area(ga,_s,Ss)>=0)return!1;for(var Ms=ca.next.next;Ms!==ca.prev;){if(pointInTriangle(ga.x,ga.y,_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y)&&area(Ms.prev,Ms,Ms.next)>=0)return!1;Ms=Ms.next}return!0}function isEarHashed(ca,ga,_s,Ss){var Ms=ca.prev,Cs=ca,Ts=ca.next;if(area(Ms,Cs,Ts)>=0)return!1;for(var Bs=Ms.x<Cs.x?Ms.x<Ts.x?Ms.x:Ts.x:Cs.x<Ts.x?Cs.x:Ts.x,Ps=Ms.y<Cs.y?Ms.y<Ts.y?Ms.y:Ts.y:Cs.y<Ts.y?Cs.y:Ts.y,Ls=Ms.x>Cs.x?Ms.x>Ts.x?Ms.x:Ts.x:Cs.x>Ts.x?Cs.x:Ts.x,Rs=Ms.y>Cs.y?Ms.y>Ts.y?Ms.y:Ts.y:Cs.y>Ts.y?Cs.y:Ts.y,Ds=zOrder(Bs,Ps,ga,_s,Ss),$s=zOrder(Ls,Rs,ga,_s,Ss),Fs=ca.prevZ,Gs=ca.nextZ;Fs&&Fs.z>=Ds&&Gs&&Gs.z<=$s;){if(Fs!==ca.prev&&Fs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Fs.x,Fs.y)&&area(Fs.prev,Fs,Fs.next)>=0||(Fs=Fs.prevZ,Gs!==ca.prev&&Gs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Gs.x,Gs.y)&&area(Gs.prev,Gs,Gs.next)>=0))return!1;Gs=Gs.nextZ}for(;Fs&&Fs.z>=Ds;){if(Fs!==ca.prev&&Fs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Fs.x,Fs.y)&&area(Fs.prev,Fs,Fs.next)>=0)return!1;Fs=Fs.prevZ}for(;Gs&&Gs.z<=$s;){if(Gs!==ca.prev&&Gs!==ca.next&&pointInTriangle(Ms.x,Ms.y,Cs.x,Cs.y,Ts.x,Ts.y,Gs.x,Gs.y)&&area(Gs.prev,Gs,Gs.next)>=0)return!1;Gs=Gs.nextZ}return!0}function cureLocalIntersections(ca,ga,_s){var Ss=ca;do{var Ms=Ss.prev,Cs=Ss.next.next;!equals(Ms,Cs)&&intersects(Ms,Ss,Ss.next,Cs)&&locallyInside(Ms,Cs)&&locallyInside(Cs,Ms)&&(ga.push(Ms.i/_s),ga.push(Ss.i/_s),ga.push(Cs.i/_s),removeNode(Ss),removeNode(Ss.next),Ss=ca=Cs),Ss=Ss.next}while(Ss!==ca);return filterPoints(Ss)}function splitEarcut(ca,ga,_s,Ss,Ms,Cs){var Ts=ca;do{for(var Bs=Ts.next.next;Bs!==Ts.prev;){if(Ts.i!==Bs.i&&isValidDiagonal(Ts,Bs)){var Ps=splitPolygon(Ts,Bs);Ts=filterPoints(Ts,Ts.next),Ps=filterPoints(Ps,Ps.next),earcutLinked(Ts,ga,_s,Ss,Ms,Cs),earcutLinked(Ps,ga,_s,Ss,Ms,Cs);return}Bs=Bs.next}Ts=Ts.next}while(Ts!==ca)}function eliminateHoles(ca,ga,_s,Ss){var Ms=[],Cs,Ts,Bs,Ps,Ls;for(Cs=0,Ts=ga.length;Cs<Ts;Cs++)Bs=ga[Cs]*Ss,Ps=Cs<Ts-1?ga[Cs+1]*Ss:ca.length,Ls=linkedList(ca,Bs,Ps,Ss,!1),Ls===Ls.next&&(Ls.steiner=!0),Ms.push(getLeftmost(Ls));for(Ms.sort(compareX),Cs=0;Cs<Ms.length;Cs++)eliminateHole(Ms[Cs],_s),_s=filterPoints(_s,_s.next);return _s}function compareX(ca,ga){return ca.x-ga.x}function eliminateHole(ca,ga){if(ga=findHoleBridge(ca,ga),ga){var _s=splitPolygon(ga,ca);filterPoints(ga,ga.next),filterPoints(_s,_s.next)}}function findHoleBridge(ca,ga){var _s=ga,Ss=ca.x,Ms=ca.y,Cs=-1/0,Ts;do{if(Ms<=_s.y&&Ms>=_s.next.y&&_s.next.y!==_s.y){var Bs=_s.x+(Ms-_s.y)*(_s.next.x-_s.x)/(_s.next.y-_s.y);if(Bs<=Ss&&Bs>Cs){if(Cs=Bs,Bs===Ss){if(Ms===_s.y)return _s;if(Ms===_s.next.y)return _s.next}Ts=_s.x<_s.next.x?_s:_s.next}}_s=_s.next}while(_s!==ga);if(!Ts)return null;if(Ss===Cs)return Ts;var Ps=Ts,Ls=Ts.x,Rs=Ts.y,Ds=1/0,$s;_s=Ts;do Ss>=_s.x&&_s.x>=Ls&&Ss!==_s.x&&pointInTriangle(Ms<Rs?Ss:Cs,Ms,Ls,Rs,Ms<Rs?Cs:Ss,Ms,_s.x,_s.y)&&($s=Math.abs(Ms-_s.y)/(Ss-_s.x),locallyInside(_s,ca)&&($s<Ds||$s===Ds&&(_s.x>Ts.x||_s.x===Ts.x&&sectorContainsSector(Ts,_s)))&&(Ts=_s,Ds=$s)),_s=_s.next;while(_s!==Ps);return Ts}function sectorContainsSector(ca,ga){return area(ca.prev,ca,ga.prev)<0&&area(ga.next,ca,ca.next)<0}function indexCurve(ca,ga,_s,Ss){var Ms=ca;do Ms.z===null&&(Ms.z=zOrder(Ms.x,Ms.y,ga,_s,Ss)),Ms.prevZ=Ms.prev,Ms.nextZ=Ms.next,Ms=Ms.next;while(Ms!==ca);Ms.prevZ.nextZ=null,Ms.prevZ=null,sortLinked(Ms)}function sortLinked(ca){var ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls=1;do{for(_s=ca,ca=null,Cs=null,Ts=0;_s;){for(Ts++,Ss=_s,Bs=0,ga=0;ga<Ls&&(Bs++,Ss=Ss.nextZ,!!Ss);ga++);for(Ps=Ls;Bs>0||Ps>0&&Ss;)Bs!==0&&(Ps===0||!Ss||_s.z<=Ss.z)?(Ms=_s,_s=_s.nextZ,Bs--):(Ms=Ss,Ss=Ss.nextZ,Ps--),Cs?Cs.nextZ=Ms:ca=Ms,Ms.prevZ=Cs,Cs=Ms;_s=Ss}Cs.nextZ=null,Ls*=2}while(Ts>1);return ca}function zOrder(ca,ga,_s,Ss,Ms){return ca=32767*(ca-_s)*Ms,ga=32767*(ga-Ss)*Ms,ca=(ca|ca<<8)&16711935,ca=(ca|ca<<4)&252645135,ca=(ca|ca<<2)&858993459,ca=(ca|ca<<1)&1431655765,ga=(ga|ga<<8)&16711935,ga=(ga|ga<<4)&252645135,ga=(ga|ga<<2)&858993459,ga=(ga|ga<<1)&1431655765,ca|ga<<1}function getLeftmost(ca){var ga=ca,_s=ca;do(ga.x<_s.x||ga.x===_s.x&&ga.y<_s.y)&&(_s=ga),ga=ga.next;while(ga!==ca);return _s}function pointInTriangle(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){return(Ms-Ts)*(ga-Bs)-(ca-Ts)*(Cs-Bs)>=0&&(ca-Ts)*(Ss-Bs)-(_s-Ts)*(ga-Bs)>=0&&(_s-Ts)*(Cs-Bs)-(Ms-Ts)*(Ss-Bs)>=0}function isValidDiagonal(ca,ga){return ca.next.i!==ga.i&&ca.prev.i!==ga.i&&!intersectsPolygon(ca,ga)&&(locallyInside(ca,ga)&&locallyInside(ga,ca)&&middleInside(ca,ga)&&(area(ca.prev,ca,ga.prev)||area(ca,ga.prev,ga))||equals(ca,ga)&&area(ca.prev,ca,ca.next)>0&&area(ga.prev,ga,ga.next)>0)}function area(ca,ga,_s){return(ga.y-ca.y)*(_s.x-ga.x)-(ga.x-ca.x)*(_s.y-ga.y)}function equals(ca,ga){return ca.x===ga.x&&ca.y===ga.y}function intersects(ca,ga,_s,Ss){var Ms=sign(area(ca,ga,_s)),Cs=sign(area(ca,ga,Ss)),Ts=sign(area(_s,Ss,ca)),Bs=sign(area(_s,Ss,ga));return!!(Ms!==Cs&&Ts!==Bs||Ms===0&&onSegment(ca,_s,ga)||Cs===0&&onSegment(ca,Ss,ga)||Ts===0&&onSegment(_s,ca,Ss)||Bs===0&&onSegment(_s,ga,Ss))}function onSegment(ca,ga,_s){return ga.x<=Math.max(ca.x,_s.x)&&ga.x>=Math.min(ca.x,_s.x)&&ga.y<=Math.max(ca.y,_s.y)&&ga.y>=Math.min(ca.y,_s.y)}function sign(ca){return ca>0?1:ca<0?-1:0}function intersectsPolygon(ca,ga){var _s=ca;do{if(_s.i!==ca.i&&_s.next.i!==ca.i&&_s.i!==ga.i&&_s.next.i!==ga.i&&intersects(_s,_s.next,ca,ga))return!0;_s=_s.next}while(_s!==ca);return!1}function locallyInside(ca,ga){return area(ca.prev,ca,ca.next)<0?area(ca,ga,ca.next)>=0&&area(ca,ca.prev,ga)>=0:area(ca,ga,ca.prev)<0||area(ca,ca.next,ga)<0}function middleInside(ca,ga){var _s=ca,Ss=!1,Ms=(ca.x+ga.x)/2,Cs=(ca.y+ga.y)/2;do _s.y>Cs!=_s.next.y>Cs&&_s.next.y!==_s.y&&Ms<(_s.next.x-_s.x)*(Cs-_s.y)/(_s.next.y-_s.y)+_s.x&&(Ss=!Ss),_s=_s.next;while(_s!==ca);return Ss}function splitPolygon(ca,ga){var _s=new Node(ca.i,ca.x,ca.y),Ss=new Node(ga.i,ga.x,ga.y),Ms=ca.next,Cs=ga.prev;return ca.next=ga,ga.prev=ca,_s.next=Ms,Ms.prev=_s,Ss.next=_s,_s.prev=Ss,Cs.next=Ss,Ss.prev=Cs,Ss}function insertNode(ca,ga,_s,Ss){var Ms=new Node(ca,ga,_s);return Ss?(Ms.next=Ss.next,Ms.prev=Ss,Ss.next.prev=Ms,Ss.next=Ms):(Ms.prev=Ms,Ms.next=Ms),Ms}function removeNode(ca){ca.next.prev=ca.prev,ca.prev.next=ca.next,ca.prevZ&&(ca.prevZ.nextZ=ca.nextZ),ca.nextZ&&(ca.nextZ.prevZ=ca.prevZ)}function Node(ca,ga,_s){this.i=ca,this.x=ga,this.y=_s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ca,ga,_s,Ss){for(var Ms=0,Cs=ga,Ts=_s-Ss;Cs<_s;Cs+=Ss)Ms+=(ca[Ts]-ca[Cs])*(ca[Cs+1]+ca[Ts+1]),Ts=Cs;return Ms}var ShapeUtils={area:function(ca){for(var ga=ca.length,_s=0,Ss=ga-1,Ms=0;Ms<ga;Ss=Ms++)_s+=ca[Ss].x*ca[Ms].y-ca[Ms].x*ca[Ss].y;return _s*.5},isClockWise:function(ca){return ShapeUtils.area(ca)<0},triangulateShape:function(ca,ga){var _s=[],Ss=[],Ms=[];removeDupEndPts(ca),addContour(_s,ca);var Cs=ca.length;ga.forEach(removeDupEndPts);for(var Ts=0;Ts<ga.length;Ts++)Ss.push(Cs),Cs+=ga[Ts].length,addContour(_s,ga[Ts]);for(var Bs=Earcut.triangulate(_s,Ss),Ts=0;Ts<Bs.length;Ts+=3)Ms.push(Bs.slice(Ts,Ts+3));return Ms}};function removeDupEndPts(ca){var ga=ca.length;ga>2&&ca[ga-1].equals(ca[0])&&ca.pop()}function addContour(ca,ga){for(var _s=0;_s<ga.length;_s++)ca.push(ga[_s].x),ca.push(ga[_s].y)}function ExtrudeGeometry(ca,ga){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:ca,options:ga},this.fromBufferGeometry(new ExtrudeBufferGeometry(ca,ga)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes,_s=this.parameters.options;return toJSON(ga,_s,ca)};function ExtrudeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:ca,options:ga},ca=Array.isArray(ca)?ca:[ca];for(var _s=this,Ss=[],Ms=[],Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Bs=ca[Cs];Ps(Bs)}this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("uv",new Float32BufferAttribute(Ms,2)),this.computeVertexNormals();function Ps(Ls){var Rs=[],Ds=ga.curveSegments!==void 0?ga.curveSegments:12,$s=ga.steps!==void 0?ga.steps:1,Fs=ga.depth!==void 0?ga.depth:100,Gs=ga.bevelEnabled!==void 0?ga.bevelEnabled:!0,Vs=ga.bevelThickness!==void 0?ga.bevelThickness:6,ks=ga.bevelSize!==void 0?ga.bevelSize:Vs-2,Os=ga.bevelOffset!==void 0?ga.bevelOffset:0,Ns=ga.bevelSegments!==void 0?ga.bevelSegments:3,Us=ga.extrudePath,Hs=ga.UVGenerator!==void 0?ga.UVGenerator:WorldUVGenerator;ga.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Fs=ga.amount);var zs,js=!1,Ws,Qs,qs,tu;Us&&(zs=Us.getSpacedPoints($s),js=!0,Gs=!1,Ws=Us.computeFrenetFrames($s,!1),Qs=new Vector3,qs=new Vector3,tu=new Vector3),Gs||(Ns=0,Vs=0,ks=0,Os=0);var Ys,Ks,Js,eu=Ls.extractPoints(Ds),Zs=eu.shape,au=eu.holes,ru=!ShapeUtils.isClockWise(Zs);if(ru)for(Zs=Zs.reverse(),Ks=0,Js=au.length;Ks<Js;Ks++)Ys=au[Ks],ShapeUtils.isClockWise(Ys)&&(au[Ks]=Ys.reverse());var su=ShapeUtils.triangulateShape(Zs,au),lu=Zs;for(Ks=0,Js=au.length;Ks<Js;Ks++)Ys=au[Ks],Zs=Zs.concat(Ys);function gu(Ou,Uu,$u){return Uu||console.error("THREE.ExtrudeGeometry: vec does not exist"),Uu.clone().multiplyScalar($u).add(Ou)}var hu,wu,Mu,du,vu,pu=Zs.length,yu,Su=su.length;function Tu(Ou,Uu,$u){var Hu,fu,ku,Vu=Ou.x-Uu.x,nl=Ou.y-Uu.y,Gu=$u.x-Ou.x,ol=$u.y-Ou.y,sl=Vu*Vu+nl*nl,ul=Vu*ol-nl*Gu;if(Math.abs(ul)>Number.EPSILON){var ml=Math.sqrt(sl),al=Math.sqrt(Gu*Gu+ol*ol),dl=Uu.x-nl/ml,vl=Uu.y+Vu/ml,pl=$u.x-ol/al,gl=$u.y+Gu/al,bl=((pl-dl)*ol-(gl-vl)*Gu)/(Vu*ol-nl*Gu);Hu=dl+Vu*bl-Ou.x,fu=vl+nl*bl-Ou.y;var wl=Hu*Hu+fu*fu;if(wl<=2)return new Vector2(Hu,fu);ku=Math.sqrt(wl/2)}else{var iu=!1;Vu>Number.EPSILON?Gu>Number.EPSILON&&(iu=!0):Vu<-Number.EPSILON?Gu<-Number.EPSILON&&(iu=!0):Math.sign(nl)===Math.sign(ol)&&(iu=!0),iu?(Hu=-nl,fu=Vu,ku=Math.sqrt(sl)):(Hu=Vu,fu=nl,ku=Math.sqrt(sl/2))}return new Vector2(Hu/ku,fu/ku)}for(var bu=[],Au=0,Bu=lu.length,Lu=Bu-1,Qu=Au+1;Au<Bu;Au++,Lu++,Qu++)Lu===Bu&&(Lu=0),Qu===Bu&&(Qu=0),bu[Au]=Tu(lu[Au],lu[Lu],lu[Qu]);var Nu=[],ju,nu=bu.concat();for(Ks=0,Js=au.length;Ks<Js;Ks++){for(Ys=au[Ks],ju=[],Au=0,Bu=Ys.length,Lu=Bu-1,Qu=Au+1;Au<Bu;Au++,Lu++,Qu++)Lu===Bu&&(Lu=0),Qu===Bu&&(Qu=0),ju[Au]=Tu(Ys[Au],Ys[Lu],Ys[Qu]);Nu.push(ju),nu=nu.concat(ju)}for(hu=0;hu<Ns;hu++){for(Mu=hu/Ns,du=Vs*Math.cos(Mu*Math.PI/2),wu=ks*Math.sin(Mu*Math.PI/2)+Os,Au=0,Bu=lu.length;Au<Bu;Au++)vu=gu(lu[Au],bu[Au],wu),Fu(vu.x,vu.y,-du);for(Ks=0,Js=au.length;Ks<Js;Ks++)for(Ys=au[Ks],ju=Nu[Ks],Au=0,Bu=Ys.length;Au<Bu;Au++)vu=gu(Ys[Au],ju[Au],wu),Fu(vu.x,vu.y,-du)}for(wu=ks+Os,Au=0;Au<pu;Au++)vu=Gs?gu(Zs[Au],nu[Au],wu):Zs[Au],js?(qs.copy(Ws.normals[0]).multiplyScalar(vu.x),Qs.copy(Ws.binormals[0]).multiplyScalar(vu.y),tu.copy(zs[0]).add(qs).add(Qs),Fu(tu.x,tu.y,tu.z)):Fu(vu.x,vu.y,0);var uu;for(uu=1;uu<=$s;uu++)for(Au=0;Au<pu;Au++)vu=Gs?gu(Zs[Au],nu[Au],wu):Zs[Au],js?(qs.copy(Ws.normals[uu]).multiplyScalar(vu.x),Qs.copy(Ws.binormals[uu]).multiplyScalar(vu.y),tu.copy(zs[uu]).add(qs).add(Qs),Fu(tu.x,tu.y,tu.z)):Fu(vu.x,vu.y,Fs/$s*uu);for(hu=Ns-1;hu>=0;hu--){for(Mu=hu/Ns,du=Vs*Math.cos(Mu*Math.PI/2),wu=ks*Math.sin(Mu*Math.PI/2)+Os,Au=0,Bu=lu.length;Au<Bu;Au++)vu=gu(lu[Au],bu[Au],wu),Fu(vu.x,vu.y,Fs+du);for(Ks=0,Js=au.length;Ks<Js;Ks++)for(Ys=au[Ks],ju=Nu[Ks],Au=0,Bu=Ys.length;Au<Bu;Au++)vu=gu(Ys[Au],ju[Au],wu),js?Fu(vu.x,vu.y+zs[$s-1].y,zs[$s-1].x+du):Fu(vu.x,vu.y,Fs+du)}Pu(),Iu();function Pu(){var Ou=Ss.length/3;if(Gs){var Uu=0,$u=pu*Uu;for(Au=0;Au<Su;Au++)yu=su[Au],Ru(yu[2]+$u,yu[1]+$u,yu[0]+$u);for(Uu=$s+Ns*2,$u=pu*Uu,Au=0;Au<Su;Au++)yu=su[Au],Ru(yu[0]+$u,yu[1]+$u,yu[2]+$u)}else{for(Au=0;Au<Su;Au++)yu=su[Au],Ru(yu[2],yu[1],yu[0]);for(Au=0;Au<Su;Au++)yu=su[Au],Ru(yu[0]+pu*$s,yu[1]+pu*$s,yu[2]+pu*$s)}_s.addGroup(Ou,Ss.length/3-Ou,0)}function Iu(){var Ou=Ss.length/3,Uu=0;for(Ku(lu,Uu),Uu+=lu.length,Ks=0,Js=au.length;Ks<Js;Ks++)Ys=au[Ks],Ku(Ys,Uu),Uu+=Ys.length;_s.addGroup(Ou,Ss.length/3-Ou,1)}function Ku(Ou,Uu){var $u,Hu;for(Au=Ou.length;--Au>=0;){$u=Au,Hu=Au-1,Hu<0&&(Hu=Ou.length-1);var fu=0,ku=$s+Ns*2;for(fu=0;fu<ku;fu++){var Vu=pu*fu,nl=pu*(fu+1),Gu=Uu+$u+Vu,ol=Uu+Hu+Vu,sl=Uu+Hu+nl,ul=Uu+$u+nl;il(Gu,ol,sl,ul)}}}function Fu(Ou,Uu,$u){Rs.push(Ou),Rs.push(Uu),Rs.push($u)}function Ru(Ou,Uu,$u){Ju(Ou),Ju(Uu),Ju($u);var Hu=Ss.length/3,fu=Hs.generateTopUV(_s,Ss,Hu-3,Hu-2,Hu-1);Xu(fu[0]),Xu(fu[1]),Xu(fu[2])}function il(Ou,Uu,$u,Hu){Ju(Ou),Ju(Uu),Ju(Hu),Ju(Uu),Ju($u),Ju(Hu);var fu=Ss.length/3,ku=Hs.generateSideWallUV(_s,Ss,fu-6,fu-3,fu-2,fu-1);Xu(ku[0]),Xu(ku[1]),Xu(ku[3]),Xu(ku[1]),Xu(ku[2]),Xu(ku[3])}function Ju(Ou){Ss.push(Rs[Ou*3+0]),Ss.push(Rs[Ou*3+1]),Ss.push(Rs[Ou*3+2])}function Xu(Ou){Ms.push(Ou.x),Ms.push(Ou.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes,_s=this.parameters.options;return toJSON(ga,_s,ca)};var WorldUVGenerator={generateTopUV:function(ca,ga,_s,Ss,Ms){var Cs=ga[_s*3],Ts=ga[_s*3+1],Bs=ga[Ss*3],Ps=ga[Ss*3+1],Ls=ga[Ms*3],Rs=ga[Ms*3+1];return[new Vector2(Cs,Ts),new Vector2(Bs,Ps),new Vector2(Ls,Rs)]},generateSideWallUV:function(ca,ga,_s,Ss,Ms,Cs){var Ts=ga[_s*3],Bs=ga[_s*3+1],Ps=ga[_s*3+2],Ls=ga[Ss*3],Rs=ga[Ss*3+1],Ds=ga[Ss*3+2],$s=ga[Ms*3],Fs=ga[Ms*3+1],Gs=ga[Ms*3+2],Vs=ga[Cs*3],ks=ga[Cs*3+1],Os=ga[Cs*3+2];return Math.abs(Bs-Rs)<.01?[new Vector2(Ts,1-Ps),new Vector2(Ls,1-Ds),new Vector2($s,1-Gs),new Vector2(Vs,1-Os)]:[new Vector2(Bs,1-Ps),new Vector2(Rs,1-Ds),new Vector2(Fs,1-Gs),new Vector2(ks,1-Os)]}};function toJSON(ca,ga,_s){if(_s.shapes=[],Array.isArray(ca))for(var Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Cs=ca[Ss];_s.shapes.push(Cs.uuid)}else _s.shapes.push(ca.uuid);return ga.extrudePath!==void 0&&(_s.options.extrudePath=ga.extrudePath.toJSON()),_s}function TextGeometry(ca,ga){Geometry.call(this),this.type="TextGeometry",this.parameters={text:ca,parameters:ga},this.fromBufferGeometry(new TextBufferGeometry(ca,ga)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(ca,ga){ga=ga||{};var _s=ga.font;if(!(_s&&_s.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Ss=_s.generateShapes(ca,ga.size);ga.depth=ga.height!==void 0?ga.height:50,ga.bevelThickness===void 0&&(ga.bevelThickness=10),ga.bevelSize===void 0&&(ga.bevelSize=8),ga.bevelEnabled===void 0&&(ga.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Ss,ga),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},this.fromBufferGeometry(new SphereBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:_s,phiStart:Ss,phiLength:Ms,thetaStart:Cs,thetaLength:Ts},ca=ca||1,ga=Math.max(3,Math.floor(ga)||8),_s=Math.max(2,Math.floor(_s)||6),Ss=Ss!==void 0?Ss:0,Ms=Ms!==void 0?Ms:Math.PI*2,Cs=Cs!==void 0?Cs:0,Ts=Ts!==void 0?Ts:Math.PI;var Bs=Math.min(Cs+Ts,Math.PI),Ps,Ls,Rs=0,Ds=[],$s=new Vector3,Fs=new Vector3,Gs=[],Vs=[],ks=[],Os=[];for(Ls=0;Ls<=_s;Ls++){var Ns=[],Us=Ls/_s,Hs=0;for(Ls==0&&Cs==0?Hs=.5/ga:Ls==_s&&Bs==Math.PI&&(Hs=-.5/ga),Ps=0;Ps<=ga;Ps++){var zs=Ps/ga;$s.x=-ca*Math.cos(Ss+zs*Ms)*Math.sin(Cs+Us*Ts),$s.y=ca*Math.cos(Cs+Us*Ts),$s.z=ca*Math.sin(Ss+zs*Ms)*Math.sin(Cs+Us*Ts),Vs.push($s.x,$s.y,$s.z),Fs.copy($s).normalize(),ks.push(Fs.x,Fs.y,Fs.z),Os.push(zs+Hs,1-Us),Ns.push(Rs++)}Ds.push(Ns)}for(Ls=0;Ls<_s;Ls++)for(Ps=0;Ps<ga;Ps++){var js=Ds[Ls][Ps+1],Ws=Ds[Ls][Ps],Qs=Ds[Ls+1][Ps],qs=Ds[Ls+1][Ps+1];(Ls!==0||Cs>0)&&Gs.push(js,Ws,qs),(Ls!==_s-1||Bs<Math.PI)&&Gs.push(Ws,Qs,qs)}this.setIndex(Gs),this.setAttribute("position",new Float32BufferAttribute(Vs,3)),this.setAttribute("normal",new Float32BufferAttribute(ks,3)),this.setAttribute("uv",new Float32BufferAttribute(Os,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(ca,ga,_s,Ss,Ms,Cs){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},this.fromBufferGeometry(new RingBufferGeometry(ca,ga,_s,Ss,Ms,Cs)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(ca,ga,_s,Ss,Ms,Cs){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:_s,phiSegments:Ss,thetaStart:Ms,thetaLength:Cs},ca=ca||.5,ga=ga||1,Ms=Ms!==void 0?Ms:0,Cs=Cs!==void 0?Cs:Math.PI*2,_s=_s!==void 0?Math.max(3,_s):8,Ss=Ss!==void 0?Math.max(1,Ss):1;var Ts=[],Bs=[],Ps=[],Ls=[],Rs,Ds=ca,$s=(ga-ca)/Ss,Fs=new Vector3,Gs=new Vector2,Vs,ks;for(Vs=0;Vs<=Ss;Vs++){for(ks=0;ks<=_s;ks++)Rs=Ms+ks/_s*Cs,Fs.x=Ds*Math.cos(Rs),Fs.y=Ds*Math.sin(Rs),Bs.push(Fs.x,Fs.y,Fs.z),Ps.push(0,0,1),Gs.x=(Fs.x/ga+1)/2,Gs.y=(Fs.y/ga+1)/2,Ls.push(Gs.x,Gs.y);Ds+=$s}for(Vs=0;Vs<Ss;Vs++){var Os=Vs*(_s+1);for(ks=0;ks<_s;ks++){Rs=ks+Os;var Ns=Rs,Us=Rs+_s+1,Hs=Rs+_s+2,zs=Rs+1;Ts.push(Ns,Us,zs),Ts.push(Us,Hs,zs)}}this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Bs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ps,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:ca,segments:ga,phiStart:_s,phiLength:Ss},this.fromBufferGeometry(new LatheBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:ca,segments:ga,phiStart:_s,phiLength:Ss},ga=Math.floor(ga)||12,_s=_s||0,Ss=Ss||Math.PI*2,Ss=MathUtils.clamp(Ss,0,Math.PI*2);var Ms=[],Cs=[],Ts=[],Bs,Ps=1/ga,Ls=new Vector3,Rs=new Vector2,Ds,$s;for(Ds=0;Ds<=ga;Ds++){var Fs=_s+Ds*Ps*Ss,Gs=Math.sin(Fs),Vs=Math.cos(Fs);for($s=0;$s<=ca.length-1;$s++)Ls.x=ca[$s].x*Gs,Ls.y=ca[$s].y,Ls.z=ca[$s].x*Vs,Cs.push(Ls.x,Ls.y,Ls.z),Rs.x=Ds/ga,Rs.y=$s/(ca.length-1),Ts.push(Rs.x,Rs.y)}for(Ds=0;Ds<ga;Ds++)for($s=0;$s<ca.length-1;$s++){Bs=$s+Ds*ca.length;var ks=Bs,Os=Bs+ca.length,Ns=Bs+ca.length+1,Us=Bs+1;Ms.push(ks,Os,Us),Ms.push(Os,Ns,Us)}if(this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2)),this.computeVertexNormals(),Ss===Math.PI*2){var Hs=this.attributes.normal.array,zs=new Vector3,js=new Vector3,Ws=new Vector3;for(Bs=ga*ca.length*3,Ds=0,$s=0;Ds<ca.length;Ds++,$s+=3)zs.x=Hs[$s+0],zs.y=Hs[$s+1],zs.z=Hs[$s+2],js.x=Hs[Bs+$s+0],js.y=Hs[Bs+$s+1],js.z=Hs[Bs+$s+2],Ws.addVectors(zs,js).normalize(),Hs[$s+0]=Hs[Bs+$s+0]=Ws.x,Hs[$s+1]=Hs[Bs+$s+1]=Ws.y,Hs[$s+2]=Hs[Bs+$s+2]=Ws.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(ca,ga){Geometry.call(this),this.type="ShapeGeometry",typeof ga=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),ga=ga.curveSegments),this.parameters={shapes:ca,curveSegments:ga},this.fromBufferGeometry(new ShapeBufferGeometry(ca,ga)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function ShapeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:ca,curveSegments:ga},ga=ga||12;var _s=[],Ss=[],Ms=[],Cs=[],Ts=0,Bs=0;if(Array.isArray(ca)===!1)Ls(ca);else for(var Ps=0;Ps<ca.length;Ps++)Ls(ca[Ps]),this.addGroup(Ts,Bs,Ps),Ts+=Bs,Bs=0;this.setIndex(_s),this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms,3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2));function Ls(Rs){var Ds,$s,Fs,Gs=Ss.length/3,Vs=Rs.extractPoints(ga),ks=Vs.shape,Os=Vs.holes;for(ShapeUtils.isClockWise(ks)===!1&&(ks=ks.reverse()),Ds=0,$s=Os.length;Ds<$s;Ds++)Fs=Os[Ds],ShapeUtils.isClockWise(Fs)===!0&&(Os[Ds]=Fs.reverse());var Ns=ShapeUtils.triangulateShape(ks,Os);for(Ds=0,$s=Os.length;Ds<$s;Ds++)Fs=Os[Ds],ks=ks.concat(Fs);for(Ds=0,$s=ks.length;Ds<$s;Ds++){var Us=ks[Ds];Ss.push(Us.x,Us.y,0),Ms.push(0,0,1),Cs.push(Us.x,Us.y)}for(Ds=0,$s=Ns.length;Ds<$s;Ds++){var Hs=Ns[Ds],zs=Hs[0]+Gs,js=Hs[1]+Gs,Ws=Hs[2]+Gs;_s.push(zs,js,Ws),Bs+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function toJSON$1(ca,ga){if(ga.shapes=[],Array.isArray(ca))for(var _s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.shapes.push(Ms.uuid)}else ga.shapes.push(ca.uuid);return ga}function EdgesGeometry(ca,ga){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:ga},ga=ga!==void 0?ga:1;var _s=[],Ss=Math.cos(MathUtils.DEG2RAD*ga),Ms=[0,0],Cs={},Ts,Bs,Ps,Ls=["a","b","c"],Rs;ca.isBufferGeometry?(Rs=new Geometry,Rs.fromBufferGeometry(ca)):Rs=ca.clone(),Rs.mergeVertices(),Rs.computeFaceNormals();for(var Ds=Rs.vertices,$s=Rs.faces,Fs=0,Gs=$s.length;Fs<Gs;Fs++)for(var Vs=$s[Fs],ks=0;ks<3;ks++)Ts=Vs[Ls[ks]],Bs=Vs[Ls[(ks+1)%3]],Ms[0]=Math.min(Ts,Bs),Ms[1]=Math.max(Ts,Bs),Ps=Ms[0]+","+Ms[1],Cs[Ps]===void 0?Cs[Ps]={index1:Ms[0],index2:Ms[1],face1:Fs,face2:void 0}:Cs[Ps].face2=Fs;for(Ps in Cs){var Os=Cs[Ps];if(Os.face2===void 0||$s[Os.face1].normal.dot($s[Os.face2].normal)<=Ss){var Ns=Ds[Os.index1];_s.push(Ns.x,Ns.y,Ns.z),Ns=Ds[Os.index2],_s.push(Ns.x,Ns.y,Ns.z)}}this.setAttribute("position",new Float32BufferAttribute(_s,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Bs},this.fromBufferGeometry(new CylinderBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Bs)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:_s,radialSegments:Ss,heightSegments:Ms,openEnded:Cs,thetaStart:Ts,thetaLength:Bs};var Ps=this;ca=ca!==void 0?ca:1,ga=ga!==void 0?ga:1,_s=_s||1,Ss=Math.floor(Ss)||8,Ms=Math.floor(Ms)||1,Cs=Cs!==void 0?Cs:!1,Ts=Ts!==void 0?Ts:0,Bs=Bs!==void 0?Bs:Math.PI*2;var Ls=[],Rs=[],Ds=[],$s=[],Fs=0,Gs=[],Vs=_s/2,ks=0;Os(),Cs===!1&&(ca>0&&Ns(!0),ga>0&&Ns(!1)),this.setIndex(Ls),this.setAttribute("position",new Float32BufferAttribute(Rs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ds,3)),this.setAttribute("uv",new Float32BufferAttribute($s,2));function Os(){var Us,Hs,zs=new Vector3,js=new Vector3,Ws=0,Qs=(ga-ca)/_s;for(Hs=0;Hs<=Ms;Hs++){var qs=[],tu=Hs/Ms,Ys=tu*(ga-ca)+ca;for(Us=0;Us<=Ss;Us++){var Ks=Us/Ss,Js=Ks*Bs+Ts,eu=Math.sin(Js),Zs=Math.cos(Js);js.x=Ys*eu,js.y=-tu*_s+Vs,js.z=Ys*Zs,Rs.push(js.x,js.y,js.z),zs.set(eu,Qs,Zs).normalize(),Ds.push(zs.x,zs.y,zs.z),$s.push(Ks,1-tu),qs.push(Fs++)}Gs.push(qs)}for(Us=0;Us<Ss;Us++)for(Hs=0;Hs<Ms;Hs++){var au=Gs[Hs][Us],ru=Gs[Hs+1][Us],su=Gs[Hs+1][Us+1],lu=Gs[Hs][Us+1];Ls.push(au,ru,lu),Ls.push(ru,su,lu),Ws+=6}Ps.addGroup(ks,Ws,0),ks+=Ws}function Ns(Us){var Hs,zs,js,Ws=new Vector2,Qs=new Vector3,qs=0,tu=Us===!0?ca:ga,Ys=Us===!0?1:-1;for(zs=Fs,Hs=1;Hs<=Ss;Hs++)Rs.push(0,Vs*Ys,0),Ds.push(0,Ys,0),$s.push(.5,.5),Fs++;for(js=Fs,Hs=0;Hs<=Ss;Hs++){var Ks=Hs/Ss,Js=Ks*Bs+Ts,eu=Math.cos(Js),Zs=Math.sin(Js);Qs.x=tu*Zs,Qs.y=Vs*Ys,Qs.z=tu*eu,Rs.push(Qs.x,Qs.y,Qs.z),Ds.push(0,Ys,0),Ws.x=eu*.5+.5,Ws.y=Zs*.5*Ys+.5,$s.push(Ws.x,Ws.y),Fs++}for(Hs=0;Hs<Ss;Hs++){var au=zs+Hs,ru=js+Hs;Us===!0?Ls.push(ru,ru+1,au):Ls.push(ru+1,ru,au),qs+=3}Ps.addGroup(ks,qs,Us===!0?1:2),ks+=qs}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){CylinderGeometry.call(this,0,ca,ga,_s,Ss,Ms,Cs,Ts),this.type="ConeGeometry",this.parameters={radius:ca,height:ga,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(ca,ga,_s,Ss,Ms,Cs,Ts){CylinderBufferGeometry.call(this,0,ca,ga,_s,Ss,Ms,Cs,Ts),this.type="ConeBufferGeometry",this.parameters={radius:ca,height:ga,radialSegments:_s,heightSegments:Ss,openEnded:Ms,thetaStart:Cs,thetaLength:Ts}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(ca,ga,_s,Ss){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:ca,segments:ga,thetaStart:_s,thetaLength:Ss},this.fromBufferGeometry(new CircleBufferGeometry(ca,ga,_s,Ss)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(ca,ga,_s,Ss){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:ca,segments:ga,thetaStart:_s,thetaLength:Ss},ca=ca||1,ga=ga!==void 0?Math.max(3,ga):8,_s=_s!==void 0?_s:0,Ss=Ss!==void 0?Ss:Math.PI*2;var Ms=[],Cs=[],Ts=[],Bs=[],Ps,Ls,Rs=new Vector3,Ds=new Vector2;for(Cs.push(0,0,0),Ts.push(0,0,1),Bs.push(.5,.5),Ls=0,Ps=3;Ls<=ga;Ls++,Ps+=3){var $s=_s+Ls/ga*Ss;Rs.x=ca*Math.cos($s),Rs.y=ca*Math.sin($s),Cs.push(Rs.x,Rs.y,Rs.z),Ts.push(0,0,1),Ds.x=(Cs[Ps]/ca+1)/2,Ds.y=(Cs[Ps+1]/ca+1)/2,Bs.push(Ds.x,Ds.y)}for(Ps=1;Ps<=ga;Ps++)Ms.push(Ps,Ps+1,0);this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Cs,3)),this.setAttribute("normal",new Float32BufferAttribute(Ts,3)),this.setAttribute("uv",new Float32BufferAttribute(Bs,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(ca){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(ca)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this};function RawShaderMaterial(ca){ShaderMaterial.call(this,ca),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(ca){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(ca)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={STANDARD:""},this.color.copy(ca.color),this.roughness=ca.roughness,this.metalness=ca.metalness,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.roughnessMap=ca.roughnessMap,this.metalnessMap=ca.metalnessMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.envMapIntensity=ca.envMapIntensity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.vertexTangents=ca.vertexTangents,this};function MeshPhysicalMaterial(ca){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(ca)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(ca){return MeshStandardMaterial.prototype.copy.call(this,ca),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=ca.clearcoat,this.clearcoatMap=ca.clearcoatMap,this.clearcoatRoughness=ca.clearcoatRoughness,this.clearcoatRoughnessMap=ca.clearcoatRoughnessMap,this.clearcoatNormalMap=ca.clearcoatNormalMap,this.clearcoatNormalScale.copy(ca.clearcoatNormalScale),this.reflectivity=ca.reflectivity,ca.sheen?this.sheen=(this.sheen||new Color).copy(ca.sheen):this.sheen=null,this.transparency=ca.transparency,this};function MeshPhongMaterial(ca){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshToonMaterial(ca){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.gradientMap=ca.gradientMap,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshNormalMaterial(ca){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshLambertMaterial(ca){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshMatcapMaterial(ca){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={MATCAP:""},this.color.copy(ca.color),this.matcap=ca.matcap,this.map=ca.map,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.alphaMap=ca.alphaMap,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function LineDashedMaterial(ca){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(ca)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(ca){return LineBasicMaterial.prototype.copy.call(this,ca),this.scale=ca.scale,this.dashSize=ca.dashSize,this.gapSize=ca.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(ca,ga,_s){return AnimationUtils.isTypedArray(ca)?new ca.constructor(ca.subarray(ga,_s!==void 0?_s:ca.length)):ca.slice(ga,_s)},convertArray:function(ca,ga,_s){return!ca||!_s&&ca.constructor===ga?ca:typeof ga.BYTES_PER_ELEMENT=="number"?new ga(ca):Array.prototype.slice.call(ca)},isTypedArray:function(ca){return ArrayBuffer.isView(ca)&&!(ca instanceof DataView)},getKeyframeOrder:function(ca){function ga(Cs,Ts){return ca[Cs]-ca[Ts]}for(var _s=ca.length,Ss=new Array(_s),Ms=0;Ms!==_s;++Ms)Ss[Ms]=Ms;return Ss.sort(ga),Ss},sortedArray:function(ca,ga,_s){for(var Ss=ca.length,Ms=new ca.constructor(Ss),Cs=0,Ts=0;Ts!==Ss;++Cs)for(var Bs=_s[Cs]*ga,Ps=0;Ps!==ga;++Ps)Ms[Ts++]=ca[Bs+Ps];return Ms},flattenJSON:function(ca,ga,_s,Ss){for(var Ms=1,Cs=ca[0];Cs!==void 0&&Cs[Ss]===void 0;)Cs=ca[Ms++];if(Cs!==void 0){var Ts=Cs[Ss];if(Ts!==void 0)if(Array.isArray(Ts))do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),_s.push.apply(_s,Ts)),Cs=ca[Ms++];while(Cs!==void 0);else if(Ts.toArray!==void 0)do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),Ts.toArray(_s,_s.length)),Cs=ca[Ms++];while(Cs!==void 0);else do Ts=Cs[Ss],Ts!==void 0&&(ga.push(Cs.time),_s.push(Ts)),Cs=ca[Ms++];while(Cs!==void 0)}},subclip:function(ca,ga,_s,Ss,Ms){Ms=Ms||30;var Cs=ca.clone();Cs.name=ga;for(var Ts=[],Bs=0;Bs<Cs.tracks.length;++Bs){for(var Ps=Cs.tracks[Bs],Ls=Ps.getValueSize(),Rs=[],Ds=[],$s=0;$s<Ps.times.length;++$s){var Fs=Ps.times[$s]*Ms;if(!(Fs<_s||Fs>=Ss)){Rs.push(Ps.times[$s]);for(var Gs=0;Gs<Ls;++Gs)Ds.push(Ps.values[$s*Ls+Gs])}}Rs.length!==0&&(Ps.times=AnimationUtils.convertArray(Rs,Ps.times.constructor),Ps.values=AnimationUtils.convertArray(Ds,Ps.values.constructor),Ts.push(Ps))}Cs.tracks=Ts;for(var Vs=1/0,Bs=0;Bs<Cs.tracks.length;++Bs)Vs>Cs.tracks[Bs].times[0]&&(Vs=Cs.tracks[Bs].times[0]);for(var Bs=0;Bs<Cs.tracks.length;++Bs)Cs.tracks[Bs].shift(-1*Vs);return Cs.resetDuration(),Cs},makeClipAdditive:function(ca,ga,_s,Ss){ga===void 0&&(ga=0),_s===void 0&&(_s=ca),(Ss===void 0||Ss<=0)&&(Ss=30);for(var Ms=ca.tracks.length,Cs=ga/Ss,Ts=0;Ts<Ms;++Ts){var Bs=_s.tracks[Ts],Ps=Bs.ValueTypeName;if(!(Ps==="bool"||Ps==="string")){var Ls=ca.tracks.find(function(Hs){return Hs.name===Bs.name&&Hs.ValueTypeName===Ps});if(Ls!==void 0){var Rs=Bs.getValueSize(),Ds=Bs.times.length-1,$s;if(Cs<=Bs.times[0])$s=AnimationUtils.arraySlice(Bs.values,0,Bs.valueSize);else if(Cs>=Bs.times[Ds]){var Fs=Ds*Rs;$s=AnimationUtils.arraySlice(Bs.values,Fs)}else{var Gs=Bs.createInterpolant();Gs.evaluate(Cs),$s=Gs.resultBuffer}if(Ps==="quaternion"){var Vs=new Quaternion($s[0],$s[1],$s[2],$s[3]).normalize().conjugate();Vs.toArray($s)}for(var ks=Ls.times.length,Os=0;Os<ks;++Os){var Ns=Os*Rs;if(Ps==="quaternion")Quaternion.multiplyQuaternionsFlat(Ls.values,Ns,$s,0,Ls.values,Ns);else for(var Us=0;Us<Rs;++Us)Ls.values[Ns+Us]-=$s[Us]}}}}return ca.blendMode=AdditiveAnimationBlendMode,ca}};function Interpolant(ca,ga,_s,Ss){this.parameterPositions=ca,this._cachedIndex=0,this.resultBuffer=Ss!==void 0?Ss:new ga.constructor(_s),this.sampleValues=ga,this.valueSize=_s}Object.assign(Interpolant.prototype,{evaluate:function(ca){var ga=this.parameterPositions,_s=this._cachedIndex,Ss=ga[_s],Ms=ga[_s-1];e:{t:{var Cs;r:{n:if(!(ca<Ss)){for(var Ts=_s+2;;){if(Ss===void 0){if(ca<Ms)break n;return _s=ga.length,this._cachedIndex=_s,this.afterEnd_(_s-1,ca,Ms)}if(_s===Ts)break;if(Ms=Ss,Ss=ga[++_s],ca<Ss)break t}Cs=ga.length;break r}if(!(ca>=Ms)){var Bs=ga[1];ca<Bs&&(_s=2,Ms=Bs);for(var Ts=_s-2;;){if(Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,Ss);if(_s===Ts)break;if(Ss=Ms,Ms=ga[--_s-1],ca>=Ms)break t}Cs=_s,_s=0;break r}break e}for(;_s<Cs;){var Ps=_s+Cs>>>1;ca<ga[Ps]?Cs=Ps:_s=Ps+1}if(Ss=ga[_s],Ms=ga[_s-1],Ms===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,Ss);if(Ss===void 0)return _s=ga.length,this._cachedIndex=_s,this.afterEnd_(_s-1,Ms,ca)}this._cachedIndex=_s,this.intervalChanged_(_s,Ms,Ss)}return this.interpolate_(_s,Ms,ca,Ss)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(ca){for(var ga=this.resultBuffer,_s=this.sampleValues,Ss=this.valueSize,Ms=ca*Ss,Cs=0;Cs!==Ss;++Cs)ga[Cs]=_s[Ms+Cs];return ga},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(ca,ga,_s){var Ss=this.parameterPositions,Ms=ca-2,Cs=ca+1,Ts=Ss[Ms],Bs=Ss[Cs];if(Ts===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Ms=ca,Ts=2*ga-_s;break;case WrapAroundEnding:Ms=Ss.length-2,Ts=ga+Ss[Ms]-Ss[Ms+1];break;default:Ms=ca,Ts=_s}if(Bs===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Cs=ca,Bs=2*_s-ga;break;case WrapAroundEnding:Cs=1,Bs=_s+Ss[1]-Ss[0];break;default:Cs=ca-1,Bs=ga}var Ps=(_s-ga)*.5,Ls=this.valueSize;this._weightPrev=Ps/(ga-Ts),this._weightNext=Ps/(Bs-_s),this._offsetPrev=Ms*Ls,this._offsetNext=Cs*Ls},interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=ca*Ts,Ps=Bs-Ts,Ls=this._offsetPrev,Rs=this._offsetNext,Ds=this._weightPrev,$s=this._weightNext,Fs=(_s-ga)/(Ss-ga),Gs=Fs*Fs,Vs=Gs*Fs,ks=-Ds*Vs+2*Ds*Gs-Ds*Fs,Os=(1+Ds)*Vs+(-1.5-2*Ds)*Gs+(-.5+Ds)*Fs+1,Ns=(-1-$s)*Vs+(1.5+$s)*Gs+.5*Fs,Us=$s*Vs-$s*Gs,Hs=0;Hs!==Ts;++Hs)Ms[Hs]=ks*Cs[Ls+Hs]+Os*Cs[Ps+Hs]+Ns*Cs[Bs+Hs]+Us*Cs[Rs+Hs];return Ms}});function LinearInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=ca*Ts,Ps=Bs-Ts,Ls=(_s-ga)/(Ss-ga),Rs=1-Ls,Ds=0;Ds!==Ts;++Ds)Ms[Ds]=Cs[Ps+Ds]*Rs+Cs[Bs+Ds]*Ls;return Ms}});function DiscreteInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(ca){return this.copySampleValue_(ca-1)}});function KeyframeTrack(ca,ga,_s,Ss){if(ca===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(ga===void 0||ga.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+ca);this.name=ca,this.times=AnimationUtils.convertArray(ga,this.TimeBufferType),this.values=AnimationUtils.convertArray(_s,this.ValueBufferType),this.setInterpolation(Ss||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(ca){var ga=ca.constructor,_s;if(ga.toJSON!==void 0)_s=ga.toJSON(ca);else{_s={name:ca.name,times:AnimationUtils.convertArray(ca.times,Array),values:AnimationUtils.convertArray(ca.values,Array)};var Ss=ca.getInterpolation();Ss!==ca.DefaultInterpolation&&(_s.interpolation=Ss)}return _s.type=ca.ValueTypeName,_s}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(ca){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodLinear:function(ca){return new LinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:function(ca){return new CubicInterpolant(this.times,this.values,this.getValueSize(),ca)},setInterpolation:function(ca){var ga;switch(ca){case InterpolateDiscrete:ga=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:ga=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:ga=this.InterpolantFactoryMethodSmooth;break}if(ga===void 0){var _s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(ca!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(_s);return console.warn("THREE.KeyframeTrack:",_s),this}return this.createInterpolant=ga,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(ca){if(ca!==0)for(var ga=this.times,_s=0,Ss=ga.length;_s!==Ss;++_s)ga[_s]+=ca;return this},scale:function(ca){if(ca!==1)for(var ga=this.times,_s=0,Ss=ga.length;_s!==Ss;++_s)ga[_s]*=ca;return this},trim:function(ca,ga){for(var _s=this.times,Ss=_s.length,Ms=0,Cs=Ss-1;Ms!==Ss&&_s[Ms]<ca;)++Ms;for(;Cs!==-1&&_s[Cs]>ga;)--Cs;if(++Cs,Ms!==0||Cs!==Ss){Ms>=Cs&&(Cs=Math.max(Cs,1),Ms=Cs-1);var Ts=this.getValueSize();this.times=AnimationUtils.arraySlice(_s,Ms,Cs),this.values=AnimationUtils.arraySlice(this.values,Ms*Ts,Cs*Ts)}return this},validate:function(){var ca=!0,ga=this.getValueSize();ga-Math.floor(ga)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),ca=!1);var _s=this.times,Ss=this.values,Ms=_s.length;Ms===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),ca=!1);for(var Cs=null,Ts=0;Ts!==Ms;Ts++){var Bs=_s[Ts];if(typeof Bs=="number"&&isNaN(Bs)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Ts,Bs),ca=!1;break}if(Cs!==null&&Cs>Bs){console.error("THREE.KeyframeTrack: Out of order keys.",this,Ts,Bs,Cs),ca=!1;break}Cs=Bs}if(Ss!==void 0&&AnimationUtils.isTypedArray(Ss))for(var Ts=0,Ps=Ss.length;Ts!==Ps;++Ts){var Ls=Ss[Ts];if(isNaN(Ls)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Ts,Ls),ca=!1;break}}return ca},optimize:function(){for(var ca=AnimationUtils.arraySlice(this.times),ga=AnimationUtils.arraySlice(this.values),_s=this.getValueSize(),Ss=this.getInterpolation()===InterpolateSmooth,Ms=1,Cs=ca.length-1,Ts=1;Ts<Cs;++Ts){var Bs=!1,Ps=ca[Ts],Ls=ca[Ts+1];if(Ps!==Ls&&(Ts!==1||Ps!==Ps[0]))if(Ss)Bs=!0;else for(var Rs=Ts*_s,Ds=Rs-_s,$s=Rs+_s,Fs=0;Fs!==_s;++Fs){var Gs=ga[Rs+Fs];if(Gs!==ga[Ds+Fs]||Gs!==ga[$s+Fs]){Bs=!0;break}}if(Bs){if(Ts!==Ms){ca[Ms]=ca[Ts];for(var Vs=Ts*_s,ks=Ms*_s,Fs=0;Fs!==_s;++Fs)ga[ks+Fs]=ga[Vs+Fs]}++Ms}}if(Cs>0){ca[Ms]=ca[Cs];for(var Vs=Cs*_s,ks=Ms*_s,Fs=0;Fs!==_s;++Fs)ga[ks+Fs]=ga[Vs+Fs];++Ms}return Ms!==ca.length?(this.times=AnimationUtils.arraySlice(ca,0,Ms),this.values=AnimationUtils.arraySlice(ga,0,Ms*_s)):(this.times=ca,this.values=ga),this},clone:function(){var ca=AnimationUtils.arraySlice(this.times,0),ga=AnimationUtils.arraySlice(this.values,0),_s=this.constructor,Ss=new _s(this.name,ca,ga);return Ss.createInterpolant=this.createInterpolant,Ss}});function BooleanKeyframeTrack(ca,ga,_s){KeyframeTrack.call(this,ca,ga,_s)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(ca,ga,_s,Ss){Interpolant.call(this,ca,ga,_s,Ss)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(ca,ga,_s,Ss){for(var Ms=this.resultBuffer,Cs=this.sampleValues,Ts=this.valueSize,Bs=ca*Ts,Ps=(_s-ga)/(Ss-ga),Ls=Bs+Ts;Bs!==Ls;Bs+=4)Quaternion.slerpFlat(Ms,0,Cs,Bs-Ts,Cs,Bs,Ps);return Ms}});function QuaternionKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(ca){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(ca,ga,_s,Ss){KeyframeTrack.call(this,ca,ga,_s,Ss)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(ca,ga,_s,Ss){this.name=ca,this.tracks=_s,this.duration=ga!==void 0?ga:-1,this.blendMode=Ss!==void 0?Ss:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(ca){switch(ca.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ca)}function parseKeyframeTrack(ca){if(ca.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var ga=getTrackTypeForValueTypeName(ca.type);if(ca.times===void 0){var _s=[],Ss=[];AnimationUtils.flattenJSON(ca.keys,_s,Ss,"value"),ca.times=_s,ca.values=Ss}return ga.parse!==void 0?ga.parse(ca):new ga(ca.name,ca.times,ca.values,ca.interpolation)}Object.assign(AnimationClip,{parse:function(ca){for(var ga=[],_s=ca.tracks,Ss=1/(ca.fps||1),Ms=0,Cs=_s.length;Ms!==Cs;++Ms)ga.push(parseKeyframeTrack(_s[Ms]).scale(Ss));return new AnimationClip(ca.name,ca.duration,ga,ca.blendMode)},toJSON:function(ca){for(var ga=[],_s=ca.tracks,Ss={name:ca.name,duration:ca.duration,tracks:ga,uuid:ca.uuid,blendMode:ca.blendMode},Ms=0,Cs=_s.length;Ms!==Cs;++Ms)ga.push(KeyframeTrack.toJSON(_s[Ms]));return Ss},CreateFromMorphTargetSequence:function(ca,ga,_s,Ss){for(var Ms=ga.length,Cs=[],Ts=0;Ts<Ms;Ts++){var Bs=[],Ps=[];Bs.push((Ts+Ms-1)%Ms,Ts,(Ts+1)%Ms),Ps.push(0,1,0);var Ls=AnimationUtils.getKeyframeOrder(Bs);Bs=AnimationUtils.sortedArray(Bs,1,Ls),Ps=AnimationUtils.sortedArray(Ps,1,Ls),!Ss&&Bs[0]===0&&(Bs.push(Ms),Ps.push(Ps[0])),Cs.push(new NumberKeyframeTrack(".morphTargetInfluences["+ga[Ts].name+"]",Bs,Ps).scale(1/_s))}return new AnimationClip(ca,-1,Cs)},findByName:function(ca,ga){var _s=ca;if(!Array.isArray(ca)){var Ss=ca;_s=Ss.geometry&&Ss.geometry.animations||Ss.animations}for(var Ms=0;Ms<_s.length;Ms++)if(_s[Ms].name===ga)return _s[Ms];return null},CreateClipsFromMorphTargetSequences:function(ca,ga,_s){for(var Ss={},Ms=/^([\w-]*?)([\d]+)$/,Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Bs=ca[Cs],Ps=Bs.name.match(Ms);if(Ps&&Ps.length>1){var Ls=Ps[1],Rs=Ss[Ls];Rs||(Ss[Ls]=Rs=[]),Rs.push(Bs)}}var Ds=[];for(var Ls in Ss)Ds.push(AnimationClip.CreateFromMorphTargetSequence(Ls,Ss[Ls],ga,_s));return Ds},parseAnimation:function(ca,ga){if(!ca)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var _s=function(Hs,zs,js,Ws,Qs){if(js.length!==0){var qs=[],tu=[];AnimationUtils.flattenJSON(js,qs,tu,Ws),qs.length!==0&&Qs.push(new Hs(zs,qs,tu))}},Ss=[],Ms=ca.name||"default",Cs=ca.length||-1,Ts=ca.fps||30,Bs=ca.blendMode,Ps=ca.hierarchy||[],Ls=0;Ls<Ps.length;Ls++){var Rs=Ps[Ls].keys;if(!(!Rs||Rs.length===0))if(Rs[0].morphTargets){for(var Ds={},$s=0;$s<Rs.length;$s++)if(Rs[$s].morphTargets)for(var Fs=0;Fs<Rs[$s].morphTargets.length;Fs++)Ds[Rs[$s].morphTargets[Fs]]=-1;for(var Gs in Ds){for(var Vs=[],ks=[],Fs=0;Fs!==Rs[$s].morphTargets.length;++Fs){var Os=Rs[$s];Vs.push(Os.time),ks.push(Os.morphTarget===Gs?1:0)}Ss.push(new NumberKeyframeTrack(".morphTargetInfluence["+Gs+"]",Vs,ks))}Cs=Ds.length*(Ts||1)}else{var Ns=".bones["+ga[Ls].name+"]";_s(VectorKeyframeTrack,Ns+".position",Rs,"pos",Ss),_s(QuaternionKeyframeTrack,Ns+".quaternion",Rs,"rot",Ss),_s(VectorKeyframeTrack,Ns+".scale",Rs,"scl",Ss)}}if(Ss.length===0)return null;var Us=new AnimationClip(Ms,Cs,Ss,Bs);return Us}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var ca=this.tracks,ga=0,_s=0,Ss=ca.length;_s!==Ss;++_s){var Ms=this.tracks[_s];ga=Math.max(ga,Ms.times[Ms.times.length-1])}return this.duration=ga,this},trim:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].trim(0,this.duration);return this},validate:function(){for(var ca=!0,ga=0;ga<this.tracks.length;ga++)ca=ca&&this.tracks[ga].validate();return ca},optimize:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].optimize();return this},clone:function(){for(var ca=[],ga=0;ga<this.tracks.length;ga++)ca.push(this.tracks[ga].clone());return new AnimationClip(this.name,this.duration,ca,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(ca,ga){this.enabled!==!1&&(this.files[ca]=ga)},get:function(ca){if(this.enabled!==!1)return this.files[ca]},remove:function(ca){delete this.files[ca]},clear:function(){this.files={}}};function LoadingManager(ca,ga,_s){var Ss=this,Ms=!1,Cs=0,Ts=0,Bs=void 0,Ps=[];this.onStart=void 0,this.onLoad=ca,this.onProgress=ga,this.onError=_s,this.itemStart=function(Ls){Ts++,Ms===!1&&Ss.onStart!==void 0&&Ss.onStart(Ls,Cs,Ts),Ms=!0},this.itemEnd=function(Ls){Cs++,Ss.onProgress!==void 0&&Ss.onProgress(Ls,Cs,Ts),Cs===Ts&&(Ms=!1,Ss.onLoad!==void 0&&Ss.onLoad())},this.itemError=function(Ls){Ss.onError!==void 0&&Ss.onError(Ls)},this.resolveURL=function(Ls){return Bs?Bs(Ls):Ls},this.setURLModifier=function(Ls){return Bs=Ls,this},this.addHandler=function(Ls,Rs){return Ps.push(Ls,Rs),this},this.removeHandler=function(Ls){var Rs=Ps.indexOf(Ls);return Rs!==-1&&Ps.splice(Rs,2),this},this.getHandler=function(Ls){for(var Rs=0,Ds=Ps.length;Rs<Ds;Rs+=2){var $s=Ps[Rs],Fs=Ps[Rs+1];if($s.global&&($s.lastIndex=0),$s.test(Ls))return Fs}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(ca){this.manager=ca!==void 0?ca:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(ca,ga){var _s=this;return new Promise(function(Ss,Ms){_s.load(ca,Ss,ga,Ms)})},parse:function(){},setCrossOrigin:function(ca){return this.crossOrigin=ca,this},setPath:function(ca){return this.path=ca,this},setResourcePath:function(ca){return this.resourcePath=ca,this},setRequestHeader:function(ca){return this.requestHeader=ca,this}});var loading={};function FileLoader(ca){Loader.call(this,ca)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(ca,ga,_s,Ss){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;if(loading[ca]!==void 0){loading[ca].push({onLoad:ga,onProgress:_s,onError:Ss});return}var Ts=/^data:(.*?)(;base64)?,(.*)$/,Bs=ca.match(Ts);if(Bs){var Ps=Bs[1],Ls=!!Bs[2],Rs=Bs[3];Rs=decodeURIComponent(Rs),Ls&&(Rs=atob(Rs));try{var Ds,$s=(this.responseType||"").toLowerCase();switch($s){case"arraybuffer":case"blob":for(var Fs=new Uint8Array(Rs.length),Gs=0;Gs<Rs.length;Gs++)Fs[Gs]=Rs.charCodeAt(Gs);$s==="blob"?Ds=new Blob([Fs.buffer],{type:Ps}):Ds=Fs.buffer;break;case"document":var Vs=new DOMParser;Ds=Vs.parseFromString(Rs,Ps);break;case"json":Ds=JSON.parse(Rs);break;default:Ds=Rs;break}setTimeout(function(){ga&&ga(Ds),Ms.manager.itemEnd(ca)},0)}catch(Ns){setTimeout(function(){Ss&&Ss(Ns),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},0)}}else{loading[ca]=[],loading[ca].push({onLoad:ga,onProgress:_s,onError:Ss});var ks=new XMLHttpRequest;ks.open("GET",ca,!0),ks.addEventListener("load",function(Ns){var Us=this.response,Hs=loading[ca];if(delete loading[ca],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(ca,Us);for(var zs=0,js=Hs.length;zs<js;zs++){var Ws=Hs[zs];Ws.onLoad&&Ws.onLoad(Us)}Ms.manager.itemEnd(ca)}else{for(var zs=0,js=Hs.length;zs<js;zs++){var Ws=Hs[zs];Ws.onError&&Ws.onError(Ns)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}},!1),ks.addEventListener("progress",function(Ns){for(var Us=loading[ca],Hs=0,zs=Us.length;Hs<zs;Hs++){var js=Us[Hs];js.onProgress&&js.onProgress(Ns)}},!1),ks.addEventListener("error",function(Ns){var Us=loading[ca];delete loading[ca];for(var Hs=0,zs=Us.length;Hs<zs;Hs++){var js=Us[Hs];js.onError&&js.onError(Ns)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},!1),ks.addEventListener("abort",function(Ns){var Us=loading[ca];delete loading[ca];for(var Hs=0,zs=Us.length;Hs<zs;Hs++){var js=Us[Hs];js.onError&&js.onError(Ns)}Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)},!1),this.responseType!==void 0&&(ks.responseType=this.responseType),this.withCredentials!==void 0&&(ks.withCredentials=this.withCredentials),ks.overrideMimeType&&ks.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Os in this.requestHeader)ks.setRequestHeader(Os,this.requestHeader[Os]);ks.send(null)}return Ms.manager.itemStart(ca),ks},setResponseType:function(ca){return this.responseType=ca,this},setWithCredentials:function(ca){return this.withCredentials=ca,this},setMimeType:function(ca){return this.mimeType=ca,this}});function AnimationLoader(ca){Loader.call(this,ca)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){for(var ga=[],_s=0;_s<ca.length;_s++){var Ss=AnimationClip.parse(ca[_s]);ga.push(Ss)}return ga}});function CompressedTextureLoader(ca){Loader.call(this,ca)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=[],Ts=new CompressedTexture;Ts.image=Cs;var Bs=new FileLoader(this.manager);Bs.setPath(this.path),Bs.setResponseType("arraybuffer");function Ps($s){Bs.load(ca[$s],function(Fs){var Gs=Ms.parse(Fs,!0);Cs[$s]={width:Gs.width,height:Gs.height,format:Gs.format,mipmaps:Gs.mipmaps},Ls+=1,Ls===6&&(Gs.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Gs.format,Ts.needsUpdate=!0,ga&&ga(Ts))},_s,Ss)}if(Array.isArray(ca))for(var Ls=0,Rs=0,Ds=ca.length;Rs<Ds;++Rs)Ps(Rs);else Bs.load(ca,function($s){var Fs=Ms.parse($s,!0);if(Fs.isCubemap)for(var Gs=Fs.mipmaps.length/Fs.mipmapCount,Vs=0;Vs<Gs;Vs++){Cs[Vs]={mipmaps:[]};for(var ks=0;ks<Fs.mipmapCount;ks++)Cs[Vs].mipmaps.push(Fs.mipmaps[Vs*Fs.mipmapCount+ks]),Cs[Vs].format=Fs.format,Cs[Vs].width=Fs.width,Cs[Vs].height=Fs.height}else Ts.image.width=Fs.width,Ts.image.height=Fs.height,Ts.mipmaps=Fs.mipmaps;Fs.mipmapCount===1&&(Ts.minFilter=LinearFilter),Ts.format=Fs.format,Ts.needsUpdate=!0,ga&&ga(Ts)},_s,Ss);return Ts}});function DataTextureLoader(ca){Loader.call(this,ca)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new DataTexture,Ts=new FileLoader(this.manager);return Ts.setResponseType("arraybuffer"),Ts.setPath(this.path),Ts.load(ca,function(Bs){var Ps=Ms.parse(Bs);!Ps||(Ps.image!==void 0?Cs.image=Ps.image:Ps.data!==void 0&&(Cs.image.width=Ps.width,Cs.image.height=Ps.height,Cs.image.data=Ps.data),Cs.wrapS=Ps.wrapS!==void 0?Ps.wrapS:ClampToEdgeWrapping,Cs.wrapT=Ps.wrapT!==void 0?Ps.wrapT:ClampToEdgeWrapping,Cs.magFilter=Ps.magFilter!==void 0?Ps.magFilter:LinearFilter,Cs.minFilter=Ps.minFilter!==void 0?Ps.minFilter:LinearFilter,Cs.anisotropy=Ps.anisotropy!==void 0?Ps.anisotropy:1,Ps.format!==void 0&&(Cs.format=Ps.format),Ps.type!==void 0&&(Cs.type=Ps.type),Ps.mipmaps!==void 0&&(Cs.mipmaps=Ps.mipmaps,Cs.minFilter=LinearMipmapLinearFilter),Ps.mipmapCount===1&&(Cs.minFilter=LinearFilter),Cs.needsUpdate=!0,ga&&ga(Cs,Ps))},_s,Ss),Cs}});function ImageLoader(ca){Loader.call(this,ca)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(ca,ga,_s,Ss){this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;var Ts=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Bs(){Ts.removeEventListener("load",Bs,!1),Ts.removeEventListener("error",Ps,!1),Cache.add(ca,this),ga&&ga(this),Ms.manager.itemEnd(ca)}function Ps(Ls){Ts.removeEventListener("load",Bs,!1),Ts.removeEventListener("error",Ps,!1),Ss&&Ss(Ls),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}return Ts.addEventListener("load",Bs,!1),Ts.addEventListener("error",Ps,!1),ca.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Ts.crossOrigin=this.crossOrigin),Ms.manager.itemStart(ca),Ts.src=ca,Ts}});function CubeTextureLoader(ca){Loader.call(this,ca)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(ca,ga,_s,Ss){var Ms=new CubeTexture,Cs=new ImageLoader(this.manager);Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path);var Ts=0;function Bs(Ls){Cs.load(ca[Ls],function(Rs){Ms.images[Ls]=Rs,Ts++,Ts===6&&(Ms.needsUpdate=!0,ga&&ga(Ms))},void 0,Ss)}for(var Ps=0;Ps<ca.length;++Ps)Bs(Ps);return Ms}});function TextureLoader(ca){Loader.call(this,ca)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(ca,ga,_s,Ss){var Ms=new Texture,Cs=new ImageLoader(this.manager);return Cs.setCrossOrigin(this.crossOrigin),Cs.setPath(this.path),Cs.load(ca,function(Ts){Ms.image=Ts;var Bs=ca.search(/\.jpe?g($|\?)/i)>0||ca.search(/^data\:image\/jpeg/)===0;Ms.format=Bs?RGBFormat:RGBAFormat,Ms.needsUpdate=!0,ga!==void 0&&ga(Ms)},_s,Ss),Ms}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(ca,ga){var _s=this.getUtoTmapping(ca);return this.getPoint(_s,ga)},getPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPoint(_s/ca));return ga},getSpacedPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPointAt(_s/ca));return ga},getLength:function(){var ca=this.getLengths();return ca[ca.length-1]},getLengths:function(ca){if(ca===void 0&&(ca=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===ca+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var ga=[],_s,Ss=this.getPoint(0),Ms,Cs=0;for(ga.push(0),Ms=1;Ms<=ca;Ms++)_s=this.getPoint(Ms/ca),Cs+=_s.distanceTo(Ss),ga.push(Cs),Ss=_s;return this.cacheArcLengths=ga,ga},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(ca,ga){var _s=this.getLengths(),Ss=0,Ms=_s.length,Cs;ga?Cs=ga:Cs=ca*_s[Ms-1];for(var Ts=0,Bs=Ms-1,Ps;Ts<=Bs;)if(Ss=Math.floor(Ts+(Bs-Ts)/2),Ps=_s[Ss]-Cs,Ps<0)Ts=Ss+1;else if(Ps>0)Bs=Ss-1;else{Bs=Ss;break}if(Ss=Bs,_s[Ss]===Cs)return Ss/(Ms-1);var Ls=_s[Ss],Rs=_s[Ss+1],Ds=Rs-Ls,$s=(Cs-Ls)/Ds,Fs=(Ss+$s)/(Ms-1);return Fs},getTangent:function(ca,ga){var _s=1e-4,Ss=ca-_s,Ms=ca+_s;Ss<0&&(Ss=0),Ms>1&&(Ms=1);var Cs=this.getPoint(Ss),Ts=this.getPoint(Ms),Bs=ga||(Cs.isVector2?new Vector2:new Vector3);return Bs.copy(Ts).sub(Cs).normalize(),Bs},getTangentAt:function(ca,ga){var _s=this.getUtoTmapping(ca);return this.getTangent(_s,ga)},computeFrenetFrames:function(ca,ga){var _s=new Vector3,Ss=[],Ms=[],Cs=[],Ts=new Vector3,Bs=new Matrix4,Ps,Ls,Rs;for(Ps=0;Ps<=ca;Ps++)Ls=Ps/ca,Ss[Ps]=this.getTangentAt(Ls,new Vector3),Ss[Ps].normalize();Ms[0]=new Vector3,Cs[0]=new Vector3;var Ds=Number.MAX_VALUE,$s=Math.abs(Ss[0].x),Fs=Math.abs(Ss[0].y),Gs=Math.abs(Ss[0].z);for($s<=Ds&&(Ds=$s,_s.set(1,0,0)),Fs<=Ds&&(Ds=Fs,_s.set(0,1,0)),Gs<=Ds&&_s.set(0,0,1),Ts.crossVectors(Ss[0],_s).normalize(),Ms[0].crossVectors(Ss[0],Ts),Cs[0].crossVectors(Ss[0],Ms[0]),Ps=1;Ps<=ca;Ps++)Ms[Ps]=Ms[Ps-1].clone(),Cs[Ps]=Cs[Ps-1].clone(),Ts.crossVectors(Ss[Ps-1],Ss[Ps]),Ts.length()>Number.EPSILON&&(Ts.normalize(),Rs=Math.acos(MathUtils.clamp(Ss[Ps-1].dot(Ss[Ps]),-1,1)),Ms[Ps].applyMatrix4(Bs.makeRotationAxis(Ts,Rs))),Cs[Ps].crossVectors(Ss[Ps],Ms[Ps]);if(ga===!0)for(Rs=Math.acos(MathUtils.clamp(Ms[0].dot(Ms[ca]),-1,1)),Rs/=ca,Ss[0].dot(Ts.crossVectors(Ms[0],Ms[ca]))>0&&(Rs=-Rs),Ps=1;Ps<=ca;Ps++)Ms[Ps].applyMatrix4(Bs.makeRotationAxis(Ss[Ps],Rs*Ps)),Cs[Ps].crossVectors(Ss[Ps],Ms[Ps]);return{tangents:Ss,normals:Ms,binormals:Cs}},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this},toJSON:function(){var ca={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return ca.arcLengthDivisions=this.arcLengthDivisions,ca.type=this.type,ca},fromJSON:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this}});function EllipseCurve(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){Curve.call(this),this.type="EllipseCurve",this.aX=ca||0,this.aY=ga||0,this.xRadius=_s||1,this.yRadius=Ss||1,this.aStartAngle=Ms||0,this.aEndAngle=Cs||2*Math.PI,this.aClockwise=Ts||!1,this.aRotation=Bs||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(ca,ga){for(var _s=ga||new Vector2,Ss=Math.PI*2,Ms=this.aEndAngle-this.aStartAngle,Cs=Math.abs(Ms)<Number.EPSILON;Ms<0;)Ms+=Ss;for(;Ms>Ss;)Ms-=Ss;Ms<Number.EPSILON&&(Cs?Ms=0:Ms=Ss),this.aClockwise===!0&&!Cs&&(Ms===Ss?Ms=-Ss:Ms=Ms-Ss);var Ts=this.aStartAngle+ca*Ms,Bs=this.aX+this.xRadius*Math.cos(Ts),Ps=this.aY+this.yRadius*Math.sin(Ts);if(this.aRotation!==0){var Ls=Math.cos(this.aRotation),Rs=Math.sin(this.aRotation),Ds=Bs-this.aX,$s=Ps-this.aY;Bs=Ds*Ls-$s*Rs+this.aX,Ps=Ds*Rs+$s*Ls+this.aY}return _s.set(Bs,Ps)};EllipseCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};EllipseCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.aX=this.aX,ca.aY=this.aY,ca.xRadius=this.xRadius,ca.yRadius=this.yRadius,ca.aStartAngle=this.aStartAngle,ca.aEndAngle=this.aEndAngle,ca.aClockwise=this.aClockwise,ca.aRotation=this.aRotation,ca};EllipseCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};function ArcCurve(ca,ga,_s,Ss,Ms,Cs){EllipseCurve.call(this,ca,ga,_s,_s,Ss,Ms,Cs),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var ca=0,ga=0,_s=0,Ss=0;function Ms(Cs,Ts,Bs,Ps){ca=Cs,ga=Bs,_s=-3*Cs+3*Ts-2*Bs-Ps,Ss=2*Cs-2*Ts+Bs+Ps}return{initCatmullRom:function(Cs,Ts,Bs,Ps,Ls){Ms(Ts,Bs,Ls*(Bs-Cs),Ls*(Ps-Ts))},initNonuniformCatmullRom:function(Cs,Ts,Bs,Ps,Ls,Rs,Ds){var $s=(Ts-Cs)/Ls-(Bs-Cs)/(Ls+Rs)+(Bs-Ts)/Rs,Fs=(Bs-Ts)/Rs-(Ps-Ts)/(Rs+Ds)+(Ps-Bs)/Ds;$s*=Rs,Fs*=Rs,Ms(Ts,Bs,$s,Fs)},calc:function(Cs){var Ts=Cs*Cs,Bs=Ts*Cs;return ca+ga*Cs+_s*Ts+Ss*Bs}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(ca,ga,_s,Ss){Curve.call(this),this.type="CatmullRomCurve3",this.points=ca||[],this.closed=ga||!1,this.curveType=_s||"centripetal",this.tension=Ss||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.points,Ms=Ss.length,Cs=(Ms-(this.closed?0:1))*ca,Ts=Math.floor(Cs),Bs=Cs-Ts;this.closed?Ts+=Ts>0?0:(Math.floor(Math.abs(Ts)/Ms)+1)*Ms:Bs===0&&Ts===Ms-1&&(Ts=Ms-2,Bs=1);var Ps,Ls,Rs,Ds;if(this.closed||Ts>0?Ps=Ss[(Ts-1)%Ms]:(tmp.subVectors(Ss[0],Ss[1]).add(Ss[0]),Ps=tmp),Ls=Ss[Ts%Ms],Rs=Ss[(Ts+1)%Ms],this.closed||Ts+2<Ms?Ds=Ss[(Ts+2)%Ms]:(tmp.subVectors(Ss[Ms-1],Ss[Ms-2]).add(Ss[Ms-1]),Ds=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var $s=this.curveType==="chordal"?.5:.25,Fs=Math.pow(Ps.distanceToSquared(Ls),$s),Gs=Math.pow(Ls.distanceToSquared(Rs),$s),Vs=Math.pow(Rs.distanceToSquared(Ds),$s);Gs<1e-4&&(Gs=1),Fs<1e-4&&(Fs=Gs),Vs<1e-4&&(Vs=Gs),px.initNonuniformCatmullRom(Ps.x,Ls.x,Rs.x,Ds.x,Fs,Gs,Vs),py.initNonuniformCatmullRom(Ps.y,Ls.y,Rs.y,Ds.y,Fs,Gs,Vs),pz.initNonuniformCatmullRom(Ps.z,Ls.z,Rs.z,Ds.z,Fs,Gs,Vs)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Ps.x,Ls.x,Rs.x,Ds.x,this.tension),py.initCatmullRom(Ps.y,Ls.y,Rs.y,Ds.y,this.tension),pz.initCatmullRom(Ps.z,Ls.z,Rs.z,Ds.z,this.tension));return _s.set(px.calc(Bs),py.calc(Bs),pz.calc(Bs)),_s};CatmullRomCurve3.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(Ss.clone())}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,_s=this.points.length;ga<_s;ga++){var Ss=this.points[ga];ca.points.push(Ss.toArray())}return ca.closed=this.closed,ca.curveType=this.curveType,ca.tension=this.tension,ca};CatmullRomCurve3.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(new Vector3().fromArray(Ss))}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};function CatmullRom(ca,ga,_s,Ss,Ms){var Cs=(Ss-ga)*.5,Ts=(Ms-_s)*.5,Bs=ca*ca,Ps=ca*Bs;return(2*_s-2*Ss+Cs+Ts)*Ps+(-3*_s+3*Ss-2*Cs-Ts)*Bs+Cs*ca+_s}function QuadraticBezierP0(ca,ga){var _s=1-ca;return _s*_s*ga}function QuadraticBezierP1(ca,ga){return 2*(1-ca)*ca*ga}function QuadraticBezierP2(ca,ga){return ca*ca*ga}function QuadraticBezier(ca,ga,_s,Ss){return QuadraticBezierP0(ca,ga)+QuadraticBezierP1(ca,_s)+QuadraticBezierP2(ca,Ss)}function CubicBezierP0(ca,ga){var _s=1-ca;return _s*_s*_s*ga}function CubicBezierP1(ca,ga){var _s=1-ca;return 3*_s*_s*ca*ga}function CubicBezierP2(ca,ga){return 3*(1-ca)*ca*ca*ga}function CubicBezierP3(ca,ga){return ca*ca*ca*ga}function CubicBezier(ca,ga,_s,Ss,Ms){return CubicBezierP0(ca,ga)+CubicBezierP1(ca,_s)+CubicBezierP2(ca,Ss)+CubicBezierP3(ca,Ms)}function CubicBezierCurve(ca,ga,_s,Ss){Curve.call(this),this.type="CubicBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=_s||new Vector2,this.v3=Ss||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(ca,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(ca,Ss.y,Ms.y,Cs.y,Ts.y)),_s};CubicBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function CubicBezierCurve3(ca,ga,_s,Ss){Curve.call(this),this.type="CubicBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=_s||new Vector3,this.v3=Ss||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2,Ts=this.v3;return _s.set(CubicBezier(ca,Ss.x,Ms.x,Cs.x,Ts.x),CubicBezier(ca,Ss.y,Ms.y,Cs.y,Ts.y),CubicBezier(ca,Ss.z,Ms.z,Cs.z,Ts.z)),_s};CubicBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function LineCurve(ca,ga){Curve.call(this),this.type="LineCurve",this.v1=ca||new Vector2,this.v2=ga||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2;return ca===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(ca).add(this.v1)),_s};LineCurve.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve.prototype.getTangent=function(ca,ga){var _s=ga||new Vector2,_s=_s.copy(this.v2).sub(this.v1).normalize();return _s};LineCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function LineCurve3(ca,ga){Curve.call(this),this.type="LineCurve3",this.v1=ca||new Vector3,this.v2=ga||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3;return ca===1?_s.copy(this.v2):(_s.copy(this.v2).sub(this.v1),_s.multiplyScalar(ca).add(this.v1)),_s};LineCurve3.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve(ca,ga,_s){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=_s||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(ca,Ss.x,Ms.x,Cs.x),QuadraticBezier(ca,Ss.y,Ms.y,Cs.y)),_s};QuadraticBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve3(ca,ga,_s){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=_s||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(ca,ga){var _s=ga||new Vector3,Ss=this.v0,Ms=this.v1,Cs=this.v2;return _s.set(QuadraticBezier(ca,Ss.x,Ms.x,Cs.x),QuadraticBezier(ca,Ss.y,Ms.y,Cs.y),QuadraticBezier(ca,Ss.z,Ms.z,Cs.z)),_s};QuadraticBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function SplineCurve(ca){Curve.call(this),this.type="SplineCurve",this.points=ca||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(ca,ga){var _s=ga||new Vector2,Ss=this.points,Ms=(Ss.length-1)*ca,Cs=Math.floor(Ms),Ts=Ms-Cs,Bs=Ss[Cs===0?Cs:Cs-1],Ps=Ss[Cs],Ls=Ss[Cs>Ss.length-2?Ss.length-1:Cs+1],Rs=Ss[Cs>Ss.length-3?Ss.length-1:Cs+2];return _s.set(CatmullRom(Ts,Bs.x,Ps.x,Ls.x,Rs.x),CatmullRom(Ts,Bs.y,Ps.y,Ls.y,Rs.y)),_s};SplineCurve.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(Ss.clone())}return this};SplineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,_s=this.points.length;ga<_s;ga++){var Ss=this.points[ga];ca.points.push(Ss.toArray())}return ca};SplineCurve.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,_s=ca.points.length;ga<_s;ga++){var Ss=ca.points[ga];this.points.push(new Vector2().fromArray(Ss))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(ca){this.curves.push(ca)},closePath:function(){var ca=this.curves[0].getPoint(0),ga=this.curves[this.curves.length-1].getPoint(1);ca.equals(ga)||this.curves.push(new LineCurve(ga,ca))},getPoint:function(ca){for(var ga=ca*this.getLength(),_s=this.getCurveLengths(),Ss=0;Ss<_s.length;){if(_s[Ss]>=ga){var Ms=_s[Ss]-ga,Cs=this.curves[Ss],Ts=Cs.getLength(),Bs=Ts===0?0:1-Ms/Ts;return Cs.getPointAt(Bs)}Ss++}return null},getLength:function(){var ca=this.getCurveLengths();return ca[ca.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var ca=[],ga=0,_s=0,Ss=this.curves.length;_s<Ss;_s++)ga+=this.curves[_s].getLength(),ca.push(ga);return this.cacheLengths=ca,ca},getSpacedPoints:function(ca){ca===void 0&&(ca=40);for(var ga=[],_s=0;_s<=ca;_s++)ga.push(this.getPoint(_s/ca));return this.autoClose&&ga.push(ga[0]),ga},getPoints:function(ca){ca=ca||12;for(var ga=[],_s,Ss=0,Ms=this.curves;Ss<Ms.length;Ss++)for(var Cs=Ms[Ss],Ts=Cs&&Cs.isEllipseCurve?ca*2:Cs&&(Cs.isLineCurve||Cs.isLineCurve3)?1:Cs&&Cs.isSplineCurve?ca*Cs.points.length:ca,Bs=Cs.getPoints(Ts),Ps=0;Ps<Bs.length;Ps++){var Ls=Bs[Ps];_s&&_s.equals(Ls)||(ga.push(Ls),_s=Ls)}return this.autoClose&&ga.length>1&&!ga[ga.length-1].equals(ga[0])&&ga.push(ga[0]),ga},copy:function(ca){Curve.prototype.copy.call(this,ca),this.curves=[];for(var ga=0,_s=ca.curves.length;ga<_s;ga++){var Ss=ca.curves[ga];this.curves.push(Ss.clone())}return this.autoClose=ca.autoClose,this},toJSON:function(){var ca=Curve.prototype.toJSON.call(this);ca.autoClose=this.autoClose,ca.curves=[];for(var ga=0,_s=this.curves.length;ga<_s;ga++){var Ss=this.curves[ga];ca.curves.push(Ss.toJSON())}return ca},fromJSON:function(ca){Curve.prototype.fromJSON.call(this,ca),this.autoClose=ca.autoClose,this.curves=[];for(var ga=0,_s=ca.curves.length;ga<_s;ga++){var Ss=ca.curves[ga];this.curves.push(new Curves[Ss.type]().fromJSON(Ss))}return this}});function Path(ca){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,ca&&this.setFromPoints(ca)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(ca){this.moveTo(ca[0].x,ca[0].y);for(var ga=1,_s=ca.length;ga<_s;ga++)this.lineTo(ca[ga].x,ca[ga].y);return this},moveTo:function(ca,ga){return this.currentPoint.set(ca,ga),this},lineTo:function(ca,ga){var _s=new LineCurve(this.currentPoint.clone(),new Vector2(ca,ga));return this.curves.push(_s),this.currentPoint.set(ca,ga),this},quadraticCurveTo:function(ca,ga,_s,Ss){var Ms=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(_s,Ss));return this.curves.push(Ms),this.currentPoint.set(_s,Ss),this},bezierCurveTo:function(ca,ga,_s,Ss,Ms,Cs){var Ts=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(_s,Ss),new Vector2(Ms,Cs));return this.curves.push(Ts),this.currentPoint.set(Ms,Cs),this},splineThru:function(ca){var ga=[this.currentPoint.clone()].concat(ca),_s=new SplineCurve(ga);return this.curves.push(_s),this.currentPoint.copy(ca[ca.length-1]),this},arc:function(ca,ga,_s,Ss,Ms,Cs){var Ts=this.currentPoint.x,Bs=this.currentPoint.y;return this.absarc(ca+Ts,ga+Bs,_s,Ss,Ms,Cs),this},absarc:function(ca,ga,_s,Ss,Ms,Cs){return this.absellipse(ca,ga,_s,_s,Ss,Ms,Cs),this},ellipse:function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){var Ps=this.currentPoint.x,Ls=this.currentPoint.y;return this.absellipse(ca+Ps,ga+Ls,_s,Ss,Ms,Cs,Ts,Bs),this},absellipse:function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){var Ps=new EllipseCurve(ca,ga,_s,Ss,Ms,Cs,Ts,Bs);if(this.curves.length>0){var Ls=Ps.getPoint(0);Ls.equals(this.currentPoint)||this.lineTo(Ls.x,Ls.y)}this.curves.push(Ps);var Rs=Ps.getPoint(1);return this.currentPoint.copy(Rs),this},copy:function(ca){return CurvePath.prototype.copy.call(this,ca),this.currentPoint.copy(ca.currentPoint),this},toJSON:function(){var ca=CurvePath.prototype.toJSON.call(this);return ca.currentPoint=this.currentPoint.toArray(),ca},fromJSON:function(ca){return CurvePath.prototype.fromJSON.call(this,ca),this.currentPoint.fromArray(ca.currentPoint),this}});function Shape(ca){Path.call(this,ca),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(ca){for(var ga=[],_s=0,Ss=this.holes.length;_s<Ss;_s++)ga[_s]=this.holes[_s].getPoints(ca);return ga},extractPoints:function(ca){return{shape:this.getPoints(ca),holes:this.getPointsHoles(ca)}},copy:function(ca){Path.prototype.copy.call(this,ca),this.holes=[];for(var ga=0,_s=ca.holes.length;ga<_s;ga++){var Ss=ca.holes[ga];this.holes.push(Ss.clone())}return this},toJSON:function(){var ca=Path.prototype.toJSON.call(this);ca.uuid=this.uuid,ca.holes=[];for(var ga=0,_s=this.holes.length;ga<_s;ga++){var Ss=this.holes[ga];ca.holes.push(Ss.toJSON())}return ca},fromJSON:function(ca){Path.prototype.fromJSON.call(this,ca),this.uuid=ca.uuid,this.holes=[];for(var ga=0,_s=ca.holes.length;ga<_s;ga++){var Ss=ca.holes[ga];this.holes.push(new Path().fromJSON(Ss))}return this}});function Light(ca,ga){Object3D.call(this),this.type="Light",this.color=new Color(ca),this.intensity=ga!==void 0?ga:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),this.color.copy(ca.color),this.intensity=ca.intensity,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.color=this.color.getHex(),ga.object.intensity=this.intensity,this.groundColor!==void 0&&(ga.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(ga.object.distance=this.distance),this.angle!==void 0&&(ga.object.angle=this.angle),this.decay!==void 0&&(ga.object.decay=this.decay),this.penumbra!==void 0&&(ga.object.penumbra=this.penumbra),this.shadow!==void 0&&(ga.object.shadow=this.shadow.toJSON()),ga}});function HemisphereLight(ca,ga,_s){Light.call(this,ca,_s),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(ga)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.groundColor.copy(ca.groundColor),this}});function LightShadow(ca){this.camera=ca,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(ca){var ga=this.camera,_s=this.matrix,Ss=this._projScreenMatrix,Ms=this._lookTarget,Cs=this._lightPositionWorld;Cs.setFromMatrixPosition(ca.matrixWorld),ga.position.copy(Cs),Ms.setFromMatrixPosition(ca.target.matrixWorld),ga.lookAt(Ms),ga.updateMatrixWorld(),Ss.multiplyMatrices(ga.projectionMatrix,ga.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ss),_s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_s.multiply(ga.projectionMatrix),_s.multiply(ga.matrixWorldInverse)},getViewport:function(ca){return this._viewports[ca]},getFrameExtents:function(){return this._frameExtents},copy:function(ca){return this.camera=ca.camera.clone(),this.bias=ca.bias,this.radius=ca.radius,this.mapSize.copy(ca.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca={};return this.bias!==0&&(ca.bias=this.bias),this.radius!==1&&(ca.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(ca.mapSize=this.mapSize.toArray()),ca.camera=this.camera.toJSON(!1).object,delete ca.camera.matrix,ca}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(ca){var ga=this.camera,_s=MathUtils.RAD2DEG*2*ca.angle,Ss=this.mapSize.width/this.mapSize.height,Ms=ca.distance||ga.far;(_s!==ga.fov||Ss!==ga.aspect||Ms!==ga.far)&&(ga.fov=_s,ga.aspect=Ss,ga.far=Ms,ga.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,ca)}});function SpotLight(ca,ga,_s,Ss,Ms,Cs){Light.call(this,ca,ga),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ts){this.intensity=Ts/Math.PI}}),this.distance=_s!==void 0?_s:0,this.angle=Ss!==void 0?Ss:Math.PI/3,this.penumbra=Ms!==void 0?Ms:0,this.decay=Cs!==void 0?Cs:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.angle=ca.angle,this.penumbra=ca.penumbra,this.decay=ca.decay,this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(ca,ga){ga===void 0&&(ga=0);var _s=this.camera,Ss=this.matrix,Ms=this._lightPositionWorld,Cs=this._lookTarget,Ts=this._projScreenMatrix;Ms.setFromMatrixPosition(ca.matrixWorld),_s.position.copy(Ms),Cs.copy(_s.position),Cs.add(this._cubeDirections[ga]),_s.up.copy(this._cubeUps[ga]),_s.lookAt(Cs),_s.updateMatrixWorld(),Ss.makeTranslation(-Ms.x,-Ms.y,-Ms.z),Ts.multiplyMatrices(_s.projectionMatrix,_s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ts)}});function PointLight(ca,ga,_s,Ss){Light.call(this,ca,ga),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Ms){this.intensity=Ms/(4*Math.PI)}}),this.distance=_s!==void 0?_s:0,this.decay=Ss!==void 0?Ss:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.decay=ca.decay,this.shadow=ca.shadow.clone(),this}});function OrthographicCamera(ca,ga,_s,Ss,Ms,Cs){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=ca!==void 0?ca:-1,this.right=ga!==void 0?ga:1,this.top=_s!==void 0?_s:1,this.bottom=Ss!==void 0?Ss:-1,this.near=Ms!==void 0?Ms:.1,this.far=Cs!==void 0?Cs:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.left=ca.left,this.right=ca.right,this.top=ca.top,this.bottom=ca.bottom,this.near=ca.near,this.far=ca.far,this.zoom=ca.zoom,this.view=ca.view===null?null:Object.assign({},ca.view),this},setViewOffset:function(ca,ga,_s,Ss,Ms,Cs){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=_s,this.view.offsetY=Ss,this.view.width=Ms,this.view.height=Cs,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=(this.right-this.left)/(2*this.zoom),ga=(this.top-this.bottom)/(2*this.zoom),_s=(this.right+this.left)/2,Ss=(this.top+this.bottom)/2,Ms=_s-ca,Cs=_s+ca,Ts=Ss+ga,Bs=Ss-ga;if(this.view!==null&&this.view.enabled){var Ps=(this.right-this.left)/this.view.fullWidth/this.zoom,Ls=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ms+=Ps*this.view.offsetX,Cs=Ms+Ps*this.view.width,Ts-=Ls*this.view.offsetY,Bs=Ts-Ls*this.view.height}this.projectionMatrix.makeOrthographic(Ms,Cs,Ts,Bs,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.zoom=this.zoom,ga.object.left=this.left,ga.object.right=this.right,ga.object.top=this.top,ga.object.bottom=this.bottom,ga.object.near=this.near,ga.object.far=this.far,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(ca){LightShadow.prototype.updateMatrices.call(this,ca)}});function DirectionalLight(ca,ga){Light.call(this,ca,ga),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function AmbientLight(ca,ga){Light.call(this,ca,ga),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(ca,ga,_s,Ss){Light.call(this,ca,ga),this.type="RectAreaLight",this.width=_s!==void 0?_s:10,this.height=Ss!==void 0?Ss:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.width=ca.width,this.height=ca.height,this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.width=this.width,ga.object.height=this.height,ga}});function SphericalHarmonics3(){this.coefficients=[];for(var ca=0;ca<9;ca++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].copy(ca[ga]);return this},zero:function(){for(var ca=0;ca<9;ca++)this.coefficients[ca].set(0,0,0);return this},getAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=this.coefficients;return ga.copy(Cs[0]).multiplyScalar(.282095),ga.addScaledVector(Cs[1],.488603*Ss),ga.addScaledVector(Cs[2],.488603*Ms),ga.addScaledVector(Cs[3],.488603*_s),ga.addScaledVector(Cs[4],1.092548*(_s*Ss)),ga.addScaledVector(Cs[5],1.092548*(Ss*Ms)),ga.addScaledVector(Cs[6],.315392*(3*Ms*Ms-1)),ga.addScaledVector(Cs[7],1.092548*(_s*Ms)),ga.addScaledVector(Cs[8],.546274*(_s*_s-Ss*Ss)),ga},getIrradianceAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z,Cs=this.coefficients;return ga.copy(Cs[0]).multiplyScalar(.886227),ga.addScaledVector(Cs[1],2*.511664*Ss),ga.addScaledVector(Cs[2],2*.511664*Ms),ga.addScaledVector(Cs[3],2*.511664*_s),ga.addScaledVector(Cs[4],2*.429043*_s*Ss),ga.addScaledVector(Cs[5],2*.429043*Ss*Ms),ga.addScaledVector(Cs[6],.743125*Ms*Ms-.247708),ga.addScaledVector(Cs[7],2*.429043*_s*Ms),ga.addScaledVector(Cs[8],.429043*(_s*_s-Ss*Ss)),ga},add:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].add(ca.coefficients[ga]);return this},addScaledSH:function(ca,ga){for(var _s=0;_s<9;_s++)this.coefficients[_s].addScaledVector(ca.coefficients[_s],ga);return this},scale:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].multiplyScalar(ca);return this},lerp:function(ca,ga){for(var _s=0;_s<9;_s++)this.coefficients[_s].lerp(ca.coefficients[_s],ga);return this},equals:function(ca){for(var ga=0;ga<9;ga++)if(!this.coefficients[ga].equals(ca.coefficients[ga]))return!1;return!0},copy:function(ca){return this.set(ca.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].fromArray(ca,ga+Ss*3);return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);for(var _s=this.coefficients,Ss=0;Ss<9;Ss++)_s[Ss].toArray(ca,ga+Ss*3);return ca}});Object.assign(SphericalHarmonics3,{getBasisAt:function(ca,ga){var _s=ca.x,Ss=ca.y,Ms=ca.z;ga[0]=.282095,ga[1]=.488603*Ss,ga[2]=.488603*Ms,ga[3]=.488603*_s,ga[4]=1.092548*_s*Ss,ga[5]=1.092548*Ss*Ms,ga[6]=.315392*(3*Ms*Ms-1),ga[7]=1.092548*_s*Ms,ga[8]=.546274*(_s*_s-Ss*Ss)}});function LightProbe(ca,ga){Light.call(this,void 0,ga),this.type="LightProbe",this.sh=ca!==void 0?ca:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.sh.copy(ca.sh),this},fromJSON:function(ca){return this.intensity=ca.intensity,this.sh.fromArray(ca.sh),this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.sh=this.sh.toArray(),ga}});function MaterialLoader(ca){Loader.call(this,ca),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){var ga=this.textures;function _s(Ps){return ga[Ps]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Ps),ga[Ps]}var Ss=new Materials[ca.type];if(ca.uuid!==void 0&&(Ss.uuid=ca.uuid),ca.name!==void 0&&(Ss.name=ca.name),ca.color!==void 0&&Ss.color.setHex(ca.color),ca.roughness!==void 0&&(Ss.roughness=ca.roughness),ca.metalness!==void 0&&(Ss.metalness=ca.metalness),ca.sheen!==void 0&&(Ss.sheen=new Color().setHex(ca.sheen)),ca.emissive!==void 0&&Ss.emissive.setHex(ca.emissive),ca.specular!==void 0&&Ss.specular.setHex(ca.specular),ca.shininess!==void 0&&(Ss.shininess=ca.shininess),ca.clearcoat!==void 0&&(Ss.clearcoat=ca.clearcoat),ca.clearcoatRoughness!==void 0&&(Ss.clearcoatRoughness=ca.clearcoatRoughness),ca.fog!==void 0&&(Ss.fog=ca.fog),ca.flatShading!==void 0&&(Ss.flatShading=ca.flatShading),ca.blending!==void 0&&(Ss.blending=ca.blending),ca.combine!==void 0&&(Ss.combine=ca.combine),ca.side!==void 0&&(Ss.side=ca.side),ca.opacity!==void 0&&(Ss.opacity=ca.opacity),ca.transparent!==void 0&&(Ss.transparent=ca.transparent),ca.alphaTest!==void 0&&(Ss.alphaTest=ca.alphaTest),ca.depthTest!==void 0&&(Ss.depthTest=ca.depthTest),ca.depthWrite!==void 0&&(Ss.depthWrite=ca.depthWrite),ca.colorWrite!==void 0&&(Ss.colorWrite=ca.colorWrite),ca.stencilWrite!==void 0&&(Ss.stencilWrite=ca.stencilWrite),ca.stencilWriteMask!==void 0&&(Ss.stencilWriteMask=ca.stencilWriteMask),ca.stencilFunc!==void 0&&(Ss.stencilFunc=ca.stencilFunc),ca.stencilRef!==void 0&&(Ss.stencilRef=ca.stencilRef),ca.stencilFuncMask!==void 0&&(Ss.stencilFuncMask=ca.stencilFuncMask),ca.stencilFail!==void 0&&(Ss.stencilFail=ca.stencilFail),ca.stencilZFail!==void 0&&(Ss.stencilZFail=ca.stencilZFail),ca.stencilZPass!==void 0&&(Ss.stencilZPass=ca.stencilZPass),ca.wireframe!==void 0&&(Ss.wireframe=ca.wireframe),ca.wireframeLinewidth!==void 0&&(Ss.wireframeLinewidth=ca.wireframeLinewidth),ca.wireframeLinecap!==void 0&&(Ss.wireframeLinecap=ca.wireframeLinecap),ca.wireframeLinejoin!==void 0&&(Ss.wireframeLinejoin=ca.wireframeLinejoin),ca.rotation!==void 0&&(Ss.rotation=ca.rotation),ca.linewidth!==1&&(Ss.linewidth=ca.linewidth),ca.dashSize!==void 0&&(Ss.dashSize=ca.dashSize),ca.gapSize!==void 0&&(Ss.gapSize=ca.gapSize),ca.scale!==void 0&&(Ss.scale=ca.scale),ca.polygonOffset!==void 0&&(Ss.polygonOffset=ca.polygonOffset),ca.polygonOffsetFactor!==void 0&&(Ss.polygonOffsetFactor=ca.polygonOffsetFactor),ca.polygonOffsetUnits!==void 0&&(Ss.polygonOffsetUnits=ca.polygonOffsetUnits),ca.skinning!==void 0&&(Ss.skinning=ca.skinning),ca.morphTargets!==void 0&&(Ss.morphTargets=ca.morphTargets),ca.morphNormals!==void 0&&(Ss.morphNormals=ca.morphNormals),ca.dithering!==void 0&&(Ss.dithering=ca.dithering),ca.vertexTangents!==void 0&&(Ss.vertexTangents=ca.vertexTangents),ca.visible!==void 0&&(Ss.visible=ca.visible),ca.toneMapped!==void 0&&(Ss.toneMapped=ca.toneMapped),ca.userData!==void 0&&(Ss.userData=ca.userData),ca.vertexColors!==void 0&&(typeof ca.vertexColors=="number"?Ss.vertexColors=ca.vertexColors>0:Ss.vertexColors=ca.vertexColors),ca.uniforms!==void 0)for(var Ms in ca.uniforms){var Cs=ca.uniforms[Ms];switch(Ss.uniforms[Ms]={},Cs.type){case"t":Ss.uniforms[Ms].value=_s(Cs.value);break;case"c":Ss.uniforms[Ms].value=new Color().setHex(Cs.value);break;case"v2":Ss.uniforms[Ms].value=new Vector2().fromArray(Cs.value);break;case"v3":Ss.uniforms[Ms].value=new Vector3().fromArray(Cs.value);break;case"v4":Ss.uniforms[Ms].value=new Vector4().fromArray(Cs.value);break;case"m3":Ss.uniforms[Ms].value=new Matrix3().fromArray(Cs.value);case"m4":Ss.uniforms[Ms].value=new Matrix4().fromArray(Cs.value);break;default:Ss.uniforms[Ms].value=Cs.value}}if(ca.defines!==void 0&&(Ss.defines=ca.defines),ca.vertexShader!==void 0&&(Ss.vertexShader=ca.vertexShader),ca.fragmentShader!==void 0&&(Ss.fragmentShader=ca.fragmentShader),ca.extensions!==void 0)for(var Ts in ca.extensions)Ss.extensions[Ts]=ca.extensions[Ts];if(ca.shading!==void 0&&(Ss.flatShading=ca.shading===1),ca.size!==void 0&&(Ss.size=ca.size),ca.sizeAttenuation!==void 0&&(Ss.sizeAttenuation=ca.sizeAttenuation),ca.map!==void 0&&(Ss.map=_s(ca.map)),ca.matcap!==void 0&&(Ss.matcap=_s(ca.matcap)),ca.alphaMap!==void 0&&(Ss.alphaMap=_s(ca.alphaMap)),ca.bumpMap!==void 0&&(Ss.bumpMap=_s(ca.bumpMap)),ca.bumpScale!==void 0&&(Ss.bumpScale=ca.bumpScale),ca.normalMap!==void 0&&(Ss.normalMap=_s(ca.normalMap)),ca.normalMapType!==void 0&&(Ss.normalMapType=ca.normalMapType),ca.normalScale!==void 0){var Bs=ca.normalScale;Array.isArray(Bs)===!1&&(Bs=[Bs,Bs]),Ss.normalScale=new Vector2().fromArray(Bs)}return ca.displacementMap!==void 0&&(Ss.displacementMap=_s(ca.displacementMap)),ca.displacementScale!==void 0&&(Ss.displacementScale=ca.displacementScale),ca.displacementBias!==void 0&&(Ss.displacementBias=ca.displacementBias),ca.roughnessMap!==void 0&&(Ss.roughnessMap=_s(ca.roughnessMap)),ca.metalnessMap!==void 0&&(Ss.metalnessMap=_s(ca.metalnessMap)),ca.emissiveMap!==void 0&&(Ss.emissiveMap=_s(ca.emissiveMap)),ca.emissiveIntensity!==void 0&&(Ss.emissiveIntensity=ca.emissiveIntensity),ca.specularMap!==void 0&&(Ss.specularMap=_s(ca.specularMap)),ca.envMap!==void 0&&(Ss.envMap=_s(ca.envMap)),ca.envMapIntensity!==void 0&&(Ss.envMapIntensity=ca.envMapIntensity),ca.reflectivity!==void 0&&(Ss.reflectivity=ca.reflectivity),ca.refractionRatio!==void 0&&(Ss.refractionRatio=ca.refractionRatio),ca.lightMap!==void 0&&(Ss.lightMap=_s(ca.lightMap)),ca.lightMapIntensity!==void 0&&(Ss.lightMapIntensity=ca.lightMapIntensity),ca.aoMap!==void 0&&(Ss.aoMap=_s(ca.aoMap)),ca.aoMapIntensity!==void 0&&(Ss.aoMapIntensity=ca.aoMapIntensity),ca.gradientMap!==void 0&&(Ss.gradientMap=_s(ca.gradientMap)),ca.clearcoatMap!==void 0&&(Ss.clearcoatMap=_s(ca.clearcoatMap)),ca.clearcoatRoughnessMap!==void 0&&(Ss.clearcoatRoughnessMap=_s(ca.clearcoatRoughnessMap)),ca.clearcoatNormalMap!==void 0&&(Ss.clearcoatNormalMap=_s(ca.clearcoatNormalMap)),ca.clearcoatNormalScale!==void 0&&(Ss.clearcoatNormalScale=new Vector2().fromArray(ca.clearcoatNormalScale)),Ss},setTextures:function(ca){return this.textures=ca,this}});var LoaderUtils={decodeText:function(ca){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(ca);for(var ga="",_s=0,Ss=ca.length;_s<Ss;_s++)ga+=String.fromCharCode(ca[_s]);try{return decodeURIComponent(escape(ga))}catch{return ga}},extractUrlBase:function(ca){var ga=ca.lastIndexOf("/");return ga===-1?"./":ca.substr(0,ga+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(ca){return BufferGeometry.prototype.copy.call(this,ca),this.instanceCount=ca.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.instanceCount=this.instanceCount,ca.isInstancedBufferGeometry=!0,ca}});function InstancedBufferAttribute(ca,ga,_s,Ss){typeof _s=="number"&&(Ss=_s,_s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,ca,ga,_s),this.meshPerAttribute=Ss||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(ca){return BufferAttribute.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this},toJSON:function(){var ca=BufferAttribute.prototype.toJSON.call(this);return ca.meshPerAttribute=this.meshPerAttribute,ca.isInstancedBufferAttribute=!0,ca}});function BufferGeometryLoader(ca){Loader.call(this,ca)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{ga(Ms.parse(JSON.parse(Ts)))}catch(Bs){Ss?Ss(Bs):console.error(Bs),Ms.manager.itemError(ca)}},_s,Ss)},parse:function(ca){var ga=ca.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,_s=ca.data.index;if(_s!==void 0){var Ss=new TYPED_ARRAYS[_s.type](_s.array);ga.setIndex(new BufferAttribute(Ss,1))}var Ms=ca.data.attributes;for(var Cs in Ms){var Ts=Ms[Cs],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Bs=Ts.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Ps=new Bs(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Ps.name=Ts.name),ga.setAttribute(Cs,Ps)}var Ls=ca.data.morphAttributes;if(Ls)for(var Cs in Ls){for(var Rs=Ls[Cs],Ds=[],$s=0,Fs=Rs.length;$s<Fs;$s++){var Ts=Rs[$s],Ss=new TYPED_ARRAYS[Ts.type](Ts.array),Ps=new BufferAttribute(Ss,Ts.itemSize,Ts.normalized);Ts.name!==void 0&&(Ps.name=Ts.name),Ds.push(Ps)}ga.morphAttributes[Cs]=Ds}var Gs=ca.data.morphTargetsRelative;Gs&&(ga.morphTargetsRelative=!0);var Vs=ca.data.groups||ca.data.drawcalls||ca.data.offsets;if(Vs!==void 0)for(var $s=0,ks=Vs.length;$s!==ks;++$s){var Os=Vs[$s];ga.addGroup(Os.start,Os.count,Os.materialIndex)}var Ns=ca.data.boundingSphere;if(Ns!==void 0){var Us=new Vector3;Ns.center!==void 0&&Us.fromArray(Ns.center),ga.boundingSphere=new Sphere(Us,Ns.radius)}return ca.name&&(ga.name=ca.name),ca.userData&&(ga.userData=ca.userData),ga}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(ca){Loader.call(this,ca)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=this.path===""?LoaderUtils.extractUrlBase(ca):this.path;this.resourcePath=this.resourcePath||Cs;var Ts=new FileLoader(Ms.manager);Ts.setPath(this.path),Ts.load(ca,function(Bs){var Ps=null;try{Ps=JSON.parse(Bs)}catch(Rs){Ss!==void 0&&Ss(Rs),console.error("THREE:ObjectLoader: Can't parse "+ca+".",Rs.message);return}var Ls=Ps.metadata;if(Ls===void 0||Ls.type===void 0||Ls.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+ca);return}Ms.parse(Ps,ga)},_s,Ss)},parse:function(ca,ga){var _s=this.parseShape(ca.shapes),Ss=this.parseGeometries(ca.geometries,_s),Ms=this.parseImages(ca.images,function(){ga!==void 0&&ga(Bs)}),Cs=this.parseTextures(ca.textures,Ms),Ts=this.parseMaterials(ca.materials,Cs),Bs=this.parseObject(ca.object,Ss,Ts);return ca.animations&&(Bs.animations=this.parseAnimations(ca.animations)),(ca.images===void 0||ca.images.length===0)&&ga!==void 0&&ga(Bs),Bs},parseShape:function(ca){var ga={};if(ca!==void 0)for(var _s=0,Ss=ca.length;_s<Ss;_s++){var Ms=new Shape().fromJSON(ca[_s]);ga[Ms.uuid]=Ms}return ga},parseGeometries:function(ca,ga){var _s={};if(ca!==void 0)for(var Ss=new BufferGeometryLoader,Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts,Bs=ca[Ms];switch(Bs.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ts=new Geometries[Bs.type](Bs.width,Bs.height,Bs.widthSegments,Bs.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ts=new Geometries[Bs.type](Bs.width,Bs.height,Bs.depth,Bs.widthSegments,Bs.heightSegments,Bs.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.segments,Bs.thetaStart,Bs.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ts=new Geometries[Bs.type](Bs.radiusTop,Bs.radiusBottom,Bs.height,Bs.radialSegments,Bs.heightSegments,Bs.openEnded,Bs.thetaStart,Bs.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.height,Bs.radialSegments,Bs.heightSegments,Bs.openEnded,Bs.thetaStart,Bs.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.widthSegments,Bs.heightSegments,Bs.phiStart,Bs.phiLength,Bs.thetaStart,Bs.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.detail);break;case"RingGeometry":case"RingBufferGeometry":Ts=new Geometries[Bs.type](Bs.innerRadius,Bs.outerRadius,Bs.thetaSegments,Bs.phiSegments,Bs.thetaStart,Bs.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.tube,Bs.radialSegments,Bs.tubularSegments,Bs.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ts=new Geometries[Bs.type](Bs.radius,Bs.tube,Bs.tubularSegments,Bs.radialSegments,Bs.p,Bs.q);break;case"TubeGeometry":case"TubeBufferGeometry":Ts=new Geometries[Bs.type](new Curves[Bs.path.type]().fromJSON(Bs.path),Bs.tubularSegments,Bs.radius,Bs.radialSegments,Bs.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Ts=new Geometries[Bs.type](Bs.points,Bs.segments,Bs.phiStart,Bs.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Ts=new Geometries[Bs.type](Bs.vertices,Bs.indices,Bs.radius,Bs.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Ps=[],Ls=0,Rs=Bs.shapes.length;Ls<Rs;Ls++){var Ds=ga[Bs.shapes[Ls]];Ps.push(Ds)}Ts=new Geometries[Bs.type](Ps,Bs.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Ps=[],Ls=0,Rs=Bs.shapes.length;Ls<Rs;Ls++){var Ds=ga[Bs.shapes[Ls]];Ps.push(Ds)}var $s=Bs.options.extrudePath;$s!==void 0&&(Bs.options.extrudePath=new Curves[$s.type]().fromJSON($s)),Ts=new Geometries[Bs.type](Ps,Bs.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Ts=Ss.parse(Bs);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Bs.type+'"');continue}Ts.uuid=Bs.uuid,Bs.name!==void 0&&(Ts.name=Bs.name),Ts.isBufferGeometry===!0&&Bs.userData!==void 0&&(Ts.userData=Bs.userData),_s[Bs.uuid]=Ts}return _s},parseMaterials:function(ca,ga){var _s={},Ss={};if(ca!==void 0){var Ms=new MaterialLoader;Ms.setTextures(ga);for(var Cs=0,Ts=ca.length;Cs<Ts;Cs++){var Bs=ca[Cs];if(Bs.type==="MultiMaterial"){for(var Ps=[],Ls=0;Ls<Bs.materials.length;Ls++){var Rs=Bs.materials[Ls];_s[Rs.uuid]===void 0&&(_s[Rs.uuid]=Ms.parse(Rs)),Ps.push(_s[Rs.uuid])}Ss[Bs.uuid]=Ps}else _s[Bs.uuid]===void 0&&(_s[Bs.uuid]=Ms.parse(Bs)),Ss[Bs.uuid]=_s[Bs.uuid]}}return Ss},parseAnimations:function(ca){for(var ga=[],_s=0;_s<ca.length;_s++){var Ss=ca[_s],Ms=AnimationClip.parse(Ss);Ss.uuid!==void 0&&(Ms.uuid=Ss.uuid),ga.push(Ms)}return ga},parseImages:function(ca,ga){var _s=this,Ss={};function Ms(Vs){return _s.manager.itemStart(Vs),Ts.load(Vs,function(){_s.manager.itemEnd(Vs)},void 0,function(){_s.manager.itemError(Vs),_s.manager.itemEnd(Vs)})}if(ca!==void 0&&ca.length>0){var Cs=new LoadingManager(ga),Ts=new ImageLoader(Cs);Ts.setCrossOrigin(this.crossOrigin);for(var Bs=0,Ps=ca.length;Bs<Ps;Bs++){var Ls=ca[Bs],Rs=Ls.url;if(Array.isArray(Rs)){Ss[Ls.uuid]=[];for(var Ds=0,$s=Rs.length;Ds<$s;Ds++){var Fs=Rs[Ds],Gs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Fs)?Fs:_s.resourcePath+Fs;Ss[Ls.uuid].push(Ms(Gs))}}else{var Gs=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ls.url)?Ls.url:_s.resourcePath+Ls.url;Ss[Ls.uuid]=Ms(Gs)}}}return Ss},parseTextures:function(ca,ga){function _s(Ps,Ls){return typeof Ps=="number"?Ps:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ps),Ls[Ps])}var Ss={};if(ca!==void 0)for(var Ms=0,Cs=ca.length;Ms<Cs;Ms++){var Ts=ca[Ms];Ts.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Ts.uuid),ga[Ts.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Ts.image);var Bs;Array.isArray(ga[Ts.image])?Bs=new CubeTexture(ga[Ts.image]):Bs=new Texture(ga[Ts.image]),Bs.needsUpdate=!0,Bs.uuid=Ts.uuid,Ts.name!==void 0&&(Bs.name=Ts.name),Ts.mapping!==void 0&&(Bs.mapping=_s(Ts.mapping,TEXTURE_MAPPING)),Ts.offset!==void 0&&Bs.offset.fromArray(Ts.offset),Ts.repeat!==void 0&&Bs.repeat.fromArray(Ts.repeat),Ts.center!==void 0&&Bs.center.fromArray(Ts.center),Ts.rotation!==void 0&&(Bs.rotation=Ts.rotation),Ts.wrap!==void 0&&(Bs.wrapS=_s(Ts.wrap[0],TEXTURE_WRAPPING),Bs.wrapT=_s(Ts.wrap[1],TEXTURE_WRAPPING)),Ts.format!==void 0&&(Bs.format=Ts.format),Ts.type!==void 0&&(Bs.type=Ts.type),Ts.encoding!==void 0&&(Bs.encoding=Ts.encoding),Ts.minFilter!==void 0&&(Bs.minFilter=_s(Ts.minFilter,TEXTURE_FILTER)),Ts.magFilter!==void 0&&(Bs.magFilter=_s(Ts.magFilter,TEXTURE_FILTER)),Ts.anisotropy!==void 0&&(Bs.anisotropy=Ts.anisotropy),Ts.flipY!==void 0&&(Bs.flipY=Ts.flipY),Ts.premultiplyAlpha!==void 0&&(Bs.premultiplyAlpha=Ts.premultiplyAlpha),Ts.unpackAlignment!==void 0&&(Bs.unpackAlignment=Ts.unpackAlignment),Ss[Ts.uuid]=Bs}return Ss},parseObject:function(ca,ga,_s){var Ss;function Ms(ks){return ga[ks]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ks),ga[ks]}function Cs(ks){if(ks!==void 0){if(Array.isArray(ks)){for(var Os=[],Ns=0,Us=ks.length;Ns<Us;Ns++){var Hs=ks[Ns];_s[Hs]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Hs),Os.push(_s[Hs])}return Os}return _s[ks]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ks),_s[ks]}}switch(ca.type){case"Scene":Ss=new Scene,ca.background!==void 0&&Number.isInteger(ca.background)&&(Ss.background=new Color(ca.background)),ca.fog!==void 0&&(ca.fog.type==="Fog"?Ss.fog=new Fog(ca.fog.color,ca.fog.near,ca.fog.far):ca.fog.type==="FogExp2"&&(Ss.fog=new FogExp2(ca.fog.color,ca.fog.density)));break;case"PerspectiveCamera":Ss=new PerspectiveCamera(ca.fov,ca.aspect,ca.near,ca.far),ca.focus!==void 0&&(Ss.focus=ca.focus),ca.zoom!==void 0&&(Ss.zoom=ca.zoom),ca.filmGauge!==void 0&&(Ss.filmGauge=ca.filmGauge),ca.filmOffset!==void 0&&(Ss.filmOffset=ca.filmOffset),ca.view!==void 0&&(Ss.view=Object.assign({},ca.view));break;case"OrthographicCamera":Ss=new OrthographicCamera(ca.left,ca.right,ca.top,ca.bottom,ca.near,ca.far),ca.zoom!==void 0&&(Ss.zoom=ca.zoom),ca.view!==void 0&&(Ss.view=Object.assign({},ca.view));break;case"AmbientLight":Ss=new AmbientLight(ca.color,ca.intensity);break;case"DirectionalLight":Ss=new DirectionalLight(ca.color,ca.intensity);break;case"PointLight":Ss=new PointLight(ca.color,ca.intensity,ca.distance,ca.decay);break;case"RectAreaLight":Ss=new RectAreaLight(ca.color,ca.intensity,ca.width,ca.height);break;case"SpotLight":Ss=new SpotLight(ca.color,ca.intensity,ca.distance,ca.angle,ca.penumbra,ca.decay);break;case"HemisphereLight":Ss=new HemisphereLight(ca.color,ca.groundColor,ca.intensity);break;case"LightProbe":Ss=new LightProbe().fromJSON(ca);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Ts=Ms(ca.geometry),Bs=Cs(ca.material);Ss=new Mesh(Ts,Bs);break;case"InstancedMesh":var Ts=Ms(ca.geometry),Bs=Cs(ca.material),Ps=ca.count,Ls=ca.instanceMatrix;Ss=new InstancedMesh(Ts,Bs,Ps),Ss.instanceMatrix=new BufferAttribute(new Float32Array(Ls.array),16);break;case"LOD":Ss=new LOD;break;case"Line":Ss=new Line$1(Ms(ca.geometry),Cs(ca.material),ca.mode);break;case"LineLoop":Ss=new LineLoop(Ms(ca.geometry),Cs(ca.material));break;case"LineSegments":Ss=new LineSegments(Ms(ca.geometry),Cs(ca.material));break;case"PointCloud":case"Points":Ss=new Points(Ms(ca.geometry),Cs(ca.material));break;case"Sprite":Ss=new Sprite(Cs(ca.material));break;case"Group":Ss=new Group$1;break;default:Ss=new Object3D}if(Ss.uuid=ca.uuid,ca.name!==void 0&&(Ss.name=ca.name),ca.matrix!==void 0?(Ss.matrix.fromArray(ca.matrix),ca.matrixAutoUpdate!==void 0&&(Ss.matrixAutoUpdate=ca.matrixAutoUpdate),Ss.matrixAutoUpdate&&Ss.matrix.decompose(Ss.position,Ss.quaternion,Ss.scale)):(ca.position!==void 0&&Ss.position.fromArray(ca.position),ca.rotation!==void 0&&Ss.rotation.fromArray(ca.rotation),ca.quaternion!==void 0&&Ss.quaternion.fromArray(ca.quaternion),ca.scale!==void 0&&Ss.scale.fromArray(ca.scale)),ca.castShadow!==void 0&&(Ss.castShadow=ca.castShadow),ca.receiveShadow!==void 0&&(Ss.receiveShadow=ca.receiveShadow),ca.shadow&&(ca.shadow.bias!==void 0&&(Ss.shadow.bias=ca.shadow.bias),ca.shadow.radius!==void 0&&(Ss.shadow.radius=ca.shadow.radius),ca.shadow.mapSize!==void 0&&Ss.shadow.mapSize.fromArray(ca.shadow.mapSize),ca.shadow.camera!==void 0&&(Ss.shadow.camera=this.parseObject(ca.shadow.camera))),ca.visible!==void 0&&(Ss.visible=ca.visible),ca.frustumCulled!==void 0&&(Ss.frustumCulled=ca.frustumCulled),ca.renderOrder!==void 0&&(Ss.renderOrder=ca.renderOrder),ca.userData!==void 0&&(Ss.userData=ca.userData),ca.layers!==void 0&&(Ss.layers.mask=ca.layers),ca.children!==void 0)for(var Rs=ca.children,Ds=0;Ds<Rs.length;Ds++)Ss.add(this.parseObject(Rs[Ds],ga,_s));if(ca.type==="LOD"){ca.autoUpdate!==void 0&&(Ss.autoUpdate=ca.autoUpdate);for(var $s=ca.levels,Fs=0;Fs<$s.length;Fs++){var Gs=$s[Fs],Vs=Ss.getObjectByProperty("uuid",Gs.object);Vs!==void 0&&Ss.addLevel(Vs,Gs.distance)}}return Ss}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(ca){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,ca),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(ga){return this.options=ga,this},load:function(ca,ga,_s,Ss){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var Ms=this,Cs=Cache.get(ca);if(Cs!==void 0)return Ms.manager.itemStart(ca),setTimeout(function(){ga&&ga(Cs),Ms.manager.itemEnd(ca)},0),Cs;fetch(ca).then(function(Ts){return Ts.blob()}).then(function(Ts){return Ms.options===void 0?createImageBitmap(Ts):createImageBitmap(Ts,Ms.options)}).then(function(Ts){Cache.add(ca,Ts),ga&&ga(Ts),Ms.manager.itemEnd(ca)}).catch(function(Ts){Ss&&Ss(Ts),Ms.manager.itemError(ca),Ms.manager.itemEnd(ca)}),Ms.manager.itemStart(ca)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(ca,ga){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(ca,ga),this},lineTo:function(ca,ga){return this.currentPath.lineTo(ca,ga),this},quadraticCurveTo:function(ca,ga,_s,Ss){return this.currentPath.quadraticCurveTo(ca,ga,_s,Ss),this},bezierCurveTo:function(ca,ga,_s,Ss,Ms,Cs){return this.currentPath.bezierCurveTo(ca,ga,_s,Ss,Ms,Cs),this},splineThru:function(ca){return this.currentPath.splineThru(ca),this},toShapes:function(ca,ga){function _s(Zs){for(var au=[],ru=0,su=Zs.length;ru<su;ru++){var lu=Zs[ru],gu=new Shape;gu.curves=lu.curves,au.push(gu)}return au}function Ss(Zs,au){for(var ru=au.length,su=!1,lu=ru-1,gu=0;gu<ru;lu=gu++){var hu=au[lu],wu=au[gu],Mu=wu.x-hu.x,du=wu.y-hu.y;if(Math.abs(du)>Number.EPSILON){if(du<0&&(hu=au[gu],Mu=-Mu,wu=au[lu],du=-du),Zs.y<hu.y||Zs.y>wu.y)continue;if(Zs.y===hu.y){if(Zs.x===hu.x)return!0}else{var vu=du*(Zs.x-hu.x)-Mu*(Zs.y-hu.y);if(vu===0)return!0;if(vu<0)continue;su=!su}}else{if(Zs.y!==hu.y)continue;if(wu.x<=Zs.x&&Zs.x<=hu.x||hu.x<=Zs.x&&Zs.x<=wu.x)return!0}}return su}var Ms=ShapeUtils.isClockWise,Cs=this.subPaths;if(Cs.length===0)return[];if(ga===!0)return _s(Cs);var Ts,Bs,Ps,Ls=[];if(Cs.length===1)return Bs=Cs[0],Ps=new Shape,Ps.curves=Bs.curves,Ls.push(Ps),Ls;var Rs=!Ms(Cs[0].getPoints());Rs=ca?!Rs:Rs;var Ds=[],$s=[],Fs=[],Gs=0,Vs;$s[Gs]=void 0,Fs[Gs]=[];for(var ks=0,Os=Cs.length;ks<Os;ks++)Bs=Cs[ks],Vs=Bs.getPoints(),Ts=Ms(Vs),Ts=ca?!Ts:Ts,Ts?(!Rs&&$s[Gs]&&Gs++,$s[Gs]={s:new Shape,p:Vs},$s[Gs].s.curves=Bs.curves,Rs&&Gs++,Fs[Gs]=[]):Fs[Gs].push({h:Bs,p:Vs[0]});if(!$s[0])return _s(Cs);if($s.length>1){for(var Ns=!1,Us=[],Hs=0,zs=$s.length;Hs<zs;Hs++)Ds[Hs]=[];for(var Hs=0,zs=$s.length;Hs<zs;Hs++)for(var js=Fs[Hs],Ws=0;Ws<js.length;Ws++){for(var Qs=js[Ws],qs=!0,tu=0;tu<$s.length;tu++)Ss(Qs.p,$s[tu].p)&&(Hs!==tu&&Us.push({froms:Hs,tos:tu,hole:Ws}),qs?(qs=!1,Ds[tu].push(Qs)):Ns=!0);qs&&Ds[Hs].push(Qs)}Us.length>0&&(Ns||(Fs=Ds))}for(var Ys,ks=0,Ks=$s.length;ks<Ks;ks++){Ps=$s[ks].s,Ls.push(Ps),Ys=Fs[ks];for(var Js=0,eu=Ys.length;Js<eu;Js++)Ps.holes.push(Ys[Js].h)}return Ls}});function Font(ca){this.type="Font",this.data=ca}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(ca,ga){ga===void 0&&(ga=100);for(var _s=[],Ss=createPaths(ca,ga,this.data),Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Array.prototype.push.apply(_s,Ss[Ms].toShapes());return _s}});function createPaths(ca,ga,_s){for(var Ss=Array.from?Array.from(ca):String(ca).split(""),Ms=ga/_s.resolution,Cs=(_s.boundingBox.yMax-_s.boundingBox.yMin+_s.underlineThickness)*Ms,Ts=[],Bs=0,Ps=0,Ls=0;Ls<Ss.length;Ls++){var Rs=Ss[Ls];if(Rs===`
`)Bs=0,Ps-=Cs;else{var Ds=createPath(Rs,Ms,Bs,Ps,_s);Bs+=Ds.offsetX,Ts.push(Ds.path)}}return Ts}function createPath(ca,ga,_s,Ss,Ms){var Cs=Ms.glyphs[ca]||Ms.glyphs["?"];if(!Cs){console.error('THREE.Font: character "'+ca+'" does not exists in font family '+Ms.familyName+".");return}var Ts=new ShapePath,Bs,Ps,Ls,Rs,Ds,$s,Fs,Gs;if(Cs.o)for(var Vs=Cs._cachedOutline||(Cs._cachedOutline=Cs.o.split(" ")),ks=0,Os=Vs.length;ks<Os;){var Ns=Vs[ks++];switch(Ns){case"m":Bs=Vs[ks++]*ga+_s,Ps=Vs[ks++]*ga+Ss,Ts.moveTo(Bs,Ps);break;case"l":Bs=Vs[ks++]*ga+_s,Ps=Vs[ks++]*ga+Ss,Ts.lineTo(Bs,Ps);break;case"q":Ls=Vs[ks++]*ga+_s,Rs=Vs[ks++]*ga+Ss,Ds=Vs[ks++]*ga+_s,$s=Vs[ks++]*ga+Ss,Ts.quadraticCurveTo(Ds,$s,Ls,Rs);break;case"b":Ls=Vs[ks++]*ga+_s,Rs=Vs[ks++]*ga+Ss,Ds=Vs[ks++]*ga+_s,$s=Vs[ks++]*ga+Ss,Fs=Vs[ks++]*ga+_s,Gs=Vs[ks++]*ga+Ss,Ts.bezierCurveTo(Ds,$s,Fs,Gs,Ls,Rs);break}}return{offsetX:Cs.ha*ga,path:Ts}}function FontLoader(ca){Loader.call(this,ca)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(this.manager);Cs.setPath(this.path),Cs.load(ca,function(Ts){var Bs;try{Bs=JSON.parse(Ts)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Bs=JSON.parse(Ts.substring(65,Ts.length-2))}var Ps=Ms.parse(Bs);ga&&ga(Ps)},_s,Ss)},parse:function(ca){return new Font(ca)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(ca){_context=ca}};function AudioLoader(ca){Loader.call(this,ca)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(ca,ga,_s,Ss){var Ms=this,Cs=new FileLoader(Ms.manager);Cs.setResponseType("arraybuffer"),Cs.setPath(Ms.path),Cs.load(ca,function(Ts){try{var Bs=Ts.slice(0),Ps=AudioContext.getContext();Ps.decodeAudioData(Bs,function(Ls){ga(Ls)})}catch(Ls){Ss?Ss(Ls):console.error(Ls),Ms.manager.itemError(ca)}},_s,Ss)}});function HemisphereLightProbe(ca,ga,_s){LightProbe.call(this,void 0,_s);var Ss=new Color().set(ca),Ms=new Color().set(ga),Cs=new Vector3(Ss.r,Ss.g,Ss.b),Ts=new Vector3(Ms.r,Ms.g,Ms.b),Bs=Math.sqrt(Math.PI),Ps=Bs*Math.sqrt(.75);this.sh.coefficients[0].copy(Cs).add(Ts).multiplyScalar(Bs),this.sh.coefficients[1].copy(Cs).sub(Ts).multiplyScalar(Ps)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});function AmbientLightProbe(ca,ga){LightProbe.call(this,void 0,ga);var _s=new Color().set(ca);this.sh.coefficients[0].set(_s.r,_s.g,_s.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(ca){var ga=this._cache,_s=ga.focus!==ca.focus||ga.fov!==ca.fov||ga.aspect!==ca.aspect*this.aspect||ga.near!==ca.near||ga.far!==ca.far||ga.zoom!==ca.zoom||ga.eyeSep!==this.eyeSep;if(_s){ga.focus=ca.focus,ga.fov=ca.fov,ga.aspect=ca.aspect*this.aspect,ga.near=ca.near,ga.far=ca.far,ga.zoom=ca.zoom,ga.eyeSep=this.eyeSep;var Ss=ca.projectionMatrix.clone(),Ms=ga.eyeSep/2,Cs=Ms*ga.near/ga.focus,Ts=ga.near*Math.tan(MathUtils.DEG2RAD*ga.fov*.5)/ga.zoom,Bs,Ps;_eyeLeft.elements[12]=-Ms,_eyeRight.elements[12]=Ms,Bs=-Ts*ga.aspect+Cs,Ps=Ts*ga.aspect+Cs,Ss.elements[0]=2*ga.near/(Ps-Bs),Ss.elements[8]=(Ps+Bs)/(Ps-Bs),this.cameraL.projectionMatrix.copy(Ss),Bs=-Ts*ga.aspect-Cs,Ps=Ts*ga.aspect-Cs,Ss.elements[0]=2*ga.near/(Ps-Bs),Ss.elements[8]=(Ps+Bs)/(Ps-Bs),this.cameraR.projectionMatrix.copy(Ss)}this.cameraL.matrixWorld.copy(ca.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(ca.matrixWorld).multiply(_eyeRight)}});function Clock(ca){this.autoStart=ca!==void 0?ca:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var ca=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var ga=(typeof performance=="undefined"?Date:performance).now();ca=(ga-this.oldTime)/1e3,this.oldTime=ga,this.elapsedTime+=ca}return ca}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(ca){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=ca,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca);var ga=this.context.listener,_s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),ga.positionX){var Ss=this.context.currentTime+this.timeDelta;ga.positionX.linearRampToValueAtTime(_position$2.x,Ss),ga.positionY.linearRampToValueAtTime(_position$2.y,Ss),ga.positionZ.linearRampToValueAtTime(_position$2.z,Ss),ga.forwardX.linearRampToValueAtTime(_orientation.x,Ss),ga.forwardY.linearRampToValueAtTime(_orientation.y,Ss),ga.forwardZ.linearRampToValueAtTime(_orientation.z,Ss),ga.upX.linearRampToValueAtTime(_s.x,Ss),ga.upY.linearRampToValueAtTime(_s.y,Ss),ga.upZ.linearRampToValueAtTime(_s.z,Ss)}else ga.setPosition(_position$2.x,_position$2.y,_position$2.z),ga.setOrientation(_orientation.x,_orientation.y,_orientation.z,_s.x,_s.y,_s.z)}});function Audio(ca){Object3D.call(this),this.type="Audio",this.listener=ca,this.context=ca.context,this.gain=this.context.createGain(),this.gain.connect(ca.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=ca,this.connect(),this},setMediaElementSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(ca),this.connect(),this},setMediaStreamSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(ca),this.connect(),this},setBuffer:function(ca){return this.buffer=ca,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(ca){if(ca===void 0&&(ca=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+ca;var ga=this.context.createBufferSource();return ga.buffer=this.buffer,ga.loop=this.loop,ga.loopStart=this.loopStart,ga.loopEnd=this.loopEnd,ga.onended=this.onEnded.bind(this),ga.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=ga,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].connect(this.filters[ca]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].disconnect(this.filters[ca]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(ca){return ca||(ca=[]),this.isPlaying===!0?(this.disconnect(),this.filters=ca,this.connect()):this.filters=ca,this},setDetune:function(ca){if(this.detune=ca,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(ca){return this.setFilters(ca?[ca]:[])},setPlaybackRate:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=ca,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=ca,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(ca){return this.loopStart=ca,this},setLoopEnd:function(ca){return this.loopEnd=ca,this},getVolume:function(){return this.gain.gain.value},setVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(ca){Audio.call(this,ca),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(ca){return this.panner.refDistance=ca,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(ca){return this.panner.rolloffFactor=ca,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(ca){return this.panner.distanceModel=ca,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(ca){return this.panner.maxDistance=ca,this},setDirectionalCone:function(ca,ga,_s){return this.panner.coneInnerAngle=ca,this.panner.coneOuterAngle=ga,this.panner.coneOuterGain=_s,this},updateMatrixWorld:function(ca){if(Object3D.prototype.updateMatrixWorld.call(this,ca),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var ga=this.panner;if(ga.positionX){var _s=this.context.currentTime+this.listener.timeDelta;ga.positionX.linearRampToValueAtTime(_position$3.x,_s),ga.positionY.linearRampToValueAtTime(_position$3.y,_s),ga.positionZ.linearRampToValueAtTime(_position$3.z,_s),ga.orientationX.linearRampToValueAtTime(_orientation$1.x,_s),ga.orientationY.linearRampToValueAtTime(_orientation$1.y,_s),ga.orientationZ.linearRampToValueAtTime(_orientation$1.z,_s)}else ga.setPosition(_position$3.x,_position$3.y,_position$3.z),ga.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(ca,ga){this.analyser=ca.context.createAnalyser(),this.analyser.fftSize=ga!==void 0?ga:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),ca.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var ca=0,ga=this.getFrequencyData(),_s=0;_s<ga.length;_s++)ca+=ga[_s];return ca/ga.length}});function PropertyMixer(ca,ga,_s){this.binding=ca,this.valueSize=_s;var Ss,Ms,Cs;switch(ga){case"quaternion":Ss=this._slerp,Ms=this._slerpAdditive,Cs=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(_s*6),this._workIndex=5;break;case"string":case"bool":Ss=this._select,Ms=this._select,Cs=this._setAdditiveIdentityOther,this.buffer=new Array(_s*5);break;default:Ss=this._lerp,Ms=this._lerpAdditive,Cs=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(_s*5)}this._mixBufferRegion=Ss,this._mixBufferRegionAdditive=Ms,this._setIdentity=Cs,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(ca,ga){var _s=this.buffer,Ss=this.valueSize,Ms=ca*Ss+Ss,Cs=this.cumulativeWeight;if(Cs===0){for(var Ts=0;Ts!==Ss;++Ts)_s[Ms+Ts]=_s[Ts];Cs=ga}else{Cs+=ga;var Bs=ga/Cs;this._mixBufferRegion(_s,Ms,0,Bs,Ss)}this.cumulativeWeight=Cs},accumulateAdditive:function(ca){var ga=this.buffer,_s=this.valueSize,Ss=_s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(ga,Ss,0,ca,_s),this.cumulativeWeightAdditive+=ca},apply:function(ca){var ga=this.valueSize,_s=this.buffer,Ss=ca*ga+ga,Ms=this.cumulativeWeight,Cs=this.cumulativeWeightAdditive,Ts=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Ms<1){var Bs=ga*this._origIndex;this._mixBufferRegion(_s,Ss,Bs,1-Ms,ga)}Cs>0&&this._mixBufferRegionAdditive(_s,Ss,this._addIndex*ga,1,ga);for(var Ps=ga,Ls=ga+ga;Ps!==Ls;++Ps)if(_s[Ps]!==_s[Ps+ga]){Ts.setValue(_s,Ss);break}},saveOriginalState:function(){var ca=this.binding,ga=this.buffer,_s=this.valueSize,Ss=_s*this._origIndex;ca.getValue(ga,Ss);for(var Ms=_s,Cs=Ss;Ms!==Cs;++Ms)ga[Ms]=ga[Ss+Ms%_s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var ca=this.valueSize*3;this.binding.setValue(this.buffer,ca)},_setAdditiveIdentityNumeric:function(){for(var ca=this._addIndex*this.valueSize,ga=ca+this.valueSize,_s=ca;_s<ga;_s++)this.buffer[_s]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var ca=this._origIndex*this.valueSize,ga=this._addIndex*this.valueSize,_s=0;_s<this.valueSize;_s++)this.buffer[ga+_s]=this.buffer[ca+_s]},_select:function(ca,ga,_s,Ss,Ms){if(Ss>=.5)for(var Cs=0;Cs!==Ms;++Cs)ca[ga+Cs]=ca[_s+Cs]},_slerp:function(ca,ga,_s,Ss){Quaternion.slerpFlat(ca,ga,ca,ga,ca,_s,Ss)},_slerpAdditive:function(ca,ga,_s,Ss,Ms){var Cs=this._workIndex*Ms;Quaternion.multiplyQuaternionsFlat(ca,Cs,ca,ga,ca,_s),Quaternion.slerpFlat(ca,ga,ca,ga,ca,Cs,Ss)},_lerp:function(ca,ga,_s,Ss,Ms){for(var Cs=1-Ss,Ts=0;Ts!==Ms;++Ts){var Bs=ga+Ts;ca[Bs]=ca[Bs]*Cs+ca[_s+Ts]*Ss}},_lerpAdditive:function(ca,ga,_s,Ss,Ms){for(var Cs=0;Cs!==Ms;++Cs){var Ts=ga+Cs;ca[Ts]=ca[Ts]+ca[_s+Cs]*Ss}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(ca,ga,_s){var Ss=_s||PropertyBinding.parseTrackName(ga);this._targetGroup=ca,this._bindings=ca.subscribe_(ga,Ss)}Object.assign(Composite.prototype,{getValue:function(ca,ga){this.bind();var _s=this._targetGroup.nCachedObjects_,Ss=this._bindings[_s];Ss!==void 0&&Ss.getValue(ca,ga)},setValue:function(ca,ga){for(var _s=this._bindings,Ss=this._targetGroup.nCachedObjects_,Ms=_s.length;Ss!==Ms;++Ss)_s[Ss].setValue(ca,ga)},bind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,_s=ca.length;ga!==_s;++ga)ca[ga].bind()},unbind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,_s=ca.length;ga!==_s;++ga)ca[ga].unbind()}});function PropertyBinding(ca,ga,_s){this.path=ga,this.parsedPath=_s||PropertyBinding.parseTrackName(ga),this.node=PropertyBinding.findNode(ca,this.parsedPath.nodeName)||ca,this.rootNode=ca}Object.assign(PropertyBinding,{Composite,create:function(ca,ga,_s){return ca&&ca.isAnimationObjectGroup?new PropertyBinding.Composite(ca,ga,_s):new PropertyBinding(ca,ga,_s)},sanitizeNodeName:function(ca){return ca.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(ca){var ga=_trackRe.exec(ca);if(!ga)throw new Error("PropertyBinding: Cannot parse trackName: "+ca);var _s={nodeName:ga[2],objectName:ga[3],objectIndex:ga[4],propertyName:ga[5],propertyIndex:ga[6]},Ss=_s.nodeName&&_s.nodeName.lastIndexOf(".");if(Ss!==void 0&&Ss!==-1){var Ms=_s.nodeName.substring(Ss+1);_supportedObjectNames.indexOf(Ms)!==-1&&(_s.nodeName=_s.nodeName.substring(0,Ss),_s.objectName=Ms)}if(_s.propertyName===null||_s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+ca);return _s},findNode:function(ca,ga){if(!ga||ga===""||ga==="."||ga===-1||ga===ca.name||ga===ca.uuid)return ca;if(ca.skeleton){var _s=ca.skeleton.getBoneByName(ga);if(_s!==void 0)return _s}if(ca.children){var Ss=function(Cs){for(var Ts=0;Ts<Cs.length;Ts++){var Bs=Cs[Ts];if(Bs.name===ga||Bs.uuid===ga)return Bs;var Ps=Ss(Bs.children);if(Ps)return Ps}return null},Ms=Ss(ca.children);if(Ms)return Ms}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(ga,_s){ga[_s]=this.node[this.propertyName]},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)ga[_s++]=Ss[Ms]},function(ga,_s){ga[_s]=this.resolvedProperty[this.propertyIndex]},function(ga,_s){this.resolvedProperty.toArray(ga,_s)}],SetterByBindingTypeAndVersioning:[[function(ga,_s){this.targetObject[this.propertyName]=ga[_s]},function(ga,_s){this.targetObject[this.propertyName]=ga[_s],this.targetObject.needsUpdate=!0},function(ga,_s){this.targetObject[this.propertyName]=ga[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++]},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++];this.targetObject.needsUpdate=!0},function(ga,_s){for(var Ss=this.resolvedProperty,Ms=0,Cs=Ss.length;Ms!==Cs;++Ms)Ss[Ms]=ga[_s++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s]},function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s],this.targetObject.needsUpdate=!0},function(ga,_s){this.resolvedProperty[this.propertyIndex]=ga[_s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,_s){this.resolvedProperty.fromArray(ga,_s)},function(ga,_s){this.resolvedProperty.fromArray(ga,_s),this.targetObject.needsUpdate=!0},function(ga,_s){this.resolvedProperty.fromArray(ga,_s),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(ga,_s){this.bind(),this.getValue(ga,_s)},setValue:function(ga,_s){this.bind(),this.setValue(ga,_s)},bind:function(){var ca=this.node,ga=this.parsedPath,_s=ga.objectName,Ss=ga.propertyName,Ms=ga.propertyIndex;if(ca||(ca=PropertyBinding.findNode(this.rootNode,ga.nodeName)||this.rootNode,this.node=ca),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!ca){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(_s){var Cs=ga.objectIndex;switch(_s){case"materials":if(!ca.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!ca.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}ca=ca.material.materials;break;case"bones":if(!ca.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}ca=ca.skeleton.bones;for(var Ts=0;Ts<ca.length;Ts++)if(ca[Ts].name===Cs){Cs=Ts;break}break;default:if(ca[_s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}ca=ca[_s]}if(Cs!==void 0){if(ca[Cs]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,ca);return}ca=ca[Cs]}}var Bs=ca[Ss];if(Bs===void 0){var Ps=ga.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Ps+"."+Ss+" but it wasn't found.",ca);return}var Ls=this.Versioning.None;this.targetObject=ca,ca.needsUpdate!==void 0?Ls=this.Versioning.NeedsUpdate:ca.matrixWorldNeedsUpdate!==void 0&&(Ls=this.Versioning.MatrixWorldNeedsUpdate);var Rs=this.BindingType.Direct;if(Ms!==void 0){if(Ss==="morphTargetInfluences"){if(!ca.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(ca.geometry.isBufferGeometry){if(!ca.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}ca.morphTargetDictionary[Ms]!==void 0&&(Ms=ca.morphTargetDictionary[Ms])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Rs=this.BindingType.ArrayElement,this.resolvedProperty=Bs,this.propertyIndex=Ms}else Bs.fromArray!==void 0&&Bs.toArray!==void 0?(Rs=this.BindingType.HasFromToArray,this.resolvedProperty=Bs):Array.isArray(Bs)?(Rs=this.BindingType.EntireArray,this.resolvedProperty=Bs):this.propertyName=Ss;this.getValue=this.GetterByBindingType[Rs],this.setValue=this.SetterByBindingTypeAndVersioning[Rs][Ls]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var ca={};this._indicesByUUID=ca;for(var ga=0,_s=arguments.length;ga!==_s;++ga)ca[arguments[ga].uuid]=ga;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Ss=this;this.stats={objects:{get total(){return Ss._objects.length},get inUse(){return this.total-Ss.nCachedObjects_}},get bindingsPerObject(){return Ss._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var ca=this._objects,ga=ca.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._paths,Cs=this._parsedPaths,Ts=this._bindings,Bs=Ts.length,Ps=void 0,Ls=0,Rs=arguments.length;Ls!==Rs;++Ls){var Ds=arguments[Ls],$s=Ds.uuid,Fs=Ss[$s];if(Fs===void 0){Fs=ga++,Ss[$s]=Fs,ca.push(Ds);for(var Gs=0,Vs=Bs;Gs!==Vs;++Gs)Ts[Gs].push(new PropertyBinding(Ds,Ms[Gs],Cs[Gs]))}else if(Fs<_s){Ps=ca[Fs];var ks=--_s,Os=ca[ks];Ss[Os.uuid]=Fs,ca[Fs]=Os,Ss[$s]=ks,ca[ks]=Ds;for(var Gs=0,Vs=Bs;Gs!==Vs;++Gs){var Ns=Ts[Gs],Us=Ns[ks],Hs=Ns[Fs];Ns[Fs]=Us,Hs===void 0&&(Hs=new PropertyBinding(Ds,Ms[Gs],Cs[Gs])),Ns[ks]=Hs}}else ca[Fs]!==Ps&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_s},remove:function(){for(var ca=this._objects,ga=this.nCachedObjects_,_s=this._indicesByUUID,Ss=this._bindings,Ms=Ss.length,Cs=0,Ts=arguments.length;Cs!==Ts;++Cs){var Bs=arguments[Cs],Ps=Bs.uuid,Ls=_s[Ps];if(Ls!==void 0&&Ls>=ga){var Rs=ga++,Ds=ca[Rs];_s[Ds.uuid]=Ls,ca[Ls]=Ds,_s[Ps]=Rs,ca[Rs]=Bs;for(var $s=0,Fs=Ms;$s!==Fs;++$s){var Gs=Ss[$s],Vs=Gs[Rs],ks=Gs[Ls];Gs[Ls]=Vs,Gs[Rs]=ks}}}this.nCachedObjects_=ga},uncache:function(){for(var ca=this._objects,ga=ca.length,_s=this.nCachedObjects_,Ss=this._indicesByUUID,Ms=this._bindings,Cs=Ms.length,Ts=0,Bs=arguments.length;Ts!==Bs;++Ts){var Ps=arguments[Ts],Ls=Ps.uuid,Rs=Ss[Ls];if(Rs!==void 0)if(delete Ss[Ls],Rs<_s){var Ds=--_s,$s=ca[Ds],Fs=--ga,Gs=ca[Fs];Ss[$s.uuid]=Rs,ca[Rs]=$s,Ss[Gs.uuid]=Ds,ca[Ds]=Gs,ca.pop();for(var Vs=0,ks=Cs;Vs!==ks;++Vs){var Os=Ms[Vs],Ns=Os[Ds],Us=Os[Fs];Os[Rs]=Ns,Os[Ds]=Us,Os.pop()}}else{var Fs=--ga,Gs=ca[Fs];Ss[Gs.uuid]=Rs,ca[Rs]=Gs,ca.pop();for(var Vs=0,ks=Cs;Vs!==ks;++Vs){var Os=Ms[Vs];Os[Rs]=Os[Fs],Os.pop()}}}this.nCachedObjects_=_s},subscribe_:function(ca,ga){var _s=this._bindingsIndicesByPath,Ss=_s[ca],Ms=this._bindings;if(Ss!==void 0)return Ms[Ss];var Cs=this._paths,Ts=this._parsedPaths,Bs=this._objects,Ps=Bs.length,Ls=this.nCachedObjects_,Rs=new Array(Ps);Ss=Ms.length,_s[ca]=Ss,Cs.push(ca),Ts.push(ga),Ms.push(Rs);for(var Ds=Ls,$s=Bs.length;Ds!==$s;++Ds){var Fs=Bs[Ds];Rs[Ds]=new PropertyBinding(Fs,ca,ga)}return Rs},unsubscribe_:function(ca){var ga=this._bindingsIndicesByPath,_s=ga[ca];if(_s!==void 0){var Ss=this._paths,Ms=this._parsedPaths,Cs=this._bindings,Ts=Cs.length-1,Bs=Cs[Ts],Ps=ca[Ts];ga[Ps]=_s,Cs[_s]=Bs,Cs.pop(),Ms[_s]=Ms[Ts],Ms.pop(),Ss[_s]=Ss[Ts],Ss.pop()}}});function AnimationAction(ca,ga,_s,Ss){this._mixer=ca,this._clip=ga,this._localRoot=_s||null,this.blendMode=Ss||ga.blendMode;for(var Ms=ga.tracks,Cs=Ms.length,Ts=new Array(Cs),Bs={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Ps=0;Ps!==Cs;++Ps){var Ls=Ms[Ps].createInterpolant(null);Ts[Ps]=Ls,Ls.settings=Bs}this._interpolantSettings=Bs,this._interpolants=Ts,this._propertyBindings=new Array(Cs),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(ca){return this._startTime=ca,this},setLoop:function(ca,ga){return this.loop=ca,this.repetitions=ga,this},setEffectiveWeight:function(ca){return this.weight=ca,this._effectiveWeight=this.enabled?ca:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(ca){return this._scheduleFading(ca,0,1)},fadeOut:function(ca){return this._scheduleFading(ca,1,0)},crossFadeFrom:function(ca,ga,_s){if(ca.fadeOut(ga),this.fadeIn(ga),_s){var Ss=this._clip.duration,Ms=ca._clip.duration,Cs=Ms/Ss,Ts=Ss/Ms;ca.warp(1,Cs,ga),this.warp(Ts,1,ga)}return this},crossFadeTo:function(ca,ga,_s){return ca.crossFadeFrom(this,ga,_s)},stopFading:function(){var ca=this._weightInterpolant;return ca!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},setEffectiveTimeScale:function(ca){return this.timeScale=ca,this._effectiveTimeScale=this.paused?0:ca,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(ca){return this.timeScale=this._clip.duration/ca,this.stopWarping()},syncWith:function(ca){return this.time=ca.time,this.timeScale=ca.timeScale,this.stopWarping()},halt:function(ca){return this.warp(this._effectiveTimeScale,0,ca)},warp:function(ca,ga,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._timeScaleInterpolant,Ts=this.timeScale;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._timeScaleInterpolant=Cs);var Bs=Cs.parameterPositions,Ps=Cs.sampleValues;return Bs[0]=Ms,Bs[1]=Ms+_s,Ps[0]=ca/Ts,Ps[1]=ga/Ts,this},stopWarping:function(){var ca=this._timeScaleInterpolant;return ca!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(ca,ga,_s,Ss){if(!this.enabled){this._updateWeight(ca);return}var Ms=this._startTime;if(Ms!==null){var Cs=(ca-Ms)*_s;if(Cs<0||_s===0)return;this._startTime=null,ga=_s*Cs}ga*=this._updateTimeScale(ca);var Ts=this._updateTime(ga),Bs=this._updateWeight(ca);if(Bs>0){var Ps=this._interpolants,Ls=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Rs=0,Ds=Ps.length;Rs!==Ds;++Rs)Ps[Rs].evaluate(Ts),Ls[Rs].accumulateAdditive(Bs);break;case NormalAnimationBlendMode:default:for(var Rs=0,Ds=Ps.length;Rs!==Ds;++Rs)Ps[Rs].evaluate(Ts),Ls[Rs].accumulate(Ss,Bs)}}},_updateWeight:function(ca){var ga=0;if(this.enabled){ga=this.weight;var _s=this._weightInterpolant;if(_s!==null){var Ss=_s.evaluate(ca)[0];ga*=Ss,ca>_s.parameterPositions[1]&&(this.stopFading(),Ss===0&&(this.enabled=!1))}}return this._effectiveWeight=ga,ga},_updateTimeScale:function(ca){var ga=0;if(!this.paused){ga=this.timeScale;var _s=this._timeScaleInterpolant;if(_s!==null){var Ss=_s.evaluate(ca)[0];ga*=Ss,ca>_s.parameterPositions[1]&&(this.stopWarping(),ga===0?this.paused=!0:this.timeScale=ga)}}return this._effectiveTimeScale=ga,ga},_updateTime:function(ca){var ga=this.time+ca,_s=this._clip.duration,Ss=this.loop,Ms=this._loopCount,Cs=Ss===LoopPingPong;if(ca===0)return Ms===-1?ga:Cs&&(Ms&1)==1?_s-ga:ga;if(Ss===LoopOnce){Ms===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ga>=_s)ga=_s;else if(ga<0)ga=0;else{this.time=ga;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca<0?-1:1})}}else{if(Ms===-1&&(ca>=0?(Ms=0,this._setEndings(!0,this.repetitions===0,Cs)):this._setEndings(this.repetitions===0,!0,Cs)),ga>=_s||ga<0){var Ts=Math.floor(ga/_s);ga-=_s*Ts,Ms+=Math.abs(Ts);var Bs=this.repetitions-Ms;if(Bs<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ga=ca>0?_s:0,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca>0?1:-1});else{if(Bs===1){var Ps=ca<0;this._setEndings(Ps,!Ps,Cs)}else this._setEndings(!1,!1,Cs);this._loopCount=Ms,this.time=ga,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ts})}}else this.time=ga;if(Cs&&(Ms&1)==1)return _s-ga}return ga},_setEndings:function(ca,ga,_s){var Ss=this._interpolantSettings;_s?(Ss.endingStart=ZeroSlopeEnding,Ss.endingEnd=ZeroSlopeEnding):(ca?Ss.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingStart=WrapAroundEnding,ga?Ss.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Ss.endingEnd=WrapAroundEnding)},_scheduleFading:function(ca,ga,_s){var Ss=this._mixer,Ms=Ss.time,Cs=this._weightInterpolant;Cs===null&&(Cs=Ss._lendControlInterpolant(),this._weightInterpolant=Cs);var Ts=Cs.parameterPositions,Bs=Cs.sampleValues;return Ts[0]=Ms,Bs[0]=ga,Ts[1]=Ms+ca,Bs[1]=_s,this}});function AnimationMixer(ca){this._root=ca,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(ca,ga){var _s=ca._localRoot||this._root,Ss=ca._clip.tracks,Ms=Ss.length,Cs=ca._propertyBindings,Ts=ca._interpolants,Bs=_s.uuid,Ps=this._bindingsByRootAndName,Ls=Ps[Bs];Ls===void 0&&(Ls={},Ps[Bs]=Ls);for(var Rs=0;Rs!==Ms;++Rs){var Ds=Ss[Rs],$s=Ds.name,Fs=Ls[$s];if(Fs!==void 0)Cs[Rs]=Fs;else{if(Fs=Cs[Rs],Fs!==void 0){Fs._cacheIndex===null&&(++Fs.referenceCount,this._addInactiveBinding(Fs,Bs,$s));continue}var Gs=ga&&ga._propertyBindings[Rs].binding.parsedPath;Fs=new PropertyMixer(PropertyBinding.create(_s,$s,Gs),Ds.ValueTypeName,Ds.getValueSize()),++Fs.referenceCount,this._addInactiveBinding(Fs,Bs,$s),Cs[Rs]=Fs}Ts[Rs].resultBuffer=Fs.buffer}},_activateAction:function(ca){if(!this._isActiveAction(ca)){if(ca._cacheIndex===null){var ga=(ca._localRoot||this._root).uuid,_s=ca._clip.uuid,Ss=this._actionsByClip[_s];this._bindAction(ca,Ss&&Ss.knownActions[0]),this._addInactiveAction(ca,_s,ga)}for(var Ms=ca._propertyBindings,Cs=0,Ts=Ms.length;Cs!==Ts;++Cs){var Bs=Ms[Cs];Bs.useCount++==0&&(this._lendBinding(Bs),Bs.saveOriginalState())}this._lendAction(ca)}},_deactivateAction:function(ca){if(this._isActiveAction(ca)){for(var ga=ca._propertyBindings,_s=0,Ss=ga.length;_s!==Ss;++_s){var Ms=ga[_s];--Ms.useCount==0&&(Ms.restoreOriginalState(),this._takeBackBinding(Ms))}this._takeBackAction(ca)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var ca=this;this.stats={actions:{get total(){return ca._actions.length},get inUse(){return ca._nActiveActions}},bindings:{get total(){return ca._bindings.length},get inUse(){return ca._nActiveBindings}},controlInterpolants:{get total(){return ca._controlInterpolants.length},get inUse(){return ca._nActiveControlInterpolants}}}},_isActiveAction:function(ca){var ga=ca._cacheIndex;return ga!==null&&ga<this._nActiveActions},_addInactiveAction:function(ca,ga,_s){var Ss=this._actions,Ms=this._actionsByClip,Cs=Ms[ga];if(Cs===void 0)Cs={knownActions:[ca],actionByRoot:{}},ca._byClipCacheIndex=0,Ms[ga]=Cs;else{var Ts=Cs.knownActions;ca._byClipCacheIndex=Ts.length,Ts.push(ca)}ca._cacheIndex=Ss.length,Ss.push(ca),Cs.actionByRoot[_s]=ca},_removeInactiveAction:function(ca){var ga=this._actions,_s=ga[ga.length-1],Ss=ca._cacheIndex;_s._cacheIndex=Ss,ga[Ss]=_s,ga.pop(),ca._cacheIndex=null;var Ms=ca._clip.uuid,Cs=this._actionsByClip,Ts=Cs[Ms],Bs=Ts.knownActions,Ps=Bs[Bs.length-1],Ls=ca._byClipCacheIndex;Ps._byClipCacheIndex=Ls,Bs[Ls]=Ps,Bs.pop(),ca._byClipCacheIndex=null;var Rs=Ts.actionByRoot,Ds=(ca._localRoot||this._root).uuid;delete Rs[Ds],Bs.length===0&&delete Cs[Ms],this._removeInactiveBindingsForAction(ca)},_removeInactiveBindingsForAction:function(ca){for(var ga=ca._propertyBindings,_s=0,Ss=ga.length;_s!==Ss;++_s){var Ms=ga[_s];--Ms.referenceCount==0&&this._removeInactiveBinding(Ms)}},_lendAction:function(ca){var ga=this._actions,_s=ca._cacheIndex,Ss=this._nActiveActions++,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_takeBackAction:function(ca){var ga=this._actions,_s=ca._cacheIndex,Ss=--this._nActiveActions,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_addInactiveBinding:function(ca,ga,_s){var Ss=this._bindingsByRootAndName,Ms=Ss[ga],Cs=this._bindings;Ms===void 0&&(Ms={},Ss[ga]=Ms),Ms[_s]=ca,ca._cacheIndex=Cs.length,Cs.push(ca)},_removeInactiveBinding:function(ca){var ga=this._bindings,_s=ca.binding,Ss=_s.rootNode.uuid,Ms=_s.path,Cs=this._bindingsByRootAndName,Ts=Cs[Ss],Bs=ga[ga.length-1],Ps=ca._cacheIndex;Bs._cacheIndex=Ps,ga[Ps]=Bs,ga.pop(),delete Ts[Ms],Object.keys(Ts).length===0&&delete Cs[Ss]},_lendBinding:function(ca){var ga=this._bindings,_s=ca._cacheIndex,Ss=this._nActiveBindings++,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_takeBackBinding:function(ca){var ga=this._bindings,_s=ca._cacheIndex,Ss=--this._nActiveBindings,Ms=ga[Ss];ca._cacheIndex=Ss,ga[Ss]=ca,Ms._cacheIndex=_s,ga[_s]=Ms},_lendControlInterpolant:function(){var ca=this._controlInterpolants,ga=this._nActiveControlInterpolants++,_s=ca[ga];return _s===void 0&&(_s=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),_s.__cacheIndex=ga,ca[ga]=_s),_s},_takeBackControlInterpolant:function(ca){var ga=this._controlInterpolants,_s=ca.__cacheIndex,Ss=--this._nActiveControlInterpolants,Ms=ga[Ss];ca.__cacheIndex=Ss,ga[Ss]=ca,Ms.__cacheIndex=_s,ga[_s]=Ms},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(ca,ga,_s){var Ss=ga||this._root,Ms=Ss.uuid,Cs=typeof ca=="string"?AnimationClip.findByName(Ss,ca):ca,Ts=Cs!==null?Cs.uuid:ca,Bs=this._actionsByClip[Ts],Ps=null;if(_s===void 0&&(Cs!==null?_s=Cs.blendMode:_s=NormalAnimationBlendMode),Bs!==void 0){var Ls=Bs.actionByRoot[Ms];if(Ls!==void 0&&Ls.blendMode===_s)return Ls;Ps=Bs.knownActions[0],Cs===null&&(Cs=Ps._clip)}if(Cs===null)return null;var Rs=new AnimationAction(this,Cs,ga,_s);return this._bindAction(Rs,Ps),this._addInactiveAction(Rs,Ts,Ms),Rs},existingAction:function(ca,ga){var _s=ga||this._root,Ss=_s.uuid,Ms=typeof ca=="string"?AnimationClip.findByName(_s,ca):ca,Cs=Ms?Ms.uuid:ca,Ts=this._actionsByClip[Cs];return Ts!==void 0&&Ts.actionByRoot[Ss]||null},stopAllAction:function(){for(var ca=this._actions,ga=this._nActiveActions,_s=ga-1;_s>=0;--_s)ca[_s].stop();return this},update:function(ca){ca*=this.timeScale;for(var ga=this._actions,_s=this._nActiveActions,Ss=this.time+=ca,Ms=Math.sign(ca),Cs=this._accuIndex^=1,Ts=0;Ts!==_s;++Ts){var Bs=ga[Ts];Bs._update(Ss,ca,Ms,Cs)}for(var Ps=this._bindings,Ls=this._nActiveBindings,Ts=0;Ts!==Ls;++Ts)Ps[Ts].apply(Cs);return this},setTime:function(ca){this.time=0;for(var ga=0;ga<this._actions.length;ga++)this._actions[ga].time=0;return this.update(ca)},getRoot:function(){return this._root},uncacheClip:function(ca){var ga=this._actions,_s=ca.uuid,Ss=this._actionsByClip,Ms=Ss[_s];if(Ms!==void 0){for(var Cs=Ms.knownActions,Ts=0,Bs=Cs.length;Ts!==Bs;++Ts){var Ps=Cs[Ts];this._deactivateAction(Ps);var Ls=Ps._cacheIndex,Rs=ga[ga.length-1];Ps._cacheIndex=null,Ps._byClipCacheIndex=null,Rs._cacheIndex=Ls,ga[Ls]=Rs,ga.pop(),this._removeInactiveBindingsForAction(Ps)}delete Ss[_s]}},uncacheRoot:function(ca){var ga=ca.uuid,_s=this._actionsByClip;for(var Ss in _s){var Ms=_s[Ss].actionByRoot,Cs=Ms[ga];Cs!==void 0&&(this._deactivateAction(Cs),this._removeInactiveAction(Cs))}var Ts=this._bindingsByRootAndName,Bs=Ts[ga];if(Bs!==void 0)for(var Ps in Bs){var Ls=Bs[Ps];Ls.restoreOriginalState(),this._removeInactiveBinding(Ls)}},uncacheAction:function(ca,ga){var _s=this.existingAction(ca,ga);_s!==null&&(this._deactivateAction(_s),this._removeInactiveAction(_s))}});function Uniform(ca){typeof ca=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),ca=arguments[1]),this.value=ca}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(ca,ga,_s){InterleavedBuffer.call(this,ca,ga),this.meshPerAttribute=_s||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(ca){return InterleavedBuffer.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this}});function Raycaster(ca,ga,_s,Ss){this.ray=new Ray(ca,ga),this.near=_s||0,this.far=Ss||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(ca,ga){return ca.distance-ga.distance}function intersectObject(ca,ga,_s,Ss){if(ca.layers.test(ga.layers)&&ca.raycast(ga,_s),Ss===!0)for(var Ms=ca.children,Cs=0,Ts=Ms.length;Cs<Ts;Cs++)intersectObject(Ms[Cs],ga,_s,!0)}Object.assign(Raycaster.prototype,{set:function(ca,ga){this.ray.set(ca,ga)},setFromCamera:function(ca,ga){ga&&ga.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(ga.matrixWorld),this.ray.direction.set(ca.x,ca.y,.5).unproject(ga).sub(this.ray.origin).normalize(),this.camera=ga):ga&&ga.isOrthographicCamera?(this.ray.origin.set(ca.x,ca.y,(ga.near+ga.far)/(ga.near-ga.far)).unproject(ga),this.ray.direction.set(0,0,-1).transformDirection(ga.matrixWorld),this.camera=ga):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(ca,ga,_s){var Ss=_s||[];return intersectObject(ca,this,Ss,ga),Ss.sort(ascSort),Ss},intersectObjects:function(ca,ga,_s){var Ss=_s||[];if(Array.isArray(ca)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ss;for(var Ms=0,Cs=ca.length;Ms<Cs;Ms++)intersectObject(ca[Ms],this,Ss,ga);return Ss.sort(ascSort),Ss}});function Spherical(ca,ga,_s){return this.radius=ca!==void 0?ca:1,this.phi=ga!==void 0?ga:0,this.theta=_s!==void 0?_s:0,this}Object.assign(Spherical.prototype,{set:function(ca,ga,_s){return this.radius=ca,this.phi=ga,this.theta=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.phi=ca.phi,this.theta=ca.theta,this},makeSafe:function(){var ca=1e-6;return this.phi=Math.max(ca,Math.min(Math.PI-ca,this.phi)),this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,_s){return this.radius=Math.sqrt(ca*ca+ga*ga+_s*_s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(ca,_s),this.phi=Math.acos(MathUtils.clamp(ga/this.radius,-1,1))),this}});function Cylindrical(ca,ga,_s){return this.radius=ca!==void 0?ca:1,this.theta=ga!==void 0?ga:0,this.y=_s!==void 0?_s:0,this}Object.assign(Cylindrical.prototype,{set:function(ca,ga,_s){return this.radius=ca,this.theta=ga,this.y=_s,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.theta=ca.theta,this.y=ca.y,this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,_s){return this.radius=Math.sqrt(ca*ca+_s*_s),this.theta=Math.atan2(ca,_s),this.y=ga,this}});var _vector$7=new Vector2;function Box2(ca,ga){this.min=ca!==void 0?ca:new Vector2(1/0,1/0),this.max=ga!==void 0?ga:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,_s=ca.length;ga<_s;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var _s=_vector$7.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(_s),this.max.copy(ca).add(_s),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),ga=new Vector2),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y)},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),ga=new Vector2),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$7.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(ca,ga){this.start=ca!==void 0?ca:new Vector3,this.end=ga!==void 0?ga:new Vector3}Object.assign(Line3.prototype,{set:function(ca,ga){return this.start.copy(ca),this.end.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.start.copy(ca.start),this.end.copy(ca.end),this},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),ca=new Vector3),ca.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),ca=new Vector3),ca.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Line3: .at() target is now required"),ga=new Vector3),this.delta(ga).multiplyScalar(ca).add(this.start)},closestPointToPointParameter:function(ca,ga){_startP.subVectors(ca,this.start),_startEnd.subVectors(this.end,this.start);var _s=_startEnd.dot(_startEnd),Ss=_startEnd.dot(_startP),Ms=Ss/_s;return ga&&(Ms=MathUtils.clamp(Ms,0,1)),Ms},closestPointToPoint:function(ca,ga,_s){var Ss=this.closestPointToPointParameter(ca,ga);return _s===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),_s=new Vector3),this.delta(_s).multiplyScalar(Ss).add(this.start)},applyMatrix4:function(ca){return this.start.applyMatrix4(ca),this.end.applyMatrix4(ca),this},equals:function(ca){return ca.start.equals(this.start)&&ca.end.equals(this.end)}});function ImmediateRenderObject(ca){Object3D.call(this),this.material=ca,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(ca,ga){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=ga;for(var _s=new BufferGeometry,Ss=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Ms=0,Cs=1,Ts=32;Ms<Ts;Ms++,Cs++){var Bs=Ms/Ts*Math.PI*2,Ps=Cs/Ts*Math.PI*2;Ss.push(Math.cos(Bs),Math.sin(Bs),1,Math.cos(Ps),Math.sin(Ps),1)}_s.setAttribute("position",new Float32BufferAttribute(Ss,3));var Ls=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(_s,Ls),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var ca=this.light.distance?this.light.distance:1e3,ga=ca*Math.tan(this.light.angle);this.cone.scale.set(ga,ga,ca),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(ca){var ga=[];ca&&ca.isBone&&ga.push(ca);for(var _s=0;_s<ca.children.length;_s++)ga.push.apply(ga,getBoneList(ca.children[_s]));return ga}function SkeletonHelper(ca){for(var ga=getBoneList(ca),_s=new BufferGeometry,Ss=[],Ms=[],Cs=new Color(0,0,1),Ts=new Color(0,1,0),Bs=0;Bs<ga.length;Bs++){var Ps=ga[Bs];Ps.parent&&Ps.parent.isBone&&(Ss.push(0,0,0),Ss.push(0,0,0),Ms.push(Cs.r,Cs.g,Cs.b),Ms.push(Ts.r,Ts.g,Ts.b))}_s.setAttribute("position",new Float32BufferAttribute(Ss,3)),_s.setAttribute("color",new Float32BufferAttribute(Ms,3));var Ls=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,_s,Ls),this.type="SkeletonHelper",this.root=ca,this.bones=ga,this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(ca){var ga=this.bones,_s=this.geometry,Ss=_s.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Ms=0,Cs=0;Ms<ga.length;Ms++){var Ts=ga[Ms];Ts.parent&&Ts.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Ts.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ss.setXYZ(Cs+1,_vector$9.x,_vector$9.y,_vector$9.z),Cs+=2)}_s.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,ca)};function PointLightHelper(ca,ga,_s){this.light=ca,this.light.updateMatrixWorld(),this.color=_s;var Ss=new SphereBufferGeometry(ga,4,2),Ms=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Ss,Ms),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(ca,ga,_s){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s;var Ss=new OctahedronBufferGeometry(ga);Ss.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Ms=Ss.getAttribute("position"),Cs=new Float32Array(Ms.count*3);Ss.setAttribute("color",new BufferAttribute(Cs,3)),this.add(new Mesh(Ss,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var ca=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var ga=ca.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var _s=0,Ss=ga.count;_s<Ss;_s++){var Ms=_s<Ss/2?_color1:_color2;ga.setXYZ(_s,Ms.r,Ms.g,Ms.b)}ga.needsUpdate=!0}ca.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(ca,ga,_s,Ss){ca=ca||10,ga=ga||10,_s=new Color(_s!==void 0?_s:4473924),Ss=new Color(Ss!==void 0?Ss:8947848);for(var Ms=ga/2,Cs=ca/ga,Ts=ca/2,Bs=[],Ps=[],Ls=0,Rs=0,Ds=-Ts;Ls<=ga;Ls++,Ds+=Cs){Bs.push(-Ts,0,Ds,Ts,0,Ds),Bs.push(Ds,0,-Ts,Ds,0,Ts);var $s=Ls===Ms?_s:Ss;$s.toArray(Ps,Rs),Rs+=3,$s.toArray(Ps,Rs),Rs+=3,$s.toArray(Ps,Rs),Rs+=3,$s.toArray(Ps,Rs),Rs+=3}var Fs=new BufferGeometry;Fs.setAttribute("position",new Float32BufferAttribute(Bs,3)),Fs.setAttribute("color",new Float32BufferAttribute(Ps,3));var Gs=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Fs,Gs),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(ca){return LineSegments.prototype.copy.call(this,ca),this.geometry.copy(ca.geometry),this.material.copy(ca.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(ca,ga,_s,Ss,Ms,Cs){ca=ca||10,ga=ga||16,_s=_s||8,Ss=Ss||64,Ms=new Color(Ms!==void 0?Ms:4473924),Cs=new Color(Cs!==void 0?Cs:8947848);var Ts=[],Bs=[],Ps,Ls,Rs,Ds,$s,Fs,Gs;for(Ds=0;Ds<=ga;Ds++)Rs=Ds/ga*(Math.PI*2),Ps=Math.sin(Rs)*ca,Ls=Math.cos(Rs)*ca,Ts.push(0,0,0),Ts.push(Ps,0,Ls),Gs=Ds&1?Ms:Cs,Bs.push(Gs.r,Gs.g,Gs.b),Bs.push(Gs.r,Gs.g,Gs.b);for(Ds=0;Ds<=_s;Ds++)for(Gs=Ds&1?Ms:Cs,Fs=ca-ca/_s*Ds,$s=0;$s<Ss;$s++)Rs=$s/Ss*(Math.PI*2),Ps=Math.sin(Rs)*Fs,Ls=Math.cos(Rs)*Fs,Ts.push(Ps,0,Ls),Bs.push(Gs.r,Gs.g,Gs.b),Rs=($s+1)/Ss*(Math.PI*2),Ps=Math.sin(Rs)*Fs,Ls=Math.cos(Rs)*Fs,Ts.push(Ps,0,Ls),Bs.push(Gs.r,Gs.g,Gs.b);var Vs=new BufferGeometry;Vs.setAttribute("position",new Float32BufferAttribute(Ts,3)),Vs.setAttribute("color",new Float32BufferAttribute(Bs,3));var ks=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Vs,ks),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(ca,ga,_s){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=_s,ga===void 0&&(ga=1);var Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute([-ga,ga,0,ga,ga,0,ga,-ga,0,-ga,-ga,0,-ga,ga,0],3));var Ms=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Ss,Ms),this.add(this.lightPlane),Ss=new BufferGeometry,Ss.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Ss,Ms),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(ca){var ga=new BufferGeometry,_s=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Ss=[],Ms=[],Cs={},Ts=new Color(16755200),Bs=new Color(16711680),Ps=new Color(43775),Ls=new Color(16777215),Rs=new Color(3355443);Ds("n1","n2",Ts),Ds("n2","n4",Ts),Ds("n4","n3",Ts),Ds("n3","n1",Ts),Ds("f1","f2",Ts),Ds("f2","f4",Ts),Ds("f4","f3",Ts),Ds("f3","f1",Ts),Ds("n1","f1",Ts),Ds("n2","f2",Ts),Ds("n3","f3",Ts),Ds("n4","f4",Ts),Ds("p","n1",Bs),Ds("p","n2",Bs),Ds("p","n3",Bs),Ds("p","n4",Bs),Ds("u1","u2",Ps),Ds("u2","u3",Ps),Ds("u3","u1",Ps),Ds("c","t",Ls),Ds("p","c",Rs),Ds("cn1","cn2",Rs),Ds("cn3","cn4",Rs),Ds("cf1","cf2",Rs),Ds("cf3","cf4",Rs);function Ds(Fs,Gs,Vs){$s(Fs,Vs),$s(Gs,Vs)}function $s(Fs,Gs){Ss.push(0,0,0),Ms.push(Gs.r,Gs.g,Gs.b),Cs[Fs]===void 0&&(Cs[Fs]=[]),Cs[Fs].push(Ss.length/3-1)}ga.setAttribute("position",new Float32BufferAttribute(Ss,3)),ga.setAttribute("color",new Float32BufferAttribute(Ms,3)),LineSegments.call(this,ga,_s),this.type="CameraHelper",this.camera=ca,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Cs,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var ca=this.geometry,ga=this.pointMap,_s=1,Ss=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",ga,ca,_camera,0,0,-1),setPoint("t",ga,ca,_camera,0,0,1),setPoint("n1",ga,ca,_camera,-_s,-Ss,-1),setPoint("n2",ga,ca,_camera,_s,-Ss,-1),setPoint("n3",ga,ca,_camera,-_s,Ss,-1),setPoint("n4",ga,ca,_camera,_s,Ss,-1),setPoint("f1",ga,ca,_camera,-_s,-Ss,1),setPoint("f2",ga,ca,_camera,_s,-Ss,1),setPoint("f3",ga,ca,_camera,-_s,Ss,1),setPoint("f4",ga,ca,_camera,_s,Ss,1),setPoint("u1",ga,ca,_camera,_s*.7,Ss*1.1,-1),setPoint("u2",ga,ca,_camera,-_s*.7,Ss*1.1,-1),setPoint("u3",ga,ca,_camera,0,Ss*2,-1),setPoint("cf1",ga,ca,_camera,-_s,0,1),setPoint("cf2",ga,ca,_camera,_s,0,1),setPoint("cf3",ga,ca,_camera,0,-Ss,1),setPoint("cf4",ga,ca,_camera,0,Ss,1),setPoint("cn1",ga,ca,_camera,-_s,0,-1),setPoint("cn2",ga,ca,_camera,_s,0,-1),setPoint("cn3",ga,ca,_camera,0,-Ss,-1),setPoint("cn4",ga,ca,_camera,0,Ss,-1),ca.getAttribute("position").needsUpdate=!0};function setPoint(ca,ga,_s,Ss,Ms,Cs,Ts){_vector$b.set(Ms,Cs,Ts).unproject(Ss);var Bs=ga[ca];if(Bs!==void 0)for(var Ps=_s.getAttribute("position"),Ls=0,Rs=Bs.length;Ls<Rs;Ls++)Ps.setXYZ(Bs[Ls],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(ca,ga){this.object=ca,ga===void 0&&(ga=16776960);var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=new Float32Array(8*3),Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(ca){if(ca!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var ga=_box$3.min,_s=_box$3.max,Ss=this.geometry.attributes.position,Ms=Ss.array;Ms[0]=_s.x,Ms[1]=_s.y,Ms[2]=_s.z,Ms[3]=ga.x,Ms[4]=_s.y,Ms[5]=_s.z,Ms[6]=ga.x,Ms[7]=ga.y,Ms[8]=_s.z,Ms[9]=_s.x,Ms[10]=ga.y,Ms[11]=_s.z,Ms[12]=_s.x,Ms[13]=_s.y,Ms[14]=ga.z,Ms[15]=ga.x,Ms[16]=_s.y,Ms[17]=ga.z,Ms[18]=ga.x,Ms[19]=ga.y,Ms[20]=ga.z,Ms[21]=_s.x,Ms[22]=ga.y,Ms[23]=ga.z,Ss.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(ca){return this.object=ca,this.update(),this};BoxHelper.prototype.copy=function(ca){return LineSegments.prototype.copy.call(this,ca),this.object=ca.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(ca,ga){this.type="Box3Helper",this.box=ca,ga=ga||16776960;var _s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ss=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Ms=new BufferGeometry;Ms.setIndex(new BufferAttribute(_s,1)),Ms.setAttribute("position",new Float32BufferAttribute(Ss,3)),LineSegments.call(this,Ms,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(ca){var ga=this.box;ga.isEmpty()||(ga.getCenter(this.position),ga.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,ca))};function PlaneHelper(ca,ga,_s){this.plane=ca,this.size=ga===void 0?1:ga;var Ss=_s!==void 0?_s:16776960,Ms=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Cs=new BufferGeometry;Cs.setAttribute("position",new Float32BufferAttribute(Ms,3)),Cs.computeBoundingSphere(),Line$1.call(this,Cs,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.type="PlaneHelper";var Ts=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Bs=new BufferGeometry;Bs.setAttribute("position",new Float32BufferAttribute(Ts,3)),Bs.computeBoundingSphere(),this.add(new Mesh(Bs,new MeshBasicMaterial({color:Ss,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(ca){var ga=-this.plane.constant;Math.abs(ga)<1e-8&&(ga=1e-8),this.scale.set(.5*this.size,.5*this.size,ga),this.children[0].material.side=ga<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,ca)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(ca,ga,_s,Ss,Ms,Cs){Object3D.call(this),this.type="ArrowHelper",ca===void 0&&(ca=new Vector3(0,0,1)),ga===void 0&&(ga=new Vector3(0,0,0)),_s===void 0&&(_s=1),Ss===void 0&&(Ss=16776960),Ms===void 0&&(Ms=.2*_s),Cs===void 0&&(Cs=.2*Ms),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(ga),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Ss,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Ss,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(ca),this.setLength(_s,Ms,Cs)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(ca){if(ca.y>.99999)this.quaternion.set(0,0,0,1);else if(ca.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(ca.z,0,-ca.x).normalize();var ga=Math.acos(ca.y);this.quaternion.setFromAxisAngle(_axis,ga)}};ArrowHelper.prototype.setLength=function(ca,ga,_s){ga===void 0&&(ga=.2*ca),_s===void 0&&(_s=.2*ga),this.line.scale.set(1,Math.max(1e-4,ca-ga),1),this.line.updateMatrix(),this.cone.scale.set(_s,ga,_s),this.cone.position.y=ca,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(ca){this.line.material.color.set(ca),this.cone.material.color.set(ca)};ArrowHelper.prototype.copy=function(ca){return Object3D.prototype.copy.call(this,ca,!1),this.line.copy(ca.line),this.cone.copy(ca.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(ca){ca=ca||1;var ga=[0,0,0,ca,0,0,0,0,0,0,ca,0,0,0,0,0,0,ca],_s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute(ga,3)),Ss.setAttribute("color",new Float32BufferAttribute(_s,3));var Ms=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ss,Ms),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(ca){this._renderer=ca,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(ca,ga=0,_s=.1,Ss=100){_oldTarget=this._renderer.getRenderTarget();var Ms=this._allocateTargets();return this._sceneToCubeUV(ca,_s,Ss,Ms),ga>0&&this._blur(Ms,0,0,ga),this._applyPMREM(Ms),this._cleanup(Ms),Ms},fromEquirectangular:function(ca){return ca.magFilter=NearestFilter,ca.minFilter=NearestFilter,ca.generateMipmaps=!1,this.fromCubemap(ca)},fromCubemap:function(ca){_oldTarget=this._renderer.getRenderTarget();var ga=this._allocateTargets(ca);return this._textureToCubeUV(ca,ga),this._applyPMREM(ga),this._cleanup(ga),ga},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var ca=0;ca<_lodPlanes.length;ca++)_lodPlanes[ca].dispose()},_cleanup:function(ca){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),ca.scissorTest=!1,ca.setSize(ca.width,ca.height)},_allocateTargets:function(ca){var ga={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(ca)?ca.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},_s=_createRenderTarget(ga);return _s.depthBuffer=!ca,this._pingPongRenderTarget=_createRenderTarget(ga),_s},_compileMaterial:function(ca){var ga=new Mesh(_lodPlanes[0],ca);this._renderer.compile(ga,_flatCamera)},_sceneToCubeUV:function(ca,ga,_s,Ss){var Ms=90,Cs=1,Ts=new PerspectiveCamera(Ms,Cs,ga,_s),Bs=[1,-1,1,1,1,1],Ps=[1,1,1,-1,-1,-1],Ls=this._renderer,Rs=Ls.outputEncoding,Ds=Ls.toneMapping,$s=Ls.toneMappingExposure,Fs=Ls.getClearColor(),Gs=Ls.getClearAlpha();Ls.toneMapping=LinearToneMapping,Ls.toneMappingExposure=1,Ls.outputEncoding=LinearEncoding;var Vs=ca.background;if(Vs&&Vs.isColor){Vs.convertSRGBToLinear();var ks=Math.max(Vs.r,Vs.g,Vs.b),Os=Math.min(Math.max(Math.ceil(Math.log2(ks)),-128),127);Vs=Vs.multiplyScalar(Math.pow(2,-Os));var Ns=(Os+128)/255;Ls.setClearColor(Vs,Ns),ca.background=null}for(var Us=0;Us<6;Us++){var Hs=Us%3;Hs==0?(Ts.up.set(0,Bs[Us],0),Ts.lookAt(Ps[Us],0,0)):Hs==1?(Ts.up.set(0,0,Bs[Us]),Ts.lookAt(0,Ps[Us],0)):(Ts.up.set(0,Bs[Us],0),Ts.lookAt(0,0,Ps[Us])),_setViewport(Ss,Hs*SIZE_MAX,Us>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Ls.setRenderTarget(Ss),Ls.render(ca,Ts)}Ls.toneMapping=Ds,Ls.toneMappingExposure=$s,Ls.outputEncoding=Rs,Ls.setClearColor(Fs,Gs)},_textureToCubeUV:function(ca,ga){var _s=this._renderer;ca.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Ss=ca.isCubeTexture?this._cubemapShader:this._equirectShader,Ms=new Mesh(_lodPlanes[0],Ss),Cs=Ss.uniforms;Cs.envMap.value=ca,ca.isCubeTexture||Cs.texelSize.value.set(1/ca.image.width,1/ca.image.height),Cs.inputEncoding.value=ENCODINGS[ca.encoding],Cs.outputEncoding.value=ENCODINGS[ga.texture.encoding],_setViewport(ga,0,0,3*SIZE_MAX,2*SIZE_MAX),_s.setRenderTarget(ga),_s.render(Ms,_flatCamera)},_applyPMREM:function(ca){var ga=this._renderer,_s=ga.autoClear;ga.autoClear=!1;for(var Ss=1;Ss<TOTAL_LODS;Ss++){var Ms=Math.sqrt(_sigmas[Ss]*_sigmas[Ss]-_sigmas[Ss-1]*_sigmas[Ss-1]),Cs=_axisDirections[(Ss-1)%_axisDirections.length];this._blur(ca,Ss-1,Ss,Ms,Cs)}ga.autoClear=_s},_blur:function(ca,ga,_s,Ss,Ms){var Cs=this._pingPongRenderTarget;this._halfBlur(ca,Cs,ga,_s,Ss,"latitudinal",Ms),this._halfBlur(Cs,ca,_s,_s,Ss,"longitudinal",Ms)},_halfBlur:function(ca,ga,_s,Ss,Ms,Cs,Ts){var Bs=this._renderer,Ps=this._blurMaterial;Cs!=="latitudinal"&&Cs!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Ls=3,Rs=new Mesh(_lodPlanes[Ss],Ps),Ds=Ps.uniforms,$s=_sizeLods[_s]-1,Fs=isFinite(Ms)?Math.PI/(2*$s):2*Math.PI/(2*MAX_SAMPLES-1),Gs=Ms/Fs,Vs=isFinite(Ms)?1+Math.floor(Ls*Gs):MAX_SAMPLES;Vs>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Ms}, is too large and will clip, as it requested ${Vs} samples when the maximum is set to ${MAX_SAMPLES}`);for(var ks=[],Os=0,Ns=0;Ns<MAX_SAMPLES;++Ns){var zs=Ns/Gs,Us=Math.exp(-zs*zs/2);ks.push(Us),Ns==0?Os+=Us:Ns<Vs&&(Os+=2*Us)}for(var Ns=0;Ns<ks.length;Ns++)ks[Ns]=ks[Ns]/Os;Ds.envMap.value=ca.texture,Ds.samples.value=Vs,Ds.weights.value=ks,Ds.latitudinal.value=Cs==="latitudinal",Ts&&(Ds.poleAxis.value=Ts),Ds.dTheta.value=Fs,Ds.mipInt.value=LOD_MAX-_s,Ds.inputEncoding.value=ENCODINGS[ca.texture.encoding],Ds.outputEncoding.value=ENCODINGS[ca.texture.encoding];var Hs=_sizeLods[Ss],zs=3*Math.max(0,SIZE_MAX-2*Hs),js=(Ss===0?0:2*SIZE_MAX)+2*Hs*(Ss>LOD_MAX-LOD_MIN?Ss-LOD_MAX+LOD_MIN:0);_setViewport(ga,zs,js,3*Hs,2*Hs),Bs.setRenderTarget(ga),Bs.render(Rs,_flatCamera)}};function _isLDR(ca){return ca===void 0||ca.type!==UnsignedByteType?!1:ca.encoding===LinearEncoding||ca.encoding===sRGBEncoding||ca.encoding===GammaEncoding}function _createPlanes(){for(var ca=[],ga=[],_s=[],Ss=LOD_MAX,Ms=0;Ms<TOTAL_LODS;Ms++){var Cs=Math.pow(2,Ss);ga.push(Cs);var Ts=1/Cs;Ms>LOD_MAX-LOD_MIN?Ts=EXTRA_LOD_SIGMA[Ms-LOD_MAX+LOD_MIN-1]:Ms==0&&(Ts=0),_s.push(Ts);for(var Bs=1/(Cs-1),Ps=-Bs/2,Ls=1+Bs/2,Rs=[Ps,Ps,Ls,Ps,Ls,Ls,Ps,Ps,Ls,Ls,Ps,Ls],Ds=6,$s=6,Fs=3,Gs=2,Vs=1,ks=new Float32Array(Fs*$s*Ds),Os=new Float32Array(Gs*$s*Ds),Ns=new Float32Array(Vs*$s*Ds),Us=0;Us<Ds;Us++){var Hs=Us%3*2/3-1,zs=Us>2?0:-1,js=[Hs,zs,0,Hs+2/3,zs,0,Hs+2/3,zs+1,0,Hs,zs,0,Hs+2/3,zs+1,0,Hs,zs+1,0];ks.set(js,Fs*$s*Us),Os.set(Rs,Gs*$s*Us);var Ws=[Us,Us,Us,Us,Us,Us];Ns.set(Ws,Vs*$s*Us)}var Qs=new BufferGeometry;Qs.setAttribute("position",new BufferAttribute(ks,Fs)),Qs.setAttribute("uv",new BufferAttribute(Os,Gs)),Qs.setAttribute("faceIndex",new BufferAttribute(Ns,Vs)),ca.push(Qs),Ss>LOD_MIN&&Ss--}return{_lodPlanes:ca,_sizeLods:ga,_sigmas:_s}}function _createRenderTarget(ca){var ga=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,ca);return ga.texture.mapping=CubeUVReflectionMapping,ga.texture.name="PMREM.cubeUv",ga.scissorTest=!0,ga}function _setViewport(ca,ga,_s,Ss,Ms){ca.viewport.set(ga,_s,Ss,Ms),ca.scissor.set(ga,_s,Ss,Ms)}function _getBlurShader(ca){var ga=new Float32Array(ca),_s=new Vector3(0,1,0),Ss=new RawShaderMaterial({defines:{n:ca},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ga},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:_s},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Ss.type="SphericalGaussianBlur",Ss}function _getEquirectShader(){var ca=new Vector2(1,1),ga=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:ca},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ga.type="EquirectangularToCubeUV",ga}function _getCubemapShader(){var ca=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ca.type="CubemapToCubeUV",ca}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(ca,ga,_s,Ss,Ms,Cs,Ts){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(ca,ga,_s,Ms,Cs,Ts)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(ca){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),ca}function MultiMaterial(ca){return ca===void 0&&(ca=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),ca.isMultiMaterial=!0,ca.materials=ca,ca.clone=function(){return ca.slice()},ca}function PointCloud(ca,ga){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(ca,ga)}function Particle(ca){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(ca)}function ParticleSystem(ca,ga){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(ca,ga)}function PointCloudMaterial(ca){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleBasicMaterial(ca){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleSystemMaterial(ca){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function Vertex(ca,ga,_s){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(ca,ga,_s)}function DynamicBufferAttribute(ca,ga){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(ca,ga).setUsage(DynamicDrawUsage)}function Int8Attribute(ca,ga){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(ca,ga)}function Uint8Attribute(ca,ga){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(ca,ga)}function Uint8ClampedAttribute(ca,ga){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(ca,ga)}function Int16Attribute(ca,ga){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(ca,ga)}function Uint16Attribute(ca,ga){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(ca,ga)}function Int32Attribute(ca,ga){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(ca,ga)}function Uint32Attribute(ca,ga){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(ca,ga)}function Float32Attribute(ca,ga){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(ca,ga)}function Float64Attribute(ca,ga){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(ca,ga)}Curve.create=function(ca,ga){return console.log("THREE.Curve.create() has been deprecated"),ca.prototype=Object.create(Curve.prototype),ca.prototype.constructor=ca,ca.prototype.getPoint=ga,ca};Object.assign(CurvePath.prototype,{createPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getPoints(ca);return this.createGeometry(ga)},createSpacedPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getSpacedPoints(ca);return this.createGeometry(ga)},createGeometry:function(ca){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var ga=new Geometry,_s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];ga.vertices.push(new Vector3(Ms.x,Ms.y,Ms.z||0))}return ga}});Object.assign(Path.prototype,{fromPoints:function(ca){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(ca)}});function ClosedSplineCurve3(ca){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(ca){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(ca){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(ca){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(ca)}function BoundingBoxHelper(ca,ga){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(ca,ga)}function EdgesHelper(ca,ga){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(ca,ga){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(ca){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(ca)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(ca){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(ca)}function BinaryTextureLoader(ca){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(ca)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(ca){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(ca)}});Object.assign(Box2.prototype,{center:function(ca){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},size:function(ca){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Box3.prototype,{center:function(ca){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)},size:function(ca){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(ca){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(ca)};Line3.prototype.center=function(ca){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(ca)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(ca){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(ca)},nextPowerOfTwo:function(ca){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(ca)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},multiplyVector3:function(ca){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(ca){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(ca)},flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(ca){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(ca)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(ca){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector4:function(ca){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(ca){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),ca.transformDirection(this)},crossVector:function(ca){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(ca,ga,_s,Ss,Ms,Cs){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(ca,ga,Ss,_s,Ms,Cs)}});Plane.prototype.isIntersectionLine=function(ca){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(ca)};Quaternion.prototype.multiplyVector3=function(ca){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),ca.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(ca){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionPlane:function(ca){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(ca,ga){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(ca,ga)},midpoint:function(ca){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(ca)},normal:function(ca){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(ca)},plane:function(ca){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(ca)}});Object.assign(Triangle,{barycoordFromPoint:function(ca,ga,_s,Ss,Ms){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(ca,ga,_s,Ss,Ms)},normal:function(ca,ga,_s,Ss){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(ca,ga,_s,Ss)}});Object.assign(Shape.prototype,{extractAllPoints:function(ca){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(ca)},extrude:function(ca){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,ca)},makeGeometry:function(ca){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,ca)}});Object.assign(Vector2.prototype,{fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},distanceToManhattan:function(ca){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(ca){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(ca)},getScaleFromMatrix:function(ca){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(ca)},getColumnFromMatrix:function(ca,ga){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(ga,ca)},applyProjection:function(ca){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(ca)},fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},distanceToManhattan:function(ca){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(ca,ga,_s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,_s)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(ca){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.assign(Object3D.prototype,{getChildByName:function(ca){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(ca)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(ca,ga){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(ga,ca)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(ca){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(ca){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=ca}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(ca){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=ca}});PerspectiveCamera.prototype.setLens=function(ca,ga){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),ga!==void 0&&(this.filmGauge=ga),this.setFocalLength(ca)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(ca){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=ca}},shadowCameraLeft:{set:function(ca){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=ca}},shadowCameraRight:{set:function(ca){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=ca}},shadowCameraTop:{set:function(ca){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=ca}},shadowCameraBottom:{set:function(ca){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=ca}},shadowCameraNear:{set:function(ca){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=ca}},shadowCameraFar:{set:function(ca){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=ca}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(ca){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=ca}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(ca){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=ca}},shadowMapHeight:{set:function(ca){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=ca}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(ca){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(ca){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(ca)},addAttribute:function(ca,ga){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(ga&&ga.isBufferAttribute)&&!(ga&&ga.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(ca,new BufferAttribute(arguments[1],arguments[2]))):ca==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(ga),this):this.setAttribute(ca,ga)},addDrawCall:function(ca,ga,_s){_s!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(ca,ga)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(ca){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(ca)},applyMatrix:function(ca){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(ca){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=ca}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(ca){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=ca}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(ca){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(ca)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(ca){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(ca){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ca===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(ca){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=ca}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(ca){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=ca}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(ca,ga,_s,Ss){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(ca),this.clear(ga,_s,Ss)},animate:function(ca){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(ca)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(ca){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(ca)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=ca}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=ca}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(ca){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=ca===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(ca,ga,_s){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(ca,_s)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=ca}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=ca}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=ca}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=ca}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(ca){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=ca}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(ca){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=ca}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(ca){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=ca}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(ca){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=ca}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(ca){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=ca}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(ca){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=ca}}});Object.defineProperties(Audio.prototype,{load:{value:function(ca){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var ga=this,_s=new AudioLoader;return _s.load(ca,function(Ss){ga.setBuffer(Ss)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(ca,ga){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(ca,ga)};var GeometryUtils={merge:function(ca,ga,_s){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ss;ga.isMesh&&(ga.matrixAutoUpdate&&ga.updateMatrix(),Ss=ga.matrix,ga=ga.geometry),ca.merge(ga,Ss,_s)},center:function(ca){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),ca.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(ca,ga,_s,Ss){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Ms=new TextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(ca,_s,void 0,Ss);return ga&&(Cs.mapping=ga),Cs};ImageUtils.loadTextureCube=function(ca,ga,_s,Ss){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Ms=new CubeTextureLoader;Ms.setCrossOrigin(this.crossOrigin);var Cs=Ms.load(ca,_s,void 0,Ss);return ga&&(Cs.mapping=ga),Cs};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding}),require$$1=getAugmentedNamespace(three_module),tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(ca){var ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s,Fs,Gs,Vs,ks,Os,Ns,Us,Hs,zs,js,Ws,Qs;(function(qs){var tu=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};qs(Ys(tu,Ys(ca.exports)));function Ys(Ks,Js){return Ks!==tu&&(typeof Object.create=="function"?Object.defineProperty(Ks,"__esModule",{value:!0}):Ks.__esModule=!0),function(eu,Zs){return Ks[eu]=Js?Js(eu,Zs):Zs}}})(function(qs){var tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ks,Js){Ks.__proto__=Js}||function(Ks,Js){for(var eu in Js)Object.prototype.hasOwnProperty.call(Js,eu)&&(Ks[eu]=Js[eu])};ga=function(Ks,Js){if(typeof Js!="function"&&Js!==null)throw new TypeError("Class extends value "+String(Js)+" is not a constructor or null");tu(Ks,Js);function eu(){this.constructor=Ks}Ks.prototype=Js===null?Object.create(Js):(eu.prototype=Js.prototype,new eu)},_s=Object.assign||function(Ks){for(var Js,eu=1,Zs=arguments.length;eu<Zs;eu++){Js=arguments[eu];for(var au in Js)Object.prototype.hasOwnProperty.call(Js,au)&&(Ks[au]=Js[au])}return Ks},Ss=function(Ks,Js){var eu={};for(var Zs in Ks)Object.prototype.hasOwnProperty.call(Ks,Zs)&&Js.indexOf(Zs)<0&&(eu[Zs]=Ks[Zs]);if(Ks!=null&&typeof Object.getOwnPropertySymbols=="function")for(var au=0,Zs=Object.getOwnPropertySymbols(Ks);au<Zs.length;au++)Js.indexOf(Zs[au])<0&&Object.prototype.propertyIsEnumerable.call(Ks,Zs[au])&&(eu[Zs[au]]=Ks[Zs[au]]);return eu},Ms=function(Ks,Js,eu,Zs){var au=arguments.length,ru=au<3?Js:Zs===null?Zs=Object.getOwnPropertyDescriptor(Js,eu):Zs,su;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ru=Reflect.decorate(Ks,Js,eu,Zs);else for(var lu=Ks.length-1;lu>=0;lu--)(su=Ks[lu])&&(ru=(au<3?su(ru):au>3?su(Js,eu,ru):su(Js,eu))||ru);return au>3&&ru&&Object.defineProperty(Js,eu,ru),ru},Cs=function(Ks,Js){return function(eu,Zs){Js(eu,Zs,Ks)}},Ts=function(Ks,Js){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ks,Js)},Bs=function(Ks,Js,eu,Zs){function au(ru){return ru instanceof eu?ru:new eu(function(su){su(ru)})}return new(eu||(eu=Promise))(function(ru,su){function lu(wu){try{hu(Zs.next(wu))}catch(Mu){su(Mu)}}function gu(wu){try{hu(Zs.throw(wu))}catch(Mu){su(Mu)}}function hu(wu){wu.done?ru(wu.value):au(wu.value).then(lu,gu)}hu((Zs=Zs.apply(Ks,Js||[])).next())})},Ps=function(Ks,Js){var eu={label:0,sent:function(){if(ru[0]&1)throw ru[1];return ru[1]},trys:[],ops:[]},Zs,au,ru,su;return su={next:lu(0),throw:lu(1),return:lu(2)},typeof Symbol=="function"&&(su[Symbol.iterator]=function(){return this}),su;function lu(hu){return function(wu){return gu([hu,wu])}}function gu(hu){if(Zs)throw new TypeError("Generator is already executing.");for(;eu;)try{if(Zs=1,au&&(ru=hu[0]&2?au.return:hu[0]?au.throw||((ru=au.return)&&ru.call(au),0):au.next)&&!(ru=ru.call(au,hu[1])).done)return ru;switch(au=0,ru&&(hu=[hu[0]&2,ru.value]),hu[0]){case 0:case 1:ru=hu;break;case 4:return eu.label++,{value:hu[1],done:!1};case 5:eu.label++,au=hu[1],hu=[0];continue;case 7:hu=eu.ops.pop(),eu.trys.pop();continue;default:if(ru=eu.trys,!(ru=ru.length>0&&ru[ru.length-1])&&(hu[0]===6||hu[0]===2)){eu=0;continue}if(hu[0]===3&&(!ru||hu[1]>ru[0]&&hu[1]<ru[3])){eu.label=hu[1];break}if(hu[0]===6&&eu.label<ru[1]){eu.label=ru[1],ru=hu;break}if(ru&&eu.label<ru[2]){eu.label=ru[2],eu.ops.push(hu);break}ru[2]&&eu.ops.pop(),eu.trys.pop();continue}hu=Js.call(Ks,eu)}catch(wu){hu=[6,wu],au=0}finally{Zs=ru=0}if(hu[0]&5)throw hu[1];return{value:hu[0]?hu[1]:void 0,done:!0}}},Ls=function(Ks,Js){for(var eu in Ks)eu!=="default"&&!Object.prototype.hasOwnProperty.call(Js,eu)&&Qs(Js,Ks,eu)},Qs=Object.create?function(Ks,Js,eu,Zs){Zs===void 0&&(Zs=eu),Object.defineProperty(Ks,Zs,{enumerable:!0,get:function(){return Js[eu]}})}:function(Ks,Js,eu,Zs){Zs===void 0&&(Zs=eu),Ks[Zs]=Js[eu]},Rs=function(Ks){var Js=typeof Symbol=="function"&&Symbol.iterator,eu=Js&&Ks[Js],Zs=0;if(eu)return eu.call(Ks);if(Ks&&typeof Ks.length=="number")return{next:function(){return Ks&&Zs>=Ks.length&&(Ks=void 0),{value:Ks&&Ks[Zs++],done:!Ks}}};throw new TypeError(Js?"Object is not iterable.":"Symbol.iterator is not defined.")},Ds=function(Ks,Js){var eu=typeof Symbol=="function"&&Ks[Symbol.iterator];if(!eu)return Ks;var Zs=eu.call(Ks),au,ru=[],su;try{for(;(Js===void 0||Js-- >0)&&!(au=Zs.next()).done;)ru.push(au.value)}catch(lu){su={error:lu}}finally{try{au&&!au.done&&(eu=Zs.return)&&eu.call(Zs)}finally{if(su)throw su.error}}return ru},$s=function(){for(var Ks=[],Js=0;Js<arguments.length;Js++)Ks=Ks.concat(Ds(arguments[Js]));return Ks},Fs=function(){for(var Ks=0,Js=0,eu=arguments.length;Js<eu;Js++)Ks+=arguments[Js].length;for(var Zs=Array(Ks),au=0,Js=0;Js<eu;Js++)for(var ru=arguments[Js],su=0,lu=ru.length;su<lu;su++,au++)Zs[au]=ru[su];return Zs},Gs=function(Ks,Js,eu){if(eu||arguments.length===2)for(var Zs=0,au=Js.length,ru;Zs<au;Zs++)(ru||!(Zs in Js))&&(ru||(ru=Array.prototype.slice.call(Js,0,Zs)),ru[Zs]=Js[Zs]);return Ks.concat(ru||Array.prototype.slice.call(Js))},Vs=function(Ks){return this instanceof Vs?(this.v=Ks,this):new Vs(Ks)},ks=function(Ks,Js,eu){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Zs=eu.apply(Ks,Js||[]),au,ru=[];return au={},su("next"),su("throw"),su("return"),au[Symbol.asyncIterator]=function(){return this},au;function su(du){Zs[du]&&(au[du]=function(vu){return new Promise(function(pu,yu){ru.push([du,vu,pu,yu])>1||lu(du,vu)})})}function lu(du,vu){try{gu(Zs[du](vu))}catch(pu){Mu(ru[0][3],pu)}}function gu(du){du.value instanceof Vs?Promise.resolve(du.value.v).then(hu,wu):Mu(ru[0][2],du)}function hu(du){lu("next",du)}function wu(du){lu("throw",du)}function Mu(du,vu){du(vu),ru.shift(),ru.length&&lu(ru[0][0],ru[0][1])}},Os=function(Ks){var Js,eu;return Js={},Zs("next"),Zs("throw",function(au){throw au}),Zs("return"),Js[Symbol.iterator]=function(){return this},Js;function Zs(au,ru){Js[au]=Ks[au]?function(su){return(eu=!eu)?{value:Vs(Ks[au](su)),done:au==="return"}:ru?ru(su):su}:ru}},Ns=function(Ks){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Js=Ks[Symbol.asyncIterator],eu;return Js?Js.call(Ks):(Ks=typeof Rs=="function"?Rs(Ks):Ks[Symbol.iterator](),eu={},Zs("next"),Zs("throw"),Zs("return"),eu[Symbol.asyncIterator]=function(){return this},eu);function Zs(ru){eu[ru]=Ks[ru]&&function(su){return new Promise(function(lu,gu){su=Ks[ru](su),au(lu,gu,su.done,su.value)})}}function au(ru,su,lu,gu){Promise.resolve(gu).then(function(hu){ru({value:hu,done:lu})},su)}},Us=function(Ks,Js){return Object.defineProperty?Object.defineProperty(Ks,"raw",{value:Js}):Ks.raw=Js,Ks};var Ys=Object.create?function(Ks,Js){Object.defineProperty(Ks,"default",{enumerable:!0,value:Js})}:function(Ks,Js){Ks.default=Js};Hs=function(Ks){if(Ks&&Ks.__esModule)return Ks;var Js={};if(Ks!=null)for(var eu in Ks)eu!=="default"&&Object.prototype.hasOwnProperty.call(Ks,eu)&&Qs(Js,Ks,eu);return Ys(Js,Ks),Js},zs=function(Ks){return Ks&&Ks.__esModule?Ks:{default:Ks}},js=function(Ks,Js,eu,Zs){if(eu==="a"&&!Zs)throw new TypeError("Private accessor was defined without a getter");if(typeof Js=="function"?Ks!==Js||!Zs:!Js.has(Ks))throw new TypeError("Cannot read private member from an object whose class did not declare it");return eu==="m"?Zs:eu==="a"?Zs.call(Ks):Zs?Zs.value:Js.get(Ks)},Ws=function(Ks,Js,eu,Zs,au){if(Zs==="m")throw new TypeError("Private method is not writable");if(Zs==="a"&&!au)throw new TypeError("Private accessor was defined without a setter");if(typeof Js=="function"?Ks!==Js||!au:!Js.has(Ks))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Zs==="a"?au.call(Ks,eu):au?au.value=eu:Js.set(Ks,eu),eu},qs("__extends",ga),qs("__assign",_s),qs("__rest",Ss),qs("__decorate",Ms),qs("__param",Cs),qs("__metadata",Ts),qs("__awaiter",Bs),qs("__generator",Ps),qs("__exportStar",Ls),qs("__createBinding",Qs),qs("__values",Rs),qs("__read",Ds),qs("__spread",$s),qs("__spreadArrays",Fs),qs("__spreadArray",Gs),qs("__await",Vs),qs("__asyncGenerator",ks),qs("__asyncDelegator",Os),qs("__asyncValues",Ns),qs("__makeTemplateObject",Us),qs("__importStar",Hs),qs("__importDefault",zs),qs("__classPrivateFieldGet",js),qs("__classPrivateFieldSet",Ws)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(ca,ga){for(var _s=new Array(arguments.length-1),Ss=0,Ms=2,Cs=!0;Ms<arguments.length;)_s[Ss++]=arguments[Ms++];return new Promise(function(Bs,Ps){_s[Ss]=function(Rs){if(Cs)if(Cs=!1,Rs)Ps(Rs);else{for(var Ds=new Array(arguments.length-1),$s=0;$s<Ds.length;)Ds[$s++]=arguments[$s];Bs.apply(null,Ds)}};try{ca.apply(ga||null,_s)}catch(Ls){Cs&&(Cs=!1,Ps(Ls))}})}var base64$1={};(function(ca){var ga=ca;ga.length=function(Bs){var Ps=Bs.length;if(!Ps)return 0;for(var Ls=0;--Ps%4>1&&Bs.charAt(Ps)==="=";)++Ls;return Math.ceil(Bs.length*3)/4-Ls};for(var _s=new Array(64),Ss=new Array(123),Ms=0;Ms<64;)Ss[_s[Ms]=Ms<26?Ms+65:Ms<52?Ms+71:Ms<62?Ms-4:Ms-59|43]=Ms++;ga.encode=function(Bs,Ps,Ls){for(var Rs=null,Ds=[],$s=0,Fs=0,Gs;Ps<Ls;){var Vs=Bs[Ps++];switch(Fs){case 0:Ds[$s++]=_s[Vs>>2],Gs=(Vs&3)<<4,Fs=1;break;case 1:Ds[$s++]=_s[Gs|Vs>>4],Gs=(Vs&15)<<2,Fs=2;break;case 2:Ds[$s++]=_s[Gs|Vs>>6],Ds[$s++]=_s[Vs&63],Fs=0;break}$s>8191&&((Rs||(Rs=[])).push(String.fromCharCode.apply(String,Ds)),$s=0)}return Fs&&(Ds[$s++]=_s[Gs],Ds[$s++]=61,Fs===1&&(Ds[$s++]=61)),Rs?($s&&Rs.push(String.fromCharCode.apply(String,Ds.slice(0,$s))),Rs.join("")):String.fromCharCode.apply(String,Ds.slice(0,$s))};var Cs="invalid encoding";ga.decode=function(Bs,Ps,Ls){for(var Rs=Ls,Ds=0,$s,Fs=0;Fs<Bs.length;){var Gs=Bs.charCodeAt(Fs++);if(Gs===61&&Ds>1)break;if((Gs=Ss[Gs])===void 0)throw Error(Cs);switch(Ds){case 0:$s=Gs,Ds=1;break;case 1:Ps[Ls++]=$s<<2|(Gs&48)>>4,$s=Gs,Ds=2;break;case 2:Ps[Ls++]=($s&15)<<4|(Gs&60)>>2,$s=Gs,Ds=3;break;case 3:Ps[Ls++]=($s&3)<<6|Gs,Ds=0;break}}if(Ds===1)throw Error(Cs);return Ls-Rs},ga.test=function(Bs){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Bs)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(ga,_s,Ss){return(this._listeners[ga]||(this._listeners[ga]=[])).push({fn:_s,ctx:Ss||this}),this};EventEmitter.prototype.off=function(ga,_s){if(ga===void 0)this._listeners={};else if(_s===void 0)this._listeners[ga]=[];else for(var Ss=this._listeners[ga],Ms=0;Ms<Ss.length;)Ss[Ms].fn===_s?Ss.splice(Ms,1):++Ms;return this};EventEmitter.prototype.emit=function(ga){var _s=this._listeners[ga];if(_s){for(var Ss=[],Ms=1;Ms<arguments.length;)Ss.push(arguments[Ms++]);for(Ms=0;Ms<_s.length;)_s[Ms].fn.apply(_s[Ms++].ctx,Ss)}return this};var float=factory(factory);function factory(ca){return typeof Float32Array!="undefined"?function(){var ga=new Float32Array([-0]),_s=new Uint8Array(ga.buffer),Ss=_s[3]===128;function Ms(Ps,Ls,Rs){ga[0]=Ps,Ls[Rs]=_s[0],Ls[Rs+1]=_s[1],Ls[Rs+2]=_s[2],Ls[Rs+3]=_s[3]}function Cs(Ps,Ls,Rs){ga[0]=Ps,Ls[Rs]=_s[3],Ls[Rs+1]=_s[2],Ls[Rs+2]=_s[1],Ls[Rs+3]=_s[0]}ca.writeFloatLE=Ss?Ms:Cs,ca.writeFloatBE=Ss?Cs:Ms;function Ts(Ps,Ls){return _s[0]=Ps[Ls],_s[1]=Ps[Ls+1],_s[2]=Ps[Ls+2],_s[3]=Ps[Ls+3],ga[0]}function Bs(Ps,Ls){return _s[3]=Ps[Ls],_s[2]=Ps[Ls+1],_s[1]=Ps[Ls+2],_s[0]=Ps[Ls+3],ga[0]}ca.readFloatLE=Ss?Ts:Bs,ca.readFloatBE=Ss?Bs:Ts}():function(){function ga(Ss,Ms,Cs,Ts){var Bs=Ms<0?1:0;if(Bs&&(Ms=-Ms),Ms===0)Ss(1/Ms>0?0:2147483648,Cs,Ts);else if(isNaN(Ms))Ss(2143289344,Cs,Ts);else if(Ms>34028234663852886e22)Ss((Bs<<31|2139095040)>>>0,Cs,Ts);else if(Ms<11754943508222875e-54)Ss((Bs<<31|Math.round(Ms/1401298464324817e-60))>>>0,Cs,Ts);else{var Ps=Math.floor(Math.log(Ms)/Math.LN2),Ls=Math.round(Ms*Math.pow(2,-Ps)*8388608)&8388607;Ss((Bs<<31|Ps+127<<23|Ls)>>>0,Cs,Ts)}}ca.writeFloatLE=ga.bind(null,writeUintLE),ca.writeFloatBE=ga.bind(null,writeUintBE);function _s(Ss,Ms,Cs){var Ts=Ss(Ms,Cs),Bs=(Ts>>31)*2+1,Ps=Ts>>>23&255,Ls=Ts&8388607;return Ps===255?Ls?NaN:Bs*(1/0):Ps===0?Bs*1401298464324817e-60*Ls:Bs*Math.pow(2,Ps-150)*(Ls+8388608)}ca.readFloatLE=_s.bind(null,readUintLE),ca.readFloatBE=_s.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var ga=new Float64Array([-0]),_s=new Uint8Array(ga.buffer),Ss=_s[7]===128;function Ms(Ps,Ls,Rs){ga[0]=Ps,Ls[Rs]=_s[0],Ls[Rs+1]=_s[1],Ls[Rs+2]=_s[2],Ls[Rs+3]=_s[3],Ls[Rs+4]=_s[4],Ls[Rs+5]=_s[5],Ls[Rs+6]=_s[6],Ls[Rs+7]=_s[7]}function Cs(Ps,Ls,Rs){ga[0]=Ps,Ls[Rs]=_s[7],Ls[Rs+1]=_s[6],Ls[Rs+2]=_s[5],Ls[Rs+3]=_s[4],Ls[Rs+4]=_s[3],Ls[Rs+5]=_s[2],Ls[Rs+6]=_s[1],Ls[Rs+7]=_s[0]}ca.writeDoubleLE=Ss?Ms:Cs,ca.writeDoubleBE=Ss?Cs:Ms;function Ts(Ps,Ls){return _s[0]=Ps[Ls],_s[1]=Ps[Ls+1],_s[2]=Ps[Ls+2],_s[3]=Ps[Ls+3],_s[4]=Ps[Ls+4],_s[5]=Ps[Ls+5],_s[6]=Ps[Ls+6],_s[7]=Ps[Ls+7],ga[0]}function Bs(Ps,Ls){return _s[7]=Ps[Ls],_s[6]=Ps[Ls+1],_s[5]=Ps[Ls+2],_s[4]=Ps[Ls+3],_s[3]=Ps[Ls+4],_s[2]=Ps[Ls+5],_s[1]=Ps[Ls+6],_s[0]=Ps[Ls+7],ga[0]}ca.readDoubleLE=Ss?Ts:Bs,ca.readDoubleBE=Ss?Bs:Ts}():function(){function ga(Ss,Ms,Cs,Ts,Bs,Ps){var Ls=Ts<0?1:0;if(Ls&&(Ts=-Ts),Ts===0)Ss(0,Bs,Ps+Ms),Ss(1/Ts>0?0:2147483648,Bs,Ps+Cs);else if(isNaN(Ts))Ss(0,Bs,Ps+Ms),Ss(2146959360,Bs,Ps+Cs);else if(Ts>17976931348623157e292)Ss(0,Bs,Ps+Ms),Ss((Ls<<31|2146435072)>>>0,Bs,Ps+Cs);else{var Rs;if(Ts<22250738585072014e-324)Rs=Ts/5e-324,Ss(Rs>>>0,Bs,Ps+Ms),Ss((Ls<<31|Rs/4294967296)>>>0,Bs,Ps+Cs);else{var Ds=Math.floor(Math.log(Ts)/Math.LN2);Ds===1024&&(Ds=1023),Rs=Ts*Math.pow(2,-Ds),Ss(Rs*4503599627370496>>>0,Bs,Ps+Ms),Ss((Ls<<31|Ds+1023<<20|Rs*1048576&1048575)>>>0,Bs,Ps+Cs)}}}ca.writeDoubleLE=ga.bind(null,writeUintLE,0,4),ca.writeDoubleBE=ga.bind(null,writeUintBE,4,0);function _s(Ss,Ms,Cs,Ts,Bs){var Ps=Ss(Ts,Bs+Ms),Ls=Ss(Ts,Bs+Cs),Rs=(Ls>>31)*2+1,Ds=Ls>>>20&2047,$s=4294967296*(Ls&1048575)+Ps;return Ds===2047?$s?NaN:Rs*(1/0):Ds===0?Rs*5e-324*$s:Rs*Math.pow(2,Ds-1075)*($s+4503599627370496)}ca.readDoubleLE=_s.bind(null,readUintLE,0,4),ca.readDoubleBE=_s.bind(null,readUintBE,4,0)}(),ca}function writeUintLE(ca,ga,_s){ga[_s]=ca&255,ga[_s+1]=ca>>>8&255,ga[_s+2]=ca>>>16&255,ga[_s+3]=ca>>>24}function writeUintBE(ca,ga,_s){ga[_s]=ca>>>24,ga[_s+1]=ca>>>16&255,ga[_s+2]=ca>>>8&255,ga[_s+3]=ca&255}function readUintLE(ca,ga){return(ca[ga]|ca[ga+1]<<8|ca[ga+2]<<16|ca[ga+3]<<24)>>>0}function readUintBE(ca,ga){return(ca[ga]<<24|ca[ga+1]<<16|ca[ga+2]<<8|ca[ga+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ca){}return null}var utf8$2={};(function(ca){var ga=ca;ga.length=function(Ss){for(var Ms=0,Cs=0,Ts=0;Ts<Ss.length;++Ts)Cs=Ss.charCodeAt(Ts),Cs<128?Ms+=1:Cs<2048?Ms+=2:(Cs&64512)==55296&&(Ss.charCodeAt(Ts+1)&64512)==56320?(++Ts,Ms+=4):Ms+=3;return Ms},ga.read=function(Ss,Ms,Cs){var Ts=Cs-Ms;if(Ts<1)return"";for(var Bs=null,Ps=[],Ls=0,Rs;Ms<Cs;)Rs=Ss[Ms++],Rs<128?Ps[Ls++]=Rs:Rs>191&&Rs<224?Ps[Ls++]=(Rs&31)<<6|Ss[Ms++]&63:Rs>239&&Rs<365?(Rs=((Rs&7)<<18|(Ss[Ms++]&63)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63)-65536,Ps[Ls++]=55296+(Rs>>10),Ps[Ls++]=56320+(Rs&1023)):Ps[Ls++]=(Rs&15)<<12|(Ss[Ms++]&63)<<6|Ss[Ms++]&63,Ls>8191&&((Bs||(Bs=[])).push(String.fromCharCode.apply(String,Ps)),Ls=0);return Bs?(Ls&&Bs.push(String.fromCharCode.apply(String,Ps.slice(0,Ls))),Bs.join("")):String.fromCharCode.apply(String,Ps.slice(0,Ls))},ga.write=function(Ss,Ms,Cs){for(var Ts=Cs,Bs,Ps,Ls=0;Ls<Ss.length;++Ls)Bs=Ss.charCodeAt(Ls),Bs<128?Ms[Cs++]=Bs:Bs<2048?(Ms[Cs++]=Bs>>6|192,Ms[Cs++]=Bs&63|128):(Bs&64512)==55296&&((Ps=Ss.charCodeAt(Ls+1))&64512)==56320?(Bs=65536+((Bs&1023)<<10)+(Ps&1023),++Ls,Ms[Cs++]=Bs>>18|240,Ms[Cs++]=Bs>>12&63|128,Ms[Cs++]=Bs>>6&63|128,Ms[Cs++]=Bs&63|128):(Ms[Cs++]=Bs>>12|224,Ms[Cs++]=Bs>>6&63|128,Ms[Cs++]=Bs&63|128);return Cs-Ts}})(utf8$2);var pool_1=pool;function pool(ca,ga,_s){var Ss=_s||8192,Ms=Ss>>>1,Cs=null,Ts=Ss;return function(Ps){if(Ps<1||Ps>Ms)return ca(Ps);Ts+Ps>Ss&&(Cs=ca(Ss),Ts=0);var Ls=ga.call(Cs,Ts,Ts+=Ps);return Ts&7&&(Ts=(Ts|7)+1),Ls}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(ca,ga){this.lo=ca>>>0,this.hi=ga>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function ca(ga){if(ga===0)return zero;var _s=ga<0;_s&&(ga=-ga);var Ss=ga>>>0,Ms=(ga-Ss)/4294967296>>>0;return _s&&(Ms=~Ms>>>0,Ss=~Ss>>>0,++Ss>4294967295&&(Ss=0,++Ms>4294967295&&(Ms=0))),new LongBits$2(Ss,Ms)};LongBits$2.from=function ca(ga){if(typeof ga=="number")return LongBits$2.fromNumber(ga);if(util$5.isString(ga))if(util$5.Long)ga=util$5.Long.fromString(ga);else return LongBits$2.fromNumber(parseInt(ga,10));return ga.low||ga.high?new LongBits$2(ga.low>>>0,ga.high>>>0):zero};LongBits$2.prototype.toNumber=function ca(ga){if(!ga&&this.hi>>>31){var _s=~this.lo+1>>>0,Ss=~this.hi>>>0;return _s||(Ss=Ss+1>>>0),-(_s+Ss*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function ca(ga){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(ga)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(ga)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function ca(ga){return ga===zeroHash?zero:new LongBits$2((charCodeAt.call(ga,0)|charCodeAt.call(ga,1)<<8|charCodeAt.call(ga,2)<<16|charCodeAt.call(ga,3)<<24)>>>0,(charCodeAt.call(ga,4)|charCodeAt.call(ga,5)<<8|charCodeAt.call(ga,6)<<16|charCodeAt.call(ga,7)<<24)>>>0)};LongBits$2.prototype.toHash=function ca(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function ca(){var ga=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ga)>>>0,this.lo=(this.lo<<1^ga)>>>0,this};LongBits$2.prototype.zzDecode=function ca(){var ga=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ga)>>>0,this.hi=(this.hi>>>1^ga)>>>0,this};LongBits$2.prototype.length=function ca(){var ga=this.lo,_s=(this.lo>>>28|this.hi<<4)>>>0,Ss=this.hi>>>24;return Ss===0?_s===0?ga<16384?ga<128?1:2:ga<2097152?3:4:_s<16384?_s<128?5:6:_s<2097152?7:8:Ss<128?9:10};(function(ca){var ga=ca;ga.asPromise=aspromise,ga.base64=base64$1,ga.EventEmitter=eventemitter,ga.float=float,ga.inquire=inquire_1,ga.utf8=utf8$2,ga.pool=pool_1,ga.LongBits=longbits,ga.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),ga.global=ga.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,ga.emptyArray=Object.freeze?Object.freeze([]):[],ga.emptyObject=Object.freeze?Object.freeze({}):{},ga.isInteger=Number.isInteger||function(Cs){return typeof Cs=="number"&&isFinite(Cs)&&Math.floor(Cs)===Cs},ga.isString=function(Cs){return typeof Cs=="string"||Cs instanceof String},ga.isObject=function(Cs){return Cs&&typeof Cs=="object"},ga.isset=ga.isSet=function(Cs,Ts){var Bs=Cs[Ts];return Bs!=null&&Cs.hasOwnProperty(Ts)?typeof Bs!="object"||(Array.isArray(Bs)?Bs.length:Object.keys(Bs).length)>0:!1},ga.Buffer=function(){try{var Ms=ga.inquire("buffer").Buffer;return Ms.prototype.utf8Write?Ms:null}catch{return null}}(),ga._Buffer_from=null,ga._Buffer_allocUnsafe=null,ga.newBuffer=function(Cs){return typeof Cs=="number"?ga.Buffer?ga._Buffer_allocUnsafe(Cs):new ga.Array(Cs):ga.Buffer?ga._Buffer_from(Cs):typeof Uint8Array=="undefined"?Cs:new Uint8Array(Cs)},ga.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,ga.Long=ga.global.dcodeIO&&ga.global.dcodeIO.Long||ga.global.Long||ga.inquire("long"),ga.key2Re=/^true|false|0|1$/,ga.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ga.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ga.longToHash=function(Cs){return Cs?ga.LongBits.from(Cs).toHash():ga.LongBits.zeroHash},ga.longFromHash=function(Cs,Ts){var Bs=ga.LongBits.fromHash(Cs);return ga.Long?ga.Long.fromBits(Bs.lo,Bs.hi,Ts):Bs.toNumber(Boolean(Ts))};function _s(Ms,Cs,Ts){for(var Bs=Object.keys(Cs),Ps=0;Ps<Bs.length;++Ps)(Ms[Bs[Ps]]===void 0||!Ts)&&(Ms[Bs[Ps]]=Cs[Bs[Ps]]);return Ms}ga.merge=_s,ga.lcFirst=function(Cs){return Cs.charAt(0).toLowerCase()+Cs.substring(1)};function Ss(Ms){function Cs(Ts,Bs){if(!(this instanceof Cs))return new Cs(Ts,Bs);Object.defineProperty(this,"message",{get:function(){return Ts}}),Error.captureStackTrace?Error.captureStackTrace(this,Cs):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Bs&&_s(this,Bs)}return(Cs.prototype=Object.create(Error.prototype)).constructor=Cs,Object.defineProperty(Cs.prototype,"name",{get:function(){return Ms}}),Cs.prototype.toString=function(){return this.name+": "+this.message},Cs}ga.newError=Ss,ga.ProtocolError=Ss("ProtocolError"),ga.oneOfGetter=function(Cs){for(var Ts={},Bs=0;Bs<Cs.length;++Bs)Ts[Cs[Bs]]=1;return function(){for(var Ps=Object.keys(this),Ls=Ps.length-1;Ls>-1;--Ls)if(Ts[Ps[Ls]]===1&&this[Ps[Ls]]!==void 0&&this[Ps[Ls]]!==null)return Ps[Ls]}},ga.oneOfSetter=function(Cs){return function(Ts){for(var Bs=0;Bs<Cs.length;++Bs)Cs[Bs]!==Ts&&delete this[Cs[Bs]]}},ga.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ga._configure=function(){var Ms=ga.Buffer;if(!Ms){ga._Buffer_from=ga._Buffer_allocUnsafe=null;return}ga._Buffer_from=Ms.from!==Uint8Array.from&&Ms.from||function(Ts,Bs){return new Ms(Ts,Bs)},ga._Buffer_allocUnsafe=Ms.allocUnsafe||function(Ts){return new Ms(Ts)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(ca,ga,_s){this.fn=ca,this.len=ga,this.next=void 0,this.val=_s}function noop$1(){}function State(ca){this.head=ca.head,this.tail=ca.tail,this.len=ca.len,this.next=ca.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function ca(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function ca(ga){return new util$4.Array(ga)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function ca(ga,_s,Ss){return this.tail=this.tail.next=new Op(ga,_s,Ss),this.len+=_s,this};function writeByte(ca,ga,_s){ga[_s]=ca&255}function writeVarint32(ca,ga,_s){for(;ca>127;)ga[_s++]=ca&127|128,ca>>>=7;ga[_s]=ca}function VarintOp(ca,ga){this.len=ca,this.next=void 0,this.val=ga}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function ca(ga){return this.len+=(this.tail=this.tail.next=new VarintOp((ga=ga>>>0)<128?1:ga<16384?2:ga<2097152?3:ga<268435456?4:5,ga)).len,this};Writer$1.prototype.int32=function ca(ga){return ga<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ga)):this.uint32(ga)};Writer$1.prototype.sint32=function ca(ga){return this.uint32((ga<<1^ga>>31)>>>0)};function writeVarint64(ca,ga,_s){for(;ca.hi;)ga[_s++]=ca.lo&127|128,ca.lo=(ca.lo>>>7|ca.hi<<25)>>>0,ca.hi>>>=7;for(;ca.lo>127;)ga[_s++]=ca.lo&127|128,ca.lo=ca.lo>>>7;ga[_s++]=ca.lo}Writer$1.prototype.uint64=function ca(ga){var _s=LongBits$1.from(ga);return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function ca(ga){var _s=LongBits$1.from(ga).zzEncode();return this._push(writeVarint64,_s.length(),_s)};Writer$1.prototype.bool=function ca(ga){return this._push(writeByte,1,ga?1:0)};function writeFixed32(ca,ga,_s){ga[_s]=ca&255,ga[_s+1]=ca>>>8&255,ga[_s+2]=ca>>>16&255,ga[_s+3]=ca>>>24}Writer$1.prototype.fixed32=function ca(ga){return this._push(writeFixed32,4,ga>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function ca(ga){var _s=LongBits$1.from(ga);return this._push(writeFixed32,4,_s.lo)._push(writeFixed32,4,_s.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function ca(ga){return this._push(util$4.float.writeFloatLE,4,ga)};Writer$1.prototype.double=function ca(ga){return this._push(util$4.float.writeDoubleLE,8,ga)};var writeBytes=util$4.Array.prototype.set?function ca(ga,_s,Ss){_s.set(ga,Ss)}:function ca(ga,_s,Ss){for(var Ms=0;Ms<ga.length;++Ms)_s[Ss+Ms]=ga[Ms]};Writer$1.prototype.bytes=function ca(ga){var _s=ga.length>>>0;if(!_s)return this._push(writeByte,1,0);if(util$4.isString(ga)){var Ss=Writer$1.alloc(_s=base64.length(ga));base64.decode(ga,Ss,0),ga=Ss}return this.uint32(_s)._push(writeBytes,_s,ga)};Writer$1.prototype.string=function ca(ga){var _s=utf8$1.length(ga);return _s?this.uint32(_s)._push(utf8$1.write,_s,ga):this._push(writeByte,1,0)};Writer$1.prototype.fork=function ca(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function ca(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function ca(){var ga=this.head,_s=this.tail,Ss=this.len;return this.reset().uint32(Ss),Ss&&(this.tail.next=ga.next,this.tail=_s,this.len+=Ss),this};Writer$1.prototype.finish=function ca(){for(var ga=this.head.next,_s=this.constructor.alloc(this.len),Ss=0;ga;)ga.fn(ga.val,_s,Ss),Ss+=ga.len,ga=ga.next;return _s};Writer$1._configure=function(ca){BufferWriter$1=ca,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(ga,_s,Ss){_s.set(ga,Ss)}:function(ga,_s,Ss){if(ga.copy)ga.copy(_s,Ss,0,ga.length);else for(var Ms=0;Ms<ga.length;)_s[Ss++]=ga[Ms++]}};BufferWriter.prototype.bytes=function ca(ga){util$3.isString(ga)&&(ga=util$3._Buffer_from(ga,"base64"));var _s=ga.length>>>0;return this.uint32(_s),_s&&this._push(BufferWriter.writeBytesBuffer,_s,ga),this};function writeStringBuffer(ca,ga,_s){ca.length<40?util$3.utf8.write(ca,ga,_s):ga.utf8Write?ga.utf8Write(ca,_s):ga.write(ca,_s)}BufferWriter.prototype.string=function ca(ga){var _s=util$3.Buffer.byteLength(ga);return this.uint32(_s),_s&&this._push(writeStringBuffer,_s,ga),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(ca,ga){return RangeError("index out of range: "+ca.pos+" + "+(ga||1)+" > "+ca.len)}function Reader$1(ca){this.buf=ca,this.pos=0,this.len=ca.length}var create_array=typeof Uint8Array!="undefined"?function ca(ga){if(ga instanceof Uint8Array||Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")}:function ca(ga){if(Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")},create=function ca(){return util$2.Buffer?function(_s){return(Reader$1.create=function(Ms){return util$2.Buffer.isBuffer(Ms)?new BufferReader$1(Ms):create_array(Ms)})(_s)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function ca(){var ga=4294967295;return function(){if(ga=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ga=(ga|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ga;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ga}}();Reader$1.prototype.int32=function ca(){return this.uint32()|0};Reader$1.prototype.sint32=function ca(){var ga=this.uint32();return ga>>>1^-(ga&1)|0};function readLongVarint(){var ca=new LongBits(0,0),ga=0;if(this.len-this.pos>4){for(;ga<4;++ga)if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca;if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<28)>>>0,ca.hi=(ca.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return ca;ga=0}else{for(;ga<3;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca}return ca.lo=(ca.lo|(this.buf[this.pos++]&127)<<ga*7)>>>0,ca}if(this.len-this.pos>4){for(;ga<5;++ga)if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}else for(;ga<5;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function ca(){return this.uint32()!==0};function readFixed32_end(ca,ga){return(ca[ga-4]|ca[ga-3]<<8|ca[ga-2]<<16|ca[ga-1]<<24)>>>0}Reader$1.prototype.fixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ga};Reader$1.prototype.double=function ca(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ga};Reader$1.prototype.bytes=function ca(){var ga=this.uint32(),_s=this.pos,Ss=this.pos+ga;if(Ss>this.len)throw indexOutOfRange(this,ga);return this.pos+=ga,Array.isArray(this.buf)?this.buf.slice(_s,Ss):_s===Ss?new this.buf.constructor(0):this._slice.call(this.buf,_s,Ss)};Reader$1.prototype.string=function ca(){var ga=this.bytes();return utf8.read(ga,0,ga.length)};Reader$1.prototype.skip=function ca(ga){if(typeof ga=="number"){if(this.pos+ga>this.len)throw indexOutOfRange(this,ga);this.pos+=ga}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(ca){switch(ca){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ca=this.uint32()&7)!=4;)this.skipType(ca);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ca+" at offset "+this.pos)}return this};Reader$1._configure=function(ca){BufferReader$1=ca,Reader$1.create=create(),BufferReader$1._configure();var ga=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ga](!1)},uint64:function(){return readLongVarint.call(this)[ga](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ga](!1)},fixed64:function(){return readFixed64.call(this)[ga](!0)},sfixed64:function(){return readFixed64.call(this)[ga](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(ca){Reader.call(this,ca)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function ca(){var ga=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ga,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ga,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(ca,ga,_s){if(typeof ca!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=ca,this.requestDelimited=Boolean(ga),this.responseDelimited=Boolean(_s)}Service.prototype.rpcCall=function ca(ga,_s,Ss,Ms,Cs){if(!Ms)throw TypeError("request must be specified");var Ts=this;if(!Cs)return util.asPromise(ca,Ts,ga,_s,Ss,Ms);if(!Ts.rpcImpl){setTimeout(function(){Cs(Error("already ended"))},0);return}try{return Ts.rpcImpl(ga,_s[Ts.requestDelimited?"encodeDelimited":"encode"](Ms).finish(),function(Ps,Ls){if(Ps)return Ts.emit("error",Ps,ga),Cs(Ps);if(Ls===null){Ts.end(!0);return}if(!(Ls instanceof Ss))try{Ls=Ss[Ts.responseDelimited?"decodeDelimited":"decode"](Ls)}catch(Rs){return Ts.emit("error",Rs,ga),Cs(Rs)}return Ts.emit("data",Ls,ga),Cs(null,Ls)})}catch(Bs){Ts.emit("error",Bs,ga),setTimeout(function(){Cs(Bs)},0);return}};Service.prototype.end=function ca(ga){return this.rpcImpl&&(ga||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(ca){var ga=ca;ga.Service=service})(rpc);var roots={};(function(ca){var ga=ca;ga.build="minimal",ga.Writer=writer,ga.BufferWriter=writer_buffer,ga.Reader=reader,ga.BufferReader=reader_buffer,ga.util=minimal$1,ga.rpc=rpc,ga.roots=roots,ga.configure=_s;function _s(){ga.util._configure(),ga.Writer._configure(ga.BufferWriter),ga.Reader._configure(ga.BufferReader)}_s()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var t$2=require$$1,e$2=tslib.exports,i$2=minimal;function n$3(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var r$2=n$3(t$2),o$2=n$3(i$2),s$2=Number(r$2.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,u$2={},l$2={},h$2=h$2||function(ca,ga){var _s={},Ss=_s.lib={},Ms=Ss.Base=function(){function $s(){}return{extend:function(Fs){$s.prototype=this;var Gs=new $s;return Fs&&Gs.mixIn(Fs),Gs.hasOwnProperty("init")||(Gs.init=function(){Gs.$super.init.apply(this,arguments)}),Gs.init.prototype=Gs,Gs.$super=this,Gs},create:function(){var Fs=this.extend();return Fs.init.apply(Fs,arguments),Fs},init:function(){},mixIn:function(Fs){for(var Gs in Fs)Fs.hasOwnProperty(Gs)&&(this[Gs]=Fs[Gs]);Fs.hasOwnProperty("toString")&&(this.toString=Fs.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Cs=Ss.WordArray=Ms.extend({init:function($s,Fs){$s=this.words=$s||[],this.sigBytes=Fs!=null?Fs:4*$s.length},toString:function($s){return($s||Bs).stringify(this)},concat:function($s){var Fs=this.words,Gs=$s.words,Vs=this.sigBytes,ks=$s.sigBytes;if(this.clamp(),Vs%4)for(var Os=0;Os<ks;Os++){var Ns=Gs[Os>>>2]>>>24-Os%4*8&255;Fs[Vs+Os>>>2]|=Ns<<24-(Vs+Os)%4*8}else for(Os=0;Os<ks;Os+=4)Fs[Vs+Os>>>2]=Gs[Os>>>2];return this.sigBytes+=ks,this},clamp:function(){var $s=this.words,Fs=this.sigBytes;$s[Fs>>>2]&=4294967295<<32-Fs%4*8,$s.length=ca.ceil(Fs/4)},clone:function(){var $s=Ms.clone.call(this);return $s.words=this.words.slice(0),$s},random:function($s){for(var Fs=[],Gs=0;Gs<$s;Gs+=4)Fs.push(4294967296*ca.random()|0);return new Cs.init(Fs,$s)}}),Ts=_s.enc={},Bs=Ts.Hex={stringify:function($s){for(var Fs=$s.words,Gs=$s.sigBytes,Vs=[],ks=0;ks<Gs;ks++){var Os=Fs[ks>>>2]>>>24-ks%4*8&255;Vs.push((Os>>>4).toString(16)),Vs.push((15&Os).toString(16))}return Vs.join("")},parse:function($s){for(var Fs=$s.length,Gs=[],Vs=0;Vs<Fs;Vs+=2)Gs[Vs>>>3]|=parseInt($s.substr(Vs,2),16)<<24-Vs%8*4;return new Cs.init(Gs,Fs/2)}},Ps=Ts.Latin1={stringify:function($s){for(var Fs=$s.words,Gs=$s.sigBytes,Vs=[],ks=0;ks<Gs;ks++){var Os=Fs[ks>>>2]>>>24-ks%4*8&255;Vs.push(String.fromCharCode(Os))}return Vs.join("")},parse:function($s){for(var Fs=$s.length,Gs=[],Vs=0;Vs<Fs;Vs++)Gs[Vs>>>2]|=(255&$s.charCodeAt(Vs))<<24-Vs%4*8;return new Cs.init(Gs,Fs)}},Ls=Ts.Utf8={stringify:function($s){try{return decodeURIComponent(escape(Ps.stringify($s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function($s){return Ps.parse(unescape(encodeURIComponent($s)))}},Rs=Ss.BufferedBlockAlgorithm=Ms.extend({reset:function(){this._data=new Cs.init,this._nDataBytes=0},_append:function($s){typeof $s=="string"&&($s=Ls.parse($s)),this._data.concat($s),this._nDataBytes+=$s.sigBytes},_process:function($s){var Fs=this._data,Gs=Fs.words,Vs=Fs.sigBytes,ks=this.blockSize,Os=Vs/(4*ks),Ns=(Os=$s?ca.ceil(Os):ca.max((0|Os)-this._minBufferSize,0))*ks,Us=ca.min(4*Ns,Vs);if(Ns){for(var Hs=0;Hs<Ns;Hs+=ks)this._doProcessBlock(Gs,Hs);var zs=Gs.splice(0,Ns);Fs.sigBytes-=Us}return new Cs.init(zs,Us)},clone:function(){var $s=Ms.clone.call(this);return $s._data=this._data.clone(),$s},_minBufferSize:0});Ss.Hasher=Rs.extend({cfg:Ms.extend(),init:function($s){this.cfg=this.cfg.extend($s),this.reset()},reset:function(){Rs.reset.call(this),this._doReset()},update:function($s){return this._append($s),this._process(),this},finalize:function($s){return $s&&this._append($s),this._doFinalize()},blockSize:16,_createHelper:function($s){return function(Fs,Gs){return new $s.init(Gs).finalize(Fs)}},_createHmacHelper:function($s){return function(Fs,Gs){return new Ds.HMAC.init($s,Gs).finalize(Fs)}}});var Ds=_s.algo={};return _s}(Math);function c$2(ca,ga,_s){ca!=null&&(typeof ca=="number"?this.fromNumber(ca,ga,_s):ga==null&&typeof ca!="string"?this.fromString(ca,256):this.fromString(ca,ga))}function d$1(){return new c$2(null)}(function(ca){for(var ga=h$2,_s=(Ms=ga.lib).WordArray,Ss=Ms.Hasher,Ms=ga.algo,Cs=[],Ts=[],Bs=function(Gs){return 4294967296*(Gs-(0|Gs))|0},Ps=2,Ls=0;64>Ls;){var Rs;e:{Rs=Ps;for(var Ds=ca.sqrt(Rs),$s=2;$s<=Ds;$s++)if(!(Rs%$s)){Rs=!1;break e}Rs=!0}Rs&&(8>Ls&&(Cs[Ls]=Bs(ca.pow(Ps,.5))),Ts[Ls]=Bs(ca.pow(Ps,1/3)),Ls++),Ps++}var Fs=[];Ms=Ms.SHA256=Ss.extend({_doReset:function(){this._hash=new _s.init(Cs.slice(0))},_doProcessBlock:function(Gs,Vs){for(var ks=this._hash.words,Os=ks[0],Ns=ks[1],Us=ks[2],Hs=ks[3],zs=ks[4],js=ks[5],Ws=ks[6],Qs=ks[7],qs=0;64>qs;qs++){if(16>qs)Fs[qs]=0|Gs[Vs+qs];else{var tu=Fs[qs-15],Ys=Fs[qs-2];Fs[qs]=((tu<<25|tu>>>7)^(tu<<14|tu>>>18)^tu>>>3)+Fs[qs-7]+((Ys<<15|Ys>>>17)^(Ys<<13|Ys>>>19)^Ys>>>10)+Fs[qs-16]}tu=Qs+((zs<<26|zs>>>6)^(zs<<21|zs>>>11)^(zs<<7|zs>>>25))+(zs&js^~zs&Ws)+Ts[qs]+Fs[qs],Ys=((Os<<30|Os>>>2)^(Os<<19|Os>>>13)^(Os<<10|Os>>>22))+(Os&Ns^Os&Us^Ns&Us),Qs=Ws,Ws=js,js=zs,zs=Hs+tu|0,Hs=Us,Us=Ns,Ns=Os,Os=tu+Ys|0}ks[0]=ks[0]+Os|0,ks[1]=ks[1]+Ns|0,ks[2]=ks[2]+Us|0,ks[3]=ks[3]+Hs|0,ks[4]=ks[4]+zs|0,ks[5]=ks[5]+js|0,ks[6]=ks[6]+Ws|0,ks[7]=ks[7]+Qs|0},_doFinalize:function(){var Gs=this._data,Vs=Gs.words,ks=8*this._nDataBytes,Os=8*Gs.sigBytes;return Vs[Os>>>5]|=128<<24-Os%32,Vs[14+(Os+64>>>9<<4)]=ca.floor(ks/4294967296),Vs[15+(Os+64>>>9<<4)]=ks,Gs.sigBytes=4*Vs.length,this._process(),this._hash},clone:function(){var Gs=Ss.clone.call(this);return Gs._hash=this._hash.clone(),Gs}}),ga.SHA256=Ss._createHelper(Ms),ga.HmacSHA256=Ss._createHmacHelper(Ms)})(Math),h$2.lib.Cipher||function(ca){var ga=(Fs=h$2).lib,_s=ga.Base,Ss=ga.WordArray,Ms=ga.BufferedBlockAlgorithm,Cs=Fs.enc.Base64,Ts=Fs.algo.EvpKDF,Bs=ga.Cipher=Ms.extend({cfg:_s.extend(),createEncryptor:function(Vs,ks){return this.create(this._ENC_XFORM_MODE,Vs,ks)},createDecryptor:function(Vs,ks){return this.create(this._DEC_XFORM_MODE,Vs,ks)},init:function(Vs,ks,Os){this.cfg=this.cfg.extend(Os),this._xformMode=Vs,this._key=ks,this.reset()},reset:function(){Ms.reset.call(this),this._doReset()},process:function(Vs){return this._append(Vs),this._process()},finalize:function(Vs){return Vs&&this._append(Vs),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(Vs){return{encrypt:function(ks,Os,Ns){return(typeof Os=="string"?Gs:$s).encrypt(Vs,ks,Os,Ns)},decrypt:function(ks,Os,Ns){return(typeof Os=="string"?Gs:$s).decrypt(Vs,ks,Os,Ns)}}}});ga.StreamCipher=Bs.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Ps=Fs.mode={},Ls=function(Vs,ks,Os){var Ns=this._iv;Ns?this._iv=void 0:Ns=this._prevBlock;for(var Us=0;Us<Os;Us++)Vs[ks+Us]^=Ns[Us]},Rs=(ga.BlockCipherMode=_s.extend({createEncryptor:function(Vs,ks){return this.Encryptor.create(Vs,ks)},createDecryptor:function(Vs,ks){return this.Decryptor.create(Vs,ks)},init:function(Vs,ks){this._cipher=Vs,this._iv=ks}})).extend();Rs.Encryptor=Rs.extend({processBlock:function(Vs,ks){var Os=this._cipher,Ns=Os.blockSize;Ls.call(this,Vs,ks,Ns),Os.encryptBlock(Vs,ks),this._prevBlock=Vs.slice(ks,ks+Ns)}}),Rs.Decryptor=Rs.extend({processBlock:function(Vs,ks){var Os=this._cipher,Ns=Os.blockSize,Us=Vs.slice(ks,ks+Ns);Os.decryptBlock(Vs,ks),Ls.call(this,Vs,ks,Ns),this._prevBlock=Us}}),Ps=Ps.CBC=Rs,Rs=(Fs.pad={}).Pkcs7={pad:function(Vs,ks){for(var Os,Ns=(Os=(Os=4*ks)-Vs.sigBytes%Os)<<24|Os<<16|Os<<8|Os,Us=[],Hs=0;Hs<Os;Hs+=4)Us.push(Ns);Os=Ss.create(Us,Os),Vs.concat(Os)},unpad:function(Vs){Vs.sigBytes-=255&Vs.words[Vs.sigBytes-1>>>2]}},ga.BlockCipher=Bs.extend({cfg:Bs.cfg.extend({mode:Ps,padding:Rs}),reset:function(){Bs.reset.call(this);var Vs=(ks=this.cfg).iv,ks=ks.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Os=ks.createEncryptor;else Os=ks.createDecryptor,this._minBufferSize=1;this._mode=Os.call(ks,this,Vs&&Vs.words)},_doProcessBlock:function(Vs,ks){this._mode.processBlock(Vs,ks)},_doFinalize:function(){var Vs=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){Vs.pad(this._data,this.blockSize);var ks=this._process(!0)}else ks=this._process(!0),Vs.unpad(ks);return ks},blockSize:4});var Ds=ga.CipherParams=_s.extend({init:function(Vs){this.mixIn(Vs)},toString:function(Vs){return(Vs||this.formatter).stringify(this)}}),$s=(Ps=(Fs.format={}).OpenSSL={stringify:function(Vs){var ks=Vs.ciphertext;return((Vs=Vs.salt)?Ss.create([1398893684,1701076831]).concat(Vs).concat(ks):ks).toString(Cs)},parse:function(Vs){var ks=(Vs=Cs.parse(Vs)).words;if(ks[0]==1398893684&&ks[1]==1701076831){var Os=Ss.create(ks.slice(2,4));ks.splice(0,4),Vs.sigBytes-=16}return Ds.create({ciphertext:Vs,salt:Os})}},ga.SerializableCipher=_s.extend({cfg:_s.extend({format:Ps}),encrypt:function(Vs,ks,Os,Ns){Ns=this.cfg.extend(Ns);var Us=Vs.createEncryptor(Os,Ns);return ks=Us.finalize(ks),Us=Us.cfg,Ds.create({ciphertext:ks,key:Os,iv:Us.iv,algorithm:Vs,mode:Us.mode,padding:Us.padding,blockSize:Vs.blockSize,formatter:Ns.format})},decrypt:function(Vs,ks,Os,Ns){return Ns=this.cfg.extend(Ns),ks=this._parse(ks,Ns.format),Vs.createDecryptor(Os,Ns).finalize(ks.ciphertext)},_parse:function(Vs,ks){return typeof Vs=="string"?ks.parse(Vs,this):Vs}})),Fs=(Fs.kdf={}).OpenSSL={execute:function(Vs,ks,Os,Ns){return Ns||(Ns=Ss.random(8)),Vs=Ts.create({keySize:ks+Os}).compute(Vs,Ns),Os=Ss.create(Vs.words.slice(ks),4*Os),Vs.sigBytes=4*ks,Ds.create({key:Vs,iv:Os,salt:Ns})}},Gs=ga.PasswordBasedCipher=$s.extend({cfg:$s.cfg.extend({kdf:Fs}),encrypt:function(Vs,ks,Os,Ns){return Os=(Ns=this.cfg.extend(Ns)).kdf.execute(Os,Vs.keySize,Vs.ivSize),Ns.iv=Os.iv,(Vs=$s.encrypt.call(this,Vs,ks,Os.key,Ns)).mixIn(Os),Vs},decrypt:function(Vs,ks,Os,Ns){return Ns=this.cfg.extend(Ns),ks=this._parse(ks,Ns.format),Os=Ns.kdf.execute(Os,Vs.keySize,Vs.ivSize,ks.salt),Ns.iv=Os.iv,$s.decrypt.call(this,Vs,ks,Os.key,Ns)}})}(),function(){for(var ca=h$2,ga=ca.lib.BlockCipher,_s=ca.algo,Ss=[],Ms=[],Cs=[],Ts=[],Bs=[],Ps=[],Ls=[],Rs=[],Ds=[],$s=[],Fs=[],Gs=0;256>Gs;Gs++)Fs[Gs]=128>Gs?Gs<<1:Gs<<1^283;var Vs=0,ks=0;for(Gs=0;256>Gs;Gs++){var Os=(Os=ks^ks<<1^ks<<2^ks<<3^ks<<4)>>>8^255&Os^99;Ss[Vs]=Os,Ms[Os]=Vs;var Ns=Fs[Vs],Us=Fs[Ns],Hs=Fs[Us],zs=257*Fs[Os]^16843008*Os;Cs[Vs]=zs<<24|zs>>>8,Ts[Vs]=zs<<16|zs>>>16,Bs[Vs]=zs<<8|zs>>>24,Ps[Vs]=zs,zs=16843009*Hs^65537*Us^257*Ns^16843008*Vs,Ls[Os]=zs<<24|zs>>>8,Rs[Os]=zs<<16|zs>>>16,Ds[Os]=zs<<8|zs>>>24,$s[Os]=zs,Vs?(Vs=Ns^Fs[Fs[Fs[Hs^Ns]]],ks^=Fs[Fs[ks]]):Vs=ks=1}var js=[0,1,2,4,8,16,32,64,128,27,54];_s=_s.AES=ga.extend({_doReset:function(){for(var Ws=(qs=this._key).words,Qs=qs.sigBytes/4,qs=4*((this._nRounds=Qs+6)+1),tu=this._keySchedule=[],Ys=0;Ys<qs;Ys++)if(Ys<Qs)tu[Ys]=Ws[Ys];else{var Ks=tu[Ys-1];Ys%Qs?6<Qs&&Ys%Qs==4&&(Ks=Ss[Ks>>>24]<<24|Ss[Ks>>>16&255]<<16|Ss[Ks>>>8&255]<<8|Ss[255&Ks]):(Ks=Ss[(Ks=Ks<<8|Ks>>>24)>>>24]<<24|Ss[Ks>>>16&255]<<16|Ss[Ks>>>8&255]<<8|Ss[255&Ks],Ks^=js[Ys/Qs|0]<<24),tu[Ys]=tu[Ys-Qs]^Ks}for(Ws=this._invKeySchedule=[],Qs=0;Qs<qs;Qs++)Ys=qs-Qs,Ks=Qs%4?tu[Ys]:tu[Ys-4],Ws[Qs]=4>Qs||4>=Ys?Ks:Ls[Ss[Ks>>>24]]^Rs[Ss[Ks>>>16&255]]^Ds[Ss[Ks>>>8&255]]^$s[Ss[255&Ks]]},encryptBlock:function(Ws,Qs){this._doCryptBlock(Ws,Qs,this._keySchedule,Cs,Ts,Bs,Ps,Ss)},decryptBlock:function(Ws,Qs){var qs=Ws[Qs+1];Ws[Qs+1]=Ws[Qs+3],Ws[Qs+3]=qs,this._doCryptBlock(Ws,Qs,this._invKeySchedule,Ls,Rs,Ds,$s,Ms),qs=Ws[Qs+1],Ws[Qs+1]=Ws[Qs+3],Ws[Qs+3]=qs},_doCryptBlock:function(Ws,Qs,qs,tu,Ys,Ks,Js,eu){for(var Zs=this._nRounds,au=Ws[Qs]^qs[0],ru=Ws[Qs+1]^qs[1],su=Ws[Qs+2]^qs[2],lu=Ws[Qs+3]^qs[3],gu=4,hu=1;hu<Zs;hu++){var wu=tu[au>>>24]^Ys[ru>>>16&255]^Ks[su>>>8&255]^Js[255&lu]^qs[gu++],Mu=tu[ru>>>24]^Ys[su>>>16&255]^Ks[lu>>>8&255]^Js[255&au]^qs[gu++],du=tu[su>>>24]^Ys[lu>>>16&255]^Ks[au>>>8&255]^Js[255&ru]^qs[gu++];lu=tu[lu>>>24]^Ys[au>>>16&255]^Ks[ru>>>8&255]^Js[255&su]^qs[gu++],au=wu,ru=Mu,su=du}wu=(eu[au>>>24]<<24|eu[ru>>>16&255]<<16|eu[su>>>8&255]<<8|eu[255&lu])^qs[gu++],Mu=(eu[ru>>>24]<<24|eu[su>>>16&255]<<16|eu[lu>>>8&255]<<8|eu[255&au])^qs[gu++],du=(eu[su>>>24]<<24|eu[lu>>>16&255]<<16|eu[au>>>8&255]<<8|eu[255&ru])^qs[gu++],lu=(eu[lu>>>24]<<24|eu[au>>>16&255]<<16|eu[ru>>>8&255]<<8|eu[255&su])^qs[gu++],Ws[Qs]=wu,Ws[Qs+1]=Mu,Ws[Qs+2]=du,Ws[Qs+3]=lu},keySize:8}),ca.AES=ga._createHelper(_s)}(),l$2.lang={extend:function(ca,ga,_s){if(!ga||!ca)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Ss=function(){};if(Ss.prototype=ga.prototype,ca.prototype=new Ss,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga),_s){var Ms;for(Ms in _s)ca.prototype[Ms]=_s[Ms];var Cs=function(){},Ts=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Cs=function(Bs,Ps){for(Ms=0;Ms<Ts.length;Ms+=1){var Ls=Ts[Ms],Rs=Ps[Ls];typeof Rs=="function"&&Rs!=Object.prototype[Ls]&&(Bs[Ls]=Rs)}})}catch{}Cs(ca.prototype,_s)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(var Ts=32767&ga,Bs=ga>>15;--Cs>=0;){var Ps=32767&this[ca],Ls=this[ca++]>>15,Rs=Bs*Ps+Ls*Ts;Ms=((Ps=Ts*Ps+((32767&Rs)<<15)+_s[Ss]+(1073741823&Ms))>>>30)+(Rs>>>15)+Bs*Ls+(Ms>>>30),_s[Ss++]=1073741823&Ps}return Ms},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(;--Cs>=0;){var Ts=ga*this[ca++]+_s[Ss]+Ms;Ms=Math.floor(Ts/67108864),_s[Ss++]=67108863&Ts}return Ms},a$2=26):(c$2.prototype.am=function(ca,ga,_s,Ss,Ms,Cs){for(var Ts=16383&ga,Bs=ga>>14;--Cs>=0;){var Ps=16383&this[ca],Ls=this[ca++]>>14,Rs=Bs*Ps+Ls*Ts;Ms=((Ps=Ts*Ps+((16383&Rs)<<14)+_s[Ss]+Ms)>>28)+(Rs>>14)+Bs*Ls,_s[Ss++]=268435455&Ps}return Ms},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,A$1,f$2=new Array;for(p$2="0".charCodeAt(0),A$1=0;A$1<=9;++A$1)f$2[p$2++]=A$1;for(p$2="a".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;for(p$2="A".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;function g$2(ca){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(ca)}function v$1(ca,ga){var _s=f$2[ca.charCodeAt(ga)];return _s==null?-1:_s}function m$2(ca){var ga=d$1();return ga.fromInt(ca),ga}function y$1(ca){var ga,_s=1;return(ga=ca>>>16)!=0&&(ca=ga,_s+=16),(ga=ca>>8)!=0&&(ca=ga,_s+=8),(ga=ca>>4)!=0&&(ca=ga,_s+=4),(ga=ca>>2)!=0&&(ca=ga,_s+=2),(ga=ca>>1)!=0&&(ca=ga,_s+=1),_s}function b$1(ca){this.m=ca}function w$1(ca){this.m=ca,this.mp=ca.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<ca.DB-15)-1,this.mt2=2*ca.t}function x$1(ca,ga){return ca&ga}function E$1(ca,ga){return ca|ga}function I(ca,ga){return ca^ga}function C$1(ca,ga){return ca&~ga}function S$1(ca){if(ca==0)return-1;var ga=0;return(65535&ca)==0&&(ca>>=16,ga+=16),(255&ca)==0&&(ca>>=8,ga+=8),(15&ca)==0&&(ca>>=4,ga+=4),(3&ca)==0&&(ca>>=2,ga+=2),(1&ca)==0&&++ga,ga}function B(ca){for(var ga=0;ca!=0;)ca&=ca-1,++ga;return ga}function M$1(){}function P$1(ca){return ca}function T(ca){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*ca.t,this.r2),this.mu=this.r2.divide(ca),this.m=ca}b$1.prototype.convert=function(ca){return ca.s<0||ca.compareTo(this.m)>=0?ca.mod(this.m):ca},b$1.prototype.revert=function(ca){return ca},b$1.prototype.reduce=function(ca){ca.divRemTo(this.m,null,ca)},b$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},b$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},w$1.prototype.convert=function(ca){var ga=d$1();return ca.abs().dlShiftTo(this.m.t,ga),ga.divRemTo(this.m,null,ga),ca.s<0&&ga.compareTo(c$2.ZERO)>0&&this.m.subTo(ga,ga),ga},w$1.prototype.revert=function(ca){var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},w$1.prototype.reduce=function(ca){for(;ca.t<=this.mt2;)ca[ca.t++]=0;for(var ga=0;ga<this.m.t;++ga){var _s=32767&ca[ga],Ss=_s*this.mpl+((_s*this.mph+(ca[ga]>>15)*this.mpl&this.um)<<15)&ca.DM;for(ca[_s=ga+this.m.t]+=this.m.am(0,Ss,ca,ga,0,this.m.t);ca[_s]>=ca.DV;)ca[_s]-=ca.DV,ca[++_s]++}ca.clamp(),ca.drShiftTo(this.m.t,ca),ca.compareTo(this.m)>=0&&ca.subTo(this.m,ca)},w$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},w$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},c$2.prototype.copyTo=function(ca){for(var ga=this.t-1;ga>=0;--ga)ca[ga]=this[ga];ca.t=this.t,ca.s=this.s},c$2.prototype.fromInt=function(ca){this.t=1,this.s=ca<0?-1:0,ca>0?this[0]=ca:ca<-1?this[0]=ca+this.DV:this.t=0},c$2.prototype.fromString=function(ca,ga){var _s;if(ga==16)_s=4;else if(ga==8)_s=3;else if(ga==256)_s=8;else if(ga==2)_s=1;else if(ga==32)_s=5;else{if(ga!=4)return void this.fromRadix(ca,ga);_s=2}this.t=0,this.s=0;for(var Ss=ca.length,Ms=!1,Cs=0;--Ss>=0;){var Ts=_s==8?255&ca[Ss]:v$1(ca,Ss);Ts<0?ca.charAt(Ss)=="-"&&(Ms=!0):(Ms=!1,Cs==0?this[this.t++]=Ts:Cs+_s>this.DB?(this[this.t-1]|=(Ts&(1<<this.DB-Cs)-1)<<Cs,this[this.t++]=Ts>>this.DB-Cs):this[this.t-1]|=Ts<<Cs,(Cs+=_s)>=this.DB&&(Cs-=this.DB))}_s==8&&(128&ca[0])!=0&&(this.s=-1,Cs>0&&(this[this.t-1]|=(1<<this.DB-Cs)-1<<Cs)),this.clamp(),Ms&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var ca=this.s&this.DM;this.t>0&&this[this.t-1]==ca;)--this.t},c$2.prototype.dlShiftTo=function(ca,ga){var _s;for(_s=this.t-1;_s>=0;--_s)ga[_s+ca]=this[_s];for(_s=ca-1;_s>=0;--_s)ga[_s]=0;ga.t=this.t+ca,ga.s=this.s},c$2.prototype.drShiftTo=function(ca,ga){for(var _s=ca;_s<this.t;++_s)ga[_s-ca]=this[_s];ga.t=Math.max(this.t-ca,0),ga.s=this.s},c$2.prototype.lShiftTo=function(ca,ga){var _s,Ss=ca%this.DB,Ms=this.DB-Ss,Cs=(1<<Ms)-1,Ts=Math.floor(ca/this.DB),Bs=this.s<<Ss&this.DM;for(_s=this.t-1;_s>=0;--_s)ga[_s+Ts+1]=this[_s]>>Ms|Bs,Bs=(this[_s]&Cs)<<Ss;for(_s=Ts-1;_s>=0;--_s)ga[_s]=0;ga[Ts]=Bs,ga.t=this.t+Ts+1,ga.s=this.s,ga.clamp()},c$2.prototype.rShiftTo=function(ca,ga){ga.s=this.s;var _s=Math.floor(ca/this.DB);if(_s>=this.t)ga.t=0;else{var Ss=ca%this.DB,Ms=this.DB-Ss,Cs=(1<<Ss)-1;ga[0]=this[_s]>>Ss;for(var Ts=_s+1;Ts<this.t;++Ts)ga[Ts-_s-1]|=(this[Ts]&Cs)<<Ms,ga[Ts-_s]=this[Ts]>>Ss;Ss>0&&(ga[this.t-_s-1]|=(this.s&Cs)<<Ms),ga.t=this.t-_s,ga.clamp()}},c$2.prototype.subTo=function(ca,ga){for(var _s=0,Ss=0,Ms=Math.min(ca.t,this.t);_s<Ms;)Ss+=this[_s]-ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;if(ca.t<this.t){for(Ss-=ca.s;_s<this.t;)Ss+=this[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<ca.t;)Ss-=ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss-=ca.s}ga.s=Ss<0?-1:0,Ss<-1?ga[_s++]=this.DV+Ss:Ss>0&&(ga[_s++]=Ss),ga.t=_s,ga.clamp()},c$2.prototype.multiplyTo=function(ca,ga){var _s=this.abs(),Ss=ca.abs(),Ms=_s.t;for(ga.t=Ms+Ss.t;--Ms>=0;)ga[Ms]=0;for(Ms=0;Ms<Ss.t;++Ms)ga[Ms+_s.t]=_s.am(0,Ss[Ms],ga,Ms,0,_s.t);ga.s=0,ga.clamp(),this.s!=ca.s&&c$2.ZERO.subTo(ga,ga)},c$2.prototype.squareTo=function(ca){for(var ga=this.abs(),_s=ca.t=2*ga.t;--_s>=0;)ca[_s]=0;for(_s=0;_s<ga.t-1;++_s){var Ss=ga.am(_s,ga[_s],ca,2*_s,0,1);(ca[_s+ga.t]+=ga.am(_s+1,2*ga[_s],ca,2*_s+1,Ss,ga.t-_s-1))>=ga.DV&&(ca[_s+ga.t]-=ga.DV,ca[_s+ga.t+1]=1)}ca.t>0&&(ca[ca.t-1]+=ga.am(_s,ga[_s],ca,2*_s,0,1)),ca.s=0,ca.clamp()},c$2.prototype.divRemTo=function(ca,ga,_s){var Ss=ca.abs();if(!(Ss.t<=0)){var Ms=this.abs();if(Ms.t<Ss.t)return ga!=null&&ga.fromInt(0),void(_s!=null&&this.copyTo(_s));_s==null&&(_s=d$1());var Cs=d$1(),Ts=this.s,Bs=ca.s,Ps=this.DB-y$1(Ss[Ss.t-1]);Ps>0?(Ss.lShiftTo(Ps,Cs),Ms.lShiftTo(Ps,_s)):(Ss.copyTo(Cs),Ms.copyTo(_s));var Ls=Cs.t,Rs=Cs[Ls-1];if(Rs!=0){var Ds=Rs*(1<<this.F1)+(Ls>1?Cs[Ls-2]>>this.F2:0),$s=this.FV/Ds,Fs=(1<<this.F1)/Ds,Gs=1<<this.F2,Vs=_s.t,ks=Vs-Ls,Os=ga==null?d$1():ga;for(Cs.dlShiftTo(ks,Os),_s.compareTo(Os)>=0&&(_s[_s.t++]=1,_s.subTo(Os,_s)),c$2.ONE.dlShiftTo(Ls,Os),Os.subTo(Cs,Cs);Cs.t<Ls;)Cs[Cs.t++]=0;for(;--ks>=0;){var Ns=_s[--Vs]==Rs?this.DM:Math.floor(_s[Vs]*$s+(_s[Vs-1]+Gs)*Fs);if((_s[Vs]+=Cs.am(0,Ns,_s,ks,0,Ls))<Ns)for(Cs.dlShiftTo(ks,Os),_s.subTo(Os,_s);_s[Vs]<--Ns;)_s.subTo(Os,_s)}ga!=null&&(_s.drShiftTo(Ls,ga),Ts!=Bs&&c$2.ZERO.subTo(ga,ga)),_s.t=Ls,_s.clamp(),Ps>0&&_s.rShiftTo(Ps,_s),Ts<0&&c$2.ZERO.subTo(_s,_s)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var ca=this[0];if((1&ca)==0)return 0;var ga=3&ca;return(ga=(ga=(ga=(ga=ga*(2-(15&ca)*ga)&15)*(2-(255&ca)*ga)&255)*(2-((65535&ca)*ga&65535))&65535)*(2-ca*ga%this.DV)%this.DV)>0?this.DV-ga:-ga},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(ca,ga){if(ca>4294967295||ca<1)return c$2.ONE;var _s=d$1(),Ss=d$1(),Ms=ga.convert(this),Cs=y$1(ca)-1;for(Ms.copyTo(_s);--Cs>=0;)if(ga.sqrTo(_s,Ss),(ca&1<<Cs)>0)ga.mulTo(Ss,Ms,_s);else{var Ts=_s;_s=Ss,Ss=Ts}return ga.revert(_s)},c$2.prototype.toString=function(ca){if(this.s<0)return"-"+this.negate().toString(ca);var ga;if(ca==16)ga=4;else if(ca==8)ga=3;else if(ca==2)ga=1;else if(ca==32)ga=5;else{if(ca!=4)return this.toRadix(ca);ga=2}var _s,Ss=(1<<ga)-1,Ms=!1,Cs="",Ts=this.t,Bs=this.DB-Ts*this.DB%ga;if(Ts-- >0)for(Bs<this.DB&&(_s=this[Ts]>>Bs)>0&&(Ms=!0,Cs=g$2(_s));Ts>=0;)Bs<ga?(_s=(this[Ts]&(1<<Bs)-1)<<ga-Bs,_s|=this[--Ts]>>(Bs+=this.DB-ga)):(_s=this[Ts]>>(Bs-=ga)&Ss,Bs<=0&&(Bs+=this.DB,--Ts)),_s>0&&(Ms=!0),Ms&&(Cs+=g$2(_s));return Ms?Cs:"0"},c$2.prototype.negate=function(){var ca=d$1();return c$2.ZERO.subTo(this,ca),ca},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(ca){var ga=this.s-ca.s;if(ga!=0)return ga;var _s=this.t;if((ga=_s-ca.t)!=0)return this.s<0?-ga:ga;for(;--_s>=0;)if((ga=this[_s]-ca[_s])!=0)return ga;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$1(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(ca){var ga=d$1();return this.abs().divRemTo(ca,null,ga),this.s<0&&ga.compareTo(c$2.ZERO)>0&&ca.subTo(ga,ga),ga},c$2.prototype.modPowInt=function(ca,ga){var _s;return _s=ca<256||ga.isEven()?new b$1(ga):new w$1(ga),this.exp(ca,_s)},c$2.ZERO=m$2(0),c$2.ONE=m$2(1),M$1.prototype.convert=P$1,M$1.prototype.revert=P$1,M$1.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s)},M$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga)},T.prototype.convert=function(ca){if(ca.s<0||ca.t>2*this.m.t)return ca.mod(this.m);if(ca.compareTo(this.m)<0)return ca;var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},T.prototype.revert=function(ca){return ca},T.prototype.reduce=function(ca){for(ca.drShiftTo(this.m.t-1,this.r2),ca.t>this.m.t+1&&(ca.t=this.m.t+1,ca.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);ca.compareTo(this.r2)<0;)ca.dAddOffset(1,this.m.t+1);for(ca.subTo(this.r2,ca);ca.compareTo(this.m)>=0;)ca.subTo(this.m,ca)},T.prototype.mulTo=function(ca,ga,_s){ca.multiplyTo(ga,_s),this.reduce(_s)},T.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)};var Q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R$1=(1<<26)/Q[Q.length-1];c$2.prototype.chunkSize=function(ca){return Math.floor(Math.LN2*this.DB/Math.log(ca))},c$2.prototype.toRadix=function(ca){if(ca==null&&(ca=10),this.signum()==0||ca<2||ca>36)return"0";var ga=this.chunkSize(ca),_s=Math.pow(ca,ga),Ss=m$2(_s),Ms=d$1(),Cs=d$1(),Ts="";for(this.divRemTo(Ss,Ms,Cs);Ms.signum()>0;)Ts=(_s+Cs.intValue()).toString(ca).substr(1)+Ts,Ms.divRemTo(Ss,Ms,Cs);return Cs.intValue().toString(ca)+Ts},c$2.prototype.fromRadix=function(ca,ga){this.fromInt(0),ga==null&&(ga=10);for(var _s=this.chunkSize(ga),Ss=Math.pow(ga,_s),Ms=!1,Cs=0,Ts=0,Bs=0;Bs<ca.length;++Bs){var Ps=v$1(ca,Bs);Ps<0?ca.charAt(Bs)=="-"&&this.signum()==0&&(Ms=!0):(Ts=ga*Ts+Ps,++Cs>=_s&&(this.dMultiply(Ss),this.dAddOffset(Ts,0),Cs=0,Ts=0))}Cs>0&&(this.dMultiply(Math.pow(ga,Cs)),this.dAddOffset(Ts,0)),Ms&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(ca,ga,_s){if(typeof ga=="number")if(ca<2)this.fromInt(1);else for(this.fromNumber(ca,_s),this.testBit(ca-1)||this.bitwiseTo(c$2.ONE.shiftLeft(ca-1),E$1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ga);)this.dAddOffset(2,0),this.bitLength()>ca&&this.subTo(c$2.ONE.shiftLeft(ca-1),this);else{var Ss=new Array,Ms=7&ca;Ss.length=1+(ca>>3),ga.nextBytes(Ss),Ms>0?Ss[0]&=(1<<Ms)-1:Ss[0]=0,this.fromString(Ss,256)}},c$2.prototype.bitwiseTo=function(ca,ga,_s){var Ss,Ms,Cs=Math.min(ca.t,this.t);for(Ss=0;Ss<Cs;++Ss)_s[Ss]=ga(this[Ss],ca[Ss]);if(ca.t<this.t){for(Ms=ca.s&this.DM,Ss=Cs;Ss<this.t;++Ss)_s[Ss]=ga(this[Ss],Ms);_s.t=this.t}else{for(Ms=this.s&this.DM,Ss=Cs;Ss<ca.t;++Ss)_s[Ss]=ga(Ms,ca[Ss]);_s.t=ca.t}_s.s=ga(this.s,ca.s),_s.clamp()},c$2.prototype.changeBit=function(ca,ga){var _s=c$2.ONE.shiftLeft(ca);return this.bitwiseTo(_s,ga,_s),_s},c$2.prototype.addTo=function(ca,ga){for(var _s=0,Ss=0,Ms=Math.min(ca.t,this.t);_s<Ms;)Ss+=this[_s]+ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;if(ca.t<this.t){for(Ss+=ca.s;_s<this.t;)Ss+=this[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=this.s}else{for(Ss+=this.s;_s<ca.t;)Ss+=ca[_s],ga[_s++]=Ss&this.DM,Ss>>=this.DB;Ss+=ca.s}ga.s=Ss<0?-1:0,Ss>0?ga[_s++]=Ss:Ss<-1&&(ga[_s++]=this.DV+Ss),ga.t=_s,ga.clamp()},c$2.prototype.dMultiply=function(ca){this[this.t]=this.am(0,ca-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(ca,ga){if(ca!=0){for(;this.t<=ga;)this[this.t++]=0;for(this[ga]+=ca;this[ga]>=this.DV;)this[ga]-=this.DV,++ga>=this.t&&(this[this.t++]=0),++this[ga]}},c$2.prototype.multiplyLowerTo=function(ca,ga,_s){var Ss,Ms=Math.min(this.t+ca.t,ga);for(_s.s=0,_s.t=Ms;Ms>0;)_s[--Ms]=0;for(Ss=_s.t-this.t;Ms<Ss;++Ms)_s[Ms+this.t]=this.am(0,ca[Ms],_s,Ms,0,this.t);for(Ss=Math.min(ca.t,ga);Ms<Ss;++Ms)this.am(0,ca[Ms],_s,Ms,0,ga-Ms);_s.clamp()},c$2.prototype.multiplyUpperTo=function(ca,ga,_s){--ga;var Ss=_s.t=this.t+ca.t-ga;for(_s.s=0;--Ss>=0;)_s[Ss]=0;for(Ss=Math.max(ga-this.t,0);Ss<ca.t;++Ss)_s[this.t+Ss-ga]=this.am(ga-Ss,ca[Ss],_s,0,0,this.t+Ss-ga);_s.clamp(),_s.drShiftTo(1,_s)},c$2.prototype.modInt=function(ca){if(ca<=0)return 0;var ga=this.DV%ca,_s=this.s<0?ca-1:0;if(this.t>0)if(ga==0)_s=this[0]%ca;else for(var Ss=this.t-1;Ss>=0;--Ss)_s=(ga*_s+this[Ss])%ca;return _s},c$2.prototype.millerRabin=function(ca){var ga=this.subtract(c$2.ONE),_s=ga.getLowestSetBit();if(_s<=0)return!1;var Ss=ga.shiftRight(_s);(ca=ca+1>>1)>Q.length&&(ca=Q.length);for(var Ms=d$1(),Cs=0;Cs<ca;++Cs){Ms.fromInt(Q[Math.floor(Math.random()*Q.length)]);var Ts=Ms.modPow(Ss,this);if(Ts.compareTo(c$2.ONE)!=0&&Ts.compareTo(ga)!=0){for(var Bs=1;Bs++<_s&&Ts.compareTo(ga)!=0;)if((Ts=Ts.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Ts.compareTo(ga)!=0)return!1}}return!0},c$2.prototype.clone=function(){var ca=d$1();return this.copyTo(ca),ca},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var ca=this.t,ga=new Array;ga[0]=this.s;var _s,Ss=this.DB-ca*this.DB%8,Ms=0;if(ca-- >0)for(Ss<this.DB&&(_s=this[ca]>>Ss)!=(this.s&this.DM)>>Ss&&(ga[Ms++]=_s|this.s<<this.DB-Ss);ca>=0;)Ss<8?(_s=(this[ca]&(1<<Ss)-1)<<8-Ss,_s|=this[--ca]>>(Ss+=this.DB-8)):(_s=this[ca]>>(Ss-=8)&255,Ss<=0&&(Ss+=this.DB,--ca)),(128&_s)!=0&&(_s|=-256),Ms==0&&(128&this.s)!=(128&_s)&&++Ms,(Ms>0||_s!=this.s)&&(ga[Ms++]=_s);return ga},c$2.prototype.equals=function(ca){return this.compareTo(ca)==0},c$2.prototype.min=function(ca){return this.compareTo(ca)<0?this:ca},c$2.prototype.max=function(ca){return this.compareTo(ca)>0?this:ca},c$2.prototype.and=function(ca){var ga=d$1();return this.bitwiseTo(ca,x$1,ga),ga},c$2.prototype.or=function(ca){var ga=d$1();return this.bitwiseTo(ca,E$1,ga),ga},c$2.prototype.xor=function(ca){var ga=d$1();return this.bitwiseTo(ca,I,ga),ga},c$2.prototype.andNot=function(ca){var ga=d$1();return this.bitwiseTo(ca,C$1,ga),ga},c$2.prototype.not=function(){for(var ca=d$1(),ga=0;ga<this.t;++ga)ca[ga]=this.DM&~this[ga];return ca.t=this.t,ca.s=~this.s,ca},c$2.prototype.shiftLeft=function(ca){var ga=d$1();return ca<0?this.rShiftTo(-ca,ga):this.lShiftTo(ca,ga),ga},c$2.prototype.shiftRight=function(ca){var ga=d$1();return ca<0?this.lShiftTo(-ca,ga):this.rShiftTo(ca,ga),ga},c$2.prototype.getLowestSetBit=function(){for(var ca=0;ca<this.t;++ca)if(this[ca]!=0)return ca*this.DB+S$1(this[ca]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var ca=0,ga=this.s&this.DM,_s=0;_s<this.t;++_s)ca+=B(this[_s]^ga);return ca},c$2.prototype.testBit=function(ca){var ga=Math.floor(ca/this.DB);return ga>=this.t?this.s!=0:(this[ga]&1<<ca%this.DB)!=0},c$2.prototype.setBit=function(ca){return this.changeBit(ca,E$1)},c$2.prototype.clearBit=function(ca){return this.changeBit(ca,C$1)},c$2.prototype.flipBit=function(ca){return this.changeBit(ca,I)},c$2.prototype.add=function(ca){var ga=d$1();return this.addTo(ca,ga),ga},c$2.prototype.subtract=function(ca){var ga=d$1();return this.subTo(ca,ga),ga},c$2.prototype.multiply=function(ca){var ga=d$1();return this.multiplyTo(ca,ga),ga},c$2.prototype.divide=function(ca){var ga=d$1();return this.divRemTo(ca,ga,null),ga},c$2.prototype.remainder=function(ca){var ga=d$1();return this.divRemTo(ca,null,ga),ga},c$2.prototype.divideAndRemainder=function(ca){var ga=d$1(),_s=d$1();return this.divRemTo(ca,ga,_s),new Array(ga,_s)},c$2.prototype.modPow=function(ca,ga){var _s,Ss,Ms=ca.bitLength(),Cs=m$2(1);if(Ms<=0)return Cs;_s=Ms<18?1:Ms<48?3:Ms<144?4:Ms<768?5:6,Ss=Ms<8?new b$1(ga):ga.isEven()?new T(ga):new w$1(ga);var Ts=new Array,Bs=3,Ps=_s-1,Ls=(1<<_s)-1;if(Ts[1]=Ss.convert(this),_s>1){var Rs=d$1();for(Ss.sqrTo(Ts[1],Rs);Bs<=Ls;)Ts[Bs]=d$1(),Ss.mulTo(Rs,Ts[Bs-2],Ts[Bs]),Bs+=2}var Ds,$s,Fs=ca.t-1,Gs=!0,Vs=d$1();for(Ms=y$1(ca[Fs])-1;Fs>=0;){for(Ms>=Ps?Ds=ca[Fs]>>Ms-Ps&Ls:(Ds=(ca[Fs]&(1<<Ms+1)-1)<<Ps-Ms,Fs>0&&(Ds|=ca[Fs-1]>>this.DB+Ms-Ps)),Bs=_s;(1&Ds)==0;)Ds>>=1,--Bs;if((Ms-=Bs)<0&&(Ms+=this.DB,--Fs),Gs)Ts[Ds].copyTo(Cs),Gs=!1;else{for(;Bs>1;)Ss.sqrTo(Cs,Vs),Ss.sqrTo(Vs,Cs),Bs-=2;Bs>0?Ss.sqrTo(Cs,Vs):($s=Cs,Cs=Vs,Vs=$s),Ss.mulTo(Vs,Ts[Ds],Cs)}for(;Fs>=0&&(ca[Fs]&1<<Ms)==0;)Ss.sqrTo(Cs,Vs),$s=Cs,Cs=Vs,Vs=$s,--Ms<0&&(Ms=this.DB-1,--Fs)}return Ss.revert(Cs)},c$2.prototype.modInverse=function(ca){var ga=ca.isEven();if(this.isEven()&&ga||ca.signum()==0)return c$2.ZERO;for(var _s=ca.clone(),Ss=this.clone(),Ms=m$2(1),Cs=m$2(0),Ts=m$2(0),Bs=m$2(1);_s.signum()!=0;){for(;_s.isEven();)_s.rShiftTo(1,_s),ga?(Ms.isEven()&&Cs.isEven()||(Ms.addTo(this,Ms),Cs.subTo(ca,Cs)),Ms.rShiftTo(1,Ms)):Cs.isEven()||Cs.subTo(ca,Cs),Cs.rShiftTo(1,Cs);for(;Ss.isEven();)Ss.rShiftTo(1,Ss),ga?(Ts.isEven()&&Bs.isEven()||(Ts.addTo(this,Ts),Bs.subTo(ca,Bs)),Ts.rShiftTo(1,Ts)):Bs.isEven()||Bs.subTo(ca,Bs),Bs.rShiftTo(1,Bs);_s.compareTo(Ss)>=0?(_s.subTo(Ss,_s),ga&&Ms.subTo(Ts,Ms),Cs.subTo(Bs,Cs)):(Ss.subTo(_s,Ss),ga&&Ts.subTo(Ms,Ts),Bs.subTo(Cs,Bs))}return Ss.compareTo(c$2.ONE)!=0?c$2.ZERO:Bs.compareTo(ca)>=0?Bs.subtract(ca):Bs.signum()<0?(Bs.addTo(ca,Bs),Bs.signum()<0?Bs.add(ca):Bs):Bs},c$2.prototype.pow=function(ca){return this.exp(ca,new M$1)},c$2.prototype.gcd=function(ca){var ga=this.s<0?this.negate():this.clone(),_s=ca.s<0?ca.negate():ca.clone();if(ga.compareTo(_s)<0){var Ss=ga;ga=_s,_s=Ss}var Ms=ga.getLowestSetBit(),Cs=_s.getLowestSetBit();if(Cs<0)return ga;for(Ms<Cs&&(Cs=Ms),Cs>0&&(ga.rShiftTo(Cs,ga),_s.rShiftTo(Cs,_s));ga.signum()>0;)(Ms=ga.getLowestSetBit())>0&&ga.rShiftTo(Ms,ga),(Ms=_s.getLowestSetBit())>0&&_s.rShiftTo(Ms,_s),ga.compareTo(_s)>=0?(ga.subTo(_s,ga),ga.rShiftTo(1,ga)):(_s.subTo(ga,_s),_s.rShiftTo(1,_s));return Cs>0&&_s.lShiftTo(Cs,_s),_s},c$2.prototype.isProbablePrime=function(ca){var ga,_s=this.abs();if(_s.t==1&&_s[0]<=Q[Q.length-1]){for(ga=0;ga<Q.length;++ga)if(_s[0]==Q[ga])return!0;return!1}if(_s.isEven())return!1;for(ga=1;ga<Q.length;){for(var Ss=Q[ga],Ms=ga+1;Ms<Q.length&&Ss<R$1;)Ss*=Q[Ms++];for(Ss=_s.modInt(Ss);ga<Ms;)if(Ss%Q[ga++]==0)return!1}return _s.millerRabin(ca)},c$2.prototype.square=function(){var ca=d$1();return this.squareTo(ca),ca};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function k$1(ca){var ga,_s,Ss="";for(ga=0;ga+3<=ca.length;ga+=3)_s=parseInt(ca.substring(ga,ga+3),16),Ss+=D.charAt(_s>>6)+D.charAt(63&_s);for(ga+1==ca.length?(_s=parseInt(ca.substring(ga,ga+1),16),Ss+=D.charAt(_s<<2)):ga+2==ca.length&&(_s=parseInt(ca.substring(ga,ga+2),16),Ss+=D.charAt(_s>>2)+D.charAt((3&_s)<<4));(3&Ss.length)>0;)Ss+="=";return Ss}function F$1(ca){var ga,_s,Ss,Ms="",Cs=0;for(ga=0;ga<ca.length&&ca.charAt(ga)!="=";++ga)(Ss=D.indexOf(ca.charAt(ga)))<0||(Cs==0?(Ms+=g$2(Ss>>2),_s=3&Ss,Cs=1):Cs==1?(Ms+=g$2(_s<<2|Ss>>4),_s=15&Ss,Cs=2):Cs==2?(Ms+=g$2(_s),Ms+=g$2(Ss>>2),_s=3&Ss,Cs=3):(Ms+=g$2(_s<<2|Ss>>4),Ms+=g$2(15&Ss),Cs=0));return Cs==1&&(Ms+=g$2(_s<<2)),Ms}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$1(){this.i=0,this.j=0,this.S=new Array}N$1.prototype.init=function(ca){var ga,_s,Ss;for(ga=0;ga<256;++ga)this.S[ga]=ga;for(_s=0,ga=0;ga<256;++ga)_s=_s+this.S[ga]+ca[ga%ca.length]&255,Ss=this.S[ga],this.S[ga]=this.S[_s],this.S[_s]=Ss;this.i=0,this.j=0},N$1.prototype.next=function(){var ca;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,ca=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=ca,this.S[ca+this.S[this.i]&255]};var O$1,L$1,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function H(){var ca;ca=new Date().getTime(),L$1[V$1++]^=255&ca,L$1[V$1++]^=ca>>8&255,L$1[V$1++]^=ca>>16&255,L$1[V$1++]^=ca>>24&255,V$1>=256&&(V$1-=256)}if(L$1==null){var K;if(L$1=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var z=window.crypto||window.msCrypto;if(z.getRandomValues){var q$1=new Uint8Array(32);for(z.getRandomValues(q$1),K=0;K<32;++K)L$1[V$1++]=q$1[K]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var _$1=window.crypto.random(32);for(K=0;K<_$1.length;++K)L$1[V$1++]=255&_$1.charCodeAt(K)}}for(;V$1<256;)K=Math.floor(65536*Math.random()),L$1[V$1++]=K>>>8,L$1[V$1++]=255&K;V$1=0,H()}function j$1(){if(O$1==null){for(H(),(O$1=new N$1).init(L$1),V$1=0;V$1<L$1.length;++V$1)L$1[V$1]=0;V$1=0}return O$1.next()}function U(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G(ca,ga){return new c$2(ca,ga)}function W$1(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=_s(String.fromCharCode.apply(String,ca.concat([(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms]))),Ms+=1;return Ss}function X(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=_s(ca+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])),Ms+=1;return Ss}function Z(ca){for(var ga="",_s=0;_s<ca.length;_s++){var Ss=ca[_s].toString(16);Ss.length==1&&(Ss="0"+Ss),ga+=Ss}return ga}function J(ca){return Z(function(ga){for(var _s=new Array,Ss=0;Ss<ga.length;Ss++)_s[Ss]=ga.charCodeAt(Ss);return _s}(ca))}function $(ca){return ca.length%4==2?ca+="==":ca.length%4==3&&(ca+="="),ca=(ca=ca.replace(/-/g,"+")).replace(/_/g,"/")}function tt(ca){return ca.length%2==1&&(ca="0"+ca),function(ga){return(ga=(ga=ga.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$1(ca))}function et(ca){return F$1($(ca))}function it(ca){return function(ga){return ga.replace(/%/g,"")}(function(ga){for(var _s=encodeURIComponent(ga),Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]=="%"?(Ss+=_s.substr(Ms,3),Ms+=2):Ss=Ss+"%"+J(_s[Ms]);return Ss}(ca))}function nt(ca){return decodeURIComponent(function(ga){return ga.replace(/(..)/g,"%$1")}(ca))}function rt(ca){for(var ga="",_s=0;_s<ca.length-1;_s+=2)ga+=String.fromCharCode(parseInt(ca.substr(_s,2),16));return ga}function ot(ca){for(var ga="",_s=0;_s<ca.length;_s++)ga+=("0"+ca.charCodeAt(_s).toString(16)).slice(-2);return ga}function st(ca){var ga=function(_s){return k$1(_s)}(ca).replace(/(.{64})/g,`$1\r
`);return ga=ga.replace(/\r\n$/,"")}function at(ca,ga){return"-----BEGIN "+ga+`-----\r
`+st(ca)+`\r
-----END `+ga+`-----\r
`}function ut(ca,ga){if(ca.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+ga;return function(_s){return F$1(_s.replace(/[^0-9A-Za-z\/+=]*/g,""))}(ca=ga!==void 0?(ca=ca.replace(new RegExp("^[^]*-----BEGIN "+ga+"-----"),"")).replace(new RegExp("-----END "+ga+"-----[^]*$"),""):(ca=ca.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function lt(ca){var ga="malformed hex value";if(!ca.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw ga;if(ca.length!=8)return ca.length==32?function(_s){if(!_s.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Ss=(_s=_s.toLowerCase()).match(/.{1,4}/g),Ms=0;Ms<8;Ms++)Ss[Ms]=Ss[Ms].replace(/^0+/,""),Ss[Ms]==""&&(Ss[Ms]="0");var Cs=(_s=":"+Ss.join(":")+":").match(/:(0:){2,}/g);if(Cs===null)return _s.slice(1,-1);var Ts="";for(Ms=0;Ms<Cs.length;Ms++)Cs[Ms].length>Ts.length&&(Ts=Cs[Ms]);return(_s=_s.replace(Ts,"::")).slice(1,-1)}(ca):ca;try{return parseInt(ca.substr(0,2),16)+"."+parseInt(ca.substr(2,2),16)+"."+parseInt(ca.substr(4,2),16)+"."+parseInt(ca.substr(6,2),16)}catch{throw ga}}function ht(ca){return ca.match(/.{4}/g).map(function(ga){var _s=parseInt(ga.substr(0,2),16),Ss=parseInt(ga.substr(2),16);if(_s==0&Ss<128)return String.fromCharCode(Ss);if(_s<8){var Ms=128|63&Ss;return nt((192|(7&_s)<<3|(192&Ss)>>6).toString(16)+Ms.toString(16))}Ms=128|(15&_s)<<2|(192&Ss)>>6;var Cs=128|63&Ss;return nt((224|(240&_s)>>4).toString(16)+Ms.toString(16)+Cs.toString(16))}).join("")}function ct(ca){return!(ca.length%2!=0||!ca.match(/^[0-9a-f]+$/)&&!ca.match(/^[0-9A-F]+$/))}function dt(ca){return ca.length%2==1?"0"+ca:ca.substr(0,1)>"7"?"00"+ca:ca}U.prototype.nextBytes=function(ca){var ga;for(ga=0;ga<ca.length;++ga)ca[ga]=j$1()},X.prototype.doPublic=function(ca){return ca.modPowInt(this.e,this.n)},X.prototype.setPublic=function(ca,ga){if(this.isPublic=!0,this.isPrivate=!1,typeof ca!="string")this.n=ca,this.e=ga;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA public key";this.n=G(ca,16),this.e=parseInt(ga,16)}},X.prototype.encrypt=function(ca){var ga=function(Ms,Cs){if(Cs<Ms.length+11)throw"Message too long for RSA";for(var Ts=new Array,Bs=Ms.length-1;Bs>=0&&Cs>0;){var Ps=Ms.charCodeAt(Bs--);Ps<128?Ts[--Cs]=Ps:Ps>127&&Ps<2048?(Ts[--Cs]=63&Ps|128,Ts[--Cs]=Ps>>6|192):(Ts[--Cs]=63&Ps|128,Ts[--Cs]=Ps>>6&63|128,Ts[--Cs]=Ps>>12|224)}Ts[--Cs]=0;for(var Ls=new U,Rs=new Array;Cs>2;){for(Rs[0]=0;Rs[0]==0;)Ls.nextBytes(Rs);Ts[--Cs]=Rs[0]}return Ts[--Cs]=2,Ts[--Cs]=0,new c$2(Ts)}(ca,this.n.bitLength()+7>>3);if(ga==null)return null;var _s=this.doPublic(ga);if(_s==null)return null;var Ss=_s.toString(16);return(1&Ss.length)==0?Ss:"0"+Ss},X.prototype.encryptOAEP=function(ca,ga,_s){var Ss=function(Ts,Bs,Ps,Ls){var Rs=u$2.crypto.MessageDigest,Ds=u$2.crypto.Util,$s=null;if(Ps||(Ps="sha1"),typeof Ps=="string"&&($s=Rs.getCanonicalAlgName(Ps),Ls=Rs.getHashLength($s),Ps=function(zs){return rt(Ds.hashHex(ot(zs),$s))}),Ts.length+2*Ls+2>Bs)throw"Message too long for RSA";var Fs,Gs="";for(Fs=0;Fs<Bs-Ts.length-2*Ls-2;Fs+=1)Gs+="\0";var Vs=Ps("")+Gs+""+Ts,ks=new Array(Ls);new U().nextBytes(ks);var Os=W$1(ks,Vs.length,Ps),Ns=[];for(Fs=0;Fs<Vs.length;Fs+=1)Ns[Fs]=Vs.charCodeAt(Fs)^Os.charCodeAt(Fs);var Us=W$1(Ns,ks.length,Ps),Hs=[0];for(Fs=0;Fs<ks.length;Fs+=1)Hs[Fs+1]=ks[Fs]^Us.charCodeAt(Fs);return new c$2(Hs.concat(Ns))}(ca,this.n.bitLength()+7>>3,ga,_s);if(Ss==null)return null;var Ms=this.doPublic(Ss);if(Ms==null)return null;var Cs=Ms.toString(16);return(1&Cs.length)==0?Cs:"0"+Cs},X.prototype.type="RSA",X.prototype.doPrivate=function(ca){if(this.p==null||this.q==null)return ca.modPow(this.d,this.n);for(var ga=ca.mod(this.p).modPow(this.dmp1,this.p),_s=ca.mod(this.q).modPow(this.dmq1,this.q);ga.compareTo(_s)<0;)ga=ga.add(this.p);return ga.subtract(_s).multiply(this.coeff).mod(this.p).multiply(this.q).add(_s)},X.prototype.setPrivate=function(ca,ga,_s){if(this.isPrivate=!0,typeof ca!="string")this.n=ca,this.e=ga,this.d=_s;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(_s,16)}},X.prototype.setPrivateEx=function(ca,ga,_s,Ss,Ms,Cs,Ts,Bs){if(this.isPrivate=!0,this.isPublic=!1,ca==null)throw"RSASetPrivateEx N == null";if(ga==null)throw"RSASetPrivateEx E == null";if(ca.length==0)throw"RSASetPrivateEx N.length == 0";if(ga.length==0)throw"RSASetPrivateEx E.length == 0";if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(_s,16),this.p=G(Ss,16),this.q=G(Ms,16),this.dmp1=G(Cs,16),this.dmq1=G(Ts,16),this.coeff=G(Bs,16)},X.prototype.generate=function(ca,ga){var _s=new U,Ss=ca>>1;this.e=parseInt(ga,16);for(var Ms=new c$2(ga,16);;){for(;this.p=new c$2(ca-Ss,1,_s),this.p.subtract(c$2.ONE).gcd(Ms).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Ss,1,_s),this.q.subtract(c$2.ONE).gcd(Ms).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Cs=this.p;this.p=this.q,this.q=Cs}var Ts=this.p.subtract(c$2.ONE),Bs=this.q.subtract(c$2.ONE),Ps=Ts.multiply(Bs);if(Ps.gcd(Ms).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==ca)){this.d=Ms.modInverse(Ps),this.dmp1=this.d.mod(Ts),this.dmq1=this.d.mod(Bs),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X.prototype.decrypt=function(ca){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var ga=G(ca,16),_s=this.doPrivate(ga);return _s==null?null:function(Ss,Ms){for(var Cs=Ss.toByteArray(),Ts=0;Ts<Cs.length&&Cs[Ts]==0;)++Ts;if(Cs.length-Ts!=Ms-1||Cs[Ts]!=2)return null;for(++Ts;Cs[Ts]!=0;)if(++Ts>=Cs.length)return null;for(var Bs="";++Ts<Cs.length;){var Ps=255&Cs[Ts];Ps<128?Bs+=String.fromCharCode(Ps):Ps>191&&Ps<224?(Bs+=String.fromCharCode((31&Ps)<<6|63&Cs[Ts+1]),++Ts):(Bs+=String.fromCharCode((15&Ps)<<12|(63&Cs[Ts+1])<<6|63&Cs[Ts+2]),Ts+=2)}return Bs}(_s,this.n.bitLength()+7>>3)},X.prototype.decryptOAEP=function(ca,ga,_s){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Ss=G(ca,16),Ms=this.doPrivate(Ss);return Ms==null?null:function(Cs,Ts,Bs,Ps){var Ls=u$2.crypto.MessageDigest,Rs=u$2.crypto.Util,Ds=null;for(Bs||(Bs="sha1"),typeof Bs=="string"&&(Ds=Ls.getCanonicalAlgName(Bs),Ps=Ls.getHashLength(Ds),Bs=function(Hs){return rt(Rs.hashHex(ot(Hs),Ds))}),Cs=Cs.toByteArray(),$s=0;$s<Cs.length;$s+=1)Cs[$s]&=255;for(;Cs.length<Ts;)Cs.unshift(0);if((Cs=String.fromCharCode.apply(String,Cs)).length<2*Ps+2)throw"Cipher too short";var $s,Fs=Cs.substr(1,Ps),Gs=Cs.substr(Ps+1),Vs=Y(Gs,Ps,Bs),ks=[];for($s=0;$s<Fs.length;$s+=1)ks[$s]=Fs.charCodeAt($s)^Vs.charCodeAt($s);var Os=Y(String.fromCharCode.apply(String,ks),Cs.length-Ps,Bs),Ns=[];for($s=0;$s<Gs.length;$s+=1)Ns[$s]=Gs.charCodeAt($s)^Os.charCodeAt($s);if((Ns=String.fromCharCode.apply(String,Ns)).substr(0,Ps)!==Bs(""))throw"Hash mismatch";var Us=(Ns=Ns.substr(Ps)).indexOf("");if((Us!=-1?Ns.substr(0,Us).lastIndexOf("\0"):-1)+1!=Us)throw"Malformed data";return Ns.substr(Us+1)}(Ms,this.n.bitLength()+7>>3,ga,_s)},u$2.lang!==void 0&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(ca){return!!ca.match(/^[0-9]+$/)||!!ca.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(ca){return ct(ca)},u$2.lang.String.isBase64=function(ca){return!(!(ca=ca.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||ca.length%4!=0)},u$2.lang.String.isBase64URL=function(ca){return!ca.match(/[+/=]/)&&(ca=$(ca),u$2.lang.String.isBase64(ca))},u$2.lang.String.isIntegerArray=function(ca){return!!(ca=ca.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(ca){return ca.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$2.lang.String.isIA5=function(ca){return ca.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$2.lang.String.isMail=function(ca){return ca.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pt=function(ca,ga,_s){return _s==null&&(_s="0"),ca.length>=ga?ca:new Array(ga-ca.length+1).join(_s)+ca};function At(ca,ga){var _s=function(){};_s.prototype=ga.prototype,ca.prototype=new _s,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga)}u$2.crypto!==void 0&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(ca,ga){if(this.DIGESTINFOHEAD[ga]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+ga;return this.DIGESTINFOHEAD[ga]+ca},this.getPaddedDigestInfoHex=function(ca,ga,_s){var Ss=this.getDigestInfoHex(ca,ga),Ms=_s/4;if(Ss.length+22>Ms)throw"key is too short for SigAlg: keylen="+_s+","+ga;for(var Cs="0001",Ts="00"+Ss,Bs="",Ps=Ms-Cs.length-Ts.length,Ls=0;Ls<Ps;Ls+=2)Bs+="ff";return Cs+Bs+Ts},this.hashString=function(ca,ga){return new u$2.crypto.MessageDigest({alg:ga}).digestString(ca)},this.hashHex=function(ca,ga){return new u$2.crypto.MessageDigest({alg:ga}).digestHex(ca)},this.sha1=function(ca){return this.hashString(ca,"sha1")},this.sha256=function(ca){return this.hashString(ca,"sha256")},this.sha256Hex=function(ca){return this.hashHex(ca,"sha256")},this.sha512=function(ca){return this.hashString(ca,"sha512")},this.sha512Hex=function(ca){return this.hashHex(ca,"sha512")},this.isKey=function(ca){return ca instanceof X||ca instanceof u$2.crypto.DSA||ca instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(ca){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(ca)},u$2.crypto.Util.ripemd160=function(ca){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(ca)},u$2.crypto.Util.SECURERANDOMGEN=new U,u$2.crypto.Util.getRandomHexOfNbytes=function(ca){var ga=new Array(ca);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(ga),Z(ga)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(ca){return new c$2(u$2.crypto.Util.getRandomHexOfNbytes(ca),16)},u$2.crypto.Util.getRandomHexOfNbits=function(ca){var ga=ca%8,_s=new Array((ca-ga)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(_s),_s[0]=(255<<ga&255^255)&_s[0],Z(_s)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(ca){return new c$2(u$2.crypto.Util.getRandomHexOfNbits(ca),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(ca){for(var ga=ca.bitLength();;){var _s=u$2.crypto.Util.getRandomBigIntegerOfNbits(ga);if(ca.compareTo(_s)!=-1)return _s}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(ca,ga){var _s=ca.compareTo(ga);if(_s==1)throw"biMin is greater than biMax";if(_s==0)return ca;var Ss=ga.subtract(ca);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(Ss).add(ca)},u$2.crypto.MessageDigest=function(ca){this.setAlgAndProvider=function(ga,_s){if((ga=u$2.crypto.MessageDigest.getCanonicalAlgName(ga))!==null&&_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[ga]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(ga)!=-1&&_s=="cryptojs"){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[ga].create()}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=h$2.enc.Hex.parse(Ss);this.md.update(Ms)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}if(":sha256:".indexOf(ga)!=-1&&_s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Ss){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+Ss}this.updateString=function(Ss){this.md.update(Ss)},this.updateHex=function(Ss){var Ms=sjcl.codec.hex.toBits(Ss);this.md.update(Ms)},this.digest=function(){var Ss=this.md.finalize();return sjcl.codec.hex.fromBits(Ss)},this.digestString=function(Ss){return this.updateString(Ss),this.digest()},this.digestHex=function(Ss){return this.updateHex(Ss),this.digest()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},ca!==void 0&&ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(ca){return typeof ca=="string"&&(ca=(ca=ca.toLowerCase()).replace(/-/,"")),ca},u$2.crypto.MessageDigest.getHashLength=function(ca){var ga=u$2.crypto.MessageDigest,_s=ga.getCanonicalAlgName(ca);if(ga.HASHLENGTH[_s]===void 0)throw"not supported algorithm: "+ca;return ga.HASHLENGTH[_s]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(ca){this.setAlgAndProvider=function(ga,_s){if((ga=ga.toLowerCase())==null&&(ga="hmacsha1"),(ga=ga.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+ga;_s===void 0&&(_s=u$2.crypto.Util.DEFAULTPROVIDER[ga]),this.algProv=ga+"/"+_s;var Ss=ga.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Ss)!=-1&&_s=="cryptojs"){try{var Ms=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Ss];this.mac=h$2.algo.HMAC.create(Ms,this.pass)}catch(Cs){throw"setAlgAndProvider hash alg set fail hashAlg="+Ss+"/"+Cs}this.updateString=function(Cs){this.mac.update(Cs)},this.updateHex=function(Cs){var Ts=h$2.enc.Hex.parse(Cs);this.mac.update(Ts)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Cs){return this.updateString(Cs),this.doFinal()},this.doFinalHex=function(Cs){return this.updateHex(Cs),this.doFinal()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(ga){if(typeof ga=="string"){var _s=ga;return ga.length%2!=1&&ga.match(/^[0-9A-Fa-f]+$/)||(_s=ot(ga)),void(this.pass=h$2.enc.Hex.parse(_s))}if(typeof ga!="object")throw"KJUR.crypto.Mac unsupported password type: "+ga;if(_s=null,ga.hex!==void 0){if(ga.hex.length%2!=0||!ga.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+ga.hex;_s=ga.hex}if(ga.utf8!==void 0&&(_s=it(ga.utf8)),ga.rstr!==void 0&&(_s=ot(ga.rstr)),ga.b64!==void 0&&(_s=F$1(ga.b64)),ga.b64u!==void 0&&(_s=et(ga.b64u)),_s==null)throw"KJUR.crypto.Mac unsupported password type: "+ga;this.pass=h$2.enc.Hex.parse(_s)},ca!==void 0&&(ca.pass!==void 0&&this.setPassword(ca.pass),ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(ca){var ga=null;if(this._setAlgNames=function(){var _s=this.algName.match(/^(.+)with(.+)$/);_s&&(this.mdAlgName=_s[1].toLowerCase(),this.pubkeyAlgName=_s[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(_s,Ss){for(var Ms="",Cs=Ss/4-_s.length,Ts=0;Ts<Cs;Ts++)Ms+="0";return Ms+_s},this.setAlgAndProvider=function(_s,Ss){if(this._setAlgNames(),Ss!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ss);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(Ms){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Ms)}this.init=function(Ms,Cs){var Ts=null;try{Ts=Cs===void 0?Et.getKey(Ms):Et.getKey(Ms,Cs)}catch(Bs){throw"init failed:"+Bs}if(Ts.isPrivate===!0)this.prvKey=Ts,this.state="SIGN";else{if(Ts.isPublic!==!0)throw"init failed.:"+Ts;this.pubKey=Ts,this.state="VERIFY"}},this.updateString=function(Ms){this.md.updateString(Ms)},this.updateHex=function(Ms){this.md.updateHex(Ms)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Ms){return this.updateString(Ms),this.sign()},this.signHex=function(Ms){return this.updateHex(Ms),this.sign()},this.verify=function(Ms){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Ms,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.ECDSA!==void 0&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);if(u$2.crypto.DSA!==void 0&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Ms);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(_s,Ss){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(_s){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(_s){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(_s){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(_s){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(_s){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=ca,ca!==void 0&&(ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=ca.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),ca.psssaltlen!==void 0&&(this.pssSaltLen=ca.psssaltlen),ca.prvkeypem!==void 0)){if(ca.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{ga=Et.getKey(ca.prvkeypem),this.init(ga)}catch(_s){throw"fatal error to load pem private key: "+_s}}},u$2.crypto.Cipher=function(ca){},u$2.crypto.Cipher.encrypt=function(ca,ga,_s){if(ga instanceof X&&ga.isPublic){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(ga,_s);if(Ss==="RSA")return ga.encrypt(ca);if(Ss==="RSAOAEP")return ga.encryptOAEP(ca,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return ga.encryptOAEP(ca,"sha"+Ms[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(ca,ga,_s){if(ga instanceof X&&ga.isPrivate){var Ss=u$2.crypto.Cipher.getAlgByKeyAndName(ga,_s);if(Ss==="RSA")return ga.decrypt(ca);if(Ss==="RSAOAEP")return ga.decryptOAEP(ca,"sha1");var Ms=Ss.match(/^RSAOAEP(\d+)$/);if(Ms!==null)return ga.decryptOAEP(ca,"sha"+Ms[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+_s}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(ca,ga){if(ca instanceof X){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(ga)!=-1)return ga;if(ga==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+ga}throw"getAlgByKeyAndName: not supported algorithm name: "+ga},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var ft,gt,vt,mt,yt,bt,wt,xt,Et=(ft=function(ca,ga,_s){return gt(h$2.AES,ca,ga,_s)},gt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Hex.parse(ga),Cs=h$2.enc.Hex.parse(_s),Ts=h$2.enc.Hex.parse(Ss),Bs={};Bs.key=Cs,Bs.iv=Ts,Bs.ciphertext=Ms;var Ps=ca.decrypt(Bs,Cs,{iv:Ts});return h$2.enc.Hex.stringify(Ps)},vt=function(ca,ga,_s){return mt(h$2.AES,ca,ga,_s)},mt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Hex.parse(ga),Cs=h$2.enc.Hex.parse(_s),Ts=h$2.enc.Hex.parse(Ss),Bs=ca.encrypt(Ms,Cs,{iv:Ts}),Ps=h$2.enc.Hex.parse(Bs.toString());return h$2.enc.Base64.stringify(Ps)},yt={"AES-256-CBC":{proc:ft,eproc:vt,keylen:32,ivlen:16},"AES-192-CBC":{proc:ft,eproc:vt,keylen:24,ivlen:16},"AES-128-CBC":{proc:ft,eproc:vt,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ca,ga,_s){return gt(h$2.TripleDES,ca,ga,_s)},eproc:function(ca,ga,_s){return mt(h$2.TripleDES,ca,ga,_s)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ca,ga,_s){return gt(h$2.DES,ca,ga,_s)},eproc:function(ca,ga,_s){return mt(h$2.DES,ca,ga,_s)},keylen:8,ivlen:8}},bt=function(ca){var ga={},_s=ca.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));_s&&(ga.cipher=_s[1],ga.ivsalt=_s[2]);var Ss=ca.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ss&&(ga.type=Ss[1]);var Ms=-1,Cs=0;ca.indexOf(`\r
\r
`)!=-1&&(Ms=ca.indexOf(`\r
\r
`),Cs=2),ca.indexOf(`

`)!=-1&&(Ms=ca.indexOf(`

`),Cs=1);var Ts=ca.indexOf("-----END");if(Ms!=-1&&Ts!=-1){var Bs=ca.substring(Ms+2*Cs,Ts-Cs);Bs=Bs.replace(/\s+/g,""),ga.data=Bs}return ga},wt=function(ca,ga,_s){for(var Ss=_s.substring(0,16),Ms=h$2.enc.Hex.parse(Ss),Cs=h$2.enc.Utf8.parse(ga),Ts=yt[ca].keylen+yt[ca].ivlen,Bs="",Ps=null;;){var Ls=h$2.algo.MD5.create();if(Ps!=null&&Ls.update(Ps),Ls.update(Cs),Ls.update(Ms),Ps=Ls.finalize(),(Bs+=h$2.enc.Hex.stringify(Ps)).length>=2*Ts)break}var Rs={};return Rs.keyhex=Bs.substr(0,2*yt[ca].keylen),Rs.ivhex=Bs.substr(2*yt[ca].keylen,2*yt[ca].ivlen),Rs},xt=function(ca,ga,_s,Ss){var Ms=h$2.enc.Base64.parse(ca),Cs=h$2.enc.Hex.stringify(Ms);return(0,yt[ga].proc)(Cs,_s,Ss)},{version:"1.0.0",parsePKCS5PEM:function(ca){return bt(ca)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ca,ga,_s){return wt(ca,ga,_s)},decryptKeyB64:function(ca,ga,_s,Ss){return xt(ca,ga,_s,Ss)},getDecryptedKeyHex:function(ca,ga){var _s=bt(ca);_s.type;var Ss=_s.cipher,Ms=_s.ivsalt,Cs=_s.data,Ts=wt(Ss,ga,Ms).keyhex;return xt(Cs,Ss,Ts,Ms)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ca,ga,_s,Ss,Ms){var Cs="";if(Ss!==void 0&&Ss!=null||(Ss="AES-256-CBC"),yt[Ss]===void 0)throw"KEYUTIL unsupported algorithm: "+Ss;Ms!==void 0&&Ms!=null||(Ms=function(Bs){var Ps=h$2.lib.WordArray.random(Bs);return h$2.enc.Hex.stringify(Ps)}(yt[Ss].ivlen).toUpperCase());var Ts=function(Bs,Ps,Ls,Rs){return(0,yt[Ps].eproc)(Bs,Ls,Rs)}(ga,Ss,wt(Ss,_s,Ms).keyhex,Ms);return Cs="-----BEGIN "+ca+` PRIVATE KEY-----\r
`,Cs+=`Proc-Type: 4,ENCRYPTED\r
`,Cs+="DEK-Info: "+Ss+","+Ms+`\r
`,Cs+=`\r
`,Cs+=Ts.replace(/(.{64})/g,`$1\r
`),Cs+=`\r
-----END `+ca+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={},Cs=_s(ca,0);if(Cs.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Cs.length;Ms.ciphertext=Ss(ca,Cs[1]);var Ts=_s(ca,Cs[0]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Ts.length;if(Ss(ca,Ts[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Bs=_s(ca,Ts[1]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Bs.length;var Ps=_s(ca,Bs[1]);if(Ps.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ps.length;if(Ss(ca,Ps[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ms.encryptionSchemeAlg="TripleDES",Ms.encryptionSchemeIV=Ss(ca,Ps[1]);var Ls=_s(ca,Bs[0]);if(Ls.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ls.length;if(Ss(ca,Ls[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Rs=_s(ca,Ls[1]);if(Rs.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Rs.length;Ms.pbkdf2Salt=Ss(ca,Rs[0]);var Ds=Ss(ca,Rs[1]);try{Ms.pbkdf2Iter=parseInt(Ds,16)}catch{throw"malformed format pbkdf2Iter: "+Ds}return Ms},getPBKDF2KeyHexFromParam:function(ca,ga){var _s=h$2.enc.Hex.parse(ca.pbkdf2Salt),Ss=ca.pbkdf2Iter,Ms=h$2.PBKDF2(ga,_s,{keySize:6,iterations:Ss});return h$2.enc.Hex.stringify(Ms)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ca,ga){var _s=ut(ca,"ENCRYPTED PRIVATE KEY"),Ss=this.parseHexOfEncryptedPKCS8(_s),Ms=Et.getPBKDF2KeyHexFromParam(Ss,ga),Cs={};Cs.ciphertext=h$2.enc.Hex.parse(Ss.ciphertext);var Ts=h$2.enc.Hex.parse(Ms),Bs=h$2.enc.Hex.parse(Ss.encryptionSchemeIV),Ps=h$2.TripleDES.decrypt(Cs,Ts,{iv:Bs});return h$2.enc.Hex.stringify(Ps)},getKeyFromEncryptedPKCS8PEM:function(ca,ga){var _s=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ca,ga);return this.getKeyFromPlainPrivatePKCS8Hex(_s)},parsePlainPrivatePKCS8Hex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={algparam:null};if(ca.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Cs=_s(ca,0);if(Cs.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ca.substr(Cs[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ts=_s(ca,Cs[1]);if(Ts.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ca.substr(Ts[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ms.algoid=Ss(ca,Ts[0]),ca.substr(Ts[1],2)=="06"&&(Ms.algparam=Ss(ca,Ts[1])),ca.substr(Cs[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ms.keyidx=ga.getVidx(ca,Cs[2]),Ms},getKeyFromPlainPrivatePKCS8PEM:function(ca){var ga=ut(ca,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ga)},getKeyFromPlainPrivatePKCS8Hex:function(ca){var ga,_s=this.parsePlainPrivatePKCS8Hex(ca);if(_s.algoid=="2a864886f70d010101")ga=new X;else if(_s.algoid=="2a8648ce380401")ga=new u$2.crypto.DSA;else{if(_s.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";ga=new u$2.crypto.ECDSA}return ga.readPKCS8PrvKeyHex(ca),ga},_getKeyFromPublicPKCS8Hex:function(ca){var ga,_s=It.getVbyList(ca,0,[0,0],"06");if(_s==="2a864886f70d010101")ga=new X;else if(_s==="2a8648ce380401")ga=new u$2.crypto.DSA;else{if(_s!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";ga=new u$2.crypto.ECDSA}return ga.readPKCS8PubKeyHex(ca),ga},parsePublicRawRSAKeyHex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={};if(ca.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Cs=_s(ca,0);if(Cs.length!=2)throw"malformed RSA key(code:002)";if(ca.substr(Cs[0],2)!="02")throw"malformed RSA key(code:003)";if(Ms.n=Ss(ca,Cs[0]),ca.substr(Cs[1],2)!="02")throw"malformed RSA key(code:004)";return Ms.e=Ss(ca,Cs[1]),Ms},parsePublicPKCS8Hex:function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getV,Ms={algparam:null},Cs=_s(ca,0);if(Cs.length!=2)throw"outer DERSequence shall have 2 elements: "+Cs.length;var Ts=Cs[0];if(ca.substr(Ts,2)!="30")throw"malformed PKCS8 public key(code:001)";var Bs=_s(ca,Ts);if(Bs.length!=2)throw"malformed PKCS8 public key(code:002)";if(ca.substr(Bs[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Ms.algoid=Ss(ca,Bs[0]),ca.substr(Bs[1],2)=="06"?Ms.algparam=Ss(ca,Bs[1]):ca.substr(Bs[1],2)=="30"&&(Ms.algparam={},Ms.algparam.p=ga.getVbyList(ca,Bs[1],[0],"02"),Ms.algparam.q=ga.getVbyList(ca,Bs[1],[1],"02"),Ms.algparam.g=ga.getVbyList(ca,Bs[1],[2],"02")),ca.substr(Cs[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Ms.key=Ss(ca,Cs[1]).substr(2),Ms}});Et.getKey=function(ca,ga,_s){var Ss=(ks=It).getChildIdx;ks.getV;var Ms=ks.getVbyList,Cs=u$2.crypto,Ts=Cs.ECDSA,Bs=Cs.DSA,Ps=X,Ls=ut,Rs=Et;if(Ps!==void 0&&ca instanceof Ps||Ts!==void 0&&ca instanceof Ts||Bs!==void 0&&ca instanceof Bs)return ca;if(ca.curve!==void 0&&ca.xy!==void 0&&ca.d===void 0)return new Ts({pub:ca.xy,curve:ca.curve});if(ca.curve!==void 0&&ca.d!==void 0)return new Ts({prv:ca.d,curve:ca.curve});if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(Ys=new Ps).setPublic(ca.n,ca.e),Ys;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.co!==void 0&&ca.qi===void 0)return(Ys=new Ps).setPrivateEx(ca.n,ca.e,ca.d,ca.p,ca.q,ca.dp,ca.dq,ca.co),Ys;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p===void 0)return(Ys=new Ps).setPrivate(ca.n,ca.e,ca.d),Ys;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x===void 0)return(Ys=new Bs).setPublic(ca.p,ca.q,ca.g,ca.y),Ys;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x!==void 0)return(Ys=new Bs).setPrivate(ca.p,ca.q,ca.g,ca.y,ca.x),Ys;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(Ys=new Ps).setPublic(et(ca.n),et(ca.e)),Ys;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.qi!==void 0)return(Ys=new Ps).setPrivateEx(et(ca.n),et(ca.e),et(ca.d),et(ca.p),et(ca.q),et(ca.dp),et(ca.dq),et(ca.qi)),Ys;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0)return(Ys=new Ps).setPrivate(et(ca.n),et(ca.e),et(ca.d)),Ys;if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d===void 0){var Ds=(tu=new Ts({curve:ca.crv})).ecparams.keylen/4,$s="04"+("0000000000"+et(ca.x)).slice(-Ds)+("0000000000"+et(ca.y)).slice(-Ds);return tu.setPublicKeyHex($s),tu}if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d!==void 0){Ds=(tu=new Ts({curve:ca.crv})).ecparams.keylen/4,$s="04"+("0000000000"+et(ca.x)).slice(-Ds)+("0000000000"+et(ca.y)).slice(-Ds);var Fs=("0000000000"+et(ca.d)).slice(-Ds);return tu.setPublicKeyHex($s),tu.setPrivateKeyHex(Fs),tu}if(_s==="pkcs5prv"){var Gs,Vs=ca,ks=It;if((Gs=Ss(Vs,0)).length===9)(Ys=new Ps).readPKCS5PrvKeyHex(Vs);else if(Gs.length===6)(Ys=new Bs).readPKCS5PrvKeyHex(Vs);else{if(!(Gs.length>2&&Vs.substr(Gs[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Ys=new Ts).readPKCS5PrvKeyHex(Vs)}return Ys}if(_s==="pkcs8prv")return Ys=Rs.getKeyFromPlainPrivatePKCS8Hex(ca);if(_s==="pkcs8pub")return Rs._getKeyFromPublicPKCS8Hex(ca);if(_s==="x509pub")return Mt.getPublicKeyFromCertHex(ca);if(ca.indexOf("-END CERTIFICATE-",0)!=-1||ca.indexOf("-END X509 CERTIFICATE-",0)!=-1||ca.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Mt.getPublicKeyFromCertPEM(ca);if(ca.indexOf("-END PUBLIC KEY-")!=-1){var Os=ut(ca,"PUBLIC KEY");return Rs._getKeyFromPublicPKCS8Hex(Os)}if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var Ns=Ls(ca,"RSA PRIVATE KEY");return Rs.getKey(Ns,null,"pkcs5prv")}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var Us=Ms(eu=Ls(ca,"DSA PRIVATE KEY"),0,[1],"02"),Hs=Ms(eu,0,[2],"02"),zs=Ms(eu,0,[3],"02"),js=Ms(eu,0,[4],"02"),Ws=Ms(eu,0,[5],"02");return(Ys=new Bs).setPrivate(new c$2(Us,16),new c$2(Hs,16),new c$2(zs,16),new c$2(js,16),new c$2(Ws,16)),Ys}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1)return Ns=Ls(ca,"EC PRIVATE KEY"),Rs.getKey(Ns,null,"pkcs5prv");if(ca.indexOf("-END PRIVATE KEY-")!=-1)return Rs.getKeyFromPlainPrivatePKCS8PEM(ca);if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Qs=Rs.getDecryptedKeyHex(ca,ga),qs=new X;return qs.readPKCS5PrvKeyHex(Qs),qs}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var tu,Ys=Ms(eu=Rs.getDecryptedKeyHex(ca,ga),0,[1],"04"),Ks=Ms(eu,0,[2,0],"06"),Js=Ms(eu,0,[3,0],"03").substr(2);if(u$2.crypto.OID.oidhex2name[Ks]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Ks;return(tu=new Ts({curve:u$2.crypto.OID.oidhex2name[Ks]})).setPublicKeyHex(Js),tu.setPrivateKeyHex(Ys),tu.isPublic=!1,tu}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var eu;return Us=Ms(eu=Rs.getDecryptedKeyHex(ca,ga),0,[1],"02"),Hs=Ms(eu,0,[2],"02"),zs=Ms(eu,0,[3],"02"),js=Ms(eu,0,[4],"02"),Ws=Ms(eu,0,[5],"02"),(Ys=new Bs).setPrivate(new c$2(Us,16),new c$2(Hs,16),new c$2(zs,16),new c$2(js,16),new c$2(Ws,16)),Ys}if(ca.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Rs.getKeyFromEncryptedPKCS8PEM(ca,ga);throw new Error("not supported argument")},Et.generateKeypair=function(ca,ga){if(ca=="RSA"){var _s=ga;(Ts=new X).generate(_s,"10001"),Ts.isPrivate=!0,Ts.isPublic=!0;var Ss=new X,Ms=Ts.n.toString(16),Cs=Ts.e.toString(16);return Ss.setPublic(Ms,Cs),Ss.isPrivate=!1,Ss.isPublic=!0,(Bs={}).prvKeyObj=Ts,Bs.pubKeyObj=Ss,Bs}if(ca=="EC"){var Ts,Bs,Ps=ga,Ls=new u$2.crypto.ECDSA({curve:Ps}).generateKeyPairHex();return(Ts=new u$2.crypto.ECDSA({curve:Ps})).setPublicKeyHex(Ls.ecpubhex),Ts.setPrivateKeyHex(Ls.ecprvhex),Ts.isPrivate=!0,Ts.isPublic=!1,(Ss=new u$2.crypto.ECDSA({curve:Ps})).setPublicKeyHex(Ls.ecpubhex),Ss.isPrivate=!1,Ss.isPublic=!0,(Bs={}).prvKeyObj=Ts,Bs.pubKeyObj=Ss,Bs}throw"unknown algorithm: "+ca},Et.getPEM=function(ca,ga,_s,Ss,Ms,Cs){var Ts=u$2,Bs=Ts.asn1,Ps=Bs.DERObjectIdentifier,Ls=Bs.DERInteger,Rs=Bs.ASN1Util.newObject,Ds=Bs.x509.SubjectPublicKeyInfo,$s=Ts.crypto,Fs=$s.DSA,Gs=$s.ECDSA,Vs=X;function ks(tu){return Rs({seq:[{int:0},{int:{bigint:tu.n}},{int:tu.e},{int:{bigint:tu.d}},{int:{bigint:tu.p}},{int:{bigint:tu.q}},{int:{bigint:tu.dmp1}},{int:{bigint:tu.dmq1}},{int:{bigint:tu.coeff}}]})}function Os(tu){return Rs({seq:[{int:1},{octstr:{hex:tu.prvKeyHex}},{tag:["a0",!0,{oid:{name:tu.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+tu.pubKeyHex}}]}]})}function Ns(tu){return Rs({seq:[{int:0},{int:{bigint:tu.p}},{int:{bigint:tu.q}},{int:{bigint:tu.g}},{int:{bigint:tu.y}},{int:{bigint:tu.x}}]})}if((Vs!==void 0&&ca instanceof Vs||Fs!==void 0&&ca instanceof Fs||Gs!==void 0&&ca instanceof Gs)&&ca.isPublic==1&&(ga===void 0||ga=="PKCS8PUB"))return at(js=new Ds(ca).getEncodedHex(),"PUBLIC KEY");if(ga=="PKCS1PRV"&&Vs!==void 0&&ca instanceof Vs&&(_s===void 0||_s==null)&&ca.isPrivate==1)return at(js=ks(ca).getEncodedHex(),"RSA PRIVATE KEY");if(ga=="PKCS1PRV"&&Gs!==void 0&&ca instanceof Gs&&(_s===void 0||_s==null)&&ca.isPrivate==1){var Us=new Ps({name:ca.curveName}).getEncodedHex(),Hs=Os(ca).getEncodedHex(),zs="";return zs+=at(Us,"EC PARAMETERS"),zs+=at(Hs,"EC PRIVATE KEY")}if(ga=="PKCS1PRV"&&Fs!==void 0&&ca instanceof Fs&&(_s===void 0||_s==null)&&ca.isPrivate==1)return at(js=Ns(ca).getEncodedHex(),"DSA PRIVATE KEY");if(ga=="PKCS5PRV"&&Vs!==void 0&&ca instanceof Vs&&_s!==void 0&&_s!=null&&ca.isPrivate==1){var js=ks(ca).getEncodedHex();return Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",js,_s,Ss,Cs)}if(ga=="PKCS5PRV"&&Gs!==void 0&&ca instanceof Gs&&_s!==void 0&&_s!=null&&ca.isPrivate==1)return js=Os(ca).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",js,_s,Ss,Cs);if(ga=="PKCS5PRV"&&Fs!==void 0&&ca instanceof Fs&&_s!==void 0&&_s!=null&&ca.isPrivate==1)return js=Ns(ca).getEncodedHex(),Ss===void 0&&(Ss="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",js,_s,Ss,Cs);var Ws=function(tu,Ys){var Ks=Qs(tu,Ys);return new Rs({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Ks.pbkdf2Salt}},{int:Ks.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Ks.encryptionSchemeIV}}]}]}]},{octstr:{hex:Ks.ciphertext}}]}).getEncodedHex()},Qs=function(tu,Ys){var Ks=h$2.lib.WordArray.random(8),Js=h$2.lib.WordArray.random(8),eu=h$2.PBKDF2(Ys,Ks,{keySize:6,iterations:100}),Zs=h$2.enc.Hex.parse(tu),au=h$2.TripleDES.encrypt(Zs,eu,{iv:Js})+"",ru={};return ru.ciphertext=au,ru.pbkdf2Salt=h$2.enc.Hex.stringify(Ks),ru.pbkdf2Iter=100,ru.encryptionSchemeAlg="DES-EDE3-CBC",ru.encryptionSchemeIV=h$2.enc.Hex.stringify(Js),ru};if(ga=="PKCS8PRV"&&Vs!=null&&ca instanceof Vs&&ca.isPrivate==1){var qs=ks(ca).getEncodedHex();return js=Rs({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(js,"PRIVATE KEY"):at(Hs=Ws(js,_s),"ENCRYPTED PRIVATE KEY")}if(ga=="PKCS8PRV"&&Gs!==void 0&&ca instanceof Gs&&ca.isPrivate==1)return qs=new Rs({seq:[{int:1},{octstr:{hex:ca.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+ca.pubKeyHex}}]}]}).getEncodedHex(),js=Rs({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:ca.curveName}}]},{octstr:{hex:qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(js,"PRIVATE KEY"):at(Hs=Ws(js,_s),"ENCRYPTED PRIVATE KEY");if(ga=="PKCS8PRV"&&Fs!==void 0&&ca instanceof Fs&&ca.isPrivate==1)return qs=new Ls({bigint:ca.x}).getEncodedHex(),js=Rs({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:ca.p}},{int:{bigint:ca.q}},{int:{bigint:ca.g}}]}]},{octstr:{hex:qs}}]}).getEncodedHex(),_s===void 0||_s==null?at(js,"PRIVATE KEY"):at(Hs=Ws(js,_s),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Et.getKeyFromCSRPEM=function(ca){var ga=ut(ca,"CERTIFICATE REQUEST");return Et.getKeyFromCSRHex(ga)},Et.getKeyFromCSRHex=function(ca){var ga=Et.parseCSRHex(ca);return Et.getKey(ga.p8pubkeyhex,null,"pkcs8pub")},Et.parseCSRHex=function(ca){var ga=It,_s=ga.getChildIdx,Ss=ga.getTLV,Ms={},Cs=ca;if(Cs.substr(0,2)!="30")throw"malformed CSR(code:001)";var Ts=_s(Cs,0);if(Ts.length<1)throw"malformed CSR(code:002)";if(Cs.substr(Ts[0],2)!="30")throw"malformed CSR(code:003)";var Bs=_s(Cs,Ts[0]);if(Bs.length<3)throw"malformed CSR(code:004)";return Ms.p8pubkeyhex=Ss(Cs,Bs[2]),Ms},Et.getKeyID=function(ca){var ga=Et,_s=It;typeof ca=="string"&&ca.indexOf("BEGIN ")!=-1&&(ca=ga.getKey(ca));var Ss=ut(ga.getPEM(ca)),Ms=_s.getIdxbyList(Ss,0,[1]),Cs=_s.getV(Ss,Ms).substring(2);return u$2.crypto.Util.hashHex(Cs,"sha1")},Et.getJWKFromKey=function(ca){var ga={};if(ca instanceof X&&ca.isPrivate)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga.d=tt(ca.d.toString(16)),ga.p=tt(ca.p.toString(16)),ga.q=tt(ca.q.toString(16)),ga.dp=tt(ca.dmp1.toString(16)),ga.dq=tt(ca.dmq1.toString(16)),ga.qi=tt(ca.coeff.toString(16)),ga;if(ca instanceof X&&ca.isPublic)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga;if(ca instanceof u$2.crypto.ECDSA&&ca.isPrivate){if((Ss=ca.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;var _s=ca.getPublicKeyXYHex();return ga.kty="EC",ga.crv=Ss,ga.x=tt(_s.x),ga.y=tt(_s.y),ga.d=tt(ca.prvKeyHex),ga}if(ca instanceof u$2.crypto.ECDSA&&ca.isPublic){var Ss;if((Ss=ca.getShortNISTPCurveName())!=="P-256"&&Ss!=="P-384")throw"unsupported curve name for JWT: "+Ss;return _s=ca.getPublicKeyXYHex(),ga.kty="EC",ga.crv=Ss,ga.x=tt(_s.x),ga.y=tt(_s.y),ga}throw"not supported key object"},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(ca){var ga=ca.toString(16);return ga.length%2==1&&(ga="0"+ga),ga},this.bigIntToMinTwosComplementsHex=function(ca){var ga=ca.toString(16);if(ga.substr(0,1)!="-")ga.length%2==1?ga="0"+ga:ga.match(/^[0-7]/)||(ga="00"+ga);else{var _s=ga.substr(1).length;_s%2==1?_s+=1:ga.match(/^[0-7]/)||(_s+=2);for(var Ss="",Ms=0;Ms<_s;Ms++)Ss+="f";ga=new c$2(Ss,16).xor(ca).add(c$2.ONE).toString(16).replace(/^-/,"")}return ga},this.getPEMStringFromHex=function(ca,ga){return at(ca,ga)},this.newObject=function(ca){var ga=u$2.asn1,_s=ga.ASN1Object,Ss=ga.DERBoolean,Ms=ga.DERInteger,Cs=ga.DERBitString,Ts=ga.DEROctetString,Bs=ga.DERNull,Ps=ga.DERObjectIdentifier,Ls=ga.DEREnumerated,Rs=ga.DERUTF8String,Ds=ga.DERNumericString,$s=ga.DERPrintableString,Fs=ga.DERTeletexString,Gs=ga.DERIA5String,Vs=ga.DERUTCTime,ks=ga.DERGeneralizedTime,Os=ga.DERVisibleString,Ns=ga.DERBMPString,Us=ga.DERSequence,Hs=ga.DERSet,zs=ga.DERTaggedObject,js=ga.ASN1Util.newObject;if(ca instanceof ga.ASN1Object)return ca;var Ws=Object.keys(ca);if(Ws.length!=1)throw new Error("key of param shall be only one.");var Qs=Ws[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Qs+":")==-1)throw new Error("undefined key: "+Qs);if(Qs=="bool")return new Ss(ca[Qs]);if(Qs=="int")return new Ms(ca[Qs]);if(Qs=="bitstr")return new Cs(ca[Qs]);if(Qs=="octstr")return new Ts(ca[Qs]);if(Qs=="null")return new Bs(ca[Qs]);if(Qs=="oid")return new Ps(ca[Qs]);if(Qs=="enum")return new Ls(ca[Qs]);if(Qs=="utf8str")return new Rs(ca[Qs]);if(Qs=="numstr")return new Ds(ca[Qs]);if(Qs=="prnstr")return new $s(ca[Qs]);if(Qs=="telstr")return new Fs(ca[Qs]);if(Qs=="ia5str")return new Gs(ca[Qs]);if(Qs=="utctime")return new Vs(ca[Qs]);if(Qs=="gentime")return new ks(ca[Qs]);if(Qs=="visstr")return new Os(ca[Qs]);if(Qs=="bmpstr")return new Ns(ca[Qs]);if(Qs=="asn1")return new _s(ca[Qs]);if(Qs=="seq"){for(var qs=ca[Qs],tu=[],Ys=0;Ys<qs.length;Ys++){var Ks=js(qs[Ys]);tu.push(Ks)}return new Us({array:tu})}if(Qs=="set"){for(qs=ca[Qs],tu=[],Ys=0;Ys<qs.length;Ys++)Ks=js(qs[Ys]),tu.push(Ks);return new Hs({array:tu})}if(Qs=="tag"){var Js=ca[Qs];if(Object.prototype.toString.call(Js)==="[object Array]"&&Js.length==3){var eu=js(Js[2]);return new zs({tag:Js[0],explicit:Js[1],obj:eu})}return new zs(Js)}},this.jsonToASN1HEX=function(ca){return this.newObject(ca).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(ca){for(var ga="",_s=parseInt(ca.substr(0,2),16),Ss=(ga=Math.floor(_s/40)+"."+_s%40,""),Ms=2;Ms<ca.length;Ms+=2){var Cs=("00000000"+parseInt(ca.substr(Ms,2),16).toString(2)).slice(-8);Ss+=Cs.substr(1,7),Cs.substr(0,1)=="0"&&(ga=ga+"."+new c$2(Ss,2).toString(10),Ss="")}return ga},u$2.asn1.ASN1Util.oidIntToHex=function(ca){var ga=function(Bs){var Ps=Bs.toString(16);return Ps.length==1&&(Ps="0"+Ps),Ps},_s=function(Bs){var Ps="",Ls=new c$2(Bs,10).toString(2),Rs=7-Ls.length%7;Rs==7&&(Rs=0);for(var Ds="",$s=0;$s<Rs;$s++)Ds+="0";for(Ls=Ds+Ls,$s=0;$s<Ls.length-1;$s+=7){var Fs=Ls.substr($s,7);$s!=Ls.length-7&&(Fs="1"+Fs),Ps+=ga(parseInt(Fs,2))}return Ps};if(!ca.match(/^[0-9.]+$/))throw"malformed oid string: "+ca;var Ss="",Ms=ca.split("."),Cs=40*parseInt(Ms[0])+parseInt(Ms[1]);Ss+=ga(Cs),Ms.splice(0,2);for(var Ts=0;Ts<Ms.length;Ts++)Ss+=_s(Ms[Ts]);return Ss},u$2.asn1.ASN1Object=function(ca){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var ga=this.hV.length/2,_s=ga.toString(16);if(_s.length%2==1&&(_s="0"+_s),ga<128)return _s;var Ss=_s.length/2;if(Ss>15)throw"ASN.1 length too long to represent by 8x: n = "+ga.toString(16);return(128+Ss).toString(16)+_s},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(ga){this.params=ga},ca!=null&&ca.tlv!=null&&(this.hTLV=ca.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(ca){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=it(this.s).toLowerCase()},this.setStringHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"?this.setString(ca):ca.str!==void 0?this.setString(ca.str):ca.hex!==void 0&&this.setStringHex(ca.hex))},l$2.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(ca){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(ga){var _s=ga.getTime()+6e4*ga.getTimezoneOffset();return new Date(_s)},this.formatDate=function(ga,_s,Ss){var Ms=this.zeroPadding,Cs=this.localDateToUTC(ga),Ts=String(Cs.getFullYear());_s=="utc"&&(Ts=Ts.substr(2,2));var Bs=Ts+Ms(String(Cs.getMonth()+1),2)+Ms(String(Cs.getDate()),2)+Ms(String(Cs.getHours()),2)+Ms(String(Cs.getMinutes()),2)+Ms(String(Cs.getSeconds()),2);if(Ss===!0){var Ps=Cs.getMilliseconds();if(Ps!=0){var Ls=Ms(String(Ps),3);Bs=Bs+"."+(Ls=Ls.replace(/[0]+$/,""))}}return Bs+"Z"},this.zeroPadding=function(ga,_s){return ga.length>=_s?ga:new Array(_s-ga.length+1).join("0")+ga},this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=J(ga)},this.setByDateValue=function(ga,_s,Ss,Ms,Cs,Ts){var Bs=new Date(Date.UTC(ga,_s-1,Ss,Ms,Cs,Ts,0));this.setByDate(Bs)},this.getFreshValueHex=function(){return this.hV}},l$2.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(ca){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array=ga},this.appendASN1Object=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array.push(ga)},this.asn1Array=new Array,ca!==void 0&&ca.array!==void 0&&(this.asn1Array=ca.array)},l$2.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(ca){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=ca==0?"010100":"0101ff"},l$2.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(ca){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var _s=new c$2(String(ga),10);this.setByBigInteger(_s)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.bigint!==void 0?this.setByBigInteger(ca.bigint):ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$2.asn1.ASN1Util.newObject(ca.obj);ca.hex="00"+ga.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(_s){this.hTLV=null,this.isModified=!0,this.hV=_s},this.setUnusedBitsAndHexValue=function(_s,Ss){if(_s<0||7<_s)throw"unused bits shall be from 0 to 7: u = "+_s;var Ms="0"+_s;this.hTLV=null,this.isModified=!0,this.hV=Ms+Ss},this.setByBinaryString=function(_s){var Ss=8-(_s=_s.replace(/0+$/,"")).length%8;Ss==8&&(Ss=0);for(var Ms=0;Ms<=Ss;Ms++)_s+="0";var Cs="";for(Ms=0;Ms<_s.length-1;Ms+=8){var Ts=_s.substr(Ms,8),Bs=parseInt(Ts,2).toString(16);Bs.length==1&&(Bs="0"+Bs),Cs+=Bs}this.hTLV=null,this.isModified=!0,this.hV="0"+Ss+Cs},this.setByBooleanArray=function(_s){for(var Ss="",Ms=0;Ms<_s.length;Ms++)_s[Ms]==1?Ss+="1":Ss+="0";this.setByBinaryString(Ss)},this.newFalseArray=function(_s){for(var Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=!1;return Ss},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"&&ca.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(ca):ca.hex!==void 0?this.setHexValueIncludingUnusedBits(ca.hex):ca.bin!==void 0?this.setByBinaryString(ca.bin):ca.array!==void 0&&this.setByBooleanArray(ca.array))},l$2.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$2.asn1.ASN1Util.newObject(ca.obj);ca.hex=ga.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,ca),this.hT="04"},l$2.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l$2.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(ca){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.setValueOidString=function(ga){var _s=function(Ss){var Ms=function(Rs){var Ds=Rs.toString(16);return Ds.length==1&&(Ds="0"+Ds),Ds},Cs=function(Rs){var Ds="",$s=parseInt(Rs,10).toString(2),Fs=7-$s.length%7;Fs==7&&(Fs=0);for(var Gs="",Vs=0;Vs<Fs;Vs++)Gs+="0";for($s=Gs+$s,Vs=0;Vs<$s.length-1;Vs+=7){var ks=$s.substr(Vs,7);Vs!=$s.length-7&&(ks="1"+ks),Ds+=Ms(parseInt(ks,2))}return Ds};try{if(!Ss.match(/^[0-9.]+$/))return null;var Ts="",Bs=Ss.split("."),Ps=40*parseInt(Bs[0],10)+parseInt(Bs[1],10);Ts+=Ms(Ps),Bs.splice(0,2);for(var Ls=0;Ls<Bs.length;Ls++)Ts+=Cs(Bs[Ls]);return Ts}catch{return null}}(ga);if(_s==null)throw new Error("malformed oid string: "+ga);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_s},this.setValueName=function(ga){var _s=u$2.asn1.x509.OID.name2oid(ga);if(_s==="")throw new Error("DERObjectIdentifier oidName undefined: "+ga);this.setValueOidString(_s)},this.setValueNameOrOid=function(ga){ga.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(ga):this.setValueName(ga)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(ga){typeof ga=="string"?this.setValueNameOrOid(ga):ga.oid!==void 0?this.setValueNameOrOid(ga.oid):ga.name!==void 0?this.setValueNameOrOid(ga.name):ga.hex!==void 0&&this.setValueHex(ga.hex)},ca!==void 0&&this.setByParam(ca)},l$2.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(ca){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var _s=new c$2(String(ga),10);this.setByBigInteger(_s)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(ca){u$2.asn1.DERUTF8String.superclass.constructor.call(this,ca),this.hT="0c"},l$2.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(ca){u$2.asn1.DERNumericString.superclass.constructor.call(this,ca),this.hT="12"},l$2.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(ca){u$2.asn1.DERPrintableString.superclass.constructor.call(this,ca),this.hT="13"},l$2.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(ca){u$2.asn1.DERTeletexString.superclass.constructor.call(this,ca),this.hT="14"},l$2.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(ca){u$2.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="16"},l$2.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(ca){u$2.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="1a"},l$2.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(ca){u$2.asn1.DERBMPString.superclass.constructor.call(this,ca),this.hT="1e"},l$2.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(ca){u$2.asn1.DERUTCTime.superclass.constructor.call(this,ca),this.hT="17",this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{12}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date))},l$2.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(ca){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,ca),this.hT="18",this.withMillis=!1,this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{14}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date),ca.millis===!0&&(this.withMillis=!0))},l$2.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(ca){u$2.asn1.DERSequence.superclass.constructor.call(this,ca),this.hT="30",this.getFreshValueHex=function(){for(var ga="",_s=0;_s<this.asn1Array.length;_s++)ga+=this.asn1Array[_s].getEncodedHex();return this.hV=ga,this.hV}},l$2.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(ca){u$2.asn1.DERSet.superclass.constructor.call(this,ca),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var ga=new Array,_s=0;_s<this.asn1Array.length;_s++){var Ss=this.asn1Array[_s];ga.push(Ss.getEncodedHex())}return this.sortFlag==1&&ga.sort(),this.hV=ga.join(""),this.hV},ca!==void 0&&ca.sortflag!==void 0&&ca.sortflag==0&&(this.sortFlag=!1)},l$2.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(ca){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var ga=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(_s,Ss,Ms){this.hT=Ss,this.isExplicit=_s,this.asn1Object=Ms,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Ms.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Ss),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_s){_s.tag!=null&&(this.hT=_s.tag),_s.explicit!=null&&(this.isExplicit=_s.explicit),_s.tage!=null&&(this.hT=_s.tage,this.isExplicit=!0),_s.tagi!=null&&(this.hT=_s.tagi,this.isExplicit=!1),_s.obj!=null&&(_s.obj instanceof ga.ASN1Object?(this.asn1Object=_s.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof _s.obj=="object"&&(this.asn1Object=ga.ASN1Util.newObject(_s.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ca!=null&&this.setByParam(ca)},l$2.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var It=new function(){};function Ct(ca,ga){for(var _s="",Ss=ga/4-ca.length,Ms=0;Ms<Ss;Ms++)_s+="0";return _s+ca}function St(ca,ga,_s){for(var Ss="",Ms=0;Ss.length<ga;)Ss+=rt(_s(ot(ca+String.fromCharCode.apply(String,[(4278190080&Ms)>>24,(16711680&Ms)>>16,(65280&Ms)>>8,255&Ms])))),Ms+=1;return Ss}function Bt(ca){for(var ga in u$2.crypto.Util.DIGESTINFOHEAD){var _s=u$2.crypto.Util.DIGESTINFOHEAD[ga],Ss=_s.length;if(ca.substring(0,Ss)==_s)return[ga,ca.substring(Ss)]}return[]}function Mt(ca){var ga,_s=It,Ss=_s.getChildIdx,Ms=_s.getV,Cs=_s.getTLV,Ts=_s.getVbyList,Bs=_s.getVbyListEx,Ps=_s.getTLVbyList,Ls=_s.getTLVbyListEx,Rs=_s.getIdxbyList,Ds=_s.getIdxbyListEx,$s=_s.getVidx,Fs=_s.getInt,Gs=_s.oidname,Vs=_s.hextooidstr,ks=ut;try{ga=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Os=Ps(this.hex,0,[0,0]);if(Os.substr(0,2)=="a0"){var Ns=Ps(Os,0,[0]),Us=Fs(Ns,0);if(Us<0||2<Us)throw new Error("malformed version field");return this.version=Us+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Bs(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Os=Ls(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Os)},this.getAlgorithmIdentifierName=function(Os){for(var Ns in ga)if(Os===ga[Ns])return Ns;return Gs(Bs(Os,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Ps(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Ps(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Os=Ts(this.hex,0,[0,4+this.foffset,0]);return Os=Os.replace(/(..)/g,"%$1"),Os=decodeURIComponent(Os)},this.getNotAfter=function(){var Os=Ts(this.hex,0,[0,4+this.foffset,1]);return Os=Os.replace(/(..)/g,"%$1"),Os=decodeURIComponent(Os)},this.getPublicKeyHex=function(){return _s.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Rs(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Os=this.getPublicKeyIdx();return Rs(this.hex,Os,[1,0],"30")},this.getPublicKey=function(){return Et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Os=Ps(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Os)},this.getSignatureValueHex=function(){return Ts(this.hex,0,[2],"03",!0)},this.verifySignature=function(Os){var Ns=this.getSignatureAlgorithmField(),Us=this.getSignatureValueHex(),Hs=Ps(this.hex,0,[0],"30"),zs=new u$2.crypto.Signature({alg:Ns});return zs.init(Os),zs.updateHex(Hs),zs.verify(Us)},this.parseExt=function(Os){var Ns,Us,Hs;if(Os===void 0){if(Hs=this.hex,this.version!==3)return-1;Ns=Rs(Hs,0,[0,7,0],"30"),Us=Ss(Hs,Ns)}else{Hs=ut(Os);var zs=Rs(Hs,0,[0,3,0,0],"06");if(Ms(Hs,zs)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);Ns=Rs(Hs,0,[0,3,0,1,0],"30"),Us=Ss(Hs,Ns),this.hex=Hs}this.aExtInfo=new Array;for(var js=0;js<Us.length;js++){var Ws={critical:!1},Qs=0;Ss(Hs,Us[js]).length===3&&(Ws.critical=!0,Qs=1),Ws.oid=_s.hextooidstr(Ts(Hs,Us[js],[0],"06"));var qs=Rs(Hs,Us[js],[1+Qs]);Ws.vidx=$s(Hs,qs),this.aExtInfo.push(Ws)}},this.getExtInfo=function(Os){var Ns=this.aExtInfo,Us=Os;if(Os.match(/^[0-9.]+$/)||(Us=u$2.asn1.x509.OID.name2oid(Os)),Us!==""){for(var Hs=0;Hs<Ns.length;Hs++)if(Ns[Hs].oid===Us)return Ns[Hs]}},this.getExtBasicConstraints=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("basicConstraints");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"basicConstraints"};if(Ns&&(Hs.critical=!0),Os==="3000")return Hs;if(Os==="30030101ff")return Hs.cA=!0,Hs;if(Os.substr(0,12)==="30060101ff02"){var zs=Ms(Os,10),js=parseInt(zs,16);return Hs.cA=!0,Hs.pathLen=js,Hs}throw new Error("hExtV parse error: "+Os)},this.getExtKeyUsage=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("keyUsage");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"keyUsage"};return Ns&&(Hs.critical=!0),Hs.names=this.getExtKeyUsageString(Os).split(","),Hs},this.getExtKeyUsageBin=function(Os){if(Os===void 0){var Ns=this.getExtInfo("keyUsage");if(Ns===void 0)return"";Os=Cs(this.hex,Ns.vidx)}if(Os.length!=8&&Os.length!=10)throw new Error("malformed key usage value: "+Os);var Us="000000000000000"+parseInt(Os.substr(6),16).toString(2);return Os.length==8&&(Us=Us.slice(-8)),Os.length==10&&(Us=Us.slice(-16)),(Us=Us.replace(/0+$/,""))==""&&(Us="0"),Us},this.getExtKeyUsageString=function(Os){for(var Ns=this.getExtKeyUsageBin(Os),Us=new Array,Hs=0;Hs<Ns.length;Hs++)Ns.substr(Hs,1)=="1"&&Us.push(Mt.KEYUSAGE_NAME[Hs]);return Us.join(",")},this.getExtSubjectKeyIdentifier=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("subjectKeyIdentifier");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"subjectKeyIdentifier"};Ns&&(Hs.critical=!0);var zs=Ms(Os,0);return Hs.kid={hex:zs},Hs},this.getExtAuthorityKeyIdentifier=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("authorityKeyIdentifier");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"authorityKeyIdentifier"};Ns&&(Hs.critical=!0);for(var zs=Ss(Os,0),js=0;js<zs.length;js++){var Ws=Os.substr(zs[js],2);if(Ws==="80"&&(Hs.kid={hex:Ms(Os,zs[js])}),Ws==="a1"){var Qs=Cs(Os,zs[js]),qs=this.getGeneralNames(Qs);Hs.issuer=qs[0].dn}Ws==="82"&&(Hs.sn={hex:Ms(Os,zs[js])})}return Hs},this.getExtExtKeyUsage=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("extKeyUsage");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"extKeyUsage",array:[]};Ns&&(Hs.critical=!0);for(var zs=Ss(Os,0),js=0;js<zs.length;js++)Hs.array.push(Gs(Ms(Os,zs[js])));return Hs},this.getExtExtKeyUsageName=function(){var Os=this.getExtInfo("extKeyUsage");if(Os===void 0)return Os;var Ns=new Array,Us=Cs(this.hex,Os.vidx);if(Us==="")return Ns;for(var Hs=Ss(Us,0),zs=0;zs<Hs.length;zs++)Ns.push(Gs(Ms(Us,Hs[zs])));return Ns},this.getExtSubjectAltName=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("subjectAltName");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"subjectAltName",array:[]};return Ns&&(Hs.critical=!0),Hs.array=this.getGeneralNames(Os),Hs},this.getExtIssuerAltName=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("issuerAltName");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"issuerAltName",array:[]};return Ns&&(Hs.critical=!0),Hs.array=this.getGeneralNames(Os),Hs},this.getGeneralNames=function(Os){for(var Ns=Ss(Os,0),Us=[],Hs=0;Hs<Ns.length;Hs++){var zs=this.getGeneralName(Cs(Os,Ns[Hs]));zs!==void 0&&Us.push(zs)}return Us},this.getGeneralName=function(Os){var Ns=Os.substr(0,2),Us=Ms(Os,0),Hs=rt(Us);return Ns=="81"?{rfc822:Hs}:Ns=="82"?{dns:Hs}:Ns=="86"?{uri:Hs}:Ns=="87"?{ip:lt(Us)}:Ns=="a4"?{dn:this.getX500Name(Us)}:void 0},this.getExtSubjectAltName2=function(){var Os,Ns,Us,Hs=this.getExtInfo("subjectAltName");if(Hs===void 0)return Hs;for(var zs=new Array,js=Cs(this.hex,Hs.vidx),Ws=Ss(js,0),Qs=0;Qs<Ws.length;Qs++)Us=js.substr(Ws[Qs],2),Os=Ms(js,Ws[Qs]),Us==="81"&&(Ns=nt(Os),zs.push(["MAIL",Ns])),Us==="82"&&(Ns=nt(Os),zs.push(["DNS",Ns])),Us==="84"&&(Ns=Mt.hex2dn(Os,0),zs.push(["DN",Ns])),Us==="86"&&(Ns=nt(Os),zs.push(["URI",Ns])),Us==="87"&&(Ns=lt(Os),zs.push(["IP",Ns]));return zs},this.getExtCRLDistributionPoints=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("cRLDistributionPoints");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"cRLDistributionPoints",array:[]};Ns&&(Hs.critical=!0);for(var zs=Ss(Os,0),js=0;js<zs.length;js++){var Ws=Cs(Os,zs[js]);Hs.array.push(this.getDistributionPoint(Ws))}return Hs},this.getDistributionPoint=function(Os){for(var Ns={},Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++){var zs=Os.substr(Us[Hs],2),js=Cs(Os,Us[Hs]);zs=="a0"&&(Ns.dpname=this.getDistributionPointName(js))}return Ns},this.getDistributionPointName=function(Os){for(var Ns={},Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++){var zs=Os.substr(Us[Hs],2),js=Cs(Os,Us[Hs]);zs=="a0"&&(Ns.full=this.getGeneralNames(js))}return Ns},this.getExtCRLDistributionPointsURI=function(){var Os=this.getExtInfo("cRLDistributionPoints");if(Os===void 0)return Os;for(var Ns=new Array,Us=Ss(this.hex,Os.vidx),Hs=0;Hs<Us.length;Hs++)try{var zs=nt(Ts(this.hex,Us[Hs],[0,0,0],"86"));Ns.push(zs)}catch{}return Ns},this.getExtAIAInfo=function(){var Os=this.getExtInfo("authorityInfoAccess");if(Os===void 0)return Os;for(var Ns={ocsp:[],caissuer:[]},Us=Ss(this.hex,Os.vidx),Hs=0;Hs<Us.length;Hs++){var zs=Ts(this.hex,Us[Hs],[0],"06"),js=Ts(this.hex,Us[Hs],[1],"86");zs==="2b06010505073001"&&Ns.ocsp.push(nt(js)),zs==="2b06010505073002"&&Ns.caissuer.push(nt(js))}return Ns},this.getExtAuthorityInfoAccess=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("authorityInfoAccess");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"authorityInfoAccess",array:[]};Ns&&(Hs.critical=!0);for(var zs=Ss(Os,0),js=0;js<zs.length;js++){var Ws=Bs(Os,zs[js],[0],"06"),Qs=nt(Ts(Os,zs[js],[1],"86"));if(Ws=="2b06010505073001")Hs.array.push({ocsp:Qs});else{if(Ws!="2b06010505073002")throw new Error("unknown method: "+Ws);Hs.array.push({caissuer:Qs})}}return Hs},this.getExtCertificatePolicies=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("certificatePolicies");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"certificatePolicies",array:[]};Ns&&(Hs.critical=!0);for(var zs=Ss(Os,0),js=0;js<zs.length;js++){var Ws=Cs(Os,zs[js]),Qs=this.getPolicyInformation(Ws);Hs.array.push(Qs)}return Hs},this.getPolicyInformation=function(Os){var Ns={},Us=Ts(Os,0,[0],"06");Ns.policyoid=Gs(Us);var Hs=Ds(Os,0,[1],"30");if(Hs!=-1){Ns.array=[];for(var zs=Ss(Os,Hs),js=0;js<zs.length;js++){var Ws=Cs(Os,zs[js]),Qs=this.getPolicyQualifierInfo(Ws);Ns.array.push(Qs)}}return Ns},this.getPolicyQualifierInfo=function(Os){var Ns={},Us=Ts(Os,0,[0],"06");if(Us==="2b06010505070201"){var Hs=Bs(Os,0,[1],"16");Ns.cps=rt(Hs)}else if(Us==="2b06010505070202"){var zs=Ps(Os,0,[1],"30");Ns.unotice=this.getUserNotice(zs)}return Ns},this.getUserNotice=function(Os){for(var Ns={},Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++){var zs=Cs(Os,Us[Hs]);zs.substr(0,2)!="30"&&(Ns.exptext=this.getDisplayText(zs))}return Ns},this.getDisplayText=function(Os){var Ns={};return Ns.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Os.substr(0,2)],Ns.str=rt(Ms(Os,0)),Ns},this.getExtCRLNumber=function(Os,Ns){var Us={extname:"cRLNumber"};if(Ns&&(Us.critical=!0),Os.substr(0,2)=="02")return Us.num={hex:Ms(Os,0)},Us;throw new Error("hExtV parse error: "+Os)},this.getExtCRLReason=function(Os,Ns){var Us={extname:"cRLReason"};if(Ns&&(Us.critical=!0),Os.substr(0,2)=="0a")return Us.code=parseInt(Ms(Os,0),16),Us;throw new Error("hExtV parse error: "+Os)},this.getExtOcspNonce=function(Os,Ns){var Us={extname:"ocspNonce"};Ns&&(Us.critical=!0);var Hs=Ms(Os,0);return Us.hex=Hs,Us},this.getExtOcspNoCheck=function(Os,Ns){var Us={extname:"ocspNoCheck"};return Ns&&(Us.critical=!0),Us},this.getExtAdobeTimeStamp=function(Os,Ns){if(Os===void 0&&Ns===void 0){var Us=this.getExtInfo("adobeTimeStamp");if(Us===void 0)return;Os=Cs(this.hex,Us.vidx),Ns=Us.critical}var Hs={extname:"adobeTimeStamp"};Ns&&(Hs.critical=!0);var zs=Ss(Os,0);if(zs.length>1){var js=Cs(Os,zs[1]),Ws=this.getGeneralName(js);Ws.uri!=null&&(Hs.uri=Ws.uri)}if(zs.length>2){var Qs=Cs(Os,zs[2]);Qs=="0101ff"&&(Hs.reqauth=!0),Qs=="010100"&&(Hs.reqauth=!1)}return Hs},this.getX500NameRule=function(Os){for(var Ns=null,Us=[],Hs=0;Hs<Os.length;Hs++)for(var zs=Os[Hs],js=0;js<zs.length;js++)Us.push(zs[js]);for(Hs=0;Hs<Us.length;Hs++){var Ws=Us[Hs],Qs=Ws.ds,qs=Ws.value,tu=Ws.type;if(Qs!="prn"&&Qs!="utf8"&&Qs!="ia5")return"mixed";if(Qs=="ia5"){if(tu!="CN")return"mixed";if(u$2.lang.String.isMail(qs))continue;return"mixed"}if(tu=="C"){if(Qs=="prn")continue;return"mixed"}if(Ns==null)Ns=Qs;else if(Ns!==Qs)return"mixed"}return Ns==null?"prn":Ns},this.getX500Name=function(Os){var Ns=this.getX500NameArray(Os);return{array:Ns,str:this.dnarraytostr(Ns)}},this.getX500NameArray=function(Os){for(var Ns=[],Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++)Ns.push(this.getRDN(Cs(Os,Us[Hs])));return Ns},this.getRDN=function(Os){for(var Ns=[],Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++)Ns.push(this.getAttrTypeAndValue(Cs(Os,Us[Hs])));return Ns},this.getAttrTypeAndValue=function(Os){var Ns={type:null,value:null,ds:null},Us=Ss(Os,0),Hs=Ts(Os,Us[0],[],"06"),zs=Ts(Os,Us[1],[]),js=u$2.asn1.ASN1Util.oidHexToInt(Hs);return Ns.type=u$2.asn1.x509.OID.oid2atype(js),Ns.ds=this.HEX2STAG[Os.substr(Us[1],2)],Ns.ds!="bmp"?Ns.value=nt(zs):Ns.value=ht(zs),Ns},this.readCertPEM=function(Os){this.readCertHex(ks(Os))},this.readCertHex=function(Os){this.hex=Os,this.getVersion();try{Rs(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Os={};return Os.version=this.getVersion(),Os.serial={hex:this.getSerialNumberHex()},Os.sigalg=this.getSignatureAlgorithmField(),Os.issuer=this.getIssuer(),Os.notbefore=this.getNotBefore(),Os.notafter=this.getNotAfter(),Os.subject=this.getSubject(),Os.sbjpubkey=at(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Os.ext=this.getExtParamArray()),Os.sighex=this.getSignatureValueHex(),Os},this.getExtParamArray=function(Os){Os==null&&Ds(this.hex,0,[0,"[3]"])!=-1&&(Os=Ls(this.hex,0,[0,"[3]",0],"30"));for(var Ns=[],Us=Ss(Os,0),Hs=0;Hs<Us.length;Hs++){var zs=Cs(Os,Us[Hs]),js=this.getExtParam(zs);js!=null&&Ns.push(js)}return Ns},this.getExtParam=function(Os){var Ns=Ss(Os,0).length;if(Ns!=2&&Ns!=3)throw new Error("wrong number elements in Extension: "+Ns+" "+Os);var Us=Vs(Ts(Os,0,[0],"06")),Hs=!1;Ns==3&&Ps(Os,0,[1])=="0101ff"&&(Hs=!0);var zs=Ps(Os,0,[Ns-1,0]),js=void 0;if(Us=="2.5.29.14"?js=this.getExtSubjectKeyIdentifier(zs,Hs):Us=="2.5.29.15"?js=this.getExtKeyUsage(zs,Hs):Us=="2.5.29.17"?js=this.getExtSubjectAltName(zs,Hs):Us=="2.5.29.18"?js=this.getExtIssuerAltName(zs,Hs):Us=="2.5.29.19"?js=this.getExtBasicConstraints(zs,Hs):Us=="2.5.29.31"?js=this.getExtCRLDistributionPoints(zs,Hs):Us=="2.5.29.32"?js=this.getExtCertificatePolicies(zs,Hs):Us=="2.5.29.35"?js=this.getExtAuthorityKeyIdentifier(zs,Hs):Us=="2.5.29.37"?js=this.getExtExtKeyUsage(zs,Hs):Us=="1.3.6.1.5.5.7.1.1"?js=this.getExtAuthorityInfoAccess(zs,Hs):Us=="2.5.29.20"?js=this.getExtCRLNumber(zs,Hs):Us=="2.5.29.21"?js=this.getExtCRLReason(zs,Hs):Us=="1.3.6.1.5.5.7.48.1.2"?js=this.getExtOcspNonce(zs,Hs):Us=="1.3.6.1.5.5.7.48.1.5"?js=this.getExtOcspNoCheck(zs,Hs):Us=="1.2.840.113583.1.1.9.1"&&(js=this.getExtAdobeTimeStamp(zs,Hs)),js!=null)return js;var Ws={extname:Us,extn:zs};return Hs&&(Ws.critical=!0),Ws},this.findExt=function(Os,Ns){for(var Us=0;Us<Os.length;Us++)if(Os[Us].extname==Ns)return Os[Us];return null},this.updateExtCDPFullURI=function(Os,Ns){var Us=this.findExt(Os,"cRLDistributionPoints");if(Us!=null&&Us.array!=null){for(var Hs=Us.array,zs=0;zs<Hs.length;zs++)if(Hs[zs].dpname!=null&&Hs[zs].dpname.full!=null)for(var js=Hs[zs].dpname.full,Ws=0;Ws<js.length;Ws++){var Qs=js[zs];Qs.uri!=null&&(Qs.uri=Ns)}}},this.updateExtAIAOCSP=function(Os,Ns){var Us=this.findExt(Os,"authorityInfoAccess");if(Us!=null&&Us.array!=null)for(var Hs=Us.array,zs=0;zs<Hs.length;zs++)Hs[zs].ocsp!=null&&(Hs[zs].ocsp=Ns)},this.updateExtAIACAIssuer=function(Os,Ns){var Us=this.findExt(Os,"authorityInfoAccess");if(Us!=null&&Us.array!=null)for(var Hs=Us.array,zs=0;zs<Hs.length;zs++)Hs[zs].caissuer!=null&&(Hs[zs].caissuer=Ns)},this.dnarraytostr=function(Os){return"/"+Os.map(function(Ns){return function(Us){return Us.map(function(Hs){return function(zs){return zs.type+"="+zs.value}(Hs).replace(/\+/,"\\+")}).join("+")}(Ns).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Os,Ns,Us,Hs,zs=function(eu){for(var Zs="",au=eu.array,ru=0;ru<au.length;ru++){var su=au[ru];if(Zs+="    policy oid: "+su.policyoid+`
`,su.array!==void 0)for(var lu=0;lu<su.array.length;lu++){var gu=su.array[lu];gu.cps!==void 0&&(Zs+="    cps: "+gu.cps+`
`)}}return Zs},js=function(eu){for(var Zs="",au=eu.array,ru=0;ru<au.length;ru++){var su=au[ru];try{su.dpname.full[0].uri!==void 0&&(Zs+="    "+su.dpname.full[0].uri+`
`)}catch{}try{su.dname.full[0].dn.hex!==void 0&&(Zs+="    "+Mt.hex2dn(su.dpname.full[0].dn.hex)+`
`)}catch{}}return Zs},Ws=function(eu){for(var Zs="",au=eu.array,ru=0;ru<au.length;ru++){var su=au[ru];su.caissuer!==void 0&&(Zs+="    caissuer: "+su.caissuer+`
`),su.ocsp!==void 0&&(Zs+="    ocsp: "+su.ocsp+`
`)}return Zs};if(Os=`Basic Fields
`,Os+="  serial number: "+this.getSerialNumberHex()+`
`,Os+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Os+="  issuer: "+this.getIssuerString()+`
`,Os+="  notBefore: "+this.getNotBefore()+`
`,Os+="  notAfter: "+this.getNotAfter()+`
`,Os+="  subject: "+this.getSubjectString()+`
`,Os+=`  subject public key info: 
`,Os+="    key algorithm: "+(Ns=this.getPublicKey()).type+`
`,Ns.type==="RSA"&&(Os+="    n="+dt(Ns.n.toString(16)).substr(0,16)+`...
`,Os+="    e="+dt(Ns.e.toString(16))+`
`),(Us=this.aExtInfo)!=null){Os+=`X509v3 Extensions:
`;for(var Qs=0;Qs<Us.length;Qs++){var qs=Us[Qs],tu=u$2.asn1.x509.OID.oid2name(qs.oid);tu===""&&(tu=qs.oid);var Ys="";if(qs.critical===!0&&(Ys="CRITICAL"),Os+="  "+tu+" "+Ys+`:
`,tu==="basicConstraints"){var Ks=this.getExtBasicConstraints();Ks.cA===void 0?Os+=`    {}
`:(Os+="    cA=true",Ks.pathLen!==void 0&&(Os+=", pathLen="+Ks.pathLen),Os+=`
`)}else if(tu==="keyUsage")Os+="    "+this.getExtKeyUsageString()+`
`;else if(tu==="subjectKeyIdentifier")Os+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(tu==="authorityKeyIdentifier"){var Js=this.getExtAuthorityKeyIdentifier();Js.kid!==void 0&&(Os+="    kid="+Js.kid.hex+`
`)}else tu==="extKeyUsage"?Os+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:tu==="subjectAltName"?Os+="    "+(Hs=this.getExtSubjectAltName(),JSON.stringify(Hs.array).replace(/[\[\]\{\}\"]/g,""))+`
`:tu==="cRLDistributionPoints"?Os+=js(this.getExtCRLDistributionPoints()):tu==="authorityInfoAccess"?Os+=Ws(this.getExtAuthorityInfoAccess()):tu==="certificatePolicies"&&(Os+=zs(this.getExtCertificatePolicies()))}}return Os+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Os+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof ca=="string"&&(ca.indexOf("-----BEGIN")!=-1?this.readCertPEM(ca):u$2.lang.String.isHex(ca)&&this.readCertHex(ca))}function Pt(ca){return h$2.SHA256(ca).toString()}It.getLblen=function(ca,ga){if(ca.substr(ga+2,1)!="8")return 1;var _s=parseInt(ca.substr(ga+3,1));return _s==0?-1:0<_s&&_s<10?_s+1:-2},It.getL=function(ca,ga){var _s=It.getLblen(ca,ga);return _s<1?"":ca.substr(ga+2,2*_s)},It.getVblen=function(ca,ga){var _s;return(_s=It.getL(ca,ga))==""?-1:(_s.substr(0,1)==="8"?new c$2(_s.substr(2),16):new c$2(_s,16)).intValue()},It.getVidx=function(ca,ga){var _s=It.getLblen(ca,ga);return _s<0?_s:ga+2*(_s+1)},It.getV=function(ca,ga){var _s=It.getVidx(ca,ga),Ss=It.getVblen(ca,ga);return ca.substr(_s,2*Ss)},It.getTLV=function(ca,ga){return ca.substr(ga,2)+It.getL(ca,ga)+It.getV(ca,ga)},It.getTLVblen=function(ca,ga){return 2+2*It.getLblen(ca,ga)+2*It.getVblen(ca,ga)},It.getNextSiblingIdx=function(ca,ga){return It.getVidx(ca,ga)+2*It.getVblen(ca,ga)},It.getChildIdx=function(ca,ga){var _s,Ss,Ms,Cs=It,Ts=[];_s=Cs.getVidx(ca,ga),Ss=2*Cs.getVblen(ca,ga),ca.substr(ga,2)=="03"&&(_s+=2,Ss-=2),Ms=0;for(var Bs=_s;Ms<=Ss;){var Ps=Cs.getTLVblen(ca,Bs);if((Ms+=Ps)<=Ss&&Ts.push(Bs),Bs+=Ps,Ms>=Ss)break}return Ts},It.getNthChildIdx=function(ca,ga,_s){return It.getChildIdx(ca,ga)[_s]},It.getIdxbyList=function(ca,ga,_s,Ss){var Ms,Cs,Ts=It;return _s.length==0?Ss!==void 0&&ca.substr(ga,2)!==Ss?-1:ga:(Ms=_s.shift())>=(Cs=Ts.getChildIdx(ca,ga)).length?-1:Ts.getIdxbyList(ca,Cs[Ms],_s,Ss)},It.getIdxbyListEx=function(ca,ga,_s,Ss){var Ms,Cs,Ts=It;if(_s.length==0)return Ss!==void 0&&ca.substr(ga,2)!==Ss?-1:ga;Ms=_s.shift(),Cs=Ts.getChildIdx(ca,ga);for(var Bs=0,Ps=0;Ps<Cs.length;Ps++){var Ls=ca.substr(Cs[Ps],2);if(typeof Ms=="number"&&!Ts.isContextTag(Ls)&&Bs==Ms||typeof Ms=="string"&&Ts.isContextTag(Ls,Ms))return Ts.getIdxbyListEx(ca,Cs[Ps],_s,Ss);Ts.isContextTag(Ls)||Bs++}return-1},It.getTLVbyList=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getIdxbyList(ca,ga,_s,Ss);return Cs==-1||Cs>=ca.length?null:Ms.getTLV(ca,Cs)},It.getTLVbyListEx=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getIdxbyListEx(ca,ga,_s,Ss);return Cs==-1?null:Ms.getTLV(ca,Cs)},It.getVbyList=function(ca,ga,_s,Ss,Ms){var Cs,Ts,Bs=It;return(Cs=Bs.getIdxbyList(ca,ga,_s,Ss))==-1||Cs>=ca.length?null:(Ts=Bs.getV(ca,Cs),Ms===!0&&(Ts=Ts.substr(2)),Ts)},It.getVbyListEx=function(ca,ga,_s,Ss,Ms){var Cs,Ts,Bs=It;return(Cs=Bs.getIdxbyListEx(ca,ga,_s,Ss))==-1?null:(Ts=Bs.getV(ca,Cs),ca.substr(Cs,2)=="03"&&Ms!==!1&&(Ts=Ts.substr(2)),Ts)},It.getInt=function(ca,ga,_s){_s==null&&(_s=-1);try{var Ss=ca.substr(ga,2);if(Ss!="02"&&Ss!="03")return _s;var Ms=It.getV(ca,ga);return Ss=="02"?parseInt(Ms,16):function(Cs){try{var Ts=Cs.substr(0,2);if(Ts=="00")return parseInt(Cs.substr(2),16);var Bs=parseInt(Ts,16),Ps=Cs.substr(2),Ls=parseInt(Ps,16).toString(2);return Ls=="0"&&(Ls="00000000"),Ls=Ls.slice(0,0-Bs),parseInt(Ls,2)}catch{return-1}}(Ms)}catch{return _s}},It.getOID=function(ca,ga,_s){_s==null&&(_s=null);try{return ca.substr(ga,2)!="06"?_s:function(Ss){if(!ct(Ss))return null;try{var Ms=[],Cs=Ss.substr(0,2),Ts=parseInt(Cs,16);Ms[0]=new String(Math.floor(Ts/40)),Ms[1]=new String(Ts%40);for(var Bs=Ss.substr(2),Ps=[],Ls=0;Ls<Bs.length/2;Ls++)Ps.push(parseInt(Bs.substr(2*Ls,2),16));var Rs=[],Ds="";for(Ls=0;Ls<Ps.length;Ls++)128&Ps[Ls]?Ds+=pt((127&Ps[Ls]).toString(2),7):(Ds+=pt((127&Ps[Ls]).toString(2),7),Rs.push(new String(parseInt(Ds,2))),Ds="");var $s=Ms.join(".");return Rs.length>0&&($s=$s+"."+Rs.join(".")),$s}catch{return null}}(It.getV(ca,ga))}catch{return _s}},It.getOIDName=function(ca,ga,_s){_s==null&&(_s=null);try{var Ss=It.getOID(ca,ga,_s);if(Ss==_s)return _s;var Ms=u$2.asn1.x509.OID.oid2name(Ss);return Ms==""?Ss:Ms}catch{return _s}},It.getString=function(ca,ga,_s){_s==null&&(_s=null);try{return rt(It.getV(ca,ga))}catch{return _s}},It.hextooidstr=function(ca){var ga=function(Ds,$s){return Ds.length>=$s?Ds:new Array($s-Ds.length+1).join("0")+Ds},_s=[],Ss=ca.substr(0,2),Ms=parseInt(Ss,16);_s[0]=new String(Math.floor(Ms/40)),_s[1]=new String(Ms%40);for(var Cs=ca.substr(2),Ts=[],Bs=0;Bs<Cs.length/2;Bs++)Ts.push(parseInt(Cs.substr(2*Bs,2),16));var Ps=[],Ls="";for(Bs=0;Bs<Ts.length;Bs++)128&Ts[Bs]?Ls+=ga((127&Ts[Bs]).toString(2),7):(Ls+=ga((127&Ts[Bs]).toString(2),7),Ps.push(new String(parseInt(Ls,2))),Ls="");var Rs=_s.join(".");return Ps.length>0&&(Rs=Rs+"."+Ps.join(".")),Rs},It.dump=function(ca,ga,_s,Ss){var Ms=It,Cs=Ms.getV,Ts=Ms.dump,Bs=Ms.getChildIdx,Ps=ca;ca instanceof u$2.asn1.ASN1Object&&(Ps=ca.getEncodedHex());var Ls=function(Ws,Qs){return Ws.length<=2*Qs?Ws:Ws.substr(0,Qs)+"..(total "+Ws.length/2+"bytes).."+Ws.substr(Ws.length-Qs,Qs)};ga===void 0&&(ga={ommit_long_octet:32}),_s===void 0&&(_s=0),Ss===void 0&&(Ss="");var Rs,Ds=ga.ommit_long_octet;if((Rs=Ps.substr(_s,2))=="01")return($s=Cs(Ps,_s))=="00"?Ss+`BOOLEAN FALSE
`:Ss+`BOOLEAN TRUE
`;if(Rs=="02")return Ss+"INTEGER "+Ls($s=Cs(Ps,_s),Ds)+`
`;if(Rs=="03"){var $s=Cs(Ps,_s);if(Ms.isASN1HEX($s.substr(2))){var Fs=Ss+`BITSTRING, encapsulates
`;return Fs+=Ts($s.substr(2),ga,0,Ss+"  ")}return Ss+"BITSTRING "+Ls($s,Ds)+`
`}if(Rs=="04")return $s=Cs(Ps,_s),Ms.isASN1HEX($s)?(Fs=Ss+`OCTETSTRING, encapsulates
`,Fs+=Ts($s,ga,0,Ss+"  ")):Ss+"OCTETSTRING "+Ls($s,Ds)+`
`;if(Rs=="05")return Ss+`NULL
`;if(Rs=="06"){var Gs=Cs(Ps,_s),Vs=u$2.asn1.ASN1Util.oidHexToInt(Gs),ks=u$2.asn1.x509.OID.oid2name(Vs),Os=Vs.replace(/\./g," ");return ks!=""?Ss+"ObjectIdentifier "+ks+" ("+Os+`)
`:Ss+"ObjectIdentifier ("+Os+`)
`}if(Rs=="0a")return Ss+"ENUMERATED "+parseInt(Cs(Ps,_s))+`
`;if(Rs=="0c")return Ss+"UTF8String '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="13")return Ss+"PrintableString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="14")return Ss+"TeletexString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="16")return Ss+"IA5String '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="17")return Ss+"UTCTime "+nt(Cs(Ps,_s))+`
`;if(Rs=="18")return Ss+"GeneralizedTime "+nt(Cs(Ps,_s))+`
`;if(Rs=="1a")return Ss+"VisualString '"+nt(Cs(Ps,_s))+`'
`;if(Rs=="1e")return Ss+"BMPString '"+ht(Cs(Ps,_s))+`'
`;if(Rs=="30"){if(Ps.substr(_s,4)=="3000")return Ss+`SEQUENCE {}
`;Fs=Ss+`SEQUENCE
`;var Ns=ga;if(((zs=Bs(Ps,_s)).length==2||zs.length==3)&&Ps.substr(zs[0],2)=="06"&&Ps.substr(zs[zs.length-1],2)=="04"){ks=Ms.oidname(Cs(Ps,zs[0]));var Us=JSON.parse(JSON.stringify(ga));Us.x509ExtName=ks,Ns=Us}for(var Hs=0;Hs<zs.length;Hs++)Fs+=Ts(Ps,Ns,zs[Hs],Ss+"  ");return Fs}if(Rs=="31"){Fs=Ss+`SET
`;var zs=Bs(Ps,_s);for(Hs=0;Hs<zs.length;Hs++)Fs+=Ts(Ps,ga,zs[Hs],Ss+"  ");return Fs}if((128&(Rs=parseInt(Rs,16)))!=0){var js=31&Rs;if((32&Rs)!=0){for(Fs=Ss+"["+js+`]
`,zs=Bs(Ps,_s),Hs=0;Hs<zs.length;Hs++)Fs+=Ts(Ps,ga,zs[Hs],Ss+"  ");return Fs}if($s=Cs(Ps,_s),It.isASN1HEX($s)){var Fs=Ss+"["+js+`]
`;return Fs+=Ts($s,ga,0,Ss+"  ")}return($s.substr(0,8)=="68747470"||ga.x509ExtName==="subjectAltName"&&js==2)&&($s=nt($s)),Fs=Ss+"["+js+"] "+$s+`
`}return Ss+"UNKNOWN("+Rs+") "+Cs(Ps,_s)+`
`},It.isContextTag=function(ca,ga){var _s,Ss;ca=ca.toLowerCase();try{_s=parseInt(ca,16)}catch{return-1}if(ga===void 0)return(192&_s)==128;try{return ga.match(/^\[[0-9]+\]$/)!=null&&!((Ss=parseInt(ga.substr(1,ga.length-1),10))>31)&&(192&_s)==128&&(31&_s)==Ss}catch{return!1}},It.isASN1HEX=function(ca){var ga=It;if(ca.length%2==1)return!1;var _s=ga.getVblen(ca,0),Ss=ca.substr(0,2),Ms=ga.getL(ca,0);return ca.length-Ss.length-Ms.length==2*_s},It.checkStrictDER=function(ca,ga,_s,Ss,Ms){var Cs=It;if(_s===void 0){if(typeof ca!="string")throw new Error("not hex string");if(ca=ca.toLowerCase(),!u$2.lang.String.isHex(ca))throw new Error("not hex string");_s=ca.length,Ms=(Ss=ca.length/2)<128?1:Math.ceil(Ss.toString(16))+1}if(Cs.getL(ca,ga).length>2*Ms)throw new Error("L of TLV too long: idx="+ga);var Ts=Cs.getVblen(ca,ga);if(Ts>Ss)throw new Error("value of L too long than hex: idx="+ga);var Bs=Cs.getTLV(ca,ga),Ps=Bs.length-2-Cs.getL(ca,ga).length;if(Ps!==2*Ts)throw new Error("V string length and L's value not the same:"+Ps+"/"+2*Ts);if(ga===0&&ca.length!=Bs.length)throw new Error("total length and TLV length unmatch:"+ca.length+"!="+Bs.length);var Ls=ca.substr(ga,2);if(Ls==="02"){var Rs=Cs.getVidx(ca,ga);if(ca.substr(Rs,2)=="00"&&ca.charCodeAt(Rs+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ls,16)){for(var Ds=Cs.getVblen(ca,ga),$s=0,Fs=Cs.getChildIdx(ca,ga),Gs=0;Gs<Fs.length;Gs++)$s+=Cs.getTLV(ca,Fs[Gs]).length,Cs.checkStrictDER(ca,Fs[Gs],_s,Ss,Ms);if(2*Ds!=$s)throw new Error("sum of children's TLV length and L unmatch: "+2*Ds+"!="+$s)}},It.oidname=function(ca){var ga=u$2.asn1;u$2.lang.String.isHex(ca)&&(ca=ga.ASN1Util.oidHexToInt(ca));var _s=ga.x509.OID.oid2name(ca);return _s===""&&(_s=ca),_s},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.x509!==void 0&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(ca){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERBitString,Ss=ga.DERSequence,Ms=ga.x509,Cs=Ms.TBSCertificate,Ts=Ms.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Bs){this.params=Bs},this.sign=function(){var Bs=this.params,Ps=Bs.sigalg;Bs.sigalg.name!=null&&(Ps=Bs.sigalg.name);var Ls=Bs.tbsobj.getEncodedHex(),Rs=new u$2.crypto.Signature({alg:Ps});Rs.init(Bs.cakey),Rs.updateHex(Ls),Bs.sighex=Rs.sign()},this.getPEM=function(){return at(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Bs=this.params;if(Bs.tbsobj!=null&&Bs.tbsobj!=null||(Bs.tbsobj=new Cs(Bs)),Bs.sighex==null&&Bs.cakey!=null&&this.sign(),Bs.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ps=[];return Ps.push(Bs.tbsobj),Ps.push(new Ts({name:Bs.sigalg})),Ps.push(new _s({hex:"00"+Bs.sighex})),new Ss({array:Ps}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(ca){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.x509,Ss=ga.DERTaggedObject,Ms=ga.DERInteger,Cs=ga.DERSequence,Ts=_s.AlgorithmIdentifier,Bs=_s.Time,Ps=_s.X500Name,Ls=_s.Extensions,Rs=_s.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Ds){this.params=Ds},this.getEncodedHex=function(){var Ds=[],$s=this.params;if($s.version!=null||$s.version!=1){var Fs=2;$s.version!=null&&(Fs=$s.version-1);var Gs=new Ss({obj:new Ms({int:Fs})});Ds.push(Gs)}return Ds.push(new Ms($s.serial)),Ds.push(new Ts({name:$s.sigalg})),Ds.push(new Ps($s.issuer)),Ds.push(new Cs({array:[new Bs($s.notbefore),new Bs($s.notafter)]})),Ds.push(new Ps($s.subject)),Ds.push(new Rs(Et.getKey($s.sbjpubkey))),$s.ext!==void 0&&$s.ext.length>0&&Ds.push(new Ss({tag:"a3",obj:new Ls($s.ext)})),new u$2.asn1.DERSequence({array:Ds}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(ca){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.x509;this.aParam=[],this.setByParam=function(Ms){this.aParam=Ms},this.getEncodedHex=function(){for(var Ms=[],Cs=0;Cs<this.aParam.length;Cs++){var Ts=this.aParam[Cs],Bs=Ts.extname,Ps=null;if(Ts.extn!=null)Ps=new Ss.PrivateExtension(Ts);else if(Bs=="subjectKeyIdentifier")Ps=new Ss.SubjectKeyIdentifier(Ts);else if(Bs=="keyUsage")Ps=new Ss.KeyUsage(Ts);else if(Bs=="subjectAltName")Ps=new Ss.SubjectAltName(Ts);else if(Bs=="issuerAltName")Ps=new Ss.IssuerAltName(Ts);else if(Bs=="basicConstraints")Ps=new Ss.BasicConstraints(Ts);else if(Bs=="cRLDistributionPoints")Ps=new Ss.CRLDistributionPoints(Ts);else if(Bs=="certificatePolicies")Ps=new Ss.CertificatePolicies(Ts);else if(Bs=="authorityKeyIdentifier")Ps=new Ss.AuthorityKeyIdentifier(Ts);else if(Bs=="extKeyUsage")Ps=new Ss.ExtKeyUsage(Ts);else if(Bs=="authorityInfoAccess")Ps=new Ss.AuthorityInfoAccess(Ts);else if(Bs=="cRLNumber")Ps=new Ss.CRLNumber(Ts);else if(Bs=="cRLReason")Ps=new Ss.CRLReason(Ts);else if(Bs=="ocspNonce")Ps=new Ss.OCSPNonce(Ts);else if(Bs=="ocspNoCheck")Ps=new Ss.OCSPNoCheck(Ts);else if(Bs=="adobeTimeStamp")Ps=new Ss.AdobeTimeStamp(Ts);else{if(Bs!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Ts));Ps=new Ss.SubjectDirectoryAttributes(Ts)}Ps!=null&&Ms.push(Ps)}return new _s({array:Ms}).getEncodedHex()},ca!=null&&this.setByParam(ca)},At(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(ca){u$2.asn1.x509.Extension.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERObjectIdentifier,Ss=ga.DEROctetString;ga.DERBitString;var Ms=ga.DERBoolean,Cs=ga.DERSequence;this.getEncodedHex=function(){var Ts=new _s({oid:this.oid}),Bs=new Ss({hex:this.getExtnValueHex()}),Ps=new Array;return Ps.push(Ts),this.critical&&Ps.push(new Ms),Ps.push(Bs),new Cs({array:Ps}).getEncodedHex()},this.critical=!1,ca!==void 0&&ca.critical!==void 0&&(this.critical=ca.critical)},At(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(ca){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,ca);var ga=Mt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",ca!==void 0&&(ca.bin!==void 0&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(ca)),ca.names!==void 0&&ca.names.length!==void 0)){for(var _s=ca.names,Ss="000000000",Ms=0;Ms<_s.length;Ms++)for(var Cs=0;Cs<ga.length;Cs++)_s[Ms]===ga[Cs]&&(Ss=Ss.substring(0,Cs)+"1"+Ss.substring(Cs+1,Ss.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:Ss})}},At(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(ca){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERBoolean,Ss=ga.DERInteger,Ms=ga.DERSequence;this.getExtnValueHex=function(){var Cs=new Array;this.cA&&Cs.push(new _s),this.pathLen>-1&&Cs.push(new Ss({int:this.pathLen}));var Ts=new Ms({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,ca!==void 0&&(ca.cA!==void 0&&(this.cA=ca.cA),ca.pathLen!==void 0&&(this.pathLen=ca.pathLen))},At(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(ca){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Ss){for(var Ms=[],Cs=0;Cs<Ss.length;Cs++)if(Ss[Cs]instanceof u$2.asn1.ASN1Object)Ms.push(Ss[Cs]);else{var Ts=new _s.DistributionPoint(Ss[Cs]);Ms.push(Ts)}this.asn1ExtnValue=new ga.DERSequence({array:Ms})},this.setByOneURI=function(Ss){var Ms=new _s.DistributionPoint({fulluri:Ss});this.setByDPArray([Ms])},this.oid="2.5.29.31",ca!==void 0&&(ca.array!==void 0?this.setByDPArray(ca.array):ca.uri!==void 0&&this.setByOneURI(ca.uri))},At(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(ca){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.x509.DistributionPointName;this.getEncodedHex=function(){var Ss=new ga.DERSequence;if(this.asn1DP!=null){var Ms=new ga.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Ss.appendASN1Object(Ms)}return this.hTLV=Ss.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.dpobj!==void 0?this.asn1DP=ca.dpobj:ca.dpname!==void 0?this.asn1DP=new _s(ca.dpname):ca.fulluri!==void 0&&(this.asn1DP=new _s({full:[{uri:ca.fulluri}]})))},At(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(ca){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _s({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},ca!==void 0)if(ga.x509.GeneralNames.prototype.isPrototypeOf(ca))this.type="full",this.tag="a0",this.asn1V=ca;else{if(ca.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new ga.x509.GeneralNames(ca.full)}},At(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(ca){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.x509,Ss=ga.DERSequence,Ms=_s.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++)Cs.push(new Ms(this.params.array[Ts]));var Bs=new Ss({array:Cs});return this.asn1ExtnValue=Bs,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(ca){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERObjectIdentifier,Ms=ga.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Cs=[new Ss(this.params.policyoid)];if(this.params.array!==void 0){for(var Ts=[],Bs=0;Bs<this.params.array.length;Bs++)Ts.push(new Ms(this.params.array[Bs]));Ts.length>0&&Cs.push(new _s({array:Ts}))}return new _s({array:Cs}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(ca){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERIA5String,Ms=ga.DERObjectIdentifier,Cs=ga.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.1"}),new Ss({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new _s({array:[new Ms({oid:"1.3.6.1.5.5.7.2.2"}),new Cs(this.params.unotice)]}).getEncodedHex():void 0},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(ca){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,ca);var ga=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var _s=u$2.asn1.x509.DisplayText,Ss=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Ms=[];return this.params.noticeref!==void 0&&Ms.push(new Ss(this.params.noticeref)),this.params.exptext!==void 0&&Ms.push(new _s(this.params.exptext)),new ga({array:Ms}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(ca){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,ca);var ga=u$2.asn1.DERSequence,_s=u$2.asn1.DERInteger,Ss=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Ms=[];if(this.params.org!==void 0&&Ms.push(new Ss(this.params.org)),this.params.noticenum!==void 0){for(var Cs=[],Ts=this.params.noticenum,Bs=0;Bs<Ts.length;Bs++)Cs.push(new _s(Ts[Bs]));Ms.push(new ga({array:Cs}))}if(Ms.length==0)throw new Error("parameter is empty");return new ga({array:Ms}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(ca){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,ca),this.hT="0c",ca!==void 0&&(ca.type==="ia5"?this.hT="16":ca.type==="vis"?this.hT="1a":ca.type==="bmp"&&(this.hT="1e"))},At(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(ca){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,ca);var ga=u$2.asn1;this.setPurposeArray=function(_s){this.asn1ExtnValue=new ga.DERSequence;for(var Ss=0;Ss<_s.length;Ss++){var Ms=new ga.DERObjectIdentifier(_s[Ss]);this.asn1ExtnValue.appendASN1Object(Ms)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",ca!==void 0&&ca.array!==void 0&&this.setPurposeArray(ca.array)},At(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(ca){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$2,_s=ga.asn1,Ss=_s.DERTaggedObject,Ms=_s.x509.GeneralNames;ga.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Cs=new Array;this.asn1KID&&Cs.push(new Ss({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Cs.push(new Ss({explicit:!1,tag:"a1",obj:new Ms([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Cs.push(new Ss({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Ts=new _s.DERSequence({array:Cs});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Cs){if(Cs.str!==void 0||Cs.hex!==void 0)this.asn1KID=new u$2.asn1.DEROctetString(Cs);else if(typeof Cs=="object"&&u$2.crypto.Util.isKey(Cs)||typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1){var Ts=Cs;typeof Cs=="string"&&(Ts=Et.getKey(Cs));var Bs=Et.getKeyID(Ts);this.asn1KID=new u$2.asn1.DEROctetString({hex:Bs})}},this.setCertIssuerByParam=function(Cs){Cs.str!==void 0||Cs.ldapstr!==void 0||Cs.hex!==void 0||Cs.certsubject!==void 0||Cs.certissuer!==void 0?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(Cs):typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:Cs}))},this.setCertSNByParam=function(Cs){if(Cs.str!==void 0||Cs.bigint!==void 0||Cs.hex!==void 0)this.asn1CertSN=new u$2.asn1.DERInteger(Cs);else if(typeof Cs=="string"&&Cs.indexOf("BEGIN ")!=-1&&Cs.indexOf("CERTIFICATE")){var Ts=new Mt;Ts.readCertPEM(Cs);var Bs=Ts.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:Bs})}},this.oid="2.5.29.35",ca!==void 0&&(ca.kid!==void 0&&this.setKIDByParam(ca.kid),ca.issuer!==void 0&&this.setCertIssuerByParam(ca.issuer),ca.sn!==void 0&&this.setCertSNByParam(ca.sn),ca.issuersn!==void 0&&typeof ca.issuersn=="string"&&ca.issuersn.indexOf("BEGIN ")!=-1&&ca.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(ca.issuersn),this.setCertIssuerByParam(ca.issuersn)))},At(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(ca){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(_s){if(_s.str!==void 0||_s.hex!==void 0)this.asn1KID=new ga(_s);else if(typeof _s=="object"&&u$2.crypto.Util.isKey(_s)||typeof _s=="string"&&_s.indexOf("BEGIN")!=-1){var Ss=_s;typeof _s=="string"&&(Ss=Et.getKey(_s));var Ms=Et.getKeyID(Ss);this.asn1KID=new u$2.asn1.DEROctetString({hex:Ms})}},this.oid="2.5.29.14",ca!==void 0&&ca.kid!==void 0&&this.setKIDByParam(ca.kid)},At(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(ca){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,ca),this.setAccessDescriptionArray=function(ga){for(var _s=new Array,Ss=u$2.asn1,Ms=Ss.DERSequence,Cs=Ss.DERObjectIdentifier,Ts=Ss.x509.GeneralName,Bs=0;Bs<ga.length;Bs++){var Ps,Ls=ga[Bs];if(Ls.ocsp!==void 0)Ps=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.1"}),new Ts({uri:Ls.ocsp})]});else{if(Ls.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Ls));Ps=new Ms({array:[new Cs({oid:"1.3.6.1.5.5.7.48.2"}),new Ts({uri:Ls.caissuer})]})}_s.push(Ps)}this.asn1ExtnValue=new Ms({array:_s})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",ca!==void 0&&ca.array!==void 0&&this.setAccessDescriptionArray(ca.array)},At(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(ca){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(ca){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(ca){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.ASN1Util.newObject,Ms=ga.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Cs=[],Ts=0;Ts<this.params.array.length;Ts++){var Bs=this.params.array[Ts],Ps={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Bs.attr=="dateOfBirth")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={gentime:Bs.str};else if(Bs.attr=="placeOfBirth")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={utf8str:Bs.str};else if(Bs.attr=="gender")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str};else if(Bs.attr=="countryOfCitizenship")Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str};else{if(Bs.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Bs.attr);Ps.seq[0].oid=Ms(Bs.attr),Ps.seq[1].set[0]={prnstr:Bs.str}}Cs.push(new Ss(Ps))}var Ls=new _s({array:Cs});return this.asn1ExtnValue=Ls,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",ca!==void 0&&(this.params=ca)},At(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(ca){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,ca);var ga=u$2,_s=ga.lang.String.isHex,Ss=ga.asn1,Ms=Ss.x509.OID.name2oid,Cs=Ss.ASN1Util.newObject;this.params=null,this.setByParam=function(Ts){this.oid=Ms(Ts.extname),this.params=Ts},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Ts=this.params.extn;if(typeof Ts=="string"&&_s(Ts))return Ts;if(typeof Ts=="object")try{return Cs(Ts).getEncodedHex()}catch{}throw new Error("unsupported extn value")},ca!=null&&this.setByParam(ca)},At(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(ca){u$2.asn1.x509.CRL.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERSequence,Ss=ga.DERBitString,Ms=ga.x509,Cs=Ms.AlgorithmIdentifier,Ts=Ms.TBSCertList;this.params=void 0,this.setByParam=function(Bs){this.params=Bs},this.sign=function(){var Bs=new Ts(this.params).getEncodedHex(),Ps=new u$2.crypto.Signature({alg:this.params.sigalg});Ps.init(this.params.cakey),Ps.updateHex(Bs);var Ls=Ps.sign();this.params.sighex=Ls},this.getPEM=function(){return at(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Bs=this.params;if(Bs.tbsobj==null&&(Bs.tbsobj=new Ts(Bs)),Bs.sighex==null&&Bs.cakey!=null&&this.sign(),Bs.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ps=[];return Ps.push(Bs.tbsobj),Ps.push(new Cs({name:Bs.sigalg})),Ps.push(new Ss({hex:"00"+Bs.sighex})),new _s({array:Ps}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(ca){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERInteger,Ss=ga.DERSequence,Ms=ga.DERTaggedObject;ga.DERObjectIdentifier;var Cs=ga.x509,Ts=Cs.AlgorithmIdentifier,Bs=Cs.Time,Ps=Cs.Extensions,Ls=Cs.X500Name;this.params=null,this.setByParam=function(Rs){this.params=Rs},this.getRevCertSequence=function(){for(var Rs=[],Ds=this.params.revcert,$s=0;$s<Ds.length;$s++){var Fs=[new _s(Ds[$s].sn),new Bs(Ds[$s].date)];Ds[$s].ext!=null&&Fs.push(new Ps(Ds[$s].ext)),Rs.push(new Ss({array:Fs}))}return new Ss({array:Rs})},this.getEncodedHex=function(){var Rs=[],Ds=this.params;if(Ds.version!=null){var $s=Ds.version-1,Fs=new _s({int:$s});Rs.push(Fs)}if(Rs.push(new Ts({name:Ds.sigalg})),Rs.push(new Ls(Ds.issuer)),Rs.push(new Bs(Ds.thisupdate)),Ds.nextupdate!=null&&Rs.push(new Bs(Ds.nextupdate)),Ds.revcert!=null&&Rs.push(this.getRevCertSequence()),Ds.ext!=null){var Gs=new Ps(Ds.ext);Rs.push(new Ms({tag:"a0",explicit:!0,obj:Gs}))}return new Ss({array:Rs}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(ca){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var ga=u$2.asn1;this.setCertSerial=function(_s){this.sn=new ga.DERInteger(_s)},this.setRevocationDate=function(_s){this.time=new ga.x509.Time(_s)},this.getEncodedHex=function(){var _s=new ga.DERSequence({array:[this.sn,this.time]});return this.TLV=_s.getEncodedHex(),this.TLV},ca!==void 0&&(ca.time!==void 0&&this.setRevocationDate(ca.time),ca.sn!==void 0&&this.setCertSerial(ca.sn))},At(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(ca){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(ca){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(ca){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(ca){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",ca!=null&&(this.params=ca)},At(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(ca){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,ca);var ga=u$2.asn1,_s=ga.DERInteger,Ss=ga.DERBoolean,Ms=ga.DERSequence,Cs=ga.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Ts=this.params,Bs=[new _s(1)];return Bs.push(new Cs({uri:Ts.uri})),Ts.reqauth!=null&&Bs.push(new Ss(Ts.reqauth)),this.asn1ExtnValue=new Ms({array:Bs}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(ca){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$2.asn1,_s=ga.x509,Ss=_s.RDN;this.setByString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=Ms.split("/");Ts.shift();for(var Bs=[],Ps=0;Ps<Ts.length;Ps++)if(Ts[Ps].match(/^[^=]+=.+$/))Bs.push(Ts[Ps]);else{var Ls=Bs.length-1;Bs[Ls]=Bs[Ls]+"/"+Ts[Ps]}for(Ps=0;Ps<Bs.length;Ps++)this.asn1Array.push(new Ss({str:Bs[Ps],rule:this.sRule}))},this.setByLdapString=function(Ms,Cs){Cs!==void 0&&(this.sRule=Cs);var Ts=_s.X500Name.ldapToCompat(Ms);this.setByString(Ts,Cs)},this.setByObject=function(Ms,Cs){for(var Ts in Cs!==void 0&&(this.sRule=Cs),Ms)if(Ms.hasOwnProperty(Ts)){var Bs=new Ss({str:Ts+"="+Ms[Ts],rule:this.sRule});this.asn1Array?this.asn1Array.push(Bs):this.asn1Array=[Bs]}},this.setByParam=function(Ms){var Cs;Ms.rule!==void 0&&(this.sRule=Ms.rule),Ms.array!==void 0?this.paramArray=Ms.array:Ms.str!==void 0?this.setByString(Ms.str):Ms.ldapstr!==void 0?this.setByLdapString(Ms.ldapstr):Ms.hex!==void 0?this.hTLV=Ms.hex:Ms.certissuer!==void 0?((Cs=new Mt).readCertPEM(Ms.certissuer),this.hTLV=Cs.getIssuerHex()):Ms.certsubject!==void 0?((Cs=new Mt).readCertPEM(Ms.certsubject),this.hTLV=Cs.getSubjectHex()):typeof Ms=="object"&&Ms.certsubject===void 0&&Ms.certissuer===void 0&&this.setByObject(Ms)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Ms=0;Ms<this.paramArray.length;Ms++){var Cs={array:this.paramArray[Ms]};this.sRule!="utf8"&&(Cs.rule=this.sRule);var Ts=new Ss(Cs);this.asn1Array.push(Ts)}var Bs=new ga.DERSequence({array:this.asn1Array});return this.hTLV=Bs.getEncodedHex(),this.hTLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(ca){if(ca.substr(0,1)!=="/")throw"malformed input";var ga=(ca=ca.substr(1)).split("/");return ga.reverse(),(ga=ga.map(function(_s){return _s.replace(/,/,"\\,")})).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(ca){return u$2.asn1.x509.X500Name.compatToLDAP(ca)},u$2.asn1.x509.X500Name.ldapToCompat=function(ca){for(var ga=ca.split(","),_s=!1,Ss=[],Ms=0;ga.length>0;Ms++){var Cs=ga.shift();if(_s===!0){var Ts=(Ss.pop()+","+Cs).replace(/\\,/g,",");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}return(Ss=Ss.map(function(Bs){return Bs.replace("/","\\/")})).reverse(),"/"+Ss.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(ca){return u$2.asn1.x509.X500Name.ldapToCompat(ca)},u$2.asn1.x509.RDN=function(ca){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(_s){_s.rule!==void 0&&(this.sRule=_s.rule),_s.str!==void 0&&this.addByMultiValuedString(_s.str),_s.array!==void 0&&(this.paramArray=_s.array)},this.addByString=function(_s){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:_s,rule:this.sRule}))},this.addByMultiValuedString=function(_s){for(var Ss=u$2.asn1.x509.RDN.parseString(_s),Ms=0;Ms<Ss.length;Ms++)this.addByString(Ss[Ms])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var _s=0;_s<this.paramArray.length;_s++){var Ss=this.paramArray[_s];Ss.rule!==void 0&&this.sRule!="utf8"&&(Ss.rule=this.sRule);var Ms=new ga(Ss);this.asn1Array.push(Ms)}var Cs=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=Cs.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(ca){for(var ga=ca.split(/\+/),_s=!1,Ss=[],Ms=0;ga.length>0;Ms++){var Cs=ga.shift();if(_s===!0){var Ts=(Ss.pop()+"+"+Cs).replace(/\\\+/g,"+");Ss.push(Ts),_s=!1}else Ss.push(Cs);Cs.substr(-1,1)==="\\"&&(_s=!0)}var Bs=!1,Ps=[];for(Ms=0;Ss.length>0;Ms++){if(Cs=Ss.shift(),Bs===!0){var Ls=Ps.pop();Cs.match(/"$/)?(Ts=(Ls+"+"+Cs).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Ps.push(Ts),Bs=!1):Ps.push(Ls+"+"+Cs)}else Ps.push(Cs);Cs.match(/^[^=]+="/)&&(Bs=!0)}return Ps},u$2.asn1.x509.AttributeTypeAndValue=function(ca){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var ga=u$2,_s=ga.asn1,Ss=_s.DERSequence,Ms=_s.DERUTF8String,Cs=_s.DERPrintableString,Ts=_s.DERTeletexString,Bs=_s.DERIA5String,Ps=_s.DERVisibleString,Ls=_s.DERBMPString,Rs=ga.lang.String.isMail,Ds=ga.lang.String.isPrintable;this.setByParam=function($s){if($s.rule!==void 0&&(this.sRule=$s.rule),$s.ds!==void 0&&(this.dsType=$s.ds),$s.value===void 0&&$s.str!==void 0){var Fs=$s.str.match(/^([^=]+)=(.+)$/);if(!Fs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Fs[1],this.sValue=Fs[2]}else this.sType=$s.type,this.sValue=$s.value},this.setByString=function($s,Fs){Fs!==void 0&&(this.sRule=Fs);var Gs=$s.match(/^([^=]+)=(.+)$/);if(!Gs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Gs[1],Gs[2])},this._getDsType=function(){var $s=this.sType,Fs=this.sValue,Gs=this.sRule;return Gs==="prn"?$s=="CN"&&Rs(Fs)?"ia5":Ds(Fs)?"prn":"utf8":Gs==="utf8"?$s=="CN"&&Rs(Fs)?"ia5":$s=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function($s,Fs,Gs){Gs!==void 0&&(this.sRule=Gs),this.sType=$s,this.sValue=Fs},this.getValueObj=function($s,Fs){if($s=="utf8")return new Ms({str:Fs});if($s=="prn")return new Cs({str:Fs});if($s=="tel")return new Ts({str:Fs});if($s=="ia5")return new Bs({str:Fs});if($s=="vis")return new Ps({str:Fs});if($s=="bmp")return new Ls({str:Fs});throw new Error("unsupported directory string type: type="+$s+" value="+Fs)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var $s=u$2.asn1.x509.OID.atype2obj(this.sType),Fs=this.getValueObj(this.dsType,this.sValue),Gs=new Ss({array:[$s,Fs]});return this.TLV=Gs.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(ca){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var ga=u$2,_s=ga.asn1,Ss=_s.DERInteger,Ms=_s.DERBitString,Cs=_s.DERObjectIdentifier,Ts=_s.DERSequence,Bs=_s.ASN1Util.newObject,Ps=_s.x509.AlgorithmIdentifier,Ls=ga.crypto;Ls.ECDSA,Ls.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Ts({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Rs=this.getASN1Object();return this.hTLV=Rs.getEncodedHex(),this.hTLV},this.setPubKey=function(Rs){try{if(Rs instanceof X){var Ds=Bs({seq:[{int:{bigint:Rs.n}},{int:{int:Rs.e}}]}).getEncodedHex();this.asn1AlgId=new Ps({name:"rsaEncryption"}),this.asn1SubjPKey=new Ms({hex:"00"+Ds})}}catch{}try{if(Rs instanceof u$2.crypto.ECDSA){var $s=new Cs({name:Rs.curveName});this.asn1AlgId=new Ps({name:"ecPublicKey",asn1params:$s}),this.asn1SubjPKey=new Ms({hex:"00"+Rs.pubKeyHex})}}catch{}try{if(Rs instanceof u$2.crypto.DSA){$s=new Bs({seq:[{int:{bigint:Rs.p}},{int:{bigint:Rs.q}},{int:{bigint:Rs.g}}]}),this.asn1AlgId=new Ps({name:"dsa",asn1params:$s});var Fs=new Ss({bigint:Rs.y});this.asn1SubjPKey=new Ms({hex:"00"+Fs.getEncodedHex()})}}catch{}},ca!==void 0&&this.setPubKey(ca)},At(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(ca){u$2.asn1.x509.Time.superclass.constructor.call(this);var ga=u$2.asn1,_s=ga.DERUTCTime,Ss=ga.DERGeneralizedTime;this.setTimeParams=function(Ms){this.timeParams=Ms},this.getEncodedHex=function(){var Ms=null;return Ms=this.timeParams!=null?this.type=="utc"?new _s(this.timeParams):new Ss(this.timeParams):this.type=="utc"?new _s:new Ss,this.TLV=Ms.getEncodedHex(),this.TLV},this.type="utc",ca!==void 0&&(ca.type!==void 0?this.type=ca.type:ca.str!==void 0&&(ca.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),ca.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=ca)},At(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(ca){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var ga=u$2.asn1,_s=ga.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Ms=null;for(var Cs in _s)Cs===this.nameAlg&&(Ms=_s[Cs]);if(Ms!==null)return this.hTLV=Ms,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=ga.x509.OID.name2obj(this.nameAlg));var Ts=[this.asn1Alg];this.asn1Params!==null&&Ts.push(this.asn1Params);var Bs=new ga.DERSequence({array:Ts});return this.hTLV=Bs.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.name!==void 0&&(this.nameAlg=ca.name),ca.asn1params!==void 0&&(this.asn1Params=ca.asn1params),ca.paramempty!==void 0&&(this.paramEmpty=ca.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Ss=this.nameAlg.toLowerCase();Ss.substr(-7,7)!=="withdsa"&&Ss.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new ga.DERNull)}},At(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(ca){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var ga={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},_s=u$2.asn1;_s.DERSequence;var Ss=_s.DEROctetString,Ms=_s.DERIA5String,Cs=_s.DERTaggedObject,Ts=_s.ASN1Object,Bs=_s.x509.X500Name,Ps=ut;this.explicit=!1,this.setByParam=function(Ls){var Rs=null;if(Ls!==void 0){if(Ls.rfc822!==void 0&&(this.type="rfc822",Rs=new Ms({str:Ls[this.type]})),Ls.dns!==void 0&&(this.type="dns",Rs=new Ms({str:Ls[this.type]})),Ls.uri!==void 0&&(this.type="uri",Rs=new Ms({str:Ls[this.type]})),Ls.dn!==void 0&&(this.type="dn",this.explicit=!0,Rs=typeof Ls.dn=="string"?new Bs({str:Ls.dn}):Ls.dn instanceof u$2.asn1.x509.X500Name?Ls.dn:new Bs(Ls.dn)),Ls.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Rs=new Bs({ldapstr:Ls.ldapdn})),Ls.certissuer!==void 0){this.type="dn",this.explicit=!0;var Ds=null;if((Fs=Ls.certissuer).match(/^[0-9A-Fa-f]+$/),Fs.indexOf("-----BEGIN ")!=-1&&(Ds=Ps(Fs)),Ds==null)throw"certissuer param not cert";(Gs=new Mt).hex=Ds;var $s=Gs.getIssuerHex();(Rs=new Ts).hTLV=$s}if(Ls.certsubj!==void 0){this.type="dn",this.explicit=!0;var Fs,Gs;if(Ds=null,(Fs=Ls.certsubj).match(/^[0-9A-Fa-f]+$/),Fs.indexOf("-----BEGIN ")!=-1&&(Ds=Ps(Fs)),Ds==null)throw"certsubj param not cert";(Gs=new Mt).hex=Ds,$s=Gs.getSubjectHex(),(Rs=new Ts).hTLV=$s}if(Ls.ip!==void 0){this.type="ip",this.explicit=!1;var Vs,ks=Ls.ip,Os="malformed IP address";if(ks.match(/^[0-9.]+[.][0-9.]+$/)){if((Vs=function(Ns){Ns=(Ns=(Ns=Ns.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return Ns.split(/,/).map(function(Us,Hs,zs){var js=parseInt(Us);if(js<0||255<js)throw"integer not in range 0-255";return("00"+js.toString(16)).slice(-2)}).join("")}catch(Us){throw"malformed integer array string: "+Us}}("["+ks.split(".").join(",")+"]")).length!==8)throw Os}else if(ks.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))Vs=function(Ns){var Us="malformed IPv6 address";if(!Ns.match(/^[0-9A-Fa-f:]+$/))throw Us;var Hs=(Ns=Ns.toLowerCase()).split(":").length-1;if(Hs<2)throw Us;var zs=":".repeat(7-Hs+2),js=(Ns=Ns.replace("::",zs)).split(":");if(js.length!=8)throw Us;for(var Ws=0;Ws<8;Ws++)js[Ws]=("0000"+js[Ws]).slice(-4);return js.join("")}(ks);else{if(!ks.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Os;Vs=ks}Rs=new Ss({hex:Vs})}if(this.type==null)throw"unsupported type in params="+Ls;this.asn1Obj=new Cs({explicit:this.explicit,tag:ga[this.type],obj:Rs})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(ca){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var ga=u$2.asn1;this.setByParamArray=function(_s){for(var Ss=0;Ss<_s.length;Ss++){var Ms=new ga.x509.GeneralName(_s[Ss]);this.asn1Array.push(Ms)}},this.getEncodedHex=function(){return new ga.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,ca!==void 0&&this.setByParamArray(ca)},At(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(ca){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];if(this.name2oidList[ga]===void 0)throw"Name of ObjectIdentifier not defined: "+ga;var _s=this.name2oidList[ga],Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[ga]=Ss,Ss},this.atype2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];var _s;if(ga.match(/^\d+\.\d+\.[0-9.]+$/))_s=ga;else if(this.atype2oidList[ga]!==void 0)_s=this.atype2oidList[ga];else{if(this.name2oidList[ga]===void 0)throw"AttributeType name undefined: "+ga;_s=this.name2oidList[ga]}var Ss=new u$2.asn1.DERObjectIdentifier({oid:_s});return this.objCache[ga]=Ss,Ss}},u$2.asn1.x509.OID.oid2name=function(ca){var ga=u$2.asn1.x509.OID.name2oidList;for(var _s in ga)if(ga[_s]==ca)return _s;return""},u$2.asn1.x509.OID.oid2atype=function(ca){var ga=u$2.asn1.x509.OID.atype2oidList;for(var _s in ga)if(ga[_s]==ca)return _s;return ca},u$2.asn1.x509.OID.name2oid=function(ca){if(ca.match(/^[0-9.]+$/))return ca;var ga=u$2.asn1.x509.OID.name2oidList;return ga[ca]===void 0?"":ga[ca]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(ca){var ga=u$2.asn1.x509;return ga.TBSCertificate,new ga.Certificate(ca).getPEM()},X.getPosArrayOfChildrenFromHex=function(ca){return It.getChildIdx(ca,0)},X.getHexValueArrayOfChildrenFromHex=function(ca){var ga,_s=It.getV,Ss=_s(ca,(ga=X.getPosArrayOfChildrenFromHex(ca))[0]),Ms=_s(ca,ga[1]),Cs=_s(ca,ga[2]),Ts=_s(ca,ga[3]),Bs=_s(ca,ga[4]),Ps=_s(ca,ga[5]),Ls=_s(ca,ga[6]),Rs=_s(ca,ga[7]),Ds=_s(ca,ga[8]);return(ga=new Array).push(Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds),ga},X.prototype.readPrivateKeyFromPEMString=function(ca){var ga=ut(ca),_s=X.getHexValueArrayOfChildrenFromHex(ga);this.setPrivateEx(_s[1],_s[2],_s[3],_s[4],_s[5],_s[6],_s[7],_s[8])},X.prototype.readPKCS5PrvKeyHex=function(ca){var ga=X.getHexValueArrayOfChildrenFromHex(ca);this.setPrivateEx(ga[1],ga[2],ga[3],ga[4],ga[5],ga[6],ga[7],ga[8])},X.prototype.readPKCS8PrvKeyHex=function(ca){var ga,_s,Ss,Ms,Cs,Ts,Bs,Ps,Ls=It,Rs=Ls.getVbyListEx;if(Ls.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");try{ga=Rs(ca,0,[2,0,1],"02"),_s=Rs(ca,0,[2,0,2],"02"),Ss=Rs(ca,0,[2,0,3],"02"),Ms=Rs(ca,0,[2,0,4],"02"),Cs=Rs(ca,0,[2,0,5],"02"),Ts=Rs(ca,0,[2,0,6],"02"),Bs=Rs(ca,0,[2,0,7],"02"),Ps=Rs(ca,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(ga,_s,Ss,Ms,Cs,Ts,Bs,Ps)},X.prototype.readPKCS5PubKeyHex=function(ca){var ga=It,_s=ga.getV;if(ga.isASN1HEX(ca)===!1)throw new Error("keyHex is not ASN.1 hex string");var Ss=ga.getChildIdx(ca,0);if(Ss.length!==2||ca.substr(Ss[0],2)!=="02"||ca.substr(Ss[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Ms=_s(ca,Ss[0]),Cs=_s(ca,Ss[1]);this.setPublic(Ms,Cs)},X.prototype.readPKCS8PubKeyHex=function(ca){var ga=It;if(ga.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");if(ga.getTLVbyListEx(ca,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var _s=ga.getTLVbyListEx(ca,0,[1,0]);this.readPKCS5PubKeyHex(_s)},X.prototype.readCertPubKeyHex=function(ca,ga){var _s,Ss;(_s=new Mt).readCertHex(ca),Ss=_s.getPublicKeyHex(),this.readPKCS8PubKeyHex(Ss)},X.prototype.sign=function(ca,ga){var _s,Ss=(_s=ca,u$2.crypto.Util.hashString(_s,ga));return this.signWithMessageHash(Ss,ga)},X.prototype.signWithMessageHash=function(ca,ga){var _s=G(u$2.crypto.Util.getPaddedDigestInfoHex(ca,ga,this.n.bitLength()),16);return Ct(this.doPrivate(_s).toString(16),this.n.bitLength())},X.prototype.signPSS=function(ca,ga,_s){var Ss,Ms=(Ss=ot(ca),u$2.crypto.Util.hashHex(Ss,ga));return _s===void 0&&(_s=-1),this.signWithMessageHashPSS(Ms,ga,_s)},X.prototype.signWithMessageHashPSS=function(ca,ga,_s){var Ss,Ms=rt(ca),Cs=Ms.length,Ts=this.n.bitLength()-1,Bs=Math.ceil(Ts/8),Ps=function(ks){return u$2.crypto.Util.hashHex(ks,ga)};if(_s===-1||_s===void 0)_s=Cs;else if(_s===-2)_s=Bs-Cs-2;else if(_s<-2)throw new Error("invalid salt length");if(Bs<Cs+_s+2)throw new Error("data too long");var Ls="";_s>0&&(Ls=new Array(_s),new U().nextBytes(Ls),Ls=String.fromCharCode.apply(String,Ls));var Rs=rt(Ps(ot("\0\0\0\0\0\0\0\0"+Ms+Ls))),Ds=[];for(Ss=0;Ss<Bs-_s-Cs-2;Ss+=1)Ds[Ss]=0;var $s=String.fromCharCode.apply(String,Ds)+""+Ls,Fs=St(Rs,$s.length,Ps),Gs=[];for(Ss=0;Ss<$s.length;Ss+=1)Gs[Ss]=$s.charCodeAt(Ss)^Fs.charCodeAt(Ss);var Vs=65280>>8*Bs-Ts&255;for(Gs[0]&=~Vs,Ss=0;Ss<Cs;Ss++)Gs.push(Rs.charCodeAt(Ss));return Gs.push(188),Ct(this.doPrivate(new c$2(Gs)).toString(16),this.n.bitLength())},X.prototype.verify=function(ca,ga){if((ga=ga.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var _s=G(ga,16),Ss=this.n.bitLength();if(_s.bitLength()>Ss)return!1;var Ms=this.doPublic(_s).toString(16);if(Ms.length+3!=Ss/4)return!1;var Cs=Bt(Ms.replace(/^1f+00/,""));if(Cs.length==0)return!1;var Ts,Bs=Cs[0];return Cs[1]==(Ts=ca,u$2.crypto.Util.hashString(Ts,Bs))},X.prototype.verifyWithMessageHash=function(ca,ga){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var _s=G(ga,16);if(_s.bitLength()>this.n.bitLength())return 0;var Ss=Bt(this.doPublic(_s).toString(16).replace(/^1f+00/,""));return Ss.length!=0&&(Ss[0],Ss[1]==ca)},X.prototype.verifyPSS=function(ca,ga,_s,Ss){var Ms=function(Cs){return u$2.crypto.Util.hashHex(Cs,_s)}(ot(ca));return Ss===void 0&&(Ss=-1),this.verifyWithMessageHashPSS(Ms,ga,_s,Ss)},X.prototype.verifyWithMessageHashPSS=function(ca,ga,_s,Ss){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var Ms,Cs=new c$2(ga,16),Ts=function(Ns){return u$2.crypto.Util.hashHex(Ns,_s)},Bs=rt(ca),Ps=Bs.length,Ls=this.n.bitLength()-1,Rs=Math.ceil(Ls/8);if(Ss===-1||Ss===void 0)Ss=Ps;else if(Ss===-2)Ss=Rs-Ps-2;else if(Ss<-2)throw new Error("invalid salt length");if(Rs<Ps+Ss+2)throw new Error("data too long");var Ds=this.doPublic(Cs).toByteArray();for(Ms=0;Ms<Ds.length;Ms+=1)Ds[Ms]&=255;for(;Ds.length<Rs;)Ds.unshift(0);if(Ds[Rs-1]!==188)throw new Error("encoded message does not end in 0xbc");var $s=(Ds=String.fromCharCode.apply(String,Ds)).substr(0,Rs-Ps-1),Fs=Ds.substr($s.length,Ps),Gs=65280>>8*Rs-Ls&255;if(($s.charCodeAt(0)&Gs)!=0)throw new Error("bits beyond keysize not zero");var Vs=St(Fs,$s.length,Ts),ks=[];for(Ms=0;Ms<$s.length;Ms+=1)ks[Ms]=$s.charCodeAt(Ms)^Vs.charCodeAt(Ms);ks[0]&=~Gs;var Os=Rs-Ps-Ss-2;for(Ms=0;Ms<Os;Ms+=1)if(ks[Ms]!==0)throw new Error("leftmost octets not zero");if(ks[Os]!==1)throw new Error("0x01 marker not found");return Fs===rt(Ts(ot("\0\0\0\0\0\0\0\0"+Bs+String.fromCharCode.apply(String,ks.slice(-Ss)))))},X.SALT_LEN_HLEN=-1,X.SALT_LEN_MAX=-2,X.SALT_LEN_RECOVER=-2,Mt.hex2dn=function(ca,ga){ga===void 0&&(ga=0);var _s=new Mt;return It.getTLV(ca,ga),_s.getX500Name(ca).str},Mt.hex2rdn=function(ca,ga){if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="31")throw new Error("malformed RDN");for(var _s=new Array,Ss=It.getChildIdx(ca,ga),Ms=0;Ms<Ss.length;Ms++)_s.push(Mt.hex2attrTypeValue(ca,Ss[Ms]));return(_s=_s.map(function(Cs){return Cs.replace("+","\\+")})).join("+")},Mt.hex2attrTypeValue=function(ca,ga){var _s=It,Ss=_s.getV;if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="30")throw new Error("malformed attribute type and value");var Ms=_s.getChildIdx(ca,ga);Ms.length!==2||ca.substr(Ms[0],2);var Cs=Ss(ca,Ms[0]),Ts=u$2.asn1.ASN1Util.oidHexToInt(Cs);return u$2.asn1.x509.OID.oid2atype(Ts)+"="+rt(Ss(ca,Ms[1]))},Mt.getPublicKeyFromCertHex=function(ca){var ga=new Mt;return ga.readCertHex(ca),ga.getPublicKey()},Mt.getPublicKeyFromCertPEM=function(ca){var ga=new Mt;return ga.readCertPEM(ca),ga.getPublicKey()},Mt.getPublicKeyInfoPropOfCertPEM=function(ca){var ga,_s,Ss=It.getVbyList,Ms={};return Ms.algparam=null,(ga=new Mt).readCertPEM(ca),_s=ga.getPublicKeyHex(),Ms.keyhex=Ss(_s,0,[1],"03").substr(2),Ms.algoid=Ss(_s,0,[0,0],"06"),Ms.algoid==="2a8648ce3d0201"&&(Ms.algparam=Ss(_s,0,[0,1],"06")),Ms},Mt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Tt,Qt=[(Tt=new Mt,Tt.readCertPEM(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Tt)];function Rt(ca,ga){var _s=ca.getIssuerHex();if(_s===ca.getSubjectHex())return ca.verifySignature(ca.getPublicKey());var Ss=function(Ms,Cs){for(var Ts=0,Bs=Cs;Ts<Bs.length;Ts++){var Ps=Bs[Ts];if(Ps.getSubjectHex()===Ms)return Ps}}(_s,ga);return!!Ss&&ca.verifySignature(Ss.getPublicKey())!==!1&&Rt(Ss,ga)}function Dt(ca){return ca.getIssuerHex()!==ca.getSubjectHex()&&Rt(ca,Qt)}(function(ca){var ga=new Mt;typeof ca=="string"?ga.readCertPEM(ca):ga.readCertHex(ca.hex),Dt(ga),Qt.push(ga)})(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var kt,Ft=(kt="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(kt,">$"):Symbol(kt));function Nt(ca){return ca[Ft]||(ca[Ft]={}),ca[Ft]}var Ot=function(){function ca(){}return ca.prototype.hasListener=function(ga){var _s=Nt(this);return _s&&_s[ga]&&_s[ga].length>0},ca.prototype.on=function(ga,_s,Ss){var Ms=this,Cs=Nt(this);return Cs[ga]||(Cs[ga]=[]),Cs[ga].push([_s,Ss||!1]),function(){return Ms.off(ga,_s)}},ca.prototype.once=function(ga,_s){return this.on(ga,_s,!0)},ca.prototype.off=function(ga,_s){if(ga!==void 0){var Ss,Ms=Nt(this);if(Ms[ga]||(Ms[ga]=[]),_s!==void 0){for(var Cs=0;Cs<Ms[ga].length&&Ms[ga][Cs][0]!==_s;Cs++);Cs<Ms[ga].length&&Ms[ga].splice(Cs,1)}else Ms[ga].length=0}else(Ss=this)[Ft]||delete Ss[Ft]},ca.prototype.emit=function(ga){for(var _s=[],Ss=1;Ss<arguments.length;Ss++)_s[Ss-1]=arguments[Ss];for(var Ms=!1,Cs=Nt(this),Ts=Cs[ga]||[],Bs=0,Ps=Ts.slice();Bs<Ps.length;Bs++){var Ls=Ps[Bs],Rs=Ls[0],Ds=Ls[1],$s=Ds!==void 0&&Ds,Fs=Rs.apply(void 0,_s);$s&&this.off(ga,Rs),Fs===!1&&(Ms=!0)}return Ms},ca}();function Lt(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga]}var Vt=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),Ht=typeof performance!="undefined"?function(){return Vt+performance.now()}:function(){return Date.now()};function Kt(ca){Object.freeze(ca);var ga=typeof ca=="function",_s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(ca).forEach(function(Ss){!_s.call(ca,Ss)||ga&&(Ss==="caller"||Ss==="callee"||Ss==="arguments")||ca[Ss]===null||typeof ca[Ss]!="object"&&typeof ca[Ss]!="function"||Object.isFrozen(ca[Ss])||Kt(ca[Ss])}),ca}var zt=/^([^.]+)(\.([^.]+))*$/;function qt(ca){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(ca)}function _t(ca,ga){return zt.test(ca)&&zt.test(ga)&&function(_s,Ss){if(_s==="*")return!0;var Ms=_s.split(".").reverse(),Cs=Ss.split(".").reverse();if(Ms.length<=1)return _s===Ss;for(var Ts=0;Ts<Ms.length;Ts++)if(Ms[Ts]!==Cs[Ts])return!1;return!0}(ca,ga)}var jt=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Ut=Kt(JSON.parse(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/9-/rnyrr;w}/9-/rnyrr:pq{;p|z/-j"))),Gt=function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: response error(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}return e$2.__extends(ga,ca),ga}(Error),Wt=function(ca){function ga(_s,Ss,Ms){var Cs=ca.call(this,"[NETWORK]: response error(type: ".concat(Ss,", status: ").concat(Ms,"): ").concat(_s))||this;return Cs.httpStatus=Ms,Cs}return e$2.__extends(ga,ca),ga}(Error);(function(ca){function ga(_s,Ss){return ca.call(this,"[NETWORK]: request abort(type: ".concat(Ss,"): ").concat(_s))||this}e$2.__extends(ga,ca)})(Error);var Xt=function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: request timeout(type: ".concat(Ss,", timeout: ").concat(Ms,"ms): ").concat(_s))||this}return e$2.__extends(ga,ca),ga}(Error);function Yt(ca){for(var ga=0,_s=jt;ga<_s.length;ga++){var Ss=_s[ga],Ms=ca.match(Ss);if(Ms)return"jsonp_"+Ms[1]}return null}function Zt(ca){return Yt(ca)!==null}function Jt(ca){return jt.reduce(function(ga,_s){return ga.replace(_s,"")},ca)}function $t(ca){var ga=ca.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[2]:location.hostname}(function(ca){function ga(_s,Ss,Ms){return ca.call(this,"[NETWORK]: request forbidden(type: ".concat(Ss,", reason: ").concat(Ms,"): ").concat(_s))||this}e$2.__extends(ga,ca)})(Error);var te=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$2.__extends(ga,ca),ga}(Ot);function ee(ca,ga,_s,Ss,Ms){return ga===void 0&&(ga={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Cs,Ts){var Bs,Ps=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Ls=$t(ca),Rs=Yt(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(tu){return _t(tu,location.hostname)}).length===0&&!qt(Ls)&&Ps.filter(function(tu){return _t(tu,Ls)}).length===0){var Ds=Rs?"Script":"XMLHttpRequest",$s=new Gt(ca,Ds,"request host(".concat(Ls,") is not allowed"));return Ss($s),Ts($s),void((Bs=ga.networkSubscribe)===null||Bs===void 0||Bs.emit("network",ca,Ds,"forbidden",$s.message))}if(Rs){var Fs=window,Gs=null,Vs=!1,ks=Ht(),Os=document.createElement("script");Fs[Rs]=function(tu){var Ys,Ks,Js=Ht(),eu=Js-ks;if(delete Fs[Rs],Os.parentNode&&Os.parentNode.removeChild(Os),Gs!==null&&(window.clearTimeout(Gs),Gs=null),Vs!==!0){if(tu.indexOf("data:")!==0){var Zs=new Wt(ca,"Script",500);return Ss(Zs),Ts(Zs),void((Ys=ga.networkSubscribe)===null||Ys===void 0||Ys.emit("network",ca,"Script","error",Zs.message))}var au=tu.split(","),ru=(au[0].match(/:(.*?);/)||[])[1],su=au[1];if(ga.responseType==="arraybuffer"||ga.responseType==="blob"){for(var lu=atob(au[1]),gu=lu.length,hu=new Uint8Array(gu),wu=0;wu<gu;wu++)hu[wu]=lu.charCodeAt(wu);su=ga.responseType==="arraybuffer"?hu.buffer:new Blob([hu],{type:ru})}var Mu={body:su,meta:{source:ca,requestTime:ks,responseTime:Js,costs:eu,headers:{}}};_s(Mu),Cs(Mu),(Ks=ga.networkSubscribe)===null||Ks===void 0||Ks.emit("network",ca,"Script","ok",JSON.stringify(Mu.meta)),Vs=!0}},Os.src=ca,document.body.appendChild(Os),typeof ga.timeout=="number"&&(Gs=window.setTimeout(function(){var tu;if(Gs=null,Vs!==!0){Vs=!0;var Ys=new Xt(ca,"Script",ga.timeout||NaN);Ss(Ys),Ts(Ys),(tu=ga.networkSubscribe)===null||tu===void 0||tu.emit("network",ca,"Script","timeout",Ys.message)}},ga.timeout))}else{var Ns=Ht(),Us=!1,Hs=new XMLHttpRequest,zs=function(){Hs&&(Hs.removeEventListener("timeout",js,!1),Hs.removeEventListener("progress",Ws,!1),Hs.removeEventListener("load",Qs,!1),Hs.removeEventListener("error",qs,!1)),Hs=null,zs=Lt},js=function(){var tu;if(Us!==!0){Us=!0,zs();var Ys=new Xt(ca,"XMLHttpRequest",ga.timeout||NaN);Ss(Ys),Ts(Ys),(tu=ga.networkSubscribe)===null||tu===void 0||tu.emit("network",ca,"XMLHttpRequest","timeout",Ys.message)}},Ws=function(tu){Us!==!0&&tu.lengthComputable&&(tu.total<=0||Ms(tu.loaded/tu.total))},Qs=function(tu){var Ys;if(Us!==!0){var Ks=this.status;if(Ks===0||Ks>=200&&Ks<400){Us=!0,zs();var Js=Ht(),eu=Js-Ns,Zs=function(su){if(!su)return{};for(var lu={},gu=su.trim().split(`
`),hu=0;hu<gu.length;hu++){var wu=gu[hu],Mu=wu.indexOf(":"),du=wu.slice(0,Mu).trim().toLowerCase(),vu=wu.slice(Mu+1).trim();vu&&(lu[du]?lu[du]+=", "+vu:lu[du]=vu)}return lu}(this.getAllResponseHeaders()),au=tu.total,ru={body:this.response,meta:{source:ca,requestTime:Ns,responseTime:Js,costs:eu,headers:Zs,size:au}};_s(ru),Cs(ru),(Ys=ga.networkSubscribe)===null||Ys===void 0||Ys.emit("network",ca,"XMLHttpRequest","ok",JSON.stringify(ru.meta))}else qs.call(this)}},qs=function(){var tu;if(Us!==!0){Us=!0,zs();var Ys=new Wt(ca,"XMLHttpRequest",this.status);Ss(Ys),Ts(Ys),(tu=ga.networkSubscribe)===null||tu===void 0||tu.emit("network",ca,"XMLHttpRequest","error",Ys.message)}};Hs.addEventListener("timeout",js,!1),Hs.addEventListener("progress",Ws,!1),Hs.addEventListener("load",Qs,!1),Hs.addEventListener("error",qs,!1),ga.responseType&&(Hs.responseType=ga.responseType),typeof ga.timeout=="number"&&(Hs.timeout=ga.timeout),Hs.open("GET",ca,!0),Hs.send(null)}})}var ie={};function ne(ca,ga,_s,Ss,Ms,Cs){return ga===void 0&&(ga={}),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),new Promise(function(Ts,Bs){var Ps,Ls=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Rs=$t(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(ks){return _t(ks,location.hostname)}).length===0&&!qt(Rs)&&Ls.filter(function(ks){return _t(ks,Rs)}).length===0){var Ds=new Gt(ca,"Image","request host(".concat(Rs,") is not allowed"));return Ss(Ds),Bs(Ds),void((Ps=ga.networkSubscribe)===null||Ps===void 0||Ps.emit("network",ca,"Image","forbidden",Ds.message))}var $s=Cs!=null?Cs:new Image,Fs=Ht(),Gs=!1,Vs=null;typeof ga.timeout=="number"&&(Vs=window.setTimeout(function(){var ks;if($s.onload=Lt,$s.onerror=Lt,Vs=null,Gs!==!0){Gs=!0;var Os=new Xt(ca,"Image",ga.timeout);Ss(Os),Bs(Os),(ks=ga.networkSubscribe)===null||ks===void 0||ks.emit("network",ca,"Image","timeout",Os.message)}},ga.timeout)),$s.onload=function(){var ks;if($s.onload=Lt,$s.onerror=Lt,Vs!==null&&(clearTimeout(Vs),Vs=null),Gs!==!0){var Os=Ht();Gs=!0;var Ns={body:$s,meta:{headers:{},source:ca,requestTime:Fs,responseTime:Os,costs:Os-Fs}};Ms(1),_s(Ns),Ts(Ns),(ks=ga.networkSubscribe)===null||ks===void 0||ks.emit("network",ca,"Image","ok",JSON.stringify(Ns.meta))}},$s.onerror=function(){var ks;if($s.onload=Lt,$s.onerror=Lt,Vs!==null&&(clearTimeout(Vs),Vs=null),Gs!==!0){Gs=!0;var Os=new Wt(ca,"Image",0);Ss(Os),Bs(Os),(ks=ga.networkSubscribe)===null||ks===void 0||ks.emit("network",ca,"Image","ok",Os.message)}},Ms(0),$s.src=ca})}var re=function(){if(typeof window!="undefined"){var ca=window;return ca.requestAnimationFrame||ca.mozRequestAnimationFrame||ca.webkitRequestAnimationFrame||ca.msRequestAnimationFrame||function(ga){return setTimeout(ga,16)}}return function(ga){return setTimeout(ga,16)}}(),oe=16,se=function(){function ca(){this.frames=[],this.stoped=!1,this.time=Ht(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(ca,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new ca),this.sharedInstance},enumerable:!1,configurable:!0}),ca.getFrameTime=function(){return oe},ca.prototype.loop=function(){if(!this.stoped){var ga=Ht(),_s=ga-this.time;this.time=ga;var Ss=[];oe=_s;for(var Ms=0,Cs=this.frames;Ms<Cs.length;Ms++){var Ts=Cs[Ms];if(Ts.delay>0)Ts.delay=Ts.delay-1;else{try{Ts.callback(ga,_s)}catch(Bs){console.error(Bs)}Ts.once&&Ss.push(Ts)}}Ss.length>0&&(this.frames=this.frames.filter(function(Bs){return Ss.indexOf(Bs)===-1})),re(this.loop)}},ca.prototype.remove=function(ga){var _s=this.frames.indexOf(ga);_s>=0&&this.frames.splice(_s,1)},ca.prototype.add=function(ga,_s,Ss,Ms){var Cs=this;_s===void 0&&(_s=!1),Ss===void 0&&(Ss=0),Ms===void 0&&(Ms=5);var Ts={callback:ga,once:_s,delay:Ss,order:Ms};return this.frames.push(Ts),this.frames.sort(function(Bs,Ps){return Bs.order-Ps.order}),function(){return Cs.remove(Ts)}},ca.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},ca}(),ae="//vrlab-public.ljcdn.com/",ue="//vrlab-image[1-4].ljcdn.com/",le="//global-public.realsee-cdn.com/",he="//global-image-[1-4].realsee-cdn.com/";function ce(ca,ga){var _s,Ss=ca.split("?")[0],Ms=Ss.split(".").pop();if(Ms==="jpeg"&&(Ms="jpg"),Ms!=="png"&&Ms!=="jpg")return ca;var Cs="";if(ga.format!==void 0&&ga.format!==Ms&&(Cs+="/format/".concat(ga.format)),ga.cut!==void 0&&(Cs+="/cut/".concat(ga.cut[2],"x").concat(ga.cut[3],"x").concat(ga.cut[0],"x").concat(ga.cut[1])),ga.quality!==void 0){var Ts=(_s=ga.format)!==null&&_s!==void 0?_s:Ms;Ts&&["jpg","webp","tpg","heif","avif"].indexOf(Ts)>=0&&(Cs+="/quality/".concat(ga.quality))}if(ga.size!==void 0){var Bs=ca.match(/\/cube_(\d+)\//);(Bs?Number(Bs[1]):NaN)!==Number(ga.size)&&(Cs+="/thumbnail/".concat(ga.size,"x"))}return Cs.length&&(Cs="?imageMogr2"+Cs),Ss+Cs}function de(ca,ga){return ca.indexOf(ae)>=0?(/\.basis(\?|$)/.test(ca)&&ga.basisLoaderInitialized!==!0&&(ca=ca.replace(/\.basis(\?|$)/,".jpg$1")),ce(function(Ss,Ms){var Cs=Ms.split("."),Ts=Cs[0],Bs=Cs.slice(1);if(Ts==="texture")return Ss.replace(ae,ue.replace("[1-4]","3"));if(Ts==="pano"||Ts==="pano_luminance")switch(Bs[0],Bs[1]){case"front":case"left":case"up":return Ss.replace(ae,ue.replace("[1-4]","1"));case"down":case"right":case"back":return Ss.replace(ae,ue.replace("[1-4]","2"))}else if(Ts==="pano_tile"||Ts==="pano_tile_luminance"){Bs[0],Bs[1];var Ps=Bs[2],Ls=Bs[3],Rs=Bs[4],Ds=Math.pow(2,Number(Ps))*Number(Ls)+Number(Rs);if(!isNaN(Ds))return Ss.replace(ae,"//vr-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(Ds%2+1)))}return Ss.replace(ae,ue.replace("[1-4]","3"))}(ca,ga.key),ga)):ca.indexOf(le)>=0?(/\.basis(\?|$)/.test(ca)&&ga.basisLoaderInitialized!==!0&&(ca=ca.replace(/\.basis(\?|$)/,".jpg$1")),ce(function(Ss,Ms){var Cs=Ms.split("."),Ts=Cs[0],Bs=Cs.slice(1);if(Ts==="texture")return Ss.replace(le,he.replace("[1-4]","3"));if(Ts==="pano"||Ts==="pano_luminance")switch(Bs[0],Bs[1]){case"front":case"left":case"up":return Ss.replace(le,he.replace("[1-4]","1"));case"down":case"right":case"back":return Ss.replace(le,he.replace("[1-4]","2"))}else if(Ts==="pano_tile"||Ts==="pano_tile_luminance"){Bs[0],Bs[1];var Ps=Bs[2],Ls=Bs[3],Rs=Bs[4],Ds=Math.pow(2,Number(Ps))*Number(Ls)+Number(Rs);if(!isNaN(Ds))return Ss.replace(le,"//global-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(Ds%2+1)))}return Ss.replace(le,he.replace("[1-4]","3"))}(ca,ga.key),ga)):ca.indexOf("//test-vr-public.realsee-cdn.com/")>=0?(/\.basis(\?|$)/.test(ca)&&ga.basisLoaderInitialized!==!0&&(ca=ca.replace(/\.basis(\?|$)/,".jpg$1")),ce((_s=ca,ga.key,_s.replace("//test-vr-public.realsee-cdn.com/","//test-vr-image.realsee-cdn.com/")),ga)):ca;var _s}var pe=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.floorIndex=0,_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga}(r$2.Mesh),Ae=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.needsRender=!0,_s.enableTransparent=!0,_s}return e$2.__extends(ga,ca),ga.prototype.getTransparent=function(){return this.enableTransparent},ga.prototype.setTransparent=function(_s){this.enableTransparent=_s,this.traverse(function(Ss){Ss instanceof pe&&Ss.material.forEach(function(Ms){Ms.transparent=_s})})},ga.prototype.getMaterial=function(){var _s=null;return this.traverse(function(Ss){if(_s===null&&Ss instanceof pe){var Ms=Ss.material[0];_s={pano0:Ms.pano0,pano1:Ms.pano1,modelAlpha:Ms.modelAlpha,progress:Ms.progress,useBlackTransition:Ms.useBlackTransition,perspToOrtho:Ms.perspToOrtho,opacity:Ms.opacity}}}),_s},ga.prototype.setMaterial=function(_s){this.traverse(function(Ss){Ss instanceof pe&&Ss.material.forEach(function(Ms){_s.pano0!==void 0&&(Ms.pano0=_s.pano0),_s.pano1!==void 0&&(Ms.pano1=_s.pano1),_s.modelAlpha!==void 0&&(Ms.modelAlpha=_s.modelAlpha),_s.progress!==void 0&&(Ms.progress=_s.progress),_s.useBlackTransition!==void 0&&(Ms.useBlackTransition=_s.useBlackTransition),_s.perspToOrtho!==void 0&&(Ms.perspToOrtho=_s.perspToOrtho),_s.opacity!==void 0&&(Ms.opacity=_s.opacity)})})},ga.prototype.disposeMaterial=function(){this.traverse(function(_s){if(_s instanceof pe){var Ss=[];_s.material.forEach(function(Ms){var Cs=Ms.uniforms;Object.keys(Cs).map(function(Ts){if(/^pano\d\_/.test(Ts))Cs[Ts].value=null;else{var Bs=Cs[Ts].value;Bs&&typeof Bs.dispose=="function"&&Ss.indexOf(Bs)===-1&&(Cs[Ts].value=null,Ss.push(Bs))}}),Ms.dispose()}),Ss.forEach(function(Ms){return Ms.dispose()})}})},ga.prototype.disposeGeometry=function(){this.traverse(function(_s){_s instanceof pe&&_s.geometry.dispose()})},ga}(r$2.Group),fe=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.floorIndex=0,_s}return e$2.__extends(ga,ca),ga}(Ae),ge=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-5z|qryZnv\x07-7-n{s|zrq6;\x07\b	H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H\f`),ve=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function me(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var ye=me();ye.width=ye.height=8;var be=new r$2.Texture(ye);be.name="EMPTY_TEXTURE";var we=new r$2.CubeTexture([ye,ye,ye,ye,ye,ye]);we.name="EMPTY_CUBE_TEXTURE",be.dispose=we.dispose=function(){};var xe=Object.assign({modelAlpha:new r$2.Uniform(0),progress:new r$2.Uniform(0),pano0_map:new r$2.Uniform(we),pano0_luminanceMap:new r$2.Uniform(null),pano0_matrix:new r$2.Uniform(new r$2.Matrix4),pano1_map:new r$2.Uniform(we),pano1_luminanceMap:new r$2.Uniform(null),pano1_matrix:new r$2.Uniform(new r$2.Matrix4),modelCenter:new r$2.Uniform(new r$2.Vector3),perspToOrtho:new r$2.Uniform(0)},{exposure:new r$2.Uniform(1),emissive:new r$2.Uniform(new r$2.Color(0)),emissiveMap:new r$2.Uniform(null),specular:new r$2.Uniform(new r$2.Color(1118481)),specularMap:new r$2.Uniform(null),normalMap:new r$2.Uniform(null),bumpMap:new r$2.Uniform(null),shininess:new r$2.Uniform(30)},r$2.UniformsLib.common,r$2.UniformsLib.lights),Ee=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls;_s===void 0&&(_s={});var Rs=ca.call(this,{vertexShader:ge,fragmentShader:ve,uniforms:r$2.UniformsUtils.clone(xe),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$2.NoBlending,lights:!0})||this;return Object.defineProperties(Rs,{pano0:{get:function(){return this.uniforms.pano0_map.value===we?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Ds){Ds===null?(this.uniforms.pano0_map.value=we,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Ds.map,this.uniforms.pano0_luminanceMap.value=Ds.luminanceMap,this.uniforms.pano0_matrix.value.copy(Ds.matrix));var $s=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==$s&&(this.defines.USE_LUMINANCE=$s,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===we?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Ds){Ds===null?(this.uniforms.pano1_map.value=we,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Ds.map,this.uniforms.pano1_luminanceMap.value=Ds.luminanceMap,this.uniforms.pano1_matrix.value.copy(Ds.matrix));var $s=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==$s&&(this.defines.USE_LUMINANCE=$s,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Ds){this.uniforms.modelAlpha.value=Ds}},progress:{get:function(){return this.uniforms.progress.value},set:function(Ds){this.uniforms.progress.value=Ds}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Ds){this.defines.USE_BLACK_TRANSITION!==Ds&&(this.defines.USE_BLACK_TRANSITION=Ds,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Ds){this.uniforms.opacity.value=Ds;var $s=Ds<1?r$2.NormalBlending:r$2.NoBlending;$s!==this.blending&&(this.blending=$s,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Ds){this.uniforms.perspToOrtho.value=Ds}}}),Rs.pano0=(Ss=_s.pano0)!==null&&Ss!==void 0?Ss:null,Rs.pano1=(Ms=_s.pano1)!==null&&Ms!==void 0?Ms:null,Rs.modelAlpha=(Cs=_s.modelAlpha)!==null&&Cs!==void 0?Cs:1,Rs.progress=(Ts=_s.progress)!==null&&Ts!==void 0?Ts:0,Rs.useBlackTransition=(Bs=_s.useBlackTransition)!==null&&Bs!==void 0&&Bs,Rs.perspToOrtho=(Ps=_s.perspToOrtho)!==null&&Ps!==void 0?Ps:0,Rs.opacity=(Ls=_s.opacity)!==null&&Ls!==void 0?Ls:1,Rs.originOpacity=1,Rs}return e$2.__extends(ga,ca),ga}(r$2.ShaderMaterial),Ie=function(ca){function ga(_s){var Ss=_s.preserveDrawingBuffer,Ms=Ss===void 0||Ss,Cs=_s.backgroundColor,Ts=Cs===void 0?1579548:Cs,Bs=_s.backgroundAlpha,Ps=Bs===void 0?1:Bs,Ls=_s.pixelRatio,Rs=Ls===void 0?1:Ls,Ds=_s.antialias,$s=Ds!==void 0&&Ds,Fs=ca.call(this,{antialias:$s,preserveDrawingBuffer:Ms,alpha:Ps<1})||this;return Fs.setPixelRatio(Rs),Fs.setClearColor(Ts,Ps),Fs.outputEncoding=r$2.sRGBEncoding,Fs.autoClear=!0,Fs}return e$2.__extends(ga,ca),ga}(r$2.WebGLRenderer),Ce=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$2.__extends(ga,ca),ga.prototype.add=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.prototype.add.apply(this,_s)},ga.prototype.remove=function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.prototype.remove.apply(this,_s)},ga}(r$2.Scene),Se=2*Math.PI,Be=Math.PI/2;function Me(ca){return ca>0&&ca<=Se?ca:(ca%Se+Se)%Se}var Pe,Te,Qe,Re,De=function(ca){function ga(_s){var Ss=ca.call(this,_s,1,.1,1e3)||this;return Ss.pose={longitude:0,latitude:0,fov:_s,distance:0,offset:new r$2.Vector3},Ss.computePose(),Ss}return e$2.__extends(ga,ca),ga.prototype.computePose=function(){var _s=this.getWorldDirection(new r$2.Vector3);return this.pose.longitude=Me(-Math.atan2(_s.x,-_s.z)),this.pose.latitude=-Math.asin(_s.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},ga.prototype.setFromPose=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps=Me((Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.pose.longitude),Ls=Math.max(1e-4-Be,Math.min(Be-1e-4,(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.pose.latitude)),Rs=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.pose.fov,Ds=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.pose.distance,$s=(Bs=_s.offset)!==null&&Bs!==void 0?Bs:this.pose.offset,Fs=function(Gs){var Vs=Math.abs(Math.cos(Gs.latitude));return new r$2.Vector3(-Math.sin(Gs.longitude)*Vs,-Math.sin(Gs.latitude),-Math.cos(Gs.longitude)*Vs)}({longitude:Ps,latitude:Ls}).normalize();return this.position.set(0,0,0),this.lookAt(Fs),this.position.add($s).sub(Fs.clone().setLength(Ds)),this.fov!==Rs&&(this.fov=Rs,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Ps,this.pose.latitude=Ls,this.pose.fov=Rs,this.pose.distance=Ds,this.pose.offset.copy($s),this},ga.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},ga}(r$2.PerspectiveCamera),ke=function(){function ca(ga,_s,Ss){this.x=ga,this.y=_s,this.z=Ss}return ca.prototype.copy=function(ga){return this.x=ga.x,this.y=ga.y,this.z=ga.z,this},ca.prototype.set=function(ga,_s,Ss){return this.x=ga,this.y=_s,this.z=Ss,this},ca.prototype.fromArray=function(ga,_s){return _s===void 0&&(_s=0),this.x=ga[_s],this.y=ga[_s+1],this.z=ga[_s+2],this},ca.prototype.add=function(ga){return this.x+=ga.x,this.y+=ga.y,this.z+=ga.z,this},ca.prototype.multiplyScalar=function(ga){return this.x*=ga,this.y*=ga,this.z*=ga,this},ca.prototype.subVectors=function(ga,_s){return this.x=ga.x-_s.x,this.y=ga.y-_s.y,this.z=ga.z-_s.z,this},ca.prototype.dot=function(ga){return this.x*ga.x+this.y*ga.y+this.z*ga.z},ca.prototype.cross=function(ga){var _s=this.x,Ss=this.y,Ms=this.z;return this.x=Ss*ga.z-Ms*ga.y,this.y=Ms*ga.x-_s*ga.z,this.z=_s*ga.y-Ss*ga.x,this},ca.prototype.crossVectors=function(ga,_s){var Ss=ga.x,Ms=ga.y,Cs=ga.z,Ts=_s.x,Bs=_s.y,Ps=_s.z;return this.x=Ms*Ps-Cs*Bs,this.y=Cs*Ts-Ss*Ps,this.z=Ss*Bs-Ms*Ts,this},ca.prototype.clone=function(){return new ca(this.x,this.y,this.z)},ca}(),Fe=function(ca,ga,_s){this.extents=ca,this.startIndex=ga,this.endIndex=_s},Ne=function(ca,ga){this.triangle=ca,this.intersectionPoint=ga},Oe=(Pe=new ke(0,0,0),Te=new ke(0,0,0),Qe=new ke(0,0,0),Re=new ke(0,0,0),function(ca,ga,_s,Ss,Ms,Cs){Te.subVectors(ga,ca),Qe.subVectors(_s,ca),Re.crossVectors(Te,Qe);var Ts,Bs=Ms.dot(Re);if(Bs>0){if(Cs)return null;Ts=1}else{if(!(Bs<0))return null;Ts=-1,Bs=-Bs}Pe.subVectors(Ss,ca);var Ps=Ts*Ms.dot(Qe.crossVectors(Pe,Qe));if(Ps<0)return null;var Ls=Ts*Ms.dot(Te.cross(Pe));if(Ls<0||Ps+Ls>Bs)return null;var Rs=-Ts*Pe.dot(Re);if(Rs<0)return null;var Ds=Rs/Bs;return new ke(0,0,0).copy(Ms).multiplyScalar(Ds).add(Ss)}),Le=function(ca,ga){this.min=ca,this.max=ga};function Ve(ca,ga,_s){var Ss=new Le(0,0);ga.x>=0?(Ss.min=(_s.extents[0]-ca.x)*ga.x,Ss.max=(_s.extents[3]-ca.x)*ga.x):(Ss.min=(_s.extents[3]-ca.x)*ga.x,Ss.max=(_s.extents[0]-ca.x)*ga.x);var Ms=new Le(0,0);if(ga.y>=0?(Ms.min=(_s.extents[1]-ca.y)*ga.y,Ms.max=(_s.extents[4]-ca.y)*ga.y):(Ms.min=(_s.extents[4]-ca.y)*ga.y,Ms.max=(_s.extents[1]-ca.y)*ga.y),Ss.min>Ms.max||Ms.min>Ss.max)return!1;Ms.min>Ss.min&&(Ss.min=Ms.min),Ms.max<Ss.max&&(Ss.max=Ms.max);var Cs=new Le(0,0);return ga.z>=0?(Cs.min=(_s.extents[2]-ca.z)*ga.z,Cs.max=(_s.extents[5]-ca.z)*ga.z):(Cs.min=(_s.extents[5]-ca.z)*ga.z,Cs.max=(_s.extents[2]-ca.z)*ga.z),!(Ss.min>Cs.max||Cs.min>Ss.max)&&(Cs.min>Ss.min&&(Ss.min=Cs.min),Cs.max<Ss.max&&(Ss.max=Cs.max),!(Ss.max<0))}function He(ca,ga,_s,Ss,Ms){if(_s>=Ss)return[0,0,0,0,0,0];for(var Cs=1/0,Ts=1/0,Bs=1/0,Ps=-1/0,Ls=-1/0,Rs=-1/0,Ds=_s,$s=void 0,Fs=void 0;Ds<Ss;Ds++)(Fs=ga[$s=6*ca[Ds]])<Cs&&(Cs=Fs),(Fs=ga[$s+1])<Ts&&(Ts=Fs),(Fs=ga[$s+2])<Bs&&(Bs=Fs),(Fs=ga[$s+3])>Ps&&(Ps=Fs),(Fs=ga[$s+4])>Ls&&(Ls=Fs),(Fs=ga[$s+5])>Rs&&(Rs=Fs);return[Cs-Ms,Ts-Ms,Bs-Ms,Ps+Ms,Ls+Ms,Rs+Ms]}var Ke=function(){function ca(){}return ca.prototype.create=function(ga){return this.trianglesArray=ga,this},ca.prototype.splitNode=function(ga){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var _s=this.trianglesArray,Ss=_s.length/9,Ms=new Uint32Array(Ss),Cs=new Float32Array(6*Ss),Ts=[],Bs=1/0,Ps=1/0,Ls=1/0,Rs=-1/0,Ds=-1/0,$s=-1/0,Fs=0,Gs=0,Vs=0,ks=void 0,Os=void 0,Ns=void 0,Us=void 0,Hs=void 0,zs=void 0,js=void 0;Fs<Ss;Fs++,Gs+=6,Vs+=9)Ms[Fs]=Fs,ks=Us=_s[Vs],(js=_s[Vs+3])<ks&&(ks=js),js>Us&&(Us=js),(js=_s[Vs+6])<ks&&(ks=js),js>Us&&(Us=js),Os=Hs=_s[Vs+1],(js=_s[Vs+4])<Os&&(Os=js),js>Hs&&(Hs=js),(js=_s[Vs+7])<Os&&(Os=js),js>Hs&&(Hs=js),Ns=zs=_s[Vs+2],(js=_s[Vs+5])<Ns&&(Ns=js),js>zs&&(zs=js),(js=_s[Vs+8])<Ns&&(Ns=js),js>zs&&(zs=js),ks<Bs&&(Bs=ks),Us>Rs&&(Rs=Us),Os<Ps&&(Ps=Os),Hs>Ds&&(Ds=Hs),Ns<Ls&&(Ls=Ns),zs>$s&&($s=zs),Cs[Gs]=ks,Cs[Gs+1]=Os,Cs[Gs+2]=Ns,Cs[Gs+3]=Us,Cs[Gs+4]=Hs,Cs[Gs+5]=zs;var Ws,Qs=new Fe([Bs,Ps,Ls,Rs,Ds,$s],0,Ss);function qs(tu){for(var Ys=tu.startIndex,Ks=tu.endIndex,Js=tu.extents,eu=[Js[3]-Js[0],Js[4]-Js[1],Js[5]-Js[2]],Zs=[0,1,2].sort(function(vu,pu){return eu[pu]-eu[vu]}),au=0;au<3;au++){for(var ru=Zs[au],su=Js[ru]+Js[ru+3],lu=Ys,gu=Ks-1,hu=-1,wu=void 0;lu<gu;)hu===-1?(wu=Ms[lu],Cs[6*wu+ru]+Cs[6*wu+ru+3]<su?lu++:hu=wu):(wu=Ms[gu],Cs[6*wu+ru]+Cs[6*wu+ru+3]>=su||(Ms[lu]=wu,Ms[gu]=hu,hu=-1,lu++),gu--);if(lu>Ys){var Mu=new Fe(He(Ms,Cs,Ys,lu,1e-6),Ys,lu);Mu.endIndex-Mu.startIndex>ga&&Ts.push(Mu);var du=new Fe(He(Ms,Cs,lu,Ks,1e-6),lu,Ks);du.endIndex-du.startIndex>ga&&Ts.push(du),tu.node0=Mu,tu.node1=du,tu.startIndex=0,tu.endIndex=0;break}}}for(Ts.push(Qs);Ws=Ts.pop();)qs(Ws);return this.offsetArray=Ms,this.rootNode=Qs,this},ca.prototype.intersectRay=function(ga,_s,Ss){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Ms,Cs=this.trianglesArray,Ts=this.offsetArray,Bs=this.rootNode,Ps=[],Ls=[],Rs=new ke(1/_s.x,1/_s.y,1/_s.z),Ds=[Bs];Ms=Ds.pop();)if(Ve(ga,Rs,Ms)){Ms.node0&&Ds.push(Ms.node0),Ms.node1&&Ds.push(Ms.node1);for(var $s=Ms.startIndex;$s<Ms.endIndex;$s++)Ps.push(Ts[$s])}for(var Fs=new ke(0,0,0),Gs=new ke(0,0,0),Vs=new ke(0,0,0),ks=new ke(ga.x,ga.y,ga.z),Os=new ke(_s.x,_s.y,_s.z),Ns=($s=0,void 0),Us=Ps.length;$s<Us;$s++){Ns=9*Ps[$s],Fs.x=Cs[Ns],Fs.y=Cs[Ns+1],Fs.z=Cs[Ns+2],Gs.x=Cs[Ns+3],Gs.y=Cs[Ns+3+1],Gs.z=Cs[Ns+3+2],Vs.x=Cs[Ns+6],Vs.y=Cs[Ns+6+1],Vs.z=Cs[Ns+6+2];var Hs=Oe(Fs,Gs,Vs,ks,Os,Ss);Hs&&Ls.push(new Ne([Fs.clone(),Gs.clone(),Vs.clone()],Hs))}return Ls},ca.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},ca}(),ze=null,qe=!1,_e=[];function je(ca){if(ca===void 0&&(ca=!1),ca||!qe)if(ze)qe=!1;else{qe=!0;var ga=_e.shift();if(ga){try{ga()}catch{}se.shared.add(function(){return je(!0)},!0,2)}else qe=!1}}function Ue(){ze=null,je()}function Ge(ca){return new Promise(function(ga,_s){_e.push(function(){try{ga(ca())}catch(Ss){_s(Ss)}}),je()})}function We(){var ca={OutWindow:function(){this._windowSize=0}};return ca.OutWindow.prototype.create=function(ga){this._buffer&&this._windowSize===ga||(this._buffer=[]),this._windowSize=ga,this._pos=0,this._streamPos=0},ca.OutWindow.prototype.flush=function(){var ga=this._pos-this._streamPos;if(ga!==0){for(;ga--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},ca.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},ca.OutWindow.prototype.setStream=function(ga){this.releaseStream(),this._stream=ga},ca.OutWindow.prototype.init=function(ga){ga||(this._streamPos=0,this._pos=0)},ca.OutWindow.prototype.copyBlock=function(ga,_s){var Ss=this._pos-ga-1;for(Ss<0&&(Ss+=this._windowSize);_s--;)Ss>=this._windowSize&&(Ss=0),this._buffer[this._pos++]=this._buffer[Ss++],this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.putByte=function(ga){this._buffer[this._pos++]=ga,this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.getByte=function(ga){var _s=this._pos-ga-1;return _s<0&&(_s+=this._windowSize),this._buffer[_s]},ca.RangeDecoder=function(){},ca.RangeDecoder.prototype.setStream=function(ga){this._stream=ga},ca.RangeDecoder.prototype.releaseStream=function(){this._stream=null},ca.RangeDecoder.prototype.init=function(){var ga=5;for(this._code=0,this._range=-1;ga--;)this._code=this._code<<8|this._stream.readByte()},ca.RangeDecoder.prototype.decodeDirectBits=function(ga){for(var _s,Ss=0,Ms=ga;Ms--;)this._range>>>=1,_s=this._code-this._range>>>31,this._code-=this._range&_s-1,Ss=Ss<<1|1-_s,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Ss},ca.RangeDecoder.prototype.decodeBit=function(ga,_s){var Ss=ga[_s],Ms=(this._range>>>11)*Ss;return(2147483648^this._code)<(2147483648^Ms)?(this._range=Ms,ga[_s]+=2048-Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Ms,this._code-=Ms,ga[_s]-=Ss>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},ca.initBitModels=function(ga,_s){for(;_s--;)ga[_s]=1024},ca.BitTreeDecoder=function(ga){this._models=[],this._numBitLevels=ga},ca.BitTreeDecoder.prototype.init=function(){ca.initBitModels(this._models,1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.decode=function(ga){for(var _s=1,Ss=this._numBitLevels;Ss--;)_s=_s<<1|ga.decodeBit(this._models,_s);return _s-(1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.reverseDecode=function(ga){for(var _s,Ss=1,Ms=0,Cs=0;Cs<this._numBitLevels;++Cs)Ss=Ss<<1|(_s=ga.decodeBit(this._models,Ss)),Ms|=_s<<Cs;return Ms},ca.reverseDecode2=function(ga,_s,Ss,Ms){for(var Cs,Ts=1,Bs=0,Ps=0;Ps<Ms;++Ps)Ts=Ts<<1|(Cs=Ss.decodeBit(ga,_s+Ts)),Bs|=Cs<<Ps;return Bs},ca.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new ca.BitTreeDecoder(8),this._numPosStates=0},ca.LenDecoder.prototype.create=function(ga){for(;this._numPosStates<ga;++this._numPosStates)this._lowCoder[this._numPosStates]=new ca.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new ca.BitTreeDecoder(3)},ca.LenDecoder.prototype.init=function(){var ga=this._numPosStates;for(ca.initBitModels(this._choice,2);ga--;)this._lowCoder[ga].init(),this._midCoder[ga].init();this._highCoder.init()},ca.LenDecoder.prototype.decode=function(ga,_s){return ga.decodeBit(this._choice,0)===0?this._lowCoder[_s].decode(ga):ga.decodeBit(this._choice,1)===0?8+this._midCoder[_s].decode(ga):16+this._highCoder.decode(ga)},ca.Decoder2=function(){this._decoders=[]},ca.Decoder2.prototype.init=function(){ca.initBitModels(this._decoders,768)},ca.Decoder2.prototype.decodeNormal=function(ga){var _s=1;do _s=_s<<1|ga.decodeBit(this._decoders,_s);while(_s<256);return 255&_s},ca.Decoder2.prototype.decodeWithMatchByte=function(ga,_s){var Ss,Ms,Cs=1;do if(Ss=_s>>7&1,_s<<=1,Cs=Cs<<1|(Ms=ga.decodeBit(this._decoders,(1+Ss<<8)+Cs)),Ss!==Ms){for(;Cs<256;)Cs=Cs<<1|ga.decodeBit(this._decoders,Cs);break}while(Cs<256);return 255&Cs},ca.LiteralDecoder=function(){},ca.LiteralDecoder.prototype.create=function(ga,_s){var Ss;if(!this._coders||this._numPrevBits!==_s||this._numPosBits!==ga)for(this._numPosBits=ga,this._posMask=(1<<ga)-1,this._numPrevBits=_s,this._coders=[],Ss=1<<this._numPrevBits+this._numPosBits;Ss--;)this._coders[Ss]=new ca.Decoder2},ca.LiteralDecoder.prototype.init=function(){for(var ga=1<<this._numPrevBits+this._numPosBits;ga--;)this._coders[ga].init()},ca.LiteralDecoder.prototype.getDecoder=function(ga,_s){return this._coders[((ga&this._posMask)<<this._numPrevBits)+((255&_s)>>>8-this._numPrevBits)]},ca.Decoder=function(){this._outWindow=new ca.OutWindow,this._rangeDecoder=new ca.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new ca.BitTreeDecoder(4),this._lenDecoder=new ca.LenDecoder,this._repLenDecoder=new ca.LenDecoder,this._literalDecoder=new ca.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new ca.BitTreeDecoder(6),this._posSlotDecoder[1]=new ca.BitTreeDecoder(6),this._posSlotDecoder[2]=new ca.BitTreeDecoder(6),this._posSlotDecoder[3]=new ca.BitTreeDecoder(6)},ca.Decoder.prototype.setDictionarySize=function(ga){return!(ga<0)&&(this._dictionarySize!==ga&&(this._dictionarySize=ga,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},ca.Decoder.prototype.setLcLpPb=function(ga,_s,Ss){var Ms=1<<Ss;return!(ga>8||_s>4||Ss>4)&&(this._literalDecoder.create(_s,ga),this._lenDecoder.create(Ms),this._repLenDecoder.create(Ms),this._posStateMask=Ms-1,!0)},ca.Decoder.prototype.init=function(){var ga=4;for(this._outWindow.init(!1),ca.initBitModels(this._isMatchDecoders,192),ca.initBitModels(this._isRep0LongDecoders,192),ca.initBitModels(this._isRepDecoders,12),ca.initBitModels(this._isRepG0Decoders,12),ca.initBitModels(this._isRepG1Decoders,12),ca.initBitModels(this._isRepG2Decoders,12),ca.initBitModels(this._posDecoders,114),this._literalDecoder.init();ga--;)this._posSlotDecoder[ga].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},ca.Decoder.prototype.decode=function(ga,_s,Ss){var Ms,Cs,Ts,Bs,Ps,Ls,Rs=0,Ds=0,$s=0,Fs=0,Gs=0,Vs=0,ks=0;for(this._rangeDecoder.setStream(ga),this._outWindow.setStream(_s),this.init();Ss<0||Vs<Ss;)if(Ms=Vs&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Rs<<4)+Ms)===0)Cs=this._literalDecoder.getDecoder(Vs++,ks),ks=Rs>=7?Cs.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Ds)):Cs.decodeNormal(this._rangeDecoder),this._outWindow.putByte(ks),Rs=Rs<4?0:Rs-(Rs<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Rs)===1)Ts=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Rs)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Rs<<4)+Ms)===0&&(Rs=Rs<7?9:11,Ts=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Rs)===0?Bs=$s:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Rs)===0?Bs=Fs:(Bs=Gs,Gs=Fs),Fs=$s),$s=Ds,Ds=Bs),Ts===0&&(Ts=2+this._repLenDecoder.decode(this._rangeDecoder,Ms),Rs=Rs<7?8:11);else if(Gs=Fs,Fs=$s,$s=Ds,Ts=2+this._lenDecoder.decode(this._rangeDecoder,Ms),Rs=Rs<7?7:10,(Ps=this._posSlotDecoder[Ts<=5?Ts-2:3].decode(this._rangeDecoder))>=4){if(Ds=(2|1&Ps)<<(Ls=(Ps>>1)-1),Ps<14)Ds+=ca.reverseDecode2(this._posDecoders,Ds-Ps-1,this._rangeDecoder,Ls);else if(Ds+=this._rangeDecoder.decodeDirectBits(Ls-4)<<4,(Ds+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Ds===-1)break;return!1}}else Ds=Ps;if(Ds>=Vs||Ds>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Ds,Ts),Vs+=Ts,ks=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},ca.Decoder.prototype.setDecoderProperties=function(ga){var _s,Ss,Ms,Cs,Ts;return!(ga.size<5)&&(Ss=(_s=ga.readByte())%9,Ms=(_s=~~(_s/9))%5,Cs=~~(_s/5),!!this.setLcLpPb(Ss,Ms,Cs)&&(Ts=ga.readByte(),Ts|=ga.readByte()<<8,Ts|=ga.readByte()<<16,Ts+=16777216*ga.readByte(),this.setDictionarySize(Ts)))},ca.decompress=function(ga,_s,Ss,Ms){var Cs=new ca.Decoder;if(!Cs.setDecoderProperties(ga))throw"Incorrect stream properties";if(!Cs.decode(_s,Ss,Ms))throw"Error in data stream";return!0},ca.decompressFile=function(ga,_s){var Ss,Ms=new ca.Decoder;if(!Ms.setDecoderProperties(ga))throw"Incorrect stream properties";if(Ss=ga.readByte(),Ss|=ga.readByte()<<8,Ss|=ga.readByte()<<16,Ss+=16777216*ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),!Ms.decode(ga,_s,Ss))throw"Error in data stream";return!0},ca}var Xe=We(),Ye=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(We.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,_s){try{var Ss={data:ga,offset:0,readByte:function(){return this.data[this.offset++]}},Ms=Ss.data.length,Cs={data:[],offset:0,writeByte:function(Ps){var Ls=Math.floor(this.offset/Ms);this.data[Ls]||(this.data[Ls]=new Uint8Array(Ms)),this.data[Ls][this.offset%Ms]=Ps,this.offset++}};ca.decompressFile(Ss,Cs);for(var Ts=new Uint8Array(Cs.offset),Bs=0;Bs<Cs.offset;Bs++)Ts[Bs]=Cs.data[Math.floor(Bs/Ms)][Bs%Ms];_s(null,Ts)}catch(Ps){_s(Ps)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(ca){for(var ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_s=new Uint8Array(256),Ss=0;Ss<ga.length;Ss++)_s[ga.charCodeAt(Ss)]=Ss;var Ms,Cs,Ts,Bs,Ps,Ls=.75*ca.length,Rs=ca.length,Ds=0;ca[ca.length-1]==="="&&(Ls--,ca[ca.length-2]==="="&&Ls--);var $s=new ArrayBuffer(Ls),Fs=new Uint8Array($s);for(Ms=0;Ms<Rs;Ms+=4)Cs=_s[ca.charCodeAt(Ms)],Ts=_s[ca.charCodeAt(Ms+1)],Bs=_s[ca.charCodeAt(Ms+2)],Ps=_s[ca.charCodeAt(Ms+3)],Fs[Ds++]=Cs<<2|Ts>>4,Fs[Ds++]=(15&Ts)<<4|Bs>>2,Fs[Ds++]=(3&Bs)<<6|63&Ps;return $s}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,_s){try{var Ss=new WebAssembly.Memory({initial:16}),Ms=new WebAssembly.Module(ca),Cs=new WebAssembly.Instance(Ms,{env:{memory:Ss,abort:function(){_s(new Error("webAssembly abort"))}}}).exports,Ts=Cs.newU8Array(ga.length);new Uint8Array(Ss.buffer,Ts+24,ga.length).set(ga);var Bs=Cs.decode(Ts),Ps=new Uint32Array(Ss.buffer,Bs,4),Ls=Ps[0],Rs=Ps[2],Ds=Ps[3];Ls?_s(null,new Uint8Array(Ss.buffer,Ds+24,Rs).slice(0,Rs)):_s(new Error("lzma deocder error"))}catch($s){_s($s)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Ze=typeof Worker!="undefined"&&typeof Blob!="undefined",Je="";if(Ze)try{var $e=new Blob([Ye],{type:"text/javascript"});Je=URL.createObjectURL($e)}catch(ca){}var ti=function(){function ca(){var ga=this;if(!Ze)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var _s=this.worker=new Worker(Je);_s.onmessage=function(Ss){var Ms=Ss.data,Cs=Ms.id,Ts=Ms.result,Bs=Ms.error,Ps=ga.getKey(Cs);ga.requests[Ps]&&(Bs?ga.requests[Ps](new Error(Bs)):ga.requests[Ps](null,Ts),delete ga.requests[Ps])},_s.onerror=function(Ss){return console.error(Ss)}}return ca.prototype.getKey=function(ga){return"key_"+String(ga)},ca.prototype.decompress=function(ga,_s){var Ss=++this.callCounter;this.requests[this.getKey(Ss)]=_s,this.worker.postMessage({type:"decompress",id:Ss,data:ga},[ga.buffer])},ca.prototype.terminate=function(){this.worker.terminate()},ca.support=Ze,ca}();function ei(ca){return Array.prototype.reduce.call(ca,function(ga,_s,Ss){return ga|_s<<8*Ss},0)}function ii(ca){var ga=new Uint8Array(ca),_s=ei(ga.slice(0,4));if(_s>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Ss=[],Ms=[],Cs=4+4*_s,Ts=0;Ts<_s;Ts++)Ms[Ts]=ei(ga.slice(4+4*Ts,8+4*Ts)),Ss[Ts]=Ts===_s-1?ga.subarray(Cs,Cs+Ms[Ts]):ga.slice(Cs,Cs+Ms[Ts]),Cs+=Ms[Ts];return ti.support?function(Bs){for(var Ps=[],Ls=Bs.length,Rs=function($s){Ps.push(new Promise(function(Fs,Gs){var Vs=new ti;Vs.decompress(Bs[$s],function(ks,Os){if(Vs.terminate(),ks)return Gs(ks);Fs(Os)})}))},Ds=0;Ds<Ls;Ds++)Rs(Ds);return Promise.all(Ps)}(Ss):Promise.resolve(function(Bs){for(var Ps,Ls=[],Rs=Bs.length,Ds=function(Fs){var Gs={data:Bs[Fs],offset:0,readByte:function(){return this.data[this.offset++]}},Vs=Gs.data.length,ks={data:[],offset:0,writeByte:function(Ns){var Us=Math.floor(this.offset/Vs);this.data[Us]||(this.data[Us]=new Uint8Array(Vs)),this.data[Us][this.offset%Vs]=Ns,this.offset++}};Xe.decompressFile(Gs,ks),Ps=new Uint8Array(ks.offset);for(var Os=0;Os<ks.offset;Os++)Ps[Os]=ks.data[Math.floor(Os/Vs)][Os%Vs];Ls.push(Ps)},$s=0;$s<Rs;$s++)Ds($s);return Ls}(Ss))}function ni(ca,ga){for(var _s={},Ss=0,Ms=ga;Ss<Ms.length;Ss++){var Cs=Ms[Ss];Cs in ca&&(_s[Cs]=ca[Cs])}return _s}var ri=!1;try{ri=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(ca){}var oi=[];function si(){var ca=this.src;this.onerror=this.onload=Lt,this.removeAttribute("src"),/^blob\:/.test(ca)&&URL.revokeObjectURL(ca),this.close=Lt}function ai(){oi.push(this)}function ui(){return Object.assign(new Image,{crossOrigin:"",close:si})}function li(ca){return new Promise(function(ga,_s){var Ss=ui();Ss.onload=function(){Ss.onload=Ss.onerror=Lt,setTimeout(function(){return ga(Ss)},30)},Ss.onerror=function(){var Ms=Ss.src;Ss.onload=Ss.onerror=Lt,Ss.close(),_s(new Error("image load error: ".concat(Ms)))},Ss.src=URL.createObjectURL(ca)})}function hi(ca,ga){if(ga&&(ca.width>ga.width||ca.height>ga.height)){var _s=function(Ps,Ls){var Rs=oi.shift();if(Rs)return Rs.width=Ps,Rs.height=Ls,Rs;if(ri){var Ds=new OffscreenCanvas(Ps,Ls);return Object.assign(Ds,{close:ai})}return Ds=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Ds,{close:ai})}(Math.min(ca.width,ga.width),Math.min(ca.height,ga.height)),Ss=_s.getContext("2d");Ss.clearRect(0,0,_s.width,_s.height),Ss.drawImage(ca,0,0,_s.width,_s.height),ca.close();var Ms=new r$2.Texture(_s);Ms.needsUpdate=!0,Ms.flipY=!0;var Cs=Ms.dispose;return Ms.dispose=function(){_s.close(),Cs.call(Ms),delete Ms.dispose},Ms}var Ts=new r$2.Texture(ca);Ts.needsUpdate=!0,Ts.minFilter=r$2.LinearFilter,Ts.magFilter=r$2.LinearFilter,Ts.flipY=!0;var Bs=Ts.dispose;return Ts.dispose=function(){ca.close(),Bs.call(Ts),delete Ts.dispose},Ts}var ci=new r$2.WebGLRenderTarget(1,1),di=new r$2.OrthographicCamera(-1,1,1,-1,0,1),pi=new r$2.BufferGeometry;pi.setAttribute("position",new r$2.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),pi.setAttribute("uv",new r$2.Float32BufferAttribute([0,2,0,0,2,0],2));var Ai=new r$2.Mesh(pi),fi=new r$2.Scene;fi.add(Ai);var gi,vi=new r$2.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$2.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function yi(ca,ga,_s){return ga.flipY!==void 0&&(ca.flipY=ga.flipY),ga.format!==void 0&&(ca.format=ga.format),ga.encoding!==void 0&&(ca.encoding=ga.encoding),ga.minFilter!==void 0&&(ca.minFilter=ga.minFilter),ga.magFilter!==void 0&&(ca.magFilter=ga.magFilter),_s?new Promise(function(Ss){se.shared.add(function(){try{var Ms=_s.getRenderTarget();_s.setRenderTarget(ci),ca instanceof r$2.CubeTexture?(Ai.material=mi,mi.uniforms.map.value=ca,_s.render(fi,di),mi.uniforms.map.value=null):(Ai.material=vi,vi.uniforms.map.value=ca,_s.render(fi,di),mi.uniforms.map.value=null),_s.setRenderTarget(Ms),Ss(ca)}catch{Ss(ca)}},!0,1)}):Promise.resolve(ca)}var bi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,wi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},Ei=((gi={})[wi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,gi[wi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,gi),Ii=function(){function ca(){}return ca.setTranscoderPath=function(ga){return this.transcoderPath=ga,this},ca.setWorkerLimit=function(ga){return this.workerLimit=ga,this},ca.isInitialized=function(){return this.workerPool.filter(function(ga){return ga._initialized}).length!==0},ca.detectSupport=function(ga){var _s=this.workerConfig;if(_s.astcSupported=!!ga.extensions.get("WEBGL_compressed_texture_astc"),_s.bptcSupported=!!ga.extensions.get("EXT_texture_compression_bptc"),_s.etcSupported=!!ga.extensions.get("WEBGL_compressed_texture_etc1"),_s.dxtSupported=!!ga.extensions.get("WEBGL_compressed_texture_s3tc"),_s.pvrtcSupported=!!ga.extensions.get("WEBGL_compressed_texture_pvrtc")||!!ga.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),_s.astcSupported)_s.format=ca.BASIS_FORMAT.cTFASTC_4x4;else if(_s.bptcSupported)_s.format=ca.BASIS_FORMAT.cTFBC7_M5;else if(_s.dxtSupported)_s.format=ca.BASIS_FORMAT.cTFBC3;else if(_s.pvrtcSupported)_s.format=ca.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!_s.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");_s.format=ca.BASIS_FORMAT.cTFETC1}return this},ca.createTexture=function(ga){var _s,Ss,Ms=this,Cs=ga.byteLength,Ts=this._allocateWorker(Cs).then(function(Bs){return _s=Bs,Ss=Ms.workerNextTaskID++,new Promise(function(Ps,Ls){_s._callbacks[Ss]={resolve:Ps,reject:Ls},_s.postMessage({type:"transcode",id:Ss,buffer:ga},[ga])})}).then(function(Bs){var Ps,Ls=Ms.workerConfig,Rs=Bs.width,Ds=Bs.height,$s=Bs.mipmaps;switch(Bs.format){case wi.cTFASTC_4x4:Ps=new r$2.CompressedTexture($s,Rs,Ds,r$2.RGBA_ASTC_4x4_Format);break;case wi.cTFBC1:case wi.cTFBC3:Ps=new r$2.CompressedTexture($s,Rs,Ds,Ei[Ls.format],r$2.UnsignedByteType);break;case wi.cTFETC1:Ps=new r$2.CompressedTexture($s,Rs,Ds,r$2.RGB_ETC1_Format);break;case wi.cTFPVRTC1_4_RGB:Ps=new r$2.CompressedTexture($s,Rs,Ds,r$2.RGB_PVRTC_4BPPV1_Format);break;case wi.cTFPVRTC1_4_RGBA:Ps=new r$2.CompressedTexture($s,Rs,Ds,r$2.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Ps.minFilter=$s.length===1?r$2.LinearFilter:r$2.LinearMipmapLinearFilter,Ps.magFilter=r$2.LinearFilter,Ps.generateMipmaps=!1,Ps.needsUpdate=!0,Ps});return Ts.catch(function(){return!0}).then(function(){_s&&Ss&&(_s._taskLoad-=Cs,delete _s._callbacks[Ss])}),Ts},ca._initTranscoder=function(){var ga=this;if(!this.transcoderPending){var _s=new r$2.FileLoader;_s.setPath(this.transcoderPath);var Ss=new Promise(function(Ts,Bs){_s.load("basis_transcoder.js",Ts,void 0,Bs)}),Ms=new r$2.FileLoader;Ms.setPath(this.transcoderPath),Ms.setResponseType("arraybuffer");var Cs=new Promise(function(Ts,Bs){Ms.load("basis_transcoder.wasm",Ts,void 0,Bs)});this.transcoderPending=Promise.all([Ss,Cs]).then(function(Ts){var Bs=Ts[0],Ps=Ts[1],Ls=["/* basis_transcoder.js */",Bs,"/* worker */",bi].join(`
`);ga.workerSourceURL=URL.createObjectURL(new Blob([Ls])),ga.transcoderBinary=Ps})}return this.transcoderPending},ca._allocateWorker=function(ga){var _s=this;return this._initTranscoder().then(function(){if(_s.workerPool.length<_s.workerLimit){var Ss=function(Cs){var Ts=new Worker(Cs);return Object.assign(Ts,{_callbacks:{},_initialized:!1,_taskLoad:0})}(_s.workerSourceURL);Ss._callbacks={},Ss._initialized=!1,Ss._taskLoad=0,Ss.postMessage({type:"init",config:_s.workerConfig,transcoderBinary:_s.transcoderBinary}),Ss.onmessage=function(Cs){var Ts=Cs.data;switch(Ts.type){case"initialized":Ss._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Ss._callbacks[Ts.id].resolve(Ts);break;case"error":Ss._callbacks[Ts.id].reject(Ts);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Ts.type,'"'))}},_s.workerPool.push(Ss)}else _s.workerPool.sort(function(Cs,Ts){return Cs._taskLoad>Ts._taskLoad?-1:1});var Ms=_s.workerPool[_s.workerPool.length-1];return Ms._taskLoad+=ga,Ms})},ca.prototype.dispose=function(){for(var ga=0;ga<ca.workerPool.length;ga++)ca.workerPool[ga].terminate();return ca.workerPool.length=0,this},ca.BASIS_FORMAT=wi,ca.DXT_FORMAT=xi,ca.DXT_FORMAT_MAP=Ei,ca.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",ca.transcoderBinary=null,ca.transcoderPending=null,ca.workerLimit=1,ca.workerPool=[],ca.workerNextTaskID=1,ca.workerSourceURL="",ca.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},ca}();function Ci(ca){var ga=ca.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[1]:location.protocol}var Si=function(){function ca(ga){this.timeout=ga.timeout,this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga},ca.prototype.load=function(ga,_s,Ss,Ms,Cs,Ts){var Bs;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt);var Ps=Ci(ga),Ls={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Rs=(Bs=_s.viaAjax)!==null&&Bs!==void 0&&Bs,Ds=Zt(ga),$s=/^https?:$/.test(Ps),Fs=/\.basis$/.test(Jt(ga).split("?")[0]);if(Ds?Rs=!0:$s||(Rs=!1),Rs){if(Fs){var Gs=null,Vs="arraybuffer";return _s.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):ee(ga,e$2.__assign(e$2.__assign({},Ls),{responseType:Vs}),void 0,void 0,Cs).then(function(Us){return Gs=Us.meta,Ii.createTexture(Us.body)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},ni(_s,["wrapS","wrapT"])),Ts):Us}).then(function(Us){var Hs={meta:Gs,body:Us};return Ss(Hs),Hs}).catch(function(Us){return Ms(Us),Promise.reject(Us)})}return Vs="blob",ee(ga,e$2.__assign(e$2.__assign({},Ls),{responseType:Vs}),void 0,void 0,Cs).then(function(Us){return li(Us.body)}).then(function(Us){return hi(Us,_s.maxSize)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$2.__assign({flipY:!0,encoding:r$2.sRGBEncoding},_s),Ts):Us}).then(function(Us){var Hs={meta:null,body:Us};return Ss(Hs),Hs}).catch(function(Us){return Ms(Us),Promise.reject(Us)})}if(Fs){var ks=new Error("cannot load basis texture via image");return Ms(ks),Promise.reject(ks)}var Os=null,Ns=ui();return ne(ga,Ls,void 0,void 0,Cs,Ns).then(function(Us){return Os=Us.meta,hi(Us.body,_s.maxSize)}).then(function(Us){return _s.preInit!==!1?yi(Us,e$2.__assign({flipY:!0,encoding:r$2.sRGBEncoding},_s),Ts):Us}).then(function(Us){var Hs={meta:Os,body:Us};return Ss(Hs),Hs}).catch(function(Us){return Ns.close(),Ms(Us),Promise.reject(Us)})},ca.prototype.loadCube=function(ga,_s,Ss,Ms,Cs,Ts){var Bs;_s===void 0&&(_s={}),Ss===void 0&&(Ss=Lt),Ms===void 0&&(Ms=Lt),Cs===void 0&&(Cs=Lt),Array.isArray(ga)||(ga=[ga.right,ga.left,ga.up,ga.down,ga.front,ga.back]);for(var Ps={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Ls=[],Rs=[0,0,0,0,0,0],Ds=[],$s=function(Vs){var ks=ga[Vs],Os=Ci(ks),Ns=function(Ys){Rs[Vs]=Ys,Cs(Rs.reduce(function(Ks,Js){return Ks+Js},0)/6)},Us=(Bs=_s.viaAjax)!==null&&Bs!==void 0&&Bs,Hs=/^https?:$/.test(Os),zs=Zt(ks),js=/\.basis$/.test(Jt(ks).split("?")[0]);if(zs?Us=!0:Hs||(Us=!1),Us)if(js){var Ws="arraybuffer",Qs=ee(ks,e$2.__assign(e$2.__assign({},Ps),{responseType:Ws}),void 0,void 0,Ns).then(function(Ys){return Ds[Vs]=Ys.meta,Ii.createTexture(Ys.body)});Ls.push(Qs)}else Ws="blob",Qs=ee(ks,e$2.__assign(e$2.__assign({},Ps),{responseType:Ws}),void 0,void 0,Ns).then(function(Ys){return Ds[Vs]=Ys.meta,li(Ys.body)}),Ls.push(Qs);else{if(js){var qs=new Error("cannot load basis texture via image");return Ms(qs),{value:Promise.reject(qs)}}var tu=ui();Qs=ne(ks,Ps,void 0,void 0,Ns,tu).then(function(Ys){return Ds[Vs]=Ys.meta,Ys.body}).catch(function(Ys){return tu.close(),Promise.reject(Ys)}),Ls.push(Qs)}},Fs=0;Fs<6;Fs++){var Gs=$s(Fs);if(typeof Gs=="object")return Gs.value}return Promise.all(Ls).then(function(Vs){return Vs[0]instanceof r$2.CompressedTexture?function(ks){var Os=new r$2.CubeTexture(ks);Os.needsUpdate=!0;var Ns=Os.dispose;return Os.dispose=function(){for(var Us=0,Hs=ks;Us<Hs.length;Us++)Hs[Us].dispose();Ns.call(Os),delete Os.dispose},Os.isCompressedTexture=!0,Os.format=ks[0].format,Os.minFilter=ks[0].minFilter,Os.magFilter=ks[0].magFilter,Os}(Vs):function(ks){var Os=new r$2.CubeTexture(ks);Os.needsUpdate=!0,Os.minFilter=r$2.LinearFilter,Os.magFilter=r$2.LinearFilter,Os.flipY=!1;var Ns=Os.dispose;return Os.dispose=function(){for(var Us=0,Hs=ks;Us<Hs.length;Us++)Hs[Us].close();Ns.call(Os),delete Os.dispose},Os}(Vs)}).then(function(Vs){return _s.preInit!==!1?Vs.isCompressedTexture?yi(Vs,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},ni(_s,["wrapS","wrapT"])),Ts):yi(Vs,e$2.__assign({flipY:!1,encoding:r$2.sRGBEncoding},_s),Ts):Vs}).then(function(Vs){var ks={body:Vs,meta:Ds};return Ss(ks),ks}).catch(function(Vs){for(var ks=0,Os=Ls;ks<Os.length;ks++)Os[ks].then(function(Ns){Ns instanceof r$2.Texture?Ns.dispose():Ns.close()}).catch(Lt);return Ms(Vs),Promise.reject(Vs)})},ca}();const Bi=o$2.Reader,Mi=o$2.util,Pi=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Pi.Model=(()=>{function ca(ga){if(this.chunks=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.chunks=Mi.emptyArray,ca.decode=function(ga,_s){ga instanceof Bi||(ga=Bi.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Pi.Model;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Pi.Chunk.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}return Ms},ca})();function Qi(ca){var ga,_s,Ss=new r$2.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function Ms($u){var Hu=$u.match(/(group|floor)-?(\d+)/);return Hu?parseInt(Hu[2],10):0}function Cs($u){var Hu=$u.match(/(chunk)-?(\d+)/);return Hu?parseInt(Hu[2],10):0}function Ts($u){return 1e6*Ms($u.name)+1e3*Cs($u.name)+function(Hu){var fu=Hu.match(/(sub)-?(\d+)/);return fu?parseInt(fu[2],10):0}($u.name)}for(var Bs=[],Ps=0,Ls=((ga=ca.chunks)!==null&&ga!==void 0?ga:[]).sort(function($u,Hu){return Ts($u)-Ts(Hu)});Ps<Ls.length;Ps++){var Rs=Ms((Zs=Ls[Ps]).name);Bs[Rs]||(Bs[Rs]=[]),Bs[Rs].push(Zs)}for(var Ds=[],$s=0;$s<Bs.length;$s++){var Fs=Bs[$s];if(Fs){for(var Gs=0,Vs=0,ks=0;ks<Fs.length;ks++)Vs+=(Zs=Fs[ks]).vertices.xyz.length/3,Gs+=Zs.faces.indices.length;for(var Os=3*Vs,Ns=2*Vs,Us=3*Vs,Hs=Gs,zs=new ArrayBuffer(4*Os+4*Ns+4*Us+4*Hs),js=new Float32Array(zs,0,Os),Ws=new Float32Array(zs,4*Os,Ns),Qs=new Float32Array(zs,4*Os+4*Ns,Us),qs=new Uint32Array(zs,4*Os+4*Ns+4*Us,Hs),tu=[],Ys=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Ks=0,Js=0,eu=0;eu<Fs.length;eu++){var Zs,au=(Zs=Fs[eu]).vertices.xyz,ru=Zs.vertices.uvs,su=Zs.faces.indices,lu=au.length/3,gu=su.length,hu=[1/0,1/0,1/0,-1/0,-1/0,-1/0];for(ks=0;ks<lu;ks++){var wu=au[3*ks],Mu=au[3*ks+1],du=au[3*ks+2],vu=Ss.elements,pu=1/(vu[3]*wu+vu[7]*Mu+vu[11]*du+vu[15]),yu=(vu[0]*wu+vu[4]*Mu+vu[8]*du+vu[12])*pu,Su=(vu[1]*wu+vu[5]*Mu+vu[9]*du+vu[13])*pu,Tu=(vu[2]*wu+vu[6]*Mu+vu[10]*du+vu[14])*pu;js[3*Js+3*ks]=yu,js[3*Js+3*ks+1]=Su,js[3*Js+3*ks+2]=Tu,Ws[2*Js+2*ks]=ru[2*ks],Ws[2*Js+2*ks+1]=ru[2*ks+1],yu<hu[0]&&(hu[0]=yu),Su<hu[1]&&(hu[1]=Su),Tu<hu[2]&&(hu[2]=Tu),yu>hu[3]&&(hu[3]=yu),Su>hu[4]&&(hu[4]=Su),Tu>hu[5]&&(hu[5]=Tu)}for(hu[0]<Ys[0]&&(Ys[0]=hu[0]),hu[1]<Ys[1]&&(Ys[1]=hu[1]),hu[2]<Ys[2]&&(Ys[2]=hu[2]),hu[3]>Ys[3]&&(Ys[3]=hu[3]),hu[4]>Ys[4]&&(Ys[4]=hu[4]),hu[5]>Ys[5]&&(Ys[5]=hu[5]),ks=0;ks<gu;ks++)qs[Ks+ks]=Js+su[ks];tu.push({materialIndex:eu,name:Zs.name,chunkName:Cs(Zs.name),start:Ks,count:Zs.faces.indices.length,texture:(_s=Zs.texture)!==null&&_s!==void 0?_s:void 0}),Js+=lu,Ks+=gu}for(ks=0;ks<Gs;ks+=3){var bu,Au,Bu,Lu,Qu,Nu,ju,nu,uu,Pu,Iu,Ku,Fu,Ru,il,Ju,Xu,Ou,Uu;bu=3*qs[ks],Au=3*qs[ks+1],Bu=3*qs[ks+2],Lu=js[bu],Qu=js[bu+1],Nu=js[bu+2],ju=js[Au],nu=js[Au+1],uu=js[Au+2],Pu=js[Bu],Xu=(Ku=js[Bu+1]-nu)*(Ju=Nu-uu)-(Fu=js[Bu+2]-uu)*(il=Qu-nu),Ou=Fu*(Ru=Lu-ju)-(Iu=Pu-ju)*Ju,Uu=Iu*il-Ku*Ru,Qs[bu]+=Xu,Qs[bu+1]+=Ou,Qs[bu+2]+=Uu,Qs[Au]+=Xu,Qs[Au+1]+=Ou,Qs[Au+2]+=Uu,Qs[Bu]+=Xu,Qs[Bu+1]+=Ou,Qs[Bu+2]+=Uu}Ds.push({floorIndex:$s,vertices:js,uvs:Ws,indices:qs,normals:Qs,groups:tu,extents:Ys})}}return Ds}function Ri(ca,ga,_s,Ss){var Ms=e$2.__assign({key:"texture.pbm",basisLoaderInitialized:Ii.isInitialized()},ni(ga,["format","quality","size"]));return ca=ga.transform?ga.transform(ca,Ms):de(ca,Ms),new Si({allowHosts:_s,networkSubscribe:Ss}).load(ca,{wrapS:r$2.ClampToEdgeWrapping,wrapT:r$2.ClampToEdgeWrapping,minFilter:r$2.LinearFilter,maxSize:typeof Ms.size=="number"?new r$2.Vector2(Ms.size,Ms.size):void 0,preInit:!0}).then(function(Cs){var Ts=Cs.body;return Ts.needsUpdate=!0,Ts})}function Di(ca,ga,_s,Ss,Ms,Cs,Ts){Ms===void 0&&(Ms={});for(var Bs=[],Ps=0,Ls=Qi(ca);Ps<Ls.length;Ps++){var Rs=Ls[Ps],Ds=Rs.floorIndex,$s=Rs.vertices,Fs=Rs.uvs,Gs=Rs.indices,Vs=Rs.normals,ks=Rs.groups,Os=Rs.extents,Ns=new r$2.Box3;Ns.min.x=Os[0],Ns.min.y=Os[1],Ns.min.z=Os[2],Ns.max.x=Os[3],Ns.max.y=Os[4],Ns.max.z=Os[5];var Us=new r$2.BufferGeometry;Us.setAttribute("position",new r$2.BufferAttribute($s,3)),Us.setAttribute("uv",new r$2.BufferAttribute(Fs,2)),Us.setAttribute("normal",new r$2.BufferAttribute(Vs,3)),Us.setIndex(new r$2.BufferAttribute(Gs,1)),Us.boundingBox=Ns,Us.boundingSphere=Ns.getBoundingSphere(new r$2.Sphere);for(var Hs=0,zs=ks;Hs<zs.length;Hs++){var js=zs[Hs];Us.addGroup(js.start,js.count,js.materialIndex)}for(var Ws=[],Qs=function(Ks){var Js=_s[Ks.chunkName]||(Ks.texture?ga+Ks.texture:void 0),eu=new Ee;if(Ws.push(eu),Js){var Zs=void 0;Js in Ms?Zs=Ms[Js]:(Zs=Ri(Js,Ss,Cs,Ts),Ms[Js]=Zs),Zs.then(function(au){eu.uniforms.map.value=au,eu.uniforms.exposure.value=3.3},function(){eu.defines.USE_MAP=!1,eu.uniforms.color.value=new r$2.Color(16777215)})}else eu.defines.USE_MAP=!1,eu.uniforms.color.value=new r$2.Color(16777215)},qs=0,tu=ks;qs<tu.length;qs++)Qs(js=tu[qs]);var Ys=new pe(Us,Ws);Ys.name="model_floor_"+Ds,Ys.floorIndex=Ds,Bs.push(Ys)}return{objects:Bs,texturePromise:Promise.all(Object.keys(Ms).map(function(Ks){return Ms[Ks].catch(Lt)})).then(Lt)}}function ki(ca,ga){return(ca=Object.assign({},ca)).autoResize!==!1&&(ca.size=ga>96?Math.min(ca.size||1/0,100):ga>48?Math.min(ca.size||1/0,200):ga>24?Math.min(ca.size||1/0,400):ga>12?Math.min(ca.size||1/0,800):Math.min(ca.size||1/0,1024)),ca}function Fi(ca){return ca.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(ca)}Pi.Chunk=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.vertices=null,ca.prototype.faces=null,ca.prototype.name="",ca.prototype.texture="",ca.decode=function(ga,_s){ga instanceof Bi||(ga=Bi.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Pi.Chunk;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.vertices=Pi.Vertices.decode(ga,ga.uint32());break;case 2:Ms.faces=Pi.Faces.decode(ga,ga.uint32());break;case 3:Ms.name=ga.string();break;case 4:Ms.texture=ga.string();break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("vertices"))throw Mi.ProtocolError("missing required 'vertices'",{instance:Ms});if(!Ms.hasOwnProperty("faces"))throw Mi.ProtocolError("missing required 'faces'",{instance:Ms});if(!Ms.hasOwnProperty("name"))throw Mi.ProtocolError("missing required 'name'",{instance:Ms});return Ms},ca})(),Pi.Vertices=(()=>{function ca(ga){if(this.xyz=[],this.uvs=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.xyz=Mi.emptyArray,ca.prototype.uvs=Mi.emptyArray,ca.decode=function(ga,_s){ga instanceof Bi||(ga=Bi.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Pi.Vertices;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.xyz&&Ms.xyz.length||(Ms.xyz=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.xyz.push(ga.float())}else Ms.xyz.push(ga.float());break;case 2:if(Ms.uvs&&Ms.uvs.length||(Ms.uvs=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.uvs.push(ga.float())}else Ms.uvs.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Pi.Faces=(()=>{function ca(ga){if(this.indices=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.indices=Mi.emptyArray,ca.decode=function(ga,_s){ga instanceof Bi||(ga=Bi.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Pi.Faces;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.indices&&Ms.indices.length||(Ms.indices=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.indices.push(ga.uint32())}else Ms.indices.push(ga.uint32());break;default:ga.skipType(7&Cs)}}return Ms},ca})();const Ni=o$2.Reader,Oi=o$2.util,Li=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Vi=Li.Model=(()=>{function ca(ga){if(this.meshes=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.meshes=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Model;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.meshes&&Ms.meshes.length||(Ms.meshes=[]),Ms.meshes.push(Li.Mesh.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}return Ms},ca})();function Hi(ca){for(var ga=[0,0,0],_s=0;_s<ca.attributes.normal.array.length/9;_s++)ga[0]=ca.attributes.normal.array[9*_s],ga[1]=ca.attributes.normal.array[9*_s+1],ga[2]=ca.attributes.normal.array[9*_s+2],ca.attributes.normal.array[9*_s]=ca.attributes.normal.array[9*_s+6],ca.attributes.normal.array[9*_s+1]=ca.attributes.normal.array[9*_s+7],ca.attributes.normal.array[9*_s+2]=ca.attributes.normal.array[9*_s+8],ca.attributes.normal.array[9*_s+6]=ga[0],ca.attributes.normal.array[9*_s+7]=ga[1],ca.attributes.normal.array[9*_s+8]=ga[2];for(_s=0;_s<ca.attributes.position.array.length/9;_s++)ga[0]=ca.attributes.position.array[9*_s],ga[1]=ca.attributes.position.array[9*_s+1],ga[2]=ca.attributes.position.array[9*_s+2],ca.attributes.position.array[9*_s]=ca.attributes.position.array[9*_s+6],ca.attributes.position.array[9*_s+1]=ca.attributes.position.array[9*_s+7],ca.attributes.position.array[9*_s+2]=ca.attributes.position.array[9*_s+8],ca.attributes.position.array[9*_s+6]=ga[0],ca.attributes.position.array[9*_s+7]=ga[1],ca.attributes.position.array[9*_s+8]=ga[2];for(_s=0;_s<ca.attributes.uv.array.length/6;_s++)ga[0]=ca.attributes.uv.array[6*_s],ga[1]=ca.attributes.uv.array[6*_s+1],ca.attributes.uv.array[6*_s]=ca.attributes.uv.array[6*_s+4],ca.attributes.uv.array[6*_s+1]=ca.attributes.uv.array[6*_s+5],ca.attributes.uv.array[6*_s+4]=ga[0],ca.attributes.uv.array[6*_s+5]=ga[1];ca.attributes.normal.needsUpdate=!0,ca.attributes.position.needsUpdate=!0,ca.attributes.uv.needsUpdate=!0}function Ki(ca){var ga=ca.position,_s=ca.normal,Ss=ca.uv,Ms=ca.uv2,Cs=ca.groups,Ts=new r$2.BufferGeometry;Ts.setAttribute("position",new r$2.BufferAttribute(new Float32Array(ga.array),3)),_s&&Ts.setAttribute("normal",new r$2.BufferAttribute(new Float32Array(_s.array),3)),Ss&&Ts.setAttribute("uv",new r$2.BufferAttribute(new Float32Array(Ss.array),2)),Ms&&Ts.setAttribute("uv2",new r$2.BufferAttribute(new Float32Array(Ms.array),2));for(var Bs=0,Ps=Cs;Bs<Ps.length;Bs++){var Ls=Ps[Bs];Ts.addGroup(Ls.start,Ls.count,Ls.materialIndex)}return Ts}function zi(ca,ga,_s,Ss,Ms,Cs){if(Cs.hasOwnProperty(ca))return Cs[ca];Fi(ca=ca.split("?")[0])||(ca=ga+ca),(ca=ca.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(ca="https:"+ca);var Ts=e$2.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ii.isInitialized()},ni(_s,["quality","format"]));return Cs[ca=_s.transform?_s.transform(ca,Ts):de(ca,Ts)]=Ms.load(ca,{wrapS:r$2.RepeatWrapping,wrapT:r$2.RepeatWrapping,preInit:!0}).then(function(Bs){var Ps=Bs.body;return Ss&&Ps.repeat.copy(Ss),Ps.needsUpdate=!0,Ps.updateMatrix(),Ps})}function qi(ca,ga,_s,Ss,Ms){var Cs=[],Ts=new Ee,Bs=Ts.uniforms;Bs.exposure.value=4.3;var Ps=Ts.defines;if(Ps.USE_MAP=!1,Ps.USE_UV=!1,ca.kd&&(Bs.diffuse.value=new r$2.Color().fromArray(ca.kd.rgb)),ca.mapkd){var Ls=null;if(ca.mapkdrepeat){var Rs=ca.mapkdrepeat.split(/\s+/).map(function(Gs){return Number(Gs)}),Ds=Rs[0],$s=Rs[1];Ls=new r$2.Vector2(Ds,$s)}Cs.push(zi(ca.mapkd,ga,_s,Ls,Ss,Ms).then(function(Gs){Ps.USE_MAP=!0,Ps.USE_UV=!0,Bs.map.value=Gs,Bs.uvTransform.value=Gs.matrix}).catch(Lt))}if(ca.ks&&(Bs.specular.value=new r$2.Color().fromArray(ca.ks.rgb)),ca.mapks&&Cs.push(zi(ca.mapks,ga,_s,null,Ss,Ms).then(function(Gs){Bs.specularMap.value=Gs}).catch(Lt)),ca.ke&&(Bs.emissive.value=new r$2.Color().fromArray(ca.ke.rgb)),ca.mapke&&Cs.push(zi(ca.mapke,ga,_s,null,Ss,Ms).then(function(Gs){Bs.emissiveMap.value=Gs}).catch(Lt)),ca.norm&&Cs.push(zi(ca.norm,ga,_s,null,Ss,Ms).then(function(Gs){Bs.normalMap.value=Gs}).catch(Lt)),ca.mapbump&&Cs.push(zi(ca.mapbump,ga,_s,null,Ss,Ms).then(function(Gs){Bs.bumpMap.value=Gs}).catch(Lt)),ca.bump&&Cs.push(zi(ca.bump,ga,_s,null,Ss,Ms).then(function(Gs){Bs.bumpMap.value=Gs}).catch(Lt)),typeof ca.ns=="number"&&(Bs.shininess.value=ca.ns),typeof ca.d=="number"){var Fs=ca.d;Fs>0&&Fs<1&&(Ts.originOpacity=Fs,Ts.opacity=Fs)}return{material:Ts,textureReady:Promise.all(Cs).then(Lt)}}function _i(ca,ga,_s,Ss,Ms){for(var Cs,Ts=[],Bs=[],Ps=(Cs=ca,Vi.decode(Cs).meshes),Ls=new Si({allowHosts:Ss,networkSubscribe:Ms}),Rs=new r$2.Matrix4,Ds=new r$2.Vector3,$s=new r$2.Quaternion,Fs=new r$2.Vector3,Gs={},Vs=0,ks=Ps;Vs<ks.length;Vs++){var Os=ks[Vs],Ns=Os.name,Us=Os.chunks,Hs=Os.matrix;if(Ns!=="Ceiling"&&Ns!=="CeilingDrop")for(var zs=0,js=Hs;zs<js.length;zs++){var Ws=js[zs];Rs.elements=Ws.elements;var Qs=new fe;Qs.renderOrder=-3;for(var qs=0;qs<Us.length;qs++){var tu=Ki(Us[qs].geometry);tu.applyMatrix4(Rs),Rs.decompose(Ds,$s,Fs),Fs.x*Fs.y*Fs.z<0&&tu.attributes.normal&&tu.attributes.position&&tu.attributes.uv&&Hi(tu);for(var Ys=[],Ks=0,Js=Us[qs].material;Ks<Js.length;Ks++){var eu=qi(Js[Ks],ga,_s,Ls,Gs),Zs=eu.material,au=eu.textureReady;Bs.push(au),Ys.push(Zs)}var ru=new pe(tu,Ys);ru.name="chunk_"+qs,Qs.add(ru)}Qs.floorIndex=0,Qs.name=Ns,Ts.push(Qs)}}return{objects:Ts,texturePromise:Promise.all(Bs).catch(Lt)}}function ji(ca){return ca==null}Li.Mesh=(()=>{function ca(ga){if(this.chunks=[],this.matrix=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.name="",ca.prototype.chunks=Oi.emptyArray,ca.prototype.matrix=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Mesh;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.name=ga.string();break;case 2:Ms.chunks&&Ms.chunks.length||(Ms.chunks=[]),Ms.chunks.push(Li.Chunk.decode(ga,ga.uint32()));break;case 3:Ms.matrix&&Ms.matrix.length||(Ms.matrix=[]),Ms.matrix.push(Li.Matrix.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("name"))throw Oi.ProtocolError("missing required 'name'",{instance:Ms});return Ms},ca})(),Li.Matrix=(()=>{function ca(ga){if(this.elements=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.elements=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Matrix;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.elements&&Ms.elements.length||(Ms.elements=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.elements.push(ga.float())}else Ms.elements.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Li.Chunk=(()=>{function ca(ga){if(this.material=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.geometry=null,ca.prototype.material=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Chunk;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 2:Ms.geometry=Li.Geometry.decode(ga,ga.uint32());break;case 3:Ms.material&&Ms.material.length||(Ms.material=[]),Ms.material.push(Li.Material.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("geometry"))throw Oi.ProtocolError("missing required 'geometry'",{instance:Ms});return Ms},ca})(),Li.Geometry=(()=>{function ca(ga){if(this.groups=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.position=null,ca.prototype.uv=null,ca.prototype.uv2=null,ca.prototype.normal=null,ca.prototype.groups=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Geometry;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.position=Li.Position.decode(ga,ga.uint32());break;case 2:Ms.uv=Li.UV.decode(ga,ga.uint32());break;case 3:Ms.uv2=Li.UV.decode(ga,ga.uint32());break;case 4:Ms.normal=Li.Normal.decode(ga,ga.uint32());break;case 5:Ms.groups&&Ms.groups.length||(Ms.groups=[]),Ms.groups.push(Li.Group.decode(ga,ga.uint32()));break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("position"))throw Oi.ProtocolError("missing required 'position'",{instance:Ms});if(!Ms.hasOwnProperty("normal"))throw Oi.ProtocolError("missing required 'normal'",{instance:Ms});return Ms},ca})(),Li.Position=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Position;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Li.UV=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.UV;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Li.Normal=(()=>{function ca(ga){if(this.array=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.array=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Normal;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.array&&Ms.array.length||(Ms.array=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.array.push(ga.float())}else Ms.array.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Li.Group=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.start=0,ca.prototype.count=0,ca.prototype.materialIndex=0,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Group;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.start=ga.uint32();break;case 2:Ms.count=ga.uint32();break;case 3:Ms.materialIndex=ga.uint32();break;default:ga.skipType(7&Cs)}}if(!Ms.hasOwnProperty("start"))throw Oi.ProtocolError("missing required 'start'",{instance:Ms});if(!Ms.hasOwnProperty("count"))throw Oi.ProtocolError("missing required 'count'",{instance:Ms});if(!Ms.hasOwnProperty("materialIndex"))throw Oi.ProtocolError("missing required 'materialIndex'",{instance:Ms});return Ms},ca})(),Li.Material=(()=>{function ca(ga){if(ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.kd=null,ca.prototype.ks=null,ca.prototype.ke=null,ca.prototype.mapkd="",ca.prototype.mapks="",ca.prototype.mapke="",ca.prototype.norm="",ca.prototype.mapbump="",ca.prototype.bump="",ca.prototype.mapd="",ca.prototype.ns=0,ca.prototype.d=0,ca.prototype.tr=0,ca.prototype.mapkdrepeat="",ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Material;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:Ms.kd=Li.Color.decode(ga,ga.uint32());break;case 2:Ms.ks=Li.Color.decode(ga,ga.uint32());break;case 3:Ms.ke=Li.Color.decode(ga,ga.uint32());break;case 4:Ms.mapkd=ga.string();break;case 5:Ms.mapks=ga.string();break;case 6:Ms.mapke=ga.string();break;case 7:Ms.norm=ga.string();break;case 8:Ms.mapbump=ga.string();break;case 9:Ms.bump=ga.string();break;case 10:Ms.mapd=ga.string();break;case 11:Ms.ns=ga.float();break;case 12:Ms.d=ga.float();break;case 13:Ms.tr=ga.float();break;case 14:Ms.mapkdrepeat=ga.string();break;default:ga.skipType(7&Cs)}}return Ms},ca})(),Li.Color=(()=>{function ca(ga){if(this.rgb=[],ga)for(let _s=Object.keys(ga),Ss=0;Ss<_s.length;++Ss)ga[_s[Ss]]!=null&&(this[_s[Ss]]=ga[_s[Ss]])}return ca.prototype.rgb=Oi.emptyArray,ca.decode=function(ga,_s){ga instanceof Ni||(ga=Ni.create(ga));let Ss=_s===void 0?ga.len:ga.pos+_s,Ms=new Li.Color;for(;ga.pos<Ss;){let Cs=ga.uint32();switch(Cs>>>3){case 1:if(Ms.rgb&&Ms.rgb.length||(Ms.rgb=[]),(7&Cs)==2){let Ts=ga.uint32()+ga.pos;for(;ga.pos<Ts;)Ms.rgb.push(ga.float())}else Ms.rgb.push(ga.float());break;default:ga.skipType(7&Cs)}}return Ms},ca})();var Ui=function(ca,ga){ga===void 0&&(ga=1e-4),ga=Math.max(ga,Number.EPSILON);for(var _s={},Ss=ca.getIndex(),Ms=ca.getAttribute("position"),Cs=Ss?Ss.count:Ms.count,Ts=0,Bs=Object.keys(ca.attributes),Ps={},Ls={},Rs=[],Ds=["getX","getY","getZ","getW"],$s=0,Fs=Bs.length;$s<Fs;$s++)Ps[Us=Bs[$s]]=[],(Ws=ca.morphAttributes[Us])&&(Ls[Us]=new Array(Ws.length).fill().map(function(){return[]}));var Gs=Math.log10(1/ga),Vs=Math.pow(10,Gs);for($s=0;$s<Cs;$s++){var ks=Ss?Ss.getX($s):$s,Os="",Ns=0;for(Fs=Bs.length;Ns<Fs;Ns++)for(var Us=Bs[Ns],Hs=(js=ca.getAttribute(Us)).itemSize,zs=0;zs<Hs;zs++)Os+="".concat(~~(js[Ds[zs]](ks)*Vs),",");if(Os in _s)Rs.push(_s[Os]);else{for(Ns=0,Fs=Bs.length;Ns<Fs;Ns++){Us=Bs[Ns];var js=ca.getAttribute(Us),Ws=ca.morphAttributes[Us],Qs=(Hs=js.itemSize,Ps[Us]),qs=Ls[Us];for(zs=0;zs<Hs;zs++){var tu=Ds[zs];if(Qs.push(js[tu](ks)),Ws)for(var Ys=0,Ks=Ws.length;Ys<Ks;Ys++)qs[Ys].push(Ws[Ys][tu](ks))}}_s[Os]=Ts,Rs.push(Ts),Ts++}}var Js=ca.clone();for($s=0,Fs=Bs.length;$s<Fs;$s++){Us=Bs[$s];var eu=ca.getAttribute(Us),Zs=new eu.array.constructor(Ps[Us]);if(js=new r$2.BufferAttribute(Zs,eu.itemSize,eu.normalized),Js.setAttribute(Us,js),Us in Ls)for(Ns=0;Ns<Ls[Us].length;Ns++){var au=ca.morphAttributes[Us][Ns],ru=(Zs=new au.array.constructor(Ls[Us][Ns]),new r$2.BufferAttribute(Zs,au.itemSize,au.normalized));Js.morphAttributes[Us][Ns]=ru}}return Js.setIndex(Rs),Js};function Gi(ca){var ga;return new((ga=r$2.Triangle).bind.apply(ga,e$2.__spreadArray([void 0],ca.map(function(_s){return new r$2.Vector3(_s.x,_s.y,_s.z)}),!1)))}var Wi={at3d:function(ca,ga){for(var _s=ki(ga.textureOptions,ca.textures.length),Ss={},Ms=0,Cs=ca.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ri(Ts,_s,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Bs){return ii(Bs.body)}).then(function(Bs){return Ge(function(){for(var Ps,Ls={chunks:[]},Rs=0,Ds=Bs;Rs<Ds.length;Rs++){var $s=Ds[Rs],Fs=Ti.decode($s);Fs.chunks.length&&(Ps=Ls.chunks).push.apply(Ps,Fs.chunks)}return Ls})}).then(function(Bs){return Ge(function(){return Di(Bs,ca.textureBase,ca.textures.slice(),_s,Ss,ga.allowHosts,ga.networkSubscribe)})})},pbm:function(ca,ga){for(var _s=ki(ga.textureOptions,ca.textures.length),Ss={},Ms=0,Cs=ca.textures;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss[Ts]=Ri(Ts,_s,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Bs){return Ge(function(){var Ps=new Uint8Array(Bs.body);return Ti.decode(Ps)})}).then(function(Bs){return Ge(function(){return Di(Bs,ca.textureBase,ca.textures.slice(),_s,Ss,ga.allowHosts,ga.networkSubscribe)})})},dome:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(_s){return _i(new Uint8Array(_s.body),ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})},domez:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(_s){return ii(_s.body)}).then(function(_s){var Ss=_s.reduce(function(Ts,Bs){return Ts+Bs.length},0),Ms=new Uint8Array(Ss),Cs=0;return _s.forEach(function(Ts){Ms.set(Ts,Cs),Cs+=Ts.length}),Ms}).then(function(_s){return _i(_s,ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})}},Xi=function(ca){function ga(_s){_s===void 0&&(_s={});var Ss=ca.call(this)||this;return Ss.empty=!0,Ss.name="model",Ss.loaded=!1,Ss.bvhs=Object.assign([],{loaded:!1}),Ss.bounding=new r$2.Box3,Ss.shownFloor=null,Ss.floorLength=0,Ss.networkSubscribe=_s.networkSubscribe,Ss.allowHosts=_s.allowHosts,Ss.renderOrder=-3,Ss}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),ga.prototype.getEdges=function(_s){var Ss;_s===void 0&&(_s=30/180*Math.PI);for(var Ms=Math.cos(_s),Cs=[],Ts=0,Bs=this.children;Ts<Bs.length;Ts++){var Ps=Bs[Ts];if(Ps instanceof pe){for(var Ls={},Rs=["a","b","c"],Ds=Ui(Ps.geometry),$s=Ds.getAttribute("position").array,Fs=((Ss=Ds.getIndex())===null||Ss===void 0?void 0:Ss.array)||[],Gs=[],Vs=[],ks=0,Os=$s.length;ks<Os;ks+=3)Gs.push(new r$2.Vector3($s[ks],$s[ks+1],$s[ks+2]));for(ks=0,Os=Fs.length;ks<Os;ks+=3){var Ns=Fs[ks],Us=Fs[ks+1],Hs=Fs[ks+2],zs=new r$2.Vector3().crossVectors(Gs[Us].clone().sub(Gs[Ns]),Gs[Hs].clone().sub(Gs[Ns])).normalize();Vs.push({a:Ns,b:Us,c:Hs,normal:zs})}for(ks=0,Os=Vs.length;ks<Os;ks++)for(var js=Vs[ks],Ws=0;Ws<3;Ws++){var Qs=js[Rs[Ws]],qs=js[Rs[(Ws+1)%3]],tu=[Math.min(Qs,qs),Math.max(Qs,qs)];Ls[Ys=tu[0]+"-"+tu[1]]===void 0?Ls[Ys]={index1:tu[0],index2:tu[1],face1:ks}:Ls[Ys].face2=ks}for(var Ys in Ls){var Ks=Ls[Ys];if(Ks.face2===void 0||Vs[Ks.face1].normal.dot(Vs[Ks.face2].normal)<=Ms){var Js=Gs[Ks.index1],eu=Gs[Ks.index2];Cs.push(new r$2.Line3(Js,eu))}}Ds.dispose(),Gs.length=0,Vs.length=0}}return Cs},ga.prototype.hasFloors=function(){return this.hasFloors_()},ga.prototype.hasFloors_=function(){var _s=[];return this.traverse(function(Ss){Ss instanceof pe&&(_s[Ss.floorIndex]=!0)}),_s.length},ga.prototype.show=function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];var Cs=this.shownFloor,Ts=null,Bs=1,Ps=(_s=Ss[1])!==null&&_s!==void 0?_s:.1,Ls=Ss.length!==0;this.shownFloor=Ts=Ls?Ss[0]:null,this.traverse(function(Rs){Rs instanceof pe&&Rs.material.forEach(function(Ds){Ts===null||Ts===Rs.floorIndex?Ds.opacity=Ds.originOpacity*Bs:Ds.opacity=Ds.originOpacity*Ps})}),Cs!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},ga.prototype.intersectRaycaster=function(_s,Ss){var Ms=_s.ray,Cs=Ms.origin,Ts=Ms.direction;if(ji(Ss))if(ji(this.shownFloor)){var Bs=this.floorLength;Ss=[];for(var Ps=-1;Ps<Bs;Ps++)Ss.push(Ps)}else Ss=[this.shownFloor];var Ls=[],Rs=[];Array.isArray(Ss)?Rs.push.apply(Rs,Ss):Rs.push(Ss);for(var Ds=function(Vs){var ks=$s.bvhs&&$s.bvhs[Vs];if(ks){var Os=new ke(Cs.x,Cs.y,Cs.z),Ns=new ke(Ts.x,Ts.y,Ts.z);(Us=ks.intersectRay(Os,Ns,!0).map(function(zs){var js=zs.intersectionPoint,Ws=zs.triangle,Qs=new r$2.Vector3(js.x,js.y,js.z);return{point:Qs,face:{normal:Gi(Ws).getNormal(new r$2.Vector3)},distance:Cs.distanceTo(Qs)}})).length&&Ls.push.apply(Ls,Us)}else{var Us,Hs=[];$s.traverse(function(zs){zs instanceof pe&&zs.floorIndex===Vs&&Hs.push(zs)}),(Us=_s.intersectObjects(Hs).map(function(zs){return{face:zs.face?{normal:zs.face.normal}:void 0,point:zs.point,distance:zs.distance}})).length&&Ls.push.apply(Ls,Us)}},$s=this,Fs=0,Gs=Rs;Fs<Gs.length;Fs++)Ds(Gs[Fs]);return Ls.filter(function(Vs){var ks=Vs.distance;return ks<=_s.far&&ks>=_s.near}).sort(function(Vs,ks){return Vs.distance-ks.distance})},ga.prototype.buildBVH=function(){if(!this.bvhs.loaded){var _s=[];this.traverse(function(zs){zs instanceof pe&&(_s[zs.floorIndex]=_s[zs.floorIndex]||[],_s[zs.floorIndex].push(zs.geometry))}),this.bvhs.length=0;for(var Ss=0,Ms=_s;Ss<Ms.length;Ss++){for(var Cs=Ms[Ss],Ts=0,Bs=0,Ps=Cs;Bs<Ps.length;Bs++)Ts+=(Fs=Ps[Bs]).index?Fs.index.array.length:Fs.attributes.position.array.length;for(var Ls=new Float32Array(3*Ts),Rs=0,Ds=0,$s=Cs;Ds<$s.length;Ds++){var Fs,Gs=(Fs=$s[Ds]).attributes.position.array,Vs=Fs.index?Fs.index.array:null;if(Vs){for(var ks=Vs.length,Os=0,Ns=void 0,Us=void 0;Os<ks;Os++)Ns=3*(Rs+Os),Us=3*Vs[Os],Ls[Ns]=Gs[Us],Ls[Ns+1]=Gs[Us+1],Ls[Ns+2]=Gs[Us+2];Rs+=ks}else{for(ks=Gs.length/3,Os=0,Ns=void 0,Us=void 0;Os<ks;Os++)Us=3*Os,Ls[Ns=3*(Rs+Os)]=Gs[Us],Ls[Ns+1]=Gs[Us+1],Ls[Ns+2]=Gs[Us+2];Rs+=ks}}var Hs=new Ke().create(Ls).splitNode(50);this.bvhs.push(Hs)}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},ga.prototype.load=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Cs=function(Bs,Ps){Ps===void 0&&(Ps=[]);var Ls=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Bs);if(!Ls)return"";for(var Rs=0,Ds=String(Ls[1]).trim().split(".").slice(1).reverse();Rs<Ds.length;Rs++){var $s=Ds[Rs],Fs=Ps.indexOf($s);if(Fs>=0)return Ps[Fs]}return""}(_s.file,Object.keys(Wi)),Ts=Wi[Cs];if(!Ts)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Cs,") does not support."));return this.name=_s.file,Ts(_s,{textureOptions:Ss,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(Bs){var Ps=Bs.objects,Ls=Bs.texturePromise;Ms.bounding.makeEmpty();for(var Rs=0,Ds=Ps;Rs<Ds.length;Rs++)(Vs=Ds[Rs]).traverse(function(ks){if(ks instanceof pe){var Os=ks.geometry;Os.boundingBox||Os.computeBoundingBox(),Os.boundingSphere||Os.computeBoundingSphere(),Ms.bounding.union(Os.boundingBox)}}),Ms.add(Vs);for(var $s=Ms.bounding.getCenter(new r$2.Vector3),Fs=0,Gs=Ps;Fs<Gs.length;Fs++){var Vs;(Vs=Gs[Fs]).traverse(function(ks){if(ks instanceof pe)for(var Os=0,Ns=ks.material;Os<Ns.length;Os++)Ns[Os].uniforms.modelCenter.value=$s})}Ms.floorLength=Ms.hasFloors_(),Ms.empty=!1,Ms.loaded=!0,Ge(function(){Ms.emit("geometryLoaded"),Ls.then(function(){Ms.emit("materialLoaded"),Ms.emit("loaded")})})}).catch(function(Bs){return Ms.name="",Ms.emit("error",Bs),Promise.reject(Bs)})},ga.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},ga}(Ae);Object.assign(Xi.prototype,{on:Ot.prototype.on,once:Ot.prototype.once,off:Ot.prototype.off,emit:Ot.prototype.emit,hasListener:Ot.prototype.hasListener});function Yi(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=[];ca=ca.map(function(Bs){return Bs.trim()}).filter(function(Bs){return Bs.length>0&&!/^\/+$/.test(Bs)});for(var Ss=0;Ss<ca.length;Ss++){var Ms=Ss===0,Cs=Ss===ca.length-1,Ts=ca[Ss];Ms||(Ts=Ts.replace(/^\/+/,"")),Cs||(Ts=Ts.replace(/\/+$/,"")),_s.push(Ts)}return _s.join("/")}function Zi(ca,ga){if(ca===ga)return!0;if(ca&&ga&&typeof ca=="object"&&typeof ga=="object"){if(ca.constructor!==ga.constructor)return!1;var _s,Ss,Ms;if(Array.isArray(ca)){if((_s=ca.length)!=ga.length)return!1;for(Ss=_s;Ss--!=0;)if(!Zi(ca[Ss],ga[Ss]))return!1;return!0}if(ca.constructor===RegExp)return ca.source===ga.source&&ca.flags===ga.flags;if(ca.valueOf!==Object.prototype.valueOf)return ca.valueOf()===ga.valueOf();if(ca.toString!==Object.prototype.toString)return ca.toString()===ga.toString();if((_s=(Ms=Object.keys(ca)).length)!==Object.keys(ga).length)return!1;for(Ss=_s;Ss--!=0;)if(!Object.prototype.hasOwnProperty.call(ga,Ms[Ss]))return!1;for(Ss=_s;Ss--!=0;){var Cs=Ms[Ss];if(!Zi(ca[Cs],ga[Cs]))return!1}return!0}return ca!=ca&&ga!=ga}function Ji(ca){return typeof ca=="number"}function $i(ca){return(ca&ca-1)==0&&ca!==0}var tn=function(){return new Error("Invalid input.")},en=function(){return new Error("Invalid certificate.")},nn=function(){return new Error("Invalid signature.")};function rn(ca,ga){ga===void 0&&(ga=!1);var _s=typeof ca;if(_s==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var Ss="[",Ms=ca.length-1,Cs=0;Cs<Ms;Cs++)Ss+=rn(ca[Cs],!1)+",";return Ms>-1&&(Ss+=rn(ca[Cs],!1)),Ss+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return rn(ca.toJSON(),ga);var Ts=Object.keys(ca).sort(),Bs=Ts.length;for(Ss="",Cs=0;Cs<Bs;){var Ps=Ts[Cs],Ls=rn(ca[Ps],!0);Ls!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Ps)+":"+Ls),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return ga?void 0:null;case"number":return 0;default:return isFinite(ca)?ca:null}}function on(ca){return String(rn(ca,!1))}function sn(ca){var ga,_s,Ss;if(Array.isArray(ca)){var Ms,Cs,Ts=void 0;if(ca.length<=0)return tn();for(var Bs=function(Hs){var zs=sn(ca[Hs]);if(zs instanceof Error)return{value:zs};if(Ts){if(Ts!==zs.issuer)return{value:en()}}else Ts=zs.issuer;Ms?zs.expire.getTime()<Ms.getTime()&&(Ms=zs.expire):Ms=zs.expire,Cs=Cs?Cs.filter(function(js){return zs.allowHosts.indexOf(js)!==-1}):zs.allowHosts},Ps=0;Ps<ca.length;Ps++){var Ls=Bs(Ps);if(typeof Ls=="object")return Ls.value}return Kt({issuer:Ts,expire:Ms,allowHosts:Cs})}var Rs=JSON.parse(ca),Ds=typeof location!="undefined"?location.hostname:"",$s=Date.now();if(typeof Rs!="object")return tn();var Fs=new Date(typeof Rs.expire_at=="string"&&/^\d+$/.test(Rs.expire_at)?Number(Rs.expire_at):Rs.expire_at),Gs=Array.isArray(Rs.allow_hosts)?Rs.allow_hosts:[];if(Ds.length===0||qt(Ds)||Ut.filter(function(Hs){return _t(Hs,Ds)}).length>0){var Vs=String((ga=Rs.certificate)!==null&&ga!==void 0?ga:"");if(Vs){var ks=new Mt;return ks.readCertPEM(Vs),Kt({issuer:ks.getSubjectString(),expire:Fs,allowHosts:Gs})}return Kt({issuer:"none",expire:Fs,allowHosts:Gs})}var Os=String((_s=Rs.certificate)!==null&&_s!==void 0?_s:"");if(!Os)return en();var Ns=new Mt;Ns.readCertPEM(Os);var Us=String((Ss=Rs._signature)!==null&&Ss!==void 0?Ss:"");return Us?function(Hs,zs,js){var Ws=new Mt;if(typeof js=="string"?Ws.readCertPEM(js):Ws.readCertHex(js.hex),Dt(Ws)===!1)return!1;var Qs=new X;return Qs.readCertPubKeyHex(Ws.hex,6),!!Qs.verify(Hs,F$1(zs))}(on(function(Hs,zs){for(var js={},Ws=0,Qs=Object.keys(Hs);Ws<Qs.length;Ws++){var qs=Qs[Ws];zs.indexOf(qs)===-1&&(js[qs]=Hs[qs])}return js}(Rs,["_signature"])),Us,Ns)===!1?nn():$s<Fs.getTime()?Gs.filter(function(Hs){return _t(Hs,Ds)}).length===0?function(Hs){return new Error("host(".concat(JSON.stringify(Hs),") is not allowed."))}(Ds):Kt({issuer:Ns.getSubjectString(),expire:Fs,allowHosts:Gs}):function(Hs){return new Error("date(".concat(Hs.toString(),") expired."))}(Fs):nn()}var an=new WeakMap,un=function(){function ca(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return ca.prototype.toJSON=function(){return this.raw.works},ca.parse=dn,ca}();function ln(ca){return ca==null?"null":Array.isArray(ca)?"array":typeof ca=="object"?"dict":"value"}function hn(ca,ga){var _s=ln(ca),Ss=ln(ga);if(Ss==="null")return ca;if(Ss==="value")return ga;if(Ss!==_s)return JSON.parse(JSON.stringify(ga));if(Ss==="array")for(var Ms=0;Ms<ga.length;Ms++)ca[Ms]=hn(ca[Ms],ga[Ms]);else if(Ss==="dict")for(var Cs in ga)ca[Cs]=hn(ca[Cs],ga[Cs]);return ca}function cn(ca,ga,_s){for(var Ss,Ms=JSON.stringify(ga),Cs=[],Ts=0,Bs=[].concat(ca);Ts<Bs.length;Ts++){var Ps=Bs[Ts];Ps instanceof un?Cs.push.apply(Cs,Ps.raw.works):typeof Ps=="string"?Cs.push(Ps):Cs.push(JSON.stringify(Ps))}var Ls=sn(Cs);if(Ls instanceof Error)return Ls;ga=JSON.parse(Ms),ca=Cs.map(function(Nu){return JSON.parse(Nu)}).reduce(function(Nu,ju){return hn(Nu,ju)});var Rs=new un;if(Ls instanceof Error)return Ls;Rs.issuer=Ls.issuer,Rs.expire=Ls.expire,Rs.allowHosts=Ls.allowHosts,Rs.raw={works:Cs,options:Ms};var Ds=(Ss=ca.base_url)!==null&&Ss!==void 0?Ss:"";Ds&&Ds[Ds.length-1]!=="/"&&(Ds+="/");var $s=function(Nu,ju){return Nu.indexOf(ju)===0},Fs=function(Nu,ju){var nu,uu=Nu;if(ga.jsonp===!0){uu=Nu.replace(/([\?\#].*)?$/i,"");var Pu=Pt("".concat(uu)).slice(0,7);uu="".concat(uu,".").concat(Pu,".jsonp")}if(ga.shortPath===!0){var Iu=uu.replace(Ds,"").split("."),Ku=(nu=Iu.shift())!==null&&nu!==void 0?nu:"",Fu=Iu.join(".");uu=Yi(Ds,Pt(Ku))+(Fu?"."+Fu:"")}var Ru=uu.replace(Ds,"");return ga.baseURL&&(uu=Yi(ga.baseURL,Ru)),_s&&_s(Nu,uu,Ru,ju),uu},Gs=function(Nu,ju){var nu,uu,Pu,Iu,Ku,Fu,Ru=Nu;if(!Fi(Nu)){var il=(Fu=(Iu=(uu=(nu=ca.panorama)===null||nu===void 0?void 0:nu.pano_high_cube_base_url)!==null&&uu!==void 0?uu:(Pu=ca.panorama)===null||Pu===void 0?void 0:Pu.pano_cube_base_url)!==null&&Iu!==void 0?Iu:(Ku=ca.panorama)===null||Ku===void 0?void 0:Ku.base_url)!==null&&Fu!==void 0?Fu:"";il&&(il=Yi(il,String(ju))),Ru=Yi(il,Ru)}return Fi(Ru)||(Ru=Yi(Ds,Ru)),$s(Ru,Ds)||console.warn("".concat(Ru," is not start with base_url(").concat(Ds,").")),Fs(Ru,"panorama")},Vs=function(Nu){var ju=Nu;return Fi(ju)||(ju=Yi(Ds,Nu)),$s(ju,Ds)||console.warn("".concat(ju," is not start with base_url(").concat(Ds,").")),Fs(ju,"model")},ks=function(Nu,ju){ju===void 0&&(ju="");var nu=Nu;return Fi(nu)||(nu=Yi(ju,nu)),Fi(nu)||(nu=Yi(Ds,nu)),$s(nu,Ds)||console.warn("".concat(nu," is not start with base_url(").concat(Ds,").")),Fs(nu,"texture")};if(Ls instanceof Error||(Rs.workCode=String(ca.work_code||ca.code||ca.vr_code||ca.workCode),Rs.name=String(ca.name),Ls instanceof Error)||(ca.initial&&(ca.initial.mode!=="Floorplan"&&ca.initial.mode!=="Topview"&&ca.initial.mode!=="Panorama"&&ca.initial.mode!=="VRPanorama"&&ca.initial.mode!=="Model"&&ca.initial.mode!=="DepthPanorama"||(Rs.initial.mode=ca.initial.mode),Ji(ca.initial.latitude)&&(Rs.initial.latitude=ca.initial.latitude),Ji(ca.initial.longitude)?Rs.initial.longitude=ca.initial.longitude:Ji(ca.initial.heading)&&(Rs.initial.longitude=-(360*(ca.initial.heading-.25)+90)/180*Math.PI),Ji(ca.initial.fov)&&(Rs.initial.fov=ca.initial.fov),Ji(ca.initial.panoIndex)?Rs.initial.panoIndex=ca.initial.panoIndex:Ji(ca.initial.pano_index)?Rs.initial.panoIndex=ca.initial.pano_index:Ji(ca.initial.pano)&&(Rs.initial.panoIndex=ca.initial.pano)),Ls instanceof Error))return Ls;if(ca.model){var Os={bvh:!0,async:!1,textureBase:"",textures:[]};typeof ga.modelBvh=="boolean"?Os.bvh=ga.modelBvh:typeof ca.model.bvh=="boolean"?Os.bvh=ca.model.bvh:typeof ca.bvh=="boolean"&&(Os.bvh=ca.bvh),ca.model.file?Os.file=Vs(ca.model.file):ca.model.file_url&&(Os.file=Vs(ca.model.file_url)),ca.model.textureBase?Os.textureBase=ca.model.textureBase:ca.model.material_base_url&&(Os.textureBase=ca.model.material_base_url),Array.isArray(ca.model.textures)?Os.textures=ca.model.textures.map(function(Nu){return ks(Nu,Os.textureBase)}):Array.isArray(ca.model.material_textures)&&(Os.textures=ca.model.material_textures.map(function(Nu){return ks(Nu,Os.textureBase)})),Os.file&&(Rs.model=Os)}if(Ls instanceof Error)return Ls;if(ca.observers&&Array.isArray(ca.observers)){var Ns=[];ca.panorama&&(Array.isArray(ca.panorama)?Ns=ca.panorama:Array.isArray(ca.panorama.list)?Ns=ca.panorama.list:Array.isArray(ca.panorama.info)&&(Ns=ca.panorama.info));for(var Us=0;Us<ca.observers.length;Us++){var Hs={},zs=ca.observers[Us];if(!zs)break;var js=Ns[Us];if(!js)break;zs=Object.assign({},zs,js,{active:zs.active!==!1&&js.active!==!1}),Hs.panoIndex=Us,Hs.active=zs.active!==!1,Hs.loadable=zs.loadable===!0,Hs.images={up:Gs(zs.images?zs.images.up:zs.up,Us),down:Gs(zs.images?zs.images.down:zs.down,Us),right:Gs(zs.images?zs.images.right:zs.right,Us),left:Gs(zs.images?zs.images.left:zs.left,Us),front:Gs(zs.images?zs.images.front:zs.front,Us),back:Gs(zs.images?zs.images.back:zs.back,Us)};var Ws=zs.images?zs.images.depth:zs.depth;Ws&&(Hs.images.depth=Gs(Ws,Us));var Qs=zs.images?zs.images.luminance:zs.luminance;Qs&&(Hs.images.luminance={up:Gs(Qs.up,Us),down:Gs(Qs.down,Us),right:Gs(Qs.right,Us),left:Gs(Qs.left,Us),front:Gs(Qs.front,Us),back:Gs(Qs.back,Us)});var qs=zs.images?zs.images.tiles:zs.tiles;if(qs){for(var tu=[],Ys=function(Nu){var ju=Nu.match(/\/cube_(\d+)\//);if(ju){var nu=Number(ju[1]);if($i(nu))return nu}return!1},Ks=function(Nu,ju){return Nu.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(ju,"/")})},Js=0,eu=qs;Js<eu.length;Js++){var Zs=eu[Js];if(typeof Zs=="number"){var au=Zs,ru=Ys(Hs.images.front);if(ru===!1)continue;if((du=Math.max(ru,512*Math.pow(2,au)))>2048){var su=Ks(Hs.images.up,du),lu=Ks(Hs.images.down,du),gu=Ks(Hs.images.right,du),hu=Ks(Hs.images.left,du),wu=Ks(Hs.images.front,du),Mu=Ks(Hs.images.back,du);tu.push({level:au,size:du,up:su,down:lu,right:gu,left:hu,front:wu,back:Mu})}else su=Hs.images.up,lu=Hs.images.down,gu=Hs.images.right,hu=Hs.images.left,wu=Hs.images.front,Mu=Hs.images.back,tu.push({level:au,size:du,up:su,down:lu,right:gu,left:hu,front:wu,back:Mu})}else{var du;if(typeof(au=Zs.level)!="number"||typeof(du=Zs.size)!="number")continue;su=Gs(Zs.up,Us),lu=Gs(Zs.down,Us),gu=Gs(Zs.right,Us),hu=Gs(Zs.left,Us),wu=Gs(Zs.front,Us),Mu=Gs(Zs.back,Us),tu.push({level:au,size:du,up:su,down:lu,right:gu,left:hu,front:wu,back:Mu})}}tu.sort(function(Nu,ju){return Nu.level-ju.level}),Hs.images.tiles=tu}if(zs.position instanceof r$2.Vector3)Hs.position=zs.position.clone();else{if(!Array.isArray(zs.position))break;Hs.position=new r$2.Vector3().fromArray(zs.position)}if(zs.standingPosition instanceof r$2.Vector3)Hs.standingPosition=zs.standingPosition.clone();else if(Array.isArray(zs.standingPosition))Hs.standingPosition=new r$2.Vector3().fromArray(zs.standingPosition);else if(zs.standing_position instanceof r$2.Vector3)Hs.standingPosition=zs.standing_position.clone();else{if(!Array.isArray(zs.standing_position))break;Hs.standingPosition=new r$2.Vector3().fromArray(zs.standing_position)}if(zs.quaternion instanceof r$2.Quaternion)Hs.quaternion=zs.quaternion.clone();else if(Array.isArray(zs.quaternion))Hs.quaternion=new r$2.Quaternion().fromArray(zs.quaternion);else{if(!zs.quaternion)break;var vu=zs.quaternion,pu=vu.x,yu=vu.y,Su=vu.z,Tu=vu.w;Hs.quaternion=new r$2.Quaternion(pu,yu,Su,Tu)}if(Array.isArray(zs.accessibleNodes)?Hs.accessibleNodes=zs.accessibleNodes.slice():Array.isArray(zs.accessible_nodes)&&(Hs.accessibleNodes=zs.accessible_nodes.slice()),Array.isArray(zs.visibleNodes)?Hs.visibleNodes=zs.visibleNodes.slice():Array.isArray(zs.visible_nodes)&&(Hs.visibleNodes=zs.visible_nodes.slice()),Ji(zs.floorIndex)?Hs.floorIndex=zs.floorIndex:Ji(zs.floor_index)?Hs.floorIndex=zs.floor_index:Hs.floorIndex=0,zs.video){var bu={};typeof zs.video.source=="string"&&(bu.source=zs.video.source),zs.video.matrix instanceof r$2.Matrix4?bu.matrix=zs.video.matrix.clone():Array.isArray(zs.video.matrix)&&(bu.matrix=new r$2.Matrix4().fromArray(zs.video.matrix)),zs.video.size instanceof r$2.Vector2?bu.size=zs.video.size.clone():Array.isArray(zs.video.size)&&(bu.size=new r$2.Vector2().fromArray(zs.video.size)),bu.source&&bu.matrix&&bu.size&&(Hs.video=bu)}Rs.observers[Us]=Hs}}if(Ls instanceof Error)return Ls;for(var Au=0,Bu=Rs.observers;Au<Bu.length;Au++){if(!(Hs=Bu[Au]).accessibleNodes){Hs.accessibleNodes=[];for(var Lu=0;Lu<Rs.observers.length;Lu++)Rs.observers[Lu]!==Hs&&Hs.accessibleNodes.push(Lu)}if(!Hs.visibleNodes)for(Hs.visibleNodes=[],Lu=0;Lu<Rs.observers.length;Lu++)Rs.observers[Lu]!==Hs&&Hs.visibleNodes.push(Lu)}if(Ls instanceof Error)return Ls;var Qu=Kt(Rs);return an.set(Qu,{works:Cs,options:Ms}),Qu}function dn(ca,ga,_s){typeof ca=="string"&&ca.trim()[0]==="{"&&(ca=JSON.parse(ca));var Ss=an.get(ca);if(Ss){if(ga&&!Zi(JSON.parse(Ss.options),ga))throw new Error("[PARSE FAILED]: work is parsed with different options.");return ca}var Ms=cn(ca,ga!=null?ga:{},_s);if(Ms instanceof Error)throw new Error("[PARSE FAILED]: "+Ms.message);return Ms}function pn(ca,ga,_s){return ca<ga?ga:ca>_s?_s:ca}function An(ca,ga,_s){return ca+(ga-ca)*_s}function fn(ca,ga){var _s=ga[1]-ga[0];return ca<ga[0]?fn(ca+_s,ga):ca>=ga[1]?fn(ca-_s,ga):ca}function gn(ca,ga,_s,Ss){return Ss?function(Ms,Cs,Ts,Bs){var Ps=Bs[1]-Bs[0];return Ms=fn(Ms,Bs),An((Cs=fn(Cs,Bs))-Ms>Ps/2?Ms+Ps:Ms-Cs>Ps/2?Ms-Ps:Ms,Cs,Ts)}(ca,ga,_s,Ss):An(ca,ga,_s)}var vn=function(){function ca(ga){for(var _s in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ht(),this.startVelocity=0,this.duration=0,this.keyframes=[],ga){var Ss=ga[_s];typeof Ss=="number"?(this.value[_s]=Ss,this.config[_s]={circle:!1}):(this.value[_s]=Ss.value,this.config[_s]={circle:Ss.circle})}this.keyframes=[{progress:0,value:e$2.__assign({},this.value)},{progress:1,value:e$2.__assign({},this.value)}]}return ca.prototype.getProgress=function(ga){var _s=ga-this.startTime;return _s<0?0:_s>=this.duration?1:1-function(Ss,Ms,Cs,Ts){var Bs=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Ps=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ls=Ms,Rs=Ss;return Bs*Math.pow(Ts,3)+Ps*Math.pow(Ts,2)+Ls*Ts+Rs}(1,this.startVelocity,this.duration,_s)},ca.prototype.getValue=function(ga){for(var _s=1;_s<this.keyframes.length;_s++)if(this.keyframes[_s].progress>ga){var Ss=this.keyframes[_s-1],Ms=this.keyframes[_s],Cs={};for(var Ts in this.config){var Bs=(ga-Ss.progress)/(Ms.progress-Ss.progress);Cs[Ts]=gn(Ss.value[Ts],Ms.value[Ts],Bs,this.config[Ts].circle)}return Cs}return e$2.__assign({},this.keyframes[this.keyframes.length-1].value)},ca.prototype.getProgressVelocity=function(ga){var _s=ga-this.startTime;return _s>=this.duration?0:function(Ss,Ms,Cs,Ts){var Bs=(Ms*Cs+2*Ss)/Math.pow(Cs,3),Ps=-(2*Ms*Cs+3*Ss)/Math.pow(Cs,2),Ls=Ms;return 3*Bs*Math.pow(Ts,2)+2*Ps*Ts+Ls}(1,this.startVelocity,this.duration,_s)},ca.prototype.update=function(ga){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(ga))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},ca.prototype.getKeyFrameSegment=function(ga){for(var _s=this.getProgress(ga),Ss=1;Ss<this.keyframes.length;Ss++)if(this.keyframes[Ss].progress>_s)return[this.keyframes[Ss-1],this.keyframes[Ss]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},ca.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},ca.prototype.set=function(ga,_s,Ss,Ms){var Cs;Ss===void 0&&(Ss=0),Ms=Ms!=null?Ms:Ht();var Ts=this.getProgress(Ms),Bs=this.getValue(Ts),Ps={};for(var Ls in this.config)Ps[Ls]=(Cs=ga[Ls])!==null&&Cs!==void 0?Cs:Bs[Ls];var Rs=[{progress:0,value:Bs},{progress:1,value:Ps}];return this.setKeyframes(Rs,_s,Ss,Ms)},ca.prototype.setKeyframes=function(ga,_s,Ss,Ms){var Cs=this;if(Ss===void 0&&(Ss=0),ga.length<2)throw new Error("keyframes invalid.");return this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Ts,Bs){Ms=Ms!=null?Ms:Ht(),Cs.progress=0,Cs.ended=!1,Cs.startTime=Ms,Cs.startVelocity=Ss,Cs.keyframes=ga,Cs.duration=_s,_s===0?(Cs.progress=1,Cs.value=e$2.__assign({},ga[ga.length-1].value)):Cs.value=e$2.__assign({},ga[0].value),Cs.callbacks=[Ts,Bs]})},ca.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},ca}(),mn=me(),yn=new r$2.Texture(mn);mn.onload=function(){return yn.needsUpdate=!0},mn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var bn=new r$2.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),wn=new r$2.MeshBasicMaterial({map:yn,transparent:!0}),xn=new r$2.SphereBufferGeometry(.12,16,16),En=new r$2.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function In(){if(typeof document=="undefined"){var ca=new r$2.Texture;return Object.assign(ca,{draw:function(Rs){},retain:!1,pool:!1})}var ga=document.createElement("canvas"),_s=512,Ss=256,Ms=190;ga.setAttribute("width",String(_s)),ga.setAttribute("height",String(_s));var Cs=new r$2.Texture(ga),Ts=ga.getContext("2d");if(!Ts)throw Error("cannot create canvas context");var Bs=Ts.createRadialGradient(Ss,Ss,150,Ss,Ss,0);function Ps(){var Rs=Math.PI/12,Ds=2*Math.PI/3;Ts&&(Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0*Ds,1*Ds-Rs),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,1*Ds,2*Ds-Rs),Ts.stroke(),Ts.beginPath(),Ts.arc(Ss,Ss,Ms,2*Ds,3*Ds-Rs),Ts.stroke())}function Ls(Rs){Ts&&(Ts.clearRect(0,0,_s,_s),Ts.lineWidth=20,Rs!==-1&&(Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, 1)",Ps(),Ts.globalCompositeOperation="source-in",Ts.beginPath(),Ts.arc(Ss,Ss,Ms,0,2*Math.PI*Rs),Ts.strokeStyle="rgba(255, 255, 255, 1)",Ts.stroke(),Ts.globalCompositeOperation="source-over",Ts.strokeStyle="rgba(255, 255, 255, "+(Rs?.5:1)+")",Ps()),Ts.beginPath(),Ts.arc(Ss,Ss,150,0,2*Math.PI),Ts.closePath(),Ts.fillStyle=Bs,Ts.fill(),Ts.fillStyle="rgba(255, 255, 255, 0.01)",Ts.fillRect(0,0,_s,_s),Cs.needsUpdate=!0)}return Bs.addColorStop(0,"rgba(255, 255, 255, 1)"),Bs.addColorStop(.15,"rgba(255, 255, 255, 1)"),Bs.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Bs.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Ls(0),Object.assign(Cs,{draw:Ls,retain:!1,pool:!1})}var Cn=[],Sn=In();Sn.draw(0);var Bn=In();Bn.draw(1);var Mn=In();Mn.draw(-1);var Pn=new r$2.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Tn(){return new r$2.Mesh(Pn,new r$2.MeshBasicMaterial({map:Sn,transparent:!0}))}function Qn(ca,ga){var _s=ca.map;ga===0||ga===1?(_s.pool===!0&&(_s.retain=!1),ga===0&&(ca.map=Sn),ga===1&&(ca.map=Bn)):(_s.pool!==!0&&(ca.map=function(){for(var Ss=0,Ms=Cn;Ss<Ms.length;Ss++){var Cs=Ms[Ss];if(Cs.retain===!1)return Cs}var Ts=In();return Ts.pool=!0,Ts.retain=!0,Cn.push(Ts),Ts}()),ca.map.draw(ga))}var Rn=function(ca){function ga(){var _s=ca.call(this)||this;return _s.loading=!1,_s.disabled=!1,_s.current=!1,_s.progress=0,_s.opacity=0,_s.hitTestMesh=new r$2.Mesh(xn,En),_s.add(_s.hitTestMesh),_s.centerMesh=Tn(),_s.centerMesh.position.y+=.01,_s.add(_s.centerMesh),_s.loadingMesh=new r$2.Mesh(bn,wn),_s.loadingMesh.position.y+=.011,_s.progressMotion=new vn({progress:_s.progress}),_s.opacityMotion=new vn({opacity:_s.opacity}),_s.needsRender=!0,_s.renderOrder=-2,_s}return e$2.__extends(ga,ca),ga.prototype.setLoading=function(_s){var Ss=this;this.loading=_s,this.stopInterval&&this.stopInterval(),_s?(this.add(this.loadingMesh),this.stopInterval=se.shared.add(function(){Ss.loadingMesh.rotateOnAxis(new r$2.Vector3(0,1,0),.1),Ss.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},ga.prototype.setDisabled=function(_s){this.disabled=_s,function(Ss,Ms){var Cs=Ss.map;Cs.pool===!0&&(Cs.retain=!1),Ss.map=Ms?Mn:Sn}(this.centerMesh.material,_s),this.needsRender=!0},ga.prototype.setProgress=function(_s){this.setLoading(!1),this.setDisabled(!1),this.progress=_s=pn(_s,0,1),_s!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:_s},120).catch(Lt)},ga.prototype.setOpacity=function(_s){this.opacity=_s=pn(_s,0,1),this.current&&(_s=1),_s!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:_s},500).catch(Lt)},ga.prototype.setCurrent=function(_s){this.current!==_s&&(this.current=_s,this.setOpacity(this.opacity))},ga.prototype.updateTime=function(_s,Ss){this.opacityMotion.ended||(this.opacityMotion.update(_s),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(_s),Qn(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},ga.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},ga}(r$2.Object3D),Dn=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),kn=new Float32Array([0,1,1,1,0,0,1,0]),Fn=new Uint8Array([0,2,1,2,3,1]),Nn=new r$2.BufferGeometry;Nn.setAttribute("position",new r$2.BufferAttribute(Dn,3)),Nn.setAttribute("uv",new r$2.BufferAttribute(kn,2)),Nn.setIndex(new r$2.BufferAttribute(Fn,1));var On,Ln,Vn=(On=me(),Ln=new r$2.Texture,On.onload=function(){if(typeof document!="undefined"){var ca=256,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){_s.drawImage(On,0,0,ca,ca),_s.globalCompositeOperation="source-out";var Ss=128;_s.beginPath(),_s.lineWidth=29.952,_s.arc(Ss,Ss,84.48,0,2*Math.PI),_s.strokeStyle="rgba(255, 255, 255, 0.5)",_s.closePath(),_s.stroke(),Ln.image=ga,Ln.needsUpdate=!0}}},On.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Ln),Hn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=199.68;return ga.beginPath(),ga.arc(_s,_s,Ss,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Kn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=138.24,Ms=ga.createLinearGradient(_s-Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s+Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 1)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Ms.addColorStop(1,"rgba(255, 255, 255, 1)"),ga.beginPath(),ga.lineWidth=33.28,ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle=Ms,ga.shadowBlur=38.4,ga.shadowColor="rgba(0, 0, 0, 0.3)",ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),zn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256,Ss=199.68,Ms=ga.createLinearGradient(_s+Math.cos(Math.PI/4)*Ss,_s-Math.sin(Math.PI/4)*Ss,_s-Math.cos(Math.PI/4)*Ss,_s+Math.sin(Math.PI/4)*Ss);return Ms.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.5)"),ga.beginPath(),ga.lineWidth=15.36,ga.arc(_s,_s,Ss,0,2*Math.PI),ga.strokeStyle=Ms,ga.shadowBlur=25.6,ga.shadowColor="rgba(0, 0, 0, 0.5)",ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),qn=function(ca,ga){var _s=128;ca.clearRect(0,0,256,256),ca.beginPath(),ca.lineWidth=29.44,ca.arc(_s,_s,84.48,0,2*Math.PI*ga),ca.strokeStyle="rgba(255, 255, 255, 0.2)",ca.stroke()},_n=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(256)),ca.setAttribute("height",String(256));var ga=ca.getContext("2d");ga&&qn(ga,2*Math.PI);var _s=new r$2.CanvasTexture(ca);return Object.assign(_s,{setProgress:function(Ss){ga&&(qn(ga,Ss),_s.needsUpdate=!0)}})}return null},jn=[],Un=_n(),Gn=function(ca){function ga(){var _s=ca.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.ringRotateMotion=new vn({angle:0}),_s.tapMotion=new vn({scale:1,opacity:1}),_s.progressMotion=new vn({progress:0}),_s.progressOpacityMotion=new vn({opacity:0}),_s.opacityMotion=new vn({opacity:0});var Ss={blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor,depthWrite:!1};return _s.centerMesh=new r$2.Mesh(Nn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Kn}))),_s.ringMesh=new r$2.Mesh(Nn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:zn}))),_s.loadingMesh=new r$2.Mesh(Nn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Vn,opacity:.5}))),_s.disableMesh=new r$2.Mesh(Nn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Hn}))),_s.progressMesh=new r$2.Mesh(Nn,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Un,opacity:0}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.ringMesh.position.y=.003,_s.disableMesh.position.y=.002,_s.centerMesh.position.y=.002,_s.loadingMesh.position.y=.005,_s.progressMesh.position.y=.004,_s.centerMesh.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.progressMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.renderOrder=-2,_s.add(_s.centerMesh),_s.add(_s.ringMesh),_s.add(_s.progressMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga.prototype.setProgress=function(_s){this.setDisabled(!1),this.setLoading(!1),this.progress!==_s&&(_s=pn(_s,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Lt),_s===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Lt),this.progressMotion.set({progress:pn(1.2*_s,0,1)},0).catch(Lt)):this.progressMotion.set({progress:pn(1.2*_s,0,1)},100).catch(Lt)),this.progress=_s)},ga.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=pn(_s,0,1),this.opacityMotion.set({opacity:_s},500).catch(Lt))},ga.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s===!0&&this.ringRotateMotion.ended){var Ss=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ss,5e3).catch(Lt)}this.current=_s}},ga.prototype.setLoading=function(_s){this.loading!==_s&&(this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=_s,this.needsRender=!0)},ga.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.ringMesh.visible=!_s,this.centerMesh.visible=!_s,this.needsRender=!0)},ga.prototype.tap=function(){var _s=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Lt),this.progressMotion.set({progress:0},0).catch(Lt),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){_s.progressOpacityMotion.set({opacity:_s.progress>0?1:0},300).catch(Lt),_s.progressMotion.set({progress:_s.progress},120).catch(Lt)}).catch(Lt)):Promise.resolve()},ga.prototype.updateTime=function(_s,Ss){var Ms;if(!this.progressMotion.ended){this.progressMotion.update(_s);var Cs=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Cs===0)this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=Un);else if(Cs===1)this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=Un);else{if(this.progressMesh.material.map===Un){var Ts=jn.pop()||_n();this.progressMesh.material.map=Ts}(Ms=this.progressMesh.material.map)===null||Ms===void 0||Ms.setProgress(Cs)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(_s);var Bs=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Bs,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(_s),Bs=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bs,this.ringMesh.material.opacity=Bs,this.disableMesh.material.opacity=Bs,this.loadingMesh.material.opacity=Bs,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ss/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(_s);var Ps=this.tapMotion.value.scale;this.centerMesh.scale.set(Ps,Ps,Ps),this.ringMesh.scale.set(Ps,Ps,Ps),this.progressMesh.scale.set(Ps,Ps,Ps),Bs=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Bs,this.ringMesh.material.opacity=Bs,this.disableMesh.material.opacity=Bs,this.loadingMesh.material.opacity=Bs,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(_s),this.ringMesh.quaternion.setFromEuler(new r$2.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},ga.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==Un&&(jn.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},ga}(r$2.Object3D),Wn=new r$2.CircleBufferGeometry(.1,16),Xn=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=192,Cs=76.8;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=12.8,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,153.6,Ss,Ss,230.4);Ts.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.3)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4.8,_s.arc(Ss,Ss,228,0,2*Math.PI);var Bs=_s.createLinearGradient(0,0,ca,0);return Bs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bs.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Bs,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Yn=new r$2.MeshBasicMaterial({map:Xn,transparent:!0}),Zn=function(ca){function ga(){var _s=ca.call(this)||this;return _s.ringMesh=new r$2.Mesh(Wn,Yn),_s.ringMesh.renderOrder=-3,_s.add(_s.ringMesh),_s}return e$2.__extends(ga,ca),ga.prototype.dispose=function(){this.remove(this.ringMesh)},ga}(r$2.Object3D);function Jn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function $n(){return(Jn()+Jn()+"-"+Jn()+"-4"+Jn().substr(0,3)+"-"+Jn()+"-"+Jn()+Jn()+Jn()).toLowerCase()}function tr(ca,ga,_s){var Ss=Math.abs(ca-ga);return Ss<.001||_s!==void 0&&Math.abs(_s-Ss)<.001}function er(ca,ga,_s){return!tr(ca,ga,_s)}function ir(ca,ga){return ca.distanceTo(ga)<.001}function nr(ca,ga){return!ir(ca,ga)}var rr=new r$2.Vector3(0,0,0),or=function(ca){function ga(_s,Ss){Ss===void 0&&(Ss=rr);var Ms=ca.call(this)||this,Cs=new r$2.BoxBufferGeometry(_s.max.x-_s.min.x+2*Ss.x,_s.max.y-_s.min.y+2*Ss.y,_s.max.z-_s.min.z+2*Ss.z,1,1);Cs.groups.length=0,Cs.groups.push({start:0,count:36,materialIndex:0}),Cs.applyMatrix4(new r$2.Matrix4().makeScale(-1,1,1));var Ts=new Ee;Ts.defines.USE_MAP=!1,Ts.defines.USE_UV=!1,Ts.uniforms.diffuse.value=new r$2.Color(16777215);var Bs=new pe(Cs,[Ts]);return Bs.floorIndex=-1,Bs.position.copy(_s.getCenter(new r$2.Vector3)),Bs.frustumCulled=!1,Ms.renderOrder=-3,Ms.add(Bs),Ms.boundingBox=new r$2.Box3,Ms.computeBoundingBox(),Ms}return e$2.__extends(ga,ca),ga.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},ga.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},ga}(fe);function sr(ca,ga){return ga===void 0&&(ga=rr),new or(ca,ga)}var ar=2*Math.PI;function ur(ca){return ca>=0&&ca<ar?ca:(ca%ar+ar)%ar}var lr=Math.PI,hr=2*lr;function cr(ca,ga,_s){if(ca===ga)return ga;var Ss=ga-ca;return Math.abs(Ss)<=_s?ga:ca+(Ss>0?1:-1)*_s}(function(){try{var ca=document.createElement("canvas");!window.WebGLRenderingContext||!ca.getContext("webgl")&&ca.getContext("experimental-webgl")}catch{return!1}})();var dr=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(ca)||/webos/i.test(ca)||/ipad|iphone|ipod/i.test(ca)||/iemobile/i.test(ca)||/opera mini/i.test(ca)||/blackberry/i.test(ca)||/windows phone/i.test(ca)};function pr(ca,ga){ca.mode=ga.mode,ca.panoIndex=ga.panoIndex,ca.longitude=ga.longitude,ca.latitude=ga.latitude,ca.fov=ga.fov,ca.offset.copy(ga.offset)}function Ar(ca,ga){return ca.panoIndex===ga.panoIndex&&ca.mode===ga.mode&&tr(ca.longitude,ga.longitude,2*Math.PI)&&tr(ca.latitude,ga.latitude)&&tr(ca.fov,ga.fov)&&ir(ca.offset,ga.offset)}var fr=function(ca){return Number(ca)};function gr(ca,ga,_s){var Ss;ga===void 0&&(ga=fr),_s===void 0&&(_s=!1);for(var Ms,Cs=1/0,Ts=0,Bs=ca;Ts<Bs.length;Ts++){var Ps=Bs[Ts],Ls=ga(Ps);Ls<=Cs&&(Ms=(Ss=[Ps,Ls])[0],Cs=Ss[1])}return _s?[Ms,Cs]:Ms}function vr(ca){for(var ga in ca)return!1;return!0}function mr(ca){return{longitude:ca.longitude,latitude:ca.latitude,fov:ca.fov,offset:ca.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var yr=function(ca,ga,_s,Ss){var Ms,Cs=["","webkit","Moz","MS","ms","o"],Ts=ga.createElement?ga.createElement("div"):Ss,Bs=Math.round,Ps=Math.abs,Ls=Date.now;function Rs(Xs,ou,cu){return setTimeout(Os(Xs,cu),ou)}function Ds(Xs,ou,cu){return!!Array.isArray(Xs)&&($s(Xs,cu[ou],cu),!0)}function $s(Xs,ou,cu){var mu;if(Xs)if(Xs.forEach)Xs.forEach(ou,cu);else if(Xs.length!==Ss)for(mu=0;mu<Xs.length;)ou.call(cu,Xs[mu],mu,Xs),mu++;else for(mu in Xs)Xs.hasOwnProperty(mu)&&ou.call(cu,Xs[mu],mu,Xs)}function Fs(Xs,ou,cu){var mu="DEPRECATED METHOD: "+ou+`
`+cu+` AT 
`;return function(){var Cu=new Error("get-stack-trace"),qu=Cu&&Cu.stack?Cu.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",tl=ca.console&&(ca.console.warn||ca.console.log);return tl&&tl.call(ca.console,mu,qu),Xs.apply(this,arguments)}}Ms=typeof Object.assign!="function"?function(Xs){if(Xs===Ss||Xs===null)throw new TypeError("Cannot convert undefined or null to object");for(var ou=Object(Xs),cu=1;cu<arguments.length;cu++){var mu=arguments[cu];if(mu!==Ss&&mu!==null)for(var Cu in mu)mu.hasOwnProperty(Cu)&&(ou[Cu]=mu[Cu])}return ou}:Object.assign;var Gs=Fs(function(Xs,ou,cu){for(var mu=Object.keys(ou),Cu=0;Cu<mu.length;)(!cu||cu&&Xs[mu[Cu]]===Ss)&&(Xs[mu[Cu]]=ou[mu[Cu]]),Cu++;return Xs},"extend","Use `assign`."),Vs=Fs(function(Xs,ou){return Gs(Xs,ou,!0)},"merge","Use `assign`.");function ks(Xs,ou,cu){var mu,Cu=ou.prototype;(mu=Xs.prototype=Object.create(Cu)).constructor=Xs,mu._super=Cu,cu&&Ms(mu,cu)}function Os(Xs,ou){return function(){return Xs.apply(ou,arguments)}}function Ns(Xs,ou){return typeof Xs=="function"?Xs.apply(ou&&ou[0]||Ss,ou):Xs}function Us(Xs,ou){return Xs===Ss?ou:Xs}function Hs(Xs,ou,cu){$s(Qs(ou),function(mu){Xs.addEventListener(mu,cu,!1)})}function zs(Xs,ou,cu){$s(Qs(ou),function(mu){Xs.removeEventListener(mu,cu,!1)})}function js(Xs,ou){for(;Xs;){if(Xs==ou)return!0;Xs=Xs.parentNode}return!1}function Ws(Xs,ou){return Xs.indexOf(ou)>-1}function Qs(Xs){return Xs.trim().split(/\s+/g)}function qs(Xs,ou,cu){if(Xs.indexOf&&!cu)return Xs.indexOf(ou);for(var mu=0;mu<Xs.length;){if(cu&&Xs[mu][cu]==ou||!cu&&Xs[mu]===ou)return mu;mu++}return-1}function tu(Xs){return Array.prototype.slice.call(Xs,0)}function Ys(Xs,ou,cu){for(var mu=[],Cu=[],qu=0;qu<Xs.length;){var tl=ou?Xs[qu][ou]:Xs[qu];qs(Cu,tl)<0&&mu.push(Xs[qu]),Cu[qu]=tl,qu++}return cu&&(mu=ou?mu.sort(function(cl,Wu){return cl[ou]>Wu[ou]}):mu.sort()),mu}function Ks(Xs,ou){for(var cu,mu,Cu=ou[0].toUpperCase()+ou.slice(1),qu=0;qu<Cs.length;){if((mu=(cu=Cs[qu])?cu+Cu:ou)in Xs)return mu;qu++}return Ss}var Js=1;function eu(Xs){var ou=Xs.ownerDocument||Xs;return ou.defaultView||ou.parentWindow||ca}var Zs="ontouchstart"in ca,au=Ks(ca,"PointerEvent")!==Ss,ru=Zs&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),su="touch",lu="mouse",gu=24,hu=["x","y"],wu=["clientX","clientY"];function Mu(Xs,ou){var cu=this;this.manager=Xs,this.callback=ou,this.element=Xs.element,this.target=Xs.options.inputTarget,this.domHandler=function(mu){Ns(Xs.options.enable,[Xs])&&cu.handler(mu)},this.init()}function du(Xs,ou,cu){var mu=cu.pointers.length,Cu=cu.changedPointers.length,qu=1&ou&&mu-Cu==0,tl=12&ou&&mu-Cu==0;cu.isFirst=!!qu,cu.isFinal=!!tl,qu&&(Xs.session={}),cu.eventType=ou,function(cl,Wu){var hl=cl.session,Al=Wu.pointers,Cl=Al.length;hl.firstInput||(hl.firstInput=vu(Wu)),Cl>1&&!hl.firstMultiple?hl.firstMultiple=vu(Wu):Cl===1&&(hl.firstMultiple=!1);var Pl=hl.firstInput,Tl=hl.firstMultiple,Rl=Tl?Tl.center:Pl.center,Dl=Wu.center=pu(Al);Wu.timeStamp=Ls(),Wu.deltaTime=Wu.timeStamp-Pl.timeStamp,Wu.angle=bu(Rl,Dl),Wu.distance=Tu(Rl,Dl),function(yl,fl){var xl=fl.center,Sl=yl.offsetDelta||{},El=yl.prevDelta||{},Ml=yl.prevInput||{};fl.eventType!==1&&Ml.eventType!==4||(El=yl.prevDelta={x:Ml.deltaX||0,y:Ml.deltaY||0},Sl=yl.offsetDelta={x:xl.x,y:xl.y}),fl.deltaX=El.x+(xl.x-Sl.x),fl.deltaY=El.y+(xl.y-Sl.y)}(hl,Wu),Wu.offsetDirection=Su(Wu.deltaX,Wu.deltaY);var Bl=yu(Wu.deltaTime,Wu.deltaX,Wu.deltaY);Wu.overallVelocityX=Bl.x,Wu.overallVelocityY=Bl.y,Wu.overallVelocity=Ps(Bl.x)>Ps(Bl.y)?Bl.x:Bl.y,Wu.scale=Tl?function(yl,fl){return Tu(fl[0],fl[1],wu)/Tu(yl[0],yl[1],wu)}(Tl.pointers,Al):1,Wu.rotation=Tl?function(yl,fl){return bu(fl[1],fl[0],wu)+bu(yl[1],yl[0],wu)}(Tl.pointers,Al):0,Wu.maxPointers=hl.prevInput?Wu.pointers.length>hl.prevInput.maxPointers?Wu.pointers.length:hl.prevInput.maxPointers:Wu.pointers.length,function(yl,fl){var xl,Sl,El,Ml,_l=yl.lastInterval||fl,Ol=fl.timeStamp-_l.timeStamp;if(fl.eventType!=8&&(Ol>25||_l.velocity===Ss)){var Fl=fl.deltaX-_l.deltaX,$l=fl.deltaY-_l.deltaY,Il=yu(Ol,Fl,$l);Sl=Il.x,El=Il.y,xl=Ps(Il.x)>Ps(Il.y)?Il.x:Il.y,Ml=Su(Fl,$l),yl.lastInterval=fl}else xl=_l.velocity,Sl=_l.velocityX,El=_l.velocityY,Ml=_l.direction;fl.velocity=xl,fl.velocityX=Sl,fl.velocityY=El,fl.direction=Ml}(hl,Wu);var Ll=cl.element;js(Wu.srcEvent.target,Ll)&&(Ll=Wu.srcEvent.target),Wu.target=Ll}(Xs,cu),Xs.emit("hammer.input",cu),Xs.recognize(cu),Xs.session.prevInput=cu}function vu(Xs){for(var ou=[],cu=0;cu<Xs.pointers.length;)ou[cu]={clientX:Bs(Xs.pointers[cu].clientX),clientY:Bs(Xs.pointers[cu].clientY)},cu++;return{timeStamp:Ls(),pointers:ou,center:pu(ou),deltaX:Xs.deltaX,deltaY:Xs.deltaY}}function pu(Xs){var ou=Xs.length;if(ou===1)return{x:Bs(Xs[0].clientX),y:Bs(Xs[0].clientY)};for(var cu=0,mu=0,Cu=0;Cu<ou;)cu+=Xs[Cu].clientX,mu+=Xs[Cu].clientY,Cu++;return{x:Bs(cu/ou),y:Bs(mu/ou)}}function yu(Xs,ou,cu){return{x:ou/Xs||0,y:cu/Xs||0}}function Su(Xs,ou){return Xs===ou?1:Ps(Xs)>=Ps(ou)?Xs<0?2:4:ou<0?8:16}function Tu(Xs,ou,cu){cu||(cu=hu);var mu=ou[cu[0]]-Xs[cu[0]],Cu=ou[cu[1]]-Xs[cu[1]];return Math.sqrt(mu*mu+Cu*Cu)}function bu(Xs,ou,cu){cu||(cu=hu);var mu=ou[cu[0]]-Xs[cu[0]],Cu=ou[cu[1]]-Xs[cu[1]];return 180*Math.atan2(Cu,mu)/Math.PI}Mu.prototype={handler:function(){},init:function(){this.evEl&&Hs(this.element,this.evEl,this.domHandler),this.evTarget&&Hs(this.target,this.evTarget,this.domHandler),this.evWin&&Hs(eu(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&zs(this.element,this.evEl,this.domHandler),this.evTarget&&zs(this.target,this.evTarget,this.domHandler),this.evWin&&zs(eu(this.element),this.evWin,this.domHandler)}};var Au={mousedown:1,mousemove:2,mouseup:4},Bu="mousedown",Lu="mousemove mouseup";function Qu(){this.evEl=Bu,this.evWin=Lu,this.pressed=!1,Mu.apply(this,arguments)}ks(Qu,Mu,{handler:function(Xs){var ou=Au[Xs.type];1&ou&&Xs.button===0&&(this.pressed=!0),2&ou&&Xs.which!==1&&(ou=4),this.pressed&&(4&ou&&(this.pressed=!1),this.callback(this.manager,ou,{pointers:[Xs],changedPointers:[Xs],pointerType:lu,srcEvent:Xs}))}});var Nu={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ju={2:su,3:"pen",4:lu,5:"kinect"},nu="pointerdown",uu="pointermove pointerup pointercancel";function Pu(){this.evEl=nu,this.evWin=uu,Mu.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ca.MSPointerEvent&&!ca.PointerEvent&&(nu="MSPointerDown",uu="MSPointerMove MSPointerUp MSPointerCancel"),ks(Pu,Mu,{handler:function(Xs){var ou=this.store,cu=!1,mu=Xs.type.toLowerCase().replace("ms",""),Cu=Nu[mu],qu=ju[Xs.pointerType]||Xs.pointerType,tl=qu==su,cl=qs(ou,Xs.pointerId,"pointerId");1&Cu&&(Xs.button===0||tl)?cl<0&&(ou.push(Xs),cl=ou.length-1):12&Cu&&(cu=!0),cl<0||(ou[cl]=Xs,this.callback(this.manager,Cu,{pointers:ou,changedPointers:[Xs],pointerType:qu,srcEvent:Xs}),cu&&ou.splice(cl,1))}});var Iu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ku="touchstart",Fu="touchstart touchmove touchend touchcancel";function Ru(){this.evTarget=Ku,this.evWin=Fu,this.started=!1,Mu.apply(this,arguments)}function il(Xs,ou){var cu=tu(Xs.touches),mu=tu(Xs.changedTouches);return 12&ou&&(cu=Ys(cu.concat(mu),"identifier",!0)),[cu,mu]}ks(Ru,Mu,{handler:function(Xs){var ou=Iu[Xs.type];if(ou===1&&(this.started=!0),this.started){var cu=il.call(this,Xs,ou);12&ou&&cu[0].length-cu[1].length==0&&(this.started=!1),this.callback(this.manager,ou,{pointers:cu[0],changedPointers:cu[1],pointerType:su,srcEvent:Xs})}}});var Ju={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Xu="touchstart touchmove touchend touchcancel";function Ou(){this.evTarget=Xu,this.targetIds={},Mu.apply(this,arguments)}function Uu(Xs,ou){var cu=tu(Xs.touches),mu=this.targetIds;if(3&ou&&cu.length===1)return mu[cu[0].identifier]=!0,[cu,cu];var Cu,qu,tl=tu(Xs.changedTouches),cl=[],Wu=this.target;if(qu=cu.filter(function(hl){return js(hl.target,Wu)}),ou===1)for(Cu=0;Cu<qu.length;)mu[qu[Cu].identifier]=!0,Cu++;for(Cu=0;Cu<tl.length;)mu[tl[Cu].identifier]&&cl.push(tl[Cu]),12&ou&&delete mu[tl[Cu].identifier],Cu++;return cl.length?[Ys(qu.concat(cl),"identifier",!0),cl]:void 0}ks(Ou,Mu,{handler:function(Xs){var ou=Ju[Xs.type],cu=Uu.call(this,Xs,ou);cu&&this.callback(this.manager,ou,{pointers:cu[0],changedPointers:cu[1],pointerType:su,srcEvent:Xs})}});function $u(){Mu.apply(this,arguments);var Xs=Os(this.handler,this);this.touch=new Ou(this.manager,Xs),this.mouse=new Qu(this.manager,Xs),this.primaryTouch=null,this.lastTouches=[]}function Hu(Xs,ou){1&Xs?(this.primaryTouch=ou.changedPointers[0].identifier,fu.call(this,ou)):12&Xs&&fu.call(this,ou)}function fu(Xs){var ou=Xs.changedPointers[0];if(ou.identifier===this.primaryTouch){var cu={x:ou.clientX,y:ou.clientY};this.lastTouches.push(cu);var mu=this.lastTouches;setTimeout(function(){var Cu=mu.indexOf(cu);Cu>-1&&mu.splice(Cu,1)},2500)}}function ku(Xs){for(var ou=Xs.srcEvent.clientX,cu=Xs.srcEvent.clientY,mu=0;mu<this.lastTouches.length;mu++){var Cu=this.lastTouches[mu],qu=Math.abs(ou-Cu.x),tl=Math.abs(cu-Cu.y);if(qu<=25&&tl<=25)return!0}return!1}ks($u,Mu,{handler:function(Xs,ou,cu){var mu=cu.pointerType==su,Cu=cu.pointerType==lu;if(!(Cu&&cu.sourceCapabilities&&cu.sourceCapabilities.firesTouchEvents)){if(mu)Hu.call(this,ou,cu);else if(Cu&&ku.call(this,cu))return;this.callback(Xs,ou,cu)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Vu=Ts?Ks(Ts.style,"touchAction"):Ss,nl=Vu!==Ss,Gu="compute",ol="auto",sl="manipulation",ul="none",ml="pan-x",al="pan-y",dl=function(){if(!nl)return!1;var Xs={},ou=ca.CSS&&ca.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(cu){Xs[cu]=!ou||ca.CSS.supports("touch-action",cu)}),Xs}();function vl(Xs,ou){this.manager=Xs,this.set(ou)}vl.prototype={set:function(Xs){Xs==Gu&&(Xs=this.compute()),nl&&this.manager.element.style&&dl[Xs]&&(this.manager.element.style[Vu]=Xs),this.actions=Xs.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Xs=[];return $s(this.manager.recognizers,function(ou){Ns(ou.options.enable,[ou])&&(Xs=Xs.concat(ou.getTouchAction()))}),function(ou){if(Ws(ou,ul))return ul;var cu=Ws(ou,ml),mu=Ws(ou,al);return cu&&mu?ul:cu||mu?cu?ml:al:Ws(ou,sl)?sl:ol}(Xs.join(" "))},preventDefaults:function(Xs){var ou=Xs.srcEvent,cu=Xs.offsetDirection;if(this.manager.session.prevented)ou.preventDefault();else{var mu=this.actions,Cu=Ws(mu,ul)&&!dl.none,qu=Ws(mu,al)&&!dl["pan-y"],tl=Ws(mu,ml)&&!dl["pan-x"];if(Cu){var cl=Xs.pointers.length===1,Wu=Xs.distance<2,hl=Xs.deltaTime<250;if(cl&&Wu&&hl)return}if(!tl||!qu)return Cu||qu&&6&cu||tl&&cu&gu?this.preventSrc(ou):void 0}},preventSrc:function(Xs){this.manager.session.prevented=!0,Xs.preventDefault()}};var pl=32;function gl(Xs){this.options=Ms({},this.defaults,Xs||{}),this.id=Js++,this.manager=null,this.options.enable=Us(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function bl(Xs){return 16&Xs?"cancel":8&Xs?"end":4&Xs?"move":2&Xs?"start":""}function wl(Xs){return Xs==16?"down":Xs==8?"up":Xs==2?"left":Xs==4?"right":""}function iu(Xs,ou){var cu=ou.manager;return cu?cu.get(Xs):Xs}function _u(){gl.apply(this,arguments)}function xu(){_u.apply(this,arguments),this.pX=null,this.pY=null}function Eu(){_u.apply(this,arguments)}function Du(){gl.apply(this,arguments),this._timer=null,this._input=null}function el(){_u.apply(this,arguments)}function Zu(){_u.apply(this,arguments)}function zu(){gl.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Yu(Xs,ou){return(ou=ou||{}).recognizers=Us(ou.recognizers,Yu.defaults.preset),new rl(Xs,ou)}gl.prototype={defaults:{},set:function(Xs){return Ms(this.options,Xs),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Xs){if(Ds(Xs,"recognizeWith",this))return this;var ou=this.simultaneous;return ou[(Xs=iu(Xs,this)).id]||(ou[Xs.id]=Xs,Xs.recognizeWith(this)),this},dropRecognizeWith:function(Xs){return Ds(Xs,"dropRecognizeWith",this)||(Xs=iu(Xs,this),delete this.simultaneous[Xs.id]),this},requireFailure:function(Xs){if(Ds(Xs,"requireFailure",this))return this;var ou=this.requireFail;return qs(ou,Xs=iu(Xs,this))===-1&&(ou.push(Xs),Xs.requireFailure(this)),this},dropRequireFailure:function(Xs){if(Ds(Xs,"dropRequireFailure",this))return this;Xs=iu(Xs,this);var ou=qs(this.requireFail,Xs);return ou>-1&&this.requireFail.splice(ou,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Xs){return!!this.simultaneous[Xs.id]},emit:function(Xs){var ou=this,cu=this.state;function mu(Cu){ou.manager.emit(Cu,Xs)}cu<8&&mu(ou.options.event+bl(cu)),mu(ou.options.event),Xs.additionalEvent&&mu(Xs.additionalEvent),cu>=8&&mu(ou.options.event+bl(cu))},tryEmit:function(Xs){if(this.canEmit())return this.emit(Xs);this.state=pl},canEmit:function(){for(var Xs=0;Xs<this.requireFail.length;){if(!(33&this.requireFail[Xs].state))return!1;Xs++}return!0},recognize:function(Xs){var ou=Ms({},Xs);if(!Ns(this.options.enable,[this,ou]))return this.reset(),void(this.state=pl);56&this.state&&(this.state=1),this.state=this.process(ou),30&this.state&&this.tryEmit(ou)},process:function(Xs){},getTouchAction:function(){},reset:function(){}},ks(_u,gl,{defaults:{pointers:1},attrTest:function(Xs){var ou=this.options.pointers;return ou===0||Xs.pointers.length===ou},process:function(Xs){var ou=this.state,cu=Xs.eventType,mu=6&ou,Cu=this.attrTest(Xs);return mu&&(8&cu||!Cu)?16|ou:mu||Cu?4&cu?8|ou:2&ou?4|ou:2:pl}}),ks(xu,_u,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Xs=this.options.direction,ou=[];return 6&Xs&&ou.push(al),Xs&gu&&ou.push(ml),ou},directionTest:function(Xs){var ou=this.options,cu=!0,mu=Xs.distance,Cu=Xs.direction,qu=Xs.deltaX,tl=Xs.deltaY;return Cu&ou.direction||(6&ou.direction?(Cu=qu===0?1:qu<0?2:4,cu=qu!=this.pX,mu=Math.abs(Xs.deltaX)):(Cu=tl===0?1:tl<0?8:16,cu=tl!=this.pY,mu=Math.abs(Xs.deltaY))),Xs.direction=Cu,cu&&mu>ou.threshold&&Cu&ou.direction},attrTest:function(Xs){return _u.prototype.attrTest.call(this,Xs)&&(2&this.state||!(2&this.state)&&this.directionTest(Xs))},emit:function(Xs){this.pX=Xs.deltaX,this.pY=Xs.deltaY;var ou=wl(Xs.direction);ou&&(Xs.additionalEvent=this.options.event+ou),this._super.emit.call(this,Xs)}}),ks(Eu,_u,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ul]},attrTest:function(Xs){return this._super.attrTest.call(this,Xs)&&(Math.abs(Xs.scale-1)>this.options.threshold||2&this.state)},emit:function(Xs){if(Xs.scale!==1){var ou=Xs.scale<1?"in":"out";Xs.additionalEvent=this.options.event+ou}this._super.emit.call(this,Xs)}}),ks(Du,gl,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ol]},process:function(Xs){var ou=this.options,cu=Xs.pointers.length===ou.pointers,mu=Xs.distance<ou.threshold,Cu=Xs.deltaTime>ou.time;if(this._input=Xs,!mu||!cu||12&Xs.eventType&&!Cu)this.reset();else if(1&Xs.eventType)this.reset(),this._timer=Rs(function(){this.state=8,this.tryEmit()},ou.time,this);else if(4&Xs.eventType)return 8;return pl},reset:function(){clearTimeout(this._timer)},emit:function(Xs){this.state===8&&(Xs&&4&Xs.eventType?this.manager.emit(this.options.event+"up",Xs):(this._input.timeStamp=Ls(),this.manager.emit(this.options.event,this._input)))}}),ks(el,_u,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ul]},attrTest:function(Xs){return this._super.attrTest.call(this,Xs)&&(Math.abs(Xs.rotation)>this.options.threshold||2&this.state)}}),ks(Zu,_u,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return xu.prototype.getTouchAction.call(this)},attrTest:function(Xs){var ou,cu=this.options.direction;return 30&cu?ou=Xs.overallVelocity:6&cu?ou=Xs.overallVelocityX:cu&gu&&(ou=Xs.overallVelocityY),this._super.attrTest.call(this,Xs)&&cu&Xs.offsetDirection&&Xs.distance>this.options.threshold&&Xs.maxPointers==this.options.pointers&&Ps(ou)>this.options.velocity&&4&Xs.eventType},emit:function(Xs){var ou=wl(Xs.offsetDirection);ou&&this.manager.emit(this.options.event+ou,Xs),this.manager.emit(this.options.event,Xs)}}),ks(zu,gl,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[sl]},process:function(Xs){var ou=this.options,cu=Xs.pointers.length===ou.pointers,mu=Xs.distance<ou.threshold,Cu=Xs.deltaTime<ou.time;if(this.reset(),1&Xs.eventType&&this.count===0)return this.failTimeout();if(mu&&Cu&&cu){if(Xs.eventType!=4)return this.failTimeout();var qu=!this.pTime||Xs.timeStamp-this.pTime<ou.interval,tl=!this.pCenter||Tu(this.pCenter,Xs.center)<ou.posThreshold;if(this.pTime=Xs.timeStamp,this.pCenter=Xs.center,tl&&qu?this.count+=1:this.count=1,this._input=Xs,this.count%ou.taps==0)return this.hasRequireFailures()?(this._timer=Rs(function(){this.state=8,this.tryEmit()},ou.interval,this),2):8}return pl},failTimeout:function(){return this._timer=Rs(function(){this.state=pl},this.options.interval,this),pl},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Yu.VERSION="2.0.7",Yu.defaults={domEvents:!1,touchAction:Gu,enable:!0,inputTarget:null,inputClass:null,preset:[[el,{enable:!1}],[Eu,{enable:!1},["rotate"]],[Zu,{direction:6}],[xu,{direction:6},["swipe"]],[zu],[zu,{event:"doubletap",taps:2},["tap"]],[Du]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function rl(Xs,ou){var cu;this.options=Ms({},Yu.defaults,ou||{}),this.options.inputTarget=this.options.inputTarget||Xs,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Xs,this.input=new((cu=this).options.inputClass||(au?Pu:ru?Ou:Zs?$u:Qu))(cu,du),this.touchAction=new vl(this,this.options.touchAction),ll(this,!0),$s(this.options.recognizers,function(mu){var Cu=this.add(new mu[0](mu[1]));mu[2]&&Cu.recognizeWith(mu[2]),mu[3]&&Cu.requireFailure(mu[3])},this)}function ll(Xs,ou){var cu,mu=Xs.element;mu.style&&($s(Xs.options.cssProps,function(Cu,qu){cu=Ks(mu.style,qu),ou?(Xs.oldCssProps[cu]=mu.style[cu],mu.style[cu]=Cu):mu.style[cu]=Xs.oldCssProps[cu]||""}),ou||(Xs.oldCssProps={}))}return rl.prototype={set:function(Xs){return Ms(this.options,Xs),Xs.touchAction&&this.touchAction.update(),Xs.inputTarget&&(this.input.destroy(),this.input.target=Xs.inputTarget,this.input.init()),this},stop:function(Xs){this.session.stopped=Xs?2:1},recognize:function(Xs){var ou=this.session;if(!ou.stopped){var cu;this.touchAction.preventDefaults(Xs);var mu=this.recognizers,Cu=ou.curRecognizer;(!Cu||Cu&&8&Cu.state)&&(Cu=ou.curRecognizer=null);for(var qu=0;qu<mu.length;)cu=mu[qu],ou.stopped===2||Cu&&cu!=Cu&&!cu.canRecognizeWith(Cu)?cu.reset():cu.recognize(Xs),!Cu&&14&cu.state&&(Cu=ou.curRecognizer=cu),qu++}},get:function(Xs){if(Xs instanceof gl)return Xs;for(var ou=this.recognizers,cu=0;cu<ou.length;cu++)if(ou[cu].options.event==Xs)return ou[cu];return null},add:function(Xs){if(Ds(Xs,"add",this))return this;var ou=this.get(Xs.options.event);return ou&&this.remove(ou),this.recognizers.push(Xs),Xs.manager=this,this.touchAction.update(),Xs},remove:function(Xs){if(Ds(Xs,"remove",this))return this;if(Xs=this.get(Xs)){var ou=this.recognizers,cu=qs(ou,Xs);cu!==-1&&(ou.splice(cu,1),this.touchAction.update())}return this},on:function(Xs,ou){if(Xs!==Ss&&ou!==Ss){var cu=this.handlers;return $s(Qs(Xs),function(mu){cu[mu]=cu[mu]||[],cu[mu].push(ou)}),this}},off:function(Xs,ou){if(Xs!==Ss){var cu=this.handlers;return $s(Qs(Xs),function(mu){ou?cu[mu]&&cu[mu].splice(qs(cu[mu],ou),1):delete cu[mu]}),this}},emit:function(Xs,ou){this.options.domEvents&&function(Cu,qu){var tl=ga.createEvent("Event");tl.initEvent(Cu,!0,!0),tl.gesture=qu,qu.target.dispatchEvent(tl)}(Xs,ou);var cu=this.handlers[Xs]&&this.handlers[Xs].slice();if(cu&&cu.length){ou.type=Xs,ou.preventDefault=function(){ou.srcEvent.preventDefault()};for(var mu=0;mu<cu.length;)cu[mu](ou),mu++}},destroy:function(){this.element&&ll(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ms(Yu,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:pl,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:gu,DIRECTION_ALL:30,Manager:rl,Input:Mu,TouchAction:vl,TouchInput:Ou,MouseInput:Qu,PointerEventInput:Pu,TouchMouseInput:$u,SingleTouchInput:Ru,Recognizer:gl,AttrRecognizer:_u,Tap:zu,Pan:xu,Swipe:Zu,Pinch:Eu,Rotate:el,Press:Du,on:Hs,off:zs,each:$s,merge:Vs,extend:Gs,assign:Ms,inherit:ks,bindFn:Os,prefixed:Ks}),Yu}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function br(ca,ga,_s){var Ss=ga.offsetWidth,Ms=ga.offsetHeight,Cs=ga.getBoundingClientRect(),Ts=Cs.top,Bs=Cs.left;return _s&&(Bs+=Ss*_s.left,Ts+=Ms*(1-_s.bottom-_s.height),Ss*=_s.width,Ms*=_s.height),new r$2.Vector2((ca.x-Bs)/Ss*2-1,-(ca.y-Ts)/Ms*2+1)}var wr=new r$2.OrthographicCamera(-1,1,1,-1,0,1),xr=new r$2.BufferGeometry;xr.setAttribute("position",new r$2.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),xr.setAttribute("uv",new r$2.Float32BufferAttribute([0,2,0,0,2,0],2));var Er=new r$2.Mesh(xr),Ir=new r$2.Scene;Ir.add(Er);var Cr=function(){function ca(ga,_s){var Ss;this.renderer=ga,this.material=new r$2.ShaderMaterial({vertexShader:(Ss=_s.vertex)!==null&&Ss!==void 0?Ss:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:_s.fragment,uniforms:Object.assign({inputBuffer:new r$2.Uniform(null)},_s.uniforms),defines:Object.assign({},_s.defines),blending:r$2.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getRenderTarget(),Ms=Er.material;this.material.uniforms.inputBuffer.value=ga.texture,Er.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(Ir,wr),this.renderer.setRenderTarget(Ss),Er.material=Ms},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Sr=function(){function ca(ga){this.renderer=ga,this.material=new r$2.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$2.Uniform(new r$2.Vector3)}),blending:r$2.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getRenderTarget(),Ms=Er.material;this.material.uniforms.inputValue.value.copy(ga),Er.material=this.material,this.renderer.setRenderTarget(_s||null),this.renderer.render(Ir,wr),this.renderer.setRenderTarget(Ss),Er.material=Ms},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Br=function(ca){function ga(_s){return ca.call(this,_s,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return e$2.__extends(ga,ca),ga}(Cr),Mr=function(){function ca(ga){this.enable=!0,this.renderer=ga,this.copyPass=new Br(this.renderer)}return ca.prototype.render=function(ga,_s,Ss){this.copyPass.render(ga,_s)},ca.prototype.dispose=function(){this.copyPass.dispose()},ca}(),Pr=function(ca){function ga(_s){var Ss,Ms=ca.call(this)||this,Cs=ga.parseArgs(_s);return Ms.pending=!0,Ms.userAction=Cs.initial[3],Ms.destroyed=!1,Ms.ident=Cs.ident,Ms.scene=Cs.scene,Ms.helper=Cs.helper,Ms.camera=Cs.camera,Ms.renderer=Cs.renderer,Ms.scissor=Cs.scissor,Ms.element=Cs.element,Ms.model=Cs.model,Ms.enableIOSEDR=(Ss=Cs.enableIOSEDR)!==null&&Ss!==void 0&&Ss,Ms.work=Cs.work,Ms.imageOptions=Cs.imageOptions,Ms.videoTexture=Cs.videoTexture,Ms.networkSubscribe=Cs.networkSubscribe,Ms.needsRender=!0,Ms.maxFov=120,Ms.minFov=40,Ms.maxLatitude=+Math.PI/2,Ms.minLatitude=-Math.PI/2,Ms.cameraMotion=new vn({longitude:{value:Ms.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Ms.camera.pose.latitude,fov:Ms.camera.pose.fov}),Ms.eventUnbinds=[Cs.element].concat(Cs.extraElements||[]).map(function(Ts){return Ms.bindEvents(Ts)}),se.shared.add(function(){return Ms.initAnimation.apply(Ms,Cs.initial)},!0),Ms}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){return e$2.__assign({},_s)},ga.initAnimationEndState=function(_s){var Ss=this.parseArgs(_s);return{longitude:Ss.camera.pose.longitude,latitude:Ss.camera.pose.latitude,fov:Ss.camera.pose.fov,offset:Ss.camera.pose.offset.clone()}},ga.prototype.destroy=function(){var _s;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)(0,Ms[Ss])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(_s=this.pressState)===null||_s===void 0||_s.stop(),delete this.pressState},ga.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},ga.prototype.bindExtraElement=function(_s){for(var Ss=0,Ms=this.eventUnbinds;Ss<Ms.length;Ss++)if(Ms[Ss].element===_s)return;this.eventUnbinds.push(this.bindEvents(_s))},ga.prototype.unbindExtraElement=function(_s){for(var Ss=[],Ms=0,Cs=this.eventUnbinds;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ts.element===_s?Ts():Ss.push(Ts)}this.eventUnbinds=Ss},ga.prototype.updateRenderSize=function(){this.needsRender=!0},ga.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,this.userAction=Ts,!1},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={};this.cameraMotion.ended&&(this.cameraMotion.update(_s),Ms.longitude=this.cameraMotion.value.longitude,Ms.latitude=this.cameraMotion.value.latitude,Ms.fov=this.cameraMotion.value.fov),vr(Ms)&&this.setCamera(Ms)}},ga.prototype.render=function(_s){this.renderer.render(this.scene,this.camera)},ga.prototype.postProcessing=function(_s,Ss,Ms){this.destroyed||(this.effect||(this.effect=new Mr(this.renderer)),this.effect.render(_s,Ss,Ms))},ga.prototype.updateCamera=function(_s,Ss,Ms){return this.userAction=Ms,this.cameraMotion.set(_s,Ss)},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:this.camera.pose.offset.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),this.userAction=Ms;var Cs={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};Ss.moveStartCallback&&Ss.moveStartCallback(_s,Cs),this.emit("moveToPano",_s,this.userAction),this.emit("panoWillArrive",_s,Cs,this.userAction),this.emit("panoArrived",_s,Cs,this.userAction),Ss.moveEndCallback&&Ss.moveEndCallback(_s,Cs)},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){this.pending=!1,this.userAction=Cs},ga.prototype.setCamera=function(_s){var Ss,Ms,Cs,Ts,Bs;_s===void 0&&(_s={});var Ps=(Ss=_s.longitude)!==null&&Ss!==void 0?Ss:this.camera.pose.longitude,Ls=(Ms=_s.latitude)!==null&&Ms!==void 0?Ms:this.camera.pose.latitude,Rs=(Cs=_s.fov)!==null&&Cs!==void 0?Cs:this.camera.pose.fov,Ds=(Ts=_s.distance)!==null&&Ts!==void 0?Ts:this.camera.pose.distance,$s=(Bs=_s.offset)!==null&&Bs!==void 0?Bs:this.camera.pose.offset,Fs=this.camera.position.clone(),Gs=er(Ps,this.camera.pose.longitude,2*Math.PI)||er(Ls,this.camera.pose.latitude),Vs=er(Rs,this.camera.pose.fov),ks=er(Ds,this.camera.pose.distance),Os=nr($s,this.camera.pose.offset);this.camera.setFromPose({longitude:Ps,latitude:Ls,fov:Rs,distance:Ds,offset:$s});var Ns=nr(Fs,this.camera.position);Vs&&this.emit("cameraFovUpdate",Rs,this.userAction),Gs&&this.emit("cameraDirectionUpdate",{longitude:Ps,latitude:Ls},this.userAction),Ns&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(Vs||Gs||Os||ks)&&this.emit("cameraUpdate",{longitude:Ps,latitude:Ls,fov:Rs,offset:$s},this.userAction),this.needsRender=!0,(ze||_e.length!==0)&&(ze&&clearTimeout(ze),ze=window.setTimeout(Ue,200))},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Ts){return ni(Ts,["x","y"])});this.emit("wantsGesture","pan",Cs,_s.isFinal)||this.emit("gesture","pan",Cs,_s.isFinal)}},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ni(Ms,["x","y"])});this.emit("wantsGesture","tap",Ss,!0)||this.emit("gesture","tap",Ss,!0)},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs=[_s];if(this.emit("wantsGesture","press",Cs,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;this.emit("gesture","press",Cs,Ss)},ga.prototype.onPinchGesture=function(_s){var Ss=_s.pointers.map(function(Ms){return ni(Ms,["x","y"])});this.emit("wantsGesture","pinch",Ss,_s.isFinal)||this.emit("gesture","pinch",Ss,_s.isFinal)},ga.prototype.onMouseWheel=function(_s){var Ss=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Ms=[{x:_s.clientX,y:_s.clientY,delta:Ss}];this.emit("wantsGesture","mouseWheel",Ms,!1)||this.emit("gesture","mouseWheel",Ms,!1)},ga.prototype.onMouseMove=function(_s){},ga.prototype.onMouseOut=function(){},ga.prototype.relativeClientPosition=function(_s){return br(_s,this.element,this.scissor)},ga.prototype.bindEvents=function(_s){var Ss=this,Ms=function(Vs){var ks=br(Vs,Ss.element,Ss.scissor);return!(Math.abs(ks.x)>1||Math.abs(ks.y)>1)},Cs=new yr.Manager(_s),Ts=function(Vs){return Vs.session.firstInput||null};Cs.add(new yr.Pan({threshold:10,pointers:0})),Cs.add(new yr.Tap({interval:410})),Cs.add(new yr.Pinch({threshold:0,pointers:2}).recognizeWith(Cs.get("pan"))),Cs.on("panstart pan",function(Vs){var ks=Ts(Cs);ks&&!Ms(ks.center)||(Ss.onPanGesture(Vs),Fs())}),Cs.on("tap",function(Vs){var ks=Ts(Cs);ks&&!Ms(ks.center)||(Ss.onTapGesture(Vs),Fs())}),Cs.on("pinchstart pinch pinchend",function(Vs){var ks=Ts(Cs);ks&&!Ms(ks.center)||(Ss.onPinchGesture(Vs),Fs())});var Bs=function(Vs){var ks={x:Vs.clientX,y:Vs.clientY};Ms(ks)&&(Ss.onMouseWheel(Vs),Fs())},Ps=function(Vs){if(!dr()){var ks={x:Vs.clientX,y:Vs.clientY};Ms(ks)?(Ss.onMouseMove(Vs),Ss.pressState&&Math.abs(Vs.clientX-Ss.pressState.x)>10&&Math.abs(Vs.clientY-Ss.pressState.y)>10&&Fs()):Ss.onMouseOut()}},Ls=function(){Ss.onMouseOut(),Fs()},Rs=function(Vs,ks){if(Ms(Vs)){Ss.pressState={x:Vs.x,y:Vs.y,time:Ss.pressState?Ss.pressState.time:ks,stop:Lt};var Os=ks-Ss.pressState.time;Ss.onPressGesture({x:Vs.x,y:Vs.y,delta:Os},!1),Ss.pressState&&(Ss.pressState.stop=se.shared.add(function(Ns){return Rs({x:Vs.x,y:Vs.y},Ns)},!0,1))}else Fs()},Ds=function(Vs){Fs(),Vs.touches.length>1||Vs.changedTouches.length<=0||Rs({x:Vs.changedTouches[0].clientX,y:Vs.changedTouches[0].clientY},Ht())},$s=function(Vs){Fs(),Rs({x:Vs.clientX,y:Vs.clientY},Ht())},Fs=function(){var Vs;if(Ss.pressState){var ks=Ht()-Ss.pressState.time;Ss.onPressGesture({x:Ss.pressState.x,y:Ss.pressState.y,delta:ks},!0),(Vs=Ss.pressState)===null||Vs===void 0||Vs.stop(),delete Ss.pressState}},Gs=function(Vs){if(Vs&&typeof Vs.preventDefault=="function"&&Vs.currentTarget===_s&&Vs.preventDefault(),typeof getSelection=="function"){var ks=getSelection();ks&&ks.focusNode&&(ks.removeAllRanges&&ks.removeAllRanges(),ks.empty&&ks.empty())}};return _s.addEventListener("wheel",Bs,!1),_s.addEventListener("mousemove",Ps,!1),_s.addEventListener("mouseout",Ls,!1),_s.addEventListener("touchstart",Ds,!1),_s.addEventListener("touchend",Fs,!1),_s.addEventListener("touchcancel",Fs,!1),_s.addEventListener("mousedown",$s,!1),_s.addEventListener("mouseup",Fs,!1),_s.addEventListener("touchstart",Gs,!1),Object.assign(function(){Cs.destroy(),_s.removeEventListener("wheel",Bs,!1),_s.removeEventListener("mousemove",Ps,!1),_s.removeEventListener("mouseout",Ls,!1),_s.removeEventListener("touchstart",Ds,!1),_s.removeEventListener("touchend",Fs,!1),_s.removeEventListener("touchcancel",Fs,!1),_s.removeEventListener("mousedown",$s,!1),_s.removeEventListener("mouseup",Fs,!1),_s.removeEventListener("touchstart",Gs,!1)},{element:_s})},ga}(Ot),Tr=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs=this,Ps=ga.parseArgs(_s);return(Bs=ca.call(this,Ps)||this).defaultLongitude=Ps.defaultLongitude,Bs.defaultLatitude=Ps.defaultLatitude,Bs.defaultFov=Ps.defaultFov,Bs.maxFov=Ps.maxFov,Bs.minFov=Ps.minFov,Bs.maxLatitude=Ps.maxLatitude,Bs.minLatitude=Ps.minLatitude,Bs.locationMotion=new vn({x:Bs.camera.pose.offset.x,y:Bs.camera.pose.offset.y,z:Bs.camera.pose.offset.z,distance:Bs.camera.pose.distance,modelAlpha:(Ms=(Ss=Bs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Bs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Bs}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Rs),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:Math.PI/4,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:Math.PI/4,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:80,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Bs=_s.minFov)!==null&&Bs!==void 0?Bs:40,maxLatitude:(Ps=_s.maxLatitude)!==null&&Ps!==void 0?Ps:+Math.PI/2,minLatitude:(Ls=_s.minLatitude)!==null&&Ls!==void 0?Ls:-Math.PI/2})},ga.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Bs=_s.initial[1];return{longitude:(Ss=Bs.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:pn((Ms=Bs.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:(Cs=Bs.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,offset:_s.model.bounding.getCenter(new r$2.Vector3)}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){return this.work=_s,!0},ga.prototype.updateModel=function(_s){ca.prototype.updateModel.call(this,_s);var Ss=_s.bounding.getCenter(new r$2.Vector3),Ms=this.cameraDistance(_s);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:Ms},0).catch(Lt)},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};this.locationMotion.ended||(this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),vr(Ms)||this.model.setMaterial(Ms),vr(Cs)||this.setCamera(Cs)}},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$2.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Rs=this.model.bounding.getCenter(new r$2.Vector3),Ds={longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$2.Vector3)},$s=this.cameraDistance(this.model),Fs=ni(Ds,["longitude","latitude","fov"]),Gs={x:Rs.x,y:Rs.y,z:Rs.z,distance:$s,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",_s,Ds,this.userAction),this.cameraMotion.set(Fs,Ms).catch(Lt),this.locationMotion.set(Gs,Ms).then(function(){Ls.emit("initAnimationEnded",_s,Ds,Ls.userAction)},function(Vs){var ks=mr(Ls.camera.pose);Ls.emit("initAnimationEnded",_s,ks,Ls.userAction)})}},ga.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},ga.prototype.cameraDistance=function(_s){var Ss=_s.bounding,Ms=this.camera.aspect,Cs=Math.pow(Math.pow(Ss.max.x-Ss.min.x+1,2)+Math.pow(Ss.max.y-Ss.min.y+1,2)+Math.pow(Ss.max.z-Ss.min.z+1,2),.5),Ts=Cs/2/Math.tan(Math.PI*this.defaultFov/360);return Ms<1&&(Ts/=Ms),isNaN(Ts)?Cs:Ts},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this.work.observers.filter(function(Bs){return Bs.active}),Ms=this.model.intersectRaycaster(_s)[0];if(!Ms)return null;var Cs=gr(Ss,function(Bs){return Bs.standingPosition.distanceTo(Ms.point)},!0),Ts=Cs[0];return Cs[1]<5?this.work.observers.indexOf(Ts):null},ga.prototype.coordinatesForOffset=function(_s){var Ss=this.renderer.getSize(new r$2.Vector2);return{longitude:2*_s.x/(Ss.x*this.scissor.width),latitude:2*_s.y/(Ss.y*this.scissor.height)}},ga.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$2.__assign({},_s),Ts={longitude:0,latitude:0},Bs=0;Bs<Ss;Bs++)Cs.longitude*=.996,Cs.latitude*=.994008,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Ps=ur(this.cameraMotion.value.longitude+Ts.longitude),Ls=pn(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Ps,latitude:Ls},0).catch(Lt);var Ds=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Rs,!Ds),Ds?se.shared.add(function($s,Fs){Ms.requestInteriaMovement(Cs,0|Fs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Vs){return ni(Vs,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Bs=this.relativeClientPosition(_s.center),Ps=this.camera.pose.latitude<Math.PI/6||Bs.y<0?-1:1;Ts.x*=Ps;var Ls=this.coordinatesForOffset(Ts),Rs=ur(this.cameraMotion.value.longitude+Ls.longitude),Ds=pn(this.cameraMotion.value.latitude+Ls.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&(Ds=this.cameraMotion.value.latitude);var $s={longitude:Rs,latitude:Ds,fov:this.camera.pose.fov,offset:this.camera.pose.offset};if(!this.emit("wantsPanGesture",$s,_s.isFinal)&&(this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",$s,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:$s.longitude,latitude:$s.latitude,fov:$s.fov},0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",$s))){this.interiaMovement=!0;var Fs=_s.velocityX*Ps,Gs=_s.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Fs,y:Gs}),0)}}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function(Ps){return ni(Ps,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Bs=pn(Ms/_s.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",_s.scale,Bs,Cs)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Bs,Cs),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Bs},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=this.minFov,Bs=this.maxFov,Ps=pn(this.camera.fov-Ms,Ts,Bs);this.emit("wantsMouseWheel",Ms,Ps,!1)||this.emit("wantsChangeCameraFov",Ps)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ps,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ps},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ps,!0)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ps,!0))},200)})}},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Ps){return ni(Ps,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$2.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.getForwardPanoIndexOrNot(Cs);if(!ji(Ts)){this.emit("panoSelected",Ts);var Bs={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ts,Bs,!0)}}}},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Bs=this.relativeClientPosition(_s),Ps=new r$2.Raycaster;if(Ps.setFromCamera(Bs,this.camera),this.emit("wantsPressGesture",Ps,Bs,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Ps,Bs,_s.delta,Ss)},ga}(Pr),Qr=function(ca){function ga(_s){var Ss=ga.parseArgs(_s);return ca.call(this,Ss)||this}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss=[_s.initial[0],e$2.__assign(e$2.__assign({},_s.initial[1]),{longitude:0,latitude:Math.PI/2}),_s.initial[2],_s.initial[3]],Ms=e$2.__assign(e$2.__assign({},_s),{initial:Ss,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return ca.parseArgs.call(this,Ms)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.updateModel=function(_s){this.model=_s,this.needsRender=!0;var Ss=_s.bounding.getCenter(new r$2.Vector3);this.locationMotion.set({x:Ss.x,y:Ss.y,z:Ss.z,distance:this.cameraDistance(_s)},0).catch(Lt)},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs=this;if(!this.destroyed){this.pending=!1,this.userAction=Cs;var Ps=this.model.bounding.getCenter(new r$2.Vector3),Ls={longitude:0,latitude:Math.PI/2,fov:pn((Ts=Ss.fov)!==null&&Ts!==void 0?Ts:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$2.Vector3)},Rs=this.cameraDistance(this.model),Ds=ni(Ls,["longitude","latitude","fov"]),$s={x:Ps.x,y:Ps.y,z:Ps.z,distance:Rs,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Ds,Ms).catch(Lt),this.locationMotion.set($s,Ms).then(function(){Bs.emit("initAnimationEnded",_s,Ls,Bs.userAction)},function(Fs){var Gs=mr(Bs.camera.pose);Bs.emit("initAnimationEnded",_s,Gs,Bs.userAction)})}},ga.prototype.getZoomOffsetFromFov=function(_s,Ss,Ms){var Cs=new r$2.Vector3(0,-1,0),Ts=Math.tan(Ms/2*Math.PI/180),Bs=Math.tan(Ss.fov/2*Math.PI/180),Ps=(Bs-Ts)/Bs,Ls=new r$2.Raycaster;Ls.setFromCamera(_s,Ss);var Rs=Ls.ray.direction,Ds=Rs.angleTo(Cs),$s=this.cameraDistance(this.model),Fs=$s*Math.tan(Ds),Gs=Rs.clone().setLength($s*Math.cos(Ds)).projectOnPlane(Cs),Vs=Gs.length(),ks=Ps/Vs*Gs.x*Fs,Os=Ps/Vs*Gs.z*Fs;return new r$2.Vector3(ks,0,Os)},ga.prototype.requestInteriaMovement=function(_s,Ss){},ga.prototype.onPanGesture=function(_s){var Ss=this.renderer.getSize(new r$2.Vector2),Ms=this.panState,Cs=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Cs,x:_s.center.x,y:_s.center.y},Ms!==void 0&&Ms.pointerLength===Cs){var Ts=_s.pointers.map(function(ks){return ni(ks,["x","y"])});if(!this.emit("wantsGesture","pan",Ts,_s.isFinal)){var Bs=_s.center.x-Ms.x,Ps=_s.center.y-Ms.y,Ls=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Rs=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);Ls.add(function(ks,Os){var Ns=new r$2.Vector3;return Ns.setFromMatrixColumn(Os,0),Ns.multiplyScalar(-ks),Ns}(2*Bs*Rs/Ss.y,this.camera.matrix)),Ls.add(function(ks,Os,Ns){var Us=new r$2.Vector3;return Us.setFromMatrixColumn(Ns,0),Us.crossVectors(Os,Us),Us.multiplyScalar(ks),Us}(2*Ps*Rs/Ss.y,this.camera.up,this.camera.matrix));var Ds=this.model.bounding,$s=Ds.getCenter(new r$2.Vector3),Fs=(Ds.max.x-Ds.min.x)/this.defaultFov*this.cameraMotion.value.fov,Gs=(Ds.max.y,Ds.min.y,this.defaultFov,this.cameraMotion.value.fov,(Ds.max.z-Ds.min.z)/this.defaultFov*this.cameraMotion.value.fov);Ls.x=pn(Ls.x,$s.x-Fs,$s.x+Fs),Ls.z=pn(Ls.z,$s.z-Gs,$s.z+Gs),Ls.y=$s.y;var Vs={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ls};this.emit("wantsPanGesture",Vs,_s.isFinal)||(this.emit("gesture","pan",Ts,_s.isFinal),this.emit("panGesture",Vs,_s.isFinal),this.userAction=!0,this.locationMotion.set({x:Ls.x,y:Ls.y,z:Ls.z},0).catch(Lt))}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Cs=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Ts=_s.pointers.map(function(Ds){return ni(Ds,["x","y"])});if(!this.emit("wantsGesture","pinch",Ts,Cs)){var Bs=pn(Ms/_s.scale,this.minFov,this.maxFov),Ps=this.relativeClientPosition({x:_s.center.x,y:_s.center.y}),Ls=this.getZoomOffsetFromFov(Ps,this.camera,Bs),Rs=this.camera.pose.offset.clone().add(Ls);this.emit("wantsPinchGesture",_s.scale,Bs,Cs)||this.emit("wantsChangeCameraFov",Bs)||(this.emit("gesture","pinch",Ts,Cs),this.emit("pinchGesture",_s.scale,Bs,Cs),this.userAction=!0,this.locationMotion.set({x:Rs.x,y:Rs.y,z:Rs.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Bs},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=pn(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov),Bs=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Ps=this.getZoomOffsetFromFov(Bs,this.camera,Ts),Ls=this.camera.pose.offset.clone().add(Ps);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.locationMotion.set({x:Ls.x,y:Ls.y,z:Ls.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},ga}(Tr);function Rr(ca,ga){ga===void 0&&(ga=!1);var _s=typeof ca;if(_s==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var Ss="[",Ms=ca.length-1,Cs=0;Cs<Ms;Cs++)Ss+=Rr(ca[Cs],!1)+",";return Ms>-1&&(Ss+=Rr(ca[Cs],!1)),Ss+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return Rr(ca.toJSON(),ga);var Ts=Object.keys(ca).sort(),Bs=Ts.length;for(Ss="",Cs=0;Cs<Bs;){var Ps=Ts[Cs],Ls=Rr(ca[Ps],!0);Ls!==void 0&&(Cs&&Ss!==""&&(Ss+=","),Ss+=JSON.stringify(Ps)+":"+Ls),Cs++}return"{"+Ss+"}"}switch(_s){case"function":case"undefined":return ga?void 0:null;case"number":return ca;default:return isFinite(ca)?ca:null}}function Dr(ca){return Pt(String(Rr(ca,!1)))}var kr,Fr=function(ca){function ga(_s){var Ss=this,Ms=ga.parseArgs(_s);return(Ss=ca.call(this,Ms)||this).defaultLongitude=Ms.defaultLongitude,Ss.defaultLatitude=Ms.defaultLongitude,Ss.defaultFov=Ms.defaultFov,Ss.maxFov=Ms.maxFov,Ss.minFov=Ms.minFov,Ss.maxLatitude=Ms.maxLatitude,Ss.minLatitude=Ms.minLatitude,Ss.moveSpeed=Ms.moveSpeed,Ss.intersectMeshCreator=Ms.intersectMeshCreator,Ss.interiaMovement=!1,Ss.intersectMesh=Ss.intersectMeshCreator(),Ss.intersectMesh.name="intersect",Ss.intersectMesh.visible=!1,Ss.helper.add(Ss.intersectMesh),Ss}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},$s),{defaultLongitude:(Ss=_s.defaultLongitude)!==null&&Ss!==void 0?Ss:0,defaultLatitude:(Ms=_s.defaultLatitude)!==null&&Ms!==void 0?Ms:0,defaultFov:(Cs=_s.defaultFov)!==null&&Cs!==void 0?Cs:90,maxFov:(Ts=_s.maxFov)!==null&&Ts!==void 0?Ts:120,minFov:(Bs=_s.minFov)!==null&&Bs!==void 0?Bs:40,maxLatitude:(Ps=_s.maxLatitude)!==null&&Ps!==void 0?Ps:+Math.PI/2,minLatitude:(Ls=_s.minLatitude)!==null&&Ls!==void 0?Ls:-Math.PI/2,moveSpeed:(Rs=_s.moveSpeed)!==null&&Rs!==void 0?Rs:3.2,intersectMeshCreator:(Ds=_s.intersectMeshCreator)!==null&&Ds!==void 0?Ds:function(){return new Zn}})},ga.initAnimationEndPose=function(_s){var Ss,Ms,Cs,Ts=this.parseArgs(_s),Bs=_s.initial,Ps=Bs[0],Ls=Bs[1];return{longitude:(Ss=Ls.longitude)!==null&&Ss!==void 0?Ss:Ts.defaultLongitude,latitude:pn((Ms=Ls.latitude)!==null&&Ms!==void 0?Ms:Ts.defaultLatitude,Ts.minLatitude,Ts.maxLatitude),fov:pn((Cs=Ls.fov)!==null&&Cs!==void 0?Cs:Ts.defaultFov,Ts.minFov,Ts.maxFov),offset:Ts.work.observers[Ps].position.clone()}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},ga.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&ca.prototype.isReady.call(this)},ga.prototype.calculateMovingDuration=function(_s,Ss){switch(typeof _s){case"function":return _s(Ss,this.moveSpeed);case"number":return _s;case"string":return Number(_s);default:return Math.floor(Math.max(Math.min(Ss/this.moveSpeed*1e3,1500),500))}},ga.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},ga.prototype.coordinatesForOffset=function(_s){var Ss=this.cameraMotion.value.fov,Ms=this.camera.aspect,Cs=this.renderer.getSize(new r$2.Vector2);return{longitude:2*_s.x/(Cs.x*this.scissor.width)*Ss/95*Ms,latitude:-2*_s.y/(Cs.y*this.scissor.height)*Ss/95}},ga.prototype.cameraBounce=function(){var _s=this.cameraMotion.value,Ss=_s.longitude,Ms=_s.latitude,Cs=_s.fov,Ts=[{progress:0,value:{longitude:Ss,latitude:Ms,fov:Cs}},{progress:.5,value:{longitude:Ss,latitude:Ms,fov:.98*Cs}},{progress:1,value:{longitude:Ss,latitude:Ms,fov:Cs}}];this.cameraMotion.setKeyframes(Ts,500).catch(Lt)},ga.prototype.requestInteriaMovement=function(_s,Ss){var Ms=this;if(this.interiaMovement!==!1){for(var Cs=e$2.__assign({},_s),Ts={longitude:0,latitude:0},Bs=0;Bs<Ss;Bs++)Cs.longitude*=.996,Cs.latitude*=.98604,Ts.longitude+=Cs.longitude,Ts.latitude+=Cs.latitude;var Ps=ur(this.cameraMotion.value.longitude+Ts.longitude),Ls=pn(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude),Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Ps,latitude:Ls},0).catch(Lt);var Ds=Cs.longitude>1e-4||Cs.longitude<-1e-4||Cs.latitude>1e-4||Cs.latitude<-1e-4;this.emit("interiaPan",Rs,!Ds),Ds?se.shared.add(function($s,Fs){Ms.requestInteriaMovement(Cs,0|Fs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(_s){var Ss=this.panState,Ms=_s.pointers.length;if(_s.isFinal?delete this.panState:this.panState={pointerLength:Ms,x:_s.center.x,y:_s.center.y},Ss!==void 0&&Ss.pointerLength===Ms){var Cs=_s.pointers.map(function(Gs){return ni(Gs,["x","y"])});if(!this.emit("wantsGesture","pan",Cs,_s.isFinal)){var Ts={x:_s.center.x-Ss.x,y:_s.center.y-Ss.y},Bs=this.coordinatesForOffset(Ts),Ps=ur(this.cameraMotion.value.longitude+Bs.longitude),Ls=pn(this.cameraMotion.value.latitude+Bs.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(_s.overallVelocityX)>.2&&Math.atan2(Math.abs(_s.overallVelocityY),Math.abs(_s.overallVelocityX))<Math.PI/6.923&&(Ls=this.cameraMotion.value.latitude);var Rs={longitude:Ps,latitude:Ls,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",Rs,_s.isFinal)){this.emit("gesture","pan",Cs,_s.isFinal),this.emit("panGesture",Rs,_s.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Ds={longitude:Rs.longitude,latitude:Rs.latitude,fov:Rs.fov};if(this.cameraMotion.set(Ds,0).catch(Lt),_s.isFinal&&!this.emit("wantsInteriaPan",Rs)){this.interiaMovement=!0;var $s=_s.velocityX,Fs=.6*_s.velocityY;Math.abs(Fs)>.5&&Math.abs($s)<.5&&($s=0),this.requestInteriaMovement(this.coordinatesForOffset({x:$s,y:Fs}),0)}}}}},ga.prototype.onPinchGesture=function(_s){var Ss,Ms=(Ss=this.pinchState)===null||Ss===void 0?void 0:Ss.fov,Cs=_s.scale,Ts=!1;if(_s.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(_s.type==="pinchend"&&(Ts=!0,delete this.panState,delete this.pinchState),Ms!==void 0){var Bs=_s.pointers.map(function(Ls){return ni(Ls,["x","y"])});if(!this.emit("wantsGesture","pinch",Bs,Ts)){var Ps=pn(Ms/Cs,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Cs,Ps,Ts)||this.emit("wantsChangeCameraFov",Ps)||(this.emit("gesture","pinch",Bs,Ts),this.emit("pinchGesture",Cs,Ps,Ts),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ps},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(_s){var Ss=this,Ms=(Math.abs(_s.deltaY)>Math.abs(_s.deltaX)?_s.deltaY:_s.deltaX)/-60,Cs=[{x:_s.clientX,y:_s.clientY,delta:Ms}];if(!this.emit("wantsGesture","mouseWheel",Cs,!1)){var Ts=pn(this.cameraMotion.value.fov-Ms,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Ms,Ts,!1)||this.emit("wantsChangeCameraFov",Ts)||(this.emit("gesture","mouseWheel",Cs,!1),this.emit("mouseWheel",Ms,Ts,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ts},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ss.mouseWheelState,Ss.emit("wantsGesture","mouseWheel",Cs,!0)||Ss.emit("wantsMouseWheel",Ms,Ts,!0)||Ss.emit("wantsChangeCameraFov",Ts)||(Ss.emit("gesture","mouseWheel",Cs,!0),Ss.emit("mouseWheel",0,Ts,!0))},200)})}},ga.prototype.onMouseMove=function(_s){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Ss=this.relativeClientPosition({x:_s.clientX,y:_s.clientY}),Ms=new r$2.Raycaster;if(Ms.setFromCamera(Ss,this.camera),this.emit("wantsShowIntersectionOnModel",Ms))this.hideIntersectMesh();else{var Cs=this.model.intersectRaycaster(Ms)[0];if(Cs&&Cs.face){var Ts=Cs.face.normal,Bs=Ts.clone().multiplyScalar(.05),Ps=Cs.point.clone().add(Bs);this.intersectMesh.position.copy(Ps);var Ls=Ps.clone().add(Bs);if(this.intersectMesh.lookAt(Ls),Math.abs(Ts.y)>.99){var Rs=this.camera.position.clone().sub(Ps);this.intersectMesh.rotation.z=-Math.atan2(Rs.z,Rs.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Cs,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:_s.clientX,clientY:_s.clientY}}}},ga.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},ga.prototype.onPressGesture=function(_s,Ss){var Ms,Cs,Ts=[_s];if(this.emit("wantsGesture","press",Ts,Ss))return(Ms=this.pressState)===null||Ms===void 0||Ms.stop(),void delete this.pressState;var Bs=this.relativeClientPosition(_s),Ps=new r$2.Raycaster;if(Ps.setFromCamera(Bs,this.camera),this.emit("wantsPressGesture",Ps,Bs,_s.delta,Ss))return(Cs=this.pressState)===null||Cs===void 0||Cs.stop(),void delete this.pressState;this.emit("gesture","press",Ts,Ss),this.emit("pressGesture",Ps,Bs,_s.delta,Ss)},ga}(Pr),Nr,Or=function(ca){function ga(_s,Ss){return Ss===void 0&&(Ss=.5),ca.call(this,_s,{uniforms:{inputBuffer:new r$2.Uniform(null),scale:new r$2.Uniform(Ss)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return e$2.__extends(ga,ca),ga}(Cr),Lr=function(ca){function ga(_s,Ss){Ss===void 0&&(Ss=.002);var Ms=ca.call(this,_s,{uniforms:{targetBuffer:new r$2.Uniform(null),inputBuffer:new r$2.Uniform(null),step:new r$2.Uniform(Ss)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Ms.material.extensions.shaderTextureLOD=!0,Ms}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(_s){this.material.uniforms.targetBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(_s){this.material.uniforms.step.value=_s},enumerable:!1,configurable:!0}),ga}(Cr),Vr=function(ca){function ga(_s){var Ss=ca.call(this,_s,{uniforms:{inputBuffer:new r$2.Uniform(null),luminanceAdaptiveBuffer:new r$2.Uniform(null),progress:new r$2.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 0.8;
          float whitePoint = 8.0;
          float exposure = 1.5;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Ss.material.transparent=!0,Ss}return e$2.__extends(ga,ca),Object.defineProperty(ga.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(_s){this.material.uniforms.luminanceAdaptiveBuffer.value=_s},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(_s){this.material.uniforms.progress.value=_s},enumerable:!1,configurable:!0}),ga}(Cr),Hr=function(ca){function ga(_s){var Ss=ca.call(this,_s)||this;return Ss.enableTime=Ht(),Ss.renderer=_s,Ss.valuePass=new Sr(Ss.renderer),Ss.luminancePass=new Or(Ss.renderer,.75),Ss.nextStepPass=new Lr(Ss.renderer,.002),Ss.luminanceAdaptivePass=new Vr(Ss.renderer),Ss}return e$2.__extends(ga,ca),ga.prototype.render=function(_s,Ss,Ms){if(!this.enable)return this.enableTime=null,void this.copyPass.render(_s);this.enableTime===null&&(this.enableTime=Ht()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$2.WebGLRenderTarget(128,128,{minFilter:r$2.LinearMipmapLinearFilter,magFilter:r$2.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$2.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(_s,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$2.WebGLRenderTarget(1,1,{minFilter:r$2.NearestFilter,magFilter:r$2.NearestFilter,type:r$2.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$2.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$2.WebGLRenderTarget(1,1,{minFilter:r$2.NearestFilter,magFilter:r$2.NearestFilter,type:r$2.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$2.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ht()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(_s,Ss)},ga.prototype.dispose=function(){var _s,Ss,Ms;(_s=this.luminanceTargetBuffer)===null||_s===void 0||_s.dispose(),(Ss=this.luminancePrevBuffer)===null||Ss===void 0||Ss.dispose(),(Ms=this.luminanceNextBuffer)===null||Ms===void 0||Ms.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},ga}(Mr),Kr=["up","down","left","right","front","back"],zr=(Nr=Math.SQRT1_2)!==null&&Nr!==void 0?Nr:Math.sqrt(2),qr={up:new r$2.Quaternion(zr,0,0,zr),down:new r$2.Quaternion(-zr,0,0,zr),left:new r$2.Quaternion(0,zr,0,zr),right:new r$2.Quaternion(0,-zr,0,zr),front:new r$2.Quaternion(0,0,0,1),back:new r$2.Quaternion(0,1,0,0)},_r=new r$2.Quaternion().setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI),jr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Ur=new Float32Array([0,0,1,0,0,1,1,1]),Gr=new Uint8Array([0,1,2,1,3,2]),Wr=new r$2.BufferGeometry;Wr.setAttribute("position",new r$2.BufferAttribute(jr,3)),Wr.setAttribute("uv",new r$2.BufferAttribute(Ur,2)),Wr.setIndex(new r$2.BufferAttribute(Gr,1));var Xr=function(ca){function ga(){var _s=ca.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return _s.depthTest=!1,_s.depthWrite=!1,_s.blending=r$2.NoBlending,_s.map=_s.uniforms.map.value,_s.luminanceMap=_s.uniforms.luminanceMap.value,Object.defineProperties(_s,{map:{get:function(){return this.uniforms.map.value},set:function(Ss){this.uniforms.map.value=Ss}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Ss){this.uniforms.luminanceMap.value=Ss,this.defines.USE_LUMINANCE=Ss!==null,this.needsUpdate=!0}}}),_s}return e$2.__extends(ga,ca),ga}(r$2.ShaderMaterial),Yr=function(ca){function ga(){var _s=ca!==null&&ca.apply(this,arguments)||this;return _s.level=0,_s.sideCount=0,_s.col=0,_s.row=0,_s.index=0,_s.type="up",_s}return e$2.__extends(ga,ca),ga}(r$2.Box3),Zr=function(ca){function ga(_s,Ss){var Ms=this,Cs=new Xr;return Cs.visible=!1,(Ms=ca.call(this,Wr,Cs)||this).position.copy(_s.getCenter(new r$2.Vector3)),Ms.quaternion.copy(qr[_s.type]),Ms.scale.setScalar(1/Math.pow(2,_s.level)),Ms.level=_s.level,Ms.activeTime=-1,Ms.disposed=!1,Ms.needsRender=!1,Ms.frustumCulled=!1,Ss.then(function(Ts){var Bs=Ts[0],Ps=Ts[1];Ms.disposed?(Bs.dispose(),Ps==null||Ps.dispose()):(Ms.material.map=Bs,Ms.material.luminanceMap=Ps,Ms.material.needsUpdate=!0,Ms.material.visible=!0)}).catch(Lt),Ms}return e$2.__extends(ga,ca),ga.getBox=function(_s,Ss,Ms){var Cs=new Yr,Ts=Math.pow(2,_s),Bs=1/Ts,Ps=Ms%Ts,Ls=Math.floor(Ms/Ts);switch(Cs.level=_s,Cs.index=Ms,Cs.sideCount=Ts,Cs.row=Ls,Cs.col=Ps,Cs.type=Ss,Ss){case"up":Cs.min.y=.5,Cs.max.y=.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.z=-Ls*Bs+.5-Bs,Cs.max.z=-Ls*Bs+.5;break;case"down":Cs.min.y=-.5,Cs.max.y=-.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.z=+Ls*Bs-.5,Cs.max.z=+Ls*Bs-.5+Bs;break;case"left":Cs.min.x=-.5,Cs.max.x=-.5,Cs.min.z=-Ps*Bs+.5-Bs,Cs.max.z=-Ps*Bs+.5,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"right":Cs.min.x=.5,Cs.max.x=.5,Cs.min.z=+Ps*Bs-.5,Cs.max.z=+Ps*Bs-.5+Bs,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"front":Cs.min.z=-.5,Cs.max.z=-.5,Cs.min.x=+Ps*Bs-.5,Cs.max.x=+Ps*Bs-.5+Bs,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5;break;case"back":Cs.min.z=.5,Cs.max.z=.5,Cs.min.x=-Ps*Bs+.5-Bs,Cs.max.x=-Ps*Bs+.5,Cs.min.y=-Ls*Bs+.5-Bs,Cs.max.y=-Ls*Bs+.5}return Cs},ga.prototype.updateTime=function(_s){},ga.prototype.dispose=function(){var _s;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(_s=this.material.luminanceMap)===null||_s===void 0||_s.dispose()),this.material.dispose()},ga}(r$2.Mesh),Jr=function(ca){function ga(){var _s=ca.call(this)||this;return _s.needsRender=!1,_s.name="tiling",_s}return e$2.__extends(ga,ca),ga}(r$2.Group),$r=function(){function ca(ga,_s){this.disposed=!1,this.textureLoader=new Si(ga),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=_s,this.object=new Jr}return ca.prototype.setAllowHosts=function(ga){this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.cleanup=function(){for(var ga=0;ga<this.tiles.length;ga++)if(this.tiles[ga]){var _s=this.tiles[ga],Ss="level-group:"+ga,Ms=this.object.getObjectByName(Ss);for(var Cs in _s){var Ts=_s[Cs];Ts.dispose(),Ms.remove(Ts),delete _s[Cs],this.object.needsRender=!0}}},ca.prototype.setRotation=function(ga){if(!this.disposed){var _s=new r$2.Quaternion().multiplyQuaternions(ga,_r);this.object.quaternion.equals(_s)||(this.object.quaternion.copy(_s),this.object.needsRender=!0)}},ca.prototype.setPosition=function(ga){this.disposed||this.object.position.equals(ga)||(this.object.position.copy(ga),this.object.needsRender=!0)},ca.prototype.setResource=function(ga){if(!this.disposed&&this.resource!==ga){this.cleanup(),this.resource=ga;for(var _s=0;_s<ga.length;_s++){var Ss=ga[_s].level;this.tiles[Ss]={};var Ms="level-group:"+Ss,Cs=this.object.getObjectByName(Ms);Cs||((Cs=new r$2.Group).name=Ms,Cs.renderOrder=-2),this.object.add(Cs)}this.object.needsRender=!0}},ca.prototype.setLuminance=function(ga){this.luminance=ga},ca.prototype.getTileResources=function(ga){for(var _s,Ss=(_s=this.imageOptions.size)!==null&&_s!==void 0?_s:2048,Ms=[],Cs=this.resource.length-1;Cs>=0;Cs--)this.resource[Cs].level<=ga&&512*Math.pow(2,this.resource[Cs].level)>Ss&&Ms.unshift(this.resource[Cs]);return Ms},ca.prototype.update=function(ga,_s,Ss){var Ms=this;if(!this.disposed){this.level=_s;var Cs=new r$2.PerspectiveCamera().copy(ga);Cs.position.set(0,0,0),Cs.quaternion.premultiply(this.object.quaternion.clone().inverse()),Cs.updateMatrixWorld(!0),Cs.updateProjectionMatrix();for(var Ts=Cs.getWorldDirection(new r$2.Vector3),Bs=new r$2.Frustum().setFromProjectionMatrix(new r$2.Matrix4().multiplyMatrices(Cs.projectionMatrix,Cs.matrixWorldInverse)),Ps=this.getTileResources(_s),Ls=function(ks){if(ks){for(var Os=[],Ns=ks.level,Us=Math.pow(2,Ns),Hs=Us*Us,zs=Rs.object.getObjectByName("level-group:"+Ns),js=0,Ws=Kr;js<Ws.length;js++)for(var Qs=Ws[js],qs=0;qs<Hs;qs++){var tu=Zr.getBox(Ns,Qs,qs);Bs.intersectsBox(tu)&&Os.push(tu)}Os.sort(function(Nu,ju){return Nu.getCenter(new r$2.Vector3).angleTo(Ts)-ju.getCenter(new r$2.Vector3).angleTo(Ts)});for(var Ys=[],Ks=0,Js=Os;Ks<Js.length;Ks++){var eu=(tu=Js[Ks]).sideCount,Zs=tu.row,au=tu.col,ru=(Qs=tu.type,"tile-level:".concat(Ns,"-face:").concat(Qs,"-row:").concat(Zs,"-col:").concat(au));if(!Rs.tiles[Ns][ru]){var su=ks[Qs],lu=ks.size,gu=lu/eu,hu=[gu*au,gu*Zs,gu,gu],wu=e$2.__assign({key:"pano_tile.".concat(Rs.panoIndex,".").concat(Qs,".").concat(Ns,".").concat(Zs,".").concat(au),basisLoaderInitialized:Ii.isInitialized(),cut:hu},ni(Rs.imageOptions,["format"]));Ns<=1&&(wu.format==="jpg"||/\.jpg$/.test(su))?(gu!==1024&&(wu.size=1024),wu.quality=70):gu!==512&&(wu.size=512);var Mu=Rs.imageOptions.transform?Rs.imageOptions.transform(su,wu):de(su,wu),du=Rs.textureLoader.load(Mu,{preInit:!0}).then(function(Nu){return Nu.body}),vu=null;if(Rs.luminance){var pu=Rs.luminance[Qs],yu=pu.match(/\/cube_(\d+)\//),Su=!!yu&&Number(yu[1]);if(Su!==!1){var Tu=lu/Su,bu=e$2.__assign(e$2.__assign({},wu),{size:256,cut:[hu[0]/Tu,hu[1]/Tu,hu[2]/Tu,hu[3]/Tu],key:"pano_tile_luminance.".concat(Rs.panoIndex,".").concat(Qs,".").concat(Ns,".").concat(Zs,".").concat(au)}),Au=Rs.imageOptions.transform?Rs.imageOptions.transform(pu,bu):de(pu,bu);vu=Rs.textureLoader.load(Au,{format:r$2.LuminanceFormat,preInit:!0}).then(function(Nu){return Nu.body}).catch(function(){return null})}}(Qu=Rs.tiles[Ns][ru]=new Zr(tu,Promise.all([du,vu]))).name=ru,Qu.renderOrder=Ns,zs.add(Qu)}Rs.tiles[Ns][ru].activeTime=Ss,Ys.push(ru)}for(var Bu=0,Lu=Object.keys(Rs.tiles[Ns]).sort(function(Nu,ju){return Ms.tiles[Ns][ju].activeTime-Ms.tiles[Ns][Nu].activeTime}).slice(Math.max(24,Ys.length));Bu<Lu.length;Bu++){ru=Lu[Bu];var Qu=Rs.tiles[Ns][ru];zs.remove(Qu),Qu.dispose(),delete Rs.tiles[Ns][ru],Rs.object.needsRender=!0}}},Rs=this,Ds=0,$s=Ps;Ds<$s.length;Ds++)Ls($s[Ds]);for(var Fs=0;Fs<this.tiles.length;Fs++)if(this.tiles[Fs]){var Gs=Ps.length>0&&Fs<=Ps[Ps.length-1].level;for(var Vs in this.tiles[Fs])this.tiles[Fs][Vs].visible!==Gs&&(this.tiles[Fs][Vs].visible=Gs,this.tiles[Fs][Vs].needsRender=!0),this.tiles[Fs][Vs].updateTime(Ss)}}},ca.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},ca}(),to=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),eo=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),io=new r$2.BufferGeometry;io.setAttribute("position",new r$2.BufferAttribute(to,3)),io.setIndex(new r$2.BufferAttribute(eo,1));var no=function(){function ca(){this.material=new r$2.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$2.Uniform(null),matrix:new r$2.Uniform(null),alpha:new r$2.Uniform(null),map:new r$2.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor}),this.object=new r$2.Mesh(io,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new vn({alpha:0})}return ca.prototype.setMaterial=function(ga){ga?(this.material.uniforms.size.value=ga.size,this.material.uniforms.matrix.value=ga.matrix,this.material.uniforms.map.value=ga.map,this.alphaMotion.set({alpha:ga.alpha},500).catch(Lt),this.material.uniforms.alpha.value=ga.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Lt));var _s=ga!==null;_s!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=_s,this.material.needsUpdate=!0,this.object.visible=ga!==null)},ca.prototype.updateTime=function(ga){this.alphaMotion.ended||(this.alphaMotion.update(ga),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},ca.prototype.dispose=function(){this.material.dispose()},ca}(),ro=new r$2.Matrix4().makeRotationAxis(new r$2.Vector3(0,1,0),Math.PI),oo=new r$2.Vector3(-1,1,1),so=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=this,Ds=ga.parseArgs(_s);(Rs=ca.call(this,Ds)||this).initAnimationed=!1,Rs.currentPanoIndex=Ds.initial[0],Rs.maxAccessibleDistance=Ds.maxAccessibleDistance,Rs.panoTapTriggerRadius=Ds.panoTapTriggerRadius,Rs.panoCircleMeshCreator=Ds.panoCircleMeshCreator,Rs.tileLevelForFov=Ds.tileLevelForFov;var $s=Rs.model.getMaterial()||{},Fs=$s.pano0,Gs=$s.pano1;Fs&&(Gs==null?void 0:Gs.map)!==Fs.map&&(Rs.model.setMaterial({pano0:Gs}),Fs.map.dispose(),(Ss=Fs.luminanceMap)===null||Ss===void 0||Ss.dispose()),Rs.boundingMesh=Rs.generateBoundingMesh(),Rs.boundingMesh.setMaterial(Rs.model.getMaterial()||{}),Rs.boundingMesh.visible=!1,Rs.scene.add(Rs.boundingMesh),Rs.panoMeshes=[],Rs.updatePanoMeshes(),Rs.locationMotion=new vn({count:0,distance:Rs.camera.pose.distance,modelAlpha:(Cs=(Ms=Rs.model.getMaterial())===null||Ms===void 0?void 0:Ms.modelAlpha)!==null&&Cs!==void 0?Cs:0,perspToOrtho:(Bs=(Ts=Rs.model.getMaterial())===null||Ts===void 0?void 0:Ts.perspToOrtho)!==null&&Bs!==void 0?Bs:0}),Rs.panoResources={},Rs.panoResources[Rs.locationMotion.keyframes[0].key=Rs.locationMotion.keyframes[1].key=$n()]={panoIndex:Rs.currentPanoIndex,workCode:Rs.work.workCode,panoPicture:(Ls=(Ps=Rs.model.getMaterial())===null||Ps===void 0?void 0:Ps.pano1)!==null&&Ls!==void 0?Ls:null,position:Rs.camera.pose.offset.clone(),effect:"fly"};var Vs={allowHosts:Rs.work.allowHosts,networkSubscribe:Rs.networkSubscribe};return Rs.textureLoader=new Si(Vs),Rs.tiling=new $r(Vs,Rs.imageOptions),Rs.scene.add(Rs.tiling.object),Rs.panoVideo=new no,Rs.scene.add(Rs.panoVideo.object),Rs}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts,Bs=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Bs),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:.5,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new Gn},tileLevelForFov:(Ts=_s.tileLevelForFov)!==null&&Ts!==void 0?Ts:function(Ps,Ls){var Rs=2*Math.atan(Math.tan(Ps/180*Math.PI/2)*(Ls.width/Ls.height))/Math.PI*180,Ds=Math.max(Ls.width/Rs,Ls.height/Ps),$s=Bs.imageOptions.size;if($s===void 0&&Bs.work.observers[0]){var Fs=Bs.work.observers[0].images.up.match(/\/cube_(\d+)\//);Fs&&($s=Number(Fs[1]))}return $s===void 0&&($s=2048),$s<8192&&Ds>40?4:$s<4096&&Ds>24?3:$s<2048&&Ds>10?2:$s<1024&&Ds>6?1:0}})},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){var _s,Ss,Ms=this;ca.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gs){Ms.helper.remove(Gs),Gs.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Cs=this.videoTexture.image;Cs.pause(),Cs.oncanplay=function(){},Cs.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Ts=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Bs=Ts.pano0,Ps=Ts.pano1,Ls=0,Rs=Object.keys(this.panoResources);Ls<Rs.length;Ls++){var Ds=Rs[Ls],$s=this.panoResources[Ds];if($s.panoPicture){var Fs=$s.panoPicture.map;Fs&&Fs!==(Bs==null?void 0:Bs.map)&&Fs!==(Ps==null?void 0:Ps.map)&&(Fs.dispose(),(Ss=$s.panoPicture.luminanceMap)===null||Ss===void 0||Ss.dispose(),$s.panoPicture=null)}delete this.panoResources[Ds]}},ga.prototype.isReady=function(){return this.locationMotion.ended===!0&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){var Bs=this;this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Ps={},Ls=!0;this.boundingMesh&&(Ps=this.boundingMesh.getMaterial()||{},Ls=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ls,this.boundingMesh.setMaterial(Ps),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Rs=0,Ds=this.panoMeshes;Rs<Ds.length;Rs++)Ds[Rs].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov,moveEndCallback:function(){Bs.initAnimationed=!0},moveCancelCallback:function(){Bs.initAnimationed=!0}},Ts),!0},ga.prototype.updateModel=function(_s){this.model=_s;var Ss={},Ms=!0;this.boundingMesh&&(Ss=this.boundingMesh.getMaterial()||{},Ms=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Ms,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Ss),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts,Bs,Ps,Ls,Rs;if(!this.destroyed){var Ds={},$s={},Fs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Gs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]);if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Vs=this.locationMotion.getKeyFrameSegment(_s),ks=Vs[0],Os=Vs[1],Ns=this.panoResourceFromLocationMotionKeyframe(ks),Us=this.panoResourceFromLocationMotionKeyframe(Os),Hs=new r$2.Vector3().copy(Ns.position),zs=new r$2.Vector3().copy(Us.position),js=this.locationMotion.value.count-Os.value.count+1;Ds.modelAlpha=this.locationMotion.value.modelAlpha,Ds.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ds.useBlackTransition=Us.effect==="instant",Us.panoPicture&&(js<1?Ns.panoPicture&&(Ds.pano0=Ns.panoPicture):Ds.pano0=Us.panoPicture,Ds.pano1=Us.panoPicture),Us.effect==="fade"&&(Ds.pano0&&Ns.panoPicture&&(Ds.pano0={map:Ds.pano0.map,luminanceMap:Ds.pano0.luminanceMap,matrix:Ns.panoPicture.matrix.clone().setPosition(Us.position)}),Hs.copy(zs)),Ds.progress=js,$s.distance=this.locationMotion.value.distance,$s.offset=new r$2.Vector3(Hs.x+(zs.x-Hs.x)*js,Hs.y+(zs.y-Hs.y)*js,Hs.z+(zs.z-Hs.z)*js);for(var Ws=[],Qs=[],qs=0,tu=this.locationMotion.keyframes;qs<tu.length;qs++){var Ys=tu[qs],Ks=Ys.key,Js=Ys.progress;Ks!==void 0&&(Ws.push(Ks),Js>=this.locationMotion.progress&&Qs.push(Ks))}for(var eu=0,Zs=Object.keys(this.panoResources);eu<Zs.length;eu++){var au=Zs[eu];if(!(Qs.indexOf(au)>=0)){var ru=this.panoResources[au];if(ru.panoPicture){var su=ru.panoPicture.map;if(su){if(su===((Ms=Ds.pano0)===null||Ms===void 0?void 0:Ms.map)||su===((Cs=Ds.pano1)===null||Cs===void 0?void 0:Cs.map))continue;su.dispose(),(Ts=ru.panoPicture.luminanceMap)===null||Ts===void 0||Ts.dispose(),ru.panoPicture=null}}Ws.indexOf(au)>=0||delete this.panoResources[au]}}Ns.workCode===Us.workCode?this.currentPanoIndex=js<.5?Ns.panoIndex:Us.panoIndex:this.currentPanoIndex=Us.panoIndex,this.emit("movingToPano",Gs.panoIndex,Fs.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),$s.longitude=this.cameraMotion.value.longitude,$s.latitude=this.cameraMotion.value.latitude,$s.fov=this.cameraMotion.value.fov),vr(Ds)===!1&&(this.model.setMaterial(Ds),this.boundingMesh.setMaterial(Ds)),vr($s)===!1&&this.setCamera($s),this.camera.pose.distance>.1)for(var lu=0;lu<this.work.observers.length;lu++)(Mu=this.panoMeshes[lu])&&(Mu.visible=!1);else{var gu=this.work.observers[this.currentPanoIndex];if(gu){var hu=gu.visibleNodes.concat(this.currentPanoIndex),wu=this.getForwardPanoIndexOrNot();for(lu=0;lu<this.work.observers.length;lu++){var Mu,du=this.work.observers[lu];if(Mu=this.panoMeshes[lu])if(du.loadable||du.active)if(hu.indexOf(lu)!==-1){Mu.visible=!0;var vu=Mu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Mu.setCurrent(wu===lu),Mu.setOpacity(vu<.01?0:pn(1.4/vu,.5,.7)),Mu.updateTime&&Mu.updateTime(_s,Ss)}else Mu.visible=!1;else Mu.visible=!1}}}this.boundingMesh.visible=Boolean((Bs=this.boundingMesh.getMaterial())===null||Bs===void 0?void 0:Bs.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var pu=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var yu=Gs.panoIndex,Su=this.work.observers[yu];if(Su)if(ir(this.camera.position,Su.position)){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Ps=Su.images.luminance)!==null&&Ps!==void 0?Ps:null),this.tiling.panoIndex!==yu&&this.tiling.cleanup(),this.tiling.panoIndex=yu,this.tiling.setResource((Rs=(Ls=Su.images)===null||Ls===void 0?void 0:Ls.tiles)!==null&&Rs!==void 0?Rs:[]),this.tiling.setRotation(Su.quaternion),this.tiling.setPosition(Su.position);var Tu=this.renderer.getSize(new r$2.Vector2);Tu.width*=this.scissor.width,Tu.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,Tu),_s)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;pu!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(_s)}},ga.prototype.render=function(_s){var Ss=this.work.observers[this.currentPanoIndex];Ss&&Ss.video&&(this.needsRender=!0),ca.prototype.render.call(this,_s)},ga.prototype.postProcessing=function(_s,Ss,Ms){if(!this.destroyed)return this.effect||(this.effect=new Hr(this.renderer)),this.effect.render(_s,Ss,Ms)},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps=this,Ls=this.work.observers[_s],Rs=e$2.__assign({key:"pano.".concat(_s),basisLoaderInitialized:Ii.isInitialized()},ni(this.imageOptions,["format","size","quality"])),Ds=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:de,$s={right:Ds(Ls.images.right,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".right")})),left:Ds(Ls.images.left,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".left")})),up:Ds(Ls.images.up,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".up")})),down:Ds(Ls.images.down,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".down")})),front:Ds(Ls.images.front,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".front")})),back:Ds(Ls.images.back,e$2.__assign(e$2.__assign({},Rs),{key:"".concat(Rs.key,".back")}))},Fs={key:"pano_luminance.".concat(_s),basisLoaderInitialized:Ii.isInitialized(),size:Rs.size?Rs.size/2:1024},Gs=this.enableIOSEDR&&Ls.images.luminance?{right:Ds(Ls.images.luminance.right,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".right")})),left:Ds(Ls.images.luminance.left,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".left")})),up:Ds(Ls.images.luminance.up,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".up")})),down:Ds(Ls.images.luminance.down,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".down")})),front:Ds(Ls.images.luminance.front,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".front")})),back:Ds(Ls.images.luminance.back,e$2.__assign(e$2.__assign({},Fs),{key:"".concat(Fs.key,".back")}))}:null,Vs="pano:"+Dr($s);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Vs)return;var ks=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[ks])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",ks,Ls),this.pendingTextureTask.onError(new Error("texture aborted"))}var Os,Ns=this.model.getMaterial()||{},Us=Ns.pano0,Hs=Ns.pano1;if(Us&&Us.map.name===Vs&&Us.luminanceMap!==null===this.enableIOSEDR?Os=Us:(Hs==null?void 0:Hs.map.name)===Vs&&Hs.luminanceMap!==null===this.enableIOSEDR&&(Os=Hs),Os){var zs={panoIndex:_s,workCode:this.work.workCode,effect:(Bs=Ss.effect)!==null&&Bs!==void 0?Bs:"fly",panoPicture:{map:Os.map,luminanceMap:Os.luminanceMap,matrix:new r$2.Matrix4().compose(Ls.position,Ls.quaternion,oo)},position:Ls.position.clone()};this.doMoveToPano(_s,zs,Ss,Ms)}else{this.pending=!0,this.pendingTextureTask={panoIndex:_s,hash:Vs,onLoad:function(Ws,Qs){var qs,tu;if(Ps.pending=!1,Ps.destroyed)Ws.body.dispose();else{Ws.body.name=Vs,Ps.emit("panoLoaded",_s);var Ys={panoIndex:_s,workCode:Ps.work.workCode,effect:(qs=Ss.effect)!==null&&qs!==void 0?qs:"fly",panoPicture:{map:Ws.body,luminanceMap:(tu=Qs==null?void 0:Qs.body)!==null&&tu!==void 0?tu:null,matrix:new r$2.Matrix4().compose(Ls.position,Ls.quaternion,oo)},position:Ls.position.clone()};Ps.doMoveToPano(_s,Ys,Ss,Ms)}},onError:function(Ws){Ps.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Ps.emit("panoLoadError",Ws,_s),Ps.emit("moveToPanoCanceled",_s)}};var js=this.panoMeshes[_s];js&&js.tap&&js.tap(),Promise.all([this.textureLoader.loadCube($s,{format:r$2.RGBFormat,viaAjax:!0},void 0,void 0,function(Ws){var Qs,qs;Ps.emit("textureLoading",Ws,_s,Ls),((Qs=Ps.pendingTextureTask)===null||Qs===void 0?void 0:Qs.hash)===Vs&&((qs=Ps.panoMeshes[_s])===null||qs===void 0||qs.setProgress(Ws))},this.renderer),Gs?this.textureLoader.loadCube(Gs,{format:r$2.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Ws){var Qs,qs,tu=Ws[0],Ys=Ws[1];((Qs=Ps.pendingTextureTask)===null||Qs===void 0?void 0:Qs.hash)===Vs?(Ps.pendingTextureTask.onLoad(tu,Ys),(qs=Ps.panoMeshes[_s])===null||qs===void 0||qs.setProgress(0),delete Ps.pendingTextureTask,Ps.emit("textureLoaded",_s,Ls,tu.meta)):(tu.body.dispose(),Ys==null||Ys.body.dispose())}).catch(function(Ws){var Qs,qs;((Qs=Ps.pendingTextureTask)===null||Qs===void 0?void 0:Qs.hash)===Vs&&(Ps.pendingTextureTask.onError(Ws),(qs=Ps.panoMeshes[_s])===null||qs===void 0||qs.setProgress(0),delete Ps.pendingTextureTask,Ps.emit("textureError",Ws,_s,Ls),Ps.emit("error",Ws))}),this.emit("textureStartLoad",_s,Ls)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){var Rs=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Ds,$s){Rs=!0,Ls.emit("initAnimationWillStart",Ds,$s,Ls.userAction)},moveEndCallback:function(Ds,$s){Ls.emit("initAnimationEnded",Ds,$s,Ls.userAction),Ls.initAnimationed=!0},moveCancelCallback:function(){var Ds={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Rs===!1&&Ls.emit("initAnimationWillStart",Ls.currentPanoIndex,Ds,Ls.userAction),Ls.emit("initAnimationEnded",Ls.currentPanoIndex,Ds,Ls.userAction),Ls.initAnimationed=!0}},Cs)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},ga.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},ga.prototype.updatePanoMeshes=function(_s){_s===void 0&&(_s=!0);for(var Ss={},Ms=0,Cs=this.panoMeshes;Ms<Cs.length;Ms++)Ss[(Ls=Cs[Ms]).name]=Ls;this.panoMeshes.length=0;for(var Ts=0;Ts<this.work.observers.length;Ts++){var Bs="panoCircle_".concat(this.work.workCode,"_").concat(Ts),Ps=this.work.observers[Ts],Ls=void 0;if(Ss[Bs]?(Ls=Ss[Bs],delete Ss[Bs]):((Ls=this.panoCircleMeshCreator()).name=Bs,this.helper.add(Ls)),Ls.position.copy(Ps.standingPosition),_s&&this.model.loaded&&this.model.bvhs.loaded){var Rs=new r$2.Vector3(0,-1,0),Ds=new r$2.Vector3(0,.1,0).add(Ls.position),$s=new r$2.Raycaster(Ds,Rs,0,.2),Fs=this.model.intersectRaycaster($s)[0];Fs&&Fs.point.distanceTo(Ds)<.1&&Ls.position.copy(Fs.point)}this.panoMeshes[Ts]=Ls}for(var Gs=0,Vs=Object.keys(Ss);Gs<Vs.length;Gs++){var ks=Vs[Gs];this.helper.remove(Ss[ks]),Ss[ks].dispose(),delete Ss[ks]}},ga.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$2.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Bs=sr(Ss,new r$2.Vector3(1,0,1));return Bs.name="panorama_bounding",Bs},ga.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var Rs=Ht(),Ds=$n();this.tiling.cleanup(),this.panoResources[Ds]=Ss;var $s,Fs,Gs;if(this.locationMotion.ended){var Vs=this.locationMotion.getKeyFrameSegment(Rs);Vs[0];var ks=Vs[1],Os=this.locationMotion.value,Ns=this.panoResourceFromLocationMotionKeyframe(ks).position,Us=Ss.position;$s=Math.max(Ns.distanceTo(Us),1),Fs=[{key:ks.key,progress:0,value:e$2.__assign(e$2.__assign({},Os),{count:0})},{key:Ds,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gs=0}else{var Hs=this.locationMotion.getKeyFrameSegment(Rs),zs=Hs[0],js=(ks=Hs[1],Os=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(zs).position),Ws=(Ns=this.panoResourceFromLocationMotionKeyframe(ks).position,Us=Ss.position,ks.value.count-Os.count),Qs=Math.max(js.distanceTo(Ns),1)*Ws;$s=Qs+Math.max(Ns.distanceTo(Us),1),Fs=[{key:zs.key,progress:0,value:e$2.__assign({},Os)},{key:ks.key,progress:Qs/$s,value:ks.value},{key:Ds,progress:1,value:{count:ks.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var qs=this.locationMotionKeyframesLength(this.locationMotion.keyframes),tu=this.locationMotionKeyframesLength(Fs);Gs=this.locationMotion.getProgressVelocity(Rs)*qs/tu}var Ys=this.calculateMovingDuration(Ms.duration,$s),Ks={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Js={longitude:(Ts=Ks.longitude)!==null&&Ts!==void 0?Ts:this.camera.pose.longitude,latitude:(Bs=Ks.latitude)!==null&&Bs!==void 0?Bs:this.camera.pose.latitude,fov:(Ps=Ks.fov)!==null&&Ps!==void 0?Ps:this.camera.pose.fov,offset:Ss.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,Js),this.emit("panoWillArrive",_s,Js,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Lt,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Ks,Ys).catch(Lt),this.locationMotion.setKeyframes(Fs,Ys,Gs).then(function(){var eu,Zs,au,ru={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,ru),Ls.emit("panoArrived",_s,ru,Cs);var su=Ls.work.observers[Ls.currentPanoIndex];if(su&&su.video&&Ls.videoTexture&&Ls.videoTexture.image instanceof HTMLVideoElement){var lu=ro.clone().multiply((au=(Zs=(eu=Ls.model.getMaterial())===null||eu===void 0?void 0:eu.pano1)===null||Zs===void 0?void 0:Zs.matrix)!==null&&au!==void 0?au:new r$2.Matrix4).multiply(su.video.matrix),gu={map:Ls.videoTexture,size:su.video.size,matrix:lu,alpha:1},hu=$n(),wu=Ls.videoTexture.image;wu.setAttribute("uuid",hu),(kr||(kr=new Promise(function(Mu){var du,vu=document.createElement("video");vu.muted=!0,vu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",vu.addEventListener("timeupdate",function pu(){vu.removeEventListener("timeupdate",pu,!1),clearTimeout(du);var yu=document.createElement("canvas");yu.width=yu.height=1;var Su=yu.getContext("2d");Su?(Su.drawImage(vu,0,0,1,1),Su.getImageData(0,0,1,1).data[3]>10?Mu(!0):Mu(!1)):Mu(!1)},!1),vu.addEventListener("canplay",function pu(){vu.removeEventListener("canplay",pu,!1),vu.play()},!1),du=window.setTimeout(function(){return Mu(!1)},1e3)}))).then(function(Mu){Mu&&su.video&&wu.getAttribute("uuid")===hu&&(wu.oncanplay=function(){wu.oncanplay=Lt,wu.play()},wu.ontimeupdate=function(){wu.currentTime>.5&&(wu.ontimeupdate=Lt,Ls.panoVideo.setMaterial(gu))},wu.src=su.video.source)}).catch(function(){wu.removeAttribute("uuid")})}},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Ls.emit("moveToPanoCanceled",_s)})},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$2.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Bs=Ts.accessibleNodes.filter(function(Os){if(Os===Ss.currentPanoIndex)return!1;var Ns=Ss.work.observers[Os],Us=Ns.standingPosition.clone().sub(Cs);return Us.length()!==0&&!(Us.angleTo(new r$2.Vector3(0,-1,0))<Math.PI/12)&&(Ns.loadable||Ns.active)}),Ps=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Ps.length()===0)return null;for(var Ls=Bs.slice().sort(function(Os,Ns){var Us=Ss.work.observers[Os].position.clone().setY(Cs.y),Hs=Ss.work.observers[Ns].position.clone().setY(Cs.y);return Us.distanceTo(Cs)-Hs.distanceTo(Cs)}),Rs=0,Ds=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Rs<Ds.length;Rs++)for(var $s=Ds[Rs],Fs=0,Gs=Ls;Fs<Gs.length;Fs++){var Vs=Gs[Fs],ks=this.work.observers[Vs].position.clone().setY(Cs.y).sub(Cs);if(ks.length()!==0&&Ps.angleTo(ks)<$s)return Vs}return null},ga.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(ru){return ni(ru,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$2.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Bs=this.camera.getWorldDirection(new r$2.Vector3).setY(0),Ps=null,Ls=this.work.observers[this.currentPanoIndex];if(Ls){var Rs=Ls.accessibleNodes.filter(function(ru){if(ru===Ss.currentPanoIndex)return!1;var su=Ss.work.observers[ru];return!(su.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(su.loadable||su.active)}),Ds=this.model.intersectRaycaster(Ts)[0];if(Ds){var $s=gr(Rs,function(ru){var su=Ss.work.observers[ru].standingPosition.clone();return su.clone().sub(Ss.camera.position).setY(0).angleTo(Bs)>Math.PI/2?1/0:su.distanceTo(Ds.point)},!0),Fs=$s[0];$s[1]<this.panoTapTriggerRadius&&(Ps=Fs)}ji(Ps)&&(Ps=this.getForwardPanoIndexOrNot(Ts));for(var Gs=0,Vs=this.locationMotion.keyframes;Gs<Vs.length;Gs++){var ks=Vs[Gs],Os=this.panoResourceFromLocationMotionKeyframe(ks);if(!(ks.progress<this.locationMotion.progress)&&Os.panoIndex===Ps){Ps=null;break}}if(this.emit("panoSelected",Ps),ji(Ps))this.locationMotion.ended===!0&&this.cameraBounce();else{var Ns=this.work.observers[Ps];if(Ns.active){for(var Us={},Hs=Math.PI/6,zs=Math.PI/12,js=new r$2.Vector3(0,1,0),Ws=Ns.position.clone().setY(0).sub(Ls.position.clone().setY(0)).normalize(),Qs=Ws.clone().applyAxisAngle(js,Hs),qs=Ws.clone().applyAxisAngle(js,-Hs),tu=[],Ys=[],Ks=[],Js=0,eu=Ns.accessibleNodes;Js<eu.length;Js++)if((Fs=eu[Js])!==this.currentPanoIndex&&Fs!==Ps){var Zs=this.work.observers[Fs].position.clone().sub(Ns.position).setY(0);Ws.angleTo(Zs)<Hs?Ks.push(Zs):Qs.angleTo(Zs)<Hs?tu.push(Zs):qs.angleTo(Zs)<Hs&&Ys.push(Zs)}var au=(Ks.length>0?Ks:e$2.__spreadArray(e$2.__spreadArray([],tu,!0),Ys,!0)).slice().sort(function(ru,su){return ru.angleTo(Ws)-su.angleTo(Ws)})[0];au&&au.angleTo(Bs)>zs&&(Us.longitude=Math.atan2(-au.x,-au.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Us.latitude=pn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Us.fov=this.defaultFov),this.emit("wantsMoveToPano",Ps,Us,!0)}else this.panoMeshes[Ps]&&(this.panoMeshes[Ps].setDisabled(!1),this.panoMeshes[Ps].setLoading(!0))}}}}},ga}(Fr),ao=Math.PI/180,uo=180/Math.PI,lo=function(){var ca=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ca}}(),ho=function(){var ca=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ca}}(),co=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ca}}(),po=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,ga=ca?parseInt(ca[1],10):null;return function(){return ga}}(),Ao=function(){var ca=!1;if(po()===65){var ga=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(ga){var _s=ga[1].split(".");_s[0],_s[1];var Ss=_s[2],Ms=_s[3];ca=parseInt(Ss,10)===3325&&parseInt(Ms,10)<148}}return function(){return ca}}(),fo=function(){var ca=lo()&&ho()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return ca}}(),go=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ca}}();function vo(){var ca=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return go()?!ca:ca}var mo,yo=(mo={},function(ca,ga){mo[ca]===void 0&&(console.warn("cardboard: "+ga),mo[ca]=!0)});function bo(ca){var ga,_s=ca.indexOf("://");ga=_s!==-1?_s+3:0;var Ss=ca.indexOf("/",ga);return Ss===-1&&(Ss=ca.length),ca.substring(0,Ss)}var wo,xo=function(ca,ga,_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s,Fs,Gs,Vs,ks,Os,Ns,Us,Hs,zs,js,Ws,Qs,qs,tu,Ys,Ks,Js,eu,Zs,au,ru;(function(su,lu,gu){var hu=lu?lu[0]:0,wu=lu?lu[1]:0,Mu=lu?lu[2]:0,du=lu?lu[3]:1,vu=hu+hu,pu=wu+wu,yu=Mu+Mu,Su=hu*vu,Tu=hu*pu,bu=hu*yu,Au=wu*pu,Bu=wu*yu,Lu=Mu*yu,Qu=du*vu,Nu=du*pu,ju=du*yu;su[0]=1-(Au+Lu),su[1]=Tu+ju,su[2]=bu-Nu,su[3]=0,su[4]=Tu-ju,su[5]=1-(Su+Lu),su[6]=Bu+Qu,su[7]=0,su[8]=bu+Nu,su[9]=Bu-Qu,su[10]=1-(Su+Au),su[11]=0,su[12]=gu?gu[0]:0,su[13]=gu?gu[1]:0,su[14]=gu?gu[2]:0,su[15]=1})(ca,ga),_s&&function(su,lu,gu){var hu,wu,Mu,du,vu,pu,yu,Su,Tu,bu,Au,Bu,Lu=gu[0],Qu=gu[1],Nu=gu[2];lu===su?(su[12]=lu[0]*Lu+lu[4]*Qu+lu[8]*Nu+lu[12],su[13]=lu[1]*Lu+lu[5]*Qu+lu[9]*Nu+lu[13],su[14]=lu[2]*Lu+lu[6]*Qu+lu[10]*Nu+lu[14],su[15]=lu[3]*Lu+lu[7]*Qu+lu[11]*Nu+lu[15]):(hu=lu[0],wu=lu[1],Mu=lu[2],du=lu[3],vu=lu[4],pu=lu[5],yu=lu[6],Su=lu[7],Tu=lu[8],bu=lu[9],Au=lu[10],Bu=lu[11],su[0]=hu,su[1]=wu,su[2]=Mu,su[3]=du,su[4]=vu,su[5]=pu,su[6]=yu,su[7]=Su,su[8]=Tu,su[9]=bu,su[10]=Au,su[11]=Bu,su[12]=hu*Lu+vu*Qu+Tu*Nu+lu[12],su[13]=wu*Lu+pu*Qu+bu*Nu+lu[13],su[14]=Mu*Lu+yu*Qu+Au*Nu+lu[14],su[15]=du*Lu+Su*Qu+Bu*Nu+lu[15])}(ca,ca,_s),Ss=ca,Cs=(Ms=ca)[0],Ts=Ms[1],Bs=Ms[2],Ps=Ms[3],Ls=Ms[4],Rs=Ms[5],Ds=Ms[6],$s=Ms[7],Fs=Ms[8],Gs=Ms[9],Vs=Ms[10],ks=Ms[11],Os=Ms[12],Ns=Ms[13],Us=Ms[14],Hs=Ms[15],(ru=(zs=Cs*Rs-Ts*Ls)*(au=Vs*Hs-ks*Us)-(js=Cs*Ds-Bs*Ls)*(Zs=Gs*Hs-ks*Ns)+(Ws=Cs*$s-Ps*Ls)*(eu=Gs*Us-Vs*Ns)+(Qs=Ts*Ds-Bs*Rs)*(Js=Fs*Hs-ks*Os)-(qs=Ts*$s-Ps*Rs)*(Ks=Fs*Us-Vs*Os)+(tu=Bs*$s-Ps*Ds)*(Ys=Fs*Ns-Gs*Os))&&(ru=1/ru,Ss[0]=(Rs*au-Ds*Zs+$s*eu)*ru,Ss[1]=(Bs*Zs-Ts*au-Ps*eu)*ru,Ss[2]=(Ns*tu-Us*qs+Hs*Qs)*ru,Ss[3]=(Vs*qs-Gs*tu-ks*Qs)*ru,Ss[4]=(Ds*Js-Ls*au-$s*Ks)*ru,Ss[5]=(Cs*au-Bs*Js+Ps*Ks)*ru,Ss[6]=(Us*Ws-Os*tu-Hs*js)*ru,Ss[7]=(Fs*tu-Vs*Ws+ks*js)*ru,Ss[8]=(Ls*Zs-Rs*Js+$s*Ys)*ru,Ss[9]=(Ts*Js-Cs*Zs-Ps*Ys)*ru,Ss[10]=(Os*qs-Ns*Ws+Hs*zs)*ru,Ss[11]=(Gs*Ws-Fs*qs-ks*zs)*ru,Ss[12]=(Rs*Ks-Ls*eu-Ds*Ys)*ru,Ss[13]=(Cs*eu-Ts*Ks+Bs*Ys)*ru,Ss[14]=(Ns*js-Os*Qs-Us*zs)*ru,Ss[15]=(Fs*Qs-Gs*js+Vs*zs)*ru)},Eo=function(){function ca(ga,_s){ga===void 0&&(ga=new r$2.Vector3),_s===void 0&&(_s=0),this.sample=ga,this.timestampS=_s}return ca.prototype.set=function(ga,_s){this.sample=ga,this.timestampS=_s},ca.prototype.copy=function(ga){this.set(ga.sample,ga.timestampS)},ca}(),Io=function(){function ca(ga,_s){this.kFilter=ga,this.isDebug=_s,this.currentAccelMeasurement=new Eo,this.currentGyroMeasurement=new Eo,this.previousGyroMeasurement=new Eo,lo()?this.filterQ=new r$2.Quaternion(-1,0,0,1):this.filterQ=new r$2.Quaternion(1,0,0,1),this.previousFilterQ=new r$2.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$2.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$2.Vector3,this.measuredGravity=new r$2.Vector3,this.gyroIntegralQ=new r$2.Quaternion}return ca.prototype.addAccelMeasurement=function(ga,_s){this.currentAccelMeasurement.set(ga,_s)},ca.prototype.addGyroMeasurement=function(ga,_s){this.currentGyroMeasurement.set(ga,_s);var Ss,Ms=_s-this.previousGyroMeasurement.timestampS;Ss=Ms,isNaN(Ss)||Ss<=.001||Ss>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ca.prototype.getOrientation=function(){return this.filterQ},ca.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var ga=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,_s=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ga);this.gyroIntegralQ.multiply(_s),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(_s);var Ss=new r$2.Quaternion;Ss.copy(this.filterQ),Ss.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Ss),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Ms,Cs=new r$2.Quaternion;Cs.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Cs.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",uo*((Ms=Cs).w>1?0:2*Math.acos(Ms.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ts=new r$2.Quaternion;Ts.copy(this.filterQ),Ts.multiply(Cs),this.filterQ.slerp(Ts,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ca.prototype.accelToQuaternion_=function(ga){var _s=new r$2.Vector3;_s.copy(ga),_s.normalize();var Ss=new r$2.Quaternion;return Ss.setFromUnitVectors(new r$2.Vector3(0,0,-1),_s),Ss.inverse(),Ss},ca.prototype.gyroToQuaternionDelta_=function(ga,_s){var Ss=new r$2.Quaternion,Ms=new r$2.Vector3;return Ms.copy(ga),Ms.normalize(),Ss.setFromAxisAngle(Ms,ga.length()*_s),Ss},ca}(),Co=function(){function ca(ga,_s){this.predictionTimeS=ga,this.isDebug=_s,this.previousQ=new r$2.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$2.Quaternion,this.outQ=new r$2.Quaternion}return ca.prototype.getPrediction=function(ga,_s,Ss){if(!this.previousTimestampS)return this.previousQ.copy(ga),this.previousTimestampS=Ss,ga;var Ms=new r$2.Vector3;Ms.copy(_s),Ms.normalize();var Cs=_s.length();if(Cs<20*ao)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(uo*Cs).toFixed(1)),this.outQ.copy(ga),this.previousQ.copy(ga),this.outQ;var Ts=Cs*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Ms,Ts),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ga),this.previousTimestampS=Ss,this.outQ},ca}(),So=function(){function ca(ga){this.coefficients=ga}return ca.prototype.distortInverse=function(ga){for(var _s=0,Ss=1,Ms=ga-this.distort(_s);Math.abs(Ss-_s)>1e-4;){var Cs=ga-this.distort(Ss),Ts=Ss-Cs*((Ss-_s)/(Cs-Ms));_s=Ss,Ss=Ts,Ms=Cs}return Ss},ca.prototype.distort=function(ga){for(var _s=ga*ga,Ss=0,Ms=0;Ms<this.coefficients.length;Ms++)Ss=_s*(Ss+this.coefficients[Ms]);return(Ss+1)*ga},ca}(),Bo=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},Mo=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},Po=function(){function ca(ga,_s,Ss,Ms){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Ss,this.accelerometer=new r$2.Vector3,this.gyroscope=new r$2.Vector3,this.filter=new Io(ga,Ms),this.posePredictor=new Co(_s,Ms),this.isFirefoxAndroid=co(),this.isIOS=lo();var Cs=po();this.isDeviceMotionInRadians=!this.isIOS&&Cs!==null&&Cs<66,this.isWithoutDeviceMotion=Ao()||fo(),this.filterToWorldQ=new r$2.Quaternion,lo()?this.filterToWorldQ.setFromAxisAngle(new r$2.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$2.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$2.Quaternion,this.worldToScreenQ=new r$2.Quaternion,this.originalPoseAdjustQ=new r$2.Quaternion;var Ts=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$2.Vector3(0,0,1),Ts),this.setScreenTransform_(),vo()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$2.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return ca.prototype.getPosition=function(){return null},ca.prototype.getOrientation=function(){var ga;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ts=new r$2.Quaternion().setFromAxisAngle(new r$2.Vector3(0,0,-1),0),Bs=new r$2.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Bs.setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI/-2):Bs.setFromAxisAngle(new r$2.Vector3(0,1,0),Math.PI/2),Ts.multiply(Bs)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Ss=new r$2.Quaternion).setFromAxisAngle(new r$2.Vector3(1,0,0),-Math.PI/2),Ss),ga=this._deviceOrientationQ;var _s=new r$2.Quaternion;return _s.copy(ga),_s.multiply(this.deviceOrientationFilterToWorldQ),_s.multiply(this.resetQ),_s.multiply(this.worldToScreenQ),_s.multiplyQuaternions(this.deviceOrientationFixQ,_s),this.yawOnly&&(_s.x=0,_s.z=0,_s.normalize()),this.orientationOut_[0]=_s.x,this.orientationOut_[1]=_s.y,this.orientationOut_[2]=_s.z,this.orientationOut_[3]=_s.w,this.orientationOut_}var Ss,Ms=this.filter.getOrientation();ga=this.posePredictor.getPrediction(Ms,this.gyroscope,this.previousTimestampS);var Cs=new r$2.Quaternion;return Cs.copy(this.filterToWorldQ),Cs.multiply(this.resetQ),Cs.multiply(ga),Cs.multiply(this.worldToScreenQ),this.yawOnly&&(Cs.x=0,Cs.z=0,Cs.normalize()),this.orientationOut_[0]=Cs.x,this.orientationOut_[1]=Cs.y,this.orientationOut_[2]=Cs.z,this.orientationOut_[3]=Cs.w,this.orientationOut_},ca.prototype.getPose=function(){var ga=new Bo;return ga.orientation=this.getOrientation(),ga},ca.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),vo()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ca.prototype.getFrameData=function(ga){var _s=this.getOrientation(),Ss=this.getEyeOffset(),Ms=this.getEyeProjectionMatrix();return ga.pose.angularAcceleration=null,ga.pose.angularVelocity=null,ga.pose.linearAcceleration=null,ga.pose.linearVelocity=null,ga.pose.orientation=_s,ga.pose.position=null,ga.timestamp=this.previousTimestampS,ga.leftProjectionMatrix.set(Ms.left),ga.rightProjectionMatrix.set(Ms.right),xo(ga.leftViewMatrix,_s,Ss.left),xo(ga.rightViewMatrix,_s,Ss.right),ga},ca.prototype.start=function(){if(typeof window=="undefined")return function(){};var ga=this.onDeviceMotion_.bind(this),_s=this.onOrientationChange_.bind(this),Ss=this.onMessage_.bind(this),Ms=this.onDeviceOrientation_.bind(this);return lo()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Cs=window.self!==window.top,Ts=bo(document.referrer),Bs=bo(window.location.href);return Cs&&Ts!==Bs}()&&window.addEventListener("message",Ss),window.addEventListener("orientationchange",_s),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Ms):window.addEventListener("devicemotion",ga),function(){window.removeEventListener("devicemotion",ga),window.removeEventListener("deviceorientation",_s),window.removeEventListener("orientationchange",_s),window.removeEventListener("message",Ss)}},ca.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},ca.prototype.getEyeProjectionMatrix=function(){var ga=this.getEyeFieldOfView(),_s=this.depthNear,Ss=this.depthFar,Ms={left:[],right:[]},Cs=ga.left.upDegrees*ao,Ts=ga.left.downDegrees*ao,Bs=2/((Ls=ga.left.leftDegrees*ao)+(Rs=ga.left.rightDegrees*ao)),Ps=2/(Cs+Ts);Ms.left[0]=Bs,Ms.left[1]=0,Ms.left[2]=0,Ms.left[3]=0,Ms.left[4]=0,Ms.left[5]=Ps,Ms.left[6]=0,Ms.left[7]=0,Ms.left[8]=-(Ls-Rs)*Bs*.5,Ms.left[9]=(Cs-Ts)*Ps*.5,Ms.left[10]=Ss/(_s-Ss),Ms.left[11]=-1,Ms.left[12]=0,Ms.left[13]=0,Ms.left[14]=Ss*_s/(_s-Ss),Ms.left[15]=0;var Ls,Rs;return Cs=ga.right.upDegrees*ao,Ts=ga.right.downDegrees*ao,Bs=2/((Ls=ga.right.leftDegrees*ao)+(Rs=ga.right.rightDegrees*ao)),Ps=2/(Cs+Ts),Ms.right[0]=Bs,Ms.right[1]=0,Ms.right[2]=0,Ms.right[3]=0,Ms.right[4]=0,Ms.right[5]=Ps,Ms.right[6]=0,Ms.right[7]=0,Ms.right[8]=-(Ls-Rs)*Bs*.5,Ms.right[9]=(Cs-Ts)*Ps*.5,Ms.right[10]=Ss/(_s-Ss),Ms.right[11]=-1,Ms.right[12]=0,Ms.right[13]=0,Ms.right[14]=Ss*_s/(_s-Ss),Ms.right[15]=0,Ms},ca.prototype.getEyeFieldOfView=function(){var ga=this.viewer,_s=this.device,Ss=new So(ga.distortionCoefficients),Ms=ga.screenLensDistance,Cs=(_s.widthMeters-ga.interLensDistance)/2,Ts=ga.interLensDistance/2,Bs=ga.baselineLensDistance-_s.bevelMeters,Ps=_s.heightMeters-Bs,Ls=uo*Math.atan(Ss.distort(Cs/Ms)),Rs=uo*Math.atan(Ss.distort(Ts/Ms)),Ds=uo*Math.atan(Ss.distort(Bs/Ms)),$s=uo*Math.atan(Ss.distort(Ps/Ms)),Fs=new Mo,Gs=new Mo;return Fs.leftDegrees=Math.min(Ls,ga.fov),Fs.rightDegrees=Math.min(Rs,ga.fov),Fs.downDegrees=Math.min(Ds,ga.fov),Fs.upDegrees=Math.min($s,ga.fov),Gs.leftDegrees=Fs.rightDegrees,Gs.rightDegrees=Fs.leftDegrees,Gs.upDegrees=Fs.upDegrees,Gs.downDegrees=Fs.downDegrees,{left:Fs,right:Gs}},ca.prototype.onDeviceOrientation_=function(ga){this._deviceOrientationQ=this._deviceOrientationQ||new r$2.Quaternion;var _s=ga.alpha,Ss=ga.beta,Ms=ga.gamma;_s=(_s||0)*Math.PI/180,Ss=(Ss||0)*Math.PI/180,Ms=(Ms||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$2.Euler(_s,Ss,-Ms,"YXZ"))},ca.prototype.onDeviceMotion_=function(ga){this.updateDeviceMotion_(ga)},ca.prototype.updateDeviceMotion_=function(ga){var _s=ga.accelerationIncludingGravity,Ss=ga.rotationRate,Ms=ga.timeStamp/1e3,Cs=Ms-this.previousTimestampS;return Cs<0?(yo("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Ms)):Cs<=.001||Cs>1?(yo("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Ms)):(_s&&(this.accelerometer.set(-_s.x,-_s.y,-_s.z),Ss&&(go()?this.gyroscope.set(-Ss.beta,Ss.alpha,Ss.gamma):this.gyroscope.set(Ss.alpha,Ss.beta,Ss.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Ms)),this.filter.addAccelMeasurement(this.accelerometer,Ms)),void(this.previousTimestampS=Ms))},ca.prototype.onOrientationChange_=function(){this.setScreenTransform_()},ca.prototype.onMessage_=function(ga){var _s=ga.data;_s&&_s.type&&_s.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(_s.deviceMotionEvent)},ca.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$2.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$2.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ca}(),To=[0,0,.5,1],Qo=[.5,0,.5,1],Ro=function(){function ca(ga){var _s=this;this.renderer=ga,this.sensor=new Po(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$2.PerspectiveCamera,this.cameraR=new r$2.PerspectiveCamera;var Ss=this.sensor.start();this.dispose=function(){var Ms=_s.renderer.getSize(new r$2.Vector2);_s.renderer.setScissor(0,0,Ms.width,Ms.height),_s.renderer.setViewport(0,0,Ms.width,Ms.height),_s.renderer.setScissorTest(!1),Ss()}}return ca.prototype.render=function(ga,_s){var Ss=this.renderer.getSize(new r$2.Vector2);if(Ss.width>Ss.height){var Ms=ga.autoUpdate;Ms&&(ga.updateMatrixWorld(),ga.autoUpdate=!1);var Cs={x:Math.round(Ss.width*To[0]),y:Math.round(Ss.height*To[1]),width:Math.round(Ss.width*To[2]),height:Math.round(Ss.height*To[3])},Ts={x:Math.round(Ss.width*Qo[0]),y:Math.round(Ss.height*Qo[1]),width:Math.round(Ss.width*Qo[2]),height:Math.round(Ss.height*Qo[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),_s.parent===null&&_s.updateMatrixWorld(),_s.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),_s.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Bs=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$2.Vector3().fromArray(Bs.left),this.scale),this.cameraR.translateOnAxis(new r$2.Vector3().fromArray(Bs.right),this.scale);var Ps=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Ps.left.slice(),this.cameraR.projectionMatrix.elements=Ps.right.slice(),this.renderer.setViewport(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.setScissor(Cs.x,Cs.y,Cs.width,Cs.height),this.renderer.render(ga,this.cameraL),this.renderer.setViewport(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.setScissor(Ts.x,Ts.y,Ts.width,Ts.height),this.renderer.render(ga,this.cameraR),this.renderer.setViewport(0,0,Ss.width,Ss.height),this.renderer.setScissor(0,0,Ss.width,Ss.height),this.renderer.setScissorTest(!1),Ms&&(ga.autoUpdate=!0)}else this.renderer.render(ga,_s)},ca.prototype.dispose=function(){},ca}(),Do={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},ko=typeof navigator!="undefined"&&(wo=Do[navigator.language.split("-")[0]])!==null&&wo!==void 0?wo:Do.zh,Fo=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(ko.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(ko.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function No(ca){for(var ga=1,_s=document.getElementsByTagName("meta"),Ss=0;Ss<_s.length;Ss++){var Ms=_s[Ss];if(Ms.getAttribute("name")==="viewport"){var Cs=(Ms.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Cs&&(ga=Number(Cs[1])),isNaN(ga)&&(ga=1)}}return Fo.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,ca).replace(/(\d+)px/g,function(Ts,Bs){return function(Ps){return Math.floor(Ps*ga)+"px"}(Number(Bs))})}var Oo=new r$2.CircleBufferGeometry(.12,16),Lo=function(){var ca=me(),ga=new r$2.Texture;return ca.onload=function(){if(typeof document!="undefined"){var _s=256,Ss=document.createElement("canvas");Ss.setAttribute("width",String(_s)),Ss.setAttribute("height",String(_s));var Ms=Ss.getContext("2d");if(Ms){Ms.drawImage(ca,0,0,_s,_s),Ms.globalCompositeOperation="source-out";var Cs=128;Ms.beginPath(),Ms.lineWidth=6.4,Ms.arc(Cs,Cs,83.2,0,2*Math.PI),Ms.strokeStyle="rgba(255, 255, 255, 1.0)",Ms.closePath(),Ms.stroke(),ga.image=Ss,ga.needsUpdate=!0}}},ca.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",ga}(),Vo=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var _s=256;return ga.beginPath(),ga.arc(_s,_s,192,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(_s,_s,192,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$2.CanvasTexture(ca)}}return null}(),Ho=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256;_s.arc(Ss,Ss,192,0,2*Math.PI),_s.fillStyle="rgba(85, 90, 255, 0.6)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,192,0,2*Math.PI);var Ms=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Ms.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.2)"),_s.fillStyle=Ms,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,187.2,0,2*Math.PI);var Cs=_s.createLinearGradient(0,0,0,ca);return Cs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Cs.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Cs,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),Ko=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=179.2;_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.fillStyle="rgba(255, 255, 255, 0.4)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.fill(),_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Cs=_s.createRadialGradient(Ss,Ss,0,Ss,Ss,Ss);Cs.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Cs.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.fillStyle=Cs,_s.fill(),_s.lineWidth=4.8,_s.arc(Ss,Ss,Ms-4.8,0,2*Math.PI);var Ts=_s.createLinearGradient(0,0,0,ca);return Ts.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ts.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Ts,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),zo=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var _s=ga.getContext("2d");if(_s){var Ss=256,Ms=217.6,Cs=64;_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI),_s.strokeStyle="rgba(147, 162, 255, 0.3)",_s.shadowBlur=25.6,_s.shadowColor="rgba(255, 255, 255, 0.6)",_s.stroke(),_s.lineWidth=Cs,_s.arc(Ss,Ss,Ms,0,2*Math.PI);var Ts=_s.createRadialGradient(Ss,Ss,185.6,Ss,Ss,249.6);Ts.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ts.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ts.addColorStop(1,"rgba(255, 255, 255, 0.5)"),_s.strokeStyle=Ts,_s.stroke(),_s.beginPath(),_s.lineWidth=4,_s.arc(Ss,Ss,245.6,0,2*Math.PI);var Bs=_s.createLinearGradient(0,0,ca,0);return Bs.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bs.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Bs.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),_s.strokeStyle=Bs,_s.stroke(),new r$2.CanvasTexture(ga)}}return null}(),qo=function(ca){function ga(){var _s=ca.call(this)||this;_s.progress=0,_s.opacity=0,_s.loading=!1,_s.current=!1,_s.disabled=!1,_s.opacityMotion=new vn({opacity:0}),_s.loadingMotion=new vn({opacity:0}),_s.currentMotion=new vn({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Ss={blending:r$2.CustomBlending,blendSrc:r$2.SrcAlphaFactor,blendDst:r$2.OneMinusSrcAlphaFactor,blendSrcAlpha:r$2.OneFactor,blendDstAlpha:r$2.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return _s.hitTestMesh=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{color:0,opacity:0}))),_s.hitTestMesh.scale.set(1.5,1.5,1.5),_s.centerMesh=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Ho,opacity:0}))),_s.centerMesh2=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Ko,opacity:0}))),_s.ringMesh=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:zo,opacity:0}))),_s.loadingMesh=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Lo,opacity:.8}))),_s.disableMesh=new r$2.Mesh(Oo,new r$2.MeshBasicMaterial(e$2.__assign(e$2.__assign({},Ss),{map:Vo}))),_s.loadingMesh.visible=!1,_s.disableMesh.visible=!1,_s.hitTestMesh.position.z=0,_s.ringMesh.position.z=.003,_s.disableMesh.position.z=.002,_s.centerMesh.position.z=.002,_s.centerMesh2.position.z=.002,_s.loadingMesh.position.z=.005,_s.hitTestMesh.frustumCulled=!1,_s.centerMesh.frustumCulled=!1,_s.centerMesh2.frustumCulled=!1,_s.ringMesh.frustumCulled=!1,_s.loadingMesh.frustumCulled=!1,_s.disableMesh.frustumCulled=!1,_s.add(_s.hitTestMesh),_s.add(_s.centerMesh),_s.add(_s.centerMesh2),_s.add(_s.ringMesh),_s.add(_s.loadingMesh),_s.add(_s.disableMesh),_s.renderOrder=1e4,_s.needsRender=!0,_s}return e$2.__extends(ga,ca),ga.prototype.setProgress=function(_s){this.progress=_s,this.setLoading(_s>0)},ga.prototype.setOpacity=function(_s){this.opacity!==_s&&(this.opacity=_s=pn(_s,0,1),this.opacityMotion.set({opacity:_s},30).catch(Lt))},ga.prototype.setCurrent=function(_s){if(this.current!==_s){if(_s){var Ss=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Ss,1500).catch(Lt)}else Ss=[{progress:0,value:e$2.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Ss,200).catch(Lt);this.current=_s}},ga.prototype.setLoading=function(_s){this.loading!==_s&&(_s?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=_s,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},ga.prototype.setDisabled=function(_s){this.disabled!==_s&&(this.disabled=_s,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=_s,this.centerMesh.visible=!_s,this.needsRender=!0)},ga.prototype.tap=function(){return Promise.resolve()},ga.prototype.updateTime=function(_s,Ss){this.opacityMotion.update(_s),this.currentMotion.update(_s),this.loadingMotion.update(_s);var Ms=this.opacityMotion.value.opacity,Cs=this.currentMotion.value,Ts=Cs.ringScale,Bs=Cs.ringOpacity,Ps=Cs.circleFade,Ls=Cs.circleOpacity,Rs=Cs.circleScale;if(this.ringMesh.scale.set(Ts,Ts,Ts),this.centerMesh.scale.set(Rs,Rs,Rs),this.centerMesh2.scale.set(Rs,Rs,Rs),this.ringMesh.material.opacity=Bs*Ms,this.centerMesh.material.opacity=(1-Ps)*Ms,this.centerMesh2.material.opacity=Ps*Ls*Ms,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Ss/200);var Ds=this.opacityMotion.value.opacity,$s=1.1;this.centerMesh.scale.set($s,$s,$s),this.centerMesh2.scale.set($s,$s,$s),this.centerMesh.material.opacity=0*Ds,this.centerMesh2.material.opacity=.2*Ds}else this.loadingMesh.visible=!1;this.needsRender=!0},ga.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},ga}(r$2.Object3D),_o=function(ca){function ga(_s){var Ss=this,Ms=ga.parseArgs(_s);(Ss=ca.call(this,Ms)||this).cardboard=new Ro(Ss.renderer);var Cs,Ts,Bs,Ps=(Cs="five_vr_helper_"+$n(),Ts=No(Cs),(Bs=document.createElement("div")).className=Cs,Bs.innerHTML=Ts,Bs);Ss.helperElement=Ps;var Ls=new yr(Ps);return Ss.element.parentNode&&(Ss.element.parentNode.insertBefore(Ps,Ss.element),Ss.setHelperElementSize(),Ls.on("tap",function(){return Ss.emit("vrWantsToExit")})),Ss.destroyHelper=function(){Ls.destroy(),Ps.parentNode&&Ps.parentNode.removeChild(Ps),delete Ss.helperElement},Ss.boundingMesh.visible=!0,Ss}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss=e$2.__assign(e$2.__assign({},_s),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return ca.parseArgs.call(this,Ss)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var _s=0,Ss=this.panoMeshes;_s<Ss.length;_s++){var Ms=Ss[_s];this.helper.remove(Ms),Ms.dispose()}this.panoMeshes.length=0},ga.prototype.isReady=function(){return!1},ga.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},ga.prototype.updatePanoMeshes=function(){var _s=this;this.panoMeshes.forEach(function(Ts){_s.helper.remove(Ts),Ts.dispose()}),this.panoMeshes.length=0;for(var Ss=0;Ss<this.work.observers.length;Ss++){var Ms=this.work.observers[Ss],Cs=new qo;Cs.name="panoSphere_".concat(this.work.workCode,"_").concat(Ss),Cs.position.copy(Ms.position),Cs.needsRender=!0,this.helper.add(Cs),this.panoMeshes[Ss]=Cs}},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs;if(!this.destroyed){this.needsRender=!0;var Ts={},Bs={};if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Ps=this.locationMotion.getKeyFrameSegment(_s),Ls=Ps[0],Rs=Ps[1],Ds=this.panoResourceFromLocationMotionKeyframe(Ls),$s=this.panoResourceFromLocationMotionKeyframe(Rs),Fs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Gs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Vs=Ds.position,ks=$s.position,Os=this.locationMotion.value.count-Rs.value.count+1;Ts.modelAlpha=this.locationMotion.value.modelAlpha,Ts.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ts.useBlackTransition=$s.effect==="instant",$s.panoPicture&&(Os<1?Ds.panoPicture&&(Ts.pano0=Ds.panoPicture):Ts.pano0=$s.panoPicture,Ts.pano1=$s.panoPicture),$s.effect==="fade"&&(Ts.pano0&&Ds.panoPicture&&(Ts.pano0={map:Ts.pano0.map,luminanceMap:Ts.pano0.luminanceMap,matrix:Ds.panoPicture.matrix.clone().setPosition($s.position)}),Vs.copy(ks)),Ts.progress=Os,Bs.distance=this.locationMotion.value.distance,Bs.offset=new r$2.Vector3(Vs.x+(ks.x-Vs.x)*Os,Vs.y+(ks.y-Vs.y)*Os,Vs.z+(ks.z-Vs.z)*Os);for(var Ns=[],Us=[],Hs=0,zs=this.locationMotion.keyframes;Hs<zs.length;Hs++){var js=zs[Hs],Ws=js.key,Qs=js.progress;Ws!==void 0&&(Ns.push(Ws),Qs>=this.locationMotion.progress&&Us.push(Ws))}for(var qs=0,tu=Object.keys(this.panoResources);qs<tu.length;qs++){var Ys=tu[qs];if(!(Us.indexOf(Ys)>=0)){var Ks=this.panoResources[Ys];if(Ks.panoPicture){var Js=Ks.panoPicture.map;if(Js){if(Js===((Ms=Ts.pano0)===null||Ms===void 0?void 0:Ms.map)||Js===((Cs=Ts.pano1)===null||Cs===void 0?void 0:Cs.map))continue;Js.dispose(),Ks.panoPicture=null}}Ns.indexOf(Ys)>=0||delete this.panoResources[Ys]}}this.currentPanoIndex=Os<.5?Ds.panoIndex:$s.panoIndex,this.emit("movingToPano",Gs.panoIndex,Fs.panoIndex,this.locationMotion.progress)}vr(Ts)===!1&&(this.model.setMaterial(Ts),this.boundingMesh.setMaterial(Ts)),Bs.offset&&this.camera.position.copy(Bs.offset);var eu=this.camera.pose.longitude,Zs=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var au=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),ru=0;ru<this.work.observers.length;ru++){var su=this.work.observers[ru];if((hu=this.panoMeshes[ru]).visible=!0,su.loadable||su.active){if(au.indexOf(ru)===-1)hu.visible=!1;else{hu.visible=!0;var lu=hu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);lu<.05?hu.setOpacity(0):hu.setOpacity(pn(1.5/lu,0,1)),this.currentPanoIndex===ru&&hu.setOpacity(0)}hu.lookAt(this.camera.position)}else hu.visible=!0}var gu=this.intersect(_s);for(ru=0;ru<this.work.observers.length;ru++)(hu=this.panoMeshes[ru])==null||hu.setCurrent(hu===gu);for(ru=0;ru<this.work.observers.length;ru++){var hu;(hu=this.panoMeshes[ru])&&hu.updateTime&&hu.updateTime(_s,Ss)}eu===this.camera.pose.longitude&&Zs===this.camera.pose.latitude||(this.cameraMotion.set(ni(this.camera.pose,["longitude","latitude"]),0).catch(Lt),this.emit("cameraDirectionUpdate",ni(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",mr(ni(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},ga.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},ga.prototype.setCamera=function(_s){},ga.prototype.destroyHelper=function(){},ga.prototype.setHelperElementSize=function(){if(this.helperElement){var _s=new r$2.Vector2(this.element.offsetWidth,this.element.offsetHeight),Ss=_s.x*this.scissor.left,Ms=_s.y*(1-this.scissor.bottom-this.scissor.height),Cs=_s.x*this.scissor.width,Ts=_s.y*this.scissor.height;this.helperElement.style.marginLeft=Ss+"px",this.helperElement.style.marginTop=Ms+"px",this.helperElement.style.width=Cs+"px",this.helperElement.style.height=Ts+"px"}},ga.prototype.intersect=function(_s){var Ss;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&_s-this.activeTime>1500){var Ms=this.activePanoMesh;return(Rs=this.panoMeshes.indexOf(Ms))>=0&&this.moveToPano(Rs,{},!0),delete this.activePanoMesh,delete this.activeTime,Ms}for(var Cs=this.camera.getWorldDirection(new r$2.Vector3),Ts=new r$2.Raycaster(this.camera.position,Cs),Bs=void 0,Ps=[],Ls=this.work.observers[this.currentPanoIndex].visibleNodes,Rs=0;Rs<this.work.observers.length;Rs++){var Ds=this.panoMeshes[Rs];if(Ls.indexOf(Rs)!==-1){var $s=Ts.intersectObject((Ss=Ds.hitTestMesh)!==null&&Ss!==void 0?Ss:Ds,!0)[0];$s&&Ps.push({panoMesh:Ds,intersection:$s})}}var Fs=Ps.sort(function(Ns,Us){return Ns.intersection.distance-Us.intersection.distance})[0];if(Fs?(Bs=Fs.intersection,this.activePanoMesh!==Fs.panoMesh&&(this.activePanoMesh=Fs.panoMesh,this.activeTime=_s),this.intersectMesh.position.copy(Fs.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Bs)if((Bs=this.model.intersectRaycaster(Ts)[0])&&Bs.face){var Gs=Bs.face.normal,Vs=new r$2.Quaternion;Vs.setFromUnitVectors(new r$2.Vector3(0,0,1),Gs),this.intersectMesh.quaternion.copy(Vs);var ks=Gs.clone().multiplyScalar(.05),Os=Bs.point.clone().add(ks);this.intersectMesh.position.copy(Os),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Bs,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Fs==null?void 0:Fs.panoMesh},ga.prototype.onPanGesture=function(){},ga.prototype.onTapGesture=function(){},ga.prototype.onPinchGesture=function(){},ga.prototype.onMouseMove=function(){},ga.prototype.onMouseOut=function(){},ga}(so),jo=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs=this,Ps=ga.parseArgs(_s);return(Bs=ca.call(this,Ps)||this).currentPanoIndex=Ps.initial[0],Bs.locationMotion=new vn({x:Bs.camera.pose.offset.x,y:Bs.camera.pose.offset.y,z:Bs.camera.pose.offset.z,distance:Bs.camera.pose.distance,modelAlpha:(Ms=(Ss=Bs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Bs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Bs}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){return ca.parseArgs.call(this,_s)},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose()},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.work=_s,this.currentPanoIndex=Ss,this.hideIntersectMesh();var Bs={duration:0,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov};return this.moveToPano(Ss,Bs,Ts),!0},ga.prototype.updateTime=function(_s,Ss){if(!this.destroyed){var Ms={},Cs={};if(!this.locationMotion.ended){this.locationMotion.update(_s),Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Ts=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Bs=gr(this.work.observers,function(Ps){return Ps.position.distanceTo(Ts)});this.currentPanoIndex=this.work.observers.indexOf(Bs)}this.cameraMotion.ended||(this.cameraMotion.update(_s),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),vr(Ms)||this.model.setMaterial(Ms),vr(Cs)||this.setCamera(Cs)}},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;this.destroyed||(this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Rs,Ds){Ls.emit("initAnimationWillStart",Rs,Ds,Ls.userAction)},moveEndCallback:function(Rs,Ds){Ls.emit("initAnimationEnded",Rs,Ds,Ls.userAction)},moveCancelCallback:function(){var Rs=Ls.currentPanoIndex,Ds={longitude:Ls.camera.pose.longitude,latitude:Ls.camera.pose.latitude,fov:Ls.camera.pose.fov,offset:Ls.camera.pose.offset.clone()};Ls.emit("initAnimationEnded",Rs,Ds,Ls.userAction)}},Cs))},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:new r$2.Vector3(Ss.value.x,Ss.value.y,Ss.value.z)}},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={});var Cs=this.work.observers[_s];Cs&&this.moveToPosition(Cs.position,Ss,Ms)},ga.prototype.moveToPosition=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps=this;Ss===void 0&&(Ss={}),this.userAction=Ms;for(var Ls=Ht(),Rs=new r$2.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(_s),Ds=this.locationMotion.getProgressVelocity(Ls),$s=0,Fs=1;Fs<this.locationMotion.keyframes.length;Fs++){var Gs=this.locationMotion.keyframes[Fs-1].value,Vs=Gs.x,ks=Gs.y,Os=Gs.z,Ns=this.locationMotion.keyframes[Fs].value,Us=Ns.x,Hs=Ns.y,zs=Ns.z;$s+=Math.sqrt(Math.pow(Us-Vs,2)+Math.pow(Hs-ks,2)+Math.pow(zs-Os,2))}var js=Rs===0?0:Ds*$s/Rs,Ws=this.calculateMovingDuration(Ss.duration,Rs),Qs={x:_s.x,y:_s.y,z:_s.z,distance:0,modelAlpha:1,perspToOrtho:0},qs={longitude:Ss.longitude,latitude:Ss.latitude,fov:Ss.fov},tu={longitude:(Cs=qs.longitude)!==null&&Cs!==void 0?Cs:this.camera.pose.longitude,latitude:(Ts=qs.latitude)!==null&&Ts!==void 0?Ts:this.camera.pose.latitude,fov:(Bs=qs.fov)!==null&&Bs!==void 0?Bs:this.camera.pose.fov,offset:_s.clone()},Ys=gr(this.work.observers,function(Js){return Js.position.distanceTo(_s)}),Ks=this.work.observers.indexOf(Ys);this.emit("moveToPano",Ks,this.userAction),Ss.moveStartCallback&&Ss.moveStartCallback(Ks,tu),this.emit("panoWillArrive",Ks,tu,this.userAction),this.cameraMotion.set(qs,Ws).catch(Lt),this.locationMotion.set(Qs,Ws,js).then(function(){var Js=mr(Ps.camera.pose);Ss.moveEndCallback&&Ss.moveEndCallback(Ks,Js),Ps.emit("panoArrived",Ks,Js,Ps.userAction)},function(){Ss.moveCancelCallback&&Ss.moveCancelCallback(),Ps.emit("moveToPanoCanceled",Ks)})},ga.prototype.onTapGesture=function(_s){var Ss=_s.pointers.map(function(Gs){return ni(Gs,["x","y"])});if(!this.emit("wantsGesture","tap",Ss,!0)){var Ms=this.relativeClientPosition(_s.center),Cs=new r$2.Raycaster;if(Cs.setFromCamera(Ms,this.camera),!this.emit("wantsTapGesture",Cs,Ms,!0)){this.emit("gesture","tap",Ss,!0),this.emit("tapGesture",Cs,Ms,!0),this.interiaMovement=!1;var Ts=this.model.intersectRaycaster(Cs)[0];if(Ts&&Ts.face){var Bs=Ts.face.normal,Ps=Ts.point;if(new r$2.Vector3(0,1,0).angleTo(Bs)>Math.PI/3){var Ls=this.camera.position.clone().setY(Ps.y),Rs=Ps.clone().sub(Ls).setLength(.3),Ds=Ps.clone().sub(Rs);Cs.set(Ds,new r$2.Vector3(0,-1,0)),Ts=this.model.intersectRaycaster(Cs)[0]}}if(Ts){var $s=Ts.point.clone(),Fs=gr(this.work.observers.filter(function(Gs){return Math.abs(Gs.standingPosition.y-$s.y)<1}),function(Gs){return Gs.standingPosition.distanceTo($s)});if(Fs)return $s.y=Fs.position.y,void this.moveToPosition($s,{},!0)}this.cameraBounce()}}},ga}(Fr),Uo=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Go=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var _s=113,Ss=126,Ms=0,Cs="";return arguments[Ms].split(Cs).map(function(Ts){return Ts.charCodeAt(Ms)>Ss?Ts:String.fromCharCode((Ts.charCodeAt(Ms)+_s)%Ss)}).join(Cs)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Wo=Object.assign({opacity:new r$2.Uniform(1),scale:new r$2.Uniform(13.1),panoMap:new r$2.Uniform(null),panoDisplacementMap:new r$2.Uniform(null),panoPosition:new r$2.Uniform(new r$2.Vector3),panoMatrix:new r$2.Uniform(new r$2.Matrix4)},{emissive:new r$2.Uniform(new r$2.Color(0)),emissiveMap:new r$2.Uniform(null),specular:new r$2.Uniform(new r$2.Color(1118481)),specularMap:new r$2.Uniform(null),normalMap:new r$2.Uniform(null),bumpMap:new r$2.Uniform(null),shininess:new r$2.Uniform(30)},r$2.UniformsLib.common,r$2.UniformsLib.lights),Xo=new r$2.SphereBufferGeometry(.01,128,128),Yo=function(){function ca(ga){ga===void 0&&(ga={}),this.textureLoader=new Si({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga,this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga,this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.load=function(ga,_s,Ss,Ms,Cs,Ts,Bs,Ps){var Ls=[0,0],Rs=function($s,Fs){Ls[Fs]=$s,Bs(.8*Ls[0]+.2*Ls[1])},Ds=[this.textureLoader.load(ga,{viaAjax:!0},void 0,void 0,function($s){return Rs($s,1)},Ps),this.textureLoader.loadCube(_s,{viaAjax:!0},void 0,void 0,function($s){return Rs($s,0)},Ps)];return Promise.all(Ds).then(function($s){var Fs=$s[0],Gs=$s[1],Vs={body:function(ks,Os,Ns,Us){var Hs=new r$2.ShaderMaterial({side:r$2.BackSide,vertexShader:Uo,fragmentShader:Go,transparent:!0,uniforms:r$2.UniformsUtils.clone(Wo)}),zs=Os;return zs.needsUpdate=!0,zs.minFilter=r$2.LinearFilter,zs.magFilter=r$2.LinearFilter,ks.needsUpdate=!0,ks.minFilter=r$2.LinearFilter,ks.magFilter=r$2.LinearFilter,Hs.uniforms.opacity.value=0,Hs.uniforms.panoMap.value=zs,Hs.uniforms.panoDisplacementMap.value=ks,Hs.uniforms.panoPosition.value=Ns,Hs.uniforms.panoMatrix.value=Us,Object.assign(new r$2.Mesh(Xo,Hs),{frustumCulled:!1,dispose:function(){this.material instanceof r$2.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Fs.body,Gs.body,Ss,Ms),meta:e$2.__spreadArray([Fs.meta],Gs.meta,!0)};return Cs(Vs),Vs}).catch(function($s){for(var Fs=0,Gs=Ds;Fs<Gs.length;Fs++)Gs[Fs].then(function(Vs){return Vs.body.dispose()}).catch(Lt);return Ts($s),Promise.reject($s)})},ca}(),Zo=new r$2.Vector3(-1,1,1),Jo=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs=this,Ds=ga.parseArgs(_s);return(Rs=ca.call(this,Ds)||this).currentPanoIndex=Ds.initial[0],Rs.maxAccessibleDistance=Ds.maxAccessibleDistance,Rs.panoTapTriggerRadius=Ds.panoTapTriggerRadius,Rs.panoCircleMeshCreator=Ds.panoCircleMeshCreator,Rs.boundingMesh=Rs.generateBoundingMesh(),Rs.boundingMesh.setMaterial(Rs.model.getMaterial()||{}),Rs.boundingMesh.visible=!1,Rs.scene.add(Rs.boundingMesh),Rs.panoModelGroup=new r$2.Group,Rs.panoModelGroup.name="panoModels",Rs.scene.add(Rs.panoModelGroup),Rs.panoMeshes=[],Rs.updatePanoMeshes(),Rs.helper.remove(Rs.intersectMesh),Rs.locationMotion=new vn({count:0,distance:Rs.camera.pose.distance,modelAlpha:(Ms=(Ss=Rs.model.getMaterial())===null||Ss===void 0?void 0:Ss.modelAlpha)!==null&&Ms!==void 0?Ms:0,perspToOrtho:(Ts=(Cs=Rs.model.getMaterial())===null||Cs===void 0?void 0:Cs.perspToOrtho)!==null&&Ts!==void 0?Ts:0}),Rs.panoResources={},Rs.panoResources[Rs.locationMotion.keyframes[0].key=Rs.locationMotion.keyframes[1].key=$n()]={panoIndex:Rs.currentPanoIndex,workCode:Rs.work.workCode,matrix:(Ls=(Ps=(Bs=Rs.model.getMaterial())===null||Bs===void 0?void 0:Bs.pano1)===null||Ps===void 0?void 0:Ps.matrix)!==null&&Ls!==void 0?Ls:new r$2.Matrix4,position:Rs.camera.pose.offset.clone(),effect:"fly"},Rs.depthTextureLoader=new Yo({allowHosts:Rs.work.allowHosts,networkSubscribe:Rs.networkSubscribe}),Rs}return e$2.__extends(ga,ca),ga.parseArgs=function(_s){var Ss,Ms,Cs,Ts=ca.parseArgs.call(this,_s);return e$2.__assign(e$2.__assign({},Ts),{maxAccessibleDistance:(Ss=_s.maxAccessibleDistance)!==null&&Ss!==void 0?Ss:5,panoTapTriggerRadius:(Ms=_s.panoTapTriggerRadius)!==null&&Ms!==void 0?Ms:1,panoCircleMeshCreator:(Cs=_s.panoCircleMeshCreator)!==null&&Cs!==void 0?Cs:function(){return new Gn}})},ga.initAnimationEndPose=function(_s){var Ss=this.parseArgs(_s);return ca.initAnimationEndPose.call(this,Ss)},ga.prototype.destroy=function(){var _s,Ss=this;if(ca.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Ms=0,Cs=this.panoModelGroup.children;Ms<Cs.length;Ms++){var Ts=Cs[Ms];typeof Ts.dispose=="function"&&Ts.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gs){Ss.helper.remove(Gs),Gs.dispose()}),this.panoMeshes.length=0);for(var Bs=(_s=this.model.getMaterial())!==null&&_s!==void 0?_s:{},Ps=Bs.pano0,Ls=Bs.pano1,Rs=0,Ds=Object.keys(this.panoResources);Rs<Ds.length;Rs++){var $s=Ds[Rs],Fs=this.panoResources[$s];Fs.panoModel&&Fs.panoModel.material.uniforms.panoMap.value!==(Ps==null?void 0:Ps.map)&&Fs.panoModel.material.uniforms.panoMap.value!==(Ls==null?void 0:Ls.map)&&(this.panoModelGroup.remove(Fs.panoModel),Fs.panoModel.material.uniforms.panoMap.value.dispose(),Fs.panoModel.dispose(),delete Fs.panoModel),delete this.panoResources[$s]}this.interiaMovement=!1},ga.prototype.isReady=function(){return this.locationMotion.ended===!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(_s,Ss,Ms,Cs,Ts){this.userAction=Ts,this.work=_s,this.currentPanoIndex=Ss,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Bs={},Ps=!0;this.boundingMesh&&(Bs=this.boundingMesh.getMaterial()||{},Ps=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ps,this.boundingMesh.setMaterial(Bs),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ls=0,Rs=this.panoMeshes;Ls<Rs.length;Ls++)Rs[Ls].visible=!1;return this.moveToPano(Ss,{effect:"fade",duration:Cs,longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},Ts),!0},ga.prototype.updateTime=function(_s,Ss){var Ms,Cs,Ts;if(!this.destroyed){var Bs={},Ps={};if(this.locationMotion.ended===!1){this.locationMotion.update(_s);var Ls=this.locationMotion.getKeyFrameSegment(_s),Rs=Ls[0],Ds=Ls[1],$s=this.panoResourceFromLocationMotionKeyframe(Rs),Fs=this.panoResourceFromLocationMotionKeyframe(Ds),Gs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Vs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ks=new r$2.Vector3().copy($s.position),Os=new r$2.Vector3().copy(Fs.position),Ns=this.locationMotion.value.count-Ds.value.count+1;Bs.modelAlpha=this.locationMotion.value.modelAlpha,Bs.perspToOrtho=pn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Bs.useBlackTransition=Fs.effect==="instant";for(var Us=0,Hs=this.panoModelGroup.children;Us<Hs.length;Us++){var zs=Hs[Us];zs.visible=zs===$s.panoModel||zs===Fs.panoModel}$s.panoModel&&($s.panoModel.material.uniforms.opacity.value=1-Ns,$s.panoModel.material.depthTest=Ns!==0),Fs.panoModel&&(Fs.panoModel.material.uniforms.opacity.value=Ns,Fs.panoModel.material.depthTest=Ns!==1),Fs.panoModel&&(Ns<1?$s.panoModel&&(Bs.pano0={map:$s.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:$s.matrix}):Bs.pano0={map:Fs.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Fs.matrix},Bs.pano1={map:Fs.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Fs.matrix}),Fs.effect==="fade"&&(Bs.pano0&&(Bs.pano0={map:Bs.pano0.map,luminanceMap:null,matrix:$s.matrix.clone().setPosition(Fs.position)}),ks.copy(Os)),Bs.progress=Ns,Ps.distance=this.locationMotion.value.distance,Ps.offset=new r$2.Vector3(ks.x+(Os.x-ks.x)*Ns,ks.y+(Os.y-ks.y)*Ns,ks.z+(Os.z-ks.z)*Ns);for(var js=[],Ws=[],Qs=0,qs=this.locationMotion.keyframes;Qs<qs.length;Qs++){var tu=qs[Qs],Ys=tu.key,Ks=tu.progress;Ys!==void 0&&(js.push(Ys),Ks>=this.locationMotion.progress&&Ws.push(Ys))}for(var Js=0,eu=Object.keys(this.panoResources);Js<eu.length;Js++){var Zs=eu[Js];if(!(Ws.indexOf(Zs)>=0)){var au=this.panoResources[Zs];if(au.panoModel){if(au.panoModel.material.uniforms.panoMap.value===((Ms=Bs.pano0)===null||Ms===void 0?void 0:Ms.map)||au.panoModel.material.uniforms.panoMap.value===((Cs=Bs.pano1)===null||Cs===void 0?void 0:Cs.map))continue;this.panoModelGroup.remove(au.panoModel),au.panoModel.material.uniforms.panoMap.value.dispose(),au.panoModel.dispose(),delete au.panoModel}js.indexOf(Zs)>=0||delete this.panoResources[Zs]}}$s.workCode===Fs.workCode?this.currentPanoIndex=Ns<.5?$s.panoIndex:Fs.panoIndex:this.currentPanoIndex=Fs.panoIndex,this.emit("movingToPano",Vs.panoIndex,Gs.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(_s),Ps.longitude=this.cameraMotion.value.longitude,Ps.latitude=this.cameraMotion.value.latitude,Ps.fov=this.cameraMotion.value.fov),vr(Bs)===!1&&(this.model.setMaterial(Bs),this.boundingMesh.setMaterial(Bs)),vr(Ps)===!1&&this.setCamera(Ps),this.camera.pose.distance>.1)for(var ru=0;ru<this.work.observers.length;ru++)(hu=this.panoMeshes[ru])&&(hu.visible=!1);else{var su=this.work.observers[this.currentPanoIndex];if(su){var lu=su.visibleNodes.concat(this.currentPanoIndex),gu=this.getForwardPanoIndexOrNot();for(ru=0;ru<this.work.observers.length;ru++){var hu,wu=this.work.observers[ru];if(hu=this.panoMeshes[ru])if(wu.loadable||wu.active)if(lu.indexOf(ru)!==-1){hu.visible=!0;var Mu=hu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);hu.setCurrent(gu===ru),hu.setOpacity(Mu<.01?0:pn(2/Mu,.5,1)),hu.updateTime&&hu.updateTime(_s,Ss)}else hu.visible=!1;else hu.visible=!1}}}this.boundingMesh.visible=Boolean((Ts=this.boundingMesh.getMaterial())===null||Ts===void 0?void 0:Ts.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},ga.prototype.getTargetPose=function(){var _s=this.cameraMotion.getKeyFrameSegment(Ht())[1],Ss=this.locationMotion.getKeyFrameSegment(Ht())[1],Ms=this.panoResourceFromLocationMotionKeyframe(Ss),Cs=this.work.observers[Ms.panoIndex];return{longitude:_s.value.longitude,latitude:_s.value.latitude,fov:_s.value.fov,offset:Cs?Cs.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(_s,Ss,Ms){var Cs,Ts,Bs=this;Ss===void 0&&(Ss={});var Ps=this.work.observers[_s].images.depth,Ls=e$2.__assign({key:"pano.".concat(_s),basisLoaderInitialized:Ii.isInitialized()},ni(this.imageOptions,["format","size","quality"])),Rs=(Cs=this.imageOptions.transform)!==null&&Cs!==void 0?Cs:de,Ds={right:Rs(this.work.observers[_s].images.right,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".right")})),left:Rs(this.work.observers[_s].images.left,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".left")})),up:Rs(this.work.observers[_s].images.up,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".up")})),down:Rs(this.work.observers[_s].images.down,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".down")})),front:Rs(this.work.observers[_s].images.front,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".front")})),back:Rs(this.work.observers[_s].images.back,e$2.__assign(e$2.__assign({},Ls),{key:"pano.".concat(_s,".back")}))},$s=this.work.observers[_s],Fs=$s.position,Gs=$s.quaternion,Vs=new r$2.Matrix4().compose(Fs,Gs,new r$2.Vector3(-1,1,1)),ks="pano:"+Dr(Ds);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ks)return;var Os=this.pendingTextureTask.panoIndex;(Ts=this.panoMeshes[Os])===null||Ts===void 0||Ts.setProgress(0),this.emit("textureAbort",Os,this.work.observers[Os]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:_s,hash:ks,onLoad:function(Us){Bs.pending=!1,Bs.destroyed?Us.body.dispose():(Us.body.name=ks,Bs.emit("panoLoaded",_s),Bs.doMoveToPano(_s,Us.body,Ss,Ms))},onError:function(Us){Bs.pending=!1,Ss.moveCancelCallback&&Ss.moveCancelCallback(),Bs.emit("panoLoadError",Us,_s),Bs.emit("moveToPanoCanceled",_s)}};var Ns=this.panoMeshes[_s];Ns&&Ns.tap&&Ns.tap(),this.depthTextureLoader.load(Ps,Ds,Fs,Vs,function(Us){var Hs,zs;((Hs=Bs.pendingTextureTask)===null||Hs===void 0?void 0:Hs.hash)===ks?(Bs.pendingTextureTask.onLoad(Us),(zs=Bs.panoMeshes[_s])===null||zs===void 0||zs.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureLoaded",_s,Bs.work.observers[_s],Us.meta)):Us.body.dispose()},function(Us){var Hs,zs;((Hs=Bs.pendingTextureTask)===null||Hs===void 0?void 0:Hs.hash)===ks&&(Bs.pendingTextureTask.onError(Us),(zs=Bs.panoMeshes[_s])===null||zs===void 0||zs.setProgress(0),delete Bs.pendingTextureTask,Bs.emit("textureError",Us,_s,Bs.work.observers[_s]),Bs.emit("error",Us))},function(Us){var Hs,zs;Bs.emit("textureLoading",Us,_s,Bs.work.observers[_s]),((Hs=Bs.pendingTextureTask)===null||Hs===void 0?void 0:Hs.hash)===ks&&((zs=Bs.panoMeshes[_s])===null||zs===void 0||zs.setProgress(Us))},this.renderer),this.emit("textureStartLoad",_s,this.work.observers[_s])},ga.prototype.initAnimation=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls=this;if(!this.destroyed){var Rs=!1;this.pending=!1,this.userAction=Cs,this.moveToPano(_s,{longitude:(Ts=Ss.longitude)!==null&&Ts!==void 0?Ts:this.defaultLongitude,latitude:pn((Bs=Ss.latitude)!==null&&Bs!==void 0?Bs:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:pn((Ps=Ss.fov)!==null&&Ps!==void 0?Ps:this.defaultFov,this.minFov,this.maxFov),duration:Ms,moveStartCallback:function(Ds,$s){Rs=!0,Ls.emit("initAnimationWillStart",Ds,$s,Ls.userAction)},moveEndCallback:function(Ds,$s){Ls.emit("initAnimationEnded",Ds,$s,Ls.userAction)},moveCancelCallback:function(){var Ds=mr(Ls.camera.pose);Rs===!1&&Ls.emit("initAnimationWillStart",Ls.currentPanoIndex,Ds,Ls.userAction),Ls.emit("initAnimationEnded",Ls.currentPanoIndex,Ds,Ls.userAction)}},Cs)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(_s){return this.panoResources[_s.key]},ga.prototype.locationMotionKeyframesLength=function(_s){for(var Ss=0,Ms=1;Ms<_s.length;Ms++){var Cs=this.panoResourceFromLocationMotionKeyframe(_s[Ms-1]).position,Ts=this.panoResourceFromLocationMotionKeyframe(_s[Ms]).position;Ss+=Cs.distanceTo(Ts)*(_s[Ms].value.count-_s[Ms-1].value.count)}return Ss},ga.prototype.updatePanoMeshes=function(){for(var _s={},Ss=0,Ms=this.panoMeshes;Ss<Ms.length;Ss++)_s[(Ps=Ms[Ss]).name]=Ps;this.panoMeshes.length=0;for(var Cs=0;Cs<this.work.observers.length;Cs++){var Ts="panoCircle_".concat(this.work.workCode,"_").concat(Cs),Bs=this.work.observers[Cs],Ps=void 0;_s[Ts]?(Ps=_s[Ts],delete _s[Ts]):((Ps=this.panoCircleMeshCreator()).name=Ts,this.helper.add(Ps)),Ps.position.copy(Bs.standingPosition),this.panoMeshes[Cs]=Ps}for(var Ls=0,Rs=Object.keys(_s);Ls<Rs.length;Ls++){var Ds=Rs[Ls];this.helper.remove(_s[Ds]),_s[Ds].dispose(),delete _s[Ds]}},ga.prototype.generateBoundingMesh=function(_s){_s===void 0&&(_s=!1);for(var Ss=this.model.bounding.clone(),Ms=0,Cs=this.work.observers;Ms<Cs.length;Ms++){var Ts=Cs[Ms];Ss.expandByPoint(Ts.standingPosition),Ss.expandByPoint(new r$2.Vector3().fromArray([Ts.position.x,2*Ts.position.y-Ts.standingPosition.y,Ts.position.z]))}_s&&Ss.expandByPoint(this.camera.position);var Bs=sr(Ss,new r$2.Vector3(1,0,1));return Bs.name="panorama_bounding",Bs.frustumCulled=!1,Bs},ga.prototype.doMoveToPano=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls,Rs=this;Ms===void 0&&(Ms={}),this.userAction=Cs;var Ds=Ht(),$s=$n(),Fs=this.work.observers[_s],Gs=this.panoResources[$s]={panoIndex:_s,workCode:this.work.workCode,effect:(Ts=Ms.effect)!==null&&Ts!==void 0?Ts:"fly",panoModel:Ss,matrix:new r$2.Matrix4().compose(Fs.position,Fs.quaternion,Zo),position:Fs.position.clone()};Ss.visible=!1,Ss.renderOrder=-1,this.panoModelGroup.add(Ss);var Vs,ks,Os;if(this.locationMotion.ended){var Ns=this.locationMotion.getKeyFrameSegment(Ds);Ns[0];var Us=Ns[1],Hs=this.locationMotion.value,zs=this.panoResourceFromLocationMotionKeyframe(Us).position,js=Gs.position;Vs=Math.max(zs.distanceTo(js),1),ks=[{key:Us.key,progress:0,value:e$2.__assign(e$2.__assign({},Hs),{count:0})},{key:$s,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Os=0}else{var Ws=this.locationMotion.getKeyFrameSegment(Ds),Qs=Ws[0],qs=(Us=Ws[1],Hs=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Qs).position),tu=(zs=this.panoResourceFromLocationMotionKeyframe(Us).position,js=Gs.position,Us.value.count-Hs.count),Ys=Math.max(qs.distanceTo(zs),1)*tu;Vs=Ys+Math.max(zs.distanceTo(js),1),ks=[{key:Qs.key,progress:0,value:e$2.__assign({},Hs)},{key:Us.key,progress:Ys/Vs,value:Us.value},{key:$s,progress:1,value:{count:Us.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Ks=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Js=this.locationMotionKeyframesLength(ks);Os=this.locationMotion.getProgressVelocity(Ds)*Ks/Js}var eu=this.calculateMovingDuration(Ms.duration,Vs),Zs={longitude:Ms.longitude,latitude:Ms.latitude,fov:Ms.fov},au={longitude:(Bs=Zs.longitude)!==null&&Bs!==void 0?Bs:this.camera.pose.longitude,latitude:(Ps=Zs.latitude)!==null&&Ps!==void 0?Ps:this.camera.pose.latitude,fov:(Ls=Zs.fov)!==null&&Ls!==void 0?Ls:this.camera.pose.fov,offset:Fs.position.clone()};Ms.moveStartCallback&&Ms.moveStartCallback(_s,au),this.emit("panoWillArrive",_s,au,this.userAction),this.cameraMotion.set(Zs,eu).catch(Lt),this.locationMotion.setKeyframes(ks,eu,Os).then(function(){var ru={longitude:Rs.camera.pose.longitude,latitude:Rs.camera.pose.latitude,fov:Rs.camera.pose.fov,offset:Rs.camera.pose.offset.clone()};Ms.moveEndCallback&&Ms.moveEndCallback(_s,ru),Rs.emit("panoArrived",_s,ru,Cs)},function(){Ms.moveCancelCallback&&Ms.moveCancelCallback(),Rs.emit("moveToPanoCanceled",_s)})},ga.prototype.getForwardPanoIndexOrNot=function(_s){var Ss=this,Ms=this.camera.getWorldDirection(new r$2.Vector3),Cs=this.camera.position.clone(),Ts=this.work.observers[this.currentPanoIndex];if(!Ts)return null;var Bs=Ts.accessibleNodes.filter(function(Os){if(Os===Ss.currentPanoIndex)return!1;var Ns=Ss.work.observers[Os],Us=Ns.standingPosition.clone().sub(Cs);return Us.length()!==0&&!(Us.angleTo(new r$2.Vector3(0,-1,0))<Math.PI/12)&&(Ns.loadable||Ns.active)}),Ps=(_s?_s.ray.direction.clone():Ms.clone()).setY(0);if(Ps.length()===0)return null;for(var Ls=Bs.slice().sort(function(Os,Ns){var Us=Ss.work.observers[Os].position.clone().setY(Cs.y),Hs=Ss.work.observers[Ns].position.clone().setY(Cs.y);return Us.distanceTo(Cs)-Hs.distanceTo(Cs)}),Rs=0,Ds=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Rs<Ds.length;Rs++)for(var $s=Ds[Rs],Fs=0,Gs=Ls;Fs<Gs.length;Fs++){var Vs=Gs[Fs],ks=this.work.observers[Vs].position.clone().setY(Cs.y).sub(Cs);if(ks.length()!==0&&Ps.angleTo(ks)<$s)return Vs}return null},ga.prototype.onTapGesture=function(_s){var Ss=this,Ms=_s.pointers.map(function(ru){return ni(ru,["x","y"])});if(!this.emit("wantsGesture","tap",Ms,!0)){var Cs=this.relativeClientPosition(_s.center),Ts=new r$2.Raycaster;if(Ts.setFromCamera(Cs,this.camera),!this.emit("wantsTapGesture",Ts,Cs,!0)){this.emit("gesture","tap",Ms,!0),this.emit("tapGesture",Ts,Cs,!0),this.interiaMovement=!1;var Bs=this.camera.getWorldDirection(new r$2.Vector3).setY(0),Ps=null,Ls=this.work.observers[this.currentPanoIndex];if(Ls){var Rs=Ls.accessibleNodes.filter(function(ru){if(ru===Ss.currentPanoIndex)return!1;var su=Ss.work.observers[ru];return!(su.position.distanceTo(Ss.camera.position)>Ss.maxAccessibleDistance)&&(su.loadable||su.active)}),Ds=Ts.intersectObject(this.boundingMesh,!0)[0];if(Ds){var $s=gr(Rs,function(ru){var su=Ss.work.observers[ru].standingPosition.clone();return su.clone().sub(Ss.camera.position).setY(0).angleTo(Bs)>Math.PI/2?1/0:su.distanceTo(Ds.point)},!0),Fs=$s[0];$s[1]<this.panoTapTriggerRadius&&(Ps=Fs)}ji(Ps)&&(Ps=this.getForwardPanoIndexOrNot(Ts));for(var Gs=0,Vs=this.locationMotion.keyframes;Gs<Vs.length;Gs++){var ks=Vs[Gs],Os=this.panoResourceFromLocationMotionKeyframe(ks);if(!(ks.progress<this.locationMotion.progress)&&Os.panoIndex===Ps){Ps=null;break}}if(this.emit("panoSelected",Ps),ji(Ps))this.locationMotion.ended===!0&&this.cameraBounce();else{var Ns=this.work.observers[Ps];if(Ns.active){for(var Us={},Hs=Math.PI/6,zs=Math.PI/12,js=new r$2.Vector3(0,1,0),Ws=Ns.position.clone().setY(0).sub(Ls.position.clone().setY(0)).normalize(),Qs=Ws.clone().applyAxisAngle(js,Hs),qs=Ws.clone().applyAxisAngle(js,-Hs),tu=[],Ys=[],Ks=[],Js=0,eu=Ns.accessibleNodes;Js<eu.length;Js++)if((Fs=eu[Js])!==this.currentPanoIndex&&Fs!==Ps){var Zs=this.work.observers[Fs].position.clone().sub(Ns.position).setY(0);Ws.angleTo(Zs)<Hs?Ks.push(Zs):Qs.angleTo(Zs)<Hs?tu.push(Zs):qs.angleTo(Zs)<Hs&&Ys.push(Zs)}var au=(Ks.length>0?Ks:e$2.__spreadArray(e$2.__spreadArray([],tu,!0),Ys,!0)).slice().sort(function(ru,su){return ru.angleTo(Ws)-su.angleTo(Ws)})[0];au&&au.angleTo(Bs)>zs&&(Us.longitude=Math.atan2(-au.x,-au.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Us.latitude=pn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Ps,Us,!0)}else this.panoMeshes[Ps]&&(this.panoMeshes[Ps].setDisabled(!1),this.panoMeshes[Ps].setLoading(!0))}}}}},ga}(Fr),$o=["Panorama","DepthPanorama","Model"],ts={Floorplan:Tr,Topview:Qr,Panorama:so,VRPanorama:_o,Model:jo,DepthPanorama:Jo};function es(ca){for(var ga=0,_s=$o;ga<_s.length;ga++){var Ss=_s[ga];if(typeof ca=="string"){if(Ss===ca)return!0}else if(ca instanceof Pr&&ca instanceof ts[Ss])return!0}return!1}var is$1=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function ns(ca){for(var ga,_s,Ss={},Ms=0,Cs=ca.split(/(\;|\,)/);Ms<Cs.length;Ms++){var Ts=Cs[Ms].split("="),Bs=(ga=Ts[0])===null||ga===void 0?void 0:ga.trim(),Ps=(_s=Ts[1])===null||_s===void 0?void 0:_s.trim();Bs&&Ps&&(Ss[Bs]=Ps)}return Ss}function rs(){for(var ca,ga=document.getElementsByTagName("meta"),_s=0;_s<ga.length;_s++){var Ss=ga[_s];if(Ss.getAttribute("name")==="viewport"){var Ms=ns((ca=Ss.getAttribute("content"))!==null&&ca!==void 0?ca:""),Cs=Number(Ms["initial-scale"]);if(!isNaN(Cs))return Cs}}return 1}var os=[351,63],ss=[20,20],as=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),us=new Float32Array([0,0,1,0,0,1,1,1]),ls=new Uint8Array([0,1,2,1,3,2]),hs=new r$2.BufferGeometry;hs.setAttribute("position",new r$2.BufferAttribute(as,3)),hs.setAttribute("uv",new r$2.BufferAttribute(us,2)),hs.setIndex(new r$2.BufferAttribute(ls,1));var cs=new r$2.MeshBasicMaterial({transparent:!0,depthTest:!1}),ds=new r$2.Mesh(hs,cs),ps=new r$2.Scene;ps.add(ds);var As=new r$2.OrthographicCamera(-.5,.5,.5,-.5,.1,1);As.position.set(0,0,.5),As.lookAt(0,0,0);var fs=new r$2.Vector4,gs=new r$2.Vector4;function vs(ca){if(cs.map){var ga=ca.getViewport(fs),_s=ca.getScissor(gs),Ss=ca.getScissorTest(),Ms=ca.autoClear;ca.setViewport(_s.x+ss[0]/3,_s.y+ss[1]/3,os[0]/3,os[1]/3),ca.setScissor(_s.x+ss[0]/3,_s.y+ss[1]/3,os[0]/3,os[1]/3),ca.setScissorTest(!0),ca.autoClear=!1,ca.render(ps,As),ca.setViewport(ga),ca.setScissor(_s),ca.setScissorTest(Ss),ca.autoClear=Ms}else{var Cs=new r$2.Texture,Ts=new Image;Ts.onload=function(){Cs.image=Ts,Cs.wrapS=r$2.ClampToEdgeWrapping,Cs.wrapT=r$2.ClampToEdgeWrapping,Cs.minFilter=r$2.LinearFilter,Cs.needsUpdate=!0,cs.needsUpdate=!0,Ts.onload=function(){}},Ts.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",cs.map=Cs}}var ms=new r$2.Box3(new r$2.Vector3(-50,-50,-50),new r$2.Vector3(50,50,50)),ys=new r$2.Vector2,bs=new r$2.Frustum,ws=new r$2.Matrix4,xs=new r$2.Clock,Es=new WeakMap,Is=function(ca){function ga(_s){var Ss,Ms,Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s;_s===void 0&&(_s={});var Fs=ca.call(this)||this;if(Fs.ident=$n(),Fs.renderSwitch01=0,Fs.panoIndex=0,Fs.needsRender=!1,Fs.onlyRenderIfNeeds=(Ss=_s.onlyRenderIfNeeds)===null||Ss===void 0||Ss,Fs.imageOptions=e$2.__assign({},(Ms=_s.imageOptions)!==null&&Ms!==void 0?Ms:{}),Fs.textureOptions=e$2.__assign({},(Cs=_s.textureOptions)!==null&&Cs!==void 0?Cs:{}),Fs.poweredByRealsee=(Ts=_s.poweredByRealsee)===null||Ts===void 0||Ts,Fs.extraElements=[],Fs.controllerInits={Panorama:Object.assign({},_s.panorama),Model:Object.assign({},_s.model),Floorplan:Object.assign({},_s.floorplan),Topview:Object.assign({},_s.topview),DepthPanorama:Object.assign({},_s.depthPanorama),VRPanorama:Object.assign({},_s.vrPanorama)},Fs.fps={testCount:0,testTime:Ht()},Fs.modeChangeDuration=(Bs=_s.modeChangeDuration)!==null&&Bs!==void 0?Bs:1e3,Fs.panoramaLikeSavedPose={},typeof window!="undefined")if(_s.renderer)_s.renderer instanceof Ie&&Fs.throwError(new Error("cannot render a internal renderer")),Fs.renderer=_s.renderer;else try{Fs.renderer=new Ie({preserveDrawingBuffer:_s.preserveDrawingBuffer,backgroundColor:_s.backgroundColor,backgroundAlpha:_s.backgroundAlpha,antialias:_s.antialias});var Gs=rs();Fs.renderer.setPixelRatio(Gs===1?window.devicePixelRatio:1),Fs.renderer.setSize(512,512)}catch(Qs){Qs instanceof Error&&Fs.throwError(Qs)}Fs.getPixelsRenderTarget=new r$2.WebGLRenderTarget(1,1,{encoding:(Ls=(Ps=Fs.renderer)===null||Ps===void 0?void 0:Ps.outputEncoding)!==null&&Ls!==void 0?Ls:r$2.sRGBEncoding}),Fs.scissor=Object.assign({left:0,bottom:0,width:1,height:1},_s.scissor),Fs.camera=new De(80),Fs.scene=new Ce,Fs.lastLoadWorkTask=Promise.resolve(),Fs.networkSubscribe=new te,Fs.networkSubscribe.on("network",function(Qs,qs,tu,Ys){var Ks;Fs.emit("network",Qs,qs,tu,Ys),(Ks=Fs.analysis)===null||Ks===void 0||Ks.network(Fs.work,Qs,qs,tu,Ys)}),Fs.model=new Xi({allowHosts:[],networkSubscribe:Fs.networkSubscribe});var Vs=sr(ms);Vs.name="model_empty",Fs.model.add(Vs),Fs.model.visible=!1,Fs.readyCallbacks=[],Fs.modelPending=!1,Fs.syncingState=!1,Fs.scene.add(Fs.model),Fs.helperGroup=new r$2.Group,Fs.helperGroup.name="helper",Fs.scene.add(Fs.helperGroup),Fs.videoTexture=new r$2.VideoTexture(_s.videoInstance||function(){var Qs=document.createElement("video");Qs.loop=!0,Qs.autoplay=!0,Qs.playsInline=!0,Qs.muted=!0,Qs.crossOrigin="";var qs=function(){document.removeEventListener("touchstart",qs,!1),document.removeEventListener("mousedown",qs,!1),Qs.muted=!1};return document.addEventListener("touchstart",qs,!1),document.addEventListener("mousedown",qs,!1),Qs}()),function(Qs){(qs=new r$2.DirectionalLight(16777215,.5)).position.copy(new r$2.Vector3(1,1,1)),Qs.add(qs);var qs=new r$2.DirectionalLight(16777215,.3);Qs.add(qs),qs=new r$2.AmbientLight(16777215,.3),Qs.add(qs)}(Fs.scene),Fs.state={mode:(Rs=Fs.currentMode)!==null&&Rs!==void 0?Rs:"Panorama",panoIndex:(Ds=Fs.panoIndex)!==null&&Ds!==void 0?Ds:0,longitude:Fs.camera.pose.longitude,latitude:Fs.camera.pose.latitude,fov:Fs.camera.pose.fov,offset:Fs.camera.pose.offset.clone()},Fs.stateSynced=!1,Fs._enableIOSEDR=!1,Fs.destroyed=!1,Fs.paused=!0,typeof window!="undefined"&&(_s.play!==!1&&Fs.play(),(($s=_s.initialBasisLoader)!==null&&$s!==void 0&&$s)!==!1&&(typeof _s.initialBasisLoader=="string"?Fs.initBasisLoader(_s.initialBasisLoader):Fs.initBasisLoader()),Fs.stopAnimationLoop=se.shared.add(function(Qs,qs){Fs.updateTime(Qs,qs)},!1,0,10));var ks=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Fs.currentMode==="VRPanorama"&&Fs.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",ks,!1),Fs.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",ks,!1)},Fs.plugins={},_s.plugins&&_s.plugins.length)for(var Os=0,Ns=_s.plugins;Os<Ns.length;Os++){var Us=Ns[Os];if(typeof Us=="function")Us(Fs);else if(Array.isArray(Us)){var Hs=Us[0],zs=Us[1],js=Us[2];if(typeof Hs=="function"){var Ws=Hs(Fs,js);typeof zs=="string"&&(Fs.plugins[zs]?Fs.throwError(new Error("plugin name ".concat(zs," is exists."))):Fs.plugins[zs]=Ws)}}}return Fs}return e$2.__extends(ga,ca),ga.prototype.dispose=function(){var _s;if(this.destroyed!==!0){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Ss=this.getElement();Ss&&Ss.parentNode&&Ss.parentNode.removeChild(Ss),this.scene.remove(this.model);var Ms=this.model.getMaterial();Ms&&(Ms.pano0&&Ms.pano0.map.dispose(),Ms.pano1&&Ms.pano1.map!==((_s=Ms.pano0)===null||_s===void 0?void 0:_s.map)&&Ms.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof Ie&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},ga.prototype.setScissor=function(_s){Object.assign(this.scissor,_s),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(ga.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(_s){this.helperGroup.visible!==_s&&(this.helperGroup.visible=_s,this.emit("helpersVisibleChange",_s),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(_s){this._enableIOSEDR!==_s&&(this._enableIOSEDR=_s,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(_s){var Ss,Ms;if(_s){if(!this.screenBuffer){var Cs=this.getDrawingBufferSize(ys);this.screenBuffer=new r$2.WebGLRenderTarget(Cs.x,Cs.y,{encoding:(Ms=(Ss=this.renderer)===null||Ss===void 0?void 0:Ss.outputEncoding)!==null&&Ms!==void 0?Ms:r$2.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),ga.prototype.updateConfiguration=function(_s){var Ss=!1;_s.panorama&&(Object.assign(this.controllerInits.Panorama,_s.panorama),this.currentMode==="Panorama"&&(Ss=!0)),_s.model&&(Object.assign(this.controllerInits.Model,_s.model),this.currentMode==="Model"&&(Ss=!0)),_s.floorplan&&(Object.assign(this.controllerInits.Floorplan,_s.floorplan),this.currentMode==="Floorplan"&&(Ss=!0)),_s.topview&&(Object.assign(this.controllerInits.Topview,_s.topview),this.currentMode==="Topview"&&(Ss=!0)),_s.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,_s.depthPanorama),this.currentMode==="DepthPanorama"&&(Ss=!0)),_s.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,_s.vrPanorama),this.currentMode==="VRPanorama"&&(Ss=!0)),_s.imageOptions&&(Object.assign(this.imageOptions,_s.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Ss=!0)),Ss&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},ga.prototype.appendTo=function(_s,Ss){if(Ss===void 0&&(Ss={}),this.renderer)if(this.renderer instanceof Ie){var Ms=this.getElement();if(Ms){_s.appendChild(Ms),this.refresh(Ss);var Cs=window.getComputedStyle(_s).position;Cs!=="relative"&&Cs!=="absolute"&&Cs!=="fixed"&&Cs!=="sticky"&&(_s.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},ga.prototype.refresh=function(_s,Ss){if(_s===void 0&&(_s={}),this.renderer){var Ms=this.getElement();if(Ms){var Cs=Ms.parentNode;if(Cs&&Cs.nodeName){var Ts=_s.width,Bs=Ts===void 0?Cs.offsetWidth:Ts,Ps=_s.height,Ls=Ps===void 0?Cs.offsetHeight:Ps;this.renderer instanceof Ie&&(Ss&&this.renderer.setPixelRatio(Ss),this.renderer.setSize(Bs,Ls))}var Rs=this.renderer.getSize(new r$2.Vector2);this.camera.aspect=Rs.x*this.scissor.width/(Rs.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},ga.prototype.addExtraElement=function(_s){var Ss=this;return this.extraElements.indexOf(_s)===-1&&(this.extraElements.push(_s),this.controller&&this.controller.bindExtraElement(_s)),function(){return Ss.removeExtraElement(_s)}},ga.prototype.removeExtraElement=function(_s){var Ss=this.extraElements.indexOf(_s);Ss!==-1&&(this.extraElements.splice(Ss,1),this.controller&&this.controller.unbindExtraElement(_s))},ga.prototype.getPose=function(){var _s=this.camera.copyPose();return{longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov,offset:_s.offset}},ga.prototype.getSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},ga.prototype.getDrawingBufferSize=function(_s){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(_s),_s.x*=this.scissor.width,_s.y*=this.scissor.height,_s},ga.prototype.updateCamera=function(_s,Ss,Ms){return Ms===void 0&&(Ms=!0),this.controller?this.controller.updateCamera(_s,Ss,Ms):Promise.reject(new Error("controller is not initialized."))},ga.prototype.getLongitudeAndLatitude=function(){var _s=this.getPose();return{longitude:_s.longitude,latitude:_s.latitude}},ga.prototype.getOffset=function(){return this.getPose().offset},ga.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var _s=this.work.observers[this.panoIndex],Ss=new r$2.Object3D;return Ss.position.copy(_s.position),Ss.quaternion.copy(_s.quaternion),Ss.scale.set(1,1,1),Ss.updateMatrixWorld(!0),function(Ms,Cs){var Ts=new r$2.Vector3(0,0,-1);Ts.applyQuaternion(Ms.quaternion);var Bs=Cs.quaternion.clone().inverse();return Ts.applyQuaternion(Bs),{theta:Math.atan2(Ts.x,-Ts.z),phi:-Math.asin(Ts.y),lookAtVector:Ts}}(this.camera,Ss)}},ga.prototype.initBasisLoader=function(_s){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof _s=="string"&&Ii.setTranscoderPath(_s),Ii.workerConfig.format||Ii.detectSupport(this.renderer),Ii._allocateWorker(0)}catch(Ss){Ss instanceof Error&&this.throwError(Ss)}},Object.defineProperty(ga.prototype,"work",{get:function(){var _s=Es.get(this);if(_s&&an.get(_s))return _s},enumerable:!1,configurable:!0}),ga.prototype.load=function(_s,Ss,Ms,Cs){var Ts=this;if(Cs===void 0&&(Cs=!0),!this.renderer)throw new Error("renderer is not initialized");var Bs=this.lastLoadWorkTask.then(function(){return!(Ps=_s)||typeof Ps!="object"&&typeof Ps!="function"||typeof Ps.then!="function"?Ts.load_(_s,Ss,Ms,Cs):_s.then(function(Ls){return Ts.load_(Ls,Ss,Ms,Cs)});var Ps});return this.lastLoadWorkTask=Bs.catch(function(Ps){Ts.throwError(Ps)}),Bs},ga.prototype.load_=function(_s,Ss,Ms,Cs){var Ts,Bs,Ps,Ls,Rs,Ds,$s,Fs,Gs,Vs=this;Cs===void 0&&(Cs=!0);var ks,Os,Ns,Us=dn(_s),Hs=this.work;Ss===void 0&&(Ss=Hs?"inherit":"initial"),Ss==="inherit"?(ks=typeof this.panoIndex=="number"&&Us.observers[this.panoIndex]?this.panoIndex:Us.initial.panoIndex,Os=(Ts=this.currentMode)!==null&&Ts!==void 0?Ts:Us.initial.mode,Ns={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Ss==="initial"?(Os=(Bs=this.currentMode)!==null&&Bs!==void 0?Bs:Us.initial.mode,ks=Us.initial.panoIndex,Ns=Os===ga.Mode.Panorama||Os===ga.Mode.DepthPanorama||Os===ga.Mode.Model||Os===ga.Mode.VRPanorama?{longitude:Us.initial.longitude,latitude:Us.initial.latitude,fov:Us.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(ks=(Ps=Ss.panoIndex)!==null&&Ps!==void 0?Ps:Us.initial.panoIndex,Os=(Rs=(Ls=Ss.mode)!==null&&Ls!==void 0?Ls:this.currentMode)!==null&&Rs!==void 0?Rs:"Panorama",Ns={longitude:(Ds=Ss.longitude)!==null&&Ds!==void 0?Ds:Us.initial.longitude,latitude:($s=Ss.latitude)!==null&&$s!==void 0?$s:Us.initial.latitude,fov:(Fs=Ss.fov)!==null&&Fs!==void 0?Fs:Us.initial.fov}),this.emit("willLoad",_s,Us,{panoIndex:ks,mode:Os,longitude:Ns.longitude,latitude:Ns.latitude,fov:Ns.fov});var zs=function(){var Ws;Vs.panoIndex=ks,Vs.panoramaLikeSavedPose.longitude=Us.initial.longitude,Vs.panoramaLikeSavedPose.latitude=Us.initial.latitude,Vs.panoramaLikeSavedPose.fov=Us.initial.fov;var Qs=Vs.controller?Ms!=null?Ms:Vs.modeChangeDuration:0,qs=e$2.__assign(e$2.__assign({initial:[ks,Ns,Qs,Cs]},Vs.commonParams()),Vs.controllerInits[Os]);Vs.controller?Vs.controller.updateWork(Us,ks,Ns,Qs,Cs)===!1&&(Vs.controller.destroy(),Vs.controller=Vs.applyController(Os,qs)):Vs.controller=Vs.applyController(Os,qs),Vs.emit("load",_s,Us,{panoIndex:ks,mode:Os,longitude:Ns.longitude,latitude:Ns.latitude,fov:Ns.fov}),(Ws=Vs.analysis)===null||Ws===void 0||Ws.work(Us)},js=function(Ws){var Qs;Ws===void 0&&(Ws=Lt),Us.model&&(Vs.model.name!==((Qs=Us.model)===null||Qs===void 0?void 0:Qs.file)?(Vs.emit("modelWillLoad",Us.model),Vs.loadModel(Us.model,Us.allowHosts,Ws,!0)):Ws&&Ws())};return Es.set(this,Us),Os===ga.Mode.Floorplan||Os===ga.Mode.Topview||Os===ga.Mode.Model?js(function(){zs(),Vs.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Us.initial.fov,longitude:Us.initial.longitude,latitude:Us.initial.latitude,offset:Us.observers[Us.initial.panoIndex].position}),this.needsRender=!0),zs(),(Gs=this.controller)===null||Gs===void 0||Gs.once("panoLoaded",function(){Vs.needsRender=!0,Vs.emit("cameraUpdate",Vs.camera.copyPose(),Cs),js()})),this.ready().then(function(){Vs.emit("loaded",_s,Vs.work)})},ga.prototype.changeMode=function(_s,Ss,Ms,Cs,Ts){var Bs=this;if(Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=this.modeChangeDuration),Cs===void 0&&(Cs=!0),Ts===void 0&&(Ts=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Ps,Ls){if(!ga.Mode.hasOwnProperty(_s)){var Rs=new Error('mode "'.concat(_s,'" is not existed'));return Bs.throwError(Rs),void Ls(Rs)}if((_s===ga.Mode.Floorplan||_s===ga.Mode.Topview||_s===ga.Mode.Model)&&(ji(Bs.model)||Bs.model.loaded!==!0))return Rs=new Error("model is not ready."),Bs.throwError(Rs),void Ls(Rs);if(ji(Bs.controller))return Rs=new Error("controller is not ready."),Bs.throwError(Rs),void Ls(Rs);var Ds=Bs.controller,$s=Bs.currentMode,Fs=function(){var Gs,Vs,ks,Os;if(Bs.emit("wantsChangeMode",_s,$s))Ls(new Error("change mode canceled."));else{if(Bs.controller&&Ts===!1&&$s===_s)_s===ga.Mode.Panorama||_s===ga.Mode.DepthPanorama||_s===ga.Mode.Model||_s===ga.Mode.VRPanorama?typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Bs.panoIndex?Bs.controller.moveToPano((Vs=(Gs=Ss.panoIndex)!==null&&Gs!==void 0?Gs:Bs.panoIndex)!==null&&Vs!==void 0?Vs:0,e$2.__assign({duration:Ms},Ss),Cs):Bs.controller.updateCamera(Ss,Ms,Cs).catch(Lt):(typeof Ss.panoIndex=="number"&&Ss.panoIndex!==Bs.panoIndex&&(Bs.panoIndex=Ss.panoIndex),Bs.controller.updateCamera(Ss,Ms,Cs).catch(Lt));else{Ds.destroy();var Ns=(Os=(ks=Ss.panoIndex)!==null&&ks!==void 0?ks:Bs.panoIndex)!==null&&Os!==void 0?Os:0,Us=es(_s)?Bs.panoramaLikeSavedPose:{};typeof Ss.longitude!="number"&&typeof Ss.latitude!="number"||(Us.longitude=Ss.longitude,Us.latitude=Ss.latitude),typeof Ss.fov=="number"&&(Us.fov=Ss.fov);var Hs=e$2.__assign(e$2.__assign({initial:[Ns,Us,Ms,Cs]},Bs.commonParams()),Bs.controllerInits[_s]);Bs.saveControllerPose(Ds),Bs.controller=Bs.applyController(_s,Hs);var zs=ts[_s].initAnimationEndPose(Hs);Bs.emit("modeChange",_s,$s,Ns,zs)}Ps()}};_s===ga.Mode.VRPanorama?(Bs.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(Gs){if(Gs=="granted")return Promise.resolve();var Vs=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Vs)}):Promise.resolve()).then(function(){return Fs()}).catch(function(Gs){Gs instanceof Error&&(Bs.exitFullscreen(),Bs.throwError(Gs),Ls(Gs))})):Fs()})},ga.prototype.getPixels=function(_s,Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=1),!this.renderer)throw new Error("renderer is not initialized.");var Bs=this.getPixelsRenderTarget,Ps=this.renderer.getSize(new r$2.Vector2);_s=pn(_s,Math.floor(Ms/2),Math.floor(Ps.x-Ms)),Ss=pn(Ss,Math.floor(Cs/2),Math.floor(Ps.y-Cs)),_s*=Ts,Ss*=Ts,Ms*=Ts,Cs*=Ts,Bs.setSize(Ps.x*Ts,Ps.y*Ts),Bs.scissor.set(_s,Ss,Ms,Cs),Bs.scissorTest=!0,this.renderer.setRenderTarget(Bs);var Ls=new Uint8Array(Ms*Cs*4);return this.controller?this.controller.render(xs.getDelta()):this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(Bs,_s,Ss,Ms,Cs,Ls),this.renderer.setRenderTarget(null),Bs.setSize(1,1),Bs.scissor.set(0,0,0,0),Bs.scissorTest=!1,Ls},ga.prototype.getElement=function(){var _s;return(_s=this.renderer)===null||_s===void 0?void 0:_s.domElement},ga.prototype.render=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(Ss){var Cs=this.renderer.getSize(ys);this.scene.traverseVisible(function(Ps){Ps.setResolution&&Ps.setResolution(Cs.x,Cs.y)})}var Ts=xs.getDelta();if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Bs=this.getDrawingBufferSize(ys);return this.screenBuffer.setSize(Bs.x,Bs.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(Ts),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.poweredByRealsee&&vs(this.renderer),this.renderer.setRenderTarget(null),_s&&se.shared.add(_s,!0),this.screenBuffer}return this.aroundScissor(function(){Ms.renderer&&(Ms.controller?Ms.controller.render(Ts):Ms.renderer.render(Ms.scene,Ms.camera),Ms.currentMode!=="VRPanorama"&&Ms.poweredByRealsee&&vs(Ms.renderer)),_s&&se.shared.add(_s,!0)}),null},ga.prototype.updateTime=function(_s,Ss){var Ms=this;if(!this.destroyed){this.syncingState=this.syncState(_s,Ss),this.controller&&this.controller.updateTime(_s,Ss),this.syncingState=!1;var Cs=new r$2.Vector2(512,512),Ts=new r$2.Vector2(512,512);this.renderer&&(this.renderer.getSize(Cs),Cs.x*=this.scissor.width,Cs.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Ts),Ts.x*=this.scissor.width,Ts.y*=this.scissor.height);var Bs=[];if(ws.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bs.setFromProjectionMatrix(ws),this.scene.traverse(function(Gs){Gs.setResolution&&Gs.setResolution(Cs.x,Cs.y),Gs.mixer instanceof r$2.AnimationMixer&&Gs.mixer.update(xs.getDelta()),(Gs instanceof r$2.Mesh||Gs instanceof r$2.Line||Gs instanceof r$2.Points)&&(Gs instanceof r$2.ImmediateRenderObject||!Gs.frustumCulled||bs.intersectsObject(Gs))&&Bs.push(Gs)}),Ts.width*Ts.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Ps=void 0;if(this.onlyRenderIfNeeds!==!0)Ps=this.render();else{for(var Ls=0,Rs=Bs;Ls<Rs.length;Ls++){var Ds=Rs[Ls],$s=function(Gs){Gs.needsRender===!0?(Gs.needsRender=!1,Ms.needsRender=!0):Gs.mixer&&Gs.mixer.stats.actions.inUse>0&&(Ms.needsRender=!0)};$s(Ds),Ds.traverseAncestors($s)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Ps=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ms.controller.postProcessing(Ms.screenBuffer,void 0,xs.getDelta())}),this.hasListener("renderFrame")&&this.emit("renderFrame",Ps!==void 0)}if(this.fps.testTime&&_s-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=_s,this.fps.testCount=0,this.renderer){var Fs=function(Gs){var Vs=Gs.getError();if(Vs===Gs.NO_ERROR)return null;switch(Vs){case Gs.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case Gs.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case Gs.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case Gs.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case Gs.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case Gs.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());Fs&&this.throwError(Fs)}}},ga.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof Ie&&this.renderer.clear(!0,!0,!0)},ga.prototype.play=function(){this.needsRender=!0,this.paused=!1},ga.prototype.moveToPano=function(_s,Ss,Ms){Ss===void 0&&(Ss={}),Ms===void 0&&(Ms=!0);var Cs=this,Ts=Cs.controller,Bs=Cs.currentMode,Ps=Cs.renderer;Ts?Ps?Bs===ga.Mode.Floorplan||Bs===ga.Mode.Topview?ji(_s)||(this.panoIndex=_s,this.changeMode(ga.Mode.Panorama,Ss,void 0,Ms)):Ts.moveToPano(_s,Ss,Ms):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},ga.prototype.preloadPano=function(_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=Lt),!this.work)return Promise.reject(new Error("work never loaded"));var Cs=this.work.observers[_s],Ts=Ht();return Promise.all(["right","left","up","down","front","back"].map(function(Bs){var Ps=e$2.__assign({key:"pano.".concat(_s,".").concat(Bs),basisLoaderInitialized:Ii.isInitialized()},ni(Ms.imageOptions,["size","format","quality"])),Ls=Cs.images[Bs];return function(Rs,Ds){return Ds===void 0&&(Ds={}),Rs in ie?ie[Rs]:ie[Rs]=new Promise(function($s,Fs){var Gs=document.createElement("link");Gs.href=Rs,Gs.rel=Gs.relList&&Gs.relList.supports("prefetch")?"prefetch":"preload",Gs.as="fetch",Gs.crossOrigin="";var Vs=Ht(),ks=document.head||document.getElementsByTagName("head")[0];ks&&ks.appendChild(Gs);var Os=!1;Gs.onload=function(){var Ns;if(Os!==!0){Os=!0,$s();var Us=Ht(),Hs={source:Rs,requestTime:Vs,responseTime:Us,costs:Us-Vs,headers:{}};(Ns=Ds.networkSubscribe)===null||Ns===void 0||Ns.emit("network",Rs,"Link","preload",JSON.stringify(Hs))}},Gs.onerror=function(Ns){var Us;if(Os!==!0){Os=!0;var Hs=new Wt(Rs,"Link",0);Fs(Hs),(Us=Ds.networkSubscribe)===null||Us===void 0||Us.emit("network",Rs,"Link","error",Hs.message)}}})}(Ms.imageOptions.transform?Ms.imageOptions.transform(Ls,Ps):de(Ls,Ps),{networkSubscribe:Ms.networkSubscribe})})).then(function(){var Bs=Ht()-Ts;return Ss(Bs),Bs})},ga.prototype.project2d=function(_s,Ss){if(Ss===void 0&&(Ss=!1),!this.renderer)return null;if(this.model.empty===!1&&Ss){var Ms=this.camera.position,Cs=_s.clone().sub(Ms),Ts=new r$2.Raycaster(Ms,Cs.clone().normalize()),Bs=this.model.intersectRaycaster(Ts)[0];if(Bs&&Bs.distance+.01<Cs.length())return null}var Ps=_s.clone().project(this.camera);if(Math.abs(Ps.z)>1)return null;var Ls=this.renderer.getSize(new r$2.Vector2),Rs=Ls.x*this.scissor.width,Ds=Ls.y*this.scissor.height,$s=Ls.x*this.scissor.left+(Ps.x+1)/2*Rs,Fs=Ls.y*(1-this.scissor.bottom-this.scissor.height)+(1-Ps.y)/2*Ds;return new r$2.Vector2($s,Fs)},ga.prototype.getRenderObjects=function(_s){ws.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bs.setFromProjectionMatrix(ws),_s||(_s=this.scene);var Ss=[];return _s.traverseVisible(function(Ms){(Ms instanceof r$2.Mesh||Ms instanceof r$2.Line||Ms instanceof r$2.Points)&&(Ms instanceof r$2.ImmediateRenderObject||!Ms.frustumCulled||bs.intersectsObject(Ms))&&Ss.push(Ms)}),Ss},ga.prototype.getCurrentState=function(){return e$2.__assign(e$2.__assign({},this.getPose()),{mode:this.currentMode||ga.Mode.Panorama,panoIndex:this.panoIndex||0})},ga.prototype.setState=function(_s,Ss,Ms){var Cs,Ts,Bs,Ps,Ls,Rs,Ds,$s;Ss===void 0&&(Ss=!1),Ms===void 0&&(Ms=!0),!(_s=Object.assign({},_s)).offset||_s instanceof r$2.Vector3||(_s.offset=new r$2.Vector3(_s.offset.x,_s.offset.y,_s.offset.z));var Fs,Gs,Vs,ks,Os=(Cs=_s.panoIndex)!==null&&Cs!==void 0?Cs:this.state.panoIndex,Ns=(Ts=_s.mode)!==null&&Ts!==void 0?Ts:this.state.mode;if(this.work)if(this.work.observers[Os])if(_s.mode!==ga.Mode.Floorplan&&_s.mode!==ga.Mode.Topview&&_s.mode!==ga.Mode.Model||!ji(this.model)&&this.model.loaded===!0){if(this.state.mode!==Ns){if(Ns==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var Us=void 0;Us=es(this.state.mode)&&es(Ns)?e$2.__assign({},this.state):es(Ns)?e$2.__assign({},this.panoramaLikeSavedPose):e$2.__assign({},_s),typeof _s.longitude=="number"&&(Us.longitude=_s.longitude),typeof _s.latitude=="number"&&(Us.latitude=_s.latitude),typeof _s.fov=="number"&&(Us.fov=_s.fov);var Hs=e$2.__assign(e$2.__assign({initial:[Os,Us,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Ns]),zs=ts[Ns].initAnimationEndPose(Hs);Fs=zs.longitude,Gs=zs.latitude,Vs=zs.fov,ks=zs.offset}else Fs=(Bs=_s.longitude)!==null&&Bs!==void 0?Bs:this.state.longitude,Gs=(Ps=_s.latitude)!==null&&Ps!==void 0?Ps:this.state.latitude,Vs=(Ls=_s.fov)!==null&&Ls!==void 0?Ls:this.state.fov,ks=(Rs=_s.offset)!==null&&Rs!==void 0?Rs:this.state.offset;var js={panoIndex:Os,mode:Ns,longitude:Fs,latitude:Gs,fov:Vs,offset:ks};this.emit("setState",js),Ar(this.state,js)||(pr(this.state,js),this.controller&&(this.controller.userAction=Ms),Ss&&this.state.mode===js.mode&&(this.syncingState=this.syncState(Ht(),0,Ss),this.syncingState&&((Ds=this.controller)===null||Ds===void 0||Ds.updateTime(Ht(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Ms),($s=this.analysis)===null||$s===void 0||$s.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},ga.prototype.aroundScissor=function(_s){if(this.renderer){var Ss=new r$2.Vector2,Ms=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Ms){this.renderer.getSize(Ss);var Cs=Math.floor(Ss.x*this.scissor.left),Ts=Math.floor(Ss.y*this.scissor.bottom),Bs=Math.floor(Ss.x*this.scissor.width),Ps=Math.floor(Ss.y*this.scissor.height);this.renderer.setViewport(Cs,Ts,Bs,Ps),this.renderer.setScissor(Cs,Ts,Bs,Ps),this.renderer.setScissorTest(!0)}_s(),Ms&&(this.renderer.setViewport(0,0,Ss.x,Ss.y),this.renderer.setScissor(0,0,Ss.x,Ss.y),this.renderer.setScissorTest(!1))}},ga.prototype.syncState=function(_s,Ss,Ms){Ms===void 0&&(Ms=!1);var Cs=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var Ts={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Ts,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Bs=this.currentMode;if(!(Bs===ga.Mode.Floorplan||Bs===ga.Mode.Topview||Bs===ga.Mode.Model)||!this.modelPending)for(var Ps=void 0;Ps=this.readyCallbacks.shift();)Ps()}if(this.controller instanceof ts.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Ls={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Ls,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Ls={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,Ls,!1),!0;if(this.controller instanceof ts.Topview){var Rs=1,Ds=Ms?this.state.fov:cr(this.camera.pose.fov,this.state.fov,Rs),$s=Ms?new r$2.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$2.Vector3(cr(this.camera.pose.offset.x,this.state.offset.x,.2),cr(this.camera.pose.offset.y,this.state.offset.y,.2),cr(this.camera.pose.offset.z,this.state.offset.z,.2));if(er(Ds,this.camera.pose.fov)||nr($s,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Ds},0).catch(Lt),this.controller.locationMotion.set({x:$s.x,y:$s.y,z:$s.z},0).catch(Lt),!0}else{Rs=1;var Fs=Math.PI/45,Gs=(Ds=Ms?this.state.fov:cr(this.camera.pose.fov,this.state.fov,Rs),Ms?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Os,Ns,Us){if(Os.longitude===Ns.longitude&&Os.latitude===Ns.latitude)return{longitude:Ns.longitude,latitude:Ns.latitude};var Hs=ur(Os.longitude),zs=Os.latitude,js=ur(Ns.longitude),Ws=Ns.latitude;js-Hs>lr?Hs+=hr:Hs-js>lr&&(Hs-=hr);var Qs=Us/Math.sqrt(Math.pow(js-Hs,2)+Math.pow(Ws-zs,2));return Qs>=1?{longitude:Ns.longitude,latitude:Ns.latitude}:{longitude:Hs+(js-Hs)*Qs,latitude:zs+(Ws-zs)*Qs}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Fs)),Vs=Gs.longitude,ks=Gs.latitude;if(er(Vs,this.camera.pose.longitude,2*Math.PI)||er(ks,this.camera.pose.latitude)||er(Ds,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:Vs,latitude:ks,fov:Ds},0).catch(Lt),!0}return this.stateSynced=!0,Cs===!1&&this.emit("stateSynced",this.state),!1},ga.prototype.ready=function(){var _s=this;return new Promise(function(Ss){return _s.readyCallbacks.push(Ss)})},ga.prototype.requestFullscreen=function(){var _s;if(dr()){var Ss=(_s=this.getElement())===null||_s===void 0?void 0:_s.parentNode;Ss&&"requestFullscreen"in Ss&&typeof document!="undefined"&&document.fullscreenElement===null&&Ss.requestFullscreen()}},ga.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},ga.prototype.throwError=function(_s){this.hasListener("error")?this.emit("error",_s):console.error(_s)},ga.prototype.loadModel=function(_s,Ss,Ms,Cs){var Ts=this,Bs=_s.file;this.emit("modelWillLoad",_s);var Ps=new Xi({allowHosts:Ss,networkSubscribe:this.networkSubscribe});Ps.once("bvhLoaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&Ts.emit("modelBvhLoaded",Ps)}),Ps.once("materialLoaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&Ts.emit("modelMaterialLoaded",Ps)}),Ps.once("geometryLoaded",function(){var Ls,Rs,Ds,$s;if(!Ts.destroyed&&Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)){Ps.bounding.max.y-Ps.bounding.min.y<1.5&&(Ps.bounding.max.y=Ps.bounding.min.y+10);var Fs,Gs=Ts.model;Gs&&(Gs.show(),Fs=Gs.getMaterial()||{},Ts.scene.remove(Gs),Gs.dispose(),Ps.setTransparent(Gs.getTransparent())),Fs&&Ps.setMaterial(Fs),_s.bvh&&Ps.buildBVH(),Ts.model=Ps,Ts.scene.add(Ps),(Ds=Ts.controller)===null||Ds===void 0||Ds.updateModel(Ps),($s=Ts.renderer)===null||$s===void 0||$s.compile(Ts.scene,Ts.camera),Ts.needsRender=!0,Ts.modelPending=!1,Ts.emit("modelGeometryLoaded",Ps)}}),Ps.once("loaded",function(){var Ls,Rs;Ts.destroyed||Bs===((Rs=(Ls=Ts.work)===null||Ls===void 0?void 0:Ls.model)===null||Rs===void 0?void 0:Rs.file)&&(Ms(),Ts.emit("modelLoaded",Ps))}),Ps.on("shownFloorChange",function(Ls,Rs){var Ds,$s;Ts.destroyed||Bs===(($s=(Ds=Ts.work)===null||Ds===void 0?void 0:Ds.model)===null||$s===void 0?void 0:$s.file)&&Ts.emit("modelShownFloorChange",Ls,Rs)}),Ps.on("error",function(Ls){var Rs,Ds,$s,Fs;if(!Ts.destroyed&&Bs===((Ds=(Rs=Ts.work)===null||Rs===void 0?void 0:Rs.model)===null||Ds===void 0?void 0:Ds.file)){Ps.bounding.makeEmpty();for(var Gs=0,Vs=Ts.work.observers;Gs<Vs.length;Gs++){var ks=Vs[Gs];Ps.bounding.expandByPoint(ks.standingPosition),Ps.bounding.expandByPoint(new r$2.Vector3().fromArray([ks.position.x,2*ks.position.y-ks.standingPosition.y,ks.position.z]))}var Os=sr(Ps.bounding,new r$2.Vector3(1,0,1));Os.visible=!0,Os.name="model_empty",Ps.add(Os);var Ns,Us=Ts.model;Us&&(Us.show(),Ns=Us.getMaterial()||{},Ts.scene.remove(Us),Us.dispose(),Ps.setTransparent(Us.getTransparent())),Ns&&Ps.setMaterial(Ns),Ts.model=Ps,Ts.scene.add(Ps),($s=Ts.controller)===null||$s===void 0||$s.updateModel(Ps),(Fs=Ts.renderer)===null||Fs===void 0||Fs.compile(Ts.scene,Ts.camera),Ts.emit("modelLoadError",Ls,Ps),Ts.throwError(Ls),Ts.modelPending=!1,Ms()}}),this.modelPending=!0,Ps.load(_s,this.textureOptions).catch(Lt)},ga.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},ga.prototype.saveControllerPose=function(_s){_s===void 0&&(_s=this.controller),_s&&es(_s)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},ga.prototype.applyController=function(_s,Ss){var Ms=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Cs=ts[_s];_s===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(_s===ga.Mode.Floorplan||_s===ga.Mode.Topview||_s===ga.Mode.Model),this.currentMode=_s;for(var Ts=new Cs(Ss),Bs=function(Fs){Ts.on(Fs,function(){for(var Gs=[],Vs=0;Vs<arguments.length;Vs++)Gs[Vs]=arguments[Vs];var ks=Ms.emit.apply(Ms,e$2.__spreadArray([Fs],Gs,!1));if(ks)return!1})},Ps=0,Ls=is$1;Ps<Ls.length;Ps++)Bs(Ls[Ps]);var Rs=ts[_s].initAnimationEndPose(Ss),Ds=Ss.initial[3],$s={panoIndex:Ss.initial[0],mode:_s,longitude:Rs.longitude,latitude:Rs.latitude,fov:Rs.fov,offset:Rs.offset};return Ar(this.state,$s)||(pr(this.state,$s),this.emit("stateChange",this.state,Ds)),this.emit("currentStateChange",this.getCurrentState(),Ds),Ts.on("cameraUpdate",function(Fs,Gs){var Vs;if(Ms.controller){var ks=e$2.__assign(e$2.__assign({},Ms.controller.getTargetPose()),{panoIndex:Ms.panoIndex,mode:_s});Gs&&Ms.syncingState===!1&&Ms.state.mode===ks.mode&&!Ar(Ms.state,ks)&&(pr(Ms.state,ks),Ms.emit("stateChange",Ms.state,Gs),(Vs=Ms.analysis)===null||Vs===void 0||Vs.state(Ms.work,Ms.state))}Ms.emit("currentStateChange",Ms.getCurrentState(),Gs)}),Ts.on("initAnimationWillStart",function(Fs,Gs,Vs){var ks,Os=e$2.__assign(e$2.__assign({},Gs),{panoIndex:Fs,mode:_s});Vs&&Ms.state.mode===Os.mode&&!Ar(Ms.state,Os)&&(pr(Ms.state,Os),Ms.emit("stateChange",Ms.state,Vs),(ks=Ms.analysis)===null||ks===void 0||ks.state(Ms.work,Ms.state))}),Ts.on("initAnimationEnded",function(Fs,Gs,Vs){var ks,Os=e$2.__assign(e$2.__assign({},Gs),{panoIndex:Fs,mode:_s});Vs&&Ms.state.mode===Os.mode&&!Ar(Ms.state,Os)&&(pr(Ms.state,Os),Ms.emit("stateChange",Ms.state,Vs),(ks=Ms.analysis)===null||ks===void 0||ks.state(Ms.work,Ms.state))}),Ts.on("panoWillArrive",function(Fs,Gs,Vs){var ks;Ms.panoIndex=Fs;var Os=e$2.__assign(e$2.__assign({},Gs),{panoIndex:Fs,mode:_s});Vs&&Ms.state.mode===Os.mode&&!Ar(Ms.state,Os)&&(pr(Ms.state,Os),Ms.emit("stateChange",Ms.state,Vs),(ks=Ms.analysis)===null||ks===void 0||ks.state(Ms.work,Ms.state))}),Ts.on("panoArrived",function(Fs,Gs,Vs){var ks,Os=e$2.__assign(e$2.__assign({},Gs),{panoIndex:Fs,mode:_s});Vs&&Ms.state.mode===Os.mode&&!Ar(Ms.state,Os)&&(pr(Ms.state,Os),Ms.emit("stateChange",Ms.state,Vs),(ks=Ms.analysis)===null||ks===void 0||ks.state(Ms.work,Ms.state))}),Ts.on("moveToPano",function(Fs,Gs){Ms.emit("currentStateChange",Ms.getCurrentState(),Gs)}),Ts.on("wantsMoveToPano",function(Fs,Gs,Vs){var ks=Ms.emit("wantsMoveToPano",Fs,Gs,Vs);ks||(ks=Ms.emit("wantsToMoveToPano",Fs,Gs,Vs)),ks||Ms.moveToPano(Fs,Gs,Vs)}),Ts.on("vrWantsToExit",function(){Ms.currentMode===ga.Mode.VRPanorama&&(Ms.exitFullscreen(),Ms.changeMode(ga.Mode.Panorama))}),Ts.on("error",function(Fs){return Ms.throwError(Fs)}),Ts},ga.prototype.removeEventListeners=function(){},ga.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},ga.Line=null,ga}(Ot);five.AnimationFrameLoop=se,five.BVH=Ke,five.BVHIntersect=Ne,five.BVHNode=Fe,five.BVHVector3=ke,five.Camera=De,Five=five.Five=Is,five.InternalWebGLRenderer=Ie,five.IntersectMesh=Zn,five.LegacyPanoCircleMesh=Rn,five.Model=Xi,five.NetworkSubscribe=te,five.PBMContainer=Ae,five.PBMGroup=fe,five.PBMMaterial=Ee,five.PBMMesh=pe,five.PROXY_CONTROLLER_EVENT_NAMES=is$1,five.PanoCircleMesh=Gn,five.Scene=Ce,Subscribe=five.Subscribe=Ot,five.Work=un,five.defaultImageURLTransform=de,five.getViewportScale=rs,parseWork=five.parseWork=dn;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$1=react$1.exports,n$2=require$$1,r$1=five;function o$1(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var u$1=o$1(t$1),i$1=o$1(n$2),a$1=[],f$1=u$1.createContext(null);function s$1(){var ca=u$1.useContext(f$1);if(!ca)throw new Error("FiveProvider never found.");return ca.five}function c$1(){var ca=u$1.useContext(f$1);if(!ca)throw new Error("FiveProvider never found.");return ca.loadWork}var l$1={display:"inline-block",overflow:"hidden"};function d(ca,ga){var _s=s$1(),Ss=[_s];ga!==void 0&&(Ss=Ss.concat(ga)),u$1.useLayoutEffect(function(){return ca(_s.scene)},Ss)}var v=d;function p$1(ca){return e$1.__assign({},ca.state)}function h$1(ca){var ga=ca.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(ca.camera.position,ga)}function m$1(ca){return ca.camera.getWorldDirection(new i$1.Vector3)}function y(ca){return ca.model.empty?"Empty":"Loaded"}function S(ca,ga){return ga.indexOf(ca)>=0}function g$1(ca,ga){for(var _s=0,Ss=Object.keys(ga);_s<Ss.length;_s++){var Ms=Ss[_s];ga[Ms]!==void 0&&(ca[Ms]=ga[Ms])}}function C(ca,ga){if(S("loadWork",ga))return ca}function b(ca,ga){if(S("setState",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.setState.apply(ca,_s)}}function w(ca,ga){if(S("on",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.on.apply(ca,_s)}}function E(ca,ga){if(S("on",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.once.apply(ca,_s)}}function k(ca,ga){if(S("off",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.off.apply(ca,_s)}}function x(ca,ga){if(S("intersectRaycaster",ga))return function(){for(var _s,Ss=[],Ms=0;Ms<arguments.length;Ms++)Ss[Ms]=arguments[Ms];return(_s=ca.model).intersectRaycaster.apply(_s,Ss)}}function L(ca,ga){if(S("project2d",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.project2d.apply(ca,_s)}}function F(ca,ga){if(S("updateCamera",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.updateCamera.apply(ca,_s)}}function _(ca,ga){if(S("initBasisLoader",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.initBasisLoader.apply(ca,_s)}}function P(ca,ga){if(S("getPixels",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.getPixels.apply(ca,_s)}}function R(ca,ga){if(S("render",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.render.apply(ca,_s)}}function V(ca,ga){if(S("needsRender",ga))return function(){ca.needsRender=!0}}function M(ca,ga){if(S("preloadPano",ga))return function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return ca.preloadPano.apply(ca,_s)}}function W(ca,ga){if(S("showFloor",ga))return function(_s){typeof _s=="number"?ca.model.show(_s):ca.model.show()}}function O(ca,ga){if(S("toggleHelperVisible",ga))return function(_s){ca.helperVisible=_s}}function j(ca,ga){for(var _s={},Ss=ga.length,Ms=-1;++Ms<Ss;){var Cs=ga[Ms];Cs in ca&&(_s[Cs]=ca[Cs])}return _s}function N(ca,ga){for(var _s=0;_s<ca.length;_s++)for(var Ss=0;Ss<ga.length;Ss++)if(ca[_s]===ga[Ss])return!0;return!1}var A=function(){function ca(ga,_s){this.values=ga,this.listeners=[],this.onValuesChange=_s}return ca.prototype.on=function(ga,_s){var Ss=this,Ms=[ga,_s];return this.listeners.push(Ms),function(){var Cs=Ss.listeners.indexOf(Ms);Cs>=0&&Ss.listeners.splice(Cs,1)}},ca.prototype.getValues=function(ga){return j(this.values,ga)},ca.prototype.setValues=function(ga,_s){var Ss,Ms,Cs=[];for(var Ts in _s)ga.indexOf(Ts)>=0&&(Ss=_s[Ts],Ms=this.values[Ts],!(typeof Ss=="number"&&typeof Ms=="number"&&isNaN(Ss)&&isNaN(Ms)||Ss===Ms))&&Cs.push(Ts);if(Cs.length!==0){for(var Bs=e$1.__assign({},this.values),Ps=0,Ls=Cs;Ps<Ls.length;Ps++){var Rs=Ls[Ps];this.values[Rs]=_s[Rs]}this.onValuesChange&&this.onValuesChange(this.values,Bs);for(var Ds=0,$s=this.listeners;Ds<$s.length;Ds++){var Fs=$s[Ds],Gs=Fs[0],Vs=Fs[1];if(N(Gs,Cs)){var ks=j(Bs,Gs);Vs(j(this.values,Gs),ks)}}}},ca}();FiveCanvas=react.FiveCanvas=function(ca){var ga=ca.width,_s=ca.height,Ss=s$1(),Ms=u$1.createRef(),Cs=e$1.__assign({width:ga,height:_s},l$1);return u$1.useLayoutEffect(function(){if(Ms.current&&Ss.renderer){if(Ss.renderer.domElement.parentNode!==null&&Ss.renderer.domElement.parentNode!==Ms.current)throw new Error("There are more than 2 fiveCanvas in this context.");Ss.renderer.domElement.parentNode!==Ms.current&&Ms.current.appendChild(Ss.renderer.domElement),Ss.camera.aspect=ga/_s,Ss.camera.updateProjectionMatrix(),Ss.renderer.setSize(ga,_s),Ss.needsRender=!0}},[ga,_s,Ms.current]),u$1.createElement("div",{ref:Ms,style:Cs})},react.INJECTION_PROPNAME="$five",react.Store=A,react.createFiveFeature=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];return ca},createFiveProvider=react.createFiveProvider=function(ca){return ca===void 0&&(ca={}),function(ga){function _s(Ss){var Ms,Cs=ga.call(this,Ss)||this,Ts=function(Bs){var Ps=Bs===void 0?{}:Bs,Ls=Ps.backgroundColor,Rs=Ls===void 0?1579548:Ls,Ds=Ps.backgroundAlpha,$s=Ds===void 0?1:Ds,Fs=Ps.pixelRatio,Gs=Fs===void 0?1:Fs;if(typeof window!="undefined"){var Vs=a$1.shift();return Vs||((Vs=new i$1.WebGLRenderer({antialias:!1,alpha:!0})).outputEncoding=i$1.sRGBEncoding),Vs.setPixelRatio(Gs),Vs.setClearColor(Rs,$s),Vs.autoClear=!0,Vs}}({pixelRatio:r$1.getViewportScale()===1?window.devicePixelRatio:1});return Cs.five=new r$1.Five(e$1.__assign({renderer:Ts},ca)),(Ss.work||Ss.initialWork)&&Cs.five.load(Ss.work||Ss.initialWork,Ss.initialState,void 0,(Ms=Ss.initialUserAction)===null||Ms===void 0||Ms),Cs.five.on("load",function(){var Bs;Cs.props.onWorkChange&&Cs.props.onWorkChange((Bs=Cs.five)===null||Bs===void 0?void 0:Bs.work)}),Cs.five.on("stateChange",function(Bs,Ps){Cs.props.onStateChange&&Cs.props.onStateChange(Bs,Ps)}),Cs.five.on("currentStateChange",function(Bs,Ps){Cs.props.onCurrentStateChange&&Cs.props.onCurrentStateChange(Bs,Ps)}),Cs.five.on("error",function(Bs){Cs.props.onError?Cs.props.onError(Bs):console.warn(Bs.message)}),Cs}return e$1.__extends(_s,ga),_s.prototype.loadWork=function(Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Ss,Ms,Cs,Ts)},_s.prototype.shouldComponentUpdate=function(Ss){var Ms,Cs;return Ss.work&&Ss.work!==((Ms=this.five)===null||Ms===void 0?void 0:Ms.work)&&((Cs=this.five)===null||Cs===void 0||Cs.load(Ss.work,Ss.initialState)),!0},_s.prototype.componentWillUnmount=function(){var Ss;this.five&&(this.five.dispose(),(Ss=this.five.renderer)&&a$1.indexOf(Ss)===-1&&a$1.push(Ss),delete this.five)},_s.prototype.render=function(){var Ss=this;return u$1.createElement(f$1.Provider,{value:{five:this.five,loadWork:function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];return Ss.loadWork.apply(Ss,Ms)}}},this.props.children)},_s}(u$1.Component)},react.createStore=function(ca){var ga=u$1.createContext(null);return{useStore:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");var Ms=u$1.useRef(!0),Cs=u$1.useState(Ss.getValues(_s)),Ts=Cs[0],Bs=Cs[1],Ps=e$1.__spreadArray([Ss],_s,!0);return u$1.useLayoutEffect(function(){return Ms.current?Ms.current=!1:Bs(Ss.getValues(_s)),Ss.on(_s,function(Ls){return Bs(Ls)})},Ps),[Ts,u$1.useCallback(function(Ls){return Ss.setValues(_s,Ls)},Ps)]},useStoreSetter:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Ms){return Ss.setValues(_s,Ms)},e$1.__spreadArray([Ss],_s,!0))},watchStore:function(_s,Ss,Ms){var Cs=u$1.useContext(ga);if(Cs===null)throw new Error("StoreProvider never found.");var Ts=e$1.__spreadArray([Cs],_s,!0);Ms!==void 0&&(Ts=Ts.concat(Ms)),u$1.useLayoutEffect(function(){return Cs.on(_s,Ss)},Ts)},useStoreAction:function(_s){var Ss=u$1.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Ms=[],Cs=0;Cs<arguments.length;Cs++)Ms[Cs]=arguments[Cs];var Ts=ca[_s],Bs=Ts[0],Ps=Ts.slice(1),Ls=function(){return Ss.getValues(Ps)},Rs=function(Ds){return Ss.setValues(Ps,Ds)};return Bs.apply(void 0,e$1.__spreadArray([Ls,Rs],Ms,!1))},[])},StoreProvider:function(_s){function Ss(Ms){var Cs=_s.call(this,Ms)||this;return Cs.store=new A(Ms.initialValue,function(){for(var Ts,Bs=[],Ps=0;Ps<arguments.length;Ps++)Bs[Ps]=arguments[Ps];Cs.props.onValuesChange&&(Ts=Cs.props).onValuesChange.apply(Ts,Bs)}),Cs}return e$1.__extends(Ss,_s),Ss.prototype.shouldComponentUpdate=function(Ms){return Ms.children!==this.props.children},Ss.prototype.render=function(){return u$1.createElement(ga.Provider,{value:this.store},this.props.children)},Ss}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var ca=s$1();return{updateCamera:u$1.useCallback(function(ga,_s){return ca.updateCamera(ga,_s)},[ca]),initBasisLoader:u$1.useCallback(function(ga){return ca.initBasisLoader(ga)},[ca]),getPixels:u$1.useCallback(function(ga,_s,Ss,Ms,Cs){return ca.getPixels(ga,_s,Ss,Ms,Cs)},[ca]),render:u$1.useCallback(function(ga){return ca.render(ga)},[ca]),needsRender:u$1.useCallback(function(){return ca.needsRender=!0},[ca]),preloadPano:u$1.useCallback(function(ga,_s){return ca.preloadPano(ga,_s)},[ca])}},react.useFiveCameraDirection=function(){var ca=s$1(),ga=u$1.useState(function(){return m$1(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return Ss(m$1(ca))})},[ca]),_s},react.useFiveCameraRaycaster=function(){var ca=s$1(),ga=u$1.useState(function(){return h$1(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return Ss(h$1(ca))})},[ca]),_s},react.useFiveCurrentObserver=function(){var ca=s$1(),ga=u$1.useState(function(){return ca.getCurrentState()}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return Ss(ca.getCurrentState())})},[ca]),ca.work?ca.work.observers[_s.panoIndex]:null},react.useFiveCurrentState=function(){var ca=s$1(),ga=u$1.useState(function(){return ca.getCurrentState()}),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs,Ts,Bs){Ts===void 0&&(Ts=!1),Bs===void 0&&(Bs=!0);var Ps=typeof Cs=="function"?Cs(ca.getCurrentState()):Cs;ca.setState(Ps,Ts,Bs)},[ca]);return u$1.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return Ss(ca.getCurrentState())})},[ca]),[_s,Ms]},react.useFiveEventCallback=function(ca,ga,_s){var Ss=s$1(),Ms=[Ss,ca];_s!==void 0&&(Ms=Ms.concat(_s)),u$1.useLayoutEffect(function(){return Ss.on(ca,ga)},Ms)},react.useFiveFloor=function(){var ca=s$1(),ga=u$1.useState(ca.model.shownFloor),_s=ga[0],Ss=ga[1],Ms=u$1.useState(ca.model.floorLength),Cs=Ms[0],Ts=Ms[1],Bs=u$1.useCallback(function(Ps){typeof Ps=="number"?ca.model.show(Ps):ca.model.show()},[ca]);return u$1.useLayoutEffect(function(){var Ps=[];return Ps.push(ca.on("modelShownFloorChange",function(){return Ss(ca.model.shownFloor)})),Ps.push(ca.on("modelLoaded",function(){return Ts(ca.model.floorLength)})),function(){for(var Ls;Ls=Ps.shift();)Ls()}},[ca]),[_s,Cs,Bs]},react.useFiveHelper=function(){var ca=s$1(),ga=u$1.useState(ca.helperVisible),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs){ca.helperVisible=Cs},[ca]);return u$1.useLayoutEffect(function(){return ca.on("helpersVisibleChange",function(Cs){return Ss(Cs)})},[ca]),[_s,Ms]},react.useFiveModelIntersectRaycaster=function(){var ca=s$1();return u$1.useCallback(function(ga){return ca.model.intersectRaycaster(ga)},[ca])},react.useFiveModelReadyState=function(){var ca=s$1(),ga=u$1.useState(function(){return y(ca)}),_s=ga[0],Ss=ga[1];return u$1.useLayoutEffect(function(){return ca.on("modelLoaded",function(){return Ss(y(ca))})},[ca]),_s},react.useFiveProject2d=function(){var ca=s$1(),ga=u$1.useState(function(){return Symbol()});ga[0];var _s=ga[1];return u$1.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return _s(Symbol())})},[ca]),u$1.useCallback(function(Ss,Ms){return ca.project2d(Ss,Ms)},[ca])},react.useFiveScene=v,react.useFiveSceneEffect=d,react.useFiveState=function(){var ca=s$1(),ga=u$1.useState(function(){return p$1(ca)}),_s=ga[0],Ss=ga[1],Ms=u$1.useCallback(function(Cs,Ts,Bs){Ts===void 0&&(Ts=!1),Bs===void 0&&(Bs=!0);var Ps=typeof Cs=="function"?Cs(ca.getCurrentState()):Cs;ca.setState(Ps,Ts,Bs)},[ca]);return u$1.useLayoutEffect(function(){return ca.on("stateChange",function(){return Ss(p$1(ca))})},[ca]),[_s,Ms]},react.useFiveWork=function(){var ca=s$1(),ga=c$1(),_s=u$1.useState(function(){return ca.work}),Ss=_s[0],Ms=_s[1];return u$1.useLayoutEffect(function(){return ca.on("load",function(){return Ms(ca.work)})},[ca]),[Ss,ga]},react.withFive=function(ca){return function(ga){return u$1.forwardRef(function(_s,Ss){var Ms=s$1(),Cs=c$1(),Ts=function(yu,Su){return[S("unsafe__fiveInstance",Su)?yu:void 0]}(Ms,ca)[0],Bs=function(yu,Su){var Tu=S("state",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return e$1.__assign({},yu.state)},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("stateChange",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Ps=Bs[0],Ls=Bs[1],Rs=function(yu,Su){var Tu=S("currentState",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.getCurrentState()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("currentStateChange",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Ds=Rs[0],$s=Rs[1],Fs=function(yu,Su){var Tu=S("currentObserver",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.getCurrentState()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("currentStateChange",function(){return Bu(Symbol())})},[yu]),[Lu?yu.work?yu.work.observers[Lu.panoIndex]:null:void 0,Au]}(Ms,ca),Gs=Fs[0],Vs=Fs[1],ks=function(yu,Su){var Tu=S("work",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.work},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("load",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Os=ks[0],Ns=ks[1],Us=function(yu,Su){var Tu=S("model",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.model},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("modelLoaded",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Hs=Us[0],zs=Us[1],js=function(yu,Su){return[S("scene",Su)?yu.scene:void 0]}(Ms,ca)[0],Ws=function(yu,Su){var Tu=S("cameraDirection",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.camera.getWorldDirection(new i$1.Vector3)},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("cameraUpdate",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Qs=Ws[0],qs=Ws[1],tu=function(yu,Su){var Tu=S("cameraRaycaster",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu){var Qu=yu.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(yu.camera.position,Qu)}},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("cameraUpdate",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Ys=tu[0],Ks=tu[1],Js=function(yu,Su){var Tu=S("modelReadyState",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.model.empty?"Empty":"Loaded"},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("modelLoaded",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),eu=Js[0],Zs=Js[1],au=function(yu,Su){var Tu=S("shownFloor",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.model.shownFloor},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("modelShownFloorChange",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),ru=au[0],su=au[1],lu=function(yu,Su){var Tu=S("totalFloorLength",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.model.hasFloors()},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("modelLoaded",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),gu=lu[0],hu=lu[1],wu=function(yu,Su){var Tu=S("helperVisible",Su),bu=u$1.useState(Symbol()),Au=bu[0],Bu=bu[1],Lu=u$1.useMemo(function(){if(Tu)return yu.helperVisible},[yu,Au]);return u$1.useLayoutEffect(function(){if(Tu)return yu.on("helpersVisibleChange",function(){return Bu(Symbol())})},[yu]),[Lu,Au]}(Ms,ca),Mu=wu[0],du=wu[1],vu=u$1.useMemo(function(){var yu={};return g$1(yu,{setState:b(Ms,ca),loadWork:C(Cs,ca),on:w(Ms,ca),once:E(Ms,ca),off:k(Ms,ca),intersectRaycaster:x(Ms,ca),project2d:L(Ms,ca),updateCamera:F(Ms,ca),initBasisLoader:_(Ms,ca),getPixels:P(Ms,ca),render:R(Ms,ca),needsRender:V(Ms,ca),preloadPano:M(Ms,ca),showFloor:W(Ms,ca),toggleHelperVisible:O(Ms,ca)}),yu},[Ms,Cs]),pu=u$1.useMemo(function(){var yu=e$1.__assign({},vu);return g$1(yu,{unsafe__fiveInstance:Ts,state:Ps,currentState:Ds,currentObserver:Gs,work:Os,model:Hs,scene:js,cameraDirection:Qs,cameraRaycaster:Ys,modelReadyState:eu,shownFloor:ru,totalFloorLength:gu,helperVisible:Mu}),yu},[Ms,vu,Ls,$s,Vs,Ns,zs,qs,Ks,Zs,su,hu,du]);return u$1.createElement(ga,e$1.__assign({ref:Ss,$five:pu},_s))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(ca,ga,_s){var Ss,Ms={},Cs=null,Ts=null;_s!==void 0&&(Cs=""+_s),ga.key!==void 0&&(Cs=""+ga.key),ga.ref!==void 0&&(Ts=ga.ref);for(Ss in ga)n$1.call(ga,Ss)&&!p.hasOwnProperty(Ss)&&(Ms[Ss]=ga[Ss]);if(ca&&ca.defaultProps)for(Ss in ga=ca.defaultProps,ga)Ms[Ss]===void 0&&(Ms[Ss]=ga[Ss]);return{$$typeof:g,type:ca,key:Cs,ref:Ts,props:Ms,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(ca){(function(){var ga={}.hasOwnProperty;function _s(){for(var Ss=[],Ms=0;Ms<arguments.length;Ms++){var Cs=arguments[Ms];if(!!Cs){var Ts=typeof Cs;if(Ts==="string"||Ts==="number")Ss.push(Cs);else if(Array.isArray(Cs)){if(Cs.length){var Bs=_s.apply(null,Cs);Bs&&Ss.push(Bs)}}else if(Ts==="object")if(Cs.toString===Object.prototype.toString)for(var Ps in Cs)ga.call(Cs,Ps)&&Cs[Ps]&&Ss.push(Ps);else Ss.push(Cs.toString())}}return Ss.join(" ")}ca.exports?(_s.default=_s,ca.exports=_s):window.classNames=_s})()})(classnames);var classNames=classnames.exports;function die(ca){for(var ga=arguments.length,_s=new Array(ga>1?ga-1:0),Ss=1;Ss<ga;Ss++)_s[Ss-1]=arguments[Ss];throw new Error(typeof ca=="number"?"[MobX] minified error nr: "+ca+(_s.length?" "+_s.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+ca)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(ca){var ga=!1;return function(){if(!ga)return ga=!0,ca.apply(this,arguments)}}var noop=function ca(){};function isFunction(ca){return typeof ca=="function"}function isStringish(ca){var ga=typeof ca;switch(ga){case"string":case"symbol":case"number":return!0}return!1}function isObject(ca){return ca!==null&&typeof ca=="object"}function isPlainObject(ca){var ga;if(!isObject(ca))return!1;var _s=Object.getPrototypeOf(ca);return _s==null?!0:((ga=_s.constructor)==null?void 0:ga.toString())===plainObjectString}function isGenerator(ca){var ga=ca==null?void 0:ca.constructor;return ga?ga.name==="GeneratorFunction"||ga.displayName==="GeneratorFunction":!1}function addHiddenProp(ca,ga,_s){defineProperty(ca,ga,{enumerable:!1,writable:!0,configurable:!0,value:_s})}function addHiddenFinalProp(ca,ga,_s){defineProperty(ca,ga,{enumerable:!1,writable:!1,configurable:!0,value:_s})}function createInstanceofPredicate(ca,ga){var _s="isMobX"+ca;return ga.prototype[_s]=!0,function(Ss){return isObject(Ss)&&Ss[_s]===!0}}function isES6Map(ca){return ca instanceof Map}function isES6Set(ca){return ca instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(ca){var ga=Object.keys(ca);if(!hasGetOwnPropertySymbols)return ga;var _s=Object.getOwnPropertySymbols(ca);return _s.length?[].concat(ga,_s.filter(function(Ss){return objectPrototype.propertyIsEnumerable.call(ca,Ss)})):ga}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(ca){return Object.getOwnPropertyNames(ca).concat(Object.getOwnPropertySymbols(ca))}:Object.getOwnPropertyNames;function toPrimitive(ca){return ca===null?null:typeof ca=="object"?""+ca:ca}function hasProp(ca,ga){return objectPrototype.hasOwnProperty.call(ca,ga)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function ca(ga){var _s={};return ownKeys(ga).forEach(function(Ss){_s[Ss]=getDescriptor(ga,Ss)}),_s};function _defineProperties(ca,ga){for(var _s=0;_s<ga.length;_s++){var Ss=ga[_s];Ss.enumerable=Ss.enumerable||!1,Ss.configurable=!0,"value"in Ss&&(Ss.writable=!0),Object.defineProperty(ca,Ss.key,Ss)}}function _createClass(ca,ga,_s){return ga&&_defineProperties(ca.prototype,ga),_s&&_defineProperties(ca,_s),ca}function _extends(){return _extends=Object.assign||function(ca){for(var ga=1;ga<arguments.length;ga++){var _s=arguments[ga];for(var Ss in _s)Object.prototype.hasOwnProperty.call(_s,Ss)&&(ca[Ss]=_s[Ss])}return ca},_extends.apply(this,arguments)}function _inheritsLoose(ca,ga){ca.prototype=Object.create(ga.prototype),ca.prototype.constructor=ca,ca.__proto__=ga}function _assertThisInitialized(ca){if(ca===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ca}function _unsupportedIterableToArray(ca,ga){if(!!ca){if(typeof ca=="string")return _arrayLikeToArray(ca,ga);var _s=Object.prototype.toString.call(ca).slice(8,-1);if(_s==="Object"&&ca.constructor&&(_s=ca.constructor.name),_s==="Map"||_s==="Set")return Array.from(ca);if(_s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_s))return _arrayLikeToArray(ca,ga)}}function _arrayLikeToArray(ca,ga){(ga==null||ga>ca.length)&&(ga=ca.length);for(var _s=0,Ss=new Array(ga);_s<ga;_s++)Ss[_s]=ca[_s];return Ss}function _createForOfIteratorHelperLoose(ca,ga){var _s;if(typeof Symbol=="undefined"||ca[Symbol.iterator]==null){if(Array.isArray(ca)||(_s=_unsupportedIterableToArray(ca))||ga&&ca&&typeof ca.length=="number"){_s&&(ca=_s);var Ss=0;return function(){return Ss>=ca.length?{done:!0}:{done:!1,value:ca[Ss++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return _s=ca[Symbol.iterator](),_s.next.bind(_s)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(ca){function ga(_s,Ss){storeAnnotation(_s,Ss,ca)}return Object.assign(ga,ca)}function storeAnnotation(ca,ga,_s){hasProp(ca,storedAnnotationsSymbol)||addHiddenProp(ca,storedAnnotationsSymbol,_extends({},ca[storedAnnotationsSymbol])),isOverride(_s)||(ca[storedAnnotationsSymbol][ga]=_s)}function collectStoredAnnotations(ca){return hasProp(ca,storedAnnotationsSymbol)||addHiddenProp(ca,storedAnnotationsSymbol,_extends({},ca[storedAnnotationsSymbol])),ca[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function ca(_s){_s===void 0&&(_s="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=_s}var ga=ca.prototype;return ga.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ss){return Ss()})},ga.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ss){return Ss()})},ga.reportObserved=function(){return reportObserved(this)},ga.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},ga.toString=function(){return this.name_},ca}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(ca,ga,_s){ga===void 0&&(ga=noop),_s===void 0&&(_s=noop);var Ss=new Atom(ca);return ga!==noop&&onBecomeObserved(Ss,ga),_s!==noop&&onBecomeUnobserved(Ss,_s),Ss}function identityComparer(ca,ga){return ca===ga}function structuralComparer(ca,ga){return deepEqual(ca,ga)}function shallowComparer(ca,ga){return deepEqual(ca,ga,1)}function defaultComparer(ca,ga){return Object.is?Object.is(ca,ga):ca===ga?ca!==0||1/ca==1/ga:ca!==ca&&ga!==ga}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(ca,ga,_s){return isObservable(ca)?ca:Array.isArray(ca)?observable.array(ca,{name:_s}):isPlainObject(ca)?observable.object(ca,void 0,{name:_s}):isES6Map(ca)?observable.map(ca,{name:_s}):isES6Set(ca)?observable.set(ca,{name:_s}):typeof ca=="function"&&!isAction(ca)&&!isFlow(ca)?isGenerator(ca)?flow(ca):autoAction(_s,ca):ca}function shallowEnhancer(ca,ga,_s){if(ca==null||isObservableObject(ca)||isObservableArray(ca)||isObservableMap(ca)||isObservableSet(ca))return ca;if(Array.isArray(ca))return observable.array(ca,{name:_s,deep:!1});if(isPlainObject(ca))return observable.object(ca,void 0,{name:_s,deep:!1});if(isES6Map(ca))return observable.map(ca,{name:_s,deep:!1});if(isES6Set(ca))return observable.set(ca,{name:_s,deep:!1})}function referenceEnhancer(ca){return ca}function refStructEnhancer(ca,ga){return deepEqual(ca,ga)?ga:ca}var OVERRIDE="override";function isOverride(ca){return ca.annotationType_===OVERRIDE}function createActionAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$1,extend_:extend_$1}}function make_$1(ca,ga,_s,Ss){var Ms;if((Ms=this.options_)==null?void 0:Ms.bound)return this.extend_(ca,ga,_s,!1)===null?0:1;if(Ss===ca.target_)return this.extend_(ca,ga,_s,!1)===null?0:2;if(isAction(_s.value))return 1;var Cs=createActionDescriptor(ca,this,ga,_s,!1);return defineProperty(Ss,ga,Cs),2}function extend_$1(ca,ga,_s,Ss){var Ms=createActionDescriptor(ca,this,ga,_s);return ca.defineProperty_(ga,Ms,Ss)}function assertActionDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.value}function createActionDescriptor(ca,ga,_s,Ss,Ms){var Cs,Ts,Bs,Ps,Ls,Rs,Ds;Ms===void 0&&(Ms=globalState.safeDescriptors),assertActionDescriptor(ca,ga,_s,Ss);var $s=Ss.value;if((Cs=ga.options_)==null?void 0:Cs.bound){var Fs;$s=$s.bind((Fs=ca.proxy_)!=null?Fs:ca.target_)}return{value:createAction((Ts=(Bs=ga.options_)==null?void 0:Bs.name)!=null?Ts:_s.toString(),$s,(Ps=(Ls=ga.options_)==null?void 0:Ls.autoAction)!=null?Ps:!1,((Rs=ga.options_)==null?void 0:Rs.bound)?(Ds=ca.proxy_)!=null?Ds:ca.target_:void 0),configurable:Ms?ca.isPlainObject_:!0,enumerable:!1,writable:!Ms}}function createFlowAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$2,extend_:extend_$2}}function make_$2(ca,ga,_s,Ss){var Ms;if(Ss===ca.target_)return this.extend_(ca,ga,_s,!1)===null?0:2;if(((Ms=this.options_)==null?void 0:Ms.bound)&&!isFlow(ca.target_[ga])&&this.extend_(ca,ga,_s,!1)===null)return 0;if(isFlow(_s.value))return 1;var Cs=createFlowDescriptor(ca,this,ga,_s,!1,!1);return defineProperty(Ss,ga,Cs),2}function extend_$2(ca,ga,_s,Ss){var Ms,Cs=createFlowDescriptor(ca,this,ga,_s,(Ms=this.options_)==null?void 0:Ms.bound);return ca.defineProperty_(ga,Cs,Ss)}function assertFlowDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.value}function createFlowDescriptor(ca,ga,_s,Ss,Ms,Cs){Cs===void 0&&(Cs=globalState.safeDescriptors),assertFlowDescriptor(ca,ga,_s,Ss);var Ts=Ss.value;if(Ms){var Bs;Ts=Ts.bind((Bs=ca.proxy_)!=null?Bs:ca.target_)}return{value:flow(Ts),configurable:Cs?ca.isPlainObject_:!0,enumerable:!1,writable:!Cs}}function createComputedAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$3,extend_:extend_$3}}function make_$3(ca,ga,_s){return this.extend_(ca,ga,_s,!1)===null?0:1}function extend_$3(ca,ga,_s,Ss){return assertComputedDescriptor(ca,this,ga,_s),ca.defineComputedProperty_(ga,_extends({},this.options_,{get:_s.get,set:_s.set}),Ss)}function assertComputedDescriptor(ca,ga,_s,Ss){ga.annotationType_,Ss.get}function createObservableAnnotation(ca,ga){return{annotationType_:ca,options_:ga,make_:make_$4,extend_:extend_$4}}function make_$4(ca,ga,_s){return this.extend_(ca,ga,_s,!1)===null?0:1}function extend_$4(ca,ga,_s,Ss){var Ms,Cs;return assertObservableDescriptor(ca,this),ca.defineObservableProperty_(ga,_s.value,(Ms=(Cs=this.options_)==null?void 0:Cs.enhancer)!=null?Ms:deepEnhancer,Ss)}function assertObservableDescriptor(ca,ga,_s,Ss){ga.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(ca){return{annotationType_:AUTO,options_:ca,make_:make_$5,extend_:extend_$5}}function make_$5(ca,ga,_s,Ss){var Ms,Cs;if(_s.get)return computed.make_(ca,ga,_s,Ss);if(_s.set){var Ts=createAction(ga.toString(),_s.set);return Ss===ca.target_?ca.defineProperty_(ga,{configurable:globalState.safeDescriptors?ca.isPlainObject_:!0,set:Ts})===null?0:2:(defineProperty(Ss,ga,{configurable:!0,set:Ts}),2)}if(Ss!==ca.target_&&typeof _s.value=="function"){var Bs;if(isGenerator(_s.value)){var Ps,Ls=((Ps=this.options_)==null?void 0:Ps.autoBind)?flow.bound:flow;return Ls.make_(ca,ga,_s,Ss)}var Rs=((Bs=this.options_)==null?void 0:Bs.autoBind)?autoAction.bound:autoAction;return Rs.make_(ca,ga,_s,Ss)}var Ds=((Ms=this.options_)==null?void 0:Ms.deep)===!1?observable.ref:observable;if(typeof _s.value=="function"&&((Cs=this.options_)==null?void 0:Cs.autoBind)){var $s;_s.value=_s.value.bind(($s=ca.proxy_)!=null?$s:ca.target_)}return Ds.make_(ca,ga,_s,Ss)}function extend_$5(ca,ga,_s,Ss){var Ms,Cs;if(_s.get)return computed.extend_(ca,ga,_s,Ss);if(_s.set)return ca.defineProperty_(ga,{configurable:globalState.safeDescriptors?ca.isPlainObject_:!0,set:createAction(ga.toString(),_s.set)},Ss);if(typeof _s.value=="function"&&((Ms=this.options_)==null?void 0:Ms.autoBind)){var Ts;_s.value=_s.value.bind((Ts=ca.proxy_)!=null?Ts:ca.target_)}var Bs=((Cs=this.options_)==null?void 0:Cs.deep)===!1?observable.ref:observable;return Bs.extend_(ca,ga,_s,Ss)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(ca){return ca||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(ca){return ca.deep===!0?deepEnhancer:ca.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(ca.defaultDecorator)}function getAnnotationFromOptions(ca){var ga;return ca?(ga=ca.defaultDecorator)!=null?ga:createAutoAnnotation(ca):void 0}function getEnhancerFromAnnotation(ca){var ga,_s;return ca&&(ga=(_s=ca.options_)==null?void 0:_s.enhancer)!=null?ga:deepEnhancer}function createObservable(ca,ga,_s){if(isStringish(ga)){storeAnnotation(ca,ga,observableAnnotation);return}return isObservable(ca)?ca:isPlainObject(ca)?observable.object(ca,ga,_s):Array.isArray(ca)?observable.array(ca,ga):isES6Map(ca)?observable.map(ca,ga):isES6Set(ca)?observable.set(ca,ga):typeof ca=="object"&&ca!==null?ca:observable.box(ca,ga)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableValue(ga,getEnhancerFromOptions(Ss),Ss.name,!0,Ss.equals)},array:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return(globalState.useProxies===!1||Ss.proxy===!1?createLegacyArray:createObservableArray)(ga,getEnhancerFromOptions(Ss),Ss.name)},map:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableMap(ga,getEnhancerFromOptions(Ss),Ss.name)},set:function ca(ga,_s){var Ss=asCreateObservableOptions(_s);return new ObservableSet(ga,getEnhancerFromOptions(Ss),Ss.name)},object:function ca(ga,_s,Ss){return extendObservable(globalState.useProxies===!1||(Ss==null?void 0:Ss.proxy)===!1?asObservableObject({},Ss):asDynamicObservableObject({},Ss),ga,_s)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function ca(ga,_s){if(isStringish(_s))return storeAnnotation(ga,_s,computedAnnotation);if(isPlainObject(ga))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,ga));var Ss=isPlainObject(_s)?_s:{};return Ss.get=ga,Ss.name||(Ss.name=ga.name||""),new ComputedValue(Ss)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(ca,ga,_s,Ss){_s===void 0&&(_s=!1);function Ms(){return executeAction(ca,_s,ga,Ss||this,arguments)}return Ms.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=ca,Object.defineProperty(Ms,"name",tmpNameDescriptor)),Ms}function executeAction(ca,ga,_s,Ss,Ms){var Cs=_startAction(ca,ga);try{return _s.apply(Ss,Ms)}catch(Ts){throw Cs.error_=Ts,Ts}finally{_endAction(Cs)}}function _startAction(ca,ga,_s,Ss){var Ms=!1,Cs=0,Ts=globalState.trackingDerivation,Bs=!ga||!Ts;startBatch();var Ps=globalState.allowStateChanges;Bs&&(untrackedStart(),Ps=allowStateChangesStart(!0));var Ls=allowStateReadsStart(!0),Rs={runAsAction_:Bs,prevDerivation_:Ts,prevAllowStateChanges_:Ps,prevAllowStateReads_:Ls,notifySpy_:Ms,startTime_:Cs,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Rs.actionId_,Rs}function _endAction(ca){currentActionId!==ca.actionId_&&die(30),currentActionId=ca.parentActionId_,ca.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(ca.prevAllowStateChanges_),allowStateReadsEnd(ca.prevAllowStateReads_),endBatch(),ca.runAsAction_&&untrackedEnd(ca.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(ca,ga){var _s=allowStateChangesStart(ca);try{return ga()}finally{allowStateChangesEnd(_s)}}function allowStateChangesStart(ca){var ga=globalState.allowStateChanges;return globalState.allowStateChanges=ca,ga}function allowStateChangesEnd(ca){globalState.allowStateChanges=ca}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(ca){_inheritsLoose(ga,ca);function ga(Ss,Ms,Cs,Ts,Bs){var Ps;return Cs===void 0&&(Cs="ObservableValue"),Bs===void 0&&(Bs=comparer.default),Ps=ca.call(this,Cs)||this,Ps.enhancer=void 0,Ps.name_=void 0,Ps.equals=void 0,Ps.hasUnreportedChange_=!1,Ps.interceptors_=void 0,Ps.changeListeners_=void 0,Ps.value_=void 0,Ps.dehancer=void 0,Ps.enhancer=Ms,Ps.name_=Cs,Ps.equals=Bs,Ps.value_=Ms(Ss,void 0,Cs),Ps}var _s=ga.prototype;return _s.dehanceValue=function(Ms){return this.dehancer!==void 0?this.dehancer(Ms):Ms},_s.set=function(Ms){this.value_,Ms=this.prepareNewValue_(Ms),Ms!==globalState.UNCHANGED&&this.setNewValue_(Ms)},_s.prepareNewValue_=function(Ms){if(hasInterceptors(this)){var Cs=interceptChange(this,{object:this,type:UPDATE,newValue:Ms});if(!Cs)return globalState.UNCHANGED;Ms=Cs.newValue}return Ms=this.enhancer(Ms,this.value_,this.name_),this.equals(this.value_,Ms)?globalState.UNCHANGED:Ms},_s.setNewValue_=function(Ms){var Cs=this.value_;this.value_=Ms,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Ms,oldValue:Cs})},_s.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},_s.intercept_=function(Ms){return registerInterceptor(this,Ms)},_s.observe_=function(Ms,Cs){return Cs&&Ms({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Ms)},_s.raw=function(){return this.value_},_s.toJSON=function(){return this.get()},_s.toString=function(){return this.name_+"["+this.value_+"]"},_s.valueOf=function(){return toPrimitive(this.get())},_s[_Symbol$toPrimitive]=function(){return this.valueOf()},ga}(Atom),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function ca(_s){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,_s.get||die(31),this.derivation=_s.get,this.name_=_s.name||"ComputedValue",_s.set&&(this.setter_=createAction("ComputedValue-setter",_s.set)),this.equals_=_s.equals||(_s.compareStructural||_s.struct?comparer.structural:comparer.default),this.scope_=_s.context,this.requiresReaction_=!!_s.requiresReaction,this.keepAlive_=!!_s.keepAlive}var ga=ca.prototype;return ga.onBecomeStale_=function(){propagateMaybeChanged(this)},ga.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ss){return Ss()})},ga.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ss){return Ss()})},ga.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Ss=globalState.trackingContext;this.keepAlive_&&!Ss&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Ss}var Ms=this.value_;if(isCaughtException(Ms))throw Ms.cause;return Ms},ga.set=function(Ss){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Ss)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},ga.trackAndCompute=function(){var Ss=this.value_,Ms=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Cs=this.computeValue_(!0),Ts=Ms||isCaughtException(Ss)||isCaughtException(Cs)||!this.equals_(Ss,Cs);return Ts&&(this.value_=Cs),Ts},ga.computeValue_=function(Ss){this.isComputing_=!0;var Ms=allowStateChangesStart(!1),Cs;if(Ss)Cs=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Cs=this.derivation.call(this.scope_);else try{Cs=this.derivation.call(this.scope_)}catch(Ts){Cs=new CaughtException(Ts)}return allowStateChangesEnd(Ms),this.isComputing_=!1,Cs},ga.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},ga.observe_=function(Ss,Ms){var Cs=this,Ts=!0,Bs=void 0;return autorun(function(){var Ps=Cs.get();if(!Ts||Ms){var Ls=untrackedStart();Ss({observableKind:"computed",debugObjectName:Cs.name_,type:UPDATE,object:Cs,newValue:Ps,oldValue:Bs}),untrackedEnd(Ls)}Ts=!1,Bs=Ps})},ga.warnAboutUntrackedRead_=function(){},ga.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},ga.valueOf=function(){return toPrimitive(this.get())},ga[_Symbol$toPrimitive$1]=function(){return this.valueOf()},ca}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(ca){ca[ca.NOT_TRACKING_=-1]="NOT_TRACKING_",ca[ca.UP_TO_DATE_=0]="UP_TO_DATE_",ca[ca.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",ca[ca.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(ca){ca[ca.NONE=0]="NONE",ca[ca.LOG=1]="LOG",ca[ca.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function ca(ga){this.cause=void 0,this.cause=ga};function isCaughtException(ca){return ca instanceof CaughtException}function shouldCompute(ca){switch(ca.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var ga=allowStateReadsStart(!0),_s=untrackedStart(),Ss=ca.observing_,Ms=Ss.length,Cs=0;Cs<Ms;Cs++){var Ts=Ss[Cs];if(isComputedValue(Ts)){if(globalState.disableErrorBoundaries)Ts.get();else try{Ts.get()}catch{return untrackedEnd(_s),allowStateReadsEnd(ga),!0}if(ca.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(_s),allowStateReadsEnd(ga),!0}}return changeDependenciesStateTo0(ca),untrackedEnd(_s),allowStateReadsEnd(ga),!1}}}function checkIfStateModificationsAreAllowed(ca){}function trackDerivedFunction(ca,ga,_s){var Ss=allowStateReadsStart(!0);changeDependenciesStateTo0(ca),ca.newObserving_=new Array(ca.observing_.length+100),ca.unboundDepsCount_=0,ca.runId_=++globalState.runId;var Ms=globalState.trackingDerivation;globalState.trackingDerivation=ca,globalState.inBatch++;var Cs;if(globalState.disableErrorBoundaries===!0)Cs=ga.call(_s);else try{Cs=ga.call(_s)}catch(Ts){Cs=new CaughtException(Ts)}return globalState.inBatch--,globalState.trackingDerivation=Ms,bindDependencies(ca),allowStateReadsEnd(Ss),Cs}function bindDependencies(ca){for(var ga=ca.observing_,_s=ca.observing_=ca.newObserving_,Ss=IDerivationState_.UP_TO_DATE_,Ms=0,Cs=ca.unboundDepsCount_,Ts=0;Ts<Cs;Ts++){var Bs=_s[Ts];Bs.diffValue_===0&&(Bs.diffValue_=1,Ms!==Ts&&(_s[Ms]=Bs),Ms++),Bs.dependenciesState_>Ss&&(Ss=Bs.dependenciesState_)}for(_s.length=Ms,ca.newObserving_=null,Cs=ga.length;Cs--;){var Ps=ga[Cs];Ps.diffValue_===0&&removeObserver(Ps,ca),Ps.diffValue_=0}for(;Ms--;){var Ls=_s[Ms];Ls.diffValue_===1&&(Ls.diffValue_=0,addObserver(Ls,ca))}Ss!==IDerivationState_.UP_TO_DATE_&&(ca.dependenciesState_=Ss,ca.onBecomeStale_())}function clearObserving(ca){var ga=ca.observing_;ca.observing_=[];for(var _s=ga.length;_s--;)removeObserver(ga[_s],ca);ca.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(ca){var ga=untrackedStart();try{return ca()}finally{untrackedEnd(ga)}}function untrackedStart(){var ca=globalState.trackingDerivation;return globalState.trackingDerivation=null,ca}function untrackedEnd(ca){globalState.trackingDerivation=ca}function allowStateReadsStart(ca){var ga=globalState.allowStateReads;return globalState.allowStateReads=ca,ga}function allowStateReadsEnd(ca){globalState.allowStateReads=ca}function changeDependenciesStateTo0(ca){if(ca.dependenciesState_!==IDerivationState_.UP_TO_DATE_){ca.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var ga=ca.observing_,_s=ga.length;_s--;)ga[_s].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function ca(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var ca=getGlobal();return ca.__mobxInstanceCount>0&&!ca.__mobxGlobals&&(canMergeGlobalState=!1),ca.__mobxGlobals&&ca.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?ca.__mobxGlobals?(ca.__mobxInstanceCount+=1,ca.__mobxGlobals.UNCHANGED||(ca.__mobxGlobals.UNCHANGED={}),ca.__mobxGlobals):(ca.__mobxInstanceCount=1,ca.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var ca=getGlobal();--ca.__mobxInstanceCount==0&&(ca.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(ca,ga){ca.observers_.add(ga),ca.lowestObserverState_>ga.dependenciesState_&&(ca.lowestObserverState_=ga.dependenciesState_)}function removeObserver(ca,ga){ca.observers_.delete(ga),ca.observers_.size===0&&queueForUnobservation(ca)}function queueForUnobservation(ca){ca.isPendingUnobservation_===!1&&(ca.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(ca))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch==0){runReactions();for(var ca=globalState.pendingUnobservations,ga=0;ga<ca.length;ga++){var _s=ca[ga];_s.isPendingUnobservation_=!1,_s.observers_.size===0&&(_s.isBeingObserved_&&(_s.isBeingObserved_=!1,_s.onBUO()),_s instanceof ComputedValue&&_s.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(ca){var ga=globalState.trackingDerivation;return ga!==null?(ga.runId_!==ca.lastAccessedBy_&&(ca.lastAccessedBy_=ga.runId_,ga.newObserving_[ga.unboundDepsCount_++]=ca,!ca.isBeingObserved_&&globalState.trackingContext&&(ca.isBeingObserved_=!0,ca.onBO())),!0):(ca.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(ca),!1)}function propagateChanged(ca){ca.lowestObserverState_!==IDerivationState_.STALE_&&(ca.lowestObserverState_=IDerivationState_.STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&ga.onBecomeStale_(),ga.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(ca){ca.lowestObserverState_!==IDerivationState_.STALE_&&(ca.lowestObserverState_=IDerivationState_.STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?ga.dependenciesState_=IDerivationState_.STALE_:ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(ca.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(ca){ca.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(ca.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,ca.observers_.forEach(function(ga){ga.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(ga.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,ga.onBecomeStale_())}))}var Reaction=function(){function ca(_s,Ss,Ms,Cs){_s===void 0&&(_s="Reaction"),Cs===void 0&&(Cs=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=_s,this.onInvalidate_=Ss,this.errorHandler_=Ms,this.requiresObservable_=Cs}var ga=ca.prototype;return ga.onBecomeStale_=function(){this.schedule_()},ga.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},ga.isScheduled=function(){return this.isScheduled_},ga.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Ss=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Ms){this.reportExceptionInDerivation_(Ms)}}globalState.trackingContext=Ss,endBatch()}},ga.track=function(Ss){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Ms=globalState.trackingContext;globalState.trackingContext=this;var Cs=trackDerivedFunction(this,Ss,void 0);globalState.trackingContext=Ms,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Cs)&&this.reportExceptionInDerivation_(Cs.cause),endBatch()}},ga.reportExceptionInDerivation_=function(Ss){var Ms=this;if(this.errorHandler_){this.errorHandler_(Ss,this);return}if(globalState.disableErrorBoundaries)throw Ss;var Cs="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Cs,Ss),globalState.globalReactionErrorHandlers.forEach(function(Ts){return Ts(Ss,Ms)})},ga.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},ga.getDisposer_=function(){var Ss=this.dispose.bind(this);return Ss[$mobx]=this,Ss},ga.toString=function(){return"Reaction["+this.name_+"]"},ga.trace=function(Ss){Ss===void 0&&(Ss=!1),trace(this,Ss)},ca}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function ca(ga){return ga()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var ca=globalState.pendingReactions,ga=0;ca.length>0;){++ga===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+ca[0]),ca.splice(0));for(var _s=ca.splice(0),Ss=0,Ms=_s.length;Ss<Ms;Ss++)_s[Ss].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(ca){var ga=reactionScheduler;reactionScheduler=function(Ss){return ca(function(){return ga(Ss)})}}function isSpyEnabled(){return!1}function spyReport(ca){}function spyReportStart(ca){}function spyReportEnd(ca){}function spy(ca){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(ca){var ga=function(Ss,Ms){if(isFunction(Ss))return createAction(Ss.name||DEFAULT_ACTION_NAME,Ss,ca);if(isFunction(Ms))return createAction(Ss,Ms,ca);if(isStringish(Ms))return storeAnnotation(Ss,Ms,ca?autoActionAnnotation:actionAnnotation);if(isStringish(Ss))return createDecoratorAnnotation(createActionAnnotation(ca?AUTOACTION:ACTION,{name:Ss,autoAction:ca}))};return ga}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(ca){return executeAction(ca.name||DEFAULT_ACTION_NAME,!1,ca,this,void 0)}function isAction(ca){return isFunction(ca)&&ca.isMobxAction===!0}function autorun(ca,ga){var _s,Ss;ga===void 0&&(ga=EMPTY_OBJECT);var Ms=(_s=(Ss=ga)==null?void 0:Ss.name)!=null?_s:"Autorun",Cs=!ga.scheduler&&!ga.delay,Ts;if(Cs)Ts=new Reaction(Ms,function(){this.track(Ls)},ga.onError,ga.requiresObservable);else{var Bs=createSchedulerFromOptions(ga),Ps=!1;Ts=new Reaction(Ms,function(){Ps||(Ps=!0,Bs(function(){Ps=!1,Ts.isDisposed_||Ts.track(Ls)}))},ga.onError,ga.requiresObservable)}function Ls(){ca(Ts)}return Ts.schedule_(),Ts.getDisposer_()}var run=function ca(ga){return ga()};function createSchedulerFromOptions(ca){return ca.scheduler?ca.scheduler:ca.delay?function(ga){return setTimeout(ga,ca.delay)}:run}function reaction(ca,ga,_s){var Ss;_s===void 0&&(_s=EMPTY_OBJECT);var Ms=(Ss=_s.name)!=null?Ss:"Reaction",Cs=action(Ms,_s.onError?wrapErrorHandler(_s.onError,ga):ga),Ts=!_s.scheduler&&!_s.delay,Bs=createSchedulerFromOptions(_s),Ps=!0,Ls=!1,Rs,Ds,$s=_s.compareStructural?comparer.structural:_s.equals||comparer.default,Fs=new Reaction(Ms,function(){Ps||Ts?Gs():Ls||(Ls=!0,Bs(Gs))},_s.onError,_s.requiresObservable);function Gs(){if(Ls=!1,!Fs.isDisposed_){var Vs=!1;Fs.track(function(){var ks=allowStateChanges(!1,function(){return ca(Fs)});Vs=Ps||!$s(Rs,ks),Ds=Rs,Rs=ks}),(Ps&&_s.fireImmediately||!Ps&&Vs)&&Cs(Rs,Ds,Fs),Ps=!1}}return Fs.schedule_(),Fs.getDisposer_()}function wrapErrorHandler(ca,ga){return function(){try{return ga.apply(this,arguments)}catch(_s){ca.call(this,_s)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(ca,ga,_s){return interceptHook(ON_BECOME_OBSERVED,ca,ga,_s)}function onBecomeUnobserved(ca,ga,_s){return interceptHook(ON_BECOME_UNOBSERVED,ca,ga,_s)}function interceptHook(ca,ga,_s,Ss){var Ms=typeof Ss=="function"?getAtom(ga,_s):getAtom(ga),Cs=isFunction(Ss)?Ss:_s,Ts=ca+"L";return Ms[Ts]?Ms[Ts].add(Cs):Ms[Ts]=new Set([Cs]),function(){var Bs=Ms[Ts];Bs&&(Bs.delete(Cs),Bs.size===0&&delete Ms[Ts])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(ca){ca.isolateGlobalState===!0&&isolateGlobalState();var ga=ca.useProxies,_s=ca.enforceActions;if(ga!==void 0&&(globalState.useProxies=ga===ALWAYS?!0:ga===NEVER?!1:typeof Proxy!="undefined"),ga==="ifavailable"&&(globalState.verifyProxies=!0),_s!==void 0){var Ss=_s===ALWAYS?ALWAYS:_s===OBSERVED;globalState.enforceActions=Ss,globalState.allowStateChanges=!(Ss===!0||Ss===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Ms){Ms in ca&&(globalState[Ms]=!!ca[Ms])}),globalState.allowStateReads=!globalState.observableRequiresReaction,ca.reactionScheduler&&setReactionScheduler(ca.reactionScheduler)}function extendObservable(ca,ga,_s,Ss){var Ms=getOwnPropertyDescriptors(ga),Cs=asObservableObject(ca,Ss)[$mobx];startBatch();try{ownKeys(Ms).forEach(function(Ts){Cs.extend_(Ts,Ms[Ts],_s&&Ts in _s?_s[Ts]:!0)})}finally{endBatch()}return ca}function getDependencyTree(ca,ga){return nodeToDependencyTree(getAtom(ca,ga))}function nodeToDependencyTree(ca){var ga={name:ca.name_};return ca.observing_&&ca.observing_.length>0&&(ga.dependencies=unique(ca.observing_).map(nodeToDependencyTree)),ga}function unique(ca){return Array.from(new Set(ca))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function ca(ga,_s){if(isStringish(_s))return storeAnnotation(ga,_s,flowAnnotation);var Ss=ga,Ms=Ss.name||"<unnamed flow>",Cs=function(){var Bs=this,Ps=arguments,Ls=++generatorId,Rs=action(Ms+" - runid: "+Ls+" - init",Ss).apply(Bs,Ps),Ds,$s=void 0,Fs=new Promise(function(Gs,Vs){var ks=0;Ds=Vs;function Os(Hs){$s=void 0;var zs;try{zs=action(Ms+" - runid: "+Ls+" - yield "+ks++,Rs.next).call(Rs,Hs)}catch(js){return Vs(js)}Us(zs)}function Ns(Hs){$s=void 0;var zs;try{zs=action(Ms+" - runid: "+Ls+" - yield "+ks++,Rs.throw).call(Rs,Hs)}catch(js){return Vs(js)}Us(zs)}function Us(Hs){if(isFunction(Hs==null?void 0:Hs.then)){Hs.then(Us,Vs);return}return Hs.done?Gs(Hs.value):($s=Promise.resolve(Hs.value),$s.then(Os,Ns))}Os(void 0)});return Fs.cancel=action(Ms+" - runid: "+Ls+" - cancel",function(){try{$s&&cancelPromise($s);var Gs=Rs.return(void 0),Vs=Promise.resolve(Gs.value);Vs.then(noop,noop),cancelPromise(Vs),Ds(new FlowCancellationError)}catch(ks){Ds(ks)}}),Fs};return Cs.isMobXFlow=!0,Cs},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(ca){isFunction(ca.cancel)&&ca.cancel()}function isFlow(ca){return(ca==null?void 0:ca.isMobXFlow)===!0}function _isObservable(ca,ga){return ca?ga!==void 0?isObservableObject(ca)?ca[$mobx].values_.has(ga):!1:isObservableObject(ca)||!!ca[$mobx]||isAtom(ca)||isReaction(ca)||isComputedValue(ca):!1}function isObservable(ca){return _isObservable(ca)}function trace(){die("trace() is not available in production builds");for(var ca=!1,ga=arguments.length,_s=new Array(ga),Ss=0;Ss<ga;Ss++)_s[Ss]=arguments[Ss];typeof _s[_s.length-1]=="boolean"&&(ca=_s.pop());var Ms=getAtomFromArgs(_s);if(!Ms)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Ms.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Ms.name_+"' tracing enabled"),Ms.isTracing_=ca?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(ca){switch(ca.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(ca[0]);case 2:return getAtom(ca[0],ca[1])}}function transaction(ca,ga){ga===void 0&&(ga=void 0),startBatch();try{return ca.apply(ga)}finally{endBatch()}}function getAdm(ca){return ca[$mobx]}var objectProxyTraps={has:function ca(ga,_s){return getAdm(ga).has_(_s)},get:function ca(ga,_s){return getAdm(ga).get_(_s)},set:function ca(ga,_s,Ss){var Ms;return isStringish(_s)?(Ms=getAdm(ga).set_(_s,Ss,!0))!=null?Ms:!0:!1},deleteProperty:function ca(ga,_s){var Ss;return isStringish(_s)?(Ss=getAdm(ga).delete_(_s,!0))!=null?Ss:!0:!1},defineProperty:function ca(ga,_s,Ss){var Ms;return(Ms=getAdm(ga).defineProperty_(_s,Ss))!=null?Ms:!0},ownKeys:function ca(ga){return getAdm(ga).ownKeys_()},preventExtensions:function ca(ga){die(13)}};function asDynamicObservableObject(ca,ga){var _s,Ss;return assertProxies(),ca=asObservableObject(ca,ga),(Ss=(_s=ca[$mobx]).proxy_)!=null?Ss:_s.proxy_=new Proxy(ca,objectProxyTraps)}function hasInterceptors(ca){return ca.interceptors_!==void 0&&ca.interceptors_.length>0}function registerInterceptor(ca,ga){var _s=ca.interceptors_||(ca.interceptors_=[]);return _s.push(ga),once(function(){var Ss=_s.indexOf(ga);Ss!==-1&&_s.splice(Ss,1)})}function interceptChange(ca,ga){var _s=untrackedStart();try{for(var Ss=[].concat(ca.interceptors_||[]),Ms=0,Cs=Ss.length;Ms<Cs&&(ga=Ss[Ms](ga),ga&&!ga.type&&die(14),!!ga);Ms++);return ga}finally{untrackedEnd(_s)}}function hasListeners(ca){return ca.changeListeners_!==void 0&&ca.changeListeners_.length>0}function registerListener(ca,ga){var _s=ca.changeListeners_||(ca.changeListeners_=[]);return _s.push(ga),once(function(){var Ss=_s.indexOf(ga);Ss!==-1&&_s.splice(Ss,1)})}function notifyListeners(ca,ga){var _s=untrackedStart(),Ss=ca.changeListeners_;if(!!Ss){Ss=Ss.slice();for(var Ms=0,Cs=Ss.length;Ms<Cs;Ms++)Ss[Ms](ga);untrackedEnd(_s)}}function makeObservable(ca,ga,_s){var Ss=asObservableObject(ca,_s)[$mobx];startBatch();try{var Ms;(Ms=ga)!=null||(ga=collectStoredAnnotations(ca)),ownKeys(ga).forEach(function(Cs){return Ss.make_(Cs,ga[Cs])})}finally{endBatch()}return ca}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function ca(ga,_s){var Ss=ga[$mobx];return _s===$mobx?Ss:_s==="length"?Ss.getArrayLength_():typeof _s=="string"&&!isNaN(_s)?Ss.get_(parseInt(_s)):hasProp(arrayExtensions,_s)?arrayExtensions[_s]:ga[_s]},set:function ca(ga,_s,Ss){var Ms=ga[$mobx];return _s==="length"&&Ms.setArrayLength_(Ss),typeof _s=="symbol"||isNaN(_s)?ga[_s]=Ss:Ms.set_(parseInt(_s),Ss),!0},preventExtensions:function ca(){die(15)}},ObservableArrayAdministration=function(){function ca(_s,Ss,Ms,Cs){_s===void 0&&(_s="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Ms,this.legacyMode_=Cs,this.atom_=new Atom(_s),this.enhancer_=function(Ts,Bs){return Ss(Ts,Bs,"ObservableArray[..]")}}var ga=ca.prototype;return ga.dehanceValue_=function(Ss){return this.dehancer!==void 0?this.dehancer(Ss):Ss},ga.dehanceValues_=function(Ss){return this.dehancer!==void 0&&Ss.length>0?Ss.map(this.dehancer):Ss},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},ga.observe_=function(Ss,Ms){return Ms===void 0&&(Ms=!1),Ms&&Ss({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Ss)},ga.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},ga.setArrayLength_=function(Ss){(typeof Ss!="number"||isNaN(Ss)||Ss<0)&&die("Out of range: "+Ss);var Ms=this.values_.length;if(Ss!==Ms)if(Ss>Ms){for(var Cs=new Array(Ss-Ms),Ts=0;Ts<Ss-Ms;Ts++)Cs[Ts]=void 0;this.spliceWithArray_(Ms,0,Cs)}else this.spliceWithArray_(Ss,Ms-Ss)},ga.updateArrayLength_=function(Ss,Ms){Ss!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Ms,this.legacyMode_&&Ms>0&&reserveArrayBuffer(Ss+Ms+1)},ga.spliceWithArray_=function(Ss,Ms,Cs){var Ts=this;checkIfStateModificationsAreAllowed(this.atom_);var Bs=this.values_.length;if(Ss===void 0?Ss=0:Ss>Bs?Ss=Bs:Ss<0&&(Ss=Math.max(0,Bs+Ss)),arguments.length===1?Ms=Bs-Ss:Ms==null?Ms=0:Ms=Math.max(0,Math.min(Ms,Bs-Ss)),Cs===void 0&&(Cs=EMPTY_ARRAY),hasInterceptors(this)){var Ps=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Ss,removedCount:Ms,added:Cs});if(!Ps)return EMPTY_ARRAY;Ms=Ps.removedCount,Cs=Ps.added}if(Cs=Cs.length===0?Cs:Cs.map(function(Ds){return Ts.enhancer_(Ds,void 0)}),this.legacyMode_){var Ls=Cs.length-Ms;this.updateArrayLength_(Bs,Ls)}var Rs=this.spliceItemsIntoValues_(Ss,Ms,Cs);return(Ms!==0||Cs.length!==0)&&this.notifyArraySplice_(Ss,Cs,Rs),this.dehanceValues_(Rs)},ga.spliceItemsIntoValues_=function(Ss,Ms,Cs){if(Cs.length<MAX_SPLICE_SIZE){var Ts;return(Ts=this.values_).splice.apply(Ts,[Ss,Ms].concat(Cs))}else{var Bs=this.values_.slice(Ss,Ss+Ms),Ps=this.values_.slice(Ss+Ms);this.values_.length+=Cs.length-Ms;for(var Ls=0;Ls<Cs.length;Ls++)this.values_[Ss+Ls]=Cs[Ls];for(var Rs=0;Rs<Ps.length;Rs++)this.values_[Ss+Cs.length+Rs]=Ps[Rs];return Bs}},ga.notifyArrayChildUpdate_=function(Ss,Ms,Cs){var Ts=!this.owned_&&isSpyEnabled(),Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Ss,newValue:Ms,oldValue:Cs}:null;this.atom_.reportChanged(),Bs&&notifyListeners(this,Ps)},ga.notifyArraySplice_=function(Ss,Ms,Cs){var Ts=!this.owned_&&isSpyEnabled(),Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Ss,removed:Cs,added:Ms,removedCount:Cs.length,addedCount:Ms.length}:null;this.atom_.reportChanged(),Bs&&notifyListeners(this,Ps)},ga.get_=function(Ss){if(Ss<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Ss]);console.warn("[mobx.array] Attempt to read an array index ("+Ss+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},ga.set_=function(Ss,Ms){var Cs=this.values_;if(Ss<Cs.length){checkIfStateModificationsAreAllowed(this.atom_);var Ts=Cs[Ss];if(hasInterceptors(this)){var Bs=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Ss,newValue:Ms});if(!Bs)return;Ms=Bs.newValue}Ms=this.enhancer_(Ms,Ts);var Ps=Ms!==Ts;Ps&&(Cs[Ss]=Ms,this.notifyArrayChildUpdate_(Ss,Ms,Ts))}else Ss===Cs.length?this.spliceWithArray_(Ss,0,[Ms]):die(17,Ss,Cs.length)},ca}();function createObservableArray(ca,ga,_s,Ss){_s===void 0&&(_s="ObservableArray"),Ss===void 0&&(Ss=!1),assertProxies();var Ms=new ObservableArrayAdministration(_s,ga,Ss,!1);addHiddenFinalProp(Ms.values_,$mobx,Ms);var Cs=new Proxy(Ms.values_,arrayTraps);if(Ms.proxy_=Cs,ca&&ca.length){var Ts=allowStateChangesStart(!0);Ms.spliceWithArray_(0,0,ca),allowStateChangesEnd(Ts)}return Cs}var arrayExtensions={clear:function ca(){return this.splice(0)},replace:function ca(ga){var _s=this[$mobx];return _s.spliceWithArray_(0,_s.values_.length,ga)},toJSON:function ca(){return this.slice()},splice:function ca(ga,_s){for(var Ss=arguments.length,Ms=new Array(Ss>2?Ss-2:0),Cs=2;Cs<Ss;Cs++)Ms[Cs-2]=arguments[Cs];var Ts=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Ts.spliceWithArray_(ga);case 2:return Ts.spliceWithArray_(ga,_s)}return Ts.spliceWithArray_(ga,_s,Ms)},spliceWithArray:function ca(ga,_s,Ss){return this[$mobx].spliceWithArray_(ga,_s,Ss)},push:function ca(){for(var ga=this[$mobx],_s=arguments.length,Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=arguments[Ms];return ga.spliceWithArray_(ga.values_.length,0,Ss),ga.values_.length},pop:function ca(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function ca(){return this.splice(0,1)[0]},unshift:function ca(){for(var ga=this[$mobx],_s=arguments.length,Ss=new Array(_s),Ms=0;Ms<_s;Ms++)Ss[Ms]=arguments[Ms];return ga.spliceWithArray_(0,0,Ss),ga.values_.length},reverse:function ca(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function ca(){globalState.trackingDerivation&&die(37,"sort");var ga=this.slice();return ga.sort.apply(ga,arguments),this.replace(ga),this},remove:function ca(ga){var _s=this[$mobx],Ss=_s.dehanceValues_(_s.values_).indexOf(ga);return Ss>-1?(this.splice(Ss,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(ca,ga){typeof Array.prototype[ca]=="function"&&(arrayExtensions[ca]=ga(ca))}function simpleFunc(ca){return function(){var ga=this[$mobx];ga.atom_.reportObserved();var _s=ga.dehanceValues_(ga.values_);return _s[ca].apply(_s,arguments)}}function mapLikeFunc(ca){return function(ga,_s){var Ss=this,Ms=this[$mobx];Ms.atom_.reportObserved();var Cs=Ms.dehanceValues_(Ms.values_);return Cs[ca](function(Ts,Bs){return ga.call(_s,Ts,Bs,Ss)})}}function reduceLikeFunc(ca){return function(){var ga=this,_s=this[$mobx];_s.atom_.reportObserved();var Ss=_s.dehanceValues_(_s.values_),Ms=arguments[0];return arguments[0]=function(Cs,Ts,Bs){return Ms(Cs,Ts,Bs,ga)},Ss[ca].apply(Ss,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(ca){return isObject(ca)&&isObservableArrayAdministration(ca[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function ca(_s,Ss,Ms){Ss===void 0&&(Ss=deepEnhancer),Ms===void 0&&(Ms="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Ss,this.name_=Ms,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,this.merge(_s)}var ga=ca.prototype;return ga.has_=function(Ss){return this.data_.has(Ss)},ga.has=function(Ss){var Ms=this;if(!globalState.trackingDerivation)return this.has_(Ss);var Cs=this.hasMap_.get(Ss);if(!Cs){var Ts=Cs=new ObservableValue(this.has_(Ss),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Ss,Ts),onBecomeUnobserved(Ts,function(){return Ms.hasMap_.delete(Ss)})}return Cs.get()},ga.set=function(Ss,Ms){var Cs=this.has_(Ss);if(hasInterceptors(this)){var Ts=interceptChange(this,{type:Cs?UPDATE:ADD,object:this,newValue:Ms,name:Ss});if(!Ts)return this;Ms=Ts.newValue}return Cs?this.updateValue_(Ss,Ms):this.addValue_(Ss,Ms),this},ga.delete=function(Ss){var Ms=this;if(checkIfStateModificationsAreAllowed(this.keysAtom_),hasInterceptors(this)){var Cs=interceptChange(this,{type:DELETE,object:this,name:Ss});if(!Cs)return!1}if(this.has_(Ss)){var Ts=isSpyEnabled(),Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Ss).value_,name:Ss}:null;return transaction(function(){var Ls;Ms.keysAtom_.reportChanged(),(Ls=Ms.hasMap_.get(Ss))==null||Ls.setNewValue_(!1);var Rs=Ms.data_.get(Ss);Rs.setNewValue_(void 0),Ms.data_.delete(Ss)}),Bs&&notifyListeners(this,Ps),!0}return!1},ga.updateValue_=function(Ss,Ms){var Cs=this.data_.get(Ss);if(Ms=Cs.prepareNewValue_(Ms),Ms!==globalState.UNCHANGED){var Ts=isSpyEnabled(),Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Cs.value_,name:Ss,newValue:Ms}:null;Cs.setNewValue_(Ms),Bs&&notifyListeners(this,Ps)}},ga.addValue_=function(Ss,Ms){var Cs=this;checkIfStateModificationsAreAllowed(this.keysAtom_),transaction(function(){var Ls,Rs=new ObservableValue(Ms,Cs.enhancer_,"ObservableMap.key",!1);Cs.data_.set(Ss,Rs),Ms=Rs.value_,(Ls=Cs.hasMap_.get(Ss))==null||Ls.setNewValue_(!0),Cs.keysAtom_.reportChanged()});var Ts=isSpyEnabled(),Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Ss,newValue:Ms}:null;Bs&&notifyListeners(this,Ps)},ga.get=function(Ss){return this.has(Ss)?this.dehanceValue_(this.data_.get(Ss).get()):this.dehanceValue_(void 0)},ga.dehanceValue_=function(Ss){return this.dehancer!==void 0?this.dehancer(Ss):Ss},ga.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},ga.values=function(){var Ss=this,Ms=this.keys();return makeIterable({next:function(){var Ts=Ms.next(),Bs=Ts.done,Ps=Ts.value;return{done:Bs,value:Bs?void 0:Ss.get(Ps)}}})},ga.entries=function(){var Ss=this,Ms=this.keys();return makeIterable({next:function(){var Ts=Ms.next(),Bs=Ts.done,Ps=Ts.value;return{done:Bs,value:Bs?void 0:[Ps,Ss.get(Ps)]}}})},ga[_Symbol$iterator]=function(){return this.entries()},ga.forEach=function(Ss,Ms){for(var Cs=_createForOfIteratorHelperLoose(this),Ts;!(Ts=Cs()).done;){var Bs=Ts.value,Ps=Bs[0],Ls=Bs[1];Ss.call(Ms,Ls,Ps,this)}},ga.merge=function(Ss){var Ms=this;return isObservableMap(Ss)&&(Ss=new Map(Ss)),transaction(function(){isPlainObject(Ss)?getPlainObjectKeys(Ss).forEach(function(Cs){return Ms.set(Cs,Ss[Cs])}):Array.isArray(Ss)?Ss.forEach(function(Cs){var Ts=Cs[0],Bs=Cs[1];return Ms.set(Ts,Bs)}):isES6Map(Ss)?(Ss.constructor!==Map&&die(19,Ss),Ss.forEach(function(Cs,Ts){return Ms.set(Ts,Cs)})):Ss!=null&&die(20,Ss)}),this},ga.clear=function(){var Ss=this;transaction(function(){untracked(function(){for(var Ms=_createForOfIteratorHelperLoose(Ss.keys()),Cs;!(Cs=Ms()).done;){var Ts=Cs.value;Ss.delete(Ts)}})})},ga.replace=function(Ss){var Ms=this;return transaction(function(){for(var Cs=convertToMap(Ss),Ts=new Map,Bs=!1,Ps=_createForOfIteratorHelperLoose(Ms.data_.keys()),Ls;!(Ls=Ps()).done;){var Rs=Ls.value;if(!Cs.has(Rs)){var Ds=Ms.delete(Rs);if(Ds)Bs=!0;else{var $s=Ms.data_.get(Rs);Ts.set(Rs,$s)}}}for(var Fs=_createForOfIteratorHelperLoose(Cs.entries()),Gs;!(Gs=Fs()).done;){var Vs=Gs.value,ks=Vs[0],Os=Vs[1],Ns=Ms.data_.has(ks);if(Ms.set(ks,Os),Ms.data_.has(ks)){var Us=Ms.data_.get(ks);Ts.set(ks,Us),Ns||(Bs=!0)}}if(!Bs)if(Ms.data_.size!==Ts.size)Ms.keysAtom_.reportChanged();else for(var Hs=Ms.data_.keys(),zs=Ts.keys(),js=Hs.next(),Ws=zs.next();!js.done;){if(js.value!==Ws.value){Ms.keysAtom_.reportChanged();break}js=Hs.next(),Ws=zs.next()}Ms.data_=Ts}),this},ga.toString=function(){return"[object ObservableMap]"},ga.toJSON=function(){return Array.from(this)},ga.observe_=function(Ss,Ms){return registerListener(this,Ss)},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},_createClass(ca,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),ca}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(ca){if(isES6Map(ca)||isObservableMap(ca))return ca;if(Array.isArray(ca))return new Map(ca);if(isPlainObject(ca)){var ga=new Map;for(var _s in ca)ga.set(_s,ca[_s]);return ga}else return die(21,ca)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function ca(_s,Ss,Ms){Ss===void 0&&(Ss=deepEnhancer),Ms===void 0&&(Ms="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Ms,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Cs,Ts){return Ss(Cs,Ts,Ms)},_s&&this.replace(_s)}var ga=ca.prototype;return ga.dehanceValue_=function(Ss){return this.dehancer!==void 0?this.dehancer(Ss):Ss},ga.clear=function(){var Ss=this;transaction(function(){untracked(function(){for(var Ms=_createForOfIteratorHelperLoose(Ss.data_.values()),Cs;!(Cs=Ms()).done;){var Ts=Cs.value;Ss.delete(Ts)}})})},ga.forEach=function(Ss,Ms){for(var Cs=_createForOfIteratorHelperLoose(this),Ts;!(Ts=Cs()).done;){var Bs=Ts.value;Ss.call(Ms,Bs,Bs,this)}},ga.add=function(Ss){var Ms=this;if(checkIfStateModificationsAreAllowed(this.atom_),hasInterceptors(this)){var Cs=interceptChange(this,{type:ADD,object:this,newValue:Ss});if(!Cs)return this}if(!this.has(Ss)){transaction(function(){Ms.data_.add(Ms.enhancer_(Ss,void 0)),Ms.atom_.reportChanged()});var Ts=!1,Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Ss}:null;Bs&&notifyListeners(this,Ps)}return this},ga.delete=function(Ss){var Ms=this;if(hasInterceptors(this)){var Cs=interceptChange(this,{type:DELETE,object:this,oldValue:Ss});if(!Cs)return!1}if(this.has(Ss)){var Ts=!1,Bs=hasListeners(this),Ps=Bs||Ts?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Ss}:null;return transaction(function(){Ms.atom_.reportChanged(),Ms.data_.delete(Ss)}),Bs&&notifyListeners(this,Ps),!0}return!1},ga.has=function(Ss){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Ss))},ga.entries=function(){var Ss=0,Ms=Array.from(this.keys()),Cs=Array.from(this.values());return makeIterable({next:function(){var Bs=Ss;return Ss+=1,Bs<Cs.length?{value:[Ms[Bs],Cs[Bs]],done:!1}:{done:!0}}})},ga.keys=function(){return this.values()},ga.values=function(){this.atom_.reportObserved();var Ss=this,Ms=0,Cs=Array.from(this.data_.values());return makeIterable({next:function(){return Ms<Cs.length?{value:Ss.dehanceValue_(Cs[Ms++]),done:!1}:{done:!0}}})},ga.replace=function(Ss){var Ms=this;return isObservableSet(Ss)&&(Ss=new Set(Ss)),transaction(function(){Array.isArray(Ss)?(Ms.clear(),Ss.forEach(function(Cs){return Ms.add(Cs)})):isES6Set(Ss)?(Ms.clear(),Ss.forEach(function(Cs){return Ms.add(Cs)})):Ss!=null&&die("Cannot initialize set from "+Ss)}),this},ga.observe_=function(Ss,Ms){return registerListener(this,Ss)},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},ga.toJSON=function(){return Array.from(this)},ga.toString=function(){return"[object ObservableSet]"},ga[_Symbol$iterator$1]=function(){return this.values()},_createClass(ca,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),ca}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function ca(_s,Ss,Ms,Cs){Ss===void 0&&(Ss=new Map),Cs===void 0&&(Cs=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=_s,this.values_=Ss,this.name_=Ms,this.defaultAnnotation_=Cs,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var ga=ca.prototype;return ga.getObservablePropValue_=function(Ss){return this.values_.get(Ss).get()},ga.setObservablePropValue_=function(Ss,Ms){var Cs=this.values_.get(Ss);if(Cs instanceof ComputedValue)return Cs.set(Ms),!0;if(hasInterceptors(this)){var Ts=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Ss,newValue:Ms});if(!Ts)return null;Ms=Ts.newValue}if(Ms=Cs.prepareNewValue_(Ms),Ms!==globalState.UNCHANGED){var Bs=hasListeners(this),Ps=!1,Ls=Bs||Ps?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Cs.value_,name:Ss,newValue:Ms}:null;Cs.setNewValue_(Ms),Bs&&notifyListeners(this,Ls)}return!0},ga.get_=function(Ss){return globalState.trackingDerivation&&!hasProp(this.target_,Ss)&&this.has_(Ss),this.target_[Ss]},ga.set_=function(Ss,Ms,Cs){return Cs===void 0&&(Cs=!1),hasProp(this.target_,Ss)?this.values_.has(Ss)?this.setObservablePropValue_(Ss,Ms):Cs?Reflect.set(this.target_,Ss,Ms):(this.target_[Ss]=Ms,!0):this.extend_(Ss,{value:Ms,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Cs)},ga.has_=function(Ss){if(!globalState.trackingDerivation)return Ss in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Ms=this.pendingKeys_.get(Ss);return Ms||(Ms=new ObservableValue(Ss in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Ss,Ms)),Ms.get()},ga.make_=function(Ss,Ms){if(Ms===!0&&(Ms=this.defaultAnnotation_),Ms!==!1){if(!(Ss in this.target_)){var Cs;if((Cs=this.target_[storedAnnotationsSymbol])==null?void 0:Cs[Ss])return;die(1,Ms.annotationType_,this.name_+"."+Ss.toString())}for(var Ts=this.target_;Ts&&Ts!==objectPrototype;){var Bs=getDescriptor(Ts,Ss);if(Bs){var Ps=Ms.make_(this,Ss,Bs,Ts);if(Ps===0)return;if(Ps===1)break}Ts=Object.getPrototypeOf(Ts)}recordAnnotationApplied(this,Ms,Ss)}},ga.extend_=function(Ss,Ms,Cs,Ts){if(Ts===void 0&&(Ts=!1),Cs===!0&&(Cs=this.defaultAnnotation_),Cs===!1)return this.defineProperty_(Ss,Ms,Ts);var Bs=Cs.extend_(this,Ss,Ms,Ts);return Bs&&recordAnnotationApplied(this,Cs,Ss),Bs},ga.defineProperty_=function(Ss,Ms,Cs){Cs===void 0&&(Cs=!1);try{startBatch();var Ts=this.delete_(Ss);if(!Ts)return Ts;if(hasInterceptors(this)){var Bs=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:Ms.value});if(!Bs)return null;var Ps=Bs.newValue;Ms.value!==Ps&&(Ms=_extends({},Ms,{value:Ps}))}if(Cs){if(!Reflect.defineProperty(this.target_,Ss,Ms))return!1}else defineProperty(this.target_,Ss,Ms);this.notifyPropertyAddition_(Ss,Ms.value)}finally{endBatch()}return!0},ga.defineObservableProperty_=function(Ss,Ms,Cs,Ts){Ts===void 0&&(Ts=!1);try{startBatch();var Bs=this.delete_(Ss);if(!Bs)return Bs;if(hasInterceptors(this)){var Ps=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:Ms});if(!Ps)return null;Ms=Ps.newValue}var Ls=getCachedObservablePropDescriptor(Ss),Rs={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ls.get,set:Ls.set};if(Ts){if(!Reflect.defineProperty(this.target_,Ss,Rs))return!1}else defineProperty(this.target_,Ss,Rs);var Ds=new ObservableValue(Ms,Cs,"ObservableObject.key",!1);this.values_.set(Ss,Ds),this.notifyPropertyAddition_(Ss,Ds.value_)}finally{endBatch()}return!0},ga.defineComputedProperty_=function(Ss,Ms,Cs){Cs===void 0&&(Cs=!1);try{startBatch();var Ts=this.delete_(Ss);if(!Ts)return Ts;if(hasInterceptors(this)){var Bs=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:ADD,newValue:void 0});if(!Bs)return null}Ms.name||(Ms.name="ObservableObject.key"),Ms.context=this.proxy_||this.target_;var Ps=getCachedObservablePropDescriptor(Ss),Ls={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Ps.get,set:Ps.set};if(Cs){if(!Reflect.defineProperty(this.target_,Ss,Ls))return!1}else defineProperty(this.target_,Ss,Ls);this.values_.set(Ss,new ComputedValue(Ms)),this.notifyPropertyAddition_(Ss,void 0)}finally{endBatch()}return!0},ga.delete_=function(Ss,Ms){if(Ms===void 0&&(Ms=!1),!hasProp(this.target_,Ss))return!0;if(hasInterceptors(this)){var Cs=interceptChange(this,{object:this.proxy_||this.target_,name:Ss,type:REMOVE});if(!Cs)return null}try{var Ts,Bs;startBatch();var Ps=hasListeners(this),Ls=!1,Rs=this.values_.get(Ss),Ds=void 0;if(!Rs&&(Ps||Ls)){var $s;Ds=($s=getDescriptor(this.target_,Ss))==null?void 0:$s.value}if(Ms){if(!Reflect.deleteProperty(this.target_,Ss))return!1}else delete this.target_[Ss];if(Rs&&(this.values_.delete(Ss),Rs instanceof ObservableValue&&(Ds=Rs.value_),propagateChanged(Rs)),this.keysAtom_.reportChanged(),(Ts=this.pendingKeys_)==null||(Bs=Ts.get(Ss))==null||Bs.set(Ss in this.target_),Ps||Ls){var Fs={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Ds,name:Ss};Ps&&notifyListeners(this,Fs)}}finally{endBatch()}return!0},ga.observe_=function(Ss,Ms){return registerListener(this,Ss)},ga.intercept_=function(Ss){return registerInterceptor(this,Ss)},ga.notifyPropertyAddition_=function(Ss,Ms){var Cs,Ts,Bs=hasListeners(this),Ps=!1;if(Bs||Ps){var Ls=Bs||Ps?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Ss,newValue:Ms}:null;Bs&&notifyListeners(this,Ls)}(Cs=this.pendingKeys_)==null||(Ts=Cs.get(Ss))==null||Ts.set(!0),this.keysAtom_.reportChanged()},ga.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},ga.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},ca}();function asObservableObject(ca,ga){var _s;if(hasProp(ca,$mobx))return ca;var Ss=(_s=ga==null?void 0:ga.name)!=null?_s:"ObservableObject",Ms=new ObservableObjectAdministration(ca,new Map,String(Ss),getAnnotationFromOptions(ga));return addHiddenProp(ca,$mobx,Ms),ca}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(ca){return descriptorCache[ca]||(descriptorCache[ca]={get:function(){return this[$mobx].getObservablePropValue_(ca)},set:function(_s){return this[$mobx].setObservablePropValue_(ca,_s)}})}function isObservableObject(ca){return isObject(ca)?isObservableObjectAdministration(ca[$mobx]):!1}function recordAnnotationApplied(ca,ga,_s){var Ss;(Ss=ca.target_[storedAnnotationsSymbol])==null||delete Ss[_s]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function ca(){};function inherit(ca,ga){Object.setPrototypeOf?Object.setPrototypeOf(ca.prototype,ga):ca.prototype.__proto__!==void 0?ca.prototype.__proto__=ga:ca.prototype=ga}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(ca){_inheritsLoose(ga,ca);function ga(Ss,Ms,Cs,Ts){var Bs;Cs===void 0&&(Cs="ObservableArray"),Ts===void 0&&(Ts=!1),Bs=ca.call(this)||this;var Ps=new ObservableArrayAdministration(Cs,Ms,Ts,!0);if(Ps.proxy_=_assertThisInitialized(Bs),addHiddenFinalProp(_assertThisInitialized(Bs),$mobx,Ps),Ss&&Ss.length){var Ls=allowStateChangesStart(!0);Bs.spliceWithArray(0,0,Ss),allowStateChangesEnd(Ls)}return Bs}var _s=ga.prototype;return _s.concat=function(){this[$mobx].atom_.reportObserved();for(var Ms=arguments.length,Cs=new Array(Ms),Ts=0;Ts<Ms;Ts++)Cs[Ts]=arguments[Ts];return Array.prototype.concat.apply(this.slice(),Cs.map(function(Bs){return isObservableArray(Bs)?Bs.slice():Bs}))},_s[Symbol.iterator]=function(){var Ss=this,Ms=0;return makeIterable({next:function(){return Ms<Ss.length?{value:Ss[Ms++],done:!1}:{done:!0,value:void 0}}})},_createClass(ga,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Ms){this[$mobx].setArrayLength_(Ms)}},{key:Symbol.toStringTag,get:function(){return"Array"}}]),ga}(StubArray);Object.entries(arrayExtensions).forEach(function(ca){var ga=ca[0],_s=ca[1];ga!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,ga,_s)});function createArrayEntryDescriptor(ca){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(ca)},set:function(_s){this[$mobx].set_(ca,_s)}}}function createArrayBufferItem(ca){defineProperty(LegacyObservableArray.prototype,""+ca,createArrayEntryDescriptor(ca))}function reserveArrayBuffer(ca){if(ca>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var ga=OBSERVABLE_ARRAY_BUFFER_SIZE;ga<ca+100;ga++)createArrayBufferItem(ga);OBSERVABLE_ARRAY_BUFFER_SIZE=ca}}reserveArrayBuffer(1e3);function createLegacyArray(ca,ga,_s){return new LegacyObservableArray(ca,ga,_s)}function getAtom(ca,ga){if(typeof ca=="object"&&ca!==null){if(isObservableArray(ca))return ga!==void 0&&die(23),ca[$mobx].atom_;if(isObservableSet(ca))return ca[$mobx];if(isObservableMap(ca)){if(ga===void 0)return ca.keysAtom_;var _s=ca.data_.get(ga)||ca.hasMap_.get(ga);return _s||die(25,ga,getDebugName(ca)),_s}if(isObservableObject(ca)){if(!ga)return die(26);var Ss=ca[$mobx].values_.get(ga);return Ss||die(27,ga,getDebugName(ca)),Ss}if(isAtom(ca)||isComputedValue(ca)||isReaction(ca))return ca}else if(isFunction(ca)&&isReaction(ca[$mobx]))return ca[$mobx];die(28)}function getAdministration(ca,ga){if(ca||die(29),ga!==void 0)return getAdministration(getAtom(ca,ga));if(isAtom(ca)||isComputedValue(ca)||isReaction(ca)||isObservableMap(ca)||isObservableSet(ca))return ca;if(ca[$mobx])return ca[$mobx];die(24,ca)}function getDebugName(ca,ga){var _s;if(ga!==void 0)_s=getAtom(ca,ga);else{if(isAction(ca))return ca.name;isObservableObject(ca)||isObservableMap(ca)||isObservableSet(ca)?_s=getAdministration(ca):_s=getAtom(ca)}return _s.name_}var toString=objectPrototype.toString;function deepEqual(ca,ga,_s){return _s===void 0&&(_s=-1),eq(ca,ga,_s)}function eq(ca,ga,_s,Ss,Ms){if(ca===ga)return ca!==0||1/ca==1/ga;if(ca==null||ga==null)return!1;if(ca!==ca)return ga!==ga;var Cs=typeof ca;if(!isFunction(Cs)&&Cs!=="object"&&typeof ga!="object")return!1;var Ts=toString.call(ca);if(Ts!==toString.call(ga))return!1;switch(Ts){case"[object RegExp]":case"[object String]":return""+ca==""+ga;case"[object Number]":return+ca!=+ca?+ga!=+ga:+ca==0?1/+ca==1/ga:+ca==+ga;case"[object Date]":case"[object Boolean]":return+ca==+ga;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(ca)===Symbol.valueOf.call(ga);case"[object Map]":case"[object Set]":_s>=0&&_s++;break}ca=unwrap(ca),ga=unwrap(ga);var Bs=Ts==="[object Array]";if(!Bs){if(typeof ca!="object"||typeof ga!="object")return!1;var Ps=ca.constructor,Ls=ga.constructor;if(Ps!==Ls&&!(isFunction(Ps)&&Ps instanceof Ps&&isFunction(Ls)&&Ls instanceof Ls)&&"constructor"in ca&&"constructor"in ga)return!1}if(_s===0)return!1;_s<0&&(_s=-1),Ss=Ss||[],Ms=Ms||[];for(var Rs=Ss.length;Rs--;)if(Ss[Rs]===ca)return Ms[Rs]===ga;if(Ss.push(ca),Ms.push(ga),Bs){if(Rs=ca.length,Rs!==ga.length)return!1;for(;Rs--;)if(!eq(ca[Rs],ga[Rs],_s-1,Ss,Ms))return!1}else{var Ds=Object.keys(ca),$s;if(Rs=Ds.length,Object.keys(ga).length!==Rs)return!1;for(;Rs--;)if($s=Ds[Rs],!(hasProp(ga,$s)&&eq(ca[$s],ga[$s],_s-1,Ss,Ms)))return!1}return Ss.pop(),Ms.pop(),!0}function unwrap(ca){return isObservableArray(ca)?ca.slice():isES6Map(ca)||isObservableMap(ca)||isES6Set(ca)||isObservableSet(ca)?Array.from(ca.entries()):ca}function makeIterable(ca){return ca[Symbol.iterator]=getSelf,ca}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(ca){var ga=getGlobal();typeof ga[ca]=="undefined"&&die("MobX requires global '"+ca+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(ca){ca()}function observerBatching(ca){ca||(ca=defaultNoopBatch),configure({reactionScheduler:ca})}function printDebugValue(ca){return getDependencyTree(ca)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(ca){var ga={reaction:ca,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return ga}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(ca){var ga=new Map,_s=1,Ss=new ca(function(Cs){var Ts=ga.get(Cs);Ts&&(Ts.reaction.dispose(),ga.delete(Cs))});return{addReactionToTrack:function(Ms,Cs,Ts){var Bs=_s++;return Ss.register(Ts,Bs,Ms),Ms.current=createTrackingData(Cs),Ms.current.finalizationRegistryCleanupToken=Bs,ga.set(Bs,Ms.current),Ms.current},recordReactionAsCommitted:function(Ms){Ss.unregister(Ms),Ms.current&&Ms.current.finalizationRegistryCleanupToken&&ga.delete(Ms.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(ca){var ga=typeof Symbol=="function"&&Symbol.iterator,_s=ga&&ca[ga],Ss=0;if(_s)return _s.call(ca);if(ca&&typeof ca.length=="number")return{next:function(){return ca&&Ss>=ca.length&&(ca=void 0),{value:ca&&ca[Ss++],done:!ca}}};throw new TypeError(ga?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var ca=new Set,ga;function _s(){ga&&(clearTimeout(ga),Bs())}function Ss(){var Ps,Ls;if(ca.size>0){try{for(var Rs=__values(ca),Ds=Rs.next();!Ds.done;Ds=Rs.next()){var $s=Ds.value,Fs=$s.current;Fs&&(Fs.reaction.dispose(),$s.current=null)}}catch(Gs){Ps={error:Gs}}finally{try{Ds&&!Ds.done&&(Ls=Rs.return)&&Ls.call(Rs)}finally{if(Ps)throw Ps.error}}ca.clear()}ga&&(clearTimeout(ga),ga=void 0)}function Ms(){ga===void 0&&(ga=setTimeout(Bs,CLEANUP_TIMER_LOOP_MILLIS))}function Cs(Ps){ca.add(Ps),Ms()}function Ts(Ps){ca.delete(Ps)}function Bs(){ga=void 0;var Ps=Date.now();ca.forEach(function(Ls){var Rs=Ls.current;Rs&&Ps>=Rs.cleanAt&&(Rs.reaction.dispose(),Ls.current=null,ca.delete(Ls))}),ca.size>0&&Ms()}return{addReactionToTrack:function(Ps,Ls,Rs){return Ps.current=createTrackingData(Ls),Cs(Ps),Ps.current},recordReactionAsCommitted:Ts,forceCleanupTimerToRunNowForTests:_s,resetCleanupScheduleForTests:Ss}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(ca,ga){var _s=typeof Symbol=="function"&&ca[Symbol.iterator];if(!_s)return ca;var Ss=_s.call(ca),Ms,Cs=[],Ts;try{for(;(ga===void 0||ga-- >0)&&!(Ms=Ss.next()).done;)Cs.push(Ms.value)}catch(Bs){Ts={error:Bs}}finally{try{Ms&&!Ms.done&&(_s=Ss.return)&&_s.call(Ss)}finally{if(Ts)throw Ts.error}}return Cs};function observerComponentNameFor(ca){return"observer"+ca}var ObjectToBeRetainedByReact=function(){function ca(){}return ca}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(ca,ga){ga===void 0&&(ga="observed");var _s=__read(React.useState(objectToBeRetainedByReactFactory),1),Ss=_s[0],Ms=__read(React.useState(),2),Cs=Ms[1],Ts=function(){return Cs([])},Bs=React.useRef(null);if(!Bs.current)var Ps=new Reaction(observerComponentNameFor(ga),function(){Ls.mounted?Ts():Ls.changedBeforeMount=!0}),Ls=addReactionToTrack(Bs,Ps,Ss);var Rs=Bs.current.reaction;React.useDebugValue(Rs,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Bs),Bs.current?(Bs.current.mounted=!0,Bs.current.changedBeforeMount&&(Bs.current.changedBeforeMount=!1,Ts())):(Bs.current={reaction:new Reaction(observerComponentNameFor(ga),function(){Ts()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Ts()),function(){Bs.current.reaction.dispose(),Bs.current=null}},[]);var Ds,$s;if(Rs.track(function(){try{Ds=ca()}catch(Fs){$s=Fs}}),$s)throw $s;return Ds}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(ca){for(var ga,_s=1,Ss=arguments.length;_s<Ss;_s++){ga=arguments[_s];for(var Ms in ga)Object.prototype.hasOwnProperty.call(ga,Ms)&&(ca[Ms]=ga[Ms])}return ca},__assign.apply(this,arguments)};function observer$1(ca,ga){var _s=__assign({forwardRef:!1},ga),Ss=ca.displayName||ca.name,Ms=function(Ts,Bs){return useObserver(function(){return ca(Ts,Bs)},Ss)};Ms.displayName=Ss,ca.contextTypes&&(Ms.contextTypes=ca.contextTypes);var Cs;return _s.forwardRef?Cs=react$1.exports.memo(react$1.exports.forwardRef(Ms)):Cs=react$1.exports.memo(Ms),copyStaticProperties(ca,Cs),Cs.displayName=Ss,Cs}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0};function copyStaticProperties(ca,ga){Object.keys(ca).forEach(function(_s){hoistBlackList[_s]||Object.defineProperty(ga,_s,Object.getOwnPropertyDescriptor(ca,_s))})}function ObserverComponent(ca){var ga=ca.children,_s=ca.render,Ss=ga||_s;return typeof Ss!="function"?null:useObserver(Ss)}ObserverComponent.displayName="Observer";globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(ca){if(typeof Symbol=="function")return Symbol(ca);var ga="__$mobx-react "+ca+" ("+symbolId+")";return symbolId++,ga}var createdSymbols={};function newSymbol(ca){return createdSymbols[ca]||(createdSymbols[ca]=createSymbol(ca)),createdSymbols[ca]}function shallowEqual(ca,ga){if(is(ca,ga))return!0;if(typeof ca!="object"||ca===null||typeof ga!="object"||ga===null)return!1;var _s=Object.keys(ca),Ss=Object.keys(ga);if(_s.length!==Ss.length)return!1;for(var Ms=0;Ms<_s.length;Ms++)if(!Object.hasOwnProperty.call(ga,_s[Ms])||!is(ca[_s[Ms]],ga[_s[Ms]]))return!1;return!0}function is(ca,ga){return ca===ga?ca!==0||1/ca==1/ga:ca!==ca&&ga!==ga}function setHiddenProp(ca,ga,_s){Object.hasOwnProperty.call(ca,ga)?ca[ga]=_s:Object.defineProperty(ca,ga,{enumerable:!1,configurable:!0,writable:!0,value:_s})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(ca,ga){var _s=ca[mobxMixins]=ca[mobxMixins]||{},Ss=_s[ga]=_s[ga]||{};return Ss.locks=Ss.locks||0,Ss.methods=Ss.methods||[],Ss}function wrapper(ca,ga){for(var _s=this,Ss=arguments.length,Ms=new Array(Ss>2?Ss-2:0),Cs=2;Cs<Ss;Cs++)Ms[Cs-2]=arguments[Cs];ga.locks++;try{var Ts;return ca!=null&&(Ts=ca.apply(this,Ms)),Ts}finally{ga.locks--,ga.locks===0&&ga.methods.forEach(function(Bs){Bs.apply(_s,Ms)})}}function wrapFunction(ca,ga){var _s=function(){for(var Ms=arguments.length,Cs=new Array(Ms),Ts=0;Ts<Ms;Ts++)Cs[Ts]=arguments[Ts];wrapper.call.apply(wrapper,[this,ca,ga].concat(Cs))};return _s}function patch(ca,ga,_s){var Ss=getMixins(ca,ga);Ss.methods.indexOf(_s)<0&&Ss.methods.push(_s);var Ms=Object.getOwnPropertyDescriptor(ca,ga);if(!(Ms&&Ms[mobxPatchedDefinition])){var Cs=ca[ga],Ts=createDefinition(ca,ga,Ms?Ms.enumerable:void 0,Ss,Cs);Object.defineProperty(ca,ga,Ts)}}function createDefinition(ca,ga,_s,Ss,Ms){var Cs,Ts=wrapFunction(Ms,Ss);return Cs={},Cs[mobxPatchedDefinition]=!0,Cs.get=function(){return Ts},Cs.set=function(Ps){if(this===ca)Ts=wrapFunction(Ps,Ss);else{var Ls=createDefinition(this,ga,_s,Ss,Ps);Object.defineProperty(this,ga,Ls)}},Cs.configurable=!0,Cs.enumerable=_s,Cs}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(ca){var ga=ca.prototype;if(ca[mobxObserverProperty]){var _s=getDisplayName(ga);console.warn("The provided component class ("+_s+`) 
                has already been declared as an observer component.`)}else ca[mobxObserverProperty]=!0;if(ga.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(ca.__proto__!==react$1.exports.PureComponent){if(!ga.shouldComponentUpdate)ga.shouldComponentUpdate=observerSCU;else if(ga.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(ga,"props"),makeObservableProp(ga,"state");var Ss=ga.render;if(typeof Ss!="function"){var Ms=getDisplayName(ga);throw new Error("[mobx-react] class component ("+Ms+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return ga.render=function(){return makeComponentReactive.call(this,Ss)},patch(ga,"componentWillUnmount",function(){var Cs;if((Cs=this.render[mobxAdminProperty])==null||Cs.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty]){var Ts=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Ts+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),ca}function getDisplayName(ca){return ca.displayName||ca.name||ca.constructor&&(ca.constructor.displayName||ca.constructor.name)||"<component>"}function makeComponentReactive(ca){var ga=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var _s=getDisplayName(this),Ss=ca.bind(this),Ms=!1,Cs=new Reaction(_s+".render()",function(){if(!Ms&&(Ms=!0,ga[mobxIsUnmounted]!==!0)){var Bs=!0;try{setHiddenProp(ga,isForcingUpdateKey,!0),ga[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call(ga),Bs=!1}finally{setHiddenProp(ga,isForcingUpdateKey,!1),Bs&&Cs.dispose()}}});Cs.reactComponent=this,Ts[mobxAdminProperty]=Cs,this.render=Ts;function Ts(){Ms=!1;var Bs=void 0,Ps=void 0;if(Cs.track(function(){try{Ps=allowStateChanges(!1,Ss)}catch(Ls){Bs=Ls}}),Bs)throw Bs;return Ps}return Ts.call(this)}function observerSCU(ca,ga){return this.state!==ga?!0:!shallowEqual(this.props,ca)}function makeObservableProp(ca,ga){var _s=newSymbol("reactProp_"+ga+"_valueHolder"),Ss=newSymbol("reactProp_"+ga+"_atomHolder");function Ms(){return this[Ss]||setHiddenProp(this,Ss,createAtom("reactive "+ga)),this[Ss]}Object.defineProperty(ca,ga,{configurable:!0,enumerable:!0,get:function(){var Ts=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Ts=allowStateReadsStart(!0)),Ms.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Ts),this[_s]},set:function(Ts){!this[isForcingUpdateKey]&&!shallowEqual(this[_s],Ts)?(setHiddenProp(this,_s,Ts),setHiddenProp(this,skipRenderKey,!0),Ms.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,_s,Ts)}})}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(ca){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(ca){return null}).$$typeof;function observer(ca){if(ca.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),ReactMemoSymbol&&ca.$$typeof===ReactMemoSymbol)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(ReactForwardRefSymbol&&ca.$$typeof===ReactForwardRefSymbol){var ga=ca.render;if(typeof ga!="function")throw new Error("render property of ForwardRef was not a function");return react$1.exports.forwardRef(function(){var Ss=arguments;return react$1.exports.createElement(ObserverComponent,null,function(){return ga.apply(void 0,Ss)})})}return typeof ca=="function"&&(!ca.prototype||!ca.prototype.render)&&!ca.isReactClass&&!Object.prototype.isPrototypeOf.call(react$1.exports.Component,ca)?observer$1(ca):makeClassComponentObserver(ca)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");var Easing={Linear:{None:function(ca){return ca}},Quadratic:{In:function(ca){return ca*ca},Out:function(ca){return ca*(2-ca)},InOut:function(ca){return(ca*=2)<1?.5*ca*ca:-.5*(--ca*(ca-2)-1)}},Cubic:{In:function(ca){return ca*ca*ca},Out:function(ca){return--ca*ca*ca+1},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca:.5*((ca-=2)*ca*ca+2)}},Quartic:{In:function(ca){return ca*ca*ca*ca},Out:function(ca){return 1- --ca*ca*ca*ca},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca*ca:-.5*((ca-=2)*ca*ca*ca-2)}},Quintic:{In:function(ca){return ca*ca*ca*ca*ca},Out:function(ca){return--ca*ca*ca*ca*ca+1},InOut:function(ca){return(ca*=2)<1?.5*ca*ca*ca*ca*ca:.5*((ca-=2)*ca*ca*ca*ca+2)}},Sinusoidal:{In:function(ca){return 1-Math.cos(ca*Math.PI/2)},Out:function(ca){return Math.sin(ca*Math.PI/2)},InOut:function(ca){return .5*(1-Math.cos(Math.PI*ca))}},Exponential:{In:function(ca){return ca===0?0:Math.pow(1024,ca-1)},Out:function(ca){return ca===1?1:1-Math.pow(2,-10*ca)},InOut:function(ca){return ca===0?0:ca===1?1:(ca*=2)<1?.5*Math.pow(1024,ca-1):.5*(-Math.pow(2,-10*(ca-1))+2)}},Circular:{In:function(ca){return 1-Math.sqrt(1-ca*ca)},Out:function(ca){return Math.sqrt(1- --ca*ca)},InOut:function(ca){return(ca*=2)<1?-.5*(Math.sqrt(1-ca*ca)-1):.5*(Math.sqrt(1-(ca-=2)*ca)+1)}},Elastic:{In:function(ca){return ca===0?0:ca===1?1:-Math.pow(2,10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI)},Out:function(ca){return ca===0?0:ca===1?1:Math.pow(2,-10*ca)*Math.sin((ca-.1)*5*Math.PI)+1},InOut:function(ca){return ca===0?0:ca===1?1:(ca*=2,ca<1?-.5*Math.pow(2,10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI):.5*Math.pow(2,-10*(ca-1))*Math.sin((ca-1.1)*5*Math.PI)+1)}},Back:{In:function(ca){var ga=1.70158;return ca*ca*((ga+1)*ca-ga)},Out:function(ca){var ga=1.70158;return--ca*ca*((ga+1)*ca+ga)+1},InOut:function(ca){var ga=1.70158*1.525;return(ca*=2)<1?.5*(ca*ca*((ga+1)*ca-ga)):.5*((ca-=2)*ca*((ga+1)*ca+ga)+2)}},Bounce:{In:function(ca){return 1-Easing.Bounce.Out(1-ca)},Out:function(ca){return ca<1/2.75?7.5625*ca*ca:ca<2/2.75?7.5625*(ca-=1.5/2.75)*ca+.75:ca<2.5/2.75?7.5625*(ca-=2.25/2.75)*ca+.9375:7.5625*(ca-=2.625/2.75)*ca+.984375},InOut:function(ca){return ca<.5?Easing.Bounce.In(ca*2)*.5:Easing.Bounce.Out(ca*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var ca=process.hrtime();return ca[0]*1e3+ca[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function ca(){this._tweens={},this._tweensAddedDuringUpdate={}}return ca.prototype.getAll=function(){var ga=this;return Object.keys(this._tweens).map(function(_s){return ga._tweens[_s]})},ca.prototype.removeAll=function(){this._tweens={}},ca.prototype.add=function(ga){this._tweens[ga.getId()]=ga,this._tweensAddedDuringUpdate[ga.getId()]=ga},ca.prototype.remove=function(ga){delete this._tweens[ga.getId()],delete this._tweensAddedDuringUpdate[ga.getId()]},ca.prototype.update=function(ga,_s){ga===void 0&&(ga=now$1()),_s===void 0&&(_s=!1);var Ss=Object.keys(this._tweens);if(Ss.length===0)return!1;for(;Ss.length>0;){this._tweensAddedDuringUpdate={};for(var Ms=0;Ms<Ss.length;Ms++){var Cs=this._tweens[Ss[Ms]],Ts=!_s;Cs&&Cs.update(ga,Ts)===!1&&!_s&&delete this._tweens[Ss[Ms]]}Ss=Object.keys(this._tweensAddedDuringUpdate)}return!0},ca}(),Interpolation={Linear:function(ca,ga){var _s=ca.length-1,Ss=_s*ga,Ms=Math.floor(Ss),Cs=Interpolation.Utils.Linear;return ga<0?Cs(ca[0],ca[1],Ss):ga>1?Cs(ca[_s],ca[_s-1],_s-Ss):Cs(ca[Ms],ca[Ms+1>_s?_s:Ms+1],Ss-Ms)},Bezier:function(ca,ga){for(var _s=0,Ss=ca.length-1,Ms=Math.pow,Cs=Interpolation.Utils.Bernstein,Ts=0;Ts<=Ss;Ts++)_s+=Ms(1-ga,Ss-Ts)*Ms(ga,Ts)*ca[Ts]*Cs(Ss,Ts);return _s},CatmullRom:function(ca,ga){var _s=ca.length-1,Ss=_s*ga,Ms=Math.floor(Ss),Cs=Interpolation.Utils.CatmullRom;return ca[0]===ca[_s]?(ga<0&&(Ms=Math.floor(Ss=_s*(1+ga))),Cs(ca[(Ms-1+_s)%_s],ca[Ms],ca[(Ms+1)%_s],ca[(Ms+2)%_s],Ss-Ms)):ga<0?ca[0]-(Cs(ca[0],ca[0],ca[1],ca[1],-Ss)-ca[0]):ga>1?ca[_s]-(Cs(ca[_s],ca[_s],ca[_s-1],ca[_s-1],Ss-_s)-ca[_s]):Cs(ca[Ms?Ms-1:0],ca[Ms],ca[_s<Ms+1?_s:Ms+1],ca[_s<Ms+2?_s:Ms+2],Ss-Ms)},Utils:{Linear:function(ca,ga,_s){return(ga-ca)*_s+ca},Bernstein:function(ca,ga){var _s=Interpolation.Utils.Factorial;return _s(ca)/_s(ga)/_s(ca-ga)},Factorial:function(){var ca=[1];return function(ga){var _s=1;if(ca[ga])return ca[ga];for(var Ss=ga;Ss>1;Ss--)_s*=Ss;return ca[ga]=_s,_s}}(),CatmullRom:function(ca,ga,_s,Ss,Ms){var Cs=(_s-ca)*.5,Ts=(Ss-ga)*.5,Bs=Ms*Ms,Ps=Ms*Bs;return(2*ga-2*_s+Cs+Ts)*Ps+(-3*ga+3*_s-2*Cs-Ts)*Bs+Cs*Ms+ga}}},Sequence=function(){function ca(){}return ca.nextId=function(){return ca._nextId++},ca._nextId=0,ca}(),mainGroup=new Group,Tween=function(){function ca(ga,_s){_s===void 0&&(_s=mainGroup),this._object=ga,this._group=_s,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return ca.prototype.getId=function(){return this._id},ca.prototype.isPlaying=function(){return this._isPlaying},ca.prototype.isPaused=function(){return this._isPaused},ca.prototype.to=function(ga,_s){return this._valuesEnd=Object.create(ga),_s!==void 0&&(this._duration=_s),this},ca.prototype.duration=function(ga){return this._duration=ga,this},ca.prototype.start=function(ga){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var _s in this._valuesStartRepeat)this._swapEndStartRepeatValues(_s),this._valuesStart[_s]=this._valuesStartRepeat[_s]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=ga!==void 0?typeof ga=="string"?now$1()+parseFloat(ga):ga:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},ca.prototype._setupProperties=function(ga,_s,Ss,Ms){for(var Cs in Ss){var Ts=ga[Cs],Bs=Array.isArray(Ts),Ps=Bs?"array":typeof Ts,Ls=!Bs&&Array.isArray(Ss[Cs]);if(!(Ps==="undefined"||Ps==="function")){if(Ls){var Rs=Ss[Cs];if(Rs.length===0)continue;Rs=Rs.map(this._handleRelativeValue.bind(this,Ts)),Ss[Cs]=[Ts].concat(Rs)}if((Ps==="object"||Bs)&&Ts&&!Ls){_s[Cs]=Bs?[]:{};for(var Ds in Ts)_s[Cs][Ds]=Ts[Ds];Ms[Cs]=Bs?[]:{},this._setupProperties(Ts,_s[Cs],Ss[Cs],Ms[Cs])}else typeof _s[Cs]=="undefined"&&(_s[Cs]=Ts),Bs||(_s[Cs]*=1),Ls?Ms[Cs]=Ss[Cs].slice().reverse():Ms[Cs]=_s[Cs]||0}}},ca.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},ca.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},ca.prototype.pause=function(ga){return ga===void 0&&(ga=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=ga,this._group&&this._group.remove(this),this)},ca.prototype.resume=function(ga){return ga===void 0&&(ga=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=ga-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},ca.prototype.stopChainedTweens=function(){for(var ga=0,_s=this._chainedTweens.length;ga<_s;ga++)this._chainedTweens[ga].stop();return this},ca.prototype.group=function(ga){return this._group=ga,this},ca.prototype.delay=function(ga){return this._delayTime=ga,this},ca.prototype.repeat=function(ga){return this._initialRepeat=ga,this._repeat=ga,this},ca.prototype.repeatDelay=function(ga){return this._repeatDelayTime=ga,this},ca.prototype.yoyo=function(ga){return this._yoyo=ga,this},ca.prototype.easing=function(ga){return this._easingFunction=ga,this},ca.prototype.interpolation=function(ga){return this._interpolationFunction=ga,this},ca.prototype.chain=function(){for(var ga=[],_s=0;_s<arguments.length;_s++)ga[_s]=arguments[_s];return this._chainedTweens=ga,this},ca.prototype.onStart=function(ga){return this._onStartCallback=ga,this},ca.prototype.onUpdate=function(ga){return this._onUpdateCallback=ga,this},ca.prototype.onRepeat=function(ga){return this._onRepeatCallback=ga,this},ca.prototype.onComplete=function(ga){return this._onCompleteCallback=ga,this},ca.prototype.onStop=function(ga){return this._onStopCallback=ga,this},ca.prototype.update=function(ga,_s){if(ga===void 0&&(ga=now$1()),_s===void 0&&(_s=!0),this._isPaused)return!0;var Ss,Ms,Cs=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(ga>Cs)return!1;_s&&this.start(ga)}if(this._goToEnd=!1,ga<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Ms=(ga-this._startTime)/this._duration,Ms=this._duration===0||Ms>1?1:Ms;var Ts=this._easingFunction(Ms);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Ts),this._onUpdateCallback&&this._onUpdateCallback(this._object,Ms),Ms===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ss in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ss]=="string"&&(this._valuesStartRepeat[Ss]=this._valuesStartRepeat[Ss]+parseFloat(this._valuesEnd[Ss])),this._yoyo&&this._swapEndStartRepeatValues(Ss),this._valuesStart[Ss]=this._valuesStartRepeat[Ss];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=ga+this._repeatDelayTime:this._startTime=ga+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Bs=0,Ps=this._chainedTweens.length;Bs<Ps;Bs++)this._chainedTweens[Bs].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},ca.prototype._updateProperties=function(ga,_s,Ss,Ms){for(var Cs in Ss)if(_s[Cs]!==void 0){var Ts=_s[Cs]||0,Bs=Ss[Cs],Ps=Array.isArray(ga[Cs]),Ls=Array.isArray(Bs),Rs=!Ps&&Ls;Rs?ga[Cs]=this._interpolationFunction(Bs,Ms):typeof Bs=="object"&&Bs?this._updateProperties(ga[Cs],Ts,Bs,Ms):(Bs=this._handleRelativeValue(Ts,Bs),typeof Bs=="number"&&(ga[Cs]=Ts+(Bs-Ts)*Ms))}},ca.prototype._handleRelativeValue=function(ga,_s){return typeof _s!="string"?_s:_s.charAt(0)==="+"||_s.charAt(0)==="-"?ga+parseFloat(_s):parseFloat(_s)},ca.prototype._swapEndStartRepeatValues=function(ga){var _s=this._valuesStartRepeat[ga],Ss=this._valuesEnd[ga];typeof Ss=="string"?this._valuesStartRepeat[ga]=this._valuesStartRepeat[ga]+parseFloat(Ss):this._valuesStartRepeat[ga]=this._valuesEnd[ga],this._valuesEnd[ga]=_s},ca}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update},line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t=tslib.exports;function e(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(_s){if(_s!=="default"){var Ss=Object.getOwnPropertyDescriptor(ca,_s);Object.defineProperty(ga,_s,Ss.get?Ss:{enumerable:!0,get:function(){return ca[_s]}})}}),ga.default=ca,Object.freeze(ga)}var n=e(require$$1),i=function(ca){function ga(){var _s=ca.call(this)||this;return _s.type="LineSegmentsGeometry",_s.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),_s.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),_s.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),_s}return t.__extends(ga,ca),ga.prototype.applyMatrix4=function(_s){var Ss=this.attributes.instanceStart,Ms=this.attributes.instanceEnd;return Ss!==void 0&&(Ss.applyMatrix4(_s),Ms.applyMatrix4(_s),Ss.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},ga.prototype.setPositions=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Ms,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},ga.prototype.setColors=function(_s){var Ss;Ss=_s instanceof Float32Array?_s:Array.isArray(_s)?new Float32Array(_s):new Float32Array;var Ms=new n.InstancedInterleavedBuffer(Ss,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Ms,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Ms,3,3)),this},ga.prototype.fromWireframeGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},ga.prototype.fromEdgesGeometry=function(_s){return this.setPositions(_s.attributes.position.array),this},ga.prototype.fromMesh=function(_s){return this.fromWireframeGeometry(new n.WireframeGeometry(_s.geometry)),this},ga.prototype.fromLineSegments=function(_s){var Ss=_s.geometry;if(Ss instanceof n.Geometry){var Ms=new n.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},ga.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=new n.Box3;this.boundingBox.setFromBufferAttribute(_s),Ms.setFromBufferAttribute(Ss),this.boundingBox.union(Ms)}},ga.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var _s=this.attributes.instanceStart,Ss=this.attributes.instanceEnd;if(_s!==void 0&&Ss!==void 0){var Ms=this.boundingSphere.center;this.boundingBox.getCenter(Ms);for(var Cs=0,Ts=new n.Vector3,Bs=0,Ps=_s.count;Bs<Ps;Bs++)Ts.fromBufferAttribute(_s,Bs),Cs=Math.max(Cs,Ms.distanceToSquared(Ts)),Ts.fromBufferAttribute(Ss,Bs),Cs=Math.max(Cs,Ms.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(Cs),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},ga.prototype.toJSON=function(){},ga}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(ca){function ga(_s){var Ss=ca.call(this,{uniforms:n.UniformsUtils.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,clipping:!0})||this;return Ss.type="LineMaterial",Ss.dashed=!1,Object.defineProperties(Ss,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Ms){this.uniforms.diffuse.value=Ms}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Ms){this.uniforms.linewidth.value=Ms}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Ms){this.uniforms.dashScale.value=Ms}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Ms){this.uniforms.dashSize.value=Ms}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Ms){this.uniforms.gapSize.value=Ms}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Ms){this.uniforms.opacity.value=Ms}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Ms){this.uniforms.resolution.value.copy(Ms)}}}),Ss.setValues(_s),Ss}return t.__extends(ga,ca),ga}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(ca){function ga(_s,Ss){var Ms=ca.call(this)||this;return Ms.type="LineSegments2",Ms.geometry=_s!==void 0?_s:new i,Ms.material=Ss!==void 0?Ss:new o({color:16777215*Math.random()}),Ms}return t.__extends(ga,ca),ga.prototype.computeLineDistances=function(){for(var _s=this.geometry,Ss=_s.attributes.instanceStart,Ms=_s.attributes.instanceEnd,Cs=new Float32Array(2*Ss.count),Ts=new n.Vector3,Bs=new n.Vector3,Ps=0,Ls=0,Rs=Ss.count;Ps<Rs;Ps++,Ls+=2)Ts.fromBufferAttribute(Ss,Ps),Bs.fromBufferAttribute(Ms,Ps),Cs[Ls]=Ls===0?0:Cs[Ls-1],Cs[Ls+1]=Cs[Ls]+Ts.distanceTo(Bs);var Ds=new n.InstancedInterleavedBuffer(Cs,2,1);return _s.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Ds,1,0)),_s.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Ds,1,1)),this},ga.prototype.raycast=function(_s,Ss){_s.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Ms=_s.ray,Cs=_s.camera,Ts=Cs.projectionMatrix,Bs=this.geometry,Ps=this.material,Ls=Ps.resolution,Rs=Ps.linewidth,Ds=Bs.attributes.instanceStart,$s=Bs.attributes.instanceEnd,Fs=new n.Vector4,Gs=new n.Vector4,Vs=new n.Vector4,ks=new n.Vector3,Os=new n.Matrix4,Ns=new n.Line3,Us=new n.Vector3;Ms.at(1,Vs),Vs.w=1,Vs.applyMatrix4(Cs.matrixWorldInverse),Vs.applyMatrix4(Ts),Vs.multiplyScalar(1/Vs.w),Vs.x*=Ls.x/2,Vs.y*=Ls.y/2,Vs.z=0,ks.copy(Vs);var Hs=this.matrixWorld;Os.multiplyMatrices(Cs.matrixWorldInverse,Hs);for(var zs=0,js=Ds.count;zs<js;zs++){Fs.fromBufferAttribute(Ds,zs),Gs.fromBufferAttribute($s,zs),Fs.w=1,Gs.w=1,Fs.applyMatrix4(Os),Gs.applyMatrix4(Os),Fs.applyMatrix4(Ts),Gs.applyMatrix4(Ts),Fs.multiplyScalar(1/Fs.w),Gs.multiplyScalar(1/Gs.w);var Ws=Fs.z<-1&&Gs.z<-1,Qs=Fs.z>1&&Gs.z>1;if(!Ws&&!Qs){Fs.x*=Ls.x/2,Fs.y*=Ls.y/2,Gs.x*=Ls.x/2,Gs.y*=Ls.y/2,Ns.start.copy(Fs),Ns.start.z=0,Ns.end.copy(Gs),Ns.end.z=0;var qs=Ns.closestPointToPointParameter(ks,!0);Ns.at(qs,Us);var tu=n.MathUtils.lerp(Fs.z,Gs.z,qs),Ys=tu>=-1&&tu<=1,Ks=ks.distanceTo(Us)<.5*Rs;if(Ys&&Ks){Ns.start.fromBufferAttribute(Ds,zs),Ns.end.fromBufferAttribute($s,zs),Ns.start.applyMatrix4(Hs),Ns.end.applyMatrix4(Hs);var Js=new n.Vector3,eu=new n.Vector3;Ms.distanceSqToSegment(Ns.start,Ns.end,eu,Js),Ss.push({point:eu,pointOnLine:Js,distance:Ms.origin.distanceTo(eu),object:this,faceIndex:zs})}}}},ga}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(ca){function ga(_s,Ss){var Ms=ca.call(this,_s,Ss)||this;return Ms.type="Line2",Ms}return t.__extends(ga,ca),ga}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(ca){function ga(){var _s=ca.call(this)||this;return _s.type="LineGeometry",_s}return t.__extends(ga,ca),ga.prototype.setPositions=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return ca.prototype.setPositions.call(this,Ms),this},ga.prototype.setColors=function(_s){for(var Ss=_s.length-3,Ms=new Float32Array(2*Ss),Cs=0;Cs<Ss;Cs+=3)Ms[2*Cs]=_s[Cs],Ms[2*Cs+1]=_s[Cs+1],Ms[2*Cs+2]=_s[Cs+2],Ms[2*Cs+3]=_s[Cs+3],Ms[2*Cs+4]=_s[Cs+4],Ms[2*Cs+5]=_s[Cs+5];return ca.prototype.setColors.call(this,Ms),this},ga.prototype.fromLine=function(_s){var Ss=_s.geometry;if(Ss instanceof n.Geometry){var Ms=new n.BufferGeometry().fromGeometry(Ss);this.setPositions(Ms.attributes.position.array)}else Ss instanceof n.BufferGeometry&&this.setPositions(Ss.attributes.position.array);return this},ga.prototype.copy=function(){return this},ga}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l=function(ca){function ga(_s,Ss){_s===void 0&&(_s=new n.Vector3),Ss===void 0&&(Ss=new n.Vector3);var Ms=ca.call(this)||this;Ms.type="FiveLine",Ms.needsRender=!0;var Cs=new u,Ts=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Ms.line=new s(Cs,Ts);var Bs=new n.BufferGeometry,Ps=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Ms.points=new n.Points(Bs,Ps),Ms.points.renderOrder=11,Ms.points.frustumCulled=!1,Ms.setPoints(_s,Ss),Ms.add(Ms.line,Ms.points),Ms}return t.__extends(ga,ca),ga.prototype.setPoints=function(_s,Ss){var Ms=[].concat(_s.toArray(),Ss.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Ms),3)),this.line.geometry.setPositions(Ms),this.line.computeLineDistances(),this.needsRender=!0},ga.prototype.getPoints=function(){var _s=this.points.geometry.attributes.position.array;return[new n.Vector3(_s[0],_s[1],_s[2]),new n.Vector3(_s[3],_s[4],_s[5])]},ga.prototype.setMaterial=function(_s){var Ss=this.line.material;for(var Ms in _s)if(_s.hasOwnProperty(Ms)){var Cs=_s[Ms];Ms==="dashed"?(Ss.dashed=Cs,Cs?Ss.defines.USE_DASH="":delete Ss.defines.USE_DASH,Ss.needsUpdate=!0):Ss[Ms]=_s[Ms]}this.needsRender=!0},ga.prototype.setResolution=function(_s,Ss){var Ms=this.line.material.resolution;Ms.x===_s&&Ms.y===Ss||(Ms.set(_s,Ss),this.needsRender=!0)},ga}(n.Object3D);Object.assign(l.prototype,{isFiveLine:!0}),Line=line.Line=l,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;var CSS3DObject=function(ca){Object3D.call(this),this.element=ca,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(ga){ga.element instanceof Element&&ga.element.parentNode!==null&&ga.element.parentNode.removeChild(ga.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(ca){CSS3DObject.call(this,ca)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var ca=this,ga,_s,Ss,Ms,Cs=new Matrix4,Ts={camera:{fov:0,style:""},objects:new WeakMap},Bs=document.createElement("div");Bs.style.overflow="hidden",this.domElement=Bs;var Ps=document.createElement("div");Ps.style.WebkitTransformStyle="preserve-3d",Ps.style.transformStyle="preserve-3d",Ps.style.pointerEvents="none",Bs.appendChild(Ps);var Ls=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:ga,height:_s}},this.setSize=function(Os,Ns){ga=Os,_s=Ns,Ss=ga/2,Ms=_s/2,Bs.style.width=Os+"px",Bs.style.height=Ns+"px",Ps.style.width=Os+"px",Ps.style.height=Ns+"px"};function Rs(Os){return Math.abs(Os)<1e-10?0:Os}function Ds(Os){var Ns=Os.elements;return"matrix3d("+Rs(Ns[0])+","+Rs(-Ns[1])+","+Rs(Ns[2])+","+Rs(Ns[3])+","+Rs(Ns[4])+","+Rs(-Ns[5])+","+Rs(Ns[6])+","+Rs(Ns[7])+","+Rs(Ns[8])+","+Rs(-Ns[9])+","+Rs(Ns[10])+","+Rs(Ns[11])+","+Rs(Ns[12])+","+Rs(-Ns[13])+","+Rs(Ns[14])+","+Rs(Ns[15])+")"}function $s(Os,Ns){var Us=Os.elements,Hs="matrix3d("+Rs(Us[0])+","+Rs(Us[1])+","+Rs(Us[2])+","+Rs(Us[3])+","+Rs(-Us[4])+","+Rs(-Us[5])+","+Rs(-Us[6])+","+Rs(-Us[7])+","+Rs(Us[8])+","+Rs(Us[9])+","+Rs(Us[10])+","+Rs(Us[11])+","+Rs(Us[12])+","+Rs(Us[13])+","+Rs(Us[14])+","+Rs(Us[15])+")";return Ls?"translate(-50%,-50%)translate("+Ss+"px,"+Ms+"px)"+Ns+Hs:"translate(-50%,-50%)"+Hs}function Fs(Os,Ns,Us,Hs){if(Os instanceof CSS3DObject){Os.onBeforeRender(ca,Ns,Us);var zs;Os instanceof CSS3DSprite?(Cs.copy(Us.matrixWorldInverse),Cs.transpose(),Cs.copyPosition(Os.matrixWorld),Cs.scale(Os.scale),Cs.elements[3]=0,Cs.elements[7]=0,Cs.elements[11]=0,Cs.elements[15]=1,zs=$s(Cs,Hs)):zs=$s(Os.matrixWorld,Hs);var js=Os.element,Ws=Ts.objects.get(Os);if(Ws===void 0||Ws.style!==zs){js.style.WebkitTransform=zs,js.style.transform=zs;var Qs={style:zs};Ls&&(Qs.distanceToCameraSquared=Gs(Us,Os)),Ts.objects.set(Os,Qs)}js.style.display=Os.visible?"":"none",js.parentNode!==Ps&&Ps.appendChild(js),Os.onAfterRender(ca,Ns,Us)}for(var qs=0,tu=Os.children.length;qs<tu;qs++)Fs(Os.children[qs],Ns,Us,Hs)}var Gs=function(){var Os=new Vector3,Ns=new Vector3;return function(Us,Hs){return Os.setFromMatrixPosition(Us.matrixWorld),Ns.setFromMatrixPosition(Hs.matrixWorld),Os.distanceToSquared(Ns)}}();function Vs(Os){var Ns=[];return Os.traverse(function(Us){Us instanceof CSS3DObject&&Ns.push(Us)}),Ns}function ks(Os){for(var Ns=Vs(Os).sort(function(js,Ws){var Qs=Ts.objects.get(js).distanceToCameraSquared,qs=Ts.objects.get(Ws).distanceToCameraSquared;return Qs-qs}),Us=Ns.length,Hs=0,zs=Ns.length;Hs<zs;Hs++)Ns[Hs].element.style.zIndex=Us-Hs}this.render=function(Os,Ns){var Us=Ns.projectionMatrix.elements[5]*Ms;if(Ts.camera.fov!==Us&&(Ns.isPerspectiveCamera?(Bs.style.WebkitPerspective=Us+"px",Bs.style.perspective=Us+"px"):(Bs.style.WebkitPerspective="",Bs.style.perspective=""),Ts.camera.fov=Us),Os.autoUpdate===!0&&Os.updateMatrixWorld(),Ns.parent===null&&Ns.updateMatrixWorld(),Ns.isOrthographicCamera)var Hs=-(Ns.right+Ns.left)/2,zs=(Ns.top+Ns.bottom)/2;var js=Ns.isOrthographicCamera?"scale("+Us+")translate("+Rs(Hs)+"px,"+Rs(zs)+"px)"+Ds(Ns.matrixWorldInverse):"translateZ("+Us+"px)"+Ds(Ns.matrixWorldInverse),Ws=js+"translate("+Ss+"px,"+Ms+"px)";Ts.camera.style!==Ws&&!Ls&&(Ps.style.WebkitTransform=Ws,Ps.style.transform=Ws,Ts.camera.style=Ws),Fs(Os,Os,Ns,js),Ls&&ks(Os)}};export{ShaderMaterial as A,BufferGeometry as B,Color as C,DoubleSide as D,Easing as E,Five as F,runInAction as G,observer as H,reactDom as I,FiveCanvas as J,LinearFilter as L,MeshBasicMaterial as M,OrthographicCamera as O,PlaneGeometry as P,Quaternion as Q,ReactDOM as R,Subscribe as S,Tween as T,Vector3 as V,WebGLRenderer as W,jsxs as a,action as b,createFiveProvider as c,reaction as d,React as e,Fragment as f,VideoTexture as g,RGBFormat as h,Raycaster as i,jsx as j,BufferAttribute as k,Mesh as l,makeObservable as m,TextureLoader as n,observable as o,parseWork as p,Matrix4 as q,react$1 as r,Box3 as s,exports as t,unsafe__useFiveInstance as u,Line as v,classNames as w,Scene as x,CSS3DRenderer as y,CSS3DObject as z};
