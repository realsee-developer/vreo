var Gy=Object.defineProperty,Uy=Object.defineProperties;var zy=Object.getOwnPropertyDescriptors;var Fy=Object.getOwnPropertySymbols;var Hy=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable;var Ly=(_u,$u,Ru)=>$u in _u?Gy(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Ru}):_u[$u]=Ru,Fm=(_u,$u)=>{for(var Ru in $u||($u={}))Hy.call($u,Ru)&&Ly(_u,Ru,$u[Ru]);if(Fy)for(var Ru of Fy($u))jy.call($u,Ru)&&Ly(_u,Ru,$u[Ru]);return _u},My=(_u,$u)=>Uy(_u,zy($u));var _m=(_u,$u,Ru)=>(Ly(_u,typeof $u!="symbol"?$u+"":$u,Ru),Ru);const p$4=function(){const $u=document.createElement("link").relList;if($u&&$u.supports&&$u.supports("modulepreload"))return;for(const Fu of document.querySelectorAll('link[rel="modulepreload"]'))Ou(Fu);new MutationObserver(Fu=>{for(const Nu of Fu)if(Nu.type==="childList")for(const Vu of Nu.addedNodes)Vu.tagName==="LINK"&&Vu.rel==="modulepreload"&&Ou(Vu)}).observe(document,{childList:!0,subtree:!0});function Ru(Fu){const Nu={};return Fu.integrity&&(Nu.integrity=Fu.integrity),Fu.referrerpolicy&&(Nu.referrerPolicy=Fu.referrerpolicy),Fu.crossorigin==="use-credentials"?Nu.credentials="include":Fu.crossorigin==="anonymous"?Nu.credentials="omit":Nu.credentials="same-origin",Nu}function Ou(Fu){if(Fu.ep)return;Fu.ep=!0;const Nu=Ru(Fu);fetch(Fu.href,Nu)}};p$4();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(_u){if(_u.__esModule)return _u;var $u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(_u).forEach(function(Ru){var Ou=Object.getOwnPropertyDescriptor(_u,Ru);Object.defineProperty($u,Ru,Ou.get?Ou:{enumerable:!0,get:function(){return _u[Ru]}})}),$u}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(_u){if(_u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_u)}function shouldUseNative(){try{if(!Object.assign)return!1;var _u=new String("abc");if(_u[5]="de",Object.getOwnPropertyNames(_u)[0]==="5")return!1;for(var $u={},Ru=0;Ru<10;Ru++)$u["_"+String.fromCharCode(Ru)]=Ru;var Ou=Object.getOwnPropertyNames($u).map(function(Nu){return $u[Nu]});if(Ou.join("")!=="0123456789")return!1;var Fu={};return"abcdefghijklmnopqrst".split("").forEach(function(Nu){Fu[Nu]=Nu}),Object.keys(Object.assign({},Fu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_u,$u){for(var Ru,Ou=toObject(_u),Fu,Nu=1;Nu<arguments.length;Nu++){Ru=Object(arguments[Nu]);for(var Vu in Ru)hasOwnProperty.call(Ru,Vu)&&(Ou[Vu]=Ru[Vu]);if(getOwnPropertySymbols){Fu=getOwnPropertySymbols(Ru);for(var Gu=0;Gu<Fu.length;Gu++)propIsEnumerable.call(Ru,Fu[Gu])&&(Ou[Fu[Gu]]=Ru[Fu[Gu]])}}return Ou};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$3=n$5?Symbol.for("react.portal"):60106,r$5=n$5?Symbol.for("react.fragment"):60107,t$4=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$4=n$5?Symbol.for("react.provider"):60109,w$3=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$3=n$5?Symbol.for("react.suspense"):60113,z$2=n$5?Symbol.for("react.memo"):60115,A$3=n$5?Symbol.for("react.lazy"):60116,B$2=typeof Symbol=="function"&&Symbol.iterator;function C$4(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Ru=1;Ru<arguments.length;Ru++)$u+="&args[]="+encodeURIComponent(arguments[Ru]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$4={};function F$4(_u,$u,Ru){this.props=_u,this.context=$u,this.refs=E$4,this.updater=Ru||D$3}F$4.prototype.isReactComponent={};F$4.prototype.setState=function(_u,$u){if(typeof _u!="object"&&typeof _u!="function"&&_u!=null)throw Error(C$4(85));this.updater.enqueueSetState(this,_u,$u,"setState")};F$4.prototype.forceUpdate=function(_u){this.updater.enqueueForceUpdate(this,_u,"forceUpdate")};function G$4(){}G$4.prototype=F$4.prototype;function H$4(_u,$u,Ru){this.props=_u,this.context=$u,this.refs=E$4,this.updater=Ru||D$3}var I$3=H$4.prototype=new G$4;I$3.constructor=H$4;l$4(I$3,F$4.prototype);I$3.isPureReactComponent=!0;var J$3={current:null},K$3=Object.prototype.hasOwnProperty,L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_u,$u,Ru){var Ou,Fu={},Nu=null,Vu=null;if($u!=null)for(Ou in $u.ref!==void 0&&(Vu=$u.ref),$u.key!==void 0&&(Nu=""+$u.key),$u)K$3.call($u,Ou)&&!L$4.hasOwnProperty(Ou)&&(Fu[Ou]=$u[Ou]);var Gu=arguments.length-2;if(Gu===1)Fu.children=Ru;else if(1<Gu){for(var Uu=Array(Gu),Hu=0;Hu<Gu;Hu++)Uu[Hu]=arguments[Hu+2];Fu.children=Uu}if(_u&&_u.defaultProps)for(Ou in Gu=_u.defaultProps,Gu)Fu[Ou]===void 0&&(Fu[Ou]=Gu[Ou]);return{$$typeof:p$3,type:_u,key:Nu,ref:Vu,props:Fu,_owner:J$3.current}}function N$4(_u,$u){return{$$typeof:p$3,type:_u.type,key:$u,ref:_u.ref,props:_u.props,_owner:_u._owner}}function O$4(_u){return typeof _u=="object"&&_u!==null&&_u.$$typeof===p$3}function escape$1(_u){var $u={"=":"=0",":":"=2"};return"$"+(""+_u).replace(/[=:]/g,function(Ru){return $u[Ru]})}var P$5=/\/+/g,Q$4=[];function R$4(_u,$u,Ru,Ou){if(Q$4.length){var Fu=Q$4.pop();return Fu.result=_u,Fu.keyPrefix=$u,Fu.func=Ru,Fu.context=Ou,Fu.count=0,Fu}return{result:_u,keyPrefix:$u,func:Ru,context:Ou,count:0}}function S$3(_u){_u.result=null,_u.keyPrefix=null,_u.func=null,_u.context=null,_u.count=0,10>Q$4.length&&Q$4.push(_u)}function T$2(_u,$u,Ru,Ou){var Fu=typeof _u;(Fu==="undefined"||Fu==="boolean")&&(_u=null);var Nu=!1;if(_u===null)Nu=!0;else switch(Fu){case"string":case"number":Nu=!0;break;case"object":switch(_u.$$typeof){case p$3:case q$3:Nu=!0}}if(Nu)return Ru(Ou,_u,$u===""?"."+U$3(_u,0):$u),1;if(Nu=0,$u=$u===""?".":$u+":",Array.isArray(_u))for(var Vu=0;Vu<_u.length;Vu++){Fu=_u[Vu];var Gu=$u+U$3(Fu,Vu);Nu+=T$2(Fu,Gu,Ru,Ou)}else if(_u===null||typeof _u!="object"?Gu=null:(Gu=B$2&&_u[B$2]||_u["@@iterator"],Gu=typeof Gu=="function"?Gu:null),typeof Gu=="function")for(_u=Gu.call(_u),Vu=0;!(Fu=_u.next()).done;)Fu=Fu.value,Gu=$u+U$3(Fu,Vu++),Nu+=T$2(Fu,Gu,Ru,Ou);else if(Fu==="object")throw Ru=""+_u,Error(C$4(31,Ru==="[object Object]"?"object with keys {"+Object.keys(_u).join(", ")+"}":Ru,""));return Nu}function V$3(_u,$u,Ru){return _u==null?0:T$2(_u,"",$u,Ru)}function U$3(_u,$u){return typeof _u=="object"&&_u!==null&&_u.key!=null?escape$1(_u.key):$u.toString(36)}function W$5(_u,$u){_u.func.call(_u.context,$u,_u.count++)}function aa$3(_u,$u,Ru){var Ou=_u.result,Fu=_u.keyPrefix;_u=_u.func.call(_u.context,$u,_u.count++),Array.isArray(_u)?X$4(_u,Ou,Ru,function(Nu){return Nu}):_u!=null&&(O$4(_u)&&(_u=N$4(_u,Fu+(!_u.key||$u&&$u.key===_u.key?"":(""+_u.key).replace(P$5,"$&/")+"/")+Ru)),Ou.push(_u))}function X$4(_u,$u,Ru,Ou,Fu){var Nu="";Ru!=null&&(Nu=(""+Ru).replace(P$5,"$&/")+"/"),$u=R$4($u,Nu,Ou,Fu),V$3(_u,aa$3,$u),S$3($u)}var Y$3={current:null};function Z$3(){var _u=Y$3.current;if(_u===null)throw Error(C$4(321));return _u}var ba$3={ReactCurrentDispatcher:Y$3,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:function(_u,$u,Ru){if(_u==null)return _u;var Ou=[];return X$4(_u,Ou,null,$u,Ru),Ou},forEach:function(_u,$u,Ru){if(_u==null)return _u;$u=R$4(null,null,$u,Ru),V$3(_u,W$5,$u),S$3($u)},count:function(_u){return V$3(_u,function(){return null},null)},toArray:function(_u){var $u=[];return X$4(_u,$u,null,function(Ru){return Ru}),$u},only:function(_u){if(!O$4(_u))throw Error(C$4(143));return _u}};react_production_min.Component=F$4;react_production_min.Fragment=r$5;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$4;react_production_min.StrictMode=t$4;react_production_min.Suspense=y$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(_u,$u,Ru){if(_u==null)throw Error(C$4(267,_u));var Ou=l$4({},_u.props),Fu=_u.key,Nu=_u.ref,Vu=_u._owner;if($u!=null){if($u.ref!==void 0&&(Nu=$u.ref,Vu=J$3.current),$u.key!==void 0&&(Fu=""+$u.key),_u.type&&_u.type.defaultProps)var Gu=_u.type.defaultProps;for(Uu in $u)K$3.call($u,Uu)&&!L$4.hasOwnProperty(Uu)&&(Ou[Uu]=$u[Uu]===void 0&&Gu!==void 0?Gu[Uu]:$u[Uu])}var Uu=arguments.length-2;if(Uu===1)Ou.children=Ru;else if(1<Uu){Gu=Array(Uu);for(var Hu=0;Hu<Uu;Hu++)Gu[Hu]=arguments[Hu+2];Ou.children=Gu}return{$$typeof:p$3,type:_u.type,key:Fu,ref:Nu,props:Ou,_owner:Vu}};react_production_min.createContext=function(_u,$u){return $u===void 0&&($u=null),_u={$$typeof:w$3,_calculateChangedBits:$u,_currentValue:_u,_currentValue2:_u,_threadCount:0,Provider:null,Consumer:null},_u.Provider={$$typeof:v$4,_context:_u},_u.Consumer=_u};react_production_min.createElement=M$3;react_production_min.createFactory=function(_u){var $u=M$3.bind(null,_u);return $u.type=_u,$u};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_u){return{$$typeof:x$2,render:_u}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(_u){return{$$typeof:A$3,_ctor:_u,_status:-1,_result:null}};react_production_min.memo=function(_u,$u){return{$$typeof:z$2,type:_u,compare:$u===void 0?null:$u}};react_production_min.useCallback=function(_u,$u){return Z$3().useCallback(_u,$u)};react_production_min.useContext=function(_u,$u){return Z$3().useContext(_u,$u)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_u,$u){return Z$3().useEffect(_u,$u)};react_production_min.useImperativeHandle=function(_u,$u,Ru){return Z$3().useImperativeHandle(_u,$u,Ru)};react_production_min.useLayoutEffect=function(_u,$u){return Z$3().useLayoutEffect(_u,$u)};react_production_min.useMemo=function(_u,$u){return Z$3().useMemo(_u,$u)};react_production_min.useReducer=function(_u,$u,Ru){return Z$3().useReducer(_u,$u,Ru)};react_production_min.useRef=function(_u){return Z$3().useRef(_u)};react_production_min.useState=function(_u){return Z$3().useState(_u)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_u){var $u,Ru,Ou,Fu,Nu;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Vu=null,Gu=null,Uu=function(){if(Vu!==null)try{var Ip=_u.unstable_now();Vu(!0,Ip),Vu=null}catch(Vp){throw setTimeout(Uu,0),Vp}},Hu=Date.now();_u.unstable_now=function(){return Date.now()-Hu},$u=function(Ip){Vu!==null?setTimeout($u,0,Ip):(Vu=Ip,setTimeout(Uu,0))},Ru=function(Ip,Vp){Gu=setTimeout(Ip,Vp)},Ou=function(){clearTimeout(Gu)},Fu=function(){return!1},Nu=_u.unstable_forceFrameRate=function(){}}else{var Wu=window.performance,Qu=window.Date,qu=window.setTimeout,Ku=window.clearTimeout;if(typeof console!="undefined"){var Yu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Yu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Wu=="object"&&typeof Wu.now=="function")_u.unstable_now=function(){return Wu.now()};else{var _c=Qu.now();_u.unstable_now=function(){return Qu.now()-_c}}var Ju=!1,Xu=null,Zu=-1,Xc=5,_h=0;Fu=function(){return _u.unstable_now()>=_h},Nu=function(){},_u.unstable_forceFrameRate=function(Ip){0>Ip||125<Ip?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Xc=0<Ip?Math.floor(1e3/Ip):5};var ep=new MessageChannel,np=ep.port2;ep.port1.onmessage=function(){if(Xu!==null){var Ip=_u.unstable_now();_h=Ip+Xc;try{Xu(!0,Ip)?np.postMessage(null):(Ju=!1,Xu=null)}catch(Vp){throw np.postMessage(null),Vp}}else Ju=!1},$u=function(Ip){Xu=Ip,Ju||(Ju=!0,np.postMessage(null))},Ru=function(Ip,Vp){Zu=qu(function(){Ip(_u.unstable_now())},Vp)},Ou=function(){Ku(Zu),Zu=-1}}function ap(Ip,Vp){var Lp=Ip.length;Ip.push(Vp);e:for(;;){var mp=Lp-1>>>1,pp=Ip[mp];if(pp!==void 0&&0<_f(pp,Vp))Ip[mp]=Vp,Ip[Lp]=pp,Lp=mp;else break e}}function lp(Ip){return Ip=Ip[0],Ip===void 0?null:Ip}function up(Ip){var Vp=Ip[0];if(Vp!==void 0){var Lp=Ip.pop();if(Lp!==Vp){Ip[0]=Lp;e:for(var mp=0,pp=Ip.length;mp<pp;){var wp=2*(mp+1)-1,Ap=Ip[wp],Sp=wp+1,Cp=Ip[Sp];if(Ap!==void 0&&0>_f(Ap,Lp))Cp!==void 0&&0>_f(Cp,Ap)?(Ip[mp]=Cp,Ip[Sp]=Lp,mp=Sp):(Ip[mp]=Ap,Ip[wp]=Lp,mp=wp);else if(Cp!==void 0&&0>_f(Cp,Lp))Ip[mp]=Cp,Ip[Sp]=Lp,mp=Sp;else break e}}return Vp}return null}function _f(Ip,Vp){var Lp=Ip.sortIndex-Vp.sortIndex;return Lp!==0?Lp:Ip.id-Vp.id}var tp=[],ip=[],rp=1,op=null,sp=3,cp=!1,hp=!1,dp=!1;function xp(Ip){for(var Vp=lp(ip);Vp!==null;){if(Vp.callback===null)up(ip);else if(Vp.startTime<=Ip)up(ip),Vp.sortIndex=Vp.expirationTime,ap(tp,Vp);else break;Vp=lp(ip)}}function bp(Ip){if(dp=!1,xp(Ip),!hp)if(lp(tp)!==null)hp=!0,$u(Rp);else{var Vp=lp(ip);Vp!==null&&Ru(bp,Vp.startTime-Ip)}}function Rp(Ip,Vp){hp=!1,dp&&(dp=!1,Ou()),cp=!0;var Lp=sp;try{for(xp(Vp),op=lp(tp);op!==null&&(!(op.expirationTime>Vp)||Ip&&!Fu());){var mp=op.callback;if(mp!==null){op.callback=null,sp=op.priorityLevel;var pp=mp(op.expirationTime<=Vp);Vp=_u.unstable_now(),typeof pp=="function"?op.callback=pp:op===lp(tp)&&up(tp),xp(Vp)}else up(tp);op=lp(tp)}if(op!==null)var wp=!0;else{var Ap=lp(ip);Ap!==null&&Ru(bp,Ap.startTime-Vp),wp=!1}return wp}finally{op=null,sp=Lp,cp=!1}}function Tp(Ip){switch(Ip){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Up=Nu;_u.unstable_IdlePriority=5,_u.unstable_ImmediatePriority=1,_u.unstable_LowPriority=4,_u.unstable_NormalPriority=3,_u.unstable_Profiling=null,_u.unstable_UserBlockingPriority=2,_u.unstable_cancelCallback=function(Ip){Ip.callback=null},_u.unstable_continueExecution=function(){hp||cp||(hp=!0,$u(Rp))},_u.unstable_getCurrentPriorityLevel=function(){return sp},_u.unstable_getFirstCallbackNode=function(){return lp(tp)},_u.unstable_next=function(Ip){switch(sp){case 1:case 2:case 3:var Vp=3;break;default:Vp=sp}var Lp=sp;sp=Vp;try{return Ip()}finally{sp=Lp}},_u.unstable_pauseExecution=function(){},_u.unstable_requestPaint=Up,_u.unstable_runWithPriority=function(Ip,Vp){switch(Ip){case 1:case 2:case 3:case 4:case 5:break;default:Ip=3}var Lp=sp;sp=Ip;try{return Vp()}finally{sp=Lp}},_u.unstable_scheduleCallback=function(Ip,Vp,Lp){var mp=_u.unstable_now();if(typeof Lp=="object"&&Lp!==null){var pp=Lp.delay;pp=typeof pp=="number"&&0<pp?mp+pp:mp,Lp=typeof Lp.timeout=="number"?Lp.timeout:Tp(Ip)}else Lp=Tp(Ip),pp=mp;return Lp=pp+Lp,Ip={id:rp++,callback:Vp,priorityLevel:Ip,startTime:pp,expirationTime:Lp,sortIndex:-1},pp>mp?(Ip.sortIndex=pp,ap(ip,Ip),lp(tp)===null&&Ip===lp(ip)&&(dp?Ou():dp=!0,Ru(bp,pp-mp))):(Ip.sortIndex=Lp,ap(tp,Ip),hp||cp||(hp=!0,$u(Rp))),Ip},_u.unstable_shouldYield=function(){var Ip=_u.unstable_now();xp(Ip);var Vp=lp(tp);return Vp!==op&&op!==null&&Vp!==null&&Vp.callback!==null&&Vp.startTime<=Ip&&Vp.expirationTime<op.expirationTime||Fu()},_u.unstable_wrapCallback=function(Ip){var Vp=sp;return function(){var Lp=sp;sp=Vp;try{return Ip.apply(this,arguments)}finally{sp=Lp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$4=objectAssign,r$4=scheduler.exports;function u$3(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Ru=1;Ru<arguments.length;Ru++)$u+="&args[]="+encodeURIComponent(arguments[Ru]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$3(227));function ba$2(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){var Hu=Array.prototype.slice.call(arguments,3);try{$u.apply(Ru,Hu)}catch(Wu){this.onError(Wu)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(_u){da$2=!0,ea$2=_u}};function ja$2(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$1(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){if(ja$2.apply(this,arguments),da$2){if(da$2){var Hu=ea$2;da$2=!1,ea$2=null}else throw Error(u$3(198));fa$2||(fa$2=!0,ha$2=Hu)}}var la$1=null,ma$1=null,na$1=null;function oa$1(_u,$u,Ru){var Ou=_u.type||"unknown-event";_u.currentTarget=na$1(Ru),ka$1(Ou,$u,void 0,_u),_u.currentTarget=null}var pa$1=null,qa$2={};function ra$1(){if(pa$1)for(var _u in qa$2){var $u=qa$2[_u],Ru=pa$1.indexOf(_u);if(!(-1<Ru))throw Error(u$3(96,_u));if(!sa$1[Ru]){if(!$u.extractEvents)throw Error(u$3(97,_u));sa$1[Ru]=$u,Ru=$u.eventTypes;for(var Ou in Ru){var Fu=void 0,Nu=Ru[Ou],Vu=$u,Gu=Ou;if(ta$1.hasOwnProperty(Gu))throw Error(u$3(99,Gu));ta$1[Gu]=Nu;var Uu=Nu.phasedRegistrationNames;if(Uu){for(Fu in Uu)Uu.hasOwnProperty(Fu)&&ua$1(Uu[Fu],Vu,Gu);Fu=!0}else Nu.registrationName?(ua$1(Nu.registrationName,Vu,Gu),Fu=!0):Fu=!1;if(!Fu)throw Error(u$3(98,Ou,_u))}}}}function ua$1(_u,$u,Ru){if(va$1[_u])throw Error(u$3(100,_u));va$1[_u]=$u,wa$1[_u]=$u.eventTypes[Ru].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(_u){var $u=!1,Ru;for(Ru in _u)if(_u.hasOwnProperty(Ru)){var Ou=_u[Ru];if(!qa$2.hasOwnProperty(Ru)||qa$2[Ru]!==Ou){if(qa$2[Ru])throw Error(u$3(102,Ru));qa$2[Ru]=Ou,$u=!0}}$u&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$2=null,Aa$1=null,Ba$2=null;function Ca$1(_u){if(_u=ma$1(_u)){if(typeof za$2!="function")throw Error(u$3(280));var $u=_u.stateNode;$u&&($u=la$1($u),za$2(_u.stateNode,_u.type,$u))}}function Da$2(_u){Aa$1?Ba$2?Ba$2.push(_u):Ba$2=[_u]:Aa$1=_u}function Ea$1(){if(Aa$1){var _u=Aa$1,$u=Ba$2;if(Ba$2=Aa$1=null,Ca$1(_u),$u)for(_u=0;_u<$u.length;_u++)Ca$1($u[_u])}}function Fa$2(_u,$u){return _u($u)}function Ga$2(_u,$u,Ru,Ou,Fu){return _u($u,Ru,Ou,Fu)}function Ha$2(){}var Ia$1=Fa$2,Ja$2=!1,Ka$2=!1;function La$2(){(Aa$1!==null||Ba$2!==null)&&(Ha$2(),Ea$1())}function Ma$2(_u,$u,Ru){if(Ka$2)return _u($u,Ru);Ka$2=!0;try{return Ia$1(_u,$u,Ru)}finally{Ka$2=!1,La$2()}}var Na$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$2=Object.prototype.hasOwnProperty,Pa$1={},Qa$2={};function Ra$2(_u){return Oa$2.call(Qa$2,_u)?!0:Oa$2.call(Pa$1,_u)?!1:Na$2.test(_u)?Qa$2[_u]=!0:(Pa$1[_u]=!0,!1)}function Sa$1(_u,$u,Ru,Ou){if(Ru!==null&&Ru.type===0)return!1;switch(typeof $u){case"function":case"symbol":return!0;case"boolean":return Ou?!1:Ru!==null?!Ru.acceptsBooleans:(_u=_u.toLowerCase().slice(0,5),_u!=="data-"&&_u!=="aria-");default:return!1}}function Ta$1(_u,$u,Ru,Ou){if($u===null||typeof $u=="undefined"||Sa$1(_u,$u,Ru,Ou))return!0;if(Ou)return!1;if(Ru!==null)switch(Ru.type){case 3:return!$u;case 4:return $u===!1;case 5:return isNaN($u);case 6:return isNaN($u)||1>$u}return!1}function v$3(_u,$u,Ru,Ou,Fu,Nu){this.acceptsBooleans=$u===2||$u===3||$u===4,this.attributeName=Ou,this.attributeNamespace=Fu,this.mustUseProperty=Ru,this.propertyName=_u,this.type=$u,this.sanitizeURL=Nu}var C$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_u){C$3[_u]=new v$3(_u,0,!1,_u,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_u){var $u=_u[0];C$3[$u]=new v$3($u,1,!1,_u[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_u){C$3[_u]=new v$3(_u,2,!1,_u.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_u){C$3[_u]=new v$3(_u,2,!1,_u,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_u){C$3[_u]=new v$3(_u,3,!1,_u.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(_u){C$3[_u]=new v$3(_u,3,!0,_u,null,!1)});["capture","download"].forEach(function(_u){C$3[_u]=new v$3(_u,4,!1,_u,null,!1)});["cols","rows","size","span"].forEach(function(_u){C$3[_u]=new v$3(_u,6,!1,_u,null,!1)});["rowSpan","start"].forEach(function(_u){C$3[_u]=new v$3(_u,5,!1,_u.toLowerCase(),null,!1)});var Ua$2=/[\-:]([a-z])/g;function Va$2(_u){return _u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$3[$u]=new v$3($u,1,!1,_u,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$3[$u]=new v$3($u,1,!1,_u,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(_u){var $u=_u.replace(Ua$2,Va$2);C$3[$u]=new v$3($u,1,!1,_u,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(_u){C$3[_u]=new v$3(_u,1,!1,_u.toLowerCase(),null,!1)});C$3.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(_u){C$3[_u]=new v$3(_u,1,!1,_u.toLowerCase(),null,!0)});var Wa$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$2.hasOwnProperty("ReactCurrentDispatcher")||(Wa$2.ReactCurrentDispatcher={current:null});Wa$2.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$2.ReactCurrentBatchConfig={suspense:null});function Xa$2(_u,$u,Ru,Ou){var Fu=C$3.hasOwnProperty($u)?C$3[$u]:null,Nu=Fu!==null?Fu.type===0:Ou?!1:!(!(2<$u.length)||$u[0]!=="o"&&$u[0]!=="O"||$u[1]!=="n"&&$u[1]!=="N");Nu||(Ta$1($u,Ru,Fu,Ou)&&(Ru=null),Ou||Fu===null?Ra$2($u)&&(Ru===null?_u.removeAttribute($u):_u.setAttribute($u,""+Ru)):Fu.mustUseProperty?_u[Fu.propertyName]=Ru===null?Fu.type===3?!1:"":Ru:($u=Fu.attributeName,Ou=Fu.attributeNamespace,Ru===null?_u.removeAttribute($u):(Fu=Fu.type,Ru=Fu===3||Fu===4&&Ru===!0?"":""+Ru,Ou?_u.setAttributeNS(Ou,$u,Ru):_u.setAttribute($u,Ru))))}var Ya$2=/^(.*)[\\\/]/,E$3=typeof Symbol=="function"&&Symbol.for,Za$2=E$3?Symbol.for("react.element"):60103,$a$2=E$3?Symbol.for("react.portal"):60106,ab$1=E$3?Symbol.for("react.fragment"):60107,bb$1=E$3?Symbol.for("react.strict_mode"):60108,cb$1=E$3?Symbol.for("react.profiler"):60114,db$1=E$3?Symbol.for("react.provider"):60109,eb$1=E$3?Symbol.for("react.context"):60110,fb$1=E$3?Symbol.for("react.concurrent_mode"):60111,gb$1=E$3?Symbol.for("react.forward_ref"):60112,hb$1=E$3?Symbol.for("react.suspense"):60113,ib$1=E$3?Symbol.for("react.suspense_list"):60120,jb$1=E$3?Symbol.for("react.memo"):60115,kb$1=E$3?Symbol.for("react.lazy"):60116,lb$1=E$3?Symbol.for("react.block"):60121,mb$1=typeof Symbol=="function"&&Symbol.iterator;function nb$1(_u){return _u===null||typeof _u!="object"?null:(_u=mb$1&&_u[mb$1]||_u["@@iterator"],typeof _u=="function"?_u:null)}function ob$1(_u){if(_u._status===-1){_u._status=0;var $u=_u._ctor;$u=$u(),_u._result=$u,$u.then(function(Ru){_u._status===0&&(Ru=Ru.default,_u._status=1,_u._result=Ru)},function(Ru){_u._status===0&&(_u._status=2,_u._result=Ru)})}}function pb$1(_u){if(_u==null)return null;if(typeof _u=="function")return _u.displayName||_u.name||null;if(typeof _u=="string")return _u;switch(_u){case ab$1:return"Fragment";case $a$2:return"Portal";case cb$1:return"Profiler";case bb$1:return"StrictMode";case hb$1:return"Suspense";case ib$1:return"SuspenseList"}if(typeof _u=="object")switch(_u.$$typeof){case eb$1:return"Context.Consumer";case db$1:return"Context.Provider";case gb$1:var $u=_u.render;return $u=$u.displayName||$u.name||"",_u.displayName||($u!==""?"ForwardRef("+$u+")":"ForwardRef");case jb$1:return pb$1(_u.type);case lb$1:return pb$1(_u.render);case kb$1:if(_u=_u._status===1?_u._result:null)return pb$1(_u)}return null}function qb$1(_u){var $u="";do{e:switch(_u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Ru="";break e;default:var Ou=_u._debugOwner,Fu=_u._debugSource,Nu=pb$1(_u.type);Ru=null,Ou&&(Ru=pb$1(Ou.type)),Ou=Nu,Nu="",Fu?Nu=" (at "+Fu.fileName.replace(Ya$2,"")+":"+Fu.lineNumber+")":Ru&&(Nu=" (created by "+Ru+")"),Ru=`
    in `+(Ou||"Unknown")+Nu}$u+=Ru,_u=_u.return}while(_u);return $u}function rb$1(_u){switch(typeof _u){case"boolean":case"number":case"object":case"string":case"undefined":return _u;default:return""}}function sb$1(_u){var $u=_u.type;return(_u=_u.nodeName)&&_u.toLowerCase()==="input"&&($u==="checkbox"||$u==="radio")}function tb$1(_u){var $u=sb$1(_u)?"checked":"value",Ru=Object.getOwnPropertyDescriptor(_u.constructor.prototype,$u),Ou=""+_u[$u];if(!_u.hasOwnProperty($u)&&typeof Ru!="undefined"&&typeof Ru.get=="function"&&typeof Ru.set=="function"){var Fu=Ru.get,Nu=Ru.set;return Object.defineProperty(_u,$u,{configurable:!0,get:function(){return Fu.call(this)},set:function(Vu){Ou=""+Vu,Nu.call(this,Vu)}}),Object.defineProperty(_u,$u,{enumerable:Ru.enumerable}),{getValue:function(){return Ou},setValue:function(Vu){Ou=""+Vu},stopTracking:function(){_u._valueTracker=null,delete _u[$u]}}}}function xb$1(_u){_u._valueTracker||(_u._valueTracker=tb$1(_u))}function yb$1(_u){if(!_u)return!1;var $u=_u._valueTracker;if(!$u)return!0;var Ru=$u.getValue(),Ou="";return _u&&(Ou=sb$1(_u)?_u.checked?"true":"false":_u.value),_u=Ou,_u!==Ru?($u.setValue(_u),!0):!1}function zb$1(_u,$u){var Ru=$u.checked;return n$4({},$u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ru!=null?Ru:_u._wrapperState.initialChecked})}function Ab$1(_u,$u){var Ru=$u.defaultValue==null?"":$u.defaultValue,Ou=$u.checked!=null?$u.checked:$u.defaultChecked;Ru=rb$1($u.value!=null?$u.value:Ru),_u._wrapperState={initialChecked:Ou,initialValue:Ru,controlled:$u.type==="checkbox"||$u.type==="radio"?$u.checked!=null:$u.value!=null}}function Bb$1(_u,$u){$u=$u.checked,$u!=null&&Xa$2(_u,"checked",$u,!1)}function Cb$1(_u,$u){Bb$1(_u,$u);var Ru=rb$1($u.value),Ou=$u.type;if(Ru!=null)Ou==="number"?(Ru===0&&_u.value===""||_u.value!=Ru)&&(_u.value=""+Ru):_u.value!==""+Ru&&(_u.value=""+Ru);else if(Ou==="submit"||Ou==="reset"){_u.removeAttribute("value");return}$u.hasOwnProperty("value")?Db$1(_u,$u.type,Ru):$u.hasOwnProperty("defaultValue")&&Db$1(_u,$u.type,rb$1($u.defaultValue)),$u.checked==null&&$u.defaultChecked!=null&&(_u.defaultChecked=!!$u.defaultChecked)}function Eb$1(_u,$u,Ru){if($u.hasOwnProperty("value")||$u.hasOwnProperty("defaultValue")){var Ou=$u.type;if(!(Ou!=="submit"&&Ou!=="reset"||$u.value!==void 0&&$u.value!==null))return;$u=""+_u._wrapperState.initialValue,Ru||$u===_u.value||(_u.value=$u),_u.defaultValue=$u}Ru=_u.name,Ru!==""&&(_u.name=""),_u.defaultChecked=!!_u._wrapperState.initialChecked,Ru!==""&&(_u.name=Ru)}function Db$1(_u,$u,Ru){($u!=="number"||_u.ownerDocument.activeElement!==_u)&&(Ru==null?_u.defaultValue=""+_u._wrapperState.initialValue:_u.defaultValue!==""+Ru&&(_u.defaultValue=""+Ru))}function Fb$1(_u){var $u="";return aa$2.Children.forEach(_u,function(Ru){Ru!=null&&($u+=Ru)}),$u}function Gb$1(_u,$u){return _u=n$4({children:void 0},$u),($u=Fb$1($u.children))&&(_u.children=$u),_u}function Hb$1(_u,$u,Ru,Ou){if(_u=_u.options,$u){$u={};for(var Fu=0;Fu<Ru.length;Fu++)$u["$"+Ru[Fu]]=!0;for(Ru=0;Ru<_u.length;Ru++)Fu=$u.hasOwnProperty("$"+_u[Ru].value),_u[Ru].selected!==Fu&&(_u[Ru].selected=Fu),Fu&&Ou&&(_u[Ru].defaultSelected=!0)}else{for(Ru=""+rb$1(Ru),$u=null,Fu=0;Fu<_u.length;Fu++){if(_u[Fu].value===Ru){_u[Fu].selected=!0,Ou&&(_u[Fu].defaultSelected=!0);return}$u!==null||_u[Fu].disabled||($u=_u[Fu])}$u!==null&&($u.selected=!0)}}function Ib$1(_u,$u){if($u.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},$u,{value:void 0,defaultValue:void 0,children:""+_u._wrapperState.initialValue})}function Jb$1(_u,$u){var Ru=$u.value;if(Ru==null){if(Ru=$u.children,$u=$u.defaultValue,Ru!=null){if($u!=null)throw Error(u$3(92));if(Array.isArray(Ru)){if(!(1>=Ru.length))throw Error(u$3(93));Ru=Ru[0]}$u=Ru}$u==null&&($u=""),Ru=$u}_u._wrapperState={initialValue:rb$1(Ru)}}function Kb$1(_u,$u){var Ru=rb$1($u.value),Ou=rb$1($u.defaultValue);Ru!=null&&(Ru=""+Ru,Ru!==_u.value&&(_u.value=Ru),$u.defaultValue==null&&_u.defaultValue!==Ru&&(_u.defaultValue=Ru)),Ou!=null&&(_u.defaultValue=""+Ou)}function Lb$1(_u){var $u=_u.textContent;$u===_u._wrapperState.initialValue&&$u!==""&&$u!==null&&(_u.value=$u)}var Mb$1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb$1(_u){switch(_u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob$1(_u,$u){return _u==null||_u==="http://www.w3.org/1999/xhtml"?Nb$1($u):_u==="http://www.w3.org/2000/svg"&&$u==="foreignObject"?"http://www.w3.org/1999/xhtml":_u}var Pb$1,Qb$1=function(_u){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function($u,Ru,Ou,Fu){MSApp.execUnsafeLocalFunction(function(){return _u($u,Ru,Ou,Fu)})}:_u}(function(_u,$u){if(_u.namespaceURI!==Mb$1.svg||"innerHTML"in _u)_u.innerHTML=$u;else{for(Pb$1=Pb$1||document.createElement("div"),Pb$1.innerHTML="<svg>"+$u.valueOf().toString()+"</svg>",$u=Pb$1.firstChild;_u.firstChild;)_u.removeChild(_u.firstChild);for(;$u.firstChild;)_u.appendChild($u.firstChild)}});function Rb$1(_u,$u){if($u){var Ru=_u.firstChild;if(Ru&&Ru===_u.lastChild&&Ru.nodeType===3){Ru.nodeValue=$u;return}}_u.textContent=$u}function Sb$1(_u,$u){var Ru={};return Ru[_u.toLowerCase()]=$u.toLowerCase(),Ru["Webkit"+_u]="webkit"+$u,Ru["Moz"+_u]="moz"+$u,Ru}var Tb$1={animationend:Sb$1("Animation","AnimationEnd"),animationiteration:Sb$1("Animation","AnimationIteration"),animationstart:Sb$1("Animation","AnimationStart"),transitionend:Sb$1("Transition","TransitionEnd")},Ub$1={},Vb$1={};ya$1&&(Vb$1=document.createElement("div").style,"AnimationEvent"in window||(delete Tb$1.animationend.animation,delete Tb$1.animationiteration.animation,delete Tb$1.animationstart.animation),"TransitionEvent"in window||delete Tb$1.transitionend.transition);function Wb$1(_u){if(Ub$1[_u])return Ub$1[_u];if(!Tb$1[_u])return _u;var $u=Tb$1[_u],Ru;for(Ru in $u)if($u.hasOwnProperty(Ru)&&Ru in Vb$1)return Ub$1[_u]=$u[Ru];return _u}var Xb$1=Wb$1("animationend"),Yb$1=Wb$1("animationiteration"),Zb$1=Wb$1("animationstart"),$b$1=Wb$1("transitionend"),ac$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc$1=new(typeof WeakMap=="function"?WeakMap:Map);function cc$1(_u){var $u=bc$1.get(_u);return $u===void 0&&($u=new Map,bc$1.set(_u,$u)),$u}function dc$1(_u){var $u=_u,Ru=_u;if(_u.alternate)for(;$u.return;)$u=$u.return;else{_u=$u;do $u=_u,($u.effectTag&1026)!==0&&(Ru=$u.return),_u=$u.return;while(_u)}return $u.tag===3?Ru:null}function ec(_u){if(_u.tag===13){var $u=_u.memoizedState;if($u===null&&(_u=_u.alternate,_u!==null&&($u=_u.memoizedState)),$u!==null)return $u.dehydrated}return null}function fc$1(_u){if(dc$1(_u)!==_u)throw Error(u$3(188))}function gc$1(_u){var $u=_u.alternate;if(!$u){if($u=dc$1(_u),$u===null)throw Error(u$3(188));return $u!==_u?null:_u}for(var Ru=_u,Ou=$u;;){var Fu=Ru.return;if(Fu===null)break;var Nu=Fu.alternate;if(Nu===null){if(Ou=Fu.return,Ou!==null){Ru=Ou;continue}break}if(Fu.child===Nu.child){for(Nu=Fu.child;Nu;){if(Nu===Ru)return fc$1(Fu),_u;if(Nu===Ou)return fc$1(Fu),$u;Nu=Nu.sibling}throw Error(u$3(188))}if(Ru.return!==Ou.return)Ru=Fu,Ou=Nu;else{for(var Vu=!1,Gu=Fu.child;Gu;){if(Gu===Ru){Vu=!0,Ru=Fu,Ou=Nu;break}if(Gu===Ou){Vu=!0,Ou=Fu,Ru=Nu;break}Gu=Gu.sibling}if(!Vu){for(Gu=Nu.child;Gu;){if(Gu===Ru){Vu=!0,Ru=Nu,Ou=Fu;break}if(Gu===Ou){Vu=!0,Ou=Nu,Ru=Fu;break}Gu=Gu.sibling}if(!Vu)throw Error(u$3(189))}}if(Ru.alternate!==Ou)throw Error(u$3(190))}if(Ru.tag!==3)throw Error(u$3(188));return Ru.stateNode.current===Ru?_u:$u}function hc$1(_u){if(_u=gc$1(_u),!_u)return null;for(var $u=_u;;){if($u.tag===5||$u.tag===6)return $u;if($u.child)$u.child.return=$u,$u=$u.child;else{if($u===_u)break;for(;!$u.sibling;){if(!$u.return||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}}return null}function ic$1(_u,$u){if($u==null)throw Error(u$3(30));return _u==null?$u:Array.isArray(_u)?Array.isArray($u)?(_u.push.apply(_u,$u),_u):(_u.push($u),_u):Array.isArray($u)?[_u].concat($u):[_u,$u]}function jc(_u,$u,Ru){Array.isArray(_u)?_u.forEach($u,Ru):_u&&$u.call(Ru,_u)}var kc=null;function lc$1(_u){if(_u){var $u=_u._dispatchListeners,Ru=_u._dispatchInstances;if(Array.isArray($u))for(var Ou=0;Ou<$u.length&&!_u.isPropagationStopped();Ou++)oa$1(_u,$u[Ou],Ru[Ou]);else $u&&oa$1(_u,$u,Ru);_u._dispatchListeners=null,_u._dispatchInstances=null,_u.isPersistent()||_u.constructor.release(_u)}}function mc$1(_u){if(_u!==null&&(kc=ic$1(kc,_u)),_u=kc,kc=null,_u){if(jc(_u,lc$1),kc)throw Error(u$3(95));if(fa$2)throw _u=ha$2,fa$2=!1,ha$2=null,_u}}function nc$1(_u){return _u=_u.target||_u.srcElement||window,_u.correspondingUseElement&&(_u=_u.correspondingUseElement),_u.nodeType===3?_u.parentNode:_u}function oc$1(_u){if(!ya$1)return!1;_u="on"+_u;var $u=_u in document;return $u||($u=document.createElement("div"),$u.setAttribute(_u,"return;"),$u=typeof $u[_u]=="function"),$u}var pc$1=[];function qc$1(_u){_u.topLevelType=null,_u.nativeEvent=null,_u.targetInst=null,_u.ancestors.length=0,10>pc$1.length&&pc$1.push(_u)}function rc$1(_u,$u,Ru,Ou){if(pc$1.length){var Fu=pc$1.pop();return Fu.topLevelType=_u,Fu.eventSystemFlags=Ou,Fu.nativeEvent=$u,Fu.targetInst=Ru,Fu}return{topLevelType:_u,eventSystemFlags:Ou,nativeEvent:$u,targetInst:Ru,ancestors:[]}}function sc$1(_u){var $u=_u.targetInst,Ru=$u;do{if(!Ru){_u.ancestors.push(Ru);break}var Ou=Ru;if(Ou.tag===3)Ou=Ou.stateNode.containerInfo;else{for(;Ou.return;)Ou=Ou.return;Ou=Ou.tag!==3?null:Ou.stateNode.containerInfo}if(!Ou)break;$u=Ru.tag,$u!==5&&$u!==6||_u.ancestors.push(Ru),Ru=tc(Ou)}while(Ru);for(Ru=0;Ru<_u.ancestors.length;Ru++){$u=_u.ancestors[Ru];var Fu=nc$1(_u.nativeEvent);Ou=_u.topLevelType;var Nu=_u.nativeEvent,Vu=_u.eventSystemFlags;Ru===0&&(Vu|=64);for(var Gu=null,Uu=0;Uu<sa$1.length;Uu++){var Hu=sa$1[Uu];Hu&&(Hu=Hu.extractEvents(Ou,$u,Nu,Fu,Vu))&&(Gu=ic$1(Gu,Hu))}mc$1(Gu)}}function uc$1(_u,$u,Ru){if(!Ru.has(_u)){switch(_u){case"scroll":vc$1($u,"scroll",!0);break;case"focus":case"blur":vc$1($u,"focus",!0),vc$1($u,"blur",!0),Ru.set("blur",null),Ru.set("focus",null);break;case"cancel":case"close":oc$1(_u)&&vc$1($u,_u,!0);break;case"invalid":case"submit":case"reset":break;default:ac$1.indexOf(_u)===-1&&F$3(_u,$u)}Ru.set(_u,null)}}var wc$1,xc,yc$1,zc=!1,Ac$1=[],Bc=null,Cc$1=null,Dc=null,Ec$1=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic$1="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(_u,$u){var Ru=cc$1($u);Hc.forEach(function(Ou){uc$1(Ou,$u,Ru)}),Ic$1.forEach(function(Ou){uc$1(Ou,$u,Ru)})}function Kc$1(_u,$u,Ru,Ou,Fu){return{blockedOn:_u,topLevelType:$u,eventSystemFlags:Ru|32,nativeEvent:Fu,container:Ou}}function Lc(_u,$u){switch(_u){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc$1=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec$1.delete($u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete($u.pointerId)}}function Mc(_u,$u,Ru,Ou,Fu,Nu){return _u===null||_u.nativeEvent!==Nu?(_u=Kc$1($u,Ru,Ou,Fu,Nu),$u!==null&&($u=Nc($u),$u!==null&&xc($u)),_u):(_u.eventSystemFlags|=Ou,_u)}function Oc(_u,$u,Ru,Ou,Fu){switch($u){case"focus":return Bc=Mc(Bc,_u,$u,Ru,Ou,Fu),!0;case"dragenter":return Cc$1=Mc(Cc$1,_u,$u,Ru,Ou,Fu),!0;case"mouseover":return Dc=Mc(Dc,_u,$u,Ru,Ou,Fu),!0;case"pointerover":var Nu=Fu.pointerId;return Ec$1.set(Nu,Mc(Ec$1.get(Nu)||null,_u,$u,Ru,Ou,Fu)),!0;case"gotpointercapture":return Nu=Fu.pointerId,Fc.set(Nu,Mc(Fc.get(Nu)||null,_u,$u,Ru,Ou,Fu)),!0}return!1}function Pc(_u){var $u=tc(_u.target);if($u!==null){var Ru=dc$1($u);if(Ru!==null){if($u=Ru.tag,$u===13){if($u=ec(Ru),$u!==null){_u.blockedOn=$u,r$4.unstable_runWithPriority(_u.priority,function(){yc$1(Ru)});return}}else if($u===3&&Ru.stateNode.hydrate){_u.blockedOn=Ru.tag===3?Ru.stateNode.containerInfo:null;return}}}_u.blockedOn=null}function Qc(_u){if(_u.blockedOn!==null)return!1;var $u=Rc$1(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);if($u!==null){var Ru=Nc($u);return Ru!==null&&xc(Ru),_u.blockedOn=$u,!1}return!0}function Sc(_u,$u,Ru){Qc(_u)&&Ru.delete($u)}function Tc(){for(zc=!1;0<Ac$1.length;){var _u=Ac$1[0];if(_u.blockedOn!==null){_u=Nc(_u.blockedOn),_u!==null&&wc$1(_u);break}var $u=Rc$1(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);$u!==null?_u.blockedOn=$u:Ac$1.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc$1!==null&&Qc(Cc$1)&&(Cc$1=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec$1.forEach(Sc),Fc.forEach(Sc)}function Uc(_u,$u){_u.blockedOn===$u&&(_u.blockedOn=null,zc||(zc=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Tc)))}function Vc$1(_u){function $u(Fu){return Uc(Fu,_u)}if(0<Ac$1.length){Uc(Ac$1[0],_u);for(var Ru=1;Ru<Ac$1.length;Ru++){var Ou=Ac$1[Ru];Ou.blockedOn===_u&&(Ou.blockedOn=null)}}for(Bc!==null&&Uc(Bc,_u),Cc$1!==null&&Uc(Cc$1,_u),Dc!==null&&Uc(Dc,_u),Ec$1.forEach($u),Fc.forEach($u),Ru=0;Ru<Gc.length;Ru++)Ou=Gc[Ru],Ou.blockedOn===_u&&(Ou.blockedOn=null);for(;0<Gc.length&&(Ru=Gc[0],Ru.blockedOn===null);)Pc(Ru),Ru.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc$1=new Map,$c$1=["abort","abort",Xb$1,"animationEnd",Yb$1,"animationIteration",Zb$1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b$1,"transitionEnd","waiting","waiting"];function ad(_u,$u){for(var Ru=0;Ru<_u.length;Ru+=2){var Ou=_u[Ru],Fu=_u[Ru+1],Nu="on"+(Fu[0].toUpperCase()+Fu.slice(1));Nu={phasedRegistrationNames:{bubbled:Nu,captured:Nu+"Capture"},dependencies:[Ou],eventPriority:$u},Zc$1.set(Ou,$u),Yc.set(Ou,Nu),Wc[Fu]=Nu}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c$1,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd$1=0;cd$1<bd.length;cd$1++)Zc$1.set(bd[cd$1],0);var dd=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd=!0;function F$3(_u,$u){vc$1($u,_u,!1)}function vc$1(_u,$u,Ru){var Ou=Zc$1.get($u);switch(Ou===void 0?2:Ou){case 0:Ou=gd.bind(null,$u,1,_u);break;case 1:Ou=hd.bind(null,$u,1,_u);break;default:Ou=id.bind(null,$u,1,_u)}Ru?_u.addEventListener($u,Ou,!0):_u.addEventListener($u,Ou,!1)}function gd(_u,$u,Ru,Ou){Ja$2||Ha$2();var Fu=id,Nu=Ja$2;Ja$2=!0;try{Ga$2(Fu,_u,$u,Ru,Ou)}finally{(Ja$2=Nu)||La$2()}}function hd(_u,$u,Ru,Ou){ed(dd,id.bind(null,_u,$u,Ru,Ou))}function id(_u,$u,Ru,Ou){if(fd)if(0<Ac$1.length&&-1<Hc.indexOf(_u))_u=Kc$1(null,_u,$u,Ru,Ou),Ac$1.push(_u);else{var Fu=Rc$1(_u,$u,Ru,Ou);if(Fu===null)Lc(_u,Ou);else if(-1<Hc.indexOf(_u))_u=Kc$1(Fu,_u,$u,Ru,Ou),Ac$1.push(_u);else if(!Oc(Fu,_u,$u,Ru,Ou)){Lc(_u,Ou),_u=rc$1(_u,Ou,null,$u);try{Ma$2(sc$1,_u)}finally{qc$1(_u)}}}}function Rc$1(_u,$u,Ru,Ou){if(Ru=nc$1(Ou),Ru=tc(Ru),Ru!==null){var Fu=dc$1(Ru);if(Fu===null)Ru=null;else{var Nu=Fu.tag;if(Nu===13){if(Ru=ec(Fu),Ru!==null)return Ru;Ru=null}else if(Nu===3){if(Fu.stateNode.hydrate)return Fu.tag===3?Fu.stateNode.containerInfo:null;Ru=null}else Fu!==Ru&&(Ru=null)}}_u=rc$1(_u,Ou,Ru,$u);try{Ma$2(sc$1,_u)}finally{qc$1(_u)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(_u){kd.forEach(function($u){$u=$u+_u.charAt(0).toUpperCase()+_u.substring(1),jd[$u]=jd[_u]})});function ld(_u,$u,Ru){return $u==null||typeof $u=="boolean"||$u===""?"":Ru||typeof $u!="number"||$u===0||jd.hasOwnProperty(_u)&&jd[_u]?(""+$u).trim():$u+"px"}function md(_u,$u){_u=_u.style;for(var Ru in $u)if($u.hasOwnProperty(Ru)){var Ou=Ru.indexOf("--")===0,Fu=ld(Ru,$u[Ru],Ou);Ru==="float"&&(Ru="cssFloat"),Ou?_u.setProperty(Ru,Fu):_u[Ru]=Fu}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(_u,$u){if($u){if(nd[_u]&&($u.children!=null||$u.dangerouslySetInnerHTML!=null))throw Error(u$3(137,_u,""));if($u.dangerouslySetInnerHTML!=null){if($u.children!=null)throw Error(u$3(60));if(!(typeof $u.dangerouslySetInnerHTML=="object"&&"__html"in $u.dangerouslySetInnerHTML))throw Error(u$3(61))}if($u.style!=null&&typeof $u.style!="object")throw Error(u$3(62,""))}}function pd(_u,$u){if(_u.indexOf("-")===-1)return typeof $u.is=="string";switch(_u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd$1=Mb$1.html;function rd(_u,$u){_u=_u.nodeType===9||_u.nodeType===11?_u:_u.ownerDocument;var Ru=cc$1(_u);$u=wa$1[$u];for(var Ou=0;Ou<$u.length;Ou++)uc$1($u[Ou],_u,Ru)}function sd(){}function td(_u){if(_u=_u||(typeof document!="undefined"?document:void 0),typeof _u=="undefined")return null;try{return _u.activeElement||_u.body}catch{return _u.body}}function ud$1(_u){for(;_u&&_u.firstChild;)_u=_u.firstChild;return _u}function vd(_u,$u){var Ru=ud$1(_u);_u=0;for(var Ou;Ru;){if(Ru.nodeType===3){if(Ou=_u+Ru.textContent.length,_u<=$u&&Ou>=$u)return{node:Ru,offset:$u-_u};_u=Ou}e:{for(;Ru;){if(Ru.nextSibling){Ru=Ru.nextSibling;break e}Ru=Ru.parentNode}Ru=void 0}Ru=ud$1(Ru)}}function wd(_u,$u){return _u&&$u?_u===$u?!0:_u&&_u.nodeType===3?!1:$u&&$u.nodeType===3?wd(_u,$u.parentNode):"contains"in _u?_u.contains($u):_u.compareDocumentPosition?!!(_u.compareDocumentPosition($u)&16):!1:!1}function xd(){for(var _u=window,$u=td();$u instanceof _u.HTMLIFrameElement;){try{var Ru=typeof $u.contentWindow.location.href=="string"}catch{Ru=!1}if(Ru)_u=$u.contentWindow;else break;$u=td(_u.document)}return $u}function yd(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u&&($u==="input"&&(_u.type==="text"||_u.type==="search"||_u.type==="tel"||_u.type==="url"||_u.type==="password")||$u==="textarea"||_u.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd$1(_u,$u){switch(_u){case"button":case"input":case"select":case"textarea":return!!$u.autoFocus}return!1}function Gd$1(_u,$u){return _u==="textarea"||_u==="option"||_u==="noscript"||typeof $u.children=="string"||typeof $u.children=="number"||typeof $u.dangerouslySetInnerHTML=="object"&&$u.dangerouslySetInnerHTML!==null&&$u.dangerouslySetInnerHTML.__html!=null}var Hd$1=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd$1(_u){for(;_u!=null;_u=_u.nextSibling){var $u=_u.nodeType;if($u===1||$u===3)break}return _u}function Kd$1(_u){_u=_u.previousSibling;for(var $u=0;_u;){if(_u.nodeType===8){var Ru=_u.data;if(Ru===zd||Ru===Cd||Ru===Bd){if($u===0)return _u;$u--}else Ru===Ad&&$u++}_u=_u.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd$1="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(_u){var $u=_u[Md];if($u)return $u;for(var Ru=_u.parentNode;Ru;){if($u=Ru[Od]||Ru[Md]){if(Ru=$u.alternate,$u.child!==null||Ru!==null&&Ru.child!==null)for(_u=Kd$1(_u);_u!==null;){if(Ru=_u[Md])return Ru;_u=Kd$1(_u)}return $u}_u=Ru,Ru=_u.parentNode}return null}function Nc(_u){return _u=_u[Md]||_u[Od],!_u||_u.tag!==5&&_u.tag!==6&&_u.tag!==13&&_u.tag!==3?null:_u}function Pd(_u){if(_u.tag===5||_u.tag===6)return _u.stateNode;throw Error(u$3(33))}function Qd$1(_u){return _u[Nd$1]||null}function Rd(_u){do _u=_u.return;while(_u&&_u.tag!==5);return _u||null}function Sd(_u,$u){var Ru=_u.stateNode;if(!Ru)return null;var Ou=la$1(Ru);if(!Ou)return null;Ru=Ou[$u];e:switch($u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ou=!Ou.disabled)||(_u=_u.type,Ou=!(_u==="button"||_u==="input"||_u==="select"||_u==="textarea")),_u=!Ou;break e;default:_u=!1}if(_u)return null;if(Ru&&typeof Ru!="function")throw Error(u$3(231,$u,typeof Ru));return Ru}function Td(_u,$u,Ru){($u=Sd(_u,Ru.dispatchConfig.phasedRegistrationNames[$u]))&&(Ru._dispatchListeners=ic$1(Ru._dispatchListeners,$u),Ru._dispatchInstances=ic$1(Ru._dispatchInstances,_u))}function Ud$1(_u){if(_u&&_u.dispatchConfig.phasedRegistrationNames){for(var $u=_u._targetInst,Ru=[];$u;)Ru.push($u),$u=Rd($u);for($u=Ru.length;0<$u--;)Td(Ru[$u],"captured",_u);for($u=0;$u<Ru.length;$u++)Td(Ru[$u],"bubbled",_u)}}function Vd$1(_u,$u,Ru){_u&&Ru&&Ru.dispatchConfig.registrationName&&($u=Sd(_u,Ru.dispatchConfig.registrationName))&&(Ru._dispatchListeners=ic$1(Ru._dispatchListeners,$u),Ru._dispatchInstances=ic$1(Ru._dispatchInstances,_u))}function Wd$1(_u){_u&&_u.dispatchConfig.registrationName&&Vd$1(_u._targetInst,null,_u)}function Xd$1(_u){jc(_u,Ud$1)}var Yd$1=null,Zd$1=null,$d$1=null;function ae$2(){if($d$1)return $d$1;var _u,$u=Zd$1,Ru=$u.length,Ou,Fu="value"in Yd$1?Yd$1.value:Yd$1.textContent,Nu=Fu.length;for(_u=0;_u<Ru&&$u[_u]===Fu[_u];_u++);var Vu=Ru-_u;for(Ou=1;Ou<=Vu&&$u[Ru-Ou]===Fu[Nu-Ou];Ou++);return $d$1=Fu.slice(_u,1<Ou?1-Ou:void 0)}function be$1(){return!0}function ce$2(){return!1}function G$3(_u,$u,Ru,Ou){this.dispatchConfig=_u,this._targetInst=$u,this.nativeEvent=Ru,_u=this.constructor.Interface;for(var Fu in _u)_u.hasOwnProperty(Fu)&&(($u=_u[Fu])?this[Fu]=$u(Ru):Fu==="target"?this.target=Ou:this[Fu]=Ru[Fu]);return this.isDefaultPrevented=(Ru.defaultPrevented!=null?Ru.defaultPrevented:Ru.returnValue===!1)?be$1:ce$2,this.isPropagationStopped=ce$2,this}n$4(G$3.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _u=this.nativeEvent;_u&&(_u.preventDefault?_u.preventDefault():typeof _u.returnValue!="unknown"&&(_u.returnValue=!1),this.isDefaultPrevented=be$1)},stopPropagation:function(){var _u=this.nativeEvent;_u&&(_u.stopPropagation?_u.stopPropagation():typeof _u.cancelBubble!="unknown"&&(_u.cancelBubble=!0),this.isPropagationStopped=be$1)},persist:function(){this.isPersistent=be$1},isPersistent:ce$2,destructor:function(){var _u=this.constructor.Interface,$u;for($u in _u)this[$u]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$2,this._dispatchInstances=this._dispatchListeners=null}});G$3.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(_u){return _u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$3.extend=function(_u){function $u(){}function Ru(){return Ou.apply(this,arguments)}var Ou=this;$u.prototype=Ou.prototype;var Fu=new $u;return n$4(Fu,Ru.prototype),Ru.prototype=Fu,Ru.prototype.constructor=Ru,Ru.Interface=n$4({},Ou.Interface,_u),Ru.extend=Ou.extend,de$2(Ru),Ru};de$2(G$3);function ee$1(_u,$u,Ru,Ou){if(this.eventPool.length){var Fu=this.eventPool.pop();return this.call(Fu,_u,$u,Ru,Ou),Fu}return new this(_u,$u,Ru,Ou)}function fe$2(_u){if(!(_u instanceof this))throw Error(u$3(279));_u.destructor(),10>this.eventPool.length&&this.eventPool.push(_u)}function de$2(_u){_u.eventPool=[],_u.getPooled=ee$1,_u.release=fe$2}var ge$2=G$3.extend({data:null}),he$1=G$3.extend({data:null}),ie$2=[9,13,27,32],je$2=ya$1&&"CompositionEvent"in window,ke$1=null;ya$1&&"documentMode"in document&&(ke$1=document.documentMode);var le$1=ya$1&&"TextEvent"in window&&!ke$1,me$2=ya$1&&(!je$2||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$2={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$2=!1;function qe$1(_u,$u){switch(_u){case"keyup":return ie$2.indexOf($u.keyCode)!==-1;case"keydown":return $u.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$2(_u){return _u=_u.detail,typeof _u=="object"&&"data"in _u?_u.data:null}var se$2=!1;function te$1(_u,$u){switch(_u){case"compositionend":return re$2($u);case"keypress":return $u.which!==32?null:(pe$2=!0,ne$1);case"textInput":return _u=$u.data,_u===ne$1&&pe$2?null:_u;default:return null}}function ue$2(_u,$u){if(se$2)return _u==="compositionend"||!je$2&&qe$1(_u,$u)?(_u=ae$2(),$d$1=Zd$1=Yd$1=null,se$2=!1,_u):null;switch(_u){case"paste":return null;case"keypress":if(!($u.ctrlKey||$u.altKey||$u.metaKey)||$u.ctrlKey&&$u.altKey){if($u.char&&1<$u.char.length)return $u.char;if($u.which)return String.fromCharCode($u.which)}return null;case"compositionend":return me$2&&$u.locale!=="ko"?null:$u.data;default:return null}}var ve$2={eventTypes:oe$2,extractEvents:function(_u,$u,Ru,Ou){var Fu;if(je$2)e:{switch(_u){case"compositionstart":var Nu=oe$2.compositionStart;break e;case"compositionend":Nu=oe$2.compositionEnd;break e;case"compositionupdate":Nu=oe$2.compositionUpdate;break e}Nu=void 0}else se$2?qe$1(_u,Ru)&&(Nu=oe$2.compositionEnd):_u==="keydown"&&Ru.keyCode===229&&(Nu=oe$2.compositionStart);return Nu?(me$2&&Ru.locale!=="ko"&&(se$2||Nu!==oe$2.compositionStart?Nu===oe$2.compositionEnd&&se$2&&(Fu=ae$2()):(Yd$1=Ou,Zd$1="value"in Yd$1?Yd$1.value:Yd$1.textContent,se$2=!0)),Nu=ge$2.getPooled(Nu,$u,Ru,Ou),Fu?Nu.data=Fu:(Fu=re$2(Ru),Fu!==null&&(Nu.data=Fu)),Xd$1(Nu),Fu=Nu):Fu=null,(_u=le$1?te$1(_u,Ru):ue$2(_u,Ru))?($u=he$1.getPooled(oe$2.beforeInput,$u,Ru,Ou),$u.data=_u,Xd$1($u)):$u=null,Fu===null?$u:$u===null?Fu:[Fu,$u]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u==="input"?!!we$1[_u.type]:$u==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$2(_u,$u,Ru){return _u=G$3.getPooled(ye$1.change,_u,$u,Ru),_u.type="change",Da$2(Ru),Xd$1(_u),_u}var Ae$2=null,Be$1=null;function Ce$1(_u){mc$1(_u)}function De$1(_u){var $u=Pd(_u);if(yb$1($u))return _u}function Ee$1(_u,$u){if(_u==="change")return $u}var Fe$1=!1;ya$1&&(Fe$1=oc$1("input")&&(!document.documentMode||9<document.documentMode));function Ge$2(){Ae$2&&(Ae$2.detachEvent("onpropertychange",He$1),Be$1=Ae$2=null)}function He$1(_u){if(_u.propertyName==="value"&&De$1(Be$1))if(_u=ze$2(Be$1,_u,nc$1(_u)),Ja$2)mc$1(_u);else{Ja$2=!0;try{Fa$2(Ce$1,_u)}finally{Ja$2=!1,La$2()}}}function Ie$1(_u,$u,Ru){_u==="focus"?(Ge$2(),Ae$2=$u,Be$1=Ru,Ae$2.attachEvent("onpropertychange",He$1)):_u==="blur"&&Ge$2()}function Je$1(_u){if(_u==="selectionchange"||_u==="keyup"||_u==="keydown")return De$1(Be$1)}function Ke$1(_u,$u){if(_u==="click")return De$1($u)}function Le$2(_u,$u){if(_u==="input"||_u==="change")return De$1($u)}var Me$1={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(_u,$u,Ru,Ou){var Fu=$u?Pd($u):window,Nu=Fu.nodeName&&Fu.nodeName.toLowerCase();if(Nu==="select"||Nu==="input"&&Fu.type==="file")var Vu=Ee$1;else if(xe$1(Fu))if(Fe$1)Vu=Le$2;else{Vu=Je$1;var Gu=Ie$1}else(Nu=Fu.nodeName)&&Nu.toLowerCase()==="input"&&(Fu.type==="checkbox"||Fu.type==="radio")&&(Vu=Ke$1);if(Vu&&(Vu=Vu(_u,$u)))return ze$2(Vu,Ru,Ou);Gu&&Gu(_u,Fu,$u),_u==="blur"&&(_u=Fu._wrapperState)&&_u.controlled&&Fu.type==="number"&&Db$1(Fu,"number",Fu.value)}},Ne$2=G$3.extend({view:null,detail:null}),Oe$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$2(_u){var $u=this.nativeEvent;return $u.getModifierState?$u.getModifierState(_u):(_u=Oe$2[_u])?!!$u[_u]:!1}function Qe$2(){return Pe$2}var Re$1=0,Se$2=0,Te$1=!1,Ue$1=!1,Ve$1=Ne$2.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$2,button:null,buttons:null,relatedTarget:function(_u){return _u.relatedTarget||(_u.fromElement===_u.srcElement?_u.toElement:_u.fromElement)},movementX:function(_u){if("movementX"in _u)return _u.movementX;var $u=Re$1;return Re$1=_u.screenX,Te$1?_u.type==="mousemove"?_u.screenX-$u:0:(Te$1=!0,0)},movementY:function(_u){if("movementY"in _u)return _u.movementY;var $u=Se$2;return Se$2=_u.screenY,Ue$1?_u.type==="mousemove"?_u.screenY-$u:0:(Ue$1=!0,0)}}),We$1=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$2={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$2={eventTypes:Xe$2,extractEvents:function(_u,$u,Ru,Ou,Fu){var Nu=_u==="mouseover"||_u==="pointerover",Vu=_u==="mouseout"||_u==="pointerout";if(Nu&&(Fu&32)===0&&(Ru.relatedTarget||Ru.fromElement)||!Vu&&!Nu)return null;if(Nu=Ou.window===Ou?Ou:(Nu=Ou.ownerDocument)?Nu.defaultView||Nu.parentWindow:window,Vu){if(Vu=$u,$u=($u=Ru.relatedTarget||Ru.toElement)?tc($u):null,$u!==null){var Gu=dc$1($u);($u!==Gu||$u.tag!==5&&$u.tag!==6)&&($u=null)}}else Vu=null;if(Vu===$u)return null;if(_u==="mouseout"||_u==="mouseover")var Uu=Ve$1,Hu=Xe$2.mouseLeave,Wu=Xe$2.mouseEnter,Qu="mouse";else(_u==="pointerout"||_u==="pointerover")&&(Uu=We$1,Hu=Xe$2.pointerLeave,Wu=Xe$2.pointerEnter,Qu="pointer");if(_u=Vu==null?Nu:Pd(Vu),Nu=$u==null?Nu:Pd($u),Hu=Uu.getPooled(Hu,Vu,Ru,Ou),Hu.type=Qu+"leave",Hu.target=_u,Hu.relatedTarget=Nu,Ru=Uu.getPooled(Wu,$u,Ru,Ou),Ru.type=Qu+"enter",Ru.target=Nu,Ru.relatedTarget=_u,Ou=Vu,Qu=$u,Ou&&Qu)e:{for(Uu=Ou,Wu=Qu,Vu=0,_u=Uu;_u;_u=Rd(_u))Vu++;for(_u=0,$u=Wu;$u;$u=Rd($u))_u++;for(;0<Vu-_u;)Uu=Rd(Uu),Vu--;for(;0<_u-Vu;)Wu=Rd(Wu),_u--;for(;Vu--;){if(Uu===Wu||Uu===Wu.alternate)break e;Uu=Rd(Uu),Wu=Rd(Wu)}Uu=null}else Uu=null;for(Wu=Uu,Uu=[];Ou&&Ou!==Wu&&(Vu=Ou.alternate,!(Vu!==null&&Vu===Wu));)Uu.push(Ou),Ou=Rd(Ou);for(Ou=[];Qu&&Qu!==Wu&&(Vu=Qu.alternate,!(Vu!==null&&Vu===Wu));)Ou.push(Qu),Qu=Rd(Qu);for(Qu=0;Qu<Uu.length;Qu++)Vd$1(Uu[Qu],"bubbled",Hu);for(Qu=Ou.length;0<Qu--;)Vd$1(Ou[Qu],"captured",Ru);return(Fu&64)===0?[Hu]:[Hu,Ru]}};function Ze$2(_u,$u){return _u===$u&&(_u!==0||1/_u===1/$u)||_u!==_u&&$u!==$u}var $e$1=typeof Object.is=="function"?Object.is:Ze$2,af=Object.prototype.hasOwnProperty;function bf$1(_u,$u){if($e$1(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Ru=Object.keys(_u),Ou=Object.keys($u);if(Ru.length!==Ou.length)return!1;for(Ou=0;Ou<Ru.length;Ou++)if(!af.call($u,Ru[Ou])||!$e$1(_u[Ru[Ou]],$u[Ru[Ou]]))return!1;return!0}var cf=ya$1&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef$1=null,ff=null,gf=null,hf=!1;function jf(_u,$u){var Ru=$u.window===$u?$u.document:$u.nodeType===9?$u:$u.ownerDocument;return hf||ef$1==null||ef$1!==td(Ru)?null:(Ru=ef$1,"selectionStart"in Ru&&yd(Ru)?Ru={start:Ru.selectionStart,end:Ru.selectionEnd}:(Ru=(Ru.ownerDocument&&Ru.ownerDocument.defaultView||window).getSelection(),Ru={anchorNode:Ru.anchorNode,anchorOffset:Ru.anchorOffset,focusNode:Ru.focusNode,focusOffset:Ru.focusOffset}),gf&&bf$1(gf,Ru)?null:(gf=Ru,_u=G$3.getPooled(df.select,ff,_u,$u),_u.type="select",_u.target=ef$1,Xd$1(_u),_u))}var kf={eventTypes:df,extractEvents:function(_u,$u,Ru,Ou,Fu,Nu){if(Fu=Nu||(Ou.window===Ou?Ou.document:Ou.nodeType===9?Ou:Ou.ownerDocument),!(Nu=!Fu)){e:{Fu=cc$1(Fu),Nu=wa$1.onSelect;for(var Vu=0;Vu<Nu.length;Vu++)if(!Fu.has(Nu[Vu])){Fu=!1;break e}Fu=!0}Nu=!Fu}if(Nu)return null;switch(Fu=$u?Pd($u):window,_u){case"focus":(xe$1(Fu)||Fu.contentEditable==="true")&&(ef$1=Fu,ff=$u,gf=null);break;case"blur":gf=ff=ef$1=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(Ru,Ou);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(Ru,Ou)}return null}},lf=G$3.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$3.extend({clipboardData:function(_u){return"clipboardData"in _u?_u.clipboardData:window.clipboardData}}),nf$1=Ne$2.extend({relatedTarget:null});function of(_u){var $u=_u.keyCode;return"charCode"in _u?(_u=_u.charCode,_u===0&&$u===13&&(_u=13)):_u=$u,_u===10&&(_u=13),32<=_u||_u===13?_u:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf$1=Ne$2.extend({key:function(_u){if(_u.key){var $u=pf[_u.key]||_u.key;if($u!=="Unidentified")return $u}return _u.type==="keypress"?(_u=of(_u),_u===13?"Enter":String.fromCharCode(_u)):_u.type==="keydown"||_u.type==="keyup"?qf[_u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$2,charCode:function(_u){return _u.type==="keypress"?of(_u):0},keyCode:function(_u){return _u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0},which:function(_u){return _u.type==="keypress"?of(_u):_u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0}}),sf$1=Ve$1.extend({dataTransfer:null}),tf$1=Ne$2.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$2}),uf=G$3.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(_u){return"deltaX"in _u?_u.deltaX:"wheelDeltaX"in _u?-_u.wheelDeltaX:0},deltaY:function(_u){return"deltaY"in _u?_u.deltaY:"wheelDeltaY"in _u?-_u.wheelDeltaY:"wheelDelta"in _u?-_u.wheelDelta:0},deltaZ:null,deltaMode:null}),wf$1={eventTypes:Wc,extractEvents:function(_u,$u,Ru,Ou){var Fu=Yc.get(_u);if(!Fu)return null;switch(_u){case"keypress":if(of(Ru)===0)return null;case"keydown":case"keyup":_u=rf$1;break;case"blur":case"focus":_u=nf$1;break;case"click":if(Ru.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_u=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_u=sf$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_u=tf$1;break;case Xb$1:case Yb$1:case Zb$1:_u=lf;break;case $b$1:_u=uf;break;case"scroll":_u=Ne$2;break;case"wheel":_u=vf;break;case"copy":case"cut":case"paste":_u=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_u=We$1;break;default:_u=G$3}return $u=_u.getPooled(Fu,$u,Ru,Ou),Xd$1($u),$u}};if(pa$1)throw Error(u$3(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf=Nc;la$1=Qd$1;ma$1=xf;na$1=Pd;xa$1({SimpleEventPlugin:wf$1,EnterLeaveEventPlugin:Ye$2,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$2});var yf$1=[],zf=-1;function H$3(_u){0>zf||(_u.current=yf$1[zf],yf$1[zf]=null,zf--)}function I$2(_u,$u){zf++,yf$1[zf]=_u.current,_u.current=$u}var Af={},J$2={current:Af},K$2={current:!1},Bf=Af;function Cf$1(_u,$u){var Ru=_u.type.contextTypes;if(!Ru)return Af;var Ou=_u.stateNode;if(Ou&&Ou.__reactInternalMemoizedUnmaskedChildContext===$u)return Ou.__reactInternalMemoizedMaskedChildContext;var Fu={},Nu;for(Nu in Ru)Fu[Nu]=$u[Nu];return Ou&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=$u,_u.__reactInternalMemoizedMaskedChildContext=Fu),Fu}function L$3(_u){return _u=_u.childContextTypes,_u!=null}function Df(){H$3(K$2),H$3(J$2)}function Ef$1(_u,$u,Ru){if(J$2.current!==Af)throw Error(u$3(168));I$2(J$2,$u),I$2(K$2,Ru)}function Ff(_u,$u,Ru){var Ou=_u.stateNode;if(_u=$u.childContextTypes,typeof Ou.getChildContext!="function")return Ru;Ou=Ou.getChildContext();for(var Fu in Ou)if(!(Fu in _u))throw Error(u$3(108,pb$1($u)||"Unknown",Fu));return n$4({},Ru,{},Ou)}function Gf(_u){return _u=(_u=_u.stateNode)&&_u.__reactInternalMemoizedMergedChildContext||Af,Bf=J$2.current,I$2(J$2,_u),I$2(K$2,K$2.current),!0}function Hf(_u,$u,Ru){var Ou=_u.stateNode;if(!Ou)throw Error(u$3(169));Ru?(_u=Ff(_u,$u,Bf),Ou.__reactInternalMemoizedMergedChildContext=_u,H$3(K$2),H$3(J$2),I$2(J$2,_u)):H$3(K$2),I$2(K$2,Ru)}var If=r$4.unstable_runWithPriority,Jf=r$4.unstable_scheduleCallback,Kf=r$4.unstable_cancelCallback,Lf=r$4.unstable_requestPaint,Mf=r$4.unstable_now,Nf=r$4.unstable_getCurrentPriorityLevel,Of=r$4.unstable_ImmediatePriority,Pf=r$4.unstable_UserBlockingPriority,Qf=r$4.unstable_NormalPriority,Rf=r$4.unstable_LowPriority,Sf=r$4.unstable_IdlePriority,Tf={},Uf=r$4.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$3(332))}}function bg(_u){switch(_u){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$3(332))}}function cg(_u,$u){return _u=bg(_u),If(_u,$u)}function dg(_u,$u,Ru){return _u=bg(_u),Jf(_u,$u,Ru)}function eg(_u){return Wf===null?(Wf=[_u],Xf=Jf(Of,fg)):Wf.push(_u),Tf}function gg(){if(Xf!==null){var _u=Xf;Xf=null,Kf(_u)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var _u=0;try{var $u=Wf;cg(99,function(){for(;_u<$u.length;_u++){var Ru=$u[_u];do Ru=Ru(!0);while(Ru!==null)}}),Wf=null}catch(Ru){throw Wf!==null&&(Wf=Wf.slice(_u+1)),Jf(Of,gg),Ru}finally{Yf=!1}}}function hg(_u,$u,Ru){return Ru/=10,1073741821-(((1073741821-_u+$u/10)/Ru|0)+1)*Ru}function ig(_u,$u){if(_u&&_u.defaultProps){$u=n$4({},$u),_u=_u.defaultProps;for(var Ru in _u)$u[Ru]===void 0&&($u[Ru]=_u[Ru])}return $u}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(_u){var $u=jg.current;H$3(jg),_u.type._context._currentValue=$u}function pg(_u,$u){for(;_u!==null;){var Ru=_u.alternate;if(_u.childExpirationTime<$u)_u.childExpirationTime=$u,Ru!==null&&Ru.childExpirationTime<$u&&(Ru.childExpirationTime=$u);else if(Ru!==null&&Ru.childExpirationTime<$u)Ru.childExpirationTime=$u;else break;_u=_u.return}}function qg$1(_u,$u){kg=_u,mg=lg=null,_u=_u.dependencies,_u!==null&&_u.firstContext!==null&&(_u.expirationTime>=$u&&(rg=!0),_u.firstContext=null)}function sg(_u,$u){if(mg!==_u&&$u!==!1&&$u!==0)if((typeof $u!="number"||$u===1073741823)&&(mg=_u,$u=1073741823),$u={context:_u,observedBits:$u,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=$u,kg.dependencies={expirationTime:0,firstContext:$u,responders:null}}else lg=lg.next=$u;return _u._currentValue}var tg=!1;function ug(_u){_u.updateQueue={baseState:_u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(_u,$u){_u=_u.updateQueue,$u.updateQueue===_u&&($u.updateQueue={baseState:_u.baseState,baseQueue:_u.baseQueue,shared:_u.shared,effects:_u.effects})}function wg(_u,$u){return _u={expirationTime:_u,suspenseConfig:$u,tag:0,payload:null,callback:null,next:null},_u.next=_u}function xg(_u,$u){if(_u=_u.updateQueue,_u!==null){_u=_u.shared;var Ru=_u.pending;Ru===null?$u.next=$u:($u.next=Ru.next,Ru.next=$u),_u.pending=$u}}function yg(_u,$u){var Ru=_u.alternate;Ru!==null&&vg(Ru,_u),_u=_u.updateQueue,Ru=_u.baseQueue,Ru===null?(_u.baseQueue=$u.next=$u,$u.next=$u):($u.next=Ru.next,Ru.next=$u)}function zg(_u,$u,Ru,Ou){var Fu=_u.updateQueue;tg=!1;var Nu=Fu.baseQueue,Vu=Fu.shared.pending;if(Vu!==null){if(Nu!==null){var Gu=Nu.next;Nu.next=Vu.next,Vu.next=Gu}Nu=Vu,Fu.shared.pending=null,Gu=_u.alternate,Gu!==null&&(Gu=Gu.updateQueue,Gu!==null&&(Gu.baseQueue=Vu))}if(Nu!==null){Gu=Nu.next;var Uu=Fu.baseState,Hu=0,Wu=null,Qu=null,qu=null;if(Gu!==null){var Ku=Gu;do{if(Vu=Ku.expirationTime,Vu<Ou){var Yu={expirationTime:Ku.expirationTime,suspenseConfig:Ku.suspenseConfig,tag:Ku.tag,payload:Ku.payload,callback:Ku.callback,next:null};qu===null?(Qu=qu=Yu,Wu=Uu):qu=qu.next=Yu,Vu>Hu&&(Hu=Vu)}else{qu!==null&&(qu=qu.next={expirationTime:1073741823,suspenseConfig:Ku.suspenseConfig,tag:Ku.tag,payload:Ku.payload,callback:Ku.callback,next:null}),Ag(Vu,Ku.suspenseConfig);e:{var _c=_u,Ju=Ku;switch(Vu=$u,Yu=Ru,Ju.tag){case 1:if(_c=Ju.payload,typeof _c=="function"){Uu=_c.call(Yu,Uu,Vu);break e}Uu=_c;break e;case 3:_c.effectTag=_c.effectTag&-4097|64;case 0:if(_c=Ju.payload,Vu=typeof _c=="function"?_c.call(Yu,Uu,Vu):_c,Vu==null)break e;Uu=n$4({},Uu,Vu);break e;case 2:tg=!0}}Ku.callback!==null&&(_u.effectTag|=32,Vu=Fu.effects,Vu===null?Fu.effects=[Ku]:Vu.push(Ku))}if(Ku=Ku.next,Ku===null||Ku===Gu){if(Vu=Fu.shared.pending,Vu===null)break;Ku=Nu.next=Vu.next,Vu.next=Gu,Fu.baseQueue=Nu=Vu,Fu.shared.pending=null}}while(1)}qu===null?Wu=Uu:qu.next=Qu,Fu.baseState=Wu,Fu.baseQueue=qu,Bg(Hu),_u.expirationTime=Hu,_u.memoizedState=Uu}}function Cg(_u,$u,Ru){if(_u=$u.effects,$u.effects=null,_u!==null)for($u=0;$u<_u.length;$u++){var Ou=_u[$u],Fu=Ou.callback;if(Fu!==null){if(Ou.callback=null,Ou=Fu,Fu=Ru,typeof Ou!="function")throw Error(u$3(191,Ou));Ou.call(Fu)}}}var Dg=Wa$2.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(_u,$u,Ru,Ou){$u=_u.memoizedState,Ru=Ru(Ou,$u),Ru=Ru==null?$u:n$4({},$u,Ru),_u.memoizedState=Ru,_u.expirationTime===0&&(_u.updateQueue.baseState=Ru)}var Jg$1={isMounted:function(_u){return(_u=_u._reactInternalFiber)?dc$1(_u)===_u:!1},enqueueSetState:function(_u,$u,Ru){_u=_u._reactInternalFiber;var Ou=Gg(),Fu=Dg.suspense;Ou=Hg(Ou,_u,Fu),Fu=wg(Ou,Fu),Fu.payload=$u,Ru!=null&&(Fu.callback=Ru),xg(_u,Fu),Ig(_u,Ou)},enqueueReplaceState:function(_u,$u,Ru){_u=_u._reactInternalFiber;var Ou=Gg(),Fu=Dg.suspense;Ou=Hg(Ou,_u,Fu),Fu=wg(Ou,Fu),Fu.tag=1,Fu.payload=$u,Ru!=null&&(Fu.callback=Ru),xg(_u,Fu),Ig(_u,Ou)},enqueueForceUpdate:function(_u,$u){_u=_u._reactInternalFiber;var Ru=Gg(),Ou=Dg.suspense;Ru=Hg(Ru,_u,Ou),Ou=wg(Ru,Ou),Ou.tag=2,$u!=null&&(Ou.callback=$u),xg(_u,Ou),Ig(_u,Ru)}};function Kg$1(_u,$u,Ru,Ou,Fu,Nu,Vu){return _u=_u.stateNode,typeof _u.shouldComponentUpdate=="function"?_u.shouldComponentUpdate(Ou,Nu,Vu):$u.prototype&&$u.prototype.isPureReactComponent?!bf$1(Ru,Ou)||!bf$1(Fu,Nu):!0}function Lg(_u,$u,Ru){var Ou=!1,Fu=Af,Nu=$u.contextType;return typeof Nu=="object"&&Nu!==null?Nu=sg(Nu):(Fu=L$3($u)?Bf:J$2.current,Ou=$u.contextTypes,Nu=(Ou=Ou!=null)?Cf$1(_u,Fu):Af),$u=new $u(Ru,Nu),_u.memoizedState=$u.state!==null&&$u.state!==void 0?$u.state:null,$u.updater=Jg$1,_u.stateNode=$u,$u._reactInternalFiber=_u,Ou&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Fu,_u.__reactInternalMemoizedMaskedChildContext=Nu),$u}function Mg(_u,$u,Ru,Ou){_u=$u.state,typeof $u.componentWillReceiveProps=="function"&&$u.componentWillReceiveProps(Ru,Ou),typeof $u.UNSAFE_componentWillReceiveProps=="function"&&$u.UNSAFE_componentWillReceiveProps(Ru,Ou),$u.state!==_u&&Jg$1.enqueueReplaceState($u,$u.state,null)}function Ng(_u,$u,Ru,Ou){var Fu=_u.stateNode;Fu.props=Ru,Fu.state=_u.memoizedState,Fu.refs=Eg,ug(_u);var Nu=$u.contextType;typeof Nu=="object"&&Nu!==null?Fu.context=sg(Nu):(Nu=L$3($u)?Bf:J$2.current,Fu.context=Cf$1(_u,Nu)),zg(_u,Ru,Fu,Ou),Fu.state=_u.memoizedState,Nu=$u.getDerivedStateFromProps,typeof Nu=="function"&&(Fg(_u,$u,Nu,Ru),Fu.state=_u.memoizedState),typeof $u.getDerivedStateFromProps=="function"||typeof Fu.getSnapshotBeforeUpdate=="function"||typeof Fu.UNSAFE_componentWillMount!="function"&&typeof Fu.componentWillMount!="function"||($u=Fu.state,typeof Fu.componentWillMount=="function"&&Fu.componentWillMount(),typeof Fu.UNSAFE_componentWillMount=="function"&&Fu.UNSAFE_componentWillMount(),$u!==Fu.state&&Jg$1.enqueueReplaceState(Fu,Fu.state,null),zg(_u,Ru,Fu,Ou),Fu.state=_u.memoizedState),typeof Fu.componentDidMount=="function"&&(_u.effectTag|=4)}var Og=Array.isArray;function Pg(_u,$u,Ru){if(_u=Ru.ref,_u!==null&&typeof _u!="function"&&typeof _u!="object"){if(Ru._owner){if(Ru=Ru._owner,Ru){if(Ru.tag!==1)throw Error(u$3(309));var Ou=Ru.stateNode}if(!Ou)throw Error(u$3(147,_u));var Fu=""+_u;return $u!==null&&$u.ref!==null&&typeof $u.ref=="function"&&$u.ref._stringRef===Fu?$u.ref:($u=function(Nu){var Vu=Ou.refs;Vu===Eg&&(Vu=Ou.refs={}),Nu===null?delete Vu[Fu]:Vu[Fu]=Nu},$u._stringRef=Fu,$u)}if(typeof _u!="string")throw Error(u$3(284));if(!Ru._owner)throw Error(u$3(290,_u))}return _u}function Qg(_u,$u){if(_u.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call($u)==="[object Object]"?"object with keys {"+Object.keys($u).join(", ")+"}":$u,""))}function Rg(_u){function $u(Ju,Xu){if(_u){var Zu=Ju.lastEffect;Zu!==null?(Zu.nextEffect=Xu,Ju.lastEffect=Xu):Ju.firstEffect=Ju.lastEffect=Xu,Xu.nextEffect=null,Xu.effectTag=8}}function Ru(Ju,Xu){if(!_u)return null;for(;Xu!==null;)$u(Ju,Xu),Xu=Xu.sibling;return null}function Ou(Ju,Xu){for(Ju=new Map;Xu!==null;)Xu.key!==null?Ju.set(Xu.key,Xu):Ju.set(Xu.index,Xu),Xu=Xu.sibling;return Ju}function Fu(Ju,Xu){return Ju=Sg(Ju,Xu),Ju.index=0,Ju.sibling=null,Ju}function Nu(Ju,Xu,Zu){return Ju.index=Zu,_u?(Zu=Ju.alternate,Zu!==null?(Zu=Zu.index,Zu<Xu?(Ju.effectTag=2,Xu):Zu):(Ju.effectTag=2,Xu)):Xu}function Vu(Ju){return _u&&Ju.alternate===null&&(Ju.effectTag=2),Ju}function Gu(Ju,Xu,Zu,Xc){return Xu===null||Xu.tag!==6?(Xu=Tg(Zu,Ju.mode,Xc),Xu.return=Ju,Xu):(Xu=Fu(Xu,Zu),Xu.return=Ju,Xu)}function Uu(Ju,Xu,Zu,Xc){return Xu!==null&&Xu.elementType===Zu.type?(Xc=Fu(Xu,Zu.props),Xc.ref=Pg(Ju,Xu,Zu),Xc.return=Ju,Xc):(Xc=Ug$1(Zu.type,Zu.key,Zu.props,null,Ju.mode,Xc),Xc.ref=Pg(Ju,Xu,Zu),Xc.return=Ju,Xc)}function Hu(Ju,Xu,Zu,Xc){return Xu===null||Xu.tag!==4||Xu.stateNode.containerInfo!==Zu.containerInfo||Xu.stateNode.implementation!==Zu.implementation?(Xu=Vg$1(Zu,Ju.mode,Xc),Xu.return=Ju,Xu):(Xu=Fu(Xu,Zu.children||[]),Xu.return=Ju,Xu)}function Wu(Ju,Xu,Zu,Xc,_h){return Xu===null||Xu.tag!==7?(Xu=Wg(Zu,Ju.mode,Xc,_h),Xu.return=Ju,Xu):(Xu=Fu(Xu,Zu),Xu.return=Ju,Xu)}function Qu(Ju,Xu,Zu){if(typeof Xu=="string"||typeof Xu=="number")return Xu=Tg(""+Xu,Ju.mode,Zu),Xu.return=Ju,Xu;if(typeof Xu=="object"&&Xu!==null){switch(Xu.$$typeof){case Za$2:return Zu=Ug$1(Xu.type,Xu.key,Xu.props,null,Ju.mode,Zu),Zu.ref=Pg(Ju,null,Xu),Zu.return=Ju,Zu;case $a$2:return Xu=Vg$1(Xu,Ju.mode,Zu),Xu.return=Ju,Xu}if(Og(Xu)||nb$1(Xu))return Xu=Wg(Xu,Ju.mode,Zu,null),Xu.return=Ju,Xu;Qg(Ju,Xu)}return null}function qu(Ju,Xu,Zu,Xc){var _h=Xu!==null?Xu.key:null;if(typeof Zu=="string"||typeof Zu=="number")return _h!==null?null:Gu(Ju,Xu,""+Zu,Xc);if(typeof Zu=="object"&&Zu!==null){switch(Zu.$$typeof){case Za$2:return Zu.key===_h?Zu.type===ab$1?Wu(Ju,Xu,Zu.props.children,Xc,_h):Uu(Ju,Xu,Zu,Xc):null;case $a$2:return Zu.key===_h?Hu(Ju,Xu,Zu,Xc):null}if(Og(Zu)||nb$1(Zu))return _h!==null?null:Wu(Ju,Xu,Zu,Xc,null);Qg(Ju,Zu)}return null}function Ku(Ju,Xu,Zu,Xc,_h){if(typeof Xc=="string"||typeof Xc=="number")return Ju=Ju.get(Zu)||null,Gu(Xu,Ju,""+Xc,_h);if(typeof Xc=="object"&&Xc!==null){switch(Xc.$$typeof){case Za$2:return Ju=Ju.get(Xc.key===null?Zu:Xc.key)||null,Xc.type===ab$1?Wu(Xu,Ju,Xc.props.children,_h,Xc.key):Uu(Xu,Ju,Xc,_h);case $a$2:return Ju=Ju.get(Xc.key===null?Zu:Xc.key)||null,Hu(Xu,Ju,Xc,_h)}if(Og(Xc)||nb$1(Xc))return Ju=Ju.get(Zu)||null,Wu(Xu,Ju,Xc,_h,null);Qg(Xu,Xc)}return null}function Yu(Ju,Xu,Zu,Xc){for(var _h=null,ep=null,np=Xu,ap=Xu=0,lp=null;np!==null&&ap<Zu.length;ap++){np.index>ap?(lp=np,np=null):lp=np.sibling;var up=qu(Ju,np,Zu[ap],Xc);if(up===null){np===null&&(np=lp);break}_u&&np&&up.alternate===null&&$u(Ju,np),Xu=Nu(up,Xu,ap),ep===null?_h=up:ep.sibling=up,ep=up,np=lp}if(ap===Zu.length)return Ru(Ju,np),_h;if(np===null){for(;ap<Zu.length;ap++)np=Qu(Ju,Zu[ap],Xc),np!==null&&(Xu=Nu(np,Xu,ap),ep===null?_h=np:ep.sibling=np,ep=np);return _h}for(np=Ou(Ju,np);ap<Zu.length;ap++)lp=Ku(np,Ju,ap,Zu[ap],Xc),lp!==null&&(_u&&lp.alternate!==null&&np.delete(lp.key===null?ap:lp.key),Xu=Nu(lp,Xu,ap),ep===null?_h=lp:ep.sibling=lp,ep=lp);return _u&&np.forEach(function(_f){return $u(Ju,_f)}),_h}function _c(Ju,Xu,Zu,Xc){var _h=nb$1(Zu);if(typeof _h!="function")throw Error(u$3(150));if(Zu=_h.call(Zu),Zu==null)throw Error(u$3(151));for(var ep=_h=null,np=Xu,ap=Xu=0,lp=null,up=Zu.next();np!==null&&!up.done;ap++,up=Zu.next()){np.index>ap?(lp=np,np=null):lp=np.sibling;var _f=qu(Ju,np,up.value,Xc);if(_f===null){np===null&&(np=lp);break}_u&&np&&_f.alternate===null&&$u(Ju,np),Xu=Nu(_f,Xu,ap),ep===null?_h=_f:ep.sibling=_f,ep=_f,np=lp}if(up.done)return Ru(Ju,np),_h;if(np===null){for(;!up.done;ap++,up=Zu.next())up=Qu(Ju,up.value,Xc),up!==null&&(Xu=Nu(up,Xu,ap),ep===null?_h=up:ep.sibling=up,ep=up);return _h}for(np=Ou(Ju,np);!up.done;ap++,up=Zu.next())up=Ku(np,Ju,ap,up.value,Xc),up!==null&&(_u&&up.alternate!==null&&np.delete(up.key===null?ap:up.key),Xu=Nu(up,Xu,ap),ep===null?_h=up:ep.sibling=up,ep=up);return _u&&np.forEach(function(tp){return $u(Ju,tp)}),_h}return function(Ju,Xu,Zu,Xc){var _h=typeof Zu=="object"&&Zu!==null&&Zu.type===ab$1&&Zu.key===null;_h&&(Zu=Zu.props.children);var ep=typeof Zu=="object"&&Zu!==null;if(ep)switch(Zu.$$typeof){case Za$2:e:{for(ep=Zu.key,_h=Xu;_h!==null;){if(_h.key===ep){switch(_h.tag){case 7:if(Zu.type===ab$1){Ru(Ju,_h.sibling),Xu=Fu(_h,Zu.props.children),Xu.return=Ju,Ju=Xu;break e}break;default:if(_h.elementType===Zu.type){Ru(Ju,_h.sibling),Xu=Fu(_h,Zu.props),Xu.ref=Pg(Ju,_h,Zu),Xu.return=Ju,Ju=Xu;break e}}Ru(Ju,_h);break}else $u(Ju,_h);_h=_h.sibling}Zu.type===ab$1?(Xu=Wg(Zu.props.children,Ju.mode,Xc,Zu.key),Xu.return=Ju,Ju=Xu):(Xc=Ug$1(Zu.type,Zu.key,Zu.props,null,Ju.mode,Xc),Xc.ref=Pg(Ju,Xu,Zu),Xc.return=Ju,Ju=Xc)}return Vu(Ju);case $a$2:e:{for(_h=Zu.key;Xu!==null;){if(Xu.key===_h)if(Xu.tag===4&&Xu.stateNode.containerInfo===Zu.containerInfo&&Xu.stateNode.implementation===Zu.implementation){Ru(Ju,Xu.sibling),Xu=Fu(Xu,Zu.children||[]),Xu.return=Ju,Ju=Xu;break e}else{Ru(Ju,Xu);break}else $u(Ju,Xu);Xu=Xu.sibling}Xu=Vg$1(Zu,Ju.mode,Xc),Xu.return=Ju,Ju=Xu}return Vu(Ju)}if(typeof Zu=="string"||typeof Zu=="number")return Zu=""+Zu,Xu!==null&&Xu.tag===6?(Ru(Ju,Xu.sibling),Xu=Fu(Xu,Zu),Xu.return=Ju,Ju=Xu):(Ru(Ju,Xu),Xu=Tg(Zu,Ju.mode,Xc),Xu.return=Ju,Ju=Xu),Vu(Ju);if(Og(Zu))return Yu(Ju,Xu,Zu,Xc);if(nb$1(Zu))return _c(Ju,Xu,Zu,Xc);if(ep&&Qg(Ju,Zu),typeof Zu=="undefined"&&!_h)switch(Ju.tag){case 1:case 0:throw Ju=Ju.type,Error(u$3(152,Ju.displayName||Ju.name||"Component"))}return Ru(Ju,Xu)}}var Xg=Rg(!0),Yg=Rg(!1),Zg$1={},$g$1={current:Zg$1},ah={current:Zg$1},bh={current:Zg$1};function ch(_u){if(_u===Zg$1)throw Error(u$3(174));return _u}function dh(_u,$u){switch(I$2(bh,$u),I$2(ah,_u),I$2($g$1,Zg$1),_u=$u.nodeType,_u){case 9:case 11:$u=($u=$u.documentElement)?$u.namespaceURI:Ob$1(null,"");break;default:_u=_u===8?$u.parentNode:$u,$u=_u.namespaceURI||null,_u=_u.tagName,$u=Ob$1($u,_u)}H$3($g$1),I$2($g$1,$u)}function eh(){H$3($g$1),H$3(ah),H$3(bh)}function fh(_u){ch(bh.current);var $u=ch($g$1.current),Ru=Ob$1($u,_u.type);$u!==Ru&&(I$2(ah,_u),I$2($g$1,Ru))}function gh(_u){ah.current===_u&&(H$3($g$1),H$3(ah))}var M$2={current:0};function hh(_u){for(var $u=_u;$u!==null;){if($u.tag===13){var Ru=$u.memoizedState;if(Ru!==null&&(Ru=Ru.dehydrated,Ru===null||Ru.data===Bd||Ru.data===Cd))return $u}else if($u.tag===19&&$u.memoizedProps.revealOrder!==void 0){if(($u.effectTag&64)!==0)return $u}else if($u.child!==null){$u.child.return=$u,$u=$u.child;continue}if($u===_u)break;for(;$u.sibling===null;){if($u.return===null||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}return null}function ih(_u,$u){return{responder:_u,props:$u}}var jh=Wa$2.ReactCurrentDispatcher,kh=Wa$2.ReactCurrentBatchConfig,lh=0,N$3=null,O$3=null,P$4=null,mh=!1;function Q$3(){throw Error(u$3(321))}function nh(_u,$u){if($u===null)return!1;for(var Ru=0;Ru<$u.length&&Ru<_u.length;Ru++)if(!$e$1(_u[Ru],$u[Ru]))return!1;return!0}function oh(_u,$u,Ru,Ou,Fu,Nu){if(lh=Nu,N$3=$u,$u.memoizedState=null,$u.updateQueue=null,$u.expirationTime=0,jh.current=_u===null||_u.memoizedState===null?ph:qh,_u=Ru(Ou,Fu),$u.expirationTime===lh){Nu=0;do{if($u.expirationTime=0,!(25>Nu))throw Error(u$3(301));Nu+=1,P$4=O$3=null,$u.updateQueue=null,jh.current=rh,_u=Ru(Ou,Fu)}while($u.expirationTime===lh)}if(jh.current=sh,$u=O$3!==null&&O$3.next!==null,lh=0,P$4=O$3=N$3=null,mh=!1,$u)throw Error(u$3(300));return _u}function th(){var _u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$3.memoizedState=P$4=_u:P$4=P$4.next=_u,P$4}function uh(){if(O$3===null){var _u=N$3.alternate;_u=_u!==null?_u.memoizedState:null}else _u=O$3.next;var $u=P$4===null?N$3.memoizedState:P$4.next;if($u!==null)P$4=$u,O$3=_u;else{if(_u===null)throw Error(u$3(310));O$3=_u,_u={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$4===null?N$3.memoizedState=P$4=_u:P$4=P$4.next=_u}return P$4}function vh(_u,$u){return typeof $u=="function"?$u(_u):$u}function wh(_u){var $u=uh(),Ru=$u.queue;if(Ru===null)throw Error(u$3(311));Ru.lastRenderedReducer=_u;var Ou=O$3,Fu=Ou.baseQueue,Nu=Ru.pending;if(Nu!==null){if(Fu!==null){var Vu=Fu.next;Fu.next=Nu.next,Nu.next=Vu}Ou.baseQueue=Fu=Nu,Ru.pending=null}if(Fu!==null){Fu=Fu.next,Ou=Ou.baseState;var Gu=Vu=Nu=null,Uu=Fu;do{var Hu=Uu.expirationTime;if(Hu<lh){var Wu={expirationTime:Uu.expirationTime,suspenseConfig:Uu.suspenseConfig,action:Uu.action,eagerReducer:Uu.eagerReducer,eagerState:Uu.eagerState,next:null};Gu===null?(Vu=Gu=Wu,Nu=Ou):Gu=Gu.next=Wu,Hu>N$3.expirationTime&&(N$3.expirationTime=Hu,Bg(Hu))}else Gu!==null&&(Gu=Gu.next={expirationTime:1073741823,suspenseConfig:Uu.suspenseConfig,action:Uu.action,eagerReducer:Uu.eagerReducer,eagerState:Uu.eagerState,next:null}),Ag(Hu,Uu.suspenseConfig),Ou=Uu.eagerReducer===_u?Uu.eagerState:_u(Ou,Uu.action);Uu=Uu.next}while(Uu!==null&&Uu!==Fu);Gu===null?Nu=Ou:Gu.next=Vu,$e$1(Ou,$u.memoizedState)||(rg=!0),$u.memoizedState=Ou,$u.baseState=Nu,$u.baseQueue=Gu,Ru.lastRenderedState=Ou}return[$u.memoizedState,Ru.dispatch]}function xh(_u){var $u=uh(),Ru=$u.queue;if(Ru===null)throw Error(u$3(311));Ru.lastRenderedReducer=_u;var Ou=Ru.dispatch,Fu=Ru.pending,Nu=$u.memoizedState;if(Fu!==null){Ru.pending=null;var Vu=Fu=Fu.next;do Nu=_u(Nu,Vu.action),Vu=Vu.next;while(Vu!==Fu);$e$1(Nu,$u.memoizedState)||(rg=!0),$u.memoizedState=Nu,$u.baseQueue===null&&($u.baseState=Nu),Ru.lastRenderedState=Nu}return[Nu,Ou]}function yh(_u){var $u=th();return typeof _u=="function"&&(_u=_u()),$u.memoizedState=$u.baseState=_u,_u=$u.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:_u},_u=_u.dispatch=zh.bind(null,N$3,_u),[$u.memoizedState,_u]}function Ah(_u,$u,Ru,Ou){return _u={tag:_u,create:$u,destroy:Ru,deps:Ou,next:null},$u=N$3.updateQueue,$u===null?($u={lastEffect:null},N$3.updateQueue=$u,$u.lastEffect=_u.next=_u):(Ru=$u.lastEffect,Ru===null?$u.lastEffect=_u.next=_u:(Ou=Ru.next,Ru.next=_u,_u.next=Ou,$u.lastEffect=_u)),_u}function Bh(){return uh().memoizedState}function Ch(_u,$u,Ru,Ou){var Fu=th();N$3.effectTag|=_u,Fu.memoizedState=Ah(1|$u,Ru,void 0,Ou===void 0?null:Ou)}function Dh(_u,$u,Ru,Ou){var Fu=uh();Ou=Ou===void 0?null:Ou;var Nu=void 0;if(O$3!==null){var Vu=O$3.memoizedState;if(Nu=Vu.destroy,Ou!==null&&nh(Ou,Vu.deps)){Ah($u,Ru,Nu,Ou);return}}N$3.effectTag|=_u,Fu.memoizedState=Ah(1|$u,Ru,Nu,Ou)}function Eh(_u,$u){return Ch(516,4,_u,$u)}function Fh(_u,$u){return Dh(516,4,_u,$u)}function Gh(_u,$u){return Dh(4,2,_u,$u)}function Hh(_u,$u){if(typeof $u=="function")return _u=_u(),$u(_u),function(){$u(null)};if($u!=null)return _u=_u(),$u.current=_u,function(){$u.current=null}}function Ih(_u,$u,Ru){return Ru=Ru!=null?Ru.concat([_u]):null,Dh(4,2,Hh.bind(null,$u,_u),Ru)}function Jh(){}function Kh(_u,$u){return th().memoizedState=[_u,$u===void 0?null:$u],_u}function Lh(_u,$u){var Ru=uh();$u=$u===void 0?null:$u;var Ou=Ru.memoizedState;return Ou!==null&&$u!==null&&nh($u,Ou[1])?Ou[0]:(Ru.memoizedState=[_u,$u],_u)}function Mh(_u,$u){var Ru=uh();$u=$u===void 0?null:$u;var Ou=Ru.memoizedState;return Ou!==null&&$u!==null&&nh($u,Ou[1])?Ou[0]:(_u=_u(),Ru.memoizedState=[_u,$u],_u)}function Nh(_u,$u,Ru){var Ou=ag();cg(98>Ou?98:Ou,function(){_u(!0)}),cg(97<Ou?97:Ou,function(){var Fu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{_u(!1),Ru()}finally{kh.suspense=Fu}})}function zh(_u,$u,Ru){var Ou=Gg(),Fu=Dg.suspense;Ou=Hg(Ou,_u,Fu),Fu={expirationTime:Ou,suspenseConfig:Fu,action:Ru,eagerReducer:null,eagerState:null,next:null};var Nu=$u.pending;if(Nu===null?Fu.next=Fu:(Fu.next=Nu.next,Nu.next=Fu),$u.pending=Fu,Nu=_u.alternate,_u===N$3||Nu!==null&&Nu===N$3)mh=!0,Fu.expirationTime=lh,N$3.expirationTime=lh;else{if(_u.expirationTime===0&&(Nu===null||Nu.expirationTime===0)&&(Nu=$u.lastRenderedReducer,Nu!==null))try{var Vu=$u.lastRenderedState,Gu=Nu(Vu,Ru);if(Fu.eagerReducer=Nu,Fu.eagerState=Gu,$e$1(Gu,Vu))return}catch{}finally{}Ig(_u,Ou)}}var sh={readContext:sg,useCallback:Q$3,useContext:Q$3,useEffect:Q$3,useImperativeHandle:Q$3,useLayoutEffect:Q$3,useMemo:Q$3,useReducer:Q$3,useRef:Q$3,useState:Q$3,useDebugValue:Q$3,useResponder:Q$3,useDeferredValue:Q$3,useTransition:Q$3},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(_u,$u,Ru){return Ru=Ru!=null?Ru.concat([_u]):null,Ch(4,2,Hh.bind(null,$u,_u),Ru)},useLayoutEffect:function(_u,$u){return Ch(4,2,_u,$u)},useMemo:function(_u,$u){var Ru=th();return $u=$u===void 0?null:$u,_u=_u(),Ru.memoizedState=[_u,$u],_u},useReducer:function(_u,$u,Ru){var Ou=th();return $u=Ru!==void 0?Ru($u):$u,Ou.memoizedState=Ou.baseState=$u,_u=Ou.queue={pending:null,dispatch:null,lastRenderedReducer:_u,lastRenderedState:$u},_u=_u.dispatch=zh.bind(null,N$3,_u),[Ou.memoizedState,_u]},useRef:function(_u){var $u=th();return _u={current:_u},$u.memoizedState=_u},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Ru=yh(_u),Ou=Ru[0],Fu=Ru[1];return Eh(function(){var Nu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Fu(_u)}finally{kh.suspense=Nu}},[_u,$u]),Ou},useTransition:function(_u){var $u=yh(!1),Ru=$u[0];return $u=$u[1],[Kh(Nh.bind(null,$u,_u),[$u,_u]),Ru]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Ru=wh(vh),Ou=Ru[0],Fu=Ru[1];return Fh(function(){var Nu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Fu(_u)}finally{kh.suspense=Nu}},[_u,$u]),Ou},useTransition:function(_u){var $u=wh(vh),Ru=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Ru]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Ru=xh(vh),Ou=Ru[0],Fu=Ru[1];return Fh(function(){var Nu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Fu(_u)}finally{kh.suspense=Nu}},[_u,$u]),Ou},useTransition:function(_u){var $u=xh(vh),Ru=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Ru]}},Oh=null,Ph=null,Qh=!1;function Rh(_u,$u){var Ru=Sh(5,null,null,0);Ru.elementType="DELETED",Ru.type="DELETED",Ru.stateNode=$u,Ru.return=_u,Ru.effectTag=8,_u.lastEffect!==null?(_u.lastEffect.nextEffect=Ru,_u.lastEffect=Ru):_u.firstEffect=_u.lastEffect=Ru}function Th(_u,$u){switch(_u.tag){case 5:var Ru=_u.type;return $u=$u.nodeType!==1||Ru.toLowerCase()!==$u.nodeName.toLowerCase()?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 6:return $u=_u.pendingProps===""||$u.nodeType!==3?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 13:return!1;default:return!1}}function Uh(_u){if(Qh){var $u=Ph;if($u){var Ru=$u;if(!Th(_u,$u)){if($u=Jd$1(Ru.nextSibling),!$u||!Th(_u,$u)){_u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u;return}Rh(Oh,Ru)}Oh=_u,Ph=Jd$1($u.firstChild)}else _u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u}}function Vh(_u){for(_u=_u.return;_u!==null&&_u.tag!==5&&_u.tag!==3&&_u.tag!==13;)_u=_u.return;Oh=_u}function Wh(_u){if(_u!==Oh)return!1;if(!Qh)return Vh(_u),Qh=!0,!1;var $u=_u.type;if(_u.tag!==5||$u!=="head"&&$u!=="body"&&!Gd$1($u,_u.memoizedProps))for($u=Ph;$u;)Rh(_u,$u),$u=Jd$1($u.nextSibling);if(Vh(_u),_u.tag===13){if(_u=_u.memoizedState,_u=_u!==null?_u.dehydrated:null,!_u)throw Error(u$3(317));e:{for(_u=_u.nextSibling,$u=0;_u;){if(_u.nodeType===8){var Ru=_u.data;if(Ru===Ad){if($u===0){Ph=Jd$1(_u.nextSibling);break e}$u--}else Ru!==zd&&Ru!==Cd&&Ru!==Bd||$u++}_u=_u.nextSibling}Ph=null}}else Ph=Oh?Jd$1(_u.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$2.ReactCurrentOwner,rg=!1;function R$3(_u,$u,Ru,Ou){$u.child=_u===null?Yg($u,null,Ru,Ou):Xg($u,_u.child,Ru,Ou)}function Zh(_u,$u,Ru,Ou,Fu){Ru=Ru.render;var Nu=$u.ref;return qg$1($u,Fu),Ou=oh(_u,$u,Ru,Ou,Nu,Fu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Fu&&(_u.expirationTime=0),$h(_u,$u,Fu)):($u.effectTag|=1,R$3(_u,$u,Ou,Fu),$u.child)}function ai$1(_u,$u,Ru,Ou,Fu,Nu){if(_u===null){var Vu=Ru.type;return typeof Vu=="function"&&!bi$1(Vu)&&Vu.defaultProps===void 0&&Ru.compare===null&&Ru.defaultProps===void 0?($u.tag=15,$u.type=Vu,ci$1(_u,$u,Vu,Ou,Fu,Nu)):(_u=Ug$1(Ru.type,null,Ou,null,$u.mode,Nu),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}return Vu=_u.child,Fu<Nu&&(Fu=Vu.memoizedProps,Ru=Ru.compare,Ru=Ru!==null?Ru:bf$1,Ru(Fu,Ou)&&_u.ref===$u.ref)?$h(_u,$u,Nu):($u.effectTag|=1,_u=Sg(Vu,Ou),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}function ci$1(_u,$u,Ru,Ou,Fu,Nu){return _u!==null&&bf$1(_u.memoizedProps,Ou)&&_u.ref===$u.ref&&(rg=!1,Fu<Nu)?($u.expirationTime=_u.expirationTime,$h(_u,$u,Nu)):di$1(_u,$u,Ru,Ou,Nu)}function ei$2(_u,$u){var Ru=$u.ref;(_u===null&&Ru!==null||_u!==null&&_u.ref!==Ru)&&($u.effectTag|=128)}function di$1(_u,$u,Ru,Ou,Fu){var Nu=L$3(Ru)?Bf:J$2.current;return Nu=Cf$1($u,Nu),qg$1($u,Fu),Ru=oh(_u,$u,Ru,Ou,Nu,Fu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Fu&&(_u.expirationTime=0),$h(_u,$u,Fu)):($u.effectTag|=1,R$3(_u,$u,Ru,Fu),$u.child)}function fi$1(_u,$u,Ru,Ou,Fu){if(L$3(Ru)){var Nu=!0;Gf($u)}else Nu=!1;if(qg$1($u,Fu),$u.stateNode===null)_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),Lg($u,Ru,Ou),Ng($u,Ru,Ou,Fu),Ou=!0;else if(_u===null){var Vu=$u.stateNode,Gu=$u.memoizedProps;Vu.props=Gu;var Uu=Vu.context,Hu=Ru.contextType;typeof Hu=="object"&&Hu!==null?Hu=sg(Hu):(Hu=L$3(Ru)?Bf:J$2.current,Hu=Cf$1($u,Hu));var Wu=Ru.getDerivedStateFromProps,Qu=typeof Wu=="function"||typeof Vu.getSnapshotBeforeUpdate=="function";Qu||typeof Vu.UNSAFE_componentWillReceiveProps!="function"&&typeof Vu.componentWillReceiveProps!="function"||(Gu!==Ou||Uu!==Hu)&&Mg($u,Vu,Ou,Hu),tg=!1;var qu=$u.memoizedState;Vu.state=qu,zg($u,Ou,Vu,Fu),Uu=$u.memoizedState,Gu!==Ou||qu!==Uu||K$2.current||tg?(typeof Wu=="function"&&(Fg($u,Ru,Wu,Ou),Uu=$u.memoizedState),(Gu=tg||Kg$1($u,Ru,Gu,Ou,qu,Uu,Hu))?(Qu||typeof Vu.UNSAFE_componentWillMount!="function"&&typeof Vu.componentWillMount!="function"||(typeof Vu.componentWillMount=="function"&&Vu.componentWillMount(),typeof Vu.UNSAFE_componentWillMount=="function"&&Vu.UNSAFE_componentWillMount()),typeof Vu.componentDidMount=="function"&&($u.effectTag|=4)):(typeof Vu.componentDidMount=="function"&&($u.effectTag|=4),$u.memoizedProps=Ou,$u.memoizedState=Uu),Vu.props=Ou,Vu.state=Uu,Vu.context=Hu,Ou=Gu):(typeof Vu.componentDidMount=="function"&&($u.effectTag|=4),Ou=!1)}else Vu=$u.stateNode,vg(_u,$u),Gu=$u.memoizedProps,Vu.props=$u.type===$u.elementType?Gu:ig($u.type,Gu),Uu=Vu.context,Hu=Ru.contextType,typeof Hu=="object"&&Hu!==null?Hu=sg(Hu):(Hu=L$3(Ru)?Bf:J$2.current,Hu=Cf$1($u,Hu)),Wu=Ru.getDerivedStateFromProps,(Qu=typeof Wu=="function"||typeof Vu.getSnapshotBeforeUpdate=="function")||typeof Vu.UNSAFE_componentWillReceiveProps!="function"&&typeof Vu.componentWillReceiveProps!="function"||(Gu!==Ou||Uu!==Hu)&&Mg($u,Vu,Ou,Hu),tg=!1,Uu=$u.memoizedState,Vu.state=Uu,zg($u,Ou,Vu,Fu),qu=$u.memoizedState,Gu!==Ou||Uu!==qu||K$2.current||tg?(typeof Wu=="function"&&(Fg($u,Ru,Wu,Ou),qu=$u.memoizedState),(Wu=tg||Kg$1($u,Ru,Gu,Ou,Uu,qu,Hu))?(Qu||typeof Vu.UNSAFE_componentWillUpdate!="function"&&typeof Vu.componentWillUpdate!="function"||(typeof Vu.componentWillUpdate=="function"&&Vu.componentWillUpdate(Ou,qu,Hu),typeof Vu.UNSAFE_componentWillUpdate=="function"&&Vu.UNSAFE_componentWillUpdate(Ou,qu,Hu)),typeof Vu.componentDidUpdate=="function"&&($u.effectTag|=4),typeof Vu.getSnapshotBeforeUpdate=="function"&&($u.effectTag|=256)):(typeof Vu.componentDidUpdate!="function"||Gu===_u.memoizedProps&&Uu===_u.memoizedState||($u.effectTag|=4),typeof Vu.getSnapshotBeforeUpdate!="function"||Gu===_u.memoizedProps&&Uu===_u.memoizedState||($u.effectTag|=256),$u.memoizedProps=Ou,$u.memoizedState=qu),Vu.props=Ou,Vu.state=qu,Vu.context=Hu,Ou=Wu):(typeof Vu.componentDidUpdate!="function"||Gu===_u.memoizedProps&&Uu===_u.memoizedState||($u.effectTag|=4),typeof Vu.getSnapshotBeforeUpdate!="function"||Gu===_u.memoizedProps&&Uu===_u.memoizedState||($u.effectTag|=256),Ou=!1);return gi$1(_u,$u,Ru,Ou,Nu,Fu)}function gi$1(_u,$u,Ru,Ou,Fu,Nu){ei$2(_u,$u);var Vu=($u.effectTag&64)!==0;if(!Ou&&!Vu)return Fu&&Hf($u,Ru,!1),$h(_u,$u,Nu);Ou=$u.stateNode,Yh.current=$u;var Gu=Vu&&typeof Ru.getDerivedStateFromError!="function"?null:Ou.render();return $u.effectTag|=1,_u!==null&&Vu?($u.child=Xg($u,_u.child,null,Nu),$u.child=Xg($u,null,Gu,Nu)):R$3(_u,$u,Gu,Nu),$u.memoizedState=Ou.state,Fu&&Hf($u,Ru,!0),$u.child}function hi$1(_u){var $u=_u.stateNode;$u.pendingContext?Ef$1(_u,$u.pendingContext,$u.pendingContext!==$u.context):$u.context&&Ef$1(_u,$u.context,!1),dh(_u,$u.containerInfo)}var ii$2={dehydrated:null,retryTime:0};function ji$2(_u,$u,Ru){var Ou=$u.mode,Fu=$u.pendingProps,Nu=M$2.current,Vu=!1,Gu;if((Gu=($u.effectTag&64)!==0)||(Gu=(Nu&2)!==0&&(_u===null||_u.memoizedState!==null)),Gu?(Vu=!0,$u.effectTag&=-65):_u!==null&&_u.memoizedState===null||Fu.fallback===void 0||Fu.unstable_avoidThisFallback===!0||(Nu|=1),I$2(M$2,Nu&1),_u===null){if(Fu.fallback!==void 0&&Uh($u),Vu){if(Vu=Fu.fallback,Fu=Wg(null,Ou,0,null),Fu.return=$u,($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Fu.child=_u;_u!==null;)_u.return=Fu,_u=_u.sibling;return Ru=Wg(Vu,Ou,Ru,null),Ru.return=$u,Fu.sibling=Ru,$u.memoizedState=ii$2,$u.child=Fu,Ru}return Ou=Fu.children,$u.memoizedState=null,$u.child=Yg($u,null,Ou,Ru)}if(_u.memoizedState!==null){if(_u=_u.child,Ou=_u.sibling,Vu){if(Fu=Fu.fallback,Ru=Sg(_u,_u.pendingProps),Ru.return=$u,($u.mode&2)===0&&(Vu=$u.memoizedState!==null?$u.child.child:$u.child,Vu!==_u.child))for(Ru.child=Vu;Vu!==null;)Vu.return=Ru,Vu=Vu.sibling;return Ou=Sg(Ou,Fu),Ou.return=$u,Ru.sibling=Ou,Ru.childExpirationTime=0,$u.memoizedState=ii$2,$u.child=Ru,Ou}return Ru=Xg($u,_u.child,Fu.children,Ru),$u.memoizedState=null,$u.child=Ru}if(_u=_u.child,Vu){if(Vu=Fu.fallback,Fu=Wg(null,Ou,0,null),Fu.return=$u,Fu.child=_u,_u!==null&&(_u.return=Fu),($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Fu.child=_u;_u!==null;)_u.return=Fu,_u=_u.sibling;return Ru=Wg(Vu,Ou,Ru,null),Ru.return=$u,Fu.sibling=Ru,Ru.effectTag|=2,Fu.childExpirationTime=0,$u.memoizedState=ii$2,$u.child=Fu,Ru}return $u.memoizedState=null,$u.child=Xg($u,_u,Fu.children,Ru)}function ki$1(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Ru=_u.alternate;Ru!==null&&Ru.expirationTime<$u&&(Ru.expirationTime=$u),pg(_u.return,$u)}function li$2(_u,$u,Ru,Ou,Fu,Nu){var Vu=_u.memoizedState;Vu===null?_u.memoizedState={isBackwards:$u,rendering:null,renderingStartTime:0,last:Ou,tail:Ru,tailExpiration:0,tailMode:Fu,lastEffect:Nu}:(Vu.isBackwards=$u,Vu.rendering=null,Vu.renderingStartTime=0,Vu.last=Ou,Vu.tail=Ru,Vu.tailExpiration=0,Vu.tailMode=Fu,Vu.lastEffect=Nu)}function mi$1(_u,$u,Ru){var Ou=$u.pendingProps,Fu=Ou.revealOrder,Nu=Ou.tail;if(R$3(_u,$u,Ou.children,Ru),Ou=M$2.current,(Ou&2)!==0)Ou=Ou&1|2,$u.effectTag|=64;else{if(_u!==null&&(_u.effectTag&64)!==0)e:for(_u=$u.child;_u!==null;){if(_u.tag===13)_u.memoizedState!==null&&ki$1(_u,Ru);else if(_u.tag===19)ki$1(_u,Ru);else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===$u)break e;for(;_u.sibling===null;){if(_u.return===null||_u.return===$u)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ou&=1}if(I$2(M$2,Ou),($u.mode&2)===0)$u.memoizedState=null;else switch(Fu){case"forwards":for(Ru=$u.child,Fu=null;Ru!==null;)_u=Ru.alternate,_u!==null&&hh(_u)===null&&(Fu=Ru),Ru=Ru.sibling;Ru=Fu,Ru===null?(Fu=$u.child,$u.child=null):(Fu=Ru.sibling,Ru.sibling=null),li$2($u,!1,Fu,Ru,Nu,$u.lastEffect);break;case"backwards":for(Ru=null,Fu=$u.child,$u.child=null;Fu!==null;){if(_u=Fu.alternate,_u!==null&&hh(_u)===null){$u.child=Fu;break}_u=Fu.sibling,Fu.sibling=Ru,Ru=Fu,Fu=_u}li$2($u,!0,Ru,null,Nu,$u.lastEffect);break;case"together":li$2($u,!1,null,null,void 0,$u.lastEffect);break;default:$u.memoizedState=null}return $u.child}function $h(_u,$u,Ru){_u!==null&&($u.dependencies=_u.dependencies);var Ou=$u.expirationTime;if(Ou!==0&&Bg(Ou),$u.childExpirationTime<Ru)return null;if(_u!==null&&$u.child!==_u.child)throw Error(u$3(153));if($u.child!==null){for(_u=$u.child,Ru=Sg(_u,_u.pendingProps),$u.child=Ru,Ru.return=$u;_u.sibling!==null;)_u=_u.sibling,Ru=Ru.sibling=Sg(_u,_u.pendingProps),Ru.return=$u;Ru.sibling=null}return $u.child}var ni$1,oi$2,pi$1,qi$2;ni$1=function(_u,$u){for(var Ru=$u.child;Ru!==null;){if(Ru.tag===5||Ru.tag===6)_u.appendChild(Ru.stateNode);else if(Ru.tag!==4&&Ru.child!==null){Ru.child.return=Ru,Ru=Ru.child;continue}if(Ru===$u)break;for(;Ru.sibling===null;){if(Ru.return===null||Ru.return===$u)return;Ru=Ru.return}Ru.sibling.return=Ru.return,Ru=Ru.sibling}};oi$2=function(){};pi$1=function(_u,$u,Ru,Ou,Fu){var Nu=_u.memoizedProps;if(Nu!==Ou){var Vu=$u.stateNode;switch(ch($g$1.current),_u=null,Ru){case"input":Nu=zb$1(Vu,Nu),Ou=zb$1(Vu,Ou),_u=[];break;case"option":Nu=Gb$1(Vu,Nu),Ou=Gb$1(Vu,Ou),_u=[];break;case"select":Nu=n$4({},Nu,{value:void 0}),Ou=n$4({},Ou,{value:void 0}),_u=[];break;case"textarea":Nu=Ib$1(Vu,Nu),Ou=Ib$1(Vu,Ou),_u=[];break;default:typeof Nu.onClick!="function"&&typeof Ou.onClick=="function"&&(Vu.onclick=sd)}od(Ru,Ou);var Gu,Uu;Ru=null;for(Gu in Nu)if(!Ou.hasOwnProperty(Gu)&&Nu.hasOwnProperty(Gu)&&Nu[Gu]!=null)if(Gu==="style")for(Uu in Vu=Nu[Gu],Vu)Vu.hasOwnProperty(Uu)&&(Ru||(Ru={}),Ru[Uu]="");else Gu!=="dangerouslySetInnerHTML"&&Gu!=="children"&&Gu!=="suppressContentEditableWarning"&&Gu!=="suppressHydrationWarning"&&Gu!=="autoFocus"&&(va$1.hasOwnProperty(Gu)?_u||(_u=[]):(_u=_u||[]).push(Gu,null));for(Gu in Ou){var Hu=Ou[Gu];if(Vu=Nu!=null?Nu[Gu]:void 0,Ou.hasOwnProperty(Gu)&&Hu!==Vu&&(Hu!=null||Vu!=null))if(Gu==="style")if(Vu){for(Uu in Vu)!Vu.hasOwnProperty(Uu)||Hu&&Hu.hasOwnProperty(Uu)||(Ru||(Ru={}),Ru[Uu]="");for(Uu in Hu)Hu.hasOwnProperty(Uu)&&Vu[Uu]!==Hu[Uu]&&(Ru||(Ru={}),Ru[Uu]=Hu[Uu])}else Ru||(_u||(_u=[]),_u.push(Gu,Ru)),Ru=Hu;else Gu==="dangerouslySetInnerHTML"?(Hu=Hu?Hu.__html:void 0,Vu=Vu?Vu.__html:void 0,Hu!=null&&Vu!==Hu&&(_u=_u||[]).push(Gu,Hu)):Gu==="children"?Vu===Hu||typeof Hu!="string"&&typeof Hu!="number"||(_u=_u||[]).push(Gu,""+Hu):Gu!=="suppressContentEditableWarning"&&Gu!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Gu)?(Hu!=null&&rd(Fu,Gu),_u||Vu===Hu||(_u=[])):(_u=_u||[]).push(Gu,Hu))}Ru&&(_u=_u||[]).push("style",Ru),Fu=_u,($u.updateQueue=Fu)&&($u.effectTag|=4)}};qi$2=function(_u,$u,Ru,Ou){Ru!==Ou&&($u.effectTag|=4)};function ri$2(_u,$u){switch(_u.tailMode){case"hidden":$u=_u.tail;for(var Ru=null;$u!==null;)$u.alternate!==null&&(Ru=$u),$u=$u.sibling;Ru===null?_u.tail=null:Ru.sibling=null;break;case"collapsed":Ru=_u.tail;for(var Ou=null;Ru!==null;)Ru.alternate!==null&&(Ou=Ru),Ru=Ru.sibling;Ou===null?$u||_u.tail===null?_u.tail=null:_u.tail.sibling=null:Ou.sibling=null}}function si$1(_u,$u,Ru){var Ou=$u.pendingProps;switch($u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$3($u.type)&&Df(),null;case 3:return eh(),H$3(K$2),H$3(J$2),Ru=$u.stateNode,Ru.pendingContext&&(Ru.context=Ru.pendingContext,Ru.pendingContext=null),_u!==null&&_u.child!==null||!Wh($u)||($u.effectTag|=4),oi$2($u),null;case 5:gh($u),Ru=ch(bh.current);var Fu=$u.type;if(_u!==null&&$u.stateNode!=null)pi$1(_u,$u,Fu,Ou,Ru),_u.ref!==$u.ref&&($u.effectTag|=128);else{if(!Ou){if($u.stateNode===null)throw Error(u$3(166));return null}if(_u=ch($g$1.current),Wh($u)){Ou=$u.stateNode,Fu=$u.type;var Nu=$u.memoizedProps;switch(Ou[Md]=$u,Ou[Nd$1]=Nu,Fu){case"iframe":case"object":case"embed":F$3("load",Ou);break;case"video":case"audio":for(_u=0;_u<ac$1.length;_u++)F$3(ac$1[_u],Ou);break;case"source":F$3("error",Ou);break;case"img":case"image":case"link":F$3("error",Ou),F$3("load",Ou);break;case"form":F$3("reset",Ou),F$3("submit",Ou);break;case"details":F$3("toggle",Ou);break;case"input":Ab$1(Ou,Nu),F$3("invalid",Ou),rd(Ru,"onChange");break;case"select":Ou._wrapperState={wasMultiple:!!Nu.multiple},F$3("invalid",Ou),rd(Ru,"onChange");break;case"textarea":Jb$1(Ou,Nu),F$3("invalid",Ou),rd(Ru,"onChange")}od(Fu,Nu),_u=null;for(var Vu in Nu)if(Nu.hasOwnProperty(Vu)){var Gu=Nu[Vu];Vu==="children"?typeof Gu=="string"?Ou.textContent!==Gu&&(_u=["children",Gu]):typeof Gu=="number"&&Ou.textContent!==""+Gu&&(_u=["children",""+Gu]):va$1.hasOwnProperty(Vu)&&Gu!=null&&rd(Ru,Vu)}switch(Fu){case"input":xb$1(Ou),Eb$1(Ou,Nu,!0);break;case"textarea":xb$1(Ou),Lb$1(Ou);break;case"select":case"option":break;default:typeof Nu.onClick=="function"&&(Ou.onclick=sd)}Ru=_u,$u.updateQueue=Ru,Ru!==null&&($u.effectTag|=4)}else{switch(Vu=Ru.nodeType===9?Ru:Ru.ownerDocument,_u===qd$1&&(_u=Nb$1(Fu)),_u===qd$1?Fu==="script"?(_u=Vu.createElement("div"),_u.innerHTML="<script><\/script>",_u=_u.removeChild(_u.firstChild)):typeof Ou.is=="string"?_u=Vu.createElement(Fu,{is:Ou.is}):(_u=Vu.createElement(Fu),Fu==="select"&&(Vu=_u,Ou.multiple?Vu.multiple=!0:Ou.size&&(Vu.size=Ou.size))):_u=Vu.createElementNS(_u,Fu),_u[Md]=$u,_u[Nd$1]=Ou,ni$1(_u,$u,!1,!1),$u.stateNode=_u,Vu=pd(Fu,Ou),Fu){case"iframe":case"object":case"embed":F$3("load",_u),Gu=Ou;break;case"video":case"audio":for(Gu=0;Gu<ac$1.length;Gu++)F$3(ac$1[Gu],_u);Gu=Ou;break;case"source":F$3("error",_u),Gu=Ou;break;case"img":case"image":case"link":F$3("error",_u),F$3("load",_u),Gu=Ou;break;case"form":F$3("reset",_u),F$3("submit",_u),Gu=Ou;break;case"details":F$3("toggle",_u),Gu=Ou;break;case"input":Ab$1(_u,Ou),Gu=zb$1(_u,Ou),F$3("invalid",_u),rd(Ru,"onChange");break;case"option":Gu=Gb$1(_u,Ou);break;case"select":_u._wrapperState={wasMultiple:!!Ou.multiple},Gu=n$4({},Ou,{value:void 0}),F$3("invalid",_u),rd(Ru,"onChange");break;case"textarea":Jb$1(_u,Ou),Gu=Ib$1(_u,Ou),F$3("invalid",_u),rd(Ru,"onChange");break;default:Gu=Ou}od(Fu,Gu);var Uu=Gu;for(Nu in Uu)if(Uu.hasOwnProperty(Nu)){var Hu=Uu[Nu];Nu==="style"?md(_u,Hu):Nu==="dangerouslySetInnerHTML"?(Hu=Hu?Hu.__html:void 0,Hu!=null&&Qb$1(_u,Hu)):Nu==="children"?typeof Hu=="string"?(Fu!=="textarea"||Hu!=="")&&Rb$1(_u,Hu):typeof Hu=="number"&&Rb$1(_u,""+Hu):Nu!=="suppressContentEditableWarning"&&Nu!=="suppressHydrationWarning"&&Nu!=="autoFocus"&&(va$1.hasOwnProperty(Nu)?Hu!=null&&rd(Ru,Nu):Hu!=null&&Xa$2(_u,Nu,Hu,Vu))}switch(Fu){case"input":xb$1(_u),Eb$1(_u,Ou,!1);break;case"textarea":xb$1(_u),Lb$1(_u);break;case"option":Ou.value!=null&&_u.setAttribute("value",""+rb$1(Ou.value));break;case"select":_u.multiple=!!Ou.multiple,Ru=Ou.value,Ru!=null?Hb$1(_u,!!Ou.multiple,Ru,!1):Ou.defaultValue!=null&&Hb$1(_u,!!Ou.multiple,Ou.defaultValue,!0);break;default:typeof Gu.onClick=="function"&&(_u.onclick=sd)}Fd$1(Fu,Ou)&&($u.effectTag|=4)}$u.ref!==null&&($u.effectTag|=128)}return null;case 6:if(_u&&$u.stateNode!=null)qi$2(_u,$u,_u.memoizedProps,Ou);else{if(typeof Ou!="string"&&$u.stateNode===null)throw Error(u$3(166));Ru=ch(bh.current),ch($g$1.current),Wh($u)?(Ru=$u.stateNode,Ou=$u.memoizedProps,Ru[Md]=$u,Ru.nodeValue!==Ou&&($u.effectTag|=4)):(Ru=(Ru.nodeType===9?Ru:Ru.ownerDocument).createTextNode(Ou),Ru[Md]=$u,$u.stateNode=Ru)}return null;case 13:return H$3(M$2),Ou=$u.memoizedState,($u.effectTag&64)!==0?($u.expirationTime=Ru,$u):(Ru=Ou!==null,Ou=!1,_u===null?$u.memoizedProps.fallback!==void 0&&Wh($u):(Fu=_u.memoizedState,Ou=Fu!==null,Ru||Fu===null||(Fu=_u.child.sibling,Fu!==null&&(Nu=$u.firstEffect,Nu!==null?($u.firstEffect=Fu,Fu.nextEffect=Nu):($u.firstEffect=$u.lastEffect=Fu,Fu.nextEffect=null),Fu.effectTag=8))),Ru&&!Ou&&($u.mode&2)!==0&&(_u===null&&$u.memoizedProps.unstable_avoidThisFallback!==!0||(M$2.current&1)!==0?S$2===ti$2&&(S$2=ui$1):((S$2===ti$2||S$2===ui$1)&&(S$2=vi$1),wi$1!==0&&T$1!==null&&(xi$1(T$1,U$2),yi$1(T$1,wi$1)))),(Ru||Ou)&&($u.effectTag|=4),null);case 4:return eh(),oi$2($u),null;case 10:return og($u),null;case 17:return L$3($u.type)&&Df(),null;case 19:if(H$3(M$2),Ou=$u.memoizedState,Ou===null)return null;if(Fu=($u.effectTag&64)!==0,Nu=Ou.rendering,Nu===null){if(Fu)ri$2(Ou,!1);else if(S$2!==ti$2||_u!==null&&(_u.effectTag&64)!==0)for(Nu=$u.child;Nu!==null;){if(_u=hh(Nu),_u!==null){for($u.effectTag|=64,ri$2(Ou,!1),Fu=_u.updateQueue,Fu!==null&&($u.updateQueue=Fu,$u.effectTag|=4),Ou.lastEffect===null&&($u.firstEffect=null),$u.lastEffect=Ou.lastEffect,Ou=$u.child;Ou!==null;)Fu=Ou,Nu=Ru,Fu.effectTag&=2,Fu.nextEffect=null,Fu.firstEffect=null,Fu.lastEffect=null,_u=Fu.alternate,_u===null?(Fu.childExpirationTime=0,Fu.expirationTime=Nu,Fu.child=null,Fu.memoizedProps=null,Fu.memoizedState=null,Fu.updateQueue=null,Fu.dependencies=null):(Fu.childExpirationTime=_u.childExpirationTime,Fu.expirationTime=_u.expirationTime,Fu.child=_u.child,Fu.memoizedProps=_u.memoizedProps,Fu.memoizedState=_u.memoizedState,Fu.updateQueue=_u.updateQueue,Nu=_u.dependencies,Fu.dependencies=Nu===null?null:{expirationTime:Nu.expirationTime,firstContext:Nu.firstContext,responders:Nu.responders}),Ou=Ou.sibling;return I$2(M$2,M$2.current&1|2),$u.child}Nu=Nu.sibling}}else{if(!Fu)if(_u=hh(Nu),_u!==null){if($u.effectTag|=64,Fu=!0,Ru=_u.updateQueue,Ru!==null&&($u.updateQueue=Ru,$u.effectTag|=4),ri$2(Ou,!0),Ou.tail===null&&Ou.tailMode==="hidden"&&!Nu.alternate)return $u=$u.lastEffect=Ou.lastEffect,$u!==null&&($u.nextEffect=null),null}else 2*$f()-Ou.renderingStartTime>Ou.tailExpiration&&1<Ru&&($u.effectTag|=64,Fu=!0,ri$2(Ou,!1),$u.expirationTime=$u.childExpirationTime=Ru-1);Ou.isBackwards?(Nu.sibling=$u.child,$u.child=Nu):(Ru=Ou.last,Ru!==null?Ru.sibling=Nu:$u.child=Nu,Ou.last=Nu)}return Ou.tail!==null?(Ou.tailExpiration===0&&(Ou.tailExpiration=$f()+500),Ru=Ou.tail,Ou.rendering=Ru,Ou.tail=Ru.sibling,Ou.lastEffect=$u.lastEffect,Ou.renderingStartTime=$f(),Ru.sibling=null,$u=M$2.current,I$2(M$2,Fu?$u&1|2:$u&1),Ru):null}throw Error(u$3(156,$u.tag))}function zi$2(_u){switch(_u.tag){case 1:L$3(_u.type)&&Df();var $u=_u.effectTag;return $u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 3:if(eh(),H$3(K$2),H$3(J$2),$u=_u.effectTag,($u&64)!==0)throw Error(u$3(285));return _u.effectTag=$u&-4097|64,_u;case 5:return gh(_u),null;case 13:return H$3(M$2),$u=_u.effectTag,$u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 19:return H$3(M$2),null;case 4:return eh(),null;case 10:return og(_u),null;default:return null}}function Ai$1(_u,$u){return{value:_u,source:$u,stack:qb$1($u)}}var Bi$2=typeof WeakSet=="function"?WeakSet:Set;function Ci$2(_u,$u){var Ru=$u.source,Ou=$u.stack;Ou===null&&Ru!==null&&(Ou=qb$1(Ru)),Ru!==null&&pb$1(Ru.type),$u=$u.value,_u!==null&&_u.tag===1&&pb$1(_u.type);try{console.error($u)}catch(Fu){setTimeout(function(){throw Fu})}}function Di$1(_u,$u){try{$u.props=_u.memoizedProps,$u.state=_u.memoizedState,$u.componentWillUnmount()}catch(Ru){Ei$2(_u,Ru)}}function Fi$1(_u){var $u=_u.ref;if($u!==null)if(typeof $u=="function")try{$u(null)}catch(Ru){Ei$2(_u,Ru)}else $u.current=null}function Gi$1(_u,$u){switch($u.tag){case 0:case 11:case 15:case 22:return;case 1:if($u.effectTag&256&&_u!==null){var Ru=_u.memoizedProps,Ou=_u.memoizedState;_u=$u.stateNode,$u=_u.getSnapshotBeforeUpdate($u.elementType===$u.type?Ru:ig($u.type,Ru),Ou),_u.__reactInternalSnapshotBeforeUpdate=$u}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$2(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Ru=$u=$u.next;do{if((Ru.tag&_u)===_u){var Ou=Ru.destroy;Ru.destroy=void 0,Ou!==void 0&&Ou()}Ru=Ru.next}while(Ru!==$u)}}function Ii$2(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Ru=$u=$u.next;do{if((Ru.tag&_u)===_u){var Ou=Ru.create;Ru.destroy=Ou()}Ru=Ru.next}while(Ru!==$u)}}function Ji$2(_u,$u,Ru){switch(Ru.tag){case 0:case 11:case 15:case 22:Ii$2(3,Ru);return;case 1:if(_u=Ru.stateNode,Ru.effectTag&4)if($u===null)_u.componentDidMount();else{var Ou=Ru.elementType===Ru.type?$u.memoizedProps:ig(Ru.type,$u.memoizedProps);_u.componentDidUpdate(Ou,$u.memoizedState,_u.__reactInternalSnapshotBeforeUpdate)}$u=Ru.updateQueue,$u!==null&&Cg(Ru,$u,_u);return;case 3:if($u=Ru.updateQueue,$u!==null){if(_u=null,Ru.child!==null)switch(Ru.child.tag){case 5:_u=Ru.child.stateNode;break;case 1:_u=Ru.child.stateNode}Cg(Ru,$u,_u)}return;case 5:_u=Ru.stateNode,$u===null&&Ru.effectTag&4&&Fd$1(Ru.type,Ru.memoizedProps)&&_u.focus();return;case 6:return;case 4:return;case 12:return;case 13:Ru.memoizedState===null&&(Ru=Ru.alternate,Ru!==null&&(Ru=Ru.memoizedState,Ru!==null&&(Ru=Ru.dehydrated,Ru!==null&&Vc$1(Ru))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$2(_u,$u,Ru){switch(typeof Li$1=="function"&&Li$1($u),$u.tag){case 0:case 11:case 14:case 15:case 22:if(_u=$u.updateQueue,_u!==null&&(_u=_u.lastEffect,_u!==null)){var Ou=_u.next;cg(97<Ru?97:Ru,function(){var Fu=Ou;do{var Nu=Fu.destroy;if(Nu!==void 0){var Vu=$u;try{Nu()}catch(Gu){Ei$2(Vu,Gu)}}Fu=Fu.next}while(Fu!==Ou)})}break;case 1:Fi$1($u),Ru=$u.stateNode,typeof Ru.componentWillUnmount=="function"&&Di$1($u,Ru);break;case 5:Fi$1($u);break;case 4:Mi$2(_u,$u,Ru)}}function Ni$1(_u){var $u=_u.alternate;_u.return=null,_u.child=null,_u.memoizedState=null,_u.updateQueue=null,_u.dependencies=null,_u.alternate=null,_u.firstEffect=null,_u.lastEffect=null,_u.pendingProps=null,_u.memoizedProps=null,_u.stateNode=null,$u!==null&&Ni$1($u)}function Oi$2(_u){return _u.tag===5||_u.tag===3||_u.tag===4}function Pi$2(_u){e:{for(var $u=_u.return;$u!==null;){if(Oi$2($u)){var Ru=$u;break e}$u=$u.return}throw Error(u$3(160))}switch($u=Ru.stateNode,Ru.tag){case 5:var Ou=!1;break;case 3:$u=$u.containerInfo,Ou=!0;break;case 4:$u=$u.containerInfo,Ou=!0;break;default:throw Error(u$3(161))}Ru.effectTag&16&&(Rb$1($u,""),Ru.effectTag&=-17);e:t:for(Ru=_u;;){for(;Ru.sibling===null;){if(Ru.return===null||Oi$2(Ru.return)){Ru=null;break e}Ru=Ru.return}for(Ru.sibling.return=Ru.return,Ru=Ru.sibling;Ru.tag!==5&&Ru.tag!==6&&Ru.tag!==18;){if(Ru.effectTag&2||Ru.child===null||Ru.tag===4)continue t;Ru.child.return=Ru,Ru=Ru.child}if(!(Ru.effectTag&2)){Ru=Ru.stateNode;break e}}Ou?Qi$2(_u,Ru,$u):Ri$2(_u,Ru,$u)}function Qi$2(_u,$u,Ru){var Ou=_u.tag,Fu=Ou===5||Ou===6;if(Fu)_u=Fu?_u.stateNode:_u.stateNode.instance,$u?Ru.nodeType===8?Ru.parentNode.insertBefore(_u,$u):Ru.insertBefore(_u,$u):(Ru.nodeType===8?($u=Ru.parentNode,$u.insertBefore(_u,Ru)):($u=Ru,$u.appendChild(_u)),Ru=Ru._reactRootContainer,Ru!=null||$u.onclick!==null||($u.onclick=sd));else if(Ou!==4&&(_u=_u.child,_u!==null))for(Qi$2(_u,$u,Ru),_u=_u.sibling;_u!==null;)Qi$2(_u,$u,Ru),_u=_u.sibling}function Ri$2(_u,$u,Ru){var Ou=_u.tag,Fu=Ou===5||Ou===6;if(Fu)_u=Fu?_u.stateNode:_u.stateNode.instance,$u?Ru.insertBefore(_u,$u):Ru.appendChild(_u);else if(Ou!==4&&(_u=_u.child,_u!==null))for(Ri$2(_u,$u,Ru),_u=_u.sibling;_u!==null;)Ri$2(_u,$u,Ru),_u=_u.sibling}function Mi$2(_u,$u,Ru){for(var Ou=$u,Fu=!1,Nu,Vu;;){if(!Fu){Fu=Ou.return;e:for(;;){if(Fu===null)throw Error(u$3(160));switch(Nu=Fu.stateNode,Fu.tag){case 5:Vu=!1;break e;case 3:Nu=Nu.containerInfo,Vu=!0;break e;case 4:Nu=Nu.containerInfo,Vu=!0;break e}Fu=Fu.return}Fu=!0}if(Ou.tag===5||Ou.tag===6){e:for(var Gu=_u,Uu=Ou,Hu=Ru,Wu=Uu;;)if(Ki$2(Gu,Wu,Hu),Wu.child!==null&&Wu.tag!==4)Wu.child.return=Wu,Wu=Wu.child;else{if(Wu===Uu)break e;for(;Wu.sibling===null;){if(Wu.return===null||Wu.return===Uu)break e;Wu=Wu.return}Wu.sibling.return=Wu.return,Wu=Wu.sibling}Vu?(Gu=Nu,Uu=Ou.stateNode,Gu.nodeType===8?Gu.parentNode.removeChild(Uu):Gu.removeChild(Uu)):Nu.removeChild(Ou.stateNode)}else if(Ou.tag===4){if(Ou.child!==null){Nu=Ou.stateNode.containerInfo,Vu=!0,Ou.child.return=Ou,Ou=Ou.child;continue}}else if(Ki$2(_u,Ou,Ru),Ou.child!==null){Ou.child.return=Ou,Ou=Ou.child;continue}if(Ou===$u)break;for(;Ou.sibling===null;){if(Ou.return===null||Ou.return===$u)return;Ou=Ou.return,Ou.tag===4&&(Fu=!1)}Ou.sibling.return=Ou.return,Ou=Ou.sibling}}function Si$1(_u,$u){switch($u.tag){case 0:case 11:case 14:case 15:case 22:Hi$2(3,$u);return;case 1:return;case 5:var Ru=$u.stateNode;if(Ru!=null){var Ou=$u.memoizedProps,Fu=_u!==null?_u.memoizedProps:Ou;_u=$u.type;var Nu=$u.updateQueue;if($u.updateQueue=null,Nu!==null){for(Ru[Nd$1]=Ou,_u==="input"&&Ou.type==="radio"&&Ou.name!=null&&Bb$1(Ru,Ou),pd(_u,Fu),$u=pd(_u,Ou),Fu=0;Fu<Nu.length;Fu+=2){var Vu=Nu[Fu],Gu=Nu[Fu+1];Vu==="style"?md(Ru,Gu):Vu==="dangerouslySetInnerHTML"?Qb$1(Ru,Gu):Vu==="children"?Rb$1(Ru,Gu):Xa$2(Ru,Vu,Gu,$u)}switch(_u){case"input":Cb$1(Ru,Ou);break;case"textarea":Kb$1(Ru,Ou);break;case"select":$u=Ru._wrapperState.wasMultiple,Ru._wrapperState.wasMultiple=!!Ou.multiple,_u=Ou.value,_u!=null?Hb$1(Ru,!!Ou.multiple,_u,!1):$u!==!!Ou.multiple&&(Ou.defaultValue!=null?Hb$1(Ru,!!Ou.multiple,Ou.defaultValue,!0):Hb$1(Ru,!!Ou.multiple,Ou.multiple?[]:"",!1))}}}return;case 6:if($u.stateNode===null)throw Error(u$3(162));$u.stateNode.nodeValue=$u.memoizedProps;return;case 3:$u=$u.stateNode,$u.hydrate&&($u.hydrate=!1,Vc$1($u.containerInfo));return;case 12:return;case 13:if(Ru=$u,$u.memoizedState===null?Ou=!1:(Ou=!0,Ru=$u.child,Ti$1=$f()),Ru!==null)e:for(_u=Ru;;){if(_u.tag===5)Nu=_u.stateNode,Ou?(Nu=Nu.style,typeof Nu.setProperty=="function"?Nu.setProperty("display","none","important"):Nu.display="none"):(Nu=_u.stateNode,Fu=_u.memoizedProps.style,Fu=Fu!=null&&Fu.hasOwnProperty("display")?Fu.display:null,Nu.style.display=ld("display",Fu));else if(_u.tag===6)_u.stateNode.nodeValue=Ou?"":_u.memoizedProps;else if(_u.tag===13&&_u.memoizedState!==null&&_u.memoizedState.dehydrated===null){Nu=_u.child.sibling,Nu.return=_u,_u=Nu;continue}else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Ru)break;for(;_u.sibling===null;){if(_u.return===null||_u.return===Ru)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ui$2($u);return;case 19:Ui$2($u);return;case 17:return}throw Error(u$3(163))}function Ui$2(_u){var $u=_u.updateQueue;if($u!==null){_u.updateQueue=null;var Ru=_u.stateNode;Ru===null&&(Ru=_u.stateNode=new Bi$2),$u.forEach(function(Ou){var Fu=Vi$2.bind(null,_u,Ou);Ru.has(Ou)||(Ru.add(Ou),Ou.then(Fu,Fu))})}}var Wi$2=typeof WeakMap=="function"?WeakMap:Map;function Xi$2(_u,$u,Ru){Ru=wg(Ru,null),Ru.tag=3,Ru.payload={element:null};var Ou=$u.value;return Ru.callback=function(){Yi$1||(Yi$1=!0,Zi$2=Ou),Ci$2(_u,$u)},Ru}function $i$1(_u,$u,Ru){Ru=wg(Ru,null),Ru.tag=3;var Ou=_u.type.getDerivedStateFromError;if(typeof Ou=="function"){var Fu=$u.value;Ru.payload=function(){return Ci$2(_u,$u),Ou(Fu)}}var Nu=_u.stateNode;return Nu!==null&&typeof Nu.componentDidCatch=="function"&&(Ru.callback=function(){typeof Ou!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$2(_u,$u));var Vu=$u.stack;this.componentDidCatch($u.value,{componentStack:Vu!==null?Vu:""})}),Ru}var bj=Math.ceil,cj=Wa$2.ReactCurrentDispatcher,dj=Wa$2.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$2=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$4=V$2,T$1=null,X$3=null,U$2=0,S$2=ti$2,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$2=null,Yi$1=!1,Zi$2=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$4&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(_u,$u,Ru){if($u=$u.mode,($u&2)===0)return 1073741823;var Ou=ag();if(($u&4)===0)return Ou===99?1073741823:1073741822;if((W$4&fj)!==V$2)return U$2;if(Ru!==null)_u=hg(_u,Ru.timeoutMs|0||5e3,250);else switch(Ou){case 99:_u=1073741823;break;case 98:_u=hg(_u,150,100);break;case 97:case 96:_u=hg(_u,5e3,250);break;case 95:_u=2;break;default:throw Error(u$3(326))}return T$1!==null&&_u===U$2&&--_u,_u}function Ig(_u,$u){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(_u=xj(_u,$u),_u!==null){var Ru=ag();$u===1073741823?(W$4&ej)!==V$2&&(W$4&(fj|gj))===V$2?yj(_u):(Z$2(_u),W$4===V$2&&gg()):Z$2(_u),(W$4&4)===V$2||Ru!==98&&Ru!==99||(tj===null?tj=new Map([[_u,$u]]):(Ru=tj.get(_u),(Ru===void 0||Ru>$u)&&tj.set(_u,$u)))}}function xj(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Ru=_u.alternate;Ru!==null&&Ru.expirationTime<$u&&(Ru.expirationTime=$u);var Ou=_u.return,Fu=null;if(Ou===null&&_u.tag===3)Fu=_u.stateNode;else for(;Ou!==null;){if(Ru=Ou.alternate,Ou.childExpirationTime<$u&&(Ou.childExpirationTime=$u),Ru!==null&&Ru.childExpirationTime<$u&&(Ru.childExpirationTime=$u),Ou.return===null&&Ou.tag===3){Fu=Ou.stateNode;break}Ou=Ou.return}return Fu!==null&&(T$1===Fu&&(Bg($u),S$2===vi$1&&xi$1(Fu,U$2)),yi$1(Fu,$u)),Fu}function zj(_u){var $u=_u.lastExpiredTime;if($u!==0||($u=_u.firstPendingTime,!Aj(_u,$u)))return $u;var Ru=_u.lastPingedTime;return _u=_u.nextKnownPendingLevel,_u=Ru>_u?Ru:_u,2>=_u&&$u!==_u?0:_u}function Z$2(_u){if(_u.lastExpiredTime!==0)_u.callbackExpirationTime=1073741823,_u.callbackPriority=99,_u.callbackNode=eg(yj.bind(null,_u));else{var $u=zj(_u),Ru=_u.callbackNode;if($u===0)Ru!==null&&(_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90);else{var Ou=Gg();if($u===1073741823?Ou=99:$u===1||$u===2?Ou=95:(Ou=10*(1073741821-$u)-10*(1073741821-Ou),Ou=0>=Ou?99:250>=Ou?98:5250>=Ou?97:95),Ru!==null){var Fu=_u.callbackPriority;if(_u.callbackExpirationTime===$u&&Fu>=Ou)return;Ru!==Tf&&Kf(Ru)}_u.callbackExpirationTime=$u,_u.callbackPriority=Ou,$u=$u===1073741823?eg(yj.bind(null,_u)):dg(Ou,Bj.bind(null,_u),{timeout:10*(1073741821-$u)-$f()}),_u.callbackNode=$u}}}function Bj(_u,$u){if(wj=0,$u)return $u=Gg(),Cj(_u,$u),Z$2(_u),null;var Ru=zj(_u);if(Ru!==0){if($u=_u.callbackNode,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&Ru===U$2||Ej(_u,Ru),X$3!==null){var Ou=W$4;W$4|=fj;var Fu=Fj();do try{Gj();break}catch(Gu){Hj(_u,Gu)}while(1);if(ng(),W$4=Ou,cj.current=Fu,S$2===hj)throw $u=kj,Ej(_u,Ru),xi$1(_u,Ru),Z$2(_u),$u;if(X$3===null)switch(Fu=_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Ru,Ou=S$2,T$1=null,Ou){case ti$2:case hj:throw Error(u$3(345));case ij:Cj(_u,2<Ru?2:Ru);break;case ui$1:if(xi$1(_u,Ru),Ou=_u.lastSuspendedTime,Ru===Ou&&(_u.nextKnownPendingLevel=Ij(Fu)),lj===1073741823&&(Fu=Ti$1+pj-$f(),10<Fu)){if(oj){var Nu=_u.lastPingedTime;if(Nu===0||Nu>=Ru){_u.lastPingedTime=Ru,Ej(_u,Ru);break}}if(Nu=zj(_u),Nu!==0&&Nu!==Ru)break;if(Ou!==0&&Ou!==Ru){_u.lastPingedTime=Ou;break}_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Fu);break}Jj(_u);break;case vi$1:if(xi$1(_u,Ru),Ou=_u.lastSuspendedTime,Ru===Ou&&(_u.nextKnownPendingLevel=Ij(Fu)),oj&&(Fu=_u.lastPingedTime,Fu===0||Fu>=Ru)){_u.lastPingedTime=Ru,Ej(_u,Ru);break}if(Fu=zj(_u),Fu!==0&&Fu!==Ru)break;if(Ou!==0&&Ou!==Ru){_u.lastPingedTime=Ou;break}if(mj!==1073741823?Ou=10*(1073741821-mj)-$f():lj===1073741823?Ou=0:(Ou=10*(1073741821-lj)-5e3,Fu=$f(),Ru=10*(1073741821-Ru)-Fu,Ou=Fu-Ou,0>Ou&&(Ou=0),Ou=(120>Ou?120:480>Ou?480:1080>Ou?1080:1920>Ou?1920:3e3>Ou?3e3:4320>Ou?4320:1960*bj(Ou/1960))-Ou,Ru<Ou&&(Ou=Ru)),10<Ou){_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Ou);break}Jj(_u);break;case jj:if(lj!==1073741823&&nj!==null){Nu=lj;var Vu=nj;if(Ou=Vu.busyMinDurationMs|0,0>=Ou?Ou=0:(Fu=Vu.busyDelayMs|0,Nu=$f()-(10*(1073741821-Nu)-(Vu.timeoutMs|0||5e3)),Ou=Nu<=Fu?0:Fu+Ou-Nu),10<Ou){xi$1(_u,Ru),_u.timeoutHandle=Hd$1(Jj.bind(null,_u),Ou);break}}Jj(_u);break;default:throw Error(u$3(329))}if(Z$2(_u),_u.callbackNode===$u)return Bj.bind(null,_u)}}return null}function yj(_u){var $u=_u.lastExpiredTime;if($u=$u!==0?$u:1073741823,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),_u===T$1&&$u===U$2||Ej(_u,$u),X$3!==null){var Ru=W$4;W$4|=fj;var Ou=Fj();do try{Kj();break}catch(Fu){Hj(_u,Fu)}while(1);if(ng(),W$4=Ru,cj.current=Ou,S$2===hj)throw Ru=kj,Ej(_u,$u),xi$1(_u,$u),Z$2(_u),Ru;if(X$3!==null)throw Error(u$3(261));_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=$u,T$1=null,Jj(_u),Z$2(_u)}return null}function Lj(){if(tj!==null){var _u=tj;tj=null,_u.forEach(function($u,Ru){Cj(Ru,$u),Z$2(Ru)}),gg()}}function Mj(_u,$u){var Ru=W$4;W$4|=1;try{return _u($u)}finally{W$4=Ru,W$4===V$2&&gg()}}function Nj(_u,$u){var Ru=W$4;W$4&=-2,W$4|=ej;try{return _u($u)}finally{W$4=Ru,W$4===V$2&&gg()}}function Ej(_u,$u){_u.finishedWork=null,_u.finishedExpirationTime=0;var Ru=_u.timeoutHandle;if(Ru!==-1&&(_u.timeoutHandle=-1,Id(Ru)),X$3!==null)for(Ru=X$3.return;Ru!==null;){var Ou=Ru;switch(Ou.tag){case 1:Ou=Ou.type.childContextTypes,Ou!=null&&Df();break;case 3:eh(),H$3(K$2),H$3(J$2);break;case 5:gh(Ou);break;case 4:eh();break;case 13:H$3(M$2);break;case 19:H$3(M$2);break;case 10:og(Ou)}Ru=Ru.return}T$1=_u,X$3=Sg(_u.current,null),U$2=$u,S$2=ti$2,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(_u,$u){do{try{if(ng(),jh.current=sh,mh)for(var Ru=N$3.memoizedState;Ru!==null;){var Ou=Ru.queue;Ou!==null&&(Ou.pending=null),Ru=Ru.next}if(lh=0,P$4=O$3=N$3=null,mh=!1,X$3===null||X$3.return===null)return S$2=hj,kj=$u,X$3=null;e:{var Fu=_u,Nu=X$3.return,Vu=X$3,Gu=$u;if($u=U$2,Vu.effectTag|=2048,Vu.firstEffect=Vu.lastEffect=null,Gu!==null&&typeof Gu=="object"&&typeof Gu.then=="function"){var Uu=Gu;if((Vu.mode&2)===0){var Hu=Vu.alternate;Hu?(Vu.updateQueue=Hu.updateQueue,Vu.memoizedState=Hu.memoizedState,Vu.expirationTime=Hu.expirationTime):(Vu.updateQueue=null,Vu.memoizedState=null)}var Wu=(M$2.current&1)!==0,Qu=Nu;do{var qu;if(qu=Qu.tag===13){var Ku=Qu.memoizedState;if(Ku!==null)qu=Ku.dehydrated!==null;else{var Yu=Qu.memoizedProps;qu=Yu.fallback===void 0?!1:Yu.unstable_avoidThisFallback!==!0?!0:!Wu}}if(qu){var _c=Qu.updateQueue;if(_c===null){var Ju=new Set;Ju.add(Uu),Qu.updateQueue=Ju}else _c.add(Uu);if((Qu.mode&2)===0){if(Qu.effectTag|=64,Vu.effectTag&=-2981,Vu.tag===1)if(Vu.alternate===null)Vu.tag=17;else{var Xu=wg(1073741823,null);Xu.tag=2,xg(Vu,Xu)}Vu.expirationTime=1073741823;break e}Gu=void 0,Vu=$u;var Zu=Fu.pingCache;if(Zu===null?(Zu=Fu.pingCache=new Wi$2,Gu=new Set,Zu.set(Uu,Gu)):(Gu=Zu.get(Uu),Gu===void 0&&(Gu=new Set,Zu.set(Uu,Gu))),!Gu.has(Vu)){Gu.add(Vu);var Xc=Oj.bind(null,Fu,Uu,Vu);Uu.then(Xc,Xc)}Qu.effectTag|=4096,Qu.expirationTime=$u;break e}Qu=Qu.return}while(Qu!==null);Gu=Error((pb$1(Vu.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb$1(Vu))}S$2!==jj&&(S$2=ij),Gu=Ai$1(Gu,Vu),Qu=Nu;do{switch(Qu.tag){case 3:Uu=Gu,Qu.effectTag|=4096,Qu.expirationTime=$u;var _h=Xi$2(Qu,Uu,$u);yg(Qu,_h);break e;case 1:Uu=Gu;var ep=Qu.type,np=Qu.stateNode;if((Qu.effectTag&64)===0&&(typeof ep.getDerivedStateFromError=="function"||np!==null&&typeof np.componentDidCatch=="function"&&(aj===null||!aj.has(np)))){Qu.effectTag|=4096,Qu.expirationTime=$u;var ap=$i$1(Qu,Uu,$u);yg(Qu,ap);break e}}Qu=Qu.return}while(Qu!==null)}X$3=Pj(X$3)}catch(lp){$u=lp;continue}break}while(1)}function Fj(){var _u=cj.current;return cj.current=sh,_u===null?sh:_u}function Ag(_u,$u){_u<lj&&2<_u&&(lj=_u),$u!==null&&_u<mj&&2<_u&&(mj=_u,nj=$u)}function Bg(_u){_u>wi$1&&(wi$1=_u)}function Kj(){for(;X$3!==null;)X$3=Qj(X$3)}function Gj(){for(;X$3!==null&&!Uf();)X$3=Qj(X$3)}function Qj(_u){var $u=Rj(_u.alternate,_u,U$2);return _u.memoizedProps=_u.pendingProps,$u===null&&($u=Pj(_u)),dj.current=null,$u}function Pj(_u){X$3=_u;do{var $u=X$3.alternate;if(_u=X$3.return,(X$3.effectTag&2048)===0){if($u=si$1($u,X$3,U$2),U$2===1||X$3.childExpirationTime!==1){for(var Ru=0,Ou=X$3.child;Ou!==null;){var Fu=Ou.expirationTime,Nu=Ou.childExpirationTime;Fu>Ru&&(Ru=Fu),Nu>Ru&&(Ru=Nu),Ou=Ou.sibling}X$3.childExpirationTime=Ru}if($u!==null)return $u;_u!==null&&(_u.effectTag&2048)===0&&(_u.firstEffect===null&&(_u.firstEffect=X$3.firstEffect),X$3.lastEffect!==null&&(_u.lastEffect!==null&&(_u.lastEffect.nextEffect=X$3.firstEffect),_u.lastEffect=X$3.lastEffect),1<X$3.effectTag&&(_u.lastEffect!==null?_u.lastEffect.nextEffect=X$3:_u.firstEffect=X$3,_u.lastEffect=X$3))}else{if($u=zi$2(X$3),$u!==null)return $u.effectTag&=2047,$u;_u!==null&&(_u.firstEffect=_u.lastEffect=null,_u.effectTag|=2048)}if($u=X$3.sibling,$u!==null)return $u;X$3=_u}while(X$3!==null);return S$2===ti$2&&(S$2=jj),null}function Ij(_u){var $u=_u.expirationTime;return _u=_u.childExpirationTime,$u>_u?$u:_u}function Jj(_u){var $u=ag();return cg(99,Sj.bind(null,_u,$u)),null}function Sj(_u,$u){do Dj();while(rj!==null);if((W$4&(fj|gj))!==V$2)throw Error(u$3(327));var Ru=_u.finishedWork,Ou=_u.finishedExpirationTime;if(Ru===null)return null;if(_u.finishedWork=null,_u.finishedExpirationTime=0,Ru===_u.current)throw Error(u$3(177));_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90,_u.nextKnownPendingLevel=0;var Fu=Ij(Ru);if(_u.firstPendingTime=Fu,Ou<=_u.lastSuspendedTime?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Ou<=_u.firstSuspendedTime&&(_u.firstSuspendedTime=Ou-1),Ou<=_u.lastPingedTime&&(_u.lastPingedTime=0),Ou<=_u.lastExpiredTime&&(_u.lastExpiredTime=0),_u===T$1&&(X$3=T$1=null,U$2=0),1<Ru.effectTag?Ru.lastEffect!==null?(Ru.lastEffect.nextEffect=Ru,Fu=Ru.firstEffect):Fu=Ru:Fu=Ru.firstEffect,Fu!==null){var Nu=W$4;W$4|=gj,dj.current=null,Dd=fd;var Vu=xd();if(yd(Vu)){if("selectionStart"in Vu)var Gu={start:Vu.selectionStart,end:Vu.selectionEnd};else e:{Gu=(Gu=Vu.ownerDocument)&&Gu.defaultView||window;var Uu=Gu.getSelection&&Gu.getSelection();if(Uu&&Uu.rangeCount!==0){Gu=Uu.anchorNode;var Hu=Uu.anchorOffset,Wu=Uu.focusNode;Uu=Uu.focusOffset;try{Gu.nodeType,Wu.nodeType}catch{Gu=null;break e}var Qu=0,qu=-1,Ku=-1,Yu=0,_c=0,Ju=Vu,Xu=null;t:for(;;){for(var Zu;Ju!==Gu||Hu!==0&&Ju.nodeType!==3||(qu=Qu+Hu),Ju!==Wu||Uu!==0&&Ju.nodeType!==3||(Ku=Qu+Uu),Ju.nodeType===3&&(Qu+=Ju.nodeValue.length),(Zu=Ju.firstChild)!==null;)Xu=Ju,Ju=Zu;for(;;){if(Ju===Vu)break t;if(Xu===Gu&&++Yu===Hu&&(qu=Qu),Xu===Wu&&++_c===Uu&&(Ku=Qu),(Zu=Ju.nextSibling)!==null)break;Ju=Xu,Xu=Ju.parentNode}Ju=Zu}Gu=qu===-1||Ku===-1?null:{start:qu,end:Ku}}else Gu=null}Gu=Gu||{start:0,end:0}}else Gu=null;Ed={activeElementDetached:null,focusedElem:Vu,selectionRange:Gu},fd=!1,Y$2=Fu;do try{Tj()}catch(up){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,up),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=Fu;do try{for(Vu=_u,Gu=$u;Y$2!==null;){var Xc=Y$2.effectTag;if(Xc&16&&Rb$1(Y$2.stateNode,""),Xc&128){var _h=Y$2.alternate;if(_h!==null){var ep=_h.ref;ep!==null&&(typeof ep=="function"?ep(null):ep.current=null)}}switch(Xc&1038){case 2:Pi$2(Y$2),Y$2.effectTag&=-3;break;case 6:Pi$2(Y$2),Y$2.effectTag&=-3,Si$1(Y$2.alternate,Y$2);break;case 1024:Y$2.effectTag&=-1025;break;case 1028:Y$2.effectTag&=-1025,Si$1(Y$2.alternate,Y$2);break;case 4:Si$1(Y$2.alternate,Y$2);break;case 8:Hu=Y$2,Mi$2(Vu,Hu,Gu),Ni$1(Hu)}Y$2=Y$2.nextEffect}}catch(up){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,up),Y$2=Y$2.nextEffect}while(Y$2!==null);if(ep=Ed,_h=xd(),Xc=ep.focusedElem,Gu=ep.selectionRange,_h!==Xc&&Xc&&Xc.ownerDocument&&wd(Xc.ownerDocument.documentElement,Xc)){for(Gu!==null&&yd(Xc)&&(_h=Gu.start,ep=Gu.end,ep===void 0&&(ep=_h),"selectionStart"in Xc?(Xc.selectionStart=_h,Xc.selectionEnd=Math.min(ep,Xc.value.length)):(ep=(_h=Xc.ownerDocument||document)&&_h.defaultView||window,ep.getSelection&&(ep=ep.getSelection(),Hu=Xc.textContent.length,Vu=Math.min(Gu.start,Hu),Gu=Gu.end===void 0?Vu:Math.min(Gu.end,Hu),!ep.extend&&Vu>Gu&&(Hu=Gu,Gu=Vu,Vu=Hu),Hu=vd(Xc,Vu),Wu=vd(Xc,Gu),Hu&&Wu&&(ep.rangeCount!==1||ep.anchorNode!==Hu.node||ep.anchorOffset!==Hu.offset||ep.focusNode!==Wu.node||ep.focusOffset!==Wu.offset)&&(_h=_h.createRange(),_h.setStart(Hu.node,Hu.offset),ep.removeAllRanges(),Vu>Gu?(ep.addRange(_h),ep.extend(Wu.node,Wu.offset)):(_h.setEnd(Wu.node,Wu.offset),ep.addRange(_h)))))),_h=[],ep=Xc;ep=ep.parentNode;)ep.nodeType===1&&_h.push({element:ep,left:ep.scrollLeft,top:ep.scrollTop});for(typeof Xc.focus=="function"&&Xc.focus(),Xc=0;Xc<_h.length;Xc++)ep=_h[Xc],ep.element.scrollLeft=ep.left,ep.element.scrollTop=ep.top}fd=!!Dd,Ed=Dd=null,_u.current=Ru,Y$2=Fu;do try{for(Xc=_u;Y$2!==null;){var np=Y$2.effectTag;if(np&36&&Ji$2(Xc,Y$2.alternate,Y$2),np&128){_h=void 0;var ap=Y$2.ref;if(ap!==null){var lp=Y$2.stateNode;switch(Y$2.tag){case 5:_h=lp;break;default:_h=lp}typeof ap=="function"?ap(_h):ap.current=_h}}Y$2=Y$2.nextEffect}}catch(up){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,up),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=null,Vf(),W$4=Nu}else _u.current=Ru;if(qj)qj=!1,rj=_u,sj=$u;else for(Y$2=Fu;Y$2!==null;)$u=Y$2.nextEffect,Y$2.nextEffect=null,Y$2=$u;if($u=_u.firstPendingTime,$u===0&&(aj=null),$u===1073741823?_u===vj?uj++:(uj=0,vj=_u):uj=0,typeof Uj=="function"&&Uj(Ru.stateNode,Ou),Z$2(_u),Yi$1)throw Yi$1=!1,_u=Zi$2,Zi$2=null,_u;return(W$4&ej)!==V$2||gg(),null}function Tj(){for(;Y$2!==null;){var _u=Y$2.effectTag;(_u&256)!==0&&Gi$1(Y$2.alternate,Y$2),(_u&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$2=Y$2.nextEffect}}function Dj(){if(sj!==90){var _u=97<sj?97:sj;return sj=90,cg(_u,Vj)}}function Vj(){if(rj===null)return!1;var _u=rj;if(rj=null,(W$4&(fj|gj))!==V$2)throw Error(u$3(331));var $u=W$4;for(W$4|=gj,_u=_u.current.firstEffect;_u!==null;){try{var Ru=_u;if((Ru.effectTag&512)!==0)switch(Ru.tag){case 0:case 11:case 15:case 22:Hi$2(5,Ru),Ii$2(5,Ru)}}catch(Ou){if(_u===null)throw Error(u$3(330));Ei$2(_u,Ou)}Ru=_u.nextEffect,_u.nextEffect=null,_u=Ru}return W$4=$u,gg(),!0}function Wj(_u,$u,Ru){$u=Ai$1(Ru,$u),$u=Xi$2(_u,$u,1073741823),xg(_u,$u),_u=xj(_u,1073741823),_u!==null&&Z$2(_u)}function Ei$2(_u,$u){if(_u.tag===3)Wj(_u,_u,$u);else for(var Ru=_u.return;Ru!==null;){if(Ru.tag===3){Wj(Ru,_u,$u);break}else if(Ru.tag===1){var Ou=Ru.stateNode;if(typeof Ru.type.getDerivedStateFromError=="function"||typeof Ou.componentDidCatch=="function"&&(aj===null||!aj.has(Ou))){_u=Ai$1($u,_u),_u=$i$1(Ru,_u,1073741823),xg(Ru,_u),Ru=xj(Ru,1073741823),Ru!==null&&Z$2(Ru);break}}Ru=Ru.return}}function Oj(_u,$u,Ru){var Ou=_u.pingCache;Ou!==null&&Ou.delete($u),T$1===_u&&U$2===Ru?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(_u,U$2):oj=!0:Aj(_u,Ru)&&($u=_u.lastPingedTime,$u!==0&&$u<Ru||(_u.lastPingedTime=Ru,Z$2(_u)))}function Vi$2(_u,$u){var Ru=_u.stateNode;Ru!==null&&Ru.delete($u),$u=0,$u===0&&($u=Gg(),$u=Hg($u,_u,null)),_u=xj(_u,$u),_u!==null&&Z$2(_u)}var Rj;Rj=function(_u,$u,Ru){var Ou=$u.expirationTime;if(_u!==null){var Fu=$u.pendingProps;if(_u.memoizedProps!==Fu||K$2.current)rg=!0;else{if(Ou<Ru){switch(rg=!1,$u.tag){case 3:hi$1($u),Xh();break;case 5:if(fh($u),$u.mode&4&&Ru!==1&&Fu.hidden)return $u.expirationTime=$u.childExpirationTime=1,null;break;case 1:L$3($u.type)&&Gf($u);break;case 4:dh($u,$u.stateNode.containerInfo);break;case 10:Ou=$u.memoizedProps.value,Fu=$u.type._context,I$2(jg,Fu._currentValue),Fu._currentValue=Ou;break;case 13:if($u.memoizedState!==null)return Ou=$u.child.childExpirationTime,Ou!==0&&Ou>=Ru?ji$2(_u,$u,Ru):(I$2(M$2,M$2.current&1),$u=$h(_u,$u,Ru),$u!==null?$u.sibling:null);I$2(M$2,M$2.current&1);break;case 19:if(Ou=$u.childExpirationTime>=Ru,(_u.effectTag&64)!==0){if(Ou)return mi$1(_u,$u,Ru);$u.effectTag|=64}if(Fu=$u.memoizedState,Fu!==null&&(Fu.rendering=null,Fu.tail=null),I$2(M$2,M$2.current),!Ou)return null}return $h(_u,$u,Ru)}rg=!1}}else rg=!1;switch($u.expirationTime=0,$u.tag){case 2:if(Ou=$u.type,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,Fu=Cf$1($u,J$2.current),qg$1($u,Ru),Fu=oh(null,$u,Ou,_u,Fu,Ru),$u.effectTag|=1,typeof Fu=="object"&&Fu!==null&&typeof Fu.render=="function"&&Fu.$$typeof===void 0){if($u.tag=1,$u.memoizedState=null,$u.updateQueue=null,L$3(Ou)){var Nu=!0;Gf($u)}else Nu=!1;$u.memoizedState=Fu.state!==null&&Fu.state!==void 0?Fu.state:null,ug($u);var Vu=Ou.getDerivedStateFromProps;typeof Vu=="function"&&Fg($u,Ou,Vu,_u),Fu.updater=Jg$1,$u.stateNode=Fu,Fu._reactInternalFiber=$u,Ng($u,Ou,_u,Ru),$u=gi$1(null,$u,Ou,!0,Nu,Ru)}else $u.tag=0,R$3(null,$u,Fu,Ru),$u=$u.child;return $u;case 16:e:{if(Fu=$u.elementType,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,ob$1(Fu),Fu._status!==1)throw Fu._result;switch(Fu=Fu._result,$u.type=Fu,Nu=$u.tag=Xj(Fu),_u=ig(Fu,_u),Nu){case 0:$u=di$1(null,$u,Fu,_u,Ru);break e;case 1:$u=fi$1(null,$u,Fu,_u,Ru);break e;case 11:$u=Zh(null,$u,Fu,_u,Ru);break e;case 14:$u=ai$1(null,$u,Fu,ig(Fu.type,_u),Ou,Ru);break e}throw Error(u$3(306,Fu,""))}return $u;case 0:return Ou=$u.type,Fu=$u.pendingProps,Fu=$u.elementType===Ou?Fu:ig(Ou,Fu),di$1(_u,$u,Ou,Fu,Ru);case 1:return Ou=$u.type,Fu=$u.pendingProps,Fu=$u.elementType===Ou?Fu:ig(Ou,Fu),fi$1(_u,$u,Ou,Fu,Ru);case 3:if(hi$1($u),Ou=$u.updateQueue,_u===null||Ou===null)throw Error(u$3(282));if(Ou=$u.pendingProps,Fu=$u.memoizedState,Fu=Fu!==null?Fu.element:null,vg(_u,$u),zg($u,Ou,null,Ru),Ou=$u.memoizedState.element,Ou===Fu)Xh(),$u=$h(_u,$u,Ru);else{if((Fu=$u.stateNode.hydrate)&&(Ph=Jd$1($u.stateNode.containerInfo.firstChild),Oh=$u,Fu=Qh=!0),Fu)for(Ru=Yg($u,null,Ou,Ru),$u.child=Ru;Ru;)Ru.effectTag=Ru.effectTag&-3|1024,Ru=Ru.sibling;else R$3(_u,$u,Ou,Ru),Xh();$u=$u.child}return $u;case 5:return fh($u),_u===null&&Uh($u),Ou=$u.type,Fu=$u.pendingProps,Nu=_u!==null?_u.memoizedProps:null,Vu=Fu.children,Gd$1(Ou,Fu)?Vu=null:Nu!==null&&Gd$1(Ou,Nu)&&($u.effectTag|=16),ei$2(_u,$u),$u.mode&4&&Ru!==1&&Fu.hidden?($u.expirationTime=$u.childExpirationTime=1,$u=null):(R$3(_u,$u,Vu,Ru),$u=$u.child),$u;case 6:return _u===null&&Uh($u),null;case 13:return ji$2(_u,$u,Ru);case 4:return dh($u,$u.stateNode.containerInfo),Ou=$u.pendingProps,_u===null?$u.child=Xg($u,null,Ou,Ru):R$3(_u,$u,Ou,Ru),$u.child;case 11:return Ou=$u.type,Fu=$u.pendingProps,Fu=$u.elementType===Ou?Fu:ig(Ou,Fu),Zh(_u,$u,Ou,Fu,Ru);case 7:return R$3(_u,$u,$u.pendingProps,Ru),$u.child;case 8:return R$3(_u,$u,$u.pendingProps.children,Ru),$u.child;case 12:return R$3(_u,$u,$u.pendingProps.children,Ru),$u.child;case 10:e:{Ou=$u.type._context,Fu=$u.pendingProps,Vu=$u.memoizedProps,Nu=Fu.value;var Gu=$u.type._context;if(I$2(jg,Gu._currentValue),Gu._currentValue=Nu,Vu!==null)if(Gu=Vu.value,Nu=$e$1(Gu,Nu)?0:(typeof Ou._calculateChangedBits=="function"?Ou._calculateChangedBits(Gu,Nu):1073741823)|0,Nu===0){if(Vu.children===Fu.children&&!K$2.current){$u=$h(_u,$u,Ru);break e}}else for(Gu=$u.child,Gu!==null&&(Gu.return=$u);Gu!==null;){var Uu=Gu.dependencies;if(Uu!==null){Vu=Gu.child;for(var Hu=Uu.firstContext;Hu!==null;){if(Hu.context===Ou&&(Hu.observedBits&Nu)!==0){Gu.tag===1&&(Hu=wg(Ru,null),Hu.tag=2,xg(Gu,Hu)),Gu.expirationTime<Ru&&(Gu.expirationTime=Ru),Hu=Gu.alternate,Hu!==null&&Hu.expirationTime<Ru&&(Hu.expirationTime=Ru),pg(Gu.return,Ru),Uu.expirationTime<Ru&&(Uu.expirationTime=Ru);break}Hu=Hu.next}}else Vu=Gu.tag===10&&Gu.type===$u.type?null:Gu.child;if(Vu!==null)Vu.return=Gu;else for(Vu=Gu;Vu!==null;){if(Vu===$u){Vu=null;break}if(Gu=Vu.sibling,Gu!==null){Gu.return=Vu.return,Vu=Gu;break}Vu=Vu.return}Gu=Vu}R$3(_u,$u,Fu.children,Ru),$u=$u.child}return $u;case 9:return Fu=$u.type,Nu=$u.pendingProps,Ou=Nu.children,qg$1($u,Ru),Fu=sg(Fu,Nu.unstable_observedBits),Ou=Ou(Fu),$u.effectTag|=1,R$3(_u,$u,Ou,Ru),$u.child;case 14:return Fu=$u.type,Nu=ig(Fu,$u.pendingProps),Nu=ig(Fu.type,Nu),ai$1(_u,$u,Fu,Nu,Ou,Ru);case 15:return ci$1(_u,$u,$u.type,$u.pendingProps,Ou,Ru);case 17:return Ou=$u.type,Fu=$u.pendingProps,Fu=$u.elementType===Ou?Fu:ig(Ou,Fu),_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),$u.tag=1,L$3(Ou)?(_u=!0,Gf($u)):_u=!1,qg$1($u,Ru),Lg($u,Ou,Fu),Ng($u,Ou,Fu,Ru),gi$1(null,$u,Ou,!0,_u,Ru);case 19:return mi$1(_u,$u,Ru)}throw Error(u$3(156,$u.tag))};var Uj=null,Li$1=null;function Yj(_u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($u.isDisabled||!$u.supportsFiber)return!0;try{var Ru=$u.inject(_u);Uj=function(Ou){try{$u.onCommitFiberRoot(Ru,Ou,void 0,(Ou.current.effectTag&64)===64)}catch{}},Li$1=function(Ou){try{$u.onCommitFiberUnmount(Ru,Ou)}catch{}}}catch{}return!0}function Zj(_u,$u,Ru,Ou){this.tag=_u,this.key=Ru,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ou,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(_u,$u,Ru,Ou){return new Zj(_u,$u,Ru,Ou)}function bi$1(_u){return _u=_u.prototype,!(!_u||!_u.isReactComponent)}function Xj(_u){if(typeof _u=="function")return bi$1(_u)?1:0;if(_u!=null){if(_u=_u.$$typeof,_u===gb$1)return 11;if(_u===jb$1)return 14}return 2}function Sg(_u,$u){var Ru=_u.alternate;return Ru===null?(Ru=Sh(_u.tag,$u,_u.key,_u.mode),Ru.elementType=_u.elementType,Ru.type=_u.type,Ru.stateNode=_u.stateNode,Ru.alternate=_u,_u.alternate=Ru):(Ru.pendingProps=$u,Ru.effectTag=0,Ru.nextEffect=null,Ru.firstEffect=null,Ru.lastEffect=null),Ru.childExpirationTime=_u.childExpirationTime,Ru.expirationTime=_u.expirationTime,Ru.child=_u.child,Ru.memoizedProps=_u.memoizedProps,Ru.memoizedState=_u.memoizedState,Ru.updateQueue=_u.updateQueue,$u=_u.dependencies,Ru.dependencies=$u===null?null:{expirationTime:$u.expirationTime,firstContext:$u.firstContext,responders:$u.responders},Ru.sibling=_u.sibling,Ru.index=_u.index,Ru.ref=_u.ref,Ru}function Ug$1(_u,$u,Ru,Ou,Fu,Nu){var Vu=2;if(Ou=_u,typeof _u=="function")bi$1(_u)&&(Vu=1);else if(typeof _u=="string")Vu=5;else e:switch(_u){case ab$1:return Wg(Ru.children,Fu,Nu,$u);case fb$1:Vu=8,Fu|=7;break;case bb$1:Vu=8,Fu|=1;break;case cb$1:return _u=Sh(12,Ru,$u,Fu|8),_u.elementType=cb$1,_u.type=cb$1,_u.expirationTime=Nu,_u;case hb$1:return _u=Sh(13,Ru,$u,Fu),_u.type=hb$1,_u.elementType=hb$1,_u.expirationTime=Nu,_u;case ib$1:return _u=Sh(19,Ru,$u,Fu),_u.elementType=ib$1,_u.expirationTime=Nu,_u;default:if(typeof _u=="object"&&_u!==null)switch(_u.$$typeof){case db$1:Vu=10;break e;case eb$1:Vu=9;break e;case gb$1:Vu=11;break e;case jb$1:Vu=14;break e;case kb$1:Vu=16,Ou=null;break e;case lb$1:Vu=22;break e}throw Error(u$3(130,_u==null?_u:typeof _u,""))}return $u=Sh(Vu,Ru,$u,Fu),$u.elementType=_u,$u.type=Ou,$u.expirationTime=Nu,$u}function Wg(_u,$u,Ru,Ou){return _u=Sh(7,_u,Ou,$u),_u.expirationTime=Ru,_u}function Tg(_u,$u,Ru){return _u=Sh(6,_u,null,$u),_u.expirationTime=Ru,_u}function Vg$1(_u,$u,Ru){return $u=Sh(4,_u.children!==null?_u.children:[],_u.key,$u),$u.expirationTime=Ru,$u.stateNode={containerInfo:_u.containerInfo,pendingChildren:null,implementation:_u.implementation},$u}function ak(_u,$u,Ru){this.tag=$u,this.current=null,this.containerInfo=_u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Ru,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(_u,$u){var Ru=_u.firstSuspendedTime;return _u=_u.lastSuspendedTime,Ru!==0&&Ru>=$u&&_u<=$u}function xi$1(_u,$u){var Ru=_u.firstSuspendedTime,Ou=_u.lastSuspendedTime;Ru<$u&&(_u.firstSuspendedTime=$u),(Ou>$u||Ru===0)&&(_u.lastSuspendedTime=$u),$u<=_u.lastPingedTime&&(_u.lastPingedTime=0),$u<=_u.lastExpiredTime&&(_u.lastExpiredTime=0)}function yi$1(_u,$u){$u>_u.firstPendingTime&&(_u.firstPendingTime=$u);var Ru=_u.firstSuspendedTime;Ru!==0&&($u>=Ru?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:$u>=_u.lastSuspendedTime&&(_u.lastSuspendedTime=$u+1),$u>_u.nextKnownPendingLevel&&(_u.nextKnownPendingLevel=$u))}function Cj(_u,$u){var Ru=_u.lastExpiredTime;(Ru===0||Ru>$u)&&(_u.lastExpiredTime=$u)}function bk(_u,$u,Ru,Ou){var Fu=$u.current,Nu=Gg(),Vu=Dg.suspense;Nu=Hg(Nu,Fu,Vu);e:if(Ru){Ru=Ru._reactInternalFiber;t:{if(dc$1(Ru)!==Ru||Ru.tag!==1)throw Error(u$3(170));var Gu=Ru;do{switch(Gu.tag){case 3:Gu=Gu.stateNode.context;break t;case 1:if(L$3(Gu.type)){Gu=Gu.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Gu=Gu.return}while(Gu!==null);throw Error(u$3(171))}if(Ru.tag===1){var Uu=Ru.type;if(L$3(Uu)){Ru=Ff(Ru,Uu,Gu);break e}}Ru=Gu}else Ru=Af;return $u.context===null?$u.context=Ru:$u.pendingContext=Ru,$u=wg(Nu,Vu),$u.payload={element:_u},Ou=Ou===void 0?null:Ou,Ou!==null&&($u.callback=Ou),xg(Fu,$u),Ig(Fu,Nu),Nu}function ck(_u){if(_u=_u.current,!_u.child)return null;switch(_u.child.tag){case 5:return _u.child.stateNode;default:return _u.child.stateNode}}function dk(_u,$u){_u=_u.memoizedState,_u!==null&&_u.dehydrated!==null&&_u.retryTime<$u&&(_u.retryTime=$u)}function ek(_u,$u){dk(_u,$u),(_u=_u.alternate)&&dk(_u,$u)}function fk(_u,$u,Ru){Ru=Ru!=null&&Ru.hydrate===!0;var Ou=new ak(_u,$u,Ru),Fu=Sh(3,null,null,$u===2?7:$u===1?3:0);Ou.current=Fu,Fu.stateNode=Ou,ug(Fu),_u[Od]=Ou.current,Ru&&$u!==0&&Jc(_u,_u.nodeType===9?_u:_u.ownerDocument),this._internalRoot=Ou}fk.prototype.render=function(_u){bk(_u,this._internalRoot,null,null)};fk.prototype.unmount=function(){var _u=this._internalRoot,$u=_u.containerInfo;bk(null,_u,null,function(){$u[Od]=null})};function gk(_u){return!(!_u||_u.nodeType!==1&&_u.nodeType!==9&&_u.nodeType!==11&&(_u.nodeType!==8||_u.nodeValue!==" react-mount-point-unstable "))}function hk(_u,$u){if($u||($u=_u?_u.nodeType===9?_u.documentElement:_u.firstChild:null,$u=!(!$u||$u.nodeType!==1||!$u.hasAttribute("data-reactroot"))),!$u)for(var Ru;Ru=_u.lastChild;)_u.removeChild(Ru);return new fk(_u,0,$u?{hydrate:!0}:void 0)}function ik(_u,$u,Ru,Ou,Fu){var Nu=Ru._reactRootContainer;if(Nu){var Vu=Nu._internalRoot;if(typeof Fu=="function"){var Gu=Fu;Fu=function(){var Hu=ck(Vu);Gu.call(Hu)}}bk($u,Vu,_u,Fu)}else{if(Nu=Ru._reactRootContainer=hk(Ru,Ou),Vu=Nu._internalRoot,typeof Fu=="function"){var Uu=Fu;Fu=function(){var Hu=ck(Vu);Uu.call(Hu)}}Nj(function(){bk($u,Vu,_u,Fu)})}return ck(Vu)}function jk(_u,$u,Ru){var Ou=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$2,key:Ou==null?null:""+Ou,children:_u,containerInfo:$u,implementation:Ru}}wc$1=function(_u){if(_u.tag===13){var $u=hg(Gg(),150,100);Ig(_u,$u),ek(_u,$u)}};xc=function(_u){_u.tag===13&&(Ig(_u,3),ek(_u,3))};yc$1=function(_u){if(_u.tag===13){var $u=Gg();$u=Hg($u,_u,null),Ig(_u,$u),ek(_u,$u)}};za$2=function(_u,$u,Ru){switch($u){case"input":if(Cb$1(_u,Ru),$u=Ru.name,Ru.type==="radio"&&$u!=null){for(Ru=_u;Ru.parentNode;)Ru=Ru.parentNode;for(Ru=Ru.querySelectorAll("input[name="+JSON.stringify(""+$u)+'][type="radio"]'),$u=0;$u<Ru.length;$u++){var Ou=Ru[$u];if(Ou!==_u&&Ou.form===_u.form){var Fu=Qd$1(Ou);if(!Fu)throw Error(u$3(90));yb$1(Ou),Cb$1(Ou,Fu)}}}break;case"textarea":Kb$1(_u,Ru);break;case"select":$u=Ru.value,$u!=null&&Hb$1(_u,!!Ru.multiple,$u,!1)}};Fa$2=Mj;Ga$2=function(_u,$u,Ru,Ou,Fu){var Nu=W$4;W$4|=4;try{return cg(98,_u.bind(null,$u,Ru,Ou,Fu))}finally{W$4=Nu,W$4===V$2&&gg()}};Ha$2=function(){(W$4&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia$1=function(_u,$u){var Ru=W$4;W$4|=2;try{return _u($u)}finally{W$4=Ru,W$4===V$2&&gg()}};function kk(_u,$u){var Ru=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk($u))throw Error(u$3(200));return jk(_u,$u,null,Ru)}var lk={Events:[Nc,Pd,Qd$1,xa$1,ta$1,Xd$1,function(_u){jc(_u,Wd$1)},Da$2,Ea$1,id,mc$1,Dj,{current:!1}]};(function(_u){var $u=_u.findFiberByHostInstance;return Yj(n$4({},_u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(Ru){return Ru=hc$1(Ru),Ru===null?null:Ru.stateNode},findFiberByHostInstance:function(Ru){return $u?$u(Ru):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(_u){if(_u==null)return null;if(_u.nodeType===1)return _u;var $u=_u._reactInternalFiber;if($u===void 0)throw typeof _u.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(_u)));return _u=hc$1($u),_u=_u===null?null:_u.stateNode,_u};reactDom_production_min.flushSync=function(_u,$u){if((W$4&(fj|gj))!==V$2)throw Error(u$3(187));var Ru=W$4;W$4|=1;try{return cg(99,_u.bind(null,$u))}finally{W$4=Ru,gg()}};reactDom_production_min.hydrate=function(_u,$u,Ru){if(!gk($u))throw Error(u$3(200));return ik(null,_u,$u,!0,Ru)};reactDom_production_min.render=function(_u,$u,Ru){if(!gk($u))throw Error(u$3(200));return ik(null,_u,$u,!1,Ru)};reactDom_production_min.unmountComponentAtNode=function(_u){if(!gk(_u))throw Error(u$3(40));return _u._reactRootContainer?(Nj(function(){ik(null,null,_u,!1,function(){_u._reactRootContainer=null,_u[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(_u,$u){return kk(_u,$u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_u,$u,Ru,Ou){if(!gk(Ru))throw Error(u$3(200));if(_u==null||_u._reactInternalFiber===void 0)throw Error(u$3(38));return ik(_u,$u,Ru,!1,Ou)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_u){console.error(_u)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(_u){return typeof _u=="number"&&isFinite(_u)&&Math.floor(_u)===_u});Math.sign===void 0&&(Math.sign=function(_u){return _u<0?-1:_u>0?1:+_u});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(_u){if(_u==null)throw new TypeError("Cannot convert undefined or null to object");const $u=Object(_u);for(let Ru=1;Ru<arguments.length;Ru++){const Ou=arguments[Ru];if(Ou!=null)for(const Fu in Ou)Object.prototype.hasOwnProperty.call(Ou,Fu)&&($u[Fu]=Ou[Fu])}return $u});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(_u,$u){this._listeners===void 0&&(this._listeners={});var Ru=this._listeners;Ru[_u]===void 0&&(Ru[_u]=[]),Ru[_u].indexOf($u)===-1&&Ru[_u].push($u)},hasEventListener:function(_u,$u){if(this._listeners===void 0)return!1;var Ru=this._listeners;return Ru[_u]!==void 0&&Ru[_u].indexOf($u)!==-1},removeEventListener:function(_u,$u){if(this._listeners!==void 0){var Ru=this._listeners,Ou=Ru[_u];if(Ou!==void 0){var Fu=Ou.indexOf($u);Fu!==-1&&Ou.splice(Fu,1)}}},dispatchEvent:function(_u){if(this._listeners!==void 0){var $u=this._listeners,Ru=$u[_u.type];if(Ru!==void 0){_u.target=this;for(var Ou=Ru.slice(0),Fu=0,Nu=Ou.length;Fu<Nu;Fu++)Ou[Fu].call(this,_u)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var _u=Math.random()*4294967295|0,$u=Math.random()*4294967295|0,Ru=Math.random()*4294967295|0,Ou=Math.random()*4294967295|0,Fu=_lut[_u&255]+_lut[_u>>8&255]+_lut[_u>>16&255]+_lut[_u>>24&255]+"-"+_lut[$u&255]+_lut[$u>>8&255]+"-"+_lut[$u>>16&15|64]+_lut[$u>>24&255]+"-"+_lut[Ru&63|128]+_lut[Ru>>8&255]+"-"+_lut[Ru>>16&255]+_lut[Ru>>24&255]+_lut[Ou&255]+_lut[Ou>>8&255]+_lut[Ou>>16&255]+_lut[Ou>>24&255];return Fu.toUpperCase()},clamp:function(_u,$u,Ru){return Math.max($u,Math.min(Ru,_u))},euclideanModulo:function(_u,$u){return(_u%$u+$u)%$u},mapLinear:function(_u,$u,Ru,Ou,Fu){return Ou+(_u-$u)*(Fu-Ou)/(Ru-$u)},lerp:function(_u,$u,Ru){return(1-Ru)*_u+Ru*$u},smoothstep:function(_u,$u,Ru){return _u<=$u?0:_u>=Ru?1:(_u=(_u-$u)/(Ru-$u),_u*_u*(3-2*_u))},smootherstep:function(_u,$u,Ru){return _u<=$u?0:_u>=Ru?1:(_u=(_u-$u)/(Ru-$u),_u*_u*_u*(_u*(_u*6-15)+10))},randInt:function(_u,$u){return _u+Math.floor(Math.random()*($u-_u+1))},randFloat:function(_u,$u){return _u+Math.random()*($u-_u)},randFloatSpread:function(_u){return _u*(.5-Math.random())},degToRad:function(_u){return _u*MathUtils.DEG2RAD},radToDeg:function(_u){return _u*MathUtils.RAD2DEG},isPowerOfTwo:function(_u){return(_u&_u-1)===0&&_u!==0},ceilPowerOfTwo:function(_u){return Math.pow(2,Math.ceil(Math.log(_u)/Math.LN2))},floorPowerOfTwo:function(_u){return Math.pow(2,Math.floor(Math.log(_u)/Math.LN2))},setQuaternionFromProperEuler:function(_u,$u,Ru,Ou,Fu){var Nu=Math.cos,Vu=Math.sin,Gu=Nu(Ru/2),Uu=Vu(Ru/2),Hu=Nu(($u+Ou)/2),Wu=Vu(($u+Ou)/2),Qu=Nu(($u-Ou)/2),qu=Vu(($u-Ou)/2),Ku=Nu((Ou-$u)/2),Yu=Vu((Ou-$u)/2);switch(Fu){case"XYX":_u.set(Gu*Wu,Uu*Qu,Uu*qu,Gu*Hu);break;case"YZY":_u.set(Uu*qu,Gu*Wu,Uu*Qu,Gu*Hu);break;case"ZXZ":_u.set(Uu*Qu,Uu*qu,Gu*Wu,Gu*Hu);break;case"XZX":_u.set(Gu*Wu,Uu*Yu,Uu*Ku,Gu*Hu);break;case"YXY":_u.set(Uu*Ku,Gu*Wu,Uu*Yu,Gu*Hu);break;case"ZYZ":_u.set(Uu*Yu,Uu*Ku,Gu*Wu,Gu*Hu);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Fu)}}};function Vector2(_u,$u){this.x=_u||0,this.y=$u||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(_u){this.x=_u}},height:{get:function(){return this.y},set:function(_u){this.y=_u}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(_u,$u){return this.x=_u,this.y=$u,this},setScalar:function(_u){return this.x=_u,this.y=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this},multiply:function(_u){return this.x*=_u.x,this.y*=_u.y,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},applyMatrix3:function(_u){var $u=this.x,Ru=this.y,Ou=_u.elements;return this.x=Ou[0]*$u+Ou[3]*Ru+Ou[6],this.y=Ou[1]*$u+Ou[4]*Ru+Ou[7],this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this},clampLength:function(_u,$u){var Ru=this.length();return this.divideScalar(Ru||1).multiplyScalar(Math.max(_u,Math.min($u,Ru)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(_u){return this.x*_u.x+this.y*_u.y},cross:function(_u){return this.x*_u.y-this.y*_u.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var _u=Math.atan2(-this.y,-this.x)+Math.PI;return _u},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Ru=this.y-_u.y;return $u*$u+Ru*Ru},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this},lerpVectors:function(_u,$u,Ru){return this.x=_u.x+($u.x-_u.x)*Ru,this.y=_u.y+($u.y-_u.y)*Ru,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u},fromBufferAttribute:function(_u,$u,Ru){return Ru!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this},rotateAround:function(_u,$u){var Ru=Math.cos($u),Ou=Math.sin($u),Fu=this.x-_u.x,Nu=this.y-_u.y;return this.x=Fu*Ru-Nu*Ou+_u.x,this.y=Fu*Ou+Nu*Ru+_u.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){var Hu=this.elements;return Hu[0]=_u,Hu[1]=Ou,Hu[2]=Vu,Hu[3]=$u,Hu[4]=Fu,Hu[5]=Gu,Hu[6]=Ru,Hu[7]=Nu,Hu[8]=Uu,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Ru=_u.elements;return $u[0]=Ru[0],$u[1]=Ru[1],$u[2]=Ru[2],$u[3]=Ru[3],$u[4]=Ru[4],$u[5]=Ru[5],$u[6]=Ru[6],$u[7]=Ru[7],$u[8]=Ru[8],this},extractBasis:function(_u,$u,Ru){return _u.setFromMatrix3Column(this,0),$u.setFromMatrix3Column(this,1),Ru.setFromMatrix3Column(this,2),this},setFromMatrix4:function(_u){var $u=_u.elements;return this.set($u[0],$u[4],$u[8],$u[1],$u[5],$u[9],$u[2],$u[6],$u[10]),this},multiply:function(_u){return this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Ru=_u.elements,Ou=$u.elements,Fu=this.elements,Nu=Ru[0],Vu=Ru[3],Gu=Ru[6],Uu=Ru[1],Hu=Ru[4],Wu=Ru[7],Qu=Ru[2],qu=Ru[5],Ku=Ru[8],Yu=Ou[0],_c=Ou[3],Ju=Ou[6],Xu=Ou[1],Zu=Ou[4],Xc=Ou[7],_h=Ou[2],ep=Ou[5],np=Ou[8];return Fu[0]=Nu*Yu+Vu*Xu+Gu*_h,Fu[3]=Nu*_c+Vu*Zu+Gu*ep,Fu[6]=Nu*Ju+Vu*Xc+Gu*np,Fu[1]=Uu*Yu+Hu*Xu+Wu*_h,Fu[4]=Uu*_c+Hu*Zu+Wu*ep,Fu[7]=Uu*Ju+Hu*Xc+Wu*np,Fu[2]=Qu*Yu+qu*Xu+Ku*_h,Fu[5]=Qu*_c+qu*Zu+Ku*ep,Fu[8]=Qu*Ju+qu*Xc+Ku*np,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[3]*=_u,$u[6]*=_u,$u[1]*=_u,$u[4]*=_u,$u[7]*=_u,$u[2]*=_u,$u[5]*=_u,$u[8]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Ru=_u[1],Ou=_u[2],Fu=_u[3],Nu=_u[4],Vu=_u[5],Gu=_u[6],Uu=_u[7],Hu=_u[8];return $u*Nu*Hu-$u*Vu*Uu-Ru*Fu*Hu+Ru*Vu*Gu+Ou*Fu*Uu-Ou*Nu*Gu},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Ru=_u.elements,Ou=this.elements,Fu=Ru[0],Nu=Ru[1],Vu=Ru[2],Gu=Ru[3],Uu=Ru[4],Hu=Ru[5],Wu=Ru[6],Qu=Ru[7],qu=Ru[8],Ku=qu*Uu-Hu*Qu,Yu=Hu*Wu-qu*Gu,_c=Qu*Gu-Uu*Wu,Ju=Fu*Ku+Nu*Yu+Vu*_c;if(Ju===0)return this.set(0,0,0,0,0,0,0,0,0);var Xu=1/Ju;return Ou[0]=Ku*Xu,Ou[1]=(Vu*Qu-qu*Nu)*Xu,Ou[2]=(Hu*Nu-Vu*Uu)*Xu,Ou[3]=Yu*Xu,Ou[4]=(qu*Fu-Vu*Wu)*Xu,Ou[5]=(Vu*Gu-Hu*Fu)*Xu,Ou[6]=_c*Xu,Ou[7]=(Nu*Wu-Qu*Fu)*Xu,Ou[8]=(Uu*Fu-Nu*Gu)*Xu,this},transpose:function(){var _u,$u=this.elements;return _u=$u[1],$u[1]=$u[3],$u[3]=_u,_u=$u[2],$u[2]=$u[6],$u[6]=_u,_u=$u[5],$u[5]=$u[7],$u[7]=_u,this},getNormalMatrix:function(_u){return this.setFromMatrix4(_u).getInverse(this).transpose()},transposeIntoArray:function(_u){var $u=this.elements;return _u[0]=$u[0],_u[1]=$u[3],_u[2]=$u[6],_u[3]=$u[1],_u[4]=$u[4],_u[5]=$u[7],_u[6]=$u[2],_u[7]=$u[5],_u[8]=$u[8],this},setUvTransform:function(_u,$u,Ru,Ou,Fu,Nu,Vu){var Gu=Math.cos(Fu),Uu=Math.sin(Fu);this.set(Ru*Gu,Ru*Uu,-Ru*(Gu*Nu+Uu*Vu)+Nu+_u,-Ou*Uu,Ou*Gu,-Ou*(-Uu*Nu+Gu*Vu)+Vu+$u,0,0,1)},scale:function(_u,$u){var Ru=this.elements;return Ru[0]*=_u,Ru[3]*=_u,Ru[6]*=_u,Ru[1]*=$u,Ru[4]*=$u,Ru[7]*=$u,this},rotate:function(_u){var $u=Math.cos(_u),Ru=Math.sin(_u),Ou=this.elements,Fu=Ou[0],Nu=Ou[3],Vu=Ou[6],Gu=Ou[1],Uu=Ou[4],Hu=Ou[7];return Ou[0]=$u*Fu+Ru*Gu,Ou[3]=$u*Nu+Ru*Uu,Ou[6]=$u*Vu+Ru*Hu,Ou[1]=-Ru*Fu+$u*Gu,Ou[4]=-Ru*Nu+$u*Uu,Ou[7]=-Ru*Vu+$u*Hu,this},translate:function(_u,$u){var Ru=this.elements;return Ru[0]+=_u*Ru[2],Ru[3]+=_u*Ru[5],Ru[6]+=_u*Ru[8],Ru[1]+=$u*Ru[2],Ru[4]+=$u*Ru[5],Ru[7]+=$u*Ru[8],this},equals:function(_u){for(var $u=this.elements,Ru=_u.elements,Ou=0;Ou<9;Ou++)if($u[Ou]!==Ru[Ou])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Ru=0;Ru<9;Ru++)this.elements[Ru]=_u[Ru+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Ru=this.elements;return _u[$u]=Ru[0],_u[$u+1]=Ru[1],_u[$u+2]=Ru[2],_u[$u+3]=Ru[3],_u[$u+4]=Ru[4],_u[$u+5]=Ru[5],_u[$u+6]=Ru[6],_u[$u+7]=Ru[7],_u[$u+8]=Ru[8],_u}});var _canvas,ImageUtils={getDataURL:function(_u){var $u;if(typeof HTMLCanvasElement=="undefined")return _u.src;if(_u instanceof HTMLCanvasElement)$u=_u;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=_u.width,_canvas.height=_u.height;var Ru=_canvas.getContext("2d");_u instanceof ImageData?Ru.putImageData(_u,0,0):Ru.drawImage(_u,0,0,_u.width,_u.height),$u=_canvas}return $u.width>2048||$u.height>2048?$u.toDataURL("image/jpeg",.6):$u.toDataURL("image/png")}},textureId=0;function Texture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=_u!==void 0?_u:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=$u!==void 0?$u:Texture.DEFAULT_MAPPING,this.wrapS=Ru!==void 0?Ru:ClampToEdgeWrapping,this.wrapT=Ou!==void 0?Ou:ClampToEdgeWrapping,this.magFilter=Fu!==void 0?Fu:LinearFilter,this.minFilter=Nu!==void 0?Nu:LinearMipmapLinearFilter,this.anisotropy=Uu!==void 0?Uu:1,this.format=Vu!==void 0?Vu:RGBAFormat,this.internalFormat=null,this.type=Gu!==void 0?Gu:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Hu!==void 0?Hu:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.name=_u.name,this.image=_u.image,this.mipmaps=_u.mipmaps.slice(0),this.mapping=_u.mapping,this.wrapS=_u.wrapS,this.wrapT=_u.wrapT,this.magFilter=_u.magFilter,this.minFilter=_u.minFilter,this.anisotropy=_u.anisotropy,this.format=_u.format,this.internalFormat=_u.internalFormat,this.type=_u.type,this.offset.copy(_u.offset),this.repeat.copy(_u.repeat),this.center.copy(_u.center),this.rotation=_u.rotation,this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrix.copy(_u.matrix),this.generateMipmaps=_u.generateMipmaps,this.premultiplyAlpha=_u.premultiplyAlpha,this.flipY=_u.flipY,this.unpackAlignment=_u.unpackAlignment,this.encoding=_u.encoding,this},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";if(!$u&&_u.textures[this.uuid]!==void 0)return _u.textures[this.uuid];var Ru={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Ou=this.image;if(Ou.uuid===void 0&&(Ou.uuid=MathUtils.generateUUID()),!$u&&_u.images[Ou.uuid]===void 0){var Fu;if(Array.isArray(Ou)){Fu=[];for(var Nu=0,Vu=Ou.length;Nu<Vu;Nu++)Fu.push(ImageUtils.getDataURL(Ou[Nu]))}else Fu=ImageUtils.getDataURL(Ou);_u.images[Ou.uuid]={uuid:Ou.uuid,url:Fu}}Ru.image=Ou.uuid}return $u||(_u.textures[this.uuid]=Ru),Ru},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(_u){if(this.mapping!==UVMapping)return _u;if(_u.applyMatrix3(this.matrix),_u.x<0||_u.x>1)switch(this.wrapS){case RepeatWrapping:_u.x=_u.x-Math.floor(_u.x);break;case ClampToEdgeWrapping:_u.x=_u.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.x)%2)===1?_u.x=Math.ceil(_u.x)-_u.x:_u.x=_u.x-Math.floor(_u.x);break}if(_u.y<0||_u.y>1)switch(this.wrapT){case RepeatWrapping:_u.y=_u.y-Math.floor(_u.y);break;case ClampToEdgeWrapping:_u.y=_u.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.y)%2)===1?_u.y=Math.ceil(_u.y)-_u.y:_u.y=_u.y-Math.floor(_u.y);break}return this.flipY&&(_u.y=1-_u.y),_u}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function Vector4(_u,$u,Ru,Ou){this.x=_u||0,this.y=$u||0,this.z=Ru||0,this.w=Ou!==void 0?Ou:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(_u){this.z=_u}},height:{get:function(){return this.w},set:function(_u){this.w=_u}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(_u,$u,Ru,Ou){return this.x=_u,this.y=$u,this.z=Ru,this.w=Ou,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this.w=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setW:function(_u){return this.w=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;case 3:this.w=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this.w=_u.w!==void 0?_u.w:1,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this.w+=_u.w,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this.w+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this.w=_u.w+$u.w,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this.w+=_u.w*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this.w-=_u.w,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this.w-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this.w=_u.w-$u.w,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this.w*=_u,this},applyMatrix4:function(_u){var $u=this.x,Ru=this.y,Ou=this.z,Fu=this.w,Nu=_u.elements;return this.x=Nu[0]*$u+Nu[4]*Ru+Nu[8]*Ou+Nu[12]*Fu,this.y=Nu[1]*$u+Nu[5]*Ru+Nu[9]*Ou+Nu[13]*Fu,this.z=Nu[2]*$u+Nu[6]*Ru+Nu[10]*Ou+Nu[14]*Fu,this.w=Nu[3]*$u+Nu[7]*Ru+Nu[11]*Ou+Nu[15]*Fu,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},setAxisAngleFromQuaternion:function(_u){this.w=2*Math.acos(_u.w);var $u=Math.sqrt(1-_u.w*_u.w);return $u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_u.x/$u,this.y=_u.y/$u,this.z=_u.z/$u),this},setAxisAngleFromRotationMatrix:function(_u){var $u,Ru,Ou,Fu,Nu=.01,Vu=.1,Gu=_u.elements,Uu=Gu[0],Hu=Gu[4],Wu=Gu[8],Qu=Gu[1],qu=Gu[5],Ku=Gu[9],Yu=Gu[2],_c=Gu[6],Ju=Gu[10];if(Math.abs(Hu-Qu)<Nu&&Math.abs(Wu-Yu)<Nu&&Math.abs(Ku-_c)<Nu){if(Math.abs(Hu+Qu)<Vu&&Math.abs(Wu+Yu)<Vu&&Math.abs(Ku+_c)<Vu&&Math.abs(Uu+qu+Ju-3)<Vu)return this.set(1,0,0,0),this;$u=Math.PI;var Xu=(Uu+1)/2,Zu=(qu+1)/2,Xc=(Ju+1)/2,_h=(Hu+Qu)/4,ep=(Wu+Yu)/4,np=(Ku+_c)/4;return Xu>Zu&&Xu>Xc?Xu<Nu?(Ru=0,Ou=.707106781,Fu=.707106781):(Ru=Math.sqrt(Xu),Ou=_h/Ru,Fu=ep/Ru):Zu>Xc?Zu<Nu?(Ru=.707106781,Ou=0,Fu=.707106781):(Ou=Math.sqrt(Zu),Ru=_h/Ou,Fu=np/Ou):Xc<Nu?(Ru=.707106781,Ou=.707106781,Fu=0):(Fu=Math.sqrt(Xc),Ru=ep/Fu,Ou=np/Fu),this.set(Ru,Ou,Fu,$u),this}var ap=Math.sqrt((_c-Ku)*(_c-Ku)+(Wu-Yu)*(Wu-Yu)+(Qu-Hu)*(Qu-Hu));return Math.abs(ap)<.001&&(ap=1),this.x=(_c-Ku)/ap,this.y=(Wu-Yu)/ap,this.z=(Qu-Hu)/ap,this.w=Math.acos((Uu+qu+Ju-1)/2),this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this.w=Math.min(this.w,_u.w),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this.w=Math.max(this.w,_u.w),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this.w=Math.max(_u.w,Math.min($u.w,this.w)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this.w=Math.max(_u,Math.min($u,this.w)),this},clampLength:function(_u,$u){var Ru=this.length();return this.divideScalar(Ru||1).multiplyScalar(Math.max(_u,Math.min($u,Ru)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z+this.w*_u.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this.w+=(_u.w-this.w)*$u,this},lerpVectors:function(_u,$u,Ru){return this.x=_u.x+($u.x-_u.x)*Ru,this.y=_u.y+($u.y-_u.y)*Ru,this.z=_u.z+($u.z-_u.z)*Ru,this.w=_u.w+($u.w-_u.w)*Ru,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z&&_u.w===this.w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this.w=_u[$u+3],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u[$u+3]=this.w,_u},fromBufferAttribute:function(_u,$u,Ru){return Ru!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this.w=_u.getW($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(_u,$u,Ru){this.width=_u,this.height=$u,this.scissor=new Vector4(0,0,_u,$u),this.scissorTest=!1,this.viewport=new Vector4(0,0,_u,$u),Ru=Ru||{},this.texture=new Texture(void 0,Ru.mapping,Ru.wrapS,Ru.wrapT,Ru.magFilter,Ru.minFilter,Ru.format,Ru.type,Ru.anisotropy,Ru.encoding),this.texture.image={},this.texture.image.width=_u,this.texture.image.height=$u,this.texture.generateMipmaps=Ru.generateMipmaps!==void 0?Ru.generateMipmaps:!1,this.texture.minFilter=Ru.minFilter!==void 0?Ru.minFilter:LinearFilter,this.depthBuffer=Ru.depthBuffer!==void 0?Ru.depthBuffer:!0,this.stencilBuffer=Ru.stencilBuffer!==void 0?Ru.stencilBuffer:!0,this.depthTexture=Ru.depthTexture!==void 0?Ru.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(_u,$u){(this.width!==_u||this.height!==$u)&&(this.width=_u,this.height=$u,this.texture.image.width=_u,this.texture.image.height=$u,this.dispose()),this.viewport.set(0,0,_u,$u),this.scissor.set(0,0,_u,$u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.width=_u.width,this.height=_u.height,this.viewport.copy(_u.viewport),this.texture=_u.texture.clone(),this.depthBuffer=_u.depthBuffer,this.stencilBuffer=_u.stencilBuffer,this.depthTexture=_u.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(_u,$u,Ru){WebGLRenderTarget.call(this,_u,$u,Ru),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(_u){return WebGLRenderTarget.prototype.copy.call(this,_u),this.samples=_u.samples,this}});function Quaternion(_u,$u,Ru,Ou){this._x=_u||0,this._y=$u||0,this._z=Ru||0,this._w=Ou!==void 0?Ou:1}Object.assign(Quaternion,{slerp:function(_u,$u,Ru,Ou){return Ru.copy(_u).slerp($u,Ou)},slerpFlat:function(_u,$u,Ru,Ou,Fu,Nu,Vu){var Gu=Ru[Ou+0],Uu=Ru[Ou+1],Hu=Ru[Ou+2],Wu=Ru[Ou+3],Qu=Fu[Nu+0],qu=Fu[Nu+1],Ku=Fu[Nu+2],Yu=Fu[Nu+3];if(Wu!==Yu||Gu!==Qu||Uu!==qu||Hu!==Ku){var _c=1-Vu,Ju=Gu*Qu+Uu*qu+Hu*Ku+Wu*Yu,Xu=Ju>=0?1:-1,Zu=1-Ju*Ju;if(Zu>Number.EPSILON){var Xc=Math.sqrt(Zu),_h=Math.atan2(Xc,Ju*Xu);_c=Math.sin(_c*_h)/Xc,Vu=Math.sin(Vu*_h)/Xc}var ep=Vu*Xu;if(Gu=Gu*_c+Qu*ep,Uu=Uu*_c+qu*ep,Hu=Hu*_c+Ku*ep,Wu=Wu*_c+Yu*ep,_c===1-Vu){var np=1/Math.sqrt(Gu*Gu+Uu*Uu+Hu*Hu+Wu*Wu);Gu*=np,Uu*=np,Hu*=np,Wu*=np}}_u[$u]=Gu,_u[$u+1]=Uu,_u[$u+2]=Hu,_u[$u+3]=Wu},multiplyQuaternionsFlat:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=Ru[Ou],Gu=Ru[Ou+1],Uu=Ru[Ou+2],Hu=Ru[Ou+3],Wu=Fu[Nu],Qu=Fu[Nu+1],qu=Fu[Nu+2],Ku=Fu[Nu+3];return _u[$u]=Vu*Ku+Hu*Wu+Gu*qu-Uu*Qu,_u[$u+1]=Gu*Ku+Hu*Qu+Uu*Wu-Vu*qu,_u[$u+2]=Uu*Ku+Hu*qu+Vu*Qu-Gu*Wu,_u[$u+3]=Hu*Ku-Vu*Wu-Gu*Qu-Uu*qu,_u}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(_u){this._w=_u,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(_u,$u,Ru,Ou){return this._x=_u,this._y=$u,this._z=Ru,this._w=Ou,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(_u){return this._x=_u.x,this._y=_u.y,this._z=_u.z,this._w=_u.w,this._onChangeCallback(),this},setFromEuler:function(_u,$u){if(!(_u&&_u.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Ru=_u._x,Ou=_u._y,Fu=_u._z,Nu=_u.order,Vu=Math.cos,Gu=Math.sin,Uu=Vu(Ru/2),Hu=Vu(Ou/2),Wu=Vu(Fu/2),Qu=Gu(Ru/2),qu=Gu(Ou/2),Ku=Gu(Fu/2);switch(Nu){case"XYZ":this._x=Qu*Hu*Wu+Uu*qu*Ku,this._y=Uu*qu*Wu-Qu*Hu*Ku,this._z=Uu*Hu*Ku+Qu*qu*Wu,this._w=Uu*Hu*Wu-Qu*qu*Ku;break;case"YXZ":this._x=Qu*Hu*Wu+Uu*qu*Ku,this._y=Uu*qu*Wu-Qu*Hu*Ku,this._z=Uu*Hu*Ku-Qu*qu*Wu,this._w=Uu*Hu*Wu+Qu*qu*Ku;break;case"ZXY":this._x=Qu*Hu*Wu-Uu*qu*Ku,this._y=Uu*qu*Wu+Qu*Hu*Ku,this._z=Uu*Hu*Ku+Qu*qu*Wu,this._w=Uu*Hu*Wu-Qu*qu*Ku;break;case"ZYX":this._x=Qu*Hu*Wu-Uu*qu*Ku,this._y=Uu*qu*Wu+Qu*Hu*Ku,this._z=Uu*Hu*Ku-Qu*qu*Wu,this._w=Uu*Hu*Wu+Qu*qu*Ku;break;case"YZX":this._x=Qu*Hu*Wu+Uu*qu*Ku,this._y=Uu*qu*Wu+Qu*Hu*Ku,this._z=Uu*Hu*Ku-Qu*qu*Wu,this._w=Uu*Hu*Wu-Qu*qu*Ku;break;case"XZY":this._x=Qu*Hu*Wu-Uu*qu*Ku,this._y=Uu*qu*Wu-Qu*Hu*Ku,this._z=Uu*Hu*Ku+Qu*qu*Wu,this._w=Uu*Hu*Wu+Qu*qu*Ku;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Nu)}return $u!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(_u,$u){var Ru=$u/2,Ou=Math.sin(Ru);return this._x=_u.x*Ou,this._y=_u.y*Ou,this._z=_u.z*Ou,this._w=Math.cos(Ru),this._onChangeCallback(),this},setFromRotationMatrix:function(_u){var $u=_u.elements,Ru=$u[0],Ou=$u[4],Fu=$u[8],Nu=$u[1],Vu=$u[5],Gu=$u[9],Uu=$u[2],Hu=$u[6],Wu=$u[10],Qu=Ru+Vu+Wu,qu;return Qu>0?(qu=.5/Math.sqrt(Qu+1),this._w=.25/qu,this._x=(Hu-Gu)*qu,this._y=(Fu-Uu)*qu,this._z=(Nu-Ou)*qu):Ru>Vu&&Ru>Wu?(qu=2*Math.sqrt(1+Ru-Vu-Wu),this._w=(Hu-Gu)/qu,this._x=.25*qu,this._y=(Ou+Nu)/qu,this._z=(Fu+Uu)/qu):Vu>Wu?(qu=2*Math.sqrt(1+Vu-Ru-Wu),this._w=(Fu-Uu)/qu,this._x=(Ou+Nu)/qu,this._y=.25*qu,this._z=(Gu+Hu)/qu):(qu=2*Math.sqrt(1+Wu-Ru-Vu),this._w=(Nu-Ou)/qu,this._x=(Fu+Uu)/qu,this._y=(Gu+Hu)/qu,this._z=.25*qu),this._onChangeCallback(),this},setFromUnitVectors:function(_u,$u){var Ru=1e-6,Ou=_u.dot($u)+1;return Ou<Ru?(Ou=0,Math.abs(_u.x)>Math.abs(_u.z)?(this._x=-_u.y,this._y=_u.x,this._z=0,this._w=Ou):(this._x=0,this._y=-_u.z,this._z=_u.y,this._w=Ou)):(this._x=_u.y*$u.z-_u.z*$u.y,this._y=_u.z*$u.x-_u.x*$u.z,this._z=_u.x*$u.y-_u.y*$u.x,this._w=Ou),this.normalize()},angleTo:function(_u){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(_u),-1,1)))},rotateTowards:function(_u,$u){var Ru=this.angleTo(_u);if(Ru===0)return this;var Ou=Math.min(1,$u/Ru);return this.slerp(_u,Ou),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(_u){return this._x*_u._x+this._y*_u._y+this._z*_u._z+this._w*_u._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var _u=this.length();return _u===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_u=1/_u,this._x=this._x*_u,this._y=this._y*_u,this._z=this._z*_u,this._w=this._w*_u),this._onChangeCallback(),this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(_u,$u)):this.multiplyQuaternions(this,_u)},premultiply:function(_u){return this.multiplyQuaternions(_u,this)},multiplyQuaternions:function(_u,$u){var Ru=_u._x,Ou=_u._y,Fu=_u._z,Nu=_u._w,Vu=$u._x,Gu=$u._y,Uu=$u._z,Hu=$u._w;return this._x=Ru*Hu+Nu*Vu+Ou*Uu-Fu*Gu,this._y=Ou*Hu+Nu*Gu+Fu*Vu-Ru*Uu,this._z=Fu*Hu+Nu*Uu+Ru*Gu-Ou*Vu,this._w=Nu*Hu-Ru*Vu-Ou*Gu-Fu*Uu,this._onChangeCallback(),this},slerp:function(_u,$u){if($u===0)return this;if($u===1)return this.copy(_u);var Ru=this._x,Ou=this._y,Fu=this._z,Nu=this._w,Vu=Nu*_u._w+Ru*_u._x+Ou*_u._y+Fu*_u._z;if(Vu<0?(this._w=-_u._w,this._x=-_u._x,this._y=-_u._y,this._z=-_u._z,Vu=-Vu):this.copy(_u),Vu>=1)return this._w=Nu,this._x=Ru,this._y=Ou,this._z=Fu,this;var Gu=1-Vu*Vu;if(Gu<=Number.EPSILON){var Uu=1-$u;return this._w=Uu*Nu+$u*this._w,this._x=Uu*Ru+$u*this._x,this._y=Uu*Ou+$u*this._y,this._z=Uu*Fu+$u*this._z,this.normalize(),this._onChangeCallback(),this}var Hu=Math.sqrt(Gu),Wu=Math.atan2(Hu,Vu),Qu=Math.sin((1-$u)*Wu)/Hu,qu=Math.sin($u*Wu)/Hu;return this._w=Nu*Qu+this._w*qu,this._x=Ru*Qu+this._x*qu,this._y=Ou*Qu+this._y*qu,this._z=Fu*Qu+this._z*qu,this._onChangeCallback(),this},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._w===this._w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this._x=_u[$u],this._y=_u[$u+1],this._z=_u[$u+2],this._w=_u[$u+3],this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._w,_u},fromBufferAttribute:function(_u,$u){return this._x=_u.getX($u),this._y=_u.getY($u),this._z=_u.getZ($u),this._w=_u.getW($u),this},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(_u,$u,Ru){this.x=_u||0,this.y=$u||0,this.z=Ru||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(_u,$u,Ru){return this.x=_u,this.y=$u,this.z=Ru,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(_u,$u)):(this.x*=_u.x,this.y*=_u.y,this.z*=_u.z,this)},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this},multiplyVectors:function(_u,$u){return this.x=_u.x*$u.x,this.y=_u.y*$u.y,this.z=_u.z*$u.z,this},applyEuler:function(_u){return _u&&_u.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(_u))},applyAxisAngle:function(_u,$u){return this.applyQuaternion(_quaternion.setFromAxisAngle(_u,$u))},applyMatrix3:function(_u){var $u=this.x,Ru=this.y,Ou=this.z,Fu=_u.elements;return this.x=Fu[0]*$u+Fu[3]*Ru+Fu[6]*Ou,this.y=Fu[1]*$u+Fu[4]*Ru+Fu[7]*Ou,this.z=Fu[2]*$u+Fu[5]*Ru+Fu[8]*Ou,this},applyNormalMatrix:function(_u){return this.applyMatrix3(_u).normalize()},applyMatrix4:function(_u){var $u=this.x,Ru=this.y,Ou=this.z,Fu=_u.elements,Nu=1/(Fu[3]*$u+Fu[7]*Ru+Fu[11]*Ou+Fu[15]);return this.x=(Fu[0]*$u+Fu[4]*Ru+Fu[8]*Ou+Fu[12])*Nu,this.y=(Fu[1]*$u+Fu[5]*Ru+Fu[9]*Ou+Fu[13])*Nu,this.z=(Fu[2]*$u+Fu[6]*Ru+Fu[10]*Ou+Fu[14])*Nu,this},applyQuaternion:function(_u){var $u=this.x,Ru=this.y,Ou=this.z,Fu=_u.x,Nu=_u.y,Vu=_u.z,Gu=_u.w,Uu=Gu*$u+Nu*Ou-Vu*Ru,Hu=Gu*Ru+Vu*$u-Fu*Ou,Wu=Gu*Ou+Fu*Ru-Nu*$u,Qu=-Fu*$u-Nu*Ru-Vu*Ou;return this.x=Uu*Gu+Qu*-Fu+Hu*-Vu-Wu*-Nu,this.y=Hu*Gu+Qu*-Nu+Wu*-Fu-Uu*-Vu,this.z=Wu*Gu+Qu*-Vu+Uu*-Nu-Hu*-Fu,this},project:function(_u){return this.applyMatrix4(_u.matrixWorldInverse).applyMatrix4(_u.projectionMatrix)},unproject:function(_u){return this.applyMatrix4(_u.projectionMatrixInverse).applyMatrix4(_u.matrixWorld)},transformDirection:function(_u){var $u=this.x,Ru=this.y,Ou=this.z,Fu=_u.elements;return this.x=Fu[0]*$u+Fu[4]*Ru+Fu[8]*Ou,this.y=Fu[1]*$u+Fu[5]*Ru+Fu[9]*Ou,this.z=Fu[2]*$u+Fu[6]*Ru+Fu[10]*Ou,this.normalize()},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this.z/=_u.z,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this},clampLength:function(_u,$u){var Ru=this.length();return this.divideScalar(Ru||1).multiplyScalar(Math.max(_u,Math.min($u,Ru)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this},lerpVectors:function(_u,$u,Ru){return this.x=_u.x+($u.x-_u.x)*Ru,this.y=_u.y+($u.y-_u.y)*Ru,this.z=_u.z+($u.z-_u.z)*Ru,this},cross:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(_u,$u)):this.crossVectors(this,_u)},crossVectors:function(_u,$u){var Ru=_u.x,Ou=_u.y,Fu=_u.z,Nu=$u.x,Vu=$u.y,Gu=$u.z;return this.x=Ou*Gu-Fu*Vu,this.y=Fu*Nu-Ru*Gu,this.z=Ru*Vu-Ou*Nu,this},projectOnVector:function(_u){var $u=_u.lengthSq();if($u===0)return this.set(0,0,0);var Ru=_u.dot(this)/$u;return this.copy(_u).multiplyScalar(Ru)},projectOnPlane:function(_u){return _vector.copy(this).projectOnVector(_u),this.sub(_vector)},reflect:function(_u){return this.sub(_vector.copy(_u).multiplyScalar(2*this.dot(_u)))},angleTo:function(_u){var $u=Math.sqrt(this.lengthSq()*_u.lengthSq());if($u===0)return Math.PI/2;var Ru=this.dot(_u)/$u;return Math.acos(MathUtils.clamp(Ru,-1,1))},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Ru=this.y-_u.y,Ou=this.z-_u.z;return $u*$u+Ru*Ru+Ou*Ou},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)+Math.abs(this.z-_u.z)},setFromSpherical:function(_u){return this.setFromSphericalCoords(_u.radius,_u.phi,_u.theta)},setFromSphericalCoords:function(_u,$u,Ru){var Ou=Math.sin($u)*_u;return this.x=Ou*Math.sin(Ru),this.y=Math.cos($u)*_u,this.z=Ou*Math.cos(Ru),this},setFromCylindrical:function(_u){return this.setFromCylindricalCoords(_u.radius,_u.theta,_u.y)},setFromCylindricalCoords:function(_u,$u,Ru){return this.x=_u*Math.sin($u),this.y=Ru,this.z=_u*Math.cos($u),this},setFromMatrixPosition:function(_u){var $u=_u.elements;return this.x=$u[12],this.y=$u[13],this.z=$u[14],this},setFromMatrixScale:function(_u){var $u=this.setFromMatrixColumn(_u,0).length(),Ru=this.setFromMatrixColumn(_u,1).length(),Ou=this.setFromMatrixColumn(_u,2).length();return this.x=$u,this.y=Ru,this.z=Ou,this},setFromMatrixColumn:function(_u,$u){return this.fromArray(_u.elements,$u*4)},setFromMatrix3Column:function(_u,$u){return this.fromArray(_u.elements,$u*3)},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u},fromBufferAttribute:function(_u,$u,Ru){return Ru!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c){var Ju=this.elements;return Ju[0]=_u,Ju[4]=$u,Ju[8]=Ru,Ju[12]=Ou,Ju[1]=Fu,Ju[5]=Nu,Ju[9]=Vu,Ju[13]=Gu,Ju[2]=Uu,Ju[6]=Hu,Ju[10]=Wu,Ju[14]=Qu,Ju[3]=qu,Ju[7]=Ku,Ju[11]=Yu,Ju[15]=_c,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Ru=_u.elements;return $u[0]=Ru[0],$u[1]=Ru[1],$u[2]=Ru[2],$u[3]=Ru[3],$u[4]=Ru[4],$u[5]=Ru[5],$u[6]=Ru[6],$u[7]=Ru[7],$u[8]=Ru[8],$u[9]=Ru[9],$u[10]=Ru[10],$u[11]=Ru[11],$u[12]=Ru[12],$u[13]=Ru[13],$u[14]=Ru[14],$u[15]=Ru[15],this},copyPosition:function(_u){var $u=this.elements,Ru=_u.elements;return $u[12]=Ru[12],$u[13]=Ru[13],$u[14]=Ru[14],this},extractBasis:function(_u,$u,Ru){return _u.setFromMatrixColumn(this,0),$u.setFromMatrixColumn(this,1),Ru.setFromMatrixColumn(this,2),this},makeBasis:function(_u,$u,Ru){return this.set(_u.x,$u.x,Ru.x,0,_u.y,$u.y,Ru.y,0,_u.z,$u.z,Ru.z,0,0,0,0,1),this},extractRotation:function(_u){var $u=this.elements,Ru=_u.elements,Ou=1/_v1.setFromMatrixColumn(_u,0).length(),Fu=1/_v1.setFromMatrixColumn(_u,1).length(),Nu=1/_v1.setFromMatrixColumn(_u,2).length();return $u[0]=Ru[0]*Ou,$u[1]=Ru[1]*Ou,$u[2]=Ru[2]*Ou,$u[3]=0,$u[4]=Ru[4]*Fu,$u[5]=Ru[5]*Fu,$u[6]=Ru[6]*Fu,$u[7]=0,$u[8]=Ru[8]*Nu,$u[9]=Ru[9]*Nu,$u[10]=Ru[10]*Nu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromEuler:function(_u){_u&&_u.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var $u=this.elements,Ru=_u.x,Ou=_u.y,Fu=_u.z,Nu=Math.cos(Ru),Vu=Math.sin(Ru),Gu=Math.cos(Ou),Uu=Math.sin(Ou),Hu=Math.cos(Fu),Wu=Math.sin(Fu);if(_u.order==="XYZ"){var Qu=Nu*Hu,qu=Nu*Wu,Ku=Vu*Hu,Yu=Vu*Wu;$u[0]=Gu*Hu,$u[4]=-Gu*Wu,$u[8]=Uu,$u[1]=qu+Ku*Uu,$u[5]=Qu-Yu*Uu,$u[9]=-Vu*Gu,$u[2]=Yu-Qu*Uu,$u[6]=Ku+qu*Uu,$u[10]=Nu*Gu}else if(_u.order==="YXZ"){var _c=Gu*Hu,Ju=Gu*Wu,Xu=Uu*Hu,Zu=Uu*Wu;$u[0]=_c+Zu*Vu,$u[4]=Xu*Vu-Ju,$u[8]=Nu*Uu,$u[1]=Nu*Wu,$u[5]=Nu*Hu,$u[9]=-Vu,$u[2]=Ju*Vu-Xu,$u[6]=Zu+_c*Vu,$u[10]=Nu*Gu}else if(_u.order==="ZXY"){var _c=Gu*Hu,Ju=Gu*Wu,Xu=Uu*Hu,Zu=Uu*Wu;$u[0]=_c-Zu*Vu,$u[4]=-Nu*Wu,$u[8]=Xu+Ju*Vu,$u[1]=Ju+Xu*Vu,$u[5]=Nu*Hu,$u[9]=Zu-_c*Vu,$u[2]=-Nu*Uu,$u[6]=Vu,$u[10]=Nu*Gu}else if(_u.order==="ZYX"){var Qu=Nu*Hu,qu=Nu*Wu,Ku=Vu*Hu,Yu=Vu*Wu;$u[0]=Gu*Hu,$u[4]=Ku*Uu-qu,$u[8]=Qu*Uu+Yu,$u[1]=Gu*Wu,$u[5]=Yu*Uu+Qu,$u[9]=qu*Uu-Ku,$u[2]=-Uu,$u[6]=Vu*Gu,$u[10]=Nu*Gu}else if(_u.order==="YZX"){var Xc=Nu*Gu,_h=Nu*Uu,ep=Vu*Gu,np=Vu*Uu;$u[0]=Gu*Hu,$u[4]=np-Xc*Wu,$u[8]=ep*Wu+_h,$u[1]=Wu,$u[5]=Nu*Hu,$u[9]=-Vu*Hu,$u[2]=-Uu*Hu,$u[6]=_h*Wu+ep,$u[10]=Xc-np*Wu}else if(_u.order==="XZY"){var Xc=Nu*Gu,_h=Nu*Uu,ep=Vu*Gu,np=Vu*Uu;$u[0]=Gu*Hu,$u[4]=-Wu,$u[8]=Uu*Hu,$u[1]=Xc*Wu+np,$u[5]=Nu*Hu,$u[9]=_h*Wu-ep,$u[2]=ep*Wu-_h,$u[6]=Vu*Hu,$u[10]=np*Wu+Xc}return $u[3]=0,$u[7]=0,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromQuaternion:function(_u){return this.compose(_zero,_u,_one)},lookAt:function(_u,$u,Ru){var Ou=this.elements;return _z.subVectors(_u,$u),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Ru,_z),_x.lengthSq()===0&&(Math.abs(Ru.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Ru,_z)),_x.normalize(),_y.crossVectors(_z,_x),Ou[0]=_x.x,Ou[4]=_y.x,Ou[8]=_z.x,Ou[1]=_x.y,Ou[5]=_y.y,Ou[9]=_z.y,Ou[2]=_x.z,Ou[6]=_y.z,Ou[10]=_z.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(_u,$u)):this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Ru=_u.elements,Ou=$u.elements,Fu=this.elements,Nu=Ru[0],Vu=Ru[4],Gu=Ru[8],Uu=Ru[12],Hu=Ru[1],Wu=Ru[5],Qu=Ru[9],qu=Ru[13],Ku=Ru[2],Yu=Ru[6],_c=Ru[10],Ju=Ru[14],Xu=Ru[3],Zu=Ru[7],Xc=Ru[11],_h=Ru[15],ep=Ou[0],np=Ou[4],ap=Ou[8],lp=Ou[12],up=Ou[1],_f=Ou[5],tp=Ou[9],ip=Ou[13],rp=Ou[2],op=Ou[6],sp=Ou[10],cp=Ou[14],hp=Ou[3],dp=Ou[7],xp=Ou[11],bp=Ou[15];return Fu[0]=Nu*ep+Vu*up+Gu*rp+Uu*hp,Fu[4]=Nu*np+Vu*_f+Gu*op+Uu*dp,Fu[8]=Nu*ap+Vu*tp+Gu*sp+Uu*xp,Fu[12]=Nu*lp+Vu*ip+Gu*cp+Uu*bp,Fu[1]=Hu*ep+Wu*up+Qu*rp+qu*hp,Fu[5]=Hu*np+Wu*_f+Qu*op+qu*dp,Fu[9]=Hu*ap+Wu*tp+Qu*sp+qu*xp,Fu[13]=Hu*lp+Wu*ip+Qu*cp+qu*bp,Fu[2]=Ku*ep+Yu*up+_c*rp+Ju*hp,Fu[6]=Ku*np+Yu*_f+_c*op+Ju*dp,Fu[10]=Ku*ap+Yu*tp+_c*sp+Ju*xp,Fu[14]=Ku*lp+Yu*ip+_c*cp+Ju*bp,Fu[3]=Xu*ep+Zu*up+Xc*rp+_h*hp,Fu[7]=Xu*np+Zu*_f+Xc*op+_h*dp,Fu[11]=Xu*ap+Zu*tp+Xc*sp+_h*xp,Fu[15]=Xu*lp+Zu*ip+Xc*cp+_h*bp,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[4]*=_u,$u[8]*=_u,$u[12]*=_u,$u[1]*=_u,$u[5]*=_u,$u[9]*=_u,$u[13]*=_u,$u[2]*=_u,$u[6]*=_u,$u[10]*=_u,$u[14]*=_u,$u[3]*=_u,$u[7]*=_u,$u[11]*=_u,$u[15]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Ru=_u[4],Ou=_u[8],Fu=_u[12],Nu=_u[1],Vu=_u[5],Gu=_u[9],Uu=_u[13],Hu=_u[2],Wu=_u[6],Qu=_u[10],qu=_u[14],Ku=_u[3],Yu=_u[7],_c=_u[11],Ju=_u[15];return Ku*(+Fu*Gu*Wu-Ou*Uu*Wu-Fu*Vu*Qu+Ru*Uu*Qu+Ou*Vu*qu-Ru*Gu*qu)+Yu*(+$u*Gu*qu-$u*Uu*Qu+Fu*Nu*Qu-Ou*Nu*qu+Ou*Uu*Hu-Fu*Gu*Hu)+_c*(+$u*Uu*Wu-$u*Vu*qu-Fu*Nu*Wu+Ru*Nu*qu+Fu*Vu*Hu-Ru*Uu*Hu)+Ju*(-Ou*Vu*Hu-$u*Gu*Wu+$u*Vu*Qu+Ou*Nu*Wu-Ru*Nu*Qu+Ru*Gu*Hu)},transpose:function(){var _u=this.elements,$u;return $u=_u[1],_u[1]=_u[4],_u[4]=$u,$u=_u[2],_u[2]=_u[8],_u[8]=$u,$u=_u[6],_u[6]=_u[9],_u[9]=$u,$u=_u[3],_u[3]=_u[12],_u[12]=$u,$u=_u[7],_u[7]=_u[13],_u[13]=$u,$u=_u[11],_u[11]=_u[14],_u[14]=$u,this},setPosition:function(_u,$u,Ru){var Ou=this.elements;return _u.isVector3?(Ou[12]=_u.x,Ou[13]=_u.y,Ou[14]=_u.z):(Ou[12]=_u,Ou[13]=$u,Ou[14]=Ru),this},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Ru=this.elements,Ou=_u.elements,Fu=Ou[0],Nu=Ou[1],Vu=Ou[2],Gu=Ou[3],Uu=Ou[4],Hu=Ou[5],Wu=Ou[6],Qu=Ou[7],qu=Ou[8],Ku=Ou[9],Yu=Ou[10],_c=Ou[11],Ju=Ou[12],Xu=Ou[13],Zu=Ou[14],Xc=Ou[15],_h=Ku*Zu*Qu-Xu*Yu*Qu+Xu*Wu*_c-Hu*Zu*_c-Ku*Wu*Xc+Hu*Yu*Xc,ep=Ju*Yu*Qu-qu*Zu*Qu-Ju*Wu*_c+Uu*Zu*_c+qu*Wu*Xc-Uu*Yu*Xc,np=qu*Xu*Qu-Ju*Ku*Qu+Ju*Hu*_c-Uu*Xu*_c-qu*Hu*Xc+Uu*Ku*Xc,ap=Ju*Ku*Wu-qu*Xu*Wu-Ju*Hu*Yu+Uu*Xu*Yu+qu*Hu*Zu-Uu*Ku*Zu,lp=Fu*_h+Nu*ep+Vu*np+Gu*ap;if(lp===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var up=1/lp;return Ru[0]=_h*up,Ru[1]=(Xu*Yu*Gu-Ku*Zu*Gu-Xu*Vu*_c+Nu*Zu*_c+Ku*Vu*Xc-Nu*Yu*Xc)*up,Ru[2]=(Hu*Zu*Gu-Xu*Wu*Gu+Xu*Vu*Qu-Nu*Zu*Qu-Hu*Vu*Xc+Nu*Wu*Xc)*up,Ru[3]=(Ku*Wu*Gu-Hu*Yu*Gu-Ku*Vu*Qu+Nu*Yu*Qu+Hu*Vu*_c-Nu*Wu*_c)*up,Ru[4]=ep*up,Ru[5]=(qu*Zu*Gu-Ju*Yu*Gu+Ju*Vu*_c-Fu*Zu*_c-qu*Vu*Xc+Fu*Yu*Xc)*up,Ru[6]=(Ju*Wu*Gu-Uu*Zu*Gu-Ju*Vu*Qu+Fu*Zu*Qu+Uu*Vu*Xc-Fu*Wu*Xc)*up,Ru[7]=(Uu*Yu*Gu-qu*Wu*Gu+qu*Vu*Qu-Fu*Yu*Qu-Uu*Vu*_c+Fu*Wu*_c)*up,Ru[8]=np*up,Ru[9]=(Ju*Ku*Gu-qu*Xu*Gu-Ju*Nu*_c+Fu*Xu*_c+qu*Nu*Xc-Fu*Ku*Xc)*up,Ru[10]=(Uu*Xu*Gu-Ju*Hu*Gu+Ju*Nu*Qu-Fu*Xu*Qu-Uu*Nu*Xc+Fu*Hu*Xc)*up,Ru[11]=(qu*Hu*Gu-Uu*Ku*Gu-qu*Nu*Qu+Fu*Ku*Qu+Uu*Nu*_c-Fu*Hu*_c)*up,Ru[12]=ap*up,Ru[13]=(qu*Xu*Vu-Ju*Ku*Vu+Ju*Nu*Yu-Fu*Xu*Yu-qu*Nu*Zu+Fu*Ku*Zu)*up,Ru[14]=(Ju*Hu*Vu-Uu*Xu*Vu-Ju*Nu*Wu+Fu*Xu*Wu+Uu*Nu*Zu-Fu*Hu*Zu)*up,Ru[15]=(Uu*Ku*Vu-qu*Hu*Vu+qu*Nu*Wu-Fu*Ku*Wu-Uu*Nu*Yu+Fu*Hu*Yu)*up,this},scale:function(_u){var $u=this.elements,Ru=_u.x,Ou=_u.y,Fu=_u.z;return $u[0]*=Ru,$u[4]*=Ou,$u[8]*=Fu,$u[1]*=Ru,$u[5]*=Ou,$u[9]*=Fu,$u[2]*=Ru,$u[6]*=Ou,$u[10]*=Fu,$u[3]*=Ru,$u[7]*=Ou,$u[11]*=Fu,this},getMaxScaleOnAxis:function(){var _u=this.elements,$u=_u[0]*_u[0]+_u[1]*_u[1]+_u[2]*_u[2],Ru=_u[4]*_u[4]+_u[5]*_u[5]+_u[6]*_u[6],Ou=_u[8]*_u[8]+_u[9]*_u[9]+_u[10]*_u[10];return Math.sqrt(Math.max($u,Ru,Ou))},makeTranslation:function(_u,$u,Ru){return this.set(1,0,0,_u,0,1,0,$u,0,0,1,Ru,0,0,0,1),this},makeRotationX:function(_u){var $u=Math.cos(_u),Ru=Math.sin(_u);return this.set(1,0,0,0,0,$u,-Ru,0,0,Ru,$u,0,0,0,0,1),this},makeRotationY:function(_u){var $u=Math.cos(_u),Ru=Math.sin(_u);return this.set($u,0,Ru,0,0,1,0,0,-Ru,0,$u,0,0,0,0,1),this},makeRotationZ:function(_u){var $u=Math.cos(_u),Ru=Math.sin(_u);return this.set($u,-Ru,0,0,Ru,$u,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(_u,$u){var Ru=Math.cos($u),Ou=Math.sin($u),Fu=1-Ru,Nu=_u.x,Vu=_u.y,Gu=_u.z,Uu=Fu*Nu,Hu=Fu*Vu;return this.set(Uu*Nu+Ru,Uu*Vu-Ou*Gu,Uu*Gu+Ou*Vu,0,Uu*Vu+Ou*Gu,Hu*Vu+Ru,Hu*Gu-Ou*Nu,0,Uu*Gu-Ou*Vu,Hu*Gu+Ou*Nu,Fu*Gu*Gu+Ru,0,0,0,0,1),this},makeScale:function(_u,$u,Ru){return this.set(_u,0,0,0,0,$u,0,0,0,0,Ru,0,0,0,0,1),this},makeShear:function(_u,$u,Ru){return this.set(1,$u,Ru,0,_u,1,Ru,0,_u,$u,1,0,0,0,0,1),this},compose:function(_u,$u,Ru){var Ou=this.elements,Fu=$u._x,Nu=$u._y,Vu=$u._z,Gu=$u._w,Uu=Fu+Fu,Hu=Nu+Nu,Wu=Vu+Vu,Qu=Fu*Uu,qu=Fu*Hu,Ku=Fu*Wu,Yu=Nu*Hu,_c=Nu*Wu,Ju=Vu*Wu,Xu=Gu*Uu,Zu=Gu*Hu,Xc=Gu*Wu,_h=Ru.x,ep=Ru.y,np=Ru.z;return Ou[0]=(1-(Yu+Ju))*_h,Ou[1]=(qu+Xc)*_h,Ou[2]=(Ku-Zu)*_h,Ou[3]=0,Ou[4]=(qu-Xc)*ep,Ou[5]=(1-(Qu+Ju))*ep,Ou[6]=(_c+Xu)*ep,Ou[7]=0,Ou[8]=(Ku+Zu)*np,Ou[9]=(_c-Xu)*np,Ou[10]=(1-(Qu+Yu))*np,Ou[11]=0,Ou[12]=_u.x,Ou[13]=_u.y,Ou[14]=_u.z,Ou[15]=1,this},decompose:function(_u,$u,Ru){var Ou=this.elements,Fu=_v1.set(Ou[0],Ou[1],Ou[2]).length(),Nu=_v1.set(Ou[4],Ou[5],Ou[6]).length(),Vu=_v1.set(Ou[8],Ou[9],Ou[10]).length(),Gu=this.determinant();Gu<0&&(Fu=-Fu),_u.x=Ou[12],_u.y=Ou[13],_u.z=Ou[14],_m1.copy(this);var Uu=1/Fu,Hu=1/Nu,Wu=1/Vu;return _m1.elements[0]*=Uu,_m1.elements[1]*=Uu,_m1.elements[2]*=Uu,_m1.elements[4]*=Hu,_m1.elements[5]*=Hu,_m1.elements[6]*=Hu,_m1.elements[8]*=Wu,_m1.elements[9]*=Wu,_m1.elements[10]*=Wu,$u.setFromRotationMatrix(_m1),Ru.x=Fu,Ru.y=Nu,Ru.z=Vu,this},makePerspective:function(_u,$u,Ru,Ou,Fu,Nu){Nu===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Vu=this.elements,Gu=2*Fu/($u-_u),Uu=2*Fu/(Ru-Ou),Hu=($u+_u)/($u-_u),Wu=(Ru+Ou)/(Ru-Ou),Qu=-(Nu+Fu)/(Nu-Fu),qu=-2*Nu*Fu/(Nu-Fu);return Vu[0]=Gu,Vu[4]=0,Vu[8]=Hu,Vu[12]=0,Vu[1]=0,Vu[5]=Uu,Vu[9]=Wu,Vu[13]=0,Vu[2]=0,Vu[6]=0,Vu[10]=Qu,Vu[14]=qu,Vu[3]=0,Vu[7]=0,Vu[11]=-1,Vu[15]=0,this},makeOrthographic:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=this.elements,Gu=1/($u-_u),Uu=1/(Ru-Ou),Hu=1/(Nu-Fu),Wu=($u+_u)*Gu,Qu=(Ru+Ou)*Uu,qu=(Nu+Fu)*Hu;return Vu[0]=2*Gu,Vu[4]=0,Vu[8]=0,Vu[12]=-Wu,Vu[1]=0,Vu[5]=2*Uu,Vu[9]=0,Vu[13]=-Qu,Vu[2]=0,Vu[6]=0,Vu[10]=-2*Hu,Vu[14]=-qu,Vu[3]=0,Vu[7]=0,Vu[11]=0,Vu[15]=1,this},equals:function(_u){for(var $u=this.elements,Ru=_u.elements,Ou=0;Ou<16;Ou++)if($u[Ou]!==Ru[Ou])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Ru=0;Ru<16;Ru++)this.elements[Ru]=_u[Ru+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Ru=this.elements;return _u[$u]=Ru[0],_u[$u+1]=Ru[1],_u[$u+2]=Ru[2],_u[$u+3]=Ru[3],_u[$u+4]=Ru[4],_u[$u+5]=Ru[5],_u[$u+6]=Ru[6],_u[$u+7]=Ru[7],_u[$u+8]=Ru[8],_u[$u+9]=Ru[9],_u[$u+10]=Ru[10],_u[$u+11]=Ru[11],_u[$u+12]=Ru[12],_u[$u+13]=Ru[13],_u[$u+14]=Ru[14],_u[$u+15]=Ru[15],_u}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(_u,$u,Ru,Ou){this._x=_u||0,this._y=$u||0,this._z=Ru||0,this._order=Ou||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(_u){this._order=_u,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(_u,$u,Ru,Ou){return this._x=_u,this._y=$u,this._z=Ru,this._order=Ou||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(_u){return this._x=_u._x,this._y=_u._y,this._z=_u._z,this._order=_u._order,this._onChangeCallback(),this},setFromRotationMatrix:function(_u,$u,Ru){var Ou=MathUtils.clamp,Fu=_u.elements,Nu=Fu[0],Vu=Fu[4],Gu=Fu[8],Uu=Fu[1],Hu=Fu[5],Wu=Fu[9],Qu=Fu[2],qu=Fu[6],Ku=Fu[10];switch($u=$u||this._order,$u){case"XYZ":this._y=Math.asin(Ou(Gu,-1,1)),Math.abs(Gu)<.9999999?(this._x=Math.atan2(-Wu,Ku),this._z=Math.atan2(-Vu,Nu)):(this._x=Math.atan2(qu,Hu),this._z=0);break;case"YXZ":this._x=Math.asin(-Ou(Wu,-1,1)),Math.abs(Wu)<.9999999?(this._y=Math.atan2(Gu,Ku),this._z=Math.atan2(Uu,Hu)):(this._y=Math.atan2(-Qu,Nu),this._z=0);break;case"ZXY":this._x=Math.asin(Ou(qu,-1,1)),Math.abs(qu)<.9999999?(this._y=Math.atan2(-Qu,Ku),this._z=Math.atan2(-Vu,Hu)):(this._y=0,this._z=Math.atan2(Uu,Nu));break;case"ZYX":this._y=Math.asin(-Ou(Qu,-1,1)),Math.abs(Qu)<.9999999?(this._x=Math.atan2(qu,Ku),this._z=Math.atan2(Uu,Nu)):(this._x=0,this._z=Math.atan2(-Vu,Hu));break;case"YZX":this._z=Math.asin(Ou(Uu,-1,1)),Math.abs(Uu)<.9999999?(this._x=Math.atan2(-Wu,Hu),this._y=Math.atan2(-Qu,Nu)):(this._x=0,this._y=Math.atan2(Gu,Ku));break;case"XZY":this._z=Math.asin(-Ou(Vu,-1,1)),Math.abs(Vu)<.9999999?(this._x=Math.atan2(qu,Hu),this._y=Math.atan2(Gu,Nu)):(this._x=Math.atan2(-Wu,Ku),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$u)}return this._order=$u,Ru!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(_u,$u,Ru){return _matrix.makeRotationFromQuaternion(_u),this.setFromRotationMatrix(_matrix,$u,Ru)},setFromVector3:function(_u,$u){return this.set(_u.x,_u.y,_u.z,$u||this._order)},reorder:function(_u){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,_u)},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._order===this._order},fromArray:function(_u){return this._x=_u[0],this._y=_u[1],this._z=_u[2],_u[3]!==void 0&&(this._order=_u[3]),this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._order,_u},toVector3:function(_u){return _u?_u.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(_u){this.mask=1<<_u|0},enable:function(_u){this.mask|=1<<_u|0},enableAll:function(){this.mask=-1},toggle:function(_u){this.mask^=1<<_u|0},disable:function(_u){this.mask&=~(1<<_u|0)},disableAll:function(){this.mask=0},test:function(_u){return(this.mask&_u.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var _u=new Vector3,$u=new Euler,Ru=new Quaternion,Ou=new Vector3(1,1,1);function Fu(){Ru.setFromEuler($u,!1)}function Nu(){$u.setFromQuaternion(Ru,void 0,!1)}$u._onChange(Fu),Ru._onChange(Nu),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_u},rotation:{configurable:!0,enumerable:!0,value:$u},quaternion:{configurable:!0,enumerable:!0,value:Ru},scale:{configurable:!0,enumerable:!0,value:Ou},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_u),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(_u){return this.quaternion.premultiply(_u),this},setRotationFromAxisAngle:function(_u,$u){this.quaternion.setFromAxisAngle(_u,$u)},setRotationFromEuler:function(_u){this.quaternion.setFromEuler(_u,!0)},setRotationFromMatrix:function(_u){this.quaternion.setFromRotationMatrix(_u)},setRotationFromQuaternion:function(_u){this.quaternion.copy(_u)},rotateOnAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.premultiply(_q1),this},rotateX:function(_u){return this.rotateOnAxis(_xAxis,_u)},rotateY:function(_u){return this.rotateOnAxis(_yAxis,_u)},rotateZ:function(_u){return this.rotateOnAxis(_zAxis,_u)},translateOnAxis:function(_u,$u){return _v1$1.copy(_u).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar($u)),this},translateX:function(_u){return this.translateOnAxis(_xAxis,_u)},translateY:function(_u){return this.translateOnAxis(_yAxis,_u)},translateZ:function(_u){return this.translateOnAxis(_zAxis,_u)},localToWorld:function(_u){return _u.applyMatrix4(this.matrixWorld)},worldToLocal:function(_u){return _u.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(_u,$u,Ru){_u.isVector3?_target.copy(_u):_target.set(_u,$u,Ru);var Ou=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Ou&&(_m1$1.extractRotation(Ou.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.add(arguments[$u]);return this}return _u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_u),this):(_u&&_u.isObject3D?(_u.parent!==null&&_u.parent.remove(_u),_u.parent=this,this.children.push(_u),_u.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_u),this)},remove:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.remove(arguments[$u]);return this}var Ru=this.children.indexOf(_u);return Ru!==-1&&(_u.parent=null,this.children.splice(Ru,1),_u.dispatchEvent(_removedEvent)),this},attach:function(_u){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),_u.parent!==null&&(_u.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_u.parent.matrixWorld)),_u.applyMatrix4(_m1$1),_u.updateWorldMatrix(!1,!1),this.add(_u),this},getObjectById:function(_u){return this.getObjectByProperty("id",_u)},getObjectByName:function(_u){return this.getObjectByProperty("name",_u)},getObjectByProperty:function(_u,$u){if(this[_u]===$u)return this;for(var Ru=0,Ou=this.children.length;Ru<Ou;Ru++){var Fu=this.children[Ru],Nu=Fu.getObjectByProperty(_u,$u);if(Nu!==void 0)return Nu}},getWorldPosition:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),_u.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),_u=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_u,_scale),_u},getWorldScale:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,_u),_u},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set($u[8],$u[9],$u[10]).normalize()},raycast:function(){},traverse:function(_u){_u(this);for(var $u=this.children,Ru=0,Ou=$u.length;Ru<Ou;Ru++)$u[Ru].traverse(_u)},traverseVisible:function(_u){if(this.visible!==!1){_u(this);for(var $u=this.children,Ru=0,Ou=$u.length;Ru<Ou;Ru++)$u[Ru].traverseVisible(_u)}},traverseAncestors:function(_u){var $u=this.parent;$u!==null&&(_u($u),$u.traverseAncestors(_u))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_u)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_u=!0);for(var $u=this.children,Ru=0,Ou=$u.length;Ru<Ou;Ru++)$u[Ru].updateMatrixWorld(_u)},updateWorldMatrix:function(_u,$u){var Ru=this.parent;if(_u===!0&&Ru!==null&&Ru.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),$u===!0)for(var Ou=this.children,Fu=0,Nu=Ou.length;Fu<Nu;Fu++)Ou[Fu].updateWorldMatrix(!1,!0)},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string",Ru={};$u&&(_u={geometries:{},materials:{},textures:{},images:{},shapes:{}},Ru.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Ou={};Ou.uuid=this.uuid,Ou.type=this.type,this.name!==""&&(Ou.name=this.name),this.castShadow===!0&&(Ou.castShadow=!0),this.receiveShadow===!0&&(Ou.receiveShadow=!0),this.visible===!1&&(Ou.visible=!1),this.frustumCulled===!1&&(Ou.frustumCulled=!1),this.renderOrder!==0&&(Ou.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Ou.userData=this.userData),Ou.layers=this.layers.mask,Ou.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Ou.matrixAutoUpdate=!1),this.isInstancedMesh&&(Ou.type="InstancedMesh",Ou.count=this.count,Ou.instanceMatrix=this.instanceMatrix.toJSON());function Fu(Ju,Xu){return Ju[Xu.uuid]===void 0&&(Ju[Xu.uuid]=Xu.toJSON(_u)),Xu.uuid}if(this.isMesh||this.isLine||this.isPoints){Ou.geometry=Fu(_u.geometries,this.geometry);var Nu=this.geometry.parameters;if(Nu!==void 0&&Nu.shapes!==void 0){var Vu=Nu.shapes;if(Array.isArray(Vu))for(var Gu=0,Uu=Vu.length;Gu<Uu;Gu++){var Hu=Vu[Gu];Fu(_u.shapes,Hu)}else Fu(_u.shapes,Vu)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Wu=[],Gu=0,Uu=this.material.length;Gu<Uu;Gu++)Wu.push(Fu(_u.materials,this.material[Gu]));Ou.material=Wu}else Ou.material=Fu(_u.materials,this.material);if(this.children.length>0){Ou.children=[];for(var Gu=0;Gu<this.children.length;Gu++)Ou.children.push(this.children[Gu].toJSON(_u).object)}if($u){var Qu=_c(_u.geometries),qu=_c(_u.materials),Ku=_c(_u.textures),Yu=_c(_u.images),Vu=_c(_u.shapes);Qu.length>0&&(Ru.geometries=Qu),qu.length>0&&(Ru.materials=qu),Ku.length>0&&(Ru.textures=Ku),Yu.length>0&&(Ru.images=Yu),Vu.length>0&&(Ru.shapes=Vu)}return Ru.object=Ou,Ru;function _c(Ju){var Xu=[];for(var Zu in Ju){var Xc=Ju[Zu];delete Xc.metadata,Xu.push(Xc)}return Xu}},clone:function(_u){return new this.constructor().copy(this,_u)},copy:function(_u,$u){if($u===void 0&&($u=!0),this.name=_u.name,this.up.copy(_u.up),this.position.copy(_u.position),this.quaternion.copy(_u.quaternion),this.scale.copy(_u.scale),this.matrix.copy(_u.matrix),this.matrixWorld.copy(_u.matrixWorld),this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_u.matrixWorldNeedsUpdate,this.layers.mask=_u.layers.mask,this.visible=_u.visible,this.castShadow=_u.castShadow,this.receiveShadow=_u.receiveShadow,this.frustumCulled=_u.frustumCulled,this.renderOrder=_u.renderOrder,this.userData=JSON.parse(JSON.stringify(_u.userData)),$u===!0)for(var Ru=0;Ru<_u.children.length;Ru++){var Ou=_u.children[Ru];this.add(Ou.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),_u.background!==null&&(this.background=_u.background.clone()),_u.environment!==null&&(this.environment=_u.environment.clone()),_u.fog!==null&&(this.fog=_u.fog.clone()),_u.overrideMaterial!==null&&(this.overrideMaterial=_u.overrideMaterial.clone()),this.autoUpdate=_u.autoUpdate,this.matrixAutoUpdate=_u.matrixAutoUpdate,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return this.background!==null&&($u.object.background=this.background.toJSON(_u)),this.environment!==null&&($u.object.environment=this.environment.toJSON(_u)),this.fog!==null&&($u.object.fog=this.fog.toJSON()),$u},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(_u,$u){this.min=_u!==void 0?_u:new Vector3(1/0,1/0,1/0),this.max=$u!==void 0?$u:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromArray:function(_u){for(var $u=1/0,Ru=1/0,Ou=1/0,Fu=-1/0,Nu=-1/0,Vu=-1/0,Gu=0,Uu=_u.length;Gu<Uu;Gu+=3){var Hu=_u[Gu],Wu=_u[Gu+1],Qu=_u[Gu+2];Hu<$u&&($u=Hu),Wu<Ru&&(Ru=Wu),Qu<Ou&&(Ou=Qu),Hu>Fu&&(Fu=Hu),Wu>Nu&&(Nu=Wu),Qu>Vu&&(Vu=Qu)}return this.min.set($u,Ru,Ou),this.max.set(Fu,Nu,Vu),this},setFromBufferAttribute:function(_u){for(var $u=1/0,Ru=1/0,Ou=1/0,Fu=-1/0,Nu=-1/0,Vu=-1/0,Gu=0,Uu=_u.count;Gu<Uu;Gu++){var Hu=_u.getX(Gu),Wu=_u.getY(Gu),Qu=_u.getZ(Gu);Hu<$u&&($u=Hu),Wu<Ru&&(Ru=Wu),Qu<Ou&&(Ou=Qu),Hu>Fu&&(Fu=Hu),Wu>Nu&&(Nu=Wu),Qu>Vu&&(Vu=Qu)}return this.min.set($u,Ru,Ou),this.max.set(Fu,Nu,Vu),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Ru=_u.length;$u<Ru;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Ru=_vector$1.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Ru),this.max.copy(_u).add(Ru),this},setFromObject:function(_u){return this.makeEmpty(),this.expandByObject(_u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},expandByObject:function(_u){_u.updateWorldMatrix(!1,!1);var $u=_u.geometry;$u!==void 0&&($u.boundingBox===null&&$u.computeBoundingBox(),_box.copy($u.boundingBox),_box.applyMatrix4(_u.matrixWorld),this.union(_box));for(var Ru=_u.children,Ou=0,Fu=Ru.length;Ou<Fu;Ou++)this.expandByObject(Ru[Ou]);return this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y||_u.z<this.min.z||_u.z>this.max.z)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y&&this.min.z<=_u.min.z&&_u.max.z<=this.max.z},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),$u=new Vector3),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y),(_u.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y||_u.max.z<this.min.z||_u.min.z>this.max.z)},intersectsSphere:function(_u){return this.clampPoint(_u.center,_vector$1),_vector$1.distanceToSquared(_u.center)<=_u.radius*_u.radius},intersectsPlane:function(_u){var $u,Ru;return _u.normal.x>0?($u=_u.normal.x*this.min.x,Ru=_u.normal.x*this.max.x):($u=_u.normal.x*this.max.x,Ru=_u.normal.x*this.min.x),_u.normal.y>0?($u+=_u.normal.y*this.min.y,Ru+=_u.normal.y*this.max.y):($u+=_u.normal.y*this.max.y,Ru+=_u.normal.y*this.min.y),_u.normal.z>0?($u+=_u.normal.z*this.min.z,Ru+=_u.normal.z*this.max.z):($u+=_u.normal.z*this.max.z,Ru+=_u.normal.z*this.min.z),$u<=-_u.constant&&Ru>=-_u.constant},intersectsTriangle:function(_u){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(_u.a,_center),_v1$2.subVectors(_u.b,_center),_v2.subVectors(_u.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var $u=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes($u,_v0,_v1$2,_v2,_extents)||($u=[1,0,0,0,1,0,0,0,1],!satForAxes($u,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),$u=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes($u,_v0,_v1$2,_v2,_extents))},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$1.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},getBoundingSphere:function(_u){return _u===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(_u.center),_u.radius=this.getSize(_vector$1).length()*.5,_u},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this.isEmpty()&&this.makeEmpty(),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},applyMatrix4:function(_u){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_u),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_u),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_u),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_u),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_u),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_u),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_u),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_u),this.setFromPoints(_points),this)},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});function satForAxes(_u,$u,Ru,Ou,Fu){var Nu,Vu;for(Nu=0,Vu=_u.length-3;Nu<=Vu;Nu+=3){_testAxis.fromArray(_u,Nu);var Gu=Fu.x*Math.abs(_testAxis.x)+Fu.y*Math.abs(_testAxis.y)+Fu.z*Math.abs(_testAxis.z),Uu=$u.dot(_testAxis),Hu=Ru.dot(_testAxis),Wu=Ou.dot(_testAxis);if(Math.max(-Math.max(Uu,Hu,Wu),Math.min(Uu,Hu,Wu))>Gu)return!1}return!0}var _box$1=new Box3;function Sphere(_u,$u){this.center=_u!==void 0?_u:new Vector3,this.radius=$u!==void 0?$u:-1}Object.assign(Sphere.prototype,{set:function(_u,$u){return this.center.copy(_u),this.radius=$u,this},setFromPoints:function(_u,$u){var Ru=this.center;$u!==void 0?Ru.copy($u):_box$1.setFromPoints(_u).getCenter(Ru);for(var Ou=0,Fu=0,Nu=_u.length;Fu<Nu;Fu++)Ou=Math.max(Ou,Ru.distanceToSquared(_u[Fu]));return this.radius=Math.sqrt(Ou),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.center.copy(_u.center),this.radius=_u.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(_u){return _u.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(_u){return _u.distanceTo(this.center)-this.radius},intersectsSphere:function(_u){var $u=this.radius+_u.radius;return _u.center.distanceToSquared(this.center)<=$u*$u},intersectsBox:function(_u){return _u.intersectsSphere(this)},intersectsPlane:function(_u){return Math.abs(_u.distanceToPoint(this.center))<=this.radius},clampPoint:function(_u,$u){var Ru=this.center.distanceToSquared(_u);return $u===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u),Ru>this.radius*this.radius&&($u.sub(this.center).normalize(),$u.multiplyScalar(this.radius).add(this.center)),$u},getBoundingBox:function(_u){return _u===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),_u=new Box3),this.isEmpty()?(_u.makeEmpty(),_u):(_u.set(this.center,this.center),_u.expandByScalar(this.radius),_u)},applyMatrix4:function(_u){return this.center.applyMatrix4(_u),this.radius=this.radius*_u.getMaxScaleOnAxis(),this},translate:function(_u){return this.center.add(_u),this},equals:function(_u){return _u.center.equals(this.center)&&_u.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(_u,$u){this.origin=_u!==void 0?_u:new Vector3,this.direction=$u!==void 0?$u:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(_u,$u){return this.origin.copy(_u),this.direction.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.origin.copy(_u.origin),this.direction.copy(_u.direction),this},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Ray: .at() target is now required"),$u=new Vector3),$u.copy(this.direction).multiplyScalar(_u).add(this.origin)},lookAt:function(_u){return this.direction.copy(_u).sub(this.origin).normalize(),this},recast:function(_u){return this.origin.copy(this.at(_u,_vector$2)),this},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),$u=new Vector3),$u.subVectors(_u,this.origin);var Ru=$u.dot(this.direction);return Ru<0?$u.copy(this.origin):$u.copy(this.direction).multiplyScalar(Ru).add(this.origin)},distanceToPoint:function(_u){return Math.sqrt(this.distanceSqToPoint(_u))},distanceSqToPoint:function(_u){var $u=_vector$2.subVectors(_u,this.origin).dot(this.direction);return $u<0?this.origin.distanceToSquared(_u):(_vector$2.copy(this.direction).multiplyScalar($u).add(this.origin),_vector$2.distanceToSquared(_u))},distanceSqToSegment:function(_u,$u,Ru,Ou){_segCenter.copy(_u).add($u).multiplyScalar(.5),_segDir.copy($u).sub(_u).normalize(),_diff.copy(this.origin).sub(_segCenter);var Fu=_u.distanceTo($u)*.5,Nu=-this.direction.dot(_segDir),Vu=_diff.dot(this.direction),Gu=-_diff.dot(_segDir),Uu=_diff.lengthSq(),Hu=Math.abs(1-Nu*Nu),Wu,Qu,qu,Ku;if(Hu>0)if(Wu=Nu*Gu-Vu,Qu=Nu*Vu-Gu,Ku=Fu*Hu,Wu>=0)if(Qu>=-Ku)if(Qu<=Ku){var Yu=1/Hu;Wu*=Yu,Qu*=Yu,qu=Wu*(Wu+Nu*Qu+2*Vu)+Qu*(Nu*Wu+Qu+2*Gu)+Uu}else Qu=Fu,Wu=Math.max(0,-(Nu*Qu+Vu)),qu=-Wu*Wu+Qu*(Qu+2*Gu)+Uu;else Qu=-Fu,Wu=Math.max(0,-(Nu*Qu+Vu)),qu=-Wu*Wu+Qu*(Qu+2*Gu)+Uu;else Qu<=-Ku?(Wu=Math.max(0,-(-Nu*Fu+Vu)),Qu=Wu>0?-Fu:Math.min(Math.max(-Fu,-Gu),Fu),qu=-Wu*Wu+Qu*(Qu+2*Gu)+Uu):Qu<=Ku?(Wu=0,Qu=Math.min(Math.max(-Fu,-Gu),Fu),qu=Qu*(Qu+2*Gu)+Uu):(Wu=Math.max(0,-(Nu*Fu+Vu)),Qu=Wu>0?Fu:Math.min(Math.max(-Fu,-Gu),Fu),qu=-Wu*Wu+Qu*(Qu+2*Gu)+Uu);else Qu=Nu>0?-Fu:Fu,Wu=Math.max(0,-(Nu*Qu+Vu)),qu=-Wu*Wu+Qu*(Qu+2*Gu)+Uu;return Ru&&Ru.copy(this.direction).multiplyScalar(Wu).add(this.origin),Ou&&Ou.copy(_segDir).multiplyScalar(Qu).add(_segCenter),qu},intersectSphere:function(_u,$u){_vector$2.subVectors(_u.center,this.origin);var Ru=_vector$2.dot(this.direction),Ou=_vector$2.dot(_vector$2)-Ru*Ru,Fu=_u.radius*_u.radius;if(Ou>Fu)return null;var Nu=Math.sqrt(Fu-Ou),Vu=Ru-Nu,Gu=Ru+Nu;return Vu<0&&Gu<0?null:Vu<0?this.at(Gu,$u):this.at(Vu,$u)},intersectsSphere:function(_u){return this.distanceSqToPoint(_u.center)<=_u.radius*_u.radius},distanceToPlane:function(_u){var $u=_u.normal.dot(this.direction);if($u===0)return _u.distanceToPoint(this.origin)===0?0:null;var Ru=-(this.origin.dot(_u.normal)+_u.constant)/$u;return Ru>=0?Ru:null},intersectPlane:function(_u,$u){var Ru=this.distanceToPlane(_u);return Ru===null?null:this.at(Ru,$u)},intersectsPlane:function(_u){var $u=_u.distanceToPoint(this.origin);if($u===0)return!0;var Ru=_u.normal.dot(this.direction);return Ru*$u<0},intersectBox:function(_u,$u){var Ru,Ou,Fu,Nu,Vu,Gu,Uu=1/this.direction.x,Hu=1/this.direction.y,Wu=1/this.direction.z,Qu=this.origin;return Uu>=0?(Ru=(_u.min.x-Qu.x)*Uu,Ou=(_u.max.x-Qu.x)*Uu):(Ru=(_u.max.x-Qu.x)*Uu,Ou=(_u.min.x-Qu.x)*Uu),Hu>=0?(Fu=(_u.min.y-Qu.y)*Hu,Nu=(_u.max.y-Qu.y)*Hu):(Fu=(_u.max.y-Qu.y)*Hu,Nu=(_u.min.y-Qu.y)*Hu),Ru>Nu||Fu>Ou||((Fu>Ru||Ru!==Ru)&&(Ru=Fu),(Nu<Ou||Ou!==Ou)&&(Ou=Nu),Wu>=0?(Vu=(_u.min.z-Qu.z)*Wu,Gu=(_u.max.z-Qu.z)*Wu):(Vu=(_u.max.z-Qu.z)*Wu,Gu=(_u.min.z-Qu.z)*Wu),Ru>Gu||Vu>Ou)||((Vu>Ru||Ru!==Ru)&&(Ru=Vu),(Gu<Ou||Ou!==Ou)&&(Ou=Gu),Ou<0)?null:this.at(Ru>=0?Ru:Ou,$u)},intersectsBox:function(_u){return this.intersectBox(_u,_vector$2)!==null},intersectTriangle:function(_u,$u,Ru,Ou,Fu){_edge1.subVectors($u,_u),_edge2.subVectors(Ru,_u),_normal.crossVectors(_edge1,_edge2);var Nu=this.direction.dot(_normal),Vu;if(Nu>0){if(Ou)return null;Vu=1}else if(Nu<0)Vu=-1,Nu=-Nu;else return null;_diff.subVectors(this.origin,_u);var Gu=Vu*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Gu<0)return null;var Uu=Vu*this.direction.dot(_edge1.cross(_diff));if(Uu<0||Gu+Uu>Nu)return null;var Hu=-Vu*_diff.dot(_normal);return Hu<0?null:this.at(Hu/Nu,Fu)},applyMatrix4:function(_u){return this.origin.applyMatrix4(_u),this.direction.transformDirection(_u),this},equals:function(_u){return _u.origin.equals(this.origin)&&_u.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(_u,$u){this.normal=_u!==void 0?_u:new Vector3(1,0,0),this.constant=$u!==void 0?$u:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(_u,$u){return this.normal.copy(_u),this.constant=$u,this},setComponents:function(_u,$u,Ru,Ou){return this.normal.set(_u,$u,Ru),this.constant=Ou,this},setFromNormalAndCoplanarPoint:function(_u,$u){return this.normal.copy(_u),this.constant=-$u.dot(this.normal),this},setFromCoplanarPoints:function(_u,$u,Ru){var Ou=_vector1.subVectors(Ru,$u).cross(_vector2.subVectors(_u,$u)).normalize();return this.setFromNormalAndCoplanarPoint(Ou,_u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.normal.copy(_u.normal),this.constant=_u.constant,this},normalize:function(){var _u=1/this.normal.length();return this.normal.multiplyScalar(_u),this.constant*=_u,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(_u){return this.normal.dot(_u)+this.constant},distanceToSphere:function(_u){return this.distanceToPoint(_u.center)-_u.radius},projectPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),$u=new Vector3),$u.copy(this.normal).multiplyScalar(-this.distanceToPoint(_u)).add(_u)},intersectLine:function(_u,$u){$u===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),$u=new Vector3);var Ru=_u.delta(_vector1),Ou=this.normal.dot(Ru);if(Ou===0)return this.distanceToPoint(_u.start)===0?$u.copy(_u.start):void 0;var Fu=-(_u.start.dot(this.normal)+this.constant)/Ou;if(!(Fu<0||Fu>1))return $u.copy(Ru).multiplyScalar(Fu).add(_u.start)},intersectsLine:function(_u){var $u=this.distanceToPoint(_u.start),Ru=this.distanceToPoint(_u.end);return $u<0&&Ru>0||Ru<0&&$u>0},intersectsBox:function(_u){return _u.intersectsPlane(this)},intersectsSphere:function(_u){return _u.intersectsPlane(this)},coplanarPoint:function(_u){return _u===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),_u=new Vector3),_u.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(_u,$u){var Ru=$u||_normalMatrix.getNormalMatrix(_u),Ou=this.coplanarPoint(_vector1).applyMatrix4(_u),Fu=this.normal.applyMatrix3(Ru).normalize();return this.constant=-Ou.dot(Fu),this},translate:function(_u){return this.constant-=_u.dot(this.normal),this},equals:function(_u){return _u.normal.equals(this.normal)&&_u.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(_u,$u,Ru){this.a=_u!==void 0?_u:new Vector3,this.b=$u!==void 0?$u:new Vector3,this.c=Ru!==void 0?Ru:new Vector3}Object.assign(Triangle,{getNormal:function(_u,$u,Ru,Ou){Ou===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Ou=new Vector3),Ou.subVectors(Ru,$u),_v0$1.subVectors(_u,$u),Ou.cross(_v0$1);var Fu=Ou.lengthSq();return Fu>0?Ou.multiplyScalar(1/Math.sqrt(Fu)):Ou.set(0,0,0)},getBarycoord:function(_u,$u,Ru,Ou,Fu){_v0$1.subVectors(Ou,$u),_v1$3.subVectors(Ru,$u),_v2$1.subVectors(_u,$u);var Nu=_v0$1.dot(_v0$1),Vu=_v0$1.dot(_v1$3),Gu=_v0$1.dot(_v2$1),Uu=_v1$3.dot(_v1$3),Hu=_v1$3.dot(_v2$1),Wu=Nu*Uu-Vu*Vu;if(Fu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Fu=new Vector3),Wu===0)return Fu.set(-2,-1,-1);var Qu=1/Wu,qu=(Uu*Gu-Vu*Hu)*Qu,Ku=(Nu*Hu-Vu*Gu)*Qu;return Fu.set(1-qu-Ku,Ku,qu)},containsPoint:function(_u,$u,Ru,Ou){return Triangle.getBarycoord(_u,$u,Ru,Ou,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){return this.getBarycoord(_u,$u,Ru,Ou,_v3),Gu.set(0,0),Gu.addScaledVector(Fu,_v3.x),Gu.addScaledVector(Nu,_v3.y),Gu.addScaledVector(Vu,_v3.z),Gu},isFrontFacing:function(_u,$u,Ru,Ou){return _v0$1.subVectors(Ru,$u),_v1$3.subVectors(_u,$u),_v0$1.cross(_v1$3).dot(Ou)<0}});Object.assign(Triangle.prototype,{set:function(_u,$u,Ru){return this.a.copy(_u),this.b.copy($u),this.c.copy(Ru),this},setFromPointsAndIndices:function(_u,$u,Ru,Ou){return this.a.copy(_u[$u]),this.b.copy(_u[Ru]),this.c.copy(_u[Ou]),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.a.copy(_u.a),this.b.copy(_u.b),this.c.copy(_u.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),_u=new Vector3),_u.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(_u){return Triangle.getNormal(this.a,this.b,this.c,_u)},getPlane:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),_u=new Plane),_u.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(_u,$u){return Triangle.getBarycoord(_u,this.a,this.b,this.c,$u)},getUV:function(_u,$u,Ru,Ou,Fu){return Triangle.getUV(_u,this.a,this.b,this.c,$u,Ru,Ou,Fu)},containsPoint:function(_u){return Triangle.containsPoint(_u,this.a,this.b,this.c)},isFrontFacing:function(_u){return Triangle.isFrontFacing(this.a,this.b,this.c,_u)},intersectsBox:function(_u){return _u.intersectsTriangle(this)},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),$u=new Vector3);var Ru=this.a,Ou=this.b,Fu=this.c,Nu,Vu;_vab.subVectors(Ou,Ru),_vac.subVectors(Fu,Ru),_vap.subVectors(_u,Ru);var Gu=_vab.dot(_vap),Uu=_vac.dot(_vap);if(Gu<=0&&Uu<=0)return $u.copy(Ru);_vbp.subVectors(_u,Ou);var Hu=_vab.dot(_vbp),Wu=_vac.dot(_vbp);if(Hu>=0&&Wu<=Hu)return $u.copy(Ou);var Qu=Gu*Wu-Hu*Uu;if(Qu<=0&&Gu>=0&&Hu<=0)return Nu=Gu/(Gu-Hu),$u.copy(Ru).addScaledVector(_vab,Nu);_vcp.subVectors(_u,Fu);var qu=_vab.dot(_vcp),Ku=_vac.dot(_vcp);if(Ku>=0&&qu<=Ku)return $u.copy(Fu);var Yu=qu*Uu-Gu*Ku;if(Yu<=0&&Uu>=0&&Ku<=0)return Vu=Uu/(Uu-Ku),$u.copy(Ru).addScaledVector(_vac,Vu);var _c=Hu*Ku-qu*Wu;if(_c<=0&&Wu-Hu>=0&&qu-Ku>=0)return _vbc.subVectors(Fu,Ou),Vu=(Wu-Hu)/(Wu-Hu+(qu-Ku)),$u.copy(Ou).addScaledVector(_vbc,Vu);var Ju=1/(_c+Yu+Qu);return Nu=Yu*Ju,Vu=Qu*Ju,$u.copy(Ru).addScaledVector(_vab,Nu).addScaledVector(_vac,Vu)},equals:function(_u){return _u.a.equals(this.a)&&_u.b.equals(this.b)&&_u.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(_u,$u,Ru){return $u===void 0&&Ru===void 0?this.set(_u):this.setRGB(_u,$u,Ru)}function hue2rgb(_u,$u,Ru){return Ru<0&&(Ru+=1),Ru>1&&(Ru-=1),Ru<1/6?_u+($u-_u)*6*Ru:Ru<1/2?$u:Ru<2/3?_u+($u-_u)*6*(2/3-Ru):_u}function SRGBToLinear(_u){return _u<.04045?_u*.0773993808:Math.pow(_u*.9478672986+.0521327014,2.4)}function LinearToSRGB(_u){return _u<.0031308?_u*12.92:1.055*Math.pow(_u,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(_u){return _u&&_u.isColor?this.copy(_u):typeof _u=="number"?this.setHex(_u):typeof _u=="string"&&this.setStyle(_u),this},setScalar:function(_u){return this.r=_u,this.g=_u,this.b=_u,this},setHex:function(_u){return _u=Math.floor(_u),this.r=(_u>>16&255)/255,this.g=(_u>>8&255)/255,this.b=(_u&255)/255,this},setRGB:function(_u,$u,Ru){return this.r=_u,this.g=$u,this.b=Ru,this},setHSL:function(_u,$u,Ru){if(_u=MathUtils.euclideanModulo(_u,1),$u=MathUtils.clamp($u,0,1),Ru=MathUtils.clamp(Ru,0,1),$u===0)this.r=this.g=this.b=Ru;else{var Ou=Ru<=.5?Ru*(1+$u):Ru+$u-Ru*$u,Fu=2*Ru-Ou;this.r=hue2rgb(Fu,Ou,_u+1/3),this.g=hue2rgb(Fu,Ou,_u),this.b=hue2rgb(Fu,Ou,_u-1/3)}return this},setStyle:function(_u){function $u(Qu){Qu!==void 0&&parseFloat(Qu)<1&&console.warn("THREE.Color: Alpha component of "+_u+" will be ignored.")}var Ru;if(Ru=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(_u)){var Ou,Fu=Ru[1],Nu=Ru[2];switch(Fu){case"rgb":case"rgba":if(Ou=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Nu))return this.r=Math.min(255,parseInt(Ou[1],10))/255,this.g=Math.min(255,parseInt(Ou[2],10))/255,this.b=Math.min(255,parseInt(Ou[3],10))/255,$u(Ou[5]),this;if(Ou=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Nu))return this.r=Math.min(100,parseInt(Ou[1],10))/100,this.g=Math.min(100,parseInt(Ou[2],10))/100,this.b=Math.min(100,parseInt(Ou[3],10))/100,$u(Ou[5]),this;break;case"hsl":case"hsla":if(Ou=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Nu)){var Vu=parseFloat(Ou[1])/360,Gu=parseInt(Ou[2],10)/100,Uu=parseInt(Ou[3],10)/100;return $u(Ou[5]),this.setHSL(Vu,Gu,Uu)}break}}else if(Ru=/^\#([A-Fa-f0-9]+)$/.exec(_u)){var Hu=Ru[1],Wu=Hu.length;if(Wu===3)return this.r=parseInt(Hu.charAt(0)+Hu.charAt(0),16)/255,this.g=parseInt(Hu.charAt(1)+Hu.charAt(1),16)/255,this.b=parseInt(Hu.charAt(2)+Hu.charAt(2),16)/255,this;if(Wu===6)return this.r=parseInt(Hu.charAt(0)+Hu.charAt(1),16)/255,this.g=parseInt(Hu.charAt(2)+Hu.charAt(3),16)/255,this.b=parseInt(Hu.charAt(4)+Hu.charAt(5),16)/255,this}return _u&&_u.length>0?this.setColorName(_u):this},setColorName:function(_u){var $u=_colorKeywords[_u];return $u!==void 0?this.setHex($u):console.warn("THREE.Color: Unknown color "+_u),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(_u){return this.r=_u.r,this.g=_u.g,this.b=_u.b,this},copyGammaToLinear:function(_u,$u){return $u===void 0&&($u=2),this.r=Math.pow(_u.r,$u),this.g=Math.pow(_u.g,$u),this.b=Math.pow(_u.b,$u),this},copyLinearToGamma:function(_u,$u){$u===void 0&&($u=2);var Ru=$u>0?1/$u:1;return this.r=Math.pow(_u.r,Ru),this.g=Math.pow(_u.g,Ru),this.b=Math.pow(_u.b,Ru),this},convertGammaToLinear:function(_u){return this.copyGammaToLinear(this,_u),this},convertLinearToGamma:function(_u){return this.copyLinearToGamma(this,_u),this},copySRGBToLinear:function(_u){return this.r=SRGBToLinear(_u.r),this.g=SRGBToLinear(_u.g),this.b=SRGBToLinear(_u.b),this},copyLinearToSRGB:function(_u){return this.r=LinearToSRGB(_u.r),this.g=LinearToSRGB(_u.g),this.b=LinearToSRGB(_u.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(_u){_u===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),_u={h:0,s:0,l:0});var $u=this.r,Ru=this.g,Ou=this.b,Fu=Math.max($u,Ru,Ou),Nu=Math.min($u,Ru,Ou),Vu,Gu,Uu=(Nu+Fu)/2;if(Nu===Fu)Vu=0,Gu=0;else{var Hu=Fu-Nu;switch(Gu=Uu<=.5?Hu/(Fu+Nu):Hu/(2-Fu-Nu),Fu){case $u:Vu=(Ru-Ou)/Hu+(Ru<Ou?6:0);break;case Ru:Vu=(Ou-$u)/Hu+2;break;case Ou:Vu=($u-Ru)/Hu+4;break}Vu/=6}return _u.h=Vu,_u.s=Gu,_u.l=Uu,_u},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(_u,$u,Ru){return this.getHSL(_hslA),_hslA.h+=_u,_hslA.s+=$u,_hslA.l+=Ru,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(_u){return this.r+=_u.r,this.g+=_u.g,this.b+=_u.b,this},addColors:function(_u,$u){return this.r=_u.r+$u.r,this.g=_u.g+$u.g,this.b=_u.b+$u.b,this},addScalar:function(_u){return this.r+=_u,this.g+=_u,this.b+=_u,this},sub:function(_u){return this.r=Math.max(0,this.r-_u.r),this.g=Math.max(0,this.g-_u.g),this.b=Math.max(0,this.b-_u.b),this},multiply:function(_u){return this.r*=_u.r,this.g*=_u.g,this.b*=_u.b,this},multiplyScalar:function(_u){return this.r*=_u,this.g*=_u,this.b*=_u,this},lerp:function(_u,$u){return this.r+=(_u.r-this.r)*$u,this.g+=(_u.g-this.g)*$u,this.b+=(_u.b-this.b)*$u,this},lerpHSL:function(_u,$u){this.getHSL(_hslA),_u.getHSL(_hslB);var Ru=MathUtils.lerp(_hslA.h,_hslB.h,$u),Ou=MathUtils.lerp(_hslA.s,_hslB.s,$u),Fu=MathUtils.lerp(_hslA.l,_hslB.l,$u);return this.setHSL(Ru,Ou,Fu),this},equals:function(_u){return _u.r===this.r&&_u.g===this.g&&_u.b===this.b},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.r=_u[$u],this.g=_u[$u+1],this.b=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.r,_u[$u+1]=this.g,_u[$u+2]=this.b,_u},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(_u,$u,Ru,Ou,Fu,Nu){this.a=_u,this.b=$u,this.c=Ru,this.normal=Ou&&Ou.isVector3?Ou:new Vector3,this.vertexNormals=Array.isArray(Ou)?Ou:[],this.color=Fu&&Fu.isColor?Fu:new Color,this.vertexColors=Array.isArray(Fu)?Fu:[],this.materialIndex=Nu!==void 0?Nu:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.a=_u.a,this.b=_u.b,this.c=_u.c,this.normal.copy(_u.normal),this.color.copy(_u.color),this.materialIndex=_u.materialIndex;for(var $u=0,Ru=_u.vertexNormals.length;$u<Ru;$u++)this.vertexNormals[$u]=_u.vertexNormals[$u].clone();for(var $u=0,Ru=_u.vertexColors.length;$u<Ru;$u++)this.vertexColors[$u]=_u.vertexColors[$u].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(_u){if(_u!==void 0)for(var $u in _u){var Ru=_u[$u];if(Ru===void 0){console.warn("THREE.Material: '"+$u+"' parameter is undefined.");continue}if($u==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Ru===FlatShading;continue}var Ou=this[$u];if(Ou===void 0){console.warn("THREE."+this.type+": '"+$u+"' is not a property of this material.");continue}Ou&&Ou.isColor?Ou.set(Ru):Ou&&Ou.isVector3&&Ru&&Ru.isVector3?Ou.copy(Ru):this[$u]=Ru}},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";$u&&(_u={textures:{},images:{}});var Ru={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Ru.uuid=this.uuid,Ru.type=this.type,this.name!==""&&(Ru.name=this.name),this.color&&this.color.isColor&&(Ru.color=this.color.getHex()),this.roughness!==void 0&&(Ru.roughness=this.roughness),this.metalness!==void 0&&(Ru.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Ru.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Ru.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Ru.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Ru.specular=this.specular.getHex()),this.shininess!==void 0&&(Ru.shininess=this.shininess),this.clearcoat!==void 0&&(Ru.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Ru.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Ru.clearcoatMap=this.clearcoatMap.toJSON(_u).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Ru.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_u).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Ru.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_u).uuid,Ru.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Ru.map=this.map.toJSON(_u).uuid),this.matcap&&this.matcap.isTexture&&(Ru.matcap=this.matcap.toJSON(_u).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Ru.alphaMap=this.alphaMap.toJSON(_u).uuid),this.lightMap&&this.lightMap.isTexture&&(Ru.lightMap=this.lightMap.toJSON(_u).uuid),this.aoMap&&this.aoMap.isTexture&&(Ru.aoMap=this.aoMap.toJSON(_u).uuid,Ru.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Ru.bumpMap=this.bumpMap.toJSON(_u).uuid,Ru.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Ru.normalMap=this.normalMap.toJSON(_u).uuid,Ru.normalMapType=this.normalMapType,Ru.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Ru.displacementMap=this.displacementMap.toJSON(_u).uuid,Ru.displacementScale=this.displacementScale,Ru.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Ru.roughnessMap=this.roughnessMap.toJSON(_u).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Ru.metalnessMap=this.metalnessMap.toJSON(_u).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Ru.emissiveMap=this.emissiveMap.toJSON(_u).uuid),this.specularMap&&this.specularMap.isTexture&&(Ru.specularMap=this.specularMap.toJSON(_u).uuid),this.envMap&&this.envMap.isTexture&&(Ru.envMap=this.envMap.toJSON(_u).uuid,Ru.reflectivity=this.reflectivity,Ru.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Ru.combine=this.combine),this.envMapIntensity!==void 0&&(Ru.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Ru.gradientMap=this.gradientMap.toJSON(_u).uuid),this.size!==void 0&&(Ru.size=this.size),this.sizeAttenuation!==void 0&&(Ru.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Ru.blending=this.blending),this.flatShading===!0&&(Ru.flatShading=this.flatShading),this.side!==FrontSide&&(Ru.side=this.side),this.vertexColors&&(Ru.vertexColors=!0),this.opacity<1&&(Ru.opacity=this.opacity),this.transparent===!0&&(Ru.transparent=this.transparent),Ru.depthFunc=this.depthFunc,Ru.depthTest=this.depthTest,Ru.depthWrite=this.depthWrite,Ru.stencilWrite=this.stencilWrite,Ru.stencilWriteMask=this.stencilWriteMask,Ru.stencilFunc=this.stencilFunc,Ru.stencilRef=this.stencilRef,Ru.stencilFuncMask=this.stencilFuncMask,Ru.stencilFail=this.stencilFail,Ru.stencilZFail=this.stencilZFail,Ru.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Ru.rotation=this.rotation),this.polygonOffset===!0&&(Ru.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Ru.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Ru.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Ru.linewidth=this.linewidth),this.dashSize!==void 0&&(Ru.dashSize=this.dashSize),this.gapSize!==void 0&&(Ru.gapSize=this.gapSize),this.scale!==void 0&&(Ru.scale=this.scale),this.dithering===!0&&(Ru.dithering=!0),this.alphaTest>0&&(Ru.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Ru.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Ru.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Ru.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Ru.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Ru.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Ru.morphTargets=!0),this.morphNormals===!0&&(Ru.morphNormals=!0),this.skinning===!0&&(Ru.skinning=!0),this.visible===!1&&(Ru.visible=!1),this.toneMapped===!1&&(Ru.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Ru.userData=this.userData);function Ou(Vu){var Gu=[];for(var Uu in Vu){var Hu=Vu[Uu];delete Hu.metadata,Gu.push(Hu)}return Gu}if($u){var Fu=Ou(_u.textures),Nu=Ou(_u.images);Fu.length>0&&(Ru.textures=Fu),Nu.length>0&&(Ru.images=Nu)}return Ru},clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.name=_u.name,this.fog=_u.fog,this.blending=_u.blending,this.side=_u.side,this.flatShading=_u.flatShading,this.vertexColors=_u.vertexColors,this.opacity=_u.opacity,this.transparent=_u.transparent,this.blendSrc=_u.blendSrc,this.blendDst=_u.blendDst,this.blendEquation=_u.blendEquation,this.blendSrcAlpha=_u.blendSrcAlpha,this.blendDstAlpha=_u.blendDstAlpha,this.blendEquationAlpha=_u.blendEquationAlpha,this.depthFunc=_u.depthFunc,this.depthTest=_u.depthTest,this.depthWrite=_u.depthWrite,this.stencilWriteMask=_u.stencilWriteMask,this.stencilFunc=_u.stencilFunc,this.stencilRef=_u.stencilRef,this.stencilFuncMask=_u.stencilFuncMask,this.stencilFail=_u.stencilFail,this.stencilZFail=_u.stencilZFail,this.stencilZPass=_u.stencilZPass,this.stencilWrite=_u.stencilWrite;var $u=_u.clippingPlanes,Ru=null;if($u!==null){var Ou=$u.length;Ru=new Array(Ou);for(var Fu=0;Fu!==Ou;++Fu)Ru[Fu]=$u[Fu].clone()}return this.clippingPlanes=Ru,this.clipIntersection=_u.clipIntersection,this.clipShadows=_u.clipShadows,this.shadowSide=_u.shadowSide,this.colorWrite=_u.colorWrite,this.precision=_u.precision,this.polygonOffset=_u.polygonOffset,this.polygonOffsetFactor=_u.polygonOffsetFactor,this.polygonOffsetUnits=_u.polygonOffsetUnits,this.dithering=_u.dithering,this.alphaTest=_u.alphaTest,this.premultipliedAlpha=_u.premultipliedAlpha,this.visible=_u.visible,this.toneMapped=_u.toneMapped,this.userData=JSON.parse(JSON.stringify(_u.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function MeshBasicMaterial(_u){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(_u)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(_u,$u,Ru){if(Array.isArray(_u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=_u,this.itemSize=$u,this.count=_u!==void 0?_u.length/$u:0,this.normalized=Ru===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.name=_u.name,this.array=new _u.array.constructor(_u.array),this.itemSize=_u.itemSize,this.count=_u.count,this.normalized=_u.normalized,this.usage=_u.usage,this},copyAt:function(_u,$u,Ru){_u*=this.itemSize,Ru*=$u.itemSize;for(var Ou=0,Fu=this.itemSize;Ou<Fu;Ou++)this.array[_u+Ou]=$u.array[Ru+Ou];return this},copyArray:function(_u){return this.array.set(_u),this},copyColorsArray:function(_u){for(var $u=this.array,Ru=0,Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Nu===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ou),Nu=new Color),$u[Ru++]=Nu.r,$u[Ru++]=Nu.g,$u[Ru++]=Nu.b}return this},copyVector2sArray:function(_u){for(var $u=this.array,Ru=0,Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Nu===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ou),Nu=new Vector2),$u[Ru++]=Nu.x,$u[Ru++]=Nu.y}return this},copyVector3sArray:function(_u){for(var $u=this.array,Ru=0,Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Nu===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ou),Nu=new Vector3),$u[Ru++]=Nu.x,$u[Ru++]=Nu.y,$u[Ru++]=Nu.z}return this},copyVector4sArray:function(_u){for(var $u=this.array,Ru=0,Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Nu===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ou),Nu=new Vector4),$u[Ru++]=Nu.x,$u[Ru++]=Nu.y,$u[Ru++]=Nu.z,$u[Ru++]=Nu.w}return this},applyMatrix3:function(_u){for(var $u=0,Ru=this.count;$u<Ru;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix3(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(_u){for(var $u=0,Ru=this.count;$u<Ru;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix4(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(_u){for(var $u=0,Ru=this.count;$u<Ru;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyNormalMatrix(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(_u){for(var $u=0,Ru=this.count;$u<Ru;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.transformDirection(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},getX:function(_u){return this.array[_u*this.itemSize]},setX:function(_u,$u){return this.array[_u*this.itemSize]=$u,this},getY:function(_u){return this.array[_u*this.itemSize+1]},setY:function(_u,$u){return this.array[_u*this.itemSize+1]=$u,this},getZ:function(_u){return this.array[_u*this.itemSize+2]},setZ:function(_u,$u){return this.array[_u*this.itemSize+2]=$u,this},getW:function(_u){return this.array[_u*this.itemSize+3]},setW:function(_u,$u){return this.array[_u*this.itemSize+3]=$u,this},setXY:function(_u,$u,Ru){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Ru,this},setXYZ:function(_u,$u,Ru,Ou){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Ru,this.array[_u+2]=Ou,this},setXYZW:function(_u,$u,Ru,Ou,Fu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Ru,this.array[_u+2]=Ou,this.array[_u+3]=Fu,this},onUpload:function(_u){return this.onUploadCallback=_u,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Int8Array(_u),$u,Ru)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Uint8Array(_u),$u,Ru)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Uint8ClampedArray(_u),$u,Ru)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Int16Array(_u),$u,Ru)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Uint16Array(_u),$u,Ru)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Int32Array(_u),$u,Ru)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Uint32Array(_u),$u,Ru)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Float32Array(_u),$u,Ru)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(_u,$u,Ru){BufferAttribute.call(this,new Float64Array(_u),$u,Ru)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(_u){for(var $u,Ru=[],Ou=void 0,Fu=_u.faces,Nu=0;Nu<Fu.length;Nu++){var Vu=Fu[Nu];Vu.materialIndex!==Ou&&(Ou=Vu.materialIndex,$u!==void 0&&($u.count=Nu*3-$u.start,Ru.push($u)),$u={start:Nu*3,materialIndex:Ou})}$u!==void 0&&($u.count=Nu*3-$u.start,Ru.push($u)),this.groups=Ru},fromGeometry:function(_u){var $u=_u.faces,Ru=_u.vertices,Ou=_u.faceVertexUvs,Fu=Ou[0]&&Ou[0].length>0,Nu=Ou[1]&&Ou[1].length>0,Vu=_u.morphTargets,Gu=Vu.length,Uu;if(Gu>0){Uu=[];for(var Hu=0;Hu<Gu;Hu++)Uu[Hu]={name:Vu[Hu].name,data:[]};this.morphTargets.position=Uu}var Wu=_u.morphNormals,Qu=Wu.length,qu;if(Qu>0){qu=[];for(var Hu=0;Hu<Qu;Hu++)qu[Hu]={name:Wu[Hu].name,data:[]};this.morphTargets.normal=qu}var Ku=_u.skinIndices,Yu=_u.skinWeights,_c=Ku.length===Ru.length,Ju=Yu.length===Ru.length;Ru.length>0&&$u.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Hu=0;Hu<$u.length;Hu++){var Xu=$u[Hu];this.vertices.push(Ru[Xu.a],Ru[Xu.b],Ru[Xu.c]);var Zu=Xu.vertexNormals;if(Zu.length===3)this.normals.push(Zu[0],Zu[1],Zu[2]);else{var Xc=Xu.normal;this.normals.push(Xc,Xc,Xc)}var _h=Xu.vertexColors;if(_h.length===3)this.colors.push(_h[0],_h[1],_h[2]);else{var ep=Xu.color;this.colors.push(ep,ep,ep)}if(Fu===!0){var np=Ou[0][Hu];np!==void 0?this.uvs.push(np[0],np[1],np[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Hu),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Nu===!0){var np=Ou[1][Hu];np!==void 0?this.uvs2.push(np[0],np[1],np[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Hu),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var ap=0;ap<Gu;ap++){var lp=Vu[ap].vertices;Uu[ap].data.push(lp[Xu.a],lp[Xu.b],lp[Xu.c])}for(var ap=0;ap<Qu;ap++){var up=Wu[ap].vertexNormals[Hu];qu[ap].data.push(up.a,up.b,up.c)}_c&&this.skinIndices.push(Ku[Xu.a],Ku[Xu.b],Ku[Xu.c]),Ju&&this.skinWeights.push(Yu[Xu.a],Yu[Xu.b],Yu[Xu.c])}return this.computeGroups(_u),this.verticesNeedUpdate=_u.verticesNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this}});function arrayMax(_u){if(_u.length===0)return-1/0;let $u=_u[0];for(let Ru=1,Ou=_u.length;Ru<Ou;++Ru)_u[Ru]>$u&&($u=_u[Ru]);return $u}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(_u){Array.isArray(_u)?this.index=new(arrayMax(_u)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_u,1):this.index=_u},getAttribute:function(_u){return this.attributes[_u]},setAttribute:function(_u,$u){return this.attributes[_u]=$u,this},deleteAttribute:function(_u){return delete this.attributes[_u],this},addGroup:function(_u,$u,Ru){this.groups.push({start:_u,count:$u,materialIndex:Ru!==void 0?Ru:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(_u,$u){this.drawRange.start=_u,this.drawRange.count=$u},applyMatrix4:function(_u){var $u=this.attributes.position;$u!==void 0&&($u.applyMatrix4(_u),$u.needsUpdate=!0);var Ru=this.attributes.normal;if(Ru!==void 0){var Ou=new Matrix3().getNormalMatrix(_u);Ru.applyNormalMatrix(Ou),Ru.needsUpdate=!0}var Fu=this.attributes.tangent;return Fu!==void 0&&(Fu.transformDirection(_u),Fu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(_u){return _m1$2.makeRotationX(_u),this.applyMatrix4(_m1$2),this},rotateY:function(_u){return _m1$2.makeRotationY(_u),this.applyMatrix4(_m1$2),this},rotateZ:function(_u){return _m1$2.makeRotationZ(_u),this.applyMatrix4(_m1$2),this},translate:function(_u,$u,Ru){return _m1$2.makeTranslation(_u,$u,Ru),this.applyMatrix4(_m1$2),this},scale:function(_u,$u,Ru){return _m1$2.makeScale(_u,$u,Ru),this.applyMatrix4(_m1$2),this},lookAt:function(_u){return _obj.lookAt(_u),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(_u){var $u=_u.geometry;if(_u.isPoints||_u.isLine){var Ru=new Float32BufferAttribute($u.vertices.length*3,3),Ou=new Float32BufferAttribute($u.colors.length*3,3);if(this.setAttribute("position",Ru.copyVector3sArray($u.vertices)),this.setAttribute("color",Ou.copyColorsArray($u.colors)),$u.lineDistances&&$u.lineDistances.length===$u.vertices.length){var Fu=new Float32BufferAttribute($u.lineDistances.length,1);this.setAttribute("lineDistance",Fu.copyArray($u.lineDistances))}$u.boundingSphere!==null&&(this.boundingSphere=$u.boundingSphere.clone()),$u.boundingBox!==null&&(this.boundingBox=$u.boundingBox.clone())}else _u.isMesh&&$u&&$u.isGeometry&&this.fromGeometry($u);return this},setFromPoints:function(_u){for(var $u=[],Ru=0,Ou=_u.length;Ru<Ou;Ru++){var Fu=_u[Ru];$u.push(Fu.x,Fu.y,Fu.z||0)}return this.setAttribute("position",new Float32BufferAttribute($u,3)),this},updateFromObject:function(_u){var $u=_u.geometry;if(_u.isMesh){var Ru=$u.__directGeometry;if($u.elementsNeedUpdate===!0&&(Ru=void 0,$u.elementsNeedUpdate=!1),Ru===void 0)return this.fromGeometry($u);Ru.verticesNeedUpdate=$u.verticesNeedUpdate,Ru.normalsNeedUpdate=$u.normalsNeedUpdate,Ru.colorsNeedUpdate=$u.colorsNeedUpdate,Ru.uvsNeedUpdate=$u.uvsNeedUpdate,Ru.groupsNeedUpdate=$u.groupsNeedUpdate,$u.verticesNeedUpdate=!1,$u.normalsNeedUpdate=!1,$u.colorsNeedUpdate=!1,$u.uvsNeedUpdate=!1,$u.groupsNeedUpdate=!1,$u=Ru}var Ou;return $u.verticesNeedUpdate===!0&&(Ou=this.attributes.position,Ou!==void 0&&(Ou.copyVector3sArray($u.vertices),Ou.needsUpdate=!0),$u.verticesNeedUpdate=!1),$u.normalsNeedUpdate===!0&&(Ou=this.attributes.normal,Ou!==void 0&&(Ou.copyVector3sArray($u.normals),Ou.needsUpdate=!0),$u.normalsNeedUpdate=!1),$u.colorsNeedUpdate===!0&&(Ou=this.attributes.color,Ou!==void 0&&(Ou.copyColorsArray($u.colors),Ou.needsUpdate=!0),$u.colorsNeedUpdate=!1),$u.uvsNeedUpdate&&(Ou=this.attributes.uv,Ou!==void 0&&(Ou.copyVector2sArray($u.uvs),Ou.needsUpdate=!0),$u.uvsNeedUpdate=!1),$u.lineDistancesNeedUpdate&&(Ou=this.attributes.lineDistance,Ou!==void 0&&(Ou.copyArray($u.lineDistances),Ou.needsUpdate=!0),$u.lineDistancesNeedUpdate=!1),$u.groupsNeedUpdate&&($u.computeGroups(_u.geometry),this.groups=$u.groups,$u.groupsNeedUpdate=!1),this},fromGeometry:function(_u){return _u.__directGeometry=new DirectGeometry().fromGeometry(_u),this.fromDirectGeometry(_u.__directGeometry)},fromDirectGeometry:function(_u){var $u=new Float32Array(_u.vertices.length*3);if(this.setAttribute("position",new BufferAttribute($u,3).copyVector3sArray(_u.vertices)),_u.normals.length>0){var Ru=new Float32Array(_u.normals.length*3);this.setAttribute("normal",new BufferAttribute(Ru,3).copyVector3sArray(_u.normals))}if(_u.colors.length>0){var Ou=new Float32Array(_u.colors.length*3);this.setAttribute("color",new BufferAttribute(Ou,3).copyColorsArray(_u.colors))}if(_u.uvs.length>0){var Fu=new Float32Array(_u.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Fu,2).copyVector2sArray(_u.uvs))}if(_u.uvs2.length>0){var Nu=new Float32Array(_u.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Nu,2).copyVector2sArray(_u.uvs2))}this.groups=_u.groups;for(var Vu in _u.morphTargets){for(var Gu=[],Uu=_u.morphTargets[Vu],Hu=0,Wu=Uu.length;Hu<Wu;Hu++){var Qu=Uu[Hu],qu=new Float32BufferAttribute(Qu.data.length*3,3);qu.name=Qu.name,Gu.push(qu.copyVector3sArray(Qu.data))}this.morphAttributes[Vu]=Gu}if(_u.skinIndices.length>0){var Ku=new Float32BufferAttribute(_u.skinIndices.length*4,4);this.setAttribute("skinIndex",Ku.copyVector4sArray(_u.skinIndices))}if(_u.skinWeights.length>0){var Yu=new Float32BufferAttribute(_u.skinWeights.length*4,4);this.setAttribute("skinWeight",Yu.copyVector4sArray(_u.skinWeights))}return _u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u!==void 0){if(this.boundingBox.setFromBufferAttribute(_u),$u)for(var Ru=0,Ou=$u.length;Ru<Ou;Ru++){var Fu=$u[Ru];_box$2.setFromBufferAttribute(Fu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u){var Ru=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_u),$u)for(var Ou=0,Fu=$u.length;Ou<Fu;Ou++){var Nu=$u[Ou];_boxMorphTargets.setFromBufferAttribute(Nu),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Ru);for(var Vu=0,Ou=0,Fu=_u.count;Ou<Fu;Ou++)_vector$4.fromBufferAttribute(_u,Ou),Vu=Math.max(Vu,Ru.distanceToSquared(_vector$4));if($u)for(var Ou=0,Fu=$u.length;Ou<Fu;Ou++)for(var Nu=$u[Ou],Gu=this.morphTargetsRelative,Uu=0,Hu=Nu.count;Uu<Hu;Uu++)_vector$4.fromBufferAttribute(Nu,Uu),Gu&&(_offset.fromBufferAttribute(_u,Uu),_vector$4.add(_offset)),Vu=Math.max(Vu,Ru.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Vu),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var _u=this.index,$u=this.attributes;if($u.position){var Ru=$u.position.array;if($u.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Ru.length),3));else for(var Ou=$u.normal.array,Fu=0,Nu=Ou.length;Fu<Nu;Fu++)Ou[Fu]=0;var Vu=$u.normal.array,Gu,Uu,Hu,Wu=new Vector3,Qu=new Vector3,qu=new Vector3,Ku=new Vector3,Yu=new Vector3;if(_u)for(var _c=_u.array,Fu=0,Nu=_u.count;Fu<Nu;Fu+=3)Gu=_c[Fu+0]*3,Uu=_c[Fu+1]*3,Hu=_c[Fu+2]*3,Wu.fromArray(Ru,Gu),Qu.fromArray(Ru,Uu),qu.fromArray(Ru,Hu),Ku.subVectors(qu,Qu),Yu.subVectors(Wu,Qu),Ku.cross(Yu),Vu[Gu]+=Ku.x,Vu[Gu+1]+=Ku.y,Vu[Gu+2]+=Ku.z,Vu[Uu]+=Ku.x,Vu[Uu+1]+=Ku.y,Vu[Uu+2]+=Ku.z,Vu[Hu]+=Ku.x,Vu[Hu+1]+=Ku.y,Vu[Hu+2]+=Ku.z;else for(var Fu=0,Nu=Ru.length;Fu<Nu;Fu+=9)Wu.fromArray(Ru,Fu),Qu.fromArray(Ru,Fu+3),qu.fromArray(Ru,Fu+6),Ku.subVectors(qu,Qu),Yu.subVectors(Wu,Qu),Ku.cross(Yu),Vu[Fu]=Ku.x,Vu[Fu+1]=Ku.y,Vu[Fu+2]=Ku.z,Vu[Fu+3]=Ku.x,Vu[Fu+4]=Ku.y,Vu[Fu+5]=Ku.z,Vu[Fu+6]=Ku.x,Vu[Fu+7]=Ku.y,Vu[Fu+8]=Ku.z;this.normalizeNormals(),$u.normal.needsUpdate=!0}},merge:function(_u,$u){if(!(_u&&_u.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",_u);return}$u===void 0&&($u=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Ru=this.attributes;for(var Ou in Ru)if(_u.attributes[Ou]!==void 0)for(var Fu=Ru[Ou],Nu=Fu.array,Vu=_u.attributes[Ou],Gu=Vu.array,Uu=Vu.itemSize*$u,Hu=Math.min(Gu.length,Nu.length-Uu),Wu=0,Qu=Uu;Wu<Hu;Wu++,Qu++)Nu[Qu]=Gu[Wu];return this},normalizeNormals:function(){for(var _u=this.attributes.normal,$u=0,Ru=_u.count;$u<Ru;$u++)_vector$4.x=_u.getX($u),_vector$4.y=_u.getY($u),_vector$4.z=_u.getZ($u),_vector$4.normalize(),_u.setXYZ($u,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function _u(_c,Ju){for(var Xu=_c.array,Zu=_c.itemSize,Xc=_c.normalized,_h=new Xu.constructor(Ju.length*Zu),ep=0,np=0,ap=0,lp=Ju.length;ap<lp;ap++){ep=Ju[ap]*Zu;for(var up=0;up<Zu;up++)_h[np++]=Xu[ep++]}return new BufferAttribute(_h,Zu,Xc)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var $u=new BufferGeometry,Ru=this.index.array,Ou=this.attributes;for(var Fu in Ou){var Nu=Ou[Fu],Vu=_u(Nu,Ru);$u.setAttribute(Fu,Vu)}var Gu=this.morphAttributes;for(Fu in Gu){for(var Uu=[],Hu=Gu[Fu],Wu=0,Qu=Hu.length;Wu<Qu;Wu++){var Nu=Hu[Wu],Vu=_u(Nu,Ru);Uu.push(Vu)}$u.morphAttributes[Fu]=Uu}$u.morphTargetsRelative=this.morphTargetsRelative;for(var qu=this.groups,Wu=0,Ku=qu.length;Wu<Ku;Wu++){var Yu=qu[Wu];$u.addGroup(Yu.start,Yu.count,Yu.materialIndex)}return $u},toJSON:function(){var _u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),Object.keys(this.userData).length>0&&(_u.userData=this.userData),this.parameters!==void 0){var $u=this.parameters;for(var Ru in $u)$u[Ru]!==void 0&&(_u[Ru]=$u[Ru]);return _u}_u.data={attributes:{}};var Ou=this.index;Ou!==null&&(_u.data.index={type:Ou.array.constructor.name,array:Array.prototype.slice.call(Ou.array)});var Fu=this.attributes;for(var Ru in Fu){var Nu=Fu[Ru],Vu=Nu.toJSON();Nu.name!==""&&(Vu.name=Nu.name),_u.data.attributes[Ru]=Vu}var Gu={},Uu=!1;for(var Ru in this.morphAttributes){for(var Hu=this.morphAttributes[Ru],Wu=[],Qu=0,qu=Hu.length;Qu<qu;Qu++){var Nu=Hu[Qu],Vu=Nu.toJSON();Nu.name!==""&&(Vu.name=Nu.name),Wu.push(Vu)}Wu.length>0&&(Gu[Ru]=Wu,Uu=!0)}Uu&&(_u.data.morphAttributes=Gu,_u.data.morphTargetsRelative=this.morphTargetsRelative);var Ku=this.groups;Ku.length>0&&(_u.data.groups=JSON.parse(JSON.stringify(Ku)));var Yu=this.boundingSphere;return Yu!==null&&(_u.data.boundingSphere={center:Yu.center.toArray(),radius:Yu.radius}),_u},clone:function(){return new BufferGeometry().copy(this)},copy:function(_u){var $u,Ru,Ou;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Fu=_u.index;Fu!==null&&this.setIndex(Fu.clone());var Nu=_u.attributes;for($u in Nu){var Vu=Nu[$u];this.setAttribute($u,Vu.clone())}var Gu=_u.morphAttributes;for($u in Gu){var Uu=[],Hu=Gu[$u];for(Ru=0,Ou=Hu.length;Ru<Ou;Ru++)Uu.push(Hu[Ru].clone());this.morphAttributes[$u]=Uu}this.morphTargetsRelative=_u.morphTargetsRelative;var Wu=_u.groups;for(Ru=0,Ou=Wu.length;Ru<Ou;Ru++){var Qu=Wu[Ru];this.addGroup(Qu.start,Qu.count,Qu.materialIndex)}var qu=_u.boundingBox;qu!==null&&(this.boundingBox=qu.clone());var Ku=_u.boundingSphere;return Ku!==null&&(this.boundingSphere=Ku.clone()),this.drawRange.start=_u.drawRange.start,this.drawRange.count=_u.drawRange.count,this.userData=_u.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(_u,$u){Object3D.call(this),this.type="Mesh",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_u.morphTargetInfluences.slice()),_u.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_u.morphTargetDictionary)),this},updateMorphTargets:function(){var _u=this.geometry,$u,Ru,Ou;if(_u.isBufferGeometry){var Fu=_u.morphAttributes,Nu=Object.keys(Fu);if(Nu.length>0){var Vu=Fu[Nu[0]];if(Vu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Ru=Vu.length;$u<Ru;$u++)Ou=Vu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ou]=$u}}else{var Gu=_u.morphTargets;Gu!==void 0&&Gu.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(_u,$u){var Ru=this.geometry,Ou=this.material,Fu=this.matrixWorld;if(Ou!==void 0&&(Ru.boundingSphere===null&&Ru.computeBoundingSphere(),_sphere.copy(Ru.boundingSphere),_sphere.applyMatrix4(Fu),_u.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Fu),_ray.copy(_u.ray).applyMatrix4(_inverseMatrix),!(Ru.boundingBox!==null&&_ray.intersectsBox(Ru.boundingBox)===!1)))){var Nu;if(Ru.isBufferGeometry){var Vu,Gu,Uu,Hu=Ru.index,Wu=Ru.attributes.position,Qu=Ru.morphAttributes.position,qu=Ru.morphTargetsRelative,Ku=Ru.attributes.uv,Yu=Ru.attributes.uv2,_c=Ru.groups,Ju=Ru.drawRange,Xu,Zu,Xc,_h,ep,np,ap,lp;if(Hu!==null)if(Array.isArray(Ou))for(Xu=0,Xc=_c.length;Xu<Xc;Xu++)for(ep=_c[Xu],np=Ou[ep.materialIndex],ap=Math.max(ep.start,Ju.start),lp=Math.min(ep.start+ep.count,Ju.start+Ju.count),Zu=ap,_h=lp;Zu<_h;Zu+=3)Vu=Hu.getX(Zu),Gu=Hu.getX(Zu+1),Uu=Hu.getX(Zu+2),Nu=checkBufferGeometryIntersection(this,np,_u,_ray,Wu,Qu,qu,Ku,Yu,Vu,Gu,Uu),Nu&&(Nu.faceIndex=Math.floor(Zu/3),Nu.face.materialIndex=ep.materialIndex,$u.push(Nu));else for(ap=Math.max(0,Ju.start),lp=Math.min(Hu.count,Ju.start+Ju.count),Xu=ap,Xc=lp;Xu<Xc;Xu+=3)Vu=Hu.getX(Xu),Gu=Hu.getX(Xu+1),Uu=Hu.getX(Xu+2),Nu=checkBufferGeometryIntersection(this,Ou,_u,_ray,Wu,Qu,qu,Ku,Yu,Vu,Gu,Uu),Nu&&(Nu.faceIndex=Math.floor(Xu/3),$u.push(Nu));else if(Wu!==void 0)if(Array.isArray(Ou))for(Xu=0,Xc=_c.length;Xu<Xc;Xu++)for(ep=_c[Xu],np=Ou[ep.materialIndex],ap=Math.max(ep.start,Ju.start),lp=Math.min(ep.start+ep.count,Ju.start+Ju.count),Zu=ap,_h=lp;Zu<_h;Zu+=3)Vu=Zu,Gu=Zu+1,Uu=Zu+2,Nu=checkBufferGeometryIntersection(this,np,_u,_ray,Wu,Qu,qu,Ku,Yu,Vu,Gu,Uu),Nu&&(Nu.faceIndex=Math.floor(Zu/3),Nu.face.materialIndex=ep.materialIndex,$u.push(Nu));else for(ap=Math.max(0,Ju.start),lp=Math.min(Wu.count,Ju.start+Ju.count),Xu=ap,Xc=lp;Xu<Xc;Xu+=3)Vu=Xu,Gu=Xu+1,Uu=Xu+2,Nu=checkBufferGeometryIntersection(this,Ou,_u,_ray,Wu,Qu,qu,Ku,Yu,Vu,Gu,Uu),Nu&&(Nu.faceIndex=Math.floor(Xu/3),$u.push(Nu))}else if(Ru.isGeometry){var up,_f,tp,ip=Array.isArray(Ou),rp=Ru.vertices,op=Ru.faces,sp,cp=Ru.faceVertexUvs[0];cp.length>0&&(sp=cp);for(var hp=0,dp=op.length;hp<dp;hp++){var xp=op[hp],bp=ip?Ou[xp.materialIndex]:Ou;if(bp!==void 0&&(up=rp[xp.a],_f=rp[xp.b],tp=rp[xp.c],Nu=checkIntersection(this,bp,_u,_ray,up,_f,tp,_intersectionPoint),Nu)){if(sp&&sp[hp]){var Rp=sp[hp];_uvA.copy(Rp[0]),_uvB.copy(Rp[1]),_uvC.copy(Rp[2]),Nu.uv=Triangle.getUV(_intersectionPoint,up,_f,tp,_uvA,_uvB,_uvC,new Vector2)}Nu.face=xp,Nu.faceIndex=hp,$u.push(Nu)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){var Uu;if($u.side===BackSide?Uu=Ou.intersectTriangle(Vu,Nu,Fu,!0,Gu):Uu=Ou.intersectTriangle(Fu,Nu,Vu,$u.side!==DoubleSide,Gu),Uu===null)return null;_intersectionPointWorld.copy(Gu),_intersectionPointWorld.applyMatrix4(_u.matrixWorld);var Hu=Ru.ray.origin.distanceTo(_intersectionPointWorld);return Hu<Ru.near||Hu>Ru.far?null:{distance:Hu,point:_intersectionPointWorld.clone(),object:_u}}function checkBufferGeometryIntersection(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu){_vA.fromBufferAttribute(Fu,Hu),_vB.fromBufferAttribute(Fu,Wu),_vC.fromBufferAttribute(Fu,Qu);var qu=_u.morphTargetInfluences;if($u.morphTargets&&Nu&&qu){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Ku=0,Yu=Nu.length;Ku<Yu;Ku++){var _c=qu[Ku],Ju=Nu[Ku];_c!==0&&(_tempA.fromBufferAttribute(Ju,Hu),_tempB.fromBufferAttribute(Ju,Wu),_tempC.fromBufferAttribute(Ju,Qu),Vu?(_morphA.addScaledVector(_tempA,_c),_morphB.addScaledVector(_tempB,_c),_morphC.addScaledVector(_tempC,_c)):(_morphA.addScaledVector(_tempA.sub(_vA),_c),_morphB.addScaledVector(_tempB.sub(_vB),_c),_morphC.addScaledVector(_tempC.sub(_vC),_c)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}_u.isSkinnedMesh&&(_u.boneTransform(Hu,_vA),_u.boneTransform(Wu,_vB),_u.boneTransform(Qu,_vC));var Xu=checkIntersection(_u,$u,Ru,Ou,_vA,_vB,_vC,_intersectionPoint);if(Xu){Gu&&(_uvA.fromBufferAttribute(Gu,Hu),_uvB.fromBufferAttribute(Gu,Wu),_uvC.fromBufferAttribute(Gu,Qu),Xu.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Uu&&(_uvA.fromBufferAttribute(Uu,Hu),_uvB.fromBufferAttribute(Uu,Wu),_uvC.fromBufferAttribute(Uu,Qu),Xu.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var Zu=new Face3(Hu,Wu,Qu);Triangle.getNormal(_vA,_vB,_vC,Zu.normal),Xu.face=Zu}return Xu}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(_u){for(var $u=new Matrix3().getNormalMatrix(_u),Ru=0,Ou=this.vertices.length;Ru<Ou;Ru++){var Fu=this.vertices[Ru];Fu.applyMatrix4(_u)}for(var Ru=0,Ou=this.faces.length;Ru<Ou;Ru++){var Nu=this.faces[Ru];Nu.normal.applyMatrix3($u).normalize();for(var Vu=0,Gu=Nu.vertexNormals.length;Vu<Gu;Vu++)Nu.vertexNormals[Vu].applyMatrix3($u).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(_u){return _m1$3.makeRotationX(_u),this.applyMatrix4(_m1$3),this},rotateY:function(_u){return _m1$3.makeRotationY(_u),this.applyMatrix4(_m1$3),this},rotateZ:function(_u){return _m1$3.makeRotationZ(_u),this.applyMatrix4(_m1$3),this},translate:function(_u,$u,Ru){return _m1$3.makeTranslation(_u,$u,Ru),this.applyMatrix4(_m1$3),this},scale:function(_u,$u,Ru){return _m1$3.makeScale(_u,$u,Ru),this.applyMatrix4(_m1$3),this},lookAt:function(_u){return _obj$1.lookAt(_u),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(_u){var $u=this,Ru=_u.index!==null?_u.index.array:void 0,Ou=_u.attributes;if(Ou.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Fu=Ou.position.array,Nu=Ou.normal!==void 0?Ou.normal.array:void 0,Vu=Ou.color!==void 0?Ou.color.array:void 0,Gu=Ou.uv!==void 0?Ou.uv.array:void 0,Uu=Ou.uv2!==void 0?Ou.uv2.array:void 0;Uu!==void 0&&(this.faceVertexUvs[1]=[]);for(var Hu=0;Hu<Fu.length;Hu+=3)$u.vertices.push(new Vector3().fromArray(Fu,Hu)),Vu!==void 0&&$u.colors.push(new Color().fromArray(Vu,Hu));function Wu(Xu,Zu,Xc,_h){var ep=Vu===void 0?[]:[$u.colors[Xu].clone(),$u.colors[Zu].clone(),$u.colors[Xc].clone()],np=Nu===void 0?[]:[new Vector3().fromArray(Nu,Xu*3),new Vector3().fromArray(Nu,Zu*3),new Vector3().fromArray(Nu,Xc*3)],ap=new Face3(Xu,Zu,Xc,np,ep,_h);$u.faces.push(ap),Gu!==void 0&&$u.faceVertexUvs[0].push([new Vector2().fromArray(Gu,Xu*2),new Vector2().fromArray(Gu,Zu*2),new Vector2().fromArray(Gu,Xc*2)]),Uu!==void 0&&$u.faceVertexUvs[1].push([new Vector2().fromArray(Uu,Xu*2),new Vector2().fromArray(Uu,Zu*2),new Vector2().fromArray(Uu,Xc*2)])}var Qu=_u.groups;if(Qu.length>0)for(var Hu=0;Hu<Qu.length;Hu++)for(var qu=Qu[Hu],Ku=qu.start,Yu=qu.count,_c=Ku,Ju=Ku+Yu;_c<Ju;_c+=3)Ru!==void 0?Wu(Ru[_c],Ru[_c+1],Ru[_c+2],qu.materialIndex):Wu(_c,_c+1,_c+2,qu.materialIndex);else if(Ru!==void 0)for(var Hu=0;Hu<Ru.length;Hu+=3)Wu(Ru[Hu],Ru[Hu+1],Ru[Hu+2]);else for(var Hu=0;Hu<Fu.length/3;Hu+=3)Wu(Hu,Hu+1,Hu+2);return this.computeFaceNormals(),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var _u=this.boundingSphere.center,$u=this.boundingSphere.radius,Ru=$u===0?1:1/$u,Ou=new Matrix4;return Ou.set(Ru,0,0,-Ru*_u.x,0,Ru,0,-Ru*_u.y,0,0,Ru,-Ru*_u.z,0,0,0,1),this.applyMatrix4(Ou),this},computeFaceNormals:function(){for(var _u=new Vector3,$u=new Vector3,Ru=0,Ou=this.faces.length;Ru<Ou;Ru++){var Fu=this.faces[Ru],Nu=this.vertices[Fu.a],Vu=this.vertices[Fu.b],Gu=this.vertices[Fu.c];_u.subVectors(Gu,Vu),$u.subVectors(Nu,Vu),_u.cross($u),_u.normalize(),Fu.normal.copy(_u)}},computeVertexNormals:function(_u){_u===void 0&&(_u=!0);var $u,Ru,Ou,Fu,Nu,Vu;for(Vu=new Array(this.vertices.length),$u=0,Ru=this.vertices.length;$u<Ru;$u++)Vu[$u]=new Vector3;if(_u){var Gu,Uu,Hu,Wu=new Vector3,Qu=new Vector3;for(Ou=0,Fu=this.faces.length;Ou<Fu;Ou++)Nu=this.faces[Ou],Gu=this.vertices[Nu.a],Uu=this.vertices[Nu.b],Hu=this.vertices[Nu.c],Wu.subVectors(Hu,Uu),Qu.subVectors(Gu,Uu),Wu.cross(Qu),Vu[Nu.a].add(Wu),Vu[Nu.b].add(Wu),Vu[Nu.c].add(Wu)}else for(this.computeFaceNormals(),Ou=0,Fu=this.faces.length;Ou<Fu;Ou++)Nu=this.faces[Ou],Vu[Nu.a].add(Nu.normal),Vu[Nu.b].add(Nu.normal),Vu[Nu.c].add(Nu.normal);for($u=0,Ru=this.vertices.length;$u<Ru;$u++)Vu[$u].normalize();for(Ou=0,Fu=this.faces.length;Ou<Fu;Ou++){Nu=this.faces[Ou];var qu=Nu.vertexNormals;qu.length===3?(qu[0].copy(Vu[Nu.a]),qu[1].copy(Vu[Nu.b]),qu[2].copy(Vu[Nu.c])):(qu[0]=Vu[Nu.a].clone(),qu[1]=Vu[Nu.b].clone(),qu[2]=Vu[Nu.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var _u,$u,Ru;for(this.computeFaceNormals(),_u=0,$u=this.faces.length;_u<$u;_u++){Ru=this.faces[_u];var Ou=Ru.vertexNormals;Ou.length===3?(Ou[0].copy(Ru.normal),Ou[1].copy(Ru.normal),Ou[2].copy(Ru.normal)):(Ou[0]=Ru.normal.clone(),Ou[1]=Ru.normal.clone(),Ou[2]=Ru.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var _u,$u,Ru,Ou,Fu;for(Ru=0,Ou=this.faces.length;Ru<Ou;Ru++)for(Fu=this.faces[Ru],Fu.__originalFaceNormal?Fu.__originalFaceNormal.copy(Fu.normal):Fu.__originalFaceNormal=Fu.normal.clone(),Fu.__originalVertexNormals||(Fu.__originalVertexNormals=[]),_u=0,$u=Fu.vertexNormals.length;_u<$u;_u++)Fu.__originalVertexNormals[_u]?Fu.__originalVertexNormals[_u].copy(Fu.vertexNormals[_u]):Fu.__originalVertexNormals[_u]=Fu.vertexNormals[_u].clone();var Nu=new Geometry;for(Nu.faces=this.faces,_u=0,$u=this.morphTargets.length;_u<$u;_u++){if(!this.morphNormals[_u]){this.morphNormals[_u]={},this.morphNormals[_u].faceNormals=[],this.morphNormals[_u].vertexNormals=[];var Vu=this.morphNormals[_u].faceNormals,Gu=this.morphNormals[_u].vertexNormals,Hu,Wu;for(Ru=0,Ou=this.faces.length;Ru<Ou;Ru++)Hu=new Vector3,Wu={a:new Vector3,b:new Vector3,c:new Vector3},Vu.push(Hu),Gu.push(Wu)}var Uu=this.morphNormals[_u];Nu.vertices=this.morphTargets[_u].vertices,Nu.computeFaceNormals(),Nu.computeVertexNormals();var Hu,Wu;for(Ru=0,Ou=this.faces.length;Ru<Ou;Ru++)Fu=this.faces[Ru],Hu=Uu.faceNormals[Ru],Wu=Uu.vertexNormals[Ru],Hu.copy(Fu.normal),Wu.a.copy(Fu.vertexNormals[0]),Wu.b.copy(Fu.vertexNormals[1]),Wu.c.copy(Fu.vertexNormals[2])}for(Ru=0,Ou=this.faces.length;Ru<Ou;Ru++)Fu=this.faces[Ru],Fu.normal=Fu.__originalFaceNormal,Fu.vertexNormals=Fu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(_u,$u,Ru){if(!(_u&&_u.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",_u);return}var Ou,Fu=this.vertices.length,Nu=this.vertices,Vu=_u.vertices,Gu=this.faces,Uu=_u.faces,Hu=this.colors,Wu=_u.colors;Ru===void 0&&(Ru=0),$u!==void 0&&(Ou=new Matrix3().getNormalMatrix($u));for(var Qu=0,qu=Vu.length;Qu<qu;Qu++){var Ku=Vu[Qu],Yu=Ku.clone();$u!==void 0&&Yu.applyMatrix4($u),Nu.push(Yu)}for(var Qu=0,qu=Wu.length;Qu<qu;Qu++)Hu.push(Wu[Qu].clone());for(Qu=0,qu=Uu.length;Qu<qu;Qu++){var _c=Uu[Qu],Ju,Xu,Zu,Xc=_c.vertexNormals,_h=_c.vertexColors;Ju=new Face3(_c.a+Fu,_c.b+Fu,_c.c+Fu),Ju.normal.copy(_c.normal),Ou!==void 0&&Ju.normal.applyMatrix3(Ou).normalize();for(var ep=0,np=Xc.length;ep<np;ep++)Xu=Xc[ep].clone(),Ou!==void 0&&Xu.applyMatrix3(Ou).normalize(),Ju.vertexNormals.push(Xu);Ju.color.copy(_c.color);for(var ep=0,np=_h.length;ep<np;ep++)Zu=_h[ep],Ju.vertexColors.push(Zu.clone());Ju.materialIndex=_c.materialIndex+Ru,Gu.push(Ju)}for(var Qu=0,qu=_u.faceVertexUvs.length;Qu<qu;Qu++){var ap=_u.faceVertexUvs[Qu];this.faceVertexUvs[Qu]===void 0&&(this.faceVertexUvs[Qu]=[]);for(var ep=0,np=ap.length;ep<np;ep++){for(var lp=ap[ep],up=[],_f=0,tp=lp.length;_f<tp;_f++)up.push(lp[_f].clone());this.faceVertexUvs[Qu].push(up)}}},mergeMesh:function(_u){if(!(_u&&_u.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",_u);return}_u.matrixAutoUpdate&&_u.updateMatrix(),this.merge(_u.geometry,_u.matrix)},mergeVertices:function(){var _u={},$u=[],Ru=[],Ou,Fu,Nu=4,Vu=Math.pow(10,Nu),Gu,Uu,Hu,Wu,Qu,qu;for(Gu=0,Uu=this.vertices.length;Gu<Uu;Gu++)Ou=this.vertices[Gu],Fu=Math.round(Ou.x*Vu)+"_"+Math.round(Ou.y*Vu)+"_"+Math.round(Ou.z*Vu),_u[Fu]===void 0?(_u[Fu]=Gu,$u.push(this.vertices[Gu]),Ru[Gu]=$u.length-1):Ru[Gu]=Ru[_u[Fu]];var Ku=[];for(Gu=0,Uu=this.faces.length;Gu<Uu;Gu++){Hu=this.faces[Gu],Hu.a=Ru[Hu.a],Hu.b=Ru[Hu.b],Hu.c=Ru[Hu.c],Wu=[Hu.a,Hu.b,Hu.c];for(var Yu=0;Yu<3;Yu++)if(Wu[Yu]===Wu[(Yu+1)%3]){Ku.push(Gu);break}}for(Gu=Ku.length-1;Gu>=0;Gu--){var _c=Ku[Gu];for(this.faces.splice(_c,1),Qu=0,qu=this.faceVertexUvs.length;Qu<qu;Qu++)this.faceVertexUvs[Qu].splice(_c,1)}var Ju=this.vertices.length-$u.length;return this.vertices=$u,Ju},setFromPoints:function(_u){this.vertices=[];for(var $u=0,Ru=_u.length;$u<Ru;$u++){var Ou=_u[$u];this.vertices.push(new Vector3(Ou.x,Ou.y,Ou.z||0))}return this},sortFacesByMaterialIndex:function(){for(var _u=this.faces,$u=_u.length,Ru=0;Ru<$u;Ru++)_u[Ru]._id=Ru;function Ou(Hu,Wu){return Hu.materialIndex-Wu.materialIndex}_u.sort(Ou);var Fu=this.faceVertexUvs[0],Nu=this.faceVertexUvs[1],Vu,Gu;Fu&&Fu.length===$u&&(Vu=[]),Nu&&Nu.length===$u&&(Gu=[]);for(var Ru=0;Ru<$u;Ru++){var Uu=_u[Ru]._id;Vu&&Vu.push(Fu[Uu]),Gu&&Gu.push(Nu[Uu])}Vu&&(this.faceVertexUvs[0]=Vu),Gu&&(this.faceVertexUvs[1]=Gu)},toJSON:function(){var _u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),this.parameters!==void 0){var $u=this.parameters;for(var Ru in $u)$u[Ru]!==void 0&&(_u[Ru]=$u[Ru]);return _u}for(var Ou=[],Fu=0;Fu<this.vertices.length;Fu++){var Nu=this.vertices[Fu];Ou.push(Nu.x,Nu.y,Nu.z)}for(var Vu=[],Gu=[],Uu={},Hu=[],Wu={},Qu=[],qu={},Fu=0;Fu<this.faces.length;Fu++){var Ku=this.faces[Fu],Yu=!0,_c=!1,Ju=this.faceVertexUvs[0][Fu]!==void 0,Xu=Ku.normal.length()>0,Zu=Ku.vertexNormals.length>0,Xc=Ku.color.r!==1||Ku.color.g!==1||Ku.color.b!==1,_h=Ku.vertexColors.length>0,ep=0;if(ep=up(ep,0,0),ep=up(ep,1,Yu),ep=up(ep,2,_c),ep=up(ep,3,Ju),ep=up(ep,4,Xu),ep=up(ep,5,Zu),ep=up(ep,6,Xc),ep=up(ep,7,_h),Vu.push(ep),Vu.push(Ku.a,Ku.b,Ku.c),Vu.push(Ku.materialIndex),Ju){var np=this.faceVertexUvs[0][Fu];Vu.push(ip(np[0]),ip(np[1]),ip(np[2]))}if(Xu&&Vu.push(_f(Ku.normal)),Zu){var ap=Ku.vertexNormals;Vu.push(_f(ap[0]),_f(ap[1]),_f(ap[2]))}if(Xc&&Vu.push(tp(Ku.color)),_h){var lp=Ku.vertexColors;Vu.push(tp(lp[0]),tp(lp[1]),tp(lp[2]))}}function up(rp,op,sp){return sp?rp|1<<op:rp&~(1<<op)}function _f(rp){var op=rp.x.toString()+rp.y.toString()+rp.z.toString();return Uu[op]!==void 0||(Uu[op]=Gu.length/3,Gu.push(rp.x,rp.y,rp.z)),Uu[op]}function tp(rp){var op=rp.r.toString()+rp.g.toString()+rp.b.toString();return Wu[op]!==void 0||(Wu[op]=Hu.length,Hu.push(rp.getHex())),Wu[op]}function ip(rp){var op=rp.x.toString()+rp.y.toString();return qu[op]!==void 0||(qu[op]=Qu.length/2,Qu.push(rp.x,rp.y)),qu[op]}return _u.data={},_u.data.vertices=Ou,_u.data.normals=Gu,Hu.length>0&&(_u.data.colors=Hu),Qu.length>0&&(_u.data.uvs=[Qu]),_u.data.faces=Vu,_u},clone:function(){return new Geometry().copy(this)},copy:function(_u){var $u,Ru,Ou,Fu,Nu,Vu;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Gu=_u.vertices;for($u=0,Ru=Gu.length;$u<Ru;$u++)this.vertices.push(Gu[$u].clone());var Uu=_u.colors;for($u=0,Ru=Uu.length;$u<Ru;$u++)this.colors.push(Uu[$u].clone());var Hu=_u.faces;for($u=0,Ru=Hu.length;$u<Ru;$u++)this.faces.push(Hu[$u].clone());for($u=0,Ru=_u.faceVertexUvs.length;$u<Ru;$u++){var Wu=_u.faceVertexUvs[$u];for(this.faceVertexUvs[$u]===void 0&&(this.faceVertexUvs[$u]=[]),Ou=0,Fu=Wu.length;Ou<Fu;Ou++){var Qu=Wu[Ou],qu=[];for(Nu=0,Vu=Qu.length;Nu<Vu;Nu++){var Ku=Qu[Nu];qu.push(Ku.clone())}this.faceVertexUvs[$u].push(qu)}}var Yu=_u.morphTargets;for($u=0,Ru=Yu.length;$u<Ru;$u++){var _c={};if(_c.name=Yu[$u].name,Yu[$u].vertices!==void 0)for(_c.vertices=[],Ou=0,Fu=Yu[$u].vertices.length;Ou<Fu;Ou++)_c.vertices.push(Yu[$u].vertices[Ou].clone());if(Yu[$u].normals!==void 0)for(_c.normals=[],Ou=0,Fu=Yu[$u].normals.length;Ou<Fu;Ou++)_c.normals.push(Yu[$u].normals[Ou].clone());this.morphTargets.push(_c)}var Ju=_u.morphNormals;for($u=0,Ru=Ju.length;$u<Ru;$u++){var Xu={};if(Ju[$u].vertexNormals!==void 0)for(Xu.vertexNormals=[],Ou=0,Fu=Ju[$u].vertexNormals.length;Ou<Fu;Ou++){var Zu=Ju[$u].vertexNormals[Ou],Xc={};Xc.a=Zu.a.clone(),Xc.b=Zu.b.clone(),Xc.c=Zu.c.clone(),Xu.vertexNormals.push(Xc)}if(Ju[$u].faceNormals!==void 0)for(Xu.faceNormals=[],Ou=0,Fu=Ju[$u].faceNormals.length;Ou<Fu;Ou++)Xu.faceNormals.push(Ju[$u].faceNormals[Ou].clone());this.morphNormals.push(Xu)}var _h=_u.skinWeights;for($u=0,Ru=_h.length;$u<Ru;$u++)this.skinWeights.push(_h[$u].clone());var ep=_u.skinIndices;for($u=0,Ru=ep.length;$u<Ru;$u++)this.skinIndices.push(ep[$u].clone());var np=_u.lineDistances;for($u=0,Ru=np.length;$u<Ru;$u++)this.lineDistances.push(np[$u]);var ap=_u.boundingBox;ap!==null&&(this.boundingBox=ap.clone());var lp=_u.boundingSphere;return lp!==null&&(this.boundingSphere=lp.clone()),this.elementsNeedUpdate=_u.elementsNeedUpdate,this.verticesNeedUpdate=_u.verticesNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.lineDistancesNeedUpdate=_u.lineDistancesNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor($u,Ru,Ou,Fu,Nu,Vu){super(),this.type="BoxGeometry",this.parameters={width:$u,height:Ru,depth:Ou,widthSegments:Fu,heightSegments:Nu,depthSegments:Vu},this.fromBufferGeometry(new BoxBufferGeometry($u,Ru,Ou,Fu,Nu,Vu)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor($u,Ru,Ou,Fu,Nu,Vu){super(),this.type="BoxBufferGeometry",this.parameters={width:$u,height:Ru,depth:Ou,widthSegments:Fu,heightSegments:Nu,depthSegments:Vu};const Gu=this;$u=$u||1,Ru=Ru||1,Ou=Ou||1,Fu=Math.floor(Fu)||1,Nu=Math.floor(Nu)||1,Vu=Math.floor(Vu)||1;const Uu=[],Hu=[],Wu=[],Qu=[];let qu=0,Ku=0;Yu("z","y","x",-1,-1,Ou,Ru,$u,Vu,Nu,0),Yu("z","y","x",1,-1,Ou,Ru,-$u,Vu,Nu,1),Yu("x","z","y",1,1,$u,Ou,Ru,Fu,Vu,2),Yu("x","z","y",1,-1,$u,Ou,-Ru,Fu,Vu,3),Yu("x","y","z",1,-1,$u,Ru,Ou,Fu,Nu,4),Yu("x","y","z",-1,-1,$u,Ru,-Ou,Fu,Nu,5),this.setIndex(Uu),this.setAttribute("position",new Float32BufferAttribute(Hu,3)),this.setAttribute("normal",new Float32BufferAttribute(Wu,3)),this.setAttribute("uv",new Float32BufferAttribute(Qu,2));function Yu(_c,Ju,Xu,Zu,Xc,_h,ep,np,ap,lp,up){const _f=_h/ap,tp=ep/lp,ip=_h/2,rp=ep/2,op=np/2,sp=ap+1,cp=lp+1;let hp=0,dp=0;const xp=new Vector3;for(let bp=0;bp<cp;bp++){const Rp=bp*tp-rp;for(let Tp=0;Tp<sp;Tp++){const Up=Tp*_f-ip;xp[_c]=Up*Zu,xp[Ju]=Rp*Xc,xp[Xu]=op,Hu.push(xp.x,xp.y,xp.z),xp[_c]=0,xp[Ju]=0,xp[Xu]=np>0?1:-1,Wu.push(xp.x,xp.y,xp.z),Qu.push(Tp/ap),Qu.push(1-bp/lp),hp+=1}}for(let bp=0;bp<lp;bp++)for(let Rp=0;Rp<ap;Rp++){const Tp=qu+Rp+sp*bp,Up=qu+Rp+sp*(bp+1),Ip=qu+(Rp+1)+sp*(bp+1),Vp=qu+(Rp+1)+sp*bp;Uu.push(Tp,Up,Vp),Uu.push(Up,Ip,Vp),dp+=6}Gu.addGroup(Ku,dp,up),Ku+=dp,qu+=hp}}}function cloneUniforms(_u){var $u={};for(var Ru in _u){$u[Ru]={};for(var Ou in _u[Ru]){var Fu=_u[Ru][Ou];Fu&&(Fu.isColor||Fu.isMatrix3||Fu.isMatrix4||Fu.isVector2||Fu.isVector3||Fu.isVector4||Fu.isTexture)?$u[Ru][Ou]=Fu.clone():Array.isArray(Fu)?$u[Ru][Ou]=Fu.slice():$u[Ru][Ou]=Fu}}return $u}function mergeUniforms(_u){for(var $u={},Ru=0;Ru<_u.length;Ru++){var Ou=cloneUniforms(_u[Ru]);for(var Fu in Ou)$u[Fu]=Ou[Fu]}return $u}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(_u){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,_u!==void 0&&(_u.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(_u))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.fragmentShader=_u.fragmentShader,this.vertexShader=_u.vertexShader,this.uniforms=cloneUniforms(_u.uniforms),this.defines=Object.assign({},_u.defines),this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.lights=_u.lights,this.clipping=_u.clipping,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.extensions=Object.assign({},_u.extensions),this};ShaderMaterial.prototype.toJSON=function(_u){var $u=Material.prototype.toJSON.call(this,_u);$u.uniforms={};for(var Ru in this.uniforms){var Ou=this.uniforms[Ru],Fu=Ou.value;Fu&&Fu.isTexture?$u.uniforms[Ru]={type:"t",value:Fu.toJSON(_u).uuid}:Fu&&Fu.isColor?$u.uniforms[Ru]={type:"c",value:Fu.getHex()}:Fu&&Fu.isVector2?$u.uniforms[Ru]={type:"v2",value:Fu.toArray()}:Fu&&Fu.isVector3?$u.uniforms[Ru]={type:"v3",value:Fu.toArray()}:Fu&&Fu.isVector4?$u.uniforms[Ru]={type:"v4",value:Fu.toArray()}:Fu&&Fu.isMatrix3?$u.uniforms[Ru]={type:"m3",value:Fu.toArray()}:Fu&&Fu.isMatrix4?$u.uniforms[Ru]={type:"m4",value:Fu.toArray()}:$u.uniforms[Ru]={value:Fu}}Object.keys(this.defines).length>0&&($u.defines=this.defines),$u.vertexShader=this.vertexShader,$u.fragmentShader=this.fragmentShader;var Nu={};for(var Vu in this.extensions)this.extensions[Vu]===!0&&(Nu[Vu]=!0);return Object.keys(Nu).length>0&&($u.extensions=Nu),$u};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),this.matrixWorldInverse.copy(_u.matrixWorldInverse),this.projectionMatrix.copy(_u.projectionMatrix),this.projectionMatrixInverse.copy(_u.projectionMatrixInverse),this},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set(-$u[8],-$u[9],-$u[10]).normalize()},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(_u,$u){Object3D.prototype.updateWorldMatrix.call(this,_u,$u),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(_u,$u,Ru,Ou){Camera.call(this),this.type="PerspectiveCamera",this.fov=_u!==void 0?_u:50,this.zoom=1,this.near=Ru!==void 0?Ru:.1,this.far=Ou!==void 0?Ou:2e3,this.focus=10,this.aspect=$u!==void 0?$u:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.fov=_u.fov,this.zoom=_u.zoom,this.near=_u.near,this.far=_u.far,this.focus=_u.focus,this.aspect=_u.aspect,this.view=_u.view===null?null:Object.assign({},_u.view),this.filmGauge=_u.filmGauge,this.filmOffset=_u.filmOffset,this},setFocalLength:function(_u){var $u=.5*this.getFilmHeight()/_u;this.fov=MathUtils.RAD2DEG*2*Math.atan($u),this.updateProjectionMatrix()},getFocalLength:function(){var _u=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_u},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(_u,$u,Ru,Ou,Fu,Nu){this.aspect=_u/$u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Ru,this.view.offsetY=Ou,this.view.width=Fu,this.view.height=Nu,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=this.near,$u=_u*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Ru=2*$u,Ou=this.aspect*Ru,Fu=-.5*Ou,Nu=this.view;if(this.view!==null&&this.view.enabled){var Vu=Nu.fullWidth,Gu=Nu.fullHeight;Fu+=Nu.offsetX*Ou/Vu,$u-=Nu.offsetY*Ru/Gu,Ou*=Nu.width/Vu,Ru*=Nu.height/Gu}var Uu=this.filmOffset;Uu!==0&&(Fu+=_u*Uu/this.getFilmWidth()),this.projectionMatrix.makePerspective(Fu,Fu+Ou,$u,$u-Ru,_u,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.fov=this.fov,$u.object.zoom=this.zoom,$u.object.near=this.near,$u.object.far=this.far,$u.object.focus=this.focus,$u.object.aspect=this.aspect,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u.object.filmGauge=this.filmGauge,$u.object.filmOffset=this.filmOffset,$u}});var fov=90,aspect=1;function CubeCamera(_u,$u,Ru){if(Object3D.call(this),this.type="CubeCamera",Ru.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Ru;var Ou=new PerspectiveCamera(fov,aspect,_u,$u);Ou.layers=this.layers,Ou.up.set(0,-1,0),Ou.lookAt(new Vector3(1,0,0)),this.add(Ou);var Fu=new PerspectiveCamera(fov,aspect,_u,$u);Fu.layers=this.layers,Fu.up.set(0,-1,0),Fu.lookAt(new Vector3(-1,0,0)),this.add(Fu);var Nu=new PerspectiveCamera(fov,aspect,_u,$u);Nu.layers=this.layers,Nu.up.set(0,0,1),Nu.lookAt(new Vector3(0,1,0)),this.add(Nu);var Vu=new PerspectiveCamera(fov,aspect,_u,$u);Vu.layers=this.layers,Vu.up.set(0,0,-1),Vu.lookAt(new Vector3(0,-1,0)),this.add(Vu);var Gu=new PerspectiveCamera(fov,aspect,_u,$u);Gu.layers=this.layers,Gu.up.set(0,-1,0),Gu.lookAt(new Vector3(0,0,1)),this.add(Gu);var Uu=new PerspectiveCamera(fov,aspect,_u,$u);Uu.layers=this.layers,Uu.up.set(0,-1,0),Uu.lookAt(new Vector3(0,0,-1)),this.add(Uu),this.update=function(Hu,Wu){this.parent===null&&this.updateMatrixWorld();var Qu=Hu.xr.enabled,qu=Hu.getRenderTarget();Hu.xr.enabled=!1;var Ku=Ru.texture.generateMipmaps;Ru.texture.generateMipmaps=!1,Hu.setRenderTarget(Ru,0),Hu.render(Wu,Ou),Hu.setRenderTarget(Ru,1),Hu.render(Wu,Fu),Hu.setRenderTarget(Ru,2),Hu.render(Wu,Nu),Hu.setRenderTarget(Ru,3),Hu.render(Wu,Vu),Hu.setRenderTarget(Ru,4),Hu.render(Wu,Gu),Ru.texture.generateMipmaps=Ku,Hu.setRenderTarget(Ru,5),Hu.render(Wu,Uu),Hu.setRenderTarget(qu),Hu.xr.enabled=Qu},this.clear=function(Hu,Wu,Qu,qu){for(var Ku=Hu.getRenderTarget(),Yu=0;Yu<6;Yu++)Hu.setRenderTarget(Ru,Yu),Hu.clear(Wu,Qu,qu);Hu.setRenderTarget(Ku)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(_u,$u,Ru){Number.isInteger($u)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),$u=Ru),WebGLRenderTarget.call(this,_u,_u,$u)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(_u,$u){this.texture.type=$u.type,this.texture.format=$u.format,this.texture.encoding=$u.encoding;var Ru=new Scene,Ou={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Fu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Ou.uniforms),vertexShader:Ou.vertexShader,fragmentShader:Ou.fragmentShader,side:BackSide,blending:NoBlending});Fu.uniforms.tEquirect.value=$u;var Nu=new Mesh(new BoxBufferGeometry(5,5,5),Fu);Ru.add(Nu);var Vu=new CubeCamera(1,10,this);return Vu.update(_u,Ru),Nu.geometry.dispose(),Nu.material.dispose(),this};function DataTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu){Texture.call(this,null,Nu,Vu,Gu,Uu,Hu,Ou,Fu,Wu,Qu),this.image={data:_u||null,width:$u||1,height:Ru||1},this.magFilter=Uu!==void 0?Uu:NearestFilter,this.minFilter=Hu!==void 0?Hu:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(_u,$u,Ru,Ou,Fu,Nu){this.planes=[_u!==void 0?_u:new Plane,$u!==void 0?$u:new Plane,Ru!==void 0?Ru:new Plane,Ou!==void 0?Ou:new Plane,Fu!==void 0?Fu:new Plane,Nu!==void 0?Nu:new Plane]}Object.assign(Frustum.prototype,{set:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=this.planes;return Vu[0].copy(_u),Vu[1].copy($u),Vu[2].copy(Ru),Vu[3].copy(Ou),Vu[4].copy(Fu),Vu[5].copy(Nu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){for(var $u=this.planes,Ru=0;Ru<6;Ru++)$u[Ru].copy(_u.planes[Ru]);return this},setFromProjectionMatrix:function(_u){var $u=this.planes,Ru=_u.elements,Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Gu=Ru[4],Uu=Ru[5],Hu=Ru[6],Wu=Ru[7],Qu=Ru[8],qu=Ru[9],Ku=Ru[10],Yu=Ru[11],_c=Ru[12],Ju=Ru[13],Xu=Ru[14],Zu=Ru[15];return $u[0].setComponents(Vu-Ou,Wu-Gu,Yu-Qu,Zu-_c).normalize(),$u[1].setComponents(Vu+Ou,Wu+Gu,Yu+Qu,Zu+_c).normalize(),$u[2].setComponents(Vu+Fu,Wu+Uu,Yu+qu,Zu+Ju).normalize(),$u[3].setComponents(Vu-Fu,Wu-Uu,Yu-qu,Zu-Ju).normalize(),$u[4].setComponents(Vu-Nu,Wu-Hu,Yu-Ku,Zu-Xu).normalize(),$u[5].setComponents(Vu+Nu,Wu+Hu,Yu+Ku,Zu+Xu).normalize(),this},intersectsObject:function(_u){var $u=_u.geometry;return $u.boundingSphere===null&&$u.computeBoundingSphere(),_sphere$1.copy($u.boundingSphere).applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(_u){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(_u){for(var $u=this.planes,Ru=_u.center,Ou=-_u.radius,Fu=0;Fu<6;Fu++){var Nu=$u[Fu].distanceToPoint(Ru);if(Nu<Ou)return!1}return!0},intersectsBox:function(_u){for(var $u=this.planes,Ru=0;Ru<6;Ru++){var Ou=$u[Ru];if(_vector$5.x=Ou.normal.x>0?_u.max.x:_u.min.x,_vector$5.y=Ou.normal.y>0?_u.max.y:_u.min.y,_vector$5.z=Ou.normal.z>0?_u.max.z:_u.min.z,Ou.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(_u){for(var $u=this.planes,Ru=0;Ru<6;Ru++)if($u[Ru].distanceToPoint(_u)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var _u=null,$u=!1,Ru=null;function Ou(Fu,Nu){$u!==!1&&(Ru(Fu,Nu),_u.requestAnimationFrame(Ou))}return{start:function(){$u!==!0&&Ru!==null&&(_u.requestAnimationFrame(Ou),$u=!0)},stop:function(){$u=!1},setAnimationLoop:function(Fu){Ru=Fu},setContext:function(Fu){_u=Fu}}}function WebGLAttributes(_u,$u){var Ru=$u.isWebGL2,Ou=new WeakMap;function Fu(Hu,Wu){var Qu=Hu.array,qu=Hu.usage,Ku=_u.createBuffer();_u.bindBuffer(Wu,Ku),_u.bufferData(Wu,Qu,qu),Hu.onUploadCallback();var Yu=5126;return Qu instanceof Float32Array?Yu=5126:Qu instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Qu instanceof Uint16Array?Yu=5123:Qu instanceof Int16Array?Yu=5122:Qu instanceof Uint32Array?Yu=5125:Qu instanceof Int32Array?Yu=5124:Qu instanceof Int8Array?Yu=5120:Qu instanceof Uint8Array&&(Yu=5121),{buffer:Ku,type:Yu,bytesPerElement:Qu.BYTES_PER_ELEMENT,version:Hu.version}}function Nu(Hu,Wu,Qu){var qu=Wu.array,Ku=Wu.updateRange;_u.bindBuffer(Qu,Hu),Ku.count===-1?_u.bufferSubData(Qu,0,qu):(Ru?_u.bufferSubData(Qu,Ku.offset*qu.BYTES_PER_ELEMENT,qu,Ku.offset,Ku.count):_u.bufferSubData(Qu,Ku.offset*qu.BYTES_PER_ELEMENT,qu.subarray(Ku.offset,Ku.offset+Ku.count)),Ku.count=-1)}function Vu(Hu){return Hu.isInterleavedBufferAttribute&&(Hu=Hu.data),Ou.get(Hu)}function Gu(Hu){Hu.isInterleavedBufferAttribute&&(Hu=Hu.data);var Wu=Ou.get(Hu);Wu&&(_u.deleteBuffer(Wu.buffer),Ou.delete(Hu))}function Uu(Hu,Wu){Hu.isInterleavedBufferAttribute&&(Hu=Hu.data);var Qu=Ou.get(Hu);Qu===void 0?Ou.set(Hu,Fu(Hu,Wu)):Qu.version<Hu.version&&(Nu(Qu.buffer,Hu,Wu),Qu.version=Hu.version)}return{get:Vu,remove:Gu,update:Uu}}function PlaneGeometry(_u,$u,Ru,Ou){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:_u,height:$u,widthSegments:Ru,heightSegments:Ou},this.fromBufferGeometry(new PlaneBufferGeometry(_u,$u,Ru,Ou)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(_u,$u,Ru,Ou){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:_u,height:$u,widthSegments:Ru,heightSegments:Ou},_u=_u||1,$u=$u||1;var Fu=_u/2,Nu=$u/2,Vu=Math.floor(Ru)||1,Gu=Math.floor(Ou)||1,Uu=Vu+1,Hu=Gu+1,Wu=_u/Vu,Qu=$u/Gu,qu,Ku,Yu=[],_c=[],Ju=[],Xu=[];for(Ku=0;Ku<Hu;Ku++){var Zu=Ku*Qu-Nu;for(qu=0;qu<Uu;qu++){var Xc=qu*Wu-Fu;_c.push(Xc,-Zu,0),Ju.push(0,0,1),Xu.push(qu/Vu),Xu.push(1-Ku/Gu)}}for(Ku=0;Ku<Gu;Ku++)for(qu=0;qu<Vu;qu++){var _h=qu+Uu*Ku,ep=qu+Uu*(Ku+1),np=qu+1+Uu*(Ku+1),ap=qu+1+Uu*Ku;Yu.push(_h,ep,ap),Yu.push(ep,np,ap)}this.setIndex(Yu),this.setAttribute("position",new Float32BufferAttribute(_c,3)),this.setAttribute("normal",new Float32BufferAttribute(Ju,3)),this.setAttribute("uv",new Float32BufferAttribute(Xu,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(_u,$u,Ru,Ou){var Fu=new Color(0),Nu=0,Vu,Gu,Uu=null,Hu=0,Wu=null;function Qu(Ku,Yu,_c,Ju){var Xu=Yu.background,Zu=_u.xr,Xc=Zu.getSession&&Zu.getSession();if(Xc&&Xc.environmentBlendMode==="additive"&&(Xu=null),Xu===null?qu(Fu,Nu):Xu&&Xu.isColor&&(qu(Xu,1),Ju=!0),(_u.autoClear||Ju)&&_u.clear(_u.autoClearColor,_u.autoClearDepth,_u.autoClearStencil),Xu&&(Xu.isCubeTexture||Xu.isWebGLCubeRenderTarget||Xu.mapping===CubeUVReflectionMapping)){Gu===void 0&&(Gu=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Gu.geometry.deleteAttribute("normal"),Gu.geometry.deleteAttribute("uv"),Gu.onBeforeRender=function(ep,np,ap){this.matrixWorld.copyPosition(ap.matrixWorld)},Object.defineProperty(Gu.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Ru.update(Gu));var _h=Xu.isWebGLCubeRenderTarget?Xu.texture:Xu;Gu.material.uniforms.envMap.value=_h,Gu.material.uniforms.flipEnvMap.value=_h.isCubeTexture?-1:1,(Uu!==Xu||Hu!==_h.version||Wu!==_u.toneMapping)&&(Gu.material.needsUpdate=!0,Uu=Xu,Hu=_h.version,Wu=_u.toneMapping),Ku.unshift(Gu,Gu.geometry,Gu.material,0,0,null)}else Xu&&Xu.isTexture&&(Vu===void 0&&(Vu=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Vu.geometry.deleteAttribute("normal"),Object.defineProperty(Vu.material,"map",{get:function(){return this.uniforms.t2D.value}}),Ru.update(Vu)),Vu.material.uniforms.t2D.value=Xu,Xu.matrixAutoUpdate===!0&&Xu.updateMatrix(),Vu.material.uniforms.uvTransform.value.copy(Xu.matrix),(Uu!==Xu||Hu!==Xu.version||Wu!==_u.toneMapping)&&(Vu.material.needsUpdate=!0,Uu=Xu,Hu=Xu.version,Wu=_u.toneMapping),Ku.unshift(Vu,Vu.geometry,Vu.material,0,0,null))}function qu(Ku,Yu){$u.buffers.color.setClear(Ku.r,Ku.g,Ku.b,Yu,Ou)}return{getClearColor:function(){return Fu},setClearColor:function(Ku,Yu){Fu.set(Ku),Nu=Yu!==void 0?Yu:1,qu(Fu,Nu)},getClearAlpha:function(){return Nu},setClearAlpha:function(Ku){Nu=Ku,qu(Fu,Nu)},render:Qu}}function WebGLBufferRenderer(_u,$u,Ru,Ou){var Fu=Ou.isWebGL2,Nu;function Vu(Hu){Nu=Hu}function Gu(Hu,Wu){_u.drawArrays(Nu,Hu,Wu),Ru.update(Wu,Nu)}function Uu(Hu,Wu,Qu,qu){if(qu!==0){var Ku,Yu;if(Fu)Ku=_u,Yu="drawArraysInstanced";else if(Ku=$u.get("ANGLE_instanced_arrays"),Yu="drawArraysInstancedANGLE",Ku===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ku[Yu](Nu,Wu,Qu,qu),Ru.update(Qu,Nu,qu)}}this.setMode=Vu,this.render=Gu,this.renderInstances=Uu}function WebGLCapabilities(_u,$u,Ru){var Ou;function Fu(){if(Ou!==void 0)return Ou;var np=$u.get("EXT_texture_filter_anisotropic");return np!==null?Ou=_u.getParameter(np.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Ou=0,Ou}function Nu(np){if(np==="highp"){if(_u.getShaderPrecisionFormat(35633,36338).precision>0&&_u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";np="mediump"}return np==="mediump"&&_u.getShaderPrecisionFormat(35633,36337).precision>0&&_u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Vu=typeof WebGL2RenderingContext!="undefined"&&_u instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&_u instanceof WebGL2ComputeRenderingContext,Gu=Ru.precision!==void 0?Ru.precision:"highp",Uu=Nu(Gu);Uu!==Gu&&(console.warn("THREE.WebGLRenderer:",Gu,"not supported, using",Uu,"instead."),Gu=Uu);var Hu=Ru.logarithmicDepthBuffer===!0,Wu=_u.getParameter(34930),Qu=_u.getParameter(35660),qu=_u.getParameter(3379),Ku=_u.getParameter(34076),Yu=_u.getParameter(34921),_c=_u.getParameter(36347),Ju=_u.getParameter(36348),Xu=_u.getParameter(36349),Zu=Qu>0,Xc=Vu||!!$u.get("OES_texture_float"),_h=Zu&&Xc,ep=Vu?_u.getParameter(36183):0;return{isWebGL2:Vu,getMaxAnisotropy:Fu,getMaxPrecision:Nu,precision:Gu,logarithmicDepthBuffer:Hu,maxTextures:Wu,maxVertexTextures:Qu,maxTextureSize:qu,maxCubemapSize:Ku,maxAttributes:Yu,maxVertexUniforms:_c,maxVaryings:Ju,maxFragmentUniforms:Xu,vertexTextures:Zu,floatFragmentTextures:Xc,floatVertexTextures:_h,maxSamples:ep}}function WebGLClipping(){var _u=this,$u=null,Ru=0,Ou=!1,Fu=!1,Nu=new Plane,Vu=new Matrix3,Gu={value:null,needsUpdate:!1};this.uniform=Gu,this.numPlanes=0,this.numIntersection=0,this.init=function(Wu,Qu,qu){var Ku=Wu.length!==0||Qu||Ru!==0||Ou;return Ou=Qu,$u=Hu(Wu,qu,0),Ru=Wu.length,Ku},this.beginShadows=function(){Fu=!0,Hu(null)},this.endShadows=function(){Fu=!1,Uu()},this.setState=function(Wu,Qu,qu,Ku,Yu,_c){if(!Ou||Wu===null||Wu.length===0||Fu&&!qu)Fu?Hu(null):Uu();else{var Ju=Fu?0:Ru,Xu=Ju*4,Zu=Yu.clippingState||null;Gu.value=Zu,Zu=Hu(Wu,Ku,Xu,_c);for(var Xc=0;Xc!==Xu;++Xc)Zu[Xc]=$u[Xc];Yu.clippingState=Zu,this.numIntersection=Qu?this.numPlanes:0,this.numPlanes+=Ju}};function Uu(){Gu.value!==$u&&(Gu.value=$u,Gu.needsUpdate=Ru>0),_u.numPlanes=Ru,_u.numIntersection=0}function Hu(Wu,Qu,qu,Ku){var Yu=Wu!==null?Wu.length:0,_c=null;if(Yu!==0){if(_c=Gu.value,Ku!==!0||_c===null){var Ju=qu+Yu*4,Xu=Qu.matrixWorldInverse;Vu.getNormalMatrix(Xu),(_c===null||_c.length<Ju)&&(_c=new Float32Array(Ju));for(var Zu=0,Xc=qu;Zu!==Yu;++Zu,Xc+=4)Nu.copy(Wu[Zu]).applyMatrix4(Xu,Vu),Nu.normal.toArray(_c,Xc),_c[Xc+3]=Nu.constant}Gu.value=_c,Gu.needsUpdate=!0}return _u.numPlanes=Yu,_u.numIntersection=0,_c}}function WebGLExtensions(_u){var $u={};return{get:function(Ru){if($u[Ru]!==void 0)return $u[Ru];var Ou;switch(Ru){case"WEBGL_depth_texture":Ou=_u.getExtension("WEBGL_depth_texture")||_u.getExtension("MOZ_WEBGL_depth_texture")||_u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Ou=_u.getExtension("EXT_texture_filter_anisotropic")||_u.getExtension("MOZ_EXT_texture_filter_anisotropic")||_u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Ou=_u.getExtension("WEBGL_compressed_texture_s3tc")||_u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Ou=_u.getExtension("WEBGL_compressed_texture_pvrtc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Ou=_u.getExtension(Ru)}return Ou===null&&console.warn("THREE.WebGLRenderer: "+Ru+" extension not supported."),$u[Ru]=Ou,Ou}}}function WebGLGeometries(_u,$u,Ru){var Ou=new WeakMap,Fu=new WeakMap;function Nu(Wu){var Qu=Wu.target,qu=Ou.get(Qu);qu.index!==null&&$u.remove(qu.index);for(var Ku in qu.attributes)$u.remove(qu.attributes[Ku]);Qu.removeEventListener("dispose",Nu),Ou.delete(Qu);var Yu=Fu.get(qu);Yu&&($u.remove(Yu),Fu.delete(qu)),Ru.memory.geometries--}function Vu(Wu,Qu){var qu=Ou.get(Qu);return qu||(Qu.addEventListener("dispose",Nu),Qu.isBufferGeometry?qu=Qu:Qu.isGeometry&&(Qu._bufferGeometry===void 0&&(Qu._bufferGeometry=new BufferGeometry().setFromObject(Wu)),qu=Qu._bufferGeometry),Ou.set(Qu,qu),Ru.memory.geometries++,qu)}function Gu(Wu){var Qu=Wu.index,qu=Wu.attributes;Qu!==null&&$u.update(Qu,34963);for(var Ku in qu)$u.update(qu[Ku],34962);var Yu=Wu.morphAttributes;for(var Ku in Yu)for(var _c=Yu[Ku],Ju=0,Xu=_c.length;Ju<Xu;Ju++)$u.update(_c[Ju],34962)}function Uu(Wu){var Qu=[],qu=Wu.index,Ku=Wu.attributes.position,Yu=0;if(qu!==null){var _c=qu.array;Yu=qu.version;for(var Ju=0,Xu=_c.length;Ju<Xu;Ju+=3){var Zu=_c[Ju+0],Xc=_c[Ju+1],_h=_c[Ju+2];Qu.push(Zu,Xc,Xc,_h,_h,Zu)}}else{var _c=Ku.array;Yu=Ku.version;for(var Ju=0,Xu=_c.length/3-1;Ju<Xu;Ju+=3){var Zu=Ju+0,Xc=Ju+1,_h=Ju+2;Qu.push(Zu,Xc,Xc,_h,_h,Zu)}}var ep=new(arrayMax(Qu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Qu,1);ep.version=Yu,$u.update(ep,34963);var np=Fu.get(Wu);np&&$u.remove(np),Fu.set(Wu,ep)}function Hu(Wu){var Qu=Fu.get(Wu);if(Qu){var qu=Wu.index;qu!==null&&Qu.version<qu.version&&Uu(Wu)}else Uu(Wu);return Fu.get(Wu)}return{get:Vu,update:Gu,getWireframeAttribute:Hu}}function WebGLIndexedBufferRenderer(_u,$u,Ru,Ou){var Fu=Ou.isWebGL2,Nu;function Vu(qu){Nu=qu}var Gu,Uu;function Hu(qu){Gu=qu.type,Uu=qu.bytesPerElement}function Wu(qu,Ku){_u.drawElements(Nu,Ku,Gu,qu*Uu),Ru.update(Ku,Nu)}function Qu(qu,Ku,Yu,_c){if(_c!==0){var Ju,Xu;if(Fu)Ju=_u,Xu="drawElementsInstanced";else if(Ju=$u.get("ANGLE_instanced_arrays"),Xu="drawElementsInstancedANGLE",Ju===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ju[Xu](Nu,Yu,Gu,Ku*Uu,_c),Ru.update(Yu,Nu,_c)}}this.setMode=Vu,this.setIndex=Hu,this.render=Wu,this.renderInstances=Qu}function WebGLInfo(_u){var $u={geometries:0,textures:0},Ru={frame:0,calls:0,triangles:0,points:0,lines:0};function Ou(Nu,Vu,Gu){switch(Gu=Gu||1,Ru.calls++,Vu){case 4:Ru.triangles+=Gu*(Nu/3);break;case 1:Ru.lines+=Gu*(Nu/2);break;case 3:Ru.lines+=Gu*(Nu-1);break;case 2:Ru.lines+=Gu*Nu;break;case 0:Ru.points+=Gu*Nu;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Vu);break}}function Fu(){Ru.frame++,Ru.calls=0,Ru.triangles=0,Ru.points=0,Ru.lines=0}return{memory:$u,render:Ru,programs:null,autoReset:!0,reset:Fu,update:Ou}}function absNumericalSort(_u,$u){return Math.abs($u[1])-Math.abs(_u[1])}function WebGLMorphtargets(_u){var $u={},Ru=new Float32Array(8);function Ou(Fu,Nu,Vu,Gu){var Uu=Fu.morphTargetInfluences,Hu=Uu===void 0?0:Uu.length,Wu=$u[Nu.id];if(Wu===void 0){Wu=[];for(var Qu=0;Qu<Hu;Qu++)Wu[Qu]=[Qu,0];$u[Nu.id]=Wu}for(var qu=Vu.morphTargets&&Nu.morphAttributes.position,Ku=Vu.morphNormals&&Nu.morphAttributes.normal,Qu=0;Qu<Hu;Qu++){var Yu=Wu[Qu];Yu[1]!==0&&(qu&&Nu.deleteAttribute("morphTarget"+Qu),Ku&&Nu.deleteAttribute("morphNormal"+Qu))}for(var Qu=0;Qu<Hu;Qu++){var Yu=Wu[Qu];Yu[0]=Qu,Yu[1]=Uu[Qu]}Wu.sort(absNumericalSort);for(var _c=0,Qu=0;Qu<8;Qu++){var Yu=Wu[Qu];if(Yu){var Ju=Yu[0],Xu=Yu[1];if(Xu){qu&&Nu.setAttribute("morphTarget"+Qu,qu[Ju]),Ku&&Nu.setAttribute("morphNormal"+Qu,Ku[Ju]),Ru[Qu]=Xu,_c+=Xu;continue}}Ru[Qu]=0}var Zu=Nu.morphTargetsRelative?1:1-_c;Gu.getUniforms().setValue(_u,"morphTargetBaseInfluence",Zu),Gu.getUniforms().setValue(_u,"morphTargetInfluences",Ru)}return{update:Ou}}function WebGLObjects(_u,$u,Ru,Ou){var Fu=new WeakMap;function Nu(Gu){var Uu=Ou.render.frame,Hu=Gu.geometry,Wu=$u.get(Gu,Hu);return Fu.get(Wu)!==Uu&&(Hu.isGeometry&&Wu.updateFromObject(Gu),$u.update(Wu),Fu.set(Wu,Uu)),Gu.isInstancedMesh&&Ru.update(Gu.instanceMatrix,34962),Wu}function Vu(){Fu=new WeakMap}return{update:Nu,dispose:Vu}}function CubeTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu){_u=_u!==void 0?_u:[],$u=$u!==void 0?$u:CubeReflectionMapping,Vu=Vu!==void 0?Vu:RGBFormat,Texture.call(this,_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(_u){this.image=_u}});function DataTexture2DArray(_u,$u,Ru,Ou){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Ru||1,depth:Ou||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(_u,$u,Ru,Ou){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Ru||1,depth:Ou||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_u,$u,Ru){var Ou=_u[0];if(Ou<=0||Ou>0)return _u;var Fu=$u*Ru,Nu=arrayCacheF32[Fu];if(Nu===void 0&&(Nu=new Float32Array(Fu),arrayCacheF32[Fu]=Nu),$u!==0){Ou.toArray(Nu,0);for(var Vu=1,Gu=0;Vu!==$u;++Vu)Gu+=Ru,_u[Vu].toArray(Nu,Gu)}return Nu}function arraysEqual(_u,$u){if(_u.length!==$u.length)return!1;for(var Ru=0,Ou=_u.length;Ru<Ou;Ru++)if(_u[Ru]!==$u[Ru])return!1;return!0}function copyArray(_u,$u){for(var Ru=0,Ou=$u.length;Ru<Ou;Ru++)_u[Ru]=$u[Ru]}function allocTexUnits(_u,$u){var Ru=arrayCacheI32[$u];Ru===void 0&&(Ru=new Int32Array($u),arrayCacheI32[$u]=Ru);for(var Ou=0;Ou!==$u;++Ou)Ru[Ou]=_u.allocateTextureUnit();return Ru}function setValueV1f(_u,$u){var Ru=this.cache;Ru[0]!==$u&&(_u.uniform1f(this.addr,$u),Ru[0]=$u)}function setValueV2f(_u,$u){var Ru=this.cache;if($u.x!==void 0)(Ru[0]!==$u.x||Ru[1]!==$u.y)&&(_u.uniform2f(this.addr,$u.x,$u.y),Ru[0]=$u.x,Ru[1]=$u.y);else{if(arraysEqual(Ru,$u))return;_u.uniform2fv(this.addr,$u),copyArray(Ru,$u)}}function setValueV3f(_u,$u){var Ru=this.cache;if($u.x!==void 0)(Ru[0]!==$u.x||Ru[1]!==$u.y||Ru[2]!==$u.z)&&(_u.uniform3f(this.addr,$u.x,$u.y,$u.z),Ru[0]=$u.x,Ru[1]=$u.y,Ru[2]=$u.z);else if($u.r!==void 0)(Ru[0]!==$u.r||Ru[1]!==$u.g||Ru[2]!==$u.b)&&(_u.uniform3f(this.addr,$u.r,$u.g,$u.b),Ru[0]=$u.r,Ru[1]=$u.g,Ru[2]=$u.b);else{if(arraysEqual(Ru,$u))return;_u.uniform3fv(this.addr,$u),copyArray(Ru,$u)}}function setValueV4f(_u,$u){var Ru=this.cache;if($u.x!==void 0)(Ru[0]!==$u.x||Ru[1]!==$u.y||Ru[2]!==$u.z||Ru[3]!==$u.w)&&(_u.uniform4f(this.addr,$u.x,$u.y,$u.z,$u.w),Ru[0]=$u.x,Ru[1]=$u.y,Ru[2]=$u.z,Ru[3]=$u.w);else{if(arraysEqual(Ru,$u))return;_u.uniform4fv(this.addr,$u),copyArray(Ru,$u)}}function setValueM2(_u,$u){var Ru=this.cache,Ou=$u.elements;if(Ou===void 0){if(arraysEqual(Ru,$u))return;_u.uniformMatrix2fv(this.addr,!1,$u),copyArray(Ru,$u)}else{if(arraysEqual(Ru,Ou))return;mat2array.set(Ou),_u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Ru,Ou)}}function setValueM3(_u,$u){var Ru=this.cache,Ou=$u.elements;if(Ou===void 0){if(arraysEqual(Ru,$u))return;_u.uniformMatrix3fv(this.addr,!1,$u),copyArray(Ru,$u)}else{if(arraysEqual(Ru,Ou))return;mat3array.set(Ou),_u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Ru,Ou)}}function setValueM4(_u,$u){var Ru=this.cache,Ou=$u.elements;if(Ou===void 0){if(arraysEqual(Ru,$u))return;_u.uniformMatrix4fv(this.addr,!1,$u),copyArray(Ru,$u)}else{if(arraysEqual(Ru,Ou))return;mat4array.set(Ou),_u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Ru,Ou)}}function setValueT1(_u,$u,Ru){var Ou=this.cache,Fu=Ru.allocateTextureUnit();Ou[0]!==Fu&&(_u.uniform1i(this.addr,Fu),Ou[0]=Fu),Ru.safeSetTexture2D($u||emptyTexture,Fu)}function setValueT2DArray1(_u,$u,Ru){var Ou=this.cache,Fu=Ru.allocateTextureUnit();Ou[0]!==Fu&&(_u.uniform1i(this.addr,Fu),Ou[0]=Fu),Ru.setTexture2DArray($u||emptyTexture2dArray,Fu)}function setValueT3D1(_u,$u,Ru){var Ou=this.cache,Fu=Ru.allocateTextureUnit();Ou[0]!==Fu&&(_u.uniform1i(this.addr,Fu),Ou[0]=Fu),Ru.setTexture3D($u||emptyTexture3d,Fu)}function setValueT6(_u,$u,Ru){var Ou=this.cache,Fu=Ru.allocateTextureUnit();Ou[0]!==Fu&&(_u.uniform1i(this.addr,Fu),Ou[0]=Fu),Ru.safeSetTextureCube($u||emptyCubeTexture,Fu)}function setValueV1i(_u,$u){var Ru=this.cache;Ru[0]!==$u&&(_u.uniform1i(this.addr,$u),Ru[0]=$u)}function setValueV2i(_u,$u){var Ru=this.cache;arraysEqual(Ru,$u)||(_u.uniform2iv(this.addr,$u),copyArray(Ru,$u))}function setValueV3i(_u,$u){var Ru=this.cache;arraysEqual(Ru,$u)||(_u.uniform3iv(this.addr,$u),copyArray(Ru,$u))}function setValueV4i(_u,$u){var Ru=this.cache;arraysEqual(Ru,$u)||(_u.uniform4iv(this.addr,$u),copyArray(Ru,$u))}function setValueV1ui(_u,$u){var Ru=this.cache;Ru[0]!==$u&&(_u.uniform1ui(this.addr,$u),Ru[0]=$u)}function getSingularSetter(_u){switch(_u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_u,$u){_u.uniform1fv(this.addr,$u)}function setValueV1iArray(_u,$u){_u.uniform1iv(this.addr,$u)}function setValueV2iArray(_u,$u){_u.uniform2iv(this.addr,$u)}function setValueV3iArray(_u,$u){_u.uniform3iv(this.addr,$u)}function setValueV4iArray(_u,$u){_u.uniform4iv(this.addr,$u)}function setValueV2fArray(_u,$u){var Ru=flatten($u,this.size,2);_u.uniform2fv(this.addr,Ru)}function setValueV3fArray(_u,$u){var Ru=flatten($u,this.size,3);_u.uniform3fv(this.addr,Ru)}function setValueV4fArray(_u,$u){var Ru=flatten($u,this.size,4);_u.uniform4fv(this.addr,Ru)}function setValueM2Array(_u,$u){var Ru=flatten($u,this.size,4);_u.uniformMatrix2fv(this.addr,!1,Ru)}function setValueM3Array(_u,$u){var Ru=flatten($u,this.size,9);_u.uniformMatrix3fv(this.addr,!1,Ru)}function setValueM4Array(_u,$u){var Ru=flatten($u,this.size,16);_u.uniformMatrix4fv(this.addr,!1,Ru)}function setValueT1Array(_u,$u,Ru){var Ou=$u.length,Fu=allocTexUnits(Ru,Ou);_u.uniform1iv(this.addr,Fu);for(var Nu=0;Nu!==Ou;++Nu)Ru.safeSetTexture2D($u[Nu]||emptyTexture,Fu[Nu])}function setValueT6Array(_u,$u,Ru){var Ou=$u.length,Fu=allocTexUnits(Ru,Ou);_u.uniform1iv(this.addr,Fu);for(var Nu=0;Nu!==Ou;++Nu)Ru.safeSetTextureCube($u[Nu]||emptyCubeTexture,Fu[Nu])}function getPureArraySetter(_u){switch(_u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(_u,$u,Ru){this.id=_u,this.addr=Ru,this.cache=[],this.setValue=getSingularSetter($u.type)}function PureArrayUniform(_u,$u,Ru){this.id=_u,this.addr=Ru,this.cache=[],this.size=$u.size,this.setValue=getPureArraySetter($u.type)}PureArrayUniform.prototype.updateCache=function(_u){var $u=this.cache;_u instanceof Float32Array&&$u.length!==_u.length&&(this.cache=new Float32Array(_u.length)),copyArray($u,_u)};function StructuredUniform(_u){this.id=_u,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(_u,$u,Ru){for(var Ou=this.seq,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu){var Vu=Ou[Fu];Vu.setValue(_u,$u[Vu.id],Ru)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(_u,$u){_u.seq.push($u),_u.map[$u.id]=$u}function parseUniform(_u,$u,Ru){var Ou=_u.name,Fu=Ou.length;for(RePathPart.lastIndex=0;;){var Nu=RePathPart.exec(Ou),Vu=RePathPart.lastIndex,Gu=Nu[1],Uu=Nu[2]==="]",Hu=Nu[3];if(Uu&&(Gu=Gu|0),Hu===void 0||Hu==="["&&Vu+2===Fu){addUniform(Ru,Hu===void 0?new SingleUniform(Gu,_u,$u):new PureArrayUniform(Gu,_u,$u));break}else{var Wu=Ru.map,Qu=Wu[Gu];Qu===void 0&&(Qu=new StructuredUniform(Gu),addUniform(Ru,Qu)),Ru=Qu}}}function WebGLUniforms(_u,$u){this.seq=[],this.map={};for(var Ru=_u.getProgramParameter($u,35718),Ou=0;Ou<Ru;++Ou){var Fu=_u.getActiveUniform($u,Ou),Nu=_u.getUniformLocation($u,Fu.name);parseUniform(Fu,Nu,this)}}WebGLUniforms.prototype.setValue=function(_u,$u,Ru,Ou){var Fu=this.map[$u];Fu!==void 0&&Fu.setValue(_u,Ru,Ou)};WebGLUniforms.prototype.setOptional=function(_u,$u,Ru){var Ou=$u[Ru];Ou!==void 0&&this.setValue(_u,Ru,Ou)};WebGLUniforms.upload=function(_u,$u,Ru,Ou){for(var Fu=0,Nu=$u.length;Fu!==Nu;++Fu){var Vu=$u[Fu],Gu=Ru[Vu.id];Gu.needsUpdate!==!1&&Vu.setValue(_u,Gu.value,Ou)}};WebGLUniforms.seqWithValue=function(_u,$u){for(var Ru=[],Ou=0,Fu=_u.length;Ou!==Fu;++Ou){var Nu=_u[Ou];Nu.id in $u&&Ru.push(Nu)}return Ru};function WebGLShader(_u,$u,Ru){var Ou=_u.createShader($u);return _u.shaderSource(Ou,Ru),_u.compileShader(Ou),Ou}var programIdCount=0;function addLineNumbers(_u){for(var $u=_u.split(`
`),Ru=0;Ru<$u.length;Ru++)$u[Ru]=Ru+1+": "+$u[Ru];return $u.join(`
`)}function getEncodingComponents(_u){switch(_u){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+_u)}}function getShaderErrors(_u,$u,Ru){var Ou=_u.getShaderParameter($u,35713),Fu=_u.getShaderInfoLog($u).trim();if(Ou&&Fu==="")return"";var Nu=_u.getShaderSource($u);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Ru+`
`+Fu+addLineNumbers(Nu)}function getTexelDecodingFunction(_u,$u){var Ru=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return "+Ru[0]+"ToLinear"+Ru[1]+"; }"}function getTexelEncodingFunction(_u,$u){var Ru=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return LinearTo"+Ru[0]+Ru[1]+"; }"}function getToneMappingFunction(_u,$u){var Ru;switch($u){case LinearToneMapping:Ru="Linear";break;case ReinhardToneMapping:Ru="Reinhard";break;case Uncharted2ToneMapping:Ru="Uncharted2";break;case CineonToneMapping:Ru="OptimizedCineon";break;case ACESFilmicToneMapping:Ru="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+$u)}return"vec3 "+_u+"( vec3 color ) { return "+Ru+"ToneMapping( color ); }"}function generateExtensions(_u){var $u=[_u.extensionDerivatives||_u.envMapCubeUV||_u.bumpMap||_u.tangentSpaceNormalMap||_u.clearcoatNormalMap||_u.flatShading||_u.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_u.extensionFragDepth||_u.logarithmicDepthBuffer)&&_u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_u.extensionDrawBuffers&&_u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_u.extensionShaderTextureLOD||_u.envMap)&&_u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return $u.filter(filterEmptyLine).join(`
`)}function generateDefines(_u){var $u=[];for(var Ru in _u){var Ou=_u[Ru];Ou!==!1&&$u.push("#define "+Ru+" "+Ou)}return $u.join(`
`)}function fetchAttributeLocations(_u,$u){for(var Ru={},Ou=_u.getProgramParameter($u,35721),Fu=0;Fu<Ou;Fu++){var Nu=_u.getActiveAttrib($u,Fu),Vu=Nu.name;Ru[Vu]=_u.getAttribLocation($u,Vu)}return Ru}function filterEmptyLine(_u){return _u!==""}function replaceLightNums(_u,$u){return _u.replace(/NUM_DIR_LIGHTS/g,$u.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$u.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,$u.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$u.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$u.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$u.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$u.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$u.numPointLightShadows)}function replaceClippingPlaneNums(_u,$u){return _u.replace(/NUM_CLIPPING_PLANES/g,$u.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$u.numClippingPlanes-$u.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_u){return _u.replace(includePattern,includeReplacer)}function includeReplacer(_u,$u){var Ru=ShaderChunk[$u];if(Ru===void 0)throw new Error("Can not resolve #include <"+$u+">");return resolveIncludes(Ru)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(_u){return _u.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(_u,$u,Ru,Ou){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(_u,$u,Ru,Ou)}function loopReplacer(_u,$u,Ru,Ou){for(var Fu="",Nu=parseInt($u);Nu<parseInt(Ru);Nu++)Fu+=Ou.replace(/\[ i \]/g,"[ "+Nu+" ]").replace(/UNROLLED_LOOP_INDEX/g,Nu);return Fu}function generatePrecision(_u){var $u="precision "+_u.precision+` float;
precision `+_u.precision+" int;";return _u.precision==="highp"?$u+=`
#define HIGH_PRECISION`:_u.precision==="mediump"?$u+=`
#define MEDIUM_PRECISION`:_u.precision==="lowp"&&($u+=`
#define LOW_PRECISION`),$u}function generateShadowMapTypeDefine(_u){var $u="SHADOWMAP_TYPE_BASIC";return _u.shadowMapType===PCFShadowMap?$u="SHADOWMAP_TYPE_PCF":_u.shadowMapType===PCFSoftShadowMap?$u="SHADOWMAP_TYPE_PCF_SOFT":_u.shadowMapType===VSMShadowMap&&($u="SHADOWMAP_TYPE_VSM"),$u}function generateEnvMapTypeDefine(_u){var $u="ENVMAP_TYPE_CUBE";if(_u.envMap)switch(_u.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:$u="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:$u="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:$u="ENVMAP_TYPE_SPHERE";break}return $u}function generateEnvMapModeDefine(_u){var $u="ENVMAP_MODE_REFLECTION";if(_u.envMap)switch(_u.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_MODE_REFRACTION";break}return $u}function generateEnvMapBlendingDefine(_u){var $u="ENVMAP_BLENDING_NONE";if(_u.envMap)switch(_u.combine){case MultiplyOperation:$u="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:$u="ENVMAP_BLENDING_MIX";break;case AddOperation:$u="ENVMAP_BLENDING_ADD";break}return $u}function WebGLProgram(_u,$u,Ru){var Ou=_u.getContext(),Fu=Ru.defines,Nu=Ru.vertexShader,Vu=Ru.fragmentShader,Gu=generateShadowMapTypeDefine(Ru),Uu=generateEnvMapTypeDefine(Ru),Hu=generateEnvMapModeDefine(Ru),Wu=generateEnvMapBlendingDefine(Ru),Qu=_u.gammaFactor>0?_u.gammaFactor:1,qu=Ru.isWebGL2?"":generateExtensions(Ru),Ku=generateDefines(Fu),Yu=Ou.createProgram(),_c,Ju;if(Ru.isRawShaderMaterial?(_c=[Ku].filter(filterEmptyLine).join(`
`),_c.length>0&&(_c+=`
`),Ju=[qu,Ku].filter(filterEmptyLine).join(`
`),Ju.length>0&&(Ju+=`
`)):(_c=[generatePrecision(Ru),"#define SHADER_NAME "+Ru.shaderName,Ku,Ru.instancing?"#define USE_INSTANCING":"",Ru.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Qu,"#define MAX_BONES "+Ru.maxBones,Ru.useFog&&Ru.fog?"#define USE_FOG":"",Ru.useFog&&Ru.fogExp2?"#define FOG_EXP2":"",Ru.map?"#define USE_MAP":"",Ru.envMap?"#define USE_ENVMAP":"",Ru.envMap?"#define "+Hu:"",Ru.lightMap?"#define USE_LIGHTMAP":"",Ru.aoMap?"#define USE_AOMAP":"",Ru.emissiveMap?"#define USE_EMISSIVEMAP":"",Ru.bumpMap?"#define USE_BUMPMAP":"",Ru.normalMap?"#define USE_NORMALMAP":"",Ru.normalMap&&Ru.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Ru.normalMap&&Ru.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Ru.clearcoatMap?"#define USE_CLEARCOATMAP":"",Ru.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Ru.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Ru.displacementMap&&Ru.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Ru.specularMap?"#define USE_SPECULARMAP":"",Ru.roughnessMap?"#define USE_ROUGHNESSMAP":"",Ru.metalnessMap?"#define USE_METALNESSMAP":"",Ru.alphaMap?"#define USE_ALPHAMAP":"",Ru.vertexTangents?"#define USE_TANGENT":"",Ru.vertexColors?"#define USE_COLOR":"",Ru.vertexUvs?"#define USE_UV":"",Ru.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Ru.flatShading?"#define FLAT_SHADED":"",Ru.skinning?"#define USE_SKINNING":"",Ru.useVertexTexture?"#define BONE_TEXTURE":"",Ru.morphTargets?"#define USE_MORPHTARGETS":"",Ru.morphNormals&&Ru.flatShading===!1?"#define USE_MORPHNORMALS":"",Ru.doubleSided?"#define DOUBLE_SIDED":"",Ru.flipSided?"#define FLIP_SIDED":"",Ru.shadowMapEnabled?"#define USE_SHADOWMAP":"",Ru.shadowMapEnabled?"#define "+Gu:"",Ru.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Ru.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Ru.logarithmicDepthBuffer&&Ru.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ju=[qu,generatePrecision(Ru),"#define SHADER_NAME "+Ru.shaderName,Ku,Ru.alphaTest?"#define ALPHATEST "+Ru.alphaTest+(Ru.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Qu,Ru.useFog&&Ru.fog?"#define USE_FOG":"",Ru.useFog&&Ru.fogExp2?"#define FOG_EXP2":"",Ru.map?"#define USE_MAP":"",Ru.matcap?"#define USE_MATCAP":"",Ru.envMap?"#define USE_ENVMAP":"",Ru.envMap?"#define "+Uu:"",Ru.envMap?"#define "+Hu:"",Ru.envMap?"#define "+Wu:"",Ru.lightMap?"#define USE_LIGHTMAP":"",Ru.aoMap?"#define USE_AOMAP":"",Ru.emissiveMap?"#define USE_EMISSIVEMAP":"",Ru.bumpMap?"#define USE_BUMPMAP":"",Ru.normalMap?"#define USE_NORMALMAP":"",Ru.normalMap&&Ru.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Ru.normalMap&&Ru.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Ru.clearcoatMap?"#define USE_CLEARCOATMAP":"",Ru.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Ru.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Ru.specularMap?"#define USE_SPECULARMAP":"",Ru.roughnessMap?"#define USE_ROUGHNESSMAP":"",Ru.metalnessMap?"#define USE_METALNESSMAP":"",Ru.alphaMap?"#define USE_ALPHAMAP":"",Ru.sheen?"#define USE_SHEEN":"",Ru.vertexTangents?"#define USE_TANGENT":"",Ru.vertexColors?"#define USE_COLOR":"",Ru.vertexUvs?"#define USE_UV":"",Ru.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Ru.gradientMap?"#define USE_GRADIENTMAP":"",Ru.flatShading?"#define FLAT_SHADED":"",Ru.doubleSided?"#define DOUBLE_SIDED":"",Ru.flipSided?"#define FLIP_SIDED":"",Ru.shadowMapEnabled?"#define USE_SHADOWMAP":"",Ru.shadowMapEnabled?"#define "+Gu:"",Ru.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Ru.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Ru.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Ru.logarithmicDepthBuffer&&Ru.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Ru.extensionShaderTextureLOD||Ru.envMap)&&Ru.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Ru.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Ru.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Ru.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Ru.toneMapping):"",Ru.dithering?"#define DITHERING":"",Ru.outputEncoding||Ru.mapEncoding||Ru.matcapEncoding||Ru.envMapEncoding||Ru.emissiveMapEncoding||Ru.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Ru.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Ru.mapEncoding):"",Ru.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Ru.matcapEncoding):"",Ru.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Ru.envMapEncoding):"",Ru.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Ru.emissiveMapEncoding):"",Ru.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Ru.lightMapEncoding):"",Ru.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Ru.outputEncoding):"",Ru.depthPacking?"#define DEPTH_PACKING "+Ru.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Nu=resolveIncludes(Nu),Nu=replaceLightNums(Nu,Ru),Nu=replaceClippingPlaneNums(Nu,Ru),Vu=resolveIncludes(Vu),Vu=replaceLightNums(Vu,Ru),Vu=replaceClippingPlaneNums(Vu,Ru),Nu=unrollLoops(Nu),Vu=unrollLoops(Vu),Ru.isWebGL2&&!Ru.isRawShaderMaterial){var Xu=!1,Zu=/^\s*#version\s+300\s+es\s*\n/;Ru.isShaderMaterial&&Nu.match(Zu)!==null&&Vu.match(Zu)!==null&&(Xu=!0,Nu=Nu.replace(Zu,""),Vu=Vu.replace(Zu,"")),_c=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_c,Ju=[`#version 300 es
`,"#define varying in",Xu?"":"out highp vec4 pc_fragColor;",Xu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ju}var Xc=_c+Nu,_h=Ju+Vu,ep=WebGLShader(Ou,35633,Xc),np=WebGLShader(Ou,35632,_h);if(Ou.attachShader(Yu,ep),Ou.attachShader(Yu,np),Ru.index0AttributeName!==void 0?Ou.bindAttribLocation(Yu,0,Ru.index0AttributeName):Ru.morphTargets===!0&&Ou.bindAttribLocation(Yu,0,"position"),Ou.linkProgram(Yu),_u.debug.checkShaderErrors){var ap=Ou.getProgramInfoLog(Yu).trim(),lp=Ou.getShaderInfoLog(ep).trim(),up=Ou.getShaderInfoLog(np).trim(),_f=!0,tp=!0;if(Ou.getProgramParameter(Yu,35714)===!1){_f=!1;var ip=getShaderErrors(Ou,ep,"vertex"),rp=getShaderErrors(Ou,np,"fragment");console.error("THREE.WebGLProgram: shader error: ",Ou.getError(),"35715",Ou.getProgramParameter(Yu,35715),"gl.getProgramInfoLog",ap,ip,rp)}else ap!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",ap):(lp===""||up==="")&&(tp=!1);tp&&(this.diagnostics={runnable:_f,programLog:ap,vertexShader:{log:lp,prefix:_c},fragmentShader:{log:up,prefix:Ju}})}Ou.deleteShader(ep),Ou.deleteShader(np);var op;this.getUniforms=function(){return op===void 0&&(op=new WebGLUniforms(Ou,Yu)),op};var sp;return this.getAttributes=function(){return sp===void 0&&(sp=fetchAttributeLocations(Ou,Yu)),sp},this.destroy=function(){Ou.deleteProgram(Yu),this.program=void 0},this.name=Ru.shaderName,this.id=programIdCount++,this.cacheKey=$u,this.usedTimes=1,this.program=Yu,this.vertexShader=ep,this.fragmentShader=np,this}function WebGLPrograms(_u,$u,Ru){var Ou=[],Fu=Ru.isWebGL2,Nu=Ru.logarithmicDepthBuffer,Vu=Ru.floatVertexTextures,Gu=Ru.precision,Uu=Ru.maxVertexUniforms,Hu=Ru.vertexTextures,Wu={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Qu=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function qu(_c,Ju){var Xu;if(Ju){var Zu=ShaderLib[Ju];Xu={name:_c.type,uniforms:UniformsUtils.clone(Zu.uniforms),vertexShader:Zu.vertexShader,fragmentShader:Zu.fragmentShader}}else Xu={name:_c.type,uniforms:_c.uniforms,vertexShader:_c.vertexShader,fragmentShader:_c.fragmentShader};return Xu}function Ku(_c){var Ju=_c.skeleton,Xu=Ju.bones;if(Vu)return 1024;var Zu=Uu,Xc=Math.floor((Zu-20)/4),_h=Math.min(Xc,Xu.length);return _h<Xu.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Xu.length+" bones. This GPU supports "+_h+"."),0):_h}function Yu(_c){var Ju;return _c?_c.isTexture?Ju=_c.encoding:_c.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Ju=_c.texture.encoding):Ju=LinearEncoding,Ju}this.getParameters=function(_c,Ju,Xu,Zu,Xc,_h,ep){var np=Zu.fog,ap=_c.isMeshStandardMaterial?Zu.environment:null,lp=_c.envMap||ap,up=Wu[_c.type],_f=ep.isSkinnedMesh?Ku(ep):0;_c.precision!==null&&(Gu=Ru.getMaxPrecision(_c.precision),Gu!==_c.precision&&console.warn("THREE.WebGLProgram.getParameters:",_c.precision,"not supported, using",Gu,"instead."));var tp=qu(_c,up);_c.onBeforeCompile(tp,_u);var ip=_u.getRenderTarget(),rp={isWebGL2:Fu,shaderID:up,shaderName:tp.name,uniforms:tp.uniforms,vertexShader:tp.vertexShader,fragmentShader:tp.fragmentShader,defines:_c.defines,isRawShaderMaterial:_c.isRawShaderMaterial,isShaderMaterial:_c.isShaderMaterial,precision:Gu,instancing:ep.isInstancedMesh===!0,supportsVertexTextures:Hu,outputEncoding:ip!==null?Yu(ip.texture):_u.outputEncoding,map:!!_c.map,mapEncoding:Yu(_c.map),matcap:!!_c.matcap,matcapEncoding:Yu(_c.matcap),envMap:!!lp,envMapMode:lp&&lp.mapping,envMapEncoding:Yu(lp),envMapCubeUV:!!lp&&(lp.mapping===CubeUVReflectionMapping||lp.mapping===CubeUVRefractionMapping),lightMap:!!_c.lightMap,lightMapEncoding:Yu(_c.lightMap),aoMap:!!_c.aoMap,emissiveMap:!!_c.emissiveMap,emissiveMapEncoding:Yu(_c.emissiveMap),bumpMap:!!_c.bumpMap,normalMap:!!_c.normalMap,objectSpaceNormalMap:_c.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:_c.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!_c.clearcoatMap,clearcoatRoughnessMap:!!_c.clearcoatRoughnessMap,clearcoatNormalMap:!!_c.clearcoatNormalMap,displacementMap:!!_c.displacementMap,roughnessMap:!!_c.roughnessMap,metalnessMap:!!_c.metalnessMap,specularMap:!!_c.specularMap,alphaMap:!!_c.alphaMap,gradientMap:!!_c.gradientMap,sheen:!!_c.sheen,combine:_c.combine,vertexTangents:_c.normalMap&&_c.vertexTangents,vertexColors:_c.vertexColors,vertexUvs:!!_c.map||!!_c.bumpMap||!!_c.normalMap||!!_c.specularMap||!!_c.alphaMap||!!_c.emissiveMap||!!_c.roughnessMap||!!_c.metalnessMap||!!_c.clearcoatMap||!!_c.clearcoatRoughnessMap||!!_c.clearcoatNormalMap||!!_c.displacementMap,uvsVertexOnly:!(!!_c.map||!!_c.bumpMap||!!_c.normalMap||!!_c.specularMap||!!_c.alphaMap||!!_c.emissiveMap||!!_c.roughnessMap||!!_c.metalnessMap||!!_c.clearcoatNormalMap)&&!!_c.displacementMap,fog:!!np,useFog:_c.fog,fogExp2:np&&np.isFogExp2,flatShading:_c.flatShading,sizeAttenuation:_c.sizeAttenuation,logarithmicDepthBuffer:Nu,skinning:_c.skinning&&_f>0,maxBones:_f,useVertexTexture:Vu,morphTargets:_c.morphTargets,morphNormals:_c.morphNormals,maxMorphTargets:_u.maxMorphTargets,maxMorphNormals:_u.maxMorphNormals,numDirLights:Ju.directional.length,numPointLights:Ju.point.length,numSpotLights:Ju.spot.length,numRectAreaLights:Ju.rectArea.length,numHemiLights:Ju.hemi.length,numDirLightShadows:Ju.directionalShadowMap.length,numPointLightShadows:Ju.pointShadowMap.length,numSpotLightShadows:Ju.spotShadowMap.length,numClippingPlanes:Xc,numClipIntersection:_h,dithering:_c.dithering,shadowMapEnabled:_u.shadowMap.enabled&&Xu.length>0,shadowMapType:_u.shadowMap.type,toneMapping:_c.toneMapped?_u.toneMapping:NoToneMapping,physicallyCorrectLights:_u.physicallyCorrectLights,premultipliedAlpha:_c.premultipliedAlpha,alphaTest:_c.alphaTest,doubleSided:_c.side===DoubleSide,flipSided:_c.side===BackSide,depthPacking:_c.depthPacking!==void 0?_c.depthPacking:!1,index0AttributeName:_c.index0AttributeName,extensionDerivatives:_c.extensions&&_c.extensions.derivatives,extensionFragDepth:_c.extensions&&_c.extensions.fragDepth,extensionDrawBuffers:_c.extensions&&_c.extensions.drawBuffers,extensionShaderTextureLOD:_c.extensions&&_c.extensions.shaderTextureLOD,rendererExtensionFragDepth:Fu||$u.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Fu||$u.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Fu||$u.get("EXT_shader_texture_lod")!==null,onBeforeCompile:_c.onBeforeCompile};return rp},this.getProgramCacheKey=function(_c){var Ju=[];if(_c.shaderID?Ju.push(_c.shaderID):(Ju.push(_c.fragmentShader),Ju.push(_c.vertexShader)),_c.defines!==void 0)for(var Xu in _c.defines)Ju.push(Xu),Ju.push(_c.defines[Xu]);if(_c.isRawShaderMaterial===void 0){for(var Zu=0;Zu<Qu.length;Zu++)Ju.push(_c[Qu[Zu]]);Ju.push(_u.outputEncoding),Ju.push(_u.gammaFactor)}return Ju.push(_c.onBeforeCompile.toString()),Ju.join()},this.acquireProgram=function(_c,Ju){for(var Xu,Zu=0,Xc=Ou.length;Zu<Xc;Zu++){var _h=Ou[Zu];if(_h.cacheKey===Ju){Xu=_h,++Xu.usedTimes;break}}return Xu===void 0&&(Xu=new WebGLProgram(_u,Ju,_c),Ou.push(Xu)),Xu},this.releaseProgram=function(_c){if(--_c.usedTimes===0){var Ju=Ou.indexOf(_c);Ou[Ju]=Ou[Ou.length-1],Ou.pop(),_c.destroy()}},this.programs=Ou}function WebGLProperties(){var _u=new WeakMap;function $u(Nu){var Vu=_u.get(Nu);return Vu===void 0&&(Vu={},_u.set(Nu,Vu)),Vu}function Ru(Nu){_u.delete(Nu)}function Ou(Nu,Vu,Gu){_u.get(Nu)[Vu]=Gu}function Fu(){_u=new WeakMap}return{get:$u,remove:Ru,update:Ou,dispose:Fu}}function painterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.program!==$u.program?_u.program.id-$u.program.id:_u.material.id!==$u.material.id?_u.material.id-$u.material.id:_u.z!==$u.z?_u.z-$u.z:_u.id-$u.id}function reversePainterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.z!==$u.z?$u.z-_u.z:_u.id-$u.id}function WebGLRenderList(){var _u=[],$u=0,Ru=[],Ou=[],Fu={id:-1};function Nu(){$u=0,Ru.length=0,Ou.length=0}function Vu(Qu,qu,Ku,Yu,_c,Ju){var Xu=_u[$u];return Xu===void 0?(Xu={id:Qu.id,object:Qu,geometry:qu,material:Ku,program:Ku.program||Fu,groupOrder:Yu,renderOrder:Qu.renderOrder,z:_c,group:Ju},_u[$u]=Xu):(Xu.id=Qu.id,Xu.object=Qu,Xu.geometry=qu,Xu.material=Ku,Xu.program=Ku.program||Fu,Xu.groupOrder=Yu,Xu.renderOrder=Qu.renderOrder,Xu.z=_c,Xu.group=Ju),$u++,Xu}function Gu(Qu,qu,Ku,Yu,_c,Ju){var Xu=Vu(Qu,qu,Ku,Yu,_c,Ju);(Ku.transparent===!0?Ou:Ru).push(Xu)}function Uu(Qu,qu,Ku,Yu,_c,Ju){var Xu=Vu(Qu,qu,Ku,Yu,_c,Ju);(Ku.transparent===!0?Ou:Ru).unshift(Xu)}function Hu(Qu,qu){Ru.length>1&&Ru.sort(Qu||painterSortStable),Ou.length>1&&Ou.sort(qu||reversePainterSortStable)}function Wu(){for(var Qu=$u,qu=_u.length;Qu<qu;Qu++){var Ku=_u[Qu];if(Ku.id===null)break;Ku.id=null,Ku.object=null,Ku.geometry=null,Ku.material=null,Ku.program=null,Ku.group=null}}return{opaque:Ru,transparent:Ou,init:Nu,push:Gu,unshift:Uu,finish:Wu,sort:Hu}}function WebGLRenderLists(){var _u=new WeakMap;function $u(Fu){var Nu=Fu.target;Nu.removeEventListener("dispose",$u),_u.delete(Nu)}function Ru(Fu,Nu){var Vu=_u.get(Fu),Gu;return Vu===void 0?(Gu=new WebGLRenderList,_u.set(Fu,new WeakMap),_u.get(Fu).set(Nu,Gu),Fu.addEventListener("dispose",$u)):(Gu=Vu.get(Nu),Gu===void 0&&(Gu=new WebGLRenderList,Vu.set(Nu,Gu))),Gu}function Ou(){_u=new WeakMap}return{get:Ru,dispose:Ou}}function UniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Ru;switch($u.type){case"DirectionalLight":Ru={direction:new Vector3,color:new Color};break;case"SpotLight":Ru={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Ru={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Ru={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Ru={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _u[$u.id]=Ru,Ru}}}function ShadowUniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Ru;switch($u.type){case"DirectionalLight":Ru={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Ru={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Ru={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _u[$u.id]=Ru,Ru}}}var nextVersion=0;function shadowCastingLightsFirst(_u,$u){return($u.castShadow?1:0)-(_u.castShadow?1:0)}function WebGLLights(){for(var _u=new UniformsCache,$u=ShadowUniformsCache(),Ru={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Ou=0;Ou<9;Ou++)Ru.probe.push(new Vector3);var Fu=new Vector3,Nu=new Matrix4,Vu=new Matrix4;function Gu(Uu,Hu,Wu){for(var Qu=0,qu=0,Ku=0,Yu=0;Yu<9;Yu++)Ru.probe[Yu].set(0,0,0);var _c=0,Ju=0,Xu=0,Zu=0,Xc=0,_h=0,ep=0,np=0,ap=Wu.matrixWorldInverse;Uu.sort(shadowCastingLightsFirst);for(var Yu=0,lp=Uu.length;Yu<lp;Yu++){var up=Uu[Yu],_f=up.color,tp=up.intensity,ip=up.distance,rp=up.shadow&&up.shadow.map?up.shadow.map.texture:null;if(up.isAmbientLight)Qu+=_f.r*tp,qu+=_f.g*tp,Ku+=_f.b*tp;else if(up.isLightProbe)for(var op=0;op<9;op++)Ru.probe[op].addScaledVector(up.sh.coefficients[op],tp);else if(up.isDirectionalLight){var sp=_u.get(up);if(sp.color.copy(up.color).multiplyScalar(up.intensity),sp.direction.setFromMatrixPosition(up.matrixWorld),Fu.setFromMatrixPosition(up.target.matrixWorld),sp.direction.sub(Fu),sp.direction.transformDirection(ap),up.castShadow){var cp=up.shadow,hp=$u.get(up);hp.shadowBias=cp.bias,hp.shadowRadius=cp.radius,hp.shadowMapSize=cp.mapSize,Ru.directionalShadow[_c]=hp,Ru.directionalShadowMap[_c]=rp,Ru.directionalShadowMatrix[_c]=up.shadow.matrix,_h++}Ru.directional[_c]=sp,_c++}else if(up.isSpotLight){var sp=_u.get(up);if(sp.position.setFromMatrixPosition(up.matrixWorld),sp.position.applyMatrix4(ap),sp.color.copy(_f).multiplyScalar(tp),sp.distance=ip,sp.direction.setFromMatrixPosition(up.matrixWorld),Fu.setFromMatrixPosition(up.target.matrixWorld),sp.direction.sub(Fu),sp.direction.transformDirection(ap),sp.coneCos=Math.cos(up.angle),sp.penumbraCos=Math.cos(up.angle*(1-up.penumbra)),sp.decay=up.decay,up.castShadow){var cp=up.shadow,hp=$u.get(up);hp.shadowBias=cp.bias,hp.shadowRadius=cp.radius,hp.shadowMapSize=cp.mapSize,Ru.spotShadow[Xu]=hp,Ru.spotShadowMap[Xu]=rp,Ru.spotShadowMatrix[Xu]=up.shadow.matrix,np++}Ru.spot[Xu]=sp,Xu++}else if(up.isRectAreaLight){var sp=_u.get(up);sp.color.copy(_f).multiplyScalar(tp),sp.position.setFromMatrixPosition(up.matrixWorld),sp.position.applyMatrix4(ap),Vu.identity(),Nu.copy(up.matrixWorld),Nu.premultiply(ap),Vu.extractRotation(Nu),sp.halfWidth.set(up.width*.5,0,0),sp.halfHeight.set(0,up.height*.5,0),sp.halfWidth.applyMatrix4(Vu),sp.halfHeight.applyMatrix4(Vu),Ru.rectArea[Zu]=sp,Zu++}else if(up.isPointLight){var sp=_u.get(up);if(sp.position.setFromMatrixPosition(up.matrixWorld),sp.position.applyMatrix4(ap),sp.color.copy(up.color).multiplyScalar(up.intensity),sp.distance=up.distance,sp.decay=up.decay,up.castShadow){var cp=up.shadow,hp=$u.get(up);hp.shadowBias=cp.bias,hp.shadowRadius=cp.radius,hp.shadowMapSize=cp.mapSize,hp.shadowCameraNear=cp.camera.near,hp.shadowCameraFar=cp.camera.far,Ru.pointShadow[Ju]=hp,Ru.pointShadowMap[Ju]=rp,Ru.pointShadowMatrix[Ju]=up.shadow.matrix,ep++}Ru.point[Ju]=sp,Ju++}else if(up.isHemisphereLight){var sp=_u.get(up);sp.direction.setFromMatrixPosition(up.matrixWorld),sp.direction.transformDirection(ap),sp.direction.normalize(),sp.skyColor.copy(up.color).multiplyScalar(tp),sp.groundColor.copy(up.groundColor).multiplyScalar(tp),Ru.hemi[Xc]=sp,Xc++}}Ru.ambient[0]=Qu,Ru.ambient[1]=qu,Ru.ambient[2]=Ku;var dp=Ru.hash;(dp.directionalLength!==_c||dp.pointLength!==Ju||dp.spotLength!==Xu||dp.rectAreaLength!==Zu||dp.hemiLength!==Xc||dp.numDirectionalShadows!==_h||dp.numPointShadows!==ep||dp.numSpotShadows!==np)&&(Ru.directional.length=_c,Ru.spot.length=Xu,Ru.rectArea.length=Zu,Ru.point.length=Ju,Ru.hemi.length=Xc,Ru.directionalShadow.length=_h,Ru.directionalShadowMap.length=_h,Ru.pointShadow.length=ep,Ru.pointShadowMap.length=ep,Ru.spotShadow.length=np,Ru.spotShadowMap.length=np,Ru.directionalShadowMatrix.length=_h,Ru.pointShadowMatrix.length=ep,Ru.spotShadowMatrix.length=np,dp.directionalLength=_c,dp.pointLength=Ju,dp.spotLength=Xu,dp.rectAreaLength=Zu,dp.hemiLength=Xc,dp.numDirectionalShadows=_h,dp.numPointShadows=ep,dp.numSpotShadows=np,Ru.version=nextVersion++)}return{setup:Gu,state:Ru}}function WebGLRenderState(){var _u=new WebGLLights,$u=[],Ru=[];function Ou(){$u.length=0,Ru.length=0}function Fu(Uu){$u.push(Uu)}function Nu(Uu){Ru.push(Uu)}function Vu(Uu){_u.setup($u,Ru,Uu)}var Gu={lightsArray:$u,shadowsArray:Ru,lights:_u};return{init:Ou,state:Gu,setupLights:Vu,pushLight:Fu,pushShadow:Nu}}function WebGLRenderStates(){var _u=new WeakMap;function $u(Fu){var Nu=Fu.target;Nu.removeEventListener("dispose",$u),_u.delete(Nu)}function Ru(Fu,Nu){var Vu;return _u.has(Fu)===!1?(Vu=new WebGLRenderState,_u.set(Fu,new WeakMap),_u.get(Fu).set(Nu,Vu),Fu.addEventListener("dispose",$u)):_u.get(Fu).has(Nu)===!1?(Vu=new WebGLRenderState,_u.get(Fu).set(Nu,Vu)):Vu=_u.get(Fu).get(Nu),Vu}function Ou(){_u=new WeakMap}return{get:Ru,dispose:Ou}}function MeshDepthMaterial(_u){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(_u)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.depthPacking=_u.depthPacking,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this};function MeshDistanceMaterial(_u){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(_u)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.referencePosition.copy(_u.referencePosition),this.nearDistance=_u.nearDistance,this.farDistance=_u.farDistance,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(_u,$u,Ru){var Ou=new Frustum,Fu=new Vector2,Nu=new Vector2,Vu=new Vector4,Gu=[],Uu=[],Hu={},Wu={0:BackSide,1:FrontSide,2:DoubleSide},Qu=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),qu=Qu.clone();qu.defines.HORIZONAL_PASS=1;var Ku=new BufferGeometry;Ku.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Yu=new Mesh(Ku,Qu),_c=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(ep,np,ap){if(_c.enabled!==!1&&!(_c.autoUpdate===!1&&_c.needsUpdate===!1)&&ep.length!==0){var lp=_u.getRenderTarget(),up=_u.getActiveCubeFace(),_f=_u.getActiveMipmapLevel(),tp=_u.state;tp.setBlending(NoBlending),tp.buffers.color.setClear(1,1,1,1),tp.buffers.depth.setTest(!0),tp.setScissorTest(!1);for(var ip=0,rp=ep.length;ip<rp;ip++){var op=ep[ip],sp=op.shadow;if(sp===void 0){console.warn("THREE.WebGLShadowMap:",op,"has no shadow.");continue}Fu.copy(sp.mapSize);var cp=sp.getFrameExtents();if(Fu.multiply(cp),Nu.copy(sp.mapSize),(Fu.x>Ru||Fu.y>Ru)&&(Fu.x>Ru&&(Nu.x=Math.floor(Ru/cp.x),Fu.x=Nu.x*cp.x,sp.mapSize.x=Nu.x),Fu.y>Ru&&(Nu.y=Math.floor(Ru/cp.y),Fu.y=Nu.y*cp.y,sp.mapSize.y=Nu.y)),sp.map===null&&!sp.isPointLightShadow&&this.type===VSMShadowMap){var hp={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};sp.map=new WebGLRenderTarget(Fu.x,Fu.y,hp),sp.map.texture.name=op.name+".shadowMap",sp.mapPass=new WebGLRenderTarget(Fu.x,Fu.y,hp),sp.camera.updateProjectionMatrix()}if(sp.map===null){var hp={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};sp.map=new WebGLRenderTarget(Fu.x,Fu.y,hp),sp.map.texture.name=op.name+".shadowMap",sp.camera.updateProjectionMatrix()}_u.setRenderTarget(sp.map),_u.clear();for(var dp=sp.getViewportCount(),xp=0;xp<dp;xp++){var bp=sp.getViewport(xp);Vu.set(Nu.x*bp.x,Nu.y*bp.y,Nu.x*bp.z,Nu.y*bp.w),tp.viewport(Vu),sp.updateMatrices(op,xp),Ou=sp.getFrustum(),_h(np,ap,sp.camera,op,this.type)}!sp.isPointLightShadow&&this.type===VSMShadowMap&&Ju(sp,ap)}_c.needsUpdate=!1,_u.setRenderTarget(lp,up,_f)}};function Ju(ep,np){var ap=$u.update(Yu);Qu.uniforms.shadow_pass.value=ep.map.texture,Qu.uniforms.resolution.value=ep.mapSize,Qu.uniforms.radius.value=ep.radius,_u.setRenderTarget(ep.mapPass),_u.clear(),_u.renderBufferDirect(np,null,ap,Qu,Yu,null),qu.uniforms.shadow_pass.value=ep.mapPass.texture,qu.uniforms.resolution.value=ep.mapSize,qu.uniforms.radius.value=ep.radius,_u.setRenderTarget(ep.map),_u.clear(),_u.renderBufferDirect(np,null,ap,qu,Yu,null)}function Xu(ep,np,ap){var lp=ep<<0|np<<1|ap<<2,up=Gu[lp];return up===void 0&&(up=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:ep,skinning:np}),Gu[lp]=up),up}function Zu(ep,np,ap){var lp=ep<<0|np<<1|ap<<2,up=Uu[lp];return up===void 0&&(up=new MeshDistanceMaterial({morphTargets:ep,skinning:np}),Uu[lp]=up),up}function Xc(ep,np,ap,lp,up,_f,tp){var ip=null,rp=Xu,op=ep.customDepthMaterial;if(lp.isPointLight===!0&&(rp=Zu,op=ep.customDistanceMaterial),op===void 0){var sp=!1;ap.morphTargets===!0&&(sp=np.morphAttributes&&np.morphAttributes.position&&np.morphAttributes.position.length>0);var cp=!1;ep.isSkinnedMesh===!0&&(ap.skinning===!0?cp=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ep));var hp=ep.isInstancedMesh===!0;ip=rp(sp,cp,hp)}else ip=op;if(_u.localClippingEnabled&&ap.clipShadows===!0&&ap.clippingPlanes.length!==0){var dp=ip.uuid,xp=ap.uuid,bp=Hu[dp];bp===void 0&&(bp={},Hu[dp]=bp);var Rp=bp[xp];Rp===void 0&&(Rp=ip.clone(),bp[xp]=Rp),ip=Rp}return ip.visible=ap.visible,ip.wireframe=ap.wireframe,tp===VSMShadowMap?ip.side=ap.shadowSide!==null?ap.shadowSide:ap.side:ip.side=ap.shadowSide!==null?ap.shadowSide:Wu[ap.side],ip.clipShadows=ap.clipShadows,ip.clippingPlanes=ap.clippingPlanes,ip.clipIntersection=ap.clipIntersection,ip.wireframeLinewidth=ap.wireframeLinewidth,ip.linewidth=ap.linewidth,lp.isPointLight===!0&&ip.isMeshDistanceMaterial===!0&&(ip.referencePosition.setFromMatrixPosition(lp.matrixWorld),ip.nearDistance=up,ip.farDistance=_f),ip}function _h(ep,np,ap,lp,up){if(ep.visible!==!1){var _f=ep.layers.test(np.layers);if(_f&&(ep.isMesh||ep.isLine||ep.isPoints)&&(ep.castShadow||ep.receiveShadow&&up===VSMShadowMap)&&(!ep.frustumCulled||Ou.intersectsObject(ep))){ep.modelViewMatrix.multiplyMatrices(ap.matrixWorldInverse,ep.matrixWorld);var tp=$u.update(ep),ip=ep.material;if(Array.isArray(ip))for(var rp=tp.groups,op=0,sp=rp.length;op<sp;op++){var cp=rp[op],hp=ip[cp.materialIndex];if(hp&&hp.visible){var dp=Xc(ep,tp,hp,lp,ap.near,ap.far,up);_u.renderBufferDirect(ap,null,tp,dp,ep,cp)}}else if(ip.visible){var dp=Xc(ep,tp,ip,lp,ap.near,ap.far,up);_u.renderBufferDirect(ap,null,tp,dp,ep,null)}}for(var xp=ep.children,bp=0,Rp=xp.length;bp<Rp;bp++)_h(xp[bp],np,ap,lp,up)}}}function WebGLState(_u,$u,Ru){var Ou=Ru.isWebGL2;function Fu(){var Bp=!1,rm=new Vector4,lm=null,dm=new Vector4(0,0,0,0);return{setMask:function(hm){lm!==hm&&!Bp&&(_u.colorMask(hm,hm,hm,hm),lm=hm)},setLocked:function(hm){Bp=hm},setClear:function(hm,ym,Mm,Em,Dm){Dm===!0&&(hm*=Em,ym*=Em,Mm*=Em),rm.set(hm,ym,Mm,Em),dm.equals(rm)===!1&&(_u.clearColor(hm,ym,Mm,Em),dm.copy(rm))},reset:function(){Bp=!1,lm=null,dm.set(-1,0,0,0)}}}function Nu(){var Bp=!1,rm=null,lm=null,dm=null;return{setTest:function(hm){hm?wp(2929):Ap(2929)},setMask:function(hm){rm!==hm&&!Bp&&(_u.depthMask(hm),rm=hm)},setFunc:function(hm){if(lm!==hm){if(hm)switch(hm){case NeverDepth:_u.depthFunc(512);break;case AlwaysDepth:_u.depthFunc(519);break;case LessDepth:_u.depthFunc(513);break;case LessEqualDepth:_u.depthFunc(515);break;case EqualDepth:_u.depthFunc(514);break;case GreaterEqualDepth:_u.depthFunc(518);break;case GreaterDepth:_u.depthFunc(516);break;case NotEqualDepth:_u.depthFunc(517);break;default:_u.depthFunc(515)}else _u.depthFunc(515);lm=hm}},setLocked:function(hm){Bp=hm},setClear:function(hm){dm!==hm&&(_u.clearDepth(hm),dm=hm)},reset:function(){Bp=!1,rm=null,lm=null,dm=null}}}function Vu(){var Bp=!1,rm=null,lm=null,dm=null,hm=null,ym=null,Mm=null,Em=null,Dm=null;return{setTest:function(Sm){Bp||(Sm?wp(2960):Ap(2960))},setMask:function(Sm){rm!==Sm&&!Bp&&(_u.stencilMask(Sm),rm=Sm)},setFunc:function(Sm,Bm,Rm){(lm!==Sm||dm!==Bm||hm!==Rm)&&(_u.stencilFunc(Sm,Bm,Rm),lm=Sm,dm=Bm,hm=Rm)},setOp:function(Sm,Bm,Rm){(ym!==Sm||Mm!==Bm||Em!==Rm)&&(_u.stencilOp(Sm,Bm,Rm),ym=Sm,Mm=Bm,Em=Rm)},setLocked:function(Sm){Bp=Sm},setClear:function(Sm){Dm!==Sm&&(_u.clearStencil(Sm),Dm=Sm)},reset:function(){Bp=!1,rm=null,lm=null,dm=null,hm=null,ym=null,Mm=null,Em=null,Dm=null}}}var Gu=new Fu,Uu=new Nu,Hu=new Vu,Wu=_u.getParameter(34921),Qu=new Uint8Array(Wu),qu=new Uint8Array(Wu),Ku=new Uint8Array(Wu),Yu={},_c=null,Ju=null,Xu=null,Zu=null,Xc=null,_h=null,ep=null,np=null,ap=null,lp=!1,up=null,_f=null,tp=null,ip=null,rp=null,op=_u.getParameter(35661),sp=!1,cp=0,hp=_u.getParameter(7938);hp.indexOf("WebGL")!==-1?(cp=parseFloat(/^WebGL\ ([0-9])/.exec(hp)[1]),sp=cp>=1):hp.indexOf("OpenGL ES")!==-1&&(cp=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(hp)[1]),sp=cp>=2);var dp=null,xp={},bp=new Vector4,Rp=new Vector4;function Tp(Bp,rm,lm){var dm=new Uint8Array(4),hm=_u.createTexture();_u.bindTexture(Bp,hm),_u.texParameteri(Bp,10241,9728),_u.texParameteri(Bp,10240,9728);for(var ym=0;ym<lm;ym++)_u.texImage2D(rm+ym,0,6408,1,1,0,6408,5121,dm);return hm}var Up={};Up[3553]=Tp(3553,3553,1),Up[34067]=Tp(34067,34069,6),Gu.setClear(0,0,0,1),Uu.setClear(1),Hu.setClear(0),wp(2929),Uu.setFunc(LessEqualDepth),fp(!1),yp(CullFaceBack),wp(2884),jp(NoBlending);function Ip(){for(var Bp=0,rm=Qu.length;Bp<rm;Bp++)Qu[Bp]=0}function Vp(Bp){Lp(Bp,0)}function Lp(Bp,rm){if(Qu[Bp]=1,qu[Bp]===0&&(_u.enableVertexAttribArray(Bp),qu[Bp]=1),Ku[Bp]!==rm){var lm=Ou?_u:$u.get("ANGLE_instanced_arrays");lm[Ou?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Bp,rm),Ku[Bp]=rm}}function mp(){for(var Bp=0,rm=qu.length;Bp!==rm;++Bp)qu[Bp]!==Qu[Bp]&&(_u.disableVertexAttribArray(Bp),qu[Bp]=0)}function pp(Bp,rm,lm,dm,hm,ym){Ou===!0&&(lm===5124||lm===5125)?_u.vertexAttribIPointer(Bp,rm,lm,dm,hm,ym):_u.vertexAttribPointer(Bp,rm,lm,dm,hm,ym)}function wp(Bp){Yu[Bp]!==!0&&(_u.enable(Bp),Yu[Bp]=!0)}function Ap(Bp){Yu[Bp]!==!1&&(_u.disable(Bp),Yu[Bp]=!1)}function Sp(Bp){return _c!==Bp?(_u.useProgram(Bp),_c=Bp,!0):!1}var Cp={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Ou)Cp[MinEquation]=32775,Cp[MaxEquation]=32776;else{var $p=$u.get("EXT_blend_minmax");$p!==null&&(Cp[MinEquation]=$p.MIN_EXT,Cp[MaxEquation]=$p.MAX_EXT)}var Fp={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function jp(Bp,rm,lm,dm,hm,ym,Mm,Em){if(Bp===NoBlending){Ju&&(Ap(3042),Ju=!1);return}if(Ju||(wp(3042),Ju=!0),Bp!==CustomBlending){if(Bp!==Xu||Em!==lp){if((Zu!==AddEquation||ep!==AddEquation)&&(_u.blendEquation(32774),Zu=AddEquation,ep=AddEquation),Em)switch(Bp){case NormalBlending:_u.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:_u.blendFunc(1,1);break;case SubtractiveBlending:_u.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:_u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bp);break}else switch(Bp){case NormalBlending:_u.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:_u.blendFunc(770,1);break;case SubtractiveBlending:_u.blendFunc(0,769);break;case MultiplyBlending:_u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bp);break}Xc=null,_h=null,np=null,ap=null,Xu=Bp,lp=Em}return}hm=hm||rm,ym=ym||lm,Mm=Mm||dm,(rm!==Zu||hm!==ep)&&(_u.blendEquationSeparate(Cp[rm],Cp[hm]),Zu=rm,ep=hm),(lm!==Xc||dm!==_h||ym!==np||Mm!==ap)&&(_u.blendFuncSeparate(Fp[lm],Fp[dm],Fp[ym],Fp[Mm]),Xc=lm,_h=dm,np=ym,ap=Mm),Xu=Bp,lp=null}function kp(Bp,rm){Bp.side===DoubleSide?Ap(2884):wp(2884);var lm=Bp.side===BackSide;rm&&(lm=!lm),fp(lm),Bp.blending===NormalBlending&&Bp.transparent===!1?jp(NoBlending):jp(Bp.blending,Bp.blendEquation,Bp.blendSrc,Bp.blendDst,Bp.blendEquationAlpha,Bp.blendSrcAlpha,Bp.blendDstAlpha,Bp.premultipliedAlpha),Uu.setFunc(Bp.depthFunc),Uu.setTest(Bp.depthTest),Uu.setMask(Bp.depthWrite),Gu.setMask(Bp.colorWrite);var dm=Bp.stencilWrite;Hu.setTest(dm),dm&&(Hu.setMask(Bp.stencilWriteMask),Hu.setFunc(Bp.stencilFunc,Bp.stencilRef,Bp.stencilFuncMask),Hu.setOp(Bp.stencilFail,Bp.stencilZFail,Bp.stencilZPass)),Np(Bp.polygonOffset,Bp.polygonOffsetFactor,Bp.polygonOffsetUnits)}function fp(Bp){up!==Bp&&(Bp?_u.frontFace(2304):_u.frontFace(2305),up=Bp)}function yp(Bp){Bp!==CullFaceNone?(wp(2884),Bp!==_f&&(Bp===CullFaceBack?_u.cullFace(1029):Bp===CullFaceFront?_u.cullFace(1028):_u.cullFace(1032))):Ap(2884),_f=Bp}function Gp(Bp){Bp!==tp&&(sp&&_u.lineWidth(Bp),tp=Bp)}function Np(Bp,rm,lm){Bp?(wp(32823),(ip!==rm||rp!==lm)&&(_u.polygonOffset(rm,lm),ip=rm,rp=lm)):Ap(32823)}function Xp(Bp){Bp?wp(3089):Ap(3089)}function Qp(Bp){Bp===void 0&&(Bp=33984+op-1),dp!==Bp&&(_u.activeTexture(Bp),dp=Bp)}function Zp(Bp,rm){dp===null&&Qp();var lm=xp[dp];lm===void 0&&(lm={type:void 0,texture:void 0},xp[dp]=lm),(lm.type!==Bp||lm.texture!==rm)&&(_u.bindTexture(Bp,rm||Up[Bp]),lm.type=Bp,lm.texture=rm)}function im(){var Bp=xp[dp];Bp!==void 0&&Bp.type!==void 0&&(_u.bindTexture(Bp.type,null),Bp.type=void 0,Bp.texture=void 0)}function nm(){try{_u.compressedTexImage2D.apply(_u,arguments)}catch(Bp){console.error("THREE.WebGLState:",Bp)}}function cm(){try{_u.texImage2D.apply(_u,arguments)}catch(Bp){console.error("THREE.WebGLState:",Bp)}}function em(){try{_u.texImage3D.apply(_u,arguments)}catch(Bp){console.error("THREE.WebGLState:",Bp)}}function om(Bp){bp.equals(Bp)===!1&&(_u.scissor(Bp.x,Bp.y,Bp.z,Bp.w),bp.copy(Bp))}function tm(Bp){Rp.equals(Bp)===!1&&(_u.viewport(Bp.x,Bp.y,Bp.z,Bp.w),Rp.copy(Bp))}function sm(){for(var Bp=0;Bp<qu.length;Bp++)qu[Bp]===1&&(_u.disableVertexAttribArray(Bp),qu[Bp]=0);Yu={},dp=null,xp={},_c=null,Xu=null,up=null,_f=null,Gu.reset(),Uu.reset(),Hu.reset()}return{buffers:{color:Gu,depth:Uu,stencil:Hu},initAttributes:Ip,enableAttribute:Vp,enableAttributeAndDivisor:Lp,disableUnusedAttributes:mp,vertexAttribPointer:pp,enable:wp,disable:Ap,useProgram:Sp,setBlending:jp,setMaterial:kp,setFlipSided:fp,setCullFace:yp,setLineWidth:Gp,setPolygonOffset:Np,setScissorTest:Xp,activeTexture:Qp,bindTexture:Zp,unbindTexture:im,compressedTexImage2D:nm,texImage2D:cm,texImage3D:em,scissor:om,viewport:tm,reset:sm}}function WebGLTextures(_u,$u,Ru,Ou,Fu,Nu,Vu){var Gu=Fu.isWebGL2,Uu=Fu.maxTextures,Hu=Fu.maxCubemapSize,Wu=Fu.maxTextureSize,Qu=Fu.maxSamples,qu=new WeakMap,Ku,Yu=!1;try{Yu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _c(fp,yp){return Yu?new OffscreenCanvas(fp,yp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Ju(fp,yp,Gp,Np){var Xp=1;if((fp.width>Np||fp.height>Np)&&(Xp=Np/Math.max(fp.width,fp.height)),Xp<1||yp===!0)if(typeof HTMLImageElement!="undefined"&&fp instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&fp instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&fp instanceof ImageBitmap){var Qp=yp?MathUtils.floorPowerOfTwo:Math.floor,Zp=Qp(Xp*fp.width),im=Qp(Xp*fp.height);Ku===void 0&&(Ku=_c(Zp,im));var nm=Gp?_c(Zp,im):Ku;nm.width=Zp,nm.height=im;var cm=nm.getContext("2d");return cm.drawImage(fp,0,0,Zp,im),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fp.width+"x"+fp.height+") to ("+Zp+"x"+im+")."),nm}else return"data"in fp&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fp.width+"x"+fp.height+")."),fp;return fp}function Xu(fp){return MathUtils.isPowerOfTwo(fp.width)&&MathUtils.isPowerOfTwo(fp.height)}function Zu(fp){return Gu?!1:fp.wrapS!==ClampToEdgeWrapping||fp.wrapT!==ClampToEdgeWrapping||fp.minFilter!==NearestFilter&&fp.minFilter!==LinearFilter}function Xc(fp,yp){return fp.generateMipmaps&&yp&&fp.minFilter!==NearestFilter&&fp.minFilter!==LinearFilter}function _h(fp,yp,Gp,Np){_u.generateMipmap(fp);var Xp=Ou.get(yp);Xp.__maxMipLevel=Math.log(Math.max(Gp,Np))*Math.LOG2E}function ep(fp,yp,Gp){if(Gu===!1)return yp;if(fp!==null){if(_u[fp]!==void 0)return _u[fp];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fp+"'")}var Np=yp;return yp===6403&&(Gp===5126&&(Np=33326),Gp===5131&&(Np=33325),Gp===5121&&(Np=33321)),yp===6407&&(Gp===5126&&(Np=34837),Gp===5131&&(Np=34843),Gp===5121&&(Np=32849)),yp===6408&&(Gp===5126&&(Np=34836),Gp===5131&&(Np=34842),Gp===5121&&(Np=32856)),(Np===33325||Np===33326||Np===34842||Np===34836)&&$u.get("EXT_color_buffer_float"),Np}function np(fp){return fp===NearestFilter||fp===NearestMipmapNearestFilter||fp===NearestMipmapLinearFilter?9728:9729}function ap(fp){var yp=fp.target;yp.removeEventListener("dispose",ap),up(yp),yp.isVideoTexture&&qu.delete(yp),Vu.memory.textures--}function lp(fp){var yp=fp.target;yp.removeEventListener("dispose",lp),_f(yp),Vu.memory.textures--}function up(fp){var yp=Ou.get(fp);yp.__webglInit!==void 0&&(_u.deleteTexture(yp.__webglTexture),Ou.remove(fp))}function _f(fp){var yp=Ou.get(fp),Gp=Ou.get(fp.texture);if(!!fp){if(Gp.__webglTexture!==void 0&&_u.deleteTexture(Gp.__webglTexture),fp.depthTexture&&fp.depthTexture.dispose(),fp.isWebGLCubeRenderTarget)for(var Np=0;Np<6;Np++)_u.deleteFramebuffer(yp.__webglFramebuffer[Np]),yp.__webglDepthbuffer&&_u.deleteRenderbuffer(yp.__webglDepthbuffer[Np]);else _u.deleteFramebuffer(yp.__webglFramebuffer),yp.__webglDepthbuffer&&_u.deleteRenderbuffer(yp.__webglDepthbuffer),yp.__webglMultisampledFramebuffer&&_u.deleteFramebuffer(yp.__webglMultisampledFramebuffer),yp.__webglColorRenderbuffer&&_u.deleteRenderbuffer(yp.__webglColorRenderbuffer),yp.__webglDepthRenderbuffer&&_u.deleteRenderbuffer(yp.__webglDepthRenderbuffer);Ou.remove(fp.texture),Ou.remove(fp)}}var tp=0;function ip(){tp=0}function rp(){var fp=tp;return fp>=Uu&&console.warn("THREE.WebGLTextures: Trying to use "+fp+" texture units while this GPU supports only "+Uu),tp+=1,fp}function op(fp,yp){var Gp=Ou.get(fp);if(fp.isVideoTexture&&Cp(fp),fp.version>0&&Gp.__version!==fp.version){var Np=fp.image;if(Np===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Np.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Up(Gp,fp,yp);return}}Ru.activeTexture(33984+yp),Ru.bindTexture(3553,Gp.__webglTexture)}function sp(fp,yp){var Gp=Ou.get(fp);if(fp.version>0&&Gp.__version!==fp.version){Up(Gp,fp,yp);return}Ru.activeTexture(33984+yp),Ru.bindTexture(35866,Gp.__webglTexture)}function cp(fp,yp){var Gp=Ou.get(fp);if(fp.version>0&&Gp.__version!==fp.version){Up(Gp,fp,yp);return}Ru.activeTexture(33984+yp),Ru.bindTexture(32879,Gp.__webglTexture)}function hp(fp,yp){if(fp.image.length===6){var Gp=Ou.get(fp);if(fp.version>0&&Gp.__version!==fp.version){Tp(Gp,fp),Ru.activeTexture(33984+yp),Ru.bindTexture(34067,Gp.__webglTexture),_u.pixelStorei(37440,fp.flipY);for(var Np=fp&&(fp.isCompressedTexture||fp.image[0].isCompressedTexture),Xp=fp.image[0]&&fp.image[0].isDataTexture,Qp=[],Zp=0;Zp<6;Zp++)!Np&&!Xp?Qp[Zp]=Ju(fp.image[Zp],!1,!0,Hu):Qp[Zp]=Xp?fp.image[Zp].image:fp.image[Zp];var im=Qp[0],nm=Xu(im)||Gu,cm=Nu.convert(fp.format),em=Nu.convert(fp.type),om=ep(fp.internalFormat,cm,em);Rp(34067,fp,nm);var tm;if(Np){for(var Zp=0;Zp<6;Zp++){tm=Qp[Zp].mipmaps;for(var sm=0;sm<tm.length;sm++){var Bp=tm[sm];fp.format!==RGBAFormat&&fp.format!==RGBFormat?cm!==null?Ru.compressedTexImage2D(34069+Zp,sm,om,Bp.width,Bp.height,0,Bp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ru.texImage2D(34069+Zp,sm,om,Bp.width,Bp.height,0,cm,em,Bp.data)}}Gp.__maxMipLevel=tm.length-1}else{tm=fp.mipmaps;for(var Zp=0;Zp<6;Zp++)if(Xp){Ru.texImage2D(34069+Zp,0,om,Qp[Zp].width,Qp[Zp].height,0,cm,em,Qp[Zp].data);for(var sm=0;sm<tm.length;sm++){var Bp=tm[sm],rm=Bp.image[Zp].image;Ru.texImage2D(34069+Zp,sm+1,om,rm.width,rm.height,0,cm,em,rm.data)}}else{Ru.texImage2D(34069+Zp,0,om,cm,em,Qp[Zp]);for(var sm=0;sm<tm.length;sm++){var Bp=tm[sm];Ru.texImage2D(34069+Zp,sm+1,om,cm,em,Bp.image[Zp])}}Gp.__maxMipLevel=tm.length}Xc(fp,nm)&&_h(34067,fp,im.width,im.height),Gp.__version=fp.version,fp.onUpdate&&fp.onUpdate(fp)}else Ru.activeTexture(33984+yp),Ru.bindTexture(34067,Gp.__webglTexture)}}function dp(fp,yp){Ru.activeTexture(33984+yp),Ru.bindTexture(34067,Ou.get(fp).__webglTexture)}var xp={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},bp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Rp(fp,yp,Gp){Gp?(_u.texParameteri(fp,10242,xp[yp.wrapS]),_u.texParameteri(fp,10243,xp[yp.wrapT]),(fp===32879||fp===35866)&&_u.texParameteri(fp,32882,xp[yp.wrapR]),_u.texParameteri(fp,10240,bp[yp.magFilter]),_u.texParameteri(fp,10241,bp[yp.minFilter])):(_u.texParameteri(fp,10242,33071),_u.texParameteri(fp,10243,33071),(fp===32879||fp===35866)&&_u.texParameteri(fp,32882,33071),(yp.wrapS!==ClampToEdgeWrapping||yp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_u.texParameteri(fp,10240,np(yp.magFilter)),_u.texParameteri(fp,10241,np(yp.minFilter)),yp.minFilter!==NearestFilter&&yp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Np=$u.get("EXT_texture_filter_anisotropic");if(Np){if(yp.type===FloatType&&$u.get("OES_texture_float_linear")===null||yp.type===HalfFloatType&&(Gu||$u.get("OES_texture_half_float_linear"))===null)return;(yp.anisotropy>1||Ou.get(yp).__currentAnisotropy)&&(_u.texParameterf(fp,Np.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(yp.anisotropy,Fu.getMaxAnisotropy())),Ou.get(yp).__currentAnisotropy=yp.anisotropy)}}function Tp(fp,yp){fp.__webglInit===void 0&&(fp.__webglInit=!0,yp.addEventListener("dispose",ap),fp.__webglTexture=_u.createTexture(),Vu.memory.textures++)}function Up(fp,yp,Gp){var Np=3553;yp.isDataTexture2DArray&&(Np=35866),yp.isDataTexture3D&&(Np=32879),Tp(fp,yp),Ru.activeTexture(33984+Gp),Ru.bindTexture(Np,fp.__webglTexture),_u.pixelStorei(37440,yp.flipY),_u.pixelStorei(37441,yp.premultiplyAlpha),_u.pixelStorei(3317,yp.unpackAlignment);var Xp=Zu(yp)&&Xu(yp.image)===!1,Qp=Ju(yp.image,Xp,!1,Wu),Zp=Xu(Qp)||Gu,im=Nu.convert(yp.format),nm=Nu.convert(yp.type),cm=ep(yp.internalFormat,im,nm);Rp(Np,yp,Zp);var em,om=yp.mipmaps;if(yp.isDepthTexture)cm=6402,Gu?yp.type===FloatType?cm=36012:yp.type===UnsignedIntType?cm=33190:yp.type===UnsignedInt248Type?cm=35056:cm=33189:yp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),yp.format===DepthFormat&&cm===6402&&yp.type!==UnsignedShortType&&yp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),yp.type=UnsignedShortType,nm=Nu.convert(yp.type)),yp.format===DepthStencilFormat&&cm===6402&&(cm=34041,yp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),yp.type=UnsignedInt248Type,nm=Nu.convert(yp.type))),Ru.texImage2D(3553,0,cm,Qp.width,Qp.height,0,im,nm,null);else if(yp.isDataTexture)if(om.length>0&&Zp){for(var tm=0,sm=om.length;tm<sm;tm++)em=om[tm],Ru.texImage2D(3553,tm,cm,em.width,em.height,0,im,nm,em.data);yp.generateMipmaps=!1,fp.__maxMipLevel=om.length-1}else Ru.texImage2D(3553,0,cm,Qp.width,Qp.height,0,im,nm,Qp.data),fp.__maxMipLevel=0;else if(yp.isCompressedTexture){for(var tm=0,sm=om.length;tm<sm;tm++)em=om[tm],yp.format!==RGBAFormat&&yp.format!==RGBFormat?im!==null?Ru.compressedTexImage2D(3553,tm,cm,em.width,em.height,0,em.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ru.texImage2D(3553,tm,cm,em.width,em.height,0,im,nm,em.data);fp.__maxMipLevel=om.length-1}else if(yp.isDataTexture2DArray)Ru.texImage3D(35866,0,cm,Qp.width,Qp.height,Qp.depth,0,im,nm,Qp.data),fp.__maxMipLevel=0;else if(yp.isDataTexture3D)Ru.texImage3D(32879,0,cm,Qp.width,Qp.height,Qp.depth,0,im,nm,Qp.data),fp.__maxMipLevel=0;else if(om.length>0&&Zp){for(var tm=0,sm=om.length;tm<sm;tm++)em=om[tm],Ru.texImage2D(3553,tm,cm,im,nm,em);yp.generateMipmaps=!1,fp.__maxMipLevel=om.length-1}else Ru.texImage2D(3553,0,cm,im,nm,Qp),fp.__maxMipLevel=0;Xc(yp,Zp)&&_h(Np,yp,Qp.width,Qp.height),fp.__version=yp.version,yp.onUpdate&&yp.onUpdate(yp)}function Ip(fp,yp,Gp,Np){var Xp=Nu.convert(yp.texture.format),Qp=Nu.convert(yp.texture.type),Zp=ep(yp.texture.internalFormat,Xp,Qp);Ru.texImage2D(Np,0,Zp,yp.width,yp.height,0,Xp,Qp,null),_u.bindFramebuffer(36160,fp),_u.framebufferTexture2D(36160,Gp,Np,Ou.get(yp.texture).__webglTexture,0),_u.bindFramebuffer(36160,null)}function Vp(fp,yp,Gp){if(_u.bindRenderbuffer(36161,fp),yp.depthBuffer&&!yp.stencilBuffer){var Np=33189;if(Gp){var Xp=yp.depthTexture;Xp&&Xp.isDepthTexture&&(Xp.type===FloatType?Np=36012:Xp.type===UnsignedIntType&&(Np=33190));var Qp=Sp(yp);_u.renderbufferStorageMultisample(36161,Qp,Np,yp.width,yp.height)}else _u.renderbufferStorage(36161,Np,yp.width,yp.height);_u.framebufferRenderbuffer(36160,36096,36161,fp)}else if(yp.depthBuffer&&yp.stencilBuffer){if(Gp){var Qp=Sp(yp);_u.renderbufferStorageMultisample(36161,Qp,35056,yp.width,yp.height)}else _u.renderbufferStorage(36161,34041,yp.width,yp.height);_u.framebufferRenderbuffer(36160,33306,36161,fp)}else{var Zp=Nu.convert(yp.texture.format),im=Nu.convert(yp.texture.type),Np=ep(yp.texture.internalFormat,Zp,im);if(Gp){var Qp=Sp(yp);_u.renderbufferStorageMultisample(36161,Qp,Np,yp.width,yp.height)}else _u.renderbufferStorage(36161,Np,yp.width,yp.height)}_u.bindRenderbuffer(36161,null)}function Lp(fp,yp){var Gp=yp&&yp.isWebGLCubeRenderTarget;if(Gp)throw new Error("Depth Texture with cube render targets is not supported");if(_u.bindFramebuffer(36160,fp),!(yp.depthTexture&&yp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Ou.get(yp.depthTexture).__webglTexture||yp.depthTexture.image.width!==yp.width||yp.depthTexture.image.height!==yp.height)&&(yp.depthTexture.image.width=yp.width,yp.depthTexture.image.height=yp.height,yp.depthTexture.needsUpdate=!0),op(yp.depthTexture,0);var Np=Ou.get(yp.depthTexture).__webglTexture;if(yp.depthTexture.format===DepthFormat)_u.framebufferTexture2D(36160,36096,3553,Np,0);else if(yp.depthTexture.format===DepthStencilFormat)_u.framebufferTexture2D(36160,33306,3553,Np,0);else throw new Error("Unknown depthTexture format")}function mp(fp){var yp=Ou.get(fp),Gp=fp.isWebGLCubeRenderTarget===!0;if(fp.depthTexture){if(Gp)throw new Error("target.depthTexture not supported in Cube render targets");Lp(yp.__webglFramebuffer,fp)}else if(Gp){yp.__webglDepthbuffer=[];for(var Np=0;Np<6;Np++)_u.bindFramebuffer(36160,yp.__webglFramebuffer[Np]),yp.__webglDepthbuffer[Np]=_u.createRenderbuffer(),Vp(yp.__webglDepthbuffer[Np],fp,!1)}else _u.bindFramebuffer(36160,yp.__webglFramebuffer),yp.__webglDepthbuffer=_u.createRenderbuffer(),Vp(yp.__webglDepthbuffer,fp,!1);_u.bindFramebuffer(36160,null)}function pp(fp){var yp=Ou.get(fp),Gp=Ou.get(fp.texture);fp.addEventListener("dispose",lp),Gp.__webglTexture=_u.createTexture(),Vu.memory.textures++;var Np=fp.isWebGLCubeRenderTarget===!0,Xp=fp.isWebGLMultisampleRenderTarget===!0,Qp=Xu(fp)||Gu;if(Gu&&fp.texture.format===RGBFormat&&(fp.texture.type===FloatType||fp.texture.type===HalfFloatType)&&(fp.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Np){yp.__webglFramebuffer=[];for(var Zp=0;Zp<6;Zp++)yp.__webglFramebuffer[Zp]=_u.createFramebuffer()}else if(yp.__webglFramebuffer=_u.createFramebuffer(),Xp)if(Gu){yp.__webglMultisampledFramebuffer=_u.createFramebuffer(),yp.__webglColorRenderbuffer=_u.createRenderbuffer(),_u.bindRenderbuffer(36161,yp.__webglColorRenderbuffer);var im=Nu.convert(fp.texture.format),nm=Nu.convert(fp.texture.type),cm=ep(fp.texture.internalFormat,im,nm),em=Sp(fp);_u.renderbufferStorageMultisample(36161,em,cm,fp.width,fp.height),_u.bindFramebuffer(36160,yp.__webglMultisampledFramebuffer),_u.framebufferRenderbuffer(36160,36064,36161,yp.__webglColorRenderbuffer),_u.bindRenderbuffer(36161,null),fp.depthBuffer&&(yp.__webglDepthRenderbuffer=_u.createRenderbuffer(),Vp(yp.__webglDepthRenderbuffer,fp,!0)),_u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Np){Ru.bindTexture(34067,Gp.__webglTexture),Rp(34067,fp.texture,Qp);for(var Zp=0;Zp<6;Zp++)Ip(yp.__webglFramebuffer[Zp],fp,36064,34069+Zp);Xc(fp.texture,Qp)&&_h(34067,fp.texture,fp.width,fp.height),Ru.bindTexture(34067,null)}else Ru.bindTexture(3553,Gp.__webglTexture),Rp(3553,fp.texture,Qp),Ip(yp.__webglFramebuffer,fp,36064,3553),Xc(fp.texture,Qp)&&_h(3553,fp.texture,fp.width,fp.height),Ru.bindTexture(3553,null);fp.depthBuffer&&mp(fp)}function wp(fp){var yp=fp.texture,Gp=Xu(fp)||Gu;if(Xc(yp,Gp)){var Np=fp.isWebGLCubeRenderTarget?34067:3553,Xp=Ou.get(yp).__webglTexture;Ru.bindTexture(Np,Xp),_h(Np,yp,fp.width,fp.height),Ru.bindTexture(Np,null)}}function Ap(fp){if(fp.isWebGLMultisampleRenderTarget)if(Gu){var yp=Ou.get(fp);_u.bindFramebuffer(36008,yp.__webglMultisampledFramebuffer),_u.bindFramebuffer(36009,yp.__webglFramebuffer);var Gp=fp.width,Np=fp.height,Xp=16384;fp.depthBuffer&&(Xp|=256),fp.stencilBuffer&&(Xp|=1024),_u.blitFramebuffer(0,0,Gp,Np,0,0,Gp,Np,Xp,9728),_u.bindFramebuffer(36160,yp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Sp(fp){return Gu&&fp.isWebGLMultisampleRenderTarget?Math.min(Qu,fp.samples):0}function Cp(fp){var yp=Vu.render.frame;qu.get(fp)!==yp&&(qu.set(fp,yp),fp.update())}var $p=!1,Fp=!1;function jp(fp,yp){fp&&fp.isWebGLRenderTarget&&($p===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),$p=!0),fp=fp.texture),op(fp,yp)}function kp(fp,yp){fp&&fp.isWebGLCubeRenderTarget&&(Fp===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Fp=!0),fp=fp.texture),fp&&fp.isCubeTexture||Array.isArray(fp.image)&&fp.image.length===6?hp(fp,yp):dp(fp,yp)}this.allocateTextureUnit=rp,this.resetTextureUnits=ip,this.setTexture2D=op,this.setTexture2DArray=sp,this.setTexture3D=cp,this.setTextureCube=hp,this.setTextureCubeDynamic=dp,this.setupRenderTarget=pp,this.updateRenderTargetMipmap=wp,this.updateMultisampleRenderTarget=Ap,this.safeSetTexture2D=jp,this.safeSetTextureCube=kp}function WebGLUtils(_u,$u,Ru){var Ou=Ru.isWebGL2;function Fu(Nu){var Vu;if(Nu===UnsignedByteType)return 5121;if(Nu===UnsignedShort4444Type)return 32819;if(Nu===UnsignedShort5551Type)return 32820;if(Nu===UnsignedShort565Type)return 33635;if(Nu===ByteType)return 5120;if(Nu===ShortType)return 5122;if(Nu===UnsignedShortType)return 5123;if(Nu===IntType)return 5124;if(Nu===UnsignedIntType)return 5125;if(Nu===FloatType)return 5126;if(Nu===HalfFloatType)return Ou?5131:(Vu=$u.get("OES_texture_half_float"),Vu!==null?Vu.HALF_FLOAT_OES:null);if(Nu===AlphaFormat)return 6406;if(Nu===RGBFormat)return 6407;if(Nu===RGBAFormat)return 6408;if(Nu===LuminanceFormat)return 6409;if(Nu===LuminanceAlphaFormat)return 6410;if(Nu===DepthFormat)return 6402;if(Nu===DepthStencilFormat)return 34041;if(Nu===RedFormat)return 6403;if(Nu===RedIntegerFormat)return 36244;if(Nu===RGFormat)return 33319;if(Nu===RGIntegerFormat)return 33320;if(Nu===RGBIntegerFormat)return 36248;if(Nu===RGBAIntegerFormat)return 36249;if(Nu===RGB_S3TC_DXT1_Format||Nu===RGBA_S3TC_DXT1_Format||Nu===RGBA_S3TC_DXT3_Format||Nu===RGBA_S3TC_DXT5_Format)if(Vu=$u.get("WEBGL_compressed_texture_s3tc"),Vu!==null){if(Nu===RGB_S3TC_DXT1_Format)return Vu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Nu===RGBA_S3TC_DXT1_Format)return Vu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Nu===RGBA_S3TC_DXT3_Format)return Vu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Nu===RGBA_S3TC_DXT5_Format)return Vu.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Nu===RGB_PVRTC_4BPPV1_Format||Nu===RGB_PVRTC_2BPPV1_Format||Nu===RGBA_PVRTC_4BPPV1_Format||Nu===RGBA_PVRTC_2BPPV1_Format)if(Vu=$u.get("WEBGL_compressed_texture_pvrtc"),Vu!==null){if(Nu===RGB_PVRTC_4BPPV1_Format)return Vu.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Nu===RGB_PVRTC_2BPPV1_Format)return Vu.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Nu===RGBA_PVRTC_4BPPV1_Format)return Vu.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Nu===RGBA_PVRTC_2BPPV1_Format)return Vu.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Nu===RGB_ETC1_Format)return Vu=$u.get("WEBGL_compressed_texture_etc1"),Vu!==null?Vu.COMPRESSED_RGB_ETC1_WEBGL:null;if((Nu===RGB_ETC2_Format||Nu===RGBA_ETC2_EAC_Format)&&(Vu=$u.get("WEBGL_compressed_texture_etc"),Vu!==null)){if(Nu===RGB_ETC2_Format)return Vu.COMPRESSED_RGB8_ETC2;if(Nu===RGBA_ETC2_EAC_Format)return Vu.COMPRESSED_RGBA8_ETC2_EAC}if(Nu===RGBA_ASTC_4x4_Format||Nu===RGBA_ASTC_5x4_Format||Nu===RGBA_ASTC_5x5_Format||Nu===RGBA_ASTC_6x5_Format||Nu===RGBA_ASTC_6x6_Format||Nu===RGBA_ASTC_8x5_Format||Nu===RGBA_ASTC_8x6_Format||Nu===RGBA_ASTC_8x8_Format||Nu===RGBA_ASTC_10x5_Format||Nu===RGBA_ASTC_10x6_Format||Nu===RGBA_ASTC_10x8_Format||Nu===RGBA_ASTC_10x10_Format||Nu===RGBA_ASTC_12x10_Format||Nu===RGBA_ASTC_12x12_Format||Nu===SRGB8_ALPHA8_ASTC_4x4_Format||Nu===SRGB8_ALPHA8_ASTC_5x4_Format||Nu===SRGB8_ALPHA8_ASTC_5x5_Format||Nu===SRGB8_ALPHA8_ASTC_6x5_Format||Nu===SRGB8_ALPHA8_ASTC_6x6_Format||Nu===SRGB8_ALPHA8_ASTC_8x5_Format||Nu===SRGB8_ALPHA8_ASTC_8x6_Format||Nu===SRGB8_ALPHA8_ASTC_8x8_Format||Nu===SRGB8_ALPHA8_ASTC_10x5_Format||Nu===SRGB8_ALPHA8_ASTC_10x6_Format||Nu===SRGB8_ALPHA8_ASTC_10x8_Format||Nu===SRGB8_ALPHA8_ASTC_10x10_Format||Nu===SRGB8_ALPHA8_ASTC_12x10_Format||Nu===SRGB8_ALPHA8_ASTC_12x12_Format)return Vu=$u.get("WEBGL_compressed_texture_astc"),Vu!==null?Nu:null;if(Nu===RGBA_BPTC_Format)return Vu=$u.get("EXT_texture_compression_bptc"),Vu!==null?Nu:null;if(Nu===UnsignedInt248Type)return Ou?34042:(Vu=$u.get("WEBGL_depth_texture"),Vu!==null?Vu.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Fu}}function ArrayCamera(_u){PerspectiveCamera.call(this),this.cameras=_u||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(_u){return this._targetRay!==null&&this._targetRay.dispatchEvent(_u),this._grip!==null&&this._grip.dispatchEvent(_u),this},disconnect:function(_u){return this.dispatchEvent({type:"disconnected",data:_u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(_u,$u,Ru){var Ou=null,Fu=null,Nu=this._targetRay,Vu=this._grip;return _u&&(Nu!==null&&(Ou=$u.getPose(_u.targetRaySpace,Ru),Ou!==null&&(Nu.matrix.fromArray(Ou.transform.matrix),Nu.matrix.decompose(Nu.position,Nu.rotation,Nu.scale))),Vu!==null&&_u.gripSpace&&(Fu=$u.getPose(_u.gripSpace,Ru),Fu!==null&&(Vu.matrix.fromArray(Fu.transform.matrix),Vu.matrix.decompose(Vu.position,Vu.rotation,Vu.scale)))),Nu!==null&&(Nu.visible=Ou!==null),Vu!==null&&(Vu.visible=Fu!==null),this}});function WebXRManager(_u,$u){var Ru=this,Ou=null,Fu=1,Nu=null,Vu="local-floor",Gu=null,Uu=[],Hu=new Map,Wu=new PerspectiveCamera;Wu.layers.enable(1),Wu.viewport=new Vector4;var Qu=new PerspectiveCamera;Qu.layers.enable(2),Qu.viewport=new Vector4;var qu=[Wu,Qu],Ku=new ArrayCamera;Ku.layers.enable(1),Ku.layers.enable(2);var Yu=null,_c=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(tp){var ip=Uu[tp];return ip===void 0&&(ip=new WebXRController,Uu[tp]=ip),ip.getTargetRaySpace()},this.getControllerGrip=function(tp){var ip=Uu[tp];return ip===void 0&&(ip=new WebXRController,Uu[tp]=ip),ip.getGripSpace()};function Ju(tp){var ip=Hu.get(tp.inputSource);ip&&ip.dispatchEvent({type:tp.type})}function Xu(){Hu.forEach(function(tp,ip){tp.disconnect(ip)}),Hu.clear(),_u.setFramebuffer(null),_u.setRenderTarget(_u.getRenderTarget()),_f.stop(),Ru.isPresenting=!1,Ru.dispatchEvent({type:"sessionend"})}function Zu(tp){Nu=tp,_f.setContext(Ou),_f.start(),Ru.isPresenting=!0,Ru.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(tp){Fu=tp,Ru.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(tp){Vu=tp,Ru.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Nu},this.getSession=function(){return Ou},this.setSession=function(tp){if(Ou=tp,Ou!==null){Ou.addEventListener("select",Ju),Ou.addEventListener("selectstart",Ju),Ou.addEventListener("selectend",Ju),Ou.addEventListener("squeeze",Ju),Ou.addEventListener("squeezestart",Ju),Ou.addEventListener("squeezeend",Ju),Ou.addEventListener("end",Xu);var ip=$u.getContextAttributes();ip.xrCompatible!==!0&&$u.makeXRCompatible();var rp={antialias:ip.antialias,alpha:ip.alpha,depth:ip.depth,stencil:ip.stencil,framebufferScaleFactor:Fu},op=new XRWebGLLayer(Ou,$u,rp);Ou.updateRenderState({baseLayer:op}),Ou.requestReferenceSpace(Vu).then(Zu),Ou.addEventListener("inputsourceschange",Xc)}};function Xc(tp){for(var ip=Ou.inputSources,rp=0;rp<Uu.length;rp++)Hu.set(ip[rp],Uu[rp]);for(var rp=0;rp<tp.removed.length;rp++){var op=tp.removed[rp],sp=Hu.get(op);sp&&(sp.dispatchEvent({type:"disconnected",data:op}),Hu.delete(op))}for(var rp=0;rp<tp.added.length;rp++){var op=tp.added[rp],sp=Hu.get(op);sp&&sp.dispatchEvent({type:"connected",data:op})}}var _h=new Vector3,ep=new Vector3;function np(tp,ip,rp){_h.setFromMatrixPosition(ip.matrixWorld),ep.setFromMatrixPosition(rp.matrixWorld);var op=_h.distanceTo(ep),sp=ip.projectionMatrix.elements,cp=rp.projectionMatrix.elements,hp=sp[14]/(sp[10]-1),dp=sp[14]/(sp[10]+1),xp=(sp[9]+1)/sp[5],bp=(sp[9]-1)/sp[5],Rp=(sp[8]-1)/sp[0],Tp=(cp[8]+1)/cp[0],Up=hp*Rp,Ip=hp*Tp,Vp=op/(-Rp+Tp),Lp=Vp*-Rp;ip.matrixWorld.decompose(tp.position,tp.quaternion,tp.scale),tp.translateX(Lp),tp.translateZ(Vp),tp.matrixWorld.compose(tp.position,tp.quaternion,tp.scale),tp.matrixWorldInverse.getInverse(tp.matrixWorld);var mp=hp+Vp,pp=dp+Vp,wp=Up-Lp,Ap=Ip+(op-Lp),Sp=xp*dp/pp*mp,Cp=bp*dp/pp*mp;tp.projectionMatrix.makePerspective(wp,Ap,Sp,Cp,mp,pp)}function ap(tp,ip){ip===null?tp.matrixWorld.copy(tp.matrix):tp.matrixWorld.multiplyMatrices(ip.matrixWorld,tp.matrix),tp.matrixWorldInverse.getInverse(tp.matrixWorld)}this.getCamera=function(tp){Ku.near=Qu.near=Wu.near=tp.near,Ku.far=Qu.far=Wu.far=tp.far,(Yu!==Ku.near||_c!==Ku.far)&&(Ou.updateRenderState({depthNear:Ku.near,depthFar:Ku.far}),Yu=Ku.near,_c=Ku.far);var ip=tp.parent,rp=Ku.cameras;ap(Ku,ip);for(var op=0;op<rp.length;op++)ap(rp[op],ip);tp.matrixWorld.copy(Ku.matrixWorld);for(var sp=tp.children,op=0,cp=sp.length;op<cp;op++)sp[op].updateMatrixWorld(!0);return rp.length===2?np(Ku,Wu,Qu):Ku.projectionMatrix.copy(Wu.projectionMatrix),Ku};var lp=null;function up(tp,ip){if(Gu=ip.getViewerPose(Nu),Gu!==null){var rp=Gu.views,op=Ou.renderState.baseLayer;_u.setFramebuffer(op.framebuffer);var sp=!1;rp.length!==Ku.cameras.length&&(Ku.cameras.length=0,sp=!0);for(var cp=0;cp<rp.length;cp++){var hp=rp[cp],dp=op.getViewport(hp),xp=qu[cp];xp.matrix.fromArray(hp.transform.matrix),xp.projectionMatrix.fromArray(hp.projectionMatrix),xp.viewport.set(dp.x,dp.y,dp.width,dp.height),cp===0&&Ku.matrix.copy(xp.matrix),sp===!0&&Ku.cameras.push(xp)}}for(var bp=Ou.inputSources,cp=0;cp<Uu.length;cp++){var Rp=Uu[cp],Tp=bp[cp];Rp.update(Tp,ip,Nu)}lp&&lp(tp,ip)}var _f=new WebGLAnimation;_f.setAnimationLoop(up),this.setAnimationLoop=function(tp){lp=tp},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(_u){function $u(Xu,Zu){Xu.fogColor.value.copy(Zu.color),Zu.isFog?(Xu.fogNear.value=Zu.near,Xu.fogFar.value=Zu.far):Zu.isFogExp2&&(Xu.fogDensity.value=Zu.density)}function Ru(Xu,Zu,Xc,_h,ep){Zu.isMeshBasicMaterial?Ou(Xu,Zu):Zu.isMeshLambertMaterial?(Ou(Xu,Zu),Uu(Xu,Zu)):Zu.isMeshToonMaterial?(Ou(Xu,Zu),Wu(Xu,Zu)):Zu.isMeshPhongMaterial?(Ou(Xu,Zu),Hu(Xu,Zu)):Zu.isMeshStandardMaterial?(Ou(Xu,Zu,Xc),Zu.isMeshPhysicalMaterial?qu(Xu,Zu,Xc):Qu(Xu,Zu,Xc)):Zu.isMeshMatcapMaterial?(Ou(Xu,Zu),Ku(Xu,Zu)):Zu.isMeshDepthMaterial?(Ou(Xu,Zu),Yu(Xu,Zu)):Zu.isMeshDistanceMaterial?(Ou(Xu,Zu),_c(Xu,Zu)):Zu.isMeshNormalMaterial?(Ou(Xu,Zu),Ju(Xu,Zu)):Zu.isLineBasicMaterial?(Fu(Xu,Zu),Zu.isLineDashedMaterial&&Nu(Xu,Zu)):Zu.isPointsMaterial?Vu(Xu,Zu,_h,ep):Zu.isSpriteMaterial?Gu(Xu,Zu):Zu.isShadowMaterial?(Xu.color.value.copy(Zu.color),Xu.opacity.value=Zu.opacity):Zu.isShaderMaterial&&(Zu.uniformsNeedUpdate=!1)}function Ou(Xu,Zu,Xc){Xu.opacity.value=Zu.opacity,Zu.color&&Xu.diffuse.value.copy(Zu.color),Zu.emissive&&Xu.emissive.value.copy(Zu.emissive).multiplyScalar(Zu.emissiveIntensity),Zu.map&&(Xu.map.value=Zu.map),Zu.alphaMap&&(Xu.alphaMap.value=Zu.alphaMap),Zu.specularMap&&(Xu.specularMap.value=Zu.specularMap);var _h=Zu.envMap||Xc;_h&&(Xu.envMap.value=_h,Xu.flipEnvMap.value=_h.isCubeTexture?-1:1,Xu.reflectivity.value=Zu.reflectivity,Xu.refractionRatio.value=Zu.refractionRatio,Xu.maxMipLevel.value=_u.get(_h).__maxMipLevel),Zu.lightMap&&(Xu.lightMap.value=Zu.lightMap,Xu.lightMapIntensity.value=Zu.lightMapIntensity),Zu.aoMap&&(Xu.aoMap.value=Zu.aoMap,Xu.aoMapIntensity.value=Zu.aoMapIntensity);var ep;Zu.map?ep=Zu.map:Zu.specularMap?ep=Zu.specularMap:Zu.displacementMap?ep=Zu.displacementMap:Zu.normalMap?ep=Zu.normalMap:Zu.bumpMap?ep=Zu.bumpMap:Zu.roughnessMap?ep=Zu.roughnessMap:Zu.metalnessMap?ep=Zu.metalnessMap:Zu.alphaMap?ep=Zu.alphaMap:Zu.emissiveMap&&(ep=Zu.emissiveMap),ep!==void 0&&(ep.isWebGLRenderTarget&&(ep=ep.texture),ep.matrixAutoUpdate===!0&&ep.updateMatrix(),Xu.uvTransform.value.copy(ep.matrix));var np;Zu.aoMap?np=Zu.aoMap:Zu.lightMap&&(np=Zu.lightMap),np!==void 0&&(np.isWebGLRenderTarget&&(np=np.texture),np.matrixAutoUpdate===!0&&np.updateMatrix(),Xu.uv2Transform.value.copy(np.matrix))}function Fu(Xu,Zu){Xu.diffuse.value.copy(Zu.color),Xu.opacity.value=Zu.opacity}function Nu(Xu,Zu){Xu.dashSize.value=Zu.dashSize,Xu.totalSize.value=Zu.dashSize+Zu.gapSize,Xu.scale.value=Zu.scale}function Vu(Xu,Zu,Xc,_h){Xu.diffuse.value.copy(Zu.color),Xu.opacity.value=Zu.opacity,Xu.size.value=Zu.size*Xc,Xu.scale.value=_h*.5,Zu.map&&(Xu.map.value=Zu.map),Zu.alphaMap&&(Xu.alphaMap.value=Zu.alphaMap);var ep;Zu.map?ep=Zu.map:Zu.alphaMap&&(ep=Zu.alphaMap),ep!==void 0&&(ep.matrixAutoUpdate===!0&&ep.updateMatrix(),Xu.uvTransform.value.copy(ep.matrix))}function Gu(Xu,Zu){Xu.diffuse.value.copy(Zu.color),Xu.opacity.value=Zu.opacity,Xu.rotation.value=Zu.rotation,Zu.map&&(Xu.map.value=Zu.map),Zu.alphaMap&&(Xu.alphaMap.value=Zu.alphaMap);var Xc;Zu.map?Xc=Zu.map:Zu.alphaMap&&(Xc=Zu.alphaMap),Xc!==void 0&&(Xc.matrixAutoUpdate===!0&&Xc.updateMatrix(),Xu.uvTransform.value.copy(Xc.matrix))}function Uu(Xu,Zu){Zu.emissiveMap&&(Xu.emissiveMap.value=Zu.emissiveMap)}function Hu(Xu,Zu){Xu.specular.value.copy(Zu.specular),Xu.shininess.value=Math.max(Zu.shininess,1e-4),Zu.emissiveMap&&(Xu.emissiveMap.value=Zu.emissiveMap),Zu.bumpMap&&(Xu.bumpMap.value=Zu.bumpMap,Xu.bumpScale.value=Zu.bumpScale,Zu.side===BackSide&&(Xu.bumpScale.value*=-1)),Zu.normalMap&&(Xu.normalMap.value=Zu.normalMap,Xu.normalScale.value.copy(Zu.normalScale),Zu.side===BackSide&&Xu.normalScale.value.negate()),Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias)}function Wu(Xu,Zu){Xu.specular.value.copy(Zu.specular),Xu.shininess.value=Math.max(Zu.shininess,1e-4),Zu.gradientMap&&(Xu.gradientMap.value=Zu.gradientMap),Zu.emissiveMap&&(Xu.emissiveMap.value=Zu.emissiveMap),Zu.bumpMap&&(Xu.bumpMap.value=Zu.bumpMap,Xu.bumpScale.value=Zu.bumpScale,Zu.side===BackSide&&(Xu.bumpScale.value*=-1)),Zu.normalMap&&(Xu.normalMap.value=Zu.normalMap,Xu.normalScale.value.copy(Zu.normalScale),Zu.side===BackSide&&Xu.normalScale.value.negate()),Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias)}function Qu(Xu,Zu,Xc){Xu.roughness.value=Zu.roughness,Xu.metalness.value=Zu.metalness,Zu.roughnessMap&&(Xu.roughnessMap.value=Zu.roughnessMap),Zu.metalnessMap&&(Xu.metalnessMap.value=Zu.metalnessMap),Zu.emissiveMap&&(Xu.emissiveMap.value=Zu.emissiveMap),Zu.bumpMap&&(Xu.bumpMap.value=Zu.bumpMap,Xu.bumpScale.value=Zu.bumpScale,Zu.side===BackSide&&(Xu.bumpScale.value*=-1)),Zu.normalMap&&(Xu.normalMap.value=Zu.normalMap,Xu.normalScale.value.copy(Zu.normalScale),Zu.side===BackSide&&Xu.normalScale.value.negate()),Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias),(Zu.envMap||Xc)&&(Xu.envMapIntensity.value=Zu.envMapIntensity)}function qu(Xu,Zu,Xc){Qu(Xu,Zu,Xc),Xu.reflectivity.value=Zu.reflectivity,Xu.clearcoat.value=Zu.clearcoat,Xu.clearcoatRoughness.value=Zu.clearcoatRoughness,Zu.sheen&&Xu.sheen.value.copy(Zu.sheen),Zu.clearcoatMap&&(Xu.clearcoatMap.value=Zu.clearcoatMap),Zu.clearcoatRoughnessMap&&(Xu.clearcoatRoughnessMap.value=Zu.clearcoatRoughnessMap),Zu.clearcoatNormalMap&&(Xu.clearcoatNormalScale.value.copy(Zu.clearcoatNormalScale),Xu.clearcoatNormalMap.value=Zu.clearcoatNormalMap,Zu.side===BackSide&&Xu.clearcoatNormalScale.value.negate()),Xu.transparency.value=Zu.transparency}function Ku(Xu,Zu){Zu.matcap&&(Xu.matcap.value=Zu.matcap),Zu.bumpMap&&(Xu.bumpMap.value=Zu.bumpMap,Xu.bumpScale.value=Zu.bumpScale,Zu.side===BackSide&&(Xu.bumpScale.value*=-1)),Zu.normalMap&&(Xu.normalMap.value=Zu.normalMap,Xu.normalScale.value.copy(Zu.normalScale),Zu.side===BackSide&&Xu.normalScale.value.negate()),Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias)}function Yu(Xu,Zu){Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias)}function _c(Xu,Zu){Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias),Xu.referencePosition.value.copy(Zu.referencePosition),Xu.nearDistance.value=Zu.nearDistance,Xu.farDistance.value=Zu.farDistance}function Ju(Xu,Zu){Zu.bumpMap&&(Xu.bumpMap.value=Zu.bumpMap,Xu.bumpScale.value=Zu.bumpScale,Zu.side===BackSide&&(Xu.bumpScale.value*=-1)),Zu.normalMap&&(Xu.normalMap.value=Zu.normalMap,Xu.normalScale.value.copy(Zu.normalScale),Zu.side===BackSide&&Xu.normalScale.value.negate()),Zu.displacementMap&&(Xu.displacementMap.value=Zu.displacementMap,Xu.displacementScale.value=Zu.displacementScale,Xu.displacementBias.value=Zu.displacementBias)}return{refreshFogUniforms:$u,refreshMaterialUniforms:Ru}}function WebGLRenderer(_u){_u=_u||{};var $u=_u.canvas!==void 0?_u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Ru=_u.context!==void 0?_u.context:null,Ou=_u.alpha!==void 0?_u.alpha:!1,Fu=_u.depth!==void 0?_u.depth:!0,Nu=_u.stencil!==void 0?_u.stencil:!0,Vu=_u.antialias!==void 0?_u.antialias:!1,Gu=_u.premultipliedAlpha!==void 0?_u.premultipliedAlpha:!0,Uu=_u.preserveDrawingBuffer!==void 0?_u.preserveDrawingBuffer:!1,Hu=_u.powerPreference!==void 0?_u.powerPreference:"default",Wu=_u.failIfMajorPerformanceCaveat!==void 0?_u.failIfMajorPerformanceCaveat:!1,Qu=null,qu=null;this.domElement=$u,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Ku=this,Yu=!1,_c=null,Ju=0,Xu=0,Zu=null,Xc=null,_h=-1,ep={geometry:null,program:null,wireframe:!1},np=null,ap=null,lp=new Vector4,up=new Vector4,_f=null,tp=$u.width,ip=$u.height,rp=1,op=null,sp=null,cp=new Vector4(0,0,tp,ip),hp=new Vector4(0,0,tp,ip),dp=!1,xp=new Frustum,bp=new WebGLClipping,Rp=!1,Tp=!1,Up=new Matrix4,Ip=new Vector3;function Vp(){return Zu===null?rp:1}var Lp;try{var mp={alpha:Ou,depth:Fu,stencil:Nu,antialias:Vu,premultipliedAlpha:Gu,preserveDrawingBuffer:Uu,powerPreference:Hu,failIfMajorPerformanceCaveat:Wu};if($u.addEventListener("webglcontextlost",tm,!1),$u.addEventListener("webglcontextrestored",sm,!1),Lp=Ru||$u.getContext("webgl",mp)||$u.getContext("experimental-webgl",mp),Lp===null)throw $u.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Lp.getShaderPrecisionFormat===void 0&&(Lp.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Mp){throw console.error("THREE.WebGLRenderer: "+Mp.message),Mp}var pp,wp,Ap,Sp,Cp,$p,Fp,jp,kp,fp,yp,Gp,Np,Xp,Qp,Zp,im,nm;function cm(){pp=new WebGLExtensions(Lp),wp=new WebGLCapabilities(Lp,pp,_u),wp.isWebGL2===!1&&(pp.get("WEBGL_depth_texture"),pp.get("OES_texture_float"),pp.get("OES_texture_half_float"),pp.get("OES_texture_half_float_linear"),pp.get("OES_standard_derivatives"),pp.get("OES_element_index_uint"),pp.get("ANGLE_instanced_arrays")),pp.get("OES_texture_float_linear"),nm=new WebGLUtils(Lp,pp,wp),Ap=new WebGLState(Lp,pp,wp),Ap.scissor(up.copy(hp).multiplyScalar(rp).floor()),Ap.viewport(lp.copy(cp).multiplyScalar(rp).floor()),Sp=new WebGLInfo(Lp),Cp=new WebGLProperties,$p=new WebGLTextures(Lp,pp,Ap,Cp,wp,nm,Sp),Fp=new WebGLAttributes(Lp,wp),jp=new WebGLGeometries(Lp,Fp,Sp),kp=new WebGLObjects(Lp,jp,Fp,Sp),Qp=new WebGLMorphtargets(Lp),fp=new WebGLPrograms(Ku,pp,wp),yp=new WebGLMaterials(Cp),Gp=new WebGLRenderLists,Np=new WebGLRenderStates,Xp=new WebGLBackground(Ku,Ap,kp,Gu),Zp=new WebGLBufferRenderer(Lp,pp,Sp,wp),im=new WebGLIndexedBufferRenderer(Lp,pp,Sp,wp),Sp.programs=fp.programs,Ku.capabilities=wp,Ku.extensions=pp,Ku.properties=Cp,Ku.renderLists=Gp,Ku.state=Ap,Ku.info=Sp}cm();var em=new WebXRManager(Ku,Lp);this.xr=em;var om=new WebGLShadowMap(Ku,kp,wp.maxTextureSize);this.shadowMap=om,this.getContext=function(){return Lp},this.getContextAttributes=function(){return Lp.getContextAttributes()},this.forceContextLoss=function(){var Mp=pp.get("WEBGL_lose_context");Mp&&Mp.loseContext()},this.forceContextRestore=function(){var Mp=pp.get("WEBGL_lose_context");Mp&&Mp.restoreContext()},this.getPixelRatio=function(){return rp},this.setPixelRatio=function(Mp){Mp!==void 0&&(rp=Mp,this.setSize(tp,ip,!1))},this.getSize=function(Mp){return Mp===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Mp=new Vector2),Mp.set(tp,ip)},this.setSize=function(Mp,Wp,Hp){if(em.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}tp=Mp,ip=Wp,$u.width=Math.floor(Mp*rp),$u.height=Math.floor(Wp*rp),Hp!==!1&&($u.style.width=Mp+"px",$u.style.height=Wp+"px"),this.setViewport(0,0,Mp,Wp)},this.getDrawingBufferSize=function(Mp){return Mp===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Mp=new Vector2),Mp.set(tp*rp,ip*rp).floor()},this.setDrawingBufferSize=function(Mp,Wp,Hp){tp=Mp,ip=Wp,rp=Hp,$u.width=Math.floor(Mp*Hp),$u.height=Math.floor(Wp*Hp),this.setViewport(0,0,Mp,Wp)},this.getCurrentViewport=function(Mp){return Mp===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Mp=new Vector4),Mp.copy(lp)},this.getViewport=function(Mp){return Mp.copy(cp)},this.setViewport=function(Mp,Wp,Hp,Kp){Mp.isVector4?cp.set(Mp.x,Mp.y,Mp.z,Mp.w):cp.set(Mp,Wp,Hp,Kp),Ap.viewport(lp.copy(cp).multiplyScalar(rp).floor())},this.getScissor=function(Mp){return Mp.copy(hp)},this.setScissor=function(Mp,Wp,Hp,Kp){Mp.isVector4?hp.set(Mp.x,Mp.y,Mp.z,Mp.w):hp.set(Mp,Wp,Hp,Kp),Ap.scissor(up.copy(hp).multiplyScalar(rp).floor())},this.getScissorTest=function(){return dp},this.setScissorTest=function(Mp){Ap.setScissorTest(dp=Mp)},this.setOpaqueSort=function(Mp){op=Mp},this.setTransparentSort=function(Mp){sp=Mp},this.getClearColor=function(){return Xp.getClearColor()},this.setClearColor=function(){Xp.setClearColor.apply(Xp,arguments)},this.getClearAlpha=function(){return Xp.getClearAlpha()},this.setClearAlpha=function(){Xp.setClearAlpha.apply(Xp,arguments)},this.clear=function(Mp,Wp,Hp){var Kp=0;(Mp===void 0||Mp)&&(Kp|=16384),(Wp===void 0||Wp)&&(Kp|=256),(Hp===void 0||Hp)&&(Kp|=1024),Lp.clear(Kp)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){$u.removeEventListener("webglcontextlost",tm,!1),$u.removeEventListener("webglcontextrestored",sm,!1),Gp.dispose(),Np.dispose(),Cp.dispose(),kp.dispose(),em.dispose(),Dm.stop()};function tm(Mp){Mp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Yu=!0}function sm(){console.log("THREE.WebGLRenderer: Context Restored."),Yu=!1,cm()}function Bp(Mp){var Wp=Mp.target;Wp.removeEventListener("dispose",Bp),rm(Wp)}function rm(Mp){lm(Mp),Cp.remove(Mp)}function lm(Mp){var Wp=Cp.get(Mp).program;Mp.program=void 0,Wp!==void 0&&fp.releaseProgram(Wp)}function dm(Mp,Wp){Mp.render(function(Hp){Ku.renderBufferImmediate(Hp,Wp)})}this.renderBufferImmediate=function(Mp,Wp){Ap.initAttributes();var Hp=Cp.get(Mp);Mp.hasPositions&&!Hp.position&&(Hp.position=Lp.createBuffer()),Mp.hasNormals&&!Hp.normal&&(Hp.normal=Lp.createBuffer()),Mp.hasUvs&&!Hp.uv&&(Hp.uv=Lp.createBuffer()),Mp.hasColors&&!Hp.color&&(Hp.color=Lp.createBuffer());var Kp=Wp.getAttributes();Mp.hasPositions&&(Lp.bindBuffer(34962,Hp.position),Lp.bufferData(34962,Mp.positionArray,35048),Ap.enableAttribute(Kp.position),Lp.vertexAttribPointer(Kp.position,3,5126,!1,0,0)),Mp.hasNormals&&(Lp.bindBuffer(34962,Hp.normal),Lp.bufferData(34962,Mp.normalArray,35048),Ap.enableAttribute(Kp.normal),Lp.vertexAttribPointer(Kp.normal,3,5126,!1,0,0)),Mp.hasUvs&&(Lp.bindBuffer(34962,Hp.uv),Lp.bufferData(34962,Mp.uvArray,35048),Ap.enableAttribute(Kp.uv),Lp.vertexAttribPointer(Kp.uv,2,5126,!1,0,0)),Mp.hasColors&&(Lp.bindBuffer(34962,Hp.color),Lp.bufferData(34962,Mp.colorArray,35048),Ap.enableAttribute(Kp.color),Lp.vertexAttribPointer(Kp.color,3,5126,!1,0,0)),Ap.disableUnusedAttributes(),Lp.drawArrays(4,0,Mp.count),Mp.count=0};var hm=new Scene;this.renderBufferDirect=function(Mp,Wp,Hp,Kp,am,xm){Wp===null&&(Wp=hm);var Am=am.isMesh&&am.matrixWorld.determinant()<0,pm=km(Mp,Wp,Kp,am);Ap.setMaterial(Kp,Am);var vm=!1;(ep.geometry!==Hp.id||ep.program!==pm.id||ep.wireframe!==(Kp.wireframe===!0))&&(ep.geometry=Hp.id,ep.program=pm.id,ep.wireframe=Kp.wireframe===!0,vm=!0),(Kp.morphTargets||Kp.morphNormals)&&(Qp.update(am,Hp,Kp,pm),vm=!0),am.isInstancedMesh===!0&&(vm=!0);var wm=Hp.index,Pm=Hp.attributes.position;if(wm===null){if(Pm===void 0||Pm.count===0)return}else if(wm.count===0)return;var vp=1;Kp.wireframe===!0&&(wm=jp.getWireframeAttribute(Hp),vp=2);var Ep,Pp=Zp;wm!==null&&(Ep=Fp.get(wm),Pp=im,Pp.setIndex(Ep)),vm&&(ym(am,Hp,Kp,pm),wm!==null&&Lp.bindBuffer(34963,Ep.buffer));var zp=wm!==null?wm.count:Pm.count,Yp=Hp.drawRange.start*vp,mm=Hp.drawRange.count*vp,gm=xm!==null?xm.start*vp:0,Lm=xm!==null?xm.count*vp:1/0,fm=Math.max(Yp,gm),Om=Math.min(zp,Yp+mm,gm+Lm)-1,Hm=Math.max(0,Om-fm+1);if(Hm!==0){if(am.isMesh)Kp.wireframe===!0?(Ap.setLineWidth(Kp.wireframeLinewidth*Vp()),Pp.setMode(1)):Pp.setMode(4);else if(am.isLine){var Ey=Kp.linewidth;Ey===void 0&&(Ey=1),Ap.setLineWidth(Ey*Vp()),am.isLineSegments?Pp.setMode(1):am.isLineLoop?Pp.setMode(2):Pp.setMode(3)}else am.isPoints?Pp.setMode(0):am.isSprite&&Pp.setMode(4);if(am.isInstancedMesh)Pp.renderInstances(Hp,fm,Hm,am.count);else if(Hp.isInstancedBufferGeometry){var Ty=Math.min(Hp.instanceCount,Hp._maxInstanceCount);Pp.renderInstances(Hp,fm,Hm,Ty)}else Pp.render(fm,Hm)}};function ym(Mp,Wp,Hp,Kp){if(!(wp.isWebGL2===!1&&(Mp.isInstancedMesh||Wp.isInstancedBufferGeometry)&&pp.get("ANGLE_instanced_arrays")===null)){Ap.initAttributes();var am=Wp.attributes,xm=Kp.getAttributes(),Am=Hp.defaultAttributeValues;for(var pm in xm){var vm=xm[pm];if(vm>=0){var wm=am[pm];if(wm!==void 0){var Pm=wm.normalized,vp=wm.itemSize,Ep=Fp.get(wm);if(Ep===void 0)continue;var Pp=Ep.buffer,zp=Ep.type,Yp=Ep.bytesPerElement;if(wm.isInterleavedBufferAttribute){var mm=wm.data,gm=mm.stride,Lm=wm.offset;mm&&mm.isInstancedInterleavedBuffer?(Ap.enableAttributeAndDivisor(vm,mm.meshPerAttribute),Wp._maxInstanceCount===void 0&&(Wp._maxInstanceCount=mm.meshPerAttribute*mm.count)):Ap.enableAttribute(vm),Lp.bindBuffer(34962,Pp),Ap.vertexAttribPointer(vm,vp,zp,Pm,gm*Yp,Lm*Yp)}else wm.isInstancedBufferAttribute?(Ap.enableAttributeAndDivisor(vm,wm.meshPerAttribute),Wp._maxInstanceCount===void 0&&(Wp._maxInstanceCount=wm.meshPerAttribute*wm.count)):Ap.enableAttribute(vm),Lp.bindBuffer(34962,Pp),Ap.vertexAttribPointer(vm,vp,zp,Pm,0,0)}else if(pm==="instanceMatrix"){var Ep=Fp.get(Mp.instanceMatrix);if(Ep===void 0)continue;var Pp=Ep.buffer,zp=Ep.type;Ap.enableAttributeAndDivisor(vm+0,1),Ap.enableAttributeAndDivisor(vm+1,1),Ap.enableAttributeAndDivisor(vm+2,1),Ap.enableAttributeAndDivisor(vm+3,1),Lp.bindBuffer(34962,Pp),Lp.vertexAttribPointer(vm+0,4,zp,!1,64,0),Lp.vertexAttribPointer(vm+1,4,zp,!1,64,16),Lp.vertexAttribPointer(vm+2,4,zp,!1,64,32),Lp.vertexAttribPointer(vm+3,4,zp,!1,64,48)}else if(Am!==void 0){var fm=Am[pm];if(fm!==void 0)switch(fm.length){case 2:Lp.vertexAttrib2fv(vm,fm);break;case 3:Lp.vertexAttrib3fv(vm,fm);break;case 4:Lp.vertexAttrib4fv(vm,fm);break;default:Lp.vertexAttrib1fv(vm,fm)}}}}Ap.disableUnusedAttributes()}}this.compile=function(Mp,Wp){qu=Np.get(Mp,Wp),qu.init(),Mp.traverse(function(Kp){Kp.isLight&&(qu.pushLight(Kp),Kp.castShadow&&qu.pushShadow(Kp))}),qu.setupLights(Wp);const Hp={};Mp.traverse(function(Kp){let am=Kp.material;if(am)if(Array.isArray(am))for(let xm=0;xm<am.length;xm++){let Am=am[xm];Am.uuid in Hp||(Cm(Am,Mp,Kp),Hp[Am.uuid]=!0)}else am.uuid in Hp||(Cm(am,Mp,Kp),Hp[am.uuid]=!0)})};var Mm=null;function Em(Mp){em.isPresenting||Mm&&Mm(Mp)}var Dm=new WebGLAnimation;Dm.setAnimationLoop(Em),typeof window!="undefined"&&Dm.setContext(window),this.setAnimationLoop=function(Mp){Mm=Mp,em.setAnimationLoop(Mp),Dm.start()},this.render=function(Mp,Wp){var Hp,Kp;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Hp=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Kp=arguments[3]),!(Wp&&Wp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Yu){ep.geometry=null,ep.program=null,ep.wireframe=!1,_h=-1,np=null,Mp.autoUpdate===!0&&Mp.updateMatrixWorld(),Wp.parent===null&&Wp.updateMatrixWorld(),em.enabled&&em.isPresenting&&(Wp=em.getCamera(Wp)),Mp.onBeforeRender(Ku,Mp,Wp,Hp||Zu),qu=Np.get(Mp,Wp),qu.init(),Up.multiplyMatrices(Wp.projectionMatrix,Wp.matrixWorldInverse),xp.setFromProjectionMatrix(Up),Tp=this.localClippingEnabled,Rp=bp.init(this.clippingPlanes,Tp,Wp),Qu=Gp.get(Mp,Wp),Qu.init(),Sm(Mp,Wp,0,Ku.sortObjects),Qu.finish(),Ku.sortObjects===!0&&Qu.sort(op,sp),Rp&&bp.beginShadows();var am=qu.state.shadowsArray;om.render(am,Mp,Wp),qu.setupLights(Wp),Rp&&bp.endShadows(),this.info.autoReset&&this.info.reset(),Hp!==void 0&&this.setRenderTarget(Hp),Xp.render(Qu,Mp,Wp,Kp);var xm=Qu.opaque,Am=Qu.transparent;if(Mp.overrideMaterial){var pm=Mp.overrideMaterial;xm.length&&Bm(xm,Mp,Wp,pm),Am.length&&Bm(Am,Mp,Wp,pm)}else xm.length&&Bm(xm,Mp,Wp),Am.length&&Bm(Am,Mp,Wp);Mp.onAfterRender(Ku,Mp,Wp),Zu!==null&&($p.updateRenderTargetMipmap(Zu),$p.updateMultisampleRenderTarget(Zu)),Ap.buffers.depth.setTest(!0),Ap.buffers.depth.setMask(!0),Ap.buffers.color.setMask(!0),Ap.setPolygonOffset(!1),Qu=null,qu=null}};function Sm(Mp,Wp,Hp,Kp){if(Mp.visible!==!1){var am=Mp.layers.test(Wp.layers);if(am){if(Mp.isGroup)Hp=Mp.renderOrder;else if(Mp.isLOD)Mp.autoUpdate===!0&&Mp.update(Wp);else if(Mp.isLight)qu.pushLight(Mp),Mp.castShadow&&qu.pushShadow(Mp);else if(Mp.isSprite){if(!Mp.frustumCulled||xp.intersectsSprite(Mp)){Kp&&Ip.setFromMatrixPosition(Mp.matrixWorld).applyMatrix4(Up);var xm=kp.update(Mp),Am=Mp.material;Am.visible&&Qu.push(Mp,xm,Am,Hp,Ip.z,null)}}else if(Mp.isImmediateRenderObject)Kp&&Ip.setFromMatrixPosition(Mp.matrixWorld).applyMatrix4(Up),Qu.push(Mp,null,Mp.material,Hp,Ip.z,null);else if((Mp.isMesh||Mp.isLine||Mp.isPoints)&&(Mp.isSkinnedMesh&&Mp.skeleton.frame!==Sp.render.frame&&(Mp.skeleton.update(),Mp.skeleton.frame=Sp.render.frame),!Mp.frustumCulled||xp.intersectsObject(Mp))){Kp&&Ip.setFromMatrixPosition(Mp.matrixWorld).applyMatrix4(Up);var xm=kp.update(Mp),Am=Mp.material;if(Array.isArray(Am))for(var pm=xm.groups,vm=0,wm=pm.length;vm<wm;vm++){var Pm=pm[vm],vp=Am[Pm.materialIndex];vp&&vp.visible&&Qu.push(Mp,xm,vp,Hp,Ip.z,Pm)}else Am.visible&&Qu.push(Mp,xm,Am,Hp,Ip.z,null)}}for(var Ep=Mp.children,vm=0,wm=Ep.length;vm<wm;vm++)Sm(Ep[vm],Wp,Hp,Kp)}}function Bm(Mp,Wp,Hp,Kp){for(var am=0,xm=Mp.length;am<xm;am++){var Am=Mp[am],pm=Am.object,vm=Am.geometry,wm=Kp===void 0?Am.material:Kp,Pm=Am.group;if(Hp.isArrayCamera){ap=Hp;for(var vp=Hp.cameras,Ep=0,Pp=vp.length;Ep<Pp;Ep++){var zp=vp[Ep];pm.layers.test(zp.layers)&&(Ap.viewport(lp.copy(zp.viewport)),qu.setupLights(zp),Rm(pm,Wp,zp,vm,wm,Pm))}}else ap=null,Rm(pm,Wp,Hp,vm,wm,Pm)}}function Rm(Mp,Wp,Hp,Kp,am,xm){if(Mp.onBeforeRender(Ku,Wp,Hp,Kp,am,xm),qu=Np.get(Wp,ap||Hp),Mp.modelViewMatrix.multiplyMatrices(Hp.matrixWorldInverse,Mp.matrixWorld),Mp.normalMatrix.getNormalMatrix(Mp.modelViewMatrix),Mp.isImmediateRenderObject){var Am=km(Hp,Wp,am,Mp);Ap.setMaterial(am),ep.geometry=null,ep.program=null,ep.wireframe=!1,dm(Mp,Am)}else Ku.renderBufferDirect(Hp,Wp,Kp,am,Mp,xm);Mp.onAfterRender(Ku,Wp,Hp,Kp,am,xm),qu=Np.get(Wp,ap||Hp)}function Cm(Mp,Wp,Hp){var Kp=Cp.get(Mp),am=qu.state.lights,xm=qu.state.shadowsArray,Am=am.state.version,pm=fp.getParameters(Mp,am.state,xm,Wp,bp.numPlanes,bp.numIntersection,Hp),vm=fp.getProgramCacheKey(pm),wm=Kp.program,Pm=!0;if(wm===void 0)Mp.addEventListener("dispose",Bp);else if(wm.cacheKey!==vm)lm(Mp);else if(Kp.lightsStateVersion!==Am)Kp.lightsStateVersion=Am,Pm=!1;else{if(pm.shaderID!==void 0)return;Pm=!1}Pm&&(wm=fp.acquireProgram(pm,vm),Kp.program=wm,Kp.uniforms=pm.uniforms,Kp.outputEncoding=pm.outputEncoding,Mp.program=wm);var vp=wm.getAttributes();if(Mp.morphTargets){Mp.numSupportedMorphTargets=0;for(var Ep=0;Ep<Ku.maxMorphTargets;Ep++)vp["morphTarget"+Ep]>=0&&Mp.numSupportedMorphTargets++}if(Mp.morphNormals){Mp.numSupportedMorphNormals=0;for(var Ep=0;Ep<Ku.maxMorphNormals;Ep++)vp["morphNormal"+Ep]>=0&&Mp.numSupportedMorphNormals++}var Pp=Kp.uniforms;(!Mp.isShaderMaterial&&!Mp.isRawShaderMaterial||Mp.clipping===!0)&&(Kp.numClippingPlanes=bp.numPlanes,Kp.numIntersection=bp.numIntersection,Pp.clippingPlanes=bp.uniform),Kp.environment=Mp.isMeshStandardMaterial?Wp.environment:null,Kp.fog=Wp.fog,Kp.needsLights=$m(Mp),Kp.lightsStateVersion=Am,Kp.needsLights&&(Pp.ambientLightColor.value=am.state.ambient,Pp.lightProbe.value=am.state.probe,Pp.directionalLights.value=am.state.directional,Pp.directionalLightShadows.value=am.state.directionalShadow,Pp.spotLights.value=am.state.spot,Pp.spotLightShadows.value=am.state.spotShadow,Pp.rectAreaLights.value=am.state.rectArea,Pp.pointLights.value=am.state.point,Pp.pointLightShadows.value=am.state.pointShadow,Pp.hemisphereLights.value=am.state.hemi,Pp.directionalShadowMap.value=am.state.directionalShadowMap,Pp.directionalShadowMatrix.value=am.state.directionalShadowMatrix,Pp.spotShadowMap.value=am.state.spotShadowMap,Pp.spotShadowMatrix.value=am.state.spotShadowMatrix,Pp.pointShadowMap.value=am.state.pointShadowMap,Pp.pointShadowMatrix.value=am.state.pointShadowMatrix);var zp=Kp.program.getUniforms(),Yp=WebGLUniforms.seqWithValue(zp.seq,Pp);Kp.uniformsList=Yp}function km(Mp,Wp,Hp,Kp){$p.resetTextureUnits();var am=Wp.fog,xm=Hp.isMeshStandardMaterial?Wp.environment:null,Am=Zu===null?Ku.outputEncoding:Zu.texture.encoding,pm=Cp.get(Hp),vm=qu.state.lights;if(Rp&&(Tp||Mp!==np)){var wm=Mp===np&&Hp.id===_h;bp.setState(Hp.clippingPlanes,Hp.clipIntersection,Hp.clipShadows,Mp,pm,wm)}Hp.version===pm.__version?(pm.program===void 0||Hp.fog&&pm.fog!==am||pm.environment!==xm||pm.needsLights&&pm.lightsStateVersion!==vm.state.version||pm.numClippingPlanes!==void 0&&(pm.numClippingPlanes!==bp.numPlanes||pm.numIntersection!==bp.numIntersection)||pm.outputEncoding!==Am)&&Cm(Hp,Wp,Kp):(Cm(Hp,Wp,Kp),pm.__version=Hp.version);var Pm=!1,vp=!1,Ep=!1,Pp=pm.program,zp=Pp.getUniforms(),Yp=pm.uniforms;if(Ap.useProgram(Pp.program)&&(Pm=!0,vp=!0,Ep=!0),Hp.id!==_h&&(_h=Hp.id,vp=!0),Pm||np!==Mp){if(zp.setValue(Lp,"projectionMatrix",Mp.projectionMatrix),wp.logarithmicDepthBuffer&&zp.setValue(Lp,"logDepthBufFC",2/(Math.log(Mp.far+1)/Math.LN2)),np!==Mp&&(np=Mp,vp=!0,Ep=!0),Hp.isShaderMaterial||Hp.isMeshPhongMaterial||Hp.isMeshToonMaterial||Hp.isMeshStandardMaterial||Hp.envMap){var mm=zp.map.cameraPosition;mm!==void 0&&mm.setValue(Lp,Ip.setFromMatrixPosition(Mp.matrixWorld))}(Hp.isMeshPhongMaterial||Hp.isMeshToonMaterial||Hp.isMeshLambertMaterial||Hp.isMeshBasicMaterial||Hp.isMeshStandardMaterial||Hp.isShaderMaterial)&&zp.setValue(Lp,"isOrthographic",Mp.isOrthographicCamera===!0),(Hp.isMeshPhongMaterial||Hp.isMeshToonMaterial||Hp.isMeshLambertMaterial||Hp.isMeshBasicMaterial||Hp.isMeshStandardMaterial||Hp.isShaderMaterial||Hp.skinning)&&zp.setValue(Lp,"viewMatrix",Mp.matrixWorldInverse)}if(Hp.skinning){zp.setOptional(Lp,Kp,"bindMatrix"),zp.setOptional(Lp,Kp,"bindMatrixInverse");var gm=Kp.skeleton;if(gm){var Lm=gm.bones;if(wp.floatVertexTextures){if(gm.boneTexture===void 0){var fm=Math.sqrt(Lm.length*4);fm=MathUtils.ceilPowerOfTwo(fm),fm=Math.max(fm,4);var Om=new Float32Array(fm*fm*4);Om.set(gm.boneMatrices);var Hm=new DataTexture(Om,fm,fm,RGBAFormat,FloatType);gm.boneMatrices=Om,gm.boneTexture=Hm,gm.boneTextureSize=fm}zp.setValue(Lp,"boneTexture",gm.boneTexture,$p),zp.setValue(Lp,"boneTextureSize",gm.boneTextureSize)}else zp.setOptional(Lp,gm,"boneMatrices")}}return(vp||pm.receiveShadow!==Kp.receiveShadow)&&(pm.receiveShadow=Kp.receiveShadow,zp.setValue(Lp,"receiveShadow",Kp.receiveShadow)),vp&&(zp.setValue(Lp,"toneMappingExposure",Ku.toneMappingExposure),zp.setValue(Lp,"toneMappingWhitePoint",Ku.toneMappingWhitePoint),pm.needsLights&&zm(Yp,Ep),am&&Hp.fog&&yp.refreshFogUniforms(Yp,am),yp.refreshMaterialUniforms(Yp,Hp,xm,rp,ip),Yp.ltc_1!==void 0&&(Yp.ltc_1.value=UniformsLib.LTC_1),Yp.ltc_2!==void 0&&(Yp.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Lp,pm.uniformsList,Yp,$p)),Hp.isShaderMaterial&&Hp.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Lp,pm.uniformsList,Yp,$p),Hp.uniformsNeedUpdate=!1),Hp.isSpriteMaterial&&zp.setValue(Lp,"center",Kp.center),zp.setValue(Lp,"modelViewMatrix",Kp.modelViewMatrix),zp.setValue(Lp,"normalMatrix",Kp.normalMatrix),zp.setValue(Lp,"modelMatrix",Kp.matrixWorld),Pp}function zm(Mp,Wp){Mp.ambientLightColor.needsUpdate=Wp,Mp.lightProbe.needsUpdate=Wp,Mp.directionalLights.needsUpdate=Wp,Mp.directionalLightShadows.needsUpdate=Wp,Mp.pointLights.needsUpdate=Wp,Mp.pointLightShadows.needsUpdate=Wp,Mp.spotLights.needsUpdate=Wp,Mp.spotLightShadows.needsUpdate=Wp,Mp.rectAreaLights.needsUpdate=Wp,Mp.hemisphereLights.needsUpdate=Wp}function $m(Mp){return Mp.isMeshLambertMaterial||Mp.isMeshToonMaterial||Mp.isMeshPhongMaterial||Mp.isMeshStandardMaterial||Mp.isShadowMaterial||Mp.isShaderMaterial&&Mp.lights===!0}this.setFramebuffer=function(Mp){_c!==Mp&&Zu===null&&Lp.bindFramebuffer(36160,Mp),_c=Mp},this.getActiveCubeFace=function(){return Ju},this.getActiveMipmapLevel=function(){return Xu},this.getRenderTarget=function(){return Zu},this.setRenderTarget=function(Mp,Wp,Hp){Zu=Mp,Ju=Wp,Xu=Hp,Mp&&Cp.get(Mp).__webglFramebuffer===void 0&&$p.setupRenderTarget(Mp);var Kp=_c,am=!1;if(Mp){var xm=Cp.get(Mp).__webglFramebuffer;Mp.isWebGLCubeRenderTarget?(Kp=xm[Wp||0],am=!0):Mp.isWebGLMultisampleRenderTarget?Kp=Cp.get(Mp).__webglMultisampledFramebuffer:Kp=xm,lp.copy(Mp.viewport),up.copy(Mp.scissor),_f=Mp.scissorTest}else lp.copy(cp).multiplyScalar(rp).floor(),up.copy(hp).multiplyScalar(rp).floor(),_f=dp;if(Xc!==Kp&&(Lp.bindFramebuffer(36160,Kp),Xc=Kp),Ap.viewport(lp),Ap.scissor(up),Ap.setScissorTest(_f),am){var Am=Cp.get(Mp.texture);Lp.framebufferTexture2D(36160,36064,34069+(Wp||0),Am.__webglTexture,Hp||0)}},this.readRenderTargetPixels=function(Mp,Wp,Hp,Kp,am,xm,Am){if(!(Mp&&Mp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var pm=Cp.get(Mp).__webglFramebuffer;if(Mp.isWebGLCubeRenderTarget&&Am!==void 0&&(pm=pm[Am]),pm){var vm=!1;pm!==Xc&&(Lp.bindFramebuffer(36160,pm),vm=!0);try{var wm=Mp.texture,Pm=wm.format,vp=wm.type;if(Pm!==RGBAFormat&&nm.convert(Pm)!==Lp.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(vp!==UnsignedByteType&&nm.convert(vp)!==Lp.getParameter(35738)&&!(vp===FloatType&&(wp.isWebGL2||pp.get("OES_texture_float")||pp.get("WEBGL_color_buffer_float")))&&!(vp===HalfFloatType&&(wp.isWebGL2?pp.get("EXT_color_buffer_float"):pp.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Lp.checkFramebufferStatus(36160)===36053?Wp>=0&&Wp<=Mp.width-Kp&&Hp>=0&&Hp<=Mp.height-am&&Lp.readPixels(Wp,Hp,Kp,am,nm.convert(Pm),nm.convert(vp),xm):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{vm&&Lp.bindFramebuffer(36160,Xc)}}},this.copyFramebufferToTexture=function(Mp,Wp,Hp){Hp===void 0&&(Hp=0);var Kp=Math.pow(2,-Hp),am=Math.floor(Wp.image.width*Kp),xm=Math.floor(Wp.image.height*Kp),Am=nm.convert(Wp.format);$p.setTexture2D(Wp,0),Lp.copyTexImage2D(3553,Hp,Am,Mp.x,Mp.y,am,xm,0),Ap.unbindTexture()},this.copyTextureToTexture=function(Mp,Wp,Hp,Kp){Kp===void 0&&(Kp=0);var am=Wp.image.width,xm=Wp.image.height,Am=nm.convert(Hp.format),pm=nm.convert(Hp.type);$p.setTexture2D(Hp,0),Wp.isDataTexture?Lp.texSubImage2D(3553,Kp,Mp.x,Mp.y,am,xm,Am,pm,Wp.image.data):Wp.isCompressedTexture?Lp.compressedTexSubImage2D(3553,Kp,Mp.x,Mp.y,Wp.mipmaps[0].width,Wp.mipmaps[0].height,Am,Wp.mipmaps[0].data):Lp.texSubImage2D(3553,Kp,Mp.x,Mp.y,Am,pm,Wp.image),Kp===0&&Hp.generateMipmaps&&Lp.generateMipmap(3553),Ap.unbindTexture()},this.initTexture=function(Mp){$p.setTexture2D(Mp,0),Ap.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(_u,$u){this.name="",this.color=new Color(_u),this.density=$u!==void 0?$u:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(_u,$u,Ru){this.name="",this.color=new Color(_u),this.near=$u!==void 0?$u:1,this.far=Ru!==void 0?Ru:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(_u,$u){this.array=_u,this.stride=$u,this.count=_u!==void 0?_u.length/$u:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.array=new _u.array.constructor(_u.array),this.count=_u.count,this.stride=_u.stride,this.usage=_u.usage,this},copyAt:function(_u,$u,Ru){_u*=this.stride,Ru*=$u.stride;for(var Ou=0,Fu=this.stride;Ou<Fu;Ou++)this.array[_u+Ou]=$u.array[Ru+Ou];return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(_u){return this.onUploadCallback=_u,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(_u,$u,Ru,Ou){this.name="",this.data=_u,this.itemSize=$u,this.offset=Ru,this.normalized=Ou===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(_u){for(var $u=0,Ru=this.data.count;$u<Ru;$u++)_vector$6.x=this.getX($u),_vector$6.y=this.getY($u),_vector$6.z=this.getZ($u),_vector$6.applyMatrix4(_u),this.setXYZ($u,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset]=$u,this},setY:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+1]=$u,this},setZ:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+2]=$u,this},setW:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+3]=$u,this},getX:function(_u){return this.data.array[_u*this.data.stride+this.offset]},getY:function(_u){return this.data.array[_u*this.data.stride+this.offset+1]},getZ:function(_u){return this.data.array[_u*this.data.stride+this.offset+2]},getW:function(_u){return this.data.array[_u*this.data.stride+this.offset+3]},setXY:function(_u,$u,Ru){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Ru,this},setXYZ:function(_u,$u,Ru,Ou){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Ru,this.data.array[_u+2]=Ou,this},setXYZW:function(_u,$u,Ru,Ou,Fu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Ru,this.data.array[_u+2]=Ou,this.data.array[_u+3]=Fu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Ru=$u*this.data.stride+this.offset,Ou=0;Ou<this.itemSize;Ou++)_u.push(this.data.array[Ru+Ou]);return new BufferAttribute(new this.array.constructor(_u),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Ru=$u*this.data.stride+this.offset,Ou=0;Ou<this.itemSize;Ou++)_u.push(this.data.array[Ru+Ou]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_u,normalized:this.normalized}}});function SpriteMaterial(_u){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(_u)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.rotation=_u.rotation,this.sizeAttenuation=_u.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(_u){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var $u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Ru=new InterleavedBuffer($u,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Ru,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Ru,2,3,!1))}this.geometry=_geometry,this.material=_u!==void 0?_u:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(_u,$u){_u.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_u.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_u.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_u.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Ru=this.material.rotation,Ou,Fu;Ru!==0&&(Fu=Math.cos(Ru),Ou=Math.sin(Ru));var Nu=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Nu,_worldScale,Ou,Fu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Nu,_worldScale,Ou,Fu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Nu,_worldScale,Ou,Fu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Vu=_u.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Vu===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Nu,_worldScale,Ou,Fu),_uvB$1.set(0,1),Vu=_u.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Vu===null))){var Gu=_u.ray.origin.distanceTo(_intersectPoint);Gu<_u.near||Gu>_u.far||$u.push({distance:Gu,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.center!==void 0&&this.center.copy(_u.center),this}});function transformVertex(_u,$u,Ru,Ou,Fu,Nu){_alignedPosition.subVectors(_u,Ru).addScalar(.5).multiply(Ou),Fu!==void 0?(_rotatedPosition.x=Nu*_alignedPosition.x-Fu*_alignedPosition.y,_rotatedPosition.y=Fu*_alignedPosition.x+Nu*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_u.copy($u),_u.x+=_rotatedPosition.x,_u.y+=_rotatedPosition.y,_u.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(_u){Object3D.prototype.copy.call(this,_u,!1);for(var $u=_u.levels,Ru=0,Ou=$u.length;Ru<Ou;Ru++){var Fu=$u[Ru];this.addLevel(Fu.object.clone(),Fu.distance)}return this.autoUpdate=_u.autoUpdate,this},addLevel:function(_u,$u){$u===void 0&&($u=0),$u=Math.abs($u);for(var Ru=this.levels,Ou=0;Ou<Ru.length&&!($u<Ru[Ou].distance);Ou++);return Ru.splice(Ou,0,{distance:$u,object:_u}),this.add(_u),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(_u){var $u=this.levels;if($u.length>0){for(var Ru=1,Ou=$u.length;Ru<Ou&&!(_u<$u[Ru].distance);Ru++);return $u[Ru-1].object}return null},raycast:function(_u,$u){var Ru=this.levels;if(Ru.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Ou=_u.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Ou).raycast(_u,$u)}},update:function(_u){var $u=this.levels;if($u.length>1){_v1$4.setFromMatrixPosition(_u.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Ru=_v1$4.distanceTo(_v2$2)/_u.zoom;$u[0].object.visible=!0;for(var Ou=1,Fu=$u.length;Ou<Fu&&Ru>=$u[Ou].distance;Ou++)$u[Ou-1].object.visible=!1,$u[Ou].object.visible=!0;for(this._currentLevel=Ou-1;Ou<Fu;Ou++)$u[Ou].object.visible=!1}},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);this.autoUpdate===!1&&($u.object.autoUpdate=!1),$u.object.levels=[];for(var Ru=this.levels,Ou=0,Fu=Ru.length;Ou<Fu;Ou++){var Nu=Ru[Ou];$u.object.levels.push({object:Nu.object.uuid,distance:Nu.distance})}return $u}});function SkinnedMesh(_u,$u){_u&&_u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,_u,$u),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(_u,$u){this.skeleton=_u,$u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),$u=this.matrixWorld),this.bindMatrix.copy($u),this.bindMatrixInverse.getInverse($u)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var _u=new Vector4,$u=this.geometry.attributes.skinWeight,Ru=0,Ou=$u.count;Ru<Ou;Ru++){_u.x=$u.getX(Ru),_u.y=$u.getY(Ru),_u.z=$u.getZ(Ru),_u.w=$u.getW(Ru);var Fu=1/_u.manhattanLength();Fu!==1/0?_u.multiplyScalar(Fu):_u.set(1,0,0,0),$u.setXYZW(Ru,_u.x,_u.y,_u.z,_u.w)}},updateMatrixWorld:function(_u){Mesh.prototype.updateMatrixWorld.call(this,_u),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var _u=new Vector3,$u=new Vector4,Ru=new Vector4,Ou=new Vector3,Fu=new Matrix4;return function(Nu,Vu){var Gu=this.skeleton,Uu=this.geometry;$u.fromBufferAttribute(Uu.attributes.skinIndex,Nu),Ru.fromBufferAttribute(Uu.attributes.skinWeight,Nu),_u.fromBufferAttribute(Uu.attributes.position,Nu).applyMatrix4(this.bindMatrix),Vu.set(0,0,0);for(var Hu=0;Hu<4;Hu++){var Wu=Ru.getComponent(Hu);if(Wu!==0){var Qu=$u.getComponent(Hu);Fu.multiplyMatrices(Gu.bones[Qu].matrixWorld,Gu.boneInverses[Qu]),Vu.addScaledVector(Ou.copy(_u).applyMatrix4(Fu),Wu)}}return Vu.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(_u,$u){if(_u=_u||[],this.bones=_u.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,$u===void 0)this.calculateInverses();else if(this.bones.length===$u.length)this.boneInverses=$u.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Ru=0,Ou=this.bones.length;Ru<Ou;Ru++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var _u=0,$u=this.bones.length;_u<$u;_u++){var Ru=new Matrix4;this.bones[_u]&&Ru.getInverse(this.bones[_u].matrixWorld),this.boneInverses.push(Ru)}},pose:function(){var _u,$u,Ru;for($u=0,Ru=this.bones.length;$u<Ru;$u++)_u=this.bones[$u],_u&&_u.matrixWorld.getInverse(this.boneInverses[$u]);for($u=0,Ru=this.bones.length;$u<Ru;$u++)_u=this.bones[$u],_u&&(_u.parent&&_u.parent.isBone?(_u.matrix.getInverse(_u.parent.matrixWorld),_u.matrix.multiply(_u.matrixWorld)):_u.matrix.copy(_u.matrixWorld),_u.matrix.decompose(_u.position,_u.quaternion,_u.scale))},update:function(){for(var _u=this.bones,$u=this.boneInverses,Ru=this.boneMatrices,Ou=this.boneTexture,Fu=0,Nu=_u.length;Fu<Nu;Fu++){var Vu=_u[Fu]?_u[Fu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Vu,$u[Fu]),_offsetMatrix.toArray(Ru,Fu*16)}Ou!==void 0&&(Ou.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(_u){for(var $u=0,Ru=this.bones.length;$u<Ru;$u++){var Ou=this.bones[$u];if(Ou.name===_u)return Ou}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(_u,$u,Ru){Mesh.call(this,_u,$u),this.instanceMatrix=new BufferAttribute(new Float32Array(Ru*16),16),this.count=Ru,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(_u,$u){$u.fromArray(this.instanceMatrix.array,_u*16)},raycast:function(_u,$u){var Ru=this.matrixWorld,Ou=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Fu=0;Fu<Ou;Fu++){this.getMatrixAt(Fu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Ru,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_u,_instanceIntersects);for(var Nu=0,Vu=_instanceIntersects.length;Nu<Vu;Nu++){var Gu=_instanceIntersects[Nu];Gu.instanceId=Fu,Gu.object=this,$u.push(Gu)}_instanceIntersects.length=0}},setMatrixAt:function(_u,$u){$u.toArray(this.instanceMatrix.array,_u*16)},updateMorphTargets:function(){}});function LineBasicMaterial(_u){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(_u)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.linewidth=_u.linewidth,this.linecap=_u.linecap,this.linejoin=_u.linejoin,this.morphTargets=_u.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(_u,$u,Ru){Ru===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Ru=[0],Ou=1,Fu=$u.count;Ou<Fu;Ou++)_start.fromBufferAttribute($u,Ou-1),_end.fromBufferAttribute($u,Ou),Ru[Ou]=Ru[Ou-1],Ru[Ou]+=_start.distanceTo(_end);_u.setAttribute("lineDistance",new Float32BufferAttribute(Ru,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry){var Nu=_u.vertices,Ru=_u.lineDistances;Ru[0]=0;for(var Ou=1,Fu=Nu.length;Ou<Fu;Ou++)Ru[Ou]=Ru[Ou-1],Ru[Ou]+=Nu[Ou-1].distanceTo(Nu[Ou])}return this},raycast:function(_u,$u){var Ru=this.geometry,Ou=this.matrixWorld,Fu=_u.params.Line.threshold;if(Ru.boundingSphere===null&&Ru.computeBoundingSphere(),_sphere$2.copy(Ru.boundingSphere),_sphere$2.applyMatrix4(Ou),_sphere$2.radius+=Fu,_u.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Ou),_ray$1.copy(_u.ray).applyMatrix4(_inverseMatrix$1);var Nu=Fu/((this.scale.x+this.scale.y+this.scale.z)/3),Vu=Nu*Nu,Gu=new Vector3,Uu=new Vector3,Hu=new Vector3,Wu=new Vector3,Qu=this&&this.isLineSegments?2:1;if(Ru.isBufferGeometry){var qu=Ru.index,Ku=Ru.attributes,Yu=Ku.position.array;if(qu!==null)for(var _c=qu.array,Ju=0,Xu=_c.length-1;Ju<Xu;Ju+=Qu){var Zu=_c[Ju],Xc=_c[Ju+1];Gu.fromArray(Yu,Zu*3),Uu.fromArray(Yu,Xc*3);var _h=_ray$1.distanceSqToSegment(Gu,Uu,Wu,Hu);if(!(_h>Vu)){Wu.applyMatrix4(this.matrixWorld);var ep=_u.ray.origin.distanceTo(Wu);ep<_u.near||ep>_u.far||$u.push({distance:ep,point:Hu.clone().applyMatrix4(this.matrixWorld),index:Ju,face:null,faceIndex:null,object:this})}}else for(var Ju=0,Xu=Yu.length/3-1;Ju<Xu;Ju+=Qu){Gu.fromArray(Yu,3*Ju),Uu.fromArray(Yu,3*Ju+3);var _h=_ray$1.distanceSqToSegment(Gu,Uu,Wu,Hu);if(!(_h>Vu)){Wu.applyMatrix4(this.matrixWorld);var ep=_u.ray.origin.distanceTo(Wu);ep<_u.near||ep>_u.far||$u.push({distance:ep,point:Hu.clone().applyMatrix4(this.matrixWorld),index:Ju,face:null,faceIndex:null,object:this})}}}else if(Ru.isGeometry)for(var np=Ru.vertices,ap=np.length,Ju=0;Ju<ap-1;Ju+=Qu){var _h=_ray$1.distanceSqToSegment(np[Ju],np[Ju+1],Wu,Hu);if(!(_h>Vu)){Wu.applyMatrix4(this.matrixWorld);var ep=_u.ray.origin.distanceTo(Wu);ep<_u.near||ep>_u.far||$u.push({distance:ep,point:Hu.clone().applyMatrix4(this.matrixWorld),index:Ju,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var _u=this.geometry,$u,Ru,Ou;if(_u.isBufferGeometry){var Fu=_u.morphAttributes,Nu=Object.keys(Fu);if(Nu.length>0){var Vu=Fu[Nu[0]];if(Vu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Ru=Vu.length;$u<Ru;$u++)Ou=Vu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ou]=$u}}else{var Gu=_u.morphTargets;Gu!==void 0&&Gu.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(_u,$u){Line$1.call(this,_u,$u),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Ru=[],Ou=0,Fu=$u.count;Ou<Fu;Ou+=2)_start$1.fromBufferAttribute($u,Ou),_end$1.fromBufferAttribute($u,Ou+1),Ru[Ou]=Ou===0?0:Ru[Ou-1],Ru[Ou+1]=Ru[Ou]+_start$1.distanceTo(_end$1);_u.setAttribute("lineDistance",new Float32BufferAttribute(Ru,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry)for(var Nu=_u.vertices,Ru=_u.lineDistances,Ou=0,Fu=Nu.length;Ou<Fu;Ou+=2)_start$1.copy(Nu[Ou]),_end$1.copy(Nu[Ou+1]),Ru[Ou]=Ou===0?0:Ru[Ou-1],Ru[Ou+1]=Ru[Ou]+_start$1.distanceTo(_end$1);return this}});function LineLoop(_u,$u){Line$1.call(this,_u,$u),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(_u){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(_u)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.size=_u.size,this.sizeAttenuation=_u.sizeAttenuation,this.morphTargets=_u.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(_u,$u){Object3D.call(this),this.type="Points",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(_u,$u){var Ru=this.geometry,Ou=this.matrixWorld,Fu=_u.params.Points.threshold;if(Ru.boundingSphere===null&&Ru.computeBoundingSphere(),_sphere$3.copy(Ru.boundingSphere),_sphere$3.applyMatrix4(Ou),_sphere$3.radius+=Fu,_u.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Ou),_ray$2.copy(_u.ray).applyMatrix4(_inverseMatrix$2);var Nu=Fu/((this.scale.x+this.scale.y+this.scale.z)/3),Vu=Nu*Nu;if(Ru.isBufferGeometry){var Gu=Ru.index,Uu=Ru.attributes,Hu=Uu.position.array;if(Gu!==null)for(var Wu=Gu.array,Qu=0,qu=Wu.length;Qu<qu;Qu++){var Ku=Wu[Qu];_position$1.fromArray(Hu,Ku*3),testPoint(_position$1,Ku,Vu,Ou,_u,$u,this)}else for(var Qu=0,Yu=Hu.length/3;Qu<Yu;Qu++)_position$1.fromArray(Hu,Qu*3),testPoint(_position$1,Qu,Vu,Ou,_u,$u,this)}else for(var _c=Ru.vertices,Qu=0,Yu=_c.length;Qu<Yu;Qu++)testPoint(_c[Qu],Qu,Vu,Ou,_u,$u,this)}},updateMorphTargets:function(){var _u=this.geometry,$u,Ru,Ou;if(_u.isBufferGeometry){var Fu=_u.morphAttributes,Nu=Object.keys(Fu);if(Nu.length>0){var Vu=Fu[Nu[0]];if(Vu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Ru=Vu.length;$u<Ru;$u++)Ou=Vu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Ou]=$u}}else{var Gu=_u.morphTargets;Gu!==void 0&&Gu.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(_u,$u,Ru,Ou,Fu,Nu,Vu){var Gu=_ray$2.distanceSqToPoint(_u);if(Gu<Ru){var Uu=new Vector3;_ray$2.closestPointToPoint(_u,Uu),Uu.applyMatrix4(Ou);var Hu=Fu.ray.origin.distanceTo(Uu);if(Hu<Fu.near||Hu>Fu.far)return;Nu.push({distance:Hu,distanceToRay:Math.sqrt(Gu),point:Uu,index:$u,face:null,object:Vu})}}function VideoTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){Texture.call(this,_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu),this.format=Vu!==void 0?Vu:RGBFormat,this.minFilter=Nu!==void 0?Nu:LinearFilter,this.magFilter=Fu!==void 0?Fu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var _u=this.image;_u.readyState>=_u.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu){Texture.call(this,null,Nu,Vu,Gu,Uu,Hu,Ou,Fu,Wu,Qu),this.image={width:$u,height:Ru},this.mipmaps=_u,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){Texture.call(this,_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu){if(Hu=Hu!==void 0?Hu:DepthFormat,Hu!==DepthFormat&&Hu!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Ru===void 0&&Hu===DepthFormat&&(Ru=UnsignedShortType),Ru===void 0&&Hu===DepthStencilFormat&&(Ru=UnsignedInt248Type),Texture.call(this,null,Ou,Fu,Nu,Vu,Gu,Hu,Ru,Uu),this.image={width:_u,height:$u},this.magFilter=Vu!==void 0?Vu:NearestFilter,this.minFilter=Gu!==void 0?Gu:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(_u){BufferGeometry.call(this),this.type="WireframeGeometry";var $u=[],Ru,Ou,Fu,Nu,Vu,Gu=[0,0],Uu={},Hu,Wu,Qu,qu,Ku=["a","b","c"],Yu;if(_u&&_u.isGeometry){var _c=_u.faces;for(Ru=0,Fu=_c.length;Ru<Fu;Ru++){var Ju=_c[Ru];for(Ou=0;Ou<3;Ou++)Wu=Ju[Ku[Ou]],Qu=Ju[Ku[(Ou+1)%3]],Gu[0]=Math.min(Wu,Qu),Gu[1]=Math.max(Wu,Qu),qu=Gu[0]+","+Gu[1],Uu[qu]===void 0&&(Uu[qu]={index1:Gu[0],index2:Gu[1]})}for(qu in Uu)Hu=Uu[qu],Yu=_u.vertices[Hu.index1],$u.push(Yu.x,Yu.y,Yu.z),Yu=_u.vertices[Hu.index2],$u.push(Yu.x,Yu.y,Yu.z)}else if(_u&&_u.isBufferGeometry){var Xu,Zu,Xc,_h,ep,np,ap,lp;if(Yu=new Vector3,_u.index!==null){for(Xu=_u.attributes.position,Zu=_u.index,Xc=_u.groups,Xc.length===0&&(Xc=[{start:0,count:Zu.count,materialIndex:0}]),Nu=0,Vu=Xc.length;Nu<Vu;++Nu)for(_h=Xc[Nu],ep=_h.start,np=_h.count,Ru=ep,Fu=ep+np;Ru<Fu;Ru+=3)for(Ou=0;Ou<3;Ou++)Wu=Zu.getX(Ru+Ou),Qu=Zu.getX(Ru+(Ou+1)%3),Gu[0]=Math.min(Wu,Qu),Gu[1]=Math.max(Wu,Qu),qu=Gu[0]+","+Gu[1],Uu[qu]===void 0&&(Uu[qu]={index1:Gu[0],index2:Gu[1]});for(qu in Uu)Hu=Uu[qu],Yu.fromBufferAttribute(Xu,Hu.index1),$u.push(Yu.x,Yu.y,Yu.z),Yu.fromBufferAttribute(Xu,Hu.index2),$u.push(Yu.x,Yu.y,Yu.z)}else for(Xu=_u.attributes.position,Ru=0,Fu=Xu.count/3;Ru<Fu;Ru++)for(Ou=0;Ou<3;Ou++)ap=3*Ru+Ou,Yu.fromBufferAttribute(Xu,ap),$u.push(Yu.x,Yu.y,Yu.z),lp=3*Ru+(Ou+1)%3,Yu.fromBufferAttribute(Xu,lp),$u.push(Yu.x,Yu.y,Yu.z)}this.setAttribute("position",new Float32BufferAttribute($u,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(_u,$u,Ru){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:_u,slices:$u,stacks:Ru},this.fromBufferGeometry(new ParametricBufferGeometry(_u,$u,Ru)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(_u,$u,Ru){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:_u,slices:$u,stacks:Ru};var Ou=[],Fu=[],Nu=[],Vu=[],Gu=1e-5,Uu=new Vector3,Hu=new Vector3,Wu=new Vector3,Qu=new Vector3,qu=new Vector3,Ku,Yu;_u.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var _c=$u+1;for(Ku=0;Ku<=Ru;Ku++){var Ju=Ku/Ru;for(Yu=0;Yu<=$u;Yu++){var Xu=Yu/$u;_u(Xu,Ju,Hu),Fu.push(Hu.x,Hu.y,Hu.z),Xu-Gu>=0?(_u(Xu-Gu,Ju,Wu),Qu.subVectors(Hu,Wu)):(_u(Xu+Gu,Ju,Wu),Qu.subVectors(Wu,Hu)),Ju-Gu>=0?(_u(Xu,Ju-Gu,Wu),qu.subVectors(Hu,Wu)):(_u(Xu,Ju+Gu,Wu),qu.subVectors(Wu,Hu)),Uu.crossVectors(Qu,qu).normalize(),Nu.push(Uu.x,Uu.y,Uu.z),Vu.push(Xu,Ju)}}for(Ku=0;Ku<Ru;Ku++)for(Yu=0;Yu<$u;Yu++){var Zu=Ku*_c+Yu,Xc=Ku*_c+Yu+1,_h=(Ku+1)*_c+Yu+1,ep=(Ku+1)*_c+Yu;Ou.push(Zu,Xc,ep),Ou.push(Xc,_h,ep)}this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Vu,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(_u,$u,Ru,Ou){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:_u,indices:$u,radius:Ru,detail:Ou},this.fromBufferGeometry(new PolyhedronBufferGeometry(_u,$u,Ru,Ou)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(_u,$u,Ru,Ou){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:_u,indices:$u,radius:Ru,detail:Ou},Ru=Ru||1,Ou=Ou||0;var Fu=[],Nu=[];Vu(Ou),Uu(Ru),Hu(),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Fu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Nu,2)),Ou===0?this.computeVertexNormals():this.normalizeNormals();function Vu(Xu){for(var Zu=new Vector3,Xc=new Vector3,_h=new Vector3,ep=0;ep<$u.length;ep+=3)qu($u[ep+0],Zu),qu($u[ep+1],Xc),qu($u[ep+2],_h),Gu(Zu,Xc,_h,Xu)}function Gu(Xu,Zu,Xc,_h){var ep=Math.pow(2,_h),np=[],ap,lp;for(ap=0;ap<=ep;ap++){np[ap]=[];var up=Xu.clone().lerp(Xc,ap/ep),_f=Zu.clone().lerp(Xc,ap/ep),tp=ep-ap;for(lp=0;lp<=tp;lp++)lp===0&&ap===ep?np[ap][lp]=up:np[ap][lp]=up.clone().lerp(_f,lp/tp)}for(ap=0;ap<ep;ap++)for(lp=0;lp<2*(ep-ap)-1;lp++){var ip=Math.floor(lp/2);lp%2===0?(Qu(np[ap][ip+1]),Qu(np[ap+1][ip]),Qu(np[ap][ip])):(Qu(np[ap][ip+1]),Qu(np[ap+1][ip+1]),Qu(np[ap+1][ip]))}}function Uu(Xu){for(var Zu=new Vector3,Xc=0;Xc<Fu.length;Xc+=3)Zu.x=Fu[Xc+0],Zu.y=Fu[Xc+1],Zu.z=Fu[Xc+2],Zu.normalize().multiplyScalar(Xu),Fu[Xc+0]=Zu.x,Fu[Xc+1]=Zu.y,Fu[Xc+2]=Zu.z}function Hu(){for(var Xu=new Vector3,Zu=0;Zu<Fu.length;Zu+=3){Xu.x=Fu[Zu+0],Xu.y=Fu[Zu+1],Xu.z=Fu[Zu+2];var Xc=_c(Xu)/2/Math.PI+.5,_h=Ju(Xu)/Math.PI+.5;Nu.push(Xc,1-_h)}Ku(),Wu()}function Wu(){for(var Xu=0;Xu<Nu.length;Xu+=6){var Zu=Nu[Xu+0],Xc=Nu[Xu+2],_h=Nu[Xu+4],ep=Math.max(Zu,Xc,_h),np=Math.min(Zu,Xc,_h);ep>.9&&np<.1&&(Zu<.2&&(Nu[Xu+0]+=1),Xc<.2&&(Nu[Xu+2]+=1),_h<.2&&(Nu[Xu+4]+=1))}}function Qu(Xu){Fu.push(Xu.x,Xu.y,Xu.z)}function qu(Xu,Zu){var Xc=Xu*3;Zu.x=_u[Xc+0],Zu.y=_u[Xc+1],Zu.z=_u[Xc+2]}function Ku(){for(var Xu=new Vector3,Zu=new Vector3,Xc=new Vector3,_h=new Vector3,ep=new Vector2,np=new Vector2,ap=new Vector2,lp=0,up=0;lp<Fu.length;lp+=9,up+=6){Xu.set(Fu[lp+0],Fu[lp+1],Fu[lp+2]),Zu.set(Fu[lp+3],Fu[lp+4],Fu[lp+5]),Xc.set(Fu[lp+6],Fu[lp+7],Fu[lp+8]),ep.set(Nu[up+0],Nu[up+1]),np.set(Nu[up+2],Nu[up+3]),ap.set(Nu[up+4],Nu[up+5]),_h.copy(Xu).add(Zu).add(Xc).divideScalar(3);var _f=_c(_h);Yu(ep,up+0,Xu,_f),Yu(np,up+2,Zu,_f),Yu(ap,up+4,Xc,_f)}}function Yu(Xu,Zu,Xc,_h){_h<0&&Xu.x===1&&(Nu[Zu]=Xu.x-1),Xc.x===0&&Xc.z===0&&(Nu[Zu]=_h/2/Math.PI+.5)}function _c(Xu){return Math.atan2(Xu.z,-Xu.x)}function Ju(Xu){return Math.atan2(-Xu.y,Math.sqrt(Xu.x*Xu.x+Xu.z*Xu.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(_u,$u){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new TetrahedronBufferGeometry(_u,$u)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(_u,$u){var Ru=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Ou=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Ru,Ou,_u,$u),this.type="TetrahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(_u,$u){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new OctahedronBufferGeometry(_u,$u)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(_u,$u){var Ru=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Ou=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Ru,Ou,_u,$u),this.type="OctahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(_u,$u){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new IcosahedronBufferGeometry(_u,$u)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(_u,$u){var Ru=(1+Math.sqrt(5))/2,Ou=[-1,Ru,0,1,Ru,0,-1,-Ru,0,1,-Ru,0,0,-1,Ru,0,1,Ru,0,-1,-Ru,0,1,-Ru,Ru,0,-1,Ru,0,1,-Ru,0,-1,-Ru,0,1],Fu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Ou,Fu,_u,$u),this.type="IcosahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(_u,$u){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new DodecahedronBufferGeometry(_u,$u)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(_u,$u){var Ru=(1+Math.sqrt(5))/2,Ou=1/Ru,Fu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ou,-Ru,0,-Ou,Ru,0,Ou,-Ru,0,Ou,Ru,-Ou,-Ru,0,-Ou,Ru,0,Ou,-Ru,0,Ou,Ru,0,-Ru,0,-Ou,Ru,0,-Ou,-Ru,0,Ou,Ru,0,Ou],Nu=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Fu,Nu,_u,$u),this.type="DodecahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(_u,$u,Ru,Ou,Fu,Nu){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Ru,radialSegments:Ou,closed:Fu},Nu!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Vu=new TubeBufferGeometry(_u,$u,Ru,Ou,Fu);this.tangents=Vu.tangents,this.normals=Vu.normals,this.binormals=Vu.binormals,this.fromBufferGeometry(Vu),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(_u,$u,Ru,Ou,Fu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Ru,radialSegments:Ou,closed:Fu},$u=$u||64,Ru=Ru||1,Ou=Ou||8,Fu=Fu||!1;var Nu=_u.computeFrenetFrames($u,Fu);this.tangents=Nu.tangents,this.normals=Nu.normals,this.binormals=Nu.binormals;var Vu=new Vector3,Gu=new Vector3,Uu=new Vector2,Hu=new Vector3,Wu,Qu,qu=[],Ku=[],Yu=[],_c=[];Ju(),this.setIndex(_c),this.setAttribute("position",new Float32BufferAttribute(qu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Yu,2));function Ju(){for(Wu=0;Wu<$u;Wu++)Xu(Wu);Xu(Fu===!1?$u:0),Xc(),Zu()}function Xu(_h){Hu=_u.getPointAt(_h/$u,Hu);var ep=Nu.normals[_h],np=Nu.binormals[_h];for(Qu=0;Qu<=Ou;Qu++){var ap=Qu/Ou*Math.PI*2,lp=Math.sin(ap),up=-Math.cos(ap);Gu.x=up*ep.x+lp*np.x,Gu.y=up*ep.y+lp*np.y,Gu.z=up*ep.z+lp*np.z,Gu.normalize(),Ku.push(Gu.x,Gu.y,Gu.z),Vu.x=Hu.x+Ru*Gu.x,Vu.y=Hu.y+Ru*Gu.y,Vu.z=Hu.z+Ru*Gu.z,qu.push(Vu.x,Vu.y,Vu.z)}}function Zu(){for(Qu=1;Qu<=$u;Qu++)for(Wu=1;Wu<=Ou;Wu++){var _h=(Ou+1)*(Qu-1)+(Wu-1),ep=(Ou+1)*Qu+(Wu-1),np=(Ou+1)*Qu+Wu,ap=(Ou+1)*(Qu-1)+Wu;_c.push(_h,ep,ap),_c.push(ep,np,ap)}}function Xc(){for(Wu=0;Wu<=$u;Wu++)for(Qu=0;Qu<=Ou;Qu++)Uu.x=Wu/$u,Uu.y=Qu/Ou,Yu.push(Uu.x,Uu.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.path=this.parameters.path.toJSON(),_u};function TorusKnotGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Ru,radialSegments:Ou,p:Fu,q:Nu},Vu!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(_u,$u,Ru,Ou,Fu,Nu)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(_u,$u,Ru,Ou,Fu,Nu){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Ru,radialSegments:Ou,p:Fu,q:Nu},_u=_u||1,$u=$u||.4,Ru=Math.floor(Ru)||64,Ou=Math.floor(Ou)||8,Fu=Fu||2,Nu=Nu||3;var Vu=[],Gu=[],Uu=[],Hu=[],Wu,Qu,qu=new Vector3,Ku=new Vector3,Yu=new Vector3,_c=new Vector3,Ju=new Vector3,Xu=new Vector3,Zu=new Vector3;for(Wu=0;Wu<=Ru;++Wu){var Xc=Wu/Ru*Fu*Math.PI*2;for(tp(Xc,Fu,Nu,_u,Yu),tp(Xc+.01,Fu,Nu,_u,_c),Xu.subVectors(_c,Yu),Zu.addVectors(_c,Yu),Ju.crossVectors(Xu,Zu),Zu.crossVectors(Ju,Xu),Ju.normalize(),Zu.normalize(),Qu=0;Qu<=Ou;++Qu){var _h=Qu/Ou*Math.PI*2,ep=-$u*Math.cos(_h),np=$u*Math.sin(_h);qu.x=Yu.x+(ep*Zu.x+np*Ju.x),qu.y=Yu.y+(ep*Zu.y+np*Ju.y),qu.z=Yu.z+(ep*Zu.z+np*Ju.z),Gu.push(qu.x,qu.y,qu.z),Ku.subVectors(qu,Yu).normalize(),Uu.push(Ku.x,Ku.y,Ku.z),Hu.push(Wu/Ru),Hu.push(Qu/Ou)}}for(Qu=1;Qu<=Ru;Qu++)for(Wu=1;Wu<=Ou;Wu++){var ap=(Ou+1)*(Qu-1)+(Wu-1),lp=(Ou+1)*Qu+(Wu-1),up=(Ou+1)*Qu+Wu,_f=(Ou+1)*(Qu-1)+Wu;Vu.push(ap,lp,_f),Vu.push(lp,up,_f)}this.setIndex(Vu),this.setAttribute("position",new Float32BufferAttribute(Gu,3)),this.setAttribute("normal",new Float32BufferAttribute(Uu,3)),this.setAttribute("uv",new Float32BufferAttribute(Hu,2));function tp(ip,rp,op,sp,cp){var hp=Math.cos(ip),dp=Math.sin(ip),xp=op/rp*ip,bp=Math.cos(xp);cp.x=sp*(2+bp)*.5*hp,cp.y=sp*(2+bp)*dp*.5,cp.z=sp*Math.sin(xp)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(_u,$u,Ru,Ou,Fu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Ru,tubularSegments:Ou,arc:Fu},this.fromBufferGeometry(new TorusBufferGeometry(_u,$u,Ru,Ou,Fu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(_u,$u,Ru,Ou,Fu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Ru,tubularSegments:Ou,arc:Fu},_u=_u||1,$u=$u||.4,Ru=Math.floor(Ru)||8,Ou=Math.floor(Ou)||6,Fu=Fu||Math.PI*2;var Nu=[],Vu=[],Gu=[],Uu=[],Hu=new Vector3,Wu=new Vector3,Qu=new Vector3,qu,Ku;for(qu=0;qu<=Ru;qu++)for(Ku=0;Ku<=Ou;Ku++){var Yu=Ku/Ou*Fu,_c=qu/Ru*Math.PI*2;Wu.x=(_u+$u*Math.cos(_c))*Math.cos(Yu),Wu.y=(_u+$u*Math.cos(_c))*Math.sin(Yu),Wu.z=$u*Math.sin(_c),Vu.push(Wu.x,Wu.y,Wu.z),Hu.x=_u*Math.cos(Yu),Hu.y=_u*Math.sin(Yu),Qu.subVectors(Wu,Hu).normalize(),Gu.push(Qu.x,Qu.y,Qu.z),Uu.push(Ku/Ou),Uu.push(qu/Ru)}for(qu=1;qu<=Ru;qu++)for(Ku=1;Ku<=Ou;Ku++){var Ju=(Ou+1)*qu+Ku-1,Xu=(Ou+1)*(qu-1)+Ku-1,Zu=(Ou+1)*(qu-1)+Ku,Xc=(Ou+1)*qu+Ku;Nu.push(Ju,Xu,Xc),Nu.push(Xu,Zu,Xc)}this.setIndex(Nu),this.setAttribute("position",new Float32BufferAttribute(Vu,3)),this.setAttribute("normal",new Float32BufferAttribute(Gu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(_u,$u,Ru){Ru=Ru||2;var Ou=$u&&$u.length,Fu=Ou?$u[0]*Ru:_u.length,Nu=linkedList(_u,0,Fu,Ru,!0),Vu=[];if(!Nu||Nu.next===Nu.prev)return Vu;var Gu,Uu,Hu,Wu,Qu,qu,Ku;if(Ou&&(Nu=eliminateHoles(_u,$u,Nu,Ru)),_u.length>80*Ru){Gu=Hu=_u[0],Uu=Wu=_u[1];for(var Yu=Ru;Yu<Fu;Yu+=Ru)Qu=_u[Yu],qu=_u[Yu+1],Qu<Gu&&(Gu=Qu),qu<Uu&&(Uu=qu),Qu>Hu&&(Hu=Qu),qu>Wu&&(Wu=qu);Ku=Math.max(Hu-Gu,Wu-Uu),Ku=Ku!==0?1/Ku:0}return earcutLinked(Nu,Vu,Ru,Gu,Uu,Ku),Vu}};function linkedList(_u,$u,Ru,Ou,Fu){var Nu,Vu;if(Fu===signedArea(_u,$u,Ru,Ou)>0)for(Nu=$u;Nu<Ru;Nu+=Ou)Vu=insertNode(Nu,_u[Nu],_u[Nu+1],Vu);else for(Nu=Ru-Ou;Nu>=$u;Nu-=Ou)Vu=insertNode(Nu,_u[Nu],_u[Nu+1],Vu);return Vu&&equals(Vu,Vu.next)&&(removeNode(Vu),Vu=Vu.next),Vu}function filterPoints(_u,$u){if(!_u)return _u;$u||($u=_u);var Ru=_u,Ou;do if(Ou=!1,!Ru.steiner&&(equals(Ru,Ru.next)||area(Ru.prev,Ru,Ru.next)===0)){if(removeNode(Ru),Ru=$u=Ru.prev,Ru===Ru.next)break;Ou=!0}else Ru=Ru.next;while(Ou||Ru!==$u);return $u}function earcutLinked(_u,$u,Ru,Ou,Fu,Nu,Vu){if(!!_u){!Vu&&Nu&&indexCurve(_u,Ou,Fu,Nu);for(var Gu=_u,Uu,Hu;_u.prev!==_u.next;){if(Uu=_u.prev,Hu=_u.next,Nu?isEarHashed(_u,Ou,Fu,Nu):isEar(_u)){$u.push(Uu.i/Ru),$u.push(_u.i/Ru),$u.push(Hu.i/Ru),removeNode(_u),_u=Hu.next,Gu=Hu.next;continue}if(_u=Hu,_u===Gu){Vu?Vu===1?(_u=cureLocalIntersections(filterPoints(_u),$u,Ru),earcutLinked(_u,$u,Ru,Ou,Fu,Nu,2)):Vu===2&&splitEarcut(_u,$u,Ru,Ou,Fu,Nu):earcutLinked(filterPoints(_u),$u,Ru,Ou,Fu,Nu,1);break}}}}function isEar(_u){var $u=_u.prev,Ru=_u,Ou=_u.next;if(area($u,Ru,Ou)>=0)return!1;for(var Fu=_u.next.next;Fu!==_u.prev;){if(pointInTriangle($u.x,$u.y,Ru.x,Ru.y,Ou.x,Ou.y,Fu.x,Fu.y)&&area(Fu.prev,Fu,Fu.next)>=0)return!1;Fu=Fu.next}return!0}function isEarHashed(_u,$u,Ru,Ou){var Fu=_u.prev,Nu=_u,Vu=_u.next;if(area(Fu,Nu,Vu)>=0)return!1;for(var Gu=Fu.x<Nu.x?Fu.x<Vu.x?Fu.x:Vu.x:Nu.x<Vu.x?Nu.x:Vu.x,Uu=Fu.y<Nu.y?Fu.y<Vu.y?Fu.y:Vu.y:Nu.y<Vu.y?Nu.y:Vu.y,Hu=Fu.x>Nu.x?Fu.x>Vu.x?Fu.x:Vu.x:Nu.x>Vu.x?Nu.x:Vu.x,Wu=Fu.y>Nu.y?Fu.y>Vu.y?Fu.y:Vu.y:Nu.y>Vu.y?Nu.y:Vu.y,Qu=zOrder(Gu,Uu,$u,Ru,Ou),qu=zOrder(Hu,Wu,$u,Ru,Ou),Ku=_u.prevZ,Yu=_u.nextZ;Ku&&Ku.z>=Qu&&Yu&&Yu.z<=qu;){if(Ku!==_u.prev&&Ku!==_u.next&&pointInTriangle(Fu.x,Fu.y,Nu.x,Nu.y,Vu.x,Vu.y,Ku.x,Ku.y)&&area(Ku.prev,Ku,Ku.next)>=0||(Ku=Ku.prevZ,Yu!==_u.prev&&Yu!==_u.next&&pointInTriangle(Fu.x,Fu.y,Nu.x,Nu.y,Vu.x,Vu.y,Yu.x,Yu.y)&&area(Yu.prev,Yu,Yu.next)>=0))return!1;Yu=Yu.nextZ}for(;Ku&&Ku.z>=Qu;){if(Ku!==_u.prev&&Ku!==_u.next&&pointInTriangle(Fu.x,Fu.y,Nu.x,Nu.y,Vu.x,Vu.y,Ku.x,Ku.y)&&area(Ku.prev,Ku,Ku.next)>=0)return!1;Ku=Ku.prevZ}for(;Yu&&Yu.z<=qu;){if(Yu!==_u.prev&&Yu!==_u.next&&pointInTriangle(Fu.x,Fu.y,Nu.x,Nu.y,Vu.x,Vu.y,Yu.x,Yu.y)&&area(Yu.prev,Yu,Yu.next)>=0)return!1;Yu=Yu.nextZ}return!0}function cureLocalIntersections(_u,$u,Ru){var Ou=_u;do{var Fu=Ou.prev,Nu=Ou.next.next;!equals(Fu,Nu)&&intersects(Fu,Ou,Ou.next,Nu)&&locallyInside(Fu,Nu)&&locallyInside(Nu,Fu)&&($u.push(Fu.i/Ru),$u.push(Ou.i/Ru),$u.push(Nu.i/Ru),removeNode(Ou),removeNode(Ou.next),Ou=_u=Nu),Ou=Ou.next}while(Ou!==_u);return filterPoints(Ou)}function splitEarcut(_u,$u,Ru,Ou,Fu,Nu){var Vu=_u;do{for(var Gu=Vu.next.next;Gu!==Vu.prev;){if(Vu.i!==Gu.i&&isValidDiagonal(Vu,Gu)){var Uu=splitPolygon(Vu,Gu);Vu=filterPoints(Vu,Vu.next),Uu=filterPoints(Uu,Uu.next),earcutLinked(Vu,$u,Ru,Ou,Fu,Nu),earcutLinked(Uu,$u,Ru,Ou,Fu,Nu);return}Gu=Gu.next}Vu=Vu.next}while(Vu!==_u)}function eliminateHoles(_u,$u,Ru,Ou){var Fu=[],Nu,Vu,Gu,Uu,Hu;for(Nu=0,Vu=$u.length;Nu<Vu;Nu++)Gu=$u[Nu]*Ou,Uu=Nu<Vu-1?$u[Nu+1]*Ou:_u.length,Hu=linkedList(_u,Gu,Uu,Ou,!1),Hu===Hu.next&&(Hu.steiner=!0),Fu.push(getLeftmost(Hu));for(Fu.sort(compareX),Nu=0;Nu<Fu.length;Nu++)eliminateHole(Fu[Nu],Ru),Ru=filterPoints(Ru,Ru.next);return Ru}function compareX(_u,$u){return _u.x-$u.x}function eliminateHole(_u,$u){if($u=findHoleBridge(_u,$u),$u){var Ru=splitPolygon($u,_u);filterPoints($u,$u.next),filterPoints(Ru,Ru.next)}}function findHoleBridge(_u,$u){var Ru=$u,Ou=_u.x,Fu=_u.y,Nu=-1/0,Vu;do{if(Fu<=Ru.y&&Fu>=Ru.next.y&&Ru.next.y!==Ru.y){var Gu=Ru.x+(Fu-Ru.y)*(Ru.next.x-Ru.x)/(Ru.next.y-Ru.y);if(Gu<=Ou&&Gu>Nu){if(Nu=Gu,Gu===Ou){if(Fu===Ru.y)return Ru;if(Fu===Ru.next.y)return Ru.next}Vu=Ru.x<Ru.next.x?Ru:Ru.next}}Ru=Ru.next}while(Ru!==$u);if(!Vu)return null;if(Ou===Nu)return Vu;var Uu=Vu,Hu=Vu.x,Wu=Vu.y,Qu=1/0,qu;Ru=Vu;do Ou>=Ru.x&&Ru.x>=Hu&&Ou!==Ru.x&&pointInTriangle(Fu<Wu?Ou:Nu,Fu,Hu,Wu,Fu<Wu?Nu:Ou,Fu,Ru.x,Ru.y)&&(qu=Math.abs(Fu-Ru.y)/(Ou-Ru.x),locallyInside(Ru,_u)&&(qu<Qu||qu===Qu&&(Ru.x>Vu.x||Ru.x===Vu.x&&sectorContainsSector(Vu,Ru)))&&(Vu=Ru,Qu=qu)),Ru=Ru.next;while(Ru!==Uu);return Vu}function sectorContainsSector(_u,$u){return area(_u.prev,_u,$u.prev)<0&&area($u.next,_u,_u.next)<0}function indexCurve(_u,$u,Ru,Ou){var Fu=_u;do Fu.z===null&&(Fu.z=zOrder(Fu.x,Fu.y,$u,Ru,Ou)),Fu.prevZ=Fu.prev,Fu.nextZ=Fu.next,Fu=Fu.next;while(Fu!==_u);Fu.prevZ.nextZ=null,Fu.prevZ=null,sortLinked(Fu)}function sortLinked(_u){var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu=1;do{for(Ru=_u,_u=null,Nu=null,Vu=0;Ru;){for(Vu++,Ou=Ru,Gu=0,$u=0;$u<Hu&&(Gu++,Ou=Ou.nextZ,!!Ou);$u++);for(Uu=Hu;Gu>0||Uu>0&&Ou;)Gu!==0&&(Uu===0||!Ou||Ru.z<=Ou.z)?(Fu=Ru,Ru=Ru.nextZ,Gu--):(Fu=Ou,Ou=Ou.nextZ,Uu--),Nu?Nu.nextZ=Fu:_u=Fu,Fu.prevZ=Nu,Nu=Fu;Ru=Ou}Nu.nextZ=null,Hu*=2}while(Vu>1);return _u}function zOrder(_u,$u,Ru,Ou,Fu){return _u=32767*(_u-Ru)*Fu,$u=32767*($u-Ou)*Fu,_u=(_u|_u<<8)&16711935,_u=(_u|_u<<4)&252645135,_u=(_u|_u<<2)&858993459,_u=(_u|_u<<1)&1431655765,$u=($u|$u<<8)&16711935,$u=($u|$u<<4)&252645135,$u=($u|$u<<2)&858993459,$u=($u|$u<<1)&1431655765,_u|$u<<1}function getLeftmost(_u){var $u=_u,Ru=_u;do($u.x<Ru.x||$u.x===Ru.x&&$u.y<Ru.y)&&(Ru=$u),$u=$u.next;while($u!==_u);return Ru}function pointInTriangle(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){return(Fu-Vu)*($u-Gu)-(_u-Vu)*(Nu-Gu)>=0&&(_u-Vu)*(Ou-Gu)-(Ru-Vu)*($u-Gu)>=0&&(Ru-Vu)*(Nu-Gu)-(Fu-Vu)*(Ou-Gu)>=0}function isValidDiagonal(_u,$u){return _u.next.i!==$u.i&&_u.prev.i!==$u.i&&!intersectsPolygon(_u,$u)&&(locallyInside(_u,$u)&&locallyInside($u,_u)&&middleInside(_u,$u)&&(area(_u.prev,_u,$u.prev)||area(_u,$u.prev,$u))||equals(_u,$u)&&area(_u.prev,_u,_u.next)>0&&area($u.prev,$u,$u.next)>0)}function area(_u,$u,Ru){return($u.y-_u.y)*(Ru.x-$u.x)-($u.x-_u.x)*(Ru.y-$u.y)}function equals(_u,$u){return _u.x===$u.x&&_u.y===$u.y}function intersects(_u,$u,Ru,Ou){var Fu=sign(area(_u,$u,Ru)),Nu=sign(area(_u,$u,Ou)),Vu=sign(area(Ru,Ou,_u)),Gu=sign(area(Ru,Ou,$u));return!!(Fu!==Nu&&Vu!==Gu||Fu===0&&onSegment(_u,Ru,$u)||Nu===0&&onSegment(_u,Ou,$u)||Vu===0&&onSegment(Ru,_u,Ou)||Gu===0&&onSegment(Ru,$u,Ou))}function onSegment(_u,$u,Ru){return $u.x<=Math.max(_u.x,Ru.x)&&$u.x>=Math.min(_u.x,Ru.x)&&$u.y<=Math.max(_u.y,Ru.y)&&$u.y>=Math.min(_u.y,Ru.y)}function sign(_u){return _u>0?1:_u<0?-1:0}function intersectsPolygon(_u,$u){var Ru=_u;do{if(Ru.i!==_u.i&&Ru.next.i!==_u.i&&Ru.i!==$u.i&&Ru.next.i!==$u.i&&intersects(Ru,Ru.next,_u,$u))return!0;Ru=Ru.next}while(Ru!==_u);return!1}function locallyInside(_u,$u){return area(_u.prev,_u,_u.next)<0?area(_u,$u,_u.next)>=0&&area(_u,_u.prev,$u)>=0:area(_u,$u,_u.prev)<0||area(_u,_u.next,$u)<0}function middleInside(_u,$u){var Ru=_u,Ou=!1,Fu=(_u.x+$u.x)/2,Nu=(_u.y+$u.y)/2;do Ru.y>Nu!=Ru.next.y>Nu&&Ru.next.y!==Ru.y&&Fu<(Ru.next.x-Ru.x)*(Nu-Ru.y)/(Ru.next.y-Ru.y)+Ru.x&&(Ou=!Ou),Ru=Ru.next;while(Ru!==_u);return Ou}function splitPolygon(_u,$u){var Ru=new Node(_u.i,_u.x,_u.y),Ou=new Node($u.i,$u.x,$u.y),Fu=_u.next,Nu=$u.prev;return _u.next=$u,$u.prev=_u,Ru.next=Fu,Fu.prev=Ru,Ou.next=Ru,Ru.prev=Ou,Nu.next=Ou,Ou.prev=Nu,Ou}function insertNode(_u,$u,Ru,Ou){var Fu=new Node(_u,$u,Ru);return Ou?(Fu.next=Ou.next,Fu.prev=Ou,Ou.next.prev=Fu,Ou.next=Fu):(Fu.prev=Fu,Fu.next=Fu),Fu}function removeNode(_u){_u.next.prev=_u.prev,_u.prev.next=_u.next,_u.prevZ&&(_u.prevZ.nextZ=_u.nextZ),_u.nextZ&&(_u.nextZ.prevZ=_u.prevZ)}function Node(_u,$u,Ru){this.i=_u,this.x=$u,this.y=Ru,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_u,$u,Ru,Ou){for(var Fu=0,Nu=$u,Vu=Ru-Ou;Nu<Ru;Nu+=Ou)Fu+=(_u[Vu]-_u[Nu])*(_u[Nu+1]+_u[Vu+1]),Vu=Nu;return Fu}var ShapeUtils={area:function(_u){for(var $u=_u.length,Ru=0,Ou=$u-1,Fu=0;Fu<$u;Ou=Fu++)Ru+=_u[Ou].x*_u[Fu].y-_u[Fu].x*_u[Ou].y;return Ru*.5},isClockWise:function(_u){return ShapeUtils.area(_u)<0},triangulateShape:function(_u,$u){var Ru=[],Ou=[],Fu=[];removeDupEndPts(_u),addContour(Ru,_u);var Nu=_u.length;$u.forEach(removeDupEndPts);for(var Vu=0;Vu<$u.length;Vu++)Ou.push(Nu),Nu+=$u[Vu].length,addContour(Ru,$u[Vu]);for(var Gu=Earcut.triangulate(Ru,Ou),Vu=0;Vu<Gu.length;Vu+=3)Fu.push(Gu.slice(Vu,Vu+3));return Fu}};function removeDupEndPts(_u){var $u=_u.length;$u>2&&_u[$u-1].equals(_u[0])&&_u.pop()}function addContour(_u,$u){for(var Ru=0;Ru<$u.length;Ru++)_u.push($u[Ru].x),_u.push($u[Ru].y)}function ExtrudeGeometry(_u,$u){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:_u,options:$u},this.fromBufferGeometry(new ExtrudeBufferGeometry(_u,$u)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Ru=this.parameters.options;return toJSON($u,Ru,_u)};function ExtrudeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:_u,options:$u},_u=Array.isArray(_u)?_u:[_u];for(var Ru=this,Ou=[],Fu=[],Nu=0,Vu=_u.length;Nu<Vu;Nu++){var Gu=_u[Nu];Uu(Gu)}this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2)),this.computeVertexNormals();function Uu(Hu){var Wu=[],Qu=$u.curveSegments!==void 0?$u.curveSegments:12,qu=$u.steps!==void 0?$u.steps:1,Ku=$u.depth!==void 0?$u.depth:100,Yu=$u.bevelEnabled!==void 0?$u.bevelEnabled:!0,_c=$u.bevelThickness!==void 0?$u.bevelThickness:6,Ju=$u.bevelSize!==void 0?$u.bevelSize:_c-2,Xu=$u.bevelOffset!==void 0?$u.bevelOffset:0,Zu=$u.bevelSegments!==void 0?$u.bevelSegments:3,Xc=$u.extrudePath,_h=$u.UVGenerator!==void 0?$u.UVGenerator:WorldUVGenerator;$u.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Ku=$u.amount);var ep,np=!1,ap,lp,up,_f;Xc&&(ep=Xc.getSpacedPoints(qu),np=!0,Yu=!1,ap=Xc.computeFrenetFrames(qu,!1),lp=new Vector3,up=new Vector3,_f=new Vector3),Yu||(Zu=0,_c=0,Ju=0,Xu=0);var tp,ip,rp,op=Hu.extractPoints(Qu),sp=op.shape,cp=op.holes,hp=!ShapeUtils.isClockWise(sp);if(hp)for(sp=sp.reverse(),ip=0,rp=cp.length;ip<rp;ip++)tp=cp[ip],ShapeUtils.isClockWise(tp)&&(cp[ip]=tp.reverse());var dp=ShapeUtils.triangulateShape(sp,cp),xp=sp;for(ip=0,rp=cp.length;ip<rp;ip++)tp=cp[ip],sp=sp.concat(tp);function bp(em,om,tm){return om||console.error("THREE.ExtrudeGeometry: vec does not exist"),om.clone().multiplyScalar(tm).add(em)}var Rp,Tp,Up,Ip,Vp,Lp=sp.length,mp,pp=dp.length;function wp(em,om,tm){var sm,Bp,rm,lm=em.x-om.x,dm=em.y-om.y,hm=tm.x-em.x,ym=tm.y-em.y,Mm=lm*lm+dm*dm,Em=lm*ym-dm*hm;if(Math.abs(Em)>Number.EPSILON){var Dm=Math.sqrt(Mm),Sm=Math.sqrt(hm*hm+ym*ym),Bm=om.x-dm/Dm,Rm=om.y+lm/Dm,Cm=tm.x-ym/Sm,km=tm.y+hm/Sm,zm=((Cm-Bm)*ym-(km-Rm)*hm)/(lm*ym-dm*hm);sm=Bm+lm*zm-em.x,Bp=Rm+dm*zm-em.y;var $m=sm*sm+Bp*Bp;if($m<=2)return new Vector2(sm,Bp);rm=Math.sqrt($m/2)}else{var Mp=!1;lm>Number.EPSILON?hm>Number.EPSILON&&(Mp=!0):lm<-Number.EPSILON?hm<-Number.EPSILON&&(Mp=!0):Math.sign(dm)===Math.sign(ym)&&(Mp=!0),Mp?(sm=-dm,Bp=lm,rm=Math.sqrt(Mm)):(sm=lm,Bp=dm,rm=Math.sqrt(Mm/2))}return new Vector2(sm/rm,Bp/rm)}for(var Ap=[],Sp=0,Cp=xp.length,$p=Cp-1,Fp=Sp+1;Sp<Cp;Sp++,$p++,Fp++)$p===Cp&&($p=0),Fp===Cp&&(Fp=0),Ap[Sp]=wp(xp[Sp],xp[$p],xp[Fp]);var jp=[],kp,fp=Ap.concat();for(ip=0,rp=cp.length;ip<rp;ip++){for(tp=cp[ip],kp=[],Sp=0,Cp=tp.length,$p=Cp-1,Fp=Sp+1;Sp<Cp;Sp++,$p++,Fp++)$p===Cp&&($p=0),Fp===Cp&&(Fp=0),kp[Sp]=wp(tp[Sp],tp[$p],tp[Fp]);jp.push(kp),fp=fp.concat(kp)}for(Rp=0;Rp<Zu;Rp++){for(Up=Rp/Zu,Ip=_c*Math.cos(Up*Math.PI/2),Tp=Ju*Math.sin(Up*Math.PI/2)+Xu,Sp=0,Cp=xp.length;Sp<Cp;Sp++)Vp=bp(xp[Sp],Ap[Sp],Tp),Qp(Vp.x,Vp.y,-Ip);for(ip=0,rp=cp.length;ip<rp;ip++)for(tp=cp[ip],kp=jp[ip],Sp=0,Cp=tp.length;Sp<Cp;Sp++)Vp=bp(tp[Sp],kp[Sp],Tp),Qp(Vp.x,Vp.y,-Ip)}for(Tp=Ju+Xu,Sp=0;Sp<Lp;Sp++)Vp=Yu?bp(sp[Sp],fp[Sp],Tp):sp[Sp],np?(up.copy(ap.normals[0]).multiplyScalar(Vp.x),lp.copy(ap.binormals[0]).multiplyScalar(Vp.y),_f.copy(ep[0]).add(up).add(lp),Qp(_f.x,_f.y,_f.z)):Qp(Vp.x,Vp.y,0);var yp;for(yp=1;yp<=qu;yp++)for(Sp=0;Sp<Lp;Sp++)Vp=Yu?bp(sp[Sp],fp[Sp],Tp):sp[Sp],np?(up.copy(ap.normals[yp]).multiplyScalar(Vp.x),lp.copy(ap.binormals[yp]).multiplyScalar(Vp.y),_f.copy(ep[yp]).add(up).add(lp),Qp(_f.x,_f.y,_f.z)):Qp(Vp.x,Vp.y,Ku/qu*yp);for(Rp=Zu-1;Rp>=0;Rp--){for(Up=Rp/Zu,Ip=_c*Math.cos(Up*Math.PI/2),Tp=Ju*Math.sin(Up*Math.PI/2)+Xu,Sp=0,Cp=xp.length;Sp<Cp;Sp++)Vp=bp(xp[Sp],Ap[Sp],Tp),Qp(Vp.x,Vp.y,Ku+Ip);for(ip=0,rp=cp.length;ip<rp;ip++)for(tp=cp[ip],kp=jp[ip],Sp=0,Cp=tp.length;Sp<Cp;Sp++)Vp=bp(tp[Sp],kp[Sp],Tp),np?Qp(Vp.x,Vp.y+ep[qu-1].y,ep[qu-1].x+Ip):Qp(Vp.x,Vp.y,Ku+Ip)}Gp(),Np();function Gp(){var em=Ou.length/3;if(Yu){var om=0,tm=Lp*om;for(Sp=0;Sp<pp;Sp++)mp=dp[Sp],Zp(mp[2]+tm,mp[1]+tm,mp[0]+tm);for(om=qu+Zu*2,tm=Lp*om,Sp=0;Sp<pp;Sp++)mp=dp[Sp],Zp(mp[0]+tm,mp[1]+tm,mp[2]+tm)}else{for(Sp=0;Sp<pp;Sp++)mp=dp[Sp],Zp(mp[2],mp[1],mp[0]);for(Sp=0;Sp<pp;Sp++)mp=dp[Sp],Zp(mp[0]+Lp*qu,mp[1]+Lp*qu,mp[2]+Lp*qu)}Ru.addGroup(em,Ou.length/3-em,0)}function Np(){var em=Ou.length/3,om=0;for(Xp(xp,om),om+=xp.length,ip=0,rp=cp.length;ip<rp;ip++)tp=cp[ip],Xp(tp,om),om+=tp.length;Ru.addGroup(em,Ou.length/3-em,1)}function Xp(em,om){var tm,sm;for(Sp=em.length;--Sp>=0;){tm=Sp,sm=Sp-1,sm<0&&(sm=em.length-1);var Bp=0,rm=qu+Zu*2;for(Bp=0;Bp<rm;Bp++){var lm=Lp*Bp,dm=Lp*(Bp+1),hm=om+tm+lm,ym=om+sm+lm,Mm=om+sm+dm,Em=om+tm+dm;im(hm,ym,Mm,Em)}}}function Qp(em,om,tm){Wu.push(em),Wu.push(om),Wu.push(tm)}function Zp(em,om,tm){nm(em),nm(om),nm(tm);var sm=Ou.length/3,Bp=_h.generateTopUV(Ru,Ou,sm-3,sm-2,sm-1);cm(Bp[0]),cm(Bp[1]),cm(Bp[2])}function im(em,om,tm,sm){nm(em),nm(om),nm(sm),nm(om),nm(tm),nm(sm);var Bp=Ou.length/3,rm=_h.generateSideWallUV(Ru,Ou,Bp-6,Bp-3,Bp-2,Bp-1);cm(rm[0]),cm(rm[1]),cm(rm[3]),cm(rm[1]),cm(rm[2]),cm(rm[3])}function nm(em){Ou.push(Wu[em*3+0]),Ou.push(Wu[em*3+1]),Ou.push(Wu[em*3+2])}function cm(em){Fu.push(em.x),Fu.push(em.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Ru=this.parameters.options;return toJSON($u,Ru,_u)};var WorldUVGenerator={generateTopUV:function(_u,$u,Ru,Ou,Fu){var Nu=$u[Ru*3],Vu=$u[Ru*3+1],Gu=$u[Ou*3],Uu=$u[Ou*3+1],Hu=$u[Fu*3],Wu=$u[Fu*3+1];return[new Vector2(Nu,Vu),new Vector2(Gu,Uu),new Vector2(Hu,Wu)]},generateSideWallUV:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=$u[Ru*3],Gu=$u[Ru*3+1],Uu=$u[Ru*3+2],Hu=$u[Ou*3],Wu=$u[Ou*3+1],Qu=$u[Ou*3+2],qu=$u[Fu*3],Ku=$u[Fu*3+1],Yu=$u[Fu*3+2],_c=$u[Nu*3],Ju=$u[Nu*3+1],Xu=$u[Nu*3+2];return Math.abs(Gu-Wu)<.01?[new Vector2(Vu,1-Uu),new Vector2(Hu,1-Qu),new Vector2(qu,1-Yu),new Vector2(_c,1-Xu)]:[new Vector2(Gu,1-Uu),new Vector2(Wu,1-Qu),new Vector2(Ku,1-Yu),new Vector2(Ju,1-Xu)]}};function toJSON(_u,$u,Ru){if(Ru.shapes=[],Array.isArray(_u))for(var Ou=0,Fu=_u.length;Ou<Fu;Ou++){var Nu=_u[Ou];Ru.shapes.push(Nu.uuid)}else Ru.shapes.push(_u.uuid);return $u.extrudePath!==void 0&&(Ru.options.extrudePath=$u.extrudePath.toJSON()),Ru}function TextGeometry(_u,$u){Geometry.call(this),this.type="TextGeometry",this.parameters={text:_u,parameters:$u},this.fromBufferGeometry(new TextBufferGeometry(_u,$u)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(_u,$u){$u=$u||{};var Ru=$u.font;if(!(Ru&&Ru.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Ou=Ru.generateShapes(_u,$u.size);$u.depth=$u.height!==void 0?$u.height:50,$u.bevelThickness===void 0&&($u.bevelThickness=10),$u.bevelSize===void 0&&($u.bevelSize=8),$u.bevelEnabled===void 0&&($u.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Ou,$u),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Ru,phiStart:Ou,phiLength:Fu,thetaStart:Nu,thetaLength:Vu},this.fromBufferGeometry(new SphereBufferGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Ru,phiStart:Ou,phiLength:Fu,thetaStart:Nu,thetaLength:Vu},_u=_u||1,$u=Math.max(3,Math.floor($u)||8),Ru=Math.max(2,Math.floor(Ru)||6),Ou=Ou!==void 0?Ou:0,Fu=Fu!==void 0?Fu:Math.PI*2,Nu=Nu!==void 0?Nu:0,Vu=Vu!==void 0?Vu:Math.PI;var Gu=Math.min(Nu+Vu,Math.PI),Uu,Hu,Wu=0,Qu=[],qu=new Vector3,Ku=new Vector3,Yu=[],_c=[],Ju=[],Xu=[];for(Hu=0;Hu<=Ru;Hu++){var Zu=[],Xc=Hu/Ru,_h=0;for(Hu==0&&Nu==0?_h=.5/$u:Hu==Ru&&Gu==Math.PI&&(_h=-.5/$u),Uu=0;Uu<=$u;Uu++){var ep=Uu/$u;qu.x=-_u*Math.cos(Ou+ep*Fu)*Math.sin(Nu+Xc*Vu),qu.y=_u*Math.cos(Nu+Xc*Vu),qu.z=_u*Math.sin(Ou+ep*Fu)*Math.sin(Nu+Xc*Vu),_c.push(qu.x,qu.y,qu.z),Ku.copy(qu).normalize(),Ju.push(Ku.x,Ku.y,Ku.z),Xu.push(ep+_h,1-Xc),Zu.push(Wu++)}Qu.push(Zu)}for(Hu=0;Hu<Ru;Hu++)for(Uu=0;Uu<$u;Uu++){var np=Qu[Hu][Uu+1],ap=Qu[Hu][Uu],lp=Qu[Hu+1][Uu],up=Qu[Hu+1][Uu+1];(Hu!==0||Nu>0)&&Yu.push(np,ap,up),(Hu!==Ru-1||Gu<Math.PI)&&Yu.push(ap,lp,up)}this.setIndex(Yu),this.setAttribute("position",new Float32BufferAttribute(_c,3)),this.setAttribute("normal",new Float32BufferAttribute(Ju,3)),this.setAttribute("uv",new Float32BufferAttribute(Xu,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(_u,$u,Ru,Ou,Fu,Nu){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Ru,phiSegments:Ou,thetaStart:Fu,thetaLength:Nu},this.fromBufferGeometry(new RingBufferGeometry(_u,$u,Ru,Ou,Fu,Nu)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(_u,$u,Ru,Ou,Fu,Nu){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Ru,phiSegments:Ou,thetaStart:Fu,thetaLength:Nu},_u=_u||.5,$u=$u||1,Fu=Fu!==void 0?Fu:0,Nu=Nu!==void 0?Nu:Math.PI*2,Ru=Ru!==void 0?Math.max(3,Ru):8,Ou=Ou!==void 0?Math.max(1,Ou):1;var Vu=[],Gu=[],Uu=[],Hu=[],Wu,Qu=_u,qu=($u-_u)/Ou,Ku=new Vector3,Yu=new Vector2,_c,Ju;for(_c=0;_c<=Ou;_c++){for(Ju=0;Ju<=Ru;Ju++)Wu=Fu+Ju/Ru*Nu,Ku.x=Qu*Math.cos(Wu),Ku.y=Qu*Math.sin(Wu),Gu.push(Ku.x,Ku.y,Ku.z),Uu.push(0,0,1),Yu.x=(Ku.x/$u+1)/2,Yu.y=(Ku.y/$u+1)/2,Hu.push(Yu.x,Yu.y);Qu+=qu}for(_c=0;_c<Ou;_c++){var Xu=_c*(Ru+1);for(Ju=0;Ju<Ru;Ju++){Wu=Ju+Xu;var Zu=Wu,Xc=Wu+Ru+1,_h=Wu+Ru+2,ep=Wu+1;Vu.push(Zu,Xc,ep),Vu.push(Xc,_h,ep)}}this.setIndex(Vu),this.setAttribute("position",new Float32BufferAttribute(Gu,3)),this.setAttribute("normal",new Float32BufferAttribute(Uu,3)),this.setAttribute("uv",new Float32BufferAttribute(Hu,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(_u,$u,Ru,Ou){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:_u,segments:$u,phiStart:Ru,phiLength:Ou},this.fromBufferGeometry(new LatheBufferGeometry(_u,$u,Ru,Ou)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(_u,$u,Ru,Ou){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:_u,segments:$u,phiStart:Ru,phiLength:Ou},$u=Math.floor($u)||12,Ru=Ru||0,Ou=Ou||Math.PI*2,Ou=MathUtils.clamp(Ou,0,Math.PI*2);var Fu=[],Nu=[],Vu=[],Gu,Uu=1/$u,Hu=new Vector3,Wu=new Vector2,Qu,qu;for(Qu=0;Qu<=$u;Qu++){var Ku=Ru+Qu*Uu*Ou,Yu=Math.sin(Ku),_c=Math.cos(Ku);for(qu=0;qu<=_u.length-1;qu++)Hu.x=_u[qu].x*Yu,Hu.y=_u[qu].y,Hu.z=_u[qu].x*_c,Nu.push(Hu.x,Hu.y,Hu.z),Wu.x=Qu/$u,Wu.y=qu/(_u.length-1),Vu.push(Wu.x,Wu.y)}for(Qu=0;Qu<$u;Qu++)for(qu=0;qu<_u.length-1;qu++){Gu=qu+Qu*_u.length;var Ju=Gu,Xu=Gu+_u.length,Zu=Gu+_u.length+1,Xc=Gu+1;Fu.push(Ju,Xu,Xc),Fu.push(Xu,Zu,Xc)}if(this.setIndex(Fu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Vu,2)),this.computeVertexNormals(),Ou===Math.PI*2){var _h=this.attributes.normal.array,ep=new Vector3,np=new Vector3,ap=new Vector3;for(Gu=$u*_u.length*3,Qu=0,qu=0;Qu<_u.length;Qu++,qu+=3)ep.x=_h[qu+0],ep.y=_h[qu+1],ep.z=_h[qu+2],np.x=_h[Gu+qu+0],np.y=_h[Gu+qu+1],np.z=_h[Gu+qu+2],ap.addVectors(ep,np).normalize(),_h[qu+0]=_h[Gu+qu+0]=ap.x,_h[qu+1]=_h[Gu+qu+1]=ap.y,_h[qu+2]=_h[Gu+qu+2]=ap.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(_u,$u){Geometry.call(this),this.type="ShapeGeometry",typeof $u=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),$u=$u.curveSegments),this.parameters={shapes:_u,curveSegments:$u},this.fromBufferGeometry(new ShapeBufferGeometry(_u,$u)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function ShapeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:_u,curveSegments:$u},$u=$u||12;var Ru=[],Ou=[],Fu=[],Nu=[],Vu=0,Gu=0;if(Array.isArray(_u)===!1)Hu(_u);else for(var Uu=0;Uu<_u.length;Uu++)Hu(_u[Uu]),this.addGroup(Vu,Gu,Uu),Vu+=Gu,Gu=0;this.setIndex(Ru),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Fu,3)),this.setAttribute("uv",new Float32BufferAttribute(Nu,2));function Hu(Wu){var Qu,qu,Ku,Yu=Ou.length/3,_c=Wu.extractPoints($u),Ju=_c.shape,Xu=_c.holes;for(ShapeUtils.isClockWise(Ju)===!1&&(Ju=Ju.reverse()),Qu=0,qu=Xu.length;Qu<qu;Qu++)Ku=Xu[Qu],ShapeUtils.isClockWise(Ku)===!0&&(Xu[Qu]=Ku.reverse());var Zu=ShapeUtils.triangulateShape(Ju,Xu);for(Qu=0,qu=Xu.length;Qu<qu;Qu++)Ku=Xu[Qu],Ju=Ju.concat(Ku);for(Qu=0,qu=Ju.length;Qu<qu;Qu++){var Xc=Ju[Qu];Ou.push(Xc.x,Xc.y,0),Fu.push(0,0,1),Nu.push(Xc.x,Xc.y)}for(Qu=0,qu=Zu.length;Qu<qu;Qu++){var _h=Zu[Qu],ep=_h[0]+Yu,np=_h[1]+Yu,ap=_h[2]+Yu;Ru.push(ep,np,ap),Gu+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function toJSON$1(_u,$u){if($u.shapes=[],Array.isArray(_u))for(var Ru=0,Ou=_u.length;Ru<Ou;Ru++){var Fu=_u[Ru];$u.shapes.push(Fu.uuid)}else $u.shapes.push(_u.uuid);return $u}function EdgesGeometry(_u,$u){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:$u},$u=$u!==void 0?$u:1;var Ru=[],Ou=Math.cos(MathUtils.DEG2RAD*$u),Fu=[0,0],Nu={},Vu,Gu,Uu,Hu=["a","b","c"],Wu;_u.isBufferGeometry?(Wu=new Geometry,Wu.fromBufferGeometry(_u)):Wu=_u.clone(),Wu.mergeVertices(),Wu.computeFaceNormals();for(var Qu=Wu.vertices,qu=Wu.faces,Ku=0,Yu=qu.length;Ku<Yu;Ku++)for(var _c=qu[Ku],Ju=0;Ju<3;Ju++)Vu=_c[Hu[Ju]],Gu=_c[Hu[(Ju+1)%3]],Fu[0]=Math.min(Vu,Gu),Fu[1]=Math.max(Vu,Gu),Uu=Fu[0]+","+Fu[1],Nu[Uu]===void 0?Nu[Uu]={index1:Fu[0],index2:Fu[1],face1:Ku,face2:void 0}:Nu[Uu].face2=Ku;for(Uu in Nu){var Xu=Nu[Uu];if(Xu.face2===void 0||qu[Xu.face1].normal.dot(qu[Xu.face2].normal)<=Ou){var Zu=Qu[Xu.index1];Ru.push(Zu.x,Zu.y,Zu.z),Zu=Qu[Xu.index2],Ru.push(Zu.x,Zu.y,Zu.z)}}this.setAttribute("position",new Float32BufferAttribute(Ru,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Ru,radialSegments:Ou,heightSegments:Fu,openEnded:Nu,thetaStart:Vu,thetaLength:Gu},this.fromBufferGeometry(new CylinderBufferGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Ru,radialSegments:Ou,heightSegments:Fu,openEnded:Nu,thetaStart:Vu,thetaLength:Gu};var Uu=this;_u=_u!==void 0?_u:1,$u=$u!==void 0?$u:1,Ru=Ru||1,Ou=Math.floor(Ou)||8,Fu=Math.floor(Fu)||1,Nu=Nu!==void 0?Nu:!1,Vu=Vu!==void 0?Vu:0,Gu=Gu!==void 0?Gu:Math.PI*2;var Hu=[],Wu=[],Qu=[],qu=[],Ku=0,Yu=[],_c=Ru/2,Ju=0;Xu(),Nu===!1&&(_u>0&&Zu(!0),$u>0&&Zu(!1)),this.setIndex(Hu),this.setAttribute("position",new Float32BufferAttribute(Wu,3)),this.setAttribute("normal",new Float32BufferAttribute(Qu,3)),this.setAttribute("uv",new Float32BufferAttribute(qu,2));function Xu(){var Xc,_h,ep=new Vector3,np=new Vector3,ap=0,lp=($u-_u)/Ru;for(_h=0;_h<=Fu;_h++){var up=[],_f=_h/Fu,tp=_f*($u-_u)+_u;for(Xc=0;Xc<=Ou;Xc++){var ip=Xc/Ou,rp=ip*Gu+Vu,op=Math.sin(rp),sp=Math.cos(rp);np.x=tp*op,np.y=-_f*Ru+_c,np.z=tp*sp,Wu.push(np.x,np.y,np.z),ep.set(op,lp,sp).normalize(),Qu.push(ep.x,ep.y,ep.z),qu.push(ip,1-_f),up.push(Ku++)}Yu.push(up)}for(Xc=0;Xc<Ou;Xc++)for(_h=0;_h<Fu;_h++){var cp=Yu[_h][Xc],hp=Yu[_h+1][Xc],dp=Yu[_h+1][Xc+1],xp=Yu[_h][Xc+1];Hu.push(cp,hp,xp),Hu.push(hp,dp,xp),ap+=6}Uu.addGroup(Ju,ap,0),Ju+=ap}function Zu(Xc){var _h,ep,np,ap=new Vector2,lp=new Vector3,up=0,_f=Xc===!0?_u:$u,tp=Xc===!0?1:-1;for(ep=Ku,_h=1;_h<=Ou;_h++)Wu.push(0,_c*tp,0),Qu.push(0,tp,0),qu.push(.5,.5),Ku++;for(np=Ku,_h=0;_h<=Ou;_h++){var ip=_h/Ou,rp=ip*Gu+Vu,op=Math.cos(rp),sp=Math.sin(rp);lp.x=_f*sp,lp.y=_c*tp,lp.z=_f*op,Wu.push(lp.x,lp.y,lp.z),Qu.push(0,tp,0),ap.x=op*.5+.5,ap.y=sp*.5*tp+.5,qu.push(ap.x,ap.y),Ku++}for(_h=0;_h<Ou;_h++){var cp=ep+_h,hp=np+_h;Xc===!0?Hu.push(hp,hp+1,cp):Hu.push(hp+1,hp,cp),up+=3}Uu.addGroup(Ju,up,Xc===!0?1:2),Ju+=up}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu){CylinderGeometry.call(this,0,_u,$u,Ru,Ou,Fu,Nu,Vu),this.type="ConeGeometry",this.parameters={radius:_u,height:$u,radialSegments:Ru,heightSegments:Ou,openEnded:Fu,thetaStart:Nu,thetaLength:Vu}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(_u,$u,Ru,Ou,Fu,Nu,Vu){CylinderBufferGeometry.call(this,0,_u,$u,Ru,Ou,Fu,Nu,Vu),this.type="ConeBufferGeometry",this.parameters={radius:_u,height:$u,radialSegments:Ru,heightSegments:Ou,openEnded:Fu,thetaStart:Nu,thetaLength:Vu}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(_u,$u,Ru,Ou){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Ru,thetaLength:Ou},this.fromBufferGeometry(new CircleBufferGeometry(_u,$u,Ru,Ou)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(_u,$u,Ru,Ou){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Ru,thetaLength:Ou},_u=_u||1,$u=$u!==void 0?Math.max(3,$u):8,Ru=Ru!==void 0?Ru:0,Ou=Ou!==void 0?Ou:Math.PI*2;var Fu=[],Nu=[],Vu=[],Gu=[],Uu,Hu,Wu=new Vector3,Qu=new Vector2;for(Nu.push(0,0,0),Vu.push(0,0,1),Gu.push(.5,.5),Hu=0,Uu=3;Hu<=$u;Hu++,Uu+=3){var qu=Ru+Hu/$u*Ou;Wu.x=_u*Math.cos(qu),Wu.y=_u*Math.sin(qu),Nu.push(Wu.x,Wu.y,Wu.z),Vu.push(0,0,1),Qu.x=(Nu[Uu]/_u+1)/2,Qu.y=(Nu[Uu+1]/_u+1)/2,Gu.push(Qu.x,Qu.y)}for(Uu=1;Uu<=$u;Uu++)Fu.push(Uu,Uu+1,0);this.setIndex(Fu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(Gu,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(_u){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(_u)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this};function RawShaderMaterial(_u){ShaderMaterial.call(this,_u),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(_u){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(_u)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={STANDARD:""},this.color.copy(_u.color),this.roughness=_u.roughness,this.metalness=_u.metalness,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.roughnessMap=_u.roughnessMap,this.metalnessMap=_u.metalnessMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.envMapIntensity=_u.envMapIntensity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.vertexTangents=_u.vertexTangents,this};function MeshPhysicalMaterial(_u){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(_u)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(_u){return MeshStandardMaterial.prototype.copy.call(this,_u),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_u.clearcoat,this.clearcoatMap=_u.clearcoatMap,this.clearcoatRoughness=_u.clearcoatRoughness,this.clearcoatRoughnessMap=_u.clearcoatRoughnessMap,this.clearcoatNormalMap=_u.clearcoatNormalMap,this.clearcoatNormalScale.copy(_u.clearcoatNormalScale),this.reflectivity=_u.reflectivity,_u.sheen?this.sheen=(this.sheen||new Color).copy(_u.sheen):this.sheen=null,this.transparency=_u.transparency,this};function MeshPhongMaterial(_u){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshToonMaterial(_u){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.gradientMap=_u.gradientMap,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshNormalMaterial(_u){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshLambertMaterial(_u){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshMatcapMaterial(_u){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={MATCAP:""},this.color.copy(_u.color),this.matcap=_u.matcap,this.map=_u.map,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.alphaMap=_u.alphaMap,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function LineDashedMaterial(_u){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_u)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(_u){return LineBasicMaterial.prototype.copy.call(this,_u),this.scale=_u.scale,this.dashSize=_u.dashSize,this.gapSize=_u.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(_u,$u,Ru){return AnimationUtils.isTypedArray(_u)?new _u.constructor(_u.subarray($u,Ru!==void 0?Ru:_u.length)):_u.slice($u,Ru)},convertArray:function(_u,$u,Ru){return!_u||!Ru&&_u.constructor===$u?_u:typeof $u.BYTES_PER_ELEMENT=="number"?new $u(_u):Array.prototype.slice.call(_u)},isTypedArray:function(_u){return ArrayBuffer.isView(_u)&&!(_u instanceof DataView)},getKeyframeOrder:function(_u){function $u(Nu,Vu){return _u[Nu]-_u[Vu]}for(var Ru=_u.length,Ou=new Array(Ru),Fu=0;Fu!==Ru;++Fu)Ou[Fu]=Fu;return Ou.sort($u),Ou},sortedArray:function(_u,$u,Ru){for(var Ou=_u.length,Fu=new _u.constructor(Ou),Nu=0,Vu=0;Vu!==Ou;++Nu)for(var Gu=Ru[Nu]*$u,Uu=0;Uu!==$u;++Uu)Fu[Vu++]=_u[Gu+Uu];return Fu},flattenJSON:function(_u,$u,Ru,Ou){for(var Fu=1,Nu=_u[0];Nu!==void 0&&Nu[Ou]===void 0;)Nu=_u[Fu++];if(Nu!==void 0){var Vu=Nu[Ou];if(Vu!==void 0)if(Array.isArray(Vu))do Vu=Nu[Ou],Vu!==void 0&&($u.push(Nu.time),Ru.push.apply(Ru,Vu)),Nu=_u[Fu++];while(Nu!==void 0);else if(Vu.toArray!==void 0)do Vu=Nu[Ou],Vu!==void 0&&($u.push(Nu.time),Vu.toArray(Ru,Ru.length)),Nu=_u[Fu++];while(Nu!==void 0);else do Vu=Nu[Ou],Vu!==void 0&&($u.push(Nu.time),Ru.push(Vu)),Nu=_u[Fu++];while(Nu!==void 0)}},subclip:function(_u,$u,Ru,Ou,Fu){Fu=Fu||30;var Nu=_u.clone();Nu.name=$u;for(var Vu=[],Gu=0;Gu<Nu.tracks.length;++Gu){for(var Uu=Nu.tracks[Gu],Hu=Uu.getValueSize(),Wu=[],Qu=[],qu=0;qu<Uu.times.length;++qu){var Ku=Uu.times[qu]*Fu;if(!(Ku<Ru||Ku>=Ou)){Wu.push(Uu.times[qu]);for(var Yu=0;Yu<Hu;++Yu)Qu.push(Uu.values[qu*Hu+Yu])}}Wu.length!==0&&(Uu.times=AnimationUtils.convertArray(Wu,Uu.times.constructor),Uu.values=AnimationUtils.convertArray(Qu,Uu.values.constructor),Vu.push(Uu))}Nu.tracks=Vu;for(var _c=1/0,Gu=0;Gu<Nu.tracks.length;++Gu)_c>Nu.tracks[Gu].times[0]&&(_c=Nu.tracks[Gu].times[0]);for(var Gu=0;Gu<Nu.tracks.length;++Gu)Nu.tracks[Gu].shift(-1*_c);return Nu.resetDuration(),Nu},makeClipAdditive:function(_u,$u,Ru,Ou){$u===void 0&&($u=0),Ru===void 0&&(Ru=_u),(Ou===void 0||Ou<=0)&&(Ou=30);for(var Fu=_u.tracks.length,Nu=$u/Ou,Vu=0;Vu<Fu;++Vu){var Gu=Ru.tracks[Vu],Uu=Gu.ValueTypeName;if(!(Uu==="bool"||Uu==="string")){var Hu=_u.tracks.find(function(_h){return _h.name===Gu.name&&_h.ValueTypeName===Uu});if(Hu!==void 0){var Wu=Gu.getValueSize(),Qu=Gu.times.length-1,qu;if(Nu<=Gu.times[0])qu=AnimationUtils.arraySlice(Gu.values,0,Gu.valueSize);else if(Nu>=Gu.times[Qu]){var Ku=Qu*Wu;qu=AnimationUtils.arraySlice(Gu.values,Ku)}else{var Yu=Gu.createInterpolant();Yu.evaluate(Nu),qu=Yu.resultBuffer}if(Uu==="quaternion"){var _c=new Quaternion(qu[0],qu[1],qu[2],qu[3]).normalize().conjugate();_c.toArray(qu)}for(var Ju=Hu.times.length,Xu=0;Xu<Ju;++Xu){var Zu=Xu*Wu;if(Uu==="quaternion")Quaternion.multiplyQuaternionsFlat(Hu.values,Zu,qu,0,Hu.values,Zu);else for(var Xc=0;Xc<Wu;++Xc)Hu.values[Zu+Xc]-=qu[Xc]}}}}return _u.blendMode=AdditiveAnimationBlendMode,_u}};function Interpolant(_u,$u,Ru,Ou){this.parameterPositions=_u,this._cachedIndex=0,this.resultBuffer=Ou!==void 0?Ou:new $u.constructor(Ru),this.sampleValues=$u,this.valueSize=Ru}Object.assign(Interpolant.prototype,{evaluate:function(_u){var $u=this.parameterPositions,Ru=this._cachedIndex,Ou=$u[Ru],Fu=$u[Ru-1];e:{t:{var Nu;n:{r:if(!(_u<Ou)){for(var Vu=Ru+2;;){if(Ou===void 0){if(_u<Fu)break r;return Ru=$u.length,this._cachedIndex=Ru,this.afterEnd_(Ru-1,_u,Fu)}if(Ru===Vu)break;if(Fu=Ou,Ou=$u[++Ru],_u<Ou)break t}Nu=$u.length;break n}if(!(_u>=Fu)){var Gu=$u[1];_u<Gu&&(Ru=2,Fu=Gu);for(var Vu=Ru-2;;){if(Fu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Ou);if(Ru===Vu)break;if(Ou=Fu,Fu=$u[--Ru-1],_u>=Fu)break t}Nu=Ru,Ru=0;break n}break e}for(;Ru<Nu;){var Uu=Ru+Nu>>>1;_u<$u[Uu]?Nu=Uu:Ru=Uu+1}if(Ou=$u[Ru],Fu=$u[Ru-1],Fu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Ou);if(Ou===void 0)return Ru=$u.length,this._cachedIndex=Ru,this.afterEnd_(Ru-1,Fu,_u)}this._cachedIndex=Ru,this.intervalChanged_(Ru,Fu,Ou)}return this.interpolate_(Ru,Fu,_u,Ou)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(_u){for(var $u=this.resultBuffer,Ru=this.sampleValues,Ou=this.valueSize,Fu=_u*Ou,Nu=0;Nu!==Ou;++Nu)$u[Nu]=Ru[Fu+Nu];return $u},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(_u,$u,Ru,Ou){Interpolant.call(this,_u,$u,Ru,Ou),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(_u,$u,Ru){var Ou=this.parameterPositions,Fu=_u-2,Nu=_u+1,Vu=Ou[Fu],Gu=Ou[Nu];if(Vu===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Fu=_u,Vu=2*$u-Ru;break;case WrapAroundEnding:Fu=Ou.length-2,Vu=$u+Ou[Fu]-Ou[Fu+1];break;default:Fu=_u,Vu=Ru}if(Gu===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Nu=_u,Gu=2*Ru-$u;break;case WrapAroundEnding:Nu=1,Gu=Ru+Ou[1]-Ou[0];break;default:Nu=_u-1,Gu=$u}var Uu=(Ru-$u)*.5,Hu=this.valueSize;this._weightPrev=Uu/($u-Vu),this._weightNext=Uu/(Gu-Ru),this._offsetPrev=Fu*Hu,this._offsetNext=Nu*Hu},interpolate_:function(_u,$u,Ru,Ou){for(var Fu=this.resultBuffer,Nu=this.sampleValues,Vu=this.valueSize,Gu=_u*Vu,Uu=Gu-Vu,Hu=this._offsetPrev,Wu=this._offsetNext,Qu=this._weightPrev,qu=this._weightNext,Ku=(Ru-$u)/(Ou-$u),Yu=Ku*Ku,_c=Yu*Ku,Ju=-Qu*_c+2*Qu*Yu-Qu*Ku,Xu=(1+Qu)*_c+(-1.5-2*Qu)*Yu+(-.5+Qu)*Ku+1,Zu=(-1-qu)*_c+(1.5+qu)*Yu+.5*Ku,Xc=qu*_c-qu*Yu,_h=0;_h!==Vu;++_h)Fu[_h]=Ju*Nu[Hu+_h]+Xu*Nu[Uu+_h]+Zu*Nu[Gu+_h]+Xc*Nu[Wu+_h];return Fu}});function LinearInterpolant(_u,$u,Ru,Ou){Interpolant.call(this,_u,$u,Ru,Ou)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(_u,$u,Ru,Ou){for(var Fu=this.resultBuffer,Nu=this.sampleValues,Vu=this.valueSize,Gu=_u*Vu,Uu=Gu-Vu,Hu=(Ru-$u)/(Ou-$u),Wu=1-Hu,Qu=0;Qu!==Vu;++Qu)Fu[Qu]=Nu[Uu+Qu]*Wu+Nu[Gu+Qu]*Hu;return Fu}});function DiscreteInterpolant(_u,$u,Ru,Ou){Interpolant.call(this,_u,$u,Ru,Ou)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(_u){return this.copySampleValue_(_u-1)}});function KeyframeTrack(_u,$u,Ru,Ou){if(_u===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if($u===void 0||$u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_u);this.name=_u,this.times=AnimationUtils.convertArray($u,this.TimeBufferType),this.values=AnimationUtils.convertArray(Ru,this.ValueBufferType),this.setInterpolation(Ou||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(_u){var $u=_u.constructor,Ru;if($u.toJSON!==void 0)Ru=$u.toJSON(_u);else{Ru={name:_u.name,times:AnimationUtils.convertArray(_u.times,Array),values:AnimationUtils.convertArray(_u.values,Array)};var Ou=_u.getInterpolation();Ou!==_u.DefaultInterpolation&&(Ru.interpolation=Ou)}return Ru.type=_u.ValueTypeName,Ru}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(_u){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodLinear:function(_u){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:function(_u){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_u)},setInterpolation:function(_u){var $u;switch(_u){case InterpolateDiscrete:$u=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:$u=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:$u=this.InterpolantFactoryMethodSmooth;break}if($u===void 0){var Ru="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_u!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Ru);return console.warn("THREE.KeyframeTrack:",Ru),this}return this.createInterpolant=$u,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(_u){if(_u!==0)for(var $u=this.times,Ru=0,Ou=$u.length;Ru!==Ou;++Ru)$u[Ru]+=_u;return this},scale:function(_u){if(_u!==1)for(var $u=this.times,Ru=0,Ou=$u.length;Ru!==Ou;++Ru)$u[Ru]*=_u;return this},trim:function(_u,$u){for(var Ru=this.times,Ou=Ru.length,Fu=0,Nu=Ou-1;Fu!==Ou&&Ru[Fu]<_u;)++Fu;for(;Nu!==-1&&Ru[Nu]>$u;)--Nu;if(++Nu,Fu!==0||Nu!==Ou){Fu>=Nu&&(Nu=Math.max(Nu,1),Fu=Nu-1);var Vu=this.getValueSize();this.times=AnimationUtils.arraySlice(Ru,Fu,Nu),this.values=AnimationUtils.arraySlice(this.values,Fu*Vu,Nu*Vu)}return this},validate:function(){var _u=!0,$u=this.getValueSize();$u-Math.floor($u)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_u=!1);var Ru=this.times,Ou=this.values,Fu=Ru.length;Fu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_u=!1);for(var Nu=null,Vu=0;Vu!==Fu;Vu++){var Gu=Ru[Vu];if(typeof Gu=="number"&&isNaN(Gu)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Vu,Gu),_u=!1;break}if(Nu!==null&&Nu>Gu){console.error("THREE.KeyframeTrack: Out of order keys.",this,Vu,Gu,Nu),_u=!1;break}Nu=Gu}if(Ou!==void 0&&AnimationUtils.isTypedArray(Ou))for(var Vu=0,Uu=Ou.length;Vu!==Uu;++Vu){var Hu=Ou[Vu];if(isNaN(Hu)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Vu,Hu),_u=!1;break}}return _u},optimize:function(){for(var _u=AnimationUtils.arraySlice(this.times),$u=AnimationUtils.arraySlice(this.values),Ru=this.getValueSize(),Ou=this.getInterpolation()===InterpolateSmooth,Fu=1,Nu=_u.length-1,Vu=1;Vu<Nu;++Vu){var Gu=!1,Uu=_u[Vu],Hu=_u[Vu+1];if(Uu!==Hu&&(Vu!==1||Uu!==Uu[0]))if(Ou)Gu=!0;else for(var Wu=Vu*Ru,Qu=Wu-Ru,qu=Wu+Ru,Ku=0;Ku!==Ru;++Ku){var Yu=$u[Wu+Ku];if(Yu!==$u[Qu+Ku]||Yu!==$u[qu+Ku]){Gu=!0;break}}if(Gu){if(Vu!==Fu){_u[Fu]=_u[Vu];for(var _c=Vu*Ru,Ju=Fu*Ru,Ku=0;Ku!==Ru;++Ku)$u[Ju+Ku]=$u[_c+Ku]}++Fu}}if(Nu>0){_u[Fu]=_u[Nu];for(var _c=Nu*Ru,Ju=Fu*Ru,Ku=0;Ku!==Ru;++Ku)$u[Ju+Ku]=$u[_c+Ku];++Fu}return Fu!==_u.length?(this.times=AnimationUtils.arraySlice(_u,0,Fu),this.values=AnimationUtils.arraySlice($u,0,Fu*Ru)):(this.times=_u,this.values=$u),this},clone:function(){var _u=AnimationUtils.arraySlice(this.times,0),$u=AnimationUtils.arraySlice(this.values,0),Ru=this.constructor,Ou=new Ru(this.name,_u,$u);return Ou.createInterpolant=this.createInterpolant,Ou}});function BooleanKeyframeTrack(_u,$u,Ru){KeyframeTrack.call(this,_u,$u,Ru)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(_u,$u,Ru,Ou){KeyframeTrack.call(this,_u,$u,Ru,Ou)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(_u,$u,Ru,Ou){KeyframeTrack.call(this,_u,$u,Ru,Ou)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(_u,$u,Ru,Ou){Interpolant.call(this,_u,$u,Ru,Ou)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(_u,$u,Ru,Ou){for(var Fu=this.resultBuffer,Nu=this.sampleValues,Vu=this.valueSize,Gu=_u*Vu,Uu=(Ru-$u)/(Ou-$u),Hu=Gu+Vu;Gu!==Hu;Gu+=4)Quaternion.slerpFlat(Fu,0,Nu,Gu-Vu,Nu,Gu,Uu);return Fu}});function QuaternionKeyframeTrack(_u,$u,Ru,Ou){KeyframeTrack.call(this,_u,$u,Ru,Ou)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(_u){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(_u,$u,Ru,Ou){KeyframeTrack.call(this,_u,$u,Ru,Ou)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(_u,$u,Ru,Ou){KeyframeTrack.call(this,_u,$u,Ru,Ou)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(_u,$u,Ru,Ou){this.name=_u,this.tracks=Ru,this.duration=$u!==void 0?$u:-1,this.blendMode=Ou!==void 0?Ou:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(_u){switch(_u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_u)}function parseKeyframeTrack(_u){if(_u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var $u=getTrackTypeForValueTypeName(_u.type);if(_u.times===void 0){var Ru=[],Ou=[];AnimationUtils.flattenJSON(_u.keys,Ru,Ou,"value"),_u.times=Ru,_u.values=Ou}return $u.parse!==void 0?$u.parse(_u):new $u(_u.name,_u.times,_u.values,_u.interpolation)}Object.assign(AnimationClip,{parse:function(_u){for(var $u=[],Ru=_u.tracks,Ou=1/(_u.fps||1),Fu=0,Nu=Ru.length;Fu!==Nu;++Fu)$u.push(parseKeyframeTrack(Ru[Fu]).scale(Ou));return new AnimationClip(_u.name,_u.duration,$u,_u.blendMode)},toJSON:function(_u){for(var $u=[],Ru=_u.tracks,Ou={name:_u.name,duration:_u.duration,tracks:$u,uuid:_u.uuid,blendMode:_u.blendMode},Fu=0,Nu=Ru.length;Fu!==Nu;++Fu)$u.push(KeyframeTrack.toJSON(Ru[Fu]));return Ou},CreateFromMorphTargetSequence:function(_u,$u,Ru,Ou){for(var Fu=$u.length,Nu=[],Vu=0;Vu<Fu;Vu++){var Gu=[],Uu=[];Gu.push((Vu+Fu-1)%Fu,Vu,(Vu+1)%Fu),Uu.push(0,1,0);var Hu=AnimationUtils.getKeyframeOrder(Gu);Gu=AnimationUtils.sortedArray(Gu,1,Hu),Uu=AnimationUtils.sortedArray(Uu,1,Hu),!Ou&&Gu[0]===0&&(Gu.push(Fu),Uu.push(Uu[0])),Nu.push(new NumberKeyframeTrack(".morphTargetInfluences["+$u[Vu].name+"]",Gu,Uu).scale(1/Ru))}return new AnimationClip(_u,-1,Nu)},findByName:function(_u,$u){var Ru=_u;if(!Array.isArray(_u)){var Ou=_u;Ru=Ou.geometry&&Ou.geometry.animations||Ou.animations}for(var Fu=0;Fu<Ru.length;Fu++)if(Ru[Fu].name===$u)return Ru[Fu];return null},CreateClipsFromMorphTargetSequences:function(_u,$u,Ru){for(var Ou={},Fu=/^([\w-]*?)([\d]+)$/,Nu=0,Vu=_u.length;Nu<Vu;Nu++){var Gu=_u[Nu],Uu=Gu.name.match(Fu);if(Uu&&Uu.length>1){var Hu=Uu[1],Wu=Ou[Hu];Wu||(Ou[Hu]=Wu=[]),Wu.push(Gu)}}var Qu=[];for(var Hu in Ou)Qu.push(AnimationClip.CreateFromMorphTargetSequence(Hu,Ou[Hu],$u,Ru));return Qu},parseAnimation:function(_u,$u){if(!_u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Ru=function(_h,ep,np,ap,lp){if(np.length!==0){var up=[],_f=[];AnimationUtils.flattenJSON(np,up,_f,ap),up.length!==0&&lp.push(new _h(ep,up,_f))}},Ou=[],Fu=_u.name||"default",Nu=_u.length||-1,Vu=_u.fps||30,Gu=_u.blendMode,Uu=_u.hierarchy||[],Hu=0;Hu<Uu.length;Hu++){var Wu=Uu[Hu].keys;if(!(!Wu||Wu.length===0))if(Wu[0].morphTargets){for(var Qu={},qu=0;qu<Wu.length;qu++)if(Wu[qu].morphTargets)for(var Ku=0;Ku<Wu[qu].morphTargets.length;Ku++)Qu[Wu[qu].morphTargets[Ku]]=-1;for(var Yu in Qu){for(var _c=[],Ju=[],Ku=0;Ku!==Wu[qu].morphTargets.length;++Ku){var Xu=Wu[qu];_c.push(Xu.time),Ju.push(Xu.morphTarget===Yu?1:0)}Ou.push(new NumberKeyframeTrack(".morphTargetInfluence["+Yu+"]",_c,Ju))}Nu=Qu.length*(Vu||1)}else{var Zu=".bones["+$u[Hu].name+"]";Ru(VectorKeyframeTrack,Zu+".position",Wu,"pos",Ou),Ru(QuaternionKeyframeTrack,Zu+".quaternion",Wu,"rot",Ou),Ru(VectorKeyframeTrack,Zu+".scale",Wu,"scl",Ou)}}if(Ou.length===0)return null;var Xc=new AnimationClip(Fu,Nu,Ou,Gu);return Xc}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var _u=this.tracks,$u=0,Ru=0,Ou=_u.length;Ru!==Ou;++Ru){var Fu=this.tracks[Ru];$u=Math.max($u,Fu.times[Fu.times.length-1])}return this.duration=$u,this},trim:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].trim(0,this.duration);return this},validate:function(){for(var _u=!0,$u=0;$u<this.tracks.length;$u++)_u=_u&&this.tracks[$u].validate();return _u},optimize:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].optimize();return this},clone:function(){for(var _u=[],$u=0;$u<this.tracks.length;$u++)_u.push(this.tracks[$u].clone());return new AnimationClip(this.name,this.duration,_u,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(_u,$u){this.enabled!==!1&&(this.files[_u]=$u)},get:function(_u){if(this.enabled!==!1)return this.files[_u]},remove:function(_u){delete this.files[_u]},clear:function(){this.files={}}};function LoadingManager(_u,$u,Ru){var Ou=this,Fu=!1,Nu=0,Vu=0,Gu=void 0,Uu=[];this.onStart=void 0,this.onLoad=_u,this.onProgress=$u,this.onError=Ru,this.itemStart=function(Hu){Vu++,Fu===!1&&Ou.onStart!==void 0&&Ou.onStart(Hu,Nu,Vu),Fu=!0},this.itemEnd=function(Hu){Nu++,Ou.onProgress!==void 0&&Ou.onProgress(Hu,Nu,Vu),Nu===Vu&&(Fu=!1,Ou.onLoad!==void 0&&Ou.onLoad())},this.itemError=function(Hu){Ou.onError!==void 0&&Ou.onError(Hu)},this.resolveURL=function(Hu){return Gu?Gu(Hu):Hu},this.setURLModifier=function(Hu){return Gu=Hu,this},this.addHandler=function(Hu,Wu){return Uu.push(Hu,Wu),this},this.removeHandler=function(Hu){var Wu=Uu.indexOf(Hu);return Wu!==-1&&Uu.splice(Wu,2),this},this.getHandler=function(Hu){for(var Wu=0,Qu=Uu.length;Wu<Qu;Wu+=2){var qu=Uu[Wu],Ku=Uu[Wu+1];if(qu.global&&(qu.lastIndex=0),qu.test(Hu))return Ku}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(_u){this.manager=_u!==void 0?_u:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(_u,$u){var Ru=this;return new Promise(function(Ou,Fu){Ru.load(_u,Ou,$u,Fu)})},parse:function(){},setCrossOrigin:function(_u){return this.crossOrigin=_u,this},setPath:function(_u){return this.path=_u,this},setResourcePath:function(_u){return this.resourcePath=_u,this},setRequestHeader:function(_u){return this.requestHeader=_u,this}});var loading={};function FileLoader(_u){Loader.call(this,_u)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(_u,$u,Ru,Ou){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Fu=this,Nu=Cache.get(_u);if(Nu!==void 0)return Fu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Nu),Fu.manager.itemEnd(_u)},0),Nu;if(loading[_u]!==void 0){loading[_u].push({onLoad:$u,onProgress:Ru,onError:Ou});return}var Vu=/^data:(.*?)(;base64)?,(.*)$/,Gu=_u.match(Vu);if(Gu){var Uu=Gu[1],Hu=!!Gu[2],Wu=Gu[3];Wu=decodeURIComponent(Wu),Hu&&(Wu=atob(Wu));try{var Qu,qu=(this.responseType||"").toLowerCase();switch(qu){case"arraybuffer":case"blob":for(var Ku=new Uint8Array(Wu.length),Yu=0;Yu<Wu.length;Yu++)Ku[Yu]=Wu.charCodeAt(Yu);qu==="blob"?Qu=new Blob([Ku.buffer],{type:Uu}):Qu=Ku.buffer;break;case"document":var _c=new DOMParser;Qu=_c.parseFromString(Wu,Uu);break;case"json":Qu=JSON.parse(Wu);break;default:Qu=Wu;break}setTimeout(function(){$u&&$u(Qu),Fu.manager.itemEnd(_u)},0)}catch(Zu){setTimeout(function(){Ou&&Ou(Zu),Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)},0)}}else{loading[_u]=[],loading[_u].push({onLoad:$u,onProgress:Ru,onError:Ou});var Ju=new XMLHttpRequest;Ju.open("GET",_u,!0),Ju.addEventListener("load",function(Zu){var Xc=this.response,_h=loading[_u];if(delete loading[_u],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(_u,Xc);for(var ep=0,np=_h.length;ep<np;ep++){var ap=_h[ep];ap.onLoad&&ap.onLoad(Xc)}Fu.manager.itemEnd(_u)}else{for(var ep=0,np=_h.length;ep<np;ep++){var ap=_h[ep];ap.onError&&ap.onError(Zu)}Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)}},!1),Ju.addEventListener("progress",function(Zu){for(var Xc=loading[_u],_h=0,ep=Xc.length;_h<ep;_h++){var np=Xc[_h];np.onProgress&&np.onProgress(Zu)}},!1),Ju.addEventListener("error",function(Zu){var Xc=loading[_u];delete loading[_u];for(var _h=0,ep=Xc.length;_h<ep;_h++){var np=Xc[_h];np.onError&&np.onError(Zu)}Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)},!1),Ju.addEventListener("abort",function(Zu){var Xc=loading[_u];delete loading[_u];for(var _h=0,ep=Xc.length;_h<ep;_h++){var np=Xc[_h];np.onError&&np.onError(Zu)}Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)},!1),this.responseType!==void 0&&(Ju.responseType=this.responseType),this.withCredentials!==void 0&&(Ju.withCredentials=this.withCredentials),Ju.overrideMimeType&&Ju.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Xu in this.requestHeader)Ju.setRequestHeader(Xu,this.requestHeader[Xu]);Ju.send(null)}return Fu.manager.itemStart(_u),Ju},setResponseType:function(_u){return this.responseType=_u,this},setWithCredentials:function(_u){return this.withCredentials=_u,this},setMimeType:function(_u){return this.mimeType=_u,this}});function AnimationLoader(_u){Loader.call(this,_u)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new FileLoader(Fu.manager);Nu.setPath(Fu.path),Nu.load(_u,function(Vu){try{$u(Fu.parse(JSON.parse(Vu)))}catch(Gu){Ou?Ou(Gu):console.error(Gu),Fu.manager.itemError(_u)}},Ru,Ou)},parse:function(_u){for(var $u=[],Ru=0;Ru<_u.length;Ru++){var Ou=AnimationClip.parse(_u[Ru]);$u.push(Ou)}return $u}});function CompressedTextureLoader(_u){Loader.call(this,_u)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=[],Vu=new CompressedTexture;Vu.image=Nu;var Gu=new FileLoader(this.manager);Gu.setPath(this.path),Gu.setResponseType("arraybuffer");function Uu(qu){Gu.load(_u[qu],function(Ku){var Yu=Fu.parse(Ku,!0);Nu[qu]={width:Yu.width,height:Yu.height,format:Yu.format,mipmaps:Yu.mipmaps},Hu+=1,Hu===6&&(Yu.mipmapCount===1&&(Vu.minFilter=LinearFilter),Vu.format=Yu.format,Vu.needsUpdate=!0,$u&&$u(Vu))},Ru,Ou)}if(Array.isArray(_u))for(var Hu=0,Wu=0,Qu=_u.length;Wu<Qu;++Wu)Uu(Wu);else Gu.load(_u,function(qu){var Ku=Fu.parse(qu,!0);if(Ku.isCubemap)for(var Yu=Ku.mipmaps.length/Ku.mipmapCount,_c=0;_c<Yu;_c++){Nu[_c]={mipmaps:[]};for(var Ju=0;Ju<Ku.mipmapCount;Ju++)Nu[_c].mipmaps.push(Ku.mipmaps[_c*Ku.mipmapCount+Ju]),Nu[_c].format=Ku.format,Nu[_c].width=Ku.width,Nu[_c].height=Ku.height}else Vu.image.width=Ku.width,Vu.image.height=Ku.height,Vu.mipmaps=Ku.mipmaps;Ku.mipmapCount===1&&(Vu.minFilter=LinearFilter),Vu.format=Ku.format,Vu.needsUpdate=!0,$u&&$u(Vu)},Ru,Ou);return Vu}});function DataTextureLoader(_u){Loader.call(this,_u)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new DataTexture,Vu=new FileLoader(this.manager);return Vu.setResponseType("arraybuffer"),Vu.setPath(this.path),Vu.load(_u,function(Gu){var Uu=Fu.parse(Gu);!Uu||(Uu.image!==void 0?Nu.image=Uu.image:Uu.data!==void 0&&(Nu.image.width=Uu.width,Nu.image.height=Uu.height,Nu.image.data=Uu.data),Nu.wrapS=Uu.wrapS!==void 0?Uu.wrapS:ClampToEdgeWrapping,Nu.wrapT=Uu.wrapT!==void 0?Uu.wrapT:ClampToEdgeWrapping,Nu.magFilter=Uu.magFilter!==void 0?Uu.magFilter:LinearFilter,Nu.minFilter=Uu.minFilter!==void 0?Uu.minFilter:LinearFilter,Nu.anisotropy=Uu.anisotropy!==void 0?Uu.anisotropy:1,Uu.format!==void 0&&(Nu.format=Uu.format),Uu.type!==void 0&&(Nu.type=Uu.type),Uu.mipmaps!==void 0&&(Nu.mipmaps=Uu.mipmaps,Nu.minFilter=LinearMipmapLinearFilter),Uu.mipmapCount===1&&(Nu.minFilter=LinearFilter),Nu.needsUpdate=!0,$u&&$u(Nu,Uu))},Ru,Ou),Nu}});function ImageLoader(_u){Loader.call(this,_u)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(_u,$u,Ru,Ou){this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Fu=this,Nu=Cache.get(_u);if(Nu!==void 0)return Fu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Nu),Fu.manager.itemEnd(_u)},0),Nu;var Vu=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Gu(){Vu.removeEventListener("load",Gu,!1),Vu.removeEventListener("error",Uu,!1),Cache.add(_u,this),$u&&$u(this),Fu.manager.itemEnd(_u)}function Uu(Hu){Vu.removeEventListener("load",Gu,!1),Vu.removeEventListener("error",Uu,!1),Ou&&Ou(Hu),Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)}return Vu.addEventListener("load",Gu,!1),Vu.addEventListener("error",Uu,!1),_u.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Vu.crossOrigin=this.crossOrigin),Fu.manager.itemStart(_u),Vu.src=_u,Vu}});function CubeTextureLoader(_u){Loader.call(this,_u)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(_u,$u,Ru,Ou){var Fu=new CubeTexture,Nu=new ImageLoader(this.manager);Nu.setCrossOrigin(this.crossOrigin),Nu.setPath(this.path);var Vu=0;function Gu(Hu){Nu.load(_u[Hu],function(Wu){Fu.images[Hu]=Wu,Vu++,Vu===6&&(Fu.needsUpdate=!0,$u&&$u(Fu))},void 0,Ou)}for(var Uu=0;Uu<_u.length;++Uu)Gu(Uu);return Fu}});function TextureLoader(_u){Loader.call(this,_u)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(_u,$u,Ru,Ou){var Fu=new Texture,Nu=new ImageLoader(this.manager);return Nu.setCrossOrigin(this.crossOrigin),Nu.setPath(this.path),Nu.load(_u,function(Vu){Fu.image=Vu;var Gu=_u.search(/\.jpe?g($|\?)/i)>0||_u.search(/^data\:image\/jpeg/)===0;Fu.format=Gu?RGBFormat:RGBAFormat,Fu.needsUpdate=!0,$u!==void 0&&$u(Fu)},Ru,Ou),Fu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(_u,$u){var Ru=this.getUtoTmapping(_u);return this.getPoint(Ru,$u)},getPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Ru=0;Ru<=_u;Ru++)$u.push(this.getPoint(Ru/_u));return $u},getSpacedPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Ru=0;Ru<=_u;Ru++)$u.push(this.getPointAt(Ru/_u));return $u},getLength:function(){var _u=this.getLengths();return _u[_u.length-1]},getLengths:function(_u){if(_u===void 0&&(_u=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===_u+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var $u=[],Ru,Ou=this.getPoint(0),Fu,Nu=0;for($u.push(0),Fu=1;Fu<=_u;Fu++)Ru=this.getPoint(Fu/_u),Nu+=Ru.distanceTo(Ou),$u.push(Nu),Ou=Ru;return this.cacheArcLengths=$u,$u},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(_u,$u){var Ru=this.getLengths(),Ou=0,Fu=Ru.length,Nu;$u?Nu=$u:Nu=_u*Ru[Fu-1];for(var Vu=0,Gu=Fu-1,Uu;Vu<=Gu;)if(Ou=Math.floor(Vu+(Gu-Vu)/2),Uu=Ru[Ou]-Nu,Uu<0)Vu=Ou+1;else if(Uu>0)Gu=Ou-1;else{Gu=Ou;break}if(Ou=Gu,Ru[Ou]===Nu)return Ou/(Fu-1);var Hu=Ru[Ou],Wu=Ru[Ou+1],Qu=Wu-Hu,qu=(Nu-Hu)/Qu,Ku=(Ou+qu)/(Fu-1);return Ku},getTangent:function(_u,$u){var Ru=1e-4,Ou=_u-Ru,Fu=_u+Ru;Ou<0&&(Ou=0),Fu>1&&(Fu=1);var Nu=this.getPoint(Ou),Vu=this.getPoint(Fu),Gu=$u||(Nu.isVector2?new Vector2:new Vector3);return Gu.copy(Vu).sub(Nu).normalize(),Gu},getTangentAt:function(_u,$u){var Ru=this.getUtoTmapping(_u);return this.getTangent(Ru,$u)},computeFrenetFrames:function(_u,$u){var Ru=new Vector3,Ou=[],Fu=[],Nu=[],Vu=new Vector3,Gu=new Matrix4,Uu,Hu,Wu;for(Uu=0;Uu<=_u;Uu++)Hu=Uu/_u,Ou[Uu]=this.getTangentAt(Hu,new Vector3),Ou[Uu].normalize();Fu[0]=new Vector3,Nu[0]=new Vector3;var Qu=Number.MAX_VALUE,qu=Math.abs(Ou[0].x),Ku=Math.abs(Ou[0].y),Yu=Math.abs(Ou[0].z);for(qu<=Qu&&(Qu=qu,Ru.set(1,0,0)),Ku<=Qu&&(Qu=Ku,Ru.set(0,1,0)),Yu<=Qu&&Ru.set(0,0,1),Vu.crossVectors(Ou[0],Ru).normalize(),Fu[0].crossVectors(Ou[0],Vu),Nu[0].crossVectors(Ou[0],Fu[0]),Uu=1;Uu<=_u;Uu++)Fu[Uu]=Fu[Uu-1].clone(),Nu[Uu]=Nu[Uu-1].clone(),Vu.crossVectors(Ou[Uu-1],Ou[Uu]),Vu.length()>Number.EPSILON&&(Vu.normalize(),Wu=Math.acos(MathUtils.clamp(Ou[Uu-1].dot(Ou[Uu]),-1,1)),Fu[Uu].applyMatrix4(Gu.makeRotationAxis(Vu,Wu))),Nu[Uu].crossVectors(Ou[Uu],Fu[Uu]);if($u===!0)for(Wu=Math.acos(MathUtils.clamp(Fu[0].dot(Fu[_u]),-1,1)),Wu/=_u,Ou[0].dot(Vu.crossVectors(Fu[0],Fu[_u]))>0&&(Wu=-Wu),Uu=1;Uu<=_u;Uu++)Fu[Uu].applyMatrix4(Gu.makeRotationAxis(Ou[Uu],Wu*Uu)),Nu[Uu].crossVectors(Ou[Uu],Fu[Uu]);return{tangents:Ou,normals:Fu,binormals:Nu}},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this},toJSON:function(){var _u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _u.arcLengthDivisions=this.arcLengthDivisions,_u.type=this.type,_u},fromJSON:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this}});function EllipseCurve(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){Curve.call(this),this.type="EllipseCurve",this.aX=_u||0,this.aY=$u||0,this.xRadius=Ru||1,this.yRadius=Ou||1,this.aStartAngle=Fu||0,this.aEndAngle=Nu||2*Math.PI,this.aClockwise=Vu||!1,this.aRotation=Gu||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(_u,$u){for(var Ru=$u||new Vector2,Ou=Math.PI*2,Fu=this.aEndAngle-this.aStartAngle,Nu=Math.abs(Fu)<Number.EPSILON;Fu<0;)Fu+=Ou;for(;Fu>Ou;)Fu-=Ou;Fu<Number.EPSILON&&(Nu?Fu=0:Fu=Ou),this.aClockwise===!0&&!Nu&&(Fu===Ou?Fu=-Ou:Fu=Fu-Ou);var Vu=this.aStartAngle+_u*Fu,Gu=this.aX+this.xRadius*Math.cos(Vu),Uu=this.aY+this.yRadius*Math.sin(Vu);if(this.aRotation!==0){var Hu=Math.cos(this.aRotation),Wu=Math.sin(this.aRotation),Qu=Gu-this.aX,qu=Uu-this.aY;Gu=Qu*Hu-qu*Wu+this.aX,Uu=Qu*Wu+qu*Hu+this.aY}return Ru.set(Gu,Uu)};EllipseCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};EllipseCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.aX=this.aX,_u.aY=this.aY,_u.xRadius=this.xRadius,_u.yRadius=this.yRadius,_u.aStartAngle=this.aStartAngle,_u.aEndAngle=this.aEndAngle,_u.aClockwise=this.aClockwise,_u.aRotation=this.aRotation,_u};EllipseCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};function ArcCurve(_u,$u,Ru,Ou,Fu,Nu){EllipseCurve.call(this,_u,$u,Ru,Ru,Ou,Fu,Nu),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var _u=0,$u=0,Ru=0,Ou=0;function Fu(Nu,Vu,Gu,Uu){_u=Nu,$u=Gu,Ru=-3*Nu+3*Vu-2*Gu-Uu,Ou=2*Nu-2*Vu+Gu+Uu}return{initCatmullRom:function(Nu,Vu,Gu,Uu,Hu){Fu(Vu,Gu,Hu*(Gu-Nu),Hu*(Uu-Vu))},initNonuniformCatmullRom:function(Nu,Vu,Gu,Uu,Hu,Wu,Qu){var qu=(Vu-Nu)/Hu-(Gu-Nu)/(Hu+Wu)+(Gu-Vu)/Wu,Ku=(Gu-Vu)/Wu-(Uu-Vu)/(Wu+Qu)+(Uu-Gu)/Qu;qu*=Wu,Ku*=Wu,Fu(Vu,Gu,qu,Ku)},calc:function(Nu){var Vu=Nu*Nu,Gu=Vu*Nu;return _u+$u*Nu+Ru*Vu+Ou*Gu}}}var tmp=new Vector3,px=new CubicPoly,py$1=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(_u,$u,Ru,Ou){Curve.call(this),this.type="CatmullRomCurve3",this.points=_u||[],this.closed=$u||!1,this.curveType=Ru||"centripetal",this.tension=Ou||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector3,Ou=this.points,Fu=Ou.length,Nu=(Fu-(this.closed?0:1))*_u,Vu=Math.floor(Nu),Gu=Nu-Vu;this.closed?Vu+=Vu>0?0:(Math.floor(Math.abs(Vu)/Fu)+1)*Fu:Gu===0&&Vu===Fu-1&&(Vu=Fu-2,Gu=1);var Uu,Hu,Wu,Qu;if(this.closed||Vu>0?Uu=Ou[(Vu-1)%Fu]:(tmp.subVectors(Ou[0],Ou[1]).add(Ou[0]),Uu=tmp),Hu=Ou[Vu%Fu],Wu=Ou[(Vu+1)%Fu],this.closed||Vu+2<Fu?Qu=Ou[(Vu+2)%Fu]:(tmp.subVectors(Ou[Fu-1],Ou[Fu-2]).add(Ou[Fu-1]),Qu=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var qu=this.curveType==="chordal"?.5:.25,Ku=Math.pow(Uu.distanceToSquared(Hu),qu),Yu=Math.pow(Hu.distanceToSquared(Wu),qu),_c=Math.pow(Wu.distanceToSquared(Qu),qu);Yu<1e-4&&(Yu=1),Ku<1e-4&&(Ku=Yu),_c<1e-4&&(_c=Yu),px.initNonuniformCatmullRom(Uu.x,Hu.x,Wu.x,Qu.x,Ku,Yu,_c),py$1.initNonuniformCatmullRom(Uu.y,Hu.y,Wu.y,Qu.y,Ku,Yu,_c),pz.initNonuniformCatmullRom(Uu.z,Hu.z,Wu.z,Qu.z,Ku,Yu,_c)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Uu.x,Hu.x,Wu.x,Qu.x,this.tension),py$1.initCatmullRom(Uu.y,Hu.y,Wu.y,Qu.y,this.tension),pz.initCatmullRom(Uu.z,Hu.z,Wu.z,Qu.z,this.tension));return Ru.set(px.calc(Gu),py$1.calc(Gu),pz.calc(Gu)),Ru};CatmullRomCurve3.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Ru=_u.points.length;$u<Ru;$u++){var Ou=_u.points[$u];this.points.push(Ou.clone())}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Ru=this.points.length;$u<Ru;$u++){var Ou=this.points[$u];_u.points.push(Ou.toArray())}return _u.closed=this.closed,_u.curveType=this.curveType,_u.tension=this.tension,_u};CatmullRomCurve3.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Ru=_u.points.length;$u<Ru;$u++){var Ou=_u.points[$u];this.points.push(new Vector3().fromArray(Ou))}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};function CatmullRom(_u,$u,Ru,Ou,Fu){var Nu=(Ou-$u)*.5,Vu=(Fu-Ru)*.5,Gu=_u*_u,Uu=_u*Gu;return(2*Ru-2*Ou+Nu+Vu)*Uu+(-3*Ru+3*Ou-2*Nu-Vu)*Gu+Nu*_u+Ru}function QuadraticBezierP0(_u,$u){var Ru=1-_u;return Ru*Ru*$u}function QuadraticBezierP1(_u,$u){return 2*(1-_u)*_u*$u}function QuadraticBezierP2(_u,$u){return _u*_u*$u}function QuadraticBezier(_u,$u,Ru,Ou){return QuadraticBezierP0(_u,$u)+QuadraticBezierP1(_u,Ru)+QuadraticBezierP2(_u,Ou)}function CubicBezierP0(_u,$u){var Ru=1-_u;return Ru*Ru*Ru*$u}function CubicBezierP1(_u,$u){var Ru=1-_u;return 3*Ru*Ru*_u*$u}function CubicBezierP2(_u,$u){return 3*(1-_u)*_u*_u*$u}function CubicBezierP3(_u,$u){return _u*_u*_u*$u}function CubicBezier(_u,$u,Ru,Ou,Fu){return CubicBezierP0(_u,$u)+CubicBezierP1(_u,Ru)+CubicBezierP2(_u,Ou)+CubicBezierP3(_u,Fu)}function CubicBezierCurve(_u,$u,Ru,Ou){Curve.call(this),this.type="CubicBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Ru||new Vector2,this.v3=Ou||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector2,Ou=this.v0,Fu=this.v1,Nu=this.v2,Vu=this.v3;return Ru.set(CubicBezier(_u,Ou.x,Fu.x,Nu.x,Vu.x),CubicBezier(_u,Ou.y,Fu.y,Nu.y,Vu.y)),Ru};CubicBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function CubicBezierCurve3(_u,$u,Ru,Ou){Curve.call(this),this.type="CubicBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Ru||new Vector3,this.v3=Ou||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector3,Ou=this.v0,Fu=this.v1,Nu=this.v2,Vu=this.v3;return Ru.set(CubicBezier(_u,Ou.x,Fu.x,Nu.x,Vu.x),CubicBezier(_u,Ou.y,Fu.y,Nu.y,Vu.y),CubicBezier(_u,Ou.z,Fu.z,Nu.z,Vu.z)),Ru};CubicBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function LineCurve(_u,$u){Curve.call(this),this.type="LineCurve",this.v1=_u||new Vector2,this.v2=$u||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector2;return _u===1?Ru.copy(this.v2):(Ru.copy(this.v2).sub(this.v1),Ru.multiplyScalar(_u).add(this.v1)),Ru};LineCurve.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve.prototype.getTangent=function(_u,$u){var Ru=$u||new Vector2,Ru=Ru.copy(this.v2).sub(this.v1).normalize();return Ru};LineCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function LineCurve3(_u,$u){Curve.call(this),this.type="LineCurve3",this.v1=_u||new Vector3,this.v2=$u||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector3;return _u===1?Ru.copy(this.v2):(Ru.copy(this.v2).sub(this.v1),Ru.multiplyScalar(_u).add(this.v1)),Ru};LineCurve3.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve(_u,$u,Ru){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Ru||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector2,Ou=this.v0,Fu=this.v1,Nu=this.v2;return Ru.set(QuadraticBezier(_u,Ou.x,Fu.x,Nu.x),QuadraticBezier(_u,Ou.y,Fu.y,Nu.y)),Ru};QuadraticBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve3(_u,$u,Ru){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Ru||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector3,Ou=this.v0,Fu=this.v1,Nu=this.v2;return Ru.set(QuadraticBezier(_u,Ou.x,Fu.x,Nu.x),QuadraticBezier(_u,Ou.y,Fu.y,Nu.y),QuadraticBezier(_u,Ou.z,Fu.z,Nu.z)),Ru};QuadraticBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function SplineCurve(_u){Curve.call(this),this.type="SplineCurve",this.points=_u||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector2,Ou=this.points,Fu=(Ou.length-1)*_u,Nu=Math.floor(Fu),Vu=Fu-Nu,Gu=Ou[Nu===0?Nu:Nu-1],Uu=Ou[Nu],Hu=Ou[Nu>Ou.length-2?Ou.length-1:Nu+1],Wu=Ou[Nu>Ou.length-3?Ou.length-1:Nu+2];return Ru.set(CatmullRom(Vu,Gu.x,Uu.x,Hu.x,Wu.x),CatmullRom(Vu,Gu.y,Uu.y,Hu.y,Wu.y)),Ru};SplineCurve.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Ru=_u.points.length;$u<Ru;$u++){var Ou=_u.points[$u];this.points.push(Ou.clone())}return this};SplineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Ru=this.points.length;$u<Ru;$u++){var Ou=this.points[$u];_u.points.push(Ou.toArray())}return _u};SplineCurve.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Ru=_u.points.length;$u<Ru;$u++){var Ou=_u.points[$u];this.points.push(new Vector2().fromArray(Ou))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(_u){this.curves.push(_u)},closePath:function(){var _u=this.curves[0].getPoint(0),$u=this.curves[this.curves.length-1].getPoint(1);_u.equals($u)||this.curves.push(new LineCurve($u,_u))},getPoint:function(_u){for(var $u=_u*this.getLength(),Ru=this.getCurveLengths(),Ou=0;Ou<Ru.length;){if(Ru[Ou]>=$u){var Fu=Ru[Ou]-$u,Nu=this.curves[Ou],Vu=Nu.getLength(),Gu=Vu===0?0:1-Fu/Vu;return Nu.getPointAt(Gu)}Ou++}return null},getLength:function(){var _u=this.getCurveLengths();return _u[_u.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var _u=[],$u=0,Ru=0,Ou=this.curves.length;Ru<Ou;Ru++)$u+=this.curves[Ru].getLength(),_u.push($u);return this.cacheLengths=_u,_u},getSpacedPoints:function(_u){_u===void 0&&(_u=40);for(var $u=[],Ru=0;Ru<=_u;Ru++)$u.push(this.getPoint(Ru/_u));return this.autoClose&&$u.push($u[0]),$u},getPoints:function(_u){_u=_u||12;for(var $u=[],Ru,Ou=0,Fu=this.curves;Ou<Fu.length;Ou++)for(var Nu=Fu[Ou],Vu=Nu&&Nu.isEllipseCurve?_u*2:Nu&&(Nu.isLineCurve||Nu.isLineCurve3)?1:Nu&&Nu.isSplineCurve?_u*Nu.points.length:_u,Gu=Nu.getPoints(Vu),Uu=0;Uu<Gu.length;Uu++){var Hu=Gu[Uu];Ru&&Ru.equals(Hu)||($u.push(Hu),Ru=Hu)}return this.autoClose&&$u.length>1&&!$u[$u.length-1].equals($u[0])&&$u.push($u[0]),$u},copy:function(_u){Curve.prototype.copy.call(this,_u),this.curves=[];for(var $u=0,Ru=_u.curves.length;$u<Ru;$u++){var Ou=_u.curves[$u];this.curves.push(Ou.clone())}return this.autoClose=_u.autoClose,this},toJSON:function(){var _u=Curve.prototype.toJSON.call(this);_u.autoClose=this.autoClose,_u.curves=[];for(var $u=0,Ru=this.curves.length;$u<Ru;$u++){var Ou=this.curves[$u];_u.curves.push(Ou.toJSON())}return _u},fromJSON:function(_u){Curve.prototype.fromJSON.call(this,_u),this.autoClose=_u.autoClose,this.curves=[];for(var $u=0,Ru=_u.curves.length;$u<Ru;$u++){var Ou=_u.curves[$u];this.curves.push(new Curves[Ou.type]().fromJSON(Ou))}return this}});function Path(_u){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,_u&&this.setFromPoints(_u)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(_u){this.moveTo(_u[0].x,_u[0].y);for(var $u=1,Ru=_u.length;$u<Ru;$u++)this.lineTo(_u[$u].x,_u[$u].y);return this},moveTo:function(_u,$u){return this.currentPoint.set(_u,$u),this},lineTo:function(_u,$u){var Ru=new LineCurve(this.currentPoint.clone(),new Vector2(_u,$u));return this.curves.push(Ru),this.currentPoint.set(_u,$u),this},quadraticCurveTo:function(_u,$u,Ru,Ou){var Fu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Ru,Ou));return this.curves.push(Fu),this.currentPoint.set(Ru,Ou),this},bezierCurveTo:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Ru,Ou),new Vector2(Fu,Nu));return this.curves.push(Vu),this.currentPoint.set(Fu,Nu),this},splineThru:function(_u){var $u=[this.currentPoint.clone()].concat(_u),Ru=new SplineCurve($u);return this.curves.push(Ru),this.currentPoint.copy(_u[_u.length-1]),this},arc:function(_u,$u,Ru,Ou,Fu,Nu){var Vu=this.currentPoint.x,Gu=this.currentPoint.y;return this.absarc(_u+Vu,$u+Gu,Ru,Ou,Fu,Nu),this},absarc:function(_u,$u,Ru,Ou,Fu,Nu){return this.absellipse(_u,$u,Ru,Ru,Ou,Fu,Nu),this},ellipse:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){var Uu=this.currentPoint.x,Hu=this.currentPoint.y;return this.absellipse(_u+Uu,$u+Hu,Ru,Ou,Fu,Nu,Vu,Gu),this},absellipse:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){var Uu=new EllipseCurve(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu);if(this.curves.length>0){var Hu=Uu.getPoint(0);Hu.equals(this.currentPoint)||this.lineTo(Hu.x,Hu.y)}this.curves.push(Uu);var Wu=Uu.getPoint(1);return this.currentPoint.copy(Wu),this},copy:function(_u){return CurvePath.prototype.copy.call(this,_u),this.currentPoint.copy(_u.currentPoint),this},toJSON:function(){var _u=CurvePath.prototype.toJSON.call(this);return _u.currentPoint=this.currentPoint.toArray(),_u},fromJSON:function(_u){return CurvePath.prototype.fromJSON.call(this,_u),this.currentPoint.fromArray(_u.currentPoint),this}});function Shape(_u){Path.call(this,_u),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(_u){for(var $u=[],Ru=0,Ou=this.holes.length;Ru<Ou;Ru++)$u[Ru]=this.holes[Ru].getPoints(_u);return $u},extractPoints:function(_u){return{shape:this.getPoints(_u),holes:this.getPointsHoles(_u)}},copy:function(_u){Path.prototype.copy.call(this,_u),this.holes=[];for(var $u=0,Ru=_u.holes.length;$u<Ru;$u++){var Ou=_u.holes[$u];this.holes.push(Ou.clone())}return this},toJSON:function(){var _u=Path.prototype.toJSON.call(this);_u.uuid=this.uuid,_u.holes=[];for(var $u=0,Ru=this.holes.length;$u<Ru;$u++){var Ou=this.holes[$u];_u.holes.push(Ou.toJSON())}return _u},fromJSON:function(_u){Path.prototype.fromJSON.call(this,_u),this.uuid=_u.uuid,this.holes=[];for(var $u=0,Ru=_u.holes.length;$u<Ru;$u++){var Ou=_u.holes[$u];this.holes.push(new Path().fromJSON(Ou))}return this}});function Light(_u,$u){Object3D.call(this),this.type="Light",this.color=new Color(_u),this.intensity=$u!==void 0?$u:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),this.color.copy(_u.color),this.intensity=_u.intensity,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.color=this.color.getHex(),$u.object.intensity=this.intensity,this.groundColor!==void 0&&($u.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&($u.object.distance=this.distance),this.angle!==void 0&&($u.object.angle=this.angle),this.decay!==void 0&&($u.object.decay=this.decay),this.penumbra!==void 0&&($u.object.penumbra=this.penumbra),this.shadow!==void 0&&($u.object.shadow=this.shadow.toJSON()),$u}});function HemisphereLight(_u,$u,Ru){Light.call(this,_u,Ru),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color($u)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.groundColor.copy(_u.groundColor),this}});function LightShadow(_u){this.camera=_u,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(_u){var $u=this.camera,Ru=this.matrix,Ou=this._projScreenMatrix,Fu=this._lookTarget,Nu=this._lightPositionWorld;Nu.setFromMatrixPosition(_u.matrixWorld),$u.position.copy(Nu),Fu.setFromMatrixPosition(_u.target.matrixWorld),$u.lookAt(Fu),$u.updateMatrixWorld(),Ou.multiplyMatrices($u.projectionMatrix,$u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ou),Ru.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ru.multiply($u.projectionMatrix),Ru.multiply($u.matrixWorldInverse)},getViewport:function(_u){return this._viewports[_u]},getFrameExtents:function(){return this._frameExtents},copy:function(_u){return this.camera=_u.camera.clone(),this.bias=_u.bias,this.radius=_u.radius,this.mapSize.copy(_u.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u={};return this.bias!==0&&(_u.bias=this.bias),this.radius!==1&&(_u.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_u.mapSize=this.mapSize.toArray()),_u.camera=this.camera.toJSON(!1).object,delete _u.camera.matrix,_u}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(_u){var $u=this.camera,Ru=MathUtils.RAD2DEG*2*_u.angle,Ou=this.mapSize.width/this.mapSize.height,Fu=_u.distance||$u.far;(Ru!==$u.fov||Ou!==$u.aspect||Fu!==$u.far)&&($u.fov=Ru,$u.aspect=Ou,$u.far=Fu,$u.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,_u)}});function SpotLight(_u,$u,Ru,Ou,Fu,Nu){Light.call(this,_u,$u),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Vu){this.intensity=Vu/Math.PI}}),this.distance=Ru!==void 0?Ru:0,this.angle=Ou!==void 0?Ou:Math.PI/3,this.penumbra=Fu!==void 0?Fu:0,this.decay=Nu!==void 0?Nu:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.angle=_u.angle,this.penumbra=_u.penumbra,this.decay=_u.decay,this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(_u,$u){$u===void 0&&($u=0);var Ru=this.camera,Ou=this.matrix,Fu=this._lightPositionWorld,Nu=this._lookTarget,Vu=this._projScreenMatrix;Fu.setFromMatrixPosition(_u.matrixWorld),Ru.position.copy(Fu),Nu.copy(Ru.position),Nu.add(this._cubeDirections[$u]),Ru.up.copy(this._cubeUps[$u]),Ru.lookAt(Nu),Ru.updateMatrixWorld(),Ou.makeTranslation(-Fu.x,-Fu.y,-Fu.z),Vu.multiplyMatrices(Ru.projectionMatrix,Ru.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vu)}});function PointLight(_u,$u,Ru,Ou){Light.call(this,_u,$u),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Fu){this.intensity=Fu/(4*Math.PI)}}),this.distance=Ru!==void 0?Ru:0,this.decay=Ou!==void 0?Ou:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.decay=_u.decay,this.shadow=_u.shadow.clone(),this}});function OrthographicCamera(_u,$u,Ru,Ou,Fu,Nu){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_u!==void 0?_u:-1,this.right=$u!==void 0?$u:1,this.top=Ru!==void 0?Ru:1,this.bottom=Ou!==void 0?Ou:-1,this.near=Fu!==void 0?Fu:.1,this.far=Nu!==void 0?Nu:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.left=_u.left,this.right=_u.right,this.top=_u.top,this.bottom=_u.bottom,this.near=_u.near,this.far=_u.far,this.zoom=_u.zoom,this.view=_u.view===null?null:Object.assign({},_u.view),this},setViewOffset:function(_u,$u,Ru,Ou,Fu,Nu){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Ru,this.view.offsetY=Ou,this.view.width=Fu,this.view.height=Nu,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=(this.right-this.left)/(2*this.zoom),$u=(this.top-this.bottom)/(2*this.zoom),Ru=(this.right+this.left)/2,Ou=(this.top+this.bottom)/2,Fu=Ru-_u,Nu=Ru+_u,Vu=Ou+$u,Gu=Ou-$u;if(this.view!==null&&this.view.enabled){var Uu=(this.right-this.left)/this.view.fullWidth/this.zoom,Hu=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Fu+=Uu*this.view.offsetX,Nu=Fu+Uu*this.view.width,Vu-=Hu*this.view.offsetY,Gu=Vu-Hu*this.view.height}this.projectionMatrix.makeOrthographic(Fu,Nu,Vu,Gu,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.zoom=this.zoom,$u.object.left=this.left,$u.object.right=this.right,$u.object.top=this.top,$u.object.bottom=this.bottom,$u.object.near=this.near,$u.object.far=this.far,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(_u){LightShadow.prototype.updateMatrices.call(this,_u)}});function DirectionalLight(_u,$u){Light.call(this,_u,$u),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function AmbientLight(_u,$u){Light.call(this,_u,$u),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(_u,$u,Ru,Ou){Light.call(this,_u,$u),this.type="RectAreaLight",this.width=Ru!==void 0?Ru:10,this.height=Ou!==void 0?Ou:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.width=_u.width,this.height=_u.height,this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.width=this.width,$u.object.height=this.height,$u}});function SphericalHarmonics3(){this.coefficients=[];for(var _u=0;_u<9;_u++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].copy(_u[$u]);return this},zero:function(){for(var _u=0;_u<9;_u++)this.coefficients[_u].set(0,0,0);return this},getAt:function(_u,$u){var Ru=_u.x,Ou=_u.y,Fu=_u.z,Nu=this.coefficients;return $u.copy(Nu[0]).multiplyScalar(.282095),$u.addScaledVector(Nu[1],.488603*Ou),$u.addScaledVector(Nu[2],.488603*Fu),$u.addScaledVector(Nu[3],.488603*Ru),$u.addScaledVector(Nu[4],1.092548*(Ru*Ou)),$u.addScaledVector(Nu[5],1.092548*(Ou*Fu)),$u.addScaledVector(Nu[6],.315392*(3*Fu*Fu-1)),$u.addScaledVector(Nu[7],1.092548*(Ru*Fu)),$u.addScaledVector(Nu[8],.546274*(Ru*Ru-Ou*Ou)),$u},getIrradianceAt:function(_u,$u){var Ru=_u.x,Ou=_u.y,Fu=_u.z,Nu=this.coefficients;return $u.copy(Nu[0]).multiplyScalar(.886227),$u.addScaledVector(Nu[1],2*.511664*Ou),$u.addScaledVector(Nu[2],2*.511664*Fu),$u.addScaledVector(Nu[3],2*.511664*Ru),$u.addScaledVector(Nu[4],2*.429043*Ru*Ou),$u.addScaledVector(Nu[5],2*.429043*Ou*Fu),$u.addScaledVector(Nu[6],.743125*Fu*Fu-.247708),$u.addScaledVector(Nu[7],2*.429043*Ru*Fu),$u.addScaledVector(Nu[8],.429043*(Ru*Ru-Ou*Ou)),$u},add:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].add(_u.coefficients[$u]);return this},addScaledSH:function(_u,$u){for(var Ru=0;Ru<9;Ru++)this.coefficients[Ru].addScaledVector(_u.coefficients[Ru],$u);return this},scale:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].multiplyScalar(_u);return this},lerp:function(_u,$u){for(var Ru=0;Ru<9;Ru++)this.coefficients[Ru].lerp(_u.coefficients[Ru],$u);return this},equals:function(_u){for(var $u=0;$u<9;$u++)if(!this.coefficients[$u].equals(_u.coefficients[$u]))return!1;return!0},copy:function(_u){return this.set(_u.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Ru=this.coefficients,Ou=0;Ou<9;Ou++)Ru[Ou].fromArray(_u,$u+Ou*3);return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);for(var Ru=this.coefficients,Ou=0;Ou<9;Ou++)Ru[Ou].toArray(_u,$u+Ou*3);return _u}});Object.assign(SphericalHarmonics3,{getBasisAt:function(_u,$u){var Ru=_u.x,Ou=_u.y,Fu=_u.z;$u[0]=.282095,$u[1]=.488603*Ou,$u[2]=.488603*Fu,$u[3]=.488603*Ru,$u[4]=1.092548*Ru*Ou,$u[5]=1.092548*Ou*Fu,$u[6]=.315392*(3*Fu*Fu-1),$u[7]=1.092548*Ru*Fu,$u[8]=.546274*(Ru*Ru-Ou*Ou)}});function LightProbe(_u,$u){Light.call(this,void 0,$u),this.type="LightProbe",this.sh=_u!==void 0?_u:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.sh.copy(_u.sh),this},fromJSON:function(_u){return this.intensity=_u.intensity,this.sh.fromArray(_u.sh),this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.sh=this.sh.toArray(),$u}});function MaterialLoader(_u){Loader.call(this,_u),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new FileLoader(Fu.manager);Nu.setPath(Fu.path),Nu.load(_u,function(Vu){try{$u(Fu.parse(JSON.parse(Vu)))}catch(Gu){Ou?Ou(Gu):console.error(Gu),Fu.manager.itemError(_u)}},Ru,Ou)},parse:function(_u){var $u=this.textures;function Ru(Uu){return $u[Uu]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Uu),$u[Uu]}var Ou=new Materials[_u.type];if(_u.uuid!==void 0&&(Ou.uuid=_u.uuid),_u.name!==void 0&&(Ou.name=_u.name),_u.color!==void 0&&Ou.color.setHex(_u.color),_u.roughness!==void 0&&(Ou.roughness=_u.roughness),_u.metalness!==void 0&&(Ou.metalness=_u.metalness),_u.sheen!==void 0&&(Ou.sheen=new Color().setHex(_u.sheen)),_u.emissive!==void 0&&Ou.emissive.setHex(_u.emissive),_u.specular!==void 0&&Ou.specular.setHex(_u.specular),_u.shininess!==void 0&&(Ou.shininess=_u.shininess),_u.clearcoat!==void 0&&(Ou.clearcoat=_u.clearcoat),_u.clearcoatRoughness!==void 0&&(Ou.clearcoatRoughness=_u.clearcoatRoughness),_u.fog!==void 0&&(Ou.fog=_u.fog),_u.flatShading!==void 0&&(Ou.flatShading=_u.flatShading),_u.blending!==void 0&&(Ou.blending=_u.blending),_u.combine!==void 0&&(Ou.combine=_u.combine),_u.side!==void 0&&(Ou.side=_u.side),_u.opacity!==void 0&&(Ou.opacity=_u.opacity),_u.transparent!==void 0&&(Ou.transparent=_u.transparent),_u.alphaTest!==void 0&&(Ou.alphaTest=_u.alphaTest),_u.depthTest!==void 0&&(Ou.depthTest=_u.depthTest),_u.depthWrite!==void 0&&(Ou.depthWrite=_u.depthWrite),_u.colorWrite!==void 0&&(Ou.colorWrite=_u.colorWrite),_u.stencilWrite!==void 0&&(Ou.stencilWrite=_u.stencilWrite),_u.stencilWriteMask!==void 0&&(Ou.stencilWriteMask=_u.stencilWriteMask),_u.stencilFunc!==void 0&&(Ou.stencilFunc=_u.stencilFunc),_u.stencilRef!==void 0&&(Ou.stencilRef=_u.stencilRef),_u.stencilFuncMask!==void 0&&(Ou.stencilFuncMask=_u.stencilFuncMask),_u.stencilFail!==void 0&&(Ou.stencilFail=_u.stencilFail),_u.stencilZFail!==void 0&&(Ou.stencilZFail=_u.stencilZFail),_u.stencilZPass!==void 0&&(Ou.stencilZPass=_u.stencilZPass),_u.wireframe!==void 0&&(Ou.wireframe=_u.wireframe),_u.wireframeLinewidth!==void 0&&(Ou.wireframeLinewidth=_u.wireframeLinewidth),_u.wireframeLinecap!==void 0&&(Ou.wireframeLinecap=_u.wireframeLinecap),_u.wireframeLinejoin!==void 0&&(Ou.wireframeLinejoin=_u.wireframeLinejoin),_u.rotation!==void 0&&(Ou.rotation=_u.rotation),_u.linewidth!==1&&(Ou.linewidth=_u.linewidth),_u.dashSize!==void 0&&(Ou.dashSize=_u.dashSize),_u.gapSize!==void 0&&(Ou.gapSize=_u.gapSize),_u.scale!==void 0&&(Ou.scale=_u.scale),_u.polygonOffset!==void 0&&(Ou.polygonOffset=_u.polygonOffset),_u.polygonOffsetFactor!==void 0&&(Ou.polygonOffsetFactor=_u.polygonOffsetFactor),_u.polygonOffsetUnits!==void 0&&(Ou.polygonOffsetUnits=_u.polygonOffsetUnits),_u.skinning!==void 0&&(Ou.skinning=_u.skinning),_u.morphTargets!==void 0&&(Ou.morphTargets=_u.morphTargets),_u.morphNormals!==void 0&&(Ou.morphNormals=_u.morphNormals),_u.dithering!==void 0&&(Ou.dithering=_u.dithering),_u.vertexTangents!==void 0&&(Ou.vertexTangents=_u.vertexTangents),_u.visible!==void 0&&(Ou.visible=_u.visible),_u.toneMapped!==void 0&&(Ou.toneMapped=_u.toneMapped),_u.userData!==void 0&&(Ou.userData=_u.userData),_u.vertexColors!==void 0&&(typeof _u.vertexColors=="number"?Ou.vertexColors=_u.vertexColors>0:Ou.vertexColors=_u.vertexColors),_u.uniforms!==void 0)for(var Fu in _u.uniforms){var Nu=_u.uniforms[Fu];switch(Ou.uniforms[Fu]={},Nu.type){case"t":Ou.uniforms[Fu].value=Ru(Nu.value);break;case"c":Ou.uniforms[Fu].value=new Color().setHex(Nu.value);break;case"v2":Ou.uniforms[Fu].value=new Vector2().fromArray(Nu.value);break;case"v3":Ou.uniforms[Fu].value=new Vector3().fromArray(Nu.value);break;case"v4":Ou.uniforms[Fu].value=new Vector4().fromArray(Nu.value);break;case"m3":Ou.uniforms[Fu].value=new Matrix3().fromArray(Nu.value);case"m4":Ou.uniforms[Fu].value=new Matrix4().fromArray(Nu.value);break;default:Ou.uniforms[Fu].value=Nu.value}}if(_u.defines!==void 0&&(Ou.defines=_u.defines),_u.vertexShader!==void 0&&(Ou.vertexShader=_u.vertexShader),_u.fragmentShader!==void 0&&(Ou.fragmentShader=_u.fragmentShader),_u.extensions!==void 0)for(var Vu in _u.extensions)Ou.extensions[Vu]=_u.extensions[Vu];if(_u.shading!==void 0&&(Ou.flatShading=_u.shading===1),_u.size!==void 0&&(Ou.size=_u.size),_u.sizeAttenuation!==void 0&&(Ou.sizeAttenuation=_u.sizeAttenuation),_u.map!==void 0&&(Ou.map=Ru(_u.map)),_u.matcap!==void 0&&(Ou.matcap=Ru(_u.matcap)),_u.alphaMap!==void 0&&(Ou.alphaMap=Ru(_u.alphaMap)),_u.bumpMap!==void 0&&(Ou.bumpMap=Ru(_u.bumpMap)),_u.bumpScale!==void 0&&(Ou.bumpScale=_u.bumpScale),_u.normalMap!==void 0&&(Ou.normalMap=Ru(_u.normalMap)),_u.normalMapType!==void 0&&(Ou.normalMapType=_u.normalMapType),_u.normalScale!==void 0){var Gu=_u.normalScale;Array.isArray(Gu)===!1&&(Gu=[Gu,Gu]),Ou.normalScale=new Vector2().fromArray(Gu)}return _u.displacementMap!==void 0&&(Ou.displacementMap=Ru(_u.displacementMap)),_u.displacementScale!==void 0&&(Ou.displacementScale=_u.displacementScale),_u.displacementBias!==void 0&&(Ou.displacementBias=_u.displacementBias),_u.roughnessMap!==void 0&&(Ou.roughnessMap=Ru(_u.roughnessMap)),_u.metalnessMap!==void 0&&(Ou.metalnessMap=Ru(_u.metalnessMap)),_u.emissiveMap!==void 0&&(Ou.emissiveMap=Ru(_u.emissiveMap)),_u.emissiveIntensity!==void 0&&(Ou.emissiveIntensity=_u.emissiveIntensity),_u.specularMap!==void 0&&(Ou.specularMap=Ru(_u.specularMap)),_u.envMap!==void 0&&(Ou.envMap=Ru(_u.envMap)),_u.envMapIntensity!==void 0&&(Ou.envMapIntensity=_u.envMapIntensity),_u.reflectivity!==void 0&&(Ou.reflectivity=_u.reflectivity),_u.refractionRatio!==void 0&&(Ou.refractionRatio=_u.refractionRatio),_u.lightMap!==void 0&&(Ou.lightMap=Ru(_u.lightMap)),_u.lightMapIntensity!==void 0&&(Ou.lightMapIntensity=_u.lightMapIntensity),_u.aoMap!==void 0&&(Ou.aoMap=Ru(_u.aoMap)),_u.aoMapIntensity!==void 0&&(Ou.aoMapIntensity=_u.aoMapIntensity),_u.gradientMap!==void 0&&(Ou.gradientMap=Ru(_u.gradientMap)),_u.clearcoatMap!==void 0&&(Ou.clearcoatMap=Ru(_u.clearcoatMap)),_u.clearcoatRoughnessMap!==void 0&&(Ou.clearcoatRoughnessMap=Ru(_u.clearcoatRoughnessMap)),_u.clearcoatNormalMap!==void 0&&(Ou.clearcoatNormalMap=Ru(_u.clearcoatNormalMap)),_u.clearcoatNormalScale!==void 0&&(Ou.clearcoatNormalScale=new Vector2().fromArray(_u.clearcoatNormalScale)),Ou},setTextures:function(_u){return this.textures=_u,this}});var LoaderUtils={decodeText:function(_u){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(_u);for(var $u="",Ru=0,Ou=_u.length;Ru<Ou;Ru++)$u+=String.fromCharCode(_u[Ru]);try{return decodeURIComponent(escape($u))}catch{return $u}},extractUrlBase:function(_u){var $u=_u.lastIndexOf("/");return $u===-1?"./":_u.substr(0,$u+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(_u){return BufferGeometry.prototype.copy.call(this,_u),this.instanceCount=_u.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.instanceCount=this.instanceCount,_u.isInstancedBufferGeometry=!0,_u}});function InstancedBufferAttribute(_u,$u,Ru,Ou){typeof Ru=="number"&&(Ou=Ru,Ru=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,_u,$u,Ru),this.meshPerAttribute=Ou||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(_u){return BufferAttribute.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this},toJSON:function(){var _u=BufferAttribute.prototype.toJSON.call(this);return _u.meshPerAttribute=this.meshPerAttribute,_u.isInstancedBufferAttribute=!0,_u}});function BufferGeometryLoader(_u){Loader.call(this,_u)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new FileLoader(Fu.manager);Nu.setPath(Fu.path),Nu.load(_u,function(Vu){try{$u(Fu.parse(JSON.parse(Vu)))}catch(Gu){Ou?Ou(Gu):console.error(Gu),Fu.manager.itemError(_u)}},Ru,Ou)},parse:function(_u){var $u=_u.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Ru=_u.data.index;if(Ru!==void 0){var Ou=new TYPED_ARRAYS[Ru.type](Ru.array);$u.setIndex(new BufferAttribute(Ou,1))}var Fu=_u.data.attributes;for(var Nu in Fu){var Vu=Fu[Nu],Ou=new TYPED_ARRAYS[Vu.type](Vu.array),Gu=Vu.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Uu=new Gu(Ou,Vu.itemSize,Vu.normalized);Vu.name!==void 0&&(Uu.name=Vu.name),$u.setAttribute(Nu,Uu)}var Hu=_u.data.morphAttributes;if(Hu)for(var Nu in Hu){for(var Wu=Hu[Nu],Qu=[],qu=0,Ku=Wu.length;qu<Ku;qu++){var Vu=Wu[qu],Ou=new TYPED_ARRAYS[Vu.type](Vu.array),Uu=new BufferAttribute(Ou,Vu.itemSize,Vu.normalized);Vu.name!==void 0&&(Uu.name=Vu.name),Qu.push(Uu)}$u.morphAttributes[Nu]=Qu}var Yu=_u.data.morphTargetsRelative;Yu&&($u.morphTargetsRelative=!0);var _c=_u.data.groups||_u.data.drawcalls||_u.data.offsets;if(_c!==void 0)for(var qu=0,Ju=_c.length;qu!==Ju;++qu){var Xu=_c[qu];$u.addGroup(Xu.start,Xu.count,Xu.materialIndex)}var Zu=_u.data.boundingSphere;if(Zu!==void 0){var Xc=new Vector3;Zu.center!==void 0&&Xc.fromArray(Zu.center),$u.boundingSphere=new Sphere(Xc,Zu.radius)}return _u.name&&($u.name=_u.name),_u.userData&&($u.userData=_u.userData),$u}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(_u){Loader.call(this,_u)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=this.path===""?LoaderUtils.extractUrlBase(_u):this.path;this.resourcePath=this.resourcePath||Nu;var Vu=new FileLoader(Fu.manager);Vu.setPath(this.path),Vu.load(_u,function(Gu){var Uu=null;try{Uu=JSON.parse(Gu)}catch(Wu){Ou!==void 0&&Ou(Wu),console.error("THREE:ObjectLoader: Can't parse "+_u+".",Wu.message);return}var Hu=Uu.metadata;if(Hu===void 0||Hu.type===void 0||Hu.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+_u);return}Fu.parse(Uu,$u)},Ru,Ou)},parse:function(_u,$u){var Ru=this.parseShape(_u.shapes),Ou=this.parseGeometries(_u.geometries,Ru),Fu=this.parseImages(_u.images,function(){$u!==void 0&&$u(Gu)}),Nu=this.parseTextures(_u.textures,Fu),Vu=this.parseMaterials(_u.materials,Nu),Gu=this.parseObject(_u.object,Ou,Vu);return _u.animations&&(Gu.animations=this.parseAnimations(_u.animations)),(_u.images===void 0||_u.images.length===0)&&$u!==void 0&&$u(Gu),Gu},parseShape:function(_u){var $u={};if(_u!==void 0)for(var Ru=0,Ou=_u.length;Ru<Ou;Ru++){var Fu=new Shape().fromJSON(_u[Ru]);$u[Fu.uuid]=Fu}return $u},parseGeometries:function(_u,$u){var Ru={};if(_u!==void 0)for(var Ou=new BufferGeometryLoader,Fu=0,Nu=_u.length;Fu<Nu;Fu++){var Vu,Gu=_u[Fu];switch(Gu.type){case"PlaneGeometry":case"PlaneBufferGeometry":Vu=new Geometries[Gu.type](Gu.width,Gu.height,Gu.widthSegments,Gu.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Vu=new Geometries[Gu.type](Gu.width,Gu.height,Gu.depth,Gu.widthSegments,Gu.heightSegments,Gu.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.segments,Gu.thetaStart,Gu.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Vu=new Geometries[Gu.type](Gu.radiusTop,Gu.radiusBottom,Gu.height,Gu.radialSegments,Gu.heightSegments,Gu.openEnded,Gu.thetaStart,Gu.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.height,Gu.radialSegments,Gu.heightSegments,Gu.openEnded,Gu.thetaStart,Gu.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.widthSegments,Gu.heightSegments,Gu.phiStart,Gu.phiLength,Gu.thetaStart,Gu.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.detail);break;case"RingGeometry":case"RingBufferGeometry":Vu=new Geometries[Gu.type](Gu.innerRadius,Gu.outerRadius,Gu.thetaSegments,Gu.phiSegments,Gu.thetaStart,Gu.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.tube,Gu.radialSegments,Gu.tubularSegments,Gu.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Vu=new Geometries[Gu.type](Gu.radius,Gu.tube,Gu.tubularSegments,Gu.radialSegments,Gu.p,Gu.q);break;case"TubeGeometry":case"TubeBufferGeometry":Vu=new Geometries[Gu.type](new Curves[Gu.path.type]().fromJSON(Gu.path),Gu.tubularSegments,Gu.radius,Gu.radialSegments,Gu.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Vu=new Geometries[Gu.type](Gu.points,Gu.segments,Gu.phiStart,Gu.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Vu=new Geometries[Gu.type](Gu.vertices,Gu.indices,Gu.radius,Gu.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Qu=[],Uu=0,Hu=Gu.shapes.length;Uu<Hu;Uu++){var Wu=$u[Gu.shapes[Uu]];Qu.push(Wu)}Vu=new Geometries[Gu.type](Qu,Gu.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Qu=[],Uu=0,Hu=Gu.shapes.length;Uu<Hu;Uu++){var Wu=$u[Gu.shapes[Uu]];Qu.push(Wu)}var qu=Gu.options.extrudePath;qu!==void 0&&(Gu.options.extrudePath=new Curves[qu.type]().fromJSON(qu)),Vu=new Geometries[Gu.type](Qu,Gu.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Vu=Ou.parse(Gu);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Gu.type+'"');continue}Vu.uuid=Gu.uuid,Gu.name!==void 0&&(Vu.name=Gu.name),Vu.isBufferGeometry===!0&&Gu.userData!==void 0&&(Vu.userData=Gu.userData),Ru[Gu.uuid]=Vu}return Ru},parseMaterials:function(_u,$u){var Ru={},Ou={};if(_u!==void 0){var Fu=new MaterialLoader;Fu.setTextures($u);for(var Nu=0,Vu=_u.length;Nu<Vu;Nu++){var Gu=_u[Nu];if(Gu.type==="MultiMaterial"){for(var Uu=[],Hu=0;Hu<Gu.materials.length;Hu++){var Wu=Gu.materials[Hu];Ru[Wu.uuid]===void 0&&(Ru[Wu.uuid]=Fu.parse(Wu)),Uu.push(Ru[Wu.uuid])}Ou[Gu.uuid]=Uu}else Ru[Gu.uuid]===void 0&&(Ru[Gu.uuid]=Fu.parse(Gu)),Ou[Gu.uuid]=Ru[Gu.uuid]}}return Ou},parseAnimations:function(_u){for(var $u=[],Ru=0;Ru<_u.length;Ru++){var Ou=_u[Ru],Fu=AnimationClip.parse(Ou);Ou.uuid!==void 0&&(Fu.uuid=Ou.uuid),$u.push(Fu)}return $u},parseImages:function(_u,$u){var Ru=this,Ou={};function Fu(_c){return Ru.manager.itemStart(_c),Vu.load(_c,function(){Ru.manager.itemEnd(_c)},void 0,function(){Ru.manager.itemError(_c),Ru.manager.itemEnd(_c)})}if(_u!==void 0&&_u.length>0){var Nu=new LoadingManager($u),Vu=new ImageLoader(Nu);Vu.setCrossOrigin(this.crossOrigin);for(var Gu=0,Uu=_u.length;Gu<Uu;Gu++){var Hu=_u[Gu],Wu=Hu.url;if(Array.isArray(Wu)){Ou[Hu.uuid]=[];for(var Qu=0,qu=Wu.length;Qu<qu;Qu++){var Ku=Wu[Qu],Yu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ku)?Ku:Ru.resourcePath+Ku;Ou[Hu.uuid].push(Fu(Yu))}}else{var Yu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Hu.url)?Hu.url:Ru.resourcePath+Hu.url;Ou[Hu.uuid]=Fu(Yu)}}}return Ou},parseTextures:function(_u,$u){function Ru(Uu,Hu){return typeof Uu=="number"?Uu:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Uu),Hu[Uu])}var Ou={};if(_u!==void 0)for(var Fu=0,Nu=_u.length;Fu<Nu;Fu++){var Vu=_u[Fu];Vu.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Vu.uuid),$u[Vu.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Vu.image);var Gu;Array.isArray($u[Vu.image])?Gu=new CubeTexture($u[Vu.image]):Gu=new Texture($u[Vu.image]),Gu.needsUpdate=!0,Gu.uuid=Vu.uuid,Vu.name!==void 0&&(Gu.name=Vu.name),Vu.mapping!==void 0&&(Gu.mapping=Ru(Vu.mapping,TEXTURE_MAPPING)),Vu.offset!==void 0&&Gu.offset.fromArray(Vu.offset),Vu.repeat!==void 0&&Gu.repeat.fromArray(Vu.repeat),Vu.center!==void 0&&Gu.center.fromArray(Vu.center),Vu.rotation!==void 0&&(Gu.rotation=Vu.rotation),Vu.wrap!==void 0&&(Gu.wrapS=Ru(Vu.wrap[0],TEXTURE_WRAPPING),Gu.wrapT=Ru(Vu.wrap[1],TEXTURE_WRAPPING)),Vu.format!==void 0&&(Gu.format=Vu.format),Vu.type!==void 0&&(Gu.type=Vu.type),Vu.encoding!==void 0&&(Gu.encoding=Vu.encoding),Vu.minFilter!==void 0&&(Gu.minFilter=Ru(Vu.minFilter,TEXTURE_FILTER)),Vu.magFilter!==void 0&&(Gu.magFilter=Ru(Vu.magFilter,TEXTURE_FILTER)),Vu.anisotropy!==void 0&&(Gu.anisotropy=Vu.anisotropy),Vu.flipY!==void 0&&(Gu.flipY=Vu.flipY),Vu.premultiplyAlpha!==void 0&&(Gu.premultiplyAlpha=Vu.premultiplyAlpha),Vu.unpackAlignment!==void 0&&(Gu.unpackAlignment=Vu.unpackAlignment),Ou[Vu.uuid]=Gu}return Ou},parseObject:function(_u,$u,Ru){var Ou;function Fu(Ju){return $u[Ju]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ju),$u[Ju]}function Nu(Ju){if(Ju!==void 0){if(Array.isArray(Ju)){for(var Xu=[],Zu=0,Xc=Ju.length;Zu<Xc;Zu++){var _h=Ju[Zu];Ru[_h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_h),Xu.push(Ru[_h])}return Xu}return Ru[Ju]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ju),Ru[Ju]}}switch(_u.type){case"Scene":Ou=new Scene,_u.background!==void 0&&Number.isInteger(_u.background)&&(Ou.background=new Color(_u.background)),_u.fog!==void 0&&(_u.fog.type==="Fog"?Ou.fog=new Fog(_u.fog.color,_u.fog.near,_u.fog.far):_u.fog.type==="FogExp2"&&(Ou.fog=new FogExp2(_u.fog.color,_u.fog.density)));break;case"PerspectiveCamera":Ou=new PerspectiveCamera(_u.fov,_u.aspect,_u.near,_u.far),_u.focus!==void 0&&(Ou.focus=_u.focus),_u.zoom!==void 0&&(Ou.zoom=_u.zoom),_u.filmGauge!==void 0&&(Ou.filmGauge=_u.filmGauge),_u.filmOffset!==void 0&&(Ou.filmOffset=_u.filmOffset),_u.view!==void 0&&(Ou.view=Object.assign({},_u.view));break;case"OrthographicCamera":Ou=new OrthographicCamera(_u.left,_u.right,_u.top,_u.bottom,_u.near,_u.far),_u.zoom!==void 0&&(Ou.zoom=_u.zoom),_u.view!==void 0&&(Ou.view=Object.assign({},_u.view));break;case"AmbientLight":Ou=new AmbientLight(_u.color,_u.intensity);break;case"DirectionalLight":Ou=new DirectionalLight(_u.color,_u.intensity);break;case"PointLight":Ou=new PointLight(_u.color,_u.intensity,_u.distance,_u.decay);break;case"RectAreaLight":Ou=new RectAreaLight(_u.color,_u.intensity,_u.width,_u.height);break;case"SpotLight":Ou=new SpotLight(_u.color,_u.intensity,_u.distance,_u.angle,_u.penumbra,_u.decay);break;case"HemisphereLight":Ou=new HemisphereLight(_u.color,_u.groundColor,_u.intensity);break;case"LightProbe":Ou=new LightProbe().fromJSON(_u);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Vu=Fu(_u.geometry),Gu=Nu(_u.material);Ou=new Mesh(Vu,Gu);break;case"InstancedMesh":var Vu=Fu(_u.geometry),Gu=Nu(_u.material),Uu=_u.count,Hu=_u.instanceMatrix;Ou=new InstancedMesh(Vu,Gu,Uu),Ou.instanceMatrix=new BufferAttribute(new Float32Array(Hu.array),16);break;case"LOD":Ou=new LOD;break;case"Line":Ou=new Line$1(Fu(_u.geometry),Nu(_u.material),_u.mode);break;case"LineLoop":Ou=new LineLoop(Fu(_u.geometry),Nu(_u.material));break;case"LineSegments":Ou=new LineSegments(Fu(_u.geometry),Nu(_u.material));break;case"PointCloud":case"Points":Ou=new Points(Fu(_u.geometry),Nu(_u.material));break;case"Sprite":Ou=new Sprite(Nu(_u.material));break;case"Group":Ou=new Group$1;break;default:Ou=new Object3D}if(Ou.uuid=_u.uuid,_u.name!==void 0&&(Ou.name=_u.name),_u.matrix!==void 0?(Ou.matrix.fromArray(_u.matrix),_u.matrixAutoUpdate!==void 0&&(Ou.matrixAutoUpdate=_u.matrixAutoUpdate),Ou.matrixAutoUpdate&&Ou.matrix.decompose(Ou.position,Ou.quaternion,Ou.scale)):(_u.position!==void 0&&Ou.position.fromArray(_u.position),_u.rotation!==void 0&&Ou.rotation.fromArray(_u.rotation),_u.quaternion!==void 0&&Ou.quaternion.fromArray(_u.quaternion),_u.scale!==void 0&&Ou.scale.fromArray(_u.scale)),_u.castShadow!==void 0&&(Ou.castShadow=_u.castShadow),_u.receiveShadow!==void 0&&(Ou.receiveShadow=_u.receiveShadow),_u.shadow&&(_u.shadow.bias!==void 0&&(Ou.shadow.bias=_u.shadow.bias),_u.shadow.radius!==void 0&&(Ou.shadow.radius=_u.shadow.radius),_u.shadow.mapSize!==void 0&&Ou.shadow.mapSize.fromArray(_u.shadow.mapSize),_u.shadow.camera!==void 0&&(Ou.shadow.camera=this.parseObject(_u.shadow.camera))),_u.visible!==void 0&&(Ou.visible=_u.visible),_u.frustumCulled!==void 0&&(Ou.frustumCulled=_u.frustumCulled),_u.renderOrder!==void 0&&(Ou.renderOrder=_u.renderOrder),_u.userData!==void 0&&(Ou.userData=_u.userData),_u.layers!==void 0&&(Ou.layers.mask=_u.layers),_u.children!==void 0)for(var Wu=_u.children,Qu=0;Qu<Wu.length;Qu++)Ou.add(this.parseObject(Wu[Qu],$u,Ru));if(_u.type==="LOD"){_u.autoUpdate!==void 0&&(Ou.autoUpdate=_u.autoUpdate);for(var qu=_u.levels,Ku=0;Ku<qu.length;Ku++){var Yu=qu[Ku],_c=Ou.getObjectByProperty("uuid",Yu.object);_c!==void 0&&Ou.addLevel(_c,Yu.distance)}}return Ou}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(_u){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,_u),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function($u){return this.options=$u,this},load:function(_u,$u,Ru,Ou){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Fu=this,Nu=Cache.get(_u);if(Nu!==void 0)return Fu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Nu),Fu.manager.itemEnd(_u)},0),Nu;fetch(_u).then(function(Vu){return Vu.blob()}).then(function(Vu){return Fu.options===void 0?createImageBitmap(Vu):createImageBitmap(Vu,Fu.options)}).then(function(Vu){Cache.add(_u,Vu),$u&&$u(Vu),Fu.manager.itemEnd(_u)}).catch(function(Vu){Ou&&Ou(Vu),Fu.manager.itemError(_u),Fu.manager.itemEnd(_u)}),Fu.manager.itemStart(_u)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(_u,$u){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_u,$u),this},lineTo:function(_u,$u){return this.currentPath.lineTo(_u,$u),this},quadraticCurveTo:function(_u,$u,Ru,Ou){return this.currentPath.quadraticCurveTo(_u,$u,Ru,Ou),this},bezierCurveTo:function(_u,$u,Ru,Ou,Fu,Nu){return this.currentPath.bezierCurveTo(_u,$u,Ru,Ou,Fu,Nu),this},splineThru:function(_u){return this.currentPath.splineThru(_u),this},toShapes:function(_u,$u){function Ru(sp){for(var cp=[],hp=0,dp=sp.length;hp<dp;hp++){var xp=sp[hp],bp=new Shape;bp.curves=xp.curves,cp.push(bp)}return cp}function Ou(sp,cp){for(var hp=cp.length,dp=!1,xp=hp-1,bp=0;bp<hp;xp=bp++){var Rp=cp[xp],Tp=cp[bp],Up=Tp.x-Rp.x,Ip=Tp.y-Rp.y;if(Math.abs(Ip)>Number.EPSILON){if(Ip<0&&(Rp=cp[bp],Up=-Up,Tp=cp[xp],Ip=-Ip),sp.y<Rp.y||sp.y>Tp.y)continue;if(sp.y===Rp.y){if(sp.x===Rp.x)return!0}else{var Vp=Ip*(sp.x-Rp.x)-Up*(sp.y-Rp.y);if(Vp===0)return!0;if(Vp<0)continue;dp=!dp}}else{if(sp.y!==Rp.y)continue;if(Tp.x<=sp.x&&sp.x<=Rp.x||Rp.x<=sp.x&&sp.x<=Tp.x)return!0}}return dp}var Fu=ShapeUtils.isClockWise,Nu=this.subPaths;if(Nu.length===0)return[];if($u===!0)return Ru(Nu);var Vu,Gu,Uu,Hu=[];if(Nu.length===1)return Gu=Nu[0],Uu=new Shape,Uu.curves=Gu.curves,Hu.push(Uu),Hu;var Wu=!Fu(Nu[0].getPoints());Wu=_u?!Wu:Wu;var Qu=[],qu=[],Ku=[],Yu=0,_c;qu[Yu]=void 0,Ku[Yu]=[];for(var Ju=0,Xu=Nu.length;Ju<Xu;Ju++)Gu=Nu[Ju],_c=Gu.getPoints(),Vu=Fu(_c),Vu=_u?!Vu:Vu,Vu?(!Wu&&qu[Yu]&&Yu++,qu[Yu]={s:new Shape,p:_c},qu[Yu].s.curves=Gu.curves,Wu&&Yu++,Ku[Yu]=[]):Ku[Yu].push({h:Gu,p:_c[0]});if(!qu[0])return Ru(Nu);if(qu.length>1){for(var Zu=!1,Xc=[],_h=0,ep=qu.length;_h<ep;_h++)Qu[_h]=[];for(var _h=0,ep=qu.length;_h<ep;_h++)for(var np=Ku[_h],ap=0;ap<np.length;ap++){for(var lp=np[ap],up=!0,_f=0;_f<qu.length;_f++)Ou(lp.p,qu[_f].p)&&(_h!==_f&&Xc.push({froms:_h,tos:_f,hole:ap}),up?(up=!1,Qu[_f].push(lp)):Zu=!0);up&&Qu[_h].push(lp)}Xc.length>0&&(Zu||(Ku=Qu))}for(var tp,Ju=0,ip=qu.length;Ju<ip;Ju++){Uu=qu[Ju].s,Hu.push(Uu),tp=Ku[Ju];for(var rp=0,op=tp.length;rp<op;rp++)Uu.holes.push(tp[rp].h)}return Hu}});function Font(_u){this.type="Font",this.data=_u}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(_u,$u){$u===void 0&&($u=100);for(var Ru=[],Ou=createPaths(_u,$u,this.data),Fu=0,Nu=Ou.length;Fu<Nu;Fu++)Array.prototype.push.apply(Ru,Ou[Fu].toShapes());return Ru}});function createPaths(_u,$u,Ru){for(var Ou=Array.from?Array.from(_u):String(_u).split(""),Fu=$u/Ru.resolution,Nu=(Ru.boundingBox.yMax-Ru.boundingBox.yMin+Ru.underlineThickness)*Fu,Vu=[],Gu=0,Uu=0,Hu=0;Hu<Ou.length;Hu++){var Wu=Ou[Hu];if(Wu===`
`)Gu=0,Uu-=Nu;else{var Qu=createPath(Wu,Fu,Gu,Uu,Ru);Gu+=Qu.offsetX,Vu.push(Qu.path)}}return Vu}function createPath(_u,$u,Ru,Ou,Fu){var Nu=Fu.glyphs[_u]||Fu.glyphs["?"];if(!Nu){console.error('THREE.Font: character "'+_u+'" does not exists in font family '+Fu.familyName+".");return}var Vu=new ShapePath,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu;if(Nu.o)for(var _c=Nu._cachedOutline||(Nu._cachedOutline=Nu.o.split(" ")),Ju=0,Xu=_c.length;Ju<Xu;){var Zu=_c[Ju++];switch(Zu){case"m":Gu=_c[Ju++]*$u+Ru,Uu=_c[Ju++]*$u+Ou,Vu.moveTo(Gu,Uu);break;case"l":Gu=_c[Ju++]*$u+Ru,Uu=_c[Ju++]*$u+Ou,Vu.lineTo(Gu,Uu);break;case"q":Hu=_c[Ju++]*$u+Ru,Wu=_c[Ju++]*$u+Ou,Qu=_c[Ju++]*$u+Ru,qu=_c[Ju++]*$u+Ou,Vu.quadraticCurveTo(Qu,qu,Hu,Wu);break;case"b":Hu=_c[Ju++]*$u+Ru,Wu=_c[Ju++]*$u+Ou,Qu=_c[Ju++]*$u+Ru,qu=_c[Ju++]*$u+Ou,Ku=_c[Ju++]*$u+Ru,Yu=_c[Ju++]*$u+Ou,Vu.bezierCurveTo(Qu,qu,Ku,Yu,Hu,Wu);break}}return{offsetX:Nu.ha*$u,path:Vu}}function FontLoader(_u){Loader.call(this,_u)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new FileLoader(this.manager);Nu.setPath(this.path),Nu.load(_u,function(Vu){var Gu;try{Gu=JSON.parse(Vu)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Gu=JSON.parse(Vu.substring(65,Vu.length-2))}var Uu=Fu.parse(Gu);$u&&$u(Uu)},Ru,Ou)},parse:function(_u){return new Font(_u)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(_u){_context=_u}};function AudioLoader(_u){Loader.call(this,_u)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(_u,$u,Ru,Ou){var Fu=this,Nu=new FileLoader(Fu.manager);Nu.setResponseType("arraybuffer"),Nu.setPath(Fu.path),Nu.load(_u,function(Vu){try{var Gu=Vu.slice(0),Uu=AudioContext.getContext();Uu.decodeAudioData(Gu,function(Hu){$u(Hu)})}catch(Hu){Ou?Ou(Hu):console.error(Hu),Fu.manager.itemError(_u)}},Ru,Ou)}});function HemisphereLightProbe(_u,$u,Ru){LightProbe.call(this,void 0,Ru);var Ou=new Color().set(_u),Fu=new Color().set($u),Nu=new Vector3(Ou.r,Ou.g,Ou.b),Vu=new Vector3(Fu.r,Fu.g,Fu.b),Gu=Math.sqrt(Math.PI),Uu=Gu*Math.sqrt(.75);this.sh.coefficients[0].copy(Nu).add(Vu).multiplyScalar(Gu),this.sh.coefficients[1].copy(Nu).sub(Vu).multiplyScalar(Uu)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});function AmbientLightProbe(_u,$u){LightProbe.call(this,void 0,$u);var Ru=new Color().set(_u);this.sh.coefficients[0].set(Ru.r,Ru.g,Ru.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(_u){var $u=this._cache,Ru=$u.focus!==_u.focus||$u.fov!==_u.fov||$u.aspect!==_u.aspect*this.aspect||$u.near!==_u.near||$u.far!==_u.far||$u.zoom!==_u.zoom||$u.eyeSep!==this.eyeSep;if(Ru){$u.focus=_u.focus,$u.fov=_u.fov,$u.aspect=_u.aspect*this.aspect,$u.near=_u.near,$u.far=_u.far,$u.zoom=_u.zoom,$u.eyeSep=this.eyeSep;var Ou=_u.projectionMatrix.clone(),Fu=$u.eyeSep/2,Nu=Fu*$u.near/$u.focus,Vu=$u.near*Math.tan(MathUtils.DEG2RAD*$u.fov*.5)/$u.zoom,Gu,Uu;_eyeLeft.elements[12]=-Fu,_eyeRight.elements[12]=Fu,Gu=-Vu*$u.aspect+Nu,Uu=Vu*$u.aspect+Nu,Ou.elements[0]=2*$u.near/(Uu-Gu),Ou.elements[8]=(Uu+Gu)/(Uu-Gu),this.cameraL.projectionMatrix.copy(Ou),Gu=-Vu*$u.aspect-Nu,Uu=Vu*$u.aspect-Nu,Ou.elements[0]=2*$u.near/(Uu-Gu),Ou.elements[8]=(Uu+Gu)/(Uu-Gu),this.cameraR.projectionMatrix.copy(Ou)}this.cameraL.matrixWorld.copy(_u.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_u.matrixWorld).multiply(_eyeRight)}});function Clock(_u){this.autoStart=_u!==void 0?_u:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var _u=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $u=(typeof performance=="undefined"?Date:performance).now();_u=($u-this.oldTime)/1e3,this.oldTime=$u,this.elapsedTime+=_u}return _u}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(_u){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_u,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u);var $u=this.context.listener,Ru=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),$u.positionX){var Ou=this.context.currentTime+this.timeDelta;$u.positionX.linearRampToValueAtTime(_position$2.x,Ou),$u.positionY.linearRampToValueAtTime(_position$2.y,Ou),$u.positionZ.linearRampToValueAtTime(_position$2.z,Ou),$u.forwardX.linearRampToValueAtTime(_orientation.x,Ou),$u.forwardY.linearRampToValueAtTime(_orientation.y,Ou),$u.forwardZ.linearRampToValueAtTime(_orientation.z,Ou),$u.upX.linearRampToValueAtTime(Ru.x,Ou),$u.upY.linearRampToValueAtTime(Ru.y,Ou),$u.upZ.linearRampToValueAtTime(Ru.z,Ou)}else $u.setPosition(_position$2.x,_position$2.y,_position$2.z),$u.setOrientation(_orientation.x,_orientation.y,_orientation.z,Ru.x,Ru.y,Ru.z)}});function Audio$1(_u){Object3D.call(this),this.type="Audio",this.listener=_u,this.context=_u.context,this.gain=this.context.createGain(),this.gain.connect(_u.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_u,this.connect(),this},setMediaElementSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_u),this.connect(),this},setMediaStreamSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_u),this.connect(),this},setBuffer:function(_u){return this.buffer=_u,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(_u){if(_u===void 0&&(_u=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_u;var $u=this.context.createBufferSource();return $u.buffer=this.buffer,$u.loop=this.loop,$u.loopStart=this.loopStart,$u.loopEnd=this.loopEnd,$u.onended=this.onEnded.bind(this),$u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=$u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].connect(this.filters[_u]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].disconnect(this.filters[_u]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(_u){return _u||(_u=[]),this.isPlaying===!0?(this.disconnect(),this.filters=_u,this.connect()):this.filters=_u,this},setDetune:function(_u){if(this.detune=_u,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(_u){return this.setFilters(_u?[_u]:[])},setPlaybackRate:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_u,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_u,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(_u){return this.loopStart=_u,this},setLoopEnd:function(_u){return this.loopEnd=_u,this},getVolume:function(){return this.gain.gain.value},setVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(_u){Audio$1.call(this,_u),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(_u){return this.panner.refDistance=_u,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(_u){return this.panner.rolloffFactor=_u,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(_u){return this.panner.distanceModel=_u,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(_u){return this.panner.maxDistance=_u,this},setDirectionalCone:function(_u,$u,Ru){return this.panner.coneInnerAngle=_u,this.panner.coneOuterAngle=$u,this.panner.coneOuterGain=Ru,this},updateMatrixWorld:function(_u){if(Object3D.prototype.updateMatrixWorld.call(this,_u),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var $u=this.panner;if($u.positionX){var Ru=this.context.currentTime+this.listener.timeDelta;$u.positionX.linearRampToValueAtTime(_position$3.x,Ru),$u.positionY.linearRampToValueAtTime(_position$3.y,Ru),$u.positionZ.linearRampToValueAtTime(_position$3.z,Ru),$u.orientationX.linearRampToValueAtTime(_orientation$1.x,Ru),$u.orientationY.linearRampToValueAtTime(_orientation$1.y,Ru),$u.orientationZ.linearRampToValueAtTime(_orientation$1.z,Ru)}else $u.setPosition(_position$3.x,_position$3.y,_position$3.z),$u.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(_u,$u){this.analyser=_u.context.createAnalyser(),this.analyser.fftSize=$u!==void 0?$u:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),_u.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var _u=0,$u=this.getFrequencyData(),Ru=0;Ru<$u.length;Ru++)_u+=$u[Ru];return _u/$u.length}});function PropertyMixer(_u,$u,Ru){this.binding=_u,this.valueSize=Ru;var Ou,Fu,Nu;switch($u){case"quaternion":Ou=this._slerp,Fu=this._slerpAdditive,Nu=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Ru*6),this._workIndex=5;break;case"string":case"bool":Ou=this._select,Fu=this._select,Nu=this._setAdditiveIdentityOther,this.buffer=new Array(Ru*5);break;default:Ou=this._lerp,Fu=this._lerpAdditive,Nu=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Ru*5)}this._mixBufferRegion=Ou,this._mixBufferRegionAdditive=Fu,this._setIdentity=Nu,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(_u,$u){var Ru=this.buffer,Ou=this.valueSize,Fu=_u*Ou+Ou,Nu=this.cumulativeWeight;if(Nu===0){for(var Vu=0;Vu!==Ou;++Vu)Ru[Fu+Vu]=Ru[Vu];Nu=$u}else{Nu+=$u;var Gu=$u/Nu;this._mixBufferRegion(Ru,Fu,0,Gu,Ou)}this.cumulativeWeight=Nu},accumulateAdditive:function(_u){var $u=this.buffer,Ru=this.valueSize,Ou=Ru*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive($u,Ou,0,_u,Ru),this.cumulativeWeightAdditive+=_u},apply:function(_u){var $u=this.valueSize,Ru=this.buffer,Ou=_u*$u+$u,Fu=this.cumulativeWeight,Nu=this.cumulativeWeightAdditive,Vu=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Fu<1){var Gu=$u*this._origIndex;this._mixBufferRegion(Ru,Ou,Gu,1-Fu,$u)}Nu>0&&this._mixBufferRegionAdditive(Ru,Ou,this._addIndex*$u,1,$u);for(var Uu=$u,Hu=$u+$u;Uu!==Hu;++Uu)if(Ru[Uu]!==Ru[Uu+$u]){Vu.setValue(Ru,Ou);break}},saveOriginalState:function(){var _u=this.binding,$u=this.buffer,Ru=this.valueSize,Ou=Ru*this._origIndex;_u.getValue($u,Ou);for(var Fu=Ru,Nu=Ou;Fu!==Nu;++Fu)$u[Fu]=$u[Ou+Fu%Ru];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var _u=this.valueSize*3;this.binding.setValue(this.buffer,_u)},_setAdditiveIdentityNumeric:function(){for(var _u=this._addIndex*this.valueSize,$u=_u+this.valueSize,Ru=_u;Ru<$u;Ru++)this.buffer[Ru]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var _u=this._origIndex*this.valueSize,$u=this._addIndex*this.valueSize,Ru=0;Ru<this.valueSize;Ru++)this.buffer[$u+Ru]=this.buffer[_u+Ru]},_select:function(_u,$u,Ru,Ou,Fu){if(Ou>=.5)for(var Nu=0;Nu!==Fu;++Nu)_u[$u+Nu]=_u[Ru+Nu]},_slerp:function(_u,$u,Ru,Ou){Quaternion.slerpFlat(_u,$u,_u,$u,_u,Ru,Ou)},_slerpAdditive:function(_u,$u,Ru,Ou,Fu){var Nu=this._workIndex*Fu;Quaternion.multiplyQuaternionsFlat(_u,Nu,_u,$u,_u,Ru),Quaternion.slerpFlat(_u,$u,_u,$u,_u,Nu,Ou)},_lerp:function(_u,$u,Ru,Ou,Fu){for(var Nu=1-Ou,Vu=0;Vu!==Fu;++Vu){var Gu=$u+Vu;_u[Gu]=_u[Gu]*Nu+_u[Ru+Vu]*Ou}},_lerpAdditive:function(_u,$u,Ru,Ou,Fu){for(var Nu=0;Nu!==Fu;++Nu){var Vu=$u+Nu;_u[Vu]=_u[Vu]+_u[Ru+Nu]*Ou}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(_u,$u,Ru){var Ou=Ru||PropertyBinding.parseTrackName($u);this._targetGroup=_u,this._bindings=_u.subscribe_($u,Ou)}Object.assign(Composite.prototype,{getValue:function(_u,$u){this.bind();var Ru=this._targetGroup.nCachedObjects_,Ou=this._bindings[Ru];Ou!==void 0&&Ou.getValue(_u,$u)},setValue:function(_u,$u){for(var Ru=this._bindings,Ou=this._targetGroup.nCachedObjects_,Fu=Ru.length;Ou!==Fu;++Ou)Ru[Ou].setValue(_u,$u)},bind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Ru=_u.length;$u!==Ru;++$u)_u[$u].bind()},unbind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Ru=_u.length;$u!==Ru;++$u)_u[$u].unbind()}});function PropertyBinding(_u,$u,Ru){this.path=$u,this.parsedPath=Ru||PropertyBinding.parseTrackName($u),this.node=PropertyBinding.findNode(_u,this.parsedPath.nodeName)||_u,this.rootNode=_u}Object.assign(PropertyBinding,{Composite,create:function(_u,$u,Ru){return _u&&_u.isAnimationObjectGroup?new PropertyBinding.Composite(_u,$u,Ru):new PropertyBinding(_u,$u,Ru)},sanitizeNodeName:function(_u){return _u.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(_u){var $u=_trackRe.exec(_u);if(!$u)throw new Error("PropertyBinding: Cannot parse trackName: "+_u);var Ru={nodeName:$u[2],objectName:$u[3],objectIndex:$u[4],propertyName:$u[5],propertyIndex:$u[6]},Ou=Ru.nodeName&&Ru.nodeName.lastIndexOf(".");if(Ou!==void 0&&Ou!==-1){var Fu=Ru.nodeName.substring(Ou+1);_supportedObjectNames.indexOf(Fu)!==-1&&(Ru.nodeName=Ru.nodeName.substring(0,Ou),Ru.objectName=Fu)}if(Ru.propertyName===null||Ru.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_u);return Ru},findNode:function(_u,$u){if(!$u||$u===""||$u==="."||$u===-1||$u===_u.name||$u===_u.uuid)return _u;if(_u.skeleton){var Ru=_u.skeleton.getBoneByName($u);if(Ru!==void 0)return Ru}if(_u.children){var Ou=function(Nu){for(var Vu=0;Vu<Nu.length;Vu++){var Gu=Nu[Vu];if(Gu.name===$u||Gu.uuid===$u)return Gu;var Uu=Ou(Gu.children);if(Uu)return Uu}return null},Fu=Ou(_u.children);if(Fu)return Fu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function($u,Ru){$u[Ru]=this.node[this.propertyName]},function($u,Ru){for(var Ou=this.resolvedProperty,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu)$u[Ru++]=Ou[Fu]},function($u,Ru){$u[Ru]=this.resolvedProperty[this.propertyIndex]},function($u,Ru){this.resolvedProperty.toArray($u,Ru)}],SetterByBindingTypeAndVersioning:[[function($u,Ru){this.targetObject[this.propertyName]=$u[Ru]},function($u,Ru){this.targetObject[this.propertyName]=$u[Ru],this.targetObject.needsUpdate=!0},function($u,Ru){this.targetObject[this.propertyName]=$u[Ru],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Ru){for(var Ou=this.resolvedProperty,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu)Ou[Fu]=$u[Ru++]},function($u,Ru){for(var Ou=this.resolvedProperty,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu)Ou[Fu]=$u[Ru++];this.targetObject.needsUpdate=!0},function($u,Ru){for(var Ou=this.resolvedProperty,Fu=0,Nu=Ou.length;Fu!==Nu;++Fu)Ou[Fu]=$u[Ru++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Ru){this.resolvedProperty[this.propertyIndex]=$u[Ru]},function($u,Ru){this.resolvedProperty[this.propertyIndex]=$u[Ru],this.targetObject.needsUpdate=!0},function($u,Ru){this.resolvedProperty[this.propertyIndex]=$u[Ru],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Ru){this.resolvedProperty.fromArray($u,Ru)},function($u,Ru){this.resolvedProperty.fromArray($u,Ru),this.targetObject.needsUpdate=!0},function($u,Ru){this.resolvedProperty.fromArray($u,Ru),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function($u,Ru){this.bind(),this.getValue($u,Ru)},setValue:function($u,Ru){this.bind(),this.setValue($u,Ru)},bind:function(){var _u=this.node,$u=this.parsedPath,Ru=$u.objectName,Ou=$u.propertyName,Fu=$u.propertyIndex;if(_u||(_u=PropertyBinding.findNode(this.rootNode,$u.nodeName)||this.rootNode,this.node=_u),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_u){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Ru){var Nu=$u.objectIndex;switch(Ru){case"materials":if(!_u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_u=_u.material.materials;break;case"bones":if(!_u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_u=_u.skeleton.bones;for(var Vu=0;Vu<_u.length;Vu++)if(_u[Vu].name===Nu){Nu=Vu;break}break;default:if(_u[Ru]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_u=_u[Ru]}if(Nu!==void 0){if(_u[Nu]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_u);return}_u=_u[Nu]}}var Gu=_u[Ou];if(Gu===void 0){var Uu=$u.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Uu+"."+Ou+" but it wasn't found.",_u);return}var Hu=this.Versioning.None;this.targetObject=_u,_u.needsUpdate!==void 0?Hu=this.Versioning.NeedsUpdate:_u.matrixWorldNeedsUpdate!==void 0&&(Hu=this.Versioning.MatrixWorldNeedsUpdate);var Wu=this.BindingType.Direct;if(Fu!==void 0){if(Ou==="morphTargetInfluences"){if(!_u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(_u.geometry.isBufferGeometry){if(!_u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_u.morphTargetDictionary[Fu]!==void 0&&(Fu=_u.morphTargetDictionary[Fu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Wu=this.BindingType.ArrayElement,this.resolvedProperty=Gu,this.propertyIndex=Fu}else Gu.fromArray!==void 0&&Gu.toArray!==void 0?(Wu=this.BindingType.HasFromToArray,this.resolvedProperty=Gu):Array.isArray(Gu)?(Wu=this.BindingType.EntireArray,this.resolvedProperty=Gu):this.propertyName=Ou;this.getValue=this.GetterByBindingType[Wu],this.setValue=this.SetterByBindingTypeAndVersioning[Wu][Hu]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var _u={};this._indicesByUUID=_u;for(var $u=0,Ru=arguments.length;$u!==Ru;++$u)_u[arguments[$u].uuid]=$u;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Ou=this;this.stats={objects:{get total(){return Ou._objects.length},get inUse(){return this.total-Ou.nCachedObjects_}},get bindingsPerObject(){return Ou._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var _u=this._objects,$u=_u.length,Ru=this.nCachedObjects_,Ou=this._indicesByUUID,Fu=this._paths,Nu=this._parsedPaths,Vu=this._bindings,Gu=Vu.length,Uu=void 0,Hu=0,Wu=arguments.length;Hu!==Wu;++Hu){var Qu=arguments[Hu],qu=Qu.uuid,Ku=Ou[qu];if(Ku===void 0){Ku=$u++,Ou[qu]=Ku,_u.push(Qu);for(var Yu=0,_c=Gu;Yu!==_c;++Yu)Vu[Yu].push(new PropertyBinding(Qu,Fu[Yu],Nu[Yu]))}else if(Ku<Ru){Uu=_u[Ku];var Ju=--Ru,Xu=_u[Ju];Ou[Xu.uuid]=Ku,_u[Ku]=Xu,Ou[qu]=Ju,_u[Ju]=Qu;for(var Yu=0,_c=Gu;Yu!==_c;++Yu){var Zu=Vu[Yu],Xc=Zu[Ju],_h=Zu[Ku];Zu[Ku]=Xc,_h===void 0&&(_h=new PropertyBinding(Qu,Fu[Yu],Nu[Yu])),Zu[Ju]=_h}}else _u[Ku]!==Uu&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Ru},remove:function(){for(var _u=this._objects,$u=this.nCachedObjects_,Ru=this._indicesByUUID,Ou=this._bindings,Fu=Ou.length,Nu=0,Vu=arguments.length;Nu!==Vu;++Nu){var Gu=arguments[Nu],Uu=Gu.uuid,Hu=Ru[Uu];if(Hu!==void 0&&Hu>=$u){var Wu=$u++,Qu=_u[Wu];Ru[Qu.uuid]=Hu,_u[Hu]=Qu,Ru[Uu]=Wu,_u[Wu]=Gu;for(var qu=0,Ku=Fu;qu!==Ku;++qu){var Yu=Ou[qu],_c=Yu[Wu],Ju=Yu[Hu];Yu[Hu]=_c,Yu[Wu]=Ju}}}this.nCachedObjects_=$u},uncache:function(){for(var _u=this._objects,$u=_u.length,Ru=this.nCachedObjects_,Ou=this._indicesByUUID,Fu=this._bindings,Nu=Fu.length,Vu=0,Gu=arguments.length;Vu!==Gu;++Vu){var Uu=arguments[Vu],Hu=Uu.uuid,Wu=Ou[Hu];if(Wu!==void 0)if(delete Ou[Hu],Wu<Ru){var Qu=--Ru,qu=_u[Qu],Ku=--$u,Yu=_u[Ku];Ou[qu.uuid]=Wu,_u[Wu]=qu,Ou[Yu.uuid]=Qu,_u[Qu]=Yu,_u.pop();for(var _c=0,Ju=Nu;_c!==Ju;++_c){var Xu=Fu[_c],Zu=Xu[Qu],Xc=Xu[Ku];Xu[Wu]=Zu,Xu[Qu]=Xc,Xu.pop()}}else{var Ku=--$u,Yu=_u[Ku];Ou[Yu.uuid]=Wu,_u[Wu]=Yu,_u.pop();for(var _c=0,Ju=Nu;_c!==Ju;++_c){var Xu=Fu[_c];Xu[Wu]=Xu[Ku],Xu.pop()}}}this.nCachedObjects_=Ru},subscribe_:function(_u,$u){var Ru=this._bindingsIndicesByPath,Ou=Ru[_u],Fu=this._bindings;if(Ou!==void 0)return Fu[Ou];var Nu=this._paths,Vu=this._parsedPaths,Gu=this._objects,Uu=Gu.length,Hu=this.nCachedObjects_,Wu=new Array(Uu);Ou=Fu.length,Ru[_u]=Ou,Nu.push(_u),Vu.push($u),Fu.push(Wu);for(var Qu=Hu,qu=Gu.length;Qu!==qu;++Qu){var Ku=Gu[Qu];Wu[Qu]=new PropertyBinding(Ku,_u,$u)}return Wu},unsubscribe_:function(_u){var $u=this._bindingsIndicesByPath,Ru=$u[_u];if(Ru!==void 0){var Ou=this._paths,Fu=this._parsedPaths,Nu=this._bindings,Vu=Nu.length-1,Gu=Nu[Vu],Uu=_u[Vu];$u[Uu]=Ru,Nu[Ru]=Gu,Nu.pop(),Fu[Ru]=Fu[Vu],Fu.pop(),Ou[Ru]=Ou[Vu],Ou.pop()}}});function AnimationAction(_u,$u,Ru,Ou){this._mixer=_u,this._clip=$u,this._localRoot=Ru||null,this.blendMode=Ou||$u.blendMode;for(var Fu=$u.tracks,Nu=Fu.length,Vu=new Array(Nu),Gu={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Uu=0;Uu!==Nu;++Uu){var Hu=Fu[Uu].createInterpolant(null);Vu[Uu]=Hu,Hu.settings=Gu}this._interpolantSettings=Gu,this._interpolants=Vu,this._propertyBindings=new Array(Nu),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(_u){return this._startTime=_u,this},setLoop:function(_u,$u){return this.loop=_u,this.repetitions=$u,this},setEffectiveWeight:function(_u){return this.weight=_u,this._effectiveWeight=this.enabled?_u:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(_u){return this._scheduleFading(_u,0,1)},fadeOut:function(_u){return this._scheduleFading(_u,1,0)},crossFadeFrom:function(_u,$u,Ru){if(_u.fadeOut($u),this.fadeIn($u),Ru){var Ou=this._clip.duration,Fu=_u._clip.duration,Nu=Fu/Ou,Vu=Ou/Fu;_u.warp(1,Nu,$u),this.warp(Vu,1,$u)}return this},crossFadeTo:function(_u,$u,Ru){return _u.crossFadeFrom(this,$u,Ru)},stopFading:function(){var _u=this._weightInterpolant;return _u!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},setEffectiveTimeScale:function(_u){return this.timeScale=_u,this._effectiveTimeScale=this.paused?0:_u,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(_u){return this.timeScale=this._clip.duration/_u,this.stopWarping()},syncWith:function(_u){return this.time=_u.time,this.timeScale=_u.timeScale,this.stopWarping()},halt:function(_u){return this.warp(this._effectiveTimeScale,0,_u)},warp:function(_u,$u,Ru){var Ou=this._mixer,Fu=Ou.time,Nu=this._timeScaleInterpolant,Vu=this.timeScale;Nu===null&&(Nu=Ou._lendControlInterpolant(),this._timeScaleInterpolant=Nu);var Gu=Nu.parameterPositions,Uu=Nu.sampleValues;return Gu[0]=Fu,Gu[1]=Fu+Ru,Uu[0]=_u/Vu,Uu[1]=$u/Vu,this},stopWarping:function(){var _u=this._timeScaleInterpolant;return _u!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(_u,$u,Ru,Ou){if(!this.enabled){this._updateWeight(_u);return}var Fu=this._startTime;if(Fu!==null){var Nu=(_u-Fu)*Ru;if(Nu<0||Ru===0)return;this._startTime=null,$u=Ru*Nu}$u*=this._updateTimeScale(_u);var Vu=this._updateTime($u),Gu=this._updateWeight(_u);if(Gu>0){var Uu=this._interpolants,Hu=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Wu=0,Qu=Uu.length;Wu!==Qu;++Wu)Uu[Wu].evaluate(Vu),Hu[Wu].accumulateAdditive(Gu);break;case NormalAnimationBlendMode:default:for(var Wu=0,Qu=Uu.length;Wu!==Qu;++Wu)Uu[Wu].evaluate(Vu),Hu[Wu].accumulate(Ou,Gu)}}},_updateWeight:function(_u){var $u=0;if(this.enabled){$u=this.weight;var Ru=this._weightInterpolant;if(Ru!==null){var Ou=Ru.evaluate(_u)[0];$u*=Ou,_u>Ru.parameterPositions[1]&&(this.stopFading(),Ou===0&&(this.enabled=!1))}}return this._effectiveWeight=$u,$u},_updateTimeScale:function(_u){var $u=0;if(!this.paused){$u=this.timeScale;var Ru=this._timeScaleInterpolant;if(Ru!==null){var Ou=Ru.evaluate(_u)[0];$u*=Ou,_u>Ru.parameterPositions[1]&&(this.stopWarping(),$u===0?this.paused=!0:this.timeScale=$u)}}return this._effectiveTimeScale=$u,$u},_updateTime:function(_u){var $u=this.time+_u,Ru=this._clip.duration,Ou=this.loop,Fu=this._loopCount,Nu=Ou===LoopPingPong;if(_u===0)return Fu===-1?$u:Nu&&(Fu&1)===1?Ru-$u:$u;if(Ou===LoopOnce){Fu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if($u>=Ru)$u=Ru;else if($u<0)$u=0;else{this.time=$u;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u<0?-1:1})}}else{if(Fu===-1&&(_u>=0?(Fu=0,this._setEndings(!0,this.repetitions===0,Nu)):this._setEndings(this.repetitions===0,!0,Nu)),$u>=Ru||$u<0){var Vu=Math.floor($u/Ru);$u-=Ru*Vu,Fu+=Math.abs(Vu);var Gu=this.repetitions-Fu;if(Gu<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,$u=_u>0?Ru:0,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u>0?1:-1});else{if(Gu===1){var Uu=_u<0;this._setEndings(Uu,!Uu,Nu)}else this._setEndings(!1,!1,Nu);this._loopCount=Fu,this.time=$u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Vu})}}else this.time=$u;if(Nu&&(Fu&1)===1)return Ru-$u}return $u},_setEndings:function(_u,$u,Ru){var Ou=this._interpolantSettings;Ru?(Ou.endingStart=ZeroSlopeEnding,Ou.endingEnd=ZeroSlopeEnding):(_u?Ou.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Ou.endingStart=WrapAroundEnding,$u?Ou.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Ou.endingEnd=WrapAroundEnding)},_scheduleFading:function(_u,$u,Ru){var Ou=this._mixer,Fu=Ou.time,Nu=this._weightInterpolant;Nu===null&&(Nu=Ou._lendControlInterpolant(),this._weightInterpolant=Nu);var Vu=Nu.parameterPositions,Gu=Nu.sampleValues;return Vu[0]=Fu,Gu[0]=$u,Vu[1]=Fu+_u,Gu[1]=Ru,this}});function AnimationMixer(_u){this._root=_u,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(_u,$u){var Ru=_u._localRoot||this._root,Ou=_u._clip.tracks,Fu=Ou.length,Nu=_u._propertyBindings,Vu=_u._interpolants,Gu=Ru.uuid,Uu=this._bindingsByRootAndName,Hu=Uu[Gu];Hu===void 0&&(Hu={},Uu[Gu]=Hu);for(var Wu=0;Wu!==Fu;++Wu){var Qu=Ou[Wu],qu=Qu.name,Ku=Hu[qu];if(Ku!==void 0)Nu[Wu]=Ku;else{if(Ku=Nu[Wu],Ku!==void 0){Ku._cacheIndex===null&&(++Ku.referenceCount,this._addInactiveBinding(Ku,Gu,qu));continue}var Yu=$u&&$u._propertyBindings[Wu].binding.parsedPath;Ku=new PropertyMixer(PropertyBinding.create(Ru,qu,Yu),Qu.ValueTypeName,Qu.getValueSize()),++Ku.referenceCount,this._addInactiveBinding(Ku,Gu,qu),Nu[Wu]=Ku}Vu[Wu].resultBuffer=Ku.buffer}},_activateAction:function(_u){if(!this._isActiveAction(_u)){if(_u._cacheIndex===null){var $u=(_u._localRoot||this._root).uuid,Ru=_u._clip.uuid,Ou=this._actionsByClip[Ru];this._bindAction(_u,Ou&&Ou.knownActions[0]),this._addInactiveAction(_u,Ru,$u)}for(var Fu=_u._propertyBindings,Nu=0,Vu=Fu.length;Nu!==Vu;++Nu){var Gu=Fu[Nu];Gu.useCount++===0&&(this._lendBinding(Gu),Gu.saveOriginalState())}this._lendAction(_u)}},_deactivateAction:function(_u){if(this._isActiveAction(_u)){for(var $u=_u._propertyBindings,Ru=0,Ou=$u.length;Ru!==Ou;++Ru){var Fu=$u[Ru];--Fu.useCount===0&&(Fu.restoreOriginalState(),this._takeBackBinding(Fu))}this._takeBackAction(_u)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var _u=this;this.stats={actions:{get total(){return _u._actions.length},get inUse(){return _u._nActiveActions}},bindings:{get total(){return _u._bindings.length},get inUse(){return _u._nActiveBindings}},controlInterpolants:{get total(){return _u._controlInterpolants.length},get inUse(){return _u._nActiveControlInterpolants}}}},_isActiveAction:function(_u){var $u=_u._cacheIndex;return $u!==null&&$u<this._nActiveActions},_addInactiveAction:function(_u,$u,Ru){var Ou=this._actions,Fu=this._actionsByClip,Nu=Fu[$u];if(Nu===void 0)Nu={knownActions:[_u],actionByRoot:{}},_u._byClipCacheIndex=0,Fu[$u]=Nu;else{var Vu=Nu.knownActions;_u._byClipCacheIndex=Vu.length,Vu.push(_u)}_u._cacheIndex=Ou.length,Ou.push(_u),Nu.actionByRoot[Ru]=_u},_removeInactiveAction:function(_u){var $u=this._actions,Ru=$u[$u.length-1],Ou=_u._cacheIndex;Ru._cacheIndex=Ou,$u[Ou]=Ru,$u.pop(),_u._cacheIndex=null;var Fu=_u._clip.uuid,Nu=this._actionsByClip,Vu=Nu[Fu],Gu=Vu.knownActions,Uu=Gu[Gu.length-1],Hu=_u._byClipCacheIndex;Uu._byClipCacheIndex=Hu,Gu[Hu]=Uu,Gu.pop(),_u._byClipCacheIndex=null;var Wu=Vu.actionByRoot,Qu=(_u._localRoot||this._root).uuid;delete Wu[Qu],Gu.length===0&&delete Nu[Fu],this._removeInactiveBindingsForAction(_u)},_removeInactiveBindingsForAction:function(_u){for(var $u=_u._propertyBindings,Ru=0,Ou=$u.length;Ru!==Ou;++Ru){var Fu=$u[Ru];--Fu.referenceCount===0&&this._removeInactiveBinding(Fu)}},_lendAction:function(_u){var $u=this._actions,Ru=_u._cacheIndex,Ou=this._nActiveActions++,Fu=$u[Ou];_u._cacheIndex=Ou,$u[Ou]=_u,Fu._cacheIndex=Ru,$u[Ru]=Fu},_takeBackAction:function(_u){var $u=this._actions,Ru=_u._cacheIndex,Ou=--this._nActiveActions,Fu=$u[Ou];_u._cacheIndex=Ou,$u[Ou]=_u,Fu._cacheIndex=Ru,$u[Ru]=Fu},_addInactiveBinding:function(_u,$u,Ru){var Ou=this._bindingsByRootAndName,Fu=Ou[$u],Nu=this._bindings;Fu===void 0&&(Fu={},Ou[$u]=Fu),Fu[Ru]=_u,_u._cacheIndex=Nu.length,Nu.push(_u)},_removeInactiveBinding:function(_u){var $u=this._bindings,Ru=_u.binding,Ou=Ru.rootNode.uuid,Fu=Ru.path,Nu=this._bindingsByRootAndName,Vu=Nu[Ou],Gu=$u[$u.length-1],Uu=_u._cacheIndex;Gu._cacheIndex=Uu,$u[Uu]=Gu,$u.pop(),delete Vu[Fu],Object.keys(Vu).length===0&&delete Nu[Ou]},_lendBinding:function(_u){var $u=this._bindings,Ru=_u._cacheIndex,Ou=this._nActiveBindings++,Fu=$u[Ou];_u._cacheIndex=Ou,$u[Ou]=_u,Fu._cacheIndex=Ru,$u[Ru]=Fu},_takeBackBinding:function(_u){var $u=this._bindings,Ru=_u._cacheIndex,Ou=--this._nActiveBindings,Fu=$u[Ou];_u._cacheIndex=Ou,$u[Ou]=_u,Fu._cacheIndex=Ru,$u[Ru]=Fu},_lendControlInterpolant:function(){var _u=this._controlInterpolants,$u=this._nActiveControlInterpolants++,Ru=_u[$u];return Ru===void 0&&(Ru=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Ru.__cacheIndex=$u,_u[$u]=Ru),Ru},_takeBackControlInterpolant:function(_u){var $u=this._controlInterpolants,Ru=_u.__cacheIndex,Ou=--this._nActiveControlInterpolants,Fu=$u[Ou];_u.__cacheIndex=Ou,$u[Ou]=_u,Fu.__cacheIndex=Ru,$u[Ru]=Fu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(_u,$u,Ru){var Ou=$u||this._root,Fu=Ou.uuid,Nu=typeof _u=="string"?AnimationClip.findByName(Ou,_u):_u,Vu=Nu!==null?Nu.uuid:_u,Gu=this._actionsByClip[Vu],Uu=null;if(Ru===void 0&&(Nu!==null?Ru=Nu.blendMode:Ru=NormalAnimationBlendMode),Gu!==void 0){var Hu=Gu.actionByRoot[Fu];if(Hu!==void 0&&Hu.blendMode===Ru)return Hu;Uu=Gu.knownActions[0],Nu===null&&(Nu=Uu._clip)}if(Nu===null)return null;var Wu=new AnimationAction(this,Nu,$u,Ru);return this._bindAction(Wu,Uu),this._addInactiveAction(Wu,Vu,Fu),Wu},existingAction:function(_u,$u){var Ru=$u||this._root,Ou=Ru.uuid,Fu=typeof _u=="string"?AnimationClip.findByName(Ru,_u):_u,Nu=Fu?Fu.uuid:_u,Vu=this._actionsByClip[Nu];return Vu!==void 0&&Vu.actionByRoot[Ou]||null},stopAllAction:function(){for(var _u=this._actions,$u=this._nActiveActions,Ru=$u-1;Ru>=0;--Ru)_u[Ru].stop();return this},update:function(_u){_u*=this.timeScale;for(var $u=this._actions,Ru=this._nActiveActions,Ou=this.time+=_u,Fu=Math.sign(_u),Nu=this._accuIndex^=1,Vu=0;Vu!==Ru;++Vu){var Gu=$u[Vu];Gu._update(Ou,_u,Fu,Nu)}for(var Uu=this._bindings,Hu=this._nActiveBindings,Vu=0;Vu!==Hu;++Vu)Uu[Vu].apply(Nu);return this},setTime:function(_u){this.time=0;for(var $u=0;$u<this._actions.length;$u++)this._actions[$u].time=0;return this.update(_u)},getRoot:function(){return this._root},uncacheClip:function(_u){var $u=this._actions,Ru=_u.uuid,Ou=this._actionsByClip,Fu=Ou[Ru];if(Fu!==void 0){for(var Nu=Fu.knownActions,Vu=0,Gu=Nu.length;Vu!==Gu;++Vu){var Uu=Nu[Vu];this._deactivateAction(Uu);var Hu=Uu._cacheIndex,Wu=$u[$u.length-1];Uu._cacheIndex=null,Uu._byClipCacheIndex=null,Wu._cacheIndex=Hu,$u[Hu]=Wu,$u.pop(),this._removeInactiveBindingsForAction(Uu)}delete Ou[Ru]}},uncacheRoot:function(_u){var $u=_u.uuid,Ru=this._actionsByClip;for(var Ou in Ru){var Fu=Ru[Ou].actionByRoot,Nu=Fu[$u];Nu!==void 0&&(this._deactivateAction(Nu),this._removeInactiveAction(Nu))}var Vu=this._bindingsByRootAndName,Gu=Vu[$u];if(Gu!==void 0)for(var Uu in Gu){var Hu=Gu[Uu];Hu.restoreOriginalState(),this._removeInactiveBinding(Hu)}},uncacheAction:function(_u,$u){var Ru=this.existingAction(_u,$u);Ru!==null&&(this._deactivateAction(Ru),this._removeInactiveAction(Ru))}});function Uniform(_u){typeof _u=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),_u=arguments[1]),this.value=_u}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(_u,$u,Ru){InterleavedBuffer.call(this,_u,$u),this.meshPerAttribute=Ru||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(_u){return InterleavedBuffer.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this}});function Raycaster(_u,$u,Ru,Ou){this.ray=new Ray(_u,$u),this.near=Ru||0,this.far=Ou||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(_u,$u){return _u.distance-$u.distance}function intersectObject(_u,$u,Ru,Ou){if(_u.layers.test($u.layers)&&_u.raycast($u,Ru),Ou===!0)for(var Fu=_u.children,Nu=0,Vu=Fu.length;Nu<Vu;Nu++)intersectObject(Fu[Nu],$u,Ru,!0)}Object.assign(Raycaster.prototype,{set:function(_u,$u){this.ray.set(_u,$u)},setFromCamera:function(_u,$u){$u&&$u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition($u.matrixWorld),this.ray.direction.set(_u.x,_u.y,.5).unproject($u).sub(this.ray.origin).normalize(),this.camera=$u):$u&&$u.isOrthographicCamera?(this.ray.origin.set(_u.x,_u.y,($u.near+$u.far)/($u.near-$u.far)).unproject($u),this.ray.direction.set(0,0,-1).transformDirection($u.matrixWorld),this.camera=$u):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(_u,$u,Ru){var Ou=Ru||[];return intersectObject(_u,this,Ou,$u),Ou.sort(ascSort),Ou},intersectObjects:function(_u,$u,Ru){var Ou=Ru||[];if(Array.isArray(_u)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ou;for(var Fu=0,Nu=_u.length;Fu<Nu;Fu++)intersectObject(_u[Fu],this,Ou,$u);return Ou.sort(ascSort),Ou}});function Spherical(_u,$u,Ru){return this.radius=_u!==void 0?_u:1,this.phi=$u!==void 0?$u:0,this.theta=Ru!==void 0?Ru:0,this}Object.assign(Spherical.prototype,{set:function(_u,$u,Ru){return this.radius=_u,this.phi=$u,this.theta=Ru,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.phi=_u.phi,this.theta=_u.theta,this},makeSafe:function(){var _u=1e-6;return this.phi=Math.max(_u,Math.min(Math.PI-_u,this.phi)),this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Ru){return this.radius=Math.sqrt(_u*_u+$u*$u+Ru*Ru),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_u,Ru),this.phi=Math.acos(MathUtils.clamp($u/this.radius,-1,1))),this}});function Cylindrical(_u,$u,Ru){return this.radius=_u!==void 0?_u:1,this.theta=$u!==void 0?$u:0,this.y=Ru!==void 0?Ru:0,this}Object.assign(Cylindrical.prototype,{set:function(_u,$u,Ru){return this.radius=_u,this.theta=$u,this.y=Ru,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.theta=_u.theta,this.y=_u.y,this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Ru){return this.radius=Math.sqrt(_u*_u+Ru*Ru),this.theta=Math.atan2(_u,Ru),this.y=$u,this}});var _vector$7=new Vector2;function Box2(_u,$u){this.min=_u!==void 0?_u:new Vector2(1/0,1/0),this.max=$u!==void 0?$u:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Ru=_u.length;$u<Ru;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Ru=_vector$7.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Ru),this.max.copy(_u).add(Ru),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),$u=new Vector2),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y)},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),$u=new Vector2),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$7.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(_u,$u){this.start=_u!==void 0?_u:new Vector3,this.end=$u!==void 0?$u:new Vector3}Object.assign(Line3.prototype,{set:function(_u,$u){return this.start.copy(_u),this.end.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.start.copy(_u.start),this.end.copy(_u.end),this},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),_u=new Vector3),_u.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),_u=new Vector3),_u.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Line3: .at() target is now required"),$u=new Vector3),this.delta($u).multiplyScalar(_u).add(this.start)},closestPointToPointParameter:function(_u,$u){_startP.subVectors(_u,this.start),_startEnd.subVectors(this.end,this.start);var Ru=_startEnd.dot(_startEnd),Ou=_startEnd.dot(_startP),Fu=Ou/Ru;return $u&&(Fu=MathUtils.clamp(Fu,0,1)),Fu},closestPointToPoint:function(_u,$u,Ru){var Ou=this.closestPointToPointParameter(_u,$u);return Ru===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Ru=new Vector3),this.delta(Ru).multiplyScalar(Ou).add(this.start)},applyMatrix4:function(_u){return this.start.applyMatrix4(_u),this.end.applyMatrix4(_u),this},equals:function(_u){return _u.start.equals(this.start)&&_u.end.equals(this.end)}});function ImmediateRenderObject(_u){Object3D.call(this),this.material=_u,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(_u,$u){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=$u;for(var Ru=new BufferGeometry,Ou=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Fu=0,Nu=1,Vu=32;Fu<Vu;Fu++,Nu++){var Gu=Fu/Vu*Math.PI*2,Uu=Nu/Vu*Math.PI*2;Ou.push(Math.cos(Gu),Math.sin(Gu),1,Math.cos(Uu),Math.sin(Uu),1)}Ru.setAttribute("position",new Float32BufferAttribute(Ou,3));var Hu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Ru,Hu),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var _u=this.light.distance?this.light.distance:1e3,$u=_u*Math.tan(this.light.angle);this.cone.scale.set($u,$u,_u),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(_u){var $u=[];_u&&_u.isBone&&$u.push(_u);for(var Ru=0;Ru<_u.children.length;Ru++)$u.push.apply($u,getBoneList(_u.children[Ru]));return $u}function SkeletonHelper(_u){for(var $u=getBoneList(_u),Ru=new BufferGeometry,Ou=[],Fu=[],Nu=new Color(0,0,1),Vu=new Color(0,1,0),Gu=0;Gu<$u.length;Gu++){var Uu=$u[Gu];Uu.parent&&Uu.parent.isBone&&(Ou.push(0,0,0),Ou.push(0,0,0),Fu.push(Nu.r,Nu.g,Nu.b),Fu.push(Vu.r,Vu.g,Vu.b))}Ru.setAttribute("position",new Float32BufferAttribute(Ou,3)),Ru.setAttribute("color",new Float32BufferAttribute(Fu,3));var Hu=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Ru,Hu),this.type="SkeletonHelper",this.root=_u,this.bones=$u,this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(_u){var $u=this.bones,Ru=this.geometry,Ou=Ru.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Fu=0,Nu=0;Fu<$u.length;Fu++){var Vu=$u[Fu];Vu.parent&&Vu.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Vu.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ou.setXYZ(Nu,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Vu.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Ou.setXYZ(Nu+1,_vector$9.x,_vector$9.y,_vector$9.z),Nu+=2)}Ru.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,_u)};function PointLightHelper(_u,$u,Ru){this.light=_u,this.light.updateMatrixWorld(),this.color=Ru;var Ou=new SphereBufferGeometry($u,4,2),Fu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Ou,Fu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(_u,$u,Ru){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Ru;var Ou=new OctahedronBufferGeometry($u);Ou.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Fu=Ou.getAttribute("position"),Nu=new Float32Array(Fu.count*3);Ou.setAttribute("color",new BufferAttribute(Nu,3)),this.add(new Mesh(Ou,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var _u=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var $u=_u.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Ru=0,Ou=$u.count;Ru<Ou;Ru++){var Fu=Ru<Ou/2?_color1:_color2;$u.setXYZ(Ru,Fu.r,Fu.g,Fu.b)}$u.needsUpdate=!0}_u.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(_u,$u,Ru,Ou){_u=_u||10,$u=$u||10,Ru=new Color(Ru!==void 0?Ru:4473924),Ou=new Color(Ou!==void 0?Ou:8947848);for(var Fu=$u/2,Nu=_u/$u,Vu=_u/2,Gu=[],Uu=[],Hu=0,Wu=0,Qu=-Vu;Hu<=$u;Hu++,Qu+=Nu){Gu.push(-Vu,0,Qu,Vu,0,Qu),Gu.push(Qu,0,-Vu,Qu,0,Vu);var qu=Hu===Fu?Ru:Ou;qu.toArray(Uu,Wu),Wu+=3,qu.toArray(Uu,Wu),Wu+=3,qu.toArray(Uu,Wu),Wu+=3,qu.toArray(Uu,Wu),Wu+=3}var Ku=new BufferGeometry;Ku.setAttribute("position",new Float32BufferAttribute(Gu,3)),Ku.setAttribute("color",new Float32BufferAttribute(Uu,3));var Yu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ku,Yu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(_u){return LineSegments.prototype.copy.call(this,_u),this.geometry.copy(_u.geometry),this.material.copy(_u.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(_u,$u,Ru,Ou,Fu,Nu){_u=_u||10,$u=$u||16,Ru=Ru||8,Ou=Ou||64,Fu=new Color(Fu!==void 0?Fu:4473924),Nu=new Color(Nu!==void 0?Nu:8947848);var Vu=[],Gu=[],Uu,Hu,Wu,Qu,qu,Ku,Yu;for(Qu=0;Qu<=$u;Qu++)Wu=Qu/$u*(Math.PI*2),Uu=Math.sin(Wu)*_u,Hu=Math.cos(Wu)*_u,Vu.push(0,0,0),Vu.push(Uu,0,Hu),Yu=Qu&1?Fu:Nu,Gu.push(Yu.r,Yu.g,Yu.b),Gu.push(Yu.r,Yu.g,Yu.b);for(Qu=0;Qu<=Ru;Qu++)for(Yu=Qu&1?Fu:Nu,Ku=_u-_u/Ru*Qu,qu=0;qu<Ou;qu++)Wu=qu/Ou*(Math.PI*2),Uu=Math.sin(Wu)*Ku,Hu=Math.cos(Wu)*Ku,Vu.push(Uu,0,Hu),Gu.push(Yu.r,Yu.g,Yu.b),Wu=(qu+1)/Ou*(Math.PI*2),Uu=Math.sin(Wu)*Ku,Hu=Math.cos(Wu)*Ku,Vu.push(Uu,0,Hu),Gu.push(Yu.r,Yu.g,Yu.b);var _c=new BufferGeometry;_c.setAttribute("position",new Float32BufferAttribute(Vu,3)),_c.setAttribute("color",new Float32BufferAttribute(Gu,3));var Ju=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,_c,Ju),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(_u,$u,Ru){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Ru,$u===void 0&&($u=1);var Ou=new BufferGeometry;Ou.setAttribute("position",new Float32BufferAttribute([-$u,$u,0,$u,$u,0,$u,-$u,0,-$u,-$u,0,-$u,$u,0],3));var Fu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Ou,Fu),this.add(this.lightPlane),Ou=new BufferGeometry,Ou.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Ou,Fu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(_u){var $u=new BufferGeometry,Ru=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Ou=[],Fu=[],Nu={},Vu=new Color(16755200),Gu=new Color(16711680),Uu=new Color(43775),Hu=new Color(16777215),Wu=new Color(3355443);Qu("n1","n2",Vu),Qu("n2","n4",Vu),Qu("n4","n3",Vu),Qu("n3","n1",Vu),Qu("f1","f2",Vu),Qu("f2","f4",Vu),Qu("f4","f3",Vu),Qu("f3","f1",Vu),Qu("n1","f1",Vu),Qu("n2","f2",Vu),Qu("n3","f3",Vu),Qu("n4","f4",Vu),Qu("p","n1",Gu),Qu("p","n2",Gu),Qu("p","n3",Gu),Qu("p","n4",Gu),Qu("u1","u2",Uu),Qu("u2","u3",Uu),Qu("u3","u1",Uu),Qu("c","t",Hu),Qu("p","c",Wu),Qu("cn1","cn2",Wu),Qu("cn3","cn4",Wu),Qu("cf1","cf2",Wu),Qu("cf3","cf4",Wu);function Qu(Ku,Yu,_c){qu(Ku,_c),qu(Yu,_c)}function qu(Ku,Yu){Ou.push(0,0,0),Fu.push(Yu.r,Yu.g,Yu.b),Nu[Ku]===void 0&&(Nu[Ku]=[]),Nu[Ku].push(Ou.length/3-1)}$u.setAttribute("position",new Float32BufferAttribute(Ou,3)),$u.setAttribute("color",new Float32BufferAttribute(Fu,3)),LineSegments.call(this,$u,Ru),this.type="CameraHelper",this.camera=_u,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Nu,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var _u=this.geometry,$u=this.pointMap,Ru=1,Ou=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",$u,_u,_camera,0,0,-1),setPoint("t",$u,_u,_camera,0,0,1),setPoint("n1",$u,_u,_camera,-Ru,-Ou,-1),setPoint("n2",$u,_u,_camera,Ru,-Ou,-1),setPoint("n3",$u,_u,_camera,-Ru,Ou,-1),setPoint("n4",$u,_u,_camera,Ru,Ou,-1),setPoint("f1",$u,_u,_camera,-Ru,-Ou,1),setPoint("f2",$u,_u,_camera,Ru,-Ou,1),setPoint("f3",$u,_u,_camera,-Ru,Ou,1),setPoint("f4",$u,_u,_camera,Ru,Ou,1),setPoint("u1",$u,_u,_camera,Ru*.7,Ou*1.1,-1),setPoint("u2",$u,_u,_camera,-Ru*.7,Ou*1.1,-1),setPoint("u3",$u,_u,_camera,0,Ou*2,-1),setPoint("cf1",$u,_u,_camera,-Ru,0,1),setPoint("cf2",$u,_u,_camera,Ru,0,1),setPoint("cf3",$u,_u,_camera,0,-Ou,1),setPoint("cf4",$u,_u,_camera,0,Ou,1),setPoint("cn1",$u,_u,_camera,-Ru,0,-1),setPoint("cn2",$u,_u,_camera,Ru,0,-1),setPoint("cn3",$u,_u,_camera,0,-Ou,-1),setPoint("cn4",$u,_u,_camera,0,Ou,-1),_u.getAttribute("position").needsUpdate=!0};function setPoint(_u,$u,Ru,Ou,Fu,Nu,Vu){_vector$b.set(Fu,Nu,Vu).unproject(Ou);var Gu=$u[_u];if(Gu!==void 0)for(var Uu=Ru.getAttribute("position"),Hu=0,Wu=Gu.length;Hu<Wu;Hu++)Uu.setXYZ(Gu[Hu],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(_u,$u){this.object=_u,$u===void 0&&($u=16776960);var Ru=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ou=new Float32Array(8*3),Fu=new BufferGeometry;Fu.setIndex(new BufferAttribute(Ru,1)),Fu.setAttribute("position",new BufferAttribute(Ou,3)),LineSegments.call(this,Fu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(_u){if(_u!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var $u=_box$3.min,Ru=_box$3.max,Ou=this.geometry.attributes.position,Fu=Ou.array;Fu[0]=Ru.x,Fu[1]=Ru.y,Fu[2]=Ru.z,Fu[3]=$u.x,Fu[4]=Ru.y,Fu[5]=Ru.z,Fu[6]=$u.x,Fu[7]=$u.y,Fu[8]=Ru.z,Fu[9]=Ru.x,Fu[10]=$u.y,Fu[11]=Ru.z,Fu[12]=Ru.x,Fu[13]=Ru.y,Fu[14]=$u.z,Fu[15]=$u.x,Fu[16]=Ru.y,Fu[17]=$u.z,Fu[18]=$u.x,Fu[19]=$u.y,Fu[20]=$u.z,Fu[21]=Ru.x,Fu[22]=$u.y,Fu[23]=$u.z,Ou.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(_u){return this.object=_u,this.update(),this};BoxHelper.prototype.copy=function(_u){return LineSegments.prototype.copy.call(this,_u),this.object=_u.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(_u,$u){this.type="Box3Helper",this.box=_u,$u=$u||16776960;var Ru=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ou=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Fu=new BufferGeometry;Fu.setIndex(new BufferAttribute(Ru,1)),Fu.setAttribute("position",new Float32BufferAttribute(Ou,3)),LineSegments.call(this,Fu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(_u){var $u=this.box;$u.isEmpty()||($u.getCenter(this.position),$u.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,_u))};function PlaneHelper(_u,$u,Ru){this.plane=_u,this.size=$u===void 0?1:$u;var Ou=Ru!==void 0?Ru:16776960,Fu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Nu=new BufferGeometry;Nu.setAttribute("position",new Float32BufferAttribute(Fu,3)),Nu.computeBoundingSphere(),Line$1.call(this,Nu,new LineBasicMaterial({color:Ou,toneMapped:!1})),this.type="PlaneHelper";var Vu=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Gu=new BufferGeometry;Gu.setAttribute("position",new Float32BufferAttribute(Vu,3)),Gu.computeBoundingSphere(),this.add(new Mesh(Gu,new MeshBasicMaterial({color:Ou,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(_u){var $u=-this.plane.constant;Math.abs($u)<1e-8&&($u=1e-8),this.scale.set(.5*this.size,.5*this.size,$u),this.children[0].material.side=$u<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,_u)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(_u,$u,Ru,Ou,Fu,Nu){Object3D.call(this),this.type="ArrowHelper",_u===void 0&&(_u=new Vector3(0,0,1)),$u===void 0&&($u=new Vector3(0,0,0)),Ru===void 0&&(Ru=1),Ou===void 0&&(Ou=16776960),Fu===void 0&&(Fu=.2*Ru),Nu===void 0&&(Nu=.2*Fu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy($u),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Ou,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Ou,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_u),this.setLength(Ru,Fu,Nu)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(_u){if(_u.y>.99999)this.quaternion.set(0,0,0,1);else if(_u.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_u.z,0,-_u.x).normalize();var $u=Math.acos(_u.y);this.quaternion.setFromAxisAngle(_axis,$u)}};ArrowHelper.prototype.setLength=function(_u,$u,Ru){$u===void 0&&($u=.2*_u),Ru===void 0&&(Ru=.2*$u),this.line.scale.set(1,Math.max(1e-4,_u-$u),1),this.line.updateMatrix(),this.cone.scale.set(Ru,$u,Ru),this.cone.position.y=_u,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(_u){this.line.material.color.set(_u),this.cone.material.color.set(_u)};ArrowHelper.prototype.copy=function(_u){return Object3D.prototype.copy.call(this,_u,!1),this.line.copy(_u.line),this.cone.copy(_u.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(_u){_u=_u||1;var $u=[0,0,0,_u,0,0,0,0,0,0,_u,0,0,0,0,0,0,_u],Ru=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Ou=new BufferGeometry;Ou.setAttribute("position",new Float32BufferAttribute($u,3)),Ou.setAttribute("color",new Float32BufferAttribute(Ru,3));var Fu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Ou,Fu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(_u){this._renderer=_u,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(_u,$u=0,Ru=.1,Ou=100){_oldTarget=this._renderer.getRenderTarget();var Fu=this._allocateTargets();return this._sceneToCubeUV(_u,Ru,Ou,Fu),$u>0&&this._blur(Fu,0,0,$u),this._applyPMREM(Fu),this._cleanup(Fu),Fu},fromEquirectangular:function(_u){return _u.magFilter=NearestFilter,_u.minFilter=NearestFilter,_u.generateMipmaps=!1,this.fromCubemap(_u)},fromCubemap:function(_u){_oldTarget=this._renderer.getRenderTarget();var $u=this._allocateTargets(_u);return this._textureToCubeUV(_u,$u),this._applyPMREM($u),this._cleanup($u),$u},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var _u=0;_u<_lodPlanes.length;_u++)_lodPlanes[_u].dispose()},_cleanup:function(_u){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),_u.scissorTest=!1,_u.setSize(_u.width,_u.height)},_allocateTargets:function(_u){var $u={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(_u)?_u.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Ru=_createRenderTarget($u);return Ru.depthBuffer=!_u,this._pingPongRenderTarget=_createRenderTarget($u),Ru},_compileMaterial:function(_u){var $u=new Mesh(_lodPlanes[0],_u);this._renderer.compile($u,_flatCamera)},_sceneToCubeUV:function(_u,$u,Ru,Ou){var Fu=90,Nu=1,Vu=new PerspectiveCamera(Fu,Nu,$u,Ru),Gu=[1,-1,1,1,1,1],Uu=[1,1,1,-1,-1,-1],Hu=this._renderer,Wu=Hu.outputEncoding,Qu=Hu.toneMapping,qu=Hu.toneMappingExposure,Ku=Hu.getClearColor(),Yu=Hu.getClearAlpha();Hu.toneMapping=LinearToneMapping,Hu.toneMappingExposure=1,Hu.outputEncoding=LinearEncoding;var _c=_u.background;if(_c&&_c.isColor){_c.convertSRGBToLinear();var Ju=Math.max(_c.r,_c.g,_c.b),Xu=Math.min(Math.max(Math.ceil(Math.log2(Ju)),-128),127);_c=_c.multiplyScalar(Math.pow(2,-Xu));var Zu=(Xu+128)/255;Hu.setClearColor(_c,Zu),_u.background=null}for(var Xc=0;Xc<6;Xc++){var _h=Xc%3;_h==0?(Vu.up.set(0,Gu[Xc],0),Vu.lookAt(Uu[Xc],0,0)):_h==1?(Vu.up.set(0,0,Gu[Xc]),Vu.lookAt(0,Uu[Xc],0)):(Vu.up.set(0,Gu[Xc],0),Vu.lookAt(0,0,Uu[Xc])),_setViewport(Ou,_h*SIZE_MAX,Xc>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Hu.setRenderTarget(Ou),Hu.render(_u,Vu)}Hu.toneMapping=Qu,Hu.toneMappingExposure=qu,Hu.outputEncoding=Wu,Hu.setClearColor(Ku,Yu)},_textureToCubeUV:function(_u,$u){var Ru=this._renderer;_u.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Ou=_u.isCubeTexture?this._cubemapShader:this._equirectShader,Fu=new Mesh(_lodPlanes[0],Ou),Nu=Ou.uniforms;Nu.envMap.value=_u,_u.isCubeTexture||Nu.texelSize.value.set(1/_u.image.width,1/_u.image.height),Nu.inputEncoding.value=ENCODINGS[_u.encoding],Nu.outputEncoding.value=ENCODINGS[$u.texture.encoding],_setViewport($u,0,0,3*SIZE_MAX,2*SIZE_MAX),Ru.setRenderTarget($u),Ru.render(Fu,_flatCamera)},_applyPMREM:function(_u){var $u=this._renderer,Ru=$u.autoClear;$u.autoClear=!1;for(var Ou=1;Ou<TOTAL_LODS;Ou++){var Fu=Math.sqrt(_sigmas[Ou]*_sigmas[Ou]-_sigmas[Ou-1]*_sigmas[Ou-1]),Nu=_axisDirections[(Ou-1)%_axisDirections.length];this._blur(_u,Ou-1,Ou,Fu,Nu)}$u.autoClear=Ru},_blur:function(_u,$u,Ru,Ou,Fu){var Nu=this._pingPongRenderTarget;this._halfBlur(_u,Nu,$u,Ru,Ou,"latitudinal",Fu),this._halfBlur(Nu,_u,Ru,Ru,Ou,"longitudinal",Fu)},_halfBlur:function(_u,$u,Ru,Ou,Fu,Nu,Vu){var Gu=this._renderer,Uu=this._blurMaterial;Nu!=="latitudinal"&&Nu!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Hu=3,Wu=new Mesh(_lodPlanes[Ou],Uu),Qu=Uu.uniforms,qu=_sizeLods[Ru]-1,Ku=isFinite(Fu)?Math.PI/(2*qu):2*Math.PI/(2*MAX_SAMPLES-1),Yu=Fu/Ku,_c=isFinite(Fu)?1+Math.floor(Hu*Yu):MAX_SAMPLES;_c>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Fu}, is too large and will clip, as it requested ${_c} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Ju=[],Xu=0,Zu=0;Zu<MAX_SAMPLES;++Zu){var ep=Zu/Yu,Xc=Math.exp(-ep*ep/2);Ju.push(Xc),Zu==0?Xu+=Xc:Zu<_c&&(Xu+=2*Xc)}for(var Zu=0;Zu<Ju.length;Zu++)Ju[Zu]=Ju[Zu]/Xu;Qu.envMap.value=_u.texture,Qu.samples.value=_c,Qu.weights.value=Ju,Qu.latitudinal.value=Nu==="latitudinal",Vu&&(Qu.poleAxis.value=Vu),Qu.dTheta.value=Ku,Qu.mipInt.value=LOD_MAX-Ru,Qu.inputEncoding.value=ENCODINGS[_u.texture.encoding],Qu.outputEncoding.value=ENCODINGS[_u.texture.encoding];var _h=_sizeLods[Ou],ep=3*Math.max(0,SIZE_MAX-2*_h),np=(Ou===0?0:2*SIZE_MAX)+2*_h*(Ou>LOD_MAX-LOD_MIN?Ou-LOD_MAX+LOD_MIN:0);_setViewport($u,ep,np,3*_h,2*_h),Gu.setRenderTarget($u),Gu.render(Wu,_flatCamera)}};function _isLDR(_u){return _u===void 0||_u.type!==UnsignedByteType?!1:_u.encoding===LinearEncoding||_u.encoding===sRGBEncoding||_u.encoding===GammaEncoding}function _createPlanes(){for(var _u=[],$u=[],Ru=[],Ou=LOD_MAX,Fu=0;Fu<TOTAL_LODS;Fu++){var Nu=Math.pow(2,Ou);$u.push(Nu);var Vu=1/Nu;Fu>LOD_MAX-LOD_MIN?Vu=EXTRA_LOD_SIGMA[Fu-LOD_MAX+LOD_MIN-1]:Fu==0&&(Vu=0),Ru.push(Vu);for(var Gu=1/(Nu-1),Uu=-Gu/2,Hu=1+Gu/2,Wu=[Uu,Uu,Hu,Uu,Hu,Hu,Uu,Uu,Hu,Hu,Uu,Hu],Qu=6,qu=6,Ku=3,Yu=2,_c=1,Ju=new Float32Array(Ku*qu*Qu),Xu=new Float32Array(Yu*qu*Qu),Zu=new Float32Array(_c*qu*Qu),Xc=0;Xc<Qu;Xc++){var _h=Xc%3*2/3-1,ep=Xc>2?0:-1,np=[_h,ep,0,_h+2/3,ep,0,_h+2/3,ep+1,0,_h,ep,0,_h+2/3,ep+1,0,_h,ep+1,0];Ju.set(np,Ku*qu*Xc),Xu.set(Wu,Yu*qu*Xc);var ap=[Xc,Xc,Xc,Xc,Xc,Xc];Zu.set(ap,_c*qu*Xc)}var lp=new BufferGeometry;lp.setAttribute("position",new BufferAttribute(Ju,Ku)),lp.setAttribute("uv",new BufferAttribute(Xu,Yu)),lp.setAttribute("faceIndex",new BufferAttribute(Zu,_c)),_u.push(lp),Ou>LOD_MIN&&Ou--}return{_lodPlanes:_u,_sizeLods:$u,_sigmas:Ru}}function _createRenderTarget(_u){var $u=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,_u);return $u.texture.mapping=CubeUVReflectionMapping,$u.texture.name="PMREM.cubeUv",$u.scissorTest=!0,$u}function _setViewport(_u,$u,Ru,Ou,Fu){_u.viewport.set($u,Ru,Ou,Fu),_u.scissor.set($u,Ru,Ou,Fu)}function _getBlurShader(_u){var $u=new Float32Array(_u),Ru=new Vector3(0,1,0),Ou=new RawShaderMaterial({defines:{n:_u},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:$u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Ru},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Ou.type="SphericalGaussianBlur",Ou}function _getEquirectShader(){var _u=new Vector2(1,1),$u=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:_u},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return $u.type="EquirectangularToCubeUV",$u}function _getCubemapShader(){var _u=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _u.type="CubemapToCubeUV",_u}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(_u,$u,Ru,Ou,Fu,Nu,Vu){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(_u,$u,Ru,Fu,Nu,Vu)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(_u){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),_u}function MultiMaterial(_u){return _u===void 0&&(_u=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),_u.isMultiMaterial=!0,_u.materials=_u,_u.clone=function(){return _u.slice()},_u}function PointCloud(_u,$u){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(_u,$u)}function Particle(_u){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(_u)}function ParticleSystem(_u,$u){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(_u,$u)}function PointCloudMaterial(_u){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleBasicMaterial(_u){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleSystemMaterial(_u){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function Vertex(_u,$u,Ru){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(_u,$u,Ru)}function DynamicBufferAttribute(_u,$u){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(_u,$u).setUsage(DynamicDrawUsage)}function Int8Attribute(_u,$u){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(_u,$u)}function Uint8Attribute(_u,$u){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(_u,$u)}function Uint8ClampedAttribute(_u,$u){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(_u,$u)}function Int16Attribute(_u,$u){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(_u,$u)}function Uint16Attribute(_u,$u){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(_u,$u)}function Int32Attribute(_u,$u){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(_u,$u)}function Uint32Attribute(_u,$u){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(_u,$u)}function Float32Attribute(_u,$u){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(_u,$u)}function Float64Attribute(_u,$u){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(_u,$u)}Curve.create=function(_u,$u){return console.log("THREE.Curve.create() has been deprecated"),_u.prototype=Object.create(Curve.prototype),_u.prototype.constructor=_u,_u.prototype.getPoint=$u,_u};Object.assign(CurvePath.prototype,{createPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getPoints(_u);return this.createGeometry($u)},createSpacedPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getSpacedPoints(_u);return this.createGeometry($u)},createGeometry:function(_u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var $u=new Geometry,Ru=0,Ou=_u.length;Ru<Ou;Ru++){var Fu=_u[Ru];$u.vertices.push(new Vector3(Fu.x,Fu.y,Fu.z||0))}return $u}});Object.assign(Path.prototype,{fromPoints:function(_u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(_u)}});function ClosedSplineCurve3(_u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(_u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(_u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(_u){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(_u)}function BoundingBoxHelper(_u,$u){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(_u,$u)}function EdgesHelper(_u,$u){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(_u,$u){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(_u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(_u)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(_u){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(_u)}function BinaryTextureLoader(_u){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(_u)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(_u){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(_u)}});Object.assign(Box2.prototype,{center:function(_u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},size:function(_u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Box3.prototype,{center:function(_u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)},size:function(_u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(_u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(_u)};Line3.prototype.center=function(_u){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(_u)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(_u){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(_u)},nextPowerOfTwo:function(_u){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(_u)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},multiplyVector3:function(_u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(_u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(_u)},flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(_u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(_u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(_u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector4:function(_u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(_u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),_u.transformDirection(this)},crossVector:function(_u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(_u,$u,Ru,Ou,Fu,Nu){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(_u,$u,Ou,Ru,Fu,Nu)}});Plane.prototype.isIntersectionLine=function(_u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(_u)};Quaternion.prototype.multiplyVector3=function(_u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),_u.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(_u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionPlane:function(_u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(_u,$u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(_u,$u)},midpoint:function(_u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(_u)},normal:function(_u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(_u)},plane:function(_u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(_u)}});Object.assign(Triangle,{barycoordFromPoint:function(_u,$u,Ru,Ou,Fu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(_u,$u,Ru,Ou,Fu)},normal:function(_u,$u,Ru,Ou){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(_u,$u,Ru,Ou)}});Object.assign(Shape.prototype,{extractAllPoints:function(_u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(_u)},extrude:function(_u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,_u)},makeGeometry:function(_u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,_u)}});Object.assign(Vector2.prototype,{fromAttribute:function(_u,$u,Ru){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Ru)},distanceToManhattan:function(_u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(_u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(_u)},getScaleFromMatrix:function(_u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(_u)},getColumnFromMatrix:function(_u,$u){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn($u,_u)},applyProjection:function(_u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(_u)},fromAttribute:function(_u,$u,Ru){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Ru)},distanceToManhattan:function(_u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(_u,$u,Ru){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Ru)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(_u){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.assign(Object3D.prototype,{getChildByName:function(_u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(_u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(_u,$u){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis($u,_u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(_u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(_u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=_u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(_u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=_u}});PerspectiveCamera.prototype.setLens=function(_u,$u){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),$u!==void 0&&(this.filmGauge=$u),this.setFocalLength(_u)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(_u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=_u}},shadowCameraLeft:{set:function(_u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=_u}},shadowCameraRight:{set:function(_u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=_u}},shadowCameraTop:{set:function(_u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=_u}},shadowCameraBottom:{set:function(_u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=_u}},shadowCameraNear:{set:function(_u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=_u}},shadowCameraFar:{set:function(_u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=_u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(_u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=_u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(_u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=_u}},shadowMapHeight:{set:function(_u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=_u}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(_u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(_u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(_u)},addAttribute:function(_u,$u){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!($u&&$u.isBufferAttribute)&&!($u&&$u.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(_u,new BufferAttribute(arguments[1],arguments[2]))):_u==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex($u),this):this.setAttribute(_u,$u)},addDrawCall:function(_u,$u,Ru){Ru!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(_u,$u)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(_u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(_u)},applyMatrix:function(_u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(_u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=_u}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(_u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=_u}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(_u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(_u)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(_u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(_u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_u===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(_u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=_u}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(_u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=_u}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(_u,$u,Ru,Ou){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(_u),this.clear($u,Ru,Ou)},animate:function(_u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(_u)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(_u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(_u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=_u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=_u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(_u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=_u===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(_u,$u,Ru){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(_u,Ru)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=_u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=_u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=_u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=_u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(_u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=_u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(_u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=_u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(_u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=_u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(_u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=_u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(_u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=_u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(_u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=_u}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(_u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var $u=this,Ru=new AudioLoader;return Ru.load(_u,function(Ou){$u.setBuffer(Ou)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(_u,$u){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(_u,$u)};var GeometryUtils={merge:function(_u,$u,Ru){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ou;$u.isMesh&&($u.matrixAutoUpdate&&$u.updateMatrix(),Ou=$u.matrix,$u=$u.geometry),_u.merge($u,Ou,Ru)},center:function(_u){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),_u.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(_u,$u,Ru,Ou){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Fu=new TextureLoader;Fu.setCrossOrigin(this.crossOrigin);var Nu=Fu.load(_u,Ru,void 0,Ou);return $u&&(Nu.mapping=$u),Nu};ImageUtils.loadTextureCube=function(_u,$u,Ru,Ou){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Fu=new CubeTextureLoader;Fu.setCrossOrigin(this.crossOrigin);var Nu=Fu.load(_u,Ru,void 0,Ou);return $u&&(Nu.mapping=$u),Nu};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var D$2=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(D$2),tslib={exports:{}};(function(_u){var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu,Xc,_h,ep,np,ap,lp,up;(function(_f){var tp=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};_f(ip(tp,ip(_u.exports)));function ip(rp,op){return rp!==tp&&(typeof Object.create=="function"?Object.defineProperty(rp,"__esModule",{value:!0}):rp.__esModule=!0),function(sp,cp){return rp[sp]=op?op(sp,cp):cp}}})(function(_f){var tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rp,op){rp.__proto__=op}||function(rp,op){for(var sp in op)Object.prototype.hasOwnProperty.call(op,sp)&&(rp[sp]=op[sp])};$u=function(rp,op){if(typeof op!="function"&&op!==null)throw new TypeError("Class extends value "+String(op)+" is not a constructor or null");tp(rp,op);function sp(){this.constructor=rp}rp.prototype=op===null?Object.create(op):(sp.prototype=op.prototype,new sp)},Ru=Object.assign||function(rp){for(var op,sp=1,cp=arguments.length;sp<cp;sp++){op=arguments[sp];for(var hp in op)Object.prototype.hasOwnProperty.call(op,hp)&&(rp[hp]=op[hp])}return rp},Ou=function(rp,op){var sp={};for(var cp in rp)Object.prototype.hasOwnProperty.call(rp,cp)&&op.indexOf(cp)<0&&(sp[cp]=rp[cp]);if(rp!=null&&typeof Object.getOwnPropertySymbols=="function")for(var hp=0,cp=Object.getOwnPropertySymbols(rp);hp<cp.length;hp++)op.indexOf(cp[hp])<0&&Object.prototype.propertyIsEnumerable.call(rp,cp[hp])&&(sp[cp[hp]]=rp[cp[hp]]);return sp},Fu=function(rp,op,sp,cp){var hp=arguments.length,dp=hp<3?op:cp===null?cp=Object.getOwnPropertyDescriptor(op,sp):cp,xp;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")dp=Reflect.decorate(rp,op,sp,cp);else for(var bp=rp.length-1;bp>=0;bp--)(xp=rp[bp])&&(dp=(hp<3?xp(dp):hp>3?xp(op,sp,dp):xp(op,sp))||dp);return hp>3&&dp&&Object.defineProperty(op,sp,dp),dp},Nu=function(rp,op){return function(sp,cp){op(sp,cp,rp)}},Vu=function(rp,op){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(rp,op)},Gu=function(rp,op,sp,cp){function hp(dp){return dp instanceof sp?dp:new sp(function(xp){xp(dp)})}return new(sp||(sp=Promise))(function(dp,xp){function bp(Up){try{Tp(cp.next(Up))}catch(Ip){xp(Ip)}}function Rp(Up){try{Tp(cp.throw(Up))}catch(Ip){xp(Ip)}}function Tp(Up){Up.done?dp(Up.value):hp(Up.value).then(bp,Rp)}Tp((cp=cp.apply(rp,op||[])).next())})},Uu=function(rp,op){var sp={label:0,sent:function(){if(dp[0]&1)throw dp[1];return dp[1]},trys:[],ops:[]},cp,hp,dp,xp;return xp={next:bp(0),throw:bp(1),return:bp(2)},typeof Symbol=="function"&&(xp[Symbol.iterator]=function(){return this}),xp;function bp(Tp){return function(Up){return Rp([Tp,Up])}}function Rp(Tp){if(cp)throw new TypeError("Generator is already executing.");for(;sp;)try{if(cp=1,hp&&(dp=Tp[0]&2?hp.return:Tp[0]?hp.throw||((dp=hp.return)&&dp.call(hp),0):hp.next)&&!(dp=dp.call(hp,Tp[1])).done)return dp;switch(hp=0,dp&&(Tp=[Tp[0]&2,dp.value]),Tp[0]){case 0:case 1:dp=Tp;break;case 4:return sp.label++,{value:Tp[1],done:!1};case 5:sp.label++,hp=Tp[1],Tp=[0];continue;case 7:Tp=sp.ops.pop(),sp.trys.pop();continue;default:if(dp=sp.trys,!(dp=dp.length>0&&dp[dp.length-1])&&(Tp[0]===6||Tp[0]===2)){sp=0;continue}if(Tp[0]===3&&(!dp||Tp[1]>dp[0]&&Tp[1]<dp[3])){sp.label=Tp[1];break}if(Tp[0]===6&&sp.label<dp[1]){sp.label=dp[1],dp=Tp;break}if(dp&&sp.label<dp[2]){sp.label=dp[2],sp.ops.push(Tp);break}dp[2]&&sp.ops.pop(),sp.trys.pop();continue}Tp=op.call(rp,sp)}catch(Up){Tp=[6,Up],hp=0}finally{cp=dp=0}if(Tp[0]&5)throw Tp[1];return{value:Tp[0]?Tp[1]:void 0,done:!0}}},Hu=function(rp,op){for(var sp in rp)sp!=="default"&&!Object.prototype.hasOwnProperty.call(op,sp)&&up(op,rp,sp)},up=Object.create?function(rp,op,sp,cp){cp===void 0&&(cp=sp);var hp=Object.getOwnPropertyDescriptor(op,sp);(!hp||("get"in hp?!op.__esModule:hp.writable||hp.configurable))&&(hp={enumerable:!0,get:function(){return op[sp]}}),Object.defineProperty(rp,cp,hp)}:function(rp,op,sp,cp){cp===void 0&&(cp=sp),rp[cp]=op[sp]},Wu=function(rp){var op=typeof Symbol=="function"&&Symbol.iterator,sp=op&&rp[op],cp=0;if(sp)return sp.call(rp);if(rp&&typeof rp.length=="number")return{next:function(){return rp&&cp>=rp.length&&(rp=void 0),{value:rp&&rp[cp++],done:!rp}}};throw new TypeError(op?"Object is not iterable.":"Symbol.iterator is not defined.")},Qu=function(rp,op){var sp=typeof Symbol=="function"&&rp[Symbol.iterator];if(!sp)return rp;var cp=sp.call(rp),hp,dp=[],xp;try{for(;(op===void 0||op-- >0)&&!(hp=cp.next()).done;)dp.push(hp.value)}catch(bp){xp={error:bp}}finally{try{hp&&!hp.done&&(sp=cp.return)&&sp.call(cp)}finally{if(xp)throw xp.error}}return dp},qu=function(){for(var rp=[],op=0;op<arguments.length;op++)rp=rp.concat(Qu(arguments[op]));return rp},Ku=function(){for(var rp=0,op=0,sp=arguments.length;op<sp;op++)rp+=arguments[op].length;for(var cp=Array(rp),hp=0,op=0;op<sp;op++)for(var dp=arguments[op],xp=0,bp=dp.length;xp<bp;xp++,hp++)cp[hp]=dp[xp];return cp},Yu=function(rp,op,sp){if(sp||arguments.length===2)for(var cp=0,hp=op.length,dp;cp<hp;cp++)(dp||!(cp in op))&&(dp||(dp=Array.prototype.slice.call(op,0,cp)),dp[cp]=op[cp]);return rp.concat(dp||Array.prototype.slice.call(op))},_c=function(rp){return this instanceof _c?(this.v=rp,this):new _c(rp)},Ju=function(rp,op,sp){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var cp=sp.apply(rp,op||[]),hp,dp=[];return hp={},xp("next"),xp("throw"),xp("return"),hp[Symbol.asyncIterator]=function(){return this},hp;function xp(Vp){cp[Vp]&&(hp[Vp]=function(Lp){return new Promise(function(mp,pp){dp.push([Vp,Lp,mp,pp])>1||bp(Vp,Lp)})})}function bp(Vp,Lp){try{Rp(cp[Vp](Lp))}catch(mp){Ip(dp[0][3],mp)}}function Rp(Vp){Vp.value instanceof _c?Promise.resolve(Vp.value.v).then(Tp,Up):Ip(dp[0][2],Vp)}function Tp(Vp){bp("next",Vp)}function Up(Vp){bp("throw",Vp)}function Ip(Vp,Lp){Vp(Lp),dp.shift(),dp.length&&bp(dp[0][0],dp[0][1])}},Xu=function(rp){var op,sp;return op={},cp("next"),cp("throw",function(hp){throw hp}),cp("return"),op[Symbol.iterator]=function(){return this},op;function cp(hp,dp){op[hp]=rp[hp]?function(xp){return(sp=!sp)?{value:_c(rp[hp](xp)),done:hp==="return"}:dp?dp(xp):xp}:dp}},Zu=function(rp){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var op=rp[Symbol.asyncIterator],sp;return op?op.call(rp):(rp=typeof Wu=="function"?Wu(rp):rp[Symbol.iterator](),sp={},cp("next"),cp("throw"),cp("return"),sp[Symbol.asyncIterator]=function(){return this},sp);function cp(dp){sp[dp]=rp[dp]&&function(xp){return new Promise(function(bp,Rp){xp=rp[dp](xp),hp(bp,Rp,xp.done,xp.value)})}}function hp(dp,xp,bp,Rp){Promise.resolve(Rp).then(function(Tp){dp({value:Tp,done:bp})},xp)}},Xc=function(rp,op){return Object.defineProperty?Object.defineProperty(rp,"raw",{value:op}):rp.raw=op,rp};var ip=Object.create?function(rp,op){Object.defineProperty(rp,"default",{enumerable:!0,value:op})}:function(rp,op){rp.default=op};_h=function(rp){if(rp&&rp.__esModule)return rp;var op={};if(rp!=null)for(var sp in rp)sp!=="default"&&Object.prototype.hasOwnProperty.call(rp,sp)&&up(op,rp,sp);return ip(op,rp),op},ep=function(rp){return rp&&rp.__esModule?rp:{default:rp}},np=function(rp,op,sp,cp){if(sp==="a"&&!cp)throw new TypeError("Private accessor was defined without a getter");if(typeof op=="function"?rp!==op||!cp:!op.has(rp))throw new TypeError("Cannot read private member from an object whose class did not declare it");return sp==="m"?cp:sp==="a"?cp.call(rp):cp?cp.value:op.get(rp)},ap=function(rp,op,sp,cp,hp){if(cp==="m")throw new TypeError("Private method is not writable");if(cp==="a"&&!hp)throw new TypeError("Private accessor was defined without a setter");if(typeof op=="function"?rp!==op||!hp:!op.has(rp))throw new TypeError("Cannot write private member to an object whose class did not declare it");return cp==="a"?hp.call(rp,sp):hp?hp.value=sp:op.set(rp,sp),sp},lp=function(rp,op){if(op===null||typeof op!="object"&&typeof op!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof rp=="function"?op===rp:rp.has(op)},_f("__extends",$u),_f("__assign",Ru),_f("__rest",Ou),_f("__decorate",Fu),_f("__param",Nu),_f("__metadata",Vu),_f("__awaiter",Gu),_f("__generator",Uu),_f("__exportStar",Hu),_f("__createBinding",up),_f("__values",Wu),_f("__read",Qu),_f("__spread",qu),_f("__spreadArrays",Ku),_f("__spreadArray",Yu),_f("__await",_c),_f("__asyncGenerator",Ju),_f("__asyncDelegator",Xu),_f("__asyncValues",Zu),_f("__makeTemplateObject",Xc),_f("__importStar",_h),_f("__importDefault",ep),_f("__classPrivateFieldGet",np),_f("__classPrivateFieldSet",ap),_f("__classPrivateFieldIn",lp)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(_u,$u){for(var Ru=new Array(arguments.length-1),Ou=0,Fu=2,Nu=!0;Fu<arguments.length;)Ru[Ou++]=arguments[Fu++];return new Promise(function(Gu,Uu){Ru[Ou]=function(Wu){if(Nu)if(Nu=!1,Wu)Uu(Wu);else{for(var Qu=new Array(arguments.length-1),qu=0;qu<Qu.length;)Qu[qu++]=arguments[qu];Gu.apply(null,Qu)}};try{_u.apply($u||null,Ru)}catch(Hu){Nu&&(Nu=!1,Uu(Hu))}})}var base64$1={};(function(_u){var $u=_u;$u.length=function(Gu){var Uu=Gu.length;if(!Uu)return 0;for(var Hu=0;--Uu%4>1&&Gu.charAt(Uu)==="=";)++Hu;return Math.ceil(Gu.length*3)/4-Hu};for(var Ru=new Array(64),Ou=new Array(123),Fu=0;Fu<64;)Ou[Ru[Fu]=Fu<26?Fu+65:Fu<52?Fu+71:Fu<62?Fu-4:Fu-59|43]=Fu++;$u.encode=function(Gu,Uu,Hu){for(var Wu=null,Qu=[],qu=0,Ku=0,Yu;Uu<Hu;){var _c=Gu[Uu++];switch(Ku){case 0:Qu[qu++]=Ru[_c>>2],Yu=(_c&3)<<4,Ku=1;break;case 1:Qu[qu++]=Ru[Yu|_c>>4],Yu=(_c&15)<<2,Ku=2;break;case 2:Qu[qu++]=Ru[Yu|_c>>6],Qu[qu++]=Ru[_c&63],Ku=0;break}qu>8191&&((Wu||(Wu=[])).push(String.fromCharCode.apply(String,Qu)),qu=0)}return Ku&&(Qu[qu++]=Ru[Yu],Qu[qu++]=61,Ku===1&&(Qu[qu++]=61)),Wu?(qu&&Wu.push(String.fromCharCode.apply(String,Qu.slice(0,qu))),Wu.join("")):String.fromCharCode.apply(String,Qu.slice(0,qu))};var Nu="invalid encoding";$u.decode=function(Gu,Uu,Hu){for(var Wu=Hu,Qu=0,qu,Ku=0;Ku<Gu.length;){var Yu=Gu.charCodeAt(Ku++);if(Yu===61&&Qu>1)break;if((Yu=Ou[Yu])===void 0)throw Error(Nu);switch(Qu){case 0:qu=Yu,Qu=1;break;case 1:Uu[Hu++]=qu<<2|(Yu&48)>>4,qu=Yu,Qu=2;break;case 2:Uu[Hu++]=(qu&15)<<4|(Yu&60)>>2,qu=Yu,Qu=3;break;case 3:Uu[Hu++]=(qu&3)<<6|Yu,Qu=0;break}}if(Qu===1)throw Error(Nu);return Hu-Wu},$u.test=function(Gu){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Gu)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function($u,Ru,Ou){return(this._listeners[$u]||(this._listeners[$u]=[])).push({fn:Ru,ctx:Ou||this}),this};EventEmitter.prototype.off=function($u,Ru){if($u===void 0)this._listeners={};else if(Ru===void 0)this._listeners[$u]=[];else for(var Ou=this._listeners[$u],Fu=0;Fu<Ou.length;)Ou[Fu].fn===Ru?Ou.splice(Fu,1):++Fu;return this};EventEmitter.prototype.emit=function($u){var Ru=this._listeners[$u];if(Ru){for(var Ou=[],Fu=1;Fu<arguments.length;)Ou.push(arguments[Fu++]);for(Fu=0;Fu<Ru.length;)Ru[Fu].fn.apply(Ru[Fu++].ctx,Ou)}return this};var float=factory(factory);function factory(_u){return typeof Float32Array!="undefined"?function(){var $u=new Float32Array([-0]),Ru=new Uint8Array($u.buffer),Ou=Ru[3]===128;function Fu(Uu,Hu,Wu){$u[0]=Uu,Hu[Wu]=Ru[0],Hu[Wu+1]=Ru[1],Hu[Wu+2]=Ru[2],Hu[Wu+3]=Ru[3]}function Nu(Uu,Hu,Wu){$u[0]=Uu,Hu[Wu]=Ru[3],Hu[Wu+1]=Ru[2],Hu[Wu+2]=Ru[1],Hu[Wu+3]=Ru[0]}_u.writeFloatLE=Ou?Fu:Nu,_u.writeFloatBE=Ou?Nu:Fu;function Vu(Uu,Hu){return Ru[0]=Uu[Hu],Ru[1]=Uu[Hu+1],Ru[2]=Uu[Hu+2],Ru[3]=Uu[Hu+3],$u[0]}function Gu(Uu,Hu){return Ru[3]=Uu[Hu],Ru[2]=Uu[Hu+1],Ru[1]=Uu[Hu+2],Ru[0]=Uu[Hu+3],$u[0]}_u.readFloatLE=Ou?Vu:Gu,_u.readFloatBE=Ou?Gu:Vu}():function(){function $u(Ou,Fu,Nu,Vu){var Gu=Fu<0?1:0;if(Gu&&(Fu=-Fu),Fu===0)Ou(1/Fu>0?0:2147483648,Nu,Vu);else if(isNaN(Fu))Ou(2143289344,Nu,Vu);else if(Fu>34028234663852886e22)Ou((Gu<<31|2139095040)>>>0,Nu,Vu);else if(Fu<11754943508222875e-54)Ou((Gu<<31|Math.round(Fu/1401298464324817e-60))>>>0,Nu,Vu);else{var Uu=Math.floor(Math.log(Fu)/Math.LN2),Hu=Math.round(Fu*Math.pow(2,-Uu)*8388608)&8388607;Ou((Gu<<31|Uu+127<<23|Hu)>>>0,Nu,Vu)}}_u.writeFloatLE=$u.bind(null,writeUintLE),_u.writeFloatBE=$u.bind(null,writeUintBE);function Ru(Ou,Fu,Nu){var Vu=Ou(Fu,Nu),Gu=(Vu>>31)*2+1,Uu=Vu>>>23&255,Hu=Vu&8388607;return Uu===255?Hu?NaN:Gu*(1/0):Uu===0?Gu*1401298464324817e-60*Hu:Gu*Math.pow(2,Uu-150)*(Hu+8388608)}_u.readFloatLE=Ru.bind(null,readUintLE),_u.readFloatBE=Ru.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var $u=new Float64Array([-0]),Ru=new Uint8Array($u.buffer),Ou=Ru[7]===128;function Fu(Uu,Hu,Wu){$u[0]=Uu,Hu[Wu]=Ru[0],Hu[Wu+1]=Ru[1],Hu[Wu+2]=Ru[2],Hu[Wu+3]=Ru[3],Hu[Wu+4]=Ru[4],Hu[Wu+5]=Ru[5],Hu[Wu+6]=Ru[6],Hu[Wu+7]=Ru[7]}function Nu(Uu,Hu,Wu){$u[0]=Uu,Hu[Wu]=Ru[7],Hu[Wu+1]=Ru[6],Hu[Wu+2]=Ru[5],Hu[Wu+3]=Ru[4],Hu[Wu+4]=Ru[3],Hu[Wu+5]=Ru[2],Hu[Wu+6]=Ru[1],Hu[Wu+7]=Ru[0]}_u.writeDoubleLE=Ou?Fu:Nu,_u.writeDoubleBE=Ou?Nu:Fu;function Vu(Uu,Hu){return Ru[0]=Uu[Hu],Ru[1]=Uu[Hu+1],Ru[2]=Uu[Hu+2],Ru[3]=Uu[Hu+3],Ru[4]=Uu[Hu+4],Ru[5]=Uu[Hu+5],Ru[6]=Uu[Hu+6],Ru[7]=Uu[Hu+7],$u[0]}function Gu(Uu,Hu){return Ru[7]=Uu[Hu],Ru[6]=Uu[Hu+1],Ru[5]=Uu[Hu+2],Ru[4]=Uu[Hu+3],Ru[3]=Uu[Hu+4],Ru[2]=Uu[Hu+5],Ru[1]=Uu[Hu+6],Ru[0]=Uu[Hu+7],$u[0]}_u.readDoubleLE=Ou?Vu:Gu,_u.readDoubleBE=Ou?Gu:Vu}():function(){function $u(Ou,Fu,Nu,Vu,Gu,Uu){var Hu=Vu<0?1:0;if(Hu&&(Vu=-Vu),Vu===0)Ou(0,Gu,Uu+Fu),Ou(1/Vu>0?0:2147483648,Gu,Uu+Nu);else if(isNaN(Vu))Ou(0,Gu,Uu+Fu),Ou(2146959360,Gu,Uu+Nu);else if(Vu>17976931348623157e292)Ou(0,Gu,Uu+Fu),Ou((Hu<<31|2146435072)>>>0,Gu,Uu+Nu);else{var Wu;if(Vu<22250738585072014e-324)Wu=Vu/5e-324,Ou(Wu>>>0,Gu,Uu+Fu),Ou((Hu<<31|Wu/4294967296)>>>0,Gu,Uu+Nu);else{var Qu=Math.floor(Math.log(Vu)/Math.LN2);Qu===1024&&(Qu=1023),Wu=Vu*Math.pow(2,-Qu),Ou(Wu*4503599627370496>>>0,Gu,Uu+Fu),Ou((Hu<<31|Qu+1023<<20|Wu*1048576&1048575)>>>0,Gu,Uu+Nu)}}}_u.writeDoubleLE=$u.bind(null,writeUintLE,0,4),_u.writeDoubleBE=$u.bind(null,writeUintBE,4,0);function Ru(Ou,Fu,Nu,Vu,Gu){var Uu=Ou(Vu,Gu+Fu),Hu=Ou(Vu,Gu+Nu),Wu=(Hu>>31)*2+1,Qu=Hu>>>20&2047,qu=4294967296*(Hu&1048575)+Uu;return Qu===2047?qu?NaN:Wu*(1/0):Qu===0?Wu*5e-324*qu:Wu*Math.pow(2,Qu-1075)*(qu+4503599627370496)}_u.readDoubleLE=Ru.bind(null,readUintLE,0,4),_u.readDoubleBE=Ru.bind(null,readUintBE,4,0)}(),_u}function writeUintLE(_u,$u,Ru){$u[Ru]=_u&255,$u[Ru+1]=_u>>>8&255,$u[Ru+2]=_u>>>16&255,$u[Ru+3]=_u>>>24}function writeUintBE(_u,$u,Ru){$u[Ru]=_u>>>24,$u[Ru+1]=_u>>>16&255,$u[Ru+2]=_u>>>8&255,$u[Ru+3]=_u&255}function readUintLE(_u,$u){return(_u[$u]|_u[$u+1]<<8|_u[$u+2]<<16|_u[$u+3]<<24)>>>0}function readUintBE(_u,$u){return(_u[$u]<<24|_u[$u+1]<<16|_u[$u+2]<<8|_u[$u+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_u){}return null}var utf8$2={};(function(_u){var $u=_u;$u.length=function(Ou){for(var Fu=0,Nu=0,Vu=0;Vu<Ou.length;++Vu)Nu=Ou.charCodeAt(Vu),Nu<128?Fu+=1:Nu<2048?Fu+=2:(Nu&64512)===55296&&(Ou.charCodeAt(Vu+1)&64512)===56320?(++Vu,Fu+=4):Fu+=3;return Fu},$u.read=function(Ou,Fu,Nu){var Vu=Nu-Fu;if(Vu<1)return"";for(var Gu=null,Uu=[],Hu=0,Wu;Fu<Nu;)Wu=Ou[Fu++],Wu<128?Uu[Hu++]=Wu:Wu>191&&Wu<224?Uu[Hu++]=(Wu&31)<<6|Ou[Fu++]&63:Wu>239&&Wu<365?(Wu=((Wu&7)<<18|(Ou[Fu++]&63)<<12|(Ou[Fu++]&63)<<6|Ou[Fu++]&63)-65536,Uu[Hu++]=55296+(Wu>>10),Uu[Hu++]=56320+(Wu&1023)):Uu[Hu++]=(Wu&15)<<12|(Ou[Fu++]&63)<<6|Ou[Fu++]&63,Hu>8191&&((Gu||(Gu=[])).push(String.fromCharCode.apply(String,Uu)),Hu=0);return Gu?(Hu&&Gu.push(String.fromCharCode.apply(String,Uu.slice(0,Hu))),Gu.join("")):String.fromCharCode.apply(String,Uu.slice(0,Hu))},$u.write=function(Ou,Fu,Nu){for(var Vu=Nu,Gu,Uu,Hu=0;Hu<Ou.length;++Hu)Gu=Ou.charCodeAt(Hu),Gu<128?Fu[Nu++]=Gu:Gu<2048?(Fu[Nu++]=Gu>>6|192,Fu[Nu++]=Gu&63|128):(Gu&64512)===55296&&((Uu=Ou.charCodeAt(Hu+1))&64512)===56320?(Gu=65536+((Gu&1023)<<10)+(Uu&1023),++Hu,Fu[Nu++]=Gu>>18|240,Fu[Nu++]=Gu>>12&63|128,Fu[Nu++]=Gu>>6&63|128,Fu[Nu++]=Gu&63|128):(Fu[Nu++]=Gu>>12|224,Fu[Nu++]=Gu>>6&63|128,Fu[Nu++]=Gu&63|128);return Nu-Vu}})(utf8$2);var pool_1=pool;function pool(_u,$u,Ru){var Ou=Ru||8192,Fu=Ou>>>1,Nu=null,Vu=Ou;return function(Uu){if(Uu<1||Uu>Fu)return _u(Uu);Vu+Uu>Ou&&(Nu=_u(Ou),Vu=0);var Hu=$u.call(Nu,Vu,Vu+=Uu);return Vu&7&&(Vu=(Vu|7)+1),Hu}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(_u,$u){this.lo=_u>>>0,this.hi=$u>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function _u($u){if($u===0)return zero;var Ru=$u<0;Ru&&($u=-$u);var Ou=$u>>>0,Fu=($u-Ou)/4294967296>>>0;return Ru&&(Fu=~Fu>>>0,Ou=~Ou>>>0,++Ou>4294967295&&(Ou=0,++Fu>4294967295&&(Fu=0))),new LongBits$2(Ou,Fu)};LongBits$2.from=function _u($u){if(typeof $u=="number")return LongBits$2.fromNumber($u);if(util$5.isString($u))if(util$5.Long)$u=util$5.Long.fromString($u);else return LongBits$2.fromNumber(parseInt($u,10));return $u.low||$u.high?new LongBits$2($u.low>>>0,$u.high>>>0):zero};LongBits$2.prototype.toNumber=function _u($u){if(!$u&&this.hi>>>31){var Ru=~this.lo+1>>>0,Ou=~this.hi>>>0;return Ru||(Ou=Ou+1>>>0),-(Ru+Ou*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function _u($u){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean($u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($u)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function _u($u){return $u===zeroHash?zero:new LongBits$2((charCodeAt.call($u,0)|charCodeAt.call($u,1)<<8|charCodeAt.call($u,2)<<16|charCodeAt.call($u,3)<<24)>>>0,(charCodeAt.call($u,4)|charCodeAt.call($u,5)<<8|charCodeAt.call($u,6)<<16|charCodeAt.call($u,7)<<24)>>>0)};LongBits$2.prototype.toHash=function _u(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function _u(){var $u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$u)>>>0,this.lo=(this.lo<<1^$u)>>>0,this};LongBits$2.prototype.zzDecode=function _u(){var $u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$u)>>>0,this.hi=(this.hi>>>1^$u)>>>0,this};LongBits$2.prototype.length=function _u(){var $u=this.lo,Ru=(this.lo>>>28|this.hi<<4)>>>0,Ou=this.hi>>>24;return Ou===0?Ru===0?$u<16384?$u<128?1:2:$u<2097152?3:4:Ru<16384?Ru<128?5:6:Ru<2097152?7:8:Ou<128?9:10};(function(_u){var $u=_u;$u.asPromise=aspromise,$u.base64=base64$1,$u.EventEmitter=eventemitter,$u.float=float,$u.inquire=inquire_1,$u.utf8=utf8$2,$u.pool=pool_1,$u.LongBits=longbits,$u.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),$u.global=$u.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,$u.emptyArray=Object.freeze?Object.freeze([]):[],$u.emptyObject=Object.freeze?Object.freeze({}):{},$u.isInteger=Number.isInteger||function(Nu){return typeof Nu=="number"&&isFinite(Nu)&&Math.floor(Nu)===Nu},$u.isString=function(Nu){return typeof Nu=="string"||Nu instanceof String},$u.isObject=function(Nu){return Nu&&typeof Nu=="object"},$u.isset=$u.isSet=function(Nu,Vu){var Gu=Nu[Vu];return Gu!=null&&Nu.hasOwnProperty(Vu)?typeof Gu!="object"||(Array.isArray(Gu)?Gu.length:Object.keys(Gu).length)>0:!1},$u.Buffer=function(){try{var Fu=$u.inquire("buffer").Buffer;return Fu.prototype.utf8Write?Fu:null}catch{return null}}(),$u._Buffer_from=null,$u._Buffer_allocUnsafe=null,$u.newBuffer=function(Nu){return typeof Nu=="number"?$u.Buffer?$u._Buffer_allocUnsafe(Nu):new $u.Array(Nu):$u.Buffer?$u._Buffer_from(Nu):typeof Uint8Array=="undefined"?Nu:new Uint8Array(Nu)},$u.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,$u.Long=$u.global.dcodeIO&&$u.global.dcodeIO.Long||$u.global.Long||$u.inquire("long"),$u.key2Re=/^true|false|0|1$/,$u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,$u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,$u.longToHash=function(Nu){return Nu?$u.LongBits.from(Nu).toHash():$u.LongBits.zeroHash},$u.longFromHash=function(Nu,Vu){var Gu=$u.LongBits.fromHash(Nu);return $u.Long?$u.Long.fromBits(Gu.lo,Gu.hi,Vu):Gu.toNumber(Boolean(Vu))};function Ru(Fu,Nu,Vu){for(var Gu=Object.keys(Nu),Uu=0;Uu<Gu.length;++Uu)(Fu[Gu[Uu]]===void 0||!Vu)&&(Fu[Gu[Uu]]=Nu[Gu[Uu]]);return Fu}$u.merge=Ru,$u.lcFirst=function(Nu){return Nu.charAt(0).toLowerCase()+Nu.substring(1)};function Ou(Fu){function Nu(Vu,Gu){if(!(this instanceof Nu))return new Nu(Vu,Gu);Object.defineProperty(this,"message",{get:function(){return Vu}}),Error.captureStackTrace?Error.captureStackTrace(this,Nu):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Gu&&Ru(this,Gu)}return(Nu.prototype=Object.create(Error.prototype)).constructor=Nu,Object.defineProperty(Nu.prototype,"name",{get:function(){return Fu}}),Nu.prototype.toString=function(){return this.name+": "+this.message},Nu}$u.newError=Ou,$u.ProtocolError=Ou("ProtocolError"),$u.oneOfGetter=function(Nu){for(var Vu={},Gu=0;Gu<Nu.length;++Gu)Vu[Nu[Gu]]=1;return function(){for(var Uu=Object.keys(this),Hu=Uu.length-1;Hu>-1;--Hu)if(Vu[Uu[Hu]]===1&&this[Uu[Hu]]!==void 0&&this[Uu[Hu]]!==null)return Uu[Hu]}},$u.oneOfSetter=function(Nu){return function(Vu){for(var Gu=0;Gu<Nu.length;++Gu)Nu[Gu]!==Vu&&delete this[Nu[Gu]]}},$u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},$u._configure=function(){var Fu=$u.Buffer;if(!Fu){$u._Buffer_from=$u._Buffer_allocUnsafe=null;return}$u._Buffer_from=Fu.from!==Uint8Array.from&&Fu.from||function(Vu,Gu){return new Fu(Vu,Gu)},$u._Buffer_allocUnsafe=Fu.allocUnsafe||function(Vu){return new Fu(Vu)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(_u,$u,Ru){this.fn=_u,this.len=$u,this.next=void 0,this.val=Ru}function noop$1(){}function State(_u){this.head=_u.head,this.tail=_u.tail,this.len=_u.len,this.next=_u.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function _u(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _u($u){return new util$4.Array($u)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function _u($u,Ru,Ou){return this.tail=this.tail.next=new Op($u,Ru,Ou),this.len+=Ru,this};function writeByte(_u,$u,Ru){$u[Ru]=_u&255}function writeVarint32(_u,$u,Ru){for(;_u>127;)$u[Ru++]=_u&127|128,_u>>>=7;$u[Ru]=_u}function VarintOp(_u,$u){this.len=_u,this.next=void 0,this.val=$u}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _u($u){return this.len+=(this.tail=this.tail.next=new VarintOp(($u=$u>>>0)<128?1:$u<16384?2:$u<2097152?3:$u<268435456?4:5,$u)).len,this};Writer$1.prototype.int32=function _u($u){return $u<0?this._push(writeVarint64,10,LongBits$1.fromNumber($u)):this.uint32($u)};Writer$1.prototype.sint32=function _u($u){return this.uint32(($u<<1^$u>>31)>>>0)};function writeVarint64(_u,$u,Ru){for(;_u.hi;)$u[Ru++]=_u.lo&127|128,_u.lo=(_u.lo>>>7|_u.hi<<25)>>>0,_u.hi>>>=7;for(;_u.lo>127;)$u[Ru++]=_u.lo&127|128,_u.lo=_u.lo>>>7;$u[Ru++]=_u.lo}Writer$1.prototype.uint64=function _u($u){var Ru=LongBits$1.from($u);return this._push(writeVarint64,Ru.length(),Ru)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _u($u){var Ru=LongBits$1.from($u).zzEncode();return this._push(writeVarint64,Ru.length(),Ru)};Writer$1.prototype.bool=function _u($u){return this._push(writeByte,1,$u?1:0)};function writeFixed32(_u,$u,Ru){$u[Ru]=_u&255,$u[Ru+1]=_u>>>8&255,$u[Ru+2]=_u>>>16&255,$u[Ru+3]=_u>>>24}Writer$1.prototype.fixed32=function _u($u){return this._push(writeFixed32,4,$u>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _u($u){var Ru=LongBits$1.from($u);return this._push(writeFixed32,4,Ru.lo)._push(writeFixed32,4,Ru.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _u($u){return this._push(util$4.float.writeFloatLE,4,$u)};Writer$1.prototype.double=function _u($u){return this._push(util$4.float.writeDoubleLE,8,$u)};var writeBytes=util$4.Array.prototype.set?function _u($u,Ru,Ou){Ru.set($u,Ou)}:function _u($u,Ru,Ou){for(var Fu=0;Fu<$u.length;++Fu)Ru[Ou+Fu]=$u[Fu]};Writer$1.prototype.bytes=function _u($u){var Ru=$u.length>>>0;if(!Ru)return this._push(writeByte,1,0);if(util$4.isString($u)){var Ou=Writer$1.alloc(Ru=base64.length($u));base64.decode($u,Ou,0),$u=Ou}return this.uint32(Ru)._push(writeBytes,Ru,$u)};Writer$1.prototype.string=function _u($u){var Ru=utf8$1.length($u);return Ru?this.uint32(Ru)._push(utf8$1.write,Ru,$u):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _u(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function _u(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _u(){var $u=this.head,Ru=this.tail,Ou=this.len;return this.reset().uint32(Ou),Ou&&(this.tail.next=$u.next,this.tail=Ru,this.len+=Ou),this};Writer$1.prototype.finish=function _u(){for(var $u=this.head.next,Ru=this.constructor.alloc(this.len),Ou=0;$u;)$u.fn($u.val,Ru,Ou),Ou+=$u.len,$u=$u.next;return Ru};Writer$1._configure=function(_u){BufferWriter$1=_u,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function($u,Ru,Ou){Ru.set($u,Ou)}:function($u,Ru,Ou){if($u.copy)$u.copy(Ru,Ou,0,$u.length);else for(var Fu=0;Fu<$u.length;)Ru[Ou++]=$u[Fu++]}};BufferWriter.prototype.bytes=function _u($u){util$3.isString($u)&&($u=util$3._Buffer_from($u,"base64"));var Ru=$u.length>>>0;return this.uint32(Ru),Ru&&this._push(BufferWriter.writeBytesBuffer,Ru,$u),this};function writeStringBuffer(_u,$u,Ru){_u.length<40?util$3.utf8.write(_u,$u,Ru):$u.utf8Write?$u.utf8Write(_u,Ru):$u.write(_u,Ru)}BufferWriter.prototype.string=function _u($u){var Ru=util$3.Buffer.byteLength($u);return this.uint32(Ru),Ru&&this._push(writeStringBuffer,Ru,$u),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(_u,$u){return RangeError("index out of range: "+_u.pos+" + "+($u||1)+" > "+_u.len)}function Reader$1(_u){this.buf=_u,this.pos=0,this.len=_u.length}var create_array=typeof Uint8Array!="undefined"?function _u($u){if($u instanceof Uint8Array||Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")}:function _u($u){if(Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")},create=function _u(){return util$2.Buffer?function(Ru){return(Reader$1.create=function(Fu){return util$2.Buffer.isBuffer(Fu)?new BufferReader$1(Fu):create_array(Fu)})(Ru)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function _u(){var $u=4294967295;return function(){if($u=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||($u=($u|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return $u;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return $u}}();Reader$1.prototype.int32=function _u(){return this.uint32()|0};Reader$1.prototype.sint32=function _u(){var $u=this.uint32();return $u>>>1^-($u&1)|0};function readLongVarint(){var _u=new LongBits(0,0),$u=0;if(this.len-this.pos>4){for(;$u<4;++$u)if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u;if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<28)>>>0,_u.hi=(_u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _u;$u=0}else{for(;$u<3;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u}return _u.lo=(_u.lo|(this.buf[this.pos++]&127)<<$u*7)>>>0,_u}if(this.len-this.pos>4){for(;$u<5;++$u)if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}else for(;$u<5;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _u(){return this.uint32()!==0};function readFixed32_end(_u,$u){return(_u[$u-4]|_u[$u-3]<<8|_u[$u-2]<<16|_u[$u-1]<<24)>>>0}Reader$1.prototype.fixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$u};Reader$1.prototype.double=function _u(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var $u=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$u};Reader$1.prototype.bytes=function _u(){var $u=this.uint32(),Ru=this.pos,Ou=this.pos+$u;if(Ou>this.len)throw indexOutOfRange(this,$u);return this.pos+=$u,Array.isArray(this.buf)?this.buf.slice(Ru,Ou):Ru===Ou?new this.buf.constructor(0):this._slice.call(this.buf,Ru,Ou)};Reader$1.prototype.string=function _u(){var $u=this.bytes();return utf8.read($u,0,$u.length)};Reader$1.prototype.skip=function _u($u){if(typeof $u=="number"){if(this.pos+$u>this.len)throw indexOutOfRange(this,$u);this.pos+=$u}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_u){switch(_u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_u=this.uint32()&7)!==4;)this.skipType(_u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_u+" at offset "+this.pos)}return this};Reader$1._configure=function(_u){BufferReader$1=_u,Reader$1.create=create(),BufferReader$1._configure();var $u=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[$u](!1)},uint64:function(){return readLongVarint.call(this)[$u](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[$u](!1)},fixed64:function(){return readFixed64.call(this)[$u](!0)},sfixed64:function(){return readFixed64.call(this)[$u](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(_u){Reader.call(this,_u)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function _u(){var $u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$u,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(_u,$u,Ru){if(typeof _u!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=_u,this.requestDelimited=Boolean($u),this.responseDelimited=Boolean(Ru)}Service.prototype.rpcCall=function _u($u,Ru,Ou,Fu,Nu){if(!Fu)throw TypeError("request must be specified");var Vu=this;if(!Nu)return util.asPromise(_u,Vu,$u,Ru,Ou,Fu);if(!Vu.rpcImpl){setTimeout(function(){Nu(Error("already ended"))},0);return}try{return Vu.rpcImpl($u,Ru[Vu.requestDelimited?"encodeDelimited":"encode"](Fu).finish(),function(Uu,Hu){if(Uu)return Vu.emit("error",Uu,$u),Nu(Uu);if(Hu===null){Vu.end(!0);return}if(!(Hu instanceof Ou))try{Hu=Ou[Vu.responseDelimited?"decodeDelimited":"decode"](Hu)}catch(Wu){return Vu.emit("error",Wu,$u),Nu(Wu)}return Vu.emit("data",Hu,$u),Nu(null,Hu)})}catch(Gu){Vu.emit("error",Gu,$u),setTimeout(function(){Nu(Gu)},0);return}};Service.prototype.end=function _u($u){return this.rpcImpl&&($u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_u){var $u=_u;$u.Service=service})(rpc);var roots={};(function(_u){var $u=_u;$u.build="minimal",$u.Writer=writer,$u.BufferWriter=writer_buffer,$u.Reader=reader,$u.BufferReader=reader_buffer,$u.util=minimal$1,$u.rpc=rpc,$u.roots=roots,$u.configure=Ru;function Ru(){$u.util._configure(),$u.Writer._configure($u.BufferWriter),$u.Reader._configure($u.BufferReader)}Ru()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$1,t$3=tslib.exports,i$2=minimal;function n$3(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Ru){if(Ru!=="default"){var Ou=Object.getOwnPropertyDescriptor(_u,Ru);Object.defineProperty($u,Ru,Ou.get?Ou:{enumerable:!0,get:function(){return _u[Ru]}})}}),$u.default=_u,Object.freeze($u)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,l$3={},u$2={},h$2=h$2||function(_u,$u){var Ru={},Ou=Ru.lib={},Fu=Ou.Base=function(){function qu(){}return{extend:function(Ku){qu.prototype=this;var Yu=new qu;return Ku&&Yu.mixIn(Ku),Yu.hasOwnProperty("init")||(Yu.init=function(){Yu.$super.init.apply(this,arguments)}),Yu.init.prototype=Yu,Yu.$super=this,Yu},create:function(){var Ku=this.extend();return Ku.init.apply(Ku,arguments),Ku},init:function(){},mixIn:function(Ku){for(var Yu in Ku)Ku.hasOwnProperty(Yu)&&(this[Yu]=Ku[Yu]);Ku.hasOwnProperty("toString")&&(this.toString=Ku.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Nu=Ou.WordArray=Fu.extend({init:function(qu,Ku){qu=this.words=qu||[],this.sigBytes=Ku!=null?Ku:4*qu.length},toString:function(qu){return(qu||Gu).stringify(this)},concat:function(qu){var Ku=this.words,Yu=qu.words,_c=this.sigBytes,Ju=qu.sigBytes;if(this.clamp(),_c%4)for(var Xu=0;Xu<Ju;Xu++){var Zu=Yu[Xu>>>2]>>>24-Xu%4*8&255;Ku[_c+Xu>>>2]|=Zu<<24-(_c+Xu)%4*8}else for(Xu=0;Xu<Ju;Xu+=4)Ku[_c+Xu>>>2]=Yu[Xu>>>2];return this.sigBytes+=Ju,this},clamp:function(){var qu=this.words,Ku=this.sigBytes;qu[Ku>>>2]&=4294967295<<32-Ku%4*8,qu.length=_u.ceil(Ku/4)},clone:function(){var qu=Fu.clone.call(this);return qu.words=this.words.slice(0),qu},random:function(qu){for(var Ku=[],Yu=0;Yu<qu;Yu+=4)Ku.push(4294967296*_u.random()|0);return new Nu.init(Ku,qu)}}),Vu=Ru.enc={},Gu=Vu.Hex={stringify:function(qu){for(var Ku=qu.words,Yu=qu.sigBytes,_c=[],Ju=0;Ju<Yu;Ju++){var Xu=Ku[Ju>>>2]>>>24-Ju%4*8&255;_c.push((Xu>>>4).toString(16)),_c.push((15&Xu).toString(16))}return _c.join("")},parse:function(qu){for(var Ku=qu.length,Yu=[],_c=0;_c<Ku;_c+=2)Yu[_c>>>3]|=parseInt(qu.substr(_c,2),16)<<24-_c%8*4;return new Nu.init(Yu,Ku/2)}},Uu=Vu.Latin1={stringify:function(qu){for(var Ku=qu.words,Yu=qu.sigBytes,_c=[],Ju=0;Ju<Yu;Ju++){var Xu=Ku[Ju>>>2]>>>24-Ju%4*8&255;_c.push(String.fromCharCode(Xu))}return _c.join("")},parse:function(qu){for(var Ku=qu.length,Yu=[],_c=0;_c<Ku;_c++)Yu[_c>>>2]|=(255&qu.charCodeAt(_c))<<24-_c%4*8;return new Nu.init(Yu,Ku)}},Hu=Vu.Utf8={stringify:function(qu){try{return decodeURIComponent(escape(Uu.stringify(qu)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(qu){return Uu.parse(unescape(encodeURIComponent(qu)))}},Wu=Ou.BufferedBlockAlgorithm=Fu.extend({reset:function(){this._data=new Nu.init,this._nDataBytes=0},_append:function(qu){typeof qu=="string"&&(qu=Hu.parse(qu)),this._data.concat(qu),this._nDataBytes+=qu.sigBytes},_process:function(qu){var Ku=this._data,Yu=Ku.words,_c=Ku.sigBytes,Ju=this.blockSize,Xu=_c/(4*Ju),Zu=(Xu=qu?_u.ceil(Xu):_u.max((0|Xu)-this._minBufferSize,0))*Ju,Xc=_u.min(4*Zu,_c);if(Zu){for(var _h=0;_h<Zu;_h+=Ju)this._doProcessBlock(Yu,_h);var ep=Yu.splice(0,Zu);Ku.sigBytes-=Xc}return new Nu.init(ep,Xc)},clone:function(){var qu=Fu.clone.call(this);return qu._data=this._data.clone(),qu},_minBufferSize:0});Ou.Hasher=Wu.extend({cfg:Fu.extend(),init:function(qu){this.cfg=this.cfg.extend(qu),this.reset()},reset:function(){Wu.reset.call(this),this._doReset()},update:function(qu){return this._append(qu),this._process(),this},finalize:function(qu){return qu&&this._append(qu),this._doFinalize()},blockSize:16,_createHelper:function(qu){return function(Ku,Yu){return new qu.init(Yu).finalize(Ku)}},_createHmacHelper:function(qu){return function(Ku,Yu){return new Qu.HMAC.init(qu,Yu).finalize(Ku)}}});var Qu=Ru.algo={};return Ru}(Math);function c$2(_u,$u,Ru){_u!=null&&(typeof _u=="number"?this.fromNumber(_u,$u,Ru):$u==null&&typeof _u!="string"?this.fromString(_u,256):this.fromString(_u,$u))}function d$1(){return new c$2(null)}(function(_u){for(var $u=h$2,Ru=(Fu=$u.lib).WordArray,Ou=Fu.Hasher,Fu=$u.algo,Nu=[],Vu=[],Gu=function(Yu){return 4294967296*(Yu-(0|Yu))|0},Uu=2,Hu=0;64>Hu;){var Wu;e:{Wu=Uu;for(var Qu=_u.sqrt(Wu),qu=2;qu<=Qu;qu++)if(!(Wu%qu)){Wu=!1;break e}Wu=!0}Wu&&(8>Hu&&(Nu[Hu]=Gu(_u.pow(Uu,.5))),Vu[Hu]=Gu(_u.pow(Uu,1/3)),Hu++),Uu++}var Ku=[];Fu=Fu.SHA256=Ou.extend({_doReset:function(){this._hash=new Ru.init(Nu.slice(0))},_doProcessBlock:function(Yu,_c){for(var Ju=this._hash.words,Xu=Ju[0],Zu=Ju[1],Xc=Ju[2],_h=Ju[3],ep=Ju[4],np=Ju[5],ap=Ju[6],lp=Ju[7],up=0;64>up;up++){if(16>up)Ku[up]=0|Yu[_c+up];else{var _f=Ku[up-15],tp=Ku[up-2];Ku[up]=((_f<<25|_f>>>7)^(_f<<14|_f>>>18)^_f>>>3)+Ku[up-7]+((tp<<15|tp>>>17)^(tp<<13|tp>>>19)^tp>>>10)+Ku[up-16]}_f=lp+((ep<<26|ep>>>6)^(ep<<21|ep>>>11)^(ep<<7|ep>>>25))+(ep&np^~ep&ap)+Vu[up]+Ku[up],tp=((Xu<<30|Xu>>>2)^(Xu<<19|Xu>>>13)^(Xu<<10|Xu>>>22))+(Xu&Zu^Xu&Xc^Zu&Xc),lp=ap,ap=np,np=ep,ep=_h+_f|0,_h=Xc,Xc=Zu,Zu=Xu,Xu=_f+tp|0}Ju[0]=Ju[0]+Xu|0,Ju[1]=Ju[1]+Zu|0,Ju[2]=Ju[2]+Xc|0,Ju[3]=Ju[3]+_h|0,Ju[4]=Ju[4]+ep|0,Ju[5]=Ju[5]+np|0,Ju[6]=Ju[6]+ap|0,Ju[7]=Ju[7]+lp|0},_doFinalize:function(){var Yu=this._data,_c=Yu.words,Ju=8*this._nDataBytes,Xu=8*Yu.sigBytes;return _c[Xu>>>5]|=128<<24-Xu%32,_c[14+(Xu+64>>>9<<4)]=_u.floor(Ju/4294967296),_c[15+(Xu+64>>>9<<4)]=Ju,Yu.sigBytes=4*_c.length,this._process(),this._hash},clone:function(){var Yu=Ou.clone.call(this);return Yu._hash=this._hash.clone(),Yu}}),$u.SHA256=Ou._createHelper(Fu),$u.HmacSHA256=Ou._createHmacHelper(Fu)})(Math),h$2.lib.Cipher||function(_u){var $u=(Ku=h$2).lib,Ru=$u.Base,Ou=$u.WordArray,Fu=$u.BufferedBlockAlgorithm,Nu=Ku.enc.Base64,Vu=Ku.algo.EvpKDF,Gu=$u.Cipher=Fu.extend({cfg:Ru.extend(),createEncryptor:function(_c,Ju){return this.create(this._ENC_XFORM_MODE,_c,Ju)},createDecryptor:function(_c,Ju){return this.create(this._DEC_XFORM_MODE,_c,Ju)},init:function(_c,Ju,Xu){this.cfg=this.cfg.extend(Xu),this._xformMode=_c,this._key=Ju,this.reset()},reset:function(){Fu.reset.call(this),this._doReset()},process:function(_c){return this._append(_c),this._process()},finalize:function(_c){return _c&&this._append(_c),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(_c){return{encrypt:function(Ju,Xu,Zu){return(typeof Xu=="string"?Yu:qu).encrypt(_c,Ju,Xu,Zu)},decrypt:function(Ju,Xu,Zu){return(typeof Xu=="string"?Yu:qu).decrypt(_c,Ju,Xu,Zu)}}}});$u.StreamCipher=Gu.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Uu=Ku.mode={},Hu=function(_c,Ju,Xu){var Zu=this._iv;Zu?this._iv=void 0:Zu=this._prevBlock;for(var Xc=0;Xc<Xu;Xc++)_c[Ju+Xc]^=Zu[Xc]},Wu=($u.BlockCipherMode=Ru.extend({createEncryptor:function(_c,Ju){return this.Encryptor.create(_c,Ju)},createDecryptor:function(_c,Ju){return this.Decryptor.create(_c,Ju)},init:function(_c,Ju){this._cipher=_c,this._iv=Ju}})).extend();Wu.Encryptor=Wu.extend({processBlock:function(_c,Ju){var Xu=this._cipher,Zu=Xu.blockSize;Hu.call(this,_c,Ju,Zu),Xu.encryptBlock(_c,Ju),this._prevBlock=_c.slice(Ju,Ju+Zu)}}),Wu.Decryptor=Wu.extend({processBlock:function(_c,Ju){var Xu=this._cipher,Zu=Xu.blockSize,Xc=_c.slice(Ju,Ju+Zu);Xu.decryptBlock(_c,Ju),Hu.call(this,_c,Ju,Zu),this._prevBlock=Xc}}),Uu=Uu.CBC=Wu,Wu=(Ku.pad={}).Pkcs7={pad:function(_c,Ju){for(var Xu,Zu=(Xu=(Xu=4*Ju)-_c.sigBytes%Xu)<<24|Xu<<16|Xu<<8|Xu,Xc=[],_h=0;_h<Xu;_h+=4)Xc.push(Zu);Xu=Ou.create(Xc,Xu),_c.concat(Xu)},unpad:function(_c){_c.sigBytes-=255&_c.words[_c.sigBytes-1>>>2]}},$u.BlockCipher=Gu.extend({cfg:Gu.cfg.extend({mode:Uu,padding:Wu}),reset:function(){Gu.reset.call(this);var _c=(Ju=this.cfg).iv,Ju=Ju.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Xu=Ju.createEncryptor;else Xu=Ju.createDecryptor,this._minBufferSize=1;this._mode=Xu.call(Ju,this,_c&&_c.words)},_doProcessBlock:function(_c,Ju){this._mode.processBlock(_c,Ju)},_doFinalize:function(){var _c=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){_c.pad(this._data,this.blockSize);var Ju=this._process(!0)}else Ju=this._process(!0),_c.unpad(Ju);return Ju},blockSize:4});var Qu=$u.CipherParams=Ru.extend({init:function(_c){this.mixIn(_c)},toString:function(_c){return(_c||this.formatter).stringify(this)}}),qu=(Uu=(Ku.format={}).OpenSSL={stringify:function(_c){var Ju=_c.ciphertext;return((_c=_c.salt)?Ou.create([1398893684,1701076831]).concat(_c).concat(Ju):Ju).toString(Nu)},parse:function(_c){var Ju=(_c=Nu.parse(_c)).words;if(Ju[0]==1398893684&&Ju[1]==1701076831){var Xu=Ou.create(Ju.slice(2,4));Ju.splice(0,4),_c.sigBytes-=16}return Qu.create({ciphertext:_c,salt:Xu})}},$u.SerializableCipher=Ru.extend({cfg:Ru.extend({format:Uu}),encrypt:function(_c,Ju,Xu,Zu){Zu=this.cfg.extend(Zu);var Xc=_c.createEncryptor(Xu,Zu);return Ju=Xc.finalize(Ju),Xc=Xc.cfg,Qu.create({ciphertext:Ju,key:Xu,iv:Xc.iv,algorithm:_c,mode:Xc.mode,padding:Xc.padding,blockSize:_c.blockSize,formatter:Zu.format})},decrypt:function(_c,Ju,Xu,Zu){return Zu=this.cfg.extend(Zu),Ju=this._parse(Ju,Zu.format),_c.createDecryptor(Xu,Zu).finalize(Ju.ciphertext)},_parse:function(_c,Ju){return typeof _c=="string"?Ju.parse(_c,this):_c}})),Ku=(Ku.kdf={}).OpenSSL={execute:function(_c,Ju,Xu,Zu){return Zu||(Zu=Ou.random(8)),_c=Vu.create({keySize:Ju+Xu}).compute(_c,Zu),Xu=Ou.create(_c.words.slice(Ju),4*Xu),_c.sigBytes=4*Ju,Qu.create({key:_c,iv:Xu,salt:Zu})}},Yu=$u.PasswordBasedCipher=qu.extend({cfg:qu.cfg.extend({kdf:Ku}),encrypt:function(_c,Ju,Xu,Zu){return Xu=(Zu=this.cfg.extend(Zu)).kdf.execute(Xu,_c.keySize,_c.ivSize),Zu.iv=Xu.iv,(_c=qu.encrypt.call(this,_c,Ju,Xu.key,Zu)).mixIn(Xu),_c},decrypt:function(_c,Ju,Xu,Zu){return Zu=this.cfg.extend(Zu),Ju=this._parse(Ju,Zu.format),Xu=Zu.kdf.execute(Xu,_c.keySize,_c.ivSize,Ju.salt),Zu.iv=Xu.iv,qu.decrypt.call(this,_c,Ju,Xu.key,Zu)}})}(),function(){for(var _u=h$2,$u=_u.lib.BlockCipher,Ru=_u.algo,Ou=[],Fu=[],Nu=[],Vu=[],Gu=[],Uu=[],Hu=[],Wu=[],Qu=[],qu=[],Ku=[],Yu=0;256>Yu;Yu++)Ku[Yu]=128>Yu?Yu<<1:Yu<<1^283;var _c=0,Ju=0;for(Yu=0;256>Yu;Yu++){var Xu=(Xu=Ju^Ju<<1^Ju<<2^Ju<<3^Ju<<4)>>>8^255&Xu^99;Ou[_c]=Xu,Fu[Xu]=_c;var Zu=Ku[_c],Xc=Ku[Zu],_h=Ku[Xc],ep=257*Ku[Xu]^16843008*Xu;Nu[_c]=ep<<24|ep>>>8,Vu[_c]=ep<<16|ep>>>16,Gu[_c]=ep<<8|ep>>>24,Uu[_c]=ep,ep=16843009*_h^65537*Xc^257*Zu^16843008*_c,Hu[Xu]=ep<<24|ep>>>8,Wu[Xu]=ep<<16|ep>>>16,Qu[Xu]=ep<<8|ep>>>24,qu[Xu]=ep,_c?(_c=Zu^Ku[Ku[Ku[_h^Zu]]],Ju^=Ku[Ku[Ju]]):_c=Ju=1}var np=[0,1,2,4,8,16,32,64,128,27,54];Ru=Ru.AES=$u.extend({_doReset:function(){for(var ap=(up=this._key).words,lp=up.sigBytes/4,up=4*((this._nRounds=lp+6)+1),_f=this._keySchedule=[],tp=0;tp<up;tp++)if(tp<lp)_f[tp]=ap[tp];else{var ip=_f[tp-1];tp%lp?6<lp&&tp%lp==4&&(ip=Ou[ip>>>24]<<24|Ou[ip>>>16&255]<<16|Ou[ip>>>8&255]<<8|Ou[255&ip]):(ip=Ou[(ip=ip<<8|ip>>>24)>>>24]<<24|Ou[ip>>>16&255]<<16|Ou[ip>>>8&255]<<8|Ou[255&ip],ip^=np[tp/lp|0]<<24),_f[tp]=_f[tp-lp]^ip}for(ap=this._invKeySchedule=[],lp=0;lp<up;lp++)tp=up-lp,ip=lp%4?_f[tp]:_f[tp-4],ap[lp]=4>lp||4>=tp?ip:Hu[Ou[ip>>>24]]^Wu[Ou[ip>>>16&255]]^Qu[Ou[ip>>>8&255]]^qu[Ou[255&ip]]},encryptBlock:function(ap,lp){this._doCryptBlock(ap,lp,this._keySchedule,Nu,Vu,Gu,Uu,Ou)},decryptBlock:function(ap,lp){var up=ap[lp+1];ap[lp+1]=ap[lp+3],ap[lp+3]=up,this._doCryptBlock(ap,lp,this._invKeySchedule,Hu,Wu,Qu,qu,Fu),up=ap[lp+1],ap[lp+1]=ap[lp+3],ap[lp+3]=up},_doCryptBlock:function(ap,lp,up,_f,tp,ip,rp,op){for(var sp=this._nRounds,cp=ap[lp]^up[0],hp=ap[lp+1]^up[1],dp=ap[lp+2]^up[2],xp=ap[lp+3]^up[3],bp=4,Rp=1;Rp<sp;Rp++){var Tp=_f[cp>>>24]^tp[hp>>>16&255]^ip[dp>>>8&255]^rp[255&xp]^up[bp++],Up=_f[hp>>>24]^tp[dp>>>16&255]^ip[xp>>>8&255]^rp[255&cp]^up[bp++],Ip=_f[dp>>>24]^tp[xp>>>16&255]^ip[cp>>>8&255]^rp[255&hp]^up[bp++];xp=_f[xp>>>24]^tp[cp>>>16&255]^ip[hp>>>8&255]^rp[255&dp]^up[bp++],cp=Tp,hp=Up,dp=Ip}Tp=(op[cp>>>24]<<24|op[hp>>>16&255]<<16|op[dp>>>8&255]<<8|op[255&xp])^up[bp++],Up=(op[hp>>>24]<<24|op[dp>>>16&255]<<16|op[xp>>>8&255]<<8|op[255&cp])^up[bp++],Ip=(op[dp>>>24]<<24|op[xp>>>16&255]<<16|op[cp>>>8&255]<<8|op[255&hp])^up[bp++],xp=(op[xp>>>24]<<24|op[cp>>>16&255]<<16|op[hp>>>8&255]<<8|op[255&dp])^up[bp++],ap[lp]=Tp,ap[lp+1]=Up,ap[lp+2]=Ip,ap[lp+3]=xp},keySize:8}),_u.AES=$u._createHelper(Ru)}(),u$2.lang={extend:function(_u,$u,Ru){if(!$u||!_u)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Ou=function(){};if(Ou.prototype=$u.prototype,_u.prototype=new Ou,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u),Ru){var Fu;for(Fu in Ru)_u.prototype[Fu]=Ru[Fu];var Nu=function(){},Vu=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Nu=function(Gu,Uu){for(Fu=0;Fu<Vu.length;Fu+=1){var Hu=Vu[Fu],Wu=Uu[Hu];typeof Wu=="function"&&Wu!=Object.prototype[Hu]&&(Gu[Hu]=Wu)}})}catch{}Nu(_u.prototype,Ru)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(_u,$u,Ru,Ou,Fu,Nu){for(var Vu=32767&$u,Gu=$u>>15;--Nu>=0;){var Uu=32767&this[_u],Hu=this[_u++]>>15,Wu=Gu*Uu+Hu*Vu;Fu=((Uu=Vu*Uu+((32767&Wu)<<15)+Ru[Ou]+(1073741823&Fu))>>>30)+(Wu>>>15)+Gu*Hu+(Fu>>>30),Ru[Ou++]=1073741823&Uu}return Fu},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(_u,$u,Ru,Ou,Fu,Nu){for(;--Nu>=0;){var Vu=$u*this[_u++]+Ru[Ou]+Fu;Fu=Math.floor(Vu/67108864),Ru[Ou++]=67108863&Vu}return Fu},a$2=26):(c$2.prototype.am=function(_u,$u,Ru,Ou,Fu,Nu){for(var Vu=16383&$u,Gu=$u>>14;--Nu>=0;){var Uu=16383&this[_u],Hu=this[_u++]>>14,Wu=Gu*Uu+Hu*Vu;Fu=((Uu=Vu*Uu+((16383&Wu)<<14)+Ru[Ou]+Fu)>>28)+(Wu>>14)+Gu*Hu,Ru[Ou++]=268435455&Uu}return Fu},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,f$2,A$2=new Array;for(p$2="0".charCodeAt(0),f$2=0;f$2<=9;++f$2)A$2[p$2++]=f$2;for(p$2="a".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;for(p$2="A".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;function g$3(_u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(_u)}function m$2(_u,$u){var Ru=A$2[_u.charCodeAt($u)];return Ru==null?-1:Ru}function v$2(_u){var $u=d$1();return $u.fromInt(_u),$u}function y$2(_u){var $u,Ru=1;return($u=_u>>>16)!=0&&(_u=$u,Ru+=16),($u=_u>>8)!=0&&(_u=$u,Ru+=8),($u=_u>>4)!=0&&(_u=$u,Ru+=4),($u=_u>>2)!=0&&(_u=$u,Ru+=2),($u=_u>>1)!=0&&(_u=$u,Ru+=1),Ru}function b$1(_u){this.m=_u}function x$1(_u){this.m=_u,this.mp=_u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<_u.DB-15)-1,this.mt2=2*_u.t}function w$2(_u,$u){return _u&$u}function E$2(_u,$u){return _u|$u}function M$1(_u,$u){return _u^$u}function I$1(_u,$u){return _u&~$u}function S$1(_u){if(_u==0)return-1;var $u=0;return(65535&_u)==0&&(_u>>=16,$u+=16),(255&_u)==0&&(_u>>=8,$u+=8),(15&_u)==0&&(_u>>=4,$u+=4),(3&_u)==0&&(_u>>=2,$u+=2),(1&_u)==0&&++$u,$u}function C$2(_u){for(var $u=0;_u!=0;)_u&=_u-1,++$u;return $u}function B$1(){}function T(_u){return _u}function P$3(_u){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*_u.t,this.r2),this.mu=this.r2.divide(_u),this.m=_u}b$1.prototype.convert=function(_u){return _u.s<0||_u.compareTo(this.m)>=0?_u.mod(this.m):_u},b$1.prototype.revert=function(_u){return _u},b$1.prototype.reduce=function(_u){_u.divRemTo(this.m,null,_u)},b$1.prototype.mulTo=function(_u,$u,Ru){_u.multiplyTo($u,Ru),this.reduce(Ru)},b$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},x$1.prototype.convert=function(_u){var $u=d$1();return _u.abs().dlShiftTo(this.m.t,$u),$u.divRemTo(this.m,null,$u),_u.s<0&&$u.compareTo(c$2.ZERO)>0&&this.m.subTo($u,$u),$u},x$1.prototype.revert=function(_u){var $u=d$1();return _u.copyTo($u),this.reduce($u),$u},x$1.prototype.reduce=function(_u){for(;_u.t<=this.mt2;)_u[_u.t++]=0;for(var $u=0;$u<this.m.t;++$u){var Ru=32767&_u[$u],Ou=Ru*this.mpl+((Ru*this.mph+(_u[$u]>>15)*this.mpl&this.um)<<15)&_u.DM;for(_u[Ru=$u+this.m.t]+=this.m.am(0,Ou,_u,$u,0,this.m.t);_u[Ru]>=_u.DV;)_u[Ru]-=_u.DV,_u[++Ru]++}_u.clamp(),_u.drShiftTo(this.m.t,_u),_u.compareTo(this.m)>=0&&_u.subTo(this.m,_u)},x$1.prototype.mulTo=function(_u,$u,Ru){_u.multiplyTo($u,Ru),this.reduce(Ru)},x$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},c$2.prototype.copyTo=function(_u){for(var $u=this.t-1;$u>=0;--$u)_u[$u]=this[$u];_u.t=this.t,_u.s=this.s},c$2.prototype.fromInt=function(_u){this.t=1,this.s=_u<0?-1:0,_u>0?this[0]=_u:_u<-1?this[0]=_u+this.DV:this.t=0},c$2.prototype.fromString=function(_u,$u){var Ru;if($u==16)Ru=4;else if($u==8)Ru=3;else if($u==256)Ru=8;else if($u==2)Ru=1;else if($u==32)Ru=5;else{if($u!=4)return void this.fromRadix(_u,$u);Ru=2}this.t=0,this.s=0;for(var Ou=_u.length,Fu=!1,Nu=0;--Ou>=0;){var Vu=Ru==8?255&_u[Ou]:m$2(_u,Ou);Vu<0?_u.charAt(Ou)=="-"&&(Fu=!0):(Fu=!1,Nu==0?this[this.t++]=Vu:Nu+Ru>this.DB?(this[this.t-1]|=(Vu&(1<<this.DB-Nu)-1)<<Nu,this[this.t++]=Vu>>this.DB-Nu):this[this.t-1]|=Vu<<Nu,(Nu+=Ru)>=this.DB&&(Nu-=this.DB))}Ru==8&&(128&_u[0])!=0&&(this.s=-1,Nu>0&&(this[this.t-1]|=(1<<this.DB-Nu)-1<<Nu)),this.clamp(),Fu&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var _u=this.s&this.DM;this.t>0&&this[this.t-1]==_u;)--this.t},c$2.prototype.dlShiftTo=function(_u,$u){var Ru;for(Ru=this.t-1;Ru>=0;--Ru)$u[Ru+_u]=this[Ru];for(Ru=_u-1;Ru>=0;--Ru)$u[Ru]=0;$u.t=this.t+_u,$u.s=this.s},c$2.prototype.drShiftTo=function(_u,$u){for(var Ru=_u;Ru<this.t;++Ru)$u[Ru-_u]=this[Ru];$u.t=Math.max(this.t-_u,0),$u.s=this.s},c$2.prototype.lShiftTo=function(_u,$u){var Ru,Ou=_u%this.DB,Fu=this.DB-Ou,Nu=(1<<Fu)-1,Vu=Math.floor(_u/this.DB),Gu=this.s<<Ou&this.DM;for(Ru=this.t-1;Ru>=0;--Ru)$u[Ru+Vu+1]=this[Ru]>>Fu|Gu,Gu=(this[Ru]&Nu)<<Ou;for(Ru=Vu-1;Ru>=0;--Ru)$u[Ru]=0;$u[Vu]=Gu,$u.t=this.t+Vu+1,$u.s=this.s,$u.clamp()},c$2.prototype.rShiftTo=function(_u,$u){$u.s=this.s;var Ru=Math.floor(_u/this.DB);if(Ru>=this.t)$u.t=0;else{var Ou=_u%this.DB,Fu=this.DB-Ou,Nu=(1<<Ou)-1;$u[0]=this[Ru]>>Ou;for(var Vu=Ru+1;Vu<this.t;++Vu)$u[Vu-Ru-1]|=(this[Vu]&Nu)<<Fu,$u[Vu-Ru]=this[Vu]>>Ou;Ou>0&&($u[this.t-Ru-1]|=(this.s&Nu)<<Fu),$u.t=this.t-Ru,$u.clamp()}},c$2.prototype.subTo=function(_u,$u){for(var Ru=0,Ou=0,Fu=Math.min(_u.t,this.t);Ru<Fu;)Ou+=this[Ru]-_u[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;if(_u.t<this.t){for(Ou-=_u.s;Ru<this.t;)Ou+=this[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;Ou+=this.s}else{for(Ou+=this.s;Ru<_u.t;)Ou-=_u[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;Ou-=_u.s}$u.s=Ou<0?-1:0,Ou<-1?$u[Ru++]=this.DV+Ou:Ou>0&&($u[Ru++]=Ou),$u.t=Ru,$u.clamp()},c$2.prototype.multiplyTo=function(_u,$u){var Ru=this.abs(),Ou=_u.abs(),Fu=Ru.t;for($u.t=Fu+Ou.t;--Fu>=0;)$u[Fu]=0;for(Fu=0;Fu<Ou.t;++Fu)$u[Fu+Ru.t]=Ru.am(0,Ou[Fu],$u,Fu,0,Ru.t);$u.s=0,$u.clamp(),this.s!=_u.s&&c$2.ZERO.subTo($u,$u)},c$2.prototype.squareTo=function(_u){for(var $u=this.abs(),Ru=_u.t=2*$u.t;--Ru>=0;)_u[Ru]=0;for(Ru=0;Ru<$u.t-1;++Ru){var Ou=$u.am(Ru,$u[Ru],_u,2*Ru,0,1);(_u[Ru+$u.t]+=$u.am(Ru+1,2*$u[Ru],_u,2*Ru+1,Ou,$u.t-Ru-1))>=$u.DV&&(_u[Ru+$u.t]-=$u.DV,_u[Ru+$u.t+1]=1)}_u.t>0&&(_u[_u.t-1]+=$u.am(Ru,$u[Ru],_u,2*Ru,0,1)),_u.s=0,_u.clamp()},c$2.prototype.divRemTo=function(_u,$u,Ru){var Ou=_u.abs();if(!(Ou.t<=0)){var Fu=this.abs();if(Fu.t<Ou.t)return $u!=null&&$u.fromInt(0),void(Ru!=null&&this.copyTo(Ru));Ru==null&&(Ru=d$1());var Nu=d$1(),Vu=this.s,Gu=_u.s,Uu=this.DB-y$2(Ou[Ou.t-1]);Uu>0?(Ou.lShiftTo(Uu,Nu),Fu.lShiftTo(Uu,Ru)):(Ou.copyTo(Nu),Fu.copyTo(Ru));var Hu=Nu.t,Wu=Nu[Hu-1];if(Wu!=0){var Qu=Wu*(1<<this.F1)+(Hu>1?Nu[Hu-2]>>this.F2:0),qu=this.FV/Qu,Ku=(1<<this.F1)/Qu,Yu=1<<this.F2,_c=Ru.t,Ju=_c-Hu,Xu=$u==null?d$1():$u;for(Nu.dlShiftTo(Ju,Xu),Ru.compareTo(Xu)>=0&&(Ru[Ru.t++]=1,Ru.subTo(Xu,Ru)),c$2.ONE.dlShiftTo(Hu,Xu),Xu.subTo(Nu,Nu);Nu.t<Hu;)Nu[Nu.t++]=0;for(;--Ju>=0;){var Zu=Ru[--_c]==Wu?this.DM:Math.floor(Ru[_c]*qu+(Ru[_c-1]+Yu)*Ku);if((Ru[_c]+=Nu.am(0,Zu,Ru,Ju,0,Hu))<Zu)for(Nu.dlShiftTo(Ju,Xu),Ru.subTo(Xu,Ru);Ru[_c]<--Zu;)Ru.subTo(Xu,Ru)}$u!=null&&(Ru.drShiftTo(Hu,$u),Vu!=Gu&&c$2.ZERO.subTo($u,$u)),Ru.t=Hu,Ru.clamp(),Uu>0&&Ru.rShiftTo(Uu,Ru),Vu<0&&c$2.ZERO.subTo(Ru,Ru)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var _u=this[0];if((1&_u)==0)return 0;var $u=3&_u;return($u=($u=($u=($u=$u*(2-(15&_u)*$u)&15)*(2-(255&_u)*$u)&255)*(2-((65535&_u)*$u&65535))&65535)*(2-_u*$u%this.DV)%this.DV)>0?this.DV-$u:-$u},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(_u,$u){if(_u>4294967295||_u<1)return c$2.ONE;var Ru=d$1(),Ou=d$1(),Fu=$u.convert(this),Nu=y$2(_u)-1;for(Fu.copyTo(Ru);--Nu>=0;)if($u.sqrTo(Ru,Ou),(_u&1<<Nu)>0)$u.mulTo(Ou,Fu,Ru);else{var Vu=Ru;Ru=Ou,Ou=Vu}return $u.revert(Ru)},c$2.prototype.toString=function(_u){if(this.s<0)return"-"+this.negate().toString(_u);var $u;if(_u==16)$u=4;else if(_u==8)$u=3;else if(_u==2)$u=1;else if(_u==32)$u=5;else{if(_u!=4)return this.toRadix(_u);$u=2}var Ru,Ou=(1<<$u)-1,Fu=!1,Nu="",Vu=this.t,Gu=this.DB-Vu*this.DB%$u;if(Vu-- >0)for(Gu<this.DB&&(Ru=this[Vu]>>Gu)>0&&(Fu=!0,Nu=g$3(Ru));Vu>=0;)Gu<$u?(Ru=(this[Vu]&(1<<Gu)-1)<<$u-Gu,Ru|=this[--Vu]>>(Gu+=this.DB-$u)):(Ru=this[Vu]>>(Gu-=$u)&Ou,Gu<=0&&(Gu+=this.DB,--Vu)),Ru>0&&(Fu=!0),Fu&&(Nu+=g$3(Ru));return Fu?Nu:"0"},c$2.prototype.negate=function(){var _u=d$1();return c$2.ZERO.subTo(this,_u),_u},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(_u){var $u=this.s-_u.s;if($u!=0)return $u;var Ru=this.t;if(($u=Ru-_u.t)!=0)return this.s<0?-$u:$u;for(;--Ru>=0;)if(($u=this[Ru]-_u[Ru])!=0)return $u;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$2(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(_u){var $u=d$1();return this.abs().divRemTo(_u,null,$u),this.s<0&&$u.compareTo(c$2.ZERO)>0&&_u.subTo($u,$u),$u},c$2.prototype.modPowInt=function(_u,$u){var Ru;return Ru=_u<256||$u.isEven()?new b$1($u):new x$1($u),this.exp(_u,Ru)},c$2.ZERO=v$2(0),c$2.ONE=v$2(1),B$1.prototype.convert=T,B$1.prototype.revert=T,B$1.prototype.mulTo=function(_u,$u,Ru){_u.multiplyTo($u,Ru)},B$1.prototype.sqrTo=function(_u,$u){_u.squareTo($u)},P$3.prototype.convert=function(_u){if(_u.s<0||_u.t>2*this.m.t)return _u.mod(this.m);if(_u.compareTo(this.m)<0)return _u;var $u=d$1();return _u.copyTo($u),this.reduce($u),$u},P$3.prototype.revert=function(_u){return _u},P$3.prototype.reduce=function(_u){for(_u.drShiftTo(this.m.t-1,this.r2),_u.t>this.m.t+1&&(_u.t=this.m.t+1,_u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_u.compareTo(this.r2)<0;)_u.dAddOffset(1,this.m.t+1);for(_u.subTo(this.r2,_u);_u.compareTo(this.m)>=0;)_u.subTo(this.m,_u)},P$3.prototype.mulTo=function(_u,$u,Ru){_u.multiplyTo($u,Ru),this.reduce(Ru)},P$3.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)};var R$2=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$1=(1<<26)/R$2[R$2.length-1];c$2.prototype.chunkSize=function(_u){return Math.floor(Math.LN2*this.DB/Math.log(_u))},c$2.prototype.toRadix=function(_u){if(_u==null&&(_u=10),this.signum()==0||_u<2||_u>36)return"0";var $u=this.chunkSize(_u),Ru=Math.pow(_u,$u),Ou=v$2(Ru),Fu=d$1(),Nu=d$1(),Vu="";for(this.divRemTo(Ou,Fu,Nu);Fu.signum()>0;)Vu=(Ru+Nu.intValue()).toString(_u).substr(1)+Vu,Fu.divRemTo(Ou,Fu,Nu);return Nu.intValue().toString(_u)+Vu},c$2.prototype.fromRadix=function(_u,$u){this.fromInt(0),$u==null&&($u=10);for(var Ru=this.chunkSize($u),Ou=Math.pow($u,Ru),Fu=!1,Nu=0,Vu=0,Gu=0;Gu<_u.length;++Gu){var Uu=m$2(_u,Gu);Uu<0?_u.charAt(Gu)=="-"&&this.signum()==0&&(Fu=!0):(Vu=$u*Vu+Uu,++Nu>=Ru&&(this.dMultiply(Ou),this.dAddOffset(Vu,0),Nu=0,Vu=0))}Nu>0&&(this.dMultiply(Math.pow($u,Nu)),this.dAddOffset(Vu,0)),Fu&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(_u,$u,Ru){if(typeof $u=="number")if(_u<2)this.fromInt(1);else for(this.fromNumber(_u,Ru),this.testBit(_u-1)||this.bitwiseTo(c$2.ONE.shiftLeft(_u-1),E$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime($u);)this.dAddOffset(2,0),this.bitLength()>_u&&this.subTo(c$2.ONE.shiftLeft(_u-1),this);else{var Ou=new Array,Fu=7&_u;Ou.length=1+(_u>>3),$u.nextBytes(Ou),Fu>0?Ou[0]&=(1<<Fu)-1:Ou[0]=0,this.fromString(Ou,256)}},c$2.prototype.bitwiseTo=function(_u,$u,Ru){var Ou,Fu,Nu=Math.min(_u.t,this.t);for(Ou=0;Ou<Nu;++Ou)Ru[Ou]=$u(this[Ou],_u[Ou]);if(_u.t<this.t){for(Fu=_u.s&this.DM,Ou=Nu;Ou<this.t;++Ou)Ru[Ou]=$u(this[Ou],Fu);Ru.t=this.t}else{for(Fu=this.s&this.DM,Ou=Nu;Ou<_u.t;++Ou)Ru[Ou]=$u(Fu,_u[Ou]);Ru.t=_u.t}Ru.s=$u(this.s,_u.s),Ru.clamp()},c$2.prototype.changeBit=function(_u,$u){var Ru=c$2.ONE.shiftLeft(_u);return this.bitwiseTo(Ru,$u,Ru),Ru},c$2.prototype.addTo=function(_u,$u){for(var Ru=0,Ou=0,Fu=Math.min(_u.t,this.t);Ru<Fu;)Ou+=this[Ru]+_u[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;if(_u.t<this.t){for(Ou+=_u.s;Ru<this.t;)Ou+=this[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;Ou+=this.s}else{for(Ou+=this.s;Ru<_u.t;)Ou+=_u[Ru],$u[Ru++]=Ou&this.DM,Ou>>=this.DB;Ou+=_u.s}$u.s=Ou<0?-1:0,Ou>0?$u[Ru++]=Ou:Ou<-1&&($u[Ru++]=this.DV+Ou),$u.t=Ru,$u.clamp()},c$2.prototype.dMultiply=function(_u){this[this.t]=this.am(0,_u-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(_u,$u){if(_u!=0){for(;this.t<=$u;)this[this.t++]=0;for(this[$u]+=_u;this[$u]>=this.DV;)this[$u]-=this.DV,++$u>=this.t&&(this[this.t++]=0),++this[$u]}},c$2.prototype.multiplyLowerTo=function(_u,$u,Ru){var Ou,Fu=Math.min(this.t+_u.t,$u);for(Ru.s=0,Ru.t=Fu;Fu>0;)Ru[--Fu]=0;for(Ou=Ru.t-this.t;Fu<Ou;++Fu)Ru[Fu+this.t]=this.am(0,_u[Fu],Ru,Fu,0,this.t);for(Ou=Math.min(_u.t,$u);Fu<Ou;++Fu)this.am(0,_u[Fu],Ru,Fu,0,$u-Fu);Ru.clamp()},c$2.prototype.multiplyUpperTo=function(_u,$u,Ru){--$u;var Ou=Ru.t=this.t+_u.t-$u;for(Ru.s=0;--Ou>=0;)Ru[Ou]=0;for(Ou=Math.max($u-this.t,0);Ou<_u.t;++Ou)Ru[this.t+Ou-$u]=this.am($u-Ou,_u[Ou],Ru,0,0,this.t+Ou-$u);Ru.clamp(),Ru.drShiftTo(1,Ru)},c$2.prototype.modInt=function(_u){if(_u<=0)return 0;var $u=this.DV%_u,Ru=this.s<0?_u-1:0;if(this.t>0)if($u==0)Ru=this[0]%_u;else for(var Ou=this.t-1;Ou>=0;--Ou)Ru=($u*Ru+this[Ou])%_u;return Ru},c$2.prototype.millerRabin=function(_u){var $u=this.subtract(c$2.ONE),Ru=$u.getLowestSetBit();if(Ru<=0)return!1;var Ou=$u.shiftRight(Ru);(_u=_u+1>>1)>R$2.length&&(_u=R$2.length);for(var Fu=d$1(),Nu=0;Nu<_u;++Nu){Fu.fromInt(R$2[Math.floor(Math.random()*R$2.length)]);var Vu=Fu.modPow(Ou,this);if(Vu.compareTo(c$2.ONE)!=0&&Vu.compareTo($u)!=0){for(var Gu=1;Gu++<Ru&&Vu.compareTo($u)!=0;)if((Vu=Vu.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Vu.compareTo($u)!=0)return!1}}return!0},c$2.prototype.clone=function(){var _u=d$1();return this.copyTo(_u),_u},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var _u=this.t,$u=new Array;$u[0]=this.s;var Ru,Ou=this.DB-_u*this.DB%8,Fu=0;if(_u-- >0)for(Ou<this.DB&&(Ru=this[_u]>>Ou)!=(this.s&this.DM)>>Ou&&($u[Fu++]=Ru|this.s<<this.DB-Ou);_u>=0;)Ou<8?(Ru=(this[_u]&(1<<Ou)-1)<<8-Ou,Ru|=this[--_u]>>(Ou+=this.DB-8)):(Ru=this[_u]>>(Ou-=8)&255,Ou<=0&&(Ou+=this.DB,--_u)),(128&Ru)!=0&&(Ru|=-256),Fu==0&&(128&this.s)!=(128&Ru)&&++Fu,(Fu>0||Ru!=this.s)&&($u[Fu++]=Ru);return $u},c$2.prototype.equals=function(_u){return this.compareTo(_u)==0},c$2.prototype.min=function(_u){return this.compareTo(_u)<0?this:_u},c$2.prototype.max=function(_u){return this.compareTo(_u)>0?this:_u},c$2.prototype.and=function(_u){var $u=d$1();return this.bitwiseTo(_u,w$2,$u),$u},c$2.prototype.or=function(_u){var $u=d$1();return this.bitwiseTo(_u,E$2,$u),$u},c$2.prototype.xor=function(_u){var $u=d$1();return this.bitwiseTo(_u,M$1,$u),$u},c$2.prototype.andNot=function(_u){var $u=d$1();return this.bitwiseTo(_u,I$1,$u),$u},c$2.prototype.not=function(){for(var _u=d$1(),$u=0;$u<this.t;++$u)_u[$u]=this.DM&~this[$u];return _u.t=this.t,_u.s=~this.s,_u},c$2.prototype.shiftLeft=function(_u){var $u=d$1();return _u<0?this.rShiftTo(-_u,$u):this.lShiftTo(_u,$u),$u},c$2.prototype.shiftRight=function(_u){var $u=d$1();return _u<0?this.lShiftTo(-_u,$u):this.rShiftTo(_u,$u),$u},c$2.prototype.getLowestSetBit=function(){for(var _u=0;_u<this.t;++_u)if(this[_u]!=0)return _u*this.DB+S$1(this[_u]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var _u=0,$u=this.s&this.DM,Ru=0;Ru<this.t;++Ru)_u+=C$2(this[Ru]^$u);return _u},c$2.prototype.testBit=function(_u){var $u=Math.floor(_u/this.DB);return $u>=this.t?this.s!=0:(this[$u]&1<<_u%this.DB)!=0},c$2.prototype.setBit=function(_u){return this.changeBit(_u,E$2)},c$2.prototype.clearBit=function(_u){return this.changeBit(_u,I$1)},c$2.prototype.flipBit=function(_u){return this.changeBit(_u,M$1)},c$2.prototype.add=function(_u){var $u=d$1();return this.addTo(_u,$u),$u},c$2.prototype.subtract=function(_u){var $u=d$1();return this.subTo(_u,$u),$u},c$2.prototype.multiply=function(_u){var $u=d$1();return this.multiplyTo(_u,$u),$u},c$2.prototype.divide=function(_u){var $u=d$1();return this.divRemTo(_u,$u,null),$u},c$2.prototype.remainder=function(_u){var $u=d$1();return this.divRemTo(_u,null,$u),$u},c$2.prototype.divideAndRemainder=function(_u){var $u=d$1(),Ru=d$1();return this.divRemTo(_u,$u,Ru),new Array($u,Ru)},c$2.prototype.modPow=function(_u,$u){var Ru,Ou,Fu=_u.bitLength(),Nu=v$2(1);if(Fu<=0)return Nu;Ru=Fu<18?1:Fu<48?3:Fu<144?4:Fu<768?5:6,Ou=Fu<8?new b$1($u):$u.isEven()?new P$3($u):new x$1($u);var Vu=new Array,Gu=3,Uu=Ru-1,Hu=(1<<Ru)-1;if(Vu[1]=Ou.convert(this),Ru>1){var Wu=d$1();for(Ou.sqrTo(Vu[1],Wu);Gu<=Hu;)Vu[Gu]=d$1(),Ou.mulTo(Wu,Vu[Gu-2],Vu[Gu]),Gu+=2}var Qu,qu,Ku=_u.t-1,Yu=!0,_c=d$1();for(Fu=y$2(_u[Ku])-1;Ku>=0;){for(Fu>=Uu?Qu=_u[Ku]>>Fu-Uu&Hu:(Qu=(_u[Ku]&(1<<Fu+1)-1)<<Uu-Fu,Ku>0&&(Qu|=_u[Ku-1]>>this.DB+Fu-Uu)),Gu=Ru;(1&Qu)==0;)Qu>>=1,--Gu;if((Fu-=Gu)<0&&(Fu+=this.DB,--Ku),Yu)Vu[Qu].copyTo(Nu),Yu=!1;else{for(;Gu>1;)Ou.sqrTo(Nu,_c),Ou.sqrTo(_c,Nu),Gu-=2;Gu>0?Ou.sqrTo(Nu,_c):(qu=Nu,Nu=_c,_c=qu),Ou.mulTo(_c,Vu[Qu],Nu)}for(;Ku>=0&&(_u[Ku]&1<<Fu)==0;)Ou.sqrTo(Nu,_c),qu=Nu,Nu=_c,_c=qu,--Fu<0&&(Fu=this.DB-1,--Ku)}return Ou.revert(Nu)},c$2.prototype.modInverse=function(_u){var $u=_u.isEven();if(this.isEven()&&$u||_u.signum()==0)return c$2.ZERO;for(var Ru=_u.clone(),Ou=this.clone(),Fu=v$2(1),Nu=v$2(0),Vu=v$2(0),Gu=v$2(1);Ru.signum()!=0;){for(;Ru.isEven();)Ru.rShiftTo(1,Ru),$u?(Fu.isEven()&&Nu.isEven()||(Fu.addTo(this,Fu),Nu.subTo(_u,Nu)),Fu.rShiftTo(1,Fu)):Nu.isEven()||Nu.subTo(_u,Nu),Nu.rShiftTo(1,Nu);for(;Ou.isEven();)Ou.rShiftTo(1,Ou),$u?(Vu.isEven()&&Gu.isEven()||(Vu.addTo(this,Vu),Gu.subTo(_u,Gu)),Vu.rShiftTo(1,Vu)):Gu.isEven()||Gu.subTo(_u,Gu),Gu.rShiftTo(1,Gu);Ru.compareTo(Ou)>=0?(Ru.subTo(Ou,Ru),$u&&Fu.subTo(Vu,Fu),Nu.subTo(Gu,Nu)):(Ou.subTo(Ru,Ou),$u&&Vu.subTo(Fu,Vu),Gu.subTo(Nu,Gu))}return Ou.compareTo(c$2.ONE)!=0?c$2.ZERO:Gu.compareTo(_u)>=0?Gu.subtract(_u):Gu.signum()<0?(Gu.addTo(_u,Gu),Gu.signum()<0?Gu.add(_u):Gu):Gu},c$2.prototype.pow=function(_u){return this.exp(_u,new B$1)},c$2.prototype.gcd=function(_u){var $u=this.s<0?this.negate():this.clone(),Ru=_u.s<0?_u.negate():_u.clone();if($u.compareTo(Ru)<0){var Ou=$u;$u=Ru,Ru=Ou}var Fu=$u.getLowestSetBit(),Nu=Ru.getLowestSetBit();if(Nu<0)return $u;for(Fu<Nu&&(Nu=Fu),Nu>0&&($u.rShiftTo(Nu,$u),Ru.rShiftTo(Nu,Ru));$u.signum()>0;)(Fu=$u.getLowestSetBit())>0&&$u.rShiftTo(Fu,$u),(Fu=Ru.getLowestSetBit())>0&&Ru.rShiftTo(Fu,Ru),$u.compareTo(Ru)>=0?($u.subTo(Ru,$u),$u.rShiftTo(1,$u)):(Ru.subTo($u,Ru),Ru.rShiftTo(1,Ru));return Nu>0&&Ru.lShiftTo(Nu,Ru),Ru},c$2.prototype.isProbablePrime=function(_u){var $u,Ru=this.abs();if(Ru.t==1&&Ru[0]<=R$2[R$2.length-1]){for($u=0;$u<R$2.length;++$u)if(Ru[0]==R$2[$u])return!0;return!1}if(Ru.isEven())return!1;for($u=1;$u<R$2.length;){for(var Ou=R$2[$u],Fu=$u+1;Fu<R$2.length&&Ou<k$1;)Ou*=R$2[Fu++];for(Ou=Ru.modInt(Ou);$u<Fu;)if(Ou%R$2[$u++]==0)return!1}return Ru.millerRabin(_u)},c$2.prototype.square=function(){var _u=d$1();return this.squareTo(_u),_u};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$2(_u){var $u,Ru,Ou="";for($u=0;$u+3<=_u.length;$u+=3)Ru=parseInt(_u.substring($u,$u+3),16),Ou+=D$1.charAt(Ru>>6)+D$1.charAt(63&Ru);for($u+1==_u.length?(Ru=parseInt(_u.substring($u,$u+1),16),Ou+=D$1.charAt(Ru<<2)):$u+2==_u.length&&(Ru=parseInt(_u.substring($u,$u+2),16),Ou+=D$1.charAt(Ru>>2)+D$1.charAt((3&Ru)<<4));(3&Ou.length)>0;)Ou+="=";return Ou}function O$2(_u){var $u,Ru,Ou,Fu="",Nu=0;for($u=0;$u<_u.length&&_u.charAt($u)!="=";++$u)(Ou=D$1.indexOf(_u.charAt($u)))<0||(Nu==0?(Fu+=g$3(Ou>>2),Ru=3&Ou,Nu=1):Nu==1?(Fu+=g$3(Ru<<2|Ou>>4),Ru=15&Ou,Nu=2):Nu==2?(Fu+=g$3(Ru),Fu+=g$3(Ou>>2),Ru=3&Ou,Nu=3):(Fu+=g$3(Ru<<2|Ou>>4),Fu+=g$3(15&Ou),Nu=0));return Nu==1&&(Fu+=g$3(Ru<<2)),Fu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$2(){this.i=0,this.j=0,this.S=new Array}N$2.prototype.init=function(_u){var $u,Ru,Ou;for($u=0;$u<256;++$u)this.S[$u]=$u;for(Ru=0,$u=0;$u<256;++$u)Ru=Ru+this.S[$u]+_u[$u%_u.length]&255,Ou=this.S[$u],this.S[$u]=this.S[Ru],this.S[Ru]=Ou;this.i=0,this.j=0},N$2.prototype.next=function(){var _u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_u,this.S[_u+this.S[this.i]&255]};var F$2,Q$2,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$1(){var _u;_u=new Date().getTime(),Q$2[V$1++]^=255&_u,Q$2[V$1++]^=_u>>8&255,Q$2[V$1++]^=_u>>16&255,Q$2[V$1++]^=_u>>24&255,V$1>=256&&(V$1-=256)}if(Q$2==null){var H$2;if(Q$2=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$2=window.crypto||window.msCrypto;if(q$2.getRandomValues){var z$1=new Uint8Array(32);for(q$2.getRandomValues(z$1),H$2=0;H$2<32;++H$2)Q$2[V$1++]=z$1[H$2]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$1=window.crypto.random(32);for(H$2=0;H$2<K$1.length;++H$2)Q$2[V$1++]=255&K$1.charCodeAt(H$2)}}for(;V$1<256;)H$2=Math.floor(65536*Math.random()),Q$2[V$1++]=H$2>>>8,Q$2[V$1++]=255&H$2;V$1=0,_$1()}function U$1(){if(F$2==null){for(_$1(),(F$2=new N$2).init(Q$2),V$1=0;V$1<Q$2.length;++V$1)Q$2[V$1]=0;V$1=0}return F$2.next()}function j$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$2(_u,$u){return new c$2(_u,$u)}function W$3(_u,$u,Ru){for(var Ou="",Fu=0;Ou.length<$u;)Ou+=Ru(String.fromCharCode.apply(String,_u.concat([(4278190080&Fu)>>24,(16711680&Fu)>>16,(65280&Fu)>>8,255&Fu]))),Fu+=1;return Ou}function X$2(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$1(_u,$u,Ru){for(var Ou="",Fu=0;Ou.length<$u;)Ou+=Ru(_u+String.fromCharCode.apply(String,[(4278190080&Fu)>>24,(16711680&Fu)>>16,(65280&Fu)>>8,255&Fu])),Fu+=1;return Ou}function Z$1(_u){for(var $u="",Ru=0;Ru<_u.length;Ru++){var Ou=_u[Ru].toString(16);Ou.length==1&&(Ou="0"+Ou),$u+=Ou}return $u}function J$1(_u){return Z$1(function($u){for(var Ru=new Array,Ou=0;Ou<$u.length;Ou++)Ru[Ou]=$u.charCodeAt(Ou);return Ru}(_u))}function $$1(_u){return _u.length%4==2?_u+="==":_u.length%4==3&&(_u+="="),_u=(_u=_u.replace(/-/g,"+")).replace(/_/g,"/")}function ee(_u){return _u.length%2==1&&(_u="0"+_u),function($u){return($u=($u=$u.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$2(_u))}function te(_u){return O$2($$1(_u))}function ie$1(_u){return function($u){return $u.replace(/%/g,"")}(function($u){for(var Ru=encodeURIComponent($u),Ou="",Fu=0;Fu<Ru.length;Fu++)Ru[Fu]=="%"?(Ou+=Ru.substr(Fu,3),Fu+=2):Ou=Ou+"%"+J$1(Ru[Fu]);return Ou}(_u))}function ne(_u){return decodeURIComponent(function($u){return $u.replace(/(..)/g,"%$1")}(_u))}function re$1(_u){for(var $u="",Ru=0;Ru<_u.length-1;Ru+=2)$u+=String.fromCharCode(parseInt(_u.substr(Ru,2),16));return $u}function oe$1(_u){for(var $u="",Ru=0;Ru<_u.length;Ru++)$u+=("0"+_u.charCodeAt(Ru).toString(16)).slice(-2);return $u}function se$1(_u){var $u=function(Ru){return L$2(Ru)}(_u).replace(/(.{64})/g,`$1\r
`);return $u=$u.replace(/\r\n$/,"")}function ae$1(_u,$u){return"-----BEGIN "+$u+`-----\r
`+se$1(_u)+`\r
-----END `+$u+`-----\r
`}function le(_u,$u){if(_u.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+$u;return function(Ru){return O$2(Ru.replace(/[^0-9A-Za-z\/+=]*/g,""))}(_u=$u!==void 0?(_u=_u.replace(new RegExp("^[^]*-----BEGIN "+$u+"-----"),"")).replace(new RegExp("-----END "+$u+"-----[^]*$"),""):(_u=_u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue$1(_u){var $u="malformed hex value";if(!_u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw $u;if(_u.length!=8)return _u.length==32?function(Ru){if(!Ru.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Ou=(Ru=Ru.toLowerCase()).match(/.{1,4}/g),Fu=0;Fu<8;Fu++)Ou[Fu]=Ou[Fu].replace(/^0+/,""),Ou[Fu]==""&&(Ou[Fu]="0");var Nu=(Ru=":"+Ou.join(":")+":").match(/:(0:){2,}/g);if(Nu===null)return Ru.slice(1,-1);var Vu="";for(Fu=0;Fu<Nu.length;Fu++)Nu[Fu].length>Vu.length&&(Vu=Nu[Fu]);return(Ru=Ru.replace(Vu,"::")).slice(1,-1)}(_u):_u;try{return parseInt(_u.substr(0,2),16)+"."+parseInt(_u.substr(2,2),16)+"."+parseInt(_u.substr(4,2),16)+"."+parseInt(_u.substr(6,2),16)}catch{throw $u}}function he(_u){return _u.match(/.{4}/g).map(function($u){var Ru=parseInt($u.substr(0,2),16),Ou=parseInt($u.substr(2),16);if(Ru==0&Ou<128)return String.fromCharCode(Ou);if(Ru<8){var Fu=128|63&Ou;return ne((192|(7&Ru)<<3|(192&Ou)>>6).toString(16)+Fu.toString(16))}Fu=128|(15&Ru)<<2|(192&Ou)>>6;var Nu=128|63&Ou;return ne((224|(240&Ru)>>4).toString(16)+Fu.toString(16)+Nu.toString(16))}).join("")}function ce$1(_u){return!(_u.length%2!=0||!_u.match(/^[0-9a-f]+$/)&&!_u.match(/^[0-9A-F]+$/))}function de$1(_u){return _u.length%2==1?"0"+_u:_u.substr(0,1)>"7"?"00"+_u:_u}j$1.prototype.nextBytes=function(_u){var $u;for($u=0;$u<_u.length;++$u)_u[$u]=U$1()},X$2.prototype.doPublic=function(_u){return _u.modPowInt(this.e,this.n)},X$2.prototype.setPublic=function(_u,$u){if(this.isPublic=!0,this.isPrivate=!1,typeof _u!="string")this.n=_u,this.e=$u;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA public key";this.n=G$2(_u,16),this.e=parseInt($u,16)}},X$2.prototype.encrypt=function(_u){var $u=function(Fu,Nu){if(Nu<Fu.length+11)throw"Message too long for RSA";for(var Vu=new Array,Gu=Fu.length-1;Gu>=0&&Nu>0;){var Uu=Fu.charCodeAt(Gu--);Uu<128?Vu[--Nu]=Uu:Uu>127&&Uu<2048?(Vu[--Nu]=63&Uu|128,Vu[--Nu]=Uu>>6|192):(Vu[--Nu]=63&Uu|128,Vu[--Nu]=Uu>>6&63|128,Vu[--Nu]=Uu>>12|224)}Vu[--Nu]=0;for(var Hu=new j$1,Wu=new Array;Nu>2;){for(Wu[0]=0;Wu[0]==0;)Hu.nextBytes(Wu);Vu[--Nu]=Wu[0]}return Vu[--Nu]=2,Vu[--Nu]=0,new c$2(Vu)}(_u,this.n.bitLength()+7>>3);if($u==null)return null;var Ru=this.doPublic($u);if(Ru==null)return null;var Ou=Ru.toString(16);return(1&Ou.length)==0?Ou:"0"+Ou},X$2.prototype.encryptOAEP=function(_u,$u,Ru){var Ou=function(Vu,Gu,Uu,Hu){var Wu=l$3.crypto.MessageDigest,Qu=l$3.crypto.Util,qu=null;if(Uu||(Uu="sha1"),typeof Uu=="string"&&(qu=Wu.getCanonicalAlgName(Uu),Hu=Wu.getHashLength(qu),Uu=function(ep){return re$1(Qu.hashHex(oe$1(ep),qu))}),Vu.length+2*Hu+2>Gu)throw"Message too long for RSA";var Ku,Yu="";for(Ku=0;Ku<Gu-Vu.length-2*Hu-2;Ku+=1)Yu+="\0";var _c=Uu("")+Yu+""+Vu,Ju=new Array(Hu);new j$1().nextBytes(Ju);var Xu=W$3(Ju,_c.length,Uu),Zu=[];for(Ku=0;Ku<_c.length;Ku+=1)Zu[Ku]=_c.charCodeAt(Ku)^Xu.charCodeAt(Ku);var Xc=W$3(Zu,Ju.length,Uu),_h=[0];for(Ku=0;Ku<Ju.length;Ku+=1)_h[Ku+1]=Ju[Ku]^Xc.charCodeAt(Ku);return new c$2(_h.concat(Zu))}(_u,this.n.bitLength()+7>>3,$u,Ru);if(Ou==null)return null;var Fu=this.doPublic(Ou);if(Fu==null)return null;var Nu=Fu.toString(16);return(1&Nu.length)==0?Nu:"0"+Nu},X$2.prototype.type="RSA",X$2.prototype.doPrivate=function(_u){if(this.p==null||this.q==null)return _u.modPow(this.d,this.n);for(var $u=_u.mod(this.p).modPow(this.dmp1,this.p),Ru=_u.mod(this.q).modPow(this.dmq1,this.q);$u.compareTo(Ru)<0;)$u=$u.add(this.p);return $u.subtract(Ru).multiply(this.coeff).mod(this.p).multiply(this.q).add(Ru)},X$2.prototype.setPrivate=function(_u,$u,Ru){if(this.isPrivate=!0,typeof _u!="string")this.n=_u,this.e=$u,this.d=Ru;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key";this.n=G$2(_u,16),this.e=parseInt($u,16),this.d=G$2(Ru,16)}},X$2.prototype.setPrivateEx=function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){if(this.isPrivate=!0,this.isPublic=!1,_u==null)throw"RSASetPrivateEx N == null";if($u==null)throw"RSASetPrivateEx E == null";if(_u.length==0)throw"RSASetPrivateEx N.length == 0";if($u.length==0)throw"RSASetPrivateEx E.length == 0";if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$2(_u,16),this.e=parseInt($u,16),this.d=G$2(Ru,16),this.p=G$2(Ou,16),this.q=G$2(Fu,16),this.dmp1=G$2(Nu,16),this.dmq1=G$2(Vu,16),this.coeff=G$2(Gu,16)},X$2.prototype.generate=function(_u,$u){var Ru=new j$1,Ou=_u>>1;this.e=parseInt($u,16);for(var Fu=new c$2($u,16);;){for(;this.p=new c$2(_u-Ou,1,Ru),this.p.subtract(c$2.ONE).gcd(Fu).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Ou,1,Ru),this.q.subtract(c$2.ONE).gcd(Fu).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Nu=this.p;this.p=this.q,this.q=Nu}var Vu=this.p.subtract(c$2.ONE),Gu=this.q.subtract(c$2.ONE),Uu=Vu.multiply(Gu);if(Uu.gcd(Fu).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==_u)){this.d=Fu.modInverse(Uu),this.dmp1=this.d.mod(Vu),this.dmq1=this.d.mod(Gu),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$2.prototype.decrypt=function(_u){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var $u=G$2(_u,16),Ru=this.doPrivate($u);return Ru==null?null:function(Ou,Fu){for(var Nu=Ou.toByteArray(),Vu=0;Vu<Nu.length&&Nu[Vu]==0;)++Vu;if(Nu.length-Vu!=Fu-1||Nu[Vu]!=2)return null;for(++Vu;Nu[Vu]!=0;)if(++Vu>=Nu.length)return null;for(var Gu="";++Vu<Nu.length;){var Uu=255&Nu[Vu];Uu<128?Gu+=String.fromCharCode(Uu):Uu>191&&Uu<224?(Gu+=String.fromCharCode((31&Uu)<<6|63&Nu[Vu+1]),++Vu):(Gu+=String.fromCharCode((15&Uu)<<12|(63&Nu[Vu+1])<<6|63&Nu[Vu+2]),Vu+=2)}return Gu}(Ru,this.n.bitLength()+7>>3)},X$2.prototype.decryptOAEP=function(_u,$u,Ru){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Ou=G$2(_u,16),Fu=this.doPrivate(Ou);return Fu==null?null:function(Nu,Vu,Gu,Uu){var Hu=l$3.crypto.MessageDigest,Wu=l$3.crypto.Util,Qu=null;for(Gu||(Gu="sha1"),typeof Gu=="string"&&(Qu=Hu.getCanonicalAlgName(Gu),Uu=Hu.getHashLength(Qu),Gu=function(_h){return re$1(Wu.hashHex(oe$1(_h),Qu))}),Nu=Nu.toByteArray(),qu=0;qu<Nu.length;qu+=1)Nu[qu]&=255;for(;Nu.length<Vu;)Nu.unshift(0);if((Nu=String.fromCharCode.apply(String,Nu)).length<2*Uu+2)throw"Cipher too short";var qu,Ku=Nu.substr(1,Uu),Yu=Nu.substr(Uu+1),_c=Y$1(Yu,Uu,Gu),Ju=[];for(qu=0;qu<Ku.length;qu+=1)Ju[qu]=Ku.charCodeAt(qu)^_c.charCodeAt(qu);var Xu=Y$1(String.fromCharCode.apply(String,Ju),Nu.length-Uu,Gu),Zu=[];for(qu=0;qu<Yu.length;qu+=1)Zu[qu]=Yu.charCodeAt(qu)^Xu.charCodeAt(qu);if((Zu=String.fromCharCode.apply(String,Zu)).substr(0,Uu)!==Gu(""))throw"Hash mismatch";var Xc=(Zu=Zu.substr(Uu)).indexOf("");if((Xc!=-1?Zu.substr(0,Xc).lastIndexOf("\0"):-1)+1!=Xc)throw"Malformed data";return Zu.substr(Xc+1)}(Fu,this.n.bitLength()+7>>3,$u,Ru)},l$3.lang!==void 0&&l$3.lang||(l$3.lang={}),l$3.lang.String=function(){},l$3.lang.String.isInteger=function(_u){return!!_u.match(/^[0-9]+$/)||!!_u.match(/^-[0-9]+$/)},l$3.lang.String.isHex=function(_u){return ce$1(_u)},l$3.lang.String.isBase64=function(_u){return!(!(_u=_u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||_u.length%4!=0)},l$3.lang.String.isBase64URL=function(_u){return!_u.match(/[+/=]/)&&(_u=$$1(_u),l$3.lang.String.isBase64(_u))},l$3.lang.String.isIntegerArray=function(_u){return!!(_u=_u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$3.lang.String.isPrintable=function(_u){return _u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$3.lang.String.isIA5=function(_u){return _u.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$3.lang.String.isMail=function(_u){return _u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe$1=function(_u,$u,Ru){return Ru==null&&(Ru="0"),_u.length>=$u?_u:new Array($u-_u.length+1).join(Ru)+_u};function fe$1(_u,$u){var Ru=function(){};Ru.prototype=$u.prototype,_u.prototype=new Ru,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u)}l$3.crypto!==void 0&&l$3.crypto||(l$3.crypto={}),l$3.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(_u,$u){if(this.DIGESTINFOHEAD[$u]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+$u;return this.DIGESTINFOHEAD[$u]+_u},this.getPaddedDigestInfoHex=function(_u,$u,Ru){var Ou=this.getDigestInfoHex(_u,$u),Fu=Ru/4;if(Ou.length+22>Fu)throw"key is too short for SigAlg: keylen="+Ru+","+$u;for(var Nu="0001",Vu="00"+Ou,Gu="",Uu=Fu-Nu.length-Vu.length,Hu=0;Hu<Uu;Hu+=2)Gu+="ff";return Nu+Gu+Vu},this.hashString=function(_u,$u){return new l$3.crypto.MessageDigest({alg:$u}).digestString(_u)},this.hashHex=function(_u,$u){return new l$3.crypto.MessageDigest({alg:$u}).digestHex(_u)},this.sha1=function(_u){return this.hashString(_u,"sha1")},this.sha256=function(_u){return this.hashString(_u,"sha256")},this.sha256Hex=function(_u){return this.hashHex(_u,"sha256")},this.sha512=function(_u){return this.hashString(_u,"sha512")},this.sha512Hex=function(_u){return this.hashHex(_u,"sha512")},this.isKey=function(_u){return _u instanceof X$2||_u instanceof l$3.crypto.DSA||_u instanceof l$3.crypto.ECDSA}},l$3.crypto.Util.md5=function(_u){return new l$3.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.ripemd160=function(_u){return new l$3.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(_u)},l$3.crypto.Util.SECURERANDOMGEN=new j$1,l$3.crypto.Util.getRandomHexOfNbytes=function(_u){var $u=new Array(_u);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes($u),Z$1($u)},l$3.crypto.Util.getRandomBigIntegerOfNbytes=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbytes(_u),16)},l$3.crypto.Util.getRandomHexOfNbits=function(_u){var $u=_u%8,Ru=new Array((_u-$u)/8+1);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Ru),Ru[0]=(255<<$u&255^255)&Ru[0],Z$1(Ru)},l$3.crypto.Util.getRandomBigIntegerOfNbits=function(_u){return new c$2(l$3.crypto.Util.getRandomHexOfNbits(_u),16)},l$3.crypto.Util.getRandomBigIntegerZeroToMax=function(_u){for(var $u=_u.bitLength();;){var Ru=l$3.crypto.Util.getRandomBigIntegerOfNbits($u);if(_u.compareTo(Ru)!=-1)return Ru}},l$3.crypto.Util.getRandomBigIntegerMinToMax=function(_u,$u){var Ru=_u.compareTo($u);if(Ru==1)throw"biMin is greater than biMax";if(Ru==0)return _u;var Ou=$u.subtract(_u);return l$3.crypto.Util.getRandomBigIntegerZeroToMax(Ou).add(_u)},l$3.crypto.MessageDigest=function(_u){this.setAlgAndProvider=function($u,Ru){if(($u=l$3.crypto.MessageDigest.getCanonicalAlgName($u))!==null&&Ru===void 0&&(Ru=l$3.crypto.Util.DEFAULTPROVIDER[$u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf($u)!=-1&&Ru=="cryptojs"){try{this.md=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[$u].create()}catch(Ou){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Ou}this.updateString=function(Ou){this.md.update(Ou)},this.updateHex=function(Ou){var Fu=h$2.enc.Hex.parse(Ou);this.md.update(Fu)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Ou){return this.updateString(Ou),this.digest()},this.digestHex=function(Ou){return this.updateHex(Ou),this.digest()}}if(":sha256:".indexOf($u)!=-1&&Ru=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Ou){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Ou}this.updateString=function(Ou){this.md.update(Ou)},this.updateHex=function(Ou){var Fu=sjcl.codec.hex.toBits(Ou);this.md.update(Fu)},this.digest=function(){var Ou=this.md.finalize();return sjcl.codec.hex.fromBits(Ou)},this.digestString=function(Ou){return this.updateString(Ou),this.digest()},this.digestHex=function(Ou){return this.updateHex(Ou),this.digest()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},_u!==void 0&&_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$3.crypto.MessageDigest.getCanonicalAlgName=function(_u){return typeof _u=="string"&&(_u=(_u=_u.toLowerCase()).replace(/-/,"")),_u},l$3.crypto.MessageDigest.getHashLength=function(_u){var $u=l$3.crypto.MessageDigest,Ru=$u.getCanonicalAlgName(_u);if($u.HASHLENGTH[Ru]===void 0)throw"not supported algorithm: "+_u;return $u.HASHLENGTH[Ru]},l$3.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$3.crypto.Mac=function(_u){this.setAlgAndProvider=function($u,Ru){if(($u=$u.toLowerCase())==null&&($u="hmacsha1"),($u=$u.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+$u;Ru===void 0&&(Ru=l$3.crypto.Util.DEFAULTPROVIDER[$u]),this.algProv=$u+"/"+Ru;var Ou=$u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Ou)!=-1&&Ru=="cryptojs"){try{var Fu=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Ou];this.mac=h$2.algo.HMAC.create(Fu,this.pass)}catch(Nu){throw"setAlgAndProvider hash alg set fail hashAlg="+Ou+"/"+Nu}this.updateString=function(Nu){this.mac.update(Nu)},this.updateHex=function(Nu){var Vu=h$2.enc.Hex.parse(Nu);this.mac.update(Vu)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Nu){return this.updateString(Nu),this.doFinal()},this.doFinalHex=function(Nu){return this.updateHex(Nu),this.doFinal()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function($u){if(typeof $u=="string"){var Ru=$u;return $u.length%2!=1&&$u.match(/^[0-9A-Fa-f]+$/)||(Ru=oe$1($u)),void(this.pass=h$2.enc.Hex.parse(Ru))}if(typeof $u!="object")throw"KJUR.crypto.Mac unsupported password type: "+$u;if(Ru=null,$u.hex!==void 0){if($u.hex.length%2!=0||!$u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+$u.hex;Ru=$u.hex}if($u.utf8!==void 0&&(Ru=ie$1($u.utf8)),$u.rstr!==void 0&&(Ru=oe$1($u.rstr)),$u.b64!==void 0&&(Ru=O$2($u.b64)),$u.b64u!==void 0&&(Ru=te($u.b64u)),Ru==null)throw"KJUR.crypto.Mac unsupported password type: "+$u;this.pass=h$2.enc.Hex.parse(Ru)},_u!==void 0&&(_u.pass!==void 0&&this.setPassword(_u.pass),_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$3.crypto.Signature=function(_u){var $u=null;if(this._setAlgNames=function(){var Ru=this.algName.match(/^(.+)with(.+)$/);Ru&&(this.mdAlgName=Ru[1].toLowerCase(),this.pubkeyAlgName=Ru[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Ru,Ou){for(var Fu="",Nu=Ou/4-Ru.length,Vu=0;Vu<Nu;Vu++)Fu+="0";return Fu+Ru},this.setAlgAndProvider=function(Ru,Ou){if(this._setAlgNames(),Ou!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ou);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$3.crypto.MessageDigest({alg:this.mdAlgName})}catch(Fu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Fu)}this.init=function(Fu,Nu){var Vu=null;try{Vu=Nu===void 0?Ee.getKey(Fu):Ee.getKey(Fu,Nu)}catch(Gu){throw"init failed:"+Gu}if(Vu.isPrivate===!0)this.prvKey=Vu,this.state="SIGN";else{if(Vu.isPublic!==!0)throw"init failed.:"+Vu;this.pubKey=Vu,this.state="VERIFY"}},this.updateString=function(Fu){this.md.updateString(Fu)},this.updateHex=function(Fu){this.md.updateHex(Fu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.prvKey=new l$3.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$2&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$2&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$3.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$3.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Fu){return this.updateString(Fu),this.sign()},this.signHex=function(Fu){return this.updateHex(Fu),this.sign()},this.verify=function(Fu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.pubKey=new l$3.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$2&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Fu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$2&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Fu);if(l$3.crypto.ECDSA!==void 0&&this.pubKey instanceof l$3.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Fu);if(l$3.crypto.DSA!==void 0&&this.pubKey instanceof l$3.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Fu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Ru,Ou){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Ru){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Ru){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Ru){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Ru){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Ru){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=_u,_u!==void 0&&(_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0?this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=_u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),_u.psssaltlen!==void 0&&(this.pssSaltLen=_u.psssaltlen),_u.prvkeypem!==void 0)){if(_u.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{$u=Ee.getKey(_u.prvkeypem),this.init($u)}catch(Ru){throw"fatal error to load pem private key: "+Ru}}},l$3.crypto.Cipher=function(_u){},l$3.crypto.Cipher.encrypt=function(_u,$u,Ru){if($u instanceof X$2&&$u.isPublic){var Ou=l$3.crypto.Cipher.getAlgByKeyAndName($u,Ru);if(Ou==="RSA")return $u.encrypt(_u);if(Ou==="RSAOAEP")return $u.encryptOAEP(_u,"sha1");var Fu=Ou.match(/^RSAOAEP(\d+)$/);if(Fu!==null)return $u.encryptOAEP(_u,"sha"+Fu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Ru}throw"Cipher.encrypt: unsupported key or algorithm"},l$3.crypto.Cipher.decrypt=function(_u,$u,Ru){if($u instanceof X$2&&$u.isPrivate){var Ou=l$3.crypto.Cipher.getAlgByKeyAndName($u,Ru);if(Ou==="RSA")return $u.decrypt(_u);if(Ou==="RSAOAEP")return $u.decryptOAEP(_u,"sha1");var Fu=Ou.match(/^RSAOAEP(\d+)$/);if(Fu!==null)return $u.decryptOAEP(_u,"sha"+Fu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Ru}throw"Cipher.decrypt: unsupported key or algorithm"},l$3.crypto.Cipher.getAlgByKeyAndName=function(_u,$u){if(_u instanceof X$2){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf($u)!=-1)return $u;if($u==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+$u}throw"getAlgByKeyAndName: not supported algorithm name: "+$u},l$3.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae$1,ge$1,me$1,ve$1,ye,be,xe,we,Ee=(Ae$1=function(_u,$u,Ru){return ge$1(h$2.AES,_u,$u,Ru)},ge$1=function(_u,$u,Ru,Ou){var Fu=h$2.enc.Hex.parse($u),Nu=h$2.enc.Hex.parse(Ru),Vu=h$2.enc.Hex.parse(Ou),Gu={};Gu.key=Nu,Gu.iv=Vu,Gu.ciphertext=Fu;var Uu=_u.decrypt(Gu,Nu,{iv:Vu});return h$2.enc.Hex.stringify(Uu)},me$1=function(_u,$u,Ru){return ve$1(h$2.AES,_u,$u,Ru)},ve$1=function(_u,$u,Ru,Ou){var Fu=h$2.enc.Hex.parse($u),Nu=h$2.enc.Hex.parse(Ru),Vu=h$2.enc.Hex.parse(Ou),Gu=_u.encrypt(Fu,Nu,{iv:Vu}),Uu=h$2.enc.Hex.parse(Gu.toString());return h$2.enc.Base64.stringify(Uu)},ye={"AES-256-CBC":{proc:Ae$1,eproc:me$1,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae$1,eproc:me$1,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae$1,eproc:me$1,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(_u,$u,Ru){return ge$1(h$2.TripleDES,_u,$u,Ru)},eproc:function(_u,$u,Ru){return ve$1(h$2.TripleDES,_u,$u,Ru)},keylen:24,ivlen:8},"DES-CBC":{proc:function(_u,$u,Ru){return ge$1(h$2.DES,_u,$u,Ru)},eproc:function(_u,$u,Ru){return ve$1(h$2.DES,_u,$u,Ru)},keylen:8,ivlen:8}},be=function(_u){var $u={},Ru=_u.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ru&&($u.cipher=Ru[1],$u.ivsalt=Ru[2]);var Ou=_u.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ou&&($u.type=Ou[1]);var Fu=-1,Nu=0;_u.indexOf(`\r
\r
`)!=-1&&(Fu=_u.indexOf(`\r
\r
`),Nu=2),_u.indexOf(`

`)!=-1&&(Fu=_u.indexOf(`

`),Nu=1);var Vu=_u.indexOf("-----END");if(Fu!=-1&&Vu!=-1){var Gu=_u.substring(Fu+2*Nu,Vu-Nu);Gu=Gu.replace(/\s+/g,""),$u.data=Gu}return $u},xe=function(_u,$u,Ru){for(var Ou=Ru.substring(0,16),Fu=h$2.enc.Hex.parse(Ou),Nu=h$2.enc.Utf8.parse($u),Vu=ye[_u].keylen+ye[_u].ivlen,Gu="",Uu=null;;){var Hu=h$2.algo.MD5.create();if(Uu!=null&&Hu.update(Uu),Hu.update(Nu),Hu.update(Fu),Uu=Hu.finalize(),(Gu+=h$2.enc.Hex.stringify(Uu)).length>=2*Vu)break}var Wu={};return Wu.keyhex=Gu.substr(0,2*ye[_u].keylen),Wu.ivhex=Gu.substr(2*ye[_u].keylen,2*ye[_u].ivlen),Wu},we=function(_u,$u,Ru,Ou){var Fu=h$2.enc.Base64.parse(_u),Nu=h$2.enc.Hex.stringify(Fu);return(0,ye[$u].proc)(Nu,Ru,Ou)},{version:"1.0.0",parsePKCS5PEM:function(_u){return be(_u)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(_u,$u,Ru){return xe(_u,$u,Ru)},decryptKeyB64:function(_u,$u,Ru,Ou){return we(_u,$u,Ru,Ou)},getDecryptedKeyHex:function(_u,$u){var Ru=be(_u),Ou=Ru.cipher,Fu=Ru.ivsalt,Nu=Ru.data,Vu=xe(Ou,$u,Fu).keyhex;return we(Nu,Ou,Vu,Fu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(_u,$u,Ru,Ou,Fu){var Nu="";if(Ou!==void 0&&Ou!=null||(Ou="AES-256-CBC"),ye[Ou]===void 0)throw"KEYUTIL unsupported algorithm: "+Ou;Fu!==void 0&&Fu!=null||(Fu=function(Gu){var Uu=h$2.lib.WordArray.random(Gu);return h$2.enc.Hex.stringify(Uu)}(ye[Ou].ivlen).toUpperCase());var Vu=function(Gu,Uu,Hu,Wu){return(0,ye[Uu].eproc)(Gu,Hu,Wu)}($u,Ou,xe(Ou,Ru,Fu).keyhex,Fu);return Nu="-----BEGIN "+_u+` PRIVATE KEY-----\r
`,Nu+=`Proc-Type: 4,ENCRYPTED\r
`,Nu+="DEK-Info: "+Ou+","+Fu+`\r
`,Nu+=`\r
`,Nu+=Vu.replace(/(.{64})/g,`$1\r
`),Nu+=`\r
-----END `+_u+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(_u){var $u=Me,Ru=$u.getChildIdx,Ou=$u.getV,Fu={},Nu=Ru(_u,0);if(Nu.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Nu.length;Fu.ciphertext=Ou(_u,Nu[1]);var Vu=Ru(_u,Nu[0]);if(Vu.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Vu.length;if(Ou(_u,Vu[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Gu=Ru(_u,Vu[1]);if(Vu.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Gu.length;var Uu=Ru(_u,Gu[1]);if(Uu.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Uu.length;if(Ou(_u,Uu[0])!="2a864886f70d0307")throw"this only supports TripleDES";Fu.encryptionSchemeAlg="TripleDES",Fu.encryptionSchemeIV=Ou(_u,Uu[1]);var Hu=Ru(_u,Gu[0]);if(Hu.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Hu.length;if(Ou(_u,Hu[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Wu=Ru(_u,Hu[1]);if(Wu.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Wu.length;Fu.pbkdf2Salt=Ou(_u,Wu[0]);var Qu=Ou(_u,Wu[1]);try{Fu.pbkdf2Iter=parseInt(Qu,16)}catch{throw"malformed format pbkdf2Iter: "+Qu}return Fu},getPBKDF2KeyHexFromParam:function(_u,$u){var Ru=h$2.enc.Hex.parse(_u.pbkdf2Salt),Ou=_u.pbkdf2Iter,Fu=h$2.PBKDF2($u,Ru,{keySize:6,iterations:Ou});return h$2.enc.Hex.stringify(Fu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(_u,$u){var Ru=le(_u,"ENCRYPTED PRIVATE KEY"),Ou=this.parseHexOfEncryptedPKCS8(Ru),Fu=Ee.getPBKDF2KeyHexFromParam(Ou,$u),Nu={};Nu.ciphertext=h$2.enc.Hex.parse(Ou.ciphertext);var Vu=h$2.enc.Hex.parse(Fu),Gu=h$2.enc.Hex.parse(Ou.encryptionSchemeIV),Uu=h$2.TripleDES.decrypt(Nu,Vu,{iv:Gu});return h$2.enc.Hex.stringify(Uu)},getKeyFromEncryptedPKCS8PEM:function(_u,$u){var Ru=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(_u,$u);return this.getKeyFromPlainPrivatePKCS8Hex(Ru)},parsePlainPrivatePKCS8Hex:function(_u){var $u=Me,Ru=$u.getChildIdx,Ou=$u.getV,Fu={algparam:null};if(_u.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Nu=Ru(_u,0);if(Nu.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(_u.substr(Nu[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Vu=Ru(_u,Nu[1]);if(Vu.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(_u.substr(Vu[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Fu.algoid=Ou(_u,Vu[0]),_u.substr(Vu[1],2)=="06"&&(Fu.algparam=Ou(_u,Vu[1])),_u.substr(Nu[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Fu.keyidx=$u.getVidx(_u,Nu[2]),Fu},getKeyFromPlainPrivatePKCS8PEM:function(_u){var $u=le(_u,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex($u)},getKeyFromPlainPrivatePKCS8Hex:function(_u){var $u,Ru=this.parsePlainPrivatePKCS8Hex(_u);if(Ru.algoid=="2a864886f70d010101")$u=new X$2;else if(Ru.algoid=="2a8648ce380401")$u=new l$3.crypto.DSA;else{if(Ru.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";$u=new l$3.crypto.ECDSA}return $u.readPKCS8PrvKeyHex(_u),$u},_getKeyFromPublicPKCS8Hex:function(_u){var $u,Ru=Me.getVbyList(_u,0,[0,0],"06");if(Ru==="2a864886f70d010101")$u=new X$2;else if(Ru==="2a8648ce380401")$u=new l$3.crypto.DSA;else{if(Ru!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";$u=new l$3.crypto.ECDSA}return $u.readPKCS8PubKeyHex(_u),$u},parsePublicRawRSAKeyHex:function(_u){var $u=Me,Ru=$u.getChildIdx,Ou=$u.getV,Fu={};if(_u.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Nu=Ru(_u,0);if(Nu.length!=2)throw"malformed RSA key(code:002)";if(_u.substr(Nu[0],2)!="02")throw"malformed RSA key(code:003)";if(Fu.n=Ou(_u,Nu[0]),_u.substr(Nu[1],2)!="02")throw"malformed RSA key(code:004)";return Fu.e=Ou(_u,Nu[1]),Fu},parsePublicPKCS8Hex:function(_u){var $u=Me,Ru=$u.getChildIdx,Ou=$u.getV,Fu={algparam:null},Nu=Ru(_u,0);if(Nu.length!=2)throw"outer DERSequence shall have 2 elements: "+Nu.length;var Vu=Nu[0];if(_u.substr(Vu,2)!="30")throw"malformed PKCS8 public key(code:001)";var Gu=Ru(_u,Vu);if(Gu.length!=2)throw"malformed PKCS8 public key(code:002)";if(_u.substr(Gu[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Fu.algoid=Ou(_u,Gu[0]),_u.substr(Gu[1],2)=="06"?Fu.algparam=Ou(_u,Gu[1]):_u.substr(Gu[1],2)=="30"&&(Fu.algparam={},Fu.algparam.p=$u.getVbyList(_u,Gu[1],[0],"02"),Fu.algparam.q=$u.getVbyList(_u,Gu[1],[1],"02"),Fu.algparam.g=$u.getVbyList(_u,Gu[1],[2],"02")),_u.substr(Nu[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Fu.key=Ou(_u,Nu[1]).substr(2),Fu}});Ee.getKey=function(_u,$u,Ru){var Ou=(Ju=Me).getChildIdx;Ju.getV;var Fu=Ju.getVbyList,Nu=l$3.crypto,Vu=Nu.ECDSA,Gu=Nu.DSA,Uu=X$2,Hu=le,Wu=Ee;if(Uu!==void 0&&_u instanceof Uu||Vu!==void 0&&_u instanceof Vu||Gu!==void 0&&_u instanceof Gu)return _u;if(_u.curve!==void 0&&_u.xy!==void 0&&_u.d===void 0)return new Vu({pub:_u.xy,curve:_u.curve});if(_u.curve!==void 0&&_u.d!==void 0)return new Vu({prv:_u.d,curve:_u.curve});if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(tp=new Uu).setPublic(_u.n,_u.e),tp;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.co!==void 0&&_u.qi===void 0)return(tp=new Uu).setPrivateEx(_u.n,_u.e,_u.d,_u.p,_u.q,_u.dp,_u.dq,_u.co),tp;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p===void 0)return(tp=new Uu).setPrivate(_u.n,_u.e,_u.d),tp;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x===void 0)return(tp=new Gu).setPublic(_u.p,_u.q,_u.g,_u.y),tp;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x!==void 0)return(tp=new Gu).setPrivate(_u.p,_u.q,_u.g,_u.y,_u.x),tp;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(tp=new Uu).setPublic(te(_u.n),te(_u.e)),tp;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.qi!==void 0)return(tp=new Uu).setPrivateEx(te(_u.n),te(_u.e),te(_u.d),te(_u.p),te(_u.q),te(_u.dp),te(_u.dq),te(_u.qi)),tp;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0)return(tp=new Uu).setPrivate(te(_u.n),te(_u.e),te(_u.d)),tp;if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d===void 0){var Qu=(_f=new Vu({curve:_u.crv})).ecparams.keylen/4,qu="04"+("0000000000"+te(_u.x)).slice(-Qu)+("0000000000"+te(_u.y)).slice(-Qu);return _f.setPublicKeyHex(qu),_f}if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d!==void 0){Qu=(_f=new Vu({curve:_u.crv})).ecparams.keylen/4,qu="04"+("0000000000"+te(_u.x)).slice(-Qu)+("0000000000"+te(_u.y)).slice(-Qu);var Ku=("0000000000"+te(_u.d)).slice(-Qu);return _f.setPublicKeyHex(qu),_f.setPrivateKeyHex(Ku),_f}if(Ru==="pkcs5prv"){var Yu,_c=_u,Ju=Me;if((Yu=Ou(_c,0)).length===9)(tp=new Uu).readPKCS5PrvKeyHex(_c);else if(Yu.length===6)(tp=new Gu).readPKCS5PrvKeyHex(_c);else{if(!(Yu.length>2&&_c.substr(Yu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(tp=new Vu).readPKCS5PrvKeyHex(_c)}return tp}if(Ru==="pkcs8prv")return tp=Wu.getKeyFromPlainPrivatePKCS8Hex(_u);if(Ru==="pkcs8pub")return Wu._getKeyFromPublicPKCS8Hex(_u);if(Ru==="x509pub")return Be.getPublicKeyFromCertHex(_u);if(_u.indexOf("-END CERTIFICATE-",0)!=-1||_u.indexOf("-END X509 CERTIFICATE-",0)!=-1||_u.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be.getPublicKeyFromCertPEM(_u);if(_u.indexOf("-END PUBLIC KEY-")!=-1){var Xu=le(_u,"PUBLIC KEY");return Wu._getKeyFromPublicPKCS8Hex(Xu)}if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Zu=Hu(_u,"RSA PRIVATE KEY");return Wu.getKey(Zu,null,"pkcs5prv")}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Xc=Fu(op=Hu(_u,"DSA PRIVATE KEY"),0,[1],"02"),_h=Fu(op,0,[2],"02"),ep=Fu(op,0,[3],"02"),np=Fu(op,0,[4],"02"),ap=Fu(op,0,[5],"02");return(tp=new Gu).setPrivate(new c$2(Xc,16),new c$2(_h,16),new c$2(ep,16),new c$2(np,16),new c$2(ap,16)),tp}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1)return Zu=Hu(_u,"EC PRIVATE KEY"),Wu.getKey(Zu,null,"pkcs5prv");if(_u.indexOf("-END PRIVATE KEY-")!=-1)return Wu.getKeyFromPlainPrivatePKCS8PEM(_u);if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var lp=Wu.getDecryptedKeyHex(_u,$u),up=new X$2;return up.readPKCS5PrvKeyHex(lp),up}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var _f,tp=Fu(op=Wu.getDecryptedKeyHex(_u,$u),0,[1],"04"),ip=Fu(op,0,[2,0],"06"),rp=Fu(op,0,[3,0],"03").substr(2);if(l$3.crypto.OID.oidhex2name[ip]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+ip;return(_f=new Vu({curve:l$3.crypto.OID.oidhex2name[ip]})).setPublicKeyHex(rp),_f.setPrivateKeyHex(tp),_f.isPublic=!1,_f}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var op;return Xc=Fu(op=Wu.getDecryptedKeyHex(_u,$u),0,[1],"02"),_h=Fu(op,0,[2],"02"),ep=Fu(op,0,[3],"02"),np=Fu(op,0,[4],"02"),ap=Fu(op,0,[5],"02"),(tp=new Gu).setPrivate(new c$2(Xc,16),new c$2(_h,16),new c$2(ep,16),new c$2(np,16),new c$2(ap,16)),tp}if(_u.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Wu.getKeyFromEncryptedPKCS8PEM(_u,$u);throw new Error("not supported argument")},Ee.generateKeypair=function(_u,$u){if(_u=="RSA"){var Ru=$u;(Vu=new X$2).generate(Ru,"10001"),Vu.isPrivate=!0,Vu.isPublic=!0;var Ou=new X$2,Fu=Vu.n.toString(16),Nu=Vu.e.toString(16);return Ou.setPublic(Fu,Nu),Ou.isPrivate=!1,Ou.isPublic=!0,(Gu={}).prvKeyObj=Vu,Gu.pubKeyObj=Ou,Gu}if(_u=="EC"){var Vu,Gu,Uu=$u,Hu=new l$3.crypto.ECDSA({curve:Uu}).generateKeyPairHex();return(Vu=new l$3.crypto.ECDSA({curve:Uu})).setPublicKeyHex(Hu.ecpubhex),Vu.setPrivateKeyHex(Hu.ecprvhex),Vu.isPrivate=!0,Vu.isPublic=!1,(Ou=new l$3.crypto.ECDSA({curve:Uu})).setPublicKeyHex(Hu.ecpubhex),Ou.isPrivate=!1,Ou.isPublic=!0,(Gu={}).prvKeyObj=Vu,Gu.pubKeyObj=Ou,Gu}throw"unknown algorithm: "+_u},Ee.getPEM=function(_u,$u,Ru,Ou,Fu,Nu){var Vu=l$3,Gu=Vu.asn1,Uu=Gu.DERObjectIdentifier,Hu=Gu.DERInteger,Wu=Gu.ASN1Util.newObject,Qu=Gu.x509.SubjectPublicKeyInfo,qu=Vu.crypto,Ku=qu.DSA,Yu=qu.ECDSA,_c=X$2;function Ju(_f){return Wu({seq:[{int:0},{int:{bigint:_f.n}},{int:_f.e},{int:{bigint:_f.d}},{int:{bigint:_f.p}},{int:{bigint:_f.q}},{int:{bigint:_f.dmp1}},{int:{bigint:_f.dmq1}},{int:{bigint:_f.coeff}}]})}function Xu(_f){return Wu({seq:[{int:1},{octstr:{hex:_f.prvKeyHex}},{tag:["a0",!0,{oid:{name:_f.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+_f.pubKeyHex}}]}]})}function Zu(_f){return Wu({seq:[{int:0},{int:{bigint:_f.p}},{int:{bigint:_f.q}},{int:{bigint:_f.g}},{int:{bigint:_f.y}},{int:{bigint:_f.x}}]})}if((_c!==void 0&&_u instanceof _c||Ku!==void 0&&_u instanceof Ku||Yu!==void 0&&_u instanceof Yu)&&_u.isPublic==1&&($u===void 0||$u=="PKCS8PUB"))return ae$1(np=new Qu(_u).getEncodedHex(),"PUBLIC KEY");if($u=="PKCS1PRV"&&_c!==void 0&&_u instanceof _c&&(Ru===void 0||Ru==null)&&_u.isPrivate==1)return ae$1(np=Ju(_u).getEncodedHex(),"RSA PRIVATE KEY");if($u=="PKCS1PRV"&&Yu!==void 0&&_u instanceof Yu&&(Ru===void 0||Ru==null)&&_u.isPrivate==1){var Xc=new Uu({name:_u.curveName}).getEncodedHex(),_h=Xu(_u).getEncodedHex(),ep="";return ep+=ae$1(Xc,"EC PARAMETERS"),ep+=ae$1(_h,"EC PRIVATE KEY")}if($u=="PKCS1PRV"&&Ku!==void 0&&_u instanceof Ku&&(Ru===void 0||Ru==null)&&_u.isPrivate==1)return ae$1(np=Zu(_u).getEncodedHex(),"DSA PRIVATE KEY");if($u=="PKCS5PRV"&&_c!==void 0&&_u instanceof _c&&Ru!==void 0&&Ru!=null&&_u.isPrivate==1){var np=Ju(_u).getEncodedHex();return Ou===void 0&&(Ou="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",np,Ru,Ou,Nu)}if($u=="PKCS5PRV"&&Yu!==void 0&&_u instanceof Yu&&Ru!==void 0&&Ru!=null&&_u.isPrivate==1)return np=Xu(_u).getEncodedHex(),Ou===void 0&&(Ou="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",np,Ru,Ou,Nu);if($u=="PKCS5PRV"&&Ku!==void 0&&_u instanceof Ku&&Ru!==void 0&&Ru!=null&&_u.isPrivate==1)return np=Zu(_u).getEncodedHex(),Ou===void 0&&(Ou="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",np,Ru,Ou,Nu);var ap=function(_f,tp){var ip=lp(_f,tp);return new Wu({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:ip.pbkdf2Salt}},{int:ip.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:ip.encryptionSchemeIV}}]}]}]},{octstr:{hex:ip.ciphertext}}]}).getEncodedHex()},lp=function(_f,tp){var ip=h$2.lib.WordArray.random(8),rp=h$2.lib.WordArray.random(8),op=h$2.PBKDF2(tp,ip,{keySize:6,iterations:100}),sp=h$2.enc.Hex.parse(_f),cp=h$2.TripleDES.encrypt(sp,op,{iv:rp})+"",hp={};return hp.ciphertext=cp,hp.pbkdf2Salt=h$2.enc.Hex.stringify(ip),hp.pbkdf2Iter=100,hp.encryptionSchemeAlg="DES-EDE3-CBC",hp.encryptionSchemeIV=h$2.enc.Hex.stringify(rp),hp};if($u=="PKCS8PRV"&&_c!=null&&_u instanceof _c&&_u.isPrivate==1){var up=Ju(_u).getEncodedHex();return np=Wu({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:up}}]}).getEncodedHex(),Ru===void 0||Ru==null?ae$1(np,"PRIVATE KEY"):ae$1(_h=ap(np,Ru),"ENCRYPTED PRIVATE KEY")}if($u=="PKCS8PRV"&&Yu!==void 0&&_u instanceof Yu&&_u.isPrivate==1)return up=new Wu({seq:[{int:1},{octstr:{hex:_u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+_u.pubKeyHex}}]}]}).getEncodedHex(),np=Wu({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:_u.curveName}}]},{octstr:{hex:up}}]}).getEncodedHex(),Ru===void 0||Ru==null?ae$1(np,"PRIVATE KEY"):ae$1(_h=ap(np,Ru),"ENCRYPTED PRIVATE KEY");if($u=="PKCS8PRV"&&Ku!==void 0&&_u instanceof Ku&&_u.isPrivate==1)return up=new Hu({bigint:_u.x}).getEncodedHex(),np=Wu({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:_u.p}},{int:{bigint:_u.q}},{int:{bigint:_u.g}}]}]},{octstr:{hex:up}}]}).getEncodedHex(),Ru===void 0||Ru==null?ae$1(np,"PRIVATE KEY"):ae$1(_h=ap(np,Ru),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(_u){var $u=le(_u,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex($u)},Ee.getKeyFromCSRHex=function(_u){var $u=Ee.parseCSRHex(_u);return Ee.getKey($u.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(_u){var $u=Me,Ru=$u.getChildIdx,Ou=$u.getTLV,Fu={},Nu=_u;if(Nu.substr(0,2)!="30")throw"malformed CSR(code:001)";var Vu=Ru(Nu,0);if(Vu.length<1)throw"malformed CSR(code:002)";if(Nu.substr(Vu[0],2)!="30")throw"malformed CSR(code:003)";var Gu=Ru(Nu,Vu[0]);if(Gu.length<3)throw"malformed CSR(code:004)";return Fu.p8pubkeyhex=Ou(Nu,Gu[2]),Fu},Ee.getKeyID=function(_u){var $u=Ee,Ru=Me;typeof _u=="string"&&_u.indexOf("BEGIN ")!=-1&&(_u=$u.getKey(_u));var Ou=le($u.getPEM(_u)),Fu=Ru.getIdxbyList(Ou,0,[1]),Nu=Ru.getV(Ou,Fu).substring(2);return l$3.crypto.Util.hashHex(Nu,"sha1")},Ee.getJWKFromKey=function(_u){var $u={};if(_u instanceof X$2&&_u.isPrivate)return $u.kty="RSA",$u.n=ee(_u.n.toString(16)),$u.e=ee(_u.e.toString(16)),$u.d=ee(_u.d.toString(16)),$u.p=ee(_u.p.toString(16)),$u.q=ee(_u.q.toString(16)),$u.dp=ee(_u.dmp1.toString(16)),$u.dq=ee(_u.dmq1.toString(16)),$u.qi=ee(_u.coeff.toString(16)),$u;if(_u instanceof X$2&&_u.isPublic)return $u.kty="RSA",$u.n=ee(_u.n.toString(16)),$u.e=ee(_u.e.toString(16)),$u;if(_u instanceof l$3.crypto.ECDSA&&_u.isPrivate){if((Ou=_u.getShortNISTPCurveName())!=="P-256"&&Ou!=="P-384")throw"unsupported curve name for JWT: "+Ou;var Ru=_u.getPublicKeyXYHex();return $u.kty="EC",$u.crv=Ou,$u.x=ee(Ru.x),$u.y=ee(Ru.y),$u.d=ee(_u.prvKeyHex),$u}if(_u instanceof l$3.crypto.ECDSA&&_u.isPublic){var Ou;if((Ou=_u.getShortNISTPCurveName())!=="P-256"&&Ou!=="P-384")throw"unsupported curve name for JWT: "+Ou;return Ru=_u.getPublicKeyXYHex(),$u.kty="EC",$u.crv=Ou,$u.x=ee(Ru.x),$u.y=ee(Ru.y),$u}throw"not supported key object"},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.ASN1Util=new function(){this.integerToByteHex=function(_u){var $u=_u.toString(16);return $u.length%2==1&&($u="0"+$u),$u},this.bigIntToMinTwosComplementsHex=function(_u){var $u=_u.toString(16);if($u.substr(0,1)!="-")$u.length%2==1?$u="0"+$u:$u.match(/^[0-7]/)||($u="00"+$u);else{var Ru=$u.substr(1).length;Ru%2==1?Ru+=1:$u.match(/^[0-7]/)||(Ru+=2);for(var Ou="",Fu=0;Fu<Ru;Fu++)Ou+="f";$u=new c$2(Ou,16).xor(_u).add(c$2.ONE).toString(16).replace(/^-/,"")}return $u},this.getPEMStringFromHex=function(_u,$u){return ae$1(_u,$u)},this.newObject=function(_u){var $u=l$3.asn1,Ru=$u.ASN1Object,Ou=$u.DERBoolean,Fu=$u.DERInteger,Nu=$u.DERBitString,Vu=$u.DEROctetString,Gu=$u.DERNull,Uu=$u.DERObjectIdentifier,Hu=$u.DEREnumerated,Wu=$u.DERUTF8String,Qu=$u.DERNumericString,qu=$u.DERPrintableString,Ku=$u.DERTeletexString,Yu=$u.DERIA5String,_c=$u.DERUTCTime,Ju=$u.DERGeneralizedTime,Xu=$u.DERVisibleString,Zu=$u.DERBMPString,Xc=$u.DERSequence,_h=$u.DERSet,ep=$u.DERTaggedObject,np=$u.ASN1Util.newObject;if(_u instanceof $u.ASN1Object)return _u;var ap=Object.keys(_u);if(ap.length!=1)throw new Error("key of param shall be only one.");var lp=ap[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+lp+":")==-1)throw new Error("undefined key: "+lp);if(lp=="bool")return new Ou(_u[lp]);if(lp=="int")return new Fu(_u[lp]);if(lp=="bitstr")return new Nu(_u[lp]);if(lp=="octstr")return new Vu(_u[lp]);if(lp=="null")return new Gu(_u[lp]);if(lp=="oid")return new Uu(_u[lp]);if(lp=="enum")return new Hu(_u[lp]);if(lp=="utf8str")return new Wu(_u[lp]);if(lp=="numstr")return new Qu(_u[lp]);if(lp=="prnstr")return new qu(_u[lp]);if(lp=="telstr")return new Ku(_u[lp]);if(lp=="ia5str")return new Yu(_u[lp]);if(lp=="utctime")return new _c(_u[lp]);if(lp=="gentime")return new Ju(_u[lp]);if(lp=="visstr")return new Xu(_u[lp]);if(lp=="bmpstr")return new Zu(_u[lp]);if(lp=="asn1")return new Ru(_u[lp]);if(lp=="seq"){for(var up=_u[lp],_f=[],tp=0;tp<up.length;tp++){var ip=np(up[tp]);_f.push(ip)}return new Xc({array:_f})}if(lp=="set"){for(up=_u[lp],_f=[],tp=0;tp<up.length;tp++)ip=np(up[tp]),_f.push(ip);return new _h({array:_f})}if(lp=="tag"){var rp=_u[lp];if(Object.prototype.toString.call(rp)==="[object Array]"&&rp.length==3){var op=np(rp[2]);return new ep({tag:rp[0],explicit:rp[1],obj:op})}return new ep(rp)}},this.jsonToASN1HEX=function(_u){return this.newObject(_u).getEncodedHex()}},l$3.asn1.ASN1Util.oidHexToInt=function(_u){for(var $u="",Ru=parseInt(_u.substr(0,2),16),Ou=($u=Math.floor(Ru/40)+"."+Ru%40,""),Fu=2;Fu<_u.length;Fu+=2){var Nu=("00000000"+parseInt(_u.substr(Fu,2),16).toString(2)).slice(-8);Ou+=Nu.substr(1,7),Nu.substr(0,1)=="0"&&($u=$u+"."+new c$2(Ou,2).toString(10),Ou="")}return $u},l$3.asn1.ASN1Util.oidIntToHex=function(_u){var $u=function(Gu){var Uu=Gu.toString(16);return Uu.length==1&&(Uu="0"+Uu),Uu},Ru=function(Gu){var Uu="",Hu=new c$2(Gu,10).toString(2),Wu=7-Hu.length%7;Wu==7&&(Wu=0);for(var Qu="",qu=0;qu<Wu;qu++)Qu+="0";for(Hu=Qu+Hu,qu=0;qu<Hu.length-1;qu+=7){var Ku=Hu.substr(qu,7);qu!=Hu.length-7&&(Ku="1"+Ku),Uu+=$u(parseInt(Ku,2))}return Uu};if(!_u.match(/^[0-9.]+$/))throw"malformed oid string: "+_u;var Ou="",Fu=_u.split("."),Nu=40*parseInt(Fu[0])+parseInt(Fu[1]);Ou+=$u(Nu),Fu.splice(0,2);for(var Vu=0;Vu<Fu.length;Vu++)Ou+=Ru(Fu[Vu]);return Ou},l$3.asn1.ASN1Object=function(_u){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var $u=this.hV.length/2,Ru=$u.toString(16);if(Ru.length%2==1&&(Ru="0"+Ru),$u<128)return Ru;var Ou=Ru.length/2;if(Ou>15)throw"ASN.1 length too long to represent by 8x: n = "+$u.toString(16);return(128+Ou).toString(16)+Ru},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function($u){this.params=$u},_u!=null&&_u.tlv!=null&&(this.hTLV=_u.tlv,this.isModified=!1)},l$3.asn1.DERAbstractString=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=ie$1(this.s).toLowerCase()},this.setStringHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"?this.setString(_u):_u.str!==void 0?this.setString(_u.str):_u.hex!==void 0&&this.setStringHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERAbstractString,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractTime=function(_u){l$3.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function($u){var Ru=$u.getTime()+6e4*$u.getTimezoneOffset();return new Date(Ru)},this.formatDate=function($u,Ru,Ou){var Fu=this.zeroPadding,Nu=this.localDateToUTC($u),Vu=String(Nu.getFullYear());Ru=="utc"&&(Vu=Vu.substr(2,2));var Gu=Vu+Fu(String(Nu.getMonth()+1),2)+Fu(String(Nu.getDate()),2)+Fu(String(Nu.getHours()),2)+Fu(String(Nu.getMinutes()),2)+Fu(String(Nu.getSeconds()),2);if(Ou===!0){var Uu=Nu.getMilliseconds();if(Uu!=0){var Hu=Fu(String(Uu),3);Gu=Gu+"."+(Hu=Hu.replace(/[0]+$/,""))}}return Gu+"Z"},this.zeroPadding=function($u,Ru){return $u.length>=Ru?$u:new Array(Ru-$u.length+1).join("0")+$u},this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=J$1($u)},this.setByDateValue=function($u,Ru,Ou,Fu,Nu,Vu){var Gu=new Date(Date.UTC($u,Ru-1,Ou,Fu,Nu,Vu,0));this.setByDate(Gu)},this.getFreshValueHex=function(){return this.hV}},u$2.lang.extend(l$3.asn1.DERAbstractTime,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractStructured=function(_u){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array=$u},this.appendASN1Object=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array.push($u)},this.asn1Array=new Array,_u!==void 0&&_u.array!==void 0&&(this.asn1Array=_u.array)},u$2.lang.extend(l$3.asn1.DERAbstractStructured,l$3.asn1.ASN1Object),l$3.asn1.DERBoolean=function(_u){l$3.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=_u==0?"010100":"0101ff"},u$2.lang.extend(l$3.asn1.DERBoolean,l$3.asn1.ASN1Object),l$3.asn1.DERInteger=function(_u){l$3.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Ru=new c$2(String($u),10);this.setByBigInteger(Ru)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.bigint!==void 0?this.setByBigInteger(_u.bigint):_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DERInteger,l$3.asn1.ASN1Object),l$3.asn1.DERBitString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex="00"+$u.getEncodedHex()}l$3.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Ru){this.hTLV=null,this.isModified=!0,this.hV=Ru},this.setUnusedBitsAndHexValue=function(Ru,Ou){if(Ru<0||7<Ru)throw"unused bits shall be from 0 to 7: u = "+Ru;var Fu="0"+Ru;this.hTLV=null,this.isModified=!0,this.hV=Fu+Ou},this.setByBinaryString=function(Ru){var Ou=8-(Ru=Ru.replace(/0+$/,"")).length%8;Ou==8&&(Ou=0);for(var Fu=0;Fu<=Ou;Fu++)Ru+="0";var Nu="";for(Fu=0;Fu<Ru.length-1;Fu+=8){var Vu=Ru.substr(Fu,8),Gu=parseInt(Vu,2).toString(16);Gu.length==1&&(Gu="0"+Gu),Nu+=Gu}this.hTLV=null,this.isModified=!0,this.hV="0"+Ou+Nu},this.setByBooleanArray=function(Ru){for(var Ou="",Fu=0;Fu<Ru.length;Fu++)Ru[Fu]==1?Ou+="1":Ou+="0";this.setByBinaryString(Ou)},this.newFalseArray=function(Ru){for(var Ou=new Array(Ru),Fu=0;Fu<Ru;Fu++)Ou[Fu]=!1;return Ou},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"&&_u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(_u):_u.hex!==void 0?this.setHexValueIncludingUnusedBits(_u.hex):_u.bin!==void 0?this.setByBinaryString(_u.bin):_u.array!==void 0&&this.setByBooleanArray(_u.array))},u$2.lang.extend(l$3.asn1.DERBitString,l$3.asn1.ASN1Object),l$3.asn1.DEROctetString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$3.asn1.ASN1Util.newObject(_u.obj);_u.hex=$u.getEncodedHex()}l$3.asn1.DEROctetString.superclass.constructor.call(this,_u),this.hT="04"},u$2.lang.extend(l$3.asn1.DEROctetString,l$3.asn1.DERAbstractString),l$3.asn1.DERNull=function(){l$3.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$2.lang.extend(l$3.asn1.DERNull,l$3.asn1.ASN1Object),l$3.asn1.DERObjectIdentifier=function(_u){l$3.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.setValueOidString=function($u){var Ru=function(Ou){var Fu=function(Wu){var Qu=Wu.toString(16);return Qu.length==1&&(Qu="0"+Qu),Qu},Nu=function(Wu){var Qu="",qu=parseInt(Wu,10).toString(2),Ku=7-qu.length%7;Ku==7&&(Ku=0);for(var Yu="",_c=0;_c<Ku;_c++)Yu+="0";for(qu=Yu+qu,_c=0;_c<qu.length-1;_c+=7){var Ju=qu.substr(_c,7);_c!=qu.length-7&&(Ju="1"+Ju),Qu+=Fu(parseInt(Ju,2))}return Qu};try{if(!Ou.match(/^[0-9.]+$/))return null;var Vu="",Gu=Ou.split("."),Uu=40*parseInt(Gu[0],10)+parseInt(Gu[1],10);Vu+=Fu(Uu),Gu.splice(0,2);for(var Hu=0;Hu<Gu.length;Hu++)Vu+=Nu(Gu[Hu]);return Vu}catch{return null}}($u);if(Ru==null)throw new Error("malformed oid string: "+$u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Ru},this.setValueName=function($u){var Ru=l$3.asn1.x509.OID.name2oid($u);if(Ru==="")throw new Error("DERObjectIdentifier oidName undefined: "+$u);this.setValueOidString(Ru)},this.setValueNameOrOid=function($u){$u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString($u):this.setValueName($u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function($u){typeof $u=="string"?this.setValueNameOrOid($u):$u.oid!==void 0?this.setValueNameOrOid($u.oid):$u.name!==void 0?this.setValueNameOrOid($u.name):$u.hex!==void 0&&this.setValueHex($u.hex)},_u!==void 0&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERObjectIdentifier,l$3.asn1.ASN1Object),l$3.asn1.DEREnumerated=function(_u){l$3.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Ru=new c$2(String($u),10);this.setByBigInteger(Ru)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$2.lang.extend(l$3.asn1.DEREnumerated,l$3.asn1.ASN1Object),l$3.asn1.DERUTF8String=function(_u){l$3.asn1.DERUTF8String.superclass.constructor.call(this,_u),this.hT="0c"},u$2.lang.extend(l$3.asn1.DERUTF8String,l$3.asn1.DERAbstractString),l$3.asn1.DERNumericString=function(_u){l$3.asn1.DERNumericString.superclass.constructor.call(this,_u),this.hT="12"},u$2.lang.extend(l$3.asn1.DERNumericString,l$3.asn1.DERAbstractString),l$3.asn1.DERPrintableString=function(_u){l$3.asn1.DERPrintableString.superclass.constructor.call(this,_u),this.hT="13"},u$2.lang.extend(l$3.asn1.DERPrintableString,l$3.asn1.DERAbstractString),l$3.asn1.DERTeletexString=function(_u){l$3.asn1.DERTeletexString.superclass.constructor.call(this,_u),this.hT="14"},u$2.lang.extend(l$3.asn1.DERTeletexString,l$3.asn1.DERAbstractString),l$3.asn1.DERIA5String=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="16"},u$2.lang.extend(l$3.asn1.DERIA5String,l$3.asn1.DERAbstractString),l$3.asn1.DERVisibleString=function(_u){l$3.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="1a"},u$2.lang.extend(l$3.asn1.DERVisibleString,l$3.asn1.DERAbstractString),l$3.asn1.DERBMPString=function(_u){l$3.asn1.DERBMPString.superclass.constructor.call(this,_u),this.hT="1e"},u$2.lang.extend(l$3.asn1.DERBMPString,l$3.asn1.DERAbstractString),l$3.asn1.DERUTCTime=function(_u){l$3.asn1.DERUTCTime.superclass.constructor.call(this,_u),this.hT="17",this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{12}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date))},u$2.lang.extend(l$3.asn1.DERUTCTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERGeneralizedTime=function(_u){l$3.asn1.DERGeneralizedTime.superclass.constructor.call(this,_u),this.hT="18",this.withMillis=!1,this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{14}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date),_u.millis===!0&&(this.withMillis=!0))},u$2.lang.extend(l$3.asn1.DERGeneralizedTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERSequence=function(_u){l$3.asn1.DERSequence.superclass.constructor.call(this,_u),this.hT="30",this.getFreshValueHex=function(){for(var $u="",Ru=0;Ru<this.asn1Array.length;Ru++)$u+=this.asn1Array[Ru].getEncodedHex();return this.hV=$u,this.hV}},u$2.lang.extend(l$3.asn1.DERSequence,l$3.asn1.DERAbstractStructured),l$3.asn1.DERSet=function(_u){l$3.asn1.DERSet.superclass.constructor.call(this,_u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var $u=new Array,Ru=0;Ru<this.asn1Array.length;Ru++){var Ou=this.asn1Array[Ru];$u.push(Ou.getEncodedHex())}return this.sortFlag==1&&$u.sort(),this.hV=$u.join(""),this.hV},_u!==void 0&&_u.sortflag!==void 0&&_u.sortflag==0&&(this.sortFlag=!1)},u$2.lang.extend(l$3.asn1.DERSet,l$3.asn1.DERAbstractStructured),l$3.asn1.DERTaggedObject=function(_u){l$3.asn1.DERTaggedObject.superclass.constructor.call(this);var $u=l$3.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Ru,Ou,Fu){this.hT=Ou,this.isExplicit=Ru,this.asn1Object=Fu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Fu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Ou),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Ru){Ru.tag!=null&&(this.hT=Ru.tag),Ru.explicit!=null&&(this.isExplicit=Ru.explicit),Ru.tage!=null&&(this.hT=Ru.tage,this.isExplicit=!0),Ru.tagi!=null&&(this.hT=Ru.tagi,this.isExplicit=!1),Ru.obj!=null&&(Ru.obj instanceof $u.ASN1Object?(this.asn1Object=Ru.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Ru.obj=="object"&&(this.asn1Object=$u.ASN1Util.newObject(Ru.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},_u!=null&&this.setByParam(_u)},u$2.lang.extend(l$3.asn1.DERTaggedObject,l$3.asn1.ASN1Object);var Me=new function(){};function Ie(_u,$u){for(var Ru="",Ou=$u/4-_u.length,Fu=0;Fu<Ou;Fu++)Ru+="0";return Ru+_u}function Se$1(_u,$u,Ru){for(var Ou="",Fu=0;Ou.length<$u;)Ou+=re$1(Ru(oe$1(_u+String.fromCharCode.apply(String,[(4278190080&Fu)>>24,(16711680&Fu)>>16,(65280&Fu)>>8,255&Fu])))),Fu+=1;return Ou}function Ce(_u){for(var $u in l$3.crypto.Util.DIGESTINFOHEAD){var Ru=l$3.crypto.Util.DIGESTINFOHEAD[$u],Ou=Ru.length;if(_u.substring(0,Ou)==Ru)return[$u,_u.substring(Ou)]}return[]}function Be(_u){var $u,Ru=Me,Ou=Ru.getChildIdx,Fu=Ru.getV,Nu=Ru.getTLV,Vu=Ru.getVbyList,Gu=Ru.getVbyListEx,Uu=Ru.getTLVbyList,Hu=Ru.getTLVbyListEx,Wu=Ru.getIdxbyList,Qu=Ru.getIdxbyListEx,qu=Ru.getVidx,Ku=Ru.getInt,Yu=Ru.oidname,_c=Ru.hextooidstr,Ju=le;try{$u=l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Xu=Uu(this.hex,0,[0,0]);if(Xu.substr(0,2)=="a0"){var Zu=Uu(Xu,0,[0]),Xc=Ku(Zu,0);if(Xc<0||2<Xc)throw new Error("malformed version field");return this.version=Xc+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Gu(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Xu=Hu(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Xu)},this.getAlgorithmIdentifierName=function(Xu){for(var Zu in $u)if(Xu===$u[Zu])return Zu;return Yu(Gu(Xu,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Uu(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Uu(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Xu=Vu(this.hex,0,[0,4+this.foffset,0]);return Xu=Xu.replace(/(..)/g,"%$1"),Xu=decodeURIComponent(Xu)},this.getNotAfter=function(){var Xu=Vu(this.hex,0,[0,4+this.foffset,1]);return Xu=Xu.replace(/(..)/g,"%$1"),Xu=decodeURIComponent(Xu)},this.getPublicKeyHex=function(){return Ru.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Wu(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Xu=this.getPublicKeyIdx();return Wu(this.hex,Xu,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Xu=Uu(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Xu)},this.getSignatureValueHex=function(){return Vu(this.hex,0,[2],"03",!0)},this.verifySignature=function(Xu){var Zu=this.getSignatureAlgorithmField(),Xc=this.getSignatureValueHex(),_h=Uu(this.hex,0,[0],"30"),ep=new l$3.crypto.Signature({alg:Zu});return ep.init(Xu),ep.updateHex(_h),ep.verify(Xc)},this.parseExt=function(Xu){var Zu,Xc,_h;if(Xu===void 0){if(_h=this.hex,this.version!==3)return-1;Zu=Wu(_h,0,[0,7,0],"30"),Xc=Ou(_h,Zu)}else{_h=le(Xu);var ep=Wu(_h,0,[0,3,0,0],"06");if(Fu(_h,ep)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);Zu=Wu(_h,0,[0,3,0,1,0],"30"),Xc=Ou(_h,Zu),this.hex=_h}this.aExtInfo=new Array;for(var np=0;np<Xc.length;np++){var ap={critical:!1},lp=0;Ou(_h,Xc[np]).length===3&&(ap.critical=!0,lp=1),ap.oid=Ru.hextooidstr(Vu(_h,Xc[np],[0],"06"));var up=Wu(_h,Xc[np],[1+lp]);ap.vidx=qu(_h,up),this.aExtInfo.push(ap)}},this.getExtInfo=function(Xu){var Zu=this.aExtInfo,Xc=Xu;if(Xu.match(/^[0-9.]+$/)||(Xc=l$3.asn1.x509.OID.name2oid(Xu)),Xc!==""){for(var _h=0;_h<Zu.length;_h++)if(Zu[_h].oid===Xc)return Zu[_h]}},this.getExtBasicConstraints=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("basicConstraints");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"basicConstraints"};if(Zu&&(_h.critical=!0),Xu==="3000")return _h;if(Xu==="30030101ff")return _h.cA=!0,_h;if(Xu.substr(0,12)==="30060101ff02"){var ep=Fu(Xu,10),np=parseInt(ep,16);return _h.cA=!0,_h.pathLen=np,_h}throw new Error("hExtV parse error: "+Xu)},this.getExtKeyUsage=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("keyUsage");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"keyUsage"};return Zu&&(_h.critical=!0),_h.names=this.getExtKeyUsageString(Xu).split(","),_h},this.getExtKeyUsageBin=function(Xu){if(Xu===void 0){var Zu=this.getExtInfo("keyUsage");if(Zu===void 0)return"";Xu=Nu(this.hex,Zu.vidx)}if(Xu.length!=8&&Xu.length!=10)throw new Error("malformed key usage value: "+Xu);var Xc="000000000000000"+parseInt(Xu.substr(6),16).toString(2);return Xu.length==8&&(Xc=Xc.slice(-8)),Xu.length==10&&(Xc=Xc.slice(-16)),(Xc=Xc.replace(/0+$/,""))==""&&(Xc="0"),Xc},this.getExtKeyUsageString=function(Xu){for(var Zu=this.getExtKeyUsageBin(Xu),Xc=new Array,_h=0;_h<Zu.length;_h++)Zu.substr(_h,1)=="1"&&Xc.push(Be.KEYUSAGE_NAME[_h]);return Xc.join(",")},this.getExtSubjectKeyIdentifier=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("subjectKeyIdentifier");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"subjectKeyIdentifier"};Zu&&(_h.critical=!0);var ep=Fu(Xu,0);return _h.kid={hex:ep},_h},this.getExtAuthorityKeyIdentifier=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("authorityKeyIdentifier");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"authorityKeyIdentifier"};Zu&&(_h.critical=!0);for(var ep=Ou(Xu,0),np=0;np<ep.length;np++){var ap=Xu.substr(ep[np],2);if(ap==="80"&&(_h.kid={hex:Fu(Xu,ep[np])}),ap==="a1"){var lp=Nu(Xu,ep[np]),up=this.getGeneralNames(lp);_h.issuer=up[0].dn}ap==="82"&&(_h.sn={hex:Fu(Xu,ep[np])})}return _h},this.getExtExtKeyUsage=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("extKeyUsage");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"extKeyUsage",array:[]};Zu&&(_h.critical=!0);for(var ep=Ou(Xu,0),np=0;np<ep.length;np++)_h.array.push(Yu(Fu(Xu,ep[np])));return _h},this.getExtExtKeyUsageName=function(){var Xu=this.getExtInfo("extKeyUsage");if(Xu===void 0)return Xu;var Zu=new Array,Xc=Nu(this.hex,Xu.vidx);if(Xc==="")return Zu;for(var _h=Ou(Xc,0),ep=0;ep<_h.length;ep++)Zu.push(Yu(Fu(Xc,_h[ep])));return Zu},this.getExtSubjectAltName=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("subjectAltName");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"subjectAltName",array:[]};return Zu&&(_h.critical=!0),_h.array=this.getGeneralNames(Xu),_h},this.getExtIssuerAltName=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("issuerAltName");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"issuerAltName",array:[]};return Zu&&(_h.critical=!0),_h.array=this.getGeneralNames(Xu),_h},this.getGeneralNames=function(Xu){for(var Zu=Ou(Xu,0),Xc=[],_h=0;_h<Zu.length;_h++){var ep=this.getGeneralName(Nu(Xu,Zu[_h]));ep!==void 0&&Xc.push(ep)}return Xc},this.getGeneralName=function(Xu){var Zu=Xu.substr(0,2),Xc=Fu(Xu,0),_h=re$1(Xc);return Zu=="81"?{rfc822:_h}:Zu=="82"?{dns:_h}:Zu=="86"?{uri:_h}:Zu=="87"?{ip:ue$1(Xc)}:Zu=="a4"?{dn:this.getX500Name(Xc)}:void 0},this.getExtSubjectAltName2=function(){var Xu,Zu,Xc,_h=this.getExtInfo("subjectAltName");if(_h===void 0)return _h;for(var ep=new Array,np=Nu(this.hex,_h.vidx),ap=Ou(np,0),lp=0;lp<ap.length;lp++)Xc=np.substr(ap[lp],2),Xu=Fu(np,ap[lp]),Xc==="81"&&(Zu=ne(Xu),ep.push(["MAIL",Zu])),Xc==="82"&&(Zu=ne(Xu),ep.push(["DNS",Zu])),Xc==="84"&&(Zu=Be.hex2dn(Xu,0),ep.push(["DN",Zu])),Xc==="86"&&(Zu=ne(Xu),ep.push(["URI",Zu])),Xc==="87"&&(Zu=ue$1(Xu),ep.push(["IP",Zu]));return ep},this.getExtCRLDistributionPoints=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("cRLDistributionPoints");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"cRLDistributionPoints",array:[]};Zu&&(_h.critical=!0);for(var ep=Ou(Xu,0),np=0;np<ep.length;np++){var ap=Nu(Xu,ep[np]);_h.array.push(this.getDistributionPoint(ap))}return _h},this.getDistributionPoint=function(Xu){for(var Zu={},Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++){var ep=Xu.substr(Xc[_h],2),np=Nu(Xu,Xc[_h]);ep=="a0"&&(Zu.dpname=this.getDistributionPointName(np))}return Zu},this.getDistributionPointName=function(Xu){for(var Zu={},Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++){var ep=Xu.substr(Xc[_h],2),np=Nu(Xu,Xc[_h]);ep=="a0"&&(Zu.full=this.getGeneralNames(np))}return Zu},this.getExtCRLDistributionPointsURI=function(){var Xu=this.getExtInfo("cRLDistributionPoints");if(Xu===void 0)return Xu;for(var Zu=new Array,Xc=Ou(this.hex,Xu.vidx),_h=0;_h<Xc.length;_h++)try{var ep=ne(Vu(this.hex,Xc[_h],[0,0,0],"86"));Zu.push(ep)}catch{}return Zu},this.getExtAIAInfo=function(){var Xu=this.getExtInfo("authorityInfoAccess");if(Xu===void 0)return Xu;for(var Zu={ocsp:[],caissuer:[]},Xc=Ou(this.hex,Xu.vidx),_h=0;_h<Xc.length;_h++){var ep=Vu(this.hex,Xc[_h],[0],"06"),np=Vu(this.hex,Xc[_h],[1],"86");ep==="2b06010505073001"&&Zu.ocsp.push(ne(np)),ep==="2b06010505073002"&&Zu.caissuer.push(ne(np))}return Zu},this.getExtAuthorityInfoAccess=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("authorityInfoAccess");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"authorityInfoAccess",array:[]};Zu&&(_h.critical=!0);for(var ep=Ou(Xu,0),np=0;np<ep.length;np++){var ap=Gu(Xu,ep[np],[0],"06"),lp=ne(Vu(Xu,ep[np],[1],"86"));if(ap=="2b06010505073001")_h.array.push({ocsp:lp});else{if(ap!="2b06010505073002")throw new Error("unknown method: "+ap);_h.array.push({caissuer:lp})}}return _h},this.getExtCertificatePolicies=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("certificatePolicies");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"certificatePolicies",array:[]};Zu&&(_h.critical=!0);for(var ep=Ou(Xu,0),np=0;np<ep.length;np++){var ap=Nu(Xu,ep[np]),lp=this.getPolicyInformation(ap);_h.array.push(lp)}return _h},this.getPolicyInformation=function(Xu){var Zu={},Xc=Vu(Xu,0,[0],"06");Zu.policyoid=Yu(Xc);var _h=Qu(Xu,0,[1],"30");if(_h!=-1){Zu.array=[];for(var ep=Ou(Xu,_h),np=0;np<ep.length;np++){var ap=Nu(Xu,ep[np]),lp=this.getPolicyQualifierInfo(ap);Zu.array.push(lp)}}return Zu},this.getPolicyQualifierInfo=function(Xu){var Zu={},Xc=Vu(Xu,0,[0],"06");if(Xc==="2b06010505070201"){var _h=Gu(Xu,0,[1],"16");Zu.cps=re$1(_h)}else if(Xc==="2b06010505070202"){var ep=Uu(Xu,0,[1],"30");Zu.unotice=this.getUserNotice(ep)}return Zu},this.getUserNotice=function(Xu){for(var Zu={},Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++){var ep=Nu(Xu,Xc[_h]);ep.substr(0,2)!="30"&&(Zu.exptext=this.getDisplayText(ep))}return Zu},this.getDisplayText=function(Xu){var Zu={};return Zu.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Xu.substr(0,2)],Zu.str=re$1(Fu(Xu,0)),Zu},this.getExtCRLNumber=function(Xu,Zu){var Xc={extname:"cRLNumber"};if(Zu&&(Xc.critical=!0),Xu.substr(0,2)=="02")return Xc.num={hex:Fu(Xu,0)},Xc;throw new Error("hExtV parse error: "+Xu)},this.getExtCRLReason=function(Xu,Zu){var Xc={extname:"cRLReason"};if(Zu&&(Xc.critical=!0),Xu.substr(0,2)=="0a")return Xc.code=parseInt(Fu(Xu,0),16),Xc;throw new Error("hExtV parse error: "+Xu)},this.getExtOcspNonce=function(Xu,Zu){var Xc={extname:"ocspNonce"};Zu&&(Xc.critical=!0);var _h=Fu(Xu,0);return Xc.hex=_h,Xc},this.getExtOcspNoCheck=function(Xu,Zu){var Xc={extname:"ocspNoCheck"};return Zu&&(Xc.critical=!0),Xc},this.getExtAdobeTimeStamp=function(Xu,Zu){if(Xu===void 0&&Zu===void 0){var Xc=this.getExtInfo("adobeTimeStamp");if(Xc===void 0)return;Xu=Nu(this.hex,Xc.vidx),Zu=Xc.critical}var _h={extname:"adobeTimeStamp"};Zu&&(_h.critical=!0);var ep=Ou(Xu,0);if(ep.length>1){var np=Nu(Xu,ep[1]),ap=this.getGeneralName(np);ap.uri!=null&&(_h.uri=ap.uri)}if(ep.length>2){var lp=Nu(Xu,ep[2]);lp=="0101ff"&&(_h.reqauth=!0),lp=="010100"&&(_h.reqauth=!1)}return _h},this.getX500NameRule=function(Xu){for(var Zu=null,Xc=[],_h=0;_h<Xu.length;_h++)for(var ep=Xu[_h],np=0;np<ep.length;np++)Xc.push(ep[np]);for(_h=0;_h<Xc.length;_h++){var ap=Xc[_h],lp=ap.ds,up=ap.value,_f=ap.type;if(lp!="prn"&&lp!="utf8"&&lp!="ia5")return"mixed";if(lp=="ia5"){if(_f!="CN")return"mixed";if(l$3.lang.String.isMail(up))continue;return"mixed"}if(_f=="C"){if(lp=="prn")continue;return"mixed"}if(Zu==null)Zu=lp;else if(Zu!==lp)return"mixed"}return Zu==null?"prn":Zu},this.getX500Name=function(Xu){var Zu=this.getX500NameArray(Xu);return{array:Zu,str:this.dnarraytostr(Zu)}},this.getX500NameArray=function(Xu){for(var Zu=[],Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++)Zu.push(this.getRDN(Nu(Xu,Xc[_h])));return Zu},this.getRDN=function(Xu){for(var Zu=[],Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++)Zu.push(this.getAttrTypeAndValue(Nu(Xu,Xc[_h])));return Zu},this.getAttrTypeAndValue=function(Xu){var Zu={type:null,value:null,ds:null},Xc=Ou(Xu,0),_h=Vu(Xu,Xc[0],[],"06"),ep=Vu(Xu,Xc[1],[]),np=l$3.asn1.ASN1Util.oidHexToInt(_h);return Zu.type=l$3.asn1.x509.OID.oid2atype(np),Zu.ds=this.HEX2STAG[Xu.substr(Xc[1],2)],Zu.ds!="bmp"?Zu.value=ne(ep):Zu.value=he(ep),Zu},this.readCertPEM=function(Xu){this.readCertHex(Ju(Xu))},this.readCertHex=function(Xu){this.hex=Xu,this.getVersion();try{Wu(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Xu={};return Xu.version=this.getVersion(),Xu.serial={hex:this.getSerialNumberHex()},Xu.sigalg=this.getSignatureAlgorithmField(),Xu.issuer=this.getIssuer(),Xu.notbefore=this.getNotBefore(),Xu.notafter=this.getNotAfter(),Xu.subject=this.getSubject(),Xu.sbjpubkey=ae$1(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Xu.ext=this.getExtParamArray()),Xu.sighex=this.getSignatureValueHex(),Xu},this.getExtParamArray=function(Xu){Xu==null&&Qu(this.hex,0,[0,"[3]"])!=-1&&(Xu=Hu(this.hex,0,[0,"[3]",0],"30"));for(var Zu=[],Xc=Ou(Xu,0),_h=0;_h<Xc.length;_h++){var ep=Nu(Xu,Xc[_h]),np=this.getExtParam(ep);np!=null&&Zu.push(np)}return Zu},this.getExtParam=function(Xu){var Zu=Ou(Xu,0).length;if(Zu!=2&&Zu!=3)throw new Error("wrong number elements in Extension: "+Zu+" "+Xu);var Xc=_c(Vu(Xu,0,[0],"06")),_h=!1;Zu==3&&Uu(Xu,0,[1])=="0101ff"&&(_h=!0);var ep=Uu(Xu,0,[Zu-1,0]),np=void 0;if(Xc=="2.5.29.14"?np=this.getExtSubjectKeyIdentifier(ep,_h):Xc=="2.5.29.15"?np=this.getExtKeyUsage(ep,_h):Xc=="2.5.29.17"?np=this.getExtSubjectAltName(ep,_h):Xc=="2.5.29.18"?np=this.getExtIssuerAltName(ep,_h):Xc=="2.5.29.19"?np=this.getExtBasicConstraints(ep,_h):Xc=="2.5.29.31"?np=this.getExtCRLDistributionPoints(ep,_h):Xc=="2.5.29.32"?np=this.getExtCertificatePolicies(ep,_h):Xc=="2.5.29.35"?np=this.getExtAuthorityKeyIdentifier(ep,_h):Xc=="2.5.29.37"?np=this.getExtExtKeyUsage(ep,_h):Xc=="1.3.6.1.5.5.7.1.1"?np=this.getExtAuthorityInfoAccess(ep,_h):Xc=="2.5.29.20"?np=this.getExtCRLNumber(ep,_h):Xc=="2.5.29.21"?np=this.getExtCRLReason(ep,_h):Xc=="1.3.6.1.5.5.7.48.1.2"?np=this.getExtOcspNonce(ep,_h):Xc=="1.3.6.1.5.5.7.48.1.5"?np=this.getExtOcspNoCheck(ep,_h):Xc=="1.2.840.113583.1.1.9.1"&&(np=this.getExtAdobeTimeStamp(ep,_h)),np!=null)return np;var ap={extname:Xc,extn:ep};return _h&&(ap.critical=!0),ap},this.findExt=function(Xu,Zu){for(var Xc=0;Xc<Xu.length;Xc++)if(Xu[Xc].extname==Zu)return Xu[Xc];return null},this.updateExtCDPFullURI=function(Xu,Zu){var Xc=this.findExt(Xu,"cRLDistributionPoints");if(Xc!=null&&Xc.array!=null){for(var _h=Xc.array,ep=0;ep<_h.length;ep++)if(_h[ep].dpname!=null&&_h[ep].dpname.full!=null)for(var np=_h[ep].dpname.full,ap=0;ap<np.length;ap++){var lp=np[ep];lp.uri!=null&&(lp.uri=Zu)}}},this.updateExtAIAOCSP=function(Xu,Zu){var Xc=this.findExt(Xu,"authorityInfoAccess");if(Xc!=null&&Xc.array!=null)for(var _h=Xc.array,ep=0;ep<_h.length;ep++)_h[ep].ocsp!=null&&(_h[ep].ocsp=Zu)},this.updateExtAIACAIssuer=function(Xu,Zu){var Xc=this.findExt(Xu,"authorityInfoAccess");if(Xc!=null&&Xc.array!=null)for(var _h=Xc.array,ep=0;ep<_h.length;ep++)_h[ep].caissuer!=null&&(_h[ep].caissuer=Zu)},this.dnarraytostr=function(Xu){return"/"+Xu.map(function(Zu){return function(Xc){return Xc.map(function(_h){return function(ep){return ep.type+"="+ep.value}(_h).replace(/\+/,"\\+")}).join("+")}(Zu).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Xu,Zu,Xc,_h,ep=function(op){for(var sp="",cp=op.array,hp=0;hp<cp.length;hp++){var dp=cp[hp];if(sp+="    policy oid: "+dp.policyoid+`
`,dp.array!==void 0)for(var xp=0;xp<dp.array.length;xp++){var bp=dp.array[xp];bp.cps!==void 0&&(sp+="    cps: "+bp.cps+`
`)}}return sp},np=function(op){for(var sp="",cp=op.array,hp=0;hp<cp.length;hp++){var dp=cp[hp];try{dp.dpname.full[0].uri!==void 0&&(sp+="    "+dp.dpname.full[0].uri+`
`)}catch{}try{dp.dname.full[0].dn.hex!==void 0&&(sp+="    "+Be.hex2dn(dp.dpname.full[0].dn.hex)+`
`)}catch{}}return sp},ap=function(op){for(var sp="",cp=op.array,hp=0;hp<cp.length;hp++){var dp=cp[hp];dp.caissuer!==void 0&&(sp+="    caissuer: "+dp.caissuer+`
`),dp.ocsp!==void 0&&(sp+="    ocsp: "+dp.ocsp+`
`)}return sp};if(Xu=`Basic Fields
`,Xu+="  serial number: "+this.getSerialNumberHex()+`
`,Xu+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Xu+="  issuer: "+this.getIssuerString()+`
`,Xu+="  notBefore: "+this.getNotBefore()+`
`,Xu+="  notAfter: "+this.getNotAfter()+`
`,Xu+="  subject: "+this.getSubjectString()+`
`,Xu+=`  subject public key info: 
`,Xu+="    key algorithm: "+(Zu=this.getPublicKey()).type+`
`,Zu.type==="RSA"&&(Xu+="    n="+de$1(Zu.n.toString(16)).substr(0,16)+`...
`,Xu+="    e="+de$1(Zu.e.toString(16))+`
`),(Xc=this.aExtInfo)!=null){Xu+=`X509v3 Extensions:
`;for(var lp=0;lp<Xc.length;lp++){var up=Xc[lp],_f=l$3.asn1.x509.OID.oid2name(up.oid);_f===""&&(_f=up.oid);var tp="";if(up.critical===!0&&(tp="CRITICAL"),Xu+="  "+_f+" "+tp+`:
`,_f==="basicConstraints"){var ip=this.getExtBasicConstraints();ip.cA===void 0?Xu+=`    {}
`:(Xu+="    cA=true",ip.pathLen!==void 0&&(Xu+=", pathLen="+ip.pathLen),Xu+=`
`)}else if(_f==="keyUsage")Xu+="    "+this.getExtKeyUsageString()+`
`;else if(_f==="subjectKeyIdentifier")Xu+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(_f==="authorityKeyIdentifier"){var rp=this.getExtAuthorityKeyIdentifier();rp.kid!==void 0&&(Xu+="    kid="+rp.kid.hex+`
`)}else _f==="extKeyUsage"?Xu+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:_f==="subjectAltName"?Xu+="    "+(_h=this.getExtSubjectAltName(),JSON.stringify(_h.array).replace(/[\[\]\{\}\"]/g,""))+`
`:_f==="cRLDistributionPoints"?Xu+=np(this.getExtCRLDistributionPoints()):_f==="authorityInfoAccess"?Xu+=ap(this.getExtAuthorityInfoAccess()):_f==="certificatePolicies"&&(Xu+=ep(this.getExtCertificatePolicies()))}}return Xu+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Xu+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof _u=="string"&&(_u.indexOf("-----BEGIN")!=-1?this.readCertPEM(_u):l$3.lang.String.isHex(_u)&&this.readCertHex(_u))}function Te(_u){return h$2.SHA256(_u).toString()}Me.getLblen=function(_u,$u){if(_u.substr($u+2,1)!="8")return 1;var Ru=parseInt(_u.substr($u+3,1));return Ru==0?-1:0<Ru&&Ru<10?Ru+1:-2},Me.getL=function(_u,$u){var Ru=Me.getLblen(_u,$u);return Ru<1?"":_u.substr($u+2,2*Ru)},Me.getVblen=function(_u,$u){var Ru;return(Ru=Me.getL(_u,$u))==""?-1:(Ru.substr(0,1)==="8"?new c$2(Ru.substr(2),16):new c$2(Ru,16)).intValue()},Me.getVidx=function(_u,$u){var Ru=Me.getLblen(_u,$u);return Ru<0?Ru:$u+2*(Ru+1)},Me.getV=function(_u,$u){var Ru=Me.getVidx(_u,$u),Ou=Me.getVblen(_u,$u);return _u.substr(Ru,2*Ou)},Me.getTLV=function(_u,$u){return _u.substr($u,2)+Me.getL(_u,$u)+Me.getV(_u,$u)},Me.getTLVblen=function(_u,$u){return 2+2*Me.getLblen(_u,$u)+2*Me.getVblen(_u,$u)},Me.getNextSiblingIdx=function(_u,$u){return Me.getVidx(_u,$u)+2*Me.getVblen(_u,$u)},Me.getChildIdx=function(_u,$u){var Ru,Ou,Fu,Nu=Me,Vu=[];Ru=Nu.getVidx(_u,$u),Ou=2*Nu.getVblen(_u,$u),_u.substr($u,2)=="03"&&(Ru+=2,Ou-=2),Fu=0;for(var Gu=Ru;Fu<=Ou;){var Uu=Nu.getTLVblen(_u,Gu);if((Fu+=Uu)<=Ou&&Vu.push(Gu),Gu+=Uu,Fu>=Ou)break}return Vu},Me.getNthChildIdx=function(_u,$u,Ru){return Me.getChildIdx(_u,$u)[Ru]},Me.getIdxbyList=function(_u,$u,Ru,Ou){var Fu,Nu,Vu=Me;return Ru.length==0?Ou!==void 0&&_u.substr($u,2)!==Ou?-1:$u:(Fu=Ru.shift())>=(Nu=Vu.getChildIdx(_u,$u)).length?-1:Vu.getIdxbyList(_u,Nu[Fu],Ru,Ou)},Me.getIdxbyListEx=function(_u,$u,Ru,Ou){var Fu,Nu,Vu=Me;if(Ru.length==0)return Ou!==void 0&&_u.substr($u,2)!==Ou?-1:$u;Fu=Ru.shift(),Nu=Vu.getChildIdx(_u,$u);for(var Gu=0,Uu=0;Uu<Nu.length;Uu++){var Hu=_u.substr(Nu[Uu],2);if(typeof Fu=="number"&&!Vu.isContextTag(Hu)&&Gu==Fu||typeof Fu=="string"&&Vu.isContextTag(Hu,Fu))return Vu.getIdxbyListEx(_u,Nu[Uu],Ru,Ou);Vu.isContextTag(Hu)||Gu++}return-1},Me.getTLVbyList=function(_u,$u,Ru,Ou){var Fu=Me,Nu=Fu.getIdxbyList(_u,$u,Ru,Ou);return Nu==-1||Nu>=_u.length?null:Fu.getTLV(_u,Nu)},Me.getTLVbyListEx=function(_u,$u,Ru,Ou){var Fu=Me,Nu=Fu.getIdxbyListEx(_u,$u,Ru,Ou);return Nu==-1?null:Fu.getTLV(_u,Nu)},Me.getVbyList=function(_u,$u,Ru,Ou,Fu){var Nu,Vu,Gu=Me;return(Nu=Gu.getIdxbyList(_u,$u,Ru,Ou))==-1||Nu>=_u.length?null:(Vu=Gu.getV(_u,Nu),Fu===!0&&(Vu=Vu.substr(2)),Vu)},Me.getVbyListEx=function(_u,$u,Ru,Ou,Fu){var Nu,Vu,Gu=Me;return(Nu=Gu.getIdxbyListEx(_u,$u,Ru,Ou))==-1?null:(Vu=Gu.getV(_u,Nu),_u.substr(Nu,2)=="03"&&Fu!==!1&&(Vu=Vu.substr(2)),Vu)},Me.getInt=function(_u,$u,Ru){Ru==null&&(Ru=-1);try{var Ou=_u.substr($u,2);if(Ou!="02"&&Ou!="03")return Ru;var Fu=Me.getV(_u,$u);return Ou=="02"?parseInt(Fu,16):function(Nu){try{var Vu=Nu.substr(0,2);if(Vu=="00")return parseInt(Nu.substr(2),16);var Gu=parseInt(Vu,16),Uu=Nu.substr(2),Hu=parseInt(Uu,16).toString(2);return Hu=="0"&&(Hu="00000000"),Hu=Hu.slice(0,0-Gu),parseInt(Hu,2)}catch{return-1}}(Fu)}catch{return Ru}},Me.getOID=function(_u,$u,Ru){Ru==null&&(Ru=null);try{return _u.substr($u,2)!="06"?Ru:function(Ou){if(!ce$1(Ou))return null;try{var Fu=[],Nu=Ou.substr(0,2),Vu=parseInt(Nu,16);Fu[0]=new String(Math.floor(Vu/40)),Fu[1]=new String(Vu%40);for(var Gu=Ou.substr(2),Uu=[],Hu=0;Hu<Gu.length/2;Hu++)Uu.push(parseInt(Gu.substr(2*Hu,2),16));var Wu=[],Qu="";for(Hu=0;Hu<Uu.length;Hu++)128&Uu[Hu]?Qu+=pe$1((127&Uu[Hu]).toString(2),7):(Qu+=pe$1((127&Uu[Hu]).toString(2),7),Wu.push(new String(parseInt(Qu,2))),Qu="");var qu=Fu.join(".");return Wu.length>0&&(qu=qu+"."+Wu.join(".")),qu}catch{return null}}(Me.getV(_u,$u))}catch{return Ru}},Me.getOIDName=function(_u,$u,Ru){Ru==null&&(Ru=null);try{var Ou=Me.getOID(_u,$u,Ru);if(Ou==Ru)return Ru;var Fu=l$3.asn1.x509.OID.oid2name(Ou);return Fu==""?Ou:Fu}catch{return Ru}},Me.getString=function(_u,$u,Ru){Ru==null&&(Ru=null);try{return re$1(Me.getV(_u,$u))}catch{return Ru}},Me.hextooidstr=function(_u){var $u=function(Qu,qu){return Qu.length>=qu?Qu:new Array(qu-Qu.length+1).join("0")+Qu},Ru=[],Ou=_u.substr(0,2),Fu=parseInt(Ou,16);Ru[0]=new String(Math.floor(Fu/40)),Ru[1]=new String(Fu%40);for(var Nu=_u.substr(2),Vu=[],Gu=0;Gu<Nu.length/2;Gu++)Vu.push(parseInt(Nu.substr(2*Gu,2),16));var Uu=[],Hu="";for(Gu=0;Gu<Vu.length;Gu++)128&Vu[Gu]?Hu+=$u((127&Vu[Gu]).toString(2),7):(Hu+=$u((127&Vu[Gu]).toString(2),7),Uu.push(new String(parseInt(Hu,2))),Hu="");var Wu=Ru.join(".");return Uu.length>0&&(Wu=Wu+"."+Uu.join(".")),Wu},Me.dump=function(_u,$u,Ru,Ou){var Fu=Me,Nu=Fu.getV,Vu=Fu.dump,Gu=Fu.getChildIdx,Uu=_u;_u instanceof l$3.asn1.ASN1Object&&(Uu=_u.getEncodedHex());var Hu=function(ap,lp){return ap.length<=2*lp?ap:ap.substr(0,lp)+"..(total "+ap.length/2+"bytes).."+ap.substr(ap.length-lp,lp)};$u===void 0&&($u={ommit_long_octet:32}),Ru===void 0&&(Ru=0),Ou===void 0&&(Ou="");var Wu,Qu=$u.ommit_long_octet;if((Wu=Uu.substr(Ru,2))=="01")return(qu=Nu(Uu,Ru))=="00"?Ou+`BOOLEAN FALSE
`:Ou+`BOOLEAN TRUE
`;if(Wu=="02")return Ou+"INTEGER "+Hu(qu=Nu(Uu,Ru),Qu)+`
`;if(Wu=="03"){var qu=Nu(Uu,Ru);if(Fu.isASN1HEX(qu.substr(2))){var Ku=Ou+`BITSTRING, encapsulates
`;return Ku+=Vu(qu.substr(2),$u,0,Ou+"  ")}return Ou+"BITSTRING "+Hu(qu,Qu)+`
`}if(Wu=="04")return qu=Nu(Uu,Ru),Fu.isASN1HEX(qu)?(Ku=Ou+`OCTETSTRING, encapsulates
`,Ku+=Vu(qu,$u,0,Ou+"  ")):Ou+"OCTETSTRING "+Hu(qu,Qu)+`
`;if(Wu=="05")return Ou+`NULL
`;if(Wu=="06"){var Yu=Nu(Uu,Ru),_c=l$3.asn1.ASN1Util.oidHexToInt(Yu),Ju=l$3.asn1.x509.OID.oid2name(_c),Xu=_c.replace(/\./g," ");return Ju!=""?Ou+"ObjectIdentifier "+Ju+" ("+Xu+`)
`:Ou+"ObjectIdentifier ("+Xu+`)
`}if(Wu=="0a")return Ou+"ENUMERATED "+parseInt(Nu(Uu,Ru))+`
`;if(Wu=="0c")return Ou+"UTF8String '"+ne(Nu(Uu,Ru))+`'
`;if(Wu=="13")return Ou+"PrintableString '"+ne(Nu(Uu,Ru))+`'
`;if(Wu=="14")return Ou+"TeletexString '"+ne(Nu(Uu,Ru))+`'
`;if(Wu=="16")return Ou+"IA5String '"+ne(Nu(Uu,Ru))+`'
`;if(Wu=="17")return Ou+"UTCTime "+ne(Nu(Uu,Ru))+`
`;if(Wu=="18")return Ou+"GeneralizedTime "+ne(Nu(Uu,Ru))+`
`;if(Wu=="1a")return Ou+"VisualString '"+ne(Nu(Uu,Ru))+`'
`;if(Wu=="1e")return Ou+"BMPString '"+he(Nu(Uu,Ru))+`'
`;if(Wu=="30"){if(Uu.substr(Ru,4)=="3000")return Ou+`SEQUENCE {}
`;Ku=Ou+`SEQUENCE
`;var Zu=$u;if(((ep=Gu(Uu,Ru)).length==2||ep.length==3)&&Uu.substr(ep[0],2)=="06"&&Uu.substr(ep[ep.length-1],2)=="04"){Ju=Fu.oidname(Nu(Uu,ep[0]));var Xc=JSON.parse(JSON.stringify($u));Xc.x509ExtName=Ju,Zu=Xc}for(var _h=0;_h<ep.length;_h++)Ku+=Vu(Uu,Zu,ep[_h],Ou+"  ");return Ku}if(Wu=="31"){Ku=Ou+`SET
`;var ep=Gu(Uu,Ru);for(_h=0;_h<ep.length;_h++)Ku+=Vu(Uu,$u,ep[_h],Ou+"  ");return Ku}if((128&(Wu=parseInt(Wu,16)))!=0){var np=31&Wu;if((32&Wu)!=0){for(Ku=Ou+"["+np+`]
`,ep=Gu(Uu,Ru),_h=0;_h<ep.length;_h++)Ku+=Vu(Uu,$u,ep[_h],Ou+"  ");return Ku}if(qu=Nu(Uu,Ru),Me.isASN1HEX(qu)){var Ku=Ou+"["+np+`]
`;return Ku+=Vu(qu,$u,0,Ou+"  ")}return(qu.substr(0,8)=="68747470"||$u.x509ExtName==="subjectAltName"&&np==2)&&(qu=ne(qu)),Ku=Ou+"["+np+"] "+qu+`
`}return Ou+"UNKNOWN("+Wu+") "+Nu(Uu,Ru)+`
`},Me.isContextTag=function(_u,$u){var Ru,Ou;_u=_u.toLowerCase();try{Ru=parseInt(_u,16)}catch{return-1}if($u===void 0)return(192&Ru)==128;try{return $u.match(/^\[[0-9]+\]$/)!=null&&!((Ou=parseInt($u.substr(1,$u.length-1),10))>31)&&(192&Ru)==128&&(31&Ru)==Ou}catch{return!1}},Me.isASN1HEX=function(_u){var $u=Me;if(_u.length%2==1)return!1;var Ru=$u.getVblen(_u,0),Ou=_u.substr(0,2),Fu=$u.getL(_u,0);return _u.length-Ou.length-Fu.length==2*Ru},Me.checkStrictDER=function(_u,$u,Ru,Ou,Fu){var Nu=Me;if(Ru===void 0){if(typeof _u!="string")throw new Error("not hex string");if(_u=_u.toLowerCase(),!l$3.lang.String.isHex(_u))throw new Error("not hex string");Ru=_u.length,Fu=(Ou=_u.length/2)<128?1:Math.ceil(Ou.toString(16))+1}if(Nu.getL(_u,$u).length>2*Fu)throw new Error("L of TLV too long: idx="+$u);var Vu=Nu.getVblen(_u,$u);if(Vu>Ou)throw new Error("value of L too long than hex: idx="+$u);var Gu=Nu.getTLV(_u,$u),Uu=Gu.length-2-Nu.getL(_u,$u).length;if(Uu!==2*Vu)throw new Error("V string length and L's value not the same:"+Uu+"/"+2*Vu);if($u===0&&_u.length!=Gu.length)throw new Error("total length and TLV length unmatch:"+_u.length+"!="+Gu.length);var Hu=_u.substr($u,2);if(Hu==="02"){var Wu=Nu.getVidx(_u,$u);if(_u.substr(Wu,2)=="00"&&_u.charCodeAt(Wu+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Hu,16)){for(var Qu=Nu.getVblen(_u,$u),qu=0,Ku=Nu.getChildIdx(_u,$u),Yu=0;Yu<Ku.length;Yu++)qu+=Nu.getTLV(_u,Ku[Yu]).length,Nu.checkStrictDER(_u,Ku[Yu],Ru,Ou,Fu);if(2*Qu!=qu)throw new Error("sum of children's TLV length and L unmatch: "+2*Qu+"!="+qu)}},Me.oidname=function(_u){var $u=l$3.asn1;l$3.lang.String.isHex(_u)&&(_u=$u.ASN1Util.oidHexToInt(_u));var Ru=$u.x509.OID.oid2name(_u);return Ru===""&&(Ru=_u),Ru},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.x509!==void 0&&l$3.asn1.x509||(l$3.asn1.x509={}),l$3.asn1.x509.Certificate=function(_u){l$3.asn1.x509.Certificate.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERBitString,Ou=$u.DERSequence,Fu=$u.x509,Nu=Fu.TBSCertificate,Vu=Fu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Gu){this.params=Gu},this.sign=function(){var Gu=this.params,Uu=Gu.sigalg;Gu.sigalg.name!=null&&(Uu=Gu.sigalg.name);var Hu=Gu.tbsobj.getEncodedHex(),Wu=new l$3.crypto.Signature({alg:Uu});Wu.init(Gu.cakey),Wu.updateHex(Hu),Gu.sighex=Wu.sign()},this.getPEM=function(){return ae$1(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Gu=this.params;if(Gu.tbsobj!=null&&Gu.tbsobj!=null||(Gu.tbsobj=new Nu(Gu)),Gu.sighex==null&&Gu.cakey!=null&&this.sign(),Gu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Uu=[];return Uu.push(Gu.tbsobj),Uu.push(new Vu({name:Gu.sigalg})),Uu.push(new Ru({hex:"00"+Gu.sighex})),new Ou({array:Uu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.Certificate,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertificate=function(_u){l$3.asn1.x509.TBSCertificate.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.x509,Ou=$u.DERTaggedObject,Fu=$u.DERInteger,Nu=$u.DERSequence,Vu=Ru.AlgorithmIdentifier,Gu=Ru.Time,Uu=Ru.X500Name,Hu=Ru.Extensions,Wu=Ru.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Qu){this.params=Qu},this.getEncodedHex=function(){var Qu=[],qu=this.params;if(qu.version!=null||qu.version!=1){var Ku=2;qu.version!=null&&(Ku=qu.version-1);var Yu=new Ou({obj:new Fu({int:Ku})});Qu.push(Yu)}return Qu.push(new Fu(qu.serial)),Qu.push(new Vu({name:qu.sigalg})),Qu.push(new Uu(qu.issuer)),Qu.push(new Nu({array:[new Gu(qu.notbefore),new Gu(qu.notafter)]})),Qu.push(new Uu(qu.subject)),Qu.push(new Wu(Ee.getKey(qu.sbjpubkey))),qu.ext!==void 0&&qu.ext.length>0&&Qu.push(new Ou({tag:"a3",obj:new Hu(qu.ext)})),new l$3.asn1.DERSequence({array:Qu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.TBSCertificate,l$3.asn1.ASN1Object),l$3.asn1.x509.Extensions=function(_u){l$3.asn1.x509.Extensions.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERSequence,Ou=$u.x509;this.aParam=[],this.setByParam=function(Fu){this.aParam=Fu},this.getEncodedHex=function(){for(var Fu=[],Nu=0;Nu<this.aParam.length;Nu++){var Vu=this.aParam[Nu],Gu=Vu.extname,Uu=null;if(Vu.extn!=null)Uu=new Ou.PrivateExtension(Vu);else if(Gu=="subjectKeyIdentifier")Uu=new Ou.SubjectKeyIdentifier(Vu);else if(Gu=="keyUsage")Uu=new Ou.KeyUsage(Vu);else if(Gu=="subjectAltName")Uu=new Ou.SubjectAltName(Vu);else if(Gu=="issuerAltName")Uu=new Ou.IssuerAltName(Vu);else if(Gu=="basicConstraints")Uu=new Ou.BasicConstraints(Vu);else if(Gu=="cRLDistributionPoints")Uu=new Ou.CRLDistributionPoints(Vu);else if(Gu=="certificatePolicies")Uu=new Ou.CertificatePolicies(Vu);else if(Gu=="authorityKeyIdentifier")Uu=new Ou.AuthorityKeyIdentifier(Vu);else if(Gu=="extKeyUsage")Uu=new Ou.ExtKeyUsage(Vu);else if(Gu=="authorityInfoAccess")Uu=new Ou.AuthorityInfoAccess(Vu);else if(Gu=="cRLNumber")Uu=new Ou.CRLNumber(Vu);else if(Gu=="cRLReason")Uu=new Ou.CRLReason(Vu);else if(Gu=="ocspNonce")Uu=new Ou.OCSPNonce(Vu);else if(Gu=="ocspNoCheck")Uu=new Ou.OCSPNoCheck(Vu);else if(Gu=="adobeTimeStamp")Uu=new Ou.AdobeTimeStamp(Vu);else{if(Gu!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Vu));Uu=new Ou.SubjectDirectoryAttributes(Vu)}Uu!=null&&Fu.push(Uu)}return new Ru({array:Fu}).getEncodedHex()},_u!=null&&this.setByParam(_u)},fe$1(l$3.asn1.x509.Extensions,l$3.asn1.ASN1Object),l$3.asn1.x509.Extension=function(_u){l$3.asn1.x509.Extension.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERObjectIdentifier,Ou=$u.DEROctetString;$u.DERBitString;var Fu=$u.DERBoolean,Nu=$u.DERSequence;this.getEncodedHex=function(){var Vu=new Ru({oid:this.oid}),Gu=new Ou({hex:this.getExtnValueHex()}),Uu=new Array;return Uu.push(Vu),this.critical&&Uu.push(new Fu),Uu.push(Gu),new Nu({array:Uu}).getEncodedHex()},this.critical=!1,_u!==void 0&&_u.critical!==void 0&&(this.critical=_u.critical)},fe$1(l$3.asn1.x509.Extension,l$3.asn1.ASN1Object),l$3.asn1.x509.KeyUsage=function(_u){l$3.asn1.x509.KeyUsage.superclass.constructor.call(this,_u);var $u=Be.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",_u!==void 0&&(_u.bin!==void 0&&(this.asn1ExtnValue=new l$3.asn1.DERBitString(_u)),_u.names!==void 0&&_u.names.length!==void 0)){for(var Ru=_u.names,Ou="000000000",Fu=0;Fu<Ru.length;Fu++)for(var Nu=0;Nu<$u.length;Nu++)Ru[Fu]===$u[Nu]&&(Ou=Ou.substring(0,Nu)+"1"+Ou.substring(Nu+1,Ou.length));this.asn1ExtnValue=new l$3.asn1.DERBitString({bin:Ou})}},fe$1(l$3.asn1.x509.KeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.BasicConstraints=function(_u){l$3.asn1.x509.BasicConstraints.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.DERBoolean,Ou=$u.DERInteger,Fu=$u.DERSequence;this.getExtnValueHex=function(){var Nu=new Array;this.cA&&Nu.push(new Ru),this.pathLen>-1&&Nu.push(new Ou({int:this.pathLen}));var Vu=new Fu({array:Nu});return this.asn1ExtnValue=Vu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,_u!==void 0&&(_u.cA!==void 0&&(this.cA=_u.cA),_u.pathLen!==void 0&&(this.pathLen=_u.pathLen))},fe$1(l$3.asn1.x509.BasicConstraints,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLDistributionPoints=function(_u){l$3.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Ou){for(var Fu=[],Nu=0;Nu<Ou.length;Nu++)if(Ou[Nu]instanceof l$3.asn1.ASN1Object)Fu.push(Ou[Nu]);else{var Vu=new Ru.DistributionPoint(Ou[Nu]);Fu.push(Vu)}this.asn1ExtnValue=new $u.DERSequence({array:Fu})},this.setByOneURI=function(Ou){var Fu=new Ru.DistributionPoint({fulluri:Ou});this.setByDPArray([Fu])},this.oid="2.5.29.31",_u!==void 0&&(_u.array!==void 0?this.setByDPArray(_u.array):_u.uri!==void 0&&this.setByOneURI(_u.uri))},fe$1(l$3.asn1.x509.CRLDistributionPoints,l$3.asn1.x509.Extension),l$3.asn1.x509.DistributionPoint=function(_u){l$3.asn1.x509.DistributionPoint.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.x509.DistributionPointName;this.getEncodedHex=function(){var Ou=new $u.DERSequence;if(this.asn1DP!=null){var Fu=new $u.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Ou.appendASN1Object(Fu)}return this.hTLV=Ou.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.dpobj!==void 0?this.asn1DP=_u.dpobj:_u.dpname!==void 0?this.asn1DP=new Ru(_u.dpname):_u.fulluri!==void 0&&(this.asn1DP=new Ru({full:[{uri:_u.fulluri}]})))},fe$1(l$3.asn1.x509.DistributionPoint,l$3.asn1.ASN1Object),l$3.asn1.x509.DistributionPointName=function(_u){l$3.asn1.x509.DistributionPointName.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Ru({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},_u!==void 0)if($u.x509.GeneralNames.prototype.isPrototypeOf(_u))this.type="full",this.tag="a0",this.asn1V=_u;else{if(_u.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new $u.x509.GeneralNames(_u.full)}},fe$1(l$3.asn1.x509.DistributionPointName,l$3.asn1.ASN1Object),l$3.asn1.x509.CertificatePolicies=function(_u){l$3.asn1.x509.CertificatePolicies.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.x509,Ou=$u.DERSequence,Fu=Ru.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Nu=[],Vu=0;Vu<this.params.array.length;Vu++)Nu.push(new Fu(this.params.array[Vu]));var Gu=new Ou({array:Nu});return this.asn1ExtnValue=Gu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.CertificatePolicies,l$3.asn1.x509.Extension),l$3.asn1.x509.PolicyInformation=function(_u){l$3.asn1.x509.PolicyInformation.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.DERSequence,Ou=$u.DERObjectIdentifier,Fu=$u.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Nu=[new Ou(this.params.policyoid)];if(this.params.array!==void 0){for(var Vu=[],Gu=0;Gu<this.params.array.length;Gu++)Vu.push(new Fu(this.params.array[Gu]));Vu.length>0&&Nu.push(new Ru({array:Vu}))}return new Ru({array:Nu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.PolicyInformation,l$3.asn1.ASN1Object),l$3.asn1.x509.PolicyQualifierInfo=function(_u){l$3.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.DERSequence,Ou=$u.DERIA5String,Fu=$u.DERObjectIdentifier,Nu=$u.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Ru({array:[new Fu({oid:"1.3.6.1.5.5.7.2.1"}),new Ou({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Ru({array:[new Fu({oid:"1.3.6.1.5.5.7.2.2"}),new Nu(this.params.unotice)]}).getEncodedHex():void 0},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.PolicyQualifierInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.UserNotice=function(_u){l$3.asn1.x509.UserNotice.superclass.constructor.call(this,_u);var $u=l$3.asn1.DERSequence;l$3.asn1.DERInteger;var Ru=l$3.asn1.x509.DisplayText,Ou=l$3.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Fu=[];return this.params.noticeref!==void 0&&Fu.push(new Ou(this.params.noticeref)),this.params.exptext!==void 0&&Fu.push(new Ru(this.params.exptext)),new $u({array:Fu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.UserNotice,l$3.asn1.ASN1Object),l$3.asn1.x509.NoticeReference=function(_u){l$3.asn1.x509.NoticeReference.superclass.constructor.call(this,_u);var $u=l$3.asn1.DERSequence,Ru=l$3.asn1.DERInteger,Ou=l$3.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Fu=[];if(this.params.org!==void 0&&Fu.push(new Ou(this.params.org)),this.params.noticenum!==void 0){for(var Nu=[],Vu=this.params.noticenum,Gu=0;Gu<Vu.length;Gu++)Nu.push(new Ru(Vu[Gu]));Fu.push(new $u({array:Nu}))}if(Fu.length==0)throw new Error("parameter is empty");return new $u({array:Fu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.NoticeReference,l$3.asn1.ASN1Object),l$3.asn1.x509.DisplayText=function(_u){l$3.asn1.x509.DisplayText.superclass.constructor.call(this,_u),this.hT="0c",_u!==void 0&&(_u.type==="ia5"?this.hT="16":_u.type==="vis"?this.hT="1a":_u.type==="bmp"&&(this.hT="1e"))},fe$1(l$3.asn1.x509.DisplayText,l$3.asn1.DERAbstractString),l$3.asn1.x509.ExtKeyUsage=function(_u){l$3.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,_u);var $u=l$3.asn1;this.setPurposeArray=function(Ru){this.asn1ExtnValue=new $u.DERSequence;for(var Ou=0;Ou<Ru.length;Ou++){var Fu=new $u.DERObjectIdentifier(Ru[Ou]);this.asn1ExtnValue.appendASN1Object(Fu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",_u!==void 0&&_u.array!==void 0&&this.setPurposeArray(_u.array)},fe$1(l$3.asn1.x509.ExtKeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityKeyIdentifier=function(_u){l$3.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$3,Ru=$u.asn1,Ou=Ru.DERTaggedObject,Fu=Ru.x509.GeneralNames;$u.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Nu=new Array;this.asn1KID&&Nu.push(new Ou({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Nu.push(new Ou({explicit:!1,tag:"a1",obj:new Fu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Nu.push(new Ou({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Vu=new Ru.DERSequence({array:Nu});return this.asn1ExtnValue=Vu,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Nu){if(Nu.str!==void 0||Nu.hex!==void 0)this.asn1KID=new l$3.asn1.DEROctetString(Nu);else if(typeof Nu=="object"&&l$3.crypto.Util.isKey(Nu)||typeof Nu=="string"&&Nu.indexOf("BEGIN ")!=-1){var Vu=Nu;typeof Nu=="string"&&(Vu=Ee.getKey(Nu));var Gu=Ee.getKeyID(Vu);this.asn1KID=new l$3.asn1.DEROctetString({hex:Gu})}},this.setCertIssuerByParam=function(Nu){Nu.str!==void 0||Nu.ldapstr!==void 0||Nu.hex!==void 0||Nu.certsubject!==void 0||Nu.certissuer!==void 0?this.asn1CertIssuer=new l$3.asn1.x509.X500Name(Nu):typeof Nu=="string"&&Nu.indexOf("BEGIN ")!=-1&&Nu.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$3.asn1.x509.X500Name({certissuer:Nu}))},this.setCertSNByParam=function(Nu){if(Nu.str!==void 0||Nu.bigint!==void 0||Nu.hex!==void 0)this.asn1CertSN=new l$3.asn1.DERInteger(Nu);else if(typeof Nu=="string"&&Nu.indexOf("BEGIN ")!=-1&&Nu.indexOf("CERTIFICATE")){var Vu=new Be;Vu.readCertPEM(Nu);var Gu=Vu.getSerialNumberHex();this.asn1CertSN=new l$3.asn1.DERInteger({hex:Gu})}},this.oid="2.5.29.35",_u!==void 0&&(_u.kid!==void 0&&this.setKIDByParam(_u.kid),_u.issuer!==void 0&&this.setCertIssuerByParam(_u.issuer),_u.sn!==void 0&&this.setCertSNByParam(_u.sn),_u.issuersn!==void 0&&typeof _u.issuersn=="string"&&_u.issuersn.indexOf("BEGIN ")!=-1&&_u.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(_u.issuersn),this.setCertIssuerByParam(_u.issuersn)))},fe$1(l$3.asn1.x509.AuthorityKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectKeyIdentifier=function(_u){l$3.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$3.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ru){if(Ru.str!==void 0||Ru.hex!==void 0)this.asn1KID=new $u(Ru);else if(typeof Ru=="object"&&l$3.crypto.Util.isKey(Ru)||typeof Ru=="string"&&Ru.indexOf("BEGIN")!=-1){var Ou=Ru;typeof Ru=="string"&&(Ou=Ee.getKey(Ru));var Fu=Ee.getKeyID(Ou);this.asn1KID=new l$3.asn1.DEROctetString({hex:Fu})}},this.oid="2.5.29.14",_u!==void 0&&_u.kid!==void 0&&this.setKIDByParam(_u.kid)},fe$1(l$3.asn1.x509.SubjectKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityInfoAccess=function(_u){l$3.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,_u),this.setAccessDescriptionArray=function($u){for(var Ru=new Array,Ou=l$3.asn1,Fu=Ou.DERSequence,Nu=Ou.DERObjectIdentifier,Vu=Ou.x509.GeneralName,Gu=0;Gu<$u.length;Gu++){var Uu,Hu=$u[Gu];if(Hu.ocsp!==void 0)Uu=new Fu({array:[new Nu({oid:"1.3.6.1.5.5.7.48.1"}),new Vu({uri:Hu.ocsp})]});else{if(Hu.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Hu));Uu=new Fu({array:[new Nu({oid:"1.3.6.1.5.5.7.48.2"}),new Vu({uri:Hu.caissuer})]})}Ru.push(Uu)}this.asn1ExtnValue=new Fu({array:Ru})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",_u!==void 0&&_u.array!==void 0&&this.setAccessDescriptionArray(_u.array)},fe$1(l$3.asn1.x509.AuthorityInfoAccess,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectAltName=function(_u){l$3.asn1.x509.SubjectAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$1(l$3.asn1.x509.SubjectAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.IssuerAltName=function(_u){l$3.asn1.x509.IssuerAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$1(l$3.asn1.x509.IssuerAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectDirectoryAttributes=function(_u){l$3.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.DERSequence,Ou=$u.ASN1Util.newObject,Fu=$u.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Nu=[],Vu=0;Vu<this.params.array.length;Vu++){var Gu=this.params.array[Vu],Uu={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Gu.attr=="dateOfBirth")Uu.seq[0].oid=Fu(Gu.attr),Uu.seq[1].set[0]={gentime:Gu.str};else if(Gu.attr=="placeOfBirth")Uu.seq[0].oid=Fu(Gu.attr),Uu.seq[1].set[0]={utf8str:Gu.str};else if(Gu.attr=="gender")Uu.seq[0].oid=Fu(Gu.attr),Uu.seq[1].set[0]={prnstr:Gu.str};else if(Gu.attr=="countryOfCitizenship")Uu.seq[0].oid=Fu(Gu.attr),Uu.seq[1].set[0]={prnstr:Gu.str};else{if(Gu.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Gu.attr);Uu.seq[0].oid=Fu(Gu.attr),Uu.seq[1].set[0]={prnstr:Gu.str}}Nu.push(new Ou(Uu))}var Hu=new Ru({array:Nu});return this.asn1ExtnValue=Hu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",_u!==void 0&&(this.params=_u)},fe$1(l$3.asn1.x509.SubjectDirectoryAttributes,l$3.asn1.x509.Extension),l$3.asn1.x509.PrivateExtension=function(_u){l$3.asn1.x509.PrivateExtension.superclass.constructor.call(this,_u);var $u=l$3,Ru=$u.lang.String.isHex,Ou=$u.asn1,Fu=Ou.x509.OID.name2oid,Nu=Ou.ASN1Util.newObject;this.params=null,this.setByParam=function(Vu){this.oid=Fu(Vu.extname),this.params=Vu},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Vu=this.params.extn;if(typeof Vu=="string"&&Ru(Vu))return Vu;if(typeof Vu=="object")try{return Nu(Vu).getEncodedHex()}catch{}throw new Error("unsupported extn value")},_u!=null&&this.setByParam(_u)},fe$1(l$3.asn1.x509.PrivateExtension,l$3.asn1.x509.Extension),l$3.asn1.x509.CRL=function(_u){l$3.asn1.x509.CRL.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERSequence,Ou=$u.DERBitString,Fu=$u.x509,Nu=Fu.AlgorithmIdentifier,Vu=Fu.TBSCertList;this.params=void 0,this.setByParam=function(Gu){this.params=Gu},this.sign=function(){var Gu=new Vu(this.params).getEncodedHex(),Uu=new l$3.crypto.Signature({alg:this.params.sigalg});Uu.init(this.params.cakey),Uu.updateHex(Gu);var Hu=Uu.sign();this.params.sighex=Hu},this.getPEM=function(){return ae$1(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Gu=this.params;if(Gu.tbsobj==null&&(Gu.tbsobj=new Vu(Gu)),Gu.sighex==null&&Gu.cakey!=null&&this.sign(),Gu.sighex==null)throw new Error("sighex or cakey parameter not defined");var Uu=[];return Uu.push(Gu.tbsobj),Uu.push(new Nu({name:Gu.sigalg})),Uu.push(new Ou({hex:"00"+Gu.sighex})),new Ru({array:Uu}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRL,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertList=function(_u){l$3.asn1.x509.TBSCertList.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERInteger,Ou=$u.DERSequence,Fu=$u.DERTaggedObject;$u.DERObjectIdentifier;var Nu=$u.x509,Vu=Nu.AlgorithmIdentifier,Gu=Nu.Time,Uu=Nu.Extensions,Hu=Nu.X500Name;this.params=null,this.setByParam=function(Wu){this.params=Wu},this.getRevCertSequence=function(){for(var Wu=[],Qu=this.params.revcert,qu=0;qu<Qu.length;qu++){var Ku=[new Ru(Qu[qu].sn),new Gu(Qu[qu].date)];Qu[qu].ext!=null&&Ku.push(new Uu(Qu[qu].ext)),Wu.push(new Ou({array:Ku}))}return new Ou({array:Wu})},this.getEncodedHex=function(){var Wu=[],Qu=this.params;if(Qu.version!=null){var qu=Qu.version-1,Ku=new Ru({int:qu});Wu.push(Ku)}if(Wu.push(new Vu({name:Qu.sigalg})),Wu.push(new Hu(Qu.issuer)),Wu.push(new Gu(Qu.thisupdate)),Qu.nextupdate!=null&&Wu.push(new Gu(Qu.nextupdate)),Qu.revcert!=null&&Wu.push(this.getRevCertSequence()),Qu.ext!=null){var Yu=new Uu(Qu.ext);Wu.push(new Fu({tag:"a0",explicit:!0,obj:Yu}))}return new Ou({array:Wu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.TBSCertList,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLEntry=function(_u){l$3.asn1.x509.CRLEntry.superclass.constructor.call(this);var $u=l$3.asn1;this.setCertSerial=function(Ru){this.sn=new $u.DERInteger(Ru)},this.setRevocationDate=function(Ru){this.time=new $u.x509.Time(Ru)},this.getEncodedHex=function(){var Ru=new $u.DERSequence({array:[this.sn,this.time]});return this.TLV=Ru.getEncodedHex(),this.TLV},_u!==void 0&&(_u.time!==void 0&&this.setRevocationDate(_u.time),_u.sn!==void 0&&this.setCertSerial(_u.sn))},fe$1(l$3.asn1.x509.CRLEntry,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLNumber=function(_u){l$3.asn1.x509.CRLNumber.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRLNumber,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLReason=function(_u){l$3.asn1.x509.CRLReason.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.CRLReason,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNonce=function(_u){l$3.asn1.x509.OCSPNonce.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.OCSPNonce,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNoCheck=function(_u){l$3.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",_u!=null&&(this.params=_u)},fe$1(l$3.asn1.x509.OCSPNoCheck,l$3.asn1.x509.Extension),l$3.asn1.x509.AdobeTimeStamp=function(_u){l$3.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,_u);var $u=l$3.asn1,Ru=$u.DERInteger,Ou=$u.DERBoolean,Fu=$u.DERSequence,Nu=$u.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Vu=this.params,Gu=[new Ru(1)];return Gu.push(new Nu({uri:Vu.uri})),Vu.reqauth!=null&&Gu.push(new Ou(Vu.reqauth)),this.asn1ExtnValue=new Fu({array:Gu}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.AdobeTimeStamp,l$3.asn1.x509.Extension),l$3.asn1.x509.X500Name=function(_u){l$3.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$3.asn1,Ru=$u.x509,Ou=Ru.RDN;this.setByString=function(Fu,Nu){Nu!==void 0&&(this.sRule=Nu);var Vu=Fu.split("/");Vu.shift();for(var Gu=[],Uu=0;Uu<Vu.length;Uu++)if(Vu[Uu].match(/^[^=]+=.+$/))Gu.push(Vu[Uu]);else{var Hu=Gu.length-1;Gu[Hu]=Gu[Hu]+"/"+Vu[Uu]}for(Uu=0;Uu<Gu.length;Uu++)this.asn1Array.push(new Ou({str:Gu[Uu],rule:this.sRule}))},this.setByLdapString=function(Fu,Nu){Nu!==void 0&&(this.sRule=Nu);var Vu=Ru.X500Name.ldapToCompat(Fu);this.setByString(Vu,Nu)},this.setByObject=function(Fu,Nu){for(var Vu in Nu!==void 0&&(this.sRule=Nu),Fu)if(Fu.hasOwnProperty(Vu)){var Gu=new Ou({str:Vu+"="+Fu[Vu],rule:this.sRule});this.asn1Array?this.asn1Array.push(Gu):this.asn1Array=[Gu]}},this.setByParam=function(Fu){var Nu;Fu.rule!==void 0&&(this.sRule=Fu.rule),Fu.array!==void 0?this.paramArray=Fu.array:Fu.str!==void 0?this.setByString(Fu.str):Fu.ldapstr!==void 0?this.setByLdapString(Fu.ldapstr):Fu.hex!==void 0?this.hTLV=Fu.hex:Fu.certissuer!==void 0?((Nu=new Be).readCertPEM(Fu.certissuer),this.hTLV=Nu.getIssuerHex()):Fu.certsubject!==void 0?((Nu=new Be).readCertPEM(Fu.certsubject),this.hTLV=Nu.getSubjectHex()):typeof Fu=="object"&&Fu.certsubject===void 0&&Fu.certissuer===void 0&&this.setByObject(Fu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Fu=0;Fu<this.paramArray.length;Fu++){var Nu={array:this.paramArray[Fu]};this.sRule!="utf8"&&(Nu.rule=this.sRule);var Vu=new Ou(Nu);this.asn1Array.push(Vu)}var Gu=new $u.DERSequence({array:this.asn1Array});return this.hTLV=Gu.getEncodedHex(),this.hTLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.X500Name,l$3.asn1.ASN1Object),l$3.asn1.x509.X500Name.compatToLDAP=function(_u){if(_u.substr(0,1)!=="/")throw"malformed input";var $u=(_u=_u.substr(1)).split("/");return $u.reverse(),($u=$u.map(function(Ru){return Ru.replace(/,/,"\\,")})).join(",")},l$3.asn1.x509.X500Name.onelineToLDAP=function(_u){return l$3.asn1.x509.X500Name.compatToLDAP(_u)},l$3.asn1.x509.X500Name.ldapToCompat=function(_u){for(var $u=_u.split(","),Ru=!1,Ou=[],Fu=0;$u.length>0;Fu++){var Nu=$u.shift();if(Ru===!0){var Vu=(Ou.pop()+","+Nu).replace(/\\,/g,",");Ou.push(Vu),Ru=!1}else Ou.push(Nu);Nu.substr(-1,1)==="\\"&&(Ru=!0)}return(Ou=Ou.map(function(Gu){return Gu.replace("/","\\/")})).reverse(),"/"+Ou.join("/")},l$3.asn1.x509.X500Name.ldapToOneline=function(_u){return l$3.asn1.x509.X500Name.ldapToCompat(_u)},l$3.asn1.x509.RDN=function(_u){l$3.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$3.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Ru){Ru.rule!==void 0&&(this.sRule=Ru.rule),Ru.str!==void 0&&this.addByMultiValuedString(Ru.str),Ru.array!==void 0&&(this.paramArray=Ru.array)},this.addByString=function(Ru){this.asn1Array.push(new l$3.asn1.x509.AttributeTypeAndValue({str:Ru,rule:this.sRule}))},this.addByMultiValuedString=function(Ru){for(var Ou=l$3.asn1.x509.RDN.parseString(Ru),Fu=0;Fu<Ou.length;Fu++)this.addByString(Ou[Fu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Ru=0;Ru<this.paramArray.length;Ru++){var Ou=this.paramArray[Ru];Ou.rule!==void 0&&this.sRule!="utf8"&&(Ou.rule=this.sRule);var Fu=new $u(Ou);this.asn1Array.push(Fu)}var Nu=new l$3.asn1.DERSet({array:this.asn1Array});return this.TLV=Nu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.RDN,l$3.asn1.ASN1Object),l$3.asn1.x509.RDN.parseString=function(_u){for(var $u=_u.split(/\+/),Ru=!1,Ou=[],Fu=0;$u.length>0;Fu++){var Nu=$u.shift();if(Ru===!0){var Vu=(Ou.pop()+"+"+Nu).replace(/\\\+/g,"+");Ou.push(Vu),Ru=!1}else Ou.push(Nu);Nu.substr(-1,1)==="\\"&&(Ru=!0)}var Gu=!1,Uu=[];for(Fu=0;Ou.length>0;Fu++){if(Nu=Ou.shift(),Gu===!0){var Hu=Uu.pop();Nu.match(/"$/)?(Vu=(Hu+"+"+Nu).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Uu.push(Vu),Gu=!1):Uu.push(Hu+"+"+Nu)}else Uu.push(Nu);Nu.match(/^[^=]+="/)&&(Gu=!0)}return Uu},l$3.asn1.x509.AttributeTypeAndValue=function(_u){l$3.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var $u=l$3,Ru=$u.asn1,Ou=Ru.DERSequence,Fu=Ru.DERUTF8String,Nu=Ru.DERPrintableString,Vu=Ru.DERTeletexString,Gu=Ru.DERIA5String,Uu=Ru.DERVisibleString,Hu=Ru.DERBMPString,Wu=$u.lang.String.isMail,Qu=$u.lang.String.isPrintable;this.setByParam=function(qu){if(qu.rule!==void 0&&(this.sRule=qu.rule),qu.ds!==void 0&&(this.dsType=qu.ds),qu.value===void 0&&qu.str!==void 0){var Ku=qu.str.match(/^([^=]+)=(.+)$/);if(!Ku)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Ku[1],this.sValue=Ku[2]}else this.sType=qu.type,this.sValue=qu.value},this.setByString=function(qu,Ku){Ku!==void 0&&(this.sRule=Ku);var Yu=qu.match(/^([^=]+)=(.+)$/);if(!Yu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Yu[1],Yu[2])},this._getDsType=function(){var qu=this.sType,Ku=this.sValue,Yu=this.sRule;return Yu==="prn"?qu=="CN"&&Wu(Ku)?"ia5":Qu(Ku)?"prn":"utf8":Yu==="utf8"?qu=="CN"&&Wu(Ku)?"ia5":qu=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(qu,Ku,Yu){Yu!==void 0&&(this.sRule=Yu),this.sType=qu,this.sValue=Ku},this.getValueObj=function(qu,Ku){if(qu=="utf8")return new Fu({str:Ku});if(qu=="prn")return new Nu({str:Ku});if(qu=="tel")return new Vu({str:Ku});if(qu=="ia5")return new Gu({str:Ku});if(qu=="vis")return new Uu({str:Ku});if(qu=="bmp")return new Hu({str:Ku});throw new Error("unsupported directory string type: type="+qu+" value="+Ku)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var qu=l$3.asn1.x509.OID.atype2obj(this.sType),Ku=this.getValueObj(this.dsType,this.sValue),Yu=new Ou({array:[qu,Ku]});return this.TLV=Yu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.AttributeTypeAndValue,l$3.asn1.ASN1Object),l$3.asn1.x509.SubjectPublicKeyInfo=function(_u){l$3.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var $u=l$3,Ru=$u.asn1,Ou=Ru.DERInteger,Fu=Ru.DERBitString,Nu=Ru.DERObjectIdentifier,Vu=Ru.DERSequence,Gu=Ru.ASN1Util.newObject,Uu=Ru.x509.AlgorithmIdentifier,Hu=$u.crypto;Hu.ECDSA,Hu.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Vu({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Wu=this.getASN1Object();return this.hTLV=Wu.getEncodedHex(),this.hTLV},this.setPubKey=function(Wu){try{if(Wu instanceof X$2){var Qu=Gu({seq:[{int:{bigint:Wu.n}},{int:{int:Wu.e}}]}).getEncodedHex();this.asn1AlgId=new Uu({name:"rsaEncryption"}),this.asn1SubjPKey=new Fu({hex:"00"+Qu})}}catch{}try{if(Wu instanceof l$3.crypto.ECDSA){var qu=new Nu({name:Wu.curveName});this.asn1AlgId=new Uu({name:"ecPublicKey",asn1params:qu}),this.asn1SubjPKey=new Fu({hex:"00"+Wu.pubKeyHex})}}catch{}try{if(Wu instanceof l$3.crypto.DSA){qu=new Gu({seq:[{int:{bigint:Wu.p}},{int:{bigint:Wu.q}},{int:{bigint:Wu.g}}]}),this.asn1AlgId=new Uu({name:"dsa",asn1params:qu});var Ku=new Ou({bigint:Wu.y});this.asn1SubjPKey=new Fu({hex:"00"+Ku.getEncodedHex()})}}catch{}},_u!==void 0&&this.setPubKey(_u)},fe$1(l$3.asn1.x509.SubjectPublicKeyInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.Time=function(_u){l$3.asn1.x509.Time.superclass.constructor.call(this);var $u=l$3.asn1,Ru=$u.DERUTCTime,Ou=$u.DERGeneralizedTime;this.setTimeParams=function(Fu){this.timeParams=Fu},this.getEncodedHex=function(){var Fu=null;return Fu=this.timeParams!=null?this.type=="utc"?new Ru(this.timeParams):new Ou(this.timeParams):this.type=="utc"?new Ru:new Ou,this.TLV=Fu.getEncodedHex(),this.TLV},this.type="utc",_u!==void 0&&(_u.type!==void 0?this.type=_u.type:_u.str!==void 0&&(_u.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),_u.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=_u)},fe$1(l$3.asn1.x509.Time,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier=function(_u){l$3.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var $u=l$3.asn1,Ru=$u.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Fu=null;for(var Nu in Ru)Nu===this.nameAlg&&(Fu=Ru[Nu]);if(Fu!==null)return this.hTLV=Fu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=$u.x509.OID.name2obj(this.nameAlg));var Vu=[this.asn1Alg];this.asn1Params!==null&&Vu.push(this.asn1Params);var Gu=new $u.DERSequence({array:Vu});return this.hTLV=Gu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.name!==void 0&&(this.nameAlg=_u.name),_u.asn1params!==void 0&&(this.asn1Params=_u.asn1params),_u.paramempty!==void 0&&(this.paramEmpty=_u.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Ou=this.nameAlg.toLowerCase();Ou.substr(-7,7)!=="withdsa"&&Ou.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new $u.DERNull)}},fe$1(l$3.asn1.x509.AlgorithmIdentifier,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$3.asn1.x509.GeneralName=function(_u){l$3.asn1.x509.GeneralName.superclass.constructor.call(this);var $u={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Ru=l$3.asn1;Ru.DERSequence;var Ou=Ru.DEROctetString,Fu=Ru.DERIA5String,Nu=Ru.DERTaggedObject,Vu=Ru.ASN1Object,Gu=Ru.x509.X500Name,Uu=le;this.explicit=!1,this.setByParam=function(Hu){var Wu=null;if(Hu!==void 0){if(Hu.rfc822!==void 0&&(this.type="rfc822",Wu=new Fu({str:Hu[this.type]})),Hu.dns!==void 0&&(this.type="dns",Wu=new Fu({str:Hu[this.type]})),Hu.uri!==void 0&&(this.type="uri",Wu=new Fu({str:Hu[this.type]})),Hu.dn!==void 0&&(this.type="dn",this.explicit=!0,Wu=typeof Hu.dn=="string"?new Gu({str:Hu.dn}):Hu.dn instanceof l$3.asn1.x509.X500Name?Hu.dn:new Gu(Hu.dn)),Hu.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Wu=new Gu({ldapstr:Hu.ldapdn})),Hu.certissuer!==void 0){this.type="dn",this.explicit=!0;var Qu=null;if((Ku=Hu.certissuer).match(/^[0-9A-Fa-f]+$/),Ku.indexOf("-----BEGIN ")!=-1&&(Qu=Uu(Ku)),Qu==null)throw"certissuer param not cert";(Yu=new Be).hex=Qu;var qu=Yu.getIssuerHex();(Wu=new Vu).hTLV=qu}if(Hu.certsubj!==void 0){this.type="dn",this.explicit=!0;var Ku,Yu;if(Qu=null,(Ku=Hu.certsubj).match(/^[0-9A-Fa-f]+$/),Ku.indexOf("-----BEGIN ")!=-1&&(Qu=Uu(Ku)),Qu==null)throw"certsubj param not cert";(Yu=new Be).hex=Qu,qu=Yu.getSubjectHex(),(Wu=new Vu).hTLV=qu}if(Hu.ip!==void 0){this.type="ip",this.explicit=!1;var _c,Ju=Hu.ip,Xu="malformed IP address";if(Ju.match(/^[0-9.]+[.][0-9.]+$/)){if((_c=function(Zu){Zu=(Zu=(Zu=Zu.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return Zu.split(/,/).map(function(Xc,_h,ep){var np=parseInt(Xc);if(np<0||255<np)throw"integer not in range 0-255";return("00"+np.toString(16)).slice(-2)}).join("")}catch(Xc){throw"malformed integer array string: "+Xc}}("["+Ju.split(".").join(",")+"]")).length!==8)throw Xu}else if(Ju.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))_c=function(Zu){var Xc="malformed IPv6 address";if(!Zu.match(/^[0-9A-Fa-f:]+$/))throw Xc;var _h=(Zu=Zu.toLowerCase()).split(":").length-1;if(_h<2)throw Xc;var ep=":".repeat(7-_h+2),np=(Zu=Zu.replace("::",ep)).split(":");if(np.length!=8)throw Xc;for(var ap=0;ap<8;ap++)np[ap]=("0000"+np[ap]).slice(-4);return np.join("")}(Ju);else{if(!Ju.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Xu;_c=Ju}Wu=new Ou({hex:_c})}if(this.type==null)throw"unsupported type in params="+Hu;this.asn1Obj=new Nu({explicit:this.explicit,tag:$u[this.type],obj:Wu})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$1(l$3.asn1.x509.GeneralName,l$3.asn1.ASN1Object),l$3.asn1.x509.GeneralNames=function(_u){l$3.asn1.x509.GeneralNames.superclass.constructor.call(this);var $u=l$3.asn1;this.setByParamArray=function(Ru){for(var Ou=0;Ou<Ru.length;Ou++){var Fu=new $u.x509.GeneralName(Ru[Ou]);this.asn1Array.push(Fu)}},this.getEncodedHex=function(){return new $u.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,_u!==void 0&&this.setByParamArray(_u)},fe$1(l$3.asn1.x509.GeneralNames,l$3.asn1.ASN1Object),l$3.asn1.x509.OID=new function(_u){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];if(this.name2oidList[$u]===void 0)throw"Name of ObjectIdentifier not defined: "+$u;var Ru=this.name2oidList[$u],Ou=new l$3.asn1.DERObjectIdentifier({oid:Ru});return this.objCache[$u]=Ou,Ou},this.atype2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];var Ru;if($u.match(/^\d+\.\d+\.[0-9.]+$/))Ru=$u;else if(this.atype2oidList[$u]!==void 0)Ru=this.atype2oidList[$u];else{if(this.name2oidList[$u]===void 0)throw"AttributeType name undefined: "+$u;Ru=this.name2oidList[$u]}var Ou=new l$3.asn1.DERObjectIdentifier({oid:Ru});return this.objCache[$u]=Ou,Ou}},l$3.asn1.x509.OID.oid2name=function(_u){var $u=l$3.asn1.x509.OID.name2oidList;for(var Ru in $u)if($u[Ru]==_u)return Ru;return""},l$3.asn1.x509.OID.oid2atype=function(_u){var $u=l$3.asn1.x509.OID.atype2oidList;for(var Ru in $u)if($u[Ru]==_u)return Ru;return _u},l$3.asn1.x509.OID.name2oid=function(_u){if(_u.match(/^[0-9.]+$/))return _u;var $u=l$3.asn1.x509.OID.name2oidList;return $u[_u]===void 0?"":$u[_u]},l$3.asn1.x509.X509Util={},l$3.asn1.x509.X509Util.newCertPEM=function(_u){var $u=l$3.asn1.x509;return $u.TBSCertificate,new $u.Certificate(_u).getPEM()},X$2.getPosArrayOfChildrenFromHex=function(_u){return Me.getChildIdx(_u,0)},X$2.getHexValueArrayOfChildrenFromHex=function(_u){var $u,Ru=Me.getV,Ou=Ru(_u,($u=X$2.getPosArrayOfChildrenFromHex(_u))[0]),Fu=Ru(_u,$u[1]),Nu=Ru(_u,$u[2]),Vu=Ru(_u,$u[3]),Gu=Ru(_u,$u[4]),Uu=Ru(_u,$u[5]),Hu=Ru(_u,$u[6]),Wu=Ru(_u,$u[7]),Qu=Ru(_u,$u[8]);return($u=new Array).push(Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu),$u},X$2.prototype.readPrivateKeyFromPEMString=function(_u){var $u=le(_u),Ru=X$2.getHexValueArrayOfChildrenFromHex($u);this.setPrivateEx(Ru[1],Ru[2],Ru[3],Ru[4],Ru[5],Ru[6],Ru[7],Ru[8])},X$2.prototype.readPKCS5PrvKeyHex=function(_u){var $u=X$2.getHexValueArrayOfChildrenFromHex(_u);this.setPrivateEx($u[1],$u[2],$u[3],$u[4],$u[5],$u[6],$u[7],$u[8])},X$2.prototype.readPKCS8PrvKeyHex=function(_u){var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu=Me,Wu=Hu.getVbyListEx;if(Hu.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");try{$u=Wu(_u,0,[2,0,1],"02"),Ru=Wu(_u,0,[2,0,2],"02"),Ou=Wu(_u,0,[2,0,3],"02"),Fu=Wu(_u,0,[2,0,4],"02"),Nu=Wu(_u,0,[2,0,5],"02"),Vu=Wu(_u,0,[2,0,6],"02"),Gu=Wu(_u,0,[2,0,7],"02"),Uu=Wu(_u,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu)},X$2.prototype.readPKCS5PubKeyHex=function(_u){var $u=Me,Ru=$u.getV;if($u.isASN1HEX(_u)===!1)throw new Error("keyHex is not ASN.1 hex string");var Ou=$u.getChildIdx(_u,0);if(Ou.length!==2||_u.substr(Ou[0],2)!=="02"||_u.substr(Ou[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Fu=Ru(_u,Ou[0]),Nu=Ru(_u,Ou[1]);this.setPublic(Fu,Nu)},X$2.prototype.readPKCS8PubKeyHex=function(_u){var $u=Me;if($u.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");if($u.getTLVbyListEx(_u,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Ru=$u.getTLVbyListEx(_u,0,[1,0]);this.readPKCS5PubKeyHex(Ru)},X$2.prototype.readCertPubKeyHex=function(_u,$u){var Ru,Ou;(Ru=new Be).readCertHex(_u),Ou=Ru.getPublicKeyHex(),this.readPKCS8PubKeyHex(Ou)},X$2.prototype.sign=function(_u,$u){var Ru,Ou=(Ru=_u,l$3.crypto.Util.hashString(Ru,$u));return this.signWithMessageHash(Ou,$u)},X$2.prototype.signWithMessageHash=function(_u,$u){var Ru=G$2(l$3.crypto.Util.getPaddedDigestInfoHex(_u,$u,this.n.bitLength()),16);return Ie(this.doPrivate(Ru).toString(16),this.n.bitLength())},X$2.prototype.signPSS=function(_u,$u,Ru){var Ou,Fu=(Ou=oe$1(_u),l$3.crypto.Util.hashHex(Ou,$u));return Ru===void 0&&(Ru=-1),this.signWithMessageHashPSS(Fu,$u,Ru)},X$2.prototype.signWithMessageHashPSS=function(_u,$u,Ru){var Ou,Fu=re$1(_u),Nu=Fu.length,Vu=this.n.bitLength()-1,Gu=Math.ceil(Vu/8),Uu=function(Ju){return l$3.crypto.Util.hashHex(Ju,$u)};if(Ru===-1||Ru===void 0)Ru=Nu;else if(Ru===-2)Ru=Gu-Nu-2;else if(Ru<-2)throw new Error("invalid salt length");if(Gu<Nu+Ru+2)throw new Error("data too long");var Hu="";Ru>0&&(Hu=new Array(Ru),new j$1().nextBytes(Hu),Hu=String.fromCharCode.apply(String,Hu));var Wu=re$1(Uu(oe$1("\0\0\0\0\0\0\0\0"+Fu+Hu))),Qu=[];for(Ou=0;Ou<Gu-Ru-Nu-2;Ou+=1)Qu[Ou]=0;var qu=String.fromCharCode.apply(String,Qu)+""+Hu,Ku=Se$1(Wu,qu.length,Uu),Yu=[];for(Ou=0;Ou<qu.length;Ou+=1)Yu[Ou]=qu.charCodeAt(Ou)^Ku.charCodeAt(Ou);var _c=65280>>8*Gu-Vu&255;for(Yu[0]&=~_c,Ou=0;Ou<Nu;Ou++)Yu.push(Wu.charCodeAt(Ou));return Yu.push(188),Ie(this.doPrivate(new c$2(Yu)).toString(16),this.n.bitLength())},X$2.prototype.verify=function(_u,$u){if(($u=$u.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Ru=G$2($u,16),Ou=this.n.bitLength();if(Ru.bitLength()>Ou)return!1;var Fu=this.doPublic(Ru).toString(16);if(Fu.length+3!=Ou/4)return!1;var Nu=Ce(Fu.replace(/^1f+00/,""));if(Nu.length==0)return!1;var Vu,Gu=Nu[0];return Nu[1]==(Vu=_u,l$3.crypto.Util.hashString(Vu,Gu))},X$2.prototype.verifyWithMessageHash=function(_u,$u){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Ru=G$2($u,16);if(Ru.bitLength()>this.n.bitLength())return 0;var Ou=Ce(this.doPublic(Ru).toString(16).replace(/^1f+00/,""));return Ou.length!=0&&(Ou[0],Ou[1]==_u)},X$2.prototype.verifyPSS=function(_u,$u,Ru,Ou){var Fu=function(Nu){return l$3.crypto.Util.hashHex(Nu,Ru)}(oe$1(_u));return Ou===void 0&&(Ou=-1),this.verifyWithMessageHashPSS(Fu,$u,Ru,Ou)},X$2.prototype.verifyWithMessageHashPSS=function(_u,$u,Ru,Ou){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Fu,Nu=new c$2($u,16),Vu=function(Zu){return l$3.crypto.Util.hashHex(Zu,Ru)},Gu=re$1(_u),Uu=Gu.length,Hu=this.n.bitLength()-1,Wu=Math.ceil(Hu/8);if(Ou===-1||Ou===void 0)Ou=Uu;else if(Ou===-2)Ou=Wu-Uu-2;else if(Ou<-2)throw new Error("invalid salt length");if(Wu<Uu+Ou+2)throw new Error("data too long");var Qu=this.doPublic(Nu).toByteArray();for(Fu=0;Fu<Qu.length;Fu+=1)Qu[Fu]&=255;for(;Qu.length<Wu;)Qu.unshift(0);if(Qu[Wu-1]!==188)throw new Error("encoded message does not end in 0xbc");var qu=(Qu=String.fromCharCode.apply(String,Qu)).substr(0,Wu-Uu-1),Ku=Qu.substr(qu.length,Uu),Yu=65280>>8*Wu-Hu&255;if((qu.charCodeAt(0)&Yu)!=0)throw new Error("bits beyond keysize not zero");var _c=Se$1(Ku,qu.length,Vu),Ju=[];for(Fu=0;Fu<qu.length;Fu+=1)Ju[Fu]=qu.charCodeAt(Fu)^_c.charCodeAt(Fu);Ju[0]&=~Yu;var Xu=Wu-Uu-Ou-2;for(Fu=0;Fu<Xu;Fu+=1)if(Ju[Fu]!==0)throw new Error("leftmost octets not zero");if(Ju[Xu]!==1)throw new Error("0x01 marker not found");return Ku===re$1(Vu(oe$1("\0\0\0\0\0\0\0\0"+Gu+String.fromCharCode.apply(String,Ju.slice(-Ou)))))},X$2.SALT_LEN_HLEN=-1,X$2.SALT_LEN_MAX=-2,X$2.SALT_LEN_RECOVER=-2,Be.hex2dn=function(_u,$u){$u===void 0&&($u=0);var Ru=new Be;return Me.getTLV(_u,$u),Ru.getX500Name(_u).str},Be.hex2rdn=function(_u,$u){if($u===void 0&&($u=0),_u.substr($u,2)!=="31")throw new Error("malformed RDN");for(var Ru=new Array,Ou=Me.getChildIdx(_u,$u),Fu=0;Fu<Ou.length;Fu++)Ru.push(Be.hex2attrTypeValue(_u,Ou[Fu]));return(Ru=Ru.map(function(Nu){return Nu.replace("+","\\+")})).join("+")},Be.hex2attrTypeValue=function(_u,$u){var Ru=Me,Ou=Ru.getV;if($u===void 0&&($u=0),_u.substr($u,2)!=="30")throw new Error("malformed attribute type and value");var Fu=Ru.getChildIdx(_u,$u);Fu.length!==2||_u.substr(Fu[0],2);var Nu=Ou(_u,Fu[0]),Vu=l$3.asn1.ASN1Util.oidHexToInt(Nu);return l$3.asn1.x509.OID.oid2atype(Vu)+"="+re$1(Ou(_u,Fu[1]))},Be.getPublicKeyFromCertHex=function(_u){var $u=new Be;return $u.readCertHex(_u),$u.getPublicKey()},Be.getPublicKeyFromCertPEM=function(_u){var $u=new Be;return $u.readCertPEM(_u),$u.getPublicKey()},Be.getPublicKeyInfoPropOfCertPEM=function(_u){var $u,Ru,Ou=Me.getVbyList,Fu={};return Fu.algparam=null,($u=new Be).readCertPEM(_u),Ru=$u.getPublicKeyHex(),Fu.keyhex=Ou(Ru,0,[1],"03").substr(2),Fu.algoid=Ou(Ru,0,[0,0],"06"),Fu.algoid==="2a8648ce3d0201"&&(Fu.algparam=Ou(Ru,0,[0,1],"06")),Fu},Be.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe$1,Re=[(Pe$1=new Be,Pe$1.readCertPEM(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe$1)];function ke(_u,$u){var Ru=_u.getIssuerHex();if(Ru===_u.getSubjectHex())return _u.verifySignature(_u.getPublicKey());var Ou=function(Fu,Nu){for(var Vu=0,Gu=Nu;Vu<Gu.length;Vu++){var Uu=Gu[Vu];if(Uu.getSubjectHex()===Fu)return Uu}}(Ru,$u);return!!Ou&&_u.verifySignature(Ou.getPublicKey())!==!1&&ke(Ou,$u)}function De(_u){return _u.getIssuerHex()!==_u.getSubjectHex()&&ke(_u,Re)}(function(_u){var $u=new Be;typeof _u=="string"?$u.readCertPEM(_u):$u.readCertHex(_u.hex),De($u),Re.push($u)})(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le$1,Oe$1=(Le$1="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le$1,">$"):Symbol(Le$1));function Ne$1(_u){return _u[Oe$1]||(_u[Oe$1]={}),_u[Oe$1]}var Fe=function(){function _u(){}return _u.prototype.hasListener=function($u){var Ru=Ne$1(this);return Ru&&Ru[$u]&&Ru[$u].length>0},_u.prototype.on=function($u,Ru,Ou){var Fu=this,Nu=Ne$1(this);return Nu[$u]||(Nu[$u]=[]),Nu[$u].push([Ru,Ou||!1]),function(){return Fu.off($u,Ru)}},_u.prototype.once=function($u,Ru){return this.on($u,Ru,!0)},_u.prototype.off=function($u,Ru){if($u!==void 0){var Ou,Fu=Ne$1(this);if(Fu[$u]||(Fu[$u]=[]),Ru!==void 0){for(var Nu=0;Nu<Fu[$u].length&&Fu[$u][Nu][0]!==Ru;Nu++);Nu<Fu[$u].length&&Fu[$u].splice(Nu,1)}else Fu[$u].length=0}else(Ou=this)[Oe$1]||delete Ou[Oe$1]},_u.prototype.emit=function($u){for(var Ru=[],Ou=1;Ou<arguments.length;Ou++)Ru[Ou-1]=arguments[Ou];for(var Fu=!1,Nu=Ne$1(this),Vu=Nu[$u]||[],Gu=0,Uu=Vu.slice();Gu<Uu.length;Gu++){var Hu=Uu[Gu],Wu=Hu[0],Qu=Hu[1],qu=Qu!==void 0&&Qu,Ku=Wu.apply(void 0,Ru);qu&&this.off($u,Wu),Ku===!1&&(Fu=!0)}return Fu},_u}();function Qe$1(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u]}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e$1=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()};function He(_u){Object.freeze(_u);var $u=typeof _u=="function",Ru=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(_u).forEach(function(Ou){!Ru.call(_u,Ou)||$u&&(Ou==="caller"||Ou==="callee"||Ou==="arguments")||_u[Ou]===null||typeof _u[Ou]!="object"&&typeof _u[Ou]!="function"||Object.isFrozen(_u[Ou])||He(_u[Ou])}),_u}var qe=/^([^.]+)(\.([^.]+))*$/;function ze$1(_u){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(_u)}function Ke(_u,$u){return qe.test(_u)&&qe.test($u)&&function(Ru,Ou){if(Ru==="*")return!0;var Fu=Ru.split(".").reverse(),Nu=Ou.split(".").reverse();if(Fu.length<=1)return Ru===Ou;for(var Vu=0;Vu<Fu.length;Vu++)if(Fu[Vu]!==Nu[Vu])return!1;return!0}(_u,$u)}var Ue=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je$1=He(JSON.parse(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge$1=function(_u){function $u(Ru,Ou,Fu){return _u.call(this,"[NETWORK]: request proxy error(type: ".concat(Ou,", reason: ").concat(Fu,"): ").concat(Ru))||this}return t$3.__extends($u,_u),$u}(Error),We=function(_u){function $u(Ru,Ou,Fu){var Nu=_u.call(this,"[NETWORK]: response error(type: ".concat(Ou,", status: ").concat(Fu,"): ").concat(Ru))||this;return Nu.httpStatus=Fu,Nu}return t$3.__extends($u,_u),$u}(Error);(function(_u){function $u(Ru,Ou){return _u.call(this,"[NETWORK]: request abort(type: ".concat(Ou,"): ").concat(Ru))||this}t$3.__extends($u,_u)})(Error);var Xe$1=function(_u){function $u(Ru,Ou,Fu){return _u.call(this,"[NETWORK]: request timeout(type: ".concat(Ou,", timeout: ").concat(Fu,"ms): ").concat(Ru))||this}return t$3.__extends($u,_u),$u}(Error),Ye$1=function(_u){function $u(Ru,Ou,Fu){return _u.call(this,"[NETWORK]: request forbidden(type: ".concat(Ou,", reason: ").concat(Fu,"): ").concat(Ru))||this}return t$3.__extends($u,_u),$u}(Error);function Ze$1(_u){for(var $u=0,Ru=Ue;$u<Ru.length;$u++){var Ou=Ru[$u],Fu=_u.match(Ou);if(Fu)return"jsonp_"+Fu[1]}return null}function Je(_u){return Ze$1(_u)!==null}function $e(_u){return Ue.reduce(function($u,Ru){return $u.replace(Ru,"")},_u)}function et(_u){if(/^blob\:/i.test(_u))return"blob:";if(/^data\:/i.test(_u))return"data:";var $u=_u.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return $u?$u[2]:location.hostname}var tt=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends($u,_u),$u}(Fe);function it$1(_u,$u,Ru,Ou,Fu){$u===void 0&&($u={}),Ru===void 0&&(Ru=Qe$1),Ou===void 0&&(Ou=Qe$1),Fu===void 0&&(Fu=Qe$1);var Nu=_e$1(),Vu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Gu){return/^https\:/.test(location.href)&&/^http\:/.test(Gu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Gu,"'. This request was automatically upgraded to HTTPS")),Gu.replace(/^http\:/,"https:")):Gu}).catch(function(Gu){var Uu,Hu=Ze$1(_u)?"Script":"XMLHttpRequest",Wu=new Ge$1(Vu,Hu,Gu&&Gu.message?String(Gu.message):String(Gu));return(Uu=$u.networkSubscribe)===null||Uu===void 0||Uu.emit("network",_u,Hu,"proxy-error",Wu.message),Promise.reject(Wu)}).then(function(Gu){return new Promise(function(Uu,Hu){var Wu,Qu=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),qu=et(Gu),Ku=Ze$1(Gu);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(tp){return Ke(tp,location.hostname)}).length===0&&!ze$1(qu)&&Qu.filter(function(tp){return Ke(tp,qu)}).length===0){var Yu=Ku?"Script":"XMLHttpRequest",_c=new Ye$1(Gu,Yu,"request host(".concat(qu,") is not allowed"));return Ou(_c),Hu(_c),void((Wu=$u.networkSubscribe)===null||Wu===void 0||Wu.emit("network",Gu,Yu,"forbidden",_c.message))}if(Ku){var Ju=window,Xu=null,Zu=!1,Xc=document.createElement("script");Ju[Ku]=function(tp){var ip,rp,op=_e$1(),sp=op-Nu;if(delete Ju[Ku],Xc.parentNode&&Xc.parentNode.removeChild(Xc),Xu!==null&&(window.clearTimeout(Xu),Xu=null),Zu!==!0){if(tp.indexOf("data:")!==0){var cp=new We(Gu,"Script",500);return Ou(cp),Hu(cp),void((ip=$u.networkSubscribe)===null||ip===void 0||ip.emit("network",Gu,"Script","error",cp.message))}var hp=tp.split(","),dp=(hp[0].match(/:(.*?);/)||[])[1],xp=hp[1];if($u.responseType==="arraybuffer"||$u.responseType==="blob"){for(var bp=atob(hp[1]),Rp=bp.length,Tp=new Uint8Array(Rp),Up=0;Up<Rp;Up++)Tp[Up]=bp.charCodeAt(Up);xp=$u.responseType==="arraybuffer"?Tp.buffer:new Blob([Tp],{type:dp})}var Ip={body:xp,meta:{origin:Vu,source:Gu,requestTime:Nu,responseTime:op,costs:sp,headers:{}}};Ru(Ip),Uu(Ip),(rp=$u.networkSubscribe)===null||rp===void 0||rp.emit("network",Gu,"Script","ok",JSON.stringify(Ip.meta)),Zu=!0}},Xc.src=Gu,document.body.appendChild(Xc),typeof $u.timeout=="number"&&(Xu=window.setTimeout(function(){var tp;if(Xu=null,Zu!==!0){Zu=!0;var ip=new Xe$1(Gu,"Script",$u.timeout||NaN);Ou(ip),Hu(ip),(tp=$u.networkSubscribe)===null||tp===void 0||tp.emit("network",Gu,"Script","timeout",ip.message)}},$u.timeout))}else{var _h=!1,ep=new XMLHttpRequest,np=function(){ep&&(ep.removeEventListener("timeout",ap,!1),ep.removeEventListener("progress",lp,!1),ep.removeEventListener("load",up,!1),ep.removeEventListener("error",_f,!1)),ep=null,np=Qe$1},ap=function(){var tp;if(_h!==!0){_h=!0,np();var ip=new Xe$1(Gu,"XMLHttpRequest",$u.timeout||NaN);Ou(ip),Hu(ip),(tp=$u.networkSubscribe)===null||tp===void 0||tp.emit("network",Gu,"XMLHttpRequest","timeout",ip.message)}},lp=function(tp){_h!==!0&&tp.lengthComputable&&(tp.total<=0||Fu(tp.loaded/tp.total))},up=function(tp){var ip;if(_h!==!0){var rp=this.status;if(rp===0||rp>=200&&rp<400){_h=!0,np();var op=_e$1(),sp=op-Nu,cp=function(xp){if(!xp)return{};for(var bp={},Rp=xp.trim().split(`
`),Tp=0;Tp<Rp.length;Tp++){var Up=Rp[Tp],Ip=Up.indexOf(":"),Vp=Up.slice(0,Ip).trim().toLowerCase(),Lp=Up.slice(Ip+1).trim();Lp&&(bp[Vp]?bp[Vp]+=", "+Lp:bp[Vp]=Lp)}return bp}(this.getAllResponseHeaders()),hp=tp.total,dp={body:this.response,meta:{origin:Vu,source:Gu,requestTime:Nu,responseTime:op,costs:sp,headers:cp,size:hp}};Ru(dp),Uu(dp),(ip=$u.networkSubscribe)===null||ip===void 0||ip.emit("network",Gu,"XMLHttpRequest","ok",JSON.stringify(dp.meta))}else _f.call(this)}},_f=function(){var tp;if(_h!==!0){_h=!0,np();var ip=new We(Gu,"XMLHttpRequest",this.status);Ou(ip),Hu(ip),(tp=$u.networkSubscribe)===null||tp===void 0||tp.emit("network",Gu,"XMLHttpRequest","error",ip.message)}};ep.addEventListener("timeout",ap,!1),ep.addEventListener("progress",lp,!1),ep.addEventListener("load",up,!1),ep.addEventListener("error",_f,!1),$u.responseType&&(ep.responseType=$u.responseType),typeof $u.timeout=="number"&&(ep.timeout=$u.timeout),ep.open("GET",Gu,!0),ep.send(null)}})})}var nt$1={};function rt$1(_u,$u,Ru,Ou,Fu,Nu){$u===void 0&&($u={}),Ru===void 0&&(Ru=Qe$1),Ou===void 0&&(Ou=Qe$1),Fu===void 0&&(Fu=Qe$1);var Vu=_e$1(),Gu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Uu){return/^https\:/.test(location.href)&&/^http\:/.test(Uu)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Uu,"'. This request was automatically upgraded to HTTPS")),Uu.replace(/^http\:/,"https:")):Uu}).catch(function(Uu){var Hu,Wu=new Ge$1(Gu,"Image",Uu&&Uu.message?String(Uu.message):String(Uu));return(Hu=$u.networkSubscribe)===null||Hu===void 0||Hu.emit("network",_u,"Image","proxy-error",Wu.message),Promise.reject(Wu)}).then(function(Uu){return new Promise(function(Hu,Wu){var Qu,qu=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),Ku=et(Uu);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(Zu){return Ke(Zu,location.hostname)}).length===0&&!ze$1(Ku)&&qu.filter(function(Zu){return Ke(Zu,Ku)}).length===0){var Yu=new Ye$1(Uu,"Image","request host(".concat(Ku,") is not allowed"));return Ou(Yu),Wu(Yu),void((Qu=$u.networkSubscribe)===null||Qu===void 0||Qu.emit("network",Uu,"Image","forbidden",Yu.message))}var _c=Nu!=null?Nu:new Image,Ju=!1,Xu=null;typeof $u.timeout=="number"&&(Xu=window.setTimeout(function(){var Zu;if(_c.onload=Qe$1,_c.onerror=Qe$1,Xu=null,Ju!==!0){Ju=!0;var Xc=new Xe$1(Uu,"Image",$u.timeout);Ou(Xc),Wu(Xc),(Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Uu,"Image","timeout",Xc.message)}},$u.timeout)),_c.onload=function(){var Zu;if(_c.onload=Qe$1,_c.onerror=Qe$1,Xu!==null&&(clearTimeout(Xu),Xu=null),Ju!==!0){var Xc=_e$1();Ju=!0;var _h={body:_c,meta:{headers:{},origin:Gu,source:Uu,requestTime:Vu,responseTime:Xc,costs:Xc-Vu}};Fu(1),Ru(_h),Hu(_h),(Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Uu,"Image","ok",JSON.stringify(_h.meta))}},_c.onerror=function(){var Zu;if(_c.onload=Qe$1,_c.onerror=Qe$1,Xu!==null&&(clearTimeout(Xu),Xu=null),Ju!==!0){Ju=!0;var Xc=new We(Uu,"Image",0);Ou(Xc),Wu(Xc),(Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Uu,"Image","ok",Xc.message)}},Fu(0),_c.src=Uu})})}var ot=function(){if(typeof window!="undefined"){var _u=window;return _u.requestAnimationFrame||_u.mozRequestAnimationFrame||_u.webkitRequestAnimationFrame||_u.msRequestAnimationFrame||function($u){return setTimeout($u,16)}}return function($u){return setTimeout($u,16)}}(),st=16,at=function(){function _u(){this.frames=[],this.stoped=!1,this.time=_e$1(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(_u,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new _u),this.sharedInstance},enumerable:!1,configurable:!0}),_u.getFrameTime=function(){return st},_u.prototype.loop=function(){for(var $u=[],Ru=0;Ru<arguments.length;Ru++)$u[Ru]=arguments[Ru];if(!this.stoped){var Ou=_e$1(),Fu=Ou-this.time;this.time=Ou;var Nu=[];st=Fu;for(var Vu=0,Gu=this.frames;Vu<Gu.length;Vu++){var Uu=Gu[Vu];if(Uu.delay>0)Uu.delay=Uu.delay-1;else{try{Uu.callback.apply(Uu,t$3.__spreadArray([Ou,Fu],$u,!1))}catch(Hu){console.error(Hu)}Uu.once&&Nu.push(Uu)}}Nu.length>0&&(this.frames=this.frames.filter(function(Hu){return Nu.indexOf(Hu)===-1})),this.requestAnimationFrame(this.loop)}},_u.prototype.setContext=function($u){this.cancelAnimationFrame(this.requestId),this.context=$u,this.requestId=this.requestAnimationFrame(this.loop)},_u.prototype.getContext=function(){return this.context},_u.prototype.requestAnimationFrame=function($u){return this.context?this.context.requestAnimationFrame($u):ot($u)},_u.prototype.cancelAnimationFrame=function($u){this.context?this.context.cancelAnimationFrame($u):function(Ru){var Ou;if(typeof window!="undefined"){var Fu=window;Ou=Fu.cancelAnimationFrame||Fu.mozCancelAnimationFrame||Fu.webkitCancelAnimationFrame||Fu.msCancelAnimationFrame||function(Nu){return window.clearTimeout(Nu)}}else Ou=function(Nu){return window.clearTimeout(Nu)};Ou(Ru)}(this.loop),this.requestId=null},_u.prototype.remove=function($u){var Ru=this.frames.indexOf($u);Ru>=0&&this.frames.splice(Ru,1)},_u.prototype.add=function($u,Ru,Ou,Fu){var Nu=this;Ru===void 0&&(Ru=!1),Ou===void 0&&(Ou=0),Fu===void 0&&(Fu=5);var Vu={callback:$u,once:Ru,delay:Ou,order:Fu};return this.frames.push(Vu),this.frames.sort(function(Gu,Uu){return Gu.order-Uu.order}),function(){return Nu.remove(Vu)}},_u.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},_u}(),lt=/^https?\:\/\/?([^\/]+)/;function ut$1(_u,$u){return _u.replace(lt,function(Ru,Ou){return Ru.slice(0,Ru.length-Ou.length)+$u})}var ht$1={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct$1(_u,$u){var Ru=t$3.__assign(t$3.__assign({},ht$1),$u.mappings),Ou=function(Nu){var Vu=Nu.match(lt);return Vu===null?null:Vu[1]}(_u);if(Ou===null)return _u;var Fu=Ru[Ou];return Fu?(/\.basis(\?|$)/.test(_u)&&$u.basisLoaderInitialized!==!0&&(_u=_u.replace(/\.basis(\?|$)/,".jpg$1")),function(Nu,Vu){var Gu,Uu=Nu.split("?")[0],Hu=Uu.split(".").pop();if(Hu==="jpeg"&&(Hu="jpg"),Hu!=="png"&&Hu!=="jpg")return Nu;var Wu="";if(Vu.format!==void 0&&Vu.format!==Hu&&(Wu+="/format/".concat(Vu.format)),Vu.cut!==void 0&&(Wu+="/cut/".concat(Vu.cut[2],"x").concat(Vu.cut[3],"x").concat(Vu.cut[0],"x").concat(Vu.cut[1])),Vu.quality!==void 0){var Qu=(Gu=Vu.format)!==null&&Gu!==void 0?Gu:Hu;Qu&&["jpg","webp","tpg","heif","avif"].indexOf(Qu)>=0&&(Wu+="/quality/".concat(Vu.quality))}if(Vu.size!==void 0){var qu=Nu.match(/\/cube_(\d+)\//);(qu?Number(qu[1]):NaN)!==Number(Vu.size)&&(Wu+="/thumbnail/".concat(Vu.size,"x"))}return Vu.sharpen!==void 0&&(Wu+="/sharpen/".concat(Vu.sharpen)),Wu.length&&(Wu="?imageMogr2"+Wu),Uu+Wu}(function(Nu,Vu,Gu){var Uu=Vu.split("."),Hu=Uu[0],Wu=Uu.slice(1);if(Hu==="texture")return ut$1(Nu,Gu.texture[0]);if(Hu==="pano"||Hu==="pano_luminance")switch(Wu[0],Wu[1]){case"front":case"left":case"up":return ut$1(Nu,Gu.pano[0]);case"down":case"right":case"back":return ut$1(Nu,Gu.pano[1])}else if(Hu==="pano_tile"||Hu==="pano_tile_luminance"){Wu[0],Wu[1];var Qu=Wu[2],qu=Wu[3],Ku=Wu[4],Yu=Math.pow(2,Number(Qu))*Number(qu)+Number(Ku);if(!isNaN(Yu))return ut$1(Nu,Gu.tile[Yu%2])}return ut$1(Nu,Gu.default[0])}(_u,$u.key,Fu),$u)):_u}function dt(_u){return new Promise(function($u){var Ru=new Image,Ou=setTimeout(function(){Ru.onload=Ru.onerror=function(){},clearTimeout(Ou),$u(!1)});Ru.onload=Ru.onerror=function(){Ru.onload=Ru.onerror=function(){},clearTimeout(Ou),$u(Ru.height===2)},Ru.src=_u})}var pt$1=null,ft=function(_u){function $u(){var Ru=_u!==null&&_u.apply(this,arguments)||this;return Ru.floorIndex=0,Ru.needsRender=!0,Ru}return t$3.__extends($u,_u),$u}(r$3.Mesh),At=function(_u){function $u(){var Ru=_u!==null&&_u.apply(this,arguments)||this;return Ru.needsRender=!0,Ru.enableTransparent=!0,Ru}return t$3.__extends($u,_u),$u.prototype.getTransparent=function(){return this.enableTransparent},$u.prototype.setTransparent=function(Ru){this.enableTransparent=Ru,this.traverse(function(Ou){Ou instanceof ft&&Ou.material.forEach(function(Fu){Fu.transparent=Ru})})},$u.prototype.getMaterial=function(){var Ru=null;return this.traverse(function(Ou){if(Ru===null&&Ou instanceof ft){var Fu=Ou.material[0];Ru={pano0:Fu.pano0,pano1:Fu.pano1,modelAlpha:Fu.modelAlpha,progress:Fu.progress,useBlackTransition:Fu.useBlackTransition,useXRBlackTransition:Fu.useXRBlackTransition,perspToOrtho:Fu.perspToOrtho,opacity:Fu.opacity,floorInfo:Fu.floorInfo}}}),Ru},$u.prototype.setMaterial=function(Ru){this.traverse(function(Ou){Ou instanceof ft&&Ou.material.forEach(function(Fu){Ru.pano0!==void 0&&(Fu.pano0=Ru.pano0),Ru.pano1!==void 0&&(Fu.pano1=Ru.pano1),Ru.modelAlpha!==void 0&&(Fu.modelAlpha=Ru.modelAlpha),Ru.progress!==void 0&&(Fu.progress=Ru.progress),Ru.useBlackTransition!==void 0&&(Fu.useBlackTransition=Ru.useBlackTransition),Ru.useXRBlackTransition!==void 0&&(Fu.useXRBlackTransition=Ru.useXRBlackTransition),Ru.perspToOrtho!==void 0&&(Fu.perspToOrtho=Ru.perspToOrtho),Ru.opacity!==void 0&&(Fu.opacity=Ru.opacity),Ru.floorInfo!==void 0&&(Fu.floorInfo=Ru.floorInfo)})})},$u.prototype.disposeMaterial=function(){this.traverse(function(Ru){if(Ru instanceof ft){var Ou=[];Ru.material.forEach(function(Fu){var Nu=Fu.uniforms;Object.keys(Nu).map(function(Vu){if(/^pano\d\_/.test(Vu))Nu[Vu].value=null;else{var Gu=Nu[Vu].value;Gu&&typeof Gu.dispose=="function"&&Ou.indexOf(Gu)===-1&&(Nu[Vu].value=null,Ou.push(Gu))}}),Fu.dispose()}),Ou.forEach(function(Fu){return Fu.dispose()})}})},$u.prototype.disposeGeometry=function(){this.traverse(function(Ru){Ru instanceof ft&&Ru.geometry.dispose()})},$u}(r$3.Group),gt$1=function(_u){function $u(){var Ru=_u!==null&&_u.apply(this,arguments)||this;return Ru.floorIndex=0,Ru}return t$3.__extends($u,_u),$u}(At),mt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt=yt();bt.width=bt.height=8;var xt=new r$3.Texture(bt);xt.name="EMPTY_TEXTURE";var wt$1=new r$3.CubeTexture([bt,bt,bt,bt,bt,bt]);wt$1.name="EMPTY_CUBE_TEXTURE",xt.dispose=wt$1.dispose=function(){};var Et$1=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(wt$1),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(wt$1),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0),floorInfo:new r$3.Vector3(0,0,0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsUtils.clone(r$3.UniformsLib.common),r$3.UniformsUtils.clone(r$3.UniformsLib.lights)),Mt=function(_u){function $u(Ru){Ru===void 0&&(Ru={});var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu=this;return qu=_u.call(this,{vertexShader:mt$1,fragmentShader:vt$1,uniforms:r$3.UniformsUtils.clone(Et$1),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$3.NoBlending,lights:!0})||this,Object.defineProperties(qu,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt$1?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Ku){Ku===null?(this.uniforms.pano0_map.value=wt$1,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Ku.map,this.uniforms.pano0_luminanceMap.value=Ku.luminanceMap,this.uniforms.pano0_matrix.value.copy(Ku.matrix));var Yu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Yu&&(this.defines.USE_LUMINANCE=Yu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt$1?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Ku){Ku===null?(this.uniforms.pano1_map.value=wt$1,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Ku.map,this.uniforms.pano1_luminanceMap.value=Ku.luminanceMap,this.uniforms.pano1_matrix.value.copy(Ku.matrix));var Yu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Yu&&(this.defines.USE_LUMINANCE=Yu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Ku){this.uniforms.modelAlpha.value=Ku}},progress:{get:function(){return this.uniforms.progress.value},set:function(Ku){this.uniforms.progress.value=Ku}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Ku){this.defines.USE_BLACK_TRANSITION!==Ku&&(this.defines.USE_BLACK_TRANSITION=Ku,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(Ku){this.defines.USE_XR_BLACK_TRANSITION!==Ku&&(this.defines.USE_XR_BLACK_TRANSITION=Ku,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Ku){this.uniforms.opacity.value=Ku;var Yu=Ku<1?r$3.NormalBlending:r$3.NoBlending;Yu!==this.blending&&(this.blending=Yu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Ku){this.uniforms.perspToOrtho.value=Ku}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(Ku){Ku&&Ku.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),Ku&&!Ku.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=Ku,this.needsUpdate=!0)}}}),qu.pano0=(Ou=Ru.pano0)!==null&&Ou!==void 0?Ou:null,qu.pano1=(Fu=Ru.pano1)!==null&&Fu!==void 0?Fu:null,qu.modelAlpha=(Nu=Ru.modelAlpha)!==null&&Nu!==void 0?Nu:1,qu.progress=(Vu=Ru.progress)!==null&&Vu!==void 0?Vu:0,qu.useBlackTransition=(Gu=Ru.useBlackTransition)!==null&&Gu!==void 0&&Gu,qu.useXRBlackTransition=(Uu=Ru.useXRBlackTransition)!==null&&Uu!==void 0&&Uu,qu.perspToOrtho=(Hu=Ru.perspToOrtho)!==null&&Hu!==void 0?Hu:0,qu.opacity=(Wu=Ru.opacity)!==null&&Wu!==void 0?Wu:1,qu.originOpacity=1,qu.floorInfo=(Qu=Ru.floorInfo)!==null&&Qu!==void 0?Qu:null,qu}return t$3.__extends($u,_u),$u}(r$3.ShaderMaterial),It$1=function(_u){function $u(Ru){var Ou=Ru.preserveDrawingBuffer,Fu=Ou===void 0||Ou,Nu=Ru.backgroundColor,Vu=Nu===void 0?1579548:Nu,Gu=Ru.backgroundAlpha,Uu=Gu===void 0?1:Gu,Hu=Ru.pixelRatio,Wu=Hu===void 0?1:Hu,Qu=Ru.antialias,qu=Qu!==void 0&&Qu,Ku=Ru.webgl2,Yu=this;if(Ku!==void 0&&Ku){var _c=document.createElement("canvas"),Ju=_c.getContext("webgl2");if(Ju===null)throw new Error("error occurred when getting webgl2 canvas context");Yu=_u.call(this,{antialias:qu,preserveDrawingBuffer:Fu,alpha:Uu<1,canvas:_c,context:Ju})||this}else Yu=_u.call(this,{antialias:qu,preserveDrawingBuffer:Fu,alpha:Uu<1})||this;return Yu.setPixelRatio(Wu),Yu.setClearColor(Vu,Uu),Yu.outputEncoding=r$3.sRGBEncoding,Yu.autoClear=!0,Yu}return t$3.__extends($u,_u),$u}(r$3.WebGLRenderer),St=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$3.__extends($u,_u),$u.prototype.add=function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.prototype.add.apply(this,Ru)},$u.prototype.remove=function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.prototype.remove.apply(this,Ru)},$u}(r$3.Scene),Ct$1=2*Math.PI,Bt=Math.PI/2;function Tt$1(_u){return _u>0&&_u<=Ct$1?_u:(_u%Ct$1+Ct$1)%Ct$1}var Pt$1,Rt,kt$1,Dt$1,Lt=function(_u){function $u(Ru){var Ou=_u.call(this,Ru,1,.1,1e3)||this;return Ou.pose={longitude:0,latitude:0,fov:Ru,distance:0,offset:new r$3.Vector3},Ou.computePose(),Ou}return t$3.__extends($u,_u),$u.prototype.computePose=function(){var Ru=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Tt$1(-Math.atan2(Ru.x,-Ru.z)),this.pose.latitude=-Math.asin(Ru.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},$u.prototype.setFromPose=function(Ru){var Ou,Fu,Nu,Vu,Gu,Uu=Tt$1((Ou=Ru.longitude)!==null&&Ou!==void 0?Ou:this.pose.longitude),Hu=Math.max(1e-4-Bt,Math.min(Bt-1e-4,(Fu=Ru.latitude)!==null&&Fu!==void 0?Fu:this.pose.latitude)),Wu=(Nu=Ru.fov)!==null&&Nu!==void 0?Nu:this.pose.fov,Qu=(Vu=Ru.distance)!==null&&Vu!==void 0?Vu:this.pose.distance,qu=(Gu=Ru.offset)!==null&&Gu!==void 0?Gu:this.pose.offset,Ku=function(Yu){var _c=Math.abs(Math.cos(Yu.latitude));return new r$3.Vector3(-Math.sin(Yu.longitude)*_c,-Math.sin(Yu.latitude),-Math.cos(Yu.longitude)*_c)}({longitude:Uu,latitude:Hu}).normalize();return this.position.set(0,0,0),this.lookAt(Ku),this.position.add(qu).sub(Ku.clone().setLength(Qu)),this.fov!==Wu&&(this.fov=Wu,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Uu,this.pose.latitude=Hu,this.pose.fov=Wu,this.pose.distance=Qu,this.pose.offset.copy(qu),this},$u.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},$u}(r$3.PerspectiveCamera),Ot$1=function(){function _u($u,Ru,Ou){this.x=$u,this.y=Ru,this.z=Ou}return _u.prototype.copy=function($u){return this.x=$u.x,this.y=$u.y,this.z=$u.z,this},_u.prototype.set=function($u,Ru,Ou){return this.x=$u,this.y=Ru,this.z=Ou,this},_u.prototype.fromArray=function($u,Ru){return Ru===void 0&&(Ru=0),this.x=$u[Ru],this.y=$u[Ru+1],this.z=$u[Ru+2],this},_u.prototype.add=function($u){return this.x+=$u.x,this.y+=$u.y,this.z+=$u.z,this},_u.prototype.multiplyScalar=function($u){return this.x*=$u,this.y*=$u,this.z*=$u,this},_u.prototype.subVectors=function($u,Ru){return this.x=$u.x-Ru.x,this.y=$u.y-Ru.y,this.z=$u.z-Ru.z,this},_u.prototype.dot=function($u){return this.x*$u.x+this.y*$u.y+this.z*$u.z},_u.prototype.cross=function($u){var Ru=this.x,Ou=this.y,Fu=this.z;return this.x=Ou*$u.z-Fu*$u.y,this.y=Fu*$u.x-Ru*$u.z,this.z=Ru*$u.y-Ou*$u.x,this},_u.prototype.crossVectors=function($u,Ru){var Ou=$u.x,Fu=$u.y,Nu=$u.z,Vu=Ru.x,Gu=Ru.y,Uu=Ru.z;return this.x=Fu*Uu-Nu*Gu,this.y=Nu*Vu-Ou*Uu,this.z=Ou*Gu-Fu*Vu,this},_u.prototype.clone=function(){return new _u(this.x,this.y,this.z)},_u}(),Nt$1=function(_u,$u,Ru){this.extents=_u,this.startIndex=$u,this.endIndex=Ru},Ft$1=function(_u,$u){this.triangle=_u,this.intersectionPoint=$u},Qt=(Pt$1=new Ot$1(0,0,0),Rt=new Ot$1(0,0,0),kt$1=new Ot$1(0,0,0),Dt$1=new Ot$1(0,0,0),function(_u,$u,Ru,Ou,Fu,Nu){Rt.subVectors($u,_u),kt$1.subVectors(Ru,_u),Dt$1.crossVectors(Rt,kt$1);var Vu,Gu=Fu.dot(Dt$1);if(Gu>0){if(Nu)return null;Vu=1}else{if(!(Gu<0))return null;Vu=-1,Gu=-Gu}Pt$1.subVectors(Ou,_u);var Uu=Vu*Fu.dot(kt$1.crossVectors(Pt$1,kt$1));if(Uu<0)return null;var Hu=Vu*Fu.dot(Rt.cross(Pt$1));if(Hu<0||Uu+Hu>Gu)return null;var Wu=-Vu*Pt$1.dot(Dt$1);if(Wu<0)return null;var Qu=Wu/Gu;return new Ot$1(0,0,0).copy(Fu).multiplyScalar(Qu).add(Ou)}),Vt=function(_u,$u){this.min=_u,this.max=$u};function _t$1(_u,$u,Ru){var Ou=new Vt(0,0);$u.x>=0?(Ou.min=(Ru.extents[0]-_u.x)*$u.x,Ou.max=(Ru.extents[3]-_u.x)*$u.x):(Ou.min=(Ru.extents[3]-_u.x)*$u.x,Ou.max=(Ru.extents[0]-_u.x)*$u.x);var Fu=new Vt(0,0);if($u.y>=0?(Fu.min=(Ru.extents[1]-_u.y)*$u.y,Fu.max=(Ru.extents[4]-_u.y)*$u.y):(Fu.min=(Ru.extents[4]-_u.y)*$u.y,Fu.max=(Ru.extents[1]-_u.y)*$u.y),Ou.min>Fu.max||Fu.min>Ou.max)return!1;Fu.min>Ou.min&&(Ou.min=Fu.min),Fu.max<Ou.max&&(Ou.max=Fu.max);var Nu=new Vt(0,0);return $u.z>=0?(Nu.min=(Ru.extents[2]-_u.z)*$u.z,Nu.max=(Ru.extents[5]-_u.z)*$u.z):(Nu.min=(Ru.extents[5]-_u.z)*$u.z,Nu.max=(Ru.extents[2]-_u.z)*$u.z),!(Ou.min>Nu.max||Nu.min>Ou.max)&&(Nu.min>Ou.min&&(Ou.min=Nu.min),Nu.max<Ou.max&&(Ou.max=Nu.max),!(Ou.max<0))}function Ht$1(_u,$u,Ru,Ou,Fu){if(Ru>=Ou)return[0,0,0,0,0,0];for(var Nu=1/0,Vu=1/0,Gu=1/0,Uu=-1/0,Hu=-1/0,Wu=-1/0,Qu=Ru,qu=void 0,Ku=void 0;Qu<Ou;Qu++)(Ku=$u[qu=6*_u[Qu]])<Nu&&(Nu=Ku),(Ku=$u[qu+1])<Vu&&(Vu=Ku),(Ku=$u[qu+2])<Gu&&(Gu=Ku),(Ku=$u[qu+3])>Uu&&(Uu=Ku),(Ku=$u[qu+4])>Hu&&(Hu=Ku),(Ku=$u[qu+5])>Wu&&(Wu=Ku);return[Nu-Fu,Vu-Fu,Gu-Fu,Uu+Fu,Hu+Fu,Wu+Fu]}var qt$1=function(){function _u(){}return _u.prototype.create=function($u){return this.trianglesArray=$u,this},_u.prototype.splitNode=function($u){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Ru=this.trianglesArray,Ou=Ru.length/9,Fu=new Uint32Array(Ou),Nu=new Float32Array(6*Ou),Vu=[],Gu=1/0,Uu=1/0,Hu=1/0,Wu=-1/0,Qu=-1/0,qu=-1/0,Ku=0,Yu=0,_c=0,Ju=void 0,Xu=void 0,Zu=void 0,Xc=void 0,_h=void 0,ep=void 0,np=void 0;Ku<Ou;Ku++,Yu+=6,_c+=9)Fu[Ku]=Ku,Ju=Xc=Ru[_c],(np=Ru[_c+3])<Ju&&(Ju=np),np>Xc&&(Xc=np),(np=Ru[_c+6])<Ju&&(Ju=np),np>Xc&&(Xc=np),Xu=_h=Ru[_c+1],(np=Ru[_c+4])<Xu&&(Xu=np),np>_h&&(_h=np),(np=Ru[_c+7])<Xu&&(Xu=np),np>_h&&(_h=np),Zu=ep=Ru[_c+2],(np=Ru[_c+5])<Zu&&(Zu=np),np>ep&&(ep=np),(np=Ru[_c+8])<Zu&&(Zu=np),np>ep&&(ep=np),Ju<Gu&&(Gu=Ju),Xc>Wu&&(Wu=Xc),Xu<Uu&&(Uu=Xu),_h>Qu&&(Qu=_h),Zu<Hu&&(Hu=Zu),ep>qu&&(qu=ep),Nu[Yu]=Ju,Nu[Yu+1]=Xu,Nu[Yu+2]=Zu,Nu[Yu+3]=Xc,Nu[Yu+4]=_h,Nu[Yu+5]=ep;var ap,lp=new Nt$1([Gu,Uu,Hu,Wu,Qu,qu],0,Ou);function up(_f){for(var tp=_f.startIndex,ip=_f.endIndex,rp=_f.extents,op=[rp[3]-rp[0],rp[4]-rp[1],rp[5]-rp[2]],sp=[0,1,2].sort(function(Vp,Lp){return op[Lp]-op[Vp]}),cp=0;cp<3;cp++){for(var hp=sp[cp],dp=rp[hp]+rp[hp+3],xp=tp,bp=ip-1,Rp=-1,Tp=void 0;xp<=bp;)Rp===-1?(Tp=Fu[xp],Nu[6*Tp+hp]+Nu[6*Tp+hp+3]<dp?xp++:Rp=Tp):(Tp=Fu[bp],Nu[6*Tp+hp]+Nu[6*Tp+hp+3]>=dp||(Fu[xp]=Tp,Fu[bp]=Rp,Rp=-1,xp++),bp--);if(xp>tp&&xp<ip){var Up=new Nt$1(Ht$1(Fu,Nu,tp,xp,1e-6),tp,xp);Up.endIndex-Up.startIndex>$u&&Vu.push(Up);var Ip=new Nt$1(Ht$1(Fu,Nu,xp,ip,1e-6),xp,ip);Ip.endIndex-Ip.startIndex>$u&&Vu.push(Ip),_f.node0=Up,_f.node1=Ip,_f.startIndex=0,_f.endIndex=0;break}}}for(Vu.push(lp);ap=Vu.pop();)up(ap);return this.offsetArray=Fu,this.rootNode=lp,this},_u.prototype.intersectRay=function($u,Ru,Ou){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Fu,Nu=this.trianglesArray,Vu=this.offsetArray,Gu=this.rootNode,Uu=[],Hu=[],Wu=new Ot$1(1/Ru.x,1/Ru.y,1/Ru.z),Qu=[Gu];Fu=Qu.pop();)if(_t$1($u,Wu,Fu)){Fu.node0&&Qu.push(Fu.node0),Fu.node1&&Qu.push(Fu.node1);for(var qu=Fu.startIndex;qu<Fu.endIndex;qu++)Uu.push(Vu[qu])}for(var Ku=new Ot$1(0,0,0),Yu=new Ot$1(0,0,0),_c=new Ot$1(0,0,0),Ju=new Ot$1($u.x,$u.y,$u.z),Xu=new Ot$1(Ru.x,Ru.y,Ru.z),Zu=(qu=0,void 0),Xc=Uu.length;qu<Xc;qu++){Zu=9*Uu[qu],Ku.x=Nu[Zu],Ku.y=Nu[Zu+1],Ku.z=Nu[Zu+2],Yu.x=Nu[Zu+3],Yu.y=Nu[Zu+3+1],Yu.z=Nu[Zu+3+2],_c.x=Nu[Zu+6],_c.y=Nu[Zu+6+1],_c.z=Nu[Zu+6+2];var _h=Qt(Ku,Yu,_c,Ju,Xu,Ou);_h&&Hu.push(new Ft$1([Ku.clone(),Yu.clone(),_c.clone()],_h))}return Hu},_u.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},_u}(),zt=!1,Kt=[];function Ut(_u){if(_u===void 0&&(_u=!1),_u||!zt){zt=!0;var $u=Kt.shift();if($u){try{$u()}catch{}at.shared.add(function(){return Ut(!0)},!0,2)}else zt=!1}}function jt(_u){return new Promise(function($u,Ru){Kt.push(function(){try{$u(_u())}catch(Ou){Ru(Ou)}}),Ut()})}function Gt$1(){var _u={OutWindow:function(){this._windowSize=0}};return _u.OutWindow.prototype.create=function($u){this._buffer&&this._windowSize===$u||(this._buffer=[]),this._windowSize=$u,this._pos=0,this._streamPos=0},_u.OutWindow.prototype.flush=function(){var $u=this._pos-this._streamPos;if($u!==0){for(;$u--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},_u.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},_u.OutWindow.prototype.setStream=function($u){this.releaseStream(),this._stream=$u},_u.OutWindow.prototype.init=function($u){$u||(this._streamPos=0,this._pos=0)},_u.OutWindow.prototype.copyBlock=function($u,Ru){var Ou=this._pos-$u-1;for(Ou<0&&(Ou+=this._windowSize);Ru--;)Ou>=this._windowSize&&(Ou=0),this._buffer[this._pos++]=this._buffer[Ou++],this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.putByte=function($u){this._buffer[this._pos++]=$u,this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.getByte=function($u){var Ru=this._pos-$u-1;return Ru<0&&(Ru+=this._windowSize),this._buffer[Ru]},_u.RangeDecoder=function(){},_u.RangeDecoder.prototype.setStream=function($u){this._stream=$u},_u.RangeDecoder.prototype.releaseStream=function(){this._stream=null},_u.RangeDecoder.prototype.init=function(){var $u=5;for(this._code=0,this._range=-1;$u--;)this._code=this._code<<8|this._stream.readByte()},_u.RangeDecoder.prototype.decodeDirectBits=function($u){for(var Ru,Ou=0,Fu=$u;Fu--;)this._range>>>=1,Ru=this._code-this._range>>>31,this._code-=this._range&Ru-1,Ou=Ou<<1|1-Ru,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Ou},_u.RangeDecoder.prototype.decodeBit=function($u,Ru){var Ou=$u[Ru],Fu=(this._range>>>11)*Ou;return(2147483648^this._code)<(2147483648^Fu)?(this._range=Fu,$u[Ru]+=2048-Ou>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Fu,this._code-=Fu,$u[Ru]-=Ou>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},_u.initBitModels=function($u,Ru){for(;Ru--;)$u[Ru]=1024},_u.BitTreeDecoder=function($u){this._models=[],this._numBitLevels=$u},_u.BitTreeDecoder.prototype.init=function(){_u.initBitModels(this._models,1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.decode=function($u){for(var Ru=1,Ou=this._numBitLevels;Ou--;)Ru=Ru<<1|$u.decodeBit(this._models,Ru);return Ru-(1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.reverseDecode=function($u){for(var Ru,Ou=1,Fu=0,Nu=0;Nu<this._numBitLevels;++Nu)Ou=Ou<<1|(Ru=$u.decodeBit(this._models,Ou)),Fu|=Ru<<Nu;return Fu},_u.reverseDecode2=function($u,Ru,Ou,Fu){for(var Nu,Vu=1,Gu=0,Uu=0;Uu<Fu;++Uu)Vu=Vu<<1|(Nu=Ou.decodeBit($u,Ru+Vu)),Gu|=Nu<<Uu;return Gu},_u.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new _u.BitTreeDecoder(8),this._numPosStates=0},_u.LenDecoder.prototype.create=function($u){for(;this._numPosStates<$u;++this._numPosStates)this._lowCoder[this._numPosStates]=new _u.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new _u.BitTreeDecoder(3)},_u.LenDecoder.prototype.init=function(){var $u=this._numPosStates;for(_u.initBitModels(this._choice,2);$u--;)this._lowCoder[$u].init(),this._midCoder[$u].init();this._highCoder.init()},_u.LenDecoder.prototype.decode=function($u,Ru){return $u.decodeBit(this._choice,0)===0?this._lowCoder[Ru].decode($u):$u.decodeBit(this._choice,1)===0?8+this._midCoder[Ru].decode($u):16+this._highCoder.decode($u)},_u.Decoder2=function(){this._decoders=[]},_u.Decoder2.prototype.init=function(){_u.initBitModels(this._decoders,768)},_u.Decoder2.prototype.decodeNormal=function($u){var Ru=1;do Ru=Ru<<1|$u.decodeBit(this._decoders,Ru);while(Ru<256);return 255&Ru},_u.Decoder2.prototype.decodeWithMatchByte=function($u,Ru){var Ou,Fu,Nu=1;do if(Ou=Ru>>7&1,Ru<<=1,Nu=Nu<<1|(Fu=$u.decodeBit(this._decoders,(1+Ou<<8)+Nu)),Ou!==Fu){for(;Nu<256;)Nu=Nu<<1|$u.decodeBit(this._decoders,Nu);break}while(Nu<256);return 255&Nu},_u.LiteralDecoder=function(){},_u.LiteralDecoder.prototype.create=function($u,Ru){var Ou;if(!this._coders||this._numPrevBits!==Ru||this._numPosBits!==$u)for(this._numPosBits=$u,this._posMask=(1<<$u)-1,this._numPrevBits=Ru,this._coders=[],Ou=1<<this._numPrevBits+this._numPosBits;Ou--;)this._coders[Ou]=new _u.Decoder2},_u.LiteralDecoder.prototype.init=function(){for(var $u=1<<this._numPrevBits+this._numPosBits;$u--;)this._coders[$u].init()},_u.LiteralDecoder.prototype.getDecoder=function($u,Ru){return this._coders[(($u&this._posMask)<<this._numPrevBits)+((255&Ru)>>>8-this._numPrevBits)]},_u.Decoder=function(){this._outWindow=new _u.OutWindow,this._rangeDecoder=new _u.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new _u.BitTreeDecoder(4),this._lenDecoder=new _u.LenDecoder,this._repLenDecoder=new _u.LenDecoder,this._literalDecoder=new _u.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new _u.BitTreeDecoder(6),this._posSlotDecoder[1]=new _u.BitTreeDecoder(6),this._posSlotDecoder[2]=new _u.BitTreeDecoder(6),this._posSlotDecoder[3]=new _u.BitTreeDecoder(6)},_u.Decoder.prototype.setDictionarySize=function($u){return!($u<0)&&(this._dictionarySize!==$u&&(this._dictionarySize=$u,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},_u.Decoder.prototype.setLcLpPb=function($u,Ru,Ou){var Fu=1<<Ou;return!($u>8||Ru>4||Ou>4)&&(this._literalDecoder.create(Ru,$u),this._lenDecoder.create(Fu),this._repLenDecoder.create(Fu),this._posStateMask=Fu-1,!0)},_u.Decoder.prototype.init=function(){var $u=4;for(this._outWindow.init(!1),_u.initBitModels(this._isMatchDecoders,192),_u.initBitModels(this._isRep0LongDecoders,192),_u.initBitModels(this._isRepDecoders,12),_u.initBitModels(this._isRepG0Decoders,12),_u.initBitModels(this._isRepG1Decoders,12),_u.initBitModels(this._isRepG2Decoders,12),_u.initBitModels(this._posDecoders,114),this._literalDecoder.init();$u--;)this._posSlotDecoder[$u].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},_u.Decoder.prototype.decode=function($u,Ru,Ou){var Fu,Nu,Vu,Gu,Uu,Hu,Wu=0,Qu=0,qu=0,Ku=0,Yu=0,_c=0,Ju=0;for(this._rangeDecoder.setStream($u),this._outWindow.setStream(Ru),this.init();Ou<0||_c<Ou;)if(Fu=_c&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Wu<<4)+Fu)===0)Nu=this._literalDecoder.getDecoder(_c++,Ju),Ju=Wu>=7?Nu.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Qu)):Nu.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Ju),Wu=Wu<4?0:Wu-(Wu<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Wu)===1)Vu=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Wu)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Wu<<4)+Fu)===0&&(Wu=Wu<7?9:11,Vu=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Wu)===0?Gu=qu:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Wu)===0?Gu=Ku:(Gu=Yu,Yu=Ku),Ku=qu),qu=Qu,Qu=Gu),Vu===0&&(Vu=2+this._repLenDecoder.decode(this._rangeDecoder,Fu),Wu=Wu<7?8:11);else if(Yu=Ku,Ku=qu,qu=Qu,Vu=2+this._lenDecoder.decode(this._rangeDecoder,Fu),Wu=Wu<7?7:10,(Uu=this._posSlotDecoder[Vu<=5?Vu-2:3].decode(this._rangeDecoder))>=4){if(Qu=(2|1&Uu)<<(Hu=(Uu>>1)-1),Uu<14)Qu+=_u.reverseDecode2(this._posDecoders,Qu-Uu-1,this._rangeDecoder,Hu);else if(Qu+=this._rangeDecoder.decodeDirectBits(Hu-4)<<4,(Qu+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Qu===-1)break;return!1}}else Qu=Uu;if(Qu>=_c||Qu>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Qu,Vu),_c+=Vu,Ju=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},_u.Decoder.prototype.setDecoderProperties=function($u){var Ru,Ou,Fu,Nu,Vu;return!($u.size<5)&&(Ou=(Ru=$u.readByte())%9,Fu=(Ru=~~(Ru/9))%5,Nu=~~(Ru/5),!!this.setLcLpPb(Ou,Fu,Nu)&&(Vu=$u.readByte(),Vu|=$u.readByte()<<8,Vu|=$u.readByte()<<16,Vu+=16777216*$u.readByte(),this.setDictionarySize(Vu)))},_u.decompress=function($u,Ru,Ou,Fu){var Nu=new _u.Decoder;if(!Nu.setDecoderProperties($u))throw"Incorrect stream properties";if(!Nu.decode(Ru,Ou,Fu))throw"Error in data stream";return!0},_u.decompressFile=function($u,Ru){var Ou,Fu=new _u.Decoder;if(!Fu.setDecoderProperties($u))throw"Incorrect stream properties";if(Ou=$u.readByte(),Ou|=$u.readByte()<<8,Ou|=$u.readByte()<<16,Ou+=16777216*$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),!Fu.decode($u,Ru,Ou))throw"Error in data stream";return!0},_u}var Wt$1=Gt$1(),Xt=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt$1.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Ru){try{var Ou={data:$u,offset:0,readByte:function(){return this.data[this.offset++]}},Fu=Ou.data.length,Nu={data:[],offset:0,writeByte:function(Uu){var Hu=Math.floor(this.offset/Fu);this.data[Hu]||(this.data[Hu]=new Uint8Array(Fu)),this.data[Hu][this.offset%Fu]=Uu,this.offset++}};_u.decompressFile(Ou,Nu);for(var Vu=new Uint8Array(Nu.offset),Gu=0;Gu<Nu.offset;Gu++)Vu[Gu]=Nu.data[Math.floor(Gu/Fu)][Gu%Fu];Ru(null,Vu)}catch(Uu){Ru(Uu)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(_u){for(var $u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ru=new Uint8Array(256),Ou=0;Ou<$u.length;Ou++)Ru[$u.charCodeAt(Ou)]=Ou;var Fu,Nu,Vu,Gu,Uu,Hu=.75*_u.length,Wu=_u.length,Qu=0;_u[_u.length-1]==="="&&(Hu--,_u[_u.length-2]==="="&&Hu--);var qu=new ArrayBuffer(Hu),Ku=new Uint8Array(qu);for(Fu=0;Fu<Wu;Fu+=4)Nu=Ru[_u.charCodeAt(Fu)],Vu=Ru[_u.charCodeAt(Fu+1)],Gu=Ru[_u.charCodeAt(Fu+2)],Uu=Ru[_u.charCodeAt(Fu+3)],Ku[Qu++]=Nu<<2|Vu>>4,Ku[Qu++]=(15&Vu)<<4|Gu>>2,Ku[Qu++]=(3&Gu)<<6|63&Uu;return qu}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Ru){try{var Ou=new WebAssembly.Memory({initial:16}),Fu=new WebAssembly.Module(_u),Nu=new WebAssembly.Instance(Fu,{env:{memory:Ou,abort:function(){Ru(new Error("webAssembly abort"))}}}).exports,Vu=Nu.newU8Array($u.length);new Uint8Array(Ou.buffer,Vu+24,$u.length).set($u);var Gu=Nu.decode(Vu),Uu=new Uint32Array(Ou.buffer,Gu,4),Hu=Uu[0],Wu=Uu[2],Qu=Uu[3];Hu?Ru(null,new Uint8Array(Ou.buffer,Qu+24,Wu).slice(0,Wu)):Ru(new Error("lzma deocder error"))}catch(qu){Ru(qu)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt$1="";if(Yt)try{var Jt$1=new Blob([Xt],{type:"text/javascript"});Zt$1=URL.createObjectURL(Jt$1)}catch(_u){}var $t=function(){function _u(){var $u=this;if(!Yt)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Ru=this.worker=new Worker(Zt$1);Ru.onmessage=function(Ou){var Fu=Ou.data,Nu=Fu.id,Vu=Fu.result,Gu=Fu.error,Uu=$u.getKey(Nu);$u.requests[Uu]&&(Gu?$u.requests[Uu](new Error(Gu)):$u.requests[Uu](null,Vu),delete $u.requests[Uu])},Ru.onerror=function(Ou){return console.error(Ou)}}return _u.prototype.getKey=function($u){return"key_"+String($u)},_u.prototype.decompress=function($u,Ru){var Ou=++this.callCounter;this.requests[this.getKey(Ou)]=Ru,this.worker.postMessage({type:"decompress",id:Ou,data:$u},[$u.buffer])},_u.prototype.terminate=function(){this.worker.terminate()},_u.support=Yt,_u}();function ei$1(_u){return Array.prototype.reduce.call(_u,function($u,Ru,Ou){return $u|Ru<<8*Ou},0)}function ti$1(_u){var $u=new Uint8Array(_u),Ru=ei$1($u.slice(0,4));if(Ru>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Ou=[],Fu=[],Nu=4+4*Ru,Vu=0;Vu<Ru;Vu++)Fu[Vu]=ei$1($u.slice(4+4*Vu,8+4*Vu)),Ou[Vu]=Vu===Ru-1?$u.subarray(Nu,Nu+Fu[Vu]):$u.slice(Nu,Nu+Fu[Vu]),Nu+=Fu[Vu];return $t.support?function(Gu){for(var Uu=[],Hu=Gu.length,Wu=function(qu){Uu.push(new Promise(function(Ku,Yu){var _c=new $t;_c.decompress(Gu[qu],function(Ju,Xu){if(_c.terminate(),Ju)return Yu(Ju);Ku(Xu)})}))},Qu=0;Qu<Hu;Qu++)Wu(Qu);return Promise.all(Uu)}(Ou):Promise.resolve(function(Gu){for(var Uu,Hu=[],Wu=Gu.length,Qu=function(Ku){var Yu={data:Gu[Ku],offset:0,readByte:function(){return this.data[this.offset++]}},_c=Yu.data.length,Ju={data:[],offset:0,writeByte:function(Zu){var Xc=Math.floor(this.offset/_c);this.data[Xc]||(this.data[Xc]=new Uint8Array(_c)),this.data[Xc][this.offset%_c]=Zu,this.offset++}};Wt$1.decompressFile(Yu,Ju),Uu=new Uint8Array(Ju.offset);for(var Xu=0;Xu<Ju.offset;Xu++)Uu[Xu]=Ju.data[Math.floor(Xu/_c)][Xu%_c];Hu.push(Uu)},qu=0;qu<Wu;qu++)Qu(qu);return Hu}(Ou))}function ii$1(_u,$u){for(var Ru={},Ou=0,Fu=$u;Ou<Fu.length;Ou++){var Nu=Fu[Ou];Nu in _u&&(Ru[Nu]=_u[Nu])}return Ru}var ni=!1;try{ni=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(_u){}var ri$1=[];function oi$1(){var _u=this.src;this.onerror=this.onload=Qe$1,this.removeAttribute("src"),/^blob\:/.test(_u)&&URL.revokeObjectURL(_u),this.close=Qe$1}function si(){ri$1.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi$1})}function li$1(_u){return new Promise(function($u,Ru){var Ou=ai();Ou.onload=function(){Ou.onload=Ou.onerror=Qe$1,setTimeout(function(){return $u(Ou)},30)},Ou.onerror=function(){var Fu=Ou.src;Ou.onload=Ou.onerror=Qe$1,Ou.close(),Ru(new Error("image load error: ".concat(Fu)))},Ou.src=URL.createObjectURL(_u)})}function ui(_u,$u){if($u&&(_u.width>$u.width||_u.height>$u.height)){var Ru=function(Uu,Hu){var Wu=ri$1.shift();if(Wu)return Wu.width=Uu,Wu.height=Hu,Wu;if(ni){var Qu=new OffscreenCanvas(Uu,Hu);return Object.assign(Qu,{close:si})}return Qu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Qu,{close:si})}(Math.min(_u.width,$u.width),Math.min(_u.height,$u.height)),Ou=Ru.getContext("2d");Ou.clearRect(0,0,Ru.width,Ru.height),Ou.drawImage(_u,0,0,Ru.width,Ru.height),_u.close();var Fu=new r$3.Texture(Ru);Fu.needsUpdate=!0,Fu.flipY=!0;var Nu=Fu.dispose;return Fu.dispose=function(){Ru.close(),Nu.call(Fu),delete Fu.dispose},Fu}var Vu=new r$3.Texture(_u);Vu.needsUpdate=!0,Vu.minFilter=r$3.LinearFilter,Vu.magFilter=r$3.LinearFilter,Vu.flipY=!0;var Gu=Vu.dispose;return Vu.dispose=function(){_u.close(),Gu.call(Vu),delete Vu.dispose},Vu}var hi=new r$3.WebGLRenderTarget(1,1),ci=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$3.Mesh(di),fi=new r$3.Scene;fi.add(pi);var Ai,gi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(_u,$u,Ru){return $u.flipY!==void 0&&(_u.flipY=$u.flipY),$u.format!==void 0&&(_u.format=$u.format),$u.encoding!==void 0&&(_u.encoding=$u.encoding),$u.minFilter!==void 0&&(_u.minFilter=$u.minFilter),$u.magFilter!==void 0&&(_u.magFilter=$u.magFilter),Ru?new Promise(function(Ou){at.shared.add(function(){try{var Fu=Ru.getRenderTarget();Ru.setRenderTarget(hi),_u instanceof r$3.CubeTexture?(pi.material=mi,mi.uniforms.map.value=_u,Ru.render(fi,ci),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=_u,Ru.render(fi,ci),mi.uniforms.map.value=null),Ru.setRenderTarget(Fu),Ou(_u)}catch{Ou(_u)}},!0,1)}):Promise.resolve(_u)}var yi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi=((Ai={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),Ei$1=function(){function _u(){}return _u.setTranscoderPath=function($u){return this.transcoderPath=$u,this},_u.setWorkerLimit=function($u){return this.workerLimit=$u,this},_u.isInitialized=function(){return this.workerPool.filter(function($u){return $u._initialized}).length!==0},_u.detectSupport=function($u){var Ru=this.workerConfig;if(Ru.astcSupported=!!$u.extensions.get("WEBGL_compressed_texture_astc"),Ru.bptcSupported=!!$u.extensions.get("EXT_texture_compression_bptc"),Ru.etcSupported=!!$u.extensions.get("WEBGL_compressed_texture_etc1"),Ru.dxtSupported=!!$u.extensions.get("WEBGL_compressed_texture_s3tc"),Ru.pvrtcSupported=!!$u.extensions.get("WEBGL_compressed_texture_pvrtc")||!!$u.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Ru.astcSupported)Ru.format=_u.BASIS_FORMAT.cTFASTC_4x4;else if(Ru.bptcSupported)Ru.format=_u.BASIS_FORMAT.cTFBC7_M5;else if(Ru.dxtSupported)Ru.format=_u.BASIS_FORMAT.cTFBC3;else if(Ru.pvrtcSupported)Ru.format=_u.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Ru.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Ru.format=_u.BASIS_FORMAT.cTFETC1}return this},_u.createTexture=function($u){var Ru,Ou,Fu=this,Nu=$u.byteLength,Vu=this._allocateWorker(Nu).then(function(Gu){return Ru=Gu,Ou=Fu.workerNextTaskID++,new Promise(function(Uu,Hu){Ru._callbacks[Ou]={resolve:Uu,reject:Hu},Ru.postMessage({type:"transcode",id:Ou,buffer:$u},[$u])})}).then(function(Gu){var Uu,Hu=Fu.workerConfig,Wu=Gu.width,Qu=Gu.height,qu=Gu.mipmaps;switch(Gu.format){case bi.cTFASTC_4x4:Uu=new r$3.CompressedTexture(qu,Wu,Qu,r$3.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:Uu=new r$3.CompressedTexture(qu,Wu,Qu,wi[Hu.format],r$3.UnsignedByteType);break;case bi.cTFETC1:Uu=new r$3.CompressedTexture(qu,Wu,Qu,r$3.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:Uu=new r$3.CompressedTexture(qu,Wu,Qu,r$3.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:Uu=new r$3.CompressedTexture(qu,Wu,Qu,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Uu.minFilter=qu.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,Uu.magFilter=r$3.LinearFilter,Uu.generateMipmaps=!1,Uu.needsUpdate=!0,Uu});return Vu.catch(function(){return!0}).then(function(){Ru&&Ou&&(Ru._taskLoad-=Nu,delete Ru._callbacks[Ou])}),Vu},_u._initTranscoder=function(){var $u=this;if(!this.transcoderPending){var Ru=new r$3.FileLoader;Ru.setPath(this.transcoderPath);var Ou=new Promise(function(Vu,Gu){Ru.load("basis_transcoder.js",Vu,void 0,Gu)}),Fu=new r$3.FileLoader;Fu.setPath(this.transcoderPath),Fu.setResponseType("arraybuffer");var Nu=new Promise(function(Vu,Gu){Fu.load("basis_transcoder.wasm",Vu,void 0,Gu)});this.transcoderPending=Promise.all([Ou,Nu]).then(function(Vu){var Gu=Vu[0],Uu=Vu[1],Hu=["/* basis_transcoder.js */",Gu,"/* worker */",yi].join(`
`);$u.workerSourceURL=URL.createObjectURL(new Blob([Hu])),$u.transcoderBinary=Uu})}return this.transcoderPending},_u._allocateWorker=function($u){var Ru=this;return this._initTranscoder().then(function(){if(Ru.workerPool.length<Ru.workerLimit){var Ou=function(Nu){var Vu=new Worker(Nu);return Object.assign(Vu,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Ru.workerSourceURL);Ou._callbacks={},Ou._initialized=!1,Ou._taskLoad=0,Ou.postMessage({type:"init",config:Ru.workerConfig,transcoderBinary:Ru.transcoderBinary}),Ou.onmessage=function(Nu){var Vu=Nu.data;switch(Vu.type){case"initialized":Ou._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Ou._callbacks[Vu.id].resolve(Vu);break;case"error":Ou._callbacks[Vu.id].reject(Vu);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Vu.type,'"'))}},Ru.workerPool.push(Ou)}else Ru.workerPool.sort(function(Nu,Vu){return Nu._taskLoad>Vu._taskLoad?-1:1});var Fu=Ru.workerPool[Ru.workerPool.length-1];return Fu._taskLoad+=$u,Fu})},_u.prototype.dispose=function(){for(var $u=0;$u<_u.workerPool.length;$u++)_u.workerPool[$u].terminate();return _u.workerPool.length=0,this},_u.BASIS_FORMAT=bi,_u.DXT_FORMAT=xi,_u.DXT_FORMAT_MAP=wi,_u.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",_u.transcoderBinary=null,_u.transcoderPending=null,_u.workerLimit=1,_u.workerPool=[],_u.workerNextTaskID=1,_u.workerSourceURL="",_u.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},_u}();function Mi$1(_u){var $u=_u.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return $u?$u[1]:location.protocol}var Ii$1=function(){function _u($u){this.timeout=$u.timeout,this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u},_u.prototype.load=function($u,Ru,Ou,Fu,Nu,Vu){var Gu;Ru===void 0&&(Ru={}),Ou===void 0&&(Ou=Qe$1),Fu===void 0&&(Fu=Qe$1),Nu===void 0&&(Nu=Qe$1);var Uu=Mi$1($u),Hu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Wu=(Gu=Ru.viaAjax)!==null&&Gu!==void 0&&Gu,Qu=Je($u),qu=/^https?:$/.test(Uu),Ku=/\.basis$/.test($e($u).split("?")[0]);if(Qu?Wu=!0:qu||(Wu=!1),Wu){if(Ku){var Yu=null,_c="arraybuffer";return Ru.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it$1($u,t$3.__assign(t$3.__assign({},Hu),{responseType:_c}),void 0,void 0,Nu).then(function(Xc){return Yu=Xc.meta,Ei$1.createTexture(Xc.body)}).then(function(Xc){return Ru.preInit!==!1?vi(Xc,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii$1(Ru,["wrapS","wrapT"])),Vu):Xc}).then(function(Xc){var _h={meta:Yu,body:Xc};return Ou(_h),_h}).catch(function(Xc){return Fu(Xc),Promise.reject(Xc)})}return _c="blob",it$1($u,t$3.__assign(t$3.__assign({},Hu),{responseType:_c}),void 0,void 0,Nu).then(function(Xc){return li$1(Xc.body)}).then(function(Xc){return ui(Xc,Ru.maxSize)}).then(function(Xc){return Ru.preInit!==!1?vi(Xc,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Ru),Vu):Xc}).then(function(Xc){var _h={meta:null,body:Xc};return Ou(_h),_h}).catch(function(Xc){return Fu(Xc),Promise.reject(Xc)})}if(Ku){var Ju=new Error("cannot load basis texture via image");return Fu(Ju),Promise.reject(Ju)}var Xu=null,Zu=ai();return rt$1($u,Hu,void 0,void 0,Nu,Zu).then(function(Xc){return Xu=Xc.meta,ui(Xc.body,Ru.maxSize)}).then(function(Xc){return Ru.preInit!==!1?vi(Xc,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Ru),Vu):Xc}).then(function(Xc){var _h={meta:Xu,body:Xc};return Ou(_h),_h}).catch(function(Xc){return Zu.close(),Fu(Xc),Promise.reject(Xc)})},_u.prototype.loadCube=function($u,Ru,Ou,Fu,Nu,Vu){var Gu;Ru===void 0&&(Ru={}),Ou===void 0&&(Ou=Qe$1),Fu===void 0&&(Fu=Qe$1),Nu===void 0&&(Nu=Qe$1),performance.now(),Array.isArray($u)||($u=[$u.right,$u.left,$u.up,$u.down,$u.front,$u.back]);for(var Uu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Hu=[],Wu=[0,0,0,0,0,0],Qu=[],qu=function(_c){var Ju=$u[_c],Xu=Mi$1(Ju),Zu=function(tp){Wu[_c]=tp,Nu(Wu.reduce(function(ip,rp){return ip+rp},0)/6)},Xc=(Gu=Ru.viaAjax)!==null&&Gu!==void 0&&Gu,_h=/^https?:$/.test(Xu),ep=Je(Ju),np=/\.basis$/.test($e(Ju).split("?")[0]);if(ep?Xc=!0:_h||(Xc=!1),Xc)if(np){var ap="arraybuffer",lp=it$1(Ju,t$3.__assign(t$3.__assign({},Uu),{responseType:ap}),void 0,void 0,Zu).then(function(tp){return Qu[_c]=tp.meta,Ei$1.createTexture(tp.body)});Hu.push(lp)}else ap="blob",lp=it$1(Ju,t$3.__assign(t$3.__assign({},Uu),{responseType:ap}),void 0,void 0,Zu).then(function(tp){return Qu[_c]=tp.meta,li$1(tp.body)}),Hu.push(lp);else{if(np){var up=new Error("cannot load basis texture via image");return Fu(up),{value:Promise.reject(up)}}var _f=ai();lp=rt$1(Ju,Uu,void 0,void 0,Zu,_f).then(function(tp){return Qu[_c]=tp.meta,tp.body}).catch(function(tp){return _f.close(),Promise.reject(tp)}),Hu.push(lp)}},Ku=0;Ku<6;Ku++){var Yu=qu(Ku);if(typeof Yu=="object")return Yu.value}return Promise.all(Hu).then(function(_c){return performance.now(),_c[0]instanceof r$3.CompressedTexture?function(Ju){var Xu=new r$3.CubeTexture(Ju);Xu.needsUpdate=!0;var Zu=Xu.dispose;return Xu.dispose=function(){for(var Xc=0,_h=Ju;Xc<_h.length;Xc++)_h[Xc].dispose();Zu.call(Xu),delete Xu.dispose},Xu.isCompressedTexture=!0,Xu.format=Ju[0].format,Xu.minFilter=Ju[0].minFilter,Xu.magFilter=Ju[0].magFilter,Xu}(_c):function(Ju){var Xu=new r$3.CubeTexture(Ju);Xu.needsUpdate=!0,Xu.minFilter=r$3.LinearFilter,Xu.magFilter=r$3.LinearFilter,Xu.flipY=!1;var Zu=Xu.dispose;return Xu.dispose=function(){for(var Xc=0,_h=Ju;Xc<_h.length;Xc++)_h[Xc].close();Zu.call(Xu),delete Xu.dispose},Xu}(_c)}).then(function(_c){return Ru.preInit!==!1?_c.isCompressedTexture?vi(_c,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii$1(Ru,["wrapS","wrapT"])),Vu):vi(_c,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Ru),Vu):_c}).then(function(_c){var Ju={body:_c,meta:Qu};return Ou(Ju),Ju}).catch(function(_c){for(var Ju=0,Xu=Hu;Ju<Xu.length;Ju++)Xu[Ju].then(function(Zu){Zu instanceof r$3.Texture?Zu.dispose():Zu.close()}).catch(Qe$1);return Fu(_c),Promise.reject(_c)})},_u}();const Si=o$2.Reader,Ci$1=o$2.util,Bi$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi$1.Model=(()=>{function _u($u){if(this.chunks=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.chunks=Ci$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Si||($u=Si.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new Bi$1.Model;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.chunks&&Fu.chunks.length||(Fu.chunks=[]),Fu.chunks.push(Bi$1.Chunk.decode($u,$u.uint32()));break;default:$u.skipType(7&Nu)}}return Fu},_u})();Bi$1.Chunk=(()=>{function _u($u){if($u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.vertices=null,_u.prototype.faces=null,_u.prototype.name="",_u.prototype.texture="",_u.decode=function($u,Ru){$u instanceof Si||($u=Si.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new Bi$1.Chunk;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.vertices=Bi$1.Vertices.decode($u,$u.uint32());break;case 2:Fu.faces=Bi$1.Faces.decode($u,$u.uint32());break;case 3:Fu.name=$u.string();break;case 4:Fu.texture=$u.string();break;default:$u.skipType(7&Nu)}}if(!Fu.hasOwnProperty("vertices"))throw Ci$1.ProtocolError("missing required 'vertices'",{instance:Fu});if(!Fu.hasOwnProperty("faces"))throw Ci$1.ProtocolError("missing required 'faces'",{instance:Fu});if(!Fu.hasOwnProperty("name"))throw Ci$1.ProtocolError("missing required 'name'",{instance:Fu});return Fu},_u})(),Bi$1.Vertices=(()=>{function _u($u){if(this.xyz=[],this.uvs=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.xyz=Ci$1.emptyArray,_u.prototype.uvs=Ci$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Si||($u=Si.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new Bi$1.Vertices;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.xyz&&Fu.xyz.length||(Fu.xyz=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.xyz.push($u.float())}else Fu.xyz.push($u.float());break;case 2:if(Fu.uvs&&Fu.uvs.length||(Fu.uvs=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.uvs.push($u.float())}else Fu.uvs.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})(),Bi$1.Faces=(()=>{function _u($u){if(this.indices=[],this.normals=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.indices=Ci$1.emptyArray,_u.prototype.normals=Ci$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Si||($u=Si.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new Bi$1.Faces;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.indices&&Fu.indices.length||(Fu.indices=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.indices.push($u.uint32())}else Fu.indices.push($u.uint32());break;case 2:if(Fu.normals&&Fu.normals.length||(Fu.normals=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.normals.push($u.float())}else Fu.normals.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})();var Pi$1=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri$1(_u){var $u=_u.match(/(group|floor)-?(\d+)/);return $u?parseInt($u[2],10):0}function ki(_u){var $u=_u.match(/(chunk)-?(\d+)/);return $u?parseInt($u[2],10):0}function Di(_u){return 1e6*Ri$1(_u.name)+1e3*ki(_u.name)+function($u){var Ru=$u.match(/(sub)-?(\d+)/);return Ru?parseInt(Ru[2],10):0}(_u.name)}function Li(_u,$u,Ru,Ou,Fu){var Nu=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:Ei$1.isInitialized()},ii$1($u,["format","quality","size","sharpen","mappings"]));return _u=$u.transform?$u.transform(_u,Nu):ct$1(_u,Nu),new Ii$1({allowHosts:Ru,requestProxy:Ou,networkSubscribe:Fu}).load(_u,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:typeof Nu.size=="number"?new r$3.Vector2(Nu.size,Nu.size):void 0,preInit:!0}).then(function(Vu){var Gu=Vu.body;return Gu.needsUpdate=!0,Gu})}function Oi$1(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){Fu===void 0&&(Fu={});for(var Uu=function(op){for(var sp,cp,hp=[],dp=!0,xp=0,bp=op.chunks;xp<bp.length;xp++)if(!($m=bp[xp]).faces.normals||$m.faces.normals.length===0){dp=!1;break}for(var Rp=[],Tp=0,Up=op.chunks.sort(function(gm,Lm){return Di(gm)-Di(Lm)});Tp<Up.length;Tp++){var Ip=Ri$1(($m=Up[Tp]).name);Rp[Ip]||(Rp[Ip]=[]),Rp[Ip].push($m)}for(var Vp=0;Vp<Rp.length;Vp++){var Lp=Rp[Vp];if(Lp)if(dp){for(var mp=0,pp=0;pp<Lp.length;pp++)mp+=($m=Lp[pp]).faces.indices.length;for(var wp=3*mp,Ap=2*mp,Sp=3*mp,Cp=new ArrayBuffer(4*wp+4*Ap+4*Sp),$p=new Float32Array(Cp,0,wp),Fp=new Float32Array(Cp,4*wp,Ap),jp=new Float32Array(Cp,4*wp+4*Ap,Sp),kp=[],fp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],yp=0,Gp=0;Gp<Lp.length;Gp++){var Np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Xp=($m=Lp[Gp]).vertices.xyz,Qp=$m.vertices.uvs,Zp=$m.faces.indices,im=$m.faces.normals,nm=Zp.length;for(pp=0;pp<nm;pp++){var cm=Zp[pp],em=Xp[3*cm],om=Xp[3*cm+1],tm=Xp[3*cm+2],sm=1/(Pi$1[3]*em+Pi$1[7]*om+Pi$1[11]*tm+Pi$1[15]),Bp=(Pi$1[0]*em+Pi$1[4]*om+Pi$1[8]*tm+Pi$1[12])*sm,rm=(Pi$1[1]*em+Pi$1[5]*om+Pi$1[9]*tm+Pi$1[13])*sm,lm=(Pi$1[2]*em+Pi$1[6]*om+Pi$1[10]*tm+Pi$1[14])*sm;$p[3*yp+3*pp]=Bp,$p[3*yp+3*pp+1]=rm,$p[3*yp+3*pp+2]=lm,Fp[2*yp+2*pp]=Qp[2*cm],Fp[2*yp+2*pp+1]=Qp[2*cm+1];var dm=3*Math.floor(pp/3),hm=im[dm],ym=im[dm+1],Mm=im[dm+2],Em=1/(Pi$1[3]*hm+Pi$1[7]*ym+Pi$1[11]*Mm+Pi$1[15]),Dm=(Pi$1[0]*hm+Pi$1[4]*ym+Pi$1[8]*Mm+Pi$1[12])*Em,Sm=(Pi$1[1]*hm+Pi$1[5]*ym+Pi$1[9]*Mm+Pi$1[13])*Em,Bm=(Pi$1[2]*hm+Pi$1[6]*ym+Pi$1[10]*Mm+Pi$1[14])*Em;jp[3*yp+3*pp]=Dm,jp[3*yp+3*pp+1]=Sm,jp[3*yp+3*pp+2]=Bm,Bp<Np[0]&&(Np[0]=Bp),rm<Np[1]&&(Np[1]=rm),lm<Np[2]&&(Np[2]=lm),Bp>Np[3]&&(Np[3]=Bp),rm>Np[4]&&(Np[4]=rm),lm>Np[5]&&(Np[5]=lm)}Np[0]<fp[0]&&(fp[0]=Np[0]),Np[1]<fp[1]&&(fp[1]=Np[1]),Np[2]<fp[2]&&(fp[2]=Np[2]),Np[3]>fp[3]&&(fp[3]=Np[3]),Np[4]>fp[4]&&(fp[4]=Np[4]),Np[5]>fp[5]&&(fp[5]=Np[5]),kp.push({materialIndex:Gp,name:$m.name,chunkName:ki($m.name),start:yp,count:$m.faces.indices.length,texture:(sp=$m.texture)!==null&&sp!==void 0?sp:void 0}),yp+=nm}hp.push({floorIndex:Vp,vertices:$p,uvs:Fp,indices:null,normals:jp,groups:kp,extents:fp})}else{mp=0;var Rm=0;for(pp=0;pp<Lp.length;pp++)Rm+=($m=Lp[pp]).vertices.xyz.length/3,mp+=$m.faces.indices.length;wp=3*Rm,Ap=2*Rm,Sp=3*Rm;var Cm=mp,km=(Cp=new ArrayBuffer(4*wp+4*Ap+4*Sp+4*Cm),$p=new Float32Array(Cp,0,wp),Fp=new Float32Array(Cp,4*wp,Ap),jp=new Float32Array(Cp,4*wp+4*Ap,Sp),new Uint32Array(Cp,4*wp+4*Ap+4*Sp,Cm)),zm=(kp=[],fp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(yp=0,Gp=0;Gp<Lp.length;Gp++){Np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Xp=($m=Lp[Gp]).vertices.xyz,Qp=$m.vertices.uvs,Zp=$m.faces.indices;var $m,Mp=Xp.length/3;for(nm=Zp.length,pp=0;pp<Mp;pp++)em=Xp[3*pp],om=Xp[3*pp+1],tm=Xp[3*pp+2],sm=1/(Pi$1[3]*em+Pi$1[7]*om+Pi$1[11]*tm+Pi$1[15]),Bp=(Pi$1[0]*em+Pi$1[4]*om+Pi$1[8]*tm+Pi$1[12])*sm,rm=(Pi$1[1]*em+Pi$1[5]*om+Pi$1[9]*tm+Pi$1[13])*sm,lm=(Pi$1[2]*em+Pi$1[6]*om+Pi$1[10]*tm+Pi$1[14])*sm,$p[3*yp+3*pp]=Bp,$p[3*yp+3*pp+1]=rm,$p[3*yp+3*pp+2]=lm,Fp[2*yp+2*pp]=Qp[2*pp],Fp[2*yp+2*pp+1]=Qp[2*pp+1],Bp<Np[0]&&(Np[0]=Bp),rm<Np[1]&&(Np[1]=rm),lm<Np[2]&&(Np[2]=lm),Bp>Np[3]&&(Np[3]=Bp),rm>Np[4]&&(Np[4]=rm),lm>Np[5]&&(Np[5]=lm);for(Np[0]<fp[0]&&(fp[0]=Np[0]),Np[1]<fp[1]&&(fp[1]=Np[1]),Np[2]<fp[2]&&(fp[2]=Np[2]),Np[3]>fp[3]&&(fp[3]=Np[3]),Np[4]>fp[4]&&(fp[4]=Np[4]),Np[5]>fp[5]&&(fp[5]=Np[5]),pp=0;pp<nm;pp++)km[zm+pp]=yp+Zp[pp];kp.push({materialIndex:Gp,name:$m.name,chunkName:ki($m.name),start:zm,count:$m.faces.indices.length,texture:(cp=$m.texture)!==null&&cp!==void 0?cp:void 0}),yp+=Mp,zm+=nm}for(pp=0;pp<mp;pp+=3){var Wp,Hp,Kp,am,xm,Am,pm,vm,wm,Pm,vp,Ep,Pp,zp,Yp,mm;hm=void 0,ym=void 0,Mm=void 0,Wp=3*km[pp],Hp=3*km[pp+1],Kp=3*km[pp+2],am=$p[Wp],xm=$p[Wp+1],Am=$p[Wp+2],pm=$p[Hp],vm=$p[Hp+1],wm=$p[Hp+2],Pm=$p[Kp],hm=(Ep=$p[Kp+1]-vm)*(mm=Am-wm)-(Pp=$p[Kp+2]-wm)*(Yp=xm-vm),ym=Pp*(zp=am-pm)-(vp=Pm-pm)*mm,Mm=vp*Yp-Ep*zp,jp[Wp]+=hm,jp[Wp+1]+=ym,jp[Wp+2]+=Mm,jp[Hp]+=hm,jp[Hp+1]+=ym,jp[Hp+2]+=Mm,jp[Kp]+=hm,jp[Kp+1]+=ym,jp[Kp+2]+=Mm}hp.push({floorIndex:Vp,vertices:$p,uvs:Fp,indices:km,normals:jp,groups:kp,extents:fp})}}return hp}(_u),Hu=[],Wu=0,Qu=Uu;Wu<Qu.length;Wu++){var qu=Qu[Wu],Ku=qu.floorIndex,Yu=qu.vertices,_c=qu.uvs,Ju=qu.indices,Xu=qu.normals,Zu=qu.groups,Xc=qu.extents,_h=new r$3.Box3;_h.min.x=Xc[0],_h.min.y=Xc[1],_h.min.z=Xc[2],_h.max.x=Xc[3],_h.max.y=Xc[4],_h.max.z=Xc[5];var ep=new r$3.BufferGeometry;ep.setAttribute("position",new r$3.BufferAttribute(Yu,3)),ep.setAttribute("uv",new r$3.BufferAttribute(_c,2)),ep.setAttribute("normal",new r$3.BufferAttribute(Xu,3)),Ju&&ep.setIndex(new r$3.BufferAttribute(Ju,1)),ep.boundingBox=_h,ep.boundingSphere=_h.getBoundingSphere(new r$3.Sphere);for(var np=0,ap=Zu;np<ap.length;np++){var lp=ap[np];ep.addGroup(lp.start,lp.count,lp.materialIndex)}for(var up=[],_f=function(op){var sp=Ru[op.chunkName]||(op.texture?$u+op.texture:void 0),cp=new Mt;if(up.push(cp),sp){var hp=void 0;sp in Fu?hp=Fu[sp]:(hp=Li(sp,Ou,Nu,Vu,Gu),Fu[sp]=hp),hp.then(function(dp){cp.uniforms.map.value=dp,cp.uniforms.exposure.value=3.3},function(){cp.defines.USE_MAP=!1,cp.uniforms.diffuse.value=new r$3.Color(16777215)})}else cp.defines.USE_MAP=!1,cp.uniforms.diffuse.value=new r$3.Color(16777215)},tp=0,ip=Zu;tp<ip.length;tp++)_f(lp=ip[tp]);var rp=new ft(ep,up);rp.name="model_floor_"+Ku,rp.floorIndex=Ku,Hu.push(rp)}return{objects:Hu,texturePromise:Promise.all(Object.keys(Fu).map(function(op){return Fu[op].catch(Qe$1)})).then(Qe$1)}}function Ni(_u,$u){return(_u=Object.assign({},_u)).autoResize!==!1&&($u>96?_u.size=Math.min(_u.size||1/0,100):$u>48?_u.size=Math.min(_u.size||1/0,200):$u>24?_u.size=Math.min(_u.size||1/0,400):$u>12?_u.size=Math.min(_u.size||1/0,800):$u>4&&(_u.size=Math.min(_u.size||1/0,1024))),_u}function Fi(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:/i.test(_u)}const Qi$1=o$2.Reader,Vi$1=o$2.util,_i$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi$1=_i$1.Model=(()=>{function _u($u){if(this.meshes=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.meshes=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Model;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.meshes&&Fu.meshes.length||(Fu.meshes=[]),Fu.meshes.push(_i$1.Mesh.decode($u,$u.uint32()));break;default:$u.skipType(7&Nu)}}return Fu},_u})();function qi$1(_u){for(var $u=[0,0,0],Ru=0;Ru<_u.attributes.normal.array.length/9;Ru++)$u[0]=_u.attributes.normal.array[9*Ru],$u[1]=_u.attributes.normal.array[9*Ru+1],$u[2]=_u.attributes.normal.array[9*Ru+2],_u.attributes.normal.array[9*Ru]=_u.attributes.normal.array[9*Ru+6],_u.attributes.normal.array[9*Ru+1]=_u.attributes.normal.array[9*Ru+7],_u.attributes.normal.array[9*Ru+2]=_u.attributes.normal.array[9*Ru+8],_u.attributes.normal.array[9*Ru+6]=$u[0],_u.attributes.normal.array[9*Ru+7]=$u[1],_u.attributes.normal.array[9*Ru+8]=$u[2];for(Ru=0;Ru<_u.attributes.position.array.length/9;Ru++)$u[0]=_u.attributes.position.array[9*Ru],$u[1]=_u.attributes.position.array[9*Ru+1],$u[2]=_u.attributes.position.array[9*Ru+2],_u.attributes.position.array[9*Ru]=_u.attributes.position.array[9*Ru+6],_u.attributes.position.array[9*Ru+1]=_u.attributes.position.array[9*Ru+7],_u.attributes.position.array[9*Ru+2]=_u.attributes.position.array[9*Ru+8],_u.attributes.position.array[9*Ru+6]=$u[0],_u.attributes.position.array[9*Ru+7]=$u[1],_u.attributes.position.array[9*Ru+8]=$u[2];for(Ru=0;Ru<_u.attributes.uv.array.length/6;Ru++)$u[0]=_u.attributes.uv.array[6*Ru],$u[1]=_u.attributes.uv.array[6*Ru+1],_u.attributes.uv.array[6*Ru]=_u.attributes.uv.array[6*Ru+4],_u.attributes.uv.array[6*Ru+1]=_u.attributes.uv.array[6*Ru+5],_u.attributes.uv.array[6*Ru+4]=$u[0],_u.attributes.uv.array[6*Ru+5]=$u[1];_u.attributes.normal.needsUpdate=!0,_u.attributes.position.needsUpdate=!0,_u.attributes.uv.needsUpdate=!0}function zi$1(_u){var $u=_u.position,Ru=_u.normal,Ou=_u.uv,Fu=_u.uv2,Nu=_u.groups,Vu=new r$3.BufferGeometry;Vu.setAttribute("position",new r$3.BufferAttribute(new Float32Array($u.array),3)),Ru&&Vu.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(Ru.array),3)),Ou&&Vu.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(Ou.array),2)),Fu&&Vu.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(Fu.array),2));for(var Gu=0,Uu=Nu;Gu<Uu.length;Gu++){var Hu=Uu[Gu];Vu.addGroup(Hu.start,Hu.count,Hu.materialIndex)}return Vu}function Ki$1(_u,$u,Ru,Ou,Fu,Nu){if(Nu.hasOwnProperty(_u))return Nu[_u];Fi(_u=_u.split("?")[0])||(_u=$u+_u),(_u=_u.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(_u="https:"+_u);var Vu=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei$1.isInitialized()},ii$1(Ru,["quality","format","sharpen","mappings"]));return Nu[_u=Ru.transform?Ru.transform(_u,Vu):ct$1(_u,Vu)]=Fu.load(_u,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping}).then(function(Gu){var Uu=Gu.body;return Ou&&Uu.repeat.copy(Ou),Uu.needsUpdate=!0,Uu.updateMatrix(),Uu})}function Ui$1(_u,$u,Ru,Ou,Fu){var Nu=[],Vu=new Mt,Gu=Vu.uniforms;Gu.exposure.value=4.3;var Uu=Vu.defines;if(Uu.USE_MAP=!1,Uu.USE_UV=!1,_u.kd&&(Gu.diffuse.value=new r$3.Color().fromArray(_u.kd.rgb)),_u.mapkd){var Hu=null;if(_u.mapkdrepeat){var Wu=_u.mapkdrepeat.split(/\s+/).map(function(Yu){return Number(Yu)}),Qu=Wu[0],qu=Wu[1];Hu=new r$3.Vector2(Qu,qu)}Nu.push(Ki$1(_u.mapkd,$u,Ru,Hu,Ou,Fu).then(function(Yu){Uu.USE_MAP=!0,Uu.USE_UV=!0,Gu.map.value=Yu,Gu.uvTransform.value=Yu.matrix,Vu.needsUpdate=!0}).catch(Qe$1))}if(_u.ks&&(Gu.specular.value=new r$3.Color().fromArray(_u.ks.rgb)),_u.mapks&&Nu.push(Ki$1(_u.mapks,$u,Ru,null,Ou,Fu).then(function(Yu){Gu.specularMap.value=Yu}).catch(Qe$1)),_u.ke&&(Gu.emissive.value=new r$3.Color().fromArray(_u.ke.rgb)),_u.mapke&&Nu.push(Ki$1(_u.mapke,$u,Ru,null,Ou,Fu).then(function(Yu){Gu.emissiveMap.value=Yu}).catch(Qe$1)),_u.norm&&Nu.push(Ki$1(_u.norm,$u,Ru,null,Ou,Fu).then(function(Yu){Gu.normalMap.value=Yu}).catch(Qe$1)),_u.mapbump&&Nu.push(Ki$1(_u.mapbump,$u,Ru,null,Ou,Fu).then(function(Yu){Gu.bumpMap.value=Yu}).catch(Qe$1)),_u.bump&&Nu.push(Ki$1(_u.bump,$u,Ru,null,Ou,Fu).then(function(Yu){Gu.bumpMap.value=Yu}).catch(Qe$1)),typeof _u.ns=="number"&&(Gu.shininess.value=_u.ns),typeof _u.d=="number"){var Ku=_u.d;Ku>0&&Ku<1&&(Vu.originOpacity=Ku,Vu.opacity=Ku)}return{material:Vu,textureReady:Promise.all(Nu).then(Qe$1)}}function ji$1(_u,$u,Ru,Ou,Fu,Nu){for(var Vu,Gu=[],Uu=[],Hu=(Vu=_u,Hi$1.decode(Vu).meshes),Wu=new Ii$1({allowHosts:Ou,requestProxy:Fu,networkSubscribe:Nu}),Qu=new r$3.Matrix4,qu=new r$3.Vector3,Ku=new r$3.Quaternion,Yu=new r$3.Vector3,_c={},Ju=0,Xu=Hu;Ju<Xu.length;Ju++){var Zu=Xu[Ju],Xc=Zu.name,_h=Zu.chunks,ep=Zu.matrix;if(Xc!=="Ceiling"&&Xc!=="CeilingDrop")for(var np=0,ap=ep;np<ap.length;np++){var lp=ap[np];Qu.elements=lp.elements;var up=new gt$1;up.renderOrder=-3;for(var _f=0;_f<_h.length;_f++){var tp=zi$1(_h[_f].geometry);tp.applyMatrix4(Qu),Qu.decompose(qu,Ku,Yu),Yu.x*Yu.y*Yu.z<0&&tp.attributes.normal&&tp.attributes.position&&tp.attributes.uv&&qi$1(tp);for(var ip=[],rp=0,op=_h[_f].material;rp<op.length;rp++){var sp=Ui$1(op[rp],$u,Ru,Wu,_c),cp=sp.material,hp=sp.textureReady;Uu.push(hp),ip.push(cp)}var dp=new ft(tp,ip);dp.name="chunk_"+_f,up.add(dp)}up.floorIndex=0,up.name=Xc,Gu.push(up)}}return{objects:Gu,texturePromise:Promise.all(Uu).catch(Qe$1)}}function Gi(_u,$u){if(!_u)throw new Error("math.gl assertion ".concat($u))}_i$1.Mesh=(()=>{function _u($u){if(this.chunks=[],this.matrix=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.name="",_u.prototype.chunks=Vi$1.emptyArray,_u.prototype.matrix=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Mesh;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.name=$u.string();break;case 2:Fu.chunks&&Fu.chunks.length||(Fu.chunks=[]),Fu.chunks.push(_i$1.Chunk.decode($u,$u.uint32()));break;case 3:Fu.matrix&&Fu.matrix.length||(Fu.matrix=[]),Fu.matrix.push(_i$1.Matrix.decode($u,$u.uint32()));break;default:$u.skipType(7&Nu)}}if(!Fu.hasOwnProperty("name"))throw Vi$1.ProtocolError("missing required 'name'",{instance:Fu});return Fu},_u})(),_i$1.Matrix=(()=>{function _u($u){if(this.elements=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.elements=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Matrix;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.elements&&Fu.elements.length||(Fu.elements=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.elements.push($u.float())}else Fu.elements.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})(),_i$1.Chunk=(()=>{function _u($u){if(this.material=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.geometry=null,_u.prototype.material=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Chunk;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 2:Fu.geometry=_i$1.Geometry.decode($u,$u.uint32());break;case 3:Fu.material&&Fu.material.length||(Fu.material=[]),Fu.material.push(_i$1.Material.decode($u,$u.uint32()));break;default:$u.skipType(7&Nu)}}if(!Fu.hasOwnProperty("geometry"))throw Vi$1.ProtocolError("missing required 'geometry'",{instance:Fu});return Fu},_u})(),_i$1.Geometry=(()=>{function _u($u){if(this.groups=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.position=null,_u.prototype.uv=null,_u.prototype.uv2=null,_u.prototype.normal=null,_u.prototype.groups=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Geometry;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.position=_i$1.Position.decode($u,$u.uint32());break;case 2:Fu.uv=_i$1.UV.decode($u,$u.uint32());break;case 3:Fu.uv2=_i$1.UV.decode($u,$u.uint32());break;case 4:Fu.normal=_i$1.Normal.decode($u,$u.uint32());break;case 5:Fu.groups&&Fu.groups.length||(Fu.groups=[]),Fu.groups.push(_i$1.Group.decode($u,$u.uint32()));break;default:$u.skipType(7&Nu)}}if(!Fu.hasOwnProperty("position"))throw Vi$1.ProtocolError("missing required 'position'",{instance:Fu});if(!Fu.hasOwnProperty("normal"))throw Vi$1.ProtocolError("missing required 'normal'",{instance:Fu});return Fu},_u})(),_i$1.Position=(()=>{function _u($u){if(this.array=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Position;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.array&&Fu.array.length||(Fu.array=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.array.push($u.float())}else Fu.array.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})(),_i$1.UV=(()=>{function _u($u){if(this.array=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.UV;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.array&&Fu.array.length||(Fu.array=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.array.push($u.float())}else Fu.array.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})(),_i$1.Normal=(()=>{function _u($u){if(this.array=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.array=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Normal;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.array&&Fu.array.length||(Fu.array=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.array.push($u.float())}else Fu.array.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})(),_i$1.Group=(()=>{function _u($u){if($u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.start=0,_u.prototype.count=0,_u.prototype.materialIndex=0,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Group;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.start=$u.uint32();break;case 2:Fu.count=$u.uint32();break;case 3:Fu.materialIndex=$u.uint32();break;default:$u.skipType(7&Nu)}}if(!Fu.hasOwnProperty("start"))throw Vi$1.ProtocolError("missing required 'start'",{instance:Fu});if(!Fu.hasOwnProperty("count"))throw Vi$1.ProtocolError("missing required 'count'",{instance:Fu});if(!Fu.hasOwnProperty("materialIndex"))throw Vi$1.ProtocolError("missing required 'materialIndex'",{instance:Fu});return Fu},_u})(),_i$1.Material=(()=>{function _u($u){if($u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.kd=null,_u.prototype.ks=null,_u.prototype.ke=null,_u.prototype.mapkd="",_u.prototype.mapks="",_u.prototype.mapke="",_u.prototype.norm="",_u.prototype.mapbump="",_u.prototype.bump="",_u.prototype.mapd="",_u.prototype.ns=0,_u.prototype.d=0,_u.prototype.tr=0,_u.prototype.mapkdrepeat="",_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Material;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:Fu.kd=_i$1.Color.decode($u,$u.uint32());break;case 2:Fu.ks=_i$1.Color.decode($u,$u.uint32());break;case 3:Fu.ke=_i$1.Color.decode($u,$u.uint32());break;case 4:Fu.mapkd=$u.string();break;case 5:Fu.mapks=$u.string();break;case 6:Fu.mapke=$u.string();break;case 7:Fu.norm=$u.string();break;case 8:Fu.mapbump=$u.string();break;case 9:Fu.bump=$u.string();break;case 10:Fu.mapd=$u.string();break;case 11:Fu.ns=$u.float();break;case 12:Fu.d=$u.float();break;case 13:Fu.tr=$u.float();break;case 14:Fu.mapkdrepeat=$u.string();break;default:$u.skipType(7&Nu)}}return Fu},_u})(),_i$1.Color=(()=>{function _u($u){if(this.rgb=[],$u)for(let Ru=Object.keys($u),Ou=0;Ou<Ru.length;++Ou)$u[Ru[Ou]]!=null&&(this[Ru[Ou]]=$u[Ru[Ou]])}return _u.prototype.rgb=Vi$1.emptyArray,_u.decode=function($u,Ru){$u instanceof Qi$1||($u=Qi$1.create($u));let Ou=Ru===void 0?$u.len:$u.pos+Ru,Fu=new _i$1.Color;for(;$u.pos<Ou;){let Nu=$u.uint32();switch(Nu>>>3){case 1:if(Fu.rgb&&Fu.rgb.length||(Fu.rgb=[]),(7&Nu)==2){let Vu=$u.uint32()+$u.pos;for(;$u.pos<Vu;)Fu.rgb.push($u.float())}else Fu.rgb.push($u.float());break;default:$u.skipType(7&Nu)}}return Fu},_u})();const Wi$1={};function Xi$1(_u,{precision:$u=Wi$1.precision||4}={}){return _u=function(Ru){return Math.round(Ru/Wi$1.EPSILON)*Wi$1.EPSILON}(_u),"".concat(parseFloat(_u.toPrecision($u)))}function Yi(_u){return Array.isArray(_u)||ArrayBuffer.isView(_u)&&!(_u instanceof DataView)}function Zi$1(_u,$u,Ru){const Ou=Wi$1.EPSILON;Ru&&(Wi$1.EPSILON=Ru);try{if(_u===$u)return!0;if(Yi(_u)&&Yi($u)){if(_u.length!==$u.length)return!1;for(let Fu=0;Fu<_u.length;++Fu)if(!Zi$1(_u[Fu],$u[Fu]))return!1;return!0}return _u&&_u.equals?_u.equals($u):$u&&$u.equals?$u.equals(_u):!(!Number.isFinite(_u)||!Number.isFinite($u))&&Math.abs(_u-$u)<=Wi$1.EPSILON*Math.max(1,Math.abs(_u),Math.abs($u))}finally{Wi$1.EPSILON=Ou}}Wi$1.EPSILON=1e-12,Wi$1.debug=!1,Wi$1.precision=4,Wi$1.printTypes=!1,Wi$1.printDegrees=!1,Wi$1.printRowMajor=!0;class Ji$1 extends function($u){function Ru(){var Ou=Reflect.construct($u,Array.from(arguments));return Object.setPrototypeOf(Ou,Object.getPrototypeOf(this)),Ou}return Ru.prototype=Object.create($u.prototype,{constructor:{value:$u,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Ru,$u):Ru.__proto__=$u,Ru}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from($u){return Array.isArray($u)?this.copy($u):this.fromObject($u)}fromArray($u,Ru=0){for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]=$u[Ou+Ru];return this.check()}to($u){return $u===this?this:Yi($u)?this.toArray($u):this.toObject($u)}toTarget($u){return $u?this.to($u):this}toArray($u=[],Ru=0){for(let Ou=0;Ou<this.ELEMENTS;++Ou)$u[Ru+Ou]=this[Ou];return $u}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi$1)}formatString($u){let Ru="";for(let Ou=0;Ou<this.ELEMENTS;++Ou)Ru+=(Ou>0?", ":"")+Xi$1(this[Ou],$u);return"".concat($u.printTypes?this.constructor.name:"","[").concat(Ru,"]")}equals($u){if(!$u||this.length!==$u.length)return!1;for(let Ru=0;Ru<this.ELEMENTS;++Ru)if(!Zi$1(this[Ru],$u[Ru]))return!1;return!0}exactEquals($u){if(!$u||this.length!==$u.length)return!1;for(let Ru=0;Ru<this.ELEMENTS;++Ru)if(this[Ru]!==$u[Ru])return!1;return!0}negate(){for(let $u=0;$u<this.ELEMENTS;++$u)this[$u]=-this[$u];return this.check()}lerp($u,Ru,Ou){Ou===void 0&&(Ou=Ru,Ru=$u,$u=this);for(let Fu=0;Fu<this.ELEMENTS;++Fu){const Nu=$u[Fu];this[Fu]=Nu+Ou*(Ru[Fu]-Nu)}return this.check()}min($u){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=Math.min($u[Ru],this[Ru]);return this.check()}max($u){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=Math.max($u[Ru],this[Ru]);return this.check()}clamp($u,Ru){for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]=Math.min(Math.max(this[Ou],$u[Ou]),Ru[Ou]);return this.check()}add(...$u){for(const Ru of $u)for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]+=Ru[Ou];return this.check()}subtract(...$u){for(const Ru of $u)for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]-=Ru[Ou];return this.check()}scale($u){if(Array.isArray($u))return this.multiply($u);for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]*=$u;return this.check()}sub($u){return this.subtract($u)}setScalar($u){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]=$u;return this.check()}addScalar($u){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]+=$u;return this.check()}subScalar($u){return this.addScalar(-$u)}multiplyScalar($u){for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]*=$u;return this.check()}divideScalar($u){return this.scale(1/$u)}clampScalar($u,Ru){for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]=Math.min(Math.max(this[Ou],$u),Ru);return this.check()}multiplyByScalar($u){return this.scale($u)}get elements(){return this}check(){if(Wi$1.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let $u=this.length===this.ELEMENTS;for(let Ru=0;Ru<this.ELEMENTS;++Ru)$u=$u&&Number.isFinite(this[Ru]);return $u}}function $i(_u){if(!Number.isFinite(_u))throw new Error("Invalid number ".concat(_u));return _u}function en$1(_u,$u,Ru=""){if(Wi$1.debug&&!function(Ou,Fu){if(Ou.length!==Fu)return!1;for(let Nu=0;Nu<Ou.length;++Nu)if(!Number.isFinite(Ou[Nu]))return!1;return!0}(_u,$u))throw new Error("math.gl: ".concat(Ru," some fields set to invalid numbers'"));return _u}const tn$1={};function nn(_u,$u){tn$1[_u]||(tn$1[_u]=!0,console.warn("".concat(_u," has been removed in version ").concat($u,", see upgrade guide for more information")))}class rn$1 extends Ji$1{get ELEMENTS(){return Gi(!1),0}copy($u){return Gi(!1),this}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let $u=0;for(let Ru=0;Ru<this.ELEMENTS;++Ru)$u+=this[Ru]*this[Ru];return $u}magnitudeSquared(){return this.lengthSquared()}distance($u){return Math.sqrt(this.distanceSquared($u))}distanceSquared($u){let Ru=0;for(let Ou=0;Ou<this.ELEMENTS;++Ou){const Fu=this[Ou]-$u[Ou];Ru+=Fu*Fu}return $i(Ru)}dot($u){let Ru=0;for(let Ou=0;Ou<this.ELEMENTS;++Ou)Ru+=this[Ou]*$u[Ou];return $i(Ru)}normalize(){const $u=this.magnitude();if($u!==0)for(let Ru=0;Ru<this.ELEMENTS;++Ru)this[Ru]/=$u;return this.check()}multiply(...$u){for(const Ru of $u)for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]*=Ru[Ou];return this.check()}divide(...$u){for(const Ru of $u)for(let Ou=0;Ou<this.ELEMENTS;++Ou)this[Ou]/=Ru[Ou];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo($u){return this.distance($u)}distanceToSquared($u){return this.distanceSquared($u)}getComponent($u){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),$i(this[$u])}setComponent($u,Ru){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),this[$u]=Ru,this.check()}addVectors($u,Ru){return this.copy($u).add(Ru)}subVectors($u,Ru){return this.copy($u).subtract(Ru)}multiplyVectors($u,Ru){return this.copy($u).multiply(Ru)}addScaledVector($u,Ru){return this.add(new this.constructor($u).multiplyScalar(Ru))}}var on=typeof Float32Array!="undefined"?Float32Array:Array;function sn$1(){var _u=new on(3);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u}function an$1(_u,$u,Ru){var Ou=new on(3);return Ou[0]=_u,Ou[1]=$u,Ou[2]=Ru,Ou}function ln$1(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]}function un$1(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=Ru[0],Gu=Ru[1],Uu=Ru[2];return _u[0]=Fu*Uu-Nu*Gu,_u[1]=Nu*Vu-Ou*Uu,_u[2]=Ou*Gu-Fu*Vu,_u}function hn(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=Ru[3]*Ou+Ru[7]*Fu+Ru[11]*Nu+Ru[15];return Vu=Vu||1,_u[0]=(Ru[0]*Ou+Ru[4]*Fu+Ru[8]*Nu+Ru[12])/Vu,_u[1]=(Ru[1]*Ou+Ru[5]*Fu+Ru[9]*Nu+Ru[13])/Vu,_u[2]=(Ru[2]*Ou+Ru[6]*Fu+Ru[10]*Nu+Ru[14])/Vu,_u}function cn$1(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2];return _u[0]=Ou*Ru[0]+Fu*Ru[3]+Nu*Ru[6],_u[1]=Ou*Ru[1]+Fu*Ru[4]+Nu*Ru[7],_u[2]=Ou*Ru[2]+Fu*Ru[5]+Nu*Ru[8],_u}Math.hypot||(Math.hypot=function(){for(var _u=0,$u=arguments.length;$u--;)_u+=arguments[$u]*arguments[$u];return Math.sqrt(_u)});var dn$1=function(_u){var $u=_u[0],Ru=_u[1],Ou=_u[2];return Math.hypot($u,Ru,Ou)};function pn$1(_u,$u,Ru){const Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=Ru[3]*Ou+Ru[7]*Fu+Ru[11]*Nu||1;return _u[0]=(Ru[0]*Ou+Ru[4]*Fu+Ru[8]*Nu)/Vu,_u[1]=(Ru[1]*Ou+Ru[5]*Fu+Ru[9]*Nu)/Vu,_u[2]=(Ru[2]*Ou+Ru[6]*Fu+Ru[10]*Nu)/Vu,_u}sn$1();const fn=[0,0,0],An$1={};class gn$1 extends rn$1{static get ZERO(){return An$1.ZERO=An$1.ZERO||Object.freeze(new gn$1(0,0,0,0))}constructor($u=0,Ru=0,Ou=0){super(-0,-0,-0),arguments.length===1&&Yi($u)?this.copy($u):(Wi$1.debug&&($i($u),$i(Ru),$i(Ou)),this[0]=$u,this[1]=Ru,this[2]=Ou)}set($u,Ru,Ou){return this[0]=$u,this[1]=Ru,this[2]=Ou,this.check()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this.check()}fromObject($u){return Wi$1.debug&&($i($u.x),$i($u.y),$i($u.z)),this[0]=$u.x,this[1]=$u.y,this[2]=$u.z,this.check()}toObject($u){return $u.x=this[0],$u.y=this[1],$u.z=this[2],$u}get ELEMENTS(){return 3}get z(){return this[2]}set z($u){this[2]=$i($u)}angle($u){return function(Ru,Ou){var Fu=Ru[0],Nu=Ru[1],Vu=Ru[2],Gu=Ou[0],Uu=Ou[1],Hu=Ou[2],Wu=Math.sqrt(Fu*Fu+Nu*Nu+Vu*Vu)*Math.sqrt(Gu*Gu+Uu*Uu+Hu*Hu),Qu=Wu&&ln$1(Ru,Ou)/Wu;return Math.acos(Math.min(Math.max(Qu,-1),1))}(this,$u)}cross($u){return un$1(this,this,$u),this.check()}rotateX({radians:$u,origin:Ru=fn}){return function(Ou,Fu,Nu,Vu){var Gu=[],Uu=[];Gu[0]=Fu[0]-Nu[0],Gu[1]=Fu[1]-Nu[1],Gu[2]=Fu[2]-Nu[2],Uu[0]=Gu[0],Uu[1]=Gu[1]*Math.cos(Vu)-Gu[2]*Math.sin(Vu),Uu[2]=Gu[1]*Math.sin(Vu)+Gu[2]*Math.cos(Vu),Ou[0]=Uu[0]+Nu[0],Ou[1]=Uu[1]+Nu[1],Ou[2]=Uu[2]+Nu[2]}(this,this,Ru,$u),this.check()}rotateY({radians:$u,origin:Ru=fn}){return function(Ou,Fu,Nu,Vu){var Gu=[],Uu=[];Gu[0]=Fu[0]-Nu[0],Gu[1]=Fu[1]-Nu[1],Gu[2]=Fu[2]-Nu[2],Uu[0]=Gu[2]*Math.sin(Vu)+Gu[0]*Math.cos(Vu),Uu[1]=Gu[1],Uu[2]=Gu[2]*Math.cos(Vu)-Gu[0]*Math.sin(Vu),Ou[0]=Uu[0]+Nu[0],Ou[1]=Uu[1]+Nu[1],Ou[2]=Uu[2]+Nu[2]}(this,this,Ru,$u),this.check()}rotateZ({radians:$u,origin:Ru=fn}){return function(Ou,Fu,Nu,Vu){var Gu=[],Uu=[];Gu[0]=Fu[0]-Nu[0],Gu[1]=Fu[1]-Nu[1],Gu[2]=Fu[2]-Nu[2],Uu[0]=Gu[0]*Math.cos(Vu)-Gu[1]*Math.sin(Vu),Uu[1]=Gu[0]*Math.sin(Vu)+Gu[1]*Math.cos(Vu),Uu[2]=Gu[2],Ou[0]=Uu[0]+Nu[0],Ou[1]=Uu[1]+Nu[1],Ou[2]=Uu[2]+Nu[2]}(this,this,Ru,$u),this.check()}transform($u){return this.transformAsPoint($u)}transformAsPoint($u){return hn(this,this,$u),this.check()}transformAsVector($u){return pn$1(this,this,$u),this.check()}transformByMatrix3($u){return cn$1(this,this,$u),this.check()}transformByMatrix2($u){return function(Ru,Ou,Fu){const Nu=Ou[0],Vu=Ou[1];Ru[0]=Fu[0]*Nu+Fu[2]*Vu,Ru[1]=Fu[1]*Nu+Fu[3]*Vu,Ru[2]=Ou[2]}(this,this,$u),this.check()}transformByQuaternion($u){return function(Ru,Ou,Fu){var Nu=Fu[0],Vu=Fu[1],Gu=Fu[2],Uu=Fu[3],Hu=Ou[0],Wu=Ou[1],Qu=Ou[2],qu=Vu*Qu-Gu*Wu,Ku=Gu*Hu-Nu*Qu,Yu=Nu*Wu-Vu*Hu,_c=Vu*Yu-Gu*Ku,Ju=Gu*qu-Nu*Yu,Xu=Nu*Ku-Vu*qu,Zu=2*Uu;qu*=Zu,Ku*=Zu,Yu*=Zu,_c*=2,Ju*=2,Xu*=2,Ru[0]=Hu+qu+_c,Ru[1]=Wu+Ku+Ju,Ru[2]=Qu+Yu+Xu}(this,this,$u),this.check()}}var mn$1={throttleRequests:!0,maxRequests:5},vn=function(){function _u($u){$u===void 0&&($u={}),this.props=t$3.__assign(t$3.__assign({},mn$1),$u),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return _u.prototype.scheduleRequest=function($u,Ru){if(Ru===void 0&&(Ru=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has($u))return this.requestMap.get($u);var Ou={identiy:$u,priority:0,getPriority:Ru,resolve:function(){}},Fu=new Promise(function(Nu){return Ou.resolve=Nu});return this.requestQueue.push(Ou),this.requestMap.set($u,Fu),this.issueNewRequests(),Fu},_u.prototype.issueRequest=function($u){var Ru=this,Ou=$u.identiy,Fu=$u.resolve,Nu=!1;this.activeRequestCount++,Fu({done:function(){Nu||(Nu=!0,Ru.requestMap.delete(Ou),Ru.activeRequestCount--,Ru.issueNewRequests())}})},_u.prototype.issueNewRequests=function(){var $u=this;this.deferred||(this.deferred=setTimeout(function(){return $u.issueNewRequestsAsync()},0))},_u.prototype.issueNewRequestsAsync=function(){this.deferred=null;var $u=Math.max(this.props.maxRequests-this.activeRequestCount,0);if($u!==0){this.updateAllRequests();for(var Ru=0;Ru<$u;Ru++){var Ou=this.requestQueue.shift();Ou&&this.issueRequest(Ou)}}},_u.prototype.updateAllRequests=function(){for(var $u=this.requestQueue,Ru=0;Ru<$u.length;Ru++){var Ou=$u[Ru];this.updateRequest(Ou)||($u.splice(Ru,1),this.requestMap.delete(Ou.identiy),Ru--)}$u.sort(function(Fu,Nu){return Fu.priority-Nu.priority})},_u.prototype.updateRequest=function($u){return $u.priority=$u.getPriority($u.identiy),!($u.priority<0)||($u.resolve(null),!1)},_u}(),yn$1=function(_u,$u,Ru){this.item=_u,this.previous=$u,this.next=Ru},bn$1=function(){function _u(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.add=function($u){var Ru=new yn$1($u,this.tail,null);return this.tail?(this.tail.next=Ru,this.tail=Ru):(this.head=Ru,this.tail=Ru),this._length++,Ru},_u.prototype.remove=function($u){$u.previous&&$u.next?($u.previous.next=$u.next,$u.next.previous=$u.previous):$u.previous?($u.previous.next=null,this.tail=$u.previous):$u.next?($u.next.previous=null,this.head=$u.next):(this.head=null,this.tail=null),$u.next=null,$u.previous=null,this._length--},_u.prototype.splice=function($u,Ru){$u!==Ru&&(this.remove(Ru),this.insert($u,Ru))},_u.prototype.insert=function($u,Ru){var Ou=$u.next;$u.next=Ru,this.tail===$u?this.tail=Ru:Ou.previous=Ru,Ru.next=Ou,Ru.previous=$u,this._length++},_u}(),xn=function(){function _u(){this.list=new bn$1,this.sentinel=this.list.add("sentinel")}return _u.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},_u.prototype.touch=function($u){var Ru=$u.cacheNode;Ru&&this.list.splice(this.sentinel,Ru)},_u.prototype.add=function($u,Ru){$u.cacheNode||($u.cacheNode=this.list.add($u),Ru&&Ru($u))},_u.prototype.unloadTile=function($u,Ru){var Ou=$u.cacheNode;Ou&&(this.list.remove(Ou),$u.cacheNode=void 0,Ru&&Ru($u))},_u.prototype.unloadTiles=function($u,Ru){for(var Ou=this.list.head;Ou!==this.sentinel&&$u();){var Fu=Ou.item;Ou=Ou.next,this.unloadTile(Fu,Ru)}},_u}();class wn extends Ji$1{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let $u="[";if(Wi$1.printRowMajor){$u+="row-major:";for(let Ru=0;Ru<this.RANK;++Ru)for(let Ou=0;Ou<this.RANK;++Ou)$u+=" ".concat(this[Ou*this.RANK+Ru])}else{$u+="column-major:";for(let Ru=0;Ru<this.ELEMENTS;++Ru)$u+=" ".concat(this[Ru])}return $u+="]",$u}getElementIndex($u,Ru){return Ru*this.RANK+$u}getElement($u,Ru){return this[Ru*this.RANK+$u]}setElement($u,Ru,Ou){return this[Ru*this.RANK+$u]=$i(Ou),this}getColumn($u,Ru=new Array(this.RANK).fill(-0)){const Ou=$u*this.RANK;for(let Fu=0;Fu<this.RANK;++Fu)Ru[Fu]=this[Ou+Fu];return Ru}setColumn($u,Ru){const Ou=$u*this.RANK;for(let Fu=0;Fu<this.RANK;++Fu)this[Ou+Fu]=Ru[Fu];return this}}function En(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=$u[3],Gu=$u[4],Uu=$u[5],Hu=$u[6],Wu=$u[7],Qu=$u[8],qu=$u[9],Ku=$u[10],Yu=$u[11],_c=$u[12],Ju=$u[13],Xu=$u[14],Zu=$u[15],Xc=Ru[0],_h=Ru[1],ep=Ru[2],np=Ru[3];return _u[0]=Xc*Ou+_h*Gu+ep*Qu+np*_c,_u[1]=Xc*Fu+_h*Uu+ep*qu+np*Ju,_u[2]=Xc*Nu+_h*Hu+ep*Ku+np*Xu,_u[3]=Xc*Vu+_h*Wu+ep*Yu+np*Zu,Xc=Ru[4],_h=Ru[5],ep=Ru[6],np=Ru[7],_u[4]=Xc*Ou+_h*Gu+ep*Qu+np*_c,_u[5]=Xc*Fu+_h*Uu+ep*qu+np*Ju,_u[6]=Xc*Nu+_h*Hu+ep*Ku+np*Xu,_u[7]=Xc*Vu+_h*Wu+ep*Yu+np*Zu,Xc=Ru[8],_h=Ru[9],ep=Ru[10],np=Ru[11],_u[8]=Xc*Ou+_h*Gu+ep*Qu+np*_c,_u[9]=Xc*Fu+_h*Uu+ep*qu+np*Ju,_u[10]=Xc*Nu+_h*Hu+ep*Ku+np*Xu,_u[11]=Xc*Vu+_h*Wu+ep*Yu+np*Zu,Xc=Ru[12],_h=Ru[13],ep=Ru[14],np=Ru[15],_u[12]=Xc*Ou+_h*Gu+ep*Qu+np*_c,_u[13]=Xc*Fu+_h*Uu+ep*qu+np*Ju,_u[14]=Xc*Nu+_h*Hu+ep*Ku+np*Xu,_u[15]=Xc*Vu+_h*Wu+ep*Yu+np*Zu,_u}function Mn$1(_u,$u,Ru){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2];return _u[0]=$u[0]*Ou,_u[1]=$u[1]*Ou,_u[2]=$u[2]*Ou,_u[3]=$u[3]*Ou,_u[4]=$u[4]*Fu,_u[5]=$u[5]*Fu,_u[6]=$u[6]*Fu,_u[7]=$u[7]*Fu,_u[8]=$u[8]*Nu,_u[9]=$u[9]*Nu,_u[10]=$u[10]*Nu,_u[11]=$u[11]*Nu,_u[12]=$u[12],_u[13]=$u[13],_u[14]=$u[14],_u[15]=$u[15],_u}(function(){var _u;_u=new on(2),on!=Float32Array&&(_u[0]=0,_u[1]=0)})(),function(){var _u;_u=new on(4),on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0)}();const In=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn$1=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn={};class Tn extends wn{static get IDENTITY(){return Bn.IDENTITY=Bn.IDENTITY||Object.freeze(new Tn(In)),Bn.IDENTITY}static get ZERO(){return Bn.ZERO=Bn.ZERO||Object.freeze(new Tn(Sn$1)),Bn.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this[9]=$u[9],this[10]=$u[10],this[11]=$u[11],this[12]=$u[12],this[13]=$u[13],this[14]=$u[14],this[15]=$u[15],this.check()}set($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju){return this[0]=$u,this[1]=Ru,this[2]=Ou,this[3]=Fu,this[4]=Nu,this[5]=Vu,this[6]=Gu,this[7]=Uu,this[8]=Hu,this[9]=Wu,this[10]=Qu,this[11]=qu,this[12]=Ku,this[13]=Yu,this[14]=_c,this[15]=Ju,this.check()}setRowMajor($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju){return this[0]=$u,this[1]=Nu,this[2]=Hu,this[3]=Ku,this[4]=Ru,this[5]=Vu,this[6]=Wu,this[7]=Yu,this[8]=Ou,this[9]=Gu,this[10]=Qu,this[11]=_c,this[12]=Fu,this[13]=Uu,this[14]=qu,this[15]=Ju,this.check()}toRowMajor($u){return $u[0]=this[0],$u[1]=this[4],$u[2]=this[8],$u[3]=this[12],$u[4]=this[1],$u[5]=this[5],$u[6]=this[9],$u[7]=this[13],$u[8]=this[2],$u[9]=this[6],$u[10]=this[10],$u[11]=this[14],$u[12]=this[3],$u[13]=this[7],$u[14]=this[11],$u[15]=this[15],$u}identity(){return this.copy(In)}fromQuaternion($u){return function(Ru,Ou){var Fu=Ou[0],Nu=Ou[1],Vu=Ou[2],Gu=Ou[3],Uu=Fu+Fu,Hu=Nu+Nu,Wu=Vu+Vu,Qu=Fu*Uu,qu=Nu*Uu,Ku=Nu*Hu,Yu=Vu*Uu,_c=Vu*Hu,Ju=Vu*Wu,Xu=Gu*Uu,Zu=Gu*Hu,Xc=Gu*Wu;Ru[0]=1-Ku-Ju,Ru[1]=qu+Xc,Ru[2]=Yu-Zu,Ru[3]=0,Ru[4]=qu-Xc,Ru[5]=1-Qu-Ju,Ru[6]=_c+Xu,Ru[7]=0,Ru[8]=Yu+Zu,Ru[9]=_c-Xu,Ru[10]=1-Qu-Ku,Ru[11]=0,Ru[12]=0,Ru[13]=0,Ru[14]=0,Ru[15]=1}(this,$u),this.check()}frustum({left:$u,right:Ru,bottom:Ou,top:Fu,near:Nu,far:Vu}){return Vu===1/0?Tn._computeInfinitePerspectiveOffCenter(this,$u,Ru,Ou,Fu,Nu):function(Gu,Uu,Hu,Wu,Qu,qu,Ku){var Yu=1/(Hu-Uu),_c=1/(Qu-Wu),Ju=1/(qu-Ku);Gu[0]=2*qu*Yu,Gu[1]=0,Gu[2]=0,Gu[3]=0,Gu[4]=0,Gu[5]=2*qu*_c,Gu[6]=0,Gu[7]=0,Gu[8]=(Hu+Uu)*Yu,Gu[9]=(Qu+Wu)*_c,Gu[10]=(Ku+qu)*Ju,Gu[11]=-1,Gu[12]=0,Gu[13]=0,Gu[14]=Ku*qu*2*Ju,Gu[15]=0}(this,$u,Ru,Ou,Fu,Nu,Vu),this.check()}static _computeInfinitePerspectiveOffCenter($u,Ru,Ou,Fu,Nu,Vu){const Gu=2*Vu/(Ou-Ru),Uu=2*Vu/(Nu-Fu),Hu=(Ou+Ru)/(Ou-Ru),Wu=(Nu+Fu)/(Nu-Fu),Qu=-2*Vu;return $u[0]=Gu,$u[1]=0,$u[2]=0,$u[3]=0,$u[4]=0,$u[5]=Uu,$u[6]=0,$u[7]=0,$u[8]=Hu,$u[9]=Wu,$u[10]=-1,$u[11]=-1,$u[12]=0,$u[13]=0,$u[14]=Qu,$u[15]=0,$u}lookAt($u,Ru,Ou){return arguments.length===1&&({eye:$u,center:Ru,up:Ou}=$u),function(Fu,Nu,Vu,Gu){var Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu=Nu[0],Xc=Nu[1],_h=Nu[2],ep=Gu[0],np=Gu[1],ap=Gu[2],lp=Vu[0],up=Vu[1],_f=Vu[2];Math.abs(Zu-lp)<1e-6&&Math.abs(Xc-up)<1e-6&&Math.abs(_h-_f)<1e-6?function(tp){tp[0]=1,tp[1]=0,tp[2]=0,tp[3]=0,tp[4]=0,tp[5]=1,tp[6]=0,tp[7]=0,tp[8]=0,tp[9]=0,tp[10]=1,tp[11]=0,tp[12]=0,tp[13]=0,tp[14]=0,tp[15]=1}(Fu):(Yu=Zu-lp,_c=Xc-up,Ju=_h-_f,Uu=np*(Ju*=Xu=1/Math.hypot(Yu,_c,Ju))-ap*(_c*=Xu),Hu=ap*(Yu*=Xu)-ep*Ju,Wu=ep*_c-np*Yu,(Xu=Math.hypot(Uu,Hu,Wu))?(Uu*=Xu=1/Xu,Hu*=Xu,Wu*=Xu):(Uu=0,Hu=0,Wu=0),Qu=_c*Wu-Ju*Hu,qu=Ju*Uu-Yu*Wu,Ku=Yu*Hu-_c*Uu,(Xu=Math.hypot(Qu,qu,Ku))?(Qu*=Xu=1/Xu,qu*=Xu,Ku*=Xu):(Qu=0,qu=0,Ku=0),Fu[0]=Uu,Fu[1]=Qu,Fu[2]=Yu,Fu[3]=0,Fu[4]=Hu,Fu[5]=qu,Fu[6]=_c,Fu[7]=0,Fu[8]=Wu,Fu[9]=Ku,Fu[10]=Ju,Fu[11]=0,Fu[12]=-(Uu*Zu+Hu*Xc+Wu*_h),Fu[13]=-(Qu*Zu+qu*Xc+Ku*_h),Fu[14]=-(Yu*Zu+_c*Xc+Ju*_h),Fu[15]=1)}(this,$u,Ru=Ru||[0,0,0],Ou=Ou||[0,1,0]),this.check()}ortho({left:$u,right:Ru,bottom:Ou,top:Fu,near:Nu=.1,far:Vu=500}){return function(Gu,Uu,Hu,Wu,Qu,qu,Ku){var Yu=1/(Uu-Hu),_c=1/(Wu-Qu),Ju=1/(qu-Ku);Gu[0]=-2*Yu,Gu[1]=0,Gu[2]=0,Gu[3]=0,Gu[4]=0,Gu[5]=-2*_c,Gu[6]=0,Gu[7]=0,Gu[8]=0,Gu[9]=0,Gu[10]=2*Ju,Gu[11]=0,Gu[12]=(Uu+Hu)*Yu,Gu[13]=(Qu+Wu)*_c,Gu[14]=(Ku+qu)*Ju,Gu[15]=1}(this,$u,Ru,Ou,Fu,Nu,Vu),this.check()}orthographic({fovy:$u=45*Math.PI/180,aspect:Ru=1,focalDistance:Ou=1,near:Fu=.1,far:Nu=500}){if($u>2*Math.PI)throw Error("radians");const Vu=$u/2,Gu=Ou*Math.tan(Vu),Uu=Gu*Ru;return new Tn().ortho({left:-Uu,right:Uu,bottom:-Gu,top:Gu,near:Fu,far:Nu})}perspective({fovy:$u,fov:Ru=45*Math.PI/180,aspect:Ou=1,near:Fu=.1,far:Nu=500}={}){if(($u=$u||Ru)>2*Math.PI)throw Error("radians");return function(Vu,Gu,Uu,Hu,Wu){var Qu,qu=1/Math.tan(Gu/2);Vu[0]=qu/Uu,Vu[1]=0,Vu[2]=0,Vu[3]=0,Vu[4]=0,Vu[5]=qu,Vu[6]=0,Vu[7]=0,Vu[8]=0,Vu[9]=0,Vu[11]=-1,Vu[12]=0,Vu[13]=0,Vu[15]=0,Wu!=null&&Wu!==1/0?(Qu=1/(Hu-Wu),Vu[10]=(Wu+Hu)*Qu,Vu[14]=2*Wu*Hu*Qu):(Vu[10]=-1,Vu[14]=-2*Hu)}(this,$u,Ou,Fu,Nu),this.check()}determinant(){return Ru=($u=this)[0],Ou=$u[1],Fu=$u[2],Nu=$u[3],Vu=$u[4],Gu=$u[5],Uu=$u[6],Hu=$u[7],Wu=$u[8],Qu=$u[9],qu=$u[10],Ku=$u[11],Yu=$u[12],_c=$u[13],Ju=$u[14],Xu=$u[15],(Ru*Gu-Ou*Vu)*(qu*Xu-Ku*Ju)-(Ru*Uu-Fu*Vu)*(Qu*Xu-Ku*_c)+(Ru*Hu-Nu*Vu)*(Qu*Ju-qu*_c)+(Ou*Uu-Fu*Gu)*(Wu*Xu-Ku*Yu)-(Ou*Hu-Nu*Gu)*(Wu*Ju-qu*Yu)+(Fu*Hu-Nu*Uu)*(Wu*_c-Qu*Yu);var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu}getScale($u=[-0,-0,-0]){return $u[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),$u[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),$u[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),$u}getTranslation($u=[-0,-0,-0]){return $u[0]=this[12],$u[1]=this[13],$u[2]=this[14],$u}getRotation($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Ru=null){const Ou=this.getScale(Ru||[-0,-0,-0]),Fu=1/Ou[0],Nu=1/Ou[1],Vu=1/Ou[2];return $u[0]=this[0]*Fu,$u[1]=this[1]*Nu,$u[2]=this[2]*Vu,$u[3]=0,$u[4]=this[4]*Fu,$u[5]=this[5]*Nu,$u[6]=this[6]*Vu,$u[7]=0,$u[8]=this[8]*Fu,$u[9]=this[9]*Nu,$u[10]=this[10]*Vu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,$u}getRotationMatrix3($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Ru=null){const Ou=this.getScale(Ru||[-0,-0,-0]),Fu=1/Ou[0],Nu=1/Ou[1],Vu=1/Ou[2];return $u[0]=this[0]*Fu,$u[1]=this[1]*Nu,$u[2]=this[2]*Vu,$u[3]=this[4]*Fu,$u[4]=this[5]*Nu,$u[5]=this[6]*Vu,$u[6]=this[8]*Fu,$u[7]=this[9]*Nu,$u[8]=this[10]*Vu,$u}transpose(){return function($u,Ru){if($u===Ru){var Ou=Ru[1],Fu=Ru[2],Nu=Ru[3],Vu=Ru[6],Gu=Ru[7],Uu=Ru[11];$u[1]=Ru[4],$u[2]=Ru[8],$u[3]=Ru[12],$u[4]=Ou,$u[6]=Ru[9],$u[7]=Ru[13],$u[8]=Fu,$u[9]=Vu,$u[11]=Ru[14],$u[12]=Nu,$u[13]=Gu,$u[14]=Uu}else $u[0]=Ru[0],$u[1]=Ru[4],$u[2]=Ru[8],$u[3]=Ru[12],$u[4]=Ru[1],$u[5]=Ru[5],$u[6]=Ru[9],$u[7]=Ru[13],$u[8]=Ru[2],$u[9]=Ru[6],$u[10]=Ru[10],$u[11]=Ru[14],$u[12]=Ru[3],$u[13]=Ru[7],$u[14]=Ru[11],$u[15]=Ru[15]}(this,this),this.check()}invert(){var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu,Xc,_h,ep,np,ap,lp,up,_f,tp,ip,rp,op,sp;return $u=this,Ou=(Ru=this)[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Gu=Ru[4],Uu=Ru[5],Hu=Ru[6],Wu=Ru[7],Qu=Ru[8],qu=Ru[9],Ku=Ru[10],Yu=Ru[11],_c=Ru[12],Ju=Ru[13],Xu=Ru[14],Zu=Ru[15],(sp=(Xc=Ou*Uu-Fu*Gu)*(op=Ku*Zu-Yu*Xu)-(_h=Ou*Hu-Nu*Gu)*(rp=qu*Zu-Yu*Ju)+(ep=Ou*Wu-Vu*Gu)*(ip=qu*Xu-Ku*Ju)+(np=Fu*Hu-Nu*Uu)*(tp=Qu*Zu-Yu*_c)-(ap=Fu*Wu-Vu*Uu)*(_f=Qu*Xu-Ku*_c)+(lp=Nu*Wu-Vu*Hu)*(up=Qu*Ju-qu*_c))&&(sp=1/sp,$u[0]=(Uu*op-Hu*rp+Wu*ip)*sp,$u[1]=(Nu*rp-Fu*op-Vu*ip)*sp,$u[2]=(Ju*lp-Xu*ap+Zu*np)*sp,$u[3]=(Ku*ap-qu*lp-Yu*np)*sp,$u[4]=(Hu*tp-Gu*op-Wu*_f)*sp,$u[5]=(Ou*op-Nu*tp+Vu*_f)*sp,$u[6]=(Xu*ep-_c*lp-Zu*_h)*sp,$u[7]=(Qu*lp-Ku*ep+Yu*_h)*sp,$u[8]=(Gu*rp-Uu*tp+Wu*up)*sp,$u[9]=(Fu*tp-Ou*rp-Vu*up)*sp,$u[10]=(_c*ap-Ju*ep+Zu*Xc)*sp,$u[11]=(qu*ep-Qu*ap-Yu*Xc)*sp,$u[12]=(Uu*_f-Gu*ip-Hu*up)*sp,$u[13]=(Ou*ip-Fu*_f+Nu*up)*sp,$u[14]=(Ju*_h-_c*np-Xu*Xc)*sp,$u[15]=(Qu*np-qu*_h+Ku*Xc)*sp),this.check()}multiplyLeft($u){return En(this,$u,this),this.check()}multiplyRight($u){return En(this,this,$u),this.check()}rotateX($u){var Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu;return Ru=this,Ou=this,Fu=$u,Nu=Math.sin(Fu),Vu=Math.cos(Fu),Gu=Ou[4],Uu=Ou[5],Hu=Ou[6],Wu=Ou[7],Qu=Ou[8],qu=Ou[9],Ku=Ou[10],Yu=Ou[11],Ou!==Ru&&(Ru[0]=Ou[0],Ru[1]=Ou[1],Ru[2]=Ou[2],Ru[3]=Ou[3],Ru[12]=Ou[12],Ru[13]=Ou[13],Ru[14]=Ou[14],Ru[15]=Ou[15]),Ru[4]=Gu*Vu+Qu*Nu,Ru[5]=Uu*Vu+qu*Nu,Ru[6]=Hu*Vu+Ku*Nu,Ru[7]=Wu*Vu+Yu*Nu,Ru[8]=Qu*Vu-Gu*Nu,Ru[9]=qu*Vu-Uu*Nu,Ru[10]=Ku*Vu-Hu*Nu,Ru[11]=Yu*Vu-Wu*Nu,this.check()}rotateY($u){var Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu;return Ru=this,Ou=this,Fu=$u,Nu=Math.sin(Fu),Vu=Math.cos(Fu),Gu=Ou[0],Uu=Ou[1],Hu=Ou[2],Wu=Ou[3],Qu=Ou[8],qu=Ou[9],Ku=Ou[10],Yu=Ou[11],Ou!==Ru&&(Ru[4]=Ou[4],Ru[5]=Ou[5],Ru[6]=Ou[6],Ru[7]=Ou[7],Ru[12]=Ou[12],Ru[13]=Ou[13],Ru[14]=Ou[14],Ru[15]=Ou[15]),Ru[0]=Gu*Vu-Qu*Nu,Ru[1]=Uu*Vu-qu*Nu,Ru[2]=Hu*Vu-Ku*Nu,Ru[3]=Wu*Vu-Yu*Nu,Ru[8]=Gu*Nu+Qu*Vu,Ru[9]=Uu*Nu+qu*Vu,Ru[10]=Hu*Nu+Ku*Vu,Ru[11]=Wu*Nu+Yu*Vu,this.check()}rotateZ($u){var Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu;return Ru=this,Ou=this,Fu=$u,Nu=Math.sin(Fu),Vu=Math.cos(Fu),Gu=Ou[0],Uu=Ou[1],Hu=Ou[2],Wu=Ou[3],Qu=Ou[4],qu=Ou[5],Ku=Ou[6],Yu=Ou[7],Ou!==Ru&&(Ru[8]=Ou[8],Ru[9]=Ou[9],Ru[10]=Ou[10],Ru[11]=Ou[11],Ru[12]=Ou[12],Ru[13]=Ou[13],Ru[14]=Ou[14],Ru[15]=Ou[15]),Ru[0]=Gu*Vu+Qu*Nu,Ru[1]=Uu*Vu+qu*Nu,Ru[2]=Hu*Vu+Ku*Nu,Ru[3]=Wu*Vu+Yu*Nu,Ru[4]=Qu*Vu-Gu*Nu,Ru[5]=qu*Vu-Uu*Nu,Ru[6]=Ku*Vu-Hu*Nu,Ru[7]=Yu*Vu-Wu*Nu,this.check()}rotateXYZ([$u,Ru,Ou]){return this.rotateX($u).rotateY(Ru).rotateZ(Ou)}rotateAxis($u,Ru){return function(Ou,Fu,Nu,Vu){var Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu,Xc,_h,ep,np,ap,lp,up,_f,tp,ip,rp,op,sp=Vu[0],cp=Vu[1],hp=Vu[2],dp=Math.hypot(sp,cp,hp);dp<1e-6||(sp*=dp=1/dp,cp*=dp,hp*=dp,Gu=Math.sin(Nu),Hu=1-(Uu=Math.cos(Nu)),Wu=Fu[0],Qu=Fu[1],qu=Fu[2],Ku=Fu[3],Yu=Fu[4],_c=Fu[5],Ju=Fu[6],Xu=Fu[7],Zu=Fu[8],Xc=Fu[9],_h=Fu[10],ep=Fu[11],np=sp*sp*Hu+Uu,ap=cp*sp*Hu+hp*Gu,lp=hp*sp*Hu-cp*Gu,up=sp*cp*Hu-hp*Gu,_f=cp*cp*Hu+Uu,tp=hp*cp*Hu+sp*Gu,ip=sp*hp*Hu+cp*Gu,rp=cp*hp*Hu-sp*Gu,op=hp*hp*Hu+Uu,Ou[0]=Wu*np+Yu*ap+Zu*lp,Ou[1]=Qu*np+_c*ap+Xc*lp,Ou[2]=qu*np+Ju*ap+_h*lp,Ou[3]=Ku*np+Xu*ap+ep*lp,Ou[4]=Wu*up+Yu*_f+Zu*tp,Ou[5]=Qu*up+_c*_f+Xc*tp,Ou[6]=qu*up+Ju*_f+_h*tp,Ou[7]=Ku*up+Xu*_f+ep*tp,Ou[8]=Wu*ip+Yu*rp+Zu*op,Ou[9]=Qu*ip+_c*rp+Xc*op,Ou[10]=qu*ip+Ju*rp+_h*op,Ou[11]=Ku*ip+Xu*rp+ep*op,Fu!==Ou&&(Ou[12]=Fu[12],Ou[13]=Fu[13],Ou[14]=Fu[14],Ou[15]=Fu[15]))}(this,this,$u,Ru),this.check()}scale($u){return Array.isArray($u)?Mn$1(this,this,$u):Mn$1(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Ru,Ou,Fu){var Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu=Fu[0],Zu=Fu[1],Xc=Fu[2];Ou===Ru?(Ru[12]=Ou[0]*Xu+Ou[4]*Zu+Ou[8]*Xc+Ou[12],Ru[13]=Ou[1]*Xu+Ou[5]*Zu+Ou[9]*Xc+Ou[13],Ru[14]=Ou[2]*Xu+Ou[6]*Zu+Ou[10]*Xc+Ou[14],Ru[15]=Ou[3]*Xu+Ou[7]*Zu+Ou[11]*Xc+Ou[15]):(Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Ou[4],Wu=Ou[5],Qu=Ou[6],qu=Ou[7],Ku=Ou[8],Yu=Ou[9],_c=Ou[10],Ju=Ou[11],Ru[0]=Nu,Ru[1]=Vu,Ru[2]=Gu,Ru[3]=Uu,Ru[4]=Hu,Ru[5]=Wu,Ru[6]=Qu,Ru[7]=qu,Ru[8]=Ku,Ru[9]=Yu,Ru[10]=_c,Ru[11]=Ju,Ru[12]=Nu*Xu+Hu*Zu+Ku*Xc+Ou[12],Ru[13]=Vu*Xu+Wu*Zu+Yu*Xc+Ou[13],Ru[14]=Gu*Xu+Qu*Zu+_c*Xc+Ou[14],Ru[15]=Uu*Xu+qu*Zu+Ju*Xc+Ou[15])}(this,this,$u),this.check()}transform($u,Ru){return $u.length===4?(en$1(Ru=function(Ou,Fu,Nu){var Vu=Fu[0],Gu=Fu[1],Uu=Fu[2],Hu=Fu[3];return Ou[0]=Nu[0]*Vu+Nu[4]*Gu+Nu[8]*Uu+Nu[12]*Hu,Ou[1]=Nu[1]*Vu+Nu[5]*Gu+Nu[9]*Uu+Nu[13]*Hu,Ou[2]=Nu[2]*Vu+Nu[6]*Gu+Nu[10]*Uu+Nu[14]*Hu,Ou[3]=Nu[3]*Vu+Nu[7]*Gu+Nu[11]*Uu+Nu[15]*Hu,Ou}(Ru||[-0,-0,-0,-0],$u,this),4),Ru):this.transformAsPoint($u,Ru)}transformAsPoint($u,Ru){const{length:Ou}=$u;switch(Ou){case 2:Fu=Ru||[-0,-0],Vu=this,Gu=(Nu=$u)[0],Uu=Nu[1],Fu[0]=Vu[0]*Gu+Vu[4]*Uu+Vu[12],Fu[1]=Vu[1]*Gu+Vu[5]*Uu+Vu[13],Ru=Fu;break;case 3:Ru=hn(Ru||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}var Fu,Nu,Vu,Gu,Uu;return en$1(Ru,$u.length),Ru}transformAsVector($u,Ru){switch($u.length){case 2:Ru=function(Ou,Fu,Nu){const Vu=Fu[0],Gu=Fu[1],Uu=Nu[3]*Vu+Nu[7]*Gu||1;return Ou[0]=(Nu[0]*Vu+Nu[4]*Gu)/Uu,Ou[1]=(Nu[1]*Vu+Nu[5]*Gu)/Uu,Ou}(Ru||[-0,-0],$u,this);break;case 3:Ru=pn$1(Ru||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en$1(Ru,$u.length),Ru}makeRotationX($u){return this.identity().rotateX($u)}makeTranslation($u,Ru,Ou){return this.identity().translate([$u,Ru,Ou])}transformPoint($u,Ru){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint($u,Ru)}transformVector($u,Ru){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint($u,Ru)}transformDirection($u,Ru){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector($u,Ru)}}var Pn$1=new gn$1,Rn=new gn$1,kn=function(){function _u($u,Ru){$u===void 0&&($u=[0,0,1]),Ru===void 0&&(Ru=0),this.normal=new gn$1,this.distance=-0,this.fromNormalDistance($u,Ru)}return _u.prototype.fromNormalDistance=function($u,Ru){return this.normal.from($u).normalize(),this.distance=Ru,this},_u.prototype.fromPointNormal=function($u,Ru){$u=Pn$1.from($u),this.normal.from(Ru).normalize();var Ou=-this.normal.dot($u);return this.distance=Ou,this},_u.prototype.fromCoefficients=function($u,Ru,Ou,Fu){return this.normal.set($u,Ru,Ou),this.distance=Fu,this},_u.prototype.clone=function(){return new _u(this.normal,this.distance)},_u.prototype.equals=function($u){return this.distance===$u.distance&&this.normal.equals($u.normal)},_u.prototype.getPointDistance=function($u){return this.normal.dot($u)+this.distance},_u.prototype.transform=function($u){var Ru=Rn.copy(this.normal).transformAsVector($u).normalize(),Ou=this.normal.scale(-this.distance).transform($u);return this.fromPointNormal(Ou,Ru)},_u.prototype.projectPointOntoPlane=function($u,Ru){Ru===void 0&&(Ru=[0,0,0]),$u=Pn$1.from($u);var Ou=this.getPointDistance($u),Fu=Rn.copy(this.normal).scale(Ou);return $u.subtract(Fu).to(Ru)},_u}(),Dn$1=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln$1=[new gn$1([1,0,0]),new gn$1([0,1,0]),new gn$1([0,0,1])],On=new gn$1,Nn$1=new gn$1,Fn=function(){function _u($u){$u===void 0&&($u=[]),this.planes=$u}return Object.defineProperty(_u,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),_u.prototype.fromBoundingSphere=function($u){this.planes.length=2*Ln$1.length;for(var Ru=$u.center,Ou=$u.radius,Fu=0,Nu=0,Vu=Ln$1;Nu<Vu.length;Nu++){var Gu=Vu[Nu],Uu=this.planes[Fu],Hu=this.planes[Fu+1];Uu||(Uu=this.planes[Fu]=new kn),Hu||(Hu=this.planes[Fu+1]=new kn);var Wu=On.copy(Gu).scale(-Ou).add(Ru);Uu.fromPointNormal(Wu,Gu);var Qu=On.copy(Gu).scale(Ou).add(Ru),qu=Nn$1.copy(Gu).negate();Hu.fromPointNormal(Qu,qu),Fu+=2}return this},_u.prototype.computeVisibilityWithPlaneMask=function($u,Ru){if(Ru===_u.MASK_OUTSIDE||Ru===_u.MASK_INSIDE)return Ru;for(var Ou=_u.MASK_INSIDE,Fu=this.planes,Nu=0;Nu<this.planes.length;++Nu){var Vu=Nu<31?1<<Nu:0;if(!(Nu<31&&(Ru&Vu)==0)){var Gu=Fu[Nu],Uu=$u.intersectPlane(Gu);if(Uu===Dn$1.OUTSIDE)return _u.MASK_OUTSIDE;Uu===Dn$1.INTERSECTING&&(Ou|=Vu)}}return Ou},_u}();function Qn(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=$u[3],Gu=$u[4],Uu=$u[5],Hu=$u[6],Wu=$u[7],Qu=$u[8],qu=Ru[0],Ku=Ru[1],Yu=Ru[2],_c=Ru[3],Ju=Ru[4],Xu=Ru[5],Zu=Ru[6],Xc=Ru[7],_h=Ru[8];return _u[0]=qu*Ou+Ku*Vu+Yu*Hu,_u[1]=qu*Fu+Ku*Gu+Yu*Wu,_u[2]=qu*Nu+Ku*Uu+Yu*Qu,_u[3]=_c*Ou+Ju*Vu+Xu*Hu,_u[4]=_c*Fu+Ju*Gu+Xu*Wu,_u[5]=_c*Nu+Ju*Uu+Xu*Qu,_u[6]=Zu*Ou+Xc*Vu+_h*Hu,_u[7]=Zu*Fu+Xc*Gu+_h*Wu,_u[8]=Zu*Nu+Xc*Uu+_h*Qu,_u}function Vn$1(_u,$u,Ru){var Ou=Ru[0],Fu=Ru[1];return _u[0]=Ou*$u[0],_u[1]=Ou*$u[1],_u[2]=Ou*$u[2],_u[3]=Fu*$u[3],_u[4]=Fu*$u[4],_u[5]=Fu*$u[5],_u[6]=$u[6],_u[7]=$u[7],_u[8]=$u[8],_u}function _n(){var _u=new on(4);return on!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u[3]=1,_u}function Hn(_u,$u,Ru){Ru*=.5;var Ou=Math.sin(Ru);return _u[0]=Ou*$u[0],_u[1]=Ou*$u[1],_u[2]=Ou*$u[2],_u[3]=Math.cos(Ru),_u}function qn(_u,$u,Ru){var Ou=$u[0],Fu=$u[1],Nu=$u[2],Vu=$u[3],Gu=Ru[0],Uu=Ru[1],Hu=Ru[2],Wu=Ru[3];return _u[0]=Ou*Wu+Vu*Gu+Fu*Hu-Nu*Uu,_u[1]=Fu*Wu+Vu*Uu+Nu*Gu-Ou*Hu,_u[2]=Nu*Wu+Vu*Hu+Ou*Uu-Fu*Gu,_u[3]=Vu*Wu-Ou*Gu-Fu*Uu-Nu*Hu,_u}function zn(_u,$u,Ru,Ou){var Fu,Nu,Vu,Gu,Uu,Hu=$u[0],Wu=$u[1],Qu=$u[2],qu=$u[3],Ku=Ru[0],Yu=Ru[1],_c=Ru[2],Ju=Ru[3];return(Nu=Hu*Ku+Wu*Yu+Qu*_c+qu*Ju)<0&&(Nu=-Nu,Ku=-Ku,Yu=-Yu,_c=-_c,Ju=-Ju),1-Nu>1e-6?(Fu=Math.acos(Nu),Vu=Math.sin(Fu),Gu=Math.sin((1-Ou)*Fu)/Vu,Uu=Math.sin(Ou*Fu)/Vu):(Gu=1-Ou,Uu=Ou),_u[0]=Gu*Hu+Uu*Ku,_u[1]=Gu*Wu+Uu*Yu,_u[2]=Gu*Qu+Uu*_c,_u[3]=Gu*qu+Uu*Ju,_u}function Kn(_u,$u){var Ru,Ou=$u[0]+$u[4]+$u[8];if(Ou>0)Ru=Math.sqrt(Ou+1),_u[3]=.5*Ru,Ru=.5/Ru,_u[0]=($u[5]-$u[7])*Ru,_u[1]=($u[6]-$u[2])*Ru,_u[2]=($u[1]-$u[3])*Ru;else{var Fu=0;$u[4]>$u[0]&&(Fu=1),$u[8]>$u[3*Fu+Fu]&&(Fu=2);var Nu=(Fu+1)%3,Vu=(Fu+2)%3;Ru=Math.sqrt($u[3*Fu+Fu]-$u[3*Nu+Nu]-$u[3*Vu+Vu]+1),_u[Fu]=.5*Ru,Ru=.5/Ru,_u[3]=($u[3*Nu+Vu]-$u[3*Vu+Nu])*Ru,_u[Nu]=($u[3*Nu+Fu]+$u[3*Fu+Nu])*Ru,_u[Vu]=($u[3*Vu+Fu]+$u[3*Fu+Vu])*Ru}return _u}var Un,jn$1,Gn$1,Wn$1,Xn$1=function(_u,$u,Ru){return _u[0]=$u[0]+Ru[0],_u[1]=$u[1]+Ru[1],_u[2]=$u[2]+Ru[2],_u[3]=$u[3]+Ru[3],_u},Yn=function(_u,$u,Ru){return _u[0]=$u[0]*Ru,_u[1]=$u[1]*Ru,_u[2]=$u[2]*Ru,_u[3]=$u[3]*Ru,_u},Zn$1=function(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]+_u[3]*$u[3]},Jn$1=function(_u,$u,Ru,Ou){var Fu=$u[0],Nu=$u[1],Vu=$u[2],Gu=$u[3];return _u[0]=Fu+Ou*(Ru[0]-Fu),_u[1]=Nu+Ou*(Ru[1]-Nu),_u[2]=Vu+Ou*(Ru[2]-Vu),_u[3]=Gu+Ou*(Ru[3]-Gu),_u},$n$1=function(_u){var $u=_u[0],Ru=_u[1],Ou=_u[2],Fu=_u[3];return Math.hypot($u,Ru,Ou,Fu)},er=function(_u){var $u=_u[0],Ru=_u[1],Ou=_u[2],Fu=_u[3];return $u*$u+Ru*Ru+Ou*Ou+Fu*Fu},tr=function(_u,$u){var Ru=$u[0],Ou=$u[1],Fu=$u[2],Nu=$u[3],Vu=Ru*Ru+Ou*Ou+Fu*Fu+Nu*Nu;return Vu>0&&(Vu=1/Math.sqrt(Vu)),_u[0]=Ru*Vu,_u[1]=Ou*Vu,_u[2]=Fu*Vu,_u[3]=Nu*Vu,_u},ir=(Un=sn$1(),jn$1=an$1(1,0,0),Gn$1=an$1(0,1,0),function(_u,$u,Ru){var Ou=ln$1($u,Ru);return Ou<-.999999?(un$1(Un,jn$1,$u),dn$1(Un)<1e-6&&un$1(Un,Gn$1,$u),function(Fu,Nu){var Vu=Nu[0],Gu=Nu[1],Uu=Nu[2],Hu=Vu*Vu+Gu*Gu+Uu*Uu;Hu>0&&(Hu=1/Math.sqrt(Hu)),Fu[0]=Nu[0]*Hu,Fu[1]=Nu[1]*Hu,Fu[2]=Nu[2]*Hu}(Un,Un),Hn(_u,Un,Math.PI),_u):Ou>.999999?(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=1,_u):(un$1(Un,$u,Ru),_u[0]=Un[0],_u[1]=Un[1],_u[2]=Un[2],_u[3]=1+Ou,tr(_u,_u))});_n(),_n(),Wn$1=new on(9),on!=Float32Array&&(Wn$1[1]=0,Wn$1[2]=0,Wn$1[3]=0,Wn$1[5]=0,Wn$1[6]=0,Wn$1[7]=0),Wn$1[0]=1,Wn$1[4]=1,Wn$1[8]=1;const nr=[0,0,0,1];class rr extends Ji$1{constructor($u=0,Ru=0,Ou=0,Fu=1){super(-0,-0,-0,-0),Array.isArray($u)&&arguments.length===1?this.copy($u):this.set($u,Ru,Ou,Fu)}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this.check()}set($u,Ru,Ou,Fu){return this[0]=$u,this[1]=Ru,this[2]=Ou,this[3]=Fu,this.check()}fromMatrix3($u){return Kn(this,$u),this.check()}identity(){return function($u){$u[0]=0,$u[1]=0,$u[2]=0,$u[3]=1}(this),this.check()}fromAxisRotation($u,Ru){return Hn(this,$u,Ru),this.check()}setAxisAngle($u,Ru){return this.fromAxisRotation($u,Ru)}get ELEMENTS(){return 4}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}get z(){return this[2]}set z($u){this[2]=$i($u)}get w(){return this[3]}set w($u){this[3]=$i($u)}len(){return $n$1(this)}lengthSquared(){return er(this)}dot($u,Ru){if(Ru!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn$1(this,$u)}rotationTo($u,Ru){return ir(this,$u,Ru),this.check()}add($u,Ru){if(Ru!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn$1(this,this,$u),this.check()}calculateW(){return function($u,Ru){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2];$u[0]=Ou,$u[1]=Fu,$u[2]=Nu,$u[3]=Math.sqrt(Math.abs(1-Ou*Ou-Fu*Fu-Nu*Nu))}(this,this),this.check()}conjugate(){return function($u,Ru){$u[0]=-Ru[0],$u[1]=-Ru[1],$u[2]=-Ru[2],$u[3]=Ru[3]}(this,this),this.check()}invert(){return function($u,Ru){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Gu=Ou*Ou+Fu*Fu+Nu*Nu+Vu*Vu,Uu=Gu?1/Gu:0;$u[0]=-Ou*Uu,$u[1]=-Fu*Uu,$u[2]=-Nu*Uu,$u[3]=Vu*Uu}(this,this),this.check()}lerp($u,Ru,Ou){return Jn$1(this,$u,Ru,Ou),this.check()}multiplyRight($u,Ru){return Gi(!Ru),qn(this,this,$u),this.check()}multiplyLeft($u,Ru){return Gi(!Ru),qn(this,$u,this),this.check()}normalize(){const $u=this.len(),Ru=$u>0?1/$u:0;return this[0]=this[0]*Ru,this[1]=this[1]*Ru,this[2]=this[2]*Ru,this[3]=this[3]*Ru,$u===0&&(this[3]=1),this.check()}rotateX($u){return function(Ru,Ou,Fu){Fu*=.5;var Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Math.sin(Fu),Wu=Math.cos(Fu);Ru[0]=Nu*Wu+Uu*Hu,Ru[1]=Vu*Wu+Gu*Hu,Ru[2]=Gu*Wu-Vu*Hu,Ru[3]=Uu*Wu-Nu*Hu}(this,this,$u),this.check()}rotateY($u){return function(Ru,Ou,Fu){Fu*=.5;var Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Math.sin(Fu),Wu=Math.cos(Fu);Ru[0]=Nu*Wu-Gu*Hu,Ru[1]=Vu*Wu+Uu*Hu,Ru[2]=Gu*Wu+Nu*Hu,Ru[3]=Uu*Wu-Vu*Hu}(this,this,$u),this.check()}rotateZ($u){return function(Ru,Ou,Fu){Fu*=.5;var Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Math.sin(Fu),Wu=Math.cos(Fu);Ru[0]=Nu*Wu+Vu*Hu,Ru[1]=Vu*Wu-Nu*Hu,Ru[2]=Gu*Wu+Uu*Hu,Ru[3]=Uu*Wu-Gu*Hu}(this,this,$u),this.check()}scale($u){return Yn(this,this,$u),this.check()}slerp($u,Ru,Ou){switch(arguments.length){case 1:({start:$u=nr,target:Ru,ratio:Ou}=arguments[0]);break;case 2:[Ru,Ou]=arguments,$u=this}return zn(this,$u,Ru,Ou),this.check()}transformVector4($u,Ru=$u){return function(Ou,Fu,Nu){var Vu=Fu[0],Gu=Fu[1],Uu=Fu[2],Hu=Nu[0],Wu=Nu[1],Qu=Nu[2],qu=Nu[3],Ku=qu*Vu+Wu*Uu-Qu*Gu,Yu=qu*Gu+Qu*Vu-Hu*Uu,_c=qu*Uu+Hu*Gu-Wu*Vu,Ju=-Hu*Vu-Wu*Gu-Qu*Uu;Ou[0]=Ku*qu+Ju*-Hu+Yu*-Qu-_c*-Wu,Ou[1]=Yu*qu+Ju*-Wu+_c*-Hu-Ku*-Qu,Ou[2]=_c*qu+Ju*-Qu+Ku*-Wu-Yu*-Hu,Ou[3]=Fu[3]}(Ru,$u,this),en$1(Ru,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle($u,Ru){return this.setAxisAngle($u,Ru)}premultiply($u,Ru){return this.multiplyLeft($u,Ru)}multiply($u,Ru){return this.multiplyRight($u,Ru)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this.check()}set($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu){return this[0]=$u,this[1]=Ru,this[2]=Ou,this[3]=Fu,this[4]=Nu,this[5]=Vu,this[6]=Gu,this[7]=Uu,this[8]=Hu,this.check()}setRowMajor($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu){return this[0]=$u,this[1]=Fu,this[2]=Gu,this[3]=Ru,this[4]=Nu,this[5]=Uu,this[6]=Ou,this[7]=Vu,this[8]=Hu,this.check()}determinant(){return Ru=($u=this)[0],Ou=$u[1],Fu=$u[2],Nu=$u[3],Vu=$u[4],Gu=$u[5],Uu=$u[6],Hu=$u[7],Wu=$u[8],Ru*(Wu*Vu-Gu*Hu)+Ou*(-Wu*Nu+Gu*Uu)+Fu*(Hu*Nu-Vu*Uu);var $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu}identity(){return this.copy(or)}fromQuaternion($u){return function(Ru,Ou){var Fu=Ou[0],Nu=Ou[1],Vu=Ou[2],Gu=Ou[3],Uu=Fu+Fu,Hu=Nu+Nu,Wu=Vu+Vu,Qu=Fu*Uu,qu=Nu*Uu,Ku=Nu*Hu,Yu=Vu*Uu,_c=Vu*Hu,Ju=Vu*Wu,Xu=Gu*Uu,Zu=Gu*Hu,Xc=Gu*Wu;Ru[0]=1-Ku-Ju,Ru[3]=qu-Xc,Ru[6]=Yu+Zu,Ru[1]=qu+Xc,Ru[4]=1-Qu-Ju,Ru[7]=_c-Xu,Ru[2]=Yu-Zu,Ru[5]=_c+Xu,Ru[8]=1-Qu-Ku}(this,$u),this.check()}transpose(){return function($u,Ru){if($u===Ru){var Ou=Ru[1],Fu=Ru[2],Nu=Ru[5];$u[1]=Ru[3],$u[2]=Ru[6],$u[3]=Ou,$u[5]=Ru[7],$u[6]=Fu,$u[7]=Nu}else $u[0]=Ru[0],$u[1]=Ru[3],$u[2]=Ru[6],$u[3]=Ru[1],$u[4]=Ru[4],$u[5]=Ru[7],$u[6]=Ru[2],$u[7]=Ru[5],$u[8]=Ru[8]}(this,this),this.check()}invert(){return function($u,Ru){var Ou=Ru[0],Fu=Ru[1],Nu=Ru[2],Vu=Ru[3],Gu=Ru[4],Uu=Ru[5],Hu=Ru[6],Wu=Ru[7],Qu=Ru[8],qu=Qu*Gu-Uu*Wu,Ku=-Qu*Vu+Uu*Hu,Yu=Wu*Vu-Gu*Hu,_c=Ou*qu+Fu*Ku+Nu*Yu;_c&&(_c=1/_c,$u[0]=qu*_c,$u[1]=(-Qu*Fu+Nu*Wu)*_c,$u[2]=(Uu*Fu-Nu*Gu)*_c,$u[3]=Ku*_c,$u[4]=(Qu*Ou-Nu*Hu)*_c,$u[5]=(-Uu*Ou+Nu*Vu)*_c,$u[6]=Yu*_c,$u[7]=(-Wu*Ou+Fu*Hu)*_c,$u[8]=(Gu*Ou-Fu*Vu)*_c)}(this,this),this.check()}multiplyLeft($u){return Qn(this,$u,this),this.check()}multiplyRight($u){return Qn(this,this,$u),this.check()}rotate($u){return function(Ru,Ou,Fu){var Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Ou[4],Wu=Ou[5],Qu=Ou[6],qu=Ou[7],Ku=Ou[8],Yu=Math.sin(Fu),_c=Math.cos(Fu);Ru[0]=_c*Nu+Yu*Uu,Ru[1]=_c*Vu+Yu*Hu,Ru[2]=_c*Gu+Yu*Wu,Ru[3]=_c*Uu-Yu*Nu,Ru[4]=_c*Hu-Yu*Vu,Ru[5]=_c*Wu-Yu*Gu,Ru[6]=Qu,Ru[7]=qu,Ru[8]=Ku}(this,this,$u),this.check()}scale($u){return Array.isArray($u)?Vn$1(this,this,$u):Vn$1(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Ru,Ou,Fu){var Nu=Ou[0],Vu=Ou[1],Gu=Ou[2],Uu=Ou[3],Hu=Ou[4],Wu=Ou[5],Qu=Ou[6],qu=Ou[7],Ku=Ou[8],Yu=Fu[0],_c=Fu[1];Ru[0]=Nu,Ru[1]=Vu,Ru[2]=Gu,Ru[3]=Uu,Ru[4]=Hu,Ru[5]=Wu,Ru[6]=Yu*Nu+_c*Uu+Qu,Ru[7]=Yu*Vu+_c*Hu+qu,Ru[8]=Yu*Gu+_c*Wu+Ku}(this,this,$u),this.check()}transform($u,Ru){switch($u.length){case 2:Ru=function(Ou,Fu,Nu){var Vu=Fu[0],Gu=Fu[1];return Ou[0]=Nu[0]*Vu+Nu[3]*Gu+Nu[6],Ou[1]=Nu[1]*Vu+Nu[4]*Gu+Nu[7],Ou}(Ru||[-0,-0],$u,this);break;case 3:Ru=cn$1(Ru||[-0,-0,-0],$u,this);break;case 4:Ru=function(Ou,Fu,Nu){const Vu=Fu[0],Gu=Fu[1],Uu=Fu[2];return Ou[0]=Nu[0]*Vu+Nu[3]*Gu+Nu[6]*Uu,Ou[1]=Nu[1]*Vu+Nu[4]*Gu+Nu[7]*Uu,Ou[2]=Nu[2]*Vu+Nu[5]*Gu+Nu[8]*Uu,Ou[3]=Fu[3],Ou}(Ru||[-0,-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en$1(Ru,$u.length),Ru}transformVector($u,Ru){return nn("Matrix3.transformVector"),this.transform($u,Ru)}transformVector2($u,Ru){return nn("Matrix3.transformVector"),this.transform($u,Ru)}transformVector3($u,Ru){return nn("Matrix3.transformVector"),this.transform($u,Ru)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn$1,dr=new gn$1,pr=function(){function _u($u,Ru){$u===void 0&&($u=[0,0,0]),Ru===void 0&&(Ru=0),this.radius=-0,this.center=new gn$1,this.fromCenterRadius($u,Ru)}return _u.prototype.fromCenterRadius=function($u,Ru){return this.center.from($u),this.radius=Ru,this},_u.prototype.fromCornerPoints=function($u,Ru){return Ru=cr.from(Ru),this.center=new gn$1().from($u).add(Ru).scale(.5),this.radius=this.center.distance(Ru),this},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.radius===$u.radius},_u.prototype.clone=function(){return new _u(this.center,this.radius)},_u.prototype.union=function($u){var Ru=this.center,Ou=this.radius,Fu=$u.center,Nu=$u.radius,Vu=cr.copy(Fu).subtract(Ru),Gu=Vu.magnitude();if(Ou>=Gu+Nu)return this.clone();if(Nu>=Gu+Ou)return $u.clone();var Uu=.5*(Ou+Gu+Nu);return dr.copy(Vu).scale((-Ou+Uu)/Gu).add(Ru),this.center.copy(dr),this.radius=Uu,this},_u.prototype.expand=function($u){var Ru=($u=cr.from($u)).subtract(this.center).magnitude();return Ru>this.radius&&(this.radius=Ru),this},_u.prototype.transform=function($u){this.center.transform($u);var Ru=function(Ou,Fu){var Nu=Fu[0],Vu=Fu[1],Gu=Fu[2],Uu=Fu[4],Hu=Fu[5],Wu=Fu[6],Qu=Fu[8],qu=Fu[9],Ku=Fu[10];return Ou[0]=Math.hypot(Nu,Vu,Gu),Ou[1]=Math.hypot(Uu,Hu,Wu),Ou[2]=Math.hypot(Qu,qu,Ku),Ou}(cr,$u);return this.radius=Math.max(Ru[0],Math.max(Ru[1],Ru[2]))*this.radius,this},_u.prototype.distanceSquaredTo=function($u){var Ru=this.distanceTo($u);return Ru*Ru},_u.prototype.distanceTo=function($u){var Ru=($u=cr.from($u)).subtract(this.center);return Math.max(0,Ru.len()-this.radius)},_u.prototype.intersectPlane=function($u){var Ru=this.center,Ou=this.radius,Fu=$u.normal.dot(Ru)+$u.distance;return Fu<-Ou?hr.OUTSIDE:Fu<Ou?hr.INTERSECTING:hr.INSIDE},_u}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar=new gn$1,gr=new gn$1,mr=new gn$1,vr=new gn$1,yr$1=new gn$1,br=new gn$1,xr$1=new gn$1,wr$1=0,Er$1=1,Mr=2,Ir=3,Sr=4,Cr$1=5,Br=6,Tr=7,Pr=8,Rr=function(){function _u($u,Ru){$u===void 0&&($u=[0,0,0]),Ru===void 0&&(Ru=[0,0,0,0,0,0,0,0,0]),this.center=new gn$1().from($u),this.halfAxes=new ur(Ru)}return Object.defineProperty(_u.prototype,"halfSize",{get:function(){var $u=this.halfAxes.getColumn(0),Ru=this.halfAxes.getColumn(1),Ou=this.halfAxes.getColumn(2);return[new gn$1($u).len(),new gn$1(Ru).len(),new gn$1(Ou).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"quaternion",{get:function(){var $u=this.halfAxes.getColumn(0),Ru=this.halfAxes.getColumn(1),Ou=this.halfAxes.getColumn(2),Fu=new gn$1($u).normalize(),Nu=new gn$1(Ru).normalize(),Vu=new gn$1(Ou).normalize();return new rr().fromMatrix3(new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Fu,!0),Nu,!0),Vu,!0)))},enumerable:!1,configurable:!0}),_u.prototype.fromCenterHalfSizeQuaternion=function($u,Ru,Ou){var Fu=new rr(Ou),Nu=new ur().fromQuaternion(Fu);return Nu[0]=Nu[0]*Ru[0],Nu[1]=Nu[1]*Ru[0],Nu[2]=Nu[2]*Ru[0],Nu[3]=Nu[3]*Ru[1],Nu[4]=Nu[4]*Ru[1],Nu[5]=Nu[5]*Ru[1],Nu[6]=Nu[6]*Ru[2],Nu[7]=Nu[7]*Ru[2],Nu[8]=Nu[8]*Ru[2],this.center=new gn$1().from($u),this.halfAxes=Nu,this},_u.prototype.clone=function(){return new _u(this.center,this.halfAxes)},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.halfAxes.equals($u.halfAxes)},_u.prototype.getBoundingSphere=function($u){$u===void 0&&($u=new pr);var Ru=this.halfAxes,Ou=Ru.getColumn(0,mr),Fu=Ru.getColumn(1,vr),Nu=Ru.getColumn(2,yr$1),Vu=Ar.copy(Ou).add(Fu).add(Nu);return $u.center.copy(this.center),$u.radius=Vu.magnitude(),$u},_u.prototype.intersectPlane=function($u){var Ru=this.center,Ou=$u.normal,Fu=this.halfAxes,Nu=Ou.x,Vu=Ou.y,Gu=Ou.z,Uu=Math.abs(Nu*Fu[wr$1]+Vu*Fu[Er$1]+Gu*Fu[Mr])+Math.abs(Nu*Fu[Ir]+Vu*Fu[Sr]+Gu*Fu[Cr$1])+Math.abs(Nu*Fu[Br]+Vu*Fu[Tr]+Gu*Fu[Pr]),Hu=Ou.dot(Ru)+$u.distance;return Hu<=-Uu?fr.OUTSIDE:Hu>=Uu?fr.INSIDE:fr.INTERSECTING},_u.prototype.distanceTo=function($u){return Math.sqrt(this.distanceSquaredTo($u))},_u.prototype.distanceSquaredTo=function($u){var Ru=gr.from($u).subtract(this.center),Ou=this.halfAxes,Fu=Ou.getColumn(0,mr),Nu=Ou.getColumn(1,vr),Vu=Ou.getColumn(2,yr$1),Gu=Fu.magnitude(),Uu=Nu.magnitude(),Hu=Vu.magnitude();Fu.normalize(),Nu.normalize(),Vu.normalize();var Wu,Qu=0;return(Wu=Math.abs(Ru.dot(Fu))-Gu)>0&&(Qu+=Wu*Wu),(Wu=Math.abs(Ru.dot(Nu))-Uu)>0&&(Qu+=Wu*Wu),(Wu=Math.abs(Ru.dot(Vu))-Hu)>0&&(Qu+=Wu*Wu),Qu},_u.prototype.computePlaneDistances=function($u,Ru,Ou){Ou===void 0&&(Ou=[-0,-0]);var Fu=Number.POSITIVE_INFINITY,Nu=Number.NEGATIVE_INFINITY,Vu=this.center,Gu=this.halfAxes,Uu=Gu.getColumn(0,mr),Hu=Gu.getColumn(1,vr),Wu=Gu.getColumn(2,yr$1),Qu=br.copy(Uu).add(Hu).add(Wu).add(Vu),qu=xr$1.copy(Qu).subtract($u),Ku=Ru.dot(qu);return Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Qu.copy(Vu).add(Uu).add(Hu).subtract(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Qu.copy(Vu).add(Uu).subtract(Hu).add(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Qu.copy(Vu).add(Uu).subtract(Hu).subtract(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Vu.copy(Qu).subtract(Uu).add(Hu).add(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Vu.copy(Qu).subtract(Uu).add(Hu).subtract(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Vu.copy(Qu).subtract(Uu).subtract(Hu).add(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Vu.copy(Qu).subtract(Uu).subtract(Hu).subtract(Wu),qu.copy(Qu).subtract($u),Ku=Ru.dot(qu),Fu=Math.min(Ku,Fu),Nu=Math.max(Ku,Nu),Ou[0]=Fu,Ou[1]=Nu,Ou},_u.prototype.transform=function($u){this.center.transformAsPoint($u);var Ru=this.halfAxes.getColumn(0,mr);Ru.transformAsPoint($u);var Ou=this.halfAxes.getColumn(1,vr);Ou.transformAsPoint($u);var Fu=this.halfAxes.getColumn(2,yr$1);return Fu.transformAsPoint($u),this.halfAxes=new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Ru,!0),Ou,!0),Fu,!0)),this},_u}();function kr(_u,$u){if(_u.box)return function(Ru,Ou){var Fu=new gn$1(Ru[0],Ru[1],Ru[2]);Ou.transform(Fu,Fu);var Nu=[];if(Ru.length===10){var Vu=Ru.slice(3,6),Gu=new rr;Gu.fromArray(Ru,6);var Uu=new gn$1([1,0,0]),Hu=new gn$1([0,1,0]),Wu=new gn$1([0,0,1]);Uu.transformByQuaternion(Gu),Uu.scale(Vu[0]),Hu.transformByQuaternion(Gu),Hu.scale(Vu[1]),Wu.transformByQuaternion(Gu),Wu.scale(Vu[2]),Nu=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Uu.toArray(),!0),Hu.toArray(),!0),Wu.toArray(),!0)}else Nu=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Ru.slice(3,6),!0),Ru.slice(6,9),!0),Ru.slice(9,12),!0);var Qu=Ou.transformAsVector(Nu.slice(0,3),[0,0,0]),qu=Ou.transformAsVector(Nu.slice(3,6),[0,0,0]),Ku=Ou.transformAsVector(Nu.slice(6,9),[0,0,0]),Yu=new ur([Qu[0],Qu[1],Qu[2],qu[0],qu[1],qu[2],Ku[0],Ku[1],Ku[2]]);return new Rr(Fu,Yu)}(_u.box,$u);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr(_u,$u){if(_u.dynamicScreenSpaceError&&_u.dynamicScreenSpaceErrorComputedDensity){var Ru=_u.dynamicScreenSpaceErrorComputedDensity,Ou=_u.dynamicScreenSpaceErrorFactor;return function(Fu,Nu){var Vu=Fu*Nu;return 1-Math.exp(-Vu*Vu)}($u,Ru)*Ou}return 0}function Lr(_u,$u,Ru){var Ou=new TextDecoder("utf8"),Fu=new Uint8Array(_u,$u,Ru);return Ou.decode(Fu)}function Or(_u,$u,Ru){return Ru===void 0&&(Ru=0),Ru=function(Ou,Fu,Nu){Nu===void 0&&(Nu=0);var Vu=Ou.header,Gu=Vu.featureTableJsonByteLength,Uu=Vu.featureTableBinaryByteLength,Hu=Vu.batchLength;if(Ou.featureTableJson={BATCH_LENGTH:Hu||0},Gu>0){var Wu=Lr(Fu,Nu,Gu);Ou.featureTableJson=JSON.parse(Wu)}return Nu+=Gu,Ou.featureTableBinary=new Uint8Array(Fu,Nu,Uu),Nu+=Uu}(_u,$u,Ru),Ru=function(Ou,Fu,Nu){Nu===void 0&&(Nu=0);var Vu=Ou.header,Gu=Vu.batchTableJsonByteLength,Uu=Vu.batchTableBinaryByteLength;if(Gu>0){var Hu=Lr(Fu,Nu,Gu);Ou.batchTableJson=JSON.parse(Hu),Nu+=Gu,Uu>0&&(Ou.batchTableBinary=new Uint8Array(Fu,Nu,Uu),Ou.batchTableBinary=new Uint8Array(Ou.batchTableBinary),Nu+=Uu)}return Nu}(_u,$u,Ru)}function Nr(_u,$u,Ru){Ru===void 0&&(Ru=0);var Ou=_u.byteOffset+_u.byteLength-Ru;if(Ou===0)throw new Error("glTF byte length must be greater than 0.");return _u.rotateYtoZ=!0,_u.gltfUpAxis="Y",_u.gltfArrayBuffer=function(Fu,Nu,Vu){var Gu=Vu!==void 0?new Uint8Array(Fu).subarray(Nu,Nu+Vu):new Uint8Array(Fu).subarray(Nu);return new Uint8Array(Gu).buffer}($u,Ru,Ou),_u.gltfByteOffset=0,_u.gltfByteLength=Ou,Ru%4==0||console.warn("".concat(_u.type,": embedded glb is not aligned to a 4-byte boundary.")),_u.byteOffset+_u.byteLength}function Fr(_u,$u,Ru){Ru=function(Fu,Nu,Vu){Vu===void 0&&(Vu=0);var Gu=new DataView(Nu);if(Fu.magic=Gu.getUint32(Vu,!0),Vu+=4,Fu.version=Gu.getUint32(Vu,!0),Vu+=4,Fu.byteLength=Gu.getUint32(Vu,!0),Vu+=4,Fu.version!==1)throw new Error("3D Tile Version ".concat(Fu.version," not supported"));return Vu}(_u,$u,Ru),Ru=function(Fu,Nu,Vu){Vu===void 0&&(Vu=0);var Gu,Uu=new DataView(Nu);Fu.header=Fu.header||{};var Hu=Uu.getUint32(Vu,!0);Vu+=4;var Wu=Uu.getUint32(Vu,!0);Vu+=4;var Qu=Uu.getUint32(Vu,!0);Vu+=4;var qu=Uu.getUint32(Vu,!0);return Vu+=4,Qu>=570425344?(Vu-=8,Gu=Hu,Qu=Wu,qu=0,Hu=0,Wu=0,console.warn("b3dm tile in legacy format.")):qu>=570425344&&(Vu-=4,Gu=Qu,Qu=Hu,qu=Wu,Hu=0,Wu=0,console.warn("b3dm tile in legacy format.")),Fu.header.featureTableJsonByteLength=Hu,Fu.header.featureTableBinaryByteLength=Wu,Fu.header.batchTableJsonByteLength=Qu,Fu.header.batchTableBinaryByteLength=qu,Fu.header.batchLength=Gu,Vu}(_u,$u,Ru),Ru=Nr(_u,$u,Ru=Or(_u,$u,Ru));var Ou=_u.featureTableJson.RTC_CENTER;return Ou&&Number.isFinite(Ou.byteOffset)&&(_u.rtcCenter=new Float32Array(_u.featureTableBinary.buffer,_u.featureTableBinary.buffer.byteOffset+Ou.byteOffset,3)),Ru}var Qr=function(){function _u($u,Ru,Ou){this.header=Ru,this.tileset=$u,this.parent=Ou,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Fu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():$u.modelMatrix.clone();this.computedTransform=new Tn(Fu).multiplyRight(this.transform),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(_u.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var $u=this.tileset.b3dmMapping.b3dm_base_url;$u=/\/$/.test($u)?$u:$u+"/";var Ru=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Ru=/^\//.test(Ru)?Ru.slice(1):Ru;var Ou=/^https?:/.test(Ru)?Ru:$u+Ru;if(Ou.indexOf("http")!==-1&&Ou.indexOf("https")===-1){var Fu=Ou.slice(4);Ou="https"+Fu}return Ou}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),_u.prototype.getScreenSpaceError=function($u,Ru){if(this.tileset.type==="TILES3D")return function(Ou,Fu,Nu){var Vu=Ou.tileset,Gu=Ou.parent&&Ou.parent.lodMetricValue||Ou.lodMetricValue,Uu=Nu?Gu:Ou.lodMetricValue;if(Uu===0)return 0;var Hu=Math.max(Ou.distanceToCamera,1e-7),Wu=Vu.options.viewDistanceScale,Qu=Uu*Fu.height*Wu/(Hu*Fu.sseDenominator);return Qu-Dr(Vu,Hu)}(this,$u,Ru);throw new Error("Unsupported tileset type")},_u.prototype.getPriority=function(){var $u=this.tileset.traverser,Ru=$u.options.skipLevelOfDetail,Ou=this.refine==="ADD"||Ru;if(Ou&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Fu=this.parent,Nu=Fu&&(!Ou||this.screenSpaceError===0)?Fu.screenSpaceError:this.screenSpaceError,Vu=$u.root?$u.root.screenSpaceError:0;return Math.max(Vu-Nu,0)},_u.prototype.loadContent=function(){var $u=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return $u.getPriority()}).then(function(Ru){return Ru?it$1($u.contentUrl,{responseType:"arraybuffer",allowHosts:$u.tileset.options.allowHosts,networkSubscribe:$u.tileset.options.networkSubscribe,requestProxy:$u.tileset.options.requestProxy}).then(function(Ou){return Ou.body}).then(function(Ou){return Fr(Fu={byteOffset:0,type:"b3dm"},Ou,Fu.byteOffset),Fu;var Fu}).then(function(Ou){return $u.content=Ou,$u.tileset.options.contentLoader($u).then(function(){return $u.contentState="READY",Ru.done(),!0})}).catch(function(Ou){return $u.contentState="FAILED",Ru.done(),Promise.reject(Ou)}):($u.contentState="UNLOADED",Promise.resolve(!1))}))},_u.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},_u.prototype.updateVisibility=function($u){if(this.frameNumber!==$u.frameNumber){var Ru=this.parent,Ou=Ru?Ru.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Fu=Ru?Ru.computedTransform:this.tileset.modelMatrix;this.updateTransform(Fu),this.distanceToCamera=this.distanceToTile($u),this.screenSpaceError=this.getScreenSpaceError($u,!1),this.visibilityPlaneMask=this.visibility($u,Ou),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=$u.frameNumber}},_u.prototype.visibility=function($u,Ru){return $u.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Ru)},_u.prototype.distanceToTile=function($u){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo($u.camera.position),0))},_u.prototype.updateTransform=function($u){$u===void 0&&($u=new Tn);var Ru=$u.clone().multiplyRight(this.transform);!Ru.equals(this.computedTransform)&&(this.computedTransform.copy(Ru),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform))},_u}(),Vr=function(){function _u(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.get=function($u){return this.array[$u]},_u.prototype.set=function($u,Ru){$u>=this.length&&(this._length=$u+1),this.map.has(this.array[$u])&&this.map.delete(this.array[$u]),this.array[$u]=Ru,this.map.set(Ru,$u)},_u.prototype.delete=function($u){var Ru=this.map.get($u);Ru!==void 0&&Ru>=0&&(this.array.splice(Ru,1),this.map.delete($u),this._length--)},_u.prototype.push=function($u){if(!this.map.has($u)){var Ru=this._length++;this.array[Ru]=$u,this.map.set($u,Ru)}},_u.prototype.pop=function(){var $u=this.array[--this._length];return this.map.delete($u),$u},_u.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},_u.prototype.find=function($u){return this.map.has($u)},_u}(),_r=function(){function _u($u){this.options=$u,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return _u.prototype.traverse=function($u,Ru){this.root=$u,this.reset(),this.updateTile($u,Ru),this._frameNumber=Ru.frameNumber,this.executeTraversal($u,Ru)},_u.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},_u.prototype.executeTraversal=function($u,Ru){var Ou=this._traversalStack;for($u.selectionDepth=1,Ou.push($u);Ou.length>0;){var Fu=Ou.pop(),Nu=!1;if(this.canTraverse(Fu,Ru)){this.updateChildTiles(Fu,Ru);var Vu=Fu.hasRenderContent?Fu.selectionDepth+1:Fu.selectionDepth;Nu=this.updateAndPushChildren(Fu,Ru,Ou,Vu)}var Gu=Fu.parent,Uu=Boolean(!Gu||Gu.shouldRefine),Hu=!Nu;Fu.hasRenderContent?Fu.refine==="ADD"?(this.loadTile(Fu,Ru),this.selectTile(Fu,Ru)):Fu.refine==="REPLACE"&&(this.loadTile(Fu,Ru),Hu&&this.selectTile(Fu,Ru)):(this.emptyTiles[Fu.id]=Fu,this.loadTile(Fu,Ru),Hu&&this.selectTile(Fu,Ru)),this.touchTile(Fu,Ru),Fu.shouldRefine=Nu&&Uu}this.options.onTraversalEnd(Ru)},_u.prototype.updateChildTiles=function($u,Ru){for(var Ou=0,Fu=$u.children;Ou<Fu.length;Ou++){var Nu=Fu[Ou];this.updateTile(Nu,Ru)}return!0},_u.prototype.updateAndPushChildren=function($u,Ru,Ou,Fu){var Nu=this.options,Vu=Nu.loadSiblings,Gu=Nu.skipLevelOfDetail,Uu=$u.children;Uu.sort(this.compareDistanceToCamera.bind(this));for(var Hu=$u.refine==="REPLACE"&&$u.hasRenderContent&&!Gu,Wu=!1,Qu=!0,qu=0,Ku=Uu;qu<Ku.length;qu++){var Yu=Ku[qu];if(Yu.selectionDepth=Fu,Yu.visible?(Ou.find(Yu)&&Ou.delete(Yu),Ou.push(Yu),Wu=!0):(Hu||Vu)&&(this.loadTile(Yu,Ru),this.touchTile(Yu,Ru)),Hu){var _c=void 0;if(_c=Yu.hasRenderContent?Yu.contentAvailable:this.executeEmptyTraversal(Yu,Ru),!(Qu=Qu&&_c))return!1}}return Wu||(Qu=!1),Qu},_u.prototype.updateTile=function($u,Ru){this.updateTileVisibility($u,Ru)},_u.prototype.selectTile=function($u,Ru){this.shouldSelectTile($u)&&($u.selectedFrameNumber=Ru.frameNumber,this.selectedTiles[$u.id]=$u)},_u.prototype.loadTile=function($u,Ru){this.shouldLoadTile($u)&&($u.requestedFrameNumber=Ru.frameNumber,this.requestedTiles[$u.id]=$u)},_u.prototype.touchTile=function($u,Ru){$u.tileset.cache.touch($u),$u.touchedFrameNumber=Ru.frameNumber},_u.prototype.canTraverse=function($u,Ru,Ou,Fu){return Ou===void 0&&(Ou=!1),Fu===void 0&&(Fu=!1),!!$u.hasChildren&&!(!Fu&&!$u.visible)&&this.shouldRefine($u,Ru,Ou)},_u.prototype.shouldLoadTile=function($u){var Ru=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.hasUnloadedContent&&Ru},_u.prototype.shouldSelectTile=function($u){var Ru=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.contentAvailable&&!this.options.skipLevelOfDetail&&Ru},_u.prototype.shouldRefine=function($u,Ru,Ou){var Fu=$u.screenSpaceError;return Ou&&(Fu=$u.getScreenSpaceError(Ru,!0)),Fu>this.options.maxScreenSpaceError},_u.prototype.updateTileVisibility=function($u,Ru){if($u.updateVisibility(Ru),$u.visible){var Ou=$u.children.length>0;this.meetsScreenSpaceErrorEarly($u,Ru)?$u.visible=!1:$u.refine!=="REPLACE"||!Ou||this.anyChildrenVisible($u,Ru)||($u.visible=!1)}},_u.prototype.meetsScreenSpaceErrorEarly=function($u,Ru){var Ou=$u.parent;return!(!Ou||Ou.refine!=="ADD")&&!this.shouldRefine($u,Ru,!0)},_u.prototype.compareDistanceToCamera=function($u,Ru){return Ru.distanceToCamera===0&&$u.distanceToCamera===0?Ru.centerZDepth-$u.centerZDepth:Ru.distanceToCamera-$u.distanceToCamera},_u.prototype.anyChildrenVisible=function($u,Ru){for(var Ou=!1,Fu=0,Nu=$u.children;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Vu.updateVisibility(Ru),Ou=Ou||Vu.visible}return Ou},_u.prototype.everyChildrenVisibleIsLoaded=function($u){for(var Ru=!0,Ou=0,Fu=$u.children;Ou<Fu.length;Ou++){var Nu=Fu[Ou];Nu.visible&&Nu.contentState!=="READY"&&(Ru=!1)}return Ru},_u.prototype.executeEmptyTraversal=function($u,Ru){var Ou=!0,Fu=this._emptyTraversalStack;for(Fu.push($u);Fu.length>0&&Ou;){var Nu=Fu.pop();if(this.updateTile(Nu,Ru),Nu.visible||this.loadTile(Nu,Ru),this.touchTile(Nu,Ru),!Nu.hasRenderContent&&this.canTraverse(Nu,Ru,!1,!0))for(var Vu=0,Gu=Nu.children;Vu<Gu.length;Vu++){var Uu=Gu[Vu];Fu.find(Uu)&&Fu.delete(Uu),Fu.push(Uu)}else Nu.contentAvailable||(Ou=!1)}return Ou},_u}();function Hr(_u){for(var $u=[],Ru=0,Ou=Object.keys(_u);Ru<Ou.length;Ru++){var Fu=Ou[Ru];$u.push(_u[Fu])}return $u}var qr=function(){function _u($u,Ru){var Ou=this;this.rawJson=$u,this.b3dmMapping=$u.b3dmMapping,this.options=Ru,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(Wu){return Ou.onTraversalEnd(Wu)}}),this.cache=new xn,this.requestScheduler=new vn({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,$u.root);for(var Fu=[this.root];Fu.length>0;)for(var Nu=Fu.pop(),Vu=0,Gu=Nu.header.children||[];Vu<Gu.length;Vu++){var Uu=Gu[Vu],Hu=new Qr(this,Uu,Nu);Hu.depth=Nu.depth+1,Nu.children.push(Hu),Fu.push(Hu)}}return Object.defineProperty(_u.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),_u.prototype.reset=function(){for(var $u=[this.root];$u.length>0;){for(var Ru=$u.pop(),Ou=0,Fu=Ru.children;Ou<Fu.length;Ou++){var Nu=Fu[Ou];$u.push(Nu)}this.cache.unloadTile(Ru),this.unloadTile(Ru)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},_u.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},_u.prototype.onTraversalEnd=function($u){var Ru=this,Ou=new gn$1($u.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function(Hu,Wu){return Hu.boundingVolume.center.distanceTo(Ou)-Wu.boundingVolume.center.distanceTo(Ou)});for(var Fu=0,Nu=this.selectedTiles;Fu<Nu.length;Fu++){var Vu=Nu[Fu];this._tiles[Vu.id]=Vu}for(var Gu=0,Uu=this.requestedTiles;Gu<Uu.length;Gu++)(Vu=Uu[Gu]).contentUnloaded&&this.loadTile(Vu);this.cache.unloadTiles(function(){return Ru.memoryUsageInBytes>1024*Ru.maxMemoryUsage*1024},function(Hu){return Ru.unloadTile(Hu)})},_u.prototype.loadTile=function($u){var Ru=this;this.pendingCount++,$u.loadContent().catch(function(Ou){var Fu=Ou.message||Ou.toString();return console.error("A 3D tile failed to load: ".concat($u.id," ").concat(Fu)),Ru.options.onTileError($u,Fu),!1}).then(function(Ou){Ru.pendingCount--,Ou&&(Ru.cache.add($u,function(){$u.content&&(Ru.memoryUsageInBytes+=$u.content.byteLength||0)}),Ru.options.onTileLoad($u))})},_u.prototype.unloadTile=function($u){this.memoryUsageInBytes-=$u.content&&$u.content.byteLength||0,this.options.onTileUnload($u),$u.unloadContent()},_u}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(_u,$u){var Ru;return _u.content&&(_u.contentUrl="".concat($u,"/").concat(_u.content.uri||_u.content.url)),_u.id=(Ru=_u.contentUrl)!==null&&Ru!==void 0?Ru:"empty:"+Kr(),_u.lodMetricType="geometricError",_u.lodMetricValue=_u.geometricError,_u.transformMatrix=_u.transform,_u.type=_u.contentUrl?"SCENEGRAPH":"EMPTY",_u.refine=function(Ou){switch(Ou){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Ou," is not supported."))}}(_u.refine),_u}function jr(_u,$u){var Ru,Ou=JSON.parse(JSON.stringify(_u));return Ou.basePath=$u,Ou.root=function(Fu,Nu){Fu=Ur(Fu,Nu);var Vu=[];for(Vu.push(Fu);Vu.length>0;)for(var Gu=0,Uu=(Vu.pop()||{}).children||[];Gu<Uu.length;Gu++){var Hu=Uu[Gu];Ur(Hu,Nu),Vu.push(Hu)}return Fu}(Ou.root,$u),Ou.type="TILES3D",Ou.lodMetricType="geometricError",Ou.lodMetricValue=((Ru=Ou.root)===null||Ru===void 0?void 0:Ru.lodMetricValue)||0,Ou}var Gr=new(function(){function _u(mp){e$2.Loader.call(this,mp),this.dracoLoader=null,this.ddsLoader=null}function $u(){var mp={};return{get:function(pp){return mp[pp]},add:function(pp,wp){mp[pp]=wp},remove:function(pp){delete mp[pp]},removeAll:function(){mp={}}}}_u.prototype=Object.assign(Object.create(e$2.Loader.prototype),{constructor:_u,load:function(mp,pp,wp,Ap){var Sp,Cp=this;Sp=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$2.LoaderUtils.extractUrlBase(mp),Cp.manager.itemStart(mp);var $p=function(jp){Ap?Ap(jp):console.error(jp),Cp.manager.itemError(mp),Cp.manager.itemEnd(mp)},Fp=new e$2.FileLoader(Cp.manager);Fp.setPath(this.path),Fp.setResponseType("arraybuffer"),Fp.setRequestHeader(this.requestHeader),Cp.crossOrigin==="use-credentials"&&Fp.setWithCredentials(!0),Fp.load(mp,function(jp){try{Cp.parse(jp,Sp,function(kp){pp(kp),Cp.manager.itemEnd(mp)},$p)}catch(kp){$p(kp)}},wp,$p)},setDRACOLoader:function(mp){return this.dracoLoader=mp,this},setDDSLoader:function(mp){return this.ddsLoader=mp,this},parse:function(mp,pp,wp,Ap){var Sp,Cp={};if(typeof mp=="string")Sp=mp;else if(e$2.LoaderUtils.decodeText(new Uint8Array(mp,0,4))===Gu){try{Cp[Ru.KHR_BINARY_GLTF]=new Wu(mp)}catch(yp){return void(Ap&&Ap(yp))}Sp=Cp[Ru.KHR_BINARY_GLTF].content}else Sp=e$2.LoaderUtils.decodeText(new Uint8Array(mp));var $p=JSON.parse(Sp);if($p.asset===void 0||$p.asset.version[0]<2)Ap&&Ap(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if($p.extensionsUsed)for(var Fp=0;Fp<$p.extensionsUsed.length;++Fp){var jp=$p.extensionsUsed[Fp],kp=$p.extensionsRequired||[];switch(jp){case Ru.KHR_LIGHTS_PUNCTUAL:Cp[jp]=new Fu($p);break;case Ru.KHR_MATERIALS_CLEARCOAT:Cp[jp]=new Vu;break;case Ru.KHR_MATERIALS_UNLIT:Cp[jp]=new Nu;break;case Ru.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Cp[jp]=new Yu;break;case Ru.KHR_DRACO_MESH_COMPRESSION:Cp[jp]=new Qu($p,this.dracoLoader);break;case Ru.MSFT_TEXTURE_DDS:Cp[jp]=new Ou(this.ddsLoader);break;case Ru.KHR_TEXTURE_TRANSFORM:Cp[jp]=new qu;break;case Ru.KHR_MESH_QUANTIZATION:Cp[jp]=new _c;break;default:kp.indexOf(jp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+jp+'".')}}var fp=new Ip($p,Cp,{path:pp||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});fp.fileLoader.setRequestHeader(this.requestHeader),fp.parse(wp,Ap)}}});var Ru={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Ou(mp){if(!mp)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Ru.MSFT_TEXTURE_DDS,this.ddsLoader=mp}function Fu(mp){this.name=Ru.KHR_LIGHTS_PUNCTUAL;var pp=mp.extensions&&mp.extensions[Ru.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=pp.lights||[]}function Nu(){this.name=Ru.KHR_MATERIALS_UNLIT}function Vu(){this.name=Ru.KHR_MATERIALS_CLEARCOAT}Fu.prototype.loadLight=function(mp){var pp,wp=this.lightDefs[mp],Ap=new e$2.Color(16777215);wp.color!==void 0&&Ap.fromArray(wp.color);var Sp=wp.range!==void 0?wp.range:0;switch(wp.type){case"directional":(pp=new e$2.DirectionalLight(Ap)).target.position.set(0,0,-1),pp.add(pp.target);break;case"point":(pp=new e$2.PointLight(Ap)).distance=Sp;break;case"spot":(pp=new e$2.SpotLight(Ap)).distance=Sp,wp.spot=wp.spot||{},wp.spot.innerConeAngle=wp.spot.innerConeAngle!==void 0?wp.spot.innerConeAngle:0,wp.spot.outerConeAngle=wp.spot.outerConeAngle!==void 0?wp.spot.outerConeAngle:Math.PI/4,pp.angle=wp.spot.outerConeAngle,pp.penumbra=1-wp.spot.innerConeAngle/wp.spot.outerConeAngle,pp.target.position.set(0,0,-1),pp.add(pp.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+wp.type+'".')}return pp.position.set(0,0,0),pp.decay=2,wp.intensity!==void 0&&(pp.intensity=wp.intensity),pp.name=wp.name||"light_"+mp,Promise.resolve(pp)},Nu.prototype.getMaterialType=function(){return e$2.MeshBasicMaterial},Nu.prototype.extendParams=function(mp,pp,wp){var Ap=[];mp.color=new e$2.Color(1,1,1),mp.opacity=1;var Sp=pp.pbrMetallicRoughness;if(Sp){if(Array.isArray(Sp.baseColorFactor)){var Cp=Sp.baseColorFactor;mp.color.fromArray(Cp),mp.opacity=Cp[3]}Sp.baseColorTexture!==void 0&&Ap.push(wp.assignTexture(mp,"map",Sp.baseColorTexture))}return Promise.all(Ap)},Vu.prototype.getMaterialType=function(){return e$2.MeshPhysicalMaterial},Vu.prototype.extendParams=function(mp,pp,wp){var Ap=[],Sp=pp.extensions[this.name];if(Sp.clearcoatFactor!==void 0&&(mp.clearcoat=Sp.clearcoatFactor),Sp.clearcoatTexture!==void 0&&Ap.push(wp.assignTexture(mp,"clearcoatMap",Sp.clearcoatTexture)),Sp.clearcoatRoughnessFactor!==void 0&&(mp.clearcoatRoughness=Sp.clearcoatRoughnessFactor),Sp.clearcoatRoughnessTexture!==void 0&&Ap.push(wp.assignTexture(mp,"clearcoatRoughnessMap",Sp.clearcoatRoughnessTexture)),Sp.clearcoatNormalTexture!==void 0&&(Ap.push(wp.assignTexture(mp,"clearcoatNormalMap",Sp.clearcoatNormalTexture)),Sp.clearcoatNormalTexture.scale!==void 0)){var Cp=Sp.clearcoatNormalTexture.scale;mp.clearcoatNormalScale=new e$2.Vector2(Cp,Cp)}return Promise.all(Ap)};var Gu="glTF",Uu=1313821514,Hu=5130562;function Wu(mp){this.name=Ru.KHR_BINARY_GLTF,this.content=null,this.body=null;var pp=new DataView(mp,0,12);if(this.header={magic:e$2.LoaderUtils.decodeText(new Uint8Array(mp.slice(0,4))),version:pp.getUint32(4,!0),length:pp.getUint32(8,!0)},this.header.magic!==Gu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var wp=new DataView(mp,12),Ap=0;Ap<wp.byteLength;){var Sp=wp.getUint32(Ap,!0);Ap+=4;var Cp=wp.getUint32(Ap,!0);if(Ap+=4,Cp===Uu){var $p=new Uint8Array(mp,12+Ap,Sp);this.content=e$2.LoaderUtils.decodeText($p)}else if(Cp===Hu){var Fp=12+Ap;this.body=mp.slice(Fp,Fp+Sp)}Ap+=Sp}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function Qu(mp,pp){if(!pp)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ru.KHR_DRACO_MESH_COMPRESSION,this.json=mp,this.dracoLoader=pp,this.dracoLoader.preload()}function qu(){this.name=Ru.KHR_TEXTURE_TRANSFORM}function Ku(mp){e$2.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var pp=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),wp=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),Ap=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Sp=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Cp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),$p={specular:{value:new e$2.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=$p,this.onBeforeCompile=function(Fp){for(var jp in $p)Fp.uniforms[jp]=$p[jp];Fp.fragmentShader=Fp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Fp.fragmentShader=Fp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Fp.fragmentShader=Fp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",pp),Fp.fragmentShader=Fp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",wp),Fp.fragmentShader=Fp.fragmentShader.replace("#include <roughnessmap_fragment>",Ap),Fp.fragmentShader=Fp.fragmentShader.replace("#include <metalnessmap_fragment>",Sp),Fp.fragmentShader=Fp.fragmentShader.replace("#include <lights_physical_fragment>",Cp)},Object.defineProperties(this,{specular:{get:function(){return $p.specular.value},set:function(Fp){$p.specular.value=Fp}},specularMap:{get:function(){return $p.specularMap.value},set:function(Fp){$p.specularMap.value=Fp}},glossiness:{get:function(){return $p.glossiness.value},set:function(Fp){$p.glossiness.value=Fp}},glossinessMap:{get:function(){return $p.glossinessMap.value},set:function(Fp){$p.glossinessMap.value=Fp,Fp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(mp)}function Yu(){return{name:Ru.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Ku},extendParams:function(mp,pp,wp){var Ap=pp.extensions[this.name];mp.color=new e$2.Color(1,1,1),mp.opacity=1;var Sp=[];if(Array.isArray(Ap.diffuseFactor)){var Cp=Ap.diffuseFactor;mp.color.fromArray(Cp),mp.opacity=Cp[3]}if(Ap.diffuseTexture!==void 0&&Sp.push(wp.assignTexture(mp,"map",Ap.diffuseTexture)),mp.emissive=new e$2.Color(0,0,0),mp.glossiness=Ap.glossinessFactor!==void 0?Ap.glossinessFactor:1,mp.specular=new e$2.Color(1,1,1),Array.isArray(Ap.specularFactor)&&mp.specular.fromArray(Ap.specularFactor),Ap.specularGlossinessTexture!==void 0){var $p=Ap.specularGlossinessTexture;Sp.push(wp.assignTexture(mp,"glossinessMap",$p)),Sp.push(wp.assignTexture(mp,"specularMap",$p))}return Promise.all(Sp)},createMaterial:function(mp){var pp=new Ku(mp);return pp.fog=!0,pp.color=mp.color,pp.map=mp.map===void 0?null:mp.map,pp.lightMap=null,pp.lightMapIntensity=1,pp.aoMap=mp.aoMap===void 0?null:mp.aoMap,pp.aoMapIntensity=1,pp.emissive=mp.emissive,pp.emissiveIntensity=1,pp.emissiveMap=mp.emissiveMap===void 0?null:mp.emissiveMap,pp.bumpMap=mp.bumpMap===void 0?null:mp.bumpMap,pp.bumpScale=1,pp.normalMap=mp.normalMap===void 0?null:mp.normalMap,pp.normalMapType=e$2.TangentSpaceNormalMap,mp.normalScale&&(pp.normalScale=mp.normalScale),pp.displacementMap=null,pp.displacementScale=1,pp.displacementBias=0,pp.specularMap=mp.specularMap===void 0?null:mp.specularMap,pp.specular=mp.specular,pp.glossinessMap=mp.glossinessMap===void 0?null:mp.glossinessMap,pp.glossiness=mp.glossiness,pp.alphaMap=null,pp.envMap=mp.envMap===void 0?null:mp.envMap,pp.envMapIntensity=1,pp.refractionRatio=.98,pp}}}function _c(){this.name=Ru.KHR_MESH_QUANTIZATION}function Ju(mp,pp,wp,Ap){e$2.Interpolant.call(this,mp,pp,wp,Ap)}Qu.prototype.decodePrimitive=function(mp,pp){var wp=this.json,Ap=this.dracoLoader,Sp=mp.extensions[this.name].bufferView,Cp=mp.extensions[this.name].attributes,$p={},Fp={},jp={};for(var kp in Cp){var fp=ip[kp]||kp.toLowerCase();$p[fp]=Cp[kp]}for(kp in mp.attributes)if(fp=ip[kp]||kp.toLowerCase(),Cp[kp]!==void 0){var yp=wp.accessors[mp.attributes[kp]],Gp=lp[yp.componentType];jp[fp]=Gp,Fp[fp]=yp.normalized===!0}return pp.getDependency("bufferView",Sp).then(function(Np){return new Promise(function(Xp){Ap.decodeDracoFile(Np,function(Qp){for(var Zp in Qp.attributes){var im=Qp.attributes[Zp],nm=Fp[Zp];nm!==void 0&&(im.normalized=nm)}Xp(Qp)},$p,jp)})})},qu.prototype.extendTexture=function(mp,pp){return mp=mp.clone(),pp.offset!==void 0&&mp.offset.fromArray(pp.offset),pp.rotation!==void 0&&(mp.rotation=pp.rotation),pp.scale!==void 0&&mp.repeat.fromArray(pp.scale),pp.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),mp.needsUpdate=!0,mp},Ku.prototype=Object.create(e$2.MeshStandardMaterial.prototype),Ku.prototype.constructor=Ku,Ku.prototype.copy=function(mp){return e$2.MeshStandardMaterial.prototype.copy.call(this,mp),this.specularMap=mp.specularMap,this.specular.copy(mp.specular),this.glossinessMap=mp.glossinessMap,this.glossiness=mp.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Ju.prototype=Object.create(e$2.Interpolant.prototype),Ju.prototype.constructor=Ju,Ju.prototype.copySampleValue_=function(mp){for(var pp=this.resultBuffer,wp=this.sampleValues,Ap=this.valueSize,Sp=mp*Ap*3+Ap,Cp=0;Cp!==Ap;Cp++)pp[Cp]=wp[Sp+Cp];return pp},Ju.prototype.beforeStart_=Ju.prototype.copySampleValue_,Ju.prototype.afterEnd_=Ju.prototype.copySampleValue_,Ju.prototype.interpolate_=function(mp,pp,wp,Ap){for(var Sp=this.resultBuffer,Cp=this.sampleValues,$p=this.valueSize,Fp=2*$p,jp=3*$p,kp=Ap-pp,fp=(wp-pp)/kp,yp=fp*fp,Gp=yp*fp,Np=mp*jp,Xp=Np-jp,Qp=-2*Gp+3*yp,Zp=Gp-yp,im=1-Qp,nm=Zp-yp+fp,cm=0;cm!==$p;cm++){var em=Cp[Xp+cm+$p],om=Cp[Xp+cm+Fp]*kp,tm=Cp[Np+cm+$p],sm=Cp[Np+cm]*kp;Sp[cm]=im*em+nm*om+Qp*tm+Zp*sm}return Sp};var Xu=0,Zu=1,Xc=2,_h=3,ep=4,np=5,ap=6,lp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},up={9728:e$2.NearestFilter,9729:e$2.LinearFilter,9984:e$2.NearestMipmapNearestFilter,9985:e$2.LinearMipmapNearestFilter,9986:e$2.NearestMipmapLinearFilter,9987:e$2.LinearMipmapLinearFilter},_f={33071:e$2.ClampToEdgeWrapping,33648:e$2.MirroredRepeatWrapping,10497:e$2.RepeatWrapping},tp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ip={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},op={CUBICSPLINE:void 0,LINEAR:e$2.InterpolateLinear,STEP:e$2.InterpolateDiscrete},sp="OPAQUE",cp="MASK",hp="BLEND",dp={"image/png":e$2.RGBAFormat,"image/jpeg":e$2.RGBFormat};function xp(mp,pp){return typeof mp!="string"||mp===""?"":(/^https?:\/\//i.test(pp)&&/^\//.test(mp)&&(pp=pp.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(mp)||/^data:.*,.*$/i.test(mp)||/^blob:.*$/i.test(mp)?mp:pp+mp)}function bp(mp,pp,wp){for(var Ap in wp.extensions)mp[Ap]===void 0&&(pp.userData.gltfExtensions=pp.userData.gltfExtensions||{},pp.userData.gltfExtensions[Ap]=wp.extensions[Ap])}function Rp(mp,pp){pp.extras!==void 0&&(typeof pp.extras=="object"?Object.assign(mp.userData,pp.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+pp.extras))}function Tp(mp,pp){if(mp.updateMorphTargets(),pp.weights!==void 0)for(var wp=0,Ap=pp.weights.length;wp<Ap;wp++)mp.morphTargetInfluences[wp]=pp.weights[wp];if(pp.extras&&Array.isArray(pp.extras.targetNames)){var Sp=pp.extras.targetNames;if(mp.morphTargetInfluences.length===Sp.length)for(mp.morphTargetDictionary={},wp=0,Ap=Sp.length;wp<Ap;wp++)mp.morphTargetDictionary[Sp[wp]]=wp;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Up(mp){for(var pp="",wp=Object.keys(mp).sort(),Ap=0,Sp=wp.length;Ap<Sp;Ap++)pp+=wp[Ap]+":"+mp[wp[Ap]]+";";return pp}function Ip(mp,pp,wp){this.json=mp||{},this.extensions=pp||{},this.options=wp||{},this.cache=new $u,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$2.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$2.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Vp(mp,pp,wp){var Ap=pp.attributes,Sp=[];function Cp(kp,fp){return wp.getDependency("accessor",kp).then(function(yp){mp.setAttribute(fp,yp)})}for(var $p in Ap){var Fp=ip[$p]||$p.toLowerCase();Fp in mp.attributes||Sp.push(Cp(Ap[$p],Fp))}if(pp.indices!==void 0&&!mp.index){var jp=wp.getDependency("accessor",pp.indices).then(function(kp){mp.setIndex(kp)});Sp.push(jp)}return Rp(mp,pp),function(kp,fp,yp){var Gp=fp.attributes,Np=new e$2.Box3;if(Gp.POSITION!==void 0){var Xp=(om=yp.json.accessors[Gp.POSITION]).min,Qp=om.max;if(Xp!==void 0&&Qp!==void 0){Np.set(new e$2.Vector3(Xp[0],Xp[1],Xp[2]),new e$2.Vector3(Qp[0],Qp[1],Qp[2]));var Zp=fp.targets;if(Zp!==void 0){for(var im=new e$2.Vector3,nm=new e$2.Vector3,cm=0,em=Zp.length;cm<em;cm++){var om,tm=Zp[cm];tm.POSITION!==void 0&&(Xp=(om=yp.json.accessors[tm.POSITION]).min,Qp=om.max,Xp!==void 0&&Qp!==void 0?(nm.setX(Math.max(Math.abs(Xp[0]),Math.abs(Qp[0]))),nm.setY(Math.max(Math.abs(Xp[1]),Math.abs(Qp[1]))),nm.setZ(Math.max(Math.abs(Xp[2]),Math.abs(Qp[2]))),im.max(nm)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Np.expandByVector(im)}kp.boundingBox=Np;var sm=new e$2.Sphere;Np.getCenter(sm.center),sm.radius=Np.min.distanceTo(Np.max)/2,kp.boundingSphere=sm}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(mp,pp,wp),Promise.all(Sp).then(function(){return pp.targets!==void 0?function(kp,fp,yp){for(var Gp=!1,Np=!1,Xp=0,Qp=fp.length;Xp<Qp&&((nm=fp[Xp]).POSITION!==void 0&&(Gp=!0),nm.NORMAL!==void 0&&(Np=!0),!Gp||!Np);Xp++);if(!Gp&&!Np)return Promise.resolve(kp);var Zp=[],im=[];for(Xp=0,Qp=fp.length;Xp<Qp;Xp++){var nm=fp[Xp];if(Gp){var cm=nm.POSITION!==void 0?yp.getDependency("accessor",nm.POSITION):kp.attributes.position;Zp.push(cm)}Np&&(cm=nm.NORMAL!==void 0?yp.getDependency("accessor",nm.NORMAL):kp.attributes.normal,im.push(cm))}return Promise.all([Promise.all(Zp),Promise.all(im)]).then(function(em){var om=em[0],tm=em[1];return Gp&&(kp.morphAttributes.position=om),Np&&(kp.morphAttributes.normal=tm),kp.morphTargetsRelative=!0,kp})}(mp,pp.targets,wp):mp})}function Lp(mp,pp){var wp=mp.getIndex();if(wp===null){var Ap=[],Sp=mp.getAttribute("position");if(Sp===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),mp;for(var Cp=0;Cp<Sp.count;Cp++)Ap.push(Cp);mp.setIndex(Ap),wp=mp.getIndex()}var $p=wp.count-2,Fp=[];if(pp===e$2.TriangleFanDrawMode)for(Cp=1;Cp<=$p;Cp++)Fp.push(wp.getX(0)),Fp.push(wp.getX(Cp)),Fp.push(wp.getX(Cp+1));else for(Cp=0;Cp<$p;Cp++)Cp%2==0?(Fp.push(wp.getX(Cp)),Fp.push(wp.getX(Cp+1)),Fp.push(wp.getX(Cp+2))):(Fp.push(wp.getX(Cp+2)),Fp.push(wp.getX(Cp+1)),Fp.push(wp.getX(Cp)));Fp.length/3!==$p&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var jp=mp.clone();return jp.setIndex(Fp),jp}return Ip.prototype.parse=function(mp,pp){var wp=this,Ap=this.json,Sp=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Cp){var $p={scene:Cp[0][Ap.scene||0],scenes:Cp[0],animations:Cp[1],cameras:Cp[2],asset:Ap.asset,parser:wp,userData:{}};bp(Sp,$p,Ap),Rp($p,Ap),mp($p)}).catch(pp)},Ip.prototype.markDefs=function(){for(var mp=this.json.nodes||[],pp=this.json.skins||[],wp=this.json.meshes||[],Ap={},Sp={},Cp=0,$p=pp.length;Cp<$p;Cp++)for(var Fp=pp[Cp].joints,jp=0,kp=Fp.length;jp<kp;jp++)mp[Fp[jp]].isBone=!0;for(var fp=0,yp=mp.length;fp<yp;fp++){var Gp=mp[fp];Gp.mesh!==void 0&&(Ap[Gp.mesh]===void 0&&(Ap[Gp.mesh]=Sp[Gp.mesh]=0),Ap[Gp.mesh]++,Gp.skin!==void 0&&(wp[Gp.mesh].isSkinnedMesh=!0))}this.json.meshReferences=Ap,this.json.meshUses=Sp},Ip.prototype.getDependency=function(mp,pp){var wp=mp+":"+pp,Ap=this.cache.get(wp);if(!Ap){switch(mp){case"scene":Ap=this.loadScene(pp);break;case"node":Ap=this.loadNode(pp);break;case"mesh":Ap=this.loadMesh(pp);break;case"accessor":Ap=this.loadAccessor(pp);break;case"bufferView":Ap=this.loadBufferView(pp);break;case"buffer":Ap=this.loadBuffer(pp);break;case"material":Ap=this.loadMaterial(pp);break;case"texture":Ap=this.loadTexture(pp);break;case"skin":Ap=this.loadSkin(pp);break;case"animation":Ap=this.loadAnimation(pp);break;case"camera":Ap=this.loadCamera(pp);break;case"light":Ap=this.extensions[Ru.KHR_LIGHTS_PUNCTUAL].loadLight(pp);break;default:throw new Error("Unknown type: "+mp)}this.cache.add(wp,Ap)}return Ap},Ip.prototype.getDependencies=function(mp){var pp=this.cache.get(mp);if(!pp){var wp=this,Ap=this.json[mp+(mp==="mesh"?"es":"s")]||[];pp=Promise.all(Ap.map(function(Sp,Cp){return wp.getDependency(mp,Cp)})),this.cache.add(mp,pp)}return pp},Ip.prototype.loadBuffer=function(mp){var pp=this.json.buffers[mp],wp=this.fileLoader;if(pp.type&&pp.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+pp.type+" buffer type is not supported.");if(pp.uri===void 0&&mp===0)return Promise.resolve(this.extensions[Ru.KHR_BINARY_GLTF].body);var Ap=this.options;return new Promise(function(Sp,Cp){wp.load(xp(pp.uri,Ap.path),Sp,void 0,function(){Cp(new Error('THREE.GLTFLoader: Failed to load buffer "'+pp.uri+'".'))})})},Ip.prototype.loadBufferView=function(mp){var pp=this.json.bufferViews[mp];return this.getDependency("buffer",pp.buffer).then(function(wp){var Ap=pp.byteLength||0,Sp=pp.byteOffset||0;return wp.slice(Sp,Sp+Ap)})},Ip.prototype.loadAccessor=function(mp){var pp=this,wp=this.json,Ap=this.json.accessors[mp];if(Ap.bufferView===void 0&&Ap.sparse===void 0)return Promise.resolve(null);var Sp=[];return Ap.bufferView!==void 0?Sp.push(this.getDependency("bufferView",Ap.bufferView)):Sp.push(null),Ap.sparse!==void 0&&(Sp.push(this.getDependency("bufferView",Ap.sparse.indices.bufferView)),Sp.push(this.getDependency("bufferView",Ap.sparse.values.bufferView))),Promise.all(Sp).then(function(Cp){var $p,Fp,jp=Cp[0],kp=tp[Ap.type],fp=lp[Ap.componentType],yp=fp.BYTES_PER_ELEMENT,Gp=yp*kp,Np=Ap.byteOffset||0,Xp=Ap.bufferView!==void 0?wp.bufferViews[Ap.bufferView].byteStride:void 0,Qp=Ap.normalized===!0;if(Xp&&Xp!==Gp){var Zp=Math.floor(Np/Xp),im="InterleavedBuffer:"+Ap.bufferView+":"+Ap.componentType+":"+Zp+":"+Ap.count,nm=pp.cache.get(im);nm||($p=new fp(jp,Zp*Xp,Ap.count*Xp/yp),nm=new e$2.InterleavedBuffer($p,Xp/yp),pp.cache.add(im,nm)),Fp=new e$2.InterleavedBufferAttribute(nm,kp,Np%Xp/yp,Qp)}else $p=jp===null?new fp(Ap.count*kp):new fp(jp,Np,Ap.count*kp),Fp=new e$2.BufferAttribute($p,kp,Qp);if(Ap.sparse!==void 0){var cm=tp.SCALAR,em=lp[Ap.sparse.indices.componentType],om=Ap.sparse.indices.byteOffset||0,tm=Ap.sparse.values.byteOffset||0,sm=new em(Cp[1],om,Ap.sparse.count*cm),Bp=new fp(Cp[2],tm,Ap.sparse.count*kp);jp!==null&&(Fp=new e$2.BufferAttribute(Fp.array.slice(),Fp.itemSize,Fp.normalized));for(var rm=0,lm=sm.length;rm<lm;rm++){var dm=sm[rm];if(Fp.setX(dm,Bp[rm*kp]),kp>=2&&Fp.setY(dm,Bp[rm*kp+1]),kp>=3&&Fp.setZ(dm,Bp[rm*kp+2]),kp>=4&&Fp.setW(dm,Bp[rm*kp+3]),kp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Fp})},Ip.prototype.loadTexture=function(mp){var pp,wp=this,Ap=this.json,Sp=this.options,Cp=this.textureLoader,$p=self.URL||self.webkitURL,Fp=Ap.textures[mp],jp=Fp.extensions||{},kp=(pp=jp[Ru.MSFT_TEXTURE_DDS]?Ap.images[jp[Ru.MSFT_TEXTURE_DDS].source]:Ap.images[Fp.source]).uri,fp=!1;return pp.bufferView!==void 0&&(kp=wp.getDependency("bufferView",pp.bufferView).then(function(yp){fp=!0;var Gp=new Blob([yp],{type:pp.mimeType});return kp=$p.createObjectURL(Gp)})),Promise.resolve(kp).then(function(yp){var Gp=Sp.manager.getHandler(yp);return Gp||(Gp=jp[Ru.MSFT_TEXTURE_DDS]?wp.extensions[Ru.MSFT_TEXTURE_DDS].ddsLoader:Cp),new Promise(function(Np,Xp){Gp.load(xp(yp,Sp.path),Np,void 0,Xp)})}).then(function(yp){fp===!0&&$p.revokeObjectURL(kp),yp.flipY=!1,Fp.name&&(yp.name=Fp.name),pp.mimeType in dp&&(yp.format=dp[pp.mimeType]);var Gp=(Ap.samplers||{})[Fp.sampler]||{};return yp.magFilter=up[Gp.magFilter]||e$2.LinearFilter,yp.minFilter=up[Gp.minFilter]||e$2.LinearMipmapLinearFilter,yp.wrapS=_f[Gp.wrapS]||e$2.RepeatWrapping,yp.wrapT=_f[Gp.wrapT]||e$2.RepeatWrapping,wp.associations.set(yp,{type:"textures",index:mp}),yp})},Ip.prototype.assignTexture=function(mp,pp,wp){var Ap=this;return this.getDependency("texture",wp.index).then(function(Sp){if(!Sp.isCompressedTexture)switch(pp){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":Sp.format=e$2.RGBFormat}if(wp.texCoord===void 0||wp.texCoord==0||pp==="aoMap"&&wp.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+wp.texCoord+" for texture "+pp+" not yet supported."),Ap.extensions[Ru.KHR_TEXTURE_TRANSFORM]){var Cp=wp.extensions!==void 0?wp.extensions[Ru.KHR_TEXTURE_TRANSFORM]:void 0;if(Cp){var $p=this.associations.get(Sp);Sp=Ap.extensions[Ru.KHR_TEXTURE_TRANSFORM].extendTexture(Sp,Cp),this.associations.set(Sp,$p)}}mp[pp]=Sp})},Ip.prototype.assignFinalMaterial=function(mp){var pp=mp.geometry,wp=mp.material,Ap=pp.attributes.tangent!==void 0,Sp=pp.attributes.color!==void 0,Cp=pp.attributes.normal===void 0,$p=mp.isSkinnedMesh===!0,Fp=Object.keys(pp.morphAttributes).length>0,jp=Fp&&pp.morphAttributes.normal!==void 0;if(mp.isPoints){var kp="PointsMaterial:"+wp.uuid,fp=this.cache.get(kp);fp||(fp=new e$2.PointsMaterial,e$2.Material.prototype.copy.call(fp,wp),fp.color.copy(wp.color),fp.map=wp.map,fp.sizeAttenuation=!1,this.cache.add(kp,fp)),wp=fp}else if(mp.isLine){kp="LineBasicMaterial:"+wp.uuid;var yp=this.cache.get(kp);yp||(yp=new e$2.LineBasicMaterial,e$2.Material.prototype.copy.call(yp,wp),yp.color.copy(wp.color),this.cache.add(kp,yp)),wp=yp}if(Ap||Sp||Cp||$p||Fp){kp="ClonedMaterial:"+wp.uuid+":",wp.isGLTFSpecularGlossinessMaterial&&(kp+="specular-glossiness:"),$p&&(kp+="skinning:"),Ap&&(kp+="vertex-tangents:"),Sp&&(kp+="vertex-colors:"),Cp&&(kp+="flat-shading:"),Fp&&(kp+="morph-targets:"),jp&&(kp+="morph-normals:");var Gp=this.cache.get(kp);Gp||(Gp=wp.clone(),$p&&(Gp.skinning=!0),Ap&&(Gp.vertexTangents=!0),Sp&&(Gp.vertexColors=!0),Cp&&(Gp.flatShading=!0),Fp&&(Gp.morphTargets=!0),jp&&(Gp.morphNormals=!0),this.cache.add(kp,Gp),this.associations.set(Gp,this.associations.get(wp))),wp=Gp}wp.aoMap&&pp.attributes.uv2===void 0&&pp.attributes.uv!==void 0&&pp.setAttribute("uv2",pp.attributes.uv),wp.normalScale&&!Ap&&(wp.normalScale.y=-wp.normalScale.y),wp.clearcoatNormalScale&&!Ap&&(wp.clearcoatNormalScale.y=-wp.clearcoatNormalScale.y),mp.material=wp},Ip.prototype.loadMaterial=function(mp){var pp,wp=this,Ap=this.json,Sp=this.extensions,Cp=Ap.materials[mp],$p={},Fp=Cp.extensions||{},jp=[];if(Fp[Ru.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var kp=Sp[Ru.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];pp=kp.getMaterialType(),jp.push(kp.extendParams($p,Cp,wp))}else if(Fp[Ru.KHR_MATERIALS_UNLIT]){var fp=Sp[Ru.KHR_MATERIALS_UNLIT];pp=fp.getMaterialType(),jp.push(fp.extendParams($p,Cp,wp))}else{pp=e$2.MeshStandardMaterial;var yp=Cp.pbrMetallicRoughness||{};if($p.color=new e$2.Color(1,1,1),$p.opacity=1,Array.isArray(yp.baseColorFactor)){var Gp=yp.baseColorFactor;$p.color.fromArray(Gp),$p.opacity=Gp[3]}yp.baseColorTexture!==void 0&&jp.push(wp.assignTexture($p,"map",yp.baseColorTexture)),$p.metalness=yp.metallicFactor!==void 0?yp.metallicFactor:1,$p.roughness=yp.roughnessFactor!==void 0?yp.roughnessFactor:1,yp.metallicRoughnessTexture!==void 0&&(jp.push(wp.assignTexture($p,"metalnessMap",yp.metallicRoughnessTexture)),jp.push(wp.assignTexture($p,"roughnessMap",yp.metallicRoughnessTexture)))}Cp.doubleSided===!0&&($p.side=e$2.DoubleSide);var Np=Cp.alphaMode||sp;if(Np===hp?($p.transparent=!0,$p.depthWrite=!1):($p.transparent=!1,Np===cp&&($p.alphaTest=Cp.alphaCutoff!==void 0?Cp.alphaCutoff:.5)),Cp.normalTexture!==void 0&&pp!==e$2.MeshBasicMaterial&&(jp.push(wp.assignTexture($p,"normalMap",Cp.normalTexture)),$p.normalScale=new e$2.Vector2(1,1),Cp.normalTexture.scale!==void 0&&$p.normalScale.set(Cp.normalTexture.scale,Cp.normalTexture.scale)),Cp.occlusionTexture!==void 0&&pp!==e$2.MeshBasicMaterial&&(jp.push(wp.assignTexture($p,"aoMap",Cp.occlusionTexture)),Cp.occlusionTexture.strength!==void 0&&($p.aoMapIntensity=Cp.occlusionTexture.strength)),Cp.emissiveFactor!==void 0&&pp!==e$2.MeshBasicMaterial&&($p.emissive=new e$2.Color().fromArray(Cp.emissiveFactor)),Cp.emissiveTexture!==void 0&&pp!==e$2.MeshBasicMaterial&&jp.push(wp.assignTexture($p,"emissiveMap",Cp.emissiveTexture)),Fp[Ru.KHR_MATERIALS_CLEARCOAT]){var Xp=Sp[Ru.KHR_MATERIALS_CLEARCOAT];pp=Xp.getMaterialType(),jp.push(Xp.extendParams($p,{extensions:Fp},wp))}return Promise.all(jp).then(function(){var Qp;return Qp=pp===Ku?Sp[Ru.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial($p):new pp($p),Cp.name&&(Qp.name=Cp.name),Qp.map&&(Qp.map.encoding=e$2.sRGBEncoding),Qp.emissiveMap&&(Qp.emissiveMap.encoding=e$2.sRGBEncoding),Rp(Qp,Cp),wp.associations.set(Qp,{type:"materials",index:mp}),Cp.extensions&&bp(Sp,Qp,Cp),Qp})},Ip.prototype.loadGeometries=function(mp){var pp=this,wp=this.extensions,Ap=this.primitiveCache;function Sp(Xp){return wp[Ru.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Xp,pp).then(function(Qp){return Vp(Qp,Xp,pp)})}for(var Cp,$p,Fp=[],jp=0,kp=mp.length;jp<kp;jp++){var fp,yp=mp[jp],Gp=($p=void 0,($p=(Cp=yp).extensions&&Cp.extensions[Ru.KHR_DRACO_MESH_COMPRESSION])?"draco:"+$p.bufferView+":"+$p.indices+":"+Up($p.attributes):Cp.indices+":"+Up(Cp.attributes)+":"+Cp.mode),Np=Ap[Gp];Np?Fp.push(Np.promise):(fp=yp.extensions&&yp.extensions[Ru.KHR_DRACO_MESH_COMPRESSION]?Sp(yp):Vp(new e$2.BufferGeometry,yp,pp),Ap[Gp]={primitive:yp,promise:fp},Fp.push(fp))}return Promise.all(Fp)},Ip.prototype.loadMesh=function(mp){for(var pp,wp=this,Ap=this.json.meshes[mp],Sp=Ap.primitives,Cp=[],$p=0,Fp=Sp.length;$p<Fp;$p++){var jp=Sp[$p].material===void 0?((pp=this.cache).DefaultMaterial===void 0&&(pp.DefaultMaterial=new e$2.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$2.FrontSide})),pp.DefaultMaterial):this.getDependency("material",Sp[$p].material);Cp.push(jp)}return Cp.push(wp.loadGeometries(Sp)),Promise.all(Cp).then(function(kp){for(var fp=kp.slice(0,kp.length-1),yp=kp[kp.length-1],Gp=[],Np=0,Xp=yp.length;Np<Xp;Np++){var Qp,Zp=yp[Np],im=Sp[Np],nm=fp[Np];if(im.mode===ep||im.mode===np||im.mode===ap||im.mode===void 0)(Qp=Ap.isSkinnedMesh===!0?new e$2.SkinnedMesh(Zp,nm):new e$2.Mesh(Zp,nm)).isSkinnedMesh!==!0||Qp.geometry.attributes.skinWeight.normalized||Qp.normalizeSkinWeights(),im.mode===np?Qp.geometry=Lp(Qp.geometry,e$2.TriangleStripDrawMode):im.mode===ap&&(Qp.geometry=Lp(Qp.geometry,e$2.TriangleFanDrawMode));else if(im.mode===Zu)Qp=new e$2.LineSegments(Zp,nm);else if(im.mode===_h)Qp=new e$2.Line(Zp,nm);else if(im.mode===Xc)Qp=new e$2.LineLoop(Zp,nm);else{if(im.mode!==Xu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+im.mode);Qp=new e$2.Points(Zp,nm)}Object.keys(Qp.geometry.morphAttributes).length>0&&Tp(Qp,Ap),Qp.name=Ap.name||"mesh_"+mp,yp.length>1&&(Qp.name+="_"+Np),Rp(Qp,Ap),wp.assignFinalMaterial(Qp),Gp.push(Qp)}if(Gp.length===1)return Gp[0];var cm=new e$2.Group;for(Np=0,Xp=Gp.length;Np<Xp;Np++)cm.add(Gp[Np]);return cm})},Ip.prototype.loadCamera=function(mp){var pp,wp=this.json.cameras[mp],Ap=wp[wp.type];if(Ap)return wp.type==="perspective"?pp=new e$2.PerspectiveCamera(e$2.MathUtils.radToDeg(Ap.yfov),Ap.aspectRatio||1,Ap.znear||1,Ap.zfar||2e6):wp.type==="orthographic"&&(pp=new e$2.OrthographicCamera(-Ap.xmag,Ap.xmag,Ap.ymag,-Ap.ymag,Ap.znear,Ap.zfar)),wp.name&&(pp.name=wp.name),Rp(pp,wp),Promise.resolve(pp);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Ip.prototype.loadSkin=function(mp){var pp=this.json.skins[mp],wp={joints:pp.joints};return pp.inverseBindMatrices===void 0?Promise.resolve(wp):this.getDependency("accessor",pp.inverseBindMatrices).then(function(Ap){return wp.inverseBindMatrices=Ap,wp})},Ip.prototype.loadAnimation=function(mp){for(var pp=this.json.animations[mp],wp=[],Ap=[],Sp=[],Cp=[],$p=[],Fp=0,jp=pp.channels.length;Fp<jp;Fp++){var kp=pp.channels[Fp],fp=pp.samplers[kp.sampler],yp=kp.target,Gp=yp.node!==void 0?yp.node:yp.id,Np=pp.parameters!==void 0?pp.parameters[fp.input]:fp.input,Xp=pp.parameters!==void 0?pp.parameters[fp.output]:fp.output;wp.push(this.getDependency("node",Gp)),Ap.push(this.getDependency("accessor",Np)),Sp.push(this.getDependency("accessor",Xp)),Cp.push(fp),$p.push(yp)}return Promise.all([Promise.all(wp),Promise.all(Ap),Promise.all(Sp),Promise.all(Cp),Promise.all($p)]).then(function(Qp){for(var Zp=Qp[0],im=Qp[1],nm=Qp[2],cm=Qp[3],em=Qp[4],om=[],tm=0,sm=Zp.length;tm<sm;tm++){var Bp=Zp[tm],rm=im[tm],lm=nm[tm],dm=cm[tm],hm=em[tm];if(Bp!==void 0){var ym;switch(Bp.updateMatrix(),Bp.matrixAutoUpdate=!0,rp[hm.path]){case rp.weights:ym=e$2.NumberKeyframeTrack;break;case rp.rotation:ym=e$2.QuaternionKeyframeTrack;break;case rp.position:case rp.scale:default:ym=e$2.VectorKeyframeTrack}var Mm=Bp.name?Bp.name:Bp.uuid,Em=dm.interpolation!==void 0?op[dm.interpolation]:e$2.InterpolateLinear,Dm=[];rp[hm.path]===rp.weights?Bp.traverse(function(Mp){Mp.isMesh===!0&&Mp.morphTargetInfluences&&Dm.push(Mp.name?Mp.name:Mp.uuid)}):Dm.push(Mm);var Sm=lm.array;if(lm.normalized){var Bm;if(Sm.constructor===Int8Array)Bm=1/127;else if(Sm.constructor===Uint8Array)Bm=1/255;else if(Sm.constructor==Int16Array)Bm=1/32767;else{if(Sm.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");Bm=1/65535}for(var Rm=new Float32Array(Sm.length),Cm=0,km=Sm.length;Cm<km;Cm++)Rm[Cm]=Sm[Cm]*Bm;Sm=Rm}for(Cm=0,km=Dm.length;Cm<km;Cm++){var zm=new ym(Dm[Cm]+"."+rp[hm.path],rm.array,Sm,Em);dm.interpolation==="CUBICSPLINE"&&(zm.createInterpolant=function(Mp){return new Ju(this.times,this.values,this.getValueSize()/3,Mp)},zm.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),om.push(zm)}}}var $m=pp.name?pp.name:"animation_"+mp;return new e$2.AnimationClip($m,void 0,om)})},Ip.prototype.loadNode=function(mp){var pp,wp=this.json,Ap=this.extensions,Sp=this,Cp=wp.meshReferences,$p=wp.meshUses,Fp=wp.nodes[mp];return(pp=[],Fp.mesh!==void 0&&pp.push(Sp.getDependency("mesh",Fp.mesh).then(function(jp){var kp;if(Cp[Fp.mesh]>1){var fp=$p[Fp.mesh]++;(kp=jp.clone()).name+="_instance_"+fp}else kp=jp;return Fp.weights!==void 0&&kp.traverse(function(yp){if(yp.isMesh)for(var Gp=0,Np=Fp.weights.length;Gp<Np;Gp++)yp.morphTargetInfluences[Gp]=Fp.weights[Gp]}),kp})),Fp.camera!==void 0&&pp.push(Sp.getDependency("camera",Fp.camera)),Fp.extensions&&Fp.extensions[Ru.KHR_LIGHTS_PUNCTUAL]&&Fp.extensions[Ru.KHR_LIGHTS_PUNCTUAL].light!==void 0&&pp.push(Sp.getDependency("light",Fp.extensions[Ru.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(pp)).then(function(jp){var kp;if((kp=Fp.isBone===!0?new e$2.Bone:jp.length>1?new e$2.Group:jp.length===1?jp[0]:new e$2.Object3D)!==jp[0])for(var fp=0,yp=jp.length;fp<yp;fp++)kp.add(jp[fp]);if(Fp.name&&(kp.userData.name=Fp.name,kp.name=e$2.PropertyBinding.sanitizeNodeName(Fp.name)),Rp(kp,Fp),Fp.extensions&&bp(Ap,kp,Fp),Fp.matrix!==void 0){var Gp=new e$2.Matrix4;Gp.fromArray(Fp.matrix),kp.applyMatrix4(Gp)}else Fp.translation!==void 0&&kp.position.fromArray(Fp.translation),Fp.rotation!==void 0&&kp.quaternion.fromArray(Fp.rotation),Fp.scale!==void 0&&kp.scale.fromArray(Fp.scale);return Sp.associations.set(kp,{type:"nodes",index:mp}),kp})},Ip.prototype.loadScene=function(){function mp(pp,wp,Ap,Sp){var Cp=Ap.nodes[pp];return Sp.getDependency("node",pp).then(function($p){return Cp.skin===void 0?$p:Sp.getDependency("skin",Cp.skin).then(function(jp){for(var kp=[],fp=0,yp=(Fp=jp).joints.length;fp<yp;fp++)kp.push(Sp.getDependency("node",Fp.joints[fp]));return Promise.all(kp)}).then(function(jp){return $p.traverse(function(kp){if(kp.isMesh){for(var fp=[],yp=[],Gp=0,Np=jp.length;Gp<Np;Gp++){var Xp=jp[Gp];if(Xp){fp.push(Xp);var Qp=new e$2.Matrix4;Fp.inverseBindMatrices!==void 0&&Qp.fromArray(Fp.inverseBindMatrices.array,16*Gp),yp.push(Qp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Fp.joints[Gp])}kp.bind(new e$2.Skeleton(fp,yp),kp.matrixWorld)}}),$p});var Fp}).then(function($p){wp.add($p);var Fp=[];if(Cp.children)for(var jp=Cp.children,kp=0,fp=jp.length;kp<fp;kp++){var yp=jp[kp];Fp.push(mp(yp,$p,Ap,Sp))}return Promise.all(Fp)})}return function(pp){var wp=this.json,Ap=this.extensions,Sp=this.json.scenes[pp],Cp=new e$2.Group;Sp.name&&(Cp.name=Sp.name),Rp(Cp,Sp),Sp.extensions&&bp(Ap,Cp,Sp);for(var $p=Sp.nodes||[],Fp=[],jp=0,kp=$p.length;jp<kp;jp++)Fp.push(mp($p[jp],Cp,wp,this));return Promise.all(Fp).then(function(){return Cp})}}(),_u}()),Wr=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(1,0,0),Math.PI/2);function Xr(_u){function $u(Ru){if(Ru.isMesh)return function(Vu){var Gu=new ft;Gu.geometry=Vu.geometry,Gu.geometry.computeVertexNormals(),Gu.geometry.computeBoundingBox(),Gu.geometry.computeBoundingSphere(),Gu.geometry.addGroup(0,Vu.geometry.index.count,0);var Uu=new Mt;return Uu.uniforms.map.value=Vu.material.map,Uu.uniforms.exposure.value=3.3,Uu.opacity=1,Vu.material.dispose(),Gu.material=[Uu],Gu.position.copy(Vu.position),Gu.quaternion.copy(Vu.quaternion),Gu.scale.copy(Vu.scale),Gu.matrix.compose(Gu.position,Gu.quaternion,Gu.scale),Gu}(Ru);if(Ru.isGroup){for(var Ou=function(Vu){var Gu=new gt$1;return Gu.position.copy(Vu.position),Gu.quaternion.copy(Vu.quaternion),Gu.scale.copy(Vu.scale),Gu.matrix.compose(Gu.position,Gu.quaternion,Gu.scale),Gu}(Ru),Fu=0;Fu<Ru.children.length;Fu++){var Nu=$u(Ru.children[Fu]);Ou.add(Nu)}return Ou}return new gt$1}return new Promise(function(Ru,Ou){var Fu,Nu=new r$3.Matrix4().fromArray(_u.computedTransform);if(((Fu=_u.tileset.asset)===null||Fu===void 0?void 0:Fu.gltfUpAxis)!=="Z"&&Nu.multiply(Wr),_u.content){var Vu=_u.content.gltfArrayBuffer,Gu=_u.contentUrl?_u.contentUrl.slice(0,_u.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Vu,Gu,function(Uu){var Hu=Uu.scene,Wu=new gt$1,Qu=$u(Hu);Qu.applyMatrix4(Nu),Wu.add(Qu),Ru(Wu)},function(Uu){Ou(new Error("error parsing gltf in tile ".concat(_u.id,": ").concat(Uu.message)))})}else Ru(new gt$1)})}function Yr(_u){_u.traverse(function($u){if($u instanceof ft){$u.geometry.dispose();for(var Ru=0,Ou=$u.material;Ru<Ou.length;Ru++){var Fu=Ou[Ru];Fu.uniforms.map&&Fu.uniforms.map.value&&(Fu.uniforms.map.value.dispose(),Fu.uniforms.map.value=null)}}})}function Zr(_u){return new r$3.Matrix4().fromArray([2*_u[0],2*_u[1],2*_u[2],0,2*_u[3],2*_u[4],2*_u[5],0,2*_u[6],2*_u[7],2*_u[8],0,0,0,0,1])}function Jr(_u){return new Tn(_u.toArray())}function $r(_u){var $u=_u.planes.map(function(Ru){return new kn(Ru.normal.toArray(),Ru.constant)});return new Fn($u)}var eo=new r$3.EdgesGeometry(new r$3.BoxBufferGeometry(1,1,1)),to$1=new r$3.LineBasicMaterial({color:new r$3.Color(1,1,0),transparent:!0});function io$1(_u){_u.updateMatrix(),_u.updateMatrixWorld(),_u.matrixWorld.getInverse(_u.matrixWorldInverse);var $u=new r$3.Matrix4().multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse);return new r$3.Frustum().setFromProjectionMatrix($u)}var no$1={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro=function(_u){function $u(Ru){Ru===void 0&&(Ru={});var Ou=_u.call(this)||this;return Ou.options=t$3.__assign(t$3.__assign({},no$1),Ru),Ou.clock=new r$3.Clock,Ou.timer=0,Ou.unloadTileQueue=[],Ou.nodes={},Ou.boundings={},Ou.nodeGroup=new r$3.Group,Ou.boundingGroup=new r$3.Group,Ou.add(Ou.nodeGroup),Ou.sseDenominator=null,Ou.lastCameraTransform=new r$3.Matrix4,Ou.lastCameraAspect=1,Ou.lastCameraFov=null,Ou.lastCamera=null,Ou.lastRenderer=null,Ou.enabled=!1,Ou}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"enable",{get:function(){return this.enabled},set:function(Ru){this.enabled!==Ru&&(this.enabled=Ru,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),$u.prototype.load=function(Ru){var Ou=this,Fu=Ru.tileset_url;Ru.tileset_url_md5;var Nu=Ru.b3md_mappings_url;Ru.b3md_mappings_url_md5;var Vu={modelMatrix:Jr(new r$3.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(Wu){var Qu=function(qu){var Ku=qu.boundingVolume,Yu=new r$3.LineSegments(eo,to$1);return Yu.applyMatrix4(Zr(Ku.halfAxes)),Yu.position.set(Ku.center[0],Ku.center[1],Ku.center[2]),Yu}(Wu);return Qu.visible=!1,Ou.boundings[Wu.id]=Qu,Ou.boundingGroup.add(Qu),Qu.updateMatrixWorld(!0),Wu.type==="SCENEGRAPH"||Wu.type==="MESH"?Xr(Wu).then(function(qu){Ou.tileset===void 0?Yr(qu):(qu.visible=!1,Ou.nodes[Wu.id]=qu,Ou.nodeGroup.add(qu),Ou.options.onNodeCreated(qu),qu.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Ou.enabled&&Ou.tileset&&Ou.lastRenderer&&Ou.lastCamera&&(Ou.tileset.frameNumber++,Ou.tilesetUpdate(Ou.tileset,Ou.lastRenderer,Ou.lastCamera)),Ou.enabled||Ou.reset()},onTileUnload:function(Wu){Ou.unloadTileQueue.push(Wu)},onTileError:function(Wu,Qu){console.error("Tile error",Wu.id,Qu)},onTraversalComplete:function(Wu){return Wu},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Gu=Fu.split("/").slice(0,-1).join("/"),Uu=it$1(Fu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Wu){return JSON.parse(Wu.body)}).then(function(Wu){return jr(Wu,Gu)}),Hu=it$1(Nu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Wu){return JSON.parse(Wu.body)});Promise.all([Uu,Hu]).then(function(Wu){var Qu=Wu[0],qu=Wu[1];Qu.b3dmMapping=qu;var Ku=Ou.tileset=new qr(Qu,Vu),Yu=new r$3.Matrix4;if(Ku.root&&Ku.root.boundingVolume){var _c=Ku.root.boundingVolume,Ju=_c.halfAxes,Xu=_c.center;Yu.extractRotation(Zr(Ju)),Yu.setPosition(Xu[0],Xu[1],Xu[2])}Ku.modelMatrix.copy(Jr(new r$3.Matrix4().getInverse(Yu)))})},$u.prototype.update=function(Ru,Ou){this.lastCamera=Ou,this.lastRenderer=Ru,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Ou.matrixWorld.equals(this.lastCameraTransform)&&Ou.aspect===this.lastCameraAspect&&Ou.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Ou.matrixWorld),this.tilesetUpdate(this.tileset,Ru,Ou))))},$u.prototype.tilesetUpdate=function(Ru,Ou,Fu){this.sseDenominator&&Fu.aspect===this.lastCameraAspect&&Fu.fov===this.lastCameraFov||(this.sseDenominator=function(Ku){var Yu=Ku.aspect,_c=Ku.fov/180*Math.PI,Ju=Ku.aspect<=1?_c:2*Math.atan(Math.tan(.5*_c)/Yu);return 2*Math.tan(.5*Ju)}(Fu),this.lastCameraAspect=Fu.aspect,this.lastCameraFov=Fu.fov);var Nu,Vu={camera:{position:Fu.getWorldPosition(new r$3.Vector3).toArray(),direction:Fu.getWorldDirection(new r$3.Vector3).toArray(),up:Fu.up.toArray()},height:Ou.getSize(new r$3.Vector2).height,frameNumber:Ru.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io$1(Fu))};Ru.cache.reset(),Ru.traverser.traverse(Ru.root,Vu);for(var Gu=0,Uu=Ru.tiles;Gu<Uu.length;Gu++){var Hu=Uu[Gu],Wu=Hu.selected,Qu=Hu.id;this.nodes[Qu]&&this.nodes[Qu].visible!==Wu&&(this.nodes[Qu].visible=Wu,Wu&&(this.nodes[Qu].needsRender=!0)),this.boundings[Qu]&&this.boundings[Qu].visible!==Wu&&(this.boundings[Qu].visible=Wu)}for(;Nu=this.unloadTileQueue.pop();){if(Qu=Nu.id,this.nodes[Qu]){var qu=this.nodes[Qu];this.nodeGroup.remove(qu),Yr(qu),delete this.nodes[Qu]}this.boundings[Qu]&&(qu=this.boundings[Qu],this.boundingGroup.remove(qu),delete this.boundings[Qu])}},$u.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Ru=void 0;Ru=this.unloadTileQueue.pop();)if(Ru.contentState!=="UNLOADED"){var Ou=Ru.id;if(this.nodes[Ou]){var Fu=this.nodes[Ou];this.nodeGroup.remove(Fu),Yr(Fu),delete this.nodes[Ou]}this.boundings[Ou]&&(Fu=this.boundings[Ou],this.boundingGroup.remove(Fu),delete this.boundings[Ou])}for(var Nu=0,Vu=Object.keys(this.nodes);Nu<Vu.length;Nu++){Ou=Vu[Nu];var Gu=this.nodes[Ou];this.nodeGroup.remove(Gu),Yr(Gu),delete this.nodes[Ou]}for(var Uu=0,Hu=Object.keys(this.boundings);Uu<Hu.length;Uu++)Ou=Hu[Uu],Gu=this.boundings[Ou],this.boundingGroup.remove(Gu),delete this.boundings[Ou]}},$u}(At);function oo(_u){return _u==null}var so=function(_u,$u){$u===void 0&&($u=1e-4),$u=Math.max($u,Number.EPSILON);for(var Ru={},Ou=_u.getIndex(),Fu=_u.getAttribute("position"),Nu=Ou?Ou.count:Fu.count,Vu=0,Gu=Object.keys(_u.attributes),Uu={},Hu={},Wu=[],Qu=["getX","getY","getZ","getW"],qu=0,Ku=Gu.length;qu<Ku;qu++)Uu[Xc=Gu[qu]]=[],(ap=_u.morphAttributes[Xc])&&(Hu[Xc]=new Array(ap.length).fill().map(function(){return[]}));var Yu=Math.log10(1/$u),_c=Math.pow(10,Yu);for(qu=0;qu<Nu;qu++){var Ju=Ou?Ou.getX(qu):qu,Xu="",Zu=0;for(Ku=Gu.length;Zu<Ku;Zu++)for(var Xc=Gu[Zu],_h=(np=_u.getAttribute(Xc)).itemSize,ep=0;ep<_h;ep++)Xu+="".concat(~~(np[Qu[ep]](Ju)*_c),",");if(Xu in Ru)Wu.push(Ru[Xu]);else{for(Zu=0,Ku=Gu.length;Zu<Ku;Zu++){Xc=Gu[Zu];var np=_u.getAttribute(Xc),ap=_u.morphAttributes[Xc],lp=(_h=np.itemSize,Uu[Xc]),up=Hu[Xc];for(ep=0;ep<_h;ep++){var _f=Qu[ep];if(lp.push(np[_f](Ju)),ap)for(var tp=0,ip=ap.length;tp<ip;tp++)up[tp].push(ap[tp][_f](Ju))}}Ru[Xu]=Vu,Wu.push(Vu),Vu++}}var rp=_u.clone();for(qu=0,Ku=Gu.length;qu<Ku;qu++){Xc=Gu[qu];var op=_u.getAttribute(Xc),sp=new op.array.constructor(Uu[Xc]);if(np=new r$3.BufferAttribute(sp,op.itemSize,op.normalized),rp.setAttribute(Xc,np),Xc in Hu)for(Zu=0;Zu<Hu[Xc].length;Zu++){var cp=_u.morphAttributes[Xc][Zu],hp=(sp=new cp.array.constructor(Hu[Xc][Zu]),new r$3.BufferAttribute(sp,cp.itemSize,cp.normalized));rp.morphAttributes[Xc][Zu]=hp}}return rp.setIndex(Wu),rp};function ao(_u){var $u;return new(($u=r$3.Triangle).bind.apply($u,t$3.__spreadArray([void 0],_u.map(function(Ru){return new r$3.Vector3(Ru.x,Ru.y,Ru.z)}),!1)))}var lo$1={at3d:function(_u,$u){for(var Ru=Ni($u.textureOptions,_u.textures.length),Ou={},Fu=0,Nu=_u.textures;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Ou[Vu]=Li(Vu,Ru,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Gu){return ti$1(Gu.body)}).then(function(Gu){return jt(function(){for(var Uu,Hu={chunks:[]},Wu=0,Qu=Gu;Wu<Qu.length;Wu++){var qu=Qu[Wu],Ku=Ti.decode(qu);Ku.chunks.length&&(Uu=Hu.chunks).push.apply(Uu,Ku.chunks)}return Hu})}).then(function(Gu){return jt(function(){return Oi$1(Gu,_u.textureBase,_u.textures.slice(),Ru,Ou,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},pbm:function(_u,$u){for(var Ru=Ni($u.textureOptions,_u.textures.length),Ou={},Fu=0,Nu=_u.textures;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Ou[Vu]=Li(Vu,Ru,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Gu){return jt(function(){var Uu=new Uint8Array(Gu.body);return Ti.decode(Uu)})}).then(function(Gu){return jt(function(){return Oi$1(Gu,_u.textureBase,_u.textures.slice(),Ru,Ou,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},dome:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Ru){return ji$1(new Uint8Array(Ru.body),_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})},domez:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Ru){return ti$1(Ru.body)}).then(function(Ru){var Ou=Ru.reduce(function(Vu,Gu){return Vu+Gu.length},0),Fu=new Uint8Array(Ou),Nu=0;return Ru.forEach(function(Vu){Fu.set(Vu,Nu),Nu+=Vu.length}),Fu}).then(function(Ru){return ji$1(Ru,_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})}},uo$1=function(_u){function $u(Ru){Ru===void 0&&(Ru={});var Ou=_u.call(this)||this;return Ou.empty=!0,Ou.name="model",Ou.loaded=!1,Ou.bvhs=Object.assign([],{loaded:!1}),Ou.bounding=new r$3.Box3,Ou.shownFloor=null,Ou.floorLength=0,Ou.requestProxy=Ru.requestProxy,Ou.networkSubscribe=Ru.networkSubscribe,Ou.allowHosts=Ru.allowHosts,Ou.renderOrder=-3,Ou}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Ru){this.tiledModel&&(this.tiledModel.enable=Ru)},enumerable:!1,configurable:!0}),$u.prototype.getEdges=function(Ru){var Ou;if(Ru===void 0&&(Ru=30/180*Math.PI),!this.originModel)return[];for(var Fu=Math.cos(Ru),Nu=[],Vu=0,Gu=this.originModel.children;Vu<Gu.length;Vu++){var Uu=Gu[Vu];if(Uu instanceof ft){for(var Hu={},Wu=["a","b","c"],Qu=so(Uu.geometry),qu=Qu.getAttribute("position").array,Ku=((Ou=Qu.getIndex())===null||Ou===void 0?void 0:Ou.array)||[],Yu=[],_c=[],Ju=0,Xu=qu.length;Ju<Xu;Ju+=3)Yu.push(new r$3.Vector3(qu[Ju],qu[Ju+1],qu[Ju+2]));for(Ju=0,Xu=Ku.length;Ju<Xu;Ju+=3){var Zu=Ku[Ju],Xc=Ku[Ju+1],_h=Ku[Ju+2],ep=new r$3.Vector3().crossVectors(Yu[Xc].clone().sub(Yu[Zu]),Yu[_h].clone().sub(Yu[Zu])).normalize();_c.push({a:Zu,b:Xc,c:_h,normal:ep})}for(Ju=0,Xu=_c.length;Ju<Xu;Ju++)for(var np=_c[Ju],ap=0;ap<3;ap++){var lp=np[Wu[ap]],up=np[Wu[(ap+1)%3]],_f=[Math.min(lp,up),Math.max(lp,up)];Hu[tp=_f[0]+"-"+_f[1]]===void 0?Hu[tp]={index1:_f[0],index2:_f[1],face1:Ju}:Hu[tp].face2=Ju}for(var tp in Hu){var ip=Hu[tp];if(ip.face2===void 0||_c[ip.face1].normal.dot(_c[ip.face2].normal)<=Fu){var rp=Yu[ip.index1],op=Yu[ip.index2];Nu.push(new r$3.Line3(rp,op))}}Qu.dispose(),Yu.length=0,_c.length=0}}return Nu},$u.prototype.hasFloors=function(){return this.hasFloors_()},$u.prototype.hasFloors_=function(){var Ru=[];return this.traverse(function(Ou){Ou instanceof ft&&(Ru[Ou.floorIndex]=!0)}),Ru.length},$u.prototype.show=function(){for(var Ru,Ou,Fu=[],Nu=0;Nu<arguments.length;Nu++)Fu[Nu]=arguments[Nu];var Vu=this.shownFloor,Gu=null,Uu=(Ru=Fu[1])!==null&&Ru!==void 0?Ru:.1,Hu=Fu.length!==0;this.shownFloor=Gu=Hu?Fu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)}),!((Ou=this.tiledModel)===null||Ou===void 0)&&Ou.enable?this.b3dmShow(Vu,Gu):this.at3dShow(Vu,Gu,Uu)},$u.prototype.at3dShow=function(Ru,Ou,Fu){this.traverse(function(Nu){Nu instanceof ft&&Nu.material.forEach(function(Vu){Ou===null||Ou===Nu.floorIndex?Vu.opacity=1*Vu.originOpacity:Vu.opacity=Vu.originOpacity*Fu})}),Ru!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},$u.prototype.b3dmShow=function(Ru,Ou){var Fu,Nu;if(!((Nu=(Fu=this.tiledModel)===null||Fu===void 0?void 0:Fu.tileset)===null||Nu===void 0)&&Nu.floorInfo){if(typeof Ou=="number"&&Ou>=0&&Ou<this.tiledModel.tileset.floorInfo.length){var Vu=this.tiledModel.tileset.floorInfo,Gu=-Vu[Ou].ground,Uu=Vu[Ou].height+Gu;this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(Gu,Uu,0)})}else this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)});Ru!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},$u.prototype.intersectRaycaster=function(Ru,Ou){var Fu=Ru.ray,Nu=Fu.origin,Vu=Fu.direction;if(oo(Ou))if(oo(this.shownFloor)){var Gu=this.floorLength;Ou=[];for(var Uu=-1;Uu<Gu;Uu++)Ou.push(Uu)}else Ou=[this.shownFloor];var Hu=[],Wu=[];Array.isArray(Ou)?Wu.push.apply(Wu,Ou):Wu.push(Ou);for(var Qu=function(_c){var Ju=qu.bvhs&&qu.bvhs[_c];if(Ju){var Xu=new Ot$1(Nu.x,Nu.y,Nu.z),Zu=new Ot$1(Vu.x,Vu.y,Vu.z);(Xc=Ju.intersectRay(Xu,Zu,!0).map(function(ep){var np=ep.intersectionPoint,ap=ep.triangle,lp=new r$3.Vector3(np.x,np.y,np.z);return{point:lp,face:{normal:ao(ap).getNormal(new r$3.Vector3)},distance:Nu.distanceTo(lp)}})).length&&Hu.push.apply(Hu,Xc)}else if(qu.originModel){var Xc,_h=[];qu.originModel.traverse(function(ep){ep instanceof ft&&ep.floorIndex===_c&&_h.push(ep)}),(Xc=Ru.intersectObjects(_h).map(function(ep){return{face:ep.face?{normal:ep.face.normal}:void 0,point:ep.point,distance:ep.distance}})).length&&Hu.push.apply(Hu,Xc)}},qu=this,Ku=0,Yu=Wu;Ku<Yu.length;Ku++)Qu(Yu[Ku]);return Hu.filter(function(_c){var Ju=_c.distance;return Ju<=Ru.far&&Ju>=Ru.near}).sort(function(_c,Ju){return _c.distance-Ju.distance})},$u.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Ru=[];this.originModel.traverse(function(np){np instanceof ft&&(Ru[np.floorIndex]=Ru[np.floorIndex]||[],Ru[np.floorIndex].push(np.geometry))}),this.bvhs.length=0;for(var Ou=0,Fu=Ru;Ou<Fu.length;Ou++){var Nu=Fu[Ou],Vu=0;if(Nu){for(var Gu=0,Uu=Nu;Gu<Uu.length;Gu++){var Hu=0;Hu=(Yu=Uu[Gu]).index?Yu.index.array.length:Yu.attributes.position.array.length/3,Vu+=3*Math.floor(Hu/3)}for(var Wu=new Float32Array(3*Vu),Qu=0,qu=0,Ku=Nu;qu<Ku.length;qu++){var Yu,_c=(Yu=Ku[qu]).attributes.position.array,Ju=Yu.index?Yu.index.array:null;if(Ju){for(var Xu=3*Math.floor(Ju.length/3),Zu=0,Xc=void 0,_h=void 0;Zu<Xu;Zu++)Xc=3*(Qu+Zu),_h=3*Ju[Zu],Wu[Xc]=_c[_h],Wu[Xc+1]=_c[_h+1],Wu[Xc+2]=_c[_h+2];Qu+=Xu}else{for(Xu=3*Math.floor(_c.length/3/3),Zu=0,Xc=void 0,_h=void 0;Zu<Xu;Zu++)_h=3*Zu,Wu[Xc=3*(Qu+Zu)]=_c[_h],Wu[Xc+1]=_c[_h+1],Wu[Xc+2]=_c[_h+2];Qu+=Xu}}var ep=new qt$1().create(Wu).splitNode(50);this.bvhs.push(ep)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},$u.prototype.load=function(Ru,Ou){var Fu=this;if(Ou===void 0&&(Ou={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Nu=function(Gu,Uu){if(Uu===void 0&&(Uu=[]),/^blob\:/.test(Gu))return"at3d";var Hu=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Gu);if(!Hu)return"";for(var Wu=0,Qu=String(Hu[1]).trim().split(".").slice(1).reverse();Wu<Qu.length;Wu++){var qu=Qu[Wu],Ku=Uu.indexOf(qu);if(Ku>=0)return Uu[Ku]}return""}(Ru.file,Object.keys(lo$1)),Vu=lo$1[Nu];if(!Vu)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Nu,") does not support."));return this.name=Ru.file,Vu(Ru,{textureOptions:Ou,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Gu){var Uu=Gu.objects,Hu=Gu.texturePromise;Fu.bounding.makeEmpty();var Wu=Fu.originModel=new At;Wu.renderOrder=-3;for(var Qu=0,qu=Uu;Qu<qu.length;Qu++)(Ju=qu[Qu]).traverse(function(Zu){if(Zu instanceof ft){var Xc=Zu.geometry;Xc.boundingBox||Xc.computeBoundingBox(),Xc.boundingSphere||Xc.computeBoundingSphere(),Fu.bounding.union(Xc.boundingBox)}}),Wu.add(Ju);for(var Ku=Fu.bounding.getCenter(new r$3.Vector3),Yu=0,_c=Uu;Yu<_c.length;Yu++){var Ju;(Ju=_c[Yu]).traverse(function(Zu){if(Zu instanceof ft)for(var Xc=0,_h=Zu.material;Xc<_h.length;Xc++)_h[Xc].uniforms.modelCenter.value=Ku})}if(Fu.add(Wu),Fu.floorLength=Fu.hasFloors_(),Fu.empty=!1,Fu.loaded=!0,Ru.tiles&&Ru.tiles.tileset_url&&Ru.tiles.b3md_mappings_url){var Xu=Fu.tiledModel=new ro({onNodeCreated:function(Zu){var Xc=Wu.getMaterial();Xc&&(Zu.setMaterial(Xc),Zu.renderOrder=-3),Zu.traverse(function(_h){if(_h instanceof ft)for(var ep=0,np=_h.material;ep<np.length;ep++)np[ep].uniforms.modelCenter.value=Ku})},allowHosts:Fu.allowHosts,networkSubscribe:Fu.networkSubscribe,requestProxy:Fu.requestProxy});Xu.renderOrder=-3,Fu.add(Xu),Xu.load(Ru.tiles)}Ru.bvh&&Fu.buildBVH(),jt(function(){Fu.emit("geometryLoaded"),Hu.then(function(){Fu.emit("materialLoaded"),Fu.emit("loaded")})})}).catch(function(Gu){return Fu.name="",Fu.emit("error",Gu),Promise.reject(Gu)})},$u.prototype.update=function(Ru,Ou){if(this.originModel){var Fu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Ru,Ou);var Nu=this.tiledModel.tileset.root;Nu.content&&Nu.contentState==="READY"&&Fu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Fu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},$u.prototype.dispose=function(){this.off();var Ru=this.originModel,Ou=this.tiledModel;if(Ou&&(Ou.enable=!1,Ou.reset()),Ru)for(Ru.disposeGeometry(),Ru.disposeMaterial();Ru.children.length;)Ru.remove(Ru.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},$u}(At);Object.assign(uo$1.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho$1(_u,$u,Ru){return _u<$u?$u:_u>Ru?Ru:_u}function co$1(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=[];_u=_u.map(function(Gu){return(Gu!=null?Gu:"").trim()}).filter(function(Gu){return Gu.length>0&&!/^\/+$/.test(Gu)});for(var Ou=0;Ou<_u.length;Ou++){var Fu=Ou===0,Nu=Ou===_u.length-1,Vu=_u[Ou];Fu||(Vu=Vu.replace(/^\/+/,"")),Nu||(Vu=Vu.replace(/\/+$/,"")),Ru.push(Vu)}return Ru.join("/")}function po$1(_u,$u){if(_u===$u)return!0;if(_u&&$u&&typeof _u=="object"&&typeof $u=="object"){if(_u.constructor!==$u.constructor)return!1;var Ru,Ou,Fu;if(Array.isArray(_u)){if((Ru=_u.length)!=$u.length)return!1;for(Ou=Ru;Ou--!=0;)if(!po$1(_u[Ou],$u[Ou]))return!1;return!0}if(_u.constructor===RegExp)return _u.source===$u.source&&_u.flags===$u.flags;if(_u.valueOf!==Object.prototype.valueOf)return _u.valueOf()===$u.valueOf();if(_u.toString!==Object.prototype.toString)return _u.toString()===$u.toString();if((Ru=(Fu=Object.keys(_u)).length)!==Object.keys($u).length)return!1;for(Ou=Ru;Ou--!=0;)if(!Object.prototype.hasOwnProperty.call($u,Fu[Ou]))return!1;for(Ou=Ru;Ou--!=0;){var Nu=Fu[Ou];if(!po$1(_u[Nu],$u[Nu]))return!1}return!0}return _u!=_u&&$u!=$u}function fo$1(_u){return typeof _u=="number"}function Ao$1(_u){return(_u&_u-1)==0&&_u!==0}var go$1=function(){return new Error("Invalid input.")},mo$1=function(){return new Error("Invalid certificate.")},vo$1=function(){return new Error("Invalid signature.")};function yo(_u,$u){$u===void 0&&($u=!1);var Ru=typeof _u;if(Ru==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Ou="[",Fu=_u.length-1,Nu=0;Nu<Fu;Nu++)Ou+=yo(_u[Nu],!1)+",";return Fu>-1&&(Ou+=yo(_u[Nu],!1)),Ou+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return yo(_u.toJSON(),$u);var Vu=Object.keys(_u).sort(),Gu=Vu.length;for(Ou="",Nu=0;Nu<Gu;){var Uu=Vu[Nu],Hu=yo(_u[Uu],!0);Hu!==void 0&&(Nu&&Ou!==""&&(Ou+=","),Ou+=JSON.stringify(Uu)+":"+Hu),Nu++}return"{"+Ou+"}"}switch(Ru){case"function":case"undefined":return $u?void 0:null;case"number":return 0;default:return isFinite(_u)?_u:null}}function bo$1(_u){return String(yo(_u,!1))}function xo$1(_u){var $u,Ru,Ou;if(Array.isArray(_u)){var Fu,Nu,Vu=void 0;if(_u.length<=0)return go$1();for(var Gu=function(_h){var ep=xo$1(_u[_h]);if(ep instanceof Error)return{value:ep};if(Vu){if(Vu!==ep.issuer)return{value:mo$1()}}else Vu=ep.issuer;Fu?ep.expire.getTime()<Fu.getTime()&&(Fu=ep.expire):Fu=ep.expire,Nu=Nu?Nu.filter(function(np){return ep.allowHosts.indexOf(np)!==-1}):ep.allowHosts},Uu=0;Uu<_u.length;Uu++){var Hu=Gu(Uu);if(typeof Hu=="object")return Hu.value}return He({issuer:Vu,expire:Fu,allowHosts:Nu})}var Wu=JSON.parse(_u),Qu=typeof location!="undefined"?location.hostname:"",qu=Date.now();if(typeof Wu!="object")return go$1();var Ku=new Date(typeof Wu.expire_at=="string"&&/^\d+$/.test(Wu.expire_at)?Number(Wu.expire_at):Wu.expire_at),Yu=Array.isArray(Wu.allow_hosts)?Wu.allow_hosts:[];if(Qu.length===0||ze$1(Qu)||je$1.filter(function(_h){return Ke(_h,Qu)}).length>0){var _c=String(($u=Wu.certificate)!==null&&$u!==void 0?$u:"");if(_c){var Ju=new Be;return Ju.readCertPEM(_c),He({issuer:Ju.getSubjectString(),expire:Ku,allowHosts:Yu})}return He({issuer:"none",expire:Ku,allowHosts:Yu})}var Xu=String((Ru=Wu.certificate)!==null&&Ru!==void 0?Ru:"");if(!Xu)return mo$1();var Zu=new Be;Zu.readCertPEM(Xu);var Xc=String((Ou=Wu._signature)!==null&&Ou!==void 0?Ou:"");return Xc?function(_h,ep,np){var ap=new Be;if(typeof np=="string"?ap.readCertPEM(np):ap.readCertHex(np.hex),De(ap)===!1)return!1;var lp=new X$2;return lp.readCertPubKeyHex(ap.hex,6),!!lp.verify(_h,O$2(ep))}(bo$1(function(_h,ep){for(var np={},ap=0,lp=Object.keys(_h);ap<lp.length;ap++){var up=lp[ap];ep.indexOf(up)===-1&&(np[up]=_h[up])}return np}(Wu,["_signature"])),Xc,Zu)===!1?vo$1():qu<Ku.getTime()?Yu.filter(function(_h){return Ke(_h,Qu)}).length===0?function(_h){return new Error("host(".concat(JSON.stringify(_h),") is not allowed."))}(Qu):He({issuer:Zu.getSubjectString(),expire:Ku,allowHosts:Yu}):function(_h){return new Error("date(".concat(_h.toString(),") expired."))}(Ku):vo$1()}var wo=new WeakMap,Eo=function(){function _u(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return _u.prototype.toJSON=function(){return this.raw.works},_u.parse=Co$1,_u}();function Mo(_u){return _u==null?"null":Array.isArray(_u)?"array":typeof _u=="object"?"dict":"value"}function Io$1(_u,$u){var Ru=Mo(_u),Ou=Mo($u);if(Ou==="null")return _u;if(Ou==="value")return $u;if(Ou!==Ru)return JSON.parse(JSON.stringify($u));if(Ou==="array")for(var Fu=0;Fu<$u.length;Fu++)_u[Fu]=Io$1(_u[Fu],$u[Fu]);else if(Ou==="dict")for(var Nu in $u)_u[Nu]=Io$1(_u[Nu],$u[Nu]);return _u}function So$1(_u,$u,Ru){for(var Ou,Fu=JSON.stringify($u),Nu=[],Vu=0,Gu=[].concat(_u);Vu<Gu.length;Vu++){var Uu=Gu[Vu];Uu instanceof Eo?Nu.push.apply(Nu,Uu.raw.works):typeof Uu=="string"?Nu.push(Uu):Nu.push(JSON.stringify(Uu))}var Hu=xo$1(Nu);if(Hu instanceof Error)return Hu;$u=JSON.parse(Fu),_u=Nu.map(function(kp){return JSON.parse(kp)}).reduce(function(kp,fp){return Io$1(kp,fp)});var Wu=new Eo;if(Hu instanceof Error)return Hu;Wu.issuer=Hu.issuer,Wu.expire=Hu.expire,Wu.allowHosts=Hu.allowHosts,Wu.raw={works:Nu,options:Fu};var Qu=(Ou=_u.base_url)!==null&&Ou!==void 0?Ou:"";Qu&&Qu[Qu.length-1]!=="/"&&(Qu+="/");var qu=function(kp,fp){return kp.indexOf(fp)===0},Ku=function(kp,fp){var yp,Gp=kp;if($u.jsonp===!0){Gp=kp.replace(/([\?\#].*)?$/i,"");var Np=Te("".concat(Gp)).slice(0,7);Gp="".concat(Gp,".").concat(Np,".jsonp")}if($u.shortPath===!0){var Xp=Gp.replace(Qu,"").split("."),Qp=(yp=Xp.shift())!==null&&yp!==void 0?yp:"",Zp=Xp.join(".");Gp=co$1(Qu,Te(Qp))+(Zp?"."+Zp:"")}var im=Gp.replace(Qu,"");return $u.baseURL&&(Gp=co$1($u.baseURL,im)),Ru&&Ru(kp,Gp,im,fp),Gp},Yu=function(kp,fp){var yp,Gp,Np,Xp,Qp,Zp,im=kp;if(!Fi(kp)){var nm=(Zp=(Xp=(Gp=(yp=_u.panorama)===null||yp===void 0?void 0:yp.pano_high_cube_base_url)!==null&&Gp!==void 0?Gp:(Np=_u.panorama)===null||Np===void 0?void 0:Np.pano_cube_base_url)!==null&&Xp!==void 0?Xp:(Qp=_u.panorama)===null||Qp===void 0?void 0:Qp.base_url)!==null&&Zp!==void 0?Zp:"";nm&&(nm=co$1(nm,String(fp))),im=co$1(nm,im)}return Fi(im)||(im=co$1(Qu,im)),qu(im,Qu)||console.warn("".concat(im," is not start with base_url(").concat(Qu,").")),Ku(im,"panorama")},_c=function(kp){var fp=kp;return Fi(fp)||(fp=co$1(Qu,kp)),qu(fp,Qu)||console.warn("".concat(fp," is not start with base_url(").concat(Qu,").")),Ku(fp,"model")},Ju=function(kp,fp){fp===void 0&&(fp="");var yp=kp;return Fi(yp)||(yp=co$1(fp,yp)),Fi(yp)||(yp=co$1(Qu,yp)),qu(yp,Qu)||console.warn("".concat(yp," is not start with base_url(").concat(Qu,").")),Ku(yp,"texture")};if(Hu instanceof Error||(Wu.workCode=String(_u.work_code||_u.code||_u.vr_code||_u.workCode),Wu.name=String(_u.name),Hu instanceof Error))return Hu;if(_u.model){var Xu={bvh:!0,async:!1,textureBase:"",textures:[]};typeof $u.modelBvh=="boolean"?Xu.bvh=$u.modelBvh:typeof _u.model.bvh=="boolean"?Xu.bvh=_u.model.bvh:typeof _u.bvh=="boolean"&&(Xu.bvh=_u.bvh),_u.model.file?Xu.file=_c(_u.model.file):_u.model.file_url&&(Xu.file=_c(_u.model.file_url)),_u.model.textureBase?Xu.textureBase=_u.model.textureBase:_u.model.material_base_url&&(Xu.textureBase=_u.model.material_base_url),Array.isArray(_u.model.textures)?Xu.textures=_u.model.textures.map(function(kp){return Ju(kp,Xu.textureBase)}):Array.isArray(_u.model.material_textures)&&(Xu.textures=_u.model.material_textures.map(function(kp){return Ju(kp,Xu.textureBase)})),_u.model.tiles&&(Xu.tiles=_u.model.tiles),Xu.file&&(Wu.model=Xu)}if(Hu instanceof Error)return Hu;if(_u.observers&&Array.isArray(_u.observers)){var Zu=[];_u.panorama&&(Array.isArray(_u.panorama)?Zu=_u.panorama:Array.isArray(_u.panorama.list)?Zu=_u.panorama.list:Array.isArray(_u.panorama.info)&&(Zu=_u.panorama.info));for(var Xc=0;Xc<_u.observers.length;Xc++){var _h={},ep=_u.observers[Xc];if(!ep)break;var np=Zu[Xc];if(!np)break;ep=Object.assign({},ep,np,{active:ep.active!==!1&&np.active!==!1}),_h.panoIndex=Xc,_h.active=ep.active!==!1,_h.loadable=ep.loadable===!0,_h.images={up:Yu(ep.images?ep.images.up:ep.up,Xc),down:Yu(ep.images?ep.images.down:ep.down,Xc),right:Yu(ep.images?ep.images.right:ep.right,Xc),left:Yu(ep.images?ep.images.left:ep.left,Xc),front:Yu(ep.images?ep.images.front:ep.front,Xc),back:Yu(ep.images?ep.images.back:ep.back,Xc)};var ap=ep.images?ep.images.depth:ep.depth;ap&&(_h.images.depth=Yu(ap,Xc));var lp=ep.images?ep.images.luminance:ep.luminance;lp&&(_h.images.luminance={up:Yu(lp.up,Xc),down:Yu(lp.down,Xc),right:Yu(lp.right,Xc),left:Yu(lp.left,Xc),front:Yu(lp.front,Xc),back:Yu(lp.back,Xc)});var up=ep.images?ep.images.tiles:ep.tiles;if(up){for(var _f=[],tp=function(kp){var fp=kp.match(/\/cube_(\d+)\//);if(fp){var yp=Number(fp[1]);if(Ao$1(yp))return yp}return!1},ip=function(kp,fp){return kp.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(fp,"/")})},rp=0,op=up;rp<op.length;rp++){var sp=op[rp];if(typeof sp=="number"){var cp=sp,hp=tp(_h.images.front);if(hp===!1)continue;if((Ip=Math.max(hp,512*Math.pow(2,cp)))>2048){var dp=ip(_h.images.up,Ip),xp=ip(_h.images.down,Ip),bp=ip(_h.images.right,Ip),Rp=ip(_h.images.left,Ip),Tp=ip(_h.images.front,Ip),Up=ip(_h.images.back,Ip);_f.push({level:cp,size:Ip,up:dp,down:xp,right:bp,left:Rp,front:Tp,back:Up})}else dp=_h.images.up,xp=_h.images.down,bp=_h.images.right,Rp=_h.images.left,Tp=_h.images.front,Up=_h.images.back,_f.push({level:cp,size:Ip,up:dp,down:xp,right:bp,left:Rp,front:Tp,back:Up})}else{var Ip;if(typeof(cp=sp.level)!="number"||typeof(Ip=sp.size)!="number")continue;dp=Yu(sp.up,Xc),xp=Yu(sp.down,Xc),bp=Yu(sp.right,Xc),Rp=Yu(sp.left,Xc),Tp=Yu(sp.front,Xc),Up=Yu(sp.back,Xc),_f.push({level:cp,size:Ip,up:dp,down:xp,right:bp,left:Rp,front:Tp,back:Up})}}_f.sort(function(kp,fp){return kp.level-fp.level}),_h.images.tiles=_f}if(ep.position instanceof r$3.Vector3)_h.position=ep.position.clone();else{if(!Array.isArray(ep.position))break;_h.position=new r$3.Vector3().fromArray(ep.position)}if(ep.standingPosition instanceof r$3.Vector3)_h.standingPosition=ep.standingPosition.clone();else if(Array.isArray(ep.standingPosition))_h.standingPosition=new r$3.Vector3().fromArray(ep.standingPosition);else if(ep.standing_position instanceof r$3.Vector3)_h.standingPosition=ep.standing_position.clone();else{if(!Array.isArray(ep.standing_position))break;_h.standingPosition=new r$3.Vector3().fromArray(ep.standing_position)}if(ep.quaternion instanceof r$3.Quaternion)_h.quaternion=ep.quaternion.clone();else if(Array.isArray(ep.quaternion))_h.quaternion=new r$3.Quaternion().fromArray(ep.quaternion);else{if(!ep.quaternion)break;var Vp=ep.quaternion,Lp=Vp.x,mp=Vp.y,pp=Vp.z,wp=Vp.w;_h.quaternion=new r$3.Quaternion(Lp,mp,pp,wp)}if(Array.isArray(ep.accessibleNodes)?_h.accessibleNodes=ep.accessibleNodes.slice():Array.isArray(ep.accessible_nodes)&&(_h.accessibleNodes=ep.accessible_nodes.slice()),Array.isArray(ep.visibleNodes)?_h.visibleNodes=ep.visibleNodes.slice():Array.isArray(ep.visible_nodes)&&(_h.visibleNodes=ep.visible_nodes.slice()),fo$1(ep.floorIndex)?_h.floorIndex=ep.floorIndex:fo$1(ep.floor_index)?_h.floorIndex=ep.floor_index:_h.floorIndex=0,ep.video){var Ap={};typeof ep.video.source=="string"&&(Ap.source=ep.video.source),ep.video.matrix instanceof r$3.Matrix4?Ap.matrix=ep.video.matrix.clone():Array.isArray(ep.video.matrix)&&(Ap.matrix=new r$3.Matrix4().fromArray(ep.video.matrix)),ep.video.size instanceof r$3.Vector2?Ap.size=ep.video.size.clone():Array.isArray(ep.video.size)&&(Ap.size=new r$3.Vector2().fromArray(ep.video.size)),Ap.source&&Ap.matrix&&Ap.size&&(_h.video=Ap)}Wu.observers[Xc]=_h}}if(Hu instanceof Error)return Hu;for(var Sp=0,Cp=Wu.observers;Sp<Cp.length;Sp++){if((_h=Cp[Sp]).accessibleNodes)_h.accessibleNodes=_h.accessibleNodes.filter(function(kp){return kp<Wu.observers.length});else{_h.accessibleNodes=[];for(var $p=0;$p<Wu.observers.length;$p++)Wu.observers[$p]!==_h&&_h.accessibleNodes.push($p)}if(_h.visibleNodes)_h.visibleNodes=_h.visibleNodes.filter(function(kp){return kp<Wu.observers.length});else for(_h.visibleNodes=[],$p=0;$p<Wu.observers.length;$p++)Wu.observers[$p]!==_h&&_h.visibleNodes.push($p)}if(Hu instanceof Error)return Hu;if(_u.initial)if(_u.initial.mode!=="Floorplan"&&_u.initial.mode!=="Topview"&&_u.initial.mode!=="Panorama"&&_u.initial.mode!=="VRPanorama"&&_u.initial.mode!=="Model"&&_u.initial.mode!=="DepthPanorama"||(Wu.initial.mode=_u.initial.mode),fo$1(_u.initial.latitude)&&(Wu.initial.latitude=_u.initial.latitude),fo$1(_u.initial.longitude)?Wu.initial.longitude=_u.initial.longitude:fo$1(_u.initial.heading)&&(Wu.initial.longitude=-(360*(_u.initial.heading-.25)+90)/180*Math.PI),fo$1(_u.initial.fov)&&(Wu.initial.fov=_u.initial.fov),fo$1(_u.initial.panoIndex)){var Fp=Wu.observers.length>0?Wu.observers.length-1:0;Wu.initial.panoIndex=ho$1(_u.initial.panoIndex,0,Fp)}else fo$1(_u.initial.pano_index)?(Fp=Wu.observers.length>0?Wu.observers.length-1:0,Wu.initial.panoIndex=ho$1(_u.initial.pano_index,0,Fp)):fo$1(_u.initial.pano)&&(Fp=Wu.observers.length>0?Wu.observers.length-1:0,Wu.initial.panoIndex=ho$1(_u.initial.pano,0,Fp));if(Hu instanceof Error)return Hu;var jp=He(Wu);return wo.set(jp,{works:Nu,options:Fu}),jp}function Co$1(_u,$u,Ru){typeof _u=="string"&&_u.trim()[0]==="{"&&(_u=JSON.parse(_u));var Ou=wo.get(_u);if(Ou){if($u&&!po$1(JSON.parse(Ou.options),$u))throw new Error("[PARSE FAILED]: work is parsed with different options.");return _u}var Fu=So$1(_u,$u!=null?$u:{},Ru);if(Fu instanceof Error)throw new Error("[PARSE FAILED]: "+Fu.message);return Fu}function Bo(_u,$u,Ru){return _u+($u-_u)*Ru}function To$1(_u,$u){var Ru=$u[1]-$u[0];return _u<$u[0]?To$1(_u+Ru,$u):_u>=$u[1]?To$1(_u-Ru,$u):_u}function Po(_u,$u,Ru,Ou){return Ou?function(Fu,Nu,Vu,Gu){var Uu=Gu[1]-Gu[0];return Fu=To$1(Fu,Gu),Bo((Nu=To$1(Nu,Gu))-Fu>Uu/2?Fu+Uu:Fu-Nu>Uu/2?Fu-Uu:Fu,Nu,Vu)}(_u,$u,Ru,Ou):Bo(_u,$u,Ru)}var Ro=function(){function _u($u){for(var Ru in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e$1(),this.startVelocity=0,this.duration=0,this.keyframes=[],$u){var Ou=$u[Ru];typeof Ou=="number"?(this.value[Ru]=Ou,this.config[Ru]={circle:!1}):(this.value[Ru]=Ou.value,this.config[Ru]={circle:Ou.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return _u.prototype.getProgress=function($u){var Ru=$u-this.startTime;return Ru<0?0:Ru>=this.duration?1:1-function(Ou,Fu,Nu,Vu){var Gu=(Fu*Nu+2*Ou)/Math.pow(Nu,3),Uu=-(2*Fu*Nu+3*Ou)/Math.pow(Nu,2),Hu=Fu,Wu=Ou;return Gu*Math.pow(Vu,3)+Uu*Math.pow(Vu,2)+Hu*Vu+Wu}(1,this.startVelocity,this.duration,Ru)},_u.prototype.getValue=function($u){for(var Ru=1;Ru<this.keyframes.length;Ru++)if(this.keyframes[Ru].progress>$u){var Ou=this.keyframes[Ru-1],Fu=this.keyframes[Ru],Nu={};for(var Vu in this.config){var Gu=($u-Ou.progress)/(Fu.progress-Ou.progress);Nu[Vu]=Po(Ou.value[Vu],Fu.value[Vu],Gu,this.config[Vu].circle)}return Nu}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},_u.prototype.getProgressVelocity=function($u){var Ru=$u-this.startTime;return Ru>=this.duration?0:function(Ou,Fu,Nu,Vu){var Gu=(Fu*Nu+2*Ou)/Math.pow(Nu,3),Uu=-(2*Fu*Nu+3*Ou)/Math.pow(Nu,2),Hu=Fu;return 3*Gu*Math.pow(Vu,2)+2*Uu*Vu+Hu}(1,this.startVelocity,this.duration,Ru)},_u.prototype.update=function($u){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress($u))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},_u.prototype.getKeyFrameSegment=function($u){for(var Ru=this.getProgress($u),Ou=1;Ou<this.keyframes.length;Ou++)if(this.keyframes[Ou].progress>Ru)return[this.keyframes[Ou-1],this.keyframes[Ou]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},_u.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},_u.prototype.set=function($u,Ru,Ou,Fu){var Nu;Ou===void 0&&(Ou=0),isNaN(Ru)&&(Ru=0),isNaN(Ou)&&(Ou=0),Fu=Fu!=null?Fu:_e$1();var Vu=this.getProgress(Fu),Gu=this.getValue(Vu),Uu={};for(var Hu in this.config)Uu[Hu]=(Nu=$u[Hu])!==null&&Nu!==void 0?Nu:Gu[Hu];var Wu=[{progress:0,value:Gu},{progress:1,value:Uu}];return this.setKeyframes(Wu,Ru,Ou,Fu)},_u.prototype.setKeyframes=function($u,Ru,Ou,Fu){var Nu=this;if(Ou===void 0&&(Ou=0),$u.length<2)throw new Error("keyframes invalid.");return isNaN(Ru)&&(Ru=0),isNaN(Ou)&&(Ou=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Vu,Gu){Fu=Fu!=null?Fu:_e$1(),Nu.progress=0,Nu.ended=!1,Nu.startTime=Fu,Nu.startVelocity=Ou,Nu.keyframes=$u,Nu.duration=Ru,Ru===0?(Nu.progress=1,Nu.value=t$3.__assign({},$u[$u.length-1].value)):Nu.value=t$3.__assign({},$u[0].value),Nu.callbacks=[Vu,Gu]})},_u.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},_u}(),ko$1=yt(),Do$1=new r$3.Texture(ko$1);ko$1.onload=function(){return Do$1.needsUpdate=!0},ko$1.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo$1=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo=new r$3.MeshBasicMaterial({map:Do$1,transparent:!0}),No$1=new r$3.SphereBufferGeometry(.12,16,16),Fo$1=new r$3.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo(){if(typeof document=="undefined"){var _u=new r$3.Texture;return Object.assign(_u,{draw:function(Wu){},retain:!1,pool:!1})}var $u=document.createElement("canvas"),Ru=512,Ou=256,Fu=190;$u.setAttribute("width",String(Ru)),$u.setAttribute("height",String(Ru));var Nu=new r$3.Texture($u),Vu=$u.getContext("2d");if(!Vu)throw Error("cannot create canvas context");var Gu=Vu.createRadialGradient(Ou,Ou,150,Ou,Ou,0);function Uu(){var Wu=Math.PI/12,Qu=2*Math.PI/3;Vu&&(Vu.beginPath(),Vu.arc(Ou,Ou,Fu,0*Qu,1*Qu-Wu),Vu.stroke(),Vu.beginPath(),Vu.arc(Ou,Ou,Fu,1*Qu,2*Qu-Wu),Vu.stroke(),Vu.beginPath(),Vu.arc(Ou,Ou,Fu,2*Qu,3*Qu-Wu),Vu.stroke())}function Hu(Wu){Vu&&(Vu.clearRect(0,0,Ru,Ru),Vu.lineWidth=20,Wu!==-1&&(Vu.globalCompositeOperation="source-over",Vu.strokeStyle="rgba(255, 255, 255, 1)",Uu(),Vu.globalCompositeOperation="source-in",Vu.beginPath(),Vu.arc(Ou,Ou,Fu,0,2*Math.PI*Wu),Vu.strokeStyle="rgba(255, 255, 255, 1)",Vu.stroke(),Vu.globalCompositeOperation="source-over",Vu.strokeStyle="rgba(255, 255, 255, "+(Wu?.5:1)+")",Uu()),Vu.beginPath(),Vu.arc(Ou,Ou,150,0,2*Math.PI),Vu.closePath(),Vu.fillStyle=Gu,Vu.fill(),Vu.fillStyle="rgba(255, 255, 255, 0.01)",Vu.fillRect(0,0,Ru,Ru),Nu.needsUpdate=!0)}return Gu.addColorStop(0,"rgba(255, 255, 255, 1)"),Gu.addColorStop(.15,"rgba(255, 255, 255, 1)"),Gu.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Gu.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Gu.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Hu(0),Object.assign(Nu,{draw:Hu,retain:!1,pool:!1})}var Vo$1=[],_o$1=Qo();_o$1.draw(0);var Ho=Qo();Ho.draw(1);var qo=Qo();qo.draw(-1);var zo=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko(){return new r$3.Mesh(zo,new r$3.MeshBasicMaterial({map:_o$1,transparent:!0}))}function Uo$1(_u,$u){var Ru=_u.map;$u===0||$u===1?(Ru.pool===!0&&(Ru.retain=!1),$u===0&&(_u.map=_o$1),$u===1&&(_u.map=Ho)):(Ru.pool!==!0&&(_u.map=function(){for(var Ou=0,Fu=Vo$1;Ou<Fu.length;Ou++){var Nu=Fu[Ou];if(Nu.retain===!1)return Nu}var Vu=Qo();return Vu.pool=!0,Vu.retain=!0,Vo$1.push(Vu),Vu}()),_u.map.draw($u))}var jo=function(_u){function $u(){var Ru=_u.call(this)||this;return Ru.loading=!1,Ru.disabled=!1,Ru.current=!1,Ru.progress=0,Ru.opacity=0,Ru.hitTestMesh=new r$3.Mesh(No$1,Fo$1),Ru.add(Ru.hitTestMesh),Ru.centerMesh=Ko(),Ru.centerMesh.position.y+=.01,Ru.add(Ru.centerMesh),Ru.loadingMesh=new r$3.Mesh(Lo$1,Oo),Ru.loadingMesh.position.y+=.011,Ru.progressMotion=new Ro({progress:Ru.progress}),Ru.opacityMotion=new Ro({opacity:Ru.opacity}),Ru.needsRender=!0,Ru.renderOrder=-2,Ru}return t$3.__extends($u,_u),$u.prototype.setLoading=function(Ru){var Ou=this;this.loading=Ru,this.stopInterval&&this.stopInterval(),Ru?(this.add(this.loadingMesh),this.stopInterval=at.shared.add(function(){Ou.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),Ou.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},$u.prototype.setDisabled=function(Ru){this.disabled=Ru,function(Ou,Fu){var Nu=Ou.map;Nu.pool===!0&&(Nu.retain=!1),Ou.map=Fu?qo:_o$1}(this.centerMesh.material,Ru),this.needsRender=!0},$u.prototype.setProgress=function(Ru){this.setLoading(!1),this.setDisabled(!1),this.progress=Ru=ho$1(Ru,0,1),Ru!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Ru},120).catch(Qe$1)},$u.prototype.setOpacity=function(Ru){this.opacity=Ru=ho$1(Ru,0,1),this.current&&(Ru=1),Ru!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Ru},500).catch(Qe$1)},$u.prototype.setCurrent=function(Ru){this.current!==Ru&&(this.current=Ru,this.setOpacity(this.opacity))},$u.prototype.updateTime=function(Ru,Ou){this.opacityMotion.ended||(this.opacityMotion.update(Ru),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Ru),Uo$1(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},$u.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},$u}(r$3.Object3D),Go$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo$1=new Float32Array([0,1,1,1,0,0,1,0]),Xo$1=new Uint8Array([0,2,1,2,3,1]),Yo$1=new r$3.BufferGeometry;Yo$1.setAttribute("position",new r$3.BufferAttribute(Go$1,3)),Yo$1.setAttribute("uv",new r$3.BufferAttribute(Wo$1,2)),Yo$1.setIndex(new r$3.BufferAttribute(Xo$1,1));var Zo$1,Jo$1,$o=(Zo$1=yt(),Jo$1=new r$3.Texture,Zo$1.onload=function(){if(typeof document!="undefined"){var _u=256,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Ru=$u.getContext("2d");if(Ru){Ru.drawImage(Zo$1,0,0,_u,_u),Ru.globalCompositeOperation="source-out";var Ou=128;Ru.beginPath(),Ru.lineWidth=29.952,Ru.arc(Ou,Ou,84.48,0,2*Math.PI),Ru.strokeStyle="rgba(255, 255, 255, 0.5)",Ru.closePath(),Ru.stroke(),Jo$1.image=$u,Jo$1.needsUpdate=!0}}},Zo$1.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo$1),es$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=199.68;return $u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ts$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=138.24,Fu=$u.createLinearGradient(Ru-Math.cos(Math.PI/4)*Ou,Ru-Math.sin(Math.PI/4)*Ou,Ru+Math.cos(Math.PI/4)*Ou,Ru+Math.sin(Math.PI/4)*Ou);return Fu.addColorStop(0,"rgba(255, 255, 255, 1)"),Fu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Fu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle=Fu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),is$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=199.68,Fu=$u.createLinearGradient(Ru+Math.cos(Math.PI/4)*Ou,Ru-Math.sin(Math.PI/4)*Ou,Ru-Math.cos(Math.PI/4)*Ou,Ru+Math.sin(Math.PI/4)*Ou);return Fu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Fu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Fu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle=Fu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ns=function(_u,$u){var Ru=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Ru,Ru,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},rs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ns($u,2*Math.PI);var Ru=new r$3.CanvasTexture(_u);return Object.assign(Ru,{setProgress:function(Ou){$u&&(ns($u,Ou),Ru.needsUpdate=!0)}})}return null},os$1=[],ss$1=rs$1(),as$1=function(_u){function $u(){var Ru=_u.call(this)||this;Ru.progress=0,Ru.opacity=0,Ru.loading=!1,Ru.current=!1,Ru.disabled=!1,Ru.ringRotateMotion=new Ro({angle:0}),Ru.tapMotion=new Ro({scale:1,opacity:1}),Ru.progressMotion=new Ro({progress:0}),Ru.progressOpacityMotion=new Ro({opacity:0}),Ru.opacityMotion=new Ro({opacity:0});var Ou={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Ru.centerMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:ts$1,opacity:0}))),Ru.ringMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:is$1,opacity:0}))),Ru.loadingMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:$o,opacity:.5}))),Ru.disableMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:es$1,opacity:0}))),Ru.progressMesh=new r$3.Mesh(Yo$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:ss$1,opacity:0}))),Ru.loadingMesh.visible=!1,Ru.disableMesh.visible=!1,Ru.ringMesh.position.y=.003,Ru.disableMesh.position.y=.002,Ru.centerMesh.position.y=.002,Ru.loadingMesh.position.y=.005,Ru.progressMesh.position.y=.004,Ru.centerMesh.frustumCulled=!1,Ru.ringMesh.frustumCulled=!1,Ru.progressMesh.frustumCulled=!1,Ru.loadingMesh.frustumCulled=!1,Ru.disableMesh.frustumCulled=!1,Ru.renderOrder=-2,Ru.add(Ru.centerMesh),Ru.add(Ru.ringMesh),Ru.add(Ru.progressMesh),Ru.add(Ru.loadingMesh),Ru.add(Ru.disableMesh),Ru.needsRender=!0,Ru}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Ru){this.setDisabled(!1),this.setLoading(!1),this.progress!==Ru&&(Ru=ho$1(Ru,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Ru===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},100).catch(Qe$1)),this.progress=Ru)},$u.prototype.setOpacity=function(Ru){this.opacity!==Ru&&(this.opacity=Ru=ho$1(Ru,0,1),this.opacityMotion.set({opacity:Ru},500).catch(Qe$1))},$u.prototype.setCurrent=function(Ru){if(this.current!==Ru){if(Ru===!0&&this.ringRotateMotion.ended){var Ou=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ou,5e3).catch(Qe$1)}this.current=Ru}},$u.prototype.setLoading=function(Ru){this.loading!==Ru&&(this.loading=Ru,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Ru,this.needsRender=!0)},$u.prototype.setDisabled=function(Ru){this.disabled!==Ru&&(this.disabled=Ru,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Ru,this.ringMesh.visible=!Ru,this.centerMesh.visible=!Ru,this.needsRender=!0)},$u.prototype.tap=function(){var Ru=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Ru.progressOpacityMotion.set({opacity:Ru.progress>0?1:0},300).catch(Qe$1),Ru.progressMotion.set({progress:Ru.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Ru,Ou){var Fu=ho$1(Math.max(Ru,Ou)/1e3,1,1.8);this.scale.set(Fu,0,Fu)},$u.prototype.updateTime=function(Ru,Ou){var Fu;if(!this.progressMotion.ended){this.progressMotion.update(Ru);var Nu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Nu===0)this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss$1);else if(Nu===1)this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss$1);else{if(this.progressMesh.material.map===ss$1){var Vu=os$1.pop()||rs$1();this.progressMesh.material.map=Vu}(Fu=this.progressMesh.material.map)===null||Fu===void 0||Fu.setProgress(Nu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Ru);var Gu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Gu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Ru),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Gu,this.ringMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ou/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Ru);var Uu=this.tapMotion.value.scale;this.centerMesh.scale.set(Uu,Uu,Uu),this.ringMesh.scale.set(Uu,Uu,Uu),this.progressMesh.scale.set(Uu,Uu,Uu),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Gu,this.ringMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Ru),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss$1&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),ls$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us=new Float32Array([0,1,1,1,0,0,1,0]),hs=new Uint8Array([0,2,1,2,3,1]),cs$1=new r$3.BufferGeometry;cs$1.setAttribute("position",new r$3.BufferAttribute(ls$1,3)),cs$1.setAttribute("uv",new r$3.BufferAttribute(us,2)),cs$1.setIndex(new r$3.BufferAttribute(hs,1));var ds=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Ru=256,Ou=document.createElement("canvas");Ou.setAttribute("width",String(Ru)),Ou.setAttribute("height",String(Ru));var Fu=Ou.getContext("2d");if(Fu){Fu.drawImage(_u,0,0,Ru,Ru),Fu.globalCompositeOperation="source-out";var Nu=128;Fu.beginPath(),Fu.lineWidth=29.952,Fu.arc(Nu,Nu,84.48,0,2*Math.PI),Fu.strokeStyle="rgba(255, 255, 255, 0.5)",Fu.closePath(),Fu.stroke(),$u.image=Ou,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=199.68;return $u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),fs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u)return $u.beginPath(),$u.arc(256,256,199.68,0,2*Math.PI),$u.fillStyle="rgba(0, 0, 0, 0.2)",$u.closePath(),$u.fill(),new r$3.CanvasTexture(_u)}return null}(),As$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=138.24,Fu=$u.createLinearGradient(Ru-Math.cos(Math.PI/4)*Ou,Ru-Math.sin(Math.PI/4)*Ou,Ru+Math.cos(Math.PI/4)*Ou,Ru+Math.sin(Math.PI/4)*Ou);return Fu.addColorStop(0,"rgba(255, 255, 255, 1)"),Fu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Fu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle=Fu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),gs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=199.68,Fu=$u.createLinearGradient(Ru+Math.cos(Math.PI/4)*Ou,Ru-Math.sin(Math.PI/4)*Ou,Ru-Math.cos(Math.PI/4)*Ou,Ru+Math.sin(Math.PI/4)*Ou);return Fu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Fu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Fu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle=Fu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),ms=function(_u,$u){var Ru=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Ru,Ru,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},vs$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ms($u,2*Math.PI);var Ru=new r$3.CanvasTexture(_u);return Object.assign(Ru,{setProgress:function(Ou){$u&&(ms($u,Ou),Ru.needsUpdate=!0)}})}return null},ys$1=[],bs$1=vs$1(),xs=function(_u){function $u(){var Ru=_u.call(this)||this;Ru.progress=0,Ru.opacity=0,Ru.loading=!1,Ru.current=!1,Ru.disabled=!1,Ru.ringRotateMotion=new Ro({angle:0}),Ru.tapMotion=new Ro({scale:1,opacity:1}),Ru.progressMotion=new Ro({progress:0}),Ru.progressOpacityMotion=new Ro({opacity:0}),Ru.opacityMotion=new Ro({opacity:0});var Ou={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Ru.backgroundMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:fs$1,opacity:1}))),Ru.centerMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:As$1,opacity:0}))),Ru.ringMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:gs$1,opacity:0}))),Ru.loadingMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:ds,opacity:.5}))),Ru.disableMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:ps,opacity:0}))),Ru.progressMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:bs$1,opacity:0}))),Ru.loadingMesh.visible=!1,Ru.disableMesh.visible=!1,Ru.backgroundMesh.position.y=.0018,Ru.ringMesh.position.y=.003,Ru.disableMesh.position.y=.002,Ru.centerMesh.position.y=.002,Ru.loadingMesh.position.y=.005,Ru.progressMesh.position.y=.004,Ru.centerMesh.frustumCulled=!1,Ru.ringMesh.frustumCulled=!1,Ru.progressMesh.frustumCulled=!1,Ru.loadingMesh.frustumCulled=!1,Ru.disableMesh.frustumCulled=!1,Ru.renderOrder=-2,Ru.add(Ru.backgroundMesh),Ru.add(Ru.centerMesh),Ru.add(Ru.ringMesh),Ru.add(Ru.progressMesh),Ru.add(Ru.loadingMesh),Ru.add(Ru.disableMesh),Ru.needsRender=!0,Ru}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Ru){this.setDisabled(!1),this.setLoading(!1),this.progress!==Ru&&(Ru=ho$1(Ru,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Ru===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},100).catch(Qe$1)),this.progress=Ru)},$u.prototype.setOpacity=function(Ru){this.opacity!==Ru&&(this.opacity=Ru=ho$1(Ru,0,1),this.opacityMotion.set({opacity:Ru},500).catch(Qe$1))},$u.prototype.setCurrent=function(Ru){if(this.current!==Ru){if(Ru===!0&&this.ringRotateMotion.ended){var Ou=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Ou,5e3).catch(Qe$1)}this.current=Ru}},$u.prototype.setLoading=function(Ru){this.loading!==Ru&&(this.loading=Ru,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Ru,this.needsRender=!0)},$u.prototype.setDisabled=function(Ru){this.disabled!==Ru&&(this.disabled=Ru,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Ru,this.ringMesh.visible=!Ru,this.centerMesh.visible=!Ru,this.needsRender=!0)},$u.prototype.tap=function(){var Ru=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Ru.progressOpacityMotion.set({opacity:Ru.progress>0?1:0},300).catch(Qe$1),Ru.progressMotion.set({progress:Ru.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Ru,Ou){var Fu=ho$1(Math.max(Ru,Ou)/1e3,1,1.8);this.scale.set(Fu,0,Fu)},$u.prototype.updateTime=function(Ru,Ou){var Fu;if(!this.progressMotion.ended){this.progressMotion.update(Ru);var Nu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Nu===0)this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else if(Nu===1)this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else{if(this.progressMesh.material.map===bs$1){var Vu=ys$1.pop()||vs$1();this.progressMesh.material.map=Vu}(Fu=this.progressMesh.material.map)===null||Fu===void 0||Fu.setProgress(Nu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Ru);var Gu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Gu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Ru),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Gu,this.centerMesh.material.opacity=Gu,this.ringMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ou/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Ru);var Uu=this.tapMotion.value.scale;this.backgroundMesh.scale.set(Uu,Uu,Uu),this.centerMesh.scale.set(Uu,Uu,Uu),this.ringMesh.scale.set(Uu,Uu,Uu),this.progressMesh.scale.set(Uu,Uu,Uu),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Gu,this.ringMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Ru),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),ws$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$3.BufferGeometry;Is.setAttribute("position",new r$3.BufferAttribute(ws$1,3)),Is.setAttribute("uv",new r$3.BufferAttribute(Es,2)),Is.setIndex(new r$3.BufferAttribute(Ms,1));var Ss=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Ru=256,Ou=document.createElement("canvas");Ou.setAttribute("width",String(Ru)),Ou.setAttribute("height",String(Ru));var Fu=Ou.getContext("2d");if(Fu){Fu.drawImage(_u,0,0,Ru,Ru),Fu.globalCompositeOperation="source-out";var Nu=128;Fu.beginPath(),Fu.lineWidth=29.44,Fu.arc(Nu,Nu,55.04,0,2*Math.PI),Fu.strokeStyle="rgba(255, 255, 255, 0.7)",Fu.closePath(),Fu.stroke(),$u.image=Ou,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256,Ou=199.68;return $u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Ru,Ru,Ou,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");if($u){var Ru=128;return $u.beginPath(),$u.lineWidth=29.44,$u.arc(Ru,Ru,84.48,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 1)",$u.shadowBlur=19.2,$u.shadowColor="rgba(200, 200, 200, 0.2)",$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Ts=function(_u,$u){var Ru=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Ru,Ru,57.6,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.6)",_u.stroke()},Ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&Ts($u,2*Math.PI);var Ru=new r$3.CanvasTexture(_u);return Object.assign(Ru,{setProgress:function(Ou){$u&&(Ts($u,Ou),Ru.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(_u){function $u(){var Ru=_u.call(this)||this;Ru.progress=0,Ru.opacity=0,Ru.loading=!1,Ru.current=!1,Ru.disabled=!1,Ru.tapMotion=new Ro({scale:1,opacity:1}),Ru.progressMotion=new Ro({progress:0}),Ru.progressOpacityMotion=new Ro({opacity:0}),Ru.opacityMotion=new Ro({opacity:0});var Ou={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Ru.centerMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Bs,opacity:0}))),Ru.loadingMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Ss,opacity:.5}))),Ru.disableMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Cs,opacity:0}))),Ru.progressMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:ks,opacity:0}))),Ru.loadingMesh.visible=!1,Ru.disableMesh.visible=!1,Ru.disableMesh.position.y=.002,Ru.centerMesh.position.y=.002,Ru.loadingMesh.position.y=.005,Ru.progressMesh.position.y=.004,Ru.centerMesh.frustumCulled=!1,Ru.progressMesh.frustumCulled=!1,Ru.loadingMesh.frustumCulled=!1,Ru.disableMesh.frustumCulled=!1,Ru.renderOrder=-2,Ru.add(Ru.centerMesh),Ru.add(Ru.progressMesh),Ru.add(Ru.loadingMesh),Ru.add(Ru.disableMesh),Ru.needsRender=!0,Ru}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Ru){this.setDisabled(!1),this.setLoading(!1),this.progress!==Ru&&(Ru=ho$1(Ru,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Ru===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho$1(1.2*Ru,0,1)},100).catch(Qe$1)),this.progress=Ru)},$u.prototype.setOpacity=function(Ru){Ru>0&&(Ru=1),this.opacity!==Ru&&(this.opacity=Ru=ho$1(Ru,0,1),this.opacityMotion.set({opacity:Ru},500).catch(Qe$1))},$u.prototype.setCurrent=function(Ru){this.current!==Ru&&(this.current=Ru)},$u.prototype.setLoading=function(Ru){this.loading!==Ru&&(this.loading=Ru,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Ru,this.needsRender=!0)},$u.prototype.setDisabled=function(Ru){this.disabled!==Ru&&(this.disabled=Ru,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Ru,this.centerMesh.visible=!Ru,this.needsRender=!0)},$u.prototype.tap=function(){var Ru=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Ru.progressOpacityMotion.set({opacity:Ru.progress>0?1:0},300).catch(Qe$1),Ru.progressMotion.set({progress:Ru.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},$u.prototype.setResolution=function(Ru,Ou){var Fu=ho$1(Math.max(Ru,Ou)/1e3,1.2,1.8);this.scale.set(Fu,0,Fu)},$u.prototype.updateTime=function(Ru,Ou){var Fu;if(!this.progressMotion.ended){this.progressMotion.update(Ru);var Nu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Nu===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Nu===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Vu=Rs.pop()||Ps();this.progressMesh.material.map=Vu}(Fu=this.progressMesh.material.map)===null||Fu===void 0||Fu.setProgress(Nu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Ru);var Gu=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Gu,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Ru),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Ou/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Ru);var Uu=this.tapMotion.value.scale;this.centerMesh.scale.set(Uu,Uu,Uu),this.progressMesh.scale.set(Uu,Uu,Uu),Gu=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Gu,this.disableMesh.material.opacity=Gu,this.loadingMesh.material.opacity=Gu,this.needsRender=!0}},$u.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$3.Object3D),Ls=new r$3.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Ru=$u.getContext("2d");if(Ru){var Ou=256,Fu=192,Nu=76.8;Ru.lineWidth=Nu,Ru.arc(Ou,Ou,Fu,0,2*Math.PI),Ru.strokeStyle="rgba(147, 162, 255, 0.3)",Ru.shadowBlur=12.8,Ru.shadowColor="rgba(255, 255, 255, 0.6)",Ru.stroke(),Ru.lineWidth=Nu,Ru.arc(Ou,Ou,Fu,0,2*Math.PI);var Vu=Ru.createRadialGradient(Ou,Ou,153.6,Ou,Ou,230.4);Vu.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Vu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Ru.strokeStyle=Vu,Ru.stroke(),Ru.beginPath(),Ru.lineWidth=4.8,Ru.arc(Ou,Ou,228,0,2*Math.PI);var Gu=Ru.createLinearGradient(0,0,_u,0);return Gu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Gu.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Gu.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Gu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Ru.strokeStyle=Gu,Ru.stroke(),new r$3.CanvasTexture($u)}}return null}(),Ns$1=new r$3.MeshBasicMaterial({map:Os,transparent:!0}),Fs=function(_u){function $u(){var Ru=_u.call(this)||this;return Ru.ringMesh=new r$3.Mesh(Ls,Ns$1),Ru.ringMesh.renderOrder=-3,Ru.add(Ru.ringMesh),Ru}return t$3.__extends($u,_u),$u.prototype.dispose=function(){this.remove(this.ringMesh)},$u}(r$3.Object3D);function Qs(_u,$u,Ru){var Ou=Math.abs(_u-$u);return Ou<.001||Ru!==void 0&&Math.abs(Ru-Ou)<.001}function Vs$1(_u,$u,Ru){return!Qs(_u,$u,Ru)}function _s$1(_u,$u){return _u.distanceTo($u)<.001}function Hs(_u,$u){return!_s$1(_u,$u)}var qs=new r$3.Vector3(0,0,0),zs=function(_u){function $u(Ru,Ou){Ou===void 0&&(Ou=qs);var Fu=_u.call(this)||this,Nu=new r$3.BoxBufferGeometry(Ru.max.x-Ru.min.x+2*Ou.x,Ru.max.y-Ru.min.y+2*Ou.y,Ru.max.z-Ru.min.z+2*Ou.z,1,1);Nu.groups.length=0,Nu.groups.push({start:0,count:36,materialIndex:0}),Nu.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1)),Nu.computeVertexNormals();var Vu=new Mt;Vu.defines.USE_MAP=!1,Vu.defines.USE_UV=!1,Vu.uniforms.diffuse.value=new r$3.Color(16777215);var Gu=new ft(Nu,[Vu]);return Gu.floorIndex=-1,Gu.position.copy(Ru.getCenter(new r$3.Vector3)),Gu.frustumCulled=!1,Fu.renderOrder=-3,Fu.add(Gu),Fu.boundingBox=new r$3.Box3,Fu.computeBoundingBox(),Fu}return t$3.__extends($u,_u),$u.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},$u.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},$u}(gt$1);function Ks(_u,$u){return $u===void 0&&($u=qs),new zs(_u,$u)}function Us$1(_u){var $u=_u.getError();if($u===_u.NO_ERROR)return null;switch($u){case _u.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case _u.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case _u.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case _u.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case _u.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case _u.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js$1=2*Math.PI;function Gs$1(_u){return _u>=0&&_u<js$1?_u:(_u%js$1+js$1)%js$1}var Ws$1=Math.PI,Xs$1=2*Ws$1;function Ys$1(_u,$u,Ru){if(_u===$u)return $u;var Ou=$u-_u;return Math.abs(Ou)<=Ru?$u:_u+(Ou>0?1:-1)*Ru}(function(){try{var _u=document.createElement("canvas");!window.WebGLRenderingContext||!_u.getContext("webgl")&&_u.getContext("experimental-webgl")}catch{return!1}})();var Zs=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(_u)||/webos/i.test(_u)||/ipad|iphone|ipod/i.test(_u)||/iemobile/i.test(_u)||/opera mini/i.test(_u)||/blackberry/i.test(_u)||/windows phone/i.test(_u)};function Js(_u,$u){_u.mode=$u.mode,_u.panoIndex=$u.panoIndex,_u.longitude=$u.longitude,_u.latitude=$u.latitude,_u.fov=$u.fov,_u.offset.copy($u.offset)}function $s(_u,$u){return _u.panoIndex===$u.panoIndex&&_u.mode===$u.mode&&Qs(_u.longitude,$u.longitude,2*Math.PI)&&Qs(_u.latitude,$u.latitude)&&Qs(_u.fov,$u.fov)&&_s$1(_u.offset,$u.offset)}var ea$1=function(_u){return Number(_u)};function ta(_u,$u,Ru){var Ou;$u===void 0&&($u=ea$1),Ru===void 0&&(Ru=!1);for(var Fu,Nu=1/0,Vu=0,Gu=_u;Vu<Gu.length;Vu++){var Uu=Gu[Vu],Hu=$u(Uu);Hu<=Nu&&(Fu=(Ou=[Uu,Hu])[0],Nu=Ou[1])}return Ru?[Fu,Nu]:Fu}function ia$1(_u){for(var $u in _u)return!1;return!0}function na(_u){return{longitude:_u.longitude,latitude:_u.latitude,fov:_u.fov,offset:_u.offset.clone(),distance:_u.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(_u,$u,Ru,Ou){var Fu,Nu=["","webkit","Moz","MS","ms","o"],Vu=$u.createElement?$u.createElement("div"):Ou,Gu=Math.round,Uu=Math.abs,Hu=Date.now;function Wu(vp,Ep,Pp){return setTimeout(Xu(vp,Pp),Ep)}function Qu(vp,Ep,Pp){return!!Array.isArray(vp)&&(qu(vp,Pp[Ep],Pp),!0)}function qu(vp,Ep,Pp){var zp;if(vp)if(vp.forEach)vp.forEach(Ep,Pp);else if(vp.length!==Ou)for(zp=0;zp<vp.length;)Ep.call(Pp,vp[zp],zp,vp),zp++;else for(zp in vp)vp.hasOwnProperty(zp)&&Ep.call(Pp,vp[zp],zp,vp)}function Ku(vp,Ep,Pp){var zp="DEPRECATED METHOD: "+Ep+`
`+Pp+` AT 
`;return function(){var Yp=new Error("get-stack-trace"),mm=Yp&&Yp.stack?Yp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",gm=_u.console&&(_u.console.warn||_u.console.log);return gm&&gm.call(_u.console,zp,mm),vp.apply(this,arguments)}}Fu=typeof Object.assign!="function"?function(vp){if(vp===Ou||vp===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ep=Object(vp),Pp=1;Pp<arguments.length;Pp++){var zp=arguments[Pp];if(zp!==Ou&&zp!==null)for(var Yp in zp)zp.hasOwnProperty(Yp)&&(Ep[Yp]=zp[Yp])}return Ep}:Object.assign;var Yu=Ku(function(vp,Ep,Pp){for(var zp=Object.keys(Ep),Yp=0;Yp<zp.length;)(!Pp||Pp&&vp[zp[Yp]]===Ou)&&(vp[zp[Yp]]=Ep[zp[Yp]]),Yp++;return vp},"extend","Use `assign`."),_c=Ku(function(vp,Ep){return Yu(vp,Ep,!0)},"merge","Use `assign`.");function Ju(vp,Ep,Pp){var zp,Yp=Ep.prototype;(zp=vp.prototype=Object.create(Yp)).constructor=vp,zp._super=Yp,Pp&&Fu(zp,Pp)}function Xu(vp,Ep){return function(){return vp.apply(Ep,arguments)}}function Zu(vp,Ep){return typeof vp=="function"?vp.apply(Ep&&Ep[0]||Ou,Ep):vp}function Xc(vp,Ep){return vp===Ou?Ep:vp}function _h(vp,Ep,Pp){qu(lp(Ep),function(zp){vp.addEventListener(zp,Pp,!1)})}function ep(vp,Ep,Pp){qu(lp(Ep),function(zp){vp.removeEventListener(zp,Pp,!1)})}function np(vp,Ep){for(;vp;){if(vp==Ep)return!0;vp=vp.parentNode}return!1}function ap(vp,Ep){return vp.indexOf(Ep)>-1}function lp(vp){return vp.trim().split(/\s+/g)}function up(vp,Ep,Pp){if(vp.indexOf&&!Pp)return vp.indexOf(Ep);for(var zp=0;zp<vp.length;){if(Pp&&vp[zp][Pp]==Ep||!Pp&&vp[zp]===Ep)return zp;zp++}return-1}function _f(vp){return Array.prototype.slice.call(vp,0)}function tp(vp,Ep,Pp){for(var zp=[],Yp=[],mm=0;mm<vp.length;){var gm=Ep?vp[mm][Ep]:vp[mm];up(Yp,gm)<0&&zp.push(vp[mm]),Yp[mm]=gm,mm++}return Pp&&(zp=Ep?zp.sort(function(Lm,fm){return Lm[Ep]>fm[Ep]}):zp.sort()),zp}function ip(vp,Ep){for(var Pp,zp,Yp=Ep[0].toUpperCase()+Ep.slice(1),mm=0;mm<Nu.length;){if((zp=(Pp=Nu[mm])?Pp+Yp:Ep)in vp)return zp;mm++}return Ou}var rp=1;function op(vp){var Ep=vp.ownerDocument||vp;return Ep.defaultView||Ep.parentWindow||_u}var sp="ontouchstart"in _u,cp=ip(_u,"PointerEvent")!==Ou,hp=sp&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),dp="touch",xp="mouse",bp=24,Rp=["x","y"],Tp=["clientX","clientY"];function Up(vp,Ep){var Pp=this;this.manager=vp,this.callback=Ep,this.element=vp.element,this.target=vp.options.inputTarget,this.domHandler=function(zp){Zu(vp.options.enable,[vp])&&Pp.handler(zp)},this.init()}function Ip(vp,Ep,Pp){var zp=Pp.pointers.length,Yp=Pp.changedPointers.length,mm=1&Ep&&zp-Yp==0,gm=12&Ep&&zp-Yp==0;Pp.isFirst=!!mm,Pp.isFinal=!!gm,mm&&(vp.session={}),Pp.eventType=Ep,function(Lm,fm){var Om=Lm.session,Hm=fm.pointers,Ey=Hm.length;Om.firstInput||(Om.firstInput=Vp(fm)),Ey>1&&!Om.firstMultiple?Om.firstMultiple=Vp(fm):Ey===1&&(Om.firstMultiple=!1);var Ty=Om.firstInput,Xm=Om.firstMultiple,jm=Xm?Xm.center:Ty.center,xy=fm.center=Lp(Hm);fm.timeStamp=Hu(),fm.deltaTime=fm.timeStamp-Ty.timeStamp,fm.angle=Ap(jm,xy),fm.distance=wp(jm,xy),function(Vm,Im){var Um=Im.center,Zm=Vm.offsetDelta||{},Jm=Vm.prevDelta||{},Km=Vm.prevInput||{};Im.eventType!==1&&Km.eventType!==4||(Jm=Vm.prevDelta={x:Km.deltaX||0,y:Km.deltaY||0},Zm=Vm.offsetDelta={x:Um.x,y:Um.y}),Im.deltaX=Jm.x+(Um.x-Zm.x),Im.deltaY=Jm.y+(Um.y-Zm.y)}(Om,fm),fm.offsetDirection=pp(fm.deltaX,fm.deltaY);var Wm=mp(fm.deltaTime,fm.deltaX,fm.deltaY);fm.overallVelocityX=Wm.x,fm.overallVelocityY=Wm.y,fm.overallVelocity=Uu(Wm.x)>Uu(Wm.y)?Wm.x:Wm.y,fm.scale=Xm?function(Vm,Im){return wp(Im[0],Im[1],Tp)/wp(Vm[0],Vm[1],Tp)}(Xm.pointers,Hm):1,fm.rotation=Xm?function(Vm,Im){return Ap(Im[1],Im[0],Tp)+Ap(Vm[1],Vm[0],Tp)}(Xm.pointers,Hm):0,fm.maxPointers=Om.prevInput?fm.pointers.length>Om.prevInput.maxPointers?fm.pointers.length:Om.prevInput.maxPointers:fm.pointers.length,function(Vm,Im){var Um,Zm,Jm,Km,Gm=Vm.lastInterval||Im,Cy=Im.timeStamp-Gm.timeStamp;if(Im.eventType!=8&&(Cy>25||Gm.velocity===Ou)){var $y=Im.deltaX-Gm.deltaX,Py=Im.deltaY-Gm.deltaY,_g=mp(Cy,$y,Py);Zm=_g.x,Jm=_g.y,Um=Uu(_g.x)>Uu(_g.y)?_g.x:_g.y,Km=pp($y,Py),Vm.lastInterval=Im}else Um=Gm.velocity,Zm=Gm.velocityX,Jm=Gm.velocityY,Km=Gm.direction;Im.velocity=Um,Im.velocityX=Zm,Im.velocityY=Jm,Im.direction=Km}(Om,fm);var Qm=Lm.element;np(fm.srcEvent.target,Qm)&&(Qm=fm.srcEvent.target),fm.target=Qm}(vp,Pp),vp.emit("hammer.input",Pp),vp.recognize(Pp),vp.session.prevInput=Pp}function Vp(vp){for(var Ep=[],Pp=0;Pp<vp.pointers.length;)Ep[Pp]={clientX:Gu(vp.pointers[Pp].clientX),clientY:Gu(vp.pointers[Pp].clientY)},Pp++;return{timeStamp:Hu(),pointers:Ep,center:Lp(Ep),deltaX:vp.deltaX,deltaY:vp.deltaY}}function Lp(vp){var Ep=vp.length;if(Ep===1)return{x:Gu(vp[0].clientX),y:Gu(vp[0].clientY)};for(var Pp=0,zp=0,Yp=0;Yp<Ep;)Pp+=vp[Yp].clientX,zp+=vp[Yp].clientY,Yp++;return{x:Gu(Pp/Ep),y:Gu(zp/Ep)}}function mp(vp,Ep,Pp){return{x:Ep/vp||0,y:Pp/vp||0}}function pp(vp,Ep){return vp===Ep?1:Uu(vp)>=Uu(Ep)?vp<0?2:4:Ep<0?8:16}function wp(vp,Ep,Pp){Pp||(Pp=Rp);var zp=Ep[Pp[0]]-vp[Pp[0]],Yp=Ep[Pp[1]]-vp[Pp[1]];return Math.sqrt(zp*zp+Yp*Yp)}function Ap(vp,Ep,Pp){Pp||(Pp=Rp);var zp=Ep[Pp[0]]-vp[Pp[0]],Yp=Ep[Pp[1]]-vp[Pp[1]];return 180*Math.atan2(Yp,zp)/Math.PI}Up.prototype={handler:function(){},init:function(){this.evEl&&_h(this.element,this.evEl,this.domHandler),this.evTarget&&_h(this.target,this.evTarget,this.domHandler),this.evWin&&_h(op(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ep(this.element,this.evEl,this.domHandler),this.evTarget&&ep(this.target,this.evTarget,this.domHandler),this.evWin&&ep(op(this.element),this.evWin,this.domHandler)}};var Sp={mousedown:1,mousemove:2,mouseup:4},Cp="mousedown",$p="mousemove mouseup";function Fp(){this.evEl=Cp,this.evWin=$p,this.pressed=!1,Up.apply(this,arguments)}Ju(Fp,Up,{handler:function(vp){var Ep=Sp[vp.type];1&Ep&&(vp.button===0||vp.button===2)&&(this.pressed=!0),2&Ep&&vp.which!==1&&(Ep=4),this.pressed&&(4&Ep&&(this.pressed=!1),this.callback(this.manager,Ep,{pointers:[vp],changedPointers:[vp],pointerType:xp,srcEvent:vp}))}});var jp={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},kp={2:dp,3:"pen",4:xp,5:"kinect"},fp="pointerdown",yp="pointermove pointerup pointercancel";function Gp(){this.evEl=fp,this.evWin=yp,Up.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_u.MSPointerEvent&&!_u.PointerEvent&&(fp="MSPointerDown",yp="MSPointerMove MSPointerUp MSPointerCancel"),Ju(Gp,Up,{handler:function(vp){var Ep=this.store,Pp=!1,zp=!1,Yp=vp.type.toLowerCase().replace("ms",""),mm=jp[Yp],gm=kp[vp.pointerType]||vp.pointerType,Lm=gm==dp,fm=up(Ep,vp.pointerId,"pointerId");1&mm&&(vp.button===0||vp.button===2||Lm)?fm<0&&(Ep.push(vp),fm=Ep.length-1):12&mm?Pp=!0:Lm||vp.buttons!==0||(Pp=!0,zp=!0,mm=jp.pointerup),fm<0||(zp||(Ep[fm]=vp),this.callback(this.manager,mm,{pointers:Ep,changedPointers:[vp],pointerType:gm,srcEvent:Ep[fm]}),Pp&&Ep.splice(fm,1))}});var Np={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Xp="touchstart",Qp="touchstart touchmove touchend touchcancel";function Zp(){this.evTarget=Xp,this.evWin=Qp,this.started=!1,Up.apply(this,arguments)}function im(vp,Ep){var Pp=_f(vp.touches),zp=_f(vp.changedTouches);return 12&Ep&&(Pp=tp(Pp.concat(zp),"identifier",!0)),[Pp,zp]}Ju(Zp,Up,{handler:function(vp){var Ep=Np[vp.type];if(Ep===1&&(this.started=!0),this.started){var Pp=im.call(this,vp,Ep);12&Ep&&Pp[0].length-Pp[1].length==0&&(this.started=!1),this.callback(this.manager,Ep,{pointers:Pp[0],changedPointers:Pp[1],pointerType:dp,srcEvent:vp})}}});var nm={touchstart:1,touchmove:2,touchend:4,touchcancel:8},cm="touchstart touchmove touchend touchcancel";function em(){this.evTarget=cm,this.targetIds={},Up.apply(this,arguments)}function om(vp,Ep){var Pp=_f(vp.touches),zp=this.targetIds;if(3&Ep&&Pp.length===1)return zp[Pp[0].identifier]=!0,[Pp,Pp];var Yp,mm,gm=_f(vp.changedTouches),Lm=[],fm=this.target;if(mm=Pp.filter(function(Om){return np(Om.target,fm)}),Ep===1)for(Yp=0;Yp<mm.length;)zp[mm[Yp].identifier]=!0,Yp++;for(Yp=0;Yp<gm.length;)zp[gm[Yp].identifier]&&Lm.push(gm[Yp]),12&Ep&&delete zp[gm[Yp].identifier],Yp++;return Lm.length?[tp(mm.concat(Lm),"identifier",!0),Lm]:void 0}Ju(em,Up,{handler:function(vp){var Ep=nm[vp.type],Pp=om.call(this,vp,Ep);Pp&&this.callback(this.manager,Ep,{pointers:Pp[0],changedPointers:Pp[1],pointerType:dp,srcEvent:vp})}});function tm(){Up.apply(this,arguments);var vp=Xu(this.handler,this);this.touch=new em(this.manager,vp),this.mouse=new Fp(this.manager,vp),this.primaryTouch=null,this.lastTouches=[]}function sm(vp,Ep){1&vp?(this.primaryTouch=Ep.changedPointers[0].identifier,Bp.call(this,Ep)):12&vp&&Bp.call(this,Ep)}function Bp(vp){var Ep=vp.changedPointers[0];if(Ep.identifier===this.primaryTouch){var Pp={x:Ep.clientX,y:Ep.clientY};this.lastTouches.push(Pp);var zp=this.lastTouches;setTimeout(function(){var Yp=zp.indexOf(Pp);Yp>-1&&zp.splice(Yp,1)},2500)}}function rm(vp){for(var Ep=vp.srcEvent.clientX,Pp=vp.srcEvent.clientY,zp=0;zp<this.lastTouches.length;zp++){var Yp=this.lastTouches[zp],mm=Math.abs(Ep-Yp.x),gm=Math.abs(Pp-Yp.y);if(mm<=25&&gm<=25)return!0}return!1}Ju(tm,Up,{handler:function(vp,Ep,Pp){var zp=Pp.pointerType==dp,Yp=Pp.pointerType==xp;if(!(Yp&&Pp.sourceCapabilities&&Pp.sourceCapabilities.firesTouchEvents)){if(zp)sm.call(this,Ep,Pp);else if(Yp&&rm.call(this,Pp))return;this.callback(vp,Ep,Pp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var lm=Vu?ip(Vu.style,"touchAction"):Ou,dm=lm!==Ou,hm="compute",ym="auto",Mm="manipulation",Em="none",Dm="pan-x",Sm="pan-y",Bm=function(){if(!dm)return!1;var vp={},Ep=_u.CSS&&_u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Pp){vp[Pp]=!Ep||_u.CSS.supports("touch-action",Pp)}),vp}();function Rm(vp,Ep){this.manager=vp,this.set(Ep)}Rm.prototype={set:function(vp){vp==hm&&(vp=this.compute()),dm&&this.manager.element.style&&Bm[vp]&&(this.manager.element.style[lm]=vp),this.actions=vp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var vp=[];return qu(this.manager.recognizers,function(Ep){Zu(Ep.options.enable,[Ep])&&(vp=vp.concat(Ep.getTouchAction()))}),function(Ep){if(ap(Ep,Em))return Em;var Pp=ap(Ep,Dm),zp=ap(Ep,Sm);return Pp&&zp?Em:Pp||zp?Pp?Dm:Sm:ap(Ep,Mm)?Mm:ym}(vp.join(" "))},preventDefaults:function(vp){var Ep=vp.srcEvent,Pp=vp.offsetDirection;if(this.manager.session.prevented)Ep.preventDefault();else{var zp=this.actions,Yp=ap(zp,Em)&&!Bm.none,mm=ap(zp,Sm)&&!Bm["pan-y"],gm=ap(zp,Dm)&&!Bm["pan-x"];if(Yp){var Lm=vp.pointers.length===1,fm=vp.distance<2,Om=vp.deltaTime<250;if(Lm&&fm&&Om)return}if(!gm||!mm)return Yp||mm&&6&Pp||gm&&Pp&bp?this.preventSrc(Ep):void 0}},preventSrc:function(vp){this.manager.session.prevented=!0,vp.preventDefault()}};var Cm=32;function km(vp){this.options=Fu({},this.defaults,vp||{}),this.id=rp++,this.manager=null,this.options.enable=Xc(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function zm(vp){return 16&vp?"cancel":8&vp?"end":4&vp?"move":2&vp?"start":""}function $m(vp){return vp==16?"down":vp==8?"up":vp==2?"left":vp==4?"right":""}function Mp(vp,Ep){var Pp=Ep.manager;return Pp?Pp.get(vp):vp}function Wp(){km.apply(this,arguments)}function Hp(){Wp.apply(this,arguments),this.pX=null,this.pY=null}function Kp(){Wp.apply(this,arguments)}function am(){km.apply(this,arguments),this._timer=null,this._input=null}function xm(){Wp.apply(this,arguments)}function Am(){Wp.apply(this,arguments)}function pm(){km.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function vm(vp,Ep){return(Ep=Ep||{}).recognizers=Xc(Ep.recognizers,vm.defaults.preset),new wm(vp,Ep)}km.prototype={defaults:{},set:function(vp){return Fu(this.options,vp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(vp){if(Qu(vp,"recognizeWith",this))return this;var Ep=this.simultaneous;return Ep[(vp=Mp(vp,this)).id]||(Ep[vp.id]=vp,vp.recognizeWith(this)),this},dropRecognizeWith:function(vp){return Qu(vp,"dropRecognizeWith",this)||(vp=Mp(vp,this),delete this.simultaneous[vp.id]),this},requireFailure:function(vp){if(Qu(vp,"requireFailure",this))return this;var Ep=this.requireFail;return up(Ep,vp=Mp(vp,this))===-1&&(Ep.push(vp),vp.requireFailure(this)),this},dropRequireFailure:function(vp){if(Qu(vp,"dropRequireFailure",this))return this;vp=Mp(vp,this);var Ep=up(this.requireFail,vp);return Ep>-1&&this.requireFail.splice(Ep,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(vp){return!!this.simultaneous[vp.id]},emit:function(vp){var Ep=this,Pp=this.state;function zp(Yp){Ep.manager.emit(Yp,vp)}Pp<8&&zp(Ep.options.event+zm(Pp)),zp(Ep.options.event),vp.additionalEvent&&zp(vp.additionalEvent),Pp>=8&&zp(Ep.options.event+zm(Pp))},tryEmit:function(vp){if(this.canEmit())return this.emit(vp);this.state=Cm},canEmit:function(){for(var vp=0;vp<this.requireFail.length;){if(!(33&this.requireFail[vp].state))return!1;vp++}return!0},recognize:function(vp){var Ep=Fu({},vp);if(!Zu(this.options.enable,[this,Ep]))return this.reset(),void(this.state=Cm);56&this.state&&(this.state=1),this.state=this.process(Ep),30&this.state&&this.tryEmit(Ep)},process:function(vp){},getTouchAction:function(){},reset:function(){}},Ju(Wp,km,{defaults:{pointers:1},attrTest:function(vp){var Ep=this.options.pointers;return Ep===0||vp.pointers.length===Ep},process:function(vp){var Ep=this.state,Pp=vp.eventType,zp=6&Ep,Yp=this.attrTest(vp);return zp&&(8&Pp||!Yp)?16|Ep:zp||Yp?4&Pp?8|Ep:2&Ep?4|Ep:2:Cm}}),Ju(Hp,Wp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var vp=this.options.direction,Ep=[];return 6&vp&&Ep.push(Sm),vp&bp&&Ep.push(Dm),Ep},directionTest:function(vp){var Ep=this.options,Pp=!0,zp=vp.distance,Yp=vp.direction,mm=vp.deltaX,gm=vp.deltaY;return Yp&Ep.direction||(6&Ep.direction?(Yp=mm===0?1:mm<0?2:4,Pp=mm!=this.pX,zp=Math.abs(vp.deltaX)):(Yp=gm===0?1:gm<0?8:16,Pp=gm!=this.pY,zp=Math.abs(vp.deltaY))),vp.direction=Yp,Pp&&zp>Ep.threshold&&Yp&Ep.direction},attrTest:function(vp){return Wp.prototype.attrTest.call(this,vp)&&(2&this.state||!(2&this.state)&&this.directionTest(vp))},emit:function(vp){this.pX=vp.deltaX,this.pY=vp.deltaY;var Ep=$m(vp.direction);Ep&&(vp.additionalEvent=this.options.event+Ep),this._super.emit.call(this,vp)}}),Ju(Kp,Wp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Em]},attrTest:function(vp){return this._super.attrTest.call(this,vp)&&(Math.abs(vp.scale-1)>this.options.threshold||2&this.state)},emit:function(vp){if(vp.scale!==1){var Ep=vp.scale<1?"in":"out";vp.additionalEvent=this.options.event+Ep}this._super.emit.call(this,vp)}}),Ju(am,km,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ym]},process:function(vp){var Ep=this.options,Pp=vp.pointers.length===Ep.pointers,zp=vp.distance<Ep.threshold,Yp=vp.deltaTime>Ep.time;if(this._input=vp,!zp||!Pp||12&vp.eventType&&!Yp)this.reset();else if(1&vp.eventType)this.reset(),this._timer=Wu(function(){this.state=8,this.tryEmit()},Ep.time,this);else if(4&vp.eventType)return 8;return Cm},reset:function(){clearTimeout(this._timer)},emit:function(vp){this.state===8&&(vp&&4&vp.eventType?this.manager.emit(this.options.event+"up",vp):(this._input.timeStamp=Hu(),this.manager.emit(this.options.event,this._input)))}}),Ju(xm,Wp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Em]},attrTest:function(vp){return this._super.attrTest.call(this,vp)&&(Math.abs(vp.rotation)>this.options.threshold||2&this.state)}}),Ju(Am,Wp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Hp.prototype.getTouchAction.call(this)},attrTest:function(vp){var Ep,Pp=this.options.direction;return 30&Pp?Ep=vp.overallVelocity:6&Pp?Ep=vp.overallVelocityX:Pp&bp&&(Ep=vp.overallVelocityY),this._super.attrTest.call(this,vp)&&Pp&vp.offsetDirection&&vp.distance>this.options.threshold&&vp.maxPointers==this.options.pointers&&Uu(Ep)>this.options.velocity&&4&vp.eventType},emit:function(vp){var Ep=$m(vp.offsetDirection);Ep&&this.manager.emit(this.options.event+Ep,vp),this.manager.emit(this.options.event,vp)}}),Ju(pm,km,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mm]},process:function(vp){var Ep=this.options,Pp=vp.pointers.length===Ep.pointers,zp=vp.distance<Ep.threshold,Yp=vp.deltaTime<Ep.time;if(this.reset(),1&vp.eventType&&this.count===0)return this.failTimeout();if(zp&&Yp&&Pp){if(vp.eventType!=4)return this.failTimeout();var mm=!this.pTime||vp.timeStamp-this.pTime<Ep.interval,gm=!this.pCenter||wp(this.pCenter,vp.center)<Ep.posThreshold;if(this.pTime=vp.timeStamp,this.pCenter=vp.center,gm&&mm?this.count+=1:this.count=1,this._input=vp,this.count%Ep.taps===0)return this.hasRequireFailures()?(this._timer=Wu(function(){this.state=8,this.tryEmit()},Ep.interval,this),2):8}return Cm},failTimeout:function(){return this._timer=Wu(function(){this.state=Cm},this.options.interval,this),Cm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),vm.VERSION="2.0.7",vm.defaults={domEvents:!1,touchAction:hm,enable:!0,inputTarget:null,inputClass:null,preset:[[xm,{enable:!1}],[Kp,{enable:!1},["rotate"]],[Am,{direction:6}],[Hp,{direction:6},["swipe"]],[pm],[pm,{event:"doubletap",taps:2},["tap"]],[am]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function wm(vp,Ep){var Pp;this.options=Fu({},vm.defaults,Ep||{}),this.options.inputTarget=this.options.inputTarget||vp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=vp,this.input=new((Pp=this).options.inputClass||(cp?Gp:hp?em:sp?tm:Fp))(Pp,Ip),this.touchAction=new Rm(this,this.options.touchAction),Pm(this,!0),qu(this.options.recognizers,function(zp){var Yp=this.add(new zp[0](zp[1]));zp[2]&&Yp.recognizeWith(zp[2]),zp[3]&&Yp.requireFailure(zp[3])},this)}function Pm(vp,Ep){var Pp,zp=vp.element;zp.style&&(qu(vp.options.cssProps,function(Yp,mm){Pp=ip(zp.style,mm),Ep?(vp.oldCssProps[Pp]=zp.style[Pp],zp.style[Pp]=Yp):zp.style[Pp]=vp.oldCssProps[Pp]||""}),Ep||(vp.oldCssProps={}))}return wm.prototype={set:function(vp){return Fu(this.options,vp),vp.touchAction&&this.touchAction.update(),vp.inputTarget&&(this.input.destroy(),this.input.target=vp.inputTarget,this.input.init()),this},stop:function(vp){this.session.stopped=vp?2:1},recognize:function(vp){var Ep=this.session;if(!Ep.stopped){var Pp;this.touchAction.preventDefaults(vp);var zp=this.recognizers,Yp=Ep.curRecognizer;(!Yp||Yp&&8&Yp.state)&&(Yp=Ep.curRecognizer=null);for(var mm=0;mm<zp.length;)Pp=zp[mm],Ep.stopped===2||Yp&&Pp!=Yp&&!Pp.canRecognizeWith(Yp)?Pp.reset():Pp.recognize(vp),!Yp&&14&Pp.state&&(Yp=Ep.curRecognizer=Pp),mm++}},get:function(vp){if(vp instanceof km)return vp;for(var Ep=this.recognizers,Pp=0;Pp<Ep.length;Pp++)if(Ep[Pp].options.event==vp)return Ep[Pp];return null},add:function(vp){if(Qu(vp,"add",this))return this;var Ep=this.get(vp.options.event);return Ep&&this.remove(Ep),this.recognizers.push(vp),vp.manager=this,this.touchAction.update(),vp},remove:function(vp){if(Qu(vp,"remove",this))return this;if(vp=this.get(vp)){var Ep=this.recognizers,Pp=up(Ep,vp);Pp!==-1&&(Ep.splice(Pp,1),this.touchAction.update())}return this},on:function(vp,Ep){if(vp!==Ou&&Ep!==Ou){var Pp=this.handlers;return qu(lp(vp),function(zp){Pp[zp]=Pp[zp]||[],Pp[zp].push(Ep)}),this}},off:function(vp,Ep){if(vp!==Ou){var Pp=this.handlers;return qu(lp(vp),function(zp){Ep?Pp[zp]&&Pp[zp].splice(up(Pp[zp],Ep),1):delete Pp[zp]}),this}},emit:function(vp,Ep){this.options.domEvents&&function(Yp,mm){var gm=$u.createEvent("Event");gm.initEvent(Yp,!0,!0),gm.gesture=mm,mm.target.dispatchEvent(gm)}(vp,Ep);var Pp=this.handlers[vp]&&this.handlers[vp].slice();if(Pp&&Pp.length){Ep.type=vp,Ep.preventDefault=function(){Ep.srcEvent.preventDefault()};for(var zp=0;zp<Pp.length;)Pp[zp](Ep),zp++}},destroy:function(){this.element&&Pm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Fu(vm,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Cm,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:bp,DIRECTION_ALL:30,Manager:wm,Input:Up,TouchAction:Rm,TouchInput:em,MouseInput:Fp,PointerEventInput:Gp,TouchMouseInput:tm,SingleTouchInput:Zp,Recognizer:km,AttrRecognizer:Wp,Tap:pm,Pan:Hp,Swipe:Am,Pinch:Kp,Rotate:xm,Press:am,on:_h,off:ep,each:qu,merge:_c,extend:Yu,assign:Fu,inherit:Ju,bindFn:Xu,prefixed:ip}),vm}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(_u,$u,Ru){var Ou=$u.offsetWidth,Fu=$u.offsetHeight,Nu=$u.getBoundingClientRect(),Vu=Nu.top,Gu=Nu.left;return Ru&&(Gu+=Ou*Ru.left,Vu+=Fu*(1-Ru.bottom-Ru.height),Ou*=Ru.width,Fu*=Ru.height),new r$3.Vector2((_u.x-Gu)/Ou*2-1,-(_u.y-Vu)/Fu*2+1)}var sa=new r$3.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$3.BufferGeometry;aa$1.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$3.Mesh(aa$1),ua=new r$3.Scene;ua.add(la);var ha$1=function(){function _u($u,Ru){var Ou;this.renderer=$u,this.material=new r$3.ShaderMaterial({vertexShader:(Ou=Ru.vertex)!==null&&Ou!==void 0?Ou:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Ru.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},Ru.uniforms),defines:Object.assign({},Ru.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Ru){var Ou=this.renderer.getRenderTarget(),Fu=la.material;this.material.uniforms.inputBuffer.value=$u.texture,la.material=this.material,this.renderer.setRenderTarget(Ru||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Ou),la.material=Fu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),ca$1=function(){function _u($u){this.renderer=$u,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Ru){var Ou=this.renderer.getRenderTarget(),Fu=la.material;this.material.uniforms.inputValue.value.copy($u),la.material=this.material,this.renderer.setRenderTarget(Ru||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Ou),la.material=Fu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),da$1=function(_u){function $u(Ru){return _u.call(this,Ru,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$3.__extends($u,_u),$u}(ha$1),pa=function(){function _u($u){this.enable=!0,this.renderer=$u,this.copyPass=new da$1(this.renderer)}return _u.prototype.render=function($u,Ru){this.copyPass.render($u,Ru)},_u.prototype.dispose=function(){this.copyPass.dispose()},_u}(),fa$1=function(_u){function $u(Ru){var Ou,Fu=this;Fu=_u.call(this)||this;var Nu=$u.parseArgs(Ru);return Fu.pending=!0,Fu.userAction=Nu.initial[3],Fu.destroyed=!1,Fu.ident=Nu.ident,Fu.scene=Nu.scene,Fu.helper=Nu.helper,Fu.camera=Nu.camera,Fu.renderer=Nu.renderer,Fu.scissor=Nu.scissor,Fu.element=Nu.element,Fu.model=Nu.model,Fu.enableIOSEDR=(Ou=Nu.enableIOSEDR)!==null&&Ou!==void 0&&Ou,Fu.work=Nu.work,Fu.imageOptions=Nu.imageOptions,Fu.videoTexture=Nu.videoTexture,Fu.networkSubscribe=Nu.networkSubscribe,Fu.requestProxy=Nu.requestProxy,Fu.needsRender=!0,Fu.maxFov=120,Fu.minFov=40,Fu.maxLatitude=+Math.PI/2,Fu.minLatitude=-Math.PI/2,Fu.cameraMotion=new Ro({longitude:{value:Fu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov}),Fu.eventUnbinds=[Nu.element].concat(Nu.extraElements||[]).map(function(Vu){return Fu.bindEvents(Vu)}),at.shared.add(function(){return Fu.initAnimation.apply(Fu,Nu.initial)},!0),Fu}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){return t$3.__assign({},Ru)},$u.initAnimationEndState=function(Ru){var Ou=this.parseArgs(Ru);return{longitude:Ou.camera.pose.longitude,latitude:Ou.camera.pose.latitude,fov:Ou.camera.pose.fov,offset:Ou.camera.pose.offset.clone(),distance:Ou.camera.pose.distance}},$u.prototype.destroy=function(){var Ru;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Ou=0,Fu=this.eventUnbinds;Ou<Fu.length;Ou++)(0,Fu[Ou])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),delete this.pressState},$u.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},$u.prototype.bindExtraElement=function(Ru){for(var Ou=0,Fu=this.eventUnbinds;Ou<Fu.length;Ou++)if(Fu[Ou].element===Ru)return;this.eventUnbinds.push(this.bindEvents(Ru))},$u.prototype.unbindExtraElement=function(Ru){for(var Ou=[],Fu=0,Nu=this.eventUnbinds;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Vu.element===Ru?Vu():Ou.push(Vu)}this.eventUnbinds=Ou},$u.prototype.updateRenderSize=function(){this.needsRender=!0},$u.prototype.updateModel=function(Ru){this.model=Ru,this.needsRender=!0},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){return this.work=Ru,this.userAction=Vu,!1},$u.prototype.updateTime=function(Ru,Ou){for(var Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){var Vu={};this.cameraMotion.ended&&(this.cameraMotion.update(Ru),Vu.longitude=this.cameraMotion.value.longitude,Vu.latitude=this.cameraMotion.value.latitude,Vu.fov=this.cameraMotion.value.fov),ia$1(Vu)&&this.setCamera(Vu)}},$u.prototype.render=function(){this.renderer.render(this.scene,this.camera)},$u.prototype.postProcessing=function(Ru,Ou){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Ru,Ou))},$u.prototype.updateCamera=function(Ru,Ou,Fu){return this.userAction=Fu,this.cameraMotion.set(Ru,Ou)},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},$u.prototype.moveToPano=function(Ru,Ou,Fu){Ou===void 0&&(Ou={}),this.userAction=Fu;var Nu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Ou.moveStartCallback&&Ou.moveStartCallback(Ru,Nu),this.emit("moveToPano",Ru,this.userAction),this.emit("panoWillArrive",Ru,Nu,this.userAction),this.emit("panoArrived",Ru,Nu,this.userAction),Ou.moveEndCallback&&Ou.moveEndCallback(Ru,Nu)},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){this.pending=!1,this.userAction=Nu},$u.prototype.setCamera=function(Ru){var Ou,Fu,Nu,Vu,Gu;Ru===void 0&&(Ru={});var Uu=(Ou=Ru.longitude)!==null&&Ou!==void 0?Ou:this.camera.pose.longitude,Hu=(Fu=Ru.latitude)!==null&&Fu!==void 0?Fu:this.camera.pose.latitude,Wu=(Nu=Ru.fov)!==null&&Nu!==void 0?Nu:this.camera.pose.fov,Qu=(Vu=Ru.distance)!==null&&Vu!==void 0?Vu:this.camera.pose.distance,qu=(Gu=Ru.offset)!==null&&Gu!==void 0?Gu:this.camera.pose.offset,Ku=this.camera.position.clone(),Yu=Vs$1(Uu,this.camera.pose.longitude,2*Math.PI)||Vs$1(Hu,this.camera.pose.latitude),_c=Vs$1(Wu,this.camera.pose.fov),Ju=Vs$1(Qu,this.camera.pose.distance),Xu=Hs(qu,this.camera.pose.offset);this.camera.setFromPose({longitude:Uu,latitude:Hu,fov:Wu,distance:Qu,offset:qu});var Zu=Hs(Ku,this.camera.position);_c&&this.emit("cameraFovUpdate",Wu,this.userAction),Yu&&this.emit("cameraDirectionUpdate",{longitude:Uu,latitude:Hu},this.userAction),Zu&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(_c||Yu||Xu||Ju)&&this.emit("cameraUpdate",{longitude:Uu,latitude:Hu,fov:Wu,offset:qu,distance:Qu},this.userAction),this.needsRender=!0},$u.prototype.onPanGesture=function(Ru){var Ou=this.panState,Fu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Ru.center.x,y:Ru.center.y},Ou!==void 0&&Ou.pointerLength===Fu){var Nu=Ru.pointers.map(function(Vu){return ii$1(Vu,["x","y"])});this.emit("wantsGesture","pan",Nu,Ru.isFinal)||this.emit("gesture","pan",Nu,Ru.isFinal)}},$u.prototype.onTapGesture=function(Ru){var Ou=Ru.pointers.map(function(Fu){return ii$1(Fu,["x","y"])});this.emit("wantsGesture","tap",Ou,!0)||this.emit("gesture","tap",Ou,!0)},$u.prototype.onPressGesture=function(Ru,Ou){var Fu,Nu=[Ru];if(this.emit("wantsGesture","press",Nu,Ou))return(Fu=this.pressState)===null||Fu===void 0||Fu.stop(),void delete this.pressState;this.emit("gesture","press",Nu,Ou)},$u.prototype.onPinchGesture=function(Ru){var Ou=Ru.pointers.map(function(Fu){return ii$1(Fu,["x","y"])});this.emit("wantsGesture","pinch",Ou,Ru.isFinal)||this.emit("gesture","pinch",Ou,Ru.isFinal)},$u.prototype.onMouseWheel=function(Ru){var Ou=(Math.abs(Ru.deltaY)>Math.abs(Ru.deltaX)?Ru.deltaY:Ru.deltaX)/-60,Fu=[{x:Ru.clientX,y:Ru.clientY,delta:Ou}];this.emit("wantsGesture","mouseWheel",Fu,!1)||this.emit("gesture","mouseWheel",Fu,!1)},$u.prototype.onMouseMove=function(Ru){},$u.prototype.onMouseOut=function(){},$u.prototype.relativeClientPosition=function(Ru){return oa(Ru,this.element,this.scissor)},$u.prototype.bindEvents=function(Ru){var Ou=this,Fu=function(ap){var lp=oa(ap,Ou.element,Ou.scissor);return!(Math.abs(lp.x)>1||Math.abs(lp.y)>1)},Nu=new ra.Manager(Ru),Vu=function(ap){return ap.session.firstInput||null};Nu.add(new ra.Pan({threshold:10,pointers:0})),Nu.add(new ra.Tap({interval:410})),Nu.add(new ra.Pinch({threshold:0,pointers:2})),Nu.on("panstart pan",function(ap){var lp=Vu(Nu);lp&&!Fu(lp.center)||(Ou.onPanGesture(ap),Ju())}),Nu.on("tap",function(ap){if(ap.pointerType!=="mouse"||ap.srcEvent.button===0){var lp=Vu(Nu);lp&&!Fu(lp.center)||(Ou.onTapGesture(ap),Ju())}}),Nu.on("pinchstart pinch pinchend",function(ap){var lp=Vu(Nu);lp&&!Fu(lp.center)||(Ou.onPinchGesture(ap),Ju())});var Gu=null,Uu=null,Hu=function(ap,lp,up){var _f=ap==="pinchend"?lp:lp-up.deltaY/280;return{type:ap,target:up.target,pointerType:"mouse",srcEvent:up,pointers:[{x:up.clientX,y:up.clientY}],isFirst:ap==="pinchstart",isFinal:ap==="pinchend",scale:ho$1(_f,.1,10),center:{x:up.clientX,y:up.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Wu=function(ap){var lp,up={x:ap.clientX,y:ap.clientY};if(Fu(up)){if(ap.preventDefault(),ap.ctrlKey){var _f=(lp=Gu==null?void 0:Gu.prevInput.scale)!==null&&lp!==void 0?lp:1,tp=Hu(Gu?"pinch":"pinchstart",_f,ap);Gu===null?Gu={firstInput:tp,prevInput:tp}:Gu.prevInput=tp,Ou.onPinchGesture(tp),Uu!==null&&window.clearTimeout(Uu),Uu=window.setTimeout(function(){var ip;Uu=null;var rp=(ip=Gu==null?void 0:Gu.prevInput.scale)!==null&&ip!==void 0?ip:1,op=Hu("pinchend",rp,ap);Gu=null,Ou.onPinchGesture(op)},200)}else Ou.onMouseWheel(ap);Ju()}},Qu=function(ap){if(!Zs()){var lp={x:ap.clientX,y:ap.clientY};Fu(lp)?(Ou.onMouseMove(ap),Ou.pressState&&Math.abs(ap.clientX-Ou.pressState.x)>10&&Math.abs(ap.clientY-Ou.pressState.y)>10&&Ju()):Ou.onMouseOut()}},qu=function(){Ou.onMouseOut(),Ju()},Ku=function(ap,lp){if(Fu(ap)){Ou.pressState={x:ap.x,y:ap.y,time:Ou.pressState?Ou.pressState.time:lp,stop:Qe$1};var up=lp-Ou.pressState.time;Ou.onPressGesture({x:ap.x,y:ap.y,delta:up},!1),Ou.pressState&&(Ou.pressState.stop=at.shared.add(function(_f){return Ku({x:ap.x,y:ap.y},_f)},!0,1))}else Ju()},Yu=function(ap){Ju(),ap.touches.length>1||ap.changedTouches.length<=0||Ku({x:ap.changedTouches[0].clientX,y:ap.changedTouches[0].clientY},_e$1())},_c=function(ap){Ju(),Ku({x:ap.clientX,y:ap.clientY},_e$1())},Ju=function(){var ap;if(Ou.pressState){var lp=_e$1()-Ou.pressState.time;Ou.onPressGesture({x:Ou.pressState.x,y:Ou.pressState.y,delta:lp},!0),(ap=Ou.pressState)===null||ap===void 0||ap.stop(),delete Ou.pressState}},Xu=null,Zu=function(ap){var lp,up="pinch",_f=!1,tp=!1;switch(ap.type){case"gesturestart":up="pinchstart",_f=!0;break;case"gestureend":up="pinchend",tp=!0}return{type:up,target:ap.target,pointerType:"mouse",srcEvent:ap,pointers:[{x:ap.clientX,y:ap.clientY}],isFirst:_f,isFinal:tp,scale:(lp=ap.scale)!==null&&lp!==void 0?lp:1,center:{x:ap.clientX,y:ap.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Xc=function(ap){if(ap.preventDefault(),!Zs()){var lp=Zu(ap),up=(Xu={firstInput:lp}).firstInput;up&&!Fu(up.center)||Ou.onPinchGesture(lp)}},_h=function(ap){if(ap.preventDefault(),!Zs()&&Xu){var lp=Zu(ap),up=Xu.firstInput;up&&!Fu(up.center)||Ou.onPinchGesture(lp)}},ep=function(ap){if(ap.preventDefault(),!Zs()&&Xu){var lp=Zu(ap),up=Xu.firstInput;Xu=null,up&&!Fu(up.center)||Ou.onPinchGesture(lp)}},np=function(ap){if(ap&&typeof ap.preventDefault=="function"&&ap.currentTarget===Ru&&ap.preventDefault(),typeof getSelection=="function"){var lp=getSelection();lp&&lp.focusNode&&(lp.removeAllRanges&&lp.removeAllRanges(),lp.empty&&lp.empty())}};return Ru.addEventListener("wheel",Wu,{passive:!1}),Ru.addEventListener("mousemove",Qu,!1),Ru.addEventListener("mouseout",qu,!1),Ru.addEventListener("touchstart",Yu,!1),Ru.addEventListener("touchend",Ju,!1),Ru.addEventListener("touchcancel",Ju,!1),Ru.addEventListener("mousedown",_c,!1),Ru.addEventListener("mouseup",Ju,!1),Ru.addEventListener("gesturestart",Xc,{passive:!1}),Ru.addEventListener("gesturechange",_h,{passive:!1}),Ru.addEventListener("gestureend",ep,{passive:!1}),Ru.addEventListener("touchstart",np,!1),Ru.addEventListener("contextmenu",np,!1),Object.assign(function(){Nu.destroy(),Ru.removeEventListener("wheel",Wu,!1),Ru.removeEventListener("mousemove",Qu,!1),Ru.removeEventListener("mouseout",qu,!1),Ru.removeEventListener("touchstart",Yu,!1),Ru.removeEventListener("touchend",Ju,!1),Ru.removeEventListener("touchcancel",Ju,!1),Ru.removeEventListener("mousedown",_c,!1),Ru.removeEventListener("mouseup",Ju,!1),Ru.removeEventListener("gesturestart",Xc,!1),Ru.removeEventListener("gesturechange",_h,!1),Ru.removeEventListener("gestureend",ep,!1),Ru.removeEventListener("touchstart",np,!1),Ru.removeEventListener("contextmenu",np,!1)},{element:Ru})},$u}(Fe),Aa=function(_u){function $u(Ru){var Ou,Fu,Nu,Vu,Gu=this,Uu=$u.parseArgs(Ru);return(Gu=_u.call(this,Uu)||this).defaultLongitude=Uu.defaultLongitude,Gu.defaultLatitude=Uu.defaultLatitude,Gu.defaultFov=Uu.defaultFov,Gu.maxFov=Uu.maxFov,Gu.minFov=Uu.minFov,Gu.maxLatitude=Uu.maxLatitude,Gu.minLatitude=Uu.minLatitude,Gu.locationMotion=new Ro({x:Gu.camera.pose.offset.x,y:Gu.camera.pose.offset.y,z:Gu.camera.pose.offset.z,distance:Gu.camera.pose.distance,modelAlpha:(Fu=(Ou=Gu.model.getMaterial())===null||Ou===void 0?void 0:Ou.modelAlpha)!==null&&Fu!==void 0?Fu:0,perspToOrtho:(Vu=(Nu=Gu.model.getMaterial())===null||Nu===void 0?void 0:Nu.perspToOrtho)!==null&&Vu!==void 0?Vu:0}),Gu}return t$3.__extends($u,_u),$u.distanceFromModel=function(Ru,Ou,Fu){var Nu=Ru.bounding,Vu=Math.pow(Math.pow(Nu.max.x-Nu.min.x+1,2)+Math.pow(Nu.max.y-Nu.min.y+1,2)+Math.pow(Nu.max.z-Nu.min.z+1,2),.5),Gu=Vu/2/Math.tan(Math.PI*Ou/360);return Fu<1&&(Gu/=Fu),isNaN(Gu)?Vu:Gu},$u.parseArgs=function(Ru){var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu=_u.parseArgs.call(this,Ru);return t$3.__assign(t$3.__assign({},Wu),{defaultLongitude:(Ou=Ru.defaultLongitude)!==null&&Ou!==void 0?Ou:Math.PI/4,defaultLatitude:(Fu=Ru.defaultLatitude)!==null&&Fu!==void 0?Fu:Math.PI/4,defaultFov:(Nu=Ru.defaultFov)!==null&&Nu!==void 0?Nu:80,maxFov:(Vu=Ru.maxFov)!==null&&Vu!==void 0?Vu:120,minFov:(Gu=Ru.minFov)!==null&&Gu!==void 0?Gu:40,maxLatitude:(Uu=Ru.maxLatitude)!==null&&Uu!==void 0?Uu:+Math.PI/2,minLatitude:(Hu=Ru.minLatitude)!==null&&Hu!==void 0?Hu:-Math.PI/2})},$u.initAnimationEndPose=function(Ru){var Ou,Fu,Nu,Vu=this.parseArgs(Ru),Gu=Ru.initial[1];return{longitude:(Ou=Gu.longitude)!==null&&Ou!==void 0?Ou:Vu.defaultLongitude,latitude:ho$1((Fu=Gu.latitude)!==null&&Fu!==void 0?Fu:Vu.defaultLatitude,Vu.minLatitude,Vu.maxLatitude),fov:(Nu=Gu.fov)!==null&&Nu!==void 0?Nu:Vu.defaultFov,offset:Ru.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(Vu.model,Vu.defaultFov,Vu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){return this.work=Ru,this.updateCamera(Fu,Nu!=null?Nu:0,Vu),!0},$u.prototype.updateModel=function(Ru){_u.prototype.updateModel.call(this,Ru);var Ou=Ru.bounding.getCenter(new r$3.Vector3),Fu=$u.distanceFromModel(Ru,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z,distance:Fu},0).catch(Qe$1)},$u.prototype.updateTime=function(Ru,Ou){for(var Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){var Vu={},Gu={};this.locationMotion.ended||(this.locationMotion.update(Ru),Vu.modelAlpha=this.locationMotion.value.modelAlpha,Vu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Ru),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Vu)||this.model.setMaterial(Vu),ia$1(Gu)||this.setCamera(Gu)}},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Ou=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,offset:new r$3.Vector3(Ou.value.x,Ou.value.y,Ou.value.z),distance:Ou.value.distance}},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;if(!this.destroyed){this.pending=!1,this.userAction=Nu;var Wu={longitude:(Vu=Ou.longitude)!==null&&Vu!==void 0?Vu:this.defaultLongitude,latitude:ho$1((Gu=Ou.latitude)!==null&&Gu!==void 0?Gu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Uu=Ou.fov)!==null&&Uu!==void 0?Uu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Qu=ii$1(Wu,["longitude","latitude","fov"]),qu={x:Wu.offset.x,y:Wu.offset.y,z:Wu.offset.z,distance:Wu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Ru,Wu,this.userAction),this.cameraMotion.set(Qu,Fu).catch(Qe$1),this.locationMotion.set(qu,Fu).then(function(){Hu.emit("initAnimationEnded",Ru,Wu,Hu.userAction)},function(Ku){var Yu=na(Hu.camera.pose);Hu.emit("initAnimationEnded",Ru,Yu,Hu.userAction)}).catch(Qe$1)}},$u.prototype.updateRenderSize=function(){this.locationMotion.set({distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.getForwardPanoIndexOrNot=function(Ru){var Ou=this.work.observers.filter(function(Gu){return Gu.active}),Fu=this.model.intersectRaycaster(Ru)[0];if(!Fu)return null;var Nu=ta(Ou,function(Gu){return Gu.standingPosition.distanceTo(Fu.point)},!0),Vu=Nu[0];return Nu[1]<5?this.work.observers.indexOf(Vu):null},$u.prototype.coordinatesForOffset=function(Ru){var Ou=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Ru.x/(Ou.x*this.scissor.width),latitude:2*Ru.y/(Ou.y*this.scissor.height)}},$u.prototype.requestInteriaMovement=function(Ru,Ou){var Fu=this;if(this.interiaMovement!==!1){for(var Nu=t$3.__assign({},Ru),Vu={longitude:0,latitude:0},Gu=0;Gu<Ou;Gu++)Nu.longitude*=.996,Nu.latitude*=.994008,Vu.longitude+=Nu.longitude,Vu.latitude+=Nu.latitude;var Uu=Gs$1(this.cameraMotion.value.longitude+Vu.longitude),Hu=ho$1(this.cameraMotion.value.latitude+Vu.latitude,this.minLatitude,this.maxLatitude),Wu={longitude:Uu,latitude:Hu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Uu,latitude:Hu},0).catch(Qe$1);var Qu=Nu.longitude>1e-4||Nu.longitude<-1e-4||Nu.latitude>1e-4||Nu.latitude<-1e-4;this.emit("interiaPan",Wu,!Qu),Qu?at.shared.add(function(qu,Ku){Fu.requestInteriaMovement(Nu,0|Ku)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Ru){var Ou=this.panState,Fu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Ru.center.x,y:Ru.center.y},Ou!==void 0&&Ou.pointerLength===Fu){var Nu=Ru.pointers.map(function(_c){return ii$1(_c,["x","y"])});if(!this.emit("wantsGesture","pan",Nu,Ru.isFinal)){var Vu={x:Ru.center.x-Ou.x,y:Ru.center.y-Ou.y},Gu=this.relativeClientPosition(Ru.center),Uu=this.camera.pose.latitude<Math.PI/6||Gu.y<0?-1:1;Vu.x*=Uu;var Hu=this.coordinatesForOffset(Vu),Wu=Gs$1(this.cameraMotion.value.longitude+Hu.longitude),Qu=ho$1(this.cameraMotion.value.latitude+Hu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Ru.overallVelocityX)>.2&&Math.atan2(Math.abs(Ru.overallVelocityY),Math.abs(Ru.overallVelocityX))<Math.PI/6.923&&(Qu=this.cameraMotion.value.latitude);var qu={longitude:Wu,latitude:Qu,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",qu,Ru.isFinal)&&(this.emit("gesture","pan",Nu,Ru.isFinal),this.emit("panGesture",qu,Ru.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:qu.longitude,latitude:qu.latitude},0).catch(Qe$1),Ru.isFinal&&!this.emit("wantsInteriaPan",qu))){this.interiaMovement=!0;var Ku=Ru.velocityX*Uu,Yu=Ru.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Ku,y:Yu}),0)}}}},$u.prototype.onPinchGesture=function(Ru){var Ou,Fu=(Ou=this.pinchState)===null||Ou===void 0?void 0:Ou.fov,Nu=!1;if(Ru.type!=="pinchstart"){if(Ru.type==="pinchend"&&(Nu=!0,delete this.panState,delete this.pinchState),Fu!==void 0){var Vu=Ru.pointers.map(function(Uu){return ii$1(Uu,["x","y"])});if(!this.emit("wantsGesture","pinch",Vu,Nu)){var Gu=ho$1(Fu/Ru.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ru.scale,Gu,Nu)||this.emit("wantsChangeCameraFov",Gu)||(this.emit("gesture","pinch",Vu,Nu),this.emit("pinchGesture",Ru.scale,Gu,Nu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Gu},0).catch(Qe$1),this.onPanGesture(Ru))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Ru){var Ou=this,Fu=(Math.abs(Ru.deltaY)>Math.abs(Ru.deltaX)?Ru.deltaY:Ru.deltaX)/-60,Nu=[{x:Ru.clientX,y:Ru.clientY,delta:Fu}];if(!this.emit("wantsGesture","mouseWheel",Nu,!1)){var Vu=this.minFov,Gu=this.maxFov,Uu=ho$1(this.camera.fov-Fu,Vu,Gu);this.emit("wantsMouseWheel",Fu,Uu,!1)||this.emit("wantsChangeCameraFov",Uu)||(this.emit("gesture","mouseWheel",Nu,!1),this.emit("mouseWheel",Fu,Uu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Uu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ou.mouseWheelState,Ou.emit("wantsGesture","mouseWheel",Nu,!0)||Ou.emit("wantsMouseWheel",Fu,Uu,!0)||(Ou.emit("gesture","mouseWheel",Nu,!0),Ou.emit("mouseWheel",0,Uu,!0))},200)})}},$u.prototype.onTapGesture=function(Ru){var Ou=Ru.pointers.map(function(Uu){return ii$1(Uu,["x","y"])});if(!this.emit("wantsGesture","tap",Ou,!0)){var Fu=this.relativeClientPosition(Ru.center),Nu=new r$3.Raycaster;if(Nu.setFromCamera(Fu,this.camera),!this.emit("wantsTapGesture",Nu,Fu,!0)){this.emit("gesture","tap",Ou,!0),this.emit("tapGesture",Nu,Fu,!0),this.interiaMovement=!1;var Vu=this.getForwardPanoIndexOrNot(Nu);if(!oo(Vu)){this.emit("panoSelected",Vu);var Gu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Vu,Gu,!0)}}}},$u.prototype.onPressGesture=function(Ru,Ou){var Fu,Nu,Vu=[Ru];if(this.emit("wantsGesture","press",Vu,Ou))return(Fu=this.pressState)===null||Fu===void 0||Fu.stop(),void delete this.pressState;var Gu=this.relativeClientPosition(Ru),Uu=new r$3.Raycaster;if(Uu.setFromCamera(Gu,this.camera),this.emit("wantsPressGesture",Uu,Gu,Ru.delta,Ou))return(Nu=this.pressState)===null||Nu===void 0||Nu.stop(),void delete this.pressState;this.emit("gesture","press",Vu,Ou),this.emit("pressGesture",Uu,Gu,Ru.delta,Ou)},$u}(fa$1),ga$1=function(_u){function $u(Ru){var Ou=$u.parseArgs(Ru);return _u.call(this,Ou)||this}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou=[Ru.initial[0],t$3.__assign(t$3.__assign({},Ru.initial[1]),{longitude:0,latitude:Math.PI/2}),Ru.initial[2],Ru.initial[3]],Fu=t$3.__assign(t$3.__assign({},Ru),{initial:Ou,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return _u.parseArgs.call(this,Fu)},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.updateModel=function(Ru){this.model=Ru,this.needsRender=!0;var Ou=Ru.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu=this;if(!this.destroyed){this.pending=!1,this.userAction=Nu;var Uu={longitude:0,latitude:Math.PI/2,fov:ho$1((Vu=Ou.fov)!==null&&Vu!==void 0?Vu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Hu=ii$1(Uu,["longitude","latitude","fov"]),Wu={x:Uu.offset.x,y:Uu.offset.y,z:Uu.offset.z,distance:Uu.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Hu,Fu).catch(Qe$1),this.locationMotion.set(Wu,Fu).then(function(){Gu.emit("initAnimationEnded",Ru,Uu,Gu.userAction)},function(Qu){var qu=na(Gu.camera.pose);Gu.emit("initAnimationEnded",Ru,qu,Gu.userAction)})}},$u.prototype.getZoomOffsetFromFov=function(Ru,Ou,Fu){var Nu=new r$3.Vector3(0,-1,0),Vu=Math.tan(Fu/2*Math.PI/180),Gu=Math.tan(Ou.fov/2*Math.PI/180),Uu=(Gu-Vu)/Gu,Hu=new r$3.Raycaster;Hu.setFromCamera(Ru,Ou);var Wu=Hu.ray.direction,Qu=Wu.angleTo(Nu),qu=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),Ku=qu*Math.tan(Qu),Yu=Wu.clone().setLength(qu*Math.cos(Qu)).projectOnPlane(Nu),_c=Yu.length(),Ju=Uu/_c*Yu.x*Ku,Xu=Uu/_c*Yu.z*Ku;return new r$3.Vector3(Ju,0,Xu)},$u.prototype.requestInteriaMovement=function(Ru,Ou){},$u.prototype.onPanGesture=function(Ru){var Ou=this.panState,Fu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Ru.center.x,y:Ru.center.y},Ou!==void 0&&Ou.pointerLength===Fu){var Nu=Ru.pointers.map(function(Ju){return ii$1(Ju,["x","y"])});if(!this.emit("wantsGesture","pan",Nu,Ru.isFinal)){var Vu=Ru.center.x-Ou.x,Gu=Ru.center.y-Ou.y,Uu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Hu=this.model.bounding,Wu=Hu.getCenter(new r$3.Vector3),Qu=(Hu.max.x-Hu.min.x)/this.defaultFov*this.cameraMotion.value.fov,qu=(Hu.max.y,Hu.min.y,this.defaultFov,this.cameraMotion.value.fov,(Hu.max.z-Hu.min.z)/this.defaultFov*this.cameraMotion.value.fov),Ku=(this.camera.position.y-Hu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Yu=this.renderer.getSize(new r$3.Vector2);Uu.add(function(Ju,Xu){var Zu=new r$3.Vector3;return Zu.setFromMatrixColumn(Xu,0),Zu.multiplyScalar(-Ju),Zu}(2*Vu*Ku/Yu.y,this.camera.matrix)),Uu.add(function(Ju,Xu,Zu){var Xc=new r$3.Vector3;return Xc.setFromMatrixColumn(Zu,0),Xc.crossVectors(Xu,Xc),Xc.multiplyScalar(Ju),Xc}(2*Gu*Ku/Yu.y,this.camera.up,this.camera.matrix)),Uu.x=ho$1(Uu.x,Wu.x-Qu,Wu.x+Qu),Uu.z=ho$1(Uu.z,Wu.z-qu,Wu.z+qu),Uu.y=Wu.y;var _c={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Uu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",_c,Ru.isFinal)||(this.emit("gesture","pan",Nu,Ru.isFinal),this.emit("panGesture",_c,Ru.isFinal),this.userAction=!0,this.locationMotion.set({x:Uu.x,y:Uu.y,z:Uu.z},0).catch(Qe$1))}}},$u.prototype.onPinchGesture=function(Ru){var Ou,Fu=(Ou=this.pinchState)===null||Ou===void 0?void 0:Ou.fov,Nu=!1;if(Ru.type!=="pinchstart"){if(Ru.type==="pinchend"&&(Nu=!0,delete this.pinchState),Fu!==void 0){var Vu=Ru.pointers.map(function(Qu){return ii$1(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",Vu,Nu)){var Gu=ho$1(Fu/Ru.scale,this.minFov,this.maxFov),Uu=this.relativeClientPosition({x:Ru.center.x,y:Ru.center.y}),Hu=this.getZoomOffsetFromFov(Uu,this.camera,Gu),Wu=this.camera.pose.offset.clone().add(Hu);this.emit("wantsPinchGesture",Ru.scale,Gu,Nu)||this.emit("wantsChangeCameraFov",Gu)||(this.emit("gesture","pinch",Vu,Nu),this.emit("pinchGesture",Ru.scale,Gu,Nu),this.userAction=!0,this.locationMotion.set({x:Wu.x,y:Wu.y,z:Wu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Gu},0).catch(Qe$1),this.onPanGesture(Ru))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Ru){var Ou=this,Fu=(Math.abs(Ru.deltaY)>Math.abs(Ru.deltaX)?Ru.deltaY:Ru.deltaX)/-60,Nu=[{x:Ru.clientX,y:Ru.clientY,delta:Fu}];if(!this.emit("wantsGesture","mouseWheel",Nu,!1)){var Vu=ho$1(this.cameraMotion.value.fov-Fu,this.minFov,this.maxFov),Gu=this.relativeClientPosition({x:Ru.clientX,y:Ru.clientY}),Uu=this.getZoomOffsetFromFov(Gu,this.camera,Vu),Hu=this.camera.pose.offset.clone().add(Uu);this.emit("wantsMouseWheel",Fu,Vu,!1)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","mouseWheel",Nu,!1),this.emit("mouseWheel",Fu,Vu,!1),this.userAction=!0,this.locationMotion.set({x:Hu.x,y:Hu.y,z:Hu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Vu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ou.mouseWheelState,Ou.emit("wantsGesture","mouseWheel",Nu,!0)||Ou.emit("wantsMouseWheel",Fu,Vu,!0)||Ou.emit("wantsChangeCameraFov",Vu)||(Ou.emit("gesture","mouseWheel",Nu,!0),Ou.emit("mouseWheel",0,Vu,!0))},200)})}},$u}(Aa);function ma(_u,$u){$u===void 0&&($u=!1);var Ru=typeof _u;if(Ru==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Ou="[",Fu=_u.length-1,Nu=0;Nu<Fu;Nu++)Ou+=ma(_u[Nu],!1)+",";return Fu>-1&&(Ou+=ma(_u[Nu],!1)),Ou+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return ma(_u.toJSON(),$u);var Vu=Object.keys(_u).sort(),Gu=Vu.length;for(Ou="",Nu=0;Nu<Gu;){var Uu=Vu[Nu],Hu=ma(_u[Uu],!0);Hu!==void 0&&(Nu&&Ou!==""&&(Ou+=","),Ou+=JSON.stringify(Uu)+":"+Hu),Nu++}return"{"+Ou+"}"}switch(Ru){case"function":case"undefined":return $u?void 0:null;case"number":return _u;default:return isFinite(_u)?_u:null}}function va(_u){return Te(String(ma(_u,!1)))}var ya,ba$1=function(_u){function $u(Ru){var Ou=this,Fu=$u.parseArgs(Ru);return(Ou=_u.call(this,Fu)||this).defaultLongitude=Fu.defaultLongitude,Ou.defaultLatitude=Fu.defaultLongitude,Ou.defaultFov=Fu.defaultFov,Ou.maxFov=Fu.maxFov,Ou.minFov=Fu.minFov,Ou.maxLatitude=Fu.maxLatitude,Ou.minLatitude=Fu.minLatitude,Ou.moveSpeed=Fu.moveSpeed,Ou.intersectMeshCreator=Fu.intersectMeshCreator,Ou.interiaMovement=!1,Ou.intersectMesh=Ou.intersectMeshCreator(),Ou.intersectMesh.name="intersect",Ou.intersectMesh.visible=!1,Ou.helper.add(Ou.intersectMesh),Ou}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu=_u.parseArgs.call(this,Ru);return t$3.__assign(t$3.__assign({},qu),{defaultLongitude:(Ou=Ru.defaultLongitude)!==null&&Ou!==void 0?Ou:0,defaultLatitude:(Fu=Ru.defaultLatitude)!==null&&Fu!==void 0?Fu:0,defaultFov:(Nu=Ru.defaultFov)!==null&&Nu!==void 0?Nu:90,maxFov:(Vu=Ru.maxFov)!==null&&Vu!==void 0?Vu:120,minFov:(Gu=Ru.minFov)!==null&&Gu!==void 0?Gu:40,maxLatitude:(Uu=Ru.maxLatitude)!==null&&Uu!==void 0?Uu:+Math.PI/2,minLatitude:(Hu=Ru.minLatitude)!==null&&Hu!==void 0?Hu:-Math.PI/2,moveSpeed:(Wu=Ru.moveSpeed)!==null&&Wu!==void 0?Wu:3.2,intersectMeshCreator:(Qu=Ru.intersectMeshCreator)!==null&&Qu!==void 0?Qu:function(){return new Fs}})},$u.initAnimationEndPose=function(Ru){var Ou,Fu,Nu,Vu=this.parseArgs(Ru),Gu=Ru.initial,Uu=Gu[0],Hu=Gu[1];return{longitude:(Ou=Hu.longitude)!==null&&Ou!==void 0?Ou:Vu.defaultLongitude,latitude:ho$1((Fu=Hu.latitude)!==null&&Fu!==void 0?Fu:Vu.defaultLatitude,Vu.minLatitude,Vu.maxLatitude),fov:ho$1((Nu=Hu.fov)!==null&&Nu!==void 0?Nu:Vu.defaultFov,Vu.minFov,Vu.maxFov),offset:Vu.work.observers[Uu].position.clone(),distance:0}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},$u.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&_u.prototype.isReady.call(this)},$u.prototype.calculateMovingDuration=function(Ru,Ou){switch(typeof Ru){case"function":return Ru(Ou,this.moveSpeed);case"number":return Ru;case"string":return Number(Ru);default:return ho$1(Ou,1,3)/this.moveSpeed*1e3}},$u.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},$u.prototype.coordinatesForOffset=function(Ru){var Ou=this.cameraMotion.value.fov,Fu=this.camera.aspect,Nu=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Ru.x/(Nu.x*this.scissor.width)*Ou/95*Fu,latitude:-2*Ru.y/(Nu.y*this.scissor.height)*Ou/95}},$u.prototype.cameraBounce=function(){var Ru=this.cameraMotion.value,Ou=Ru.longitude,Fu=Ru.latitude,Nu=Ru.fov,Vu=[{progress:0,value:{longitude:Ou,latitude:Fu,fov:Nu}},{progress:.5,value:{longitude:Ou,latitude:Fu,fov:.98*Nu}},{progress:1,value:{longitude:Ou,latitude:Fu,fov:Nu}}];this.cameraMotion.setKeyframes(Vu,500).catch(Qe$1)},$u.prototype.requestInteriaMovement=function(Ru,Ou){var Fu=this;if(this.interiaMovement!==!1){for(var Nu=t$3.__assign({},Ru),Vu={longitude:0,latitude:0},Gu=0;Gu<Ou;Gu++)Nu.longitude*=.996,Nu.latitude*=.98604,Vu.longitude+=Nu.longitude,Vu.latitude+=Nu.latitude;var Uu=Gs$1(this.cameraMotion.value.longitude+Vu.longitude),Hu=ho$1(this.cameraMotion.value.latitude+Vu.latitude,this.minLatitude,this.maxLatitude),Wu={longitude:Uu,latitude:Hu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Uu,latitude:Hu},0).catch(Qe$1);var Qu=Nu.longitude>1e-4||Nu.longitude<-1e-4||Nu.latitude>1e-4||Nu.latitude<-1e-4;this.emit("interiaPan",Wu,!Qu),Qu?at.shared.add(function(qu,Ku){Fu.requestInteriaMovement(Nu,0|Ku)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Ru){var Ou=this.panState,Fu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Ru.center.x,y:Ru.center.y},Ou!==void 0&&Ou.pointerLength===Fu){var Nu=Ru.pointers.map(function(Yu){return ii$1(Yu,["x","y"])});if(!this.emit("wantsGesture","pan",Nu,Ru.isFinal)){var Vu={x:Ru.center.x-Ou.x,y:Ru.center.y-Ou.y},Gu=this.coordinatesForOffset(Vu),Uu=Gs$1(this.cameraMotion.value.longitude+Gu.longitude),Hu=ho$1(this.cameraMotion.value.latitude+Gu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Ru.overallVelocityX)>.2&&Math.atan2(Math.abs(Ru.overallVelocityY),Math.abs(Ru.overallVelocityX))<Math.PI/6.923&&(Hu=this.cameraMotion.value.latitude);var Wu={longitude:Uu,latitude:Hu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Wu,Ru.isFinal)){this.emit("gesture","pan",Nu,Ru.isFinal),this.emit("panGesture",Wu,Ru.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Qu={longitude:Wu.longitude,latitude:Wu.latitude,fov:Wu.fov};if(this.cameraMotion.set(Qu,0).catch(Qe$1),Ru.isFinal&&!this.emit("wantsInteriaPan",Wu)){this.interiaMovement=!0;var qu=Ru.velocityX,Ku=.6*Ru.velocityY;Math.abs(Ku)>.5&&Math.abs(qu)<.5&&(qu=0),this.requestInteriaMovement(this.coordinatesForOffset({x:qu,y:Ku}),0)}}}}},$u.prototype.onPinchGesture=function(Ru){var Ou,Fu=(Ou=this.pinchState)===null||Ou===void 0?void 0:Ou.fov,Nu=Ru.scale,Vu=!1;if(Ru.type!=="pinchstart"){if(Ru.type==="pinchend"&&(Vu=!0,delete this.pinchState),Fu!==void 0){var Gu=Ru.pointers.map(function(Hu){return ii$1(Hu,["x","y"])});if(!this.emit("wantsGesture","pinch",Gu,Vu)){var Uu=ho$1(Fu/Nu,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Nu,Uu,Vu)||this.emit("wantsChangeCameraFov",Uu)||(this.emit("gesture","pinch",Gu,Vu),this.emit("pinchGesture",Nu,Uu,Vu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Uu},0).catch(Qe$1),this.onPanGesture(Ru))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Ru){var Ou=this,Fu=(Math.abs(Ru.deltaY)>Math.abs(Ru.deltaX)?Ru.deltaY:Ru.deltaX)/-60,Nu=[{x:Ru.clientX,y:Ru.clientY,delta:Fu}];if(!this.emit("wantsGesture","mouseWheel",Nu,!1)){var Vu=ho$1(this.cameraMotion.value.fov-Fu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Fu,Vu,!1)||this.emit("wantsChangeCameraFov",Vu)||(this.emit("gesture","mouseWheel",Nu,!1),this.emit("mouseWheel",Fu,Vu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Vu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ou.mouseWheelState,Ou.emit("wantsGesture","mouseWheel",Nu,!0)||Ou.emit("wantsMouseWheel",Fu,Vu,!0)||Ou.emit("wantsChangeCameraFov",Vu)||(Ou.emit("gesture","mouseWheel",Nu,!0),Ou.emit("mouseWheel",0,Vu,!0))},200)})}},$u.prototype.onMouseMove=function(Ru){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Ou=this.relativeClientPosition({x:Ru.clientX,y:Ru.clientY}),Fu=new r$3.Raycaster;if(Fu.setFromCamera(Ou,this.camera),this.emit("wantsShowIntersectionOnModel",Fu))this.hideIntersectMesh();else{var Nu=this.model.intersectRaycaster(Fu)[0];if(Nu&&Nu.face){var Vu=Nu.face.normal,Gu=Vu.clone().multiplyScalar(.05),Uu=Nu.point.clone().add(Gu);this.intersectMesh.position.copy(Uu);var Hu=Uu.clone().add(Gu);if(this.intersectMesh.lookAt(Hu),Math.abs(Vu.y)>.99){var Wu=this.camera.position.clone().sub(Uu);this.intersectMesh.rotation.z=-Math.atan2(Wu.z,Wu.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Nu,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Ru.clientX,clientY:Ru.clientY}}}},$u.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},$u.prototype.onPressGesture=function(Ru,Ou){var Fu,Nu,Vu=[Ru];if(this.emit("wantsGesture","press",Vu,Ou))return(Fu=this.pressState)===null||Fu===void 0||Fu.stop(),void delete this.pressState;var Gu=this.relativeClientPosition(Ru),Uu=new r$3.Raycaster;if(Uu.setFromCamera(Gu,this.camera),this.emit("wantsPressGesture",Uu,Gu,Ru.delta,Ou))return(Nu=this.pressState)===null||Nu===void 0||Nu.stop(),void delete this.pressState;this.emit("gesture","press",Vu,Ou),this.emit("pressGesture",Uu,Gu,Ru.delta,Ou)},$u}(fa$1);function xa(){return ya||(ya=new Promise(function(_u){var $u,Ru=document.createElement("video");Ru.muted=!0,Ru.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Ru.addEventListener("timeupdate",function Ou(){Ru.removeEventListener("timeupdate",Ou,!1),clearTimeout($u);var Fu=document.createElement("canvas");Fu.width=Fu.height=1;var Nu=Fu.getContext("2d");Nu?(Nu.drawImage(Ru,0,0,1,1),Nu.getImageData(0,0,1,1).data[3]>10?_u(!0):_u(!1)):_u(!1)},!1),Ru.addEventListener("canplay",function Ou(){Ru.removeEventListener("canplay",Ou,!1),Ru.play()},!1),$u=window.setTimeout(function(){return _u(!1)},1e3)}))}var wa,Ea=function(_u){function $u(Ru,Ou){return Ou===void 0&&(Ou=.5),_u.call(this,Ru,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(Ou)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$3.__extends($u,_u),$u}(ha$1),Ma$1=function(_u){function $u(Ru,Ou){Ou===void 0&&(Ou=.002);var Fu=_u.call(this,Ru,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(Ou)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Fu.material.extensions.shaderTextureLOD=!0,Fu}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Ru){this.material.uniforms.targetBuffer.value=Ru},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Ru){this.material.uniforms.step.value=Ru},enumerable:!1,configurable:!0}),$u}(ha$1),Ia=function(_u){function $u(Ru){var Ou=_u.call(this,Ru,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Ou.material.transparent=!0,Ou}return t$3.__extends($u,_u),Object.defineProperty($u.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Ru){this.material.uniforms.luminanceAdaptiveBuffer.value=Ru},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Ru){this.material.uniforms.progress.value=Ru},enumerable:!1,configurable:!0}),$u}(ha$1),Sa=function(_u){function $u(Ru){var Ou=_u.call(this,Ru)||this;return Ou.enableTime=_e$1(),Ou.renderer=Ru,Ou.valuePass=new ca$1(Ou.renderer),Ou.luminancePass=new Ea(Ou.renderer,Math.sqrt(1/3)),Ou.nextStepPass=new Ma$1(Ou.renderer,.01),Ou.luminanceAdaptivePass=new Ia(Ou.renderer),Ou}return t$3.__extends($u,_u),$u.prototype.render=function(Ru,Ou){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Ru);this.enableTime===null&&(this.enableTime=_e$1()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Ru,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e$1()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Ru,Ou)},$u.prototype.dispose=function(){var Ru,Ou,Fu;(Ru=this.luminanceTargetBuffer)===null||Ru===void 0||Ru.dispose(),(Ou=this.luminancePrevBuffer)===null||Ou===void 0||Ou.dispose(),(Fu=this.luminanceNextBuffer)===null||Fu===void 0||Fu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},$u}(pa),Ca=["up","down","left","right","front","back"],Ba$1=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta={up:new r$3.Quaternion(Ba$1,0,0,Ba$1),down:new r$3.Quaternion(-Ba$1,0,0,Ba$1),left:new r$3.Quaternion(0,Ba$1,0,Ba$1),right:new r$3.Quaternion(0,-Ba$1,0,Ba$1),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},Pa=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Ra$1=new r$3.PerspectiveCamera,ka=new r$3.Frustum,Da$1=new r$3.Matrix4,La$1=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa$1=new Float32Array([0,0,1,0,0,1,1,1]),Na$1=new Uint8Array([0,1,2,1,3,2]),Fa$1=new r$3.BufferGeometry;Fa$1.setAttribute("position",new r$3.BufferAttribute(La$1,3)),Fa$1.setAttribute("uv",new r$3.BufferAttribute(Oa$1,2)),Fa$1.setIndex(new r$3.BufferAttribute(Na$1,1));var Qa$1=function(_u){function $u(){var Ru=_u.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Ru.depthTest=!1,Ru.depthWrite=!1,Ru.blending=r$3.NoBlending,Ru.map=Ru.uniforms.map.value,Ru.luminanceMap=Ru.uniforms.luminanceMap.value,Object.defineProperties(Ru,{map:{get:function(){return this.uniforms.map.value},set:function(Ou){this.uniforms.map.value=Ou}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Ou){this.uniforms.luminanceMap.value=Ou,this.defines.USE_LUMINANCE=Ou!==null,this.needsUpdate=!0}}}),Ru}return t$3.__extends($u,_u),$u}(r$3.ShaderMaterial),Va$1=function(_u){function $u(){var Ru=_u!==null&&_u.apply(this,arguments)||this;return Ru.level=0,Ru.sideCount=0,Ru.col=0,Ru.row=0,Ru.index=0,Ru.type="up",Ru}return t$3.__extends($u,_u),$u}(r$3.Box3),_a$2=function(_u){function $u(Ru,Ou){var Fu=this,Nu=new Qa$1;return Nu.visible=!1,(Fu=_u.call(this,Fa$1,Nu)||this).position.copy(Ru.getCenter(new r$3.Vector3)),Fu.quaternion.copy(Ta[Ru.type]),Fu.scale.setScalar(1/Math.pow(2,Ru.level)),Fu.name="tile-box",Fu.level=Ru.level,Fu.activeTime=-1,Fu.disposed=!1,Fu.needsRender=!1,Fu.frustumCulled=!1,Ou.then(function(Vu){var Gu=Vu[0],Uu=Vu[1];Fu.disposed?(Gu.dispose(),Uu==null||Uu.dispose()):(Fu.material.map=Gu,Fu.material.luminanceMap=Uu,Fu.material.needsUpdate=!0,Fu.material.visible=!0,Fu.needsRender=!0)}).catch(Qe$1),Fu}return t$3.__extends($u,_u),$u.getBox=function(Ru,Ou,Fu){var Nu=new Va$1,Vu=Math.pow(2,Ru),Gu=1/Vu,Uu=Fu%Vu,Hu=Math.floor(Fu/Vu);switch(Nu.level=Ru,Nu.index=Fu,Nu.sideCount=Vu,Nu.row=Hu,Nu.col=Uu,Nu.type=Ou,Ou){case"up":Nu.min.y=.5,Nu.max.y=.5,Nu.min.x=+Uu*Gu-.5,Nu.max.x=+Uu*Gu-.5+Gu,Nu.min.z=-Hu*Gu+.5-Gu,Nu.max.z=-Hu*Gu+.5;break;case"down":Nu.min.y=-.5,Nu.max.y=-.5,Nu.min.x=+Uu*Gu-.5,Nu.max.x=+Uu*Gu-.5+Gu,Nu.min.z=+Hu*Gu-.5,Nu.max.z=+Hu*Gu-.5+Gu;break;case"left":Nu.min.x=-.5,Nu.max.x=-.5,Nu.min.z=-Uu*Gu+.5-Gu,Nu.max.z=-Uu*Gu+.5,Nu.min.y=-Hu*Gu+.5-Gu,Nu.max.y=-Hu*Gu+.5;break;case"right":Nu.min.x=.5,Nu.max.x=.5,Nu.min.z=+Uu*Gu-.5,Nu.max.z=+Uu*Gu-.5+Gu,Nu.min.y=-Hu*Gu+.5-Gu,Nu.max.y=-Hu*Gu+.5;break;case"front":Nu.min.z=-.5,Nu.max.z=-.5,Nu.min.x=+Uu*Gu-.5,Nu.max.x=+Uu*Gu-.5+Gu,Nu.min.y=-Hu*Gu+.5-Gu,Nu.max.y=-Hu*Gu+.5;break;case"back":Nu.min.z=.5,Nu.max.z=.5,Nu.min.x=-Uu*Gu+.5-Gu,Nu.max.x=-Uu*Gu+.5,Nu.min.y=-Hu*Gu+.5-Gu,Nu.max.y=-Hu*Gu+.5}return Nu},$u.prototype.updateTime=function(Ru){},$u.prototype.dispose=function(){var Ru;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Ru=this.material.luminanceMap)===null||Ru===void 0||Ru.dispose()),this.material.dispose()},$u}(r$3.Mesh),Ha$1=function(_u){function $u(){var Ru=_u.call(this)||this;return Ru.needsRender=!1,Ru.name="tiling",Ru}return t$3.__extends($u,_u),$u}(r$3.Group),qa$1=function(){function _u($u,Ru){this.disposed=!1,this.textureLoader=new Ii$1($u),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Ru,this.object=new Ha$1}return _u.prototype.setAllowHosts=function($u){this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.textureLoader.setNetworkSubscribe($u)},_u.prototype.cleanup=function(){for(var $u=0;$u<this.tiles.length;$u++)if(this.tiles[$u]){var Ru=this.tiles[$u],Ou="level-group:"+$u,Fu=this.object.getObjectByName(Ou);for(var Nu in Ru){var Vu=Ru[Nu];Vu.dispose(),Fu.remove(Vu),delete Ru[Nu],this.object.needsRender=!0}}},_u.prototype.setRotation=function($u){if(!this.disposed){var Ru=new r$3.Quaternion().multiplyQuaternions($u,Pa);this.object.quaternion.equals(Ru)||(this.object.quaternion.copy(Ru),this.object.needsRender=!0)}},_u.prototype.setPosition=function($u){this.disposed||this.object.position.equals($u)||(this.object.position.copy($u),this.object.needsRender=!0)},_u.prototype.setResource=function($u){if(!this.disposed&&this.resource!==$u){this.cleanup(),this.resource=$u;for(var Ru=0;Ru<$u.length;Ru++){var Ou=$u[Ru].level;this.tiles[Ou]={};var Fu="level-group:"+Ou,Nu=this.object.getObjectByName(Fu);Nu||((Nu=new r$3.Group).name=Fu,Nu.renderOrder=-2),this.object.add(Nu)}this.object.needsRender=!0}},_u.prototype.setLuminance=function($u){this.luminance=$u},_u.prototype.getTileResources=function($u){for(var Ru,Ou=(Ru=this.imageOptions.size)!==null&&Ru!==void 0?Ru:2048,Fu=[],Nu=this.resource.length-1;Nu>=0;Nu--)this.resource[Nu].level<=$u&&512*Math.pow(2,this.resource[Nu].level)>Ou&&Fu.unshift(this.resource[Nu]);return Fu},_u.prototype.update=function($u,Ru,Ou){var Fu=this;if(!this.disposed){this.level=Ru;var Nu=Ra$1.copy($u);Nu.position.set(0,0,0),Nu.quaternion.premultiply(this.object.quaternion.clone().inverse()),Nu.updateMatrixWorld(!0),Nu.updateProjectionMatrix();for(var Vu=Nu.getWorldDirection(new r$3.Vector3),Gu=ka.setFromProjectionMatrix(Da$1.multiplyMatrices(Nu.projectionMatrix,Nu.matrixWorldInverse)),Uu=this.getTileResources(Ru),Hu=function(Ju){if(Ju){for(var Xu=[],Zu=Ju.level,Xc=Math.pow(2,Zu),_h=Xc*Xc,ep=Wu.object.getObjectByName("level-group:"+Zu),np=0,ap=Ca;np<ap.length;np++)for(var lp=ap[np],up=0;up<_h;up++){var _f=_a$2.getBox(Zu,lp,up);Gu.intersectsBox(_f)&&Xu.push(_f)}var tp=new r$3.Vector3;Xu.sort(function(fp,yp){return fp.getCenter(tp).angleTo(Vu)-yp.getCenter(tp).angleTo(Vu)});for(var ip=[],rp=0,op=Xu;rp<op.length;rp++){var sp=(_f=op[rp]).sideCount,cp=_f.row,hp=_f.col,dp=(lp=_f.type,"tile-level:".concat(Zu,"-face:").concat(lp,"-row:").concat(cp,"-col:").concat(hp));if(!Wu.tiles[Zu][dp]){var xp=Ju[lp],bp=Ju.size,Rp=bp/sp,Tp=[Rp*hp,Rp*cp,Rp,Rp],Up=t$3.__assign({key:"pano_tile.".concat(Wu.panoIndex,".").concat(lp,".").concat(Zu,".").concat(cp,".").concat(hp),basisLoaderInitialized:Ei$1.isInitialized(),cut:Tp},ii$1(Wu.imageOptions,["format","mappings"]));Zu<=1&&(Up.format==="jpg"||/\.jpg$/.test(xp))?(Rp!==1024&&(Up.size=1024),Up.quality=70):Rp!==512&&(Up.size=512);var Ip=Wu.imageOptions.transform?Wu.imageOptions.transform(xp,Up):ct$1(xp,Up),Vp=Wu.textureLoader.load(Ip,{preInit:!0}).then(function(fp){return fp.body}),Lp=null;if(Wu.luminance){var mp=Wu.luminance[lp],pp=mp.match(/\/cube_(\d+)\//),wp=!!pp&&Number(pp[1]);if(wp!==!1){var Ap=bp/wp,Sp=t$3.__assign(t$3.__assign({},Up),{size:256,cut:[Tp[0]/Ap,Tp[1]/Ap,Tp[2]/Ap,Tp[3]/Ap],key:"pano_tile_luminance.".concat(Wu.panoIndex,".").concat(lp,".").concat(Zu,".").concat(cp,".").concat(hp)}),Cp=Wu.imageOptions.transform?Wu.imageOptions.transform(mp,Sp):ct$1(mp,Sp);Lp=Wu.textureLoader.load(Cp,{format:r$3.LuminanceFormat,preInit:!0}).then(function(fp){return fp.body}).catch(function(){return null})}}Wu.pedding++;var $p=Promise.all([Vp,Lp]).then(function(fp){return Fu.pedding--,fp},function(fp){return Fu.pedding--,Promise.reject(fp)});(kp=Wu.tiles[Zu][dp]=new _a$2(_f,$p)).name=dp,kp.renderOrder=Zu,ep.add(kp)}Wu.tiles[Zu][dp].activeTime=Ou,ip.push(dp)}for(var Fp=0,jp=Object.keys(Wu.tiles[Zu]).sort(function(fp,yp){return Fu.tiles[Zu][yp].activeTime-Fu.tiles[Zu][fp].activeTime}).slice(Math.max(24,ip.length));Fp<jp.length;Fp++){dp=jp[Fp];var kp=Wu.tiles[Zu][dp];ep.remove(kp),kp.dispose(),delete Wu.tiles[Zu][dp],Wu.object.needsRender=!0}}},Wu=this,Qu=0,qu=Uu;Qu<qu.length;Qu++)Hu(qu[Qu]);for(var Ku=0;Ku<this.tiles.length;Ku++)if(this.tiles[Ku]){var Yu=Uu.length>0&&Ku<=Uu[Uu.length-1].level;for(var _c in this.tiles[Ku])this.tiles[Ku][_c].visible!==Yu&&(this.tiles[Ku][_c].visible=Yu,this.tiles[Ku][_c].needsRender=!0),this.tiles[Ku][_c].updateTime(Ou)}}},_u.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},_u}(),za$1=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka$1=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua$1=new r$3.BufferGeometry;Ua$1.setAttribute("position",new r$3.BufferAttribute(za$1,3)),Ua$1.setIndex(new r$3.BufferAttribute(Ka$1,1));var ja$1=function(){function _u(){this.material=new r$3.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh(Ua$1,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro({alpha:0})}return _u.prototype.setMaterial=function($u){$u?(this.material.uniforms.size.value=$u.size,this.material.uniforms.matrix.value=$u.matrix,this.material.uniforms.map.value=$u.map,this.alphaMotion.set({alpha:$u.alpha},500).catch(Qe$1),this.material.uniforms.alpha.value=$u.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe$1));var Ru=$u!==null;Ru!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Ru,this.material.needsUpdate=!0,this.object.visible=$u!==null)},_u.prototype.updateTime=function($u){this.alphaMotion.ended||(this.alphaMotion.update($u),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},_u.prototype.dispose=function(){this.material.dispose()},_u}(),Ga$1=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Wa$1=new r$3.Vector3(-1,1,1),Xa$1=function(_u){function $u(Ru){var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu=this,Qu=$u.parseArgs(Ru);(Wu=_u.call(this,Qu)||this).initAnimationed=!1,Wu.currentPanoIndex=Qu.initial[0],Wu.maxAccessibleDistance=Qu.maxAccessibleDistance,Wu.panoTapTriggerRadius=Qu.panoTapTriggerRadius,Wu.panoCircleMeshCreator=Qu.panoCircleMeshCreator,Wu.tileLevelForFov=Qu.tileLevelForFov;var qu=Wu.model.getMaterial()||{},Ku=qu.pano0,Yu=qu.pano1;Ku&&(Yu==null?void 0:Yu.map)!==Ku.map&&(Wu.model.setMaterial({pano0:Yu}),Ku.map.dispose(),(Ou=Ku.luminanceMap)===null||Ou===void 0||Ou.dispose()),Wu.boundingMesh=Wu.generateBoundingMesh(),Wu.boundingMesh.setMaterial(Wu.model.getMaterial()||{}),Wu.boundingMesh.visible=!1,Wu.scene.add(Wu.boundingMesh),Wu.panoMeshes=[],Wu.updatePanoMeshes(),Wu.locationMotion=new Ro({count:0,distance:Wu.camera.pose.distance,modelAlpha:(Nu=(Fu=Wu.model.getMaterial())===null||Fu===void 0?void 0:Fu.modelAlpha)!==null&&Nu!==void 0?Nu:0,perspToOrtho:(Gu=(Vu=Wu.model.getMaterial())===null||Vu===void 0?void 0:Vu.perspToOrtho)!==null&&Gu!==void 0?Gu:0}),Wu.panoResources={},Wu.panoResources[Wu.locationMotion.keyframes[0].key=Wu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Wu.currentPanoIndex,workCode:Wu.work.workCode,panoPicture:(Hu=(Uu=Wu.model.getMaterial())===null||Uu===void 0?void 0:Uu.pano1)!==null&&Hu!==void 0?Hu:null,position:Wu.camera.pose.offset.clone(),effect:"fly"};var _c={allowHosts:Wu.work.allowHosts,requestProxy:Wu.requestProxy,networkSubscribe:Wu.networkSubscribe};return Wu.textureLoader=new Ii$1(_c),Wu.tiling=new qa$1(_c,Wu.imageOptions),Wu.scene.add(Wu.tiling.object),Wu.panoVideo=new ja$1,Wu.scene.add(Wu.panoVideo.object),Wu}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou,Fu,Nu,Vu,Gu=_u.parseArgs.call(this,Ru);return t$3.__assign(t$3.__assign({},Gu),{maxAccessibleDistance:(Ou=Ru.maxAccessibleDistance)!==null&&Ou!==void 0?Ou:5,panoTapTriggerRadius:(Fu=Ru.panoTapTriggerRadius)!==null&&Fu!==void 0?Fu:.5,panoCircleMeshCreator:(Nu=Ru.panoCircleMeshCreator)!==null&&Nu!==void 0?Nu:function(){return new as$1},tileLevelForFov:(Vu=Ru.tileLevelForFov)!==null&&Vu!==void 0?Vu:function(Uu,Hu){var Wu=2*Math.atan(Math.tan(Uu/180*Math.PI/2)*(Hu.width/Hu.height))/Math.PI*180,Qu=Math.max(Hu.width/Wu,Hu.height/Uu);return Qu>80?4:Qu>48?3:Qu>24?2:Qu>12?1:0}})},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.destroy=function(){var Ru,Ou,Fu=this;_u.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Yu){Fu.helper.remove(Yu),Yu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Nu=this.videoTexture.image;Nu.pause(),Nu.oncanplay=function(){},Nu.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Vu=(Ru=this.model.getMaterial())!==null&&Ru!==void 0?Ru:{},Gu=Vu.pano0,Uu=Vu.pano1,Hu=0,Wu=Object.keys(this.panoResources);Hu<Wu.length;Hu++){var Qu=Wu[Hu],qu=this.panoResources[Qu];if(qu.panoPicture){var Ku=qu.panoPicture.map;Ku&&Ku!==(Gu==null?void 0:Gu.map)&&Ku!==(Uu==null?void 0:Uu.map)&&(Ku.dispose(),(Ou=qu.panoPicture.luminanceMap)===null||Ou===void 0||Ou.dispose(),qu.panoPicture=null)}delete this.panoResources[Qu]}},$u.prototype.isReady=function(){return this.locationMotion.ended===!0&&_u.prototype.isReady.call(this)},$u.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){var Gu=this;this.userAction=Vu,this.work=Ru,this.currentPanoIndex=Ou,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Uu={},Hu=!0;this.boundingMesh&&(Uu=this.boundingMesh.getMaterial()||{},Hu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Hu,this.boundingMesh.setMaterial(Uu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Wu=0,Qu=this.panoMeshes;Wu<Qu.length;Wu++)Qu[Wu].visible=!1;return this.moveToPano(Ou,{effect:"fade",duration:Nu,longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov,moveEndCallback:function(){Gu.initAnimationed=!0},moveCancelCallback:function(){Gu.initAnimationed=!0}},Vu),!0},$u.prototype.updateModel=function(Ru){this.model=Ru;var Ou={},Fu=!0;this.boundingMesh&&(Ou=this.boundingMesh.getMaterial()||{},Fu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Fu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Ou),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},$u.prototype.updateTime=function(Ru,Ou){for(var Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu=[],qu=2;qu<arguments.length;qu++)Qu[qu-2]=arguments[qu];if(!this.destroyed){var Ku={},Yu={},_c=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Xu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Ru);var Zu=this.locationMotion.getKeyFrameSegment(Ru),Xc=Zu[0],_h=Zu[1],ep=this.panoResourceFromLocationMotionKeyframe(Xc),np=this.panoResourceFromLocationMotionKeyframe(_h),ap=new r$3.Vector3().copy(ep.position),lp=new r$3.Vector3().copy(np.position),up=this.locationMotion.value.count-_h.value.count+1;Ku.progress=up,Ku.modelAlpha=this.locationMotion.value.modelAlpha,Ku.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),np.panoPicture&&(up<1?ep.panoPicture&&(Ku.pano0=ep.panoPicture):Ku.pano0=np.panoPicture,Ku.pano1=np.panoPicture),Xu=Ku.useBlackTransition=np.effect==="instant"||np.effect==="montage",np.effect!=="fade"&&np.effect!=="montage"||(Ku.pano0&&ep.panoPicture&&(Ku.pano0={map:Ku.pano0.map,luminanceMap:Ku.pano0.luminanceMap,matrix:ep.panoPicture.matrix.clone().setPosition(np.position)}),ap.copy(lp)),Yu.distance=this.locationMotion.value.distance,Yu.offset=new r$3.Vector3(ap.x+(lp.x-ap.x)*up,ap.y+(lp.y-ap.y)*up,ap.z+(lp.z-ap.z)*up);for(var _f=[],tp=[],ip=0,rp=this.locationMotion.keyframes;ip<rp.length;ip++){var op=rp[ip],sp=op.key,cp=op.progress;sp!==void 0&&(_f.push(sp),cp>=this.locationMotion.progress&&tp.push(sp))}for(var hp=0,dp=Object.keys(this.panoResources);hp<dp.length;hp++){var xp=dp[hp];if(!(tp.indexOf(xp)>=0)){var bp=this.panoResources[xp];if(bp.panoPicture){var Rp=bp.panoPicture.map;if(Rp){if(Rp===((Fu=Ku.pano0)===null||Fu===void 0?void 0:Fu.map)||Rp===((Nu=Ku.pano1)===null||Nu===void 0?void 0:Nu.map))continue;Rp.dispose(),(Vu=bp.panoPicture.luminanceMap)===null||Vu===void 0||Vu.dispose(),bp.panoPicture=null}}_f.indexOf(xp)>=0||delete this.panoResources[xp]}}ep.workCode===np.workCode?this.currentPanoIndex=up<.5?ep.panoIndex:np.panoIndex:this.currentPanoIndex=np.panoIndex,this.emit("movingToPano",Ju.panoIndex,_c.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Ru),Yu.longitude=this.cameraMotion.value.longitude,Yu.latitude=this.cameraMotion.value.latitude,Yu.fov=this.cameraMotion.value.fov),ia$1(Ku)===!1&&(this.model.setMaterial(Ku),this.boundingMesh.setMaterial(Ku)),ia$1(Yu)===!1&&this.setCamera(Yu),this.camera.pose.distance>.1)for(var Tp=0;Tp<this.work.observers.length;Tp++)(Lp=this.panoMeshes[Tp])&&(Lp.visible=!1);else{var Up=this.work.observers[this.currentPanoIndex];if(Up){var Ip=Up.visibleNodes.concat(this.currentPanoIndex),Vp=this.getForwardPanoIndexOrNot();for(Tp=0;Tp<this.work.observers.length;Tp++){var Lp,mp=this.work.observers[Tp];if(Lp=this.panoMeshes[Tp])if(mp.loadable||mp.active)if(Ip.indexOf(Tp)!==-1)if(Xu)Lp.visible=!1,Lp.setOpacity(0);else{Lp.visible=!0;var pp=Lp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Lp.setCurrent(Vp===Tp),Lp.setOpacity(pp<.01?0:ho$1(1.4/pp,.5,.7)),Lp.updateTime&&Lp.updateTime(Ru,Ou)}else Lp.visible=!1,Lp.setOpacity(0);else Lp.visible=!1,Lp.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Gu=this.boundingMesh.getMaterial())===null||Gu===void 0?void 0:Gu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var wp=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var Ap=Ju.panoIndex,Sp=this.work.observers[Ap];if(Sp)if(_s$1(this.camera.position,Sp.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Uu=Sp.images.luminance)!==null&&Uu!==void 0?Uu:null),this.tiling.panoIndex!==Ap&&this.tiling.cleanup(),this.tiling.panoIndex=Ap,this.tiling.setResource((Wu=(Hu=Sp.images)===null||Hu===void 0?void 0:Hu.tiles)!==null&&Wu!==void 0?Wu:[]),this.tiling.setRotation(Sp.quaternion),this.tiling.setPosition(Sp.position);var Cp=this.renderer.getDrawingBufferSize(new r$3.Vector2);Cp.width*=this.scissor.width,Cp.height*=this.scissor.height;var $p=this.imageOptions.size;if($p===void 0&&Sp){var Fp=Sp.images.up.match(/\/cube_(\d+)\//);Fp&&($p=Number(Fp[1]))}$p===void 0&&($p=2048);var jp=0;$p>=1024&&(jp=1),$p>=2048&&(jp=2),$p>=4096&&(jp=3),$p>=8192&&(jp=4);var kp=this.tileLevelForFov(this.camera.fov,Cp),fp=kp>jp?kp:0;this.tiling.update(this.camera,fp,Ru)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;wp!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Ru)}},$u.prototype.render=function(){var Ru=this.work.observers[this.currentPanoIndex];Ru&&Ru.video&&(this.needsRender=!0),_u.prototype.render.call(this)},$u.prototype.postProcessing=function(Ru,Ou){if(!this.destroyed)return this.effect||(this.effect=new Sa(this.renderer)),this.effect.render(Ru,Ou)},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Ou=this.locationMotion.getKeyFrameSegment(_e$1())[1],Fu=this.panoResourceFromLocationMotionKeyframe(Ou),Nu=this.work.observers[Fu.panoIndex];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,offset:Nu?Nu.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},$u.prototype.moveToPano=function(Ru,Ou,Fu){var Nu,Vu,Gu,Uu=this,Hu=this.work.observers[Ru],Wu=t$3.__assign({key:"pano.".concat(Ru),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality","sharpen","mappings"])),Qu=(Nu=this.imageOptions.transform)!==null&&Nu!==void 0?Nu:ct$1,qu={right:Qu(Hu.images.right,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".right")})),left:Qu(Hu.images.left,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".left")})),up:Qu(Hu.images.up,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".up")})),down:Qu(Hu.images.down,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".down")})),front:Qu(Hu.images.front,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".front")})),back:Qu(Hu.images.back,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".back")}))},Ku={key:"pano_luminance.".concat(Ru),basisLoaderInitialized:Ei$1.isInitialized(),size:Wu.size?Wu.size/2:1024},Yu=this.enableIOSEDR&&Hu.images.luminance?{right:Qu(Hu.images.luminance.right,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".right")})),left:Qu(Hu.images.luminance.left,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".left")})),up:Qu(Hu.images.luminance.up,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".up")})),down:Qu(Hu.images.luminance.down,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".down")})),front:Qu(Hu.images.luminance.front,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".front")})),back:Qu(Hu.images.luminance.back,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".back")}))}:null,_c="pano:"+va(qu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===_c)return;var Ju=this.pendingTextureTask.panoIndex;(Vu=this.panoMeshes[Ju])===null||Vu===void 0||Vu.setProgress(0),this.emit("textureAbort",Ju,Hu),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Xu,Zu=this.model.getMaterial()||{},Xc=Zu.pano0,_h=Zu.pano1;if(Xc&&Xc.map.name===_c&&Xc.luminanceMap!==null===this.enableIOSEDR?Xu=Xc:(_h==null?void 0:_h.map.name)===_c&&_h.luminanceMap!==null===this.enableIOSEDR&&(Xu=_h),Xu){var ep={panoIndex:Ru,workCode:this.work.workCode,effect:(Gu=Ou.effect)!==null&&Gu!==void 0?Gu:"fly",panoPicture:{map:Xu.map,luminanceMap:Xu.luminanceMap,matrix:new r$3.Matrix4().compose(Hu.position,Hu.quaternion,Wa$1)},position:Hu.position.clone()};at.shared.add(function(){Uu.pending=!1,Uu.emit("panoLoaded",Ru),Uu.doMoveToPano(Ru,ep,Ou,Fu)},!0,1)}else{this.pendingTextureTask={panoIndex:Ru,hash:_c,onLoad:function(ap,lp){var up,_f;if(Uu.pending=!1,Uu.destroyed)ap.body.dispose();else{ap.body.name=_c,Uu.emit("panoLoaded",Ru);var tp={panoIndex:Ru,workCode:Uu.work.workCode,effect:(up=Ou.effect)!==null&&up!==void 0?up:"fly",panoPicture:{map:ap.body,luminanceMap:(_f=lp==null?void 0:lp.body)!==null&&_f!==void 0?_f:null,matrix:new r$3.Matrix4().compose(Hu.position,Hu.quaternion,Wa$1)},position:Hu.position.clone()};Uu.doMoveToPano(Ru,tp,Ou,Fu)}},onError:function(ap){Uu.pending=!1,Ou.moveCancelCallback&&Ou.moveCancelCallback(),Uu.emit("panoLoadError",ap,Ru),Uu.emit("moveToPanoCanceled",Ru)}};var np=this.panoMeshes[Ru];np&&np.tap&&np.tap(),Promise.all([this.textureLoader.loadCube(qu,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,function(ap){var lp,up;Uu.emit("textureLoading",ap,Ru,Hu),((lp=Uu.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_c&&((up=Uu.panoMeshes[Ru])===null||up===void 0||up.setProgress(ap))},this.renderer),Yu?this.textureLoader.loadCube(Yu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(ap){var lp,up,_f=ap[0],tp=ap[1];((lp=Uu.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_c?(Uu.pendingTextureTask.onLoad(_f,tp),(up=Uu.panoMeshes[Ru])===null||up===void 0||up.setProgress(0),delete Uu.pendingTextureTask,Uu.emit("textureLoaded",Ru,Hu,_f.meta)):(_f.body.dispose(),tp==null||tp.body.dispose())}).catch(function(ap){var lp,up;((lp=Uu.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_c&&(Uu.pendingTextureTask.onError(ap),(up=Uu.panoMeshes[Ru])===null||up===void 0||up.setProgress(0),delete Uu.pendingTextureTask,Uu.emit("textureError",ap,Ru,Hu),Uu.emit("error",ap))}),this.emit("textureStartLoad",Ru,Hu)}},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;if(!this.destroyed){var Wu=!1;this.pending=!1,this.userAction=Nu,this.moveToPano(Ru,{longitude:(Vu=Ou.longitude)!==null&&Vu!==void 0?Vu:this.defaultLongitude,latitude:ho$1((Gu=Ou.latitude)!==null&&Gu!==void 0?Gu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Uu=Ou.fov)!==null&&Uu!==void 0?Uu:this.defaultFov,this.minFov,this.maxFov),duration:Fu,moveStartCallback:function(Qu,qu){Wu=!0,Hu.emit("initAnimationWillStart",Qu,qu,Hu.userAction)},moveEndCallback:function(Qu,qu){Hu.emit("initAnimationEnded",Qu,qu,Hu.userAction),Hu.initAnimationed=!0},moveCancelCallback:function(){var Qu={longitude:Hu.camera.pose.longitude,latitude:Hu.camera.pose.latitude,fov:Hu.camera.pose.fov,offset:Hu.camera.pose.offset.clone(),distance:Hu.camera.pose.distance};Wu===!1&&Hu.emit("initAnimationWillStart",Hu.currentPanoIndex,Qu,Hu.userAction),Hu.emit("initAnimationEnded",Hu.currentPanoIndex,Qu,Hu.userAction),Hu.initAnimationed=!0}},Nu)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Ru){return this.panoResources[Ru.key]},$u.prototype.locationMotionKeyframesLength=function(Ru){for(var Ou=0,Fu=1;Fu<Ru.length;Fu++){var Nu=this.panoResourceFromLocationMotionKeyframe(Ru[Fu-1]).position,Vu=this.panoResourceFromLocationMotionKeyframe(Ru[Fu]).position;Ou+=Nu.distanceTo(Vu)*(Ru[Fu].value.count-Ru[Fu-1].value.count)}return Ou},$u.prototype.updatePanoMeshes=function(Ru){Ru===void 0&&(Ru=!0);for(var Ou={},Fu=0,Nu=this.panoMeshes;Fu<Nu.length;Fu++)Ou[(Hu=Nu[Fu]).name]=Hu;this.panoMeshes.length=0;for(var Vu=0;Vu<this.work.observers.length;Vu++){var Gu="panoCircle_".concat(this.work.workCode,"_").concat(Vu),Uu=this.work.observers[Vu],Hu=void 0;if(Ou[Gu]?((Hu=Ou[Gu]).loading===!0&&Uu.loadable===!1&&Hu.setLoading(!1),delete Ou[Gu]):((Hu=this.panoCircleMeshCreator()).name=Gu,this.helper.add(Hu)),Hu.position.copy(Uu.standingPosition),Ru&&this.model.loaded&&this.model.bvhs.loaded){var Wu=new r$3.Vector3(0,-1,0),Qu=new r$3.Vector3(0,.1,0).add(Hu.position),qu=new r$3.Raycaster(Qu,Wu,0,.2),Ku=this.model.intersectRaycaster(qu)[0];Ku&&Ku.point.distanceTo(Qu)<.1&&Hu.position.copy(Ku.point)}this.panoMeshes[Vu]=Hu}for(var Yu=0,_c=Object.keys(Ou);Yu<_c.length;Yu++){var Ju=_c[Yu];this.helper.remove(Ou[Ju]),Ou[Ju].dispose(),delete Ou[Ju]}},$u.prototype.generateBoundingMesh=function(Ru){Ru===void 0&&(Ru=!1);for(var Ou=this.model.bounding.clone(),Fu=0,Nu=this.work.observers;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Ou.expandByPoint(Vu.standingPosition),Ou.expandByPoint(new r$3.Vector3().fromArray([Vu.position.x,2*Vu.position.y-Vu.standingPosition.y,Vu.position.z]))}Ru&&Ou.expandByPoint(this.camera.position);var Gu=Ks(Ou,new r$3.Vector3(1,0,1));return Gu.name="panorama_bounding",Gu},$u.prototype.doMoveToPano=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;Fu===void 0&&(Fu={}),this.userAction=Nu;var Wu=_e$1(),Qu=Kr();this.tiling.cleanup(),this.panoResources[Qu]=Ou;var qu,Ku,Yu;if(this.locationMotion.ended){var _c=this.locationMotion.getKeyFrameSegment(Wu);_c[0];var Ju=_c[1],Xu=this.locationMotion.value,Zu=this.panoResourceFromLocationMotionKeyframe(Ju).position,Xc=Ou.position;qu=Math.max(Zu.distanceTo(Xc),1),Ku=[{key:Ju.key,progress:0,value:t$3.__assign(t$3.__assign({},Xu),{count:0})},{key:Qu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Yu=0}else{var _h=this.locationMotion.getKeyFrameSegment(Wu),ep=_h[0],np=(Ju=_h[1],Xu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(ep).position),ap=(Zu=this.panoResourceFromLocationMotionKeyframe(Ju).position,Xc=Ou.position,Ju.value.count-Xu.count),lp=Math.max(np.distanceTo(Zu),1)*ap;qu=lp+Math.max(Zu.distanceTo(Xc),1),Ku=[{key:ep.key,progress:0,value:t$3.__assign({},Xu)},{key:Ju.key,progress:lp/qu,value:Ju.value},{key:Qu,progress:1,value:{count:Ju.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var up=this.locationMotionKeyframesLength(this.locationMotion.keyframes),_f=this.locationMotionKeyframesLength(Ku);Yu=up===0||up===0?0:this.locationMotion.getProgressVelocity(Wu)*up/_f}var tp=this.calculateMovingDuration(Fu.duration,Fu.effect==="fade"||Fu.effect==="montage"?0:qu),ip={longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov},rp={longitude:(Vu=ip.longitude)!==null&&Vu!==void 0?Vu:this.camera.pose.longitude,latitude:(Gu=ip.latitude)!==null&&Gu!==void 0?Gu:this.camera.pose.latitude,fov:(Uu=ip.fov)!==null&&Uu!==void 0?Uu:this.camera.pose.fov,offset:Ou.position.clone(),distance:this.camera.pose.distance};Fu.moveStartCallback&&Fu.moveStartCallback(Ru,rp),this.emit("panoWillArrive",Ru,rp,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(ip,tp).catch(Qe$1),this.locationMotion.setKeyframes(Ku,tp,Yu).then(function(){var op,sp,cp,hp={longitude:Hu.camera.pose.longitude,latitude:Hu.camera.pose.latitude,fov:Hu.camera.pose.fov,offset:Hu.camera.pose.offset.clone(),distance:Hu.camera.pose.distance};Fu.moveEndCallback&&Fu.moveEndCallback(Ru,hp),Hu.emit("panoArrived",Ru,hp,Nu);var dp=Hu.work.observers[Hu.currentPanoIndex];if(dp&&dp.video&&Hu.videoTexture&&Hu.videoTexture.image instanceof HTMLVideoElement){var xp=Ga$1.clone().multiply((cp=(sp=(op=Hu.model.getMaterial())===null||op===void 0?void 0:op.pano1)===null||sp===void 0?void 0:sp.matrix)!==null&&cp!==void 0?cp:new r$3.Matrix4).multiply(dp.video.matrix),bp={map:Hu.videoTexture,size:dp.video.size,matrix:xp,alpha:1},Rp=Kr(),Tp=Hu.videoTexture.image;Tp.setAttribute("uuid",Rp),xa().then(function(Up){Up&&dp.video&&Tp.getAttribute("uuid")===Rp&&(Tp.oncanplay=function(){Tp.oncanplay=Qe$1,Tp.play()},Tp.ontimeupdate=function(){Tp.currentTime>.5&&(Tp.ontimeupdate=Qe$1,Hu.panoVideo.setMaterial(bp))},Tp.src=dp.video.source)}).catch(function(){Tp.removeAttribute("uuid")})}},function(){Fu.moveCancelCallback&&Fu.moveCancelCallback(),Hu.emit("moveToPanoCanceled",Ru)})},$u.prototype.getForwardPanoIndexOrNot=function(Ru){var Ou=this,Fu=this.work.observers[this.currentPanoIndex];if(!Fu)return null;var Nu=Ru!=null?Ru:new r$3.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$3.Vector3)),Vu=Nu.ray.origin.clone(),Gu=new r$3.Vector3,Uu=this.model.intersectRaycaster(new r$3.Raycaster(Nu.ray.origin,new r$3.Vector3(0,-1,0)))[0];Uu&&Uu.distance<=2?Gu.copy(Uu.point):Gu.copy(Nu.ray.origin).add(new r$3.Vector3(0,-1.5,0));var Hu=this.model.intersectRaycaster(Nu)[0],Wu=(Hu?Hu.point:Nu.ray.origin.clone().add(Nu.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Gu).normalize();if(Wu.length()===0)return null;for(var Qu=Fu.accessibleNodes.filter(function(Xc){if(Xc===Ou.currentPanoIndex)return!1;var _h=Ou.work.observers[Xc],ep=_h.standingPosition.clone().sub(Vu);return ep.length()!==0&&!(ep.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(_h.loadable||_h.active)}).slice().sort(function(Xc,_h){return Ou.work.observers[Xc].standingPosition.clone().distanceTo(Gu)-Ou.work.observers[_h].standingPosition.clone().distanceTo(Gu)}),qu=0,Ku=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];qu<Ku.length;qu++)for(var Yu=Ku[qu],_c=0,Ju=Qu;_c<Ju.length;_c++){var Xu=Ju[_c],Zu=this.work.observers[Xu].standingPosition.clone().sub(Gu);if(Zu.length()!==0&&Wu.angleTo(Zu)<Yu)return Xu}return null},$u.prototype.onTapGesture=function(Ru){var Ou=this,Fu=Ru.pointers.map(function(ip){return ii$1(ip,["x","y"])});if(!this.emit("wantsGesture","tap",Fu,!0)){var Nu=this.relativeClientPosition(Ru.center),Vu=new r$3.Raycaster;if(Vu.setFromCamera(Nu,this.camera),!this.emit("wantsTapGesture",Vu,Nu,!0)){this.emit("gesture","tap",Fu,!0),this.emit("tapGesture",Vu,Nu,!0),this.interiaMovement=!1;var Gu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Uu=null,Hu=this.work.observers[this.currentPanoIndex];if(Hu){var Wu=Hu.accessibleNodes.filter(function(ip){if(ip===Ou.currentPanoIndex)return!1;var rp=Ou.work.observers[ip];return!(rp.position.distanceTo(Ou.camera.position)>Ou.maxAccessibleDistance)&&(rp.loadable||rp.active)}),Qu=this.model.intersectRaycaster(Vu)[0];if(Qu){var qu=ta(Wu,function(ip){var rp=Ou.work.observers[ip].standingPosition.clone();return rp.clone().sub(Ou.camera.position).setY(0).angleTo(Gu)>Math.PI/2?1/0:rp.distanceTo(Qu.point)},!0),Ku=qu[0];qu[1]<this.panoTapTriggerRadius&&(Uu=Ku)}oo(Uu)&&(Uu=this.getForwardPanoIndexOrNot(Vu));for(var Yu=0,_c=this.locationMotion.keyframes;Yu<_c.length;Yu++){var Ju=_c[Yu],Xu=this.panoResourceFromLocationMotionKeyframe(Ju);if(!(Ju.progress<this.locationMotion.progress)&&Xu.panoIndex===Uu){Uu=null;break}}if(this.emit("panoSelected",Uu),oo(Uu))this.locationMotion.ended===!0&&this.cameraBounce();else{var Zu=this.work.observers[Uu];if(Zu.active){for(var Xc={},_h=Math.PI/6,ep=Math.PI/12,np=Zu.position.clone().setY(0).sub(Hu.position.clone().setY(0)).normalize(),ap=[],lp=0,up=Zu.accessibleNodes;lp<up.length;lp++)if((Ku=up[lp])!==this.currentPanoIndex&&Ku!==Uu){var _f=this.work.observers[Ku].position.clone().sub(Zu.position).setY(0);np.angleTo(_f)<_h&&ap.push(_f)}var tp=(ap.length>0?ap:t$3.__spreadArray(t$3.__spreadArray([],[],!0),[],!0)).slice().sort(function(ip,rp){return ip.angleTo(np)-rp.angleTo(np)})[0];tp&&tp.angleTo(Gu)>ep&&(Xc.longitude=Math.atan2(-tp.x,-tp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Xc.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Xc.fov=this.defaultFov),this.emit("wantsMoveToPano",Uu,Xc,!0)}else this.panoMeshes[Uu]&&(this.panoMeshes[Uu].setDisabled(!1),this.panoMeshes[Uu].setLoading(!0))}}}}},$u}(ba$1),Ya$1=Math.PI/180,Za$1=180/Math.PI,Ja$1=function(){var _u=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _u}}(),$a$1=function(){var _u=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _u}}(),el$1=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _u}}(),tl$1=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,$u=_u?parseInt(_u[1],10):null;return function(){return $u}}(),il$1=function(){var _u=!1;if(tl$1()===65){var $u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if($u){var Ru=$u[1].split(".");Ru[0],Ru[1];var Ou=Ru[2],Fu=Ru[3];_u=parseInt(Ou,10)===3325&&parseInt(Fu,10)<148}}return function(){return _u}}(),nl$1=function(){var _u=Ja$1()&&$a$1()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return _u}}(),rl$1=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _u}}();function ol$1(){var _u=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl$1()?!_u:_u}var sl$1,al$1=(sl$1={},function(_u,$u){sl$1[_u]===void 0&&(console.warn("cardboard: "+$u),sl$1[_u]=!0)});function ll$1(_u){var $u,Ru=_u.indexOf("://");$u=Ru!==-1?Ru+3:0;var Ou=_u.indexOf("/",$u);return Ou===-1&&(Ou=_u.length),_u.substring(0,Ou)}var ul$1,hl$1=function(_u,$u,Ru){(function(Ou,Fu,Nu){var Vu=Fu?Fu[0]:0,Gu=Fu?Fu[1]:0,Uu=Fu?Fu[2]:0,Hu=Fu?Fu[3]:1,Wu=Vu+Vu,Qu=Gu+Gu,qu=Uu+Uu,Ku=Vu*Wu,Yu=Vu*Qu,_c=Vu*qu,Ju=Gu*Qu,Xu=Gu*qu,Zu=Uu*qu,Xc=Hu*Wu,_h=Hu*Qu,ep=Hu*qu;Ou[0]=1-(Ju+Zu),Ou[1]=Yu+ep,Ou[2]=_c-_h,Ou[3]=0,Ou[4]=Yu-ep,Ou[5]=1-(Ku+Zu),Ou[6]=Xu+Xc,Ou[7]=0,Ou[8]=_c+_h,Ou[9]=Xu-Xc,Ou[10]=1-(Ku+Ju),Ou[11]=0,Ou[12]=Nu?Nu[0]:0,Ou[13]=Nu?Nu[1]:0,Ou[14]=Nu?Nu[2]:0,Ou[15]=1})(_u,$u),Ru&&function(Ou,Fu,Nu){var Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu=Nu[0],Xc=Nu[1],_h=Nu[2];Fu===Ou?(Ou[12]=Fu[0]*Zu+Fu[4]*Xc+Fu[8]*_h+Fu[12],Ou[13]=Fu[1]*Zu+Fu[5]*Xc+Fu[9]*_h+Fu[13],Ou[14]=Fu[2]*Zu+Fu[6]*Xc+Fu[10]*_h+Fu[14],Ou[15]=Fu[3]*Zu+Fu[7]*Xc+Fu[11]*_h+Fu[15]):(Vu=Fu[0],Gu=Fu[1],Uu=Fu[2],Hu=Fu[3],Wu=Fu[4],Qu=Fu[5],qu=Fu[6],Ku=Fu[7],Yu=Fu[8],_c=Fu[9],Ju=Fu[10],Xu=Fu[11],Ou[0]=Vu,Ou[1]=Gu,Ou[2]=Uu,Ou[3]=Hu,Ou[4]=Wu,Ou[5]=Qu,Ou[6]=qu,Ou[7]=Ku,Ou[8]=Yu,Ou[9]=_c,Ou[10]=Ju,Ou[11]=Xu,Ou[12]=Vu*Zu+Wu*Xc+Yu*_h+Fu[12],Ou[13]=Gu*Zu+Qu*Xc+_c*_h+Fu[13],Ou[14]=Uu*Zu+qu*Xc+Ju*_h+Fu[14],Ou[15]=Hu*Zu+Ku*Xc+Xu*_h+Fu[15])}(_u,_u,Ru),function(Ou,Fu){var Nu=Fu[0],Vu=Fu[1],Gu=Fu[2],Uu=Fu[3],Hu=Fu[4],Wu=Fu[5],Qu=Fu[6],qu=Fu[7],Ku=Fu[8],Yu=Fu[9],_c=Fu[10],Ju=Fu[11],Xu=Fu[12],Zu=Fu[13],Xc=Fu[14],_h=Fu[15],ep=Nu*Wu-Vu*Hu,np=Nu*Qu-Gu*Hu,ap=Nu*qu-Uu*Hu,lp=Vu*Qu-Gu*Wu,up=Vu*qu-Uu*Wu,_f=Gu*qu-Uu*Qu,tp=Ku*Zu-Yu*Xu,ip=Ku*Xc-_c*Xu,rp=Ku*_h-Ju*Xu,op=Yu*Xc-_c*Zu,sp=Yu*_h-Ju*Zu,cp=_c*_h-Ju*Xc,hp=ep*cp-np*sp+ap*op+lp*rp-up*ip+_f*tp;hp&&(hp=1/hp,Ou[0]=(Wu*cp-Qu*sp+qu*op)*hp,Ou[1]=(Gu*sp-Vu*cp-Uu*op)*hp,Ou[2]=(Zu*_f-Xc*up+_h*lp)*hp,Ou[3]=(_c*up-Yu*_f-Ju*lp)*hp,Ou[4]=(Qu*rp-Hu*cp-qu*ip)*hp,Ou[5]=(Nu*cp-Gu*rp+Uu*ip)*hp,Ou[6]=(Xc*ap-Xu*_f-_h*np)*hp,Ou[7]=(Ku*_f-_c*ap+Ju*np)*hp,Ou[8]=(Hu*sp-Wu*rp+qu*tp)*hp,Ou[9]=(Vu*rp-Nu*sp-Uu*tp)*hp,Ou[10]=(Xu*up-Zu*ap+_h*ep)*hp,Ou[11]=(Yu*ap-Ku*up-Ju*ep)*hp,Ou[12]=(Wu*ip-Hu*op-Qu*tp)*hp,Ou[13]=(Nu*op-Vu*ip+Gu*tp)*hp,Ou[14]=(Zu*np-Xu*lp-Xc*ep)*hp,Ou[15]=(Ku*lp-Yu*np+_c*ep)*hp)}(_u,_u)},cl$1=function(){function _u($u,Ru){$u===void 0&&($u=new r$3.Vector3),Ru===void 0&&(Ru=0),this.sample=$u,this.timestampS=Ru}return _u.prototype.set=function($u,Ru){this.sample=$u,this.timestampS=Ru},_u.prototype.copy=function($u){this.set($u.sample,$u.timestampS)},_u}(),dl$1=function(){function _u($u,Ru){this.kFilter=$u,this.isDebug=Ru,this.currentAccelMeasurement=new cl$1,this.currentGyroMeasurement=new cl$1,this.previousGyroMeasurement=new cl$1,Ja$1()?this.filterQ=new r$3.Quaternion(-1,0,0,1):this.filterQ=new r$3.Quaternion(1,0,0,1),this.previousFilterQ=new r$3.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$3.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$3.Vector3,this.measuredGravity=new r$3.Vector3,this.gyroIntegralQ=new r$3.Quaternion}return _u.prototype.addAccelMeasurement=function($u,Ru){this.currentAccelMeasurement.set($u,Ru)},_u.prototype.addGyroMeasurement=function($u,Ru){this.currentGyroMeasurement.set($u,Ru);var Ou,Fu=Ru-this.previousGyroMeasurement.timestampS;Ou=Fu,isNaN(Ou)||Ou<=.001||Ou>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_u.prototype.getOrientation=function(){return this.filterQ},_u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var $u=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Ru=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,$u);this.gyroIntegralQ.multiply(Ru),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Ru);var Ou=new r$3.Quaternion;Ou.copy(this.filterQ),Ou.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Ou),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Fu,Nu=new r$3.Quaternion;Nu.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Nu.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za$1*((Fu=Nu).w>1?0:2*Math.acos(Fu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Vu=new r$3.Quaternion;Vu.copy(this.filterQ),Vu.multiply(Nu),this.filterQ.slerp(Vu,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_u.prototype.accelToQuaternion_=function($u){var Ru=new r$3.Vector3;Ru.copy($u),Ru.normalize();var Ou=new r$3.Quaternion;return Ou.setFromUnitVectors(new r$3.Vector3(0,0,-1),Ru),Ou.inverse(),Ou},_u.prototype.gyroToQuaternionDelta_=function($u,Ru){var Ou=new r$3.Quaternion,Fu=new r$3.Vector3;return Fu.copy($u),Fu.normalize(),Ou.setFromAxisAngle(Fu,$u.length()*Ru),Ou},_u}(),pl$1=function(){function _u($u,Ru){this.predictionTimeS=$u,this.isDebug=Ru,this.previousQ=new r$3.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$3.Quaternion,this.outQ=new r$3.Quaternion}return _u.prototype.getPrediction=function($u,Ru,Ou){if(!this.previousTimestampS)return this.previousQ.copy($u),this.previousTimestampS=Ou,$u;var Fu=new r$3.Vector3;Fu.copy(Ru),Fu.normalize();var Nu=Ru.length();if(Nu<20*Ya$1)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za$1*Nu).toFixed(1)),this.outQ.copy($u),this.previousQ.copy($u),this.outQ;var Vu=Nu*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Fu,Vu),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy($u),this.previousTimestampS=Ou,this.outQ},_u}(),fl$1=function(){function _u($u){this.coefficients=$u}return _u.prototype.distortInverse=function($u){for(var Ru=0,Ou=1,Fu=$u-this.distort(Ru);Math.abs(Ou-Ru)>1e-4;){var Nu=$u-this.distort(Ou),Vu=Ou-Nu*((Ou-Ru)/(Nu-Fu));Ru=Ou,Ou=Vu,Fu=Nu}return Ou},_u.prototype.distort=function($u){for(var Ru=$u*$u,Ou=0,Fu=0;Fu<this.coefficients.length;Fu++)Ou=Ru*(Ou+this.coefficients[Fu]);return(Ou+1)*$u},_u}(),Al$1=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl$1=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml$1=function(){function _u($u,Ru,Ou,Fu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Ou,this.accelerometer=new r$3.Vector3,this.gyroscope=new r$3.Vector3,this.filter=new dl$1($u,Fu),this.posePredictor=new pl$1(Ru,Fu),this.isFirefoxAndroid=el$1(),this.isIOS=Ja$1();var Nu=tl$1();this.isDeviceMotionInRadians=!this.isIOS&&Nu!==null&&Nu<66,this.isWithoutDeviceMotion=il$1()||nl$1(),this.filterToWorldQ=new r$3.Quaternion,Ja$1()?this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$3.Quaternion,this.worldToScreenQ=new r$3.Quaternion,this.originalPoseAdjustQ=new r$3.Quaternion;var Vu=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Vu),this.setScreenTransform_(),ol$1()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$3.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return _u.prototype.getPosition=function(){return null},_u.prototype.getOrientation=function(){var $u;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Vu=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,0,-1),0),Gu=new r$3.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Gu.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/-2):Gu.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/2),Vu.multiply(Gu)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Ou=new r$3.Quaternion).setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),Ou),$u=this._deviceOrientationQ;var Ru=new r$3.Quaternion;return Ru.copy($u),Ru.multiply(this.deviceOrientationFilterToWorldQ),Ru.multiply(this.resetQ),Ru.multiply(this.worldToScreenQ),Ru.multiplyQuaternions(this.deviceOrientationFixQ,Ru),this.yawOnly&&(Ru.x=0,Ru.z=0,Ru.normalize()),this.orientationOut_[0]=Ru.x,this.orientationOut_[1]=Ru.y,this.orientationOut_[2]=Ru.z,this.orientationOut_[3]=Ru.w,this.orientationOut_}var Ou,Fu=this.filter.getOrientation();$u=this.posePredictor.getPrediction(Fu,this.gyroscope,this.previousTimestampS);var Nu=new r$3.Quaternion;return Nu.copy(this.filterToWorldQ),Nu.multiply(this.resetQ),Nu.multiply($u),Nu.multiply(this.worldToScreenQ),this.yawOnly&&(Nu.x=0,Nu.z=0,Nu.normalize()),this.orientationOut_[0]=Nu.x,this.orientationOut_[1]=Nu.y,this.orientationOut_[2]=Nu.z,this.orientationOut_[3]=Nu.w,this.orientationOut_},_u.prototype.getPose=function(){var $u=new Al$1;return $u.orientation=this.getOrientation(),$u},_u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol$1()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_u.prototype.getFrameData=function($u){var Ru=this.getOrientation(),Ou=this.getEyeOffset(),Fu=this.getEyeProjectionMatrix();return $u.pose.angularAcceleration=null,$u.pose.angularVelocity=null,$u.pose.linearAcceleration=null,$u.pose.linearVelocity=null,$u.pose.orientation=Ru,$u.pose.position=null,$u.timestamp=this.previousTimestampS,$u.leftProjectionMatrix.set(Fu.left),$u.rightProjectionMatrix.set(Fu.right),hl$1($u.leftViewMatrix,Ru,Ou.left),hl$1($u.rightViewMatrix,Ru,Ou.right),$u},_u.prototype.start=function(){if(typeof window=="undefined")return function(){};var $u=this.onDeviceMotion_.bind(this),Ru=this.onOrientationChange_.bind(this),Ou=this.onMessage_.bind(this),Fu=this.onDeviceOrientation_.bind(this);return Ja$1()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Nu=window.self!==window.top,Vu=ll$1(document.referrer),Gu=ll$1(window.location.href);return Nu&&Vu!==Gu}()&&window.addEventListener("message",Ou),window.addEventListener("orientationchange",Ru),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Fu):window.addEventListener("devicemotion",$u),function(){window.removeEventListener("devicemotion",$u),window.removeEventListener("deviceorientation",Ru),window.removeEventListener("orientationchange",Ru),window.removeEventListener("message",Ou)}},_u.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},_u.prototype.getEyeProjectionMatrix=function(){var $u=this.getEyeFieldOfView(),Ru=this.depthNear,Ou=this.depthFar,Fu={left:[],right:[]},Nu=$u.left.upDegrees*Ya$1,Vu=$u.left.downDegrees*Ya$1,Gu=2/((Hu=$u.left.leftDegrees*Ya$1)+(Wu=$u.left.rightDegrees*Ya$1)),Uu=2/(Nu+Vu);Fu.left[0]=Gu,Fu.left[1]=0,Fu.left[2]=0,Fu.left[3]=0,Fu.left[4]=0,Fu.left[5]=Uu,Fu.left[6]=0,Fu.left[7]=0,Fu.left[8]=-(Hu-Wu)*Gu*.5,Fu.left[9]=(Nu-Vu)*Uu*.5,Fu.left[10]=Ou/(Ru-Ou),Fu.left[11]=-1,Fu.left[12]=0,Fu.left[13]=0,Fu.left[14]=Ou*Ru/(Ru-Ou),Fu.left[15]=0;var Hu,Wu;return Nu=$u.right.upDegrees*Ya$1,Vu=$u.right.downDegrees*Ya$1,Gu=2/((Hu=$u.right.leftDegrees*Ya$1)+(Wu=$u.right.rightDegrees*Ya$1)),Uu=2/(Nu+Vu),Fu.right[0]=Gu,Fu.right[1]=0,Fu.right[2]=0,Fu.right[3]=0,Fu.right[4]=0,Fu.right[5]=Uu,Fu.right[6]=0,Fu.right[7]=0,Fu.right[8]=-(Hu-Wu)*Gu*.5,Fu.right[9]=(Nu-Vu)*Uu*.5,Fu.right[10]=Ou/(Ru-Ou),Fu.right[11]=-1,Fu.right[12]=0,Fu.right[13]=0,Fu.right[14]=Ou*Ru/(Ru-Ou),Fu.right[15]=0,Fu},_u.prototype.getEyeFieldOfView=function(){var $u=this.viewer,Ru=this.device,Ou=new fl$1($u.distortionCoefficients),Fu=$u.screenLensDistance,Nu=(Ru.widthMeters-$u.interLensDistance)/2,Vu=$u.interLensDistance/2,Gu=$u.baselineLensDistance-Ru.bevelMeters,Uu=Ru.heightMeters-Gu,Hu=Za$1*Math.atan(Ou.distort(Nu/Fu)),Wu=Za$1*Math.atan(Ou.distort(Vu/Fu)),Qu=Za$1*Math.atan(Ou.distort(Gu/Fu)),qu=Za$1*Math.atan(Ou.distort(Uu/Fu)),Ku=new gl$1,Yu=new gl$1;return Ku.leftDegrees=Math.min(Hu,$u.fov),Ku.rightDegrees=Math.min(Wu,$u.fov),Ku.downDegrees=Math.min(Qu,$u.fov),Ku.upDegrees=Math.min(qu,$u.fov),Yu.leftDegrees=Ku.rightDegrees,Yu.rightDegrees=Ku.leftDegrees,Yu.upDegrees=Ku.upDegrees,Yu.downDegrees=Ku.downDegrees,{left:Ku,right:Yu}},_u.prototype.onDeviceOrientation_=function($u){this._deviceOrientationQ=this._deviceOrientationQ||new r$3.Quaternion;var Ru=$u.alpha,Ou=$u.beta,Fu=$u.gamma;Ru=(Ru||0)*Math.PI/180,Ou=(Ou||0)*Math.PI/180,Fu=(Fu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$3.Euler(Ru,Ou,-Fu,"YXZ"))},_u.prototype.onDeviceMotion_=function($u){this.updateDeviceMotion_($u)},_u.prototype.updateDeviceMotion_=function($u){var Ru=$u.accelerationIncludingGravity,Ou=$u.rotationRate,Fu=$u.timeStamp/1e3,Nu=Fu-this.previousTimestampS;return Nu<0?(al$1("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Fu)):Nu<=.001||Nu>1?(al$1("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Fu)):(Ru&&(this.accelerometer.set(-Ru.x,-Ru.y,-Ru.z),Ou&&(rl$1()?this.gyroscope.set(-Ou.beta,Ou.alpha,Ou.gamma):this.gyroscope.set(Ou.alpha,Ou.beta,Ou.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Fu)),this.filter.addAccelMeasurement(this.accelerometer,Fu)),void(this.previousTimestampS=Fu))},_u.prototype.onOrientationChange_=function(){this.setScreenTransform_()},_u.prototype.onMessage_=function($u){var Ru=$u.data;Ru&&Ru.type&&Ru.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Ru.deviceMotionEvent)},_u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_u}(),vl$1=[0,0,.5,1],yl$1=[.5,0,.5,1],bl$1=function(){function _u($u){var Ru=this;this.renderer=$u,this.sensor=new ml$1(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$3.PerspectiveCamera,this.cameraR=new r$3.PerspectiveCamera;var Ou=this.sensor.start();this.dispose=function(){var Fu=Ru.renderer.getSize(new r$3.Vector2);Ru.renderer.setScissor(0,0,Fu.width,Fu.height),Ru.renderer.setViewport(0,0,Fu.width,Fu.height),Ru.renderer.setScissorTest(!1),Ou()}}return _u.prototype.render=function($u,Ru){var Ou=this.renderer.getSize(new r$3.Vector2);if(Ou.width>Ou.height){var Fu=$u.autoUpdate;Fu&&($u.updateMatrixWorld(),$u.autoUpdate=!1);var Nu={x:Math.round(Ou.width*vl$1[0]),y:Math.round(Ou.height*vl$1[1]),width:Math.round(Ou.width*vl$1[2]),height:Math.round(Ou.height*vl$1[3])},Vu={x:Math.round(Ou.width*yl$1[0]),y:Math.round(Ou.height*yl$1[1]),width:Math.round(Ou.width*yl$1[2]),height:Math.round(Ou.height*yl$1[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Ru.parent===null&&Ru.updateMatrixWorld(),Ru.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Ru.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Gu=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$3.Vector3().fromArray(Gu.left),this.scale),this.cameraR.translateOnAxis(new r$3.Vector3().fromArray(Gu.right),this.scale);var Uu=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Uu.left.slice(),this.cameraR.projectionMatrix.elements=Uu.right.slice(),this.renderer.setViewport(Nu.x,Nu.y,Nu.width,Nu.height),this.renderer.setScissor(Nu.x,Nu.y,Nu.width,Nu.height),this.renderer.render($u,this.cameraL),this.renderer.setViewport(Vu.x,Vu.y,Vu.width,Vu.height),this.renderer.setScissor(Vu.x,Vu.y,Vu.width,Vu.height),this.renderer.render($u,this.cameraR),this.renderer.setViewport(0,0,Ou.width,Ou.height),this.renderer.setScissor(0,0,Ou.width,Ou.height),this.renderer.setScissorTest(!1),Fu&&($u.autoUpdate=!0)}else this.renderer.render($u,Ru)},_u.prototype.dispose=function(){},_u}(),xl$1={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl$1=typeof navigator!="undefined"&&(ul$1=xl$1[navigator.language.split("-")[0]])!==null&&ul$1!==void 0?ul$1:xl$1.zh,El$1=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl$1.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl$1.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml$1(_u){for(var $u=1,Ru=document.getElementsByTagName("meta"),Ou=0;Ou<Ru.length;Ou++){var Fu=Ru[Ou];if(Fu.getAttribute("name")==="viewport"){var Nu=(Fu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Nu&&($u=Number(Nu[1])),isNaN($u)&&($u=1)}}return El$1.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,_u).replace(/(\d+)px/g,function(Vu,Gu){return function(Uu){return Math.floor(Uu*$u)+"px"}(Number(Gu))})}var Il$1=new r$3.CircleBufferGeometry(.12,16),Sl$1=function(){var _u=yt(),$u=new r$3.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Ru=256,Ou=document.createElement("canvas");Ou.setAttribute("width",String(Ru)),Ou.setAttribute("height",String(Ru));var Fu=Ou.getContext("2d");if(Fu){Fu.drawImage(_u,0,0,Ru,Ru),Fu.globalCompositeOperation="source-out";var Nu=128;Fu.beginPath(),Fu.lineWidth=6.4,Fu.arc(Nu,Nu,83.2,0,2*Math.PI),Fu.strokeStyle="rgba(255, 255, 255, 1.0)",Fu.closePath(),Fu.stroke(),$u.image=Ou,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cl$1=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Ru=256;return $u.beginPath(),$u.arc(Ru,Ru,192,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Ru,Ru,192,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$3.CanvasTexture(_u)}}return null}(),Bl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Ru=$u.getContext("2d");if(Ru){var Ou=256;Ru.arc(Ou,Ou,192,0,2*Math.PI),Ru.fillStyle="rgba(85, 90, 255, 0.6)",Ru.shadowBlur=25.6,Ru.shadowColor="rgba(255, 255, 255, 0.6)",Ru.fill(),Ru.arc(Ou,Ou,192,0,2*Math.PI);var Fu=Ru.createRadialGradient(Ou,Ou,0,Ou,Ou,Ou);Fu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Fu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Ru.fillStyle=Fu,Ru.fill(),Ru.lineWidth=4.8,Ru.arc(Ou,Ou,187.2,0,2*Math.PI);var Nu=Ru.createLinearGradient(0,0,0,_u);return Nu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Nu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Ru.strokeStyle=Nu,Ru.stroke(),new r$3.CanvasTexture($u)}}return null}(),Tl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Ru=$u.getContext("2d");if(Ru){var Ou=256,Fu=179.2;Ru.arc(Ou,Ou,Fu,0,2*Math.PI),Ru.fillStyle="rgba(255, 255, 255, 0.4)",Ru.shadowBlur=25.6,Ru.shadowColor="rgba(255, 255, 255, 0.6)",Ru.fill(),Ru.arc(Ou,Ou,Fu,0,2*Math.PI);var Nu=Ru.createRadialGradient(Ou,Ou,0,Ou,Ou,Ou);Nu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Nu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Ru.fillStyle=Nu,Ru.fill(),Ru.lineWidth=4.8,Ru.arc(Ou,Ou,Fu-4.8,0,2*Math.PI);var Vu=Ru.createLinearGradient(0,0,0,_u);return Vu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Vu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Ru.strokeStyle=Vu,Ru.stroke(),new r$3.CanvasTexture($u)}}return null}(),Pl$1=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Ru=$u.getContext("2d");if(Ru){var Ou=256,Fu=217.6,Nu=64;Ru.lineWidth=Nu,Ru.arc(Ou,Ou,Fu,0,2*Math.PI),Ru.strokeStyle="rgba(147, 162, 255, 0.3)",Ru.shadowBlur=25.6,Ru.shadowColor="rgba(255, 255, 255, 0.6)",Ru.stroke(),Ru.lineWidth=Nu,Ru.arc(Ou,Ou,Fu,0,2*Math.PI);var Vu=Ru.createRadialGradient(Ou,Ou,185.6,Ou,Ou,249.6);Vu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Vu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Vu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Ru.strokeStyle=Vu,Ru.stroke(),Ru.beginPath(),Ru.lineWidth=4,Ru.arc(Ou,Ou,245.6,0,2*Math.PI);var Gu=Ru.createLinearGradient(0,0,_u,0);return Gu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Gu.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Gu.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Gu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Ru.strokeStyle=Gu,Ru.stroke(),new r$3.CanvasTexture($u)}}return null}(),Rl$1=function(_u){function $u(){var Ru=_u.call(this)||this;Ru.progress=0,Ru.opacity=0,Ru.loading=!1,Ru.current=!1,Ru.disabled=!1,Ru.opacityMotion=new Ro({opacity:0}),Ru.loadingMotion=new Ro({opacity:0}),Ru.currentMotion=new Ro({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Ou={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Ru.hitTestMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{color:0,opacity:0}))),Ru.hitTestMesh.scale.set(1.5,1.5,1.5),Ru.centerMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Bl$1,opacity:0}))),Ru.centerMesh2=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Tl$1,opacity:0}))),Ru.ringMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Pl$1,opacity:0}))),Ru.loadingMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Sl$1,opacity:.8}))),Ru.disableMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Ou),{map:Cl$1}))),Ru.loadingMesh.visible=!1,Ru.disableMesh.visible=!1,Ru.hitTestMesh.position.z=0,Ru.ringMesh.position.z=.003,Ru.disableMesh.position.z=.002,Ru.centerMesh.position.z=.002,Ru.centerMesh2.position.z=.002,Ru.loadingMesh.position.z=.005,Ru.hitTestMesh.frustumCulled=!1,Ru.centerMesh.frustumCulled=!1,Ru.centerMesh2.frustumCulled=!1,Ru.ringMesh.frustumCulled=!1,Ru.loadingMesh.frustumCulled=!1,Ru.disableMesh.frustumCulled=!1,Ru.add(Ru.hitTestMesh),Ru.add(Ru.centerMesh),Ru.add(Ru.centerMesh2),Ru.add(Ru.ringMesh),Ru.add(Ru.loadingMesh),Ru.add(Ru.disableMesh),Ru.renderOrder=1e4,Ru.needsRender=!0,Ru}return t$3.__extends($u,_u),$u.prototype.setProgress=function(Ru){this.progress=Ru,this.setLoading(Ru>0)},$u.prototype.setOpacity=function(Ru){this.opacity!==Ru&&(this.opacity=Ru=ho$1(Ru,0,1),this.opacityMotion.set({opacity:Ru},30).catch(Qe$1))},$u.prototype.setCurrent=function(Ru){if(this.current!==Ru){if(Ru){var Ou=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Ou,1500).catch(Qe$1)}else Ou=[{progress:0,value:t$3.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Ou,200).catch(Qe$1);this.current=Ru}},$u.prototype.setLoading=function(Ru){this.loading!==Ru&&(Ru?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Ru,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},$u.prototype.setDisabled=function(Ru){this.disabled!==Ru&&(this.disabled=Ru,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Ru,this.centerMesh.visible=!Ru,this.needsRender=!0)},$u.prototype.tap=function(){return Promise.resolve()},$u.prototype.updateTime=function(Ru,Ou){this.opacityMotion.update(Ru),this.currentMotion.update(Ru),this.loadingMotion.update(Ru);var Fu=this.opacityMotion.value.opacity,Nu=this.currentMotion.value,Vu=Nu.ringScale,Gu=Nu.ringOpacity,Uu=Nu.circleFade,Hu=Nu.circleOpacity,Wu=Nu.circleScale;if(this.ringMesh.scale.set(Vu,Vu,Vu),this.centerMesh.scale.set(Wu,Wu,Wu),this.centerMesh2.scale.set(Wu,Wu,Wu),this.ringMesh.material.opacity=Gu*Fu,this.centerMesh.material.opacity=(1-Uu)*Fu,this.centerMesh2.material.opacity=Uu*Hu*Fu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Ou/200);var Qu=this.opacityMotion.value.opacity,qu=1.1;this.centerMesh.scale.set(qu,qu,qu),this.centerMesh2.scale.set(qu,qu,qu),this.centerMesh.material.opacity=0*Qu,this.centerMesh2.material.opacity=.2*Qu}else this.loadingMesh.visible=!1;this.needsRender=!0},$u.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},$u}(r$3.Object3D),kl$1=function(_u){function $u(Ru){var Ou=this,Fu=$u.parseArgs(Ru);(Ou=_u.call(this,Fu)||this).cardboard=new bl$1(Ou.renderer);var Nu,Vu,Gu,Uu=(Nu="five_vr_helper_"+Kr(),Vu=Ml$1(Nu),(Gu=document.createElement("div")).className=Nu,Gu.innerHTML=Vu,Gu);Ou.helperElement=Uu;var Hu=new ra(Uu);return Ou.element.parentNode&&(Ou.element.parentNode.insertBefore(Uu,Ou.element),Ou.setHelperElementSize(),Hu.on("tap",function(){return Ou.emit("vrWantsToExit")})),Ou.destroyHelper=function(){Hu.destroy(),Uu.parentNode&&Uu.parentNode.removeChild(Uu),delete Ou.helperElement},Ou.boundingMesh.visible=!0,Ou}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou=t$3.__assign(t$3.__assign({},Ru),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Ou)},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Ru=0,Ou=this.panoMeshes;Ru<Ou.length;Ru++){var Fu=Ou[Ru];this.helper.remove(Fu),Fu.dispose()}this.panoMeshes.length=0},$u.prototype.isReady=function(){return!1},$u.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},$u.prototype.updatePanoMeshes=function(){var Ru=this;this.panoMeshes.forEach(function(Vu){Ru.helper.remove(Vu),Vu.dispose()}),this.panoMeshes.length=0;for(var Ou=0;Ou<this.work.observers.length;Ou++){var Fu=this.work.observers[Ou],Nu=new Rl$1;Nu.name="panoSphere_".concat(this.work.workCode,"_").concat(Ou),Nu.position.copy(Fu.position),Nu.needsRender=!0,this.helper.add(Nu),this.panoMeshes[Ou]=Nu}},$u.prototype.updateTime=function(Ru,Ou){for(var Fu,Nu,Vu=[],Gu=2;Gu<arguments.length;Gu++)Vu[Gu-2]=arguments[Gu];if(!this.destroyed){this.needsRender=!0;var Uu={},Hu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Ru);var Wu=this.locationMotion.getKeyFrameSegment(Ru),Qu=Wu[0],qu=Wu[1],Ku=this.panoResourceFromLocationMotionKeyframe(Qu),Yu=this.panoResourceFromLocationMotionKeyframe(qu),_c=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Xu=Ku.position,Zu=Yu.position,Xc=this.locationMotion.value.count-qu.value.count+1;Uu.modelAlpha=this.locationMotion.value.modelAlpha,Uu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Uu.useBlackTransition=Yu.effect==="instant",Yu.panoPicture&&(Xc<1?Ku.panoPicture&&(Uu.pano0=Ku.panoPicture):Uu.pano0=Yu.panoPicture,Uu.pano1=Yu.panoPicture),Yu.effect==="fade"&&(Uu.pano0&&Ku.panoPicture&&(Uu.pano0={map:Uu.pano0.map,luminanceMap:Uu.pano0.luminanceMap,matrix:Ku.panoPicture.matrix.clone().setPosition(Yu.position)}),Xu.copy(Zu)),Uu.progress=Xc,Hu.distance=this.locationMotion.value.distance,Hu.offset=new r$3.Vector3(Xu.x+(Zu.x-Xu.x)*Xc,Xu.y+(Zu.y-Xu.y)*Xc,Xu.z+(Zu.z-Xu.z)*Xc);for(var _h=[],ep=[],np=0,ap=this.locationMotion.keyframes;np<ap.length;np++){var lp=ap[np],up=lp.key,_f=lp.progress;up!==void 0&&(_h.push(up),_f>=this.locationMotion.progress&&ep.push(up))}for(var tp=0,ip=Object.keys(this.panoResources);tp<ip.length;tp++){var rp=ip[tp];if(!(ep.indexOf(rp)>=0)){var op=this.panoResources[rp];if(op.panoPicture){var sp=op.panoPicture.map;if(sp){if(sp===((Fu=Uu.pano0)===null||Fu===void 0?void 0:Fu.map)||sp===((Nu=Uu.pano1)===null||Nu===void 0?void 0:Nu.map))continue;sp.dispose(),op.panoPicture=null}}_h.indexOf(rp)>=0||delete this.panoResources[rp]}}this.currentPanoIndex=Xc<.5?Ku.panoIndex:Yu.panoIndex,this.emit("movingToPano",Ju.panoIndex,_c.panoIndex,this.locationMotion.progress)}ia$1(Uu)===!1&&(this.model.setMaterial(Uu),this.boundingMesh.setMaterial(Uu)),Hu.offset&&this.camera.position.copy(Hu.offset);var cp=this.camera.pose.longitude,hp=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var dp=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),xp=0;xp<this.work.observers.length;xp++){var bp=this.work.observers[xp];if((Up=this.panoMeshes[xp]).visible=!0,bp.loadable||bp.active){if(dp.indexOf(xp)===-1)Up.visible=!1;else{Up.visible=!0;var Rp=Up.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Rp<.05?Up.setOpacity(0):Up.setOpacity(ho$1(1.5/Rp,0,1)),this.currentPanoIndex===xp&&Up.setOpacity(0)}Up.lookAt(this.camera.position)}else Up.visible=!0}var Tp=this.intersect(Ru);for(xp=0;xp<this.work.observers.length;xp++)(Up=this.panoMeshes[xp])==null||Up.setCurrent(Up===Tp);for(xp=0;xp<this.work.observers.length;xp++){var Up;(Up=this.panoMeshes[xp])&&Up.updateTime&&Up.updateTime(Ru,Ou)}cp===this.camera.pose.longitude&&hp===this.camera.pose.latitude||(this.cameraMotion.set(ii$1(this.camera.pose,["longitude","latitude"]),0).catch(Qe$1),this.emit("cameraDirectionUpdate",ii$1(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii$1(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},$u.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},$u.prototype.setCamera=function(Ru){},$u.prototype.destroyHelper=function(){},$u.prototype.setHelperElementSize=function(){if(this.helperElement){var Ru=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),Ou=Ru.x*this.scissor.left,Fu=Ru.y*(1-this.scissor.bottom-this.scissor.height),Nu=Ru.x*this.scissor.width,Vu=Ru.y*this.scissor.height;this.helperElement.style.marginLeft=Ou+"px",this.helperElement.style.marginTop=Fu+"px",this.helperElement.style.width=Nu+"px",this.helperElement.style.height=Vu+"px"}},$u.prototype.intersect=function(Ru){var Ou;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Ru-this.activeTime>1500){var Fu=this.activePanoMesh;return(Wu=this.panoMeshes.indexOf(Fu))>=0&&this.moveToPano(Wu,{},!0),delete this.activePanoMesh,delete this.activeTime,Fu}for(var Nu=this.camera.getWorldDirection(new r$3.Vector3),Vu=new r$3.Raycaster(this.camera.position,Nu),Gu=void 0,Uu=[],Hu=this.work.observers[this.currentPanoIndex].visibleNodes,Wu=0;Wu<this.work.observers.length;Wu++){var Qu=this.panoMeshes[Wu];if(Hu.indexOf(Wu)!==-1){var qu=Vu.intersectObject((Ou=Qu.hitTestMesh)!==null&&Ou!==void 0?Ou:Qu,!0)[0];qu&&Uu.push({panoMesh:Qu,intersection:qu})}}var Ku=Uu.sort(function(Zu,Xc){return Zu.intersection.distance-Xc.intersection.distance})[0];if(Ku?(Gu=Ku.intersection,this.activePanoMesh!==Ku.panoMesh&&(this.activePanoMesh=Ku.panoMesh,this.activeTime=Ru),this.intersectMesh.position.copy(Ku.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Gu)if((Gu=this.model.intersectRaycaster(Vu)[0])&&Gu.face){var Yu=Gu.face.normal,_c=new r$3.Quaternion;_c.setFromUnitVectors(new r$3.Vector3(0,0,1),Yu),this.intersectMesh.quaternion.copy(_c);var Ju=Yu.clone().multiplyScalar(.05),Xu=Gu.point.clone().add(Ju);this.intersectMesh.position.copy(Xu),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Gu,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Ku==null?void 0:Ku.panoMesh},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u}(Xa$1),Dl$1=function(_u){function $u(Ru){var Ou,Fu,Nu,Vu,Gu=this,Uu=$u.parseArgs(Ru);return(Gu=_u.call(this,Uu)||this).currentPanoIndex=Uu.initial[0],Gu.locationMotion=new Ro({x:Gu.camera.pose.offset.x,y:Gu.camera.pose.offset.y,z:Gu.camera.pose.offset.z,distance:Gu.camera.pose.distance,modelAlpha:(Fu=(Ou=Gu.model.getMaterial())===null||Ou===void 0?void 0:Ou.modelAlpha)!==null&&Fu!==void 0?Fu:0,perspToOrtho:(Vu=(Nu=Gu.model.getMaterial())===null||Nu===void 0?void 0:Nu.perspToOrtho)!==null&&Vu!==void 0?Vu:0}),Gu}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){return _u.parseArgs.call(this,Ru)},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose()},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){this.work=Ru,this.currentPanoIndex=Ou,this.hideIntersectMesh();var Gu={duration:0,longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov};return this.moveToPano(Ou,Gu,Vu),!0},$u.prototype.updateTime=function(Ru,Ou){for(var Fu=[],Nu=2;Nu<arguments.length;Nu++)Fu[Nu-2]=arguments[Nu];if(!this.destroyed){var Vu={},Gu={};if(!this.locationMotion.ended){this.locationMotion.update(Ru),Vu.modelAlpha=this.locationMotion.value.modelAlpha,Vu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Uu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Hu=ta(this.work.observers,function(Wu){return Wu.position.distanceTo(Uu)});this.currentPanoIndex=this.work.observers.indexOf(Hu)}this.cameraMotion.ended||(this.cameraMotion.update(Ru),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Vu)||this.model.setMaterial(Vu),ia$1(Gu)||this.setCamera(Gu)}},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;this.destroyed||(this.pending=!1,this.userAction=Nu,this.moveToPano(Ru,{longitude:(Vu=Ou.longitude)!==null&&Vu!==void 0?Vu:this.defaultLongitude,latitude:ho$1((Gu=Ou.latitude)!==null&&Gu!==void 0?Gu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Uu=Ou.fov)!==null&&Uu!==void 0?Uu:this.defaultFov,this.minFov,this.maxFov),duration:Fu,moveStartCallback:function(Wu,Qu){Hu.emit("initAnimationWillStart",Wu,Qu,Hu.userAction)},moveEndCallback:function(Wu,Qu){Hu.emit("initAnimationEnded",Wu,Qu,Hu.userAction)},moveCancelCallback:function(){var Wu=Hu.currentPanoIndex,Qu={longitude:Hu.camera.pose.longitude,latitude:Hu.camera.pose.latitude,fov:Hu.camera.pose.fov,offset:Hu.camera.pose.offset.clone(),distance:Hu.camera.pose.distance};Hu.emit("initAnimationEnded",Wu,Qu,Hu.userAction)}},Nu))},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Ou=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,offset:new r$3.Vector3(Ou.value.x,Ou.value.y,Ou.value.z),distance:Ou.value.distance}},$u.prototype.moveToPano=function(Ru,Ou,Fu){Ou===void 0&&(Ou={});var Nu=this.work.observers[Ru];Nu&&this.moveToPosition(Nu.position,Ou,Fu)},$u.prototype.moveToPosition=function(Ru,Ou,Fu){var Nu,Vu,Gu,Uu=this;Ou===void 0&&(Ou={}),this.userAction=Fu;for(var Hu=_e$1(),Wu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Ru),Qu=this.locationMotion.getProgressVelocity(Hu),qu=0,Ku=1;Ku<this.locationMotion.keyframes.length;Ku++){var Yu=this.locationMotion.keyframes[Ku-1].value,_c=Yu.x,Ju=Yu.y,Xu=Yu.z,Zu=this.locationMotion.keyframes[Ku].value,Xc=Zu.x,_h=Zu.y,ep=Zu.z;qu+=Math.sqrt(Math.pow(Xc-_c,2)+Math.pow(_h-Ju,2)+Math.pow(ep-Xu,2))}var np=Wu===0?0:Qu*qu/Wu,ap=this.calculateMovingDuration(Ou.duration,Wu),lp={x:Ru.x,y:Ru.y,z:Ru.z,distance:0,modelAlpha:1,perspToOrtho:0},up={longitude:Ou.longitude,latitude:Ou.latitude,fov:Ou.fov},_f={longitude:(Nu=up.longitude)!==null&&Nu!==void 0?Nu:this.camera.pose.longitude,latitude:(Vu=up.latitude)!==null&&Vu!==void 0?Vu:this.camera.pose.latitude,fov:(Gu=up.fov)!==null&&Gu!==void 0?Gu:this.camera.pose.fov,offset:Ru.clone(),distance:0},tp=ta(this.work.observers,function(rp){return rp.position.distanceTo(Ru)}),ip=this.work.observers.indexOf(tp);this.emit("moveToPano",ip,this.userAction),Ou.moveStartCallback&&Ou.moveStartCallback(ip,_f),this.emit("panoWillArrive",ip,_f,this.userAction),this.cameraMotion.set(up,ap).catch(Qe$1),this.locationMotion.set(lp,ap,np).then(function(){var rp=na(Uu.camera.pose);Ou.moveEndCallback&&Ou.moveEndCallback(ip,rp),Uu.emit("panoArrived",ip,rp,Uu.userAction)},function(){Ou.moveCancelCallback&&Ou.moveCancelCallback(),Uu.emit("moveToPanoCanceled",ip)})},$u.prototype.onTapGesture=function(Ru){var Ou=Ru.pointers.map(function(Yu){return ii$1(Yu,["x","y"])});if(!this.emit("wantsGesture","tap",Ou,!0)){var Fu=this.relativeClientPosition(Ru.center),Nu=new r$3.Raycaster;if(Nu.setFromCamera(Fu,this.camera),!this.emit("wantsTapGesture",Nu,Fu,!0)){this.emit("gesture","tap",Ou,!0),this.emit("tapGesture",Nu,Fu,!0),this.interiaMovement=!1;var Vu=this.model.intersectRaycaster(Nu)[0];if(Vu&&Vu.face){var Gu=Vu.face.normal,Uu=Vu.point;if(new r$3.Vector3(0,1,0).angleTo(Gu)>Math.PI/3){var Hu=this.camera.position.clone().setY(Uu.y),Wu=Uu.clone().sub(Hu).setLength(.3),Qu=Uu.clone().sub(Wu);Nu.set(Qu,new r$3.Vector3(0,-1,0)),Vu=this.model.intersectRaycaster(Nu)[0]}}if(Vu){var qu=Vu.point.clone(),Ku=ta(this.work.observers.filter(function(Yu){return Math.abs(Yu.standingPosition.y-qu.y)<1}),function(Yu){return Yu.standingPosition.distanceTo(qu)});if(Ku)return qu.y=Ku.position.y,void this.moveToPosition(qu,{},!0)}this.cameraBounce()}}},$u}(ba$1),Ll$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Ru=113,Ou=126,Fu=0,Nu="";return arguments[Fu].split(Nu).map(function(Vu){return Vu.charCodeAt(Fu)>Ou?Vu:String.fromCharCode((Vu.charCodeAt(Fu)+Ru)%Ou)}).join(Nu)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl$1=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Fl$1=new r$3.SphereBufferGeometry(.01,128,128),Ql$1=function(){function _u($u){$u===void 0&&($u={}),this.textureLoader=new Ii$1({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u,this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u,this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u,this.textureLoader.setNetworkSubscribe($u)},_u.prototype.load=function($u,Ru,Ou,Fu,Nu,Vu,Gu,Uu){var Hu=[0,0],Wu=function(qu,Ku){Hu[Ku]=qu,Gu(.8*Hu[0]+.2*Hu[1])},Qu=[this.textureLoader.load($u,{viaAjax:!0},void 0,void 0,function(qu){return Wu(qu,1)},Uu),this.textureLoader.loadCube(Ru,{viaAjax:!0},void 0,void 0,function(qu){return Wu(qu,0)},Uu)];return Promise.all(Qu).then(function(qu){var Ku=qu[0],Yu=qu[1],_c={body:function(Ju,Xu,Zu,Xc){var _h=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Ll$1,fragmentShader:Ol$1,transparent:!0,uniforms:r$3.UniformsUtils.clone(Nl$1)}),ep=Xu;return ep.needsUpdate=!0,ep.minFilter=r$3.LinearFilter,ep.magFilter=r$3.LinearFilter,Ju.needsUpdate=!0,Ju.minFilter=r$3.LinearFilter,Ju.magFilter=r$3.LinearFilter,_h.uniforms.opacity.value=0,_h.uniforms.panoMap.value=ep,_h.uniforms.panoDisplacementMap.value=Ju,_h.uniforms.panoPosition.value=Zu,_h.uniforms.panoMatrix.value=Xc,Object.assign(new r$3.Mesh(Fl$1,_h),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Ku.body,Yu.body,Ou,Fu),meta:t$3.__spreadArray([Ku.meta],Yu.meta,!0)};return Nu(_c),_c}).catch(function(qu){for(var Ku=0,Yu=Qu;Ku<Yu.length;Ku++)Yu[Ku].then(function(_c){return _c.body.dispose()}).catch(Qe$1);return Vu(qu),Promise.reject(qu)})},_u}(),Vl=new r$3.Vector3(-1,1,1),_l$1=function(_u){function $u(Ru){var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu=this,Qu=$u.parseArgs(Ru);return(Wu=_u.call(this,Qu)||this).currentPanoIndex=Qu.initial[0],Wu.maxAccessibleDistance=Qu.maxAccessibleDistance,Wu.panoTapTriggerRadius=Qu.panoTapTriggerRadius,Wu.panoCircleMeshCreator=Qu.panoCircleMeshCreator,Wu.boundingMesh=Wu.generateBoundingMesh(),Wu.boundingMesh.setMaterial(Wu.model.getMaterial()||{}),Wu.boundingMesh.visible=!1,Wu.scene.add(Wu.boundingMesh),Wu.panoModelGroup=new r$3.Group,Wu.panoModelGroup.name="panoModels",Wu.scene.add(Wu.panoModelGroup),Wu.panoMeshes=[],Wu.updatePanoMeshes(),Wu.helper.remove(Wu.intersectMesh),Wu.locationMotion=new Ro({count:0,distance:Wu.camera.pose.distance,modelAlpha:(Fu=(Ou=Wu.model.getMaterial())===null||Ou===void 0?void 0:Ou.modelAlpha)!==null&&Fu!==void 0?Fu:0,perspToOrtho:(Vu=(Nu=Wu.model.getMaterial())===null||Nu===void 0?void 0:Nu.perspToOrtho)!==null&&Vu!==void 0?Vu:0}),Wu.panoResources={},Wu.panoResources[Wu.locationMotion.keyframes[0].key=Wu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Wu.currentPanoIndex,workCode:Wu.work.workCode,matrix:(Hu=(Uu=(Gu=Wu.model.getMaterial())===null||Gu===void 0?void 0:Gu.pano1)===null||Uu===void 0?void 0:Uu.matrix)!==null&&Hu!==void 0?Hu:new r$3.Matrix4,position:Wu.camera.pose.offset.clone(),effect:"fly"},Wu.depthTextureLoader=new Ql$1({allowHosts:Wu.work.allowHosts,requestProxy:Wu.requestProxy,networkSubscribe:Wu.networkSubscribe}),Wu}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou,Fu,Nu,Vu=_u.parseArgs.call(this,Ru);return t$3.__assign(t$3.__assign({},Vu),{maxAccessibleDistance:(Ou=Ru.maxAccessibleDistance)!==null&&Ou!==void 0?Ou:5,panoTapTriggerRadius:(Fu=Ru.panoTapTriggerRadius)!==null&&Fu!==void 0?Fu:1,panoCircleMeshCreator:(Nu=Ru.panoCircleMeshCreator)!==null&&Nu!==void 0?Nu:function(){return new as$1}})},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.destroy=function(){var Ru,Ou=this;if(_u.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Fu=0,Nu=this.panoModelGroup.children;Fu<Nu.length;Fu++){var Vu=Nu[Fu];typeof Vu.dispose=="function"&&Vu.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Yu){Ou.helper.remove(Yu),Yu.dispose()}),this.panoMeshes.length=0);for(var Gu=(Ru=this.model.getMaterial())!==null&&Ru!==void 0?Ru:{},Uu=Gu.pano0,Hu=Gu.pano1,Wu=0,Qu=Object.keys(this.panoResources);Wu<Qu.length;Wu++){var qu=Qu[Wu],Ku=this.panoResources[qu];Ku.panoModel&&Ku.panoModel.material.uniforms.panoMap.value!==(Uu==null?void 0:Uu.map)&&Ku.panoModel.material.uniforms.panoMap.value!==(Hu==null?void 0:Hu.map)&&(this.panoModelGroup.remove(Ku.panoModel),Ku.panoModel.material.uniforms.panoMap.value.dispose(),Ku.panoModel.dispose(),delete Ku.panoModel),delete this.panoResources[qu]}this.interiaMovement=!1},$u.prototype.isReady=function(){return this.locationMotion.ended===!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){this.userAction=Vu,this.work=Ru,this.currentPanoIndex=Ou,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Gu={},Uu=!0;this.boundingMesh&&(Gu=this.boundingMesh.getMaterial()||{},Uu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Uu,this.boundingMesh.setMaterial(Gu),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Hu=0,Wu=this.panoMeshes;Hu<Wu.length;Hu++)Wu[Hu].visible=!1;return this.moveToPano(Ou,{effect:"fade",duration:Nu,longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov},Vu),!0},$u.prototype.updateTime=function(Ru,Ou){for(var Fu,Nu,Vu,Gu=[],Uu=2;Uu<arguments.length;Uu++)Gu[Uu-2]=arguments[Uu];if(!this.destroyed){var Hu={},Wu={},Qu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),qu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Ku=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Ru);var Yu=this.locationMotion.getKeyFrameSegment(Ru),_c=Yu[0],Ju=Yu[1],Xu=this.panoResourceFromLocationMotionKeyframe(_c),Zu=this.panoResourceFromLocationMotionKeyframe(Ju),Xc=new r$3.Vector3().copy(Xu.position),_h=new r$3.Vector3().copy(Zu.position),ep=this.locationMotion.value.count-Ju.value.count+1;Hu.progress=ep,Hu.modelAlpha=this.locationMotion.value.modelAlpha,Hu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var np=0,ap=this.panoModelGroup.children;np<ap.length;np++){var lp=ap[np];lp.visible=lp===Xu.panoModel||lp===Zu.panoModel}Xu.panoModel&&(Xu.panoModel.material.uniforms.opacity.value=1-ep,Xu.panoModel.material.depthTest=ep!==0),Zu.panoModel&&(Zu.panoModel.material.uniforms.opacity.value=ep,Zu.panoModel.material.depthTest=ep!==1),Zu.panoModel&&(ep<1?Xu.panoModel&&(Hu.pano0={map:Xu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Xu.matrix}):Hu.pano0={map:Zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Zu.matrix},Hu.pano1={map:Zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Zu.matrix}),Ku=Hu.useBlackTransition=Zu.effect==="instant"||Zu.effect==="montage",Zu.effect!=="fade"&&Zu.effect!=="montage"||(Hu.pano0&&(Hu.pano0={map:Hu.pano0.map,luminanceMap:null,matrix:Xu.matrix.clone().setPosition(Zu.position)}),Xc.copy(_h)),Wu.distance=this.locationMotion.value.distance,Wu.offset=new r$3.Vector3(Xc.x+(_h.x-Xc.x)*ep,Xc.y+(_h.y-Xc.y)*ep,Xc.z+(_h.z-Xc.z)*ep);for(var up=[],_f=[],tp=0,ip=this.locationMotion.keyframes;tp<ip.length;tp++){var rp=ip[tp],op=rp.key,sp=rp.progress;op!==void 0&&(up.push(op),sp>=this.locationMotion.progress&&_f.push(op))}for(var cp=0,hp=Object.keys(this.panoResources);cp<hp.length;cp++){var dp=hp[cp];if(!(_f.indexOf(dp)>=0)){var xp=this.panoResources[dp];if(xp.panoModel){if(xp.panoModel.material.uniforms.panoMap.value===((Fu=Hu.pano0)===null||Fu===void 0?void 0:Fu.map)||xp.panoModel.material.uniforms.panoMap.value===((Nu=Hu.pano1)===null||Nu===void 0?void 0:Nu.map))continue;this.panoModelGroup.remove(xp.panoModel),xp.panoModel.material.uniforms.panoMap.value.dispose(),xp.panoModel.dispose(),delete xp.panoModel}up.indexOf(dp)>=0||delete this.panoResources[dp]}}Xu.workCode===Zu.workCode?this.currentPanoIndex=ep<.5?Xu.panoIndex:Zu.panoIndex:this.currentPanoIndex=Zu.panoIndex,this.emit("movingToPano",qu.panoIndex,Qu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Ru),Wu.longitude=this.cameraMotion.value.longitude,Wu.latitude=this.cameraMotion.value.latitude,Wu.fov=this.cameraMotion.value.fov),ia$1(Hu)===!1&&(this.model.setMaterial(Hu),this.boundingMesh.setMaterial(Hu)),ia$1(Wu)===!1&&this.setCamera(Wu),this.camera.pose.distance>.1)for(var bp=0;bp<this.work.observers.length;bp++)(Ip=this.panoMeshes[bp])&&(Ip.visible=!1);else{var Rp=this.work.observers[this.currentPanoIndex];if(Rp){var Tp=Rp.visibleNodes.concat(this.currentPanoIndex),Up=this.getForwardPanoIndexOrNot();for(bp=0;bp<this.work.observers.length;bp++){var Ip,Vp=this.work.observers[bp];if(Ip=this.panoMeshes[bp])if(Vp.loadable||Vp.active)if(Tp.indexOf(bp)!==-1)if(Ku)Ip.visible=!1,Ip.setOpacity(0);else{Ip.visible=!0;var Lp=Ip.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ip.setCurrent(Up===bp),Ip.setOpacity(Lp<.01?0:ho$1(1.4/Lp,.5,.7)),Ip.updateTime&&Ip.updateTime(Ru,Ou)}else Ip.visible=!1,Ip.setOpacity(0);else Ip.visible=!1,Ip.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Vu=this.boundingMesh.getMaterial())===null||Vu===void 0?void 0:Vu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Ou=this.locationMotion.getKeyFrameSegment(_e$1())[1],Fu=this.panoResourceFromLocationMotionKeyframe(Ou),Nu=this.work.observers[Fu.panoIndex];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,offset:Nu?Nu.position.clone():this.camera.position.clone(),distance:0}},$u.prototype.moveToPano=function(Ru,Ou,Fu){var Nu,Vu,Gu=this;Ou===void 0&&(Ou={});var Uu=this.work.observers[Ru].images.depth,Hu=t$3.__assign({key:"pano.".concat(Ru),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality","sharpen","mappings"])),Wu=(Nu=this.imageOptions.transform)!==null&&Nu!==void 0?Nu:ct$1,Qu={right:Wu(this.work.observers[Ru].images.right,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".right")})),left:Wu(this.work.observers[Ru].images.left,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".left")})),up:Wu(this.work.observers[Ru].images.up,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".up")})),down:Wu(this.work.observers[Ru].images.down,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".down")})),front:Wu(this.work.observers[Ru].images.front,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".front")})),back:Wu(this.work.observers[Ru].images.back,t$3.__assign(t$3.__assign({},Hu),{key:"pano.".concat(Ru,".back")}))},qu=this.work.observers[Ru],Ku=qu.position,Yu=qu.quaternion,_c=new r$3.Matrix4().compose(Ku,Yu,new r$3.Vector3(-1,1,1)),Ju="pano:"+va(Qu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Ju)return;var Xu=this.pendingTextureTask.panoIndex;(Vu=this.panoMeshes[Xu])===null||Vu===void 0||Vu.setProgress(0),this.emit("textureAbort",Xu,this.work.observers[Xu]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Ru,hash:Ju,onLoad:function(Xc){Gu.pending=!1,Gu.destroyed?Xc.body.dispose():(Xc.body.name=Ju,Gu.emit("panoLoaded",Ru),Gu.doMoveToPano(Ru,Xc.body,Ou,Fu))},onError:function(Xc){Gu.pending=!1,Ou.moveCancelCallback&&Ou.moveCancelCallback(),Gu.emit("panoLoadError",Xc,Ru),Gu.emit("moveToPanoCanceled",Ru)}};var Zu=this.panoMeshes[Ru];Zu&&Zu.tap&&Zu.tap(),this.depthTextureLoader.load(Uu,Qu,Ku,_c,function(Xc){var _h,ep;((_h=Gu.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Ju?(Gu.pendingTextureTask.onLoad(Xc),(ep=Gu.panoMeshes[Ru])===null||ep===void 0||ep.setProgress(0),delete Gu.pendingTextureTask,Gu.emit("textureLoaded",Ru,Gu.work.observers[Ru],Xc.meta)):Xc.body.dispose()},function(Xc){var _h,ep;((_h=Gu.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Ju&&(Gu.pendingTextureTask.onError(Xc),(ep=Gu.panoMeshes[Ru])===null||ep===void 0||ep.setProgress(0),delete Gu.pendingTextureTask,Gu.emit("textureError",Xc,Ru,Gu.work.observers[Ru]),Gu.emit("error",Xc))},function(Xc){var _h,ep;Gu.emit("textureLoading",Xc,Ru,Gu.work.observers[Ru]),((_h=Gu.pendingTextureTask)===null||_h===void 0?void 0:_h.hash)===Ju&&((ep=Gu.panoMeshes[Ru])===null||ep===void 0||ep.setProgress(Xc))},this.renderer),this.emit("textureStartLoad",Ru,this.work.observers[Ru])},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;if(!this.destroyed){var Wu=!1;this.pending=!1,this.userAction=Nu,this.moveToPano(Ru,{longitude:(Vu=Ou.longitude)!==null&&Vu!==void 0?Vu:this.defaultLongitude,latitude:ho$1((Gu=Ou.latitude)!==null&&Gu!==void 0?Gu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho$1((Uu=Ou.fov)!==null&&Uu!==void 0?Uu:this.defaultFov,this.minFov,this.maxFov),duration:Fu,moveStartCallback:function(Qu,qu){Wu=!0,Hu.emit("initAnimationWillStart",Qu,qu,Hu.userAction)},moveEndCallback:function(Qu,qu){Hu.emit("initAnimationEnded",Qu,qu,Hu.userAction)},moveCancelCallback:function(){var Qu=na(Hu.camera.pose);Wu===!1&&Hu.emit("initAnimationWillStart",Hu.currentPanoIndex,Qu,Hu.userAction),Hu.emit("initAnimationEnded",Hu.currentPanoIndex,Qu,Hu.userAction)}},Nu)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Ru){return this.panoResources[Ru.key]},$u.prototype.locationMotionKeyframesLength=function(Ru){for(var Ou=0,Fu=1;Fu<Ru.length;Fu++){var Nu=this.panoResourceFromLocationMotionKeyframe(Ru[Fu-1]).position,Vu=this.panoResourceFromLocationMotionKeyframe(Ru[Fu]).position;Ou+=Nu.distanceTo(Vu)*(Ru[Fu].value.count-Ru[Fu-1].value.count)}return Ou},$u.prototype.updatePanoMeshes=function(){for(var Ru={},Ou=0,Fu=this.panoMeshes;Ou<Fu.length;Ou++)Ru[(Uu=Fu[Ou]).name]=Uu;this.panoMeshes.length=0;for(var Nu=0;Nu<this.work.observers.length;Nu++){var Vu="panoCircle_".concat(this.work.workCode,"_").concat(Nu),Gu=this.work.observers[Nu],Uu=void 0;Ru[Vu]?(Uu=Ru[Vu],delete Ru[Vu]):((Uu=this.panoCircleMeshCreator()).name=Vu,this.helper.add(Uu)),Uu.position.copy(Gu.standingPosition),this.panoMeshes[Nu]=Uu}for(var Hu=0,Wu=Object.keys(Ru);Hu<Wu.length;Hu++){var Qu=Wu[Hu];this.helper.remove(Ru[Qu]),Ru[Qu].dispose(),delete Ru[Qu]}},$u.prototype.generateBoundingMesh=function(Ru){Ru===void 0&&(Ru=!1);for(var Ou=this.model.bounding.clone(),Fu=0,Nu=this.work.observers;Fu<Nu.length;Fu++){var Vu=Nu[Fu];Ou.expandByPoint(Vu.standingPosition),Ou.expandByPoint(new r$3.Vector3().fromArray([Vu.position.x,2*Vu.position.y-Vu.standingPosition.y,Vu.position.z]))}Ru&&Ou.expandByPoint(this.camera.position);var Gu=Ks(Ou,new r$3.Vector3(1,0,1));return Gu.name="panorama_bounding",Gu.frustumCulled=!1,Gu},$u.prototype.doMoveToPano=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu,Wu=this;Fu===void 0&&(Fu={}),this.userAction=Nu;var Qu=_e$1(),qu=Kr(),Ku=this.work.observers[Ru],Yu=this.panoResources[qu]={panoIndex:Ru,workCode:this.work.workCode,effect:(Vu=Fu.effect)!==null&&Vu!==void 0?Vu:"fly",panoModel:Ou,matrix:new r$3.Matrix4().compose(Ku.position,Ku.quaternion,Vl),position:Ku.position.clone()};Ou.visible=!1,Ou.renderOrder=-1,this.panoModelGroup.add(Ou);var _c,Ju,Xu;if(this.locationMotion.ended){var Zu=this.locationMotion.getKeyFrameSegment(Qu);Zu[0];var Xc=Zu[1],_h=this.locationMotion.value,ep=this.panoResourceFromLocationMotionKeyframe(Xc).position,np=Yu.position;_c=Math.max(ep.distanceTo(np),1),Ju=[{key:Xc.key,progress:0,value:t$3.__assign(t$3.__assign({},_h),{count:0})},{key:qu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Xu=0}else{var ap=this.locationMotion.getKeyFrameSegment(Qu),lp=ap[0],up=(Xc=ap[1],_h=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(lp).position),_f=(ep=this.panoResourceFromLocationMotionKeyframe(Xc).position,np=Yu.position,Xc.value.count-_h.count),tp=Math.max(up.distanceTo(ep),1)*_f;_c=tp+Math.max(ep.distanceTo(np),1),Ju=[{key:lp.key,progress:0,value:t$3.__assign({},_h)},{key:Xc.key,progress:tp/_c,value:Xc.value},{key:qu,progress:1,value:{count:Xc.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var ip=this.locationMotionKeyframesLength(this.locationMotion.keyframes),rp=this.locationMotionKeyframesLength(Ju);Xu=ip===0||ip===0?0:this.locationMotion.getProgressVelocity(Qu)*ip/rp}var op=this.calculateMovingDuration(Fu.duration,Fu.effect==="fade"||Fu.effect==="montage"?0:_c),sp={longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov},cp={longitude:(Gu=sp.longitude)!==null&&Gu!==void 0?Gu:this.camera.pose.longitude,latitude:(Uu=sp.latitude)!==null&&Uu!==void 0?Uu:this.camera.pose.latitude,fov:(Hu=sp.fov)!==null&&Hu!==void 0?Hu:this.camera.pose.fov,offset:Ku.position.clone(),distance:this.camera.pose.distance};Fu.moveStartCallback&&Fu.moveStartCallback(Ru,cp),this.emit("panoWillArrive",Ru,cp,this.userAction),this.cameraMotion.set(sp,op).catch(Qe$1),this.locationMotion.setKeyframes(Ju,op,Xu).then(function(){var hp={longitude:Wu.camera.pose.longitude,latitude:Wu.camera.pose.latitude,fov:Wu.camera.pose.fov,offset:Wu.camera.pose.offset.clone(),distance:Wu.camera.pose.distance};Fu.moveEndCallback&&Fu.moveEndCallback(Ru,hp),Wu.emit("panoArrived",Ru,hp,Nu)},function(){Fu.moveCancelCallback&&Fu.moveCancelCallback(),Wu.emit("moveToPanoCanceled",Ru)})},$u.prototype.getForwardPanoIndexOrNot=function(Ru){var Ou=this,Fu=this.camera.getWorldDirection(new r$3.Vector3),Nu=this.camera.position.clone(),Vu=this.work.observers[this.currentPanoIndex];if(!Vu)return null;var Gu=Vu.accessibleNodes.filter(function(Xu){if(Xu===Ou.currentPanoIndex)return!1;var Zu=Ou.work.observers[Xu],Xc=Zu.standingPosition.clone().sub(Nu);return Xc.length()!==0&&!(Xc.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(Zu.loadable||Zu.active)}),Uu=(Ru?Ru.ray.direction.clone():Fu.clone()).setY(0);if(Uu.length()===0)return null;for(var Hu=Gu.slice().sort(function(Xu,Zu){var Xc=Ou.work.observers[Xu].position.clone().setY(Nu.y),_h=Ou.work.observers[Zu].position.clone().setY(Nu.y);return Xc.distanceTo(Nu)-_h.distanceTo(Nu)}),Wu=0,Qu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Wu<Qu.length;Wu++)for(var qu=Qu[Wu],Ku=0,Yu=Hu;Ku<Yu.length;Ku++){var _c=Yu[Ku],Ju=this.work.observers[_c].position.clone().setY(Nu.y).sub(Nu);if(Ju.length()!==0&&Uu.angleTo(Ju)<qu)return _c}return null},$u.prototype.onTapGesture=function(Ru){var Ou=this,Fu=Ru.pointers.map(function(hp){return ii$1(hp,["x","y"])});if(!this.emit("wantsGesture","tap",Fu,!0)){var Nu=this.relativeClientPosition(Ru.center),Vu=new r$3.Raycaster;if(Vu.setFromCamera(Nu,this.camera),!this.emit("wantsTapGesture",Vu,Nu,!0)){this.emit("gesture","tap",Fu,!0),this.emit("tapGesture",Vu,Nu,!0),this.interiaMovement=!1;var Gu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Uu=null,Hu=this.work.observers[this.currentPanoIndex];if(Hu){var Wu=Hu.accessibleNodes.filter(function(hp){if(hp===Ou.currentPanoIndex)return!1;var dp=Ou.work.observers[hp];return!(dp.position.distanceTo(Ou.camera.position)>Ou.maxAccessibleDistance)&&(dp.loadable||dp.active)}),Qu=Vu.intersectObject(this.boundingMesh,!0)[0];if(Qu){var qu=ta(Wu,function(hp){var dp=Ou.work.observers[hp].standingPosition.clone();return dp.clone().sub(Ou.camera.position).setY(0).angleTo(Gu)>Math.PI/2?1/0:dp.distanceTo(Qu.point)},!0),Ku=qu[0];qu[1]<this.panoTapTriggerRadius&&(Uu=Ku)}oo(Uu)&&(Uu=this.getForwardPanoIndexOrNot(Vu));for(var Yu=0,_c=this.locationMotion.keyframes;Yu<_c.length;Yu++){var Ju=_c[Yu],Xu=this.panoResourceFromLocationMotionKeyframe(Ju);if(!(Ju.progress<this.locationMotion.progress)&&Xu.panoIndex===Uu){Uu=null;break}}if(this.emit("panoSelected",Uu),oo(Uu))this.locationMotion.ended===!0&&this.cameraBounce();else{var Zu=this.work.observers[Uu];if(Zu.active){for(var Xc={},_h=Math.PI/6,ep=Math.PI/12,np=new r$3.Vector3(0,1,0),ap=Zu.position.clone().setY(0).sub(Hu.position.clone().setY(0)).normalize(),lp=ap.clone().applyAxisAngle(np,_h),up=ap.clone().applyAxisAngle(np,-_h),_f=[],tp=[],ip=[],rp=0,op=Zu.accessibleNodes;rp<op.length;rp++)if((Ku=op[rp])!==this.currentPanoIndex&&Ku!==Uu){var sp=this.work.observers[Ku].position.clone().sub(Zu.position).setY(0);ap.angleTo(sp)<_h?ip.push(sp):lp.angleTo(sp)<_h?_f.push(sp):up.angleTo(sp)<_h&&tp.push(sp)}var cp=(ip.length>0?ip:t$3.__spreadArray(t$3.__spreadArray([],_f,!0),tp,!0)).slice().sort(function(hp,dp){return hp.angleTo(ap)-dp.angleTo(ap)})[0];cp&&cp.angleTo(Gu)>ep&&(Xc.longitude=Math.atan2(-cp.x,-cp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Xc.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Uu,Xc,!0)}else this.panoMeshes[Uu]&&(this.panoMeshes[Uu].setDisabled(!1),this.panoMeshes[Uu].setLoading(!0))}}}}},$u}(ba$1);function Hl$1(_u,$u){var Ru=new r$3.Vector3;return Ru.setFromMatrixColumn($u,0),Ru.multiplyScalar(-_u),Ru}function ql(_u,$u,Ru){var Ou=new r$3.Vector3;return Ou.setFromMatrixColumn(Ru,0),Ou.crossVectors($u,Ou),Ou.multiplyScalar(_u),Ou}var zl$1=function(_u){function $u(Ru){var Ou,Fu,Nu,Vu,Gu=this,Uu=$u.parseArgs(Ru);return(Gu=_u.call(this,Uu)||this).currentPanoIndex=Uu.initial[0],Gu.defaultLongitude=Uu.defaultLongitude,Gu.defaultLatitude=Uu.defaultLatitude,Gu.defaultDistance=Uu.defaultDistance,Gu.maxLatitude=Uu.maxLatitude,Gu.minLatitude=Uu.minLatitude,Gu.maxDistance=Uu.maxDistance,Gu.minDistance=Uu.minDistance,Gu.locationMotion=new Ro({x:Gu.camera.pose.offset.x,y:Gu.camera.pose.offset.y,z:Gu.camera.pose.offset.z,distance:Gu.camera.pose.distance,modelAlpha:(Fu=(Ou=Gu.model.getMaterial())===null||Ou===void 0?void 0:Ou.modelAlpha)!==null&&Fu!==void 0?Fu:0,perspToOrtho:(Vu=(Nu=Gu.model.getMaterial())===null||Nu===void 0?void 0:Nu.perspToOrtho)!==null&&Vu!==void 0?Vu:0}),Gu}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu=_u.parseArgs.call(this,Ru);return t$3.__assign(t$3.__assign({},Wu),{defaultLongitude:(Ou=Ru.defaultLongitude)!==null&&Ou!==void 0?Ou:Math.PI/4,defaultLatitude:(Fu=Ru.defaultLatitude)!==null&&Fu!==void 0?Fu:Math.PI/4,defaultDistance:(Nu=Ru.defaultDistance)!==null&&Nu!==void 0?Nu:100,maxLatitude:(Vu=Ru.maxLatitude)!==null&&Vu!==void 0?Vu:+Math.PI/2,minLatitude:(Gu=Ru.minLatitude)!==null&&Gu!==void 0?Gu:0,maxDistance:(Uu=Ru.maxDistance)!==null&&Uu!==void 0?Uu:100,minDistance:(Hu=Ru.minDistance)!==null&&Hu!==void 0?Hu:2})},$u.distanceFromModel=function(Ru,Ou,Fu){var Nu=Ru.bounding,Vu=Math.pow(Math.pow(Nu.max.x-Nu.min.x+1,2)+Math.pow(Nu.max.y-Nu.min.y+1,2)+Math.pow(Nu.max.z-Nu.min.z+1,2),.5),Gu=Vu/2/Math.tan(Math.PI*Ou/360);return Fu<1&&(Gu/=Fu),isNaN(Gu)?Vu:Gu},$u.initAnimationEndPose=function(Ru){var Ou,Fu,Nu=this.parseArgs(Ru),Vu=Ru.initial[0],Gu=Ru.initial[1];return{longitude:(Ou=Gu.longitude)!==null&&Ou!==void 0?Ou:Nu.defaultLongitude,latitude:ho$1((Fu=Gu.latitude)!==null&&Fu!==void 0?Fu:Nu.defaultLatitude,Nu.minLatitude,Nu.maxLatitude),fov:90,offset:Nu.work.observers[Vu].position.clone(),distance:$u.distanceFromModel(Nu.model,90,Nu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Ru,Ou,Fu,Nu,Vu){return this.work=Ru,this.updateCamera(Fu,Nu,Vu),!0},$u.prototype.updateModel=function(Ru){_u.prototype.updateModel.call(this,Ru);var Ou=Ru.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z},0).catch(Qe$1),this.model.enableTiles=!0},$u.prototype.updateTime=function(Ru,Ou){if(!this.destroyed){var Fu={},Nu={};this.locationMotion.ended||(this.locationMotion.update(Ru),Fu.modelAlpha=this.locationMotion.value.modelAlpha,Fu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Nu.distance=this.locationMotion.value.distance,Nu.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Ru),Nu.longitude=this.cameraMotion.value.longitude,Nu.latitude=this.cameraMotion.value.latitude,Nu.fov=this.cameraMotion.value.fov),ia$1(Fu)||this.model.setMaterial(Fu),ia$1(Nu)||this.setCamera(Nu)}},$u.prototype.setCamera=function(Ru){_u.prototype.setCamera.call(this,Ru);var Ou=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Fu=new r$3.Raycaster(this.camera.getWorldPosition(new r$3.Vector3),this.camera.getWorldDirection(new r$3.Vector3)),Nu=this.model.intersectRaycaster(Fu)[0];Nu&&Ou.copy(Nu.point)}var Vu=ta(this.work.observers,function(Uu){return Uu.position.distanceTo(Ou)}),Gu=this.work.observers.indexOf(Vu);Gu!==this.currentPanoIndex&&(this.emit("moveToPano",Gu,this.userAction),this.emit("panoWillArrive",Gu,na(this.camera.pose),this.userAction),this.currentPanoIndex=Gu,this.emit("panoArrived",Gu,na(this.camera.pose),this.userAction))},$u.prototype.getTargetPose=function(){var Ru=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Ou=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Ru.value.longitude,latitude:Ru.value.latitude,fov:Ru.value.fov,distance:Ou.value.distance,offset:new r$3.Vector3(Ou.value.x,Ou.value.y,Ou.value.z)}},$u.prototype.initAnimation=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu=this;if(!this.destroyed){this.pending=!1,this.userAction=Nu;var Hu={longitude:(Vu=Ou.longitude)!==null&&Vu!==void 0?Vu:this.defaultLongitude,latitude:ho$1((Gu=Ou.latitude)!==null&&Gu!==void 0?Gu:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$3.Vector3),distance:$u.distanceFromModel(this.model,90,this.camera.aspect)},Wu=ii$1(Hu,["longitude","latitude","fov"]),Qu={x:Hu.offset.x,y:Hu.offset.y,z:Hu.offset.z,distance:Hu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Ru,Hu,this.userAction),this.cameraMotion.set(Wu,Fu).catch(Qe$1),this.locationMotion.set(Qu,Fu).then(function(){Uu.emit("initAnimationEnded",Ru,Hu,Uu.userAction)},function(qu){var Ku=na(Uu.camera.pose);Uu.emit("initAnimationEnded",Ru,Ku,Uu.userAction)}).then(function(){Uu.model.enableTiles=!0})}},$u.prototype.getForwardPanoIndexOrNot=function(Ru){var Ou=this.work.observers.filter(function(Gu){return Gu.active}),Fu=this.model.intersectRaycaster(Ru)[0];if(!Fu)return null;var Nu=ta(Ou,function(Gu){return Gu.standingPosition.distanceTo(Fu.point)},!0),Vu=Nu[0];return Nu[1]<5?this.work.observers.indexOf(Vu):null},$u.prototype.coordinatesForOffset=function(Ru){var Ou=this.cameraMotion.value.fov,Fu=this.camera.aspect,Nu=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Ru.x/(Nu.x*this.scissor.width)*Ou/95*Fu,latitude:-2*Ru.y/(Nu.y*this.scissor.height)*Ou/95}},$u.prototype.onPanGesture=function(Ru){var Ou=this.panState,Fu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Ru.center.x,y:Ru.center.y},Ou!==void 0&&Ou.pointerLength===Fu){var Nu=Ru.pointers.map(function(Zu){return ii$1(Zu,["x","y"])});if(!this.emit("wantsGesture","pan",Nu,Ru.isFinal))if(Ru.pointerType==="mouse"&&Ru.srcEvent.buttons===2){var Vu={x:Ru.center.x-Ou.x,y:Ru.center.y-Ou.y},Gu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Uu=this.model.bounding,Hu=Uu.getCenter(new r$3.Vector3),Wu={x:(Uu.max.x-Uu.min.x)/90*this.cameraMotion.value.fov,y:(Uu.max.y-Uu.min.y)/90*this.cameraMotion.value.fov,z:(Uu.max.z-Uu.min.z)/90*this.cameraMotion.value.fov},Qu=(this.camera.position.y-Uu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),qu=this.renderer.getSize(new r$3.Vector2);Gu.add(Hl$1(2*Vu.x*Qu/qu.y,this.camera.matrix)),Gu.add(ql(2*Vu.y*Qu/qu.y,this.camera.up,this.camera.matrix)),Gu.x=ho$1(Gu.x,Hu.x-Wu.x,Hu.x+Wu.x),Gu.z=ho$1(Gu.z,Hu.z-Wu.z,Hu.z+Wu.z);var Ku={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Gu,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",Ku,Ru.isFinal))return;this.emit("gesture","pan",Nu,Ru.isFinal),this.emit("panGesture",Ku,Ru.isFinal),this.userAction=!0,this.locationMotion.set({x:Gu.x,y:Gu.y,z:Gu.z},0).catch(Qe$1)}else{Gu={x:Ru.center.x-Ou.x,y:Ru.center.y-Ou.y};var Yu=this.coordinatesForOffset(Gu),_c=Gs$1(this.cameraMotion.value.longitude+-1*Yu.longitude),Ju=ho$1(this.cameraMotion.value.latitude+-1*Yu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Ru.overallVelocityX)>.2&&Math.atan2(Math.abs(Ru.overallVelocityY),Math.abs(Ru.overallVelocityX))<Math.PI/6.923&&(Ju=this.cameraMotion.value.latitude),Ku={longitude:_c,latitude:Ju,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",Ku,Ru.isFinal))return;this.emit("gesture","pan",Nu,Ru.isFinal),this.emit("panGesture",Ku,Ru.isFinal),this.userAction=!0,this.interiaMovement=!1;var Xu={longitude:Ku.longitude,latitude:Ku.latitude,fov:Ku.fov};this.cameraMotion.set(Xu,0).catch(Qe$1),Ru.isFinal&&(this.emit("wantsInteriaPan",Ku)||(this.interiaMovement=!0,Ru.velocityX,Ru.velocityY))}}},$u.prototype.onPinchGesture=function(Ru){var Ou=this.pinchState||{},Fu=Ou.distance;Ou.offsetY;var Nu=!1;if(Ru.type!=="pinchstart"){if(Ru.type==="pinchend"&&(Nu=!0,delete this.pinchState),Fu!==void 0){this.pinchState={distance:Fu};var Vu=Ru.pointers.map(function(_h){return ii$1(_h,["x","y"])});if(this.emit("wantsGesture","pinch",Vu,Nu))return;var Gu=ho$1(Fu/Ru.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Ru.scale,this.camera.pose.fov,Nu))return;this.emit("gesture","pinch",Vu,Nu),this.emit("pinchGesture",Ru.scale,this.camera.pose.fov,Nu),this.userAction=!0,this.locationMotion.set({distance:Gu},0).catch(Qe$1)}var Uu=this.panState,Hu=Ru.pointers.length;if(Ru.isFinal?delete this.panState:this.panState={pointerLength:Hu,x:Ru.center.x,y:Ru.center.y},Uu!==void 0&&Uu.pointerLength===Hu){var Wu=Ru.pointers.map(function(_h){return ii$1(_h,["x","y"])});if(!this.emit("wantsGesture","pinch",Wu,Nu)){var Qu=Ru.pointers.map(function(_h){return ii$1(_h,["x","y"])});if(!this.emit("wantsGesture","pinch",Qu,Nu)){var qu={x:Ru.center.x-Uu.x,y:Ru.center.y-Uu.y},Ku=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Yu=this.model.bounding,_c=Yu.getCenter(new r$3.Vector3),Ju={x:(Yu.max.x-Yu.min.x)/90*this.cameraMotion.value.fov,y:(Yu.max.y-Yu.min.y)/90*this.cameraMotion.value.fov,z:(Yu.max.z-Yu.min.z)/90*this.cameraMotion.value.fov},Xu=(this.camera.position.y-Yu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Zu=this.renderer.getSize(new r$3.Vector2);Ku.add(Hl$1(2*qu.x*Xu/Zu.y,this.camera.matrix)),Ku.add(ql(2*qu.y*Xu/Zu.y,this.camera.up,this.camera.matrix)),Ku.x=ho$1(Ku.x,_c.x-Ju.x,_c.x+Ju.x),Ku.z=ho$1(Ku.z,_c.z-Ju.z,_c.z+Ju.z);var Xc={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ku,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Xc,Ru.isFinal)||(this.emit("gesture","pan",Qu,Ru.isFinal),this.emit("panGesture",Xc,Ru.isFinal),this.userAction=!0,this.locationMotion.set({x:Ku.x,y:Ku.y,z:Ku.z},0).catch(Qe$1))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},$u.prototype.onMouseWheel=function(Ru){var Ou=this,Fu=(Math.abs(Ru.deltaY)>Math.abs(Ru.deltaX)?Ru.deltaY:Ru.deltaX)/-60,Nu=[{x:Ru.clientX,y:Ru.clientY,delta:Fu}];if(!this.emit("wantsGesture","mouseWheel",Nu,!1)){var Vu=ho$1(this.locationMotion.value.distance-Fu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Fu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Nu,!1),this.emit("mouseWheel",Fu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Vu},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Ou.mouseWheelState,Ou.emit("wantsGesture","mouseWheel",Nu,!0)||Ou.emit("wantsMouseWheel",Fu,Ou.camera.pose.fov,!0)||(Ou.emit("gesture","mouseWheel",Nu,!0),Ou.emit("mouseWheel",0,Ou.camera.pose.fov,!0))},200)})}},$u.prototype.onTapGesture=function(Ru){var Ou=Ru.pointers.map(function(Uu){return ii$1(Uu,["x","y"])});if(!this.emit("wantsGesture","tap",Ou,!0)){var Fu=this.relativeClientPosition(Ru.center),Nu=new r$3.Raycaster;if(Nu.setFromCamera(Fu,this.camera),!this.emit("wantsTapGesture",Nu,Fu,!0)){this.emit("gesture","tap",Ou,!0),this.emit("tapGesture",Nu,Fu,!0),this.interiaMovement=!1;var Vu=this.getForwardPanoIndexOrNot(Nu);if(!oo(Vu)){this.emit("panoSelected",Vu);var Gu={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Vu,Gu,!0)}}}},$u.prototype.onPressGesture=function(Ru,Ou){var Fu,Nu,Vu=[Ru];if(this.emit("wantsGesture","press",Vu,Ou))return(Fu=this.pressState)===null||Fu===void 0||Fu.stop(),void delete this.pressState;var Gu=this.relativeClientPosition(Ru),Uu=new r$3.Raycaster;if(Uu.setFromCamera(Gu,this.camera),this.emit("wantsPressGesture",Uu,Gu,Ru.delta,Ou))return(Nu=this.pressState)===null||Nu===void 0||Nu.stop(),void delete this.pressState;this.emit("gesture","press",Vu,Ou),this.emit("pressGesture",Uu,Gu,Ru.delta,Ou)},$u}(fa$1),Kl={type:"move"},Ul$1=function(){function _u(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return _u.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$3.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},_u.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$3.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$3.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$3.Vector3),this._targetRay},_u.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$3.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$3.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$3.Vector3),this._grip},_u.prototype.dispatchEvent=function($u){return this._targetRay!==null&&this._targetRay.dispatchEvent($u),this._grip!==null&&this._grip.dispatchEvent($u),this._hand!==null&&this._hand.dispatchEvent($u),this},_u.prototype.disconnect=function($u){return this.dispatchEvent({type:"disconnected",data:$u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},_u.prototype.getAxes=function(){return this._axes},_u.prototype.update=function($u,Ru,Ou){var Fu=null,Nu=null,Vu=null,Gu=this._targetRay,Uu=this._grip,Hu=this._hand;if($u&&$u.gamepad&&$u.gamepad.axes&&(this._axes=[$u.gamepad.axes[2],$u.gamepad.axes[3]]),$u&&Ru.session.visibilityState!=="visible-blurred")if(Gu!==null&&(Fu=Ru.getPose($u.targetRaySpace,Ou))!==null&&(Gu.matrix.fromArray(Fu.transform.matrix),Gu.matrix.decompose(Gu.position,Gu.rotation,Gu.scale),Fu.linearVelocity?(Gu.hasLinearVelocity=!0,Gu.linearVelocity.copy(Fu.linearVelocity)):Gu.hasLinearVelocity=!1,Fu.angularVelocity?(Gu.hasAngularVelocity=!0,Gu.angularVelocity.copy(Fu.angularVelocity)):Gu.hasAngularVelocity=!1,this.dispatchEvent(Kl)),Hu&&$u.hand){Vu=!0;for(var Wu=0,Qu=$u.hand.values();Wu<Qu.length;Wu++){var qu=Qu[Wu],Ku=Ru.getJointPose(qu,Ou);if(Hu.joints[qu.jointName]===void 0){var Yu=new r$3.Group;Yu.matrixAutoUpdate=!1,Yu.visible=!1,Hu.joints[qu.jointName]=Yu,Hu.add(Yu)}var _c=Hu.joints[qu.jointName];Ku!==null&&(_c.matrix.fromArray(Ku.transform.matrix),_c.matrix.decompose(_c.position,_c.rotation,_c.scale),_c.jointRadius=Ku.radius),_c.visible=Ku!==null}var Ju=Hu.joints["index-finger-tip"],Xu=Hu.joints["thumb-tip"],Zu=Ju.position.distanceTo(Xu.position);Hu.inputState.pinching&&Zu>.025?(Hu.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:$u.handedness,target:this})):!Hu.inputState.pinching&&Zu<=.015&&(Hu.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:$u.handedness,target:this}))}else Uu!==null&&$u.gripSpace&&(Nu=Ru.getPose($u.gripSpace,Ou))!==null&&(Uu.matrix.fromArray(Nu.transform.matrix),Uu.matrix.decompose(Uu.position,Uu.rotation,Uu.scale),Nu.linearVelocity?(Uu.hasLinearVelocity=!0,Uu.linearVelocity.copy(Nu.linearVelocity)):Uu.hasLinearVelocity=!1,Nu.angularVelocity?(Uu.hasAngularVelocity=!0,Uu.angularVelocity.copy(Nu.angularVelocity)):Uu.hasAngularVelocity=!1);return Gu!==null&&(Gu.visible=Fu!==null),Uu!==null&&(Uu.visible=Nu!==null),Hu!==null&&(Hu.visible=Vu!==null),this},_u}(),jl$1=function(_u){function $u(Ru,Ou,Fu){var Nu,Vu,Gu,Uu=this;return(Uu=_u.call(this)||this).isPanorama=(Nu=Fu==null?void 0:Fu.isPanorama)===null||Nu===void 0||Nu,Uu.machineType=(Vu=Fu==null?void 0:Fu.machineType)!==null&&Vu!==void 0?Vu:"Pico",Uu.renderer=Ru,Uu.gl=Ou,Uu.enabled=!1,Uu.session=null,Uu.referenceSpaceType=(Gu=Fu==null?void 0:Fu.referenceSpaceType)!==null&&Gu!==void 0?Gu:"local-floor",Uu.referenceSpace=null,Uu.controllers=[new Ul$1,new Ul$1],Uu.inputSourcesMap=new Map,Uu.cameraVR=new r$3.ArrayCamera,Uu.cameraL=new r$3.PerspectiveCamera,Uu.cameraR=new r$3.PerspectiveCamera,Uu.cameraL.viewport=new r$3.Vector4,Uu.cameraR.viewport=new r$3.Vector4,Uu.cameraL.layers.enable(1),Uu.cameraR.layers.enable(2),Uu.cameraVR.layers.enable(1),Uu.cameraVR.layers.enable(2),Uu.isPresenting=!1,Uu.currentDepthNear=null,Uu.currentDepthFar=null,Uu.cameraLPos=new r$3.Vector3,Uu.cameraRPos=new r$3.Vector3,Uu}return t$3.__extends($u,_u),$u.prototype.getController=function(Ru){var Ou=this.controllers[Ru];return Ou||console.warn("no controller find"),Ou.getTargetRaySpace()},$u.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},$u.prototype.updateCamera=function(Ru,Ou){Ou===null?Ru.matrixWorld.copy(Ru.matrix):Ru.matrixWorld.multiplyMatrices(Ou.matrixWorld,Ru.matrix),Ru.matrixWorldInverse.getInverse(Ru.matrixWorld)},$u.prototype.setProjectionFromUnion=function(Ru,Ou,Fu){this.cameraLPos.setFromMatrixPosition(Ou.matrixWorld),this.cameraRPos.setFromMatrixPosition(Fu.matrixWorld);var Nu=this.cameraLPos.distanceTo(this.cameraRPos),Vu=Ou.projectionMatrix.elements,Gu=Fu.projectionMatrix.elements,Uu=Vu[14]/(Vu[10]-1),Hu=Vu[14]/(Vu[10]+1),Wu=(Vu[9]+1)/Vu[5],Qu=(Vu[9]-1)/Vu[5],qu=(Vu[8]-1)/Vu[0],Ku=(Gu[8]+1)/Gu[0],Yu=Uu*qu,_c=Uu*Ku,Ju=Nu/(-qu+Ku),Xu=Ju*-qu;Ou.matrixWorld.decompose(Ru.position,Ru.quaternion,Ru.scale),Ru.translateX(Xu),Ru.translateZ(Ju),Ru.matrixWorld.compose(Ru.position,Ru.quaternion,Ru.scale),Ru.matrixWorldInverse.getInverse(Ru.matrixWorld);var Zu=Uu+Ju,Xc=Hu+Ju,_h=Yu-Xu,ep=_c+(Nu-Xu),np=Wu*Hu/Xc*Zu,ap=Qu*Hu/Xc*Zu;Ru.projectionMatrix.makePerspective(_h,ep,np,ap,Zu,Xc)},$u.prototype.getCamera=function(Ru){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Ru.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Ru.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Ou=Ru.parent,Fu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Ou);for(var Nu=0;Nu<Fu.length;Nu++)this.updateCamera(Fu[Nu],Ou);Ru.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Vu=Ru.children,Gu=(Nu=0,Vu.length);Nu<Gu;Nu++)Vu[Nu].updateMatrixWorld(!0);return Fu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},$u.prototype.updateInputSources=function(Ru){if(this.session){for(var Ou=this.session.inputSources,Fu=0;Fu<this.controllers.length;Fu++)this.inputSourcesMap.set(Ou[Fu],this.controllers[Fu]);for(Fu=0;Fu<Ru.removed.length;Fu++){var Nu=Ru.removed[Fu];(Vu=this.inputSourcesMap.get(Nu))&&(Vu.dispatchEvent({type:"disconnected",data:Nu}),this.inputSourcesMap.delete(Nu))}for(Fu=0;Fu<Ru.added.length;Fu++){var Vu;Nu=Ru.added[Fu],(Vu=this.inputSourcesMap.get(Nu))&&Vu.dispatchEvent({type:"connected",data:Nu})}}else console.warn("session is lose!")},$u.prototype.onSessionEvent=function(Ru){var Ou=this.inputSourcesMap.get(Ru.inputSource);Ou&&Ou.dispatchEvent({type:Ru.type})},$u.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Ru,Ou){Ru.disconnect(Ou)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at.shared.setContext(null),this.emit("webXRSessionEnd")},$u.prototype.onRequestReferenceSpace=function(Ru){this.referenceSpace=Ru,this.isPresenting=!0,this.emit("webXRSessionStart")},$u.prototype.setSession=function(Ru){var Ou=this;if(this.session=Ru,this.session){this.session.addEventListener("select",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("selectstart",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("selectend",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("squeeze",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("squeezestart",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("squeezeend",function(Nu){Ou.onSessionEvent(Nu)}),this.session.addEventListener("end",function(Nu){Ou.onSessionEnd()});var Fu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Nu={antialias:Fu==null?void 0:Fu.antialias,alpha:Fu==null?void 0:Fu.alpha,depth:Fu==null?void 0:Fu.depth,stencil:Fu==null?void 0:Fu.stencil,framebufferScaleFactor:1};if(Ou.session){switch(Ou.machineType){case"Pico":Ou.session.updateRenderState({baseLayer:new XRWebGLLayer(Ou.session,Ou.gl,Nu)});break;case"Oculus":Ou.session.updateRenderState({layers:[new XRWebGLLayer(Ou.session,Ou.gl,Nu)]});break;default:Ou.machineType}Ou.session.requestReferenceSpace(Ou.referenceSpaceType).then(function(Vu){Ou.onRequestReferenceSpace(Vu)}),Ou.session.addEventListener("inputsourceschange",function(Vu){Ou.updateInputSources(Vu)})}else console.error("session is lose while set session!")})}},$u}(Fe),Gl$1=["webXRSessionStart","webXRSessionEnd"];function Wl$1(_u,$u){if(!$u)return _u;var Ru=_u.match(/\d+_[a-z].png/);return _u.substring(0,Ru.index)+$u+"/"+_u.substring(Ru.index)}var Xl$1=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Yl$1=new r$3.Vector3(-1,1,1),Zl=function(_u){function $u(Ru){var Ou=_u.call(this,Ru)||this;Ou.xrManager=new jl$1(Ou.renderer,Ou.renderer.getContext()),Ou.xrControllerRay=new r$3.Raycaster,Ou.boundingMesh.visible=!0,Ou.panoResources={},Ou.panoResources[Ou.locationMotion.keyframes[0].key=Ou.locationMotion.keyframes[1].key=Kr()]={panoIndex:Ou.currentPanoIndex,workCode:Ou.work.workCode,leftPanoPicture:null,position:Ou.camera.pose.offset.clone(),effect:"fade"};var Fu=at.shared.getContext();if(!Fu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Ou;Fu.addEventListener("select",function(Hu){Ou.emit("webXRSelected","Select"),Ou.checkSelectedPano()}),Fu.addEventListener("squeeze",function(Hu){Ou.emit("webXRSelected","Squeeze")}),Ou.xrManager.setSession(Fu);for(var Nu=function(Hu){Vu.xrManager.on(Hu,function(){for(var Wu=[],Qu=0;Qu<arguments.length;Qu++)Wu[Qu]=arguments[Qu];Ou.emit.apply(Ou,t$3.__spreadArray([Hu],Wu,!1))})},Vu=this,Gu=0,Uu=Gl$1;Gu<Uu.length;Gu++)Nu(Uu[Gu]);return Ou}return t$3.__extends($u,_u),$u.parseArgs=function(Ru){var Ou=t$3.__assign(t$3.__assign({},Ru),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Ou)},$u.initAnimationEndPose=function(Ru){var Ou=this.parseArgs(Ru);return _u.initAnimationEndPose.call(this,Ou)},$u.prototype.moveToPano=function(Ru,Ou,Fu){var Nu,Vu,Gu,Uu=this,Hu=this.work.observers[Ru],Wu=t$3.__assign({key:"pano.".concat(Ru),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality"])),Qu=(Nu=this.imageOptions.transform)!==null&&Nu!==void 0?Nu:ct$1,qu={right:Wl$1(Qu(Hu.images.right,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".right")}))),left:Wl$1(Qu(Hu.images.left,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".left")}))),up:Wl$1(Qu(Hu.images.up,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".up")}))),down:Wl$1(Qu(Hu.images.down,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".down")}))),front:Wl$1(Qu(Hu.images.front,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".front")}))),back:Wl$1(Qu(Hu.images.back,t$3.__assign(t$3.__assign({},Wu),{key:"".concat(Wu.key,".back")})))},Ku={key:"pano_luminance.".concat(Ru),basisLoaderInitialized:Ei$1.isInitialized(),size:Wu.size?Wu.size/2:1024},Yu=this.enableIOSEDR&&Hu.images.luminance?{right:Qu(Hu.images.luminance.right,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".right")})),left:Qu(Hu.images.luminance.left,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".left")})),up:Qu(Hu.images.luminance.up,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".up")})),down:Qu(Hu.images.luminance.down,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".down")})),front:Qu(Hu.images.luminance.front,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".front")})),back:Qu(Hu.images.luminance.back,t$3.__assign(t$3.__assign({},Ku),{key:"".concat(Ku.key,".back")}))}:null,_c="pano:"+va(qu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===_c)return;var Ju=this.pendingTextureTask.panoIndex;(Vu=this.panoMeshes[Ju])===null||Vu===void 0||Vu.setProgress(0),this.emit("textureAbort",Ju,Hu),this.pendingTextureTask.onError(new Error("texture aborted"))}var Xu,Zu=this.model.getMaterial()||{},Xc=Zu.pano0,_h=Zu.pano1;if((Xc==null?void 0:Xc.map.name)===_c?Xu=Xc:(_h==null?void 0:_h.map.name)===_c&&(Xu=_h),Xu){var ep={panoIndex:Ru,workCode:this.work.workCode,effect:(Gu=Ou.effect)!==null&&Gu!==void 0?Gu:"fade",leftPanoPicture:{map:Xu.map,luminanceMap:Xu.luminanceMap,matrix:new r$3.Matrix4().compose(Hu.position,Hu.quaternion,Yl$1)},position:Hu.position.clone()};this.doMoveToPano(Ru,ep,Ou,Fu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Ru,hash:_c,onLoad:function(np,ap){var lp,up;if(Uu.pending=!1,Uu.destroyed)np.body.dispose();else{np.body.name=_c;var _f={panoIndex:Ru,workCode:Uu.work.workCode,effect:(lp=Ou.effect)!==null&&lp!==void 0?lp:"fade",leftPanoPicture:{map:np.body,luminanceMap:(up=ap==null?void 0:ap.body)!==null&&up!==void 0?up:null,matrix:new r$3.Matrix4().compose(Hu.position,Hu.quaternion,Yl$1)},position:Hu.position.clone()};Uu.doMoveToPano(Ru,_f,Ou,Fu)}},onError:function(np){Uu.pending=!1,Ou.moveCancelCallback&&Ou.moveCancelCallback(),Uu.emit("panoLoadError",np,Ru),Uu.emit("moveToPanoCanceled",Ru)}},Promise.all([this.textureLoader.loadCube(qu,{format:r$3.RGBFormat},void 0,void 0,function(np){var ap,lp;((ap=Uu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===_c&&((lp=Uu.panoMeshes[Ru])===null||lp===void 0||lp.setProgress(np)),Uu.emit("textureLoading",np,Ru,Hu)}),Yu?this.textureLoader.loadCube(Yu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(np){var ap,lp,up=np[0],_f=np[1];((ap=Uu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===_c?(Uu.pendingTextureTask.onLoad(up,_f),(lp=Uu.panoMeshes[Ru])===null||lp===void 0||lp.setProgress(0),delete Uu.pendingTextureTask,Uu.emit("textureLoaded",Ru,Hu,up.meta)):(up.body.dispose(),_f==null||_f.body.dispose())}).catch(function(np){var ap,lp;((ap=Uu.pendingTextureTask)===null||ap===void 0?void 0:ap.hash)===_c&&(Uu.pendingTextureTask.onError(np),(lp=Uu.panoMeshes[Ru])===null||lp===void 0||lp.setProgress(0),delete Uu.pendingTextureTask,Uu.emit("textureError",np,Ru,Hu),Uu.emit("error",np))}),this.emit("textureStartLoad",Ru,Hu)},$u.prototype.doMoveToPano=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu=this;Fu===void 0&&(Fu={}),this.userAction=Nu;var Wu=_e$1(),Qu=Kr();this.panoResources[Qu]=Ou;var qu,Ku,Yu;if(this.locationMotion.ended){var _c=this.locationMotion.getKeyFrameSegment(Wu);_c[0];var Ju=_c[1],Xu=this.locationMotion.value,Zu=this.panoResourceFromLocationMotionKeyframe(Ju).position,Xc=Ou.position;qu=Math.max(Zu.distanceTo(Xc),1),Ku=[{key:Ju.key,progress:0,value:t$3.__assign(t$3.__assign({},Xu),{count:0})},{key:Qu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Yu=0}else{var _h=this.locationMotion.getKeyFrameSegment(Wu),ep=_h[0],np=(Ju=_h[1],Xu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(ep).position),ap=(Zu=this.panoResourceFromLocationMotionKeyframe(Ju).position,Xc=Ou.position,Ju.value.count-Xu.count),lp=Math.max(np.distanceTo(Zu),1)*ap;qu=lp+Math.max(Zu.distanceTo(Xc),1),Ku=[{key:ep.key,progress:0,value:t$3.__assign({},Xu)},{key:Ju.key,progress:lp/qu,value:Ju.value},{key:Qu,progress:1,value:{count:Ju.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var up=this.locationMotionKeyframesLength(this.locationMotion.keyframes),_f=this.locationMotionKeyframesLength(Ku);Yu=this.locationMotion.getProgressVelocity(Wu)*up/_f}var tp=this.calculateMovingDuration(Fu.duration,qu),ip={longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov},rp={longitude:(Vu=ip.longitude)!==null&&Vu!==void 0?Vu:this.camera.pose.longitude,latitude:(Gu=ip.latitude)!==null&&Gu!==void 0?Gu:this.camera.pose.latitude,fov:(Uu=ip.fov)!==null&&Uu!==void 0?Uu:this.camera.pose.fov,offset:Ou.position.clone(),distance:0};Fu.moveStartCallback&&Fu.moveStartCallback(Ru,rp),this.emit("panoWillArrive",Ru,rp,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(ip,tp).catch(Qe$1),this.locationMotion.setKeyframes(Ku,tp,Yu).then(function(){var op,sp,cp,hp={longitude:Hu.camera.pose.longitude,latitude:Hu.camera.pose.latitude,fov:Hu.camera.pose.fov,offset:Hu.camera.pose.offset.clone(),distance:0};Fu.moveEndCallback&&Fu.moveEndCallback(Ru,hp),Hu.emit("panoArrived",Ru,hp,Nu);var dp=Hu.work.observers[Hu.currentPanoIndex];if(dp&&dp.video&&Hu.videoTexture&&Hu.videoTexture.image instanceof HTMLVideoElement){var xp=Xl$1.clone().multiply((cp=(sp=(op=Hu.model.getMaterial())===null||op===void 0?void 0:op.pano1)===null||sp===void 0?void 0:sp.matrix)!==null&&cp!==void 0?cp:new r$3.Matrix4).multiply(dp.video.matrix),bp={map:Hu.videoTexture,size:dp.video.size,matrix:xp,alpha:1},Rp=Kr(),Tp=Hu.videoTexture.image;Tp.setAttribute("uuid",Rp),xa().then(function(Up){Up&&dp.video&&Tp.getAttribute("uuid")===Rp&&(Tp.oncanplay=function(){Tp.oncanplay=Qe$1,Tp.play()},Tp.ontimeupdate=function(){Tp.currentTime>.5&&(Tp.ontimeupdate=Qe$1,Hu.panoVideo.setMaterial(bp))},Tp.src=dp.video.source)}).catch(function(){Tp.removeAttribute("uuid")})}},function(){Fu.moveCancelCallback&&Fu.moveCancelCallback(),Hu.emit("moveToPanoCanceled",Ru)})},$u.prototype.checkSelectedPano=function(){var Ru=this,Ou=this.xrControllerRay;this.interiaMovement=!1;var Fu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Nu=null,Vu=this.work.observers[this.currentPanoIndex];if(!Vu)return Nu;var Gu=Vu.accessibleNodes.filter(function(op){if(op===Ru.currentPanoIndex)return!1;var sp=Ru.work.observers[op];return!(sp.position.distanceTo(Ru.camera.position)>Ru.maxAccessibleDistance)&&(sp.loadable||sp.active)}),Uu=this.model.intersectRaycaster(Ou)[0];if(Uu){var Hu=ta(Gu,function(op){var sp=Ru.work.observers[op].standingPosition.clone();return sp.clone().sub(Ru.camera.position).setY(0).angleTo(Fu)>Math.PI/2?1/0:sp.distanceTo(Uu.point)},!0),Wu=Hu[0];Hu[1]<this.panoTapTriggerRadius&&(Nu=Wu)}oo(Nu)&&(Nu=this.getForwardPanoIndexOrNot(Ou));for(var Qu=0,qu=this.locationMotion.keyframes;Qu<qu.length;Qu++){var Ku=qu[Qu],Yu=this.panoResourceFromLocationMotionKeyframe(Ku);if(!(Ku.progress<this.locationMotion.progress)&&Yu.panoIndex===Nu){Nu=null;break}}if(this.emit("panoSelected",Nu),oo(Nu))return this.locationMotion.ended===!0&&this.cameraBounce(),Nu;var _c=this.work.observers[Nu];if(!_c.active)return this.panoMeshes[Nu]&&(this.panoMeshes[Nu].setDisabled(!1),this.panoMeshes[Nu].setLoading(!0)),Nu;for(var Ju={effect:"fade"},Xu=Math.PI/6,Zu=Math.PI/12,Xc=new r$3.Vector3(0,1,0),_h=_c.position.clone().setY(0).sub(Vu.position.clone().setY(0)).normalize(),ep=_h.clone().applyAxisAngle(Xc,Xu),np=_h.clone().applyAxisAngle(Xc,-Xu),ap=[],lp=[],up=[],_f=0,tp=_c.accessibleNodes;_f<tp.length;_f++)if((Wu=tp[_f])!==this.currentPanoIndex&&Wu!==Nu){var ip=this.work.observers[Wu].position.clone().sub(_c.position).setY(0);_h.angleTo(ip)<Xu?up.push(ip):ep.angleTo(ip)<Xu?ap.push(ip):np.angleTo(ip)<Xu&&lp.push(ip)}var rp=(up.length>0?up:t$3.__spreadArray(t$3.__spreadArray([],ap,!0),lp,!0)).slice().sort(function(op,sp){return op.angleTo(_h)-sp.angleTo(_h)})[0];return rp&&rp.angleTo(Fu)>Zu&&(Ju.longitude=Math.atan2(-rp.x,-rp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Ju.latitude=ho$1(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Ju.fov=this.defaultFov),this.emit("wantsMoveToPano",Nu,Ju,!0),Nu},$u.prototype.destroy=function(){_u.prototype.destroy.call(this)},$u.prototype.isReady=function(){return!1},$u.prototype.updateTime=function(Ru,Ou){for(var Fu,Nu,Vu,Gu=[],Uu=2;Uu<arguments.length;Uu++)Gu[Uu-2]=arguments[Uu];var Hu={},Wu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Ru);var Qu=this.locationMotion.getKeyFrameSegment(Ru),qu=Qu[0],Ku=Qu[1],Yu=this.panoResourceFromLocationMotionKeyframe(qu),_c=this.panoResourceFromLocationMotionKeyframe(Ku),Ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Xu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Zu=new r$3.Vector3().copy(Yu.position),Xc=new r$3.Vector3().copy(_c.position),_h=this.locationMotion.value.count-Ku.value.count+1;Hu.modelAlpha=this.locationMotion.value.modelAlpha,Hu.perspToOrtho=ho$1(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Hu.useBlackTransition=_c.effect==="instant",_c.leftPanoPicture&&(_h<1?Yu.leftPanoPicture&&(Hu.pano0=Yu.leftPanoPicture):Hu.pano0=_c.leftPanoPicture,Hu.pano1=_c.leftPanoPicture),_c.effect==="fade"&&(Hu.pano0&&Yu.leftPanoPicture&&(Hu.pano0={map:Hu.pano0.map,luminanceMap:Hu.pano0.luminanceMap,matrix:Yu.leftPanoPicture.matrix.clone().setPosition(_c.position)}),Zu.copy(Xc)),Hu.progress=_h,Wu.distance=this.locationMotion.value.distance,Wu.offset=new r$3.Vector3(Zu.x+(Xc.x-Zu.x)*_h,Zu.y+(Xc.y-Zu.y)*_h,Zu.z+(Xc.z-Zu.z)*_h);for(var ep=[],np=[],ap=0,lp=this.locationMotion.keyframes;ap<lp.length;ap++){var up=lp[ap],_f=up.key,tp=up.progress;_f!==void 0&&(ep.push(_f),tp>=this.locationMotion.progress&&np.push(_f))}for(var ip=0,rp=Object.keys(this.panoResources);ip<rp.length;ip++){var op=rp[ip];if(!(np.indexOf(op)>=0)){var sp=this.panoResources[op];if(sp.leftPanoPicture){var cp=sp.leftPanoPicture.map;if(cp){if(cp===((Fu=Hu.pano0)===null||Fu===void 0?void 0:Fu.map)||cp===((Nu=Hu.pano1)===null||Nu===void 0?void 0:Nu.map))continue;cp.dispose(),(Vu=sp.leftPanoPicture.luminanceMap)===null||Vu===void 0||Vu.dispose(),sp.leftPanoPicture=null}}ep.indexOf(op)>=0||delete this.panoResources[op]}}Yu.workCode===_c.workCode?this.currentPanoIndex=_h<.5?Yu.panoIndex:_c.panoIndex:this.currentPanoIndex=_c.panoIndex,this.emit("movingToPano",Xu.panoIndex,Ju.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Ru),Wu.longitude=this.cameraMotion.value.longitude,Wu.latitude=this.cameraMotion.value.latitude,Wu.fov=this.cameraMotion.value.fov),ia$1(Hu)===!1&&(this.model.setMaterial(Hu),this.boundingMesh.setMaterial(Hu)),ia$1(Wu)===!1&&this.setCamera(Wu),Gu[0];var hp=Gu[1];if(hp)if(this.xrManager.session){var dp=this.xrManager.referenceSpace;if(dp){var xp=this.xrManager.cameraVR,bp=this.xrManager.cameraL,Rp=this.xrManager.cameraR,Tp=[bp,Rp],Up=hp.getViewerPose(dp),Ip=new r$3.Vector3(0,0,0);if(Up){var Vp=void 0;switch(this.xrManager.machineType){case"Pico":Vp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var Lp=this.xrManager.session.renderState.layers;Lp&&(Vp=Lp[0]);break;default:this.xrManager.machineType}var mp=Up.views;if(!Vp)return void console.error("no layer found");this.renderer.setFramebuffer(Vp.framebuffer);var pp=!1;mp.length!==xp.cameras.length&&(xp.cameras.length=0,pp=!0);for(var wp=0;wp<mp.length;wp++){var Ap=mp[wp],Sp=Vp.getViewport(Ap),Cp=Tp[wp];Cp.matrix.fromArray(Ap.transform.matrix);var $p=new r$3.Vector3,Fp=new r$3.Quaternion,jp=new r$3.Vector3;Cp.matrix.decompose($p,Fp,jp);var kp=new r$3.Vector3,fp=new r$3.Quaternion,yp=new r$3.Vector3;this.camera.matrix.decompose(kp,fp,yp),Ip.copy(kp),Cp.matrix.compose(kp,Fp,jp),Cp.projectionMatrix.fromArray(Ap.projectionMatrix),Cp.viewport.set(Sp.x,Sp.y,Sp.width,Sp.height),wp===0&&xp.matrix.copy(Cp.matrix),pp===!0&&xp.cameras.push(Cp)}}var Gp=this.xrManager.session.inputSources;for(wp=0;wp<this.xrManager.controllers.length;wp++){var Np=this.xrManager.controllers[wp],Xp=Gp[wp];Np.update(Xp,hp,dp)}var Qp=this.xrManager.getController(0),Zp=Qp.position.add(Ip);this.xrControllerRay.set(Zp,new r$3.Vector3(0,0,-1).applyEuler(Qp.rotation));var im=this.model.intersectRaycaster(this.xrControllerRay);if(im.length>=1&&im[0].face){var nm=im[0].face.normal,cm=nm.clone().multiplyScalar(.05),em=im[0].point.clone().add(cm);this.intersectMesh.position.copy(em);var om=em.clone().add(cm);if(this.intersectMesh.lookAt(om),Math.abs(nm.y)>.99){var tm=this.camera.position.clone().sub(em);this.intersectMesh.rotation.z=-Math.atan2(tm.z,tm.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",im[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var sm=0;sm<this.work.observers.length;sm++)(dm=this.panoMeshes[sm])&&(dm.visible=!1);else{var Bp=this.work.observers[this.currentPanoIndex];if(Bp){var rm=Bp.visibleNodes.concat(this.currentPanoIndex),lm=this.getForwardPanoIndexOrNot();for(sm=0;sm<this.work.observers.length;sm++){var dm,hm=this.work.observers[sm];if(dm=this.panoMeshes[sm])if(hm.loadable||hm.active)if(rm.indexOf(sm)!==-1){dm.visible=!0;var ym=dm.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);dm.setCurrent(lm===sm),dm.setOpacity(ym<.01?0:ho$1(1.4/ym,.5,.7)),dm.updateTime&&dm.updateTime(Ru,Ou)}else dm.visible=!1,dm.setOpacity(0);else dm.visible=!1,dm.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},$u.prototype.render=function(){var Ru=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Ru)},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Ru){return this.panoResources[Ru.key]},$u.prototype.prepareForMoveToPano=function(Ru){var Ou=this,Fu={useXRBlackTransition:!0},Nu=_e$1(),Vu=0;return new Promise(function(Gu,Uu){var Hu=setInterval(function(){if((Vu=Math.min(1,(_e$1()-Nu)/1e3))>=1)return Fu.useXRBlackTransition=!1,Fu.progress=0,Ou.model.setMaterial(Fu),clearInterval(Hu),void Gu(!0);Fu.progress=Vu,Ou.model.setMaterial(Fu)},50)})},$u}(Xa$1),Jl=["Panorama","DepthPanorama","Model"],$l={Floorplan:Aa,Topview:ga$1,Panorama:Xa$1,VRPanorama:kl$1,Model:Dl$1,DepthPanorama:_l$1,Mapview:zl$1,XRPanorama:Zl};function eu$1(_u){for(var $u=0,Ru=Jl;$u<Ru.length;$u++){var Ou=Ru[$u];if(typeof _u=="string"){if(Ou===_u)return!0}else if(_u instanceof fa$1&&_u instanceof $l[Ou])return!0}return!1}var tu$1=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu$1(_u){for(var $u,Ru,Ou={},Fu=0,Nu=_u.split(/(\;|\,)/);Fu<Nu.length;Fu++){var Vu=Nu[Fu].split("="),Gu=($u=Vu[0])===null||$u===void 0?void 0:$u.trim(),Uu=(Ru=Vu[1])===null||Ru===void 0?void 0:Ru.trim();Gu&&Uu&&(Ou[Gu]=Uu)}return Ou}function nu$1(){for(var _u,$u=document.getElementsByTagName("meta"),Ru=0;Ru<$u.length;Ru++){var Ou=$u[Ru];if(Ou.getAttribute("name")==="viewport"){var Fu=iu$1((_u=Ou.getAttribute("content"))!==null&&_u!==void 0?_u:""),Nu=Number(Fu["initial-scale"]);if(!isNaN(Nu))return Nu}}return 1}var ru$1=[351,63],ou$1=[20,20],su$1=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au$1=new Float32Array([0,0,1,0,0,1,1,1]),lu$1=new Uint8Array([0,1,2,1,3,2]),uu$1=new r$3.BufferGeometry;uu$1.setAttribute("position",new r$3.BufferAttribute(su$1,3)),uu$1.setAttribute("uv",new r$3.BufferAttribute(au$1,2)),uu$1.setIndex(new r$3.BufferAttribute(lu$1,1));var hu$1=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu$1=new r$3.Mesh(uu$1,hu$1),du$1=new r$3.Scene;du$1.add(cu$1);var pu$1=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu$1.position.set(0,0,.5),pu$1.lookAt(0,0,0);var fu$1=new r$3.Vector4,Au$1=new r$3.Vector4;function gu$1(_u){if(hu$1.map){var $u=_u.getViewport(fu$1),Ru=_u.getScissor(Au$1),Ou=_u.getScissorTest(),Fu=_u.autoClear;_u.setViewport(Ru.x+ou$1[0]/3,Ru.y+ou$1[1]/3,ru$1[0]/3,ru$1[1]/3),_u.setScissor(Ru.x+ou$1[0]/3,Ru.y+ou$1[1]/3,ru$1[0]/3,ru$1[1]/3),_u.setScissorTest(!0),_u.autoClear=!1,_u.render(du$1,pu$1),_u.setViewport($u),_u.setScissor(Ru),_u.setScissorTest(Ou),_u.autoClear=Fu}else{var Nu=new r$3.Texture,Vu=new Image;Vu.onload=function(){Nu.image=Vu,Nu.wrapS=r$3.ClampToEdgeWrapping,Nu.wrapT=r$3.ClampToEdgeWrapping,Nu.minFilter=r$3.LinearFilter,Nu.needsUpdate=!0,hu$1.needsUpdate=!0,Vu.onload=function(){}},Vu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu$1.map=Nu}}var mu$1=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),vu$1=function(_u){return _u.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu$1=new r$3.Vector2,bu$1=new r$3.Frustum,xu$1=new r$3.Matrix4,wu$1=new WeakMap,Eu$1=new WeakMap,Mu$1=function(_u){function $u(Ru){Ru===void 0&&(Ru={});var Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu=this;if((Yu=_u.call(this)||this).ident=Kr(),Iu$1.instances[Yu.ident]=Yu,Yu.renderSwitch01=0,Yu.panoIndex=0,Yu.needsRender=!1,Yu.onlyRenderIfNeeds=(Ou=Ru.onlyRenderIfNeeds)===null||Ou===void 0||Ou,Yu.imageOptions=t$3.__assign({},(Fu=Ru.imageOptions)!==null&&Fu!==void 0?Fu:{}),Yu.textureOptions=t$3.__assign({},(Nu=Ru.textureOptions)!==null&&Nu!==void 0?Nu:{}),Yu.poweredByRealsee=(Vu=Ru.poweredByRealsee)===null||Vu===void 0||Vu,Yu.extraElements=[],Yu.controllerInits={Panorama:Object.assign({},Ru.panorama),Model:Object.assign({},Ru.model),Floorplan:Object.assign({},Ru.floorplan),Topview:Object.assign({},Ru.topview),Mapview:Object.assign({},Ru.mapview),DepthPanorama:Object.assign({},Ru.depthPanorama),VRPanorama:Object.assign({},Ru.vrPanorama),XRPanorama:Object.assign({},Ru.xrPanorama)},Yu.fps={testCount:0,testTime:_e$1()},Yu.modeChangeDuration=(Gu=Ru.modeChangeDuration)!==null&&Gu!==void 0?Gu:800,Yu.panoramaLikeSavedPose={},typeof window!="undefined")if(Ru.renderer)Ru.renderer instanceof It$1&&Yu.throwError(new Error("cannot render a internal renderer")),Yu.renderer=Ru.renderer;else try{Yu.renderer=new It$1({preserveDrawingBuffer:Ru.preserveDrawingBuffer,backgroundColor:Ru.backgroundColor,backgroundAlpha:Ru.backgroundAlpha,antialias:Ru.antialias,webgl2:Ru==null?void 0:Ru.webgl2});var _c=nu$1();Yu.renderer.setPixelRatio(_c===1?window.devicePixelRatio:1),Yu.renderer.setSize(512,512)}catch(up){up instanceof Error&&Yu.throwError(up)}Yu.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:(Hu=(Uu=Yu.renderer)===null||Uu===void 0?void 0:Uu.outputEncoding)!==null&&Hu!==void 0?Hu:r$3.sRGBEncoding}),Yu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Ru.scissor),Yu.camera=new Lt(80),Yu.scene=new St,Yu.lastLoadWorkTask=Promise.resolve(),Yu.requestProxy=(Wu=Ru.requestProxy)!==null&&Wu!==void 0?Wu:vu$1,Yu.networkSubscribe=new tt,Yu.networkSubscribe.on("network",function(up,_f,tp,ip){var rp;Yu.emit("network",up,_f,tp,ip),(rp=Yu.analysis)===null||rp===void 0||rp.network(Yu.work,up,_f,tp,ip)}),Yu.model=new uo$1({allowHosts:[],requestProxy:Yu.requestProxy,networkSubscribe:Yu.networkSubscribe});var Ju=Ks(mu$1);Ju.name="model_empty",Yu.model.add(Ju),Yu.model.visible=!1,Yu.readyCallbacks=[],Yu.modelPending=!1,Yu.syncingState=!1,Yu.scene.add(Yu.model),Yu.helperGroup=new r$3.Group,Yu.helperGroup.name="helper",Yu.scene.add(Yu.helperGroup),Yu.videoTexture=new r$3.VideoTexture(Ru.videoInstance||function(){var up=document.createElement("video");up.loop=!0,up.autoplay=!0,up.playsInline=!0,up.muted=!0,up.crossOrigin="";var _f=function(){document.removeEventListener("touchstart",_f,!1),document.removeEventListener("mousedown",_f,!1),up.muted=!1};return document.addEventListener("touchstart",_f,!1),document.addEventListener("mousedown",_f,!1),up}()),function(up){(_f=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),up.add(_f);var _f=new r$3.DirectionalLight(16777215,.3);up.add(_f),_f=new r$3.AmbientLight(16777215,.3),up.add(_f)}(Yu.scene),Yu.state={mode:(Qu=Yu.currentMode)!==null&&Qu!==void 0?Qu:"Panorama",panoIndex:(qu=Yu.panoIndex)!==null&&qu!==void 0?qu:0,longitude:Yu.camera.pose.longitude,latitude:Yu.camera.pose.latitude,fov:Yu.camera.pose.fov,offset:Yu.camera.pose.offset.clone(),distance:Yu.camera.pose.distance},Yu.stateSynced=!1,Yu._enableIOSEDR=!1,Yu.destroyed=!1,Yu.paused=!0,typeof window!="undefined"&&(Ru.play!==!1&&Yu.play(),((Ku=Ru.initialBasisLoader)!==null&&Ku!==void 0&&Ku)!==!1&&(typeof Ru.initialBasisLoader=="string"?Yu.initBasisLoader(Ru.initialBasisLoader):Yu.initBasisLoader()),Yu.stopAnimationLoop=at.shared.add(function(up,_f){for(var tp=[],ip=2;ip<arguments.length;ip++)tp[ip-2]=arguments[ip];Yu.updateTime.apply(Yu,t$3.__spreadArray([up,_f],tp,!1))},!1,0,10));var Xu=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Yu.currentMode==="VRPanorama"&&Yu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Xu,!1),Yu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Xu,!1)},Yu.plugins={},Ru.plugins&&Ru.plugins.length)for(var Zu=0,Xc=Ru.plugins;Zu<Xc.length;Zu++){var _h=Xc[Zu];if(typeof _h=="function")_h(Yu);else if(Array.isArray(_h)){var ep=_h[0],np=_h[1],ap=_h[2];if(typeof ep=="function"){var lp=ep(Yu,ap);typeof np=="string"&&(Yu.plugins[np]?Yu.throwError(new Error("plugin name ".concat(np," is exists."))):Yu.plugins[np]=lp)}}}return Yu}return t$3.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.dispose=function(){var Ru,Ou;if(this.destroyed!==!0){delete Iu$1.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Ru=this.renderer)===null||Ru===void 0||Ru.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Fu=this.getElement();Fu&&Fu.parentNode&&Fu.parentNode.removeChild(Fu),this.scene.remove(this.model);var Nu=this.model.getMaterial();Nu&&(Nu.pano0&&Nu.pano0.map.dispose(),Nu.pano1&&Nu.pano1.map!==((Ou=Nu.pano0)===null||Ou===void 0?void 0:Ou.map)&&Nu.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It$1&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},$u.prototype.setScissor=function(Ru){Object.assign(this.scissor,Ru),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty($u.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Ru){this.helperGroup.visible!==Ru&&(this.helperGroup.visible=Ru,this.emit("helpersVisibleChange",Ru),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Ru){this._enableIOSEDR!==Ru&&(this._enableIOSEDR=Ru,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Ru){var Ou,Fu;if(Ru){if(!this.screenBuffer){var Nu=this.getDrawingBufferSize(yu$1);this.screenBuffer=new r$3.WebGLRenderTarget(Nu.x,Nu.y,{encoding:(Fu=(Ou=this.renderer)===null||Ou===void 0?void 0:Ou.outputEncoding)!==null&&Fu!==void 0?Fu:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),$u.prototype.updateConfiguration=function(Ru){var Ou=!1;Ru.panorama&&(Object.assign(this.controllerInits.Panorama,Ru.panorama),this.currentMode==="Panorama"&&(Ou=!0)),Ru.model&&(Object.assign(this.controllerInits.Model,Ru.model),this.currentMode==="Model"&&(Ou=!0)),Ru.floorplan&&(Object.assign(this.controllerInits.Floorplan,Ru.floorplan),this.currentMode==="Floorplan"&&(Ou=!0)),Ru.topview&&(Object.assign(this.controllerInits.Topview,Ru.topview),this.currentMode==="Topview"&&(Ou=!0)),Ru.mapview&&(Object.assign(this.controllerInits.Mapview,Ru.topview),this.currentMode==="Mapview"&&(Ou=!0)),Ru.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Ru.depthPanorama),this.currentMode==="DepthPanorama"&&(Ou=!0)),Ru.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Ru.vrPanorama),this.currentMode==="VRPanorama"&&(Ou=!0)),Ru.imageOptions&&(Object.assign(this.imageOptions,Ru.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Ou=!0)),Ou&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},$u.prototype.appendTo=function(Ru,Ou){if(Ou===void 0&&(Ou={}),this.renderer)if(this.renderer instanceof It$1){var Fu=this.getElement();if(Fu){Ru.appendChild(Fu),this.refresh(Ou);var Nu=window.getComputedStyle(Ru).position;Nu!=="relative"&&Nu!=="absolute"&&Nu!=="fixed"&&Nu!=="sticky"&&(Ru.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},$u.prototype.refresh=function(Ru,Ou){if(Ru===void 0&&(Ru={}),this.renderer){var Fu=this.getElement();if(Fu){var Nu=Fu.parentNode;if(Nu&&Nu.nodeName){var Vu=Ru.width,Gu=Vu===void 0?Nu.offsetWidth:Vu,Uu=Ru.height,Hu=Uu===void 0?Nu.offsetHeight:Uu;this.renderer instanceof It$1&&(Ou&&this.renderer.setPixelRatio(Ou),this.renderer.setSize(Gu,Hu))}var Wu=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=Wu.x*this.scissor.width/(Wu.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},$u.prototype.addExtraElement=function(Ru){var Ou=this;return this.extraElements.indexOf(Ru)===-1&&(this.extraElements.push(Ru),this.controller&&this.controller.bindExtraElement(Ru)),function(){return Ou.removeExtraElement(Ru)}},$u.prototype.removeExtraElement=function(Ru){var Ou=this.extraElements.indexOf(Ru);Ou!==-1&&(this.extraElements.splice(Ou,1),this.controller&&this.controller.unbindExtraElement(Ru))},$u.prototype.getPose=function(){var Ru=this.camera.copyPose(),Ou=Ru.longitude,Fu=Ru.latitude,Nu=Ru.fov,Vu=Ru.offset,Gu=Ru.distance;return{longitude:Ou,latitude:Fu,fov:Nu,offset:Vu.clone(),distance:Gu}},$u.prototype.getSize=function(Ru){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Ru),Ru.x*=this.scissor.width,Ru.y*=this.scissor.height,Ru},$u.prototype.getDrawingBufferSize=function(Ru){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Ru),Ru.x*=this.scissor.width,Ru.y*=this.scissor.height,Ru},$u.prototype.updateCamera=function(Ru,Ou,Fu){return Fu===void 0&&(Fu=!0),this.controller?this.controller.updateCamera(Ru,Ou,Fu):Promise.reject(new Error("controller is not initialized."))},$u.prototype.getLongitudeAndLatitude=function(){var Ru=this.getPose();return{longitude:Ru.longitude,latitude:Ru.latitude}},$u.prototype.getOffset=function(){return this.getPose().offset},$u.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Ru=this.work.observers[this.panoIndex],Ou=new r$3.Object3D;return Ou.position.copy(Ru.position),Ou.quaternion.copy(Ru.quaternion),Ou.scale.set(1,1,1),Ou.updateMatrixWorld(!0),function(Fu,Nu){var Vu=new r$3.Vector3(0,0,-1);Vu.applyQuaternion(Fu.quaternion);var Gu=Nu.quaternion.clone().inverse();return Vu.applyQuaternion(Gu),{theta:Math.atan2(Vu.x,-Vu.z),phi:-Math.asin(Vu.y),lookAtVector:Vu}}(this.camera,Ou)}},$u.prototype.initBasisLoader=function(Ru){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Ru=="string"&&Ei$1.setTranscoderPath(Ru),Ei$1.workerConfig.format||Ei$1.detectSupport(this.renderer),Ei$1._allocateWorker(0)}catch(Ou){Ou instanceof Error&&this.throwError(Ou)}},Object.defineProperty($u.prototype,"work",{get:function(){var Ru=Eu$1.get(this);if(Ru&&wo.get(Ru))return Ru},enumerable:!1,configurable:!0}),$u.prototype.load=function(Ru,Ou,Fu,Nu){var Vu=this;if(Nu===void 0&&(Nu=!0),!this.renderer)throw new Error("renderer is not initialized");var Gu=this.lastLoadWorkTask.then(function(){return!(Uu=Ru)||typeof Uu!="object"&&typeof Uu!="function"||typeof Uu.then!="function"?Vu.load_(Ru,Ou,Fu,Nu):Ru.then(function(Hu){return Vu.load_(Hu,Ou,Fu,Nu)});var Uu});return this.lastLoadWorkTask=Gu.catch(function(Uu){Vu.throwError(Uu)}),Gu},$u.prototype.load_=function(Ru,Ou,Fu,Nu){var Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c=this;Nu===void 0&&(Nu=!0);var Ju,Xu,Zu,Xc=Co$1(Ru),_h=this.work;Ou===void 0&&(Ou=_h?"inherit":"initial"),Ou==="inherit"?(Ju=typeof this.panoIndex=="number"&&Xc.observers[this.panoIndex]?this.panoIndex:Xc.initial.panoIndex,Xu=(Vu=this.currentMode)!==null&&Vu!==void 0?Vu:Xc.initial.mode,Zu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Ou==="initial"?(Xu=(Gu=this.currentMode)!==null&&Gu!==void 0?Gu:Xc.initial.mode,Ju=Xc.initial.panoIndex,Zu=Xu===$u.Mode.Panorama||Xu===$u.Mode.DepthPanorama||Xu===$u.Mode.Model||Xu===$u.Mode.VRPanorama||Xu===$u.Mode.XRPanorama?{longitude:Xc.initial.longitude,latitude:Xc.initial.latitude,fov:Xc.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Ju=(Uu=Ou.panoIndex)!==null&&Uu!==void 0?Uu:Xc.initial.panoIndex,Xu=(Wu=(Hu=Ou.mode)!==null&&Hu!==void 0?Hu:this.currentMode)!==null&&Wu!==void 0?Wu:"Panorama",Zu={longitude:(Qu=Ou.longitude)!==null&&Qu!==void 0?Qu:Xc.initial.longitude,latitude:(qu=Ou.latitude)!==null&&qu!==void 0?qu:Xc.initial.latitude,fov:(Ku=Ou.fov)!==null&&Ku!==void 0?Ku:Xc.initial.fov}),this.emit("willLoad",Ru,Xc,{panoIndex:Ju,mode:Xu,longitude:Zu.longitude,latitude:Zu.latitude,fov:Zu.fov});var ep=function(){var ap;_c.panoIndex=Ju,_c.panoramaLikeSavedPose.longitude=Xc.initial.longitude,_c.panoramaLikeSavedPose.latitude=Xc.initial.latitude,_c.panoramaLikeSavedPose.fov=Xc.initial.fov;var lp=_c.controller?Fu!=null?Fu:_c.modeChangeDuration:0,up=t$3.__assign(t$3.__assign({initial:[Ju,Zu,lp,Nu]},_c.commonParams()),_c.controllerInits[Xu]);_c.controller?_c.controller.updateWork(Xc,Ju,Zu,lp,Nu)===!1&&(_c.controller.destroy(),_c.controller=_c.applyController(Xu,up)):_c.controller=_c.applyController(Xu,up),_c.emit("load",Ru,Xc,{panoIndex:Ju,mode:Xu,longitude:Zu.longitude,latitude:Zu.latitude,fov:Zu.fov}),(ap=_c.analysis)===null||ap===void 0||ap.work(Xc)},np=function(ap){var lp;ap===void 0&&(ap=Qe$1),Xc.model&&(_c.model.name!==((lp=Xc.model)===null||lp===void 0?void 0:lp.file)?(_c.emit("modelWillLoad",Xc.model),_c.loadModel(Xc.model,Xc.allowHosts,ap,!0)):ap&&ap())};return Eu$1.set(this,Xc),Xu===$u.Mode.Floorplan||Xu===$u.Mode.Topview||Xu===$u.Mode.Mapview||Xu===$u.Mode.Model?np(function(){ep(),_c.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Xc.initial.fov,longitude:Xc.initial.longitude,latitude:Xc.initial.latitude,offset:Xc.observers[Xc.initial.panoIndex].position}),this.needsRender=!0),ep(),(Yu=this.controller)===null||Yu===void 0||Yu.once("panoLoaded",function(){_c.needsRender=!0,_c.emit("cameraUpdate",_c.camera.copyPose(),Nu),np()})),this.ready().then(function(){_c.emit("loaded",Ru,_c.work)})},$u.prototype.changeMode=function(Ru,Ou,Fu,Nu,Vu){var Gu=this;if(Ou===void 0&&(Ou={}),Fu===void 0&&(Fu=this.modeChangeDuration),Nu===void 0&&(Nu=!0),Vu===void 0&&(Vu=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Uu,Hu){if(!$u.Mode.hasOwnProperty(Ru)){var Wu=new Error('mode "'.concat(Ru,'" is not existed'));return Gu.throwError(Wu),void Hu(Wu)}if((Ru===$u.Mode.Floorplan||Ru===$u.Mode.Topview||Ru===$u.Mode.Mapview||Ru===$u.Mode.Model)&&(oo(Gu.model)||Gu.model.loaded!==!0))return Wu=new Error("model is not ready."),Gu.throwError(Wu),void Hu(Wu);if(oo(Gu.controller))return Wu=new Error("controller is not ready."),Gu.throwError(Wu),void Hu(Wu);var Qu=Gu.controller,qu=Gu.currentMode,Ku=function(){var _c,Ju,Xu,Zu;if(Gu.emit("wantsChangeMode",Ru,qu))Hu(new Error("change mode canceled."));else{if(Gu.controller&&Vu===!1&&qu===Ru)Ru===$u.Mode.Panorama||Ru===$u.Mode.DepthPanorama||Ru===$u.Mode.Model||Ru===$u.Mode.VRPanorama||Ru===$u.Mode.XRPanorama?typeof Ou.panoIndex=="number"&&Ou.panoIndex!==Gu.panoIndex?Gu.controller.moveToPano((Ju=(_c=Ou.panoIndex)!==null&&_c!==void 0?_c:Gu.panoIndex)!==null&&Ju!==void 0?Ju:0,t$3.__assign({duration:Fu},Ou),Nu):Gu.controller.updateCamera(Ou,Fu,Nu).catch(Qe$1):(typeof Ou.panoIndex=="number"&&Ou.panoIndex!==Gu.panoIndex&&(Gu.panoIndex=Ou.panoIndex),Gu.controller.updateCamera(Ou,Fu,Nu).catch(Qe$1));else{Qu.destroy();var Xc=(Zu=(Xu=Ou.panoIndex)!==null&&Xu!==void 0?Xu:Gu.panoIndex)!==null&&Zu!==void 0?Zu:0,_h=eu$1(Ru)?Gu.panoramaLikeSavedPose:{};Ru===$u.Mode.Mapview&&(_h.longitude=Gu.panoramaLikeSavedPose.longitude),typeof Ou.longitude!="number"&&typeof Ou.latitude!="number"||(_h.longitude=Ou.longitude,_h.latitude=Ou.latitude),typeof Ou.fov=="number"&&(_h.fov=Ou.fov);var ep=t$3.__assign(t$3.__assign({initial:[Xc,_h,Fu,Nu]},Gu.commonParams()),Gu.controllerInits[Ru]);Gu.saveControllerPose(Qu),Gu.controller=Gu.applyController(Ru,ep);var np=$l[Ru].initAnimationEndPose(ep);Gu.emit("modeChange",Ru,qu,Xc,np,Nu)}Uu()}};if(Ru===$u.Mode.VRPanorama)Gu.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(_c){if(_c=="granted")return Promise.resolve();var Ju=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Ju)}):Promise.resolve()).then(function(){return Ku()}).catch(function(_c){_c instanceof Error&&(Gu.exitFullscreen(),Gu.throwError(_c),Hu(_c))});else if(Ru===$u.Mode.XRPanorama){var Yu=at.shared.getContext();Yu?Yu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(Ju){return Ju?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(Ju){return Promise.resolve(Ju)})});var _c=new Error("Request XR Permission denied.");return Promise.reject(_c)}().then(function(_c){at.shared.setContext(_c),Ku()}).catch(function(_c){_c instanceof Error&&(Gu.throwError(_c),Hu(_c))}),Gu.on("webXRSessionEnd",function(){Gu.changeMode("Panorama")})}else Ku()})},$u.prototype.getPixels=function(Ru,Ou,Fu,Nu,Vu){if(Vu===void 0&&(Vu=1),!this.renderer)throw new Error("renderer is not initialized.");var Gu=this.getPixelsRenderTarget,Uu=this.renderer.getSize(new r$3.Vector2);Ru=ho$1(Ru,Math.floor(Fu/2),Math.floor(Uu.x-Fu)),Ou=ho$1(Ou,Math.floor(Nu/2),Math.floor(Uu.y-Nu)),Gu.setSize(Fu*Vu,Nu*Vu),this.renderer.setRenderTarget(Gu),this.camera.setViewOffset(Uu.width,Uu.height,Ru,Uu.height-Ou-Nu,Fu,Nu),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var Hu=new Uint8Array(Fu*Vu*Nu*Vu*4);return this.renderer.readRenderTargetPixels(Gu,0,0,Fu*Vu,Nu*Vu,Hu),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),Hu},$u.prototype.getElement=function(){var Ru;return(Ru=this.renderer)===null||Ru===void 0?void 0:Ru.domElement},$u.prototype.render=function(Ru,Ou){var Fu=this;if(Ou===void 0&&(Ou=!1),!this.renderer)return null;if(Ou){var Nu=this.renderer.getSize(yu$1);this.scene.traverseVisible(function(Gu){Gu.setResolution&&Gu.setResolution(Nu.x,Nu.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Vu=this.getDrawingBufferSize(yu$1);return this.screenBuffer.setSize(Vu.x,Vu.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu$1(this.renderer),this.renderer.setRenderTarget(null),Ru&&at.shared.add(Ru,!0),this.screenBuffer}return this.aroundScissor(function(){Fu.renderer&&(Fu.controller?Fu.controller.render():Fu.renderer.render(Fu.scene,Fu.camera),Fu.poweredByRealsee&&Fu.currentMode!=="VRPanorama"&&Fu.currentMode!=="XRPanorama"&&gu$1(Fu.renderer)),Ru&&at.shared.add(Ru,!0)}),null},$u.prototype.updateTime=function(Ru,Ou){for(var Fu,Nu=this,Vu=[],Gu=2;Gu<arguments.length;Gu++)Vu[Gu-2]=arguments[Gu];if(!this.destroyed){this.syncingState=this.syncState(Ru,Ou),this.controller&&(Fu=this.controller).updateTime.apply(Fu,t$3.__spreadArray([Ru,Ou],Vu,!1)),this.syncingState=!1;var Uu=new r$3.Vector2(512,512),Hu=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(Uu),Uu.x*=this.scissor.width,Uu.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Hu),Hu.x*=this.scissor.width,Hu.y*=this.scissor.height);var Wu=[];if(xu$1.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu$1.setFromProjectionMatrix(xu$1),this.scene.traverse(function(Zu){if(Zu.setResolution&&Zu.setResolution(Uu.x,Uu.y),Zu.mixer instanceof r$3.AnimationMixer){var Xc=wu$1.get(Zu.mixer);Xc||(Xc=new r$3.Clock,wu$1.set(Zu.mixer,Xc)),Zu.mixer.update(Xc.getDelta())}(Zu instanceof r$3.Mesh||Zu instanceof r$3.Line||Zu instanceof r$3.Points)&&(Zu instanceof r$3.ImmediateRenderObject||!Zu.frustumCulled||bu$1.intersectsObject(Zu))&&Wu.push(Zu)}),Hu.width*Hu.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Qu=void 0;if(this.onlyRenderIfNeeds!==!0)Qu=this.render();else{for(var qu=0,Ku=Wu;qu<Ku.length;qu++){var Yu=Ku[qu],_c=function(Zu){Zu.needsRender===!0?(Zu.needsRender=!1,Nu.needsRender=!0):Zu.mixer&&Zu.mixer.stats.actions.inUse>0&&(Nu.needsRender=!0)};_c(Yu),Yu.traverseAncestors(_c)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Qu=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Nu.controller.postProcessing(Nu.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Qu!==void 0)}if(this.fps.testTime&&Ru-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Ru,this.fps.testCount=0,this.renderer){var Ju=this.renderer.getContext(),Xu=Us$1(Ju);Xu&&this.throwError(Xu)}}},$u.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It$1&&this.renderer.clear(!0,!0,!0)},$u.prototype.play=function(){this.needsRender=!0,this.paused=!1},$u.prototype.moveToPano=function(Ru,Ou,Fu){Ou===void 0&&(Ou={}),Fu===void 0&&(Fu=!0);var Nu=this,Vu=Nu.controller,Gu=Nu.currentMode,Uu=Nu.renderer;return Vu?Uu?(Gu===$u.Mode.Floorplan||Gu===$u.Mode.Topview||Gu===$u.Mode.Mapview?oo(Ru)||(this.panoIndex=Ru,this.changeMode($u.Mode.Panorama,Ou,void 0,Fu)):Vu.moveToPano(Ru,Ou,Fu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},$u.prototype.preloadPano=function(Ru,Ou){var Fu=this;if(Ou===void 0&&(Ou=Qe$1),!this.work)return Promise.reject(new Error("work never loaded"));var Nu=this.work.observers[Ru],Vu=this.work.allowHosts,Gu=_e$1();return Promise.all(["right","left","up","down","front","back"].map(function(Uu){var Hu=t$3.__assign({key:"pano.".concat(Ru,".").concat(Uu),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(Fu.imageOptions,["size","format","quality","mappings"])),Wu=Nu.images[Uu];return function(Qu,qu){qu===void 0&&(qu={});var Ku=_e$1(),Yu=Qu;return Promise.resolve().then(function(){return qu.requestProxy?qu.requestProxy(Qu):Qu}).then(function(_c){return/^https\:/.test(location.href)&&/^http\:/.test(_c)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(_c,"'. This request was automatically upgraded to HTTPS")),_c.replace(/^http\:/,"https:")):_c}).catch(function(_c){var Ju,Xu=new Ge$1(Yu,"Link",_c&&_c.message?String(_c.message):String(_c));return(Ju=qu.networkSubscribe)===null||Ju===void 0||Ju.emit("network",Qu,"Link","proxy-error",Xu.message),Promise.reject(Xu)}).then(function(_c){return _c in nt$1?nt$1[_c]:nt$1[_c]=new Promise(function(Ju,Xu){var Zu,Xc=qu.allowHosts?je$1.concat(qu.allowHosts):je$1.slice(),_h=et(_c);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(up){return Ke(up,location.hostname)}).length===0&&!ze$1(_h)&&Xc.filter(function(up){return Ke(up,_h)}).length===0){var ep=new Ye$1(_c,"Link","request host(".concat(_h,") is not allowed"));return Xu(ep),void((Zu=qu.networkSubscribe)===null||Zu===void 0||Zu.emit("network",_c,"Link","forbidden",ep.message))}var np=document.createElement("link");np.href=_c,np.rel=np.relList&&np.relList.supports("prefetch")?"prefetch":"preload",np.as="fetch",np.crossOrigin="";var ap=document.head||document.getElementsByTagName("head")[0];ap&&ap.appendChild(np);var lp=!1;np.onload=function(){var up;if(lp!==!0){lp=!0,Ju();var _f=_e$1(),tp={origin:Yu,source:_c,requestTime:Ku,responseTime:_f,costs:_f-Ku,headers:{}};(up=qu.networkSubscribe)===null||up===void 0||up.emit("network",_c,"Link","preload",JSON.stringify(tp))}},np.onerror=function(up){var _f;if(lp!==!0){lp=!0;var tp=new We(_c,"Link",0);Xu(tp),(_f=qu.networkSubscribe)===null||_f===void 0||_f.emit("network",_c,"Link","error",tp.message)}}})})}(Fu.imageOptions.transform?Fu.imageOptions.transform(Wu,Hu):ct$1(Wu,Hu),{allowHosts:Vu,requestProxy:Fu.requestProxy,networkSubscribe:Fu.networkSubscribe})})).then(function(){var Uu=_e$1()-Gu;return Ou(Uu),Uu})},$u.prototype.project2d=function(Ru,Ou){if(Ou===void 0&&(Ou=!1),!this.renderer)return null;if(this.model.empty===!1&&Ou){var Fu=this.camera.position,Nu=Ru.clone().sub(Fu),Vu=new r$3.Raycaster(Fu,Nu.clone().normalize()),Gu=this.model.intersectRaycaster(Vu)[0];if(Gu&&Gu.distance+.01<Nu.length())return null}var Uu=Ru.clone().project(this.camera);if(Math.abs(Uu.z)>1)return null;var Hu=this.renderer.getSize(new r$3.Vector2),Wu=Hu.x*this.scissor.width,Qu=Hu.y*this.scissor.height,qu=Hu.x*this.scissor.left+(Uu.x+1)/2*Wu,Ku=Hu.y*(1-this.scissor.bottom-this.scissor.height)+(1-Uu.y)/2*Qu;return new r$3.Vector2(qu,Ku)},$u.prototype.getRenderObjects=function(Ru){xu$1.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu$1.setFromProjectionMatrix(xu$1),Ru||(Ru=this.scene);var Ou=[];return Ru.traverseVisible(function(Fu){(Fu instanceof r$3.Mesh||Fu instanceof r$3.Line||Fu instanceof r$3.Points)&&(Fu instanceof r$3.ImmediateRenderObject||!Fu.frustumCulled||bu$1.intersectsObject(Fu))&&Ou.push(Fu)}),Ou},$u.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||$u.Mode.Panorama,panoIndex:this.panoIndex||0})},$u.prototype.setState=function(Ru,Ou,Fu){var Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku;Ou===void 0&&(Ou=!1),Fu===void 0&&(Fu=!0),!(Ru=Object.assign({},Ru)).offset||Ru instanceof r$3.Vector3||(Ru.offset=new r$3.Vector3(Ru.offset.x,Ru.offset.y,Ru.offset.z));var Yu,_c,Ju,Xu,Zu,Xc=(Nu=Ru.panoIndex)!==null&&Nu!==void 0?Nu:this.state.panoIndex,_h=(Vu=Ru.mode)!==null&&Vu!==void 0?Vu:this.state.mode;if(this.work)if(this.work.observers[Xc])if(Ru.mode!==$u.Mode.Floorplan&&Ru.mode!==$u.Mode.Topview&&Ru.mode!==$u.Mode.Mapview&&Ru.mode!==$u.Mode.Model||!oo(this.model)&&this.model.loaded===!0){if(this.state.mode!==_h){if(_h==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var ep=void 0;ep=eu$1(this.state.mode)&&eu$1(_h)?t$3.__assign({},this.state):eu$1(_h)?t$3.__assign({},this.panoramaLikeSavedPose):_h===$u.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$3.__assign({},Ru),typeof Ru.longitude=="number"&&(ep.longitude=Ru.longitude),typeof Ru.latitude=="number"&&(ep.latitude=Ru.latitude),typeof Ru.fov=="number"&&(ep.fov=Ru.fov);var np=t$3.__assign(t$3.__assign({initial:[Xc,ep,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[_h]),ap=$l[_h].initAnimationEndPose(np);Yu=ap.longitude,_c=ap.latitude,Ju=ap.fov,Xu=ap.offset,Zu=ap.distance}else Yu=(Gu=Ru.longitude)!==null&&Gu!==void 0?Gu:this.state.longitude,_c=(Uu=Ru.latitude)!==null&&Uu!==void 0?Uu:this.state.latitude,Ju=(Hu=Ru.fov)!==null&&Hu!==void 0?Hu:this.state.fov,Xu=(Wu=Ru.offset)!==null&&Wu!==void 0?Wu:this.state.offset,Zu=(Qu=Ru.distance)!==null&&Qu!==void 0?Qu:this.state.distance;var lp={panoIndex:Xc,mode:_h,longitude:Yu,latitude:_c,fov:Ju,offset:Xu,distance:Zu};this.emit("setState",lp),$s(this.state,lp)||(this.controller&&lp.mode==="VRPanorama"&&lp.mode!==this.state.mode?(Js(this.state,lp),this.changeMode("VRPanorama")):this.controller&&lp.mode==="XRPanorama"&&lp.mode!==this.state.mode?(Js(this.state,lp),this.changeMode("XRPanorama")):(Js(this.state,lp),this.controller&&(this.controller.userAction=Fu),Ou&&this.state.mode===lp.mode&&(this.syncingState=this.syncState(_e$1(),0,Ou),this.syncingState&&((qu=this.controller)===null||qu===void 0||qu.updateTime(_e$1(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Fu),(Ku=this.analysis)===null||Ku===void 0||Ku.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},$u.prototype.aroundScissor=function(Ru){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Ou=new r$3.Vector2,Fu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Fu){this.renderer.getSize(Ou);var Nu=Math.floor(Ou.x*this.scissor.left),Vu=Math.floor(Ou.y*this.scissor.bottom),Gu=Math.floor(Ou.x*this.scissor.width),Uu=Math.floor(Ou.y*this.scissor.height);this.renderer.setViewport(Nu,Vu,Gu,Uu),this.renderer.setScissor(Nu,Vu,Gu,Uu),this.renderer.setScissorTest(!0)}Ru(),Fu&&(this.renderer.setViewport(0,0,Ou.x,Ou.y),this.renderer.setScissor(0,0,Ou.x,Ou.y),this.renderer.setScissorTest(!1))}else Ru()},$u.prototype.syncState=function(Ru,Ou,Fu){Fu===void 0&&(Fu=!1);var Nu=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Vu={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Vu,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Gu=this.currentMode;if(!(Gu===$u.Mode.Floorplan||Gu===$u.Mode.Topview||Gu===$u.Mode.Mapview||Gu===$u.Mode.Model)||!this.modelPending){var Uu=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var Hu=0,Wu=Uu;Hu<Wu.length;Hu++){var Qu=Wu[Hu];this.controller instanceof $l.Panorama?Qu.tile!==!0||this.controller.isTileReady()?Qu():this.readyCallbacks.push(Qu):Qu()}}}if(this.controller instanceof $l.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var qu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,qu,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return qu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,qu,!1),!0;if(this.controller instanceof $l.Topview||this.controller instanceof $l.Mapview){var Ku=1,Yu=Fu?this.state.fov:Ys$1(this.camera.pose.fov,this.state.fov,Ku),_c=Fu?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(Ys$1(this.camera.pose.offset.x,this.state.offset.x,.2),Ys$1(this.camera.pose.offset.y,this.state.offset.y,.2),Ys$1(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs$1(Yu,this.camera.pose.fov)||Hs(_c,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Yu},0).catch(Qe$1),this.controller.locationMotion.set({x:_c.x,y:_c.y,z:_c.z},0).catch(Qe$1),!0}else{Ku=1;var Ju=Math.PI/45,Xu=(Yu=Fu?this.state.fov:Ys$1(this.camera.pose.fov,this.state.fov,Ku),Fu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(_h,ep,np){if(_h.longitude===ep.longitude&&_h.latitude===ep.latitude)return{longitude:ep.longitude,latitude:ep.latitude};var ap=Gs$1(_h.longitude),lp=_h.latitude,up=Gs$1(ep.longitude),_f=ep.latitude;up-ap>Ws$1?ap+=Xs$1:ap-up>Ws$1&&(ap-=Xs$1);var tp=np/Math.sqrt(Math.pow(up-ap,2)+Math.pow(_f-lp,2));return tp>=1?{longitude:ep.longitude,latitude:ep.latitude}:{longitude:ap+(up-ap)*tp,latitude:lp+(_f-lp)*tp}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Ju)),Zu=Xu.longitude,Xc=Xu.latitude;if(Vs$1(Zu,this.camera.pose.longitude,2*Math.PI)||Vs$1(Xc,this.camera.pose.latitude)||Vs$1(Yu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:Zu,latitude:Xc,fov:Yu},0).catch(Qe$1),!0}return this.stateSynced=!0,Nu===!1&&this.emit("stateSynced",this.state),!1},$u.prototype.ready=function(Ru){var Ou=this;return Ru===void 0&&(Ru={}),new Promise(function(Fu){var Nu;Ou.readyCallbacks.push(Object.assign(Fu,{tile:(Nu=Ru.tile)!==null&&Nu!==void 0&&Nu}))})},$u.prototype.requestFullscreen=function(){var Ru;if(Zs()){var Ou=(Ru=this.getElement())===null||Ru===void 0?void 0:Ru.parentNode;Ou&&"requestFullscreen"in Ou&&typeof document!="undefined"&&document.fullscreenElement===null&&Ou.requestFullscreen()}},$u.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},$u.prototype.throwError=function(Ru){this.hasListener("error")?this.emit("error",Ru):console.error(Ru)},$u.prototype.loadModel=function(Ru,Ou,Fu,Nu){var Vu=this,Gu=Ru.file;this.emit("modelWillLoad",Ru);var Uu=new uo$1({allowHosts:Ou,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});Uu.once("bvhLoaded",function(){var Hu,Wu;Vu.destroyed||Gu===((Wu=(Hu=Vu.work)===null||Hu===void 0?void 0:Hu.model)===null||Wu===void 0?void 0:Wu.file)&&Vu.emit("modelBvhLoaded",Uu)}),Uu.once("materialLoaded",function(){var Hu,Wu;Vu.destroyed||Gu===((Wu=(Hu=Vu.work)===null||Hu===void 0?void 0:Hu.model)===null||Wu===void 0?void 0:Wu.file)&&Vu.emit("modelMaterialLoaded",Uu)}),Uu.once("geometryLoaded",function(){var Hu,Wu;Vu.destroyed||Gu===((Wu=(Hu=Vu.work)===null||Hu===void 0?void 0:Hu.model)===null||Wu===void 0?void 0:Wu.file)&&(Uu.bounding.max.y-Uu.bounding.min.y<1.5&&(Uu.bounding.max.y=Uu.bounding.min.y+10),Vu.emit("modelGeometryLoaded",Uu))}),Uu.once("loaded",function(){var Hu,Wu,Qu,qu;if(!Vu.destroyed&&Gu===((Wu=(Hu=Vu.work)===null||Hu===void 0?void 0:Hu.model)===null||Wu===void 0?void 0:Wu.file)){var Ku,Yu=Vu.model;Yu&&(Yu.show(),Ku=Yu.getMaterial()||{},Vu.scene.remove(Yu),Yu.dispose(),Uu.setTransparent(Yu.getTransparent())),Ku&&Uu.setMaterial(Ku),Vu.model=Uu,Vu.scene.add(Uu),(Qu=Vu.controller)===null||Qu===void 0||Qu.updateModel(Uu),(qu=Vu.renderer)===null||qu===void 0||qu.compile(Vu.scene,Vu.camera),Vu.needsRender=!0,Vu.modelPending=!1,Fu(),Vu.emit("modelLoaded",Uu)}}),Uu.on("shownFloorChange",function(Hu,Wu){var Qu,qu;Vu.destroyed||Gu===((qu=(Qu=Vu.work)===null||Qu===void 0?void 0:Qu.model)===null||qu===void 0?void 0:qu.file)&&Vu.emit("modelShownFloorChange",Hu,Wu)}),Uu.on("error",function(Hu){var Wu,Qu,qu,Ku;if(!Vu.destroyed&&Gu===((Qu=(Wu=Vu.work)===null||Wu===void 0?void 0:Wu.model)===null||Qu===void 0?void 0:Qu.file)){Uu.bounding.makeEmpty();for(var Yu=0,_c=Vu.work.observers;Yu<_c.length;Yu++){var Ju=_c[Yu];Uu.bounding.expandByPoint(Ju.standingPosition),Uu.bounding.expandByPoint(new r$3.Vector3().fromArray([Ju.position.x,2*Ju.position.y-Ju.standingPosition.y,Ju.position.z]))}var Xu=Ks(Uu.bounding,new r$3.Vector3(1,0,1));Xu.visible=!0,Xu.name="model_empty",Uu.add(Xu);var Zu,Xc=Vu.model;Xc&&(Xc.show(),Zu=Xc.getMaterial()||{},Vu.scene.remove(Xc),Xc.dispose(),Uu.setTransparent(Xc.getTransparent())),Zu&&Uu.setMaterial(Zu),Vu.model=Uu,Vu.scene.add(Uu),(qu=Vu.controller)===null||qu===void 0||qu.updateModel(Uu),(Ku=Vu.renderer)===null||Ku===void 0||Ku.compile(Vu.scene,Vu.camera),Vu.emit("modelLoadError",Hu,Uu),Vu.throwError(Hu),Vu.modelPending=!1,Fu()}}),this.modelPending=!0,Uu.load(Ru,this.textureOptions).catch(Qe$1)},$u.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},$u.prototype.saveControllerPose=function(Ru){Ru===void 0&&(Ru=this.controller),Ru&&eu$1(Ru)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},$u.prototype.applyController=function(Ru,Ou){var Fu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Nu=$l[Ru];Ru===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Ru===$u.Mode.Floorplan||Ru===$u.Mode.Topview||Ru===$u.Mode.Model||Ru===$u.Mode.Mapview),this.currentMode=Ru;for(var Vu=new Nu(Ou),Gu=function(Ku){Vu.on(Ku,function(){for(var Yu=[],_c=0;_c<arguments.length;_c++)Yu[_c]=arguments[_c];var Ju=Fu.emit.apply(Fu,t$3.__spreadArray([Ku],Yu,!1));if(Ju)return!1})},Uu=0,Hu=tu$1;Uu<Hu.length;Uu++)Gu(Hu[Uu]);var Wu=$l[Ru].initAnimationEndPose(Ou),Qu=Ou.initial[3],qu={panoIndex:Ou.initial[0],mode:Ru,longitude:Wu.longitude,latitude:Wu.latitude,fov:Wu.fov,offset:Wu.offset,distance:Wu.distance};return $s(this.state,qu)||(Js(this.state,qu),this.emit("stateChange",this.state,Qu)),this.emit("currentStateChange",this.getCurrentState(),Qu),Vu.on("cameraUpdate",function(Ku,Yu){var _c;if(Fu.controller){var Ju=t$3.__assign(t$3.__assign({},Fu.controller.getTargetPose()),{panoIndex:Fu.panoIndex,mode:Ru});Yu&&Fu.syncingState===!1&&Fu.state.mode===Ju.mode&&!$s(Fu.state,Ju)&&(Js(Fu.state,Ju),Fu.emit("stateChange",Fu.state,Yu),(_c=Fu.analysis)===null||_c===void 0||_c.state(Fu.work,Fu.state))}Fu.emit("currentStateChange",Fu.getCurrentState(),Yu)}),Vu.on("initAnimationWillStart",function(Ku,Yu,_c){var Ju,Xu=t$3.__assign(t$3.__assign({},Yu),{panoIndex:Ku,mode:Ru});_c&&Fu.state.mode===Xu.mode&&!$s(Fu.state,Xu)&&(Js(Fu.state,Xu),Fu.emit("stateChange",Fu.state,_c),(Ju=Fu.analysis)===null||Ju===void 0||Ju.state(Fu.work,Fu.state))}),Vu.on("initAnimationEnded",function(Ku,Yu,_c){var Ju,Xu=t$3.__assign(t$3.__assign({},Yu),{panoIndex:Ku,mode:Ru});_c&&Fu.state.mode===Xu.mode&&!$s(Fu.state,Xu)&&(Js(Fu.state,Xu),Fu.emit("stateChange",Fu.state,_c),(Ju=Fu.analysis)===null||Ju===void 0||Ju.state(Fu.work,Fu.state))}),Vu.on("panoWillArrive",function(Ku,Yu,_c){var Ju;Fu.panoIndex=Ku;var Xu=t$3.__assign(t$3.__assign({},Yu),{panoIndex:Ku,mode:Ru});_c&&Fu.state.mode===Xu.mode&&!$s(Fu.state,Xu)&&(Js(Fu.state,Xu),Fu.emit("stateChange",Fu.state,_c),(Ju=Fu.analysis)===null||Ju===void 0||Ju.state(Fu.work,Fu.state))}),Vu.on("panoArrived",function(Ku,Yu,_c){var Ju,Xu=t$3.__assign(t$3.__assign({},Yu),{panoIndex:Ku,mode:Ru});_c&&Fu.state.mode===Xu.mode&&!$s(Fu.state,Xu)&&(Js(Fu.state,Xu),Fu.emit("stateChange",Fu.state,_c),(Ju=Fu.analysis)===null||Ju===void 0||Ju.state(Fu.work,Fu.state))}),Vu.on("moveToPano",function(Ku,Yu){Fu.emit("currentStateChange",Fu.getCurrentState(),Yu)}),Vu.on("wantsMoveToPano",function(Ku,Yu,_c){var Ju=Fu.emit("wantsMoveToPano",Ku,Yu,_c);Ju||(Ju=Fu.emit("wantsToMoveToPano",Ku,Yu,_c)),Ju||Fu.moveToPano(Ku,Yu,_c)}),Vu.on("vrWantsToExit",function(){Fu.currentMode===$u.Mode.VRPanorama&&(Fu.exitFullscreen(),Fu.changeMode($u.Mode.Panorama))}),Vu.on("error",function(Ku){return Fu.throwError(Ku)}),Vu},$u.prototype.removeEventListeners=function(){},$u.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},$u.Line=null,$u}(Fe),Iu$1={instances:{},constructor:Mu$1};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu$1});var Su$1=function(){function _u(){}return _u.createButton=function($u){var Ru=document.createElement("button");function Ou(){Ru.style.display="",Ru.style.cursor="auto",Ru.style.left="calc(50% - 75px)",Ru.style.width="150px",Ru.onmouseenter=null,Ru.onmouseleave=null,Ru.onclick=null,Ru.textContent="VR NOT SUPPORTED"}function Fu(Vu){Vu.style.position="absolute",Vu.style.bottom="20px",Vu.style.padding="12px 6px",Vu.style.border="1px solid #fff",Vu.style.borderRadius="4px",Vu.style.background="rgba(0,0,0,0.1)",Vu.style.color="#fff",Vu.style.font="normal 13px sans-serif",Vu.style.textAlign="center",Vu.style.opacity="0.5",Vu.style.outline="none",Vu.style.zIndex="999"}if("xr"in navigator)return Ru.id="VRButton",Ru.style.display="none",Fu(Ru),navigator.xr.isSessionSupported("immersive-vr").then(function(Vu){Vu?(Ru.style.display="",Ru.style.cursor="pointer",Ru.style.left="calc(50% - 50px)",Ru.style.width="100px",Ru.textContent="ENTER VR",Ru.onmouseenter=function(){Ru.style.opacity="1.0"},Ru.onmouseleave=function(){Ru.style.opacity="0.5"},Ru.onclick=function(){$u&&$u()}):Ou()}),Ru;var Nu=document.createElement("a");return window.isSecureContext===!1?(Nu.href=document.location.href.replace(/^http:/,"https:"),Nu.innerHTML="WEBXR NEEDS HTTPS"):(Nu.href="https://immersiveweb.dev/",Nu.innerHTML="WEBXR NOT AVAILABLE"),Nu.style.left="calc(50% - 90px)",Nu.style.width="180px",Nu.style.textDecoration="none",Fu(Nu),Nu},_u}();five.AnimationFrameLoop=at,five.BVH=qt$1,five.BVHIntersect=Ft$1,five.BVHNode=Nt$1,five.BVHVector3=Ot$1,five.Camera=Lt,Five=five.Five=Mu$1,five.InternalWebGLRenderer=It$1,five.IntersectMesh=Fs,five.LegacyPanoCircleMesh=jo,five.Model=uo$1,five.NetworkSubscribe=tt,five.PBMContainer=At,five.PBMGroup=gt$1,five.PBMMaterial=Mt,five.PBMMesh=ft,five.PROXY_CONTROLLER_EVENT_NAMES=tu$1,five.PanoCircleMesh=as$1,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St,Subscribe=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro,five.TileBoundingSphere=pr,five.TileCacheNode=yn$1,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn,five.TileRequestScheduler=vn,five.Tileset3D=qr,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo,five.XRButton=Su$1,five.defaultImageURLTransform=ct$1,five.getViewportScale=nu$1,five.imageSupport=function(){return pt$1||(pt$1=Promise.all([dt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(_u){var $u=_u[0];return{webp:_u[1],avif:$u}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co$1;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$1.exports,n$2=require$$1,r$2=five;function o$1(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Ru){if(Ru!=="default"){var Ou=Object.getOwnPropertyDescriptor(_u,Ru);Object.defineProperty($u,Ru,Ou.get?Ou:{enumerable:!0,get:function(){return _u[Ru]}})}}),$u.default=_u,Object.freeze($u)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=[],c$1=u$1.createContext(null);function s$1(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.five}function l$2(){var _u=u$1.useContext(c$1);if(!_u)throw new Error("FiveProvider never found.");return _u.loadWork}var d={display:"inline-block",overflow:"hidden"};function v$1(_u,$u){var Ru=s$1(),Ou=[Ru];$u!==void 0&&(Ou=Ou.concat($u)),u$1.useLayoutEffect(function(){return _u(Ru.scene)},Ou)}var p$1=v$1;function h$1(_u){return e$1.__assign({},_u.state)}function m$1(_u){var $u=_u.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(_u.camera.position,$u)}function y$1(_u){return _u.camera.getWorldDirection(new i$1.Vector3)}function g$2(_u){return _u.model.empty?"Empty":"Loaded"}function S(_u,$u){return $u.indexOf(_u)>=0}function b(_u,$u){for(var Ru=0,Ou=Object.keys($u);Ru<Ou.length;Ru++){var Fu=Ou[Ru];$u[Fu]!==void 0&&(_u[Fu]=$u[Fu])}}function C$1(_u,$u){if(S("loadWork",$u))return _u}function w$1(_u,$u){if(S("setState",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.setState.apply(_u,Ru)}}function k(_u,$u){if(S("on",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.on.apply(_u,Ru)}}function x(_u,$u){if(S("on",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.once.apply(_u,Ru)}}function E$1(_u,$u){if(S("off",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.off.apply(_u,Ru)}}function L$1(_u,$u){if(S("intersectRaycaster",$u))return function(){for(var Ru,Ou=[],Fu=0;Fu<arguments.length;Fu++)Ou[Fu]=arguments[Fu];return(Ru=_u.model).intersectRaycaster.apply(Ru,Ou)}}function F$1(_u,$u){if(S("project2d",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.project2d.apply(_u,Ru)}}function _(_u,$u){if(S("updateCamera",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.updateCamera.apply(_u,Ru)}}function P$2(_u,$u){if(S("initBasisLoader",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.initBasisLoader.apply(_u,Ru)}}function R$1(_u,$u){if(S("getPixels",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.getPixels.apply(_u,Ru)}}function V(_u,$u){if(S("render",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.render.apply(_u,Ru)}}function W$2(_u,$u){if(S("needsRender",$u))return function(){_u.needsRender=!0}}function M(_u,$u){if(S("preloadPano",$u))return function(){for(var Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];return _u.preloadPano.apply(_u,Ru)}}function O$1(_u,$u){if(S("showFloor",$u))return function(Ru){typeof Ru=="number"?_u.model.show(Ru):_u.model.show()}}function j(_u,$u){if(S("toggleHelperVisible",$u))return function(Ru){_u.helperVisible=Ru}}function A$1(_u,$u){for(var Ru={},Ou=$u.length,Fu=-1;++Fu<Ou;){var Nu=$u[Fu];Nu in _u&&(Ru[Nu]=_u[Nu])}return Ru}function N$1(_u,$u){for(var Ru=0;Ru<_u.length;Ru++)for(var Ou=0;Ou<$u.length;Ou++)if(_u[Ru]===$u[Ou])return!0;return!1}var U=function(){function _u($u,Ru){this.values=$u,this.listeners=[],this.onValuesChange=Ru}return _u.prototype.on=function($u,Ru){var Ou=this,Fu=[$u,Ru];return this.listeners.push(Fu),function(){var Nu=Ou.listeners.indexOf(Fu);Nu>=0&&Ou.listeners.splice(Nu,1)}},_u.prototype.getValues=function($u){return A$1(this.values,$u)},_u.prototype.setValues=function($u,Ru){var Ou,Fu,Nu=[];for(var Vu in Ru)$u.indexOf(Vu)>=0&&(Ou=Ru[Vu],Fu=this.values[Vu],!(typeof Ou=="number"&&typeof Fu=="number"&&isNaN(Ou)&&isNaN(Fu)||Ou===Fu))&&Nu.push(Vu);if(Nu.length!==0){for(var Gu=e$1.__assign({},this.values),Uu=0,Hu=Nu;Uu<Hu.length;Uu++){var Wu=Hu[Uu];this.values[Wu]=Ru[Wu]}this.onValuesChange&&this.onValuesChange(this.values,Gu);for(var Qu=0,qu=this.listeners;Qu<qu.length;Qu++){var Ku=qu[Qu],Yu=Ku[0],_c=Ku[1];if(N$1(Yu,Nu)){var Ju=A$1(Gu,Yu);_c(A$1(this.values,Yu),Ju)}}}},_u}();FiveCanvas=react.FiveCanvas=function(_u){var $u=_u.width,Ru=_u.height,Ou=s$1(),Fu=u$1.createRef(),Nu=e$1.__assign({width:$u,height:Ru},d);return u$1.useLayoutEffect(function(){if(Fu.current&&Ou.renderer){if(Ou.renderer.domElement.parentNode!==null&&Ou.renderer.domElement.parentNode!==Fu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Ou.renderer.domElement.parentNode!==Fu.current&&Fu.current.appendChild(Ou.renderer.domElement),Ou.camera.aspect=$u/Ru,Ou.camera.updateProjectionMatrix(),Ou.renderer.setSize($u,Ru),Ou.needsRender=!0}},[$u,Ru,Fu.current]),u$1.createElement("div",{ref:Fu,style:Nu})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];return _u},createFiveProvider=react.createFiveProvider=function(_u){return _u===void 0&&(_u={}),function($u){function Ru(Ou){var Fu,Nu=this;Nu=$u.call(this,Ou)||this;var Vu=function(Gu){var Uu=Gu===void 0?{}:Gu,Hu=Uu.backgroundColor,Wu=Hu===void 0?1579548:Hu,Qu=Uu.backgroundAlpha,qu=Qu===void 0?1:Qu,Ku=Uu.pixelRatio,Yu=Ku===void 0?1:Ku,_c=Uu.webgl2,Ju=_c!==void 0&&_c;if(typeof window!="undefined"){var Xu=null;if(!(Xu=Ju?a$1.shift():f$1.shift())){if(Ju){var Zu=document.createElement("canvas"),Xc=Zu.getContext("webgl2");if(Xc===null)throw new Error("error occurred when getting webgl2 canvas context");Xu=new i$1.WebGLRenderer({antialias:!1,alpha:!0,canvas:Zu,context:Xc})}else Xu=new i$1.WebGLRenderer({antialias:!1,alpha:!0});Xu.outputEncoding=i$1.sRGBEncoding}return Xu.setPixelRatio(Yu),Xu.setClearColor(Wu,qu),Xu.autoClear=!0,Xu}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:_u.backgroundAlpha,backgroundColor:_u.backgroundColor,webgl2:_u==null?void 0:_u.webgl2});return Nu.five=new r$2.Five(e$1.__assign({renderer:Vu},_u)),(Ou.work||Ou.initialWork)&&Nu.five.load(Ou.work||Ou.initialWork,Ou.initialState,void 0,(Fu=Ou.initialUserAction)===null||Fu===void 0||Fu),Nu.five.on("load",function(){var Gu;Nu.props.onWorkChange&&Nu.props.onWorkChange((Gu=Nu.five)===null||Gu===void 0?void 0:Gu.work)}),Nu.five.on("stateChange",function(Gu,Uu){Nu.props.onStateChange&&Nu.props.onStateChange(Gu,Uu)}),Nu.five.on("currentStateChange",function(Gu,Uu){Nu.props.onCurrentStateChange&&Nu.props.onCurrentStateChange(Gu,Uu)}),Nu.five.on("error",function(Gu){Nu.props.onError?Nu.props.onError(Gu):console.warn(Gu.message)}),Nu}return e$1.__extends(Ru,$u),Ru.prototype.loadWork=function(Ou,Fu,Nu,Vu){if(Vu===void 0&&(Vu=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Ou,Fu,Nu,Vu)},Ru.prototype.shouldComponentUpdate=function(Ou){var Fu,Nu;return Ou.work&&Ou.work!==((Fu=this.five)===null||Fu===void 0?void 0:Fu.work)&&((Nu=this.five)===null||Nu===void 0||Nu.load(Ou.work,Ou.initialState)),!0},Ru.prototype.componentWillUnmount=function(){var Ou;this.five&&(this.five.dispose(),(Ou=this.five.renderer)&&(Ou.capabilities.isWebGL2?f$1.indexOf(Ou)===-1&&f$1.push(Ou):a$1.indexOf(Ou)===-1&&a$1.push(Ou)),delete this.five)},Ru.prototype.render=function(){var Ou=this;return u$1.createElement(c$1.Provider,{value:{five:this.five,loadWork:function(){for(var Fu=[],Nu=0;Nu<arguments.length;Nu++)Fu[Nu]=arguments[Nu];return Ou.loadWork.apply(Ou,Fu)}}},this.props.children)},Ru}(u$1.Component)},react.createStore=function(_u){var $u=u$1.createContext(null);return{useStore:function(Ru){var Ou=u$1.useContext($u);if(Ou===null)throw new Error("StoreProvider never found.");var Fu=u$1.useRef(!0),Nu=u$1.useState(Ou.getValues(Ru)),Vu=Nu[0],Gu=Nu[1],Uu=e$1.__spreadArray([Ou],Ru,!0);return u$1.useLayoutEffect(function(){return Fu.current?Fu.current=!1:Gu(Ou.getValues(Ru)),Ou.on(Ru,function(Hu){return Gu(Hu)})},Uu),[Vu,u$1.useCallback(function(Hu){return Ou.setValues(Ru,Hu)},Uu)]},useStoreSetter:function(Ru){var Ou=u$1.useContext($u);if(Ou===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Fu){return Ou.setValues(Ru,Fu)},e$1.__spreadArray([Ou],Ru,!0))},watchStore:function(Ru,Ou,Fu){var Nu=u$1.useContext($u);if(Nu===null)throw new Error("StoreProvider never found.");var Vu=e$1.__spreadArray([Nu],Ru,!0);Fu!==void 0&&(Vu=Vu.concat(Fu)),u$1.useLayoutEffect(function(){return Nu.on(Ru,Ou)},Vu)},useStoreAction:function(Ru){var Ou=u$1.useContext($u);if(Ou===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Fu=[],Nu=0;Nu<arguments.length;Nu++)Fu[Nu]=arguments[Nu];var Vu=_u[Ru],Gu=Vu[0],Uu=Vu.slice(1),Hu=function(){return Ou.getValues(Uu)},Wu=function(Qu){return Ou.setValues(Uu,Qu)};return Gu.apply(void 0,e$1.__spreadArray([Hu,Wu],Fu,!1))},[])},StoreProvider:function(Ru){function Ou(Fu){var Nu=Ru.call(this,Fu)||this;return Nu.store=new U(Fu.initialValue,function(){for(var Vu,Gu=[],Uu=0;Uu<arguments.length;Uu++)Gu[Uu]=arguments[Uu];Nu.props.onValuesChange&&(Vu=Nu.props).onValuesChange.apply(Vu,Gu)}),Nu}return e$1.__extends(Ou,Ru),Ou.prototype.shouldComponentUpdate=function(Fu){return Fu.children!==this.props.children},Ou.prototype.render=function(){return u$1.createElement($u.Provider,{value:this.store},this.props.children)},Ou}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var _u=s$1();return{updateCamera:u$1.useCallback(function($u,Ru){return _u.updateCamera($u,Ru)},[_u]),initBasisLoader:u$1.useCallback(function($u){return _u.initBasisLoader($u)},[_u]),getPixels:u$1.useCallback(function($u,Ru,Ou,Fu,Nu){return _u.getPixels($u,Ru,Ou,Fu,Nu)},[_u]),render:u$1.useCallback(function($u){return _u.render($u)},[_u]),needsRender:u$1.useCallback(function(){return _u.needsRender=!0},[_u]),preloadPano:u$1.useCallback(function($u,Ru){return _u.preloadPano($u,Ru)},[_u])}},react.useFiveCameraDirection=function(){var _u=s$1(),$u=u$1.useState(function(){return y$1(_u)}),Ru=$u[0],Ou=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Ou(y$1(_u))})},[_u]),Ru},react.useFiveCameraRaycaster=function(){var _u=s$1(),$u=u$1.useState(function(){return m$1(_u)}),Ru=$u[0],Ou=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Ou(m$1(_u))})},[_u]),Ru},react.useFiveCurrentObserver=function(){var _u=s$1(),$u=u$1.useState(function(){return _u.getCurrentState()}),Ru=$u[0],Ou=$u[1];return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Ou(_u.getCurrentState())})},[_u]),_u.work?_u.work.observers[Ru.panoIndex]:null},react.useFiveCurrentState=function(){var _u=s$1(),$u=u$1.useState(function(){return _u.getCurrentState()}),Ru=$u[0],Ou=$u[1],Fu=u$1.useCallback(function(Nu,Vu,Gu){Vu===void 0&&(Vu=!1),Gu===void 0&&(Gu=!0);var Uu=typeof Nu=="function"?Nu(_u.getCurrentState()):Nu;_u.setState(Uu,Vu,Gu)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Ou(_u.getCurrentState())})},[_u]),[Ru,Fu]},react.useFiveEventCallback=function(_u,$u,Ru){var Ou=s$1(),Fu=[Ou,_u];Ru!==void 0&&(Fu=Fu.concat(Ru)),u$1.useLayoutEffect(function(){return Ou.on(_u,$u)},Fu)},react.useFiveFloor=function(){var _u=s$1(),$u=u$1.useState(_u.model.shownFloor),Ru=$u[0],Ou=$u[1],Fu=u$1.useState(_u.model.floorLength),Nu=Fu[0],Vu=Fu[1],Gu=u$1.useCallback(function(Uu){typeof Uu=="number"?_u.model.show(Uu):_u.model.show()},[_u]);return u$1.useLayoutEffect(function(){var Uu=[];return Uu.push(_u.on("modelShownFloorChange",function(){return Ou(_u.model.shownFloor)})),Uu.push(_u.on("modelLoaded",function(){return Vu(_u.model.floorLength)})),function(){for(var Hu;Hu=Uu.shift();)Hu()}},[_u]),[Ru,Nu,Gu]},react.useFiveHelper=function(){var _u=s$1(),$u=u$1.useState(_u.helperVisible),Ru=$u[0],Ou=$u[1],Fu=u$1.useCallback(function(Nu){_u.helperVisible=Nu},[_u]);return u$1.useLayoutEffect(function(){return _u.on("helpersVisibleChange",function(Nu){return Ou(Nu)})},[_u]),[Ru,Fu]},react.useFiveModelIntersectRaycaster=function(){var _u=s$1();return u$1.useCallback(function($u){return _u.model.intersectRaycaster($u)},[_u])},react.useFiveModelReadyState=function(){var _u=s$1(),$u=u$1.useState(function(){return g$2(_u)}),Ru=$u[0],Ou=$u[1];return u$1.useLayoutEffect(function(){return _u.on("modelLoaded",function(){return Ou(g$2(_u))})},[_u]),Ru},react.useFiveProject2d=function(){var _u=s$1(),$u=u$1.useState(function(){return Symbol()});$u[0];var Ru=$u[1];return u$1.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Ru(Symbol())})},[_u]),u$1.useCallback(function(Ou,Fu){return _u.project2d(Ou,Fu)},[_u])},react.useFiveScene=p$1,react.useFiveSceneEffect=v$1,react.useFiveState=function(){var _u=s$1(),$u=u$1.useState(function(){return h$1(_u)}),Ru=$u[0],Ou=$u[1],Fu=u$1.useCallback(function(Nu,Vu,Gu){Vu===void 0&&(Vu=!1),Gu===void 0&&(Gu=!0);var Uu=typeof Nu=="function"?Nu(_u.getCurrentState()):Nu;_u.setState(Uu,Vu,Gu)},[_u]);return u$1.useLayoutEffect(function(){return _u.on("stateChange",function(){return Ou(h$1(_u))})},[_u]),[Ru,Fu]},react.useFiveWork=function(){var _u=s$1(),$u=l$2(),Ru=u$1.useState(function(){return _u.work}),Ou=Ru[0],Fu=Ru[1];return u$1.useLayoutEffect(function(){return _u.on("load",function(){return Fu(_u.work)})},[_u]),[Ou,$u]},react.withFive=function(_u){return function($u){return u$1.forwardRef(function(Ru,Ou){var Fu=s$1(),Nu=l$2(),Vu=function(mp,pp){return[S("unsafe__fiveInstance",pp)?mp:void 0]}(Fu,_u)[0],Gu=function(mp,pp){var wp=S("state",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return e$1.__assign({},mp.state)},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("stateChange",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),Uu=Gu[0],Hu=Gu[1],Wu=function(mp,pp){var wp=S("currentState",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.getCurrentState()},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("currentStateChange",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),Qu=Wu[0],qu=Wu[1],Ku=function(mp,pp){var wp=S("currentObserver",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.getCurrentState()},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("currentStateChange",function(){return Cp(Symbol())})},[mp]),[$p?mp.work?mp.work.observers[$p.panoIndex]:null:void 0,Sp]}(Fu,_u),Yu=Ku[0],_c=Ku[1],Ju=function(mp,pp){var wp=S("work",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.work},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("load",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),Xu=Ju[0],Zu=Ju[1],Xc=function(mp,pp){var wp=S("model",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.model},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("modelLoaded",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),_h=Xc[0],ep=Xc[1],np=function(mp,pp){return[S("scene",pp)?mp.scene:void 0]}(Fu,_u)[0],ap=function(mp,pp){var wp=S("cameraDirection",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.camera.getWorldDirection(new i$1.Vector3)},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("cameraUpdate",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),lp=ap[0],up=ap[1],_f=function(mp,pp){var wp=S("cameraRaycaster",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp){var Fp=mp.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(mp.camera.position,Fp)}},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("cameraUpdate",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),tp=_f[0],ip=_f[1],rp=function(mp,pp){var wp=S("modelReadyState",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.model.empty?"Empty":"Loaded"},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("modelLoaded",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),op=rp[0],sp=rp[1],cp=function(mp,pp){var wp=S("shownFloor",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.model.shownFloor},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("modelShownFloorChange",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),hp=cp[0],dp=cp[1],xp=function(mp,pp){var wp=S("totalFloorLength",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.model.hasFloors()},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("modelLoaded",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),bp=xp[0],Rp=xp[1],Tp=function(mp,pp){var wp=S("helperVisible",pp),Ap=u$1.useState(Symbol()),Sp=Ap[0],Cp=Ap[1],$p=u$1.useMemo(function(){if(wp)return mp.helperVisible},[mp,Sp]);return u$1.useLayoutEffect(function(){if(wp)return mp.on("helpersVisibleChange",function(){return Cp(Symbol())})},[mp]),[$p,Sp]}(Fu,_u),Up=Tp[0],Ip=Tp[1],Vp=u$1.useMemo(function(){var mp={};return b(mp,{setState:w$1(Fu,_u),loadWork:C$1(Nu,_u),on:k(Fu,_u),once:x(Fu,_u),off:E$1(Fu,_u),intersectRaycaster:L$1(Fu,_u),project2d:F$1(Fu,_u),updateCamera:_(Fu,_u),initBasisLoader:P$2(Fu,_u),getPixels:R$1(Fu,_u),render:V(Fu,_u),needsRender:W$2(Fu,_u),preloadPano:M(Fu,_u),showFloor:O$1(Fu,_u),toggleHelperVisible:j(Fu,_u)}),mp},[Fu,Nu]),Lp=u$1.useMemo(function(){var mp=e$1.__assign({},Vp);return b(mp,{unsafe__fiveInstance:Vu,state:Uu,currentState:Qu,currentObserver:Yu,work:Xu,model:_h,scene:np,cameraDirection:lp,cameraRaycaster:tp,modelReadyState:op,shownFloor:hp,totalFloorLength:bp,helperVisible:Up}),mp},[Fu,Vp,Hu,qu,_c,Zu,ep,up,ip,sp,dp,Rp,Ip]);return u$1.createElement($u,e$1.__assign({ref:Ou,$five:Lp},Ru))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g$1=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g$1=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_u,$u,Ru){var Ou,Fu={},Nu=null,Vu=null;Ru!==void 0&&(Nu=""+Ru),$u.key!==void 0&&(Nu=""+$u.key),$u.ref!==void 0&&(Vu=$u.ref);for(Ou in $u)n$1.call($u,Ou)&&!p.hasOwnProperty(Ou)&&(Fu[Ou]=$u[Ou]);if(_u&&_u.defaultProps)for(Ou in $u=_u.defaultProps,$u)Fu[Ou]===void 0&&(Fu[Ou]=$u[Ou]);return{$$typeof:g$1,type:_u,key:Nu,ref:Vu,props:Fu,_owner:m.current}}reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Ru(){for(var Ou=[],Fu=0;Fu<arguments.length;Fu++){var Nu=arguments[Fu];if(!!Nu){var Vu=typeof Nu;if(Vu==="string"||Vu==="number")Ou.push(Nu);else if(Array.isArray(Nu)){if(Nu.length){var Gu=Ru.apply(null,Nu);Gu&&Ou.push(Gu)}}else if(Vu==="object")if(Nu.toString===Object.prototype.toString)for(var Uu in Nu)$u.call(Nu,Uu)&&Nu[Uu]&&Ou.push(Uu);else Ou.push(Nu.toString())}}return Ou.join(" ")}_u.exports?(Ru.default=Ru,_u.exports=Ru):window.classNames=Ru})()})(classnames);var classNames=classnames.exports;function die(_u){for(var $u=arguments.length,Ru=new Array($u>1?$u-1:0),Ou=1;Ou<$u;Ou++)Ru[Ou-1]=arguments[Ou];throw new Error(typeof _u=="number"?"[MobX] minified error nr: "+_u+(Ru.length?" "+Ru.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+_u)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(_u){var $u=!1;return function(){if(!$u)return $u=!0,_u.apply(this,arguments)}}var noop=function _u(){};function isFunction(_u){return typeof _u=="function"}function isStringish(_u){var $u=typeof _u;switch($u){case"string":case"symbol":case"number":return!0}return!1}function isObject(_u){return _u!==null&&typeof _u=="object"}function isPlainObject(_u){if(!isObject(_u))return!1;var $u=Object.getPrototypeOf(_u);if($u==null)return!0;var Ru=Object.hasOwnProperty.call($u,"constructor")&&$u.constructor;return typeof Ru=="function"&&Ru.toString()===plainObjectString}function isGenerator(_u){var $u=_u==null?void 0:_u.constructor;return $u?$u.name==="GeneratorFunction"||$u.displayName==="GeneratorFunction":!1}function addHiddenProp(_u,$u,Ru){defineProperty(_u,$u,{enumerable:!1,writable:!0,configurable:!0,value:Ru})}function addHiddenFinalProp(_u,$u,Ru){defineProperty(_u,$u,{enumerable:!1,writable:!1,configurable:!0,value:Ru})}function createInstanceofPredicate(_u,$u){var Ru="isMobX"+_u;return $u.prototype[Ru]=!0,function(Ou){return isObject(Ou)&&Ou[Ru]===!0}}function isES6Map(_u){return _u instanceof Map}function isES6Set(_u){return _u instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(_u){var $u=Object.keys(_u);if(!hasGetOwnPropertySymbols)return $u;var Ru=Object.getOwnPropertySymbols(_u);return Ru.length?[].concat($u,Ru.filter(function(Ou){return objectPrototype.propertyIsEnumerable.call(_u,Ou)})):$u}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(_u){return Object.getOwnPropertyNames(_u).concat(Object.getOwnPropertySymbols(_u))}:Object.getOwnPropertyNames;function toPrimitive(_u){return _u===null?null:typeof _u=="object"?""+_u:_u}function hasProp(_u,$u){return objectPrototype.hasOwnProperty.call(_u,$u)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function _u($u){var Ru={};return ownKeys($u).forEach(function(Ou){Ru[Ou]=getDescriptor($u,Ou)}),Ru};function _defineProperties(_u,$u){for(var Ru=0;Ru<$u.length;Ru++){var Ou=$u[Ru];Ou.enumerable=Ou.enumerable||!1,Ou.configurable=!0,"value"in Ou&&(Ou.writable=!0),Object.defineProperty(_u,Ou.key,Ou)}}function _createClass(_u,$u,Ru){return $u&&_defineProperties(_u.prototype,$u),Ru&&_defineProperties(_u,Ru),Object.defineProperty(_u,"prototype",{writable:!1}),_u}function _extends(){return _extends=Object.assign||function(_u){for(var $u=1;$u<arguments.length;$u++){var Ru=arguments[$u];for(var Ou in Ru)Object.prototype.hasOwnProperty.call(Ru,Ou)&&(_u[Ou]=Ru[Ou])}return _u},_extends.apply(this,arguments)}function _inheritsLoose(_u,$u){_u.prototype=Object.create($u.prototype),_u.prototype.constructor=_u,_setPrototypeOf(_u,$u)}function _setPrototypeOf(_u,$u){return _setPrototypeOf=Object.setPrototypeOf||function(Ou,Fu){return Ou.__proto__=Fu,Ou},_setPrototypeOf(_u,$u)}function _assertThisInitialized(_u){if(_u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _u}function _unsupportedIterableToArray(_u,$u){if(!!_u){if(typeof _u=="string")return _arrayLikeToArray(_u,$u);var Ru=Object.prototype.toString.call(_u).slice(8,-1);if(Ru==="Object"&&_u.constructor&&(Ru=_u.constructor.name),Ru==="Map"||Ru==="Set")return Array.from(_u);if(Ru==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ru))return _arrayLikeToArray(_u,$u)}}function _arrayLikeToArray(_u,$u){($u==null||$u>_u.length)&&($u=_u.length);for(var Ru=0,Ou=new Array($u);Ru<$u;Ru++)Ou[Ru]=_u[Ru];return Ou}function _createForOfIteratorHelperLoose(_u,$u){var Ru=typeof Symbol!="undefined"&&_u[Symbol.iterator]||_u["@@iterator"];if(Ru)return(Ru=Ru.call(_u)).next.bind(Ru);if(Array.isArray(_u)||(Ru=_unsupportedIterableToArray(_u))||$u&&_u&&typeof _u.length=="number"){Ru&&(_u=Ru);var Ou=0;return function(){return Ou>=_u.length?{done:!0}:{done:!1,value:_u[Ou++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(_u){function $u(Ru,Ou){storeAnnotation(Ru,Ou,_u)}return Object.assign($u,_u)}function storeAnnotation(_u,$u,Ru){hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),isOverride(Ru)||(_u[storedAnnotationsSymbol][$u]=Ru)}function collectStoredAnnotations(_u){return hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),_u[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function _u(Ru){Ru===void 0&&(Ru="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Ru}var $u=_u.prototype;return $u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Ou){return Ou()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Ou){return Ou()})},$u.reportObserved=function(){return reportObserved(this)},$u.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},$u.toString=function(){return this.name_},_u}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(_u,$u,Ru){$u===void 0&&($u=noop),Ru===void 0&&(Ru=noop);var Ou=new Atom(_u);return $u!==noop&&onBecomeObserved(Ou,$u),Ru!==noop&&onBecomeUnobserved(Ou,Ru),Ou}function identityComparer(_u,$u){return _u===$u}function structuralComparer(_u,$u){return deepEqual(_u,$u)}function shallowComparer(_u,$u){return deepEqual(_u,$u,1)}function defaultComparer(_u,$u){return Object.is?Object.is(_u,$u):_u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(_u,$u,Ru){return isObservable(_u)?_u:Array.isArray(_u)?observable.array(_u,{name:Ru}):isPlainObject(_u)?observable.object(_u,void 0,{name:Ru}):isES6Map(_u)?observable.map(_u,{name:Ru}):isES6Set(_u)?observable.set(_u,{name:Ru}):typeof _u=="function"&&!isAction(_u)&&!isFlow(_u)?isGenerator(_u)?flow(_u):autoAction(Ru,_u):_u}function shallowEnhancer(_u,$u,Ru){if(_u==null||isObservableObject(_u)||isObservableArray(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(Array.isArray(_u))return observable.array(_u,{name:Ru,deep:!1});if(isPlainObject(_u))return observable.object(_u,void 0,{name:Ru,deep:!1});if(isES6Map(_u))return observable.map(_u,{name:Ru,deep:!1});if(isES6Set(_u))return observable.set(_u,{name:Ru,deep:!1})}function referenceEnhancer(_u){return _u}function refStructEnhancer(_u,$u){return deepEqual(_u,$u)?$u:_u}var OVERRIDE="override";function isOverride(_u){return _u.annotationType_===OVERRIDE}function createActionAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$1,extend_:extend_$1}}function make_$1(_u,$u,Ru,Ou){var Fu;if((Fu=this.options_)!=null&&Fu.bound)return this.extend_(_u,$u,Ru,!1)===null?0:1;if(Ou===_u.target_)return this.extend_(_u,$u,Ru,!1)===null?0:2;if(isAction(Ru.value))return 1;var Nu=createActionDescriptor(_u,this,$u,Ru,!1);return defineProperty(Ou,$u,Nu),2}function extend_$1(_u,$u,Ru,Ou){var Fu=createActionDescriptor(_u,this,$u,Ru);return _u.defineProperty_($u,Fu,Ou)}function assertActionDescriptor(_u,$u,Ru,Ou){$u.annotationType_,Ou.value}function createActionDescriptor(_u,$u,Ru,Ou,Fu){var Nu,Vu,Gu,Uu,Hu,Wu,Qu;Fu===void 0&&(Fu=globalState.safeDescriptors),assertActionDescriptor(_u,$u,Ru,Ou);var qu=Ou.value;if((Nu=$u.options_)!=null&&Nu.bound){var Ku;qu=qu.bind((Ku=_u.proxy_)!=null?Ku:_u.target_)}return{value:createAction((Vu=(Gu=$u.options_)==null?void 0:Gu.name)!=null?Vu:Ru.toString(),qu,(Uu=(Hu=$u.options_)==null?void 0:Hu.autoAction)!=null?Uu:!1,(Wu=$u.options_)!=null&&Wu.bound?(Qu=_u.proxy_)!=null?Qu:_u.target_:void 0),configurable:Fu?_u.isPlainObject_:!0,enumerable:!1,writable:!Fu}}function createFlowAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$2,extend_:extend_$2}}function make_$2(_u,$u,Ru,Ou){var Fu;if(Ou===_u.target_)return this.extend_(_u,$u,Ru,!1)===null?0:2;if((Fu=this.options_)!=null&&Fu.bound&&(!hasProp(_u.target_,$u)||!isFlow(_u.target_[$u]))&&this.extend_(_u,$u,Ru,!1)===null)return 0;if(isFlow(Ru.value))return 1;var Nu=createFlowDescriptor(_u,this,$u,Ru,!1,!1);return defineProperty(Ou,$u,Nu),2}function extend_$2(_u,$u,Ru,Ou){var Fu,Nu=createFlowDescriptor(_u,this,$u,Ru,(Fu=this.options_)==null?void 0:Fu.bound);return _u.defineProperty_($u,Nu,Ou)}function assertFlowDescriptor(_u,$u,Ru,Ou){$u.annotationType_,Ou.value}function createFlowDescriptor(_u,$u,Ru,Ou,Fu,Nu){Nu===void 0&&(Nu=globalState.safeDescriptors),assertFlowDescriptor(_u,$u,Ru,Ou);var Vu=Ou.value;if(isFlow(Vu)||(Vu=flow(Vu)),Fu){var Gu;Vu=Vu.bind((Gu=_u.proxy_)!=null?Gu:_u.target_),Vu.isMobXFlow=!0}return{value:Vu,configurable:Nu?_u.isPlainObject_:!0,enumerable:!1,writable:!Nu}}function createComputedAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$3,extend_:extend_$3}}function make_$3(_u,$u,Ru){return this.extend_(_u,$u,Ru,!1)===null?0:1}function extend_$3(_u,$u,Ru,Ou){return assertComputedDescriptor(_u,this,$u,Ru),_u.defineComputedProperty_($u,_extends({},this.options_,{get:Ru.get,set:Ru.set}),Ou)}function assertComputedDescriptor(_u,$u,Ru,Ou){$u.annotationType_,Ou.get}function createObservableAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$4,extend_:extend_$4}}function make_$4(_u,$u,Ru){return this.extend_(_u,$u,Ru,!1)===null?0:1}function extend_$4(_u,$u,Ru,Ou){var Fu,Nu;return assertObservableDescriptor(_u,this),_u.defineObservableProperty_($u,Ru.value,(Fu=(Nu=this.options_)==null?void 0:Nu.enhancer)!=null?Fu:deepEnhancer,Ou)}function assertObservableDescriptor(_u,$u,Ru,Ou){$u.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(_u){return{annotationType_:AUTO,options_:_u,make_:make_$5,extend_:extend_$5}}function make_$5(_u,$u,Ru,Ou){var Fu,Nu;if(Ru.get)return computed.make_(_u,$u,Ru,Ou);if(Ru.set){var Vu=createAction($u.toString(),Ru.set);return Ou===_u.target_?_u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:Vu})===null?0:2:(defineProperty(Ou,$u,{configurable:!0,set:Vu}),2)}if(Ou!==_u.target_&&typeof Ru.value=="function"){var Gu;if(isGenerator(Ru.value)){var Uu,Hu=(Uu=this.options_)!=null&&Uu.autoBind?flow.bound:flow;return Hu.make_(_u,$u,Ru,Ou)}var Wu=(Gu=this.options_)!=null&&Gu.autoBind?autoAction.bound:autoAction;return Wu.make_(_u,$u,Ru,Ou)}var Qu=((Fu=this.options_)==null?void 0:Fu.deep)===!1?observable.ref:observable;if(typeof Ru.value=="function"&&(Nu=this.options_)!=null&&Nu.autoBind){var qu;Ru.value=Ru.value.bind((qu=_u.proxy_)!=null?qu:_u.target_)}return Qu.make_(_u,$u,Ru,Ou)}function extend_$5(_u,$u,Ru,Ou){var Fu,Nu;if(Ru.get)return computed.extend_(_u,$u,Ru,Ou);if(Ru.set)return _u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:createAction($u.toString(),Ru.set)},Ou);if(typeof Ru.value=="function"&&(Fu=this.options_)!=null&&Fu.autoBind){var Vu;Ru.value=Ru.value.bind((Vu=_u.proxy_)!=null?Vu:_u.target_)}var Gu=((Nu=this.options_)==null?void 0:Nu.deep)===!1?observable.ref:observable;return Gu.extend_(_u,$u,Ru,Ou)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(_u){return _u||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(_u){return _u.deep===!0?deepEnhancer:_u.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(_u.defaultDecorator)}function getAnnotationFromOptions(_u){var $u;return _u?($u=_u.defaultDecorator)!=null?$u:createAutoAnnotation(_u):void 0}function getEnhancerFromAnnotation(_u){var $u,Ru;return _u&&($u=(Ru=_u.options_)==null?void 0:Ru.enhancer)!=null?$u:deepEnhancer}function createObservable(_u,$u,Ru){if(isStringish($u)){storeAnnotation(_u,$u,observableAnnotation);return}return isObservable(_u)?_u:isPlainObject(_u)?observable.object(_u,$u,Ru):Array.isArray(_u)?observable.array(_u,$u):isES6Map(_u)?observable.map(_u,$u):isES6Set(_u)?observable.set(_u,$u):typeof _u=="object"&&_u!==null?_u:observable.box(_u,$u)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function _u($u,Ru){var Ou=asCreateObservableOptions(Ru);return new ObservableValue($u,getEnhancerFromOptions(Ou),Ou.name,!0,Ou.equals)},array:function _u($u,Ru){var Ou=asCreateObservableOptions(Ru);return(globalState.useProxies===!1||Ou.proxy===!1?createLegacyArray:createObservableArray)($u,getEnhancerFromOptions(Ou),Ou.name)},map:function _u($u,Ru){var Ou=asCreateObservableOptions(Ru);return new ObservableMap($u,getEnhancerFromOptions(Ou),Ou.name)},set:function _u($u,Ru){var Ou=asCreateObservableOptions(Ru);return new ObservableSet($u,getEnhancerFromOptions(Ou),Ou.name)},object:function _u($u,Ru,Ou){return extendObservable(globalState.useProxies===!1||(Ou==null?void 0:Ou.proxy)===!1?asObservableObject({},Ou):asDynamicObservableObject({},Ou),$u,Ru)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function _u($u,Ru){if(isStringish(Ru))return storeAnnotation($u,Ru,computedAnnotation);if(isPlainObject($u))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,$u));var Ou=isPlainObject(Ru)?Ru:{};return Ou.get=$u,Ou.name||(Ou.name=$u.name||""),new ComputedValue(Ou)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(_u,$u,Ru,Ou){Ru===void 0&&(Ru=!1);function Fu(){return executeAction(_u,Ru,$u,Ou||this,arguments)}return Fu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=_u,Object.defineProperty(Fu,"name",tmpNameDescriptor)),Fu}function executeAction(_u,$u,Ru,Ou,Fu){var Nu=_startAction(_u,$u);try{return Ru.apply(Ou,Fu)}catch(Vu){throw Nu.error_=Vu,Vu}finally{_endAction(Nu)}}function _startAction(_u,$u,Ru,Ou){var Fu=!1,Nu=0,Vu=globalState.trackingDerivation,Gu=!$u||!Vu;startBatch();var Uu=globalState.allowStateChanges;Gu&&(untrackedStart(),Uu=allowStateChangesStart(!0));var Hu=allowStateReadsStart(!0),Wu={runAsAction_:Gu,prevDerivation_:Vu,prevAllowStateChanges_:Uu,prevAllowStateReads_:Hu,notifySpy_:Fu,startTime_:Nu,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Wu.actionId_,Wu}function _endAction(_u){currentActionId!==_u.actionId_&&die(30),currentActionId=_u.parentActionId_,_u.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(_u.prevAllowStateChanges_),allowStateReadsEnd(_u.prevAllowStateReads_),endBatch(),_u.runAsAction_&&untrackedEnd(_u.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(_u,$u){var Ru=allowStateChangesStart(_u);try{return $u()}finally{allowStateChangesEnd(Ru)}}function allowStateChangesStart(_u){var $u=globalState.allowStateChanges;return globalState.allowStateChanges=_u,$u}function allowStateChangesEnd(_u){globalState.allowStateChanges=_u}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(_u,$u){_inheritsLoose(Ru,_u);function Ru(Fu,Nu,Vu,Gu,Uu){var Hu;return Vu===void 0&&(Vu="ObservableValue"),Uu===void 0&&(Uu=comparer.default),Hu=_u.call(this,Vu)||this,Hu.enhancer=void 0,Hu.name_=void 0,Hu.equals=void 0,Hu.hasUnreportedChange_=!1,Hu.interceptors_=void 0,Hu.changeListeners_=void 0,Hu.value_=void 0,Hu.dehancer=void 0,Hu.enhancer=Nu,Hu.name_=Vu,Hu.equals=Uu,Hu.value_=Nu(Fu,void 0,Vu),Hu}var Ou=Ru.prototype;return Ou.dehanceValue=function(Nu){return this.dehancer!==void 0?this.dehancer(Nu):Nu},Ou.set=function(Nu){this.value_,Nu=this.prepareNewValue_(Nu),Nu!==globalState.UNCHANGED&&this.setNewValue_(Nu)},Ou.prepareNewValue_=function(Nu){if(hasInterceptors(this)){var Vu=interceptChange(this,{object:this,type:UPDATE,newValue:Nu});if(!Vu)return globalState.UNCHANGED;Nu=Vu.newValue}return Nu=this.enhancer(Nu,this.value_,this.name_),this.equals(this.value_,Nu)?globalState.UNCHANGED:Nu},Ou.setNewValue_=function(Nu){var Vu=this.value_;this.value_=Nu,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Nu,oldValue:Vu})},Ou.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Ou.intercept_=function(Nu){return registerInterceptor(this,Nu)},Ou.observe_=function(Nu,Vu){return Vu&&Nu({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Nu)},Ou.raw=function(){return this.value_},Ou.toJSON=function(){return this.get()},Ou.toString=function(){return this.name_+"["+this.value_+"]"},Ou.valueOf=function(){return toPrimitive(this.get())},Ou[$u]=function(){return this.valueOf()},Ru}(Atom,_Symbol$toPrimitive),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(_u){function $u(Ou){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Ou.get||die(31),this.derivation=Ou.get,this.name_=Ou.name||"ComputedValue",Ou.set&&(this.setter_=createAction("ComputedValue-setter",Ou.set)),this.equals_=Ou.equals||(Ou.compareStructural||Ou.struct?comparer.structural:comparer.default),this.scope_=Ou.context,this.requiresReaction_=Ou.requiresReaction,this.keepAlive_=!!Ou.keepAlive}var Ru=$u.prototype;return Ru.onBecomeStale_=function(){propagateMaybeChanged(this)},Ru.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Fu){return Fu()})},Ru.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Fu){return Fu()})},Ru.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Fu=globalState.trackingContext;this.keepAlive_&&!Fu&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Fu}var Nu=this.value_;if(isCaughtException(Nu))throw Nu.cause;return Nu},Ru.set=function(Fu){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Fu)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},Ru.trackAndCompute=function(){var Fu=this.value_,Nu=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Vu=this.computeValue_(!0),Gu=Nu||isCaughtException(Fu)||isCaughtException(Vu)||!this.equals_(Fu,Vu);return Gu&&(this.value_=Vu),Gu},Ru.computeValue_=function(Fu){this.isComputing_=!0;var Nu=allowStateChangesStart(!1),Vu;if(Fu)Vu=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Vu=this.derivation.call(this.scope_);else try{Vu=this.derivation.call(this.scope_)}catch(Gu){Vu=new CaughtException(Gu)}return allowStateChangesEnd(Nu),this.isComputing_=!1,Vu},Ru.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},Ru.observe_=function(Fu,Nu){var Vu=this,Gu=!0,Uu=void 0;return autorun(function(){var Hu=Vu.get();if(!Gu||Nu){var Wu=untrackedStart();Fu({observableKind:"computed",debugObjectName:Vu.name_,type:UPDATE,object:Vu,newValue:Hu,oldValue:Uu}),untrackedEnd(Wu)}Gu=!1,Uu=Hu})},Ru.warnAboutUntrackedRead_=function(){},Ru.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},Ru.valueOf=function(){return toPrimitive(this.get())},Ru[_u]=function(){return this.valueOf()},$u}(_Symbol$toPrimitive$1),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(_u){_u[_u.NOT_TRACKING_=-1]="NOT_TRACKING_",_u[_u.UP_TO_DATE_=0]="UP_TO_DATE_",_u[_u.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",_u[_u.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(_u){_u[_u.NONE=0]="NONE",_u[_u.LOG=1]="LOG",_u[_u.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function _u($u){this.cause=void 0,this.cause=$u};function isCaughtException(_u){return _u instanceof CaughtException}function shouldCompute(_u){switch(_u.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var $u=allowStateReadsStart(!0),Ru=untrackedStart(),Ou=_u.observing_,Fu=Ou.length,Nu=0;Nu<Fu;Nu++){var Vu=Ou[Nu];if(isComputedValue(Vu)){if(globalState.disableErrorBoundaries)Vu.get();else try{Vu.get()}catch{return untrackedEnd(Ru),allowStateReadsEnd($u),!0}if(_u.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Ru),allowStateReadsEnd($u),!0}}return changeDependenciesStateTo0(_u),untrackedEnd(Ru),allowStateReadsEnd($u),!1}}}function checkIfStateModificationsAreAllowed(_u){}function trackDerivedFunction(_u,$u,Ru){var Ou=allowStateReadsStart(!0);changeDependenciesStateTo0(_u),_u.newObserving_=new Array(_u.observing_.length+100),_u.unboundDepsCount_=0,_u.runId_=++globalState.runId;var Fu=globalState.trackingDerivation;globalState.trackingDerivation=_u,globalState.inBatch++;var Nu;if(globalState.disableErrorBoundaries===!0)Nu=$u.call(Ru);else try{Nu=$u.call(Ru)}catch(Vu){Nu=new CaughtException(Vu)}return globalState.inBatch--,globalState.trackingDerivation=Fu,bindDependencies(_u),allowStateReadsEnd(Ou),Nu}function bindDependencies(_u){for(var $u=_u.observing_,Ru=_u.observing_=_u.newObserving_,Ou=IDerivationState_.UP_TO_DATE_,Fu=0,Nu=_u.unboundDepsCount_,Vu=0;Vu<Nu;Vu++){var Gu=Ru[Vu];Gu.diffValue_===0&&(Gu.diffValue_=1,Fu!==Vu&&(Ru[Fu]=Gu),Fu++),Gu.dependenciesState_>Ou&&(Ou=Gu.dependenciesState_)}for(Ru.length=Fu,_u.newObserving_=null,Nu=$u.length;Nu--;){var Uu=$u[Nu];Uu.diffValue_===0&&removeObserver(Uu,_u),Uu.diffValue_=0}for(;Fu--;){var Hu=Ru[Fu];Hu.diffValue_===1&&(Hu.diffValue_=0,addObserver(Hu,_u))}Ou!==IDerivationState_.UP_TO_DATE_&&(_u.dependenciesState_=Ou,_u.onBecomeStale_())}function clearObserving(_u){var $u=_u.observing_;_u.observing_=[];for(var Ru=$u.length;Ru--;)removeObserver($u[Ru],_u);_u.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(_u){var $u=untrackedStart();try{return _u()}finally{untrackedEnd($u)}}function untrackedStart(){var _u=globalState.trackingDerivation;return globalState.trackingDerivation=null,_u}function untrackedEnd(_u){globalState.trackingDerivation=_u}function allowStateReadsStart(_u){var $u=globalState.allowStateReads;return globalState.allowStateReads=_u,$u}function allowStateReadsEnd(_u){globalState.allowStateReads=_u}function changeDependenciesStateTo0(_u){if(_u.dependenciesState_!==IDerivationState_.UP_TO_DATE_){_u.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var $u=_u.observing_,Ru=$u.length;Ru--;)$u[Ru].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function _u(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var _u=getGlobal();return _u.__mobxInstanceCount>0&&!_u.__mobxGlobals&&(canMergeGlobalState=!1),_u.__mobxGlobals&&_u.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?_u.__mobxGlobals?(_u.__mobxInstanceCount+=1,_u.__mobxGlobals.UNCHANGED||(_u.__mobxGlobals.UNCHANGED={}),_u.__mobxGlobals):(_u.__mobxInstanceCount=1,_u.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var _u=getGlobal();--_u.__mobxInstanceCount===0&&(_u.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(_u,$u){_u.observers_.add($u),_u.lowestObserverState_>$u.dependenciesState_&&(_u.lowestObserverState_=$u.dependenciesState_)}function removeObserver(_u,$u){_u.observers_.delete($u),_u.observers_.size===0&&queueForUnobservation(_u)}function queueForUnobservation(_u){_u.isPendingUnobservation_===!1&&(_u.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(_u))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var _u=globalState.pendingUnobservations,$u=0;$u<_u.length;$u++){var Ru=_u[$u];Ru.isPendingUnobservation_=!1,Ru.observers_.size===0&&(Ru.isBeingObserved_&&(Ru.isBeingObserved_=!1,Ru.onBUO()),Ru instanceof ComputedValue&&Ru.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(_u){var $u=globalState.trackingDerivation;return $u!==null?($u.runId_!==_u.lastAccessedBy_&&(_u.lastAccessedBy_=$u.runId_,$u.newObserving_[$u.unboundDepsCount_++]=_u,!_u.isBeingObserved_&&globalState.trackingContext&&(_u.isBeingObserved_=!0,_u.onBO())),!0):(_u.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(_u),!1)}function propagateChanged(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&$u.onBecomeStale_(),$u.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?$u.dependenciesState_=IDerivationState_.STALE_:$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(_u){_u.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&($u.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,$u.onBecomeStale_())}))}var Reaction=function(){function _u(Ru,Ou,Fu,Nu){Ru===void 0&&(Ru="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Ru,this.onInvalidate_=Ou,this.errorHandler_=Fu,this.requiresObservable_=Nu}var $u=_u.prototype;return $u.onBecomeStale_=function(){this.schedule_()},$u.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},$u.isScheduled=function(){return this.isScheduled_},$u.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Ou=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Fu){this.reportExceptionInDerivation_(Fu)}}globalState.trackingContext=Ou,endBatch()}},$u.track=function(Ou){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Fu=globalState.trackingContext;globalState.trackingContext=this;var Nu=trackDerivedFunction(this,Ou,void 0);globalState.trackingContext=Fu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Nu)&&this.reportExceptionInDerivation_(Nu.cause),endBatch()}},$u.reportExceptionInDerivation_=function(Ou){var Fu=this;if(this.errorHandler_){this.errorHandler_(Ou,this);return}if(globalState.disableErrorBoundaries)throw Ou;var Nu="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Nu,Ou),globalState.globalReactionErrorHandlers.forEach(function(Vu){return Vu(Ou,Fu)})},$u.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},$u.getDisposer_=function(){var Ou=this.dispose.bind(this);return Ou[$mobx]=this,Ou},$u.toString=function(){return"Reaction["+this.name_+"]"},$u.trace=function(Ou){Ou===void 0&&(Ou=!1),trace(this,Ou)},_u}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function _u($u){return $u()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var _u=globalState.pendingReactions,$u=0;_u.length>0;){++$u===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+_u[0]),_u.splice(0));for(var Ru=_u.splice(0),Ou=0,Fu=Ru.length;Ou<Fu;Ou++)Ru[Ou].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(_u){var $u=reactionScheduler;reactionScheduler=function(Ou){return _u(function(){return $u(Ou)})}}function isSpyEnabled(){return!1}function spyReport(_u){}function spyReportStart(_u){}function spyReportEnd(_u){}function spy(_u){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(_u){var $u=function(Ou,Fu){if(isFunction(Ou))return createAction(Ou.name||DEFAULT_ACTION_NAME,Ou,_u);if(isFunction(Fu))return createAction(Ou,Fu,_u);if(isStringish(Fu))return storeAnnotation(Ou,Fu,_u?autoActionAnnotation:actionAnnotation);if(isStringish(Ou))return createDecoratorAnnotation(createActionAnnotation(_u?AUTOACTION:ACTION,{name:Ou,autoAction:_u}))};return $u}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(_u){return executeAction(_u.name||DEFAULT_ACTION_NAME,!1,_u,this,void 0)}function isAction(_u){return isFunction(_u)&&_u.isMobxAction===!0}function autorun(_u,$u){var Ru,Ou;$u===void 0&&($u=EMPTY_OBJECT);var Fu=(Ru=(Ou=$u)==null?void 0:Ou.name)!=null?Ru:"Autorun",Nu=!$u.scheduler&&!$u.delay,Vu;if(Nu)Vu=new Reaction(Fu,function(){this.track(Hu)},$u.onError,$u.requiresObservable);else{var Gu=createSchedulerFromOptions($u),Uu=!1;Vu=new Reaction(Fu,function(){Uu||(Uu=!0,Gu(function(){Uu=!1,Vu.isDisposed_||Vu.track(Hu)}))},$u.onError,$u.requiresObservable)}function Hu(){_u(Vu)}return Vu.schedule_(),Vu.getDisposer_()}var run=function _u($u){return $u()};function createSchedulerFromOptions(_u){return _u.scheduler?_u.scheduler:_u.delay?function($u){return setTimeout($u,_u.delay)}:run}function reaction(_u,$u,Ru){var Ou;Ru===void 0&&(Ru=EMPTY_OBJECT);var Fu=(Ou=Ru.name)!=null?Ou:"Reaction",Nu=action(Fu,Ru.onError?wrapErrorHandler(Ru.onError,$u):$u),Vu=!Ru.scheduler&&!Ru.delay,Gu=createSchedulerFromOptions(Ru),Uu=!0,Hu=!1,Wu,Qu,qu=Ru.compareStructural?comparer.structural:Ru.equals||comparer.default,Ku=new Reaction(Fu,function(){Uu||Vu?Yu():Hu||(Hu=!0,Gu(Yu))},Ru.onError,Ru.requiresObservable);function Yu(){if(Hu=!1,!Ku.isDisposed_){var _c=!1;Ku.track(function(){var Ju=allowStateChanges(!1,function(){return _u(Ku)});_c=Uu||!qu(Wu,Ju),Qu=Wu,Wu=Ju}),(Uu&&Ru.fireImmediately||!Uu&&_c)&&Nu(Wu,Qu,Ku),Uu=!1}}return Ku.schedule_(),Ku.getDisposer_()}function wrapErrorHandler(_u,$u){return function(){try{return $u.apply(this,arguments)}catch(Ru){_u.call(this,Ru)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(_u,$u,Ru){return interceptHook(ON_BECOME_OBSERVED,_u,$u,Ru)}function onBecomeUnobserved(_u,$u,Ru){return interceptHook(ON_BECOME_UNOBSERVED,_u,$u,Ru)}function interceptHook(_u,$u,Ru,Ou){var Fu=typeof Ou=="function"?getAtom($u,Ru):getAtom($u),Nu=isFunction(Ou)?Ou:Ru,Vu=_u+"L";return Fu[Vu]?Fu[Vu].add(Nu):Fu[Vu]=new Set([Nu]),function(){var Gu=Fu[Vu];Gu&&(Gu.delete(Nu),Gu.size===0&&delete Fu[Vu])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(_u){_u.isolateGlobalState===!0&&isolateGlobalState();var $u=_u.useProxies,Ru=_u.enforceActions;if($u!==void 0&&(globalState.useProxies=$u===ALWAYS?!0:$u===NEVER?!1:typeof Proxy!="undefined"),$u==="ifavailable"&&(globalState.verifyProxies=!0),Ru!==void 0){var Ou=Ru===ALWAYS?ALWAYS:Ru===OBSERVED;globalState.enforceActions=Ou,globalState.allowStateChanges=!(Ou===!0||Ou===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Fu){Fu in _u&&(globalState[Fu]=!!_u[Fu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,_u.reactionScheduler&&setReactionScheduler(_u.reactionScheduler)}function extendObservable(_u,$u,Ru,Ou){var Fu=getOwnPropertyDescriptors($u),Nu=asObservableObject(_u,Ou)[$mobx];startBatch();try{ownKeys(Fu).forEach(function(Vu){Nu.extend_(Vu,Fu[Vu],Ru&&Vu in Ru?Ru[Vu]:!0)})}finally{endBatch()}return _u}function getDependencyTree(_u,$u){return nodeToDependencyTree(getAtom(_u,$u))}function nodeToDependencyTree(_u){var $u={name:_u.name_};return _u.observing_&&_u.observing_.length>0&&($u.dependencies=unique(_u.observing_).map(nodeToDependencyTree)),$u}function unique(_u){return Array.from(new Set(_u))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function _u($u,Ru){if(isStringish(Ru))return storeAnnotation($u,Ru,flowAnnotation);var Ou=$u,Fu=Ou.name||"<unnamed flow>",Nu=function(){var Gu=this,Uu=arguments,Hu=++generatorId,Wu=action(Fu+" - runid: "+Hu+" - init",Ou).apply(Gu,Uu),Qu,qu=void 0,Ku=new Promise(function(Yu,_c){var Ju=0;Qu=_c;function Xu(_h){qu=void 0;var ep;try{ep=action(Fu+" - runid: "+Hu+" - yield "+Ju++,Wu.next).call(Wu,_h)}catch(np){return _c(np)}Xc(ep)}function Zu(_h){qu=void 0;var ep;try{ep=action(Fu+" - runid: "+Hu+" - yield "+Ju++,Wu.throw).call(Wu,_h)}catch(np){return _c(np)}Xc(ep)}function Xc(_h){if(isFunction(_h==null?void 0:_h.then)){_h.then(Xc,_c);return}return _h.done?Yu(_h.value):(qu=Promise.resolve(_h.value),qu.then(Xu,Zu))}Xu(void 0)});return Ku.cancel=action(Fu+" - runid: "+Hu+" - cancel",function(){try{qu&&cancelPromise(qu);var Yu=Wu.return(void 0),_c=Promise.resolve(Yu.value);_c.then(noop,noop),cancelPromise(_c),Qu(new FlowCancellationError)}catch(Ju){Qu(Ju)}}),Ku};return Nu.isMobXFlow=!0,Nu},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(_u){isFunction(_u.cancel)&&_u.cancel()}function isFlow(_u){return(_u==null?void 0:_u.isMobXFlow)===!0}function _isObservable(_u,$u){return _u?$u!==void 0?isObservableObject(_u)?_u[$mobx].values_.has($u):!1:isObservableObject(_u)||!!_u[$mobx]||isAtom(_u)||isReaction(_u)||isComputedValue(_u):!1}function isObservable(_u){return _isObservable(_u)}function trace(){die("trace() is not available in production builds");for(var _u=!1,$u=arguments.length,Ru=new Array($u),Ou=0;Ou<$u;Ou++)Ru[Ou]=arguments[Ou];typeof Ru[Ru.length-1]=="boolean"&&(_u=Ru.pop());var Fu=getAtomFromArgs(Ru);if(!Fu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Fu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Fu.name_+"' tracing enabled"),Fu.isTracing_=_u?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(_u){switch(_u.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(_u[0]);case 2:return getAtom(_u[0],_u[1])}}function transaction(_u,$u){$u===void 0&&($u=void 0),startBatch();try{return _u.apply($u)}finally{endBatch()}}function getAdm(_u){return _u[$mobx]}var objectProxyTraps={has:function _u($u,Ru){return getAdm($u).has_(Ru)},get:function _u($u,Ru){return getAdm($u).get_(Ru)},set:function _u($u,Ru,Ou){var Fu;return isStringish(Ru)?(Fu=getAdm($u).set_(Ru,Ou,!0))!=null?Fu:!0:!1},deleteProperty:function _u($u,Ru){var Ou;return isStringish(Ru)?(Ou=getAdm($u).delete_(Ru,!0))!=null?Ou:!0:!1},defineProperty:function _u($u,Ru,Ou){var Fu;return(Fu=getAdm($u).defineProperty_(Ru,Ou))!=null?Fu:!0},ownKeys:function _u($u){return getAdm($u).ownKeys_()},preventExtensions:function _u($u){die(13)}};function asDynamicObservableObject(_u,$u){var Ru,Ou;return assertProxies(),_u=asObservableObject(_u,$u),(Ou=(Ru=_u[$mobx]).proxy_)!=null?Ou:Ru.proxy_=new Proxy(_u,objectProxyTraps)}function hasInterceptors(_u){return _u.interceptors_!==void 0&&_u.interceptors_.length>0}function registerInterceptor(_u,$u){var Ru=_u.interceptors_||(_u.interceptors_=[]);return Ru.push($u),once(function(){var Ou=Ru.indexOf($u);Ou!==-1&&Ru.splice(Ou,1)})}function interceptChange(_u,$u){var Ru=untrackedStart();try{for(var Ou=[].concat(_u.interceptors_||[]),Fu=0,Nu=Ou.length;Fu<Nu&&($u=Ou[Fu]($u),$u&&!$u.type&&die(14),!!$u);Fu++);return $u}finally{untrackedEnd(Ru)}}function hasListeners(_u){return _u.changeListeners_!==void 0&&_u.changeListeners_.length>0}function registerListener(_u,$u){var Ru=_u.changeListeners_||(_u.changeListeners_=[]);return Ru.push($u),once(function(){var Ou=Ru.indexOf($u);Ou!==-1&&Ru.splice(Ou,1)})}function notifyListeners(_u,$u){var Ru=untrackedStart(),Ou=_u.changeListeners_;if(!!Ou){Ou=Ou.slice();for(var Fu=0,Nu=Ou.length;Fu<Nu;Fu++)Ou[Fu]($u);untrackedEnd(Ru)}}function makeObservable(_u,$u,Ru){var Ou=asObservableObject(_u,Ru)[$mobx];startBatch();try{var Fu;(Fu=$u)!=null||($u=collectStoredAnnotations(_u)),ownKeys($u).forEach(function(Nu){return Ou.make_(Nu,$u[Nu])})}finally{endBatch()}return _u}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function _u($u,Ru){var Ou=$u[$mobx];return Ru===$mobx?Ou:Ru==="length"?Ou.getArrayLength_():typeof Ru=="string"&&!isNaN(Ru)?Ou.get_(parseInt(Ru)):hasProp(arrayExtensions,Ru)?arrayExtensions[Ru]:$u[Ru]},set:function _u($u,Ru,Ou){var Fu=$u[$mobx];return Ru==="length"&&Fu.setArrayLength_(Ou),typeof Ru=="symbol"||isNaN(Ru)?$u[Ru]=Ou:Fu.set_(parseInt(Ru),Ou),!0},preventExtensions:function _u(){die(15)}},ObservableArrayAdministration=function(){function _u(Ru,Ou,Fu,Nu){Ru===void 0&&(Ru="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Fu,this.legacyMode_=Nu,this.atom_=new Atom(Ru),this.enhancer_=function(Vu,Gu){return Ou(Vu,Gu,"ObservableArray[..]")}}var $u=_u.prototype;return $u.dehanceValue_=function(Ou){return this.dehancer!==void 0?this.dehancer(Ou):Ou},$u.dehanceValues_=function(Ou){return this.dehancer!==void 0&&Ou.length>0?Ou.map(this.dehancer):Ou},$u.intercept_=function(Ou){return registerInterceptor(this,Ou)},$u.observe_=function(Ou,Fu){return Fu===void 0&&(Fu=!1),Fu&&Ou({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Ou)},$u.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},$u.setArrayLength_=function(Ou){(typeof Ou!="number"||isNaN(Ou)||Ou<0)&&die("Out of range: "+Ou);var Fu=this.values_.length;if(Ou!==Fu)if(Ou>Fu){for(var Nu=new Array(Ou-Fu),Vu=0;Vu<Ou-Fu;Vu++)Nu[Vu]=void 0;this.spliceWithArray_(Fu,0,Nu)}else this.spliceWithArray_(Ou,Fu-Ou)},$u.updateArrayLength_=function(Ou,Fu){Ou!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Fu,this.legacyMode_&&Fu>0&&reserveArrayBuffer(Ou+Fu+1)},$u.spliceWithArray_=function(Ou,Fu,Nu){var Vu=this;this.atom_;var Gu=this.values_.length;if(Ou===void 0?Ou=0:Ou>Gu?Ou=Gu:Ou<0&&(Ou=Math.max(0,Gu+Ou)),arguments.length===1?Fu=Gu-Ou:Fu==null?Fu=0:Fu=Math.max(0,Math.min(Fu,Gu-Ou)),Nu===void 0&&(Nu=EMPTY_ARRAY),hasInterceptors(this)){var Uu=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Ou,removedCount:Fu,added:Nu});if(!Uu)return EMPTY_ARRAY;Fu=Uu.removedCount,Nu=Uu.added}if(Nu=Nu.length===0?Nu:Nu.map(function(Qu){return Vu.enhancer_(Qu,void 0)}),this.legacyMode_){var Hu=Nu.length-Fu;this.updateArrayLength_(Gu,Hu)}var Wu=this.spliceItemsIntoValues_(Ou,Fu,Nu);return(Fu!==0||Nu.length!==0)&&this.notifyArraySplice_(Ou,Nu,Wu),this.dehanceValues_(Wu)},$u.spliceItemsIntoValues_=function(Ou,Fu,Nu){if(Nu.length<MAX_SPLICE_SIZE){var Vu;return(Vu=this.values_).splice.apply(Vu,[Ou,Fu].concat(Nu))}else{var Gu=this.values_.slice(Ou,Ou+Fu),Uu=this.values_.slice(Ou+Fu);this.values_.length+=Nu.length-Fu;for(var Hu=0;Hu<Nu.length;Hu++)this.values_[Ou+Hu]=Nu[Hu];for(var Wu=0;Wu<Uu.length;Wu++)this.values_[Ou+Nu.length+Wu]=Uu[Wu];return Gu}},$u.notifyArrayChildUpdate_=function(Ou,Fu,Nu){var Vu=!this.owned_&&isSpyEnabled(),Gu=hasListeners(this),Uu=Gu||Vu?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Ou,newValue:Fu,oldValue:Nu}:null;this.atom_.reportChanged(),Gu&&notifyListeners(this,Uu)},$u.notifyArraySplice_=function(Ou,Fu,Nu){var Vu=!this.owned_&&isSpyEnabled(),Gu=hasListeners(this),Uu=Gu||Vu?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Ou,removed:Nu,added:Fu,removedCount:Nu.length,addedCount:Fu.length}:null;this.atom_.reportChanged(),Gu&&notifyListeners(this,Uu)},$u.get_=function(Ou){if(Ou<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Ou]);console.warn("[mobx.array] Attempt to read an array index ("+Ou+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},$u.set_=function(Ou,Fu){var Nu=this.values_;if(Ou<Nu.length){this.atom_;var Vu=Nu[Ou];if(hasInterceptors(this)){var Gu=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Ou,newValue:Fu});if(!Gu)return;Fu=Gu.newValue}Fu=this.enhancer_(Fu,Vu);var Uu=Fu!==Vu;Uu&&(Nu[Ou]=Fu,this.notifyArrayChildUpdate_(Ou,Fu,Vu))}else Ou===Nu.length?this.spliceWithArray_(Ou,0,[Fu]):die(17,Ou,Nu.length)},_u}();function createObservableArray(_u,$u,Ru,Ou){Ru===void 0&&(Ru="ObservableArray"),Ou===void 0&&(Ou=!1),assertProxies();var Fu=new ObservableArrayAdministration(Ru,$u,Ou,!1);addHiddenFinalProp(Fu.values_,$mobx,Fu);var Nu=new Proxy(Fu.values_,arrayTraps);if(Fu.proxy_=Nu,_u&&_u.length){var Vu=allowStateChangesStart(!0);Fu.spliceWithArray_(0,0,_u),allowStateChangesEnd(Vu)}return Nu}var arrayExtensions={clear:function _u(){return this.splice(0)},replace:function _u($u){var Ru=this[$mobx];return Ru.spliceWithArray_(0,Ru.values_.length,$u)},toJSON:function _u(){return this.slice()},splice:function _u($u,Ru){for(var Ou=arguments.length,Fu=new Array(Ou>2?Ou-2:0),Nu=2;Nu<Ou;Nu++)Fu[Nu-2]=arguments[Nu];var Vu=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Vu.spliceWithArray_($u);case 2:return Vu.spliceWithArray_($u,Ru)}return Vu.spliceWithArray_($u,Ru,Fu)},spliceWithArray:function _u($u,Ru,Ou){return this[$mobx].spliceWithArray_($u,Ru,Ou)},push:function _u(){for(var $u=this[$mobx],Ru=arguments.length,Ou=new Array(Ru),Fu=0;Fu<Ru;Fu++)Ou[Fu]=arguments[Fu];return $u.spliceWithArray_($u.values_.length,0,Ou),$u.values_.length},pop:function _u(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function _u(){return this.splice(0,1)[0]},unshift:function _u(){for(var $u=this[$mobx],Ru=arguments.length,Ou=new Array(Ru),Fu=0;Fu<Ru;Fu++)Ou[Fu]=arguments[Fu];return $u.spliceWithArray_(0,0,Ou),$u.values_.length},reverse:function _u(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function _u(){globalState.trackingDerivation&&die(37,"sort");var $u=this.slice();return $u.sort.apply($u,arguments),this.replace($u),this},remove:function _u($u){var Ru=this[$mobx],Ou=Ru.dehanceValues_(Ru.values_).indexOf($u);return Ou>-1?(this.splice(Ou,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(_u,$u){typeof Array.prototype[_u]=="function"&&(arrayExtensions[_u]=$u(_u))}function simpleFunc(_u){return function(){var $u=this[$mobx];$u.atom_.reportObserved();var Ru=$u.dehanceValues_($u.values_);return Ru[_u].apply(Ru,arguments)}}function mapLikeFunc(_u){return function($u,Ru){var Ou=this,Fu=this[$mobx];Fu.atom_.reportObserved();var Nu=Fu.dehanceValues_(Fu.values_);return Nu[_u](function(Vu,Gu){return $u.call(Ru,Vu,Gu,Ou)})}}function reduceLikeFunc(_u){return function(){var $u=this,Ru=this[$mobx];Ru.atom_.reportObserved();var Ou=Ru.dehanceValues_(Ru.values_),Fu=arguments[0];return arguments[0]=function(Nu,Vu,Gu){return Fu(Nu,Vu,Gu,$u)},Ou[_u].apply(Ou,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(_u){return isObject(_u)&&isObservableArrayAdministration(_u[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(_u,$u){function Ru(Fu,Nu,Vu){var Gu=this;Nu===void 0&&(Nu=deepEnhancer),Vu===void 0&&(Vu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Nu,this.name_=Vu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Gu.merge(Fu)})}var Ou=Ru.prototype;return Ou.has_=function(Nu){return this.data_.has(Nu)},Ou.has=function(Nu){var Vu=this;if(!globalState.trackingDerivation)return this.has_(Nu);var Gu=this.hasMap_.get(Nu);if(!Gu){var Uu=Gu=new ObservableValue(this.has_(Nu),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Nu,Uu),onBecomeUnobserved(Uu,function(){return Vu.hasMap_.delete(Nu)})}return Gu.get()},Ou.set=function(Nu,Vu){var Gu=this.has_(Nu);if(hasInterceptors(this)){var Uu=interceptChange(this,{type:Gu?UPDATE:ADD,object:this,newValue:Vu,name:Nu});if(!Uu)return this;Vu=Uu.newValue}return Gu?this.updateValue_(Nu,Vu):this.addValue_(Nu,Vu),this},Ou.delete=function(Nu){var Vu=this;if(this.keysAtom_,hasInterceptors(this)){var Gu=interceptChange(this,{type:DELETE,object:this,name:Nu});if(!Gu)return!1}if(this.has_(Nu)){var Uu=isSpyEnabled(),Hu=hasListeners(this),Wu=Hu||Uu?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Nu).value_,name:Nu}:null;return transaction(function(){var Qu;Vu.keysAtom_.reportChanged(),(Qu=Vu.hasMap_.get(Nu))==null||Qu.setNewValue_(!1);var qu=Vu.data_.get(Nu);qu.setNewValue_(void 0),Vu.data_.delete(Nu)}),Hu&&notifyListeners(this,Wu),!0}return!1},Ou.updateValue_=function(Nu,Vu){var Gu=this.data_.get(Nu);if(Vu=Gu.prepareNewValue_(Vu),Vu!==globalState.UNCHANGED){var Uu=isSpyEnabled(),Hu=hasListeners(this),Wu=Hu||Uu?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Gu.value_,name:Nu,newValue:Vu}:null;Gu.setNewValue_(Vu),Hu&&notifyListeners(this,Wu)}},Ou.addValue_=function(Nu,Vu){var Gu=this;this.keysAtom_,transaction(function(){var Qu,qu=new ObservableValue(Vu,Gu.enhancer_,"ObservableMap.key",!1);Gu.data_.set(Nu,qu),Vu=qu.value_,(Qu=Gu.hasMap_.get(Nu))==null||Qu.setNewValue_(!0),Gu.keysAtom_.reportChanged()});var Uu=isSpyEnabled(),Hu=hasListeners(this),Wu=Hu||Uu?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Nu,newValue:Vu}:null;Hu&&notifyListeners(this,Wu)},Ou.get=function(Nu){return this.has(Nu)?this.dehanceValue_(this.data_.get(Nu).get()):this.dehanceValue_(void 0)},Ou.dehanceValue_=function(Nu){return this.dehancer!==void 0?this.dehancer(Nu):Nu},Ou.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},Ou.values=function(){var Nu=this,Vu=this.keys();return makeIterable({next:function(){var Uu=Vu.next(),Hu=Uu.done,Wu=Uu.value;return{done:Hu,value:Hu?void 0:Nu.get(Wu)}}})},Ou.entries=function(){var Nu=this,Vu=this.keys();return makeIterable({next:function(){var Uu=Vu.next(),Hu=Uu.done,Wu=Uu.value;return{done:Hu,value:Hu?void 0:[Wu,Nu.get(Wu)]}}})},Ou[_u]=function(){return this.entries()},Ou.forEach=function(Nu,Vu){for(var Gu=_createForOfIteratorHelperLoose(this),Uu;!(Uu=Gu()).done;){var Hu=Uu.value,Wu=Hu[0],Qu=Hu[1];Nu.call(Vu,Qu,Wu,this)}},Ou.merge=function(Nu){var Vu=this;return isObservableMap(Nu)&&(Nu=new Map(Nu)),transaction(function(){isPlainObject(Nu)?getPlainObjectKeys(Nu).forEach(function(Gu){return Vu.set(Gu,Nu[Gu])}):Array.isArray(Nu)?Nu.forEach(function(Gu){var Uu=Gu[0],Hu=Gu[1];return Vu.set(Uu,Hu)}):isES6Map(Nu)?(Nu.constructor!==Map&&die(19,Nu),Nu.forEach(function(Gu,Uu){return Vu.set(Uu,Gu)})):Nu!=null&&die(20,Nu)}),this},Ou.clear=function(){var Nu=this;transaction(function(){untracked(function(){for(var Vu=_createForOfIteratorHelperLoose(Nu.keys()),Gu;!(Gu=Vu()).done;){var Uu=Gu.value;Nu.delete(Uu)}})})},Ou.replace=function(Nu){var Vu=this;return transaction(function(){for(var Gu=convertToMap(Nu),Uu=new Map,Hu=!1,Wu=_createForOfIteratorHelperLoose(Vu.data_.keys()),Qu;!(Qu=Wu()).done;){var qu=Qu.value;if(!Gu.has(qu)){var Ku=Vu.delete(qu);if(Ku)Hu=!0;else{var Yu=Vu.data_.get(qu);Uu.set(qu,Yu)}}}for(var _c=_createForOfIteratorHelperLoose(Gu.entries()),Ju;!(Ju=_c()).done;){var Xu=Ju.value,Zu=Xu[0],Xc=Xu[1],_h=Vu.data_.has(Zu);if(Vu.set(Zu,Xc),Vu.data_.has(Zu)){var ep=Vu.data_.get(Zu);Uu.set(Zu,ep),_h||(Hu=!0)}}if(!Hu)if(Vu.data_.size!==Uu.size)Vu.keysAtom_.reportChanged();else for(var np=Vu.data_.keys(),ap=Uu.keys(),lp=np.next(),up=ap.next();!lp.done;){if(lp.value!==up.value){Vu.keysAtom_.reportChanged();break}lp=np.next(),up=ap.next()}Vu.data_=Uu}),this},Ou.toString=function(){return"[object ObservableMap]"},Ou.toJSON=function(){return Array.from(this)},Ou.observe_=function(Nu,Vu){return registerListener(this,Nu)},Ou.intercept_=function(Nu){return registerInterceptor(this,Nu)},_createClass(Ru,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:$u,get:function(){return"Map"}}]),Ru}(_Symbol$iterator,_Symbol$toStringTag),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(_u){if(isES6Map(_u)||isObservableMap(_u))return _u;if(Array.isArray(_u))return new Map(_u);if(isPlainObject(_u)){var $u=new Map;for(var Ru in _u)$u.set(Ru,_u[Ru]);return $u}else return die(21,_u)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(_u,$u){function Ru(Fu,Nu,Vu){Nu===void 0&&(Nu=deepEnhancer),Vu===void 0&&(Vu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Vu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Gu,Uu){return Nu(Gu,Uu,Vu)},Fu&&this.replace(Fu)}var Ou=Ru.prototype;return Ou.dehanceValue_=function(Nu){return this.dehancer!==void 0?this.dehancer(Nu):Nu},Ou.clear=function(){var Nu=this;transaction(function(){untracked(function(){for(var Vu=_createForOfIteratorHelperLoose(Nu.data_.values()),Gu;!(Gu=Vu()).done;){var Uu=Gu.value;Nu.delete(Uu)}})})},Ou.forEach=function(Nu,Vu){for(var Gu=_createForOfIteratorHelperLoose(this),Uu;!(Uu=Gu()).done;){var Hu=Uu.value;Nu.call(Vu,Hu,Hu,this)}},Ou.add=function(Nu){var Vu=this;if(this.atom_,hasInterceptors(this)){var Gu=interceptChange(this,{type:ADD,object:this,newValue:Nu});if(!Gu)return this}if(!this.has(Nu)){transaction(function(){Vu.data_.add(Vu.enhancer_(Nu,void 0)),Vu.atom_.reportChanged()});var Uu=!1,Hu=hasListeners(this),Wu=Hu||Uu?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Nu}:null;Hu&&notifyListeners(this,Wu)}return this},Ou.delete=function(Nu){var Vu=this;if(hasInterceptors(this)){var Gu=interceptChange(this,{type:DELETE,object:this,oldValue:Nu});if(!Gu)return!1}if(this.has(Nu)){var Uu=!1,Hu=hasListeners(this),Wu=Hu||Uu?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Nu}:null;return transaction(function(){Vu.atom_.reportChanged(),Vu.data_.delete(Nu)}),Hu&&notifyListeners(this,Wu),!0}return!1},Ou.has=function(Nu){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Nu))},Ou.entries=function(){var Nu=0,Vu=Array.from(this.keys()),Gu=Array.from(this.values());return makeIterable({next:function(){var Hu=Nu;return Nu+=1,Hu<Gu.length?{value:[Vu[Hu],Gu[Hu]],done:!1}:{done:!0}}})},Ou.keys=function(){return this.values()},Ou.values=function(){this.atom_.reportObserved();var Nu=this,Vu=0,Gu=Array.from(this.data_.values());return makeIterable({next:function(){return Vu<Gu.length?{value:Nu.dehanceValue_(Gu[Vu++]),done:!1}:{done:!0}}})},Ou.replace=function(Nu){var Vu=this;return isObservableSet(Nu)&&(Nu=new Set(Nu)),transaction(function(){Array.isArray(Nu)?(Vu.clear(),Nu.forEach(function(Gu){return Vu.add(Gu)})):isES6Set(Nu)?(Vu.clear(),Nu.forEach(function(Gu){return Vu.add(Gu)})):Nu!=null&&die("Cannot initialize set from "+Nu)}),this},Ou.observe_=function(Nu,Vu){return registerListener(this,Nu)},Ou.intercept_=function(Nu){return registerInterceptor(this,Nu)},Ou.toJSON=function(){return Array.from(this)},Ou.toString=function(){return"[object ObservableSet]"},Ou[_u]=function(){return this.values()},_createClass(Ru,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:$u,get:function(){return"Set"}}]),Ru}(_Symbol$iterator$1,_Symbol$toStringTag$1),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function _u(Ru,Ou,Fu,Nu){Ou===void 0&&(Ou=new Map),Nu===void 0&&(Nu=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Ru,this.values_=Ou,this.name_=Fu,this.defaultAnnotation_=Nu,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var $u=_u.prototype;return $u.getObservablePropValue_=function(Ou){return this.values_.get(Ou).get()},$u.setObservablePropValue_=function(Ou,Fu){var Nu=this.values_.get(Ou);if(Nu instanceof ComputedValue)return Nu.set(Fu),!0;if(hasInterceptors(this)){var Vu=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Ou,newValue:Fu});if(!Vu)return null;Fu=Vu.newValue}if(Fu=Nu.prepareNewValue_(Fu),Fu!==globalState.UNCHANGED){var Gu=hasListeners(this),Uu=!1,Hu=Gu||Uu?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Nu.value_,name:Ou,newValue:Fu}:null;Nu.setNewValue_(Fu),Gu&&notifyListeners(this,Hu)}return!0},$u.get_=function(Ou){return globalState.trackingDerivation&&!hasProp(this.target_,Ou)&&this.has_(Ou),this.target_[Ou]},$u.set_=function(Ou,Fu,Nu){return Nu===void 0&&(Nu=!1),hasProp(this.target_,Ou)?this.values_.has(Ou)?this.setObservablePropValue_(Ou,Fu):Nu?Reflect.set(this.target_,Ou,Fu):(this.target_[Ou]=Fu,!0):this.extend_(Ou,{value:Fu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Nu)},$u.has_=function(Ou){if(!globalState.trackingDerivation)return Ou in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Fu=this.pendingKeys_.get(Ou);return Fu||(Fu=new ObservableValue(Ou in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Ou,Fu)),Fu.get()},$u.make_=function(Ou,Fu){if(Fu===!0&&(Fu=this.defaultAnnotation_),Fu!==!1){if(!(Ou in this.target_)){var Nu;if((Nu=this.target_[storedAnnotationsSymbol])!=null&&Nu[Ou])return;die(1,Fu.annotationType_,this.name_+"."+Ou.toString())}for(var Vu=this.target_;Vu&&Vu!==objectPrototype;){var Gu=getDescriptor(Vu,Ou);if(Gu){var Uu=Fu.make_(this,Ou,Gu,Vu);if(Uu===0)return;if(Uu===1)break}Vu=Object.getPrototypeOf(Vu)}recordAnnotationApplied(this,Fu,Ou)}},$u.extend_=function(Ou,Fu,Nu,Vu){if(Vu===void 0&&(Vu=!1),Nu===!0&&(Nu=this.defaultAnnotation_),Nu===!1)return this.defineProperty_(Ou,Fu,Vu);var Gu=Nu.extend_(this,Ou,Fu,Vu);return Gu&&recordAnnotationApplied(this,Nu,Ou),Gu},$u.defineProperty_=function(Ou,Fu,Nu){Nu===void 0&&(Nu=!1);try{startBatch();var Vu=this.delete_(Ou);if(!Vu)return Vu;if(hasInterceptors(this)){var Gu=interceptChange(this,{object:this.proxy_||this.target_,name:Ou,type:ADD,newValue:Fu.value});if(!Gu)return null;var Uu=Gu.newValue;Fu.value!==Uu&&(Fu=_extends({},Fu,{value:Uu}))}if(Nu){if(!Reflect.defineProperty(this.target_,Ou,Fu))return!1}else defineProperty(this.target_,Ou,Fu);this.notifyPropertyAddition_(Ou,Fu.value)}finally{endBatch()}return!0},$u.defineObservableProperty_=function(Ou,Fu,Nu,Vu){Vu===void 0&&(Vu=!1);try{startBatch();var Gu=this.delete_(Ou);if(!Gu)return Gu;if(hasInterceptors(this)){var Uu=interceptChange(this,{object:this.proxy_||this.target_,name:Ou,type:ADD,newValue:Fu});if(!Uu)return null;Fu=Uu.newValue}var Hu=getCachedObservablePropDescriptor(Ou),Wu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Hu.get,set:Hu.set};if(Vu){if(!Reflect.defineProperty(this.target_,Ou,Wu))return!1}else defineProperty(this.target_,Ou,Wu);var Qu=new ObservableValue(Fu,Nu,"ObservableObject.key",!1);this.values_.set(Ou,Qu),this.notifyPropertyAddition_(Ou,Qu.value_)}finally{endBatch()}return!0},$u.defineComputedProperty_=function(Ou,Fu,Nu){Nu===void 0&&(Nu=!1);try{startBatch();var Vu=this.delete_(Ou);if(!Vu)return Vu;if(hasInterceptors(this)){var Gu=interceptChange(this,{object:this.proxy_||this.target_,name:Ou,type:ADD,newValue:void 0});if(!Gu)return null}Fu.name||(Fu.name="ObservableObject.key"),Fu.context=this.proxy_||this.target_;var Uu=getCachedObservablePropDescriptor(Ou),Hu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Uu.get,set:Uu.set};if(Nu){if(!Reflect.defineProperty(this.target_,Ou,Hu))return!1}else defineProperty(this.target_,Ou,Hu);this.values_.set(Ou,new ComputedValue(Fu)),this.notifyPropertyAddition_(Ou,void 0)}finally{endBatch()}return!0},$u.delete_=function(Ou,Fu){if(Fu===void 0&&(Fu=!1),!hasProp(this.target_,Ou))return!0;if(hasInterceptors(this)){var Nu=interceptChange(this,{object:this.proxy_||this.target_,name:Ou,type:REMOVE});if(!Nu)return null}try{var Vu,Gu;startBatch();var Uu=hasListeners(this),Hu=!1,Wu=this.values_.get(Ou),Qu=void 0;if(!Wu&&(Uu||Hu)){var qu;Qu=(qu=getDescriptor(this.target_,Ou))==null?void 0:qu.value}if(Fu){if(!Reflect.deleteProperty(this.target_,Ou))return!1}else delete this.target_[Ou];if(Wu&&(this.values_.delete(Ou),Wu instanceof ObservableValue&&(Qu=Wu.value_),propagateChanged(Wu)),this.keysAtom_.reportChanged(),(Vu=this.pendingKeys_)==null||(Gu=Vu.get(Ou))==null||Gu.set(Ou in this.target_),Uu||Hu){var Ku={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qu,name:Ou};Uu&&notifyListeners(this,Ku)}}finally{endBatch()}return!0},$u.observe_=function(Ou,Fu){return registerListener(this,Ou)},$u.intercept_=function(Ou){return registerInterceptor(this,Ou)},$u.notifyPropertyAddition_=function(Ou,Fu){var Nu,Vu,Gu=hasListeners(this),Uu=!1;if(Gu||Uu){var Hu=Gu||Uu?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Ou,newValue:Fu}:null;Gu&&notifyListeners(this,Hu)}(Nu=this.pendingKeys_)==null||(Vu=Nu.get(Ou))==null||Vu.set(!0),this.keysAtom_.reportChanged()},$u.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},$u.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},_u}();function asObservableObject(_u,$u){var Ru;if(hasProp(_u,$mobx))return _u;var Ou=(Ru=$u==null?void 0:$u.name)!=null?Ru:"ObservableObject",Fu=new ObservableObjectAdministration(_u,new Map,String(Ou),getAnnotationFromOptions($u));return addHiddenProp(_u,$mobx,Fu),_u}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(_u){return descriptorCache[_u]||(descriptorCache[_u]={get:function(){return this[$mobx].getObservablePropValue_(_u)},set:function(Ru){return this[$mobx].setObservablePropValue_(_u,Ru)}})}function isObservableObject(_u){return isObject(_u)?isObservableObjectAdministration(_u[$mobx]):!1}function recordAnnotationApplied(_u,$u,Ru){var Ou;(Ou=_u.target_[storedAnnotationsSymbol])==null||delete Ou[Ru]}var OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function _u(){};function inherit(_u,$u){Object.setPrototypeOf?Object.setPrototypeOf(_u.prototype,$u):_u.prototype.__proto__!==void 0?_u.prototype.__proto__=$u:_u.prototype=$u}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(_u,$u,Ru){_inheritsLoose(Ou,_u);function Ou(Nu,Vu,Gu,Uu){var Hu;Gu===void 0&&(Gu="ObservableArray"),Uu===void 0&&(Uu=!1),Hu=_u.call(this)||this;var Wu=new ObservableArrayAdministration(Gu,Vu,Uu,!0);if(Wu.proxy_=_assertThisInitialized(Hu),addHiddenFinalProp(_assertThisInitialized(Hu),$mobx,Wu),Nu&&Nu.length){var Qu=allowStateChangesStart(!0);Hu.spliceWithArray(0,0,Nu),allowStateChangesEnd(Qu)}return Hu}var Fu=Ou.prototype;return Fu.concat=function(){this[$mobx].atom_.reportObserved();for(var Vu=arguments.length,Gu=new Array(Vu),Uu=0;Uu<Vu;Uu++)Gu[Uu]=arguments[Uu];return Array.prototype.concat.apply(this.slice(),Gu.map(function(Hu){return isObservableArray(Hu)?Hu.slice():Hu}))},Fu[Ru]=function(){var Nu=this,Vu=0;return makeIterable({next:function(){return Vu<Nu.length?{value:Nu[Vu++],done:!1}:{done:!0,value:void 0}}})},_createClass(Ou,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Vu){this[$mobx].setArrayLength_(Vu)}},{key:$u,get:function(){return"Array"}}]),Ou}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(_u){var $u=_u[0],Ru=_u[1];$u!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,$u,Ru)});function createArrayEntryDescriptor(_u){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(_u)},set:function(Ru){this[$mobx].set_(_u,Ru)}}}function createArrayBufferItem(_u){defineProperty(LegacyObservableArray.prototype,""+_u,createArrayEntryDescriptor(_u))}function reserveArrayBuffer(_u){if(_u>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var $u=OBSERVABLE_ARRAY_BUFFER_SIZE;$u<_u+100;$u++)createArrayBufferItem($u);OBSERVABLE_ARRAY_BUFFER_SIZE=_u}}reserveArrayBuffer(1e3);function createLegacyArray(_u,$u,Ru){return new LegacyObservableArray(_u,$u,Ru)}function getAtom(_u,$u){if(typeof _u=="object"&&_u!==null){if(isObservableArray(_u))return $u!==void 0&&die(23),_u[$mobx].atom_;if(isObservableSet(_u))return _u[$mobx];if(isObservableMap(_u)){if($u===void 0)return _u.keysAtom_;var Ru=_u.data_.get($u)||_u.hasMap_.get($u);return Ru||die(25,$u,getDebugName(_u)),Ru}if(isObservableObject(_u)){if(!$u)return die(26);var Ou=_u[$mobx].values_.get($u);return Ou||die(27,$u,getDebugName(_u)),Ou}if(isAtom(_u)||isComputedValue(_u)||isReaction(_u))return _u}else if(isFunction(_u)&&isReaction(_u[$mobx]))return _u[$mobx];die(28)}function getAdministration(_u,$u){if(_u||die(29),$u!==void 0)return getAdministration(getAtom(_u,$u));if(isAtom(_u)||isComputedValue(_u)||isReaction(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(_u[$mobx])return _u[$mobx];die(24,_u)}function getDebugName(_u,$u){var Ru;if($u!==void 0)Ru=getAtom(_u,$u);else{if(isAction(_u))return _u.name;isObservableObject(_u)||isObservableMap(_u)||isObservableSet(_u)?Ru=getAdministration(_u):Ru=getAtom(_u)}return Ru.name_}var toString=objectPrototype.toString;function deepEqual(_u,$u,Ru){return Ru===void 0&&(Ru=-1),eq(_u,$u,Ru)}function eq(_u,$u,Ru,Ou,Fu){if(_u===$u)return _u!==0||1/_u===1/$u;if(_u==null||$u==null)return!1;if(_u!==_u)return $u!==$u;var Nu=typeof _u;if(Nu!=="function"&&Nu!=="object"&&typeof $u!="object")return!1;var Vu=toString.call(_u);if(Vu!==toString.call($u))return!1;switch(Vu){case"[object RegExp]":case"[object String]":return""+_u==""+$u;case"[object Number]":return+_u!=+_u?+$u!=+$u:+_u==0?1/+_u===1/$u:+_u==+$u;case"[object Date]":case"[object Boolean]":return+_u==+$u;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(_u)===Symbol.valueOf.call($u);case"[object Map]":case"[object Set]":Ru>=0&&Ru++;break}_u=unwrap(_u),$u=unwrap($u);var Gu=Vu==="[object Array]";if(!Gu){if(typeof _u!="object"||typeof $u!="object")return!1;var Uu=_u.constructor,Hu=$u.constructor;if(Uu!==Hu&&!(isFunction(Uu)&&Uu instanceof Uu&&isFunction(Hu)&&Hu instanceof Hu)&&"constructor"in _u&&"constructor"in $u)return!1}if(Ru===0)return!1;Ru<0&&(Ru=-1),Ou=Ou||[],Fu=Fu||[];for(var Wu=Ou.length;Wu--;)if(Ou[Wu]===_u)return Fu[Wu]===$u;if(Ou.push(_u),Fu.push($u),Gu){if(Wu=_u.length,Wu!==$u.length)return!1;for(;Wu--;)if(!eq(_u[Wu],$u[Wu],Ru-1,Ou,Fu))return!1}else{var Qu=Object.keys(_u),qu;if(Wu=Qu.length,Object.keys($u).length!==Wu)return!1;for(;Wu--;)if(qu=Qu[Wu],!(hasProp($u,qu)&&eq(_u[qu],$u[qu],Ru-1,Ou,Fu)))return!1}return Ou.pop(),Fu.pop(),!0}function unwrap(_u){return isObservableArray(_u)?_u.slice():isES6Map(_u)||isObservableMap(_u)||isES6Set(_u)||isObservableSet(_u)?Array.from(_u.entries()):_u}function makeIterable(_u){return _u[Symbol.iterator]=getSelf,_u}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(_u){var $u=getGlobal();typeof $u[_u]=="undefined"&&die("MobX requires global '"+_u+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(_u){_u()}function observerBatching(_u){_u||(_u=defaultNoopBatch),configure({reactionScheduler:_u})}function printDebugValue(_u){return getDependencyTree(_u)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(_u){var $u={reaction:_u,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return $u}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(_u){var $u=new Map,Ru=1,Ou=new _u(function(Nu){var Vu=$u.get(Nu);Vu&&(Vu.reaction.dispose(),$u.delete(Nu))});return{addReactionToTrack:function(Fu,Nu,Vu){var Gu=Ru++;return Ou.register(Vu,Gu,Fu),Fu.current=createTrackingData(Nu),Fu.current.finalizationRegistryCleanupToken=Gu,$u.set(Gu,Fu.current),Fu.current},recordReactionAsCommitted:function(Fu){Ou.unregister(Fu),Fu.current&&Fu.current.finalizationRegistryCleanupToken&&$u.delete(Fu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(_u){var $u=typeof Symbol=="function"&&Symbol.iterator,Ru=$u&&_u[$u],Ou=0;if(Ru)return Ru.call(_u);if(_u&&typeof _u.length=="number")return{next:function(){return _u&&Ou>=_u.length&&(_u=void 0),{value:_u&&_u[Ou++],done:!_u}}};throw new TypeError($u?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var _u=new Set,$u;function Ru(){$u&&(clearTimeout($u),Gu())}function Ou(){var Uu,Hu;if(_u.size>0){try{for(var Wu=__values(_u),Qu=Wu.next();!Qu.done;Qu=Wu.next()){var qu=Qu.value,Ku=qu.current;Ku&&(Ku.reaction.dispose(),qu.current=null)}}catch(Yu){Uu={error:Yu}}finally{try{Qu&&!Qu.done&&(Hu=Wu.return)&&Hu.call(Wu)}finally{if(Uu)throw Uu.error}}_u.clear()}$u&&(clearTimeout($u),$u=void 0)}function Fu(){$u===void 0&&($u=setTimeout(Gu,CLEANUP_TIMER_LOOP_MILLIS))}function Nu(Uu){_u.add(Uu),Fu()}function Vu(Uu){_u.delete(Uu)}function Gu(){$u=void 0;var Uu=Date.now();_u.forEach(function(Hu){var Wu=Hu.current;Wu&&Uu>=Wu.cleanAt&&(Wu.reaction.dispose(),Hu.current=null,_u.delete(Hu))}),_u.size>0&&Fu()}return{addReactionToTrack:function(Uu,Hu,Wu){return Uu.current=createTrackingData(Hu),Nu(Uu),Uu.current},recordReactionAsCommitted:Vu,forceCleanupTimerToRunNowForTests:Ru,resetCleanupScheduleForTests:Ou}}var _a$1=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a$1.addReactionToTrack,recordReactionAsCommitted=_a$1.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(_u,$u){var Ru=typeof Symbol=="function"&&_u[Symbol.iterator];if(!Ru)return _u;var Ou=Ru.call(_u),Fu,Nu=[],Vu;try{for(;($u===void 0||$u-- >0)&&!(Fu=Ou.next()).done;)Nu.push(Fu.value)}catch(Gu){Vu={error:Gu}}finally{try{Fu&&!Fu.done&&(Ru=Ou.return)&&Ru.call(Ou)}finally{if(Vu)throw Vu.error}}return Nu};function observerComponentNameFor(_u){return"observer".concat(_u)}var ObjectToBeRetainedByReact=function(){function _u(){}return _u}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(_u,$u){$u===void 0&&($u="observed");var Ru=__read(React.useState(objectToBeRetainedByReactFactory),1),Ou=Ru[0],Fu=__read(React.useState(),2),Nu=Fu[1],Vu=function(){return Nu([])},Gu=React.useRef(null);if(!Gu.current)var Uu=new Reaction(observerComponentNameFor($u),function(){Hu.mounted?Vu():Hu.changedBeforeMount=!0}),Hu=addReactionToTrack(Gu,Uu,Ou);var Wu=Gu.current.reaction;React.useDebugValue(Wu,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Gu),Gu.current?(Gu.current.mounted=!0,Gu.current.changedBeforeMount&&(Gu.current.changedBeforeMount=!1,Vu())):(Gu.current={reaction:new Reaction(observerComponentNameFor($u),function(){Vu()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Vu()),function(){Gu.current.reaction.dispose(),Gu.current=null}},[]);var Qu,qu;if(Wu.track(function(){try{Qu=_u()}catch(Ku){qu=Ku}}),qu)throw qu;return Qu}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(_u){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(_u){return null}).$$typeof;function observer$1(_u,$u){var Ru;if(ReactMemoSymbol&&_u.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Ou=(Ru=$u==null?void 0:$u.forwardRef)!==null&&Ru!==void 0?Ru:!1,Fu=_u,Nu=_u.displayName||_u.name;if(ReactForwardRefSymbol&&_u.$$typeof===ReactForwardRefSymbol&&(Ou=!0,Fu=_u.render,typeof Fu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Vu=function(Gu,Uu){return useObserver(function(){return Fu(Gu,Uu)},Nu)};return Nu!==""&&(Vu.displayName=Nu),_u.contextTypes&&(Vu.contextTypes=_u.contextTypes),Ou&&(Vu=react$1.exports.forwardRef(Vu)),Vu=react$1.exports.memo(Vu),copyStaticProperties(_u,Vu),Vu}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(_u,$u){Object.keys(_u).forEach(function(Ru){hoistBlackList[Ru]||Object.defineProperty($u,Ru,Object.getOwnPropertyDescriptor(_u,Ru))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(_u){if(typeof Symbol=="function")return Symbol(_u);var $u="__$mobx-react "+_u+" ("+symbolId+")";return symbolId++,$u}var createdSymbols={};function newSymbol(_u){return createdSymbols[_u]||(createdSymbols[_u]=createSymbol(_u)),createdSymbols[_u]}function shallowEqual(_u,$u){if(is(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Ru=Object.keys(_u),Ou=Object.keys($u);if(Ru.length!==Ou.length)return!1;for(var Fu=0;Fu<Ru.length;Fu++)if(!Object.hasOwnProperty.call($u,Ru[Fu])||!is(_u[Ru[Fu]],$u[Ru[Fu]]))return!1;return!0}function is(_u,$u){return _u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}function setHiddenProp(_u,$u,Ru){Object.hasOwnProperty.call(_u,$u)?_u[$u]=Ru:Object.defineProperty(_u,$u,{enumerable:!1,configurable:!0,writable:!0,value:Ru})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(_u,$u){var Ru=_u[mobxMixins]=_u[mobxMixins]||{},Ou=Ru[$u]=Ru[$u]||{};return Ou.locks=Ou.locks||0,Ou.methods=Ou.methods||[],Ou}function wrapper(_u,$u){for(var Ru=this,Ou=arguments.length,Fu=new Array(Ou>2?Ou-2:0),Nu=2;Nu<Ou;Nu++)Fu[Nu-2]=arguments[Nu];$u.locks++;try{var Vu;return _u!=null&&(Vu=_u.apply(this,Fu)),Vu}finally{$u.locks--,$u.locks===0&&$u.methods.forEach(function(Gu){Gu.apply(Ru,Fu)})}}function wrapFunction(_u,$u){var Ru=function(){for(var Fu=arguments.length,Nu=new Array(Fu),Vu=0;Vu<Fu;Vu++)Nu[Vu]=arguments[Vu];wrapper.call.apply(wrapper,[this,_u,$u].concat(Nu))};return Ru}function patch(_u,$u,Ru){var Ou=getMixins(_u,$u);Ou.methods.indexOf(Ru)<0&&Ou.methods.push(Ru);var Fu=Object.getOwnPropertyDescriptor(_u,$u);if(!(Fu&&Fu[mobxPatchedDefinition])){var Nu=_u[$u],Vu=createDefinition(_u,$u,Fu?Fu.enumerable:void 0,Ou,Nu);Object.defineProperty(_u,$u,Vu)}}function createDefinition(_u,$u,Ru,Ou,Fu){var Nu,Vu=wrapFunction(Fu,Ou);return Nu={},Nu[mobxPatchedDefinition]=!0,Nu.get=function(){return Vu},Nu.set=function(Uu){if(this===_u)Vu=wrapFunction(Uu,Ou);else{var Hu=createDefinition(this,$u,Ru,Ou,Uu);Object.defineProperty(this,$u,Hu)}},Nu.configurable=!0,Nu.enumerable=Ru,Nu}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(_u){var $u=_u.prototype;if(_u[mobxObserverProperty]){var Ru=getDisplayName($u);console.warn("The provided component class ("+Ru+`) 
                has already been declared as an observer component.`)}else _u[mobxObserverProperty]=!0;if($u.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(_u.__proto__!==react$1.exports.PureComponent){if(!$u.shouldComponentUpdate)$u.shouldComponentUpdate=observerSCU;else if($u.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp($u,"props"),makeObservableProp($u,"state");var Ou=$u.render;if(typeof Ou!="function"){var Fu=getDisplayName($u);throw new Error("[mobx-react] class component ("+Fu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return $u.render=function(){return makeComponentReactive.call(this,Ou)},patch($u,"componentWillUnmount",function(){var Nu;if((Nu=this.render[mobxAdminProperty])==null||Nu.dispose(),this[mobxIsUnmounted]=!0,!this.render[mobxAdminProperty]){var Vu=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Vu+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),_u}function getDisplayName(_u){return _u.displayName||_u.name||_u.constructor&&(_u.constructor.displayName||_u.constructor.name)||"<component>"}function makeComponentReactive(_u){var $u=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Ru=getDisplayName(this),Ou=_u.bind(this),Fu=!1,Nu=new Reaction(Ru+".render()",function(){if(!Fu&&(Fu=!0,$u[mobxIsUnmounted]!==!0)){var Gu=!0;try{setHiddenProp($u,isForcingUpdateKey,!0),$u[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call($u),Gu=!1}finally{setHiddenProp($u,isForcingUpdateKey,!1),Gu&&Nu.dispose()}}});Nu.reactComponent=this,Vu[mobxAdminProperty]=Nu,this.render=Vu;function Vu(){Fu=!1;var Gu=void 0,Uu=void 0;if(Nu.track(function(){try{Uu=allowStateChanges(!1,Ou)}catch(Hu){Gu=Hu}}),Gu)throw Gu;return Uu}return Vu.call(this)}function observerSCU(_u,$u){return this.state!==$u?!0:!shallowEqual(this.props,_u)}function makeObservableProp(_u,$u){var Ru=newSymbol("reactProp_"+$u+"_valueHolder"),Ou=newSymbol("reactProp_"+$u+"_atomHolder");function Fu(){return this[Ou]||setHiddenProp(this,Ou,createAtom("reactive "+$u)),this[Ou]}Object.defineProperty(_u,$u,{configurable:!0,enumerable:!0,get:function(){var Vu=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Vu=allowStateReadsStart(!0)),Fu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Vu),this[Ru]},set:function(Vu){!this[isForcingUpdateKey]&&!shallowEqual(this[Ru],Vu)?(setHiddenProp(this,Ru,Vu),setHiddenProp(this,skipRenderKey,!0),Fu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Ru,Vu)}})}function observer(_u){return _u.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,_u)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,_u)?makeClassComponentObserver(_u):observer$1(_u)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function nextFrame(_u,$u=0){$u<=0?_requestAnimationFrame(_u):_requestAnimationFrame(()=>nextFrame(_u,$u-1))}function requestAnimationFrameInterval(_u,$u=60){let Ru=-1,Ou=0,Fu=-1;const Nu=1e3/$u;function Vu(Gu){Fu===-1&&(Fu=Gu),Ru=_requestAnimationFrame(Vu),!(Gu-Ou<Nu)&&(Ou=Gu,_u&&_u(Gu-Fu))}return Ru=_requestAnimationFrame(Vu),function(){_cancelAnimationFrame(Ru)}}function setElementDataset(_u,$u){_u&&Object.keys($u).forEach(Ru=>{const Ou=$u[Ru].toString();_u instanceof Element?_u.setAttribute(`data-${Ru}`,Ou):_u instanceof Document?_u.documentElement.setAttribute(`data-${Ru}`,Ou):_u instanceof HTMLElement?_u.dataset[Ru]=Ou:_u.setAttribute(`data-${Ru}`,Ou)})}function getFileExpandedName(_u){if(!_u)return"";const $u=_u.lastIndexOf(".");return _u.substring($u+1).toLowerCase()}function getMediaType(_u){const $u=getFileExpandedName(_u);return getMediaTypeByExpandedName($u)}function getMediaTypeByExpandedName(_u){return _u?/jpg|jpeg|png$/.test(_u)?"image":/mp3|wav$/.test(_u)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(_u)?"video":"unknown":"unknown"}class Controller extends Subscribe{constructor({five:Ru,container:Ou,configs:Fu}){super();_m(this,"five");_m(this,"configs");_m(this,"videoAgentScene");_m(this,"vreoUnit");_m(this,"stopInterval");_m(this,"playing",!1);_m(this,"ended",!1);_m(this,"loading",!1);_m(this,"containerSize",{width:0,height:0});_m(this,"appSize");_m(this,"container");_m(this,"waveAppearance",null);_m(this,"appearance",{waveStyle:"wave"});_m(this,"avatar",{});_m(this,"visible",!1);_m(this,"popUp",null);_m(this,"drawerConfig",null);this.configs=Fu,this.container=Ou,this.five=Ru,this.appSize=Fu.appSize,this.appearance=Fm(Fm({},this.appearance),Fu.appearance),makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Nu,Vu])=>{if(Vu===null){this.waveAppearance=null;return}if(Nu==="wave")switch(Vu){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Nu==="solid")switch(Vu){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Nu=>{if(!(Nu!=null&&Nu.width))return;const Vu=Nu.width,Gu=Nu.height,Uu=(()=>Vu<=500?"S":Vu<=1024?"M":Vu<=2048?"L":"XL")(),Hu=(()=>Gu>Vu?"portrait":"landscape")();setElementDataset(this.container,{size:Uu}),setElementDataset(this.container,{orientation:Hu})},{fireImmediately:!0}),reaction(()=>this.ended,Nu=>{Nu&&this.emit("paused",!0)}),reaction(()=>this.playing,Nu=>{this.ended||this.emit(Nu?"playing":"paused")})}get agentType(){var Ou,Fu;const Ru=getMediaType((Ou=this.videoAgentScene)==null?void 0:Ou.videoAgentMesh.videoUrl);return(Fu=this.avatar)!=null&&Fu.force?"avatar":Ru==="video"?"video":"none"}openPopUp(Ru){if(!Ru){this.popUp=null;return}this.popUp=Ru}setLoading(Ru){this.loading=Ru}setAvatar(Ru){this.avatar=Ru}setContainerSize(Ru,Ou){this.containerSize={width:Ru,height:Ou}}setVisible(Ru){this.visible=Ru}setPlaying(Ru){this.playing=Ru}setEnded(Ru){this.ended=Ru}setAppearance(Ru){this.appearance=Fm(Fm({},this.appearance),Ru)}openDrawer(Ru){var Ou;if(!Ru){this.drawerConfig={content:"",height:(Ou=this.drawerConfig)==null?void 0:Ou.height};return}this.drawerConfig=Ru}get ready(){return!!this.videoAgentScene}get currentTime(){var Ru;return((Ru=this.videoAgentScene)==null?void 0:Ru.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Ou=>{if(Ou.parsed)return!1;const Fu=this.currentTime-Ou.start;return Fu<=100&&Fu>=0}):[]}get mediaInstance(){var Ru;return(Ru=this.videoAgentScene)==null?void 0:Ru.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Ru){var Fu,Nu,Vu,Gu,Uu;if(((Fu=this.mediaInstance)==null?void 0:Fu.ended)&&this.mediaInstance.currentTime!==0){if(this.ended)return;(Nu=this.vreoUnit)==null||Nu.keyframes.forEach(Hu=>Hu.parsed=!1),this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause(),this.mediaInstance.currentTime=0;return}if(!this.playing){(Vu=this.mediaInstance)!=null&&Vu.paused||(Gu=this.mediaInstance)==null||Gu.pause();return}((Uu=this.mediaInstance)==null?void 0:Uu.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(Hu=>{Hu.parsed||(Hu.parsed=!0,this.emit(Hu.type,Hu,this.currentTime),Ru&&Ru(Hu.type,Hu,this.currentTime))})}run(Ru){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(Ru)))}dispose(){var Ru,Ou;this.setPlaying(!1),(Ru=this.vreoUnit)==null||Ru.keyframes.forEach(Fu=>Fu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.pause(),this.mediaInstance.currentTime=0),(Ou=this.stopInterval)==null||Ou.call(this),this.stopInterval=void 0}}const ControllerContext=react$1.exports.createContext(null);function useController(){const _u=React.useContext(ControllerContext);if(!_u)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return _u}function useFiveInstance(){const _u=useController();if(!_u.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return _u.five}function useFiveProject2d(){const _u=useFiveInstance();return $u=>_u.project2d($u,!1)}var CameraMovementEffect=(_u=>(_u.Move="Move",_u.Rotate="Rotate",_u))(CameraMovementEffect||{}),Rotation=(_u=>(_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop",_u))(Rotation||{}),Easing$1={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var $u=1.70158;return _u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}},Bounce:{In:function(_u){return 1-Easing$1.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Easing$1.Bounce.In(_u*2)*.5:Easing$1.Bounce.Out(_u*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Ru){return $u._tweens[Ru]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Ru){$u===void 0&&($u=now$1()),Ru===void 0&&(Ru=!1);var Ou=Object.keys(this._tweens);if(Ou.length===0)return!1;for(;Ou.length>0;){this._tweensAddedDuringUpdate={};for(var Fu=0;Fu<Ou.length;Fu++){var Nu=this._tweens[Ou[Fu]],Vu=!Ru;Nu&&Nu.update($u,Vu)===!1&&!Ru&&delete this._tweens[Ou[Fu]]}Ou=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Interpolation={Linear:function(_u,$u){var Ru=_u.length-1,Ou=Ru*$u,Fu=Math.floor(Ou),Nu=Interpolation.Utils.Linear;return $u<0?Nu(_u[0],_u[1],Ou):$u>1?Nu(_u[Ru],_u[Ru-1],Ru-Ou):Nu(_u[Fu],_u[Fu+1>Ru?Ru:Fu+1],Ou-Fu)},Bezier:function(_u,$u){for(var Ru=0,Ou=_u.length-1,Fu=Math.pow,Nu=Interpolation.Utils.Bernstein,Vu=0;Vu<=Ou;Vu++)Ru+=Fu(1-$u,Ou-Vu)*Fu($u,Vu)*_u[Vu]*Nu(Ou,Vu);return Ru},CatmullRom:function(_u,$u){var Ru=_u.length-1,Ou=Ru*$u,Fu=Math.floor(Ou),Nu=Interpolation.Utils.CatmullRom;return _u[0]===_u[Ru]?($u<0&&(Fu=Math.floor(Ou=Ru*(1+$u))),Nu(_u[(Fu-1+Ru)%Ru],_u[Fu],_u[(Fu+1)%Ru],_u[(Fu+2)%Ru],Ou-Fu)):$u<0?_u[0]-(Nu(_u[0],_u[0],_u[1],_u[1],-Ou)-_u[0]):$u>1?_u[Ru]-(Nu(_u[Ru],_u[Ru],_u[Ru-1],_u[Ru-1],Ou-Ru)-_u[Ru]):Nu(_u[Fu?Fu-1:0],_u[Fu],_u[Ru<Fu+1?Ru:Fu+1],_u[Ru<Fu+2?Ru:Fu+2],Ou-Fu)},Utils:{Linear:function(_u,$u,Ru){return($u-_u)*Ru+_u},Bernstein:function(_u,$u){var Ru=Interpolation.Utils.Factorial;return Ru(_u)/Ru($u)/Ru(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Ru=1;if(_u[$u])return _u[$u];for(var Ou=$u;Ou>1;Ou--)Ru*=Ou;return _u[$u]=Ru,Ru}}(),CatmullRom:function(_u,$u,Ru,Ou,Fu){var Nu=(Ru-_u)*.5,Vu=(Ou-$u)*.5,Gu=Fu*Fu,Uu=Fu*Gu;return(2*$u-2*Ru+Nu+Vu)*Uu+(-3*$u+3*Ru-2*Nu-Vu)*Gu+Nu*Fu+$u}}},Sequence=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),mainGroup=new Group,Tween=function(){function _u($u,Ru){Ru===void 0&&(Ru=mainGroup),this._object=$u,this._group=Ru,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Ru){return this._valuesEnd=Object.create($u),Ru!==void 0&&(this._duration=Ru),this},_u.prototype.duration=function($u){return this._duration=$u,this},_u.prototype.start=function($u){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Ru in this._valuesStartRepeat)this._swapEndStartRepeatValues(Ru),this._valuesStart[Ru]=this._valuesStartRepeat[Ru]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u!==void 0?typeof $u=="string"?now$1()+parseFloat($u):$u:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function($u,Ru,Ou,Fu){for(var Nu in Ou){var Vu=$u[Nu],Gu=Array.isArray(Vu),Uu=Gu?"array":typeof Vu,Hu=!Gu&&Array.isArray(Ou[Nu]);if(!(Uu==="undefined"||Uu==="function")){if(Hu){var Wu=Ou[Nu];if(Wu.length===0)continue;Wu=Wu.map(this._handleRelativeValue.bind(this,Vu)),Ou[Nu]=[Vu].concat(Wu)}if((Uu==="object"||Gu)&&Vu&&!Hu){Ru[Nu]=Gu?[]:{};for(var Qu in Vu)Ru[Nu][Qu]=Vu[Qu];Fu[Nu]=Gu?[]:{},this._setupProperties(Vu,Ru[Nu],Ou[Nu],Fu[Nu])}else typeof Ru[Nu]=="undefined"&&(Ru[Nu]=Vu),Gu||(Ru[Nu]*=1),Hu?Fu[Nu]=Ou[Nu].slice().reverse():Fu[Nu]=Ru[Nu]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Ru=this._chainedTweens.length;$u<Ru;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return this._group=$u,this},_u.prototype.delay=function($u){return this._delayTime=$u,this},_u.prototype.repeat=function($u){return this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return this._yoyo=$u,this},_u.prototype.easing=function($u){return this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Ru=0;Ru<arguments.length;Ru++)$u[Ru]=arguments[Ru];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Ru){if($u===void 0&&($u=now$1()),Ru===void 0&&(Ru=!0),this._isPaused)return!0;var Ou,Fu,Nu=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Nu)return!1;Ru&&this.start($u)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Fu=($u-this._startTime)/this._duration,Fu=this._duration===0||Fu>1?1:Fu;var Vu=this._easingFunction(Fu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Vu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Fu),Fu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ou in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ou]=="string"&&(this._valuesStartRepeat[Ou]=this._valuesStartRepeat[Ou]+parseFloat(this._valuesEnd[Ou])),this._yoyo&&this._swapEndStartRepeatValues(Ou),this._valuesStart[Ou]=this._valuesStartRepeat[Ou];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Gu=0,Uu=this._chainedTweens.length;Gu<Uu;Gu++)this._chainedTweens[Gu].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Ru,Ou,Fu){for(var Nu in Ou)if(Ru[Nu]!==void 0){var Vu=Ru[Nu]||0,Gu=Ou[Nu],Uu=Array.isArray($u[Nu]),Hu=Array.isArray(Gu),Wu=!Uu&&Hu;Wu?$u[Nu]=this._interpolationFunction(Gu,Fu):typeof Gu=="object"&&Gu?this._updateProperties($u[Nu],Vu,Gu,Fu):(Gu=this._handleRelativeValue(Vu,Gu),typeof Gu=="number"&&($u[Nu]=Vu+(Gu-Vu)*Fu))}},_u.prototype._handleRelativeValue=function($u,Ru){return typeof Ru!="string"?Ru:Ru.charAt(0)==="+"||Ru.charAt(0)==="-"?$u+parseFloat(Ru):parseFloat(Ru)},_u.prototype._swapEndStartRepeatValues=function($u){var Ru=this._valuesStartRepeat[$u],Ou=this._valuesEnd[$u];typeof Ou=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Ou):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Ru},_u}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};const Easing=Easing$1;function tween(_u,$u,Ru,Ou=Easing.Linear.None){const Fu=new Tween(_u).to($u,Ru).easing(Ou);nextFrame(()=>Fu.start(0));const Nu=requestAnimationFrameInterval(Gu=>{Fu.update(Gu)===!1&&Nu()}),Vu=[];return Fu.onDestroy=Gu=>(Vu.push(Gu),Fu),Fu.destroy=function(){this.stop(),Object.assign(Fu,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Gu;for(;Gu=Vu.shift();)Gu();Nu()},Fu}function tweenProgress$1(_u,$u){return tween({progress:0},{progress:1},_u,$u)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(_u){return _u%PI_2$1}function formatLongitude(_u){return _u%PI_2$1}const getLongitudeParams=(_u,$u,Ru)=>{if(_u=formatLongitude(_u),$u=formatLongitude($u),Ru===Rotation.Anticlockwise&&_u>$u)$u+=PI_2$1;else if(Ru===Rotation.Clockwise&&$u>_u)_u+=PI_2$1;else{if(Ru!==Rotation.Anticlockwise&&Ru!==Rotation.Clockwise&&$u-_u>PI$1)return getLongitudeParams(_u,$u,Rotation.Clockwise);if(Ru!==Rotation.Anticlockwise&&Ru!==Rotation.Clockwise&&_u-$u>PI$1)return getLongitudeParams(_u,$u,Rotation.Anticlockwise)}return{from:_u,to:$u}};function progressNumber(_u,$u,Ru){return _u+($u-_u)*Ru}const CameraMovementPlugin=_u=>{const $u=(Fu,Nu,Vu={preload:!0})=>new Promise(async(Gu,Uu)=>{if(Vu.asyncStartCallback&&Vu.asyncStartCallback(),_u.panoIndex===void 0)return Uu(!1);if(Fu.mode&&Fu.mode!==_u.currentMode&&await new Promise(Wu=>{!Fu.mode||(_u.once("modeChange",Qu=>{_u.once("initAnimationEnded",()=>{Qu===Fu.mode&&Wu(!0)})}),_u.changeMode(Fu.mode,{fov:Fu.fov||void 0,latitude:Fu.latitude||void 0,longitude:Fu.longitude||void 0,panoIndex:Fu.panoIndex||void 0}))}),Fu.mode===Five.Mode.Floorplan||(Vu.preload&&Fu.panoIndex!==void 0&&Fu.panoIndex!==_u.panoIndex&&await _u.preloadPano(Fu.panoIndex),Vu.asyncEndCallback&&Vu.asyncEndCallback(),Fu.panoIndex===void 0&&Fu.fov===void 0&&Fu.latitude===void 0&&Fu.longitude===void 0))return Gu(!0);const Hu=Fu.panoIndex!==void 0?Fu.panoIndex:_u.panoIndex;if(Hu!==void 0){const Wu=Object.assign(Fu,{duration:Nu,moveEndCallback:()=>Gu(!0),moveCancelCallback:()=>{Gu(!0)}});await _u.moveToPano(Hu,Wu)}else Uu(!1)}),Ru=Fu=>{const Nu=_u.state,Vu=formatLatitude(Nu.latitude),Gu=formatLatitude(Fu.latitude),{from:Uu,to:Hu}=getLongitudeParams(Nu.longitude,Fu.longitude,Fu.rotation||Rotation.Loop),Wu=Nu.fov,Qu=Fu.fov;return{from:{latitude:Vu,longitude:Uu,fov:Wu},to:{latitude:Gu,longitude:Hu,fov:Qu}}};return{move:$u,rotate:async(Fu,Nu,Vu={})=>{Vu.asyncStartCallback&&Vu.asyncStartCallback(),Fu.mode&&_u.currentMode!==Fu.mode&&await _u.changeMode(Fu.mode),Fu.mode===Five.Mode.Panorama&&_u.currentMode===Five.Mode.Panorama&&Fu.panoIndex!==void 0&&Fu.panoIndex!==_u.panoIndex&&(Vu.preload&&await _u.preloadPano(Fu.panoIndex),await new Promise((Hu,Wu)=>{_u.moveToPano(Fu.panoIndex,{moveEndCallback:()=>Hu(!0),moveCancelCallback:()=>Wu(!1),effect:"fade"})})),Vu.asyncEndCallback&&Vu.asyncEndCallback();const{from:Gu,to:Uu}=Ru(Fu);return await new Promise((Hu,Wu)=>{const Qu=({progress:Ju})=>{const Xu={};Xu.longitude=progressNumber(Gu.longitude,Uu.longitude,Ju)%PI_2$1,Xu.latitude=progressNumber(Gu.latitude,Uu.latitude,Ju),Xu.fov=progressNumber(Gu.fov,Uu.fov,Ju),_u.setState(Xu,!0)},qu=()=>{Hu(!0)},Ku=()=>{Hu(!1)};let Yu=Nu;Fu.rotation===Rotation.Loop&&(Yu=Fu.rotateSpeed?Math.ceil(Math.abs(Uu.longitude-Gu.longitude)/Fu.rotateSpeed*1e3):Nu);const _c=tweenProgress$1(Yu,Easing.Linear.None).onUpdate(Qu).onComplete(qu).onDestroy(Ku);Fu.rotation===Rotation.Loop&&_c.repeat(1/0).yoyo(!0),setTimeout(()=>{_c.destroy(),Hu(!0)},Nu)})}}};var VreoKeyframeEnum=(_u=>(_u.CameraMovement="CameraMovement",_u.PanoTag="PanoTag",_u.PanoTextLabel="PanoTextLabel",_u.Prompter="Prompter",_u.UpdateVRPanorama="UpdateVRPanorama",_u.ModelVideo="ModelVideo",_u.PanoEffect="PanoEffect",_u.InfoPanel="InfoPanel",_u.VideoEffect="VideoEffect",_u.BgMusic="BgMusic",_u.Exit="Exit",_u.Custom="Custom",_u))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(_u=>(_u.Image="Image",_u.Video="Video",_u))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(_u=>(_u.Drawer="Drawer",_u.PopUp="PopUp",_u))(InfoPanelStyleEnum||{});function CameraMovement(){const _u=useController(),$u=useFiveInstance(),Ru=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Ou=async Fu=>{Ru.current||(Ru.current=CameraMovementPlugin($u));const{start:Nu,end:Vu,data:Gu}=Fu,Uu=Gu,Hu=Uu.effect;Hu===CameraMovementEffect.Rotate?await Ru.current.rotate(Gu,Vu-Nu):Hu===CameraMovementEffect.Move?await Ru.current.move(Gu,Vu-Nu):Uu.panoIndex!==void 0&&Uu.panoIndex!==$u.panoIndex?await Ru.current.move(Gu,Vu-Nu):await Ru.current.rotate(Gu,Vu-Nu)};return _u.on(VreoKeyframeEnum.CameraMovement,Ou),()=>{_u.off(VreoKeyframeEnum.CameraMovement,Ou)}},[_u]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(_u,$u,Ru=!0){if(!_u)return()=>{};if(Ru&&$u(_u.clientWidth,_u.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Ou=new ResizeObserver(()=>$u(_u.clientWidth,_u.clientHeight));return Ou.observe(_u),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u&&Ou.unobserve(_u),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}}else{const Ou=document.createElement("iframe");return Ou.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Ou.classList.add("resize-sensor-iframe"),_u.appendChild(Ou),Ou.contentWindow?(Ou.contentWindow.addEventListener("resize",()=>{$u(Ou.clientWidth,Ou.clientHeight)}),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u.removeChild(Ou),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}):()=>{}}}function hasResizeListener(_u){return _u?resizeObserverCache.get(_u)||0>0:!1}function ResizeObserver$1(){const _u=React.useRef(null),$u=useController();return React.useEffect(()=>{if(!_u.current)return;const Ru=$u.container.parentElement;if(hasResizeListener(Ru))return;const Ou=addResizeListener(Ru,(Fu,Nu)=>{$u.setContainerSize(Fu,Nu)});return()=>{Ou()}},[]),jsx("div",{className:"resizeObserver-element",ref:_u})}function InfoPanelImg({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("img",{className:"vreo-infoPanelImg",src:_u})]})})})})}function InfoPanelVideo({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("div",{className:"vreo-infoPanelVideo",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:_u})})]})})})})}const Title=_u=>!_u.title&&!_u.subTitle?null:jsxs(Fragment,{children:[jsx("div",{className:"vreo-infoPanel-title-shadow"}),jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:_u.title}),jsx("div",{className:"vreo-infoPanel-t2",children:_u.subTitle})]})]});function InfoPanel(){const _u=react$1.exports.useRef(),$u=useController();return react$1.exports.useEffect(()=>{var Ou;if(((Ou=$u.configs)==null?void 0:Ou.keyframeMap.InfoPanel)===!1)return;const Ru=Fu=>{const{start:Nu,end:Vu,data:Gu}=Fu,Uu=Gu,{title:Hu,subTitle:Wu,style:Qu}=Uu;do{if(Qu===InfoPanelStyleEnum.PopUp){Uu.type===InfoPanelTypeEnum.Image?$u.openPopUp(jsx(InfoPanelImg,{url:Uu.url,children:jsx(Title,{title:Hu,subTitle:Wu})})):Uu.type===InfoPanelTypeEnum.Video&&$u.openPopUp(jsx(InfoPanelVideo,{url:Uu.url,children:jsx(Title,{title:Hu,subTitle:Wu})}));break}Uu.type===InfoPanelTypeEnum.Image?$u.openDrawer({content:jsx(InfoPanelImg,{url:Uu.url,children:jsx(Title,{title:Hu,subTitle:Wu})}),height:"60vh"}):Uu.type===InfoPanelTypeEnum.Video&&$u.openDrawer({content:jsx(InfoPanelVideo,{url:Uu.url,children:jsx(Title,{title:Hu,subTitle:Wu})}),height:"60vh"})}while(!1);_u.current=setTimeout(()=>{$u.openDrawer(!1),$u.openPopUp(!1)},Vu-Nu)};return $u.on(VreoKeyframeEnum.InfoPanel,Ru),()=>{$u.off(VreoKeyframeEnum.InfoPanel,Ru),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}const ModelTVVideoPlugin=(_u,{videoElement:$u})=>{const Ru={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:$u},Ou=Qu=>{Ru.videoTexture&&(Ru.videoTexture.image.muted=Qu,Ru.videoTexture.image.play())},Fu=()=>Ru.videoTexture?Ru.videoTexture.image.muted:!0,Nu=()=>{if(Ru.enabled||!Ru.videoTexture)return;Ru.enabled=!0,Ru.videoMeshes=Gu(),Ru.videoMeshes.forEach(qu=>_u.scene.add(qu));const Qu=()=>{if(!Ru.videoTexture)return;const qu=()=>{var Ku;!Ru.videoTexture||((Ku=Ru.videoTexture)==null||Ku.image.removeEventListener("timeupdate",qu),Ru.videoTextureEnabled=!0,Ru.videoMeshes.forEach(Yu=>{Yu.material.map!==Ru.videoTexture&&(Yu.material.map=Ru.videoTexture)}),_u.needsRender=!0)};Ru.videoTexture.image.addEventListener("timeupdate",qu),Ru.videoTexture&&Ru.videoMeshes.length&&Ru.videoTexture.image.play()};if(_u.model.loaded)Qu();else return _u.once("modelLoaded",()=>Qu())},Vu=()=>{!Ru.enabled||(Ru.enabled=!1,Ru.videoMeshes.forEach(Qu=>{Qu.geometry.dispose(),Qu.material.dispose(),_u.scene.remove(Qu),Ru.videoTexture&&Ru.videoTexture.image.pause()}),Ru.videoMeshes=[],_u.needsRender=!0)},Gu=()=>Ru.rectPoints.map((Qu,qu)=>{const Ku=new BufferGeometry,Yu=128,_c=[];_c.push(Qu[0].x,Qu[0].y,Qu[0].z);for(let _h=1;_h<Yu;_h++)_c.push(Qu[0].x+(Qu[1].x-Qu[0].x)*_h/Yu,Qu[0].y+(Qu[1].y-Qu[0].y)*_h/Yu,Qu[0].z+(Qu[1].z-Qu[0].z)*_h/Yu);_c.push(Qu[1].x,Qu[1].y,Qu[1].z),_c.push(Qu[2].x,Qu[2].y,Qu[2].z);for(let _h=1;_h<Yu;_h++)_c.push(Qu[2].x+(Qu[3].x-Qu[2].x)*_h/Yu,Qu[2].y+(Qu[3].y-Qu[2].y)*_h/Yu,Qu[2].z+(Qu[3].z-Qu[2].z)*_h/Yu);_c.push(Qu[3].x,Qu[3].y,Qu[3].z);const Ju=[];Ju.push(0,1);for(let _h=1;_h<Yu;_h++)Ju.push(0,1-_h/Yu);Ju.push(0,0),Ju.push(1,0);for(let _h=1;_h<Yu;_h++)Ju.push(1,_h/Yu);Ju.push(1,1);const Xu=[];for(let _h=0;_h<Yu;_h++)Xu.push(_h,_h+1,Yu*2-_h,_h,Yu*2-_h,Yu*2+1-_h);Ku.setAttribute("position",new BufferAttribute(new Float32Array(_c),3)),Ku.setAttribute("uv",new BufferAttribute(new Float32Array(Ju),2)),Ku.setIndex(new BufferAttribute(new Uint32Array(Xu),1));const Zu=new MeshBasicMaterial({map:Ru.videoTextureEnabled?Ru.videoTexture:Ru.imageTexture,side:DoubleSide}),Xc=new Mesh(Ku,Zu);return Xc.renderOrder=1,Xc.name=`video-${qu}-${performance.now()}`,Xc}),Uu=Qu=>{const qu=new TextureLoader().load(Qu);return qu.minFilter=LinearFilter,qu.magFilter=LinearFilter,qu.format=RGBFormat,qu},Hu=(Qu,qu)=>new Promise((Ku,Yu)=>{const _c=new XMLHttpRequest;_c.onreadystatechange=()=>{if(_c.readyState==4)if(_c.status==200){const Ju=window.URL||window.webkitURL;qu=qu||document.createElement("video"),qu.crossOrigin="anonymous",qu.autoplay=!0,qu.muted=!0,qu.loop=!0,qu.playsInline=!0,qu.src=Ju.createObjectURL(_c.response);const Xu=new VideoTexture(qu);Xu.minFilter=LinearFilter,Xu.magFilter=LinearFilter,Xu.format=RGBFormat,Ku(Object.assign(Xu,{videoSource:Qu}))}else Yu(new Error("Video download Error: "+_c.status))},_c.onerror=Ju=>Yu(Ju),_c.open("GET",Qu),_c.responseType="blob",_c.send()}),Wu=async(Qu,qu)=>{const{video_src:Ku,video_poster_src:Yu,points:_c}=Qu;Ru.videoSource=Ku,Ru.rectPoints=_c.map(Ju=>Ju.map(({x:Xu,y:Zu,z:Xc})=>new Vector3(Xu,Zu,Xc))),Ru.imageTexture=Uu(Yu),qu&&(Ru.videoElement=qu),Ru.videoTexture=await Hu(Ru.videoSource,Ru.videoElement),Ru.enabled=!!Qu.enable,Ru.enabled&&Nu()};return _u.on("modeChange",()=>Ou(!0)),_u.on("wantsTapGesture",Qu=>{if(!Ru.enabled)return;const[qu]=Qu.intersectObjects(_u.scene.children,!0);if(!!qu&&/^video/.test(qu.object.name))return Ru.videoTexture&&Ou(!Ru.videoTexture.image.muted),!1}),_u.on("panoArrived",()=>{if(!Ru.enabled||Fu())return;const Qu=_u.camera.position;Ru.rectPoints.find(Ku=>{const Yu=Ku.reduce((_c,Ju)=>new Vector3(_c.x+Ju.x/Ku.length,_c.y+Ju.y/Ku.length,_c.z+Ju.z/Ku.length),new Vector3);return Ku.map(_c=>new Vector3((_c.x+Yu.x)/2,(_c.y+Yu.y)/2,(_c.z+Yu.z)/2)).filter(_c=>{_c=_c.clone().sub(Qu).normalize();const Ju=new Raycaster(Qu,_c),[Xu]=Ju.intersectObjects(_u.scene.children,!0);return!!Xu&&/^video/.test(Xu.object.name)}).length>=2})||Ou(!0)}),_u.on("renderFrame",()=>{Ru.videoMeshes.forEach(Qu=>{Qu&&(Qu.needsRender=!0)})}),_u.on("load",Qu=>{Qu.modelTVVideoData&&Wu(Qu.modelTVVideoData)}),{enable:Nu,disable:Vu,load:Wu}};function createTransMatrix(_u){const $u=new Matrix4;return $u.fromArray(_u),Ru=>{const Ou=new Vector3(...Ru);return Ou.applyMatrix4($u),Ou.toArray()}}function ModelVideo(){const _u=useController(),$u=useFiveInstance(),Ru=react$1.exports.useRef(),Ou=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Fu=async Nu=>{var Yu,_c;Ru.current||(Ru.current=ModelTVVideoPlugin($u,{}));const{start:Vu,end:Gu}=Nu,{videoSrc:Uu,videoPosterSrc:Hu,vertexs:Wu,matrixWorld:Qu}=Nu.data,qu=(()=>{if(Wu.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Wu.length===4)return Wu;const Ju=new Box3;return Wu.forEach(Xu=>Ju.expandByPoint(new Vector3(Xu.x,Xu.y,Xu.z))),[new Vector3(Ju.min.x,Ju.max.y,Ju.max.z),new Vector3(Ju.min.x,Ju.min.y,Ju.max.z),new Vector3(Ju.max.x,Ju.min.y,Ju.max.z),new Vector3(Ju.max.x,Ju.max.y,Ju.max.z)]})(),Ku=(()=>{if(Qu){const Ju=createTransMatrix(Qu);return[qu.map(Xu=>{const Zu=Ju([Xu.x,Xu.y,Xu.z]);return{x:Zu[0],y:Zu[1],z:Zu[2]}})]}return[qu]})();Ru.current.disable(),await Ru.current.load({video_src:Uu,video_poster_src:Hu,points:Ku},(_c=(Yu=_u.configs)==null?void 0:Yu.videos)==null?void 0:_c.modelTVVideo),Ru.current.enable(),Ou.current=setTimeout(()=>{var Ju;return(Ju=Ru.current)==null?void 0:Ju.disable()},Gu-Vu)};return _u.on(VreoKeyframeEnum.ModelVideo,Fu),()=>{_u.off(VreoKeyframeEnum.ModelVideo,Fu),Ou.current&&clearTimeout(Ou.current)}},[_u]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Ru){if(Ru!=="default"){var Ou=Object.getOwnPropertyDescriptor(_u,Ru);Object.defineProperty($u,Ru,Ou.get?Ou:{enumerable:!0,get:function(){return _u[Ru]}})}}),$u.default=_u,Object.freeze($u)}var n=e(require$$1),i=function(_u){function $u(){var Ru=_u.call(this)||this;return Ru.type="LineSegmentsGeometry",Ru.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Ru.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Ru.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Ru}return t$1.__extends($u,_u),$u.prototype.applyMatrix4=function(Ru){var Ou=this.attributes.instanceStart,Fu=this.attributes.instanceEnd;return Ou!==void 0&&(Ou.applyMatrix4(Ru),Fu.applyMatrix4(Ru),Ou.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},$u.prototype.setPositions=function(Ru){var Ou;Ou=Ru instanceof Float32Array?Ru:Array.isArray(Ru)?new Float32Array(Ru):new Float32Array;var Fu=new n.InstancedInterleavedBuffer(Ou,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Fu,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Fu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},$u.prototype.setColors=function(Ru){var Ou;Ou=Ru instanceof Float32Array?Ru:Array.isArray(Ru)?new Float32Array(Ru):new Float32Array;var Fu=new n.InstancedInterleavedBuffer(Ou,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Fu,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Fu,3,3)),this},$u.prototype.fromWireframeGeometry=function(Ru){return this.setPositions(Ru.attributes.position.array),this},$u.prototype.fromEdgesGeometry=function(Ru){return this.setPositions(Ru.attributes.position.array),this},$u.prototype.fromMesh=function(Ru){return this.fromWireframeGeometry(new n.WireframeGeometry(Ru.geometry)),this},$u.prototype.fromLineSegments=function(Ru){var Ou=Ru.geometry;if(Ou instanceof n.Geometry){var Fu=new n.BufferGeometry().fromGeometry(Ou);this.setPositions(Fu.attributes.position.array)}else Ou instanceof n.BufferGeometry&&this.setPositions(Ou.attributes.position.array);return this},$u.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var Ru=this.attributes.instanceStart,Ou=this.attributes.instanceEnd;if(Ru!==void 0&&Ou!==void 0){var Fu=new n.Box3;this.boundingBox.setFromBufferAttribute(Ru),Fu.setFromBufferAttribute(Ou),this.boundingBox.union(Fu)}},$u.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Ru=this.attributes.instanceStart,Ou=this.attributes.instanceEnd;if(Ru!==void 0&&Ou!==void 0){var Fu=this.boundingSphere.center;this.boundingBox.getCenter(Fu);for(var Nu=0,Vu=new n.Vector3,Gu=0,Uu=Ru.count;Gu<Uu;Gu++)Vu.fromBufferAttribute(Ru,Gu),Nu=Math.max(Nu,Fu.distanceToSquared(Vu)),Vu.fromBufferAttribute(Ou,Gu),Nu=Math.max(Nu,Fu.distanceToSquared(Vu));this.boundingSphere.radius=Math.sqrt(Nu),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},$u.prototype.toJSON=function(){},$u}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(_u){function $u(Ru){var Ou=_u.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return Ou.type="LineMaterial",Ou.dashed=!1,Object.defineProperties(Ou,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Fu){this.uniforms.diffuse.value=Fu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Fu){this.uniforms.linewidth.value=Fu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Fu){this.uniforms.dashScale.value=Fu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Fu){this.uniforms.dashSize.value=Fu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Fu){this.uniforms.gapSize.value=Fu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Fu){this.uniforms.opacity.value=Fu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Fu){this.uniforms.resolution.value.copy(Fu)}}}),Ou.setValues(Ru),Ou}return t$1.__extends($u,_u),$u}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(_u){function $u(Ru,Ou){var Fu=_u.call(this)||this;return Fu.type="LineSegments2",Fu.geometry=Ru!==void 0?Ru:new i,Fu.material=Ou!==void 0?Ou:new o({color:16777215*Math.random()}),Fu}return t$1.__extends($u,_u),$u.prototype.computeLineDistances=function(){for(var Ru=this.geometry,Ou=Ru.attributes.instanceStart,Fu=Ru.attributes.instanceEnd,Nu=new Float32Array(2*Ou.count),Vu=new n.Vector3,Gu=new n.Vector3,Uu=0,Hu=0,Wu=Ou.count;Uu<Wu;Uu++,Hu+=2)Vu.fromBufferAttribute(Ou,Uu),Gu.fromBufferAttribute(Fu,Uu),Nu[Hu]=Hu===0?0:Nu[Hu-1],Nu[Hu+1]=Nu[Hu]+Vu.distanceTo(Gu);var Qu=new n.InstancedInterleavedBuffer(Nu,2,1);return Ru.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Qu,1,0)),Ru.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Qu,1,1)),this},$u.prototype.raycast=function(Ru,Ou){Ru.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Fu=Ru.ray,Nu=Ru.camera,Vu=Nu.projectionMatrix,Gu=this.geometry,Uu=this.material,Hu=Uu.resolution,Wu=Uu.linewidth,Qu=Gu.attributes.instanceStart,qu=Gu.attributes.instanceEnd,Ku=new n.Vector4,Yu=new n.Vector4,_c=new n.Vector4,Ju=new n.Vector3,Xu=new n.Matrix4,Zu=new n.Line3,Xc=new n.Vector3;Fu.at(1,_c),_c.w=1,_c.applyMatrix4(Nu.matrixWorldInverse),_c.applyMatrix4(Vu),_c.multiplyScalar(1/_c.w),_c.x*=Hu.x/2,_c.y*=Hu.y/2,_c.z=0,Ju.copy(_c);var _h=this.matrixWorld;Xu.multiplyMatrices(Nu.matrixWorldInverse,_h);for(var ep=0,np=Qu.count;ep<np;ep++){Ku.fromBufferAttribute(Qu,ep),Yu.fromBufferAttribute(qu,ep),Ku.w=1,Yu.w=1,Ku.applyMatrix4(Xu),Yu.applyMatrix4(Xu),Ku.applyMatrix4(Vu),Yu.applyMatrix4(Vu),Ku.multiplyScalar(1/Ku.w),Yu.multiplyScalar(1/Yu.w);var ap=Ku.z<-1&&Yu.z<-1,lp=Ku.z>1&&Yu.z>1;if(!ap&&!lp){Ku.x*=Hu.x/2,Ku.y*=Hu.y/2,Yu.x*=Hu.x/2,Yu.y*=Hu.y/2,Zu.start.copy(Ku),Zu.start.z=0,Zu.end.copy(Yu),Zu.end.z=0;var up=Zu.closestPointToPointParameter(Ju,!0);Zu.at(up,Xc);var _f=n.MathUtils.lerp(Ku.z,Yu.z,up),tp=_f>=-1&&_f<=1,ip=Ju.distanceTo(Xc)<.5*Wu;if(tp&&ip){Zu.start.fromBufferAttribute(Qu,ep),Zu.end.fromBufferAttribute(qu,ep),Zu.start.applyMatrix4(_h),Zu.end.applyMatrix4(_h);var rp=new n.Vector3,op=new n.Vector3;Fu.distanceSqToSegment(Zu.start,Zu.end,op,rp),Ou.push({point:op,pointOnLine:rp,distance:Fu.origin.distanceTo(op),object:this,faceIndex:ep})}}}},$u}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(_u){function $u(Ru,Ou){var Fu=_u.call(this,Ru,Ou)||this;return Fu.type="Line2",Fu}return t$1.__extends($u,_u),$u}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(_u){function $u(){var Ru=_u.call(this)||this;return Ru.type="LineGeometry",Ru}return t$1.__extends($u,_u),$u.prototype.setPositions=function(Ru){for(var Ou=Ru.length-3,Fu=new Float32Array(2*Ou),Nu=0;Nu<Ou;Nu+=3)Fu[2*Nu]=Ru[Nu],Fu[2*Nu+1]=Ru[Nu+1],Fu[2*Nu+2]=Ru[Nu+2],Fu[2*Nu+3]=Ru[Nu+3],Fu[2*Nu+4]=Ru[Nu+4],Fu[2*Nu+5]=Ru[Nu+5];return _u.prototype.setPositions.call(this,Fu),this},$u.prototype.setColors=function(Ru){for(var Ou=Ru.length-3,Fu=new Float32Array(2*Ou),Nu=0;Nu<Ou;Nu+=3)Fu[2*Nu]=Ru[Nu],Fu[2*Nu+1]=Ru[Nu+1],Fu[2*Nu+2]=Ru[Nu+2],Fu[2*Nu+3]=Ru[Nu+3],Fu[2*Nu+4]=Ru[Nu+4],Fu[2*Nu+5]=Ru[Nu+5];return _u.prototype.setColors.call(this,Fu),this},$u.prototype.fromLine=function(Ru){var Ou=Ru.geometry;if(Ou instanceof n.Geometry){var Fu=new n.BufferGeometry().fromGeometry(Ou);this.setPositions(Fu.attributes.position.array)}else Ou instanceof n.BufferGeometry&&this.setPositions(Ou.attributes.position.array);return this},$u.prototype.copy=function(){return this},$u}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(_u){function $u(Ru,Ou){Ru===void 0&&(Ru=new n.Vector3),Ou===void 0&&(Ou=new n.Vector3);var Fu=_u.call(this)||this;Fu.type="FiveLine",Fu.needsRender=!0;var Nu=new u,Vu=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Fu.line=new s(Nu,Vu);var Gu=new n.BufferGeometry,Uu=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Fu.points=new n.Points(Gu,Uu),Fu.points.renderOrder=11,Fu.points.frustumCulled=!1,Fu.setPoints(Ru,Ou),Fu.add(Fu.line,Fu.points),Fu}return t$1.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.setPoints=function(Ru,Ou){var Fu=[].concat(Ru.toArray(),Ou.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Fu),3)),this.line.geometry.setPositions(Fu),this.line.computeLineDistances(),this.needsRender=!0},$u.prototype.getPoints=function(){var Ru=this.points.geometry.attributes.position.array;return[new n.Vector3(Ru[0],Ru[1],Ru[2]),new n.Vector3(Ru[3],Ru[4],Ru[5])]},$u.prototype.setMaterial=function(Ru){var Ou=this.line.material;for(var Fu in Ru)if(Ru.hasOwnProperty(Fu)){var Nu=Ru[Fu];Fu==="dashed"?(Ou.dashed=Nu,Nu?Ou.defines.USE_DASH="":delete Ou.defines.USE_DASH,Ou.needsUpdate=!0):Ou[Fu]=Ru[Fu]}this.needsRender=!0},$u.prototype.setResolution=function(Ru,Ou){var Fu=this.line.material.resolution;Fu.x===Ru&&Fu.y===Ou||(Fu.set(Ru,Ou),this.needsRender=!0)},$u}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),Line=line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;class BetterTween extends exports.Tween{constructor(){super(...arguments);_m(this,"disposeMethods",[]);_m(this,"animationFrameDisposer");_m(this,"onDispose",Ru=>(this.disposeMethods.push(Ru),this));_m(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));_m(this,"dispose",()=>{var Ru;this.stop(),(Ru=this.animationFrameDisposer)==null||Ru.call(this),this.disposeMethods.forEach(Ou=>Ou()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(_u,$u=exports.Easing.Linear.None){const Ru=new BetterTween({progress:0}).to({progress:1});return _u!==void 0&&Ru.duration(_u),$u!==void 0&&Ru.easing($u),Ru}function lineAnime(_u,$u,Ru){const Ou="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Fu=new TextureLoader().load(Ou),Nu=new Color(16777215),Vu=new Line;Vu.setMaterial({linewidth:2,color:Nu});const Gu=Vu.points.material;return Gu.map=Fu,Gu.color.set(Nu),Vu.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Uu})=>{const Hu=.5-Uu/2,Wu=.5+Uu/2,Qu=$u.clone().lerp(Ru,Hu),qu=$u.clone().lerp(Ru,Wu);Vu.setPoints(Qu,qu)}).onStart(()=>_u.scene.add(Vu)).onDispose(()=>{_u.scene.remove(Vu),_u.needsRender=!0})}function PanoEffect(){const[_u,$u]=react$1.exports.useState(null),Ru=useFiveInstance(),Ou=react$1.exports.useRef(null),[Fu,Nu]=react$1.exports.useState(null),Vu=react$1.exports.useRef(),Gu=useController(),Uu=useFiveProject2d(),Hu=()=>{Ou.current&&Ou.current.dispose()};return react$1.exports.useEffect(()=>{const Wu=Qu=>{const{start:qu,end:Ku,data:Yu}=Qu,_c=Yu,[Ju,Xu]=_c.twoVertexs,Zu=new Vector3(Ju.x,Ju.y,Ju.z),Xc=new Vector3(Xu.x,Xu.y,Xu.z);Ou.current=lineAnime(Ru,Zu.clone(),Xc.clone()),Ou.current.play();const _h=Zu.lerp(Xc,.5),ep=Zu.distanceTo(Xc),np=Uu(_h);if(!np)return;const{x:ap,y:lp}=np;$u({center:_h,distance:ep}),Nu({left:ap,top:lp}),Vu.current=setTimeout(()=>{$u(null),Nu(null),Hu()},Ku-qu)};return Gu.on(VreoKeyframeEnum.PanoEffect,Wu),()=>{Gu.off(VreoKeyframeEnum.PanoEffect,Wu),Vu.current&&clearTimeout(Vu.current),Hu()}},[Gu]),react$1.exports.useEffect(()=>{const Wu=()=>{if(!(_u!=null&&_u.center))return;const{x:Qu,y:qu,z:Ku}=_u.center,Yu=Uu(new Vector3(Qu,qu,Ku));if(!Yu)return;const{x:_c,y:Ju}=Yu;Nu({left:_c,top:Ju})};return Ru.on("currentStateChange",Wu),()=>{Ru.off("currentStateChange",Wu)}},[_u==null?void 0:_u.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":_u}),style:{left:((Fu==null?void 0:Fu.left)||0)+"px",top:((Fu==null?void 0:Fu.top)||0)+"px"},children:(_u==null?void 0:_u.distance.toFixed(4))+"m"})})}var CSS3DObject=function(_u){Object3D.call(this),this.element=_u,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function($u){$u.element instanceof Element&&$u.element.parentNode!==null&&$u.element.parentNode.removeChild($u.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(_u){CSS3DObject.call(this,_u)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var _u=this,$u,Ru,Ou,Fu,Nu=new Matrix4,Vu={camera:{fov:0,style:""},objects:new WeakMap},Gu=document.createElement("div");Gu.style.overflow="hidden",this.domElement=Gu;var Uu=document.createElement("div");Uu.style.WebkitTransformStyle="preserve-3d",Uu.style.transformStyle="preserve-3d",Uu.style.pointerEvents="none",Gu.appendChild(Uu);var Hu=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:$u,height:Ru}},this.setSize=function(Xu,Zu){$u=Xu,Ru=Zu,Ou=$u/2,Fu=Ru/2,Gu.style.width=Xu+"px",Gu.style.height=Zu+"px",Uu.style.width=Xu+"px",Uu.style.height=Zu+"px"};function Wu(Xu){return Math.abs(Xu)<1e-10?0:Xu}function Qu(Xu){var Zu=Xu.elements;return"matrix3d("+Wu(Zu[0])+","+Wu(-Zu[1])+","+Wu(Zu[2])+","+Wu(Zu[3])+","+Wu(Zu[4])+","+Wu(-Zu[5])+","+Wu(Zu[6])+","+Wu(Zu[7])+","+Wu(Zu[8])+","+Wu(-Zu[9])+","+Wu(Zu[10])+","+Wu(Zu[11])+","+Wu(Zu[12])+","+Wu(-Zu[13])+","+Wu(Zu[14])+","+Wu(Zu[15])+")"}function qu(Xu,Zu){var Xc=Xu.elements,_h="matrix3d("+Wu(Xc[0])+","+Wu(Xc[1])+","+Wu(Xc[2])+","+Wu(Xc[3])+","+Wu(-Xc[4])+","+Wu(-Xc[5])+","+Wu(-Xc[6])+","+Wu(-Xc[7])+","+Wu(Xc[8])+","+Wu(Xc[9])+","+Wu(Xc[10])+","+Wu(Xc[11])+","+Wu(Xc[12])+","+Wu(Xc[13])+","+Wu(Xc[14])+","+Wu(Xc[15])+")";return Hu?"translate(-50%,-50%)translate("+Ou+"px,"+Fu+"px)"+Zu+_h:"translate(-50%,-50%)"+_h}function Ku(Xu,Zu,Xc,_h){if(Xu instanceof CSS3DObject){Xu.onBeforeRender(_u,Zu,Xc);var ep;Xu instanceof CSS3DSprite?(Nu.copy(Xc.matrixWorldInverse),Nu.transpose(),Nu.copyPosition(Xu.matrixWorld),Nu.scale(Xu.scale),Nu.elements[3]=0,Nu.elements[7]=0,Nu.elements[11]=0,Nu.elements[15]=1,ep=qu(Nu,_h)):ep=qu(Xu.matrixWorld,_h);var np=Xu.element,ap=Vu.objects.get(Xu);if(ap===void 0||ap.style!==ep){np.style.WebkitTransform=ep,np.style.transform=ep;var lp={style:ep};Hu&&(lp.distanceToCameraSquared=Yu(Xc,Xu)),Vu.objects.set(Xu,lp)}np.style.display=Xu.visible?"":"none",np.parentNode!==Uu&&Uu.appendChild(np),Xu.onAfterRender(_u,Zu,Xc)}for(var up=0,_f=Xu.children.length;up<_f;up++)Ku(Xu.children[up],Zu,Xc,_h)}var Yu=function(){var Xu=new Vector3,Zu=new Vector3;return function(Xc,_h){return Xu.setFromMatrixPosition(Xc.matrixWorld),Zu.setFromMatrixPosition(_h.matrixWorld),Xu.distanceToSquared(Zu)}}();function _c(Xu){var Zu=[];return Xu.traverse(function(Xc){Xc instanceof CSS3DObject&&Zu.push(Xc)}),Zu}function Ju(Xu){for(var Zu=_c(Xu).sort(function(np,ap){var lp=Vu.objects.get(np).distanceToCameraSquared,up=Vu.objects.get(ap).distanceToCameraSquared;return lp-up}),Xc=Zu.length,_h=0,ep=Zu.length;_h<ep;_h++)Zu[_h].element.style.zIndex=Xc-_h}this.render=function(Xu,Zu){var Xc=Zu.projectionMatrix.elements[5]*Fu;if(Vu.camera.fov!==Xc&&(Zu.isPerspectiveCamera?(Gu.style.WebkitPerspective=Xc+"px",Gu.style.perspective=Xc+"px"):(Gu.style.WebkitPerspective="",Gu.style.perspective=""),Vu.camera.fov=Xc),Xu.autoUpdate===!0&&Xu.updateMatrixWorld(),Zu.parent===null&&Zu.updateMatrixWorld(),Zu.isOrthographicCamera)var _h=-(Zu.right+Zu.left)/2,ep=(Zu.top+Zu.bottom)/2;var np=Zu.isOrthographicCamera?"scale("+Xc+")translate("+Wu(_h)+"px,"+Wu(ep)+"px)"+Qu(Zu.matrixWorldInverse):"translateZ("+Xc+"px)"+Qu(Zu.matrixWorldInverse),ap=np+"translate("+Ou+"px,"+Fu+"px)";Vu.camera.style!==ap&&!Hu&&(Uu.style.WebkitTransform=ap,Uu.style.transform=ap,Vu.camera.style=ap),Ku(Xu,Xu,Zu,np),Hu&&Ju(Xu)}};/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l=void 0,aa=mod;function r(_u,$u){var Ru=_u.split("."),Ou=aa;!(Ru[0]in Ou)&&Ou.execScript&&Ou.execScript("var "+Ru[0]);for(var Fu;Ru.length&&(Fu=Ru.shift());)!Ru.length&&$u!==l?Ou[Fu]=$u:Ou=Ou[Fu]?Ou[Fu]:Ou[Fu]={}}var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v(_u){var $u=_u.length,Ru=0,Ou=Number.POSITIVE_INFINITY,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku;for(Qu=0;Qu<$u;++Qu)_u[Qu]>Ru&&(Ru=_u[Qu]),_u[Qu]<Ou&&(Ou=_u[Qu]);for(Fu=1<<Ru,Nu=new(t?Uint32Array:Array)(Fu),Vu=1,Gu=0,Uu=2;Vu<=Ru;){for(Qu=0;Qu<$u;++Qu)if(_u[Qu]===Vu){for(Hu=0,Wu=Gu,qu=0;qu<Vu;++qu)Hu=Hu<<1|Wu&1,Wu>>=1;for(Ku=Vu<<16|Qu,qu=Hu;qu<Fu;qu+=Uu)Nu[qu]=Ku;++Gu}++Vu,Gu<<=1,Uu<<=1}return[Nu,Ru,Ou]}function w(_u,$u){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(_u):_u,this.m=!1,this.i=y,this.r=!1,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.bufferSize&&(this.h=$u.bufferSize),$u.bufferType&&(this.i=$u.bufferType),$u.resize&&(this.r=$u.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var _u=C(this,3);switch(_u&1&&(this.m=!0),_u>>>=1,_u){case 0:var $u=this.input,Ru=this.a,Ou=this.c,Fu=this.b,Nu=$u.length,Vu=l,Gu=l,Uu=Ou.length,Hu=l;if(this.d=this.f=0,Ru+1>=Nu)throw Error("invalid uncompressed block header: LEN");if(Vu=$u[Ru++]|$u[Ru++]<<8,Ru+1>=Nu)throw Error("invalid uncompressed block header: NLEN");if(Gu=$u[Ru++]|$u[Ru++]<<8,Vu===~Gu)throw Error("invalid uncompressed block header: length verify");if(Ru+Vu>$u.length)throw Error("input buffer is broken");switch(this.i){case A:for(;Fu+Vu>Ou.length;){if(Hu=Uu-Fu,Vu-=Hu,t)Ou.set($u.subarray(Ru,Ru+Hu),Fu),Fu+=Hu,Ru+=Hu;else for(;Hu--;)Ou[Fu++]=$u[Ru++];this.b=Fu,Ou=this.e(),Fu=this.b}break;case y:for(;Fu+Vu>Ou.length;)Ou=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)Ou.set($u.subarray(Ru,Ru+Vu),Fu),Fu+=Vu,Ru+=Vu;else for(;Vu--;)Ou[Fu++]=$u[Ru++];this.a=Ru,this.b=Fu,this.c=Ou;break;case 1:this.j(ba,ca);break;case 2:for(var Wu=C(this,5)+257,Qu=C(this,5)+1,qu=C(this,4)+4,Ku=new(t?Uint8Array:Array)(D.length),Yu=l,_c=l,Ju=l,Xu=l,Zu=l,Xc=l,_h=l,np=l,ep=l,np=0;np<qu;++np)Ku[D[np]]=C(this,3);if(!t)for(np=qu,qu=Ku.length;np<qu;++np)Ku[D[np]]=0;for(Yu=v(Ku),Xu=new(t?Uint8Array:Array)(Wu+Qu),np=0,ep=Wu+Qu;np<ep;)switch(Zu=E(this,Yu),Zu){case 16:for(_h=3+C(this,2);_h--;)Xu[np++]=Xc;break;case 17:for(_h=3+C(this,3);_h--;)Xu[np++]=0;Xc=0;break;case 18:for(_h=11+C(this,7);_h--;)Xu[np++]=0;Xc=0;break;default:Xc=Xu[np++]=Zu}_c=v(t?Xu.subarray(0,Wu):Xu.slice(0,Wu)),Ju=v(t?Xu.subarray(Wu):Xu.slice(Wu)),this.j(_c,Ju);break;default:throw Error("unknown BTYPE: "+_u)}}return this.n()};var G$1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G$1):G$1,H$1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H$1):H$1,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P$1,fa;P$1=0;for(fa=O.length;P$1<fa;++P$1)O[P$1]=143>=P$1?8:255>=P$1?9:279>=P$1?7:8;var ba=v(O),Q$1=new(t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q$1.length;R<ga;++R)Q$1[R]=5;var ca=v(Q$1);function C(_u,$u){for(var Ru=_u.f,Ou=_u.d,Fu=_u.input,Nu=_u.a,Vu=Fu.length,Gu;Ou<$u;){if(Nu>=Vu)throw Error("input buffer is broken");Ru|=Fu[Nu++]<<Ou,Ou+=8}return Gu=Ru&(1<<$u)-1,_u.f=Ru>>>$u,_u.d=Ou-$u,_u.a=Nu,Gu}function E(_u,$u){for(var Ru=_u.f,Ou=_u.d,Fu=_u.input,Nu=_u.a,Vu=Fu.length,Gu=$u[0],Uu=$u[1],Hu,Wu;Ou<Uu&&!(Nu>=Vu);)Ru|=Fu[Nu++]<<Ou,Ou+=8;if(Hu=Gu[Ru&(1<<Uu)-1],Wu=Hu>>>16,Wu>Ou)throw Error("invalid code length: "+Wu);return _u.f=Ru>>Wu,_u.d=Ou-Wu,_u.a=Nu,Hu&65535}w.prototype.j=function(_u,$u){var Ru=this.c,Ou=this.b;this.o=_u;for(var Fu=Ru.length-258,Nu,Vu,Gu,Uu;(Nu=E(this,_u))!==256;)if(256>Nu)Ou>=Fu&&(this.b=Ou,Ru=this.e(),Ou=this.b),Ru[Ou++]=Nu;else for(Vu=Nu-257,Uu=I[Vu],0<K[Vu]&&(Uu+=C(this,K[Vu])),Nu=E(this,$u),Gu=da[Nu],0<N[Nu]&&(Gu+=C(this,N[Nu])),Ou>=Fu&&(this.b=Ou,Ru=this.e(),Ou=this.b);Uu--;)Ru[Ou]=Ru[Ou++-Gu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ou};w.prototype.w=function(_u,$u){var Ru=this.c,Ou=this.b;this.o=_u;for(var Fu=Ru.length,Nu,Vu,Gu,Uu;(Nu=E(this,_u))!==256;)if(256>Nu)Ou>=Fu&&(Ru=this.e(),Fu=Ru.length),Ru[Ou++]=Nu;else for(Vu=Nu-257,Uu=I[Vu],0<K[Vu]&&(Uu+=C(this,K[Vu])),Nu=E(this,$u),Gu=da[Nu],0<N[Nu]&&(Gu+=C(this,N[Nu])),Ou+Uu>Fu&&(Ru=this.e(),Fu=Ru.length);Uu--;)Ru[Ou]=Ru[Ou++-Gu];for(;8<=this.d;)this.d-=8,this.a--;this.b=Ou};w.prototype.e=function(){var _u=new(t?Uint8Array:Array)(this.b-32768),$u=this.b-32768,Ru,Ou,Fu=this.c;if(t)_u.set(Fu.subarray(32768,_u.length));else for(Ru=0,Ou=_u.length;Ru<Ou;++Ru)_u[Ru]=Fu[Ru+32768];if(this.g.push(_u),this.l+=_u.length,t)Fu.set(Fu.subarray($u,$u+32768));else for(Ru=0;32768>Ru;++Ru)Fu[Ru]=Fu[$u+Ru];return this.b=32768,Fu};w.prototype.z=function(_u){var $u,Ru=this.input.length/this.a+1|0,Ou,Fu,Nu,Vu=this.input,Gu=this.c;return _u&&(typeof _u.p=="number"&&(Ru=_u.p),typeof _u.u=="number"&&(Ru+=_u.u)),2>Ru?(Ou=(Vu.length-this.a)/this.o[2],Nu=258*(Ou/2)|0,Fu=Nu<Gu.length?Gu.length+Nu:Gu.length<<1):Fu=Gu.length*Ru,t?($u=new Uint8Array(Fu),$u.set(Gu)):$u=Gu,this.c=$u};w.prototype.n=function(){var _u=0,$u=this.c,Ru=this.g,Ou,Fu=new(t?Uint8Array:Array)(this.l+(this.b-32768)),Nu,Vu,Gu,Uu;if(Ru.length===0)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Nu=0,Vu=Ru.length;Nu<Vu;++Nu)for(Ou=Ru[Nu],Gu=0,Uu=Ou.length;Gu<Uu;++Gu)Fu[_u++]=Ou[Gu];for(Nu=32768,Vu=this.b;Nu<Vu;++Nu)Fu[_u++]=$u[Nu];return this.g=[],this.buffer=Fu};w.prototype.v=function(){var _u,$u=this.b;return t?this.r?(_u=new Uint8Array($u),_u.set(this.c.subarray(0,$u))):_u=this.c.subarray(0,$u):(this.c.length>$u&&(this.c.length=$u),_u=this.c),this.buffer=_u};function W$1(_u,$u){var Ru,Ou;switch(this.input=_u,this.a=0,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.verify&&(this.A=$u.verify)),Ru=_u[this.a++],Ou=_u[this.a++],Ru&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Ru<<8)+Ou)%31!==0)throw Error("invalid fcheck flag:"+((Ru<<8)+Ou)%31);if(Ou&32)throw Error("fdict flag is not supported");this.q=new w(_u,{index:this.a,bufferSize:$u.bufferSize,bufferType:$u.bufferType,resize:$u.resize})}W$1.prototype.k=function(){var _u=this.input,$u,Ru;if($u=this.q.k(),this.a=this.q.a,this.A){Ru=(_u[this.a++]<<24|_u[this.a++]<<16|_u[this.a++]<<8|_u[this.a++])>>>0;var Ou=$u;if(typeof Ou=="string"){var Fu=Ou.split(""),Nu,Vu;for(Nu=0,Vu=Fu.length;Nu<Vu;Nu++)Fu[Nu]=(Fu[Nu].charCodeAt(0)&255)>>>0;Ou=Fu}for(var Gu=1,Uu=0,Hu=Ou.length,Wu,Qu=0;0<Hu;){Wu=1024<Hu?1024:Hu,Hu-=Wu;do Gu+=Ou[Qu++],Uu+=Gu;while(--Wu);Gu%=65521,Uu%=65521}if(Ru!==(Uu<<16|Gu)>>>0)throw Error("invalid adler-32 checksum")}return $u};var ha=8;r("Zlib.Inflate",W$1);r("Zlib.Inflate.prototype.decompress",W$1.prototype.k);var X$1={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X$1);else for(Z in Y=[],$=0,X$1)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X$1[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(_u,$u,Ru){var Ou=Ru.length-_u-1;if($u>=Ru[Ou])return Ou-1;if($u<=Ru[_u])return _u;for(var Fu=_u,Nu=Ou,Vu=Math.floor((Fu+Nu)/2);$u<Ru[Vu]||$u>=Ru[Vu+1];)$u<Ru[Vu]?Nu=Vu:Fu=Vu,Vu=Math.floor((Fu+Nu)/2);return Vu},calcBasisFunctions:function(_u,$u,Ru,Ou){var Fu=[],Nu=[],Vu=[];Fu[0]=1;for(var Gu=1;Gu<=Ru;++Gu){Nu[Gu]=$u-Ou[_u+1-Gu],Vu[Gu]=Ou[_u+Gu]-$u;for(var Uu=0,Hu=0;Hu<Gu;++Hu){var Wu=Vu[Hu+1],Qu=Nu[Gu-Hu],qu=Fu[Hu]/(Wu+Qu);Fu[Hu]=Uu+Wu*qu,Uu=Qu*qu}Fu[Gu]=Uu}return Fu},calcBSplinePoint:function(_u,$u,Ru,Ou){for(var Fu=this.findSpan(_u,Ou,$u),Nu=this.calcBasisFunctions(Fu,Ou,_u,$u),Vu=new Vector4(0,0,0,0),Gu=0;Gu<=_u;++Gu){var Uu=Ru[Fu-_u+Gu],Hu=Nu[Gu],Wu=Uu.w*Hu;Vu.x+=Uu.x*Wu,Vu.y+=Uu.y*Wu,Vu.z+=Uu.z*Wu,Vu.w+=Uu.w*Hu}return Vu},calcBasisFunctionDerivatives:function(_u,$u,Ru,Ou,Fu){for(var Nu=[],Vu=0;Vu<=Ru;++Vu)Nu[Vu]=0;for(var Gu=[],Vu=0;Vu<=Ou;++Vu)Gu[Vu]=Nu.slice(0);for(var Uu=[],Vu=0;Vu<=Ru;++Vu)Uu[Vu]=Nu.slice(0);Uu[0][0]=1;for(var Hu=Nu.slice(0),Wu=Nu.slice(0),Qu=1;Qu<=Ru;++Qu){Hu[Qu]=$u-Fu[_u+1-Qu],Wu[Qu]=Fu[_u+Qu]-$u;for(var qu=0,up=0;up<Qu;++up){var Ku=Wu[up+1],Yu=Hu[Qu-up];Uu[Qu][up]=Ku+Yu;var _c=Uu[up][Qu-1]/Uu[Qu][up];Uu[up][Qu]=qu+Ku*_c,qu=Yu*_c}Uu[Qu][Qu]=qu}for(var Qu=0;Qu<=Ru;++Qu)Gu[0][Qu]=Uu[Qu][Ru];for(var up=0;up<=Ru;++up){for(var Ju=0,Xu=1,Zu=[],Vu=0;Vu<=Ru;++Vu)Zu[Vu]=Nu.slice(0);Zu[0][0]=1;for(var Xc=1;Xc<=Ou;++Xc){var _h=0,ep=up-Xc,np=Ru-Xc;up>=Xc&&(Zu[Xu][0]=Zu[Ju][0]/Uu[np+1][ep],_h=Zu[Xu][0]*Uu[ep][np]);for(var ap=ep>=-1?1:-ep,lp=up-1<=np?Xc-1:Ru-up,Qu=ap;Qu<=lp;++Qu)Zu[Xu][Qu]=(Zu[Ju][Qu]-Zu[Ju][Qu-1])/Uu[np+1][ep+Qu],_h+=Zu[Xu][Qu]*Uu[ep+Qu][np];up<=np&&(Zu[Xu][Xc]=-Zu[Ju][Xc-1]/Uu[np+1][up],_h+=Zu[Xu][Xc]*Uu[up][np]),Gu[Xc][up]=_h;var Qu=Ju;Ju=Xu,Xu=Qu}}for(var up=Ru,Xc=1;Xc<=Ou;++Xc){for(var Qu=0;Qu<=Ru;++Qu)Gu[Xc][Qu]*=up;up*=Ru-Xc}return Gu},calcBSplineDerivatives:function(_u,$u,Ru,Ou,Fu){for(var Nu=Fu<_u?Fu:_u,Vu=[],Gu=this.findSpan(_u,Ou,$u),Uu=this.calcBasisFunctionDerivatives(Gu,Ou,_u,Nu,$u),Hu=[],Wu=0;Wu<Ru.length;++Wu){var Qu=Ru[Wu].clone(),qu=Qu.w;Qu.x*=qu,Qu.y*=qu,Qu.z*=qu,Hu[Wu]=Qu}for(var Ku=0;Ku<=Nu;++Ku){for(var Qu=Hu[Gu-_u].clone().multiplyScalar(Uu[Ku][0]),Yu=1;Yu<=_u;++Yu)Qu.add(Hu[Gu-_u+Yu].clone().multiplyScalar(Uu[Ku][Yu]));Vu[Ku]=Qu}for(var Ku=Nu+1;Ku<=Fu+1;++Ku)Vu[Ku]=new Vector4(0,0,0);return Vu},calcKoverI:function(_u,$u){for(var Ru=1,Ou=2;Ou<=_u;++Ou)Ru*=Ou;for(var Fu=1,Ou=2;Ou<=$u;++Ou)Fu*=Ou;for(var Ou=2;Ou<=_u-$u;++Ou)Fu*=Ou;return Ru/Fu},calcRationalCurveDerivatives:function(_u){for(var $u=_u.length,Ru=[],Ou=[],Fu=0;Fu<$u;++Fu){var Nu=_u[Fu];Ru[Fu]=new Vector3(Nu.x,Nu.y,Nu.z),Ou[Fu]=Nu.w}for(var Vu=[],Gu=0;Gu<$u;++Gu){for(var Uu=Ru[Gu].clone(),Fu=1;Fu<=Gu;++Fu)Uu.sub(Vu[Gu-Fu].clone().multiplyScalar(this.calcKoverI(Gu,Fu)*Ou[Fu]));Vu[Gu]=Uu.divideScalar(Ou[0])}return Vu},calcNURBSDerivatives:function(_u,$u,Ru,Ou,Fu){var Nu=this.calcBSplineDerivatives(_u,$u,Ru,Ou,Fu);return this.calcRationalCurveDerivatives(Nu)},calcSurfacePoint:function(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu){for(var Uu=this.findSpan(_u,Nu,Ru),Hu=this.findSpan($u,Vu,Ou),Wu=this.calcBasisFunctions(Uu,Nu,_u,Ru),Qu=this.calcBasisFunctions(Hu,Vu,$u,Ou),qu=[],Ku=0;Ku<=$u;++Ku){qu[Ku]=new Vector4(0,0,0,0);for(var Yu=0;Yu<=_u;++Yu){var _c=Fu[Uu-_u+Yu][Hu-$u+Ku].clone(),Ju=_c.w;_c.x*=Ju,_c.y*=Ju,_c.z*=Ju,qu[Ku].add(_c.multiplyScalar(Wu[Yu]))}}for(var Xu=new Vector4(0,0,0,0),Ku=0;Ku<=$u;++Ku)Xu.add(qu[Ku].multiplyScalar(Qu[Ku]));Xu.divideScalar(Xu.w),Gu.set(Xu.x,Xu.y,Xu.z)}},NURBSCurve=function(_u,$u,Ru,Ou,Fu){Curve.call(this),this.degree=_u,this.knots=$u,this.controlPoints=[],this.startKnot=Ou||0,this.endKnot=Fu||this.knots.length-1;for(var Nu=0;Nu<Ru.length;++Nu){var Vu=Ru[Nu];this.controlPoints[Nu]=new Vector4(Vu.x,Vu.y,Vu.z,Vu.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(_u,$u){var Ru=$u||new Vector3,Ou=this.knots[this.startKnot]+_u*(this.knots[this.endKnot]-this.knots[this.startKnot]),Fu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Ou);return Fu.w!=1&&Fu.divideScalar(Fu.w),Ru.set(Fu.x,Fu.y,Fu.z)};NURBSCurve.prototype.getTangent=function(_u,$u){var Ru=$u||new Vector3,Ou=this.knots[0]+_u*(this.knots[this.knots.length-1]-this.knots[0]),Fu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Ou,1);return Ru.copy(Fu[1]).normalize(),Ru};(function(){var _u,$u,Ru;function Ou(_f){Loader.call(this,_f)}Ou.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Ou,load:function(_f,tp,ip,rp){var op=this,sp=op.path===""?LoaderUtils.extractUrlBase(_f):op.path,cp=new FileLoader(this.manager);cp.setPath(op.path),cp.setResponseType("arraybuffer"),cp.load(_f,function(hp){try{tp(op.parse(hp,sp))}catch(dp){rp?rp(dp):console.error(dp),op.manager.itemError(_f)}},ip,rp)},parse:function(_f,tp){if(Qu(_f))_u=new Uu().parse(_f);else{var ip=np(_f);if(!qu(ip))throw new Error("THREE.FBXLoader: Unknown format.");if(Ku(ip)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Ku(ip));_u=new Gu().parse(ip)}var rp=new TextureLoader(this.manager).setPath(this.resourcePath||tp).setCrossOrigin(this.crossOrigin);return new Fu(rp,this.manager).parse(_u)}});function Fu(_f,tp){this.textureLoader=_f,this.manager=tp}Fu.prototype={constructor:Fu,parse:function(){$u=this.parseConnections();var _f=this.parseImages(),tp=this.parseTextures(_f),ip=this.parseMaterials(tp),rp=this.parseDeformers(),op=new Nu().parse(rp);return this.parseScene(rp,op,ip),Ru},parseConnections:function(){var _f=new Map;if("Connections"in _u){var tp=_u.Connections.connections;tp.forEach(function(ip){var rp=ip[0],op=ip[1],sp=ip[2];_f.has(rp)||_f.set(rp,{parents:[],children:[]});var cp={ID:op,relationship:sp};_f.get(rp).parents.push(cp),_f.has(op)||_f.set(op,{parents:[],children:[]});var hp={ID:rp,relationship:sp};_f.get(op).children.push(hp)})}return _f},parseImages:function(){var _f={},tp={};if("Video"in _u.Objects){var ip=_u.Objects.Video;for(var rp in ip){var op=ip[rp],sp=parseInt(rp);if(_f[sp]=op.RelativeFilename||op.Filename,"Content"in op){var cp=op.Content instanceof ArrayBuffer&&op.Content.byteLength>0,hp=typeof op.Content=="string"&&op.Content!=="";if(cp||hp){var dp=this.parseImage(ip[rp]);tp[op.RelativeFilename||op.Filename]=dp}}}}for(var sp in _f){var xp=_f[sp];tp[xp]!==void 0?_f[sp]=tp[xp]:_f[sp]=_f[sp].split("\\").pop()}return _f},parseImage:function(_f){var tp=_f.Content,ip=_f.RelativeFilename||_f.Filename,rp=ip.slice(ip.lastIndexOf(".")+1).toLowerCase(),op;switch(rp){case"bmp":op="image/bmp";break;case"jpg":case"jpeg":op="image/jpeg";break;case"png":op="image/png";break;case"tif":op="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",ip),op="image/tga";break;default:console.warn('FBXLoader: Image type "'+rp+'" is not supported.');return}if(typeof tp=="string")return"data:"+op+";base64,"+tp;var sp=new Uint8Array(tp);return window.URL.createObjectURL(new Blob([sp],{type:op}))},parseTextures:function(_f){var tp=new Map;if("Texture"in _u.Objects){var ip=_u.Objects.Texture;for(var rp in ip){var op=this.parseTexture(ip[rp],_f);tp.set(parseInt(rp),op)}}return tp},parseTexture:function(_f,tp){var ip=this.loadTexture(_f,tp);ip.ID=_f.id,ip.name=_f.attrName;var rp=_f.WrapModeU,op=_f.WrapModeV,sp=rp!==void 0?rp.value:0,cp=op!==void 0?op.value:0;if(ip.wrapS=sp===0?RepeatWrapping:ClampToEdgeWrapping,ip.wrapT=cp===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in _f){var hp=_f.Scaling.value;ip.repeat.x=hp[0],ip.repeat.y=hp[1]}return ip},loadTexture:function(_f,tp){var ip,rp=this.textureLoader.path,op=$u.get(_f.id).children;op!==void 0&&op.length>0&&tp[op[0].ID]!==void 0&&(ip=tp[op[0].ID],(ip.indexOf("blob:")===0||ip.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var sp,cp=_f.FileName.slice(-3).toLowerCase();if(cp==="tga"){var hp=this.manager.getHandler(".tga");hp===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",_f.RelativeFilename),sp=new Texture):sp=hp.load(ip)}else cp==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",_f.RelativeFilename),sp=new Texture):sp=this.textureLoader.load(ip);return this.textureLoader.setPath(rp),sp},parseMaterials:function(_f){var tp=new Map;if("Material"in _u.Objects){var ip=_u.Objects.Material;for(var rp in ip){var op=this.parseMaterial(ip[rp],_f);op!==null&&tp.set(parseInt(rp),op)}}return tp},parseMaterial:function(_f,tp){var ip=_f.id,rp=_f.attrName,op=_f.ShadingModel;if(typeof op=="object"&&(op=op.value),!$u.has(ip))return null;var sp=this.parseParameters(_f,tp,ip),cp;switch(op.toLowerCase()){case"phong":cp=new MeshPhongMaterial;break;case"lambert":cp=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',op),cp=new MeshPhongMaterial;break}return cp.setValues(sp),cp.name=rp,cp},parseParameters:function(_f,tp,ip){var rp={};_f.BumpFactor&&(rp.bumpScale=_f.BumpFactor.value),_f.Diffuse?rp.color=new Color().fromArray(_f.Diffuse.value):_f.DiffuseColor&&_f.DiffuseColor.type==="Color"&&(rp.color=new Color().fromArray(_f.DiffuseColor.value)),_f.DisplacementFactor&&(rp.displacementScale=_f.DisplacementFactor.value),_f.Emissive?rp.emissive=new Color().fromArray(_f.Emissive.value):_f.EmissiveColor&&_f.EmissiveColor.type==="Color"&&(rp.emissive=new Color().fromArray(_f.EmissiveColor.value)),_f.EmissiveFactor&&(rp.emissiveIntensity=parseFloat(_f.EmissiveFactor.value)),_f.Opacity&&(rp.opacity=parseFloat(_f.Opacity.value)),rp.opacity<1&&(rp.transparent=!0),_f.ReflectionFactor&&(rp.reflectivity=_f.ReflectionFactor.value),_f.Shininess&&(rp.shininess=_f.Shininess.value),_f.Specular?rp.specular=new Color().fromArray(_f.Specular.value):_f.SpecularColor&&_f.SpecularColor.type==="Color"&&(rp.specular=new Color().fromArray(_f.SpecularColor.value));var op=this;return $u.get(ip).children.forEach(function(sp){var cp=sp.relationship;switch(cp){case"Bump":rp.bumpMap=op.getTexture(tp,sp.ID);break;case"Maya|TEX_ao_map":rp.aoMap=op.getTexture(tp,sp.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":rp.map=op.getTexture(tp,sp.ID),rp.map.encoding=sRGBEncoding;break;case"DisplacementColor":rp.displacementMap=op.getTexture(tp,sp.ID);break;case"EmissiveColor":rp.emissiveMap=op.getTexture(tp,sp.ID),rp.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":rp.normalMap=op.getTexture(tp,sp.ID);break;case"ReflectionColor":rp.envMap=op.getTexture(tp,sp.ID),rp.envMap.mapping=EquirectangularReflectionMapping,rp.envMap.encoding=sRGBEncoding;break;case"SpecularColor":rp.specularMap=op.getTexture(tp,sp.ID),rp.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":rp.alphaMap=op.getTexture(tp,sp.ID),rp.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",cp);break}}),rp},getTexture:function(_f,tp){return"LayeredTexture"in _u.Objects&&tp in _u.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),tp=$u.get(tp).children[0].ID),_f.get(tp)},parseDeformers:function(){var _f={},tp={};if("Deformer"in _u.Objects){var ip=_u.Objects.Deformer;for(var rp in ip){var op=ip[rp],sp=$u.get(parseInt(rp));if(op.attrType==="Skin"){var cp=this.parseSkeleton(sp,ip);cp.ID=rp,sp.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),cp.geometryID=sp.parents[0].ID,_f[rp]=cp}else if(op.attrType==="BlendShape"){var hp={id:rp};hp.rawTargets=this.parseMorphTargets(sp,ip),hp.id=rp,sp.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),tp[rp]=hp}}}return{skeletons:_f,morphTargets:tp}},parseSkeleton:function(_f,tp){var ip=[];return _f.children.forEach(function(rp){var op=tp[rp.ID];if(op.attrType==="Cluster"){var sp={ID:rp.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(op.TransformLink.a)};"Indexes"in op&&(sp.indices=op.Indexes.a,sp.weights=op.Weights.a),ip.push(sp)}}),{rawBones:ip,bones:[]}},parseMorphTargets:function(_f,tp){for(var ip=[],rp=0;rp<_f.children.length;rp++){var op=_f.children[rp],sp=tp[op.ID],cp={name:sp.attrName,initialWeight:sp.DeformPercent,id:sp.id,fullWeights:sp.FullWeights.a};if(sp.attrType!=="BlendShapeChannel")return;cp.geoID=$u.get(parseInt(op.ID)).children.filter(function(hp){return hp.relationship===void 0})[0].ID,ip.push(cp)}return ip},parseScene:function(_f,tp,ip){Ru=new Group$1;var rp=this.parseModels(_f.skeletons,tp,ip),op=_u.Objects.Model,sp=this;rp.forEach(function(hp){var dp=op[hp.ID];sp.setLookAtProperties(hp,dp);var xp=$u.get(hp.ID).parents;xp.forEach(function(bp){var Rp=rp.get(bp.ID);Rp!==void 0&&Rp.add(hp)}),hp.parent===null&&Ru.add(hp)}),this.bindSkeleton(_f.skeletons,tp,rp),this.createAmbientLight(),this.setupMorphMaterials(),Ru.traverse(function(hp){if(hp.userData.transformData){hp.parent&&(hp.userData.transformData.parentMatrixWorld=hp.parent.matrix);var dp=Xc(hp.userData.transformData);hp.applyMatrix4(dp)}});var cp=new Vu().parse();Ru.children.length===1&&Ru.children[0].isGroup&&(Ru.children[0].animations=cp,Ru=Ru.children[0]),Ru.animations=cp},parseModels:function(_f,tp,ip){var rp=new Map,op=_u.Objects.Model;for(var sp in op){var cp=parseInt(sp),hp=op[sp],dp=$u.get(cp),xp=this.buildSkeleton(dp,_f,cp,hp.attrName);if(!xp){switch(hp.attrType){case"Camera":xp=this.createCamera(dp);break;case"Light":xp=this.createLight(dp);break;case"Mesh":xp=this.createMesh(dp,tp,ip);break;case"NurbsCurve":xp=this.createCurve(dp,tp);break;case"LimbNode":case"Root":xp=new Bone;break;case"Null":default:xp=new Group$1;break}xp.name=hp.attrName?PropertyBinding.sanitizeNodeName(hp.attrName):"",xp.ID=cp}this.getTransformData(xp,hp),rp.set(cp,xp)}return rp},buildSkeleton:function(_f,tp,ip,rp){var op=null;return _f.parents.forEach(function(sp){for(var cp in tp){var hp=tp[cp];hp.rawBones.forEach(function(dp,xp){if(dp.ID===sp.ID){var bp=op;op=new Bone,op.matrixWorld.copy(dp.transformLink),op.name=rp?PropertyBinding.sanitizeNodeName(rp):"",op.ID=ip,hp.bones[xp]=op,bp!==null&&op.add(bp)}})}}),op},createCamera:function(_f){var tp,ip;if(_f.children.forEach(function(Rp){var Tp=_u.Objects.NodeAttribute[Rp.ID];Tp!==void 0&&(ip=Tp)}),ip===void 0)tp=new Object3D;else{var rp=0;ip.CameraProjectionType!==void 0&&ip.CameraProjectionType.value===1&&(rp=1);var op=1;ip.NearPlane!==void 0&&(op=ip.NearPlane.value/1e3);var sp=1e3;ip.FarPlane!==void 0&&(sp=ip.FarPlane.value/1e3);var cp=window.innerWidth,hp=window.innerHeight;ip.AspectWidth!==void 0&&ip.AspectHeight!==void 0&&(cp=ip.AspectWidth.value,hp=ip.AspectHeight.value);var dp=cp/hp,xp=45;ip.FieldOfView!==void 0&&(xp=ip.FieldOfView.value);var bp=ip.FocalLength?ip.FocalLength.value:null;switch(rp){case 0:tp=new PerspectiveCamera(xp,dp,op,sp),bp!==null&&tp.setFocalLength(bp);break;case 1:tp=new OrthographicCamera(-cp/2,cp/2,hp/2,-hp/2,op,sp);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+rp+"."),tp=new Object3D;break}}return tp},createLight:function(_f){var tp,ip;if(_f.children.forEach(function(bp){var Rp=_u.Objects.NodeAttribute[bp.ID];Rp!==void 0&&(ip=Rp)}),ip===void 0)tp=new Object3D;else{var rp;ip.LightType===void 0?rp=0:rp=ip.LightType.value;var op=16777215;ip.Color!==void 0&&(op=new Color().fromArray(ip.Color.value));var sp=ip.Intensity===void 0?1:ip.Intensity.value/100;ip.CastLightOnObject!==void 0&&ip.CastLightOnObject.value===0&&(sp=0);var cp=0;ip.FarAttenuationEnd!==void 0&&(ip.EnableFarAttenuation!==void 0&&ip.EnableFarAttenuation.value===0?cp=0:cp=ip.FarAttenuationEnd.value);var hp=1;switch(rp){case 0:tp=new PointLight(op,sp,cp,hp);break;case 1:tp=new DirectionalLight(op,sp);break;case 2:var dp=Math.PI/3;ip.InnerAngle!==void 0&&(dp=MathUtils.degToRad(ip.InnerAngle.value));var xp=0;ip.OuterAngle!==void 0&&(xp=MathUtils.degToRad(ip.OuterAngle.value),xp=Math.max(xp,1)),tp=new SpotLight(op,sp,cp,dp,xp,hp);break;default:console.warn("THREE.FBXLoader: Unknown light type "+ip.LightType.value+", defaulting to a PointLight."),tp=new PointLight(op,sp);break}ip.CastShadows!==void 0&&ip.CastShadows.value===1&&(tp.castShadow=!0)}return tp},createMesh:function(_f,tp,ip){var rp,op=null,sp=null,cp=[];return _f.children.forEach(function(hp){tp.has(hp.ID)&&(op=tp.get(hp.ID)),ip.has(hp.ID)&&cp.push(ip.get(hp.ID))}),cp.length>1?sp=cp:cp.length>0?sp=cp[0]:(sp=new MeshPhongMaterial({color:13421772}),cp.push(sp)),"color"in op.attributes&&cp.forEach(function(hp){hp.vertexColors=!0}),op.FBX_Deformer?(cp.forEach(function(hp){hp.skinning=!0}),rp=new SkinnedMesh(op,sp),rp.normalizeSkinWeights()):rp=new Mesh(op,sp),rp},createCurve:function(_f,tp){var ip=_f.children.reduce(function(op,sp){return tp.has(sp.ID)&&(op=tp.get(sp.ID)),op},null),rp=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(ip,rp)},getTransformData:function(_f,tp){var ip={};"InheritType"in tp&&(ip.inheritType=parseInt(tp.InheritType.value)),"RotationOrder"in tp?ip.eulerOrder=_h(tp.RotationOrder.value):ip.eulerOrder="ZYX","Lcl_Translation"in tp&&(ip.translation=tp.Lcl_Translation.value),"PreRotation"in tp&&(ip.preRotation=tp.PreRotation.value),"Lcl_Rotation"in tp&&(ip.rotation=tp.Lcl_Rotation.value),"PostRotation"in tp&&(ip.postRotation=tp.PostRotation.value),"Lcl_Scaling"in tp&&(ip.scale=tp.Lcl_Scaling.value),"ScalingOffset"in tp&&(ip.scalingOffset=tp.ScalingOffset.value),"ScalingPivot"in tp&&(ip.scalingPivot=tp.ScalingPivot.value),"RotationOffset"in tp&&(ip.rotationOffset=tp.RotationOffset.value),"RotationPivot"in tp&&(ip.rotationPivot=tp.RotationPivot.value),_f.userData.transformData=ip},setLookAtProperties:function(_f,tp){if("LookAtProperty"in tp){var ip=$u.get(_f.ID).children;ip.forEach(function(rp){if(rp.relationship==="LookAtProperty"){var op=_u.Objects.Model[rp.ID];if("Lcl_Translation"in op){var sp=op.Lcl_Translation.value;_f.target!==void 0?(_f.target.position.fromArray(sp),Ru.add(_f.target)):_f.lookAt(new Vector3().fromArray(sp))}}})}},bindSkeleton:function(_f,tp,ip){var rp=this.parsePoseNodes();for(var op in _f){var sp=_f[op],cp=$u.get(parseInt(sp.ID)).parents;cp.forEach(function(hp){if(tp.has(hp.ID)){var dp=hp.ID,xp=$u.get(dp);xp.parents.forEach(function(bp){if(ip.has(bp.ID)){var Rp=ip.get(bp.ID);Rp.bind(new Skeleton(sp.bones),rp[bp.ID])}})}})}},parsePoseNodes:function(){var _f={};if("Pose"in _u.Objects){var tp=_u.Objects.Pose;for(var ip in tp)if(tp[ip].attrType==="BindPose"){var rp=tp[ip].PoseNode;Array.isArray(rp)?rp.forEach(function(op){_f[op.Node]=new Matrix4().fromArray(op.Matrix.a)}):_f[rp.Node]=new Matrix4().fromArray(rp.Matrix.a)}}return _f},createAmbientLight:function(){if("GlobalSettings"in _u&&"AmbientColor"in _u.GlobalSettings){var _f=_u.GlobalSettings.AmbientColor.value,tp=_f[0],ip=_f[1],rp=_f[2];if(tp!==0||ip!==0||rp!==0){var op=new Color(tp,ip,rp);Ru.add(new AmbientLight(op,1))}}},setupMorphMaterials:function(){var _f=this;Ru.traverse(function(tp){tp.isMesh&&tp.geometry.morphAttributes.position&&tp.geometry.morphAttributes.position.length&&(Array.isArray(tp.material)?tp.material.forEach(function(ip,rp){_f.setupMorphMaterial(tp,ip,rp)}):_f.setupMorphMaterial(tp,tp.material))})},setupMorphMaterial:function(_f,tp,ip){var rp=_f.uuid,op=tp.uuid,sp=!1;if(Ru.traverse(function(hp){hp.isMesh&&(Array.isArray(hp.material)?hp.material.forEach(function(dp){dp.uuid===op&&hp.uuid!==rp&&(sp=!0)}):hp.material.uuid===op&&hp.uuid!==rp&&(sp=!0))}),sp===!0){var cp=tp.clone();cp.morphTargets=!0,ip===void 0?_f.material=cp:_f.material[ip]=cp}else tp.morphTargets=!0}};function Nu(){}Nu.prototype={constructor:Nu,parse:function(_f){var tp=new Map;if("Geometry"in _u.Objects){var ip=_u.Objects.Geometry;for(var rp in ip){var op=$u.get(parseInt(rp)),sp=this.parseGeometry(op,ip[rp],_f);tp.set(parseInt(rp),sp)}}return tp},parseGeometry:function(_f,tp,ip){switch(tp.attrType){case"Mesh":return this.parseMeshGeometry(_f,tp,ip);case"NurbsCurve":return this.parseNurbsGeometry(tp)}},parseMeshGeometry:function(_f,tp,ip){var rp=ip.skeletons,op=[],sp=_f.parents.map(function(bp){return _u.Objects.Model[bp.ID]});if(sp.length!==0){var cp=_f.children.reduce(function(bp,Rp){return rp[Rp.ID]!==void 0&&(bp=rp[Rp.ID]),bp},null);_f.children.forEach(function(bp){ip.morphTargets[bp.ID]!==void 0&&op.push(ip.morphTargets[bp.ID])});var hp=sp[0],dp={};"RotationOrder"in hp&&(dp.eulerOrder=_h(hp.RotationOrder.value)),"InheritType"in hp&&(dp.inheritType=parseInt(hp.InheritType.value)),"GeometricTranslation"in hp&&(dp.translation=hp.GeometricTranslation.value),"GeometricRotation"in hp&&(dp.rotation=hp.GeometricRotation.value),"GeometricScaling"in hp&&(dp.scale=hp.GeometricScaling.value);var xp=Xc(dp);return this.genGeometry(tp,cp,op,xp)}},genGeometry:function(_f,tp,ip,rp){var op=new BufferGeometry;_f.attrName&&(op.name=_f.attrName);var sp=this.parseGeoNode(_f,tp),cp=this.genBuffers(sp),hp=new Float32BufferAttribute(cp.vertex,3);if(hp.applyMatrix4(rp),op.setAttribute("position",hp),cp.colors.length>0&&op.setAttribute("color",new Float32BufferAttribute(cp.colors,3)),tp&&(op.setAttribute("skinIndex",new Uint16BufferAttribute(cp.weightsIndices,4)),op.setAttribute("skinWeight",new Float32BufferAttribute(cp.vertexWeights,4)),op.FBX_Deformer=tp),cp.normal.length>0){var dp=new Matrix3().getNormalMatrix(rp),xp=new Float32BufferAttribute(cp.normal,3);xp.applyNormalMatrix(dp),op.setAttribute("normal",xp)}if(cp.uvs.forEach(function(Ip,Vp){var Lp="uv"+(Vp+1).toString();Vp===0&&(Lp="uv"),op.setAttribute(Lp,new Float32BufferAttribute(cp.uvs[Vp],2))}),sp.material&&sp.material.mappingType!=="AllSame"){var bp=cp.materialIndex[0],Rp=0;if(cp.materialIndex.forEach(function(Ip,Vp){Ip!==bp&&(op.addGroup(Rp,Vp-Rp,bp),bp=Ip,Rp=Vp)}),op.groups.length>0){var Tp=op.groups[op.groups.length-1],Up=Tp.start+Tp.count;Up!==cp.materialIndex.length&&op.addGroup(Up,cp.materialIndex.length-Up,bp)}op.groups.length===0&&op.addGroup(0,cp.materialIndex.length,cp.materialIndex[0])}return this.addMorphTargets(op,_f,ip,rp),op},parseGeoNode:function(_f,tp){var ip={};if(ip.vertexPositions=_f.Vertices!==void 0?_f.Vertices.a:[],ip.vertexIndices=_f.PolygonVertexIndex!==void 0?_f.PolygonVertexIndex.a:[],_f.LayerElementColor&&(ip.color=this.parseVertexColors(_f.LayerElementColor[0])),_f.LayerElementMaterial&&(ip.material=this.parseMaterialIndices(_f.LayerElementMaterial[0])),_f.LayerElementNormal&&(ip.normal=this.parseNormals(_f.LayerElementNormal[0])),_f.LayerElementUV){ip.uv=[];for(var rp=0;_f.LayerElementUV[rp];)ip.uv.push(this.parseUVs(_f.LayerElementUV[rp])),rp++}return ip.weightTable={},tp!==null&&(ip.skeleton=tp,tp.rawBones.forEach(function(op,sp){op.indices.forEach(function(cp,hp){ip.weightTable[cp]===void 0&&(ip.weightTable[cp]=[]),ip.weightTable[cp].push({id:sp,weight:op.weights[hp]})})})),ip},genBuffers:function(_f){var tp={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},ip=0,rp=0,op=!1,sp=[],cp=[],hp=[],dp=[],xp=[],bp=[],Rp=this;return _f.vertexIndices.forEach(function(Tp,Up){var Ip=!1;Tp<0&&(Tp=Tp^-1,Ip=!0);var Vp=[],Lp=[];if(sp.push(Tp*3,Tp*3+1,Tp*3+2),_f.color){var mp=Ju(Up,ip,Tp,_f.color);hp.push(mp[0],mp[1],mp[2])}if(_f.skeleton){if(_f.weightTable[Tp]!==void 0&&_f.weightTable[Tp].forEach(function(Cp){Lp.push(Cp.weight),Vp.push(Cp.id)}),Lp.length>4){op||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),op=!0);var pp=[0,0,0,0],wp=[0,0,0,0];Lp.forEach(function(Cp,$p){var Fp=Cp,jp=Vp[$p];wp.forEach(function(kp,fp,yp){if(Fp>kp){yp[fp]=Fp,Fp=kp;var Gp=pp[fp];pp[fp]=jp,jp=Gp}})}),Vp=pp,Lp=wp}for(;Lp.length<4;)Lp.push(0),Vp.push(0);for(var Ap=0;Ap<4;++Ap)xp.push(Lp[Ap]),bp.push(Vp[Ap])}if(_f.normal){var mp=Ju(Up,ip,Tp,_f.normal);cp.push(mp[0],mp[1],mp[2])}if(_f.material&&_f.material.mappingType!=="AllSame")var Sp=Ju(Up,ip,Tp,_f.material)[0];_f.uv&&_f.uv.forEach(function(Cp,$p){var Fp=Ju(Up,ip,Tp,Cp);dp[$p]===void 0&&(dp[$p]=[]),dp[$p].push(Fp[0]),dp[$p].push(Fp[1])}),rp++,Ip&&(Rp.genFace(tp,_f,sp,Sp,cp,hp,dp,xp,bp,rp),ip++,rp=0,sp=[],cp=[],hp=[],dp=[],xp=[],bp=[])}),tp},genFace:function(_f,tp,ip,rp,op,sp,cp,hp,dp,xp){for(var bp=2;bp<xp;bp++)_f.vertex.push(tp.vertexPositions[ip[0]]),_f.vertex.push(tp.vertexPositions[ip[1]]),_f.vertex.push(tp.vertexPositions[ip[2]]),_f.vertex.push(tp.vertexPositions[ip[(bp-1)*3]]),_f.vertex.push(tp.vertexPositions[ip[(bp-1)*3+1]]),_f.vertex.push(tp.vertexPositions[ip[(bp-1)*3+2]]),_f.vertex.push(tp.vertexPositions[ip[bp*3]]),_f.vertex.push(tp.vertexPositions[ip[bp*3+1]]),_f.vertex.push(tp.vertexPositions[ip[bp*3+2]]),tp.skeleton&&(_f.vertexWeights.push(hp[0]),_f.vertexWeights.push(hp[1]),_f.vertexWeights.push(hp[2]),_f.vertexWeights.push(hp[3]),_f.vertexWeights.push(hp[(bp-1)*4]),_f.vertexWeights.push(hp[(bp-1)*4+1]),_f.vertexWeights.push(hp[(bp-1)*4+2]),_f.vertexWeights.push(hp[(bp-1)*4+3]),_f.vertexWeights.push(hp[bp*4]),_f.vertexWeights.push(hp[bp*4+1]),_f.vertexWeights.push(hp[bp*4+2]),_f.vertexWeights.push(hp[bp*4+3]),_f.weightsIndices.push(dp[0]),_f.weightsIndices.push(dp[1]),_f.weightsIndices.push(dp[2]),_f.weightsIndices.push(dp[3]),_f.weightsIndices.push(dp[(bp-1)*4]),_f.weightsIndices.push(dp[(bp-1)*4+1]),_f.weightsIndices.push(dp[(bp-1)*4+2]),_f.weightsIndices.push(dp[(bp-1)*4+3]),_f.weightsIndices.push(dp[bp*4]),_f.weightsIndices.push(dp[bp*4+1]),_f.weightsIndices.push(dp[bp*4+2]),_f.weightsIndices.push(dp[bp*4+3])),tp.color&&(_f.colors.push(sp[0]),_f.colors.push(sp[1]),_f.colors.push(sp[2]),_f.colors.push(sp[(bp-1)*3]),_f.colors.push(sp[(bp-1)*3+1]),_f.colors.push(sp[(bp-1)*3+2]),_f.colors.push(sp[bp*3]),_f.colors.push(sp[bp*3+1]),_f.colors.push(sp[bp*3+2])),tp.material&&tp.material.mappingType!=="AllSame"&&(_f.materialIndex.push(rp),_f.materialIndex.push(rp),_f.materialIndex.push(rp)),tp.normal&&(_f.normal.push(op[0]),_f.normal.push(op[1]),_f.normal.push(op[2]),_f.normal.push(op[(bp-1)*3]),_f.normal.push(op[(bp-1)*3+1]),_f.normal.push(op[(bp-1)*3+2]),_f.normal.push(op[bp*3]),_f.normal.push(op[bp*3+1]),_f.normal.push(op[bp*3+2])),tp.uv&&tp.uv.forEach(function(Rp,Tp){_f.uvs[Tp]===void 0&&(_f.uvs[Tp]=[]),_f.uvs[Tp].push(cp[Tp][0]),_f.uvs[Tp].push(cp[Tp][1]),_f.uvs[Tp].push(cp[Tp][(bp-1)*2]),_f.uvs[Tp].push(cp[Tp][(bp-1)*2+1]),_f.uvs[Tp].push(cp[Tp][bp*2]),_f.uvs[Tp].push(cp[Tp][bp*2+1])})},addMorphTargets:function(_f,tp,ip,rp){if(ip.length!==0){_f.morphTargetsRelative=!0,_f.morphAttributes.position=[];var op=this;ip.forEach(function(sp){sp.rawTargets.forEach(function(cp){var hp=_u.Objects.Geometry[cp.geoID];hp!==void 0&&op.genMorphGeometry(_f,tp,hp,rp,cp.name)})})}},genMorphGeometry:function(_f,tp,ip,rp,op){for(var sp=tp.PolygonVertexIndex!==void 0?tp.PolygonVertexIndex.a:[],cp=ip.Vertices!==void 0?ip.Vertices.a:[],hp=ip.Indexes!==void 0?ip.Indexes.a:[],dp=_f.attributes.position.count*3,xp=new Float32Array(dp),bp=0;bp<hp.length;bp++){var Rp=hp[bp]*3;xp[Rp]=cp[bp*3],xp[Rp+1]=cp[bp*3+1],xp[Rp+2]=cp[bp*3+2]}var Tp={vertexIndices:sp,vertexPositions:xp},Up=this.genBuffers(Tp),Ip=new Float32BufferAttribute(Up.vertex,3);Ip.name=op||ip.attrName,Ip.applyMatrix4(rp),_f.morphAttributes.position.push(Ip)},parseNormals:function(_f){var tp=_f.MappingInformationType,ip=_f.ReferenceInformationType,rp=_f.Normals.a,op=[];return ip==="IndexToDirect"&&("NormalIndex"in _f?op=_f.NormalIndex.a:"NormalsIndex"in _f&&(op=_f.NormalsIndex.a)),{dataSize:3,buffer:rp,indices:op,mappingType:tp,referenceType:ip}},parseUVs:function(_f){var tp=_f.MappingInformationType,ip=_f.ReferenceInformationType,rp=_f.UV.a,op=[];return ip==="IndexToDirect"&&(op=_f.UVIndex.a),{dataSize:2,buffer:rp,indices:op,mappingType:tp,referenceType:ip}},parseVertexColors:function(_f){var tp=_f.MappingInformationType,ip=_f.ReferenceInformationType,rp=_f.Colors.a,op=[];return ip==="IndexToDirect"&&(op=_f.ColorIndex.a),{dataSize:4,buffer:rp,indices:op,mappingType:tp,referenceType:ip}},parseMaterialIndices:function(_f){var tp=_f.MappingInformationType,ip=_f.ReferenceInformationType;if(tp==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:ip};for(var rp=_f.Materials.a,op=[],sp=0;sp<rp.length;++sp)op.push(sp);return{dataSize:1,buffer:rp,indices:op,mappingType:tp,referenceType:ip}},parseNurbsGeometry:function(_f){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var tp=parseInt(_f.Order);if(isNaN(tp))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",_f.Order,_f.id),new BufferGeometry;for(var ip=tp-1,rp=_f.KnotVector.a,op=[],sp=_f.Points.a,cp=0,hp=sp.length;cp<hp;cp+=4)op.push(new Vector4().fromArray(sp,cp));var dp,xp;if(_f.Form==="Closed")op.push(op[0]);else if(_f.Form==="Periodic"){dp=ip,xp=rp.length-1-dp;for(var cp=0;cp<ip;++cp)op.push(op[cp])}var bp=new NURBSCurve(ip,rp,op,dp,xp),Rp=bp.getPoints(op.length*7),Tp=new Float32Array(Rp.length*3);Rp.forEach(function(Ip,Vp){Ip.toArray(Tp,Vp*3)});var Up=new BufferGeometry;return Up.setAttribute("position",new BufferAttribute(Tp,3)),Up}};function Vu(){}Vu.prototype={constructor:Vu,parse:function(){var _f=[],tp=this.parseClips();if(tp!==void 0)for(var ip in tp){var rp=tp[ip],op=this.addClip(rp);_f.push(op)}return _f},parseClips:function(){if(_u.Objects.AnimationCurve!==void 0){var _f=this.parseAnimationCurveNodes();this.parseAnimationCurves(_f);var tp=this.parseAnimationLayers(_f),ip=this.parseAnimStacks(tp);return ip}},parseAnimationCurveNodes:function(){var _f=_u.Objects.AnimationCurveNode,tp=new Map;for(var ip in _f){var rp=_f[ip];if(rp.attrName.match(/S|R|T|DeformPercent/)!==null){var op={id:rp.id,attr:rp.attrName,curves:{}};tp.set(op.id,op)}}return tp},parseAnimationCurves:function(_f){var tp=_u.Objects.AnimationCurve;for(var ip in tp){var rp={id:tp[ip].id,times:tp[ip].KeyTime.a.map(Yu),values:tp[ip].KeyValueFloat.a},op=$u.get(rp.id);if(op!==void 0){var sp=op.parents[0].ID,cp=op.parents[0].relationship;cp.match(/X/)?_f.get(sp).curves.x=rp:cp.match(/Y/)?_f.get(sp).curves.y=rp:cp.match(/Z/)?_f.get(sp).curves.z=rp:cp.match(/d|DeformPercent/)&&_f.has(sp)&&(_f.get(sp).curves.morph=rp)}}},parseAnimationLayers:function(_f){var tp=_u.Objects.AnimationLayer,ip=new Map;for(var rp in tp){var op=[],sp=$u.get(parseInt(rp));if(sp!==void 0){var cp=sp.children;cp.forEach(function(hp,dp){if(_f.has(hp.ID)){var xp=_f.get(hp.ID);if(xp.curves.x!==void 0||xp.curves.y!==void 0||xp.curves.z!==void 0){if(op[dp]===void 0){var bp=$u.get(hp.ID).parents.filter(function(Lp){return Lp.relationship!==void 0})[0].ID;if(bp!==void 0){var Rp=_u.Objects.Model[bp.toString()];if(Rp===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",hp);return}var Tp={modelName:Rp.attrName?PropertyBinding.sanitizeNodeName(Rp.attrName):"",ID:Rp.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ru.traverse(function(Lp){Lp.ID===Rp.id&&(Tp.transform=Lp.matrix,Lp.userData.transformData&&(Tp.eulerOrder=Lp.userData.transformData.eulerOrder))}),Tp.transform||(Tp.transform=new Matrix4),"PreRotation"in Rp&&(Tp.preRotation=Rp.PreRotation.value),"PostRotation"in Rp&&(Tp.postRotation=Rp.PostRotation.value),op[dp]=Tp}}op[dp]&&(op[dp][xp.attr]=xp)}else if(xp.curves.morph!==void 0){if(op[dp]===void 0){var Up=$u.get(hp.ID).parents.filter(function(wp){return wp.relationship!==void 0})[0].ID,Ip=$u.get(Up).parents[0].ID,Vp=$u.get(Ip).parents[0].ID,bp=$u.get(Vp).parents[0].ID,Rp=_u.Objects.Model[bp],Tp={modelName:Rp.attrName?PropertyBinding.sanitizeNodeName(Rp.attrName):"",morphName:_u.Objects.Deformer[Up].attrName};op[dp]=Tp}op[dp][xp.attr]=xp}}}),ip.set(parseInt(rp),op)}}return ip},parseAnimStacks:function(_f){var tp=_u.Objects.AnimationStack,ip={};for(var rp in tp){var op=$u.get(parseInt(rp)).children;op.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var sp=_f.get(op[0].ID);ip[rp]={name:tp[rp].attrName,layer:sp}}return ip},addClip:function(_f){var tp=[],ip=this;return _f.layer.forEach(function(rp){tp=tp.concat(ip.generateTracks(rp))}),new AnimationClip(_f.name,-1,tp)},generateTracks:function(_f){var tp=[],ip=new Vector3,rp=new Quaternion,op=new Vector3;if(_f.transform&&_f.transform.decompose(ip,rp,op),ip=ip.toArray(),rp=new Euler().setFromQuaternion(rp,_f.eulerOrder).toArray(),op=op.toArray(),_f.T!==void 0&&Object.keys(_f.T.curves).length>0){var sp=this.generateVectorTrack(_f.modelName,_f.T.curves,ip,"position");sp!==void 0&&tp.push(sp)}if(_f.R!==void 0&&Object.keys(_f.R.curves).length>0){var cp=this.generateRotationTrack(_f.modelName,_f.R.curves,rp,_f.preRotation,_f.postRotation,_f.eulerOrder);cp!==void 0&&tp.push(cp)}if(_f.S!==void 0&&Object.keys(_f.S.curves).length>0){var hp=this.generateVectorTrack(_f.modelName,_f.S.curves,op,"scale");hp!==void 0&&tp.push(hp)}if(_f.DeformPercent!==void 0){var dp=this.generateMorphTrack(_f);dp!==void 0&&tp.push(dp)}return tp},generateVectorTrack:function(_f,tp,ip,rp){var op=this.getTimesForAllAxes(tp),sp=this.getKeyframeTrackValues(op,tp,ip);return new VectorKeyframeTrack(_f+"."+rp,op,sp)},generateRotationTrack:function(_f,tp,ip,rp,op,sp){tp.x!==void 0&&(this.interpolateRotations(tp.x),tp.x.values=tp.x.values.map(MathUtils.degToRad)),tp.y!==void 0&&(this.interpolateRotations(tp.y),tp.y.values=tp.y.values.map(MathUtils.degToRad)),tp.z!==void 0&&(this.interpolateRotations(tp.z),tp.z.values=tp.z.values.map(MathUtils.degToRad));var cp=this.getTimesForAllAxes(tp),hp=this.getKeyframeTrackValues(cp,tp,ip);rp!==void 0&&(rp=rp.map(MathUtils.degToRad),rp.push(sp),rp=new Euler().fromArray(rp),rp=new Quaternion().setFromEuler(rp)),op!==void 0&&(op=op.map(MathUtils.degToRad),op.push(sp),op=new Euler().fromArray(op),op=new Quaternion().setFromEuler(op).inverse());for(var dp=new Quaternion,xp=new Euler,bp=[],Rp=0;Rp<hp.length;Rp+=3)xp.set(hp[Rp],hp[Rp+1],hp[Rp+2],sp),dp.setFromEuler(xp),rp!==void 0&&dp.premultiply(rp),op!==void 0&&dp.multiply(op),dp.toArray(bp,Rp/3*4);return new QuaternionKeyframeTrack(_f+".quaternion",cp,bp)},generateMorphTrack:function(_f){var tp=_f.DeformPercent.curves.morph,ip=tp.values.map(function(op){return op/100}),rp=Ru.getObjectByName(_f.modelName).morphTargetDictionary[_f.morphName];return new NumberKeyframeTrack(_f.modelName+".morphTargetInfluences["+rp+"]",tp.times,ip)},getTimesForAllAxes:function(_f){var tp=[];return _f.x!==void 0&&(tp=tp.concat(_f.x.times)),_f.y!==void 0&&(tp=tp.concat(_f.y.times)),_f.z!==void 0&&(tp=tp.concat(_f.z.times)),tp=tp.sort(function(ip,rp){return ip-rp}).filter(function(ip,rp,op){return op.indexOf(ip)==rp}),tp},getKeyframeTrackValues:function(_f,tp,ip){var rp=ip,op=[],sp=-1,cp=-1,hp=-1;return _f.forEach(function(dp){if(tp.x&&(sp=tp.x.times.indexOf(dp)),tp.y&&(cp=tp.y.times.indexOf(dp)),tp.z&&(hp=tp.z.times.indexOf(dp)),sp!==-1){var xp=tp.x.values[sp];op.push(xp),rp[0]=xp}else op.push(rp[0]);if(cp!==-1){var bp=tp.y.values[cp];op.push(bp),rp[1]=bp}else op.push(rp[1]);if(hp!==-1){var Rp=tp.z.values[hp];op.push(Rp),rp[2]=Rp}else op.push(rp[2])}),op},interpolateRotations:function(_f){for(var tp=1;tp<_f.values.length;tp++){var ip=_f.values[tp-1],rp=_f.values[tp]-ip,op=Math.abs(rp);if(op>=180){for(var sp=op/180,cp=rp/sp,hp=ip+cp,dp=_f.times[tp-1],xp=_f.times[tp]-dp,bp=xp/sp,Rp=dp+bp,Tp=[],Up=[];Rp<_f.times[tp];)Tp.push(Rp),Rp+=bp,Up.push(hp),hp+=cp;_f.times=up(_f.times,tp,Tp),_f.values=up(_f.values,tp,Up)}}}};function Gu(){}Gu.prototype={constructor:Gu,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(_f){this.nodeStack.push(_f),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(_f,tp){this.currentProp=_f,this.currentPropName=tp},parse:function(_f){this.currentIndent=0,this.allNodes=new Wu,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var tp=this,ip=_f.split(/[\r\n]+/);return ip.forEach(function(rp,op){var sp=rp.match(/^[\s\t]*;/),cp=rp.match(/^[\s\t]*$/);if(!(sp||cp)){var hp=rp.match("^\\t{"+tp.currentIndent+"}(\\w+):(.*){",""),dp=rp.match("^\\t{"+tp.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),xp=rp.match("^\\t{"+(tp.currentIndent-1)+"}}");hp?tp.parseNodeBegin(rp,hp):dp?tp.parseNodeProperty(rp,dp,ip[++op]):xp?tp.popStack():rp.match(/^[^\s\t}]/)&&tp.parseNodePropertyContinued(rp)}}),this.allNodes},parseNodeBegin:function(_f,tp){var ip=tp[1].trim().replace(/^"/,"").replace(/"$/,""),rp=tp[2].split(",").map(function(hp){return hp.trim().replace(/^"/,"").replace(/"$/,"")}),op={name:ip},sp=this.parseNodeAttr(rp),cp=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(ip,op):ip in cp?(ip==="PoseNode"?cp.PoseNode.push(op):cp[ip].id!==void 0&&(cp[ip]={},cp[ip][cp[ip].id]=cp[ip]),sp.id!==""&&(cp[ip][sp.id]=op)):typeof sp.id=="number"?(cp[ip]={},cp[ip][sp.id]=op):ip!=="Properties70"&&(ip==="PoseNode"?cp[ip]=[op]:cp[ip]=op),typeof sp.id=="number"&&(op.id=sp.id),sp.name!==""&&(op.attrName=sp.name),sp.type!==""&&(op.attrType=sp.type),this.pushStack(op)},parseNodeAttr:function(_f){var tp=_f[0];_f[0]!==""&&(tp=parseInt(_f[0]),isNaN(tp)&&(tp=_f[0]));var ip="",rp="";return _f.length>1&&(ip=_f[1].replace(/^(\w+)::/,""),rp=_f[2]),{id:tp,name:ip,type:rp}},parseNodeProperty:function(_f,tp,ip){var rp=tp[1].replace(/^"/,"").replace(/"$/,"").trim(),op=tp[2].replace(/^"/,"").replace(/"$/,"").trim();rp==="Content"&&op===","&&(op=ip.replace(/"/g,"").replace(/,$/,"").trim());var sp=this.getCurrentNode(),cp=sp.name;if(cp==="Properties70"){this.parseNodeSpecialProperty(_f,rp,op);return}if(rp==="C"){var hp=op.split(",").slice(1),dp=parseInt(hp[0]),xp=parseInt(hp[1]),bp=op.split(",").slice(3);bp=bp.map(function(Rp){return Rp.trim().replace(/^"/,"")}),rp="connections",op=[dp,xp],ap(op,bp),sp[rp]===void 0&&(sp[rp]=[])}rp==="Node"&&(sp.id=op),rp in sp&&Array.isArray(sp[rp])?sp[rp].push(op):rp!=="a"?sp[rp]=op:sp.a=op,this.setCurrentProp(sp,rp),rp==="a"&&op.slice(-1)!==","&&(sp.a=ep(op))},parseNodePropertyContinued:function(_f){var tp=this.getCurrentNode();tp.a+=_f,_f.slice(-1)!==","&&(tp.a=ep(tp.a))},parseNodeSpecialProperty:function(_f,tp,ip){var rp=ip.split('",').map(function(xp){return xp.trim().replace(/^\"/,"").replace(/\s/,"_")}),op=rp[0],sp=rp[1],cp=rp[2],hp=rp[3],dp=rp[4];switch(sp){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":dp=parseFloat(dp);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":dp=ep(dp);break}this.getPrevNode()[op]={type:sp,type2:cp,flag:hp,value:dp},this.setCurrentProp(this.getPrevNode(),op)}};function Uu(){}Uu.prototype={constructor:Uu,parse:function(_f){var tp=new Hu(_f);tp.skip(23);var ip=tp.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+ip);for(var rp=new Wu;!this.endOfContent(tp);){var op=this.parseNode(tp,ip);op!==null&&rp.add(op.name,op)}return rp},endOfContent:function(_f){return _f.size()%16===0?(_f.getOffset()+160+16&-16)>=_f.size():_f.getOffset()+160+16>=_f.size()},parseNode:function(_f,tp){var ip={},rp=tp>=7500?_f.getUint64():_f.getUint32(),op=tp>=7500?_f.getUint64():_f.getUint32();tp>=7500?_f.getUint64():_f.getUint32();var sp=_f.getUint8(),cp=_f.getString(sp);if(rp===0)return null;for(var hp=[],dp=0;dp<op;dp++)hp.push(this.parseProperty(_f));var xp=hp.length>0?hp[0]:"",bp=hp.length>1?hp[1]:"",Rp=hp.length>2?hp[2]:"";for(ip.singleProperty=op===1&&_f.getOffset()===rp;rp>_f.getOffset();){var Tp=this.parseNode(_f,tp);Tp!==null&&this.parseSubNode(cp,ip,Tp)}return ip.propertyList=hp,typeof xp=="number"&&(ip.id=xp),bp!==""&&(ip.attrName=bp),Rp!==""&&(ip.attrType=Rp),cp!==""&&(ip.name=cp),ip},parseSubNode:function(_f,tp,ip){if(ip.singleProperty===!0){var rp=ip.propertyList[0];Array.isArray(rp)?(tp[ip.name]=ip,ip.a=rp):tp[ip.name]=rp}else if(_f==="Connections"&&ip.name==="C"){var op=[];ip.propertyList.forEach(function(Rp,Tp){Tp!==0&&op.push(Rp)}),tp.connections===void 0&&(tp.connections=[]),tp.connections.push(op)}else if(ip.name==="Properties70"){var sp=Object.keys(ip);sp.forEach(function(Rp){tp[Rp]=ip[Rp]})}else if(_f==="Properties70"&&ip.name==="P"){var cp=ip.propertyList[0],hp=ip.propertyList[1],dp=ip.propertyList[2],xp=ip.propertyList[3],bp;cp.indexOf("Lcl ")===0&&(cp=cp.replace("Lcl ","Lcl_")),hp.indexOf("Lcl ")===0&&(hp=hp.replace("Lcl ","Lcl_")),hp==="Color"||hp==="ColorRGB"||hp==="Vector"||hp==="Vector3D"||hp.indexOf("Lcl_")===0?bp=[ip.propertyList[4],ip.propertyList[5],ip.propertyList[6]]:bp=ip.propertyList[4],tp[cp]={type:hp,type2:dp,flag:xp,value:bp}}else tp[ip.name]===void 0?typeof ip.id=="number"?(tp[ip.name]={},tp[ip.name][ip.id]=ip):tp[ip.name]=ip:ip.name==="PoseNode"?(Array.isArray(tp[ip.name])||(tp[ip.name]=[tp[ip.name]]),tp[ip.name].push(ip)):tp[ip.name][ip.id]===void 0&&(tp[ip.name][ip.id]=ip)},parseProperty:function(_f){var tp=_f.getString(1);switch(tp){case"C":return _f.getBoolean();case"D":return _f.getFloat64();case"F":return _f.getFloat32();case"I":return _f.getInt32();case"L":return _f.getInt64();case"R":var ip=_f.getUint32();return _f.getArrayBuffer(ip);case"S":var ip=_f.getUint32();return _f.getString(ip);case"Y":return _f.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var rp=_f.getUint32(),op=_f.getUint32(),sp=_f.getUint32();if(op===0)switch(tp){case"b":case"c":return _f.getBooleanArray(rp);case"d":return _f.getFloat64Array(rp);case"f":return _f.getFloat32Array(rp);case"i":return _f.getInt32Array(rp);case"l":return _f.getInt64Array(rp)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var cp=new Zlib.Inflate(new Uint8Array(_f.getArrayBuffer(sp))),hp=new Hu(cp.decompress().buffer);switch(tp){case"b":case"c":return hp.getBooleanArray(rp);case"d":return hp.getFloat64Array(rp);case"f":return hp.getFloat32Array(rp);case"i":return hp.getInt32Array(rp);case"l":return hp.getInt64Array(rp)}default:throw new Error("THREE.FBXLoader: Unknown property type "+tp)}}};function Hu(_f,tp){this.dv=new DataView(_f),this.offset=0,this.littleEndian=tp!==void 0?tp:!0}Hu.prototype={constructor:Hu,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(_f){this.offset+=_f},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp.push(this.getBoolean());return tp},getUint8:function(){var _f=this.dv.getUint8(this.offset);return this.offset+=1,_f},getInt16:function(){var _f=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,_f},getInt32:function(){var _f=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,_f},getInt32Array:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp.push(this.getInt32());return tp},getUint32:function(){var _f=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,_f},getInt64:function(){var _f,tp;return this.littleEndian?(_f=this.getUint32(),tp=this.getUint32()):(tp=this.getUint32(),_f=this.getUint32()),tp&2147483648?(tp=~tp&4294967295,_f=~_f&4294967295,_f===4294967295&&(tp=tp+1&4294967295),_f=_f+1&4294967295,-(tp*4294967296+_f)):tp*4294967296+_f},getInt64Array:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp.push(this.getInt64());return tp},getUint64:function(){var _f,tp;return this.littleEndian?(_f=this.getUint32(),tp=this.getUint32()):(tp=this.getUint32(),_f=this.getUint32()),tp*4294967296+_f},getFloat32:function(){var _f=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_f},getFloat32Array:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp.push(this.getFloat32());return tp},getFloat64:function(){var _f=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_f},getFloat64Array:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp.push(this.getFloat64());return tp},getArrayBuffer:function(_f){var tp=this.dv.buffer.slice(this.offset,this.offset+_f);return this.offset+=_f,tp},getString:function(_f){for(var tp=[],ip=0;ip<_f;ip++)tp[ip]=this.getUint8();var rp=tp.indexOf(0);return rp>=0&&(tp=tp.slice(0,rp)),LoaderUtils.decodeText(new Uint8Array(tp))}};function Wu(){}Wu.prototype={constructor:Wu,add:function(_f,tp){this[_f]=tp}};function Qu(_f){var tp="Kaydara FBX Binary  \0";return _f.byteLength>=tp.length&&tp===np(_f,0,tp.length)}function qu(_f){var tp=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],ip=0;function rp(cp){var hp=_f[cp-1];return _f=_f.slice(ip+cp),ip++,hp}for(var op=0;op<tp.length;++op){var sp=rp(1);if(sp===tp[op])return!1}return!0}function Ku(_f){var tp=/FBXVersion: (\d+)/,ip=_f.match(tp);if(ip){var rp=parseInt(ip[1]);return rp}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Yu(_f){return _f/46186158e3}var _c=[];function Ju(_f,tp,ip,rp){var op;switch(rp.mappingType){case"ByPolygonVertex":op=_f;break;case"ByPolygon":op=tp;break;case"ByVertice":op=ip;break;case"AllSame":op=rp.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+rp.mappingType)}rp.referenceType==="IndexToDirect"&&(op=rp.indices[op]);var sp=op*rp.dataSize,cp=sp+rp.dataSize;return lp(_c,rp.buffer,sp,cp)}var Xu=new Euler,Zu=new Vector3;function Xc(_f){var tp=new Matrix4,ip=new Matrix4,rp=new Matrix4,op=new Matrix4,sp=new Matrix4,cp=new Matrix4,hp=new Matrix4,dp=new Matrix4,xp=new Matrix4,bp=new Matrix4,Rp=new Matrix4,Tp=_f.inheritType?_f.inheritType:0;if(_f.translation&&tp.setPosition(Zu.fromArray(_f.translation)),_f.preRotation){var Up=_f.preRotation.map(MathUtils.degToRad);Up.push(_f.eulerOrder),ip.makeRotationFromEuler(Xu.fromArray(Up))}if(_f.rotation){var Up=_f.rotation.map(MathUtils.degToRad);Up.push(_f.eulerOrder),rp.makeRotationFromEuler(Xu.fromArray(Up))}if(_f.postRotation){var Up=_f.postRotation.map(MathUtils.degToRad);Up.push(_f.eulerOrder),op.makeRotationFromEuler(Xu.fromArray(Up))}_f.scale&&sp.scale(Zu.fromArray(_f.scale)),_f.scalingOffset&&hp.setPosition(Zu.fromArray(_f.scalingOffset)),_f.scalingPivot&&cp.setPosition(Zu.fromArray(_f.scalingPivot)),_f.rotationOffset&&dp.setPosition(Zu.fromArray(_f.rotationOffset)),_f.rotationPivot&&xp.setPosition(Zu.fromArray(_f.rotationPivot)),_f.parentMatrixWorld&&(bp=_f.parentMatrixWorld);var Ip=ip.multiply(rp).multiply(op),Vp=new Matrix4;bp.extractRotation(Vp);var Lp=new Matrix4;Lp.copyPosition(bp);var mp=new Matrix4;mp.getInverse(Vp).multiply(bp);var pp=new Matrix4;if(Tp===0)pp.copy(Vp).multiply(Ip).multiply(mp).multiply(sp);else if(Tp===1)pp.copy(Vp).multiply(mp).multiply(Ip).multiply(sp);else{var wp=new Matrix4().getInverse(sp),Ap=new Matrix4().multiply(mp).multiply(wp);pp.copy(Vp).multiply(Ip).multiply(Ap).multiply(sp)}var Sp=new Matrix4().getInverse(xp),Cp=new Matrix4().getInverse(cp),$p=new Matrix4;$p.copy(tp).multiply(dp).multiply(xp).multiply(ip).multiply(rp).multiply(op).multiply(Sp).multiply(hp).multiply(cp).multiply(sp).multiply(Cp);var Fp=new Matrix4().copyPosition($p),jp=new Matrix4().copy(bp).multiply(Fp);return Rp.copyPosition(jp),$p=new Matrix4().multiply(Rp).multiply(pp),$p}function _h(_f){_f=_f||0;var tp=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return _f===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),tp[0]):tp[_f]}function ep(_f){var tp=_f.split(",").map(function(ip){return parseFloat(ip)});return tp}function np(_f,tp,ip){return tp===void 0&&(tp=0),ip===void 0&&(ip=_f.byteLength),LoaderUtils.decodeText(new Uint8Array(_f,tp,ip))}function ap(_f,tp){for(var ip=0,rp=_f.length,op=tp.length;ip<op;ip++,rp++)_f[rp]=tp[ip]}function lp(_f,tp,ip,rp){for(var op=ip,sp=0;op<rp;op++,sp++)_f[sp]=tp[op];return _f}function up(_f,tp,ip){return _f.slice(0,tp).concat(ip).concat(_f.slice(tp))}return Ou})();var cd=Object.defineProperty,ud=(_u,$u,Ru)=>$u in _u?cd(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Ru}):_u[$u]=Ru,g=(_u,$u,Ru)=>(ud(_u,typeof $u!="symbol"?$u+"":$u,Ru),Ru);Promise.resolve();var Ft={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var $u=1.70158;return _u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}},Bounce:{In:function(_u){return 1-Ft.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Ft.Bounce.In(_u*2)*.5:Ft.Bounce.Out(_u*2-1)*.5+.5}}},Wn;typeof self>"u"&&typeof process<"u"&&process.hrtime?Wn=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Wn=self.performance.now.bind(self.performance):Date.now!==void 0?Wn=Date.now:Wn=function(){return new Date().getTime()};var an=Wn,nc=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Ru){return $u._tweens[Ru]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Ru){$u===void 0&&($u=an()),Ru===void 0&&(Ru=!1);var Ou=Object.keys(this._tweens);if(Ou.length===0)return!1;for(;Ou.length>0;){this._tweensAddedDuringUpdate={};for(var Fu=0;Fu<Ou.length;Fu++){var Nu=this._tweens[Ou[Fu]],Vu=!Ru;Nu&&Nu.update($u,Vu)===!1&&!Ru&&delete this._tweens[Ou[Fu]]}Ou=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Sn={Linear:function(_u,$u){var Ru=_u.length-1,Ou=Ru*$u,Fu=Math.floor(Ou),Nu=Sn.Utils.Linear;return $u<0?Nu(_u[0],_u[1],Ou):$u>1?Nu(_u[Ru],_u[Ru-1],Ru-Ou):Nu(_u[Fu],_u[Fu+1>Ru?Ru:Fu+1],Ou-Fu)},Bezier:function(_u,$u){for(var Ru=0,Ou=_u.length-1,Fu=Math.pow,Nu=Sn.Utils.Bernstein,Vu=0;Vu<=Ou;Vu++)Ru+=Fu(1-$u,Ou-Vu)*Fu($u,Vu)*_u[Vu]*Nu(Ou,Vu);return Ru},CatmullRom:function(_u,$u){var Ru=_u.length-1,Ou=Ru*$u,Fu=Math.floor(Ou),Nu=Sn.Utils.CatmullRom;return _u[0]===_u[Ru]?($u<0&&(Fu=Math.floor(Ou=Ru*(1+$u))),Nu(_u[(Fu-1+Ru)%Ru],_u[Fu],_u[(Fu+1)%Ru],_u[(Fu+2)%Ru],Ou-Fu)):$u<0?_u[0]-(Nu(_u[0],_u[0],_u[1],_u[1],-Ou)-_u[0]):$u>1?_u[Ru]-(Nu(_u[Ru],_u[Ru],_u[Ru-1],_u[Ru-1],Ou-Ru)-_u[Ru]):Nu(_u[Fu?Fu-1:0],_u[Fu],_u[Ru<Fu+1?Ru:Fu+1],_u[Ru<Fu+2?Ru:Fu+2],Ou-Fu)},Utils:{Linear:function(_u,$u,Ru){return($u-_u)*Ru+_u},Bernstein:function(_u,$u){var Ru=Sn.Utils.Factorial;return Ru(_u)/Ru($u)/Ru(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Ru=1;if(_u[$u])return _u[$u];for(var Ou=$u;Ou>1;Ou--)Ru*=Ou;return _u[$u]=Ru,Ru}}(),CatmullRom:function(_u,$u,Ru,Ou,Fu){var Nu=(Ru-_u)*.5,Vu=(Ou-$u)*.5,Gu=Fu*Fu,Uu=Fu*Gu;return(2*$u-2*Ru+Nu+Vu)*Uu+(-3*$u+3*Ru-2*Nu-Vu)*Gu+Nu*Fu+$u}}},Co=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),ic=new nc;(function(){function _u($u,Ru){Ru===void 0&&(Ru=ic),this._object=$u,this._group=Ru,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ft.Linear.None,this._interpolationFunction=Sn.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Co.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Ru){return this._valuesEnd=Object.create($u),Ru!==void 0&&(this._duration=Ru),this},_u.prototype.duration=function($u){return this._duration=$u,this},_u.prototype.start=function($u){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Ru in this._valuesStartRepeat)this._swapEndStartRepeatValues(Ru),this._valuesStart[Ru]=this._valuesStartRepeat[Ru]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u!==void 0?typeof $u=="string"?an()+parseFloat($u):$u:an(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function($u,Ru,Ou,Fu){for(var Nu in Ou){var Vu=$u[Nu],Gu=Array.isArray(Vu),Uu=Gu?"array":typeof Vu,Hu=!Gu&&Array.isArray(Ou[Nu]);if(!(Uu==="undefined"||Uu==="function")){if(Hu){var Wu=Ou[Nu];if(Wu.length===0)continue;Wu=Wu.map(this._handleRelativeValue.bind(this,Vu)),Ou[Nu]=[Vu].concat(Wu)}if((Uu==="object"||Gu)&&Vu&&!Hu){Ru[Nu]=Gu?[]:{};for(var Qu in Vu)Ru[Nu][Qu]=Vu[Qu];Fu[Nu]=Gu?[]:{},this._setupProperties(Vu,Ru[Nu],Ou[Nu],Fu[Nu])}else typeof Ru[Nu]>"u"&&(Ru[Nu]=Vu),Gu||(Ru[Nu]*=1),Hu?Fu[Nu]=Ou[Nu].slice().reverse():Fu[Nu]=Ru[Nu]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=an()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=an()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Ru=this._chainedTweens.length;$u<Ru;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return this._group=$u,this},_u.prototype.delay=function($u){return this._delayTime=$u,this},_u.prototype.repeat=function($u){return this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return this._yoyo=$u,this},_u.prototype.easing=function($u){return this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Ru=0;Ru<arguments.length;Ru++)$u[Ru]=arguments[Ru];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Ru){if($u===void 0&&($u=an()),Ru===void 0&&(Ru=!0),this._isPaused)return!0;var Ou,Fu,Nu=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Nu)return!1;Ru&&this.start($u)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Fu=($u-this._startTime)/this._duration,Fu=this._duration===0||Fu>1?1:Fu;var Vu=this._easingFunction(Fu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Vu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Fu),Fu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Ou in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Ou]=="string"&&(this._valuesStartRepeat[Ou]=this._valuesStartRepeat[Ou]+parseFloat(this._valuesEnd[Ou])),this._yoyo&&this._swapEndStartRepeatValues(Ou),this._valuesStart[Ou]=this._valuesStartRepeat[Ou];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Gu=0,Uu=this._chainedTweens.length;Gu<Uu;Gu++)this._chainedTweens[Gu].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Ru,Ou,Fu){for(var Nu in Ou)if(Ru[Nu]!==void 0){var Vu=Ru[Nu]||0,Gu=Ou[Nu],Uu=Array.isArray($u[Nu]),Hu=Array.isArray(Gu),Wu=!Uu&&Hu;Wu?$u[Nu]=this._interpolationFunction(Gu,Fu):typeof Gu=="object"&&Gu?this._updateProperties($u[Nu],Vu,Gu,Fu):(Gu=this._handleRelativeValue(Vu,Gu),typeof Gu=="number"&&($u[Nu]=Vu+(Gu-Vu)*Fu))}},_u.prototype._handleRelativeValue=function($u,Ru){return typeof Ru!="string"?Ru:Ru.charAt(0)==="+"||Ru.charAt(0)==="-"?$u+parseFloat(Ru):parseFloat(Ru)},_u.prototype._swapEndStartRepeatValues=function($u){var Ru=this._valuesStartRepeat[$u],Ou=this._valuesEnd[$u];typeof Ou=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Ou):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Ru},_u})();Co.nextId;var kt=ic;kt.getAll.bind(kt);kt.removeAll.bind(kt);kt.add.bind(kt);kt.remove.bind(kt);kt.update.bind(kt);function _t(){return((1+Math.random())*65536|0).toString(16).substring(1)}function it(){return(_t()+_t()+"-"+_t()+"-4"+_t().substr(0,3)+"-"+_t()+"-"+_t()+_t()+_t()).toLowerCase()}function Qd(_u){return typeof Symbol>"u"?`$Symbol<${_u}>$`:Symbol(_u)}const Vn=Qd("$$EVENT$$");function Ei(_u){return _u[Vn]||(_u[Vn]={}),_u[Vn]}function Hd(_u){_u[Vn]||delete _u[Vn]}class oi{hasListener($u){const Ru=Ei(this);return Boolean((Ru==null?void 0:Ru[$u])&&Ru[$u].length>0)}on($u,Ru,Ou){const Fu=Ei(this);return Fu[$u]||(Fu[$u]=[]),Fu[$u].push([Ru,Ou||!1]),()=>this.off($u,Ru)}once($u,Ru){return this.on($u,Ru,!0)}off($u,Ru){if($u===void 0){Hd(this);return}const Ou=Ei(this);if(Ou[$u]||(Ou[$u]=[]),Ru===void 0){Ou[$u].length=0;return}let Fu=0;for(;Fu<Ou[$u].length&&Ou[$u][Fu][0]!==Ru;Fu++);Fu<Ou[$u].length&&Ou[$u].splice(Fu,1)}emit($u,...Ru){let Ou=!1;const Fu=Ei(this)[$u]||[];for(let Nu of Fu.slice()){const[Vu,Gu=!1]=Nu,Uu=Vu(...Ru);Gu&&this.off($u,Vu),Uu===!1&&(Ou=!0)}return Ou}}function sc(..._u){const $u=new Vector3;return _u.forEach(Ru=>{$u.add(Ru)}),$u.divideScalar(_u.length),$u}function _i(_u,$u){const Ru=Math.round(_u);return Ru%2===0?Ru:Ru+Number($u!=null&&$u.smaller?-1:1)}const Fd=({x:_u,y:$u,z:Ru})=>new Vector3(_u,$u,Ru),Ht=([_u,$u,Ru])=>new Vector3(_u,$u,Ru),$n=_u=>_u instanceof Vector3?_u:Array.isArray(_u)?Ht(_u):Fd(_u),oc="1.0.2",Nd=`CSS3DObjectPlus@${oc}`,Gd=.00216,Wd=.003;class rc extends CSS3DObject{constructor($u,Ru,Ou=Wd,Fu=1,Nu="front"){const Vu=Math.max(Gd,Ou),Gu=Ru[0].distanceTo(Ru[1]),Uu=Ru[1].distanceTo(Ru[2]),Hu=_i(Gu/Ou*Fu),Wu=_i(Uu/Ou*Fu),Qu=sc(...Ru);let qu;if(Vu===Ou)$u.style.width=`${Hu}px`,$u.style.height=`${Wu}px`,qu=$u;else{const Xc=document.createElement("div");Xc.style.width=`${Hu}px`,Xc.style.height=`${Wu}px`,Xc.style.pointerEvents="none";const _h=Ou/Vu;$u.style.position="absolute",$u.style.left="0",$u.style.top="0",$u.style.width=`${_h*Hu}px`,$u.style.height=`${_h*Wu}px`,Xc.appendChild($u),qu=Xc}if(super(qu),g(this,"version",oc),g(this,"width"),g(this,"height"),g(this,"domWidthPx"),g(this,"domHeightPx"),g(this,"cornerPoints"),g(this,"ratio"),g(this,"container"),g(this,"centerPosition"),g(this,"mode","front"),g(this,"hooks",new oi),g(this,"isCSS3DObjectPlus",!0),this.scale.set(Vu,Vu,Vu),this.cornerPoints=Ru,this.ratio=Ou,this.container=$u,this.mode=Nu,Vu===Ou)this.width=Gu,this.height=Uu,this.domWidthPx=Hu,this.domHeightPx=Wu,this.centerPosition=Qu;else{const Xc=Ou/Vu;this.width=Xc*Gu,this.height=Xc*Uu,this.domWidthPx=Xc*Hu,this.domHeightPx=Xc*Wu,this.centerPosition=new Vector3().subVectors(Qu,Ru[0]).multiplyScalar(Xc).add(Ru[0])}$u.classList.add(`${Nd}__container`);const Ku=new Vector3().subVectors(Ru[1],Ru[0]),Yu=new Vector3().subVectors(Ru[3],Ru[0]),_c=new Vector3().crossVectors(Ku,Yu).normalize();this.lookAt(_c);const Ju=this.up.clone().applyQuaternion(this.quaternion),Xu=Yu.clone(),Zu=new Vector3().crossVectors(Ju,Xu).normalize();this.rotateOnWorldAxis(Zu,Ju.angleTo(Xu)),this.position.copy(Qu)}changeMode($u,Ru){if($u===this.mode)return;const Ou=this.mode;this.mode=$u,this.hooks.emit("changeMode",$u,Ou,Ru)}applyScaleMatrix4($u){this.scale.applyMatrix4($u),this.hooks.emit("applyScaleMatrix4",$u)}applyMatrix4($u){super.applyMatrix4($u),this.hooks.emit("applyMatrix4",$u)}applyQuaternion($u){return super.applyQuaternion($u),this.hooks.emit("applyQuaternion",$u),this}}const Xd="v2.0.1",ac="CSS3DRenderer",rn=`${ac}@${Xd}`,yr=_u=>`${rn}--${_u}`,ge={};class lc{constructor(){g(this,"hooks",new oi),g(this,"state",{enabled:!0,visible:!0,disposed:!1}),g(this,"store",{rendered:!1,disposers:[],frontModeCSS3DObjects:{},behindModeCSS3DObjects:{}}),g(this,"create3DElement",($u,Ru,Ou)=>{if(this.state.disposed)return this.disposedErrorLog();const Fu=(()=>{const rp={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(rp,Ou)})(),Nu=Ru.map($n);if((Nu==null?void 0:Nu.length)<4)return console.error(`${rn}: requires 4 point but params may have fewer`);const{ratio:Vu,devicePixelRatio:Gu,mode:Uu,autoRender:Hu,container:Wu,pointerEvents:Qu}=Fu,qu=[],{css3DObject:Ku,opacityMesh:Yu}=this.createObject(Nu,{ratio:Vu,dpr:Gu,container:Wu,mode:Uu,pointerEvents:Qu});Wu.id=`container--${Ku.uuid}`;const _c=Uu==="front"&&!ge.frontModeStore,Ju=Uu==="behind"&&!ge.behindModeStore;Uu==="front"&&this.initGlobalModeStore("front"),Uu==="behind"&&this.initGlobalModeStore("behind",Fu.scene),Ku.hooks.on("changeMode",(rp,op,sp)=>{var cp,hp,dp;if(rp===op)return;rp==="front"&&this.initGlobalModeStore("front"),rp==="behind"&&this.initGlobalModeStore("behind",sp);const xp=op==="front"?ge.frontModeStore:ge.behindModeStore,bp=rp==="front"?ge.frontModeStore:ge.behindModeStore,Rp=op==="behind"?this.store.behindModeCSS3DObjects:this.store.frontModeCSS3DObjects,Tp=rp==="behind"?this.store.behindModeCSS3DObjects:this.store.frontModeCSS3DObjects;if(!Rp||!Tp)return console.error(`${rn}: changeMode error: prevObjects or nextObjects is undefined`);const Up=Rp[Ku.uuid];if(!Up)return console.error(`${rn}: changeMode error: prevObject is undefined`);if(rp==="behind"){const Ip=(cp=Up.opacityMesh)!=null?cp:this.createOpacityMesh(Up.css3DObject);xp==null||xp.css3DScene.remove(Up.css3DObject),Tp[Ku.uuid]={css3DObject:Ku,opacityMesh:Ip,visible:!0,enabled:!0,mode:rp,scene:sp},bp==null||bp.css3DScene.add(Ku),sp==null||sp.add(Ip)}rp==="front"&&(xp==null||xp.css3DScene.remove(Up.css3DObject),(dp=(hp=Rp[Ku.uuid])==null?void 0:hp.scene)==null||dp.remove(Up.opacityMesh),Tp[Ku.uuid]={css3DObject:Ku,visible:!0,enabled:!0,mode:rp},bp==null||bp.css3DScene.add(Ku)),rp==="behind"&&this.appendToElement(ge.behindModeContainer,"behind"),rp==="front"&&this.appendToElement(ge.frontModeContainer,"front"),this.render($u),console.log("change success")});const Xu=Uu==="front"?ge.frontModeStore:ge.behindModeStore,{css3DScene:Zu,css3DRenderer:Xc}=Xu,_h=(()=>{const rp=()=>{var op,sp;const cp=Ku.mode;if(cp==="front")this.store.frontModeCSS3DObjects[Ku.uuid]={visible:!0,enabled:!0,css3DObject:Ku,mode:"front"};else{if(!Fu.scene)return;this.store.behindModeCSS3DObjects[Ku.uuid]={visible:!0,enabled:!0,css3DObject:Ku,opacityMesh:Yu,mode:"behind",scene:Fu.scene}}Zu.getObjectById(Ku.id)||Zu.add(Ku),cp==="behind"&&Yu&&((op=Fu.scene)!=null&&op.getObjectById(Yu.id)||(sp=Fu.scene)==null||sp.add(Yu),qu.push(()=>{var hp;return Yu&&((hp=Fu.scene)==null?void 0:hp.remove(Yu))}))};return _c||Ju?(Xc.domElement.style.position="absolute",Xc.domElement.style.top="0",Xc.domElement.style.userSelect="none",Xc.domElement.style.pointerEvents="none",Xc.domElement.classList.add(yr(Uu)),()=>{rp(),this.render($u)}):(this.store.rendered=!0,()=>rp())})(),ep=Uu==="front"?ge.frontModeContainer:ge.behindModeContainer;if(ep){this.appendToElement(ep,Uu);const rp=Uu==="front"?ge.frontModeStore:ge.behindModeStore;rp&&(rp.appendedToPage=!0)}const np=rp=>this.setVisibleById(Ku.uuid,rp),ap=rp=>this.setEnabledById(Ku.uuid,rp),lp=()=>np(!0),up=()=>np(!1),_f=()=>ap(!0),tp=()=>ap(!1),ip=()=>(delete this.store.frontModeCSS3DObjects[Ku.uuid],delete this.store.behindModeCSS3DObjects[Ku.uuid],qu.forEach(rp=>rp==null?void 0:rp()),Zu.remove(Ku),Zu.children.length===0&&(typeof Xu.requestAnimationFrameId=="number"&&cancelAnimationFrame(Xu.requestAnimationFrameId),Xc.domElement.remove(),Uu==="front"&&(ge.frontModeStore=void 0),Uu==="behind"&&(ge.behindModeStore=void 0),ge.frontModeResizeObserver=void 0,ge.behindModeResizeObserver=void 0),!0);return this.store.disposers.push(ip),Hu&&_h(),{id:Ku.uuid,container:Wu,dispose:ip,css3DObject:Ku,render:Hu?void 0:_h,show:lp,hide:up,setVisible:np,disable:tp,enable:_f,setEnabled:ap,appendToElement:rp=>this.appendToElement(rp,Uu)}}),g(this,"setVisibleById",($u,Ru)=>{var Ou;const Fu=(Ou=this.store.frontModeCSS3DObjects[$u])!=null?Ou:this.store.behindModeCSS3DObjects[$u];if(!Fu)return console.error("id not found",$u);Fu.visible=Ru,this.state.visible&&(Fu.css3DObject.visible=Ru,Fu.mode==="behind"&&(Fu.opacityMesh.visible=Ru))}),g(this,"setEnabledById",($u,Ru)=>{var Ou,Fu,Nu;const Vu=(Ou=this.store.frontModeCSS3DObjects[$u])!=null?Ou:this.store.behindModeCSS3DObjects[$u];if(!Vu)return;const Gu=Vu.mode==="front"?(Fu=ge.frontModeStore)==null?void 0:Fu.css3DScene:(Nu=ge.behindModeStore)==null?void 0:Nu.css3DScene;!Gu||(Ru?(Gu.add(Vu.css3DObject),Vu.mode==="behind"&&Vu.scene.add(Vu.opacityMesh)):(Gu.remove(Vu.css3DObject),Vu.mode==="behind"&&Vu.scene.remove(Vu.opacityMesh)),Vu.enabled=Ru)}),g(this,"createObject",($u,Ru)=>{const{ratio:Ou,dpr:Fu,container:Nu,mode:Vu,pointerEvents:Gu}=Ru,Uu=new rc(Nu,$u,Ou,Fu,Vu);Nu.style.pointerEvents=Gu,Nu.classList.add(`${ac}__container`);const Hu=Vu==="behind"?this.createOpacityMesh(Uu):void 0;return{css3DObject:Uu,opacityMesh:Hu}}),g(this,"createOpacityMesh",$u=>{const{domWidthPx:Ru,domHeightPx:Ou}=$u,Fu=new MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:DoubleSide}),Nu=new PlaneGeometry(Ru,Ou),Vu=new Mesh(Nu,Fu);return Vu.name=yr("mesh"),Vu.position.copy($u.position),Vu.rotation.copy($u.rotation),Vu.scale.copy($u.scale),$u.hooks.on("applyMatrix4",Gu=>Vu.applyMatrix4(Gu)),$u.hooks.on("applyQuaternion",Gu=>Vu.applyQuaternion(Gu)),$u.hooks.on("applyScaleMatrix4",Gu=>Vu.scale.applyMatrix4(Gu)),Vu}),g(this,"createResizeObserver",($u,Ru,Ou=!0)=>{if(!$u)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Fu=()=>{const Vu=_i($u.clientWidth,{smaller:!0}),Gu=_i($u.clientHeight,{smaller:!0});Ru(Vu,Gu)};if(typeof ResizeObserver>"u"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Fu(),unobserve:()=>{}};const Nu=new ResizeObserver(Fu);return Ou&&Fu(),{observe:()=>Nu.observe($u),unobserve:()=>Nu.unobserve($u)}}),g(this,"disposedErrorLog",()=>{console.error(`${rn} is disposed`)})}getCurrentState(){return this.state}setState($u,Ru={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();const Ou=Fm({},this.state);this.state=Object.assign(this.state,$u),Ou.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Ou.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ou,userAction:Ru.userAction})}dispose(){this.store.disposers.forEach($u=>$u==null?void 0:$u()),this.store.disposers=[],this.hooks.emit("dispose"),this.state.disposed=!0}async show({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:$u}),this.hooks.emit("show",{userAction:$u})}async hide({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:$u}),this.hooks.emit("hide",{userAction:$u})}enable({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:$u}),this.hooks.emit("enable",{userAction:$u})}disable({userAction:$u}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:$u}),this.hooks.emit("disable",{userAction:$u})}setContainer($u,Ru){Ru==="front"?ge.frontModeContainer=$u:ge.behindModeContainer=$u}appendToElement($u,Ru){const Ou=Ru==="front"?ge.frontModeStore:ge.behindModeStore;if(!Ou){if(Ru==="front"&&!ge.frontModeContainer){if(!$u)throw new Error(`${rn} Cannot append to container: front mode but container is ${$u}`);ge.frontModeContainer=$u}if(Ru==="behind"&&!ge.behindModeContainer){if(!$u)throw new Error(`${rn} Cannot append to container: behind mode but container is ${$u}`);ge.behindModeContainer=$u}return}if(Ou.appendedToPage)return;const Fu=Ru==="behind"?ge.behindModeContainer:ge.frontModeContainer;if(!Fu)return console.error("wrapper is undefined");if(Fu.appendChild(Ou.css3DRenderer.domElement),Ru==="behind"&&!ge.behindModeResizeObserver){const Nu=(Uu,Hu)=>{var Wu;(Wu=ge.behindModeStore)==null||Wu.css3DRenderer.setSize(Uu,Hu)},{observe:Vu,unobserve:Gu}=this.createResizeObserver(Fu,Nu,!0);ge.behindModeResizeObserver={observe:Vu,unobserve:Gu},Vu(),this.store.disposers.push(Gu)}if(Ru==="front"&&!ge.frontModeResizeObserver){const Nu=(Uu,Hu)=>{var Wu;(Wu=ge.frontModeStore)==null||Wu.css3DRenderer.setSize(Uu,Hu)},{observe:Vu,unobserve:Gu}=this.createResizeObserver(Fu,Nu,!0);ge.frontModeResizeObserver={observe:Vu,unobserve:Gu},Vu(),this.store.disposers.push(Gu)}Ou.appendedToPage=!0}render($u){const Ru=ge.behindModeStore,Ou=ge.frontModeStore;if(Ru&&Object.keys(this.store.behindModeCSS3DObjects).length>0&&!Ru.requestAnimationFrameId){const Fu=()=>{const Nu=requestAnimationFrame(Fu);Ru.requestAnimationFrameId=Nu,Ru.css3DRenderer.render(Ru.css3DScene,$u)};Fu()}if(Ou&&Object.keys(this.store.frontModeCSS3DObjects).length>0&&!Ou.requestAnimationFrameId){const Fu=()=>{const Nu=requestAnimationFrame(Fu);Ou.requestAnimationFrameId=Nu,Ou.css3DRenderer.render(Ou.css3DScene,$u)};Fu()}Object.keys(this.store.frontModeCSS3DObjects).length===0&&(Ou==null?void 0:Ou.requestAnimationFrameId)!==void 0&&(cancelAnimationFrame(Ou.requestAnimationFrameId),Ou.requestAnimationFrameId=void 0),Object.keys(this.store.behindModeCSS3DObjects).length===0&&(Ru==null?void 0:Ru.requestAnimationFrameId)!==void 0&&(cancelAnimationFrame(Ru.requestAnimationFrameId),Ru.requestAnimationFrameId=void 0)}initGlobalModeStore($u,Ru){const Ou=$u==="front"&&!ge.frontModeStore;$u==="behind"&&!ge.behindModeStore&&(ge.behindModeStore={scene:Ru,css3DScene:new Scene,css3DRenderer:new CSS3DRenderer}),Ou&&(ge.frontModeStore={css3DScene:new Scene,css3DRenderer:new CSS3DRenderer})}async handleShow(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=$u.visible}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=$u.visible,$u.opacityMesh.visible=$u.visible})}async handleHide(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=!1}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{$u.css3DObject.visible=!1,$u.opacityMesh.visible=!1})}handleEnable(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{var Ru;!$u.enabled||(Ru=ge.frontModeStore)==null||Ru.css3DScene.add($u.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{var Ru,Ou;!$u.enabled||((Ru=ge.behindModeStore)==null||Ru.css3DScene.add($u.css3DObject),(Ou=ge.behindModeStore)==null||Ou.scene.add($u.opacityMesh))})}handleDisable(){Object.values(this.store.frontModeCSS3DObjects).forEach($u=>{var Ru;(Ru=ge.frontModeStore)==null||Ru.css3DScene.remove($u.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach($u=>{var Ru,Ou;(Ru=ge.behindModeStore)==null||Ru.css3DScene.remove($u.css3DObject),(Ou=ge.behindModeStore)==null||Ou.scene.remove($u.opacityMesh)})}}const Yd="v2.0.1",wr=`CSS3DRenderPlugin@${Yd}`;class _d extends lc{constructor($u){super(),g(this,"five"),g(this,"behindFiveContainer"),g(this,"staticPrefix","//vrlab-static.ljcdn.com"),g(this,"create3DDomContainer",(Ru,Ou)=>{if(this.state.disposed)return;const Fu=(()=>{var Ku;(Ou==null?void 0:Ou.dpr)!==void 0&&console.warn(`${wr}: please use "config.devicePixelRatio" replace "config.dpr"`);const Yu={ratio:.00216,devicePixelRatio:(Ku=Ou==null?void 0:Ou.dpr)!=null?Ku:1,mode:"front",autoRender:!0};return Object.assign(Yu,Ou,(Ou==null?void 0:Ou.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Nu=this.five.getElement();if(!Nu){console.error(`${wr}: five.getElement() is ${Nu}`);return}const{autoRender:Vu,mode:Gu}=Fu,Uu=Gu==="front"?Nu.parentElement:Fu.behindFiveContainer;this.setContainer(Uu||document.body,"front");const Hu=this.getBehindFiveElement();Hu&&this.setContainer(Hu,"behind"),this.appendToElement(Uu||document.body,Gu);const Wu=this.create3DElement(this.five.camera,Ru,My(Fm({},Fu),{autoRender:!1}));if(!Wu)return;const Qu=Wu.render,qu=()=>{var Ku;Gu==="front"&&Qu(),Gu==="behind"&&((Ku=this.five.model)!=null&&Ku.loaded?Qu():this.five.once("modelLoaded",()=>Qu()))};return Vu&&qu(),My(Fm({},Wu),{render:Vu?void 0:qu})}),this.five=$u}disposeAll(){return this.dispose()}setState(...$u){const Ru=super.setState(...$u);return this.five.needsRender=!0,Ru}getBehindFiveElement(){var $u;const{behindFiveContainer:Ru}=this;if(Ru)return Ru;const Ou=document.createElement("div");Ou.style.position="absolute",Ou.style.pointerEvents="none",Ou.style.top="0",Ou.style.left="0",Ou.style.width="100%",Ou.style.height="100%",this.behindFiveContainer=Ou;const Fu=this.five.getElement();if(!Fu)return;const Nu=($u=Fu==null?void 0:Fu.style.position)!=null?$u:getComputedStyle(Fu);(!Nu||Nu==="static")&&console.warn("if you want to use css3DRenderPlugin behind mode, five element position is static, please set position to relative or absolute");const Vu=Fu==null?void 0:Fu.parentElement;if(Vu)return Vu.insertBefore(Ou,Fu),Ou}}const ri=_u=>new _d(_u);function ce(){}const Ln=_u=>_u;function ze(_u,$u){for(const Ru in $u)_u[Ru]=$u[Ru];return _u}function cc(_u){return _u()}function Er(){return Object.create(null)}function Gt(_u){_u.forEach(cc)}function ls(_u){return typeof _u=="function"}function ue(_u,$u){return _u!=_u?$u==$u:_u!==$u||_u&&typeof _u=="object"||typeof _u=="function"}let Ci;function Tt(_u,$u){return Ci||(Ci=document.createElement("a")),Ci.href=$u,_u===Ci.href}function Ud(_u){return Object.keys(_u).length===0}function ln(_u,$u,Ru,Ou){if(_u){const Fu=uc(_u,$u,Ru,Ou);return _u[0](Fu)}}function uc(_u,$u,Ru,Ou){return _u[1]&&Ou?ze(Ru.ctx.slice(),_u[1](Ou($u))):Ru.ctx}function cn(_u,$u,Ru,Ou){if(_u[2]&&Ou){const Fu=_u[2](Ou(Ru));if($u.dirty===void 0)return Fu;if(typeof Fu=="object"){const Nu=[],Vu=Math.max($u.dirty.length,Fu.length);for(let Gu=0;Gu<Vu;Gu+=1)Nu[Gu]=$u.dirty[Gu]|Fu[Gu];return Nu}return $u.dirty|Fu}return $u.dirty}function un(_u,$u,Ru,Ou,Fu,Nu){if(Fu){const Vu=uc($u,Ru,Ou,Nu);_u.p(Vu,Fu)}}function dn(_u){if(_u.ctx.length>32){const $u=[],Ru=_u.ctx.length/32;for(let Ou=0;Ou<Ru;Ou++)$u[Ou]=-1;return $u}return-1}function dc(_u){const $u={};for(const Ru in _u)Ru[0]!=="$"&&($u[Ru]=_u[Ru]);return $u}function Ui(_u,$u){const Ru={};$u=new Set($u);for(const Ou in _u)!$u.has(Ou)&&Ou[0]!=="$"&&(Ru[Ou]=_u[Ou]);return Ru}const fc=typeof window<"u";let hc=fc?()=>window.performance.now():()=>Date.now(),Io=fc?_u=>requestAnimationFrame(_u):ce;const Dn=new Set;function pc(_u){Dn.forEach($u=>{$u.c(_u)||(Dn.delete($u),$u.f())}),Dn.size!==0&&Io(pc)}function mc(_u){let $u;return Dn.size===0&&Io(pc),{promise:new Promise(Ru=>{Dn.add($u={c:_u,f:Ru})}),abort(){Dn.delete($u)}}}function W(_u,$u){_u.appendChild($u)}function me(_u,$u,Ru){const Ou=xo(_u);if(!Ou.getElementById($u)){const Fu=G("style");Fu.id=$u,Fu.textContent=Ru,gc(Ou,Fu)}}function xo(_u){if(!_u)return document;const $u=_u.getRootNode?_u.getRootNode():_u.ownerDocument;return $u&&$u.host?$u:_u.ownerDocument}function Vd(_u){const $u=G("style");return gc(xo(_u),$u),$u.sheet}function gc(_u,$u){return W(_u.head||_u,$u),$u.sheet}function F(_u,$u,Ru){_u.insertBefore($u,Ru||null)}function Q(_u){_u.parentNode.removeChild(_u)}function Dt(_u,$u){for(let Ru=0;Ru<_u.length;Ru+=1)_u[Ru]&&_u[Ru].d($u)}function G(_u){return document.createElement(_u)}function Se(_u){return document.createElementNS("http://www.w3.org/2000/svg",_u)}function Qe(_u){return document.createTextNode(_u)}function q(){return Qe(" ")}function Pe(){return Qe("")}function je(_u,$u,Ru,Ou){return _u.addEventListener($u,Ru,Ou),()=>_u.removeEventListener($u,Ru,Ou)}function So(_u){return function($u){return $u.stopPropagation(),_u.call(this,$u)}}function P(_u,$u,Ru){Ru==null?_u.removeAttribute($u):_u.getAttribute($u)!==Ru&&_u.setAttribute($u,Ru)}function Vi(_u,$u){const Ru=Object.getOwnPropertyDescriptors(_u.__proto__);for(const Ou in $u)$u[Ou]==null?_u.removeAttribute(Ou):Ou==="style"?_u.style.cssText=$u[Ou]:Ou==="__value"?_u.value=_u[Ou]=$u[Ou]:Ru[Ou]&&Ru[Ou].set?_u[Ou]=$u[Ou]:P(_u,Ou,$u[Ou])}function Jd(_u){return Array.from(_u.childNodes)}function Ye(_u,$u){$u=""+$u,_u.wholeText!==$u&&(_u.data=$u)}function X(_u,$u,Ru,Ou){Ru===null?_u.style.removeProperty($u):_u.style.setProperty($u,Ru,Ou?"important":"")}let Pi;function Zd(){if(Pi===void 0){Pi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Pi=!0}}return Pi}function en(_u,$u){getComputedStyle(_u).position==="static"&&(_u.style.position="relative");const Ru=G("iframe");Ru.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Ru.setAttribute("aria-hidden","true"),Ru.tabIndex=-1;const Ou=Zd();let Fu;return Ou?(Ru.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Fu=je(window,"message",Nu=>{Nu.source===Ru.contentWindow&&$u()})):(Ru.src="about:blank",Ru.onload=()=>{Fu=je(Ru.contentWindow,"resize",$u)}),W(_u,Ru),()=>{(Ou||Fu&&Ru.contentWindow)&&Fu(),Q(Ru)}}function ie(_u,$u,Ru){_u.classList[Ru?"add":"remove"]($u)}function vc(_u,$u,{bubbles:Ru=!1,cancelable:Ou=!1}={}){const Fu=document.createEvent("CustomEvent");return Fu.initCustomEvent(_u,Ru,Ou,$u),Fu}class Ji{constructor($u=!1){this.is_svg=!1,this.is_svg=$u,this.e=this.n=null}c($u){this.h($u)}m($u,Ru,Ou=null){this.e||(this.is_svg?this.e=Se(Ru.nodeName):this.e=G(Ru.nodeName),this.t=Ru,this.c($u)),this.i(Ou)}h($u){this.e.innerHTML=$u,this.n=Array.from(this.e.childNodes)}i($u){for(let Ru=0;Ru<this.n.length;Ru+=1)F(this.t,this.n[Ru],$u)}p($u){this.d(),this.h($u),this.i(this.a)}d(){this.n.forEach(Q)}}const Zi=new Map;let qi=0;function qd(_u){let $u=5381,Ru=_u.length;for(;Ru--;)$u=($u<<5)-$u^_u.charCodeAt(Ru);return $u>>>0}function Kd(_u,$u){const Ru={stylesheet:Vd($u),rules:{}};return Zi.set(_u,Ru),Ru}function Ac(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu=0){const Uu=16.666/Ou;let Hu=`{
`;for(let Ju=0;Ju<=1;Ju+=Uu){const Xu=$u+(Ru-$u)*Nu(Ju);Hu+=Ju*100+`%{${Vu(Xu,1-Xu)}}
`}const Wu=Hu+`100% {${Vu(Ru,1-Ru)}}
}`,Qu=`__svelte_${qd(Wu)}_${Gu}`,qu=xo(_u),{stylesheet:Ku,rules:Yu}=Zi.get(qu)||Kd(qu,_u);Yu[Qu]||(Yu[Qu]=!0,Ku.insertRule(`@keyframes ${Qu} ${Wu}`,Ku.cssRules.length));const _c=_u.style.animation||"";return _u.style.animation=`${_c?`${_c}, `:""}${Qu} ${Ou}ms linear ${Fu}ms 1 both`,qi+=1,Qu}function to(_u,$u){const Ru=(_u.style.animation||"").split(", "),Ou=Ru.filter($u?Nu=>Nu.indexOf($u)<0:Nu=>Nu.indexOf("__svelte")===-1),Fu=Ru.length-Ou.length;Fu&&(_u.style.animation=Ou.join(", "),qi-=Fu,qi||$d())}function $d(){Io(()=>{qi||(Zi.forEach(_u=>{const{ownerNode:$u}=_u.stylesheet;$u&&Q($u)}),Zi.clear())})}let ei;function Jn(_u){ei=_u}function An(){if(!ei)throw new Error("Function called outside component initialization");return ei}function ko(_u){An().$$.before_update.push(_u)}function mt(_u){An().$$.on_mount.push(_u)}function To(_u){An().$$.after_update.push(_u)}function tn(_u){An().$$.on_destroy.push(_u)}function ef(){const _u=An();return($u,Ru,{cancelable:Ou=!1}={})=>{const Fu=_u.$$.callbacks[$u];if(Fu){const Nu=vc($u,Ru,{cancelable:Ou});return Fu.slice().forEach(Vu=>{Vu.call(_u,Nu)}),!Nu.defaultPrevented}return!0}}function no(_u,$u){return An().$$.context.set(_u,$u),$u}function ti(_u){return An().$$.context.get(_u)}function tf(_u,$u){const Ru=_u.$$.callbacks[$u.type];Ru&&Ru.slice().forEach(Ou=>Ou.call(this,$u))}const Xn=[],Xe=[],Wi=[],Cr=[],bc=Promise.resolve();let io=!1;function yc(){io||(io=!0,bc.then(wc))}function nf(){return yc(),bc}function Oe(_u){Wi.push(_u)}const js=new Set;let Ii=0;function wc(){const _u=ei;do{for(;Ii<Xn.length;){const $u=Xn[Ii];Ii++,Jn($u),sf($u.$$)}for(Jn(null),Xn.length=0,Ii=0;Xe.length;)Xe.pop()();for(let $u=0;$u<Wi.length;$u+=1){const Ru=Wi[$u];js.has(Ru)||(js.add(Ru),Ru())}Wi.length=0}while(Xn.length);for(;Cr.length;)Cr.pop()();io=!1,js.clear(),Jn(_u)}function sf(_u){if(_u.fragment!==null){_u.update(),Gt(_u.before_update);const $u=_u.dirty;_u.dirty=[-1],_u.fragment&&_u.fragment.p(_u.ctx,$u),_u.after_update.forEach(Oe)}}let Nn;function Ec(){return Nn||(Nn=Promise.resolve(),Nn.then(()=>{Nn=null})),Nn}function Ki(_u,$u,Ru){_u.dispatchEvent(vc(`${$u?"intro":"outro"}${Ru}`))}const Xi=new Set;let Jt;function ve(){Jt={r:0,c:[],p:Jt}}function Ae(){Jt.r||Gt(Jt.c),Jt=Jt.p}function z(_u,$u){_u&&_u.i&&(Xi.delete(_u),_u.i($u))}function H(_u,$u,Ru,Ou){if(_u&&_u.o){if(Xi.has(_u))return;Xi.add(_u),Jt.c.push(()=>{Xi.delete(_u),Ou&&(Ru&&_u.d(1),Ou())}),_u.o($u)}else Ou&&Ou()}const Cc={duration:0};function bn(_u,$u,Ru){let Ou=$u(_u,Ru),Fu=!1,Nu,Vu,Gu=0;function Uu(){Nu&&to(_u,Nu)}function Hu(){const{delay:Qu=0,duration:qu=300,easing:Ku=Ln,tick:Yu=ce,css:_c}=Ou||Cc;_c&&(Nu=Ac(_u,0,1,qu,Qu,Ku,_c,Gu++)),Yu(0,1);const Ju=hc()+Qu,Xu=Ju+qu;Vu&&Vu.abort(),Fu=!0,Oe(()=>Ki(_u,!0,"start")),Vu=mc(Zu=>{if(Fu){if(Zu>=Xu)return Yu(1,0),Ki(_u,!0,"end"),Uu(),Fu=!1;if(Zu>=Ju){const Xc=Ku((Zu-Ju)/qu);Yu(Xc,1-Xc)}}return Fu})}let Wu=!1;return{start(){Wu||(Wu=!0,to(_u),ls(Ou)?(Ou=Ou(),Ec().then(Hu)):Hu())},invalidate(){Wu=!1},end(){Fu&&(Uu(),Fu=!1)}}}function jn(_u,$u,Ru){let Ou=$u(_u,Ru),Fu=!0,Nu;const Vu=Jt;Vu.r+=1;function Gu(){const{delay:Uu=0,duration:Hu=300,easing:Wu=Ln,tick:Qu=ce,css:qu}=Ou||Cc;qu&&(Nu=Ac(_u,1,0,Hu,Uu,Wu,qu));const Ku=hc()+Uu,Yu=Ku+Hu;Oe(()=>Ki(_u,!1,"start")),mc(_c=>{if(Fu){if(_c>=Yu)return Qu(0,1),Ki(_u,!1,"end"),--Vu.r||Gt(Vu.c),!1;if(_c>=Ku){const Ju=Wu((_c-Ku)/Hu);Qu(1-Ju,Ju)}}return Fu})}return ls(Ou)?Ec().then(()=>{Ou=Ou(),Gu()}):Gu(),{end(Uu){Uu&&Ou.tick&&Ou.tick(1,0),Fu&&(Nu&&to(_u,Nu),Fu=!1)}}}function Wt(_u,$u){H(_u,1,1,()=>{$u.delete(_u.key)})}function gt(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu){let qu=_u.length,Ku=Nu.length,Yu=qu;const _c={};for(;Yu--;)_c[_u[Yu].key]=Yu;const Ju=[],Xu=new Map,Zu=new Map;for(Yu=Ku;Yu--;){const np=Qu(Fu,Nu,Yu),ap=Ru(np);let lp=Vu.get(ap);lp?Ou&&lp.p(np,$u):(lp=Hu(ap,np),lp.c()),Xu.set(ap,Ju[Yu]=lp),ap in _c&&Zu.set(ap,Math.abs(Yu-_c[ap]))}const Xc=new Set,_h=new Set;function ep(np){z(np,1),np.m(Gu,Wu),Vu.set(np.key,np),Wu=np.first,Ku--}for(;qu&&Ku;){const np=Ju[Ku-1],ap=_u[qu-1],lp=np.key,up=ap.key;np===ap?(Wu=np.first,qu--,Ku--):Xu.has(up)?!Vu.has(lp)||Xc.has(lp)?ep(np):_h.has(up)?qu--:Zu.get(lp)>Zu.get(up)?(_h.add(lp),ep(np)):(Xc.add(up),qu--):(Uu(ap,Vu),qu--)}for(;qu--;){const np=_u[qu];Xu.has(np.key)||Uu(np,Vu)}for(;Ku;)ep(Ju[Ku-1]);return Ju}function _e(_u,$u){const Ru={},Ou={},Fu={$$scope:1};let Nu=_u.length;for(;Nu--;){const Vu=_u[Nu],Gu=$u[Nu];if(Gu){for(const Uu in Vu)Uu in Gu||(Ou[Uu]=1);for(const Uu in Gu)Fu[Uu]||(Ru[Uu]=Gu[Uu],Fu[Uu]=1);_u[Nu]=Gu}else for(const Uu in Vu)Fu[Uu]=1}for(const Vu in Ou)Vu in Ru||(Ru[Vu]=void 0);return Ru}function re(_u){_u&&_u.c()}function se(_u,$u,Ru,Ou){const{fragment:Fu,after_update:Nu}=_u.$$;Fu&&Fu.m($u,Ru),Ou||Oe(()=>{const Vu=_u.$$.on_mount.map(cc).filter(ls);_u.$$.on_destroy?_u.$$.on_destroy.push(...Vu):Gt(Vu),_u.$$.on_mount=[]}),Nu.forEach(Oe)}function oe(_u,$u){const Ru=_u.$$;Ru.fragment!==null&&(Gt(Ru.on_destroy),Ru.fragment&&Ru.fragment.d($u),Ru.on_destroy=Ru.fragment=null,Ru.ctx=[])}function rf(_u,$u){_u.$$.dirty[0]===-1&&(Xn.push(_u),yc(),_u.$$.dirty.fill(0)),_u.$$.dirty[$u/31|0]|=1<<$u%31}function de(_u,$u,Ru,Ou,Fu,Nu,Vu,Gu=[-1]){const Uu=ei;Jn(_u);const Hu=_u.$$={fragment:null,ctx:[],props:Nu,update:ce,not_equal:Fu,bound:Er(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map($u.context||(Uu?Uu.$$.context:[])),callbacks:Er(),dirty:Gu,skip_bound:!1,root:$u.target||Uu.$$.root};Vu&&Vu(Hu.root);let Wu=!1;if(Hu.ctx=Ru?Ru(_u,$u.props||{},(Qu,qu,...Ku)=>{const Yu=Ku.length?Ku[0]:qu;return Hu.ctx&&Fu(Hu.ctx[Qu],Hu.ctx[Qu]=Yu)&&(!Hu.skip_bound&&Hu.bound[Qu]&&Hu.bound[Qu](Yu),Wu&&rf(_u,Qu)),qu}):[],Hu.update(),Wu=!0,Gt(Hu.before_update),Hu.fragment=Ou?Ou(Hu.ctx):!1,$u.target){if($u.hydrate){const Qu=Jd($u.target);Hu.fragment&&Hu.fragment.l(Qu),Qu.forEach(Q)}else Hu.fragment&&Hu.fragment.c();$u.intro&&z(_u.$$.fragment),se(_u,$u.target,$u.anchor,$u.customElement),wc()}Jn(Uu)}class fe{$destroy(){oe(this,1),this.$destroy=ce}$on($u,Ru){if(!ls(Ru))return ce;const Ou=this.$$.callbacks[$u]||(this.$$.callbacks[$u]=[]);return Ou.push(Ru),()=>{const Fu=Ou.indexOf(Ru);Fu!==-1&&Ou.splice(Fu,1)}}$set($u){this.$$set&&!Ud($u)&&(this.$$.skip_bound=!0,this.$$set($u),this.$$.skip_bound=!1)}}function es(_u){return Object.prototype.toString.call(_u)==="[object Object]"}function cs(_u,$u){return _u===$u?!0:typeof _u!=typeof $u?!1:!!(Number.isNaN(_u)&&Number.isNaN($u))}function bf(_u,$u){const Ru=Object.getOwnPropertyNames(_u),Ou=Object.getOwnPropertyNames($u);if(Ru.length!==Ou.length)return!1;for(let Fu=0,Nu=Ru.length;Fu<Nu;Fu++){const Vu=Ru[Fu];if(!cs(_u[Vu],$u[Vu]))return!1}return!0}function yf(_u,$u){if(_u.length!==$u.length)return!1;for(let Ru=0,Ou=_u.length;Ru<Ou;Ru++)if(!cs(_u[Ru],$u[Ru]))return!1;return!0}function wf(_u,$u){return cs(_u,$u)?!0:es(_u)&&es($u)?bf(_u,$u):Array.isArray(_u)&&Array.isArray($u)?yf(_u,$u):!1}function Do(_u,$u){return cs(_u,$u)?!0:es(_u)&&es($u)?Cf(_u,$u):Array.isArray(_u)&&Array.isArray($u)?Ef(_u,$u):!1}function Ef(_u,$u){if(_u.length!==$u.length)return!1;for(let Ru=0,Ou=_u.length;Ru<Ou;Ru++)if(!Do(_u[Ru],$u[Ru]))return!1;return!0}function Cf(_u,$u){const Ru=Object.getOwnPropertyNames(_u),Ou=Object.getOwnPropertyNames($u);if(Ru.length!==Ou.length)return!1;for(let Fu=0,Nu=Ru.length;Fu<Nu;Fu++){const Vu=Ru[Fu];if(!Do(_u[Vu],$u[Vu]))return!1}return!0}function Et(_u,$u,Ru={deep:!1}){return Ru.deep?Do(_u,$u):wf(_u,$u)}function Mn(_u){return _u<.5?4*_u*_u*_u:.5*Math.pow(2*_u-2,3)+1}function Ic(_u){const $u=_u-1;return $u*$u*$u+1}function pn(_u,{delay:$u=0,duration:Ru=400,easing:Ou=Ln}={}){const Fu=+getComputedStyle(_u).opacity;return{delay:$u,duration:Ru,easing:Ou,css:Nu=>`opacity: ${Nu*Fu}`}}function xr(_u,{delay:$u=0,duration:Ru=400,easing:Ou=Ic,x:Fu=0,y:Nu=0,opacity:Vu=0}={}){const Gu=getComputedStyle(_u),Uu=+Gu.opacity,Hu=Gu.transform==="none"?"":Gu.transform,Wu=Uu*(1-Vu);return{delay:$u,duration:Ru,easing:Ou,css:(Qu,qu)=>`
			transform: ${Hu} translate(${(1-Qu)*Fu}px, ${(1-Qu)*Nu}px);
			opacity: ${Uu-Wu*qu}`}}function ts(_u,{delay:$u=0,speed:Ru,duration:Ou,easing:Fu=Mn}={}){let Nu=_u.getTotalLength();const Vu=getComputedStyle(_u);return Vu.strokeLinecap!=="butt"&&(Nu+=parseInt(Vu.strokeWidth)),Ou===void 0?Ru===void 0?Ou=800:Ou=Nu/Ru:typeof Ou=="function"&&(Ou=Ou(Nu)),{delay:$u,duration:Ou,easing:Fu,css:(Gu,Uu)=>`stroke-dasharray: ${Gu*Nu} ${Uu*Nu}`}}const Pn=[];function Lo(_u,$u=ce){let Ru;const Ou=new Set;function Fu(Gu){if(ue(_u,Gu)&&(_u=Gu,Ru)){const Uu=!Pn.length;for(const Hu of Ou)Hu[1](),Pn.push(Hu,_u);if(Uu){for(let Hu=0;Hu<Pn.length;Hu+=2)Pn[Hu][0](Pn[Hu+1]);Pn.length=0}}}function Nu(Gu){Fu(Gu(_u))}function Vu(Gu,Uu=ce){const Hu=[Gu,Uu];return Ou.add(Hu),Ou.size===1&&(Ru=$u(Fu)||ce),Gu(_u),()=>{Ou.delete(Hu),Ou.size===0&&(Ru(),Ru=null)}}return{set:Fu,update:Nu,subscribe:Vu}}class fs{constructor($u,Ru){g(this,"five"),g(this,"hooks",new oi),g(this,"staticPrefix","//vrlab-static.ljcdn.com"),this.five=$u,Ru!=null&&Ru.staticPrefix&&(this.staticPrefix=Ru.staticPrefix)}getCurrentState(){return this.state}}class yn extends fs{}new TextureLoader;var Rc={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(_u){(function($u,Ru,Ou,Fu){var Nu=["","webkit","Moz","MS","ms","o"],Vu=Ru.createElement("div"),Gu="function",Uu=Math.round,Hu=Math.abs,Wu=Date.now;function Qu(gp,_p,Dp){return setTimeout(Xc(gp,Dp),_p)}function qu(gp,_p,Dp){return Array.isArray(gp)?(Ku(gp,Dp[_p],Dp),!0):!1}function Ku(gp,_p,Dp){var qp;if(gp)if(gp.forEach)gp.forEach(_p,Dp);else if(gp.length!==Fu)for(qp=0;qp<gp.length;)_p.call(Dp,gp[qp],qp,gp),qp++;else for(qp in gp)gp.hasOwnProperty(qp)&&_p.call(Dp,gp[qp],qp,gp)}function Yu(gp,_p,Dp){var qp="DEPRECATED METHOD: "+_p+`
`+Dp+` AT 
`;return function(){var Jp=new Error("get-stack-trace"),bm=Jp&&Jp.stack?Jp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Tm=$u.console&&($u.console.warn||$u.console.log);return Tm&&Tm.call($u.console,qp,bm),gp.apply(this,arguments)}}var _c;typeof Object.assign!="function"?_c=function(gp){if(gp===Fu||gp===null)throw new TypeError("Cannot convert undefined or null to object");for(var _p=Object(gp),Dp=1;Dp<arguments.length;Dp++){var qp=arguments[Dp];if(qp!==Fu&&qp!==null)for(var Jp in qp)qp.hasOwnProperty(Jp)&&(_p[Jp]=qp[Jp])}return _p}:_c=Object.assign;var Ju=Yu(function(gp,_p,Dp){for(var qp=Object.keys(_p),Jp=0;Jp<qp.length;)(!Dp||Dp&&gp[qp[Jp]]===Fu)&&(gp[qp[Jp]]=_p[qp[Jp]]),Jp++;return gp},"extend","Use `assign`."),Xu=Yu(function(gp,_p){return Ju(gp,_p,!0)},"merge","Use `assign`.");function Zu(gp,_p,Dp){var qp=_p.prototype,Jp;Jp=gp.prototype=Object.create(qp),Jp.constructor=gp,Jp._super=qp,Dp&&_c(Jp,Dp)}function Xc(gp,_p){return function(){return gp.apply(_p,arguments)}}function _h(gp,_p){return typeof gp==Gu?gp.apply(_p&&_p[0]||Fu,_p):gp}function ep(gp,_p){return gp===Fu?_p:gp}function np(gp,_p,Dp){Ku(_f(_p),function(qp){gp.addEventListener(qp,Dp,!1)})}function ap(gp,_p,Dp){Ku(_f(_p),function(qp){gp.removeEventListener(qp,Dp,!1)})}function lp(gp,_p){for(;gp;){if(gp==_p)return!0;gp=gp.parentNode}return!1}function up(gp,_p){return gp.indexOf(_p)>-1}function _f(gp){return gp.trim().split(/\s+/g)}function tp(gp,_p,Dp){if(gp.indexOf&&!Dp)return gp.indexOf(_p);for(var qp=0;qp<gp.length;){if(Dp&&gp[qp][Dp]==_p||!Dp&&gp[qp]===_p)return qp;qp++}return-1}function ip(gp){return Array.prototype.slice.call(gp,0)}function rp(gp,_p,Dp){for(var qp=[],Jp=[],bm=0;bm<gp.length;){var Tm=_p?gp[bm][_p]:gp[bm];tp(Jp,Tm)<0&&qp.push(gp[bm]),Jp[bm]=Tm,bm++}return Dp&&(_p?qp=qp.sort(function(Nm,Ym){return Nm[_p]>Ym[_p]}):qp=qp.sort()),qp}function op(gp,_p){for(var Dp,qp,Jp=_p[0].toUpperCase()+_p.slice(1),bm=0;bm<Nu.length;){if(Dp=Nu[bm],qp=Dp?Dp+Jp:_p,qp in gp)return qp;bm++}return Fu}var sp=1;function cp(){return sp++}function hp(gp){var _p=gp.ownerDocument||gp;return _p.defaultView||_p.parentWindow||$u}var dp=/mobile|tablet|ip(ad|hone|od)|android/i,xp="ontouchstart"in $u,bp=op($u,"PointerEvent")!==Fu,Rp=xp&&dp.test(navigator.userAgent),Tp="touch",Up="pen",Ip="mouse",Vp="kinect",Lp=25,mp=1,pp=2,wp=4,Ap=8,Sp=1,Cp=2,$p=4,Fp=8,jp=16,kp=Cp|$p,fp=Fp|jp,yp=kp|fp,Gp=["x","y"],Np=["clientX","clientY"];function Xp(gp,_p){var Dp=this;this.manager=gp,this.callback=_p,this.element=gp.element,this.target=gp.options.inputTarget,this.domHandler=function(qp){_h(gp.options.enable,[gp])&&Dp.handler(qp)},this.init()}Xp.prototype={handler:function(){},init:function(){this.evEl&&np(this.element,this.evEl,this.domHandler),this.evTarget&&np(this.target,this.evTarget,this.domHandler),this.evWin&&np(hp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ap(this.element,this.evEl,this.domHandler),this.evTarget&&ap(this.target,this.evTarget,this.domHandler),this.evWin&&ap(hp(this.element),this.evWin,this.domHandler)}};function Qp(gp){var _p,Dp=gp.options.inputClass;return Dp?_p=Dp:bp?_p=Cm:Rp?_p=am:xp?_p=vm:_p=Em,new _p(gp,Zp)}function Zp(gp,_p,Dp){var qp=Dp.pointers.length,Jp=Dp.changedPointers.length,bm=_p&mp&&qp-Jp===0,Tm=_p&(wp|Ap)&&qp-Jp===0;Dp.isFirst=!!bm,Dp.isFinal=!!Tm,bm&&(gp.session={}),Dp.eventType=_p,im(gp,Dp),gp.emit("hammer.input",Dp),gp.recognize(Dp),gp.session.prevInput=Dp}function im(gp,_p){var Dp=gp.session,qp=_p.pointers,Jp=qp.length;Dp.firstInput||(Dp.firstInput=em(_p)),Jp>1&&!Dp.firstMultiple?Dp.firstMultiple=em(_p):Jp===1&&(Dp.firstMultiple=!1);var bm=Dp.firstInput,Tm=Dp.firstMultiple,Nm=Tm?Tm.center:bm.center,Ym=_p.center=om(qp);_p.timeStamp=Wu(),_p.deltaTime=_p.timeStamp-bm.timeStamp,_p.angle=rm(Nm,Ym),_p.distance=Bp(Nm,Ym),nm(Dp,_p),_p.offsetDirection=sm(_p.deltaX,_p.deltaY);var qm=tm(_p.deltaTime,_p.deltaX,_p.deltaY);_p.overallVelocityX=qm.x,_p.overallVelocityY=qm.y,_p.overallVelocity=Hu(qm.x)>Hu(qm.y)?qm.x:qm.y,_p.scale=Tm?dm(Tm.pointers,qp):1,_p.rotation=Tm?lm(Tm.pointers,qp):0,_p.maxPointers=Dp.prevInput?_p.pointers.length>Dp.prevInput.maxPointers?_p.pointers.length:Dp.prevInput.maxPointers:_p.pointers.length,cm(Dp,_p);var h0=gp.element;lp(_p.srcEvent.target,h0)&&(h0=_p.srcEvent.target),_p.target=h0}function nm(gp,_p){var Dp=_p.center,qp=gp.offsetDelta||{},Jp=gp.prevDelta||{},bm=gp.prevInput||{};(_p.eventType===mp||bm.eventType===wp)&&(Jp=gp.prevDelta={x:bm.deltaX||0,y:bm.deltaY||0},qp=gp.offsetDelta={x:Dp.x,y:Dp.y}),_p.deltaX=Jp.x+(Dp.x-qp.x),_p.deltaY=Jp.y+(Dp.y-qp.y)}function cm(gp,_p){var Dp=gp.lastInterval||_p,qp=_p.timeStamp-Dp.timeStamp,Jp,bm,Tm,Nm;if(_p.eventType!=Ap&&(qp>Lp||Dp.velocity===Fu)){var Ym=_p.deltaX-Dp.deltaX,qm=_p.deltaY-Dp.deltaY,h0=tm(qp,Ym,qm);bm=h0.x,Tm=h0.y,Jp=Hu(h0.x)>Hu(h0.y)?h0.x:h0.y,Nm=sm(Ym,qm),gp.lastInterval=_p}else Jp=Dp.velocity,bm=Dp.velocityX,Tm=Dp.velocityY,Nm=Dp.direction;_p.velocity=Jp,_p.velocityX=bm,_p.velocityY=Tm,_p.direction=Nm}function em(gp){for(var _p=[],Dp=0;Dp<gp.pointers.length;)_p[Dp]={clientX:Uu(gp.pointers[Dp].clientX),clientY:Uu(gp.pointers[Dp].clientY)},Dp++;return{timeStamp:Wu(),pointers:_p,center:om(_p),deltaX:gp.deltaX,deltaY:gp.deltaY}}function om(gp){var _p=gp.length;if(_p===1)return{x:Uu(gp[0].clientX),y:Uu(gp[0].clientY)};for(var Dp=0,qp=0,Jp=0;Jp<_p;)Dp+=gp[Jp].clientX,qp+=gp[Jp].clientY,Jp++;return{x:Uu(Dp/_p),y:Uu(qp/_p)}}function tm(gp,_p,Dp){return{x:_p/gp||0,y:Dp/gp||0}}function sm(gp,_p){return gp===_p?Sp:Hu(gp)>=Hu(_p)?gp<0?Cp:$p:_p<0?Fp:jp}function Bp(gp,_p,Dp){Dp||(Dp=Gp);var qp=_p[Dp[0]]-gp[Dp[0]],Jp=_p[Dp[1]]-gp[Dp[1]];return Math.sqrt(qp*qp+Jp*Jp)}function rm(gp,_p,Dp){Dp||(Dp=Gp);var qp=_p[Dp[0]]-gp[Dp[0]],Jp=_p[Dp[1]]-gp[Dp[1]];return Math.atan2(Jp,qp)*180/Math.PI}function lm(gp,_p){return rm(_p[1],_p[0],Np)+rm(gp[1],gp[0],Np)}function dm(gp,_p){return Bp(_p[0],_p[1],Np)/Bp(gp[0],gp[1],Np)}var hm={mousedown:mp,mousemove:pp,mouseup:wp},ym="mousedown",Mm="mousemove mouseup";function Em(){this.evEl=ym,this.evWin=Mm,this.pressed=!1,Xp.apply(this,arguments)}Zu(Em,Xp,{handler:function(gp){var _p=hm[gp.type];_p&mp&&gp.button===0&&(this.pressed=!0),_p&pp&&gp.which!==1&&(_p=wp),this.pressed&&(_p&wp&&(this.pressed=!1),this.callback(this.manager,_p,{pointers:[gp],changedPointers:[gp],pointerType:Ip,srcEvent:gp}))}});var Dm={pointerdown:mp,pointermove:pp,pointerup:wp,pointercancel:Ap,pointerout:Ap},Sm={2:Tp,3:Up,4:Ip,5:Vp},Bm="pointerdown",Rm="pointermove pointerup pointercancel";$u.MSPointerEvent&&!$u.PointerEvent&&(Bm="MSPointerDown",Rm="MSPointerMove MSPointerUp MSPointerCancel");function Cm(){this.evEl=Bm,this.evWin=Rm,Xp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Zu(Cm,Xp,{handler:function(gp){var _p=this.store,Dp=!1,qp=gp.type.toLowerCase().replace("ms",""),Jp=Dm[qp],bm=Sm[gp.pointerType]||gp.pointerType,Tm=bm==Tp,Nm=tp(_p,gp.pointerId,"pointerId");Jp&mp&&(gp.button===0||Tm)?Nm<0&&(_p.push(gp),Nm=_p.length-1):Jp&(wp|Ap)&&(Dp=!0),!(Nm<0)&&(_p[Nm]=gp,this.callback(this.manager,Jp,{pointers:_p,changedPointers:[gp],pointerType:bm,srcEvent:gp}),Dp&&_p.splice(Nm,1))}});var km={touchstart:mp,touchmove:pp,touchend:wp,touchcancel:Ap},zm="touchstart",$m="touchstart touchmove touchend touchcancel";function Mp(){this.evTarget=zm,this.evWin=$m,this.started=!1,Xp.apply(this,arguments)}Zu(Mp,Xp,{handler:function(gp){var _p=km[gp.type];if(_p===mp&&(this.started=!0),!!this.started){var Dp=Wp.call(this,gp,_p);_p&(wp|Ap)&&Dp[0].length-Dp[1].length===0&&(this.started=!1),this.callback(this.manager,_p,{pointers:Dp[0],changedPointers:Dp[1],pointerType:Tp,srcEvent:gp})}}});function Wp(gp,_p){var Dp=ip(gp.touches),qp=ip(gp.changedTouches);return _p&(wp|Ap)&&(Dp=rp(Dp.concat(qp),"identifier",!0)),[Dp,qp]}var Hp={touchstart:mp,touchmove:pp,touchend:wp,touchcancel:Ap},Kp="touchstart touchmove touchend touchcancel";function am(){this.evTarget=Kp,this.targetIds={},Xp.apply(this,arguments)}Zu(am,Xp,{handler:function(gp){var _p=Hp[gp.type],Dp=xm.call(this,gp,_p);!Dp||this.callback(this.manager,_p,{pointers:Dp[0],changedPointers:Dp[1],pointerType:Tp,srcEvent:gp})}});function xm(gp,_p){var Dp=ip(gp.touches),qp=this.targetIds;if(_p&(mp|pp)&&Dp.length===1)return qp[Dp[0].identifier]=!0,[Dp,Dp];var Jp,bm,Tm=ip(gp.changedTouches),Nm=[],Ym=this.target;if(bm=Dp.filter(function(qm){return lp(qm.target,Ym)}),_p===mp)for(Jp=0;Jp<bm.length;)qp[bm[Jp].identifier]=!0,Jp++;for(Jp=0;Jp<Tm.length;)qp[Tm[Jp].identifier]&&Nm.push(Tm[Jp]),_p&(wp|Ap)&&delete qp[Tm[Jp].identifier],Jp++;if(Nm.length)return[rp(bm.concat(Nm),"identifier",!0),Nm]}var Am=2500,pm=25;function vm(){Xp.apply(this,arguments);var gp=Xc(this.handler,this);this.touch=new am(this.manager,gp),this.mouse=new Em(this.manager,gp),this.primaryTouch=null,this.lastTouches=[]}Zu(vm,Xp,{handler:function(gp,_p,Dp){var qp=Dp.pointerType==Tp,Jp=Dp.pointerType==Ip;if(!(Jp&&Dp.sourceCapabilities&&Dp.sourceCapabilities.firesTouchEvents)){if(qp)wm.call(this,_p,Dp);else if(Jp&&vp.call(this,Dp))return;this.callback(gp,_p,Dp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function wm(gp,_p){gp&mp?(this.primaryTouch=_p.changedPointers[0].identifier,Pm.call(this,_p)):gp&(wp|Ap)&&Pm.call(this,_p)}function Pm(gp){var _p=gp.changedPointers[0];if(_p.identifier===this.primaryTouch){var Dp={x:_p.clientX,y:_p.clientY};this.lastTouches.push(Dp);var qp=this.lastTouches,Jp=function(){var bm=qp.indexOf(Dp);bm>-1&&qp.splice(bm,1)};setTimeout(Jp,Am)}}function vp(gp){for(var _p=gp.srcEvent.clientX,Dp=gp.srcEvent.clientY,qp=0;qp<this.lastTouches.length;qp++){var Jp=this.lastTouches[qp],bm=Math.abs(_p-Jp.x),Tm=Math.abs(Dp-Jp.y);if(bm<=pm&&Tm<=pm)return!0}return!1}var Ep=op(Vu.style,"touchAction"),Pp=Ep!==Fu,zp="compute",Yp="auto",mm="manipulation",gm="none",Lm="pan-x",fm="pan-y",Om=Ty();function Hm(gp,_p){this.manager=gp,this.set(_p)}Hm.prototype={set:function(gp){gp==zp&&(gp=this.compute()),Pp&&this.manager.element.style&&Om[gp]&&(this.manager.element.style[Ep]=gp),this.actions=gp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var gp=[];return Ku(this.manager.recognizers,function(_p){_h(_p.options.enable,[_p])&&(gp=gp.concat(_p.getTouchAction()))}),Ey(gp.join(" "))},preventDefaults:function(gp){var _p=gp.srcEvent,Dp=gp.offsetDirection;if(this.manager.session.prevented){_p.preventDefault();return}var qp=this.actions,Jp=up(qp,gm)&&!Om[gm],bm=up(qp,fm)&&!Om[fm],Tm=up(qp,Lm)&&!Om[Lm];if(Jp){var Nm=gp.pointers.length===1,Ym=gp.distance<2,qm=gp.deltaTime<250;if(Nm&&Ym&&qm)return}if(!(Tm&&bm)&&(Jp||bm&&Dp&kp||Tm&&Dp&fp))return this.preventSrc(_p)},preventSrc:function(gp){this.manager.session.prevented=!0,gp.preventDefault()}};function Ey(gp){if(up(gp,gm))return gm;var _p=up(gp,Lm),Dp=up(gp,fm);return _p&&Dp?gm:_p||Dp?_p?Lm:fm:up(gp,mm)?mm:Yp}function Ty(){if(!Pp)return!1;var gp={},_p=$u.CSS&&$u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Dp){gp[Dp]=_p?$u.CSS.supports("touch-action",Dp):!0}),gp}var Xm=1,jm=2,xy=4,Wm=8,Qm=Wm,Vm=16,Im=32;function Um(gp){this.options=_c({},this.defaults,gp||{}),this.id=cp(),this.manager=null,this.options.enable=ep(this.options.enable,!0),this.state=Xm,this.simultaneous={},this.requireFail=[]}Um.prototype={defaults:{},set:function(gp){return _c(this.options,gp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(gp){if(qu(gp,"recognizeWith",this))return this;var _p=this.simultaneous;return gp=Km(gp,this),_p[gp.id]||(_p[gp.id]=gp,gp.recognizeWith(this)),this},dropRecognizeWith:function(gp){return qu(gp,"dropRecognizeWith",this)?this:(gp=Km(gp,this),delete this.simultaneous[gp.id],this)},requireFailure:function(gp){if(qu(gp,"requireFailure",this))return this;var _p=this.requireFail;return gp=Km(gp,this),tp(_p,gp)===-1&&(_p.push(gp),gp.requireFailure(this)),this},dropRequireFailure:function(gp){if(qu(gp,"dropRequireFailure",this))return this;gp=Km(gp,this);var _p=tp(this.requireFail,gp);return _p>-1&&this.requireFail.splice(_p,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(gp){return!!this.simultaneous[gp.id]},emit:function(gp){var _p=this,Dp=this.state;function qp(Jp){_p.manager.emit(Jp,gp)}Dp<Wm&&qp(_p.options.event+Zm(Dp)),qp(_p.options.event),gp.additionalEvent&&qp(gp.additionalEvent),Dp>=Wm&&qp(_p.options.event+Zm(Dp))},tryEmit:function(gp){if(this.canEmit())return this.emit(gp);this.state=Im},canEmit:function(){for(var gp=0;gp<this.requireFail.length;){if(!(this.requireFail[gp].state&(Im|Xm)))return!1;gp++}return!0},recognize:function(gp){var _p=_c({},gp);if(!_h(this.options.enable,[this,_p])){this.reset(),this.state=Im;return}this.state&(Qm|Vm|Im)&&(this.state=Xm),this.state=this.process(_p),this.state&(jm|xy|Wm|Vm)&&this.tryEmit(_p)},process:function(gp){},getTouchAction:function(){},reset:function(){}};function Zm(gp){return gp&Vm?"cancel":gp&Wm?"end":gp&xy?"move":gp&jm?"start":""}function Jm(gp){return gp==jp?"down":gp==Fp?"up":gp==Cp?"left":gp==$p?"right":""}function Km(gp,_p){var Dp=_p.manager;return Dp?Dp.get(gp):gp}function Gm(){Um.apply(this,arguments)}Zu(Gm,Um,{defaults:{pointers:1},attrTest:function(gp){var _p=this.options.pointers;return _p===0||gp.pointers.length===_p},process:function(gp){var _p=this.state,Dp=gp.eventType,qp=_p&(jm|xy),Jp=this.attrTest(gp);return qp&&(Dp&Ap||!Jp)?_p|Vm:qp||Jp?Dp&wp?_p|Wm:_p&jm?_p|xy:jm:Im}});function Cy(){Gm.apply(this,arguments),this.pX=null,this.pY=null}Zu(Cy,Gm,{defaults:{event:"pan",threshold:10,pointers:1,direction:yp},getTouchAction:function(){var gp=this.options.direction,_p=[];return gp&kp&&_p.push(fm),gp&fp&&_p.push(Lm),_p},directionTest:function(gp){var _p=this.options,Dp=!0,qp=gp.distance,Jp=gp.direction,bm=gp.deltaX,Tm=gp.deltaY;return Jp&_p.direction||(_p.direction&kp?(Jp=bm===0?Sp:bm<0?Cp:$p,Dp=bm!=this.pX,qp=Math.abs(gp.deltaX)):(Jp=Tm===0?Sp:Tm<0?Fp:jp,Dp=Tm!=this.pY,qp=Math.abs(gp.deltaY))),gp.direction=Jp,Dp&&qp>_p.threshold&&Jp&_p.direction},attrTest:function(gp){return Gm.prototype.attrTest.call(this,gp)&&(this.state&jm||!(this.state&jm)&&this.directionTest(gp))},emit:function(gp){this.pX=gp.deltaX,this.pY=gp.deltaY;var _p=Jm(gp.direction);_p&&(gp.additionalEvent=this.options.event+_p),this._super.emit.call(this,gp)}});function $y(){Gm.apply(this,arguments)}Zu($y,Gm,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[gm]},attrTest:function(gp){return this._super.attrTest.call(this,gp)&&(Math.abs(gp.scale-1)>this.options.threshold||this.state&jm)},emit:function(gp){if(gp.scale!==1){var _p=gp.scale<1?"in":"out";gp.additionalEvent=this.options.event+_p}this._super.emit.call(this,gp)}});function Py(){Um.apply(this,arguments),this._timer=null,this._input=null}Zu(Py,Um,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Yp]},process:function(gp){var _p=this.options,Dp=gp.pointers.length===_p.pointers,qp=gp.distance<_p.threshold,Jp=gp.deltaTime>_p.time;if(this._input=gp,!qp||!Dp||gp.eventType&(wp|Ap)&&!Jp)this.reset();else if(gp.eventType&mp)this.reset(),this._timer=Qu(function(){this.state=Qm,this.tryEmit()},_p.time,this);else if(gp.eventType&wp)return Qm;return Im},reset:function(){clearTimeout(this._timer)},emit:function(gp){this.state===Qm&&(gp&&gp.eventType&wp?this.manager.emit(this.options.event+"up",gp):(this._input.timeStamp=Wu(),this.manager.emit(this.options.event,this._input)))}});function _g(){Gm.apply(this,arguments)}Zu(_g,Gm,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[gm]},attrTest:function(gp){return this._super.attrTest.call(this,gp)&&(Math.abs(gp.rotation)>this.options.threshold||this.state&jm)}});function By(){Gm.apply(this,arguments)}Zu(By,Gm,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:kp|fp,pointers:1},getTouchAction:function(){return Cy.prototype.getTouchAction.call(this)},attrTest:function(gp){var _p=this.options.direction,Dp;return _p&(kp|fp)?Dp=gp.overallVelocity:_p&kp?Dp=gp.overallVelocityX:_p&fp&&(Dp=gp.overallVelocityY),this._super.attrTest.call(this,gp)&&_p&gp.offsetDirection&&gp.distance>this.options.threshold&&gp.maxPointers==this.options.pointers&&Hu(Dp)>this.options.velocity&&gp.eventType&wp},emit:function(gp){var _p=Jm(gp.offsetDirection);_p&&this.manager.emit(this.options.event+_p,gp),this.manager.emit(this.options.event,gp)}});function Iy(){Um.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Zu(Iy,Um,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[mm]},process:function(gp){var _p=this.options,Dp=gp.pointers.length===_p.pointers,qp=gp.distance<_p.threshold,Jp=gp.deltaTime<_p.time;if(this.reset(),gp.eventType&mp&&this.count===0)return this.failTimeout();if(qp&&Jp&&Dp){if(gp.eventType!=wp)return this.failTimeout();var bm=this.pTime?gp.timeStamp-this.pTime<_p.interval:!0,Tm=!this.pCenter||Bp(this.pCenter,gp.center)<_p.posThreshold;this.pTime=gp.timeStamp,this.pCenter=gp.center,!Tm||!bm?this.count=1:this.count+=1,this._input=gp;var Nm=this.count%_p.taps;if(Nm===0)return this.hasRequireFailures()?(this._timer=Qu(function(){this.state=Qm,this.tryEmit()},_p.interval,this),jm):Qm}return Im},failTimeout:function(){return this._timer=Qu(function(){this.state=Im},this.options.interval,this),Im},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Qm&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Sy(gp,_p){return _p=_p||{},_p.recognizers=ep(_p.recognizers,Sy.defaults.preset),new Ry(gp,_p)}Sy.VERSION="2.0.7",Sy.defaults={domEvents:!1,touchAction:zp,enable:!0,inputTarget:null,inputClass:null,preset:[[_g,{enable:!1}],[$y,{enable:!1},["rotate"]],[By,{direction:kp}],[Cy,{direction:kp},["swipe"]],[Iy],[Iy,{event:"doubletap",taps:2},["tap"]],[Py]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ky=1,Dy=2;function Ry(gp,_p){this.options=_c({},Sy.defaults,_p||{}),this.options.inputTarget=this.options.inputTarget||gp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=gp,this.input=Qp(this),this.touchAction=new Hm(this,this.options.touchAction),Oy(this,!0),Ku(this.options.recognizers,function(Dp){var qp=this.add(new Dp[0](Dp[1]));Dp[2]&&qp.recognizeWith(Dp[2]),Dp[3]&&qp.requireFailure(Dp[3])},this)}Ry.prototype={set:function(gp){return _c(this.options,gp),gp.touchAction&&this.touchAction.update(),gp.inputTarget&&(this.input.destroy(),this.input.target=gp.inputTarget,this.input.init()),this},stop:function(gp){this.session.stopped=gp?Dy:ky},recognize:function(gp){var _p=this.session;if(!_p.stopped){this.touchAction.preventDefaults(gp);var Dp,qp=this.recognizers,Jp=_p.curRecognizer;(!Jp||Jp&&Jp.state&Qm)&&(Jp=_p.curRecognizer=null);for(var bm=0;bm<qp.length;)Dp=qp[bm],_p.stopped!==Dy&&(!Jp||Dp==Jp||Dp.canRecognizeWith(Jp))?Dp.recognize(gp):Dp.reset(),!Jp&&Dp.state&(jm|xy|Wm)&&(Jp=_p.curRecognizer=Dp),bm++}},get:function(gp){if(gp instanceof Um)return gp;for(var _p=this.recognizers,Dp=0;Dp<_p.length;Dp++)if(_p[Dp].options.event==gp)return _p[Dp];return null},add:function(gp){if(qu(gp,"add",this))return this;var _p=this.get(gp.options.event);return _p&&this.remove(_p),this.recognizers.push(gp),gp.manager=this,this.touchAction.update(),gp},remove:function(gp){if(qu(gp,"remove",this))return this;if(gp=this.get(gp),gp){var _p=this.recognizers,Dp=tp(_p,gp);Dp!==-1&&(_p.splice(Dp,1),this.touchAction.update())}return this},on:function(gp,_p){if(gp!==Fu&&_p!==Fu){var Dp=this.handlers;return Ku(_f(gp),function(qp){Dp[qp]=Dp[qp]||[],Dp[qp].push(_p)}),this}},off:function(gp,_p){if(gp!==Fu){var Dp=this.handlers;return Ku(_f(gp),function(qp){_p?Dp[qp]&&Dp[qp].splice(tp(Dp[qp],_p),1):delete Dp[qp]}),this}},emit:function(gp,_p){this.options.domEvents&&Ny(gp,_p);var Dp=this.handlers[gp]&&this.handlers[gp].slice();if(!(!Dp||!Dp.length)){_p.type=gp,_p.preventDefault=function(){_p.srcEvent.preventDefault()};for(var qp=0;qp<Dp.length;)Dp[qp](_p),qp++}},destroy:function(){this.element&&Oy(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Oy(gp,_p){var Dp=gp.element;if(Dp.style){var qp;Ku(gp.options.cssProps,function(Jp,bm){qp=op(Dp.style,bm),_p?(gp.oldCssProps[qp]=Dp.style[qp],Dp.style[qp]=Jp):Dp.style[qp]=gp.oldCssProps[qp]||""}),_p||(gp.oldCssProps={})}}function Ny(gp,_p){var Dp=Ru.createEvent("Event");Dp.initEvent(gp,!0,!0),Dp.gesture=_p,_p.target.dispatchEvent(Dp)}_c(Sy,{INPUT_START:mp,INPUT_MOVE:pp,INPUT_END:wp,INPUT_CANCEL:Ap,STATE_POSSIBLE:Xm,STATE_BEGAN:jm,STATE_CHANGED:xy,STATE_ENDED:Wm,STATE_RECOGNIZED:Qm,STATE_CANCELLED:Vm,STATE_FAILED:Im,DIRECTION_NONE:Sp,DIRECTION_LEFT:Cp,DIRECTION_RIGHT:$p,DIRECTION_UP:Fp,DIRECTION_DOWN:jp,DIRECTION_HORIZONTAL:kp,DIRECTION_VERTICAL:fp,DIRECTION_ALL:yp,Manager:Ry,Input:Xp,TouchAction:Hm,TouchInput:am,MouseInput:Em,PointerEventInput:Cm,TouchMouseInput:vm,SingleTouchInput:Mp,Recognizer:Um,AttrRecognizer:Gm,Tap:Iy,Pan:Cy,Swipe:By,Pinch:$y,Rotate:_g,Press:Py,on:np,off:ap,each:Ku,merge:Xu,extend:Ju,assign:_c,inherit:Zu,bindFn:Xc,prefixed:op});var Vy=typeof $u<"u"?$u:typeof self<"u"?self:{};Vy.Hammer=Sy,typeof Fu=="function"&&Fu.amd?Fu(function(){return Sy}):_u.exports?_u.exports=Sy:$u[Ou]=Sy})(window,document,"Hammer")})(Rc);Rc.exports;new Color(16777215);new Color(6522623);new Color(16777215);new Color(6522623);const um="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==";new TextureLoader().load(um);var Vc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Ru(){for(var Ou=[],Fu=0;Fu<arguments.length;Fu++){var Nu=arguments[Fu];if(Nu){var Vu=typeof Nu;if(Vu==="string"||Vu==="number")Ou.push(Nu);else if(Array.isArray(Nu)){if(Nu.length){var Gu=Ru.apply(null,Nu);Gu&&Ou.push(Gu)}}else if(Vu==="object"){if(Nu.toString!==Object.prototype.toString&&!Nu.toString.toString().includes("[native code]")){Ou.push(Nu.toString());continue}for(var Uu in Nu)$u.call(Nu,Uu)&&Nu[Uu]&&Ou.push(Uu)}}}return Ou.join(" ")}_u.exports?(Ru.default=Ru,_u.exports=Ru):window.classNames=Ru})()})(Vc);Vc.exports;var gs={},Ug=Vg;function Vg(_u,$u,Ru){return _u[0]=$u[0]+Ru[0],_u[1]=$u[1]+Ru[1],_u}var Jg=Zg;function Zg(_u,$u,Ru){return _u[0]=$u,_u[1]=Ru,_u}var qg=Kg;function Kg(_u,$u){var Ru=$u[0],Ou=$u[1],Fu=Ru*Ru+Ou*Ou;return Fu>0&&(Fu=1/Math.sqrt(Fu),_u[0]=$u[0]*Fu,_u[1]=$u[1]*Fu),_u}var $g=e0;function e0(_u,$u,Ru){return _u[0]=$u[0]-Ru[0],_u[1]=$u[1]-Ru[1],_u}var t0=n0;function n0(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]}var i0=Ug,lo=Jg,Zc=qg,s0=$g,o0=t0,Da=[0,0];gs.computeMiter=function(_u,$u,Ru,Ou,Fu){return i0(_u,Ru,Ou),Zc(_u,_u),lo($u,-_u[1],_u[0]),lo(Da,-Ru[1],Ru[0]),Fu/o0($u,Da)};gs.normal=function(_u,$u){return lo(_u,-$u[1],$u[0]),_u};gs.direction=function(_u,$u,Ru){return s0(_u,$u,Ru),Zc(_u,_u),_u};var Ot=gs,sn=[0,0],Mi=[0,0],La=[0,0],Gn=[0,0],r0=function(_u,$u){var Ru=null,Ou=[];$u&&(_u=_u.slice(),_u.push(_u[0]));for(var Fu=_u.length,Nu=1;Nu<Fu;Nu++){var Vu=_u[Nu-1],Gu=_u[Nu],Uu=Nu<_u.length-1?_u[Nu+1]:null;if(Ot.direction(sn,Gu,Vu),Ru||(Ru=[0,0],Ot.normal(Ru,sn)),Nu===1&&Ns(Ou,Ru,1),!Uu)Ot.normal(Ru,sn),Ns(Ou,Ru,1);else{Ot.direction(Mi,Uu,Gu);var Hu=Ot.computeMiter(La,Gn,sn,Mi,1);Ns(Ou,Gn,Hu)}}if(_u.length>2&&$u){var Wu=_u[Fu-2],Qu=_u[0],qu=_u[1];Ot.direction(sn,Qu,Wu),Ot.direction(Mi,qu,Qu),Ot.normal(Ru,sn);var Ku=Ot.computeMiter(La,Gn,sn,Mi,1);Ou[0][0]=Gn.slice(),Ou[Fu-1][0]=Gn.slice(),Ou[0][1]=Ku,Ou[Fu-1][1]=Ku,Ou.pop()}return Ou};function Ns(_u,$u,Ru){_u.push([[$u[0],$u[1]],Ru])}const a0=2,l0=3,c0=3,u0=2;function d0(_u,$u){var Ru,Ou,Fu;if(_u.length<2)return console.warn("positionList length must be greater than 1"),[];const Nu=(Ru=$u==null?void 0:$u.unitWidth)!=null?Ru:.5,Vu=(Ou=$u==null?void 0:$u.unitHeight)!=null?Ou:.5,Gu=(Fu=$u==null?void 0:$u.skipPanoIndexMesh)!=null?Fu:!1,Uu=new CatmullRomCurve3(_u,!1,"catmullrom",1);if(Gu){const Hu=Math.ceil(Uu.getLength()/Vu*1.5),Wu=Uu.getPoints(Hu),Qu=[];let qu=0;const Ku=_u;return Ku.forEach((Yu,_c)=>{let Ju=0,Xu=99999999;Wu.forEach((np,ap)=>{const lp=np.distanceTo(Yu);lp<Xu&&(Ju=ap,Xu=lp)});const Zu=Wu[Ju+1],Xc=Zu==null?void 0:Zu.distanceTo(Yu),_h=Wu[Ju-1],ep=_h==null?void 0:_h.distanceTo(Yu);if(Ju>qu&&Ju-qu>1){let np=Ju;_h!==void 0&&ep>.8&&(np=Ju+1),_h!==void 0&&ep>.2&&ep<.3?np=Ju:Xu>.2&&Xu<.3&&(np=Ju+1);let ap=qu;if(Zu!==void 0&&Xc>.2&&Xc<.3?ap=qu+1:Xu>.2&&Xu<.3&&(ap=qu),Wu[ap]&&Wu[ap+1]){const _f=Ku[_c-1];if(_f)if(_f.equals(Wu[ap]))ap+=1;else{const tp=new Vector3().subVectors(Wu[ap+1],Wu[ap]),ip=new Vector3().subVectors(_f,Wu[ap]);tp.angleTo(ip)<Math.PI/2&&(ap+=1)}}if(np<ap||np-ap<=1)return;const lp=Wu.slice(ap,np),up=Ma(lp,Nu,Vu);Qu.push(up),qu=Ju}}),Qu}else{const Hu=Math.ceil(Uu.getLength()),Wu=Uu.getPoints(Hu);return[Ma(Wu,Nu,Vu)]}}function Ma(_u,$u,Ru){const Ou=$u/2,Fu=Ru/$u,Nu=_u.length,Vu=r0(_u.map(Ju=>[Ju.x,Ju.z])),Gu=(_u.length-1)*a0*l0,Uu=2*Nu,Hu=Uu*c0,Wu=Uu*u0,Qu=new Uint32Array(Gu),qu=new Float32Array(Hu),Ku=new Float32Array(Wu);_u.forEach((Ju,Xu)=>{});let Yu=0;for(let Ju=0;Ju<_u.length;Ju++){const[Xu,Zu]=Vu[Ju][0],Xc=_u[Ju],{x:_h,y:ep,z:np}=Xc,ap=new Vector3(_h+Xu*Ou,ep+.05,np+Zu*Ou);qu[Ju*6+0]=ap.x,qu[Ju*6+1]=ap.y,qu[Ju*6+2]=ap.z;const lp=new Vector3(_h-Xu*Ou,ep+.05,np-Zu*Ou);qu[Ju*6+3]=lp.x,qu[Ju*6+4]=lp.y,qu[Ju*6+5]=lp.z,Yu+=Ju>0?_u[Ju-1].clone().sub(_u[Ju]).length():0;const up=Yu/$u/Fu;Ku[Ju*4+0]=0,Ku[Ju*4+1]=up,Ku[Ju*4+2]=1,Ku[Ju*4+3]=up,Ju!==_u.length-1&&(Qu[Ju*6+0]=Ju*2+0,Qu[Ju*6+1]=Ju*2+2,Qu[Ju*6+2]=Ju*2+1,Qu[Ju*6+3]=Ju*2+2,Qu[Ju*6+4]=Ju*2+3,Qu[Ju*6+5]=Ju*2+1)}const _c=new BufferGeometry;return _c.setAttribute("position",new BufferAttribute(qu,3)),_c.setAttribute("uv",new BufferAttribute(Ku,2)),_c.setIndex(new BufferAttribute(Qu,1)),_c}function f0(_u){const $u=new TextureLoader().load(_u.textureUrl);return $u.wrapS=$u.wrapT=RepeatWrapping,$u.encoding=sRGBEncoding,new MeshBasicMaterial({color:16777215,map:$u,transparent:!0,opacity:.8})}function mn(_u){return _u!=null}const qc="v1.0.1",Kc="GuideLinePlugin",co=`${Kc}@${qc}`,za=_u=>`${co}--${_u}`;class $c extends yn{constructor($u,Ru){super($u,Ru),g(this,"state",{visible:!1,enabled:!0,disposed:!1}),g(this,"data"),g(this,"linesGroup"),g(this,"disposedErrorLog",()=>{console.error(`${co} is disposed`)}),g(this,"actionWhenEnabled",Ou=>{if(this.state.enabled)return Ou()}),Object.assign(window,{[`__${Kc}_DEBUG__`]:this})}async load($u,Ru,Ou=!0){const Fu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Nu=await this.formatData($u);this.hooks.emit("dataChange",Nu,Fu),this.data=Nu,this.linesGroup&&this.five.scene.remove(this.linesGroup);const Vu=this.getLinesGroup(Nu.routes);!Vu||(this.linesGroup=Vu,await this.waitFiveModelLoaded(),this.five.scene.add(Vu),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),Ru&&this.setState(Ru),this.five.needsRender=!0,this.hooks.emit("dataLoaded",Nu),console.log(`${co} loaded`,Nu))}async formatData($u){return typeof $u=="object"&&$u!==null&&$u.version&&$u.data?$u.data:$u}async show($u){this.setState({visible:!0},$u)}async hide($u){this.setState({visible:!1},$u)}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Ru){var Ou;if(this.state.disposed)return this.disposedErrorLog();const Fu=Fm({},this.state);this.state=Fm(Fm({},this.state),$u),$u.disposed!==void 0&&$u.disposed!==Fu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Fu.visible&&this.handleVisible($u.visible,Ru==null?void 0:Ru.userAction),$u.enabled!==void 0&&$u.enabled!==Fu.enabled&&this.handleEnable($u.enabled,Ru==null?void 0:Ru.userAction),Et(Fu,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:Fu,userAction:(Ou=Ru==null?void 0:Ru.userAction)!=null?Ou:!0}),this.five.needsRender=!0)}handleEnable($u,Ru=!0){this.linesGroup&&($u?(this.five.scene.add(this.linesGroup),this.actionWhenEnabled(()=>this.hooks.emit("enable",{userAction:Ru}))):(this.five.scene.remove(this.linesGroup),this.hooks.emit("disable",{userAction:Ru})))}handleVisible($u,Ru=!0){this.linesGroup&&($u?(this.linesGroup.visible=!0,this.actionWhenEnabled(()=>this.hooks.emit("show",{userAction:Ru}))):(this.linesGroup.visible=!1,this.actionWhenEnabled(()=>this.hooks.emit("hide",{userAction:Ru}))))}handleDispose(){this.linesGroup&&this.five.scene.add(this.linesGroup)}getLinesGroup($u){const Ru=$u.map(this.getLine.bind(this)).filter(mn),Ou=new Group$1;if(Ou.name=za("route-group"),Ru.length!==0)return Ou.add(...Ru),Ou}getLine($u){var Ru,Ou,Fu,Nu;const Vu=new Group$1,Gu=$u.panoIndexList.map(Wu=>{var Qu;return(Qu=this.five.work.observers[Wu])==null?void 0:Qu.standingPosition}).filter(mn),Uu=d0(Gu,{skipPanoIndexMesh:(Ru=$u.skipPanoIndexMesh)!=null?Ru:!0,unitWidth:(Ou=$u.unitWidth)!=null?Ou:.6,unitHeight:(Fu=$u.unitHeight)!=null?Fu:.4});if(!Uu)return;const Hu=f0({textureUrl:(Nu=$u.arrowTextureUrl)!=null?Nu:this.staticPrefix+"/release/web/arrow6.b6ce0c62.png"});return Uu.forEach(Wu=>{const Qu=new Mesh(Wu,Hu);Qu.name=za("route-line-mesh"),Vu.add(Qu)}),Vu}async waitFiveModelLoaded(){return new Promise($u=>{if(this.five.model.loaded){$u();return}this.five.once("modelLoaded",()=>{$u()})})}}g($c,"lasestVersion",qc);const p0=(_u,$u)=>new $c(_u,$u);function ja(_u){const $u=Math.abs(Math.cos(_u.latitude));return new Vector3(-Math.sin(_u.longitude)*$u,-Math.sin(_u.latitude),-Math.cos(_u.longitude)*$u)}function m0(_u,$u){const Ru=ja(_u),Ou=ja($u);return Ru.angleTo(Ou)}const g0=async _u=>{try{_u().then(()=>{},()=>{}).catch(()=>{})}catch{}},zi=Math.PI*2;function v0(_u){return _u>=0&&_u<zi?_u:(_u%zi+zi)%zi}function A0(_u){return{longitude:v0(-Math.atan2(_u.x,-_u.z)),latitude:-Math.asin(_u.y/1)}}function b0(_u,$u,Ru,Ou){const Fu=-_u/Ru,Nu=_u;return Fu*Ou+Nu}function y0(_u){return new Promise($u=>{setTimeout(()=>{$u()},_u)})}const eu="v1.0.6",tu="CruisePlugin",vs=`${tu}@${eu}`,Ba=()=>{console.error(`${vs} is disposed`)},w0=()=>{console.warn(`${vs} is disabled`)},E0=()=>{console.error(`${vs} is disabled`)},Gs=new Map;class nu extends yn{constructor($u,Ru){super($u,Ru),g(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),g(this,"data"),g(this,"config"),g(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,disposers:[],modeChanging:!1}),g(this,"GuideLine"),this.config=Ru,Object.assign(window,{[`__${tu}_DEBUG__`]:this});const Ou=this.setFiveLinearUpdateCamera.bind(this),Fu=this.setFiveOriginUpdateCamera.bind(this);this.hooks.on("play",Ou),this.hooks.on("broke",Fu),this.hooks.on("end",Fu),this.hooks.on("pause",Fu),this.privateState.disposers.push(()=>{this.hooks.off("play",Ou),this.hooks.off("broke",Fu),this.hooks.off("end",Fu),this.hooks.off("pause",Fu)})}async load($u,Ru,Ou){var Fu,Nu,Vu,Gu,Uu;if(this.state.disposed)return Ba();this.privateState.fiveOriginGetProgress||(Nu=(Fu=this.five.controller)==null?void 0:Fu.cameraMotion)!=null&&Nu.getProgress||(await this.waitFiveLoaded(),this.privateState.fiveOriginGetProgress=(Gu=(Vu=this.five.controller)==null?void 0:Vu.cameraMotion)==null?void 0:Gu.getProgress),this.clear();const Hu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Wu=await this.formatData($u);this.data=Wu,this.hooks.emit("dataChange",Wu,Hu);let Qu=[],qu;const Ku=this.data.keyframes.filter(Yu=>Yu.data.panoIndex!==void 0);Ku.filter((Yu,_c)=>{var Ju;return Yu.data.panoIndex!==((Ju=Ku[_c-1])==null?void 0:Ju.data.panoIndex)}).map(Yu=>Yu.data.panoIndex).forEach(Yu=>{var _c,Ju;const Xu=(_c=this.five.work.observers[Yu])==null?void 0:_c.floorIndex;if(Xu!==void 0)if(qu===Xu){const Zu=Qu.length-1;Qu[Zu]=[...(Ju=Qu[Zu])!=null?Ju:[],Yu]}else{qu=Xu;const Zu=Qu.length;Qu[Zu]=[Yu]}}),this.GuideLine||(this.GuideLine=p0(this.five,this.config)),(Uu=this.GuideLine)==null||Uu.load({routes:Qu.map(Yu=>({panoIndexList:Yu}))}),this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed),Ru&&this.setState(Ru,{userAction:Ou}),console.log(`${vs} loaded`,Wu),this.hooks.emit("dataLoaded",Wu)}play($u){this.setState({playing:!0},$u)}playFrom($u){const{index:Ru,id:Ou,userAction:Fu}=$u;this.state.playing&&this.setState({playing:!1},{userAction:Fu}),this.setState({playing:!0},{userAction:Fu,playFromIndex:Ru,playFromId:Ou})}playFromStart($u){return this.playFrom(My(Fm({},$u),{index:0}))}pause($u){this.setState({playing:!1},$u)}async show($u){this.setState({visible:!0},$u)}async hide($u){this.setState({visible:!1},$u)}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Ru){var Ou;if(this.state.disposed)return Ba();if(!this.state.enabled&&$u.enabled!==!0&&$u.disposed!==!0)return E0();const Fu=Fm({},this.state);this.state=Fm(Fm({},this.state),$u),$u.disposed!==void 0&&$u.disposed!==Fu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Fu.visible&&this.handleVisible($u.visible,Ru==null?void 0:Ru.userAction),$u.enabled!==void 0&&$u.enabled!==Fu.enabled&&this.handleEnable($u.enabled,Ru==null?void 0:Ru.userAction),$u.playing!==void 0&&$u.playing!==Fu.playing&&this.changePlayState($u.playing,Ru),$u.speed!==void 0&&$u.speed!==Fu.speed&&this.changeSpeed($u.speed,Ru==null?void 0:Ru.userAction),Et(Fu,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:Fu,userAction:(Ou=Ru==null?void 0:Ru.userAction)!=null?Ou:!0})}async formatData($u){this.five.work||await this.waitFiveLoaded();const Ru=this.five.work.observers,Ou=(()=>{const Fu=$u;return typeof Fu=="object"&&Fu!==null&&Fu.version&&Fu.data?Fu.data:Fu})();if(Ou.keyframes)return{keyframesId:it(),keyframes:Ou.keyframes.map((Fu,Nu)=>{var Vu;const Gu=Ou.keyframes[Nu+1],Uu=(()=>!Gu||Gu.start===void 0||Fu.end===void 0?0:Gu.start-Fu.end)();return Fm({id:(Vu=Fu.uuid)!=null?Vu:it(),moveIndex:Nu,stay:Uu,index:Nu},Fu)})};if(Ou.panoIndexList){let Fu=[];const{moveEffect:Nu,moveToFirstPanoEffect:Vu}=Ou;return this.privateState.moveToFirstPanoEffect=Vu,Ou.panoIndexList.forEach((Gu,Uu)=>{const Hu=(()=>{var Wu,Qu,qu,Ku;const Yu=Ou.panoIndexList.slice(Uu).find(Zu=>Zu!==Gu);if(Yu===void 0)return;const _c=(Wu=Ru[Gu])==null?void 0:Wu.position,Ju=(Qu=Ru[Yu])==null?void 0:Qu.position;if(!Ju||!_c||((qu=Ru[Gu])==null?void 0:qu.floorIndex)!==((Ku=Ru[Yu])==null?void 0:Ku.floorIndex))return;const Xu=new Vector3().subVectors(Ju,_c);return A0(Xu)})();Ou.moveType===void 0||Ou.moveType==="justMove"?Fu.push({moveIndex:Uu,stay:Ou.stay,data:Fm({effect:"Move",panoIndex:Gu,moveEffect:Nu},Hu!=null?Hu:{})}):Ou.moveType==="moveAndRotate"&&(Fu.push({moveIndex:Uu,stay:Ou.stay,data:{effect:"Move",panoIndex:Gu,moveEffect:Nu}}),Hu&&Fu.push({moveIndex:Uu,stay:Ou.stay,data:Fm({effect:"Rotate",panoIndex:Gu},Hu)}))}),{keyframesId:it(),keyframes:Fu.map((Gu,Uu)=>Fm({id:it(),index:Uu},Gu))}}else throw new Error("format error: data no keyframes or no panoIndexList")}handleEnable($u,Ru=!0){var Ou,Fu;$u?((Ou=this.GuideLine)==null||Ou.enable(),this.hooks.emit("enable",{userAction:Ru})):((Fu=this.GuideLine)==null||Fu.disable(),this.changePlayState(!1,{userAction:Ru}),this.hooks.emit("disable",{userAction:Ru})),this.state.enabled=$u}handleVisible($u,Ru=!0){var Ou,Fu;$u?((Ou=this.GuideLine)==null||Ou.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:Ru}))):((Fu=this.GuideLine)==null||Fu.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:Ru}))),this.state.visible=$u}changePlayState($u,Ru){this.actionIfStateIsEnabled(()=>{var Ou;return this.hooks.emit("playStateChange",$u?"playing":"pause",{userAction:(Ou=Ru==null?void 0:Ru.userAction)!=null?Ou:!0})}),$u?this.handlePlay(Ru):this.handlePause(Ru),this.state.playing=$u}async handlePlay($u){var Ru;const{data:Ou,state:Fu,privateState:Nu,hooks:Vu}=this;if(Nu.playing||!(Ou!=null&&Ou.keyframes)||(Ou==null?void 0:Ou.keyframes.length)===0)return;const Gu=it();Nu.playId=Gu,Nu.playing=!0,Nu.broke=!1;const Uu=Ou.keyframes,Hu=this.getPauseData();($u==null?void 0:$u.notEmitEvent)!==!0&&Vu.emit("play",{userAction:(Ru=$u==null?void 0:$u.userAction)!=null?Ru:!0});let Wu=!1;const Qu=await(async()=>{var qu,Ku;if(($u==null?void 0:$u.playFromIndex)!==void 0)return $u.playFromIndex;if(($u==null?void 0:$u.playFromId)!==void 0)return(qu=this.data)==null?void 0:qu.keyframes.findIndex(Yu=>Yu.id===$u.playFromId);if(Hu!=null&&Hu.keyframeId){const Yu=(Ku=this.data)==null?void 0:Ku.keyframes.find(_c=>_c.id===Hu.keyframeId);if(Hu!=null&&Hu.fiveState&&await this.move(Hu.fiveState,{moveEffect:Nu.moveToFirstPanoEffect}),Yu){if(Yu.data.effect==="Move")return Yu.index;if(Yu.data.effect==="Rotate"){const _c=Hu.duration!==void 0?Hu.duration*(1-Hu.playedProgress):void 0;return await this.playKeyframe(Yu,{duration:_c}),Wu=!0,Yu.index+1}}}})();this.clearPauseData();for(const qu of Uu){if(Nu.broke||!Fu.playing||!Nu.playing||Gu!==Nu.playId)return;if(!(Qu!==void 0&&qu.index<Qu))try{Vu.emit("playIndexChange",qu.index,qu),await this.playKeyframe(qu,{moveEffect:Wu===!1?Nu.moveToFirstPanoEffect:void 0,duration:800}),qu.stay&&await y0(qu.stay),Wu===!1&&(Wu=!0)}catch{return Promise.resolve("broke")}}Fu.playing&&Gu===Nu.playId&&(this.setState({playing:!1},{userAction:!1}),Vu.emit("end"),this.clearPauseData())}handlePause($u){var Ru;const{state:Ou,privateState:Fu,hooks:Nu}=this;Ou.playing=!1,Fu.playing!==!1&&(Fu.playing=!1,this.setPauseData(),Fu.broke||this.forceInteruptUpdateCamera(),($u==null?void 0:$u.notEmitEvent)!==!0&&Nu.emit("pause",{userAction:(Ru=$u==null?void 0:$u.userAction)!=null?Ru:!0}))}async playKeyframe($u,Ru){var Ou;const{privateState:Fu}=this;return((Ou=this.privateState.currentPlayKeyframe)==null?void 0:Ou.keyframe.id)!==$u.id&&(this.privateState.currentPlayKeyframe={keyframe:$u}),Fu.currentPlayQueue.push(this.getPlayPromise($u,Ru)),this.actionPromiseQueue()}addInterruptListener($u){const Ru=()=>{this.privateState.modeChanging||$u()},Ou=$u;return this.five.once("gesture",Ou),this.five.once("wantsChangeMode",Ru),()=>{this.five.off("gesture",Ou),this.five.once("wantsChangeMode",Ru)}}async getPlayPromise($u,Ru){const Ou=$u.data;if((Ru==null?void 0:Ru.duration)!=null||$u.start!==void 0&&$u.end!==void 0&&$u.end-$u.start,!!Ou)return new Promise((Fu,Nu)=>{let Vu=!1;this.addInterruptListener(()=>{if(!Vu)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),Vu=!0,Nu(new Error("play is interupted"))});try{if(Vu)return;const Gu=()=>{Fu(),Vu=!0};switch(Ou.effect){case"Move":this.move(Ou,Ru).then(Gu);break;case"Rotate":this.rotate(Ou,Ru).then(Gu);break;default:this.rotate(Ou,Ru).then(Gu)}}catch{}})}async actionPromiseQueue(){const{privateState:$u}=this;return new Promise((Ru,Ou)=>{if($u.currentPlayQueue.length===0){Ru();return}const Fu=$u.currentPlayQueue.shift();if(!Fu){Ru();return}Fu.then(Ru,Ou)}).then(()=>$u.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())}async move($u,Ru){if($u.mode&&$u.mode!==this.five.currentMode)await this.changeMode($u);else if($u.panoIndex!==this.five.panoIndex)await this.changePano($u,Ru);else return Promise.resolve()}async rotate($u,Ru){if($u.mode&&$u.mode!==this.five.currentMode)await this.changeMode({mode:$u.mode,panoIndex:$u.panoIndex});else if($u.panoIndex&&$u.panoIndex!==this.five.panoIndex)return await this.changePano($u,Ru);await this.updateCamera($u,Ru==null?void 0:Ru.duration)}async updateCamera($u,Ru=800){const{five:Ou,privateState:Fu,state:Nu}=this;let Vu=Ru;const Gu=(()=>{var Hu,Wu;const Qu=(Hu=Nu.config)==null?void 0:Hu.speedConfig,qu=(Wu=$u.rotateSpeed)!=null?Wu:Qu==null?void 0:Qu.rotateSpeed;if((Qu==null?void 0:Qu.rotateSpeedUnit)===void 0)return qu;if(qu!==void 0)return Qu.rotateSpeedUnit==="rad/ms"?qu:qu/1e3})();if(Gu){const Hu=this.five.getCurrentState();Vu=m0(Hu,$u)/Gu}Fu.currentPlayKeyframe&&(Fu.currentPlayKeyframe.originDuration=Vu);const Uu=this.getSpeededDuration(Vu);return new Promise(Hu=>{g0(()=>Ou.updateCamera($u,Uu)),setTimeout(()=>Hu(),Uu)})}async changePano($u,Ru){var Ou;const{five:Fu,privateState:Nu,state:Vu}=this;if(typeof $u.panoIndex!="number"||$u.panoIndex===Fu.panoIndex)return;Fu.getCurrentState().mode;const Gu=Fu.getCurrentState().mode!=="Panorama";Gu&&(this.privateState.modeChanging=!0);let Uu=(Ou=Ru==null?void 0:Ru.duration)!=null?Ou:800;const Hu=(()=>{var Qu,qu;const Ku=(Qu=Vu.config)==null?void 0:Qu.speedConfig,Yu=(qu=$u.moveSpeed)!=null?qu:Ku==null?void 0:Ku.moveSpeed;if((Ku==null?void 0:Ku.moveSpeedUnit)===void 0)return Yu;if(Yu!==void 0)return Ku.moveSpeedUnit==="m/ms"?Yu:Yu/1e3})();if(Hu&&typeof Fu.panoIndex=="number"&&typeof $u.panoIndex=="number"){const Qu=Fu.work.observers[Fu.panoIndex].position,qu=Fu.work.observers[$u.panoIndex].position;Uu=Qu.distanceTo(qu)/Hu}Nu.currentPlayKeyframe&&(Nu.currentPlayKeyframe.originDuration=Uu);const Wu=this.getSpeededDuration(Uu);await new Promise(Qu=>{var qu,Ku,Yu;Fu.moveToPano($u.panoIndex,{latitude:$u.latitude,longitude:$u.longitude,fov:$u.fov,duration:Wu,effect:(Yu=(Ku=Ru==null?void 0:Ru.moveEffect)!=null?Ku:(qu=this.state.config)==null?void 0:qu.moveEffect)!=null?Yu:$u.moveEffect,moveCancelCallback:()=>Qu(),moveEndCallback:()=>Qu()}),Gu&&Fu.once("panoArrived",()=>Qu())}),Gu&&(this.privateState.modeChanging=!1)}changeSpeed($u,Ru=!0){const{state:Ou,privateState:Fu,hooks:Nu}=this,{currentPlayKeyframe:Vu}=Fu;if(Nu.emit("speedChange",$u,{userAction:Ru}),Ou.playing&&Vu)try{const Gu=Vu.originDuration!==void 0?Vu.originDuration*(1-this.getProgress()):void 0,Uu=this.playKeyframe(Vu.keyframe,{duration:Gu});Fu.currentPlayQueue.push(Uu)}catch{}}getSpeededDuration($u){return $u/this.state.speed}getProgress(){return this.five.controller.cameraMotion.progress}async changeMode($u,Ru){$u.mode&&$u.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,console.log("this.privateState.modeChanging",this.privateState.modeChanging),await this.five.changeMode($u.mode,$u,Ru),this.privateState.modeChanging=!1)}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var $u,Ru;if(($u=this.data)!=null&&$u.keyframesId)return Gs.get((Ru=this.data)==null?void 0:Ru.keyframesId)}setPauseData(){var $u,Ru,Ou,Fu;if(($u=this.data)!=null&&$u.keyframesId)return Gs.set((Ru=this.data)==null?void 0:Ru.keyframesId,{keyframeId:(Ou=this.privateState.currentPlayKeyframe)==null?void 0:Ou.keyframe.id,fiveState:this.five.getCurrentState(),duration:(Fu=this.privateState.currentPlayKeyframe)==null?void 0:Fu.originDuration,playedProgress:this.getProgress()})}clearPauseData(){var $u,Ru;if(($u=this.data)!=null&&$u.keyframesId)return Gs.delete((Ru=this.data)==null?void 0:Ru.keyframesId)}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}handleDispose(){var $u,Ru;this.setState({playing:!1}),this.clearPauseData(),this.clear(),($u=this.GuideLine)==null||$u.dispose(),this.GuideLine=void 0,(Ru=this.privateState.disposers)==null||Ru.forEach(Ou=>Ou==null?void 0:Ou())}actionIfStateIsEnabled($u,Ru){if(this.state.enabled)return $u();Ru!=null&&Ru.warnLog&&w0()}async waitFiveLoaded(){return new Promise($u=>{if(this.five.work){$u();return}this.five.once("loaded",()=>{$u()})})}setFiveLinearUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=$u=>{const Ru=this.five.controller.cameraMotion,Ou=$u-Ru.startTime;return Ou<0?0:Ou>=Ru.duration?1:1-b0(1,Ru.startVelocity,Ru.duration,Ou)})}setFiveOriginUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=this.privateState.fiveOriginGetProgress)}}g(nu,"PluginVersion",eu);var Ct={exports:{}};function ss(_u){return _u===null?"null":typeof _u>"u"?"undefined":typeof _u=="object"?Array.isArray(_u)?"array":"object":typeof _u}function iu(_u){return ss(_u)==="object"?fo(_u):ss(_u)==="array"?uo(_u):_u}function uo(_u){return _u.map(iu)}function fo(_u){const $u={};for(const Ru in _u)!_u.hasOwnProperty(Ru)||($u[Ru]=iu(_u[Ru]));return $u}function As(_u,$u=[],Ru={}){const Ou={arrayBehaviour:Ru.arrayBehaviour||"replace"},Fu=$u.map(Vu=>Vu||{}),Nu=_u||{};for(let Vu=0;Vu<Fu.length;Vu++){const Gu=Fu[Vu],Uu=Object.keys(Gu);for(let Hu=0;Hu<Uu.length;Hu++){const Wu=Uu[Hu],Qu=Gu[Wu],qu=ss(Qu),Ku=ss(Nu[Wu]);if(qu==="object")if(Ku!=="undefined"){const Yu=Ku==="object"?Nu[Wu]:{};Nu[Wu]=As({},[Yu,fo(Qu)],Ou)}else Nu[Wu]=fo(Qu);else if(qu==="array")if(Ku==="array"){const Yu=uo(Qu);Nu[Wu]=Ou.arrayBehaviour==="merge"?Nu[Wu].concat(Yu):Yu}else Nu[Wu]=uo(Qu);else Nu[Wu]=Qu}}return Nu}Ct.exports=function(_u,...$u){return As(_u,$u)};Ct.exports.noMutate=function(..._u){return As({},_u)};Ct.exports.withOptions=function(_u,$u,Ru){return As(_u,$u,Ru)};function C0(_u,$u){$u.forEach(Ru=>{const Ou=new SphereGeometry(.02,16,16),Fu=[],Nu=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Ru.position.length===4)Ru.position.forEach((Vu,Gu)=>{const Uu=Nu[Gu],Hu=new Mesh(Ou,Uu);Hu.position.copy(Ht(Vu)),Fu.push(Hu)});else{const Vu=Nu[0],Gu=new Mesh(Ou,Vu);Gu.position.copy(Ht(Ru.position)),Fu.push(Gu)}Fu.forEach(Vu=>{Vu.material.depthTest=!1,_u.scene.add(Vu)})})}const Ne=_u=>_u;function su(_u){if(_u.length<3)return;const $u=_u.map($n),Ru=$u[1].clone().sub($u[0]),Ou=$u[2].clone().sub($u[1]);return Ru.cross(Ou)}function ji(_u){if(Array.isArray(_u)&&_u.length===4){const $u=_u.map($n);return sc($u[0],$u[2])}else return $n(_u)}function Bi(_u,$u){if(_u===void 0)return;const{min:Ru,max:Ou}=$u!=null?$u:{};if(!(Ru===void 0&&Ou===void 0))return!(typeof Ou=="number"&&Ou<_u||typeof Ru=="number"&&Ru>_u)}function P0(_u,$u){_u.model.loaded?$u():_u.once("modelLoaded",()=>$u())}function I0(_u,$u,Ru){const Ou=new Plane().setFromNormalAndCoplanarPoint(Ru,$u),Fu=$u.clone().sub(_u).cross(new Vector3(0,1,0)).setLength(.01),Nu=new Vector3(0,.01,0);return[$u.clone().sub(Fu).sub(Nu),$u.clone().add(Fu).sub(Nu),$u.clone().add(Fu).add(Nu),$u.clone().sub(Fu).add(Nu)].map(Vu=>Ou.projectPoint(Vu,new Vector3))}const Oa=(_u,$u=1e3/60)=>{let Ru=null;const Ou=_u;return(...Fu)=>{Ru&&clearTimeout(Ru),Ru=setTimeout(()=>{Ou==null||Ou(...Fu),Ru&&clearTimeout(Ru),Ru=null},$u)}};function x0(_u,$u=200){let Ru;return function(...Ou){Ru||(_u.apply(this,Ou),Ru=setTimeout(function(){Ru=null},$u))}}function S0(_u,$u){const[Ru,Ou]=$u;if(Ru>=Ou||Ou<=1||Ru<=1)return-1;const Fu={},Nu=Vu=>(Fu[Vu]||(Fu[Vu]=_u(Vu)),Fu[Vu]);for(let Vu=Ru;Vu<Ou;Vu++){const Gu=Nu(Vu),Uu=Nu(Vu-1);if(Gu<Uu)return Vu}return-1}function Ra(_u,$u){if(!$u||typeof ResizeObserver>"u"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Ru=new ResizeObserver(_u);return{observe:()=>Ru.observe($u),unobserve:()=>Ru.unobserve($u)}}}var wt=(_u=>(_u.Two="2D",_u.Three="3D",_u))(wt||{}),ut=(_u=>(_u.PointTag="PointTag",_u.PlaneTag="PlaneTag",_u))(ut||{}),ht=(_u=>(_u.Audio="Audio",_u.Text="Text",_u.ImageText="ImageText",_u.Link="Link",_u.Marketing="Marketing",_u.MediaPlane="MediaPlane",_u.Custom="Custom",_u))(ht||{}),ho=(_u=>(_u.VrLink="vr",_u.NormalLink="normal",_u))(ho||{});function k0(_u){me(_u,"svelte-1omzoh4",".straight-line.svelte-1omzoh4{display:block;width:100%;height:100%;overflow:visible}")}function Qa(_u){let $u,Ru,Ou,Fu;return{c(){$u=Se("path"),P($u,"fill","none"),P($u,"stroke","url(#"+_u[4]+")"),P($u,"stroke-width","1"),P($u,"d","M0 0.5 L 148 0.5")},m(Nu,Vu){F(Nu,$u,Vu),Fu=!0},p(Nu,Vu){_u=Nu},i(Nu){Fu||(Nu&&Oe(()=>{Ou&&Ou.end(1),Ru=bn($u,ts,{duration:_u[1],delay:_u[0]}),Ru.start()}),Fu=!0)},o(Nu){Ru&&Ru.invalidate(),Nu&&(Ou=jn($u,ts,{duration:_u[1],delay:_u[2]})),Fu=!1},d(Nu){Nu&&Q($u),Nu&&Ou&&Ou.end()}}}function T0(_u){let $u,Ru,Ou,Fu,Nu,Vu=_u[3]&&Qa(_u);return{c(){$u=Se("svg"),Ru=Se("defs"),Ou=Se("linearGradient"),Fu=Se("stop"),Nu=Se("stop"),Vu&&Vu.c(),P(Fu,"offset","25%"),P(Fu,"stop-color","white"),P(Fu,"stop-opacity","1"),P(Nu,"offset","100%"),P(Nu,"stop-color","white"),P(Nu,"stop-opacity","0.5"),P(Ou,"id",_u[4]),P(Ou,"gradientUnits","userSpaceOnUse"),P($u,"class","straight-line svelte-1omzoh4"),P($u,"viewBox","0 0 148 1"),P($u,"preserveAspectRatio","none")},m(Gu,Uu){F(Gu,$u,Uu),W($u,Ru),W(Ru,Ou),W(Ou,Fu),W(Ou,Nu),Vu&&Vu.m($u,null)},p(Gu,[Uu]){Gu[3]?Vu?(Vu.p(Gu,Uu),Uu&8&&z(Vu,1)):(Vu=Qa(Gu),Vu.c(),z(Vu,1),Vu.m($u,null)):Vu&&(ve(),H(Vu,1,1,()=>{Vu=null}),Ae())},i(Gu){z(Vu)},o(Gu){H(Vu)},d(Gu){Gu&&Q($u),Vu&&Vu.d()}}}function D0(_u,$u,Ru){let{inDelay:Ou=0}=$u,{duration:Fu=0}=$u,{outDelay:Nu=0}=$u,{unfolded:Vu}=$u;const Gu=it();return _u.$$set=Uu=>{"inDelay"in Uu&&Ru(0,Ou=Uu.inDelay),"duration"in Uu&&Ru(1,Fu=Uu.duration),"outDelay"in Uu&&Ru(2,Nu=Uu.outDelay),"unfolded"in Uu&&Ru(3,Vu=Uu.unfolded)},[Ou,Fu,Nu,Vu,Gu]}class ou extends fe{constructor($u){super(),de(this,$u,D0,T0,ue,{inDelay:0,duration:1,outDelay:2,unfolded:3},k0)}}function L0(_u){me(_u,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function Ha(_u){let $u,Ru,Ou,Fu,Nu;return{c(){$u=G("div"),P($u,"class","shadow svelte-faoauy"),P($u,"style",Ru=`
      left:${ct(_u[5])};
      bottom:${ct(_u[6])};
      box-shadow: 0 0 ${ct(_u[10])} ${ct(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),X($u,"width",ct(_u[3])),X($u,"height",ct(_u[4])),X($u,"z-index",_u[13])},m(Vu,Gu){F(Vu,$u,Gu),Nu=!0},p(Vu,Gu){_u=Vu,(!Nu||Gu&8160&&Ru!==(Ru=`
      left:${ct(_u[5])};
      bottom:${ct(_u[6])};
      box-shadow: 0 0 ${ct(_u[10])} ${ct(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&P($u,"style",Ru),Gu&8&&X($u,"width",ct(_u[3])),Gu&16&&X($u,"height",ct(_u[4])),Gu&8192&&X($u,"z-index",_u[13])},i(Vu){Nu||(Vu&&Oe(()=>{Fu&&Fu.end(1),Ou=bn($u,pn,{duration:_u[0]}),Ou.start()}),Nu=!0)},o(Vu){Ou&&Ou.invalidate(),Vu&&(Fu=jn($u,pn,{duration:_u[1]})),Nu=!1},d(Vu){Vu&&Q($u),Vu&&Fu&&Fu.end()}}}function M0(_u){let $u,Ru=_u[2]&&Ha(_u);return{c(){Ru&&Ru.c(),$u=Pe()},m(Ou,Fu){Ru&&Ru.m(Ou,Fu),F(Ou,$u,Fu)},p(Ou,[Fu]){Ou[2]?Ru?(Ru.p(Ou,Fu),Fu&4&&z(Ru,1)):(Ru=Ha(Ou),Ru.c(),z(Ru,1),Ru.m($u.parentNode,$u)):Ru&&(ve(),H(Ru,1,1,()=>{Ru=null}),Ae())},i(Ou){z(Ru)},o(Ou){H(Ru)},d(Ou){Ru&&Ru.d(Ou),Ou&&Q($u)}}}function ct(_u){return typeof _u=="number"?_u/16+"rem":_u}function z0(_u,$u,Ru){let{inDelay:Ou=1e3}=$u,{outDelay:Fu=1e3}=$u,{visible:Nu=!0}=$u,{width:Vu=0}=$u,{height:Gu=0}=$u,{left:Uu=0}=$u,{bottom:Hu=0}=$u,{center:Wu=!1}=$u,{horizontalCenter:Qu=!1}=$u,{verticalCenter:qu=!1}=$u,{blurRadius:Ku}=$u,{spreadRadius:Yu}=$u,{opacity:_c=.15}=$u,{zIndex:Ju=void 0}=$u;return _u.$$set=Xu=>{"inDelay"in Xu&&Ru(0,Ou=Xu.inDelay),"outDelay"in Xu&&Ru(1,Fu=Xu.outDelay),"visible"in Xu&&Ru(2,Nu=Xu.visible),"width"in Xu&&Ru(3,Vu=Xu.width),"height"in Xu&&Ru(4,Gu=Xu.height),"left"in Xu&&Ru(5,Uu=Xu.left),"bottom"in Xu&&Ru(6,Hu=Xu.bottom),"center"in Xu&&Ru(7,Wu=Xu.center),"horizontalCenter"in Xu&&Ru(8,Qu=Xu.horizontalCenter),"verticalCenter"in Xu&&Ru(9,qu=Xu.verticalCenter),"blurRadius"in Xu&&Ru(10,Ku=Xu.blurRadius),"spreadRadius"in Xu&&Ru(11,Yu=Xu.spreadRadius),"opacity"in Xu&&Ru(12,_c=Xu.opacity),"zIndex"in Xu&&Ru(13,Ju=Xu.zIndex)},[Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju]}class vt extends fe{constructor($u){super(),de(this,$u,z0,M0,ue,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},L0)}}var ru={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Fo={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},j0=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],os={CSS:{},springs:{}};function Pt(_u,$u,Ru){return Math.min(Math.max(_u,$u),Ru)}function Zn(_u,$u){return _u.indexOf($u)>-1}function Ws(_u,$u){return _u.apply(null,$u)}var pe={arr:function(_u){return Array.isArray(_u)},obj:function(_u){return Zn(Object.prototype.toString.call(_u),"Object")},pth:function(_u){return pe.obj(_u)&&_u.hasOwnProperty("totalLength")},svg:function(_u){return _u instanceof SVGElement},inp:function(_u){return _u instanceof HTMLInputElement},dom:function(_u){return _u.nodeType||pe.svg(_u)},str:function(_u){return typeof _u=="string"},fnc:function(_u){return typeof _u=="function"},und:function(_u){return typeof _u>"u"},nil:function(_u){return pe.und(_u)||_u===null},hex:function(_u){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(_u)},rgb:function(_u){return/^rgb/.test(_u)},hsl:function(_u){return/^hsl/.test(_u)},col:function(_u){return pe.hex(_u)||pe.rgb(_u)||pe.hsl(_u)},key:function(_u){return!ru.hasOwnProperty(_u)&&!Fo.hasOwnProperty(_u)&&_u!=="targets"&&_u!=="keyframes"}};function au(_u){var $u=/\(([^)]+)\)/.exec(_u);return $u?$u[1].split(",").map(function(Ru){return parseFloat(Ru)}):[]}function lu(_u,$u){var Ru=au(_u),Ou=Pt(pe.und(Ru[0])?1:Ru[0],.1,100),Fu=Pt(pe.und(Ru[1])?100:Ru[1],.1,100),Nu=Pt(pe.und(Ru[2])?10:Ru[2],.1,100),Vu=Pt(pe.und(Ru[3])?0:Ru[3],.1,100),Gu=Math.sqrt(Fu/Ou),Uu=Nu/(2*Math.sqrt(Fu*Ou)),Hu=Uu<1?Gu*Math.sqrt(1-Uu*Uu):0,Wu=1,Qu=Uu<1?(Uu*Gu+-Vu)/Hu:-Vu+Gu;function qu(Yu){var _c=$u?$u*Yu/1e3:Yu;return Uu<1?_c=Math.exp(-_c*Uu*Gu)*(Wu*Math.cos(Hu*_c)+Qu*Math.sin(Hu*_c)):_c=(Wu+Qu*_c)*Math.exp(-_c*Gu),Yu===0||Yu===1?Yu:1-_c}function Ku(){var Yu=os.springs[_u];if(Yu)return Yu;for(var _c=1/6,Ju=0,Xu=0;;)if(Ju+=_c,qu(Ju)===1){if(Xu++,Xu>=16)break}else Xu=0;var Zu=Ju*_c*1e3;return os.springs[_u]=Zu,Zu}return $u?qu:Ku}function B0(_u){return _u===void 0&&(_u=10),function($u){return Math.ceil(Pt($u,1e-6,1)*_u)*(1/_u)}}var O0=function(){var _u=11,$u=1/(_u-1);function Ru(Wu,Qu){return 1-3*Qu+3*Wu}function Ou(Wu,Qu){return 3*Qu-6*Wu}function Fu(Wu){return 3*Wu}function Nu(Wu,Qu,qu){return((Ru(Qu,qu)*Wu+Ou(Qu,qu))*Wu+Fu(Qu))*Wu}function Vu(Wu,Qu,qu){return 3*Ru(Qu,qu)*Wu*Wu+2*Ou(Qu,qu)*Wu+Fu(Qu)}function Gu(Wu,Qu,qu,Ku,Yu){var _c,Ju,Xu=0;do Ju=Qu+(qu-Qu)/2,_c=Nu(Ju,Ku,Yu)-Wu,_c>0?qu=Ju:Qu=Ju;while(Math.abs(_c)>1e-7&&++Xu<10);return Ju}function Uu(Wu,Qu,qu,Ku){for(var Yu=0;Yu<4;++Yu){var _c=Vu(Qu,qu,Ku);if(_c===0)return Qu;var Ju=Nu(Qu,qu,Ku)-Wu;Qu-=Ju/_c}return Qu}function Hu(Wu,Qu,qu,Ku){if(!(0<=Wu&&Wu<=1&&0<=qu&&qu<=1))return;var Yu=new Float32Array(_u);if(Wu!==Qu||qu!==Ku)for(var _c=0;_c<_u;++_c)Yu[_c]=Nu(_c*$u,Wu,qu);function Ju(Xu){for(var Zu=0,Xc=1,_h=_u-1;Xc!==_h&&Yu[Xc]<=Xu;++Xc)Zu+=$u;--Xc;var ep=(Xu-Yu[Xc])/(Yu[Xc+1]-Yu[Xc]),np=Zu+ep*$u,ap=Vu(np,Wu,qu);return ap>=.001?Uu(Xu,np,Wu,qu):ap===0?np:Gu(Xu,Zu,Zu+$u,Wu,qu)}return function(Xu){return Wu===Qu&&qu===Ku||Xu===0||Xu===1?Xu:Nu(Ju(Xu),Qu,Ku)}}return Hu}(),cu=function(){var _u={linear:function(){return function(Ou){return Ou}}},$u={Sine:function(){return function(Ou){return 1-Math.cos(Ou*Math.PI/2)}},Circ:function(){return function(Ou){return 1-Math.sqrt(1-Ou*Ou)}},Back:function(){return function(Ou){return Ou*Ou*(3*Ou-2)}},Bounce:function(){return function(Ou){for(var Fu,Nu=4;Ou<((Fu=Math.pow(2,--Nu))-1)/11;);return 1/Math.pow(4,3-Nu)-7.5625*Math.pow((Fu*3-2)/22-Ou,2)}},Elastic:function(Ou,Fu){Ou===void 0&&(Ou=1),Fu===void 0&&(Fu=.5);var Nu=Pt(Ou,1,10),Vu=Pt(Fu,.1,2);return function(Gu){return Gu===0||Gu===1?Gu:-Nu*Math.pow(2,10*(Gu-1))*Math.sin((Gu-1-Vu/(Math.PI*2)*Math.asin(1/Nu))*(Math.PI*2)/Vu)}}},Ru=["Quad","Cubic","Quart","Quint","Expo"];return Ru.forEach(function(Ou,Fu){$u[Ou]=function(){return function(Nu){return Math.pow(Nu,Fu+2)}}}),Object.keys($u).forEach(function(Ou){var Fu=$u[Ou];_u["easeIn"+Ou]=Fu,_u["easeOut"+Ou]=function(Nu,Vu){return function(Gu){return 1-Fu(Nu,Vu)(1-Gu)}},_u["easeInOut"+Ou]=function(Nu,Vu){return function(Gu){return Gu<.5?Fu(Nu,Vu)(Gu*2)/2:1-Fu(Nu,Vu)(Gu*-2+2)/2}},_u["easeOutIn"+Ou]=function(Nu,Vu){return function(Gu){return Gu<.5?(1-Fu(Nu,Vu)(1-Gu*2))/2:(Fu(Nu,Vu)(Gu*2-1)+1)/2}}}),_u}();function No(_u,$u){if(pe.fnc(_u))return _u;var Ru=_u.split("(")[0],Ou=cu[Ru],Fu=au(_u);switch(Ru){case"spring":return lu(_u,$u);case"cubicBezier":return Ws(O0,Fu);case"steps":return Ws(B0,Fu);default:return Ws(Ou,Fu)}}function uu(_u){try{var $u=document.querySelectorAll(_u);return $u}catch{return}}function bs(_u,$u){for(var Ru=_u.length,Ou=arguments.length>=2?arguments[1]:void 0,Fu=[],Nu=0;Nu<Ru;Nu++)if(Nu in _u){var Vu=_u[Nu];$u.call(Ou,Vu,Nu,_u)&&Fu.push(Vu)}return Fu}function ys(_u){return _u.reduce(function($u,Ru){return $u.concat(pe.arr(Ru)?ys(Ru):Ru)},[])}function Fa(_u){return pe.arr(_u)?_u:(pe.str(_u)&&(_u=uu(_u)||_u),_u instanceof NodeList||_u instanceof HTMLCollection?[].slice.call(_u):[_u])}function Go(_u,$u){return _u.some(function(Ru){return Ru===$u})}function Wo(_u){var $u={};for(var Ru in _u)$u[Ru]=_u[Ru];return $u}function po(_u,$u){var Ru=Wo(_u);for(var Ou in _u)Ru[Ou]=$u.hasOwnProperty(Ou)?$u[Ou]:_u[Ou];return Ru}function ws(_u,$u){var Ru=Wo(_u);for(var Ou in $u)Ru[Ou]=pe.und(_u[Ou])?$u[Ou]:_u[Ou];return Ru}function R0(_u){var $u=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(_u);return $u?"rgba("+$u[1]+",1)":_u}function Q0(_u){var $u=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ru=_u.replace($u,function(Gu,Uu,Hu,Wu){return Uu+Uu+Hu+Hu+Wu+Wu}),Ou=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Ru),Fu=parseInt(Ou[1],16),Nu=parseInt(Ou[2],16),Vu=parseInt(Ou[3],16);return"rgba("+Fu+","+Nu+","+Vu+",1)"}function H0(_u){var $u=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_u)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(_u),Ru=parseInt($u[1],10)/360,Ou=parseInt($u[2],10)/100,Fu=parseInt($u[3],10)/100,Nu=$u[4]||1;function Vu(qu,Ku,Yu){return Yu<0&&(Yu+=1),Yu>1&&(Yu-=1),Yu<1/6?qu+(Ku-qu)*6*Yu:Yu<1/2?Ku:Yu<2/3?qu+(Ku-qu)*(2/3-Yu)*6:qu}var Gu,Uu,Hu;if(Ou==0)Gu=Uu=Hu=Fu;else{var Wu=Fu<.5?Fu*(1+Ou):Fu+Ou-Fu*Ou,Qu=2*Fu-Wu;Gu=Vu(Qu,Wu,Ru+1/3),Uu=Vu(Qu,Wu,Ru),Hu=Vu(Qu,Wu,Ru-1/3)}return"rgba("+Gu*255+","+Uu*255+","+Hu*255+","+Nu+")"}function F0(_u){if(pe.rgb(_u))return R0(_u);if(pe.hex(_u))return Q0(_u);if(pe.hsl(_u))return H0(_u)}function Nt(_u){var $u=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(_u);if($u)return $u[1]}function N0(_u){if(Zn(_u,"translate")||_u==="perspective")return"px";if(Zn(_u,"rotate")||Zn(_u,"skew"))return"deg"}function mo(_u,$u){return pe.fnc(_u)?_u($u.target,$u.id,$u.total):_u}function It(_u,$u){return _u.getAttribute($u)}function Xo(_u,$u,Ru){var Ou=Nt($u);if(Go([Ru,"deg","rad","turn"],Ou))return $u;var Fu=os.CSS[$u+Ru];if(!pe.und(Fu))return Fu;var Nu=100,Vu=document.createElement(_u.tagName),Gu=_u.parentNode&&_u.parentNode!==document?_u.parentNode:document.body;Gu.appendChild(Vu),Vu.style.position="absolute",Vu.style.width=Nu+Ru;var Uu=Nu/Vu.offsetWidth;Gu.removeChild(Vu);var Hu=Uu*parseFloat($u);return os.CSS[$u+Ru]=Hu,Hu}function du(_u,$u,Ru){if($u in _u.style){var Ou=$u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Fu=_u.style[$u]||getComputedStyle(_u).getPropertyValue(Ou)||"0";return Ru?Xo(_u,Fu,Ru):Fu}}function Yo(_u,$u){if(pe.dom(_u)&&!pe.inp(_u)&&(!pe.nil(It(_u,$u))||pe.svg(_u)&&_u[$u]))return"attribute";if(pe.dom(_u)&&Go(j0,$u))return"transform";if(pe.dom(_u)&&$u!=="transform"&&du(_u,$u))return"css";if(_u[$u]!=null)return"object"}function fu(_u){if(pe.dom(_u)){for(var $u=_u.style.transform||"",Ru=/(\w+)\(([^)]*)\)/g,Ou=new Map,Fu;Fu=Ru.exec($u);)Ou.set(Fu[1],Fu[2]);return Ou}}function G0(_u,$u,Ru,Ou){var Fu=Zn($u,"scale")?1:0+N0($u),Nu=fu(_u).get($u)||Fu;return Ru&&(Ru.transforms.list.set($u,Nu),Ru.transforms.last=$u),Ou?Xo(_u,Nu,Ou):Nu}function _o(_u,$u,Ru,Ou){switch(Yo(_u,$u)){case"transform":return G0(_u,$u,Ou,Ru);case"css":return du(_u,$u,Ru);case"attribute":return It(_u,$u);default:return _u[$u]||0}}function Uo(_u,$u){var Ru=/^(\*=|\+=|-=)/.exec(_u);if(!Ru)return _u;var Ou=Nt(_u)||0,Fu=parseFloat($u),Nu=parseFloat(_u.replace(Ru[0],""));switch(Ru[0][0]){case"+":return Fu+Nu+Ou;case"-":return Fu-Nu+Ou;case"*":return Fu*Nu+Ou}}function hu(_u,$u){if(pe.col(_u))return F0(_u);if(/\s/g.test(_u))return _u;var Ru=Nt(_u),Ou=Ru?_u.substr(0,_u.length-Ru.length):_u;return $u?Ou+$u:Ou}function Vo(_u,$u){return Math.sqrt(Math.pow($u.x-_u.x,2)+Math.pow($u.y-_u.y,2))}function W0(_u){return Math.PI*2*It(_u,"r")}function X0(_u){return It(_u,"width")*2+It(_u,"height")*2}function Y0(_u){return Vo({x:It(_u,"x1"),y:It(_u,"y1")},{x:It(_u,"x2"),y:It(_u,"y2")})}function pu(_u){for(var $u=_u.points,Ru=0,Ou,Fu=0;Fu<$u.numberOfItems;Fu++){var Nu=$u.getItem(Fu);Fu>0&&(Ru+=Vo(Ou,Nu)),Ou=Nu}return Ru}function _0(_u){var $u=_u.points;return pu(_u)+Vo($u.getItem($u.numberOfItems-1),$u.getItem(0))}function mu(_u){if(_u.getTotalLength)return _u.getTotalLength();switch(_u.tagName.toLowerCase()){case"circle":return W0(_u);case"rect":return X0(_u);case"line":return Y0(_u);case"polyline":return pu(_u);case"polygon":return _0(_u)}}function U0(_u){var $u=mu(_u);return _u.setAttribute("stroke-dasharray",$u),$u}function V0(_u){for(var $u=_u.parentNode;pe.svg($u)&&pe.svg($u.parentNode);)$u=$u.parentNode;return $u}function gu(_u,$u){var Ru=$u||{},Ou=Ru.el||V0(_u),Fu=Ou.getBoundingClientRect(),Nu=It(Ou,"viewBox"),Vu=Fu.width,Gu=Fu.height,Uu=Ru.viewBox||(Nu?Nu.split(" "):[0,0,Vu,Gu]);return{el:Ou,viewBox:Uu,x:Uu[0]/1,y:Uu[1]/1,w:Vu,h:Gu,vW:Uu[2],vH:Uu[3]}}function J0(_u,$u){var Ru=pe.str(_u)?uu(_u)[0]:_u,Ou=$u||100;return function(Fu){return{property:Fu,el:Ru,svg:gu(Ru),totalLength:mu(Ru)*(Ou/100)}}}function Z0(_u,$u,Ru){function Ou(Wu){Wu===void 0&&(Wu=0);var Qu=$u+Wu>=1?$u+Wu:0;return _u.el.getPointAtLength(Qu)}var Fu=gu(_u.el,_u.svg),Nu=Ou(),Vu=Ou(-1),Gu=Ou(1),Uu=Ru?1:Fu.w/Fu.vW,Hu=Ru?1:Fu.h/Fu.vH;switch(_u.property){case"x":return(Nu.x-Fu.x)*Uu;case"y":return(Nu.y-Fu.y)*Hu;case"angle":return Math.atan2(Gu.y-Vu.y,Gu.x-Vu.x)*180/Math.PI}}function Na(_u,$u){var Ru=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Ou=hu(pe.pth(_u)?_u.totalLength:_u,$u)+"";return{original:Ou,numbers:Ou.match(Ru)?Ou.match(Ru).map(Number):[0],strings:pe.str(_u)||$u?Ou.split(Ru):[]}}function Jo(_u){var $u=_u?ys(pe.arr(_u)?_u.map(Fa):Fa(_u)):[];return bs($u,function(Ru,Ou,Fu){return Fu.indexOf(Ru)===Ou})}function vu(_u){var $u=Jo(_u);return $u.map(function(Ru,Ou){return{target:Ru,id:Ou,total:$u.length,transforms:{list:fu(Ru)}}})}function q0(_u,$u){var Ru=Wo($u);if(/^spring/.test(Ru.easing)&&(Ru.duration=lu(Ru.easing)),pe.arr(_u)){var Ou=_u.length,Fu=Ou===2&&!pe.obj(_u[0]);Fu?_u={value:_u}:pe.fnc($u.duration)||(Ru.duration=$u.duration/Ou)}var Nu=pe.arr(_u)?_u:[_u];return Nu.map(function(Vu,Gu){var Uu=pe.obj(Vu)&&!pe.pth(Vu)?Vu:{value:Vu};return pe.und(Uu.delay)&&(Uu.delay=Gu?0:$u.delay),pe.und(Uu.endDelay)&&(Uu.endDelay=Gu===Nu.length-1?$u.endDelay:0),Uu}).map(function(Vu){return ws(Vu,Ru)})}function K0(_u){for(var $u=bs(ys(_u.map(function(Nu){return Object.keys(Nu)})),function(Nu){return pe.key(Nu)}).reduce(function(Nu,Vu){return Nu.indexOf(Vu)<0&&Nu.push(Vu),Nu},[]),Ru={},Ou=function(Nu){var Vu=$u[Nu];Ru[Vu]=_u.map(function(Gu){var Uu={};for(var Hu in Gu)pe.key(Hu)?Hu==Vu&&(Uu.value=Gu[Hu]):Uu[Hu]=Gu[Hu];return Uu})},Fu=0;Fu<$u.length;Fu++)Ou(Fu);return Ru}function $0(_u,$u){var Ru=[],Ou=$u.keyframes;Ou&&($u=ws(K0(Ou),$u));for(var Fu in $u)pe.key(Fu)&&Ru.push({name:Fu,tweens:q0($u[Fu],_u)});return Ru}function ev(_u,$u){var Ru={};for(var Ou in _u){var Fu=mo(_u[Ou],$u);pe.arr(Fu)&&(Fu=Fu.map(function(Nu){return mo(Nu,$u)}),Fu.length===1&&(Fu=Fu[0])),Ru[Ou]=Fu}return Ru.duration=parseFloat(Ru.duration),Ru.delay=parseFloat(Ru.delay),Ru}function tv(_u,$u){var Ru;return _u.tweens.map(function(Ou){var Fu=ev(Ou,$u),Nu=Fu.value,Vu=pe.arr(Nu)?Nu[1]:Nu,Gu=Nt(Vu),Uu=_o($u.target,_u.name,Gu,$u),Hu=Ru?Ru.to.original:Uu,Wu=pe.arr(Nu)?Nu[0]:Hu,Qu=Nt(Wu)||Nt(Uu),qu=Gu||Qu;return pe.und(Vu)&&(Vu=Hu),Fu.from=Na(Wu,qu),Fu.to=Na(Uo(Vu,Wu),qu),Fu.start=Ru?Ru.end:0,Fu.end=Fu.start+Fu.delay+Fu.duration+Fu.endDelay,Fu.easing=No(Fu.easing,Fu.duration),Fu.isPath=pe.pth(Nu),Fu.isPathTargetInsideSVG=Fu.isPath&&pe.svg($u.target),Fu.isColor=pe.col(Fu.from.original),Fu.isColor&&(Fu.round=1),Ru=Fu,Fu})}var Au={css:function(_u,$u,Ru){return _u.style[$u]=Ru},attribute:function(_u,$u,Ru){return _u.setAttribute($u,Ru)},object:function(_u,$u,Ru){return _u[$u]=Ru},transform:function(_u,$u,Ru,Ou,Fu){if(Ou.list.set($u,Ru),$u===Ou.last||Fu){var Nu="";Ou.list.forEach(function(Vu,Gu){Nu+=Gu+"("+Vu+") "}),_u.style.transform=Nu}}};function bu(_u,$u){var Ru=vu(_u);Ru.forEach(function(Ou){for(var Fu in $u){var Nu=mo($u[Fu],Ou),Vu=Ou.target,Gu=Nt(Nu),Uu=_o(Vu,Fu,Gu,Ou),Hu=Gu||Nt(Uu),Wu=Uo(hu(Nu,Hu),Uu),Qu=Yo(Vu,Fu);Au[Qu](Vu,Fu,Wu,Ou.transforms,!0)}})}function nv(_u,$u){var Ru=Yo(_u.target,$u.name);if(Ru){var Ou=tv($u,_u),Fu=Ou[Ou.length-1];return{type:Ru,property:$u.name,animatable:_u,tweens:Ou,duration:Fu.end,delay:Ou[0].delay,endDelay:Fu.endDelay}}}function iv(_u,$u){return bs(ys(_u.map(function(Ru){return $u.map(function(Ou){return nv(Ru,Ou)})})),function(Ru){return!pe.und(Ru)})}function yu(_u,$u){var Ru=_u.length,Ou=function(Nu){return Nu.timelineOffset?Nu.timelineOffset:0},Fu={};return Fu.duration=Ru?Math.max.apply(Math,_u.map(function(Nu){return Ou(Nu)+Nu.duration})):$u.duration,Fu.delay=Ru?Math.min.apply(Math,_u.map(function(Nu){return Ou(Nu)+Nu.delay})):$u.delay,Fu.endDelay=Ru?Fu.duration-Math.max.apply(Math,_u.map(function(Nu){return Ou(Nu)+Nu.duration-Nu.endDelay})):$u.endDelay,Fu}var Ga=0;function sv(_u){var $u=po(ru,_u),Ru=po(Fo,_u),Ou=$0(Ru,_u),Fu=vu(_u.targets),Nu=iv(Fu,Ou),Vu=yu(Nu,Ru),Gu=Ga;return Ga++,ws($u,{id:Gu,children:[],animatables:Fu,animations:Nu,duration:Vu.duration,delay:Vu.delay,endDelay:Vu.endDelay})}var pt=[],wu=function(){var _u;function $u(){!_u&&(!Wa()||!Le.suspendWhenDocumentHidden)&&pt.length>0&&(_u=requestAnimationFrame(Ru))}function Ru(Fu){for(var Nu=pt.length,Vu=0;Vu<Nu;){var Gu=pt[Vu];Gu.paused?(pt.splice(Vu,1),Nu--):(Gu.tick(Fu),Vu++)}_u=Vu>0?requestAnimationFrame(Ru):void 0}function Ou(){!Le.suspendWhenDocumentHidden||(Wa()?_u=cancelAnimationFrame(_u):(pt.forEach(function(Fu){return Fu._onDocumentVisibility()}),wu()))}return typeof document<"u"&&document.addEventListener("visibilitychange",Ou),$u}();function Wa(){return!!document&&document.hidden}function Le(_u){_u===void 0&&(_u={});var $u=0,Ru=0,Ou=0,Fu,Nu=0,Vu=null;function Gu(Zu){var Xc=window.Promise&&new Promise(function(_h){return Vu=_h});return Zu.finished=Xc,Xc}var Uu=sv(_u);Gu(Uu);function Hu(){var Zu=Uu.direction;Zu!=="alternate"&&(Uu.direction=Zu!=="normal"?"normal":"reverse"),Uu.reversed=!Uu.reversed,Fu.forEach(function(Xc){return Xc.reversed=Uu.reversed})}function Wu(Zu){return Uu.reversed?Uu.duration-Zu:Zu}function Qu(){$u=0,Ru=Wu(Uu.currentTime)*(1/Le.speed)}function qu(Zu,Xc){Xc&&Xc.seek(Zu-Xc.timelineOffset)}function Ku(Zu){if(Uu.reversePlayback)for(var Xc=Nu;Xc--;)qu(Zu,Fu[Xc]);else for(var _h=0;_h<Nu;_h++)qu(Zu,Fu[_h])}function Yu(Zu){for(var Xc=0,_h=Uu.animations,ep=_h.length;Xc<ep;){var np=_h[Xc],ap=np.animatable,lp=np.tweens,up=lp.length-1,_f=lp[up];up&&(_f=bs(lp,function(Lp){return Zu<Lp.end})[0]||_f);for(var tp=Pt(Zu-_f.start-_f.delay,0,_f.duration)/_f.duration,ip=isNaN(tp)?1:_f.easing(tp),rp=_f.to.strings,op=_f.round,sp=[],cp=_f.to.numbers.length,hp=void 0,dp=0;dp<cp;dp++){var xp=void 0,bp=_f.to.numbers[dp],Rp=_f.from.numbers[dp]||0;_f.isPath?xp=Z0(_f.value,ip*bp,_f.isPathTargetInsideSVG):xp=Rp+ip*(bp-Rp),op&&(_f.isColor&&dp>2||(xp=Math.round(xp*op)/op)),sp.push(xp)}var Tp=rp.length;if(!Tp)hp=sp[0];else{hp=rp[0];for(var Up=0;Up<Tp;Up++){rp[Up];var Ip=rp[Up+1],Vp=sp[Up];isNaN(Vp)||(Ip?hp+=Vp+Ip:hp+=Vp+" ")}}Au[np.type](ap.target,np.property,hp,ap.transforms),np.currentValue=hp,Xc++}}function _c(Zu){Uu[Zu]&&!Uu.passThrough&&Uu[Zu](Uu)}function Ju(){Uu.remaining&&Uu.remaining!==!0&&Uu.remaining--}function Xu(Zu){var Xc=Uu.duration,_h=Uu.delay,ep=Xc-Uu.endDelay,np=Wu(Zu);Uu.progress=Pt(np/Xc*100,0,100),Uu.reversePlayback=np<Uu.currentTime,Fu&&Ku(np),!Uu.began&&Uu.currentTime>0&&(Uu.began=!0,_c("begin")),!Uu.loopBegan&&Uu.currentTime>0&&(Uu.loopBegan=!0,_c("loopBegin")),np<=_h&&Uu.currentTime!==0&&Yu(0),(np>=ep&&Uu.currentTime!==Xc||!Xc)&&Yu(Xc),np>_h&&np<ep?(Uu.changeBegan||(Uu.changeBegan=!0,Uu.changeCompleted=!1,_c("changeBegin")),_c("change"),Yu(np)):Uu.changeBegan&&(Uu.changeCompleted=!0,Uu.changeBegan=!1,_c("changeComplete")),Uu.currentTime=Pt(np,0,Xc),Uu.began&&_c("update"),Zu>=Xc&&(Ru=0,Ju(),Uu.remaining?($u=Ou,_c("loopComplete"),Uu.loopBegan=!1,Uu.direction==="alternate"&&Hu()):(Uu.paused=!0,Uu.completed||(Uu.completed=!0,_c("loopComplete"),_c("complete"),!Uu.passThrough&&"Promise"in window&&(Vu(),Gu(Uu)))))}return Uu.reset=function(){var Zu=Uu.direction;Uu.passThrough=!1,Uu.currentTime=0,Uu.progress=0,Uu.paused=!0,Uu.began=!1,Uu.loopBegan=!1,Uu.changeBegan=!1,Uu.completed=!1,Uu.changeCompleted=!1,Uu.reversePlayback=!1,Uu.reversed=Zu==="reverse",Uu.remaining=Uu.loop,Fu=Uu.children,Nu=Fu.length;for(var Xc=Nu;Xc--;)Uu.children[Xc].reset();(Uu.reversed&&Uu.loop!==!0||Zu==="alternate"&&Uu.loop===1)&&Uu.remaining++,Yu(Uu.reversed?Uu.duration:0)},Uu._onDocumentVisibility=Qu,Uu.set=function(Zu,Xc){return bu(Zu,Xc),Uu},Uu.tick=function(Zu){Ou=Zu,$u||($u=Ou),Xu((Ou+(Ru-$u))*Le.speed)},Uu.seek=function(Zu){Xu(Wu(Zu))},Uu.pause=function(){Uu.paused=!0,Qu()},Uu.play=function(){!Uu.paused||(Uu.completed&&Uu.reset(),Uu.paused=!1,pt.push(Uu),Qu(),wu())},Uu.reverse=function(){Hu(),Uu.completed=!Uu.reversed,Qu()},Uu.restart=function(){Uu.reset(),Uu.play()},Uu.remove=function(Zu){var Xc=Jo(Zu);Eu(Xc,Uu)},Uu.reset(),Uu.autoplay&&Uu.play(),Uu}function Xa(_u,$u){for(var Ru=$u.length;Ru--;)Go(_u,$u[Ru].animatable.target)&&$u.splice(Ru,1)}function Eu(_u,$u){var Ru=$u.animations,Ou=$u.children;Xa(_u,Ru);for(var Fu=Ou.length;Fu--;){var Nu=Ou[Fu],Vu=Nu.animations;Xa(_u,Vu),!Vu.length&&!Nu.children.length&&Ou.splice(Fu,1)}!Ru.length&&!Ou.length&&$u.pause()}function ov(_u){for(var $u=Jo(_u),Ru=pt.length;Ru--;){var Ou=pt[Ru];Eu($u,Ou)}}function rv(_u,$u){$u===void 0&&($u={});var Ru=$u.direction||"normal",Ou=$u.easing?No($u.easing):null,Fu=$u.grid,Nu=$u.axis,Vu=$u.from||0,Gu=Vu==="first",Uu=Vu==="center",Hu=Vu==="last",Wu=pe.arr(_u),Qu=parseFloat(Wu?_u[0]:_u),qu=Wu?parseFloat(_u[1]):0,Ku=Nt(Wu?_u[1]:_u)||0,Yu=$u.start||0+(Wu?Qu:0),_c=[],Ju=0;return function(Xu,Zu,Xc){if(Gu&&(Vu=0),Uu&&(Vu=(Xc-1)/2),Hu&&(Vu=Xc-1),!_c.length){for(var _h=0;_h<Xc;_h++){if(!Fu)_c.push(Math.abs(Vu-_h));else{var ep=Uu?(Fu[0]-1)/2:Vu%Fu[0],np=Uu?(Fu[1]-1)/2:Math.floor(Vu/Fu[0]),ap=_h%Fu[0],lp=Math.floor(_h/Fu[0]),up=ep-ap,_f=np-lp,tp=Math.sqrt(up*up+_f*_f);Nu==="x"&&(tp=-up),Nu==="y"&&(tp=-_f),_c.push(tp)}Ju=Math.max.apply(Math,_c)}Ou&&(_c=_c.map(function(rp){return Ou(rp/Ju)*Ju})),Ru==="reverse"&&(_c=_c.map(function(rp){return Nu?rp<0?rp*-1:-rp:Math.abs(Ju-rp)}))}var ip=Wu?(qu-Qu)/Ju:Qu;return Yu+ip*(Math.round(_c[Zu]*100)/100)+Ku}}function av(_u){_u===void 0&&(_u={});var $u=Le(_u);return $u.duration=0,$u.add=function(Ru,Ou){var Fu=pt.indexOf($u),Nu=$u.children;Fu>-1&&pt.splice(Fu,1);function Vu(qu){qu.passThrough=!0}for(var Gu=0;Gu<Nu.length;Gu++)Vu(Nu[Gu]);var Uu=ws(Ru,po(Fo,_u));Uu.targets=Uu.targets||_u.targets;var Hu=$u.duration;Uu.autoplay=!1,Uu.direction=$u.direction,Uu.timelineOffset=pe.und(Ou)?Hu:Uo(Ou,Hu),Vu($u),$u.seek(Uu.timelineOffset);var Wu=Le(Uu);Vu(Wu),Nu.push(Wu);var Qu=yu(Nu,_u);return $u.delay=Qu.delay,$u.endDelay=Qu.endDelay,$u.duration=Qu.duration,$u.seek(0),$u.reset(),$u.autoplay&&$u.play(),$u},$u}Le.version="3.2.1";Le.speed=1;Le.suspendWhenDocumentHidden=!0;Le.running=pt;Le.remove=ov;Le.get=_o;Le.set=bu;Le.convertPx=Xo;Le.path=J0;Le.setDashoffset=U0;Le.stagger=rv;Le.timeline=av;Le.easing=No;Le.penner=cu;Le.random=function(_u,$u){return Math.floor(Math.random()*($u-_u+1))+_u};function lv(){return Math.random().toString(36).slice(-6)}const Ya=lv();function cv(_u){me(_u,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function _a(_u,$u,Ru){const Ou=_u.slice();return Ou[10]=$u[Ru],Ou[11]=$u,Ou[12]=Ru,Ou}function Ua(_u){let $u,Ru=_u[10]+"",Ou,Fu=_u[12];const Nu=()=>_u[6]($u,Fu),Vu=()=>_u[6](null,Fu);return{c(){$u=G("span"),Ou=Qe(Ru),P($u,"class","text-char svelte-1b2n9wi")},m(Gu,Uu){F(Gu,$u,Uu),W($u,Ou),Nu()},p(Gu,Uu){_u=Gu,Uu&2&&Ru!==(Ru=_u[10]+"")&&Ye(Ou,Ru),Fu!==_u[12]&&(Vu(),Fu=_u[12],Nu())},d(Gu){Gu&&Q($u),Vu()}}}function uv(_u){let $u,Ru=_u[1],Ou=[];for(let Fu=0;Fu<Ru.length;Fu+=1)Ou[Fu]=Ua(_a(_u,Ru,Fu));return{c(){for(let Fu=0;Fu<Ou.length;Fu+=1)Ou[Fu].c();$u=Pe()},m(Fu,Nu){for(let Vu=0;Vu<Ou.length;Vu+=1)Ou[Vu].m(Fu,Nu);F(Fu,$u,Nu)},p(Fu,[Nu]){if(Nu&3){Ru=Fu[1];let Vu;for(Vu=0;Vu<Ru.length;Vu+=1){const Gu=_a(Fu,Ru,Vu);Ou[Vu]?Ou[Vu].p(Gu,Nu):(Ou[Vu]=Ua(Gu),Ou[Vu].c(),Ou[Vu].m($u.parentNode,$u))}for(;Vu<Ou.length;Vu+=1)Ou[Vu].d(1);Ou.length=Ru.length}},i:ce,o:ce,d(Fu){Dt(Ou,Fu),Fu&&Q($u)}}}function dv(_u,$u,Ru){let Ou,{inDelay:Fu=0}=$u,{outDelay:Nu=0}=$u,{content:Vu}=$u,{unfolded:Gu}=$u,Uu,Hu=[],Wu;function Qu(Ku){clearTimeout(Uu),Uu=setTimeout(function(){!Wu||(Ku&&Wu.reversed||!Ku&&!Wu.reversed)&&(Wu.reverse(),Wu.play())},Ku?Fu:Nu)}mt(function(){const Ku=(()=>{const Yu=S0(_c=>Hu[_c].getBoundingClientRect().x,[Math.min(Hu.length-1,10),Math.min(Hu.length-1,30)]);if(Yu>0)return Yu})();Wu=Le({targets:Hu.filter(mn).slice(0,Ku),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:Le.stagger(50),easing:"easeInOutCubic"}),Gu&&Wu.seek(Wu.duration)});function qu(Ku,Yu){Xe[Ku?"unshift":"push"](()=>{Hu[Yu]=Ku,Ru(0,Hu)})}return _u.$$set=Ku=>{"inDelay"in Ku&&Ru(2,Fu=Ku.inDelay),"outDelay"in Ku&&Ru(3,Nu=Ku.outDelay),"content"in Ku&&Ru(4,Vu=Ku.content),"unfolded"in Ku&&Ru(5,Gu=Ku.unfolded)},_u.$$.update=()=>{_u.$$.dirty&16&&Ru(1,Ou=(()=>{const Ku=[],Yu=new RegExp(/\p{Regional_Indicator}\p{Regional_Indicator}|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?(\u200D\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?)+|\p{Emoji_Presentation}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)/gu),_c=`__EMOJI_SPLIT_${Ya}__`,Ju=`__EMOJI_${Ya}__`;return Vu.slice().replace(Yu,Xu=>`${_c}${Ju}${Xu}${_c}`).split(_c).forEach(Xu=>Xu.startsWith(Ju)?Ku.push(Xu.slice(Ju.length)):Ku.push(...Xu.split(""))),Ku.filter(Boolean)})()),_u.$$.dirty&32&&Qu(Gu)},[Hu,Ou,Fu,Nu,Vu,Gu,qu]}class Cu extends fe{constructor($u){super(),de(this,$u,dv,uv,ue,{inDelay:2,outDelay:3,content:4,unfolded:5},cv)}}const fv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",Va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=";function hv(_u){me(_u,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function Za(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu;return Ru=new vt({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){$u=G("div"),re(Ru.$$.fragment),Ou=q(),Fu=G("div"),P(Fu,"class",Nu="arrow "+_u[0]+" svelte-1ogmlqq"),X(Fu,"background-image","url("+fv+")"),P($u,"class","arrow-wrapper svelte-1ogmlqq")},m(Qu,qu){F(Qu,$u,qu),se(Ru,$u,null),W($u,Ou),W($u,Fu),Uu=!0,Hu||(Wu=je(Fu,"click",_u[5]),Hu=!0)},p(Qu,qu){_u=Qu,(!Uu||qu&1&&Nu!==(Nu="arrow "+_u[0]+" svelte-1ogmlqq"))&&P(Fu,"class",Nu)},i(Qu){Uu||(z(Ru.$$.fragment,Qu),Qu&&Oe(()=>{Gu&&Gu.end(1),Vu=bn(Fu,pn,{duration:_u[2],delay:_u[3],easing:Mn}),Vu.start()}),Uu=!0)},o(Qu){H(Ru.$$.fragment,Qu),Vu&&Vu.invalidate(),Qu&&(Gu=jn(Fu,pn,{duration:_u[2],delay:_u[4],easing:Mn})),Uu=!1},d(Qu){Qu&&Q($u),oe(Ru),Qu&&Gu&&Gu.end(),Hu=!1,Wu()}}}function pv(_u){let $u,Ru,Ou=_u[1]&&Za(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[1]?Ou?(Ou.p(Fu,Nu),Nu&2&&z(Ou,1)):(Ou=Za(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function mv(_u,$u,Ru){let{direction:Ou="right"}=$u,{visible:Fu=!0}=$u,{duration:Nu=0}=$u,{inDelay:Vu=0}=$u,{outDelay:Gu=0}=$u;function Uu(Hu){tf.call(this,_u,Hu)}return _u.$$set=Hu=>{"direction"in Hu&&Ru(0,Ou=Hu.direction),"visible"in Hu&&Ru(1,Fu=Hu.visible),"duration"in Hu&&Ru(2,Nu=Hu.duration),"inDelay"in Hu&&Ru(3,Vu=Hu.inDelay),"outDelay"in Hu&&Ru(4,Gu=Hu.outDelay)},[Ou,Fu,Nu,Vu,Gu,Uu]}class gv extends fe{constructor($u){super(),de(this,$u,mv,pv,ue,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},hv)}}function vv(_u,$u,Ru=20,Ou=5){return new Promise((Fu,Nu)=>{let Vu=0;const Gu=setInterval(()=>{const Uu=_u();$u(Uu)?(clearInterval(Gu),Fu(Uu)):Vu>=Ou&&(clearInterval(Gu),Nu(Uu)),Vu++},Ru)})}function Av(_u){me(_u,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function qa(_u,$u,Ru){const Ou=_u.slice();return Ou[11]=$u[Ru].id,Ou[12]=$u[Ru].content,Ou}function Ka(_u,$u){let Ru,Ou,Fu;return Ou=new Cu({props:{unfolded:$u[0],content:$u[12],inDelay:500,outDelay:$u[5]}}),{key:_u,first:null,c(){Ru=G("div"),re(Ou.$$.fragment),P(Ru,"class","text svelte-1fuzm7v"),X(Ru,"transform",$u[7]),this.first=Ru},m(Nu,Vu){F(Nu,Ru,Vu),se(Ou,Ru,null),$u[10](Ru),Fu=!0},p(Nu,Vu){$u=Nu;const Gu={};Vu&1&&(Gu.unfolded=$u[0]),Vu&2&&(Gu.content=$u[12]),Vu&32&&(Gu.outDelay=$u[5]),Ou.$set(Gu),Vu&128&&X(Ru,"transform",$u[7])},i(Nu){Fu||(z(Ou.$$.fragment,Nu),Fu=!0)},o(Nu){H(Ou.$$.fragment,Nu),Fu=!1},d(Nu){Nu&&Q(Ru),oe(Ou),$u[10](null)}}}function $a(_u){let $u,Ru,Ou;return Ru=new gv({props:{direction:_u[6],visible:_u[0],inDelay:600,duration:1e3}}),{c(){$u=G("div"),re(Ru.$$.fragment),P($u,"class","arrow svelte-1fuzm7v")},m(Fu,Nu){F(Fu,$u,Nu),se(Ru,$u,null),Ou=!0},p(Fu,Nu){const Vu={};Nu&64&&(Vu.direction=Fu[6]),Nu&1&&(Vu.visible=Fu[0]),Ru.$set(Vu)},i(Fu){Ou||(z(Ru.$$.fragment,Fu),Ou=!0)},o(Fu){H(Ru.$$.fragment,Fu),Ou=!1},d(Fu){Fu&&Q($u),oe(Ru)}}}function bv(_u){let $u=[],Ru=new Map,Ou,Fu,Nu,Vu=_u[1];const Gu=Hu=>Hu[11];for(let Hu=0;Hu<Vu.length;Hu+=1){let Wu=qa(_u,Vu,Hu),Qu=Gu(Wu);Ru.set(Qu,$u[Hu]=Ka(Qu,Wu))}let Uu=_u[3]<_u[4]&&$a(_u);return{c(){for(let Hu=0;Hu<$u.length;Hu+=1)$u[Hu].c();Ou=q(),Uu&&Uu.c(),Fu=Pe()},m(Hu,Wu){for(let Qu=0;Qu<$u.length;Qu+=1)$u[Qu].m(Hu,Wu);F(Hu,Ou,Wu),Uu&&Uu.m(Hu,Wu),F(Hu,Fu,Wu),Nu=!0},p(Hu,[Wu]){Wu&167&&(Vu=Hu[1],ve(),$u=gt($u,Wu,Gu,1,Hu,Vu,Ru,Ou.parentNode,Wt,Ka,Ou,qa),Ae()),Hu[3]<Hu[4]?Uu?(Uu.p(Hu,Wu),Wu&24&&z(Uu,1)):(Uu=$a(Hu),Uu.c(),z(Uu,1),Uu.m(Fu.parentNode,Fu)):Uu&&(ve(),H(Uu,1,1,()=>{Uu=null}),Ae())},i(Hu){if(!Nu){for(let Wu=0;Wu<Vu.length;Wu+=1)z($u[Wu]);z(Uu),Nu=!0}},o(Hu){for(let Wu=0;Wu<$u.length;Wu+=1)H($u[Wu]);H(Uu),Nu=!1},d(Hu){for(let Wu=0;Wu<$u.length;Wu+=1)$u[Wu].d(Hu);Hu&&Q(Ou),Uu&&Uu.d(Hu),Hu&&Q(Fu)}}}function yv(_u,$u,Ru){let Ou,Fu,Nu,{visible:Vu=!1}=$u,{textUnfolded:Gu=!1}=$u,{textItems:Uu}=$u,Hu,Wu=0,Qu=0,qu=0;function Ku(Yu){Xe[Yu?"unshift":"push"](()=>{Hu=Yu,Ru(2,Hu)})}return _u.$$set=Yu=>{"visible"in Yu&&Ru(0,Vu=Yu.visible),"textUnfolded"in Yu&&Ru(8,Gu=Yu.textUnfolded),"textItems"in Yu&&Ru(1,Uu=Yu.textItems)},_u.$$.update=()=>{if(_u.$$.dirty&5&&Hu&&Vu){const{lineHeight:Yu}=getComputedStyle(Hu);Ru(4,qu=Hu.offsetHeight),vv(()=>Hu==null?void 0:Hu.offsetHeight,Boolean).then(()=>{Ru(4,qu=Hu.offsetHeight)}),Ru(3,Qu=Number(Yu.replace("px","")))}_u.$$.dirty&280&&Ru(9,Wu=Gu?Qu-qu:0),_u.$$.dirty&512&&Ru(7,Ou=`translateY(${Wu}px)`),_u.$$.dirty&256&&Ru(6,Fu=Gu?"left":"right"),_u.$$.dirty&256&&Ru(5,Nu=Gu?450:0)},[Vu,Uu,Hu,Qu,qu,Nu,Fu,Ou,Gu,Wu,Ku]}class Pu extends fe{constructor($u){super(),de(this,$u,yv,bv,ue,{visible:0,textUnfolded:8,textItems:1},Av)}}function wv(_u){me(_u,"svelte-18yy5x8",".line.svelte-18yy5x8{position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-18yy5x8{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function el(_u){var $u,Ru;let Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku;return Ou=new vt({props:{visible:_u[2],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Vu=new ou({props:{unfolded:_u[2],duration:1e3,outDelay:_u[5]+40*Math.min((Ru=($u=_u[4][0])==null?void 0:$u.content.length)!=null?Ru:10,15)}}),Hu=new Pu({props:{visible:_u[2],textUnfolded:_u[1],textItems:_u[4]}}),{c(){re(Ou.$$.fragment),Fu=q(),Nu=G("div"),re(Vu.$$.fragment),Gu=q(),Uu=G("div"),re(Hu.$$.fragment),P(Nu,"class","line svelte-18yy5x8"),X(Nu,"width",_u[3]+"px"),P(Uu,"class","content svelte-18yy5x8"),Oe(()=>_u[9].call(Uu))},m(Yu,_c){se(Ou,Yu,_c),F(Yu,Fu,_c),F(Yu,Nu,_c),se(Vu,Nu,null),F(Yu,Gu,_c),F(Yu,Uu,_c),se(Hu,Uu,null),Wu=en(Uu,_u[9].bind(Uu)),Qu=!0,qu||(Ku=je(Uu,"click",_u[6]),qu=!0)},p(Yu,_c){var Ju,Xu;const Zu={};_c&4&&(Zu.visible=Yu[2]),_c&8&&(Zu.left=Yu[3]/2+"px"),Ou.$set(Zu);const Xc={};_c&4&&(Xc.unfolded=Yu[2]),_c&48&&(Xc.outDelay=Yu[5]+40*Math.min((Xu=(Ju=Yu[4][0])==null?void 0:Ju.content.length)!=null?Xu:10,15)),Vu.$set(Xc),_c&8&&X(Nu,"width",Yu[3]+"px");const _h={};_c&4&&(_h.visible=Yu[2]),_c&2&&(_h.textUnfolded=Yu[1]),_c&16&&(_h.textItems=Yu[4]),Hu.$set(_h)},i(Yu){Qu||(z(Ou.$$.fragment,Yu),z(Vu.$$.fragment,Yu),z(Hu.$$.fragment,Yu),Qu=!0)},o(Yu){H(Ou.$$.fragment,Yu),H(Vu.$$.fragment,Yu),H(Hu.$$.fragment,Yu),Qu=!1},d(Yu){oe(Ou,Yu),Yu&&Q(Fu),Yu&&Q(Nu),oe(Vu),Yu&&Q(Gu),Yu&&Q(Uu),oe(Hu),Wu(),qu=!1,Ku()}}}function Ev(_u){let $u,Ru,Ou=_u[0].state&&el(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[0].state?Ou?(Ou.p(Fu,Nu),Nu&1&&z(Ou,1)):(Ou=el(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function Cv(_u,$u,Ru){let Ou,Fu,Nu;var Vu;let{tag:Gu}=$u,Uu,Hu=!1,Wu=[];function Qu(){Ru(1,Hu=!Hu)}function qu(){Uu=this.clientWidth,Ru(3,Uu)}return _u.$$set=Ku=>{"tag"in Ku&&Ru(0,Gu=Ku.tag)},_u.$$.update=()=>{_u.$$.dirty&129&&Ru(2,Ou=!!(!(Ru(7,Vu=Gu.state)===null||Vu===void 0)&&Vu.unfolded)),_u.$$.dirty&1&&Ru(8,Fu=Gu.data.text),_u.$$.dirty&256&&Ru(4,Wu=[{id:it(),content:Fu}]),_u.$$.dirty&4&&(Ou||setTimeout(()=>{Ru(1,Hu=!1)},20)),_u.$$.dirty&2&&Ru(5,Nu=Hu?450:0)},[Gu,Hu,Ou,Uu,Wu,Nu,Qu,Vu,Fu,qu]}class Pv extends fe{constructor($u){super(),de(this,$u,Cv,Ev,ue,{tag:0},wv)}}function Iv(_u){me(_u,"svelte-e72ouh",".line.svelte-e72ouh{width:100%;height:100%;overflow:visible}")}function tl(_u){let $u,Ru,Ou,Fu;return{c(){$u=Se("path"),P($u,"fill","none"),P($u,"stroke","url(#"+_u[4]+")"),P($u,"stroke-width","1"),P($u,"d","M0 21 L14 0.5 L105 0.5")},m(Nu,Vu){F(Nu,$u,Vu),Fu=!0},p(Nu,Vu){_u=Nu},i(Nu){Fu||(Nu&&Oe(()=>{Ou&&Ou.end(1),Ru=bn($u,ts,{duration:_u[1],delay:_u[0],easing:Ic}),Ru.start()}),Fu=!0)},o(Nu){Ru&&Ru.invalidate(),Nu&&(Ou=jn($u,ts,{duration:_u[1],delay:_u[2],easing:Mn})),Fu=!1},d(Nu){Nu&&Q($u),Nu&&Ou&&Ou.end()}}}function xv(_u){let $u,Ru,Ou,Fu,Nu,Vu=_u[3]&&tl(_u);return{c(){$u=Se("svg"),Ru=Se("defs"),Ou=Se("linearGradient"),Fu=Se("stop"),Nu=Se("stop"),Vu&&Vu.c(),P(Fu,"offset","25%"),P(Fu,"stop-color","white"),P(Fu,"stop-opacity","1"),P(Nu,"offset","100%"),P(Nu,"stop-color","white"),P(Nu,"stop-opacity","0.5"),P(Ou,"id",_u[4]),P(Ou,"gradientUnits","userSpaceOnUse"),P($u,"class","line svelte-e72ouh"),P($u,"viewBox","0 0 105 21")},m(Gu,Uu){F(Gu,$u,Uu),W($u,Ru),W(Ru,Ou),W(Ou,Fu),W(Ou,Nu),Vu&&Vu.m($u,null)},p(Gu,[Uu]){Gu[3]?Vu?(Vu.p(Gu,Uu),Uu&8&&z(Vu,1)):(Vu=tl(Gu),Vu.c(),z(Vu,1),Vu.m($u,null)):Vu&&(ve(),H(Vu,1,1,()=>{Vu=null}),Ae())},i(Gu){z(Vu)},o(Gu){H(Vu)},d(Gu){Gu&&Q($u),Vu&&Vu.d()}}}function Sv(_u,$u,Ru){let{inDelay:Ou=0}=$u,{duration:Fu=0}=$u,{outDelay:Nu=0}=$u,{unfolded:Vu}=$u;const Gu=it();return _u.$$set=Uu=>{"inDelay"in Uu&&Ru(0,Ou=Uu.inDelay),"duration"in Uu&&Ru(1,Fu=Uu.duration),"outDelay"in Uu&&Ru(2,Nu=Uu.outDelay),"unfolded"in Uu&&Ru(3,Vu=Uu.unfolded)},[Ou,Fu,Nu,Vu,Gu]}class kv extends fe{constructor($u){super(),de(this,$u,Sv,xv,ue,{inDelay:0,duration:1,outDelay:2,unfolded:3},Iv)}}function nl(_u){return _u!==null&&typeof _u=="object"&&"constructor"in _u&&_u.constructor===Object}function Zo(_u={},$u={}){Object.keys($u).forEach(Ru=>{typeof _u[Ru]>"u"?_u[Ru]=$u[Ru]:nl($u[Ru])&&nl(_u[Ru])&&Object.keys($u[Ru]).length>0&&Zo(_u[Ru],$u[Ru])})}const Iu={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ze(){const _u=typeof document<"u"?document:{};return Zo(_u,Iu),_u}const Tv={document:Iu,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_u){return typeof setTimeout>"u"?(_u(),null):setTimeout(_u,0)},cancelAnimationFrame(_u){typeof setTimeout>"u"||clearTimeout(_u)}};function Ge(){const _u=typeof window<"u"?window:{};return Zo(_u,Tv),_u}function Dv(_u){const $u=_u.__proto__;Object.defineProperty(_u,"__proto__",{get(){return $u},set(Ru){$u.__proto__=Ru}})}class Zt extends Array{constructor($u){typeof $u=="number"?super($u):(super(...$u||[]),Dv(this))}}function li(_u=[]){const $u=[];return _u.forEach(Ru=>{Array.isArray(Ru)?$u.push(...li(Ru)):$u.push(Ru)}),$u}function xu(_u,$u){return Array.prototype.filter.call(_u,$u)}function Lv(_u){const $u=[];for(let Ru=0;Ru<_u.length;Ru+=1)$u.indexOf(_u[Ru])===-1&&$u.push(_u[Ru]);return $u}function Mv(_u,$u){if(typeof _u!="string")return[_u];const Ru=[],Ou=$u.querySelectorAll(_u);for(let Fu=0;Fu<Ou.length;Fu+=1)Ru.push(Ou[Fu]);return Ru}function ae(_u,$u){const Ru=Ge(),Ou=Ze();let Fu=[];if(!$u&&_u instanceof Zt)return _u;if(!_u)return new Zt(Fu);if(typeof _u=="string"){const Nu=_u.trim();if(Nu.indexOf("<")>=0&&Nu.indexOf(">")>=0){let Vu="div";Nu.indexOf("<li")===0&&(Vu="ul"),Nu.indexOf("<tr")===0&&(Vu="tbody"),(Nu.indexOf("<td")===0||Nu.indexOf("<th")===0)&&(Vu="tr"),Nu.indexOf("<tbody")===0&&(Vu="table"),Nu.indexOf("<option")===0&&(Vu="select");const Gu=Ou.createElement(Vu);Gu.innerHTML=Nu;for(let Uu=0;Uu<Gu.childNodes.length;Uu+=1)Fu.push(Gu.childNodes[Uu])}else Fu=Mv(_u.trim(),$u||Ou)}else if(_u.nodeType||_u===Ru||_u===Ou)Fu.push(_u);else if(Array.isArray(_u)){if(_u instanceof Zt)return _u;Fu=_u}return new Zt(Lv(Fu))}ae.fn=Zt.prototype;function zv(..._u){const $u=li(_u.map(Ru=>Ru.split(" ")));return this.forEach(Ru=>{Ru.classList.add(...$u)}),this}function jv(..._u){const $u=li(_u.map(Ru=>Ru.split(" ")));return this.forEach(Ru=>{Ru.classList.remove(...$u)}),this}function Bv(..._u){const $u=li(_u.map(Ru=>Ru.split(" ")));this.forEach(Ru=>{$u.forEach(Ou=>{Ru.classList.toggle(Ou)})})}function Ov(..._u){const $u=li(_u.map(Ru=>Ru.split(" ")));return xu(this,Ru=>$u.filter(Ou=>Ru.classList.contains(Ou)).length>0).length>0}function Rv(_u,$u){if(arguments.length===1&&typeof _u=="string")return this[0]?this[0].getAttribute(_u):void 0;for(let Ru=0;Ru<this.length;Ru+=1)if(arguments.length===2)this[Ru].setAttribute(_u,$u);else for(const Ou in _u)this[Ru][Ou]=_u[Ou],this[Ru].setAttribute(Ou,_u[Ou]);return this}function Qv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].removeAttribute(_u);return this}function Hv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transform=_u;return this}function Fv(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transitionDuration=typeof _u!="string"?`${_u}ms`:_u;return this}function Nv(..._u){let[$u,Ru,Ou,Fu]=_u;typeof _u[1]=="function"&&([$u,Ou,Fu]=_u,Ru=void 0),Fu||(Fu=!1);function Nu(Hu){const Wu=Hu.target;if(!Wu)return;const Qu=Hu.target.dom7EventData||[];if(Qu.indexOf(Hu)<0&&Qu.unshift(Hu),ae(Wu).is(Ru))Ou.apply(Wu,Qu);else{const qu=ae(Wu).parents();for(let Ku=0;Ku<qu.length;Ku+=1)ae(qu[Ku]).is(Ru)&&Ou.apply(qu[Ku],Qu)}}function Vu(Hu){const Wu=Hu&&Hu.target?Hu.target.dom7EventData||[]:[];Wu.indexOf(Hu)<0&&Wu.unshift(Hu),Ou.apply(this,Wu)}const Gu=$u.split(" ");let Uu;for(let Hu=0;Hu<this.length;Hu+=1){const Wu=this[Hu];if(Ru)for(Uu=0;Uu<Gu.length;Uu+=1){const Qu=Gu[Uu];Wu.dom7LiveListeners||(Wu.dom7LiveListeners={}),Wu.dom7LiveListeners[Qu]||(Wu.dom7LiveListeners[Qu]=[]),Wu.dom7LiveListeners[Qu].push({listener:Ou,proxyListener:Nu}),Wu.addEventListener(Qu,Nu,Fu)}else for(Uu=0;Uu<Gu.length;Uu+=1){const Qu=Gu[Uu];Wu.dom7Listeners||(Wu.dom7Listeners={}),Wu.dom7Listeners[Qu]||(Wu.dom7Listeners[Qu]=[]),Wu.dom7Listeners[Qu].push({listener:Ou,proxyListener:Vu}),Wu.addEventListener(Qu,Vu,Fu)}}return this}function Gv(..._u){let[$u,Ru,Ou,Fu]=_u;typeof _u[1]=="function"&&([$u,Ou,Fu]=_u,Ru=void 0),Fu||(Fu=!1);const Nu=$u.split(" ");for(let Vu=0;Vu<Nu.length;Vu+=1){const Gu=Nu[Vu];for(let Uu=0;Uu<this.length;Uu+=1){const Hu=this[Uu];let Wu;if(!Ru&&Hu.dom7Listeners?Wu=Hu.dom7Listeners[Gu]:Ru&&Hu.dom7LiveListeners&&(Wu=Hu.dom7LiveListeners[Gu]),Wu&&Wu.length)for(let Qu=Wu.length-1;Qu>=0;Qu-=1){const qu=Wu[Qu];Ou&&qu.listener===Ou||Ou&&qu.listener&&qu.listener.dom7proxy&&qu.listener.dom7proxy===Ou?(Hu.removeEventListener(Gu,qu.proxyListener,Fu),Wu.splice(Qu,1)):Ou||(Hu.removeEventListener(Gu,qu.proxyListener,Fu),Wu.splice(Qu,1))}}}return this}function Wv(..._u){const $u=Ge(),Ru=_u[0].split(" "),Ou=_u[1];for(let Fu=0;Fu<Ru.length;Fu+=1){const Nu=Ru[Fu];for(let Vu=0;Vu<this.length;Vu+=1){const Gu=this[Vu];if($u.CustomEvent){const Uu=new $u.CustomEvent(Nu,{detail:Ou,bubbles:!0,cancelable:!0});Gu.dom7EventData=_u.filter((Hu,Wu)=>Wu>0),Gu.dispatchEvent(Uu),Gu.dom7EventData=[],delete Gu.dom7EventData}}}return this}function Xv(_u){const $u=this;function Ru(Ou){Ou.target===this&&(_u.call(this,Ou),$u.off("transitionend",Ru))}return _u&&$u.on("transitionend",Ru),this}function Yv(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetWidth+parseFloat($u.getPropertyValue("margin-right"))+parseFloat($u.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function _v(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetHeight+parseFloat($u.getPropertyValue("margin-top"))+parseFloat($u.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function Uv(){if(this.length>0){const _u=Ge(),$u=Ze(),Ru=this[0],Ou=Ru.getBoundingClientRect(),Fu=$u.body,Nu=Ru.clientTop||Fu.clientTop||0,Vu=Ru.clientLeft||Fu.clientLeft||0,Gu=Ru===_u?_u.scrollY:Ru.scrollTop,Uu=Ru===_u?_u.scrollX:Ru.scrollLeft;return{top:Ou.top+Gu-Nu,left:Ou.left+Uu-Vu}}return null}function Vv(){const _u=Ge();return this[0]?_u.getComputedStyle(this[0],null):{}}function Jv(_u,$u){const Ru=Ge();let Ou;if(arguments.length===1)if(typeof _u=="string"){if(this[0])return Ru.getComputedStyle(this[0],null).getPropertyValue(_u)}else{for(Ou=0;Ou<this.length;Ou+=1)for(const Fu in _u)this[Ou].style[Fu]=_u[Fu];return this}if(arguments.length===2&&typeof _u=="string"){for(Ou=0;Ou<this.length;Ou+=1)this[Ou].style[_u]=$u;return this}return this}function Zv(_u){return _u?(this.forEach(($u,Ru)=>{_u.apply($u,[$u,Ru])}),this):this}function qv(_u){const $u=xu(this,_u);return ae($u)}function Kv(_u){if(typeof _u>"u")return this[0]?this[0].innerHTML:null;for(let $u=0;$u<this.length;$u+=1)this[$u].innerHTML=_u;return this}function $v(_u){if(typeof _u>"u")return this[0]?this[0].textContent.trim():null;for(let $u=0;$u<this.length;$u+=1)this[$u].textContent=_u;return this}function eA(_u){const $u=Ge(),Ru=Ze(),Ou=this[0];let Fu,Nu;if(!Ou||typeof _u>"u")return!1;if(typeof _u=="string"){if(Ou.matches)return Ou.matches(_u);if(Ou.webkitMatchesSelector)return Ou.webkitMatchesSelector(_u);if(Ou.msMatchesSelector)return Ou.msMatchesSelector(_u);for(Fu=ae(_u),Nu=0;Nu<Fu.length;Nu+=1)if(Fu[Nu]===Ou)return!0;return!1}if(_u===Ru)return Ou===Ru;if(_u===$u)return Ou===$u;if(_u.nodeType||_u instanceof Zt){for(Fu=_u.nodeType?[_u]:_u,Nu=0;Nu<Fu.length;Nu+=1)if(Fu[Nu]===Ou)return!0;return!1}return!1}function tA(){let _u=this[0],$u;if(_u){for($u=0;(_u=_u.previousSibling)!==null;)_u.nodeType===1&&($u+=1);return $u}}function nA(_u){if(typeof _u>"u")return this;const $u=this.length;if(_u>$u-1)return ae([]);if(_u<0){const Ru=$u+_u;return Ru<0?ae([]):ae([this[Ru]])}return ae([this[_u]])}function iA(..._u){let $u;const Ru=Ze();for(let Ou=0;Ou<_u.length;Ou+=1){$u=_u[Ou];for(let Fu=0;Fu<this.length;Fu+=1)if(typeof $u=="string"){const Nu=Ru.createElement("div");for(Nu.innerHTML=$u;Nu.firstChild;)this[Fu].appendChild(Nu.firstChild)}else if($u instanceof Zt)for(let Nu=0;Nu<$u.length;Nu+=1)this[Fu].appendChild($u[Nu]);else this[Fu].appendChild($u)}return this}function sA(_u){const $u=Ze();let Ru,Ou;for(Ru=0;Ru<this.length;Ru+=1)if(typeof _u=="string"){const Fu=$u.createElement("div");for(Fu.innerHTML=_u,Ou=Fu.childNodes.length-1;Ou>=0;Ou-=1)this[Ru].insertBefore(Fu.childNodes[Ou],this[Ru].childNodes[0])}else if(_u instanceof Zt)for(Ou=0;Ou<_u.length;Ou+=1)this[Ru].insertBefore(_u[Ou],this[Ru].childNodes[0]);else this[Ru].insertBefore(_u,this[Ru].childNodes[0]);return this}function oA(_u){return this.length>0?_u?this[0].nextElementSibling&&ae(this[0].nextElementSibling).is(_u)?ae([this[0].nextElementSibling]):ae([]):this[0].nextElementSibling?ae([this[0].nextElementSibling]):ae([]):ae([])}function rA(_u){const $u=[];let Ru=this[0];if(!Ru)return ae([]);for(;Ru.nextElementSibling;){const Ou=Ru.nextElementSibling;_u?ae(Ou).is(_u)&&$u.push(Ou):$u.push(Ou),Ru=Ou}return ae($u)}function aA(_u){if(this.length>0){const $u=this[0];return _u?$u.previousElementSibling&&ae($u.previousElementSibling).is(_u)?ae([$u.previousElementSibling]):ae([]):$u.previousElementSibling?ae([$u.previousElementSibling]):ae([])}return ae([])}function lA(_u){const $u=[];let Ru=this[0];if(!Ru)return ae([]);for(;Ru.previousElementSibling;){const Ou=Ru.previousElementSibling;_u?ae(Ou).is(_u)&&$u.push(Ou):$u.push(Ou),Ru=Ou}return ae($u)}function cA(_u){const $u=[];for(let Ru=0;Ru<this.length;Ru+=1)this[Ru].parentNode!==null&&(_u?ae(this[Ru].parentNode).is(_u)&&$u.push(this[Ru].parentNode):$u.push(this[Ru].parentNode));return ae($u)}function uA(_u){const $u=[];for(let Ru=0;Ru<this.length;Ru+=1){let Ou=this[Ru].parentNode;for(;Ou;)_u?ae(Ou).is(_u)&&$u.push(Ou):$u.push(Ou),Ou=Ou.parentNode}return ae($u)}function dA(_u){let $u=this;return typeof _u>"u"?ae([]):($u.is(_u)||($u=$u.parents(_u).eq(0)),$u)}function fA(_u){const $u=[];for(let Ru=0;Ru<this.length;Ru+=1){const Ou=this[Ru].querySelectorAll(_u);for(let Fu=0;Fu<Ou.length;Fu+=1)$u.push(Ou[Fu])}return ae($u)}function hA(_u){const $u=[];for(let Ru=0;Ru<this.length;Ru+=1){const Ou=this[Ru].children;for(let Fu=0;Fu<Ou.length;Fu+=1)(!_u||ae(Ou[Fu]).is(_u))&&$u.push(Ou[Fu])}return ae($u)}function pA(){for(let _u=0;_u<this.length;_u+=1)this[_u].parentNode&&this[_u].parentNode.removeChild(this[_u]);return this}const il={addClass:zv,removeClass:jv,hasClass:Ov,toggleClass:Bv,attr:Rv,removeAttr:Qv,transform:Hv,transition:Fv,on:Nv,off:Gv,trigger:Wv,transitionEnd:Xv,outerWidth:Yv,outerHeight:_v,styles:Vv,offset:Uv,css:Jv,each:Zv,html:Kv,text:$v,is:eA,index:tA,eq:nA,append:iA,prepend:sA,next:oA,nextAll:rA,prev:aA,prevAll:lA,parent:cA,parents:uA,closest:dA,find:fA,children:hA,filter:qv,remove:pA};Object.keys(il).forEach(_u=>{Object.defineProperty(ae.fn,_u,{value:il[_u],writable:!0})});function mA(_u){const $u=_u;Object.keys($u).forEach(Ru=>{try{$u[Ru]=null}catch{}try{delete $u[Ru]}catch{}})}function rs(_u,$u=0){return setTimeout(_u,$u)}function ii(){return Date.now()}function gA(_u){const $u=Ge();let Ru;return $u.getComputedStyle&&(Ru=$u.getComputedStyle(_u,null)),!Ru&&_u.currentStyle&&(Ru=_u.currentStyle),Ru||(Ru=_u.style),Ru}function vA(_u,$u="x"){const Ru=Ge();let Ou,Fu,Nu;const Vu=gA(_u);return Ru.WebKitCSSMatrix?(Fu=Vu.transform||Vu.webkitTransform,Fu.split(",").length>6&&(Fu=Fu.split(", ").map(Gu=>Gu.replace(",",".")).join(", ")),Nu=new Ru.WebKitCSSMatrix(Fu==="none"?"":Fu)):(Nu=Vu.MozTransform||Vu.OTransform||Vu.MsTransform||Vu.msTransform||Vu.transform||Vu.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Ou=Nu.toString().split(",")),$u==="x"&&(Ru.WebKitCSSMatrix?Fu=Nu.m41:Ou.length===16?Fu=parseFloat(Ou[12]):Fu=parseFloat(Ou[4])),$u==="y"&&(Ru.WebKitCSSMatrix?Fu=Nu.m42:Ou.length===16?Fu=parseFloat(Ou[13]):Fu=parseFloat(Ou[5])),Fu||0}function Oi(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function AA(_u){return typeof window<"u"&&typeof window.HTMLElement<"u"?_u instanceof HTMLElement:_u&&(_u.nodeType===1||_u.nodeType===11)}function rt(..._u){const $u=Object(_u[0]),Ru=["__proto__","constructor","prototype"];for(let Ou=1;Ou<_u.length;Ou+=1){const Fu=_u[Ou];if(Fu!=null&&!AA(Fu)){const Nu=Object.keys(Object(Fu)).filter(Vu=>Ru.indexOf(Vu)<0);for(let Vu=0,Gu=Nu.length;Vu<Gu;Vu+=1){const Uu=Nu[Vu],Hu=Object.getOwnPropertyDescriptor(Fu,Uu);Hu!==void 0&&Hu.enumerable&&(Oi($u[Uu])&&Oi(Fu[Uu])?Fu[Uu].__swiper__?$u[Uu]=Fu[Uu]:rt($u[Uu],Fu[Uu]):!Oi($u[Uu])&&Oi(Fu[Uu])?($u[Uu]={},Fu[Uu].__swiper__?$u[Uu]=Fu[Uu]:rt($u[Uu],Fu[Uu])):$u[Uu]=Fu[Uu])}}}return $u}function Ri(_u,$u,Ru){_u.style.setProperty($u,Ru)}function Su({swiper:_u,targetPosition:$u,side:Ru}){const Ou=Ge(),Fu=-_u.translate;let Nu=null,Vu;const Gu=_u.params.speed;_u.wrapperEl.style.scrollSnapType="none",Ou.cancelAnimationFrame(_u.cssModeFrameID);const Uu=$u>Fu?"next":"prev",Hu=(Qu,qu)=>Uu==="next"&&Qu>=qu||Uu==="prev"&&Qu<=qu,Wu=()=>{Vu=new Date().getTime(),Nu===null&&(Nu=Vu);const Qu=Math.max(Math.min((Vu-Nu)/Gu,1),0),qu=.5-Math.cos(Qu*Math.PI)/2;let Ku=Fu+qu*($u-Fu);if(Hu(Ku,$u)&&(Ku=$u),_u.wrapperEl.scrollTo({[Ru]:Ku}),Hu(Ku,$u)){_u.wrapperEl.style.overflow="hidden",_u.wrapperEl.style.scrollSnapType="",setTimeout(()=>{_u.wrapperEl.style.overflow="",_u.wrapperEl.scrollTo({[Ru]:Ku})}),Ou.cancelAnimationFrame(_u.cssModeFrameID);return}_u.cssModeFrameID=Ou.requestAnimationFrame(Wu)};Wu()}let Xs;function bA(){const _u=Ge(),$u=Ze();return{smoothScroll:$u.documentElement&&"scrollBehavior"in $u.documentElement.style,touch:!!("ontouchstart"in _u||_u.DocumentTouch&&$u instanceof _u.DocumentTouch),passiveListener:function(){let Ru=!1;try{const Ou=Object.defineProperty({},"passive",{get(){Ru=!0}});_u.addEventListener("testPassiveListener",null,Ou)}catch{}return Ru}(),gestures:function(){return"ongesturestart"in _u}()}}function ku(){return Xs||(Xs=bA()),Xs}let Ys;function yA({userAgent:_u}={}){const $u=ku(),Ru=Ge(),Ou=Ru.navigator.platform,Fu=_u||Ru.navigator.userAgent,Nu={ios:!1,android:!1},Vu=Ru.screen.width,Gu=Ru.screen.height,Uu=Fu.match(/(Android);?[\s\/]+([\d.]+)?/);let Hu=Fu.match(/(iPad).*OS\s([\d_]+)/);const Wu=Fu.match(/(iPod)(.*OS\s([\d_]+))?/),Qu=!Hu&&Fu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),qu=Ou==="Win32";let Ku=Ou==="MacIntel";const Yu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!Hu&&Ku&&$u.touch&&Yu.indexOf(`${Vu}x${Gu}`)>=0&&(Hu=Fu.match(/(Version)\/([\d.]+)/),Hu||(Hu=[0,1,"13_0_0"]),Ku=!1),Uu&&!qu&&(Nu.os="android",Nu.android=!0),(Hu||Qu||Wu)&&(Nu.os="ios",Nu.ios=!0),Nu}function wA(_u={}){return Ys||(Ys=yA(_u)),Ys}let _s;function EA(){const _u=Ge();function $u(){const Ru=_u.navigator.userAgent.toLowerCase();return Ru.indexOf("safari")>=0&&Ru.indexOf("chrome")<0&&Ru.indexOf("android")<0}return{isSafari:$u(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_u.navigator.userAgent)}}function CA(){return _s||(_s=EA()),_s}function PA({swiper:_u,on:$u,emit:Ru}){const Ou=Ge();let Fu=null,Nu=null;const Vu=()=>{!_u||_u.destroyed||!_u.initialized||(Ru("beforeResize"),Ru("resize"))},Gu=()=>{!_u||_u.destroyed||!_u.initialized||(Fu=new ResizeObserver(Wu=>{Nu=Ou.requestAnimationFrame(()=>{const{width:Qu,height:qu}=_u;let Ku=Qu,Yu=qu;Wu.forEach(({contentBoxSize:_c,contentRect:Ju,target:Xu})=>{Xu&&Xu!==_u.el||(Ku=Ju?Ju.width:(_c[0]||_c).inlineSize,Yu=Ju?Ju.height:(_c[0]||_c).blockSize)}),(Ku!==Qu||Yu!==qu)&&Vu()})}),Fu.observe(_u.el))},Uu=()=>{Nu&&Ou.cancelAnimationFrame(Nu),Fu&&Fu.unobserve&&_u.el&&(Fu.unobserve(_u.el),Fu=null)},Hu=()=>{!_u||_u.destroyed||!_u.initialized||Ru("orientationchange")};$u("init",()=>{if(_u.params.resizeObserver&&typeof Ou.ResizeObserver<"u"){Gu();return}Ou.addEventListener("resize",Vu),Ou.addEventListener("orientationchange",Hu)}),$u("destroy",()=>{Uu(),Ou.removeEventListener("resize",Vu),Ou.removeEventListener("orientationchange",Hu)})}function IA({swiper:_u,extendParams:$u,on:Ru,emit:Ou}){const Fu=[],Nu=Ge(),Vu=(Hu,Wu={})=>{const Qu=Nu.MutationObserver||Nu.WebkitMutationObserver,qu=new Qu(Ku=>{if(Ku.length===1){Ou("observerUpdate",Ku[0]);return}const Yu=function(){Ou("observerUpdate",Ku[0])};Nu.requestAnimationFrame?Nu.requestAnimationFrame(Yu):Nu.setTimeout(Yu,0)});qu.observe(Hu,{attributes:typeof Wu.attributes>"u"?!0:Wu.attributes,childList:typeof Wu.childList>"u"?!0:Wu.childList,characterData:typeof Wu.characterData>"u"?!0:Wu.characterData}),Fu.push(qu)},Gu=()=>{if(_u.params.observer){if(_u.params.observeParents){const Hu=_u.$el.parents();for(let Wu=0;Wu<Hu.length;Wu+=1)Vu(Hu[Wu])}Vu(_u.$el[0],{childList:_u.params.observeSlideChildren}),Vu(_u.$wrapperEl[0],{attributes:!1})}},Uu=()=>{Fu.forEach(Hu=>{Hu.disconnect()}),Fu.splice(0,Fu.length)};$u({observer:!1,observeParents:!1,observeSlideChildren:!1}),Ru("init",Gu),Ru("destroy",Uu)}const xA={on(_u,$u,Ru){const Ou=this;if(!Ou.eventsListeners||Ou.destroyed||typeof $u!="function")return Ou;const Fu=Ru?"unshift":"push";return _u.split(" ").forEach(Nu=>{Ou.eventsListeners[Nu]||(Ou.eventsListeners[Nu]=[]),Ou.eventsListeners[Nu][Fu]($u)}),Ou},once(_u,$u,Ru){const Ou=this;if(!Ou.eventsListeners||Ou.destroyed||typeof $u!="function")return Ou;function Fu(...Nu){Ou.off(_u,Fu),Fu.__emitterProxy&&delete Fu.__emitterProxy,$u.apply(Ou,Nu)}return Fu.__emitterProxy=$u,Ou.on(_u,Fu,Ru)},onAny(_u,$u){const Ru=this;if(!Ru.eventsListeners||Ru.destroyed||typeof _u!="function")return Ru;const Ou=$u?"unshift":"push";return Ru.eventsAnyListeners.indexOf(_u)<0&&Ru.eventsAnyListeners[Ou](_u),Ru},offAny(_u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsAnyListeners)return $u;const Ru=$u.eventsAnyListeners.indexOf(_u);return Ru>=0&&$u.eventsAnyListeners.splice(Ru,1),$u},off(_u,$u){const Ru=this;return!Ru.eventsListeners||Ru.destroyed||!Ru.eventsListeners||_u.split(" ").forEach(Ou=>{typeof $u>"u"?Ru.eventsListeners[Ou]=[]:Ru.eventsListeners[Ou]&&Ru.eventsListeners[Ou].forEach((Fu,Nu)=>{(Fu===$u||Fu.__emitterProxy&&Fu.__emitterProxy===$u)&&Ru.eventsListeners[Ou].splice(Nu,1)})}),Ru},emit(..._u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsListeners)return $u;let Ru,Ou,Fu;return typeof _u[0]=="string"||Array.isArray(_u[0])?(Ru=_u[0],Ou=_u.slice(1,_u.length),Fu=$u):(Ru=_u[0].events,Ou=_u[0].data,Fu=_u[0].context||$u),Ou.unshift(Fu),(Array.isArray(Ru)?Ru:Ru.split(" ")).forEach(Nu=>{$u.eventsAnyListeners&&$u.eventsAnyListeners.length&&$u.eventsAnyListeners.forEach(Vu=>{Vu.apply(Fu,[Nu,...Ou])}),$u.eventsListeners&&$u.eventsListeners[Nu]&&$u.eventsListeners[Nu].forEach(Vu=>{Vu.apply(Fu,Ou)})}),$u}};function SA(){const _u=this;let $u,Ru;const Ou=_u.$el;typeof _u.params.width<"u"&&_u.params.width!==null?$u=_u.params.width:$u=Ou[0].clientWidth,typeof _u.params.height<"u"&&_u.params.height!==null?Ru=_u.params.height:Ru=Ou[0].clientHeight,!($u===0&&_u.isHorizontal()||Ru===0&&_u.isVertical())&&($u=$u-parseInt(Ou.css("padding-left")||0,10)-parseInt(Ou.css("padding-right")||0,10),Ru=Ru-parseInt(Ou.css("padding-top")||0,10)-parseInt(Ou.css("padding-bottom")||0,10),Number.isNaN($u)&&($u=0),Number.isNaN(Ru)&&(Ru=0),Object.assign(_u,{width:$u,height:Ru,size:_u.isHorizontal()?$u:Ru}))}function kA(){const _u=this;function $u(_f){return _u.isHorizontal()?_f:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[_f]}function Ru(_f,tp){return parseFloat(_f.getPropertyValue($u(tp))||0)}const Ou=_u.params,{$wrapperEl:Fu,size:Nu,rtlTranslate:Vu,wrongRTL:Gu}=_u,Uu=_u.virtual&&Ou.virtual.enabled,Hu=Uu?_u.virtual.slides.length:_u.slides.length,Wu=Fu.children(`.${_u.params.slideClass}`),Qu=Uu?_u.virtual.slides.length:Wu.length;let qu=[];const Ku=[],Yu=[];let _c=Ou.slidesOffsetBefore;typeof _c=="function"&&(_c=Ou.slidesOffsetBefore.call(_u));let Ju=Ou.slidesOffsetAfter;typeof Ju=="function"&&(Ju=Ou.slidesOffsetAfter.call(_u));const Xu=_u.snapGrid.length,Zu=_u.slidesGrid.length;let Xc=Ou.spaceBetween,_h=-_c,ep=0,np=0;if(typeof Nu>"u")return;typeof Xc=="string"&&Xc.indexOf("%")>=0&&(Xc=parseFloat(Xc.replace("%",""))/100*Nu),_u.virtualSize=-Xc,Vu?Wu.css({marginLeft:"",marginBottom:"",marginTop:""}):Wu.css({marginRight:"",marginBottom:"",marginTop:""}),Ou.centeredSlides&&Ou.cssMode&&(Ri(_u.wrapperEl,"--swiper-centered-offset-before",""),Ri(_u.wrapperEl,"--swiper-centered-offset-after",""));const ap=Ou.grid&&Ou.grid.rows>1&&_u.grid;ap&&_u.grid.initSlides(Qu);let lp;const up=Ou.slidesPerView==="auto"&&Ou.breakpoints&&Object.keys(Ou.breakpoints).filter(_f=>typeof Ou.breakpoints[_f].slidesPerView<"u").length>0;for(let _f=0;_f<Qu;_f+=1){lp=0;const tp=Wu.eq(_f);if(ap&&_u.grid.updateSlide(_f,tp,Qu,$u),tp.css("display")!=="none"){if(Ou.slidesPerView==="auto"){up&&(Wu[_f].style[$u("width")]="");const ip=getComputedStyle(tp[0]),rp=tp[0].style.transform,op=tp[0].style.webkitTransform;if(rp&&(tp[0].style.transform="none"),op&&(tp[0].style.webkitTransform="none"),Ou.roundLengths)lp=_u.isHorizontal()?tp.outerWidth(!0):tp.outerHeight(!0);else{const sp=Ru(ip,"width"),cp=Ru(ip,"padding-left"),hp=Ru(ip,"padding-right"),dp=Ru(ip,"margin-left"),xp=Ru(ip,"margin-right"),bp=ip.getPropertyValue("box-sizing");if(bp&&bp==="border-box")lp=sp+dp+xp;else{const{clientWidth:Rp,offsetWidth:Tp}=tp[0];lp=sp+cp+hp+dp+xp+(Tp-Rp)}}rp&&(tp[0].style.transform=rp),op&&(tp[0].style.webkitTransform=op),Ou.roundLengths&&(lp=Math.floor(lp))}else lp=(Nu-(Ou.slidesPerView-1)*Xc)/Ou.slidesPerView,Ou.roundLengths&&(lp=Math.floor(lp)),Wu[_f]&&(Wu[_f].style[$u("width")]=`${lp}px`);Wu[_f]&&(Wu[_f].swiperSlideSize=lp),Yu.push(lp),Ou.centeredSlides?(_h=_h+lp/2+ep/2+Xc,ep===0&&_f!==0&&(_h=_h-Nu/2-Xc),_f===0&&(_h=_h-Nu/2-Xc),Math.abs(_h)<1/1e3&&(_h=0),Ou.roundLengths&&(_h=Math.floor(_h)),np%Ou.slidesPerGroup===0&&qu.push(_h),Ku.push(_h)):(Ou.roundLengths&&(_h=Math.floor(_h)),(np-Math.min(_u.params.slidesPerGroupSkip,np))%_u.params.slidesPerGroup===0&&qu.push(_h),Ku.push(_h),_h=_h+lp+Xc),_u.virtualSize+=lp+Xc,ep=lp,np+=1}}if(_u.virtualSize=Math.max(_u.virtualSize,Nu)+Ju,Vu&&Gu&&(Ou.effect==="slide"||Ou.effect==="coverflow")&&Fu.css({width:`${_u.virtualSize+Ou.spaceBetween}px`}),Ou.setWrapperSize&&Fu.css({[$u("width")]:`${_u.virtualSize+Ou.spaceBetween}px`}),ap&&_u.grid.updateWrapperSize(lp,qu,$u),!Ou.centeredSlides){const _f=[];for(let tp=0;tp<qu.length;tp+=1){let ip=qu[tp];Ou.roundLengths&&(ip=Math.floor(ip)),qu[tp]<=_u.virtualSize-Nu&&_f.push(ip)}qu=_f,Math.floor(_u.virtualSize-Nu)-Math.floor(qu[qu.length-1])>1&&qu.push(_u.virtualSize-Nu)}if(qu.length===0&&(qu=[0]),Ou.spaceBetween!==0){const _f=_u.isHorizontal()&&Vu?"marginLeft":$u("marginRight");Wu.filter((tp,ip)=>Ou.cssMode?ip!==Wu.length-1:!0).css({[_f]:`${Xc}px`})}if(Ou.centeredSlides&&Ou.centeredSlidesBounds){let _f=0;Yu.forEach(ip=>{_f+=ip+(Ou.spaceBetween?Ou.spaceBetween:0)}),_f-=Ou.spaceBetween;const tp=_f-Nu;qu=qu.map(ip=>ip<0?-_c:ip>tp?tp+Ju:ip)}if(Ou.centerInsufficientSlides){let _f=0;if(Yu.forEach(tp=>{_f+=tp+(Ou.spaceBetween?Ou.spaceBetween:0)}),_f-=Ou.spaceBetween,_f<Nu){const tp=(Nu-_f)/2;qu.forEach((ip,rp)=>{qu[rp]=ip-tp}),Ku.forEach((ip,rp)=>{Ku[rp]=ip+tp})}}if(Object.assign(_u,{slides:Wu,snapGrid:qu,slidesGrid:Ku,slidesSizesGrid:Yu}),Ou.centeredSlides&&Ou.cssMode&&!Ou.centeredSlidesBounds){Ri(_u.wrapperEl,"--swiper-centered-offset-before",`${-qu[0]}px`),Ri(_u.wrapperEl,"--swiper-centered-offset-after",`${_u.size/2-Yu[Yu.length-1]/2}px`);const _f=-_u.snapGrid[0],tp=-_u.slidesGrid[0];_u.snapGrid=_u.snapGrid.map(ip=>ip+_f),_u.slidesGrid=_u.slidesGrid.map(ip=>ip+tp)}if(Qu!==Hu&&_u.emit("slidesLengthChange"),qu.length!==Xu&&(_u.params.watchOverflow&&_u.checkOverflow(),_u.emit("snapGridLengthChange")),Ku.length!==Zu&&_u.emit("slidesGridLengthChange"),Ou.watchSlidesProgress&&_u.updateSlidesOffset(),!Uu&&!Ou.cssMode&&(Ou.effect==="slide"||Ou.effect==="fade")){const _f=`${Ou.containerModifierClass}backface-hidden`,tp=_u.$el.hasClass(_f);Qu<=Ou.maxBackfaceHiddenSlides?tp||_u.$el.addClass(_f):tp&&_u.$el.removeClass(_f)}}function TA(_u){const $u=this,Ru=[],Ou=$u.virtual&&$u.params.virtual.enabled;let Fu=0,Nu;typeof _u=="number"?$u.setTransition(_u):_u===!0&&$u.setTransition($u.params.speed);const Vu=Gu=>Ou?$u.slides.filter(Uu=>parseInt(Uu.getAttribute("data-swiper-slide-index"),10)===Gu)[0]:$u.slides.eq(Gu)[0];if($u.params.slidesPerView!=="auto"&&$u.params.slidesPerView>1)if($u.params.centeredSlides)($u.visibleSlides||ae([])).each(Gu=>{Ru.push(Gu)});else for(Nu=0;Nu<Math.ceil($u.params.slidesPerView);Nu+=1){const Gu=$u.activeIndex+Nu;if(Gu>$u.slides.length&&!Ou)break;Ru.push(Vu(Gu))}else Ru.push(Vu($u.activeIndex));for(Nu=0;Nu<Ru.length;Nu+=1)if(typeof Ru[Nu]<"u"){const Gu=Ru[Nu].offsetHeight;Fu=Gu>Fu?Gu:Fu}(Fu||Fu===0)&&$u.$wrapperEl.css("height",`${Fu}px`)}function DA(){const _u=this,$u=_u.slides;for(let Ru=0;Ru<$u.length;Ru+=1)$u[Ru].swiperSlideOffset=_u.isHorizontal()?$u[Ru].offsetLeft:$u[Ru].offsetTop}function LA(_u=this&&this.translate||0){const $u=this,Ru=$u.params,{slides:Ou,rtlTranslate:Fu,snapGrid:Nu}=$u;if(Ou.length===0)return;typeof Ou[0].swiperSlideOffset>"u"&&$u.updateSlidesOffset();let Vu=-_u;Fu&&(Vu=_u),Ou.removeClass(Ru.slideVisibleClass),$u.visibleSlidesIndexes=[],$u.visibleSlides=[];for(let Gu=0;Gu<Ou.length;Gu+=1){const Uu=Ou[Gu];let Hu=Uu.swiperSlideOffset;Ru.cssMode&&Ru.centeredSlides&&(Hu-=Ou[0].swiperSlideOffset);const Wu=(Vu+(Ru.centeredSlides?$u.minTranslate():0)-Hu)/(Uu.swiperSlideSize+Ru.spaceBetween),Qu=(Vu-Nu[0]+(Ru.centeredSlides?$u.minTranslate():0)-Hu)/(Uu.swiperSlideSize+Ru.spaceBetween),qu=-(Vu-Hu),Ku=qu+$u.slidesSizesGrid[Gu];(qu>=0&&qu<$u.size-1||Ku>1&&Ku<=$u.size||qu<=0&&Ku>=$u.size)&&($u.visibleSlides.push(Uu),$u.visibleSlidesIndexes.push(Gu),Ou.eq(Gu).addClass(Ru.slideVisibleClass)),Uu.progress=Fu?-Wu:Wu,Uu.originalProgress=Fu?-Qu:Qu}$u.visibleSlides=ae($u.visibleSlides)}function MA(_u){const $u=this;if(typeof _u>"u"){const Hu=$u.rtlTranslate?-1:1;_u=$u&&$u.translate&&$u.translate*Hu||0}const Ru=$u.params,Ou=$u.maxTranslate()-$u.minTranslate();let{progress:Fu,isBeginning:Nu,isEnd:Vu}=$u;const Gu=Nu,Uu=Vu;Ou===0?(Fu=0,Nu=!0,Vu=!0):(Fu=(_u-$u.minTranslate())/Ou,Nu=Fu<=0,Vu=Fu>=1),Object.assign($u,{progress:Fu,isBeginning:Nu,isEnd:Vu}),(Ru.watchSlidesProgress||Ru.centeredSlides&&Ru.autoHeight)&&$u.updateSlidesProgress(_u),Nu&&!Gu&&$u.emit("reachBeginning toEdge"),Vu&&!Uu&&$u.emit("reachEnd toEdge"),(Gu&&!Nu||Uu&&!Vu)&&$u.emit("fromEdge"),$u.emit("progress",Fu)}function zA(){const _u=this,{slides:$u,params:Ru,$wrapperEl:Ou,activeIndex:Fu,realIndex:Nu}=_u,Vu=_u.virtual&&Ru.virtual.enabled;$u.removeClass(`${Ru.slideActiveClass} ${Ru.slideNextClass} ${Ru.slidePrevClass} ${Ru.slideDuplicateActiveClass} ${Ru.slideDuplicateNextClass} ${Ru.slideDuplicatePrevClass}`);let Gu;Vu?Gu=_u.$wrapperEl.find(`.${Ru.slideClass}[data-swiper-slide-index="${Fu}"]`):Gu=$u.eq(Fu),Gu.addClass(Ru.slideActiveClass),Ru.loop&&(Gu.hasClass(Ru.slideDuplicateClass)?Ou.children(`.${Ru.slideClass}:not(.${Ru.slideDuplicateClass})[data-swiper-slide-index="${Nu}"]`).addClass(Ru.slideDuplicateActiveClass):Ou.children(`.${Ru.slideClass}.${Ru.slideDuplicateClass}[data-swiper-slide-index="${Nu}"]`).addClass(Ru.slideDuplicateActiveClass));let Uu=Gu.nextAll(`.${Ru.slideClass}`).eq(0).addClass(Ru.slideNextClass);Ru.loop&&Uu.length===0&&(Uu=$u.eq(0),Uu.addClass(Ru.slideNextClass));let Hu=Gu.prevAll(`.${Ru.slideClass}`).eq(0).addClass(Ru.slidePrevClass);Ru.loop&&Hu.length===0&&(Hu=$u.eq(-1),Hu.addClass(Ru.slidePrevClass)),Ru.loop&&(Uu.hasClass(Ru.slideDuplicateClass)?Ou.children(`.${Ru.slideClass}:not(.${Ru.slideDuplicateClass})[data-swiper-slide-index="${Uu.attr("data-swiper-slide-index")}"]`).addClass(Ru.slideDuplicateNextClass):Ou.children(`.${Ru.slideClass}.${Ru.slideDuplicateClass}[data-swiper-slide-index="${Uu.attr("data-swiper-slide-index")}"]`).addClass(Ru.slideDuplicateNextClass),Hu.hasClass(Ru.slideDuplicateClass)?Ou.children(`.${Ru.slideClass}:not(.${Ru.slideDuplicateClass})[data-swiper-slide-index="${Hu.attr("data-swiper-slide-index")}"]`).addClass(Ru.slideDuplicatePrevClass):Ou.children(`.${Ru.slideClass}.${Ru.slideDuplicateClass}[data-swiper-slide-index="${Hu.attr("data-swiper-slide-index")}"]`).addClass(Ru.slideDuplicatePrevClass)),_u.emitSlidesClasses()}function jA(_u){const $u=this,Ru=$u.rtlTranslate?$u.translate:-$u.translate,{slidesGrid:Ou,snapGrid:Fu,params:Nu,activeIndex:Vu,realIndex:Gu,snapIndex:Uu}=$u;let Hu=_u,Wu;if(typeof Hu>"u"){for(let qu=0;qu<Ou.length;qu+=1)typeof Ou[qu+1]<"u"?Ru>=Ou[qu]&&Ru<Ou[qu+1]-(Ou[qu+1]-Ou[qu])/2?Hu=qu:Ru>=Ou[qu]&&Ru<Ou[qu+1]&&(Hu=qu+1):Ru>=Ou[qu]&&(Hu=qu);Nu.normalizeSlideIndex&&(Hu<0||typeof Hu>"u")&&(Hu=0)}if(Fu.indexOf(Ru)>=0)Wu=Fu.indexOf(Ru);else{const qu=Math.min(Nu.slidesPerGroupSkip,Hu);Wu=qu+Math.floor((Hu-qu)/Nu.slidesPerGroup)}if(Wu>=Fu.length&&(Wu=Fu.length-1),Hu===Vu){Wu!==Uu&&($u.snapIndex=Wu,$u.emit("snapIndexChange"));return}const Qu=parseInt($u.slides.eq(Hu).attr("data-swiper-slide-index")||Hu,10);Object.assign($u,{snapIndex:Wu,realIndex:Qu,previousIndex:Vu,activeIndex:Hu}),$u.emit("activeIndexChange"),$u.emit("snapIndexChange"),Gu!==Qu&&$u.emit("realIndexChange"),($u.initialized||$u.params.runCallbacksOnInit)&&$u.emit("slideChange")}function BA(_u){const $u=this,Ru=$u.params,Ou=ae(_u).closest(`.${Ru.slideClass}`)[0];let Fu=!1,Nu;if(Ou){for(let Vu=0;Vu<$u.slides.length;Vu+=1)if($u.slides[Vu]===Ou){Fu=!0,Nu=Vu;break}}if(Ou&&Fu)$u.clickedSlide=Ou,$u.virtual&&$u.params.virtual.enabled?$u.clickedIndex=parseInt(ae(Ou).attr("data-swiper-slide-index"),10):$u.clickedIndex=Nu;else{$u.clickedSlide=void 0,$u.clickedIndex=void 0;return}Ru.slideToClickedSlide&&$u.clickedIndex!==void 0&&$u.clickedIndex!==$u.activeIndex&&$u.slideToClickedSlide()}const OA={updateSize:SA,updateSlides:kA,updateAutoHeight:TA,updateSlidesOffset:DA,updateSlidesProgress:LA,updateProgress:MA,updateSlidesClasses:zA,updateActiveIndex:jA,updateClickedSlide:BA};function RA(_u=this.isHorizontal()?"x":"y"){const $u=this,{params:Ru,rtlTranslate:Ou,translate:Fu,$wrapperEl:Nu}=$u;if(Ru.virtualTranslate)return Ou?-Fu:Fu;if(Ru.cssMode)return Fu;let Vu=vA(Nu[0],_u);return Ou&&(Vu=-Vu),Vu||0}function QA(_u,$u){const Ru=this,{rtlTranslate:Ou,params:Fu,$wrapperEl:Nu,wrapperEl:Vu,progress:Gu}=Ru;let Uu=0,Hu=0;const Wu=0;Ru.isHorizontal()?Uu=Ou?-_u:_u:Hu=_u,Fu.roundLengths&&(Uu=Math.floor(Uu),Hu=Math.floor(Hu)),Fu.cssMode?Vu[Ru.isHorizontal()?"scrollLeft":"scrollTop"]=Ru.isHorizontal()?-Uu:-Hu:Fu.virtualTranslate||Nu.transform(`translate3d(${Uu}px, ${Hu}px, ${Wu}px)`),Ru.previousTranslate=Ru.translate,Ru.translate=Ru.isHorizontal()?Uu:Hu;let Qu;const qu=Ru.maxTranslate()-Ru.minTranslate();qu===0?Qu=0:Qu=(_u-Ru.minTranslate())/qu,Qu!==Gu&&Ru.updateProgress(_u),Ru.emit("setTranslate",Ru.translate,$u)}function HA(){return-this.snapGrid[0]}function FA(){return-this.snapGrid[this.snapGrid.length-1]}function NA(_u=0,$u=this.params.speed,Ru=!0,Ou=!0,Fu){const Nu=this,{params:Vu,wrapperEl:Gu}=Nu;if(Nu.animating&&Vu.preventInteractionOnTransition)return!1;const Uu=Nu.minTranslate(),Hu=Nu.maxTranslate();let Wu;if(Ou&&_u>Uu?Wu=Uu:Ou&&_u<Hu?Wu=Hu:Wu=_u,Nu.updateProgress(Wu),Vu.cssMode){const Qu=Nu.isHorizontal();if($u===0)Gu[Qu?"scrollLeft":"scrollTop"]=-Wu;else{if(!Nu.support.smoothScroll)return Su({swiper:Nu,targetPosition:-Wu,side:Qu?"left":"top"}),!0;Gu.scrollTo({[Qu?"left":"top"]:-Wu,behavior:"smooth"})}return!0}return $u===0?(Nu.setTransition(0),Nu.setTranslate(Wu),Ru&&(Nu.emit("beforeTransitionStart",$u,Fu),Nu.emit("transitionEnd"))):(Nu.setTransition($u),Nu.setTranslate(Wu),Ru&&(Nu.emit("beforeTransitionStart",$u,Fu),Nu.emit("transitionStart")),Nu.animating||(Nu.animating=!0,Nu.onTranslateToWrapperTransitionEnd||(Nu.onTranslateToWrapperTransitionEnd=function(Qu){!Nu||Nu.destroyed||Qu.target===this&&(Nu.$wrapperEl[0].removeEventListener("transitionend",Nu.onTranslateToWrapperTransitionEnd),Nu.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Nu.onTranslateToWrapperTransitionEnd),Nu.onTranslateToWrapperTransitionEnd=null,delete Nu.onTranslateToWrapperTransitionEnd,Ru&&Nu.emit("transitionEnd"))}),Nu.$wrapperEl[0].addEventListener("transitionend",Nu.onTranslateToWrapperTransitionEnd),Nu.$wrapperEl[0].addEventListener("webkitTransitionEnd",Nu.onTranslateToWrapperTransitionEnd))),!0}const GA={getTranslate:RA,setTranslate:QA,minTranslate:HA,maxTranslate:FA,translateTo:NA};function WA(_u,$u){const Ru=this;Ru.params.cssMode||Ru.$wrapperEl.transition(_u),Ru.emit("setTransition",_u,$u)}function Tu({swiper:_u,runCallbacks:$u,direction:Ru,step:Ou}){const{activeIndex:Fu,previousIndex:Nu}=_u;let Vu=Ru;if(Vu||(Fu>Nu?Vu="next":Fu<Nu?Vu="prev":Vu="reset"),_u.emit(`transition${Ou}`),$u&&Fu!==Nu){if(Vu==="reset"){_u.emit(`slideResetTransition${Ou}`);return}_u.emit(`slideChangeTransition${Ou}`),Vu==="next"?_u.emit(`slideNextTransition${Ou}`):_u.emit(`slidePrevTransition${Ou}`)}}function XA(_u=!0,$u){const Ru=this,{params:Ou}=Ru;Ou.cssMode||(Ou.autoHeight&&Ru.updateAutoHeight(),Tu({swiper:Ru,runCallbacks:_u,direction:$u,step:"Start"}))}function YA(_u=!0,$u){const Ru=this,{params:Ou}=Ru;Ru.animating=!1,!Ou.cssMode&&(Ru.setTransition(0),Tu({swiper:Ru,runCallbacks:_u,direction:$u,step:"End"}))}const _A={setTransition:WA,transitionStart:XA,transitionEnd:YA};function UA(_u=0,$u=this.params.speed,Ru=!0,Ou,Fu){if(typeof _u!="number"&&typeof _u!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof _u}] given.`);if(typeof _u=="string"){const Xc=parseInt(_u,10);if(!isFinite(Xc))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Xc}const Nu=this;let Vu=_u;Vu<0&&(Vu=0);const{params:Gu,snapGrid:Uu,slidesGrid:Hu,previousIndex:Wu,activeIndex:Qu,rtlTranslate:qu,wrapperEl:Ku,enabled:Yu}=Nu;if(Nu.animating&&Gu.preventInteractionOnTransition||!Yu&&!Ou&&!Fu)return!1;const _c=Math.min(Nu.params.slidesPerGroupSkip,Vu);let Ju=_c+Math.floor((Vu-_c)/Nu.params.slidesPerGroup);Ju>=Uu.length&&(Ju=Uu.length-1);const Xu=-Uu[Ju];if(Gu.normalizeSlideIndex)for(let Xc=0;Xc<Hu.length;Xc+=1){const _h=-Math.floor(Xu*100),ep=Math.floor(Hu[Xc]*100),np=Math.floor(Hu[Xc+1]*100);typeof Hu[Xc+1]<"u"?_h>=ep&&_h<np-(np-ep)/2?Vu=Xc:_h>=ep&&_h<np&&(Vu=Xc+1):_h>=ep&&(Vu=Xc)}if(Nu.initialized&&Vu!==Qu&&(!Nu.allowSlideNext&&Xu<Nu.translate&&Xu<Nu.minTranslate()||!Nu.allowSlidePrev&&Xu>Nu.translate&&Xu>Nu.maxTranslate()&&(Qu||0)!==Vu))return!1;Vu!==(Wu||0)&&Ru&&Nu.emit("beforeSlideChangeStart"),Nu.updateProgress(Xu);let Zu;if(Vu>Qu?Zu="next":Vu<Qu?Zu="prev":Zu="reset",qu&&-Xu===Nu.translate||!qu&&Xu===Nu.translate)return Nu.updateActiveIndex(Vu),Gu.autoHeight&&Nu.updateAutoHeight(),Nu.updateSlidesClasses(),Gu.effect!=="slide"&&Nu.setTranslate(Xu),Zu!=="reset"&&(Nu.transitionStart(Ru,Zu),Nu.transitionEnd(Ru,Zu)),!1;if(Gu.cssMode){const Xc=Nu.isHorizontal(),_h=qu?Xu:-Xu;if($u===0){const ep=Nu.virtual&&Nu.params.virtual.enabled;ep&&(Nu.wrapperEl.style.scrollSnapType="none",Nu._immediateVirtual=!0),Ku[Xc?"scrollLeft":"scrollTop"]=_h,ep&&requestAnimationFrame(()=>{Nu.wrapperEl.style.scrollSnapType="",Nu._swiperImmediateVirtual=!1})}else{if(!Nu.support.smoothScroll)return Su({swiper:Nu,targetPosition:_h,side:Xc?"left":"top"}),!0;Ku.scrollTo({[Xc?"left":"top"]:_h,behavior:"smooth"})}return!0}return Nu.setTransition($u),Nu.setTranslate(Xu),Nu.updateActiveIndex(Vu),Nu.updateSlidesClasses(),Nu.emit("beforeTransitionStart",$u,Ou),Nu.transitionStart(Ru,Zu),$u===0?Nu.transitionEnd(Ru,Zu):Nu.animating||(Nu.animating=!0,Nu.onSlideToWrapperTransitionEnd||(Nu.onSlideToWrapperTransitionEnd=function(Xc){!Nu||Nu.destroyed||Xc.target===this&&(Nu.$wrapperEl[0].removeEventListener("transitionend",Nu.onSlideToWrapperTransitionEnd),Nu.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Nu.onSlideToWrapperTransitionEnd),Nu.onSlideToWrapperTransitionEnd=null,delete Nu.onSlideToWrapperTransitionEnd,Nu.transitionEnd(Ru,Zu))}),Nu.$wrapperEl[0].addEventListener("transitionend",Nu.onSlideToWrapperTransitionEnd),Nu.$wrapperEl[0].addEventListener("webkitTransitionEnd",Nu.onSlideToWrapperTransitionEnd)),!0}function VA(_u=0,$u=this.params.speed,Ru=!0,Ou){if(typeof _u=="string"){const Vu=parseInt(_u,10);if(!isFinite(Vu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Vu}const Fu=this;let Nu=_u;return Fu.params.loop&&(Nu+=Fu.loopedSlides),Fu.slideTo(Nu,$u,Ru,Ou)}function JA(_u=this.params.speed,$u=!0,Ru){const Ou=this,{animating:Fu,enabled:Nu,params:Vu}=Ou;if(!Nu)return Ou;let Gu=Vu.slidesPerGroup;Vu.slidesPerView==="auto"&&Vu.slidesPerGroup===1&&Vu.slidesPerGroupAuto&&(Gu=Math.max(Ou.slidesPerViewDynamic("current",!0),1));const Uu=Ou.activeIndex<Vu.slidesPerGroupSkip?1:Gu;if(Vu.loop){if(Fu&&Vu.loopPreventsSlide)return!1;Ou.loopFix(),Ou._clientLeft=Ou.$wrapperEl[0].clientLeft}return Vu.rewind&&Ou.isEnd?Ou.slideTo(0,_u,$u,Ru):Ou.slideTo(Ou.activeIndex+Uu,_u,$u,Ru)}function ZA(_u=this.params.speed,$u=!0,Ru){const Ou=this,{params:Fu,animating:Nu,snapGrid:Vu,slidesGrid:Gu,rtlTranslate:Uu,enabled:Hu}=Ou;if(!Hu)return Ou;if(Fu.loop){if(Nu&&Fu.loopPreventsSlide)return!1;Ou.loopFix(),Ou._clientLeft=Ou.$wrapperEl[0].clientLeft}const Wu=Uu?Ou.translate:-Ou.translate;function Qu(Ju){return Ju<0?-Math.floor(Math.abs(Ju)):Math.floor(Ju)}const qu=Qu(Wu),Ku=Vu.map(Ju=>Qu(Ju));let Yu=Vu[Ku.indexOf(qu)-1];if(typeof Yu>"u"&&Fu.cssMode){let Ju;Vu.forEach((Xu,Zu)=>{qu>=Xu&&(Ju=Zu)}),typeof Ju<"u"&&(Yu=Vu[Ju>0?Ju-1:Ju])}let _c=0;if(typeof Yu<"u"&&(_c=Gu.indexOf(Yu),_c<0&&(_c=Ou.activeIndex-1),Fu.slidesPerView==="auto"&&Fu.slidesPerGroup===1&&Fu.slidesPerGroupAuto&&(_c=_c-Ou.slidesPerViewDynamic("previous",!0)+1,_c=Math.max(_c,0))),Fu.rewind&&Ou.isBeginning){const Ju=Ou.params.virtual&&Ou.params.virtual.enabled&&Ou.virtual?Ou.virtual.slides.length-1:Ou.slides.length-1;return Ou.slideTo(Ju,_u,$u,Ru)}return Ou.slideTo(_c,_u,$u,Ru)}function qA(_u=this.params.speed,$u=!0,Ru){const Ou=this;return Ou.slideTo(Ou.activeIndex,_u,$u,Ru)}function KA(_u=this.params.speed,$u=!0,Ru,Ou=.5){const Fu=this;let Nu=Fu.activeIndex;const Vu=Math.min(Fu.params.slidesPerGroupSkip,Nu),Gu=Vu+Math.floor((Nu-Vu)/Fu.params.slidesPerGroup),Uu=Fu.rtlTranslate?Fu.translate:-Fu.translate;if(Uu>=Fu.snapGrid[Gu]){const Hu=Fu.snapGrid[Gu],Wu=Fu.snapGrid[Gu+1];Uu-Hu>(Wu-Hu)*Ou&&(Nu+=Fu.params.slidesPerGroup)}else{const Hu=Fu.snapGrid[Gu-1],Wu=Fu.snapGrid[Gu];Uu-Hu<=(Wu-Hu)*Ou&&(Nu-=Fu.params.slidesPerGroup)}return Nu=Math.max(Nu,0),Nu=Math.min(Nu,Fu.slidesGrid.length-1),Fu.slideTo(Nu,_u,$u,Ru)}function $A(){const _u=this,{params:$u,$wrapperEl:Ru}=_u,Ou=$u.slidesPerView==="auto"?_u.slidesPerViewDynamic():$u.slidesPerView;let Fu=_u.clickedIndex,Nu;if($u.loop){if(_u.animating)return;Nu=parseInt(ae(_u.clickedSlide).attr("data-swiper-slide-index"),10),$u.centeredSlides?Fu<_u.loopedSlides-Ou/2||Fu>_u.slides.length-_u.loopedSlides+Ou/2?(_u.loopFix(),Fu=Ru.children(`.${$u.slideClass}[data-swiper-slide-index="${Nu}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),rs(()=>{_u.slideTo(Fu)})):_u.slideTo(Fu):Fu>_u.slides.length-Ou?(_u.loopFix(),Fu=Ru.children(`.${$u.slideClass}[data-swiper-slide-index="${Nu}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),rs(()=>{_u.slideTo(Fu)})):_u.slideTo(Fu)}else _u.slideTo(Fu)}const e1={slideTo:UA,slideToLoop:VA,slideNext:JA,slidePrev:ZA,slideReset:qA,slideToClosest:KA,slideToClickedSlide:$A};function t1(){const _u=this,$u=Ze(),{params:Ru,$wrapperEl:Ou}=_u,Fu=Ou.children().length>0?ae(Ou.children()[0].parentNode):Ou;Fu.children(`.${Ru.slideClass}.${Ru.slideDuplicateClass}`).remove();let Nu=Fu.children(`.${Ru.slideClass}`);if(Ru.loopFillGroupWithBlank){const Uu=Ru.slidesPerGroup-Nu.length%Ru.slidesPerGroup;if(Uu!==Ru.slidesPerGroup){for(let Hu=0;Hu<Uu;Hu+=1){const Wu=ae($u.createElement("div")).addClass(`${Ru.slideClass} ${Ru.slideBlankClass}`);Fu.append(Wu)}Nu=Fu.children(`.${Ru.slideClass}`)}}Ru.slidesPerView==="auto"&&!Ru.loopedSlides&&(Ru.loopedSlides=Nu.length),_u.loopedSlides=Math.ceil(parseFloat(Ru.loopedSlides||Ru.slidesPerView,10)),_u.loopedSlides+=Ru.loopAdditionalSlides,_u.loopedSlides>Nu.length&&_u.params.loopedSlidesLimit&&(_u.loopedSlides=Nu.length);const Vu=[],Gu=[];Nu.each((Uu,Hu)=>{ae(Uu).attr("data-swiper-slide-index",Hu)});for(let Uu=0;Uu<_u.loopedSlides;Uu+=1){const Hu=Uu-Math.floor(Uu/Nu.length)*Nu.length;Gu.push(Nu.eq(Hu)[0]),Vu.unshift(Nu.eq(Nu.length-Hu-1)[0])}for(let Uu=0;Uu<Gu.length;Uu+=1)Fu.append(ae(Gu[Uu].cloneNode(!0)).addClass(Ru.slideDuplicateClass));for(let Uu=Vu.length-1;Uu>=0;Uu-=1)Fu.prepend(ae(Vu[Uu].cloneNode(!0)).addClass(Ru.slideDuplicateClass))}function n1(){const _u=this;_u.emit("beforeLoopFix");const{activeIndex:$u,slides:Ru,loopedSlides:Ou,allowSlidePrev:Fu,allowSlideNext:Nu,snapGrid:Vu,rtlTranslate:Gu}=_u;let Uu;_u.allowSlidePrev=!0,_u.allowSlideNext=!0;const Hu=-Vu[$u]-_u.getTranslate();$u<Ou?(Uu=Ru.length-Ou*3+$u,Uu+=Ou,_u.slideTo(Uu,0,!1,!0)&&Hu!==0&&_u.setTranslate((Gu?-_u.translate:_u.translate)-Hu)):$u>=Ru.length-Ou&&(Uu=-Ru.length+$u+Ou,Uu+=Ou,_u.slideTo(Uu,0,!1,!0)&&Hu!==0&&_u.setTranslate((Gu?-_u.translate:_u.translate)-Hu)),_u.allowSlidePrev=Fu,_u.allowSlideNext=Nu,_u.emit("loopFix")}function i1(){const _u=this,{$wrapperEl:$u,params:Ru,slides:Ou}=_u;$u.children(`.${Ru.slideClass}.${Ru.slideDuplicateClass},.${Ru.slideClass}.${Ru.slideBlankClass}`).remove(),Ou.removeAttr("data-swiper-slide-index")}const s1={loopCreate:t1,loopFix:n1,loopDestroy:i1};function o1(_u){const $u=this;if($u.support.touch||!$u.params.simulateTouch||$u.params.watchOverflow&&$u.isLocked||$u.params.cssMode)return;const Ru=$u.params.touchEventsTarget==="container"?$u.el:$u.wrapperEl;Ru.style.cursor="move",Ru.style.cursor=_u?"grabbing":"grab"}function r1(){const _u=this;_u.support.touch||_u.params.watchOverflow&&_u.isLocked||_u.params.cssMode||(_u[_u.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const a1={setGrabCursor:o1,unsetGrabCursor:r1};function l1(_u,$u=this){function Ru(Ou){if(!Ou||Ou===Ze()||Ou===Ge())return null;Ou.assignedSlot&&(Ou=Ou.assignedSlot);const Fu=Ou.closest(_u);return!Fu&&!Ou.getRootNode?null:Fu||Ru(Ou.getRootNode().host)}return Ru($u)}function c1(_u){const $u=this,Ru=Ze(),Ou=Ge(),Fu=$u.touchEventsData,{params:Nu,touches:Vu,enabled:Gu}=$u;if(!Gu||$u.animating&&Nu.preventInteractionOnTransition)return;!$u.animating&&Nu.cssMode&&Nu.loop&&$u.loopFix();let Uu=_u;Uu.originalEvent&&(Uu=Uu.originalEvent);let Hu=ae(Uu.target);if(Nu.touchEventsTarget==="wrapper"&&!Hu.closest($u.wrapperEl).length||(Fu.isTouchEvent=Uu.type==="touchstart",!Fu.isTouchEvent&&"which"in Uu&&Uu.which===3)||!Fu.isTouchEvent&&"button"in Uu&&Uu.button>0||Fu.isTouched&&Fu.isMoved)return;const Wu=!!Nu.noSwipingClass&&Nu.noSwipingClass!=="",Qu=_u.composedPath?_u.composedPath():_u.path;Wu&&Uu.target&&Uu.target.shadowRoot&&Qu&&(Hu=ae(Qu[0]));const qu=Nu.noSwipingSelector?Nu.noSwipingSelector:`.${Nu.noSwipingClass}`,Ku=!!(Uu.target&&Uu.target.shadowRoot);if(Nu.noSwiping&&(Ku?l1(qu,Hu[0]):Hu.closest(qu)[0])){$u.allowClick=!0;return}if(Nu.swipeHandler&&!Hu.closest(Nu.swipeHandler)[0])return;Vu.currentX=Uu.type==="touchstart"?Uu.targetTouches[0].pageX:Uu.pageX,Vu.currentY=Uu.type==="touchstart"?Uu.targetTouches[0].pageY:Uu.pageY;const Yu=Vu.currentX,_c=Vu.currentY,Ju=Nu.edgeSwipeDetection||Nu.iOSEdgeSwipeDetection,Xu=Nu.edgeSwipeThreshold||Nu.iOSEdgeSwipeThreshold;if(Ju&&(Yu<=Xu||Yu>=Ou.innerWidth-Xu))if(Ju==="prevent")_u.preventDefault();else return;if(Object.assign(Fu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Vu.startX=Yu,Vu.startY=_c,Fu.touchStartTime=ii(),$u.allowClick=!0,$u.updateSize(),$u.swipeDirection=void 0,Nu.threshold>0&&(Fu.allowThresholdMove=!1),Uu.type!=="touchstart"){let Zu=!0;Hu.is(Fu.focusableElements)&&(Zu=!1,Hu[0].nodeName==="SELECT"&&(Fu.isTouched=!1)),Ru.activeElement&&ae(Ru.activeElement).is(Fu.focusableElements)&&Ru.activeElement!==Hu[0]&&Ru.activeElement.blur();const Xc=Zu&&$u.allowTouchMove&&Nu.touchStartPreventDefault;(Nu.touchStartForcePreventDefault||Xc)&&!Hu[0].isContentEditable&&Uu.preventDefault()}$u.params.freeMode&&$u.params.freeMode.enabled&&$u.freeMode&&$u.animating&&!Nu.cssMode&&$u.freeMode.onTouchStart(),$u.emit("touchStart",Uu)}function u1(_u){const $u=Ze(),Ru=this,Ou=Ru.touchEventsData,{params:Fu,touches:Nu,rtlTranslate:Vu,enabled:Gu}=Ru;if(!Gu)return;let Uu=_u;if(Uu.originalEvent&&(Uu=Uu.originalEvent),!Ou.isTouched){Ou.startMoving&&Ou.isScrolling&&Ru.emit("touchMoveOpposite",Uu);return}if(Ou.isTouchEvent&&Uu.type!=="touchmove")return;const Hu=Uu.type==="touchmove"&&Uu.targetTouches&&(Uu.targetTouches[0]||Uu.changedTouches[0]),Wu=Uu.type==="touchmove"?Hu.pageX:Uu.pageX,Qu=Uu.type==="touchmove"?Hu.pageY:Uu.pageY;if(Uu.preventedByNestedSwiper){Nu.startX=Wu,Nu.startY=Qu;return}if(!Ru.allowTouchMove){ae(Uu.target).is(Ou.focusableElements)||(Ru.allowClick=!1),Ou.isTouched&&(Object.assign(Nu,{startX:Wu,startY:Qu,currentX:Wu,currentY:Qu}),Ou.touchStartTime=ii());return}if(Ou.isTouchEvent&&Fu.touchReleaseOnEdges&&!Fu.loop){if(Ru.isVertical()){if(Qu<Nu.startY&&Ru.translate<=Ru.maxTranslate()||Qu>Nu.startY&&Ru.translate>=Ru.minTranslate()){Ou.isTouched=!1,Ou.isMoved=!1;return}}else if(Wu<Nu.startX&&Ru.translate<=Ru.maxTranslate()||Wu>Nu.startX&&Ru.translate>=Ru.minTranslate())return}if(Ou.isTouchEvent&&$u.activeElement&&Uu.target===$u.activeElement&&ae(Uu.target).is(Ou.focusableElements)){Ou.isMoved=!0,Ru.allowClick=!1;return}if(Ou.allowTouchCallbacks&&Ru.emit("touchMove",Uu),Uu.targetTouches&&Uu.targetTouches.length>1)return;Nu.currentX=Wu,Nu.currentY=Qu;const qu=Nu.currentX-Nu.startX,Ku=Nu.currentY-Nu.startY;if(Ru.params.threshold&&Math.sqrt(qu**2+Ku**2)<Ru.params.threshold)return;if(typeof Ou.isScrolling>"u"){let Xu;Ru.isHorizontal()&&Nu.currentY===Nu.startY||Ru.isVertical()&&Nu.currentX===Nu.startX?Ou.isScrolling=!1:qu*qu+Ku*Ku>=25&&(Xu=Math.atan2(Math.abs(Ku),Math.abs(qu))*180/Math.PI,Ou.isScrolling=Ru.isHorizontal()?Xu>Fu.touchAngle:90-Xu>Fu.touchAngle)}if(Ou.isScrolling&&Ru.emit("touchMoveOpposite",Uu),typeof Ou.startMoving>"u"&&(Nu.currentX!==Nu.startX||Nu.currentY!==Nu.startY)&&(Ou.startMoving=!0),Ou.isScrolling){Ou.isTouched=!1;return}if(!Ou.startMoving)return;Ru.allowClick=!1,!Fu.cssMode&&Uu.cancelable&&Uu.preventDefault(),Fu.touchMoveStopPropagation&&!Fu.nested&&Uu.stopPropagation(),Ou.isMoved||(Fu.loop&&!Fu.cssMode&&Ru.loopFix(),Ou.startTranslate=Ru.getTranslate(),Ru.setTransition(0),Ru.animating&&Ru.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Ou.allowMomentumBounce=!1,Fu.grabCursor&&(Ru.allowSlideNext===!0||Ru.allowSlidePrev===!0)&&Ru.setGrabCursor(!0),Ru.emit("sliderFirstMove",Uu)),Ru.emit("sliderMove",Uu),Ou.isMoved=!0;let Yu=Ru.isHorizontal()?qu:Ku;Nu.diff=Yu,Yu*=Fu.touchRatio,Vu&&(Yu=-Yu),Ru.swipeDirection=Yu>0?"prev":"next",Ou.currentTranslate=Yu+Ou.startTranslate;let _c=!0,Ju=Fu.resistanceRatio;if(Fu.touchReleaseOnEdges&&(Ju=0),Yu>0&&Ou.currentTranslate>Ru.minTranslate()?(_c=!1,Fu.resistance&&(Ou.currentTranslate=Ru.minTranslate()-1+(-Ru.minTranslate()+Ou.startTranslate+Yu)**Ju)):Yu<0&&Ou.currentTranslate<Ru.maxTranslate()&&(_c=!1,Fu.resistance&&(Ou.currentTranslate=Ru.maxTranslate()+1-(Ru.maxTranslate()-Ou.startTranslate-Yu)**Ju)),_c&&(Uu.preventedByNestedSwiper=!0),!Ru.allowSlideNext&&Ru.swipeDirection==="next"&&Ou.currentTranslate<Ou.startTranslate&&(Ou.currentTranslate=Ou.startTranslate),!Ru.allowSlidePrev&&Ru.swipeDirection==="prev"&&Ou.currentTranslate>Ou.startTranslate&&(Ou.currentTranslate=Ou.startTranslate),!Ru.allowSlidePrev&&!Ru.allowSlideNext&&(Ou.currentTranslate=Ou.startTranslate),Fu.threshold>0)if(Math.abs(Yu)>Fu.threshold||Ou.allowThresholdMove){if(!Ou.allowThresholdMove){Ou.allowThresholdMove=!0,Nu.startX=Nu.currentX,Nu.startY=Nu.currentY,Ou.currentTranslate=Ou.startTranslate,Nu.diff=Ru.isHorizontal()?Nu.currentX-Nu.startX:Nu.currentY-Nu.startY;return}}else{Ou.currentTranslate=Ou.startTranslate;return}!Fu.followFinger||Fu.cssMode||((Fu.freeMode&&Fu.freeMode.enabled&&Ru.freeMode||Fu.watchSlidesProgress)&&(Ru.updateActiveIndex(),Ru.updateSlidesClasses()),Ru.params.freeMode&&Fu.freeMode.enabled&&Ru.freeMode&&Ru.freeMode.onTouchMove(),Ru.updateProgress(Ou.currentTranslate),Ru.setTranslate(Ou.currentTranslate))}function d1(_u){const $u=this,Ru=$u.touchEventsData,{params:Ou,touches:Fu,rtlTranslate:Nu,slidesGrid:Vu,enabled:Gu}=$u;if(!Gu)return;let Uu=_u;if(Uu.originalEvent&&(Uu=Uu.originalEvent),Ru.allowTouchCallbacks&&$u.emit("touchEnd",Uu),Ru.allowTouchCallbacks=!1,!Ru.isTouched){Ru.isMoved&&Ou.grabCursor&&$u.setGrabCursor(!1),Ru.isMoved=!1,Ru.startMoving=!1;return}Ou.grabCursor&&Ru.isMoved&&Ru.isTouched&&($u.allowSlideNext===!0||$u.allowSlidePrev===!0)&&$u.setGrabCursor(!1);const Hu=ii(),Wu=Hu-Ru.touchStartTime;if($u.allowClick){const Zu=Uu.path||Uu.composedPath&&Uu.composedPath();$u.updateClickedSlide(Zu&&Zu[0]||Uu.target),$u.emit("tap click",Uu),Wu<300&&Hu-Ru.lastClickTime<300&&$u.emit("doubleTap doubleClick",Uu)}if(Ru.lastClickTime=ii(),rs(()=>{$u.destroyed||($u.allowClick=!0)}),!Ru.isTouched||!Ru.isMoved||!$u.swipeDirection||Fu.diff===0||Ru.currentTranslate===Ru.startTranslate){Ru.isTouched=!1,Ru.isMoved=!1,Ru.startMoving=!1;return}Ru.isTouched=!1,Ru.isMoved=!1,Ru.startMoving=!1;let Qu;if(Ou.followFinger?Qu=Nu?$u.translate:-$u.translate:Qu=-Ru.currentTranslate,Ou.cssMode)return;if($u.params.freeMode&&Ou.freeMode.enabled){$u.freeMode.onTouchEnd({currentPos:Qu});return}let qu=0,Ku=$u.slidesSizesGrid[0];for(let Zu=0;Zu<Vu.length;Zu+=Zu<Ou.slidesPerGroupSkip?1:Ou.slidesPerGroup){const Xc=Zu<Ou.slidesPerGroupSkip-1?1:Ou.slidesPerGroup;typeof Vu[Zu+Xc]<"u"?Qu>=Vu[Zu]&&Qu<Vu[Zu+Xc]&&(qu=Zu,Ku=Vu[Zu+Xc]-Vu[Zu]):Qu>=Vu[Zu]&&(qu=Zu,Ku=Vu[Vu.length-1]-Vu[Vu.length-2])}let Yu=null,_c=null;Ou.rewind&&($u.isBeginning?_c=$u.params.virtual&&$u.params.virtual.enabled&&$u.virtual?$u.virtual.slides.length-1:$u.slides.length-1:$u.isEnd&&(Yu=0));const Ju=(Qu-Vu[qu])/Ku,Xu=qu<Ou.slidesPerGroupSkip-1?1:Ou.slidesPerGroup;if(Wu>Ou.longSwipesMs){if(!Ou.longSwipes){$u.slideTo($u.activeIndex);return}$u.swipeDirection==="next"&&(Ju>=Ou.longSwipesRatio?$u.slideTo(Ou.rewind&&$u.isEnd?Yu:qu+Xu):$u.slideTo(qu)),$u.swipeDirection==="prev"&&(Ju>1-Ou.longSwipesRatio?$u.slideTo(qu+Xu):_c!==null&&Ju<0&&Math.abs(Ju)>Ou.longSwipesRatio?$u.slideTo(_c):$u.slideTo(qu))}else{if(!Ou.shortSwipes){$u.slideTo($u.activeIndex);return}$u.navigation&&(Uu.target===$u.navigation.nextEl||Uu.target===$u.navigation.prevEl)?Uu.target===$u.navigation.nextEl?$u.slideTo(qu+Xu):$u.slideTo(qu):($u.swipeDirection==="next"&&$u.slideTo(Yu!==null?Yu:qu+Xu),$u.swipeDirection==="prev"&&$u.slideTo(_c!==null?_c:qu))}}function sl(){const _u=this,{params:$u,el:Ru}=_u;if(Ru&&Ru.offsetWidth===0)return;$u.breakpoints&&_u.setBreakpoint();const{allowSlideNext:Ou,allowSlidePrev:Fu,snapGrid:Nu}=_u;_u.allowSlideNext=!0,_u.allowSlidePrev=!0,_u.updateSize(),_u.updateSlides(),_u.updateSlidesClasses(),($u.slidesPerView==="auto"||$u.slidesPerView>1)&&_u.isEnd&&!_u.isBeginning&&!_u.params.centeredSlides?_u.slideTo(_u.slides.length-1,0,!1,!0):_u.slideTo(_u.activeIndex,0,!1,!0),_u.autoplay&&_u.autoplay.running&&_u.autoplay.paused&&_u.autoplay.run(),_u.allowSlidePrev=Fu,_u.allowSlideNext=Ou,_u.params.watchOverflow&&Nu!==_u.snapGrid&&_u.checkOverflow()}function f1(_u){const $u=this;!$u.enabled||$u.allowClick||($u.params.preventClicks&&_u.preventDefault(),$u.params.preventClicksPropagation&&$u.animating&&(_u.stopPropagation(),_u.stopImmediatePropagation()))}function h1(){const _u=this,{wrapperEl:$u,rtlTranslate:Ru,enabled:Ou}=_u;if(!Ou)return;_u.previousTranslate=_u.translate,_u.isHorizontal()?_u.translate=-$u.scrollLeft:_u.translate=-$u.scrollTop,_u.translate===0&&(_u.translate=0),_u.updateActiveIndex(),_u.updateSlidesClasses();let Fu;const Nu=_u.maxTranslate()-_u.minTranslate();Nu===0?Fu=0:Fu=(_u.translate-_u.minTranslate())/Nu,Fu!==_u.progress&&_u.updateProgress(Ru?-_u.translate:_u.translate),_u.emit("setTranslate",_u.translate,!1)}let ol=!1;function p1(){}const Du=(_u,$u)=>{const Ru=Ze(),{params:Ou,touchEvents:Fu,el:Nu,wrapperEl:Vu,device:Gu,support:Uu}=_u,Hu=!!Ou.nested,Wu=$u==="on"?"addEventListener":"removeEventListener",Qu=$u;if(!Uu.touch)Nu[Wu](Fu.start,_u.onTouchStart,!1),Ru[Wu](Fu.move,_u.onTouchMove,Hu),Ru[Wu](Fu.end,_u.onTouchEnd,!1);else{const qu=Fu.start==="touchstart"&&Uu.passiveListener&&Ou.passiveListeners?{passive:!0,capture:!1}:!1;Nu[Wu](Fu.start,_u.onTouchStart,qu),Nu[Wu](Fu.move,_u.onTouchMove,Uu.passiveListener?{passive:!1,capture:Hu}:Hu),Nu[Wu](Fu.end,_u.onTouchEnd,qu),Fu.cancel&&Nu[Wu](Fu.cancel,_u.onTouchEnd,qu)}(Ou.preventClicks||Ou.preventClicksPropagation)&&Nu[Wu]("click",_u.onClick,!0),Ou.cssMode&&Vu[Wu]("scroll",_u.onScroll),Ou.updateOnWindowResize?_u[Qu](Gu.ios||Gu.android?"resize orientationchange observerUpdate":"resize observerUpdate",sl,!0):_u[Qu]("observerUpdate",sl,!0)};function m1(){const _u=this,$u=Ze(),{params:Ru,support:Ou}=_u;_u.onTouchStart=c1.bind(_u),_u.onTouchMove=u1.bind(_u),_u.onTouchEnd=d1.bind(_u),Ru.cssMode&&(_u.onScroll=h1.bind(_u)),_u.onClick=f1.bind(_u),Ou.touch&&!ol&&($u.addEventListener("touchstart",p1),ol=!0),Du(_u,"on")}function g1(){Du(this,"off")}const v1={attachEvents:m1,detachEvents:g1},rl=(_u,$u)=>_u.grid&&$u.grid&&$u.grid.rows>1;function A1(){const _u=this,{activeIndex:$u,initialized:Ru,loopedSlides:Ou=0,params:Fu,$el:Nu}=_u,Vu=Fu.breakpoints;if(!Vu||Vu&&Object.keys(Vu).length===0)return;const Gu=_u.getBreakpoint(Vu,_u.params.breakpointsBase,_u.el);if(!Gu||_u.currentBreakpoint===Gu)return;const Uu=(Gu in Vu?Vu[Gu]:void 0)||_u.originalParams,Hu=rl(_u,Fu),Wu=rl(_u,Uu),Qu=Fu.enabled;Hu&&!Wu?(Nu.removeClass(`${Fu.containerModifierClass}grid ${Fu.containerModifierClass}grid-column`),_u.emitContainerClasses()):!Hu&&Wu&&(Nu.addClass(`${Fu.containerModifierClass}grid`),(Uu.grid.fill&&Uu.grid.fill==="column"||!Uu.grid.fill&&Fu.grid.fill==="column")&&Nu.addClass(`${Fu.containerModifierClass}grid-column`),_u.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(_c=>{const Ju=Fu[_c]&&Fu[_c].enabled,Xu=Uu[_c]&&Uu[_c].enabled;Ju&&!Xu&&_u[_c].disable(),!Ju&&Xu&&_u[_c].enable()});const qu=Uu.direction&&Uu.direction!==Fu.direction,Ku=Fu.loop&&(Uu.slidesPerView!==Fu.slidesPerView||qu);qu&&Ru&&_u.changeDirection(),rt(_u.params,Uu);const Yu=_u.params.enabled;Object.assign(_u,{allowTouchMove:_u.params.allowTouchMove,allowSlideNext:_u.params.allowSlideNext,allowSlidePrev:_u.params.allowSlidePrev}),Qu&&!Yu?_u.disable():!Qu&&Yu&&_u.enable(),_u.currentBreakpoint=Gu,_u.emit("_beforeBreakpoint",Uu),Ku&&Ru&&(_u.loopDestroy(),_u.loopCreate(),_u.updateSlides(),_u.slideTo($u-Ou+_u.loopedSlides,0,!1)),_u.emit("breakpoint",Uu)}function b1(_u,$u="window",Ru){if(!_u||$u==="container"&&!Ru)return;let Ou=!1;const Fu=Ge(),Nu=$u==="window"?Fu.innerHeight:Ru.clientHeight,Vu=Object.keys(_u).map(Gu=>{if(typeof Gu=="string"&&Gu.indexOf("@")===0){const Uu=parseFloat(Gu.substr(1));return{value:Nu*Uu,point:Gu}}return{value:Gu,point:Gu}});Vu.sort((Gu,Uu)=>parseInt(Gu.value,10)-parseInt(Uu.value,10));for(let Gu=0;Gu<Vu.length;Gu+=1){const{point:Uu,value:Hu}=Vu[Gu];$u==="window"?Fu.matchMedia(`(min-width: ${Hu}px)`).matches&&(Ou=Uu):Hu<=Ru.clientWidth&&(Ou=Uu)}return Ou||"max"}const y1={setBreakpoint:A1,getBreakpoint:b1};function w1(_u,$u){const Ru=[];return _u.forEach(Ou=>{typeof Ou=="object"?Object.keys(Ou).forEach(Fu=>{Ou[Fu]&&Ru.push($u+Fu)}):typeof Ou=="string"&&Ru.push($u+Ou)}),Ru}function E1(){const _u=this,{classNames:$u,params:Ru,rtl:Ou,$el:Fu,device:Nu,support:Vu}=_u,Gu=w1(["initialized",Ru.direction,{"pointer-events":!Vu.touch},{"free-mode":_u.params.freeMode&&Ru.freeMode.enabled},{autoheight:Ru.autoHeight},{rtl:Ou},{grid:Ru.grid&&Ru.grid.rows>1},{"grid-column":Ru.grid&&Ru.grid.rows>1&&Ru.grid.fill==="column"},{android:Nu.android},{ios:Nu.ios},{"css-mode":Ru.cssMode},{centered:Ru.cssMode&&Ru.centeredSlides},{"watch-progress":Ru.watchSlidesProgress}],Ru.containerModifierClass);$u.push(...Gu),Fu.addClass([...$u].join(" ")),_u.emitContainerClasses()}function C1(){const _u=this,{$el:$u,classNames:Ru}=_u;$u.removeClass(Ru.join(" ")),_u.emitContainerClasses()}const P1={addClasses:E1,removeClasses:C1};function I1(_u,$u,Ru,Ou,Fu,Nu){const Vu=Ge();let Gu;function Uu(){Nu&&Nu()}!ae(_u).parent("picture")[0]&&(!_u.complete||!Fu)&&$u?(Gu=new Vu.Image,Gu.onload=Uu,Gu.onerror=Uu,Ou&&(Gu.sizes=Ou),Ru&&(Gu.srcset=Ru),$u&&(Gu.src=$u)):Uu()}function x1(){const _u=this;_u.imagesToLoad=_u.$el.find("img");function $u(){typeof _u>"u"||_u===null||!_u||_u.destroyed||(_u.imagesLoaded!==void 0&&(_u.imagesLoaded+=1),_u.imagesLoaded===_u.imagesToLoad.length&&(_u.params.updateOnImagesReady&&_u.update(),_u.emit("imagesReady")))}for(let Ru=0;Ru<_u.imagesToLoad.length;Ru+=1){const Ou=_u.imagesToLoad[Ru];_u.loadImage(Ou,Ou.currentSrc||Ou.getAttribute("src"),Ou.srcset||Ou.getAttribute("srcset"),Ou.sizes||Ou.getAttribute("sizes"),!0,$u)}}const S1={loadImage:I1,preloadImages:x1};function k1(){const _u=this,{isLocked:$u,params:Ru}=_u,{slidesOffsetBefore:Ou}=Ru;if(Ou){const Fu=_u.slides.length-1,Nu=_u.slidesGrid[Fu]+_u.slidesSizesGrid[Fu]+Ou*2;_u.isLocked=_u.size>Nu}else _u.isLocked=_u.snapGrid.length===1;Ru.allowSlideNext===!0&&(_u.allowSlideNext=!_u.isLocked),Ru.allowSlidePrev===!0&&(_u.allowSlidePrev=!_u.isLocked),$u&&$u!==_u.isLocked&&(_u.isEnd=!1),$u!==_u.isLocked&&_u.emit(_u.isLocked?"lock":"unlock")}const T1={checkOverflow:k1},al={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function D1(_u,$u){return function(Ru={}){const Ou=Object.keys(Ru)[0],Fu=Ru[Ou];if(typeof Fu!="object"||Fu===null){rt($u,Ru);return}if(["navigation","pagination","scrollbar"].indexOf(Ou)>=0&&_u[Ou]===!0&&(_u[Ou]={auto:!0}),!(Ou in _u&&"enabled"in Fu)){rt($u,Ru);return}_u[Ou]===!0&&(_u[Ou]={enabled:!0}),typeof _u[Ou]=="object"&&!("enabled"in _u[Ou])&&(_u[Ou].enabled=!0),_u[Ou]||(_u[Ou]={enabled:!1}),rt($u,Ru)}}const Us={eventsEmitter:xA,update:OA,translate:GA,transition:_A,slide:e1,loop:s1,grabCursor:a1,events:v1,breakpoints:y1,checkOverflow:T1,classes:P1,images:S1},Vs={};class nt{constructor(...$u){let Ru,Ou;if($u.length===1&&$u[0].constructor&&Object.prototype.toString.call($u[0]).slice(8,-1)==="Object"?Ou=$u[0]:[Ru,Ou]=$u,Ou||(Ou={}),Ou=rt({},Ou),Ru&&!Ou.el&&(Ou.el=Ru),Ou.el&&ae(Ou.el).length>1){const Gu=[];return ae(Ou.el).each(Uu=>{const Hu=rt({},Ou,{el:Uu});Gu.push(new nt(Hu))}),Gu}const Fu=this;Fu.__swiper__=!0,Fu.support=ku(),Fu.device=wA({userAgent:Ou.userAgent}),Fu.browser=CA(),Fu.eventsListeners={},Fu.eventsAnyListeners=[],Fu.modules=[...Fu.__modules__],Ou.modules&&Array.isArray(Ou.modules)&&Fu.modules.push(...Ou.modules);const Nu={};Fu.modules.forEach(Gu=>{Gu({swiper:Fu,extendParams:D1(Ou,Nu),on:Fu.on.bind(Fu),once:Fu.once.bind(Fu),off:Fu.off.bind(Fu),emit:Fu.emit.bind(Fu)})});const Vu=rt({},al,Nu);return Fu.params=rt({},Vu,Vs,Ou),Fu.originalParams=rt({},Fu.params),Fu.passedParams=rt({},Ou),Fu.params&&Fu.params.on&&Object.keys(Fu.params.on).forEach(Gu=>{Fu.on(Gu,Fu.params.on[Gu])}),Fu.params&&Fu.params.onAny&&Fu.onAny(Fu.params.onAny),Fu.$=ae,Object.assign(Fu,{enabled:Fu.params.enabled,el:Ru,classNames:[],slides:ae(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Fu.params.direction==="horizontal"},isVertical(){return Fu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Fu.params.allowSlideNext,allowSlidePrev:Fu.params.allowSlidePrev,touchEvents:function(){const Gu=["touchstart","touchmove","touchend","touchcancel"],Uu=["pointerdown","pointermove","pointerup"];return Fu.touchEventsTouch={start:Gu[0],move:Gu[1],end:Gu[2],cancel:Gu[3]},Fu.touchEventsDesktop={start:Uu[0],move:Uu[1],end:Uu[2]},Fu.support.touch||!Fu.params.simulateTouch?Fu.touchEventsTouch:Fu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Fu.params.focusableElements,lastClickTime:ii(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Fu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Fu.emit("_swiper"),Fu.params.init&&Fu.init(),Fu}enable(){const $u=this;$u.enabled||($u.enabled=!0,$u.params.grabCursor&&$u.setGrabCursor(),$u.emit("enable"))}disable(){const $u=this;!$u.enabled||($u.enabled=!1,$u.params.grabCursor&&$u.unsetGrabCursor(),$u.emit("disable"))}setProgress($u,Ru){const Ou=this;$u=Math.min(Math.max($u,0),1);const Fu=Ou.minTranslate(),Nu=(Ou.maxTranslate()-Fu)*$u+Fu;Ou.translateTo(Nu,typeof Ru>"u"?0:Ru),Ou.updateActiveIndex(),Ou.updateSlidesClasses()}emitContainerClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Ru=$u.el.className.split(" ").filter(Ou=>Ou.indexOf("swiper")===0||Ou.indexOf($u.params.containerModifierClass)===0);$u.emit("_containerClasses",Ru.join(" "))}getSlideClasses($u){const Ru=this;return Ru.destroyed?"":$u.className.split(" ").filter(Ou=>Ou.indexOf("swiper-slide")===0||Ou.indexOf(Ru.params.slideClass)===0).join(" ")}emitSlidesClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Ru=[];$u.slides.each(Ou=>{const Fu=$u.getSlideClasses(Ou);Ru.push({slideEl:Ou,classNames:Fu}),$u.emit("_slideClass",Ou,Fu)}),$u.emit("_slideClasses",Ru)}slidesPerViewDynamic($u="current",Ru=!1){const Ou=this,{params:Fu,slides:Nu,slidesGrid:Vu,slidesSizesGrid:Gu,size:Uu,activeIndex:Hu}=Ou;let Wu=1;if(Fu.centeredSlides){let Qu=Nu[Hu].swiperSlideSize,qu;for(let Ku=Hu+1;Ku<Nu.length;Ku+=1)Nu[Ku]&&!qu&&(Qu+=Nu[Ku].swiperSlideSize,Wu+=1,Qu>Uu&&(qu=!0));for(let Ku=Hu-1;Ku>=0;Ku-=1)Nu[Ku]&&!qu&&(Qu+=Nu[Ku].swiperSlideSize,Wu+=1,Qu>Uu&&(qu=!0))}else if($u==="current")for(let Qu=Hu+1;Qu<Nu.length;Qu+=1)(Ru?Vu[Qu]+Gu[Qu]-Vu[Hu]<Uu:Vu[Qu]-Vu[Hu]<Uu)&&(Wu+=1);else for(let Qu=Hu-1;Qu>=0;Qu-=1)Vu[Hu]-Vu[Qu]<Uu&&(Wu+=1);return Wu}update(){const $u=this;if(!$u||$u.destroyed)return;const{snapGrid:Ru,params:Ou}=$u;Ou.breakpoints&&$u.setBreakpoint(),$u.updateSize(),$u.updateSlides(),$u.updateProgress(),$u.updateSlidesClasses();function Fu(){const Vu=$u.rtlTranslate?$u.translate*-1:$u.translate,Gu=Math.min(Math.max(Vu,$u.maxTranslate()),$u.minTranslate());$u.setTranslate(Gu),$u.updateActiveIndex(),$u.updateSlidesClasses()}let Nu;$u.params.freeMode&&$u.params.freeMode.enabled?(Fu(),$u.params.autoHeight&&$u.updateAutoHeight()):(($u.params.slidesPerView==="auto"||$u.params.slidesPerView>1)&&$u.isEnd&&!$u.params.centeredSlides?Nu=$u.slideTo($u.slides.length-1,0,!1,!0):Nu=$u.slideTo($u.activeIndex,0,!1,!0),Nu||Fu()),Ou.watchOverflow&&Ru!==$u.snapGrid&&$u.checkOverflow(),$u.emit("update")}changeDirection($u,Ru=!0){const Ou=this,Fu=Ou.params.direction;return $u||($u=Fu==="horizontal"?"vertical":"horizontal"),$u===Fu||$u!=="horizontal"&&$u!=="vertical"||(Ou.$el.removeClass(`${Ou.params.containerModifierClass}${Fu}`).addClass(`${Ou.params.containerModifierClass}${$u}`),Ou.emitContainerClasses(),Ou.params.direction=$u,Ou.slides.each(Nu=>{$u==="vertical"?Nu.style.width="":Nu.style.height=""}),Ou.emit("changeDirection"),Ru&&Ou.update()),Ou}changeLanguageDirection($u){const Ru=this;Ru.rtl&&$u==="rtl"||!Ru.rtl&&$u==="ltr"||(Ru.rtl=$u==="rtl",Ru.rtlTranslate=Ru.params.direction==="horizontal"&&Ru.rtl,Ru.rtl?(Ru.$el.addClass(`${Ru.params.containerModifierClass}rtl`),Ru.el.dir="rtl"):(Ru.$el.removeClass(`${Ru.params.containerModifierClass}rtl`),Ru.el.dir="ltr"),Ru.update())}mount($u){const Ru=this;if(Ru.mounted)return!0;const Ou=ae($u||Ru.params.el);if($u=Ou[0],!$u)return!1;$u.swiper=Ru;const Fu=()=>`.${(Ru.params.wrapperClass||"").trim().split(" ").join(".")}`;let Nu=(()=>{if($u&&$u.shadowRoot&&$u.shadowRoot.querySelector){const Vu=ae($u.shadowRoot.querySelector(Fu()));return Vu.children=Gu=>Ou.children(Gu),Vu}return Ou.children?Ou.children(Fu()):ae(Ou).children(Fu())})();if(Nu.length===0&&Ru.params.createElements){const Vu=Ze().createElement("div");Nu=ae(Vu),Vu.className=Ru.params.wrapperClass,Ou.append(Vu),Ou.children(`.${Ru.params.slideClass}`).each(Gu=>{Nu.append(Gu)})}return Object.assign(Ru,{$el:Ou,el:$u,$wrapperEl:Nu,wrapperEl:Nu[0],mounted:!0,rtl:$u.dir.toLowerCase()==="rtl"||Ou.css("direction")==="rtl",rtlTranslate:Ru.params.direction==="horizontal"&&($u.dir.toLowerCase()==="rtl"||Ou.css("direction")==="rtl"),wrongRTL:Nu.css("display")==="-webkit-box"}),!0}init($u){const Ru=this;return Ru.initialized||Ru.mount($u)===!1||(Ru.emit("beforeInit"),Ru.params.breakpoints&&Ru.setBreakpoint(),Ru.addClasses(),Ru.params.loop&&Ru.loopCreate(),Ru.updateSize(),Ru.updateSlides(),Ru.params.watchOverflow&&Ru.checkOverflow(),Ru.params.grabCursor&&Ru.enabled&&Ru.setGrabCursor(),Ru.params.preloadImages&&Ru.preloadImages(),Ru.params.loop?Ru.slideTo(Ru.params.initialSlide+Ru.loopedSlides,0,Ru.params.runCallbacksOnInit,!1,!0):Ru.slideTo(Ru.params.initialSlide,0,Ru.params.runCallbacksOnInit,!1,!0),Ru.attachEvents(),Ru.initialized=!0,Ru.emit("init"),Ru.emit("afterInit")),Ru}destroy($u=!0,Ru=!0){const Ou=this,{params:Fu,$el:Nu,$wrapperEl:Vu,slides:Gu}=Ou;return typeof Ou.params>"u"||Ou.destroyed||(Ou.emit("beforeDestroy"),Ou.initialized=!1,Ou.detachEvents(),Fu.loop&&Ou.loopDestroy(),Ru&&(Ou.removeClasses(),Nu.removeAttr("style"),Vu.removeAttr("style"),Gu&&Gu.length&&Gu.removeClass([Fu.slideVisibleClass,Fu.slideActiveClass,Fu.slideNextClass,Fu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Ou.emit("destroy"),Object.keys(Ou.eventsListeners).forEach(Uu=>{Ou.off(Uu)}),$u!==!1&&(Ou.$el[0].swiper=null,mA(Ou)),Ou.destroyed=!0),null}static extendDefaults($u){rt(Vs,$u)}static get extendedDefaults(){return Vs}static get defaults(){return al}static installModule($u){nt.prototype.__modules__||(nt.prototype.__modules__=[]);const Ru=nt.prototype.__modules__;typeof $u=="function"&&Ru.indexOf($u)<0&&Ru.push($u)}static use($u){return Array.isArray($u)?($u.forEach(Ru=>nt.installModule(Ru)),nt):(nt.installModule($u),nt)}}Object.keys(Us).forEach(_u=>{Object.keys(Us[_u]).forEach($u=>{nt.prototype[$u]=Us[_u][$u]})});nt.use([PA,IA]);function L1({swiper:_u,extendParams:$u,on:Ru,emit:Ou}){let Fu;_u.autoplay={running:!1,paused:!1},$u({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function Nu(){if(!_u.size){_u.autoplay.running=!1,_u.autoplay.paused=!1;return}const _c=_u.slides.eq(_u.activeIndex);let Ju=_u.params.autoplay.delay;_c.attr("data-swiper-autoplay")&&(Ju=_c.attr("data-swiper-autoplay")||_u.params.autoplay.delay),clearTimeout(Fu),Fu=rs(()=>{let Xu;_u.params.autoplay.reverseDirection?_u.params.loop?(_u.loopFix(),Xu=_u.slidePrev(_u.params.speed,!0,!0),Ou("autoplay")):_u.isBeginning?_u.params.autoplay.stopOnLastSlide?Gu():(Xu=_u.slideTo(_u.slides.length-1,_u.params.speed,!0,!0),Ou("autoplay")):(Xu=_u.slidePrev(_u.params.speed,!0,!0),Ou("autoplay")):_u.params.loop?(_u.loopFix(),Xu=_u.slideNext(_u.params.speed,!0,!0),Ou("autoplay")):_u.isEnd?_u.params.autoplay.stopOnLastSlide?Gu():(Xu=_u.slideTo(0,_u.params.speed,!0,!0),Ou("autoplay")):(Xu=_u.slideNext(_u.params.speed,!0,!0),Ou("autoplay")),(_u.params.cssMode&&_u.autoplay.running||Xu===!1)&&Nu()},Ju)}function Vu(){return typeof Fu<"u"||_u.autoplay.running?!1:(_u.autoplay.running=!0,Ou("autoplayStart"),Nu(),!0)}function Gu(){return!_u.autoplay.running||typeof Fu>"u"?!1:(Fu&&(clearTimeout(Fu),Fu=void 0),_u.autoplay.running=!1,Ou("autoplayStop"),!0)}function Uu(_c){!_u.autoplay.running||_u.autoplay.paused||(Fu&&clearTimeout(Fu),_u.autoplay.paused=!0,_c===0||!_u.params.autoplay.waitForTransition?(_u.autoplay.paused=!1,Nu()):["transitionend","webkitTransitionEnd"].forEach(Ju=>{_u.$wrapperEl[0].addEventListener(Ju,Wu)}))}function Hu(){const _c=Ze();_c.visibilityState==="hidden"&&_u.autoplay.running&&Uu(),_c.visibilityState==="visible"&&_u.autoplay.paused&&(Nu(),_u.autoplay.paused=!1)}function Wu(_c){!_u||_u.destroyed||!_u.$wrapperEl||_c.target===_u.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(Ju=>{_u.$wrapperEl[0].removeEventListener(Ju,Wu)}),_u.autoplay.paused=!1,_u.autoplay.running?Nu():Gu())}function Qu(){_u.params.autoplay.disableOnInteraction?Gu():(Ou("autoplayPause"),Uu()),["transitionend","webkitTransitionEnd"].forEach(_c=>{_u.$wrapperEl[0].removeEventListener(_c,Wu)})}function qu(){_u.params.autoplay.disableOnInteraction||(_u.autoplay.paused=!1,Ou("autoplayResume"),Nu())}function Ku(){_u.params.autoplay.pauseOnMouseEnter&&(_u.$el.on("mouseenter",Qu),_u.$el.on("mouseleave",qu))}function Yu(){_u.$el.off("mouseenter",Qu),_u.$el.off("mouseleave",qu)}Ru("init",()=>{_u.params.autoplay.enabled&&(Vu(),Ze().addEventListener("visibilitychange",Hu),Ku())}),Ru("beforeTransitionStart",(_c,Ju,Xu)=>{_u.autoplay.running&&(Xu||!_u.params.autoplay.disableOnInteraction?_u.autoplay.pause(Ju):Gu())}),Ru("sliderFirstMove",()=>{_u.autoplay.running&&(_u.params.autoplay.disableOnInteraction?Gu():Uu())}),Ru("touchEnd",()=>{_u.params.cssMode&&_u.autoplay.paused&&!_u.params.autoplay.disableOnInteraction&&Nu()}),Ru("destroy",()=>{Yu(),_u.autoplay.running&&Gu(),Ze().removeEventListener("visibilitychange",Hu)}),Object.assign(_u.autoplay,{pause:Uu,run:Nu,start:Vu,stop:Gu})}function gn(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function qt(_u,$u){const Ru=["__proto__","constructor","prototype"];Object.keys($u).filter(Ou=>Ru.indexOf(Ou)<0).forEach(Ou=>{typeof _u[Ou]>"u"?_u[Ou]=$u[Ou]:gn($u[Ou])&&gn(_u[Ou])&&Object.keys($u[Ou]).length>0?$u[Ou].__swiper__?_u[Ou]=$u[Ou]:qt(_u[Ou],$u[Ou]):_u[Ou]=$u[Ou]})}function go(_u={}){return _u.navigation&&typeof _u.navigation.nextEl>"u"&&typeof _u.navigation.prevEl>"u"}function vo(_u={}){return _u.pagination&&typeof _u.pagination.el>"u"}function Ao(_u={}){return _u.scrollbar&&typeof _u.scrollbar.el>"u"}function as(_u=""){const $u=_u.split(" ").map(Ou=>Ou.trim()).filter(Ou=>!!Ou),Ru=[];return $u.forEach(Ou=>{Ru.indexOf(Ou)<0&&Ru.push(Ou)}),Ru.join(" ")}const Lu=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function M1(_u={},$u=!0){const Ru={on:{}},Ou={},Fu={};qt(Ru,nt.defaults),qt(Ru,nt.extendedDefaults),Ru._emitClasses=!0,Ru.init=!1;const Nu={},Vu=Lu.map(Uu=>Uu.replace(/_/,"")),Gu=Object.assign({},_u);return Object.keys(Gu).forEach(Uu=>{typeof _u[Uu]>"u"||(Vu.indexOf(Uu)>=0?gn(_u[Uu])?(Ru[Uu]={},Fu[Uu]={},qt(Ru[Uu],_u[Uu]),qt(Fu[Uu],_u[Uu])):(Ru[Uu]=_u[Uu],Fu[Uu]=_u[Uu]):Uu.search(/on[A-Z]/)===0&&typeof _u[Uu]=="function"?$u?Ou[`${Uu[2].toLowerCase()}${Uu.substr(3)}`]=_u[Uu]:Ru.on[`${Uu[2].toLowerCase()}${Uu.substr(3)}`]=_u[Uu]:Nu[Uu]=_u[Uu])}),["navigation","pagination","scrollbar"].forEach(Uu=>{Ru[Uu]===!0&&(Ru[Uu]={}),Ru[Uu]===!1&&delete Ru[Uu]}),{params:Ru,passedParams:Fu,rest:Nu,events:Ou}}function z1({el:_u,nextEl:$u,prevEl:Ru,paginationEl:Ou,scrollbarEl:Fu,swiper:Nu},Vu){go(Vu)&&$u&&Ru&&(Nu.params.navigation.nextEl=$u,Nu.originalParams.navigation.nextEl=$u,Nu.params.navigation.prevEl=Ru,Nu.originalParams.navigation.prevEl=Ru),vo(Vu)&&Ou&&(Nu.params.pagination.el=Ou,Nu.originalParams.pagination.el=Ou),Ao(Vu)&&Fu&&(Nu.params.scrollbar.el=Fu,Nu.originalParams.scrollbar.el=Fu),Nu.init(_u)}function j1(_u,$u,Ru,Ou,Fu){const Nu=[];if(!$u)return Nu;const Vu=Gu=>{Nu.indexOf(Gu)<0&&Nu.push(Gu)};if(Ru&&Ou){const Gu=Ou.map(Fu),Uu=Ru.map(Fu);Gu.join("")!==Uu.join("")&&Vu("children"),Ou.length!==Ru.length&&Vu("children")}return Lu.filter(Gu=>Gu[0]==="_").map(Gu=>Gu.replace(/_/,"")).forEach(Gu=>{if(Gu in _u&&Gu in $u)if(gn(_u[Gu])&&gn($u[Gu])){const Uu=Object.keys(_u[Gu]),Hu=Object.keys($u[Gu]);Uu.length!==Hu.length?Vu(Gu):(Uu.forEach(Wu=>{_u[Gu][Wu]!==$u[Gu][Wu]&&Vu(Gu)}),Hu.forEach(Wu=>{_u[Gu][Wu]!==$u[Gu][Wu]&&Vu(Gu)}))}else _u[Gu]!==$u[Gu]&&Vu(Gu)}),Nu}function B1({swiper:_u,slides:$u,passedParams:Ru,changedParams:Ou,nextEl:Fu,prevEl:Nu,scrollbarEl:Vu,paginationEl:Gu}){const Uu=Ou.filter(ep=>ep!=="children"&&ep!=="direction"),{params:Hu,pagination:Wu,navigation:Qu,scrollbar:qu,virtual:Ku,thumbs:Yu}=_u;let _c,Ju,Xu,Zu,Xc;Ou.includes("thumbs")&&Ru.thumbs&&Ru.thumbs.swiper&&Hu.thumbs&&!Hu.thumbs.swiper&&(_c=!0),Ou.includes("controller")&&Ru.controller&&Ru.controller.control&&Hu.controller&&!Hu.controller.control&&(Ju=!0),Ou.includes("pagination")&&Ru.pagination&&(Ru.pagination.el||Gu)&&(Hu.pagination||Hu.pagination===!1)&&Wu&&!Wu.el&&(Xu=!0),Ou.includes("scrollbar")&&Ru.scrollbar&&(Ru.scrollbar.el||Vu)&&(Hu.scrollbar||Hu.scrollbar===!1)&&qu&&!qu.el&&(Zu=!0),Ou.includes("navigation")&&Ru.navigation&&(Ru.navigation.prevEl||Nu)&&(Ru.navigation.nextEl||Fu)&&(Hu.navigation||Hu.navigation===!1)&&Qu&&!Qu.prevEl&&!Qu.nextEl&&(Xc=!0);const _h=ep=>{!_u[ep]||(_u[ep].destroy(),ep==="navigation"?(Hu[ep].prevEl=void 0,Hu[ep].nextEl=void 0,_u[ep].prevEl=void 0,_u[ep].nextEl=void 0):(Hu[ep].el=void 0,_u[ep].el=void 0))};Uu.forEach(ep=>{if(gn(Hu[ep])&&gn(Ru[ep]))qt(Hu[ep],Ru[ep]);else{const np=Ru[ep];(np===!0||np===!1)&&(ep==="navigation"||ep==="pagination"||ep==="scrollbar")?np===!1&&_h(ep):Hu[ep]=Ru[ep]}}),Uu.includes("controller")&&!Ju&&_u.controller&&_u.controller.control&&Hu.controller&&Hu.controller.control&&(_u.controller.control=Hu.controller.control),Ou.includes("children")&&$u&&Ku&&Hu.virtual.enabled?(Ku.slides=$u,Ku.update(!0)):Ou.includes("children")&&_u.lazy&&_u.params.lazy.enabled&&_u.lazy.load(),_c&&Yu.init()&&Yu.update(!0),Ju&&(_u.controller.control=Hu.controller.control),Xu&&(Gu&&(Hu.pagination.el=Gu),Wu.init(),Wu.render(),Wu.update()),Zu&&(Vu&&(Hu.scrollbar.el=Vu),qu.init(),qu.updateSize(),qu.setTranslate()),Xc&&(Fu&&(Hu.navigation.nextEl=Fu),Nu&&(Hu.navigation.prevEl=Nu),Qu.init(),Qu.update()),Ou.includes("allowSlideNext")&&(_u.allowSlideNext=Ru.allowSlideNext),Ou.includes("allowSlidePrev")&&(_u.allowSlidePrev=Ru.allowSlidePrev),Ou.includes("direction")&&_u.changeDirection(Ru.direction,!1),_u.update()}const O1=_u=>({virtualData:_u&512}),ll=_u=>({virtualData:_u[9]}),R1=_u=>({virtualData:_u&512}),cl=_u=>({virtualData:_u[9]}),Q1=_u=>({virtualData:_u&512}),ul=_u=>({virtualData:_u[9]}),H1=_u=>({virtualData:_u&512}),dl=_u=>({virtualData:_u[9]}),F1=_u=>({virtualData:_u&512}),fl=_u=>({virtualData:_u[9]});function hl(_u){let $u,Ru,Ou;return{c(){$u=G("div"),Ru=q(),Ou=G("div"),P($u,"class","swiper-button-prev"),P(Ou,"class","swiper-button-next")},m(Fu,Nu){F(Fu,$u,Nu),_u[13]($u),F(Fu,Ru,Nu),F(Fu,Ou,Nu),_u[14](Ou)},p:ce,d(Fu){Fu&&Q($u),_u[13](null),Fu&&Q(Ru),Fu&&Q(Ou),_u[14](null)}}}function pl(_u){let $u;return{c(){$u=G("div"),P($u,"class","swiper-scrollbar")},m(Ru,Ou){F(Ru,$u,Ou),_u[15]($u)},p:ce,d(Ru){Ru&&Q($u),_u[15](null)}}}function ml(_u){let $u;return{c(){$u=G("div"),P($u,"class","swiper-pagination")},m(Ru,Ou){F(Ru,$u,Ou),_u[16]($u)},p:ce,d(Ru){Ru&&Q($u),_u[16](null)}}}function N1(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu=go(_u[2]),Uu,Hu=Ao(_u[2]),Wu,Qu=vo(_u[2]),qu,Ku,Yu;const _c=_u[12]["container-start"],Ju=ln(_c,_u,_u[11],fl),Xu=_u[12]["wrapper-start"],Zu=ln(Xu,_u,_u[11],dl),Xc=_u[12].default,_h=ln(Xc,_u,_u[11],ul),ep=_u[12]["wrapper-end"],np=ln(ep,_u,_u[11],cl);let ap=Gu&&hl(_u),lp=Hu&&pl(_u),up=Qu&&ml(_u);const _f=_u[12]["container-end"],tp=ln(_f,_u,_u[11],ll);let ip=[{class:Ku=as(`${_u[1]}${_u[0]?` ${_u[0]}`:""}`)},_u[3]],rp={};for(let op=0;op<ip.length;op+=1)rp=ze(rp,ip[op]);return{c(){$u=G("div"),Ju&&Ju.c(),Ru=q(),Ou=G("div"),Zu&&Zu.c(),Fu=q(),_h&&_h.c(),Nu=q(),np&&np.c(),Vu=q(),ap&&ap.c(),Uu=q(),lp&&lp.c(),Wu=q(),up&&up.c(),qu=q(),tp&&tp.c(),P(Ou,"class","swiper-wrapper"),Vi($u,rp)},m(op,sp){F(op,$u,sp),Ju&&Ju.m($u,null),W($u,Ru),W($u,Ou),Zu&&Zu.m(Ou,null),W(Ou,Fu),_h&&_h.m(Ou,null),W(Ou,Nu),np&&np.m(Ou,null),W($u,Vu),ap&&ap.m($u,null),W($u,Uu),lp&&lp.m($u,null),W($u,Wu),up&&up.m($u,null),W($u,qu),tp&&tp.m($u,null),_u[17]($u),Yu=!0},p(op,[sp]){Ju&&Ju.p&&(!Yu||sp&2560)&&un(Ju,_c,op,op[11],Yu?cn(_c,op[11],sp,F1):dn(op[11]),fl),Zu&&Zu.p&&(!Yu||sp&2560)&&un(Zu,Xu,op,op[11],Yu?cn(Xu,op[11],sp,H1):dn(op[11]),dl),_h&&_h.p&&(!Yu||sp&2560)&&un(_h,Xc,op,op[11],Yu?cn(Xc,op[11],sp,Q1):dn(op[11]),ul),np&&np.p&&(!Yu||sp&2560)&&un(np,ep,op,op[11],Yu?cn(ep,op[11],sp,R1):dn(op[11]),cl),sp&4&&(Gu=go(op[2])),Gu?ap?ap.p(op,sp):(ap=hl(op),ap.c(),ap.m($u,Uu)):ap&&(ap.d(1),ap=null),sp&4&&(Hu=Ao(op[2])),Hu?lp?lp.p(op,sp):(lp=pl(op),lp.c(),lp.m($u,Wu)):lp&&(lp.d(1),lp=null),sp&4&&(Qu=vo(op[2])),Qu?up?up.p(op,sp):(up=ml(op),up.c(),up.m($u,qu)):up&&(up.d(1),up=null),tp&&tp.p&&(!Yu||sp&2560)&&un(tp,_f,op,op[11],Yu?cn(_f,op[11],sp,O1):dn(op[11]),ll),Vi($u,rp=_e(ip,[(!Yu||sp&3&&Ku!==(Ku=as(`${op[1]}${op[0]?` ${op[0]}`:""}`)))&&{class:Ku},sp&8&&op[3]]))},i(op){Yu||(z(Ju,op),z(Zu,op),z(_h,op),z(np,op),z(tp,op),Yu=!0)},o(op){H(Ju,op),H(Zu,op),H(_h,op),H(np,op),H(tp,op),Yu=!1},d(op){op&&Q($u),Ju&&Ju.d(op),Zu&&Zu.d(op),_h&&_h.d(op),np&&np.d(op),ap&&ap.d(),lp&&lp.d(),up&&up.d(),tp&&tp.d(op),_u[17](null)}}}function G1(_u,$u,Ru){const Ou=["class","swiper"];let Fu=Ui($u,Ou),{$$slots:Nu={},$$scope:Vu}=$u;const Gu=ef();let{class:Uu=void 0}=$u,Hu="swiper",Wu=!1,Qu=null,qu=null,Ku,Yu,_c,Ju,Xu=null,Zu=null,Xc=null,_h=null,ep=null,np={slides:[]};function ap(){return Qu}const lp=cp=>{Ru(9,np=cp),nf().then(()=>{Qu.$wrapperEl.children(".swiper-slide").each(hp=>{hp.onSwiper&&hp.onSwiper(Qu)}),Qu.updateSlides(),Qu.updateProgress(),Qu.updateSlidesClasses(),Qu.lazy&&Qu.params.lazy.enabled&&Qu.lazy.load()})},up=()=>{Ku=M1(Fu),Ru(2,Yu=Ku.params),_c=Ku.passedParams,Ru(3,Ju=Ku.rest)};up(),qu=_c;const _f=()=>{Wu=!0};if(Yu.onAny=(cp,...hp)=>{Gu(cp,hp)},Object.assign(Yu.on,{_beforeBreakpoint:_f,_containerClasses(cp,hp){Ru(1,Hu=hp)}}),Qu=new nt(Yu),no("swiper",Qu),Qu.virtual&&Qu.params.virtual.enabled){const cp={cache:!1,renderExternal:hp=>{lp(hp),Yu.virtual&&Yu.virtual.renderExternal&&Yu.virtual.renderExternal(hp)},renderExternalUpdate:!1};qt(Qu.params.virtual,cp),qt(Qu.originalParams.virtual,cp)}mt(()=>{!Xu||(z1({el:Xu,nextEl:Xc,prevEl:Zu,paginationEl:ep,scrollbarEl:_h,swiper:Qu},Yu),Gu("swiper",[Qu]),!Yu.virtual&&Qu.slides.each(cp=>{cp.onSwiper&&cp.onSwiper(Qu)}))}),To(()=>{if(!Qu)return;up();const cp=j1(_c,qu);(cp.length||Wu)&&Qu&&!Qu.destroyed&&B1({swiper:Qu,passedParams:_c,changedParams:cp,nextEl:Xc,prevEl:Zu,scrollbarEl:_h,paginationEl:ep}),Wu=!1,qu=_c}),tn(()=>{typeof window<"u"&&Qu&&!Qu.destroyed&&Qu.destroy(!0,!1)});function tp(cp){Xe[cp?"unshift":"push"](()=>{Zu=cp,Ru(5,Zu)})}function ip(cp){Xe[cp?"unshift":"push"](()=>{Xc=cp,Ru(6,Xc)})}function rp(cp){Xe[cp?"unshift":"push"](()=>{_h=cp,Ru(7,_h)})}function op(cp){Xe[cp?"unshift":"push"](()=>{ep=cp,Ru(8,ep)})}function sp(cp){Xe[cp?"unshift":"push"](()=>{Xu=cp,Ru(4,Xu)})}return _u.$$set=cp=>{$u=ze(ze({},$u),dc(cp)),Ru(27,Fu=Ui($u,Ou)),"class"in cp&&Ru(0,Uu=cp.class),"$$scope"in cp&&Ru(11,Vu=cp.$$scope)},[Uu,Hu,Yu,Ju,Xu,Zu,Xc,_h,ep,np,ap,Vu,Nu,tp,ip,rp,op,sp]}class W1 extends fe{constructor($u){super(),de(this,$u,G1,N1,ue,{class:0,swiper:10})}get swiper(){return this.$$.ctx[10]}}const X1=_u=>({data:_u&32}),gl=_u=>({data:_u[5]}),Y1=_u=>({data:_u&32}),vl=_u=>({data:_u[5]});function _1(_u){let $u;const Ru=_u[8].default,Ou=ln(Ru,_u,_u[7],gl);return{c(){Ou&&Ou.c()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),$u=!0},p(Fu,Nu){Ou&&Ou.p&&(!$u||Nu&160)&&un(Ou,Ru,Fu,Fu[7],$u?cn(Ru,Fu[7],Nu,X1):dn(Fu[7]),gl)},i(Fu){$u||(z(Ou,Fu),$u=!0)},o(Fu){H(Ou,Fu),$u=!1},d(Fu){Ou&&Ou.d(Fu)}}}function U1(_u){let $u,Ru,Ou;const Fu=_u[8].default,Nu=ln(Fu,_u,_u[7],vl);return{c(){$u=G("div"),Nu&&Nu.c(),P($u,"class","swiper-zoom-container"),P($u,"data-swiper-zoom",Ru=typeof _u[0]=="number"?_u[0]:void 0)},m(Vu,Gu){F(Vu,$u,Gu),Nu&&Nu.m($u,null),Ou=!0},p(Vu,Gu){Nu&&Nu.p&&(!Ou||Gu&160)&&un(Nu,Fu,Vu,Vu[7],Ou?cn(Fu,Vu[7],Gu,Y1):dn(Vu[7]),vl),(!Ou||Gu&1&&Ru!==(Ru=typeof Vu[0]=="number"?Vu[0]:void 0))&&P($u,"data-swiper-zoom",Ru)},i(Vu){Ou||(z(Nu,Vu),Ou=!0)},o(Vu){H(Nu,Vu),Ou=!1},d(Vu){Vu&&Q($u),Nu&&Nu.d(Vu)}}}function V1(_u){let $u,Ru,Ou,Fu,Nu;const Vu=[U1,_1],Gu=[];function Uu(Qu,qu){return Qu[0]?0:1}Ru=Uu(_u),Ou=Gu[Ru]=Vu[Ru](_u);let Hu=[{class:Fu=as(`${_u[3]}${_u[2]?` ${_u[2]}`:""}`)},{"data-swiper-slide-index":_u[1]},_u[6]],Wu={};for(let Qu=0;Qu<Hu.length;Qu+=1)Wu=ze(Wu,Hu[Qu]);return{c(){$u=G("div"),Ou.c(),Vi($u,Wu)},m(Qu,qu){F(Qu,$u,qu),Gu[Ru].m($u,null),_u[9]($u),Nu=!0},p(Qu,[qu]){let Ku=Ru;Ru=Uu(Qu),Ru===Ku?Gu[Ru].p(Qu,qu):(ve(),H(Gu[Ku],1,1,()=>{Gu[Ku]=null}),Ae(),Ou=Gu[Ru],Ou?Ou.p(Qu,qu):(Ou=Gu[Ru]=Vu[Ru](Qu),Ou.c()),z(Ou,1),Ou.m($u,null)),Vi($u,Wu=_e(Hu,[(!Nu||qu&12&&Fu!==(Fu=as(`${Qu[3]}${Qu[2]?` ${Qu[2]}`:""}`)))&&{class:Fu},(!Nu||qu&2)&&{"data-swiper-slide-index":Qu[1]},qu&64&&Qu[6]]))},i(Qu){Nu||(z(Ou),Nu=!0)},o(Qu){H(Ou),Nu=!1},d(Qu){Qu&&Q($u),Gu[Ru].d(),_u[9](null)}}}function J1(_u,$u,Ru){let Ou;const Fu=["zoom","virtualIndex","class"];let Nu=Ui($u,Fu),{$$slots:Vu={},$$scope:Gu}=$u,{zoom:Uu=void 0}=$u,{virtualIndex:Hu=void 0}=$u,{class:Wu=void 0}=$u,Qu=null,qu="swiper-slide",Ku=ti("swiper"),Yu=!1;const _c=(Xc,_h,ep)=>{_h===Qu&&Ru(3,qu=ep)},Ju=()=>{!Ku||Yu||(Ku.on("_slideClass",_c),Yu=!0)},Xu=()=>{!Ku||(Ku.off("_slideClass",_c),Yu=!1)};mt(()=>{typeof Hu>"u"||(Ru(4,Qu.onSwiper=Xc=>{Ku=Xc,Ju()},Qu),Ju())}),To(()=>{if(!(!Qu||!Ku)){if(Ku.destroyed){qu!=="swiper-slide"&&Ru(3,qu="swiper-slide");return}Ju()}}),ko(()=>{Ju()}),tn(()=>{!Ku||Xu()});function Zu(Xc){Xe[Xc?"unshift":"push"](()=>{Qu=Xc,Ru(4,Qu)})}return _u.$$set=Xc=>{$u=ze(ze({},$u),dc(Xc)),Ru(6,Nu=Ui($u,Fu)),"zoom"in Xc&&Ru(0,Uu=Xc.zoom),"virtualIndex"in Xc&&Ru(1,Hu=Xc.virtualIndex),"class"in Xc&&Ru(2,Wu=Xc.class),"$$scope"in Xc&&Ru(7,Gu=Xc.$$scope)},_u.$$.update=()=>{_u.$$.dirty&8&&Ru(5,Ou={isActive:qu.indexOf("swiper-slide-active")>=0||qu.indexOf("swiper-slide-duplicate-active")>=0,isVisible:qu.indexOf("swiper-slide-visible")>=0,isDuplicate:qu.indexOf("swiper-slide-duplicate")>=0,isPrev:qu.indexOf("swiper-slide-prev")>=0||qu.indexOf("swiper-slide-duplicate-prev")>=0,isNext:qu.indexOf("swiper-slide-next")>=0||qu.indexOf("swiper-slide-duplicate-next")>=0})},[Uu,Hu,Wu,qu,Qu,Ou,Nu,Gu,Vu,Zu]}class Z1 extends fe{constructor($u){super(),de(this,$u,J1,V1,ue,{zoom:0,virtualIndex:1,class:2})}}function q1(_u){me(_u,"svelte-cwtvzu",".media-item.svelte-cwtvzu.svelte-cwtvzu{height:100%}.media-content.svelte-cwtvzu.svelte-cwtvzu{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.video-icon.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-cwtvzu.svelte-cwtvzu{display:none;pointer-events:auto;position:absolute;width:100%;height:100%;top:0;left:0}.video-play-button-container.showPlayButton.svelte-cwtvzu.svelte-cwtvzu{display:block}.video-icon.large.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem}.video-icon.small.svelte-cwtvzu.svelte-cwtvzu{width:1.75rem;height:1.75rem}.video-icon.svelte-cwtvzu .video-icon-img.svelte-cwtvzu{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-cwtvzu .video-icon-img.canPlay.svelte-cwtvzu{cursor:pointer}")}function Al(_u){let $u;function Ru(Nu,Vu){if(Nu[0].type==="Image")return $1;if(Nu[0].type==="Video")return K1}let Ou=Ru(_u),Fu=Ou&&Ou(_u);return{c(){$u=G("div"),Fu&&Fu.c(),P($u,"class","media-item svelte-cwtvzu")},m(Nu,Vu){F(Nu,$u,Vu),Fu&&Fu.m($u,null)},p(Nu,Vu){Ou===(Ou=Ru(Nu))&&Fu?Fu.p(Nu,Vu):(Fu&&Fu.d(1),Fu=Ou&&Ou(Nu),Fu&&(Fu.c(),Fu.m($u,null)))},d(Nu){Nu&&Q($u),Fu&&Fu.d()}}}function K1(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu;return{c(){var qu;$u=G("video"),Vu=q(),Gu=G("div"),Uu=G("div"),Hu=G("div"),P($u,"class","media-content svelte-cwtvzu"),P($u,"style",Ru=`object-fit: ${_u[3]};`),Tt($u.src,Ou=_u[0].url+"#t=0.1")||P($u,"src",Ou),P($u,"poster",Fu=(qu=_u[0].videoCoverUrl)!=null?qu:void 0),P($u,"preload",Nu=_u[0].videoCoverUrl?void 0:"auto"),$u.playsInline=!0,P($u,"paused",""),$u.loop=!1,P($u,"crossorigin",""),$u.controls=!1,ie($u,"showPlayButton",_u[5]),P(Hu,"class","video-icon-img svelte-cwtvzu"),X(Hu,"background-image","url("+(_u[1]==="large"?Va:Ja)+")"),ie(Hu,"canPlay",_u[2]),P(Uu,"class","video-icon svelte-cwtvzu"),ie(Uu,"large",_u[1]==="large"),ie(Uu,"small",_u[1]==="small"),P(Gu,"class","video-play-button-container svelte-cwtvzu"),ie(Gu,"showPlayButton",_u[5])},m(qu,Ku){F(qu,$u,Ku),_u[7]($u),F(qu,Vu,Ku),F(qu,Gu,Ku),W(Gu,Uu),W(Uu,Hu),Wu||(Qu=[je($u,"click",_u[6]),je(Hu,"click",_u[8])],Wu=!0)},p(qu,Ku){var Yu;Ku&8&&Ru!==(Ru=`object-fit: ${qu[3]};`)&&P($u,"style",Ru),Ku&1&&!Tt($u.src,Ou=qu[0].url+"#t=0.1")&&P($u,"src",Ou),Ku&1&&Fu!==(Fu=(Yu=qu[0].videoCoverUrl)!=null?Yu:void 0)&&P($u,"poster",Fu),Ku&1&&Nu!==(Nu=qu[0].videoCoverUrl?void 0:"auto")&&P($u,"preload",Nu),Ku&32&&ie($u,"showPlayButton",qu[5]),Ku&2&&X(Hu,"background-image","url("+(qu[1]==="large"?Va:Ja)+")"),Ku&4&&ie(Hu,"canPlay",qu[2]),Ku&2&&ie(Uu,"large",qu[1]==="large"),Ku&2&&ie(Uu,"small",qu[1]==="small"),Ku&32&&ie(Gu,"showPlayButton",qu[5])},d(qu){qu&&Q($u),_u[7](null),qu&&Q(Vu),qu&&Q(Gu),Wu=!1,Gt(Qu)}}}function $1(_u){let $u,Ru,Ou,Fu;return{c(){$u=G("img"),P($u,"class","media-content svelte-cwtvzu"),P($u,"style",Ru=`object-fit: ${_u[3]};`),Tt($u.src,Ou=_u[0].url)||P($u,"src",Ou),P($u,"alt",Fu=_u[0].name)},m(Nu,Vu){F(Nu,$u,Vu)},p(Nu,Vu){Vu&8&&Ru!==(Ru=`object-fit: ${Nu[3]};`)&&P($u,"style",Ru),Vu&1&&!Tt($u.src,Ou=Nu[0].url)&&P($u,"src",Ou),Vu&1&&Fu!==(Fu=Nu[0].name)&&P($u,"alt",Fu)},d(Nu){Nu&&Q($u)}}}function eb(_u){let $u,Ru=_u[0]&&Al(_u);return{c(){Ru&&Ru.c(),$u=Pe()},m(Ou,Fu){Ru&&Ru.m(Ou,Fu),F(Ou,$u,Fu)},p(Ou,[Fu]){Ou[0]?Ru?Ru.p(Ou,Fu):(Ru=Al(Ou),Ru.c(),Ru.m($u.parentNode,$u)):Ru&&(Ru.d(1),Ru=null)},i:ce,o:ce,d(Ou){Ru&&Ru.d(Ou),Ou&&Q($u)}}}function tb(_u,$u,Ru){let{media:Ou}=$u,{playButtonIfNeed:Fu="small"}=$u,{canPlay:Nu=!0}=$u,{objectFit:Vu="cover"}=$u,Gu,Uu=!1;const Hu=()=>Gu==null?void 0:Gu.pause();function Wu(qu){Xe[qu?"unshift":"push"](()=>{Gu=qu,Ru(4,Gu)})}const Qu=()=>{!Nu||Gu&&Gu.play()};return _u.$$set=qu=>{"media"in qu&&Ru(0,Ou=qu.media),"playButtonIfNeed"in qu&&Ru(1,Fu=qu.playButtonIfNeed),"canPlay"in qu&&Ru(2,Nu=qu.canPlay),"objectFit"in qu&&Ru(3,Vu=qu.objectFit)},_u.$$.update=()=>{_u.$$.dirty&16&&Gu&&(Ru(5,Uu=Gu.paused),Gu.addEventListener("play",()=>{Ru(5,Uu=!1)}),Gu.addEventListener("pause",()=>{Ru(5,Uu=!0)}))},[Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu]}class Mu extends fe{constructor($u){super(),de(this,$u,tb,eb,ue,{media:0,playButtonIfNeed:1,canPlay:2,objectFit:3},q1)}}function nb(_u){me(_u,"svelte-ai0lv9",".media.svelte-ai0lv9{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}")}function bl(_u,$u,Ru){const Ou=_u.slice();return Ou[23]=$u[Ru],Ou}function yl(_u){let $u,Ru,Ou,Fu,Nu,Vu;const Gu=[sb,ib],Uu=[];function Hu(Wu,Qu){return Wu[13]?0:1}return Ru=Hu(_u),Ou=Uu[Ru]=Gu[Ru](_u),{c(){$u=G("div"),Ou.c(),P($u,"class","media svelte-ai0lv9"),ie($u,"unfolded",_u[4])},m(Wu,Qu){F(Wu,$u,Qu),Uu[Ru].m($u,null),Vu=!0},p(Wu,Qu){_u=Wu;let qu=Ru;Ru=Hu(_u),Ru===qu?Uu[Ru].p(_u,Qu):(ve(),H(Uu[qu],1,1,()=>{Uu[qu]=null}),Ae(),Ou=Uu[Ru],Ou?Ou.p(_u,Qu):(Ou=Uu[Ru]=Gu[Ru](_u),Ou.c()),z(Ou,1),Ou.m($u,null)),(!Vu||Qu&16)&&ie($u,"unfolded",_u[4])},i(Wu){Vu||(z(Ou),Wu&&Oe(()=>{Nu&&Nu.end(1),Fu=bn($u,xr,_u[5]?{y:4,duration:_u[3],delay:_u[1],easing:Ln}:void 0),Fu.start()}),Vu=!0)},o(Wu){H(Ou),Fu&&Fu.invalidate(),Wu&&(Nu=jn($u,xr,_u[5]?{y:4,duration:_u[3],delay:_u[2],easing:Ln}:void 0)),Vu=!1},d(Wu){Wu&&Q($u),Uu[Ru].d(),Wu&&Nu&&Nu.end()}}}function ib(_u){let $u,Ru;return $u=new Mu({props:{media:_u[0][0],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&1&&(Nu.media=Ou[0][0]),Fu&256&&(Nu.objectFit=Ou[8]),Fu&64&&(Nu.playButtonIfNeed=Ou[6]),Fu&128&&(Nu.canPlay=Ou[7]),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function sb(_u){let $u,Ru;return $u=new W1({props:{style:"height: 100%",modules:[L1],spaceBetween:30,autoplay:_u[14]?Ne({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1,loop:!0,$$slots:{default:[rb]},$$scope:{ctx:_u}}}),$u.$on("init",_u[19]),$u.$on("slideChange",_u[20]),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&16384&&(Nu.autoplay=Ou[14]?Ne({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1),Fu&67111360&&(Nu.$$scope={dirty:Fu,ctx:Ou}),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function ob(_u){let $u,Ru,Ou;return $u=new Mu({props:{media:_u[23],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){re($u.$$.fragment),Ru=q()},m(Fu,Nu){se($u,Fu,Nu),F(Fu,Ru,Nu),Ou=!0},p(Fu,Nu){const Vu={};Nu&2048&&(Vu.media=Fu[23]),Nu&256&&(Vu.objectFit=Fu[8]),Nu&64&&(Vu.playButtonIfNeed=Fu[6]),Nu&128&&(Vu.canPlay=Fu[7]),$u.$set(Vu)},i(Fu){Ou||(z($u.$$.fragment,Fu),Ou=!0)},o(Fu){H($u.$$.fragment,Fu),Ou=!1},d(Fu){oe($u,Fu),Fu&&Q(Ru)}}}function wl(_u){let $u,Ru;return $u=new Z1({props:{$$slots:{default:[ob]},$$scope:{ctx:_u}}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&67111360&&(Nu.$$scope={dirty:Fu,ctx:Ou}),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function rb(_u){let $u,Ru,Ou=_u[11],Fu=[];for(let Vu=0;Vu<Ou.length;Vu+=1)Fu[Vu]=wl(bl(_u,Ou,Vu));const Nu=Vu=>H(Fu[Vu],1,1,()=>{Fu[Vu]=null});return{c(){for(let Vu=0;Vu<Fu.length;Vu+=1)Fu[Vu].c();$u=Pe()},m(Vu,Gu){for(let Uu=0;Uu<Fu.length;Uu+=1)Fu[Uu].m(Vu,Gu);F(Vu,$u,Gu),Ru=!0},p(Vu,Gu){if(Gu&2496){Ou=Vu[11];let Uu;for(Uu=0;Uu<Ou.length;Uu+=1){const Hu=bl(Vu,Ou,Uu);Fu[Uu]?(Fu[Uu].p(Hu,Gu),z(Fu[Uu],1)):(Fu[Uu]=wl(Hu),Fu[Uu].c(),z(Fu[Uu],1),Fu[Uu].m($u.parentNode,$u))}for(ve(),Uu=Ou.length;Uu<Fu.length;Uu+=1)Nu(Uu);Ae()}},i(Vu){if(!Ru){for(let Gu=0;Gu<Ou.length;Gu+=1)z(Fu[Gu]);Ru=!0}},o(Vu){Fu=Fu.filter(Boolean);for(let Gu=0;Gu<Fu.length;Gu+=1)H(Fu[Gu]);Ru=!1},d(Vu){Dt(Fu,Vu),Vu&&Q($u)}}}function ab(_u){let $u,Ru,Ou=_u[4]&&yl(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[4]?Ou?(Ou.p(Fu,Nu),Nu&16&&z(Ou,1)):(Ou=yl(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function lb(_u,$u,Ru){let Ou,Fu,Nu,{tag:Vu}=$u,{mediaData:Gu}=$u,{inDelay:Uu=0}=$u,{outDelay:Hu=0}=$u,{duration:Wu=0}=$u,{unfolded:Qu=!0}=$u,{animation:qu=!0}=$u,{playButtonIfNeed:Ku="small"}=$u,{canPlay:Yu=!0}=$u,{objectFit:_c="cover"}=$u,{enableCarousel:Ju=!0}=$u,{autoplayConfig:Xu={autoplay:!0,autoplayVideo:!1}}=$u;const Zu=ti("mediaStore"),Xc=ti("hooks");let _h;function ep(_f){!Ou||!_h||(Zu.set({currentMediaUrl:this.src}),Xc.emit("playStateChange",{event:_f,state:"playing",tag:Vu,mediaInstance:this}),_h.autoplay.stop())}function np(_f){!Ou||!_h||(Xc.emit("playStateChange",{event:_f,state:"paused",tag:Vu,mediaInstance:this}),_h.autoplay.running||_h.autoplay.start())}let ap=null;const lp=_f=>{Ru(10,_h=_f.detail[0])},up=async _f=>{var tp,ip,rp;if(!Nu||!Xu.autoplayVideo)return;const op=_f.detail[0];if(!op)return;const sp=op.realIndex;if(sp===ap)return;Ru(12,ap=sp);const cp=Fu[sp];if(!cp||cp.type!=="Video")return;op.autoplay.stop(),op.slides.map(dp=>dp.querySelector("video")).filter(mn).forEach(dp=>dp.pause());const hp=(tp=op.slides[op.activeIndex])==null?void 0:tp.querySelector("video");if(hp&&(hp.removeEventListener("play",ep),hp.removeEventListener("pause",np),hp.addEventListener("play",ep),hp.addEventListener("pause",np)),hp){hp.addEventListener("click",()=>hp.pause());const dp=(rp=(ip=hp.parentElement)==null?void 0:ip.getElementsByClassName("video-play-button-container"))==null?void 0:rp[0];hp.addEventListener("play",()=>dp==null?void 0:dp.classList.remove("showPlayButton")),hp.addEventListener("pause",()=>dp==null?void 0:dp.classList.add("showPlayButton")),dp&&(hp.paused?dp.classList.add("showPlayButton"):dp.classList.remove("showPlayButton"),dp.addEventListener("click",()=>hp.play()))}};return _u.$$set=_f=>{"tag"in _f&&Ru(17,Vu=_f.tag),"mediaData"in _f&&Ru(0,Gu=_f.mediaData),"inDelay"in _f&&Ru(1,Uu=_f.inDelay),"outDelay"in _f&&Ru(2,Hu=_f.outDelay),"duration"in _f&&Ru(3,Wu=_f.duration),"unfolded"in _f&&Ru(4,Qu=_f.unfolded),"animation"in _f&&Ru(5,qu=_f.animation),"playButtonIfNeed"in _f&&Ru(6,Ku=_f.playButtonIfNeed),"canPlay"in _f&&Ru(7,Yu=_f.canPlay),"objectFit"in _f&&Ru(8,_c=_f.objectFit),"enableCarousel"in _f&&Ru(18,Ju=_f.enableCarousel),"autoplayConfig"in _f&&Ru(9,Xu=_f.autoplayConfig)},_u.$$.update=()=>{_u.$$.dirty&262145&&Ru(13,Ou=Ju&&(Gu==null?void 0:Gu.length)>1),_u.$$.dirty&1&&Ru(11,Fu=Gu),_u.$$.dirty&2560&&Ru(14,Nu=Fu.length>1&&Xu.autoplay),_u.$$.dirty&1024&&_h&&_h.slides.forEach(_f=>{const tp=_f.querySelector("video");tp&&Zu.subscribe(({currentMediaUrl:ip})=>{ip!==tp.src&&tp.pause()})})},[Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Xu,_h,Fu,ap,Ou,Nu,ep,np,Vu,Ju,lp,up]}class zu extends fe{constructor($u){super(),de(this,$u,lb,ab,ue,{tag:17,mediaData:0,inDelay:1,outDelay:2,duration:3,unfolded:4,animation:5,playButtonIfNeed:6,canPlay:7,objectFit:8,enableCarousel:18,autoplayConfig:9},nb)}}function cb(_u){me(_u,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function El(_u,$u,Ru){const Ou=_u.slice();return Ou[8]=$u[Ru].id,Ou[1]=$u[Ru].content,Ou}function Cl(_u){let $u,Ru,Ou,Fu,Nu,Vu=[],Gu=new Map,Uu,Hu,Wu;$u=new vt({props:{visible:_u[4],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Fu=new kv({props:{unfolded:_u[4],duration:1e3,outDelay:400}});let Qu=_u[2];const qu=Yu=>Yu[8];for(let Yu=0;Yu<Qu.length;Yu+=1){let _c=El(_u,Qu,Yu),Ju=qu(_c);Gu.set(Ju,Vu[Yu]=Pl(Ju,_c))}let Ku=_u[3]&&Il(_u);return{c(){re($u.$$.fragment),Ru=q(),Ou=G("div"),re(Fu.$$.fragment),Nu=q();for(let Yu=0;Yu<Vu.length;Yu+=1)Vu[Yu].c();Uu=q(),Ku&&Ku.c(),Hu=Pe(),P(Ou,"class","line svelte-1f7m1lj")},m(Yu,_c){se($u,Yu,_c),F(Yu,Ru,_c),F(Yu,Ou,_c),se(Fu,Ou,null),F(Yu,Nu,_c);for(let Ju=0;Ju<Vu.length;Ju+=1)Vu[Ju].m(Yu,_c);F(Yu,Uu,_c),Ku&&Ku.m(Yu,_c),F(Yu,Hu,_c),Wu=!0},p(Yu,_c){const Ju={};_c&16&&(Ju.visible=Yu[4]),$u.$set(Ju);const Xu={};_c&16&&(Xu.unfolded=Yu[4]),Fu.$set(Xu),_c&20&&(Qu=Yu[2],ve(),Vu=gt(Vu,_c,qu,1,Yu,Qu,Gu,Uu.parentNode,Wt,Pl,Uu,El),Ae()),Yu[3]?Ku?(Ku.p(Yu,_c),_c&8&&z(Ku,1)):(Ku=Il(Yu),Ku.c(),z(Ku,1),Ku.m(Hu.parentNode,Hu)):Ku&&(ve(),H(Ku,1,1,()=>{Ku=null}),Ae())},i(Yu){if(!Wu){z($u.$$.fragment,Yu),z(Fu.$$.fragment,Yu);for(let _c=0;_c<Qu.length;_c+=1)z(Vu[_c]);z(Ku),Wu=!0}},o(Yu){H($u.$$.fragment,Yu),H(Fu.$$.fragment,Yu);for(let _c=0;_c<Vu.length;_c+=1)H(Vu[_c]);H(Ku),Wu=!1},d(Yu){oe($u,Yu),Yu&&Q(Ru),Yu&&Q(Ou),oe(Fu),Yu&&Q(Nu);for(let _c=0;_c<Vu.length;_c+=1)Vu[_c].d(Yu);Yu&&Q(Uu),Ku&&Ku.d(Yu),Yu&&Q(Hu)}}}function Pl(_u,$u){let Ru,Ou,Fu;return Ou=new Cu({props:{unfolded:$u[4],content:$u[1],inDelay:500}}),{key:_u,first:null,c(){Ru=G("div"),re(Ou.$$.fragment),P(Ru,"class","text svelte-1f7m1lj"),this.first=Ru},m(Nu,Vu){F(Nu,Ru,Vu),se(Ou,Ru,null),Fu=!0},p(Nu,Vu){$u=Nu;const Gu={};Vu&16&&(Gu.unfolded=$u[4]),Vu&4&&(Gu.content=$u[1]),Ou.$set(Gu)},i(Nu){Fu||(z(Ou.$$.fragment,Nu),Fu=!0)},o(Nu){H(Ou.$$.fragment,Nu),Fu=!1},d(Nu){Nu&&Q(Ru),oe(Ou)}}}function Il(_u){let $u,Ru,Ou;return Ru=new zu({props:{autoplayConfig:{autoplay:!1},unfolded:_u[4],mediaData:_u[3],tag:_u[0],enableCarousel:!1,canPlay:!1,playButtonIfNeed:"small",inDelay:500,duration:500}}),{c(){$u=G("div"),re(Ru.$$.fragment),P($u,"class","media-wrapper svelte-1f7m1lj")},m(Fu,Nu){F(Fu,$u,Nu),se(Ru,$u,null),Ou=!0},p(Fu,Nu){const Vu={};Nu&16&&(Vu.unfolded=Fu[4]),Nu&8&&(Vu.mediaData=Fu[3]),Nu&1&&(Vu.tag=Fu[0]),Ru.$set(Vu)},i(Fu){Ou||(z(Ru.$$.fragment,Fu),Ou=!0)},o(Fu){H(Ru.$$.fragment,Fu),Ou=!1},d(Fu){Fu&&Q($u),oe(Ru)}}}function ub(_u){let $u,Ru,Ou=_u[0].state&&Cl(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[0].state?Ou?(Ou.p(Fu,Nu),Nu&1&&z(Ou,1)):(Ou=Cl(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function db(_u,$u,Ru){let Ou,Fu,Nu;var Vu,Gu,Uu;let{tag:Hu}=$u,Wu;return _u.$$set=Qu=>{"tag"in Qu&&Ru(0,Hu=Qu.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Ru(4,Ou=Hu.state?Hu.state.unfolded:!1),_u.$$.dirty&225&&Ru(1,Fu=(Ru(6,Gu=Ru(5,Vu=Hu.data.text)===null||Vu===void 0?void 0:Vu.length)!==null&&Gu!==void 0?Gu:0)>7?(Ru(7,Uu=Hu.data.text)===null||Uu===void 0?void 0:Uu.substring(0,6))+"...":Hu.data.text),_u.$$.dirty&1&&Ru(3,Nu=Hu.data.mediaData),_u.$$.dirty&2&&Ru(2,Wu=Fu?[{id:it(),content:Fu}]:[])},[Hu,Fu,Wu,Nu,Ou,Vu,Gu,Uu]}class fb extends fe{constructor($u){super(),de(this,$u,db,ub,ue,{tag:0},cb)}}function hb(_u){me(_u,"svelte-8mby9k",".svelte-8mby9k.svelte-8mby9k{box-sizing:border-box}.marketing.svelte-8mby9k.svelte-8mby9k{transform:translateY(-100%)}.content.svelte-8mby9k .headerImage.svelte-8mby9k{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.line.svelte-8mby9k.svelte-8mby9k{position:absolute;height:2.0625rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.content.svelte-8mby9k.svelte-8mby9k{background-color:white;position:relative;display:flex;flex-direction:column;min-width:11.125rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition:all 500ms}.title.svelte-8mby9k.svelte-8mby9k{position:absolute;background-color:white;border-radius:0.25rem;width:100%;top:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.title.svelte-8mby9k .text.svelte-8mby9k{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem;color:#000}.footer.svelte-8mby9k.svelte-8mby9k{position:relative;padding-left:0.75rem;padding-right:0.75rem;width:100%;height:1.375rem;display:flex;align-items:center}.footer.svelte-8mby9k .goto-button.svelte-8mby9k{flex-shrink:0;white-space:nowrap;background-image:linear-gradient(to right, rgba(87, 144, 253, 1) 0, rgba(42, 114, 254, 1) 100%);color:#fff;font-size:0.625rem;border-radius:0.875rem;font-weight:bold;padding-left:0.5rem;padding-right:0.5rem;height:1.25rem;margin-left:auto;display:flex;align-items:center}.footer.svelte-8mby9k .goto-icon.svelte-8mby9k::after{content:'';display:inline-block;width:0.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAJ3RSTlMAFNO2pYt4bErz8uP6ysawgVtBPDcR5C4s2L6ZmJBzZGJXUyEeDws/0G2zAAAAkklEQVQ4y+3TRw6DMBAF0OAeJ3QCpCe0uf8NwRILLBYfiS1/aT3JoymnI+sERZ5VCH0iVto3QDfBLmeSSMUTogRV9bBEpJAKaYpGijn13aTSLeraeG9D0NZFZv4/rRL5FDHnITlllqjv6tykWsmX4JHr05y7j6oFKq2P8He48B0tAM0EY0EDxquClw6vLz6EI35GmwwSZpe+WOgAAAAASUVORK5CYII=);background-size:100% auto;background-repeat:no-repeat}.price.svelte-8mby9k.svelte-8mby9k{flex-shrink:0;margin-right:0.75rem;white-space:nowrap;color:#ff6600;display:flex;align-items:baseline}.price.svelte-8mby9k .value.svelte-8mby9k{position:relative;top:0.0625rem;font-size:1.125rem;line-height:1.375rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.price.svelte-8mby9k .unit.svelte-8mby9k{padding-left:0.125rem;font-size:0.625rem}.tag.svelte-8mby9k.svelte-8mby9k{position:relative;background-color:white;display:flex;width:-moz-max-content;width:max-content;padding-left:0.75rem;padding-right:0.75rem;min-height:1.75rem}.tag.svelte-8mby9k .base-tag.svelte-8mby9k{height:1rem;margin-top:1.375rem;margin-bottom:0.5rem;margin-right:0.25rem;font-size:0.625rem;line-height:0.875rem;padding:0.0625rem 0.25rem;border-radius:0.125rem;overflow:hidden}.tag.svelte-8mby9k .primary-tag.svelte-8mby9k{background:#e5eefe;color:#0055ff}.tag.svelte-8mby9k .secondary-tag.svelte-8mby9k{background:rgba(255, 102, 0, 0.08);color:rgba(255, 102, 0, 1)}.unfolded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 1)}.folded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.unfolded.svelte-8mby9k .content.svelte-8mby9k{opacity:1}.folded.svelte-8mby9k .content.svelte-8mby9k{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}")}function xl(_u,$u,Ru){const Ou=_u.slice();return Ou[0]=$u[Ru],Ou}function Sl(_u,$u,Ru){const Ou=_u.slice();return Ou[0]=$u[Ru],Ou}function kl(_u){let $u,Ru=_u[0]+"",Ou;return{c(){$u=G("div"),Ou=Qe(Ru),P($u,"class","base-tag primary-tag svelte-8mby9k")},m(Fu,Nu){F(Fu,$u,Nu),W($u,Ou)},p(Fu,Nu){Nu&4&&Ru!==(Ru=Fu[0]+"")&&Ye(Ou,Ru)},d(Fu){Fu&&Q($u)}}}function Tl(_u){let $u,Ru=_u[0]&&kl(_u);return{c(){Ru&&Ru.c(),$u=Pe()},m(Ou,Fu){Ru&&Ru.m(Ou,Fu),F(Ou,$u,Fu)},p(Ou,Fu){Ou[0]?Ru?Ru.p(Ou,Fu):(Ru=kl(Ou),Ru.c(),Ru.m($u.parentNode,$u)):Ru&&(Ru.d(1),Ru=null)},d(Ou){Ru&&Ru.d(Ou),Ou&&Q($u)}}}function Dl(_u){let $u,Ru=_u[0]+"",Ou;return{c(){$u=G("div"),Ou=Qe(Ru),P($u,"class","base-tag secondary-tag svelte-8mby9k")},m(Fu,Nu){F(Fu,$u,Nu),W($u,Ou)},p(Fu,Nu){Nu&4&&Ru!==(Ru=Fu[0]+"")&&Ye(Ou,Ru)},d(Fu){Fu&&Q($u)}}}function Ll(_u){let $u,Ru=_u[0]&&Dl(_u);return{c(){Ru&&Ru.c(),$u=Pe()},m(Ou,Fu){Ru&&Ru.m(Ou,Fu),F(Ou,$u,Fu)},p(Ou,Fu){Ou[0]?Ru?Ru.p(Ou,Fu):(Ru=Dl(Ou),Ru.c(),Ru.m($u.parentNode,$u)):Ru&&(Ru.d(1),Ru=null)},d(Ou){Ru&&Ru.d(Ou),Ou&&Q($u)}}}function Ml(_u){let $u,Ru,Ou=_u[2].price.value+"",Fu,Nu,Vu=_u[2].price.unit&&zl(_u);return{c(){$u=G("div"),Ru=G("span"),Fu=Qe(Ou),Nu=q(),Vu&&Vu.c(),P(Ru,"class","value svelte-8mby9k"),P($u,"class","price svelte-8mby9k")},m(Gu,Uu){F(Gu,$u,Uu),W($u,Ru),W(Ru,Fu),W($u,Nu),Vu&&Vu.m($u,null)},p(Gu,Uu){Uu&4&&Ou!==(Ou=Gu[2].price.value+"")&&Ye(Fu,Ou),Gu[2].price.unit?Vu?Vu.p(Gu,Uu):(Vu=zl(Gu),Vu.c(),Vu.m($u,null)):Vu&&(Vu.d(1),Vu=null)},d(Gu){Gu&&Q($u),Vu&&Vu.d()}}}function zl(_u){let $u,Ru=_u[2].price.unit+"",Ou;return{c(){$u=G("span"),Ou=Qe(Ru),P($u,"class","unit svelte-8mby9k")},m(Fu,Nu){F(Fu,$u,Nu),W($u,Ou)},p(Fu,Nu){Nu&4&&Ru!==(Ru=Fu[2].price.unit+"")&&Ye(Ou,Ru)},d(Fu){Fu&&Q($u)}}}function jl(_u){let $u,Ru=_u[2].highlightText+"",Ou;return{c(){$u=G("div"),Ou=Qe(Ru),P($u,"class","goto-button goto-icon svelte-8mby9k")},m(Fu,Nu){F(Fu,$u,Nu),W($u,Ou)},p(Fu,Nu){Nu&4&&Ru!==(Ru=Fu[2].highlightText+"")&&Ye(Ou,Ru)},d(Fu){Fu&&Q($u)}}}function pb(_u){var $u,Ru;let Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu=_u[2].title+"",Zu,Xc,_h,ep,np;Fu=new vt({props:{visible:_u[1],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let ap=_u[2].brandTags||[],lp=[];for(let rp=0;rp<ap.length;rp+=1)lp[rp]=Tl(Sl(_u,ap,rp));let up=_u[2].tags||[],_f=[];for(let rp=0;rp<up.length;rp+=1)_f[rp]=Ll(xl(_u,up,rp));let tp=(($u=_u[2].price)==null?void 0:$u.value)!==void 0&&((Ru=_u[2].price)==null?void 0:Ru.value)!==null&&Ml(_u),ip=_u[2].highlightText&&jl(_u);return{c(){var rp,op;Ou=G("div"),re(Fu.$$.fragment),Nu=q(),Vu=G("div"),Gu=q(),Uu=G("div"),Hu=G("img"),Qu=q(),qu=G("div");for(let sp=0;sp<lp.length;sp+=1)lp[sp].c();Ku=q();for(let sp=0;sp<_f.length;sp+=1)_f[sp].c();Yu=q(),_c=G("div"),Ju=G("div"),Zu=Qe(Xu),Xc=q(),_h=G("div"),tp&&tp.c(),ep=q(),ip&&ip.c(),P(Vu,"class","line svelte-8mby9k"),X(Vu,"transition-delay",_u[1]?Qi+"ms":Hi+Ol-Bl-40+"ms"),P(Hu,"class","headerImage svelte-8mby9k"),Tt(Hu.src,Wu=_u[2].headerPictureUrl)||P(Hu,"src",Wu),P(Hu,"alt",""),P(qu,"class","tag svelte-8mby9k"),P(Ju,"class","text svelte-8mby9k"),P(_c,"class","title svelte-8mby9k"),P(_h,"class","footer svelte-8mby9k"),X(_h,"height",((rp=_u[2].price)==null?void 0:rp.value)!==void 0&&((op=_u[2].price)==null?void 0:op.value)!==null&&_u[2].highlightText?void 0:"1rem"),P(Uu,"class","content svelte-8mby9k"),X(Uu,"transition-delay",_u[1]?Qi+Hi+"ms":"0ms"),P(Ou,"class","marketing svelte-8mby9k"),ie(Ou,"unfolded",_u[1]),ie(Ou,"folded",_u[3])},m(rp,op){F(rp,Ou,op),se(Fu,Ou,null),W(Ou,Nu),W(Ou,Vu),W(Ou,Gu),W(Ou,Uu),W(Uu,Hu),W(Uu,Qu),W(Uu,qu);for(let sp=0;sp<lp.length;sp+=1)lp[sp].m(qu,null);W(qu,Ku);for(let sp=0;sp<_f.length;sp+=1)_f[sp].m(qu,null);W(Uu,Yu),W(Uu,_c),W(_c,Ju),W(Ju,Zu),W(Uu,Xc),W(Uu,_h),tp&&tp.m(_h,null),W(_h,ep),ip&&ip.m(_h,null),np=!0},p(rp,[op]){var sp,cp,hp,dp;const xp={};if(op&2&&(xp.visible=rp[1]),Fu.$set(xp),op&2&&X(Vu,"transition-delay",rp[1]?Qi+"ms":Hi+Ol-Bl-40+"ms"),(!np||op&4&&!Tt(Hu.src,Wu=rp[2].headerPictureUrl))&&P(Hu,"src",Wu),op&4){ap=rp[2].brandTags||[];let bp;for(bp=0;bp<ap.length;bp+=1){const Rp=Sl(rp,ap,bp);lp[bp]?lp[bp].p(Rp,op):(lp[bp]=Tl(Rp),lp[bp].c(),lp[bp].m(qu,Ku))}for(;bp<lp.length;bp+=1)lp[bp].d(1);lp.length=ap.length}if(op&4){up=rp[2].tags||[];let bp;for(bp=0;bp<up.length;bp+=1){const Rp=xl(rp,up,bp);_f[bp]?_f[bp].p(Rp,op):(_f[bp]=Ll(Rp),_f[bp].c(),_f[bp].m(qu,null))}for(;bp<_f.length;bp+=1)_f[bp].d(1);_f.length=up.length}(!np||op&4)&&Xu!==(Xu=rp[2].title+"")&&Ye(Zu,Xu),((sp=rp[2].price)==null?void 0:sp.value)!==void 0&&((cp=rp[2].price)==null?void 0:cp.value)!==null?tp?tp.p(rp,op):(tp=Ml(rp),tp.c(),tp.m(_h,ep)):tp&&(tp.d(1),tp=null),rp[2].highlightText?ip?ip.p(rp,op):(ip=jl(rp),ip.c(),ip.m(_h,null)):ip&&(ip.d(1),ip=null),op&4&&X(_h,"height",((hp=rp[2].price)==null?void 0:hp.value)!==void 0&&((dp=rp[2].price)==null?void 0:dp.value)!==null&&rp[2].highlightText?void 0:"1rem"),op&2&&X(Uu,"transition-delay",rp[1]?Qi+Hi+"ms":"0ms"),(!np||op&2)&&ie(Ou,"unfolded",rp[1]),(!np||op&8)&&ie(Ou,"folded",rp[3])},i(rp){np||(z(Fu.$$.fragment,rp),np=!0)},o(rp){H(Fu.$$.fragment,rp),np=!1},d(rp){rp&&Q(Ou),oe(Fu),Dt(lp,rp),Dt(_f,rp),tp&&tp.d(),ip&&ip.d()}}}const Qi=400,Bl=500,Hi=180,Ol=500;function mb(_u,$u,Ru){let Ou,Fu,Nu;var Vu,Gu;let{tag:Uu}=$u;return _u.$$set=Hu=>{"tag"in Hu&&Ru(0,Uu=Hu.tag)},_u.$$.update=()=>{_u.$$.dirty&49&&Ru(1,Ou=Ru(5,Gu=Ru(4,Vu=Uu.state)===null||Vu===void 0?void 0:Vu.unfolded)!==null&&Gu!==void 0?Gu:!1),_u.$$.dirty&2&&Ru(3,Fu=!Ou),_u.$$.dirty&1&&Ru(2,Nu=Uu.data)},[Uu,Ou,Nu,Fu,Vu,Gu]}class gb extends fe{constructor($u){super(),de(this,$u,mb,pb,ue,{tag:0},hb)}}function vb(_u){me(_u,"svelte-1ku3wt4",`.audio.svelte-1ku3wt4.svelte-1ku3wt4{position:relative;width:100%;height:100%;cursor:pointer}@keyframes svelte-1ku3wt4-playing{25%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='9' cy='9' r='8' transform='translate(-1 -1)' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}50%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.533 6.685L4.169 8.049l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}75%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.656 4.874l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .875-.333 1.67-.88 2.268l.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}}.paused.svelte-1ku3wt4 .audio-icon.svelte-1ku3wt4{animation:none}.audio-icon.svelte-1ku3wt4.svelte-1ku3wt4{width:100%;height:100%;border-radius:50%;background-size:100%;animation:svelte-1ku3wt4-playing 2s steps(1) infinite;background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm1.428 2.79l-.953.952a6.222 6.222 0 0 1 1.775 4.36c0 1.571-.58 3.006-1.538 4.103l-.184.202.793.794a7.344 7.344 0 0 0 2.21-5.26A7.341 7.341 0 0 0 9.428 2.79zM7.344 4.873l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .802-.28 1.537-.748 2.115l-.132.153.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}`)}function Rl(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu=!0,Hu,Wu,Qu,qu,Ku;return Ru=new vt({props:{center:!0,blurRadius:15,spreadRadius:6}}),{c(){$u=G("div"),re(Ru.$$.fragment),Ou=q(),Fu=G("div"),Nu=q(),Vu=G("audio"),P(Fu,"class","audio-icon svelte-1ku3wt4"),Vu.controls=!1,P(Vu,"playsinline",""),Tt(Vu.src,Gu=_u[3])||P(Vu,"src",Gu),P($u,"class","audio svelte-1ku3wt4"),ie($u,"paused",_u[6])},m(Yu,_c){F(Yu,$u,_c),se(Ru,$u,null),W($u,Ou),W($u,Fu),W($u,Nu),W($u,Vu),_u[9](Vu),Qu=!0,qu||(Ku=[je(Vu,"play",_u[10]),je(Vu,"pause",_u[10]),je($u,"click",So(_u[7]))],qu=!0)},p(Yu,_c){_u=Yu,(!Qu||_c&8&&!Tt(Vu.src,Gu=_u[3]))&&P(Vu,"src",Gu),_c&64&&Uu!==(Uu=_u[6])&&Vu[Uu?"pause":"play"](),(!Qu||_c&64)&&ie($u,"paused",_u[6])},i(Yu){Qu||(z(Ru.$$.fragment,Yu),Yu&&Oe(()=>{Wu&&Wu.end(1),Hu=bn($u,pn,{duration:_u[2],delay:_u[0],easing:Mn}),Hu.start()}),Qu=!0)},o(Yu){H(Ru.$$.fragment,Yu),Hu&&Hu.invalidate(),Yu&&(Wu=jn($u,pn,{duration:_u[2],delay:_u[1],easing:Mn})),Qu=!1},d(Yu){Yu&&Q($u),oe(Ru),_u[9](null),Yu&&Wu&&Wu.end(),qu=!1,Gt(Ku)}}}function Ab(_u){let $u,Ru,Ou=_u[4]&&Rl(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[4]?Ou?(Ou.p(Fu,Nu),Nu&16&&z(Ou,1)):(Ou=Rl(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function bb(_u,$u,Ru){let{inDelay:Ou=0}=$u,{outDelay:Fu=0}=$u,{duration:Nu=0}=$u,{url:Vu}=$u,{unfolded:Gu}=$u,{hooksInfo:Uu={}}=$u;const Hu=ti("hooks"),Wu=ti("mediaStore");let Qu,qu=!0;Wu.subscribe(({currentMediaUrl:Ju})=>{Ju!==Vu&&(Qu==null||Qu.pause())});function Ku(Ju){Wu.set({currentMediaUrl:Vu}),Qu&&(Hu.emit("click",Object.assign({event:Ju,target:"AudioTagPlayIcon",audioInstance:Qu},Uu)),Qu.paused?Qu.play():Qu.pause(),Ru(5,Qu.onplay=Xu=>Hu.emit("playStateChange",Object.assign({event:Xu,state:"playing",mediaInstance:Qu},Uu)),Qu),Ru(5,Qu.onpause=Xu=>Hu.emit("playStateChange",Object.assign({event:Xu,state:"paused",mediaInstance:Qu},Uu)),Qu))}function Yu(Ju){Xe[Ju?"unshift":"push"](()=>{Qu=Ju,Ru(5,Qu)})}function _c(){qu=this.paused,Ru(6,qu)}return _u.$$set=Ju=>{"inDelay"in Ju&&Ru(0,Ou=Ju.inDelay),"outDelay"in Ju&&Ru(1,Fu=Ju.outDelay),"duration"in Ju&&Ru(2,Nu=Ju.duration),"url"in Ju&&Ru(3,Vu=Ju.url),"unfolded"in Ju&&Ru(4,Gu=Ju.unfolded),"hooksInfo"in Ju&&Ru(8,Uu=Ju.hooksInfo)},_u.$$.update=()=>{_u.$$.dirty&48&&(Gu||Qu==null||Qu.pause())},[Ou,Fu,Nu,Vu,Gu,Qu,qu,Ku,Uu,Yu,_c]}class yb extends fe{constructor($u){super(),de(this,$u,bb,Ab,ue,{inDelay:0,outDelay:1,duration:2,url:3,unfolded:4,hooksInfo:8},vb)}}function wb(_u){me(_u,"svelte-4r8s18",".audio-tag.svelte-4r8s18.svelte-4r8s18{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.line.svelte-4r8s18.svelte-4r8s18{display:flex;position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-4r8s18.svelte-4r8s18{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-4r8s18.svelte-4r8s18{position:relative;width:100%;height:100%}.audio-icon.svelte-4r8s18.svelte-4r8s18{vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.unfolded.svelte-4r8s18 .audio-icon.svelte-4r8s18{pointer-events:auto}")}function Ql(_u){var $u,Ru,Ou,Fu;let Nu,Vu,Gu,Uu,Hu,Wu,Qu,qu,Ku,Yu,_c,Ju,Xu,Zu,Xc,_h,ep;return Vu=new vt({props:{visible:_u[5],left:_u[2]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Hu=new ou({props:{unfolded:_u[5],duration:1e3,outDelay:_u[4]+20*Math.min((Ru=($u=_u[3][0])==null?void 0:$u.content.length)!=null?Ru:10,15)}}),Yu=new yb({props:{unfolded:_u[5],url:_u[0].data.audioUrl,duration:1e3,outDelay:20*Math.min((Fu=(Ou=_u[3][0])==null?void 0:Ou.content.length)!=null?Fu:10,15),hooksInfo:{tag:_u[0]}}}),Xu=new Pu({props:{visible:_u[5],textUnfolded:_u[1],textItems:_u[3]}}),{c(){Nu=G("div"),re(Vu.$$.fragment),Gu=q(),Uu=G("div"),re(Hu.$$.fragment),Wu=q(),Qu=G("div"),qu=G("div"),Ku=G("div"),re(Yu.$$.fragment),_c=q(),Ju=G("div"),re(Xu.$$.fragment),P(Uu,"class","line svelte-4r8s18"),X(Uu,"width",_u[2]+"px"),P(Ku,"class","audio-icon svelte-4r8s18"),X(Ju,"display","inline-block"),P(qu,"class","wrapper svelte-4r8s18"),P(Qu,"class","content svelte-4r8s18"),Oe(()=>_u[9].call(Qu)),P(Nu,"class","audio-tag svelte-4r8s18"),ie(Nu,"unfolded",_u[5])},m(np,ap){F(np,Nu,ap),se(Vu,Nu,null),W(Nu,Gu),W(Nu,Uu),se(Hu,Uu,null),W(Nu,Wu),W(Nu,Qu),W(Qu,qu),W(qu,Ku),se(Yu,Ku,null),W(qu,_c),W(qu,Ju),se(Xu,Ju,null),Zu=en(Qu,_u[9].bind(Qu)),Xc=!0,_h||(ep=je(Ju,"click",_u[6]),_h=!0)},p(np,ap){var lp,up,_f,tp;const ip={};ap&32&&(ip.visible=np[5]),ap&4&&(ip.left=np[2]/2+"px"),Vu.$set(ip);const rp={};ap&32&&(rp.unfolded=np[5]),ap&24&&(rp.outDelay=np[4]+20*Math.min((up=(lp=np[3][0])==null?void 0:lp.content.length)!=null?up:10,15)),Hu.$set(rp),ap&4&&X(Uu,"width",np[2]+"px");const op={};ap&32&&(op.unfolded=np[5]),ap&1&&(op.url=np[0].data.audioUrl),ap&8&&(op.outDelay=20*Math.min((tp=(_f=np[3][0])==null?void 0:_f.content.length)!=null?tp:10,15)),ap&1&&(op.hooksInfo={tag:np[0]}),Yu.$set(op);const sp={};ap&32&&(sp.visible=np[5]),ap&2&&(sp.textUnfolded=np[1]),ap&8&&(sp.textItems=np[3]),Xu.$set(sp),(!Xc||ap&32)&&ie(Nu,"unfolded",np[5])},i(np){Xc||(z(Vu.$$.fragment,np),z(Hu.$$.fragment,np),z(Yu.$$.fragment,np),z(Xu.$$.fragment,np),Xc=!0)},o(np){H(Vu.$$.fragment,np),H(Hu.$$.fragment,np),H(Yu.$$.fragment,np),H(Xu.$$.fragment,np),Xc=!1},d(np){np&&Q(Nu),oe(Vu),oe(Hu),oe(Yu),oe(Xu),Zu(),_h=!1,ep()}}}function Eb(_u){let $u,Ru,Ou=_u[0].state&&Ql(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[0].state?Ou?(Ou.p(Fu,Nu),Nu&1&&z(Ou,1)):(Ou=Ql(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function Cb(_u,$u,Ru){let Ou,Fu,Nu;var Vu;let{tag:Gu}=$u,Uu=!1,Hu,Wu=[];function Qu(){Ru(1,Uu=!Uu)}function qu(){Hu=this.clientWidth,Ru(2,Hu)}return _u.$$set=Ku=>{"tag"in Ku&&Ru(0,Gu=Ku.tag)},_u.$$.update=()=>{_u.$$.dirty&129&&Ru(5,Ou=!!(!(Ru(7,Vu=Gu.state)===null||Vu===void 0)&&Vu.unfolded)),_u.$$.dirty&1&&Ru(8,Fu=Gu.data.text),_u.$$.dirty&256&&Ru(3,Wu=[{id:it(),content:Fu}]),_u.$$.dirty&2&&Ru(4,Nu=Uu?450:0)},[Gu,Uu,Hu,Wu,Nu,Ou,Qu,Vu,Fu,qu]}class Pb extends fe{constructor($u){super(),de(this,$u,Cb,Eb,ue,{tag:0},wb)}}function Ib(_u){me(_u,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function Hl(_u){let $u,Ru,Ou;return Ru=new zu({props:{unfolded:_u[5],mediaData:_u[4],objectFit:_u[2],enableCarousel:_u[1],autoplayConfig:_u[3],tag:_u[0],canPlay:!0,playButtonIfNeed:"large",inDelay:500,duration:500}}),{c(){$u=G("div"),re(Ru.$$.fragment),P($u,"class","media-wrapper svelte-10cw0el")},m(Fu,Nu){F(Fu,$u,Nu),se(Ru,$u,null),Ou=!0},p(Fu,Nu){const Vu={};Nu&32&&(Vu.unfolded=Fu[5]),Nu&16&&(Vu.mediaData=Fu[4]),Nu&4&&(Vu.objectFit=Fu[2]),Nu&2&&(Vu.enableCarousel=Fu[1]),Nu&8&&(Vu.autoplayConfig=Fu[3]),Nu&1&&(Vu.tag=Fu[0]),Ru.$set(Vu)},i(Fu){Ou||(z(Ru.$$.fragment,Fu),Ou=!0)},o(Fu){H(Ru.$$.fragment,Fu),Ou=!1},d(Fu){Fu&&Q($u),oe(Ru)}}}function xb(_u){let $u,Ru,Ou=_u[0].state&&_u[4]&&Hl(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[0].state&&Fu[4]?Ou?(Ou.p(Fu,Nu),Nu&17&&z(Ou,1)):(Ou=Hl(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function Sb(_u,$u,Ru){let Ou,Fu,Nu,Vu,Gu;var Uu,Hu;let{tag:Wu}=$u;return _u.$$set=Qu=>{"tag"in Qu&&Ru(0,Wu=Qu.tag)},_u.$$.update=()=>{_u.$$.dirty&1&&Ru(5,Ou=Wu.state?Wu.state.unfolded:!1),_u.$$.dirty&1&&Ru(4,Fu=Wu.data.mediaData),_u.$$.dirty&1&&Ru(1,Nu=Wu.data.enableCarousel),_u.$$.dirty&67&&Ru(3,Vu=Ru(6,Uu=Wu.data.autoplayConfig)!==null&&Uu!==void 0?Uu:{autoplay:Nu!=null?Nu:!0,autoplayVideo:!0}),_u.$$.dirty&129&&Ru(2,Gu=Ru(7,Hu=Wu.data.objectFit)!==null&&Hu!==void 0?Hu:(()=>Wu.data.adaptationMode==="stretch"?"cover":Wu.data.adaptationMode==="proportional"?"contain":void 0)())},[Wu,Nu,Gu,Vu,Fu,Ou,Uu,Hu]}class kb extends fe{constructor($u){super(),de(this,$u,Sb,xb,ue,{tag:0},Ib)}}function Tb(_u){me(_u,"svelte-7x7u86",".wrapper.svelte-7x7u86{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-7x7u86{position:relative;display:flex;align-items:center;justify-content:center}.icon.svelte-7x7u86{position:relative;margin-bottom:0.6875rem}.arrow0.svelte-7x7u86,.arrow1.svelte-7x7u86,.arrow2.svelte-7x7u86{position:absolute;width:1.625rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAAAkCAYAAAAnxQwhAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATqADAAQAAAABAAAAJAAAAABrx2urAAAGm0lEQVRoBd2ZXbCVUxjH26QSfSCS0JwoFNEZ0cc45iSmUUaqC+KCwUUXxYUZw4yrLhozLlDDRWa6oW5yOFTT0IcyKn1JnIjDKelLPipJcXT8fttaZ95qd+yzv+uZ+e211rvfd61n/ddaz1rv3qkOFWgtLS3n4Vb34NqhVCr1d6W5mao0hxBNwfrCOcG346S7Ee9gKFdEUjHCIZi+XA69E8p4rQVM98EeBLRcdqsI4RCtI0r0h4uCIvo1BZx1b4GzTjsA3yFec7pUxo+yC4doXen/IDg/6GB5GlSH8mbSWXA4lI+SNiDekVAuS1JW4RCtF72+EWI8c6k+A6ZJc5m+BHvCxX9ItyLe/lAueVIW4UI8u4beDkj02FnnTOuUuJbM/kVhNjQkLjaSbyxH3Cu5cIjmUWMoOKti+2PIT4JsrI6blkKMe87GTYhX0iNLdDwbh/O+B9G6UclIMNWcXQ/CrRbaYRu5dz44C7XfYTXimZbESiYconk2GwGdwSOF4j0JV0AuZrybA4plfYq4BvF2kRbdSiIcog2hJ+6StmcnFesJ6AL52DEefgOiWNa/EfG25FNpNs8WVbgQz+7EEc9o0RRxYiwUKDXuJcVqovxRMeNe0YRDtB44Pw4uAc0jx2gYZqEItoE63TSc0fILLEa8oryqFUU4ROuH04oWl6I76WQwzhXTXLILIO6wLuVFiLedtKBWcOEQ7XY8rE146ZvAwxDfDBJfFSX7J7XOgz8Sta9AvE8T5byzBRMuxLP78Mg3Ac3l0gcmWCiD1dPmboh9/JL8+4WKe7HSvPqFaL6cTwGF0jyc3gTOvnLaehr/HOIrnUeYeYj3W75O5S0covnq9AhcEJxpJr0Lrgrlcic7cWAZ+AuM5o8DbyJeY7qU40dewiFaDe26FOOIKppl41olmWK9C1E8V0Q94q3M1cmchAvx7CEaHZ5oWKfGJ8qVmF2EU75hxH67YcxHQK+1y2IFWT+EaBdz81SoCg+59fvCXuh4tjnUf0tIC5WsoyJjnUckbTu8hni/WsjW2iUcog2k4unQPTTglm/HPLcVwpqoZCu4lOLxxeOFocCfneJgkc3LfuDpzyDG5UPkZyHetmxrzVo4RLubSh+FGM8OkHcTuBDyMUfaTihQHJBYn0cafTTVfKFX0KHgzM/HDvPwcugZKnGw5iLeh6HcZvK/woV45gu5wkVTtLGxkEN6jGc2gaJ5lDkXtCjUXvIrQf9qoDckzU56pFC8augMudoSHoziWcdSmIOA8e3Da6dYm8Ihmu+Zz8H14ckYWHONZ19Qz4+go53A9qNYLvtPYBlON5C2Gn4MpuDsHgVxecXvHQQH8krw7JiLuUnohz5pX8NM/PB9N6OdVjicNaa8AHFJROeqMtZ0+ovGk2/AI0o3iGKRTcey9aSO8locbXN3wyc75k4+BoaBYSNZ3yHKHj2ug6uhPdbEzQ6qK0ARXQ0z8MmYe4plFA4Hx3Hn0xB3Hiv0V9qTYxCXMpoie2LX+vyXnPDpiH4Ay3HMe9tt+NiTh0bDPRBXRLIed07tZvDebEzhN4CzV3O5voyPi9KlxMcJwuGMQj0FE8M9Ku9I1MIJ94bvk4mNGORdcr41GLd8xjpM94HxZAmO7CAtmOF3Pyoz5srJ8bCZaw68M95NJU4GshlNf1dAf4i+15F/Bb9b416rGDRuPHsRHCHN2PEz3GahDXMq/wR9wfgTGyObFnE56ULwDxW/K5rRB/tTDa4YY2Imf3Zx/TIwFLVl6/iyF8SNxxX0LH1Ix720cDRoTJgNcbT2hwdUPZPZeCNYsc9EQazPEV4NTm9/zjlKWnKjT11otBYUcRS4AuKgmjrYToxrwUHPZN9z0Ql0afhyL+k0+rQtRQOu/3qIAhjIB0IPSJrrvwEcARvTko44896DhXFUvKESjD66msbD/eBMSw60eQVygAfDyXH8INe2gZPLiaF4ExTucTLPg2aMGg7uVpqzZwu4tm8Ad7UoFtn0q4ti1SHWt16odKO/A/DxAZgAcYVFt+3nV2AcHAIdQTsOa6Ea7P9MhZtB5jHQmsDltwMM8qrszFPpaEfILIYF4H+ZVnrGGf12coyEyXAvdIU4KUydaa4+r/cDl3UVaHMVzun7erp4+g/FWQWK5a6oeGeNoYHijAVFrIG44shmtKkK52x6FSZluMW4pVjvIJbHibPe0MPl61JWxEEZOvw216a3LkEeGMGFO0D1d8KqMyVu4WtRDE2Mh85Az6Wuso/RZA1ph38BBMvNbHuq7kAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:contain;animation-fill-mode:backwards;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-duration:1.2s}.arrow1.svelte-7x7u86{position:relative}.arrow0.svelte-7x7u86{top:-0.75rem;animation-name:svelte-7x7u86-up0}.arrow1.svelte-7x7u86{animation-name:svelte-7x7u86-up1}.arrow2.svelte-7x7u86{top:0.75rem;animation-name:svelte-7x7u86-up2}.text.svelte-7x7u86{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;word-break:break-all;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}@keyframes svelte-7x7u86-up0{0%{opacity:0.8;transform:translate3d(0, 0, 0) scale(0.84)}33.33%,100%{opacity:0;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up1{0%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}33.33%,100%{opacity:0.8;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up2{0%{opacity:0}33.33%,100%{opacity:1;transform:translate3d(0, -0.75rem, 0)}}.link.svelte-7x7u86{position:relative;width:1.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAkCAMAAAAgl+0yAAAAnFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+TINBkAAAAM3RSTlMAjLy6ILM2Fi+Zng3BrPvao4VC9ceneQfKkmNdV1AbEeLOsHA77ujUtn5JLnRraSUUjVLj/+RVAAABhElEQVRIx63V2W6CQBiGYUBUQGDYdwTZQZZa7v/eimik/ket/7yZ4yeTTCYf8+dOX8etxGVoxAvCVbguR3g0uRTMA0w4odGi+CbzFnGKosCqrmHc5rdEwzCwqtGFJlC7DqtOcTxANY67BHnVKOpVoEZRjFPdLgxbqIZhhFTjINChGgThF06NhpGd35OGMcCppyDPfajm+YhUR8cRoeo4+RGlJnnbalBt2x6nHh1dt4Gq6bqDU886y2ZQZVn9jFJ51vcbqPo+Up18UeSgKoo3nHqVJEkGqi1JPk49aLZmQdW2xXf1zP+vUFHsC1QVReK33xdk+w9SaqAq+732UvvdZ2UEqrud8lR5Wc4a7pO8GaoL9VBjy7rMlMosq1lV43LhZlrtF+yuJlbtEXpqXXP3NYwI8VJqakOIziw5aepV1FQuTdfhvlWVZdJCrao6MPe0spRpqV5ZFivqNqYpq3RQ2TST5/h4quoRCmwqq6rymol6plV53IZSomTKE/MroWfxDevL/wAEdPq1eGDh4AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-size:contain;animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:1.2s;animation-name:svelte-7x7u86-left-right}@keyframes svelte-7x7u86-left-right{0%,100%{opacity:0.8;transform:translateX(-0.3125rem)}50%{opacity:1;transform:translateX(0)}}")}function Db(_u){let $u,Ru,Ou,Fu;return $u=new vt({props:{visible:!0,outDelay:0,inDelay:0,width:1.4,left:13,bottom:"auto",blurRadius:50,spreadRadius:18}}),{c(){re($u.$$.fragment),Ru=q(),Ou=G("div"),P(Ou,"class","link svelte-7x7u86")},m(Nu,Vu){se($u,Nu,Vu),F(Nu,Ru,Vu),F(Nu,Ou,Vu),Fu=!0},i(Nu){Fu||(z($u.$$.fragment,Nu),Fu=!0)},o(Nu){H($u.$$.fragment,Nu),Fu=!1},d(Nu){oe($u,Nu),Nu&&Q(Ru),Nu&&Q(Ou)}}}function Lb(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu;return $u=new vt({props:{visible:!0,outDelay:0,inDelay:0,height:1.2,left:13,bottom:12,blurRadius:50,spreadRadius:18}}),{c(){re($u.$$.fragment),Ru=q(),Ou=G("div"),Fu=q(),Nu=G("div"),Vu=q(),Gu=G("div"),P(Ou,"class","arrow0 svelte-7x7u86"),P(Nu,"class","arrow1 svelte-7x7u86"),P(Gu,"class","arrow2 svelte-7x7u86")},m(Hu,Wu){se($u,Hu,Wu),F(Hu,Ru,Wu),F(Hu,Ou,Wu),F(Hu,Fu,Wu),F(Hu,Nu,Wu),F(Hu,Vu,Wu),F(Hu,Gu,Wu),Uu=!0},i(Hu){Uu||(z($u.$$.fragment,Hu),Uu=!0)},o(Hu){H($u.$$.fragment,Hu),Uu=!1},d(Hu){oe($u,Hu),Hu&&Q(Ru),Hu&&Q(Ou),Hu&&Q(Fu),Hu&&Q(Nu),Hu&&Q(Vu),Hu&&Q(Gu)}}}function Mb(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu,Wu=_u[0].text+"",Qu,qu;const Ku=[Lb,Db],Yu=[];function _c(Ju,Xu){return Ju[0].linkType===ho.VrLink?0:Ju[0].linkType===ho.NormalLink?1:-1}return~(Ou=_c(_u))&&(Fu=Yu[Ou]=Ku[Ou](_u)),Gu=new vt({props:{visible:!0,outDelay:0,inDelay:0,left:"auto",bottom:"auto",width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){$u=G("div"),Ru=G("div"),Fu&&Fu.c(),Nu=q(),Vu=G("div"),re(Gu.$$.fragment),Uu=q(),Hu=G("div"),Qu=Qe(Wu),P(Ru,"class","icon svelte-7x7u86"),P(Hu,"class","text svelte-7x7u86"),P(Vu,"class","text-wrapper svelte-7x7u86"),P($u,"class","wrapper svelte-7x7u86")},m(Ju,Xu){F(Ju,$u,Xu),W($u,Ru),~Ou&&Yu[Ou].m(Ru,null),W($u,Nu),W($u,Vu),se(Gu,Vu,null),W(Vu,Uu),W(Vu,Hu),W(Hu,Qu),qu=!0},p(Ju,[Xu]){let Zu=Ou;Ou=_c(Ju),Ou!==Zu&&(Fu&&(ve(),H(Yu[Zu],1,1,()=>{Yu[Zu]=null}),Ae()),~Ou?(Fu=Yu[Ou],Fu||(Fu=Yu[Ou]=Ku[Ou](Ju),Fu.c()),z(Fu,1),Fu.m(Ru,null)):Fu=null),(!qu||Xu&1)&&Wu!==(Wu=Ju[0].text+"")&&Ye(Qu,Wu)},i(Ju){qu||(z(Fu),z(Gu.$$.fragment,Ju),qu=!0)},o(Ju){H(Fu),H(Gu.$$.fragment,Ju),qu=!1},d(Ju){Ju&&Q($u),~Ou&&Yu[Ou].d(),oe(Gu)}}}function zb(_u,$u,Ru){let Ou,{tag:Fu}=$u;return _u.$$set=Nu=>{"tag"in Nu&&Ru(1,Fu=Nu.tag)},_u.$$.update=()=>{_u.$$.dirty&2&&Ru(0,Ou=Fu.data)},[Ou,Fu]}class jb extends fe{constructor($u){super(),de(this,$u,zb,Mb,ue,{tag:1},Tb)}}function Bb(_u){me(_u,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function Fl(_u){let $u,Ru=_u[0].element+"",Ou;return{c(){$u=new Ji(!1),Ou=Pe(),$u.a=Ou},m(Fu,Nu){$u.m(Ru,Fu,Nu),F(Fu,Ou,Nu)},p(Fu,Nu){Nu&1&&Ru!==(Ru=Fu[0].element+"")&&$u.p(Ru)},d(Fu){Fu&&Q(Ou),Fu&&$u.d()}}}function Ob(_u){let $u,Ru=typeof _u[0].element=="string"&&Fl(_u);return{c(){$u=G("div"),Ru&&Ru.c(),P($u,"class","customElement__container svelte-kzl2aj")},m(Ou,Fu){F(Ou,$u,Fu),Ru&&Ru.m($u,null),_u[2]($u)},p(Ou,[Fu]){typeof Ou[0].element=="string"?Ru?Ru.p(Ou,Fu):(Ru=Fl(Ou),Ru.c(),Ru.m($u,null)):Ru&&(Ru.d(1),Ru=null)},i:ce,o:ce,d(Ou){Ou&&Q($u),Ru&&Ru.d(),_u[2](null)}}}function Rb(_u,$u,Ru){let{tag:Ou}=$u,Fu,Nu;mt(()=>{if(Fu)if(Ou.element instanceof Element){const Gu=Ou.element;Fu.appendChild(Gu),Nu=()=>Fu==null?void 0:Fu.removeChild(Gu)}else typeof Ou.element=="function"&&(Nu=Ou.element(Fu))}),tn(()=>{Nu==null||Nu()});function Vu(Gu){Xe[Gu?"unshift":"push"](()=>{Fu=Gu,Ru(1,Fu)})}return _u.$$set=Gu=>{"tag"in Gu&&Ru(0,Ou=Gu.tag)},[Ou,Fu,Vu]}class Qb extends fe{constructor($u){super(),de(this,$u,Rb,Ob,ue,{tag:0},Bb)}}function Hb(_u){me(_u,"svelte-95x526",`@font-face{font-family:'TG-TYPE';font-style:normal;font-weight:400;src:local('TG-TYPE-Bold'),
      url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==)
        format('woff2')}.content__container.svelte-95x526{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.unClickable.svelte-95x526{pointer-events:none !important}.content__container.unClickable.svelte-95x526 *{pointer-events:none !important}*{-webkit-tap-highlight-color:transparent}.content__wrapper.svelte-95x526{pointer-events:none;width:100%;height:100%}.withAnimation.svelte-95x526{transition:opacity 0.3s linear}.content__container.hide.svelte-95x526{opacity:0;pointer-events:none}.content__container.hide.svelte-95x526 *{pointer-events:none !important}.content__container.disable.svelte-95x526{display:none}.content__container.hide.svelte-95x526 *{pointer-events:none}.content.svelte-95x526{position:relative;width:100%;height:100%;font-size:0.75rem;line-height:1.125rem;color:#fff}.content.svelte-95x526:not(.unfolded){pointer-events:none}.content.svelte-95x526:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-95x526{pointer-events:auto}`)}function Fb(_u){let $u,Ru;return $u=new kb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Nb(_u){let $u,Ru;return $u=new jb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Gb(_u){let $u,Ru;return $u=new gb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Wb(_u){let $u,Ru;return $u=new Pb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Xb(_u){let $u,Ru;return $u=new fb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Yb(_u){let $u,Ru;return $u=new Pv({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function _b(_u){let $u,Ru;return $u=new Qb({props:{tag:Ne(_u[1])}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&2&&(Nu.tag=Ne(Ou[1])),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Ub(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu,Uu,Hu;const Wu=[_b,Yb,Xb,Wb,Gb,Nb,Fb],Qu=[];function qu(Ku,Yu){return Ku[1].element?0:Ku[1].contentType===ht.Text?1:Ku[1].contentType===ht.ImageText?2:Ku[1].contentType===ht.Audio?3:Ku[1].contentType===ht.Marketing?4:Ku[1].contentType===ht.Link?5:Ku[1].contentType===ht.MediaPlane?6:-1}return~(Fu=qu(_u))&&(Nu=Qu[Fu]=Wu[Fu](_u)),{c(){var Ku,Yu,_c;$u=G("div"),Ru=G("div"),Ou=G("div"),Nu&&Nu.c(),P(Ou,"class","content svelte-95x526"),ie(Ou,"unfolded",(Ku=_u[1].state)==null?void 0:Ku.unfolded),P(Ru,"class","content__wrapper svelte-95x526"),P($u,"class","content__container svelte-95x526"),P($u,"data-id",Vu=_u[1].id),ie($u,"disable",_u[1].enabled===!1||((Yu=_u[1].temporaryState)==null?void 0:Yu.visible)===!1),ie($u,"hide",!_u[3].visible||!_u[3].enabled||!_u[4].visible||!((_c=_u[1].state)!=null&&_c.visible)),ie($u,"withAnimation",_u[0]),ie($u,"unClickable",_u[1].clickable===!1),X($u,"width",_u[1].pointType==="PointTag"?0:"100%"),X($u,"height",_u[1].pointType==="PointTag"?0:"100%")},m(Ku,Yu){F(Ku,$u,Yu),W($u,Ru),W(Ru,Ou),~Fu&&Qu[Fu].m(Ou,null),Gu=!0,Uu||(Hu=je($u,"click",So(_u[13])),Uu=!0)},p(Ku,[Yu]){var _c,Ju,Xu;let Zu=Fu;Fu=qu(Ku),Fu===Zu?~Fu&&Qu[Fu].p(Ku,Yu):(Nu&&(ve(),H(Qu[Zu],1,1,()=>{Qu[Zu]=null}),Ae()),~Fu?(Nu=Qu[Fu],Nu?Nu.p(Ku,Yu):(Nu=Qu[Fu]=Wu[Fu](Ku),Nu.c()),z(Nu,1),Nu.m(Ou,null)):Nu=null),(!Gu||Yu&2)&&ie(Ou,"unfolded",(_c=Ku[1].state)==null?void 0:_c.unfolded),(!Gu||Yu&2&&Vu!==(Vu=Ku[1].id))&&P($u,"data-id",Vu),(!Gu||Yu&2)&&ie($u,"disable",Ku[1].enabled===!1||((Ju=Ku[1].temporaryState)==null?void 0:Ju.visible)===!1),(!Gu||Yu&26)&&ie($u,"hide",!Ku[3].visible||!Ku[3].enabled||!Ku[4].visible||!((Xu=Ku[1].state)!=null&&Xu.visible)),(!Gu||Yu&1)&&ie($u,"withAnimation",Ku[0]),(!Gu||Yu&2)&&ie($u,"unClickable",Ku[1].clickable===!1),Yu&2&&X($u,"width",Ku[1].pointType==="PointTag"?0:"100%"),Yu&2&&X($u,"height",Ku[1].pointType==="PointTag"?0:"100%")},i(Ku){Gu||(z(Nu),Gu=!0)},o(Ku){H(Nu),Gu=!1},d(Ku){Ku&&Q($u),~Fu&&Qu[Fu].d(),Uu=!1,Hu()}}}function Vb(_u,$u,Ru){let Ou,Fu,Nu,Vu;var Gu,Uu;let{withAnimation:Hu=!1}=$u,{tag:Wu}=$u,{hooks:Qu}=$u,{state:qu}=$u,{mediaStore:Ku}=$u,{temporaryState:Yu}=$u;no("hooks",Qu),no("mediaStore",Ku);let _c,Ju;function Xu(Xc){Xc?Qu.emit("exposure",{id:Vu,type:"start"}):Qu.emit("exposure",{id:Vu,type:"end"})}const Zu=Xc=>Qu.emit("click",{event:Xc,target:"TagContent",tag:Wu});return _u.$$set=Xc=>{"withAnimation"in Xc&&Ru(0,Hu=Xc.withAnimation),"tag"in Xc&&Ru(1,Wu=Xc.tag),"hooks"in Xc&&Ru(2,Qu=Xc.hooks),"state"in Xc&&Ru(3,qu=Xc.state),"mediaStore"in Xc&&Ru(5,Ku=Xc.mediaStore),"temporaryState"in Xc&&Ru(4,Yu=Xc.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&66&&Ru(11,Ou=Ru(6,Gu=Wu.state)===null||Gu===void 0?void 0:Gu.unfolded),_u.$$.dirty&130&&Ru(10,Fu=Ru(7,Uu=Wu.state)===null||Uu===void 0?void 0:Uu.visible),_u.$$.dirty&1048&&Ru(12,Nu=qu.visible&&Yu.visible&&Fu),_u.$$.dirty&2&&(Vu=Wu.id),_u.$$.dirty&4096&&Xu(Nu),_u.$$.dirty&3842&&Wu.hooks&&(Ou!==void 0&&Ou!==Ju&&(Ru(9,Ju=Ou),Ou?Wu.hooks.emit("unfolded"):Wu.hooks.emit("folded")),Fu!==void 0&&Fu!==_c&&(Ru(8,_c=Fu),Fu?Wu.hooks.emit("show"):Wu.hooks.emit("hide")))},[Hu,Wu,Qu,qu,Yu,Ku,Gu,Uu,_c,Ju,Fu,Ou,Nu,Zu]}class ju extends fe{constructor($u){super(),de(this,$u,Vb,Ub,ue,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:5,temporaryState:4},Hb)}}function Jb(_u){me(_u,"svelte-fuismw",".point.svelte-fuismw.svelte-fuismw{pointer-events:none;width:1.5rem;height:1.5rem}.small-point.svelte-fuismw.svelte-fuismw,.big-point.svelte-fuismw.svelte-fuismw{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-fuismw.svelte-fuismw{background-color:rgba(0, 0, 0, 0.1)}.folded.point.svelte-fuismw.svelte-fuismw{animation:svelte-fuismw-breathing 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::before,.big-point.svelte-fuismw.svelte-fuismw::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-fuismw.svelte-fuismw::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=)}.folded.svelte-fuismw .big-point.svelte-fuismw::before{animation:svelte-fuismw-rotate 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::after{position:absolute;width:1rem;height:1rem;background-image:var(--iconUrl)}.small-point.svelte-fuismw.svelte-fuismw::before{content:'';display:block;position:absolute;pointer-events:none;width:0.25rem;height:0.25rem;border-radius:100%;background-color:white}.folded.svelte-fuismw .big-point.svelte-fuismw{opacity:1;scale:1}.unfolded.svelte-fuismw .big-point.svelte-fuismw{opacity:0;scale:0}.folded.svelte-fuismw .small-point.svelte-fuismw{opacity:0;scale:6}.unfolded.svelte-fuismw .small-point.svelte-fuismw{opacity:1;scale:1}@keyframes svelte-fuismw-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes svelte-fuismw-breathing{0%{transform:scale(1)}25%{transform:scale(0.9)}50%{transform:scale(1)}}")}function Zb(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu;return Ru=new vt({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=G("div"),re(Ru.$$.fragment),Ou=q(),Fu=G("div"),Nu=q(),Vu=G("div"),P(Fu,"class","small-point svelte-fuismw"),X(Fu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),P(Vu,"class","big-point svelte-fuismw"),X(Vu,"--iconUrl","url("+_u[1]+")"),X(Vu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),P($u,"class","point svelte-fuismw"),ie($u,"folded",_u[3]),ie($u,"unfolded",_u[0])},m(Uu,Hu){F(Uu,$u,Hu),se(Ru,$u,null),W($u,Ou),W($u,Fu),W($u,Nu),W($u,Vu),Gu=!0},p(Uu,[Hu]){Hu&12&&X(Fu,"transition-delay",Uu[3]?Uu[2]+"ms":"0ms"),(!Gu||Hu&2)&&X(Vu,"--iconUrl","url("+Uu[1]+")"),Hu&12&&X(Vu,"transition-delay",Uu[3]?Uu[2]+"ms":"0ms"),(!Gu||Hu&8)&&ie($u,"folded",Uu[3]),(!Gu||Hu&1)&&ie($u,"unfolded",Uu[0])},i(Uu){Gu||(z(Ru.$$.fragment,Uu),Gu=!0)},o(Uu){H(Ru.$$.fragment,Uu),Gu=!1},d(Uu){Uu&&Q($u),oe(Ru)}}}function qb(_u,$u,Ru){let Ou,{unfolded:Fu}=$u,{iconUrl:Nu}=$u,{foldDelay:Vu=800}=$u;return _u.$$set=Gu=>{"unfolded"in Gu&&Ru(0,Fu=Gu.unfolded),"iconUrl"in Gu&&Ru(1,Nu=Gu.iconUrl),"foldDelay"in Gu&&Ru(2,Vu=Gu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Ru(3,Ou=!Fu)},[Fu,Nu,Vu,Ou]}class Kb extends fe{constructor($u){super(),de(this,$u,qb,Zb,ue,{unfolded:0,iconUrl:1,foldDelay:2},Jb)}}function $b(_u){me(_u,"svelte-jzvcn0",".point.svelte-jzvcn0.svelte-jzvcn0{pointer-events:none;width:1rem;height:1rem}.small-point.svelte-jzvcn0.svelte-jzvcn0,.big-point.svelte-jzvcn0.svelte-jzvcn0{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-jzvcn0.svelte-jzvcn0::before,.big-point.svelte-jzvcn0.svelte-jzvcn0::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-jzvcn0.svelte-jzvcn0::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat}.small-point.svelte-jzvcn0.svelte-jzvcn0::before{content:'';display:block;position:absolute;pointer-events:none;width:0.375rem;height:0.375rem;border-radius:100%;background-color:white}.unfolded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:0;transform:scale(0)}.folded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:1;transform:scale(1)}.unfolded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(0.6)}.folded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(1)}")}function ey(_u){let $u,Ru,Ou,Fu,Nu,Vu,Gu;return Ru=new vt({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=G("div"),re(Ru.$$.fragment),Ou=q(),Fu=G("div"),Nu=q(),Vu=G("div"),P(Fu,"class","small-point svelte-jzvcn0"),X(Fu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),P(Vu,"class","big-point svelte-jzvcn0"),X(Vu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),P($u,"class","point svelte-jzvcn0"),ie($u,"unfolded",_u[0]),ie($u,"folded",_u[2])},m(Uu,Hu){F(Uu,$u,Hu),se(Ru,$u,null),W($u,Ou),W($u,Fu),W($u,Nu),W($u,Vu),Gu=!0},p(Uu,[Hu]){Hu&6&&X(Fu,"transition-delay",Uu[2]?Uu[1]+"ms":"0ms"),Hu&6&&X(Vu,"transition-delay",Uu[2]?Uu[1]+"ms":"0ms"),(!Gu||Hu&1)&&ie($u,"unfolded",Uu[0]),(!Gu||Hu&4)&&ie($u,"folded",Uu[2])},i(Uu){Gu||(z(Ru.$$.fragment,Uu),Gu=!0)},o(Uu){H(Ru.$$.fragment,Uu),Gu=!1},d(Uu){Uu&&Q($u),oe(Ru)}}}function ty(_u,$u,Ru){let Ou,{unfolded:Fu}=$u,{foldDelay:Nu=800}=$u;return _u.$$set=Vu=>{"unfolded"in Vu&&Ru(0,Fu=Vu.unfolded),"foldDelay"in Vu&&Ru(1,Nu=Vu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Ru(2,Ou=!Fu)},[Fu,Nu,Ou]}class ny extends fe{constructor($u){super(),de(this,$u,ty,ey,ue,{unfolded:0,foldDelay:1},$b)}}function iy(_u){me(_u,"svelte-8en2lj",".point-click-helper.svelte-8en2lj{position:absolute;width:2.5rem;height:2.5rem;left:50%;top:50%;transform:translate(-50%, -50%)}")}function Nl(_u){let $u,Ru,Ou=_u[0].contentType!==ht.Link&&Gl(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,Nu){Fu[0].contentType!==ht.Link?Ou?(Ou.p(Fu,Nu),Nu&1&&z(Ou,1)):(Ou=Gl(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function Gl(_u){let $u,Ru,Ou,Fu,Nu,Vu;const Gu=[oy,sy],Uu=[];function Hu(Wu,Qu){var qu,Ku,Yu,_c;return((Ku=(qu=Wu[0].style)==null?void 0:qu.point)==null?void 0:Ku.style)==="CustomIcon"&&((_c=(Yu=Wu[0].style)==null?void 0:Yu.point)==null?void 0:_c.iconUrl)?0:1}return Ou=Hu(_u),Fu=Uu[Ou]=Gu[Ou](_u),{c(){$u=G("div"),Ru=q(),Fu.c(),Nu=Pe(),P($u,"class","point-click-helper svelte-8en2lj")},m(Wu,Qu){F(Wu,$u,Qu),F(Wu,Ru,Qu),Uu[Ou].m(Wu,Qu),F(Wu,Nu,Qu),Vu=!0},p(Wu,Qu){let qu=Ou;Ou=Hu(Wu),Ou===qu?Uu[Ou].p(Wu,Qu):(ve(),H(Uu[qu],1,1,()=>{Uu[qu]=null}),Ae(),Fu=Uu[Ou],Fu?Fu.p(Wu,Qu):(Fu=Uu[Ou]=Gu[Ou](Wu),Fu.c()),z(Fu,1),Fu.m(Nu.parentNode,Nu))},i(Wu){Vu||(z(Fu),Vu=!0)},o(Wu){H(Fu),Vu=!1},d(Wu){Wu&&Q($u),Wu&&Q(Ru),Uu[Ou].d(Wu),Wu&&Q(Nu)}}}function sy(_u){let $u,Ru;return $u=new ny({props:{unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&1&&(Nu.unfolded=Ou[0].state.unfolded),Fu&2&&(Nu.foldDelay=Ou[1]),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function oy(_u){let $u,Ru;return $u=new Kb({props:{iconUrl:_u[0].style.point.iconUrl,unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&1&&(Nu.iconUrl=Ou[0].style.point.iconUrl),Fu&1&&(Nu.unfolded=Ou[0].state.unfolded),Fu&2&&(Nu.foldDelay=Ou[1]),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function ry(_u){var $u,Ru,Ou;let Fu,Nu,Vu=(($u=_u[0].pointTagStyle)==null?void 0:$u.leftPercent)&&((Ru=_u[0].pointTagStyle)==null?void 0:Ru.topPercent)&&_u[0].enabled!==!1&&_u[0].state&&((Ou=_u[0].temporaryState)==null?void 0:Ou.visible)!==!1&&Nl(_u);return{c(){Vu&&Vu.c(),Fu=Pe()},m(Gu,Uu){Vu&&Vu.m(Gu,Uu),F(Gu,Fu,Uu),Nu=!0},p(Gu,[Uu]){var Hu,Wu,Qu;((Hu=Gu[0].pointTagStyle)==null?void 0:Hu.leftPercent)&&((Wu=Gu[0].pointTagStyle)==null?void 0:Wu.topPercent)&&Gu[0].enabled!==!1&&Gu[0].state&&((Qu=Gu[0].temporaryState)==null?void 0:Qu.visible)!==!1?Vu?(Vu.p(Gu,Uu),Uu&1&&z(Vu,1)):(Vu=Nl(Gu),Vu.c(),z(Vu,1),Vu.m(Fu.parentNode,Fu)):Vu&&(ve(),H(Vu,1,1,()=>{Vu=null}),Ae())},i(Gu){Nu||(z(Vu),Nu=!0)},o(Gu){H(Vu),Nu=!1},d(Gu){Vu&&Vu.d(Gu),Gu&&Q(Fu)}}}function ay(_u,$u,Ru){let Ou;var Fu,Nu;let{tag:Vu}=$u;return _u.$$set=Gu=>{"tag"in Gu&&Ru(0,Vu=Gu.tag)},_u.$$.update=()=>{_u.$$.dirty&13&&Ru(1,Ou=Ru(3,Nu=Ru(2,Fu=Vu.style)===null||Fu===void 0?void 0:Fu.foldedPointDelay)!==null&&Nu!==void 0?Nu:Vu.contentType===ht.Marketing?600:void 0)},[Vu,Ou,Fu,Nu]}class ly extends fe{constructor($u){super(),de(this,$u,ay,ry,ue,{tag:0},iy)}}function cy(_u){me(_u,"svelte-1vzhbu2",".wrapper.svelte-1vzhbu2{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}.point.svelte-1vzhbu2{-webkit-tap-highlight-color:transparent;position:absolute;transform:translate(-50%, -50%);left:50%;top:50%}")}function Wl(_u){let $u,Ru;return $u=new ju({props:{mediaStore:_u[4],withAnimation:_u[0],tag:Ne(_u[1]),hooks:_u[2],state:_u[3],temporaryState:_u[5]}}),{c(){re($u.$$.fragment)},m(Ou,Fu){se($u,Ou,Fu),Ru=!0},p(Ou,Fu){const Nu={};Fu&16&&(Nu.mediaStore=Ou[4]),Fu&1&&(Nu.withAnimation=Ou[0]),Fu&2&&(Nu.tag=Ne(Ou[1])),Fu&4&&(Nu.hooks=Ou[2]),Fu&8&&(Nu.state=Ou[3]),Fu&32&&(Nu.temporaryState=Ou[5]),$u.$set(Nu)},i(Ou){Ru||(z($u.$$.fragment,Ou),Ru=!0)},o(Ou){H($u.$$.fragment,Ou),Ru=!1},d(Ou){oe($u,Ou)}}}function Xl(_u){let $u,Ru,Ou,Fu,Nu;return Ru=new ly({props:{tag:_u[1]}}),{c(){$u=G("div"),re(Ru.$$.fragment),P($u,"class","point svelte-1vzhbu2")},m(Vu,Gu){F(Vu,$u,Gu),se(Ru,$u,null),Ou=!0,Fu||(Nu=je($u,"click",So(_u[11])),Fu=!0)},p(Vu,Gu){const Uu={};Gu&2&&(Uu.tag=Vu[1]),Ru.$set(Uu)},i(Vu){Ou||(z(Ru.$$.fragment,Vu),Ou=!0)},o(Vu){H(Ru.$$.fragment,Vu),Ou=!1},d(Vu){Vu&&Q($u),oe(Ru),Fu=!1,Nu()}}}function uy(_u){var $u,Ru;let Ou,Fu,Nu,Vu,Gu=_u[1].dimensionType===wt.Two&&Wl(_u),Uu=_u[1].pointType===ut.PointTag&&((Ru=($u=_u[1].style)==null?void 0:$u.point)==null?void 0:Ru.style)!=="noPoint"&&Xl(_u);return{c(){Ou=G("div"),Gu&&Gu.c(),Fu=q(),Uu&&Uu.c(),P(Ou,"class","wrapper svelte-1vzhbu2"),P(Ou,"data-id",Nu=_u[1].id),ie(Ou,"hide",_u[10]),ie(Ou,"unfolded",_u[6]),X(Ou,"left",_u[9]),X(Ou,"top",_u[8]),X(Ou,"z-index",_u[7])},m(Hu,Wu){F(Hu,Ou,Wu),Gu&&Gu.m(Ou,null),W(Ou,Fu),Uu&&Uu.m(Ou,null),Vu=!0},p(Hu,[Wu]){var Qu,qu;Hu[1].dimensionType===wt.Two?Gu?(Gu.p(Hu,Wu),Wu&2&&z(Gu,1)):(Gu=Wl(Hu),Gu.c(),z(Gu,1),Gu.m(Ou,Fu)):Gu&&(ve(),H(Gu,1,1,()=>{Gu=null}),Ae()),Hu[1].pointType===ut.PointTag&&((qu=(Qu=Hu[1].style)==null?void 0:Qu.point)==null?void 0:qu.style)!=="noPoint"?Uu?(Uu.p(Hu,Wu),Wu&2&&z(Uu,1)):(Uu=Xl(Hu),Uu.c(),z(Uu,1),Uu.m(Ou,null)):Uu&&(ve(),H(Uu,1,1,()=>{Uu=null}),Ae()),(!Vu||Wu&2&&Nu!==(Nu=Hu[1].id))&&P(Ou,"data-id",Nu),(!Vu||Wu&1024)&&ie(Ou,"hide",Hu[10]),(!Vu||Wu&64)&&ie(Ou,"unfolded",Hu[6]),Wu&512&&X(Ou,"left",Hu[9]),Wu&256&&X(Ou,"top",Hu[8]),Wu&128&&X(Ou,"z-index",Hu[7])},i(Hu){Vu||(z(Gu),z(Uu),Vu=!0)},o(Hu){H(Gu),H(Uu),Vu=!1},d(Hu){Hu&&Q(Ou),Gu&&Gu.d(),Uu&&Uu.d()}}}function dy(_u,$u,Ru){let Ou,Fu,Nu,Vu,Gu,Uu;var Hu,Wu,Qu,qu;let{withAnimation:Ku=!1}=$u,{tag:Yu}=$u,{hooks:_c}=$u,{state:Ju}=$u,{mediaStore:Xu}=$u,{temporaryState:Zu}=$u,Xc,_h=!1;function ep(ap){Xc!==void 0&&clearTimeout(Xc),_h=!0,Xc=setTimeout(()=>{_h=!1},800)}const np=ap=>{_h||_c.emit("click",{event:ap,target:"TagPoint",tag:Yu})};return _u.$$set=ap=>{"withAnimation"in ap&&Ru(0,Ku=ap.withAnimation),"tag"in ap&&Ru(1,Yu=ap.tag),"hooks"in ap&&Ru(2,_c=ap.hooks),"state"in ap&&Ru(3,Ju=ap.state),"mediaStore"in ap&&Ru(4,Xu=ap.mediaStore),"temporaryState"in ap&&Ru(5,Zu=ap.temporaryState)},_u.$$.update=()=>{_u.$$.dirty&4098&&Ru(16,Ou=Ru(12,Hu=Yu.state)===null||Hu===void 0?void 0:Hu.visible),_u.$$.dirty&65536&&Ru(10,Fu=!Ou),_u.$$.dirty&8194&&Ru(6,Nu=Ru(13,Wu=Yu.state)===null||Wu===void 0?void 0:Wu.unfolded),_u.$$.dirty&16386&&Ru(9,Vu=(Ru(14,Qu=Yu.pointTagStyle)===null||Qu===void 0?void 0:Qu.leftPercent)+"%"),_u.$$.dirty&32770&&Ru(8,Gu=(Ru(15,qu=Yu.pointTagStyle)===null||qu===void 0?void 0:qu.topPercent)+"%"),_u.$$.dirty&2&&Ru(7,Uu=Yu.contentType===ht.Link?1:0),_u.$$.dirty&64&&ep()},[Ku,Yu,_c,Ju,Xu,Zu,Nu,Uu,Gu,Vu,Fu,np,Hu,Wu,Qu,qu,Ou]}class fy extends fe{constructor($u){super(),de(this,$u,dy,uy,ue,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},cy)}}function hy(_u){me(_u,"svelte-1eci49s",".tag--container.svelte-1eci49s{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tag.hide.svelte-1eci49s{display:none}.withAnimation.svelte-1eci49s{transition:opacity 0.3s linear}.tag--container.hide.svelte-1eci49s{opacity:0;pointer-events:none}.tag--container.hide.svelte-1eci49s *{pointer-events:none}")}function Yl(_u,$u,Ru){const Ou=_u.slice();return Ou[6]=$u[Ru],Ou}function _l(_u){let $u,Ru=[],Ou=new Map,Fu,Nu=_u[1];const Vu=Gu=>Gu[6].id;for(let Gu=0;Gu<Nu.length;Gu+=1){let Uu=Yl(_u,Nu,Gu),Hu=Vu(Uu);Ou.set(Hu,Ru[Gu]=Ul(Hu,Uu))}return{c(){$u=G("div");for(let Gu=0;Gu<Ru.length;Gu+=1)Ru[Gu].c();P($u,"class","tag--container svelte-1eci49s"),ie($u,"hide",!_u[3].visible||!_u[5].visible),ie($u,"withAnimation",_u[0])},m(Gu,Uu){F(Gu,$u,Uu);for(let Hu=0;Hu<Ru.length;Hu+=1)Ru[Hu].m($u,null);Fu=!0},p(Gu,Uu){Uu&63&&(Nu=Gu[1],ve(),Ru=gt(Ru,Uu,Vu,1,Gu,Nu,Ou,$u,Wt,Ul,null,Yl),Ae()),(!Fu||Uu&40)&&ie($u,"hide",!Gu[3].visible||!Gu[5].visible),(!Fu||Uu&1)&&ie($u,"withAnimation",Gu[0])},i(Gu){if(!Fu){for(let Uu=0;Uu<Nu.length;Uu+=1)z(Ru[Uu]);Fu=!0}},o(Gu){for(let Uu=0;Uu<Ru.length;Uu+=1)H(Ru[Uu]);Fu=!1},d(Gu){Gu&&Q($u);for(let Uu=0;Uu<Ru.length;Uu+=1)Ru[Uu].d()}}}function Ul(_u,$u){let Ru,Ou,Fu,Nu;const Vu=[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}];let Gu={};for(let Uu=0;Uu<Vu.length;Uu+=1)Gu=ze(Gu,Vu[Uu]);return Ou=new fy({props:Gu}),{key:_u,first:null,c(){var Uu,Hu,Wu;Ru=G("div"),re(Ou.$$.fragment),Fu=q(),P(Ru,"class","tag svelte-1eci49s"),ie(Ru,"hide",!((Uu=$u[6].pointTagStyle)!=null&&Uu.leftPercent)||!((Hu=$u[6].pointTagStyle)!=null&&Hu.topPercent)||$u[6].enabled===!1||!$u[6].state||((Wu=$u[6].temporaryState)==null?void 0:Wu.visible)===!1),this.first=Ru},m(Uu,Hu){F(Uu,Ru,Hu),se(Ou,Ru,null),W(Ru,Fu),Nu=!0},p(Uu,Hu){var Wu,Qu,qu;$u=Uu;const Ku=Hu&63?_e(Vu,[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}]):{};Ou.$set(Ku),(!Nu||Hu&2)&&ie(Ru,"hide",!((Wu=$u[6].pointTagStyle)!=null&&Wu.leftPercent)||!((Qu=$u[6].pointTagStyle)!=null&&Qu.topPercent)||$u[6].enabled===!1||!$u[6].state||((qu=$u[6].temporaryState)==null?void 0:qu.visible)===!1)},i(Uu){Nu||(z(Ou.$$.fragment,Uu),Nu=!0)},o(Uu){H(Ou.$$.fragment,Uu),Nu=!1},d(Uu){Uu&&Q(Ru),oe(Ou)}}}function py(_u){let $u,Ru,Ou=_u[3].enabled&&_l(_u);return{c(){Ou&&Ou.c(),$u=Pe()},m(Fu,Nu){Ou&&Ou.m(Fu,Nu),F(Fu,$u,Nu),Ru=!0},p(Fu,[Nu]){Fu[3].enabled?Ou?(Ou.p(Fu,Nu),Nu&8&&z(Ou,1)):(Ou=_l(Fu),Ou.c(),z(Ou,1),Ou.m($u.parentNode,$u)):Ou&&(ve(),H(Ou,1,1,()=>{Ou=null}),Ae())},i(Fu){Ru||(z(Ou),Ru=!0)},o(Fu){H(Ou),Ru=!1},d(Fu){Ou&&Ou.d(Fu),Fu&&Q($u)}}}function my(_u,$u,Ru){let{withAnimation:Ou=!1}=$u,{tags:Fu=[]}=$u,{hooks:Nu}=$u,{state:Vu}=$u,{mediaStore:Gu}=$u,{temporaryState:Uu}=$u;return _u.$$set=Hu=>{"withAnimation"in Hu&&Ru(0,Ou=Hu.withAnimation),"tags"in Hu&&Ru(1,Fu=Hu.tags),"hooks"in Hu&&Ru(2,Nu=Hu.hooks),"state"in Hu&&Ru(3,Vu=Hu.state),"mediaStore"in Hu&&Ru(4,Gu=Hu.mediaStore),"temporaryState"in Hu&&Ru(5,Uu=Hu.temporaryState)},[Ou,Fu,Nu,Vu,Gu,Uu]}class gy extends fe{constructor($u){super(),de(this,$u,my,py,ue,{withAnimation:0,tags:1,hooks:2,state:3,mediaStore:4,temporaryState:5},hy)}}const vy={globalConfig:{initialState:{},visibleConfig:{visibleDistance:{max:5},angleRange:{min:-45,max:45}},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Link-Any":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},"Any-Marketing-Any":{unfoldedConfig:void 0},"3D-MediaPlane-PlaneTag":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{alwaysShowWhenMovePano:!0,angleRange:void 0,visibleDistance:void 0}}}};class Ay extends fs{constructor($u){super($u),g(this,"tagCacheByPanoIndex",{})}getCaches({panoIndex:$u,id:Ru,key:Ou}){var Fu,Nu,Vu,Gu;const{five:Uu}=this,Hu=(Fu=Uu.panoIndex)!=null?Fu:$u;if(Hu===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${Hu}`);const Wu=`${(Vu=(Nu=Uu.work)==null?void 0:Nu.workCode)!=null?Vu:Uu.model.uuid}-${Hu}`;let Qu=this.tagCacheByPanoIndex[Wu];return Qu||(Qu=new Map,this.tagCacheByPanoIndex[Wu]=Qu),Ru===void 0?Qu:Ou===void 0?Qu.get(Ru)||(Qu.set(Ru,{}),Qu.get(Ru)):(Gu=Qu.get(Ru))==null?void 0:Gu[Ou]}clearCache(){this.tagCacheByPanoIndex={}}}class by extends Ay{constructor($u){super($u),g(this,"tags",[]),g(this,"config",vy),g(this,"raycaster",new Raycaster)}getTagById($u){const Ru=this.tags.find(Ou=>Ou.id===$u);if(!Ru){console.error(`getTagById(): tag is ${Ru}, id is ${$u}`);return}return Ru}changeConfig($u,Ru=!0){Ru?this.config=Ct.exports({},this.config,$u):this.config=$u,this.clearCache()}changeGlobalConfig($u,Ru=!0){Ru?this.config.globalConfig=Ct.exports({},this.config.globalConfig,$u):this.config.globalConfig=$u,this.clearCache()}changeContentTypeConfig($u,Ru,Ou=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Ou?this.config.contentTypeConfig[$u]=Ct.exports({},this.config.contentTypeConfig[$u],Ru):this.config.contentTypeConfig[$u]=Ru,this.clearCache()}getVisibleByPanoIndex($u,Ru){var Ou;const Fu=this.getCaches({panoIndex:Ru,id:$u.id}),Nu=(Ou=this.five.panoIndex)!=null?Ou:Ru;if(Fu.visible!==void 0)return Fu.visible;{const Vu=(()=>{var Gu,Uu,Hu,Wu,Qu;const qu=(Gu=this.getTagConfig($u).visibleConfig)!=null?Gu:{},Ku=this.getDistance($u);if(typeof qu=="function")return qu(this.five,{tag:$u,distance:Ku});if(qu.keep==="hidden")return!1;if(qu.keep==="visible")return!0;if(qu.visiblePanoIndex!==void 0&&(Nu===void 0||!qu.visiblePanoIndex.includes(Nu))||qu.visibleDistance!==void 0&&qu.visibleDistance!=="unLimited"&&Bi(Ku,qu.visibleDistance)===!1)return!1;if(((Uu=qu.intersectRaycaster)==null?void 0:Uu.enabled)!==!1){if(Nu===void 0)return!1;const Yu=(Hu=this.five.work.observers[Nu])==null?void 0:Hu.position;if(Yu===void 0)throw new Error(`getVisible(): observerPosition is ${Yu}`);const _c=ji($u.position).sub(Yu).normalize();this.raycaster.set(Yu,_c);const[Ju]=this.five.model.intersectRaycaster(this.raycaster),Xu=(Qu=(Wu=qu.intersectRaycaster)==null?void 0:Wu.distanceAccuracy)!=null?Qu:.01;if(Ju&&Ju.distance+Xu<Ku)return!1}return!(qu.angleRange&&$u.dimensionType===wt.Three&&Bi(this.getAngle($u),qu.angleRange)===!1)})();return Fu.visible=Vu,Fu.visible}}getUnfoldedByPanoIndex($u,Ru){if(!this.getVisibleByPanoIndex($u))return;const Ou=this.getCaches({panoIndex:Ru,id:$u.id});if(Ou.unfolded!==void 0)return Ou.unfolded;{const Fu=this.getTagConfig($u).unfoldedConfig;if(!Fu)return;const Nu=(()=>{const Gu=this.getDistance($u);if(typeof Fu=="function")return Fu(this.five,{tag:$u,distance:Gu});if(Fu.keep==="folded")return!1;if(Fu.keep==="unfolded")return!0;if(Fu.disableUnfold===!0)return!1;if(Fu.disableFold===!0)return!0;if(Fu.unfoldDistance&&Bi(Gu,Fu.unfoldDistance)===!1)return!1})();Ou.unfolded=Nu;const Vu=this.getUnfoldedByCamera($u);return Vu!==void 0?Vu:Ou.unfolded}}getUnfoldedByCamera($u){return this.getVisibleByPanoIndex($u)?(()=>{var Ru;const Ou=this.getDistance($u),Fu=this.getTagConfig($u).unfoldedConfig;if(Fu){if(typeof Fu=="function")return Fu(this.five,{tag:$u,distance:Ou});if(Fu.keep==="folded")return!1;if(Fu.keep==="unfolded")return!0;if(Fu.disableUnfold===!0)return!1;if(Fu.disableFold===!0)return!0;if(Fu.autoUnfold===void 0)return;if(Fu.autoUnfold.strategy==="ScreenPostion"){const Nu=this.getTagProject($u);if(Nu&&Bi(Nu.x,Fu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Fu.autoUnfold.strategy==="MinimumDistance"){const Nu=this.filterPointTag().filter(Vu=>this.getVisibleByPanoIndex(Vu)).filter(Vu=>{const Gu=this.getTagProject(Vu);if(!Gu)return!1;const{x:Uu,y:Hu,z:Wu}=Gu;return!(Math.abs(Wu)>1||Math.abs(Uu)>1||Math.abs(Hu)>1)}).filter(Vu=>{var Gu;const Uu=this.getTagConfig(Vu).unfoldedConfig;return typeof Uu=="object"&&((Gu=Uu.autoUnfold)==null?void 0:Gu.strategy)==="MinimumDistance"}).map(Vu=>({id:Vu.id,distance:this.getDistance(Vu)})).filter(Vu=>Vu.distance!==void 0).sort((Vu,Gu)=>Vu.distance-Gu.distance).findIndex(Vu=>Vu.id===$u.id);if(Nu===-1||!(Nu<=((Ru=Fu.autoUnfold.maxNumber)!=null?Ru:1)-1))return!1}return!0}})():void 0}getDistance($u,Ru){var Ou,Fu,Nu;const Vu=(Ou=this.five.panoIndex)!=null?Ou:Ru;if(Vu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Vu}`);const Gu=this.getCaches({panoIndex:Ru,id:$u.id});if(Gu.distance!==void 0)return Gu.distance;{const Uu=(Nu=(Fu=this.five.work)==null?void 0:Fu.observers[Vu])==null?void 0:Nu.position;if(Uu===void 0)throw new Error(`getDistance(): observerPosition is ${Uu}`);const Hu=(()=>$u.pointType===ut.PointTag?Ht($u==null?void 0:$u.position):ji($u.position))(),Wu=Uu.distanceTo(Hu);return Gu.distance=Wu,Wu}}getAngle($u,Ru){var Ou,Fu,Nu;const Vu=(Ou=this.five.panoIndex)!=null?Ou:Ru;if(Vu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Vu}`);const Gu=this.getCaches({panoIndex:Ru,id:$u.id});if(Gu.angle!==void 0)return Gu.angle;{const Uu=(Nu=(Fu=this.five.work)==null?void 0:Fu.observers[Vu])==null?void 0:Nu.position;if(Uu===void 0)throw new Error(`getAngleRange(): observerPosition is ${Uu}`);const Hu=(()=>$u.pointType===ut.PointTag?$n($u.normal):su($u.position))();if(!Hu)return;const Wu=new Vector3().copy(Uu).sub(ji($u.position)),Qu=Hu.angleTo(Wu)*180/Math.PI;return Gu.angle=Qu,Gu.angle}}getTagConfig($u){var Ru;if(!$u)return(Ru=this.config.globalConfig)!=null?Ru:{};const Ou={};return this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Fu=>{const Nu=Fu;if(Ou[Nu])return;const Vu=Nu.split("-"),[Gu="Any",Uu="Any",Hu="Any"]=Vu||[];($u.dimensionType===Gu||Gu==="Any")&&($u.contentType===Uu||Uu==="Any")&&($u.pointType===Hu||Hu==="Any")&&(Ou[Nu]=this.config.contentTypeConfig[Nu])}),Ct.exports({},this.config.globalConfig,...Object.values(Ou),$u.config)}canBe($u,Ru){const Ou=this.getTagConfig(Ru);if(!Ou||typeof Ou!="object")return!0;if($u==="show"||$u==="hide"){if(!Ou.visibleConfig||typeof Ou.visibleConfig!="object")return!0;if($u==="show"&&Ou.visibleConfig.keep==="hidden"||$u==="hide"&&(Ou.visibleConfig.keep==="visible"||Ou.visibleConfig.alwaysShowWhenMovePano))return!1}if($u==="fold"||$u==="unfold"){if(!Ou.unfoldedConfig||typeof Ou.unfoldedConfig!="object")return!0;if($u==="fold"&&(Ou.unfoldedConfig.disableFold||Ou.unfoldedConfig.keep==="unfolded")||$u==="unfold"&&(Ou.unfoldedConfig.disableUnfold||Ou.unfoldedConfig.keep==="folded"))return!1}return!0}setPointTagPosition(){const $u=this.filterPointTag();$u.length!==0&&$u.forEach(Ru=>{var Ou;if(!((Ou=Ru.state)!=null&&Ou.visible)){Ru.pointTagStyle=void 0;return}const Fu=this.getTagProject(Ru);if(!Fu){Ru.pointTagStyle=void 0;return}Ru.pointTagStyle={leftPercent:(Fu.x+1)/2*100,topPercent:(-Fu.y+1)/2*100}})}setVisibleByPanoIndex(){this.tags.forEach($u=>{const Ru=this.getVisibleByPanoIndex($u);$u.state&&($u.state.visible=Ru)})}setUnfoldedByPanoIndex(){this.tags.forEach($u=>{const Ru=this.getUnfoldedByPanoIndex($u);if(!!$u.state&&(Ru!==void 0&&($u.state.unfolded=Ru),Ru&&!$u.state.visible)){const Ou=this.getTagConfig($u);typeof Ou.unfoldedConfig=="object"&&Ou.unfoldedConfig.autoUnfoldWhenHide!==!1&&($u.state.unfolded=!1)}})}getTagProject($u){if(!this.getVisibleByPanoIndex($u))return;const Ru=ji($u.position),{x:Ou,y:Fu,z:Nu}=Ru.project(this.five.camera);if(!(Nu>1))return{x:Ou,y:Fu,z:Nu}}filterPointTag(){return this.tags.filter($u=>$u.pointType===ut.PointTag)}filterTag2D(){return this.tags.filter($u=>$u.dimensionType===wt.Two)}filter3DPointTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three&&$u.pointType===ut.PointTag)}filter3DTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three)}filterPlaneTag(){return this.tags.filter($u=>$u.dimensionType===wt.Three&&$u.pointType===ut.PlaneTag)}}const Bu="1.2.6",bo=`DnalogelPlugin-PanoTagPlugin@${Bu}`,yy=!1;class wy extends by{constructor($u,Ru){super($u),g(this,"version",Bu),g(this,"state",{enabled:!0,visible:!0}),g(this,"params"),g(this,"debug"),g(this,"css3DRenderPlugin"),g(this,"TagContainerSvelte"),g(this,"temporaryState",{visible:!0}),g(this,"mediaStore",Lo({currentMediaUrl:""})),g(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),g(this,"staticUrl"),g(this,"disposedErrorLog",()=>{console.error(`${bo} is disposed`)}),this.params=Fm({debug:!1,mergePluginDefaultConfigToLoadDataConfig:!1,config:this.config,staticConfig:{host:"vrlab-static.ljcdn.com"}},Ru),this.debug=this.params.debug,this.config=this.params.config,this.staticUrl=(()=>{var Ou;const Fu=this.params.staticConfig;if(typeof Fu=="string")return Fu;{const Nu=Fu.protocol?Fu.protocol+":":"",Vu=(Ou=Fu.host)!=null?Ou:"vrlab-static.ljcdn.com",Gu=Fu.port?":"+Fu.port:"";return`${Nu}//${Vu}${Gu}`}})(),Object.assign(window,{__PANOTAGPLUGIN_DEBUG__:this})}load($u,Ru){var Ou,Fu;this.clearTags(),console.log(bo,"load:",{data:$u}),this.params.mergePluginDefaultConfigToLoadDataConfig?this.config=Ct.exports({},this.config,{globalConfig:(Ou=$u.globalConfig)!=null?Ou:{},contentTypeConfig:(Fu=$u.contentTypeConfig)!=null?Fu:{}}):($u.globalConfig&&(this.config.globalConfig=$u.globalConfig),$u.contentTypeConfig&&(this.config.contentTypeConfig=$u.contentTypeConfig)),this.addTag($u.tagList,Ru),this.debug&&C0(this.five,this.tags)}addTag($u,Ru){const Ou=(Array.isArray($u)?$u:[$u]).map(Fu=>{const Nu=this.getTagConfig(Fu);return My(Fm({},Fu),{state:Fm({visible:void 0,unfolded:yy},Nu.initialState),hooks:new Subscribe,clickable:Nu.clickable})}).filter(Fu=>Fu.position);this.tags.push(...Ou),P0(this.five,()=>{var Fu,Nu,Vu;this.store.eventListenerDisposer&&((Nu=(Fu=this.store).eventListenerDisposer)==null||Nu.call(Fu)),this.state.enabled&&(this.store.eventListenerDisposer=this.addEventListener()),this.addResizeListener(),this.checkPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Vu=Ru==null?void 0:Ru.withAnimation)!=null?Vu:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags()})}clearTags(){this.tags=[],this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}async show($u){const{userAction:Ru=!0,withAnimation:Ou=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Ru,visibleWithAnimation:Ou}),this.hooks.emit("show",{userAction:Ru,withAnimation:Ou})}async hide($u){const{userAction:Ru=!0,withAnimation:Ou=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Ru,visibleWithAnimation:Ou}),this.hooks.emit("hide",{userAction:Ru,withAnimation:Ou})}enable($u){const{userAction:Ru=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Ru}),this.hooks.emit("enable",{userAction:Ru})}disable($u){const{userAction:Ru=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Ru}),this.hooks.emit("disable",{userAction:Ru})}dispose(){var $u,Ru,Ou,Fu,Nu,Vu;this.disposeAllCSS3DContainer(),($u=this.TagContainerSvelte)==null||$u.$destroy(),this.filter3DTag().forEach(Gu=>{var Uu;return(Uu=Gu.tag3DContentSvelte)==null?void 0:Uu.svelteApp.$destroy()}),this.tags=[],(Ru=this.store.disposers)==null||Ru.forEach(Gu=>Gu==null?void 0:Gu()),this.store.disposers=[],this.store.disposed=!0,(Fu=(Ou=this.store).eventListenerDisposer)==null||Fu.call(Ou),this.store.eventListenerDisposer=void 0,(Vu=(Nu=this.store).resizeObserverDisposer)==null||Vu.call(Nu),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.clearCache(),this.hooks.emit("dispose")}setState($u,Ru){if(this.store.disposed)return this.disposedErrorLog();const{userAction:Ou=!0,visibleWithAnimation:Fu=!1}=Ru,Nu=Fm({},this.state);this.state=Object.assign(this.state,$u),this.store.visibleWithAnimation=Fu,Nu.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Nu.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Nu,userAction:Ou})}changeTagNormalById($u,Ru){const Ou=this.getTagById($u);!Ou||!Ou.tag3DContentSvelte||(Ou.tag3DContentSvelte.currentNormal=Ht(Ru),this.updateRenderPlaneTag())}changeDataById($u,Ru,Ou=!0){const Fu=this.getTagById($u);!Fu||(Ou?Fu.data=Ct.exports({},Fu.data,Ru):Object.assign(Fu.data,Ru),this.checkPanelTag(),this.updateRenderAllTags())}changeTagById($u,Ru,Ou=!0){const Fu=this.getTagById($u);!Ru||(Ou?Ct.exports(Fu,Ru):Object.assign(Fu,Ru),(Fu==null?void 0:Fu.tag3DContentSvelte)&&(Ru==null?void 0:Ru.normal)&&(Fu.tag3DContentSvelte.currentNormal=Ht(Ru.normal)),this.updateRenderAllTags(),this.checkPanelTag())}destroyTagById($u){(Array.isArray($u)?$u:[$u]).forEach(Ru=>{const Ou=this.tags.findIndex(Fu=>Fu.id===Ru);Ou!==-1&&this.tags.splice(Ou,1)}),this.updateRenderAllTags()}pauseCurrentMedia(){this.mediaStore.set({currentMediaUrl:""})}async setVisibleAndUnfolded({withAnimation:$u}={withAnimation:!1}){return this.setVisibleByPanoIndex(),$u?new Promise((Ru,Ou)=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Ru()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())}handleShow(){this.state.visible=!0,this.updateTagContainerVisible()}handleHide(){this.state.visible=!1,this.updateTagContainerVisible()}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.updateRenderAllTags()}handleDisable(){var $u,Ru,Ou;this.state.enabled=!1,(Ru=($u=this.store).eventListenerDisposer)==null||Ru.call($u),(Ou=this.TagContainerSvelte)==null||Ou.$set({tags:[]}),this.filter3DTag().forEach(Fu=>{var Nu;(Nu=Fu.tag3DContentSvelte)==null||Nu.svelteApp.$destroy(),Fu.tag3DContentSvelte=void 0})}addEventListener(){const{five:$u,hooks:Ru}=this,Ou=this.handleFiveWantsMoveToPano.bind(this),Fu=this.handleFiveModeChange.bind(this),Nu=this.handleFiveCameraUpdate.bind(this),Vu=this.handleFiveCameraUpdateDebounce(),Gu=this.handleFivePanoArrived.bind(this),Uu=this.clickhandler.bind(this);return $u.on("wantsMoveToPano",Ou),$u.on("modeChange",Fu),$u.on("cameraUpdate",Nu),$u.on("cameraUpdate",Vu),$u.on("panoArrived",Gu),Ru.on("click",Uu),()=>{$u.off("wantsMoveToPano",Ou),$u.off("modeChange",Fu),$u.off("cameraUpdate",Nu),$u.off("cameraUpdate",Vu),$u.off("panoArrived",Gu),Ru.off("click",Uu),this.store.eventListenerDisposer=void 0}}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const $u=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=$u,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(!this.store.disposed)return;const $u=this.five.getElement(),Ru=()=>{!this.state.enabled||(this.show(),this.updateRenderAllTags())},Ou=()=>{!this.state.enabled||this.hide()},{observe:Fu,unobserve:Nu}=Ra(x0(()=>{!this.store.resizeObserverDisposer||Ou()},500),$u),{observe:Vu,unobserve:Gu}=Ra(Oa(()=>Ru(),400),$u);return Fu(),Vu(),()=>{Nu(),Gu()}}handleFiveModeChange($u){$u==="Panorama"?this.five.once("panoArrived",()=>this.temporaryShow()):this.temporaryHide()}handleFiveWantsMoveToPano(){this.tags.forEach($u=>{const Ru=this.getTagConfig($u);typeof Ru.visibleConfig=="object"&&Ru.visibleConfig.keep?$u.temporaryState=My(Fm({},$u.temporaryState),{visible:Ru.visibleConfig.keep==="visible"}):typeof Ru.visibleConfig=="object"&&Ru.visibleConfig.alwaysShowWhenMovePano?$u.temporaryState=My(Fm({},$u.temporaryState),{visible:!0}):$u.temporaryState=My(Fm({},$u.temporaryState),{visible:!1})}),this.updateRenderAllTags()}temporaryShow(){this.temporaryState.visible=!0}temporaryHide(){this.temporaryState.visible=!1}clickhandler($u){if($u.target!=="TagPoint")return;if(!$u.tag.state)return console.warn("Clickhandler: params.tag.state is undefined");const Ru=this.canBe("fold",$u.tag),Ou=this.canBe("unfold",$u.tag);Ru&&Ou&&($u.tag.state.unfolded=!$u.tag.state.unfolded,$u.tag.state.unfolded&&this.tags.forEach(Fu=>{Fu.id!==$u.tag.id&&Fu.state&&this.canBe("fold",Fu)&&(Fu.state.unfolded=!1)}),this.updateRenderAllTags())}updateRenderAllTags(){this.updateRenderPointTag(),this.updateRenderPlaneTag()}updateTagContainerVisible(){var $u;($u=this.TagContainerSvelte)==null||$u.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filter3DTag().forEach(Ru=>{var Ou;(Ou=Ru.tag3DContentSvelte)==null||Ou.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}handleFiveCameraUpdateDebounce(){return Oa(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}async handleFivePanoArrived(){await this.setVisibleAndUnfolded(),this.tags.forEach($u=>{$u.temporaryState=My(Fm({},$u.temporaryState),{visible:!0})}),this.updateRenderAllTags()}setUnfoldedByCamera(){let $u=!1;this.tags.forEach(Ru=>{const Ou=this.getUnfoldedByCamera(Ru);!Ru.state||Ou!==void 0&&(Ou===!0&&($u=!0),Ru.state.unfolded=Ou)}),$u&&this.tags.forEach(Ru=>{const Ou=this.getTagConfig(Ru).unfoldedConfig;typeof Ou=="object"&&(Ou.autoUnfold||Ou.disableFold||Ou.keep)||Ru.state&&(Ru.state.unfolded=!1)})}updateRenderPointTag(){var $u;const Ru=this.filterPointTag();if(this.setPointTagPosition(),this.TagContainerSvelte)this.TagContainerSvelte.$set({tags:Ru,state:this.state,temporaryState:this.temporaryState});else{const Ou=($u=this.five.getElement())==null?void 0:$u.parentElement;if(!Ou)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new gy({target:Ou,props:{hooks:this.hooks,tags:Ru,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateRenderPlaneTag(){[...this.filterPlaneTag(),...this.filter3DPointTag()].forEach($u=>{var Ru;if($u.tag3DContentSvelte){const{svelteApp:Ou,domContainer:Fu,initialNormal:Nu,currentNormal:Vu}=$u.tag3DContentSvelte;if(Ou.$set({tag:$u,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Nu.equals(Vu)){const Gu=new Quaternion().setFromUnitVectors(Nu,Vu);Fu.css3DObject.setRotationFromQuaternion(Gu)}}else{if(((Ru=$u.state)==null?void 0:Ru.visible)===!1)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=ri(this.five)),$u.pointType===ut.PointTag&&!$u.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Ou=$u.pointType===ut.PlaneTag?$u.position:I0(this.five.camera.position,Ht($u.position),Ht($u.normal)),Fu=$u.pointType===ut.PlaneTag?su($u.position):Ht($u.normal),Nu=this.getTagConfig($u).tag3DConfig,Vu=this.css3DRenderPlugin.create3DDomContainer(Ou,Nu);if(!Vu)return;this.store.css3DRenderDisposer.set($u.id,Vu.dispose),$u.tag3DContentSvelte={svelteApp:new ju({target:Vu.container,props:{tag:$u,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}}),domContainer:Vu,initialNormal:Fu,currentNormal:Fu}}}),this.checkPanelTag()}disposeAllCSS3DContainer(){for(const[$u,Ru]of this.store.css3DRenderDisposer)Ru==null||Ru();this.store.css3DRenderDisposer=new Map}checkPanelTag(){this.tags.forEach($u=>{var Ru;$u.dimensionType===wt.Two&&$u.pointType===ut.PointTag&&((Ru=$u.tag3DContentSvelte)==null||Ru.domContainer.dispose(),$u.tag3DContentSvelte=void 0)});for(const[$u,Ru]of this.store.css3DRenderDisposer){const Ou=this.getTagById($u);(!Ou||Ou.dimensionType!==wt.Three)&&(Ru==null||Ru(),this.store.css3DRenderDisposer.delete($u))}}}const Gw=(_u,$u)=>new wy(_u,$u);new Vector3;function PanoTag(){const _u=react$1.exports.useRef(),$u=useController(),Ru=useFiveInstance(),Ou=react$1.exports.useRef(Gw(Ru,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"},unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Nu;if(((Nu=$u.configs)==null?void 0:Nu.keyframeMap.PanoTag)===!1)return;const Fu=Vu=>{if(!Ou.current)return;const{start:Gu,end:Uu,data:Hu}=Vu,Wu=Hu,Qu=Date.now().toString(),qu=ut.PointTag,Ku=wt.Two,Yu=[Wu.vertex.x,Wu.vertex.y,Wu.vertex.z],_c=(()=>Wu.imgUrl?{id:Qu,pointType:qu,position:Yu,dimensionType:Ku,contentType:ht.ImageText,data:{text:Wu.text,mediaData:[{type:"Image",url:Wu.imgUrl}]}}:{id:Qu,pointType:qu,position:Yu,dimensionType:Ku,contentType:ht.Text,data:{text:Wu.text}})();Ou.current.load({tagList:[_c]}),_u.current=setTimeout(()=>{var Xu;const Ju=Ou.current.getTagById(Qu);!Ju||(Ju.state&&(Ju.state.unfolded=!1,Ou.current.updateRenderAllTags()),(Xu=Ju.hooks)==null||Xu.on("folded",()=>{setTimeout(()=>{Ju.state&&(Ju.state.visible=!1,Ou.current.destroyTagById(Qu))},1500)}))},Uu-Gu)};return $u.on(VreoKeyframeEnum.PanoTag,Fu),()=>{$u.off(VreoKeyframeEnum.PanoTag,Fu),_u.current&&clearTimeout(_u.current)}},[$u]),null}function evenNumber(_u,$u){const Ru=Math.round(_u);return Ru%2===0?Ru:Ru+Number($u!=null&&$u.smaller?-1:1)}function centerPoint(_u,$u){return new Vector3((_u.x+$u.x)/2,(_u.y+$u.y)/2,(_u.z+$u.z)/2)}const transformPositionToVector3=({x:_u,y:$u,z:Ru})=>new Vector3(_u,$u,Ru);function createResizeObserver(_u,$u){if(!$u||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Ru=new ResizeObserver(_u);return{observe:()=>Ru.observe($u),unobserve:()=>Ru.unobserve($u)}}}const CSS3DRenderPlugin=_u=>{const $u={disposeCallbacks:[]},Ru=(...Fu)=>{var ip,rp,op;const Nu=Fu[0].map(sp=>sp instanceof Vector3?sp:transformPositionToVector3(sp)),Vu=Fu[1];if((Nu==null?void 0:Nu.length)<4)return console.error("points must be equal or greater than than 4");if(!((ip=_u==null?void 0:_u.model)!=null&&ip.loaded))return console.error("five.model.loaded is: ",(rp=_u==null?void 0:_u.model)==null?void 0:rp.loaded);const Gu=_u.getElement();if(!Gu)return console.error("five.getElement() is "+Gu);const Uu=[],Hu=(Vu==null?void 0:Vu.ratio)||.00216;Hu<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Wu=(Vu==null?void 0:Vu.dpr)||1,Qu=(Vu==null?void 0:Vu.mode)||"front",qu=(op=Vu==null?void 0:Vu.autoRender)!=null?op:!0,Ku=(Vu==null?void 0:Vu.behindFiveContainer)||Gu.parentElement||document.body,Yu=(Vu==null?void 0:Vu.container)||document.createElement("div");Yu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:_c,mesh:Ju}=Ou(Nu,{ratio:Hu,dpr:Wu,container:Yu,mode:Qu});let Xu;const Zu=Qu==="front"&&!$u.frontMode,Xc=Qu==="behind"&&!$u.behindMode,_h=!(Zu||Xc);let ep=!1,np=null;Xc&&($u.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),Zu&&($u.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:ap,css3DRenderer:lp}=Qu==="behind"?$u.behindMode:$u.frontMode,up=(()=>{if(_h)return()=>{ap.add(_c)};{const sp=()=>{const hp=evenNumber(Gu.clientWidth,{smaller:!0}),dp=evenNumber(Gu.clientHeight,{smaller:!0});lp.setSize(hp,dp)};sp(),Xu=createResizeObserver(sp,Gu),lp.domElement.style.position="absolute",lp.domElement.style.top="0",lp.domElement.style.userSelect="none",lp.domElement.style.pointerEvents="none";const cp=()=>{ep||(np=requestAnimationFrame(cp),lp.render(ap,_u.camera))};return()=>{var hp;ap.add(_c),(hp=Xu==null?void 0:Xu.observe)==null||hp.call(Xu),cp(),Qu==="behind"&&Ju&&(_u.scene.add(Ju),Uu.push(()=>Ju&&_u.scene.remove(Ju)))}}})();Zu&&(Gu.parentElement||document.body).appendChild(lp.domElement),Xc&&Ku.appendChild(lp.domElement);const _f=()=>{var sp;return ep=!0,Uu.forEach(cp=>cp==null?void 0:cp()),ap.remove(_c),typeof np=="number"&&cancelAnimationFrame(np),ap.children.length===0&&(lp.domElement.remove(),Qu==="front"&&($u.frontMode=void 0),Qu==="behind"&&($u.behindMode=void 0),!$u.behindMode&&!$u.frontMode&&((sp=Xu==null?void 0:Xu.unobserve)==null||sp.call(Xu))),!0},tp=$u.disposeCallbacks.findIndex(sp=>sp===_f);return tp!==-1?$u.disposeCallbacks.splice(tp,1):$u.disposeCallbacks.push(_f),qu&&up(),{container:Yu,dispose:_f,css3DObject:_c,render:qu?void 0:up}},Ou=(Fu,Nu)=>{const{ratio:Vu,dpr:Gu,container:Uu,mode:Hu}=Nu,Wu=Fu[0].distanceTo(Fu[1]),Qu=Fu[1].distanceTo(Fu[2]),qu=evenNumber(Wu/Vu*Gu),Ku=evenNumber(Qu/Vu*Gu),Yu=new CSS3DObject(Uu);Yu.scale.set(Vu,Vu,Vu),Uu.style.width=qu+"px",Uu.style.height=Ku+"px",Uu.style.pointerEvents="none";const _c=centerPoint(Fu[0],Fu[2]),Ju=Fu[1].clone().sub(Fu[0]),Xu=Fu[2].clone().sub(Fu[1]),Zu=new Vector3(0,1,0).angleTo(new Vector3(0,Xu.y,Xu.z)),Xc=new Vector3(1,0,0).angleTo(new Vector3(Ju.x,0,Ju.z)),_h=Ju.angleTo(new Vector3(Ju.x,0,Ju.z)),ep=(Xu.z>0?-1:1)*Zu,np=(Ju.z<0?1:-1)*Xc,ap=(Ju.x>0&&Ju.y<0||Ju.x<0&&Ju.y>0?-1:1)*_h;Yu.rotateOnWorldAxis(new Vector3(1,0,0),ep),Yu.rotateOnWorldAxis(new Vector3(0,1,0),np),Yu.rotateOnWorldAxis(new Vector3(0,0,1),ap),Yu.position.set(_c.x,_c.y,_c.z);let lp;if(Hu==="behind"){const up=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),_f=new PlaneGeometry(qu,Ku);lp=new Mesh(_f,up),lp.name="CSS3DRenderPlugin-mesh",lp.position.copy(Yu.position),lp.rotation.copy(Yu.rotation),lp.scale.copy(Yu.scale)}return{css3DObject:Yu,mesh:lp}};return{create3DDomContainer:Ru,disposeAll:()=>{$u.disposeCallbacks.forEach(Fu=>Fu==null?void 0:Fu()),$u.disposeCallbacks=[]}}},calcPoints=(_u,$u,Ru,Ou)=>{const Fu=Ru/375,Nu=Ou/375,Vu=new PlaneGeometry(Fu,Nu);if($u){const Zu=new Vector3($u.x+_u.x,$u.y+_u.y,$u.z+_u.z);Vu.lookAt(Zu)}const Gu=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Uu=new Mesh(Vu,Gu),Hu=_u.clone();Uu.position.copy(Hu);const[Wu,Qu,qu,Ku]=Uu.geometry.vertices,Yu=Hu.clone().add(Ku),_c=Hu.clone().add(qu),Ju=Hu.clone().add(Qu),Xu=Hu.clone().add(Wu);return[Yu,_c,Xu,Ju]};function PanoTextLabel(){const _u=react$1.exports.useRef(),$u=useController(),Ru=useFiveInstance(),Ou=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Nu;if(((Nu=$u.configs)==null?void 0:Nu.keyframeMap.PanoTextLabel)===!1)return;const Fu=Vu=>{var ep,np,ap;const{start:Gu,end:Uu,data:Hu}=Vu,Wu=Hu;if(Hu.text==="")return;const{x:Qu,y:qu,z:Ku}=Wu.vertex,Yu=new Vector3(Qu,qu,Ku),_c=new Vector3((ep=Wu.normal)==null?void 0:ep.x,(np=Wu.normal)==null?void 0:np.y,(ap=Wu.normal)==null?void 0:ap.z),Ju=200,Xu=30,Zu=calcPoints(Yu,Wu.normal&&_c,Ju,Xu);Ou.current||(Ou.current=CSS3DRenderPlugin(Ru));const Xc=Ou.current.create3DDomContainer(Zu),_h=Xc==null?void 0:Xc.css3DObject;if(Hu.quaternion){const lp=new Quaternion(Hu.quaternion.x,Hu.quaternion.y,Hu.quaternion.z,Hu.quaternion.w);_h==null||_h.quaternion.copy(lp)}Xc!=null&&Xc.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Hu.fontSize||16}px`},className:"PanoText-innerText",children:Hu.text||""})})}),Xc==null?void 0:Xc.container),_u.current=setTimeout(()=>{var lp;(lp=Ou.current)==null||lp.disposeAll()},Uu-Gu)};return $u.on(VreoKeyframeEnum.PanoTextLabel,Fu),()=>{$u.off(VreoKeyframeEnum.PanoTextLabel,Fu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}function Prompter(){const[_u,$u]=react$1.exports.useState(""),[Ru,Ou]=react$1.exports.useState(!0),Fu=react$1.exports.useRef(null),Nu=useController();return react$1.exports.useEffect(()=>{var Gu;if(((Gu=Nu.configs)==null?void 0:Gu.keyframeMap.Prompter)===!1)return;const Vu=Uu=>{const{start:Hu,end:Wu,data:Qu}=Uu;$u(Qu.text),Ou(!1),Fu.current&&(clearTimeout(Fu.current),Fu.current=null),Fu.current=setTimeout(()=>{Ou(!0),$u(""),Fu.current&&clearTimeout(Fu.current),Fu.current=null},Wu-Hu)};return Nu.on(VreoKeyframeEnum.Prompter,Vu),()=>{Nu.off(VreoKeyframeEnum.Prompter,Vu)}},[Nu]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Ru,[`vreo-prompter-left--${Nu.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:_u})})})}function UpdateVRPanorama(){const _u=useController(),$u=useFiveInstance(),Ru=react$1.exports.useRef(null),Ou=react$1.exports.useRef(null),Fu=react$1.exports.useCallback(()=>{if(Ou.current=null,Ru.current){const Gu=parseWork(Ru.current);$u.load(Gu)}},[]),Nu=react$1.exports.useCallback(()=>{if(Ru.current){const Gu=parseWork(Ru.current);Object.assign(window,{$rawWork:Gu}),$u.load(Gu)}},[]),Vu=react$1.exports.useCallback(()=>{!Ou.current||$u.load(Ou.current)},[]);return react$1.exports.useEffect(()=>{const Gu=Uu=>{var Qu;Ru.current||(Ru.current=$u.work.raw.works);const Hu=Uu.data;if(Hu.work){Ou.current=parseWork(Hu.work),$u.load(Ou.current);return}const Wu=(Qu=$u.work)==null?void 0:Qu.raw.works[0];if(Hu.dynamic_scene&&!Hu.panorama){const Ku=JSON.parse(Wu).panorama,Yu=Hu.dynamic_scene.images.index;Ku.list[Yu]=Hu.dynamic_scene.images,Hu.panorama=Ku,delete Hu.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Wu),$work2:Hu,parseWork}),Ou.current=parseWork([Wu,Hu]),$u.load(Ou.current)};return _u.on(VreoKeyframeEnum.UpdateVRPanorama,Gu),_u.on(VreoKeyframeEnum.Exit,Fu),_u.on("loaded",Fu),_u.on("paused",Nu),_u.on("playing",Vu),()=>{_u.off(VreoKeyframeEnum.UpdateVRPanorama,Gu),_u.off(VreoKeyframeEnum.Exit,Fu),_u.off("loaded",Fu),_u.off("paused",Nu),_u.off("playing",Vu)}},[]),jsx(Fragment,{})}const inlinePlay=_u=>{if(!_u)return;const $u=()=>{_u.removeEventListener("canplaythrough",$u);try{_u.play()}catch{}};_u.addEventListener("canplaythrough",$u),_u.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const _u=react$1.exports.useRef(null),$u=react$1.exports.useRef(),Ru=useController(),Ou=react$1.exports.useRef(),[Fu,Nu]=react$1.exports.useState(!1),Vu=useFiveInstance(),Gu=Uu=>{!$u.current||($u.current.src=Uu)};return react$1.exports.useEffect(()=>{const Uu=async Hu=>{const{start:Wu,end:Qu}=Hu,{videoSrc:qu,fov:Ku,direction:Yu,panoIndex:_c,vector:Ju}=Hu.data,[Xu,Zu]=(()=>{if(Ju)return[Ju.longitude,Ju.latitude];if(!Yu)return[0,0];let Xc=-Math.atan2(Yu.x,-Yu.z);Xc=(Xc%PI_2+PI_2)%PI_2;const _h=-Math.asin(Yu.y/1);return[Xc,_h]})();Vu.setState({fov:Ku,panoIndex:_c,longitude:Xu,latitude:Zu},!0),Gu(qu),inlinePlay($u.current),Nu(!0),Ou.current=setTimeout(()=>{var Xc,_h;(Xc=$u.current)!=null&&Xc.paused||(_h=$u.current)==null||_h.pause(),Nu(!1),Gu("")},Qu-Wu)};return Ru.on(VreoKeyframeEnum.VideoEffect,Uu),()=>{Ru.off(VreoKeyframeEnum.VideoEffect,Uu),Ou.current&&clearTimeout(Ou.current)}},[Ru]),react$1.exports.useEffect(()=>{var Hu,Wu;if(!_u.current)return;const Uu=((Wu=(Hu=Ru.configs)==null?void 0:Hu.videos)==null?void 0:Wu.videoEffect)||document.createElement("video");Uu.setAttribute("playsinline","true"),Uu.setAttribute("webkit-playsinline","true"),Uu.setAttribute("autoplay","true"),Uu.setAttribute("key","VideoEffect-video"),Uu.setAttribute("class","VideoEffect-video"),$u.current=Uu,_u.current.append($u.current),document.addEventListener("WeixinJSBridgeReady",function(){var Qu;(Qu=$u.current)==null||Qu.play()},!1),_u.current},[]),jsx("div",{ref:_u,className:classNames("VideoEffect",{"VideoEffect--visible":Fu})})}const Preloader={blob:_u=>{const $u=()=>null;return new Promise((Ru,Ou)=>{const Fu=new XMLHttpRequest,Nu=()=>{Fu.ontimeout=$u,Fu.onreadystatechange=$u,Fu.onprogress=$u,Fu.onabort=$u};Fu.ontimeout=()=>{Ou(new Error("timeout")),Nu()},Fu.onreadystatechange=()=>{Fu.readyState===4&&(Fu.status===0&&!Fu.response||(Fu.status===200||Fu.status===0?(Ru(Fu.response),Nu()):(Ou(new Error("status:"+Fu.status)),Nu())))},Fu.open("GET",_u,!0),Fu.responseType="blob",Fu.send(null)})}};class AudioLike extends Subscribe{constructor({duration:Ru}={}){super();_m(this,"$timestamp",null);_m(this,"$currentTime",0);_m(this,"$duration",0);_m(this,"stopInterval");_m(this,"muted",!1);_m(this,"src","");Ru&&(this.$duration=Ru)}setAttribute(Ru,Ou){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Ru=performance.now();this.$currentTime+=Ru-this.$timestamp,this.$timestamp=Ru,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Ru){this.$currentTime=Ru*1e3}get duration(){return this.$duration}set duration(Ru){this.$duration=Ru}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Ru,Ou,Fu=!1){this.on(Ru,Ou)}removeEventListener(Ru,Ou,Fu=!1){this.off(Ru,Ou)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Ru,Ou,Fu,Nu,Vu={preload:!0}){var Yu,_c,Ju;if(!Vu.videoInstance)if(cacheInstance.videoInstance)Vu.videoInstance=cacheInstance.videoInstance;else{const Xu=document.createElement("video");Xu.style.opacity="0",Xu.style.pointerEvents="none",Xu.style.display="none",document.body.append(Xu),Vu.videoInstance=Xu,cacheInstance.videoInstance=Xu,Xu.playsInline=!0,Xu.controls=!1}const Gu=new PlaneGeometry(Ru,Ou,Fu,Nu),Uu=new VideoTexture(Vu.videoInstance),Hu=new ShaderMaterial({uniforms:{map:{value:Uu},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Gu,Hu);_m(this,"options");_m(this,"videoUrl");_m(this,"freeze");_m(this,"paused");_m(this,"audioInstance");_m(this,"audioLikeInstance");_m(this,"$removeEventListener");if(this.options=Vu,this.freeze=!1,this.paused=!0,Vu.audioInstance)this.audioInstance=Vu.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const Xu=document.createElement("audio");Xu.crossOrigin="",Xu.muted=!1,Xu.autoplay=!1,Xu.style.display="none",document.body.appendChild(Xu),this.audioInstance=Xu,cacheInstance.audioInstance=Xu}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Wu=Xu=>runInAction(()=>this.paused=Xu),Qu=()=>Wu(!0),qu=()=>Wu(!1),Ku=()=>console.log("vreo: video \u64AD\u653E\u7ED3\u675F");this.audioInstance.addEventListener("pause",Qu),this.audioInstance.addEventListener("play",qu),(Yu=this.options.videoInstance)==null||Yu.addEventListener("pause",Qu),(_c=this.options.videoInstance)==null||_c.addEventListener("play",qu),this.audioLikeInstance.addEventListener("pause",Qu),this.audioLikeInstance.addEventListener("play",qu),(Ju=this.options.videoInstance)==null||Ju.addEventListener("ended",Ku),this.$removeEventListener=()=>{var Xu,Zu,Xc;this.audioInstance.removeEventListener("pause",Qu),this.audioInstance.removeEventListener("play",qu),(Xu=this.options.videoInstance)==null||Xu.removeEventListener("pause",Qu),(Zu=this.options.videoInstance)==null||Zu.removeEventListener("play",qu),this.audioLikeInstance.removeEventListener("pause",Qu),this.audioLikeInstance.removeEventListener("play",qu),(Xc=this.options.videoInstance)==null||Xc.removeEventListener("ended",Ku)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Ru){if(this.videoUrl===Ru)return;this.videoUrl=Ru,this.freeze=!0,await this.mediaInstance.pause();const Ou=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Fu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Ou.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Fu,!1))};this.mediaInstance.addEventListener("timeupdate",Fu,!1)}async play(Ru="",Ou=0,Fu){return Ru=Ru||"",Fu&&!Ru?(this.currentTime&&(this.mediaInstance.currentTime=Ou),this.mediaInstance.duration=Fu,this.videoUrl="",this.mediaInstance.play(),!0):Ru?Ru===this.videoUrl?(this.mediaInstance.currentTime=Ou,await this.mediaInstance.play(),!0):(await this.update(Ru),this.mediaInstance.pause(),await new Promise(Nu=>setTimeout(async()=>{this.mediaInstance.currentTime=Ou,await this.mediaInstance.play(),Nu(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor($u,Ru){_m(this,"videoAgentMesh");_m(this,"scene",new Scene);_m(this,"camera",new OrthographicCamera(-240,240,135,-135));_m(this,"renderer",new WebGLRenderer({alpha:!0}));_m(this,"disposers",[]);_m(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});_m(this,"dispose",()=>{var $u;($u=this.videoAgentMesh)==null||$u.dispose(),this.disposers.forEach(Ru=>Ru==null?void 0:Ru())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Ru),$u){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Ou=this.renderer.domElement;Ou.classList.add("VideoAgent-canvas");const Fu=addResizeListener($u,(Nu,Vu)=>{this.renderer.setSize(Nu*window.devicePixelRatio,Vu*window.devicePixelRatio),Ou.style.width=`${Nu}px`,Ou.style.height=`${Vu}px`});this.disposers.push(Fu),$u.append(Ou),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(_u){var Nu;const $u=react$1.exports.useRef(null),Ru=useController(),Ou=react$1.exports.useMemo(()=>{var Vu;return((Vu=Ru.avatar)==null?void 0:Vu.url)&&Ru.avatar.force===!0},[Ru.avatar]),Fu=react$1.exports.useMemo(()=>{var Vu;return Ou?!1:((Vu=Ru.videoAgentScene)==null?void 0:Vu.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Ru.videoAgentScene,Ou]);return react$1.exports.useEffect(()=>{if(!$u.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Ru.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Vu=new VideoAgentScene($u.current,_u.options);return Ru.videoAgentScene=Vu,()=>{var Gu;Ru.dispose(),(Gu=Ru.videoAgentScene)==null||Gu.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Ou?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Nu=Ru.avatar)==null?void 0:Nu.url,onClick:()=>{var Vu;return(Vu=_u.onClick)==null?void 0:Vu.call(_u)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Fu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:$u,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Vu;return(Vu=_u.onClick)==null?void 0:Vu.call(_u)}})})})})})]})}function getAudio(_u="",$u=0){const Ru=new Audio;return Ru.src=_u,Ru.currentTime=$u,Ru}function BgMusic(){const _u=useController(),$u=react$1.exports.useRef(null),Ru=react$1.exports.useCallback(()=>{$u.current&&(clearTimeout($u.current),$u.current=null)},[]);return react$1.exports.useEffect(()=>{const Ou=async(Fu,Nu)=>{const{start:Vu,end:Gu}=Fu,Uu=getAudio(Fu.data.url,Math.max((Nu-Vu)/1e3,0)),Hu=()=>{Uu.play()};Uu.addEventListener("canplaythrough",Hu),Ru();const Wu=()=>{Uu.removeEventListener("canplaythrough",Hu),Uu.pause(),Ru()};Uu.addEventListener("ended",Wu),_u.once("paused",()=>{Wu()})};return _u.on(VreoKeyframeEnum.BgMusic,Ou),()=>{console.log("off"),_u.off(VreoKeyframeEnum.BgMusic,Ou),Ru()}}),jsx(Fragment,{})}const prefix="https://vr-public.realsee-cdn.cn/release/static/image/release/",WAVES={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},userAgent=typeof navigator!="undefined"?navigator.userAgent:"",isAppleDevice=/(iPhone|iPad|iPod)/i.test(userAgent),isSafari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)&&/version/i.test(userAgent),isMicroMessenger=/microMessenger/i.test(userAgent),canPlayHevc=isAppleDevice||isSafari,canPlayVp9=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function Wave(_u){const $u=React.useMemo(()=>{var Nu;const Fu=(Nu=_u==null?void 0:_u.appearance)!=null?Nu:"solid";return WAVES[Fu]},[_u==null?void 0:_u.appearance]),Ru=React.useMemo(()=>$u.height/$u.width,[$u]);let Ou=null;return isMicroMessenger?Ou=jsx(KeyframeWaveContent,{wave:$u}):canPlayHevc?Ou=jsx(VideoWaveContent,{format:"hevc",wave:$u}):canPlayVp9?Ou=jsx(VideoWaveContent,{format:"vp9",wave:$u}):Ou=jsx(KeyframeWaveContent,{wave:$u}),jsx("div",{className:"vreo-wave",children:jsx("div",{style:{position:"relative",width:"100%",paddingTop:`${Ru*100}%`},children:jsx("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0},children:Ou})})})}const VideoWaveContent=({wave:_u,format:$u})=>{const Ru=react$1.exports.useRef(null),[Ou,Fu]=react$1.exports.useState(!1),[Nu,Vu]=react$1.exports.useState(!1),Gu=prefix+_u[$u];react$1.exports.useEffect(()=>{Fu(!1)},[Gu]);const Uu=react$1.exports.useCallback(()=>{Ru.current&&Ru.current.play(),Fu(!0)},[]),Hu=react$1.exports.useCallback(()=>{Vu(!0)},[]);return Nu?jsx(KeyframeWaveContent,{wave:_u}):jsx("video",{style:{opacity:Ou?1:0},preload:"auto",ref:Ru,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:Uu,onError:Hu,muted:!0,loop:!0,src:Gu})},KeyframeWaveContent=({wave:_u})=>{const $u=prefix+_u.png;return jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${$u})`,backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:`steps(${_u.frames-1})`,animationDuration:`${_u.frames/25}s`,animationIterationCount:"infinite"}})},AppView=observer(({controller:_u})=>{var $u,Ru;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!_u.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[_u.waveAppearance&&jsx(Wave,{appearance:_u.waveAppearance}),jsx(VideoAgent,{onClick:()=>{_u.playing?_u.setPlaying(!1):_u.setPlaying(!0)},options:(($u=_u.configs)==null?void 0:$u.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Ru=_u.configs)==null?void 0:Ru.customPanelChildren]})})});function App(){const _u=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:_u})]})}const DrawerView=observer(({controller:_u})=>{var Ou;const $u="400px",Ru=(()=>{var Nu;const Fu=(Nu=_u.drawerConfig)==null?void 0:Nu.height;return Fu?typeof Fu=="number"?Fu+"px":Fu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":_u.drawerConfig&&_u.drawerConfig.content}),onClick:()=>_u.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Ru,maxHeight:$u},children:((Ou=_u.drawerConfig)==null?void 0:Ou.content)||""})})});function Drawer(){const _u=useController();return jsx(DrawerView,{controller:_u})}const PopUpView=observer(({controller:_u})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":_u.popUp}),onClick:()=>_u.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:_u.popUp||""})}));function PopUp(){const _u=useController();return jsx(PopUpView,{controller:_u})}class Player extends Subscribe{constructor(Ru,Ou={}){var Fu;super();_m(this,"$five");_m(this,"controller");_m(this,"configs");if(this.$five=Ru,Ou.container||(Ou.container=Ou.containter),!Ou.container){const Nu=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Nu),Nu.setAttribute("id","vreo-app"),Ou.container=Nu;const Vu=(Fu=Ru.getElement())==null?void 0:Fu.parentNode;Vu?Vu.append(Nu):document.body.append(Nu)}Ou.container.classList.contains("vreo-app")||Ou.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Ou)),this.controller=new Controller({five:Ru,container:Ou.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Nu,Vu)=>jsx(Nu,{subscribe:{on:(Gu,Uu)=>this.on(Gu,Uu),once:(Gu,Uu)=>this.once(Gu,Uu),off:(Gu,Uu)=>this.off(Gu,Uu)},five:Ru},Vu))]}),Ou.container),reaction(()=>this.controller.ended,Nu=>{Nu&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Nu=>{this.controller.ended||this.emit(Nu?"playing":"paused")})}async load(Ru,Ou=0,Fu=!1,Nu=!1){var Vu,Gu,Uu,Hu;if(this.controller.setLoading(!0),Nu&&(Ru=JSON.parse(JSON.stringify(Ru))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(Wu=>{setTimeout(()=>Wu(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Ru,(Vu=this.controller.mediaInstance)==null||Vu.pause(),this.$five.imageOptions.size&&((Gu=this.configs.imageOptions)==null?void 0:Gu.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Fu||Fu===void 0&&this.configs.autoPreload){const Wu=Ru.keyframes.filter(qu=>!(qu.type!==VreoKeyframeEnum.CameraMovement||qu.data.panoIndex===void 0)).reduce((qu,Ku)=>{const Yu=Ku.data.panoIndex;return qu[Yu]||(qu[Yu]=!0),qu},{}),Qu=Object.keys(Wu);for(let qu=0;qu<Qu.length;qu++)await this.$five.preloadPano(Number(Qu[qu]))}return this.emit("loaded",Ru),this.controller.emit("loaded",Ru),(Uu=this.controller.videoAgentScene)!=null&&Uu.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Ou/1e3),this.controller.setAvatar(Ru.video.avatar),await((Hu=this.controller.videoAgentScene)==null?void 0:Hu.videoAgentMesh.play(Ru.video.url,Ou/1e3,Ru.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Wu,Qu)=>this.emit(Wu,Qu,this.controller.currentTime)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Ru){return this.controller.playing||(Ru&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Ru/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setEnded(!1),this.controller.setPlaying(!0)),!0}setAppearance(Ru){this.controller.setAppearance(Ru)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.pause(),this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
