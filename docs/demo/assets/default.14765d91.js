var sv=Object.defineProperty;var lv=(_u,$u,Tu)=>$u in _u?sv(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu;var hm=(_u,$u,Tu)=>(lv(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const p$e=function(){const $u=document.createElement("link").relList;if($u&&$u.supports&&$u.supports("modulepreload"))return;for(const Pu of document.querySelectorAll('link[rel="modulepreload"]'))Cu(Pu);new MutationObserver(Pu=>{for(const Bu of Pu)if(Bu.type==="childList")for(const Lu of Bu.addedNodes)Lu.tagName==="LINK"&&Lu.rel==="modulepreload"&&Cu(Lu)}).observe(document,{childList:!0,subtree:!0});function Tu(Pu){const Bu={};return Pu.integrity&&(Bu.integrity=Pu.integrity),Pu.referrerpolicy&&(Bu.referrerPolicy=Pu.referrerpolicy),Pu.crossorigin==="use-credentials"?Bu.credentials="include":Pu.crossorigin==="anonymous"?Bu.credentials="omit":Bu.credentials="same-origin",Bu}function Cu(Pu){if(Pu.ep)return;Pu.ep=!0;const Bu=Tu(Pu);fetch(Pu.href,Bu)}};p$e();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(_u){if(_u.__esModule)return _u;var $u=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(_u).forEach(function(Tu){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}),$u}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(_u){if(_u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_u)}function shouldUseNative(){try{if(!Object.assign)return!1;var _u=new String("abc");if(_u[5]="de",Object.getOwnPropertyNames(_u)[0]==="5")return!1;for(var $u={},Tu=0;Tu<10;Tu++)$u["_"+String.fromCharCode(Tu)]=Tu;var Cu=Object.getOwnPropertyNames($u).map(function(Bu){return $u[Bu]});if(Cu.join("")!=="0123456789")return!1;var Pu={};return"abcdefghijklmnopqrst".split("").forEach(function(Bu){Pu[Bu]=Bu}),Object.keys(Object.assign({},Pu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(_u,$u){for(var Tu,Cu=toObject(_u),Pu,Bu=1;Bu<arguments.length;Bu++){Tu=Object(arguments[Bu]);for(var Lu in Tu)hasOwnProperty.call(Tu,Lu)&&(Cu[Lu]=Tu[Lu]);if(getOwnPropertySymbols){Pu=getOwnPropertySymbols(Tu);for(var Ru=0;Ru<Pu.length;Ru++)propIsEnumerable.call(Tu,Pu[Ru])&&(Cu[Pu[Ru]]=Tu[Pu[Ru]])}}return Cu};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$b=objectAssign,n$g=typeof Symbol=="function"&&Symbol.for,p$d=n$g?Symbol.for("react.element"):60103,q$9=n$g?Symbol.for("react.portal"):60106,r$c=n$g?Symbol.for("react.fragment"):60107,t$9=n$g?Symbol.for("react.strict_mode"):60108,u$c=n$g?Symbol.for("react.profiler"):60114,v$b=n$g?Symbol.for("react.provider"):60109,w$9=n$g?Symbol.for("react.context"):60110,x$c=n$g?Symbol.for("react.forward_ref"):60112,y$8=n$g?Symbol.for("react.suspense"):60113,z$6=n$g?Symbol.for("react.memo"):60115,A$a=n$g?Symbol.for("react.lazy"):60116,B$b=typeof Symbol=="function"&&Symbol.iterator;function C$a(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Tu=1;Tu<arguments.length;Tu++)$u+="&args[]="+encodeURIComponent(arguments[Tu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$h={};function F$b(_u,$u,Tu){this.props=_u,this.context=$u,this.refs=E$h,this.updater=Tu||D$8}F$b.prototype.isReactComponent={};F$b.prototype.setState=function(_u,$u){if(typeof _u!="object"&&typeof _u!="function"&&_u!=null)throw Error(C$a(85));this.updater.enqueueSetState(this,_u,$u,"setState")};F$b.prototype.forceUpdate=function(_u){this.updater.enqueueForceUpdate(this,_u,"forceUpdate")};function G$8(){}G$8.prototype=F$b.prototype;function H$8(_u,$u,Tu){this.props=_u,this.context=$u,this.refs=E$h,this.updater=Tu||D$8}var I$b=H$8.prototype=new G$8;I$b.constructor=H$8;l$b(I$b,F$b.prototype);I$b.isPureReactComponent=!0;var J$9={current:null},K$a=Object.prototype.hasOwnProperty,L$c={key:!0,ref:!0,__self:!0,__source:!0};function M$c(_u,$u,Tu){var Cu,Pu={},Bu=null,Lu=null;if($u!=null)for(Cu in $u.ref!==void 0&&(Lu=$u.ref),$u.key!==void 0&&(Bu=""+$u.key),$u)K$a.call($u,Cu)&&!L$c.hasOwnProperty(Cu)&&(Pu[Cu]=$u[Cu]);var Ru=arguments.length-2;if(Ru===1)Pu.children=Tu;else if(1<Ru){for(var Ou=Array(Ru),Du=0;Du<Ru;Du++)Ou[Du]=arguments[Du+2];Pu.children=Ou}if(_u&&_u.defaultProps)for(Cu in Ru=_u.defaultProps,Ru)Pu[Cu]===void 0&&(Pu[Cu]=Ru[Cu]);return{$$typeof:p$d,type:_u,key:Bu,ref:Lu,props:Pu,_owner:J$9.current}}function N$8(_u,$u){return{$$typeof:p$d,type:_u.type,key:$u,ref:_u.ref,props:_u.props,_owner:_u._owner}}function O$d(_u){return typeof _u=="object"&&_u!==null&&_u.$$typeof===p$d}function escape$1(_u){var $u={"=":"=0",":":"=2"};return"$"+(""+_u).replace(/[=:]/g,function(Tu){return $u[Tu]})}var P$f=/\/+/g,Q$8=[];function R$f(_u,$u,Tu,Cu){if(Q$8.length){var Pu=Q$8.pop();return Pu.result=_u,Pu.keyPrefix=$u,Pu.func=Tu,Pu.context=Cu,Pu.count=0,Pu}return{result:_u,keyPrefix:$u,func:Tu,context:Cu,count:0}}function S$9(_u){_u.result=null,_u.keyPrefix=null,_u.func=null,_u.context=null,_u.count=0,10>Q$8.length&&Q$8.push(_u)}function T$7(_u,$u,Tu,Cu){var Pu=typeof _u;(Pu==="undefined"||Pu==="boolean")&&(_u=null);var Bu=!1;if(_u===null)Bu=!0;else switch(Pu){case"string":case"number":Bu=!0;break;case"object":switch(_u.$$typeof){case p$d:case q$9:Bu=!0}}if(Bu)return Tu(Cu,_u,$u===""?"."+U$a(_u,0):$u),1;if(Bu=0,$u=$u===""?".":$u+":",Array.isArray(_u))for(var Lu=0;Lu<_u.length;Lu++){Pu=_u[Lu];var Ru=$u+U$a(Pu,Lu);Bu+=T$7(Pu,Ru,Tu,Cu)}else if(_u===null||typeof _u!="object"?Ru=null:(Ru=B$b&&_u[B$b]||_u["@@iterator"],Ru=typeof Ru=="function"?Ru:null),typeof Ru=="function")for(_u=Ru.call(_u),Lu=0;!(Pu=_u.next()).done;)Pu=Pu.value,Ru=$u+U$a(Pu,Lu++),Bu+=T$7(Pu,Ru,Tu,Cu);else if(Pu==="object")throw Tu=""+_u,Error(C$a(31,Tu==="[object Object]"?"object with keys {"+Object.keys(_u).join(", ")+"}":Tu,""));return Bu}function V$b(_u,$u,Tu){return _u==null?0:T$7(_u,"",$u,Tu)}function U$a(_u,$u){return typeof _u=="object"&&_u!==null&&_u.key!=null?escape$1(_u.key):$u.toString(36)}function W$8(_u,$u){_u.func.call(_u.context,$u,_u.count++)}function aa$3(_u,$u,Tu){var Cu=_u.result,Pu=_u.keyPrefix;_u=_u.func.call(_u.context,$u,_u.count++),Array.isArray(_u)?X$7(_u,Cu,Tu,function(Bu){return Bu}):_u!=null&&(O$d(_u)&&(_u=N$8(_u,Pu+(!_u.key||$u&&$u.key===_u.key?"":(""+_u.key).replace(P$f,"$&/")+"/")+Tu)),Cu.push(_u))}function X$7(_u,$u,Tu,Cu,Pu){var Bu="";Tu!=null&&(Bu=(""+Tu).replace(P$f,"$&/")+"/"),$u=R$f($u,Bu,Cu,Pu),V$b(_u,aa$3,$u),S$9($u)}var Y$6={current:null};function Z$5(){var _u=Y$6.current;if(_u===null)throw Error(C$a(321));return _u}var ba$3={ReactCurrentDispatcher:Y$6,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$9,IsSomeRendererActing:{current:!1},assign:l$b};react_production_min.Children={map:function(_u,$u,Tu){if(_u==null)return _u;var Cu=[];return X$7(_u,Cu,null,$u,Tu),Cu},forEach:function(_u,$u,Tu){if(_u==null)return _u;$u=R$f(null,null,$u,Tu),V$b(_u,W$8,$u),S$9($u)},count:function(_u){return V$b(_u,function(){return null},null)},toArray:function(_u){var $u=[];return X$7(_u,$u,null,function(Tu){return Tu}),$u},only:function(_u){if(!O$d(_u))throw Error(C$a(143));return _u}};react_production_min.Component=F$b;react_production_min.Fragment=r$c;react_production_min.Profiler=u$c;react_production_min.PureComponent=H$8;react_production_min.StrictMode=t$9;react_production_min.Suspense=y$8;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(_u,$u,Tu){if(_u==null)throw Error(C$a(267,_u));var Cu=l$b({},_u.props),Pu=_u.key,Bu=_u.ref,Lu=_u._owner;if($u!=null){if($u.ref!==void 0&&(Bu=$u.ref,Lu=J$9.current),$u.key!==void 0&&(Pu=""+$u.key),_u.type&&_u.type.defaultProps)var Ru=_u.type.defaultProps;for(Ou in $u)K$a.call($u,Ou)&&!L$c.hasOwnProperty(Ou)&&(Cu[Ou]=$u[Ou]===void 0&&Ru!==void 0?Ru[Ou]:$u[Ou])}var Ou=arguments.length-2;if(Ou===1)Cu.children=Tu;else if(1<Ou){Ru=Array(Ou);for(var Du=0;Du<Ou;Du++)Ru[Du]=arguments[Du+2];Cu.children=Ru}return{$$typeof:p$d,type:_u.type,key:Pu,ref:Bu,props:Cu,_owner:Lu}};react_production_min.createContext=function(_u,$u){return $u===void 0&&($u=null),_u={$$typeof:w$9,_calculateChangedBits:$u,_currentValue:_u,_currentValue2:_u,_threadCount:0,Provider:null,Consumer:null},_u.Provider={$$typeof:v$b,_context:_u},_u.Consumer=_u};react_production_min.createElement=M$c;react_production_min.createFactory=function(_u){var $u=M$c.bind(null,_u);return $u.type=_u,$u};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_u){return{$$typeof:x$c,render:_u}};react_production_min.isValidElement=O$d;react_production_min.lazy=function(_u){return{$$typeof:A$a,_ctor:_u,_status:-1,_result:null}};react_production_min.memo=function(_u,$u){return{$$typeof:z$6,type:_u,compare:$u===void 0?null:$u}};react_production_min.useCallback=function(_u,$u){return Z$5().useCallback(_u,$u)};react_production_min.useContext=function(_u,$u){return Z$5().useContext(_u,$u)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(_u,$u){return Z$5().useEffect(_u,$u)};react_production_min.useImperativeHandle=function(_u,$u,Tu){return Z$5().useImperativeHandle(_u,$u,Tu)};react_production_min.useLayoutEffect=function(_u,$u){return Z$5().useLayoutEffect(_u,$u)};react_production_min.useMemo=function(_u,$u){return Z$5().useMemo(_u,$u)};react_production_min.useReducer=function(_u,$u,Tu){return Z$5().useReducer(_u,$u,Tu)};react_production_min.useRef=function(_u){return Z$5().useRef(_u)};react_production_min.useState=function(_u){return Z$5().useState(_u)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_u){var $u,Tu,Cu,Pu,Bu;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Lu=null,Ru=null,Ou=function(){if(Lu!==null)try{var _p=_u.unstable_now();Lu(!0,_p),Lu=null}catch(Cp){throw setTimeout(Ou,0),Cp}},Du=Date.now();_u.unstable_now=function(){return Date.now()-Du},$u=function(_p){Lu!==null?setTimeout($u,0,_p):(Lu=_p,setTimeout(Ou,0))},Tu=function(_p,Cp){Ru=setTimeout(_p,Cp)},Cu=function(){clearTimeout(Ru)},Pu=function(){return!1},Bu=_u.unstable_forceFrameRate=function(){}}else{var Fu=window.performance,Vu=window.Date,ku=window.setTimeout,Nu=window.clearTimeout;if(typeof console!="undefined"){var Gu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Gu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Fu=="object"&&typeof Fu.now=="function")_u.unstable_now=function(){return Fu.now()};else{var ju=Vu.now();_u.unstable_now=function(){return Vu.now()-ju}}var Hu=!1,Uu=null,zu=-1,Wu=5,Qu=0;Pu=function(){return _u.unstable_now()>=Qu},Bu=function(){},_u.unstable_forceFrameRate=function(_p){0>_p||125<_p?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):Wu=0<_p?Math.floor(1e3/_p):5};var Ku=new MessageChannel,Yu=Ku.port2;Ku.port1.onmessage=function(){if(Uu!==null){var _p=_u.unstable_now();Qu=_p+Wu;try{Uu(!0,_p)?Yu.postMessage(null):(Hu=!1,Uu=null)}catch(Cp){throw Yu.postMessage(null),Cp}}else Hu=!1},$u=function(_p){Uu=_p,Hu||(Hu=!0,Yu.postMessage(null))},Tu=function(_p,Cp){zu=ku(function(){_p(_u.unstable_now())},Cp)},Cu=function(){Nu(zu),zu=-1}}function Xc(_p,Cp){var Ep=_p.length;_p.push(Cp);e:for(;;){var ap=Ep-1>>>1,ip=_p[ap];if(ip!==void 0&&0<qu(ip,Cp))_p[ap]=Cp,_p[Ep]=ip,Ep=ap;else break e}}function _d(_p){return _p=_p[0],_p===void 0?null:_p}function _f(_p){var Cp=_p[0];if(Cp!==void 0){var Ep=_p.pop();if(Ep!==Cp){_p[0]=Ep;e:for(var ap=0,ip=_p.length;ap<ip;){var hp=2*(ap+1)-1,up=_p[hp],pp=hp+1,gp=_p[pp];if(up!==void 0&&0>qu(up,Ep))gp!==void 0&&0>qu(gp,up)?(_p[ap]=gp,_p[pp]=Ep,ap=pp):(_p[ap]=up,_p[hp]=Ep,ap=hp);else if(gp!==void 0&&0>qu(gp,Ep))_p[ap]=gp,_p[pp]=Ep,ap=pp;else break e}}return Cp}return null}function qu(_p,Cp){var Ep=_p.sortIndex-Cp.sortIndex;return Ep!==0?Ep:_p.id-Cp.id}var Xu=[],Zu=[],_c=1,Ju=null,_h=3,ep=!1,tp=!1,rp=!1;function dp(_p){for(var Cp=_d(Zu);Cp!==null;){if(Cp.callback===null)_f(Zu);else if(Cp.startTime<=_p)_f(Zu),Cp.sortIndex=Cp.expirationTime,Xc(Xu,Cp);else break;Cp=_d(Zu)}}function cp(_p){if(rp=!1,dp(_p),!tp)if(_d(Xu)!==null)tp=!0,$u(Sp);else{var Cp=_d(Zu);Cp!==null&&Tu(cp,Cp.startTime-_p)}}function Sp(_p,Cp){tp=!1,rp&&(rp=!1,Cu()),ep=!0;var Ep=_h;try{for(dp(Cp),Ju=_d(Xu);Ju!==null&&(!(Ju.expirationTime>Cp)||_p&&!Pu());){var ap=Ju.callback;if(ap!==null){Ju.callback=null,_h=Ju.priorityLevel;var ip=ap(Ju.expirationTime<=Cp);Cp=_u.unstable_now(),typeof ip=="function"?Ju.callback=ip:Ju===_d(Xu)&&_f(Xu),dp(Cp)}else _f(Xu);Ju=_d(Xu)}if(Ju!==null)var hp=!0;else{var up=_d(Zu);up!==null&&Tu(cp,up.startTime-Cp),hp=!1}return hp}finally{Ju=null,_h=Ep,ep=!1}}function yp(_p){switch(_p){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Bp=Bu;_u.unstable_IdlePriority=5,_u.unstable_ImmediatePriority=1,_u.unstable_LowPriority=4,_u.unstable_NormalPriority=3,_u.unstable_Profiling=null,_u.unstable_UserBlockingPriority=2,_u.unstable_cancelCallback=function(_p){_p.callback=null},_u.unstable_continueExecution=function(){tp||ep||(tp=!0,$u(Sp))},_u.unstable_getCurrentPriorityLevel=function(){return _h},_u.unstable_getFirstCallbackNode=function(){return _d(Xu)},_u.unstable_next=function(_p){switch(_h){case 1:case 2:case 3:var Cp=3;break;default:Cp=_h}var Ep=_h;_h=Cp;try{return _p()}finally{_h=Ep}},_u.unstable_pauseExecution=function(){},_u.unstable_requestPaint=Bp,_u.unstable_runWithPriority=function(_p,Cp){switch(_p){case 1:case 2:case 3:case 4:case 5:break;default:_p=3}var Ep=_h;_h=_p;try{return Cp()}finally{_h=Ep}},_u.unstable_scheduleCallback=function(_p,Cp,Ep){var ap=_u.unstable_now();if(typeof Ep=="object"&&Ep!==null){var ip=Ep.delay;ip=typeof ip=="number"&&0<ip?ap+ip:ap,Ep=typeof Ep.timeout=="number"?Ep.timeout:yp(_p)}else Ep=yp(_p),ip=ap;return Ep=ip+Ep,_p={id:_c++,callback:Cp,priorityLevel:_p,startTime:ip,expirationTime:Ep,sortIndex:-1},ip>ap?(_p.sortIndex=ip,Xc(Zu,_p),_d(Xu)===null&&_p===_d(Zu)&&(rp?Cu():rp=!0,Tu(cp,ip-ap))):(_p.sortIndex=Ep,Xc(Xu,_p),tp||ep||(tp=!0,$u(Sp))),_p},_u.unstable_shouldYield=function(){var _p=_u.unstable_now();dp(_p);var Cp=_d(Xu);return Cp!==Ju&&Ju!==null&&Cp!==null&&Cp.callback!==null&&Cp.startTime<=_p&&Cp.expirationTime<Ju.expirationTime||Pu()},_u.unstable_wrapCallback=function(_p){var Cp=_h;return function(){var Ep=_h;_h=Cp;try{return _p.apply(this,arguments)}finally{_h=Ep}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$f=objectAssign,r$b=scheduler.exports;function u$b(_u){for(var $u="https://reactjs.org/docs/error-decoder.html?invariant="+_u,Tu=1;Tu<arguments.length;Tu++)$u+="&args[]="+encodeURIComponent(arguments[Tu]);return"Minified React error #"+_u+"; visit "+$u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$b(227));function ba$2(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){var Du=Array.prototype.slice.call(arguments,3);try{$u.apply(Tu,Du)}catch(Fu){this.onError(Fu)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(_u){da$2=!0,ea$2=_u}};function ja$1(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$1(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){if(ja$1.apply(this,arguments),da$2){if(da$2){var Du=ea$2;da$2=!1,ea$2=null}else throw Error(u$b(198));fa$2||(fa$2=!0,ha$2=Du)}}var la$1=null,ma$1=null,na$1=null;function oa$1(_u,$u,Tu){var Cu=_u.type||"unknown-event";_u.currentTarget=na$1(Tu),ka$1(Cu,$u,void 0,_u),_u.currentTarget=null}var pa$1=null,qa$1={};function ra$1(){if(pa$1)for(var _u in qa$1){var $u=qa$1[_u],Tu=pa$1.indexOf(_u);if(!(-1<Tu))throw Error(u$b(96,_u));if(!sa$1[Tu]){if(!$u.extractEvents)throw Error(u$b(97,_u));sa$1[Tu]=$u,Tu=$u.eventTypes;for(var Cu in Tu){var Pu=void 0,Bu=Tu[Cu],Lu=$u,Ru=Cu;if(ta$1.hasOwnProperty(Ru))throw Error(u$b(99,Ru));ta$1[Ru]=Bu;var Ou=Bu.phasedRegistrationNames;if(Ou){for(Pu in Ou)Ou.hasOwnProperty(Pu)&&ua$1(Ou[Pu],Lu,Ru);Pu=!0}else Bu.registrationName?(ua$1(Bu.registrationName,Lu,Ru),Pu=!0):Pu=!1;if(!Pu)throw Error(u$b(98,Cu,_u))}}}}function ua$1(_u,$u,Tu){if(va$1[_u])throw Error(u$b(100,_u));va$1[_u]=$u,wa$1[_u]=$u.eventTypes[Tu].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(_u){var $u=!1,Tu;for(Tu in _u)if(_u.hasOwnProperty(Tu)){var Cu=_u[Tu];if(!qa$1.hasOwnProperty(Tu)||qa$1[Tu]!==Cu){if(qa$1[Tu])throw Error(u$b(102,Tu));qa$1[Tu]=Cu,$u=!0}}$u&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$1=null,Aa$1=null,Ba$1=null;function Ca$1(_u){if(_u=ma$1(_u)){if(typeof za$1!="function")throw Error(u$b(280));var $u=_u.stateNode;$u&&($u=la$1($u),za$1(_u.stateNode,_u.type,$u))}}function Da$1(_u){Aa$1?Ba$1?Ba$1.push(_u):Ba$1=[_u]:Aa$1=_u}function Ea$1(){if(Aa$1){var _u=Aa$1,$u=Ba$1;if(Ba$1=Aa$1=null,Ca$1(_u),$u)for(_u=0;_u<$u.length;_u++)Ca$1($u[_u])}}function Fa$1(_u,$u){return _u($u)}function Ga$1(_u,$u,Tu,Cu,Pu){return _u($u,Tu,Cu,Pu)}function Ha$1(){}var Ia$1=Fa$1,Ja$1=!1,Ka$1=!1;function La$1(){(Aa$1!==null||Ba$1!==null)&&(Ha$1(),Ea$1())}function Ma$1(_u,$u,Tu){if(Ka$1)return _u($u,Tu);Ka$1=!0;try{return Ia$1(_u,$u,Tu)}finally{Ka$1=!1,La$1()}}var Na$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$1=Object.prototype.hasOwnProperty,Pa$1={},Qa$1={};function Ra$1(_u){return Oa$1.call(Qa$1,_u)?!0:Oa$1.call(Pa$1,_u)?!1:Na$1.test(_u)?Qa$1[_u]=!0:(Pa$1[_u]=!0,!1)}function Sa$1(_u,$u,Tu,Cu){if(Tu!==null&&Tu.type===0)return!1;switch(typeof $u){case"function":case"symbol":return!0;case"boolean":return Cu?!1:Tu!==null?!Tu.acceptsBooleans:(_u=_u.toLowerCase().slice(0,5),_u!=="data-"&&_u!=="aria-");default:return!1}}function Ta$1(_u,$u,Tu,Cu){if($u===null||typeof $u=="undefined"||Sa$1(_u,$u,Tu,Cu))return!0;if(Cu)return!1;if(Tu!==null)switch(Tu.type){case 3:return!$u;case 4:return $u===!1;case 5:return isNaN($u);case 6:return isNaN($u)||1>$u}return!1}function v$a(_u,$u,Tu,Cu,Pu,Bu){this.acceptsBooleans=$u===2||$u===3||$u===4,this.attributeName=Cu,this.attributeNamespace=Pu,this.mustUseProperty=Tu,this.propertyName=_u,this.type=$u,this.sanitizeURL=Bu}var C$9={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_u){C$9[_u]=new v$a(_u,0,!1,_u,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_u){var $u=_u[0];C$9[$u]=new v$a($u,1,!1,_u[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_u){C$9[_u]=new v$a(_u,2,!1,_u.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_u){C$9[_u]=new v$a(_u,2,!1,_u,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_u){C$9[_u]=new v$a(_u,3,!1,_u.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(_u){C$9[_u]=new v$a(_u,3,!0,_u,null,!1)});["capture","download"].forEach(function(_u){C$9[_u]=new v$a(_u,4,!1,_u,null,!1)});["cols","rows","size","span"].forEach(function(_u){C$9[_u]=new v$a(_u,6,!1,_u,null,!1)});["rowSpan","start"].forEach(function(_u){C$9[_u]=new v$a(_u,5,!1,_u.toLowerCase(),null,!1)});var Ua$1=/[\-:]([a-z])/g;function Va$1(_u){return _u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$9[$u]=new v$a($u,1,!1,_u,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$9[$u]=new v$a($u,1,!1,_u,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(_u){var $u=_u.replace(Ua$1,Va$1);C$9[$u]=new v$a($u,1,!1,_u,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(_u){C$9[_u]=new v$a(_u,1,!1,_u.toLowerCase(),null,!1)});C$9.xlinkHref=new v$a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(_u){C$9[_u]=new v$a(_u,1,!1,_u.toLowerCase(),null,!0)});var Wa$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$1.hasOwnProperty("ReactCurrentDispatcher")||(Wa$1.ReactCurrentDispatcher={current:null});Wa$1.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$1.ReactCurrentBatchConfig={suspense:null});function Xa$1(_u,$u,Tu,Cu){var Pu=C$9.hasOwnProperty($u)?C$9[$u]:null,Bu=Pu!==null?Pu.type===0:Cu?!1:!(!(2<$u.length)||$u[0]!=="o"&&$u[0]!=="O"||$u[1]!=="n"&&$u[1]!=="N");Bu||(Ta$1($u,Tu,Pu,Cu)&&(Tu=null),Cu||Pu===null?Ra$1($u)&&(Tu===null?_u.removeAttribute($u):_u.setAttribute($u,""+Tu)):Pu.mustUseProperty?_u[Pu.propertyName]=Tu===null?Pu.type===3?!1:"":Tu:($u=Pu.attributeName,Cu=Pu.attributeNamespace,Tu===null?_u.removeAttribute($u):(Pu=Pu.type,Tu=Pu===3||Pu===4&&Tu===!0?"":""+Tu,Cu?_u.setAttributeNS(Cu,$u,Tu):_u.setAttribute($u,Tu))))}var Ya$1=/^(.*)[\\\/]/,E$g=typeof Symbol=="function"&&Symbol.for,Za$1=E$g?Symbol.for("react.element"):60103,$a$1=E$g?Symbol.for("react.portal"):60106,ab=E$g?Symbol.for("react.fragment"):60107,bb=E$g?Symbol.for("react.strict_mode"):60108,cb=E$g?Symbol.for("react.profiler"):60114,db=E$g?Symbol.for("react.provider"):60109,eb=E$g?Symbol.for("react.context"):60110,fb=E$g?Symbol.for("react.concurrent_mode"):60111,gb=E$g?Symbol.for("react.forward_ref"):60112,hb=E$g?Symbol.for("react.suspense"):60113,ib=E$g?Symbol.for("react.suspense_list"):60120,jb=E$g?Symbol.for("react.memo"):60115,kb=E$g?Symbol.for("react.lazy"):60116,lb=E$g?Symbol.for("react.block"):60121,mb=typeof Symbol=="function"&&Symbol.iterator;function nb(_u){return _u===null||typeof _u!="object"?null:(_u=mb&&_u[mb]||_u["@@iterator"],typeof _u=="function"?_u:null)}function ob(_u){if(_u._status===-1){_u._status=0;var $u=_u._ctor;$u=$u(),_u._result=$u,$u.then(function(Tu){_u._status===0&&(Tu=Tu.default,_u._status=1,_u._result=Tu)},function(Tu){_u._status===0&&(_u._status=2,_u._result=Tu)})}}function pb(_u){if(_u==null)return null;if(typeof _u=="function")return _u.displayName||_u.name||null;if(typeof _u=="string")return _u;switch(_u){case ab:return"Fragment";case $a$1:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if(typeof _u=="object")switch(_u.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var $u=_u.render;return $u=$u.displayName||$u.name||"",_u.displayName||($u!==""?"ForwardRef("+$u+")":"ForwardRef");case jb:return pb(_u.type);case lb:return pb(_u.render);case kb:if(_u=_u._status===1?_u._result:null)return pb(_u)}return null}function qb(_u){var $u="";do{e:switch(_u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Tu="";break e;default:var Cu=_u._debugOwner,Pu=_u._debugSource,Bu=pb(_u.type);Tu=null,Cu&&(Tu=pb(Cu.type)),Cu=Bu,Bu="",Pu?Bu=" (at "+Pu.fileName.replace(Ya$1,"")+":"+Pu.lineNumber+")":Tu&&(Bu=" (created by "+Tu+")"),Tu=`
    in `+(Cu||"Unknown")+Bu}$u+=Tu,_u=_u.return}while(_u);return $u}function rb(_u){switch(typeof _u){case"boolean":case"number":case"object":case"string":case"undefined":return _u;default:return""}}function sb(_u){var $u=_u.type;return(_u=_u.nodeName)&&_u.toLowerCase()==="input"&&($u==="checkbox"||$u==="radio")}function tb(_u){var $u=sb(_u)?"checked":"value",Tu=Object.getOwnPropertyDescriptor(_u.constructor.prototype,$u),Cu=""+_u[$u];if(!_u.hasOwnProperty($u)&&typeof Tu!="undefined"&&typeof Tu.get=="function"&&typeof Tu.set=="function"){var Pu=Tu.get,Bu=Tu.set;return Object.defineProperty(_u,$u,{configurable:!0,get:function(){return Pu.call(this)},set:function(Lu){Cu=""+Lu,Bu.call(this,Lu)}}),Object.defineProperty(_u,$u,{enumerable:Tu.enumerable}),{getValue:function(){return Cu},setValue:function(Lu){Cu=""+Lu},stopTracking:function(){_u._valueTracker=null,delete _u[$u]}}}}function xb(_u){_u._valueTracker||(_u._valueTracker=tb(_u))}function yb(_u){if(!_u)return!1;var $u=_u._valueTracker;if(!$u)return!0;var Tu=$u.getValue(),Cu="";return _u&&(Cu=sb(_u)?_u.checked?"true":"false":_u.value),_u=Cu,_u!==Tu?($u.setValue(_u),!0):!1}function zb(_u,$u){var Tu=$u.checked;return n$f({},$u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Tu!=null?Tu:_u._wrapperState.initialChecked})}function Ab(_u,$u){var Tu=$u.defaultValue==null?"":$u.defaultValue,Cu=$u.checked!=null?$u.checked:$u.defaultChecked;Tu=rb($u.value!=null?$u.value:Tu),_u._wrapperState={initialChecked:Cu,initialValue:Tu,controlled:$u.type==="checkbox"||$u.type==="radio"?$u.checked!=null:$u.value!=null}}function Bb(_u,$u){$u=$u.checked,$u!=null&&Xa$1(_u,"checked",$u,!1)}function Cb(_u,$u){Bb(_u,$u);var Tu=rb($u.value),Cu=$u.type;if(Tu!=null)Cu==="number"?(Tu===0&&_u.value===""||_u.value!=Tu)&&(_u.value=""+Tu):_u.value!==""+Tu&&(_u.value=""+Tu);else if(Cu==="submit"||Cu==="reset"){_u.removeAttribute("value");return}$u.hasOwnProperty("value")?Db(_u,$u.type,Tu):$u.hasOwnProperty("defaultValue")&&Db(_u,$u.type,rb($u.defaultValue)),$u.checked==null&&$u.defaultChecked!=null&&(_u.defaultChecked=!!$u.defaultChecked)}function Eb(_u,$u,Tu){if($u.hasOwnProperty("value")||$u.hasOwnProperty("defaultValue")){var Cu=$u.type;if(!(Cu!=="submit"&&Cu!=="reset"||$u.value!==void 0&&$u.value!==null))return;$u=""+_u._wrapperState.initialValue,Tu||$u===_u.value||(_u.value=$u),_u.defaultValue=$u}Tu=_u.name,Tu!==""&&(_u.name=""),_u.defaultChecked=!!_u._wrapperState.initialChecked,Tu!==""&&(_u.name=Tu)}function Db(_u,$u,Tu){($u!=="number"||_u.ownerDocument.activeElement!==_u)&&(Tu==null?_u.defaultValue=""+_u._wrapperState.initialValue:_u.defaultValue!==""+Tu&&(_u.defaultValue=""+Tu))}function Fb(_u){var $u="";return aa$2.Children.forEach(_u,function(Tu){Tu!=null&&($u+=Tu)}),$u}function Gb(_u,$u){return _u=n$f({children:void 0},$u),($u=Fb($u.children))&&(_u.children=$u),_u}function Hb(_u,$u,Tu,Cu){if(_u=_u.options,$u){$u={};for(var Pu=0;Pu<Tu.length;Pu++)$u["$"+Tu[Pu]]=!0;for(Tu=0;Tu<_u.length;Tu++)Pu=$u.hasOwnProperty("$"+_u[Tu].value),_u[Tu].selected!==Pu&&(_u[Tu].selected=Pu),Pu&&Cu&&(_u[Tu].defaultSelected=!0)}else{for(Tu=""+rb(Tu),$u=null,Pu=0;Pu<_u.length;Pu++){if(_u[Pu].value===Tu){_u[Pu].selected=!0,Cu&&(_u[Pu].defaultSelected=!0);return}$u!==null||_u[Pu].disabled||($u=_u[Pu])}$u!==null&&($u.selected=!0)}}function Ib(_u,$u){if($u.dangerouslySetInnerHTML!=null)throw Error(u$b(91));return n$f({},$u,{value:void 0,defaultValue:void 0,children:""+_u._wrapperState.initialValue})}function Jb(_u,$u){var Tu=$u.value;if(Tu==null){if(Tu=$u.children,$u=$u.defaultValue,Tu!=null){if($u!=null)throw Error(u$b(92));if(Array.isArray(Tu)){if(!(1>=Tu.length))throw Error(u$b(93));Tu=Tu[0]}$u=Tu}$u==null&&($u=""),Tu=$u}_u._wrapperState={initialValue:rb(Tu)}}function Kb(_u,$u){var Tu=rb($u.value),Cu=rb($u.defaultValue);Tu!=null&&(Tu=""+Tu,Tu!==_u.value&&(_u.value=Tu),$u.defaultValue==null&&_u.defaultValue!==Tu&&(_u.defaultValue=Tu)),Cu!=null&&(_u.defaultValue=""+Cu)}function Lb(_u){var $u=_u.textContent;$u===_u._wrapperState.initialValue&&$u!==""&&$u!==null&&(_u.value=$u)}var Mb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb(_u){switch(_u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(_u,$u){return _u==null||_u==="http://www.w3.org/1999/xhtml"?Nb($u):_u==="http://www.w3.org/2000/svg"&&$u==="foreignObject"?"http://www.w3.org/1999/xhtml":_u}var Pb,Qb=function(_u){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function($u,Tu,Cu,Pu){MSApp.execUnsafeLocalFunction(function(){return _u($u,Tu,Cu,Pu)})}:_u}(function(_u,$u){if(_u.namespaceURI!==Mb.svg||"innerHTML"in _u)_u.innerHTML=$u;else{for(Pb=Pb||document.createElement("div"),Pb.innerHTML="<svg>"+$u.valueOf().toString()+"</svg>",$u=Pb.firstChild;_u.firstChild;)_u.removeChild(_u.firstChild);for(;$u.firstChild;)_u.appendChild($u.firstChild)}});function Rb(_u,$u){if($u){var Tu=_u.firstChild;if(Tu&&Tu===_u.lastChild&&Tu.nodeType===3){Tu.nodeValue=$u;return}}_u.textContent=$u}function Sb(_u,$u){var Tu={};return Tu[_u.toLowerCase()]=$u.toLowerCase(),Tu["Webkit"+_u]="webkit"+$u,Tu["Moz"+_u]="moz"+$u,Tu}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};ya$1&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);function Wb(_u){if(Ub[_u])return Ub[_u];if(!Tb[_u])return _u;var $u=Tb[_u],Tu;for(Tu in $u)if($u.hasOwnProperty(Tu)&&Tu in Vb)return Ub[_u]=$u[Tu];return _u}var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function cc(_u){var $u=bc.get(_u);return $u===void 0&&($u=new Map,bc.set(_u,$u)),$u}function dc(_u){var $u=_u,Tu=_u;if(_u.alternate)for(;$u.return;)$u=$u.return;else{_u=$u;do $u=_u,($u.effectTag&1026)!==0&&(Tu=$u.return),_u=$u.return;while(_u)}return $u.tag===3?Tu:null}function ec(_u){if(_u.tag===13){var $u=_u.memoizedState;if($u===null&&(_u=_u.alternate,_u!==null&&($u=_u.memoizedState)),$u!==null)return $u.dehydrated}return null}function fc(_u){if(dc(_u)!==_u)throw Error(u$b(188))}function gc(_u){var $u=_u.alternate;if(!$u){if($u=dc(_u),$u===null)throw Error(u$b(188));return $u!==_u?null:_u}for(var Tu=_u,Cu=$u;;){var Pu=Tu.return;if(Pu===null)break;var Bu=Pu.alternate;if(Bu===null){if(Cu=Pu.return,Cu!==null){Tu=Cu;continue}break}if(Pu.child===Bu.child){for(Bu=Pu.child;Bu;){if(Bu===Tu)return fc(Pu),_u;if(Bu===Cu)return fc(Pu),$u;Bu=Bu.sibling}throw Error(u$b(188))}if(Tu.return!==Cu.return)Tu=Pu,Cu=Bu;else{for(var Lu=!1,Ru=Pu.child;Ru;){if(Ru===Tu){Lu=!0,Tu=Pu,Cu=Bu;break}if(Ru===Cu){Lu=!0,Cu=Pu,Tu=Bu;break}Ru=Ru.sibling}if(!Lu){for(Ru=Bu.child;Ru;){if(Ru===Tu){Lu=!0,Tu=Bu,Cu=Pu;break}if(Ru===Cu){Lu=!0,Cu=Bu,Tu=Pu;break}Ru=Ru.sibling}if(!Lu)throw Error(u$b(189))}}if(Tu.alternate!==Cu)throw Error(u$b(190))}if(Tu.tag!==3)throw Error(u$b(188));return Tu.stateNode.current===Tu?_u:$u}function hc(_u){if(_u=gc(_u),!_u)return null;for(var $u=_u;;){if($u.tag===5||$u.tag===6)return $u;if($u.child)$u.child.return=$u,$u=$u.child;else{if($u===_u)break;for(;!$u.sibling;){if(!$u.return||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}}return null}function ic(_u,$u){if($u==null)throw Error(u$b(30));return _u==null?$u:Array.isArray(_u)?Array.isArray($u)?(_u.push.apply(_u,$u),_u):(_u.push($u),_u):Array.isArray($u)?[_u].concat($u):[_u,$u]}function jc(_u,$u,Tu){Array.isArray(_u)?_u.forEach($u,Tu):_u&&$u.call(Tu,_u)}var kc=null;function lc(_u){if(_u){var $u=_u._dispatchListeners,Tu=_u._dispatchInstances;if(Array.isArray($u))for(var Cu=0;Cu<$u.length&&!_u.isPropagationStopped();Cu++)oa$1(_u,$u[Cu],Tu[Cu]);else $u&&oa$1(_u,$u,Tu);_u._dispatchListeners=null,_u._dispatchInstances=null,_u.isPersistent()||_u.constructor.release(_u)}}function mc(_u){if(_u!==null&&(kc=ic(kc,_u)),_u=kc,kc=null,_u){if(jc(_u,lc),kc)throw Error(u$b(95));if(fa$2)throw _u=ha$2,fa$2=!1,ha$2=null,_u}}function nc(_u){return _u=_u.target||_u.srcElement||window,_u.correspondingUseElement&&(_u=_u.correspondingUseElement),_u.nodeType===3?_u.parentNode:_u}function oc(_u){if(!ya$1)return!1;_u="on"+_u;var $u=_u in document;return $u||($u=document.createElement("div"),$u.setAttribute(_u,"return;"),$u=typeof $u[_u]=="function"),$u}var pc=[];function qc(_u){_u.topLevelType=null,_u.nativeEvent=null,_u.targetInst=null,_u.ancestors.length=0,10>pc.length&&pc.push(_u)}function rc(_u,$u,Tu,Cu){if(pc.length){var Pu=pc.pop();return Pu.topLevelType=_u,Pu.eventSystemFlags=Cu,Pu.nativeEvent=$u,Pu.targetInst=Tu,Pu}return{topLevelType:_u,eventSystemFlags:Cu,nativeEvent:$u,targetInst:Tu,ancestors:[]}}function sc(_u){var $u=_u.targetInst,Tu=$u;do{if(!Tu){_u.ancestors.push(Tu);break}var Cu=Tu;if(Cu.tag===3)Cu=Cu.stateNode.containerInfo;else{for(;Cu.return;)Cu=Cu.return;Cu=Cu.tag!==3?null:Cu.stateNode.containerInfo}if(!Cu)break;$u=Tu.tag,$u!==5&&$u!==6||_u.ancestors.push(Tu),Tu=tc(Cu)}while(Tu);for(Tu=0;Tu<_u.ancestors.length;Tu++){$u=_u.ancestors[Tu];var Pu=nc(_u.nativeEvent);Cu=_u.topLevelType;var Bu=_u.nativeEvent,Lu=_u.eventSystemFlags;Tu===0&&(Lu|=64);for(var Ru=null,Ou=0;Ou<sa$1.length;Ou++){var Du=sa$1[Ou];Du&&(Du=Du.extractEvents(Cu,$u,Bu,Pu,Lu))&&(Ru=ic(Ru,Du))}mc(Ru)}}function uc(_u,$u,Tu){if(!Tu.has(_u)){switch(_u){case"scroll":vc($u,"scroll",!0);break;case"focus":case"blur":vc($u,"focus",!0),vc($u,"blur",!0),Tu.set("blur",null),Tu.set("focus",null);break;case"cancel":case"close":oc(_u)&&vc($u,_u,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(_u)===-1&&F$a(_u,$u)}Tu.set(_u,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(_u,$u){var Tu=cc($u);Hc.forEach(function(Cu){uc(Cu,$u,Tu)}),Ic.forEach(function(Cu){uc(Cu,$u,Tu)})}function Kc(_u,$u,Tu,Cu,Pu){return{blockedOn:_u,topLevelType:$u,eventSystemFlags:Tu|32,nativeEvent:Pu,container:Cu}}function Lc(_u,$u){switch(_u){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete($u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete($u.pointerId)}}function Mc(_u,$u,Tu,Cu,Pu,Bu){return _u===null||_u.nativeEvent!==Bu?(_u=Kc($u,Tu,Cu,Pu,Bu),$u!==null&&($u=Nc($u),$u!==null&&xc($u)),_u):(_u.eventSystemFlags|=Cu,_u)}function Oc(_u,$u,Tu,Cu,Pu){switch($u){case"focus":return Bc=Mc(Bc,_u,$u,Tu,Cu,Pu),!0;case"dragenter":return Cc=Mc(Cc,_u,$u,Tu,Cu,Pu),!0;case"mouseover":return Dc=Mc(Dc,_u,$u,Tu,Cu,Pu),!0;case"pointerover":var Bu=Pu.pointerId;return Ec.set(Bu,Mc(Ec.get(Bu)||null,_u,$u,Tu,Cu,Pu)),!0;case"gotpointercapture":return Bu=Pu.pointerId,Fc.set(Bu,Mc(Fc.get(Bu)||null,_u,$u,Tu,Cu,Pu)),!0}return!1}function Pc(_u){var $u=tc(_u.target);if($u!==null){var Tu=dc($u);if(Tu!==null){if($u=Tu.tag,$u===13){if($u=ec(Tu),$u!==null){_u.blockedOn=$u,r$b.unstable_runWithPriority(_u.priority,function(){yc(Tu)});return}}else if($u===3&&Tu.stateNode.hydrate){_u.blockedOn=Tu.tag===3?Tu.stateNode.containerInfo:null;return}}}_u.blockedOn=null}function Qc(_u){if(_u.blockedOn!==null)return!1;var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);if($u!==null){var Tu=Nc($u);return Tu!==null&&xc(Tu),_u.blockedOn=$u,!1}return!0}function Sc(_u,$u,Tu){Qc(_u)&&Tu.delete($u)}function Tc(){for(zc=!1;0<Ac.length;){var _u=Ac[0];if(_u.blockedOn!==null){_u=Nc(_u.blockedOn),_u!==null&&wc(_u);break}var $u=Rc(_u.topLevelType,_u.eventSystemFlags,_u.container,_u.nativeEvent);$u!==null?_u.blockedOn=$u:Ac.shift()}Bc!==null&&Qc(Bc)&&(Bc=null),Cc!==null&&Qc(Cc)&&(Cc=null),Dc!==null&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(_u,$u){_u.blockedOn===$u&&(_u.blockedOn=null,zc||(zc=!0,r$b.unstable_scheduleCallback(r$b.unstable_NormalPriority,Tc)))}function Vc(_u){function $u(Pu){return Uc(Pu,_u)}if(0<Ac.length){Uc(Ac[0],_u);for(var Tu=1;Tu<Ac.length;Tu++){var Cu=Ac[Tu];Cu.blockedOn===_u&&(Cu.blockedOn=null)}}for(Bc!==null&&Uc(Bc,_u),Cc!==null&&Uc(Cc,_u),Dc!==null&&Uc(Dc,_u),Ec.forEach($u),Fc.forEach($u),Tu=0;Tu<Gc.length;Tu++)Cu=Gc[Tu],Cu.blockedOn===_u&&(Cu.blockedOn=null);for(;0<Gc.length&&(Tu=Gc[0],Tu.blockedOn===null);)Pc(Tu),Tu.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(_u,$u){for(var Tu=0;Tu<_u.length;Tu+=2){var Cu=_u[Tu],Pu=_u[Tu+1],Bu="on"+(Pu[0].toUpperCase()+Pu.slice(1));Bu={phasedRegistrationNames:{bubbled:Bu,captured:Bu+"Capture"},dependencies:[Cu],eventPriority:$u},Zc.set(Cu,$u),Yc.set(Cu,Bu),Wc[Pu]=Bu}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r$b.unstable_UserBlockingPriority,ed=r$b.unstable_runWithPriority,fd=!0;function F$a(_u,$u){vc($u,_u,!1)}function vc(_u,$u,Tu){var Cu=Zc.get($u);switch(Cu===void 0?2:Cu){case 0:Cu=gd.bind(null,$u,1,_u);break;case 1:Cu=hd.bind(null,$u,1,_u);break;default:Cu=id.bind(null,$u,1,_u)}Tu?_u.addEventListener($u,Cu,!0):_u.addEventListener($u,Cu,!1)}function gd(_u,$u,Tu,Cu){Ja$1||Ha$1();var Pu=id,Bu=Ja$1;Ja$1=!0;try{Ga$1(Pu,_u,$u,Tu,Cu)}finally{(Ja$1=Bu)||La$1()}}function hd(_u,$u,Tu,Cu){ed(dd,id.bind(null,_u,$u,Tu,Cu))}function id(_u,$u,Tu,Cu){if(fd)if(0<Ac.length&&-1<Hc.indexOf(_u))_u=Kc(null,_u,$u,Tu,Cu),Ac.push(_u);else{var Pu=Rc(_u,$u,Tu,Cu);if(Pu===null)Lc(_u,Cu);else if(-1<Hc.indexOf(_u))_u=Kc(Pu,_u,$u,Tu,Cu),Ac.push(_u);else if(!Oc(Pu,_u,$u,Tu,Cu)){Lc(_u,Cu),_u=rc(_u,Cu,null,$u);try{Ma$1(sc,_u)}finally{qc(_u)}}}}function Rc(_u,$u,Tu,Cu){if(Tu=nc(Cu),Tu=tc(Tu),Tu!==null){var Pu=dc(Tu);if(Pu===null)Tu=null;else{var Bu=Pu.tag;if(Bu===13){if(Tu=ec(Pu),Tu!==null)return Tu;Tu=null}else if(Bu===3){if(Pu.stateNode.hydrate)return Pu.tag===3?Pu.stateNode.containerInfo:null;Tu=null}else Pu!==Tu&&(Tu=null)}}_u=rc(_u,Cu,Tu,$u);try{Ma$1(sc,_u)}finally{qc(_u)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(_u){kd.forEach(function($u){$u=$u+_u.charAt(0).toUpperCase()+_u.substring(1),jd[$u]=jd[_u]})});function ld(_u,$u,Tu){return $u==null||typeof $u=="boolean"||$u===""?"":Tu||typeof $u!="number"||$u===0||jd.hasOwnProperty(_u)&&jd[_u]?(""+$u).trim():$u+"px"}function md(_u,$u){_u=_u.style;for(var Tu in $u)if($u.hasOwnProperty(Tu)){var Cu=Tu.indexOf("--")===0,Pu=ld(Tu,$u[Tu],Cu);Tu==="float"&&(Tu="cssFloat"),Cu?_u.setProperty(Tu,Pu):_u[Tu]=Pu}}var nd=n$f({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(_u,$u){if($u){if(nd[_u]&&($u.children!=null||$u.dangerouslySetInnerHTML!=null))throw Error(u$b(137,_u,""));if($u.dangerouslySetInnerHTML!=null){if($u.children!=null)throw Error(u$b(60));if(!(typeof $u.dangerouslySetInnerHTML=="object"&&"__html"in $u.dangerouslySetInnerHTML))throw Error(u$b(61))}if($u.style!=null&&typeof $u.style!="object")throw Error(u$b(62,""))}}function pd(_u,$u){if(_u.indexOf("-")===-1)return typeof $u.is=="string";switch(_u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb.html;function rd(_u,$u){_u=_u.nodeType===9||_u.nodeType===11?_u:_u.ownerDocument;var Tu=cc(_u);$u=wa$1[$u];for(var Cu=0;Cu<$u.length;Cu++)uc($u[Cu],_u,Tu)}function sd(){}function td(_u){if(_u=_u||(typeof document!="undefined"?document:void 0),typeof _u=="undefined")return null;try{return _u.activeElement||_u.body}catch{return _u.body}}function ud(_u){for(;_u&&_u.firstChild;)_u=_u.firstChild;return _u}function vd(_u,$u){var Tu=ud(_u);_u=0;for(var Cu;Tu;){if(Tu.nodeType===3){if(Cu=_u+Tu.textContent.length,_u<=$u&&Cu>=$u)return{node:Tu,offset:$u-_u};_u=Cu}e:{for(;Tu;){if(Tu.nextSibling){Tu=Tu.nextSibling;break e}Tu=Tu.parentNode}Tu=void 0}Tu=ud(Tu)}}function wd(_u,$u){return _u&&$u?_u===$u?!0:_u&&_u.nodeType===3?!1:$u&&$u.nodeType===3?wd(_u,$u.parentNode):"contains"in _u?_u.contains($u):_u.compareDocumentPosition?!!(_u.compareDocumentPosition($u)&16):!1:!1}function xd(){for(var _u=window,$u=td();$u instanceof _u.HTMLIFrameElement;){try{var Tu=typeof $u.contentWindow.location.href=="string"}catch{Tu=!1}if(Tu)_u=$u.contentWindow;else break;$u=td(_u.document)}return $u}function yd(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u&&($u==="input"&&(_u.type==="text"||_u.type==="search"||_u.type==="tel"||_u.type==="url"||_u.type==="password")||$u==="textarea"||_u.contentEditable==="true")}var zd="$",Ad="/$",Bd="$?",Cd="$!",Dd=null,Ed=null;function Fd(_u,$u){switch(_u){case"button":case"input":case"select":case"textarea":return!!$u.autoFocus}return!1}function Gd(_u,$u){return _u==="textarea"||_u==="option"||_u==="noscript"||typeof $u.children=="string"||typeof $u.children=="number"||typeof $u.dangerouslySetInnerHTML=="object"&&$u.dangerouslySetInnerHTML!==null&&$u.dangerouslySetInnerHTML.__html!=null}var Hd=typeof setTimeout=="function"?setTimeout:void 0,Id=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd(_u){for(;_u!=null;_u=_u.nextSibling){var $u=_u.nodeType;if($u===1||$u===3)break}return _u}function Kd(_u){_u=_u.previousSibling;for(var $u=0;_u;){if(_u.nodeType===8){var Tu=_u.data;if(Tu===zd||Tu===Cd||Tu===Bd){if($u===0)return _u;$u--}else Tu===Ad&&$u++}_u=_u.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(_u){var $u=_u[Md];if($u)return $u;for(var Tu=_u.parentNode;Tu;){if($u=Tu[Od]||Tu[Md]){if(Tu=$u.alternate,$u.child!==null||Tu!==null&&Tu.child!==null)for(_u=Kd(_u);_u!==null;){if(Tu=_u[Md])return Tu;_u=Kd(_u)}return $u}_u=Tu,Tu=_u.parentNode}return null}function Nc(_u){return _u=_u[Md]||_u[Od],!_u||_u.tag!==5&&_u.tag!==6&&_u.tag!==13&&_u.tag!==3?null:_u}function Pd(_u){if(_u.tag===5||_u.tag===6)return _u.stateNode;throw Error(u$b(33))}function Qd(_u){return _u[Nd]||null}function Rd(_u){do _u=_u.return;while(_u&&_u.tag!==5);return _u||null}function Sd(_u,$u){var Tu=_u.stateNode;if(!Tu)return null;var Cu=la$1(Tu);if(!Cu)return null;Tu=Cu[$u];e:switch($u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Cu=!Cu.disabled)||(_u=_u.type,Cu=!(_u==="button"||_u==="input"||_u==="select"||_u==="textarea")),_u=!Cu;break e;default:_u=!1}if(_u)return null;if(Tu&&typeof Tu!="function")throw Error(u$b(231,$u,typeof Tu));return Tu}function Td(_u,$u,Tu){($u=Sd(_u,Tu.dispatchConfig.phasedRegistrationNames[$u]))&&(Tu._dispatchListeners=ic(Tu._dispatchListeners,$u),Tu._dispatchInstances=ic(Tu._dispatchInstances,_u))}function Ud(_u){if(_u&&_u.dispatchConfig.phasedRegistrationNames){for(var $u=_u._targetInst,Tu=[];$u;)Tu.push($u),$u=Rd($u);for($u=Tu.length;0<$u--;)Td(Tu[$u],"captured",_u);for($u=0;$u<Tu.length;$u++)Td(Tu[$u],"bubbled",_u)}}function Vd(_u,$u,Tu){_u&&Tu&&Tu.dispatchConfig.registrationName&&($u=Sd(_u,Tu.dispatchConfig.registrationName))&&(Tu._dispatchListeners=ic(Tu._dispatchListeners,$u),Tu._dispatchInstances=ic(Tu._dispatchInstances,_u))}function Wd(_u){_u&&_u.dispatchConfig.registrationName&&Vd(_u._targetInst,null,_u)}function Xd(_u){jc(_u,Ud)}var Yd=null,Zd=null,$d=null;function ae$7(){if($d)return $d;var _u,$u=Zd,Tu=$u.length,Cu,Pu="value"in Yd?Yd.value:Yd.textContent,Bu=Pu.length;for(_u=0;_u<Tu&&$u[_u]===Pu[_u];_u++);var Lu=Tu-_u;for(Cu=1;Cu<=Lu&&$u[Tu-Cu]===Pu[Bu-Cu];Cu++);return $d=Pu.slice(_u,1<Cu?1-Cu:void 0)}function be$3(){return!0}function ce$2(){return!1}function G$7(_u,$u,Tu,Cu){this.dispatchConfig=_u,this._targetInst=$u,this.nativeEvent=Tu,_u=this.constructor.Interface;for(var Pu in _u)_u.hasOwnProperty(Pu)&&(($u=_u[Pu])?this[Pu]=$u(Tu):Pu==="target"?this.target=Cu:this[Pu]=Tu[Pu]);return this.isDefaultPrevented=(Tu.defaultPrevented!=null?Tu.defaultPrevented:Tu.returnValue===!1)?be$3:ce$2,this.isPropagationStopped=ce$2,this}n$f(G$7.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _u=this.nativeEvent;_u&&(_u.preventDefault?_u.preventDefault():typeof _u.returnValue!="unknown"&&(_u.returnValue=!1),this.isDefaultPrevented=be$3)},stopPropagation:function(){var _u=this.nativeEvent;_u&&(_u.stopPropagation?_u.stopPropagation():typeof _u.cancelBubble!="unknown"&&(_u.cancelBubble=!0),this.isPropagationStopped=be$3)},persist:function(){this.isPersistent=be$3},isPersistent:ce$2,destructor:function(){var _u=this.constructor.Interface,$u;for($u in _u)this[$u]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$2,this._dispatchInstances=this._dispatchListeners=null}});G$7.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(_u){return _u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$7.extend=function(_u){function $u(){}function Tu(){return Cu.apply(this,arguments)}var Cu=this;$u.prototype=Cu.prototype;var Pu=new $u;return n$f(Pu,Tu.prototype),Tu.prototype=Pu,Tu.prototype.constructor=Tu,Tu.Interface=n$f({},Cu.Interface,_u),Tu.extend=Cu.extend,de$4(Tu),Tu};de$4(G$7);function ee$5(_u,$u,Tu,Cu){if(this.eventPool.length){var Pu=this.eventPool.pop();return this.call(Pu,_u,$u,Tu,Cu),Pu}return new this(_u,$u,Tu,Cu)}function fe$3(_u){if(!(_u instanceof this))throw Error(u$b(279));_u.destructor(),10>this.eventPool.length&&this.eventPool.push(_u)}function de$4(_u){_u.eventPool=[],_u.getPooled=ee$5,_u.release=fe$3}var ge$3=G$7.extend({data:null}),he$3=G$7.extend({data:null}),ie$5=[9,13,27,32],je$2=ya$1&&"CompositionEvent"in window,ke$2=null;ya$1&&"documentMode"in document&&(ke$2=document.documentMode);var le$4=ya$1&&"TextEvent"in window&&!ke$2,me$1=ya$1&&(!je$2||ke$2&&8<ke$2&&11>=ke$2),ne$6=String.fromCharCode(32),oe$4={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$2=!1;function qe$2(_u,$u){switch(_u){case"keyup":return ie$5.indexOf($u.keyCode)!==-1;case"keydown":return $u.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$6(_u){return _u=_u.detail,typeof _u=="object"&&"data"in _u?_u.data:null}var se$5=!1;function te$6(_u,$u){switch(_u){case"compositionend":return re$6($u);case"keypress":return $u.which!==32?null:(pe$2=!0,ne$6);case"textInput":return _u=$u.data,_u===ne$6&&pe$2?null:_u;default:return null}}function ue$2(_u,$u){if(se$5)return _u==="compositionend"||!je$2&&qe$2(_u,$u)?(_u=ae$7(),$d=Zd=Yd=null,se$5=!1,_u):null;switch(_u){case"paste":return null;case"keypress":if(!($u.ctrlKey||$u.altKey||$u.metaKey)||$u.ctrlKey&&$u.altKey){if($u.char&&1<$u.char.length)return $u.char;if($u.which)return String.fromCharCode($u.which)}return null;case"compositionend":return me$1&&$u.locale!=="ko"?null:$u.data;default:return null}}var ve$2={eventTypes:oe$4,extractEvents:function(_u,$u,Tu,Cu){var Pu;if(je$2)e:{switch(_u){case"compositionstart":var Bu=oe$4.compositionStart;break e;case"compositionend":Bu=oe$4.compositionEnd;break e;case"compositionupdate":Bu=oe$4.compositionUpdate;break e}Bu=void 0}else se$5?qe$2(_u,Tu)&&(Bu=oe$4.compositionEnd):_u==="keydown"&&Tu.keyCode===229&&(Bu=oe$4.compositionStart);return Bu?(me$1&&Tu.locale!=="ko"&&(se$5||Bu!==oe$4.compositionStart?Bu===oe$4.compositionEnd&&se$5&&(Pu=ae$7()):(Yd=Cu,Zd="value"in Yd?Yd.value:Yd.textContent,se$5=!0)),Bu=ge$3.getPooled(Bu,$u,Tu,Cu),Pu?Bu.data=Pu:(Pu=re$6(Tu),Pu!==null&&(Bu.data=Pu)),Xd(Bu),Pu=Bu):Pu=null,(_u=le$4?te$6(_u,Tu):ue$2(_u,Tu))?($u=he$3.getPooled(oe$4.beforeInput,$u,Tu,Cu),$u.data=_u,Xd($u)):$u=null,Pu===null?$u:$u===null?Pu:[Pu,$u]}},we$5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$2(_u){var $u=_u&&_u.nodeName&&_u.nodeName.toLowerCase();return $u==="input"?!!we$5[_u.type]:$u==="textarea"}var ye$3={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$2(_u,$u,Tu){return _u=G$7.getPooled(ye$3.change,_u,$u,Tu),_u.type="change",Da$1(Tu),Xd(_u),_u}var Ae$1=null,Be$2=null;function Ce$2(_u){mc(_u)}function De$1(_u){var $u=Pd(_u);if(yb($u))return _u}function Ee$2(_u,$u){if(_u==="change")return $u}var Fe$1=!1;ya$1&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$2(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$1),Be$2=Ae$1=null)}function He$1(_u){if(_u.propertyName==="value"&&De$1(Be$2))if(_u=ze$2(Be$2,_u,nc(_u)),Ja$1)mc(_u);else{Ja$1=!0;try{Fa$1(Ce$2,_u)}finally{Ja$1=!1,La$1()}}}function Ie$1(_u,$u,Tu){_u==="focus"?(Ge$2(),Ae$1=$u,Be$2=Tu,Ae$1.attachEvent("onpropertychange",He$1)):_u==="blur"&&Ge$2()}function Je$1(_u){if(_u==="selectionchange"||_u==="keyup"||_u==="keydown")return De$1(Be$2)}function Ke$1(_u,$u){if(_u==="click")return De$1($u)}function Le$1(_u,$u){if(_u==="input"||_u==="change")return De$1($u)}var Me$1={eventTypes:ye$3,_isInputEventSupported:Fe$1,extractEvents:function(_u,$u,Tu,Cu){var Pu=$u?Pd($u):window,Bu=Pu.nodeName&&Pu.nodeName.toLowerCase();if(Bu==="select"||Bu==="input"&&Pu.type==="file")var Lu=Ee$2;else if(xe$2(Pu))if(Fe$1)Lu=Le$1;else{Lu=Je$1;var Ru=Ie$1}else(Bu=Pu.nodeName)&&Bu.toLowerCase()==="input"&&(Pu.type==="checkbox"||Pu.type==="radio")&&(Lu=Ke$1);if(Lu&&(Lu=Lu(_u,$u)))return ze$2(Lu,Tu,Cu);Ru&&Ru(_u,Pu,$u),_u==="blur"&&(_u=Pu._wrapperState)&&_u.controlled&&Pu.type==="number"&&Db(Pu,"number",Pu.value)}},Ne$2=G$7.extend({view:null,detail:null}),Oe$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$1(_u){var $u=this.nativeEvent;return $u.getModifierState?$u.getModifierState(_u):(_u=Oe$2[_u])?!!$u[_u]:!1}function Qe$1(){return Pe$1}var Re$1=0,Se$1=0,Te$2=!1,Ue$2=!1,Ve$1=Ne$2.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$1,button:null,buttons:null,relatedTarget:function(_u){return _u.relatedTarget||(_u.fromElement===_u.srcElement?_u.toElement:_u.fromElement)},movementX:function(_u){if("movementX"in _u)return _u.movementX;var $u=Re$1;return Re$1=_u.screenX,Te$2?_u.type==="mousemove"?_u.screenX-$u:0:(Te$2=!0,0)},movementY:function(_u){if("movementY"in _u)return _u.movementY;var $u=Se$1;return Se$1=_u.screenY,Ue$2?_u.type==="mousemove"?_u.screenY-$u:0:(Ue$2=!0,0)}}),We$1=Ve$1.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$1={eventTypes:Xe$1,extractEvents:function(_u,$u,Tu,Cu,Pu){var Bu=_u==="mouseover"||_u==="pointerover",Lu=_u==="mouseout"||_u==="pointerout";if(Bu&&(Pu&32)===0&&(Tu.relatedTarget||Tu.fromElement)||!Lu&&!Bu)return null;if(Bu=Cu.window===Cu?Cu:(Bu=Cu.ownerDocument)?Bu.defaultView||Bu.parentWindow:window,Lu){if(Lu=$u,$u=($u=Tu.relatedTarget||Tu.toElement)?tc($u):null,$u!==null){var Ru=dc($u);($u!==Ru||$u.tag!==5&&$u.tag!==6)&&($u=null)}}else Lu=null;if(Lu===$u)return null;if(_u==="mouseout"||_u==="mouseover")var Ou=Ve$1,Du=Xe$1.mouseLeave,Fu=Xe$1.mouseEnter,Vu="mouse";else(_u==="pointerout"||_u==="pointerover")&&(Ou=We$1,Du=Xe$1.pointerLeave,Fu=Xe$1.pointerEnter,Vu="pointer");if(_u=Lu==null?Bu:Pd(Lu),Bu=$u==null?Bu:Pd($u),Du=Ou.getPooled(Du,Lu,Tu,Cu),Du.type=Vu+"leave",Du.target=_u,Du.relatedTarget=Bu,Tu=Ou.getPooled(Fu,$u,Tu,Cu),Tu.type=Vu+"enter",Tu.target=Bu,Tu.relatedTarget=_u,Cu=Lu,Vu=$u,Cu&&Vu)e:{for(Ou=Cu,Fu=Vu,Lu=0,_u=Ou;_u;_u=Rd(_u))Lu++;for(_u=0,$u=Fu;$u;$u=Rd($u))_u++;for(;0<Lu-_u;)Ou=Rd(Ou),Lu--;for(;0<_u-Lu;)Fu=Rd(Fu),_u--;for(;Lu--;){if(Ou===Fu||Ou===Fu.alternate)break e;Ou=Rd(Ou),Fu=Rd(Fu)}Ou=null}else Ou=null;for(Fu=Ou,Ou=[];Cu&&Cu!==Fu&&(Lu=Cu.alternate,!(Lu!==null&&Lu===Fu));)Ou.push(Cu),Cu=Rd(Cu);for(Cu=[];Vu&&Vu!==Fu&&(Lu=Vu.alternate,!(Lu!==null&&Lu===Fu));)Cu.push(Vu),Vu=Rd(Vu);for(Vu=0;Vu<Ou.length;Vu++)Vd(Ou[Vu],"bubbled",Du);for(Vu=Cu.length;0<Vu--;)Vd(Cu[Vu],"captured",Tu);return(Pu&64)===0?[Du]:[Du,Tu]}};function Ze$1(_u,$u){return _u===$u&&(_u!==0||1/_u===1/$u)||_u!==_u&&$u!==$u}var $e$2=typeof Object.is=="function"?Object.is:Ze$1,af=Object.prototype.hasOwnProperty;function bf(_u,$u){if($e$2(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Tu=Object.keys(_u),Cu=Object.keys($u);if(Tu.length!==Cu.length)return!1;for(Cu=0;Cu<Tu.length;Cu++)if(!af.call($u,Tu[Cu])||!$e$2(_u[Tu[Cu]],$u[Tu[Cu]]))return!1;return!0}var cf=ya$1&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(_u,$u){var Tu=$u.window===$u?$u.document:$u.nodeType===9?$u:$u.ownerDocument;return hf||ef==null||ef!==td(Tu)?null:(Tu=ef,"selectionStart"in Tu&&yd(Tu)?Tu={start:Tu.selectionStart,end:Tu.selectionEnd}:(Tu=(Tu.ownerDocument&&Tu.ownerDocument.defaultView||window).getSelection(),Tu={anchorNode:Tu.anchorNode,anchorOffset:Tu.anchorOffset,focusNode:Tu.focusNode,focusOffset:Tu.focusOffset}),gf&&bf(gf,Tu)?null:(gf=Tu,_u=G$7.getPooled(df.select,ff,_u,$u),_u.type="select",_u.target=ef,Xd(_u),_u))}var kf={eventTypes:df,extractEvents:function(_u,$u,Tu,Cu,Pu,Bu){if(Pu=Bu||(Cu.window===Cu?Cu.document:Cu.nodeType===9?Cu:Cu.ownerDocument),!(Bu=!Pu)){e:{Pu=cc(Pu),Bu=wa$1.onSelect;for(var Lu=0;Lu<Bu.length;Lu++)if(!Pu.has(Bu[Lu])){Pu=!1;break e}Pu=!0}Bu=!Pu}if(Bu)return null;switch(Pu=$u?Pd($u):window,_u){case"focus":(xe$2(Pu)||Pu.contentEditable==="true")&&(ef=Pu,ff=$u,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(Tu,Cu);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(Tu,Cu)}return null}},lf=G$7.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$7.extend({clipboardData:function(_u){return"clipboardData"in _u?_u.clipboardData:window.clipboardData}}),nf=Ne$2.extend({relatedTarget:null});function of(_u){var $u=_u.keyCode;return"charCode"in _u?(_u=_u.charCode,_u===0&&$u===13&&(_u=13)):_u=$u,_u===10&&(_u=13),32<=_u||_u===13?_u:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne$2.extend({key:function(_u){if(_u.key){var $u=pf[_u.key]||_u.key;if($u!=="Unidentified")return $u}return _u.type==="keypress"?(_u=of(_u),_u===13?"Enter":String.fromCharCode(_u)):_u.type==="keydown"||_u.type==="keyup"?qf[_u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$1,charCode:function(_u){return _u.type==="keypress"?of(_u):0},keyCode:function(_u){return _u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0},which:function(_u){return _u.type==="keypress"?of(_u):_u.type==="keydown"||_u.type==="keyup"?_u.keyCode:0}}),sf=Ve$1.extend({dataTransfer:null}),tf=Ne$2.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$1}),uf=G$7.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$1.extend({deltaX:function(_u){return"deltaX"in _u?_u.deltaX:"wheelDeltaX"in _u?-_u.wheelDeltaX:0},deltaY:function(_u){return"deltaY"in _u?_u.deltaY:"wheelDeltaY"in _u?-_u.wheelDeltaY:"wheelDelta"in _u?-_u.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(_u,$u,Tu,Cu){var Pu=Yc.get(_u);if(!Pu)return null;switch(_u){case"keypress":if(of(Tu)===0)return null;case"keydown":case"keyup":_u=rf;break;case"blur":case"focus":_u=nf;break;case"click":if(Tu.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_u=Ve$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_u=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_u=tf;break;case Xb:case Yb:case Zb:_u=lf;break;case $b:_u=uf;break;case"scroll":_u=Ne$2;break;case"wheel":_u=vf;break;case"copy":case"cut":case"paste":_u=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_u=We$1;break;default:_u=G$7}return $u=_u.getPooled(Pu,$u,Tu,Cu),Xd($u),$u}};if(pa$1)throw Error(u$b(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf=Nc;la$1=Qd;ma$1=xf;na$1=Pd;xa$1({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$1,ChangeEventPlugin:Me$1,SelectEventPlugin:kf,BeforeInputEventPlugin:ve$2});var yf=[],zf=-1;function H$7(_u){0>zf||(_u.current=yf[zf],yf[zf]=null,zf--)}function I$a(_u,$u){zf++,yf[zf]=_u.current,_u.current=$u}var Af={},J$8={current:Af},K$9={current:!1},Bf=Af;function Cf(_u,$u){var Tu=_u.type.contextTypes;if(!Tu)return Af;var Cu=_u.stateNode;if(Cu&&Cu.__reactInternalMemoizedUnmaskedChildContext===$u)return Cu.__reactInternalMemoizedMaskedChildContext;var Pu={},Bu;for(Bu in Tu)Pu[Bu]=$u[Bu];return Cu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=$u,_u.__reactInternalMemoizedMaskedChildContext=Pu),Pu}function L$b(_u){return _u=_u.childContextTypes,_u!=null}function Df(){H$7(K$9),H$7(J$8)}function Ef(_u,$u,Tu){if(J$8.current!==Af)throw Error(u$b(168));I$a(J$8,$u),I$a(K$9,Tu)}function Ff(_u,$u,Tu){var Cu=_u.stateNode;if(_u=$u.childContextTypes,typeof Cu.getChildContext!="function")return Tu;Cu=Cu.getChildContext();for(var Pu in Cu)if(!(Pu in _u))throw Error(u$b(108,pb($u)||"Unknown",Pu));return n$f({},Tu,{},Cu)}function Gf(_u){return _u=(_u=_u.stateNode)&&_u.__reactInternalMemoizedMergedChildContext||Af,Bf=J$8.current,I$a(J$8,_u),I$a(K$9,K$9.current),!0}function Hf(_u,$u,Tu){var Cu=_u.stateNode;if(!Cu)throw Error(u$b(169));Tu?(_u=Ff(_u,$u,Bf),Cu.__reactInternalMemoizedMergedChildContext=_u,H$7(K$9),H$7(J$8),I$a(J$8,_u)):H$7(K$9),I$a(K$9,Tu)}var If=r$b.unstable_runWithPriority,Jf=r$b.unstable_scheduleCallback,Kf=r$b.unstable_cancelCallback,Lf=r$b.unstable_requestPaint,Mf=r$b.unstable_now,Nf=r$b.unstable_getCurrentPriorityLevel,Of=r$b.unstable_ImmediatePriority,Pf=r$b.unstable_UserBlockingPriority,Qf=r$b.unstable_NormalPriority,Rf=r$b.unstable_LowPriority,Sf=r$b.unstable_IdlePriority,Tf={},Uf=r$b.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u$b(332))}}function bg(_u){switch(_u){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u$b(332))}}function cg(_u,$u){return _u=bg(_u),If(_u,$u)}function dg(_u,$u,Tu){return _u=bg(_u),Jf(_u,$u,Tu)}function eg(_u){return Wf===null?(Wf=[_u],Xf=Jf(Of,fg)):Wf.push(_u),Tf}function gg(){if(Xf!==null){var _u=Xf;Xf=null,Kf(_u)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var _u=0;try{var $u=Wf;cg(99,function(){for(;_u<$u.length;_u++){var Tu=$u[_u];do Tu=Tu(!0);while(Tu!==null)}}),Wf=null}catch(Tu){throw Wf!==null&&(Wf=Wf.slice(_u+1)),Jf(Of,gg),Tu}finally{Yf=!1}}}function hg(_u,$u,Tu){return Tu/=10,1073741821-(((1073741821-_u+$u/10)/Tu|0)+1)*Tu}function ig(_u,$u){if(_u&&_u.defaultProps){$u=n$f({},$u),_u=_u.defaultProps;for(var Tu in _u)$u[Tu]===void 0&&($u[Tu]=_u[Tu])}return $u}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(_u){var $u=jg.current;H$7(jg),_u.type._context._currentValue=$u}function pg(_u,$u){for(;_u!==null;){var Tu=_u.alternate;if(_u.childExpirationTime<$u)_u.childExpirationTime=$u,Tu!==null&&Tu.childExpirationTime<$u&&(Tu.childExpirationTime=$u);else if(Tu!==null&&Tu.childExpirationTime<$u)Tu.childExpirationTime=$u;else break;_u=_u.return}}function qg(_u,$u){kg=_u,mg=lg=null,_u=_u.dependencies,_u!==null&&_u.firstContext!==null&&(_u.expirationTime>=$u&&(rg=!0),_u.firstContext=null)}function sg(_u,$u){if(mg!==_u&&$u!==!1&&$u!==0)if((typeof $u!="number"||$u===1073741823)&&(mg=_u,$u=1073741823),$u={context:_u,observedBits:$u,next:null},lg===null){if(kg===null)throw Error(u$b(308));lg=$u,kg.dependencies={expirationTime:0,firstContext:$u,responders:null}}else lg=lg.next=$u;return _u._currentValue}var tg=!1;function ug(_u){_u.updateQueue={baseState:_u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(_u,$u){_u=_u.updateQueue,$u.updateQueue===_u&&($u.updateQueue={baseState:_u.baseState,baseQueue:_u.baseQueue,shared:_u.shared,effects:_u.effects})}function wg(_u,$u){return _u={expirationTime:_u,suspenseConfig:$u,tag:0,payload:null,callback:null,next:null},_u.next=_u}function xg(_u,$u){if(_u=_u.updateQueue,_u!==null){_u=_u.shared;var Tu=_u.pending;Tu===null?$u.next=$u:($u.next=Tu.next,Tu.next=$u),_u.pending=$u}}function yg(_u,$u){var Tu=_u.alternate;Tu!==null&&vg(Tu,_u),_u=_u.updateQueue,Tu=_u.baseQueue,Tu===null?(_u.baseQueue=$u.next=$u,$u.next=$u):($u.next=Tu.next,Tu.next=$u)}function zg(_u,$u,Tu,Cu){var Pu=_u.updateQueue;tg=!1;var Bu=Pu.baseQueue,Lu=Pu.shared.pending;if(Lu!==null){if(Bu!==null){var Ru=Bu.next;Bu.next=Lu.next,Lu.next=Ru}Bu=Lu,Pu.shared.pending=null,Ru=_u.alternate,Ru!==null&&(Ru=Ru.updateQueue,Ru!==null&&(Ru.baseQueue=Lu))}if(Bu!==null){Ru=Bu.next;var Ou=Pu.baseState,Du=0,Fu=null,Vu=null,ku=null;if(Ru!==null){var Nu=Ru;do{if(Lu=Nu.expirationTime,Lu<Cu){var Gu={expirationTime:Nu.expirationTime,suspenseConfig:Nu.suspenseConfig,tag:Nu.tag,payload:Nu.payload,callback:Nu.callback,next:null};ku===null?(Vu=ku=Gu,Fu=Ou):ku=ku.next=Gu,Lu>Du&&(Du=Lu)}else{ku!==null&&(ku=ku.next={expirationTime:1073741823,suspenseConfig:Nu.suspenseConfig,tag:Nu.tag,payload:Nu.payload,callback:Nu.callback,next:null}),Ag(Lu,Nu.suspenseConfig);e:{var ju=_u,Hu=Nu;switch(Lu=$u,Gu=Tu,Hu.tag){case 1:if(ju=Hu.payload,typeof ju=="function"){Ou=ju.call(Gu,Ou,Lu);break e}Ou=ju;break e;case 3:ju.effectTag=ju.effectTag&-4097|64;case 0:if(ju=Hu.payload,Lu=typeof ju=="function"?ju.call(Gu,Ou,Lu):ju,Lu==null)break e;Ou=n$f({},Ou,Lu);break e;case 2:tg=!0}}Nu.callback!==null&&(_u.effectTag|=32,Lu=Pu.effects,Lu===null?Pu.effects=[Nu]:Lu.push(Nu))}if(Nu=Nu.next,Nu===null||Nu===Ru){if(Lu=Pu.shared.pending,Lu===null)break;Nu=Bu.next=Lu.next,Lu.next=Ru,Pu.baseQueue=Bu=Lu,Pu.shared.pending=null}}while(1)}ku===null?Fu=Ou:ku.next=Vu,Pu.baseState=Fu,Pu.baseQueue=ku,Bg(Du),_u.expirationTime=Du,_u.memoizedState=Ou}}function Cg(_u,$u,Tu){if(_u=$u.effects,$u.effects=null,_u!==null)for($u=0;$u<_u.length;$u++){var Cu=_u[$u],Pu=Cu.callback;if(Pu!==null){if(Cu.callback=null,Cu=Pu,Pu=Tu,typeof Cu!="function")throw Error(u$b(191,Cu));Cu.call(Pu)}}}var Dg=Wa$1.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(_u,$u,Tu,Cu){$u=_u.memoizedState,Tu=Tu(Cu,$u),Tu=Tu==null?$u:n$f({},$u,Tu),_u.memoizedState=Tu,_u.expirationTime===0&&(_u.updateQueue.baseState=Tu)}var Jg={isMounted:function(_u){return(_u=_u._reactInternalFiber)?dc(_u)===_u:!1},enqueueSetState:function(_u,$u,Tu){_u=_u._reactInternalFiber;var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu=wg(Cu,Pu),Pu.payload=$u,Tu!=null&&(Pu.callback=Tu),xg(_u,Pu),Ig(_u,Cu)},enqueueReplaceState:function(_u,$u,Tu){_u=_u._reactInternalFiber;var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu=wg(Cu,Pu),Pu.tag=1,Pu.payload=$u,Tu!=null&&(Pu.callback=Tu),xg(_u,Pu),Ig(_u,Cu)},enqueueForceUpdate:function(_u,$u){_u=_u._reactInternalFiber;var Tu=Gg(),Cu=Dg.suspense;Tu=Hg(Tu,_u,Cu),Cu=wg(Tu,Cu),Cu.tag=2,$u!=null&&(Cu.callback=$u),xg(_u,Cu),Ig(_u,Tu)}};function Kg(_u,$u,Tu,Cu,Pu,Bu,Lu){return _u=_u.stateNode,typeof _u.shouldComponentUpdate=="function"?_u.shouldComponentUpdate(Cu,Bu,Lu):$u.prototype&&$u.prototype.isPureReactComponent?!bf(Tu,Cu)||!bf(Pu,Bu):!0}function Lg(_u,$u,Tu){var Cu=!1,Pu=Af,Bu=$u.contextType;return typeof Bu=="object"&&Bu!==null?Bu=sg(Bu):(Pu=L$b($u)?Bf:J$8.current,Cu=$u.contextTypes,Bu=(Cu=Cu!=null)?Cf(_u,Pu):Af),$u=new $u(Tu,Bu),_u.memoizedState=$u.state!==null&&$u.state!==void 0?$u.state:null,$u.updater=Jg,_u.stateNode=$u,$u._reactInternalFiber=_u,Cu&&(_u=_u.stateNode,_u.__reactInternalMemoizedUnmaskedChildContext=Pu,_u.__reactInternalMemoizedMaskedChildContext=Bu),$u}function Mg(_u,$u,Tu,Cu){_u=$u.state,typeof $u.componentWillReceiveProps=="function"&&$u.componentWillReceiveProps(Tu,Cu),typeof $u.UNSAFE_componentWillReceiveProps=="function"&&$u.UNSAFE_componentWillReceiveProps(Tu,Cu),$u.state!==_u&&Jg.enqueueReplaceState($u,$u.state,null)}function Ng(_u,$u,Tu,Cu){var Pu=_u.stateNode;Pu.props=Tu,Pu.state=_u.memoizedState,Pu.refs=Eg,ug(_u);var Bu=$u.contextType;typeof Bu=="object"&&Bu!==null?Pu.context=sg(Bu):(Bu=L$b($u)?Bf:J$8.current,Pu.context=Cf(_u,Bu)),zg(_u,Tu,Pu,Cu),Pu.state=_u.memoizedState,Bu=$u.getDerivedStateFromProps,typeof Bu=="function"&&(Fg(_u,$u,Bu,Tu),Pu.state=_u.memoizedState),typeof $u.getDerivedStateFromProps=="function"||typeof Pu.getSnapshotBeforeUpdate=="function"||typeof Pu.UNSAFE_componentWillMount!="function"&&typeof Pu.componentWillMount!="function"||($u=Pu.state,typeof Pu.componentWillMount=="function"&&Pu.componentWillMount(),typeof Pu.UNSAFE_componentWillMount=="function"&&Pu.UNSAFE_componentWillMount(),$u!==Pu.state&&Jg.enqueueReplaceState(Pu,Pu.state,null),zg(_u,Tu,Pu,Cu),Pu.state=_u.memoizedState),typeof Pu.componentDidMount=="function"&&(_u.effectTag|=4)}var Og=Array.isArray;function Pg(_u,$u,Tu){if(_u=Tu.ref,_u!==null&&typeof _u!="function"&&typeof _u!="object"){if(Tu._owner){if(Tu=Tu._owner,Tu){if(Tu.tag!==1)throw Error(u$b(309));var Cu=Tu.stateNode}if(!Cu)throw Error(u$b(147,_u));var Pu=""+_u;return $u!==null&&$u.ref!==null&&typeof $u.ref=="function"&&$u.ref._stringRef===Pu?$u.ref:($u=function(Bu){var Lu=Cu.refs;Lu===Eg&&(Lu=Cu.refs={}),Bu===null?delete Lu[Pu]:Lu[Pu]=Bu},$u._stringRef=Pu,$u)}if(typeof _u!="string")throw Error(u$b(284));if(!Tu._owner)throw Error(u$b(290,_u))}return _u}function Qg(_u,$u){if(_u.type!=="textarea")throw Error(u$b(31,Object.prototype.toString.call($u)==="[object Object]"?"object with keys {"+Object.keys($u).join(", ")+"}":$u,""))}function Rg(_u){function $u(Hu,Uu){if(_u){var zu=Hu.lastEffect;zu!==null?(zu.nextEffect=Uu,Hu.lastEffect=Uu):Hu.firstEffect=Hu.lastEffect=Uu,Uu.nextEffect=null,Uu.effectTag=8}}function Tu(Hu,Uu){if(!_u)return null;for(;Uu!==null;)$u(Hu,Uu),Uu=Uu.sibling;return null}function Cu(Hu,Uu){for(Hu=new Map;Uu!==null;)Uu.key!==null?Hu.set(Uu.key,Uu):Hu.set(Uu.index,Uu),Uu=Uu.sibling;return Hu}function Pu(Hu,Uu){return Hu=Sg(Hu,Uu),Hu.index=0,Hu.sibling=null,Hu}function Bu(Hu,Uu,zu){return Hu.index=zu,_u?(zu=Hu.alternate,zu!==null?(zu=zu.index,zu<Uu?(Hu.effectTag=2,Uu):zu):(Hu.effectTag=2,Uu)):Uu}function Lu(Hu){return _u&&Hu.alternate===null&&(Hu.effectTag=2),Hu}function Ru(Hu,Uu,zu,Wu){return Uu===null||Uu.tag!==6?(Uu=Tg(zu,Hu.mode,Wu),Uu.return=Hu,Uu):(Uu=Pu(Uu,zu),Uu.return=Hu,Uu)}function Ou(Hu,Uu,zu,Wu){return Uu!==null&&Uu.elementType===zu.type?(Wu=Pu(Uu,zu.props),Wu.ref=Pg(Hu,Uu,zu),Wu.return=Hu,Wu):(Wu=Ug(zu.type,zu.key,zu.props,null,Hu.mode,Wu),Wu.ref=Pg(Hu,Uu,zu),Wu.return=Hu,Wu)}function Du(Hu,Uu,zu,Wu){return Uu===null||Uu.tag!==4||Uu.stateNode.containerInfo!==zu.containerInfo||Uu.stateNode.implementation!==zu.implementation?(Uu=Vg(zu,Hu.mode,Wu),Uu.return=Hu,Uu):(Uu=Pu(Uu,zu.children||[]),Uu.return=Hu,Uu)}function Fu(Hu,Uu,zu,Wu,Qu){return Uu===null||Uu.tag!==7?(Uu=Wg(zu,Hu.mode,Wu,Qu),Uu.return=Hu,Uu):(Uu=Pu(Uu,zu),Uu.return=Hu,Uu)}function Vu(Hu,Uu,zu){if(typeof Uu=="string"||typeof Uu=="number")return Uu=Tg(""+Uu,Hu.mode,zu),Uu.return=Hu,Uu;if(typeof Uu=="object"&&Uu!==null){switch(Uu.$$typeof){case Za$1:return zu=Ug(Uu.type,Uu.key,Uu.props,null,Hu.mode,zu),zu.ref=Pg(Hu,null,Uu),zu.return=Hu,zu;case $a$1:return Uu=Vg(Uu,Hu.mode,zu),Uu.return=Hu,Uu}if(Og(Uu)||nb(Uu))return Uu=Wg(Uu,Hu.mode,zu,null),Uu.return=Hu,Uu;Qg(Hu,Uu)}return null}function ku(Hu,Uu,zu,Wu){var Qu=Uu!==null?Uu.key:null;if(typeof zu=="string"||typeof zu=="number")return Qu!==null?null:Ru(Hu,Uu,""+zu,Wu);if(typeof zu=="object"&&zu!==null){switch(zu.$$typeof){case Za$1:return zu.key===Qu?zu.type===ab?Fu(Hu,Uu,zu.props.children,Wu,Qu):Ou(Hu,Uu,zu,Wu):null;case $a$1:return zu.key===Qu?Du(Hu,Uu,zu,Wu):null}if(Og(zu)||nb(zu))return Qu!==null?null:Fu(Hu,Uu,zu,Wu,null);Qg(Hu,zu)}return null}function Nu(Hu,Uu,zu,Wu,Qu){if(typeof Wu=="string"||typeof Wu=="number")return Hu=Hu.get(zu)||null,Ru(Uu,Hu,""+Wu,Qu);if(typeof Wu=="object"&&Wu!==null){switch(Wu.$$typeof){case Za$1:return Hu=Hu.get(Wu.key===null?zu:Wu.key)||null,Wu.type===ab?Fu(Uu,Hu,Wu.props.children,Qu,Wu.key):Ou(Uu,Hu,Wu,Qu);case $a$1:return Hu=Hu.get(Wu.key===null?zu:Wu.key)||null,Du(Uu,Hu,Wu,Qu)}if(Og(Wu)||nb(Wu))return Hu=Hu.get(zu)||null,Fu(Uu,Hu,Wu,Qu,null);Qg(Uu,Wu)}return null}function Gu(Hu,Uu,zu,Wu){for(var Qu=null,Ku=null,Yu=Uu,Xc=Uu=0,_d=null;Yu!==null&&Xc<zu.length;Xc++){Yu.index>Xc?(_d=Yu,Yu=null):_d=Yu.sibling;var _f=ku(Hu,Yu,zu[Xc],Wu);if(_f===null){Yu===null&&(Yu=_d);break}_u&&Yu&&_f.alternate===null&&$u(Hu,Yu),Uu=Bu(_f,Uu,Xc),Ku===null?Qu=_f:Ku.sibling=_f,Ku=_f,Yu=_d}if(Xc===zu.length)return Tu(Hu,Yu),Qu;if(Yu===null){for(;Xc<zu.length;Xc++)Yu=Vu(Hu,zu[Xc],Wu),Yu!==null&&(Uu=Bu(Yu,Uu,Xc),Ku===null?Qu=Yu:Ku.sibling=Yu,Ku=Yu);return Qu}for(Yu=Cu(Hu,Yu);Xc<zu.length;Xc++)_d=Nu(Yu,Hu,Xc,zu[Xc],Wu),_d!==null&&(_u&&_d.alternate!==null&&Yu.delete(_d.key===null?Xc:_d.key),Uu=Bu(_d,Uu,Xc),Ku===null?Qu=_d:Ku.sibling=_d,Ku=_d);return _u&&Yu.forEach(function(qu){return $u(Hu,qu)}),Qu}function ju(Hu,Uu,zu,Wu){var Qu=nb(zu);if(typeof Qu!="function")throw Error(u$b(150));if(zu=Qu.call(zu),zu==null)throw Error(u$b(151));for(var Ku=Qu=null,Yu=Uu,Xc=Uu=0,_d=null,_f=zu.next();Yu!==null&&!_f.done;Xc++,_f=zu.next()){Yu.index>Xc?(_d=Yu,Yu=null):_d=Yu.sibling;var qu=ku(Hu,Yu,_f.value,Wu);if(qu===null){Yu===null&&(Yu=_d);break}_u&&Yu&&qu.alternate===null&&$u(Hu,Yu),Uu=Bu(qu,Uu,Xc),Ku===null?Qu=qu:Ku.sibling=qu,Ku=qu,Yu=_d}if(_f.done)return Tu(Hu,Yu),Qu;if(Yu===null){for(;!_f.done;Xc++,_f=zu.next())_f=Vu(Hu,_f.value,Wu),_f!==null&&(Uu=Bu(_f,Uu,Xc),Ku===null?Qu=_f:Ku.sibling=_f,Ku=_f);return Qu}for(Yu=Cu(Hu,Yu);!_f.done;Xc++,_f=zu.next())_f=Nu(Yu,Hu,Xc,_f.value,Wu),_f!==null&&(_u&&_f.alternate!==null&&Yu.delete(_f.key===null?Xc:_f.key),Uu=Bu(_f,Uu,Xc),Ku===null?Qu=_f:Ku.sibling=_f,Ku=_f);return _u&&Yu.forEach(function(Xu){return $u(Hu,Xu)}),Qu}return function(Hu,Uu,zu,Wu){var Qu=typeof zu=="object"&&zu!==null&&zu.type===ab&&zu.key===null;Qu&&(zu=zu.props.children);var Ku=typeof zu=="object"&&zu!==null;if(Ku)switch(zu.$$typeof){case Za$1:e:{for(Ku=zu.key,Qu=Uu;Qu!==null;){if(Qu.key===Ku){switch(Qu.tag){case 7:if(zu.type===ab){Tu(Hu,Qu.sibling),Uu=Pu(Qu,zu.props.children),Uu.return=Hu,Hu=Uu;break e}break;default:if(Qu.elementType===zu.type){Tu(Hu,Qu.sibling),Uu=Pu(Qu,zu.props),Uu.ref=Pg(Hu,Qu,zu),Uu.return=Hu,Hu=Uu;break e}}Tu(Hu,Qu);break}else $u(Hu,Qu);Qu=Qu.sibling}zu.type===ab?(Uu=Wg(zu.props.children,Hu.mode,Wu,zu.key),Uu.return=Hu,Hu=Uu):(Wu=Ug(zu.type,zu.key,zu.props,null,Hu.mode,Wu),Wu.ref=Pg(Hu,Uu,zu),Wu.return=Hu,Hu=Wu)}return Lu(Hu);case $a$1:e:{for(Qu=zu.key;Uu!==null;){if(Uu.key===Qu)if(Uu.tag===4&&Uu.stateNode.containerInfo===zu.containerInfo&&Uu.stateNode.implementation===zu.implementation){Tu(Hu,Uu.sibling),Uu=Pu(Uu,zu.children||[]),Uu.return=Hu,Hu=Uu;break e}else{Tu(Hu,Uu);break}else $u(Hu,Uu);Uu=Uu.sibling}Uu=Vg(zu,Hu.mode,Wu),Uu.return=Hu,Hu=Uu}return Lu(Hu)}if(typeof zu=="string"||typeof zu=="number")return zu=""+zu,Uu!==null&&Uu.tag===6?(Tu(Hu,Uu.sibling),Uu=Pu(Uu,zu),Uu.return=Hu,Hu=Uu):(Tu(Hu,Uu),Uu=Tg(zu,Hu.mode,Wu),Uu.return=Hu,Hu=Uu),Lu(Hu);if(Og(zu))return Gu(Hu,Uu,zu,Wu);if(nb(zu))return ju(Hu,Uu,zu,Wu);if(Ku&&Qg(Hu,zu),typeof zu=="undefined"&&!Qu)switch(Hu.tag){case 1:case 0:throw Hu=Hu.type,Error(u$b(152,Hu.displayName||Hu.name||"Component"))}return Tu(Hu,Uu)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(_u){if(_u===Zg)throw Error(u$b(174));return _u}function dh(_u,$u){switch(I$a(bh,$u),I$a(ah,_u),I$a($g,Zg),_u=$u.nodeType,_u){case 9:case 11:$u=($u=$u.documentElement)?$u.namespaceURI:Ob(null,"");break;default:_u=_u===8?$u.parentNode:$u,$u=_u.namespaceURI||null,_u=_u.tagName,$u=Ob($u,_u)}H$7($g),I$a($g,$u)}function eh(){H$7($g),H$7(ah),H$7(bh)}function fh(_u){ch(bh.current);var $u=ch($g.current),Tu=Ob($u,_u.type);$u!==Tu&&(I$a(ah,_u),I$a($g,Tu))}function gh(_u){ah.current===_u&&(H$7($g),H$7(ah))}var M$b={current:0};function hh(_u){for(var $u=_u;$u!==null;){if($u.tag===13){var Tu=$u.memoizedState;if(Tu!==null&&(Tu=Tu.dehydrated,Tu===null||Tu.data===Bd||Tu.data===Cd))return $u}else if($u.tag===19&&$u.memoizedProps.revealOrder!==void 0){if(($u.effectTag&64)!==0)return $u}else if($u.child!==null){$u.child.return=$u,$u=$u.child;continue}if($u===_u)break;for(;$u.sibling===null;){if($u.return===null||$u.return===_u)return null;$u=$u.return}$u.sibling.return=$u.return,$u=$u.sibling}return null}function ih(_u,$u){return{responder:_u,props:$u}}var jh=Wa$1.ReactCurrentDispatcher,kh=Wa$1.ReactCurrentBatchConfig,lh=0,N$7=null,O$c=null,P$e=null,mh=!1;function Q$7(){throw Error(u$b(321))}function nh(_u,$u){if($u===null)return!1;for(var Tu=0;Tu<$u.length&&Tu<_u.length;Tu++)if(!$e$2(_u[Tu],$u[Tu]))return!1;return!0}function oh(_u,$u,Tu,Cu,Pu,Bu){if(lh=Bu,N$7=$u,$u.memoizedState=null,$u.updateQueue=null,$u.expirationTime=0,jh.current=_u===null||_u.memoizedState===null?ph:qh,_u=Tu(Cu,Pu),$u.expirationTime===lh){Bu=0;do{if($u.expirationTime=0,!(25>Bu))throw Error(u$b(301));Bu+=1,P$e=O$c=null,$u.updateQueue=null,jh.current=rh,_u=Tu(Cu,Pu)}while($u.expirationTime===lh)}if(jh.current=sh,$u=O$c!==null&&O$c.next!==null,lh=0,P$e=O$c=N$7=null,mh=!1,$u)throw Error(u$b(300));return _u}function th(){var _u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$e===null?N$7.memoizedState=P$e=_u:P$e=P$e.next=_u,P$e}function uh(){if(O$c===null){var _u=N$7.alternate;_u=_u!==null?_u.memoizedState:null}else _u=O$c.next;var $u=P$e===null?N$7.memoizedState:P$e.next;if($u!==null)P$e=$u,O$c=_u;else{if(_u===null)throw Error(u$b(310));O$c=_u,_u={memoizedState:O$c.memoizedState,baseState:O$c.baseState,baseQueue:O$c.baseQueue,queue:O$c.queue,next:null},P$e===null?N$7.memoizedState=P$e=_u:P$e=P$e.next=_u}return P$e}function vh(_u,$u){return typeof $u=="function"?$u(_u):$u}function wh(_u){var $u=uh(),Tu=$u.queue;if(Tu===null)throw Error(u$b(311));Tu.lastRenderedReducer=_u;var Cu=O$c,Pu=Cu.baseQueue,Bu=Tu.pending;if(Bu!==null){if(Pu!==null){var Lu=Pu.next;Pu.next=Bu.next,Bu.next=Lu}Cu.baseQueue=Pu=Bu,Tu.pending=null}if(Pu!==null){Pu=Pu.next,Cu=Cu.baseState;var Ru=Lu=Bu=null,Ou=Pu;do{var Du=Ou.expirationTime;if(Du<lh){var Fu={expirationTime:Ou.expirationTime,suspenseConfig:Ou.suspenseConfig,action:Ou.action,eagerReducer:Ou.eagerReducer,eagerState:Ou.eagerState,next:null};Ru===null?(Lu=Ru=Fu,Bu=Cu):Ru=Ru.next=Fu,Du>N$7.expirationTime&&(N$7.expirationTime=Du,Bg(Du))}else Ru!==null&&(Ru=Ru.next={expirationTime:1073741823,suspenseConfig:Ou.suspenseConfig,action:Ou.action,eagerReducer:Ou.eagerReducer,eagerState:Ou.eagerState,next:null}),Ag(Du,Ou.suspenseConfig),Cu=Ou.eagerReducer===_u?Ou.eagerState:_u(Cu,Ou.action);Ou=Ou.next}while(Ou!==null&&Ou!==Pu);Ru===null?Bu=Cu:Ru.next=Lu,$e$2(Cu,$u.memoizedState)||(rg=!0),$u.memoizedState=Cu,$u.baseState=Bu,$u.baseQueue=Ru,Tu.lastRenderedState=Cu}return[$u.memoizedState,Tu.dispatch]}function xh(_u){var $u=uh(),Tu=$u.queue;if(Tu===null)throw Error(u$b(311));Tu.lastRenderedReducer=_u;var Cu=Tu.dispatch,Pu=Tu.pending,Bu=$u.memoizedState;if(Pu!==null){Tu.pending=null;var Lu=Pu=Pu.next;do Bu=_u(Bu,Lu.action),Lu=Lu.next;while(Lu!==Pu);$e$2(Bu,$u.memoizedState)||(rg=!0),$u.memoizedState=Bu,$u.baseQueue===null&&($u.baseState=Bu),Tu.lastRenderedState=Bu}return[Bu,Cu]}function yh(_u){var $u=th();return typeof _u=="function"&&(_u=_u()),$u.memoizedState=$u.baseState=_u,_u=$u.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:_u},_u=_u.dispatch=zh.bind(null,N$7,_u),[$u.memoizedState,_u]}function Ah(_u,$u,Tu,Cu){return _u={tag:_u,create:$u,destroy:Tu,deps:Cu,next:null},$u=N$7.updateQueue,$u===null?($u={lastEffect:null},N$7.updateQueue=$u,$u.lastEffect=_u.next=_u):(Tu=$u.lastEffect,Tu===null?$u.lastEffect=_u.next=_u:(Cu=Tu.next,Tu.next=_u,_u.next=Cu,$u.lastEffect=_u)),_u}function Bh(){return uh().memoizedState}function Ch(_u,$u,Tu,Cu){var Pu=th();N$7.effectTag|=_u,Pu.memoizedState=Ah(1|$u,Tu,void 0,Cu===void 0?null:Cu)}function Dh(_u,$u,Tu,Cu){var Pu=uh();Cu=Cu===void 0?null:Cu;var Bu=void 0;if(O$c!==null){var Lu=O$c.memoizedState;if(Bu=Lu.destroy,Cu!==null&&nh(Cu,Lu.deps)){Ah($u,Tu,Bu,Cu);return}}N$7.effectTag|=_u,Pu.memoizedState=Ah(1|$u,Tu,Bu,Cu)}function Eh(_u,$u){return Ch(516,4,_u,$u)}function Fh(_u,$u){return Dh(516,4,_u,$u)}function Gh(_u,$u){return Dh(4,2,_u,$u)}function Hh(_u,$u){if(typeof $u=="function")return _u=_u(),$u(_u),function(){$u(null)};if($u!=null)return _u=_u(),$u.current=_u,function(){$u.current=null}}function Ih(_u,$u,Tu){return Tu=Tu!=null?Tu.concat([_u]):null,Dh(4,2,Hh.bind(null,$u,_u),Tu)}function Jh(){}function Kh(_u,$u){return th().memoizedState=[_u,$u===void 0?null:$u],_u}function Lh(_u,$u){var Tu=uh();$u=$u===void 0?null:$u;var Cu=Tu.memoizedState;return Cu!==null&&$u!==null&&nh($u,Cu[1])?Cu[0]:(Tu.memoizedState=[_u,$u],_u)}function Mh(_u,$u){var Tu=uh();$u=$u===void 0?null:$u;var Cu=Tu.memoizedState;return Cu!==null&&$u!==null&&nh($u,Cu[1])?Cu[0]:(_u=_u(),Tu.memoizedState=[_u,$u],_u)}function Nh(_u,$u,Tu){var Cu=ag();cg(98>Cu?98:Cu,function(){_u(!0)}),cg(97<Cu?97:Cu,function(){var Pu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{_u(!1),Tu()}finally{kh.suspense=Pu}})}function zh(_u,$u,Tu){var Cu=Gg(),Pu=Dg.suspense;Cu=Hg(Cu,_u,Pu),Pu={expirationTime:Cu,suspenseConfig:Pu,action:Tu,eagerReducer:null,eagerState:null,next:null};var Bu=$u.pending;if(Bu===null?Pu.next=Pu:(Pu.next=Bu.next,Bu.next=Pu),$u.pending=Pu,Bu=_u.alternate,_u===N$7||Bu!==null&&Bu===N$7)mh=!0,Pu.expirationTime=lh,N$7.expirationTime=lh;else{if(_u.expirationTime===0&&(Bu===null||Bu.expirationTime===0)&&(Bu=$u.lastRenderedReducer,Bu!==null))try{var Lu=$u.lastRenderedState,Ru=Bu(Lu,Tu);if(Pu.eagerReducer=Bu,Pu.eagerState=Ru,$e$2(Ru,Lu))return}catch{}finally{}Ig(_u,Cu)}}var sh={readContext:sg,useCallback:Q$7,useContext:Q$7,useEffect:Q$7,useImperativeHandle:Q$7,useLayoutEffect:Q$7,useMemo:Q$7,useReducer:Q$7,useRef:Q$7,useState:Q$7,useDebugValue:Q$7,useResponder:Q$7,useDeferredValue:Q$7,useTransition:Q$7},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(_u,$u,Tu){return Tu=Tu!=null?Tu.concat([_u]):null,Ch(4,2,Hh.bind(null,$u,_u),Tu)},useLayoutEffect:function(_u,$u){return Ch(4,2,_u,$u)},useMemo:function(_u,$u){var Tu=th();return $u=$u===void 0?null:$u,_u=_u(),Tu.memoizedState=[_u,$u],_u},useReducer:function(_u,$u,Tu){var Cu=th();return $u=Tu!==void 0?Tu($u):$u,Cu.memoizedState=Cu.baseState=$u,_u=Cu.queue={pending:null,dispatch:null,lastRenderedReducer:_u,lastRenderedState:$u},_u=_u.dispatch=zh.bind(null,N$7,_u),[Cu.memoizedState,_u]},useRef:function(_u){var $u=th();return _u={current:_u},$u.memoizedState=_u},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=yh(_u),Cu=Tu[0],Pu=Tu[1];return Eh(function(){var Bu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Bu}},[_u,$u]),Cu},useTransition:function(_u){var $u=yh(!1),Tu=$u[0];return $u=$u[1],[Kh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=wh(vh),Cu=Tu[0],Pu=Tu[1];return Fh(function(){var Bu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Bu}},[_u,$u]),Cu},useTransition:function(_u){var $u=wh(vh),Tu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(_u,$u){var Tu=xh(vh),Cu=Tu[0],Pu=Tu[1];return Fh(function(){var Bu=kh.suspense;kh.suspense=$u===void 0?null:$u;try{Pu(_u)}finally{kh.suspense=Bu}},[_u,$u]),Cu},useTransition:function(_u){var $u=xh(vh),Tu=$u[0];return $u=$u[1],[Lh(Nh.bind(null,$u,_u),[$u,_u]),Tu]}},Oh=null,Ph=null,Qh=!1;function Rh(_u,$u){var Tu=Sh(5,null,null,0);Tu.elementType="DELETED",Tu.type="DELETED",Tu.stateNode=$u,Tu.return=_u,Tu.effectTag=8,_u.lastEffect!==null?(_u.lastEffect.nextEffect=Tu,_u.lastEffect=Tu):_u.firstEffect=_u.lastEffect=Tu}function Th(_u,$u){switch(_u.tag){case 5:var Tu=_u.type;return $u=$u.nodeType!==1||Tu.toLowerCase()!==$u.nodeName.toLowerCase()?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 6:return $u=_u.pendingProps===""||$u.nodeType!==3?null:$u,$u!==null?(_u.stateNode=$u,!0):!1;case 13:return!1;default:return!1}}function Uh(_u){if(Qh){var $u=Ph;if($u){var Tu=$u;if(!Th(_u,$u)){if($u=Jd(Tu.nextSibling),!$u||!Th(_u,$u)){_u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u;return}Rh(Oh,Tu)}Oh=_u,Ph=Jd($u.firstChild)}else _u.effectTag=_u.effectTag&-1025|2,Qh=!1,Oh=_u}}function Vh(_u){for(_u=_u.return;_u!==null&&_u.tag!==5&&_u.tag!==3&&_u.tag!==13;)_u=_u.return;Oh=_u}function Wh(_u){if(_u!==Oh)return!1;if(!Qh)return Vh(_u),Qh=!0,!1;var $u=_u.type;if(_u.tag!==5||$u!=="head"&&$u!=="body"&&!Gd($u,_u.memoizedProps))for($u=Ph;$u;)Rh(_u,$u),$u=Jd($u.nextSibling);if(Vh(_u),_u.tag===13){if(_u=_u.memoizedState,_u=_u!==null?_u.dehydrated:null,!_u)throw Error(u$b(317));e:{for(_u=_u.nextSibling,$u=0;_u;){if(_u.nodeType===8){var Tu=_u.data;if(Tu===Ad){if($u===0){Ph=Jd(_u.nextSibling);break e}$u--}else Tu!==zd&&Tu!==Cd&&Tu!==Bd||$u++}_u=_u.nextSibling}Ph=null}}else Ph=Oh?Jd(_u.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$1.ReactCurrentOwner,rg=!1;function R$e(_u,$u,Tu,Cu){$u.child=_u===null?Yg($u,null,Tu,Cu):Xg($u,_u.child,Tu,Cu)}function Zh(_u,$u,Tu,Cu,Pu){Tu=Tu.render;var Bu=$u.ref;return qg($u,Pu),Cu=oh(_u,$u,Tu,Cu,Bu,Pu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Pu&&(_u.expirationTime=0),$h(_u,$u,Pu)):($u.effectTag|=1,R$e(_u,$u,Cu,Pu),$u.child)}function ai$1(_u,$u,Tu,Cu,Pu,Bu){if(_u===null){var Lu=Tu.type;return typeof Lu=="function"&&!bi$1(Lu)&&Lu.defaultProps===void 0&&Tu.compare===null&&Tu.defaultProps===void 0?($u.tag=15,$u.type=Lu,ci$1(_u,$u,Lu,Cu,Pu,Bu)):(_u=Ug(Tu.type,null,Cu,null,$u.mode,Bu),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}return Lu=_u.child,Pu<Bu&&(Pu=Lu.memoizedProps,Tu=Tu.compare,Tu=Tu!==null?Tu:bf,Tu(Pu,Cu)&&_u.ref===$u.ref)?$h(_u,$u,Bu):($u.effectTag|=1,_u=Sg(Lu,Cu),_u.ref=$u.ref,_u.return=$u,$u.child=_u)}function ci$1(_u,$u,Tu,Cu,Pu,Bu){return _u!==null&&bf(_u.memoizedProps,Cu)&&_u.ref===$u.ref&&(rg=!1,Pu<Bu)?($u.expirationTime=_u.expirationTime,$h(_u,$u,Bu)):di$1(_u,$u,Tu,Cu,Bu)}function ei$1(_u,$u){var Tu=$u.ref;(_u===null&&Tu!==null||_u!==null&&_u.ref!==Tu)&&($u.effectTag|=128)}function di$1(_u,$u,Tu,Cu,Pu){var Bu=L$b(Tu)?Bf:J$8.current;return Bu=Cf($u,Bu),qg($u,Pu),Tu=oh(_u,$u,Tu,Cu,Bu,Pu),_u!==null&&!rg?($u.updateQueue=_u.updateQueue,$u.effectTag&=-517,_u.expirationTime<=Pu&&(_u.expirationTime=0),$h(_u,$u,Pu)):($u.effectTag|=1,R$e(_u,$u,Tu,Pu),$u.child)}function fi$1(_u,$u,Tu,Cu,Pu){if(L$b(Tu)){var Bu=!0;Gf($u)}else Bu=!1;if(qg($u,Pu),$u.stateNode===null)_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),Lg($u,Tu,Cu),Ng($u,Tu,Cu,Pu),Cu=!0;else if(_u===null){var Lu=$u.stateNode,Ru=$u.memoizedProps;Lu.props=Ru;var Ou=Lu.context,Du=Tu.contextType;typeof Du=="object"&&Du!==null?Du=sg(Du):(Du=L$b(Tu)?Bf:J$8.current,Du=Cf($u,Du));var Fu=Tu.getDerivedStateFromProps,Vu=typeof Fu=="function"||typeof Lu.getSnapshotBeforeUpdate=="function";Vu||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Ru!==Cu||Ou!==Du)&&Mg($u,Lu,Cu,Du),tg=!1;var ku=$u.memoizedState;Lu.state=ku,zg($u,Cu,Lu,Pu),Ou=$u.memoizedState,Ru!==Cu||ku!==Ou||K$9.current||tg?(typeof Fu=="function"&&(Fg($u,Tu,Fu,Cu),Ou=$u.memoizedState),(Ru=tg||Kg($u,Tu,Ru,Cu,ku,Ou,Du))?(Vu||typeof Lu.UNSAFE_componentWillMount!="function"&&typeof Lu.componentWillMount!="function"||(typeof Lu.componentWillMount=="function"&&Lu.componentWillMount(),typeof Lu.UNSAFE_componentWillMount=="function"&&Lu.UNSAFE_componentWillMount()),typeof Lu.componentDidMount=="function"&&($u.effectTag|=4)):(typeof Lu.componentDidMount=="function"&&($u.effectTag|=4),$u.memoizedProps=Cu,$u.memoizedState=Ou),Lu.props=Cu,Lu.state=Ou,Lu.context=Du,Cu=Ru):(typeof Lu.componentDidMount=="function"&&($u.effectTag|=4),Cu=!1)}else Lu=$u.stateNode,vg(_u,$u),Ru=$u.memoizedProps,Lu.props=$u.type===$u.elementType?Ru:ig($u.type,Ru),Ou=Lu.context,Du=Tu.contextType,typeof Du=="object"&&Du!==null?Du=sg(Du):(Du=L$b(Tu)?Bf:J$8.current,Du=Cf($u,Du)),Fu=Tu.getDerivedStateFromProps,(Vu=typeof Fu=="function"||typeof Lu.getSnapshotBeforeUpdate=="function")||typeof Lu.UNSAFE_componentWillReceiveProps!="function"&&typeof Lu.componentWillReceiveProps!="function"||(Ru!==Cu||Ou!==Du)&&Mg($u,Lu,Cu,Du),tg=!1,Ou=$u.memoizedState,Lu.state=Ou,zg($u,Cu,Lu,Pu),ku=$u.memoizedState,Ru!==Cu||Ou!==ku||K$9.current||tg?(typeof Fu=="function"&&(Fg($u,Tu,Fu,Cu),ku=$u.memoizedState),(Fu=tg||Kg($u,Tu,Ru,Cu,Ou,ku,Du))?(Vu||typeof Lu.UNSAFE_componentWillUpdate!="function"&&typeof Lu.componentWillUpdate!="function"||(typeof Lu.componentWillUpdate=="function"&&Lu.componentWillUpdate(Cu,ku,Du),typeof Lu.UNSAFE_componentWillUpdate=="function"&&Lu.UNSAFE_componentWillUpdate(Cu,ku,Du)),typeof Lu.componentDidUpdate=="function"&&($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate=="function"&&($u.effectTag|=256)):(typeof Lu.componentDidUpdate!="function"||Ru===_u.memoizedProps&&Ou===_u.memoizedState||($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Ru===_u.memoizedProps&&Ou===_u.memoizedState||($u.effectTag|=256),$u.memoizedProps=Cu,$u.memoizedState=ku),Lu.props=Cu,Lu.state=ku,Lu.context=Du,Cu=Fu):(typeof Lu.componentDidUpdate!="function"||Ru===_u.memoizedProps&&Ou===_u.memoizedState||($u.effectTag|=4),typeof Lu.getSnapshotBeforeUpdate!="function"||Ru===_u.memoizedProps&&Ou===_u.memoizedState||($u.effectTag|=256),Cu=!1);return gi$1(_u,$u,Tu,Cu,Bu,Pu)}function gi$1(_u,$u,Tu,Cu,Pu,Bu){ei$1(_u,$u);var Lu=($u.effectTag&64)!==0;if(!Cu&&!Lu)return Pu&&Hf($u,Tu,!1),$h(_u,$u,Bu);Cu=$u.stateNode,Yh.current=$u;var Ru=Lu&&typeof Tu.getDerivedStateFromError!="function"?null:Cu.render();return $u.effectTag|=1,_u!==null&&Lu?($u.child=Xg($u,_u.child,null,Bu),$u.child=Xg($u,null,Ru,Bu)):R$e(_u,$u,Ru,Bu),$u.memoizedState=Cu.state,Pu&&Hf($u,Tu,!0),$u.child}function hi$1(_u){var $u=_u.stateNode;$u.pendingContext?Ef(_u,$u.pendingContext,$u.pendingContext!==$u.context):$u.context&&Ef(_u,$u.context,!1),dh(_u,$u.containerInfo)}var ii$1={dehydrated:null,retryTime:0};function ji$1(_u,$u,Tu){var Cu=$u.mode,Pu=$u.pendingProps,Bu=M$b.current,Lu=!1,Ru;if((Ru=($u.effectTag&64)!==0)||(Ru=(Bu&2)!==0&&(_u===null||_u.memoizedState!==null)),Ru?(Lu=!0,$u.effectTag&=-65):_u!==null&&_u.memoizedState===null||Pu.fallback===void 0||Pu.unstable_avoidThisFallback===!0||(Bu|=1),I$a(M$b,Bu&1),_u===null){if(Pu.fallback!==void 0&&Uh($u),Lu){if(Lu=Pu.fallback,Pu=Wg(null,Cu,0,null),Pu.return=$u,($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Pu.child=_u;_u!==null;)_u.return=Pu,_u=_u.sibling;return Tu=Wg(Lu,Cu,Tu,null),Tu.return=$u,Pu.sibling=Tu,$u.memoizedState=ii$1,$u.child=Pu,Tu}return Cu=Pu.children,$u.memoizedState=null,$u.child=Yg($u,null,Cu,Tu)}if(_u.memoizedState!==null){if(_u=_u.child,Cu=_u.sibling,Lu){if(Pu=Pu.fallback,Tu=Sg(_u,_u.pendingProps),Tu.return=$u,($u.mode&2)===0&&(Lu=$u.memoizedState!==null?$u.child.child:$u.child,Lu!==_u.child))for(Tu.child=Lu;Lu!==null;)Lu.return=Tu,Lu=Lu.sibling;return Cu=Sg(Cu,Pu),Cu.return=$u,Tu.sibling=Cu,Tu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Tu,Cu}return Tu=Xg($u,_u.child,Pu.children,Tu),$u.memoizedState=null,$u.child=Tu}if(_u=_u.child,Lu){if(Lu=Pu.fallback,Pu=Wg(null,Cu,0,null),Pu.return=$u,Pu.child=_u,_u!==null&&(_u.return=Pu),($u.mode&2)===0)for(_u=$u.memoizedState!==null?$u.child.child:$u.child,Pu.child=_u;_u!==null;)_u.return=Pu,_u=_u.sibling;return Tu=Wg(Lu,Cu,Tu,null),Tu.return=$u,Pu.sibling=Tu,Tu.effectTag|=2,Pu.childExpirationTime=0,$u.memoizedState=ii$1,$u.child=Pu,Tu}return $u.memoizedState=null,$u.child=Xg($u,_u,Pu.children,Tu)}function ki$1(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Tu=_u.alternate;Tu!==null&&Tu.expirationTime<$u&&(Tu.expirationTime=$u),pg(_u.return,$u)}function li$1(_u,$u,Tu,Cu,Pu,Bu){var Lu=_u.memoizedState;Lu===null?_u.memoizedState={isBackwards:$u,rendering:null,renderingStartTime:0,last:Cu,tail:Tu,tailExpiration:0,tailMode:Pu,lastEffect:Bu}:(Lu.isBackwards=$u,Lu.rendering=null,Lu.renderingStartTime=0,Lu.last=Cu,Lu.tail=Tu,Lu.tailExpiration=0,Lu.tailMode=Pu,Lu.lastEffect=Bu)}function mi$1(_u,$u,Tu){var Cu=$u.pendingProps,Pu=Cu.revealOrder,Bu=Cu.tail;if(R$e(_u,$u,Cu.children,Tu),Cu=M$b.current,(Cu&2)!==0)Cu=Cu&1|2,$u.effectTag|=64;else{if(_u!==null&&(_u.effectTag&64)!==0)e:for(_u=$u.child;_u!==null;){if(_u.tag===13)_u.memoizedState!==null&&ki$1(_u,Tu);else if(_u.tag===19)ki$1(_u,Tu);else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===$u)break e;for(;_u.sibling===null;){if(_u.return===null||_u.return===$u)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Cu&=1}if(I$a(M$b,Cu),($u.mode&2)===0)$u.memoizedState=null;else switch(Pu){case"forwards":for(Tu=$u.child,Pu=null;Tu!==null;)_u=Tu.alternate,_u!==null&&hh(_u)===null&&(Pu=Tu),Tu=Tu.sibling;Tu=Pu,Tu===null?(Pu=$u.child,$u.child=null):(Pu=Tu.sibling,Tu.sibling=null),li$1($u,!1,Pu,Tu,Bu,$u.lastEffect);break;case"backwards":for(Tu=null,Pu=$u.child,$u.child=null;Pu!==null;){if(_u=Pu.alternate,_u!==null&&hh(_u)===null){$u.child=Pu;break}_u=Pu.sibling,Pu.sibling=Tu,Tu=Pu,Pu=_u}li$1($u,!0,Tu,null,Bu,$u.lastEffect);break;case"together":li$1($u,!1,null,null,void 0,$u.lastEffect);break;default:$u.memoizedState=null}return $u.child}function $h(_u,$u,Tu){_u!==null&&($u.dependencies=_u.dependencies);var Cu=$u.expirationTime;if(Cu!==0&&Bg(Cu),$u.childExpirationTime<Tu)return null;if(_u!==null&&$u.child!==_u.child)throw Error(u$b(153));if($u.child!==null){for(_u=$u.child,Tu=Sg(_u,_u.pendingProps),$u.child=Tu,Tu.return=$u;_u.sibling!==null;)_u=_u.sibling,Tu=Tu.sibling=Sg(_u,_u.pendingProps),Tu.return=$u;Tu.sibling=null}return $u.child}var ni$1,oi$1,pi$1,qi$1;ni$1=function(_u,$u){for(var Tu=$u.child;Tu!==null;){if(Tu.tag===5||Tu.tag===6)_u.appendChild(Tu.stateNode);else if(Tu.tag!==4&&Tu.child!==null){Tu.child.return=Tu,Tu=Tu.child;continue}if(Tu===$u)break;for(;Tu.sibling===null;){if(Tu.return===null||Tu.return===$u)return;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}};oi$1=function(){};pi$1=function(_u,$u,Tu,Cu,Pu){var Bu=_u.memoizedProps;if(Bu!==Cu){var Lu=$u.stateNode;switch(ch($g.current),_u=null,Tu){case"input":Bu=zb(Lu,Bu),Cu=zb(Lu,Cu),_u=[];break;case"option":Bu=Gb(Lu,Bu),Cu=Gb(Lu,Cu),_u=[];break;case"select":Bu=n$f({},Bu,{value:void 0}),Cu=n$f({},Cu,{value:void 0}),_u=[];break;case"textarea":Bu=Ib(Lu,Bu),Cu=Ib(Lu,Cu),_u=[];break;default:typeof Bu.onClick!="function"&&typeof Cu.onClick=="function"&&(Lu.onclick=sd)}od(Tu,Cu);var Ru,Ou;Tu=null;for(Ru in Bu)if(!Cu.hasOwnProperty(Ru)&&Bu.hasOwnProperty(Ru)&&Bu[Ru]!=null)if(Ru==="style")for(Ou in Lu=Bu[Ru],Lu)Lu.hasOwnProperty(Ou)&&(Tu||(Tu={}),Tu[Ou]="");else Ru!=="dangerouslySetInnerHTML"&&Ru!=="children"&&Ru!=="suppressContentEditableWarning"&&Ru!=="suppressHydrationWarning"&&Ru!=="autoFocus"&&(va$1.hasOwnProperty(Ru)?_u||(_u=[]):(_u=_u||[]).push(Ru,null));for(Ru in Cu){var Du=Cu[Ru];if(Lu=Bu!=null?Bu[Ru]:void 0,Cu.hasOwnProperty(Ru)&&Du!==Lu&&(Du!=null||Lu!=null))if(Ru==="style")if(Lu){for(Ou in Lu)!Lu.hasOwnProperty(Ou)||Du&&Du.hasOwnProperty(Ou)||(Tu||(Tu={}),Tu[Ou]="");for(Ou in Du)Du.hasOwnProperty(Ou)&&Lu[Ou]!==Du[Ou]&&(Tu||(Tu={}),Tu[Ou]=Du[Ou])}else Tu||(_u||(_u=[]),_u.push(Ru,Tu)),Tu=Du;else Ru==="dangerouslySetInnerHTML"?(Du=Du?Du.__html:void 0,Lu=Lu?Lu.__html:void 0,Du!=null&&Lu!==Du&&(_u=_u||[]).push(Ru,Du)):Ru==="children"?Lu===Du||typeof Du!="string"&&typeof Du!="number"||(_u=_u||[]).push(Ru,""+Du):Ru!=="suppressContentEditableWarning"&&Ru!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Ru)?(Du!=null&&rd(Pu,Ru),_u||Lu===Du||(_u=[])):(_u=_u||[]).push(Ru,Du))}Tu&&(_u=_u||[]).push("style",Tu),Pu=_u,($u.updateQueue=Pu)&&($u.effectTag|=4)}};qi$1=function(_u,$u,Tu,Cu){Tu!==Cu&&($u.effectTag|=4)};function ri$1(_u,$u){switch(_u.tailMode){case"hidden":$u=_u.tail;for(var Tu=null;$u!==null;)$u.alternate!==null&&(Tu=$u),$u=$u.sibling;Tu===null?_u.tail=null:Tu.sibling=null;break;case"collapsed":Tu=_u.tail;for(var Cu=null;Tu!==null;)Tu.alternate!==null&&(Cu=Tu),Tu=Tu.sibling;Cu===null?$u||_u.tail===null?_u.tail=null:_u.tail.sibling=null:Cu.sibling=null}}function si$1(_u,$u,Tu){var Cu=$u.pendingProps;switch($u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$b($u.type)&&Df(),null;case 3:return eh(),H$7(K$9),H$7(J$8),Tu=$u.stateNode,Tu.pendingContext&&(Tu.context=Tu.pendingContext,Tu.pendingContext=null),_u!==null&&_u.child!==null||!Wh($u)||($u.effectTag|=4),oi$1($u),null;case 5:gh($u),Tu=ch(bh.current);var Pu=$u.type;if(_u!==null&&$u.stateNode!=null)pi$1(_u,$u,Pu,Cu,Tu),_u.ref!==$u.ref&&($u.effectTag|=128);else{if(!Cu){if($u.stateNode===null)throw Error(u$b(166));return null}if(_u=ch($g.current),Wh($u)){Cu=$u.stateNode,Pu=$u.type;var Bu=$u.memoizedProps;switch(Cu[Md]=$u,Cu[Nd]=Bu,Pu){case"iframe":case"object":case"embed":F$a("load",Cu);break;case"video":case"audio":for(_u=0;_u<ac.length;_u++)F$a(ac[_u],Cu);break;case"source":F$a("error",Cu);break;case"img":case"image":case"link":F$a("error",Cu),F$a("load",Cu);break;case"form":F$a("reset",Cu),F$a("submit",Cu);break;case"details":F$a("toggle",Cu);break;case"input":Ab(Cu,Bu),F$a("invalid",Cu),rd(Tu,"onChange");break;case"select":Cu._wrapperState={wasMultiple:!!Bu.multiple},F$a("invalid",Cu),rd(Tu,"onChange");break;case"textarea":Jb(Cu,Bu),F$a("invalid",Cu),rd(Tu,"onChange")}od(Pu,Bu),_u=null;for(var Lu in Bu)if(Bu.hasOwnProperty(Lu)){var Ru=Bu[Lu];Lu==="children"?typeof Ru=="string"?Cu.textContent!==Ru&&(_u=["children",Ru]):typeof Ru=="number"&&Cu.textContent!==""+Ru&&(_u=["children",""+Ru]):va$1.hasOwnProperty(Lu)&&Ru!=null&&rd(Tu,Lu)}switch(Pu){case"input":xb(Cu),Eb(Cu,Bu,!0);break;case"textarea":xb(Cu),Lb(Cu);break;case"select":case"option":break;default:typeof Bu.onClick=="function"&&(Cu.onclick=sd)}Tu=_u,$u.updateQueue=Tu,Tu!==null&&($u.effectTag|=4)}else{switch(Lu=Tu.nodeType===9?Tu:Tu.ownerDocument,_u===qd&&(_u=Nb(Pu)),_u===qd?Pu==="script"?(_u=Lu.createElement("div"),_u.innerHTML="<script><\/script>",_u=_u.removeChild(_u.firstChild)):typeof Cu.is=="string"?_u=Lu.createElement(Pu,{is:Cu.is}):(_u=Lu.createElement(Pu),Pu==="select"&&(Lu=_u,Cu.multiple?Lu.multiple=!0:Cu.size&&(Lu.size=Cu.size))):_u=Lu.createElementNS(_u,Pu),_u[Md]=$u,_u[Nd]=Cu,ni$1(_u,$u,!1,!1),$u.stateNode=_u,Lu=pd(Pu,Cu),Pu){case"iframe":case"object":case"embed":F$a("load",_u),Ru=Cu;break;case"video":case"audio":for(Ru=0;Ru<ac.length;Ru++)F$a(ac[Ru],_u);Ru=Cu;break;case"source":F$a("error",_u),Ru=Cu;break;case"img":case"image":case"link":F$a("error",_u),F$a("load",_u),Ru=Cu;break;case"form":F$a("reset",_u),F$a("submit",_u),Ru=Cu;break;case"details":F$a("toggle",_u),Ru=Cu;break;case"input":Ab(_u,Cu),Ru=zb(_u,Cu),F$a("invalid",_u),rd(Tu,"onChange");break;case"option":Ru=Gb(_u,Cu);break;case"select":_u._wrapperState={wasMultiple:!!Cu.multiple},Ru=n$f({},Cu,{value:void 0}),F$a("invalid",_u),rd(Tu,"onChange");break;case"textarea":Jb(_u,Cu),Ru=Ib(_u,Cu),F$a("invalid",_u),rd(Tu,"onChange");break;default:Ru=Cu}od(Pu,Ru);var Ou=Ru;for(Bu in Ou)if(Ou.hasOwnProperty(Bu)){var Du=Ou[Bu];Bu==="style"?md(_u,Du):Bu==="dangerouslySetInnerHTML"?(Du=Du?Du.__html:void 0,Du!=null&&Qb(_u,Du)):Bu==="children"?typeof Du=="string"?(Pu!=="textarea"||Du!=="")&&Rb(_u,Du):typeof Du=="number"&&Rb(_u,""+Du):Bu!=="suppressContentEditableWarning"&&Bu!=="suppressHydrationWarning"&&Bu!=="autoFocus"&&(va$1.hasOwnProperty(Bu)?Du!=null&&rd(Tu,Bu):Du!=null&&Xa$1(_u,Bu,Du,Lu))}switch(Pu){case"input":xb(_u),Eb(_u,Cu,!1);break;case"textarea":xb(_u),Lb(_u);break;case"option":Cu.value!=null&&_u.setAttribute("value",""+rb(Cu.value));break;case"select":_u.multiple=!!Cu.multiple,Tu=Cu.value,Tu!=null?Hb(_u,!!Cu.multiple,Tu,!1):Cu.defaultValue!=null&&Hb(_u,!!Cu.multiple,Cu.defaultValue,!0);break;default:typeof Ru.onClick=="function"&&(_u.onclick=sd)}Fd(Pu,Cu)&&($u.effectTag|=4)}$u.ref!==null&&($u.effectTag|=128)}return null;case 6:if(_u&&$u.stateNode!=null)qi$1(_u,$u,_u.memoizedProps,Cu);else{if(typeof Cu!="string"&&$u.stateNode===null)throw Error(u$b(166));Tu=ch(bh.current),ch($g.current),Wh($u)?(Tu=$u.stateNode,Cu=$u.memoizedProps,Tu[Md]=$u,Tu.nodeValue!==Cu&&($u.effectTag|=4)):(Tu=(Tu.nodeType===9?Tu:Tu.ownerDocument).createTextNode(Cu),Tu[Md]=$u,$u.stateNode=Tu)}return null;case 13:return H$7(M$b),Cu=$u.memoizedState,($u.effectTag&64)!==0?($u.expirationTime=Tu,$u):(Tu=Cu!==null,Cu=!1,_u===null?$u.memoizedProps.fallback!==void 0&&Wh($u):(Pu=_u.memoizedState,Cu=Pu!==null,Tu||Pu===null||(Pu=_u.child.sibling,Pu!==null&&(Bu=$u.firstEffect,Bu!==null?($u.firstEffect=Pu,Pu.nextEffect=Bu):($u.firstEffect=$u.lastEffect=Pu,Pu.nextEffect=null),Pu.effectTag=8))),Tu&&!Cu&&($u.mode&2)!==0&&(_u===null&&$u.memoizedProps.unstable_avoidThisFallback!==!0||(M$b.current&1)!==0?S$8===ti$1&&(S$8=ui$1):((S$8===ti$1||S$8===ui$1)&&(S$8=vi$1),wi$1!==0&&T$6!==null&&(xi$1(T$6,U$9),yi$1(T$6,wi$1)))),(Tu||Cu)&&($u.effectTag|=4),null);case 4:return eh(),oi$1($u),null;case 10:return og($u),null;case 17:return L$b($u.type)&&Df(),null;case 19:if(H$7(M$b),Cu=$u.memoizedState,Cu===null)return null;if(Pu=($u.effectTag&64)!==0,Bu=Cu.rendering,Bu===null){if(Pu)ri$1(Cu,!1);else if(S$8!==ti$1||_u!==null&&(_u.effectTag&64)!==0)for(Bu=$u.child;Bu!==null;){if(_u=hh(Bu),_u!==null){for($u.effectTag|=64,ri$1(Cu,!1),Pu=_u.updateQueue,Pu!==null&&($u.updateQueue=Pu,$u.effectTag|=4),Cu.lastEffect===null&&($u.firstEffect=null),$u.lastEffect=Cu.lastEffect,Cu=$u.child;Cu!==null;)Pu=Cu,Bu=Tu,Pu.effectTag&=2,Pu.nextEffect=null,Pu.firstEffect=null,Pu.lastEffect=null,_u=Pu.alternate,_u===null?(Pu.childExpirationTime=0,Pu.expirationTime=Bu,Pu.child=null,Pu.memoizedProps=null,Pu.memoizedState=null,Pu.updateQueue=null,Pu.dependencies=null):(Pu.childExpirationTime=_u.childExpirationTime,Pu.expirationTime=_u.expirationTime,Pu.child=_u.child,Pu.memoizedProps=_u.memoizedProps,Pu.memoizedState=_u.memoizedState,Pu.updateQueue=_u.updateQueue,Bu=_u.dependencies,Pu.dependencies=Bu===null?null:{expirationTime:Bu.expirationTime,firstContext:Bu.firstContext,responders:Bu.responders}),Cu=Cu.sibling;return I$a(M$b,M$b.current&1|2),$u.child}Bu=Bu.sibling}}else{if(!Pu)if(_u=hh(Bu),_u!==null){if($u.effectTag|=64,Pu=!0,Tu=_u.updateQueue,Tu!==null&&($u.updateQueue=Tu,$u.effectTag|=4),ri$1(Cu,!0),Cu.tail===null&&Cu.tailMode==="hidden"&&!Bu.alternate)return $u=$u.lastEffect=Cu.lastEffect,$u!==null&&($u.nextEffect=null),null}else 2*$f()-Cu.renderingStartTime>Cu.tailExpiration&&1<Tu&&($u.effectTag|=64,Pu=!0,ri$1(Cu,!1),$u.expirationTime=$u.childExpirationTime=Tu-1);Cu.isBackwards?(Bu.sibling=$u.child,$u.child=Bu):(Tu=Cu.last,Tu!==null?Tu.sibling=Bu:$u.child=Bu,Cu.last=Bu)}return Cu.tail!==null?(Cu.tailExpiration===0&&(Cu.tailExpiration=$f()+500),Tu=Cu.tail,Cu.rendering=Tu,Cu.tail=Tu.sibling,Cu.lastEffect=$u.lastEffect,Cu.renderingStartTime=$f(),Tu.sibling=null,$u=M$b.current,I$a(M$b,Pu?$u&1|2:$u&1),Tu):null}throw Error(u$b(156,$u.tag))}function zi$1(_u){switch(_u.tag){case 1:L$b(_u.type)&&Df();var $u=_u.effectTag;return $u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 3:if(eh(),H$7(K$9),H$7(J$8),$u=_u.effectTag,($u&64)!==0)throw Error(u$b(285));return _u.effectTag=$u&-4097|64,_u;case 5:return gh(_u),null;case 13:return H$7(M$b),$u=_u.effectTag,$u&4096?(_u.effectTag=$u&-4097|64,_u):null;case 19:return H$7(M$b),null;case 4:return eh(),null;case 10:return og(_u),null;default:return null}}function Ai$1(_u,$u){return{value:_u,source:$u,stack:qb($u)}}var Bi$1=typeof WeakSet=="function"?WeakSet:Set;function Ci$1(_u,$u){var Tu=$u.source,Cu=$u.stack;Cu===null&&Tu!==null&&(Cu=qb(Tu)),Tu!==null&&pb(Tu.type),$u=$u.value,_u!==null&&_u.tag===1&&pb(_u.type);try{console.error($u)}catch(Pu){setTimeout(function(){throw Pu})}}function Di$1(_u,$u){try{$u.props=_u.memoizedProps,$u.state=_u.memoizedState,$u.componentWillUnmount()}catch(Tu){Ei$1(_u,Tu)}}function Fi$1(_u){var $u=_u.ref;if($u!==null)if(typeof $u=="function")try{$u(null)}catch(Tu){Ei$1(_u,Tu)}else $u.current=null}function Gi$1(_u,$u){switch($u.tag){case 0:case 11:case 15:case 22:return;case 1:if($u.effectTag&256&&_u!==null){var Tu=_u.memoizedProps,Cu=_u.memoizedState;_u=$u.stateNode,$u=_u.getSnapshotBeforeUpdate($u.elementType===$u.type?Tu:ig($u.type,Tu),Cu),_u.__reactInternalSnapshotBeforeUpdate=$u}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$b(163))}function Hi$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Tu=$u=$u.next;do{if((Tu.tag&_u)===_u){var Cu=Tu.destroy;Tu.destroy=void 0,Cu!==void 0&&Cu()}Tu=Tu.next}while(Tu!==$u)}}function Ii$1(_u,$u){if($u=$u.updateQueue,$u=$u!==null?$u.lastEffect:null,$u!==null){var Tu=$u=$u.next;do{if((Tu.tag&_u)===_u){var Cu=Tu.create;Tu.destroy=Cu()}Tu=Tu.next}while(Tu!==$u)}}function Ji$1(_u,$u,Tu){switch(Tu.tag){case 0:case 11:case 15:case 22:Ii$1(3,Tu);return;case 1:if(_u=Tu.stateNode,Tu.effectTag&4)if($u===null)_u.componentDidMount();else{var Cu=Tu.elementType===Tu.type?$u.memoizedProps:ig(Tu.type,$u.memoizedProps);_u.componentDidUpdate(Cu,$u.memoizedState,_u.__reactInternalSnapshotBeforeUpdate)}$u=Tu.updateQueue,$u!==null&&Cg(Tu,$u,_u);return;case 3:if($u=Tu.updateQueue,$u!==null){if(_u=null,Tu.child!==null)switch(Tu.child.tag){case 5:_u=Tu.child.stateNode;break;case 1:_u=Tu.child.stateNode}Cg(Tu,$u,_u)}return;case 5:_u=Tu.stateNode,$u===null&&Tu.effectTag&4&&Fd(Tu.type,Tu.memoizedProps)&&_u.focus();return;case 6:return;case 4:return;case 12:return;case 13:Tu.memoizedState===null&&(Tu=Tu.alternate,Tu!==null&&(Tu=Tu.memoizedState,Tu!==null&&(Tu=Tu.dehydrated,Tu!==null&&Vc(Tu))));return;case 19:case 17:case 20:case 21:return}throw Error(u$b(163))}function Ki$1(_u,$u,Tu){switch(typeof Li$1=="function"&&Li$1($u),$u.tag){case 0:case 11:case 14:case 15:case 22:if(_u=$u.updateQueue,_u!==null&&(_u=_u.lastEffect,_u!==null)){var Cu=_u.next;cg(97<Tu?97:Tu,function(){var Pu=Cu;do{var Bu=Pu.destroy;if(Bu!==void 0){var Lu=$u;try{Bu()}catch(Ru){Ei$1(Lu,Ru)}}Pu=Pu.next}while(Pu!==Cu)})}break;case 1:Fi$1($u),Tu=$u.stateNode,typeof Tu.componentWillUnmount=="function"&&Di$1($u,Tu);break;case 5:Fi$1($u);break;case 4:Mi$1(_u,$u,Tu)}}function Ni$1(_u){var $u=_u.alternate;_u.return=null,_u.child=null,_u.memoizedState=null,_u.updateQueue=null,_u.dependencies=null,_u.alternate=null,_u.firstEffect=null,_u.lastEffect=null,_u.pendingProps=null,_u.memoizedProps=null,_u.stateNode=null,$u!==null&&Ni$1($u)}function Oi$1(_u){return _u.tag===5||_u.tag===3||_u.tag===4}function Pi$1(_u){e:{for(var $u=_u.return;$u!==null;){if(Oi$1($u)){var Tu=$u;break e}$u=$u.return}throw Error(u$b(160))}switch($u=Tu.stateNode,Tu.tag){case 5:var Cu=!1;break;case 3:$u=$u.containerInfo,Cu=!0;break;case 4:$u=$u.containerInfo,Cu=!0;break;default:throw Error(u$b(161))}Tu.effectTag&16&&(Rb($u,""),Tu.effectTag&=-17);e:t:for(Tu=_u;;){for(;Tu.sibling===null;){if(Tu.return===null||Oi$1(Tu.return)){Tu=null;break e}Tu=Tu.return}for(Tu.sibling.return=Tu.return,Tu=Tu.sibling;Tu.tag!==5&&Tu.tag!==6&&Tu.tag!==18;){if(Tu.effectTag&2||Tu.child===null||Tu.tag===4)continue t;Tu.child.return=Tu,Tu=Tu.child}if(!(Tu.effectTag&2)){Tu=Tu.stateNode;break e}}Cu?Qi$1(_u,Tu,$u):Ri$1(_u,Tu,$u)}function Qi$1(_u,$u,Tu){var Cu=_u.tag,Pu=Cu===5||Cu===6;if(Pu)_u=Pu?_u.stateNode:_u.stateNode.instance,$u?Tu.nodeType===8?Tu.parentNode.insertBefore(_u,$u):Tu.insertBefore(_u,$u):(Tu.nodeType===8?($u=Tu.parentNode,$u.insertBefore(_u,Tu)):($u=Tu,$u.appendChild(_u)),Tu=Tu._reactRootContainer,Tu!=null||$u.onclick!==null||($u.onclick=sd));else if(Cu!==4&&(_u=_u.child,_u!==null))for(Qi$1(_u,$u,Tu),_u=_u.sibling;_u!==null;)Qi$1(_u,$u,Tu),_u=_u.sibling}function Ri$1(_u,$u,Tu){var Cu=_u.tag,Pu=Cu===5||Cu===6;if(Pu)_u=Pu?_u.stateNode:_u.stateNode.instance,$u?Tu.insertBefore(_u,$u):Tu.appendChild(_u);else if(Cu!==4&&(_u=_u.child,_u!==null))for(Ri$1(_u,$u,Tu),_u=_u.sibling;_u!==null;)Ri$1(_u,$u,Tu),_u=_u.sibling}function Mi$1(_u,$u,Tu){for(var Cu=$u,Pu=!1,Bu,Lu;;){if(!Pu){Pu=Cu.return;e:for(;;){if(Pu===null)throw Error(u$b(160));switch(Bu=Pu.stateNode,Pu.tag){case 5:Lu=!1;break e;case 3:Bu=Bu.containerInfo,Lu=!0;break e;case 4:Bu=Bu.containerInfo,Lu=!0;break e}Pu=Pu.return}Pu=!0}if(Cu.tag===5||Cu.tag===6){e:for(var Ru=_u,Ou=Cu,Du=Tu,Fu=Ou;;)if(Ki$1(Ru,Fu,Du),Fu.child!==null&&Fu.tag!==4)Fu.child.return=Fu,Fu=Fu.child;else{if(Fu===Ou)break e;for(;Fu.sibling===null;){if(Fu.return===null||Fu.return===Ou)break e;Fu=Fu.return}Fu.sibling.return=Fu.return,Fu=Fu.sibling}Lu?(Ru=Bu,Ou=Cu.stateNode,Ru.nodeType===8?Ru.parentNode.removeChild(Ou):Ru.removeChild(Ou)):Bu.removeChild(Cu.stateNode)}else if(Cu.tag===4){if(Cu.child!==null){Bu=Cu.stateNode.containerInfo,Lu=!0,Cu.child.return=Cu,Cu=Cu.child;continue}}else if(Ki$1(_u,Cu,Tu),Cu.child!==null){Cu.child.return=Cu,Cu=Cu.child;continue}if(Cu===$u)break;for(;Cu.sibling===null;){if(Cu.return===null||Cu.return===$u)return;Cu=Cu.return,Cu.tag===4&&(Pu=!1)}Cu.sibling.return=Cu.return,Cu=Cu.sibling}}function Si$1(_u,$u){switch($u.tag){case 0:case 11:case 14:case 15:case 22:Hi$1(3,$u);return;case 1:return;case 5:var Tu=$u.stateNode;if(Tu!=null){var Cu=$u.memoizedProps,Pu=_u!==null?_u.memoizedProps:Cu;_u=$u.type;var Bu=$u.updateQueue;if($u.updateQueue=null,Bu!==null){for(Tu[Nd]=Cu,_u==="input"&&Cu.type==="radio"&&Cu.name!=null&&Bb(Tu,Cu),pd(_u,Pu),$u=pd(_u,Cu),Pu=0;Pu<Bu.length;Pu+=2){var Lu=Bu[Pu],Ru=Bu[Pu+1];Lu==="style"?md(Tu,Ru):Lu==="dangerouslySetInnerHTML"?Qb(Tu,Ru):Lu==="children"?Rb(Tu,Ru):Xa$1(Tu,Lu,Ru,$u)}switch(_u){case"input":Cb(Tu,Cu);break;case"textarea":Kb(Tu,Cu);break;case"select":$u=Tu._wrapperState.wasMultiple,Tu._wrapperState.wasMultiple=!!Cu.multiple,_u=Cu.value,_u!=null?Hb(Tu,!!Cu.multiple,_u,!1):$u!==!!Cu.multiple&&(Cu.defaultValue!=null?Hb(Tu,!!Cu.multiple,Cu.defaultValue,!0):Hb(Tu,!!Cu.multiple,Cu.multiple?[]:"",!1))}}}return;case 6:if($u.stateNode===null)throw Error(u$b(162));$u.stateNode.nodeValue=$u.memoizedProps;return;case 3:$u=$u.stateNode,$u.hydrate&&($u.hydrate=!1,Vc($u.containerInfo));return;case 12:return;case 13:if(Tu=$u,$u.memoizedState===null?Cu=!1:(Cu=!0,Tu=$u.child,Ti$1=$f()),Tu!==null)e:for(_u=Tu;;){if(_u.tag===5)Bu=_u.stateNode,Cu?(Bu=Bu.style,typeof Bu.setProperty=="function"?Bu.setProperty("display","none","important"):Bu.display="none"):(Bu=_u.stateNode,Pu=_u.memoizedProps.style,Pu=Pu!=null&&Pu.hasOwnProperty("display")?Pu.display:null,Bu.style.display=ld("display",Pu));else if(_u.tag===6)_u.stateNode.nodeValue=Cu?"":_u.memoizedProps;else if(_u.tag===13&&_u.memoizedState!==null&&_u.memoizedState.dehydrated===null){Bu=_u.child.sibling,Bu.return=_u,_u=Bu;continue}else if(_u.child!==null){_u.child.return=_u,_u=_u.child;continue}if(_u===Tu)break;for(;_u.sibling===null;){if(_u.return===null||_u.return===Tu)break e;_u=_u.return}_u.sibling.return=_u.return,_u=_u.sibling}Ui$1($u);return;case 19:Ui$1($u);return;case 17:return}throw Error(u$b(163))}function Ui$1(_u){var $u=_u.updateQueue;if($u!==null){_u.updateQueue=null;var Tu=_u.stateNode;Tu===null&&(Tu=_u.stateNode=new Bi$1),$u.forEach(function(Cu){var Pu=Vi$1.bind(null,_u,Cu);Tu.has(Cu)||(Tu.add(Cu),Cu.then(Pu,Pu))})}}var Wi$1=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(_u,$u,Tu){Tu=wg(Tu,null),Tu.tag=3,Tu.payload={element:null};var Cu=$u.value;return Tu.callback=function(){Yi$1||(Yi$1=!0,Zi$1=Cu),Ci$1(_u,$u)},Tu}function $i$1(_u,$u,Tu){Tu=wg(Tu,null),Tu.tag=3;var Cu=_u.type.getDerivedStateFromError;if(typeof Cu=="function"){var Pu=$u.value;Tu.payload=function(){return Ci$1(_u,$u),Cu(Pu)}}var Bu=_u.stateNode;return Bu!==null&&typeof Bu.componentDidCatch=="function"&&(Tu.callback=function(){typeof Cu!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$1(_u,$u));var Lu=$u.stack;this.componentDidCatch($u.value,{componentStack:Lu!==null?Lu:""})}),Tu}var bj=Math.ceil,cj=Wa$1.ReactCurrentDispatcher,dj=Wa$1.ReactCurrentOwner,V$a=0,ej=8,fj=16,gj=32,ti$1=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$7=V$a,T$6=null,X$6=null,U$9=0,S$8=ti$1,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$1=0,oj=!1,Ti$1=0,pj=500,Y$5=null,Yi$1=!1,Zi$1=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$7&(fj|gj))!==V$a?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(_u,$u,Tu){if($u=$u.mode,($u&2)===0)return 1073741823;var Cu=ag();if(($u&4)===0)return Cu===99?1073741823:1073741822;if((W$7&fj)!==V$a)return U$9;if(Tu!==null)_u=hg(_u,Tu.timeoutMs|0||5e3,250);else switch(Cu){case 99:_u=1073741823;break;case 98:_u=hg(_u,150,100);break;case 97:case 96:_u=hg(_u,5e3,250);break;case 95:_u=2;break;default:throw Error(u$b(326))}return T$6!==null&&_u===U$9&&--_u,_u}function Ig(_u,$u){if(50<uj)throw uj=0,vj=null,Error(u$b(185));if(_u=xj(_u,$u),_u!==null){var Tu=ag();$u===1073741823?(W$7&ej)!==V$a&&(W$7&(fj|gj))===V$a?yj(_u):(Z$4(_u),W$7===V$a&&gg()):Z$4(_u),(W$7&4)===V$a||Tu!==98&&Tu!==99||(tj===null?tj=new Map([[_u,$u]]):(Tu=tj.get(_u),(Tu===void 0||Tu>$u)&&tj.set(_u,$u)))}}function xj(_u,$u){_u.expirationTime<$u&&(_u.expirationTime=$u);var Tu=_u.alternate;Tu!==null&&Tu.expirationTime<$u&&(Tu.expirationTime=$u);var Cu=_u.return,Pu=null;if(Cu===null&&_u.tag===3)Pu=_u.stateNode;else for(;Cu!==null;){if(Tu=Cu.alternate,Cu.childExpirationTime<$u&&(Cu.childExpirationTime=$u),Tu!==null&&Tu.childExpirationTime<$u&&(Tu.childExpirationTime=$u),Cu.return===null&&Cu.tag===3){Pu=Cu.stateNode;break}Cu=Cu.return}return Pu!==null&&(T$6===Pu&&(Bg($u),S$8===vi$1&&xi$1(Pu,U$9)),yi$1(Pu,$u)),Pu}function zj(_u){var $u=_u.lastExpiredTime;if($u!==0||($u=_u.firstPendingTime,!Aj(_u,$u)))return $u;var Tu=_u.lastPingedTime;return _u=_u.nextKnownPendingLevel,_u=Tu>_u?Tu:_u,2>=_u&&$u!==_u?0:_u}function Z$4(_u){if(_u.lastExpiredTime!==0)_u.callbackExpirationTime=1073741823,_u.callbackPriority=99,_u.callbackNode=eg(yj.bind(null,_u));else{var $u=zj(_u),Tu=_u.callbackNode;if($u===0)Tu!==null&&(_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90);else{var Cu=Gg();if($u===1073741823?Cu=99:$u===1||$u===2?Cu=95:(Cu=10*(1073741821-$u)-10*(1073741821-Cu),Cu=0>=Cu?99:250>=Cu?98:5250>=Cu?97:95),Tu!==null){var Pu=_u.callbackPriority;if(_u.callbackExpirationTime===$u&&Pu>=Cu)return;Tu!==Tf&&Kf(Tu)}_u.callbackExpirationTime=$u,_u.callbackPriority=Cu,$u=$u===1073741823?eg(yj.bind(null,_u)):dg(Cu,Bj.bind(null,_u),{timeout:10*(1073741821-$u)-$f()}),_u.callbackNode=$u}}}function Bj(_u,$u){if(wj=0,$u)return $u=Gg(),Cj(_u,$u),Z$4(_u),null;var Tu=zj(_u);if(Tu!==0){if($u=_u.callbackNode,(W$7&(fj|gj))!==V$a)throw Error(u$b(327));if(Dj(),_u===T$6&&Tu===U$9||Ej(_u,Tu),X$6!==null){var Cu=W$7;W$7|=fj;var Pu=Fj();do try{Gj();break}catch(Ru){Hj(_u,Ru)}while(1);if(ng(),W$7=Cu,cj.current=Pu,S$8===hj)throw $u=kj,Ej(_u,Tu),xi$1(_u,Tu),Z$4(_u),$u;if(X$6===null)switch(Pu=_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=Tu,Cu=S$8,T$6=null,Cu){case ti$1:case hj:throw Error(u$b(345));case ij:Cj(_u,2<Tu?2:Tu);break;case ui$1:if(xi$1(_u,Tu),Cu=_u.lastSuspendedTime,Tu===Cu&&(_u.nextKnownPendingLevel=Ij(Pu)),lj===1073741823&&(Pu=Ti$1+pj-$f(),10<Pu)){if(oj){var Bu=_u.lastPingedTime;if(Bu===0||Bu>=Tu){_u.lastPingedTime=Tu,Ej(_u,Tu);break}}if(Bu=zj(_u),Bu!==0&&Bu!==Tu)break;if(Cu!==0&&Cu!==Tu){_u.lastPingedTime=Cu;break}_u.timeoutHandle=Hd(Jj.bind(null,_u),Pu);break}Jj(_u);break;case vi$1:if(xi$1(_u,Tu),Cu=_u.lastSuspendedTime,Tu===Cu&&(_u.nextKnownPendingLevel=Ij(Pu)),oj&&(Pu=_u.lastPingedTime,Pu===0||Pu>=Tu)){_u.lastPingedTime=Tu,Ej(_u,Tu);break}if(Pu=zj(_u),Pu!==0&&Pu!==Tu)break;if(Cu!==0&&Cu!==Tu){_u.lastPingedTime=Cu;break}if(mj!==1073741823?Cu=10*(1073741821-mj)-$f():lj===1073741823?Cu=0:(Cu=10*(1073741821-lj)-5e3,Pu=$f(),Tu=10*(1073741821-Tu)-Pu,Cu=Pu-Cu,0>Cu&&(Cu=0),Cu=(120>Cu?120:480>Cu?480:1080>Cu?1080:1920>Cu?1920:3e3>Cu?3e3:4320>Cu?4320:1960*bj(Cu/1960))-Cu,Tu<Cu&&(Cu=Tu)),10<Cu){_u.timeoutHandle=Hd(Jj.bind(null,_u),Cu);break}Jj(_u);break;case jj:if(lj!==1073741823&&nj!==null){Bu=lj;var Lu=nj;if(Cu=Lu.busyMinDurationMs|0,0>=Cu?Cu=0:(Pu=Lu.busyDelayMs|0,Bu=$f()-(10*(1073741821-Bu)-(Lu.timeoutMs|0||5e3)),Cu=Bu<=Pu?0:Pu+Cu-Bu),10<Cu){xi$1(_u,Tu),_u.timeoutHandle=Hd(Jj.bind(null,_u),Cu);break}}Jj(_u);break;default:throw Error(u$b(329))}if(Z$4(_u),_u.callbackNode===$u)return Bj.bind(null,_u)}}return null}function yj(_u){var $u=_u.lastExpiredTime;if($u=$u!==0?$u:1073741823,(W$7&(fj|gj))!==V$a)throw Error(u$b(327));if(Dj(),_u===T$6&&$u===U$9||Ej(_u,$u),X$6!==null){var Tu=W$7;W$7|=fj;var Cu=Fj();do try{Kj();break}catch(Pu){Hj(_u,Pu)}while(1);if(ng(),W$7=Tu,cj.current=Cu,S$8===hj)throw Tu=kj,Ej(_u,$u),xi$1(_u,$u),Z$4(_u),Tu;if(X$6!==null)throw Error(u$b(261));_u.finishedWork=_u.current.alternate,_u.finishedExpirationTime=$u,T$6=null,Jj(_u),Z$4(_u)}return null}function Lj(){if(tj!==null){var _u=tj;tj=null,_u.forEach(function($u,Tu){Cj(Tu,$u),Z$4(Tu)}),gg()}}function Mj(_u,$u){var Tu=W$7;W$7|=1;try{return _u($u)}finally{W$7=Tu,W$7===V$a&&gg()}}function Nj(_u,$u){var Tu=W$7;W$7&=-2,W$7|=ej;try{return _u($u)}finally{W$7=Tu,W$7===V$a&&gg()}}function Ej(_u,$u){_u.finishedWork=null,_u.finishedExpirationTime=0;var Tu=_u.timeoutHandle;if(Tu!==-1&&(_u.timeoutHandle=-1,Id(Tu)),X$6!==null)for(Tu=X$6.return;Tu!==null;){var Cu=Tu;switch(Cu.tag){case 1:Cu=Cu.type.childContextTypes,Cu!=null&&Df();break;case 3:eh(),H$7(K$9),H$7(J$8);break;case 5:gh(Cu);break;case 4:eh();break;case 13:H$7(M$b);break;case 19:H$7(M$b);break;case 10:og(Cu)}Tu=Tu.return}T$6=_u,X$6=Sg(_u.current,null),U$9=$u,S$8=ti$1,kj=null,mj=lj=1073741823,nj=null,wi$1=0,oj=!1}function Hj(_u,$u){do{try{if(ng(),jh.current=sh,mh)for(var Tu=N$7.memoizedState;Tu!==null;){var Cu=Tu.queue;Cu!==null&&(Cu.pending=null),Tu=Tu.next}if(lh=0,P$e=O$c=N$7=null,mh=!1,X$6===null||X$6.return===null)return S$8=hj,kj=$u,X$6=null;e:{var Pu=_u,Bu=X$6.return,Lu=X$6,Ru=$u;if($u=U$9,Lu.effectTag|=2048,Lu.firstEffect=Lu.lastEffect=null,Ru!==null&&typeof Ru=="object"&&typeof Ru.then=="function"){var Ou=Ru;if((Lu.mode&2)===0){var Du=Lu.alternate;Du?(Lu.updateQueue=Du.updateQueue,Lu.memoizedState=Du.memoizedState,Lu.expirationTime=Du.expirationTime):(Lu.updateQueue=null,Lu.memoizedState=null)}var Fu=(M$b.current&1)!==0,Vu=Bu;do{var ku;if(ku=Vu.tag===13){var Nu=Vu.memoizedState;if(Nu!==null)ku=Nu.dehydrated!==null;else{var Gu=Vu.memoizedProps;ku=Gu.fallback===void 0?!1:Gu.unstable_avoidThisFallback!==!0?!0:!Fu}}if(ku){var ju=Vu.updateQueue;if(ju===null){var Hu=new Set;Hu.add(Ou),Vu.updateQueue=Hu}else ju.add(Ou);if((Vu.mode&2)===0){if(Vu.effectTag|=64,Lu.effectTag&=-2981,Lu.tag===1)if(Lu.alternate===null)Lu.tag=17;else{var Uu=wg(1073741823,null);Uu.tag=2,xg(Lu,Uu)}Lu.expirationTime=1073741823;break e}Ru=void 0,Lu=$u;var zu=Pu.pingCache;if(zu===null?(zu=Pu.pingCache=new Wi$1,Ru=new Set,zu.set(Ou,Ru)):(Ru=zu.get(Ou),Ru===void 0&&(Ru=new Set,zu.set(Ou,Ru))),!Ru.has(Lu)){Ru.add(Lu);var Wu=Oj.bind(null,Pu,Ou,Lu);Ou.then(Wu,Wu)}Vu.effectTag|=4096,Vu.expirationTime=$u;break e}Vu=Vu.return}while(Vu!==null);Ru=Error((pb(Lu.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb(Lu))}S$8!==jj&&(S$8=ij),Ru=Ai$1(Ru,Lu),Vu=Bu;do{switch(Vu.tag){case 3:Ou=Ru,Vu.effectTag|=4096,Vu.expirationTime=$u;var Qu=Xi$1(Vu,Ou,$u);yg(Vu,Qu);break e;case 1:Ou=Ru;var Ku=Vu.type,Yu=Vu.stateNode;if((Vu.effectTag&64)===0&&(typeof Ku.getDerivedStateFromError=="function"||Yu!==null&&typeof Yu.componentDidCatch=="function"&&(aj===null||!aj.has(Yu)))){Vu.effectTag|=4096,Vu.expirationTime=$u;var Xc=$i$1(Vu,Ou,$u);yg(Vu,Xc);break e}}Vu=Vu.return}while(Vu!==null)}X$6=Pj(X$6)}catch(_d){$u=_d;continue}break}while(1)}function Fj(){var _u=cj.current;return cj.current=sh,_u===null?sh:_u}function Ag(_u,$u){_u<lj&&2<_u&&(lj=_u),$u!==null&&_u<mj&&2<_u&&(mj=_u,nj=$u)}function Bg(_u){_u>wi$1&&(wi$1=_u)}function Kj(){for(;X$6!==null;)X$6=Qj(X$6)}function Gj(){for(;X$6!==null&&!Uf();)X$6=Qj(X$6)}function Qj(_u){var $u=Rj(_u.alternate,_u,U$9);return _u.memoizedProps=_u.pendingProps,$u===null&&($u=Pj(_u)),dj.current=null,$u}function Pj(_u){X$6=_u;do{var $u=X$6.alternate;if(_u=X$6.return,(X$6.effectTag&2048)===0){if($u=si$1($u,X$6,U$9),U$9===1||X$6.childExpirationTime!==1){for(var Tu=0,Cu=X$6.child;Cu!==null;){var Pu=Cu.expirationTime,Bu=Cu.childExpirationTime;Pu>Tu&&(Tu=Pu),Bu>Tu&&(Tu=Bu),Cu=Cu.sibling}X$6.childExpirationTime=Tu}if($u!==null)return $u;_u!==null&&(_u.effectTag&2048)===0&&(_u.firstEffect===null&&(_u.firstEffect=X$6.firstEffect),X$6.lastEffect!==null&&(_u.lastEffect!==null&&(_u.lastEffect.nextEffect=X$6.firstEffect),_u.lastEffect=X$6.lastEffect),1<X$6.effectTag&&(_u.lastEffect!==null?_u.lastEffect.nextEffect=X$6:_u.firstEffect=X$6,_u.lastEffect=X$6))}else{if($u=zi$1(X$6),$u!==null)return $u.effectTag&=2047,$u;_u!==null&&(_u.firstEffect=_u.lastEffect=null,_u.effectTag|=2048)}if($u=X$6.sibling,$u!==null)return $u;X$6=_u}while(X$6!==null);return S$8===ti$1&&(S$8=jj),null}function Ij(_u){var $u=_u.expirationTime;return _u=_u.childExpirationTime,$u>_u?$u:_u}function Jj(_u){var $u=ag();return cg(99,Sj.bind(null,_u,$u)),null}function Sj(_u,$u){do Dj();while(rj!==null);if((W$7&(fj|gj))!==V$a)throw Error(u$b(327));var Tu=_u.finishedWork,Cu=_u.finishedExpirationTime;if(Tu===null)return null;if(_u.finishedWork=null,_u.finishedExpirationTime=0,Tu===_u.current)throw Error(u$b(177));_u.callbackNode=null,_u.callbackExpirationTime=0,_u.callbackPriority=90,_u.nextKnownPendingLevel=0;var Pu=Ij(Tu);if(_u.firstPendingTime=Pu,Cu<=_u.lastSuspendedTime?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:Cu<=_u.firstSuspendedTime&&(_u.firstSuspendedTime=Cu-1),Cu<=_u.lastPingedTime&&(_u.lastPingedTime=0),Cu<=_u.lastExpiredTime&&(_u.lastExpiredTime=0),_u===T$6&&(X$6=T$6=null,U$9=0),1<Tu.effectTag?Tu.lastEffect!==null?(Tu.lastEffect.nextEffect=Tu,Pu=Tu.firstEffect):Pu=Tu:Pu=Tu.firstEffect,Pu!==null){var Bu=W$7;W$7|=gj,dj.current=null,Dd=fd;var Lu=xd();if(yd(Lu)){if("selectionStart"in Lu)var Ru={start:Lu.selectionStart,end:Lu.selectionEnd};else e:{Ru=(Ru=Lu.ownerDocument)&&Ru.defaultView||window;var Ou=Ru.getSelection&&Ru.getSelection();if(Ou&&Ou.rangeCount!==0){Ru=Ou.anchorNode;var Du=Ou.anchorOffset,Fu=Ou.focusNode;Ou=Ou.focusOffset;try{Ru.nodeType,Fu.nodeType}catch{Ru=null;break e}var Vu=0,ku=-1,Nu=-1,Gu=0,ju=0,Hu=Lu,Uu=null;t:for(;;){for(var zu;Hu!==Ru||Du!==0&&Hu.nodeType!==3||(ku=Vu+Du),Hu!==Fu||Ou!==0&&Hu.nodeType!==3||(Nu=Vu+Ou),Hu.nodeType===3&&(Vu+=Hu.nodeValue.length),(zu=Hu.firstChild)!==null;)Uu=Hu,Hu=zu;for(;;){if(Hu===Lu)break t;if(Uu===Ru&&++Gu===Du&&(ku=Vu),Uu===Fu&&++ju===Ou&&(Nu=Vu),(zu=Hu.nextSibling)!==null)break;Hu=Uu,Uu=Hu.parentNode}Hu=zu}Ru=ku===-1||Nu===-1?null:{start:ku,end:Nu}}else Ru=null}Ru=Ru||{start:0,end:0}}else Ru=null;Ed={activeElementDetached:null,focusedElem:Lu,selectionRange:Ru},fd=!1,Y$5=Pu;do try{Tj()}catch(_f){if(Y$5===null)throw Error(u$b(330));Ei$1(Y$5,_f),Y$5=Y$5.nextEffect}while(Y$5!==null);Y$5=Pu;do try{for(Lu=_u,Ru=$u;Y$5!==null;){var Wu=Y$5.effectTag;if(Wu&16&&Rb(Y$5.stateNode,""),Wu&128){var Qu=Y$5.alternate;if(Qu!==null){var Ku=Qu.ref;Ku!==null&&(typeof Ku=="function"?Ku(null):Ku.current=null)}}switch(Wu&1038){case 2:Pi$1(Y$5),Y$5.effectTag&=-3;break;case 6:Pi$1(Y$5),Y$5.effectTag&=-3,Si$1(Y$5.alternate,Y$5);break;case 1024:Y$5.effectTag&=-1025;break;case 1028:Y$5.effectTag&=-1025,Si$1(Y$5.alternate,Y$5);break;case 4:Si$1(Y$5.alternate,Y$5);break;case 8:Du=Y$5,Mi$1(Lu,Du,Ru),Ni$1(Du)}Y$5=Y$5.nextEffect}}catch(_f){if(Y$5===null)throw Error(u$b(330));Ei$1(Y$5,_f),Y$5=Y$5.nextEffect}while(Y$5!==null);if(Ku=Ed,Qu=xd(),Wu=Ku.focusedElem,Ru=Ku.selectionRange,Qu!==Wu&&Wu&&Wu.ownerDocument&&wd(Wu.ownerDocument.documentElement,Wu)){for(Ru!==null&&yd(Wu)&&(Qu=Ru.start,Ku=Ru.end,Ku===void 0&&(Ku=Qu),"selectionStart"in Wu?(Wu.selectionStart=Qu,Wu.selectionEnd=Math.min(Ku,Wu.value.length)):(Ku=(Qu=Wu.ownerDocument||document)&&Qu.defaultView||window,Ku.getSelection&&(Ku=Ku.getSelection(),Du=Wu.textContent.length,Lu=Math.min(Ru.start,Du),Ru=Ru.end===void 0?Lu:Math.min(Ru.end,Du),!Ku.extend&&Lu>Ru&&(Du=Ru,Ru=Lu,Lu=Du),Du=vd(Wu,Lu),Fu=vd(Wu,Ru),Du&&Fu&&(Ku.rangeCount!==1||Ku.anchorNode!==Du.node||Ku.anchorOffset!==Du.offset||Ku.focusNode!==Fu.node||Ku.focusOffset!==Fu.offset)&&(Qu=Qu.createRange(),Qu.setStart(Du.node,Du.offset),Ku.removeAllRanges(),Lu>Ru?(Ku.addRange(Qu),Ku.extend(Fu.node,Fu.offset)):(Qu.setEnd(Fu.node,Fu.offset),Ku.addRange(Qu)))))),Qu=[],Ku=Wu;Ku=Ku.parentNode;)Ku.nodeType===1&&Qu.push({element:Ku,left:Ku.scrollLeft,top:Ku.scrollTop});for(typeof Wu.focus=="function"&&Wu.focus(),Wu=0;Wu<Qu.length;Wu++)Ku=Qu[Wu],Ku.element.scrollLeft=Ku.left,Ku.element.scrollTop=Ku.top}fd=!!Dd,Ed=Dd=null,_u.current=Tu,Y$5=Pu;do try{for(Wu=_u;Y$5!==null;){var Yu=Y$5.effectTag;if(Yu&36&&Ji$1(Wu,Y$5.alternate,Y$5),Yu&128){Qu=void 0;var Xc=Y$5.ref;if(Xc!==null){var _d=Y$5.stateNode;switch(Y$5.tag){case 5:Qu=_d;break;default:Qu=_d}typeof Xc=="function"?Xc(Qu):Xc.current=Qu}}Y$5=Y$5.nextEffect}}catch(_f){if(Y$5===null)throw Error(u$b(330));Ei$1(Y$5,_f),Y$5=Y$5.nextEffect}while(Y$5!==null);Y$5=null,Vf(),W$7=Bu}else _u.current=Tu;if(qj)qj=!1,rj=_u,sj=$u;else for(Y$5=Pu;Y$5!==null;)$u=Y$5.nextEffect,Y$5.nextEffect=null,Y$5=$u;if($u=_u.firstPendingTime,$u===0&&(aj=null),$u===1073741823?_u===vj?uj++:(uj=0,vj=_u):uj=0,typeof Uj=="function"&&Uj(Tu.stateNode,Cu),Z$4(_u),Yi$1)throw Yi$1=!1,_u=Zi$1,Zi$1=null,_u;return(W$7&ej)!==V$a||gg(),null}function Tj(){for(;Y$5!==null;){var _u=Y$5.effectTag;(_u&256)!==0&&Gi$1(Y$5.alternate,Y$5),(_u&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$5=Y$5.nextEffect}}function Dj(){if(sj!==90){var _u=97<sj?97:sj;return sj=90,cg(_u,Vj)}}function Vj(){if(rj===null)return!1;var _u=rj;if(rj=null,(W$7&(fj|gj))!==V$a)throw Error(u$b(331));var $u=W$7;for(W$7|=gj,_u=_u.current.firstEffect;_u!==null;){try{var Tu=_u;if((Tu.effectTag&512)!==0)switch(Tu.tag){case 0:case 11:case 15:case 22:Hi$1(5,Tu),Ii$1(5,Tu)}}catch(Cu){if(_u===null)throw Error(u$b(330));Ei$1(_u,Cu)}Tu=_u.nextEffect,_u.nextEffect=null,_u=Tu}return W$7=$u,gg(),!0}function Wj(_u,$u,Tu){$u=Ai$1(Tu,$u),$u=Xi$1(_u,$u,1073741823),xg(_u,$u),_u=xj(_u,1073741823),_u!==null&&Z$4(_u)}function Ei$1(_u,$u){if(_u.tag===3)Wj(_u,_u,$u);else for(var Tu=_u.return;Tu!==null;){if(Tu.tag===3){Wj(Tu,_u,$u);break}else if(Tu.tag===1){var Cu=Tu.stateNode;if(typeof Tu.type.getDerivedStateFromError=="function"||typeof Cu.componentDidCatch=="function"&&(aj===null||!aj.has(Cu))){_u=Ai$1($u,_u),_u=$i$1(Tu,_u,1073741823),xg(Tu,_u),Tu=xj(Tu,1073741823),Tu!==null&&Z$4(Tu);break}}Tu=Tu.return}}function Oj(_u,$u,Tu){var Cu=_u.pingCache;Cu!==null&&Cu.delete($u),T$6===_u&&U$9===Tu?S$8===vi$1||S$8===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(_u,U$9):oj=!0:Aj(_u,Tu)&&($u=_u.lastPingedTime,$u!==0&&$u<Tu||(_u.lastPingedTime=Tu,Z$4(_u)))}function Vi$1(_u,$u){var Tu=_u.stateNode;Tu!==null&&Tu.delete($u),$u=0,$u===0&&($u=Gg(),$u=Hg($u,_u,null)),_u=xj(_u,$u),_u!==null&&Z$4(_u)}var Rj;Rj=function(_u,$u,Tu){var Cu=$u.expirationTime;if(_u!==null){var Pu=$u.pendingProps;if(_u.memoizedProps!==Pu||K$9.current)rg=!0;else{if(Cu<Tu){switch(rg=!1,$u.tag){case 3:hi$1($u),Xh();break;case 5:if(fh($u),$u.mode&4&&Tu!==1&&Pu.hidden)return $u.expirationTime=$u.childExpirationTime=1,null;break;case 1:L$b($u.type)&&Gf($u);break;case 4:dh($u,$u.stateNode.containerInfo);break;case 10:Cu=$u.memoizedProps.value,Pu=$u.type._context,I$a(jg,Pu._currentValue),Pu._currentValue=Cu;break;case 13:if($u.memoizedState!==null)return Cu=$u.child.childExpirationTime,Cu!==0&&Cu>=Tu?ji$1(_u,$u,Tu):(I$a(M$b,M$b.current&1),$u=$h(_u,$u,Tu),$u!==null?$u.sibling:null);I$a(M$b,M$b.current&1);break;case 19:if(Cu=$u.childExpirationTime>=Tu,(_u.effectTag&64)!==0){if(Cu)return mi$1(_u,$u,Tu);$u.effectTag|=64}if(Pu=$u.memoizedState,Pu!==null&&(Pu.rendering=null,Pu.tail=null),I$a(M$b,M$b.current),!Cu)return null}return $h(_u,$u,Tu)}rg=!1}}else rg=!1;switch($u.expirationTime=0,$u.tag){case 2:if(Cu=$u.type,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,Pu=Cf($u,J$8.current),qg($u,Tu),Pu=oh(null,$u,Cu,_u,Pu,Tu),$u.effectTag|=1,typeof Pu=="object"&&Pu!==null&&typeof Pu.render=="function"&&Pu.$$typeof===void 0){if($u.tag=1,$u.memoizedState=null,$u.updateQueue=null,L$b(Cu)){var Bu=!0;Gf($u)}else Bu=!1;$u.memoizedState=Pu.state!==null&&Pu.state!==void 0?Pu.state:null,ug($u);var Lu=Cu.getDerivedStateFromProps;typeof Lu=="function"&&Fg($u,Cu,Lu,_u),Pu.updater=Jg,$u.stateNode=Pu,Pu._reactInternalFiber=$u,Ng($u,Cu,_u,Tu),$u=gi$1(null,$u,Cu,!0,Bu,Tu)}else $u.tag=0,R$e(null,$u,Pu,Tu),$u=$u.child;return $u;case 16:e:{if(Pu=$u.elementType,_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),_u=$u.pendingProps,ob(Pu),Pu._status!==1)throw Pu._result;switch(Pu=Pu._result,$u.type=Pu,Bu=$u.tag=Xj(Pu),_u=ig(Pu,_u),Bu){case 0:$u=di$1(null,$u,Pu,_u,Tu);break e;case 1:$u=fi$1(null,$u,Pu,_u,Tu);break e;case 11:$u=Zh(null,$u,Pu,_u,Tu);break e;case 14:$u=ai$1(null,$u,Pu,ig(Pu.type,_u),Cu,Tu);break e}throw Error(u$b(306,Pu,""))}return $u;case 0:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),di$1(_u,$u,Cu,Pu,Tu);case 1:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),fi$1(_u,$u,Cu,Pu,Tu);case 3:if(hi$1($u),Cu=$u.updateQueue,_u===null||Cu===null)throw Error(u$b(282));if(Cu=$u.pendingProps,Pu=$u.memoizedState,Pu=Pu!==null?Pu.element:null,vg(_u,$u),zg($u,Cu,null,Tu),Cu=$u.memoizedState.element,Cu===Pu)Xh(),$u=$h(_u,$u,Tu);else{if((Pu=$u.stateNode.hydrate)&&(Ph=Jd($u.stateNode.containerInfo.firstChild),Oh=$u,Pu=Qh=!0),Pu)for(Tu=Yg($u,null,Cu,Tu),$u.child=Tu;Tu;)Tu.effectTag=Tu.effectTag&-3|1024,Tu=Tu.sibling;else R$e(_u,$u,Cu,Tu),Xh();$u=$u.child}return $u;case 5:return fh($u),_u===null&&Uh($u),Cu=$u.type,Pu=$u.pendingProps,Bu=_u!==null?_u.memoizedProps:null,Lu=Pu.children,Gd(Cu,Pu)?Lu=null:Bu!==null&&Gd(Cu,Bu)&&($u.effectTag|=16),ei$1(_u,$u),$u.mode&4&&Tu!==1&&Pu.hidden?($u.expirationTime=$u.childExpirationTime=1,$u=null):(R$e(_u,$u,Lu,Tu),$u=$u.child),$u;case 6:return _u===null&&Uh($u),null;case 13:return ji$1(_u,$u,Tu);case 4:return dh($u,$u.stateNode.containerInfo),Cu=$u.pendingProps,_u===null?$u.child=Xg($u,null,Cu,Tu):R$e(_u,$u,Cu,Tu),$u.child;case 11:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),Zh(_u,$u,Cu,Pu,Tu);case 7:return R$e(_u,$u,$u.pendingProps,Tu),$u.child;case 8:return R$e(_u,$u,$u.pendingProps.children,Tu),$u.child;case 12:return R$e(_u,$u,$u.pendingProps.children,Tu),$u.child;case 10:e:{Cu=$u.type._context,Pu=$u.pendingProps,Lu=$u.memoizedProps,Bu=Pu.value;var Ru=$u.type._context;if(I$a(jg,Ru._currentValue),Ru._currentValue=Bu,Lu!==null)if(Ru=Lu.value,Bu=$e$2(Ru,Bu)?0:(typeof Cu._calculateChangedBits=="function"?Cu._calculateChangedBits(Ru,Bu):1073741823)|0,Bu===0){if(Lu.children===Pu.children&&!K$9.current){$u=$h(_u,$u,Tu);break e}}else for(Ru=$u.child,Ru!==null&&(Ru.return=$u);Ru!==null;){var Ou=Ru.dependencies;if(Ou!==null){Lu=Ru.child;for(var Du=Ou.firstContext;Du!==null;){if(Du.context===Cu&&(Du.observedBits&Bu)!==0){Ru.tag===1&&(Du=wg(Tu,null),Du.tag=2,xg(Ru,Du)),Ru.expirationTime<Tu&&(Ru.expirationTime=Tu),Du=Ru.alternate,Du!==null&&Du.expirationTime<Tu&&(Du.expirationTime=Tu),pg(Ru.return,Tu),Ou.expirationTime<Tu&&(Ou.expirationTime=Tu);break}Du=Du.next}}else Lu=Ru.tag===10&&Ru.type===$u.type?null:Ru.child;if(Lu!==null)Lu.return=Ru;else for(Lu=Ru;Lu!==null;){if(Lu===$u){Lu=null;break}if(Ru=Lu.sibling,Ru!==null){Ru.return=Lu.return,Lu=Ru;break}Lu=Lu.return}Ru=Lu}R$e(_u,$u,Pu.children,Tu),$u=$u.child}return $u;case 9:return Pu=$u.type,Bu=$u.pendingProps,Cu=Bu.children,qg($u,Tu),Pu=sg(Pu,Bu.unstable_observedBits),Cu=Cu(Pu),$u.effectTag|=1,R$e(_u,$u,Cu,Tu),$u.child;case 14:return Pu=$u.type,Bu=ig(Pu,$u.pendingProps),Bu=ig(Pu.type,Bu),ai$1(_u,$u,Pu,Bu,Cu,Tu);case 15:return ci$1(_u,$u,$u.type,$u.pendingProps,Cu,Tu);case 17:return Cu=$u.type,Pu=$u.pendingProps,Pu=$u.elementType===Cu?Pu:ig(Cu,Pu),_u!==null&&(_u.alternate=null,$u.alternate=null,$u.effectTag|=2),$u.tag=1,L$b(Cu)?(_u=!0,Gf($u)):_u=!1,qg($u,Tu),Lg($u,Cu,Pu),Ng($u,Cu,Pu,Tu),gi$1(null,$u,Cu,!0,_u,Tu);case 19:return mi$1(_u,$u,Tu)}throw Error(u$b(156,$u.tag))};var Uj=null,Li$1=null;function Yj(_u){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($u.isDisabled||!$u.supportsFiber)return!0;try{var Tu=$u.inject(_u);Uj=function(Cu){try{$u.onCommitFiberRoot(Tu,Cu,void 0,(Cu.current.effectTag&64)===64)}catch{}},Li$1=function(Cu){try{$u.onCommitFiberUnmount(Tu,Cu)}catch{}}}catch{}return!0}function Zj(_u,$u,Tu,Cu){this.tag=_u,this.key=Tu,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Cu,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(_u,$u,Tu,Cu){return new Zj(_u,$u,Tu,Cu)}function bi$1(_u){return _u=_u.prototype,!(!_u||!_u.isReactComponent)}function Xj(_u){if(typeof _u=="function")return bi$1(_u)?1:0;if(_u!=null){if(_u=_u.$$typeof,_u===gb)return 11;if(_u===jb)return 14}return 2}function Sg(_u,$u){var Tu=_u.alternate;return Tu===null?(Tu=Sh(_u.tag,$u,_u.key,_u.mode),Tu.elementType=_u.elementType,Tu.type=_u.type,Tu.stateNode=_u.stateNode,Tu.alternate=_u,_u.alternate=Tu):(Tu.pendingProps=$u,Tu.effectTag=0,Tu.nextEffect=null,Tu.firstEffect=null,Tu.lastEffect=null),Tu.childExpirationTime=_u.childExpirationTime,Tu.expirationTime=_u.expirationTime,Tu.child=_u.child,Tu.memoizedProps=_u.memoizedProps,Tu.memoizedState=_u.memoizedState,Tu.updateQueue=_u.updateQueue,$u=_u.dependencies,Tu.dependencies=$u===null?null:{expirationTime:$u.expirationTime,firstContext:$u.firstContext,responders:$u.responders},Tu.sibling=_u.sibling,Tu.index=_u.index,Tu.ref=_u.ref,Tu}function Ug(_u,$u,Tu,Cu,Pu,Bu){var Lu=2;if(Cu=_u,typeof _u=="function")bi$1(_u)&&(Lu=1);else if(typeof _u=="string")Lu=5;else e:switch(_u){case ab:return Wg(Tu.children,Pu,Bu,$u);case fb:Lu=8,Pu|=7;break;case bb:Lu=8,Pu|=1;break;case cb:return _u=Sh(12,Tu,$u,Pu|8),_u.elementType=cb,_u.type=cb,_u.expirationTime=Bu,_u;case hb:return _u=Sh(13,Tu,$u,Pu),_u.type=hb,_u.elementType=hb,_u.expirationTime=Bu,_u;case ib:return _u=Sh(19,Tu,$u,Pu),_u.elementType=ib,_u.expirationTime=Bu,_u;default:if(typeof _u=="object"&&_u!==null)switch(_u.$$typeof){case db:Lu=10;break e;case eb:Lu=9;break e;case gb:Lu=11;break e;case jb:Lu=14;break e;case kb:Lu=16,Cu=null;break e;case lb:Lu=22;break e}throw Error(u$b(130,_u==null?_u:typeof _u,""))}return $u=Sh(Lu,Tu,$u,Pu),$u.elementType=_u,$u.type=Cu,$u.expirationTime=Bu,$u}function Wg(_u,$u,Tu,Cu){return _u=Sh(7,_u,Cu,$u),_u.expirationTime=Tu,_u}function Tg(_u,$u,Tu){return _u=Sh(6,_u,null,$u),_u.expirationTime=Tu,_u}function Vg(_u,$u,Tu){return $u=Sh(4,_u.children!==null?_u.children:[],_u.key,$u),$u.expirationTime=Tu,$u.stateNode={containerInfo:_u.containerInfo,pendingChildren:null,implementation:_u.implementation},$u}function ak(_u,$u,Tu){this.tag=$u,this.current=null,this.containerInfo=_u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Tu,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(_u,$u){var Tu=_u.firstSuspendedTime;return _u=_u.lastSuspendedTime,Tu!==0&&Tu>=$u&&_u<=$u}function xi$1(_u,$u){var Tu=_u.firstSuspendedTime,Cu=_u.lastSuspendedTime;Tu<$u&&(_u.firstSuspendedTime=$u),(Cu>$u||Tu===0)&&(_u.lastSuspendedTime=$u),$u<=_u.lastPingedTime&&(_u.lastPingedTime=0),$u<=_u.lastExpiredTime&&(_u.lastExpiredTime=0)}function yi$1(_u,$u){$u>_u.firstPendingTime&&(_u.firstPendingTime=$u);var Tu=_u.firstSuspendedTime;Tu!==0&&($u>=Tu?_u.firstSuspendedTime=_u.lastSuspendedTime=_u.nextKnownPendingLevel=0:$u>=_u.lastSuspendedTime&&(_u.lastSuspendedTime=$u+1),$u>_u.nextKnownPendingLevel&&(_u.nextKnownPendingLevel=$u))}function Cj(_u,$u){var Tu=_u.lastExpiredTime;(Tu===0||Tu>$u)&&(_u.lastExpiredTime=$u)}function bk(_u,$u,Tu,Cu){var Pu=$u.current,Bu=Gg(),Lu=Dg.suspense;Bu=Hg(Bu,Pu,Lu);e:if(Tu){Tu=Tu._reactInternalFiber;t:{if(dc(Tu)!==Tu||Tu.tag!==1)throw Error(u$b(170));var Ru=Tu;do{switch(Ru.tag){case 3:Ru=Ru.stateNode.context;break t;case 1:if(L$b(Ru.type)){Ru=Ru.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Ru=Ru.return}while(Ru!==null);throw Error(u$b(171))}if(Tu.tag===1){var Ou=Tu.type;if(L$b(Ou)){Tu=Ff(Tu,Ou,Ru);break e}}Tu=Ru}else Tu=Af;return $u.context===null?$u.context=Tu:$u.pendingContext=Tu,$u=wg(Bu,Lu),$u.payload={element:_u},Cu=Cu===void 0?null:Cu,Cu!==null&&($u.callback=Cu),xg(Pu,$u),Ig(Pu,Bu),Bu}function ck(_u){if(_u=_u.current,!_u.child)return null;switch(_u.child.tag){case 5:return _u.child.stateNode;default:return _u.child.stateNode}}function dk(_u,$u){_u=_u.memoizedState,_u!==null&&_u.dehydrated!==null&&_u.retryTime<$u&&(_u.retryTime=$u)}function ek(_u,$u){dk(_u,$u),(_u=_u.alternate)&&dk(_u,$u)}function fk(_u,$u,Tu){Tu=Tu!=null&&Tu.hydrate===!0;var Cu=new ak(_u,$u,Tu),Pu=Sh(3,null,null,$u===2?7:$u===1?3:0);Cu.current=Pu,Pu.stateNode=Cu,ug(Pu),_u[Od]=Cu.current,Tu&&$u!==0&&Jc(_u,_u.nodeType===9?_u:_u.ownerDocument),this._internalRoot=Cu}fk.prototype.render=function(_u){bk(_u,this._internalRoot,null,null)};fk.prototype.unmount=function(){var _u=this._internalRoot,$u=_u.containerInfo;bk(null,_u,null,function(){$u[Od]=null})};function gk(_u){return!(!_u||_u.nodeType!==1&&_u.nodeType!==9&&_u.nodeType!==11&&(_u.nodeType!==8||_u.nodeValue!==" react-mount-point-unstable "))}function hk(_u,$u){if($u||($u=_u?_u.nodeType===9?_u.documentElement:_u.firstChild:null,$u=!(!$u||$u.nodeType!==1||!$u.hasAttribute("data-reactroot"))),!$u)for(var Tu;Tu=_u.lastChild;)_u.removeChild(Tu);return new fk(_u,0,$u?{hydrate:!0}:void 0)}function ik(_u,$u,Tu,Cu,Pu){var Bu=Tu._reactRootContainer;if(Bu){var Lu=Bu._internalRoot;if(typeof Pu=="function"){var Ru=Pu;Pu=function(){var Du=ck(Lu);Ru.call(Du)}}bk($u,Lu,_u,Pu)}else{if(Bu=Tu._reactRootContainer=hk(Tu,Cu),Lu=Bu._internalRoot,typeof Pu=="function"){var Ou=Pu;Pu=function(){var Du=ck(Lu);Ou.call(Du)}}Nj(function(){bk($u,Lu,_u,Pu)})}return ck(Lu)}function jk(_u,$u,Tu){var Cu=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$1,key:Cu==null?null:""+Cu,children:_u,containerInfo:$u,implementation:Tu}}wc=function(_u){if(_u.tag===13){var $u=hg(Gg(),150,100);Ig(_u,$u),ek(_u,$u)}};xc=function(_u){_u.tag===13&&(Ig(_u,3),ek(_u,3))};yc=function(_u){if(_u.tag===13){var $u=Gg();$u=Hg($u,_u,null),Ig(_u,$u),ek(_u,$u)}};za$1=function(_u,$u,Tu){switch($u){case"input":if(Cb(_u,Tu),$u=Tu.name,Tu.type==="radio"&&$u!=null){for(Tu=_u;Tu.parentNode;)Tu=Tu.parentNode;for(Tu=Tu.querySelectorAll("input[name="+JSON.stringify(""+$u)+'][type="radio"]'),$u=0;$u<Tu.length;$u++){var Cu=Tu[$u];if(Cu!==_u&&Cu.form===_u.form){var Pu=Qd(Cu);if(!Pu)throw Error(u$b(90));yb(Cu),Cb(Cu,Pu)}}}break;case"textarea":Kb(_u,Tu);break;case"select":$u=Tu.value,$u!=null&&Hb(_u,!!Tu.multiple,$u,!1)}};Fa$1=Mj;Ga$1=function(_u,$u,Tu,Cu,Pu){var Bu=W$7;W$7|=4;try{return cg(98,_u.bind(null,$u,Tu,Cu,Pu))}finally{W$7=Bu,W$7===V$a&&gg()}};Ha$1=function(){(W$7&(1|fj|gj))===V$a&&(Lj(),Dj())};Ia$1=function(_u,$u){var Tu=W$7;W$7|=2;try{return _u($u)}finally{W$7=Tu,W$7===V$a&&gg()}};function kk(_u,$u){var Tu=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk($u))throw Error(u$b(200));return jk(_u,$u,null,Tu)}var lk={Events:[Nc,Pd,Qd,xa$1,ta$1,Xd,function(_u){jc(_u,Wd)},Da$1,Ea$1,id,mc,Dj,{current:!1}]};(function(_u){var $u=_u.findFiberByHostInstance;return Yj(n$f({},_u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(Tu){return Tu=hc(Tu),Tu===null?null:Tu.stateNode},findFiberByHostInstance:function(Tu){return $u?$u(Tu):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(_u){if(_u==null)return null;if(_u.nodeType===1)return _u;var $u=_u._reactInternalFiber;if($u===void 0)throw typeof _u.render=="function"?Error(u$b(188)):Error(u$b(268,Object.keys(_u)));return _u=hc($u),_u=_u===null?null:_u.stateNode,_u};reactDom_production_min.flushSync=function(_u,$u){if((W$7&(fj|gj))!==V$a)throw Error(u$b(187));var Tu=W$7;W$7|=1;try{return cg(99,_u.bind(null,$u))}finally{W$7=Tu,gg()}};reactDom_production_min.hydrate=function(_u,$u,Tu){if(!gk($u))throw Error(u$b(200));return ik(null,_u,$u,!0,Tu)};reactDom_production_min.render=function(_u,$u,Tu){if(!gk($u))throw Error(u$b(200));return ik(null,_u,$u,!1,Tu)};reactDom_production_min.unmountComponentAtNode=function(_u){if(!gk(_u))throw Error(u$b(40));return _u._reactRootContainer?(Nj(function(){ik(null,null,_u,!1,function(){_u._reactRootContainer=null,_u[Od]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(_u,$u){return kk(_u,$u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_u,$u,Tu,Cu){if(!gk(Tu))throw Error(u$b(200));if(_u==null||_u._reactInternalFiber===void 0)throw Error(u$b(38));return ik(_u,$u,Tu,!1,Cu)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_u){console.error(_u)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(_u){return typeof _u=="number"&&isFinite(_u)&&Math.floor(_u)===_u});Math.sign===void 0&&(Math.sign=function(_u){return _u<0?-1:_u>0?1:+_u});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(_u){if(_u==null)throw new TypeError("Cannot convert undefined or null to object");const $u=Object(_u);for(let Tu=1;Tu<arguments.length;Tu++){const Cu=arguments[Tu];if(Cu!=null)for(const Pu in Cu)Object.prototype.hasOwnProperty.call(Cu,Pu)&&($u[Pu]=Cu[Pu])}return $u});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(_u,$u){this._listeners===void 0&&(this._listeners={});var Tu=this._listeners;Tu[_u]===void 0&&(Tu[_u]=[]),Tu[_u].indexOf($u)===-1&&Tu[_u].push($u)},hasEventListener:function(_u,$u){if(this._listeners===void 0)return!1;var Tu=this._listeners;return Tu[_u]!==void 0&&Tu[_u].indexOf($u)!==-1},removeEventListener:function(_u,$u){if(this._listeners!==void 0){var Tu=this._listeners,Cu=Tu[_u];if(Cu!==void 0){var Pu=Cu.indexOf($u);Pu!==-1&&Cu.splice(Pu,1)}}},dispatchEvent:function(_u){if(this._listeners!==void 0){var $u=this._listeners,Tu=$u[_u.type];if(Tu!==void 0){_u.target=this;for(var Cu=Tu.slice(0),Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Cu[Pu].call(this,_u)}}}});var _lut=[];for(var i$g=0;i$g<256;i$g++)_lut[i$g]=(i$g<16?"0":"")+i$g.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var _u=Math.random()*4294967295|0,$u=Math.random()*4294967295|0,Tu=Math.random()*4294967295|0,Cu=Math.random()*4294967295|0,Pu=_lut[_u&255]+_lut[_u>>8&255]+_lut[_u>>16&255]+_lut[_u>>24&255]+"-"+_lut[$u&255]+_lut[$u>>8&255]+"-"+_lut[$u>>16&15|64]+_lut[$u>>24&255]+"-"+_lut[Tu&63|128]+_lut[Tu>>8&255]+"-"+_lut[Tu>>16&255]+_lut[Tu>>24&255]+_lut[Cu&255]+_lut[Cu>>8&255]+_lut[Cu>>16&255]+_lut[Cu>>24&255];return Pu.toUpperCase()},clamp:function(_u,$u,Tu){return Math.max($u,Math.min(Tu,_u))},euclideanModulo:function(_u,$u){return(_u%$u+$u)%$u},mapLinear:function(_u,$u,Tu,Cu,Pu){return Cu+(_u-$u)*(Pu-Cu)/(Tu-$u)},lerp:function(_u,$u,Tu){return(1-Tu)*_u+Tu*$u},smoothstep:function(_u,$u,Tu){return _u<=$u?0:_u>=Tu?1:(_u=(_u-$u)/(Tu-$u),_u*_u*(3-2*_u))},smootherstep:function(_u,$u,Tu){return _u<=$u?0:_u>=Tu?1:(_u=(_u-$u)/(Tu-$u),_u*_u*_u*(_u*(_u*6-15)+10))},randInt:function(_u,$u){return _u+Math.floor(Math.random()*($u-_u+1))},randFloat:function(_u,$u){return _u+Math.random()*($u-_u)},randFloatSpread:function(_u){return _u*(.5-Math.random())},degToRad:function(_u){return _u*MathUtils.DEG2RAD},radToDeg:function(_u){return _u*MathUtils.RAD2DEG},isPowerOfTwo:function(_u){return(_u&_u-1)===0&&_u!==0},ceilPowerOfTwo:function(_u){return Math.pow(2,Math.ceil(Math.log(_u)/Math.LN2))},floorPowerOfTwo:function(_u){return Math.pow(2,Math.floor(Math.log(_u)/Math.LN2))},setQuaternionFromProperEuler:function(_u,$u,Tu,Cu,Pu){var Bu=Math.cos,Lu=Math.sin,Ru=Bu(Tu/2),Ou=Lu(Tu/2),Du=Bu(($u+Cu)/2),Fu=Lu(($u+Cu)/2),Vu=Bu(($u-Cu)/2),ku=Lu(($u-Cu)/2),Nu=Bu((Cu-$u)/2),Gu=Lu((Cu-$u)/2);switch(Pu){case"XYX":_u.set(Ru*Fu,Ou*Vu,Ou*ku,Ru*Du);break;case"YZY":_u.set(Ou*ku,Ru*Fu,Ou*Vu,Ru*Du);break;case"ZXZ":_u.set(Ou*Vu,Ou*ku,Ru*Fu,Ru*Du);break;case"XZX":_u.set(Ru*Fu,Ou*Gu,Ou*Nu,Ru*Du);break;case"YXY":_u.set(Ou*Nu,Ru*Fu,Ou*Gu,Ru*Du);break;case"ZYZ":_u.set(Ou*Gu,Ou*Nu,Ru*Fu,Ru*Du);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Pu)}}};function Vector2(_u,$u){this.x=_u||0,this.y=$u||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(_u){this.x=_u}},height:{get:function(){return this.y},set:function(_u){this.y=_u}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(_u,$u){return this.x=_u,this.y=$u,this},setScalar:function(_u){return this.x=_u,this.y=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this},multiply:function(_u){return this.x*=_u.x,this.y*=_u.y,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},applyMatrix3:function(_u){var $u=this.x,Tu=this.y,Cu=_u.elements;return this.x=Cu[0]*$u+Cu[3]*Tu+Cu[6],this.y=Cu[1]*$u+Cu[4]*Tu+Cu[7],this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(_u){return this.x*_u.x+this.y*_u.y},cross:function(_u){return this.x*_u.y-this.y*_u.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var _u=Math.atan2(-this.y,-this.x)+Math.PI;return _u},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Tu=this.y-_u.y;return $u*$u+Tu*Tu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this},rotateAround:function(_u,$u){var Tu=Math.cos($u),Cu=Math.sin($u),Pu=this.x-_u.x,Bu=this.y-_u.y;return this.x=Pu*Tu-Bu*Cu+_u.x,this.y=Pu*Cu+Bu*Tu+_u.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){var Du=this.elements;return Du[0]=_u,Du[1]=Cu,Du[2]=Lu,Du[3]=$u,Du[4]=Pu,Du[5]=Ru,Du[6]=Tu,Du[7]=Bu,Du[8]=Ou,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Tu=_u.elements;return $u[0]=Tu[0],$u[1]=Tu[1],$u[2]=Tu[2],$u[3]=Tu[3],$u[4]=Tu[4],$u[5]=Tu[5],$u[6]=Tu[6],$u[7]=Tu[7],$u[8]=Tu[8],this},extractBasis:function(_u,$u,Tu){return _u.setFromMatrix3Column(this,0),$u.setFromMatrix3Column(this,1),Tu.setFromMatrix3Column(this,2),this},setFromMatrix4:function(_u){var $u=_u.elements;return this.set($u[0],$u[4],$u[8],$u[1],$u[5],$u[9],$u[2],$u[6],$u[10]),this},multiply:function(_u){return this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Tu=_u.elements,Cu=$u.elements,Pu=this.elements,Bu=Tu[0],Lu=Tu[3],Ru=Tu[6],Ou=Tu[1],Du=Tu[4],Fu=Tu[7],Vu=Tu[2],ku=Tu[5],Nu=Tu[8],Gu=Cu[0],ju=Cu[3],Hu=Cu[6],Uu=Cu[1],zu=Cu[4],Wu=Cu[7],Qu=Cu[2],Ku=Cu[5],Yu=Cu[8];return Pu[0]=Bu*Gu+Lu*Uu+Ru*Qu,Pu[3]=Bu*ju+Lu*zu+Ru*Ku,Pu[6]=Bu*Hu+Lu*Wu+Ru*Yu,Pu[1]=Ou*Gu+Du*Uu+Fu*Qu,Pu[4]=Ou*ju+Du*zu+Fu*Ku,Pu[7]=Ou*Hu+Du*Wu+Fu*Yu,Pu[2]=Vu*Gu+ku*Uu+Nu*Qu,Pu[5]=Vu*ju+ku*zu+Nu*Ku,Pu[8]=Vu*Hu+ku*Wu+Nu*Yu,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[3]*=_u,$u[6]*=_u,$u[1]*=_u,$u[4]*=_u,$u[7]*=_u,$u[2]*=_u,$u[5]*=_u,$u[8]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3],Bu=_u[4],Lu=_u[5],Ru=_u[6],Ou=_u[7],Du=_u[8];return $u*Bu*Du-$u*Lu*Ou-Tu*Pu*Du+Tu*Lu*Ru+Cu*Pu*Ou-Cu*Bu*Ru},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Tu=_u.elements,Cu=this.elements,Pu=Tu[0],Bu=Tu[1],Lu=Tu[2],Ru=Tu[3],Ou=Tu[4],Du=Tu[5],Fu=Tu[6],Vu=Tu[7],ku=Tu[8],Nu=ku*Ou-Du*Vu,Gu=Du*Fu-ku*Ru,ju=Vu*Ru-Ou*Fu,Hu=Pu*Nu+Bu*Gu+Lu*ju;if(Hu===0)return this.set(0,0,0,0,0,0,0,0,0);var Uu=1/Hu;return Cu[0]=Nu*Uu,Cu[1]=(Lu*Vu-ku*Bu)*Uu,Cu[2]=(Du*Bu-Lu*Ou)*Uu,Cu[3]=Gu*Uu,Cu[4]=(ku*Pu-Lu*Fu)*Uu,Cu[5]=(Lu*Ru-Du*Pu)*Uu,Cu[6]=ju*Uu,Cu[7]=(Bu*Fu-Vu*Pu)*Uu,Cu[8]=(Ou*Pu-Bu*Ru)*Uu,this},transpose:function(){var _u,$u=this.elements;return _u=$u[1],$u[1]=$u[3],$u[3]=_u,_u=$u[2],$u[2]=$u[6],$u[6]=_u,_u=$u[5],$u[5]=$u[7],$u[7]=_u,this},getNormalMatrix:function(_u){return this.setFromMatrix4(_u).getInverse(this).transpose()},transposeIntoArray:function(_u){var $u=this.elements;return _u[0]=$u[0],_u[1]=$u[3],_u[2]=$u[6],_u[3]=$u[1],_u[4]=$u[4],_u[5]=$u[7],_u[6]=$u[2],_u[7]=$u[5],_u[8]=$u[8],this},setUvTransform:function(_u,$u,Tu,Cu,Pu,Bu,Lu){var Ru=Math.cos(Pu),Ou=Math.sin(Pu);this.set(Tu*Ru,Tu*Ou,-Tu*(Ru*Bu+Ou*Lu)+Bu+_u,-Cu*Ou,Cu*Ru,-Cu*(-Ou*Bu+Ru*Lu)+Lu+$u,0,0,1)},scale:function(_u,$u){var Tu=this.elements;return Tu[0]*=_u,Tu[3]*=_u,Tu[6]*=_u,Tu[1]*=$u,Tu[4]*=$u,Tu[7]*=$u,this},rotate:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u),Cu=this.elements,Pu=Cu[0],Bu=Cu[3],Lu=Cu[6],Ru=Cu[1],Ou=Cu[4],Du=Cu[7];return Cu[0]=$u*Pu+Tu*Ru,Cu[3]=$u*Bu+Tu*Ou,Cu[6]=$u*Lu+Tu*Du,Cu[1]=-Tu*Pu+$u*Ru,Cu[4]=-Tu*Bu+$u*Ou,Cu[7]=-Tu*Lu+$u*Du,this},translate:function(_u,$u){var Tu=this.elements;return Tu[0]+=_u*Tu[2],Tu[3]+=_u*Tu[5],Tu[6]+=_u*Tu[8],Tu[1]+=$u*Tu[2],Tu[4]+=$u*Tu[5],Tu[7]+=$u*Tu[8],this},equals:function(_u){for(var $u=this.elements,Tu=_u.elements,Cu=0;Cu<9;Cu++)if($u[Cu]!==Tu[Cu])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=0;Tu<9;Tu++)this.elements[Tu]=_u[Tu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Tu=this.elements;return _u[$u]=Tu[0],_u[$u+1]=Tu[1],_u[$u+2]=Tu[2],_u[$u+3]=Tu[3],_u[$u+4]=Tu[4],_u[$u+5]=Tu[5],_u[$u+6]=Tu[6],_u[$u+7]=Tu[7],_u[$u+8]=Tu[8],_u}});var _canvas,ImageUtils={getDataURL:function(_u){var $u;if(typeof HTMLCanvasElement=="undefined")return _u.src;if(_u instanceof HTMLCanvasElement)$u=_u;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=_u.width,_canvas.height=_u.height;var Tu=_canvas.getContext("2d");_u instanceof ImageData?Tu.putImageData(_u,0,0):Tu.drawImage(_u,0,0,_u.width,_u.height),$u=_canvas}return $u.width>2048||$u.height>2048?$u.toDataURL("image/jpeg",.6):$u.toDataURL("image/png")}},textureId=0;function Texture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=_u!==void 0?_u:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=$u!==void 0?$u:Texture.DEFAULT_MAPPING,this.wrapS=Tu!==void 0?Tu:ClampToEdgeWrapping,this.wrapT=Cu!==void 0?Cu:ClampToEdgeWrapping,this.magFilter=Pu!==void 0?Pu:LinearFilter,this.minFilter=Bu!==void 0?Bu:LinearMipmapLinearFilter,this.anisotropy=Ou!==void 0?Ou:1,this.format=Lu!==void 0?Lu:RGBAFormat,this.internalFormat=null,this.type=Ru!==void 0?Ru:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Du!==void 0?Du:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.name=_u.name,this.image=_u.image,this.mipmaps=_u.mipmaps.slice(0),this.mapping=_u.mapping,this.wrapS=_u.wrapS,this.wrapT=_u.wrapT,this.magFilter=_u.magFilter,this.minFilter=_u.minFilter,this.anisotropy=_u.anisotropy,this.format=_u.format,this.internalFormat=_u.internalFormat,this.type=_u.type,this.offset.copy(_u.offset),this.repeat.copy(_u.repeat),this.center.copy(_u.center),this.rotation=_u.rotation,this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrix.copy(_u.matrix),this.generateMipmaps=_u.generateMipmaps,this.premultiplyAlpha=_u.premultiplyAlpha,this.flipY=_u.flipY,this.unpackAlignment=_u.unpackAlignment,this.encoding=_u.encoding,this},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";if(!$u&&_u.textures[this.uuid]!==void 0)return _u.textures[this.uuid];var Tu={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Cu=this.image;if(Cu.uuid===void 0&&(Cu.uuid=MathUtils.generateUUID()),!$u&&_u.images[Cu.uuid]===void 0){var Pu;if(Array.isArray(Cu)){Pu=[];for(var Bu=0,Lu=Cu.length;Bu<Lu;Bu++)Pu.push(ImageUtils.getDataURL(Cu[Bu]))}else Pu=ImageUtils.getDataURL(Cu);_u.images[Cu.uuid]={uuid:Cu.uuid,url:Pu}}Tu.image=Cu.uuid}return $u||(_u.textures[this.uuid]=Tu),Tu},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(_u){if(this.mapping!==UVMapping)return _u;if(_u.applyMatrix3(this.matrix),_u.x<0||_u.x>1)switch(this.wrapS){case RepeatWrapping:_u.x=_u.x-Math.floor(_u.x);break;case ClampToEdgeWrapping:_u.x=_u.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.x)%2)===1?_u.x=Math.ceil(_u.x)-_u.x:_u.x=_u.x-Math.floor(_u.x);break}if(_u.y<0||_u.y>1)switch(this.wrapT){case RepeatWrapping:_u.y=_u.y-Math.floor(_u.y);break;case ClampToEdgeWrapping:_u.y=_u.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_u.y)%2)===1?_u.y=Math.ceil(_u.y)-_u.y:_u.y=_u.y-Math.floor(_u.y);break}return this.flipY&&(_u.y=1-_u.y),_u}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function Vector4(_u,$u,Tu,Cu){this.x=_u||0,this.y=$u||0,this.z=Tu||0,this.w=Cu!==void 0?Cu:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(_u){this.z=_u}},height:{get:function(){return this.w},set:function(_u){this.w=_u}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(_u,$u,Tu,Cu){return this.x=_u,this.y=$u,this.z=Tu,this.w=Cu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this.w=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setW:function(_u){return this.w=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;case 3:this.w=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this.w=_u.w!==void 0?_u.w:1,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this.w+=_u.w,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this.w+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this.w=_u.w+$u.w,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this.w+=_u.w*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this.w-=_u.w,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this.w-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this.w=_u.w-$u.w,this},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this.w*=_u,this},applyMatrix4:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=this.w,Bu=_u.elements;return this.x=Bu[0]*$u+Bu[4]*Tu+Bu[8]*Cu+Bu[12]*Pu,this.y=Bu[1]*$u+Bu[5]*Tu+Bu[9]*Cu+Bu[13]*Pu,this.z=Bu[2]*$u+Bu[6]*Tu+Bu[10]*Cu+Bu[14]*Pu,this.w=Bu[3]*$u+Bu[7]*Tu+Bu[11]*Cu+Bu[15]*Pu,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},setAxisAngleFromQuaternion:function(_u){this.w=2*Math.acos(_u.w);var $u=Math.sqrt(1-_u.w*_u.w);return $u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_u.x/$u,this.y=_u.y/$u,this.z=_u.z/$u),this},setAxisAngleFromRotationMatrix:function(_u){var $u,Tu,Cu,Pu,Bu=.01,Lu=.1,Ru=_u.elements,Ou=Ru[0],Du=Ru[4],Fu=Ru[8],Vu=Ru[1],ku=Ru[5],Nu=Ru[9],Gu=Ru[2],ju=Ru[6],Hu=Ru[10];if(Math.abs(Du-Vu)<Bu&&Math.abs(Fu-Gu)<Bu&&Math.abs(Nu-ju)<Bu){if(Math.abs(Du+Vu)<Lu&&Math.abs(Fu+Gu)<Lu&&Math.abs(Nu+ju)<Lu&&Math.abs(Ou+ku+Hu-3)<Lu)return this.set(1,0,0,0),this;$u=Math.PI;var Uu=(Ou+1)/2,zu=(ku+1)/2,Wu=(Hu+1)/2,Qu=(Du+Vu)/4,Ku=(Fu+Gu)/4,Yu=(Nu+ju)/4;return Uu>zu&&Uu>Wu?Uu<Bu?(Tu=0,Cu=.707106781,Pu=.707106781):(Tu=Math.sqrt(Uu),Cu=Qu/Tu,Pu=Ku/Tu):zu>Wu?zu<Bu?(Tu=.707106781,Cu=0,Pu=.707106781):(Cu=Math.sqrt(zu),Tu=Qu/Cu,Pu=Yu/Cu):Wu<Bu?(Tu=.707106781,Cu=.707106781,Pu=0):(Pu=Math.sqrt(Wu),Tu=Ku/Pu,Cu=Yu/Pu),this.set(Tu,Cu,Pu,$u),this}var Xc=Math.sqrt((ju-Nu)*(ju-Nu)+(Fu-Gu)*(Fu-Gu)+(Vu-Du)*(Vu-Du));return Math.abs(Xc)<.001&&(Xc=1),this.x=(ju-Nu)/Xc,this.y=(Fu-Gu)/Xc,this.z=(Vu-Du)/Xc,this.w=Math.acos((Ou+ku+Hu-1)/2),this},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this.w=Math.min(this.w,_u.w),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this.w=Math.max(this.w,_u.w),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this.w=Math.max(_u.w,Math.min($u.w,this.w)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this.w=Math.max(_u,Math.min($u,this.w)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z+this.w*_u.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this.w+=(_u.w-this.w)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this.z=_u.z+($u.z-_u.z)*Tu,this.w=_u.w+($u.w-_u.w)*Tu,this},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z&&_u.w===this.w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this.w=_u[$u+3],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u[$u+3]=this.w,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this.w=_u.getW($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(_u,$u,Tu){this.width=_u,this.height=$u,this.scissor=new Vector4(0,0,_u,$u),this.scissorTest=!1,this.viewport=new Vector4(0,0,_u,$u),Tu=Tu||{},this.texture=new Texture(void 0,Tu.mapping,Tu.wrapS,Tu.wrapT,Tu.magFilter,Tu.minFilter,Tu.format,Tu.type,Tu.anisotropy,Tu.encoding),this.texture.image={},this.texture.image.width=_u,this.texture.image.height=$u,this.texture.generateMipmaps=Tu.generateMipmaps!==void 0?Tu.generateMipmaps:!1,this.texture.minFilter=Tu.minFilter!==void 0?Tu.minFilter:LinearFilter,this.depthBuffer=Tu.depthBuffer!==void 0?Tu.depthBuffer:!0,this.stencilBuffer=Tu.stencilBuffer!==void 0?Tu.stencilBuffer:!0,this.depthTexture=Tu.depthTexture!==void 0?Tu.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(_u,$u){(this.width!==_u||this.height!==$u)&&(this.width=_u,this.height=$u,this.texture.image.width=_u,this.texture.image.height=$u,this.dispose()),this.viewport.set(0,0,_u,$u),this.scissor.set(0,0,_u,$u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.width=_u.width,this.height=_u.height,this.viewport.copy(_u.viewport),this.texture=_u.texture.clone(),this.depthBuffer=_u.depthBuffer,this.stencilBuffer=_u.stencilBuffer,this.depthTexture=_u.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(_u,$u,Tu){WebGLRenderTarget.call(this,_u,$u,Tu),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(_u){return WebGLRenderTarget.prototype.copy.call(this,_u),this.samples=_u.samples,this}});function Quaternion(_u,$u,Tu,Cu){this._x=_u||0,this._y=$u||0,this._z=Tu||0,this._w=Cu!==void 0?Cu:1}Object.assign(Quaternion,{slerp:function(_u,$u,Tu,Cu){return Tu.copy(_u).slerp($u,Cu)},slerpFlat:function(_u,$u,Tu,Cu,Pu,Bu,Lu){var Ru=Tu[Cu+0],Ou=Tu[Cu+1],Du=Tu[Cu+2],Fu=Tu[Cu+3],Vu=Pu[Bu+0],ku=Pu[Bu+1],Nu=Pu[Bu+2],Gu=Pu[Bu+3];if(Fu!==Gu||Ru!==Vu||Ou!==ku||Du!==Nu){var ju=1-Lu,Hu=Ru*Vu+Ou*ku+Du*Nu+Fu*Gu,Uu=Hu>=0?1:-1,zu=1-Hu*Hu;if(zu>Number.EPSILON){var Wu=Math.sqrt(zu),Qu=Math.atan2(Wu,Hu*Uu);ju=Math.sin(ju*Qu)/Wu,Lu=Math.sin(Lu*Qu)/Wu}var Ku=Lu*Uu;if(Ru=Ru*ju+Vu*Ku,Ou=Ou*ju+ku*Ku,Du=Du*ju+Nu*Ku,Fu=Fu*ju+Gu*Ku,ju===1-Lu){var Yu=1/Math.sqrt(Ru*Ru+Ou*Ou+Du*Du+Fu*Fu);Ru*=Yu,Ou*=Yu,Du*=Yu,Fu*=Yu}}_u[$u]=Ru,_u[$u+1]=Ou,_u[$u+2]=Du,_u[$u+3]=Fu},multiplyQuaternionsFlat:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=Tu[Cu],Ru=Tu[Cu+1],Ou=Tu[Cu+2],Du=Tu[Cu+3],Fu=Pu[Bu],Vu=Pu[Bu+1],ku=Pu[Bu+2],Nu=Pu[Bu+3];return _u[$u]=Lu*Nu+Du*Fu+Ru*ku-Ou*Vu,_u[$u+1]=Ru*Nu+Du*Vu+Ou*Fu-Lu*ku,_u[$u+2]=Ou*Nu+Du*ku+Lu*Vu-Ru*Fu,_u[$u+3]=Du*Nu-Lu*Fu-Ru*Vu-Ou*ku,_u}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(_u){this._w=_u,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(_u,$u,Tu,Cu){return this._x=_u,this._y=$u,this._z=Tu,this._w=Cu,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(_u){return this._x=_u.x,this._y=_u.y,this._z=_u.z,this._w=_u.w,this._onChangeCallback(),this},setFromEuler:function(_u,$u){if(!(_u&&_u.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Tu=_u._x,Cu=_u._y,Pu=_u._z,Bu=_u.order,Lu=Math.cos,Ru=Math.sin,Ou=Lu(Tu/2),Du=Lu(Cu/2),Fu=Lu(Pu/2),Vu=Ru(Tu/2),ku=Ru(Cu/2),Nu=Ru(Pu/2);switch(Bu){case"XYZ":this._x=Vu*Du*Fu+Ou*ku*Nu,this._y=Ou*ku*Fu-Vu*Du*Nu,this._z=Ou*Du*Nu+Vu*ku*Fu,this._w=Ou*Du*Fu-Vu*ku*Nu;break;case"YXZ":this._x=Vu*Du*Fu+Ou*ku*Nu,this._y=Ou*ku*Fu-Vu*Du*Nu,this._z=Ou*Du*Nu-Vu*ku*Fu,this._w=Ou*Du*Fu+Vu*ku*Nu;break;case"ZXY":this._x=Vu*Du*Fu-Ou*ku*Nu,this._y=Ou*ku*Fu+Vu*Du*Nu,this._z=Ou*Du*Nu+Vu*ku*Fu,this._w=Ou*Du*Fu-Vu*ku*Nu;break;case"ZYX":this._x=Vu*Du*Fu-Ou*ku*Nu,this._y=Ou*ku*Fu+Vu*Du*Nu,this._z=Ou*Du*Nu-Vu*ku*Fu,this._w=Ou*Du*Fu+Vu*ku*Nu;break;case"YZX":this._x=Vu*Du*Fu+Ou*ku*Nu,this._y=Ou*ku*Fu+Vu*Du*Nu,this._z=Ou*Du*Nu-Vu*ku*Fu,this._w=Ou*Du*Fu-Vu*ku*Nu;break;case"XZY":this._x=Vu*Du*Fu-Ou*ku*Nu,this._y=Ou*ku*Fu-Vu*Du*Nu,this._z=Ou*Du*Nu+Vu*ku*Fu,this._w=Ou*Du*Fu+Vu*ku*Nu;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Bu)}return $u!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(_u,$u){var Tu=$u/2,Cu=Math.sin(Tu);return this._x=_u.x*Cu,this._y=_u.y*Cu,this._z=_u.z*Cu,this._w=Math.cos(Tu),this._onChangeCallback(),this},setFromRotationMatrix:function(_u){var $u=_u.elements,Tu=$u[0],Cu=$u[4],Pu=$u[8],Bu=$u[1],Lu=$u[5],Ru=$u[9],Ou=$u[2],Du=$u[6],Fu=$u[10],Vu=Tu+Lu+Fu,ku;return Vu>0?(ku=.5/Math.sqrt(Vu+1),this._w=.25/ku,this._x=(Du-Ru)*ku,this._y=(Pu-Ou)*ku,this._z=(Bu-Cu)*ku):Tu>Lu&&Tu>Fu?(ku=2*Math.sqrt(1+Tu-Lu-Fu),this._w=(Du-Ru)/ku,this._x=.25*ku,this._y=(Cu+Bu)/ku,this._z=(Pu+Ou)/ku):Lu>Fu?(ku=2*Math.sqrt(1+Lu-Tu-Fu),this._w=(Pu-Ou)/ku,this._x=(Cu+Bu)/ku,this._y=.25*ku,this._z=(Ru+Du)/ku):(ku=2*Math.sqrt(1+Fu-Tu-Lu),this._w=(Bu-Cu)/ku,this._x=(Pu+Ou)/ku,this._y=(Ru+Du)/ku,this._z=.25*ku),this._onChangeCallback(),this},setFromUnitVectors:function(_u,$u){var Tu=1e-6,Cu=_u.dot($u)+1;return Cu<Tu?(Cu=0,Math.abs(_u.x)>Math.abs(_u.z)?(this._x=-_u.y,this._y=_u.x,this._z=0,this._w=Cu):(this._x=0,this._y=-_u.z,this._z=_u.y,this._w=Cu)):(this._x=_u.y*$u.z-_u.z*$u.y,this._y=_u.z*$u.x-_u.x*$u.z,this._z=_u.x*$u.y-_u.y*$u.x,this._w=Cu),this.normalize()},angleTo:function(_u){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(_u),-1,1)))},rotateTowards:function(_u,$u){var Tu=this.angleTo(_u);if(Tu===0)return this;var Cu=Math.min(1,$u/Tu);return this.slerp(_u,Cu),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(_u){return this._x*_u._x+this._y*_u._y+this._z*_u._z+this._w*_u._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var _u=this.length();return _u===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_u=1/_u,this._x=this._x*_u,this._y=this._y*_u,this._z=this._z*_u,this._w=this._w*_u),this._onChangeCallback(),this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(_u,$u)):this.multiplyQuaternions(this,_u)},premultiply:function(_u){return this.multiplyQuaternions(_u,this)},multiplyQuaternions:function(_u,$u){var Tu=_u._x,Cu=_u._y,Pu=_u._z,Bu=_u._w,Lu=$u._x,Ru=$u._y,Ou=$u._z,Du=$u._w;return this._x=Tu*Du+Bu*Lu+Cu*Ou-Pu*Ru,this._y=Cu*Du+Bu*Ru+Pu*Lu-Tu*Ou,this._z=Pu*Du+Bu*Ou+Tu*Ru-Cu*Lu,this._w=Bu*Du-Tu*Lu-Cu*Ru-Pu*Ou,this._onChangeCallback(),this},slerp:function(_u,$u){if($u===0)return this;if($u===1)return this.copy(_u);var Tu=this._x,Cu=this._y,Pu=this._z,Bu=this._w,Lu=Bu*_u._w+Tu*_u._x+Cu*_u._y+Pu*_u._z;if(Lu<0?(this._w=-_u._w,this._x=-_u._x,this._y=-_u._y,this._z=-_u._z,Lu=-Lu):this.copy(_u),Lu>=1)return this._w=Bu,this._x=Tu,this._y=Cu,this._z=Pu,this;var Ru=1-Lu*Lu;if(Ru<=Number.EPSILON){var Ou=1-$u;return this._w=Ou*Bu+$u*this._w,this._x=Ou*Tu+$u*this._x,this._y=Ou*Cu+$u*this._y,this._z=Ou*Pu+$u*this._z,this.normalize(),this._onChangeCallback(),this}var Du=Math.sqrt(Ru),Fu=Math.atan2(Du,Lu),Vu=Math.sin((1-$u)*Fu)/Du,ku=Math.sin($u*Fu)/Du;return this._w=Bu*Vu+this._w*ku,this._x=Tu*Vu+this._x*ku,this._y=Cu*Vu+this._y*ku,this._z=Pu*Vu+this._z*ku,this._onChangeCallback(),this},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._w===this._w},fromArray:function(_u,$u){return $u===void 0&&($u=0),this._x=_u[$u],this._y=_u[$u+1],this._z=_u[$u+2],this._w=_u[$u+3],this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._w,_u},fromBufferAttribute:function(_u,$u){return this._x=_u.getX($u),this._y=_u.getY($u),this._z=_u.getZ($u),this._w=_u.getW($u),this},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(_u,$u,Tu){this.x=_u||0,this.y=$u||0,this.z=Tu||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(_u,$u,Tu){return this.x=_u,this.y=$u,this.z=Tu,this},setScalar:function(_u){return this.x=_u,this.y=_u,this.z=_u,this},setX:function(_u){return this.x=_u,this},setY:function(_u){return this.y=_u,this},setZ:function(_u){return this.z=_u,this},setComponent:function(_u,$u){switch(_u){case 0:this.x=$u;break;case 1:this.y=$u;break;case 2:this.z=$u;break;default:throw new Error("index is out of range: "+_u)}return this},getComponent:function(_u){switch(_u){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_u)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(_u){return this.x=_u.x,this.y=_u.y,this.z=_u.z,this},add:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(_u,$u)):(this.x+=_u.x,this.y+=_u.y,this.z+=_u.z,this)},addScalar:function(_u){return this.x+=_u,this.y+=_u,this.z+=_u,this},addVectors:function(_u,$u){return this.x=_u.x+$u.x,this.y=_u.y+$u.y,this.z=_u.z+$u.z,this},addScaledVector:function(_u,$u){return this.x+=_u.x*$u,this.y+=_u.y*$u,this.z+=_u.z*$u,this},sub:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(_u,$u)):(this.x-=_u.x,this.y-=_u.y,this.z-=_u.z,this)},subScalar:function(_u){return this.x-=_u,this.y-=_u,this.z-=_u,this},subVectors:function(_u,$u){return this.x=_u.x-$u.x,this.y=_u.y-$u.y,this.z=_u.z-$u.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(_u,$u)):(this.x*=_u.x,this.y*=_u.y,this.z*=_u.z,this)},multiplyScalar:function(_u){return this.x*=_u,this.y*=_u,this.z*=_u,this},multiplyVectors:function(_u,$u){return this.x=_u.x*$u.x,this.y=_u.y*$u.y,this.z=_u.z*$u.z,this},applyEuler:function(_u){return _u&&_u.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(_u))},applyAxisAngle:function(_u,$u){return this.applyQuaternion(_quaternion.setFromAxisAngle(_u,$u))},applyMatrix3:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements;return this.x=Pu[0]*$u+Pu[3]*Tu+Pu[6]*Cu,this.y=Pu[1]*$u+Pu[4]*Tu+Pu[7]*Cu,this.z=Pu[2]*$u+Pu[5]*Tu+Pu[8]*Cu,this},applyNormalMatrix:function(_u){return this.applyMatrix3(_u).normalize()},applyMatrix4:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements,Bu=1/(Pu[3]*$u+Pu[7]*Tu+Pu[11]*Cu+Pu[15]);return this.x=(Pu[0]*$u+Pu[4]*Tu+Pu[8]*Cu+Pu[12])*Bu,this.y=(Pu[1]*$u+Pu[5]*Tu+Pu[9]*Cu+Pu[13])*Bu,this.z=(Pu[2]*$u+Pu[6]*Tu+Pu[10]*Cu+Pu[14])*Bu,this},applyQuaternion:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.x,Bu=_u.y,Lu=_u.z,Ru=_u.w,Ou=Ru*$u+Bu*Cu-Lu*Tu,Du=Ru*Tu+Lu*$u-Pu*Cu,Fu=Ru*Cu+Pu*Tu-Bu*$u,Vu=-Pu*$u-Bu*Tu-Lu*Cu;return this.x=Ou*Ru+Vu*-Pu+Du*-Lu-Fu*-Bu,this.y=Du*Ru+Vu*-Bu+Fu*-Pu-Ou*-Lu,this.z=Fu*Ru+Vu*-Lu+Ou*-Bu-Du*-Pu,this},project:function(_u){return this.applyMatrix4(_u.matrixWorldInverse).applyMatrix4(_u.projectionMatrix)},unproject:function(_u){return this.applyMatrix4(_u.projectionMatrixInverse).applyMatrix4(_u.matrixWorld)},transformDirection:function(_u){var $u=this.x,Tu=this.y,Cu=this.z,Pu=_u.elements;return this.x=Pu[0]*$u+Pu[4]*Tu+Pu[8]*Cu,this.y=Pu[1]*$u+Pu[5]*Tu+Pu[9]*Cu,this.z=Pu[2]*$u+Pu[6]*Tu+Pu[10]*Cu,this.normalize()},divide:function(_u){return this.x/=_u.x,this.y/=_u.y,this.z/=_u.z,this},divideScalar:function(_u){return this.multiplyScalar(1/_u)},min:function(_u){return this.x=Math.min(this.x,_u.x),this.y=Math.min(this.y,_u.y),this.z=Math.min(this.z,_u.z),this},max:function(_u){return this.x=Math.max(this.x,_u.x),this.y=Math.max(this.y,_u.y),this.z=Math.max(this.z,_u.z),this},clamp:function(_u,$u){return this.x=Math.max(_u.x,Math.min($u.x,this.x)),this.y=Math.max(_u.y,Math.min($u.y,this.y)),this.z=Math.max(_u.z,Math.min($u.z,this.z)),this},clampScalar:function(_u,$u){return this.x=Math.max(_u,Math.min($u,this.x)),this.y=Math.max(_u,Math.min($u,this.y)),this.z=Math.max(_u,Math.min($u,this.z)),this},clampLength:function(_u,$u){var Tu=this.length();return this.divideScalar(Tu||1).multiplyScalar(Math.max(_u,Math.min($u,Tu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(_u){return this.x*_u.x+this.y*_u.y+this.z*_u.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(_u){return this.normalize().multiplyScalar(_u)},lerp:function(_u,$u){return this.x+=(_u.x-this.x)*$u,this.y+=(_u.y-this.y)*$u,this.z+=(_u.z-this.z)*$u,this},lerpVectors:function(_u,$u,Tu){return this.x=_u.x+($u.x-_u.x)*Tu,this.y=_u.y+($u.y-_u.y)*Tu,this.z=_u.z+($u.z-_u.z)*Tu,this},cross:function(_u,$u){return $u!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(_u,$u)):this.crossVectors(this,_u)},crossVectors:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Bu=$u.x,Lu=$u.y,Ru=$u.z;return this.x=Cu*Ru-Pu*Lu,this.y=Pu*Bu-Tu*Ru,this.z=Tu*Lu-Cu*Bu,this},projectOnVector:function(_u){var $u=_u.lengthSq();if($u===0)return this.set(0,0,0);var Tu=_u.dot(this)/$u;return this.copy(_u).multiplyScalar(Tu)},projectOnPlane:function(_u){return _vector.copy(this).projectOnVector(_u),this.sub(_vector)},reflect:function(_u){return this.sub(_vector.copy(_u).multiplyScalar(2*this.dot(_u)))},angleTo:function(_u){var $u=Math.sqrt(this.lengthSq()*_u.lengthSq());if($u===0)return Math.PI/2;var Tu=this.dot(_u)/$u;return Math.acos(MathUtils.clamp(Tu,-1,1))},distanceTo:function(_u){return Math.sqrt(this.distanceToSquared(_u))},distanceToSquared:function(_u){var $u=this.x-_u.x,Tu=this.y-_u.y,Cu=this.z-_u.z;return $u*$u+Tu*Tu+Cu*Cu},manhattanDistanceTo:function(_u){return Math.abs(this.x-_u.x)+Math.abs(this.y-_u.y)+Math.abs(this.z-_u.z)},setFromSpherical:function(_u){return this.setFromSphericalCoords(_u.radius,_u.phi,_u.theta)},setFromSphericalCoords:function(_u,$u,Tu){var Cu=Math.sin($u)*_u;return this.x=Cu*Math.sin(Tu),this.y=Math.cos($u)*_u,this.z=Cu*Math.cos(Tu),this},setFromCylindrical:function(_u){return this.setFromCylindricalCoords(_u.radius,_u.theta,_u.y)},setFromCylindricalCoords:function(_u,$u,Tu){return this.x=_u*Math.sin($u),this.y=Tu,this.z=_u*Math.cos($u),this},setFromMatrixPosition:function(_u){var $u=_u.elements;return this.x=$u[12],this.y=$u[13],this.z=$u[14],this},setFromMatrixScale:function(_u){var $u=this.setFromMatrixColumn(_u,0).length(),Tu=this.setFromMatrixColumn(_u,1).length(),Cu=this.setFromMatrixColumn(_u,2).length();return this.x=$u,this.y=Tu,this.z=Cu,this},setFromMatrixColumn:function(_u,$u){return this.fromArray(_u.elements,$u*4)},setFromMatrix3Column:function(_u,$u){return this.fromArray(_u.elements,$u*3)},equals:function(_u){return _u.x===this.x&&_u.y===this.y&&_u.z===this.z},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.x=_u[$u],this.y=_u[$u+1],this.z=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.x,_u[$u+1]=this.y,_u[$u+2]=this.z,_u},fromBufferAttribute:function(_u,$u,Tu){return Tu!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=_u.getX($u),this.y=_u.getY($u),this.z=_u.getZ($u),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju){var Hu=this.elements;return Hu[0]=_u,Hu[4]=$u,Hu[8]=Tu,Hu[12]=Cu,Hu[1]=Pu,Hu[5]=Bu,Hu[9]=Lu,Hu[13]=Ru,Hu[2]=Ou,Hu[6]=Du,Hu[10]=Fu,Hu[14]=Vu,Hu[3]=ku,Hu[7]=Nu,Hu[11]=Gu,Hu[15]=ju,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(_u){var $u=this.elements,Tu=_u.elements;return $u[0]=Tu[0],$u[1]=Tu[1],$u[2]=Tu[2],$u[3]=Tu[3],$u[4]=Tu[4],$u[5]=Tu[5],$u[6]=Tu[6],$u[7]=Tu[7],$u[8]=Tu[8],$u[9]=Tu[9],$u[10]=Tu[10],$u[11]=Tu[11],$u[12]=Tu[12],$u[13]=Tu[13],$u[14]=Tu[14],$u[15]=Tu[15],this},copyPosition:function(_u){var $u=this.elements,Tu=_u.elements;return $u[12]=Tu[12],$u[13]=Tu[13],$u[14]=Tu[14],this},extractBasis:function(_u,$u,Tu){return _u.setFromMatrixColumn(this,0),$u.setFromMatrixColumn(this,1),Tu.setFromMatrixColumn(this,2),this},makeBasis:function(_u,$u,Tu){return this.set(_u.x,$u.x,Tu.x,0,_u.y,$u.y,Tu.y,0,_u.z,$u.z,Tu.z,0,0,0,0,1),this},extractRotation:function(_u){var $u=this.elements,Tu=_u.elements,Cu=1/_v1.setFromMatrixColumn(_u,0).length(),Pu=1/_v1.setFromMatrixColumn(_u,1).length(),Bu=1/_v1.setFromMatrixColumn(_u,2).length();return $u[0]=Tu[0]*Cu,$u[1]=Tu[1]*Cu,$u[2]=Tu[2]*Cu,$u[3]=0,$u[4]=Tu[4]*Pu,$u[5]=Tu[5]*Pu,$u[6]=Tu[6]*Pu,$u[7]=0,$u[8]=Tu[8]*Bu,$u[9]=Tu[9]*Bu,$u[10]=Tu[10]*Bu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromEuler:function(_u){_u&&_u.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var $u=this.elements,Tu=_u.x,Cu=_u.y,Pu=_u.z,Bu=Math.cos(Tu),Lu=Math.sin(Tu),Ru=Math.cos(Cu),Ou=Math.sin(Cu),Du=Math.cos(Pu),Fu=Math.sin(Pu);if(_u.order==="XYZ"){var Vu=Bu*Du,ku=Bu*Fu,Nu=Lu*Du,Gu=Lu*Fu;$u[0]=Ru*Du,$u[4]=-Ru*Fu,$u[8]=Ou,$u[1]=ku+Nu*Ou,$u[5]=Vu-Gu*Ou,$u[9]=-Lu*Ru,$u[2]=Gu-Vu*Ou,$u[6]=Nu+ku*Ou,$u[10]=Bu*Ru}else if(_u.order==="YXZ"){var ju=Ru*Du,Hu=Ru*Fu,Uu=Ou*Du,zu=Ou*Fu;$u[0]=ju+zu*Lu,$u[4]=Uu*Lu-Hu,$u[8]=Bu*Ou,$u[1]=Bu*Fu,$u[5]=Bu*Du,$u[9]=-Lu,$u[2]=Hu*Lu-Uu,$u[6]=zu+ju*Lu,$u[10]=Bu*Ru}else if(_u.order==="ZXY"){var ju=Ru*Du,Hu=Ru*Fu,Uu=Ou*Du,zu=Ou*Fu;$u[0]=ju-zu*Lu,$u[4]=-Bu*Fu,$u[8]=Uu+Hu*Lu,$u[1]=Hu+Uu*Lu,$u[5]=Bu*Du,$u[9]=zu-ju*Lu,$u[2]=-Bu*Ou,$u[6]=Lu,$u[10]=Bu*Ru}else if(_u.order==="ZYX"){var Vu=Bu*Du,ku=Bu*Fu,Nu=Lu*Du,Gu=Lu*Fu;$u[0]=Ru*Du,$u[4]=Nu*Ou-ku,$u[8]=Vu*Ou+Gu,$u[1]=Ru*Fu,$u[5]=Gu*Ou+Vu,$u[9]=ku*Ou-Nu,$u[2]=-Ou,$u[6]=Lu*Ru,$u[10]=Bu*Ru}else if(_u.order==="YZX"){var Wu=Bu*Ru,Qu=Bu*Ou,Ku=Lu*Ru,Yu=Lu*Ou;$u[0]=Ru*Du,$u[4]=Yu-Wu*Fu,$u[8]=Ku*Fu+Qu,$u[1]=Fu,$u[5]=Bu*Du,$u[9]=-Lu*Du,$u[2]=-Ou*Du,$u[6]=Qu*Fu+Ku,$u[10]=Wu-Yu*Fu}else if(_u.order==="XZY"){var Wu=Bu*Ru,Qu=Bu*Ou,Ku=Lu*Ru,Yu=Lu*Ou;$u[0]=Ru*Du,$u[4]=-Fu,$u[8]=Ou*Du,$u[1]=Wu*Fu+Yu,$u[5]=Bu*Du,$u[9]=Qu*Fu-Ku,$u[2]=Ku*Fu-Qu,$u[6]=Lu*Du,$u[10]=Yu*Fu+Wu}return $u[3]=0,$u[7]=0,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,this},makeRotationFromQuaternion:function(_u){return this.compose(_zero,_u,_one)},lookAt:function(_u,$u,Tu){var Cu=this.elements;return _z.subVectors(_u,$u),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Tu,_z),_x.lengthSq()===0&&(Math.abs(Tu.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Tu,_z)),_x.normalize(),_y.crossVectors(_z,_x),Cu[0]=_x.x,Cu[4]=_y.x,Cu[8]=_z.x,Cu[1]=_x.y,Cu[5]=_y.y,Cu[9]=_z.y,Cu[2]=_x.z,Cu[6]=_y.z,Cu[10]=_z.z,this},multiply:function(_u,$u){return $u!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(_u,$u)):this.multiplyMatrices(this,_u)},premultiply:function(_u){return this.multiplyMatrices(_u,this)},multiplyMatrices:function(_u,$u){var Tu=_u.elements,Cu=$u.elements,Pu=this.elements,Bu=Tu[0],Lu=Tu[4],Ru=Tu[8],Ou=Tu[12],Du=Tu[1],Fu=Tu[5],Vu=Tu[9],ku=Tu[13],Nu=Tu[2],Gu=Tu[6],ju=Tu[10],Hu=Tu[14],Uu=Tu[3],zu=Tu[7],Wu=Tu[11],Qu=Tu[15],Ku=Cu[0],Yu=Cu[4],Xc=Cu[8],_d=Cu[12],_f=Cu[1],qu=Cu[5],Xu=Cu[9],Zu=Cu[13],_c=Cu[2],Ju=Cu[6],_h=Cu[10],ep=Cu[14],tp=Cu[3],rp=Cu[7],dp=Cu[11],cp=Cu[15];return Pu[0]=Bu*Ku+Lu*_f+Ru*_c+Ou*tp,Pu[4]=Bu*Yu+Lu*qu+Ru*Ju+Ou*rp,Pu[8]=Bu*Xc+Lu*Xu+Ru*_h+Ou*dp,Pu[12]=Bu*_d+Lu*Zu+Ru*ep+Ou*cp,Pu[1]=Du*Ku+Fu*_f+Vu*_c+ku*tp,Pu[5]=Du*Yu+Fu*qu+Vu*Ju+ku*rp,Pu[9]=Du*Xc+Fu*Xu+Vu*_h+ku*dp,Pu[13]=Du*_d+Fu*Zu+Vu*ep+ku*cp,Pu[2]=Nu*Ku+Gu*_f+ju*_c+Hu*tp,Pu[6]=Nu*Yu+Gu*qu+ju*Ju+Hu*rp,Pu[10]=Nu*Xc+Gu*Xu+ju*_h+Hu*dp,Pu[14]=Nu*_d+Gu*Zu+ju*ep+Hu*cp,Pu[3]=Uu*Ku+zu*_f+Wu*_c+Qu*tp,Pu[7]=Uu*Yu+zu*qu+Wu*Ju+Qu*rp,Pu[11]=Uu*Xc+zu*Xu+Wu*_h+Qu*dp,Pu[15]=Uu*_d+zu*Zu+Wu*ep+Qu*cp,this},multiplyScalar:function(_u){var $u=this.elements;return $u[0]*=_u,$u[4]*=_u,$u[8]*=_u,$u[12]*=_u,$u[1]*=_u,$u[5]*=_u,$u[9]*=_u,$u[13]*=_u,$u[2]*=_u,$u[6]*=_u,$u[10]*=_u,$u[14]*=_u,$u[3]*=_u,$u[7]*=_u,$u[11]*=_u,$u[15]*=_u,this},determinant:function(){var _u=this.elements,$u=_u[0],Tu=_u[4],Cu=_u[8],Pu=_u[12],Bu=_u[1],Lu=_u[5],Ru=_u[9],Ou=_u[13],Du=_u[2],Fu=_u[6],Vu=_u[10],ku=_u[14],Nu=_u[3],Gu=_u[7],ju=_u[11],Hu=_u[15];return Nu*(+Pu*Ru*Fu-Cu*Ou*Fu-Pu*Lu*Vu+Tu*Ou*Vu+Cu*Lu*ku-Tu*Ru*ku)+Gu*(+$u*Ru*ku-$u*Ou*Vu+Pu*Bu*Vu-Cu*Bu*ku+Cu*Ou*Du-Pu*Ru*Du)+ju*(+$u*Ou*Fu-$u*Lu*ku-Pu*Bu*Fu+Tu*Bu*ku+Pu*Lu*Du-Tu*Ou*Du)+Hu*(-Cu*Lu*Du-$u*Ru*Fu+$u*Lu*Vu+Cu*Bu*Fu-Tu*Bu*Vu+Tu*Ru*Du)},transpose:function(){var _u=this.elements,$u;return $u=_u[1],_u[1]=_u[4],_u[4]=$u,$u=_u[2],_u[2]=_u[8],_u[8]=$u,$u=_u[6],_u[6]=_u[9],_u[9]=$u,$u=_u[3],_u[3]=_u[12],_u[12]=$u,$u=_u[7],_u[7]=_u[13],_u[13]=$u,$u=_u[11],_u[11]=_u[14],_u[14]=$u,this},setPosition:function(_u,$u,Tu){var Cu=this.elements;return _u.isVector3?(Cu[12]=_u.x,Cu[13]=_u.y,Cu[14]=_u.z):(Cu[12]=_u,Cu[13]=$u,Cu[14]=Tu),this},getInverse:function(_u,$u){$u!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Tu=this.elements,Cu=_u.elements,Pu=Cu[0],Bu=Cu[1],Lu=Cu[2],Ru=Cu[3],Ou=Cu[4],Du=Cu[5],Fu=Cu[6],Vu=Cu[7],ku=Cu[8],Nu=Cu[9],Gu=Cu[10],ju=Cu[11],Hu=Cu[12],Uu=Cu[13],zu=Cu[14],Wu=Cu[15],Qu=Nu*zu*Vu-Uu*Gu*Vu+Uu*Fu*ju-Du*zu*ju-Nu*Fu*Wu+Du*Gu*Wu,Ku=Hu*Gu*Vu-ku*zu*Vu-Hu*Fu*ju+Ou*zu*ju+ku*Fu*Wu-Ou*Gu*Wu,Yu=ku*Uu*Vu-Hu*Nu*Vu+Hu*Du*ju-Ou*Uu*ju-ku*Du*Wu+Ou*Nu*Wu,Xc=Hu*Nu*Fu-ku*Uu*Fu-Hu*Du*Gu+Ou*Uu*Gu+ku*Du*zu-Ou*Nu*zu,_d=Pu*Qu+Bu*Ku+Lu*Yu+Ru*Xc;if(_d===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _f=1/_d;return Tu[0]=Qu*_f,Tu[1]=(Uu*Gu*Ru-Nu*zu*Ru-Uu*Lu*ju+Bu*zu*ju+Nu*Lu*Wu-Bu*Gu*Wu)*_f,Tu[2]=(Du*zu*Ru-Uu*Fu*Ru+Uu*Lu*Vu-Bu*zu*Vu-Du*Lu*Wu+Bu*Fu*Wu)*_f,Tu[3]=(Nu*Fu*Ru-Du*Gu*Ru-Nu*Lu*Vu+Bu*Gu*Vu+Du*Lu*ju-Bu*Fu*ju)*_f,Tu[4]=Ku*_f,Tu[5]=(ku*zu*Ru-Hu*Gu*Ru+Hu*Lu*ju-Pu*zu*ju-ku*Lu*Wu+Pu*Gu*Wu)*_f,Tu[6]=(Hu*Fu*Ru-Ou*zu*Ru-Hu*Lu*Vu+Pu*zu*Vu+Ou*Lu*Wu-Pu*Fu*Wu)*_f,Tu[7]=(Ou*Gu*Ru-ku*Fu*Ru+ku*Lu*Vu-Pu*Gu*Vu-Ou*Lu*ju+Pu*Fu*ju)*_f,Tu[8]=Yu*_f,Tu[9]=(Hu*Nu*Ru-ku*Uu*Ru-Hu*Bu*ju+Pu*Uu*ju+ku*Bu*Wu-Pu*Nu*Wu)*_f,Tu[10]=(Ou*Uu*Ru-Hu*Du*Ru+Hu*Bu*Vu-Pu*Uu*Vu-Ou*Bu*Wu+Pu*Du*Wu)*_f,Tu[11]=(ku*Du*Ru-Ou*Nu*Ru-ku*Bu*Vu+Pu*Nu*Vu+Ou*Bu*ju-Pu*Du*ju)*_f,Tu[12]=Xc*_f,Tu[13]=(ku*Uu*Lu-Hu*Nu*Lu+Hu*Bu*Gu-Pu*Uu*Gu-ku*Bu*zu+Pu*Nu*zu)*_f,Tu[14]=(Hu*Du*Lu-Ou*Uu*Lu-Hu*Bu*Fu+Pu*Uu*Fu+Ou*Bu*zu-Pu*Du*zu)*_f,Tu[15]=(Ou*Nu*Lu-ku*Du*Lu+ku*Bu*Fu-Pu*Nu*Fu-Ou*Bu*Gu+Pu*Du*Gu)*_f,this},scale:function(_u){var $u=this.elements,Tu=_u.x,Cu=_u.y,Pu=_u.z;return $u[0]*=Tu,$u[4]*=Cu,$u[8]*=Pu,$u[1]*=Tu,$u[5]*=Cu,$u[9]*=Pu,$u[2]*=Tu,$u[6]*=Cu,$u[10]*=Pu,$u[3]*=Tu,$u[7]*=Cu,$u[11]*=Pu,this},getMaxScaleOnAxis:function(){var _u=this.elements,$u=_u[0]*_u[0]+_u[1]*_u[1]+_u[2]*_u[2],Tu=_u[4]*_u[4]+_u[5]*_u[5]+_u[6]*_u[6],Cu=_u[8]*_u[8]+_u[9]*_u[9]+_u[10]*_u[10];return Math.sqrt(Math.max($u,Tu,Cu))},makeTranslation:function(_u,$u,Tu){return this.set(1,0,0,_u,0,1,0,$u,0,0,1,Tu,0,0,0,1),this},makeRotationX:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set(1,0,0,0,0,$u,-Tu,0,0,Tu,$u,0,0,0,0,1),this},makeRotationY:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set($u,0,Tu,0,0,1,0,0,-Tu,0,$u,0,0,0,0,1),this},makeRotationZ:function(_u){var $u=Math.cos(_u),Tu=Math.sin(_u);return this.set($u,-Tu,0,0,Tu,$u,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(_u,$u){var Tu=Math.cos($u),Cu=Math.sin($u),Pu=1-Tu,Bu=_u.x,Lu=_u.y,Ru=_u.z,Ou=Pu*Bu,Du=Pu*Lu;return this.set(Ou*Bu+Tu,Ou*Lu-Cu*Ru,Ou*Ru+Cu*Lu,0,Ou*Lu+Cu*Ru,Du*Lu+Tu,Du*Ru-Cu*Bu,0,Ou*Ru-Cu*Lu,Du*Ru+Cu*Bu,Pu*Ru*Ru+Tu,0,0,0,0,1),this},makeScale:function(_u,$u,Tu){return this.set(_u,0,0,0,0,$u,0,0,0,0,Tu,0,0,0,0,1),this},makeShear:function(_u,$u,Tu){return this.set(1,$u,Tu,0,_u,1,Tu,0,_u,$u,1,0,0,0,0,1),this},compose:function(_u,$u,Tu){var Cu=this.elements,Pu=$u._x,Bu=$u._y,Lu=$u._z,Ru=$u._w,Ou=Pu+Pu,Du=Bu+Bu,Fu=Lu+Lu,Vu=Pu*Ou,ku=Pu*Du,Nu=Pu*Fu,Gu=Bu*Du,ju=Bu*Fu,Hu=Lu*Fu,Uu=Ru*Ou,zu=Ru*Du,Wu=Ru*Fu,Qu=Tu.x,Ku=Tu.y,Yu=Tu.z;return Cu[0]=(1-(Gu+Hu))*Qu,Cu[1]=(ku+Wu)*Qu,Cu[2]=(Nu-zu)*Qu,Cu[3]=0,Cu[4]=(ku-Wu)*Ku,Cu[5]=(1-(Vu+Hu))*Ku,Cu[6]=(ju+Uu)*Ku,Cu[7]=0,Cu[8]=(Nu+zu)*Yu,Cu[9]=(ju-Uu)*Yu,Cu[10]=(1-(Vu+Gu))*Yu,Cu[11]=0,Cu[12]=_u.x,Cu[13]=_u.y,Cu[14]=_u.z,Cu[15]=1,this},decompose:function(_u,$u,Tu){var Cu=this.elements,Pu=_v1.set(Cu[0],Cu[1],Cu[2]).length(),Bu=_v1.set(Cu[4],Cu[5],Cu[6]).length(),Lu=_v1.set(Cu[8],Cu[9],Cu[10]).length(),Ru=this.determinant();Ru<0&&(Pu=-Pu),_u.x=Cu[12],_u.y=Cu[13],_u.z=Cu[14],_m1.copy(this);var Ou=1/Pu,Du=1/Bu,Fu=1/Lu;return _m1.elements[0]*=Ou,_m1.elements[1]*=Ou,_m1.elements[2]*=Ou,_m1.elements[4]*=Du,_m1.elements[5]*=Du,_m1.elements[6]*=Du,_m1.elements[8]*=Fu,_m1.elements[9]*=Fu,_m1.elements[10]*=Fu,$u.setFromRotationMatrix(_m1),Tu.x=Pu,Tu.y=Bu,Tu.z=Lu,this},makePerspective:function(_u,$u,Tu,Cu,Pu,Bu){Bu===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Lu=this.elements,Ru=2*Pu/($u-_u),Ou=2*Pu/(Tu-Cu),Du=($u+_u)/($u-_u),Fu=(Tu+Cu)/(Tu-Cu),Vu=-(Bu+Pu)/(Bu-Pu),ku=-2*Bu*Pu/(Bu-Pu);return Lu[0]=Ru,Lu[4]=0,Lu[8]=Du,Lu[12]=0,Lu[1]=0,Lu[5]=Ou,Lu[9]=Fu,Lu[13]=0,Lu[2]=0,Lu[6]=0,Lu[10]=Vu,Lu[14]=ku,Lu[3]=0,Lu[7]=0,Lu[11]=-1,Lu[15]=0,this},makeOrthographic:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=this.elements,Ru=1/($u-_u),Ou=1/(Tu-Cu),Du=1/(Bu-Pu),Fu=($u+_u)*Ru,Vu=(Tu+Cu)*Ou,ku=(Bu+Pu)*Du;return Lu[0]=2*Ru,Lu[4]=0,Lu[8]=0,Lu[12]=-Fu,Lu[1]=0,Lu[5]=2*Ou,Lu[9]=0,Lu[13]=-Vu,Lu[2]=0,Lu[6]=0,Lu[10]=-2*Du,Lu[14]=-ku,Lu[3]=0,Lu[7]=0,Lu[11]=0,Lu[15]=1,this},equals:function(_u){for(var $u=this.elements,Tu=_u.elements,Cu=0;Cu<16;Cu++)if($u[Cu]!==Tu[Cu])return!1;return!0},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=0;Tu<16;Tu++)this.elements[Tu]=_u[Tu+$u];return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);var Tu=this.elements;return _u[$u]=Tu[0],_u[$u+1]=Tu[1],_u[$u+2]=Tu[2],_u[$u+3]=Tu[3],_u[$u+4]=Tu[4],_u[$u+5]=Tu[5],_u[$u+6]=Tu[6],_u[$u+7]=Tu[7],_u[$u+8]=Tu[8],_u[$u+9]=Tu[9],_u[$u+10]=Tu[10],_u[$u+11]=Tu[11],_u[$u+12]=Tu[12],_u[$u+13]=Tu[13],_u[$u+14]=Tu[14],_u[$u+15]=Tu[15],_u}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(_u,$u,Tu,Cu){this._x=_u||0,this._y=$u||0,this._z=Tu||0,this._order=Cu||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(_u){this._x=_u,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(_u){this._y=_u,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(_u){this._z=_u,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(_u){this._order=_u,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(_u,$u,Tu,Cu){return this._x=_u,this._y=$u,this._z=Tu,this._order=Cu||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(_u){return this._x=_u._x,this._y=_u._y,this._z=_u._z,this._order=_u._order,this._onChangeCallback(),this},setFromRotationMatrix:function(_u,$u,Tu){var Cu=MathUtils.clamp,Pu=_u.elements,Bu=Pu[0],Lu=Pu[4],Ru=Pu[8],Ou=Pu[1],Du=Pu[5],Fu=Pu[9],Vu=Pu[2],ku=Pu[6],Nu=Pu[10];switch($u=$u||this._order,$u){case"XYZ":this._y=Math.asin(Cu(Ru,-1,1)),Math.abs(Ru)<.9999999?(this._x=Math.atan2(-Fu,Nu),this._z=Math.atan2(-Lu,Bu)):(this._x=Math.atan2(ku,Du),this._z=0);break;case"YXZ":this._x=Math.asin(-Cu(Fu,-1,1)),Math.abs(Fu)<.9999999?(this._y=Math.atan2(Ru,Nu),this._z=Math.atan2(Ou,Du)):(this._y=Math.atan2(-Vu,Bu),this._z=0);break;case"ZXY":this._x=Math.asin(Cu(ku,-1,1)),Math.abs(ku)<.9999999?(this._y=Math.atan2(-Vu,Nu),this._z=Math.atan2(-Lu,Du)):(this._y=0,this._z=Math.atan2(Ou,Bu));break;case"ZYX":this._y=Math.asin(-Cu(Vu,-1,1)),Math.abs(Vu)<.9999999?(this._x=Math.atan2(ku,Nu),this._z=Math.atan2(Ou,Bu)):(this._x=0,this._z=Math.atan2(-Lu,Du));break;case"YZX":this._z=Math.asin(Cu(Ou,-1,1)),Math.abs(Ou)<.9999999?(this._x=Math.atan2(-Fu,Du),this._y=Math.atan2(-Vu,Bu)):(this._x=0,this._y=Math.atan2(Ru,Nu));break;case"XZY":this._z=Math.asin(-Cu(Lu,-1,1)),Math.abs(Lu)<.9999999?(this._x=Math.atan2(ku,Du),this._y=Math.atan2(Ru,Bu)):(this._x=Math.atan2(-Fu,Nu),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$u)}return this._order=$u,Tu!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(_u,$u,Tu){return _matrix.makeRotationFromQuaternion(_u),this.setFromRotationMatrix(_matrix,$u,Tu)},setFromVector3:function(_u,$u){return this.set(_u.x,_u.y,_u.z,$u||this._order)},reorder:function(_u){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,_u)},equals:function(_u){return _u._x===this._x&&_u._y===this._y&&_u._z===this._z&&_u._order===this._order},fromArray:function(_u){return this._x=_u[0],this._y=_u[1],this._z=_u[2],_u[3]!==void 0&&(this._order=_u[3]),this._onChangeCallback(),this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this._x,_u[$u+1]=this._y,_u[$u+2]=this._z,_u[$u+3]=this._order,_u},toVector3:function(_u){return _u?_u.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(_u){return this._onChangeCallback=_u,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(_u){this.mask=1<<_u|0},enable:function(_u){this.mask|=1<<_u|0},enableAll:function(){this.mask=-1},toggle:function(_u){this.mask^=1<<_u|0},disable:function(_u){this.mask&=~(1<<_u|0)},disableAll:function(){this.mask=0},test:function(_u){return(this.mask&_u.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var _u=new Vector3,$u=new Euler,Tu=new Quaternion,Cu=new Vector3(1,1,1);function Pu(){Tu.setFromEuler($u,!1)}function Bu(){$u.setFromQuaternion(Tu,void 0,!1)}$u._onChange(Pu),Tu._onChange(Bu),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_u},rotation:{configurable:!0,enumerable:!0,value:$u},quaternion:{configurable:!0,enumerable:!0,value:Tu},scale:{configurable:!0,enumerable:!0,value:Cu},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_u),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(_u){return this.quaternion.premultiply(_u),this},setRotationFromAxisAngle:function(_u,$u){this.quaternion.setFromAxisAngle(_u,$u)},setRotationFromEuler:function(_u){this.quaternion.setFromEuler(_u,!0)},setRotationFromMatrix:function(_u){this.quaternion.setFromRotationMatrix(_u)},setRotationFromQuaternion:function(_u){this.quaternion.copy(_u)},rotateOnAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(_u,$u){return _q1.setFromAxisAngle(_u,$u),this.quaternion.premultiply(_q1),this},rotateX:function(_u){return this.rotateOnAxis(_xAxis,_u)},rotateY:function(_u){return this.rotateOnAxis(_yAxis,_u)},rotateZ:function(_u){return this.rotateOnAxis(_zAxis,_u)},translateOnAxis:function(_u,$u){return _v1$1.copy(_u).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar($u)),this},translateX:function(_u){return this.translateOnAxis(_xAxis,_u)},translateY:function(_u){return this.translateOnAxis(_yAxis,_u)},translateZ:function(_u){return this.translateOnAxis(_zAxis,_u)},localToWorld:function(_u){return _u.applyMatrix4(this.matrixWorld)},worldToLocal:function(_u){return _u.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(_u,$u,Tu){_u.isVector3?_target.copy(_u):_target.set(_u,$u,Tu);var Cu=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Cu&&(_m1$1.extractRotation(Cu.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.add(arguments[$u]);return this}return _u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_u),this):(_u&&_u.isObject3D?(_u.parent!==null&&_u.parent.remove(_u),_u.parent=this,this.children.push(_u),_u.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_u),this)},remove:function(_u){if(arguments.length>1){for(var $u=0;$u<arguments.length;$u++)this.remove(arguments[$u]);return this}var Tu=this.children.indexOf(_u);return Tu!==-1&&(_u.parent=null,this.children.splice(Tu,1),_u.dispatchEvent(_removedEvent)),this},attach:function(_u){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),_u.parent!==null&&(_u.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_u.parent.matrixWorld)),_u.applyMatrix4(_m1$1),_u.updateWorldMatrix(!1,!1),this.add(_u),this},getObjectById:function(_u){return this.getObjectByProperty("id",_u)},getObjectByName:function(_u){return this.getObjectByProperty("name",_u)},getObjectByProperty:function(_u,$u){if(this[_u]===$u)return this;for(var Tu=0,Cu=this.children.length;Tu<Cu;Tu++){var Pu=this.children[Tu],Bu=Pu.getObjectByProperty(_u,$u);if(Bu!==void 0)return Bu}},getWorldPosition:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),_u.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),_u=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_u,_scale),_u},getWorldScale:function(_u){return _u===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,_u),_u},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set($u[8],$u[9],$u[10]).normalize()},raycast:function(){},traverse:function(_u){_u(this);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].traverse(_u)},traverseVisible:function(_u){if(this.visible!==!1){_u(this);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].traverseVisible(_u)}},traverseAncestors:function(_u){var $u=this.parent;$u!==null&&(_u($u),$u.traverseAncestors(_u))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(_u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_u)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_u=!0);for(var $u=this.children,Tu=0,Cu=$u.length;Tu<Cu;Tu++)$u[Tu].updateMatrixWorld(_u)},updateWorldMatrix:function(_u,$u){var Tu=this.parent;if(_u===!0&&Tu!==null&&Tu.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),$u===!0)for(var Cu=this.children,Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Cu[Pu].updateWorldMatrix(!1,!0)},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string",Tu={};$u&&(_u={geometries:{},materials:{},textures:{},images:{},shapes:{}},Tu.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Cu={};Cu.uuid=this.uuid,Cu.type=this.type,this.name!==""&&(Cu.name=this.name),this.castShadow===!0&&(Cu.castShadow=!0),this.receiveShadow===!0&&(Cu.receiveShadow=!0),this.visible===!1&&(Cu.visible=!1),this.frustumCulled===!1&&(Cu.frustumCulled=!1),this.renderOrder!==0&&(Cu.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Cu.userData=this.userData),Cu.layers=this.layers.mask,Cu.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Cu.matrixAutoUpdate=!1),this.isInstancedMesh&&(Cu.type="InstancedMesh",Cu.count=this.count,Cu.instanceMatrix=this.instanceMatrix.toJSON());function Pu(Hu,Uu){return Hu[Uu.uuid]===void 0&&(Hu[Uu.uuid]=Uu.toJSON(_u)),Uu.uuid}if(this.isMesh||this.isLine||this.isPoints){Cu.geometry=Pu(_u.geometries,this.geometry);var Bu=this.geometry.parameters;if(Bu!==void 0&&Bu.shapes!==void 0){var Lu=Bu.shapes;if(Array.isArray(Lu))for(var Ru=0,Ou=Lu.length;Ru<Ou;Ru++){var Du=Lu[Ru];Pu(_u.shapes,Du)}else Pu(_u.shapes,Lu)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Fu=[],Ru=0,Ou=this.material.length;Ru<Ou;Ru++)Fu.push(Pu(_u.materials,this.material[Ru]));Cu.material=Fu}else Cu.material=Pu(_u.materials,this.material);if(this.children.length>0){Cu.children=[];for(var Ru=0;Ru<this.children.length;Ru++)Cu.children.push(this.children[Ru].toJSON(_u).object)}if($u){var Vu=ju(_u.geometries),ku=ju(_u.materials),Nu=ju(_u.textures),Gu=ju(_u.images),Lu=ju(_u.shapes);Vu.length>0&&(Tu.geometries=Vu),ku.length>0&&(Tu.materials=ku),Nu.length>0&&(Tu.textures=Nu),Gu.length>0&&(Tu.images=Gu),Lu.length>0&&(Tu.shapes=Lu)}return Tu.object=Cu,Tu;function ju(Hu){var Uu=[];for(var zu in Hu){var Wu=Hu[zu];delete Wu.metadata,Uu.push(Wu)}return Uu}},clone:function(_u){return new this.constructor().copy(this,_u)},copy:function(_u,$u){if($u===void 0&&($u=!0),this.name=_u.name,this.up.copy(_u.up),this.position.copy(_u.position),this.quaternion.copy(_u.quaternion),this.scale.copy(_u.scale),this.matrix.copy(_u.matrix),this.matrixWorld.copy(_u.matrixWorld),this.matrixAutoUpdate=_u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_u.matrixWorldNeedsUpdate,this.layers.mask=_u.layers.mask,this.visible=_u.visible,this.castShadow=_u.castShadow,this.receiveShadow=_u.receiveShadow,this.frustumCulled=_u.frustumCulled,this.renderOrder=_u.renderOrder,this.userData=JSON.parse(JSON.stringify(_u.userData)),$u===!0)for(var Tu=0;Tu<_u.children.length;Tu++){var Cu=_u.children[Tu];this.add(Cu.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),_u.background!==null&&(this.background=_u.background.clone()),_u.environment!==null&&(this.environment=_u.environment.clone()),_u.fog!==null&&(this.fog=_u.fog.clone()),_u.overrideMaterial!==null&&(this.overrideMaterial=_u.overrideMaterial.clone()),this.autoUpdate=_u.autoUpdate,this.matrixAutoUpdate=_u.matrixAutoUpdate,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return this.background!==null&&($u.object.background=this.background.toJSON(_u)),this.environment!==null&&($u.object.environment=this.environment.toJSON(_u)),this.fog!==null&&($u.object.fog=this.fog.toJSON()),$u},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(_u,$u){this.min=_u!==void 0?_u:new Vector3(1/0,1/0,1/0),this.max=$u!==void 0?$u:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromArray:function(_u){for(var $u=1/0,Tu=1/0,Cu=1/0,Pu=-1/0,Bu=-1/0,Lu=-1/0,Ru=0,Ou=_u.length;Ru<Ou;Ru+=3){var Du=_u[Ru],Fu=_u[Ru+1],Vu=_u[Ru+2];Du<$u&&($u=Du),Fu<Tu&&(Tu=Fu),Vu<Cu&&(Cu=Vu),Du>Pu&&(Pu=Du),Fu>Bu&&(Bu=Fu),Vu>Lu&&(Lu=Vu)}return this.min.set($u,Tu,Cu),this.max.set(Pu,Bu,Lu),this},setFromBufferAttribute:function(_u){for(var $u=1/0,Tu=1/0,Cu=1/0,Pu=-1/0,Bu=-1/0,Lu=-1/0,Ru=0,Ou=_u.count;Ru<Ou;Ru++){var Du=_u.getX(Ru),Fu=_u.getY(Ru),Vu=_u.getZ(Ru);Du<$u&&($u=Du),Fu<Tu&&(Tu=Fu),Vu<Cu&&(Cu=Vu),Du>Pu&&(Pu=Du),Fu>Bu&&(Bu=Fu),Vu>Lu&&(Lu=Vu)}return this.min.set($u,Tu,Cu),this.max.set(Pu,Bu,Lu),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Tu=_u.length;$u<Tu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Tu=_vector$1.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Tu),this.max.copy(_u).add(Tu),this},setFromObject:function(_u){return this.makeEmpty(),this.expandByObject(_u)},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),_u=new Vector3),this.isEmpty()?_u.set(0,0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},expandByObject:function(_u){_u.updateWorldMatrix(!1,!1);var $u=_u.geometry;$u!==void 0&&($u.boundingBox===null&&$u.computeBoundingBox(),_box.copy($u.boundingBox),_box.applyMatrix4(_u.matrixWorld),this.union(_box));for(var Tu=_u.children,Cu=0,Pu=Tu.length;Cu<Pu;Cu++)this.expandByObject(Tu[Cu]);return this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y||_u.z<this.min.z||_u.z>this.max.z)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y&&this.min.z<=_u.min.z&&_u.max.z<=this.max.z},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),$u=new Vector3),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y),(_u.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y||_u.max.z<this.min.z||_u.min.z>this.max.z)},intersectsSphere:function(_u){return this.clampPoint(_u.center,_vector$1),_vector$1.distanceToSquared(_u.center)<=_u.radius*_u.radius},intersectsPlane:function(_u){var $u,Tu;return _u.normal.x>0?($u=_u.normal.x*this.min.x,Tu=_u.normal.x*this.max.x):($u=_u.normal.x*this.max.x,Tu=_u.normal.x*this.min.x),_u.normal.y>0?($u+=_u.normal.y*this.min.y,Tu+=_u.normal.y*this.max.y):($u+=_u.normal.y*this.max.y,Tu+=_u.normal.y*this.min.y),_u.normal.z>0?($u+=_u.normal.z*this.min.z,Tu+=_u.normal.z*this.max.z):($u+=_u.normal.z*this.max.z,Tu+=_u.normal.z*this.min.z),$u<=-_u.constant&&Tu>=-_u.constant},intersectsTriangle:function(_u){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(_u.a,_center),_v1$2.subVectors(_u.b,_center),_v2.subVectors(_u.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var $u=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes($u,_v0,_v1$2,_v2,_extents)||($u=[1,0,0,0,1,0,0,0,1],!satForAxes($u,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),$u=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes($u,_v0,_v1$2,_v2,_extents))},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$1.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},getBoundingSphere:function(_u){return _u===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(_u.center),_u.radius=this.getSize(_vector$1).length()*.5,_u},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this.isEmpty()&&this.makeEmpty(),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},applyMatrix4:function(_u){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_u),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_u),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_u),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_u),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_u),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_u),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_u),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_u),this.setFromPoints(_points),this)},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});function satForAxes(_u,$u,Tu,Cu,Pu){var Bu,Lu;for(Bu=0,Lu=_u.length-3;Bu<=Lu;Bu+=3){_testAxis.fromArray(_u,Bu);var Ru=Pu.x*Math.abs(_testAxis.x)+Pu.y*Math.abs(_testAxis.y)+Pu.z*Math.abs(_testAxis.z),Ou=$u.dot(_testAxis),Du=Tu.dot(_testAxis),Fu=Cu.dot(_testAxis);if(Math.max(-Math.max(Ou,Du,Fu),Math.min(Ou,Du,Fu))>Ru)return!1}return!0}var _box$1=new Box3;function Sphere(_u,$u){this.center=_u!==void 0?_u:new Vector3,this.radius=$u!==void 0?$u:-1}Object.assign(Sphere.prototype,{set:function(_u,$u){return this.center.copy(_u),this.radius=$u,this},setFromPoints:function(_u,$u){var Tu=this.center;$u!==void 0?Tu.copy($u):_box$1.setFromPoints(_u).getCenter(Tu);for(var Cu=0,Pu=0,Bu=_u.length;Pu<Bu;Pu++)Cu=Math.max(Cu,Tu.distanceToSquared(_u[Pu]));return this.radius=Math.sqrt(Cu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.center.copy(_u.center),this.radius=_u.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(_u){return _u.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(_u){return _u.distanceTo(this.center)-this.radius},intersectsSphere:function(_u){var $u=this.radius+_u.radius;return _u.center.distanceToSquared(this.center)<=$u*$u},intersectsBox:function(_u){return _u.intersectsSphere(this)},intersectsPlane:function(_u){return Math.abs(_u.distanceToPoint(this.center))<=this.radius},clampPoint:function(_u,$u){var Tu=this.center.distanceToSquared(_u);return $u===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),$u=new Vector3),$u.copy(_u),Tu>this.radius*this.radius&&($u.sub(this.center).normalize(),$u.multiplyScalar(this.radius).add(this.center)),$u},getBoundingBox:function(_u){return _u===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),_u=new Box3),this.isEmpty()?(_u.makeEmpty(),_u):(_u.set(this.center,this.center),_u.expandByScalar(this.radius),_u)},applyMatrix4:function(_u){return this.center.applyMatrix4(_u),this.radius=this.radius*_u.getMaxScaleOnAxis(),this},translate:function(_u){return this.center.add(_u),this},equals:function(_u){return _u.center.equals(this.center)&&_u.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(_u,$u){this.origin=_u!==void 0?_u:new Vector3,this.direction=$u!==void 0?$u:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(_u,$u){return this.origin.copy(_u),this.direction.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.origin.copy(_u.origin),this.direction.copy(_u.direction),this},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Ray: .at() target is now required"),$u=new Vector3),$u.copy(this.direction).multiplyScalar(_u).add(this.origin)},lookAt:function(_u){return this.direction.copy(_u).sub(this.origin).normalize(),this},recast:function(_u){return this.origin.copy(this.at(_u,_vector$2)),this},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),$u=new Vector3),$u.subVectors(_u,this.origin);var Tu=$u.dot(this.direction);return Tu<0?$u.copy(this.origin):$u.copy(this.direction).multiplyScalar(Tu).add(this.origin)},distanceToPoint:function(_u){return Math.sqrt(this.distanceSqToPoint(_u))},distanceSqToPoint:function(_u){var $u=_vector$2.subVectors(_u,this.origin).dot(this.direction);return $u<0?this.origin.distanceToSquared(_u):(_vector$2.copy(this.direction).multiplyScalar($u).add(this.origin),_vector$2.distanceToSquared(_u))},distanceSqToSegment:function(_u,$u,Tu,Cu){_segCenter.copy(_u).add($u).multiplyScalar(.5),_segDir.copy($u).sub(_u).normalize(),_diff.copy(this.origin).sub(_segCenter);var Pu=_u.distanceTo($u)*.5,Bu=-this.direction.dot(_segDir),Lu=_diff.dot(this.direction),Ru=-_diff.dot(_segDir),Ou=_diff.lengthSq(),Du=Math.abs(1-Bu*Bu),Fu,Vu,ku,Nu;if(Du>0)if(Fu=Bu*Ru-Lu,Vu=Bu*Lu-Ru,Nu=Pu*Du,Fu>=0)if(Vu>=-Nu)if(Vu<=Nu){var Gu=1/Du;Fu*=Gu,Vu*=Gu,ku=Fu*(Fu+Bu*Vu+2*Lu)+Vu*(Bu*Fu+Vu+2*Ru)+Ou}else Vu=Pu,Fu=Math.max(0,-(Bu*Vu+Lu)),ku=-Fu*Fu+Vu*(Vu+2*Ru)+Ou;else Vu=-Pu,Fu=Math.max(0,-(Bu*Vu+Lu)),ku=-Fu*Fu+Vu*(Vu+2*Ru)+Ou;else Vu<=-Nu?(Fu=Math.max(0,-(-Bu*Pu+Lu)),Vu=Fu>0?-Pu:Math.min(Math.max(-Pu,-Ru),Pu),ku=-Fu*Fu+Vu*(Vu+2*Ru)+Ou):Vu<=Nu?(Fu=0,Vu=Math.min(Math.max(-Pu,-Ru),Pu),ku=Vu*(Vu+2*Ru)+Ou):(Fu=Math.max(0,-(Bu*Pu+Lu)),Vu=Fu>0?Pu:Math.min(Math.max(-Pu,-Ru),Pu),ku=-Fu*Fu+Vu*(Vu+2*Ru)+Ou);else Vu=Bu>0?-Pu:Pu,Fu=Math.max(0,-(Bu*Vu+Lu)),ku=-Fu*Fu+Vu*(Vu+2*Ru)+Ou;return Tu&&Tu.copy(this.direction).multiplyScalar(Fu).add(this.origin),Cu&&Cu.copy(_segDir).multiplyScalar(Vu).add(_segCenter),ku},intersectSphere:function(_u,$u){_vector$2.subVectors(_u.center,this.origin);var Tu=_vector$2.dot(this.direction),Cu=_vector$2.dot(_vector$2)-Tu*Tu,Pu=_u.radius*_u.radius;if(Cu>Pu)return null;var Bu=Math.sqrt(Pu-Cu),Lu=Tu-Bu,Ru=Tu+Bu;return Lu<0&&Ru<0?null:Lu<0?this.at(Ru,$u):this.at(Lu,$u)},intersectsSphere:function(_u){return this.distanceSqToPoint(_u.center)<=_u.radius*_u.radius},distanceToPlane:function(_u){var $u=_u.normal.dot(this.direction);if($u===0)return _u.distanceToPoint(this.origin)===0?0:null;var Tu=-(this.origin.dot(_u.normal)+_u.constant)/$u;return Tu>=0?Tu:null},intersectPlane:function(_u,$u){var Tu=this.distanceToPlane(_u);return Tu===null?null:this.at(Tu,$u)},intersectsPlane:function(_u){var $u=_u.distanceToPoint(this.origin);if($u===0)return!0;var Tu=_u.normal.dot(this.direction);return Tu*$u<0},intersectBox:function(_u,$u){var Tu,Cu,Pu,Bu,Lu,Ru,Ou=1/this.direction.x,Du=1/this.direction.y,Fu=1/this.direction.z,Vu=this.origin;return Ou>=0?(Tu=(_u.min.x-Vu.x)*Ou,Cu=(_u.max.x-Vu.x)*Ou):(Tu=(_u.max.x-Vu.x)*Ou,Cu=(_u.min.x-Vu.x)*Ou),Du>=0?(Pu=(_u.min.y-Vu.y)*Du,Bu=(_u.max.y-Vu.y)*Du):(Pu=(_u.max.y-Vu.y)*Du,Bu=(_u.min.y-Vu.y)*Du),Tu>Bu||Pu>Cu||((Pu>Tu||Tu!==Tu)&&(Tu=Pu),(Bu<Cu||Cu!==Cu)&&(Cu=Bu),Fu>=0?(Lu=(_u.min.z-Vu.z)*Fu,Ru=(_u.max.z-Vu.z)*Fu):(Lu=(_u.max.z-Vu.z)*Fu,Ru=(_u.min.z-Vu.z)*Fu),Tu>Ru||Lu>Cu)||((Lu>Tu||Tu!==Tu)&&(Tu=Lu),(Ru<Cu||Cu!==Cu)&&(Cu=Ru),Cu<0)?null:this.at(Tu>=0?Tu:Cu,$u)},intersectsBox:function(_u){return this.intersectBox(_u,_vector$2)!==null},intersectTriangle:function(_u,$u,Tu,Cu,Pu){_edge1.subVectors($u,_u),_edge2.subVectors(Tu,_u),_normal.crossVectors(_edge1,_edge2);var Bu=this.direction.dot(_normal),Lu;if(Bu>0){if(Cu)return null;Lu=1}else if(Bu<0)Lu=-1,Bu=-Bu;else return null;_diff.subVectors(this.origin,_u);var Ru=Lu*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Ru<0)return null;var Ou=Lu*this.direction.dot(_edge1.cross(_diff));if(Ou<0||Ru+Ou>Bu)return null;var Du=-Lu*_diff.dot(_normal);return Du<0?null:this.at(Du/Bu,Pu)},applyMatrix4:function(_u){return this.origin.applyMatrix4(_u),this.direction.transformDirection(_u),this},equals:function(_u){return _u.origin.equals(this.origin)&&_u.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(_u,$u){this.normal=_u!==void 0?_u:new Vector3(1,0,0),this.constant=$u!==void 0?$u:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(_u,$u){return this.normal.copy(_u),this.constant=$u,this},setComponents:function(_u,$u,Tu,Cu){return this.normal.set(_u,$u,Tu),this.constant=Cu,this},setFromNormalAndCoplanarPoint:function(_u,$u){return this.normal.copy(_u),this.constant=-$u.dot(this.normal),this},setFromCoplanarPoints:function(_u,$u,Tu){var Cu=_vector1.subVectors(Tu,$u).cross(_vector2.subVectors(_u,$u)).normalize();return this.setFromNormalAndCoplanarPoint(Cu,_u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.normal.copy(_u.normal),this.constant=_u.constant,this},normalize:function(){var _u=1/this.normal.length();return this.normal.multiplyScalar(_u),this.constant*=_u,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(_u){return this.normal.dot(_u)+this.constant},distanceToSphere:function(_u){return this.distanceToPoint(_u.center)-_u.radius},projectPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),$u=new Vector3),$u.copy(this.normal).multiplyScalar(-this.distanceToPoint(_u)).add(_u)},intersectLine:function(_u,$u){$u===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),$u=new Vector3);var Tu=_u.delta(_vector1),Cu=this.normal.dot(Tu);if(Cu===0)return this.distanceToPoint(_u.start)===0?$u.copy(_u.start):void 0;var Pu=-(_u.start.dot(this.normal)+this.constant)/Cu;if(!(Pu<0||Pu>1))return $u.copy(Tu).multiplyScalar(Pu).add(_u.start)},intersectsLine:function(_u){var $u=this.distanceToPoint(_u.start),Tu=this.distanceToPoint(_u.end);return $u<0&&Tu>0||Tu<0&&$u>0},intersectsBox:function(_u){return _u.intersectsPlane(this)},intersectsSphere:function(_u){return _u.intersectsPlane(this)},coplanarPoint:function(_u){return _u===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),_u=new Vector3),_u.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(_u,$u){var Tu=$u||_normalMatrix.getNormalMatrix(_u),Cu=this.coplanarPoint(_vector1).applyMatrix4(_u),Pu=this.normal.applyMatrix3(Tu).normalize();return this.constant=-Cu.dot(Pu),this},translate:function(_u){return this.constant-=_u.dot(this.normal),this},equals:function(_u){return _u.normal.equals(this.normal)&&_u.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(_u,$u,Tu){this.a=_u!==void 0?_u:new Vector3,this.b=$u!==void 0?$u:new Vector3,this.c=Tu!==void 0?Tu:new Vector3}Object.assign(Triangle,{getNormal:function(_u,$u,Tu,Cu){Cu===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Cu=new Vector3),Cu.subVectors(Tu,$u),_v0$1.subVectors(_u,$u),Cu.cross(_v0$1);var Pu=Cu.lengthSq();return Pu>0?Cu.multiplyScalar(1/Math.sqrt(Pu)):Cu.set(0,0,0)},getBarycoord:function(_u,$u,Tu,Cu,Pu){_v0$1.subVectors(Cu,$u),_v1$3.subVectors(Tu,$u),_v2$1.subVectors(_u,$u);var Bu=_v0$1.dot(_v0$1),Lu=_v0$1.dot(_v1$3),Ru=_v0$1.dot(_v2$1),Ou=_v1$3.dot(_v1$3),Du=_v1$3.dot(_v2$1),Fu=Bu*Ou-Lu*Lu;if(Pu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Pu=new Vector3),Fu===0)return Pu.set(-2,-1,-1);var Vu=1/Fu,ku=(Ou*Ru-Lu*Du)*Vu,Nu=(Bu*Du-Lu*Ru)*Vu;return Pu.set(1-ku-Nu,Nu,ku)},containsPoint:function(_u,$u,Tu,Cu){return Triangle.getBarycoord(_u,$u,Tu,Cu,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){return this.getBarycoord(_u,$u,Tu,Cu,_v3),Ru.set(0,0),Ru.addScaledVector(Pu,_v3.x),Ru.addScaledVector(Bu,_v3.y),Ru.addScaledVector(Lu,_v3.z),Ru},isFrontFacing:function(_u,$u,Tu,Cu){return _v0$1.subVectors(Tu,$u),_v1$3.subVectors(_u,$u),_v0$1.cross(_v1$3).dot(Cu)<0}});Object.assign(Triangle.prototype,{set:function(_u,$u,Tu){return this.a.copy(_u),this.b.copy($u),this.c.copy(Tu),this},setFromPointsAndIndices:function(_u,$u,Tu,Cu){return this.a.copy(_u[$u]),this.b.copy(_u[Tu]),this.c.copy(_u[Cu]),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.a.copy(_u.a),this.b.copy(_u.b),this.c.copy(_u.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),_u=new Vector3),_u.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(_u){return Triangle.getNormal(this.a,this.b,this.c,_u)},getPlane:function(_u){return _u===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),_u=new Plane),_u.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(_u,$u){return Triangle.getBarycoord(_u,this.a,this.b,this.c,$u)},getUV:function(_u,$u,Tu,Cu,Pu){return Triangle.getUV(_u,this.a,this.b,this.c,$u,Tu,Cu,Pu)},containsPoint:function(_u){return Triangle.containsPoint(_u,this.a,this.b,this.c)},isFrontFacing:function(_u){return Triangle.isFrontFacing(this.a,this.b,this.c,_u)},intersectsBox:function(_u){return _u.intersectsTriangle(this)},closestPointToPoint:function(_u,$u){$u===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),$u=new Vector3);var Tu=this.a,Cu=this.b,Pu=this.c,Bu,Lu;_vab.subVectors(Cu,Tu),_vac.subVectors(Pu,Tu),_vap.subVectors(_u,Tu);var Ru=_vab.dot(_vap),Ou=_vac.dot(_vap);if(Ru<=0&&Ou<=0)return $u.copy(Tu);_vbp.subVectors(_u,Cu);var Du=_vab.dot(_vbp),Fu=_vac.dot(_vbp);if(Du>=0&&Fu<=Du)return $u.copy(Cu);var Vu=Ru*Fu-Du*Ou;if(Vu<=0&&Ru>=0&&Du<=0)return Bu=Ru/(Ru-Du),$u.copy(Tu).addScaledVector(_vab,Bu);_vcp.subVectors(_u,Pu);var ku=_vab.dot(_vcp),Nu=_vac.dot(_vcp);if(Nu>=0&&ku<=Nu)return $u.copy(Pu);var Gu=ku*Ou-Ru*Nu;if(Gu<=0&&Ou>=0&&Nu<=0)return Lu=Ou/(Ou-Nu),$u.copy(Tu).addScaledVector(_vac,Lu);var ju=Du*Nu-ku*Fu;if(ju<=0&&Fu-Du>=0&&ku-Nu>=0)return _vbc.subVectors(Pu,Cu),Lu=(Fu-Du)/(Fu-Du+(ku-Nu)),$u.copy(Cu).addScaledVector(_vbc,Lu);var Hu=1/(ju+Gu+Vu);return Bu=Gu*Hu,Lu=Vu*Hu,$u.copy(Tu).addScaledVector(_vab,Bu).addScaledVector(_vac,Lu)},equals:function(_u){return _u.a.equals(this.a)&&_u.b.equals(this.b)&&_u.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(_u,$u,Tu){return $u===void 0&&Tu===void 0?this.set(_u):this.setRGB(_u,$u,Tu)}function hue2rgb(_u,$u,Tu){return Tu<0&&(Tu+=1),Tu>1&&(Tu-=1),Tu<1/6?_u+($u-_u)*6*Tu:Tu<1/2?$u:Tu<2/3?_u+($u-_u)*6*(2/3-Tu):_u}function SRGBToLinear(_u){return _u<.04045?_u*.0773993808:Math.pow(_u*.9478672986+.0521327014,2.4)}function LinearToSRGB(_u){return _u<.0031308?_u*12.92:1.055*Math.pow(_u,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(_u){return _u&&_u.isColor?this.copy(_u):typeof _u=="number"?this.setHex(_u):typeof _u=="string"&&this.setStyle(_u),this},setScalar:function(_u){return this.r=_u,this.g=_u,this.b=_u,this},setHex:function(_u){return _u=Math.floor(_u),this.r=(_u>>16&255)/255,this.g=(_u>>8&255)/255,this.b=(_u&255)/255,this},setRGB:function(_u,$u,Tu){return this.r=_u,this.g=$u,this.b=Tu,this},setHSL:function(_u,$u,Tu){if(_u=MathUtils.euclideanModulo(_u,1),$u=MathUtils.clamp($u,0,1),Tu=MathUtils.clamp(Tu,0,1),$u===0)this.r=this.g=this.b=Tu;else{var Cu=Tu<=.5?Tu*(1+$u):Tu+$u-Tu*$u,Pu=2*Tu-Cu;this.r=hue2rgb(Pu,Cu,_u+1/3),this.g=hue2rgb(Pu,Cu,_u),this.b=hue2rgb(Pu,Cu,_u-1/3)}return this},setStyle:function(_u){function $u(Vu){Vu!==void 0&&parseFloat(Vu)<1&&console.warn("THREE.Color: Alpha component of "+_u+" will be ignored.")}var Tu;if(Tu=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(_u)){var Cu,Pu=Tu[1],Bu=Tu[2];switch(Pu){case"rgb":case"rgba":if(Cu=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Bu))return this.r=Math.min(255,parseInt(Cu[1],10))/255,this.g=Math.min(255,parseInt(Cu[2],10))/255,this.b=Math.min(255,parseInt(Cu[3],10))/255,$u(Cu[5]),this;if(Cu=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Bu))return this.r=Math.min(100,parseInt(Cu[1],10))/100,this.g=Math.min(100,parseInt(Cu[2],10))/100,this.b=Math.min(100,parseInt(Cu[3],10))/100,$u(Cu[5]),this;break;case"hsl":case"hsla":if(Cu=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Bu)){var Lu=parseFloat(Cu[1])/360,Ru=parseInt(Cu[2],10)/100,Ou=parseInt(Cu[3],10)/100;return $u(Cu[5]),this.setHSL(Lu,Ru,Ou)}break}}else if(Tu=/^\#([A-Fa-f0-9]+)$/.exec(_u)){var Du=Tu[1],Fu=Du.length;if(Fu===3)return this.r=parseInt(Du.charAt(0)+Du.charAt(0),16)/255,this.g=parseInt(Du.charAt(1)+Du.charAt(1),16)/255,this.b=parseInt(Du.charAt(2)+Du.charAt(2),16)/255,this;if(Fu===6)return this.r=parseInt(Du.charAt(0)+Du.charAt(1),16)/255,this.g=parseInt(Du.charAt(2)+Du.charAt(3),16)/255,this.b=parseInt(Du.charAt(4)+Du.charAt(5),16)/255,this}return _u&&_u.length>0?this.setColorName(_u):this},setColorName:function(_u){var $u=_colorKeywords[_u];return $u!==void 0?this.setHex($u):console.warn("THREE.Color: Unknown color "+_u),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(_u){return this.r=_u.r,this.g=_u.g,this.b=_u.b,this},copyGammaToLinear:function(_u,$u){return $u===void 0&&($u=2),this.r=Math.pow(_u.r,$u),this.g=Math.pow(_u.g,$u),this.b=Math.pow(_u.b,$u),this},copyLinearToGamma:function(_u,$u){$u===void 0&&($u=2);var Tu=$u>0?1/$u:1;return this.r=Math.pow(_u.r,Tu),this.g=Math.pow(_u.g,Tu),this.b=Math.pow(_u.b,Tu),this},convertGammaToLinear:function(_u){return this.copyGammaToLinear(this,_u),this},convertLinearToGamma:function(_u){return this.copyLinearToGamma(this,_u),this},copySRGBToLinear:function(_u){return this.r=SRGBToLinear(_u.r),this.g=SRGBToLinear(_u.g),this.b=SRGBToLinear(_u.b),this},copyLinearToSRGB:function(_u){return this.r=LinearToSRGB(_u.r),this.g=LinearToSRGB(_u.g),this.b=LinearToSRGB(_u.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(_u){_u===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),_u={h:0,s:0,l:0});var $u=this.r,Tu=this.g,Cu=this.b,Pu=Math.max($u,Tu,Cu),Bu=Math.min($u,Tu,Cu),Lu,Ru,Ou=(Bu+Pu)/2;if(Bu===Pu)Lu=0,Ru=0;else{var Du=Pu-Bu;switch(Ru=Ou<=.5?Du/(Pu+Bu):Du/(2-Pu-Bu),Pu){case $u:Lu=(Tu-Cu)/Du+(Tu<Cu?6:0);break;case Tu:Lu=(Cu-$u)/Du+2;break;case Cu:Lu=($u-Tu)/Du+4;break}Lu/=6}return _u.h=Lu,_u.s=Ru,_u.l=Ou,_u},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(_u,$u,Tu){return this.getHSL(_hslA),_hslA.h+=_u,_hslA.s+=$u,_hslA.l+=Tu,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(_u){return this.r+=_u.r,this.g+=_u.g,this.b+=_u.b,this},addColors:function(_u,$u){return this.r=_u.r+$u.r,this.g=_u.g+$u.g,this.b=_u.b+$u.b,this},addScalar:function(_u){return this.r+=_u,this.g+=_u,this.b+=_u,this},sub:function(_u){return this.r=Math.max(0,this.r-_u.r),this.g=Math.max(0,this.g-_u.g),this.b=Math.max(0,this.b-_u.b),this},multiply:function(_u){return this.r*=_u.r,this.g*=_u.g,this.b*=_u.b,this},multiplyScalar:function(_u){return this.r*=_u,this.g*=_u,this.b*=_u,this},lerp:function(_u,$u){return this.r+=(_u.r-this.r)*$u,this.g+=(_u.g-this.g)*$u,this.b+=(_u.b-this.b)*$u,this},lerpHSL:function(_u,$u){this.getHSL(_hslA),_u.getHSL(_hslB);var Tu=MathUtils.lerp(_hslA.h,_hslB.h,$u),Cu=MathUtils.lerp(_hslA.s,_hslB.s,$u),Pu=MathUtils.lerp(_hslA.l,_hslB.l,$u);return this.setHSL(Tu,Cu,Pu),this},equals:function(_u){return _u.r===this.r&&_u.g===this.g&&_u.b===this.b},fromArray:function(_u,$u){return $u===void 0&&($u=0),this.r=_u[$u],this.g=_u[$u+1],this.b=_u[$u+2],this},toArray:function(_u,$u){return _u===void 0&&(_u=[]),$u===void 0&&($u=0),_u[$u]=this.r,_u[$u+1]=this.g,_u[$u+2]=this.b,_u},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(_u,$u,Tu,Cu,Pu,Bu){this.a=_u,this.b=$u,this.c=Tu,this.normal=Cu&&Cu.isVector3?Cu:new Vector3,this.vertexNormals=Array.isArray(Cu)?Cu:[],this.color=Pu&&Pu.isColor?Pu:new Color,this.vertexColors=Array.isArray(Pu)?Pu:[],this.materialIndex=Bu!==void 0?Bu:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.a=_u.a,this.b=_u.b,this.c=_u.c,this.normal.copy(_u.normal),this.color.copy(_u.color),this.materialIndex=_u.materialIndex;for(var $u=0,Tu=_u.vertexNormals.length;$u<Tu;$u++)this.vertexNormals[$u]=_u.vertexNormals[$u].clone();for(var $u=0,Tu=_u.vertexColors.length;$u<Tu;$u++)this.vertexColors[$u]=_u.vertexColors[$u].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(_u){if(_u!==void 0)for(var $u in _u){var Tu=_u[$u];if(Tu===void 0){console.warn("THREE.Material: '"+$u+"' parameter is undefined.");continue}if($u==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Tu===FlatShading;continue}var Cu=this[$u];if(Cu===void 0){console.warn("THREE."+this.type+": '"+$u+"' is not a property of this material.");continue}Cu&&Cu.isColor?Cu.set(Tu):Cu&&Cu.isVector3&&Tu&&Tu.isVector3?Cu.copy(Tu):this[$u]=Tu}},toJSON:function(_u){var $u=_u===void 0||typeof _u=="string";$u&&(_u={textures:{},images:{}});var Tu={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Tu.uuid=this.uuid,Tu.type=this.type,this.name!==""&&(Tu.name=this.name),this.color&&this.color.isColor&&(Tu.color=this.color.getHex()),this.roughness!==void 0&&(Tu.roughness=this.roughness),this.metalness!==void 0&&(Tu.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Tu.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Tu.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Tu.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Tu.specular=this.specular.getHex()),this.shininess!==void 0&&(Tu.shininess=this.shininess),this.clearcoat!==void 0&&(Tu.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Tu.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Tu.clearcoatMap=this.clearcoatMap.toJSON(_u).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Tu.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_u).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Tu.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_u).uuid,Tu.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Tu.map=this.map.toJSON(_u).uuid),this.matcap&&this.matcap.isTexture&&(Tu.matcap=this.matcap.toJSON(_u).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Tu.alphaMap=this.alphaMap.toJSON(_u).uuid),this.lightMap&&this.lightMap.isTexture&&(Tu.lightMap=this.lightMap.toJSON(_u).uuid),this.aoMap&&this.aoMap.isTexture&&(Tu.aoMap=this.aoMap.toJSON(_u).uuid,Tu.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Tu.bumpMap=this.bumpMap.toJSON(_u).uuid,Tu.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Tu.normalMap=this.normalMap.toJSON(_u).uuid,Tu.normalMapType=this.normalMapType,Tu.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Tu.displacementMap=this.displacementMap.toJSON(_u).uuid,Tu.displacementScale=this.displacementScale,Tu.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Tu.roughnessMap=this.roughnessMap.toJSON(_u).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Tu.metalnessMap=this.metalnessMap.toJSON(_u).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Tu.emissiveMap=this.emissiveMap.toJSON(_u).uuid),this.specularMap&&this.specularMap.isTexture&&(Tu.specularMap=this.specularMap.toJSON(_u).uuid),this.envMap&&this.envMap.isTexture&&(Tu.envMap=this.envMap.toJSON(_u).uuid,Tu.reflectivity=this.reflectivity,Tu.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Tu.combine=this.combine),this.envMapIntensity!==void 0&&(Tu.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Tu.gradientMap=this.gradientMap.toJSON(_u).uuid),this.size!==void 0&&(Tu.size=this.size),this.sizeAttenuation!==void 0&&(Tu.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Tu.blending=this.blending),this.flatShading===!0&&(Tu.flatShading=this.flatShading),this.side!==FrontSide&&(Tu.side=this.side),this.vertexColors&&(Tu.vertexColors=!0),this.opacity<1&&(Tu.opacity=this.opacity),this.transparent===!0&&(Tu.transparent=this.transparent),Tu.depthFunc=this.depthFunc,Tu.depthTest=this.depthTest,Tu.depthWrite=this.depthWrite,Tu.stencilWrite=this.stencilWrite,Tu.stencilWriteMask=this.stencilWriteMask,Tu.stencilFunc=this.stencilFunc,Tu.stencilRef=this.stencilRef,Tu.stencilFuncMask=this.stencilFuncMask,Tu.stencilFail=this.stencilFail,Tu.stencilZFail=this.stencilZFail,Tu.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Tu.rotation=this.rotation),this.polygonOffset===!0&&(Tu.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Tu.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Tu.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Tu.linewidth=this.linewidth),this.dashSize!==void 0&&(Tu.dashSize=this.dashSize),this.gapSize!==void 0&&(Tu.gapSize=this.gapSize),this.scale!==void 0&&(Tu.scale=this.scale),this.dithering===!0&&(Tu.dithering=!0),this.alphaTest>0&&(Tu.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Tu.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Tu.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Tu.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Tu.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Tu.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Tu.morphTargets=!0),this.morphNormals===!0&&(Tu.morphNormals=!0),this.skinning===!0&&(Tu.skinning=!0),this.visible===!1&&(Tu.visible=!1),this.toneMapped===!1&&(Tu.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Tu.userData=this.userData);function Cu(Lu){var Ru=[];for(var Ou in Lu){var Du=Lu[Ou];delete Du.metadata,Ru.push(Du)}return Ru}if($u){var Pu=Cu(_u.textures),Bu=Cu(_u.images);Pu.length>0&&(Tu.textures=Pu),Bu.length>0&&(Tu.images=Bu)}return Tu},clone:function(){return new this.constructor().copy(this)},copy:function(_u){this.name=_u.name,this.fog=_u.fog,this.blending=_u.blending,this.side=_u.side,this.flatShading=_u.flatShading,this.vertexColors=_u.vertexColors,this.opacity=_u.opacity,this.transparent=_u.transparent,this.blendSrc=_u.blendSrc,this.blendDst=_u.blendDst,this.blendEquation=_u.blendEquation,this.blendSrcAlpha=_u.blendSrcAlpha,this.blendDstAlpha=_u.blendDstAlpha,this.blendEquationAlpha=_u.blendEquationAlpha,this.depthFunc=_u.depthFunc,this.depthTest=_u.depthTest,this.depthWrite=_u.depthWrite,this.stencilWriteMask=_u.stencilWriteMask,this.stencilFunc=_u.stencilFunc,this.stencilRef=_u.stencilRef,this.stencilFuncMask=_u.stencilFuncMask,this.stencilFail=_u.stencilFail,this.stencilZFail=_u.stencilZFail,this.stencilZPass=_u.stencilZPass,this.stencilWrite=_u.stencilWrite;var $u=_u.clippingPlanes,Tu=null;if($u!==null){var Cu=$u.length;Tu=new Array(Cu);for(var Pu=0;Pu!==Cu;++Pu)Tu[Pu]=$u[Pu].clone()}return this.clippingPlanes=Tu,this.clipIntersection=_u.clipIntersection,this.clipShadows=_u.clipShadows,this.shadowSide=_u.shadowSide,this.colorWrite=_u.colorWrite,this.precision=_u.precision,this.polygonOffset=_u.polygonOffset,this.polygonOffsetFactor=_u.polygonOffsetFactor,this.polygonOffsetUnits=_u.polygonOffsetUnits,this.dithering=_u.dithering,this.alphaTest=_u.alphaTest,this.premultipliedAlpha=_u.premultipliedAlpha,this.visible=_u.visible,this.toneMapped=_u.toneMapped,this.userData=JSON.parse(JSON.stringify(_u.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});function MeshBasicMaterial(_u){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(_u)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(_u,$u,Tu){if(Array.isArray(_u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=_u,this.itemSize=$u,this.count=_u!==void 0?_u.length/$u:0,this.normalized=Tu===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.name=_u.name,this.array=new _u.array.constructor(_u.array),this.itemSize=_u.itemSize,this.count=_u.count,this.normalized=_u.normalized,this.usage=_u.usage,this},copyAt:function(_u,$u,Tu){_u*=this.itemSize,Tu*=$u.itemSize;for(var Cu=0,Pu=this.itemSize;Cu<Pu;Cu++)this.array[_u+Cu]=$u.array[Tu+Cu];return this},copyArray:function(_u){return this.array.set(_u),this},copyColorsArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Bu===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Cu),Bu=new Color),$u[Tu++]=Bu.r,$u[Tu++]=Bu.g,$u[Tu++]=Bu.b}return this},copyVector2sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Bu===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Cu),Bu=new Vector2),$u[Tu++]=Bu.x,$u[Tu++]=Bu.y}return this},copyVector3sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Bu===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Cu),Bu=new Vector3),$u[Tu++]=Bu.x,$u[Tu++]=Bu.y,$u[Tu++]=Bu.z}return this},copyVector4sArray:function(_u){for(var $u=this.array,Tu=0,Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Bu===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Cu),Bu=new Vector4),$u[Tu++]=Bu.x,$u[Tu++]=Bu.y,$u[Tu++]=Bu.z,$u[Tu++]=Bu.w}return this},applyMatrix3:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix3(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyMatrix4(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.applyNormalMatrix(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(_u){for(var $u=0,Tu=this.count;$u<Tu;$u++)_vector$3.x=this.getX($u),_vector$3.y=this.getY($u),_vector$3.z=this.getZ($u),_vector$3.transformDirection(_u),this.setXYZ($u,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},getX:function(_u){return this.array[_u*this.itemSize]},setX:function(_u,$u){return this.array[_u*this.itemSize]=$u,this},getY:function(_u){return this.array[_u*this.itemSize+1]},setY:function(_u,$u){return this.array[_u*this.itemSize+1]=$u,this},getZ:function(_u){return this.array[_u*this.itemSize+2]},setZ:function(_u,$u){return this.array[_u*this.itemSize+2]=$u,this},getW:function(_u){return this.array[_u*this.itemSize+3]},setW:function(_u,$u){return this.array[_u*this.itemSize+3]=$u,this},setXY:function(_u,$u,Tu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this},setXYZ:function(_u,$u,Tu,Cu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this.array[_u+2]=Cu,this},setXYZW:function(_u,$u,Tu,Cu,Pu){return _u*=this.itemSize,this.array[_u+0]=$u,this.array[_u+1]=Tu,this.array[_u+2]=Cu,this.array[_u+3]=Pu,this},onUpload:function(_u){return this.onUploadCallback=_u,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int8Array(_u),$u,Tu)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint8Array(_u),$u,Tu)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint8ClampedArray(_u),$u,Tu)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int16Array(_u),$u,Tu)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint16Array(_u),$u,Tu)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Int32Array(_u),$u,Tu)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Uint32Array(_u),$u,Tu)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Float32Array(_u),$u,Tu)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(_u,$u,Tu){BufferAttribute.call(this,new Float64Array(_u),$u,Tu)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(_u){for(var $u,Tu=[],Cu=void 0,Pu=_u.faces,Bu=0;Bu<Pu.length;Bu++){var Lu=Pu[Bu];Lu.materialIndex!==Cu&&(Cu=Lu.materialIndex,$u!==void 0&&($u.count=Bu*3-$u.start,Tu.push($u)),$u={start:Bu*3,materialIndex:Cu})}$u!==void 0&&($u.count=Bu*3-$u.start,Tu.push($u)),this.groups=Tu},fromGeometry:function(_u){var $u=_u.faces,Tu=_u.vertices,Cu=_u.faceVertexUvs,Pu=Cu[0]&&Cu[0].length>0,Bu=Cu[1]&&Cu[1].length>0,Lu=_u.morphTargets,Ru=Lu.length,Ou;if(Ru>0){Ou=[];for(var Du=0;Du<Ru;Du++)Ou[Du]={name:Lu[Du].name,data:[]};this.morphTargets.position=Ou}var Fu=_u.morphNormals,Vu=Fu.length,ku;if(Vu>0){ku=[];for(var Du=0;Du<Vu;Du++)ku[Du]={name:Fu[Du].name,data:[]};this.morphTargets.normal=ku}var Nu=_u.skinIndices,Gu=_u.skinWeights,ju=Nu.length===Tu.length,Hu=Gu.length===Tu.length;Tu.length>0&&$u.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Du=0;Du<$u.length;Du++){var Uu=$u[Du];this.vertices.push(Tu[Uu.a],Tu[Uu.b],Tu[Uu.c]);var zu=Uu.vertexNormals;if(zu.length===3)this.normals.push(zu[0],zu[1],zu[2]);else{var Wu=Uu.normal;this.normals.push(Wu,Wu,Wu)}var Qu=Uu.vertexColors;if(Qu.length===3)this.colors.push(Qu[0],Qu[1],Qu[2]);else{var Ku=Uu.color;this.colors.push(Ku,Ku,Ku)}if(Pu===!0){var Yu=Cu[0][Du];Yu!==void 0?this.uvs.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Du),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Bu===!0){var Yu=Cu[1][Du];Yu!==void 0?this.uvs2.push(Yu[0],Yu[1],Yu[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Du),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Xc=0;Xc<Ru;Xc++){var _d=Lu[Xc].vertices;Ou[Xc].data.push(_d[Uu.a],_d[Uu.b],_d[Uu.c])}for(var Xc=0;Xc<Vu;Xc++){var _f=Fu[Xc].vertexNormals[Du];ku[Xc].data.push(_f.a,_f.b,_f.c)}ju&&this.skinIndices.push(Nu[Uu.a],Nu[Uu.b],Nu[Uu.c]),Hu&&this.skinWeights.push(Gu[Uu.a],Gu[Uu.b],Gu[Uu.c])}return this.computeGroups(_u),this.verticesNeedUpdate=_u.verticesNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this}});function arrayMax(_u){if(_u.length===0)return-1/0;let $u=_u[0];for(let Tu=1,Cu=_u.length;Tu<Cu;++Tu)_u[Tu]>$u&&($u=_u[Tu]);return $u}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(_u){Array.isArray(_u)?this.index=new(arrayMax(_u)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(_u,1):this.index=_u},getAttribute:function(_u){return this.attributes[_u]},setAttribute:function(_u,$u){return this.attributes[_u]=$u,this},deleteAttribute:function(_u){return delete this.attributes[_u],this},addGroup:function(_u,$u,Tu){this.groups.push({start:_u,count:$u,materialIndex:Tu!==void 0?Tu:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(_u,$u){this.drawRange.start=_u,this.drawRange.count=$u},applyMatrix4:function(_u){var $u=this.attributes.position;$u!==void 0&&($u.applyMatrix4(_u),$u.needsUpdate=!0);var Tu=this.attributes.normal;if(Tu!==void 0){var Cu=new Matrix3().getNormalMatrix(_u);Tu.applyNormalMatrix(Cu),Tu.needsUpdate=!0}var Pu=this.attributes.tangent;return Pu!==void 0&&(Pu.transformDirection(_u),Pu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(_u){return _m1$2.makeRotationX(_u),this.applyMatrix4(_m1$2),this},rotateY:function(_u){return _m1$2.makeRotationY(_u),this.applyMatrix4(_m1$2),this},rotateZ:function(_u){return _m1$2.makeRotationZ(_u),this.applyMatrix4(_m1$2),this},translate:function(_u,$u,Tu){return _m1$2.makeTranslation(_u,$u,Tu),this.applyMatrix4(_m1$2),this},scale:function(_u,$u,Tu){return _m1$2.makeScale(_u,$u,Tu),this.applyMatrix4(_m1$2),this},lookAt:function(_u){return _obj.lookAt(_u),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(_u){var $u=_u.geometry;if(_u.isPoints||_u.isLine){var Tu=new Float32BufferAttribute($u.vertices.length*3,3),Cu=new Float32BufferAttribute($u.colors.length*3,3);if(this.setAttribute("position",Tu.copyVector3sArray($u.vertices)),this.setAttribute("color",Cu.copyColorsArray($u.colors)),$u.lineDistances&&$u.lineDistances.length===$u.vertices.length){var Pu=new Float32BufferAttribute($u.lineDistances.length,1);this.setAttribute("lineDistance",Pu.copyArray($u.lineDistances))}$u.boundingSphere!==null&&(this.boundingSphere=$u.boundingSphere.clone()),$u.boundingBox!==null&&(this.boundingBox=$u.boundingBox.clone())}else _u.isMesh&&$u&&$u.isGeometry&&this.fromGeometry($u);return this},setFromPoints:function(_u){for(var $u=[],Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.push(Pu.x,Pu.y,Pu.z||0)}return this.setAttribute("position",new Float32BufferAttribute($u,3)),this},updateFromObject:function(_u){var $u=_u.geometry;if(_u.isMesh){var Tu=$u.__directGeometry;if($u.elementsNeedUpdate===!0&&(Tu=void 0,$u.elementsNeedUpdate=!1),Tu===void 0)return this.fromGeometry($u);Tu.verticesNeedUpdate=$u.verticesNeedUpdate,Tu.normalsNeedUpdate=$u.normalsNeedUpdate,Tu.colorsNeedUpdate=$u.colorsNeedUpdate,Tu.uvsNeedUpdate=$u.uvsNeedUpdate,Tu.groupsNeedUpdate=$u.groupsNeedUpdate,$u.verticesNeedUpdate=!1,$u.normalsNeedUpdate=!1,$u.colorsNeedUpdate=!1,$u.uvsNeedUpdate=!1,$u.groupsNeedUpdate=!1,$u=Tu}var Cu;return $u.verticesNeedUpdate===!0&&(Cu=this.attributes.position,Cu!==void 0&&(Cu.copyVector3sArray($u.vertices),Cu.needsUpdate=!0),$u.verticesNeedUpdate=!1),$u.normalsNeedUpdate===!0&&(Cu=this.attributes.normal,Cu!==void 0&&(Cu.copyVector3sArray($u.normals),Cu.needsUpdate=!0),$u.normalsNeedUpdate=!1),$u.colorsNeedUpdate===!0&&(Cu=this.attributes.color,Cu!==void 0&&(Cu.copyColorsArray($u.colors),Cu.needsUpdate=!0),$u.colorsNeedUpdate=!1),$u.uvsNeedUpdate&&(Cu=this.attributes.uv,Cu!==void 0&&(Cu.copyVector2sArray($u.uvs),Cu.needsUpdate=!0),$u.uvsNeedUpdate=!1),$u.lineDistancesNeedUpdate&&(Cu=this.attributes.lineDistance,Cu!==void 0&&(Cu.copyArray($u.lineDistances),Cu.needsUpdate=!0),$u.lineDistancesNeedUpdate=!1),$u.groupsNeedUpdate&&($u.computeGroups(_u.geometry),this.groups=$u.groups,$u.groupsNeedUpdate=!1),this},fromGeometry:function(_u){return _u.__directGeometry=new DirectGeometry().fromGeometry(_u),this.fromDirectGeometry(_u.__directGeometry)},fromDirectGeometry:function(_u){var $u=new Float32Array(_u.vertices.length*3);if(this.setAttribute("position",new BufferAttribute($u,3).copyVector3sArray(_u.vertices)),_u.normals.length>0){var Tu=new Float32Array(_u.normals.length*3);this.setAttribute("normal",new BufferAttribute(Tu,3).copyVector3sArray(_u.normals))}if(_u.colors.length>0){var Cu=new Float32Array(_u.colors.length*3);this.setAttribute("color",new BufferAttribute(Cu,3).copyColorsArray(_u.colors))}if(_u.uvs.length>0){var Pu=new Float32Array(_u.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Pu,2).copyVector2sArray(_u.uvs))}if(_u.uvs2.length>0){var Bu=new Float32Array(_u.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Bu,2).copyVector2sArray(_u.uvs2))}this.groups=_u.groups;for(var Lu in _u.morphTargets){for(var Ru=[],Ou=_u.morphTargets[Lu],Du=0,Fu=Ou.length;Du<Fu;Du++){var Vu=Ou[Du],ku=new Float32BufferAttribute(Vu.data.length*3,3);ku.name=Vu.name,Ru.push(ku.copyVector3sArray(Vu.data))}this.morphAttributes[Lu]=Ru}if(_u.skinIndices.length>0){var Nu=new Float32BufferAttribute(_u.skinIndices.length*4,4);this.setAttribute("skinIndex",Nu.copyVector4sArray(_u.skinIndices))}if(_u.skinWeights.length>0){var Gu=new Float32BufferAttribute(_u.skinWeights.length*4,4);this.setAttribute("skinWeight",Gu.copyVector4sArray(_u.skinWeights))}return _u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u!==void 0){if(this.boundingBox.setFromBufferAttribute(_u),$u)for(var Tu=0,Cu=$u.length;Tu<Cu;Tu++){var Pu=$u[Tu];_box$2.setFromBufferAttribute(Pu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var _u=this.attributes.position,$u=this.morphAttributes.position;if(_u){var Tu=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_u),$u)for(var Cu=0,Pu=$u.length;Cu<Pu;Cu++){var Bu=$u[Cu];_boxMorphTargets.setFromBufferAttribute(Bu),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Tu);for(var Lu=0,Cu=0,Pu=_u.count;Cu<Pu;Cu++)_vector$4.fromBufferAttribute(_u,Cu),Lu=Math.max(Lu,Tu.distanceToSquared(_vector$4));if($u)for(var Cu=0,Pu=$u.length;Cu<Pu;Cu++)for(var Bu=$u[Cu],Ru=this.morphTargetsRelative,Ou=0,Du=Bu.count;Ou<Du;Ou++)_vector$4.fromBufferAttribute(Bu,Ou),Ru&&(_offset.fromBufferAttribute(_u,Ou),_vector$4.add(_offset)),Lu=Math.max(Lu,Tu.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Lu),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var _u=this.index,$u=this.attributes;if($u.position){var Tu=$u.position.array;if($u.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Tu.length),3));else for(var Cu=$u.normal.array,Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Cu[Pu]=0;var Lu=$u.normal.array,Ru,Ou,Du,Fu=new Vector3,Vu=new Vector3,ku=new Vector3,Nu=new Vector3,Gu=new Vector3;if(_u)for(var ju=_u.array,Pu=0,Bu=_u.count;Pu<Bu;Pu+=3)Ru=ju[Pu+0]*3,Ou=ju[Pu+1]*3,Du=ju[Pu+2]*3,Fu.fromArray(Tu,Ru),Vu.fromArray(Tu,Ou),ku.fromArray(Tu,Du),Nu.subVectors(ku,Vu),Gu.subVectors(Fu,Vu),Nu.cross(Gu),Lu[Ru]+=Nu.x,Lu[Ru+1]+=Nu.y,Lu[Ru+2]+=Nu.z,Lu[Ou]+=Nu.x,Lu[Ou+1]+=Nu.y,Lu[Ou+2]+=Nu.z,Lu[Du]+=Nu.x,Lu[Du+1]+=Nu.y,Lu[Du+2]+=Nu.z;else for(var Pu=0,Bu=Tu.length;Pu<Bu;Pu+=9)Fu.fromArray(Tu,Pu),Vu.fromArray(Tu,Pu+3),ku.fromArray(Tu,Pu+6),Nu.subVectors(ku,Vu),Gu.subVectors(Fu,Vu),Nu.cross(Gu),Lu[Pu]=Nu.x,Lu[Pu+1]=Nu.y,Lu[Pu+2]=Nu.z,Lu[Pu+3]=Nu.x,Lu[Pu+4]=Nu.y,Lu[Pu+5]=Nu.z,Lu[Pu+6]=Nu.x,Lu[Pu+7]=Nu.y,Lu[Pu+8]=Nu.z;this.normalizeNormals(),$u.normal.needsUpdate=!0}},merge:function(_u,$u){if(!(_u&&_u.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",_u);return}$u===void 0&&($u=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Tu=this.attributes;for(var Cu in Tu)if(_u.attributes[Cu]!==void 0)for(var Pu=Tu[Cu],Bu=Pu.array,Lu=_u.attributes[Cu],Ru=Lu.array,Ou=Lu.itemSize*$u,Du=Math.min(Ru.length,Bu.length-Ou),Fu=0,Vu=Ou;Fu<Du;Fu++,Vu++)Bu[Vu]=Ru[Fu];return this},normalizeNormals:function(){for(var _u=this.attributes.normal,$u=0,Tu=_u.count;$u<Tu;$u++)_vector$4.x=_u.getX($u),_vector$4.y=_u.getY($u),_vector$4.z=_u.getZ($u),_vector$4.normalize(),_u.setXYZ($u,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function _u(ju,Hu){for(var Uu=ju.array,zu=ju.itemSize,Wu=ju.normalized,Qu=new Uu.constructor(Hu.length*zu),Ku=0,Yu=0,Xc=0,_d=Hu.length;Xc<_d;Xc++){Ku=Hu[Xc]*zu;for(var _f=0;_f<zu;_f++)Qu[Yu++]=Uu[Ku++]}return new BufferAttribute(Qu,zu,Wu)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var $u=new BufferGeometry,Tu=this.index.array,Cu=this.attributes;for(var Pu in Cu){var Bu=Cu[Pu],Lu=_u(Bu,Tu);$u.setAttribute(Pu,Lu)}var Ru=this.morphAttributes;for(Pu in Ru){for(var Ou=[],Du=Ru[Pu],Fu=0,Vu=Du.length;Fu<Vu;Fu++){var Bu=Du[Fu],Lu=_u(Bu,Tu);Ou.push(Lu)}$u.morphAttributes[Pu]=Ou}$u.morphTargetsRelative=this.morphTargetsRelative;for(var ku=this.groups,Fu=0,Nu=ku.length;Fu<Nu;Fu++){var Gu=ku[Fu];$u.addGroup(Gu.start,Gu.count,Gu.materialIndex)}return $u},toJSON:function(){var _u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),Object.keys(this.userData).length>0&&(_u.userData=this.userData),this.parameters!==void 0){var $u=this.parameters;for(var Tu in $u)$u[Tu]!==void 0&&(_u[Tu]=$u[Tu]);return _u}_u.data={attributes:{}};var Cu=this.index;Cu!==null&&(_u.data.index={type:Cu.array.constructor.name,array:Array.prototype.slice.call(Cu.array)});var Pu=this.attributes;for(var Tu in Pu){var Bu=Pu[Tu],Lu=Bu.toJSON();Bu.name!==""&&(Lu.name=Bu.name),_u.data.attributes[Tu]=Lu}var Ru={},Ou=!1;for(var Tu in this.morphAttributes){for(var Du=this.morphAttributes[Tu],Fu=[],Vu=0,ku=Du.length;Vu<ku;Vu++){var Bu=Du[Vu],Lu=Bu.toJSON();Bu.name!==""&&(Lu.name=Bu.name),Fu.push(Lu)}Fu.length>0&&(Ru[Tu]=Fu,Ou=!0)}Ou&&(_u.data.morphAttributes=Ru,_u.data.morphTargetsRelative=this.morphTargetsRelative);var Nu=this.groups;Nu.length>0&&(_u.data.groups=JSON.parse(JSON.stringify(Nu)));var Gu=this.boundingSphere;return Gu!==null&&(_u.data.boundingSphere={center:Gu.center.toArray(),radius:Gu.radius}),_u},clone:function(){return new BufferGeometry().copy(this)},copy:function(_u){var $u,Tu,Cu;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Pu=_u.index;Pu!==null&&this.setIndex(Pu.clone());var Bu=_u.attributes;for($u in Bu){var Lu=Bu[$u];this.setAttribute($u,Lu.clone())}var Ru=_u.morphAttributes;for($u in Ru){var Ou=[],Du=Ru[$u];for(Tu=0,Cu=Du.length;Tu<Cu;Tu++)Ou.push(Du[Tu].clone());this.morphAttributes[$u]=Ou}this.morphTargetsRelative=_u.morphTargetsRelative;var Fu=_u.groups;for(Tu=0,Cu=Fu.length;Tu<Cu;Tu++){var Vu=Fu[Tu];this.addGroup(Vu.start,Vu.count,Vu.materialIndex)}var ku=_u.boundingBox;ku!==null&&(this.boundingBox=ku.clone());var Nu=_u.boundingSphere;return Nu!==null&&(this.boundingSphere=Nu.clone()),this.drawRange.start=_u.drawRange.start,this.drawRange.count=_u.drawRange.count,this.userData=_u.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(_u,$u){Object3D.call(this),this.type="Mesh",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_u.morphTargetInfluences.slice()),_u.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_u.morphTargetDictionary)),this},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Bu=Object.keys(Pu);if(Bu.length>0){var Lu=Pu[Bu[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Ru=_u.morphTargets;Ru!==void 0&&Ru.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(_u,$u){var Tu=this.geometry,Cu=this.material,Pu=this.matrixWorld;if(Cu!==void 0&&(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere.copy(Tu.boundingSphere),_sphere.applyMatrix4(Pu),_u.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Pu),_ray.copy(_u.ray).applyMatrix4(_inverseMatrix),!(Tu.boundingBox!==null&&_ray.intersectsBox(Tu.boundingBox)===!1)))){var Bu;if(Tu.isBufferGeometry){var Lu,Ru,Ou,Du=Tu.index,Fu=Tu.attributes.position,Vu=Tu.morphAttributes.position,ku=Tu.morphTargetsRelative,Nu=Tu.attributes.uv,Gu=Tu.attributes.uv2,ju=Tu.groups,Hu=Tu.drawRange,Uu,zu,Wu,Qu,Ku,Yu,Xc,_d;if(Du!==null)if(Array.isArray(Cu))for(Uu=0,Wu=ju.length;Uu<Wu;Uu++)for(Ku=ju[Uu],Yu=Cu[Ku.materialIndex],Xc=Math.max(Ku.start,Hu.start),_d=Math.min(Ku.start+Ku.count,Hu.start+Hu.count),zu=Xc,Qu=_d;zu<Qu;zu+=3)Lu=Du.getX(zu),Ru=Du.getX(zu+1),Ou=Du.getX(zu+2),Bu=checkBufferGeometryIntersection(this,Yu,_u,_ray,Fu,Vu,ku,Nu,Gu,Lu,Ru,Ou),Bu&&(Bu.faceIndex=Math.floor(zu/3),Bu.face.materialIndex=Ku.materialIndex,$u.push(Bu));else for(Xc=Math.max(0,Hu.start),_d=Math.min(Du.count,Hu.start+Hu.count),Uu=Xc,Wu=_d;Uu<Wu;Uu+=3)Lu=Du.getX(Uu),Ru=Du.getX(Uu+1),Ou=Du.getX(Uu+2),Bu=checkBufferGeometryIntersection(this,Cu,_u,_ray,Fu,Vu,ku,Nu,Gu,Lu,Ru,Ou),Bu&&(Bu.faceIndex=Math.floor(Uu/3),$u.push(Bu));else if(Fu!==void 0)if(Array.isArray(Cu))for(Uu=0,Wu=ju.length;Uu<Wu;Uu++)for(Ku=ju[Uu],Yu=Cu[Ku.materialIndex],Xc=Math.max(Ku.start,Hu.start),_d=Math.min(Ku.start+Ku.count,Hu.start+Hu.count),zu=Xc,Qu=_d;zu<Qu;zu+=3)Lu=zu,Ru=zu+1,Ou=zu+2,Bu=checkBufferGeometryIntersection(this,Yu,_u,_ray,Fu,Vu,ku,Nu,Gu,Lu,Ru,Ou),Bu&&(Bu.faceIndex=Math.floor(zu/3),Bu.face.materialIndex=Ku.materialIndex,$u.push(Bu));else for(Xc=Math.max(0,Hu.start),_d=Math.min(Fu.count,Hu.start+Hu.count),Uu=Xc,Wu=_d;Uu<Wu;Uu+=3)Lu=Uu,Ru=Uu+1,Ou=Uu+2,Bu=checkBufferGeometryIntersection(this,Cu,_u,_ray,Fu,Vu,ku,Nu,Gu,Lu,Ru,Ou),Bu&&(Bu.faceIndex=Math.floor(Uu/3),$u.push(Bu))}else if(Tu.isGeometry){var _f,qu,Xu,Zu=Array.isArray(Cu),_c=Tu.vertices,Ju=Tu.faces,_h,ep=Tu.faceVertexUvs[0];ep.length>0&&(_h=ep);for(var tp=0,rp=Ju.length;tp<rp;tp++){var dp=Ju[tp],cp=Zu?Cu[dp.materialIndex]:Cu;if(cp!==void 0&&(_f=_c[dp.a],qu=_c[dp.b],Xu=_c[dp.c],Bu=checkIntersection(this,cp,_u,_ray,_f,qu,Xu,_intersectionPoint),Bu)){if(_h&&_h[tp]){var Sp=_h[tp];_uvA.copy(Sp[0]),_uvB.copy(Sp[1]),_uvC.copy(Sp[2]),Bu.uv=Triangle.getUV(_intersectionPoint,_f,qu,Xu,_uvA,_uvB,_uvC,new Vector2)}Bu.face=dp,Bu.faceIndex=tp,$u.push(Bu)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){var Ou;if($u.side===BackSide?Ou=Cu.intersectTriangle(Lu,Bu,Pu,!0,Ru):Ou=Cu.intersectTriangle(Pu,Bu,Lu,$u.side!==DoubleSide,Ru),Ou===null)return null;_intersectionPointWorld.copy(Ru),_intersectionPointWorld.applyMatrix4(_u.matrixWorld);var Du=Tu.ray.origin.distanceTo(_intersectionPointWorld);return Du<Tu.near||Du>Tu.far?null:{distance:Du,point:_intersectionPointWorld.clone(),object:_u}}function checkBufferGeometryIntersection(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu){_vA.fromBufferAttribute(Pu,Du),_vB.fromBufferAttribute(Pu,Fu),_vC.fromBufferAttribute(Pu,Vu);var ku=_u.morphTargetInfluences;if($u.morphTargets&&Bu&&ku){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Nu=0,Gu=Bu.length;Nu<Gu;Nu++){var ju=ku[Nu],Hu=Bu[Nu];ju!==0&&(_tempA.fromBufferAttribute(Hu,Du),_tempB.fromBufferAttribute(Hu,Fu),_tempC.fromBufferAttribute(Hu,Vu),Lu?(_morphA.addScaledVector(_tempA,ju),_morphB.addScaledVector(_tempB,ju),_morphC.addScaledVector(_tempC,ju)):(_morphA.addScaledVector(_tempA.sub(_vA),ju),_morphB.addScaledVector(_tempB.sub(_vB),ju),_morphC.addScaledVector(_tempC.sub(_vC),ju)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}_u.isSkinnedMesh&&(_u.boneTransform(Du,_vA),_u.boneTransform(Fu,_vB),_u.boneTransform(Vu,_vC));var Uu=checkIntersection(_u,$u,Tu,Cu,_vA,_vB,_vC,_intersectionPoint);if(Uu){Ru&&(_uvA.fromBufferAttribute(Ru,Du),_uvB.fromBufferAttribute(Ru,Fu),_uvC.fromBufferAttribute(Ru,Vu),Uu.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Ou&&(_uvA.fromBufferAttribute(Ou,Du),_uvB.fromBufferAttribute(Ou,Fu),_uvC.fromBufferAttribute(Ou,Vu),Uu.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var zu=new Face3(Du,Fu,Vu);Triangle.getNormal(_vA,_vB,_vC,zu.normal),Uu.face=zu}return Uu}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(_u){for(var $u=new Matrix3().getNormalMatrix(_u),Tu=0,Cu=this.vertices.length;Tu<Cu;Tu++){var Pu=this.vertices[Tu];Pu.applyMatrix4(_u)}for(var Tu=0,Cu=this.faces.length;Tu<Cu;Tu++){var Bu=this.faces[Tu];Bu.normal.applyMatrix3($u).normalize();for(var Lu=0,Ru=Bu.vertexNormals.length;Lu<Ru;Lu++)Bu.vertexNormals[Lu].applyMatrix3($u).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(_u){return _m1$3.makeRotationX(_u),this.applyMatrix4(_m1$3),this},rotateY:function(_u){return _m1$3.makeRotationY(_u),this.applyMatrix4(_m1$3),this},rotateZ:function(_u){return _m1$3.makeRotationZ(_u),this.applyMatrix4(_m1$3),this},translate:function(_u,$u,Tu){return _m1$3.makeTranslation(_u,$u,Tu),this.applyMatrix4(_m1$3),this},scale:function(_u,$u,Tu){return _m1$3.makeScale(_u,$u,Tu),this.applyMatrix4(_m1$3),this},lookAt:function(_u){return _obj$1.lookAt(_u),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(_u){var $u=this,Tu=_u.index!==null?_u.index.array:void 0,Cu=_u.attributes;if(Cu.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Pu=Cu.position.array,Bu=Cu.normal!==void 0?Cu.normal.array:void 0,Lu=Cu.color!==void 0?Cu.color.array:void 0,Ru=Cu.uv!==void 0?Cu.uv.array:void 0,Ou=Cu.uv2!==void 0?Cu.uv2.array:void 0;Ou!==void 0&&(this.faceVertexUvs[1]=[]);for(var Du=0;Du<Pu.length;Du+=3)$u.vertices.push(new Vector3().fromArray(Pu,Du)),Lu!==void 0&&$u.colors.push(new Color().fromArray(Lu,Du));function Fu(Uu,zu,Wu,Qu){var Ku=Lu===void 0?[]:[$u.colors[Uu].clone(),$u.colors[zu].clone(),$u.colors[Wu].clone()],Yu=Bu===void 0?[]:[new Vector3().fromArray(Bu,Uu*3),new Vector3().fromArray(Bu,zu*3),new Vector3().fromArray(Bu,Wu*3)],Xc=new Face3(Uu,zu,Wu,Yu,Ku,Qu);$u.faces.push(Xc),Ru!==void 0&&$u.faceVertexUvs[0].push([new Vector2().fromArray(Ru,Uu*2),new Vector2().fromArray(Ru,zu*2),new Vector2().fromArray(Ru,Wu*2)]),Ou!==void 0&&$u.faceVertexUvs[1].push([new Vector2().fromArray(Ou,Uu*2),new Vector2().fromArray(Ou,zu*2),new Vector2().fromArray(Ou,Wu*2)])}var Vu=_u.groups;if(Vu.length>0)for(var Du=0;Du<Vu.length;Du++)for(var ku=Vu[Du],Nu=ku.start,Gu=ku.count,ju=Nu,Hu=Nu+Gu;ju<Hu;ju+=3)Tu!==void 0?Fu(Tu[ju],Tu[ju+1],Tu[ju+2],ku.materialIndex):Fu(ju,ju+1,ju+2,ku.materialIndex);else if(Tu!==void 0)for(var Du=0;Du<Tu.length;Du+=3)Fu(Tu[Du],Tu[Du+1],Tu[Du+2]);else for(var Du=0;Du<Pu.length/3;Du+=3)Fu(Du,Du+1,Du+2);return this.computeFaceNormals(),_u.boundingBox!==null&&(this.boundingBox=_u.boundingBox.clone()),_u.boundingSphere!==null&&(this.boundingSphere=_u.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var _u=this.boundingSphere.center,$u=this.boundingSphere.radius,Tu=$u===0?1:1/$u,Cu=new Matrix4;return Cu.set(Tu,0,0,-Tu*_u.x,0,Tu,0,-Tu*_u.y,0,0,Tu,-Tu*_u.z,0,0,0,1),this.applyMatrix4(Cu),this},computeFaceNormals:function(){for(var _u=new Vector3,$u=new Vector3,Tu=0,Cu=this.faces.length;Tu<Cu;Tu++){var Pu=this.faces[Tu],Bu=this.vertices[Pu.a],Lu=this.vertices[Pu.b],Ru=this.vertices[Pu.c];_u.subVectors(Ru,Lu),$u.subVectors(Bu,Lu),_u.cross($u),_u.normalize(),Pu.normal.copy(_u)}},computeVertexNormals:function(_u){_u===void 0&&(_u=!0);var $u,Tu,Cu,Pu,Bu,Lu;for(Lu=new Array(this.vertices.length),$u=0,Tu=this.vertices.length;$u<Tu;$u++)Lu[$u]=new Vector3;if(_u){var Ru,Ou,Du,Fu=new Vector3,Vu=new Vector3;for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Bu=this.faces[Cu],Ru=this.vertices[Bu.a],Ou=this.vertices[Bu.b],Du=this.vertices[Bu.c],Fu.subVectors(Du,Ou),Vu.subVectors(Ru,Ou),Fu.cross(Vu),Lu[Bu.a].add(Fu),Lu[Bu.b].add(Fu),Lu[Bu.c].add(Fu)}else for(this.computeFaceNormals(),Cu=0,Pu=this.faces.length;Cu<Pu;Cu++)Bu=this.faces[Cu],Lu[Bu.a].add(Bu.normal),Lu[Bu.b].add(Bu.normal),Lu[Bu.c].add(Bu.normal);for($u=0,Tu=this.vertices.length;$u<Tu;$u++)Lu[$u].normalize();for(Cu=0,Pu=this.faces.length;Cu<Pu;Cu++){Bu=this.faces[Cu];var ku=Bu.vertexNormals;ku.length===3?(ku[0].copy(Lu[Bu.a]),ku[1].copy(Lu[Bu.b]),ku[2].copy(Lu[Bu.c])):(ku[0]=Lu[Bu.a].clone(),ku[1]=Lu[Bu.b].clone(),ku[2]=Lu[Bu.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var _u,$u,Tu;for(this.computeFaceNormals(),_u=0,$u=this.faces.length;_u<$u;_u++){Tu=this.faces[_u];var Cu=Tu.vertexNormals;Cu.length===3?(Cu[0].copy(Tu.normal),Cu[1].copy(Tu.normal),Cu[2].copy(Tu.normal)):(Cu[0]=Tu.normal.clone(),Cu[1]=Tu.normal.clone(),Cu[2]=Tu.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var _u,$u,Tu,Cu,Pu;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)for(Pu=this.faces[Tu],Pu.__originalFaceNormal?Pu.__originalFaceNormal.copy(Pu.normal):Pu.__originalFaceNormal=Pu.normal.clone(),Pu.__originalVertexNormals||(Pu.__originalVertexNormals=[]),_u=0,$u=Pu.vertexNormals.length;_u<$u;_u++)Pu.__originalVertexNormals[_u]?Pu.__originalVertexNormals[_u].copy(Pu.vertexNormals[_u]):Pu.__originalVertexNormals[_u]=Pu.vertexNormals[_u].clone();var Bu=new Geometry;for(Bu.faces=this.faces,_u=0,$u=this.morphTargets.length;_u<$u;_u++){if(!this.morphNormals[_u]){this.morphNormals[_u]={},this.morphNormals[_u].faceNormals=[],this.morphNormals[_u].vertexNormals=[];var Lu=this.morphNormals[_u].faceNormals,Ru=this.morphNormals[_u].vertexNormals,Du,Fu;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Du=new Vector3,Fu={a:new Vector3,b:new Vector3,c:new Vector3},Lu.push(Du),Ru.push(Fu)}var Ou=this.morphNormals[_u];Bu.vertices=this.morphTargets[_u].vertices,Bu.computeFaceNormals(),Bu.computeVertexNormals();var Du,Fu;for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Pu=this.faces[Tu],Du=Ou.faceNormals[Tu],Fu=Ou.vertexNormals[Tu],Du.copy(Pu.normal),Fu.a.copy(Pu.vertexNormals[0]),Fu.b.copy(Pu.vertexNormals[1]),Fu.c.copy(Pu.vertexNormals[2])}for(Tu=0,Cu=this.faces.length;Tu<Cu;Tu++)Pu=this.faces[Tu],Pu.normal=Pu.__originalFaceNormal,Pu.vertexNormals=Pu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(_u,$u,Tu){if(!(_u&&_u.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",_u);return}var Cu,Pu=this.vertices.length,Bu=this.vertices,Lu=_u.vertices,Ru=this.faces,Ou=_u.faces,Du=this.colors,Fu=_u.colors;Tu===void 0&&(Tu=0),$u!==void 0&&(Cu=new Matrix3().getNormalMatrix($u));for(var Vu=0,ku=Lu.length;Vu<ku;Vu++){var Nu=Lu[Vu],Gu=Nu.clone();$u!==void 0&&Gu.applyMatrix4($u),Bu.push(Gu)}for(var Vu=0,ku=Fu.length;Vu<ku;Vu++)Du.push(Fu[Vu].clone());for(Vu=0,ku=Ou.length;Vu<ku;Vu++){var ju=Ou[Vu],Hu,Uu,zu,Wu=ju.vertexNormals,Qu=ju.vertexColors;Hu=new Face3(ju.a+Pu,ju.b+Pu,ju.c+Pu),Hu.normal.copy(ju.normal),Cu!==void 0&&Hu.normal.applyMatrix3(Cu).normalize();for(var Ku=0,Yu=Wu.length;Ku<Yu;Ku++)Uu=Wu[Ku].clone(),Cu!==void 0&&Uu.applyMatrix3(Cu).normalize(),Hu.vertexNormals.push(Uu);Hu.color.copy(ju.color);for(var Ku=0,Yu=Qu.length;Ku<Yu;Ku++)zu=Qu[Ku],Hu.vertexColors.push(zu.clone());Hu.materialIndex=ju.materialIndex+Tu,Ru.push(Hu)}for(var Vu=0,ku=_u.faceVertexUvs.length;Vu<ku;Vu++){var Xc=_u.faceVertexUvs[Vu];this.faceVertexUvs[Vu]===void 0&&(this.faceVertexUvs[Vu]=[]);for(var Ku=0,Yu=Xc.length;Ku<Yu;Ku++){for(var _d=Xc[Ku],_f=[],qu=0,Xu=_d.length;qu<Xu;qu++)_f.push(_d[qu].clone());this.faceVertexUvs[Vu].push(_f)}}},mergeMesh:function(_u){if(!(_u&&_u.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",_u);return}_u.matrixAutoUpdate&&_u.updateMatrix(),this.merge(_u.geometry,_u.matrix)},mergeVertices:function(){var _u={},$u=[],Tu=[],Cu,Pu,Bu=4,Lu=Math.pow(10,Bu),Ru,Ou,Du,Fu,Vu,ku;for(Ru=0,Ou=this.vertices.length;Ru<Ou;Ru++)Cu=this.vertices[Ru],Pu=Math.round(Cu.x*Lu)+"_"+Math.round(Cu.y*Lu)+"_"+Math.round(Cu.z*Lu),_u[Pu]===void 0?(_u[Pu]=Ru,$u.push(this.vertices[Ru]),Tu[Ru]=$u.length-1):Tu[Ru]=Tu[_u[Pu]];var Nu=[];for(Ru=0,Ou=this.faces.length;Ru<Ou;Ru++){Du=this.faces[Ru],Du.a=Tu[Du.a],Du.b=Tu[Du.b],Du.c=Tu[Du.c],Fu=[Du.a,Du.b,Du.c];for(var Gu=0;Gu<3;Gu++)if(Fu[Gu]===Fu[(Gu+1)%3]){Nu.push(Ru);break}}for(Ru=Nu.length-1;Ru>=0;Ru--){var ju=Nu[Ru];for(this.faces.splice(ju,1),Vu=0,ku=this.faceVertexUvs.length;Vu<ku;Vu++)this.faceVertexUvs[Vu].splice(ju,1)}var Hu=this.vertices.length-$u.length;return this.vertices=$u,Hu},setFromPoints:function(_u){this.vertices=[];for(var $u=0,Tu=_u.length;$u<Tu;$u++){var Cu=_u[$u];this.vertices.push(new Vector3(Cu.x,Cu.y,Cu.z||0))}return this},sortFacesByMaterialIndex:function(){for(var _u=this.faces,$u=_u.length,Tu=0;Tu<$u;Tu++)_u[Tu]._id=Tu;function Cu(Du,Fu){return Du.materialIndex-Fu.materialIndex}_u.sort(Cu);var Pu=this.faceVertexUvs[0],Bu=this.faceVertexUvs[1],Lu,Ru;Pu&&Pu.length===$u&&(Lu=[]),Bu&&Bu.length===$u&&(Ru=[]);for(var Tu=0;Tu<$u;Tu++){var Ou=_u[Tu]._id;Lu&&Lu.push(Pu[Ou]),Ru&&Ru.push(Bu[Ou])}Lu&&(this.faceVertexUvs[0]=Lu),Ru&&(this.faceVertexUvs[1]=Ru)},toJSON:function(){var _u={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(_u.uuid=this.uuid,_u.type=this.type,this.name!==""&&(_u.name=this.name),this.parameters!==void 0){var $u=this.parameters;for(var Tu in $u)$u[Tu]!==void 0&&(_u[Tu]=$u[Tu]);return _u}for(var Cu=[],Pu=0;Pu<this.vertices.length;Pu++){var Bu=this.vertices[Pu];Cu.push(Bu.x,Bu.y,Bu.z)}for(var Lu=[],Ru=[],Ou={},Du=[],Fu={},Vu=[],ku={},Pu=0;Pu<this.faces.length;Pu++){var Nu=this.faces[Pu],Gu=!0,ju=!1,Hu=this.faceVertexUvs[0][Pu]!==void 0,Uu=Nu.normal.length()>0,zu=Nu.vertexNormals.length>0,Wu=Nu.color.r!==1||Nu.color.g!==1||Nu.color.b!==1,Qu=Nu.vertexColors.length>0,Ku=0;if(Ku=_f(Ku,0,0),Ku=_f(Ku,1,Gu),Ku=_f(Ku,2,ju),Ku=_f(Ku,3,Hu),Ku=_f(Ku,4,Uu),Ku=_f(Ku,5,zu),Ku=_f(Ku,6,Wu),Ku=_f(Ku,7,Qu),Lu.push(Ku),Lu.push(Nu.a,Nu.b,Nu.c),Lu.push(Nu.materialIndex),Hu){var Yu=this.faceVertexUvs[0][Pu];Lu.push(Zu(Yu[0]),Zu(Yu[1]),Zu(Yu[2]))}if(Uu&&Lu.push(qu(Nu.normal)),zu){var Xc=Nu.vertexNormals;Lu.push(qu(Xc[0]),qu(Xc[1]),qu(Xc[2]))}if(Wu&&Lu.push(Xu(Nu.color)),Qu){var _d=Nu.vertexColors;Lu.push(Xu(_d[0]),Xu(_d[1]),Xu(_d[2]))}}function _f(_c,Ju,_h){return _h?_c|1<<Ju:_c&~(1<<Ju)}function qu(_c){var Ju=_c.x.toString()+_c.y.toString()+_c.z.toString();return Ou[Ju]!==void 0||(Ou[Ju]=Ru.length/3,Ru.push(_c.x,_c.y,_c.z)),Ou[Ju]}function Xu(_c){var Ju=_c.r.toString()+_c.g.toString()+_c.b.toString();return Fu[Ju]!==void 0||(Fu[Ju]=Du.length,Du.push(_c.getHex())),Fu[Ju]}function Zu(_c){var Ju=_c.x.toString()+_c.y.toString();return ku[Ju]!==void 0||(ku[Ju]=Vu.length/2,Vu.push(_c.x,_c.y)),ku[Ju]}return _u.data={},_u.data.vertices=Cu,_u.data.normals=Ru,Du.length>0&&(_u.data.colors=Du),Vu.length>0&&(_u.data.uvs=[Vu]),_u.data.faces=Lu,_u},clone:function(){return new Geometry().copy(this)},copy:function(_u){var $u,Tu,Cu,Pu,Bu,Lu;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=_u.name;var Ru=_u.vertices;for($u=0,Tu=Ru.length;$u<Tu;$u++)this.vertices.push(Ru[$u].clone());var Ou=_u.colors;for($u=0,Tu=Ou.length;$u<Tu;$u++)this.colors.push(Ou[$u].clone());var Du=_u.faces;for($u=0,Tu=Du.length;$u<Tu;$u++)this.faces.push(Du[$u].clone());for($u=0,Tu=_u.faceVertexUvs.length;$u<Tu;$u++){var Fu=_u.faceVertexUvs[$u];for(this.faceVertexUvs[$u]===void 0&&(this.faceVertexUvs[$u]=[]),Cu=0,Pu=Fu.length;Cu<Pu;Cu++){var Vu=Fu[Cu],ku=[];for(Bu=0,Lu=Vu.length;Bu<Lu;Bu++){var Nu=Vu[Bu];ku.push(Nu.clone())}this.faceVertexUvs[$u].push(ku)}}var Gu=_u.morphTargets;for($u=0,Tu=Gu.length;$u<Tu;$u++){var ju={};if(ju.name=Gu[$u].name,Gu[$u].vertices!==void 0)for(ju.vertices=[],Cu=0,Pu=Gu[$u].vertices.length;Cu<Pu;Cu++)ju.vertices.push(Gu[$u].vertices[Cu].clone());if(Gu[$u].normals!==void 0)for(ju.normals=[],Cu=0,Pu=Gu[$u].normals.length;Cu<Pu;Cu++)ju.normals.push(Gu[$u].normals[Cu].clone());this.morphTargets.push(ju)}var Hu=_u.morphNormals;for($u=0,Tu=Hu.length;$u<Tu;$u++){var Uu={};if(Hu[$u].vertexNormals!==void 0)for(Uu.vertexNormals=[],Cu=0,Pu=Hu[$u].vertexNormals.length;Cu<Pu;Cu++){var zu=Hu[$u].vertexNormals[Cu],Wu={};Wu.a=zu.a.clone(),Wu.b=zu.b.clone(),Wu.c=zu.c.clone(),Uu.vertexNormals.push(Wu)}if(Hu[$u].faceNormals!==void 0)for(Uu.faceNormals=[],Cu=0,Pu=Hu[$u].faceNormals.length;Cu<Pu;Cu++)Uu.faceNormals.push(Hu[$u].faceNormals[Cu].clone());this.morphNormals.push(Uu)}var Qu=_u.skinWeights;for($u=0,Tu=Qu.length;$u<Tu;$u++)this.skinWeights.push(Qu[$u].clone());var Ku=_u.skinIndices;for($u=0,Tu=Ku.length;$u<Tu;$u++)this.skinIndices.push(Ku[$u].clone());var Yu=_u.lineDistances;for($u=0,Tu=Yu.length;$u<Tu;$u++)this.lineDistances.push(Yu[$u]);var Xc=_u.boundingBox;Xc!==null&&(this.boundingBox=Xc.clone());var _d=_u.boundingSphere;return _d!==null&&(this.boundingSphere=_d.clone()),this.elementsNeedUpdate=_u.elementsNeedUpdate,this.verticesNeedUpdate=_u.verticesNeedUpdate,this.uvsNeedUpdate=_u.uvsNeedUpdate,this.normalsNeedUpdate=_u.normalsNeedUpdate,this.colorsNeedUpdate=_u.colorsNeedUpdate,this.lineDistancesNeedUpdate=_u.lineDistancesNeedUpdate,this.groupsNeedUpdate=_u.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor($u,Tu,Cu,Pu,Bu,Lu){super(),this.type="BoxGeometry",this.parameters={width:$u,height:Tu,depth:Cu,widthSegments:Pu,heightSegments:Bu,depthSegments:Lu},this.fromBufferGeometry(new BoxBufferGeometry($u,Tu,Cu,Pu,Bu,Lu)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor($u,Tu,Cu,Pu,Bu,Lu){super(),this.type="BoxBufferGeometry",this.parameters={width:$u,height:Tu,depth:Cu,widthSegments:Pu,heightSegments:Bu,depthSegments:Lu};const Ru=this;$u=$u||1,Tu=Tu||1,Cu=Cu||1,Pu=Math.floor(Pu)||1,Bu=Math.floor(Bu)||1,Lu=Math.floor(Lu)||1;const Ou=[],Du=[],Fu=[],Vu=[];let ku=0,Nu=0;Gu("z","y","x",-1,-1,Cu,Tu,$u,Lu,Bu,0),Gu("z","y","x",1,-1,Cu,Tu,-$u,Lu,Bu,1),Gu("x","z","y",1,1,$u,Cu,Tu,Pu,Lu,2),Gu("x","z","y",1,-1,$u,Cu,-Tu,Pu,Lu,3),Gu("x","y","z",1,-1,$u,Tu,Cu,Pu,Bu,4),Gu("x","y","z",-1,-1,$u,Tu,-Cu,Pu,Bu,5),this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Du,3)),this.setAttribute("normal",new Float32BufferAttribute(Fu,3)),this.setAttribute("uv",new Float32BufferAttribute(Vu,2));function Gu(ju,Hu,Uu,zu,Wu,Qu,Ku,Yu,Xc,_d,_f){const qu=Qu/Xc,Xu=Ku/_d,Zu=Qu/2,_c=Ku/2,Ju=Yu/2,_h=Xc+1,ep=_d+1;let tp=0,rp=0;const dp=new Vector3;for(let cp=0;cp<ep;cp++){const Sp=cp*Xu-_c;for(let yp=0;yp<_h;yp++){const Bp=yp*qu-Zu;dp[ju]=Bp*zu,dp[Hu]=Sp*Wu,dp[Uu]=Ju,Du.push(dp.x,dp.y,dp.z),dp[ju]=0,dp[Hu]=0,dp[Uu]=Yu>0?1:-1,Fu.push(dp.x,dp.y,dp.z),Vu.push(yp/Xc),Vu.push(1-cp/_d),tp+=1}}for(let cp=0;cp<_d;cp++)for(let Sp=0;Sp<Xc;Sp++){const yp=ku+Sp+_h*cp,Bp=ku+Sp+_h*(cp+1),_p=ku+(Sp+1)+_h*(cp+1),Cp=ku+(Sp+1)+_h*cp;Ou.push(yp,Bp,Cp),Ou.push(Bp,_p,Cp),rp+=6}Ru.addGroup(Nu,rp,_f),Nu+=rp,ku+=tp}}}function cloneUniforms(_u){var $u={};for(var Tu in _u){$u[Tu]={};for(var Cu in _u[Tu]){var Pu=_u[Tu][Cu];Pu&&(Pu.isColor||Pu.isMatrix3||Pu.isMatrix4||Pu.isVector2||Pu.isVector3||Pu.isVector4||Pu.isTexture)?$u[Tu][Cu]=Pu.clone():Array.isArray(Pu)?$u[Tu][Cu]=Pu.slice():$u[Tu][Cu]=Pu}}return $u}function mergeUniforms(_u){for(var $u={},Tu=0;Tu<_u.length;Tu++){var Cu=cloneUniforms(_u[Tu]);for(var Pu in Cu)$u[Pu]=Cu[Pu]}return $u}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(_u){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,_u!==void 0&&(_u.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(_u))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.fragmentShader=_u.fragmentShader,this.vertexShader=_u.vertexShader,this.uniforms=cloneUniforms(_u.uniforms),this.defines=Object.assign({},_u.defines),this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.lights=_u.lights,this.clipping=_u.clipping,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.extensions=Object.assign({},_u.extensions),this};ShaderMaterial.prototype.toJSON=function(_u){var $u=Material.prototype.toJSON.call(this,_u);$u.uniforms={};for(var Tu in this.uniforms){var Cu=this.uniforms[Tu],Pu=Cu.value;Pu&&Pu.isTexture?$u.uniforms[Tu]={type:"t",value:Pu.toJSON(_u).uuid}:Pu&&Pu.isColor?$u.uniforms[Tu]={type:"c",value:Pu.getHex()}:Pu&&Pu.isVector2?$u.uniforms[Tu]={type:"v2",value:Pu.toArray()}:Pu&&Pu.isVector3?$u.uniforms[Tu]={type:"v3",value:Pu.toArray()}:Pu&&Pu.isVector4?$u.uniforms[Tu]={type:"v4",value:Pu.toArray()}:Pu&&Pu.isMatrix3?$u.uniforms[Tu]={type:"m3",value:Pu.toArray()}:Pu&&Pu.isMatrix4?$u.uniforms[Tu]={type:"m4",value:Pu.toArray()}:$u.uniforms[Tu]={value:Pu}}Object.keys(this.defines).length>0&&($u.defines=this.defines),$u.vertexShader=this.vertexShader,$u.fragmentShader=this.fragmentShader;var Bu={};for(var Lu in this.extensions)this.extensions[Lu]===!0&&(Bu[Lu]=!0);return Object.keys(Bu).length>0&&($u.extensions=Bu),$u};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(_u,$u){return Object3D.prototype.copy.call(this,_u,$u),this.matrixWorldInverse.copy(_u.matrixWorldInverse),this.projectionMatrix.copy(_u.projectionMatrix),this.projectionMatrixInverse.copy(_u.projectionMatrixInverse),this},getWorldDirection:function(_u){_u===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),_u=new Vector3),this.updateMatrixWorld(!0);var $u=this.matrixWorld.elements;return _u.set(-$u[8],-$u[9],-$u[10]).normalize()},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(_u,$u){Object3D.prototype.updateWorldMatrix.call(this,_u,$u),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(_u,$u,Tu,Cu){Camera.call(this),this.type="PerspectiveCamera",this.fov=_u!==void 0?_u:50,this.zoom=1,this.near=Tu!==void 0?Tu:.1,this.far=Cu!==void 0?Cu:2e3,this.focus=10,this.aspect=$u!==void 0?$u:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.fov=_u.fov,this.zoom=_u.zoom,this.near=_u.near,this.far=_u.far,this.focus=_u.focus,this.aspect=_u.aspect,this.view=_u.view===null?null:Object.assign({},_u.view),this.filmGauge=_u.filmGauge,this.filmOffset=_u.filmOffset,this},setFocalLength:function(_u){var $u=.5*this.getFilmHeight()/_u;this.fov=MathUtils.RAD2DEG*2*Math.atan($u),this.updateProjectionMatrix()},getFocalLength:function(){var _u=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_u},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(_u,$u,Tu,Cu,Pu,Bu){this.aspect=_u/$u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Tu,this.view.offsetY=Cu,this.view.width=Pu,this.view.height=Bu,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=this.near,$u=_u*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Tu=2*$u,Cu=this.aspect*Tu,Pu=-.5*Cu,Bu=this.view;if(this.view!==null&&this.view.enabled){var Lu=Bu.fullWidth,Ru=Bu.fullHeight;Pu+=Bu.offsetX*Cu/Lu,$u-=Bu.offsetY*Tu/Ru,Cu*=Bu.width/Lu,Tu*=Bu.height/Ru}var Ou=this.filmOffset;Ou!==0&&(Pu+=_u*Ou/this.getFilmWidth()),this.projectionMatrix.makePerspective(Pu,Pu+Cu,$u,$u-Tu,_u,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.fov=this.fov,$u.object.zoom=this.zoom,$u.object.near=this.near,$u.object.far=this.far,$u.object.focus=this.focus,$u.object.aspect=this.aspect,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u.object.filmGauge=this.filmGauge,$u.object.filmOffset=this.filmOffset,$u}});var fov=90,aspect=1;function CubeCamera(_u,$u,Tu){if(Object3D.call(this),this.type="CubeCamera",Tu.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Tu;var Cu=new PerspectiveCamera(fov,aspect,_u,$u);Cu.layers=this.layers,Cu.up.set(0,-1,0),Cu.lookAt(new Vector3(1,0,0)),this.add(Cu);var Pu=new PerspectiveCamera(fov,aspect,_u,$u);Pu.layers=this.layers,Pu.up.set(0,-1,0),Pu.lookAt(new Vector3(-1,0,0)),this.add(Pu);var Bu=new PerspectiveCamera(fov,aspect,_u,$u);Bu.layers=this.layers,Bu.up.set(0,0,1),Bu.lookAt(new Vector3(0,1,0)),this.add(Bu);var Lu=new PerspectiveCamera(fov,aspect,_u,$u);Lu.layers=this.layers,Lu.up.set(0,0,-1),Lu.lookAt(new Vector3(0,-1,0)),this.add(Lu);var Ru=new PerspectiveCamera(fov,aspect,_u,$u);Ru.layers=this.layers,Ru.up.set(0,-1,0),Ru.lookAt(new Vector3(0,0,1)),this.add(Ru);var Ou=new PerspectiveCamera(fov,aspect,_u,$u);Ou.layers=this.layers,Ou.up.set(0,-1,0),Ou.lookAt(new Vector3(0,0,-1)),this.add(Ou),this.update=function(Du,Fu){this.parent===null&&this.updateMatrixWorld();var Vu=Du.xr.enabled,ku=Du.getRenderTarget();Du.xr.enabled=!1;var Nu=Tu.texture.generateMipmaps;Tu.texture.generateMipmaps=!1,Du.setRenderTarget(Tu,0),Du.render(Fu,Cu),Du.setRenderTarget(Tu,1),Du.render(Fu,Pu),Du.setRenderTarget(Tu,2),Du.render(Fu,Bu),Du.setRenderTarget(Tu,3),Du.render(Fu,Lu),Du.setRenderTarget(Tu,4),Du.render(Fu,Ru),Tu.texture.generateMipmaps=Nu,Du.setRenderTarget(Tu,5),Du.render(Fu,Ou),Du.setRenderTarget(ku),Du.xr.enabled=Vu},this.clear=function(Du,Fu,Vu,ku){for(var Nu=Du.getRenderTarget(),Gu=0;Gu<6;Gu++)Du.setRenderTarget(Tu,Gu),Du.clear(Fu,Vu,ku);Du.setRenderTarget(Nu)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(_u,$u,Tu){Number.isInteger($u)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),$u=Tu),WebGLRenderTarget.call(this,_u,_u,$u)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(_u,$u){this.texture.type=$u.type,this.texture.format=$u.format,this.texture.encoding=$u.encoding;var Tu=new Scene,Cu={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Pu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Cu.uniforms),vertexShader:Cu.vertexShader,fragmentShader:Cu.fragmentShader,side:BackSide,blending:NoBlending});Pu.uniforms.tEquirect.value=$u;var Bu=new Mesh(new BoxBufferGeometry(5,5,5),Pu);Tu.add(Bu);var Lu=new CubeCamera(1,10,this);return Lu.update(_u,Tu),Bu.geometry.dispose(),Bu.material.dispose(),this};function DataTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu){Texture.call(this,null,Bu,Lu,Ru,Ou,Du,Cu,Pu,Fu,Vu),this.image={data:_u||null,width:$u||1,height:Tu||1},this.magFilter=Ou!==void 0?Ou:NearestFilter,this.minFilter=Du!==void 0?Du:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(_u,$u,Tu,Cu,Pu,Bu){this.planes=[_u!==void 0?_u:new Plane,$u!==void 0?$u:new Plane,Tu!==void 0?Tu:new Plane,Cu!==void 0?Cu:new Plane,Pu!==void 0?Pu:new Plane,Bu!==void 0?Bu:new Plane]}Object.assign(Frustum.prototype,{set:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=this.planes;return Lu[0].copy(_u),Lu[1].copy($u),Lu[2].copy(Tu),Lu[3].copy(Cu),Lu[4].copy(Pu),Lu[5].copy(Bu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++)$u[Tu].copy(_u.planes[Tu]);return this},setFromProjectionMatrix:function(_u){var $u=this.planes,Tu=_u.elements,Cu=Tu[0],Pu=Tu[1],Bu=Tu[2],Lu=Tu[3],Ru=Tu[4],Ou=Tu[5],Du=Tu[6],Fu=Tu[7],Vu=Tu[8],ku=Tu[9],Nu=Tu[10],Gu=Tu[11],ju=Tu[12],Hu=Tu[13],Uu=Tu[14],zu=Tu[15];return $u[0].setComponents(Lu-Cu,Fu-Ru,Gu-Vu,zu-ju).normalize(),$u[1].setComponents(Lu+Cu,Fu+Ru,Gu+Vu,zu+ju).normalize(),$u[2].setComponents(Lu+Pu,Fu+Ou,Gu+ku,zu+Hu).normalize(),$u[3].setComponents(Lu-Pu,Fu-Ou,Gu-ku,zu-Hu).normalize(),$u[4].setComponents(Lu-Bu,Fu-Du,Gu-Nu,zu-Uu).normalize(),$u[5].setComponents(Lu+Bu,Fu+Du,Gu+Nu,zu+Uu).normalize(),this},intersectsObject:function(_u){var $u=_u.geometry;return $u.boundingSphere===null&&$u.computeBoundingSphere(),_sphere$1.copy($u.boundingSphere).applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(_u){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(_u.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(_u){for(var $u=this.planes,Tu=_u.center,Cu=-_u.radius,Pu=0;Pu<6;Pu++){var Bu=$u[Pu].distanceToPoint(Tu);if(Bu<Cu)return!1}return!0},intersectsBox:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++){var Cu=$u[Tu];if(_vector$5.x=Cu.normal.x>0?_u.max.x:_u.min.x,_vector$5.y=Cu.normal.y>0?_u.max.y:_u.min.y,_vector$5.z=Cu.normal.z>0?_u.max.z:_u.min.z,Cu.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(_u){for(var $u=this.planes,Tu=0;Tu<6;Tu++)if($u[Tu].distanceToPoint(_u)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var _u=null,$u=!1,Tu=null;function Cu(Pu,Bu){$u!==!1&&(Tu(Pu,Bu),_u.requestAnimationFrame(Cu))}return{start:function(){$u!==!0&&Tu!==null&&(_u.requestAnimationFrame(Cu),$u=!0)},stop:function(){$u=!1},setAnimationLoop:function(Pu){Tu=Pu},setContext:function(Pu){_u=Pu}}}function WebGLAttributes(_u,$u){var Tu=$u.isWebGL2,Cu=new WeakMap;function Pu(Du,Fu){var Vu=Du.array,ku=Du.usage,Nu=_u.createBuffer();_u.bindBuffer(Fu,Nu),_u.bufferData(Fu,Vu,ku),Du.onUploadCallback();var Gu=5126;return Vu instanceof Float32Array?Gu=5126:Vu instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Vu instanceof Uint16Array?Gu=5123:Vu instanceof Int16Array?Gu=5122:Vu instanceof Uint32Array?Gu=5125:Vu instanceof Int32Array?Gu=5124:Vu instanceof Int8Array?Gu=5120:Vu instanceof Uint8Array&&(Gu=5121),{buffer:Nu,type:Gu,bytesPerElement:Vu.BYTES_PER_ELEMENT,version:Du.version}}function Bu(Du,Fu,Vu){var ku=Fu.array,Nu=Fu.updateRange;_u.bindBuffer(Vu,Du),Nu.count===-1?_u.bufferSubData(Vu,0,ku):(Tu?_u.bufferSubData(Vu,Nu.offset*ku.BYTES_PER_ELEMENT,ku,Nu.offset,Nu.count):_u.bufferSubData(Vu,Nu.offset*ku.BYTES_PER_ELEMENT,ku.subarray(Nu.offset,Nu.offset+Nu.count)),Nu.count=-1)}function Lu(Du){return Du.isInterleavedBufferAttribute&&(Du=Du.data),Cu.get(Du)}function Ru(Du){Du.isInterleavedBufferAttribute&&(Du=Du.data);var Fu=Cu.get(Du);Fu&&(_u.deleteBuffer(Fu.buffer),Cu.delete(Du))}function Ou(Du,Fu){Du.isInterleavedBufferAttribute&&(Du=Du.data);var Vu=Cu.get(Du);Vu===void 0?Cu.set(Du,Pu(Du,Fu)):Vu.version<Du.version&&(Bu(Vu.buffer,Du,Fu),Vu.version=Du.version)}return{get:Lu,remove:Ru,update:Ou}}function PlaneGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:_u,height:$u,widthSegments:Tu,heightSegments:Cu},this.fromBufferGeometry(new PlaneBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:_u,height:$u,widthSegments:Tu,heightSegments:Cu},_u=_u||1,$u=$u||1;var Pu=_u/2,Bu=$u/2,Lu=Math.floor(Tu)||1,Ru=Math.floor(Cu)||1,Ou=Lu+1,Du=Ru+1,Fu=_u/Lu,Vu=$u/Ru,ku,Nu,Gu=[],ju=[],Hu=[],Uu=[];for(Nu=0;Nu<Du;Nu++){var zu=Nu*Vu-Bu;for(ku=0;ku<Ou;ku++){var Wu=ku*Fu-Pu;ju.push(Wu,-zu,0),Hu.push(0,0,1),Uu.push(ku/Lu),Uu.push(1-Nu/Ru)}}for(Nu=0;Nu<Ru;Nu++)for(ku=0;ku<Lu;ku++){var Qu=ku+Ou*Nu,Ku=ku+Ou*(Nu+1),Yu=ku+1+Ou*(Nu+1),Xc=ku+1+Ou*Nu;Gu.push(Qu,Ku,Xc),Gu.push(Ku,Yu,Xc)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(ju,3)),this.setAttribute("normal",new Float32BufferAttribute(Hu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(_u,$u,Tu,Cu){var Pu=new Color(0),Bu=0,Lu,Ru,Ou=null,Du=0,Fu=null;function Vu(Nu,Gu,ju,Hu){var Uu=Gu.background,zu=_u.xr,Wu=zu.getSession&&zu.getSession();if(Wu&&Wu.environmentBlendMode==="additive"&&(Uu=null),Uu===null?ku(Pu,Bu):Uu&&Uu.isColor&&(ku(Uu,1),Hu=!0),(_u.autoClear||Hu)&&_u.clear(_u.autoClearColor,_u.autoClearDepth,_u.autoClearStencil),Uu&&(Uu.isCubeTexture||Uu.isWebGLCubeRenderTarget||Uu.mapping===CubeUVReflectionMapping)){Ru===void 0&&(Ru=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Ru.geometry.deleteAttribute("normal"),Ru.geometry.deleteAttribute("uv"),Ru.onBeforeRender=function(Ku,Yu,Xc){this.matrixWorld.copyPosition(Xc.matrixWorld)},Object.defineProperty(Ru.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Tu.update(Ru));var Qu=Uu.isWebGLCubeRenderTarget?Uu.texture:Uu;Ru.material.uniforms.envMap.value=Qu,Ru.material.uniforms.flipEnvMap.value=Qu.isCubeTexture?-1:1,(Ou!==Uu||Du!==Qu.version||Fu!==_u.toneMapping)&&(Ru.material.needsUpdate=!0,Ou=Uu,Du=Qu.version,Fu=_u.toneMapping),Nu.unshift(Ru,Ru.geometry,Ru.material,0,0,null)}else Uu&&Uu.isTexture&&(Lu===void 0&&(Lu=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Lu.geometry.deleteAttribute("normal"),Object.defineProperty(Lu.material,"map",{get:function(){return this.uniforms.t2D.value}}),Tu.update(Lu)),Lu.material.uniforms.t2D.value=Uu,Uu.matrixAutoUpdate===!0&&Uu.updateMatrix(),Lu.material.uniforms.uvTransform.value.copy(Uu.matrix),(Ou!==Uu||Du!==Uu.version||Fu!==_u.toneMapping)&&(Lu.material.needsUpdate=!0,Ou=Uu,Du=Uu.version,Fu=_u.toneMapping),Nu.unshift(Lu,Lu.geometry,Lu.material,0,0,null))}function ku(Nu,Gu){$u.buffers.color.setClear(Nu.r,Nu.g,Nu.b,Gu,Cu)}return{getClearColor:function(){return Pu},setClearColor:function(Nu,Gu){Pu.set(Nu),Bu=Gu!==void 0?Gu:1,ku(Pu,Bu)},getClearAlpha:function(){return Bu},setClearAlpha:function(Nu){Bu=Nu,ku(Pu,Bu)},render:Vu}}function WebGLBufferRenderer(_u,$u,Tu,Cu){var Pu=Cu.isWebGL2,Bu;function Lu(Du){Bu=Du}function Ru(Du,Fu){_u.drawArrays(Bu,Du,Fu),Tu.update(Fu,Bu)}function Ou(Du,Fu,Vu,ku){if(ku!==0){var Nu,Gu;if(Pu)Nu=_u,Gu="drawArraysInstanced";else if(Nu=$u.get("ANGLE_instanced_arrays"),Gu="drawArraysInstancedANGLE",Nu===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Nu[Gu](Bu,Fu,Vu,ku),Tu.update(Vu,Bu,ku)}}this.setMode=Lu,this.render=Ru,this.renderInstances=Ou}function WebGLCapabilities(_u,$u,Tu){var Cu;function Pu(){if(Cu!==void 0)return Cu;var Yu=$u.get("EXT_texture_filter_anisotropic");return Yu!==null?Cu=_u.getParameter(Yu.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Cu=0,Cu}function Bu(Yu){if(Yu==="highp"){if(_u.getShaderPrecisionFormat(35633,36338).precision>0&&_u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Yu="mediump"}return Yu==="mediump"&&_u.getShaderPrecisionFormat(35633,36337).precision>0&&_u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Lu=typeof WebGL2RenderingContext!="undefined"&&_u instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&_u instanceof WebGL2ComputeRenderingContext,Ru=Tu.precision!==void 0?Tu.precision:"highp",Ou=Bu(Ru);Ou!==Ru&&(console.warn("THREE.WebGLRenderer:",Ru,"not supported, using",Ou,"instead."),Ru=Ou);var Du=Tu.logarithmicDepthBuffer===!0,Fu=_u.getParameter(34930),Vu=_u.getParameter(35660),ku=_u.getParameter(3379),Nu=_u.getParameter(34076),Gu=_u.getParameter(34921),ju=_u.getParameter(36347),Hu=_u.getParameter(36348),Uu=_u.getParameter(36349),zu=Vu>0,Wu=Lu||!!$u.get("OES_texture_float"),Qu=zu&&Wu,Ku=Lu?_u.getParameter(36183):0;return{isWebGL2:Lu,getMaxAnisotropy:Pu,getMaxPrecision:Bu,precision:Ru,logarithmicDepthBuffer:Du,maxTextures:Fu,maxVertexTextures:Vu,maxTextureSize:ku,maxCubemapSize:Nu,maxAttributes:Gu,maxVertexUniforms:ju,maxVaryings:Hu,maxFragmentUniforms:Uu,vertexTextures:zu,floatFragmentTextures:Wu,floatVertexTextures:Qu,maxSamples:Ku}}function WebGLClipping(){var _u=this,$u=null,Tu=0,Cu=!1,Pu=!1,Bu=new Plane,Lu=new Matrix3,Ru={value:null,needsUpdate:!1};this.uniform=Ru,this.numPlanes=0,this.numIntersection=0,this.init=function(Fu,Vu,ku){var Nu=Fu.length!==0||Vu||Tu!==0||Cu;return Cu=Vu,$u=Du(Fu,ku,0),Tu=Fu.length,Nu},this.beginShadows=function(){Pu=!0,Du(null)},this.endShadows=function(){Pu=!1,Ou()},this.setState=function(Fu,Vu,ku,Nu,Gu,ju){if(!Cu||Fu===null||Fu.length===0||Pu&&!ku)Pu?Du(null):Ou();else{var Hu=Pu?0:Tu,Uu=Hu*4,zu=Gu.clippingState||null;Ru.value=zu,zu=Du(Fu,Nu,Uu,ju);for(var Wu=0;Wu!==Uu;++Wu)zu[Wu]=$u[Wu];Gu.clippingState=zu,this.numIntersection=Vu?this.numPlanes:0,this.numPlanes+=Hu}};function Ou(){Ru.value!==$u&&(Ru.value=$u,Ru.needsUpdate=Tu>0),_u.numPlanes=Tu,_u.numIntersection=0}function Du(Fu,Vu,ku,Nu){var Gu=Fu!==null?Fu.length:0,ju=null;if(Gu!==0){if(ju=Ru.value,Nu!==!0||ju===null){var Hu=ku+Gu*4,Uu=Vu.matrixWorldInverse;Lu.getNormalMatrix(Uu),(ju===null||ju.length<Hu)&&(ju=new Float32Array(Hu));for(var zu=0,Wu=ku;zu!==Gu;++zu,Wu+=4)Bu.copy(Fu[zu]).applyMatrix4(Uu,Lu),Bu.normal.toArray(ju,Wu),ju[Wu+3]=Bu.constant}Ru.value=ju,Ru.needsUpdate=!0}return _u.numPlanes=Gu,_u.numIntersection=0,ju}}function WebGLExtensions(_u){var $u={};return{get:function(Tu){if($u[Tu]!==void 0)return $u[Tu];var Cu;switch(Tu){case"WEBGL_depth_texture":Cu=_u.getExtension("WEBGL_depth_texture")||_u.getExtension("MOZ_WEBGL_depth_texture")||_u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Cu=_u.getExtension("EXT_texture_filter_anisotropic")||_u.getExtension("MOZ_EXT_texture_filter_anisotropic")||_u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Cu=_u.getExtension("WEBGL_compressed_texture_s3tc")||_u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Cu=_u.getExtension("WEBGL_compressed_texture_pvrtc")||_u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Cu=_u.getExtension(Tu)}return Cu===null&&console.warn("THREE.WebGLRenderer: "+Tu+" extension not supported."),$u[Tu]=Cu,Cu}}}function WebGLGeometries(_u,$u,Tu){var Cu=new WeakMap,Pu=new WeakMap;function Bu(Fu){var Vu=Fu.target,ku=Cu.get(Vu);ku.index!==null&&$u.remove(ku.index);for(var Nu in ku.attributes)$u.remove(ku.attributes[Nu]);Vu.removeEventListener("dispose",Bu),Cu.delete(Vu);var Gu=Pu.get(ku);Gu&&($u.remove(Gu),Pu.delete(ku)),Tu.memory.geometries--}function Lu(Fu,Vu){var ku=Cu.get(Vu);return ku||(Vu.addEventListener("dispose",Bu),Vu.isBufferGeometry?ku=Vu:Vu.isGeometry&&(Vu._bufferGeometry===void 0&&(Vu._bufferGeometry=new BufferGeometry().setFromObject(Fu)),ku=Vu._bufferGeometry),Cu.set(Vu,ku),Tu.memory.geometries++,ku)}function Ru(Fu){var Vu=Fu.index,ku=Fu.attributes;Vu!==null&&$u.update(Vu,34963);for(var Nu in ku)$u.update(ku[Nu],34962);var Gu=Fu.morphAttributes;for(var Nu in Gu)for(var ju=Gu[Nu],Hu=0,Uu=ju.length;Hu<Uu;Hu++)$u.update(ju[Hu],34962)}function Ou(Fu){var Vu=[],ku=Fu.index,Nu=Fu.attributes.position,Gu=0;if(ku!==null){var ju=ku.array;Gu=ku.version;for(var Hu=0,Uu=ju.length;Hu<Uu;Hu+=3){var zu=ju[Hu+0],Wu=ju[Hu+1],Qu=ju[Hu+2];Vu.push(zu,Wu,Wu,Qu,Qu,zu)}}else{var ju=Nu.array;Gu=Nu.version;for(var Hu=0,Uu=ju.length/3-1;Hu<Uu;Hu+=3){var zu=Hu+0,Wu=Hu+1,Qu=Hu+2;Vu.push(zu,Wu,Wu,Qu,Qu,zu)}}var Ku=new(arrayMax(Vu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Vu,1);Ku.version=Gu,$u.update(Ku,34963);var Yu=Pu.get(Fu);Yu&&$u.remove(Yu),Pu.set(Fu,Ku)}function Du(Fu){var Vu=Pu.get(Fu);if(Vu){var ku=Fu.index;ku!==null&&Vu.version<ku.version&&Ou(Fu)}else Ou(Fu);return Pu.get(Fu)}return{get:Lu,update:Ru,getWireframeAttribute:Du}}function WebGLIndexedBufferRenderer(_u,$u,Tu,Cu){var Pu=Cu.isWebGL2,Bu;function Lu(ku){Bu=ku}var Ru,Ou;function Du(ku){Ru=ku.type,Ou=ku.bytesPerElement}function Fu(ku,Nu){_u.drawElements(Bu,Nu,Ru,ku*Ou),Tu.update(Nu,Bu)}function Vu(ku,Nu,Gu,ju){if(ju!==0){var Hu,Uu;if(Pu)Hu=_u,Uu="drawElementsInstanced";else if(Hu=$u.get("ANGLE_instanced_arrays"),Uu="drawElementsInstancedANGLE",Hu===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Hu[Uu](Bu,Gu,Ru,Nu*Ou,ju),Tu.update(Gu,Bu,ju)}}this.setMode=Lu,this.setIndex=Du,this.render=Fu,this.renderInstances=Vu}function WebGLInfo(_u){var $u={geometries:0,textures:0},Tu={frame:0,calls:0,triangles:0,points:0,lines:0};function Cu(Bu,Lu,Ru){switch(Ru=Ru||1,Tu.calls++,Lu){case 4:Tu.triangles+=Ru*(Bu/3);break;case 1:Tu.lines+=Ru*(Bu/2);break;case 3:Tu.lines+=Ru*(Bu-1);break;case 2:Tu.lines+=Ru*Bu;break;case 0:Tu.points+=Ru*Bu;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Lu);break}}function Pu(){Tu.frame++,Tu.calls=0,Tu.triangles=0,Tu.points=0,Tu.lines=0}return{memory:$u,render:Tu,programs:null,autoReset:!0,reset:Pu,update:Cu}}function absNumericalSort(_u,$u){return Math.abs($u[1])-Math.abs(_u[1])}function WebGLMorphtargets(_u){var $u={},Tu=new Float32Array(8);function Cu(Pu,Bu,Lu,Ru){var Ou=Pu.morphTargetInfluences,Du=Ou===void 0?0:Ou.length,Fu=$u[Bu.id];if(Fu===void 0){Fu=[];for(var Vu=0;Vu<Du;Vu++)Fu[Vu]=[Vu,0];$u[Bu.id]=Fu}for(var ku=Lu.morphTargets&&Bu.morphAttributes.position,Nu=Lu.morphNormals&&Bu.morphAttributes.normal,Vu=0;Vu<Du;Vu++){var Gu=Fu[Vu];Gu[1]!==0&&(ku&&Bu.deleteAttribute("morphTarget"+Vu),Nu&&Bu.deleteAttribute("morphNormal"+Vu))}for(var Vu=0;Vu<Du;Vu++){var Gu=Fu[Vu];Gu[0]=Vu,Gu[1]=Ou[Vu]}Fu.sort(absNumericalSort);for(var ju=0,Vu=0;Vu<8;Vu++){var Gu=Fu[Vu];if(Gu){var Hu=Gu[0],Uu=Gu[1];if(Uu){ku&&Bu.setAttribute("morphTarget"+Vu,ku[Hu]),Nu&&Bu.setAttribute("morphNormal"+Vu,Nu[Hu]),Tu[Vu]=Uu,ju+=Uu;continue}}Tu[Vu]=0}var zu=Bu.morphTargetsRelative?1:1-ju;Ru.getUniforms().setValue(_u,"morphTargetBaseInfluence",zu),Ru.getUniforms().setValue(_u,"morphTargetInfluences",Tu)}return{update:Cu}}function WebGLObjects(_u,$u,Tu,Cu){var Pu=new WeakMap;function Bu(Ru){var Ou=Cu.render.frame,Du=Ru.geometry,Fu=$u.get(Ru,Du);return Pu.get(Fu)!==Ou&&(Du.isGeometry&&Fu.updateFromObject(Ru),$u.update(Fu),Pu.set(Fu,Ou)),Ru.isInstancedMesh&&Tu.update(Ru.instanceMatrix,34962),Fu}function Lu(){Pu=new WeakMap}return{update:Bu,dispose:Lu}}function CubeTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du){_u=_u!==void 0?_u:[],$u=$u!==void 0?$u:CubeReflectionMapping,Lu=Lu!==void 0?Lu:RGBFormat,Texture.call(this,_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(_u){this.image=_u}});function DataTexture2DArray(_u,$u,Tu,Cu){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Tu||1,depth:Cu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(_u,$u,Tu,Cu){Texture.call(this,null),this.image={data:_u||null,width:$u||1,height:Tu||1,depth:Cu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_u,$u,Tu){var Cu=_u[0];if(Cu<=0||Cu>0)return _u;var Pu=$u*Tu,Bu=arrayCacheF32[Pu];if(Bu===void 0&&(Bu=new Float32Array(Pu),arrayCacheF32[Pu]=Bu),$u!==0){Cu.toArray(Bu,0);for(var Lu=1,Ru=0;Lu!==$u;++Lu)Ru+=Tu,_u[Lu].toArray(Bu,Ru)}return Bu}function arraysEqual(_u,$u){if(_u.length!==$u.length)return!1;for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(_u[Tu]!==$u[Tu])return!1;return!0}function copyArray(_u,$u){for(var Tu=0,Cu=$u.length;Tu<Cu;Tu++)_u[Tu]=$u[Tu]}function allocTexUnits(_u,$u){var Tu=arrayCacheI32[$u];Tu===void 0&&(Tu=new Int32Array($u),arrayCacheI32[$u]=Tu);for(var Cu=0;Cu!==$u;++Cu)Tu[Cu]=_u.allocateTextureUnit();return Tu}function setValueV1f(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1f(this.addr,$u),Tu[0]=$u)}function setValueV2f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y)&&(_u.uniform2f(this.addr,$u.x,$u.y),Tu[0]=$u.x,Tu[1]=$u.y);else{if(arraysEqual(Tu,$u))return;_u.uniform2fv(this.addr,$u),copyArray(Tu,$u)}}function setValueV3f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y||Tu[2]!==$u.z)&&(_u.uniform3f(this.addr,$u.x,$u.y,$u.z),Tu[0]=$u.x,Tu[1]=$u.y,Tu[2]=$u.z);else if($u.r!==void 0)(Tu[0]!==$u.r||Tu[1]!==$u.g||Tu[2]!==$u.b)&&(_u.uniform3f(this.addr,$u.r,$u.g,$u.b),Tu[0]=$u.r,Tu[1]=$u.g,Tu[2]=$u.b);else{if(arraysEqual(Tu,$u))return;_u.uniform3fv(this.addr,$u),copyArray(Tu,$u)}}function setValueV4f(_u,$u){var Tu=this.cache;if($u.x!==void 0)(Tu[0]!==$u.x||Tu[1]!==$u.y||Tu[2]!==$u.z||Tu[3]!==$u.w)&&(_u.uniform4f(this.addr,$u.x,$u.y,$u.z,$u.w),Tu[0]=$u.x,Tu[1]=$u.y,Tu[2]=$u.z,Tu[3]=$u.w);else{if(arraysEqual(Tu,$u))return;_u.uniform4fv(this.addr,$u),copyArray(Tu,$u)}}function setValueM2(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix2fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat2array.set(Cu),_u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Tu,Cu)}}function setValueM3(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix3fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat3array.set(Cu),_u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Tu,Cu)}}function setValueM4(_u,$u){var Tu=this.cache,Cu=$u.elements;if(Cu===void 0){if(arraysEqual(Tu,$u))return;_u.uniformMatrix4fv(this.addr,!1,$u),copyArray(Tu,$u)}else{if(arraysEqual(Tu,Cu))return;mat4array.set(Cu),_u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Tu,Cu)}}function setValueT1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.safeSetTexture2D($u||emptyTexture,Pu)}function setValueT2DArray1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.setTexture2DArray($u||emptyTexture2dArray,Pu)}function setValueT3D1(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.setTexture3D($u||emptyTexture3d,Pu)}function setValueT6(_u,$u,Tu){var Cu=this.cache,Pu=Tu.allocateTextureUnit();Cu[0]!==Pu&&(_u.uniform1i(this.addr,Pu),Cu[0]=Pu),Tu.safeSetTextureCube($u||emptyCubeTexture,Pu)}function setValueV1i(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1i(this.addr,$u),Tu[0]=$u)}function setValueV2i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform2iv(this.addr,$u),copyArray(Tu,$u))}function setValueV3i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform3iv(this.addr,$u),copyArray(Tu,$u))}function setValueV4i(_u,$u){var Tu=this.cache;arraysEqual(Tu,$u)||(_u.uniform4iv(this.addr,$u),copyArray(Tu,$u))}function setValueV1ui(_u,$u){var Tu=this.cache;Tu[0]!==$u&&(_u.uniform1ui(this.addr,$u),Tu[0]=$u)}function getSingularSetter(_u){switch(_u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_u,$u){_u.uniform1fv(this.addr,$u)}function setValueV1iArray(_u,$u){_u.uniform1iv(this.addr,$u)}function setValueV2iArray(_u,$u){_u.uniform2iv(this.addr,$u)}function setValueV3iArray(_u,$u){_u.uniform3iv(this.addr,$u)}function setValueV4iArray(_u,$u){_u.uniform4iv(this.addr,$u)}function setValueV2fArray(_u,$u){var Tu=flatten($u,this.size,2);_u.uniform2fv(this.addr,Tu)}function setValueV3fArray(_u,$u){var Tu=flatten($u,this.size,3);_u.uniform3fv(this.addr,Tu)}function setValueV4fArray(_u,$u){var Tu=flatten($u,this.size,4);_u.uniform4fv(this.addr,Tu)}function setValueM2Array(_u,$u){var Tu=flatten($u,this.size,4);_u.uniformMatrix2fv(this.addr,!1,Tu)}function setValueM3Array(_u,$u){var Tu=flatten($u,this.size,9);_u.uniformMatrix3fv(this.addr,!1,Tu)}function setValueM4Array(_u,$u){var Tu=flatten($u,this.size,16);_u.uniformMatrix4fv(this.addr,!1,Tu)}function setValueT1Array(_u,$u,Tu){var Cu=$u.length,Pu=allocTexUnits(Tu,Cu);_u.uniform1iv(this.addr,Pu);for(var Bu=0;Bu!==Cu;++Bu)Tu.safeSetTexture2D($u[Bu]||emptyTexture,Pu[Bu])}function setValueT6Array(_u,$u,Tu){var Cu=$u.length,Pu=allocTexUnits(Tu,Cu);_u.uniform1iv(this.addr,Pu);for(var Bu=0;Bu!==Cu;++Bu)Tu.safeSetTextureCube($u[Bu]||emptyCubeTexture,Pu[Bu])}function getPureArraySetter(_u){switch(_u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(_u,$u,Tu){this.id=_u,this.addr=Tu,this.cache=[],this.setValue=getSingularSetter($u.type)}function PureArrayUniform(_u,$u,Tu){this.id=_u,this.addr=Tu,this.cache=[],this.size=$u.size,this.setValue=getPureArraySetter($u.type)}PureArrayUniform.prototype.updateCache=function(_u){var $u=this.cache;_u instanceof Float32Array&&$u.length!==_u.length&&(this.cache=new Float32Array(_u.length)),copyArray($u,_u)};function StructuredUniform(_u){this.id=_u,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(_u,$u,Tu){for(var Cu=this.seq,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu){var Lu=Cu[Pu];Lu.setValue(_u,$u[Lu.id],Tu)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(_u,$u){_u.seq.push($u),_u.map[$u.id]=$u}function parseUniform(_u,$u,Tu){var Cu=_u.name,Pu=Cu.length;for(RePathPart.lastIndex=0;;){var Bu=RePathPart.exec(Cu),Lu=RePathPart.lastIndex,Ru=Bu[1],Ou=Bu[2]==="]",Du=Bu[3];if(Ou&&(Ru=Ru|0),Du===void 0||Du==="["&&Lu+2===Pu){addUniform(Tu,Du===void 0?new SingleUniform(Ru,_u,$u):new PureArrayUniform(Ru,_u,$u));break}else{var Fu=Tu.map,Vu=Fu[Ru];Vu===void 0&&(Vu=new StructuredUniform(Ru),addUniform(Tu,Vu)),Tu=Vu}}}function WebGLUniforms(_u,$u){this.seq=[],this.map={};for(var Tu=_u.getProgramParameter($u,35718),Cu=0;Cu<Tu;++Cu){var Pu=_u.getActiveUniform($u,Cu),Bu=_u.getUniformLocation($u,Pu.name);parseUniform(Pu,Bu,this)}}WebGLUniforms.prototype.setValue=function(_u,$u,Tu,Cu){var Pu=this.map[$u];Pu!==void 0&&Pu.setValue(_u,Tu,Cu)};WebGLUniforms.prototype.setOptional=function(_u,$u,Tu){var Cu=$u[Tu];Cu!==void 0&&this.setValue(_u,Tu,Cu)};WebGLUniforms.upload=function(_u,$u,Tu,Cu){for(var Pu=0,Bu=$u.length;Pu!==Bu;++Pu){var Lu=$u[Pu],Ru=Tu[Lu.id];Ru.needsUpdate!==!1&&Lu.setValue(_u,Ru.value,Cu)}};WebGLUniforms.seqWithValue=function(_u,$u){for(var Tu=[],Cu=0,Pu=_u.length;Cu!==Pu;++Cu){var Bu=_u[Cu];Bu.id in $u&&Tu.push(Bu)}return Tu};function WebGLShader(_u,$u,Tu){var Cu=_u.createShader($u);return _u.shaderSource(Cu,Tu),_u.compileShader(Cu),Cu}var programIdCount=0;function addLineNumbers(_u){for(var $u=_u.split(`
`),Tu=0;Tu<$u.length;Tu++)$u[Tu]=Tu+1+": "+$u[Tu];return $u.join(`
`)}function getEncodingComponents(_u){switch(_u){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+_u)}}function getShaderErrors(_u,$u,Tu){var Cu=_u.getShaderParameter($u,35713),Pu=_u.getShaderInfoLog($u).trim();if(Cu&&Pu==="")return"";var Bu=_u.getShaderSource($u);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Tu+`
`+Pu+addLineNumbers(Bu)}function getTexelDecodingFunction(_u,$u){var Tu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return "+Tu[0]+"ToLinear"+Tu[1]+"; }"}function getTexelEncodingFunction(_u,$u){var Tu=getEncodingComponents($u);return"vec4 "+_u+"( vec4 value ) { return LinearTo"+Tu[0]+Tu[1]+"; }"}function getToneMappingFunction(_u,$u){var Tu;switch($u){case LinearToneMapping:Tu="Linear";break;case ReinhardToneMapping:Tu="Reinhard";break;case Uncharted2ToneMapping:Tu="Uncharted2";break;case CineonToneMapping:Tu="OptimizedCineon";break;case ACESFilmicToneMapping:Tu="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+$u)}return"vec3 "+_u+"( vec3 color ) { return "+Tu+"ToneMapping( color ); }"}function generateExtensions(_u){var $u=[_u.extensionDerivatives||_u.envMapCubeUV||_u.bumpMap||_u.tangentSpaceNormalMap||_u.clearcoatNormalMap||_u.flatShading||_u.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_u.extensionFragDepth||_u.logarithmicDepthBuffer)&&_u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_u.extensionDrawBuffers&&_u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_u.extensionShaderTextureLOD||_u.envMap)&&_u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return $u.filter(filterEmptyLine).join(`
`)}function generateDefines(_u){var $u=[];for(var Tu in _u){var Cu=_u[Tu];Cu!==!1&&$u.push("#define "+Tu+" "+Cu)}return $u.join(`
`)}function fetchAttributeLocations(_u,$u){for(var Tu={},Cu=_u.getProgramParameter($u,35721),Pu=0;Pu<Cu;Pu++){var Bu=_u.getActiveAttrib($u,Pu),Lu=Bu.name;Tu[Lu]=_u.getAttribLocation($u,Lu)}return Tu}function filterEmptyLine(_u){return _u!==""}function replaceLightNums(_u,$u){return _u.replace(/NUM_DIR_LIGHTS/g,$u.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$u.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,$u.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$u.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$u.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$u.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$u.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$u.numPointLightShadows)}function replaceClippingPlaneNums(_u,$u){return _u.replace(/NUM_CLIPPING_PLANES/g,$u.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$u.numClippingPlanes-$u.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_u){return _u.replace(includePattern,includeReplacer)}function includeReplacer(_u,$u){var Tu=ShaderChunk[$u];if(Tu===void 0)throw new Error("Can not resolve #include <"+$u+">");return resolveIncludes(Tu)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(_u){return _u.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(_u,$u,Tu,Cu){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(_u,$u,Tu,Cu)}function loopReplacer(_u,$u,Tu,Cu){for(var Pu="",Bu=parseInt($u);Bu<parseInt(Tu);Bu++)Pu+=Cu.replace(/\[ i \]/g,"[ "+Bu+" ]").replace(/UNROLLED_LOOP_INDEX/g,Bu);return Pu}function generatePrecision(_u){var $u="precision "+_u.precision+` float;
precision `+_u.precision+" int;";return _u.precision==="highp"?$u+=`
#define HIGH_PRECISION`:_u.precision==="mediump"?$u+=`
#define MEDIUM_PRECISION`:_u.precision==="lowp"&&($u+=`
#define LOW_PRECISION`),$u}function generateShadowMapTypeDefine(_u){var $u="SHADOWMAP_TYPE_BASIC";return _u.shadowMapType===PCFShadowMap?$u="SHADOWMAP_TYPE_PCF":_u.shadowMapType===PCFSoftShadowMap?$u="SHADOWMAP_TYPE_PCF_SOFT":_u.shadowMapType===VSMShadowMap&&($u="SHADOWMAP_TYPE_VSM"),$u}function generateEnvMapTypeDefine(_u){var $u="ENVMAP_TYPE_CUBE";if(_u.envMap)switch(_u.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:$u="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:$u="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:$u="ENVMAP_TYPE_SPHERE";break}return $u}function generateEnvMapModeDefine(_u){var $u="ENVMAP_MODE_REFLECTION";if(_u.envMap)switch(_u.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:$u="ENVMAP_MODE_REFRACTION";break}return $u}function generateEnvMapBlendingDefine(_u){var $u="ENVMAP_BLENDING_NONE";if(_u.envMap)switch(_u.combine){case MultiplyOperation:$u="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:$u="ENVMAP_BLENDING_MIX";break;case AddOperation:$u="ENVMAP_BLENDING_ADD";break}return $u}function WebGLProgram(_u,$u,Tu){var Cu=_u.getContext(),Pu=Tu.defines,Bu=Tu.vertexShader,Lu=Tu.fragmentShader,Ru=generateShadowMapTypeDefine(Tu),Ou=generateEnvMapTypeDefine(Tu),Du=generateEnvMapModeDefine(Tu),Fu=generateEnvMapBlendingDefine(Tu),Vu=_u.gammaFactor>0?_u.gammaFactor:1,ku=Tu.isWebGL2?"":generateExtensions(Tu),Nu=generateDefines(Pu),Gu=Cu.createProgram(),ju,Hu;if(Tu.isRawShaderMaterial?(ju=[Nu].filter(filterEmptyLine).join(`
`),ju.length>0&&(ju+=`
`),Hu=[ku,Nu].filter(filterEmptyLine).join(`
`),Hu.length>0&&(Hu+=`
`)):(ju=[generatePrecision(Tu),"#define SHADER_NAME "+Tu.shaderName,Nu,Tu.instancing?"#define USE_INSTANCING":"",Tu.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Vu,"#define MAX_BONES "+Tu.maxBones,Tu.useFog&&Tu.fog?"#define USE_FOG":"",Tu.useFog&&Tu.fogExp2?"#define FOG_EXP2":"",Tu.map?"#define USE_MAP":"",Tu.envMap?"#define USE_ENVMAP":"",Tu.envMap?"#define "+Du:"",Tu.lightMap?"#define USE_LIGHTMAP":"",Tu.aoMap?"#define USE_AOMAP":"",Tu.emissiveMap?"#define USE_EMISSIVEMAP":"",Tu.bumpMap?"#define USE_BUMPMAP":"",Tu.normalMap?"#define USE_NORMALMAP":"",Tu.normalMap&&Tu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Tu.normalMap&&Tu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Tu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Tu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Tu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Tu.displacementMap&&Tu.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Tu.specularMap?"#define USE_SPECULARMAP":"",Tu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Tu.metalnessMap?"#define USE_METALNESSMAP":"",Tu.alphaMap?"#define USE_ALPHAMAP":"",Tu.vertexTangents?"#define USE_TANGENT":"",Tu.vertexColors?"#define USE_COLOR":"",Tu.vertexUvs?"#define USE_UV":"",Tu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Tu.flatShading?"#define FLAT_SHADED":"",Tu.skinning?"#define USE_SKINNING":"",Tu.useVertexTexture?"#define BONE_TEXTURE":"",Tu.morphTargets?"#define USE_MORPHTARGETS":"",Tu.morphNormals&&Tu.flatShading===!1?"#define USE_MORPHNORMALS":"",Tu.doubleSided?"#define DOUBLE_SIDED":"",Tu.flipSided?"#define FLIP_SIDED":"",Tu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Tu.shadowMapEnabled?"#define "+Ru:"",Tu.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Tu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Tu.logarithmicDepthBuffer&&Tu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Hu=[ku,generatePrecision(Tu),"#define SHADER_NAME "+Tu.shaderName,Nu,Tu.alphaTest?"#define ALPHATEST "+Tu.alphaTest+(Tu.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Vu,Tu.useFog&&Tu.fog?"#define USE_FOG":"",Tu.useFog&&Tu.fogExp2?"#define FOG_EXP2":"",Tu.map?"#define USE_MAP":"",Tu.matcap?"#define USE_MATCAP":"",Tu.envMap?"#define USE_ENVMAP":"",Tu.envMap?"#define "+Ou:"",Tu.envMap?"#define "+Du:"",Tu.envMap?"#define "+Fu:"",Tu.lightMap?"#define USE_LIGHTMAP":"",Tu.aoMap?"#define USE_AOMAP":"",Tu.emissiveMap?"#define USE_EMISSIVEMAP":"",Tu.bumpMap?"#define USE_BUMPMAP":"",Tu.normalMap?"#define USE_NORMALMAP":"",Tu.normalMap&&Tu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Tu.normalMap&&Tu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Tu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Tu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Tu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Tu.specularMap?"#define USE_SPECULARMAP":"",Tu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Tu.metalnessMap?"#define USE_METALNESSMAP":"",Tu.alphaMap?"#define USE_ALPHAMAP":"",Tu.sheen?"#define USE_SHEEN":"",Tu.vertexTangents?"#define USE_TANGENT":"",Tu.vertexColors?"#define USE_COLOR":"",Tu.vertexUvs?"#define USE_UV":"",Tu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Tu.gradientMap?"#define USE_GRADIENTMAP":"",Tu.flatShading?"#define FLAT_SHADED":"",Tu.doubleSided?"#define DOUBLE_SIDED":"",Tu.flipSided?"#define FLIP_SIDED":"",Tu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Tu.shadowMapEnabled?"#define "+Ru:"",Tu.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Tu.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Tu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Tu.logarithmicDepthBuffer&&Tu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Tu.extensionShaderTextureLOD||Tu.envMap)&&Tu.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Tu.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Tu.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Tu.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Tu.toneMapping):"",Tu.dithering?"#define DITHERING":"",Tu.outputEncoding||Tu.mapEncoding||Tu.matcapEncoding||Tu.envMapEncoding||Tu.emissiveMapEncoding||Tu.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Tu.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Tu.mapEncoding):"",Tu.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Tu.matcapEncoding):"",Tu.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Tu.envMapEncoding):"",Tu.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Tu.emissiveMapEncoding):"",Tu.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Tu.lightMapEncoding):"",Tu.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Tu.outputEncoding):"",Tu.depthPacking?"#define DEPTH_PACKING "+Tu.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Bu=resolveIncludes(Bu),Bu=replaceLightNums(Bu,Tu),Bu=replaceClippingPlaneNums(Bu,Tu),Lu=resolveIncludes(Lu),Lu=replaceLightNums(Lu,Tu),Lu=replaceClippingPlaneNums(Lu,Tu),Bu=unrollLoops(Bu),Lu=unrollLoops(Lu),Tu.isWebGL2&&!Tu.isRawShaderMaterial){var Uu=!1,zu=/^\s*#version\s+300\s+es\s*\n/;Tu.isShaderMaterial&&Bu.match(zu)!==null&&Lu.match(zu)!==null&&(Uu=!0,Bu=Bu.replace(zu,""),Lu=Lu.replace(zu,"")),ju=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+ju,Hu=[`#version 300 es
`,"#define varying in",Uu?"":"out highp vec4 pc_fragColor;",Uu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Hu}var Wu=ju+Bu,Qu=Hu+Lu,Ku=WebGLShader(Cu,35633,Wu),Yu=WebGLShader(Cu,35632,Qu);if(Cu.attachShader(Gu,Ku),Cu.attachShader(Gu,Yu),Tu.index0AttributeName!==void 0?Cu.bindAttribLocation(Gu,0,Tu.index0AttributeName):Tu.morphTargets===!0&&Cu.bindAttribLocation(Gu,0,"position"),Cu.linkProgram(Gu),_u.debug.checkShaderErrors){var Xc=Cu.getProgramInfoLog(Gu).trim(),_d=Cu.getShaderInfoLog(Ku).trim(),_f=Cu.getShaderInfoLog(Yu).trim(),qu=!0,Xu=!0;if(Cu.getProgramParameter(Gu,35714)===!1){qu=!1;var Zu=getShaderErrors(Cu,Ku,"vertex"),_c=getShaderErrors(Cu,Yu,"fragment");console.error("THREE.WebGLProgram: shader error: ",Cu.getError(),"35715",Cu.getProgramParameter(Gu,35715),"gl.getProgramInfoLog",Xc,Zu,_c)}else Xc!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Xc):(_d===""||_f==="")&&(Xu=!1);Xu&&(this.diagnostics={runnable:qu,programLog:Xc,vertexShader:{log:_d,prefix:ju},fragmentShader:{log:_f,prefix:Hu}})}Cu.deleteShader(Ku),Cu.deleteShader(Yu);var Ju;this.getUniforms=function(){return Ju===void 0&&(Ju=new WebGLUniforms(Cu,Gu)),Ju};var _h;return this.getAttributes=function(){return _h===void 0&&(_h=fetchAttributeLocations(Cu,Gu)),_h},this.destroy=function(){Cu.deleteProgram(Gu),this.program=void 0},this.name=Tu.shaderName,this.id=programIdCount++,this.cacheKey=$u,this.usedTimes=1,this.program=Gu,this.vertexShader=Ku,this.fragmentShader=Yu,this}function WebGLPrograms(_u,$u,Tu){var Cu=[],Pu=Tu.isWebGL2,Bu=Tu.logarithmicDepthBuffer,Lu=Tu.floatVertexTextures,Ru=Tu.precision,Ou=Tu.maxVertexUniforms,Du=Tu.vertexTextures,Fu={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Vu=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function ku(ju,Hu){var Uu;if(Hu){var zu=ShaderLib[Hu];Uu={name:ju.type,uniforms:UniformsUtils.clone(zu.uniforms),vertexShader:zu.vertexShader,fragmentShader:zu.fragmentShader}}else Uu={name:ju.type,uniforms:ju.uniforms,vertexShader:ju.vertexShader,fragmentShader:ju.fragmentShader};return Uu}function Nu(ju){var Hu=ju.skeleton,Uu=Hu.bones;if(Lu)return 1024;var zu=Ou,Wu=Math.floor((zu-20)/4),Qu=Math.min(Wu,Uu.length);return Qu<Uu.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Uu.length+" bones. This GPU supports "+Qu+"."),0):Qu}function Gu(ju){var Hu;return ju?ju.isTexture?Hu=ju.encoding:ju.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Hu=ju.texture.encoding):Hu=LinearEncoding,Hu}this.getParameters=function(ju,Hu,Uu,zu,Wu,Qu,Ku){var Yu=zu.fog,Xc=ju.isMeshStandardMaterial?zu.environment:null,_d=ju.envMap||Xc,_f=Fu[ju.type],qu=Ku.isSkinnedMesh?Nu(Ku):0;ju.precision!==null&&(Ru=Tu.getMaxPrecision(ju.precision),Ru!==ju.precision&&console.warn("THREE.WebGLProgram.getParameters:",ju.precision,"not supported, using",Ru,"instead."));var Xu=ku(ju,_f);ju.onBeforeCompile(Xu,_u);var Zu=_u.getRenderTarget(),_c={isWebGL2:Pu,shaderID:_f,shaderName:Xu.name,uniforms:Xu.uniforms,vertexShader:Xu.vertexShader,fragmentShader:Xu.fragmentShader,defines:ju.defines,isRawShaderMaterial:ju.isRawShaderMaterial,isShaderMaterial:ju.isShaderMaterial,precision:Ru,instancing:Ku.isInstancedMesh===!0,supportsVertexTextures:Du,outputEncoding:Zu!==null?Gu(Zu.texture):_u.outputEncoding,map:!!ju.map,mapEncoding:Gu(ju.map),matcap:!!ju.matcap,matcapEncoding:Gu(ju.matcap),envMap:!!_d,envMapMode:_d&&_d.mapping,envMapEncoding:Gu(_d),envMapCubeUV:!!_d&&(_d.mapping===CubeUVReflectionMapping||_d.mapping===CubeUVRefractionMapping),lightMap:!!ju.lightMap,lightMapEncoding:Gu(ju.lightMap),aoMap:!!ju.aoMap,emissiveMap:!!ju.emissiveMap,emissiveMapEncoding:Gu(ju.emissiveMap),bumpMap:!!ju.bumpMap,normalMap:!!ju.normalMap,objectSpaceNormalMap:ju.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:ju.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!ju.clearcoatMap,clearcoatRoughnessMap:!!ju.clearcoatRoughnessMap,clearcoatNormalMap:!!ju.clearcoatNormalMap,displacementMap:!!ju.displacementMap,roughnessMap:!!ju.roughnessMap,metalnessMap:!!ju.metalnessMap,specularMap:!!ju.specularMap,alphaMap:!!ju.alphaMap,gradientMap:!!ju.gradientMap,sheen:!!ju.sheen,combine:ju.combine,vertexTangents:ju.normalMap&&ju.vertexTangents,vertexColors:ju.vertexColors,vertexUvs:!!ju.map||!!ju.bumpMap||!!ju.normalMap||!!ju.specularMap||!!ju.alphaMap||!!ju.emissiveMap||!!ju.roughnessMap||!!ju.metalnessMap||!!ju.clearcoatMap||!!ju.clearcoatRoughnessMap||!!ju.clearcoatNormalMap||!!ju.displacementMap,uvsVertexOnly:!(!!ju.map||!!ju.bumpMap||!!ju.normalMap||!!ju.specularMap||!!ju.alphaMap||!!ju.emissiveMap||!!ju.roughnessMap||!!ju.metalnessMap||!!ju.clearcoatNormalMap)&&!!ju.displacementMap,fog:!!Yu,useFog:ju.fog,fogExp2:Yu&&Yu.isFogExp2,flatShading:ju.flatShading,sizeAttenuation:ju.sizeAttenuation,logarithmicDepthBuffer:Bu,skinning:ju.skinning&&qu>0,maxBones:qu,useVertexTexture:Lu,morphTargets:ju.morphTargets,morphNormals:ju.morphNormals,maxMorphTargets:_u.maxMorphTargets,maxMorphNormals:_u.maxMorphNormals,numDirLights:Hu.directional.length,numPointLights:Hu.point.length,numSpotLights:Hu.spot.length,numRectAreaLights:Hu.rectArea.length,numHemiLights:Hu.hemi.length,numDirLightShadows:Hu.directionalShadowMap.length,numPointLightShadows:Hu.pointShadowMap.length,numSpotLightShadows:Hu.spotShadowMap.length,numClippingPlanes:Wu,numClipIntersection:Qu,dithering:ju.dithering,shadowMapEnabled:_u.shadowMap.enabled&&Uu.length>0,shadowMapType:_u.shadowMap.type,toneMapping:ju.toneMapped?_u.toneMapping:NoToneMapping,physicallyCorrectLights:_u.physicallyCorrectLights,premultipliedAlpha:ju.premultipliedAlpha,alphaTest:ju.alphaTest,doubleSided:ju.side===DoubleSide,flipSided:ju.side===BackSide,depthPacking:ju.depthPacking!==void 0?ju.depthPacking:!1,index0AttributeName:ju.index0AttributeName,extensionDerivatives:ju.extensions&&ju.extensions.derivatives,extensionFragDepth:ju.extensions&&ju.extensions.fragDepth,extensionDrawBuffers:ju.extensions&&ju.extensions.drawBuffers,extensionShaderTextureLOD:ju.extensions&&ju.extensions.shaderTextureLOD,rendererExtensionFragDepth:Pu||$u.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Pu||$u.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Pu||$u.get("EXT_shader_texture_lod")!==null,onBeforeCompile:ju.onBeforeCompile};return _c},this.getProgramCacheKey=function(ju){var Hu=[];if(ju.shaderID?Hu.push(ju.shaderID):(Hu.push(ju.fragmentShader),Hu.push(ju.vertexShader)),ju.defines!==void 0)for(var Uu in ju.defines)Hu.push(Uu),Hu.push(ju.defines[Uu]);if(ju.isRawShaderMaterial===void 0){for(var zu=0;zu<Vu.length;zu++)Hu.push(ju[Vu[zu]]);Hu.push(_u.outputEncoding),Hu.push(_u.gammaFactor)}return Hu.push(ju.onBeforeCompile.toString()),Hu.join()},this.acquireProgram=function(ju,Hu){for(var Uu,zu=0,Wu=Cu.length;zu<Wu;zu++){var Qu=Cu[zu];if(Qu.cacheKey===Hu){Uu=Qu,++Uu.usedTimes;break}}return Uu===void 0&&(Uu=new WebGLProgram(_u,Hu,ju),Cu.push(Uu)),Uu},this.releaseProgram=function(ju){if(--ju.usedTimes===0){var Hu=Cu.indexOf(ju);Cu[Hu]=Cu[Cu.length-1],Cu.pop(),ju.destroy()}},this.programs=Cu}function WebGLProperties(){var _u=new WeakMap;function $u(Bu){var Lu=_u.get(Bu);return Lu===void 0&&(Lu={},_u.set(Bu,Lu)),Lu}function Tu(Bu){_u.delete(Bu)}function Cu(Bu,Lu,Ru){_u.get(Bu)[Lu]=Ru}function Pu(){_u=new WeakMap}return{get:$u,remove:Tu,update:Cu,dispose:Pu}}function painterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.program!==$u.program?_u.program.id-$u.program.id:_u.material.id!==$u.material.id?_u.material.id-$u.material.id:_u.z!==$u.z?_u.z-$u.z:_u.id-$u.id}function reversePainterSortStable(_u,$u){return _u.groupOrder!==$u.groupOrder?_u.groupOrder-$u.groupOrder:_u.renderOrder!==$u.renderOrder?_u.renderOrder-$u.renderOrder:_u.z!==$u.z?$u.z-_u.z:_u.id-$u.id}function WebGLRenderList(){var _u=[],$u=0,Tu=[],Cu=[],Pu={id:-1};function Bu(){$u=0,Tu.length=0,Cu.length=0}function Lu(Vu,ku,Nu,Gu,ju,Hu){var Uu=_u[$u];return Uu===void 0?(Uu={id:Vu.id,object:Vu,geometry:ku,material:Nu,program:Nu.program||Pu,groupOrder:Gu,renderOrder:Vu.renderOrder,z:ju,group:Hu},_u[$u]=Uu):(Uu.id=Vu.id,Uu.object=Vu,Uu.geometry=ku,Uu.material=Nu,Uu.program=Nu.program||Pu,Uu.groupOrder=Gu,Uu.renderOrder=Vu.renderOrder,Uu.z=ju,Uu.group=Hu),$u++,Uu}function Ru(Vu,ku,Nu,Gu,ju,Hu){var Uu=Lu(Vu,ku,Nu,Gu,ju,Hu);(Nu.transparent===!0?Cu:Tu).push(Uu)}function Ou(Vu,ku,Nu,Gu,ju,Hu){var Uu=Lu(Vu,ku,Nu,Gu,ju,Hu);(Nu.transparent===!0?Cu:Tu).unshift(Uu)}function Du(Vu,ku){Tu.length>1&&Tu.sort(Vu||painterSortStable),Cu.length>1&&Cu.sort(ku||reversePainterSortStable)}function Fu(){for(var Vu=$u,ku=_u.length;Vu<ku;Vu++){var Nu=_u[Vu];if(Nu.id===null)break;Nu.id=null,Nu.object=null,Nu.geometry=null,Nu.material=null,Nu.program=null,Nu.group=null}}return{opaque:Tu,transparent:Cu,init:Bu,push:Ru,unshift:Ou,finish:Fu,sort:Du}}function WebGLRenderLists(){var _u=new WeakMap;function $u(Pu){var Bu=Pu.target;Bu.removeEventListener("dispose",$u),_u.delete(Bu)}function Tu(Pu,Bu){var Lu=_u.get(Pu),Ru;return Lu===void 0?(Ru=new WebGLRenderList,_u.set(Pu,new WeakMap),_u.get(Pu).set(Bu,Ru),Pu.addEventListener("dispose",$u)):(Ru=Lu.get(Bu),Ru===void 0&&(Ru=new WebGLRenderList,Lu.set(Bu,Ru))),Ru}function Cu(){_u=new WeakMap}return{get:Tu,dispose:Cu}}function UniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Tu;switch($u.type){case"DirectionalLight":Tu={direction:new Vector3,color:new Color};break;case"SpotLight":Tu={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Tu={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Tu={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Tu={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _u[$u.id]=Tu,Tu}}}function ShadowUniformsCache(){var _u={};return{get:function($u){if(_u[$u.id]!==void 0)return _u[$u.id];var Tu;switch($u.type){case"DirectionalLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Tu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _u[$u.id]=Tu,Tu}}}var nextVersion=0;function shadowCastingLightsFirst(_u,$u){return($u.castShadow?1:0)-(_u.castShadow?1:0)}function WebGLLights(){for(var _u=new UniformsCache,$u=ShadowUniformsCache(),Tu={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Cu=0;Cu<9;Cu++)Tu.probe.push(new Vector3);var Pu=new Vector3,Bu=new Matrix4,Lu=new Matrix4;function Ru(Ou,Du,Fu){for(var Vu=0,ku=0,Nu=0,Gu=0;Gu<9;Gu++)Tu.probe[Gu].set(0,0,0);var ju=0,Hu=0,Uu=0,zu=0,Wu=0,Qu=0,Ku=0,Yu=0,Xc=Fu.matrixWorldInverse;Ou.sort(shadowCastingLightsFirst);for(var Gu=0,_d=Ou.length;Gu<_d;Gu++){var _f=Ou[Gu],qu=_f.color,Xu=_f.intensity,Zu=_f.distance,_c=_f.shadow&&_f.shadow.map?_f.shadow.map.texture:null;if(_f.isAmbientLight)Vu+=qu.r*Xu,ku+=qu.g*Xu,Nu+=qu.b*Xu;else if(_f.isLightProbe)for(var Ju=0;Ju<9;Ju++)Tu.probe[Ju].addScaledVector(_f.sh.coefficients[Ju],Xu);else if(_f.isDirectionalLight){var _h=_u.get(_f);if(_h.color.copy(_f.color).multiplyScalar(_f.intensity),_h.direction.setFromMatrixPosition(_f.matrixWorld),Pu.setFromMatrixPosition(_f.target.matrixWorld),_h.direction.sub(Pu),_h.direction.transformDirection(Xc),_f.castShadow){var ep=_f.shadow,tp=$u.get(_f);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,Tu.directionalShadow[ju]=tp,Tu.directionalShadowMap[ju]=_c,Tu.directionalShadowMatrix[ju]=_f.shadow.matrix,Qu++}Tu.directional[ju]=_h,ju++}else if(_f.isSpotLight){var _h=_u.get(_f);if(_h.position.setFromMatrixPosition(_f.matrixWorld),_h.position.applyMatrix4(Xc),_h.color.copy(qu).multiplyScalar(Xu),_h.distance=Zu,_h.direction.setFromMatrixPosition(_f.matrixWorld),Pu.setFromMatrixPosition(_f.target.matrixWorld),_h.direction.sub(Pu),_h.direction.transformDirection(Xc),_h.coneCos=Math.cos(_f.angle),_h.penumbraCos=Math.cos(_f.angle*(1-_f.penumbra)),_h.decay=_f.decay,_f.castShadow){var ep=_f.shadow,tp=$u.get(_f);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,Tu.spotShadow[Uu]=tp,Tu.spotShadowMap[Uu]=_c,Tu.spotShadowMatrix[Uu]=_f.shadow.matrix,Yu++}Tu.spot[Uu]=_h,Uu++}else if(_f.isRectAreaLight){var _h=_u.get(_f);_h.color.copy(qu).multiplyScalar(Xu),_h.position.setFromMatrixPosition(_f.matrixWorld),_h.position.applyMatrix4(Xc),Lu.identity(),Bu.copy(_f.matrixWorld),Bu.premultiply(Xc),Lu.extractRotation(Bu),_h.halfWidth.set(_f.width*.5,0,0),_h.halfHeight.set(0,_f.height*.5,0),_h.halfWidth.applyMatrix4(Lu),_h.halfHeight.applyMatrix4(Lu),Tu.rectArea[zu]=_h,zu++}else if(_f.isPointLight){var _h=_u.get(_f);if(_h.position.setFromMatrixPosition(_f.matrixWorld),_h.position.applyMatrix4(Xc),_h.color.copy(_f.color).multiplyScalar(_f.intensity),_h.distance=_f.distance,_h.decay=_f.decay,_f.castShadow){var ep=_f.shadow,tp=$u.get(_f);tp.shadowBias=ep.bias,tp.shadowRadius=ep.radius,tp.shadowMapSize=ep.mapSize,tp.shadowCameraNear=ep.camera.near,tp.shadowCameraFar=ep.camera.far,Tu.pointShadow[Hu]=tp,Tu.pointShadowMap[Hu]=_c,Tu.pointShadowMatrix[Hu]=_f.shadow.matrix,Ku++}Tu.point[Hu]=_h,Hu++}else if(_f.isHemisphereLight){var _h=_u.get(_f);_h.direction.setFromMatrixPosition(_f.matrixWorld),_h.direction.transformDirection(Xc),_h.direction.normalize(),_h.skyColor.copy(_f.color).multiplyScalar(Xu),_h.groundColor.copy(_f.groundColor).multiplyScalar(Xu),Tu.hemi[Wu]=_h,Wu++}}Tu.ambient[0]=Vu,Tu.ambient[1]=ku,Tu.ambient[2]=Nu;var rp=Tu.hash;(rp.directionalLength!==ju||rp.pointLength!==Hu||rp.spotLength!==Uu||rp.rectAreaLength!==zu||rp.hemiLength!==Wu||rp.numDirectionalShadows!==Qu||rp.numPointShadows!==Ku||rp.numSpotShadows!==Yu)&&(Tu.directional.length=ju,Tu.spot.length=Uu,Tu.rectArea.length=zu,Tu.point.length=Hu,Tu.hemi.length=Wu,Tu.directionalShadow.length=Qu,Tu.directionalShadowMap.length=Qu,Tu.pointShadow.length=Ku,Tu.pointShadowMap.length=Ku,Tu.spotShadow.length=Yu,Tu.spotShadowMap.length=Yu,Tu.directionalShadowMatrix.length=Qu,Tu.pointShadowMatrix.length=Ku,Tu.spotShadowMatrix.length=Yu,rp.directionalLength=ju,rp.pointLength=Hu,rp.spotLength=Uu,rp.rectAreaLength=zu,rp.hemiLength=Wu,rp.numDirectionalShadows=Qu,rp.numPointShadows=Ku,rp.numSpotShadows=Yu,Tu.version=nextVersion++)}return{setup:Ru,state:Tu}}function WebGLRenderState(){var _u=new WebGLLights,$u=[],Tu=[];function Cu(){$u.length=0,Tu.length=0}function Pu(Ou){$u.push(Ou)}function Bu(Ou){Tu.push(Ou)}function Lu(Ou){_u.setup($u,Tu,Ou)}var Ru={lightsArray:$u,shadowsArray:Tu,lights:_u};return{init:Cu,state:Ru,setupLights:Lu,pushLight:Pu,pushShadow:Bu}}function WebGLRenderStates(){var _u=new WeakMap;function $u(Pu){var Bu=Pu.target;Bu.removeEventListener("dispose",$u),_u.delete(Bu)}function Tu(Pu,Bu){var Lu;return _u.has(Pu)===!1?(Lu=new WebGLRenderState,_u.set(Pu,new WeakMap),_u.get(Pu).set(Bu,Lu),Pu.addEventListener("dispose",$u)):_u.get(Pu).has(Bu)===!1?(Lu=new WebGLRenderState,_u.get(Pu).set(Bu,Lu)):Lu=_u.get(Pu).get(Bu),Lu}function Cu(){_u=new WeakMap}return{get:Tu,dispose:Cu}}function MeshDepthMaterial(_u){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(_u)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.depthPacking=_u.depthPacking,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this};function MeshDistanceMaterial(_u){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(_u)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.referencePosition.copy(_u.referencePosition),this.nearDistance=_u.nearDistance,this.farDistance=_u.farDistance,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.map=_u.map,this.alphaMap=_u.alphaMap,this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(_u,$u,Tu){var Cu=new Frustum,Pu=new Vector2,Bu=new Vector2,Lu=new Vector4,Ru=[],Ou=[],Du={},Fu={0:BackSide,1:FrontSide,2:DoubleSide},Vu=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),ku=Vu.clone();ku.defines.HORIZONAL_PASS=1;var Nu=new BufferGeometry;Nu.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Gu=new Mesh(Nu,Vu),ju=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Ku,Yu,Xc){if(ju.enabled!==!1&&!(ju.autoUpdate===!1&&ju.needsUpdate===!1)&&Ku.length!==0){var _d=_u.getRenderTarget(),_f=_u.getActiveCubeFace(),qu=_u.getActiveMipmapLevel(),Xu=_u.state;Xu.setBlending(NoBlending),Xu.buffers.color.setClear(1,1,1,1),Xu.buffers.depth.setTest(!0),Xu.setScissorTest(!1);for(var Zu=0,_c=Ku.length;Zu<_c;Zu++){var Ju=Ku[Zu],_h=Ju.shadow;if(_h===void 0){console.warn("THREE.WebGLShadowMap:",Ju,"has no shadow.");continue}Pu.copy(_h.mapSize);var ep=_h.getFrameExtents();if(Pu.multiply(ep),Bu.copy(_h.mapSize),(Pu.x>Tu||Pu.y>Tu)&&(Pu.x>Tu&&(Bu.x=Math.floor(Tu/ep.x),Pu.x=Bu.x*ep.x,_h.mapSize.x=Bu.x),Pu.y>Tu&&(Bu.y=Math.floor(Tu/ep.y),Pu.y=Bu.y*ep.y,_h.mapSize.y=Bu.y)),_h.map===null&&!_h.isPointLightShadow&&this.type===VSMShadowMap){var tp={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};_h.map=new WebGLRenderTarget(Pu.x,Pu.y,tp),_h.map.texture.name=Ju.name+".shadowMap",_h.mapPass=new WebGLRenderTarget(Pu.x,Pu.y,tp),_h.camera.updateProjectionMatrix()}if(_h.map===null){var tp={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};_h.map=new WebGLRenderTarget(Pu.x,Pu.y,tp),_h.map.texture.name=Ju.name+".shadowMap",_h.camera.updateProjectionMatrix()}_u.setRenderTarget(_h.map),_u.clear();for(var rp=_h.getViewportCount(),dp=0;dp<rp;dp++){var cp=_h.getViewport(dp);Lu.set(Bu.x*cp.x,Bu.y*cp.y,Bu.x*cp.z,Bu.y*cp.w),Xu.viewport(Lu),_h.updateMatrices(Ju,dp),Cu=_h.getFrustum(),Qu(Yu,Xc,_h.camera,Ju,this.type)}!_h.isPointLightShadow&&this.type===VSMShadowMap&&Hu(_h,Xc)}ju.needsUpdate=!1,_u.setRenderTarget(_d,_f,qu)}};function Hu(Ku,Yu){var Xc=$u.update(Gu);Vu.uniforms.shadow_pass.value=Ku.map.texture,Vu.uniforms.resolution.value=Ku.mapSize,Vu.uniforms.radius.value=Ku.radius,_u.setRenderTarget(Ku.mapPass),_u.clear(),_u.renderBufferDirect(Yu,null,Xc,Vu,Gu,null),ku.uniforms.shadow_pass.value=Ku.mapPass.texture,ku.uniforms.resolution.value=Ku.mapSize,ku.uniforms.radius.value=Ku.radius,_u.setRenderTarget(Ku.map),_u.clear(),_u.renderBufferDirect(Yu,null,Xc,ku,Gu,null)}function Uu(Ku,Yu,Xc){var _d=Ku<<0|Yu<<1|Xc<<2,_f=Ru[_d];return _f===void 0&&(_f=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:Ku,skinning:Yu}),Ru[_d]=_f),_f}function zu(Ku,Yu,Xc){var _d=Ku<<0|Yu<<1|Xc<<2,_f=Ou[_d];return _f===void 0&&(_f=new MeshDistanceMaterial({morphTargets:Ku,skinning:Yu}),Ou[_d]=_f),_f}function Wu(Ku,Yu,Xc,_d,_f,qu,Xu){var Zu=null,_c=Uu,Ju=Ku.customDepthMaterial;if(_d.isPointLight===!0&&(_c=zu,Ju=Ku.customDistanceMaterial),Ju===void 0){var _h=!1;Xc.morphTargets===!0&&(_h=Yu.morphAttributes&&Yu.morphAttributes.position&&Yu.morphAttributes.position.length>0);var ep=!1;Ku.isSkinnedMesh===!0&&(Xc.skinning===!0?ep=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Ku));var tp=Ku.isInstancedMesh===!0;Zu=_c(_h,ep,tp)}else Zu=Ju;if(_u.localClippingEnabled&&Xc.clipShadows===!0&&Xc.clippingPlanes.length!==0){var rp=Zu.uuid,dp=Xc.uuid,cp=Du[rp];cp===void 0&&(cp={},Du[rp]=cp);var Sp=cp[dp];Sp===void 0&&(Sp=Zu.clone(),cp[dp]=Sp),Zu=Sp}return Zu.visible=Xc.visible,Zu.wireframe=Xc.wireframe,Xu===VSMShadowMap?Zu.side=Xc.shadowSide!==null?Xc.shadowSide:Xc.side:Zu.side=Xc.shadowSide!==null?Xc.shadowSide:Fu[Xc.side],Zu.clipShadows=Xc.clipShadows,Zu.clippingPlanes=Xc.clippingPlanes,Zu.clipIntersection=Xc.clipIntersection,Zu.wireframeLinewidth=Xc.wireframeLinewidth,Zu.linewidth=Xc.linewidth,_d.isPointLight===!0&&Zu.isMeshDistanceMaterial===!0&&(Zu.referencePosition.setFromMatrixPosition(_d.matrixWorld),Zu.nearDistance=_f,Zu.farDistance=qu),Zu}function Qu(Ku,Yu,Xc,_d,_f){if(Ku.visible!==!1){var qu=Ku.layers.test(Yu.layers);if(qu&&(Ku.isMesh||Ku.isLine||Ku.isPoints)&&(Ku.castShadow||Ku.receiveShadow&&_f===VSMShadowMap)&&(!Ku.frustumCulled||Cu.intersectsObject(Ku))){Ku.modelViewMatrix.multiplyMatrices(Xc.matrixWorldInverse,Ku.matrixWorld);var Xu=$u.update(Ku),Zu=Ku.material;if(Array.isArray(Zu))for(var _c=Xu.groups,Ju=0,_h=_c.length;Ju<_h;Ju++){var ep=_c[Ju],tp=Zu[ep.materialIndex];if(tp&&tp.visible){var rp=Wu(Ku,Xu,tp,_d,Xc.near,Xc.far,_f);_u.renderBufferDirect(Xc,null,Xu,rp,Ku,ep)}}else if(Zu.visible){var rp=Wu(Ku,Xu,Zu,_d,Xc.near,Xc.far,_f);_u.renderBufferDirect(Xc,null,Xu,rp,Ku,null)}}for(var dp=Ku.children,cp=0,Sp=dp.length;cp<Sp;cp++)Qu(dp[cp],Yu,Xc,_d,_f)}}}function WebGLState(_u,$u,Tu){var Cu=Tu.isWebGL2;function Pu(){var xp=!1,Qp=new Vector4,Zp=null,tm=new Vector4(0,0,0,0);return{setMask:function(em){Zp!==em&&!xp&&(_u.colorMask(em,em,em,em),Zp=em)},setLocked:function(em){xp=em},setClear:function(em,lm,pm,mm,Sm){Sm===!0&&(em*=mm,lm*=mm,pm*=mm),Qp.set(em,lm,pm,mm),tm.equals(Qp)===!1&&(_u.clearColor(em,lm,pm,mm),tm.copy(Qp))},reset:function(){xp=!1,Zp=null,tm.set(-1,0,0,0)}}}function Bu(){var xp=!1,Qp=null,Zp=null,tm=null;return{setTest:function(em){em?hp(2929):up(2929)},setMask:function(em){Qp!==em&&!xp&&(_u.depthMask(em),Qp=em)},setFunc:function(em){if(Zp!==em){if(em)switch(em){case NeverDepth:_u.depthFunc(512);break;case AlwaysDepth:_u.depthFunc(519);break;case LessDepth:_u.depthFunc(513);break;case LessEqualDepth:_u.depthFunc(515);break;case EqualDepth:_u.depthFunc(514);break;case GreaterEqualDepth:_u.depthFunc(518);break;case GreaterDepth:_u.depthFunc(516);break;case NotEqualDepth:_u.depthFunc(517);break;default:_u.depthFunc(515)}else _u.depthFunc(515);Zp=em}},setLocked:function(em){xp=em},setClear:function(em){tm!==em&&(_u.clearDepth(em),tm=em)},reset:function(){xp=!1,Qp=null,Zp=null,tm=null}}}function Lu(){var xp=!1,Qp=null,Zp=null,tm=null,em=null,lm=null,pm=null,mm=null,Sm=null;return{setTest:function(fm){xp||(fm?hp(2960):up(2960))},setMask:function(fm){Qp!==fm&&!xp&&(_u.stencilMask(fm),Qp=fm)},setFunc:function(fm,xm,wm){(Zp!==fm||tm!==xm||em!==wm)&&(_u.stencilFunc(fm,xm,wm),Zp=fm,tm=xm,em=wm)},setOp:function(fm,xm,wm){(lm!==fm||pm!==xm||mm!==wm)&&(_u.stencilOp(fm,xm,wm),lm=fm,pm=xm,mm=wm)},setLocked:function(fm){xp=fm},setClear:function(fm){Sm!==fm&&(_u.clearStencil(fm),Sm=fm)},reset:function(){xp=!1,Qp=null,Zp=null,tm=null,em=null,lm=null,pm=null,mm=null,Sm=null}}}var Ru=new Pu,Ou=new Bu,Du=new Lu,Fu=_u.getParameter(34921),Vu=new Uint8Array(Fu),ku=new Uint8Array(Fu),Nu=new Uint8Array(Fu),Gu={},ju=null,Hu=null,Uu=null,zu=null,Wu=null,Qu=null,Ku=null,Yu=null,Xc=null,_d=!1,_f=null,qu=null,Xu=null,Zu=null,_c=null,Ju=_u.getParameter(35661),_h=!1,ep=0,tp=_u.getParameter(7938);tp.indexOf("WebGL")!==-1?(ep=parseFloat(/^WebGL\ ([0-9])/.exec(tp)[1]),_h=ep>=1):tp.indexOf("OpenGL ES")!==-1&&(ep=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(tp)[1]),_h=ep>=2);var rp=null,dp={},cp=new Vector4,Sp=new Vector4;function yp(xp,Qp,Zp){var tm=new Uint8Array(4),em=_u.createTexture();_u.bindTexture(xp,em),_u.texParameteri(xp,10241,9728),_u.texParameteri(xp,10240,9728);for(var lm=0;lm<Zp;lm++)_u.texImage2D(Qp+lm,0,6408,1,1,0,6408,5121,tm);return em}var Bp={};Bp[3553]=yp(3553,3553,1),Bp[34067]=yp(34067,34069,6),Ru.setClear(0,0,0,1),Ou.setClear(1),Du.setClear(0),hp(2929),Ou.setFunc(LessEqualDepth),np(!1),sp(CullFaceBack),hp(2884),Dp(NoBlending);function _p(){for(var xp=0,Qp=Vu.length;xp<Qp;xp++)Vu[xp]=0}function Cp(xp){Ep(xp,0)}function Ep(xp,Qp){if(Vu[xp]=1,ku[xp]===0&&(_u.enableVertexAttribArray(xp),ku[xp]=1),Nu[xp]!==Qp){var Zp=Cu?_u:$u.get("ANGLE_instanced_arrays");Zp[Cu?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](xp,Qp),Nu[xp]=Qp}}function ap(){for(var xp=0,Qp=ku.length;xp!==Qp;++xp)ku[xp]!==Vu[xp]&&(_u.disableVertexAttribArray(xp),ku[xp]=0)}function ip(xp,Qp,Zp,tm,em,lm){Cu===!0&&(Zp===5124||Zp===5125)?_u.vertexAttribIPointer(xp,Qp,Zp,tm,em,lm):_u.vertexAttribPointer(xp,Qp,Zp,tm,em,lm)}function hp(xp){Gu[xp]!==!0&&(_u.enable(xp),Gu[xp]=!0)}function up(xp){Gu[xp]!==!1&&(_u.disable(xp),Gu[xp]=!1)}function pp(xp){return ju!==xp?(_u.useProgram(xp),ju=xp,!0):!1}var gp={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Cu)gp[MinEquation]=32775,gp[MaxEquation]=32776;else{var Ap=$u.get("EXT_blend_minmax");Ap!==null&&(gp[MinEquation]=Ap.MIN_EXT,gp[MaxEquation]=Ap.MAX_EXT)}var Mp={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Dp(xp,Qp,Zp,tm,em,lm,pm,mm){if(xp===NoBlending){Hu&&(up(3042),Hu=!1);return}if(Hu||(hp(3042),Hu=!0),xp!==CustomBlending){if(xp!==Uu||mm!==_d){if((zu!==AddEquation||Ku!==AddEquation)&&(_u.blendEquation(32774),zu=AddEquation,Ku=AddEquation),mm)switch(xp){case NormalBlending:_u.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:_u.blendFunc(1,1);break;case SubtractiveBlending:_u.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:_u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",xp);break}else switch(xp){case NormalBlending:_u.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:_u.blendFunc(770,1);break;case SubtractiveBlending:_u.blendFunc(0,769);break;case MultiplyBlending:_u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",xp);break}Wu=null,Qu=null,Yu=null,Xc=null,Uu=xp,_d=mm}return}em=em||Qp,lm=lm||Zp,pm=pm||tm,(Qp!==zu||em!==Ku)&&(_u.blendEquationSeparate(gp[Qp],gp[em]),zu=Qp,Ku=em),(Zp!==Wu||tm!==Qu||lm!==Yu||pm!==Xc)&&(_u.blendFuncSeparate(Mp[Zp],Mp[tm],Mp[lm],Mp[pm]),Wu=Zp,Qu=tm,Yu=lm,Xc=pm),Uu=xp,_d=null}function $p(xp,Qp){xp.side===DoubleSide?up(2884):hp(2884);var Zp=xp.side===BackSide;Qp&&(Zp=!Zp),np(Zp),xp.blending===NormalBlending&&xp.transparent===!1?Dp(NoBlending):Dp(xp.blending,xp.blendEquation,xp.blendSrc,xp.blendDst,xp.blendEquationAlpha,xp.blendSrcAlpha,xp.blendDstAlpha,xp.premultipliedAlpha),Ou.setFunc(xp.depthFunc),Ou.setTest(xp.depthTest),Ou.setMask(xp.depthWrite),Ru.setMask(xp.colorWrite);var tm=xp.stencilWrite;Du.setTest(tm),tm&&(Du.setMask(xp.stencilWriteMask),Du.setFunc(xp.stencilFunc,xp.stencilRef,xp.stencilFuncMask),Du.setOp(xp.stencilFail,xp.stencilZFail,xp.stencilZPass)),Tp(xp.polygonOffset,xp.polygonOffsetFactor,xp.polygonOffsetUnits)}function np(xp){_f!==xp&&(xp?_u.frontFace(2304):_u.frontFace(2305),_f=xp)}function sp(xp){xp!==CullFaceNone?(hp(2884),xp!==qu&&(xp===CullFaceBack?_u.cullFace(1029):xp===CullFaceFront?_u.cullFace(1028):_u.cullFace(1032))):up(2884),qu=xp}function Pp(xp){xp!==Xu&&(_h&&_u.lineWidth(xp),Xu=xp)}function Tp(xp,Qp,Zp){xp?(hp(32823),(Zu!==Qp||_c!==Zp)&&(_u.polygonOffset(Qp,Zp),Zu=Qp,_c=Zp)):up(32823)}function Np(xp){xp?hp(3089):up(3089)}function Vp(xp){xp===void 0&&(xp=33984+Ju-1),rp!==xp&&(_u.activeTexture(xp),rp=xp)}function Gp(xp,Qp){rp===null&&Vp();var Zp=dp[rp];Zp===void 0&&(Zp={type:void 0,texture:void 0},dp[rp]=Zp),(Zp.type!==xp||Zp.texture!==Qp)&&(_u.bindTexture(xp,Qp||Bp[xp]),Zp.type=xp,Zp.texture=Qp)}function qp(){var xp=dp[rp];xp!==void 0&&xp.type!==void 0&&(_u.bindTexture(xp.type,null),xp.type=void 0,xp.texture=void 0)}function Wp(){try{_u.compressedTexImage2D.apply(_u,arguments)}catch(xp){console.error("THREE.WebGLState:",xp)}}function Jp(){try{_u.texImage2D.apply(_u,arguments)}catch(xp){console.error("THREE.WebGLState:",xp)}}function Hp(){try{_u.texImage3D.apply(_u,arguments)}catch(xp){console.error("THREE.WebGLState:",xp)}}function Kp(xp){cp.equals(xp)===!1&&(_u.scissor(xp.x,xp.y,xp.z,xp.w),cp.copy(xp))}function jp(xp){Sp.equals(xp)===!1&&(_u.viewport(xp.x,xp.y,xp.z,xp.w),Sp.copy(xp))}function Yp(){for(var xp=0;xp<ku.length;xp++)ku[xp]===1&&(_u.disableVertexAttribArray(xp),ku[xp]=0);Gu={},rp=null,dp={},ju=null,Uu=null,_f=null,qu=null,Ru.reset(),Ou.reset(),Du.reset()}return{buffers:{color:Ru,depth:Ou,stencil:Du},initAttributes:_p,enableAttribute:Cp,enableAttributeAndDivisor:Ep,disableUnusedAttributes:ap,vertexAttribPointer:ip,enable:hp,disable:up,useProgram:pp,setBlending:Dp,setMaterial:$p,setFlipSided:np,setCullFace:sp,setLineWidth:Pp,setPolygonOffset:Tp,setScissorTest:Np,activeTexture:Vp,bindTexture:Gp,unbindTexture:qp,compressedTexImage2D:Wp,texImage2D:Jp,texImage3D:Hp,scissor:Kp,viewport:jp,reset:Yp}}function WebGLTextures(_u,$u,Tu,Cu,Pu,Bu,Lu){var Ru=Pu.isWebGL2,Ou=Pu.maxTextures,Du=Pu.maxCubemapSize,Fu=Pu.maxTextureSize,Vu=Pu.maxSamples,ku=new WeakMap,Nu,Gu=!1;try{Gu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ju(np,sp){return Gu?new OffscreenCanvas(np,sp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Hu(np,sp,Pp,Tp){var Np=1;if((np.width>Tp||np.height>Tp)&&(Np=Tp/Math.max(np.width,np.height)),Np<1||sp===!0)if(typeof HTMLImageElement!="undefined"&&np instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&np instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&np instanceof ImageBitmap){var Vp=sp?MathUtils.floorPowerOfTwo:Math.floor,Gp=Vp(Np*np.width),qp=Vp(Np*np.height);Nu===void 0&&(Nu=ju(Gp,qp));var Wp=Pp?ju(Gp,qp):Nu;Wp.width=Gp,Wp.height=qp;var Jp=Wp.getContext("2d");return Jp.drawImage(np,0,0,Gp,qp),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+np.width+"x"+np.height+") to ("+Gp+"x"+qp+")."),Wp}else return"data"in np&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+np.width+"x"+np.height+")."),np;return np}function Uu(np){return MathUtils.isPowerOfTwo(np.width)&&MathUtils.isPowerOfTwo(np.height)}function zu(np){return Ru?!1:np.wrapS!==ClampToEdgeWrapping||np.wrapT!==ClampToEdgeWrapping||np.minFilter!==NearestFilter&&np.minFilter!==LinearFilter}function Wu(np,sp){return np.generateMipmaps&&sp&&np.minFilter!==NearestFilter&&np.minFilter!==LinearFilter}function Qu(np,sp,Pp,Tp){_u.generateMipmap(np);var Np=Cu.get(sp);Np.__maxMipLevel=Math.log(Math.max(Pp,Tp))*Math.LOG2E}function Ku(np,sp,Pp){if(Ru===!1)return sp;if(np!==null){if(_u[np]!==void 0)return _u[np];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+np+"'")}var Tp=sp;return sp===6403&&(Pp===5126&&(Tp=33326),Pp===5131&&(Tp=33325),Pp===5121&&(Tp=33321)),sp===6407&&(Pp===5126&&(Tp=34837),Pp===5131&&(Tp=34843),Pp===5121&&(Tp=32849)),sp===6408&&(Pp===5126&&(Tp=34836),Pp===5131&&(Tp=34842),Pp===5121&&(Tp=32856)),(Tp===33325||Tp===33326||Tp===34842||Tp===34836)&&$u.get("EXT_color_buffer_float"),Tp}function Yu(np){return np===NearestFilter||np===NearestMipmapNearestFilter||np===NearestMipmapLinearFilter?9728:9729}function Xc(np){var sp=np.target;sp.removeEventListener("dispose",Xc),_f(sp),sp.isVideoTexture&&ku.delete(sp),Lu.memory.textures--}function _d(np){var sp=np.target;sp.removeEventListener("dispose",_d),qu(sp),Lu.memory.textures--}function _f(np){var sp=Cu.get(np);sp.__webglInit!==void 0&&(_u.deleteTexture(sp.__webglTexture),Cu.remove(np))}function qu(np){var sp=Cu.get(np),Pp=Cu.get(np.texture);if(!!np){if(Pp.__webglTexture!==void 0&&_u.deleteTexture(Pp.__webglTexture),np.depthTexture&&np.depthTexture.dispose(),np.isWebGLCubeRenderTarget)for(var Tp=0;Tp<6;Tp++)_u.deleteFramebuffer(sp.__webglFramebuffer[Tp]),sp.__webglDepthbuffer&&_u.deleteRenderbuffer(sp.__webglDepthbuffer[Tp]);else _u.deleteFramebuffer(sp.__webglFramebuffer),sp.__webglDepthbuffer&&_u.deleteRenderbuffer(sp.__webglDepthbuffer),sp.__webglMultisampledFramebuffer&&_u.deleteFramebuffer(sp.__webglMultisampledFramebuffer),sp.__webglColorRenderbuffer&&_u.deleteRenderbuffer(sp.__webglColorRenderbuffer),sp.__webglDepthRenderbuffer&&_u.deleteRenderbuffer(sp.__webglDepthRenderbuffer);Cu.remove(np.texture),Cu.remove(np)}}var Xu=0;function Zu(){Xu=0}function _c(){var np=Xu;return np>=Ou&&console.warn("THREE.WebGLTextures: Trying to use "+np+" texture units while this GPU supports only "+Ou),Xu+=1,np}function Ju(np,sp){var Pp=Cu.get(np);if(np.isVideoTexture&&gp(np),np.version>0&&Pp.__version!==np.version){var Tp=np.image;if(Tp===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Tp.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Bp(Pp,np,sp);return}}Tu.activeTexture(33984+sp),Tu.bindTexture(3553,Pp.__webglTexture)}function _h(np,sp){var Pp=Cu.get(np);if(np.version>0&&Pp.__version!==np.version){Bp(Pp,np,sp);return}Tu.activeTexture(33984+sp),Tu.bindTexture(35866,Pp.__webglTexture)}function ep(np,sp){var Pp=Cu.get(np);if(np.version>0&&Pp.__version!==np.version){Bp(Pp,np,sp);return}Tu.activeTexture(33984+sp),Tu.bindTexture(32879,Pp.__webglTexture)}function tp(np,sp){if(np.image.length===6){var Pp=Cu.get(np);if(np.version>0&&Pp.__version!==np.version){yp(Pp,np),Tu.activeTexture(33984+sp),Tu.bindTexture(34067,Pp.__webglTexture),_u.pixelStorei(37440,np.flipY);for(var Tp=np&&(np.isCompressedTexture||np.image[0].isCompressedTexture),Np=np.image[0]&&np.image[0].isDataTexture,Vp=[],Gp=0;Gp<6;Gp++)!Tp&&!Np?Vp[Gp]=Hu(np.image[Gp],!1,!0,Du):Vp[Gp]=Np?np.image[Gp].image:np.image[Gp];var qp=Vp[0],Wp=Uu(qp)||Ru,Jp=Bu.convert(np.format),Hp=Bu.convert(np.type),Kp=Ku(np.internalFormat,Jp,Hp);Sp(34067,np,Wp);var jp;if(Tp){for(var Gp=0;Gp<6;Gp++){jp=Vp[Gp].mipmaps;for(var Yp=0;Yp<jp.length;Yp++){var xp=jp[Yp];np.format!==RGBAFormat&&np.format!==RGBFormat?Jp!==null?Tu.compressedTexImage2D(34069+Gp,Yp,Kp,xp.width,xp.height,0,xp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Tu.texImage2D(34069+Gp,Yp,Kp,xp.width,xp.height,0,Jp,Hp,xp.data)}}Pp.__maxMipLevel=jp.length-1}else{jp=np.mipmaps;for(var Gp=0;Gp<6;Gp++)if(Np){Tu.texImage2D(34069+Gp,0,Kp,Vp[Gp].width,Vp[Gp].height,0,Jp,Hp,Vp[Gp].data);for(var Yp=0;Yp<jp.length;Yp++){var xp=jp[Yp],Qp=xp.image[Gp].image;Tu.texImage2D(34069+Gp,Yp+1,Kp,Qp.width,Qp.height,0,Jp,Hp,Qp.data)}}else{Tu.texImage2D(34069+Gp,0,Kp,Jp,Hp,Vp[Gp]);for(var Yp=0;Yp<jp.length;Yp++){var xp=jp[Yp];Tu.texImage2D(34069+Gp,Yp+1,Kp,Jp,Hp,xp.image[Gp])}}Pp.__maxMipLevel=jp.length}Wu(np,Wp)&&Qu(34067,np,qp.width,qp.height),Pp.__version=np.version,np.onUpdate&&np.onUpdate(np)}else Tu.activeTexture(33984+sp),Tu.bindTexture(34067,Pp.__webglTexture)}}function rp(np,sp){Tu.activeTexture(33984+sp),Tu.bindTexture(34067,Cu.get(np).__webglTexture)}var dp={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},cp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Sp(np,sp,Pp){Pp?(_u.texParameteri(np,10242,dp[sp.wrapS]),_u.texParameteri(np,10243,dp[sp.wrapT]),(np===32879||np===35866)&&_u.texParameteri(np,32882,dp[sp.wrapR]),_u.texParameteri(np,10240,cp[sp.magFilter]),_u.texParameteri(np,10241,cp[sp.minFilter])):(_u.texParameteri(np,10242,33071),_u.texParameteri(np,10243,33071),(np===32879||np===35866)&&_u.texParameteri(np,32882,33071),(sp.wrapS!==ClampToEdgeWrapping||sp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_u.texParameteri(np,10240,Yu(sp.magFilter)),_u.texParameteri(np,10241,Yu(sp.minFilter)),sp.minFilter!==NearestFilter&&sp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Tp=$u.get("EXT_texture_filter_anisotropic");if(Tp){if(sp.type===FloatType&&$u.get("OES_texture_float_linear")===null||sp.type===HalfFloatType&&(Ru||$u.get("OES_texture_half_float_linear"))===null)return;(sp.anisotropy>1||Cu.get(sp).__currentAnisotropy)&&(_u.texParameterf(np,Tp.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(sp.anisotropy,Pu.getMaxAnisotropy())),Cu.get(sp).__currentAnisotropy=sp.anisotropy)}}function yp(np,sp){np.__webglInit===void 0&&(np.__webglInit=!0,sp.addEventListener("dispose",Xc),np.__webglTexture=_u.createTexture(),Lu.memory.textures++)}function Bp(np,sp,Pp){var Tp=3553;sp.isDataTexture2DArray&&(Tp=35866),sp.isDataTexture3D&&(Tp=32879),yp(np,sp),Tu.activeTexture(33984+Pp),Tu.bindTexture(Tp,np.__webglTexture),_u.pixelStorei(37440,sp.flipY),_u.pixelStorei(37441,sp.premultiplyAlpha),_u.pixelStorei(3317,sp.unpackAlignment);var Np=zu(sp)&&Uu(sp.image)===!1,Vp=Hu(sp.image,Np,!1,Fu),Gp=Uu(Vp)||Ru,qp=Bu.convert(sp.format),Wp=Bu.convert(sp.type),Jp=Ku(sp.internalFormat,qp,Wp);Sp(Tp,sp,Gp);var Hp,Kp=sp.mipmaps;if(sp.isDepthTexture)Jp=6402,Ru?sp.type===FloatType?Jp=36012:sp.type===UnsignedIntType?Jp=33190:sp.type===UnsignedInt248Type?Jp=35056:Jp=33189:sp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),sp.format===DepthFormat&&Jp===6402&&sp.type!==UnsignedShortType&&sp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),sp.type=UnsignedShortType,Wp=Bu.convert(sp.type)),sp.format===DepthStencilFormat&&Jp===6402&&(Jp=34041,sp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),sp.type=UnsignedInt248Type,Wp=Bu.convert(sp.type))),Tu.texImage2D(3553,0,Jp,Vp.width,Vp.height,0,qp,Wp,null);else if(sp.isDataTexture)if(Kp.length>0&&Gp){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],Tu.texImage2D(3553,jp,Jp,Hp.width,Hp.height,0,qp,Wp,Hp.data);sp.generateMipmaps=!1,np.__maxMipLevel=Kp.length-1}else Tu.texImage2D(3553,0,Jp,Vp.width,Vp.height,0,qp,Wp,Vp.data),np.__maxMipLevel=0;else if(sp.isCompressedTexture){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],sp.format!==RGBAFormat&&sp.format!==RGBFormat?qp!==null?Tu.compressedTexImage2D(3553,jp,Jp,Hp.width,Hp.height,0,Hp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tu.texImage2D(3553,jp,Jp,Hp.width,Hp.height,0,qp,Wp,Hp.data);np.__maxMipLevel=Kp.length-1}else if(sp.isDataTexture2DArray)Tu.texImage3D(35866,0,Jp,Vp.width,Vp.height,Vp.depth,0,qp,Wp,Vp.data),np.__maxMipLevel=0;else if(sp.isDataTexture3D)Tu.texImage3D(32879,0,Jp,Vp.width,Vp.height,Vp.depth,0,qp,Wp,Vp.data),np.__maxMipLevel=0;else if(Kp.length>0&&Gp){for(var jp=0,Yp=Kp.length;jp<Yp;jp++)Hp=Kp[jp],Tu.texImage2D(3553,jp,Jp,qp,Wp,Hp);sp.generateMipmaps=!1,np.__maxMipLevel=Kp.length-1}else Tu.texImage2D(3553,0,Jp,qp,Wp,Vp),np.__maxMipLevel=0;Wu(sp,Gp)&&Qu(Tp,sp,Vp.width,Vp.height),np.__version=sp.version,sp.onUpdate&&sp.onUpdate(sp)}function _p(np,sp,Pp,Tp){var Np=Bu.convert(sp.texture.format),Vp=Bu.convert(sp.texture.type),Gp=Ku(sp.texture.internalFormat,Np,Vp);Tu.texImage2D(Tp,0,Gp,sp.width,sp.height,0,Np,Vp,null),_u.bindFramebuffer(36160,np),_u.framebufferTexture2D(36160,Pp,Tp,Cu.get(sp.texture).__webglTexture,0),_u.bindFramebuffer(36160,null)}function Cp(np,sp,Pp){if(_u.bindRenderbuffer(36161,np),sp.depthBuffer&&!sp.stencilBuffer){var Tp=33189;if(Pp){var Np=sp.depthTexture;Np&&Np.isDepthTexture&&(Np.type===FloatType?Tp=36012:Np.type===UnsignedIntType&&(Tp=33190));var Vp=pp(sp);_u.renderbufferStorageMultisample(36161,Vp,Tp,sp.width,sp.height)}else _u.renderbufferStorage(36161,Tp,sp.width,sp.height);_u.framebufferRenderbuffer(36160,36096,36161,np)}else if(sp.depthBuffer&&sp.stencilBuffer){if(Pp){var Vp=pp(sp);_u.renderbufferStorageMultisample(36161,Vp,35056,sp.width,sp.height)}else _u.renderbufferStorage(36161,34041,sp.width,sp.height);_u.framebufferRenderbuffer(36160,33306,36161,np)}else{var Gp=Bu.convert(sp.texture.format),qp=Bu.convert(sp.texture.type),Tp=Ku(sp.texture.internalFormat,Gp,qp);if(Pp){var Vp=pp(sp);_u.renderbufferStorageMultisample(36161,Vp,Tp,sp.width,sp.height)}else _u.renderbufferStorage(36161,Tp,sp.width,sp.height)}_u.bindRenderbuffer(36161,null)}function Ep(np,sp){var Pp=sp&&sp.isWebGLCubeRenderTarget;if(Pp)throw new Error("Depth Texture with cube render targets is not supported");if(_u.bindFramebuffer(36160,np),!(sp.depthTexture&&sp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Cu.get(sp.depthTexture).__webglTexture||sp.depthTexture.image.width!==sp.width||sp.depthTexture.image.height!==sp.height)&&(sp.depthTexture.image.width=sp.width,sp.depthTexture.image.height=sp.height,sp.depthTexture.needsUpdate=!0),Ju(sp.depthTexture,0);var Tp=Cu.get(sp.depthTexture).__webglTexture;if(sp.depthTexture.format===DepthFormat)_u.framebufferTexture2D(36160,36096,3553,Tp,0);else if(sp.depthTexture.format===DepthStencilFormat)_u.framebufferTexture2D(36160,33306,3553,Tp,0);else throw new Error("Unknown depthTexture format")}function ap(np){var sp=Cu.get(np),Pp=np.isWebGLCubeRenderTarget===!0;if(np.depthTexture){if(Pp)throw new Error("target.depthTexture not supported in Cube render targets");Ep(sp.__webglFramebuffer,np)}else if(Pp){sp.__webglDepthbuffer=[];for(var Tp=0;Tp<6;Tp++)_u.bindFramebuffer(36160,sp.__webglFramebuffer[Tp]),sp.__webglDepthbuffer[Tp]=_u.createRenderbuffer(),Cp(sp.__webglDepthbuffer[Tp],np,!1)}else _u.bindFramebuffer(36160,sp.__webglFramebuffer),sp.__webglDepthbuffer=_u.createRenderbuffer(),Cp(sp.__webglDepthbuffer,np,!1);_u.bindFramebuffer(36160,null)}function ip(np){var sp=Cu.get(np),Pp=Cu.get(np.texture);np.addEventListener("dispose",_d),Pp.__webglTexture=_u.createTexture(),Lu.memory.textures++;var Tp=np.isWebGLCubeRenderTarget===!0,Np=np.isWebGLMultisampleRenderTarget===!0,Vp=Uu(np)||Ru;if(Ru&&np.texture.format===RGBFormat&&(np.texture.type===FloatType||np.texture.type===HalfFloatType)&&(np.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Tp){sp.__webglFramebuffer=[];for(var Gp=0;Gp<6;Gp++)sp.__webglFramebuffer[Gp]=_u.createFramebuffer()}else if(sp.__webglFramebuffer=_u.createFramebuffer(),Np)if(Ru){sp.__webglMultisampledFramebuffer=_u.createFramebuffer(),sp.__webglColorRenderbuffer=_u.createRenderbuffer(),_u.bindRenderbuffer(36161,sp.__webglColorRenderbuffer);var qp=Bu.convert(np.texture.format),Wp=Bu.convert(np.texture.type),Jp=Ku(np.texture.internalFormat,qp,Wp),Hp=pp(np);_u.renderbufferStorageMultisample(36161,Hp,Jp,np.width,np.height),_u.bindFramebuffer(36160,sp.__webglMultisampledFramebuffer),_u.framebufferRenderbuffer(36160,36064,36161,sp.__webglColorRenderbuffer),_u.bindRenderbuffer(36161,null),np.depthBuffer&&(sp.__webglDepthRenderbuffer=_u.createRenderbuffer(),Cp(sp.__webglDepthRenderbuffer,np,!0)),_u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Tp){Tu.bindTexture(34067,Pp.__webglTexture),Sp(34067,np.texture,Vp);for(var Gp=0;Gp<6;Gp++)_p(sp.__webglFramebuffer[Gp],np,36064,34069+Gp);Wu(np.texture,Vp)&&Qu(34067,np.texture,np.width,np.height),Tu.bindTexture(34067,null)}else Tu.bindTexture(3553,Pp.__webglTexture),Sp(3553,np.texture,Vp),_p(sp.__webglFramebuffer,np,36064,3553),Wu(np.texture,Vp)&&Qu(3553,np.texture,np.width,np.height),Tu.bindTexture(3553,null);np.depthBuffer&&ap(np)}function hp(np){var sp=np.texture,Pp=Uu(np)||Ru;if(Wu(sp,Pp)){var Tp=np.isWebGLCubeRenderTarget?34067:3553,Np=Cu.get(sp).__webglTexture;Tu.bindTexture(Tp,Np),Qu(Tp,sp,np.width,np.height),Tu.bindTexture(Tp,null)}}function up(np){if(np.isWebGLMultisampleRenderTarget)if(Ru){var sp=Cu.get(np);_u.bindFramebuffer(36008,sp.__webglMultisampledFramebuffer),_u.bindFramebuffer(36009,sp.__webglFramebuffer);var Pp=np.width,Tp=np.height,Np=16384;np.depthBuffer&&(Np|=256),np.stencilBuffer&&(Np|=1024),_u.blitFramebuffer(0,0,Pp,Tp,0,0,Pp,Tp,Np,9728),_u.bindFramebuffer(36160,sp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function pp(np){return Ru&&np.isWebGLMultisampleRenderTarget?Math.min(Vu,np.samples):0}function gp(np){var sp=Lu.render.frame;ku.get(np)!==sp&&(ku.set(np,sp),np.update())}var Ap=!1,Mp=!1;function Dp(np,sp){np&&np.isWebGLRenderTarget&&(Ap===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ap=!0),np=np.texture),Ju(np,sp)}function $p(np,sp){np&&np.isWebGLCubeRenderTarget&&(Mp===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Mp=!0),np=np.texture),np&&np.isCubeTexture||Array.isArray(np.image)&&np.image.length===6?tp(np,sp):rp(np,sp)}this.allocateTextureUnit=_c,this.resetTextureUnits=Zu,this.setTexture2D=Ju,this.setTexture2DArray=_h,this.setTexture3D=ep,this.setTextureCube=tp,this.setTextureCubeDynamic=rp,this.setupRenderTarget=ip,this.updateRenderTargetMipmap=hp,this.updateMultisampleRenderTarget=up,this.safeSetTexture2D=Dp,this.safeSetTextureCube=$p}function WebGLUtils(_u,$u,Tu){var Cu=Tu.isWebGL2;function Pu(Bu){var Lu;if(Bu===UnsignedByteType)return 5121;if(Bu===UnsignedShort4444Type)return 32819;if(Bu===UnsignedShort5551Type)return 32820;if(Bu===UnsignedShort565Type)return 33635;if(Bu===ByteType)return 5120;if(Bu===ShortType)return 5122;if(Bu===UnsignedShortType)return 5123;if(Bu===IntType)return 5124;if(Bu===UnsignedIntType)return 5125;if(Bu===FloatType)return 5126;if(Bu===HalfFloatType)return Cu?5131:(Lu=$u.get("OES_texture_half_float"),Lu!==null?Lu.HALF_FLOAT_OES:null);if(Bu===AlphaFormat)return 6406;if(Bu===RGBFormat)return 6407;if(Bu===RGBAFormat)return 6408;if(Bu===LuminanceFormat)return 6409;if(Bu===LuminanceAlphaFormat)return 6410;if(Bu===DepthFormat)return 6402;if(Bu===DepthStencilFormat)return 34041;if(Bu===RedFormat)return 6403;if(Bu===RedIntegerFormat)return 36244;if(Bu===RGFormat)return 33319;if(Bu===RGIntegerFormat)return 33320;if(Bu===RGBIntegerFormat)return 36248;if(Bu===RGBAIntegerFormat)return 36249;if(Bu===RGB_S3TC_DXT1_Format||Bu===RGBA_S3TC_DXT1_Format||Bu===RGBA_S3TC_DXT3_Format||Bu===RGBA_S3TC_DXT5_Format)if(Lu=$u.get("WEBGL_compressed_texture_s3tc"),Lu!==null){if(Bu===RGB_S3TC_DXT1_Format)return Lu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Bu===RGBA_S3TC_DXT1_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Bu===RGBA_S3TC_DXT3_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Bu===RGBA_S3TC_DXT5_Format)return Lu.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Bu===RGB_PVRTC_4BPPV1_Format||Bu===RGB_PVRTC_2BPPV1_Format||Bu===RGBA_PVRTC_4BPPV1_Format||Bu===RGBA_PVRTC_2BPPV1_Format)if(Lu=$u.get("WEBGL_compressed_texture_pvrtc"),Lu!==null){if(Bu===RGB_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Bu===RGB_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Bu===RGBA_PVRTC_4BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Bu===RGBA_PVRTC_2BPPV1_Format)return Lu.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Bu===RGB_ETC1_Format)return Lu=$u.get("WEBGL_compressed_texture_etc1"),Lu!==null?Lu.COMPRESSED_RGB_ETC1_WEBGL:null;if((Bu===RGB_ETC2_Format||Bu===RGBA_ETC2_EAC_Format)&&(Lu=$u.get("WEBGL_compressed_texture_etc"),Lu!==null)){if(Bu===RGB_ETC2_Format)return Lu.COMPRESSED_RGB8_ETC2;if(Bu===RGBA_ETC2_EAC_Format)return Lu.COMPRESSED_RGBA8_ETC2_EAC}if(Bu===RGBA_ASTC_4x4_Format||Bu===RGBA_ASTC_5x4_Format||Bu===RGBA_ASTC_5x5_Format||Bu===RGBA_ASTC_6x5_Format||Bu===RGBA_ASTC_6x6_Format||Bu===RGBA_ASTC_8x5_Format||Bu===RGBA_ASTC_8x6_Format||Bu===RGBA_ASTC_8x8_Format||Bu===RGBA_ASTC_10x5_Format||Bu===RGBA_ASTC_10x6_Format||Bu===RGBA_ASTC_10x8_Format||Bu===RGBA_ASTC_10x10_Format||Bu===RGBA_ASTC_12x10_Format||Bu===RGBA_ASTC_12x12_Format||Bu===SRGB8_ALPHA8_ASTC_4x4_Format||Bu===SRGB8_ALPHA8_ASTC_5x4_Format||Bu===SRGB8_ALPHA8_ASTC_5x5_Format||Bu===SRGB8_ALPHA8_ASTC_6x5_Format||Bu===SRGB8_ALPHA8_ASTC_6x6_Format||Bu===SRGB8_ALPHA8_ASTC_8x5_Format||Bu===SRGB8_ALPHA8_ASTC_8x6_Format||Bu===SRGB8_ALPHA8_ASTC_8x8_Format||Bu===SRGB8_ALPHA8_ASTC_10x5_Format||Bu===SRGB8_ALPHA8_ASTC_10x6_Format||Bu===SRGB8_ALPHA8_ASTC_10x8_Format||Bu===SRGB8_ALPHA8_ASTC_10x10_Format||Bu===SRGB8_ALPHA8_ASTC_12x10_Format||Bu===SRGB8_ALPHA8_ASTC_12x12_Format)return Lu=$u.get("WEBGL_compressed_texture_astc"),Lu!==null?Bu:null;if(Bu===RGBA_BPTC_Format)return Lu=$u.get("EXT_texture_compression_bptc"),Lu!==null?Bu:null;if(Bu===UnsignedInt248Type)return Cu?34042:(Lu=$u.get("WEBGL_depth_texture"),Lu!==null?Lu.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Pu}}function ArrayCamera(_u){PerspectiveCamera.call(this),this.cameras=_u||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(_u){return this._targetRay!==null&&this._targetRay.dispatchEvent(_u),this._grip!==null&&this._grip.dispatchEvent(_u),this},disconnect:function(_u){return this.dispatchEvent({type:"disconnected",data:_u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(_u,$u,Tu){var Cu=null,Pu=null,Bu=this._targetRay,Lu=this._grip;return _u&&(Bu!==null&&(Cu=$u.getPose(_u.targetRaySpace,Tu),Cu!==null&&(Bu.matrix.fromArray(Cu.transform.matrix),Bu.matrix.decompose(Bu.position,Bu.rotation,Bu.scale))),Lu!==null&&_u.gripSpace&&(Pu=$u.getPose(_u.gripSpace,Tu),Pu!==null&&(Lu.matrix.fromArray(Pu.transform.matrix),Lu.matrix.decompose(Lu.position,Lu.rotation,Lu.scale)))),Bu!==null&&(Bu.visible=Cu!==null),Lu!==null&&(Lu.visible=Pu!==null),this}});function WebXRManager(_u,$u){var Tu=this,Cu=null,Pu=1,Bu=null,Lu="local-floor",Ru=null,Ou=[],Du=new Map,Fu=new PerspectiveCamera;Fu.layers.enable(1),Fu.viewport=new Vector4;var Vu=new PerspectiveCamera;Vu.layers.enable(2),Vu.viewport=new Vector4;var ku=[Fu,Vu],Nu=new ArrayCamera;Nu.layers.enable(1),Nu.layers.enable(2);var Gu=null,ju=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Xu){var Zu=Ou[Xu];return Zu===void 0&&(Zu=new WebXRController,Ou[Xu]=Zu),Zu.getTargetRaySpace()},this.getControllerGrip=function(Xu){var Zu=Ou[Xu];return Zu===void 0&&(Zu=new WebXRController,Ou[Xu]=Zu),Zu.getGripSpace()};function Hu(Xu){var Zu=Du.get(Xu.inputSource);Zu&&Zu.dispatchEvent({type:Xu.type})}function Uu(){Du.forEach(function(Xu,Zu){Xu.disconnect(Zu)}),Du.clear(),_u.setFramebuffer(null),_u.setRenderTarget(_u.getRenderTarget()),qu.stop(),Tu.isPresenting=!1,Tu.dispatchEvent({type:"sessionend"})}function zu(Xu){Bu=Xu,qu.setContext(Cu),qu.start(),Tu.isPresenting=!0,Tu.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Xu){Pu=Xu,Tu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Xu){Lu=Xu,Tu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Bu},this.getSession=function(){return Cu},this.setSession=function(Xu){if(Cu=Xu,Cu!==null){Cu.addEventListener("select",Hu),Cu.addEventListener("selectstart",Hu),Cu.addEventListener("selectend",Hu),Cu.addEventListener("squeeze",Hu),Cu.addEventListener("squeezestart",Hu),Cu.addEventListener("squeezeend",Hu),Cu.addEventListener("end",Uu);var Zu=$u.getContextAttributes();Zu.xrCompatible!==!0&&$u.makeXRCompatible();var _c={antialias:Zu.antialias,alpha:Zu.alpha,depth:Zu.depth,stencil:Zu.stencil,framebufferScaleFactor:Pu},Ju=new XRWebGLLayer(Cu,$u,_c);Cu.updateRenderState({baseLayer:Ju}),Cu.requestReferenceSpace(Lu).then(zu),Cu.addEventListener("inputsourceschange",Wu)}};function Wu(Xu){for(var Zu=Cu.inputSources,_c=0;_c<Ou.length;_c++)Du.set(Zu[_c],Ou[_c]);for(var _c=0;_c<Xu.removed.length;_c++){var Ju=Xu.removed[_c],_h=Du.get(Ju);_h&&(_h.dispatchEvent({type:"disconnected",data:Ju}),Du.delete(Ju))}for(var _c=0;_c<Xu.added.length;_c++){var Ju=Xu.added[_c],_h=Du.get(Ju);_h&&_h.dispatchEvent({type:"connected",data:Ju})}}var Qu=new Vector3,Ku=new Vector3;function Yu(Xu,Zu,_c){Qu.setFromMatrixPosition(Zu.matrixWorld),Ku.setFromMatrixPosition(_c.matrixWorld);var Ju=Qu.distanceTo(Ku),_h=Zu.projectionMatrix.elements,ep=_c.projectionMatrix.elements,tp=_h[14]/(_h[10]-1),rp=_h[14]/(_h[10]+1),dp=(_h[9]+1)/_h[5],cp=(_h[9]-1)/_h[5],Sp=(_h[8]-1)/_h[0],yp=(ep[8]+1)/ep[0],Bp=tp*Sp,_p=tp*yp,Cp=Ju/(-Sp+yp),Ep=Cp*-Sp;Zu.matrixWorld.decompose(Xu.position,Xu.quaternion,Xu.scale),Xu.translateX(Ep),Xu.translateZ(Cp),Xu.matrixWorld.compose(Xu.position,Xu.quaternion,Xu.scale),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld);var ap=tp+Cp,ip=rp+Cp,hp=Bp-Ep,up=_p+(Ju-Ep),pp=dp*rp/ip*ap,gp=cp*rp/ip*ap;Xu.projectionMatrix.makePerspective(hp,up,pp,gp,ap,ip)}function Xc(Xu,Zu){Zu===null?Xu.matrixWorld.copy(Xu.matrix):Xu.matrixWorld.multiplyMatrices(Zu.matrixWorld,Xu.matrix),Xu.matrixWorldInverse.getInverse(Xu.matrixWorld)}this.getCamera=function(Xu){Nu.near=Vu.near=Fu.near=Xu.near,Nu.far=Vu.far=Fu.far=Xu.far,(Gu!==Nu.near||ju!==Nu.far)&&(Cu.updateRenderState({depthNear:Nu.near,depthFar:Nu.far}),Gu=Nu.near,ju=Nu.far);var Zu=Xu.parent,_c=Nu.cameras;Xc(Nu,Zu);for(var Ju=0;Ju<_c.length;Ju++)Xc(_c[Ju],Zu);Xu.matrixWorld.copy(Nu.matrixWorld);for(var _h=Xu.children,Ju=0,ep=_h.length;Ju<ep;Ju++)_h[Ju].updateMatrixWorld(!0);return _c.length===2?Yu(Nu,Fu,Vu):Nu.projectionMatrix.copy(Fu.projectionMatrix),Nu};var _d=null;function _f(Xu,Zu){if(Ru=Zu.getViewerPose(Bu),Ru!==null){var _c=Ru.views,Ju=Cu.renderState.baseLayer;_u.setFramebuffer(Ju.framebuffer);var _h=!1;_c.length!==Nu.cameras.length&&(Nu.cameras.length=0,_h=!0);for(var ep=0;ep<_c.length;ep++){var tp=_c[ep],rp=Ju.getViewport(tp),dp=ku[ep];dp.matrix.fromArray(tp.transform.matrix),dp.projectionMatrix.fromArray(tp.projectionMatrix),dp.viewport.set(rp.x,rp.y,rp.width,rp.height),ep===0&&Nu.matrix.copy(dp.matrix),_h===!0&&Nu.cameras.push(dp)}}for(var cp=Cu.inputSources,ep=0;ep<Ou.length;ep++){var Sp=Ou[ep],yp=cp[ep];Sp.update(yp,Zu,Bu)}_d&&_d(Xu,Zu)}var qu=new WebGLAnimation;qu.setAnimationLoop(_f),this.setAnimationLoop=function(Xu){_d=Xu},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(_u){function $u(Uu,zu){Uu.fogColor.value.copy(zu.color),zu.isFog?(Uu.fogNear.value=zu.near,Uu.fogFar.value=zu.far):zu.isFogExp2&&(Uu.fogDensity.value=zu.density)}function Tu(Uu,zu,Wu,Qu,Ku){zu.isMeshBasicMaterial?Cu(Uu,zu):zu.isMeshLambertMaterial?(Cu(Uu,zu),Ou(Uu,zu)):zu.isMeshToonMaterial?(Cu(Uu,zu),Fu(Uu,zu)):zu.isMeshPhongMaterial?(Cu(Uu,zu),Du(Uu,zu)):zu.isMeshStandardMaterial?(Cu(Uu,zu,Wu),zu.isMeshPhysicalMaterial?ku(Uu,zu,Wu):Vu(Uu,zu,Wu)):zu.isMeshMatcapMaterial?(Cu(Uu,zu),Nu(Uu,zu)):zu.isMeshDepthMaterial?(Cu(Uu,zu),Gu(Uu,zu)):zu.isMeshDistanceMaterial?(Cu(Uu,zu),ju(Uu,zu)):zu.isMeshNormalMaterial?(Cu(Uu,zu),Hu(Uu,zu)):zu.isLineBasicMaterial?(Pu(Uu,zu),zu.isLineDashedMaterial&&Bu(Uu,zu)):zu.isPointsMaterial?Lu(Uu,zu,Qu,Ku):zu.isSpriteMaterial?Ru(Uu,zu):zu.isShadowMaterial?(Uu.color.value.copy(zu.color),Uu.opacity.value=zu.opacity):zu.isShaderMaterial&&(zu.uniformsNeedUpdate=!1)}function Cu(Uu,zu,Wu){Uu.opacity.value=zu.opacity,zu.color&&Uu.diffuse.value.copy(zu.color),zu.emissive&&Uu.emissive.value.copy(zu.emissive).multiplyScalar(zu.emissiveIntensity),zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap),zu.specularMap&&(Uu.specularMap.value=zu.specularMap);var Qu=zu.envMap||Wu;Qu&&(Uu.envMap.value=Qu,Uu.flipEnvMap.value=Qu.isCubeTexture?-1:1,Uu.reflectivity.value=zu.reflectivity,Uu.refractionRatio.value=zu.refractionRatio,Uu.maxMipLevel.value=_u.get(Qu).__maxMipLevel),zu.lightMap&&(Uu.lightMap.value=zu.lightMap,Uu.lightMapIntensity.value=zu.lightMapIntensity),zu.aoMap&&(Uu.aoMap.value=zu.aoMap,Uu.aoMapIntensity.value=zu.aoMapIntensity);var Ku;zu.map?Ku=zu.map:zu.specularMap?Ku=zu.specularMap:zu.displacementMap?Ku=zu.displacementMap:zu.normalMap?Ku=zu.normalMap:zu.bumpMap?Ku=zu.bumpMap:zu.roughnessMap?Ku=zu.roughnessMap:zu.metalnessMap?Ku=zu.metalnessMap:zu.alphaMap?Ku=zu.alphaMap:zu.emissiveMap&&(Ku=zu.emissiveMap),Ku!==void 0&&(Ku.isWebGLRenderTarget&&(Ku=Ku.texture),Ku.matrixAutoUpdate===!0&&Ku.updateMatrix(),Uu.uvTransform.value.copy(Ku.matrix));var Yu;zu.aoMap?Yu=zu.aoMap:zu.lightMap&&(Yu=zu.lightMap),Yu!==void 0&&(Yu.isWebGLRenderTarget&&(Yu=Yu.texture),Yu.matrixAutoUpdate===!0&&Yu.updateMatrix(),Uu.uv2Transform.value.copy(Yu.matrix))}function Pu(Uu,zu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity}function Bu(Uu,zu){Uu.dashSize.value=zu.dashSize,Uu.totalSize.value=zu.dashSize+zu.gapSize,Uu.scale.value=zu.scale}function Lu(Uu,zu,Wu,Qu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity,Uu.size.value=zu.size*Wu,Uu.scale.value=Qu*.5,zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap);var Ku;zu.map?Ku=zu.map:zu.alphaMap&&(Ku=zu.alphaMap),Ku!==void 0&&(Ku.matrixAutoUpdate===!0&&Ku.updateMatrix(),Uu.uvTransform.value.copy(Ku.matrix))}function Ru(Uu,zu){Uu.diffuse.value.copy(zu.color),Uu.opacity.value=zu.opacity,Uu.rotation.value=zu.rotation,zu.map&&(Uu.map.value=zu.map),zu.alphaMap&&(Uu.alphaMap.value=zu.alphaMap);var Wu;zu.map?Wu=zu.map:zu.alphaMap&&(Wu=zu.alphaMap),Wu!==void 0&&(Wu.matrixAutoUpdate===!0&&Wu.updateMatrix(),Uu.uvTransform.value.copy(Wu.matrix))}function Ou(Uu,zu){zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap)}function Du(Uu,zu){Uu.specular.value.copy(zu.specular),Uu.shininess.value=Math.max(zu.shininess,1e-4),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Fu(Uu,zu){Uu.specular.value.copy(zu.specular),Uu.shininess.value=Math.max(zu.shininess,1e-4),zu.gradientMap&&(Uu.gradientMap.value=zu.gradientMap),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Vu(Uu,zu,Wu){Uu.roughness.value=zu.roughness,Uu.metalness.value=zu.metalness,zu.roughnessMap&&(Uu.roughnessMap.value=zu.roughnessMap),zu.metalnessMap&&(Uu.metalnessMap.value=zu.metalnessMap),zu.emissiveMap&&(Uu.emissiveMap.value=zu.emissiveMap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias),(zu.envMap||Wu)&&(Uu.envMapIntensity.value=zu.envMapIntensity)}function ku(Uu,zu,Wu){Vu(Uu,zu,Wu),Uu.reflectivity.value=zu.reflectivity,Uu.clearcoat.value=zu.clearcoat,Uu.clearcoatRoughness.value=zu.clearcoatRoughness,zu.sheen&&Uu.sheen.value.copy(zu.sheen),zu.clearcoatMap&&(Uu.clearcoatMap.value=zu.clearcoatMap),zu.clearcoatRoughnessMap&&(Uu.clearcoatRoughnessMap.value=zu.clearcoatRoughnessMap),zu.clearcoatNormalMap&&(Uu.clearcoatNormalScale.value.copy(zu.clearcoatNormalScale),Uu.clearcoatNormalMap.value=zu.clearcoatNormalMap,zu.side===BackSide&&Uu.clearcoatNormalScale.value.negate()),Uu.transparency.value=zu.transparency}function Nu(Uu,zu){zu.matcap&&(Uu.matcap.value=zu.matcap),zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function Gu(Uu,zu){zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}function ju(Uu,zu){zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias),Uu.referencePosition.value.copy(zu.referencePosition),Uu.nearDistance.value=zu.nearDistance,Uu.farDistance.value=zu.farDistance}function Hu(Uu,zu){zu.bumpMap&&(Uu.bumpMap.value=zu.bumpMap,Uu.bumpScale.value=zu.bumpScale,zu.side===BackSide&&(Uu.bumpScale.value*=-1)),zu.normalMap&&(Uu.normalMap.value=zu.normalMap,Uu.normalScale.value.copy(zu.normalScale),zu.side===BackSide&&Uu.normalScale.value.negate()),zu.displacementMap&&(Uu.displacementMap.value=zu.displacementMap,Uu.displacementScale.value=zu.displacementScale,Uu.displacementBias.value=zu.displacementBias)}return{refreshFogUniforms:$u,refreshMaterialUniforms:Tu}}function WebGLRenderer(_u){_u=_u||{};var $u=_u.canvas!==void 0?_u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Tu=_u.context!==void 0?_u.context:null,Cu=_u.alpha!==void 0?_u.alpha:!1,Pu=_u.depth!==void 0?_u.depth:!0,Bu=_u.stencil!==void 0?_u.stencil:!0,Lu=_u.antialias!==void 0?_u.antialias:!1,Ru=_u.premultipliedAlpha!==void 0?_u.premultipliedAlpha:!0,Ou=_u.preserveDrawingBuffer!==void 0?_u.preserveDrawingBuffer:!1,Du=_u.powerPreference!==void 0?_u.powerPreference:"default",Fu=_u.failIfMajorPerformanceCaveat!==void 0?_u.failIfMajorPerformanceCaveat:!1,Vu=null,ku=null;this.domElement=$u,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Nu=this,Gu=!1,ju=null,Hu=0,Uu=0,zu=null,Wu=null,Qu=-1,Ku={geometry:null,program:null,wireframe:!1},Yu=null,Xc=null,_d=new Vector4,_f=new Vector4,qu=null,Xu=$u.width,Zu=$u.height,_c=1,Ju=null,_h=null,ep=new Vector4(0,0,Xu,Zu),tp=new Vector4(0,0,Xu,Zu),rp=!1,dp=new Frustum,cp=new WebGLClipping,Sp=!1,yp=!1,Bp=new Matrix4,_p=new Vector3;function Cp(){return zu===null?_c:1}var Ep;try{var ap={alpha:Cu,depth:Pu,stencil:Bu,antialias:Lu,premultipliedAlpha:Ru,preserveDrawingBuffer:Ou,powerPreference:Du,failIfMajorPerformanceCaveat:Fu};if($u.addEventListener("webglcontextlost",jp,!1),$u.addEventListener("webglcontextrestored",Yp,!1),Ep=Tu||$u.getContext("webgl",ap)||$u.getContext("experimental-webgl",ap),Ep===null)throw $u.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");Ep.getShaderPrecisionFormat===void 0&&(Ep.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(mp){throw console.error("THREE.WebGLRenderer: "+mp.message),mp}var ip,hp,up,pp,gp,Ap,Mp,Dp,$p,np,sp,Pp,Tp,Np,Vp,Gp,qp,Wp;function Jp(){ip=new WebGLExtensions(Ep),hp=new WebGLCapabilities(Ep,ip,_u),hp.isWebGL2===!1&&(ip.get("WEBGL_depth_texture"),ip.get("OES_texture_float"),ip.get("OES_texture_half_float"),ip.get("OES_texture_half_float_linear"),ip.get("OES_standard_derivatives"),ip.get("OES_element_index_uint"),ip.get("ANGLE_instanced_arrays")),ip.get("OES_texture_float_linear"),Wp=new WebGLUtils(Ep,ip,hp),up=new WebGLState(Ep,ip,hp),up.scissor(_f.copy(tp).multiplyScalar(_c).floor()),up.viewport(_d.copy(ep).multiplyScalar(_c).floor()),pp=new WebGLInfo,gp=new WebGLProperties,Ap=new WebGLTextures(Ep,ip,up,gp,hp,Wp,pp),Mp=new WebGLAttributes(Ep,hp),Dp=new WebGLGeometries(Ep,Mp,pp),$p=new WebGLObjects(Ep,Dp,Mp,pp),Vp=new WebGLMorphtargets(Ep),np=new WebGLPrograms(Nu,ip,hp),sp=new WebGLMaterials(gp),Pp=new WebGLRenderLists,Tp=new WebGLRenderStates,Np=new WebGLBackground(Nu,up,$p,Ru),Gp=new WebGLBufferRenderer(Ep,ip,pp,hp),qp=new WebGLIndexedBufferRenderer(Ep,ip,pp,hp),pp.programs=np.programs,Nu.capabilities=hp,Nu.extensions=ip,Nu.properties=gp,Nu.renderLists=Pp,Nu.state=up,Nu.info=pp}Jp();var Hp=new WebXRManager(Nu,Ep);this.xr=Hp;var Kp=new WebGLShadowMap(Nu,$p,hp.maxTextureSize);this.shadowMap=Kp,this.getContext=function(){return Ep},this.getContextAttributes=function(){return Ep.getContextAttributes()},this.forceContextLoss=function(){var mp=ip.get("WEBGL_lose_context");mp&&mp.loseContext()},this.forceContextRestore=function(){var mp=ip.get("WEBGL_lose_context");mp&&mp.restoreContext()},this.getPixelRatio=function(){return _c},this.setPixelRatio=function(mp){mp!==void 0&&(_c=mp,this.setSize(Xu,Zu,!1))},this.getSize=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),mp=new Vector2),mp.set(Xu,Zu)},this.setSize=function(mp,Fp,Lp){if(Hp.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Xu=mp,Zu=Fp,$u.width=Math.floor(mp*_c),$u.height=Math.floor(Fp*_c),Lp!==!1&&($u.style.width=mp+"px",$u.style.height=Fp+"px"),this.setViewport(0,0,mp,Fp)},this.getDrawingBufferSize=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),mp=new Vector2),mp.set(Xu*_c,Zu*_c).floor()},this.setDrawingBufferSize=function(mp,Fp,Lp){Xu=mp,Zu=Fp,_c=Lp,$u.width=Math.floor(mp*Lp),$u.height=Math.floor(Fp*Lp),this.setViewport(0,0,mp,Fp)},this.getCurrentViewport=function(mp){return mp===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),mp=new Vector4),mp.copy(_d)},this.getViewport=function(mp){return mp.copy(ep)},this.setViewport=function(mp,Fp,Lp,kp){mp.isVector4?ep.set(mp.x,mp.y,mp.z,mp.w):ep.set(mp,Fp,Lp,kp),up.viewport(_d.copy(ep).multiplyScalar(_c).floor())},this.getScissor=function(mp){return mp.copy(tp)},this.setScissor=function(mp,Fp,Lp,kp){mp.isVector4?tp.set(mp.x,mp.y,mp.z,mp.w):tp.set(mp,Fp,Lp,kp),up.scissor(_f.copy(tp).multiplyScalar(_c).floor())},this.getScissorTest=function(){return rp},this.setScissorTest=function(mp){up.setScissorTest(rp=mp)},this.setOpaqueSort=function(mp){Ju=mp},this.setTransparentSort=function(mp){_h=mp},this.getClearColor=function(){return Np.getClearColor()},this.setClearColor=function(){Np.setClearColor.apply(Np,arguments)},this.getClearAlpha=function(){return Np.getClearAlpha()},this.setClearAlpha=function(){Np.setClearAlpha.apply(Np,arguments)},this.clear=function(mp,Fp,Lp){var kp=0;(mp===void 0||mp)&&(kp|=16384),(Fp===void 0||Fp)&&(kp|=256),(Lp===void 0||Lp)&&(kp|=1024),Ep.clear(kp)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){$u.removeEventListener("webglcontextlost",jp,!1),$u.removeEventListener("webglcontextrestored",Yp,!1),Pp.dispose(),Tp.dispose(),gp.dispose(),$p.dispose(),Hp.dispose(),Sm.stop()};function jp(mp){mp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Gu=!0}function Yp(){console.log("THREE.WebGLRenderer: Context Restored."),Gu=!1,Jp()}function xp(mp){var Fp=mp.target;Fp.removeEventListener("dispose",xp),Qp(Fp)}function Qp(mp){Zp(mp),gp.remove(mp)}function Zp(mp){var Fp=gp.get(mp).program;mp.program=void 0,Fp!==void 0&&np.releaseProgram(Fp)}function tm(mp,Fp){mp.render(function(Lp){Nu.renderBufferImmediate(Lp,Fp)})}this.renderBufferImmediate=function(mp,Fp){up.initAttributes();var Lp=gp.get(mp);mp.hasPositions&&!Lp.position&&(Lp.position=Ep.createBuffer()),mp.hasNormals&&!Lp.normal&&(Lp.normal=Ep.createBuffer()),mp.hasUvs&&!Lp.uv&&(Lp.uv=Ep.createBuffer()),mp.hasColors&&!Lp.color&&(Lp.color=Ep.createBuffer());var kp=Fp.getAttributes();mp.hasPositions&&(Ep.bindBuffer(34962,Lp.position),Ep.bufferData(34962,mp.positionArray,35048),up.enableAttribute(kp.position),Ep.vertexAttribPointer(kp.position,3,5126,!1,0,0)),mp.hasNormals&&(Ep.bindBuffer(34962,Lp.normal),Ep.bufferData(34962,mp.normalArray,35048),up.enableAttribute(kp.normal),Ep.vertexAttribPointer(kp.normal,3,5126,!1,0,0)),mp.hasUvs&&(Ep.bindBuffer(34962,Lp.uv),Ep.bufferData(34962,mp.uvArray,35048),up.enableAttribute(kp.uv),Ep.vertexAttribPointer(kp.uv,2,5126,!1,0,0)),mp.hasColors&&(Ep.bindBuffer(34962,Lp.color),Ep.bufferData(34962,mp.colorArray,35048),up.enableAttribute(kp.color),Ep.vertexAttribPointer(kp.color,3,5126,!1,0,0)),up.disableUnusedAttributes(),Ep.drawArrays(4,0,mp.count),mp.count=0};var em=new Scene;this.renderBufferDirect=function(mp,Fp,Lp,kp,Xp,cm){Fp===null&&(Fp=em);var um=Xp.isMesh&&Xp.matrixWorld.determinant()<0,im=Mm(mp,Fp,kp,Xp);up.setMaterial(kp,um);var om=!1;(Ku.geometry!==Lp.id||Ku.program!==im.id||Ku.wireframe!==(kp.wireframe===!0))&&(Ku.geometry=Lp.id,Ku.program=im.id,Ku.wireframe=kp.wireframe===!0,om=!0),(kp.morphTargets||kp.morphNormals)&&(Vp.update(Xp,Lp,kp,im),om=!0),Xp.isInstancedMesh===!0&&(om=!0);var dm=Lp.index,Am=Lp.attributes.position;if(dm===null){if(Am===void 0||Am.count===0)return}else if(dm.count===0)return;var op=1;kp.wireframe===!0&&(dm=Dp.getWireframeAttribute(Lp),op=2);var vp,bp=Gp;dm!==null&&(vp=Mp.get(dm),bp=qp,bp.setIndex(vp)),om&&(lm(Xp,Lp,kp,im),dm!==null&&Ep.bindBuffer(34963,vp.buffer));var Ip=dm!==null?dm.count:Am.count,Up=Lp.drawRange.start*op,am=Lp.drawRange.count*op,sm=cm!==null?cm.start*op:0,_m=cm!==null?cm.count*op:1/0,nm=Math.max(Up,sm),Em=Math.min(Ip,Up+am,sm+_m)-1,Lm=Math.max(0,Em-nm+1);if(Lm!==0){if(Xp.isMesh)kp.wireframe===!0?(up.setLineWidth(kp.wireframeLinewidth*Cp()),bp.setMode(1)):bp.setMode(4);else if(Xp.isLine){var Wm=kp.linewidth;Wm===void 0&&(Wm=1),up.setLineWidth(Wm*Cp()),Xp.isLineSegments?bp.setMode(1):Xp.isLineLoop?bp.setMode(2):bp.setMode(3)}else Xp.isPoints?bp.setMode(0):Xp.isSprite&&bp.setMode(4);if(Xp.isInstancedMesh)bp.renderInstances(Lp,nm,Lm,Xp.count);else if(Lp.isInstancedBufferGeometry){var qm=Math.min(Lp.instanceCount,Lp._maxInstanceCount);bp.renderInstances(Lp,nm,Lm,qm)}else bp.render(nm,Lm)}};function lm(mp,Fp,Lp,kp){if(!(hp.isWebGL2===!1&&(mp.isInstancedMesh||Fp.isInstancedBufferGeometry)&&ip.get("ANGLE_instanced_arrays")===null)){up.initAttributes();var Xp=Fp.attributes,cm=kp.getAttributes(),um=Lp.defaultAttributeValues;for(var im in cm){var om=cm[im];if(om>=0){var dm=Xp[im];if(dm!==void 0){var Am=dm.normalized,op=dm.itemSize,vp=Mp.get(dm);if(vp===void 0)continue;var bp=vp.buffer,Ip=vp.type,Up=vp.bytesPerElement;if(dm.isInterleavedBufferAttribute){var am=dm.data,sm=am.stride,_m=dm.offset;am&&am.isInstancedInterleavedBuffer?(up.enableAttributeAndDivisor(om,am.meshPerAttribute),Fp._maxInstanceCount===void 0&&(Fp._maxInstanceCount=am.meshPerAttribute*am.count)):up.enableAttribute(om),Ep.bindBuffer(34962,bp),up.vertexAttribPointer(om,op,Ip,Am,sm*Up,_m*Up)}else dm.isInstancedBufferAttribute?(up.enableAttributeAndDivisor(om,dm.meshPerAttribute),Fp._maxInstanceCount===void 0&&(Fp._maxInstanceCount=dm.meshPerAttribute*dm.count)):up.enableAttribute(om),Ep.bindBuffer(34962,bp),up.vertexAttribPointer(om,op,Ip,Am,0,0)}else if(im==="instanceMatrix"){var vp=Mp.get(mp.instanceMatrix);if(vp===void 0)continue;var bp=vp.buffer,Ip=vp.type;up.enableAttributeAndDivisor(om+0,1),up.enableAttributeAndDivisor(om+1,1),up.enableAttributeAndDivisor(om+2,1),up.enableAttributeAndDivisor(om+3,1),Ep.bindBuffer(34962,bp),Ep.vertexAttribPointer(om+0,4,Ip,!1,64,0),Ep.vertexAttribPointer(om+1,4,Ip,!1,64,16),Ep.vertexAttribPointer(om+2,4,Ip,!1,64,32),Ep.vertexAttribPointer(om+3,4,Ip,!1,64,48)}else if(um!==void 0){var nm=um[im];if(nm!==void 0)switch(nm.length){case 2:Ep.vertexAttrib2fv(om,nm);break;case 3:Ep.vertexAttrib3fv(om,nm);break;case 4:Ep.vertexAttrib4fv(om,nm);break;default:Ep.vertexAttrib1fv(om,nm)}}}}up.disableUnusedAttributes()}}this.compile=function(mp,Fp){ku=Tp.get(mp,Fp),ku.init(),mp.traverse(function(kp){kp.isLight&&(ku.pushLight(kp),kp.castShadow&&ku.pushShadow(kp))}),ku.setupLights(Fp);const Lp={};mp.traverse(function(kp){let Xp=kp.material;if(Xp)if(Array.isArray(Xp))for(let cm=0;cm<Xp.length;cm++){let um=Xp[cm];um.uuid in Lp||(gm(um,mp,kp),Lp[um.uuid]=!0)}else Xp.uuid in Lp||(gm(Xp,mp,kp),Lp[Xp.uuid]=!0)})};var pm=null;function mm(mp){Hp.isPresenting||pm&&pm(mp)}var Sm=new WebGLAnimation;Sm.setAnimationLoop(mm),typeof window!="undefined"&&Sm.setContext(window),this.setAnimationLoop=function(mp){pm=mp,Hp.setAnimationLoop(mp),Sm.start()},this.render=function(mp,Fp){var Lp,kp;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Lp=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),kp=arguments[3]),!(Fp&&Fp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Gu){Ku.geometry=null,Ku.program=null,Ku.wireframe=!1,Qu=-1,Yu=null,mp.autoUpdate===!0&&mp.updateMatrixWorld(),Fp.parent===null&&Fp.updateMatrixWorld(),Hp.enabled&&Hp.isPresenting&&(Fp=Hp.getCamera(Fp)),mp.onBeforeRender(Nu,mp,Fp,Lp||zu),ku=Tp.get(mp,Fp),ku.init(),Bp.multiplyMatrices(Fp.projectionMatrix,Fp.matrixWorldInverse),dp.setFromProjectionMatrix(Bp),yp=this.localClippingEnabled,Sp=cp.init(this.clippingPlanes,yp,Fp),Vu=Pp.get(mp,Fp),Vu.init(),fm(mp,Fp,0,Nu.sortObjects),Vu.finish(),Nu.sortObjects===!0&&Vu.sort(Ju,_h),Sp&&cp.beginShadows();var Xp=ku.state.shadowsArray;Kp.render(Xp,mp,Fp),ku.setupLights(Fp),Sp&&cp.endShadows(),this.info.autoReset&&this.info.reset(),Lp!==void 0&&this.setRenderTarget(Lp),Np.render(Vu,mp,Fp,kp);var cm=Vu.opaque,um=Vu.transparent;if(mp.overrideMaterial){var im=mp.overrideMaterial;cm.length&&xm(cm,mp,Fp,im),um.length&&xm(um,mp,Fp,im)}else cm.length&&xm(cm,mp,Fp),um.length&&xm(um,mp,Fp);mp.onAfterRender(Nu,mp,Fp),zu!==null&&(Ap.updateRenderTargetMipmap(zu),Ap.updateMultisampleRenderTarget(zu)),up.buffers.depth.setTest(!0),up.buffers.depth.setMask(!0),up.buffers.color.setMask(!0),up.setPolygonOffset(!1),Vu=null,ku=null}};function fm(mp,Fp,Lp,kp){if(mp.visible!==!1){var Xp=mp.layers.test(Fp.layers);if(Xp){if(mp.isGroup)Lp=mp.renderOrder;else if(mp.isLOD)mp.autoUpdate===!0&&mp.update(Fp);else if(mp.isLight)ku.pushLight(mp),mp.castShadow&&ku.pushShadow(mp);else if(mp.isSprite){if(!mp.frustumCulled||dp.intersectsSprite(mp)){kp&&_p.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Bp);var cm=$p.update(mp),um=mp.material;um.visible&&Vu.push(mp,cm,um,Lp,_p.z,null)}}else if(mp.isImmediateRenderObject)kp&&_p.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Bp),Vu.push(mp,null,mp.material,Lp,_p.z,null);else if((mp.isMesh||mp.isLine||mp.isPoints)&&(mp.isSkinnedMesh&&mp.skeleton.frame!==pp.render.frame&&(mp.skeleton.update(),mp.skeleton.frame=pp.render.frame),!mp.frustumCulled||dp.intersectsObject(mp))){kp&&_p.setFromMatrixPosition(mp.matrixWorld).applyMatrix4(Bp);var cm=$p.update(mp),um=mp.material;if(Array.isArray(um))for(var im=cm.groups,om=0,dm=im.length;om<dm;om++){var Am=im[om],op=um[Am.materialIndex];op&&op.visible&&Vu.push(mp,cm,op,Lp,_p.z,Am)}else um.visible&&Vu.push(mp,cm,um,Lp,_p.z,null)}}for(var vp=mp.children,om=0,dm=vp.length;om<dm;om++)fm(vp[om],Fp,Lp,kp)}}function xm(mp,Fp,Lp,kp){for(var Xp=0,cm=mp.length;Xp<cm;Xp++){var um=mp[Xp],im=um.object,om=um.geometry,dm=kp===void 0?um.material:kp,Am=um.group;if(Lp.isArrayCamera){Xc=Lp;for(var op=Lp.cameras,vp=0,bp=op.length;vp<bp;vp++){var Ip=op[vp];im.layers.test(Ip.layers)&&(up.viewport(_d.copy(Ip.viewport)),ku.setupLights(Ip),wm(im,Fp,Ip,om,dm,Am))}}else Xc=null,wm(im,Fp,Lp,om,dm,Am)}}function wm(mp,Fp,Lp,kp,Xp,cm){if(mp.onBeforeRender(Nu,Fp,Lp,kp,Xp,cm),ku=Tp.get(Fp,Xc||Lp),mp.modelViewMatrix.multiplyMatrices(Lp.matrixWorldInverse,mp.matrixWorld),mp.normalMatrix.getNormalMatrix(mp.modelViewMatrix),mp.isImmediateRenderObject){var um=Mm(Lp,Fp,Xp,mp);up.setMaterial(Xp),Ku.geometry=null,Ku.program=null,Ku.wireframe=!1,tm(mp,um)}else Nu.renderBufferDirect(Lp,Fp,kp,Xp,mp,cm);mp.onAfterRender(Nu,Fp,Lp,kp,Xp,cm),ku=Tp.get(Fp,Xc||Lp)}function gm(mp,Fp,Lp){var kp=gp.get(mp),Xp=ku.state.lights,cm=ku.state.shadowsArray,um=Xp.state.version,im=np.getParameters(mp,Xp.state,cm,Fp,cp.numPlanes,cp.numIntersection,Lp),om=np.getProgramCacheKey(im),dm=kp.program,Am=!0;if(dm===void 0)mp.addEventListener("dispose",xp);else if(dm.cacheKey!==om)Zp(mp);else if(kp.lightsStateVersion!==um)kp.lightsStateVersion=um,Am=!1;else{if(im.shaderID!==void 0)return;Am=!1}Am&&(dm=np.acquireProgram(im,om),kp.program=dm,kp.uniforms=im.uniforms,kp.outputEncoding=im.outputEncoding,mp.program=dm);var op=dm.getAttributes();if(mp.morphTargets){mp.numSupportedMorphTargets=0;for(var vp=0;vp<Nu.maxMorphTargets;vp++)op["morphTarget"+vp]>=0&&mp.numSupportedMorphTargets++}if(mp.morphNormals){mp.numSupportedMorphNormals=0;for(var vp=0;vp<Nu.maxMorphNormals;vp++)op["morphNormal"+vp]>=0&&mp.numSupportedMorphNormals++}var bp=kp.uniforms;(!mp.isShaderMaterial&&!mp.isRawShaderMaterial||mp.clipping===!0)&&(kp.numClippingPlanes=cp.numPlanes,kp.numIntersection=cp.numIntersection,bp.clippingPlanes=cp.uniform),kp.environment=mp.isMeshStandardMaterial?Fp.environment:null,kp.fog=Fp.fog,kp.needsLights=ym(mp),kp.lightsStateVersion=um,kp.needsLights&&(bp.ambientLightColor.value=Xp.state.ambient,bp.lightProbe.value=Xp.state.probe,bp.directionalLights.value=Xp.state.directional,bp.directionalLightShadows.value=Xp.state.directionalShadow,bp.spotLights.value=Xp.state.spot,bp.spotLightShadows.value=Xp.state.spotShadow,bp.rectAreaLights.value=Xp.state.rectArea,bp.pointLights.value=Xp.state.point,bp.pointLightShadows.value=Xp.state.pointShadow,bp.hemisphereLights.value=Xp.state.hemi,bp.directionalShadowMap.value=Xp.state.directionalShadowMap,bp.directionalShadowMatrix.value=Xp.state.directionalShadowMatrix,bp.spotShadowMap.value=Xp.state.spotShadowMap,bp.spotShadowMatrix.value=Xp.state.spotShadowMatrix,bp.pointShadowMap.value=Xp.state.pointShadowMap,bp.pointShadowMatrix.value=Xp.state.pointShadowMatrix);var Ip=kp.program.getUniforms(),Up=WebGLUniforms.seqWithValue(Ip.seq,bp);kp.uniformsList=Up}function Mm(mp,Fp,Lp,kp){Ap.resetTextureUnits();var Xp=Fp.fog,cm=Lp.isMeshStandardMaterial?Fp.environment:null,um=zu===null?Nu.outputEncoding:zu.texture.encoding,im=gp.get(Lp),om=ku.state.lights;if(Sp&&(yp||mp!==Yu)){var dm=mp===Yu&&Lp.id===Qu;cp.setState(Lp.clippingPlanes,Lp.clipIntersection,Lp.clipShadows,mp,im,dm)}Lp.version===im.__version?(im.program===void 0||Lp.fog&&im.fog!==Xp||im.environment!==cm||im.needsLights&&im.lightsStateVersion!==om.state.version||im.numClippingPlanes!==void 0&&(im.numClippingPlanes!==cp.numPlanes||im.numIntersection!==cp.numIntersection)||im.outputEncoding!==um)&&gm(Lp,Fp,kp):(gm(Lp,Fp,kp),im.__version=Lp.version);var Am=!1,op=!1,vp=!1,bp=im.program,Ip=bp.getUniforms(),Up=im.uniforms;if(up.useProgram(bp.program)&&(Am=!0,op=!0,vp=!0),Lp.id!==Qu&&(Qu=Lp.id,op=!0),Am||Yu!==mp){if(Ip.setValue(Ep,"projectionMatrix",mp.projectionMatrix),hp.logarithmicDepthBuffer&&Ip.setValue(Ep,"logDepthBufFC",2/(Math.log(mp.far+1)/Math.LN2)),Yu!==mp&&(Yu=mp,op=!0,vp=!0),Lp.isShaderMaterial||Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshStandardMaterial||Lp.envMap){var am=Ip.map.cameraPosition;am!==void 0&&am.setValue(Ep,_p.setFromMatrixPosition(mp.matrixWorld))}(Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshLambertMaterial||Lp.isMeshBasicMaterial||Lp.isMeshStandardMaterial||Lp.isShaderMaterial)&&Ip.setValue(Ep,"isOrthographic",mp.isOrthographicCamera===!0),(Lp.isMeshPhongMaterial||Lp.isMeshToonMaterial||Lp.isMeshLambertMaterial||Lp.isMeshBasicMaterial||Lp.isMeshStandardMaterial||Lp.isShaderMaterial||Lp.skinning)&&Ip.setValue(Ep,"viewMatrix",mp.matrixWorldInverse)}if(Lp.skinning){Ip.setOptional(Ep,kp,"bindMatrix"),Ip.setOptional(Ep,kp,"bindMatrixInverse");var sm=kp.skeleton;if(sm){var _m=sm.bones;if(hp.floatVertexTextures){if(sm.boneTexture===void 0){var nm=Math.sqrt(_m.length*4);nm=MathUtils.ceilPowerOfTwo(nm),nm=Math.max(nm,4);var Em=new Float32Array(nm*nm*4);Em.set(sm.boneMatrices);var Lm=new DataTexture(Em,nm,nm,RGBAFormat,FloatType);sm.boneMatrices=Em,sm.boneTexture=Lm,sm.boneTextureSize=nm}Ip.setValue(Ep,"boneTexture",sm.boneTexture,Ap),Ip.setValue(Ep,"boneTextureSize",sm.boneTextureSize)}else Ip.setOptional(Ep,sm,"boneMatrices")}}return(op||im.receiveShadow!==kp.receiveShadow)&&(im.receiveShadow=kp.receiveShadow,Ip.setValue(Ep,"receiveShadow",kp.receiveShadow)),op&&(Ip.setValue(Ep,"toneMappingExposure",Nu.toneMappingExposure),Ip.setValue(Ep,"toneMappingWhitePoint",Nu.toneMappingWhitePoint),im.needsLights&&Im(Up,vp),Xp&&Lp.fog&&sp.refreshFogUniforms(Up,Xp),sp.refreshMaterialUniforms(Up,Lp,cm,_c,Zu),Up.ltc_1!==void 0&&(Up.ltc_1.value=UniformsLib.LTC_1),Up.ltc_2!==void 0&&(Up.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(Ep,im.uniformsList,Up,Ap)),Lp.isShaderMaterial&&Lp.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ep,im.uniformsList,Up,Ap),Lp.uniformsNeedUpdate=!1),Lp.isSpriteMaterial&&Ip.setValue(Ep,"center",kp.center),Ip.setValue(Ep,"modelViewMatrix",kp.modelViewMatrix),Ip.setValue(Ep,"normalMatrix",kp.normalMatrix),Ip.setValue(Ep,"modelMatrix",kp.matrixWorld),bp}function Im(mp,Fp){mp.ambientLightColor.needsUpdate=Fp,mp.lightProbe.needsUpdate=Fp,mp.directionalLights.needsUpdate=Fp,mp.directionalLightShadows.needsUpdate=Fp,mp.pointLights.needsUpdate=Fp,mp.pointLightShadows.needsUpdate=Fp,mp.spotLights.needsUpdate=Fp,mp.spotLightShadows.needsUpdate=Fp,mp.rectAreaLights.needsUpdate=Fp,mp.hemisphereLights.needsUpdate=Fp}function ym(mp){return mp.isMeshLambertMaterial||mp.isMeshToonMaterial||mp.isMeshPhongMaterial||mp.isMeshStandardMaterial||mp.isShadowMaterial||mp.isShaderMaterial&&mp.lights===!0}this.setFramebuffer=function(mp){ju!==mp&&zu===null&&Ep.bindFramebuffer(36160,mp),ju=mp},this.getActiveCubeFace=function(){return Hu},this.getActiveMipmapLevel=function(){return Uu},this.getRenderTarget=function(){return zu},this.setRenderTarget=function(mp,Fp,Lp){zu=mp,Hu=Fp,Uu=Lp,mp&&gp.get(mp).__webglFramebuffer===void 0&&Ap.setupRenderTarget(mp);var kp=ju,Xp=!1;if(mp){var cm=gp.get(mp).__webglFramebuffer;mp.isWebGLCubeRenderTarget?(kp=cm[Fp||0],Xp=!0):mp.isWebGLMultisampleRenderTarget?kp=gp.get(mp).__webglMultisampledFramebuffer:kp=cm,_d.copy(mp.viewport),_f.copy(mp.scissor),qu=mp.scissorTest}else _d.copy(ep).multiplyScalar(_c).floor(),_f.copy(tp).multiplyScalar(_c).floor(),qu=rp;if(Wu!==kp&&(Ep.bindFramebuffer(36160,kp),Wu=kp),up.viewport(_d),up.scissor(_f),up.setScissorTest(qu),Xp){var um=gp.get(mp.texture);Ep.framebufferTexture2D(36160,36064,34069+(Fp||0),um.__webglTexture,Lp||0)}},this.readRenderTargetPixels=function(mp,Fp,Lp,kp,Xp,cm,um){if(!(mp&&mp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var im=gp.get(mp).__webglFramebuffer;if(mp.isWebGLCubeRenderTarget&&um!==void 0&&(im=im[um]),im){var om=!1;im!==Wu&&(Ep.bindFramebuffer(36160,im),om=!0);try{var dm=mp.texture,Am=dm.format,op=dm.type;if(Am!==RGBAFormat&&Wp.convert(Am)!==Ep.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(op!==UnsignedByteType&&Wp.convert(op)!==Ep.getParameter(35738)&&!(op===FloatType&&(hp.isWebGL2||ip.get("OES_texture_float")||ip.get("WEBGL_color_buffer_float")))&&!(op===HalfFloatType&&(hp.isWebGL2?ip.get("EXT_color_buffer_float"):ip.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ep.checkFramebufferStatus(36160)===36053?Fp>=0&&Fp<=mp.width-kp&&Lp>=0&&Lp<=mp.height-Xp&&Ep.readPixels(Fp,Lp,kp,Xp,Wp.convert(Am),Wp.convert(op),cm):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{om&&Ep.bindFramebuffer(36160,Wu)}}},this.copyFramebufferToTexture=function(mp,Fp,Lp){Lp===void 0&&(Lp=0);var kp=Math.pow(2,-Lp),Xp=Math.floor(Fp.image.width*kp),cm=Math.floor(Fp.image.height*kp),um=Wp.convert(Fp.format);Ap.setTexture2D(Fp,0),Ep.copyTexImage2D(3553,Lp,um,mp.x,mp.y,Xp,cm,0),up.unbindTexture()},this.copyTextureToTexture=function(mp,Fp,Lp,kp){kp===void 0&&(kp=0);var Xp=Fp.image.width,cm=Fp.image.height,um=Wp.convert(Lp.format),im=Wp.convert(Lp.type);Ap.setTexture2D(Lp,0),Fp.isDataTexture?Ep.texSubImage2D(3553,kp,mp.x,mp.y,Xp,cm,um,im,Fp.image.data):Fp.isCompressedTexture?Ep.compressedTexSubImage2D(3553,kp,mp.x,mp.y,Fp.mipmaps[0].width,Fp.mipmaps[0].height,um,Fp.mipmaps[0].data):Ep.texSubImage2D(3553,kp,mp.x,mp.y,um,im,Fp.image),kp===0&&Lp.generateMipmaps&&Ep.generateMipmap(3553),up.unbindTexture()},this.initTexture=function(mp){Ap.setTexture2D(mp,0),up.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(_u,$u){this.name="",this.color=new Color(_u),this.density=$u!==void 0?$u:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(_u,$u,Tu){this.name="",this.color=new Color(_u),this.near=$u!==void 0?$u:1,this.far=Tu!==void 0?Tu:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(_u,$u){this.array=_u,this.stride=$u,this.count=_u!==void 0?_u.length/$u:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(_u){_u===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(_u){return this.usage=_u,this},copy:function(_u){return this.array=new _u.array.constructor(_u.array),this.count=_u.count,this.stride=_u.stride,this.usage=_u.usage,this},copyAt:function(_u,$u,Tu){_u*=this.stride,Tu*=$u.stride;for(var Cu=0,Pu=this.stride;Cu<Pu;Cu++)this.array[_u+Cu]=$u.array[Tu+Cu];return this},set:function(_u,$u){return $u===void 0&&($u=0),this.array.set(_u,$u),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(_u){return this.onUploadCallback=_u,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(_u,$u,Tu,Cu){this.name="",this.data=_u,this.itemSize=$u,this.offset=Tu,this.normalized=Cu===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(_u){for(var $u=0,Tu=this.data.count;$u<Tu;$u++)_vector$6.x=this.getX($u),_vector$6.y=this.getY($u),_vector$6.z=this.getZ($u),_vector$6.applyMatrix4(_u),this.setXYZ($u,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset]=$u,this},setY:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+1]=$u,this},setZ:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+2]=$u,this},setW:function(_u,$u){return this.data.array[_u*this.data.stride+this.offset+3]=$u,this},getX:function(_u){return this.data.array[_u*this.data.stride+this.offset]},getY:function(_u){return this.data.array[_u*this.data.stride+this.offset+1]},getZ:function(_u){return this.data.array[_u*this.data.stride+this.offset+2]},getW:function(_u){return this.data.array[_u*this.data.stride+this.offset+3]},setXY:function(_u,$u,Tu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this},setXYZ:function(_u,$u,Tu,Cu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this.data.array[_u+2]=Cu,this},setXYZW:function(_u,$u,Tu,Cu,Pu){return _u=_u*this.data.stride+this.offset,this.data.array[_u+0]=$u,this.data.array[_u+1]=Tu,this.data.array[_u+2]=Cu,this.data.array[_u+3]=Pu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Tu=$u*this.data.stride+this.offset,Cu=0;Cu<this.itemSize;Cu++)_u.push(this.data.array[Tu+Cu]);return new BufferAttribute(new this.array.constructor(_u),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var _u=[],$u=0;$u<this.count;$u++)for(var Tu=$u*this.data.stride+this.offset,Cu=0;Cu<this.itemSize;Cu++)_u.push(this.data.array[Tu+Cu]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_u,normalized:this.normalized}}});function SpriteMaterial(_u){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(_u)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.rotation=_u.rotation,this.sizeAttenuation=_u.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(_u){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var $u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Tu=new InterleavedBuffer($u,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Tu,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Tu,2,3,!1))}this.geometry=_geometry,this.material=_u!==void 0?_u:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(_u,$u){_u.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_u.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_u.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_u.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Tu=this.material.rotation,Cu,Pu;Tu!==0&&(Pu=Math.cos(Tu),Cu=Math.sin(Tu));var Bu=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Bu,_worldScale,Cu,Pu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Bu,_worldScale,Cu,Pu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Bu,_worldScale,Cu,Pu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Lu=_u.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Lu===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Bu,_worldScale,Cu,Pu),_uvB$1.set(0,1),Lu=_u.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Lu===null))){var Ru=_u.ray.origin.distanceTo(_intersectPoint);Ru<_u.near||Ru>_u.far||$u.push({distance:Ru,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(_u){return Object3D.prototype.copy.call(this,_u),_u.center!==void 0&&this.center.copy(_u.center),this}});function transformVertex(_u,$u,Tu,Cu,Pu,Bu){_alignedPosition.subVectors(_u,Tu).addScalar(.5).multiply(Cu),Pu!==void 0?(_rotatedPosition.x=Bu*_alignedPosition.x-Pu*_alignedPosition.y,_rotatedPosition.y=Pu*_alignedPosition.x+Bu*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_u.copy($u),_u.x+=_rotatedPosition.x,_u.y+=_rotatedPosition.y,_u.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(_u){Object3D.prototype.copy.call(this,_u,!1);for(var $u=_u.levels,Tu=0,Cu=$u.length;Tu<Cu;Tu++){var Pu=$u[Tu];this.addLevel(Pu.object.clone(),Pu.distance)}return this.autoUpdate=_u.autoUpdate,this},addLevel:function(_u,$u){$u===void 0&&($u=0),$u=Math.abs($u);for(var Tu=this.levels,Cu=0;Cu<Tu.length&&!($u<Tu[Cu].distance);Cu++);return Tu.splice(Cu,0,{distance:$u,object:_u}),this.add(_u),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(_u){var $u=this.levels;if($u.length>0){for(var Tu=1,Cu=$u.length;Tu<Cu&&!(_u<$u[Tu].distance);Tu++);return $u[Tu-1].object}return null},raycast:function(_u,$u){var Tu=this.levels;if(Tu.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Cu=_u.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Cu).raycast(_u,$u)}},update:function(_u){var $u=this.levels;if($u.length>1){_v1$4.setFromMatrixPosition(_u.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Tu=_v1$4.distanceTo(_v2$2)/_u.zoom;$u[0].object.visible=!0;for(var Cu=1,Pu=$u.length;Cu<Pu&&Tu>=$u[Cu].distance;Cu++)$u[Cu-1].object.visible=!1,$u[Cu].object.visible=!0;for(this._currentLevel=Cu-1;Cu<Pu;Cu++)$u[Cu].object.visible=!1}},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);this.autoUpdate===!1&&($u.object.autoUpdate=!1),$u.object.levels=[];for(var Tu=this.levels,Cu=0,Pu=Tu.length;Cu<Pu;Cu++){var Bu=Tu[Cu];$u.object.levels.push({object:Bu.object.uuid,distance:Bu.distance})}return $u}});function SkinnedMesh(_u,$u){_u&&_u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,_u,$u),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(_u,$u){this.skeleton=_u,$u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),$u=this.matrixWorld),this.bindMatrix.copy($u),this.bindMatrixInverse.getInverse($u)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var _u=new Vector4,$u=this.geometry.attributes.skinWeight,Tu=0,Cu=$u.count;Tu<Cu;Tu++){_u.x=$u.getX(Tu),_u.y=$u.getY(Tu),_u.z=$u.getZ(Tu),_u.w=$u.getW(Tu);var Pu=1/_u.manhattanLength();Pu!==1/0?_u.multiplyScalar(Pu):_u.set(1,0,0,0),$u.setXYZW(Tu,_u.x,_u.y,_u.z,_u.w)}},updateMatrixWorld:function(_u){Mesh.prototype.updateMatrixWorld.call(this,_u),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var _u=new Vector3,$u=new Vector4,Tu=new Vector4,Cu=new Vector3,Pu=new Matrix4;return function(Bu,Lu){var Ru=this.skeleton,Ou=this.geometry;$u.fromBufferAttribute(Ou.attributes.skinIndex,Bu),Tu.fromBufferAttribute(Ou.attributes.skinWeight,Bu),_u.fromBufferAttribute(Ou.attributes.position,Bu).applyMatrix4(this.bindMatrix),Lu.set(0,0,0);for(var Du=0;Du<4;Du++){var Fu=Tu.getComponent(Du);if(Fu!==0){var Vu=$u.getComponent(Du);Pu.multiplyMatrices(Ru.bones[Vu].matrixWorld,Ru.boneInverses[Vu]),Lu.addScaledVector(Cu.copy(_u).applyMatrix4(Pu),Fu)}}return Lu.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(_u,$u){if(_u=_u||[],this.bones=_u.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,$u===void 0)this.calculateInverses();else if(this.bones.length===$u.length)this.boneInverses=$u.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Tu=0,Cu=this.bones.length;Tu<Cu;Tu++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var _u=0,$u=this.bones.length;_u<$u;_u++){var Tu=new Matrix4;this.bones[_u]&&Tu.getInverse(this.bones[_u].matrixWorld),this.boneInverses.push(Tu)}},pose:function(){var _u,$u,Tu;for($u=0,Tu=this.bones.length;$u<Tu;$u++)_u=this.bones[$u],_u&&_u.matrixWorld.getInverse(this.boneInverses[$u]);for($u=0,Tu=this.bones.length;$u<Tu;$u++)_u=this.bones[$u],_u&&(_u.parent&&_u.parent.isBone?(_u.matrix.getInverse(_u.parent.matrixWorld),_u.matrix.multiply(_u.matrixWorld)):_u.matrix.copy(_u.matrixWorld),_u.matrix.decompose(_u.position,_u.quaternion,_u.scale))},update:function(){for(var _u=this.bones,$u=this.boneInverses,Tu=this.boneMatrices,Cu=this.boneTexture,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Lu=_u[Pu]?_u[Pu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Lu,$u[Pu]),_offsetMatrix.toArray(Tu,Pu*16)}Cu!==void 0&&(Cu.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(_u){for(var $u=0,Tu=this.bones.length;$u<Tu;$u++){var Cu=this.bones[$u];if(Cu.name===_u)return Cu}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(_u,$u,Tu){Mesh.call(this,_u,$u),this.instanceMatrix=new BufferAttribute(new Float32Array(Tu*16),16),this.count=Tu,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(_u,$u){$u.fromArray(this.instanceMatrix.array,_u*16)},raycast:function(_u,$u){var Tu=this.matrixWorld,Cu=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Pu=0;Pu<Cu;Pu++){this.getMatrixAt(Pu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Tu,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_u,_instanceIntersects);for(var Bu=0,Lu=_instanceIntersects.length;Bu<Lu;Bu++){var Ru=_instanceIntersects[Bu];Ru.instanceId=Pu,Ru.object=this,$u.push(Ru)}_instanceIntersects.length=0}},setMatrixAt:function(_u,$u){$u.toArray(this.instanceMatrix.array,_u*16)},updateMorphTargets:function(){}});function LineBasicMaterial(_u){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(_u)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.linewidth=_u.linewidth,this.linecap=_u.linecap,this.linejoin=_u.linejoin,this.morphTargets=_u.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(_u,$u,Tu){Tu===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Tu=[0],Cu=1,Pu=$u.count;Cu<Pu;Cu++)_start.fromBufferAttribute($u,Cu-1),_end.fromBufferAttribute($u,Cu),Tu[Cu]=Tu[Cu-1],Tu[Cu]+=_start.distanceTo(_end);_u.setAttribute("lineDistance",new Float32BufferAttribute(Tu,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry){var Bu=_u.vertices,Tu=_u.lineDistances;Tu[0]=0;for(var Cu=1,Pu=Bu.length;Cu<Pu;Cu++)Tu[Cu]=Tu[Cu-1],Tu[Cu]+=Bu[Cu-1].distanceTo(Bu[Cu])}return this},raycast:function(_u,$u){var Tu=this.geometry,Cu=this.matrixWorld,Pu=_u.params.Line.threshold;if(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$2.copy(Tu.boundingSphere),_sphere$2.applyMatrix4(Cu),_sphere$2.radius+=Pu,_u.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Cu),_ray$1.copy(_u.ray).applyMatrix4(_inverseMatrix$1);var Bu=Pu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Bu*Bu,Ru=new Vector3,Ou=new Vector3,Du=new Vector3,Fu=new Vector3,Vu=this&&this.isLineSegments?2:1;if(Tu.isBufferGeometry){var ku=Tu.index,Nu=Tu.attributes,Gu=Nu.position.array;if(ku!==null)for(var ju=ku.array,Hu=0,Uu=ju.length-1;Hu<Uu;Hu+=Vu){var zu=ju[Hu],Wu=ju[Hu+1];Ru.fromArray(Gu,zu*3),Ou.fromArray(Gu,Wu*3);var Qu=_ray$1.distanceSqToSegment(Ru,Ou,Fu,Du);if(!(Qu>Lu)){Fu.applyMatrix4(this.matrixWorld);var Ku=_u.ray.origin.distanceTo(Fu);Ku<_u.near||Ku>_u.far||$u.push({distance:Ku,point:Du.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}else for(var Hu=0,Uu=Gu.length/3-1;Hu<Uu;Hu+=Vu){Ru.fromArray(Gu,3*Hu),Ou.fromArray(Gu,3*Hu+3);var Qu=_ray$1.distanceSqToSegment(Ru,Ou,Fu,Du);if(!(Qu>Lu)){Fu.applyMatrix4(this.matrixWorld);var Ku=_u.ray.origin.distanceTo(Fu);Ku<_u.near||Ku>_u.far||$u.push({distance:Ku,point:Du.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}}else if(Tu.isGeometry)for(var Yu=Tu.vertices,Xc=Yu.length,Hu=0;Hu<Xc-1;Hu+=Vu){var Qu=_ray$1.distanceSqToSegment(Yu[Hu],Yu[Hu+1],Fu,Du);if(!(Qu>Lu)){Fu.applyMatrix4(this.matrixWorld);var Ku=_u.ray.origin.distanceTo(Fu);Ku<_u.near||Ku>_u.far||$u.push({distance:Ku,point:Du.clone().applyMatrix4(this.matrixWorld),index:Hu,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Bu=Object.keys(Pu);if(Bu.length>0){var Lu=Pu[Bu[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Ru=_u.morphTargets;Ru!==void 0&&Ru.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(_u,$u){Line$1.call(this,_u,$u),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var _u=this.geometry;if(_u.isBufferGeometry)if(_u.index===null){for(var $u=_u.attributes.position,Tu=[],Cu=0,Pu=$u.count;Cu<Pu;Cu+=2)_start$1.fromBufferAttribute($u,Cu),_end$1.fromBufferAttribute($u,Cu+1),Tu[Cu]=Cu===0?0:Tu[Cu-1],Tu[Cu+1]=Tu[Cu]+_start$1.distanceTo(_end$1);_u.setAttribute("lineDistance",new Float32BufferAttribute(Tu,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(_u.isGeometry)for(var Bu=_u.vertices,Tu=_u.lineDistances,Cu=0,Pu=Bu.length;Cu<Pu;Cu+=2)_start$1.copy(Bu[Cu]),_end$1.copy(Bu[Cu+1]),Tu[Cu]=Cu===0?0:Tu[Cu-1],Tu[Cu+1]=Tu[Cu]+_start$1.distanceTo(_end$1);return this}});function LineLoop(_u,$u){Line$1.call(this,_u,$u),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(_u){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(_u)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.alphaMap=_u.alphaMap,this.size=_u.size,this.sizeAttenuation=_u.sizeAttenuation,this.morphTargets=_u.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(_u,$u){Object3D.call(this),this.type="Points",this.geometry=_u!==void 0?_u:new BufferGeometry,this.material=$u!==void 0?$u:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(_u,$u){var Tu=this.geometry,Cu=this.matrixWorld,Pu=_u.params.Points.threshold;if(Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$3.copy(Tu.boundingSphere),_sphere$3.applyMatrix4(Cu),_sphere$3.radius+=Pu,_u.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Cu),_ray$2.copy(_u.ray).applyMatrix4(_inverseMatrix$2);var Bu=Pu/((this.scale.x+this.scale.y+this.scale.z)/3),Lu=Bu*Bu;if(Tu.isBufferGeometry){var Ru=Tu.index,Ou=Tu.attributes,Du=Ou.position.array;if(Ru!==null)for(var Fu=Ru.array,Vu=0,ku=Fu.length;Vu<ku;Vu++){var Nu=Fu[Vu];_position$1.fromArray(Du,Nu*3),testPoint(_position$1,Nu,Lu,Cu,_u,$u,this)}else for(var Vu=0,Gu=Du.length/3;Vu<Gu;Vu++)_position$1.fromArray(Du,Vu*3),testPoint(_position$1,Vu,Lu,Cu,_u,$u,this)}else for(var ju=Tu.vertices,Vu=0,Gu=ju.length;Vu<Gu;Vu++)testPoint(ju[Vu],Vu,Lu,Cu,_u,$u,this)}},updateMorphTargets:function(){var _u=this.geometry,$u,Tu,Cu;if(_u.isBufferGeometry){var Pu=_u.morphAttributes,Bu=Object.keys(Pu);if(Bu.length>0){var Lu=Pu[Bu[0]];if(Lu!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},$u=0,Tu=Lu.length;$u<Tu;$u++)Cu=Lu[$u].name||String($u),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Cu]=$u}}else{var Ru=_u.morphTargets;Ru!==void 0&&Ru.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(_u,$u,Tu,Cu,Pu,Bu,Lu){var Ru=_ray$2.distanceSqToPoint(_u);if(Ru<Tu){var Ou=new Vector3;_ray$2.closestPointToPoint(_u,Ou),Ou.applyMatrix4(Cu);var Du=Pu.ray.origin.distanceTo(Ou);if(Du<Pu.near||Du>Pu.far)return;Bu.push({distance:Du,distanceToRay:Math.sqrt(Ru),point:Ou,index:$u,face:null,object:Lu})}}function VideoTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){Texture.call(this,_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou),this.format=Lu!==void 0?Lu:RGBFormat,this.minFilter=Bu!==void 0?Bu:LinearFilter,this.magFilter=Pu!==void 0?Pu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var _u=this.image;_u.readyState>=_u.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu){Texture.call(this,null,Bu,Lu,Ru,Ou,Du,Cu,Pu,Fu,Vu),this.image={width:$u,height:Tu},this.mipmaps=_u,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){Texture.call(this,_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du){if(Du=Du!==void 0?Du:DepthFormat,Du!==DepthFormat&&Du!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Tu===void 0&&Du===DepthFormat&&(Tu=UnsignedShortType),Tu===void 0&&Du===DepthStencilFormat&&(Tu=UnsignedInt248Type),Texture.call(this,null,Cu,Pu,Bu,Lu,Ru,Du,Tu,Ou),this.image={width:_u,height:$u},this.magFilter=Lu!==void 0?Lu:NearestFilter,this.minFilter=Ru!==void 0?Ru:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(_u){BufferGeometry.call(this),this.type="WireframeGeometry";var $u=[],Tu,Cu,Pu,Bu,Lu,Ru=[0,0],Ou={},Du,Fu,Vu,ku,Nu=["a","b","c"],Gu;if(_u&&_u.isGeometry){var ju=_u.faces;for(Tu=0,Pu=ju.length;Tu<Pu;Tu++){var Hu=ju[Tu];for(Cu=0;Cu<3;Cu++)Fu=Hu[Nu[Cu]],Vu=Hu[Nu[(Cu+1)%3]],Ru[0]=Math.min(Fu,Vu),Ru[1]=Math.max(Fu,Vu),ku=Ru[0]+","+Ru[1],Ou[ku]===void 0&&(Ou[ku]={index1:Ru[0],index2:Ru[1]})}for(ku in Ou)Du=Ou[ku],Gu=_u.vertices[Du.index1],$u.push(Gu.x,Gu.y,Gu.z),Gu=_u.vertices[Du.index2],$u.push(Gu.x,Gu.y,Gu.z)}else if(_u&&_u.isBufferGeometry){var Uu,zu,Wu,Qu,Ku,Yu,Xc,_d;if(Gu=new Vector3,_u.index!==null){for(Uu=_u.attributes.position,zu=_u.index,Wu=_u.groups,Wu.length===0&&(Wu=[{start:0,count:zu.count,materialIndex:0}]),Bu=0,Lu=Wu.length;Bu<Lu;++Bu)for(Qu=Wu[Bu],Ku=Qu.start,Yu=Qu.count,Tu=Ku,Pu=Ku+Yu;Tu<Pu;Tu+=3)for(Cu=0;Cu<3;Cu++)Fu=zu.getX(Tu+Cu),Vu=zu.getX(Tu+(Cu+1)%3),Ru[0]=Math.min(Fu,Vu),Ru[1]=Math.max(Fu,Vu),ku=Ru[0]+","+Ru[1],Ou[ku]===void 0&&(Ou[ku]={index1:Ru[0],index2:Ru[1]});for(ku in Ou)Du=Ou[ku],Gu.fromBufferAttribute(Uu,Du.index1),$u.push(Gu.x,Gu.y,Gu.z),Gu.fromBufferAttribute(Uu,Du.index2),$u.push(Gu.x,Gu.y,Gu.z)}else for(Uu=_u.attributes.position,Tu=0,Pu=Uu.count/3;Tu<Pu;Tu++)for(Cu=0;Cu<3;Cu++)Xc=3*Tu+Cu,Gu.fromBufferAttribute(Uu,Xc),$u.push(Gu.x,Gu.y,Gu.z),_d=3*Tu+(Cu+1)%3,Gu.fromBufferAttribute(Uu,_d),$u.push(Gu.x,Gu.y,Gu.z)}this.setAttribute("position",new Float32BufferAttribute($u,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(_u,$u,Tu){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:_u,slices:$u,stacks:Tu},this.fromBufferGeometry(new ParametricBufferGeometry(_u,$u,Tu)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(_u,$u,Tu){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:_u,slices:$u,stacks:Tu};var Cu=[],Pu=[],Bu=[],Lu=[],Ru=1e-5,Ou=new Vector3,Du=new Vector3,Fu=new Vector3,Vu=new Vector3,ku=new Vector3,Nu,Gu;_u.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var ju=$u+1;for(Nu=0;Nu<=Tu;Nu++){var Hu=Nu/Tu;for(Gu=0;Gu<=$u;Gu++){var Uu=Gu/$u;_u(Uu,Hu,Du),Pu.push(Du.x,Du.y,Du.z),Uu-Ru>=0?(_u(Uu-Ru,Hu,Fu),Vu.subVectors(Du,Fu)):(_u(Uu+Ru,Hu,Fu),Vu.subVectors(Fu,Du)),Hu-Ru>=0?(_u(Uu,Hu-Ru,Fu),ku.subVectors(Du,Fu)):(_u(Uu,Hu+Ru,Fu),ku.subVectors(Fu,Du)),Ou.crossVectors(Vu,ku).normalize(),Bu.push(Ou.x,Ou.y,Ou.z),Lu.push(Uu,Hu)}}for(Nu=0;Nu<Tu;Nu++)for(Gu=0;Gu<$u;Gu++){var zu=Nu*ju+Gu,Wu=Nu*ju+Gu+1,Qu=(Nu+1)*ju+Gu+1,Ku=(Nu+1)*ju+Gu;Cu.push(zu,Wu,Ku),Cu.push(Wu,Qu,Ku)}this.setIndex(Cu),this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("normal",new Float32BufferAttribute(Bu,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:_u,indices:$u,radius:Tu,detail:Cu},this.fromBufferGeometry(new PolyhedronBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:_u,indices:$u,radius:Tu,detail:Cu},Tu=Tu||1,Cu=Cu||0;var Pu=[],Bu=[];Lu(Cu),Ou(Tu),Du(),this.setAttribute("position",new Float32BufferAttribute(Pu,3)),this.setAttribute("normal",new Float32BufferAttribute(Pu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Bu,2)),Cu===0?this.computeVertexNormals():this.normalizeNormals();function Lu(Uu){for(var zu=new Vector3,Wu=new Vector3,Qu=new Vector3,Ku=0;Ku<$u.length;Ku+=3)ku($u[Ku+0],zu),ku($u[Ku+1],Wu),ku($u[Ku+2],Qu),Ru(zu,Wu,Qu,Uu)}function Ru(Uu,zu,Wu,Qu){var Ku=Math.pow(2,Qu),Yu=[],Xc,_d;for(Xc=0;Xc<=Ku;Xc++){Yu[Xc]=[];var _f=Uu.clone().lerp(Wu,Xc/Ku),qu=zu.clone().lerp(Wu,Xc/Ku),Xu=Ku-Xc;for(_d=0;_d<=Xu;_d++)_d===0&&Xc===Ku?Yu[Xc][_d]=_f:Yu[Xc][_d]=_f.clone().lerp(qu,_d/Xu)}for(Xc=0;Xc<Ku;Xc++)for(_d=0;_d<2*(Ku-Xc)-1;_d++){var Zu=Math.floor(_d/2);_d%2===0?(Vu(Yu[Xc][Zu+1]),Vu(Yu[Xc+1][Zu]),Vu(Yu[Xc][Zu])):(Vu(Yu[Xc][Zu+1]),Vu(Yu[Xc+1][Zu+1]),Vu(Yu[Xc+1][Zu]))}}function Ou(Uu){for(var zu=new Vector3,Wu=0;Wu<Pu.length;Wu+=3)zu.x=Pu[Wu+0],zu.y=Pu[Wu+1],zu.z=Pu[Wu+2],zu.normalize().multiplyScalar(Uu),Pu[Wu+0]=zu.x,Pu[Wu+1]=zu.y,Pu[Wu+2]=zu.z}function Du(){for(var Uu=new Vector3,zu=0;zu<Pu.length;zu+=3){Uu.x=Pu[zu+0],Uu.y=Pu[zu+1],Uu.z=Pu[zu+2];var Wu=ju(Uu)/2/Math.PI+.5,Qu=Hu(Uu)/Math.PI+.5;Bu.push(Wu,1-Qu)}Nu(),Fu()}function Fu(){for(var Uu=0;Uu<Bu.length;Uu+=6){var zu=Bu[Uu+0],Wu=Bu[Uu+2],Qu=Bu[Uu+4],Ku=Math.max(zu,Wu,Qu),Yu=Math.min(zu,Wu,Qu);Ku>.9&&Yu<.1&&(zu<.2&&(Bu[Uu+0]+=1),Wu<.2&&(Bu[Uu+2]+=1),Qu<.2&&(Bu[Uu+4]+=1))}}function Vu(Uu){Pu.push(Uu.x,Uu.y,Uu.z)}function ku(Uu,zu){var Wu=Uu*3;zu.x=_u[Wu+0],zu.y=_u[Wu+1],zu.z=_u[Wu+2]}function Nu(){for(var Uu=new Vector3,zu=new Vector3,Wu=new Vector3,Qu=new Vector3,Ku=new Vector2,Yu=new Vector2,Xc=new Vector2,_d=0,_f=0;_d<Pu.length;_d+=9,_f+=6){Uu.set(Pu[_d+0],Pu[_d+1],Pu[_d+2]),zu.set(Pu[_d+3],Pu[_d+4],Pu[_d+5]),Wu.set(Pu[_d+6],Pu[_d+7],Pu[_d+8]),Ku.set(Bu[_f+0],Bu[_f+1]),Yu.set(Bu[_f+2],Bu[_f+3]),Xc.set(Bu[_f+4],Bu[_f+5]),Qu.copy(Uu).add(zu).add(Wu).divideScalar(3);var qu=ju(Qu);Gu(Ku,_f+0,Uu,qu),Gu(Yu,_f+2,zu,qu),Gu(Xc,_f+4,Wu,qu)}}function Gu(Uu,zu,Wu,Qu){Qu<0&&Uu.x===1&&(Bu[zu]=Uu.x-1),Wu.x===0&&Wu.z===0&&(Bu[zu]=Qu/2/Math.PI+.5)}function ju(Uu){return Math.atan2(Uu.z,-Uu.x)}function Hu(Uu){return Math.atan2(-Uu.y,Math.sqrt(Uu.x*Uu.x+Uu.z*Uu.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(_u,$u){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new TetrahedronBufferGeometry(_u,$u)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(_u,$u){var Tu=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Cu=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Tu,Cu,_u,$u),this.type="TetrahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(_u,$u){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new OctahedronBufferGeometry(_u,$u)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(_u,$u){var Tu=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Cu=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Tu,Cu,_u,$u),this.type="OctahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(_u,$u){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new IcosahedronBufferGeometry(_u,$u)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(_u,$u){var Tu=(1+Math.sqrt(5))/2,Cu=[-1,Tu,0,1,Tu,0,-1,-Tu,0,1,-Tu,0,0,-1,Tu,0,1,Tu,0,-1,-Tu,0,1,-Tu,Tu,0,-1,Tu,0,1,-Tu,0,-1,-Tu,0,1],Pu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Cu,Pu,_u,$u),this.type="IcosahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(_u,$u){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:_u,detail:$u},this.fromBufferGeometry(new DodecahedronBufferGeometry(_u,$u)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(_u,$u){var Tu=(1+Math.sqrt(5))/2,Cu=1/Tu,Pu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Cu,-Tu,0,-Cu,Tu,0,Cu,-Tu,0,Cu,Tu,-Cu,-Tu,0,-Cu,Tu,0,Cu,-Tu,0,Cu,Tu,0,-Tu,0,-Cu,Tu,0,-Cu,-Tu,0,Cu,Tu,0,Cu],Bu=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Pu,Bu,_u,$u),this.type="DodecahedronBufferGeometry",this.parameters={radius:_u,detail:$u}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(_u,$u,Tu,Cu,Pu,Bu){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Tu,radialSegments:Cu,closed:Pu},Bu!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Lu=new TubeBufferGeometry(_u,$u,Tu,Cu,Pu);this.tangents=Lu.tangents,this.normals=Lu.normals,this.binormals=Lu.binormals,this.fromBufferGeometry(Lu),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(_u,$u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:_u,tubularSegments:$u,radius:Tu,radialSegments:Cu,closed:Pu},$u=$u||64,Tu=Tu||1,Cu=Cu||8,Pu=Pu||!1;var Bu=_u.computeFrenetFrames($u,Pu);this.tangents=Bu.tangents,this.normals=Bu.normals,this.binormals=Bu.binormals;var Lu=new Vector3,Ru=new Vector3,Ou=new Vector2,Du=new Vector3,Fu,Vu,ku=[],Nu=[],Gu=[],ju=[];Hu(),this.setIndex(ju),this.setAttribute("position",new Float32BufferAttribute(ku,3)),this.setAttribute("normal",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Gu,2));function Hu(){for(Fu=0;Fu<$u;Fu++)Uu(Fu);Uu(Pu===!1?$u:0),Wu(),zu()}function Uu(Qu){Du=_u.getPointAt(Qu/$u,Du);var Ku=Bu.normals[Qu],Yu=Bu.binormals[Qu];for(Vu=0;Vu<=Cu;Vu++){var Xc=Vu/Cu*Math.PI*2,_d=Math.sin(Xc),_f=-Math.cos(Xc);Ru.x=_f*Ku.x+_d*Yu.x,Ru.y=_f*Ku.y+_d*Yu.y,Ru.z=_f*Ku.z+_d*Yu.z,Ru.normalize(),Nu.push(Ru.x,Ru.y,Ru.z),Lu.x=Du.x+Tu*Ru.x,Lu.y=Du.y+Tu*Ru.y,Lu.z=Du.z+Tu*Ru.z,ku.push(Lu.x,Lu.y,Lu.z)}}function zu(){for(Vu=1;Vu<=$u;Vu++)for(Fu=1;Fu<=Cu;Fu++){var Qu=(Cu+1)*(Vu-1)+(Fu-1),Ku=(Cu+1)*Vu+(Fu-1),Yu=(Cu+1)*Vu+Fu,Xc=(Cu+1)*(Vu-1)+Fu;ju.push(Qu,Ku,Xc),ju.push(Ku,Yu,Xc)}}function Wu(){for(Fu=0;Fu<=$u;Fu++)for(Vu=0;Vu<=Cu;Vu++)Ou.x=Fu/$u,Ou.y=Vu/Cu,Gu.push(Ou.x,Ou.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.path=this.parameters.path.toJSON(),_u};function TorusKnotGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Tu,radialSegments:Cu,p:Pu,q:Bu},Lu!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(_u,$u,Tu,Cu,Pu,Bu)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(_u,$u,Tu,Cu,Pu,Bu){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:_u,tube:$u,tubularSegments:Tu,radialSegments:Cu,p:Pu,q:Bu},_u=_u||1,$u=$u||.4,Tu=Math.floor(Tu)||64,Cu=Math.floor(Cu)||8,Pu=Pu||2,Bu=Bu||3;var Lu=[],Ru=[],Ou=[],Du=[],Fu,Vu,ku=new Vector3,Nu=new Vector3,Gu=new Vector3,ju=new Vector3,Hu=new Vector3,Uu=new Vector3,zu=new Vector3;for(Fu=0;Fu<=Tu;++Fu){var Wu=Fu/Tu*Pu*Math.PI*2;for(Xu(Wu,Pu,Bu,_u,Gu),Xu(Wu+.01,Pu,Bu,_u,ju),Uu.subVectors(ju,Gu),zu.addVectors(ju,Gu),Hu.crossVectors(Uu,zu),zu.crossVectors(Hu,Uu),Hu.normalize(),zu.normalize(),Vu=0;Vu<=Cu;++Vu){var Qu=Vu/Cu*Math.PI*2,Ku=-$u*Math.cos(Qu),Yu=$u*Math.sin(Qu);ku.x=Gu.x+(Ku*zu.x+Yu*Hu.x),ku.y=Gu.y+(Ku*zu.y+Yu*Hu.y),ku.z=Gu.z+(Ku*zu.z+Yu*Hu.z),Ru.push(ku.x,ku.y,ku.z),Nu.subVectors(ku,Gu).normalize(),Ou.push(Nu.x,Nu.y,Nu.z),Du.push(Fu/Tu),Du.push(Vu/Cu)}}for(Vu=1;Vu<=Tu;Vu++)for(Fu=1;Fu<=Cu;Fu++){var Xc=(Cu+1)*(Vu-1)+(Fu-1),_d=(Cu+1)*Vu+(Fu-1),_f=(Cu+1)*Vu+Fu,qu=(Cu+1)*(Vu-1)+Fu;Lu.push(Xc,_d,qu),Lu.push(_d,_f,qu)}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Du,2));function Xu(Zu,_c,Ju,_h,ep){var tp=Math.cos(Zu),rp=Math.sin(Zu),dp=Ju/_c*Zu,cp=Math.cos(dp);ep.x=_h*(2+cp)*.5*tp,ep.y=_h*(2+cp)*rp*.5,ep.z=_h*Math.sin(dp)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(_u,$u,Tu,Cu,Pu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Tu,tubularSegments:Cu,arc:Pu},this.fromBufferGeometry(new TorusBufferGeometry(_u,$u,Tu,Cu,Pu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(_u,$u,Tu,Cu,Pu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:_u,tube:$u,radialSegments:Tu,tubularSegments:Cu,arc:Pu},_u=_u||1,$u=$u||.4,Tu=Math.floor(Tu)||8,Cu=Math.floor(Cu)||6,Pu=Pu||Math.PI*2;var Bu=[],Lu=[],Ru=[],Ou=[],Du=new Vector3,Fu=new Vector3,Vu=new Vector3,ku,Nu;for(ku=0;ku<=Tu;ku++)for(Nu=0;Nu<=Cu;Nu++){var Gu=Nu/Cu*Pu,ju=ku/Tu*Math.PI*2;Fu.x=(_u+$u*Math.cos(ju))*Math.cos(Gu),Fu.y=(_u+$u*Math.cos(ju))*Math.sin(Gu),Fu.z=$u*Math.sin(ju),Lu.push(Fu.x,Fu.y,Fu.z),Du.x=_u*Math.cos(Gu),Du.y=_u*Math.sin(Gu),Vu.subVectors(Fu,Du).normalize(),Ru.push(Vu.x,Vu.y,Vu.z),Ou.push(Nu/Cu),Ou.push(ku/Tu)}for(ku=1;ku<=Tu;ku++)for(Nu=1;Nu<=Cu;Nu++){var Hu=(Cu+1)*ku+Nu-1,Uu=(Cu+1)*(ku-1)+Nu-1,zu=(Cu+1)*(ku-1)+Nu,Wu=(Cu+1)*ku+Nu;Bu.push(Hu,Uu,Wu),Bu.push(Uu,zu,Wu)}this.setIndex(Bu),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(_u,$u,Tu){Tu=Tu||2;var Cu=$u&&$u.length,Pu=Cu?$u[0]*Tu:_u.length,Bu=linkedList(_u,0,Pu,Tu,!0),Lu=[];if(!Bu||Bu.next===Bu.prev)return Lu;var Ru,Ou,Du,Fu,Vu,ku,Nu;if(Cu&&(Bu=eliminateHoles(_u,$u,Bu,Tu)),_u.length>80*Tu){Ru=Du=_u[0],Ou=Fu=_u[1];for(var Gu=Tu;Gu<Pu;Gu+=Tu)Vu=_u[Gu],ku=_u[Gu+1],Vu<Ru&&(Ru=Vu),ku<Ou&&(Ou=ku),Vu>Du&&(Du=Vu),ku>Fu&&(Fu=ku);Nu=Math.max(Du-Ru,Fu-Ou),Nu=Nu!==0?1/Nu:0}return earcutLinked(Bu,Lu,Tu,Ru,Ou,Nu),Lu}};function linkedList(_u,$u,Tu,Cu,Pu){var Bu,Lu;if(Pu===signedArea(_u,$u,Tu,Cu)>0)for(Bu=$u;Bu<Tu;Bu+=Cu)Lu=insertNode(Bu,_u[Bu],_u[Bu+1],Lu);else for(Bu=Tu-Cu;Bu>=$u;Bu-=Cu)Lu=insertNode(Bu,_u[Bu],_u[Bu+1],Lu);return Lu&&equals(Lu,Lu.next)&&(removeNode(Lu),Lu=Lu.next),Lu}function filterPoints(_u,$u){if(!_u)return _u;$u||($u=_u);var Tu=_u,Cu;do if(Cu=!1,!Tu.steiner&&(equals(Tu,Tu.next)||area(Tu.prev,Tu,Tu.next)===0)){if(removeNode(Tu),Tu=$u=Tu.prev,Tu===Tu.next)break;Cu=!0}else Tu=Tu.next;while(Cu||Tu!==$u);return $u}function earcutLinked(_u,$u,Tu,Cu,Pu,Bu,Lu){if(!!_u){!Lu&&Bu&&indexCurve(_u,Cu,Pu,Bu);for(var Ru=_u,Ou,Du;_u.prev!==_u.next;){if(Ou=_u.prev,Du=_u.next,Bu?isEarHashed(_u,Cu,Pu,Bu):isEar(_u)){$u.push(Ou.i/Tu),$u.push(_u.i/Tu),$u.push(Du.i/Tu),removeNode(_u),_u=Du.next,Ru=Du.next;continue}if(_u=Du,_u===Ru){Lu?Lu===1?(_u=cureLocalIntersections(filterPoints(_u),$u,Tu),earcutLinked(_u,$u,Tu,Cu,Pu,Bu,2)):Lu===2&&splitEarcut(_u,$u,Tu,Cu,Pu,Bu):earcutLinked(filterPoints(_u),$u,Tu,Cu,Pu,Bu,1);break}}}}function isEar(_u){var $u=_u.prev,Tu=_u,Cu=_u.next;if(area($u,Tu,Cu)>=0)return!1;for(var Pu=_u.next.next;Pu!==_u.prev;){if(pointInTriangle($u.x,$u.y,Tu.x,Tu.y,Cu.x,Cu.y,Pu.x,Pu.y)&&area(Pu.prev,Pu,Pu.next)>=0)return!1;Pu=Pu.next}return!0}function isEarHashed(_u,$u,Tu,Cu){var Pu=_u.prev,Bu=_u,Lu=_u.next;if(area(Pu,Bu,Lu)>=0)return!1;for(var Ru=Pu.x<Bu.x?Pu.x<Lu.x?Pu.x:Lu.x:Bu.x<Lu.x?Bu.x:Lu.x,Ou=Pu.y<Bu.y?Pu.y<Lu.y?Pu.y:Lu.y:Bu.y<Lu.y?Bu.y:Lu.y,Du=Pu.x>Bu.x?Pu.x>Lu.x?Pu.x:Lu.x:Bu.x>Lu.x?Bu.x:Lu.x,Fu=Pu.y>Bu.y?Pu.y>Lu.y?Pu.y:Lu.y:Bu.y>Lu.y?Bu.y:Lu.y,Vu=zOrder(Ru,Ou,$u,Tu,Cu),ku=zOrder(Du,Fu,$u,Tu,Cu),Nu=_u.prevZ,Gu=_u.nextZ;Nu&&Nu.z>=Vu&&Gu&&Gu.z<=ku;){if(Nu!==_u.prev&&Nu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Bu.x,Bu.y,Lu.x,Lu.y,Nu.x,Nu.y)&&area(Nu.prev,Nu,Nu.next)>=0||(Nu=Nu.prevZ,Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Bu.x,Bu.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0))return!1;Gu=Gu.nextZ}for(;Nu&&Nu.z>=Vu;){if(Nu!==_u.prev&&Nu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Bu.x,Bu.y,Lu.x,Lu.y,Nu.x,Nu.y)&&area(Nu.prev,Nu,Nu.next)>=0)return!1;Nu=Nu.prevZ}for(;Gu&&Gu.z<=ku;){if(Gu!==_u.prev&&Gu!==_u.next&&pointInTriangle(Pu.x,Pu.y,Bu.x,Bu.y,Lu.x,Lu.y,Gu.x,Gu.y)&&area(Gu.prev,Gu,Gu.next)>=0)return!1;Gu=Gu.nextZ}return!0}function cureLocalIntersections(_u,$u,Tu){var Cu=_u;do{var Pu=Cu.prev,Bu=Cu.next.next;!equals(Pu,Bu)&&intersects(Pu,Cu,Cu.next,Bu)&&locallyInside(Pu,Bu)&&locallyInside(Bu,Pu)&&($u.push(Pu.i/Tu),$u.push(Cu.i/Tu),$u.push(Bu.i/Tu),removeNode(Cu),removeNode(Cu.next),Cu=_u=Bu),Cu=Cu.next}while(Cu!==_u);return filterPoints(Cu)}function splitEarcut(_u,$u,Tu,Cu,Pu,Bu){var Lu=_u;do{for(var Ru=Lu.next.next;Ru!==Lu.prev;){if(Lu.i!==Ru.i&&isValidDiagonal(Lu,Ru)){var Ou=splitPolygon(Lu,Ru);Lu=filterPoints(Lu,Lu.next),Ou=filterPoints(Ou,Ou.next),earcutLinked(Lu,$u,Tu,Cu,Pu,Bu),earcutLinked(Ou,$u,Tu,Cu,Pu,Bu);return}Ru=Ru.next}Lu=Lu.next}while(Lu!==_u)}function eliminateHoles(_u,$u,Tu,Cu){var Pu=[],Bu,Lu,Ru,Ou,Du;for(Bu=0,Lu=$u.length;Bu<Lu;Bu++)Ru=$u[Bu]*Cu,Ou=Bu<Lu-1?$u[Bu+1]*Cu:_u.length,Du=linkedList(_u,Ru,Ou,Cu,!1),Du===Du.next&&(Du.steiner=!0),Pu.push(getLeftmost(Du));for(Pu.sort(compareX),Bu=0;Bu<Pu.length;Bu++)eliminateHole(Pu[Bu],Tu),Tu=filterPoints(Tu,Tu.next);return Tu}function compareX(_u,$u){return _u.x-$u.x}function eliminateHole(_u,$u){if($u=findHoleBridge(_u,$u),$u){var Tu=splitPolygon($u,_u);filterPoints($u,$u.next),filterPoints(Tu,Tu.next)}}function findHoleBridge(_u,$u){var Tu=$u,Cu=_u.x,Pu=_u.y,Bu=-1/0,Lu;do{if(Pu<=Tu.y&&Pu>=Tu.next.y&&Tu.next.y!==Tu.y){var Ru=Tu.x+(Pu-Tu.y)*(Tu.next.x-Tu.x)/(Tu.next.y-Tu.y);if(Ru<=Cu&&Ru>Bu){if(Bu=Ru,Ru===Cu){if(Pu===Tu.y)return Tu;if(Pu===Tu.next.y)return Tu.next}Lu=Tu.x<Tu.next.x?Tu:Tu.next}}Tu=Tu.next}while(Tu!==$u);if(!Lu)return null;if(Cu===Bu)return Lu;var Ou=Lu,Du=Lu.x,Fu=Lu.y,Vu=1/0,ku;Tu=Lu;do Cu>=Tu.x&&Tu.x>=Du&&Cu!==Tu.x&&pointInTriangle(Pu<Fu?Cu:Bu,Pu,Du,Fu,Pu<Fu?Bu:Cu,Pu,Tu.x,Tu.y)&&(ku=Math.abs(Pu-Tu.y)/(Cu-Tu.x),locallyInside(Tu,_u)&&(ku<Vu||ku===Vu&&(Tu.x>Lu.x||Tu.x===Lu.x&&sectorContainsSector(Lu,Tu)))&&(Lu=Tu,Vu=ku)),Tu=Tu.next;while(Tu!==Ou);return Lu}function sectorContainsSector(_u,$u){return area(_u.prev,_u,$u.prev)<0&&area($u.next,_u,_u.next)<0}function indexCurve(_u,$u,Tu,Cu){var Pu=_u;do Pu.z===null&&(Pu.z=zOrder(Pu.x,Pu.y,$u,Tu,Cu)),Pu.prevZ=Pu.prev,Pu.nextZ=Pu.next,Pu=Pu.next;while(Pu!==_u);Pu.prevZ.nextZ=null,Pu.prevZ=null,sortLinked(Pu)}function sortLinked(_u){var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du=1;do{for(Tu=_u,_u=null,Bu=null,Lu=0;Tu;){for(Lu++,Cu=Tu,Ru=0,$u=0;$u<Du&&(Ru++,Cu=Cu.nextZ,!!Cu);$u++);for(Ou=Du;Ru>0||Ou>0&&Cu;)Ru!==0&&(Ou===0||!Cu||Tu.z<=Cu.z)?(Pu=Tu,Tu=Tu.nextZ,Ru--):(Pu=Cu,Cu=Cu.nextZ,Ou--),Bu?Bu.nextZ=Pu:_u=Pu,Pu.prevZ=Bu,Bu=Pu;Tu=Cu}Bu.nextZ=null,Du*=2}while(Lu>1);return _u}function zOrder(_u,$u,Tu,Cu,Pu){return _u=32767*(_u-Tu)*Pu,$u=32767*($u-Cu)*Pu,_u=(_u|_u<<8)&16711935,_u=(_u|_u<<4)&252645135,_u=(_u|_u<<2)&858993459,_u=(_u|_u<<1)&1431655765,$u=($u|$u<<8)&16711935,$u=($u|$u<<4)&252645135,$u=($u|$u<<2)&858993459,$u=($u|$u<<1)&1431655765,_u|$u<<1}function getLeftmost(_u){var $u=_u,Tu=_u;do($u.x<Tu.x||$u.x===Tu.x&&$u.y<Tu.y)&&(Tu=$u),$u=$u.next;while($u!==_u);return Tu}function pointInTriangle(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){return(Pu-Lu)*($u-Ru)-(_u-Lu)*(Bu-Ru)>=0&&(_u-Lu)*(Cu-Ru)-(Tu-Lu)*($u-Ru)>=0&&(Tu-Lu)*(Bu-Ru)-(Pu-Lu)*(Cu-Ru)>=0}function isValidDiagonal(_u,$u){return _u.next.i!==$u.i&&_u.prev.i!==$u.i&&!intersectsPolygon(_u,$u)&&(locallyInside(_u,$u)&&locallyInside($u,_u)&&middleInside(_u,$u)&&(area(_u.prev,_u,$u.prev)||area(_u,$u.prev,$u))||equals(_u,$u)&&area(_u.prev,_u,_u.next)>0&&area($u.prev,$u,$u.next)>0)}function area(_u,$u,Tu){return($u.y-_u.y)*(Tu.x-$u.x)-($u.x-_u.x)*(Tu.y-$u.y)}function equals(_u,$u){return _u.x===$u.x&&_u.y===$u.y}function intersects(_u,$u,Tu,Cu){var Pu=sign(area(_u,$u,Tu)),Bu=sign(area(_u,$u,Cu)),Lu=sign(area(Tu,Cu,_u)),Ru=sign(area(Tu,Cu,$u));return!!(Pu!==Bu&&Lu!==Ru||Pu===0&&onSegment(_u,Tu,$u)||Bu===0&&onSegment(_u,Cu,$u)||Lu===0&&onSegment(Tu,_u,Cu)||Ru===0&&onSegment(Tu,$u,Cu))}function onSegment(_u,$u,Tu){return $u.x<=Math.max(_u.x,Tu.x)&&$u.x>=Math.min(_u.x,Tu.x)&&$u.y<=Math.max(_u.y,Tu.y)&&$u.y>=Math.min(_u.y,Tu.y)}function sign(_u){return _u>0?1:_u<0?-1:0}function intersectsPolygon(_u,$u){var Tu=_u;do{if(Tu.i!==_u.i&&Tu.next.i!==_u.i&&Tu.i!==$u.i&&Tu.next.i!==$u.i&&intersects(Tu,Tu.next,_u,$u))return!0;Tu=Tu.next}while(Tu!==_u);return!1}function locallyInside(_u,$u){return area(_u.prev,_u,_u.next)<0?area(_u,$u,_u.next)>=0&&area(_u,_u.prev,$u)>=0:area(_u,$u,_u.prev)<0||area(_u,_u.next,$u)<0}function middleInside(_u,$u){var Tu=_u,Cu=!1,Pu=(_u.x+$u.x)/2,Bu=(_u.y+$u.y)/2;do Tu.y>Bu!=Tu.next.y>Bu&&Tu.next.y!==Tu.y&&Pu<(Tu.next.x-Tu.x)*(Bu-Tu.y)/(Tu.next.y-Tu.y)+Tu.x&&(Cu=!Cu),Tu=Tu.next;while(Tu!==_u);return Cu}function splitPolygon(_u,$u){var Tu=new Node(_u.i,_u.x,_u.y),Cu=new Node($u.i,$u.x,$u.y),Pu=_u.next,Bu=$u.prev;return _u.next=$u,$u.prev=_u,Tu.next=Pu,Pu.prev=Tu,Cu.next=Tu,Tu.prev=Cu,Bu.next=Cu,Cu.prev=Bu,Cu}function insertNode(_u,$u,Tu,Cu){var Pu=new Node(_u,$u,Tu);return Cu?(Pu.next=Cu.next,Pu.prev=Cu,Cu.next.prev=Pu,Cu.next=Pu):(Pu.prev=Pu,Pu.next=Pu),Pu}function removeNode(_u){_u.next.prev=_u.prev,_u.prev.next=_u.next,_u.prevZ&&(_u.prevZ.nextZ=_u.nextZ),_u.nextZ&&(_u.nextZ.prevZ=_u.prevZ)}function Node(_u,$u,Tu){this.i=_u,this.x=$u,this.y=Tu,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_u,$u,Tu,Cu){for(var Pu=0,Bu=$u,Lu=Tu-Cu;Bu<Tu;Bu+=Cu)Pu+=(_u[Lu]-_u[Bu])*(_u[Bu+1]+_u[Lu+1]),Lu=Bu;return Pu}var ShapeUtils={area:function(_u){for(var $u=_u.length,Tu=0,Cu=$u-1,Pu=0;Pu<$u;Cu=Pu++)Tu+=_u[Cu].x*_u[Pu].y-_u[Pu].x*_u[Cu].y;return Tu*.5},isClockWise:function(_u){return ShapeUtils.area(_u)<0},triangulateShape:function(_u,$u){var Tu=[],Cu=[],Pu=[];removeDupEndPts(_u),addContour(Tu,_u);var Bu=_u.length;$u.forEach(removeDupEndPts);for(var Lu=0;Lu<$u.length;Lu++)Cu.push(Bu),Bu+=$u[Lu].length,addContour(Tu,$u[Lu]);for(var Ru=Earcut.triangulate(Tu,Cu),Lu=0;Lu<Ru.length;Lu+=3)Pu.push(Ru.slice(Lu,Lu+3));return Pu}};function removeDupEndPts(_u){var $u=_u.length;$u>2&&_u[$u-1].equals(_u[0])&&_u.pop()}function addContour(_u,$u){for(var Tu=0;Tu<$u.length;Tu++)_u.push($u[Tu].x),_u.push($u[Tu].y)}function ExtrudeGeometry(_u,$u){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:_u,options:$u},this.fromBufferGeometry(new ExtrudeBufferGeometry(_u,$u)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Tu=this.parameters.options;return toJSON($u,Tu,_u)};function ExtrudeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:_u,options:$u},_u=Array.isArray(_u)?_u:[_u];for(var Tu=this,Cu=[],Pu=[],Bu=0,Lu=_u.length;Bu<Lu;Bu++){var Ru=_u[Bu];Ou(Ru)}this.setAttribute("position",new Float32BufferAttribute(Cu,3)),this.setAttribute("uv",new Float32BufferAttribute(Pu,2)),this.computeVertexNormals();function Ou(Du){var Fu=[],Vu=$u.curveSegments!==void 0?$u.curveSegments:12,ku=$u.steps!==void 0?$u.steps:1,Nu=$u.depth!==void 0?$u.depth:100,Gu=$u.bevelEnabled!==void 0?$u.bevelEnabled:!0,ju=$u.bevelThickness!==void 0?$u.bevelThickness:6,Hu=$u.bevelSize!==void 0?$u.bevelSize:ju-2,Uu=$u.bevelOffset!==void 0?$u.bevelOffset:0,zu=$u.bevelSegments!==void 0?$u.bevelSegments:3,Wu=$u.extrudePath,Qu=$u.UVGenerator!==void 0?$u.UVGenerator:WorldUVGenerator;$u.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Nu=$u.amount);var Ku,Yu=!1,Xc,_d,_f,qu;Wu&&(Ku=Wu.getSpacedPoints(ku),Yu=!0,Gu=!1,Xc=Wu.computeFrenetFrames(ku,!1),_d=new Vector3,_f=new Vector3,qu=new Vector3),Gu||(zu=0,ju=0,Hu=0,Uu=0);var Xu,Zu,_c,Ju=Du.extractPoints(Vu),_h=Ju.shape,ep=Ju.holes,tp=!ShapeUtils.isClockWise(_h);if(tp)for(_h=_h.reverse(),Zu=0,_c=ep.length;Zu<_c;Zu++)Xu=ep[Zu],ShapeUtils.isClockWise(Xu)&&(ep[Zu]=Xu.reverse());var rp=ShapeUtils.triangulateShape(_h,ep),dp=_h;for(Zu=0,_c=ep.length;Zu<_c;Zu++)Xu=ep[Zu],_h=_h.concat(Xu);function cp(Hp,Kp,jp){return Kp||console.error("THREE.ExtrudeGeometry: vec does not exist"),Kp.clone().multiplyScalar(jp).add(Hp)}var Sp,yp,Bp,_p,Cp,Ep=_h.length,ap,ip=rp.length;function hp(Hp,Kp,jp){var Yp,xp,Qp,Zp=Hp.x-Kp.x,tm=Hp.y-Kp.y,em=jp.x-Hp.x,lm=jp.y-Hp.y,pm=Zp*Zp+tm*tm,mm=Zp*lm-tm*em;if(Math.abs(mm)>Number.EPSILON){var Sm=Math.sqrt(pm),fm=Math.sqrt(em*em+lm*lm),xm=Kp.x-tm/Sm,wm=Kp.y+Zp/Sm,gm=jp.x-lm/fm,Mm=jp.y+em/fm,Im=((gm-xm)*lm-(Mm-wm)*em)/(Zp*lm-tm*em);Yp=xm+Zp*Im-Hp.x,xp=wm+tm*Im-Hp.y;var ym=Yp*Yp+xp*xp;if(ym<=2)return new Vector2(Yp,xp);Qp=Math.sqrt(ym/2)}else{var mp=!1;Zp>Number.EPSILON?em>Number.EPSILON&&(mp=!0):Zp<-Number.EPSILON?em<-Number.EPSILON&&(mp=!0):Math.sign(tm)===Math.sign(lm)&&(mp=!0),mp?(Yp=-tm,xp=Zp,Qp=Math.sqrt(pm)):(Yp=Zp,xp=tm,Qp=Math.sqrt(pm/2))}return new Vector2(Yp/Qp,xp/Qp)}for(var up=[],pp=0,gp=dp.length,Ap=gp-1,Mp=pp+1;pp<gp;pp++,Ap++,Mp++)Ap===gp&&(Ap=0),Mp===gp&&(Mp=0),up[pp]=hp(dp[pp],dp[Ap],dp[Mp]);var Dp=[],$p,np=up.concat();for(Zu=0,_c=ep.length;Zu<_c;Zu++){for(Xu=ep[Zu],$p=[],pp=0,gp=Xu.length,Ap=gp-1,Mp=pp+1;pp<gp;pp++,Ap++,Mp++)Ap===gp&&(Ap=0),Mp===gp&&(Mp=0),$p[pp]=hp(Xu[pp],Xu[Ap],Xu[Mp]);Dp.push($p),np=np.concat($p)}for(Sp=0;Sp<zu;Sp++){for(Bp=Sp/zu,_p=ju*Math.cos(Bp*Math.PI/2),yp=Hu*Math.sin(Bp*Math.PI/2)+Uu,pp=0,gp=dp.length;pp<gp;pp++)Cp=cp(dp[pp],up[pp],yp),Vp(Cp.x,Cp.y,-_p);for(Zu=0,_c=ep.length;Zu<_c;Zu++)for(Xu=ep[Zu],$p=Dp[Zu],pp=0,gp=Xu.length;pp<gp;pp++)Cp=cp(Xu[pp],$p[pp],yp),Vp(Cp.x,Cp.y,-_p)}for(yp=Hu+Uu,pp=0;pp<Ep;pp++)Cp=Gu?cp(_h[pp],np[pp],yp):_h[pp],Yu?(_f.copy(Xc.normals[0]).multiplyScalar(Cp.x),_d.copy(Xc.binormals[0]).multiplyScalar(Cp.y),qu.copy(Ku[0]).add(_f).add(_d),Vp(qu.x,qu.y,qu.z)):Vp(Cp.x,Cp.y,0);var sp;for(sp=1;sp<=ku;sp++)for(pp=0;pp<Ep;pp++)Cp=Gu?cp(_h[pp],np[pp],yp):_h[pp],Yu?(_f.copy(Xc.normals[sp]).multiplyScalar(Cp.x),_d.copy(Xc.binormals[sp]).multiplyScalar(Cp.y),qu.copy(Ku[sp]).add(_f).add(_d),Vp(qu.x,qu.y,qu.z)):Vp(Cp.x,Cp.y,Nu/ku*sp);for(Sp=zu-1;Sp>=0;Sp--){for(Bp=Sp/zu,_p=ju*Math.cos(Bp*Math.PI/2),yp=Hu*Math.sin(Bp*Math.PI/2)+Uu,pp=0,gp=dp.length;pp<gp;pp++)Cp=cp(dp[pp],up[pp],yp),Vp(Cp.x,Cp.y,Nu+_p);for(Zu=0,_c=ep.length;Zu<_c;Zu++)for(Xu=ep[Zu],$p=Dp[Zu],pp=0,gp=Xu.length;pp<gp;pp++)Cp=cp(Xu[pp],$p[pp],yp),Yu?Vp(Cp.x,Cp.y+Ku[ku-1].y,Ku[ku-1].x+_p):Vp(Cp.x,Cp.y,Nu+_p)}Pp(),Tp();function Pp(){var Hp=Cu.length/3;if(Gu){var Kp=0,jp=Ep*Kp;for(pp=0;pp<ip;pp++)ap=rp[pp],Gp(ap[2]+jp,ap[1]+jp,ap[0]+jp);for(Kp=ku+zu*2,jp=Ep*Kp,pp=0;pp<ip;pp++)ap=rp[pp],Gp(ap[0]+jp,ap[1]+jp,ap[2]+jp)}else{for(pp=0;pp<ip;pp++)ap=rp[pp],Gp(ap[2],ap[1],ap[0]);for(pp=0;pp<ip;pp++)ap=rp[pp],Gp(ap[0]+Ep*ku,ap[1]+Ep*ku,ap[2]+Ep*ku)}Tu.addGroup(Hp,Cu.length/3-Hp,0)}function Tp(){var Hp=Cu.length/3,Kp=0;for(Np(dp,Kp),Kp+=dp.length,Zu=0,_c=ep.length;Zu<_c;Zu++)Xu=ep[Zu],Np(Xu,Kp),Kp+=Xu.length;Tu.addGroup(Hp,Cu.length/3-Hp,1)}function Np(Hp,Kp){var jp,Yp;for(pp=Hp.length;--pp>=0;){jp=pp,Yp=pp-1,Yp<0&&(Yp=Hp.length-1);var xp=0,Qp=ku+zu*2;for(xp=0;xp<Qp;xp++){var Zp=Ep*xp,tm=Ep*(xp+1),em=Kp+jp+Zp,lm=Kp+Yp+Zp,pm=Kp+Yp+tm,mm=Kp+jp+tm;qp(em,lm,pm,mm)}}}function Vp(Hp,Kp,jp){Fu.push(Hp),Fu.push(Kp),Fu.push(jp)}function Gp(Hp,Kp,jp){Wp(Hp),Wp(Kp),Wp(jp);var Yp=Cu.length/3,xp=Qu.generateTopUV(Tu,Cu,Yp-3,Yp-2,Yp-1);Jp(xp[0]),Jp(xp[1]),Jp(xp[2])}function qp(Hp,Kp,jp,Yp){Wp(Hp),Wp(Kp),Wp(Yp),Wp(Kp),Wp(jp),Wp(Yp);var xp=Cu.length/3,Qp=Qu.generateSideWallUV(Tu,Cu,xp-6,xp-3,xp-2,xp-1);Jp(Qp[0]),Jp(Qp[1]),Jp(Qp[3]),Jp(Qp[1]),Jp(Qp[2]),Jp(Qp[3])}function Wp(Hp){Cu.push(Fu[Hp*3+0]),Cu.push(Fu[Hp*3+1]),Cu.push(Fu[Hp*3+2])}function Jp(Hp){Pu.push(Hp.x),Pu.push(Hp.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes,Tu=this.parameters.options;return toJSON($u,Tu,_u)};var WorldUVGenerator={generateTopUV:function(_u,$u,Tu,Cu,Pu){var Bu=$u[Tu*3],Lu=$u[Tu*3+1],Ru=$u[Cu*3],Ou=$u[Cu*3+1],Du=$u[Pu*3],Fu=$u[Pu*3+1];return[new Vector2(Bu,Lu),new Vector2(Ru,Ou),new Vector2(Du,Fu)]},generateSideWallUV:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=$u[Tu*3],Ru=$u[Tu*3+1],Ou=$u[Tu*3+2],Du=$u[Cu*3],Fu=$u[Cu*3+1],Vu=$u[Cu*3+2],ku=$u[Pu*3],Nu=$u[Pu*3+1],Gu=$u[Pu*3+2],ju=$u[Bu*3],Hu=$u[Bu*3+1],Uu=$u[Bu*3+2];return Math.abs(Ru-Fu)<.01?[new Vector2(Lu,1-Ou),new Vector2(Du,1-Vu),new Vector2(ku,1-Gu),new Vector2(ju,1-Uu)]:[new Vector2(Ru,1-Ou),new Vector2(Fu,1-Vu),new Vector2(Nu,1-Gu),new Vector2(Hu,1-Uu)]}};function toJSON(_u,$u,Tu){if(Tu.shapes=[],Array.isArray(_u))for(var Cu=0,Pu=_u.length;Cu<Pu;Cu++){var Bu=_u[Cu];Tu.shapes.push(Bu.uuid)}else Tu.shapes.push(_u.uuid);return $u.extrudePath!==void 0&&(Tu.options.extrudePath=$u.extrudePath.toJSON()),Tu}function TextGeometry(_u,$u){Geometry.call(this),this.type="TextGeometry",this.parameters={text:_u,parameters:$u},this.fromBufferGeometry(new TextBufferGeometry(_u,$u)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(_u,$u){$u=$u||{};var Tu=$u.font;if(!(Tu&&Tu.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Cu=Tu.generateShapes(_u,$u.size);$u.depth=$u.height!==void 0?$u.height:50,$u.bevelThickness===void 0&&($u.bevelThickness=10),$u.bevelSize===void 0&&($u.bevelSize=8),$u.bevelEnabled===void 0&&($u.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Cu,$u),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Tu,phiStart:Cu,phiLength:Pu,thetaStart:Bu,thetaLength:Lu},this.fromBufferGeometry(new SphereBufferGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:_u,widthSegments:$u,heightSegments:Tu,phiStart:Cu,phiLength:Pu,thetaStart:Bu,thetaLength:Lu},_u=_u||1,$u=Math.max(3,Math.floor($u)||8),Tu=Math.max(2,Math.floor(Tu)||6),Cu=Cu!==void 0?Cu:0,Pu=Pu!==void 0?Pu:Math.PI*2,Bu=Bu!==void 0?Bu:0,Lu=Lu!==void 0?Lu:Math.PI;var Ru=Math.min(Bu+Lu,Math.PI),Ou,Du,Fu=0,Vu=[],ku=new Vector3,Nu=new Vector3,Gu=[],ju=[],Hu=[],Uu=[];for(Du=0;Du<=Tu;Du++){var zu=[],Wu=Du/Tu,Qu=0;for(Du==0&&Bu==0?Qu=.5/$u:Du==Tu&&Ru==Math.PI&&(Qu=-.5/$u),Ou=0;Ou<=$u;Ou++){var Ku=Ou/$u;ku.x=-_u*Math.cos(Cu+Ku*Pu)*Math.sin(Bu+Wu*Lu),ku.y=_u*Math.cos(Bu+Wu*Lu),ku.z=_u*Math.sin(Cu+Ku*Pu)*Math.sin(Bu+Wu*Lu),ju.push(ku.x,ku.y,ku.z),Nu.copy(ku).normalize(),Hu.push(Nu.x,Nu.y,Nu.z),Uu.push(Ku+Qu,1-Wu),zu.push(Fu++)}Vu.push(zu)}for(Du=0;Du<Tu;Du++)for(Ou=0;Ou<$u;Ou++){var Yu=Vu[Du][Ou+1],Xc=Vu[Du][Ou],_d=Vu[Du+1][Ou],_f=Vu[Du+1][Ou+1];(Du!==0||Bu>0)&&Gu.push(Yu,Xc,_f),(Du!==Tu-1||Ru<Math.PI)&&Gu.push(Xc,_d,_f)}this.setIndex(Gu),this.setAttribute("position",new Float32BufferAttribute(ju,3)),this.setAttribute("normal",new Float32BufferAttribute(Hu,3)),this.setAttribute("uv",new Float32BufferAttribute(Uu,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(_u,$u,Tu,Cu,Pu,Bu){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Tu,phiSegments:Cu,thetaStart:Pu,thetaLength:Bu},this.fromBufferGeometry(new RingBufferGeometry(_u,$u,Tu,Cu,Pu,Bu)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(_u,$u,Tu,Cu,Pu,Bu){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:_u,outerRadius:$u,thetaSegments:Tu,phiSegments:Cu,thetaStart:Pu,thetaLength:Bu},_u=_u||.5,$u=$u||1,Pu=Pu!==void 0?Pu:0,Bu=Bu!==void 0?Bu:Math.PI*2,Tu=Tu!==void 0?Math.max(3,Tu):8,Cu=Cu!==void 0?Math.max(1,Cu):1;var Lu=[],Ru=[],Ou=[],Du=[],Fu,Vu=_u,ku=($u-_u)/Cu,Nu=new Vector3,Gu=new Vector2,ju,Hu;for(ju=0;ju<=Cu;ju++){for(Hu=0;Hu<=Tu;Hu++)Fu=Pu+Hu/Tu*Bu,Nu.x=Vu*Math.cos(Fu),Nu.y=Vu*Math.sin(Fu),Ru.push(Nu.x,Nu.y,Nu.z),Ou.push(0,0,1),Gu.x=(Nu.x/$u+1)/2,Gu.y=(Nu.y/$u+1)/2,Du.push(Gu.x,Gu.y);Vu+=ku}for(ju=0;ju<Cu;ju++){var Uu=ju*(Tu+1);for(Hu=0;Hu<Tu;Hu++){Fu=Hu+Uu;var zu=Fu,Wu=Fu+Tu+1,Qu=Fu+Tu+2,Ku=Fu+1;Lu.push(zu,Wu,Ku),Lu.push(Wu,Qu,Ku)}}this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Du,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:_u,segments:$u,phiStart:Tu,phiLength:Cu},this.fromBufferGeometry(new LatheBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:_u,segments:$u,phiStart:Tu,phiLength:Cu},$u=Math.floor($u)||12,Tu=Tu||0,Cu=Cu||Math.PI*2,Cu=MathUtils.clamp(Cu,0,Math.PI*2);var Pu=[],Bu=[],Lu=[],Ru,Ou=1/$u,Du=new Vector3,Fu=new Vector2,Vu,ku;for(Vu=0;Vu<=$u;Vu++){var Nu=Tu+Vu*Ou*Cu,Gu=Math.sin(Nu),ju=Math.cos(Nu);for(ku=0;ku<=_u.length-1;ku++)Du.x=_u[ku].x*Gu,Du.y=_u[ku].y,Du.z=_u[ku].x*ju,Bu.push(Du.x,Du.y,Du.z),Fu.x=Vu/$u,Fu.y=ku/(_u.length-1),Lu.push(Fu.x,Fu.y)}for(Vu=0;Vu<$u;Vu++)for(ku=0;ku<_u.length-1;ku++){Ru=ku+Vu*_u.length;var Hu=Ru,Uu=Ru+_u.length,zu=Ru+_u.length+1,Wu=Ru+1;Pu.push(Hu,Uu,Wu),Pu.push(Uu,zu,Wu)}if(this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2)),this.computeVertexNormals(),Cu===Math.PI*2){var Qu=this.attributes.normal.array,Ku=new Vector3,Yu=new Vector3,Xc=new Vector3;for(Ru=$u*_u.length*3,Vu=0,ku=0;Vu<_u.length;Vu++,ku+=3)Ku.x=Qu[ku+0],Ku.y=Qu[ku+1],Ku.z=Qu[ku+2],Yu.x=Qu[Ru+ku+0],Yu.y=Qu[Ru+ku+1],Yu.z=Qu[Ru+ku+2],Xc.addVectors(Ku,Yu).normalize(),Qu[ku+0]=Qu[Ru+ku+0]=Xc.x,Qu[ku+1]=Qu[Ru+ku+1]=Xc.y,Qu[ku+2]=Qu[Ru+ku+2]=Xc.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(_u,$u){Geometry.call(this),this.type="ShapeGeometry",typeof $u=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),$u=$u.curveSegments),this.parameters={shapes:_u,curveSegments:$u},this.fromBufferGeometry(new ShapeBufferGeometry(_u,$u)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var _u=Geometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function ShapeBufferGeometry(_u,$u){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:_u,curveSegments:$u},$u=$u||12;var Tu=[],Cu=[],Pu=[],Bu=[],Lu=0,Ru=0;if(Array.isArray(_u)===!1)Du(_u);else for(var Ou=0;Ou<_u.length;Ou++)Du(_u[Ou]),this.addGroup(Lu,Ru,Ou),Lu+=Ru,Ru=0;this.setIndex(Tu),this.setAttribute("position",new Float32BufferAttribute(Cu,3)),this.setAttribute("normal",new Float32BufferAttribute(Pu,3)),this.setAttribute("uv",new Float32BufferAttribute(Bu,2));function Du(Fu){var Vu,ku,Nu,Gu=Cu.length/3,ju=Fu.extractPoints($u),Hu=ju.shape,Uu=ju.holes;for(ShapeUtils.isClockWise(Hu)===!1&&(Hu=Hu.reverse()),Vu=0,ku=Uu.length;Vu<ku;Vu++)Nu=Uu[Vu],ShapeUtils.isClockWise(Nu)===!0&&(Uu[Vu]=Nu.reverse());var zu=ShapeUtils.triangulateShape(Hu,Uu);for(Vu=0,ku=Uu.length;Vu<ku;Vu++)Nu=Uu[Vu],Hu=Hu.concat(Nu);for(Vu=0,ku=Hu.length;Vu<ku;Vu++){var Wu=Hu[Vu];Cu.push(Wu.x,Wu.y,0),Pu.push(0,0,1),Bu.push(Wu.x,Wu.y)}for(Vu=0,ku=zu.length;Vu<ku;Vu++){var Qu=zu[Vu],Ku=Qu[0]+Gu,Yu=Qu[1]+Gu,Xc=Qu[2]+Gu;Tu.push(Ku,Yu,Xc),Ru+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var _u=BufferGeometry.prototype.toJSON.call(this),$u=this.parameters.shapes;return toJSON$1($u,_u)};function toJSON$1(_u,$u){if($u.shapes=[],Array.isArray(_u))for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.shapes.push(Pu.uuid)}else $u.shapes.push(_u.uuid);return $u}function EdgesGeometry(_u,$u){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:$u},$u=$u!==void 0?$u:1;var Tu=[],Cu=Math.cos(MathUtils.DEG2RAD*$u),Pu=[0,0],Bu={},Lu,Ru,Ou,Du=["a","b","c"],Fu;_u.isBufferGeometry?(Fu=new Geometry,Fu.fromBufferGeometry(_u)):Fu=_u.clone(),Fu.mergeVertices(),Fu.computeFaceNormals();for(var Vu=Fu.vertices,ku=Fu.faces,Nu=0,Gu=ku.length;Nu<Gu;Nu++)for(var ju=ku[Nu],Hu=0;Hu<3;Hu++)Lu=ju[Du[Hu]],Ru=ju[Du[(Hu+1)%3]],Pu[0]=Math.min(Lu,Ru),Pu[1]=Math.max(Lu,Ru),Ou=Pu[0]+","+Pu[1],Bu[Ou]===void 0?Bu[Ou]={index1:Pu[0],index2:Pu[1],face1:Nu,face2:void 0}:Bu[Ou].face2=Nu;for(Ou in Bu){var Uu=Bu[Ou];if(Uu.face2===void 0||ku[Uu.face1].normal.dot(ku[Uu.face2].normal)<=Cu){var zu=Vu[Uu.index1];Tu.push(zu.x,zu.y,zu.z),zu=Vu[Uu.index2],Tu.push(zu.x,zu.y,zu.z)}}this.setAttribute("position",new Float32BufferAttribute(Tu,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Bu,thetaStart:Lu,thetaLength:Ru},this.fromBufferGeometry(new CylinderBufferGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:_u,radiusBottom:$u,height:Tu,radialSegments:Cu,heightSegments:Pu,openEnded:Bu,thetaStart:Lu,thetaLength:Ru};var Ou=this;_u=_u!==void 0?_u:1,$u=$u!==void 0?$u:1,Tu=Tu||1,Cu=Math.floor(Cu)||8,Pu=Math.floor(Pu)||1,Bu=Bu!==void 0?Bu:!1,Lu=Lu!==void 0?Lu:0,Ru=Ru!==void 0?Ru:Math.PI*2;var Du=[],Fu=[],Vu=[],ku=[],Nu=0,Gu=[],ju=Tu/2,Hu=0;Uu(),Bu===!1&&(_u>0&&zu(!0),$u>0&&zu(!1)),this.setIndex(Du),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Vu,3)),this.setAttribute("uv",new Float32BufferAttribute(ku,2));function Uu(){var Wu,Qu,Ku=new Vector3,Yu=new Vector3,Xc=0,_d=($u-_u)/Tu;for(Qu=0;Qu<=Pu;Qu++){var _f=[],qu=Qu/Pu,Xu=qu*($u-_u)+_u;for(Wu=0;Wu<=Cu;Wu++){var Zu=Wu/Cu,_c=Zu*Ru+Lu,Ju=Math.sin(_c),_h=Math.cos(_c);Yu.x=Xu*Ju,Yu.y=-qu*Tu+ju,Yu.z=Xu*_h,Fu.push(Yu.x,Yu.y,Yu.z),Ku.set(Ju,_d,_h).normalize(),Vu.push(Ku.x,Ku.y,Ku.z),ku.push(Zu,1-qu),_f.push(Nu++)}Gu.push(_f)}for(Wu=0;Wu<Cu;Wu++)for(Qu=0;Qu<Pu;Qu++){var ep=Gu[Qu][Wu],tp=Gu[Qu+1][Wu],rp=Gu[Qu+1][Wu+1],dp=Gu[Qu][Wu+1];Du.push(ep,tp,dp),Du.push(tp,rp,dp),Xc+=6}Ou.addGroup(Hu,Xc,0),Hu+=Xc}function zu(Wu){var Qu,Ku,Yu,Xc=new Vector2,_d=new Vector3,_f=0,qu=Wu===!0?_u:$u,Xu=Wu===!0?1:-1;for(Ku=Nu,Qu=1;Qu<=Cu;Qu++)Fu.push(0,ju*Xu,0),Vu.push(0,Xu,0),ku.push(.5,.5),Nu++;for(Yu=Nu,Qu=0;Qu<=Cu;Qu++){var Zu=Qu/Cu,_c=Zu*Ru+Lu,Ju=Math.cos(_c),_h=Math.sin(_c);_d.x=qu*_h,_d.y=ju*Xu,_d.z=qu*Ju,Fu.push(_d.x,_d.y,_d.z),Vu.push(0,Xu,0),Xc.x=Ju*.5+.5,Xc.y=_h*.5*Xu+.5,ku.push(Xc.x,Xc.y),Nu++}for(Qu=0;Qu<Cu;Qu++){var ep=Ku+Qu,tp=Yu+Qu;Wu===!0?Du.push(tp,tp+1,ep):Du.push(tp+1,tp,ep),_f+=3}Ou.addGroup(Hu,_f,Wu===!0?1:2),Hu+=_f}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu){CylinderGeometry.call(this,0,_u,$u,Tu,Cu,Pu,Bu,Lu),this.type="ConeGeometry",this.parameters={radius:_u,height:$u,radialSegments:Tu,heightSegments:Cu,openEnded:Pu,thetaStart:Bu,thetaLength:Lu}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(_u,$u,Tu,Cu,Pu,Bu,Lu){CylinderBufferGeometry.call(this,0,_u,$u,Tu,Cu,Pu,Bu,Lu),this.type="ConeBufferGeometry",this.parameters={radius:_u,height:$u,radialSegments:Tu,heightSegments:Cu,openEnded:Pu,thetaStart:Bu,thetaLength:Lu}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(_u,$u,Tu,Cu){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Tu,thetaLength:Cu},this.fromBufferGeometry(new CircleBufferGeometry(_u,$u,Tu,Cu)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(_u,$u,Tu,Cu){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:_u,segments:$u,thetaStart:Tu,thetaLength:Cu},_u=_u||1,$u=$u!==void 0?Math.max(3,$u):8,Tu=Tu!==void 0?Tu:0,Cu=Cu!==void 0?Cu:Math.PI*2;var Pu=[],Bu=[],Lu=[],Ru=[],Ou,Du,Fu=new Vector3,Vu=new Vector2;for(Bu.push(0,0,0),Lu.push(0,0,1),Ru.push(.5,.5),Du=0,Ou=3;Du<=$u;Du++,Ou+=3){var ku=Tu+Du/$u*Cu;Fu.x=_u*Math.cos(ku),Fu.y=_u*Math.sin(ku),Bu.push(Fu.x,Fu.y,Fu.z),Lu.push(0,0,1),Vu.x=(Bu[Ou]/_u+1)/2,Vu.y=(Bu[Ou+1]/_u+1)/2,Ru.push(Vu.x,Vu.y)}for(Ou=1;Ou<=$u;Ou++)Pu.push(Ou,Ou+1,0);this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(_u){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(_u)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this};function RawShaderMaterial(_u){ShaderMaterial.call(this,_u),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(_u){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(_u)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={STANDARD:""},this.color.copy(_u.color),this.roughness=_u.roughness,this.metalness=_u.metalness,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.roughnessMap=_u.roughnessMap,this.metalnessMap=_u.metalnessMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.envMapIntensity=_u.envMapIntensity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this.vertexTangents=_u.vertexTangents,this};function MeshPhysicalMaterial(_u){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(_u)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(_u){return MeshStandardMaterial.prototype.copy.call(this,_u),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_u.clearcoat,this.clearcoatMap=_u.clearcoatMap,this.clearcoatRoughness=_u.clearcoatRoughness,this.clearcoatRoughnessMap=_u.clearcoatRoughnessMap,this.clearcoatNormalMap=_u.clearcoatNormalMap,this.clearcoatNormalScale.copy(_u.clearcoatNormalScale),this.reflectivity=_u.reflectivity,_u.sheen?this.sheen=(this.sheen||new Color).copy(_u.sheen):this.sheen=null,this.transparency=_u.transparency,this};function MeshPhongMaterial(_u){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshToonMaterial(_u){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.specular.copy(_u.specular),this.shininess=_u.shininess,this.map=_u.map,this.gradientMap=_u.gradientMap,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshNormalMaterial(_u){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshLambertMaterial(_u){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.color.copy(_u.color),this.map=_u.map,this.lightMap=_u.lightMap,this.lightMapIntensity=_u.lightMapIntensity,this.aoMap=_u.aoMap,this.aoMapIntensity=_u.aoMapIntensity,this.emissive.copy(_u.emissive),this.emissiveMap=_u.emissiveMap,this.emissiveIntensity=_u.emissiveIntensity,this.specularMap=_u.specularMap,this.alphaMap=_u.alphaMap,this.envMap=_u.envMap,this.combine=_u.combine,this.reflectivity=_u.reflectivity,this.refractionRatio=_u.refractionRatio,this.wireframe=_u.wireframe,this.wireframeLinewidth=_u.wireframeLinewidth,this.wireframeLinecap=_u.wireframeLinecap,this.wireframeLinejoin=_u.wireframeLinejoin,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function MeshMatcapMaterial(_u){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(_u)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(_u){return Material.prototype.copy.call(this,_u),this.defines={MATCAP:""},this.color.copy(_u.color),this.matcap=_u.matcap,this.map=_u.map,this.bumpMap=_u.bumpMap,this.bumpScale=_u.bumpScale,this.normalMap=_u.normalMap,this.normalMapType=_u.normalMapType,this.normalScale.copy(_u.normalScale),this.displacementMap=_u.displacementMap,this.displacementScale=_u.displacementScale,this.displacementBias=_u.displacementBias,this.alphaMap=_u.alphaMap,this.skinning=_u.skinning,this.morphTargets=_u.morphTargets,this.morphNormals=_u.morphNormals,this};function LineDashedMaterial(_u){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_u)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(_u){return LineBasicMaterial.prototype.copy.call(this,_u),this.scale=_u.scale,this.dashSize=_u.dashSize,this.gapSize=_u.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(_u,$u,Tu){return AnimationUtils.isTypedArray(_u)?new _u.constructor(_u.subarray($u,Tu!==void 0?Tu:_u.length)):_u.slice($u,Tu)},convertArray:function(_u,$u,Tu){return!_u||!Tu&&_u.constructor===$u?_u:typeof $u.BYTES_PER_ELEMENT=="number"?new $u(_u):Array.prototype.slice.call(_u)},isTypedArray:function(_u){return ArrayBuffer.isView(_u)&&!(_u instanceof DataView)},getKeyframeOrder:function(_u){function $u(Bu,Lu){return _u[Bu]-_u[Lu]}for(var Tu=_u.length,Cu=new Array(Tu),Pu=0;Pu!==Tu;++Pu)Cu[Pu]=Pu;return Cu.sort($u),Cu},sortedArray:function(_u,$u,Tu){for(var Cu=_u.length,Pu=new _u.constructor(Cu),Bu=0,Lu=0;Lu!==Cu;++Bu)for(var Ru=Tu[Bu]*$u,Ou=0;Ou!==$u;++Ou)Pu[Lu++]=_u[Ru+Ou];return Pu},flattenJSON:function(_u,$u,Tu,Cu){for(var Pu=1,Bu=_u[0];Bu!==void 0&&Bu[Cu]===void 0;)Bu=_u[Pu++];if(Bu!==void 0){var Lu=Bu[Cu];if(Lu!==void 0)if(Array.isArray(Lu))do Lu=Bu[Cu],Lu!==void 0&&($u.push(Bu.time),Tu.push.apply(Tu,Lu)),Bu=_u[Pu++];while(Bu!==void 0);else if(Lu.toArray!==void 0)do Lu=Bu[Cu],Lu!==void 0&&($u.push(Bu.time),Lu.toArray(Tu,Tu.length)),Bu=_u[Pu++];while(Bu!==void 0);else do Lu=Bu[Cu],Lu!==void 0&&($u.push(Bu.time),Tu.push(Lu)),Bu=_u[Pu++];while(Bu!==void 0)}},subclip:function(_u,$u,Tu,Cu,Pu){Pu=Pu||30;var Bu=_u.clone();Bu.name=$u;for(var Lu=[],Ru=0;Ru<Bu.tracks.length;++Ru){for(var Ou=Bu.tracks[Ru],Du=Ou.getValueSize(),Fu=[],Vu=[],ku=0;ku<Ou.times.length;++ku){var Nu=Ou.times[ku]*Pu;if(!(Nu<Tu||Nu>=Cu)){Fu.push(Ou.times[ku]);for(var Gu=0;Gu<Du;++Gu)Vu.push(Ou.values[ku*Du+Gu])}}Fu.length!==0&&(Ou.times=AnimationUtils.convertArray(Fu,Ou.times.constructor),Ou.values=AnimationUtils.convertArray(Vu,Ou.values.constructor),Lu.push(Ou))}Bu.tracks=Lu;for(var ju=1/0,Ru=0;Ru<Bu.tracks.length;++Ru)ju>Bu.tracks[Ru].times[0]&&(ju=Bu.tracks[Ru].times[0]);for(var Ru=0;Ru<Bu.tracks.length;++Ru)Bu.tracks[Ru].shift(-1*ju);return Bu.resetDuration(),Bu},makeClipAdditive:function(_u,$u,Tu,Cu){$u===void 0&&($u=0),Tu===void 0&&(Tu=_u),(Cu===void 0||Cu<=0)&&(Cu=30);for(var Pu=_u.tracks.length,Bu=$u/Cu,Lu=0;Lu<Pu;++Lu){var Ru=Tu.tracks[Lu],Ou=Ru.ValueTypeName;if(!(Ou==="bool"||Ou==="string")){var Du=_u.tracks.find(function(Qu){return Qu.name===Ru.name&&Qu.ValueTypeName===Ou});if(Du!==void 0){var Fu=Ru.getValueSize(),Vu=Ru.times.length-1,ku;if(Bu<=Ru.times[0])ku=AnimationUtils.arraySlice(Ru.values,0,Ru.valueSize);else if(Bu>=Ru.times[Vu]){var Nu=Vu*Fu;ku=AnimationUtils.arraySlice(Ru.values,Nu)}else{var Gu=Ru.createInterpolant();Gu.evaluate(Bu),ku=Gu.resultBuffer}if(Ou==="quaternion"){var ju=new Quaternion(ku[0],ku[1],ku[2],ku[3]).normalize().conjugate();ju.toArray(ku)}for(var Hu=Du.times.length,Uu=0;Uu<Hu;++Uu){var zu=Uu*Fu;if(Ou==="quaternion")Quaternion.multiplyQuaternionsFlat(Du.values,zu,ku,0,Du.values,zu);else for(var Wu=0;Wu<Fu;++Wu)Du.values[zu+Wu]-=ku[Wu]}}}}return _u.blendMode=AdditiveAnimationBlendMode,_u}};function Interpolant(_u,$u,Tu,Cu){this.parameterPositions=_u,this._cachedIndex=0,this.resultBuffer=Cu!==void 0?Cu:new $u.constructor(Tu),this.sampleValues=$u,this.valueSize=Tu}Object.assign(Interpolant.prototype,{evaluate:function(_u){var $u=this.parameterPositions,Tu=this._cachedIndex,Cu=$u[Tu],Pu=$u[Tu-1];e:{t:{var Bu;n:{r:if(!(_u<Cu)){for(var Lu=Tu+2;;){if(Cu===void 0){if(_u<Pu)break r;return Tu=$u.length,this._cachedIndex=Tu,this.afterEnd_(Tu-1,_u,Pu)}if(Tu===Lu)break;if(Pu=Cu,Cu=$u[++Tu],_u<Cu)break t}Bu=$u.length;break n}if(!(_u>=Pu)){var Ru=$u[1];_u<Ru&&(Tu=2,Pu=Ru);for(var Lu=Tu-2;;){if(Pu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Cu);if(Tu===Lu)break;if(Cu=Pu,Pu=$u[--Tu-1],_u>=Pu)break t}Bu=Tu,Tu=0;break n}break e}for(;Tu<Bu;){var Ou=Tu+Bu>>>1;_u<$u[Ou]?Bu=Ou:Tu=Ou+1}if(Cu=$u[Tu],Pu=$u[Tu-1],Pu===void 0)return this._cachedIndex=0,this.beforeStart_(0,_u,Cu);if(Cu===void 0)return Tu=$u.length,this._cachedIndex=Tu,this.afterEnd_(Tu-1,Pu,_u)}this._cachedIndex=Tu,this.intervalChanged_(Tu,Pu,Cu)}return this.interpolate_(Tu,Pu,_u,Cu)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(_u){for(var $u=this.resultBuffer,Tu=this.sampleValues,Cu=this.valueSize,Pu=_u*Cu,Bu=0;Bu!==Cu;++Bu)$u[Bu]=Tu[Pu+Bu];return $u},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(_u,$u,Tu){var Cu=this.parameterPositions,Pu=_u-2,Bu=_u+1,Lu=Cu[Pu],Ru=Cu[Bu];if(Lu===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Pu=_u,Lu=2*$u-Tu;break;case WrapAroundEnding:Pu=Cu.length-2,Lu=$u+Cu[Pu]-Cu[Pu+1];break;default:Pu=_u,Lu=Tu}if(Ru===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Bu=_u,Ru=2*Tu-$u;break;case WrapAroundEnding:Bu=1,Ru=Tu+Cu[1]-Cu[0];break;default:Bu=_u-1,Ru=$u}var Ou=(Tu-$u)*.5,Du=this.valueSize;this._weightPrev=Ou/($u-Lu),this._weightNext=Ou/(Ru-Tu),this._offsetPrev=Pu*Du,this._offsetNext=Bu*Du},interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Bu=this.sampleValues,Lu=this.valueSize,Ru=_u*Lu,Ou=Ru-Lu,Du=this._offsetPrev,Fu=this._offsetNext,Vu=this._weightPrev,ku=this._weightNext,Nu=(Tu-$u)/(Cu-$u),Gu=Nu*Nu,ju=Gu*Nu,Hu=-Vu*ju+2*Vu*Gu-Vu*Nu,Uu=(1+Vu)*ju+(-1.5-2*Vu)*Gu+(-.5+Vu)*Nu+1,zu=(-1-ku)*ju+(1.5+ku)*Gu+.5*Nu,Wu=ku*ju-ku*Gu,Qu=0;Qu!==Lu;++Qu)Pu[Qu]=Hu*Bu[Du+Qu]+Uu*Bu[Ou+Qu]+zu*Bu[Ru+Qu]+Wu*Bu[Fu+Qu];return Pu}});function LinearInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Bu=this.sampleValues,Lu=this.valueSize,Ru=_u*Lu,Ou=Ru-Lu,Du=(Tu-$u)/(Cu-$u),Fu=1-Du,Vu=0;Vu!==Lu;++Vu)Pu[Vu]=Bu[Ou+Vu]*Fu+Bu[Ru+Vu]*Du;return Pu}});function DiscreteInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(_u){return this.copySampleValue_(_u-1)}});function KeyframeTrack(_u,$u,Tu,Cu){if(_u===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if($u===void 0||$u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_u);this.name=_u,this.times=AnimationUtils.convertArray($u,this.TimeBufferType),this.values=AnimationUtils.convertArray(Tu,this.ValueBufferType),this.setInterpolation(Cu||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(_u){var $u=_u.constructor,Tu;if($u.toJSON!==void 0)Tu=$u.toJSON(_u);else{Tu={name:_u.name,times:AnimationUtils.convertArray(_u.times,Array),values:AnimationUtils.convertArray(_u.values,Array)};var Cu=_u.getInterpolation();Cu!==_u.DefaultInterpolation&&(Tu.interpolation=Cu)}return Tu.type=_u.ValueTypeName,Tu}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(_u){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodLinear:function(_u){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:function(_u){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_u)},setInterpolation:function(_u){var $u;switch(_u){case InterpolateDiscrete:$u=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:$u=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:$u=this.InterpolantFactoryMethodSmooth;break}if($u===void 0){var Tu="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_u!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Tu);return console.warn("THREE.KeyframeTrack:",Tu),this}return this.createInterpolant=$u,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(_u){if(_u!==0)for(var $u=this.times,Tu=0,Cu=$u.length;Tu!==Cu;++Tu)$u[Tu]+=_u;return this},scale:function(_u){if(_u!==1)for(var $u=this.times,Tu=0,Cu=$u.length;Tu!==Cu;++Tu)$u[Tu]*=_u;return this},trim:function(_u,$u){for(var Tu=this.times,Cu=Tu.length,Pu=0,Bu=Cu-1;Pu!==Cu&&Tu[Pu]<_u;)++Pu;for(;Bu!==-1&&Tu[Bu]>$u;)--Bu;if(++Bu,Pu!==0||Bu!==Cu){Pu>=Bu&&(Bu=Math.max(Bu,1),Pu=Bu-1);var Lu=this.getValueSize();this.times=AnimationUtils.arraySlice(Tu,Pu,Bu),this.values=AnimationUtils.arraySlice(this.values,Pu*Lu,Bu*Lu)}return this},validate:function(){var _u=!0,$u=this.getValueSize();$u-Math.floor($u)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_u=!1);var Tu=this.times,Cu=this.values,Pu=Tu.length;Pu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_u=!1);for(var Bu=null,Lu=0;Lu!==Pu;Lu++){var Ru=Tu[Lu];if(typeof Ru=="number"&&isNaN(Ru)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Lu,Ru),_u=!1;break}if(Bu!==null&&Bu>Ru){console.error("THREE.KeyframeTrack: Out of order keys.",this,Lu,Ru,Bu),_u=!1;break}Bu=Ru}if(Cu!==void 0&&AnimationUtils.isTypedArray(Cu))for(var Lu=0,Ou=Cu.length;Lu!==Ou;++Lu){var Du=Cu[Lu];if(isNaN(Du)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Lu,Du),_u=!1;break}}return _u},optimize:function(){for(var _u=AnimationUtils.arraySlice(this.times),$u=AnimationUtils.arraySlice(this.values),Tu=this.getValueSize(),Cu=this.getInterpolation()===InterpolateSmooth,Pu=1,Bu=_u.length-1,Lu=1;Lu<Bu;++Lu){var Ru=!1,Ou=_u[Lu],Du=_u[Lu+1];if(Ou!==Du&&(Lu!==1||Ou!==Ou[0]))if(Cu)Ru=!0;else for(var Fu=Lu*Tu,Vu=Fu-Tu,ku=Fu+Tu,Nu=0;Nu!==Tu;++Nu){var Gu=$u[Fu+Nu];if(Gu!==$u[Vu+Nu]||Gu!==$u[ku+Nu]){Ru=!0;break}}if(Ru){if(Lu!==Pu){_u[Pu]=_u[Lu];for(var ju=Lu*Tu,Hu=Pu*Tu,Nu=0;Nu!==Tu;++Nu)$u[Hu+Nu]=$u[ju+Nu]}++Pu}}if(Bu>0){_u[Pu]=_u[Bu];for(var ju=Bu*Tu,Hu=Pu*Tu,Nu=0;Nu!==Tu;++Nu)$u[Hu+Nu]=$u[ju+Nu];++Pu}return Pu!==_u.length?(this.times=AnimationUtils.arraySlice(_u,0,Pu),this.values=AnimationUtils.arraySlice($u,0,Pu*Tu)):(this.times=_u,this.values=$u),this},clone:function(){var _u=AnimationUtils.arraySlice(this.times,0),$u=AnimationUtils.arraySlice(this.values,0),Tu=this.constructor,Cu=new Tu(this.name,_u,$u);return Cu.createInterpolant=this.createInterpolant,Cu}});function BooleanKeyframeTrack(_u,$u,Tu){KeyframeTrack.call(this,_u,$u,Tu)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(_u,$u,Tu,Cu){Interpolant.call(this,_u,$u,Tu,Cu)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(_u,$u,Tu,Cu){for(var Pu=this.resultBuffer,Bu=this.sampleValues,Lu=this.valueSize,Ru=_u*Lu,Ou=(Tu-$u)/(Cu-$u),Du=Ru+Lu;Ru!==Du;Ru+=4)Quaternion.slerpFlat(Pu,0,Bu,Ru-Lu,Bu,Ru,Ou);return Pu}});function QuaternionKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(_u){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_u)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(_u,$u,Tu,Cu){KeyframeTrack.call(this,_u,$u,Tu,Cu)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(_u,$u,Tu,Cu){this.name=_u,this.tracks=Tu,this.duration=$u!==void 0?$u:-1,this.blendMode=Cu!==void 0?Cu:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(_u){switch(_u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_u)}function parseKeyframeTrack(_u){if(_u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var $u=getTrackTypeForValueTypeName(_u.type);if(_u.times===void 0){var Tu=[],Cu=[];AnimationUtils.flattenJSON(_u.keys,Tu,Cu,"value"),_u.times=Tu,_u.values=Cu}return $u.parse!==void 0?$u.parse(_u):new $u(_u.name,_u.times,_u.values,_u.interpolation)}Object.assign(AnimationClip,{parse:function(_u){for(var $u=[],Tu=_u.tracks,Cu=1/(_u.fps||1),Pu=0,Bu=Tu.length;Pu!==Bu;++Pu)$u.push(parseKeyframeTrack(Tu[Pu]).scale(Cu));return new AnimationClip(_u.name,_u.duration,$u,_u.blendMode)},toJSON:function(_u){for(var $u=[],Tu=_u.tracks,Cu={name:_u.name,duration:_u.duration,tracks:$u,uuid:_u.uuid,blendMode:_u.blendMode},Pu=0,Bu=Tu.length;Pu!==Bu;++Pu)$u.push(KeyframeTrack.toJSON(Tu[Pu]));return Cu},CreateFromMorphTargetSequence:function(_u,$u,Tu,Cu){for(var Pu=$u.length,Bu=[],Lu=0;Lu<Pu;Lu++){var Ru=[],Ou=[];Ru.push((Lu+Pu-1)%Pu,Lu,(Lu+1)%Pu),Ou.push(0,1,0);var Du=AnimationUtils.getKeyframeOrder(Ru);Ru=AnimationUtils.sortedArray(Ru,1,Du),Ou=AnimationUtils.sortedArray(Ou,1,Du),!Cu&&Ru[0]===0&&(Ru.push(Pu),Ou.push(Ou[0])),Bu.push(new NumberKeyframeTrack(".morphTargetInfluences["+$u[Lu].name+"]",Ru,Ou).scale(1/Tu))}return new AnimationClip(_u,-1,Bu)},findByName:function(_u,$u){var Tu=_u;if(!Array.isArray(_u)){var Cu=_u;Tu=Cu.geometry&&Cu.geometry.animations||Cu.animations}for(var Pu=0;Pu<Tu.length;Pu++)if(Tu[Pu].name===$u)return Tu[Pu];return null},CreateClipsFromMorphTargetSequences:function(_u,$u,Tu){for(var Cu={},Pu=/^([\w-]*?)([\d]+)$/,Bu=0,Lu=_u.length;Bu<Lu;Bu++){var Ru=_u[Bu],Ou=Ru.name.match(Pu);if(Ou&&Ou.length>1){var Du=Ou[1],Fu=Cu[Du];Fu||(Cu[Du]=Fu=[]),Fu.push(Ru)}}var Vu=[];for(var Du in Cu)Vu.push(AnimationClip.CreateFromMorphTargetSequence(Du,Cu[Du],$u,Tu));return Vu},parseAnimation:function(_u,$u){if(!_u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Tu=function(Qu,Ku,Yu,Xc,_d){if(Yu.length!==0){var _f=[],qu=[];AnimationUtils.flattenJSON(Yu,_f,qu,Xc),_f.length!==0&&_d.push(new Qu(Ku,_f,qu))}},Cu=[],Pu=_u.name||"default",Bu=_u.length||-1,Lu=_u.fps||30,Ru=_u.blendMode,Ou=_u.hierarchy||[],Du=0;Du<Ou.length;Du++){var Fu=Ou[Du].keys;if(!(!Fu||Fu.length===0))if(Fu[0].morphTargets){for(var Vu={},ku=0;ku<Fu.length;ku++)if(Fu[ku].morphTargets)for(var Nu=0;Nu<Fu[ku].morphTargets.length;Nu++)Vu[Fu[ku].morphTargets[Nu]]=-1;for(var Gu in Vu){for(var ju=[],Hu=[],Nu=0;Nu!==Fu[ku].morphTargets.length;++Nu){var Uu=Fu[ku];ju.push(Uu.time),Hu.push(Uu.morphTarget===Gu?1:0)}Cu.push(new NumberKeyframeTrack(".morphTargetInfluence["+Gu+"]",ju,Hu))}Bu=Vu.length*(Lu||1)}else{var zu=".bones["+$u[Du].name+"]";Tu(VectorKeyframeTrack,zu+".position",Fu,"pos",Cu),Tu(QuaternionKeyframeTrack,zu+".quaternion",Fu,"rot",Cu),Tu(VectorKeyframeTrack,zu+".scale",Fu,"scl",Cu)}}if(Cu.length===0)return null;var Wu=new AnimationClip(Pu,Bu,Cu,Ru);return Wu}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var _u=this.tracks,$u=0,Tu=0,Cu=_u.length;Tu!==Cu;++Tu){var Pu=this.tracks[Tu];$u=Math.max($u,Pu.times[Pu.times.length-1])}return this.duration=$u,this},trim:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].trim(0,this.duration);return this},validate:function(){for(var _u=!0,$u=0;$u<this.tracks.length;$u++)_u=_u&&this.tracks[$u].validate();return _u},optimize:function(){for(var _u=0;_u<this.tracks.length;_u++)this.tracks[_u].optimize();return this},clone:function(){for(var _u=[],$u=0;$u<this.tracks.length;$u++)_u.push(this.tracks[$u].clone());return new AnimationClip(this.name,this.duration,_u,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(_u,$u){this.enabled!==!1&&(this.files[_u]=$u)},get:function(_u){if(this.enabled!==!1)return this.files[_u]},remove:function(_u){delete this.files[_u]},clear:function(){this.files={}}};function LoadingManager(_u,$u,Tu){var Cu=this,Pu=!1,Bu=0,Lu=0,Ru=void 0,Ou=[];this.onStart=void 0,this.onLoad=_u,this.onProgress=$u,this.onError=Tu,this.itemStart=function(Du){Lu++,Pu===!1&&Cu.onStart!==void 0&&Cu.onStart(Du,Bu,Lu),Pu=!0},this.itemEnd=function(Du){Bu++,Cu.onProgress!==void 0&&Cu.onProgress(Du,Bu,Lu),Bu===Lu&&(Pu=!1,Cu.onLoad!==void 0&&Cu.onLoad())},this.itemError=function(Du){Cu.onError!==void 0&&Cu.onError(Du)},this.resolveURL=function(Du){return Ru?Ru(Du):Du},this.setURLModifier=function(Du){return Ru=Du,this},this.addHandler=function(Du,Fu){return Ou.push(Du,Fu),this},this.removeHandler=function(Du){var Fu=Ou.indexOf(Du);return Fu!==-1&&Ou.splice(Fu,2),this},this.getHandler=function(Du){for(var Fu=0,Vu=Ou.length;Fu<Vu;Fu+=2){var ku=Ou[Fu],Nu=Ou[Fu+1];if(ku.global&&(ku.lastIndex=0),ku.test(Du))return Nu}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(_u){this.manager=_u!==void 0?_u:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(_u,$u){var Tu=this;return new Promise(function(Cu,Pu){Tu.load(_u,Cu,$u,Pu)})},parse:function(){},setCrossOrigin:function(_u){return this.crossOrigin=_u,this},setPath:function(_u){return this.path=_u,this},setResourcePath:function(_u){return this.resourcePath=_u,this},setRequestHeader:function(_u){return this.requestHeader=_u,this}});var loading={};function FileLoader(_u){Loader.call(this,_u)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(_u,$u,Tu,Cu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Bu=Cache.get(_u);if(Bu!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Bu),Pu.manager.itemEnd(_u)},0),Bu;if(loading[_u]!==void 0){loading[_u].push({onLoad:$u,onProgress:Tu,onError:Cu});return}var Lu=/^data:(.*?)(;base64)?,(.*)$/,Ru=_u.match(Lu);if(Ru){var Ou=Ru[1],Du=!!Ru[2],Fu=Ru[3];Fu=decodeURIComponent(Fu),Du&&(Fu=atob(Fu));try{var Vu,ku=(this.responseType||"").toLowerCase();switch(ku){case"arraybuffer":case"blob":for(var Nu=new Uint8Array(Fu.length),Gu=0;Gu<Fu.length;Gu++)Nu[Gu]=Fu.charCodeAt(Gu);ku==="blob"?Vu=new Blob([Nu.buffer],{type:Ou}):Vu=Nu.buffer;break;case"document":var ju=new DOMParser;Vu=ju.parseFromString(Fu,Ou);break;case"json":Vu=JSON.parse(Fu);break;default:Vu=Fu;break}setTimeout(function(){$u&&$u(Vu),Pu.manager.itemEnd(_u)},0)}catch(zu){setTimeout(function(){Cu&&Cu(zu),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},0)}}else{loading[_u]=[],loading[_u].push({onLoad:$u,onProgress:Tu,onError:Cu});var Hu=new XMLHttpRequest;Hu.open("GET",_u,!0),Hu.addEventListener("load",function(zu){var Wu=this.response,Qu=loading[_u];if(delete loading[_u],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(_u,Wu);for(var Ku=0,Yu=Qu.length;Ku<Yu;Ku++){var Xc=Qu[Ku];Xc.onLoad&&Xc.onLoad(Wu)}Pu.manager.itemEnd(_u)}else{for(var Ku=0,Yu=Qu.length;Ku<Yu;Ku++){var Xc=Qu[Ku];Xc.onError&&Xc.onError(zu)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}},!1),Hu.addEventListener("progress",function(zu){for(var Wu=loading[_u],Qu=0,Ku=Wu.length;Qu<Ku;Qu++){var Yu=Wu[Qu];Yu.onProgress&&Yu.onProgress(zu)}},!1),Hu.addEventListener("error",function(zu){var Wu=loading[_u];delete loading[_u];for(var Qu=0,Ku=Wu.length;Qu<Ku;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(zu)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},!1),Hu.addEventListener("abort",function(zu){var Wu=loading[_u];delete loading[_u];for(var Qu=0,Ku=Wu.length;Qu<Ku;Qu++){var Yu=Wu[Qu];Yu.onError&&Yu.onError(zu)}Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)},!1),this.responseType!==void 0&&(Hu.responseType=this.responseType),this.withCredentials!==void 0&&(Hu.withCredentials=this.withCredentials),Hu.overrideMimeType&&Hu.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Uu in this.requestHeader)Hu.setRequestHeader(Uu,this.requestHeader[Uu]);Hu.send(null)}return Pu.manager.itemStart(_u),Hu},setResponseType:function(_u){return this.responseType=_u,this},setWithCredentials:function(_u){return this.withCredentials=_u,this},setMimeType:function(_u){return this.mimeType=_u,this}});function AnimationLoader(_u){Loader.call(this,_u)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new FileLoader(Pu.manager);Bu.setPath(Pu.path),Bu.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Ru){Cu?Cu(Ru):console.error(Ru),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){for(var $u=[],Tu=0;Tu<_u.length;Tu++){var Cu=AnimationClip.parse(_u[Tu]);$u.push(Cu)}return $u}});function CompressedTextureLoader(_u){Loader.call(this,_u)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=[],Lu=new CompressedTexture;Lu.image=Bu;var Ru=new FileLoader(this.manager);Ru.setPath(this.path),Ru.setResponseType("arraybuffer");function Ou(ku){Ru.load(_u[ku],function(Nu){var Gu=Pu.parse(Nu,!0);Bu[ku]={width:Gu.width,height:Gu.height,format:Gu.format,mipmaps:Gu.mipmaps},Du+=1,Du===6&&(Gu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Gu.format,Lu.needsUpdate=!0,$u&&$u(Lu))},Tu,Cu)}if(Array.isArray(_u))for(var Du=0,Fu=0,Vu=_u.length;Fu<Vu;++Fu)Ou(Fu);else Ru.load(_u,function(ku){var Nu=Pu.parse(ku,!0);if(Nu.isCubemap)for(var Gu=Nu.mipmaps.length/Nu.mipmapCount,ju=0;ju<Gu;ju++){Bu[ju]={mipmaps:[]};for(var Hu=0;Hu<Nu.mipmapCount;Hu++)Bu[ju].mipmaps.push(Nu.mipmaps[ju*Nu.mipmapCount+Hu]),Bu[ju].format=Nu.format,Bu[ju].width=Nu.width,Bu[ju].height=Nu.height}else Lu.image.width=Nu.width,Lu.image.height=Nu.height,Lu.mipmaps=Nu.mipmaps;Nu.mipmapCount===1&&(Lu.minFilter=LinearFilter),Lu.format=Nu.format,Lu.needsUpdate=!0,$u&&$u(Lu)},Tu,Cu);return Lu}});function DataTextureLoader(_u){Loader.call(this,_u)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new DataTexture,Lu=new FileLoader(this.manager);return Lu.setResponseType("arraybuffer"),Lu.setPath(this.path),Lu.load(_u,function(Ru){var Ou=Pu.parse(Ru);!Ou||(Ou.image!==void 0?Bu.image=Ou.image:Ou.data!==void 0&&(Bu.image.width=Ou.width,Bu.image.height=Ou.height,Bu.image.data=Ou.data),Bu.wrapS=Ou.wrapS!==void 0?Ou.wrapS:ClampToEdgeWrapping,Bu.wrapT=Ou.wrapT!==void 0?Ou.wrapT:ClampToEdgeWrapping,Bu.magFilter=Ou.magFilter!==void 0?Ou.magFilter:LinearFilter,Bu.minFilter=Ou.minFilter!==void 0?Ou.minFilter:LinearFilter,Bu.anisotropy=Ou.anisotropy!==void 0?Ou.anisotropy:1,Ou.format!==void 0&&(Bu.format=Ou.format),Ou.type!==void 0&&(Bu.type=Ou.type),Ou.mipmaps!==void 0&&(Bu.mipmaps=Ou.mipmaps,Bu.minFilter=LinearMipmapLinearFilter),Ou.mipmapCount===1&&(Bu.minFilter=LinearFilter),Bu.needsUpdate=!0,$u&&$u(Bu,Ou))},Tu,Cu),Bu}});function ImageLoader(_u){Loader.call(this,_u)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(_u,$u,Tu,Cu){this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Bu=Cache.get(_u);if(Bu!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Bu),Pu.manager.itemEnd(_u)},0),Bu;var Lu=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Ru(){Lu.removeEventListener("load",Ru,!1),Lu.removeEventListener("error",Ou,!1),Cache.add(_u,this),$u&&$u(this),Pu.manager.itemEnd(_u)}function Ou(Du){Lu.removeEventListener("load",Ru,!1),Lu.removeEventListener("error",Ou,!1),Cu&&Cu(Du),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}return Lu.addEventListener("load",Ru,!1),Lu.addEventListener("error",Ou,!1),_u.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Lu.crossOrigin=this.crossOrigin),Pu.manager.itemStart(_u),Lu.src=_u,Lu}});function CubeTextureLoader(_u){Loader.call(this,_u)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(_u,$u,Tu,Cu){var Pu=new CubeTexture,Bu=new ImageLoader(this.manager);Bu.setCrossOrigin(this.crossOrigin),Bu.setPath(this.path);var Lu=0;function Ru(Du){Bu.load(_u[Du],function(Fu){Pu.images[Du]=Fu,Lu++,Lu===6&&(Pu.needsUpdate=!0,$u&&$u(Pu))},void 0,Cu)}for(var Ou=0;Ou<_u.length;++Ou)Ru(Ou);return Pu}});function TextureLoader(_u){Loader.call(this,_u)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(_u,$u,Tu,Cu){var Pu=new Texture,Bu=new ImageLoader(this.manager);return Bu.setCrossOrigin(this.crossOrigin),Bu.setPath(this.path),Bu.load(_u,function(Lu){Pu.image=Lu;var Ru=_u.search(/\.jpe?g($|\?)/i)>0||_u.search(/^data\:image\/jpeg/)===0;Pu.format=Ru?RGBFormat:RGBAFormat,Pu.needsUpdate=!0,$u!==void 0&&$u(Pu)},Tu,Cu),Pu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(_u,$u){var Tu=this.getUtoTmapping(_u);return this.getPoint(Tu,$u)},getPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPoint(Tu/_u));return $u},getSpacedPoints:function(_u){_u===void 0&&(_u=5);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPointAt(Tu/_u));return $u},getLength:function(){var _u=this.getLengths();return _u[_u.length-1]},getLengths:function(_u){if(_u===void 0&&(_u=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===_u+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var $u=[],Tu,Cu=this.getPoint(0),Pu,Bu=0;for($u.push(0),Pu=1;Pu<=_u;Pu++)Tu=this.getPoint(Pu/_u),Bu+=Tu.distanceTo(Cu),$u.push(Bu),Cu=Tu;return this.cacheArcLengths=$u,$u},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(_u,$u){var Tu=this.getLengths(),Cu=0,Pu=Tu.length,Bu;$u?Bu=$u:Bu=_u*Tu[Pu-1];for(var Lu=0,Ru=Pu-1,Ou;Lu<=Ru;)if(Cu=Math.floor(Lu+(Ru-Lu)/2),Ou=Tu[Cu]-Bu,Ou<0)Lu=Cu+1;else if(Ou>0)Ru=Cu-1;else{Ru=Cu;break}if(Cu=Ru,Tu[Cu]===Bu)return Cu/(Pu-1);var Du=Tu[Cu],Fu=Tu[Cu+1],Vu=Fu-Du,ku=(Bu-Du)/Vu,Nu=(Cu+ku)/(Pu-1);return Nu},getTangent:function(_u,$u){var Tu=1e-4,Cu=_u-Tu,Pu=_u+Tu;Cu<0&&(Cu=0),Pu>1&&(Pu=1);var Bu=this.getPoint(Cu),Lu=this.getPoint(Pu),Ru=$u||(Bu.isVector2?new Vector2:new Vector3);return Ru.copy(Lu).sub(Bu).normalize(),Ru},getTangentAt:function(_u,$u){var Tu=this.getUtoTmapping(_u);return this.getTangent(Tu,$u)},computeFrenetFrames:function(_u,$u){var Tu=new Vector3,Cu=[],Pu=[],Bu=[],Lu=new Vector3,Ru=new Matrix4,Ou,Du,Fu;for(Ou=0;Ou<=_u;Ou++)Du=Ou/_u,Cu[Ou]=this.getTangentAt(Du,new Vector3),Cu[Ou].normalize();Pu[0]=new Vector3,Bu[0]=new Vector3;var Vu=Number.MAX_VALUE,ku=Math.abs(Cu[0].x),Nu=Math.abs(Cu[0].y),Gu=Math.abs(Cu[0].z);for(ku<=Vu&&(Vu=ku,Tu.set(1,0,0)),Nu<=Vu&&(Vu=Nu,Tu.set(0,1,0)),Gu<=Vu&&Tu.set(0,0,1),Lu.crossVectors(Cu[0],Tu).normalize(),Pu[0].crossVectors(Cu[0],Lu),Bu[0].crossVectors(Cu[0],Pu[0]),Ou=1;Ou<=_u;Ou++)Pu[Ou]=Pu[Ou-1].clone(),Bu[Ou]=Bu[Ou-1].clone(),Lu.crossVectors(Cu[Ou-1],Cu[Ou]),Lu.length()>Number.EPSILON&&(Lu.normalize(),Fu=Math.acos(MathUtils.clamp(Cu[Ou-1].dot(Cu[Ou]),-1,1)),Pu[Ou].applyMatrix4(Ru.makeRotationAxis(Lu,Fu))),Bu[Ou].crossVectors(Cu[Ou],Pu[Ou]);if($u===!0)for(Fu=Math.acos(MathUtils.clamp(Pu[0].dot(Pu[_u]),-1,1)),Fu/=_u,Cu[0].dot(Lu.crossVectors(Pu[0],Pu[_u]))>0&&(Fu=-Fu),Ou=1;Ou<=_u;Ou++)Pu[Ou].applyMatrix4(Ru.makeRotationAxis(Cu[Ou],Fu*Ou)),Bu[Ou].crossVectors(Cu[Ou],Pu[Ou]);return{tangents:Cu,normals:Pu,binormals:Bu}},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this},toJSON:function(){var _u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _u.arcLengthDivisions=this.arcLengthDivisions,_u.type=this.type,_u},fromJSON:function(_u){return this.arcLengthDivisions=_u.arcLengthDivisions,this}});function EllipseCurve(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){Curve.call(this),this.type="EllipseCurve",this.aX=_u||0,this.aY=$u||0,this.xRadius=Tu||1,this.yRadius=Cu||1,this.aStartAngle=Pu||0,this.aEndAngle=Bu||2*Math.PI,this.aClockwise=Lu||!1,this.aRotation=Ru||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(_u,$u){for(var Tu=$u||new Vector2,Cu=Math.PI*2,Pu=this.aEndAngle-this.aStartAngle,Bu=Math.abs(Pu)<Number.EPSILON;Pu<0;)Pu+=Cu;for(;Pu>Cu;)Pu-=Cu;Pu<Number.EPSILON&&(Bu?Pu=0:Pu=Cu),this.aClockwise===!0&&!Bu&&(Pu===Cu?Pu=-Cu:Pu=Pu-Cu);var Lu=this.aStartAngle+_u*Pu,Ru=this.aX+this.xRadius*Math.cos(Lu),Ou=this.aY+this.yRadius*Math.sin(Lu);if(this.aRotation!==0){var Du=Math.cos(this.aRotation),Fu=Math.sin(this.aRotation),Vu=Ru-this.aX,ku=Ou-this.aY;Ru=Vu*Du-ku*Fu+this.aX,Ou=Vu*Fu+ku*Du+this.aY}return Tu.set(Ru,Ou)};EllipseCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};EllipseCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.aX=this.aX,_u.aY=this.aY,_u.xRadius=this.xRadius,_u.yRadius=this.yRadius,_u.aStartAngle=this.aStartAngle,_u.aEndAngle=this.aEndAngle,_u.aClockwise=this.aClockwise,_u.aRotation=this.aRotation,_u};EllipseCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.aX=_u.aX,this.aY=_u.aY,this.xRadius=_u.xRadius,this.yRadius=_u.yRadius,this.aStartAngle=_u.aStartAngle,this.aEndAngle=_u.aEndAngle,this.aClockwise=_u.aClockwise,this.aRotation=_u.aRotation,this};function ArcCurve(_u,$u,Tu,Cu,Pu,Bu){EllipseCurve.call(this,_u,$u,Tu,Tu,Cu,Pu,Bu),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var _u=0,$u=0,Tu=0,Cu=0;function Pu(Bu,Lu,Ru,Ou){_u=Bu,$u=Ru,Tu=-3*Bu+3*Lu-2*Ru-Ou,Cu=2*Bu-2*Lu+Ru+Ou}return{initCatmullRom:function(Bu,Lu,Ru,Ou,Du){Pu(Lu,Ru,Du*(Ru-Bu),Du*(Ou-Lu))},initNonuniformCatmullRom:function(Bu,Lu,Ru,Ou,Du,Fu,Vu){var ku=(Lu-Bu)/Du-(Ru-Bu)/(Du+Fu)+(Ru-Lu)/Fu,Nu=(Ru-Lu)/Fu-(Ou-Lu)/(Fu+Vu)+(Ou-Ru)/Vu;ku*=Fu,Nu*=Fu,Pu(Lu,Ru,ku,Nu)},calc:function(Bu){var Lu=Bu*Bu,Ru=Lu*Bu;return _u+$u*Bu+Tu*Lu+Cu*Ru}}}var tmp$1=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(_u,$u,Tu,Cu){Curve.call(this),this.type="CatmullRomCurve3",this.points=_u||[],this.closed=$u||!1,this.curveType=Tu||"centripetal",this.tension=Cu||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.points,Pu=Cu.length,Bu=(Pu-(this.closed?0:1))*_u,Lu=Math.floor(Bu),Ru=Bu-Lu;this.closed?Lu+=Lu>0?0:(Math.floor(Math.abs(Lu)/Pu)+1)*Pu:Ru===0&&Lu===Pu-1&&(Lu=Pu-2,Ru=1);var Ou,Du,Fu,Vu;if(this.closed||Lu>0?Ou=Cu[(Lu-1)%Pu]:(tmp$1.subVectors(Cu[0],Cu[1]).add(Cu[0]),Ou=tmp$1),Du=Cu[Lu%Pu],Fu=Cu[(Lu+1)%Pu],this.closed||Lu+2<Pu?Vu=Cu[(Lu+2)%Pu]:(tmp$1.subVectors(Cu[Pu-1],Cu[Pu-2]).add(Cu[Pu-1]),Vu=tmp$1),this.curveType==="centripetal"||this.curveType==="chordal"){var ku=this.curveType==="chordal"?.5:.25,Nu=Math.pow(Ou.distanceToSquared(Du),ku),Gu=Math.pow(Du.distanceToSquared(Fu),ku),ju=Math.pow(Fu.distanceToSquared(Vu),ku);Gu<1e-4&&(Gu=1),Nu<1e-4&&(Nu=Gu),ju<1e-4&&(ju=Gu),px.initNonuniformCatmullRom(Ou.x,Du.x,Fu.x,Vu.x,Nu,Gu,ju),py.initNonuniformCatmullRom(Ou.y,Du.y,Fu.y,Vu.y,Nu,Gu,ju),pz.initNonuniformCatmullRom(Ou.z,Du.z,Fu.z,Vu.z,Nu,Gu,ju)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Ou.x,Du.x,Fu.x,Vu.x,this.tension),py.initCatmullRom(Ou.y,Du.y,Fu.y,Vu.y,this.tension),pz.initCatmullRom(Ou.z,Du.z,Fu.z,Vu.z,this.tension));return Tu.set(px.calc(Ru),py.calc(Ru),pz.calc(Ru)),Tu};CatmullRomCurve3.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(Cu.clone())}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Tu=this.points.length;$u<Tu;$u++){var Cu=this.points[$u];_u.points.push(Cu.toArray())}return _u.closed=this.closed,_u.curveType=this.curveType,_u.tension=this.tension,_u};CatmullRomCurve3.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(new Vector3().fromArray(Cu))}return this.closed=_u.closed,this.curveType=_u.curveType,this.tension=_u.tension,this};function CatmullRom(_u,$u,Tu,Cu,Pu){var Bu=(Cu-$u)*.5,Lu=(Pu-Tu)*.5,Ru=_u*_u,Ou=_u*Ru;return(2*Tu-2*Cu+Bu+Lu)*Ou+(-3*Tu+3*Cu-2*Bu-Lu)*Ru+Bu*_u+Tu}function QuadraticBezierP0(_u,$u){var Tu=1-_u;return Tu*Tu*$u}function QuadraticBezierP1(_u,$u){return 2*(1-_u)*_u*$u}function QuadraticBezierP2(_u,$u){return _u*_u*$u}function QuadraticBezier(_u,$u,Tu,Cu){return QuadraticBezierP0(_u,$u)+QuadraticBezierP1(_u,Tu)+QuadraticBezierP2(_u,Cu)}function CubicBezierP0(_u,$u){var Tu=1-_u;return Tu*Tu*Tu*$u}function CubicBezierP1(_u,$u){var Tu=1-_u;return 3*Tu*Tu*_u*$u}function CubicBezierP2(_u,$u){return 3*(1-_u)*_u*_u*$u}function CubicBezierP3(_u,$u){return _u*_u*_u*$u}function CubicBezier(_u,$u,Tu,Cu,Pu){return CubicBezierP0(_u,$u)+CubicBezierP1(_u,Tu)+CubicBezierP2(_u,Cu)+CubicBezierP3(_u,Pu)}function CubicBezierCurve(_u,$u,Tu,Cu){Curve.call(this),this.type="CubicBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Tu||new Vector2,this.v3=Cu||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.v0,Pu=this.v1,Bu=this.v2,Lu=this.v3;return Tu.set(CubicBezier(_u,Cu.x,Pu.x,Bu.x,Lu.x),CubicBezier(_u,Cu.y,Pu.y,Bu.y,Lu.y)),Tu};CubicBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function CubicBezierCurve3(_u,$u,Tu,Cu){Curve.call(this),this.type="CubicBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Tu||new Vector3,this.v3=Cu||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.v0,Pu=this.v1,Bu=this.v2,Lu=this.v3;return Tu.set(CubicBezier(_u,Cu.x,Pu.x,Bu.x,Lu.x),CubicBezier(_u,Cu.y,Pu.y,Bu.y,Lu.y),CubicBezier(_u,Cu.z,Pu.z,Bu.z,Lu.z)),Tu};CubicBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this.v3.copy(_u.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u.v3=this.v3.toArray(),_u};CubicBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this.v3.fromArray(_u.v3),this};function LineCurve(_u,$u){Curve.call(this),this.type="LineCurve",this.v1=_u||new Vector2,this.v2=$u||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2;return _u===1?Tu.copy(this.v2):(Tu.copy(this.v2).sub(this.v1),Tu.multiplyScalar(_u).add(this.v1)),Tu};LineCurve.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve.prototype.getTangent=function(_u,$u){var Tu=$u||new Vector2,Tu=Tu.copy(this.v2).sub(this.v1).normalize();return Tu};LineCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function LineCurve3(_u,$u){Curve.call(this),this.type="LineCurve3",this.v1=_u||new Vector3,this.v2=$u||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3;return _u===1?Tu.copy(this.v2):(Tu.copy(this.v2).sub(this.v1),Tu.multiplyScalar(_u).add(this.v1)),Tu};LineCurve3.prototype.getPointAt=function(_u,$u){return this.getPoint(_u,$u)};LineCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};LineCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};LineCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve(_u,$u,Tu){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=_u||new Vector2,this.v1=$u||new Vector2,this.v2=Tu||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.v0,Pu=this.v1,Bu=this.v2;return Tu.set(QuadraticBezier(_u,Cu.x,Pu.x,Bu.x),QuadraticBezier(_u,Cu.y,Pu.y,Bu.y)),Tu};QuadraticBezierCurve.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function QuadraticBezierCurve3(_u,$u,Tu){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=_u||new Vector3,this.v1=$u||new Vector3,this.v2=Tu||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.v0,Pu=this.v1,Bu=this.v2;return Tu.set(QuadraticBezier(_u,Cu.x,Pu.x,Bu.x),QuadraticBezier(_u,Cu.y,Pu.y,Bu.y),QuadraticBezier(_u,Cu.z,Pu.z,Bu.z)),Tu};QuadraticBezierCurve3.prototype.copy=function(_u){return Curve.prototype.copy.call(this,_u),this.v0.copy(_u.v0),this.v1.copy(_u.v1),this.v2.copy(_u.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);return _u.v0=this.v0.toArray(),_u.v1=this.v1.toArray(),_u.v2=this.v2.toArray(),_u};QuadraticBezierCurve3.prototype.fromJSON=function(_u){return Curve.prototype.fromJSON.call(this,_u),this.v0.fromArray(_u.v0),this.v1.fromArray(_u.v1),this.v2.fromArray(_u.v2),this};function SplineCurve(_u){Curve.call(this),this.type="SplineCurve",this.points=_u||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector2,Cu=this.points,Pu=(Cu.length-1)*_u,Bu=Math.floor(Pu),Lu=Pu-Bu,Ru=Cu[Bu===0?Bu:Bu-1],Ou=Cu[Bu],Du=Cu[Bu>Cu.length-2?Cu.length-1:Bu+1],Fu=Cu[Bu>Cu.length-3?Cu.length-1:Bu+2];return Tu.set(CatmullRom(Lu,Ru.x,Ou.x,Du.x,Fu.x),CatmullRom(Lu,Ru.y,Ou.y,Du.y,Fu.y)),Tu};SplineCurve.prototype.copy=function(_u){Curve.prototype.copy.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(Cu.clone())}return this};SplineCurve.prototype.toJSON=function(){var _u=Curve.prototype.toJSON.call(this);_u.points=[];for(var $u=0,Tu=this.points.length;$u<Tu;$u++){var Cu=this.points[$u];_u.points.push(Cu.toArray())}return _u};SplineCurve.prototype.fromJSON=function(_u){Curve.prototype.fromJSON.call(this,_u),this.points=[];for(var $u=0,Tu=_u.points.length;$u<Tu;$u++){var Cu=_u.points[$u];this.points.push(new Vector2().fromArray(Cu))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(_u){this.curves.push(_u)},closePath:function(){var _u=this.curves[0].getPoint(0),$u=this.curves[this.curves.length-1].getPoint(1);_u.equals($u)||this.curves.push(new LineCurve($u,_u))},getPoint:function(_u){for(var $u=_u*this.getLength(),Tu=this.getCurveLengths(),Cu=0;Cu<Tu.length;){if(Tu[Cu]>=$u){var Pu=Tu[Cu]-$u,Bu=this.curves[Cu],Lu=Bu.getLength(),Ru=Lu===0?0:1-Pu/Lu;return Bu.getPointAt(Ru)}Cu++}return null},getLength:function(){var _u=this.getCurveLengths();return _u[_u.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var _u=[],$u=0,Tu=0,Cu=this.curves.length;Tu<Cu;Tu++)$u+=this.curves[Tu].getLength(),_u.push($u);return this.cacheLengths=_u,_u},getSpacedPoints:function(_u){_u===void 0&&(_u=40);for(var $u=[],Tu=0;Tu<=_u;Tu++)$u.push(this.getPoint(Tu/_u));return this.autoClose&&$u.push($u[0]),$u},getPoints:function(_u){_u=_u||12;for(var $u=[],Tu,Cu=0,Pu=this.curves;Cu<Pu.length;Cu++)for(var Bu=Pu[Cu],Lu=Bu&&Bu.isEllipseCurve?_u*2:Bu&&(Bu.isLineCurve||Bu.isLineCurve3)?1:Bu&&Bu.isSplineCurve?_u*Bu.points.length:_u,Ru=Bu.getPoints(Lu),Ou=0;Ou<Ru.length;Ou++){var Du=Ru[Ou];Tu&&Tu.equals(Du)||($u.push(Du),Tu=Du)}return this.autoClose&&$u.length>1&&!$u[$u.length-1].equals($u[0])&&$u.push($u[0]),$u},copy:function(_u){Curve.prototype.copy.call(this,_u),this.curves=[];for(var $u=0,Tu=_u.curves.length;$u<Tu;$u++){var Cu=_u.curves[$u];this.curves.push(Cu.clone())}return this.autoClose=_u.autoClose,this},toJSON:function(){var _u=Curve.prototype.toJSON.call(this);_u.autoClose=this.autoClose,_u.curves=[];for(var $u=0,Tu=this.curves.length;$u<Tu;$u++){var Cu=this.curves[$u];_u.curves.push(Cu.toJSON())}return _u},fromJSON:function(_u){Curve.prototype.fromJSON.call(this,_u),this.autoClose=_u.autoClose,this.curves=[];for(var $u=0,Tu=_u.curves.length;$u<Tu;$u++){var Cu=_u.curves[$u];this.curves.push(new Curves[Cu.type]().fromJSON(Cu))}return this}});function Path(_u){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,_u&&this.setFromPoints(_u)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(_u){this.moveTo(_u[0].x,_u[0].y);for(var $u=1,Tu=_u.length;$u<Tu;$u++)this.lineTo(_u[$u].x,_u[$u].y);return this},moveTo:function(_u,$u){return this.currentPoint.set(_u,$u),this},lineTo:function(_u,$u){var Tu=new LineCurve(this.currentPoint.clone(),new Vector2(_u,$u));return this.curves.push(Tu),this.currentPoint.set(_u,$u),this},quadraticCurveTo:function(_u,$u,Tu,Cu){var Pu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Tu,Cu));return this.curves.push(Pu),this.currentPoint.set(Tu,Cu),this},bezierCurveTo:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_u,$u),new Vector2(Tu,Cu),new Vector2(Pu,Bu));return this.curves.push(Lu),this.currentPoint.set(Pu,Bu),this},splineThru:function(_u){var $u=[this.currentPoint.clone()].concat(_u),Tu=new SplineCurve($u);return this.curves.push(Tu),this.currentPoint.copy(_u[_u.length-1]),this},arc:function(_u,$u,Tu,Cu,Pu,Bu){var Lu=this.currentPoint.x,Ru=this.currentPoint.y;return this.absarc(_u+Lu,$u+Ru,Tu,Cu,Pu,Bu),this},absarc:function(_u,$u,Tu,Cu,Pu,Bu){return this.absellipse(_u,$u,Tu,Tu,Cu,Pu,Bu),this},ellipse:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){var Ou=this.currentPoint.x,Du=this.currentPoint.y;return this.absellipse(_u+Ou,$u+Du,Tu,Cu,Pu,Bu,Lu,Ru),this},absellipse:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){var Ou=new EllipseCurve(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru);if(this.curves.length>0){var Du=Ou.getPoint(0);Du.equals(this.currentPoint)||this.lineTo(Du.x,Du.y)}this.curves.push(Ou);var Fu=Ou.getPoint(1);return this.currentPoint.copy(Fu),this},copy:function(_u){return CurvePath.prototype.copy.call(this,_u),this.currentPoint.copy(_u.currentPoint),this},toJSON:function(){var _u=CurvePath.prototype.toJSON.call(this);return _u.currentPoint=this.currentPoint.toArray(),_u},fromJSON:function(_u){return CurvePath.prototype.fromJSON.call(this,_u),this.currentPoint.fromArray(_u.currentPoint),this}});function Shape(_u){Path.call(this,_u),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(_u){for(var $u=[],Tu=0,Cu=this.holes.length;Tu<Cu;Tu++)$u[Tu]=this.holes[Tu].getPoints(_u);return $u},extractPoints:function(_u){return{shape:this.getPoints(_u),holes:this.getPointsHoles(_u)}},copy:function(_u){Path.prototype.copy.call(this,_u),this.holes=[];for(var $u=0,Tu=_u.holes.length;$u<Tu;$u++){var Cu=_u.holes[$u];this.holes.push(Cu.clone())}return this},toJSON:function(){var _u=Path.prototype.toJSON.call(this);_u.uuid=this.uuid,_u.holes=[];for(var $u=0,Tu=this.holes.length;$u<Tu;$u++){var Cu=this.holes[$u];_u.holes.push(Cu.toJSON())}return _u},fromJSON:function(_u){Path.prototype.fromJSON.call(this,_u),this.uuid=_u.uuid,this.holes=[];for(var $u=0,Tu=_u.holes.length;$u<Tu;$u++){var Cu=_u.holes[$u];this.holes.push(new Path().fromJSON(Cu))}return this}});function Light(_u,$u){Object3D.call(this),this.type="Light",this.color=new Color(_u),this.intensity=$u!==void 0?$u:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(_u){return Object3D.prototype.copy.call(this,_u),this.color.copy(_u.color),this.intensity=_u.intensity,this},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.color=this.color.getHex(),$u.object.intensity=this.intensity,this.groundColor!==void 0&&($u.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&($u.object.distance=this.distance),this.angle!==void 0&&($u.object.angle=this.angle),this.decay!==void 0&&($u.object.decay=this.decay),this.penumbra!==void 0&&($u.object.penumbra=this.penumbra),this.shadow!==void 0&&($u.object.shadow=this.shadow.toJSON()),$u}});function HemisphereLight(_u,$u,Tu){Light.call(this,_u,Tu),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color($u)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.groundColor.copy(_u.groundColor),this}});function LightShadow(_u){this.camera=_u,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(_u){var $u=this.camera,Tu=this.matrix,Cu=this._projScreenMatrix,Pu=this._lookTarget,Bu=this._lightPositionWorld;Bu.setFromMatrixPosition(_u.matrixWorld),$u.position.copy(Bu),Pu.setFromMatrixPosition(_u.target.matrixWorld),$u.lookAt(Pu),$u.updateMatrixWorld(),Cu.multiplyMatrices($u.projectionMatrix,$u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cu),Tu.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Tu.multiply($u.projectionMatrix),Tu.multiply($u.matrixWorldInverse)},getViewport:function(_u){return this._viewports[_u]},getFrameExtents:function(){return this._frameExtents},copy:function(_u){return this.camera=_u.camera.clone(),this.bias=_u.bias,this.radius=_u.radius,this.mapSize.copy(_u.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u={};return this.bias!==0&&(_u.bias=this.bias),this.radius!==1&&(_u.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_u.mapSize=this.mapSize.toArray()),_u.camera=this.camera.toJSON(!1).object,delete _u.camera.matrix,_u}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(_u){var $u=this.camera,Tu=MathUtils.RAD2DEG*2*_u.angle,Cu=this.mapSize.width/this.mapSize.height,Pu=_u.distance||$u.far;(Tu!==$u.fov||Cu!==$u.aspect||Pu!==$u.far)&&($u.fov=Tu,$u.aspect=Cu,$u.far=Pu,$u.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,_u)}});function SpotLight(_u,$u,Tu,Cu,Pu,Bu){Light.call(this,_u,$u),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Lu){this.intensity=Lu/Math.PI}}),this.distance=Tu!==void 0?Tu:0,this.angle=Cu!==void 0?Cu:Math.PI/3,this.penumbra=Pu!==void 0?Pu:0,this.decay=Bu!==void 0?Bu:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.angle=_u.angle,this.penumbra=_u.penumbra,this.decay=_u.decay,this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(_u,$u){$u===void 0&&($u=0);var Tu=this.camera,Cu=this.matrix,Pu=this._lightPositionWorld,Bu=this._lookTarget,Lu=this._projScreenMatrix;Pu.setFromMatrixPosition(_u.matrixWorld),Tu.position.copy(Pu),Bu.copy(Tu.position),Bu.add(this._cubeDirections[$u]),Tu.up.copy(this._cubeUps[$u]),Tu.lookAt(Bu),Tu.updateMatrixWorld(),Cu.makeTranslation(-Pu.x,-Pu.y,-Pu.z),Lu.multiplyMatrices(Tu.projectionMatrix,Tu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lu)}});function PointLight(_u,$u,Tu,Cu){Light.call(this,_u,$u),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Pu){this.intensity=Pu/(4*Math.PI)}}),this.distance=Tu!==void 0?Tu:0,this.decay=Cu!==void 0?Cu:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.distance=_u.distance,this.decay=_u.decay,this.shadow=_u.shadow.clone(),this}});function OrthographicCamera(_u,$u,Tu,Cu,Pu,Bu){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_u!==void 0?_u:-1,this.right=$u!==void 0?$u:1,this.top=Tu!==void 0?Tu:1,this.bottom=Cu!==void 0?Cu:-1,this.near=Pu!==void 0?Pu:.1,this.far=Bu!==void 0?Bu:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(_u,$u){return Camera.prototype.copy.call(this,_u,$u),this.left=_u.left,this.right=_u.right,this.top=_u.top,this.bottom=_u.bottom,this.near=_u.near,this.far=_u.far,this.zoom=_u.zoom,this.view=_u.view===null?null:Object.assign({},_u.view),this},setViewOffset:function(_u,$u,Tu,Cu,Pu,Bu){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_u,this.view.fullHeight=$u,this.view.offsetX=Tu,this.view.offsetY=Cu,this.view.width=Pu,this.view.height=Bu,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var _u=(this.right-this.left)/(2*this.zoom),$u=(this.top-this.bottom)/(2*this.zoom),Tu=(this.right+this.left)/2,Cu=(this.top+this.bottom)/2,Pu=Tu-_u,Bu=Tu+_u,Lu=Cu+$u,Ru=Cu-$u;if(this.view!==null&&this.view.enabled){var Ou=(this.right-this.left)/this.view.fullWidth/this.zoom,Du=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Pu+=Ou*this.view.offsetX,Bu=Pu+Ou*this.view.width,Lu-=Du*this.view.offsetY,Ru=Lu-Du*this.view.height}this.projectionMatrix.makeOrthographic(Pu,Bu,Lu,Ru,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(_u){var $u=Object3D.prototype.toJSON.call(this,_u);return $u.object.zoom=this.zoom,$u.object.left=this.left,$u.object.right=this.right,$u.object.top=this.top,$u.object.bottom=this.bottom,$u.object.near=this.near,$u.object.far=this.far,this.view!==null&&($u.object.view=Object.assign({},this.view)),$u}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(_u){LightShadow.prototype.updateMatrices.call(this,_u)}});function DirectionalLight(_u,$u){Light.call(this,_u,$u),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.target=_u.target.clone(),this.shadow=_u.shadow.clone(),this}});function AmbientLight(_u,$u){Light.call(this,_u,$u),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(_u,$u,Tu,Cu){Light.call(this,_u,$u),this.type="RectAreaLight",this.width=Tu!==void 0?Tu:10,this.height=Cu!==void 0?Cu:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.width=_u.width,this.height=_u.height,this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.width=this.width,$u.object.height=this.height,$u}});function SphericalHarmonics3(){this.coefficients=[];for(var _u=0;_u<9;_u++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].copy(_u[$u]);return this},zero:function(){for(var _u=0;_u<9;_u++)this.coefficients[_u].set(0,0,0);return this},getAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Bu=this.coefficients;return $u.copy(Bu[0]).multiplyScalar(.282095),$u.addScaledVector(Bu[1],.488603*Cu),$u.addScaledVector(Bu[2],.488603*Pu),$u.addScaledVector(Bu[3],.488603*Tu),$u.addScaledVector(Bu[4],1.092548*(Tu*Cu)),$u.addScaledVector(Bu[5],1.092548*(Cu*Pu)),$u.addScaledVector(Bu[6],.315392*(3*Pu*Pu-1)),$u.addScaledVector(Bu[7],1.092548*(Tu*Pu)),$u.addScaledVector(Bu[8],.546274*(Tu*Tu-Cu*Cu)),$u},getIrradianceAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z,Bu=this.coefficients;return $u.copy(Bu[0]).multiplyScalar(.886227),$u.addScaledVector(Bu[1],2*.511664*Cu),$u.addScaledVector(Bu[2],2*.511664*Pu),$u.addScaledVector(Bu[3],2*.511664*Tu),$u.addScaledVector(Bu[4],2*.429043*Tu*Cu),$u.addScaledVector(Bu[5],2*.429043*Cu*Pu),$u.addScaledVector(Bu[6],.743125*Pu*Pu-.247708),$u.addScaledVector(Bu[7],2*.429043*Tu*Pu),$u.addScaledVector(Bu[8],.429043*(Tu*Tu-Cu*Cu)),$u},add:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].add(_u.coefficients[$u]);return this},addScaledSH:function(_u,$u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].addScaledVector(_u.coefficients[Tu],$u);return this},scale:function(_u){for(var $u=0;$u<9;$u++)this.coefficients[$u].multiplyScalar(_u);return this},lerp:function(_u,$u){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].lerp(_u.coefficients[Tu],$u);return this},equals:function(_u){for(var $u=0;$u<9;$u++)if(!this.coefficients[$u].equals(_u.coefficients[$u]))return!1;return!0},copy:function(_u){return this.set(_u.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(_u,$u){$u===void 0&&($u=0);for(var Tu=this.coefficients,Cu=0;Cu<9;Cu++)Tu[Cu].fromArray(_u,$u+Cu*3);return this},toArray:function(_u,$u){_u===void 0&&(_u=[]),$u===void 0&&($u=0);for(var Tu=this.coefficients,Cu=0;Cu<9;Cu++)Tu[Cu].toArray(_u,$u+Cu*3);return _u}});Object.assign(SphericalHarmonics3,{getBasisAt:function(_u,$u){var Tu=_u.x,Cu=_u.y,Pu=_u.z;$u[0]=.282095,$u[1]=.488603*Cu,$u[2]=.488603*Pu,$u[3]=.488603*Tu,$u[4]=1.092548*Tu*Cu,$u[5]=1.092548*Cu*Pu,$u[6]=.315392*(3*Pu*Pu-1),$u[7]=1.092548*Tu*Pu,$u[8]=.546274*(Tu*Tu-Cu*Cu)}});function LightProbe(_u,$u){Light.call(this,void 0,$u),this.type="LightProbe",this.sh=_u!==void 0?_u:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(_u){return Light.prototype.copy.call(this,_u),this.sh.copy(_u.sh),this},fromJSON:function(_u){return this.intensity=_u.intensity,this.sh.fromArray(_u.sh),this},toJSON:function(_u){var $u=Light.prototype.toJSON.call(this,_u);return $u.object.sh=this.sh.toArray(),$u}});function MaterialLoader(_u){Loader.call(this,_u),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new FileLoader(Pu.manager);Bu.setPath(Pu.path),Bu.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Ru){Cu?Cu(Ru):console.error(Ru),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){var $u=this.textures;function Tu(Ou){return $u[Ou]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Ou),$u[Ou]}var Cu=new Materials[_u.type];if(_u.uuid!==void 0&&(Cu.uuid=_u.uuid),_u.name!==void 0&&(Cu.name=_u.name),_u.color!==void 0&&Cu.color.setHex(_u.color),_u.roughness!==void 0&&(Cu.roughness=_u.roughness),_u.metalness!==void 0&&(Cu.metalness=_u.metalness),_u.sheen!==void 0&&(Cu.sheen=new Color().setHex(_u.sheen)),_u.emissive!==void 0&&Cu.emissive.setHex(_u.emissive),_u.specular!==void 0&&Cu.specular.setHex(_u.specular),_u.shininess!==void 0&&(Cu.shininess=_u.shininess),_u.clearcoat!==void 0&&(Cu.clearcoat=_u.clearcoat),_u.clearcoatRoughness!==void 0&&(Cu.clearcoatRoughness=_u.clearcoatRoughness),_u.fog!==void 0&&(Cu.fog=_u.fog),_u.flatShading!==void 0&&(Cu.flatShading=_u.flatShading),_u.blending!==void 0&&(Cu.blending=_u.blending),_u.combine!==void 0&&(Cu.combine=_u.combine),_u.side!==void 0&&(Cu.side=_u.side),_u.opacity!==void 0&&(Cu.opacity=_u.opacity),_u.transparent!==void 0&&(Cu.transparent=_u.transparent),_u.alphaTest!==void 0&&(Cu.alphaTest=_u.alphaTest),_u.depthTest!==void 0&&(Cu.depthTest=_u.depthTest),_u.depthWrite!==void 0&&(Cu.depthWrite=_u.depthWrite),_u.colorWrite!==void 0&&(Cu.colorWrite=_u.colorWrite),_u.stencilWrite!==void 0&&(Cu.stencilWrite=_u.stencilWrite),_u.stencilWriteMask!==void 0&&(Cu.stencilWriteMask=_u.stencilWriteMask),_u.stencilFunc!==void 0&&(Cu.stencilFunc=_u.stencilFunc),_u.stencilRef!==void 0&&(Cu.stencilRef=_u.stencilRef),_u.stencilFuncMask!==void 0&&(Cu.stencilFuncMask=_u.stencilFuncMask),_u.stencilFail!==void 0&&(Cu.stencilFail=_u.stencilFail),_u.stencilZFail!==void 0&&(Cu.stencilZFail=_u.stencilZFail),_u.stencilZPass!==void 0&&(Cu.stencilZPass=_u.stencilZPass),_u.wireframe!==void 0&&(Cu.wireframe=_u.wireframe),_u.wireframeLinewidth!==void 0&&(Cu.wireframeLinewidth=_u.wireframeLinewidth),_u.wireframeLinecap!==void 0&&(Cu.wireframeLinecap=_u.wireframeLinecap),_u.wireframeLinejoin!==void 0&&(Cu.wireframeLinejoin=_u.wireframeLinejoin),_u.rotation!==void 0&&(Cu.rotation=_u.rotation),_u.linewidth!==1&&(Cu.linewidth=_u.linewidth),_u.dashSize!==void 0&&(Cu.dashSize=_u.dashSize),_u.gapSize!==void 0&&(Cu.gapSize=_u.gapSize),_u.scale!==void 0&&(Cu.scale=_u.scale),_u.polygonOffset!==void 0&&(Cu.polygonOffset=_u.polygonOffset),_u.polygonOffsetFactor!==void 0&&(Cu.polygonOffsetFactor=_u.polygonOffsetFactor),_u.polygonOffsetUnits!==void 0&&(Cu.polygonOffsetUnits=_u.polygonOffsetUnits),_u.skinning!==void 0&&(Cu.skinning=_u.skinning),_u.morphTargets!==void 0&&(Cu.morphTargets=_u.morphTargets),_u.morphNormals!==void 0&&(Cu.morphNormals=_u.morphNormals),_u.dithering!==void 0&&(Cu.dithering=_u.dithering),_u.vertexTangents!==void 0&&(Cu.vertexTangents=_u.vertexTangents),_u.visible!==void 0&&(Cu.visible=_u.visible),_u.toneMapped!==void 0&&(Cu.toneMapped=_u.toneMapped),_u.userData!==void 0&&(Cu.userData=_u.userData),_u.vertexColors!==void 0&&(typeof _u.vertexColors=="number"?Cu.vertexColors=_u.vertexColors>0:Cu.vertexColors=_u.vertexColors),_u.uniforms!==void 0)for(var Pu in _u.uniforms){var Bu=_u.uniforms[Pu];switch(Cu.uniforms[Pu]={},Bu.type){case"t":Cu.uniforms[Pu].value=Tu(Bu.value);break;case"c":Cu.uniforms[Pu].value=new Color().setHex(Bu.value);break;case"v2":Cu.uniforms[Pu].value=new Vector2().fromArray(Bu.value);break;case"v3":Cu.uniforms[Pu].value=new Vector3().fromArray(Bu.value);break;case"v4":Cu.uniforms[Pu].value=new Vector4().fromArray(Bu.value);break;case"m3":Cu.uniforms[Pu].value=new Matrix3().fromArray(Bu.value);case"m4":Cu.uniforms[Pu].value=new Matrix4().fromArray(Bu.value);break;default:Cu.uniforms[Pu].value=Bu.value}}if(_u.defines!==void 0&&(Cu.defines=_u.defines),_u.vertexShader!==void 0&&(Cu.vertexShader=_u.vertexShader),_u.fragmentShader!==void 0&&(Cu.fragmentShader=_u.fragmentShader),_u.extensions!==void 0)for(var Lu in _u.extensions)Cu.extensions[Lu]=_u.extensions[Lu];if(_u.shading!==void 0&&(Cu.flatShading=_u.shading===1),_u.size!==void 0&&(Cu.size=_u.size),_u.sizeAttenuation!==void 0&&(Cu.sizeAttenuation=_u.sizeAttenuation),_u.map!==void 0&&(Cu.map=Tu(_u.map)),_u.matcap!==void 0&&(Cu.matcap=Tu(_u.matcap)),_u.alphaMap!==void 0&&(Cu.alphaMap=Tu(_u.alphaMap)),_u.bumpMap!==void 0&&(Cu.bumpMap=Tu(_u.bumpMap)),_u.bumpScale!==void 0&&(Cu.bumpScale=_u.bumpScale),_u.normalMap!==void 0&&(Cu.normalMap=Tu(_u.normalMap)),_u.normalMapType!==void 0&&(Cu.normalMapType=_u.normalMapType),_u.normalScale!==void 0){var Ru=_u.normalScale;Array.isArray(Ru)===!1&&(Ru=[Ru,Ru]),Cu.normalScale=new Vector2().fromArray(Ru)}return _u.displacementMap!==void 0&&(Cu.displacementMap=Tu(_u.displacementMap)),_u.displacementScale!==void 0&&(Cu.displacementScale=_u.displacementScale),_u.displacementBias!==void 0&&(Cu.displacementBias=_u.displacementBias),_u.roughnessMap!==void 0&&(Cu.roughnessMap=Tu(_u.roughnessMap)),_u.metalnessMap!==void 0&&(Cu.metalnessMap=Tu(_u.metalnessMap)),_u.emissiveMap!==void 0&&(Cu.emissiveMap=Tu(_u.emissiveMap)),_u.emissiveIntensity!==void 0&&(Cu.emissiveIntensity=_u.emissiveIntensity),_u.specularMap!==void 0&&(Cu.specularMap=Tu(_u.specularMap)),_u.envMap!==void 0&&(Cu.envMap=Tu(_u.envMap)),_u.envMapIntensity!==void 0&&(Cu.envMapIntensity=_u.envMapIntensity),_u.reflectivity!==void 0&&(Cu.reflectivity=_u.reflectivity),_u.refractionRatio!==void 0&&(Cu.refractionRatio=_u.refractionRatio),_u.lightMap!==void 0&&(Cu.lightMap=Tu(_u.lightMap)),_u.lightMapIntensity!==void 0&&(Cu.lightMapIntensity=_u.lightMapIntensity),_u.aoMap!==void 0&&(Cu.aoMap=Tu(_u.aoMap)),_u.aoMapIntensity!==void 0&&(Cu.aoMapIntensity=_u.aoMapIntensity),_u.gradientMap!==void 0&&(Cu.gradientMap=Tu(_u.gradientMap)),_u.clearcoatMap!==void 0&&(Cu.clearcoatMap=Tu(_u.clearcoatMap)),_u.clearcoatRoughnessMap!==void 0&&(Cu.clearcoatRoughnessMap=Tu(_u.clearcoatRoughnessMap)),_u.clearcoatNormalMap!==void 0&&(Cu.clearcoatNormalMap=Tu(_u.clearcoatNormalMap)),_u.clearcoatNormalScale!==void 0&&(Cu.clearcoatNormalScale=new Vector2().fromArray(_u.clearcoatNormalScale)),Cu},setTextures:function(_u){return this.textures=_u,this}});var LoaderUtils={decodeText:function(_u){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(_u);for(var $u="",Tu=0,Cu=_u.length;Tu<Cu;Tu++)$u+=String.fromCharCode(_u[Tu]);try{return decodeURIComponent(escape($u))}catch{return $u}},extractUrlBase:function(_u){var $u=_u.lastIndexOf("/");return $u===-1?"./":_u.substr(0,$u+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(_u){return BufferGeometry.prototype.copy.call(this,_u),this.instanceCount=_u.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var _u=BufferGeometry.prototype.toJSON.call(this);return _u.instanceCount=this.instanceCount,_u.isInstancedBufferGeometry=!0,_u}});function InstancedBufferAttribute(_u,$u,Tu,Cu){typeof Tu=="number"&&(Cu=Tu,Tu=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,_u,$u,Tu),this.meshPerAttribute=Cu||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(_u){return BufferAttribute.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this},toJSON:function(){var _u=BufferAttribute.prototype.toJSON.call(this);return _u.meshPerAttribute=this.meshPerAttribute,_u.isInstancedBufferAttribute=!0,_u}});function BufferGeometryLoader(_u){Loader.call(this,_u)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new FileLoader(Pu.manager);Bu.setPath(Pu.path),Bu.load(_u,function(Lu){try{$u(Pu.parse(JSON.parse(Lu)))}catch(Ru){Cu?Cu(Ru):console.error(Ru),Pu.manager.itemError(_u)}},Tu,Cu)},parse:function(_u){var $u=_u.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Tu=_u.data.index;if(Tu!==void 0){var Cu=new TYPED_ARRAYS[Tu.type](Tu.array);$u.setIndex(new BufferAttribute(Cu,1))}var Pu=_u.data.attributes;for(var Bu in Pu){var Lu=Pu[Bu],Cu=new TYPED_ARRAYS[Lu.type](Lu.array),Ru=Lu.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Ou=new Ru(Cu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Ou.name=Lu.name),$u.setAttribute(Bu,Ou)}var Du=_u.data.morphAttributes;if(Du)for(var Bu in Du){for(var Fu=Du[Bu],Vu=[],ku=0,Nu=Fu.length;ku<Nu;ku++){var Lu=Fu[ku],Cu=new TYPED_ARRAYS[Lu.type](Lu.array),Ou=new BufferAttribute(Cu,Lu.itemSize,Lu.normalized);Lu.name!==void 0&&(Ou.name=Lu.name),Vu.push(Ou)}$u.morphAttributes[Bu]=Vu}var Gu=_u.data.morphTargetsRelative;Gu&&($u.morphTargetsRelative=!0);var ju=_u.data.groups||_u.data.drawcalls||_u.data.offsets;if(ju!==void 0)for(var ku=0,Hu=ju.length;ku!==Hu;++ku){var Uu=ju[ku];$u.addGroup(Uu.start,Uu.count,Uu.materialIndex)}var zu=_u.data.boundingSphere;if(zu!==void 0){var Wu=new Vector3;zu.center!==void 0&&Wu.fromArray(zu.center),$u.boundingSphere=new Sphere(Wu,zu.radius)}return _u.name&&($u.name=_u.name),_u.userData&&($u.userData=_u.userData),$u}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(_u){Loader.call(this,_u)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=this.path===""?LoaderUtils.extractUrlBase(_u):this.path;this.resourcePath=this.resourcePath||Bu;var Lu=new FileLoader(Pu.manager);Lu.setPath(this.path),Lu.load(_u,function(Ru){var Ou=null;try{Ou=JSON.parse(Ru)}catch(Fu){Cu!==void 0&&Cu(Fu),console.error("THREE:ObjectLoader: Can't parse "+_u+".",Fu.message);return}var Du=Ou.metadata;if(Du===void 0||Du.type===void 0||Du.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+_u);return}Pu.parse(Ou,$u)},Tu,Cu)},parse:function(_u,$u){var Tu=this.parseShape(_u.shapes),Cu=this.parseGeometries(_u.geometries,Tu),Pu=this.parseImages(_u.images,function(){$u!==void 0&&$u(Ru)}),Bu=this.parseTextures(_u.textures,Pu),Lu=this.parseMaterials(_u.materials,Bu),Ru=this.parseObject(_u.object,Cu,Lu);return _u.animations&&(Ru.animations=this.parseAnimations(_u.animations)),(_u.images===void 0||_u.images.length===0)&&$u!==void 0&&$u(Ru),Ru},parseShape:function(_u){var $u={};if(_u!==void 0)for(var Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=new Shape().fromJSON(_u[Tu]);$u[Pu.uuid]=Pu}return $u},parseGeometries:function(_u,$u){var Tu={};if(_u!==void 0)for(var Cu=new BufferGeometryLoader,Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Lu,Ru=_u[Pu];switch(Ru.type){case"PlaneGeometry":case"PlaneBufferGeometry":Lu=new Geometries[Ru.type](Ru.width,Ru.height,Ru.widthSegments,Ru.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Lu=new Geometries[Ru.type](Ru.width,Ru.height,Ru.depth,Ru.widthSegments,Ru.heightSegments,Ru.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.segments,Ru.thetaStart,Ru.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Lu=new Geometries[Ru.type](Ru.radiusTop,Ru.radiusBottom,Ru.height,Ru.radialSegments,Ru.heightSegments,Ru.openEnded,Ru.thetaStart,Ru.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.height,Ru.radialSegments,Ru.heightSegments,Ru.openEnded,Ru.thetaStart,Ru.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.widthSegments,Ru.heightSegments,Ru.phiStart,Ru.phiLength,Ru.thetaStart,Ru.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.detail);break;case"RingGeometry":case"RingBufferGeometry":Lu=new Geometries[Ru.type](Ru.innerRadius,Ru.outerRadius,Ru.thetaSegments,Ru.phiSegments,Ru.thetaStart,Ru.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.tube,Ru.radialSegments,Ru.tubularSegments,Ru.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Lu=new Geometries[Ru.type](Ru.radius,Ru.tube,Ru.tubularSegments,Ru.radialSegments,Ru.p,Ru.q);break;case"TubeGeometry":case"TubeBufferGeometry":Lu=new Geometries[Ru.type](new Curves[Ru.path.type]().fromJSON(Ru.path),Ru.tubularSegments,Ru.radius,Ru.radialSegments,Ru.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Lu=new Geometries[Ru.type](Ru.points,Ru.segments,Ru.phiStart,Ru.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Lu=new Geometries[Ru.type](Ru.vertices,Ru.indices,Ru.radius,Ru.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Vu=[],Ou=0,Du=Ru.shapes.length;Ou<Du;Ou++){var Fu=$u[Ru.shapes[Ou]];Vu.push(Fu)}Lu=new Geometries[Ru.type](Vu,Ru.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Vu=[],Ou=0,Du=Ru.shapes.length;Ou<Du;Ou++){var Fu=$u[Ru.shapes[Ou]];Vu.push(Fu)}var ku=Ru.options.extrudePath;ku!==void 0&&(Ru.options.extrudePath=new Curves[ku.type]().fromJSON(ku)),Lu=new Geometries[Ru.type](Vu,Ru.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Lu=Cu.parse(Ru);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Ru.type+'"');continue}Lu.uuid=Ru.uuid,Ru.name!==void 0&&(Lu.name=Ru.name),Lu.isBufferGeometry===!0&&Ru.userData!==void 0&&(Lu.userData=Ru.userData),Tu[Ru.uuid]=Lu}return Tu},parseMaterials:function(_u,$u){var Tu={},Cu={};if(_u!==void 0){var Pu=new MaterialLoader;Pu.setTextures($u);for(var Bu=0,Lu=_u.length;Bu<Lu;Bu++){var Ru=_u[Bu];if(Ru.type==="MultiMaterial"){for(var Ou=[],Du=0;Du<Ru.materials.length;Du++){var Fu=Ru.materials[Du];Tu[Fu.uuid]===void 0&&(Tu[Fu.uuid]=Pu.parse(Fu)),Ou.push(Tu[Fu.uuid])}Cu[Ru.uuid]=Ou}else Tu[Ru.uuid]===void 0&&(Tu[Ru.uuid]=Pu.parse(Ru)),Cu[Ru.uuid]=Tu[Ru.uuid]}}return Cu},parseAnimations:function(_u){for(var $u=[],Tu=0;Tu<_u.length;Tu++){var Cu=_u[Tu],Pu=AnimationClip.parse(Cu);Cu.uuid!==void 0&&(Pu.uuid=Cu.uuid),$u.push(Pu)}return $u},parseImages:function(_u,$u){var Tu=this,Cu={};function Pu(ju){return Tu.manager.itemStart(ju),Lu.load(ju,function(){Tu.manager.itemEnd(ju)},void 0,function(){Tu.manager.itemError(ju),Tu.manager.itemEnd(ju)})}if(_u!==void 0&&_u.length>0){var Bu=new LoadingManager($u),Lu=new ImageLoader(Bu);Lu.setCrossOrigin(this.crossOrigin);for(var Ru=0,Ou=_u.length;Ru<Ou;Ru++){var Du=_u[Ru],Fu=Du.url;if(Array.isArray(Fu)){Cu[Du.uuid]=[];for(var Vu=0,ku=Fu.length;Vu<ku;Vu++){var Nu=Fu[Vu],Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Nu)?Nu:Tu.resourcePath+Nu;Cu[Du.uuid].push(Pu(Gu))}}else{var Gu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Du.url)?Du.url:Tu.resourcePath+Du.url;Cu[Du.uuid]=Pu(Gu)}}}return Cu},parseTextures:function(_u,$u){function Tu(Ou,Du){return typeof Ou=="number"?Ou:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ou),Du[Ou])}var Cu={};if(_u!==void 0)for(var Pu=0,Bu=_u.length;Pu<Bu;Pu++){var Lu=_u[Pu];Lu.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Lu.uuid),$u[Lu.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Lu.image);var Ru;Array.isArray($u[Lu.image])?Ru=new CubeTexture($u[Lu.image]):Ru=new Texture($u[Lu.image]),Ru.needsUpdate=!0,Ru.uuid=Lu.uuid,Lu.name!==void 0&&(Ru.name=Lu.name),Lu.mapping!==void 0&&(Ru.mapping=Tu(Lu.mapping,TEXTURE_MAPPING)),Lu.offset!==void 0&&Ru.offset.fromArray(Lu.offset),Lu.repeat!==void 0&&Ru.repeat.fromArray(Lu.repeat),Lu.center!==void 0&&Ru.center.fromArray(Lu.center),Lu.rotation!==void 0&&(Ru.rotation=Lu.rotation),Lu.wrap!==void 0&&(Ru.wrapS=Tu(Lu.wrap[0],TEXTURE_WRAPPING),Ru.wrapT=Tu(Lu.wrap[1],TEXTURE_WRAPPING)),Lu.format!==void 0&&(Ru.format=Lu.format),Lu.type!==void 0&&(Ru.type=Lu.type),Lu.encoding!==void 0&&(Ru.encoding=Lu.encoding),Lu.minFilter!==void 0&&(Ru.minFilter=Tu(Lu.minFilter,TEXTURE_FILTER)),Lu.magFilter!==void 0&&(Ru.magFilter=Tu(Lu.magFilter,TEXTURE_FILTER)),Lu.anisotropy!==void 0&&(Ru.anisotropy=Lu.anisotropy),Lu.flipY!==void 0&&(Ru.flipY=Lu.flipY),Lu.premultiplyAlpha!==void 0&&(Ru.premultiplyAlpha=Lu.premultiplyAlpha),Lu.unpackAlignment!==void 0&&(Ru.unpackAlignment=Lu.unpackAlignment),Cu[Lu.uuid]=Ru}return Cu},parseObject:function(_u,$u,Tu){var Cu;function Pu(Hu){return $u[Hu]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Hu),$u[Hu]}function Bu(Hu){if(Hu!==void 0){if(Array.isArray(Hu)){for(var Uu=[],zu=0,Wu=Hu.length;zu<Wu;zu++){var Qu=Hu[zu];Tu[Qu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Qu),Uu.push(Tu[Qu])}return Uu}return Tu[Hu]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Hu),Tu[Hu]}}switch(_u.type){case"Scene":Cu=new Scene,_u.background!==void 0&&Number.isInteger(_u.background)&&(Cu.background=new Color(_u.background)),_u.fog!==void 0&&(_u.fog.type==="Fog"?Cu.fog=new Fog(_u.fog.color,_u.fog.near,_u.fog.far):_u.fog.type==="FogExp2"&&(Cu.fog=new FogExp2(_u.fog.color,_u.fog.density)));break;case"PerspectiveCamera":Cu=new PerspectiveCamera(_u.fov,_u.aspect,_u.near,_u.far),_u.focus!==void 0&&(Cu.focus=_u.focus),_u.zoom!==void 0&&(Cu.zoom=_u.zoom),_u.filmGauge!==void 0&&(Cu.filmGauge=_u.filmGauge),_u.filmOffset!==void 0&&(Cu.filmOffset=_u.filmOffset),_u.view!==void 0&&(Cu.view=Object.assign({},_u.view));break;case"OrthographicCamera":Cu=new OrthographicCamera(_u.left,_u.right,_u.top,_u.bottom,_u.near,_u.far),_u.zoom!==void 0&&(Cu.zoom=_u.zoom),_u.view!==void 0&&(Cu.view=Object.assign({},_u.view));break;case"AmbientLight":Cu=new AmbientLight(_u.color,_u.intensity);break;case"DirectionalLight":Cu=new DirectionalLight(_u.color,_u.intensity);break;case"PointLight":Cu=new PointLight(_u.color,_u.intensity,_u.distance,_u.decay);break;case"RectAreaLight":Cu=new RectAreaLight(_u.color,_u.intensity,_u.width,_u.height);break;case"SpotLight":Cu=new SpotLight(_u.color,_u.intensity,_u.distance,_u.angle,_u.penumbra,_u.decay);break;case"HemisphereLight":Cu=new HemisphereLight(_u.color,_u.groundColor,_u.intensity);break;case"LightProbe":Cu=new LightProbe().fromJSON(_u);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Lu=Pu(_u.geometry),Ru=Bu(_u.material);Cu=new Mesh(Lu,Ru);break;case"InstancedMesh":var Lu=Pu(_u.geometry),Ru=Bu(_u.material),Ou=_u.count,Du=_u.instanceMatrix;Cu=new InstancedMesh(Lu,Ru,Ou),Cu.instanceMatrix=new BufferAttribute(new Float32Array(Du.array),16);break;case"LOD":Cu=new LOD;break;case"Line":Cu=new Line$1(Pu(_u.geometry),Bu(_u.material),_u.mode);break;case"LineLoop":Cu=new LineLoop(Pu(_u.geometry),Bu(_u.material));break;case"LineSegments":Cu=new LineSegments(Pu(_u.geometry),Bu(_u.material));break;case"PointCloud":case"Points":Cu=new Points(Pu(_u.geometry),Bu(_u.material));break;case"Sprite":Cu=new Sprite(Bu(_u.material));break;case"Group":Cu=new Group$1;break;default:Cu=new Object3D}if(Cu.uuid=_u.uuid,_u.name!==void 0&&(Cu.name=_u.name),_u.matrix!==void 0?(Cu.matrix.fromArray(_u.matrix),_u.matrixAutoUpdate!==void 0&&(Cu.matrixAutoUpdate=_u.matrixAutoUpdate),Cu.matrixAutoUpdate&&Cu.matrix.decompose(Cu.position,Cu.quaternion,Cu.scale)):(_u.position!==void 0&&Cu.position.fromArray(_u.position),_u.rotation!==void 0&&Cu.rotation.fromArray(_u.rotation),_u.quaternion!==void 0&&Cu.quaternion.fromArray(_u.quaternion),_u.scale!==void 0&&Cu.scale.fromArray(_u.scale)),_u.castShadow!==void 0&&(Cu.castShadow=_u.castShadow),_u.receiveShadow!==void 0&&(Cu.receiveShadow=_u.receiveShadow),_u.shadow&&(_u.shadow.bias!==void 0&&(Cu.shadow.bias=_u.shadow.bias),_u.shadow.radius!==void 0&&(Cu.shadow.radius=_u.shadow.radius),_u.shadow.mapSize!==void 0&&Cu.shadow.mapSize.fromArray(_u.shadow.mapSize),_u.shadow.camera!==void 0&&(Cu.shadow.camera=this.parseObject(_u.shadow.camera))),_u.visible!==void 0&&(Cu.visible=_u.visible),_u.frustumCulled!==void 0&&(Cu.frustumCulled=_u.frustumCulled),_u.renderOrder!==void 0&&(Cu.renderOrder=_u.renderOrder),_u.userData!==void 0&&(Cu.userData=_u.userData),_u.layers!==void 0&&(Cu.layers.mask=_u.layers),_u.children!==void 0)for(var Fu=_u.children,Vu=0;Vu<Fu.length;Vu++)Cu.add(this.parseObject(Fu[Vu],$u,Tu));if(_u.type==="LOD"){_u.autoUpdate!==void 0&&(Cu.autoUpdate=_u.autoUpdate);for(var ku=_u.levels,Nu=0;Nu<ku.length;Nu++){var Gu=ku[Nu],ju=Cu.getObjectByProperty("uuid",Gu.object);ju!==void 0&&Cu.addLevel(ju,Gu.distance)}}return Cu}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(_u){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,_u),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function($u){return this.options=$u,this},load:function(_u,$u,Tu,Cu){_u===void 0&&(_u=""),this.path!==void 0&&(_u=this.path+_u),_u=this.manager.resolveURL(_u);var Pu=this,Bu=Cache.get(_u);if(Bu!==void 0)return Pu.manager.itemStart(_u),setTimeout(function(){$u&&$u(Bu),Pu.manager.itemEnd(_u)},0),Bu;fetch(_u).then(function(Lu){return Lu.blob()}).then(function(Lu){return Pu.options===void 0?createImageBitmap(Lu):createImageBitmap(Lu,Pu.options)}).then(function(Lu){Cache.add(_u,Lu),$u&&$u(Lu),Pu.manager.itemEnd(_u)}).catch(function(Lu){Cu&&Cu(Lu),Pu.manager.itemError(_u),Pu.manager.itemEnd(_u)}),Pu.manager.itemStart(_u)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(_u,$u){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_u,$u),this},lineTo:function(_u,$u){return this.currentPath.lineTo(_u,$u),this},quadraticCurveTo:function(_u,$u,Tu,Cu){return this.currentPath.quadraticCurveTo(_u,$u,Tu,Cu),this},bezierCurveTo:function(_u,$u,Tu,Cu,Pu,Bu){return this.currentPath.bezierCurveTo(_u,$u,Tu,Cu,Pu,Bu),this},splineThru:function(_u){return this.currentPath.splineThru(_u),this},toShapes:function(_u,$u){function Tu(_h){for(var ep=[],tp=0,rp=_h.length;tp<rp;tp++){var dp=_h[tp],cp=new Shape;cp.curves=dp.curves,ep.push(cp)}return ep}function Cu(_h,ep){for(var tp=ep.length,rp=!1,dp=tp-1,cp=0;cp<tp;dp=cp++){var Sp=ep[dp],yp=ep[cp],Bp=yp.x-Sp.x,_p=yp.y-Sp.y;if(Math.abs(_p)>Number.EPSILON){if(_p<0&&(Sp=ep[cp],Bp=-Bp,yp=ep[dp],_p=-_p),_h.y<Sp.y||_h.y>yp.y)continue;if(_h.y===Sp.y){if(_h.x===Sp.x)return!0}else{var Cp=_p*(_h.x-Sp.x)-Bp*(_h.y-Sp.y);if(Cp===0)return!0;if(Cp<0)continue;rp=!rp}}else{if(_h.y!==Sp.y)continue;if(yp.x<=_h.x&&_h.x<=Sp.x||Sp.x<=_h.x&&_h.x<=yp.x)return!0}}return rp}var Pu=ShapeUtils.isClockWise,Bu=this.subPaths;if(Bu.length===0)return[];if($u===!0)return Tu(Bu);var Lu,Ru,Ou,Du=[];if(Bu.length===1)return Ru=Bu[0],Ou=new Shape,Ou.curves=Ru.curves,Du.push(Ou),Du;var Fu=!Pu(Bu[0].getPoints());Fu=_u?!Fu:Fu;var Vu=[],ku=[],Nu=[],Gu=0,ju;ku[Gu]=void 0,Nu[Gu]=[];for(var Hu=0,Uu=Bu.length;Hu<Uu;Hu++)Ru=Bu[Hu],ju=Ru.getPoints(),Lu=Pu(ju),Lu=_u?!Lu:Lu,Lu?(!Fu&&ku[Gu]&&Gu++,ku[Gu]={s:new Shape,p:ju},ku[Gu].s.curves=Ru.curves,Fu&&Gu++,Nu[Gu]=[]):Nu[Gu].push({h:Ru,p:ju[0]});if(!ku[0])return Tu(Bu);if(ku.length>1){for(var zu=!1,Wu=[],Qu=0,Ku=ku.length;Qu<Ku;Qu++)Vu[Qu]=[];for(var Qu=0,Ku=ku.length;Qu<Ku;Qu++)for(var Yu=Nu[Qu],Xc=0;Xc<Yu.length;Xc++){for(var _d=Yu[Xc],_f=!0,qu=0;qu<ku.length;qu++)Cu(_d.p,ku[qu].p)&&(Qu!==qu&&Wu.push({froms:Qu,tos:qu,hole:Xc}),_f?(_f=!1,Vu[qu].push(_d)):zu=!0);_f&&Vu[Qu].push(_d)}Wu.length>0&&(zu||(Nu=Vu))}for(var Xu,Hu=0,Zu=ku.length;Hu<Zu;Hu++){Ou=ku[Hu].s,Du.push(Ou),Xu=Nu[Hu];for(var _c=0,Ju=Xu.length;_c<Ju;_c++)Ou.holes.push(Xu[_c].h)}return Du}});function Font(_u){this.type="Font",this.data=_u}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(_u,$u){$u===void 0&&($u=100);for(var Tu=[],Cu=createPaths(_u,$u,this.data),Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Array.prototype.push.apply(Tu,Cu[Pu].toShapes());return Tu}});function createPaths(_u,$u,Tu){for(var Cu=Array.from?Array.from(_u):String(_u).split(""),Pu=$u/Tu.resolution,Bu=(Tu.boundingBox.yMax-Tu.boundingBox.yMin+Tu.underlineThickness)*Pu,Lu=[],Ru=0,Ou=0,Du=0;Du<Cu.length;Du++){var Fu=Cu[Du];if(Fu===`
`)Ru=0,Ou-=Bu;else{var Vu=createPath(Fu,Pu,Ru,Ou,Tu);Ru+=Vu.offsetX,Lu.push(Vu.path)}}return Lu}function createPath(_u,$u,Tu,Cu,Pu){var Bu=Pu.glyphs[_u]||Pu.glyphs["?"];if(!Bu){console.error('THREE.Font: character "'+_u+'" does not exists in font family '+Pu.familyName+".");return}var Lu=new ShapePath,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu;if(Bu.o)for(var ju=Bu._cachedOutline||(Bu._cachedOutline=Bu.o.split(" ")),Hu=0,Uu=ju.length;Hu<Uu;){var zu=ju[Hu++];switch(zu){case"m":Ru=ju[Hu++]*$u+Tu,Ou=ju[Hu++]*$u+Cu,Lu.moveTo(Ru,Ou);break;case"l":Ru=ju[Hu++]*$u+Tu,Ou=ju[Hu++]*$u+Cu,Lu.lineTo(Ru,Ou);break;case"q":Du=ju[Hu++]*$u+Tu,Fu=ju[Hu++]*$u+Cu,Vu=ju[Hu++]*$u+Tu,ku=ju[Hu++]*$u+Cu,Lu.quadraticCurveTo(Vu,ku,Du,Fu);break;case"b":Du=ju[Hu++]*$u+Tu,Fu=ju[Hu++]*$u+Cu,Vu=ju[Hu++]*$u+Tu,ku=ju[Hu++]*$u+Cu,Nu=ju[Hu++]*$u+Tu,Gu=ju[Hu++]*$u+Cu,Lu.bezierCurveTo(Vu,ku,Nu,Gu,Du,Fu);break}}return{offsetX:Bu.ha*$u,path:Lu}}function FontLoader(_u){Loader.call(this,_u)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new FileLoader(this.manager);Bu.setPath(this.path),Bu.load(_u,function(Lu){var Ru;try{Ru=JSON.parse(Lu)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Ru=JSON.parse(Lu.substring(65,Lu.length-2))}var Ou=Pu.parse(Ru);$u&&$u(Ou)},Tu,Cu)},parse:function(_u){return new Font(_u)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(_u){_context=_u}};function AudioLoader(_u){Loader.call(this,_u)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(_u,$u,Tu,Cu){var Pu=this,Bu=new FileLoader(Pu.manager);Bu.setResponseType("arraybuffer"),Bu.setPath(Pu.path),Bu.load(_u,function(Lu){try{var Ru=Lu.slice(0),Ou=AudioContext.getContext();Ou.decodeAudioData(Ru,function(Du){$u(Du)})}catch(Du){Cu?Cu(Du):console.error(Du),Pu.manager.itemError(_u)}},Tu,Cu)}});function HemisphereLightProbe(_u,$u,Tu){LightProbe.call(this,void 0,Tu);var Cu=new Color().set(_u),Pu=new Color().set($u),Bu=new Vector3(Cu.r,Cu.g,Cu.b),Lu=new Vector3(Pu.r,Pu.g,Pu.b),Ru=Math.sqrt(Math.PI),Ou=Ru*Math.sqrt(.75);this.sh.coefficients[0].copy(Bu).add(Lu).multiplyScalar(Ru),this.sh.coefficients[1].copy(Bu).sub(Lu).multiplyScalar(Ou)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});function AmbientLightProbe(_u,$u){LightProbe.call(this,void 0,$u);var Tu=new Color().set(_u);this.sh.coefficients[0].set(Tu.r,Tu.g,Tu.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(_u){return LightProbe.prototype.copy.call(this,_u),this},toJSON:function(_u){var $u=LightProbe.prototype.toJSON.call(this,_u);return $u}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(_u){var $u=this._cache,Tu=$u.focus!==_u.focus||$u.fov!==_u.fov||$u.aspect!==_u.aspect*this.aspect||$u.near!==_u.near||$u.far!==_u.far||$u.zoom!==_u.zoom||$u.eyeSep!==this.eyeSep;if(Tu){$u.focus=_u.focus,$u.fov=_u.fov,$u.aspect=_u.aspect*this.aspect,$u.near=_u.near,$u.far=_u.far,$u.zoom=_u.zoom,$u.eyeSep=this.eyeSep;var Cu=_u.projectionMatrix.clone(),Pu=$u.eyeSep/2,Bu=Pu*$u.near/$u.focus,Lu=$u.near*Math.tan(MathUtils.DEG2RAD*$u.fov*.5)/$u.zoom,Ru,Ou;_eyeLeft.elements[12]=-Pu,_eyeRight.elements[12]=Pu,Ru=-Lu*$u.aspect+Bu,Ou=Lu*$u.aspect+Bu,Cu.elements[0]=2*$u.near/(Ou-Ru),Cu.elements[8]=(Ou+Ru)/(Ou-Ru),this.cameraL.projectionMatrix.copy(Cu),Ru=-Lu*$u.aspect-Bu,Ou=Lu*$u.aspect-Bu,Cu.elements[0]=2*$u.near/(Ou-Ru),Cu.elements[8]=(Ou+Ru)/(Ou-Ru),this.cameraR.projectionMatrix.copy(Cu)}this.cameraL.matrixWorld.copy(_u.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_u.matrixWorld).multiply(_eyeRight)}});function Clock(_u){this.autoStart=_u!==void 0?_u:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var _u=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $u=(typeof performance=="undefined"?Date:performance).now();_u=($u-this.oldTime)/1e3,this.oldTime=$u,this.elapsedTime+=_u}return _u}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(_u){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_u,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this},updateMatrixWorld:function(_u){Object3D.prototype.updateMatrixWorld.call(this,_u);var $u=this.context.listener,Tu=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),$u.positionX){var Cu=this.context.currentTime+this.timeDelta;$u.positionX.linearRampToValueAtTime(_position$2.x,Cu),$u.positionY.linearRampToValueAtTime(_position$2.y,Cu),$u.positionZ.linearRampToValueAtTime(_position$2.z,Cu),$u.forwardX.linearRampToValueAtTime(_orientation.x,Cu),$u.forwardY.linearRampToValueAtTime(_orientation.y,Cu),$u.forwardZ.linearRampToValueAtTime(_orientation.z,Cu),$u.upX.linearRampToValueAtTime(Tu.x,Cu),$u.upY.linearRampToValueAtTime(Tu.y,Cu),$u.upZ.linearRampToValueAtTime(Tu.z,Cu)}else $u.setPosition(_position$2.x,_position$2.y,_position$2.z),$u.setOrientation(_orientation.x,_orientation.y,_orientation.z,Tu.x,Tu.y,Tu.z)}});function Audio$1(_u){Object3D.call(this),this.type="Audio",this.listener=_u,this.context=_u.context,this.gain=this.context.createGain(),this.gain.connect(_u.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_u,this.connect(),this},setMediaElementSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_u),this.connect(),this},setMediaStreamSource:function(_u){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_u),this.connect(),this},setBuffer:function(_u){return this.buffer=_u,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(_u){if(_u===void 0&&(_u=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_u;var $u=this.context.createBufferSource();return $u.buffer=this.buffer,$u.loop=this.loop,$u.loopStart=this.loopStart,$u.loopEnd=this.loopEnd,$u.onended=this.onEnded.bind(this),$u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=$u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].connect(this.filters[_u]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var _u=1,$u=this.filters.length;_u<$u;_u++)this.filters[_u-1].disconnect(this.filters[_u]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(_u){return _u||(_u=[]),this.isPlaying===!0?(this.disconnect(),this.filters=_u,this.connect()):this.filters=_u,this},setDetune:function(_u){if(this.detune=_u,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(_u){return this.setFilters(_u?[_u]:[])},setPlaybackRate:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_u,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(_u){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_u,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(_u){return this.loopStart=_u,this},setLoopEnd:function(_u){return this.loopEnd=_u,this},getVolume:function(){return this.gain.gain.value},setVolume:function(_u){return this.gain.gain.setTargetAtTime(_u,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(_u){Audio$1.call(this,_u),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(_u){return this.panner.refDistance=_u,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(_u){return this.panner.rolloffFactor=_u,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(_u){return this.panner.distanceModel=_u,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(_u){return this.panner.maxDistance=_u,this},setDirectionalCone:function(_u,$u,Tu){return this.panner.coneInnerAngle=_u,this.panner.coneOuterAngle=$u,this.panner.coneOuterGain=Tu,this},updateMatrixWorld:function(_u){if(Object3D.prototype.updateMatrixWorld.call(this,_u),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var $u=this.panner;if($u.positionX){var Tu=this.context.currentTime+this.listener.timeDelta;$u.positionX.linearRampToValueAtTime(_position$3.x,Tu),$u.positionY.linearRampToValueAtTime(_position$3.y,Tu),$u.positionZ.linearRampToValueAtTime(_position$3.z,Tu),$u.orientationX.linearRampToValueAtTime(_orientation$1.x,Tu),$u.orientationY.linearRampToValueAtTime(_orientation$1.y,Tu),$u.orientationZ.linearRampToValueAtTime(_orientation$1.z,Tu)}else $u.setPosition(_position$3.x,_position$3.y,_position$3.z),$u.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(_u,$u){this.analyser=_u.context.createAnalyser(),this.analyser.fftSize=$u!==void 0?$u:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),_u.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var _u=0,$u=this.getFrequencyData(),Tu=0;Tu<$u.length;Tu++)_u+=$u[Tu];return _u/$u.length}});function PropertyMixer(_u,$u,Tu){this.binding=_u,this.valueSize=Tu;var Cu,Pu,Bu;switch($u){case"quaternion":Cu=this._slerp,Pu=this._slerpAdditive,Bu=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Tu*6),this._workIndex=5;break;case"string":case"bool":Cu=this._select,Pu=this._select,Bu=this._setAdditiveIdentityOther,this.buffer=new Array(Tu*5);break;default:Cu=this._lerp,Pu=this._lerpAdditive,Bu=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Tu*5)}this._mixBufferRegion=Cu,this._mixBufferRegionAdditive=Pu,this._setIdentity=Bu,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(_u,$u){var Tu=this.buffer,Cu=this.valueSize,Pu=_u*Cu+Cu,Bu=this.cumulativeWeight;if(Bu===0){for(var Lu=0;Lu!==Cu;++Lu)Tu[Pu+Lu]=Tu[Lu];Bu=$u}else{Bu+=$u;var Ru=$u/Bu;this._mixBufferRegion(Tu,Pu,0,Ru,Cu)}this.cumulativeWeight=Bu},accumulateAdditive:function(_u){var $u=this.buffer,Tu=this.valueSize,Cu=Tu*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive($u,Cu,0,_u,Tu),this.cumulativeWeightAdditive+=_u},apply:function(_u){var $u=this.valueSize,Tu=this.buffer,Cu=_u*$u+$u,Pu=this.cumulativeWeight,Bu=this.cumulativeWeightAdditive,Lu=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Pu<1){var Ru=$u*this._origIndex;this._mixBufferRegion(Tu,Cu,Ru,1-Pu,$u)}Bu>0&&this._mixBufferRegionAdditive(Tu,Cu,this._addIndex*$u,1,$u);for(var Ou=$u,Du=$u+$u;Ou!==Du;++Ou)if(Tu[Ou]!==Tu[Ou+$u]){Lu.setValue(Tu,Cu);break}},saveOriginalState:function(){var _u=this.binding,$u=this.buffer,Tu=this.valueSize,Cu=Tu*this._origIndex;_u.getValue($u,Cu);for(var Pu=Tu,Bu=Cu;Pu!==Bu;++Pu)$u[Pu]=$u[Cu+Pu%Tu];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var _u=this.valueSize*3;this.binding.setValue(this.buffer,_u)},_setAdditiveIdentityNumeric:function(){for(var _u=this._addIndex*this.valueSize,$u=_u+this.valueSize,Tu=_u;Tu<$u;Tu++)this.buffer[Tu]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var _u=this._origIndex*this.valueSize,$u=this._addIndex*this.valueSize,Tu=0;Tu<this.valueSize;Tu++)this.buffer[$u+Tu]=this.buffer[_u+Tu]},_select:function(_u,$u,Tu,Cu,Pu){if(Cu>=.5)for(var Bu=0;Bu!==Pu;++Bu)_u[$u+Bu]=_u[Tu+Bu]},_slerp:function(_u,$u,Tu,Cu){Quaternion.slerpFlat(_u,$u,_u,$u,_u,Tu,Cu)},_slerpAdditive:function(_u,$u,Tu,Cu,Pu){var Bu=this._workIndex*Pu;Quaternion.multiplyQuaternionsFlat(_u,Bu,_u,$u,_u,Tu),Quaternion.slerpFlat(_u,$u,_u,$u,_u,Bu,Cu)},_lerp:function(_u,$u,Tu,Cu,Pu){for(var Bu=1-Cu,Lu=0;Lu!==Pu;++Lu){var Ru=$u+Lu;_u[Ru]=_u[Ru]*Bu+_u[Tu+Lu]*Cu}},_lerpAdditive:function(_u,$u,Tu,Cu,Pu){for(var Bu=0;Bu!==Pu;++Bu){var Lu=$u+Bu;_u[Lu]=_u[Lu]+_u[Tu+Bu]*Cu}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(_u,$u,Tu){var Cu=Tu||PropertyBinding.parseTrackName($u);this._targetGroup=_u,this._bindings=_u.subscribe_($u,Cu)}Object.assign(Composite.prototype,{getValue:function(_u,$u){this.bind();var Tu=this._targetGroup.nCachedObjects_,Cu=this._bindings[Tu];Cu!==void 0&&Cu.getValue(_u,$u)},setValue:function(_u,$u){for(var Tu=this._bindings,Cu=this._targetGroup.nCachedObjects_,Pu=Tu.length;Cu!==Pu;++Cu)Tu[Cu].setValue(_u,$u)},bind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Tu=_u.length;$u!==Tu;++$u)_u[$u].bind()},unbind:function(){for(var _u=this._bindings,$u=this._targetGroup.nCachedObjects_,Tu=_u.length;$u!==Tu;++$u)_u[$u].unbind()}});function PropertyBinding(_u,$u,Tu){this.path=$u,this.parsedPath=Tu||PropertyBinding.parseTrackName($u),this.node=PropertyBinding.findNode(_u,this.parsedPath.nodeName)||_u,this.rootNode=_u}Object.assign(PropertyBinding,{Composite,create:function(_u,$u,Tu){return _u&&_u.isAnimationObjectGroup?new PropertyBinding.Composite(_u,$u,Tu):new PropertyBinding(_u,$u,Tu)},sanitizeNodeName:function(_u){return _u.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(_u){var $u=_trackRe.exec(_u);if(!$u)throw new Error("PropertyBinding: Cannot parse trackName: "+_u);var Tu={nodeName:$u[2],objectName:$u[3],objectIndex:$u[4],propertyName:$u[5],propertyIndex:$u[6]},Cu=Tu.nodeName&&Tu.nodeName.lastIndexOf(".");if(Cu!==void 0&&Cu!==-1){var Pu=Tu.nodeName.substring(Cu+1);_supportedObjectNames.indexOf(Pu)!==-1&&(Tu.nodeName=Tu.nodeName.substring(0,Cu),Tu.objectName=Pu)}if(Tu.propertyName===null||Tu.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_u);return Tu},findNode:function(_u,$u){if(!$u||$u===""||$u==="."||$u===-1||$u===_u.name||$u===_u.uuid)return _u;if(_u.skeleton){var Tu=_u.skeleton.getBoneByName($u);if(Tu!==void 0)return Tu}if(_u.children){var Cu=function(Bu){for(var Lu=0;Lu<Bu.length;Lu++){var Ru=Bu[Lu];if(Ru.name===$u||Ru.uuid===$u)return Ru;var Ou=Cu(Ru.children);if(Ou)return Ou}return null},Pu=Cu(_u.children);if(Pu)return Pu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function($u,Tu){$u[Tu]=this.node[this.propertyName]},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu)$u[Tu++]=Cu[Pu]},function($u,Tu){$u[Tu]=this.resolvedProperty[this.propertyIndex]},function($u,Tu){this.resolvedProperty.toArray($u,Tu)}],SetterByBindingTypeAndVersioning:[[function($u,Tu){this.targetObject[this.propertyName]=$u[Tu]},function($u,Tu){this.targetObject[this.propertyName]=$u[Tu],this.targetObject.needsUpdate=!0},function($u,Tu){this.targetObject[this.propertyName]=$u[Tu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu)Cu[Pu]=$u[Tu++]},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu)Cu[Pu]=$u[Tu++];this.targetObject.needsUpdate=!0},function($u,Tu){for(var Cu=this.resolvedProperty,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu)Cu[Pu]=$u[Tu++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu]},function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu],this.targetObject.needsUpdate=!0},function($u,Tu){this.resolvedProperty[this.propertyIndex]=$u[Tu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function($u,Tu){this.resolvedProperty.fromArray($u,Tu)},function($u,Tu){this.resolvedProperty.fromArray($u,Tu),this.targetObject.needsUpdate=!0},function($u,Tu){this.resolvedProperty.fromArray($u,Tu),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function($u,Tu){this.bind(),this.getValue($u,Tu)},setValue:function($u,Tu){this.bind(),this.setValue($u,Tu)},bind:function(){var _u=this.node,$u=this.parsedPath,Tu=$u.objectName,Cu=$u.propertyName,Pu=$u.propertyIndex;if(_u||(_u=PropertyBinding.findNode(this.rootNode,$u.nodeName)||this.rootNode,this.node=_u),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_u){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Tu){var Bu=$u.objectIndex;switch(Tu){case"materials":if(!_u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_u=_u.material.materials;break;case"bones":if(!_u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_u=_u.skeleton.bones;for(var Lu=0;Lu<_u.length;Lu++)if(_u[Lu].name===Bu){Bu=Lu;break}break;default:if(_u[Tu]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_u=_u[Tu]}if(Bu!==void 0){if(_u[Bu]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_u);return}_u=_u[Bu]}}var Ru=_u[Cu];if(Ru===void 0){var Ou=$u.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Ou+"."+Cu+" but it wasn't found.",_u);return}var Du=this.Versioning.None;this.targetObject=_u,_u.needsUpdate!==void 0?Du=this.Versioning.NeedsUpdate:_u.matrixWorldNeedsUpdate!==void 0&&(Du=this.Versioning.MatrixWorldNeedsUpdate);var Fu=this.BindingType.Direct;if(Pu!==void 0){if(Cu==="morphTargetInfluences"){if(!_u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(_u.geometry.isBufferGeometry){if(!_u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_u.morphTargetDictionary[Pu]!==void 0&&(Pu=_u.morphTargetDictionary[Pu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Fu=this.BindingType.ArrayElement,this.resolvedProperty=Ru,this.propertyIndex=Pu}else Ru.fromArray!==void 0&&Ru.toArray!==void 0?(Fu=this.BindingType.HasFromToArray,this.resolvedProperty=Ru):Array.isArray(Ru)?(Fu=this.BindingType.EntireArray,this.resolvedProperty=Ru):this.propertyName=Cu;this.getValue=this.GetterByBindingType[Fu],this.setValue=this.SetterByBindingTypeAndVersioning[Fu][Du]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var _u={};this._indicesByUUID=_u;for(var $u=0,Tu=arguments.length;$u!==Tu;++$u)_u[arguments[$u].uuid]=$u;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Cu=this;this.stats={objects:{get total(){return Cu._objects.length},get inUse(){return this.total-Cu.nCachedObjects_}},get bindingsPerObject(){return Cu._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var _u=this._objects,$u=_u.length,Tu=this.nCachedObjects_,Cu=this._indicesByUUID,Pu=this._paths,Bu=this._parsedPaths,Lu=this._bindings,Ru=Lu.length,Ou=void 0,Du=0,Fu=arguments.length;Du!==Fu;++Du){var Vu=arguments[Du],ku=Vu.uuid,Nu=Cu[ku];if(Nu===void 0){Nu=$u++,Cu[ku]=Nu,_u.push(Vu);for(var Gu=0,ju=Ru;Gu!==ju;++Gu)Lu[Gu].push(new PropertyBinding(Vu,Pu[Gu],Bu[Gu]))}else if(Nu<Tu){Ou=_u[Nu];var Hu=--Tu,Uu=_u[Hu];Cu[Uu.uuid]=Nu,_u[Nu]=Uu,Cu[ku]=Hu,_u[Hu]=Vu;for(var Gu=0,ju=Ru;Gu!==ju;++Gu){var zu=Lu[Gu],Wu=zu[Hu],Qu=zu[Nu];zu[Nu]=Wu,Qu===void 0&&(Qu=new PropertyBinding(Vu,Pu[Gu],Bu[Gu])),zu[Hu]=Qu}}else _u[Nu]!==Ou&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Tu},remove:function(){for(var _u=this._objects,$u=this.nCachedObjects_,Tu=this._indicesByUUID,Cu=this._bindings,Pu=Cu.length,Bu=0,Lu=arguments.length;Bu!==Lu;++Bu){var Ru=arguments[Bu],Ou=Ru.uuid,Du=Tu[Ou];if(Du!==void 0&&Du>=$u){var Fu=$u++,Vu=_u[Fu];Tu[Vu.uuid]=Du,_u[Du]=Vu,Tu[Ou]=Fu,_u[Fu]=Ru;for(var ku=0,Nu=Pu;ku!==Nu;++ku){var Gu=Cu[ku],ju=Gu[Fu],Hu=Gu[Du];Gu[Du]=ju,Gu[Fu]=Hu}}}this.nCachedObjects_=$u},uncache:function(){for(var _u=this._objects,$u=_u.length,Tu=this.nCachedObjects_,Cu=this._indicesByUUID,Pu=this._bindings,Bu=Pu.length,Lu=0,Ru=arguments.length;Lu!==Ru;++Lu){var Ou=arguments[Lu],Du=Ou.uuid,Fu=Cu[Du];if(Fu!==void 0)if(delete Cu[Du],Fu<Tu){var Vu=--Tu,ku=_u[Vu],Nu=--$u,Gu=_u[Nu];Cu[ku.uuid]=Fu,_u[Fu]=ku,Cu[Gu.uuid]=Vu,_u[Vu]=Gu,_u.pop();for(var ju=0,Hu=Bu;ju!==Hu;++ju){var Uu=Pu[ju],zu=Uu[Vu],Wu=Uu[Nu];Uu[Fu]=zu,Uu[Vu]=Wu,Uu.pop()}}else{var Nu=--$u,Gu=_u[Nu];Cu[Gu.uuid]=Fu,_u[Fu]=Gu,_u.pop();for(var ju=0,Hu=Bu;ju!==Hu;++ju){var Uu=Pu[ju];Uu[Fu]=Uu[Nu],Uu.pop()}}}this.nCachedObjects_=Tu},subscribe_:function(_u,$u){var Tu=this._bindingsIndicesByPath,Cu=Tu[_u],Pu=this._bindings;if(Cu!==void 0)return Pu[Cu];var Bu=this._paths,Lu=this._parsedPaths,Ru=this._objects,Ou=Ru.length,Du=this.nCachedObjects_,Fu=new Array(Ou);Cu=Pu.length,Tu[_u]=Cu,Bu.push(_u),Lu.push($u),Pu.push(Fu);for(var Vu=Du,ku=Ru.length;Vu!==ku;++Vu){var Nu=Ru[Vu];Fu[Vu]=new PropertyBinding(Nu,_u,$u)}return Fu},unsubscribe_:function(_u){var $u=this._bindingsIndicesByPath,Tu=$u[_u];if(Tu!==void 0){var Cu=this._paths,Pu=this._parsedPaths,Bu=this._bindings,Lu=Bu.length-1,Ru=Bu[Lu],Ou=_u[Lu];$u[Ou]=Tu,Bu[Tu]=Ru,Bu.pop(),Pu[Tu]=Pu[Lu],Pu.pop(),Cu[Tu]=Cu[Lu],Cu.pop()}}});function AnimationAction(_u,$u,Tu,Cu){this._mixer=_u,this._clip=$u,this._localRoot=Tu||null,this.blendMode=Cu||$u.blendMode;for(var Pu=$u.tracks,Bu=Pu.length,Lu=new Array(Bu),Ru={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Ou=0;Ou!==Bu;++Ou){var Du=Pu[Ou].createInterpolant(null);Lu[Ou]=Du,Du.settings=Ru}this._interpolantSettings=Ru,this._interpolants=Lu,this._propertyBindings=new Array(Bu),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(_u){return this._startTime=_u,this},setLoop:function(_u,$u){return this.loop=_u,this.repetitions=$u,this},setEffectiveWeight:function(_u){return this.weight=_u,this._effectiveWeight=this.enabled?_u:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(_u){return this._scheduleFading(_u,0,1)},fadeOut:function(_u){return this._scheduleFading(_u,1,0)},crossFadeFrom:function(_u,$u,Tu){if(_u.fadeOut($u),this.fadeIn($u),Tu){var Cu=this._clip.duration,Pu=_u._clip.duration,Bu=Pu/Cu,Lu=Cu/Pu;_u.warp(1,Bu,$u),this.warp(Lu,1,$u)}return this},crossFadeTo:function(_u,$u,Tu){return _u.crossFadeFrom(this,$u,Tu)},stopFading:function(){var _u=this._weightInterpolant;return _u!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},setEffectiveTimeScale:function(_u){return this.timeScale=_u,this._effectiveTimeScale=this.paused?0:_u,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(_u){return this.timeScale=this._clip.duration/_u,this.stopWarping()},syncWith:function(_u){return this.time=_u.time,this.timeScale=_u.timeScale,this.stopWarping()},halt:function(_u){return this.warp(this._effectiveTimeScale,0,_u)},warp:function(_u,$u,Tu){var Cu=this._mixer,Pu=Cu.time,Bu=this._timeScaleInterpolant,Lu=this.timeScale;Bu===null&&(Bu=Cu._lendControlInterpolant(),this._timeScaleInterpolant=Bu);var Ru=Bu.parameterPositions,Ou=Bu.sampleValues;return Ru[0]=Pu,Ru[1]=Pu+Tu,Ou[0]=_u/Lu,Ou[1]=$u/Lu,this},stopWarping:function(){var _u=this._timeScaleInterpolant;return _u!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_u)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(_u,$u,Tu,Cu){if(!this.enabled){this._updateWeight(_u);return}var Pu=this._startTime;if(Pu!==null){var Bu=(_u-Pu)*Tu;if(Bu<0||Tu===0)return;this._startTime=null,$u=Tu*Bu}$u*=this._updateTimeScale(_u);var Lu=this._updateTime($u),Ru=this._updateWeight(_u);if(Ru>0){var Ou=this._interpolants,Du=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Fu=0,Vu=Ou.length;Fu!==Vu;++Fu)Ou[Fu].evaluate(Lu),Du[Fu].accumulateAdditive(Ru);break;case NormalAnimationBlendMode:default:for(var Fu=0,Vu=Ou.length;Fu!==Vu;++Fu)Ou[Fu].evaluate(Lu),Du[Fu].accumulate(Cu,Ru)}}},_updateWeight:function(_u){var $u=0;if(this.enabled){$u=this.weight;var Tu=this._weightInterpolant;if(Tu!==null){var Cu=Tu.evaluate(_u)[0];$u*=Cu,_u>Tu.parameterPositions[1]&&(this.stopFading(),Cu===0&&(this.enabled=!1))}}return this._effectiveWeight=$u,$u},_updateTimeScale:function(_u){var $u=0;if(!this.paused){$u=this.timeScale;var Tu=this._timeScaleInterpolant;if(Tu!==null){var Cu=Tu.evaluate(_u)[0];$u*=Cu,_u>Tu.parameterPositions[1]&&(this.stopWarping(),$u===0?this.paused=!0:this.timeScale=$u)}}return this._effectiveTimeScale=$u,$u},_updateTime:function(_u){var $u=this.time+_u,Tu=this._clip.duration,Cu=this.loop,Pu=this._loopCount,Bu=Cu===LoopPingPong;if(_u===0)return Pu===-1?$u:Bu&&(Pu&1)===1?Tu-$u:$u;if(Cu===LoopOnce){Pu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if($u>=Tu)$u=Tu;else if($u<0)$u=0;else{this.time=$u;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u<0?-1:1})}}else{if(Pu===-1&&(_u>=0?(Pu=0,this._setEndings(!0,this.repetitions===0,Bu)):this._setEndings(this.repetitions===0,!0,Bu)),$u>=Tu||$u<0){var Lu=Math.floor($u/Tu);$u-=Tu*Lu,Pu+=Math.abs(Lu);var Ru=this.repetitions-Pu;if(Ru<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,$u=_u>0?Tu:0,this.time=$u,this._mixer.dispatchEvent({type:"finished",action:this,direction:_u>0?1:-1});else{if(Ru===1){var Ou=_u<0;this._setEndings(Ou,!Ou,Bu)}else this._setEndings(!1,!1,Bu);this._loopCount=Pu,this.time=$u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Lu})}}else this.time=$u;if(Bu&&(Pu&1)===1)return Tu-$u}return $u},_setEndings:function(_u,$u,Tu){var Cu=this._interpolantSettings;Tu?(Cu.endingStart=ZeroSlopeEnding,Cu.endingEnd=ZeroSlopeEnding):(_u?Cu.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Cu.endingStart=WrapAroundEnding,$u?Cu.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Cu.endingEnd=WrapAroundEnding)},_scheduleFading:function(_u,$u,Tu){var Cu=this._mixer,Pu=Cu.time,Bu=this._weightInterpolant;Bu===null&&(Bu=Cu._lendControlInterpolant(),this._weightInterpolant=Bu);var Lu=Bu.parameterPositions,Ru=Bu.sampleValues;return Lu[0]=Pu,Ru[0]=$u,Lu[1]=Pu+_u,Ru[1]=Tu,this}});function AnimationMixer(_u){this._root=_u,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(_u,$u){var Tu=_u._localRoot||this._root,Cu=_u._clip.tracks,Pu=Cu.length,Bu=_u._propertyBindings,Lu=_u._interpolants,Ru=Tu.uuid,Ou=this._bindingsByRootAndName,Du=Ou[Ru];Du===void 0&&(Du={},Ou[Ru]=Du);for(var Fu=0;Fu!==Pu;++Fu){var Vu=Cu[Fu],ku=Vu.name,Nu=Du[ku];if(Nu!==void 0)Bu[Fu]=Nu;else{if(Nu=Bu[Fu],Nu!==void 0){Nu._cacheIndex===null&&(++Nu.referenceCount,this._addInactiveBinding(Nu,Ru,ku));continue}var Gu=$u&&$u._propertyBindings[Fu].binding.parsedPath;Nu=new PropertyMixer(PropertyBinding.create(Tu,ku,Gu),Vu.ValueTypeName,Vu.getValueSize()),++Nu.referenceCount,this._addInactiveBinding(Nu,Ru,ku),Bu[Fu]=Nu}Lu[Fu].resultBuffer=Nu.buffer}},_activateAction:function(_u){if(!this._isActiveAction(_u)){if(_u._cacheIndex===null){var $u=(_u._localRoot||this._root).uuid,Tu=_u._clip.uuid,Cu=this._actionsByClip[Tu];this._bindAction(_u,Cu&&Cu.knownActions[0]),this._addInactiveAction(_u,Tu,$u)}for(var Pu=_u._propertyBindings,Bu=0,Lu=Pu.length;Bu!==Lu;++Bu){var Ru=Pu[Bu];Ru.useCount++===0&&(this._lendBinding(Ru),Ru.saveOriginalState())}this._lendAction(_u)}},_deactivateAction:function(_u){if(this._isActiveAction(_u)){for(var $u=_u._propertyBindings,Tu=0,Cu=$u.length;Tu!==Cu;++Tu){var Pu=$u[Tu];--Pu.useCount===0&&(Pu.restoreOriginalState(),this._takeBackBinding(Pu))}this._takeBackAction(_u)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var _u=this;this.stats={actions:{get total(){return _u._actions.length},get inUse(){return _u._nActiveActions}},bindings:{get total(){return _u._bindings.length},get inUse(){return _u._nActiveBindings}},controlInterpolants:{get total(){return _u._controlInterpolants.length},get inUse(){return _u._nActiveControlInterpolants}}}},_isActiveAction:function(_u){var $u=_u._cacheIndex;return $u!==null&&$u<this._nActiveActions},_addInactiveAction:function(_u,$u,Tu){var Cu=this._actions,Pu=this._actionsByClip,Bu=Pu[$u];if(Bu===void 0)Bu={knownActions:[_u],actionByRoot:{}},_u._byClipCacheIndex=0,Pu[$u]=Bu;else{var Lu=Bu.knownActions;_u._byClipCacheIndex=Lu.length,Lu.push(_u)}_u._cacheIndex=Cu.length,Cu.push(_u),Bu.actionByRoot[Tu]=_u},_removeInactiveAction:function(_u){var $u=this._actions,Tu=$u[$u.length-1],Cu=_u._cacheIndex;Tu._cacheIndex=Cu,$u[Cu]=Tu,$u.pop(),_u._cacheIndex=null;var Pu=_u._clip.uuid,Bu=this._actionsByClip,Lu=Bu[Pu],Ru=Lu.knownActions,Ou=Ru[Ru.length-1],Du=_u._byClipCacheIndex;Ou._byClipCacheIndex=Du,Ru[Du]=Ou,Ru.pop(),_u._byClipCacheIndex=null;var Fu=Lu.actionByRoot,Vu=(_u._localRoot||this._root).uuid;delete Fu[Vu],Ru.length===0&&delete Bu[Pu],this._removeInactiveBindingsForAction(_u)},_removeInactiveBindingsForAction:function(_u){for(var $u=_u._propertyBindings,Tu=0,Cu=$u.length;Tu!==Cu;++Tu){var Pu=$u[Tu];--Pu.referenceCount===0&&this._removeInactiveBinding(Pu)}},_lendAction:function(_u){var $u=this._actions,Tu=_u._cacheIndex,Cu=this._nActiveActions++,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_takeBackAction:function(_u){var $u=this._actions,Tu=_u._cacheIndex,Cu=--this._nActiveActions,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_addInactiveBinding:function(_u,$u,Tu){var Cu=this._bindingsByRootAndName,Pu=Cu[$u],Bu=this._bindings;Pu===void 0&&(Pu={},Cu[$u]=Pu),Pu[Tu]=_u,_u._cacheIndex=Bu.length,Bu.push(_u)},_removeInactiveBinding:function(_u){var $u=this._bindings,Tu=_u.binding,Cu=Tu.rootNode.uuid,Pu=Tu.path,Bu=this._bindingsByRootAndName,Lu=Bu[Cu],Ru=$u[$u.length-1],Ou=_u._cacheIndex;Ru._cacheIndex=Ou,$u[Ou]=Ru,$u.pop(),delete Lu[Pu],Object.keys(Lu).length===0&&delete Bu[Cu]},_lendBinding:function(_u){var $u=this._bindings,Tu=_u._cacheIndex,Cu=this._nActiveBindings++,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_takeBackBinding:function(_u){var $u=this._bindings,Tu=_u._cacheIndex,Cu=--this._nActiveBindings,Pu=$u[Cu];_u._cacheIndex=Cu,$u[Cu]=_u,Pu._cacheIndex=Tu,$u[Tu]=Pu},_lendControlInterpolant:function(){var _u=this._controlInterpolants,$u=this._nActiveControlInterpolants++,Tu=_u[$u];return Tu===void 0&&(Tu=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Tu.__cacheIndex=$u,_u[$u]=Tu),Tu},_takeBackControlInterpolant:function(_u){var $u=this._controlInterpolants,Tu=_u.__cacheIndex,Cu=--this._nActiveControlInterpolants,Pu=$u[Cu];_u.__cacheIndex=Cu,$u[Cu]=_u,Pu.__cacheIndex=Tu,$u[Tu]=Pu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(_u,$u,Tu){var Cu=$u||this._root,Pu=Cu.uuid,Bu=typeof _u=="string"?AnimationClip.findByName(Cu,_u):_u,Lu=Bu!==null?Bu.uuid:_u,Ru=this._actionsByClip[Lu],Ou=null;if(Tu===void 0&&(Bu!==null?Tu=Bu.blendMode:Tu=NormalAnimationBlendMode),Ru!==void 0){var Du=Ru.actionByRoot[Pu];if(Du!==void 0&&Du.blendMode===Tu)return Du;Ou=Ru.knownActions[0],Bu===null&&(Bu=Ou._clip)}if(Bu===null)return null;var Fu=new AnimationAction(this,Bu,$u,Tu);return this._bindAction(Fu,Ou),this._addInactiveAction(Fu,Lu,Pu),Fu},existingAction:function(_u,$u){var Tu=$u||this._root,Cu=Tu.uuid,Pu=typeof _u=="string"?AnimationClip.findByName(Tu,_u):_u,Bu=Pu?Pu.uuid:_u,Lu=this._actionsByClip[Bu];return Lu!==void 0&&Lu.actionByRoot[Cu]||null},stopAllAction:function(){for(var _u=this._actions,$u=this._nActiveActions,Tu=$u-1;Tu>=0;--Tu)_u[Tu].stop();return this},update:function(_u){_u*=this.timeScale;for(var $u=this._actions,Tu=this._nActiveActions,Cu=this.time+=_u,Pu=Math.sign(_u),Bu=this._accuIndex^=1,Lu=0;Lu!==Tu;++Lu){var Ru=$u[Lu];Ru._update(Cu,_u,Pu,Bu)}for(var Ou=this._bindings,Du=this._nActiveBindings,Lu=0;Lu!==Du;++Lu)Ou[Lu].apply(Bu);return this},setTime:function(_u){this.time=0;for(var $u=0;$u<this._actions.length;$u++)this._actions[$u].time=0;return this.update(_u)},getRoot:function(){return this._root},uncacheClip:function(_u){var $u=this._actions,Tu=_u.uuid,Cu=this._actionsByClip,Pu=Cu[Tu];if(Pu!==void 0){for(var Bu=Pu.knownActions,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu){var Ou=Bu[Lu];this._deactivateAction(Ou);var Du=Ou._cacheIndex,Fu=$u[$u.length-1];Ou._cacheIndex=null,Ou._byClipCacheIndex=null,Fu._cacheIndex=Du,$u[Du]=Fu,$u.pop(),this._removeInactiveBindingsForAction(Ou)}delete Cu[Tu]}},uncacheRoot:function(_u){var $u=_u.uuid,Tu=this._actionsByClip;for(var Cu in Tu){var Pu=Tu[Cu].actionByRoot,Bu=Pu[$u];Bu!==void 0&&(this._deactivateAction(Bu),this._removeInactiveAction(Bu))}var Lu=this._bindingsByRootAndName,Ru=Lu[$u];if(Ru!==void 0)for(var Ou in Ru){var Du=Ru[Ou];Du.restoreOriginalState(),this._removeInactiveBinding(Du)}},uncacheAction:function(_u,$u){var Tu=this.existingAction(_u,$u);Tu!==null&&(this._deactivateAction(Tu),this._removeInactiveAction(Tu))}});function Uniform(_u){typeof _u=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),_u=arguments[1]),this.value=_u}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(_u,$u,Tu){InterleavedBuffer.call(this,_u,$u),this.meshPerAttribute=Tu||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(_u){return InterleavedBuffer.prototype.copy.call(this,_u),this.meshPerAttribute=_u.meshPerAttribute,this}});function Raycaster(_u,$u,Tu,Cu){this.ray=new Ray(_u,$u),this.near=Tu||0,this.far=Cu||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(_u,$u){return _u.distance-$u.distance}function intersectObject(_u,$u,Tu,Cu){if(_u.layers.test($u.layers)&&_u.raycast($u,Tu),Cu===!0)for(var Pu=_u.children,Bu=0,Lu=Pu.length;Bu<Lu;Bu++)intersectObject(Pu[Bu],$u,Tu,!0)}Object.assign(Raycaster.prototype,{set:function(_u,$u){this.ray.set(_u,$u)},setFromCamera:function(_u,$u){$u&&$u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition($u.matrixWorld),this.ray.direction.set(_u.x,_u.y,.5).unproject($u).sub(this.ray.origin).normalize(),this.camera=$u):$u&&$u.isOrthographicCamera?(this.ray.origin.set(_u.x,_u.y,($u.near+$u.far)/($u.near-$u.far)).unproject($u),this.ray.direction.set(0,0,-1).transformDirection($u.matrixWorld),this.camera=$u):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(_u,$u,Tu){var Cu=Tu||[];return intersectObject(_u,this,Cu,$u),Cu.sort(ascSort),Cu},intersectObjects:function(_u,$u,Tu){var Cu=Tu||[];if(Array.isArray(_u)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Cu;for(var Pu=0,Bu=_u.length;Pu<Bu;Pu++)intersectObject(_u[Pu],this,Cu,$u);return Cu.sort(ascSort),Cu}});function Spherical(_u,$u,Tu){return this.radius=_u!==void 0?_u:1,this.phi=$u!==void 0?$u:0,this.theta=Tu!==void 0?Tu:0,this}Object.assign(Spherical.prototype,{set:function(_u,$u,Tu){return this.radius=_u,this.phi=$u,this.theta=Tu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.phi=_u.phi,this.theta=_u.theta,this},makeSafe:function(){var _u=1e-6;return this.phi=Math.max(_u,Math.min(Math.PI-_u,this.phi)),this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Tu){return this.radius=Math.sqrt(_u*_u+$u*$u+Tu*Tu),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_u,Tu),this.phi=Math.acos(MathUtils.clamp($u/this.radius,-1,1))),this}});function Cylindrical(_u,$u,Tu){return this.radius=_u!==void 0?_u:1,this.theta=$u!==void 0?$u:0,this.y=Tu!==void 0?Tu:0,this}Object.assign(Cylindrical.prototype,{set:function(_u,$u,Tu){return this.radius=_u,this.theta=$u,this.y=Tu,this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.radius=_u.radius,this.theta=_u.theta,this.y=_u.y,this},setFromVector3:function(_u){return this.setFromCartesianCoords(_u.x,_u.y,_u.z)},setFromCartesianCoords:function(_u,$u,Tu){return this.radius=Math.sqrt(_u*_u+Tu*Tu),this.theta=Math.atan2(_u,Tu),this.y=$u,this}});var _vector$7=new Vector2;function Box2(_u,$u){this.min=_u!==void 0?_u:new Vector2(1/0,1/0),this.max=$u!==void 0?$u:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(_u,$u){return this.min.copy(_u),this.max.copy($u),this},setFromPoints:function(_u){this.makeEmpty();for(var $u=0,Tu=_u.length;$u<Tu;$u++)this.expandByPoint(_u[$u]);return this},setFromCenterAndSize:function(_u,$u){var Tu=_vector$7.copy($u).multiplyScalar(.5);return this.min.copy(_u).sub(Tu),this.max.copy(_u).add(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.min.copy(_u.min),this.max.copy(_u.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(_u){return _u===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),_u=new Vector2),this.isEmpty()?_u.set(0,0):_u.subVectors(this.max,this.min)},expandByPoint:function(_u){return this.min.min(_u),this.max.max(_u),this},expandByVector:function(_u){return this.min.sub(_u),this.max.add(_u),this},expandByScalar:function(_u){return this.min.addScalar(-_u),this.max.addScalar(_u),this},containsPoint:function(_u){return!(_u.x<this.min.x||_u.x>this.max.x||_u.y<this.min.y||_u.y>this.max.y)},containsBox:function(_u){return this.min.x<=_u.min.x&&_u.max.x<=this.max.x&&this.min.y<=_u.min.y&&_u.max.y<=this.max.y},getParameter:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),$u=new Vector2),$u.set((_u.x-this.min.x)/(this.max.x-this.min.x),(_u.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(_u){return!(_u.max.x<this.min.x||_u.min.x>this.max.x||_u.max.y<this.min.y||_u.min.y>this.max.y)},clampPoint:function(_u,$u){return $u===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),$u=new Vector2),$u.copy(_u).clamp(this.min,this.max)},distanceToPoint:function(_u){var $u=_vector$7.copy(_u).clamp(this.min,this.max);return $u.sub(_u).length()},intersect:function(_u){return this.min.max(_u.min),this.max.min(_u.max),this},union:function(_u){return this.min.min(_u.min),this.max.max(_u.max),this},translate:function(_u){return this.min.add(_u),this.max.add(_u),this},equals:function(_u){return _u.min.equals(this.min)&&_u.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(_u,$u){this.start=_u!==void 0?_u:new Vector3,this.end=$u!==void 0?$u:new Vector3}Object.assign(Line3.prototype,{set:function(_u,$u){return this.start.copy(_u),this.end.copy($u),this},clone:function(){return new this.constructor().copy(this)},copy:function(_u){return this.start.copy(_u.start),this.end.copy(_u.end),this},getCenter:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),_u=new Vector3),_u.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(_u){return _u===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),_u=new Vector3),_u.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(_u,$u){return $u===void 0&&(console.warn("THREE.Line3: .at() target is now required"),$u=new Vector3),this.delta($u).multiplyScalar(_u).add(this.start)},closestPointToPointParameter:function(_u,$u){_startP.subVectors(_u,this.start),_startEnd.subVectors(this.end,this.start);var Tu=_startEnd.dot(_startEnd),Cu=_startEnd.dot(_startP),Pu=Cu/Tu;return $u&&(Pu=MathUtils.clamp(Pu,0,1)),Pu},closestPointToPoint:function(_u,$u,Tu){var Cu=this.closestPointToPointParameter(_u,$u);return Tu===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Tu=new Vector3),this.delta(Tu).multiplyScalar(Cu).add(this.start)},applyMatrix4:function(_u){return this.start.applyMatrix4(_u),this.end.applyMatrix4(_u),this},equals:function(_u){return _u.start.equals(this.start)&&_u.end.equals(this.end)}});function ImmediateRenderObject(_u){Object3D.call(this),this.material=_u,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(_u,$u){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=$u;for(var Tu=new BufferGeometry,Cu=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Pu=0,Bu=1,Lu=32;Pu<Lu;Pu++,Bu++){var Ru=Pu/Lu*Math.PI*2,Ou=Bu/Lu*Math.PI*2;Cu.push(Math.cos(Ru),Math.sin(Ru),1,Math.cos(Ou),Math.sin(Ou),1)}Tu.setAttribute("position",new Float32BufferAttribute(Cu,3));var Du=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Tu,Du),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var _u=this.light.distance?this.light.distance:1e3,$u=_u*Math.tan(this.light.angle);this.cone.scale.set($u,$u,_u),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(_u){var $u=[];_u&&_u.isBone&&$u.push(_u);for(var Tu=0;Tu<_u.children.length;Tu++)$u.push.apply($u,getBoneList(_u.children[Tu]));return $u}function SkeletonHelper(_u){for(var $u=getBoneList(_u),Tu=new BufferGeometry,Cu=[],Pu=[],Bu=new Color(0,0,1),Lu=new Color(0,1,0),Ru=0;Ru<$u.length;Ru++){var Ou=$u[Ru];Ou.parent&&Ou.parent.isBone&&(Cu.push(0,0,0),Cu.push(0,0,0),Pu.push(Bu.r,Bu.g,Bu.b),Pu.push(Lu.r,Lu.g,Lu.b))}Tu.setAttribute("position",new Float32BufferAttribute(Cu,3)),Tu.setAttribute("color",new Float32BufferAttribute(Pu,3));var Du=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Tu,Du),this.type="SkeletonHelper",this.root=_u,this.bones=$u,this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(_u){var $u=this.bones,Tu=this.geometry,Cu=Tu.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Pu=0,Bu=0;Pu<$u.length;Pu++){var Lu=$u[Pu];Lu.parent&&Lu.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Cu.setXYZ(Bu,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Lu.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Cu.setXYZ(Bu+1,_vector$9.x,_vector$9.y,_vector$9.z),Bu+=2)}Tu.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,_u)};function PointLightHelper(_u,$u,Tu){this.light=_u,this.light.updateMatrixWorld(),this.color=Tu;var Cu=new SphereBufferGeometry($u,4,2),Pu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Cu,Pu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(_u,$u,Tu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu;var Cu=new OctahedronBufferGeometry($u);Cu.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Pu=Cu.getAttribute("position"),Bu=new Float32Array(Pu.count*3);Cu.setAttribute("color",new BufferAttribute(Bu,3)),this.add(new Mesh(Cu,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var _u=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var $u=_u.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Tu=0,Cu=$u.count;Tu<Cu;Tu++){var Pu=Tu<Cu/2?_color1:_color2;$u.setXYZ(Tu,Pu.r,Pu.g,Pu.b)}$u.needsUpdate=!0}_u.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(_u,$u,Tu,Cu){_u=_u||10,$u=$u||10,Tu=new Color(Tu!==void 0?Tu:4473924),Cu=new Color(Cu!==void 0?Cu:8947848);for(var Pu=$u/2,Bu=_u/$u,Lu=_u/2,Ru=[],Ou=[],Du=0,Fu=0,Vu=-Lu;Du<=$u;Du++,Vu+=Bu){Ru.push(-Lu,0,Vu,Lu,0,Vu),Ru.push(Vu,0,-Lu,Vu,0,Lu);var ku=Du===Pu?Tu:Cu;ku.toArray(Ou,Fu),Fu+=3,ku.toArray(Ou,Fu),Fu+=3,ku.toArray(Ou,Fu),Fu+=3,ku.toArray(Ou,Fu),Fu+=3}var Nu=new BufferGeometry;Nu.setAttribute("position",new Float32BufferAttribute(Ru,3)),Nu.setAttribute("color",new Float32BufferAttribute(Ou,3));var Gu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Nu,Gu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(_u){return LineSegments.prototype.copy.call(this,_u),this.geometry.copy(_u.geometry),this.material.copy(_u.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(_u,$u,Tu,Cu,Pu,Bu){_u=_u||10,$u=$u||16,Tu=Tu||8,Cu=Cu||64,Pu=new Color(Pu!==void 0?Pu:4473924),Bu=new Color(Bu!==void 0?Bu:8947848);var Lu=[],Ru=[],Ou,Du,Fu,Vu,ku,Nu,Gu;for(Vu=0;Vu<=$u;Vu++)Fu=Vu/$u*(Math.PI*2),Ou=Math.sin(Fu)*_u,Du=Math.cos(Fu)*_u,Lu.push(0,0,0),Lu.push(Ou,0,Du),Gu=Vu&1?Pu:Bu,Ru.push(Gu.r,Gu.g,Gu.b),Ru.push(Gu.r,Gu.g,Gu.b);for(Vu=0;Vu<=Tu;Vu++)for(Gu=Vu&1?Pu:Bu,Nu=_u-_u/Tu*Vu,ku=0;ku<Cu;ku++)Fu=ku/Cu*(Math.PI*2),Ou=Math.sin(Fu)*Nu,Du=Math.cos(Fu)*Nu,Lu.push(Ou,0,Du),Ru.push(Gu.r,Gu.g,Gu.b),Fu=(ku+1)/Cu*(Math.PI*2),Ou=Math.sin(Fu)*Nu,Du=Math.cos(Fu)*Nu,Lu.push(Ou,0,Du),Ru.push(Gu.r,Gu.g,Gu.b);var ju=new BufferGeometry;ju.setAttribute("position",new Float32BufferAttribute(Lu,3)),ju.setAttribute("color",new Float32BufferAttribute(Ru,3));var Hu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,ju,Hu),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(_u,$u,Tu){Object3D.call(this),this.light=_u,this.light.updateMatrixWorld(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu,$u===void 0&&($u=1);var Cu=new BufferGeometry;Cu.setAttribute("position",new Float32BufferAttribute([-$u,$u,0,$u,$u,0,$u,-$u,0,-$u,-$u,0,-$u,$u,0],3));var Pu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Cu,Pu),this.add(this.lightPlane),Cu=new BufferGeometry,Cu.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Cu,Pu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(_u){var $u=new BufferGeometry,Tu=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Cu=[],Pu=[],Bu={},Lu=new Color(16755200),Ru=new Color(16711680),Ou=new Color(43775),Du=new Color(16777215),Fu=new Color(3355443);Vu("n1","n2",Lu),Vu("n2","n4",Lu),Vu("n4","n3",Lu),Vu("n3","n1",Lu),Vu("f1","f2",Lu),Vu("f2","f4",Lu),Vu("f4","f3",Lu),Vu("f3","f1",Lu),Vu("n1","f1",Lu),Vu("n2","f2",Lu),Vu("n3","f3",Lu),Vu("n4","f4",Lu),Vu("p","n1",Ru),Vu("p","n2",Ru),Vu("p","n3",Ru),Vu("p","n4",Ru),Vu("u1","u2",Ou),Vu("u2","u3",Ou),Vu("u3","u1",Ou),Vu("c","t",Du),Vu("p","c",Fu),Vu("cn1","cn2",Fu),Vu("cn3","cn4",Fu),Vu("cf1","cf2",Fu),Vu("cf3","cf4",Fu);function Vu(Nu,Gu,ju){ku(Nu,ju),ku(Gu,ju)}function ku(Nu,Gu){Cu.push(0,0,0),Pu.push(Gu.r,Gu.g,Gu.b),Bu[Nu]===void 0&&(Bu[Nu]=[]),Bu[Nu].push(Cu.length/3-1)}$u.setAttribute("position",new Float32BufferAttribute(Cu,3)),$u.setAttribute("color",new Float32BufferAttribute(Pu,3)),LineSegments.call(this,$u,Tu),this.type="CameraHelper",this.camera=_u,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_u.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Bu,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var _u=this.geometry,$u=this.pointMap,Tu=1,Cu=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",$u,_u,_camera,0,0,-1),setPoint("t",$u,_u,_camera,0,0,1),setPoint("n1",$u,_u,_camera,-Tu,-Cu,-1),setPoint("n2",$u,_u,_camera,Tu,-Cu,-1),setPoint("n3",$u,_u,_camera,-Tu,Cu,-1),setPoint("n4",$u,_u,_camera,Tu,Cu,-1),setPoint("f1",$u,_u,_camera,-Tu,-Cu,1),setPoint("f2",$u,_u,_camera,Tu,-Cu,1),setPoint("f3",$u,_u,_camera,-Tu,Cu,1),setPoint("f4",$u,_u,_camera,Tu,Cu,1),setPoint("u1",$u,_u,_camera,Tu*.7,Cu*1.1,-1),setPoint("u2",$u,_u,_camera,-Tu*.7,Cu*1.1,-1),setPoint("u3",$u,_u,_camera,0,Cu*2,-1),setPoint("cf1",$u,_u,_camera,-Tu,0,1),setPoint("cf2",$u,_u,_camera,Tu,0,1),setPoint("cf3",$u,_u,_camera,0,-Cu,1),setPoint("cf4",$u,_u,_camera,0,Cu,1),setPoint("cn1",$u,_u,_camera,-Tu,0,-1),setPoint("cn2",$u,_u,_camera,Tu,0,-1),setPoint("cn3",$u,_u,_camera,0,-Cu,-1),setPoint("cn4",$u,_u,_camera,0,Cu,-1),_u.getAttribute("position").needsUpdate=!0};function setPoint(_u,$u,Tu,Cu,Pu,Bu,Lu){_vector$b.set(Pu,Bu,Lu).unproject(Cu);var Ru=$u[_u];if(Ru!==void 0)for(var Ou=Tu.getAttribute("position"),Du=0,Fu=Ru.length;Du<Fu;Du++)Ou.setXYZ(Ru[Du],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(_u,$u){this.object=_u,$u===void 0&&($u=16776960);var Tu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Cu=new Float32Array(8*3),Pu=new BufferGeometry;Pu.setIndex(new BufferAttribute(Tu,1)),Pu.setAttribute("position",new BufferAttribute(Cu,3)),LineSegments.call(this,Pu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(_u){if(_u!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var $u=_box$3.min,Tu=_box$3.max,Cu=this.geometry.attributes.position,Pu=Cu.array;Pu[0]=Tu.x,Pu[1]=Tu.y,Pu[2]=Tu.z,Pu[3]=$u.x,Pu[4]=Tu.y,Pu[5]=Tu.z,Pu[6]=$u.x,Pu[7]=$u.y,Pu[8]=Tu.z,Pu[9]=Tu.x,Pu[10]=$u.y,Pu[11]=Tu.z,Pu[12]=Tu.x,Pu[13]=Tu.y,Pu[14]=$u.z,Pu[15]=$u.x,Pu[16]=Tu.y,Pu[17]=$u.z,Pu[18]=$u.x,Pu[19]=$u.y,Pu[20]=$u.z,Pu[21]=Tu.x,Pu[22]=$u.y,Pu[23]=$u.z,Cu.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(_u){return this.object=_u,this.update(),this};BoxHelper.prototype.copy=function(_u){return LineSegments.prototype.copy.call(this,_u),this.object=_u.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(_u,$u){this.type="Box3Helper",this.box=_u,$u=$u||16776960;var Tu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Cu=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Pu=new BufferGeometry;Pu.setIndex(new BufferAttribute(Tu,1)),Pu.setAttribute("position",new Float32BufferAttribute(Cu,3)),LineSegments.call(this,Pu,new LineBasicMaterial({color:$u,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(_u){var $u=this.box;$u.isEmpty()||($u.getCenter(this.position),$u.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,_u))};function PlaneHelper(_u,$u,Tu){this.plane=_u,this.size=$u===void 0?1:$u;var Cu=Tu!==void 0?Tu:16776960,Pu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Bu=new BufferGeometry;Bu.setAttribute("position",new Float32BufferAttribute(Pu,3)),Bu.computeBoundingSphere(),Line$1.call(this,Bu,new LineBasicMaterial({color:Cu,toneMapped:!1})),this.type="PlaneHelper";var Lu=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute(Lu,3)),Ru.computeBoundingSphere(),this.add(new Mesh(Ru,new MeshBasicMaterial({color:Cu,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(_u){var $u=-this.plane.constant;Math.abs($u)<1e-8&&($u=1e-8),this.scale.set(.5*this.size,.5*this.size,$u),this.children[0].material.side=$u<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,_u)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(_u,$u,Tu,Cu,Pu,Bu){Object3D.call(this),this.type="ArrowHelper",_u===void 0&&(_u=new Vector3(0,0,1)),$u===void 0&&($u=new Vector3(0,0,0)),Tu===void 0&&(Tu=1),Cu===void 0&&(Cu=16776960),Pu===void 0&&(Pu=.2*Tu),Bu===void 0&&(Bu=.2*Pu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy($u),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Cu,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Cu,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_u),this.setLength(Tu,Pu,Bu)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(_u){if(_u.y>.99999)this.quaternion.set(0,0,0,1);else if(_u.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_u.z,0,-_u.x).normalize();var $u=Math.acos(_u.y);this.quaternion.setFromAxisAngle(_axis,$u)}};ArrowHelper.prototype.setLength=function(_u,$u,Tu){$u===void 0&&($u=.2*_u),Tu===void 0&&(Tu=.2*$u),this.line.scale.set(1,Math.max(1e-4,_u-$u),1),this.line.updateMatrix(),this.cone.scale.set(Tu,$u,Tu),this.cone.position.y=_u,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(_u){this.line.material.color.set(_u),this.cone.material.color.set(_u)};ArrowHelper.prototype.copy=function(_u){return Object3D.prototype.copy.call(this,_u,!1),this.line.copy(_u.line),this.cone.copy(_u.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(_u){_u=_u||1;var $u=[0,0,0,_u,0,0,0,0,0,0,_u,0,0,0,0,0,0,_u],Tu=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Cu=new BufferGeometry;Cu.setAttribute("position",new Float32BufferAttribute($u,3)),Cu.setAttribute("color",new Float32BufferAttribute(Tu,3));var Pu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Cu,Pu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(_u){this._renderer=_u,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(_u,$u=0,Tu=.1,Cu=100){_oldTarget=this._renderer.getRenderTarget();var Pu=this._allocateTargets();return this._sceneToCubeUV(_u,Tu,Cu,Pu),$u>0&&this._blur(Pu,0,0,$u),this._applyPMREM(Pu),this._cleanup(Pu),Pu},fromEquirectangular:function(_u){return _u.magFilter=NearestFilter,_u.minFilter=NearestFilter,_u.generateMipmaps=!1,this.fromCubemap(_u)},fromCubemap:function(_u){_oldTarget=this._renderer.getRenderTarget();var $u=this._allocateTargets(_u);return this._textureToCubeUV(_u,$u),this._applyPMREM($u),this._cleanup($u),$u},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var _u=0;_u<_lodPlanes.length;_u++)_lodPlanes[_u].dispose()},_cleanup:function(_u){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),_u.scissorTest=!1,_u.setSize(_u.width,_u.height)},_allocateTargets:function(_u){var $u={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(_u)?_u.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Tu=_createRenderTarget($u);return Tu.depthBuffer=!_u,this._pingPongRenderTarget=_createRenderTarget($u),Tu},_compileMaterial:function(_u){var $u=new Mesh(_lodPlanes[0],_u);this._renderer.compile($u,_flatCamera)},_sceneToCubeUV:function(_u,$u,Tu,Cu){var Pu=90,Bu=1,Lu=new PerspectiveCamera(Pu,Bu,$u,Tu),Ru=[1,-1,1,1,1,1],Ou=[1,1,1,-1,-1,-1],Du=this._renderer,Fu=Du.outputEncoding,Vu=Du.toneMapping,ku=Du.toneMappingExposure,Nu=Du.getClearColor(),Gu=Du.getClearAlpha();Du.toneMapping=LinearToneMapping,Du.toneMappingExposure=1,Du.outputEncoding=LinearEncoding;var ju=_u.background;if(ju&&ju.isColor){ju.convertSRGBToLinear();var Hu=Math.max(ju.r,ju.g,ju.b),Uu=Math.min(Math.max(Math.ceil(Math.log2(Hu)),-128),127);ju=ju.multiplyScalar(Math.pow(2,-Uu));var zu=(Uu+128)/255;Du.setClearColor(ju,zu),_u.background=null}for(var Wu=0;Wu<6;Wu++){var Qu=Wu%3;Qu==0?(Lu.up.set(0,Ru[Wu],0),Lu.lookAt(Ou[Wu],0,0)):Qu==1?(Lu.up.set(0,0,Ru[Wu]),Lu.lookAt(0,Ou[Wu],0)):(Lu.up.set(0,Ru[Wu],0),Lu.lookAt(0,0,Ou[Wu])),_setViewport(Cu,Qu*SIZE_MAX,Wu>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Du.setRenderTarget(Cu),Du.render(_u,Lu)}Du.toneMapping=Vu,Du.toneMappingExposure=ku,Du.outputEncoding=Fu,Du.setClearColor(Nu,Gu)},_textureToCubeUV:function(_u,$u){var Tu=this._renderer;_u.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Cu=_u.isCubeTexture?this._cubemapShader:this._equirectShader,Pu=new Mesh(_lodPlanes[0],Cu),Bu=Cu.uniforms;Bu.envMap.value=_u,_u.isCubeTexture||Bu.texelSize.value.set(1/_u.image.width,1/_u.image.height),Bu.inputEncoding.value=ENCODINGS[_u.encoding],Bu.outputEncoding.value=ENCODINGS[$u.texture.encoding],_setViewport($u,0,0,3*SIZE_MAX,2*SIZE_MAX),Tu.setRenderTarget($u),Tu.render(Pu,_flatCamera)},_applyPMREM:function(_u){var $u=this._renderer,Tu=$u.autoClear;$u.autoClear=!1;for(var Cu=1;Cu<TOTAL_LODS;Cu++){var Pu=Math.sqrt(_sigmas[Cu]*_sigmas[Cu]-_sigmas[Cu-1]*_sigmas[Cu-1]),Bu=_axisDirections[(Cu-1)%_axisDirections.length];this._blur(_u,Cu-1,Cu,Pu,Bu)}$u.autoClear=Tu},_blur:function(_u,$u,Tu,Cu,Pu){var Bu=this._pingPongRenderTarget;this._halfBlur(_u,Bu,$u,Tu,Cu,"latitudinal",Pu),this._halfBlur(Bu,_u,Tu,Tu,Cu,"longitudinal",Pu)},_halfBlur:function(_u,$u,Tu,Cu,Pu,Bu,Lu){var Ru=this._renderer,Ou=this._blurMaterial;Bu!=="latitudinal"&&Bu!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Du=3,Fu=new Mesh(_lodPlanes[Cu],Ou),Vu=Ou.uniforms,ku=_sizeLods[Tu]-1,Nu=isFinite(Pu)?Math.PI/(2*ku):2*Math.PI/(2*MAX_SAMPLES-1),Gu=Pu/Nu,ju=isFinite(Pu)?1+Math.floor(Du*Gu):MAX_SAMPLES;ju>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Pu}, is too large and will clip, as it requested ${ju} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Hu=[],Uu=0,zu=0;zu<MAX_SAMPLES;++zu){var Ku=zu/Gu,Wu=Math.exp(-Ku*Ku/2);Hu.push(Wu),zu==0?Uu+=Wu:zu<ju&&(Uu+=2*Wu)}for(var zu=0;zu<Hu.length;zu++)Hu[zu]=Hu[zu]/Uu;Vu.envMap.value=_u.texture,Vu.samples.value=ju,Vu.weights.value=Hu,Vu.latitudinal.value=Bu==="latitudinal",Lu&&(Vu.poleAxis.value=Lu),Vu.dTheta.value=Nu,Vu.mipInt.value=LOD_MAX-Tu,Vu.inputEncoding.value=ENCODINGS[_u.texture.encoding],Vu.outputEncoding.value=ENCODINGS[_u.texture.encoding];var Qu=_sizeLods[Cu],Ku=3*Math.max(0,SIZE_MAX-2*Qu),Yu=(Cu===0?0:2*SIZE_MAX)+2*Qu*(Cu>LOD_MAX-LOD_MIN?Cu-LOD_MAX+LOD_MIN:0);_setViewport($u,Ku,Yu,3*Qu,2*Qu),Ru.setRenderTarget($u),Ru.render(Fu,_flatCamera)}};function _isLDR(_u){return _u===void 0||_u.type!==UnsignedByteType?!1:_u.encoding===LinearEncoding||_u.encoding===sRGBEncoding||_u.encoding===GammaEncoding}function _createPlanes(){for(var _u=[],$u=[],Tu=[],Cu=LOD_MAX,Pu=0;Pu<TOTAL_LODS;Pu++){var Bu=Math.pow(2,Cu);$u.push(Bu);var Lu=1/Bu;Pu>LOD_MAX-LOD_MIN?Lu=EXTRA_LOD_SIGMA[Pu-LOD_MAX+LOD_MIN-1]:Pu==0&&(Lu=0),Tu.push(Lu);for(var Ru=1/(Bu-1),Ou=-Ru/2,Du=1+Ru/2,Fu=[Ou,Ou,Du,Ou,Du,Du,Ou,Ou,Du,Du,Ou,Du],Vu=6,ku=6,Nu=3,Gu=2,ju=1,Hu=new Float32Array(Nu*ku*Vu),Uu=new Float32Array(Gu*ku*Vu),zu=new Float32Array(ju*ku*Vu),Wu=0;Wu<Vu;Wu++){var Qu=Wu%3*2/3-1,Ku=Wu>2?0:-1,Yu=[Qu,Ku,0,Qu+2/3,Ku,0,Qu+2/3,Ku+1,0,Qu,Ku,0,Qu+2/3,Ku+1,0,Qu,Ku+1,0];Hu.set(Yu,Nu*ku*Wu),Uu.set(Fu,Gu*ku*Wu);var Xc=[Wu,Wu,Wu,Wu,Wu,Wu];zu.set(Xc,ju*ku*Wu)}var _d=new BufferGeometry;_d.setAttribute("position",new BufferAttribute(Hu,Nu)),_d.setAttribute("uv",new BufferAttribute(Uu,Gu)),_d.setAttribute("faceIndex",new BufferAttribute(zu,ju)),_u.push(_d),Cu>LOD_MIN&&Cu--}return{_lodPlanes:_u,_sizeLods:$u,_sigmas:Tu}}function _createRenderTarget(_u){var $u=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,_u);return $u.texture.mapping=CubeUVReflectionMapping,$u.texture.name="PMREM.cubeUv",$u.scissorTest=!0,$u}function _setViewport(_u,$u,Tu,Cu,Pu){_u.viewport.set($u,Tu,Cu,Pu),_u.scissor.set($u,Tu,Cu,Pu)}function _getBlurShader(_u){var $u=new Float32Array(_u),Tu=new Vector3(0,1,0),Cu=new RawShaderMaterial({defines:{n:_u},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:$u},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Tu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Cu.type="SphericalGaussianBlur",Cu}function _getEquirectShader(){var _u=new Vector2(1,1),$u=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:_u},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return $u.type="EquirectangularToCubeUV",$u}function _getCubemapShader(){var _u=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _u.type="CubemapToCubeUV",_u}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(_u,$u,Tu,Cu,Pu,Bu,Lu){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(_u,$u,Tu,Pu,Bu,Lu)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(_u){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),_u}function MultiMaterial(_u){return _u===void 0&&(_u=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),_u.isMultiMaterial=!0,_u.materials=_u,_u.clone=function(){return _u.slice()},_u}function PointCloud(_u,$u){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(_u,$u)}function Particle(_u){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(_u)}function ParticleSystem(_u,$u){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(_u,$u)}function PointCloudMaterial(_u){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleBasicMaterial(_u){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function ParticleSystemMaterial(_u){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(_u)}function Vertex(_u,$u,Tu){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(_u,$u,Tu)}function DynamicBufferAttribute(_u,$u){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(_u,$u).setUsage(DynamicDrawUsage)}function Int8Attribute(_u,$u){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(_u,$u)}function Uint8Attribute(_u,$u){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(_u,$u)}function Uint8ClampedAttribute(_u,$u){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(_u,$u)}function Int16Attribute(_u,$u){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(_u,$u)}function Uint16Attribute(_u,$u){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(_u,$u)}function Int32Attribute(_u,$u){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(_u,$u)}function Uint32Attribute(_u,$u){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(_u,$u)}function Float32Attribute(_u,$u){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(_u,$u)}function Float64Attribute(_u,$u){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(_u,$u)}Curve.create=function(_u,$u){return console.log("THREE.Curve.create() has been deprecated"),_u.prototype=Object.create(Curve.prototype),_u.prototype.constructor=_u,_u.prototype.getPoint=$u,_u};Object.assign(CurvePath.prototype,{createPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getPoints(_u);return this.createGeometry($u)},createSpacedPointsGeometry:function(_u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var $u=this.getSpacedPoints(_u);return this.createGeometry($u)},createGeometry:function(_u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var $u=new Geometry,Tu=0,Cu=_u.length;Tu<Cu;Tu++){var Pu=_u[Tu];$u.vertices.push(new Vector3(Pu.x,Pu.y,Pu.z||0))}return $u}});Object.assign(Path.prototype,{fromPoints:function(_u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(_u)}});function ClosedSplineCurve3(_u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(_u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(_u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,_u),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(_u){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(_u)}function BoundingBoxHelper(_u,$u){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(_u,$u)}function EdgesHelper(_u,$u){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(_u,$u){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(_u.geometry),new LineBasicMaterial({color:$u!==void 0?$u:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(_u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(_u)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(_u){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(_u)}function BinaryTextureLoader(_u){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(_u)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(_u){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(_u)}});Object.assign(Box2.prototype,{center:function(_u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},size:function(_u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Box3.prototype,{center:function(_u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(_u)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(_u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)},size:function(_u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(_u)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(_u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(_u)};Line3.prototype.center=function(_u){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(_u)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(_u){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(_u)},nextPowerOfTwo:function(_u){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(_u)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},multiplyVector3:function(_u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),_u.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(_u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(_u)},flattenToArrayOffset:function(_u,$u){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(_u,$u)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(_u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(_u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(_u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector4:function(_u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(_u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),_u.transformDirection(this)},crossVector:function(_u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(_u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),_u.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(_u,$u,Tu,Cu,Pu,Bu){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(_u,$u,Cu,Tu,Pu,Bu)}});Plane.prototype.isIntersectionLine=function(_u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(_u)};Quaternion.prototype.multiplyVector3=function(_u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),_u.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(_u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(_u)},isIntersectionPlane:function(_u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(_u)},isIntersectionSphere:function(_u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(_u)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(_u,$u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(_u,$u)},midpoint:function(_u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(_u)},normal:function(_u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(_u)},plane:function(_u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(_u)}});Object.assign(Triangle,{barycoordFromPoint:function(_u,$u,Tu,Cu,Pu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(_u,$u,Tu,Cu,Pu)},normal:function(_u,$u,Tu,Cu){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(_u,$u,Tu,Cu)}});Object.assign(Shape.prototype,{extractAllPoints:function(_u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(_u)},extrude:function(_u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,_u)},makeGeometry:function(_u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,_u)}});Object.assign(Vector2.prototype,{fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(_u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(_u)},getScaleFromMatrix:function(_u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(_u)},getColumnFromMatrix:function(_u,$u){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn($u,_u)},applyProjection:function(_u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(_u)},fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},distanceToManhattan:function(_u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(_u)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(_u,$u,Tu){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(_u,$u,Tu)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(_u){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.assign(Object3D.prototype,{getChildByName:function(_u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(_u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(_u,$u){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis($u,_u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(_u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(_u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=_u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(_u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=_u}});PerspectiveCamera.prototype.setLens=function(_u,$u){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),$u!==void 0&&(this.filmGauge=$u),this.setFocalLength(_u)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(_u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=_u}},shadowCameraLeft:{set:function(_u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=_u}},shadowCameraRight:{set:function(_u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=_u}},shadowCameraTop:{set:function(_u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=_u}},shadowCameraBottom:{set:function(_u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=_u}},shadowCameraNear:{set:function(_u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=_u}},shadowCameraFar:{set:function(_u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=_u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(_u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=_u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(_u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=_u}},shadowMapHeight:{set:function(_u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=_u}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(_u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(_u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(_u)},addAttribute:function(_u,$u){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!($u&&$u.isBufferAttribute)&&!($u&&$u.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(_u,new BufferAttribute(arguments[1],arguments[2]))):_u==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex($u),this):this.setAttribute(_u,$u)},addDrawCall:function(_u,$u,Tu){Tu!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(_u,$u)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(_u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(_u)},applyMatrix:function(_u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(_u)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(_u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=_u}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(_u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=_u}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(_u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(_u)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(_u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(_u===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(_u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=_u===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(_u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=_u}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(_u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=_u}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(_u,$u,Tu,Cu){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(_u),this.clear($u,Tu,Cu)},animate:function(_u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(_u)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(_u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(_u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=_u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(_u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=_u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(_u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=_u===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(_u,$u,Tu){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(_u,Tu)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=_u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(_u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=_u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=_u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(_u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=_u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(_u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=_u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(_u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=_u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(_u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=_u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(_u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=_u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(_u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=_u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(_u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=_u}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(_u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var $u=this,Tu=new AudioLoader;return Tu.load(_u,function(Cu){$u.setBuffer(Cu)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(_u,$u){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(_u,$u)};var GeometryUtils={merge:function(_u,$u,Tu){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Cu;$u.isMesh&&($u.matrixAutoUpdate&&$u.updateMatrix(),Cu=$u.matrix,$u=$u.geometry),_u.merge($u,Cu,Tu)},center:function(_u){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),_u.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(_u,$u,Tu,Cu){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Pu=new TextureLoader;Pu.setCrossOrigin(this.crossOrigin);var Bu=Pu.load(_u,Tu,void 0,Cu);return $u&&(Bu.mapping=$u),Bu};ImageUtils.loadTextureCube=function(_u,$u,Tu,Cu){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Pu=new CubeTextureLoader;Pu.setCrossOrigin(this.crossOrigin);var Bu=Pu.load(_u,Tu,void 0,Cu);return $u&&(Bu.mapping=$u),Bu};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var Ee$1=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(Ee$1),tslib={exports:{}};(function(_u){var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu,Wu,Qu,Ku,Yu,Xc,_d,_f;(function(qu){var Xu=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};qu(Zu(Xu,Zu(_u.exports)));function Zu(_c,Ju){return _c!==Xu&&(typeof Object.create=="function"?Object.defineProperty(_c,"__esModule",{value:!0}):_c.__esModule=!0),function(_h,ep){return _c[_h]=Ju?Ju(_h,ep):ep}}})(function(qu){var Xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_c,Ju){_c.__proto__=Ju}||function(_c,Ju){for(var _h in Ju)Object.prototype.hasOwnProperty.call(Ju,_h)&&(_c[_h]=Ju[_h])};$u=function(_c,Ju){if(typeof Ju!="function"&&Ju!==null)throw new TypeError("Class extends value "+String(Ju)+" is not a constructor or null");Xu(_c,Ju);function _h(){this.constructor=_c}_c.prototype=Ju===null?Object.create(Ju):(_h.prototype=Ju.prototype,new _h)},Tu=Object.assign||function(_c){for(var Ju,_h=1,ep=arguments.length;_h<ep;_h++){Ju=arguments[_h];for(var tp in Ju)Object.prototype.hasOwnProperty.call(Ju,tp)&&(_c[tp]=Ju[tp])}return _c},Cu=function(_c,Ju){var _h={};for(var ep in _c)Object.prototype.hasOwnProperty.call(_c,ep)&&Ju.indexOf(ep)<0&&(_h[ep]=_c[ep]);if(_c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tp=0,ep=Object.getOwnPropertySymbols(_c);tp<ep.length;tp++)Ju.indexOf(ep[tp])<0&&Object.prototype.propertyIsEnumerable.call(_c,ep[tp])&&(_h[ep[tp]]=_c[ep[tp]]);return _h},Pu=function(_c,Ju,_h,ep){var tp=arguments.length,rp=tp<3?Ju:ep===null?ep=Object.getOwnPropertyDescriptor(Ju,_h):ep,dp;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")rp=Reflect.decorate(_c,Ju,_h,ep);else for(var cp=_c.length-1;cp>=0;cp--)(dp=_c[cp])&&(rp=(tp<3?dp(rp):tp>3?dp(Ju,_h,rp):dp(Ju,_h))||rp);return tp>3&&rp&&Object.defineProperty(Ju,_h,rp),rp},Bu=function(_c,Ju){return function(_h,ep){Ju(_h,ep,_c)}},Lu=function(_c,Ju){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(_c,Ju)},Ru=function(_c,Ju,_h,ep){function tp(rp){return rp instanceof _h?rp:new _h(function(dp){dp(rp)})}return new(_h||(_h=Promise))(function(rp,dp){function cp(Bp){try{yp(ep.next(Bp))}catch(_p){dp(_p)}}function Sp(Bp){try{yp(ep.throw(Bp))}catch(_p){dp(_p)}}function yp(Bp){Bp.done?rp(Bp.value):tp(Bp.value).then(cp,Sp)}yp((ep=ep.apply(_c,Ju||[])).next())})},Ou=function(_c,Ju){var _h={label:0,sent:function(){if(rp[0]&1)throw rp[1];return rp[1]},trys:[],ops:[]},ep,tp,rp,dp;return dp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(dp[Symbol.iterator]=function(){return this}),dp;function cp(yp){return function(Bp){return Sp([yp,Bp])}}function Sp(yp){if(ep)throw new TypeError("Generator is already executing.");for(;_h;)try{if(ep=1,tp&&(rp=yp[0]&2?tp.return:yp[0]?tp.throw||((rp=tp.return)&&rp.call(tp),0):tp.next)&&!(rp=rp.call(tp,yp[1])).done)return rp;switch(tp=0,rp&&(yp=[yp[0]&2,rp.value]),yp[0]){case 0:case 1:rp=yp;break;case 4:return _h.label++,{value:yp[1],done:!1};case 5:_h.label++,tp=yp[1],yp=[0];continue;case 7:yp=_h.ops.pop(),_h.trys.pop();continue;default:if(rp=_h.trys,!(rp=rp.length>0&&rp[rp.length-1])&&(yp[0]===6||yp[0]===2)){_h=0;continue}if(yp[0]===3&&(!rp||yp[1]>rp[0]&&yp[1]<rp[3])){_h.label=yp[1];break}if(yp[0]===6&&_h.label<rp[1]){_h.label=rp[1],rp=yp;break}if(rp&&_h.label<rp[2]){_h.label=rp[2],_h.ops.push(yp);break}rp[2]&&_h.ops.pop(),_h.trys.pop();continue}yp=Ju.call(_c,_h)}catch(Bp){yp=[6,Bp],tp=0}finally{ep=rp=0}if(yp[0]&5)throw yp[1];return{value:yp[0]?yp[1]:void 0,done:!0}}},Du=function(_c,Ju){for(var _h in _c)_h!=="default"&&!Object.prototype.hasOwnProperty.call(Ju,_h)&&_f(Ju,_c,_h)},_f=Object.create?function(_c,Ju,_h,ep){ep===void 0&&(ep=_h);var tp=Object.getOwnPropertyDescriptor(Ju,_h);(!tp||("get"in tp?!Ju.__esModule:tp.writable||tp.configurable))&&(tp={enumerable:!0,get:function(){return Ju[_h]}}),Object.defineProperty(_c,ep,tp)}:function(_c,Ju,_h,ep){ep===void 0&&(ep=_h),_c[ep]=Ju[_h]},Fu=function(_c){var Ju=typeof Symbol=="function"&&Symbol.iterator,_h=Ju&&_c[Ju],ep=0;if(_h)return _h.call(_c);if(_c&&typeof _c.length=="number")return{next:function(){return _c&&ep>=_c.length&&(_c=void 0),{value:_c&&_c[ep++],done:!_c}}};throw new TypeError(Ju?"Object is not iterable.":"Symbol.iterator is not defined.")},Vu=function(_c,Ju){var _h=typeof Symbol=="function"&&_c[Symbol.iterator];if(!_h)return _c;var ep=_h.call(_c),tp,rp=[],dp;try{for(;(Ju===void 0||Ju-- >0)&&!(tp=ep.next()).done;)rp.push(tp.value)}catch(cp){dp={error:cp}}finally{try{tp&&!tp.done&&(_h=ep.return)&&_h.call(ep)}finally{if(dp)throw dp.error}}return rp},ku=function(){for(var _c=[],Ju=0;Ju<arguments.length;Ju++)_c=_c.concat(Vu(arguments[Ju]));return _c},Nu=function(){for(var _c=0,Ju=0,_h=arguments.length;Ju<_h;Ju++)_c+=arguments[Ju].length;for(var ep=Array(_c),tp=0,Ju=0;Ju<_h;Ju++)for(var rp=arguments[Ju],dp=0,cp=rp.length;dp<cp;dp++,tp++)ep[tp]=rp[dp];return ep},Gu=function(_c,Ju,_h){if(_h||arguments.length===2)for(var ep=0,tp=Ju.length,rp;ep<tp;ep++)(rp||!(ep in Ju))&&(rp||(rp=Array.prototype.slice.call(Ju,0,ep)),rp[ep]=Ju[ep]);return _c.concat(rp||Array.prototype.slice.call(Ju))},ju=function(_c){return this instanceof ju?(this.v=_c,this):new ju(_c)},Hu=function(_c,Ju,_h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ep=_h.apply(_c,Ju||[]),tp,rp=[];return tp={},dp("next"),dp("throw"),dp("return"),tp[Symbol.asyncIterator]=function(){return this},tp;function dp(Cp){ep[Cp]&&(tp[Cp]=function(Ep){return new Promise(function(ap,ip){rp.push([Cp,Ep,ap,ip])>1||cp(Cp,Ep)})})}function cp(Cp,Ep){try{Sp(ep[Cp](Ep))}catch(ap){_p(rp[0][3],ap)}}function Sp(Cp){Cp.value instanceof ju?Promise.resolve(Cp.value.v).then(yp,Bp):_p(rp[0][2],Cp)}function yp(Cp){cp("next",Cp)}function Bp(Cp){cp("throw",Cp)}function _p(Cp,Ep){Cp(Ep),rp.shift(),rp.length&&cp(rp[0][0],rp[0][1])}},Uu=function(_c){var Ju,_h;return Ju={},ep("next"),ep("throw",function(tp){throw tp}),ep("return"),Ju[Symbol.iterator]=function(){return this},Ju;function ep(tp,rp){Ju[tp]=_c[tp]?function(dp){return(_h=!_h)?{value:ju(_c[tp](dp)),done:tp==="return"}:rp?rp(dp):dp}:rp}},zu=function(_c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ju=_c[Symbol.asyncIterator],_h;return Ju?Ju.call(_c):(_c=typeof Fu=="function"?Fu(_c):_c[Symbol.iterator](),_h={},ep("next"),ep("throw"),ep("return"),_h[Symbol.asyncIterator]=function(){return this},_h);function ep(rp){_h[rp]=_c[rp]&&function(dp){return new Promise(function(cp,Sp){dp=_c[rp](dp),tp(cp,Sp,dp.done,dp.value)})}}function tp(rp,dp,cp,Sp){Promise.resolve(Sp).then(function(yp){rp({value:yp,done:cp})},dp)}},Wu=function(_c,Ju){return Object.defineProperty?Object.defineProperty(_c,"raw",{value:Ju}):_c.raw=Ju,_c};var Zu=Object.create?function(_c,Ju){Object.defineProperty(_c,"default",{enumerable:!0,value:Ju})}:function(_c,Ju){_c.default=Ju};Qu=function(_c){if(_c&&_c.__esModule)return _c;var Ju={};if(_c!=null)for(var _h in _c)_h!=="default"&&Object.prototype.hasOwnProperty.call(_c,_h)&&_f(Ju,_c,_h);return Zu(Ju,_c),Ju},Ku=function(_c){return _c&&_c.__esModule?_c:{default:_c}},Yu=function(_c,Ju,_h,ep){if(_h==="a"&&!ep)throw new TypeError("Private accessor was defined without a getter");if(typeof Ju=="function"?_c!==Ju||!ep:!Ju.has(_c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _h==="m"?ep:_h==="a"?ep.call(_c):ep?ep.value:Ju.get(_c)},Xc=function(_c,Ju,_h,ep,tp){if(ep==="m")throw new TypeError("Private method is not writable");if(ep==="a"&&!tp)throw new TypeError("Private accessor was defined without a setter");if(typeof Ju=="function"?_c!==Ju||!tp:!Ju.has(_c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ep==="a"?tp.call(_c,_h):tp?tp.value=_h:Ju.set(_c,_h),_h},_d=function(_c,Ju){if(Ju===null||typeof Ju!="object"&&typeof Ju!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof _c=="function"?Ju===_c:_c.has(Ju)},qu("__extends",$u),qu("__assign",Tu),qu("__rest",Cu),qu("__decorate",Pu),qu("__param",Bu),qu("__metadata",Lu),qu("__awaiter",Ru),qu("__generator",Ou),qu("__exportStar",Du),qu("__createBinding",_f),qu("__values",Fu),qu("__read",Vu),qu("__spread",ku),qu("__spreadArrays",Nu),qu("__spreadArray",Gu),qu("__await",ju),qu("__asyncGenerator",Hu),qu("__asyncDelegator",Uu),qu("__asyncValues",zu),qu("__makeTemplateObject",Wu),qu("__importStar",Qu),qu("__importDefault",Ku),qu("__classPrivateFieldGet",Yu),qu("__classPrivateFieldSet",Xc),qu("__classPrivateFieldIn",_d)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(_u,$u){for(var Tu=new Array(arguments.length-1),Cu=0,Pu=2,Bu=!0;Pu<arguments.length;)Tu[Cu++]=arguments[Pu++];return new Promise(function(Ru,Ou){Tu[Cu]=function(Fu){if(Bu)if(Bu=!1,Fu)Ou(Fu);else{for(var Vu=new Array(arguments.length-1),ku=0;ku<Vu.length;)Vu[ku++]=arguments[ku];Ru.apply(null,Vu)}};try{_u.apply($u||null,Tu)}catch(Du){Bu&&(Bu=!1,Ou(Du))}})}var base64$1={};(function(_u){var $u=_u;$u.length=function(Ru){var Ou=Ru.length;if(!Ou)return 0;for(var Du=0;--Ou%4>1&&Ru.charAt(Ou)==="=";)++Du;return Math.ceil(Ru.length*3)/4-Du};for(var Tu=new Array(64),Cu=new Array(123),Pu=0;Pu<64;)Cu[Tu[Pu]=Pu<26?Pu+65:Pu<52?Pu+71:Pu<62?Pu-4:Pu-59|43]=Pu++;$u.encode=function(Ru,Ou,Du){for(var Fu=null,Vu=[],ku=0,Nu=0,Gu;Ou<Du;){var ju=Ru[Ou++];switch(Nu){case 0:Vu[ku++]=Tu[ju>>2],Gu=(ju&3)<<4,Nu=1;break;case 1:Vu[ku++]=Tu[Gu|ju>>4],Gu=(ju&15)<<2,Nu=2;break;case 2:Vu[ku++]=Tu[Gu|ju>>6],Vu[ku++]=Tu[ju&63],Nu=0;break}ku>8191&&((Fu||(Fu=[])).push(String.fromCharCode.apply(String,Vu)),ku=0)}return Nu&&(Vu[ku++]=Tu[Gu],Vu[ku++]=61,Nu===1&&(Vu[ku++]=61)),Fu?(ku&&Fu.push(String.fromCharCode.apply(String,Vu.slice(0,ku))),Fu.join("")):String.fromCharCode.apply(String,Vu.slice(0,ku))};var Bu="invalid encoding";$u.decode=function(Ru,Ou,Du){for(var Fu=Du,Vu=0,ku,Nu=0;Nu<Ru.length;){var Gu=Ru.charCodeAt(Nu++);if(Gu===61&&Vu>1)break;if((Gu=Cu[Gu])===void 0)throw Error(Bu);switch(Vu){case 0:ku=Gu,Vu=1;break;case 1:Ou[Du++]=ku<<2|(Gu&48)>>4,ku=Gu,Vu=2;break;case 2:Ou[Du++]=(ku&15)<<4|(Gu&60)>>2,ku=Gu,Vu=3;break;case 3:Ou[Du++]=(ku&3)<<6|Gu,Vu=0;break}}if(Vu===1)throw Error(Bu);return Du-Fu},$u.test=function(Ru){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Ru)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function($u,Tu,Cu){return(this._listeners[$u]||(this._listeners[$u]=[])).push({fn:Tu,ctx:Cu||this}),this};EventEmitter.prototype.off=function($u,Tu){if($u===void 0)this._listeners={};else if(Tu===void 0)this._listeners[$u]=[];else for(var Cu=this._listeners[$u],Pu=0;Pu<Cu.length;)Cu[Pu].fn===Tu?Cu.splice(Pu,1):++Pu;return this};EventEmitter.prototype.emit=function($u){var Tu=this._listeners[$u];if(Tu){for(var Cu=[],Pu=1;Pu<arguments.length;)Cu.push(arguments[Pu++]);for(Pu=0;Pu<Tu.length;)Tu[Pu].fn.apply(Tu[Pu++].ctx,Cu)}return this};var float=factory(factory);function factory(_u){return typeof Float32Array!="undefined"?function(){var $u=new Float32Array([-0]),Tu=new Uint8Array($u.buffer),Cu=Tu[3]===128;function Pu(Ou,Du,Fu){$u[0]=Ou,Du[Fu]=Tu[0],Du[Fu+1]=Tu[1],Du[Fu+2]=Tu[2],Du[Fu+3]=Tu[3]}function Bu(Ou,Du,Fu){$u[0]=Ou,Du[Fu]=Tu[3],Du[Fu+1]=Tu[2],Du[Fu+2]=Tu[1],Du[Fu+3]=Tu[0]}_u.writeFloatLE=Cu?Pu:Bu,_u.writeFloatBE=Cu?Bu:Pu;function Lu(Ou,Du){return Tu[0]=Ou[Du],Tu[1]=Ou[Du+1],Tu[2]=Ou[Du+2],Tu[3]=Ou[Du+3],$u[0]}function Ru(Ou,Du){return Tu[3]=Ou[Du],Tu[2]=Ou[Du+1],Tu[1]=Ou[Du+2],Tu[0]=Ou[Du+3],$u[0]}_u.readFloatLE=Cu?Lu:Ru,_u.readFloatBE=Cu?Ru:Lu}():function(){function $u(Cu,Pu,Bu,Lu){var Ru=Pu<0?1:0;if(Ru&&(Pu=-Pu),Pu===0)Cu(1/Pu>0?0:2147483648,Bu,Lu);else if(isNaN(Pu))Cu(2143289344,Bu,Lu);else if(Pu>34028234663852886e22)Cu((Ru<<31|2139095040)>>>0,Bu,Lu);else if(Pu<11754943508222875e-54)Cu((Ru<<31|Math.round(Pu/1401298464324817e-60))>>>0,Bu,Lu);else{var Ou=Math.floor(Math.log(Pu)/Math.LN2),Du=Math.round(Pu*Math.pow(2,-Ou)*8388608)&8388607;Cu((Ru<<31|Ou+127<<23|Du)>>>0,Bu,Lu)}}_u.writeFloatLE=$u.bind(null,writeUintLE),_u.writeFloatBE=$u.bind(null,writeUintBE);function Tu(Cu,Pu,Bu){var Lu=Cu(Pu,Bu),Ru=(Lu>>31)*2+1,Ou=Lu>>>23&255,Du=Lu&8388607;return Ou===255?Du?NaN:Ru*(1/0):Ou===0?Ru*1401298464324817e-60*Du:Ru*Math.pow(2,Ou-150)*(Du+8388608)}_u.readFloatLE=Tu.bind(null,readUintLE),_u.readFloatBE=Tu.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var $u=new Float64Array([-0]),Tu=new Uint8Array($u.buffer),Cu=Tu[7]===128;function Pu(Ou,Du,Fu){$u[0]=Ou,Du[Fu]=Tu[0],Du[Fu+1]=Tu[1],Du[Fu+2]=Tu[2],Du[Fu+3]=Tu[3],Du[Fu+4]=Tu[4],Du[Fu+5]=Tu[5],Du[Fu+6]=Tu[6],Du[Fu+7]=Tu[7]}function Bu(Ou,Du,Fu){$u[0]=Ou,Du[Fu]=Tu[7],Du[Fu+1]=Tu[6],Du[Fu+2]=Tu[5],Du[Fu+3]=Tu[4],Du[Fu+4]=Tu[3],Du[Fu+5]=Tu[2],Du[Fu+6]=Tu[1],Du[Fu+7]=Tu[0]}_u.writeDoubleLE=Cu?Pu:Bu,_u.writeDoubleBE=Cu?Bu:Pu;function Lu(Ou,Du){return Tu[0]=Ou[Du],Tu[1]=Ou[Du+1],Tu[2]=Ou[Du+2],Tu[3]=Ou[Du+3],Tu[4]=Ou[Du+4],Tu[5]=Ou[Du+5],Tu[6]=Ou[Du+6],Tu[7]=Ou[Du+7],$u[0]}function Ru(Ou,Du){return Tu[7]=Ou[Du],Tu[6]=Ou[Du+1],Tu[5]=Ou[Du+2],Tu[4]=Ou[Du+3],Tu[3]=Ou[Du+4],Tu[2]=Ou[Du+5],Tu[1]=Ou[Du+6],Tu[0]=Ou[Du+7],$u[0]}_u.readDoubleLE=Cu?Lu:Ru,_u.readDoubleBE=Cu?Ru:Lu}():function(){function $u(Cu,Pu,Bu,Lu,Ru,Ou){var Du=Lu<0?1:0;if(Du&&(Lu=-Lu),Lu===0)Cu(0,Ru,Ou+Pu),Cu(1/Lu>0?0:2147483648,Ru,Ou+Bu);else if(isNaN(Lu))Cu(0,Ru,Ou+Pu),Cu(2146959360,Ru,Ou+Bu);else if(Lu>17976931348623157e292)Cu(0,Ru,Ou+Pu),Cu((Du<<31|2146435072)>>>0,Ru,Ou+Bu);else{var Fu;if(Lu<22250738585072014e-324)Fu=Lu/5e-324,Cu(Fu>>>0,Ru,Ou+Pu),Cu((Du<<31|Fu/4294967296)>>>0,Ru,Ou+Bu);else{var Vu=Math.floor(Math.log(Lu)/Math.LN2);Vu===1024&&(Vu=1023),Fu=Lu*Math.pow(2,-Vu),Cu(Fu*4503599627370496>>>0,Ru,Ou+Pu),Cu((Du<<31|Vu+1023<<20|Fu*1048576&1048575)>>>0,Ru,Ou+Bu)}}}_u.writeDoubleLE=$u.bind(null,writeUintLE,0,4),_u.writeDoubleBE=$u.bind(null,writeUintBE,4,0);function Tu(Cu,Pu,Bu,Lu,Ru){var Ou=Cu(Lu,Ru+Pu),Du=Cu(Lu,Ru+Bu),Fu=(Du>>31)*2+1,Vu=Du>>>20&2047,ku=4294967296*(Du&1048575)+Ou;return Vu===2047?ku?NaN:Fu*(1/0):Vu===0?Fu*5e-324*ku:Fu*Math.pow(2,Vu-1075)*(ku+4503599627370496)}_u.readDoubleLE=Tu.bind(null,readUintLE,0,4),_u.readDoubleBE=Tu.bind(null,readUintBE,4,0)}(),_u}function writeUintLE(_u,$u,Tu){$u[Tu]=_u&255,$u[Tu+1]=_u>>>8&255,$u[Tu+2]=_u>>>16&255,$u[Tu+3]=_u>>>24}function writeUintBE(_u,$u,Tu){$u[Tu]=_u>>>24,$u[Tu+1]=_u>>>16&255,$u[Tu+2]=_u>>>8&255,$u[Tu+3]=_u&255}function readUintLE(_u,$u){return(_u[$u]|_u[$u+1]<<8|_u[$u+2]<<16|_u[$u+3]<<24)>>>0}function readUintBE(_u,$u){return(_u[$u]<<24|_u[$u+1]<<16|_u[$u+2]<<8|_u[$u+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_u){}return null}var utf8$2={};(function(_u){var $u=_u;$u.length=function(Cu){for(var Pu=0,Bu=0,Lu=0;Lu<Cu.length;++Lu)Bu=Cu.charCodeAt(Lu),Bu<128?Pu+=1:Bu<2048?Pu+=2:(Bu&64512)===55296&&(Cu.charCodeAt(Lu+1)&64512)===56320?(++Lu,Pu+=4):Pu+=3;return Pu},$u.read=function(Cu,Pu,Bu){var Lu=Bu-Pu;if(Lu<1)return"";for(var Ru=null,Ou=[],Du=0,Fu;Pu<Bu;)Fu=Cu[Pu++],Fu<128?Ou[Du++]=Fu:Fu>191&&Fu<224?Ou[Du++]=(Fu&31)<<6|Cu[Pu++]&63:Fu>239&&Fu<365?(Fu=((Fu&7)<<18|(Cu[Pu++]&63)<<12|(Cu[Pu++]&63)<<6|Cu[Pu++]&63)-65536,Ou[Du++]=55296+(Fu>>10),Ou[Du++]=56320+(Fu&1023)):Ou[Du++]=(Fu&15)<<12|(Cu[Pu++]&63)<<6|Cu[Pu++]&63,Du>8191&&((Ru||(Ru=[])).push(String.fromCharCode.apply(String,Ou)),Du=0);return Ru?(Du&&Ru.push(String.fromCharCode.apply(String,Ou.slice(0,Du))),Ru.join("")):String.fromCharCode.apply(String,Ou.slice(0,Du))},$u.write=function(Cu,Pu,Bu){for(var Lu=Bu,Ru,Ou,Du=0;Du<Cu.length;++Du)Ru=Cu.charCodeAt(Du),Ru<128?Pu[Bu++]=Ru:Ru<2048?(Pu[Bu++]=Ru>>6|192,Pu[Bu++]=Ru&63|128):(Ru&64512)===55296&&((Ou=Cu.charCodeAt(Du+1))&64512)===56320?(Ru=65536+((Ru&1023)<<10)+(Ou&1023),++Du,Pu[Bu++]=Ru>>18|240,Pu[Bu++]=Ru>>12&63|128,Pu[Bu++]=Ru>>6&63|128,Pu[Bu++]=Ru&63|128):(Pu[Bu++]=Ru>>12|224,Pu[Bu++]=Ru>>6&63|128,Pu[Bu++]=Ru&63|128);return Bu-Lu}})(utf8$2);var pool_1=pool;function pool(_u,$u,Tu){var Cu=Tu||8192,Pu=Cu>>>1,Bu=null,Lu=Cu;return function(Ou){if(Ou<1||Ou>Pu)return _u(Ou);Lu+Ou>Cu&&(Bu=_u(Cu),Lu=0);var Du=$u.call(Bu,Lu,Lu+=Ou);return Lu&7&&(Lu=(Lu|7)+1),Du}}var longbits=LongBits$2,util$6=minimal$1;function LongBits$2(_u,$u){this.lo=_u>>>0,this.hi=$u>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function _u($u){if($u===0)return zero;var Tu=$u<0;Tu&&($u=-$u);var Cu=$u>>>0,Pu=($u-Cu)/4294967296>>>0;return Tu&&(Pu=~Pu>>>0,Cu=~Cu>>>0,++Cu>4294967295&&(Cu=0,++Pu>4294967295&&(Pu=0))),new LongBits$2(Cu,Pu)};LongBits$2.from=function _u($u){if(typeof $u=="number")return LongBits$2.fromNumber($u);if(util$6.isString($u))if(util$6.Long)$u=util$6.Long.fromString($u);else return LongBits$2.fromNumber(parseInt($u,10));return $u.low||$u.high?new LongBits$2($u.low>>>0,$u.high>>>0):zero};LongBits$2.prototype.toNumber=function _u($u){if(!$u&&this.hi>>>31){var Tu=~this.lo+1>>>0,Cu=~this.hi>>>0;return Tu||(Cu=Cu+1>>>0),-(Tu+Cu*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function _u($u){return util$6.Long?new util$6.Long(this.lo|0,this.hi|0,Boolean($u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($u)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function _u($u){return $u===zeroHash?zero:new LongBits$2((charCodeAt.call($u,0)|charCodeAt.call($u,1)<<8|charCodeAt.call($u,2)<<16|charCodeAt.call($u,3)<<24)>>>0,(charCodeAt.call($u,4)|charCodeAt.call($u,5)<<8|charCodeAt.call($u,6)<<16|charCodeAt.call($u,7)<<24)>>>0)};LongBits$2.prototype.toHash=function _u(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function _u(){var $u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$u)>>>0,this.lo=(this.lo<<1^$u)>>>0,this};LongBits$2.prototype.zzDecode=function _u(){var $u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$u)>>>0,this.hi=(this.hi>>>1^$u)>>>0,this};LongBits$2.prototype.length=function _u(){var $u=this.lo,Tu=(this.lo>>>28|this.hi<<4)>>>0,Cu=this.hi>>>24;return Cu===0?Tu===0?$u<16384?$u<128?1:2:$u<2097152?3:4:Tu<16384?Tu<128?5:6:Tu<2097152?7:8:Cu<128?9:10};(function(_u){var $u=_u;$u.asPromise=aspromise,$u.base64=base64$1,$u.EventEmitter=eventemitter,$u.float=float,$u.inquire=inquire_1,$u.utf8=utf8$2,$u.pool=pool_1,$u.LongBits=longbits,$u.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),$u.global=$u.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,$u.emptyArray=Object.freeze?Object.freeze([]):[],$u.emptyObject=Object.freeze?Object.freeze({}):{},$u.isInteger=Number.isInteger||function(Bu){return typeof Bu=="number"&&isFinite(Bu)&&Math.floor(Bu)===Bu},$u.isString=function(Bu){return typeof Bu=="string"||Bu instanceof String},$u.isObject=function(Bu){return Bu&&typeof Bu=="object"},$u.isset=$u.isSet=function(Bu,Lu){var Ru=Bu[Lu];return Ru!=null&&Bu.hasOwnProperty(Lu)?typeof Ru!="object"||(Array.isArray(Ru)?Ru.length:Object.keys(Ru).length)>0:!1},$u.Buffer=function(){try{var Pu=$u.inquire("buffer").Buffer;return Pu.prototype.utf8Write?Pu:null}catch{return null}}(),$u._Buffer_from=null,$u._Buffer_allocUnsafe=null,$u.newBuffer=function(Bu){return typeof Bu=="number"?$u.Buffer?$u._Buffer_allocUnsafe(Bu):new $u.Array(Bu):$u.Buffer?$u._Buffer_from(Bu):typeof Uint8Array=="undefined"?Bu:new Uint8Array(Bu)},$u.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,$u.Long=$u.global.dcodeIO&&$u.global.dcodeIO.Long||$u.global.Long||$u.inquire("long"),$u.key2Re=/^true|false|0|1$/,$u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,$u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,$u.longToHash=function(Bu){return Bu?$u.LongBits.from(Bu).toHash():$u.LongBits.zeroHash},$u.longFromHash=function(Bu,Lu){var Ru=$u.LongBits.fromHash(Bu);return $u.Long?$u.Long.fromBits(Ru.lo,Ru.hi,Lu):Ru.toNumber(Boolean(Lu))};function Tu(Pu,Bu,Lu){for(var Ru=Object.keys(Bu),Ou=0;Ou<Ru.length;++Ou)(Pu[Ru[Ou]]===void 0||!Lu)&&(Pu[Ru[Ou]]=Bu[Ru[Ou]]);return Pu}$u.merge=Tu,$u.lcFirst=function(Bu){return Bu.charAt(0).toLowerCase()+Bu.substring(1)};function Cu(Pu){function Bu(Lu,Ru){if(!(this instanceof Bu))return new Bu(Lu,Ru);Object.defineProperty(this,"message",{get:function(){return Lu}}),Error.captureStackTrace?Error.captureStackTrace(this,Bu):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Ru&&Tu(this,Ru)}return(Bu.prototype=Object.create(Error.prototype)).constructor=Bu,Object.defineProperty(Bu.prototype,"name",{get:function(){return Pu}}),Bu.prototype.toString=function(){return this.name+": "+this.message},Bu}$u.newError=Cu,$u.ProtocolError=Cu("ProtocolError"),$u.oneOfGetter=function(Bu){for(var Lu={},Ru=0;Ru<Bu.length;++Ru)Lu[Bu[Ru]]=1;return function(){for(var Ou=Object.keys(this),Du=Ou.length-1;Du>-1;--Du)if(Lu[Ou[Du]]===1&&this[Ou[Du]]!==void 0&&this[Ou[Du]]!==null)return Ou[Du]}},$u.oneOfSetter=function(Bu){return function(Lu){for(var Ru=0;Ru<Bu.length;++Ru)Bu[Ru]!==Lu&&delete this[Bu[Ru]]}},$u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},$u._configure=function(){var Pu=$u.Buffer;if(!Pu){$u._Buffer_from=$u._Buffer_allocUnsafe=null;return}$u._Buffer_from=Pu.from!==Uint8Array.from&&Pu.from||function(Lu,Ru){return new Pu(Lu,Ru)},$u._Buffer_allocUnsafe=Pu.allocUnsafe||function(Lu){return new Pu(Lu)}}})(minimal$1);var writer=Writer$1,util$5=minimal$1,BufferWriter$1,LongBits$1=util$5.LongBits,base64=util$5.base64,utf8$1=util$5.utf8;function Op(_u,$u,Tu){this.fn=_u,this.len=$u,this.next=void 0,this.val=Tu}function noop$1(){}function State(_u){this.head=_u.head,this.tail=_u.tail,this.len=_u.len,this.next=_u.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function _u(){return util$5.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function _u($u){return new util$5.Array($u)};util$5.Array!==Array&&(Writer$1.alloc=util$5.pool(Writer$1.alloc,util$5.Array.prototype.subarray));Writer$1.prototype._push=function _u($u,Tu,Cu){return this.tail=this.tail.next=new Op($u,Tu,Cu),this.len+=Tu,this};function writeByte(_u,$u,Tu){$u[Tu]=_u&255}function writeVarint32(_u,$u,Tu){for(;_u>127;)$u[Tu++]=_u&127|128,_u>>>=7;$u[Tu]=_u}function VarintOp(_u,$u){this.len=_u,this.next=void 0,this.val=$u}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function _u($u){return this.len+=(this.tail=this.tail.next=new VarintOp(($u=$u>>>0)<128?1:$u<16384?2:$u<2097152?3:$u<268435456?4:5,$u)).len,this};Writer$1.prototype.int32=function _u($u){return $u<0?this._push(writeVarint64,10,LongBits$1.fromNumber($u)):this.uint32($u)};Writer$1.prototype.sint32=function _u($u){return this.uint32(($u<<1^$u>>31)>>>0)};function writeVarint64(_u,$u,Tu){for(;_u.hi;)$u[Tu++]=_u.lo&127|128,_u.lo=(_u.lo>>>7|_u.hi<<25)>>>0,_u.hi>>>=7;for(;_u.lo>127;)$u[Tu++]=_u.lo&127|128,_u.lo=_u.lo>>>7;$u[Tu++]=_u.lo}Writer$1.prototype.uint64=function _u($u){var Tu=LongBits$1.from($u);return this._push(writeVarint64,Tu.length(),Tu)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function _u($u){var Tu=LongBits$1.from($u).zzEncode();return this._push(writeVarint64,Tu.length(),Tu)};Writer$1.prototype.bool=function _u($u){return this._push(writeByte,1,$u?1:0)};function writeFixed32(_u,$u,Tu){$u[Tu]=_u&255,$u[Tu+1]=_u>>>8&255,$u[Tu+2]=_u>>>16&255,$u[Tu+3]=_u>>>24}Writer$1.prototype.fixed32=function _u($u){return this._push(writeFixed32,4,$u>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function _u($u){var Tu=LongBits$1.from($u);return this._push(writeFixed32,4,Tu.lo)._push(writeFixed32,4,Tu.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function _u($u){return this._push(util$5.float.writeFloatLE,4,$u)};Writer$1.prototype.double=function _u($u){return this._push(util$5.float.writeDoubleLE,8,$u)};var writeBytes=util$5.Array.prototype.set?function _u($u,Tu,Cu){Tu.set($u,Cu)}:function _u($u,Tu,Cu){for(var Pu=0;Pu<$u.length;++Pu)Tu[Cu+Pu]=$u[Pu]};Writer$1.prototype.bytes=function _u($u){var Tu=$u.length>>>0;if(!Tu)return this._push(writeByte,1,0);if(util$5.isString($u)){var Cu=Writer$1.alloc(Tu=base64.length($u));base64.decode($u,Cu,0),$u=Cu}return this.uint32(Tu)._push(writeBytes,Tu,$u)};Writer$1.prototype.string=function _u($u){var Tu=utf8$1.length($u);return Tu?this.uint32(Tu)._push(utf8$1.write,Tu,$u):this._push(writeByte,1,0)};Writer$1.prototype.fork=function _u(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function _u(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function _u(){var $u=this.head,Tu=this.tail,Cu=this.len;return this.reset().uint32(Cu),Cu&&(this.tail.next=$u.next,this.tail=Tu,this.len+=Cu),this};Writer$1.prototype.finish=function _u(){for(var $u=this.head.next,Tu=this.constructor.alloc(this.len),Cu=0;$u;)$u.fn($u.val,Tu,Cu),Cu+=$u.len,$u=$u.next;return Tu};Writer$1._configure=function(_u){BufferWriter$1=_u,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$4=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$4._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$4.Buffer&&util$4.Buffer.prototype instanceof Uint8Array&&util$4.Buffer.prototype.set.name==="set"?function($u,Tu,Cu){Tu.set($u,Cu)}:function($u,Tu,Cu){if($u.copy)$u.copy(Tu,Cu,0,$u.length);else for(var Pu=0;Pu<$u.length;)Tu[Cu++]=$u[Pu++]}};BufferWriter.prototype.bytes=function _u($u){util$4.isString($u)&&($u=util$4._Buffer_from($u,"base64"));var Tu=$u.length>>>0;return this.uint32(Tu),Tu&&this._push(BufferWriter.writeBytesBuffer,Tu,$u),this};function writeStringBuffer(_u,$u,Tu){_u.length<40?util$4.utf8.write(_u,$u,Tu):$u.utf8Write?$u.utf8Write(_u,Tu):$u.write(_u,Tu)}BufferWriter.prototype.string=function _u($u){var Tu=util$4.Buffer.byteLength($u);return this.uint32(Tu),Tu&&this._push(writeStringBuffer,Tu,$u),this};BufferWriter._configure();var reader=Reader$1,util$3=minimal$1,BufferReader$1,LongBits=util$3.LongBits,utf8=util$3.utf8;function indexOutOfRange(_u,$u){return RangeError("index out of range: "+_u.pos+" + "+($u||1)+" > "+_u.len)}function Reader$1(_u){this.buf=_u,this.pos=0,this.len=_u.length}var create_array=typeof Uint8Array!="undefined"?function _u($u){if($u instanceof Uint8Array||Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")}:function _u($u){if(Array.isArray($u))return new Reader$1($u);throw Error("illegal buffer")},create=function _u(){return util$3.Buffer?function(Tu){return(Reader$1.create=function(Pu){return util$3.Buffer.isBuffer(Pu)?new BufferReader$1(Pu):create_array(Pu)})(Tu)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$3.Array.prototype.subarray||util$3.Array.prototype.slice;Reader$1.prototype.uint32=function _u(){var $u=4294967295;return function(){if($u=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||($u=($u|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||($u=($u|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return $u;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return $u}}();Reader$1.prototype.int32=function _u(){return this.uint32()|0};Reader$1.prototype.sint32=function _u(){var $u=this.uint32();return $u>>>1^-($u&1)|0};function readLongVarint(){var _u=new LongBits(0,0),$u=0;if(this.len-this.pos>4){for(;$u<4;++$u)if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u;if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<28)>>>0,_u.hi=(_u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return _u;$u=0}else{for(;$u<3;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.lo=(_u.lo|(this.buf[this.pos]&127)<<$u*7)>>>0,this.buf[this.pos++]<128)return _u}return _u.lo=(_u.lo|(this.buf[this.pos++]&127)<<$u*7)>>>0,_u}if(this.len-this.pos>4){for(;$u<5;++$u)if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}else for(;$u<5;++$u){if(this.pos>=this.len)throw indexOutOfRange(this);if(_u.hi=(_u.hi|(this.buf[this.pos]&127)<<$u*7+3)>>>0,this.buf[this.pos++]<128)return _u}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function _u(){return this.uint32()!==0};function readFixed32_end(_u,$u){return(_u[$u-4]|_u[$u-3]<<8|_u[$u-2]<<16|_u[$u-1]<<24)>>>0}Reader$1.prototype.fixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function _u(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var $u=util$3.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$u};Reader$1.prototype.double=function _u(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var $u=util$3.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$u};Reader$1.prototype.bytes=function _u(){var $u=this.uint32(),Tu=this.pos,Cu=this.pos+$u;if(Cu>this.len)throw indexOutOfRange(this,$u);return this.pos+=$u,Array.isArray(this.buf)?this.buf.slice(Tu,Cu):Tu===Cu?new this.buf.constructor(0):this._slice.call(this.buf,Tu,Cu)};Reader$1.prototype.string=function _u(){var $u=this.bytes();return utf8.read($u,0,$u.length)};Reader$1.prototype.skip=function _u($u){if(typeof $u=="number"){if(this.pos+$u>this.len)throw indexOutOfRange(this,$u);this.pos+=$u}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(_u){switch(_u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(_u=this.uint32()&7)!==4;)this.skipType(_u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_u+" at offset "+this.pos)}return this};Reader$1._configure=function(_u){BufferReader$1=_u,Reader$1.create=create(),BufferReader$1._configure();var $u=util$3.Long?"toLong":"toNumber";util$3.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[$u](!1)},uint64:function(){return readLongVarint.call(this)[$u](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[$u](!1)},fixed64:function(){return readFixed64.call(this)[$u](!0)},sfixed64:function(){return readFixed64.call(this)[$u](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$2=minimal$1;function BufferReader(_u){Reader.call(this,_u)}BufferReader._configure=function(){util$2.Buffer&&(BufferReader.prototype._slice=util$2.Buffer.prototype.slice)};BufferReader.prototype.string=function _u(){var $u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$u,this.len))};BufferReader._configure();var rpc={},service=Service,util$1=minimal$1;(Service.prototype=Object.create(util$1.EventEmitter.prototype)).constructor=Service;function Service(_u,$u,Tu){if(typeof _u!="function")throw TypeError("rpcImpl must be a function");util$1.EventEmitter.call(this),this.rpcImpl=_u,this.requestDelimited=Boolean($u),this.responseDelimited=Boolean(Tu)}Service.prototype.rpcCall=function _u($u,Tu,Cu,Pu,Bu){if(!Pu)throw TypeError("request must be specified");var Lu=this;if(!Bu)return util$1.asPromise(_u,Lu,$u,Tu,Cu,Pu);if(!Lu.rpcImpl){setTimeout(function(){Bu(Error("already ended"))},0);return}try{return Lu.rpcImpl($u,Tu[Lu.requestDelimited?"encodeDelimited":"encode"](Pu).finish(),function(Ou,Du){if(Ou)return Lu.emit("error",Ou,$u),Bu(Ou);if(Du===null){Lu.end(!0);return}if(!(Du instanceof Cu))try{Du=Cu[Lu.responseDelimited?"decodeDelimited":"decode"](Du)}catch(Fu){return Lu.emit("error",Fu,$u),Bu(Fu)}return Lu.emit("data",Du,$u),Bu(null,Du)})}catch(Ru){Lu.emit("error",Ru,$u),setTimeout(function(){Bu(Ru)},0);return}};Service.prototype.end=function _u($u){return this.rpcImpl&&($u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(_u){var $u=_u;$u.Service=service})(rpc);var roots={};(function(_u){var $u=_u;$u.build="minimal",$u.Writer=writer,$u.BufferWriter=writer_buffer,$u.Reader=reader,$u.BufferReader=reader_buffer,$u.util=minimal$1,$u.rpc=rpc,$u.roots=roots,$u.configure=Tu;function Tu(){$u.util._configure(),$u.Writer._configure($u.BufferWriter),$u.Reader._configure($u.BufferReader)}Tu()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$6=require$$1,t$8=tslib.exports,i$f=minimal;function n$e(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var r$a=n$e(e$6),o$a=n$e(i$f),s$c=Number(r$a.REVISION);if(s$c<115||s$c>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$8,l$a={},u$a={},h$8=h$8||function(_u,$u){var Tu={},Cu=Tu.lib={},Pu=Cu.Base=function(){function ku(){}return{extend:function(Nu){ku.prototype=this;var Gu=new ku;return Nu&&Gu.mixIn(Nu),Gu.hasOwnProperty("init")||(Gu.init=function(){Gu.$super.init.apply(this,arguments)}),Gu.init.prototype=Gu,Gu.$super=this,Gu},create:function(){var Nu=this.extend();return Nu.init.apply(Nu,arguments),Nu},init:function(){},mixIn:function(Nu){for(var Gu in Nu)Nu.hasOwnProperty(Gu)&&(this[Gu]=Nu[Gu]);Nu.hasOwnProperty("toString")&&(this.toString=Nu.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Bu=Cu.WordArray=Pu.extend({init:function(ku,Nu){ku=this.words=ku||[],this.sigBytes=Nu!=null?Nu:4*ku.length},toString:function(ku){return(ku||Ru).stringify(this)},concat:function(ku){var Nu=this.words,Gu=ku.words,ju=this.sigBytes,Hu=ku.sigBytes;if(this.clamp(),ju%4)for(var Uu=0;Uu<Hu;Uu++){var zu=Gu[Uu>>>2]>>>24-Uu%4*8&255;Nu[ju+Uu>>>2]|=zu<<24-(ju+Uu)%4*8}else for(Uu=0;Uu<Hu;Uu+=4)Nu[ju+Uu>>>2]=Gu[Uu>>>2];return this.sigBytes+=Hu,this},clamp:function(){var ku=this.words,Nu=this.sigBytes;ku[Nu>>>2]&=4294967295<<32-Nu%4*8,ku.length=_u.ceil(Nu/4)},clone:function(){var ku=Pu.clone.call(this);return ku.words=this.words.slice(0),ku},random:function(ku){for(var Nu=[],Gu=0;Gu<ku;Gu+=4)Nu.push(4294967296*_u.random()|0);return new Bu.init(Nu,ku)}}),Lu=Tu.enc={},Ru=Lu.Hex={stringify:function(ku){for(var Nu=ku.words,Gu=ku.sigBytes,ju=[],Hu=0;Hu<Gu;Hu++){var Uu=Nu[Hu>>>2]>>>24-Hu%4*8&255;ju.push((Uu>>>4).toString(16)),ju.push((15&Uu).toString(16))}return ju.join("")},parse:function(ku){for(var Nu=ku.length,Gu=[],ju=0;ju<Nu;ju+=2)Gu[ju>>>3]|=parseInt(ku.substr(ju,2),16)<<24-ju%8*4;return new Bu.init(Gu,Nu/2)}},Ou=Lu.Latin1={stringify:function(ku){for(var Nu=ku.words,Gu=ku.sigBytes,ju=[],Hu=0;Hu<Gu;Hu++){var Uu=Nu[Hu>>>2]>>>24-Hu%4*8&255;ju.push(String.fromCharCode(Uu))}return ju.join("")},parse:function(ku){for(var Nu=ku.length,Gu=[],ju=0;ju<Nu;ju++)Gu[ju>>>2]|=(255&ku.charCodeAt(ju))<<24-ju%4*8;return new Bu.init(Gu,Nu)}},Du=Lu.Utf8={stringify:function(ku){try{return decodeURIComponent(escape(Ou.stringify(ku)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ku){return Ou.parse(unescape(encodeURIComponent(ku)))}},Fu=Cu.BufferedBlockAlgorithm=Pu.extend({reset:function(){this._data=new Bu.init,this._nDataBytes=0},_append:function(ku){typeof ku=="string"&&(ku=Du.parse(ku)),this._data.concat(ku),this._nDataBytes+=ku.sigBytes},_process:function(ku){var Nu=this._data,Gu=Nu.words,ju=Nu.sigBytes,Hu=this.blockSize,Uu=ju/(4*Hu),zu=(Uu=ku?_u.ceil(Uu):_u.max((0|Uu)-this._minBufferSize,0))*Hu,Wu=_u.min(4*zu,ju);if(zu){for(var Qu=0;Qu<zu;Qu+=Hu)this._doProcessBlock(Gu,Qu);var Ku=Gu.splice(0,zu);Nu.sigBytes-=Wu}return new Bu.init(Ku,Wu)},clone:function(){var ku=Pu.clone.call(this);return ku._data=this._data.clone(),ku},_minBufferSize:0});Cu.Hasher=Fu.extend({cfg:Pu.extend(),init:function(ku){this.cfg=this.cfg.extend(ku),this.reset()},reset:function(){Fu.reset.call(this),this._doReset()},update:function(ku){return this._append(ku),this._process(),this},finalize:function(ku){return ku&&this._append(ku),this._doFinalize()},blockSize:16,_createHelper:function(ku){return function(Nu,Gu){return new ku.init(Gu).finalize(Nu)}},_createHmacHelper:function(ku){return function(Nu,Gu){return new Vu.HMAC.init(ku,Gu).finalize(Nu)}}});var Vu=Tu.algo={};return Tu}(Math);function c$d(_u,$u,Tu){_u!=null&&(typeof _u=="number"?this.fromNumber(_u,$u,Tu):$u==null&&typeof _u!="string"?this.fromString(_u,256):this.fromString(_u,$u))}function d$c(){return new c$d(null)}(function(_u){for(var $u=h$8,Tu=(Pu=$u.lib).WordArray,Cu=Pu.Hasher,Pu=$u.algo,Bu=[],Lu=[],Ru=function(Gu){return 4294967296*(Gu-(0|Gu))|0},Ou=2,Du=0;64>Du;){var Fu;e:{Fu=Ou;for(var Vu=_u.sqrt(Fu),ku=2;ku<=Vu;ku++)if(!(Fu%ku)){Fu=!1;break e}Fu=!0}Fu&&(8>Du&&(Bu[Du]=Ru(_u.pow(Ou,.5))),Lu[Du]=Ru(_u.pow(Ou,1/3)),Du++),Ou++}var Nu=[];Pu=Pu.SHA256=Cu.extend({_doReset:function(){this._hash=new Tu.init(Bu.slice(0))},_doProcessBlock:function(Gu,ju){for(var Hu=this._hash.words,Uu=Hu[0],zu=Hu[1],Wu=Hu[2],Qu=Hu[3],Ku=Hu[4],Yu=Hu[5],Xc=Hu[6],_d=Hu[7],_f=0;64>_f;_f++){if(16>_f)Nu[_f]=0|Gu[ju+_f];else{var qu=Nu[_f-15],Xu=Nu[_f-2];Nu[_f]=((qu<<25|qu>>>7)^(qu<<14|qu>>>18)^qu>>>3)+Nu[_f-7]+((Xu<<15|Xu>>>17)^(Xu<<13|Xu>>>19)^Xu>>>10)+Nu[_f-16]}qu=_d+((Ku<<26|Ku>>>6)^(Ku<<21|Ku>>>11)^(Ku<<7|Ku>>>25))+(Ku&Yu^~Ku&Xc)+Lu[_f]+Nu[_f],Xu=((Uu<<30|Uu>>>2)^(Uu<<19|Uu>>>13)^(Uu<<10|Uu>>>22))+(Uu&zu^Uu&Wu^zu&Wu),_d=Xc,Xc=Yu,Yu=Ku,Ku=Qu+qu|0,Qu=Wu,Wu=zu,zu=Uu,Uu=qu+Xu|0}Hu[0]=Hu[0]+Uu|0,Hu[1]=Hu[1]+zu|0,Hu[2]=Hu[2]+Wu|0,Hu[3]=Hu[3]+Qu|0,Hu[4]=Hu[4]+Ku|0,Hu[5]=Hu[5]+Yu|0,Hu[6]=Hu[6]+Xc|0,Hu[7]=Hu[7]+_d|0},_doFinalize:function(){var Gu=this._data,ju=Gu.words,Hu=8*this._nDataBytes,Uu=8*Gu.sigBytes;return ju[Uu>>>5]|=128<<24-Uu%32,ju[14+(Uu+64>>>9<<4)]=_u.floor(Hu/4294967296),ju[15+(Uu+64>>>9<<4)]=Hu,Gu.sigBytes=4*ju.length,this._process(),this._hash},clone:function(){var Gu=Cu.clone.call(this);return Gu._hash=this._hash.clone(),Gu}}),$u.SHA256=Cu._createHelper(Pu),$u.HmacSHA256=Cu._createHmacHelper(Pu)})(Math),h$8.lib.Cipher||function(_u){var $u=(Nu=h$8).lib,Tu=$u.Base,Cu=$u.WordArray,Pu=$u.BufferedBlockAlgorithm,Bu=Nu.enc.Base64,Lu=Nu.algo.EvpKDF,Ru=$u.Cipher=Pu.extend({cfg:Tu.extend(),createEncryptor:function(ju,Hu){return this.create(this._ENC_XFORM_MODE,ju,Hu)},createDecryptor:function(ju,Hu){return this.create(this._DEC_XFORM_MODE,ju,Hu)},init:function(ju,Hu,Uu){this.cfg=this.cfg.extend(Uu),this._xformMode=ju,this._key=Hu,this.reset()},reset:function(){Pu.reset.call(this),this._doReset()},process:function(ju){return this._append(ju),this._process()},finalize:function(ju){return ju&&this._append(ju),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(ju){return{encrypt:function(Hu,Uu,zu){return(typeof Uu=="string"?Gu:ku).encrypt(ju,Hu,Uu,zu)},decrypt:function(Hu,Uu,zu){return(typeof Uu=="string"?Gu:ku).decrypt(ju,Hu,Uu,zu)}}}});$u.StreamCipher=Ru.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Ou=Nu.mode={},Du=function(ju,Hu,Uu){var zu=this._iv;zu?this._iv=void 0:zu=this._prevBlock;for(var Wu=0;Wu<Uu;Wu++)ju[Hu+Wu]^=zu[Wu]},Fu=($u.BlockCipherMode=Tu.extend({createEncryptor:function(ju,Hu){return this.Encryptor.create(ju,Hu)},createDecryptor:function(ju,Hu){return this.Decryptor.create(ju,Hu)},init:function(ju,Hu){this._cipher=ju,this._iv=Hu}})).extend();Fu.Encryptor=Fu.extend({processBlock:function(ju,Hu){var Uu=this._cipher,zu=Uu.blockSize;Du.call(this,ju,Hu,zu),Uu.encryptBlock(ju,Hu),this._prevBlock=ju.slice(Hu,Hu+zu)}}),Fu.Decryptor=Fu.extend({processBlock:function(ju,Hu){var Uu=this._cipher,zu=Uu.blockSize,Wu=ju.slice(Hu,Hu+zu);Uu.decryptBlock(ju,Hu),Du.call(this,ju,Hu,zu),this._prevBlock=Wu}}),Ou=Ou.CBC=Fu,Fu=(Nu.pad={}).Pkcs7={pad:function(ju,Hu){for(var Uu,zu=(Uu=(Uu=4*Hu)-ju.sigBytes%Uu)<<24|Uu<<16|Uu<<8|Uu,Wu=[],Qu=0;Qu<Uu;Qu+=4)Wu.push(zu);Uu=Cu.create(Wu,Uu),ju.concat(Uu)},unpad:function(ju){ju.sigBytes-=255&ju.words[ju.sigBytes-1>>>2]}},$u.BlockCipher=Ru.extend({cfg:Ru.cfg.extend({mode:Ou,padding:Fu}),reset:function(){Ru.reset.call(this);var ju=(Hu=this.cfg).iv,Hu=Hu.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Uu=Hu.createEncryptor;else Uu=Hu.createDecryptor,this._minBufferSize=1;this._mode=Uu.call(Hu,this,ju&&ju.words)},_doProcessBlock:function(ju,Hu){this._mode.processBlock(ju,Hu)},_doFinalize:function(){var ju=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){ju.pad(this._data,this.blockSize);var Hu=this._process(!0)}else Hu=this._process(!0),ju.unpad(Hu);return Hu},blockSize:4});var Vu=$u.CipherParams=Tu.extend({init:function(ju){this.mixIn(ju)},toString:function(ju){return(ju||this.formatter).stringify(this)}}),ku=(Ou=(Nu.format={}).OpenSSL={stringify:function(ju){var Hu=ju.ciphertext;return((ju=ju.salt)?Cu.create([1398893684,1701076831]).concat(ju).concat(Hu):Hu).toString(Bu)},parse:function(ju){var Hu=(ju=Bu.parse(ju)).words;if(Hu[0]==1398893684&&Hu[1]==1701076831){var Uu=Cu.create(Hu.slice(2,4));Hu.splice(0,4),ju.sigBytes-=16}return Vu.create({ciphertext:ju,salt:Uu})}},$u.SerializableCipher=Tu.extend({cfg:Tu.extend({format:Ou}),encrypt:function(ju,Hu,Uu,zu){zu=this.cfg.extend(zu);var Wu=ju.createEncryptor(Uu,zu);return Hu=Wu.finalize(Hu),Wu=Wu.cfg,Vu.create({ciphertext:Hu,key:Uu,iv:Wu.iv,algorithm:ju,mode:Wu.mode,padding:Wu.padding,blockSize:ju.blockSize,formatter:zu.format})},decrypt:function(ju,Hu,Uu,zu){return zu=this.cfg.extend(zu),Hu=this._parse(Hu,zu.format),ju.createDecryptor(Uu,zu).finalize(Hu.ciphertext)},_parse:function(ju,Hu){return typeof ju=="string"?Hu.parse(ju,this):ju}})),Nu=(Nu.kdf={}).OpenSSL={execute:function(ju,Hu,Uu,zu){return zu||(zu=Cu.random(8)),ju=Lu.create({keySize:Hu+Uu}).compute(ju,zu),Uu=Cu.create(ju.words.slice(Hu),4*Uu),ju.sigBytes=4*Hu,Vu.create({key:ju,iv:Uu,salt:zu})}},Gu=$u.PasswordBasedCipher=ku.extend({cfg:ku.cfg.extend({kdf:Nu}),encrypt:function(ju,Hu,Uu,zu){return Uu=(zu=this.cfg.extend(zu)).kdf.execute(Uu,ju.keySize,ju.ivSize),zu.iv=Uu.iv,(ju=ku.encrypt.call(this,ju,Hu,Uu.key,zu)).mixIn(Uu),ju},decrypt:function(ju,Hu,Uu,zu){return zu=this.cfg.extend(zu),Hu=this._parse(Hu,zu.format),Uu=zu.kdf.execute(Uu,ju.keySize,ju.ivSize,Hu.salt),zu.iv=Uu.iv,ku.decrypt.call(this,ju,Hu,Uu.key,zu)}})}(),function(){for(var _u=h$8,$u=_u.lib.BlockCipher,Tu=_u.algo,Cu=[],Pu=[],Bu=[],Lu=[],Ru=[],Ou=[],Du=[],Fu=[],Vu=[],ku=[],Nu=[],Gu=0;256>Gu;Gu++)Nu[Gu]=128>Gu?Gu<<1:Gu<<1^283;var ju=0,Hu=0;for(Gu=0;256>Gu;Gu++){var Uu=(Uu=Hu^Hu<<1^Hu<<2^Hu<<3^Hu<<4)>>>8^255&Uu^99;Cu[ju]=Uu,Pu[Uu]=ju;var zu=Nu[ju],Wu=Nu[zu],Qu=Nu[Wu],Ku=257*Nu[Uu]^16843008*Uu;Bu[ju]=Ku<<24|Ku>>>8,Lu[ju]=Ku<<16|Ku>>>16,Ru[ju]=Ku<<8|Ku>>>24,Ou[ju]=Ku,Ku=16843009*Qu^65537*Wu^257*zu^16843008*ju,Du[Uu]=Ku<<24|Ku>>>8,Fu[Uu]=Ku<<16|Ku>>>16,Vu[Uu]=Ku<<8|Ku>>>24,ku[Uu]=Ku,ju?(ju=zu^Nu[Nu[Nu[Qu^zu]]],Hu^=Nu[Nu[Hu]]):ju=Hu=1}var Yu=[0,1,2,4,8,16,32,64,128,27,54];Tu=Tu.AES=$u.extend({_doReset:function(){for(var Xc=(_f=this._key).words,_d=_f.sigBytes/4,_f=4*((this._nRounds=_d+6)+1),qu=this._keySchedule=[],Xu=0;Xu<_f;Xu++)if(Xu<_d)qu[Xu]=Xc[Xu];else{var Zu=qu[Xu-1];Xu%_d?6<_d&&Xu%_d==4&&(Zu=Cu[Zu>>>24]<<24|Cu[Zu>>>16&255]<<16|Cu[Zu>>>8&255]<<8|Cu[255&Zu]):(Zu=Cu[(Zu=Zu<<8|Zu>>>24)>>>24]<<24|Cu[Zu>>>16&255]<<16|Cu[Zu>>>8&255]<<8|Cu[255&Zu],Zu^=Yu[Xu/_d|0]<<24),qu[Xu]=qu[Xu-_d]^Zu}for(Xc=this._invKeySchedule=[],_d=0;_d<_f;_d++)Xu=_f-_d,Zu=_d%4?qu[Xu]:qu[Xu-4],Xc[_d]=4>_d||4>=Xu?Zu:Du[Cu[Zu>>>24]]^Fu[Cu[Zu>>>16&255]]^Vu[Cu[Zu>>>8&255]]^ku[Cu[255&Zu]]},encryptBlock:function(Xc,_d){this._doCryptBlock(Xc,_d,this._keySchedule,Bu,Lu,Ru,Ou,Cu)},decryptBlock:function(Xc,_d){var _f=Xc[_d+1];Xc[_d+1]=Xc[_d+3],Xc[_d+3]=_f,this._doCryptBlock(Xc,_d,this._invKeySchedule,Du,Fu,Vu,ku,Pu),_f=Xc[_d+1],Xc[_d+1]=Xc[_d+3],Xc[_d+3]=_f},_doCryptBlock:function(Xc,_d,_f,qu,Xu,Zu,_c,Ju){for(var _h=this._nRounds,ep=Xc[_d]^_f[0],tp=Xc[_d+1]^_f[1],rp=Xc[_d+2]^_f[2],dp=Xc[_d+3]^_f[3],cp=4,Sp=1;Sp<_h;Sp++){var yp=qu[ep>>>24]^Xu[tp>>>16&255]^Zu[rp>>>8&255]^_c[255&dp]^_f[cp++],Bp=qu[tp>>>24]^Xu[rp>>>16&255]^Zu[dp>>>8&255]^_c[255&ep]^_f[cp++],_p=qu[rp>>>24]^Xu[dp>>>16&255]^Zu[ep>>>8&255]^_c[255&tp]^_f[cp++];dp=qu[dp>>>24]^Xu[ep>>>16&255]^Zu[tp>>>8&255]^_c[255&rp]^_f[cp++],ep=yp,tp=Bp,rp=_p}yp=(Ju[ep>>>24]<<24|Ju[tp>>>16&255]<<16|Ju[rp>>>8&255]<<8|Ju[255&dp])^_f[cp++],Bp=(Ju[tp>>>24]<<24|Ju[rp>>>16&255]<<16|Ju[dp>>>8&255]<<8|Ju[255&ep])^_f[cp++],_p=(Ju[rp>>>24]<<24|Ju[dp>>>16&255]<<16|Ju[ep>>>8&255]<<8|Ju[255&tp])^_f[cp++],dp=(Ju[dp>>>24]<<24|Ju[ep>>>16&255]<<16|Ju[tp>>>8&255]<<8|Ju[255&rp])^_f[cp++],Xc[_d]=yp,Xc[_d+1]=Bp,Xc[_d+2]=_p,Xc[_d+3]=dp},keySize:8}),_u.AES=$u._createHelper(Tu)}(),u$a.lang={extend:function(_u,$u,Tu){if(!$u||!_u)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Cu=function(){};if(Cu.prototype=$u.prototype,_u.prototype=new Cu,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u),Tu){var Pu;for(Pu in Tu)_u.prototype[Pu]=Tu[Pu];var Bu=function(){},Lu=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Bu=function(Ru,Ou){for(Pu=0;Pu<Lu.length;Pu+=1){var Du=Lu[Pu],Fu=Ou[Du];typeof Fu=="function"&&Fu!=Object.prototype[Du]&&(Ru[Du]=Fu)}})}catch{}Bu(_u.prototype,Tu)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$d.prototype.am=function(_u,$u,Tu,Cu,Pu,Bu){for(var Lu=32767&$u,Ru=$u>>15;--Bu>=0;){var Ou=32767&this[_u],Du=this[_u++]>>15,Fu=Ru*Ou+Du*Lu;Pu=((Ou=Lu*Ou+((32767&Fu)<<15)+Tu[Cu]+(1073741823&Pu))>>>30)+(Fu>>>15)+Ru*Du+(Pu>>>30),Tu[Cu++]=1073741823&Ou}return Pu},a$8=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$d.prototype.am=function(_u,$u,Tu,Cu,Pu,Bu){for(;--Bu>=0;){var Lu=$u*this[_u++]+Tu[Cu]+Pu;Pu=Math.floor(Lu/67108864),Tu[Cu++]=67108863&Lu}return Pu},a$8=26):(c$d.prototype.am=function(_u,$u,Tu,Cu,Pu,Bu){for(var Lu=16383&$u,Ru=$u>>14;--Bu>=0;){var Ou=16383&this[_u],Du=this[_u++]>>14,Fu=Ru*Ou+Du*Lu;Pu=((Ou=Lu*Ou+((16383&Fu)<<14)+Tu[Cu]+Pu)>>28)+(Fu>>14)+Ru*Du,Tu[Cu++]=268435455&Ou}return Pu},a$8=28),c$d.prototype.DB=a$8,c$d.prototype.DM=(1<<a$8)-1,c$d.prototype.DV=1<<a$8;c$d.prototype.FV=Math.pow(2,52),c$d.prototype.F1=52-a$8,c$d.prototype.F2=2*a$8-52;var p$c,f$6,A$9=new Array;for(p$c="0".charCodeAt(0),f$6=0;f$6<=9;++f$6)A$9[p$c++]=f$6;for(p$c="a".charCodeAt(0),f$6=10;f$6<36;++f$6)A$9[p$c++]=f$6;for(p$c="A".charCodeAt(0),f$6=10;f$6<36;++f$6)A$9[p$c++]=f$6;function g$a(_u){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(_u)}function m$b(_u,$u){var Tu=A$9[_u.charCodeAt($u)];return Tu==null?-1:Tu}function v$9(_u){var $u=d$c();return $u.fromInt(_u),$u}function y$7(_u){var $u,Tu=1;return($u=_u>>>16)!=0&&(_u=$u,Tu+=16),($u=_u>>8)!=0&&(_u=$u,Tu+=8),($u=_u>>4)!=0&&(_u=$u,Tu+=4),($u=_u>>2)!=0&&(_u=$u,Tu+=2),($u=_u>>1)!=0&&(_u=$u,Tu+=1),Tu}function b$8(_u){this.m=_u}function x$b(_u){this.m=_u,this.mp=_u.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<_u.DB-15)-1,this.mt2=2*_u.t}function w$8(_u,$u){return _u&$u}function E$f(_u,$u){return _u|$u}function M$a(_u,$u){return _u^$u}function I$9(_u,$u){return _u&~$u}function S$7(_u){if(_u==0)return-1;var $u=0;return(65535&_u)==0&&(_u>>=16,$u+=16),(255&_u)==0&&(_u>>=8,$u+=8),(15&_u)==0&&(_u>>=4,$u+=4),(3&_u)==0&&(_u>>=2,$u+=2),(1&_u)==0&&++$u,$u}function C$8(_u){for(var $u=0;_u!=0;)_u&=_u-1,++$u;return $u}function B$a(){}function T$5(_u){return _u}function P$d(_u){this.r2=d$c(),this.q3=d$c(),c$d.ONE.dlShiftTo(2*_u.t,this.r2),this.mu=this.r2.divide(_u),this.m=_u}b$8.prototype.convert=function(_u){return _u.s<0||_u.compareTo(this.m)>=0?_u.mod(this.m):_u},b$8.prototype.revert=function(_u){return _u},b$8.prototype.reduce=function(_u){_u.divRemTo(this.m,null,_u)},b$8.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},b$8.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},x$b.prototype.convert=function(_u){var $u=d$c();return _u.abs().dlShiftTo(this.m.t,$u),$u.divRemTo(this.m,null,$u),_u.s<0&&$u.compareTo(c$d.ZERO)>0&&this.m.subTo($u,$u),$u},x$b.prototype.revert=function(_u){var $u=d$c();return _u.copyTo($u),this.reduce($u),$u},x$b.prototype.reduce=function(_u){for(;_u.t<=this.mt2;)_u[_u.t++]=0;for(var $u=0;$u<this.m.t;++$u){var Tu=32767&_u[$u],Cu=Tu*this.mpl+((Tu*this.mph+(_u[$u]>>15)*this.mpl&this.um)<<15)&_u.DM;for(_u[Tu=$u+this.m.t]+=this.m.am(0,Cu,_u,$u,0,this.m.t);_u[Tu]>=_u.DV;)_u[Tu]-=_u.DV,_u[++Tu]++}_u.clamp(),_u.drShiftTo(this.m.t,_u),_u.compareTo(this.m)>=0&&_u.subTo(this.m,_u)},x$b.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},x$b.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)},c$d.prototype.copyTo=function(_u){for(var $u=this.t-1;$u>=0;--$u)_u[$u]=this[$u];_u.t=this.t,_u.s=this.s},c$d.prototype.fromInt=function(_u){this.t=1,this.s=_u<0?-1:0,_u>0?this[0]=_u:_u<-1?this[0]=_u+this.DV:this.t=0},c$d.prototype.fromString=function(_u,$u){var Tu;if($u==16)Tu=4;else if($u==8)Tu=3;else if($u==256)Tu=8;else if($u==2)Tu=1;else if($u==32)Tu=5;else{if($u!=4)return void this.fromRadix(_u,$u);Tu=2}this.t=0,this.s=0;for(var Cu=_u.length,Pu=!1,Bu=0;--Cu>=0;){var Lu=Tu==8?255&_u[Cu]:m$b(_u,Cu);Lu<0?_u.charAt(Cu)=="-"&&(Pu=!0):(Pu=!1,Bu==0?this[this.t++]=Lu:Bu+Tu>this.DB?(this[this.t-1]|=(Lu&(1<<this.DB-Bu)-1)<<Bu,this[this.t++]=Lu>>this.DB-Bu):this[this.t-1]|=Lu<<Bu,(Bu+=Tu)>=this.DB&&(Bu-=this.DB))}Tu==8&&(128&_u[0])!=0&&(this.s=-1,Bu>0&&(this[this.t-1]|=(1<<this.DB-Bu)-1<<Bu)),this.clamp(),Pu&&c$d.ZERO.subTo(this,this)},c$d.prototype.clamp=function(){for(var _u=this.s&this.DM;this.t>0&&this[this.t-1]==_u;)--this.t},c$d.prototype.dlShiftTo=function(_u,$u){var Tu;for(Tu=this.t-1;Tu>=0;--Tu)$u[Tu+_u]=this[Tu];for(Tu=_u-1;Tu>=0;--Tu)$u[Tu]=0;$u.t=this.t+_u,$u.s=this.s},c$d.prototype.drShiftTo=function(_u,$u){for(var Tu=_u;Tu<this.t;++Tu)$u[Tu-_u]=this[Tu];$u.t=Math.max(this.t-_u,0),$u.s=this.s},c$d.prototype.lShiftTo=function(_u,$u){var Tu,Cu=_u%this.DB,Pu=this.DB-Cu,Bu=(1<<Pu)-1,Lu=Math.floor(_u/this.DB),Ru=this.s<<Cu&this.DM;for(Tu=this.t-1;Tu>=0;--Tu)$u[Tu+Lu+1]=this[Tu]>>Pu|Ru,Ru=(this[Tu]&Bu)<<Cu;for(Tu=Lu-1;Tu>=0;--Tu)$u[Tu]=0;$u[Lu]=Ru,$u.t=this.t+Lu+1,$u.s=this.s,$u.clamp()},c$d.prototype.rShiftTo=function(_u,$u){$u.s=this.s;var Tu=Math.floor(_u/this.DB);if(Tu>=this.t)$u.t=0;else{var Cu=_u%this.DB,Pu=this.DB-Cu,Bu=(1<<Cu)-1;$u[0]=this[Tu]>>Cu;for(var Lu=Tu+1;Lu<this.t;++Lu)$u[Lu-Tu-1]|=(this[Lu]&Bu)<<Pu,$u[Lu-Tu]=this[Lu]>>Cu;Cu>0&&($u[this.t-Tu-1]|=(this.s&Bu)<<Pu),$u.t=this.t-Tu,$u.clamp()}},c$d.prototype.subTo=function(_u,$u){for(var Tu=0,Cu=0,Pu=Math.min(_u.t,this.t);Tu<Pu;)Cu+=this[Tu]-_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;if(_u.t<this.t){for(Cu-=_u.s;Tu<this.t;)Cu+=this[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=this.s}else{for(Cu+=this.s;Tu<_u.t;)Cu-=_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu-=_u.s}$u.s=Cu<0?-1:0,Cu<-1?$u[Tu++]=this.DV+Cu:Cu>0&&($u[Tu++]=Cu),$u.t=Tu,$u.clamp()},c$d.prototype.multiplyTo=function(_u,$u){var Tu=this.abs(),Cu=_u.abs(),Pu=Tu.t;for($u.t=Pu+Cu.t;--Pu>=0;)$u[Pu]=0;for(Pu=0;Pu<Cu.t;++Pu)$u[Pu+Tu.t]=Tu.am(0,Cu[Pu],$u,Pu,0,Tu.t);$u.s=0,$u.clamp(),this.s!=_u.s&&c$d.ZERO.subTo($u,$u)},c$d.prototype.squareTo=function(_u){for(var $u=this.abs(),Tu=_u.t=2*$u.t;--Tu>=0;)_u[Tu]=0;for(Tu=0;Tu<$u.t-1;++Tu){var Cu=$u.am(Tu,$u[Tu],_u,2*Tu,0,1);(_u[Tu+$u.t]+=$u.am(Tu+1,2*$u[Tu],_u,2*Tu+1,Cu,$u.t-Tu-1))>=$u.DV&&(_u[Tu+$u.t]-=$u.DV,_u[Tu+$u.t+1]=1)}_u.t>0&&(_u[_u.t-1]+=$u.am(Tu,$u[Tu],_u,2*Tu,0,1)),_u.s=0,_u.clamp()},c$d.prototype.divRemTo=function(_u,$u,Tu){var Cu=_u.abs();if(!(Cu.t<=0)){var Pu=this.abs();if(Pu.t<Cu.t)return $u!=null&&$u.fromInt(0),void(Tu!=null&&this.copyTo(Tu));Tu==null&&(Tu=d$c());var Bu=d$c(),Lu=this.s,Ru=_u.s,Ou=this.DB-y$7(Cu[Cu.t-1]);Ou>0?(Cu.lShiftTo(Ou,Bu),Pu.lShiftTo(Ou,Tu)):(Cu.copyTo(Bu),Pu.copyTo(Tu));var Du=Bu.t,Fu=Bu[Du-1];if(Fu!=0){var Vu=Fu*(1<<this.F1)+(Du>1?Bu[Du-2]>>this.F2:0),ku=this.FV/Vu,Nu=(1<<this.F1)/Vu,Gu=1<<this.F2,ju=Tu.t,Hu=ju-Du,Uu=$u==null?d$c():$u;for(Bu.dlShiftTo(Hu,Uu),Tu.compareTo(Uu)>=0&&(Tu[Tu.t++]=1,Tu.subTo(Uu,Tu)),c$d.ONE.dlShiftTo(Du,Uu),Uu.subTo(Bu,Bu);Bu.t<Du;)Bu[Bu.t++]=0;for(;--Hu>=0;){var zu=Tu[--ju]==Fu?this.DM:Math.floor(Tu[ju]*ku+(Tu[ju-1]+Gu)*Nu);if((Tu[ju]+=Bu.am(0,zu,Tu,Hu,0,Du))<zu)for(Bu.dlShiftTo(Hu,Uu),Tu.subTo(Uu,Tu);Tu[ju]<--zu;)Tu.subTo(Uu,Tu)}$u!=null&&(Tu.drShiftTo(Du,$u),Lu!=Ru&&c$d.ZERO.subTo($u,$u)),Tu.t=Du,Tu.clamp(),Ou>0&&Tu.rShiftTo(Ou,Tu),Lu<0&&c$d.ZERO.subTo(Tu,Tu)}}},c$d.prototype.invDigit=function(){if(this.t<1)return 0;var _u=this[0];if((1&_u)==0)return 0;var $u=3&_u;return($u=($u=($u=($u=$u*(2-(15&_u)*$u)&15)*(2-(255&_u)*$u)&255)*(2-((65535&_u)*$u&65535))&65535)*(2-_u*$u%this.DV)%this.DV)>0?this.DV-$u:-$u},c$d.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$d.prototype.exp=function(_u,$u){if(_u>4294967295||_u<1)return c$d.ONE;var Tu=d$c(),Cu=d$c(),Pu=$u.convert(this),Bu=y$7(_u)-1;for(Pu.copyTo(Tu);--Bu>=0;)if($u.sqrTo(Tu,Cu),(_u&1<<Bu)>0)$u.mulTo(Cu,Pu,Tu);else{var Lu=Tu;Tu=Cu,Cu=Lu}return $u.revert(Tu)},c$d.prototype.toString=function(_u){if(this.s<0)return"-"+this.negate().toString(_u);var $u;if(_u==16)$u=4;else if(_u==8)$u=3;else if(_u==2)$u=1;else if(_u==32)$u=5;else{if(_u!=4)return this.toRadix(_u);$u=2}var Tu,Cu=(1<<$u)-1,Pu=!1,Bu="",Lu=this.t,Ru=this.DB-Lu*this.DB%$u;if(Lu-- >0)for(Ru<this.DB&&(Tu=this[Lu]>>Ru)>0&&(Pu=!0,Bu=g$a(Tu));Lu>=0;)Ru<$u?(Tu=(this[Lu]&(1<<Ru)-1)<<$u-Ru,Tu|=this[--Lu]>>(Ru+=this.DB-$u)):(Tu=this[Lu]>>(Ru-=$u)&Cu,Ru<=0&&(Ru+=this.DB,--Lu)),Tu>0&&(Pu=!0),Pu&&(Bu+=g$a(Tu));return Pu?Bu:"0"},c$d.prototype.negate=function(){var _u=d$c();return c$d.ZERO.subTo(this,_u),_u},c$d.prototype.abs=function(){return this.s<0?this.negate():this},c$d.prototype.compareTo=function(_u){var $u=this.s-_u.s;if($u!=0)return $u;var Tu=this.t;if(($u=Tu-_u.t)!=0)return this.s<0?-$u:$u;for(;--Tu>=0;)if(($u=this[Tu]-_u[Tu])!=0)return $u;return 0},c$d.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$7(this[this.t-1]^this.s&this.DM)},c$d.prototype.mod=function(_u){var $u=d$c();return this.abs().divRemTo(_u,null,$u),this.s<0&&$u.compareTo(c$d.ZERO)>0&&_u.subTo($u,$u),$u},c$d.prototype.modPowInt=function(_u,$u){var Tu;return Tu=_u<256||$u.isEven()?new b$8($u):new x$b($u),this.exp(_u,Tu)},c$d.ZERO=v$9(0),c$d.ONE=v$9(1),B$a.prototype.convert=T$5,B$a.prototype.revert=T$5,B$a.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu)},B$a.prototype.sqrTo=function(_u,$u){_u.squareTo($u)},P$d.prototype.convert=function(_u){if(_u.s<0||_u.t>2*this.m.t)return _u.mod(this.m);if(_u.compareTo(this.m)<0)return _u;var $u=d$c();return _u.copyTo($u),this.reduce($u),$u},P$d.prototype.revert=function(_u){return _u},P$d.prototype.reduce=function(_u){for(_u.drShiftTo(this.m.t-1,this.r2),_u.t>this.m.t+1&&(_u.t=this.m.t+1,_u.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_u.compareTo(this.r2)<0;)_u.dAddOffset(1,this.m.t+1);for(_u.subTo(this.r2,_u);_u.compareTo(this.m)>=0;)_u.subTo(this.m,_u)},P$d.prototype.mulTo=function(_u,$u,Tu){_u.multiplyTo($u,Tu),this.reduce(Tu)},P$d.prototype.sqrTo=function(_u,$u){_u.squareTo($u),this.reduce($u)};var R$d=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$6=(1<<26)/R$d[R$d.length-1];c$d.prototype.chunkSize=function(_u){return Math.floor(Math.LN2*this.DB/Math.log(_u))},c$d.prototype.toRadix=function(_u){if(_u==null&&(_u=10),this.signum()==0||_u<2||_u>36)return"0";var $u=this.chunkSize(_u),Tu=Math.pow(_u,$u),Cu=v$9(Tu),Pu=d$c(),Bu=d$c(),Lu="";for(this.divRemTo(Cu,Pu,Bu);Pu.signum()>0;)Lu=(Tu+Bu.intValue()).toString(_u).substr(1)+Lu,Pu.divRemTo(Cu,Pu,Bu);return Bu.intValue().toString(_u)+Lu},c$d.prototype.fromRadix=function(_u,$u){this.fromInt(0),$u==null&&($u=10);for(var Tu=this.chunkSize($u),Cu=Math.pow($u,Tu),Pu=!1,Bu=0,Lu=0,Ru=0;Ru<_u.length;++Ru){var Ou=m$b(_u,Ru);Ou<0?_u.charAt(Ru)=="-"&&this.signum()==0&&(Pu=!0):(Lu=$u*Lu+Ou,++Bu>=Tu&&(this.dMultiply(Cu),this.dAddOffset(Lu,0),Bu=0,Lu=0))}Bu>0&&(this.dMultiply(Math.pow($u,Bu)),this.dAddOffset(Lu,0)),Pu&&c$d.ZERO.subTo(this,this)},c$d.prototype.fromNumber=function(_u,$u,Tu){if(typeof $u=="number")if(_u<2)this.fromInt(1);else for(this.fromNumber(_u,Tu),this.testBit(_u-1)||this.bitwiseTo(c$d.ONE.shiftLeft(_u-1),E$f,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime($u);)this.dAddOffset(2,0),this.bitLength()>_u&&this.subTo(c$d.ONE.shiftLeft(_u-1),this);else{var Cu=new Array,Pu=7&_u;Cu.length=1+(_u>>3),$u.nextBytes(Cu),Pu>0?Cu[0]&=(1<<Pu)-1:Cu[0]=0,this.fromString(Cu,256)}},c$d.prototype.bitwiseTo=function(_u,$u,Tu){var Cu,Pu,Bu=Math.min(_u.t,this.t);for(Cu=0;Cu<Bu;++Cu)Tu[Cu]=$u(this[Cu],_u[Cu]);if(_u.t<this.t){for(Pu=_u.s&this.DM,Cu=Bu;Cu<this.t;++Cu)Tu[Cu]=$u(this[Cu],Pu);Tu.t=this.t}else{for(Pu=this.s&this.DM,Cu=Bu;Cu<_u.t;++Cu)Tu[Cu]=$u(Pu,_u[Cu]);Tu.t=_u.t}Tu.s=$u(this.s,_u.s),Tu.clamp()},c$d.prototype.changeBit=function(_u,$u){var Tu=c$d.ONE.shiftLeft(_u);return this.bitwiseTo(Tu,$u,Tu),Tu},c$d.prototype.addTo=function(_u,$u){for(var Tu=0,Cu=0,Pu=Math.min(_u.t,this.t);Tu<Pu;)Cu+=this[Tu]+_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;if(_u.t<this.t){for(Cu+=_u.s;Tu<this.t;)Cu+=this[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=this.s}else{for(Cu+=this.s;Tu<_u.t;)Cu+=_u[Tu],$u[Tu++]=Cu&this.DM,Cu>>=this.DB;Cu+=_u.s}$u.s=Cu<0?-1:0,Cu>0?$u[Tu++]=Cu:Cu<-1&&($u[Tu++]=this.DV+Cu),$u.t=Tu,$u.clamp()},c$d.prototype.dMultiply=function(_u){this[this.t]=this.am(0,_u-1,this,0,0,this.t),++this.t,this.clamp()},c$d.prototype.dAddOffset=function(_u,$u){if(_u!=0){for(;this.t<=$u;)this[this.t++]=0;for(this[$u]+=_u;this[$u]>=this.DV;)this[$u]-=this.DV,++$u>=this.t&&(this[this.t++]=0),++this[$u]}},c$d.prototype.multiplyLowerTo=function(_u,$u,Tu){var Cu,Pu=Math.min(this.t+_u.t,$u);for(Tu.s=0,Tu.t=Pu;Pu>0;)Tu[--Pu]=0;for(Cu=Tu.t-this.t;Pu<Cu;++Pu)Tu[Pu+this.t]=this.am(0,_u[Pu],Tu,Pu,0,this.t);for(Cu=Math.min(_u.t,$u);Pu<Cu;++Pu)this.am(0,_u[Pu],Tu,Pu,0,$u-Pu);Tu.clamp()},c$d.prototype.multiplyUpperTo=function(_u,$u,Tu){--$u;var Cu=Tu.t=this.t+_u.t-$u;for(Tu.s=0;--Cu>=0;)Tu[Cu]=0;for(Cu=Math.max($u-this.t,0);Cu<_u.t;++Cu)Tu[this.t+Cu-$u]=this.am($u-Cu,_u[Cu],Tu,0,0,this.t+Cu-$u);Tu.clamp(),Tu.drShiftTo(1,Tu)},c$d.prototype.modInt=function(_u){if(_u<=0)return 0;var $u=this.DV%_u,Tu=this.s<0?_u-1:0;if(this.t>0)if($u==0)Tu=this[0]%_u;else for(var Cu=this.t-1;Cu>=0;--Cu)Tu=($u*Tu+this[Cu])%_u;return Tu},c$d.prototype.millerRabin=function(_u){var $u=this.subtract(c$d.ONE),Tu=$u.getLowestSetBit();if(Tu<=0)return!1;var Cu=$u.shiftRight(Tu);(_u=_u+1>>1)>R$d.length&&(_u=R$d.length);for(var Pu=d$c(),Bu=0;Bu<_u;++Bu){Pu.fromInt(R$d[Math.floor(Math.random()*R$d.length)]);var Lu=Pu.modPow(Cu,this);if(Lu.compareTo(c$d.ONE)!=0&&Lu.compareTo($u)!=0){for(var Ru=1;Ru++<Tu&&Lu.compareTo($u)!=0;)if((Lu=Lu.modPowInt(2,this)).compareTo(c$d.ONE)==0)return!1;if(Lu.compareTo($u)!=0)return!1}}return!0},c$d.prototype.clone=function(){var _u=d$c();return this.copyTo(_u),_u},c$d.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$d.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$d.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$d.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$d.prototype.toByteArray=function(){var _u=this.t,$u=new Array;$u[0]=this.s;var Tu,Cu=this.DB-_u*this.DB%8,Pu=0;if(_u-- >0)for(Cu<this.DB&&(Tu=this[_u]>>Cu)!=(this.s&this.DM)>>Cu&&($u[Pu++]=Tu|this.s<<this.DB-Cu);_u>=0;)Cu<8?(Tu=(this[_u]&(1<<Cu)-1)<<8-Cu,Tu|=this[--_u]>>(Cu+=this.DB-8)):(Tu=this[_u]>>(Cu-=8)&255,Cu<=0&&(Cu+=this.DB,--_u)),(128&Tu)!=0&&(Tu|=-256),Pu==0&&(128&this.s)!=(128&Tu)&&++Pu,(Pu>0||Tu!=this.s)&&($u[Pu++]=Tu);return $u},c$d.prototype.equals=function(_u){return this.compareTo(_u)==0},c$d.prototype.min=function(_u){return this.compareTo(_u)<0?this:_u},c$d.prototype.max=function(_u){return this.compareTo(_u)>0?this:_u},c$d.prototype.and=function(_u){var $u=d$c();return this.bitwiseTo(_u,w$8,$u),$u},c$d.prototype.or=function(_u){var $u=d$c();return this.bitwiseTo(_u,E$f,$u),$u},c$d.prototype.xor=function(_u){var $u=d$c();return this.bitwiseTo(_u,M$a,$u),$u},c$d.prototype.andNot=function(_u){var $u=d$c();return this.bitwiseTo(_u,I$9,$u),$u},c$d.prototype.not=function(){for(var _u=d$c(),$u=0;$u<this.t;++$u)_u[$u]=this.DM&~this[$u];return _u.t=this.t,_u.s=~this.s,_u},c$d.prototype.shiftLeft=function(_u){var $u=d$c();return _u<0?this.rShiftTo(-_u,$u):this.lShiftTo(_u,$u),$u},c$d.prototype.shiftRight=function(_u){var $u=d$c();return _u<0?this.lShiftTo(-_u,$u):this.rShiftTo(_u,$u),$u},c$d.prototype.getLowestSetBit=function(){for(var _u=0;_u<this.t;++_u)if(this[_u]!=0)return _u*this.DB+S$7(this[_u]);return this.s<0?this.t*this.DB:-1},c$d.prototype.bitCount=function(){for(var _u=0,$u=this.s&this.DM,Tu=0;Tu<this.t;++Tu)_u+=C$8(this[Tu]^$u);return _u},c$d.prototype.testBit=function(_u){var $u=Math.floor(_u/this.DB);return $u>=this.t?this.s!=0:(this[$u]&1<<_u%this.DB)!=0},c$d.prototype.setBit=function(_u){return this.changeBit(_u,E$f)},c$d.prototype.clearBit=function(_u){return this.changeBit(_u,I$9)},c$d.prototype.flipBit=function(_u){return this.changeBit(_u,M$a)},c$d.prototype.add=function(_u){var $u=d$c();return this.addTo(_u,$u),$u},c$d.prototype.subtract=function(_u){var $u=d$c();return this.subTo(_u,$u),$u},c$d.prototype.multiply=function(_u){var $u=d$c();return this.multiplyTo(_u,$u),$u},c$d.prototype.divide=function(_u){var $u=d$c();return this.divRemTo(_u,$u,null),$u},c$d.prototype.remainder=function(_u){var $u=d$c();return this.divRemTo(_u,null,$u),$u},c$d.prototype.divideAndRemainder=function(_u){var $u=d$c(),Tu=d$c();return this.divRemTo(_u,$u,Tu),new Array($u,Tu)},c$d.prototype.modPow=function(_u,$u){var Tu,Cu,Pu=_u.bitLength(),Bu=v$9(1);if(Pu<=0)return Bu;Tu=Pu<18?1:Pu<48?3:Pu<144?4:Pu<768?5:6,Cu=Pu<8?new b$8($u):$u.isEven()?new P$d($u):new x$b($u);var Lu=new Array,Ru=3,Ou=Tu-1,Du=(1<<Tu)-1;if(Lu[1]=Cu.convert(this),Tu>1){var Fu=d$c();for(Cu.sqrTo(Lu[1],Fu);Ru<=Du;)Lu[Ru]=d$c(),Cu.mulTo(Fu,Lu[Ru-2],Lu[Ru]),Ru+=2}var Vu,ku,Nu=_u.t-1,Gu=!0,ju=d$c();for(Pu=y$7(_u[Nu])-1;Nu>=0;){for(Pu>=Ou?Vu=_u[Nu]>>Pu-Ou&Du:(Vu=(_u[Nu]&(1<<Pu+1)-1)<<Ou-Pu,Nu>0&&(Vu|=_u[Nu-1]>>this.DB+Pu-Ou)),Ru=Tu;(1&Vu)==0;)Vu>>=1,--Ru;if((Pu-=Ru)<0&&(Pu+=this.DB,--Nu),Gu)Lu[Vu].copyTo(Bu),Gu=!1;else{for(;Ru>1;)Cu.sqrTo(Bu,ju),Cu.sqrTo(ju,Bu),Ru-=2;Ru>0?Cu.sqrTo(Bu,ju):(ku=Bu,Bu=ju,ju=ku),Cu.mulTo(ju,Lu[Vu],Bu)}for(;Nu>=0&&(_u[Nu]&1<<Pu)==0;)Cu.sqrTo(Bu,ju),ku=Bu,Bu=ju,ju=ku,--Pu<0&&(Pu=this.DB-1,--Nu)}return Cu.revert(Bu)},c$d.prototype.modInverse=function(_u){var $u=_u.isEven();if(this.isEven()&&$u||_u.signum()==0)return c$d.ZERO;for(var Tu=_u.clone(),Cu=this.clone(),Pu=v$9(1),Bu=v$9(0),Lu=v$9(0),Ru=v$9(1);Tu.signum()!=0;){for(;Tu.isEven();)Tu.rShiftTo(1,Tu),$u?(Pu.isEven()&&Bu.isEven()||(Pu.addTo(this,Pu),Bu.subTo(_u,Bu)),Pu.rShiftTo(1,Pu)):Bu.isEven()||Bu.subTo(_u,Bu),Bu.rShiftTo(1,Bu);for(;Cu.isEven();)Cu.rShiftTo(1,Cu),$u?(Lu.isEven()&&Ru.isEven()||(Lu.addTo(this,Lu),Ru.subTo(_u,Ru)),Lu.rShiftTo(1,Lu)):Ru.isEven()||Ru.subTo(_u,Ru),Ru.rShiftTo(1,Ru);Tu.compareTo(Cu)>=0?(Tu.subTo(Cu,Tu),$u&&Pu.subTo(Lu,Pu),Bu.subTo(Ru,Bu)):(Cu.subTo(Tu,Cu),$u&&Lu.subTo(Pu,Lu),Ru.subTo(Bu,Ru))}return Cu.compareTo(c$d.ONE)!=0?c$d.ZERO:Ru.compareTo(_u)>=0?Ru.subtract(_u):Ru.signum()<0?(Ru.addTo(_u,Ru),Ru.signum()<0?Ru.add(_u):Ru):Ru},c$d.prototype.pow=function(_u){return this.exp(_u,new B$a)},c$d.prototype.gcd=function(_u){var $u=this.s<0?this.negate():this.clone(),Tu=_u.s<0?_u.negate():_u.clone();if($u.compareTo(Tu)<0){var Cu=$u;$u=Tu,Tu=Cu}var Pu=$u.getLowestSetBit(),Bu=Tu.getLowestSetBit();if(Bu<0)return $u;for(Pu<Bu&&(Bu=Pu),Bu>0&&($u.rShiftTo(Bu,$u),Tu.rShiftTo(Bu,Tu));$u.signum()>0;)(Pu=$u.getLowestSetBit())>0&&$u.rShiftTo(Pu,$u),(Pu=Tu.getLowestSetBit())>0&&Tu.rShiftTo(Pu,Tu),$u.compareTo(Tu)>=0?($u.subTo(Tu,$u),$u.rShiftTo(1,$u)):(Tu.subTo($u,Tu),Tu.rShiftTo(1,Tu));return Bu>0&&Tu.lShiftTo(Bu,Tu),Tu},c$d.prototype.isProbablePrime=function(_u){var $u,Tu=this.abs();if(Tu.t==1&&Tu[0]<=R$d[R$d.length-1]){for($u=0;$u<R$d.length;++$u)if(Tu[0]==R$d[$u])return!0;return!1}if(Tu.isEven())return!1;for($u=1;$u<R$d.length;){for(var Cu=R$d[$u],Pu=$u+1;Pu<R$d.length&&Cu<k$6;)Cu*=R$d[Pu++];for(Cu=Tu.modInt(Cu);$u<Pu;)if(Cu%R$d[$u++]==0)return!1}return Tu.millerRabin(_u)},c$d.prototype.square=function(){var _u=d$c();return this.squareTo(_u),_u};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$a(_u){var $u,Tu,Cu="";for($u=0;$u+3<=_u.length;$u+=3)Tu=parseInt(_u.substring($u,$u+3),16),Cu+=D$7.charAt(Tu>>6)+D$7.charAt(63&Tu);for($u+1==_u.length?(Tu=parseInt(_u.substring($u,$u+1),16),Cu+=D$7.charAt(Tu<<2)):$u+2==_u.length&&(Tu=parseInt(_u.substring($u,$u+2),16),Cu+=D$7.charAt(Tu>>2)+D$7.charAt((3&Tu)<<4));(3&Cu.length)>0;)Cu+="=";return Cu}function O$b(_u){var $u,Tu,Cu,Pu="",Bu=0;for($u=0;$u<_u.length&&_u.charAt($u)!="=";++$u)(Cu=D$7.indexOf(_u.charAt($u)))<0||(Bu==0?(Pu+=g$a(Cu>>2),Tu=3&Cu,Bu=1):Bu==1?(Pu+=g$a(Tu<<2|Cu>>4),Tu=15&Cu,Bu=2):Bu==2?(Pu+=g$a(Tu),Pu+=g$a(Cu>>2),Tu=3&Cu,Bu=3):(Pu+=g$a(Tu<<2|Cu>>4),Pu+=g$a(15&Cu),Bu=0));return Bu==1&&(Pu+=g$a(Tu<<2)),Pu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$6(){this.i=0,this.j=0,this.S=new Array}N$6.prototype.init=function(_u){var $u,Tu,Cu;for($u=0;$u<256;++$u)this.S[$u]=$u;for(Tu=0,$u=0;$u<256;++$u)Tu=Tu+this.S[$u]+_u[$u%_u.length]&255,Cu=this.S[$u],this.S[$u]=this.S[Tu],this.S[Tu]=Cu;this.i=0,this.j=0},N$6.prototype.next=function(){var _u;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_u=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_u,this.S[_u+this.S[this.i]&255]};var F$9,Q$6,V$9;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$1(){var _u;_u=new Date().getTime(),Q$6[V$9++]^=255&_u,Q$6[V$9++]^=_u>>8&255,Q$6[V$9++]^=_u>>16&255,Q$6[V$9++]^=_u>>24&255,V$9>=256&&(V$9-=256)}if(Q$6==null){var H$6;if(Q$6=new Array,V$9=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$8=window.crypto||window.msCrypto;if(q$8.getRandomValues){var z$5=new Uint8Array(32);for(q$8.getRandomValues(z$5),H$6=0;H$6<32;++H$6)Q$6[V$9++]=z$5[H$6]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$8=window.crypto.random(32);for(H$6=0;H$6<K$8.length;++H$6)Q$6[V$9++]=255&K$8.charCodeAt(H$6)}}for(;V$9<256;)H$6=Math.floor(65536*Math.random()),Q$6[V$9++]=H$6>>>8,Q$6[V$9++]=255&H$6;V$9=0,_$1()}function U$8(){if(F$9==null){for(_$1(),(F$9=new N$6).init(Q$6),V$9=0;V$9<Q$6.length;++V$9)Q$6[V$9]=0;V$9=0}return F$9.next()}function j$6(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$6(_u,$u){return new c$d(_u,$u)}function W$6(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=Tu(String.fromCharCode.apply(String,_u.concat([(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu]))),Pu+=1;return Cu}function X$5(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$4(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=Tu(_u+String.fromCharCode.apply(String,[(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu])),Pu+=1;return Cu}function Z$3(_u){for(var $u="",Tu=0;Tu<_u.length;Tu++){var Cu=_u[Tu].toString(16);Cu.length==1&&(Cu="0"+Cu),$u+=Cu}return $u}function J$7(_u){return Z$3(function($u){for(var Tu=new Array,Cu=0;Cu<$u.length;Cu++)Tu[Cu]=$u.charCodeAt(Cu);return Tu}(_u))}function $$7(_u){return _u.length%4==2?_u+="==":_u.length%4==3&&(_u+="="),_u=(_u=_u.replace(/-/g,"+")).replace(/_/g,"/")}function ee$4(_u){return _u.length%2==1&&(_u="0"+_u),function($u){return($u=($u=$u.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$a(_u))}function te$5(_u){return O$b($$7(_u))}function ie$4(_u){return function($u){return $u.replace(/%/g,"")}(function($u){for(var Tu=encodeURIComponent($u),Cu="",Pu=0;Pu<Tu.length;Pu++)Tu[Pu]=="%"?(Cu+=Tu.substr(Pu,3),Pu+=2):Cu=Cu+"%"+J$7(Tu[Pu]);return Cu}(_u))}function ne$5(_u){return decodeURIComponent(function($u){return $u.replace(/(..)/g,"%$1")}(_u))}function re$5(_u){for(var $u="",Tu=0;Tu<_u.length-1;Tu+=2)$u+=String.fromCharCode(parseInt(_u.substr(Tu,2),16));return $u}function oe$3(_u){for(var $u="",Tu=0;Tu<_u.length;Tu++)$u+=("0"+_u.charCodeAt(Tu).toString(16)).slice(-2);return $u}function se$4(_u){var $u=function(Tu){return L$a(Tu)}(_u).replace(/(.{64})/g,`$1\r
`);return $u=$u.replace(/\r\n$/,"")}function ae$6(_u,$u){return"-----BEGIN "+$u+`-----\r
`+se$4(_u)+`\r
-----END `+$u+`-----\r
`}function le$3(_u,$u){if(_u.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+$u;return function(Tu){return O$b(Tu.replace(/[^0-9A-Za-z\/+=]*/g,""))}(_u=$u!==void 0?(_u=_u.replace(new RegExp("^[^]*-----BEGIN "+$u+"-----"),"")).replace(new RegExp("-----END "+$u+"-----[^]*$"),""):(_u=_u.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue$1(_u){var $u="malformed hex value";if(!_u.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw $u;if(_u.length!=8)return _u.length==32?function(Tu){if(!Tu.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Cu=(Tu=Tu.toLowerCase()).match(/.{1,4}/g),Pu=0;Pu<8;Pu++)Cu[Pu]=Cu[Pu].replace(/^0+/,""),Cu[Pu]==""&&(Cu[Pu]="0");var Bu=(Tu=":"+Cu.join(":")+":").match(/:(0:){2,}/g);if(Bu===null)return Tu.slice(1,-1);var Lu="";for(Pu=0;Pu<Bu.length;Pu++)Bu[Pu].length>Lu.length&&(Lu=Bu[Pu]);return(Tu=Tu.replace(Lu,"::")).slice(1,-1)}(_u):_u;try{return parseInt(_u.substr(0,2),16)+"."+parseInt(_u.substr(2,2),16)+"."+parseInt(_u.substr(4,2),16)+"."+parseInt(_u.substr(6,2),16)}catch{throw $u}}function he$2(_u){return _u.match(/.{4}/g).map(function($u){var Tu=parseInt($u.substr(0,2),16),Cu=parseInt($u.substr(2),16);if(Tu==0&Cu<128)return String.fromCharCode(Cu);if(Tu<8){var Pu=128|63&Cu;return ne$5((192|(7&Tu)<<3|(192&Cu)>>6).toString(16)+Pu.toString(16))}Pu=128|(15&Tu)<<2|(192&Cu)>>6;var Bu=128|63&Cu;return ne$5((224|(240&Tu)>>4).toString(16)+Pu.toString(16)+Bu.toString(16))}).join("")}function ce$1(_u){return!(_u.length%2!=0||!_u.match(/^[0-9a-f]+$/)&&!_u.match(/^[0-9A-F]+$/))}function de$3(_u){return _u.length%2==1?"0"+_u:_u.substr(0,1)>"7"?"00"+_u:_u}j$6.prototype.nextBytes=function(_u){var $u;for($u=0;$u<_u.length;++$u)_u[$u]=U$8()},X$5.prototype.doPublic=function(_u){return _u.modPowInt(this.e,this.n)},X$5.prototype.setPublic=function(_u,$u){if(this.isPublic=!0,this.isPrivate=!1,typeof _u!="string")this.n=_u,this.e=$u;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA public key";this.n=G$6(_u,16),this.e=parseInt($u,16)}},X$5.prototype.encrypt=function(_u){var $u=function(Pu,Bu){if(Bu<Pu.length+11)throw"Message too long for RSA";for(var Lu=new Array,Ru=Pu.length-1;Ru>=0&&Bu>0;){var Ou=Pu.charCodeAt(Ru--);Ou<128?Lu[--Bu]=Ou:Ou>127&&Ou<2048?(Lu[--Bu]=63&Ou|128,Lu[--Bu]=Ou>>6|192):(Lu[--Bu]=63&Ou|128,Lu[--Bu]=Ou>>6&63|128,Lu[--Bu]=Ou>>12|224)}Lu[--Bu]=0;for(var Du=new j$6,Fu=new Array;Bu>2;){for(Fu[0]=0;Fu[0]==0;)Du.nextBytes(Fu);Lu[--Bu]=Fu[0]}return Lu[--Bu]=2,Lu[--Bu]=0,new c$d(Lu)}(_u,this.n.bitLength()+7>>3);if($u==null)return null;var Tu=this.doPublic($u);if(Tu==null)return null;var Cu=Tu.toString(16);return(1&Cu.length)==0?Cu:"0"+Cu},X$5.prototype.encryptOAEP=function(_u,$u,Tu){var Cu=function(Lu,Ru,Ou,Du){var Fu=l$a.crypto.MessageDigest,Vu=l$a.crypto.Util,ku=null;if(Ou||(Ou="sha1"),typeof Ou=="string"&&(ku=Fu.getCanonicalAlgName(Ou),Du=Fu.getHashLength(ku),Ou=function(Ku){return re$5(Vu.hashHex(oe$3(Ku),ku))}),Lu.length+2*Du+2>Ru)throw"Message too long for RSA";var Nu,Gu="";for(Nu=0;Nu<Ru-Lu.length-2*Du-2;Nu+=1)Gu+="\0";var ju=Ou("")+Gu+""+Lu,Hu=new Array(Du);new j$6().nextBytes(Hu);var Uu=W$6(Hu,ju.length,Ou),zu=[];for(Nu=0;Nu<ju.length;Nu+=1)zu[Nu]=ju.charCodeAt(Nu)^Uu.charCodeAt(Nu);var Wu=W$6(zu,Hu.length,Ou),Qu=[0];for(Nu=0;Nu<Hu.length;Nu+=1)Qu[Nu+1]=Hu[Nu]^Wu.charCodeAt(Nu);return new c$d(Qu.concat(zu))}(_u,this.n.bitLength()+7>>3,$u,Tu);if(Cu==null)return null;var Pu=this.doPublic(Cu);if(Pu==null)return null;var Bu=Pu.toString(16);return(1&Bu.length)==0?Bu:"0"+Bu},X$5.prototype.type="RSA",X$5.prototype.doPrivate=function(_u){if(this.p==null||this.q==null)return _u.modPow(this.d,this.n);for(var $u=_u.mod(this.p).modPow(this.dmp1,this.p),Tu=_u.mod(this.q).modPow(this.dmq1,this.q);$u.compareTo(Tu)<0;)$u=$u.add(this.p);return $u.subtract(Tu).multiply(this.coeff).mod(this.p).multiply(this.q).add(Tu)},X$5.prototype.setPrivate=function(_u,$u,Tu){if(this.isPrivate=!0,typeof _u!="string")this.n=_u,this.e=$u,this.d=Tu;else{if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key";this.n=G$6(_u,16),this.e=parseInt($u,16),this.d=G$6(Tu,16)}},X$5.prototype.setPrivateEx=function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){if(this.isPrivate=!0,this.isPublic=!1,_u==null)throw"RSASetPrivateEx N == null";if($u==null)throw"RSASetPrivateEx E == null";if(_u.length==0)throw"RSASetPrivateEx N.length == 0";if($u.length==0)throw"RSASetPrivateEx E.length == 0";if(!(_u!=null&&$u!=null&&_u.length>0&&$u.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$6(_u,16),this.e=parseInt($u,16),this.d=G$6(Tu,16),this.p=G$6(Cu,16),this.q=G$6(Pu,16),this.dmp1=G$6(Bu,16),this.dmq1=G$6(Lu,16),this.coeff=G$6(Ru,16)},X$5.prototype.generate=function(_u,$u){var Tu=new j$6,Cu=_u>>1;this.e=parseInt($u,16);for(var Pu=new c$d($u,16);;){for(;this.p=new c$d(_u-Cu,1,Tu),this.p.subtract(c$d.ONE).gcd(Pu).compareTo(c$d.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$d(Cu,1,Tu),this.q.subtract(c$d.ONE).gcd(Pu).compareTo(c$d.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Bu=this.p;this.p=this.q,this.q=Bu}var Lu=this.p.subtract(c$d.ONE),Ru=this.q.subtract(c$d.ONE),Ou=Lu.multiply(Ru);if(Ou.gcd(Pu).compareTo(c$d.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==_u)){this.d=Pu.modInverse(Ou),this.dmp1=this.d.mod(Lu),this.dmq1=this.d.mod(Ru),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$5.prototype.decrypt=function(_u){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var $u=G$6(_u,16),Tu=this.doPrivate($u);return Tu==null?null:function(Cu,Pu){for(var Bu=Cu.toByteArray(),Lu=0;Lu<Bu.length&&Bu[Lu]==0;)++Lu;if(Bu.length-Lu!=Pu-1||Bu[Lu]!=2)return null;for(++Lu;Bu[Lu]!=0;)if(++Lu>=Bu.length)return null;for(var Ru="";++Lu<Bu.length;){var Ou=255&Bu[Lu];Ou<128?Ru+=String.fromCharCode(Ou):Ou>191&&Ou<224?(Ru+=String.fromCharCode((31&Ou)<<6|63&Bu[Lu+1]),++Lu):(Ru+=String.fromCharCode((15&Ou)<<12|(63&Bu[Lu+1])<<6|63&Bu[Lu+2]),Lu+=2)}return Ru}(Tu,this.n.bitLength()+7>>3)},X$5.prototype.decryptOAEP=function(_u,$u,Tu){if(_u.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Cu=G$6(_u,16),Pu=this.doPrivate(Cu);return Pu==null?null:function(Bu,Lu,Ru,Ou){var Du=l$a.crypto.MessageDigest,Fu=l$a.crypto.Util,Vu=null;for(Ru||(Ru="sha1"),typeof Ru=="string"&&(Vu=Du.getCanonicalAlgName(Ru),Ou=Du.getHashLength(Vu),Ru=function(Qu){return re$5(Fu.hashHex(oe$3(Qu),Vu))}),Bu=Bu.toByteArray(),ku=0;ku<Bu.length;ku+=1)Bu[ku]&=255;for(;Bu.length<Lu;)Bu.unshift(0);if((Bu=String.fromCharCode.apply(String,Bu)).length<2*Ou+2)throw"Cipher too short";var ku,Nu=Bu.substr(1,Ou),Gu=Bu.substr(Ou+1),ju=Y$4(Gu,Ou,Ru),Hu=[];for(ku=0;ku<Nu.length;ku+=1)Hu[ku]=Nu.charCodeAt(ku)^ju.charCodeAt(ku);var Uu=Y$4(String.fromCharCode.apply(String,Hu),Bu.length-Ou,Ru),zu=[];for(ku=0;ku<Gu.length;ku+=1)zu[ku]=Gu.charCodeAt(ku)^Uu.charCodeAt(ku);if((zu=String.fromCharCode.apply(String,zu)).substr(0,Ou)!==Ru(""))throw"Hash mismatch";var Wu=(zu=zu.substr(Ou)).indexOf("");if((Wu!=-1?zu.substr(0,Wu).lastIndexOf("\0"):-1)+1!=Wu)throw"Malformed data";return zu.substr(Wu+1)}(Pu,this.n.bitLength()+7>>3,$u,Tu)},l$a.lang!==void 0&&l$a.lang||(l$a.lang={}),l$a.lang.String=function(){},l$a.lang.String.isInteger=function(_u){return!!_u.match(/^[0-9]+$/)||!!_u.match(/^-[0-9]+$/)},l$a.lang.String.isHex=function(_u){return ce$1(_u)},l$a.lang.String.isBase64=function(_u){return!(!(_u=_u.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||_u.length%4!=0)},l$a.lang.String.isBase64URL=function(_u){return!_u.match(/[+/=]/)&&(_u=$$7(_u),l$a.lang.String.isBase64(_u))},l$a.lang.String.isIntegerArray=function(_u){return!!(_u=_u.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$a.lang.String.isPrintable=function(_u){return _u.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$a.lang.String.isIA5=function(_u){return _u.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$a.lang.String.isMail=function(_u){return _u.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe$1=function(_u,$u,Tu){return Tu==null&&(Tu="0"),_u.length>=$u?_u:new Array($u-_u.length+1).join(Tu)+_u};function fe$2(_u,$u){var Tu=function(){};Tu.prototype=$u.prototype,_u.prototype=new Tu,_u.prototype.constructor=_u,_u.superclass=$u.prototype,$u.prototype.constructor==Object.prototype.constructor&&($u.prototype.constructor=$u)}l$a.crypto!==void 0&&l$a.crypto||(l$a.crypto={}),l$a.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$8.algo.MD5,sha1:h$8.algo.SHA1,sha224:h$8.algo.SHA224,sha256:h$8.algo.SHA256,sha384:h$8.algo.SHA384,sha512:h$8.algo.SHA512,ripemd160:h$8.algo.RIPEMD160},this.getDigestInfoHex=function(_u,$u){if(this.DIGESTINFOHEAD[$u]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+$u;return this.DIGESTINFOHEAD[$u]+_u},this.getPaddedDigestInfoHex=function(_u,$u,Tu){var Cu=this.getDigestInfoHex(_u,$u),Pu=Tu/4;if(Cu.length+22>Pu)throw"key is too short for SigAlg: keylen="+Tu+","+$u;for(var Bu="0001",Lu="00"+Cu,Ru="",Ou=Pu-Bu.length-Lu.length,Du=0;Du<Ou;Du+=2)Ru+="ff";return Bu+Ru+Lu},this.hashString=function(_u,$u){return new l$a.crypto.MessageDigest({alg:$u}).digestString(_u)},this.hashHex=function(_u,$u){return new l$a.crypto.MessageDigest({alg:$u}).digestHex(_u)},this.sha1=function(_u){return this.hashString(_u,"sha1")},this.sha256=function(_u){return this.hashString(_u,"sha256")},this.sha256Hex=function(_u){return this.hashHex(_u,"sha256")},this.sha512=function(_u){return this.hashString(_u,"sha512")},this.sha512Hex=function(_u){return this.hashHex(_u,"sha512")},this.isKey=function(_u){return _u instanceof X$5||_u instanceof l$a.crypto.DSA||_u instanceof l$a.crypto.ECDSA}},l$a.crypto.Util.md5=function(_u){return new l$a.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(_u)},l$a.crypto.Util.ripemd160=function(_u){return new l$a.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(_u)},l$a.crypto.Util.SECURERANDOMGEN=new j$6,l$a.crypto.Util.getRandomHexOfNbytes=function(_u){var $u=new Array(_u);return l$a.crypto.Util.SECURERANDOMGEN.nextBytes($u),Z$3($u)},l$a.crypto.Util.getRandomBigIntegerOfNbytes=function(_u){return new c$d(l$a.crypto.Util.getRandomHexOfNbytes(_u),16)},l$a.crypto.Util.getRandomHexOfNbits=function(_u){var $u=_u%8,Tu=new Array((_u-$u)/8+1);return l$a.crypto.Util.SECURERANDOMGEN.nextBytes(Tu),Tu[0]=(255<<$u&255^255)&Tu[0],Z$3(Tu)},l$a.crypto.Util.getRandomBigIntegerOfNbits=function(_u){return new c$d(l$a.crypto.Util.getRandomHexOfNbits(_u),16)},l$a.crypto.Util.getRandomBigIntegerZeroToMax=function(_u){for(var $u=_u.bitLength();;){var Tu=l$a.crypto.Util.getRandomBigIntegerOfNbits($u);if(_u.compareTo(Tu)!=-1)return Tu}},l$a.crypto.Util.getRandomBigIntegerMinToMax=function(_u,$u){var Tu=_u.compareTo($u);if(Tu==1)throw"biMin is greater than biMax";if(Tu==0)return _u;var Cu=$u.subtract(_u);return l$a.crypto.Util.getRandomBigIntegerZeroToMax(Cu).add(_u)},l$a.crypto.MessageDigest=function(_u){this.setAlgAndProvider=function($u,Tu){if(($u=l$a.crypto.MessageDigest.getCanonicalAlgName($u))!==null&&Tu===void 0&&(Tu=l$a.crypto.Util.DEFAULTPROVIDER[$u]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf($u)!=-1&&Tu=="cryptojs"){try{this.md=l$a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[$u].create()}catch(Cu){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Cu}this.updateString=function(Cu){this.md.update(Cu)},this.updateHex=function(Cu){var Pu=h$8.enc.Hex.parse(Cu);this.md.update(Pu)},this.digest=function(){return this.md.finalize().toString(h$8.enc.Hex)},this.digestString=function(Cu){return this.updateString(Cu),this.digest()},this.digestHex=function(Cu){return this.updateHex(Cu),this.digest()}}if(":sha256:".indexOf($u)!=-1&&Tu=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Cu){throw"setAlgAndProvider hash alg set fail alg="+$u+"/"+Cu}this.updateString=function(Cu){this.md.update(Cu)},this.updateHex=function(Cu){var Pu=sjcl.codec.hex.toBits(Cu);this.md.update(Pu)},this.digest=function(){var Cu=this.md.finalize();return sjcl.codec.hex.fromBits(Cu)},this.digestString=function(Cu){return this.updateString(Cu),this.digest()},this.digestHex=function(Cu){return this.updateHex(Cu),this.digest()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},_u!==void 0&&_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$a.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$a.crypto.MessageDigest.getCanonicalAlgName=function(_u){return typeof _u=="string"&&(_u=(_u=_u.toLowerCase()).replace(/-/,"")),_u},l$a.crypto.MessageDigest.getHashLength=function(_u){var $u=l$a.crypto.MessageDigest,Tu=$u.getCanonicalAlgName(_u);if($u.HASHLENGTH[Tu]===void 0)throw"not supported algorithm: "+_u;return $u.HASHLENGTH[Tu]},l$a.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$a.crypto.Mac=function(_u){this.setAlgAndProvider=function($u,Tu){if(($u=$u.toLowerCase())==null&&($u="hmacsha1"),($u=$u.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+$u;Tu===void 0&&(Tu=l$a.crypto.Util.DEFAULTPROVIDER[$u]),this.algProv=$u+"/"+Tu;var Cu=$u.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Cu)!=-1&&Tu=="cryptojs"){try{var Pu=l$a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Cu];this.mac=h$8.algo.HMAC.create(Pu,this.pass)}catch(Bu){throw"setAlgAndProvider hash alg set fail hashAlg="+Cu+"/"+Bu}this.updateString=function(Bu){this.mac.update(Bu)},this.updateHex=function(Bu){var Lu=h$8.enc.Hex.parse(Bu);this.mac.update(Lu)},this.doFinal=function(){return this.mac.finalize().toString(h$8.enc.Hex)},this.doFinalString=function(Bu){return this.updateString(Bu),this.doFinal()},this.doFinalHex=function(Bu){return this.updateHex(Bu),this.doFinal()}}},this.updateString=function($u){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function($u){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function($u){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function($u){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function($u){if(typeof $u=="string"){var Tu=$u;return $u.length%2!=1&&$u.match(/^[0-9A-Fa-f]+$/)||(Tu=oe$3($u)),void(this.pass=h$8.enc.Hex.parse(Tu))}if(typeof $u!="object")throw"KJUR.crypto.Mac unsupported password type: "+$u;if(Tu=null,$u.hex!==void 0){if($u.hex.length%2!=0||!$u.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+$u.hex;Tu=$u.hex}if($u.utf8!==void 0&&(Tu=ie$4($u.utf8)),$u.rstr!==void 0&&(Tu=oe$3($u.rstr)),$u.b64!==void 0&&(Tu=O$b($u.b64)),$u.b64u!==void 0&&(Tu=te$5($u.b64u)),Tu==null)throw"KJUR.crypto.Mac unsupported password type: "+$u;this.pass=h$8.enc.Hex.parse(Tu)},_u!==void 0&&(_u.pass!==void 0&&this.setPassword(_u.pass),_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0&&(this.provName=l$a.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$a.crypto.Signature=function(_u){var $u=null;if(this._setAlgNames=function(){var Tu=this.algName.match(/^(.+)with(.+)$/);Tu&&(this.mdAlgName=Tu[1].toLowerCase(),this.pubkeyAlgName=Tu[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Tu,Cu){for(var Pu="",Bu=Cu/4-Tu.length,Lu=0;Lu<Bu;Lu++)Pu+="0";return Pu+Tu},this.setAlgAndProvider=function(Tu,Cu){if(this._setAlgNames(),Cu!="cryptojs/jsrsa")throw new Error("provider not supported: "+Cu);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$a.crypto.MessageDigest({alg:this.mdAlgName})}catch(Pu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Pu)}this.init=function(Pu,Bu){var Lu=null;try{Lu=Bu===void 0?Ee.getKey(Pu):Ee.getKey(Pu,Bu)}catch(Ru){throw"init failed:"+Ru}if(Lu.isPrivate===!0)this.prvKey=Lu,this.state="SIGN";else{if(Lu.isPublic!==!0)throw"init failed.:"+Lu;this.pubKey=Lu,this.state="VERIFY"}},this.updateString=function(Pu){this.md.updateString(Pu)},this.updateHex=function(Pu){this.md.updateHex(Pu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$a.crypto.ECDSA!==void 0&&(this.prvKey=new l$a.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$5&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$5&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$a.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$a.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Pu){return this.updateString(Pu),this.sign()},this.signHex=function(Pu){return this.updateHex(Pu),this.sign()},this.verify=function(Pu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$a.crypto.ECDSA!==void 0&&(this.pubKey=new l$a.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$5&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Pu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$5&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);if(l$a.crypto.ECDSA!==void 0&&this.pubKey instanceof l$a.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);if(l$a.crypto.DSA!==void 0&&this.pubKey instanceof l$a.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Pu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Tu,Cu){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Tu){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Tu){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Tu){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Tu){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=_u,_u!==void 0&&(_u.alg!==void 0&&(this.algName=_u.alg,_u.prov===void 0?this.provName=l$a.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=_u.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),_u.psssaltlen!==void 0&&(this.pssSaltLen=_u.psssaltlen),_u.prvkeypem!==void 0)){if(_u.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{$u=Ee.getKey(_u.prvkeypem),this.init($u)}catch(Tu){throw"fatal error to load pem private key: "+Tu}}},l$a.crypto.Cipher=function(_u){},l$a.crypto.Cipher.encrypt=function(_u,$u,Tu){if($u instanceof X$5&&$u.isPublic){var Cu=l$a.crypto.Cipher.getAlgByKeyAndName($u,Tu);if(Cu==="RSA")return $u.encrypt(_u);if(Cu==="RSAOAEP")return $u.encryptOAEP(_u,"sha1");var Pu=Cu.match(/^RSAOAEP(\d+)$/);if(Pu!==null)return $u.encryptOAEP(_u,"sha"+Pu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Tu}throw"Cipher.encrypt: unsupported key or algorithm"},l$a.crypto.Cipher.decrypt=function(_u,$u,Tu){if($u instanceof X$5&&$u.isPrivate){var Cu=l$a.crypto.Cipher.getAlgByKeyAndName($u,Tu);if(Cu==="RSA")return $u.decrypt(_u);if(Cu==="RSAOAEP")return $u.decryptOAEP(_u,"sha1");var Pu=Cu.match(/^RSAOAEP(\d+)$/);if(Pu!==null)return $u.decryptOAEP(_u,"sha"+Pu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Tu}throw"Cipher.decrypt: unsupported key or algorithm"},l$a.crypto.Cipher.getAlgByKeyAndName=function(_u,$u){if(_u instanceof X$5){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf($u)!=-1)return $u;if($u==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+$u}throw"getAlgByKeyAndName: not supported algorithm name: "+$u},l$a.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae,ge$2,me,ve$1,ye$2,be$2,xe$1,we$4,Ee=(Ae=function(_u,$u,Tu){return ge$2(h$8.AES,_u,$u,Tu)},ge$2=function(_u,$u,Tu,Cu){var Pu=h$8.enc.Hex.parse($u),Bu=h$8.enc.Hex.parse(Tu),Lu=h$8.enc.Hex.parse(Cu),Ru={};Ru.key=Bu,Ru.iv=Lu,Ru.ciphertext=Pu;var Ou=_u.decrypt(Ru,Bu,{iv:Lu});return h$8.enc.Hex.stringify(Ou)},me=function(_u,$u,Tu){return ve$1(h$8.AES,_u,$u,Tu)},ve$1=function(_u,$u,Tu,Cu){var Pu=h$8.enc.Hex.parse($u),Bu=h$8.enc.Hex.parse(Tu),Lu=h$8.enc.Hex.parse(Cu),Ru=_u.encrypt(Pu,Bu,{iv:Lu}),Ou=h$8.enc.Hex.parse(Ru.toString());return h$8.enc.Base64.stringify(Ou)},ye$2={"AES-256-CBC":{proc:Ae,eproc:me,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae,eproc:me,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae,eproc:me,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(_u,$u,Tu){return ge$2(h$8.TripleDES,_u,$u,Tu)},eproc:function(_u,$u,Tu){return ve$1(h$8.TripleDES,_u,$u,Tu)},keylen:24,ivlen:8},"DES-CBC":{proc:function(_u,$u,Tu){return ge$2(h$8.DES,_u,$u,Tu)},eproc:function(_u,$u,Tu){return ve$1(h$8.DES,_u,$u,Tu)},keylen:8,ivlen:8}},be$2=function(_u){var $u={},Tu=_u.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Tu&&($u.cipher=Tu[1],$u.ivsalt=Tu[2]);var Cu=_u.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Cu&&($u.type=Cu[1]);var Pu=-1,Bu=0;_u.indexOf(`\r
\r
`)!=-1&&(Pu=_u.indexOf(`\r
\r
`),Bu=2),_u.indexOf(`

`)!=-1&&(Pu=_u.indexOf(`

`),Bu=1);var Lu=_u.indexOf("-----END");if(Pu!=-1&&Lu!=-1){var Ru=_u.substring(Pu+2*Bu,Lu-Bu);Ru=Ru.replace(/\s+/g,""),$u.data=Ru}return $u},xe$1=function(_u,$u,Tu){for(var Cu=Tu.substring(0,16),Pu=h$8.enc.Hex.parse(Cu),Bu=h$8.enc.Utf8.parse($u),Lu=ye$2[_u].keylen+ye$2[_u].ivlen,Ru="",Ou=null;;){var Du=h$8.algo.MD5.create();if(Ou!=null&&Du.update(Ou),Du.update(Bu),Du.update(Pu),Ou=Du.finalize(),(Ru+=h$8.enc.Hex.stringify(Ou)).length>=2*Lu)break}var Fu={};return Fu.keyhex=Ru.substr(0,2*ye$2[_u].keylen),Fu.ivhex=Ru.substr(2*ye$2[_u].keylen,2*ye$2[_u].ivlen),Fu},we$4=function(_u,$u,Tu,Cu){var Pu=h$8.enc.Base64.parse(_u),Bu=h$8.enc.Hex.stringify(Pu);return(0,ye$2[$u].proc)(Bu,Tu,Cu)},{version:"1.0.0",parsePKCS5PEM:function(_u){return be$2(_u)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(_u,$u,Tu){return xe$1(_u,$u,Tu)},decryptKeyB64:function(_u,$u,Tu,Cu){return we$4(_u,$u,Tu,Cu)},getDecryptedKeyHex:function(_u,$u){var Tu=be$2(_u),Cu=Tu.cipher,Pu=Tu.ivsalt,Bu=Tu.data,Lu=xe$1(Cu,$u,Pu).keyhex;return we$4(Bu,Cu,Lu,Pu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(_u,$u,Tu,Cu,Pu){var Bu="";if(Cu!==void 0&&Cu!=null||(Cu="AES-256-CBC"),ye$2[Cu]===void 0)throw"KEYUTIL unsupported algorithm: "+Cu;Pu!==void 0&&Pu!=null||(Pu=function(Ru){var Ou=h$8.lib.WordArray.random(Ru);return h$8.enc.Hex.stringify(Ou)}(ye$2[Cu].ivlen).toUpperCase());var Lu=function(Ru,Ou,Du,Fu){return(0,ye$2[Ou].eproc)(Ru,Du,Fu)}($u,Cu,xe$1(Cu,Tu,Pu).keyhex,Pu);return Bu="-----BEGIN "+_u+` PRIVATE KEY-----\r
`,Bu+=`Proc-Type: 4,ENCRYPTED\r
`,Bu+="DEK-Info: "+Cu+","+Pu+`\r
`,Bu+=`\r
`,Bu+=Lu.replace(/(.{64})/g,`$1\r
`),Bu+=`\r
-----END `+_u+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(_u){var $u=Me,Tu=$u.getChildIdx,Cu=$u.getV,Pu={},Bu=Tu(_u,0);if(Bu.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Bu.length;Pu.ciphertext=Cu(_u,Bu[1]);var Lu=Tu(_u,Bu[0]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Lu.length;if(Cu(_u,Lu[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Ru=Tu(_u,Lu[1]);if(Lu.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Ru.length;var Ou=Tu(_u,Ru[1]);if(Ou.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ou.length;if(Cu(_u,Ou[0])!="2a864886f70d0307")throw"this only supports TripleDES";Pu.encryptionSchemeAlg="TripleDES",Pu.encryptionSchemeIV=Cu(_u,Ou[1]);var Du=Tu(_u,Ru[0]);if(Du.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Du.length;if(Cu(_u,Du[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Fu=Tu(_u,Du[1]);if(Fu.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Fu.length;Pu.pbkdf2Salt=Cu(_u,Fu[0]);var Vu=Cu(_u,Fu[1]);try{Pu.pbkdf2Iter=parseInt(Vu,16)}catch{throw"malformed format pbkdf2Iter: "+Vu}return Pu},getPBKDF2KeyHexFromParam:function(_u,$u){var Tu=h$8.enc.Hex.parse(_u.pbkdf2Salt),Cu=_u.pbkdf2Iter,Pu=h$8.PBKDF2($u,Tu,{keySize:6,iterations:Cu});return h$8.enc.Hex.stringify(Pu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(_u,$u){var Tu=le$3(_u,"ENCRYPTED PRIVATE KEY"),Cu=this.parseHexOfEncryptedPKCS8(Tu),Pu=Ee.getPBKDF2KeyHexFromParam(Cu,$u),Bu={};Bu.ciphertext=h$8.enc.Hex.parse(Cu.ciphertext);var Lu=h$8.enc.Hex.parse(Pu),Ru=h$8.enc.Hex.parse(Cu.encryptionSchemeIV),Ou=h$8.TripleDES.decrypt(Bu,Lu,{iv:Ru});return h$8.enc.Hex.stringify(Ou)},getKeyFromEncryptedPKCS8PEM:function(_u,$u){var Tu=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(_u,$u);return this.getKeyFromPlainPrivatePKCS8Hex(Tu)},parsePlainPrivatePKCS8Hex:function(_u){var $u=Me,Tu=$u.getChildIdx,Cu=$u.getV,Pu={algparam:null};if(_u.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Bu=Tu(_u,0);if(Bu.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(_u.substr(Bu[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Lu=Tu(_u,Bu[1]);if(Lu.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(_u.substr(Lu[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Pu.algoid=Cu(_u,Lu[0]),_u.substr(Lu[1],2)=="06"&&(Pu.algparam=Cu(_u,Lu[1])),_u.substr(Bu[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Pu.keyidx=$u.getVidx(_u,Bu[2]),Pu},getKeyFromPlainPrivatePKCS8PEM:function(_u){var $u=le$3(_u,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex($u)},getKeyFromPlainPrivatePKCS8Hex:function(_u){var $u,Tu=this.parsePlainPrivatePKCS8Hex(_u);if(Tu.algoid=="2a864886f70d010101")$u=new X$5;else if(Tu.algoid=="2a8648ce380401")$u=new l$a.crypto.DSA;else{if(Tu.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";$u=new l$a.crypto.ECDSA}return $u.readPKCS8PrvKeyHex(_u),$u},_getKeyFromPublicPKCS8Hex:function(_u){var $u,Tu=Me.getVbyList(_u,0,[0,0],"06");if(Tu==="2a864886f70d010101")$u=new X$5;else if(Tu==="2a8648ce380401")$u=new l$a.crypto.DSA;else{if(Tu!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";$u=new l$a.crypto.ECDSA}return $u.readPKCS8PubKeyHex(_u),$u},parsePublicRawRSAKeyHex:function(_u){var $u=Me,Tu=$u.getChildIdx,Cu=$u.getV,Pu={};if(_u.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Bu=Tu(_u,0);if(Bu.length!=2)throw"malformed RSA key(code:002)";if(_u.substr(Bu[0],2)!="02")throw"malformed RSA key(code:003)";if(Pu.n=Cu(_u,Bu[0]),_u.substr(Bu[1],2)!="02")throw"malformed RSA key(code:004)";return Pu.e=Cu(_u,Bu[1]),Pu},parsePublicPKCS8Hex:function(_u){var $u=Me,Tu=$u.getChildIdx,Cu=$u.getV,Pu={algparam:null},Bu=Tu(_u,0);if(Bu.length!=2)throw"outer DERSequence shall have 2 elements: "+Bu.length;var Lu=Bu[0];if(_u.substr(Lu,2)!="30")throw"malformed PKCS8 public key(code:001)";var Ru=Tu(_u,Lu);if(Ru.length!=2)throw"malformed PKCS8 public key(code:002)";if(_u.substr(Ru[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Pu.algoid=Cu(_u,Ru[0]),_u.substr(Ru[1],2)=="06"?Pu.algparam=Cu(_u,Ru[1]):_u.substr(Ru[1],2)=="30"&&(Pu.algparam={},Pu.algparam.p=$u.getVbyList(_u,Ru[1],[0],"02"),Pu.algparam.q=$u.getVbyList(_u,Ru[1],[1],"02"),Pu.algparam.g=$u.getVbyList(_u,Ru[1],[2],"02")),_u.substr(Bu[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Pu.key=Cu(_u,Bu[1]).substr(2),Pu}});Ee.getKey=function(_u,$u,Tu){var Cu=(Hu=Me).getChildIdx;Hu.getV;var Pu=Hu.getVbyList,Bu=l$a.crypto,Lu=Bu.ECDSA,Ru=Bu.DSA,Ou=X$5,Du=le$3,Fu=Ee;if(Ou!==void 0&&_u instanceof Ou||Lu!==void 0&&_u instanceof Lu||Ru!==void 0&&_u instanceof Ru)return _u;if(_u.curve!==void 0&&_u.xy!==void 0&&_u.d===void 0)return new Lu({pub:_u.xy,curve:_u.curve});if(_u.curve!==void 0&&_u.d!==void 0)return new Lu({prv:_u.d,curve:_u.curve});if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Ou).setPublic(_u.n,_u.e),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.co!==void 0&&_u.qi===void 0)return(Xu=new Ou).setPrivateEx(_u.n,_u.e,_u.d,_u.p,_u.q,_u.dp,_u.dq,_u.co),Xu;if(_u.kty===void 0&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p===void 0)return(Xu=new Ou).setPrivate(_u.n,_u.e,_u.d),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x===void 0)return(Xu=new Ru).setPublic(_u.p,_u.q,_u.g,_u.y),Xu;if(_u.p!==void 0&&_u.q!==void 0&&_u.g!==void 0&&_u.y!==void 0&&_u.x!==void 0)return(Xu=new Ru).setPrivate(_u.p,_u.q,_u.g,_u.y,_u.x),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d===void 0)return(Xu=new Ou).setPublic(te$5(_u.n),te$5(_u.e)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0&&_u.p!==void 0&&_u.q!==void 0&&_u.dp!==void 0&&_u.dq!==void 0&&_u.qi!==void 0)return(Xu=new Ou).setPrivateEx(te$5(_u.n),te$5(_u.e),te$5(_u.d),te$5(_u.p),te$5(_u.q),te$5(_u.dp),te$5(_u.dq),te$5(_u.qi)),Xu;if(_u.kty==="RSA"&&_u.n!==void 0&&_u.e!==void 0&&_u.d!==void 0)return(Xu=new Ou).setPrivate(te$5(_u.n),te$5(_u.e),te$5(_u.d)),Xu;if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d===void 0){var Vu=(qu=new Lu({curve:_u.crv})).ecparams.keylen/4,ku="04"+("0000000000"+te$5(_u.x)).slice(-Vu)+("0000000000"+te$5(_u.y)).slice(-Vu);return qu.setPublicKeyHex(ku),qu}if(_u.kty==="EC"&&_u.crv!==void 0&&_u.x!==void 0&&_u.y!==void 0&&_u.d!==void 0){Vu=(qu=new Lu({curve:_u.crv})).ecparams.keylen/4,ku="04"+("0000000000"+te$5(_u.x)).slice(-Vu)+("0000000000"+te$5(_u.y)).slice(-Vu);var Nu=("0000000000"+te$5(_u.d)).slice(-Vu);return qu.setPublicKeyHex(ku),qu.setPrivateKeyHex(Nu),qu}if(Tu==="pkcs5prv"){var Gu,ju=_u,Hu=Me;if((Gu=Cu(ju,0)).length===9)(Xu=new Ou).readPKCS5PrvKeyHex(ju);else if(Gu.length===6)(Xu=new Ru).readPKCS5PrvKeyHex(ju);else{if(!(Gu.length>2&&ju.substr(Gu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Xu=new Lu).readPKCS5PrvKeyHex(ju)}return Xu}if(Tu==="pkcs8prv")return Xu=Fu.getKeyFromPlainPrivatePKCS8Hex(_u);if(Tu==="pkcs8pub")return Fu._getKeyFromPublicPKCS8Hex(_u);if(Tu==="x509pub")return Be$1.getPublicKeyFromCertHex(_u);if(_u.indexOf("-END CERTIFICATE-",0)!=-1||_u.indexOf("-END X509 CERTIFICATE-",0)!=-1||_u.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be$1.getPublicKeyFromCertPEM(_u);if(_u.indexOf("-END PUBLIC KEY-")!=-1){var Uu=le$3(_u,"PUBLIC KEY");return Fu._getKeyFromPublicPKCS8Hex(Uu)}if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var zu=Du(_u,"RSA PRIVATE KEY");return Fu.getKey(zu,null,"pkcs5prv")}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1){var Wu=Pu(Ju=Du(_u,"DSA PRIVATE KEY"),0,[1],"02"),Qu=Pu(Ju,0,[2],"02"),Ku=Pu(Ju,0,[3],"02"),Yu=Pu(Ju,0,[4],"02"),Xc=Pu(Ju,0,[5],"02");return(Xu=new Ru).setPrivate(new c$d(Wu,16),new c$d(Qu,16),new c$d(Ku,16),new c$d(Yu,16),new c$d(Xc,16)),Xu}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")==-1)return zu=Du(_u,"EC PRIVATE KEY"),Fu.getKey(zu,null,"pkcs5prv");if(_u.indexOf("-END PRIVATE KEY-")!=-1)return Fu.getKeyFromPlainPrivatePKCS8PEM(_u);if(_u.indexOf("-END RSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var _d=Fu.getDecryptedKeyHex(_u,$u),_f=new X$5;return _f.readPKCS5PrvKeyHex(_d),_f}if(_u.indexOf("-END EC PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var qu,Xu=Pu(Ju=Fu.getDecryptedKeyHex(_u,$u),0,[1],"04"),Zu=Pu(Ju,0,[2,0],"06"),_c=Pu(Ju,0,[3,0],"03").substr(2);if(l$a.crypto.OID.oidhex2name[Zu]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Zu;return(qu=new Lu({curve:l$a.crypto.OID.oidhex2name[Zu]})).setPublicKeyHex(_c),qu.setPrivateKeyHex(Xu),qu.isPublic=!1,qu}if(_u.indexOf("-END DSA PRIVATE KEY-")!=-1&&_u.indexOf("4,ENCRYPTED")!=-1){var Ju;return Wu=Pu(Ju=Fu.getDecryptedKeyHex(_u,$u),0,[1],"02"),Qu=Pu(Ju,0,[2],"02"),Ku=Pu(Ju,0,[3],"02"),Yu=Pu(Ju,0,[4],"02"),Xc=Pu(Ju,0,[5],"02"),(Xu=new Ru).setPrivate(new c$d(Wu,16),new c$d(Qu,16),new c$d(Ku,16),new c$d(Yu,16),new c$d(Xc,16)),Xu}if(_u.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Fu.getKeyFromEncryptedPKCS8PEM(_u,$u);throw new Error("not supported argument")},Ee.generateKeypair=function(_u,$u){if(_u=="RSA"){var Tu=$u;(Lu=new X$5).generate(Tu,"10001"),Lu.isPrivate=!0,Lu.isPublic=!0;var Cu=new X$5,Pu=Lu.n.toString(16),Bu=Lu.e.toString(16);return Cu.setPublic(Pu,Bu),Cu.isPrivate=!1,Cu.isPublic=!0,(Ru={}).prvKeyObj=Lu,Ru.pubKeyObj=Cu,Ru}if(_u=="EC"){var Lu,Ru,Ou=$u,Du=new l$a.crypto.ECDSA({curve:Ou}).generateKeyPairHex();return(Lu=new l$a.crypto.ECDSA({curve:Ou})).setPublicKeyHex(Du.ecpubhex),Lu.setPrivateKeyHex(Du.ecprvhex),Lu.isPrivate=!0,Lu.isPublic=!1,(Cu=new l$a.crypto.ECDSA({curve:Ou})).setPublicKeyHex(Du.ecpubhex),Cu.isPrivate=!1,Cu.isPublic=!0,(Ru={}).prvKeyObj=Lu,Ru.pubKeyObj=Cu,Ru}throw"unknown algorithm: "+_u},Ee.getPEM=function(_u,$u,Tu,Cu,Pu,Bu){var Lu=l$a,Ru=Lu.asn1,Ou=Ru.DERObjectIdentifier,Du=Ru.DERInteger,Fu=Ru.ASN1Util.newObject,Vu=Ru.x509.SubjectPublicKeyInfo,ku=Lu.crypto,Nu=ku.DSA,Gu=ku.ECDSA,ju=X$5;function Hu(qu){return Fu({seq:[{int:0},{int:{bigint:qu.n}},{int:qu.e},{int:{bigint:qu.d}},{int:{bigint:qu.p}},{int:{bigint:qu.q}},{int:{bigint:qu.dmp1}},{int:{bigint:qu.dmq1}},{int:{bigint:qu.coeff}}]})}function Uu(qu){return Fu({seq:[{int:1},{octstr:{hex:qu.prvKeyHex}},{tag:["a0",!0,{oid:{name:qu.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+qu.pubKeyHex}}]}]})}function zu(qu){return Fu({seq:[{int:0},{int:{bigint:qu.p}},{int:{bigint:qu.q}},{int:{bigint:qu.g}},{int:{bigint:qu.y}},{int:{bigint:qu.x}}]})}if((ju!==void 0&&_u instanceof ju||Nu!==void 0&&_u instanceof Nu||Gu!==void 0&&_u instanceof Gu)&&_u.isPublic==1&&($u===void 0||$u=="PKCS8PUB"))return ae$6(Yu=new Vu(_u).getEncodedHex(),"PUBLIC KEY");if($u=="PKCS1PRV"&&ju!==void 0&&_u instanceof ju&&(Tu===void 0||Tu==null)&&_u.isPrivate==1)return ae$6(Yu=Hu(_u).getEncodedHex(),"RSA PRIVATE KEY");if($u=="PKCS1PRV"&&Gu!==void 0&&_u instanceof Gu&&(Tu===void 0||Tu==null)&&_u.isPrivate==1){var Wu=new Ou({name:_u.curveName}).getEncodedHex(),Qu=Uu(_u).getEncodedHex(),Ku="";return Ku+=ae$6(Wu,"EC PARAMETERS"),Ku+=ae$6(Qu,"EC PRIVATE KEY")}if($u=="PKCS1PRV"&&Nu!==void 0&&_u instanceof Nu&&(Tu===void 0||Tu==null)&&_u.isPrivate==1)return ae$6(Yu=zu(_u).getEncodedHex(),"DSA PRIVATE KEY");if($u=="PKCS5PRV"&&ju!==void 0&&_u instanceof ju&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1){var Yu=Hu(_u).getEncodedHex();return Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Yu,Tu,Cu,Bu)}if($u=="PKCS5PRV"&&Gu!==void 0&&_u instanceof Gu&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1)return Yu=Uu(_u).getEncodedHex(),Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Yu,Tu,Cu,Bu);if($u=="PKCS5PRV"&&Nu!==void 0&&_u instanceof Nu&&Tu!==void 0&&Tu!=null&&_u.isPrivate==1)return Yu=zu(_u).getEncodedHex(),Cu===void 0&&(Cu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Yu,Tu,Cu,Bu);var Xc=function(qu,Xu){var Zu=_d(qu,Xu);return new Fu({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Zu.pbkdf2Salt}},{int:Zu.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Zu.encryptionSchemeIV}}]}]}]},{octstr:{hex:Zu.ciphertext}}]}).getEncodedHex()},_d=function(qu,Xu){var Zu=h$8.lib.WordArray.random(8),_c=h$8.lib.WordArray.random(8),Ju=h$8.PBKDF2(Xu,Zu,{keySize:6,iterations:100}),_h=h$8.enc.Hex.parse(qu),ep=h$8.TripleDES.encrypt(_h,Ju,{iv:_c})+"",tp={};return tp.ciphertext=ep,tp.pbkdf2Salt=h$8.enc.Hex.stringify(Zu),tp.pbkdf2Iter=100,tp.encryptionSchemeAlg="DES-EDE3-CBC",tp.encryptionSchemeIV=h$8.enc.Hex.stringify(_c),tp};if($u=="PKCS8PRV"&&ju!=null&&_u instanceof ju&&_u.isPrivate==1){var _f=Hu(_u).getEncodedHex();return Yu=Fu({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_f}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$6(Yu,"PRIVATE KEY"):ae$6(Qu=Xc(Yu,Tu),"ENCRYPTED PRIVATE KEY")}if($u=="PKCS8PRV"&&Gu!==void 0&&_u instanceof Gu&&_u.isPrivate==1)return _f=new Fu({seq:[{int:1},{octstr:{hex:_u.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+_u.pubKeyHex}}]}]}).getEncodedHex(),Yu=Fu({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:_u.curveName}}]},{octstr:{hex:_f}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$6(Yu,"PRIVATE KEY"):ae$6(Qu=Xc(Yu,Tu),"ENCRYPTED PRIVATE KEY");if($u=="PKCS8PRV"&&Nu!==void 0&&_u instanceof Nu&&_u.isPrivate==1)return _f=new Du({bigint:_u.x}).getEncodedHex(),Yu=Fu({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:_u.p}},{int:{bigint:_u.q}},{int:{bigint:_u.g}}]}]},{octstr:{hex:_f}}]}).getEncodedHex(),Tu===void 0||Tu==null?ae$6(Yu,"PRIVATE KEY"):ae$6(Qu=Xc(Yu,Tu),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(_u){var $u=le$3(_u,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex($u)},Ee.getKeyFromCSRHex=function(_u){var $u=Ee.parseCSRHex(_u);return Ee.getKey($u.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(_u){var $u=Me,Tu=$u.getChildIdx,Cu=$u.getTLV,Pu={},Bu=_u;if(Bu.substr(0,2)!="30")throw"malformed CSR(code:001)";var Lu=Tu(Bu,0);if(Lu.length<1)throw"malformed CSR(code:002)";if(Bu.substr(Lu[0],2)!="30")throw"malformed CSR(code:003)";var Ru=Tu(Bu,Lu[0]);if(Ru.length<3)throw"malformed CSR(code:004)";return Pu.p8pubkeyhex=Cu(Bu,Ru[2]),Pu},Ee.getKeyID=function(_u){var $u=Ee,Tu=Me;typeof _u=="string"&&_u.indexOf("BEGIN ")!=-1&&(_u=$u.getKey(_u));var Cu=le$3($u.getPEM(_u)),Pu=Tu.getIdxbyList(Cu,0,[1]),Bu=Tu.getV(Cu,Pu).substring(2);return l$a.crypto.Util.hashHex(Bu,"sha1")},Ee.getJWKFromKey=function(_u){var $u={};if(_u instanceof X$5&&_u.isPrivate)return $u.kty="RSA",$u.n=ee$4(_u.n.toString(16)),$u.e=ee$4(_u.e.toString(16)),$u.d=ee$4(_u.d.toString(16)),$u.p=ee$4(_u.p.toString(16)),$u.q=ee$4(_u.q.toString(16)),$u.dp=ee$4(_u.dmp1.toString(16)),$u.dq=ee$4(_u.dmq1.toString(16)),$u.qi=ee$4(_u.coeff.toString(16)),$u;if(_u instanceof X$5&&_u.isPublic)return $u.kty="RSA",$u.n=ee$4(_u.n.toString(16)),$u.e=ee$4(_u.e.toString(16)),$u;if(_u instanceof l$a.crypto.ECDSA&&_u.isPrivate){if((Cu=_u.getShortNISTPCurveName())!=="P-256"&&Cu!=="P-384")throw"unsupported curve name for JWT: "+Cu;var Tu=_u.getPublicKeyXYHex();return $u.kty="EC",$u.crv=Cu,$u.x=ee$4(Tu.x),$u.y=ee$4(Tu.y),$u.d=ee$4(_u.prvKeyHex),$u}if(_u instanceof l$a.crypto.ECDSA&&_u.isPublic){var Cu;if((Cu=_u.getShortNISTPCurveName())!=="P-256"&&Cu!=="P-384")throw"unsupported curve name for JWT: "+Cu;return Tu=_u.getPublicKeyXYHex(),$u.kty="EC",$u.crv=Cu,$u.x=ee$4(Tu.x),$u.y=ee$4(Tu.y),$u}throw"not supported key object"},l$a.asn1!==void 0&&l$a.asn1||(l$a.asn1={}),l$a.asn1.ASN1Util=new function(){this.integerToByteHex=function(_u){var $u=_u.toString(16);return $u.length%2==1&&($u="0"+$u),$u},this.bigIntToMinTwosComplementsHex=function(_u){var $u=_u.toString(16);if($u.substr(0,1)!="-")$u.length%2==1?$u="0"+$u:$u.match(/^[0-7]/)||($u="00"+$u);else{var Tu=$u.substr(1).length;Tu%2==1?Tu+=1:$u.match(/^[0-7]/)||(Tu+=2);for(var Cu="",Pu=0;Pu<Tu;Pu++)Cu+="f";$u=new c$d(Cu,16).xor(_u).add(c$d.ONE).toString(16).replace(/^-/,"")}return $u},this.getPEMStringFromHex=function(_u,$u){return ae$6(_u,$u)},this.newObject=function(_u){var $u=l$a.asn1,Tu=$u.ASN1Object,Cu=$u.DERBoolean,Pu=$u.DERInteger,Bu=$u.DERBitString,Lu=$u.DEROctetString,Ru=$u.DERNull,Ou=$u.DERObjectIdentifier,Du=$u.DEREnumerated,Fu=$u.DERUTF8String,Vu=$u.DERNumericString,ku=$u.DERPrintableString,Nu=$u.DERTeletexString,Gu=$u.DERIA5String,ju=$u.DERUTCTime,Hu=$u.DERGeneralizedTime,Uu=$u.DERVisibleString,zu=$u.DERBMPString,Wu=$u.DERSequence,Qu=$u.DERSet,Ku=$u.DERTaggedObject,Yu=$u.ASN1Util.newObject;if(_u instanceof $u.ASN1Object)return _u;var Xc=Object.keys(_u);if(Xc.length!=1)throw new Error("key of param shall be only one.");var _d=Xc[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_d+":")==-1)throw new Error("undefined key: "+_d);if(_d=="bool")return new Cu(_u[_d]);if(_d=="int")return new Pu(_u[_d]);if(_d=="bitstr")return new Bu(_u[_d]);if(_d=="octstr")return new Lu(_u[_d]);if(_d=="null")return new Ru(_u[_d]);if(_d=="oid")return new Ou(_u[_d]);if(_d=="enum")return new Du(_u[_d]);if(_d=="utf8str")return new Fu(_u[_d]);if(_d=="numstr")return new Vu(_u[_d]);if(_d=="prnstr")return new ku(_u[_d]);if(_d=="telstr")return new Nu(_u[_d]);if(_d=="ia5str")return new Gu(_u[_d]);if(_d=="utctime")return new ju(_u[_d]);if(_d=="gentime")return new Hu(_u[_d]);if(_d=="visstr")return new Uu(_u[_d]);if(_d=="bmpstr")return new zu(_u[_d]);if(_d=="asn1")return new Tu(_u[_d]);if(_d=="seq"){for(var _f=_u[_d],qu=[],Xu=0;Xu<_f.length;Xu++){var Zu=Yu(_f[Xu]);qu.push(Zu)}return new Wu({array:qu})}if(_d=="set"){for(_f=_u[_d],qu=[],Xu=0;Xu<_f.length;Xu++)Zu=Yu(_f[Xu]),qu.push(Zu);return new Qu({array:qu})}if(_d=="tag"){var _c=_u[_d];if(Object.prototype.toString.call(_c)==="[object Array]"&&_c.length==3){var Ju=Yu(_c[2]);return new Ku({tag:_c[0],explicit:_c[1],obj:Ju})}return new Ku(_c)}},this.jsonToASN1HEX=function(_u){return this.newObject(_u).getEncodedHex()}},l$a.asn1.ASN1Util.oidHexToInt=function(_u){for(var $u="",Tu=parseInt(_u.substr(0,2),16),Cu=($u=Math.floor(Tu/40)+"."+Tu%40,""),Pu=2;Pu<_u.length;Pu+=2){var Bu=("00000000"+parseInt(_u.substr(Pu,2),16).toString(2)).slice(-8);Cu+=Bu.substr(1,7),Bu.substr(0,1)=="0"&&($u=$u+"."+new c$d(Cu,2).toString(10),Cu="")}return $u},l$a.asn1.ASN1Util.oidIntToHex=function(_u){var $u=function(Ru){var Ou=Ru.toString(16);return Ou.length==1&&(Ou="0"+Ou),Ou},Tu=function(Ru){var Ou="",Du=new c$d(Ru,10).toString(2),Fu=7-Du.length%7;Fu==7&&(Fu=0);for(var Vu="",ku=0;ku<Fu;ku++)Vu+="0";for(Du=Vu+Du,ku=0;ku<Du.length-1;ku+=7){var Nu=Du.substr(ku,7);ku!=Du.length-7&&(Nu="1"+Nu),Ou+=$u(parseInt(Nu,2))}return Ou};if(!_u.match(/^[0-9.]+$/))throw"malformed oid string: "+_u;var Cu="",Pu=_u.split("."),Bu=40*parseInt(Pu[0])+parseInt(Pu[1]);Cu+=$u(Bu),Pu.splice(0,2);for(var Lu=0;Lu<Pu.length;Lu++)Cu+=Tu(Pu[Lu]);return Cu},l$a.asn1.ASN1Object=function(_u){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var $u=this.hV.length/2,Tu=$u.toString(16);if(Tu.length%2==1&&(Tu="0"+Tu),$u<128)return Tu;var Cu=Tu.length/2;if(Cu>15)throw"ASN.1 length too long to represent by 8x: n = "+$u.toString(16);return(128+Cu).toString(16)+Tu},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function($u){this.params=$u},_u!=null&&_u.tlv!=null&&(this.hTLV=_u.tlv,this.isModified=!1)},l$a.asn1.DERAbstractString=function(_u){l$a.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=ie$4(this.s).toLowerCase()},this.setStringHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"?this.setString(_u):_u.str!==void 0?this.setString(_u.str):_u.hex!==void 0&&this.setStringHex(_u.hex))},u$a.lang.extend(l$a.asn1.DERAbstractString,l$a.asn1.ASN1Object),l$a.asn1.DERAbstractTime=function(_u){l$a.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function($u){var Tu=$u.getTime()+6e4*$u.getTimezoneOffset();return new Date(Tu)},this.formatDate=function($u,Tu,Cu){var Pu=this.zeroPadding,Bu=this.localDateToUTC($u),Lu=String(Bu.getFullYear());Tu=="utc"&&(Lu=Lu.substr(2,2));var Ru=Lu+Pu(String(Bu.getMonth()+1),2)+Pu(String(Bu.getDate()),2)+Pu(String(Bu.getHours()),2)+Pu(String(Bu.getMinutes()),2)+Pu(String(Bu.getSeconds()),2);if(Cu===!0){var Ou=Bu.getMilliseconds();if(Ou!=0){var Du=Pu(String(Ou),3);Ru=Ru+"."+(Du=Du.replace(/[0]+$/,""))}}return Ru+"Z"},this.zeroPadding=function($u,Tu){return $u.length>=Tu?$u:new Array(Tu-$u.length+1).join("0")+$u},this.getString=function(){return this.s},this.setString=function($u){this.hTLV=null,this.isModified=!0,this.s=$u,this.hV=J$7($u)},this.setByDateValue=function($u,Tu,Cu,Pu,Bu,Lu){var Ru=new Date(Date.UTC($u,Tu-1,Cu,Pu,Bu,Lu,0));this.setByDate(Ru)},this.getFreshValueHex=function(){return this.hV}},u$a.lang.extend(l$a.asn1.DERAbstractTime,l$a.asn1.ASN1Object),l$a.asn1.DERAbstractStructured=function(_u){l$a.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array=$u},this.appendASN1Object=function($u){this.hTLV=null,this.isModified=!0,this.asn1Array.push($u)},this.asn1Array=new Array,_u!==void 0&&_u.array!==void 0&&(this.asn1Array=_u.array)},u$a.lang.extend(l$a.asn1.DERAbstractStructured,l$a.asn1.ASN1Object),l$a.asn1.DERBoolean=function(_u){l$a.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=_u==0?"010100":"0101ff"},u$a.lang.extend(l$a.asn1.DERBoolean,l$a.asn1.ASN1Object),l$a.asn1.DERInteger=function(_u){l$a.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$a.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Tu=new c$d(String($u),10);this.setByBigInteger(Tu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.bigint!==void 0?this.setByBigInteger(_u.bigint):_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$a.lang.extend(l$a.asn1.DERInteger,l$a.asn1.ASN1Object),l$a.asn1.DERBitString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$a.asn1.ASN1Util.newObject(_u.obj);_u.hex="00"+$u.getEncodedHex()}l$a.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=Tu},this.setUnusedBitsAndHexValue=function(Tu,Cu){if(Tu<0||7<Tu)throw"unused bits shall be from 0 to 7: u = "+Tu;var Pu="0"+Tu;this.hTLV=null,this.isModified=!0,this.hV=Pu+Cu},this.setByBinaryString=function(Tu){var Cu=8-(Tu=Tu.replace(/0+$/,"")).length%8;Cu==8&&(Cu=0);for(var Pu=0;Pu<=Cu;Pu++)Tu+="0";var Bu="";for(Pu=0;Pu<Tu.length-1;Pu+=8){var Lu=Tu.substr(Pu,8),Ru=parseInt(Lu,2).toString(16);Ru.length==1&&(Ru="0"+Ru),Bu+=Ru}this.hTLV=null,this.isModified=!0,this.hV="0"+Cu+Bu},this.setByBooleanArray=function(Tu){for(var Cu="",Pu=0;Pu<Tu.length;Pu++)Tu[Pu]==1?Cu+="1":Cu+="0";this.setByBinaryString(Cu)},this.newFalseArray=function(Tu){for(var Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=!1;return Cu},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(typeof _u=="string"&&_u.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(_u):_u.hex!==void 0?this.setHexValueIncludingUnusedBits(_u.hex):_u.bin!==void 0?this.setByBinaryString(_u.bin):_u.array!==void 0&&this.setByBooleanArray(_u.array))},u$a.lang.extend(l$a.asn1.DERBitString,l$a.asn1.ASN1Object),l$a.asn1.DEROctetString=function(_u){if(_u!==void 0&&_u.obj!==void 0){var $u=l$a.asn1.ASN1Util.newObject(_u.obj);_u.hex=$u.getEncodedHex()}l$a.asn1.DEROctetString.superclass.constructor.call(this,_u),this.hT="04"},u$a.lang.extend(l$a.asn1.DEROctetString,l$a.asn1.DERAbstractString),l$a.asn1.DERNull=function(){l$a.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$a.lang.extend(l$a.asn1.DERNull,l$a.asn1.ASN1Object),l$a.asn1.DERObjectIdentifier=function(_u){l$a.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function($u){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=$u},this.setValueOidString=function($u){var Tu=function(Cu){var Pu=function(Fu){var Vu=Fu.toString(16);return Vu.length==1&&(Vu="0"+Vu),Vu},Bu=function(Fu){var Vu="",ku=parseInt(Fu,10).toString(2),Nu=7-ku.length%7;Nu==7&&(Nu=0);for(var Gu="",ju=0;ju<Nu;ju++)Gu+="0";for(ku=Gu+ku,ju=0;ju<ku.length-1;ju+=7){var Hu=ku.substr(ju,7);ju!=ku.length-7&&(Hu="1"+Hu),Vu+=Pu(parseInt(Hu,2))}return Vu};try{if(!Cu.match(/^[0-9.]+$/))return null;var Lu="",Ru=Cu.split("."),Ou=40*parseInt(Ru[0],10)+parseInt(Ru[1],10);Lu+=Pu(Ou),Ru.splice(0,2);for(var Du=0;Du<Ru.length;Du++)Lu+=Bu(Ru[Du]);return Lu}catch{return null}}($u);if(Tu==null)throw new Error("malformed oid string: "+$u);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.setValueName=function($u){var Tu=l$a.asn1.x509.OID.name2oid($u);if(Tu==="")throw new Error("DERObjectIdentifier oidName undefined: "+$u);this.setValueOidString(Tu)},this.setValueNameOrOid=function($u){$u.match(/^[0-2].[0-9.]+$/)?this.setValueOidString($u):this.setValueName($u)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function($u){typeof $u=="string"?this.setValueNameOrOid($u):$u.oid!==void 0?this.setValueNameOrOid($u.oid):$u.name!==void 0?this.setValueNameOrOid($u.name):$u.hex!==void 0&&this.setValueHex($u.hex)},_u!==void 0&&this.setByParam(_u)},u$a.lang.extend(l$a.asn1.DERObjectIdentifier,l$a.asn1.ASN1Object),l$a.asn1.DEREnumerated=function(_u){l$a.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function($u){this.hTLV=null,this.isModified=!0,this.hV=l$a.asn1.ASN1Util.bigIntToMinTwosComplementsHex($u)},this.setByInteger=function($u){var Tu=new c$d(String($u),10);this.setByBigInteger(Tu)},this.setValueHex=function($u){this.hV=$u},this.getFreshValueHex=function(){return this.hV},_u!==void 0&&(_u.int!==void 0?this.setByInteger(_u.int):typeof _u=="number"?this.setByInteger(_u):_u.hex!==void 0&&this.setValueHex(_u.hex))},u$a.lang.extend(l$a.asn1.DEREnumerated,l$a.asn1.ASN1Object),l$a.asn1.DERUTF8String=function(_u){l$a.asn1.DERUTF8String.superclass.constructor.call(this,_u),this.hT="0c"},u$a.lang.extend(l$a.asn1.DERUTF8String,l$a.asn1.DERAbstractString),l$a.asn1.DERNumericString=function(_u){l$a.asn1.DERNumericString.superclass.constructor.call(this,_u),this.hT="12"},u$a.lang.extend(l$a.asn1.DERNumericString,l$a.asn1.DERAbstractString),l$a.asn1.DERPrintableString=function(_u){l$a.asn1.DERPrintableString.superclass.constructor.call(this,_u),this.hT="13"},u$a.lang.extend(l$a.asn1.DERPrintableString,l$a.asn1.DERAbstractString),l$a.asn1.DERTeletexString=function(_u){l$a.asn1.DERTeletexString.superclass.constructor.call(this,_u),this.hT="14"},u$a.lang.extend(l$a.asn1.DERTeletexString,l$a.asn1.DERAbstractString),l$a.asn1.DERIA5String=function(_u){l$a.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="16"},u$a.lang.extend(l$a.asn1.DERIA5String,l$a.asn1.DERAbstractString),l$a.asn1.DERVisibleString=function(_u){l$a.asn1.DERIA5String.superclass.constructor.call(this,_u),this.hT="1a"},u$a.lang.extend(l$a.asn1.DERVisibleString,l$a.asn1.DERAbstractString),l$a.asn1.DERBMPString=function(_u){l$a.asn1.DERBMPString.superclass.constructor.call(this,_u),this.hT="1e"},u$a.lang.extend(l$a.asn1.DERBMPString,l$a.asn1.DERAbstractString),l$a.asn1.DERUTCTime=function(_u){l$a.asn1.DERUTCTime.superclass.constructor.call(this,_u),this.hT="17",this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"utc"),this.hV=J$7(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$7(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{12}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date))},u$a.lang.extend(l$a.asn1.DERUTCTime,l$a.asn1.DERAbstractTime),l$a.asn1.DERGeneralizedTime=function(_u){l$a.asn1.DERGeneralizedTime.superclass.constructor.call(this,_u),this.hT="18",this.withMillis=!1,this.setByDate=function($u){this.hTLV=null,this.isModified=!0,this.date=$u,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$7(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$7(this.s)),this.hV},_u!==void 0&&(_u.str!==void 0?this.setString(_u.str):typeof _u=="string"&&_u.match(/^[0-9]{14}Z$/)?this.setString(_u):_u.hex!==void 0?this.setStringHex(_u.hex):_u.date!==void 0&&this.setByDate(_u.date),_u.millis===!0&&(this.withMillis=!0))},u$a.lang.extend(l$a.asn1.DERGeneralizedTime,l$a.asn1.DERAbstractTime),l$a.asn1.DERSequence=function(_u){l$a.asn1.DERSequence.superclass.constructor.call(this,_u),this.hT="30",this.getFreshValueHex=function(){for(var $u="",Tu=0;Tu<this.asn1Array.length;Tu++)$u+=this.asn1Array[Tu].getEncodedHex();return this.hV=$u,this.hV}},u$a.lang.extend(l$a.asn1.DERSequence,l$a.asn1.DERAbstractStructured),l$a.asn1.DERSet=function(_u){l$a.asn1.DERSet.superclass.constructor.call(this,_u),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var $u=new Array,Tu=0;Tu<this.asn1Array.length;Tu++){var Cu=this.asn1Array[Tu];$u.push(Cu.getEncodedHex())}return this.sortFlag==1&&$u.sort(),this.hV=$u.join(""),this.hV},_u!==void 0&&_u.sortflag!==void 0&&_u.sortflag==0&&(this.sortFlag=!1)},u$a.lang.extend(l$a.asn1.DERSet,l$a.asn1.DERAbstractStructured),l$a.asn1.DERTaggedObject=function(_u){l$a.asn1.DERTaggedObject.superclass.constructor.call(this);var $u=l$a.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Tu,Cu,Pu){this.hT=Cu,this.isExplicit=Tu,this.asn1Object=Pu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Pu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Cu),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Tu){Tu.tag!=null&&(this.hT=Tu.tag),Tu.explicit!=null&&(this.isExplicit=Tu.explicit),Tu.tage!=null&&(this.hT=Tu.tage,this.isExplicit=!0),Tu.tagi!=null&&(this.hT=Tu.tagi,this.isExplicit=!1),Tu.obj!=null&&(Tu.obj instanceof $u.ASN1Object?(this.asn1Object=Tu.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Tu.obj=="object"&&(this.asn1Object=$u.ASN1Util.newObject(Tu.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},_u!=null&&this.setByParam(_u)},u$a.lang.extend(l$a.asn1.DERTaggedObject,l$a.asn1.ASN1Object);var Me=new function(){};function Ie(_u,$u){for(var Tu="",Cu=$u/4-_u.length,Pu=0;Pu<Cu;Pu++)Tu+="0";return Tu+_u}function Se(_u,$u,Tu){for(var Cu="",Pu=0;Cu.length<$u;)Cu+=re$5(Tu(oe$3(_u+String.fromCharCode.apply(String,[(4278190080&Pu)>>24,(16711680&Pu)>>16,(65280&Pu)>>8,255&Pu])))),Pu+=1;return Cu}function Ce$1(_u){for(var $u in l$a.crypto.Util.DIGESTINFOHEAD){var Tu=l$a.crypto.Util.DIGESTINFOHEAD[$u],Cu=Tu.length;if(_u.substring(0,Cu)==Tu)return[$u,_u.substring(Cu)]}return[]}function Be$1(_u){var $u,Tu=Me,Cu=Tu.getChildIdx,Pu=Tu.getV,Bu=Tu.getTLV,Lu=Tu.getVbyList,Ru=Tu.getVbyListEx,Ou=Tu.getTLVbyList,Du=Tu.getTLVbyListEx,Fu=Tu.getIdxbyList,Vu=Tu.getIdxbyListEx,ku=Tu.getVidx,Nu=Tu.getInt,Gu=Tu.oidname,ju=Tu.hextooidstr,Hu=le$3;try{$u=l$a.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Uu=Ou(this.hex,0,[0,0]);if(Uu.substr(0,2)=="a0"){var zu=Ou(Uu,0,[0]),Wu=Nu(zu,0);if(Wu<0||2<Wu)throw new Error("malformed version field");return this.version=Wu+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Ru(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Uu=Du(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Uu)},this.getAlgorithmIdentifierName=function(Uu){for(var zu in $u)if(Uu===$u[zu])return zu;return Gu(Ru(Uu,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Ou(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Ou(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,0]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getNotAfter=function(){var Uu=Lu(this.hex,0,[0,4+this.foffset,1]);return Uu=Uu.replace(/(..)/g,"%$1"),Uu=decodeURIComponent(Uu)},this.getPublicKeyHex=function(){return Tu.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Fu(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Uu=this.getPublicKeyIdx();return Fu(this.hex,Uu,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Uu=Ou(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Uu)},this.getSignatureValueHex=function(){return Lu(this.hex,0,[2],"03",!0)},this.verifySignature=function(Uu){var zu=this.getSignatureAlgorithmField(),Wu=this.getSignatureValueHex(),Qu=Ou(this.hex,0,[0],"30"),Ku=new l$a.crypto.Signature({alg:zu});return Ku.init(Uu),Ku.updateHex(Qu),Ku.verify(Wu)},this.parseExt=function(Uu){var zu,Wu,Qu;if(Uu===void 0){if(Qu=this.hex,this.version!==3)return-1;zu=Fu(Qu,0,[0,7,0],"30"),Wu=Cu(Qu,zu)}else{Qu=le$3(Uu);var Ku=Fu(Qu,0,[0,3,0,0],"06");if(Pu(Qu,Ku)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);zu=Fu(Qu,0,[0,3,0,1,0],"30"),Wu=Cu(Qu,zu),this.hex=Qu}this.aExtInfo=new Array;for(var Yu=0;Yu<Wu.length;Yu++){var Xc={critical:!1},_d=0;Cu(Qu,Wu[Yu]).length===3&&(Xc.critical=!0,_d=1),Xc.oid=Tu.hextooidstr(Lu(Qu,Wu[Yu],[0],"06"));var _f=Fu(Qu,Wu[Yu],[1+_d]);Xc.vidx=ku(Qu,_f),this.aExtInfo.push(Xc)}},this.getExtInfo=function(Uu){var zu=this.aExtInfo,Wu=Uu;if(Uu.match(/^[0-9.]+$/)||(Wu=l$a.asn1.x509.OID.name2oid(Uu)),Wu!==""){for(var Qu=0;Qu<zu.length;Qu++)if(zu[Qu].oid===Wu)return zu[Qu]}},this.getExtBasicConstraints=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("basicConstraints");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"basicConstraints"};if(zu&&(Qu.critical=!0),Uu==="3000")return Qu;if(Uu==="30030101ff")return Qu.cA=!0,Qu;if(Uu.substr(0,12)==="30060101ff02"){var Ku=Pu(Uu,10),Yu=parseInt(Ku,16);return Qu.cA=!0,Qu.pathLen=Yu,Qu}throw new Error("hExtV parse error: "+Uu)},this.getExtKeyUsage=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("keyUsage");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"keyUsage"};return zu&&(Qu.critical=!0),Qu.names=this.getExtKeyUsageString(Uu).split(","),Qu},this.getExtKeyUsageBin=function(Uu){if(Uu===void 0){var zu=this.getExtInfo("keyUsage");if(zu===void 0)return"";Uu=Bu(this.hex,zu.vidx)}if(Uu.length!=8&&Uu.length!=10)throw new Error("malformed key usage value: "+Uu);var Wu="000000000000000"+parseInt(Uu.substr(6),16).toString(2);return Uu.length==8&&(Wu=Wu.slice(-8)),Uu.length==10&&(Wu=Wu.slice(-16)),(Wu=Wu.replace(/0+$/,""))==""&&(Wu="0"),Wu},this.getExtKeyUsageString=function(Uu){for(var zu=this.getExtKeyUsageBin(Uu),Wu=new Array,Qu=0;Qu<zu.length;Qu++)zu.substr(Qu,1)=="1"&&Wu.push(Be$1.KEYUSAGE_NAME[Qu]);return Wu.join(",")},this.getExtSubjectKeyIdentifier=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("subjectKeyIdentifier");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"subjectKeyIdentifier"};zu&&(Qu.critical=!0);var Ku=Pu(Uu,0);return Qu.kid={hex:Ku},Qu},this.getExtAuthorityKeyIdentifier=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("authorityKeyIdentifier");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"authorityKeyIdentifier"};zu&&(Qu.critical=!0);for(var Ku=Cu(Uu,0),Yu=0;Yu<Ku.length;Yu++){var Xc=Uu.substr(Ku[Yu],2);if(Xc==="80"&&(Qu.kid={hex:Pu(Uu,Ku[Yu])}),Xc==="a1"){var _d=Bu(Uu,Ku[Yu]),_f=this.getGeneralNames(_d);Qu.issuer=_f[0].dn}Xc==="82"&&(Qu.sn={hex:Pu(Uu,Ku[Yu])})}return Qu},this.getExtExtKeyUsage=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("extKeyUsage");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"extKeyUsage",array:[]};zu&&(Qu.critical=!0);for(var Ku=Cu(Uu,0),Yu=0;Yu<Ku.length;Yu++)Qu.array.push(Gu(Pu(Uu,Ku[Yu])));return Qu},this.getExtExtKeyUsageName=function(){var Uu=this.getExtInfo("extKeyUsage");if(Uu===void 0)return Uu;var zu=new Array,Wu=Bu(this.hex,Uu.vidx);if(Wu==="")return zu;for(var Qu=Cu(Wu,0),Ku=0;Ku<Qu.length;Ku++)zu.push(Gu(Pu(Wu,Qu[Ku])));return zu},this.getExtSubjectAltName=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("subjectAltName");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"subjectAltName",array:[]};return zu&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getExtIssuerAltName=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("issuerAltName");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"issuerAltName",array:[]};return zu&&(Qu.critical=!0),Qu.array=this.getGeneralNames(Uu),Qu},this.getGeneralNames=function(Uu){for(var zu=Cu(Uu,0),Wu=[],Qu=0;Qu<zu.length;Qu++){var Ku=this.getGeneralName(Bu(Uu,zu[Qu]));Ku!==void 0&&Wu.push(Ku)}return Wu},this.getGeneralName=function(Uu){var zu=Uu.substr(0,2),Wu=Pu(Uu,0),Qu=re$5(Wu);return zu=="81"?{rfc822:Qu}:zu=="82"?{dns:Qu}:zu=="86"?{uri:Qu}:zu=="87"?{ip:ue$1(Wu)}:zu=="a4"?{dn:this.getX500Name(Wu)}:void 0},this.getExtSubjectAltName2=function(){var Uu,zu,Wu,Qu=this.getExtInfo("subjectAltName");if(Qu===void 0)return Qu;for(var Ku=new Array,Yu=Bu(this.hex,Qu.vidx),Xc=Cu(Yu,0),_d=0;_d<Xc.length;_d++)Wu=Yu.substr(Xc[_d],2),Uu=Pu(Yu,Xc[_d]),Wu==="81"&&(zu=ne$5(Uu),Ku.push(["MAIL",zu])),Wu==="82"&&(zu=ne$5(Uu),Ku.push(["DNS",zu])),Wu==="84"&&(zu=Be$1.hex2dn(Uu,0),Ku.push(["DN",zu])),Wu==="86"&&(zu=ne$5(Uu),Ku.push(["URI",zu])),Wu==="87"&&(zu=ue$1(Uu),Ku.push(["IP",zu]));return Ku},this.getExtCRLDistributionPoints=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("cRLDistributionPoints");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"cRLDistributionPoints",array:[]};zu&&(Qu.critical=!0);for(var Ku=Cu(Uu,0),Yu=0;Yu<Ku.length;Yu++){var Xc=Bu(Uu,Ku[Yu]);Qu.array.push(this.getDistributionPoint(Xc))}return Qu},this.getDistributionPoint=function(Uu){for(var zu={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var Ku=Uu.substr(Wu[Qu],2),Yu=Bu(Uu,Wu[Qu]);Ku=="a0"&&(zu.dpname=this.getDistributionPointName(Yu))}return zu},this.getDistributionPointName=function(Uu){for(var zu={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var Ku=Uu.substr(Wu[Qu],2),Yu=Bu(Uu,Wu[Qu]);Ku=="a0"&&(zu.full=this.getGeneralNames(Yu))}return zu},this.getExtCRLDistributionPointsURI=function(){var Uu=this.getExtInfo("cRLDistributionPoints");if(Uu===void 0)return Uu;for(var zu=new Array,Wu=Cu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++)try{var Ku=ne$5(Lu(this.hex,Wu[Qu],[0,0,0],"86"));zu.push(Ku)}catch{}return zu},this.getExtAIAInfo=function(){var Uu=this.getExtInfo("authorityInfoAccess");if(Uu===void 0)return Uu;for(var zu={ocsp:[],caissuer:[]},Wu=Cu(this.hex,Uu.vidx),Qu=0;Qu<Wu.length;Qu++){var Ku=Lu(this.hex,Wu[Qu],[0],"06"),Yu=Lu(this.hex,Wu[Qu],[1],"86");Ku==="2b06010505073001"&&zu.ocsp.push(ne$5(Yu)),Ku==="2b06010505073002"&&zu.caissuer.push(ne$5(Yu))}return zu},this.getExtAuthorityInfoAccess=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("authorityInfoAccess");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"authorityInfoAccess",array:[]};zu&&(Qu.critical=!0);for(var Ku=Cu(Uu,0),Yu=0;Yu<Ku.length;Yu++){var Xc=Ru(Uu,Ku[Yu],[0],"06"),_d=ne$5(Lu(Uu,Ku[Yu],[1],"86"));if(Xc=="2b06010505073001")Qu.array.push({ocsp:_d});else{if(Xc!="2b06010505073002")throw new Error("unknown method: "+Xc);Qu.array.push({caissuer:_d})}}return Qu},this.getExtCertificatePolicies=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("certificatePolicies");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"certificatePolicies",array:[]};zu&&(Qu.critical=!0);for(var Ku=Cu(Uu,0),Yu=0;Yu<Ku.length;Yu++){var Xc=Bu(Uu,Ku[Yu]),_d=this.getPolicyInformation(Xc);Qu.array.push(_d)}return Qu},this.getPolicyInformation=function(Uu){var zu={},Wu=Lu(Uu,0,[0],"06");zu.policyoid=Gu(Wu);var Qu=Vu(Uu,0,[1],"30");if(Qu!=-1){zu.array=[];for(var Ku=Cu(Uu,Qu),Yu=0;Yu<Ku.length;Yu++){var Xc=Bu(Uu,Ku[Yu]),_d=this.getPolicyQualifierInfo(Xc);zu.array.push(_d)}}return zu},this.getPolicyQualifierInfo=function(Uu){var zu={},Wu=Lu(Uu,0,[0],"06");if(Wu==="2b06010505070201"){var Qu=Ru(Uu,0,[1],"16");zu.cps=re$5(Qu)}else if(Wu==="2b06010505070202"){var Ku=Ou(Uu,0,[1],"30");zu.unotice=this.getUserNotice(Ku)}return zu},this.getUserNotice=function(Uu){for(var zu={},Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var Ku=Bu(Uu,Wu[Qu]);Ku.substr(0,2)!="30"&&(zu.exptext=this.getDisplayText(Ku))}return zu},this.getDisplayText=function(Uu){var zu={};return zu.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Uu.substr(0,2)],zu.str=re$5(Pu(Uu,0)),zu},this.getExtCRLNumber=function(Uu,zu){var Wu={extname:"cRLNumber"};if(zu&&(Wu.critical=!0),Uu.substr(0,2)=="02")return Wu.num={hex:Pu(Uu,0)},Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtCRLReason=function(Uu,zu){var Wu={extname:"cRLReason"};if(zu&&(Wu.critical=!0),Uu.substr(0,2)=="0a")return Wu.code=parseInt(Pu(Uu,0),16),Wu;throw new Error("hExtV parse error: "+Uu)},this.getExtOcspNonce=function(Uu,zu){var Wu={extname:"ocspNonce"};zu&&(Wu.critical=!0);var Qu=Pu(Uu,0);return Wu.hex=Qu,Wu},this.getExtOcspNoCheck=function(Uu,zu){var Wu={extname:"ocspNoCheck"};return zu&&(Wu.critical=!0),Wu},this.getExtAdobeTimeStamp=function(Uu,zu){if(Uu===void 0&&zu===void 0){var Wu=this.getExtInfo("adobeTimeStamp");if(Wu===void 0)return;Uu=Bu(this.hex,Wu.vidx),zu=Wu.critical}var Qu={extname:"adobeTimeStamp"};zu&&(Qu.critical=!0);var Ku=Cu(Uu,0);if(Ku.length>1){var Yu=Bu(Uu,Ku[1]),Xc=this.getGeneralName(Yu);Xc.uri!=null&&(Qu.uri=Xc.uri)}if(Ku.length>2){var _d=Bu(Uu,Ku[2]);_d=="0101ff"&&(Qu.reqauth=!0),_d=="010100"&&(Qu.reqauth=!1)}return Qu},this.getX500NameRule=function(Uu){for(var zu=null,Wu=[],Qu=0;Qu<Uu.length;Qu++)for(var Ku=Uu[Qu],Yu=0;Yu<Ku.length;Yu++)Wu.push(Ku[Yu]);for(Qu=0;Qu<Wu.length;Qu++){var Xc=Wu[Qu],_d=Xc.ds,_f=Xc.value,qu=Xc.type;if(_d!="prn"&&_d!="utf8"&&_d!="ia5")return"mixed";if(_d=="ia5"){if(qu!="CN")return"mixed";if(l$a.lang.String.isMail(_f))continue;return"mixed"}if(qu=="C"){if(_d=="prn")continue;return"mixed"}if(zu==null)zu=_d;else if(zu!==_d)return"mixed"}return zu==null?"prn":zu},this.getX500Name=function(Uu){var zu=this.getX500NameArray(Uu);return{array:zu,str:this.dnarraytostr(zu)}},this.getX500NameArray=function(Uu){for(var zu=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++)zu.push(this.getRDN(Bu(Uu,Wu[Qu])));return zu},this.getRDN=function(Uu){for(var zu=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++)zu.push(this.getAttrTypeAndValue(Bu(Uu,Wu[Qu])));return zu},this.getAttrTypeAndValue=function(Uu){var zu={type:null,value:null,ds:null},Wu=Cu(Uu,0),Qu=Lu(Uu,Wu[0],[],"06"),Ku=Lu(Uu,Wu[1],[]),Yu=l$a.asn1.ASN1Util.oidHexToInt(Qu);return zu.type=l$a.asn1.x509.OID.oid2atype(Yu),zu.ds=this.HEX2STAG[Uu.substr(Wu[1],2)],zu.ds!="bmp"?zu.value=ne$5(Ku):zu.value=he$2(Ku),zu},this.readCertPEM=function(Uu){this.readCertHex(Hu(Uu))},this.readCertHex=function(Uu){this.hex=Uu,this.getVersion();try{Fu(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Uu={};return Uu.version=this.getVersion(),Uu.serial={hex:this.getSerialNumberHex()},Uu.sigalg=this.getSignatureAlgorithmField(),Uu.issuer=this.getIssuer(),Uu.notbefore=this.getNotBefore(),Uu.notafter=this.getNotAfter(),Uu.subject=this.getSubject(),Uu.sbjpubkey=ae$6(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Uu.ext=this.getExtParamArray()),Uu.sighex=this.getSignatureValueHex(),Uu},this.getExtParamArray=function(Uu){Uu==null&&Vu(this.hex,0,[0,"[3]"])!=-1&&(Uu=Du(this.hex,0,[0,"[3]",0],"30"));for(var zu=[],Wu=Cu(Uu,0),Qu=0;Qu<Wu.length;Qu++){var Ku=Bu(Uu,Wu[Qu]),Yu=this.getExtParam(Ku);Yu!=null&&zu.push(Yu)}return zu},this.getExtParam=function(Uu){var zu=Cu(Uu,0).length;if(zu!=2&&zu!=3)throw new Error("wrong number elements in Extension: "+zu+" "+Uu);var Wu=ju(Lu(Uu,0,[0],"06")),Qu=!1;zu==3&&Ou(Uu,0,[1])=="0101ff"&&(Qu=!0);var Ku=Ou(Uu,0,[zu-1,0]),Yu=void 0;if(Wu=="2.5.29.14"?Yu=this.getExtSubjectKeyIdentifier(Ku,Qu):Wu=="2.5.29.15"?Yu=this.getExtKeyUsage(Ku,Qu):Wu=="2.5.29.17"?Yu=this.getExtSubjectAltName(Ku,Qu):Wu=="2.5.29.18"?Yu=this.getExtIssuerAltName(Ku,Qu):Wu=="2.5.29.19"?Yu=this.getExtBasicConstraints(Ku,Qu):Wu=="2.5.29.31"?Yu=this.getExtCRLDistributionPoints(Ku,Qu):Wu=="2.5.29.32"?Yu=this.getExtCertificatePolicies(Ku,Qu):Wu=="2.5.29.35"?Yu=this.getExtAuthorityKeyIdentifier(Ku,Qu):Wu=="2.5.29.37"?Yu=this.getExtExtKeyUsage(Ku,Qu):Wu=="1.3.6.1.5.5.7.1.1"?Yu=this.getExtAuthorityInfoAccess(Ku,Qu):Wu=="2.5.29.20"?Yu=this.getExtCRLNumber(Ku,Qu):Wu=="2.5.29.21"?Yu=this.getExtCRLReason(Ku,Qu):Wu=="1.3.6.1.5.5.7.48.1.2"?Yu=this.getExtOcspNonce(Ku,Qu):Wu=="1.3.6.1.5.5.7.48.1.5"?Yu=this.getExtOcspNoCheck(Ku,Qu):Wu=="1.2.840.113583.1.1.9.1"&&(Yu=this.getExtAdobeTimeStamp(Ku,Qu)),Yu!=null)return Yu;var Xc={extname:Wu,extn:Ku};return Qu&&(Xc.critical=!0),Xc},this.findExt=function(Uu,zu){for(var Wu=0;Wu<Uu.length;Wu++)if(Uu[Wu].extname==zu)return Uu[Wu];return null},this.updateExtCDPFullURI=function(Uu,zu){var Wu=this.findExt(Uu,"cRLDistributionPoints");if(Wu!=null&&Wu.array!=null){for(var Qu=Wu.array,Ku=0;Ku<Qu.length;Ku++)if(Qu[Ku].dpname!=null&&Qu[Ku].dpname.full!=null)for(var Yu=Qu[Ku].dpname.full,Xc=0;Xc<Yu.length;Xc++){var _d=Yu[Ku];_d.uri!=null&&(_d.uri=zu)}}},this.updateExtAIAOCSP=function(Uu,zu){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,Ku=0;Ku<Qu.length;Ku++)Qu[Ku].ocsp!=null&&(Qu[Ku].ocsp=zu)},this.updateExtAIACAIssuer=function(Uu,zu){var Wu=this.findExt(Uu,"authorityInfoAccess");if(Wu!=null&&Wu.array!=null)for(var Qu=Wu.array,Ku=0;Ku<Qu.length;Ku++)Qu[Ku].caissuer!=null&&(Qu[Ku].caissuer=zu)},this.dnarraytostr=function(Uu){return"/"+Uu.map(function(zu){return function(Wu){return Wu.map(function(Qu){return function(Ku){return Ku.type+"="+Ku.value}(Qu).replace(/\+/,"\\+")}).join("+")}(zu).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Uu,zu,Wu,Qu,Ku=function(Ju){for(var _h="",ep=Ju.array,tp=0;tp<ep.length;tp++){var rp=ep[tp];if(_h+="    policy oid: "+rp.policyoid+`
`,rp.array!==void 0)for(var dp=0;dp<rp.array.length;dp++){var cp=rp.array[dp];cp.cps!==void 0&&(_h+="    cps: "+cp.cps+`
`)}}return _h},Yu=function(Ju){for(var _h="",ep=Ju.array,tp=0;tp<ep.length;tp++){var rp=ep[tp];try{rp.dpname.full[0].uri!==void 0&&(_h+="    "+rp.dpname.full[0].uri+`
`)}catch{}try{rp.dname.full[0].dn.hex!==void 0&&(_h+="    "+Be$1.hex2dn(rp.dpname.full[0].dn.hex)+`
`)}catch{}}return _h},Xc=function(Ju){for(var _h="",ep=Ju.array,tp=0;tp<ep.length;tp++){var rp=ep[tp];rp.caissuer!==void 0&&(_h+="    caissuer: "+rp.caissuer+`
`),rp.ocsp!==void 0&&(_h+="    ocsp: "+rp.ocsp+`
`)}return _h};if(Uu=`Basic Fields
`,Uu+="  serial number: "+this.getSerialNumberHex()+`
`,Uu+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Uu+="  issuer: "+this.getIssuerString()+`
`,Uu+="  notBefore: "+this.getNotBefore()+`
`,Uu+="  notAfter: "+this.getNotAfter()+`
`,Uu+="  subject: "+this.getSubjectString()+`
`,Uu+=`  subject public key info: 
`,Uu+="    key algorithm: "+(zu=this.getPublicKey()).type+`
`,zu.type==="RSA"&&(Uu+="    n="+de$3(zu.n.toString(16)).substr(0,16)+`...
`,Uu+="    e="+de$3(zu.e.toString(16))+`
`),(Wu=this.aExtInfo)!=null){Uu+=`X509v3 Extensions:
`;for(var _d=0;_d<Wu.length;_d++){var _f=Wu[_d],qu=l$a.asn1.x509.OID.oid2name(_f.oid);qu===""&&(qu=_f.oid);var Xu="";if(_f.critical===!0&&(Xu="CRITICAL"),Uu+="  "+qu+" "+Xu+`:
`,qu==="basicConstraints"){var Zu=this.getExtBasicConstraints();Zu.cA===void 0?Uu+=`    {}
`:(Uu+="    cA=true",Zu.pathLen!==void 0&&(Uu+=", pathLen="+Zu.pathLen),Uu+=`
`)}else if(qu==="keyUsage")Uu+="    "+this.getExtKeyUsageString()+`
`;else if(qu==="subjectKeyIdentifier")Uu+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(qu==="authorityKeyIdentifier"){var _c=this.getExtAuthorityKeyIdentifier();_c.kid!==void 0&&(Uu+="    kid="+_c.kid.hex+`
`)}else qu==="extKeyUsage"?Uu+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:qu==="subjectAltName"?Uu+="    "+(Qu=this.getExtSubjectAltName(),JSON.stringify(Qu.array).replace(/[\[\]\{\}\"]/g,""))+`
`:qu==="cRLDistributionPoints"?Uu+=Yu(this.getExtCRLDistributionPoints()):qu==="authorityInfoAccess"?Uu+=Xc(this.getExtAuthorityInfoAccess()):qu==="certificatePolicies"&&(Uu+=Ku(this.getExtCertificatePolicies()))}}return Uu+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Uu+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof _u=="string"&&(_u.indexOf("-----BEGIN")!=-1?this.readCertPEM(_u):l$a.lang.String.isHex(_u)&&this.readCertHex(_u))}function Te$1(_u){return h$8.SHA256(_u).toString()}Me.getLblen=function(_u,$u){if(_u.substr($u+2,1)!="8")return 1;var Tu=parseInt(_u.substr($u+3,1));return Tu==0?-1:0<Tu&&Tu<10?Tu+1:-2},Me.getL=function(_u,$u){var Tu=Me.getLblen(_u,$u);return Tu<1?"":_u.substr($u+2,2*Tu)},Me.getVblen=function(_u,$u){var Tu;return(Tu=Me.getL(_u,$u))==""?-1:(Tu.substr(0,1)==="8"?new c$d(Tu.substr(2),16):new c$d(Tu,16)).intValue()},Me.getVidx=function(_u,$u){var Tu=Me.getLblen(_u,$u);return Tu<0?Tu:$u+2*(Tu+1)},Me.getV=function(_u,$u){var Tu=Me.getVidx(_u,$u),Cu=Me.getVblen(_u,$u);return _u.substr(Tu,2*Cu)},Me.getTLV=function(_u,$u){return _u.substr($u,2)+Me.getL(_u,$u)+Me.getV(_u,$u)},Me.getTLVblen=function(_u,$u){return 2+2*Me.getLblen(_u,$u)+2*Me.getVblen(_u,$u)},Me.getNextSiblingIdx=function(_u,$u){return Me.getVidx(_u,$u)+2*Me.getVblen(_u,$u)},Me.getChildIdx=function(_u,$u){var Tu,Cu,Pu,Bu=Me,Lu=[];Tu=Bu.getVidx(_u,$u),Cu=2*Bu.getVblen(_u,$u),_u.substr($u,2)=="03"&&(Tu+=2,Cu-=2),Pu=0;for(var Ru=Tu;Pu<=Cu;){var Ou=Bu.getTLVblen(_u,Ru);if((Pu+=Ou)<=Cu&&Lu.push(Ru),Ru+=Ou,Pu>=Cu)break}return Lu},Me.getNthChildIdx=function(_u,$u,Tu){return Me.getChildIdx(_u,$u)[Tu]},Me.getIdxbyList=function(_u,$u,Tu,Cu){var Pu,Bu,Lu=Me;return Tu.length==0?Cu!==void 0&&_u.substr($u,2)!==Cu?-1:$u:(Pu=Tu.shift())>=(Bu=Lu.getChildIdx(_u,$u)).length?-1:Lu.getIdxbyList(_u,Bu[Pu],Tu,Cu)},Me.getIdxbyListEx=function(_u,$u,Tu,Cu){var Pu,Bu,Lu=Me;if(Tu.length==0)return Cu!==void 0&&_u.substr($u,2)!==Cu?-1:$u;Pu=Tu.shift(),Bu=Lu.getChildIdx(_u,$u);for(var Ru=0,Ou=0;Ou<Bu.length;Ou++){var Du=_u.substr(Bu[Ou],2);if(typeof Pu=="number"&&!Lu.isContextTag(Du)&&Ru==Pu||typeof Pu=="string"&&Lu.isContextTag(Du,Pu))return Lu.getIdxbyListEx(_u,Bu[Ou],Tu,Cu);Lu.isContextTag(Du)||Ru++}return-1},Me.getTLVbyList=function(_u,$u,Tu,Cu){var Pu=Me,Bu=Pu.getIdxbyList(_u,$u,Tu,Cu);return Bu==-1||Bu>=_u.length?null:Pu.getTLV(_u,Bu)},Me.getTLVbyListEx=function(_u,$u,Tu,Cu){var Pu=Me,Bu=Pu.getIdxbyListEx(_u,$u,Tu,Cu);return Bu==-1?null:Pu.getTLV(_u,Bu)},Me.getVbyList=function(_u,$u,Tu,Cu,Pu){var Bu,Lu,Ru=Me;return(Bu=Ru.getIdxbyList(_u,$u,Tu,Cu))==-1||Bu>=_u.length?null:(Lu=Ru.getV(_u,Bu),Pu===!0&&(Lu=Lu.substr(2)),Lu)},Me.getVbyListEx=function(_u,$u,Tu,Cu,Pu){var Bu,Lu,Ru=Me;return(Bu=Ru.getIdxbyListEx(_u,$u,Tu,Cu))==-1?null:(Lu=Ru.getV(_u,Bu),_u.substr(Bu,2)=="03"&&Pu!==!1&&(Lu=Lu.substr(2)),Lu)},Me.getInt=function(_u,$u,Tu){Tu==null&&(Tu=-1);try{var Cu=_u.substr($u,2);if(Cu!="02"&&Cu!="03")return Tu;var Pu=Me.getV(_u,$u);return Cu=="02"?parseInt(Pu,16):function(Bu){try{var Lu=Bu.substr(0,2);if(Lu=="00")return parseInt(Bu.substr(2),16);var Ru=parseInt(Lu,16),Ou=Bu.substr(2),Du=parseInt(Ou,16).toString(2);return Du=="0"&&(Du="00000000"),Du=Du.slice(0,0-Ru),parseInt(Du,2)}catch{return-1}}(Pu)}catch{return Tu}},Me.getOID=function(_u,$u,Tu){Tu==null&&(Tu=null);try{return _u.substr($u,2)!="06"?Tu:function(Cu){if(!ce$1(Cu))return null;try{var Pu=[],Bu=Cu.substr(0,2),Lu=parseInt(Bu,16);Pu[0]=new String(Math.floor(Lu/40)),Pu[1]=new String(Lu%40);for(var Ru=Cu.substr(2),Ou=[],Du=0;Du<Ru.length/2;Du++)Ou.push(parseInt(Ru.substr(2*Du,2),16));var Fu=[],Vu="";for(Du=0;Du<Ou.length;Du++)128&Ou[Du]?Vu+=pe$1((127&Ou[Du]).toString(2),7):(Vu+=pe$1((127&Ou[Du]).toString(2),7),Fu.push(new String(parseInt(Vu,2))),Vu="");var ku=Pu.join(".");return Fu.length>0&&(ku=ku+"."+Fu.join(".")),ku}catch{return null}}(Me.getV(_u,$u))}catch{return Tu}},Me.getOIDName=function(_u,$u,Tu){Tu==null&&(Tu=null);try{var Cu=Me.getOID(_u,$u,Tu);if(Cu==Tu)return Tu;var Pu=l$a.asn1.x509.OID.oid2name(Cu);return Pu==""?Cu:Pu}catch{return Tu}},Me.getString=function(_u,$u,Tu){Tu==null&&(Tu=null);try{return re$5(Me.getV(_u,$u))}catch{return Tu}},Me.hextooidstr=function(_u){var $u=function(Vu,ku){return Vu.length>=ku?Vu:new Array(ku-Vu.length+1).join("0")+Vu},Tu=[],Cu=_u.substr(0,2),Pu=parseInt(Cu,16);Tu[0]=new String(Math.floor(Pu/40)),Tu[1]=new String(Pu%40);for(var Bu=_u.substr(2),Lu=[],Ru=0;Ru<Bu.length/2;Ru++)Lu.push(parseInt(Bu.substr(2*Ru,2),16));var Ou=[],Du="";for(Ru=0;Ru<Lu.length;Ru++)128&Lu[Ru]?Du+=$u((127&Lu[Ru]).toString(2),7):(Du+=$u((127&Lu[Ru]).toString(2),7),Ou.push(new String(parseInt(Du,2))),Du="");var Fu=Tu.join(".");return Ou.length>0&&(Fu=Fu+"."+Ou.join(".")),Fu},Me.dump=function(_u,$u,Tu,Cu){var Pu=Me,Bu=Pu.getV,Lu=Pu.dump,Ru=Pu.getChildIdx,Ou=_u;_u instanceof l$a.asn1.ASN1Object&&(Ou=_u.getEncodedHex());var Du=function(Xc,_d){return Xc.length<=2*_d?Xc:Xc.substr(0,_d)+"..(total "+Xc.length/2+"bytes).."+Xc.substr(Xc.length-_d,_d)};$u===void 0&&($u={ommit_long_octet:32}),Tu===void 0&&(Tu=0),Cu===void 0&&(Cu="");var Fu,Vu=$u.ommit_long_octet;if((Fu=Ou.substr(Tu,2))=="01")return(ku=Bu(Ou,Tu))=="00"?Cu+`BOOLEAN FALSE
`:Cu+`BOOLEAN TRUE
`;if(Fu=="02")return Cu+"INTEGER "+Du(ku=Bu(Ou,Tu),Vu)+`
`;if(Fu=="03"){var ku=Bu(Ou,Tu);if(Pu.isASN1HEX(ku.substr(2))){var Nu=Cu+`BITSTRING, encapsulates
`;return Nu+=Lu(ku.substr(2),$u,0,Cu+"  ")}return Cu+"BITSTRING "+Du(ku,Vu)+`
`}if(Fu=="04")return ku=Bu(Ou,Tu),Pu.isASN1HEX(ku)?(Nu=Cu+`OCTETSTRING, encapsulates
`,Nu+=Lu(ku,$u,0,Cu+"  ")):Cu+"OCTETSTRING "+Du(ku,Vu)+`
`;if(Fu=="05")return Cu+`NULL
`;if(Fu=="06"){var Gu=Bu(Ou,Tu),ju=l$a.asn1.ASN1Util.oidHexToInt(Gu),Hu=l$a.asn1.x509.OID.oid2name(ju),Uu=ju.replace(/\./g," ");return Hu!=""?Cu+"ObjectIdentifier "+Hu+" ("+Uu+`)
`:Cu+"ObjectIdentifier ("+Uu+`)
`}if(Fu=="0a")return Cu+"ENUMERATED "+parseInt(Bu(Ou,Tu))+`
`;if(Fu=="0c")return Cu+"UTF8String '"+ne$5(Bu(Ou,Tu))+`'
`;if(Fu=="13")return Cu+"PrintableString '"+ne$5(Bu(Ou,Tu))+`'
`;if(Fu=="14")return Cu+"TeletexString '"+ne$5(Bu(Ou,Tu))+`'
`;if(Fu=="16")return Cu+"IA5String '"+ne$5(Bu(Ou,Tu))+`'
`;if(Fu=="17")return Cu+"UTCTime "+ne$5(Bu(Ou,Tu))+`
`;if(Fu=="18")return Cu+"GeneralizedTime "+ne$5(Bu(Ou,Tu))+`
`;if(Fu=="1a")return Cu+"VisualString '"+ne$5(Bu(Ou,Tu))+`'
`;if(Fu=="1e")return Cu+"BMPString '"+he$2(Bu(Ou,Tu))+`'
`;if(Fu=="30"){if(Ou.substr(Tu,4)=="3000")return Cu+`SEQUENCE {}
`;Nu=Cu+`SEQUENCE
`;var zu=$u;if(((Ku=Ru(Ou,Tu)).length==2||Ku.length==3)&&Ou.substr(Ku[0],2)=="06"&&Ou.substr(Ku[Ku.length-1],2)=="04"){Hu=Pu.oidname(Bu(Ou,Ku[0]));var Wu=JSON.parse(JSON.stringify($u));Wu.x509ExtName=Hu,zu=Wu}for(var Qu=0;Qu<Ku.length;Qu++)Nu+=Lu(Ou,zu,Ku[Qu],Cu+"  ");return Nu}if(Fu=="31"){Nu=Cu+`SET
`;var Ku=Ru(Ou,Tu);for(Qu=0;Qu<Ku.length;Qu++)Nu+=Lu(Ou,$u,Ku[Qu],Cu+"  ");return Nu}if((128&(Fu=parseInt(Fu,16)))!=0){var Yu=31&Fu;if((32&Fu)!=0){for(Nu=Cu+"["+Yu+`]
`,Ku=Ru(Ou,Tu),Qu=0;Qu<Ku.length;Qu++)Nu+=Lu(Ou,$u,Ku[Qu],Cu+"  ");return Nu}if(ku=Bu(Ou,Tu),Me.isASN1HEX(ku)){var Nu=Cu+"["+Yu+`]
`;return Nu+=Lu(ku,$u,0,Cu+"  ")}return(ku.substr(0,8)=="68747470"||$u.x509ExtName==="subjectAltName"&&Yu==2)&&(ku=ne$5(ku)),Nu=Cu+"["+Yu+"] "+ku+`
`}return Cu+"UNKNOWN("+Fu+") "+Bu(Ou,Tu)+`
`},Me.isContextTag=function(_u,$u){var Tu,Cu;_u=_u.toLowerCase();try{Tu=parseInt(_u,16)}catch{return-1}if($u===void 0)return(192&Tu)==128;try{return $u.match(/^\[[0-9]+\]$/)!=null&&!((Cu=parseInt($u.substr(1,$u.length-1),10))>31)&&(192&Tu)==128&&(31&Tu)==Cu}catch{return!1}},Me.isASN1HEX=function(_u){var $u=Me;if(_u.length%2==1)return!1;var Tu=$u.getVblen(_u,0),Cu=_u.substr(0,2),Pu=$u.getL(_u,0);return _u.length-Cu.length-Pu.length==2*Tu},Me.checkStrictDER=function(_u,$u,Tu,Cu,Pu){var Bu=Me;if(Tu===void 0){if(typeof _u!="string")throw new Error("not hex string");if(_u=_u.toLowerCase(),!l$a.lang.String.isHex(_u))throw new Error("not hex string");Tu=_u.length,Pu=(Cu=_u.length/2)<128?1:Math.ceil(Cu.toString(16))+1}if(Bu.getL(_u,$u).length>2*Pu)throw new Error("L of TLV too long: idx="+$u);var Lu=Bu.getVblen(_u,$u);if(Lu>Cu)throw new Error("value of L too long than hex: idx="+$u);var Ru=Bu.getTLV(_u,$u),Ou=Ru.length-2-Bu.getL(_u,$u).length;if(Ou!==2*Lu)throw new Error("V string length and L's value not the same:"+Ou+"/"+2*Lu);if($u===0&&_u.length!=Ru.length)throw new Error("total length and TLV length unmatch:"+_u.length+"!="+Ru.length);var Du=_u.substr($u,2);if(Du==="02"){var Fu=Bu.getVidx(_u,$u);if(_u.substr(Fu,2)=="00"&&_u.charCodeAt(Fu+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Du,16)){for(var Vu=Bu.getVblen(_u,$u),ku=0,Nu=Bu.getChildIdx(_u,$u),Gu=0;Gu<Nu.length;Gu++)ku+=Bu.getTLV(_u,Nu[Gu]).length,Bu.checkStrictDER(_u,Nu[Gu],Tu,Cu,Pu);if(2*Vu!=ku)throw new Error("sum of children's TLV length and L unmatch: "+2*Vu+"!="+ku)}},Me.oidname=function(_u){var $u=l$a.asn1;l$a.lang.String.isHex(_u)&&(_u=$u.ASN1Util.oidHexToInt(_u));var Tu=$u.x509.OID.oid2name(_u);return Tu===""&&(Tu=_u),Tu},l$a.asn1!==void 0&&l$a.asn1||(l$a.asn1={}),l$a.asn1.x509!==void 0&&l$a.asn1.x509||(l$a.asn1.x509={}),l$a.asn1.x509.Certificate=function(_u){l$a.asn1.x509.Certificate.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERBitString,Cu=$u.DERSequence,Pu=$u.x509,Bu=Pu.TBSCertificate,Lu=Pu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Ru){this.params=Ru},this.sign=function(){var Ru=this.params,Ou=Ru.sigalg;Ru.sigalg.name!=null&&(Ou=Ru.sigalg.name);var Du=Ru.tbsobj.getEncodedHex(),Fu=new l$a.crypto.Signature({alg:Ou});Fu.init(Ru.cakey),Fu.updateHex(Du),Ru.sighex=Fu.sign()},this.getPEM=function(){return ae$6(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Ru=this.params;if(Ru.tbsobj!=null&&Ru.tbsobj!=null||(Ru.tbsobj=new Bu(Ru)),Ru.sighex==null&&Ru.cakey!=null&&this.sign(),Ru.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ou=[];return Ou.push(Ru.tbsobj),Ou.push(new Lu({name:Ru.sigalg})),Ou.push(new Tu({hex:"00"+Ru.sighex})),new Cu({array:Ou}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.Certificate,l$a.asn1.ASN1Object),l$a.asn1.x509.TBSCertificate=function(_u){l$a.asn1.x509.TBSCertificate.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.x509,Cu=$u.DERTaggedObject,Pu=$u.DERInteger,Bu=$u.DERSequence,Lu=Tu.AlgorithmIdentifier,Ru=Tu.Time,Ou=Tu.X500Name,Du=Tu.Extensions,Fu=Tu.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Vu){this.params=Vu},this.getEncodedHex=function(){var Vu=[],ku=this.params;if(ku.version!=null||ku.version!=1){var Nu=2;ku.version!=null&&(Nu=ku.version-1);var Gu=new Cu({obj:new Pu({int:Nu})});Vu.push(Gu)}return Vu.push(new Pu(ku.serial)),Vu.push(new Lu({name:ku.sigalg})),Vu.push(new Ou(ku.issuer)),Vu.push(new Bu({array:[new Ru(ku.notbefore),new Ru(ku.notafter)]})),Vu.push(new Ou(ku.subject)),Vu.push(new Fu(Ee.getKey(ku.sbjpubkey))),ku.ext!==void 0&&ku.ext.length>0&&Vu.push(new Cu({tag:"a3",obj:new Du(ku.ext)})),new l$a.asn1.DERSequence({array:Vu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.TBSCertificate,l$a.asn1.ASN1Object),l$a.asn1.x509.Extensions=function(_u){l$a.asn1.x509.Extensions.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERSequence,Cu=$u.x509;this.aParam=[],this.setByParam=function(Pu){this.aParam=Pu},this.getEncodedHex=function(){for(var Pu=[],Bu=0;Bu<this.aParam.length;Bu++){var Lu=this.aParam[Bu],Ru=Lu.extname,Ou=null;if(Lu.extn!=null)Ou=new Cu.PrivateExtension(Lu);else if(Ru=="subjectKeyIdentifier")Ou=new Cu.SubjectKeyIdentifier(Lu);else if(Ru=="keyUsage")Ou=new Cu.KeyUsage(Lu);else if(Ru=="subjectAltName")Ou=new Cu.SubjectAltName(Lu);else if(Ru=="issuerAltName")Ou=new Cu.IssuerAltName(Lu);else if(Ru=="basicConstraints")Ou=new Cu.BasicConstraints(Lu);else if(Ru=="cRLDistributionPoints")Ou=new Cu.CRLDistributionPoints(Lu);else if(Ru=="certificatePolicies")Ou=new Cu.CertificatePolicies(Lu);else if(Ru=="authorityKeyIdentifier")Ou=new Cu.AuthorityKeyIdentifier(Lu);else if(Ru=="extKeyUsage")Ou=new Cu.ExtKeyUsage(Lu);else if(Ru=="authorityInfoAccess")Ou=new Cu.AuthorityInfoAccess(Lu);else if(Ru=="cRLNumber")Ou=new Cu.CRLNumber(Lu);else if(Ru=="cRLReason")Ou=new Cu.CRLReason(Lu);else if(Ru=="ocspNonce")Ou=new Cu.OCSPNonce(Lu);else if(Ru=="ocspNoCheck")Ou=new Cu.OCSPNoCheck(Lu);else if(Ru=="adobeTimeStamp")Ou=new Cu.AdobeTimeStamp(Lu);else{if(Ru!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Lu));Ou=new Cu.SubjectDirectoryAttributes(Lu)}Ou!=null&&Pu.push(Ou)}return new Tu({array:Pu}).getEncodedHex()},_u!=null&&this.setByParam(_u)},fe$2(l$a.asn1.x509.Extensions,l$a.asn1.ASN1Object),l$a.asn1.x509.Extension=function(_u){l$a.asn1.x509.Extension.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERObjectIdentifier,Cu=$u.DEROctetString;$u.DERBitString;var Pu=$u.DERBoolean,Bu=$u.DERSequence;this.getEncodedHex=function(){var Lu=new Tu({oid:this.oid}),Ru=new Cu({hex:this.getExtnValueHex()}),Ou=new Array;return Ou.push(Lu),this.critical&&Ou.push(new Pu),Ou.push(Ru),new Bu({array:Ou}).getEncodedHex()},this.critical=!1,_u!==void 0&&_u.critical!==void 0&&(this.critical=_u.critical)},fe$2(l$a.asn1.x509.Extension,l$a.asn1.ASN1Object),l$a.asn1.x509.KeyUsage=function(_u){l$a.asn1.x509.KeyUsage.superclass.constructor.call(this,_u);var $u=Be$1.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",_u!==void 0&&(_u.bin!==void 0&&(this.asn1ExtnValue=new l$a.asn1.DERBitString(_u)),_u.names!==void 0&&_u.names.length!==void 0)){for(var Tu=_u.names,Cu="000000000",Pu=0;Pu<Tu.length;Pu++)for(var Bu=0;Bu<$u.length;Bu++)Tu[Pu]===$u[Bu]&&(Cu=Cu.substring(0,Bu)+"1"+Cu.substring(Bu+1,Cu.length));this.asn1ExtnValue=new l$a.asn1.DERBitString({bin:Cu})}},fe$2(l$a.asn1.x509.KeyUsage,l$a.asn1.x509.Extension),l$a.asn1.x509.BasicConstraints=function(_u){l$a.asn1.x509.BasicConstraints.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.DERBoolean,Cu=$u.DERInteger,Pu=$u.DERSequence;this.getExtnValueHex=function(){var Bu=new Array;this.cA&&Bu.push(new Tu),this.pathLen>-1&&Bu.push(new Cu({int:this.pathLen}));var Lu=new Pu({array:Bu});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,_u!==void 0&&(_u.cA!==void 0&&(this.cA=_u.cA),_u.pathLen!==void 0&&(this.pathLen=_u.pathLen))},fe$2(l$a.asn1.x509.BasicConstraints,l$a.asn1.x509.Extension),l$a.asn1.x509.CRLDistributionPoints=function(_u){l$a.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Cu){for(var Pu=[],Bu=0;Bu<Cu.length;Bu++)if(Cu[Bu]instanceof l$a.asn1.ASN1Object)Pu.push(Cu[Bu]);else{var Lu=new Tu.DistributionPoint(Cu[Bu]);Pu.push(Lu)}this.asn1ExtnValue=new $u.DERSequence({array:Pu})},this.setByOneURI=function(Cu){var Pu=new Tu.DistributionPoint({fulluri:Cu});this.setByDPArray([Pu])},this.oid="2.5.29.31",_u!==void 0&&(_u.array!==void 0?this.setByDPArray(_u.array):_u.uri!==void 0&&this.setByOneURI(_u.uri))},fe$2(l$a.asn1.x509.CRLDistributionPoints,l$a.asn1.x509.Extension),l$a.asn1.x509.DistributionPoint=function(_u){l$a.asn1.x509.DistributionPoint.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.x509.DistributionPointName;this.getEncodedHex=function(){var Cu=new $u.DERSequence;if(this.asn1DP!=null){var Pu=new $u.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Cu.appendASN1Object(Pu)}return this.hTLV=Cu.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.dpobj!==void 0?this.asn1DP=_u.dpobj:_u.dpname!==void 0?this.asn1DP=new Tu(_u.dpname):_u.fulluri!==void 0&&(this.asn1DP=new Tu({full:[{uri:_u.fulluri}]})))},fe$2(l$a.asn1.x509.DistributionPoint,l$a.asn1.ASN1Object),l$a.asn1.x509.DistributionPointName=function(_u){l$a.asn1.x509.DistributionPointName.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Tu({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},_u!==void 0)if($u.x509.GeneralNames.prototype.isPrototypeOf(_u))this.type="full",this.tag="a0",this.asn1V=_u;else{if(_u.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new $u.x509.GeneralNames(_u.full)}},fe$2(l$a.asn1.x509.DistributionPointName,l$a.asn1.ASN1Object),l$a.asn1.x509.CertificatePolicies=function(_u){l$a.asn1.x509.CertificatePolicies.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.x509,Cu=$u.DERSequence,Pu=Tu.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Bu=[],Lu=0;Lu<this.params.array.length;Lu++)Bu.push(new Pu(this.params.array[Lu]));var Ru=new Cu({array:Bu});return this.asn1ExtnValue=Ru,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.CertificatePolicies,l$a.asn1.x509.Extension),l$a.asn1.x509.PolicyInformation=function(_u){l$a.asn1.x509.PolicyInformation.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.DERSequence,Cu=$u.DERObjectIdentifier,Pu=$u.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Bu=[new Cu(this.params.policyoid)];if(this.params.array!==void 0){for(var Lu=[],Ru=0;Ru<this.params.array.length;Ru++)Lu.push(new Pu(this.params.array[Ru]));Lu.length>0&&Bu.push(new Tu({array:Lu}))}return new Tu({array:Bu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.PolicyInformation,l$a.asn1.ASN1Object),l$a.asn1.x509.PolicyQualifierInfo=function(_u){l$a.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.DERSequence,Cu=$u.DERIA5String,Pu=$u.DERObjectIdentifier,Bu=$u.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Tu({array:[new Pu({oid:"1.3.6.1.5.5.7.2.1"}),new Cu({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Tu({array:[new Pu({oid:"1.3.6.1.5.5.7.2.2"}),new Bu(this.params.unotice)]}).getEncodedHex():void 0},_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.PolicyQualifierInfo,l$a.asn1.ASN1Object),l$a.asn1.x509.UserNotice=function(_u){l$a.asn1.x509.UserNotice.superclass.constructor.call(this,_u);var $u=l$a.asn1.DERSequence;l$a.asn1.DERInteger;var Tu=l$a.asn1.x509.DisplayText,Cu=l$a.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Pu=[];return this.params.noticeref!==void 0&&Pu.push(new Cu(this.params.noticeref)),this.params.exptext!==void 0&&Pu.push(new Tu(this.params.exptext)),new $u({array:Pu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.UserNotice,l$a.asn1.ASN1Object),l$a.asn1.x509.NoticeReference=function(_u){l$a.asn1.x509.NoticeReference.superclass.constructor.call(this,_u);var $u=l$a.asn1.DERSequence,Tu=l$a.asn1.DERInteger,Cu=l$a.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Pu=[];if(this.params.org!==void 0&&Pu.push(new Cu(this.params.org)),this.params.noticenum!==void 0){for(var Bu=[],Lu=this.params.noticenum,Ru=0;Ru<Lu.length;Ru++)Bu.push(new Tu(Lu[Ru]));Pu.push(new $u({array:Bu}))}if(Pu.length==0)throw new Error("parameter is empty");return new $u({array:Pu}).getEncodedHex()},_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.NoticeReference,l$a.asn1.ASN1Object),l$a.asn1.x509.DisplayText=function(_u){l$a.asn1.x509.DisplayText.superclass.constructor.call(this,_u),this.hT="0c",_u!==void 0&&(_u.type==="ia5"?this.hT="16":_u.type==="vis"?this.hT="1a":_u.type==="bmp"&&(this.hT="1e"))},fe$2(l$a.asn1.x509.DisplayText,l$a.asn1.DERAbstractString),l$a.asn1.x509.ExtKeyUsage=function(_u){l$a.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,_u);var $u=l$a.asn1;this.setPurposeArray=function(Tu){this.asn1ExtnValue=new $u.DERSequence;for(var Cu=0;Cu<Tu.length;Cu++){var Pu=new $u.DERObjectIdentifier(Tu[Cu]);this.asn1ExtnValue.appendASN1Object(Pu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",_u!==void 0&&_u.array!==void 0&&this.setPurposeArray(_u.array)},fe$2(l$a.asn1.x509.ExtKeyUsage,l$a.asn1.x509.Extension),l$a.asn1.x509.AuthorityKeyIdentifier=function(_u){l$a.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$a,Tu=$u.asn1,Cu=Tu.DERTaggedObject,Pu=Tu.x509.GeneralNames;$u.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Bu=new Array;this.asn1KID&&Bu.push(new Cu({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Bu.push(new Cu({explicit:!1,tag:"a1",obj:new Pu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Bu.push(new Cu({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Lu=new Tu.DERSequence({array:Bu});return this.asn1ExtnValue=Lu,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Bu){if(Bu.str!==void 0||Bu.hex!==void 0)this.asn1KID=new l$a.asn1.DEROctetString(Bu);else if(typeof Bu=="object"&&l$a.crypto.Util.isKey(Bu)||typeof Bu=="string"&&Bu.indexOf("BEGIN ")!=-1){var Lu=Bu;typeof Bu=="string"&&(Lu=Ee.getKey(Bu));var Ru=Ee.getKeyID(Lu);this.asn1KID=new l$a.asn1.DEROctetString({hex:Ru})}},this.setCertIssuerByParam=function(Bu){Bu.str!==void 0||Bu.ldapstr!==void 0||Bu.hex!==void 0||Bu.certsubject!==void 0||Bu.certissuer!==void 0?this.asn1CertIssuer=new l$a.asn1.x509.X500Name(Bu):typeof Bu=="string"&&Bu.indexOf("BEGIN ")!=-1&&Bu.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$a.asn1.x509.X500Name({certissuer:Bu}))},this.setCertSNByParam=function(Bu){if(Bu.str!==void 0||Bu.bigint!==void 0||Bu.hex!==void 0)this.asn1CertSN=new l$a.asn1.DERInteger(Bu);else if(typeof Bu=="string"&&Bu.indexOf("BEGIN ")!=-1&&Bu.indexOf("CERTIFICATE")){var Lu=new Be$1;Lu.readCertPEM(Bu);var Ru=Lu.getSerialNumberHex();this.asn1CertSN=new l$a.asn1.DERInteger({hex:Ru})}},this.oid="2.5.29.35",_u!==void 0&&(_u.kid!==void 0&&this.setKIDByParam(_u.kid),_u.issuer!==void 0&&this.setCertIssuerByParam(_u.issuer),_u.sn!==void 0&&this.setCertSNByParam(_u.sn),_u.issuersn!==void 0&&typeof _u.issuersn=="string"&&_u.issuersn.indexOf("BEGIN ")!=-1&&_u.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(_u.issuersn),this.setCertIssuerByParam(_u.issuersn)))},fe$2(l$a.asn1.x509.AuthorityKeyIdentifier,l$a.asn1.x509.Extension),l$a.asn1.x509.SubjectKeyIdentifier=function(_u){l$a.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,_u);var $u=l$a.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Tu){if(Tu.str!==void 0||Tu.hex!==void 0)this.asn1KID=new $u(Tu);else if(typeof Tu=="object"&&l$a.crypto.Util.isKey(Tu)||typeof Tu=="string"&&Tu.indexOf("BEGIN")!=-1){var Cu=Tu;typeof Tu=="string"&&(Cu=Ee.getKey(Tu));var Pu=Ee.getKeyID(Cu);this.asn1KID=new l$a.asn1.DEROctetString({hex:Pu})}},this.oid="2.5.29.14",_u!==void 0&&_u.kid!==void 0&&this.setKIDByParam(_u.kid)},fe$2(l$a.asn1.x509.SubjectKeyIdentifier,l$a.asn1.x509.Extension),l$a.asn1.x509.AuthorityInfoAccess=function(_u){l$a.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,_u),this.setAccessDescriptionArray=function($u){for(var Tu=new Array,Cu=l$a.asn1,Pu=Cu.DERSequence,Bu=Cu.DERObjectIdentifier,Lu=Cu.x509.GeneralName,Ru=0;Ru<$u.length;Ru++){var Ou,Du=$u[Ru];if(Du.ocsp!==void 0)Ou=new Pu({array:[new Bu({oid:"1.3.6.1.5.5.7.48.1"}),new Lu({uri:Du.ocsp})]});else{if(Du.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Du));Ou=new Pu({array:[new Bu({oid:"1.3.6.1.5.5.7.48.2"}),new Lu({uri:Du.caissuer})]})}Tu.push(Ou)}this.asn1ExtnValue=new Pu({array:Tu})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",_u!==void 0&&_u.array!==void 0&&this.setAccessDescriptionArray(_u.array)},fe$2(l$a.asn1.x509.AuthorityInfoAccess,l$a.asn1.x509.Extension),l$a.asn1.x509.SubjectAltName=function(_u){l$a.asn1.x509.SubjectAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$a.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$2(l$a.asn1.x509.SubjectAltName,l$a.asn1.x509.Extension),l$a.asn1.x509.IssuerAltName=function(_u){l$a.asn1.x509.IssuerAltName.superclass.constructor.call(this,_u),this.setNameArray=function($u){this.asn1ExtnValue=new l$a.asn1.x509.GeneralNames($u)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",_u!==void 0&&_u.array!==void 0&&this.setNameArray(_u.array)},fe$2(l$a.asn1.x509.IssuerAltName,l$a.asn1.x509.Extension),l$a.asn1.x509.SubjectDirectoryAttributes=function(_u){l$a.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.DERSequence,Cu=$u.ASN1Util.newObject,Pu=$u.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Bu=[],Lu=0;Lu<this.params.array.length;Lu++){var Ru=this.params.array[Lu],Ou={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Ru.attr=="dateOfBirth")Ou.seq[0].oid=Pu(Ru.attr),Ou.seq[1].set[0]={gentime:Ru.str};else if(Ru.attr=="placeOfBirth")Ou.seq[0].oid=Pu(Ru.attr),Ou.seq[1].set[0]={utf8str:Ru.str};else if(Ru.attr=="gender")Ou.seq[0].oid=Pu(Ru.attr),Ou.seq[1].set[0]={prnstr:Ru.str};else if(Ru.attr=="countryOfCitizenship")Ou.seq[0].oid=Pu(Ru.attr),Ou.seq[1].set[0]={prnstr:Ru.str};else{if(Ru.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Ru.attr);Ou.seq[0].oid=Pu(Ru.attr),Ou.seq[1].set[0]={prnstr:Ru.str}}Bu.push(new Cu(Ou))}var Du=new Tu({array:Bu});return this.asn1ExtnValue=Du,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",_u!==void 0&&(this.params=_u)},fe$2(l$a.asn1.x509.SubjectDirectoryAttributes,l$a.asn1.x509.Extension),l$a.asn1.x509.PrivateExtension=function(_u){l$a.asn1.x509.PrivateExtension.superclass.constructor.call(this,_u);var $u=l$a,Tu=$u.lang.String.isHex,Cu=$u.asn1,Pu=Cu.x509.OID.name2oid,Bu=Cu.ASN1Util.newObject;this.params=null,this.setByParam=function(Lu){this.oid=Pu(Lu.extname),this.params=Lu},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Lu=this.params.extn;if(typeof Lu=="string"&&Tu(Lu))return Lu;if(typeof Lu=="object")try{return Bu(Lu).getEncodedHex()}catch{}throw new Error("unsupported extn value")},_u!=null&&this.setByParam(_u)},fe$2(l$a.asn1.x509.PrivateExtension,l$a.asn1.x509.Extension),l$a.asn1.x509.CRL=function(_u){l$a.asn1.x509.CRL.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERSequence,Cu=$u.DERBitString,Pu=$u.x509,Bu=Pu.AlgorithmIdentifier,Lu=Pu.TBSCertList;this.params=void 0,this.setByParam=function(Ru){this.params=Ru},this.sign=function(){var Ru=new Lu(this.params).getEncodedHex(),Ou=new l$a.crypto.Signature({alg:this.params.sigalg});Ou.init(this.params.cakey),Ou.updateHex(Ru);var Du=Ou.sign();this.params.sighex=Du},this.getPEM=function(){return ae$6(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Ru=this.params;if(Ru.tbsobj==null&&(Ru.tbsobj=new Lu(Ru)),Ru.sighex==null&&Ru.cakey!=null&&this.sign(),Ru.sighex==null)throw new Error("sighex or cakey parameter not defined");var Ou=[];return Ou.push(Ru.tbsobj),Ou.push(new Bu({name:Ru.sigalg})),Ou.push(new Cu({hex:"00"+Ru.sighex})),new Tu({array:Ou}).getEncodedHex()},_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.CRL,l$a.asn1.ASN1Object),l$a.asn1.x509.TBSCertList=function(_u){l$a.asn1.x509.TBSCertList.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERInteger,Cu=$u.DERSequence,Pu=$u.DERTaggedObject;$u.DERObjectIdentifier;var Bu=$u.x509,Lu=Bu.AlgorithmIdentifier,Ru=Bu.Time,Ou=Bu.Extensions,Du=Bu.X500Name;this.params=null,this.setByParam=function(Fu){this.params=Fu},this.getRevCertSequence=function(){for(var Fu=[],Vu=this.params.revcert,ku=0;ku<Vu.length;ku++){var Nu=[new Tu(Vu[ku].sn),new Ru(Vu[ku].date)];Vu[ku].ext!=null&&Nu.push(new Ou(Vu[ku].ext)),Fu.push(new Cu({array:Nu}))}return new Cu({array:Fu})},this.getEncodedHex=function(){var Fu=[],Vu=this.params;if(Vu.version!=null){var ku=Vu.version-1,Nu=new Tu({int:ku});Fu.push(Nu)}if(Fu.push(new Lu({name:Vu.sigalg})),Fu.push(new Du(Vu.issuer)),Fu.push(new Ru(Vu.thisupdate)),Vu.nextupdate!=null&&Fu.push(new Ru(Vu.nextupdate)),Vu.revcert!=null&&Fu.push(this.getRevCertSequence()),Vu.ext!=null){var Gu=new Ou(Vu.ext);Fu.push(new Pu({tag:"a0",explicit:!0,obj:Gu}))}return new Cu({array:Fu}).getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.TBSCertList,l$a.asn1.ASN1Object),l$a.asn1.x509.CRLEntry=function(_u){l$a.asn1.x509.CRLEntry.superclass.constructor.call(this);var $u=l$a.asn1;this.setCertSerial=function(Tu){this.sn=new $u.DERInteger(Tu)},this.setRevocationDate=function(Tu){this.time=new $u.x509.Time(Tu)},this.getEncodedHex=function(){var Tu=new $u.DERSequence({array:[this.sn,this.time]});return this.TLV=Tu.getEncodedHex(),this.TLV},_u!==void 0&&(_u.time!==void 0&&this.setRevocationDate(_u.time),_u.sn!==void 0&&this.setCertSerial(_u.sn))},fe$2(l$a.asn1.x509.CRLEntry,l$a.asn1.ASN1Object),l$a.asn1.x509.CRLNumber=function(_u){l$a.asn1.x509.CRLNumber.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$a.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.CRLNumber,l$a.asn1.x509.Extension),l$a.asn1.x509.CRLReason=function(_u){l$a.asn1.x509.CRLReason.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$a.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.CRLReason,l$a.asn1.x509.Extension),l$a.asn1.x509.OCSPNonce=function(_u){l$a.asn1.x509.OCSPNonce.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$a.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.OCSPNonce,l$a.asn1.x509.Extension),l$a.asn1.x509.OCSPNoCheck=function(_u){l$a.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,_u),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$a.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",_u!=null&&(this.params=_u)},fe$2(l$a.asn1.x509.OCSPNoCheck,l$a.asn1.x509.Extension),l$a.asn1.x509.AdobeTimeStamp=function(_u){l$a.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,_u);var $u=l$a.asn1,Tu=$u.DERInteger,Cu=$u.DERBoolean,Pu=$u.DERSequence,Bu=$u.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Lu=this.params,Ru=[new Tu(1)];return Ru.push(new Bu({uri:Lu.uri})),Lu.reqauth!=null&&Ru.push(new Cu(Lu.reqauth)),this.asn1ExtnValue=new Pu({array:Ru}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.AdobeTimeStamp,l$a.asn1.x509.Extension),l$a.asn1.x509.X500Name=function(_u){l$a.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$a.asn1,Tu=$u.x509,Cu=Tu.RDN;this.setByString=function(Pu,Bu){Bu!==void 0&&(this.sRule=Bu);var Lu=Pu.split("/");Lu.shift();for(var Ru=[],Ou=0;Ou<Lu.length;Ou++)if(Lu[Ou].match(/^[^=]+=.+$/))Ru.push(Lu[Ou]);else{var Du=Ru.length-1;Ru[Du]=Ru[Du]+"/"+Lu[Ou]}for(Ou=0;Ou<Ru.length;Ou++)this.asn1Array.push(new Cu({str:Ru[Ou],rule:this.sRule}))},this.setByLdapString=function(Pu,Bu){Bu!==void 0&&(this.sRule=Bu);var Lu=Tu.X500Name.ldapToCompat(Pu);this.setByString(Lu,Bu)},this.setByObject=function(Pu,Bu){for(var Lu in Bu!==void 0&&(this.sRule=Bu),Pu)if(Pu.hasOwnProperty(Lu)){var Ru=new Cu({str:Lu+"="+Pu[Lu],rule:this.sRule});this.asn1Array?this.asn1Array.push(Ru):this.asn1Array=[Ru]}},this.setByParam=function(Pu){var Bu;Pu.rule!==void 0&&(this.sRule=Pu.rule),Pu.array!==void 0?this.paramArray=Pu.array:Pu.str!==void 0?this.setByString(Pu.str):Pu.ldapstr!==void 0?this.setByLdapString(Pu.ldapstr):Pu.hex!==void 0?this.hTLV=Pu.hex:Pu.certissuer!==void 0?((Bu=new Be$1).readCertPEM(Pu.certissuer),this.hTLV=Bu.getIssuerHex()):Pu.certsubject!==void 0?((Bu=new Be$1).readCertPEM(Pu.certsubject),this.hTLV=Bu.getSubjectHex()):typeof Pu=="object"&&Pu.certsubject===void 0&&Pu.certissuer===void 0&&this.setByObject(Pu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Pu=0;Pu<this.paramArray.length;Pu++){var Bu={array:this.paramArray[Pu]};this.sRule!="utf8"&&(Bu.rule=this.sRule);var Lu=new Cu(Bu);this.asn1Array.push(Lu)}var Ru=new $u.DERSequence({array:this.asn1Array});return this.hTLV=Ru.getEncodedHex(),this.hTLV},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.X500Name,l$a.asn1.ASN1Object),l$a.asn1.x509.X500Name.compatToLDAP=function(_u){if(_u.substr(0,1)!=="/")throw"malformed input";var $u=(_u=_u.substr(1)).split("/");return $u.reverse(),($u=$u.map(function(Tu){return Tu.replace(/,/,"\\,")})).join(",")},l$a.asn1.x509.X500Name.onelineToLDAP=function(_u){return l$a.asn1.x509.X500Name.compatToLDAP(_u)},l$a.asn1.x509.X500Name.ldapToCompat=function(_u){for(var $u=_u.split(","),Tu=!1,Cu=[],Pu=0;$u.length>0;Pu++){var Bu=$u.shift();if(Tu===!0){var Lu=(Cu.pop()+","+Bu).replace(/\\,/g,",");Cu.push(Lu),Tu=!1}else Cu.push(Bu);Bu.substr(-1,1)==="\\"&&(Tu=!0)}return(Cu=Cu.map(function(Ru){return Ru.replace("/","\\/")})).reverse(),"/"+Cu.join("/")},l$a.asn1.x509.X500Name.ldapToOneline=function(_u){return l$a.asn1.x509.X500Name.ldapToCompat(_u)},l$a.asn1.x509.RDN=function(_u){l$a.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var $u=l$a.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Tu){Tu.rule!==void 0&&(this.sRule=Tu.rule),Tu.str!==void 0&&this.addByMultiValuedString(Tu.str),Tu.array!==void 0&&(this.paramArray=Tu.array)},this.addByString=function(Tu){this.asn1Array.push(new l$a.asn1.x509.AttributeTypeAndValue({str:Tu,rule:this.sRule}))},this.addByMultiValuedString=function(Tu){for(var Cu=l$a.asn1.x509.RDN.parseString(Tu),Pu=0;Pu<Cu.length;Pu++)this.addByString(Cu[Pu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Tu=0;Tu<this.paramArray.length;Tu++){var Cu=this.paramArray[Tu];Cu.rule!==void 0&&this.sRule!="utf8"&&(Cu.rule=this.sRule);var Pu=new $u(Cu);this.asn1Array.push(Pu)}var Bu=new l$a.asn1.DERSet({array:this.asn1Array});return this.TLV=Bu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.RDN,l$a.asn1.ASN1Object),l$a.asn1.x509.RDN.parseString=function(_u){for(var $u=_u.split(/\+/),Tu=!1,Cu=[],Pu=0;$u.length>0;Pu++){var Bu=$u.shift();if(Tu===!0){var Lu=(Cu.pop()+"+"+Bu).replace(/\\\+/g,"+");Cu.push(Lu),Tu=!1}else Cu.push(Bu);Bu.substr(-1,1)==="\\"&&(Tu=!0)}var Ru=!1,Ou=[];for(Pu=0;Cu.length>0;Pu++){if(Bu=Cu.shift(),Ru===!0){var Du=Ou.pop();Bu.match(/"$/)?(Lu=(Du+"+"+Bu).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Ou.push(Lu),Ru=!1):Ou.push(Du+"+"+Bu)}else Ou.push(Bu);Bu.match(/^[^=]+="/)&&(Ru=!0)}return Ou},l$a.asn1.x509.AttributeTypeAndValue=function(_u){l$a.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var $u=l$a,Tu=$u.asn1,Cu=Tu.DERSequence,Pu=Tu.DERUTF8String,Bu=Tu.DERPrintableString,Lu=Tu.DERTeletexString,Ru=Tu.DERIA5String,Ou=Tu.DERVisibleString,Du=Tu.DERBMPString,Fu=$u.lang.String.isMail,Vu=$u.lang.String.isPrintable;this.setByParam=function(ku){if(ku.rule!==void 0&&(this.sRule=ku.rule),ku.ds!==void 0&&(this.dsType=ku.ds),ku.value===void 0&&ku.str!==void 0){var Nu=ku.str.match(/^([^=]+)=(.+)$/);if(!Nu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Nu[1],this.sValue=Nu[2]}else this.sType=ku.type,this.sValue=ku.value},this.setByString=function(ku,Nu){Nu!==void 0&&(this.sRule=Nu);var Gu=ku.match(/^([^=]+)=(.+)$/);if(!Gu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Gu[1],Gu[2])},this._getDsType=function(){var ku=this.sType,Nu=this.sValue,Gu=this.sRule;return Gu==="prn"?ku=="CN"&&Fu(Nu)?"ia5":Vu(Nu)?"prn":"utf8":Gu==="utf8"?ku=="CN"&&Fu(Nu)?"ia5":ku=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(ku,Nu,Gu){Gu!==void 0&&(this.sRule=Gu),this.sType=ku,this.sValue=Nu},this.getValueObj=function(ku,Nu){if(ku=="utf8")return new Pu({str:Nu});if(ku=="prn")return new Bu({str:Nu});if(ku=="tel")return new Lu({str:Nu});if(ku=="ia5")return new Ru({str:Nu});if(ku=="vis")return new Ou({str:Nu});if(ku=="bmp")return new Du({str:Nu});throw new Error("unsupported directory string type: type="+ku+" value="+Nu)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var ku=l$a.asn1.x509.OID.atype2obj(this.sType),Nu=this.getValueObj(this.dsType,this.sValue),Gu=new Cu({array:[ku,Nu]});return this.TLV=Gu.getEncodedHex(),this.TLV},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.AttributeTypeAndValue,l$a.asn1.ASN1Object),l$a.asn1.x509.SubjectPublicKeyInfo=function(_u){l$a.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var $u=l$a,Tu=$u.asn1,Cu=Tu.DERInteger,Pu=Tu.DERBitString,Bu=Tu.DERObjectIdentifier,Lu=Tu.DERSequence,Ru=Tu.ASN1Util.newObject,Ou=Tu.x509.AlgorithmIdentifier,Du=$u.crypto;Du.ECDSA,Du.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Lu({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Fu=this.getASN1Object();return this.hTLV=Fu.getEncodedHex(),this.hTLV},this.setPubKey=function(Fu){try{if(Fu instanceof X$5){var Vu=Ru({seq:[{int:{bigint:Fu.n}},{int:{int:Fu.e}}]}).getEncodedHex();this.asn1AlgId=new Ou({name:"rsaEncryption"}),this.asn1SubjPKey=new Pu({hex:"00"+Vu})}}catch{}try{if(Fu instanceof l$a.crypto.ECDSA){var ku=new Bu({name:Fu.curveName});this.asn1AlgId=new Ou({name:"ecPublicKey",asn1params:ku}),this.asn1SubjPKey=new Pu({hex:"00"+Fu.pubKeyHex})}}catch{}try{if(Fu instanceof l$a.crypto.DSA){ku=new Ru({seq:[{int:{bigint:Fu.p}},{int:{bigint:Fu.q}},{int:{bigint:Fu.g}}]}),this.asn1AlgId=new Ou({name:"dsa",asn1params:ku});var Nu=new Cu({bigint:Fu.y});this.asn1SubjPKey=new Pu({hex:"00"+Nu.getEncodedHex()})}}catch{}},_u!==void 0&&this.setPubKey(_u)},fe$2(l$a.asn1.x509.SubjectPublicKeyInfo,l$a.asn1.ASN1Object),l$a.asn1.x509.Time=function(_u){l$a.asn1.x509.Time.superclass.constructor.call(this);var $u=l$a.asn1,Tu=$u.DERUTCTime,Cu=$u.DERGeneralizedTime;this.setTimeParams=function(Pu){this.timeParams=Pu},this.getEncodedHex=function(){var Pu=null;return Pu=this.timeParams!=null?this.type=="utc"?new Tu(this.timeParams):new Cu(this.timeParams):this.type=="utc"?new Tu:new Cu,this.TLV=Pu.getEncodedHex(),this.TLV},this.type="utc",_u!==void 0&&(_u.type!==void 0?this.type=_u.type:_u.str!==void 0&&(_u.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),_u.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=_u)},fe$2(l$a.asn1.x509.Time,l$a.asn1.ASN1Object),l$a.asn1.x509.AlgorithmIdentifier=function(_u){l$a.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var $u=l$a.asn1,Tu=$u.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Pu=null;for(var Bu in Tu)Bu===this.nameAlg&&(Pu=Tu[Bu]);if(Pu!==null)return this.hTLV=Pu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=$u.x509.OID.name2obj(this.nameAlg));var Lu=[this.asn1Alg];this.asn1Params!==null&&Lu.push(this.asn1Params);var Ru=new $u.DERSequence({array:Lu});return this.hTLV=Ru.getEncodedHex(),this.hTLV},_u!==void 0&&(_u.name!==void 0&&(this.nameAlg=_u.name),_u.asn1params!==void 0&&(this.asn1Params=_u.asn1params),_u.paramempty!==void 0&&(this.paramEmpty=_u.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Cu=this.nameAlg.toLowerCase();Cu.substr(-7,7)!=="withdsa"&&Cu.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new $u.DERNull)}},fe$2(l$a.asn1.x509.AlgorithmIdentifier,l$a.asn1.ASN1Object),l$a.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$a.asn1.x509.GeneralName=function(_u){l$a.asn1.x509.GeneralName.superclass.constructor.call(this);var $u={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Tu=l$a.asn1;Tu.DERSequence;var Cu=Tu.DEROctetString,Pu=Tu.DERIA5String,Bu=Tu.DERTaggedObject,Lu=Tu.ASN1Object,Ru=Tu.x509.X500Name,Ou=le$3;this.explicit=!1,this.setByParam=function(Du){var Fu=null;if(Du!==void 0){if(Du.rfc822!==void 0&&(this.type="rfc822",Fu=new Pu({str:Du[this.type]})),Du.dns!==void 0&&(this.type="dns",Fu=new Pu({str:Du[this.type]})),Du.uri!==void 0&&(this.type="uri",Fu=new Pu({str:Du[this.type]})),Du.dn!==void 0&&(this.type="dn",this.explicit=!0,Fu=typeof Du.dn=="string"?new Ru({str:Du.dn}):Du.dn instanceof l$a.asn1.x509.X500Name?Du.dn:new Ru(Du.dn)),Du.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Fu=new Ru({ldapstr:Du.ldapdn})),Du.certissuer!==void 0){this.type="dn",this.explicit=!0;var Vu=null;if((Nu=Du.certissuer).match(/^[0-9A-Fa-f]+$/),Nu.indexOf("-----BEGIN ")!=-1&&(Vu=Ou(Nu)),Vu==null)throw"certissuer param not cert";(Gu=new Be$1).hex=Vu;var ku=Gu.getIssuerHex();(Fu=new Lu).hTLV=ku}if(Du.certsubj!==void 0){this.type="dn",this.explicit=!0;var Nu,Gu;if(Vu=null,(Nu=Du.certsubj).match(/^[0-9A-Fa-f]+$/),Nu.indexOf("-----BEGIN ")!=-1&&(Vu=Ou(Nu)),Vu==null)throw"certsubj param not cert";(Gu=new Be$1).hex=Vu,ku=Gu.getSubjectHex(),(Fu=new Lu).hTLV=ku}if(Du.ip!==void 0){this.type="ip",this.explicit=!1;var ju,Hu=Du.ip,Uu="malformed IP address";if(Hu.match(/^[0-9.]+[.][0-9.]+$/)){if((ju=function(zu){zu=(zu=(zu=zu.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return zu.split(/,/).map(function(Wu,Qu,Ku){var Yu=parseInt(Wu);if(Yu<0||255<Yu)throw"integer not in range 0-255";return("00"+Yu.toString(16)).slice(-2)}).join("")}catch(Wu){throw"malformed integer array string: "+Wu}}("["+Hu.split(".").join(",")+"]")).length!==8)throw Uu}else if(Hu.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))ju=function(zu){var Wu="malformed IPv6 address";if(!zu.match(/^[0-9A-Fa-f:]+$/))throw Wu;var Qu=(zu=zu.toLowerCase()).split(":").length-1;if(Qu<2)throw Wu;var Ku=":".repeat(7-Qu+2),Yu=(zu=zu.replace("::",Ku)).split(":");if(Yu.length!=8)throw Wu;for(var Xc=0;Xc<8;Xc++)Yu[Xc]=("0000"+Yu[Xc]).slice(-4);return Yu.join("")}(Hu);else{if(!Hu.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Uu;ju=Hu}Fu=new Cu({hex:ju})}if(this.type==null)throw"unsupported type in params="+Du;this.asn1Obj=new Bu({explicit:this.explicit,tag:$u[this.type],obj:Fu})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},_u!==void 0&&this.setByParam(_u)},fe$2(l$a.asn1.x509.GeneralName,l$a.asn1.ASN1Object),l$a.asn1.x509.GeneralNames=function(_u){l$a.asn1.x509.GeneralNames.superclass.constructor.call(this);var $u=l$a.asn1;this.setByParamArray=function(Tu){for(var Cu=0;Cu<Tu.length;Cu++){var Pu=new $u.x509.GeneralName(Tu[Cu]);this.asn1Array.push(Pu)}},this.getEncodedHex=function(){return new $u.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,_u!==void 0&&this.setByParamArray(_u)},fe$2(l$a.asn1.x509.GeneralNames,l$a.asn1.ASN1Object),l$a.asn1.x509.OID=new function(_u){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];if(this.name2oidList[$u]===void 0)throw"Name of ObjectIdentifier not defined: "+$u;var Tu=this.name2oidList[$u],Cu=new l$a.asn1.DERObjectIdentifier({oid:Tu});return this.objCache[$u]=Cu,Cu},this.atype2obj=function($u){if(this.objCache[$u]!==void 0)return this.objCache[$u];var Tu;if($u.match(/^\d+\.\d+\.[0-9.]+$/))Tu=$u;else if(this.atype2oidList[$u]!==void 0)Tu=this.atype2oidList[$u];else{if(this.name2oidList[$u]===void 0)throw"AttributeType name undefined: "+$u;Tu=this.name2oidList[$u]}var Cu=new l$a.asn1.DERObjectIdentifier({oid:Tu});return this.objCache[$u]=Cu,Cu}},l$a.asn1.x509.OID.oid2name=function(_u){var $u=l$a.asn1.x509.OID.name2oidList;for(var Tu in $u)if($u[Tu]==_u)return Tu;return""},l$a.asn1.x509.OID.oid2atype=function(_u){var $u=l$a.asn1.x509.OID.atype2oidList;for(var Tu in $u)if($u[Tu]==_u)return Tu;return _u},l$a.asn1.x509.OID.name2oid=function(_u){if(_u.match(/^[0-9.]+$/))return _u;var $u=l$a.asn1.x509.OID.name2oidList;return $u[_u]===void 0?"":$u[_u]},l$a.asn1.x509.X509Util={},l$a.asn1.x509.X509Util.newCertPEM=function(_u){var $u=l$a.asn1.x509;return $u.TBSCertificate,new $u.Certificate(_u).getPEM()},X$5.getPosArrayOfChildrenFromHex=function(_u){return Me.getChildIdx(_u,0)},X$5.getHexValueArrayOfChildrenFromHex=function(_u){var $u,Tu=Me.getV,Cu=Tu(_u,($u=X$5.getPosArrayOfChildrenFromHex(_u))[0]),Pu=Tu(_u,$u[1]),Bu=Tu(_u,$u[2]),Lu=Tu(_u,$u[3]),Ru=Tu(_u,$u[4]),Ou=Tu(_u,$u[5]),Du=Tu(_u,$u[6]),Fu=Tu(_u,$u[7]),Vu=Tu(_u,$u[8]);return($u=new Array).push(Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu),$u},X$5.prototype.readPrivateKeyFromPEMString=function(_u){var $u=le$3(_u),Tu=X$5.getHexValueArrayOfChildrenFromHex($u);this.setPrivateEx(Tu[1],Tu[2],Tu[3],Tu[4],Tu[5],Tu[6],Tu[7],Tu[8])},X$5.prototype.readPKCS5PrvKeyHex=function(_u){var $u=X$5.getHexValueArrayOfChildrenFromHex(_u);this.setPrivateEx($u[1],$u[2],$u[3],$u[4],$u[5],$u[6],$u[7],$u[8])},X$5.prototype.readPKCS8PrvKeyHex=function(_u){var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du=Me,Fu=Du.getVbyListEx;if(Du.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");try{$u=Fu(_u,0,[2,0,1],"02"),Tu=Fu(_u,0,[2,0,2],"02"),Cu=Fu(_u,0,[2,0,3],"02"),Pu=Fu(_u,0,[2,0,4],"02"),Bu=Fu(_u,0,[2,0,5],"02"),Lu=Fu(_u,0,[2,0,6],"02"),Ru=Fu(_u,0,[2,0,7],"02"),Ou=Fu(_u,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou)},X$5.prototype.readPKCS5PubKeyHex=function(_u){var $u=Me,Tu=$u.getV;if($u.isASN1HEX(_u)===!1)throw new Error("keyHex is not ASN.1 hex string");var Cu=$u.getChildIdx(_u,0);if(Cu.length!==2||_u.substr(Cu[0],2)!=="02"||_u.substr(Cu[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Pu=Tu(_u,Cu[0]),Bu=Tu(_u,Cu[1]);this.setPublic(Pu,Bu)},X$5.prototype.readPKCS8PubKeyHex=function(_u){var $u=Me;if($u.isASN1HEX(_u)===!1)throw new Error("not ASN.1 hex string");if($u.getTLVbyListEx(_u,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Tu=$u.getTLVbyListEx(_u,0,[1,0]);this.readPKCS5PubKeyHex(Tu)},X$5.prototype.readCertPubKeyHex=function(_u,$u){var Tu,Cu;(Tu=new Be$1).readCertHex(_u),Cu=Tu.getPublicKeyHex(),this.readPKCS8PubKeyHex(Cu)},X$5.prototype.sign=function(_u,$u){var Tu,Cu=(Tu=_u,l$a.crypto.Util.hashString(Tu,$u));return this.signWithMessageHash(Cu,$u)},X$5.prototype.signWithMessageHash=function(_u,$u){var Tu=G$6(l$a.crypto.Util.getPaddedDigestInfoHex(_u,$u,this.n.bitLength()),16);return Ie(this.doPrivate(Tu).toString(16),this.n.bitLength())},X$5.prototype.signPSS=function(_u,$u,Tu){var Cu,Pu=(Cu=oe$3(_u),l$a.crypto.Util.hashHex(Cu,$u));return Tu===void 0&&(Tu=-1),this.signWithMessageHashPSS(Pu,$u,Tu)},X$5.prototype.signWithMessageHashPSS=function(_u,$u,Tu){var Cu,Pu=re$5(_u),Bu=Pu.length,Lu=this.n.bitLength()-1,Ru=Math.ceil(Lu/8),Ou=function(Hu){return l$a.crypto.Util.hashHex(Hu,$u)};if(Tu===-1||Tu===void 0)Tu=Bu;else if(Tu===-2)Tu=Ru-Bu-2;else if(Tu<-2)throw new Error("invalid salt length");if(Ru<Bu+Tu+2)throw new Error("data too long");var Du="";Tu>0&&(Du=new Array(Tu),new j$6().nextBytes(Du),Du=String.fromCharCode.apply(String,Du));var Fu=re$5(Ou(oe$3("\0\0\0\0\0\0\0\0"+Pu+Du))),Vu=[];for(Cu=0;Cu<Ru-Tu-Bu-2;Cu+=1)Vu[Cu]=0;var ku=String.fromCharCode.apply(String,Vu)+""+Du,Nu=Se(Fu,ku.length,Ou),Gu=[];for(Cu=0;Cu<ku.length;Cu+=1)Gu[Cu]=ku.charCodeAt(Cu)^Nu.charCodeAt(Cu);var ju=65280>>8*Ru-Lu&255;for(Gu[0]&=~ju,Cu=0;Cu<Bu;Cu++)Gu.push(Fu.charCodeAt(Cu));return Gu.push(188),Ie(this.doPrivate(new c$d(Gu)).toString(16),this.n.bitLength())},X$5.prototype.verify=function(_u,$u){if(($u=$u.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Tu=G$6($u,16),Cu=this.n.bitLength();if(Tu.bitLength()>Cu)return!1;var Pu=this.doPublic(Tu).toString(16);if(Pu.length+3!=Cu/4)return!1;var Bu=Ce$1(Pu.replace(/^1f+00/,""));if(Bu.length==0)return!1;var Lu,Ru=Bu[0];return Bu[1]==(Lu=_u,l$a.crypto.Util.hashString(Lu,Ru))},X$5.prototype.verifyWithMessageHash=function(_u,$u){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Tu=G$6($u,16);if(Tu.bitLength()>this.n.bitLength())return 0;var Cu=Ce$1(this.doPublic(Tu).toString(16).replace(/^1f+00/,""));return Cu.length!=0&&(Cu[0],Cu[1]==_u)},X$5.prototype.verifyPSS=function(_u,$u,Tu,Cu){var Pu=function(Bu){return l$a.crypto.Util.hashHex(Bu,Tu)}(oe$3(_u));return Cu===void 0&&(Cu=-1),this.verifyWithMessageHashPSS(Pu,$u,Tu,Cu)},X$5.prototype.verifyWithMessageHashPSS=function(_u,$u,Tu,Cu){if($u.length!=Math.ceil(this.n.bitLength()/4))return!1;var Pu,Bu=new c$d($u,16),Lu=function(zu){return l$a.crypto.Util.hashHex(zu,Tu)},Ru=re$5(_u),Ou=Ru.length,Du=this.n.bitLength()-1,Fu=Math.ceil(Du/8);if(Cu===-1||Cu===void 0)Cu=Ou;else if(Cu===-2)Cu=Fu-Ou-2;else if(Cu<-2)throw new Error("invalid salt length");if(Fu<Ou+Cu+2)throw new Error("data too long");var Vu=this.doPublic(Bu).toByteArray();for(Pu=0;Pu<Vu.length;Pu+=1)Vu[Pu]&=255;for(;Vu.length<Fu;)Vu.unshift(0);if(Vu[Fu-1]!==188)throw new Error("encoded message does not end in 0xbc");var ku=(Vu=String.fromCharCode.apply(String,Vu)).substr(0,Fu-Ou-1),Nu=Vu.substr(ku.length,Ou),Gu=65280>>8*Fu-Du&255;if((ku.charCodeAt(0)&Gu)!=0)throw new Error("bits beyond keysize not zero");var ju=Se(Nu,ku.length,Lu),Hu=[];for(Pu=0;Pu<ku.length;Pu+=1)Hu[Pu]=ku.charCodeAt(Pu)^ju.charCodeAt(Pu);Hu[0]&=~Gu;var Uu=Fu-Ou-Cu-2;for(Pu=0;Pu<Uu;Pu+=1)if(Hu[Pu]!==0)throw new Error("leftmost octets not zero");if(Hu[Uu]!==1)throw new Error("0x01 marker not found");return Nu===re$5(Lu(oe$3("\0\0\0\0\0\0\0\0"+Ru+String.fromCharCode.apply(String,Hu.slice(-Cu)))))},X$5.SALT_LEN_HLEN=-1,X$5.SALT_LEN_MAX=-2,X$5.SALT_LEN_RECOVER=-2,Be$1.hex2dn=function(_u,$u){$u===void 0&&($u=0);var Tu=new Be$1;return Me.getTLV(_u,$u),Tu.getX500Name(_u).str},Be$1.hex2rdn=function(_u,$u){if($u===void 0&&($u=0),_u.substr($u,2)!=="31")throw new Error("malformed RDN");for(var Tu=new Array,Cu=Me.getChildIdx(_u,$u),Pu=0;Pu<Cu.length;Pu++)Tu.push(Be$1.hex2attrTypeValue(_u,Cu[Pu]));return(Tu=Tu.map(function(Bu){return Bu.replace("+","\\+")})).join("+")},Be$1.hex2attrTypeValue=function(_u,$u){var Tu=Me,Cu=Tu.getV;if($u===void 0&&($u=0),_u.substr($u,2)!=="30")throw new Error("malformed attribute type and value");var Pu=Tu.getChildIdx(_u,$u);Pu.length!==2||_u.substr(Pu[0],2);var Bu=Cu(_u,Pu[0]),Lu=l$a.asn1.ASN1Util.oidHexToInt(Bu);return l$a.asn1.x509.OID.oid2atype(Lu)+"="+re$5(Cu(_u,Pu[1]))},Be$1.getPublicKeyFromCertHex=function(_u){var $u=new Be$1;return $u.readCertHex(_u),$u.getPublicKey()},Be$1.getPublicKeyFromCertPEM=function(_u){var $u=new Be$1;return $u.readCertPEM(_u),$u.getPublicKey()},Be$1.getPublicKeyInfoPropOfCertPEM=function(_u){var $u,Tu,Cu=Me.getVbyList,Pu={};return Pu.algparam=null,($u=new Be$1).readCertPEM(_u),Tu=$u.getPublicKeyHex(),Pu.keyhex=Cu(Tu,0,[1],"03").substr(2),Pu.algoid=Cu(Tu,0,[0,0],"06"),Pu.algoid==="2a8648ce3d0201"&&(Pu.algparam=Cu(Tu,0,[0,1],"06")),Pu},Be$1.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe,Re=[(Pe=new Be$1,Pe.readCertPEM(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe)];function ke$1(_u,$u){var Tu=_u.getIssuerHex();if(Tu===_u.getSubjectHex())return _u.verifySignature(_u.getPublicKey());var Cu=function(Pu,Bu){for(var Lu=0,Ru=Bu;Lu<Ru.length;Lu++){var Ou=Ru[Lu];if(Ou.getSubjectHex()===Pu)return Ou}}(Tu,$u);return!!Cu&&_u.verifySignature(Cu.getPublicKey())!==!1&&ke$1(Cu,$u)}function De(_u){return _u.getIssuerHex()!==_u.getSubjectHex()&&ke$1(_u,Re)}(function(_u){var $u=new Be$1;typeof _u=="string"?$u.readCertPEM(_u):$u.readCertHex(_u.hex),De($u),Re.push($u)})(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le,Oe$1=(Le="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le,">$"):Symbol(Le));function Ne$1(_u){return _u[Oe$1]||(_u[Oe$1]={}),_u[Oe$1]}var Fe=function(){function _u(){}return _u.prototype.hasListener=function($u){var Tu=Ne$1(this);return Tu&&Tu[$u]&&Tu[$u].length>0},_u.prototype.on=function($u,Tu,Cu){var Pu=this,Bu=Ne$1(this);return Bu[$u]||(Bu[$u]=[]),Bu[$u].push([Tu,Cu||!1]),function(){return Pu.off($u,Tu)}},_u.prototype.once=function($u,Tu){return this.on($u,Tu,!0)},_u.prototype.off=function($u,Tu){if($u!==void 0){var Cu,Pu=Ne$1(this);if(Pu[$u]||(Pu[$u]=[]),Tu!==void 0){for(var Bu=0;Bu<Pu[$u].length&&Pu[$u][Bu][0]!==Tu;Bu++);Bu<Pu[$u].length&&Pu[$u].splice(Bu,1)}else Pu[$u].length=0}else(Cu=this)[Oe$1]||delete Cu[Oe$1]},_u.prototype.emit=function($u){for(var Tu=[],Cu=1;Cu<arguments.length;Cu++)Tu[Cu-1]=arguments[Cu];for(var Pu=!1,Bu=Ne$1(this),Lu=Bu[$u]||[],Ru=0,Ou=Lu.slice();Ru<Ou.length;Ru++){var Du=Ou[Ru],Fu=Du[0],Vu=Du[1],ku=Vu!==void 0&&Vu,Nu=Fu.apply(void 0,Tu);ku&&this.off($u,Fu),Nu===!1&&(Pu=!0)}return Pu},_u}();function Qe(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u]}var Ve=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e$2=typeof performance!="undefined"?function(){return Ve+performance.now()}:function(){return Date.now()};function He(_u){Object.freeze(_u);var $u=typeof _u=="function",Tu=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(_u).forEach(function(Cu){!Tu.call(_u,Cu)||$u&&(Cu==="caller"||Cu==="callee"||Cu==="arguments")||_u[Cu]===null||typeof _u[Cu]!="object"&&typeof _u[Cu]!="function"||Object.isFrozen(_u[Cu])||He(_u[Cu])}),_u}var qe$1=/^([^.]+)(\.([^.]+))*$/;function ze$1(_u){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(_u)}function Ke(_u,$u){return qe$1.test(_u)&&qe$1.test($u)&&function(Tu,Cu){if(Tu==="*")return!0;var Pu=Tu.split(".").reverse(),Bu=Cu.split(".").reverse();if(Pu.length<=1)return Tu===Cu;for(var Lu=0;Lu<Pu.length;Lu++)if(Pu[Lu]!==Bu[Lu])return!1;return!0}(_u,$u)}var Ue$1=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je$1=He(JSON.parse(function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge$1=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request proxy error(type: ".concat(Cu,", reason: ").concat(Pu,"): ").concat(Tu))||this}return t$8.__extends($u,_u),$u}(Error),We=function(_u){function $u(Tu,Cu,Pu){var Bu=_u.call(this,"[NETWORK]: response error(type: ".concat(Cu,", status: ").concat(Pu,"): ").concat(Tu))||this;return Bu.httpStatus=Pu,Bu}return t$8.__extends($u,_u),$u}(Error);(function(_u){function $u(Tu,Cu){return _u.call(this,"[NETWORK]: request abort(type: ".concat(Cu,"): ").concat(Tu))||this}t$8.__extends($u,_u)})(Error);var Xe=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request timeout(type: ".concat(Cu,", timeout: ").concat(Pu,"ms): ").concat(Tu))||this}return t$8.__extends($u,_u),$u}(Error),Ye=function(_u){function $u(Tu,Cu,Pu){return _u.call(this,"[NETWORK]: request forbidden(type: ".concat(Cu,", reason: ").concat(Pu,"): ").concat(Tu))||this}return t$8.__extends($u,_u),$u}(Error);function Ze(_u){for(var $u=0,Tu=Ue$1;$u<Tu.length;$u++){var Cu=Tu[$u],Pu=_u.match(Cu);if(Pu)return"jsonp_"+Pu[1]}return null}function Je(_u){return Ze(_u)!==null}function $e$1(_u){return Ue$1.reduce(function($u,Tu){return $u.replace(Tu,"")},_u)}function et$1(_u){if(/^blob\:/i.test(_u))return"blob:";if(/^data\:/i.test(_u))return"data:";var $u=_u.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return $u?$u[2]:location.hostname}var tt$1=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$8.__extends($u,_u),$u}(Fe);function it$1(_u,$u,Tu,Cu,Pu){$u===void 0&&($u={}),Tu===void 0&&(Tu=Qe),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe);var Bu=_e$2(),Lu=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Ru){return/^https\:/.test(location.href)&&/^http\:/.test(Ru)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Ru,"'. This request was automatically upgraded to HTTPS")),Ru.replace(/^http\:/,"https:")):Ru}).catch(function(Ru){var Ou,Du=Ze(_u)?"Script":"XMLHttpRequest",Fu=new Ge$1(Lu,Du,Ru&&Ru.message?String(Ru.message):String(Ru));return(Ou=$u.networkSubscribe)===null||Ou===void 0||Ou.emit("network",_u,Du,"proxy-error",Fu.message),Promise.reject(Fu)}).then(function(Ru){return new Promise(function(Ou,Du){var Fu,Vu=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),ku=et$1(Ru),Nu=Ze(Ru);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(Xu){return Ke(Xu,location.hostname)}).length===0&&!ze$1(ku)&&Vu.filter(function(Xu){return Ke(Xu,ku)}).length===0){var Gu=Nu?"Script":"XMLHttpRequest",ju=new Ye(Ru,Gu,"request host(".concat(ku,") is not allowed"));return Cu(ju),Du(ju),void((Fu=$u.networkSubscribe)===null||Fu===void 0||Fu.emit("network",Ru,Gu,"forbidden",ju.message))}if(Nu){var Hu=window,Uu=null,zu=!1,Wu=document.createElement("script");Hu[Nu]=function(Xu){var Zu,_c,Ju=_e$2(),_h=Ju-Bu;if(delete Hu[Nu],Wu.parentNode&&Wu.parentNode.removeChild(Wu),Uu!==null&&(window.clearTimeout(Uu),Uu=null),zu!==!0){if(Xu.indexOf("data:")!==0){var ep=new We(Ru,"Script",500);return Cu(ep),Du(ep),void((Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Ru,"Script","error",ep.message))}var tp=Xu.split(","),rp=(tp[0].match(/:(.*?);/)||[])[1],dp=tp[1];if($u.responseType==="arraybuffer"||$u.responseType==="blob"){for(var cp=atob(tp[1]),Sp=cp.length,yp=new Uint8Array(Sp),Bp=0;Bp<Sp;Bp++)yp[Bp]=cp.charCodeAt(Bp);dp=$u.responseType==="arraybuffer"?yp.buffer:new Blob([yp],{type:rp})}var _p={body:dp,meta:{origin:Lu,source:Ru,requestTime:Bu,responseTime:Ju,costs:_h,headers:{}}};Tu(_p),Ou(_p),(_c=$u.networkSubscribe)===null||_c===void 0||_c.emit("network",Ru,"Script","ok",JSON.stringify(_p.meta)),zu=!0}},Wu.src=Ru,document.body.appendChild(Wu),typeof $u.timeout=="number"&&(Uu=window.setTimeout(function(){var Xu;if(Uu=null,zu!==!0){zu=!0;var Zu=new Xe(Ru,"Script",$u.timeout||NaN);Cu(Zu),Du(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ru,"Script","timeout",Zu.message)}},$u.timeout))}else{var Qu=!1,Ku=new XMLHttpRequest,Yu=function(){Ku&&(Ku.removeEventListener("timeout",Xc,!1),Ku.removeEventListener("progress",_d,!1),Ku.removeEventListener("load",_f,!1),Ku.removeEventListener("error",qu,!1)),Ku=null,Yu=Qe},Xc=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Zu=new Xe(Ru,"XMLHttpRequest",$u.timeout||NaN);Cu(Zu),Du(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ru,"XMLHttpRequest","timeout",Zu.message)}},_d=function(Xu){Qu!==!0&&Xu.lengthComputable&&(Xu.total<=0||Pu(Xu.loaded/Xu.total))},_f=function(Xu){var Zu;if(Qu!==!0){var _c=this.status;if(_c===0||_c>=200&&_c<400){Qu=!0,Yu();var Ju=_e$2(),_h=Ju-Bu,ep=function(dp){if(!dp)return{};for(var cp={},Sp=dp.trim().split(`
`),yp=0;yp<Sp.length;yp++){var Bp=Sp[yp],_p=Bp.indexOf(":"),Cp=Bp.slice(0,_p).trim().toLowerCase(),Ep=Bp.slice(_p+1).trim();Ep&&(cp[Cp]?cp[Cp]+=", "+Ep:cp[Cp]=Ep)}return cp}(this.getAllResponseHeaders()),tp=Xu.total,rp={body:this.response,meta:{origin:Lu,source:Ru,requestTime:Bu,responseTime:Ju,costs:_h,headers:ep,size:tp}};Tu(rp),Ou(rp),(Zu=$u.networkSubscribe)===null||Zu===void 0||Zu.emit("network",Ru,"XMLHttpRequest","ok",JSON.stringify(rp.meta))}else qu.call(this)}},qu=function(){var Xu;if(Qu!==!0){Qu=!0,Yu();var Zu=new We(Ru,"XMLHttpRequest",this.status);Cu(Zu),Du(Zu),(Xu=$u.networkSubscribe)===null||Xu===void 0||Xu.emit("network",Ru,"XMLHttpRequest","error",Zu.message)}};Ku.addEventListener("timeout",Xc,!1),Ku.addEventListener("progress",_d,!1),Ku.addEventListener("load",_f,!1),Ku.addEventListener("error",qu,!1),$u.responseType&&(Ku.responseType=$u.responseType),typeof $u.timeout=="number"&&(Ku.timeout=$u.timeout),Ku.open("GET",Ru,!0),Ku.send(null)}})})}var nt$1={};function rt$1(_u,$u,Tu,Cu,Pu,Bu){$u===void 0&&($u={}),Tu===void 0&&(Tu=Qe),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe);var Lu=_e$2(),Ru=_u;return Promise.resolve().then(function(){return $u.requestProxy?$u.requestProxy(_u):_u}).then(function(Ou){return/^https\:/.test(location.href)&&/^http\:/.test(Ou)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Ou,"'. This request was automatically upgraded to HTTPS")),Ou.replace(/^http\:/,"https:")):Ou}).catch(function(Ou){var Du,Fu=new Ge$1(Ru,"Image",Ou&&Ou.message?String(Ou.message):String(Ou));return(Du=$u.networkSubscribe)===null||Du===void 0||Du.emit("network",_u,"Image","proxy-error",Fu.message),Promise.reject(Fu)}).then(function(Ou){return new Promise(function(Du,Fu){var Vu,ku=$u.allowHosts?je$1.concat($u.allowHosts):je$1.slice(),Nu=et$1(Ou);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(zu){return Ke(zu,location.hostname)}).length===0&&!ze$1(Nu)&&ku.filter(function(zu){return Ke(zu,Nu)}).length===0){var Gu=new Ye(Ou,"Image","request host(".concat(Nu,") is not allowed"));return Cu(Gu),Fu(Gu),void((Vu=$u.networkSubscribe)===null||Vu===void 0||Vu.emit("network",Ou,"Image","forbidden",Gu.message))}var ju=Bu!=null?Bu:new Image,Hu=!1,Uu=null;typeof $u.timeout=="number"&&(Uu=window.setTimeout(function(){var zu;if(ju.onload=Qe,ju.onerror=Qe,Uu=null,Hu!==!0){Hu=!0;var Wu=new Xe(Ou,"Image",$u.timeout);Cu(Wu),Fu(Wu),(zu=$u.networkSubscribe)===null||zu===void 0||zu.emit("network",Ou,"Image","timeout",Wu.message)}},$u.timeout)),ju.onload=function(){var zu;if(ju.onload=Qe,ju.onerror=Qe,Uu!==null&&(clearTimeout(Uu),Uu=null),Hu!==!0){var Wu=_e$2();Hu=!0;var Qu={body:ju,meta:{headers:{},origin:Ru,source:Ou,requestTime:Lu,responseTime:Wu,costs:Wu-Lu}};Pu(1),Tu(Qu),Du(Qu),(zu=$u.networkSubscribe)===null||zu===void 0||zu.emit("network",Ou,"Image","ok",JSON.stringify(Qu.meta))}},ju.onerror=function(){var zu;if(ju.onload=Qe,ju.onerror=Qe,Uu!==null&&(clearTimeout(Uu),Uu=null),Hu!==!0){Hu=!0;var Wu=new We(Ou,"Image",0);Cu(Wu),Fu(Wu),(zu=$u.networkSubscribe)===null||zu===void 0||zu.emit("network",Ou,"Image","ok",Wu.message)}},Pu(0),ju.src=Ou})})}var ot$1=function(){if(typeof window!="undefined"){var _u=window;return _u.requestAnimationFrame||_u.mozRequestAnimationFrame||_u.webkitRequestAnimationFrame||_u.msRequestAnimationFrame||function($u){return setTimeout($u,16)}}return function($u){return setTimeout($u,16)}}(),st$1=16,at$1=function(){function _u(){this.frames=[],this.stoped=!1,this.time=_e$2(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(_u,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new _u),this.sharedInstance},enumerable:!1,configurable:!0}),_u.getFrameTime=function(){return st$1},_u.prototype.loop=function(){for(var $u=[],Tu=0;Tu<arguments.length;Tu++)$u[Tu]=arguments[Tu];if(!this.stoped){var Cu=_e$2(),Pu=Cu-this.time;this.time=Cu;var Bu=[];st$1=Pu;for(var Lu=0,Ru=this.frames;Lu<Ru.length;Lu++){var Ou=Ru[Lu];if(Ou.delay>0)Ou.delay=Ou.delay-1;else{try{Ou.callback.apply(Ou,t$8.__spreadArray([Cu,Pu],$u,!1))}catch(Du){console.error(Du)}Ou.once&&Bu.push(Ou)}}Bu.length>0&&(this.frames=this.frames.filter(function(Du){return Bu.indexOf(Du)===-1})),this.requestAnimationFrame(this.loop)}},_u.prototype.setContext=function($u){this.cancelAnimationFrame(this.requestId),this.context=$u,this.requestId=this.requestAnimationFrame(this.loop)},_u.prototype.getContext=function(){return this.context},_u.prototype.requestAnimationFrame=function($u){return this.context?this.context.requestAnimationFrame($u):ot$1($u)},_u.prototype.cancelAnimationFrame=function($u){this.context?this.context.cancelAnimationFrame($u):function(Tu){var Cu;if(typeof window!="undefined"){var Pu=window;Cu=Pu.cancelAnimationFrame||Pu.mozCancelAnimationFrame||Pu.webkitCancelAnimationFrame||Pu.msCancelAnimationFrame||function(Bu){return window.clearTimeout(Bu)}}else Cu=function(Bu){return window.clearTimeout(Bu)};Cu(Tu)}(this.loop),this.requestId=null},_u.prototype.remove=function($u){var Tu=this.frames.indexOf($u);Tu>=0&&this.frames.splice(Tu,1)},_u.prototype.add=function($u,Tu,Cu,Pu){var Bu=this;Tu===void 0&&(Tu=!1),Cu===void 0&&(Cu=0),Pu===void 0&&(Pu=5);var Lu={callback:$u,once:Tu,delay:Cu,order:Pu};return this.frames.push(Lu),this.frames.sort(function(Ru,Ou){return Ru.order-Ou.order}),function(){return Bu.remove(Lu)}},_u.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},_u}(),lt$1=/^https?\:\/\/?([^\/]+)/;function ut$1(_u,$u){return _u.replace(lt$1,function(Tu,Cu){return Tu.slice(0,Tu.length-Cu.length)+$u})}var ht$1={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct$1(_u,$u){var Tu=t$8.__assign(t$8.__assign({},ht$1),$u.mappings),Cu=function(Bu){var Lu=Bu.match(lt$1);return Lu===null?null:Lu[1]}(_u);if(Cu===null)return _u;var Pu=Tu[Cu];return Pu?(/\.basis(\?|$)/.test(_u)&&$u.basisLoaderInitialized!==!0&&(_u=_u.replace(/\.basis(\?|$)/,".jpg$1")),function(Bu,Lu){var Ru,Ou=Bu.split("?")[0],Du=Ou.split(".").pop();if(Du==="jpeg"&&(Du="jpg"),Du!=="png"&&Du!=="jpg")return Bu;var Fu="";if(Lu.format!==void 0&&Lu.format!==Du&&(Fu+="/format/".concat(Lu.format)),Lu.cut!==void 0&&(Fu+="/cut/".concat(Lu.cut[2],"x").concat(Lu.cut[3],"x").concat(Lu.cut[0],"x").concat(Lu.cut[1])),Lu.quality!==void 0){var Vu=(Ru=Lu.format)!==null&&Ru!==void 0?Ru:Du;Vu&&["jpg","webp","tpg","heif","avif"].indexOf(Vu)>=0&&(Fu+="/quality/".concat(Lu.quality))}if(Lu.size!==void 0){var ku=Bu.match(/\/cube_(\d+)\//);(ku?Number(ku[1]):NaN)!==Number(Lu.size)&&(Fu+="/thumbnail/".concat(Lu.size,"x"))}return Lu.sharpen!==void 0&&(Fu+="/sharpen/".concat(Lu.sharpen)),Fu.length&&(Fu="?imageMogr2"+Fu),Ou+Fu}(function(Bu,Lu,Ru){var Ou=Lu.split("."),Du=Ou[0],Fu=Ou.slice(1);if(Du==="texture")return ut$1(Bu,Ru.texture[0]);if(Du==="pano"||Du==="pano_luminance")switch(Fu[0],Fu[1]){case"front":case"left":case"up":return ut$1(Bu,Ru.pano[0]);case"down":case"right":case"back":return ut$1(Bu,Ru.pano[1])}else if(Du==="pano_tile"||Du==="pano_tile_luminance"){Fu[0],Fu[1];var Vu=Fu[2],ku=Fu[3],Nu=Fu[4],Gu=Math.pow(2,Number(Vu))*Number(ku)+Number(Nu);if(!isNaN(Gu))return ut$1(Bu,Ru.tile[Gu%2])}return ut$1(Bu,Ru.default[0])}(_u,$u.key,Pu),$u)):_u}function dt$1(_u){return new Promise(function($u){var Tu=new Image,Cu=setTimeout(function(){Tu.onload=Tu.onerror=function(){},clearTimeout(Cu),$u(!1)});Tu.onload=Tu.onerror=function(){Tu.onload=Tu.onerror=function(){},clearTimeout(Cu),$u(Tu.height===2)},Tu.src=_u})}var pt$1=null,ft$1=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.floorIndex=0,Tu.needsRender=!0,Tu}return t$8.__extends($u,_u),$u}(r$a.Mesh),At$1=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.needsRender=!0,Tu.enableTransparent=!0,Tu}return t$8.__extends($u,_u),$u.prototype.getTransparent=function(){return this.enableTransparent},$u.prototype.setTransparent=function(Tu){this.enableTransparent=Tu,this.traverse(function(Cu){Cu instanceof ft$1&&Cu.material.forEach(function(Pu){Pu.transparent=Tu})})},$u.prototype.getMaterial=function(){var Tu=null;return this.traverse(function(Cu){if(Tu===null&&Cu instanceof ft$1){var Pu=Cu.material[0];Tu={pano0:Pu.pano0,pano1:Pu.pano1,modelAlpha:Pu.modelAlpha,progress:Pu.progress,useBlackTransition:Pu.useBlackTransition,useXRBlackTransition:Pu.useXRBlackTransition,perspToOrtho:Pu.perspToOrtho,opacity:Pu.opacity,floorInfo:Pu.floorInfo}}}),Tu},$u.prototype.setMaterial=function(Tu){this.traverse(function(Cu){Cu instanceof ft$1&&Cu.material.forEach(function(Pu){Tu.pano0!==void 0&&(Pu.pano0=Tu.pano0),Tu.pano1!==void 0&&(Pu.pano1=Tu.pano1),Tu.modelAlpha!==void 0&&(Pu.modelAlpha=Tu.modelAlpha),Tu.progress!==void 0&&(Pu.progress=Tu.progress),Tu.useBlackTransition!==void 0&&(Pu.useBlackTransition=Tu.useBlackTransition),Tu.useXRBlackTransition!==void 0&&(Pu.useXRBlackTransition=Tu.useXRBlackTransition),Tu.perspToOrtho!==void 0&&(Pu.perspToOrtho=Tu.perspToOrtho),Tu.opacity!==void 0&&(Pu.opacity=Tu.opacity),Tu.floorInfo!==void 0&&(Pu.floorInfo=Tu.floorInfo)})})},$u.prototype.disposeMaterial=function(){this.traverse(function(Tu){if(Tu instanceof ft$1){var Cu=[];Tu.material.forEach(function(Pu){var Bu=Pu.uniforms;Object.keys(Bu).map(function(Lu){if(/^pano\d\_/.test(Lu))Bu[Lu].value=null;else{var Ru=Bu[Lu].value;Ru&&typeof Ru.dispose=="function"&&Cu.indexOf(Ru)===-1&&(Bu[Lu].value=null,Cu.push(Ru))}}),Pu.dispose()}),Cu.forEach(function(Pu){return Pu.dispose()})}})},$u.prototype.disposeGeometry=function(){this.traverse(function(Tu){Tu instanceof ft$1&&Tu.geometry.dispose()})},$u}(r$a.Group),gt$1=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.floorIndex=0,Tu}return t$8.__extends($u,_u),$u}(At$1),mt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt$1=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt$1(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt$1=yt$1();bt$1.width=bt$1.height=8;var xt$1=new r$a.Texture(bt$1);xt$1.name="EMPTY_TEXTURE";var wt$1=new r$a.CubeTexture([bt$1,bt$1,bt$1,bt$1,bt$1,bt$1]);wt$1.name="EMPTY_CUBE_TEXTURE",xt$1.dispose=wt$1.dispose=function(){};var Et$1=Object.assign({modelAlpha:new r$a.Uniform(0),progress:new r$a.Uniform(0),pano0_map:new r$a.Uniform(wt$1),pano0_luminanceMap:new r$a.Uniform(null),pano0_matrix:new r$a.Uniform(new r$a.Matrix4),pano1_map:new r$a.Uniform(wt$1),pano1_luminanceMap:new r$a.Uniform(null),pano1_matrix:new r$a.Uniform(new r$a.Matrix4),modelCenter:new r$a.Uniform(new r$a.Vector3),perspToOrtho:new r$a.Uniform(0),floorInfo:new r$a.Vector3(0,0,0)},{exposure:new r$a.Uniform(1),emissive:new r$a.Uniform(new r$a.Color(0)),emissiveMap:new r$a.Uniform(null),specular:new r$a.Uniform(new r$a.Color(1118481)),specularMap:new r$a.Uniform(null),normalMap:new r$a.Uniform(null),bumpMap:new r$a.Uniform(null),shininess:new r$a.Uniform(30)},r$a.UniformsUtils.clone(r$a.UniformsLib.common),r$a.UniformsUtils.clone(r$a.UniformsLib.lights)),Mt$1=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku=this;return ku=_u.call(this,{vertexShader:mt$1,fragmentShader:vt$1,uniforms:r$a.UniformsUtils.clone(Et$1),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$a.NoBlending,lights:!0})||this,Object.defineProperties(ku,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt$1?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Nu){Nu===null?(this.uniforms.pano0_map.value=wt$1,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Nu.map,this.uniforms.pano0_luminanceMap.value=Nu.luminanceMap,this.uniforms.pano0_matrix.value.copy(Nu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt$1?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Nu){Nu===null?(this.uniforms.pano1_map.value=wt$1,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Nu.map,this.uniforms.pano1_luminanceMap.value=Nu.luminanceMap,this.uniforms.pano1_matrix.value.copy(Nu.matrix));var Gu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Gu&&(this.defines.USE_LUMINANCE=Gu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Nu){this.uniforms.modelAlpha.value=Nu}},progress:{get:function(){return this.uniforms.progress.value},set:function(Nu){this.uniforms.progress.value=Nu}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Nu){this.defines.USE_BLACK_TRANSITION!==Nu&&(this.defines.USE_BLACK_TRANSITION=Nu,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(Nu){this.defines.USE_XR_BLACK_TRANSITION!==Nu&&(this.defines.USE_XR_BLACK_TRANSITION=Nu,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Nu){this.uniforms.opacity.value=Nu;var Gu=Nu<1?r$a.NormalBlending:r$a.NoBlending;Gu!==this.blending&&(this.blending=Gu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Nu){this.uniforms.perspToOrtho.value=Nu}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(Nu){Nu&&Nu.equals(new r$a.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),Nu&&!Nu.equals(new r$a.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=Nu,this.needsUpdate=!0)}}}),ku.pano0=(Cu=Tu.pano0)!==null&&Cu!==void 0?Cu:null,ku.pano1=(Pu=Tu.pano1)!==null&&Pu!==void 0?Pu:null,ku.modelAlpha=(Bu=Tu.modelAlpha)!==null&&Bu!==void 0?Bu:1,ku.progress=(Lu=Tu.progress)!==null&&Lu!==void 0?Lu:0,ku.useBlackTransition=(Ru=Tu.useBlackTransition)!==null&&Ru!==void 0&&Ru,ku.useXRBlackTransition=(Ou=Tu.useXRBlackTransition)!==null&&Ou!==void 0&&Ou,ku.perspToOrtho=(Du=Tu.perspToOrtho)!==null&&Du!==void 0?Du:0,ku.opacity=(Fu=Tu.opacity)!==null&&Fu!==void 0?Fu:1,ku.originOpacity=1,ku.floorInfo=(Vu=Tu.floorInfo)!==null&&Vu!==void 0?Vu:null,ku}return t$8.__extends($u,_u),$u}(r$a.ShaderMaterial),It=function(_u){function $u(Tu){var Cu=Tu.preserveDrawingBuffer,Pu=Cu===void 0||Cu,Bu=Tu.backgroundColor,Lu=Bu===void 0?1579548:Bu,Ru=Tu.backgroundAlpha,Ou=Ru===void 0?1:Ru,Du=Tu.pixelRatio,Fu=Du===void 0?1:Du,Vu=Tu.antialias,ku=Vu!==void 0&&Vu,Nu=Tu.webgl2,Gu=this;if(Nu!==void 0&&Nu){var ju=document.createElement("canvas"),Hu=ju.getContext("webgl2");if(Hu===null)throw new Error("error occurred when getting webgl2 canvas context");Gu=_u.call(this,{antialias:ku,preserveDrawingBuffer:Pu,alpha:Ou<1,canvas:ju,context:Hu})||this}else Gu=_u.call(this,{antialias:ku,preserveDrawingBuffer:Pu,alpha:Ou<1})||this;return Gu.setPixelRatio(Fu),Gu.setClearColor(Lu,Ou),Gu.outputEncoding=r$a.sRGBEncoding,Gu.autoClear=!0,Gu}return t$8.__extends($u,_u),$u}(r$a.WebGLRenderer),St$1=function(_u){function $u(){return _u!==null&&_u.apply(this,arguments)||this}return t$8.__extends($u,_u),$u.prototype.add=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.prototype.add.apply(this,Tu)},$u.prototype.remove=function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.prototype.remove.apply(this,Tu)},$u}(r$a.Scene),Ct$1=2*Math.PI,Bt$1=Math.PI/2;function Tt$1(_u){return _u>0&&_u<=Ct$1?_u:(_u%Ct$1+Ct$1)%Ct$1}var Pt$1,Rt$1,kt$1,Dt$1,Lt$1=function(_u){function $u(Tu){var Cu=_u.call(this,Tu,1,.1,1e3)||this;return Cu.pose={longitude:0,latitude:0,fov:Tu,distance:0,offset:new r$a.Vector3},Cu.computePose(),Cu}return t$8.__extends($u,_u),$u.prototype.computePose=function(){var Tu=this.getWorldDirection(new r$a.Vector3);return this.pose.longitude=Tt$1(-Math.atan2(Tu.x,-Tu.z)),this.pose.latitude=-Math.asin(Tu.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},$u.prototype.setFromPose=function(Tu){var Cu,Pu,Bu,Lu,Ru,Ou=Tt$1((Cu=Tu.longitude)!==null&&Cu!==void 0?Cu:this.pose.longitude),Du=Math.max(1e-4-Bt$1,Math.min(Bt$1-1e-4,(Pu=Tu.latitude)!==null&&Pu!==void 0?Pu:this.pose.latitude)),Fu=(Bu=Tu.fov)!==null&&Bu!==void 0?Bu:this.pose.fov,Vu=(Lu=Tu.distance)!==null&&Lu!==void 0?Lu:this.pose.distance,ku=(Ru=Tu.offset)!==null&&Ru!==void 0?Ru:this.pose.offset,Nu=function(Gu){var ju=Math.abs(Math.cos(Gu.latitude));return new r$a.Vector3(-Math.sin(Gu.longitude)*ju,-Math.sin(Gu.latitude),-Math.cos(Gu.longitude)*ju)}({longitude:Ou,latitude:Du}).normalize();return this.position.set(0,0,0),this.lookAt(Nu),this.position.add(ku).sub(Nu.clone().setLength(Vu)),this.fov!==Fu&&(this.fov=Fu,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Ou,this.pose.latitude=Du,this.pose.fov=Fu,this.pose.distance=Vu,this.pose.offset.copy(ku),this},$u.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},$u}(r$a.PerspectiveCamera),Ot$1=function(){function _u($u,Tu,Cu){this.x=$u,this.y=Tu,this.z=Cu}return _u.prototype.copy=function($u){return this.x=$u.x,this.y=$u.y,this.z=$u.z,this},_u.prototype.set=function($u,Tu,Cu){return this.x=$u,this.y=Tu,this.z=Cu,this},_u.prototype.fromArray=function($u,Tu){return Tu===void 0&&(Tu=0),this.x=$u[Tu],this.y=$u[Tu+1],this.z=$u[Tu+2],this},_u.prototype.add=function($u){return this.x+=$u.x,this.y+=$u.y,this.z+=$u.z,this},_u.prototype.multiplyScalar=function($u){return this.x*=$u,this.y*=$u,this.z*=$u,this},_u.prototype.subVectors=function($u,Tu){return this.x=$u.x-Tu.x,this.y=$u.y-Tu.y,this.z=$u.z-Tu.z,this},_u.prototype.dot=function($u){return this.x*$u.x+this.y*$u.y+this.z*$u.z},_u.prototype.cross=function($u){var Tu=this.x,Cu=this.y,Pu=this.z;return this.x=Cu*$u.z-Pu*$u.y,this.y=Pu*$u.x-Tu*$u.z,this.z=Tu*$u.y-Cu*$u.x,this},_u.prototype.crossVectors=function($u,Tu){var Cu=$u.x,Pu=$u.y,Bu=$u.z,Lu=Tu.x,Ru=Tu.y,Ou=Tu.z;return this.x=Pu*Ou-Bu*Ru,this.y=Bu*Lu-Cu*Ou,this.z=Cu*Ru-Pu*Lu,this},_u.prototype.clone=function(){return new _u(this.x,this.y,this.z)},_u}(),Nt$1=function(_u,$u,Tu){this.extents=_u,this.startIndex=$u,this.endIndex=Tu},Ft$1=function(_u,$u){this.triangle=_u,this.intersectionPoint=$u},Qt$1=(Pt$1=new Ot$1(0,0,0),Rt$1=new Ot$1(0,0,0),kt$1=new Ot$1(0,0,0),Dt$1=new Ot$1(0,0,0),function(_u,$u,Tu,Cu,Pu,Bu){Rt$1.subVectors($u,_u),kt$1.subVectors(Tu,_u),Dt$1.crossVectors(Rt$1,kt$1);var Lu,Ru=Pu.dot(Dt$1);if(Ru>0){if(Bu)return null;Lu=1}else{if(!(Ru<0))return null;Lu=-1,Ru=-Ru}Pt$1.subVectors(Cu,_u);var Ou=Lu*Pu.dot(kt$1.crossVectors(Pt$1,kt$1));if(Ou<0)return null;var Du=Lu*Pu.dot(Rt$1.cross(Pt$1));if(Du<0||Ou+Du>Ru)return null;var Fu=-Lu*Pt$1.dot(Dt$1);if(Fu<0)return null;var Vu=Fu/Ru;return new Ot$1(0,0,0).copy(Pu).multiplyScalar(Vu).add(Cu)}),Vt$1=function(_u,$u){this.min=_u,this.max=$u};function _t$1(_u,$u,Tu){var Cu=new Vt$1(0,0);$u.x>=0?(Cu.min=(Tu.extents[0]-_u.x)*$u.x,Cu.max=(Tu.extents[3]-_u.x)*$u.x):(Cu.min=(Tu.extents[3]-_u.x)*$u.x,Cu.max=(Tu.extents[0]-_u.x)*$u.x);var Pu=new Vt$1(0,0);if($u.y>=0?(Pu.min=(Tu.extents[1]-_u.y)*$u.y,Pu.max=(Tu.extents[4]-_u.y)*$u.y):(Pu.min=(Tu.extents[4]-_u.y)*$u.y,Pu.max=(Tu.extents[1]-_u.y)*$u.y),Cu.min>Pu.max||Pu.min>Cu.max)return!1;Pu.min>Cu.min&&(Cu.min=Pu.min),Pu.max<Cu.max&&(Cu.max=Pu.max);var Bu=new Vt$1(0,0);return $u.z>=0?(Bu.min=(Tu.extents[2]-_u.z)*$u.z,Bu.max=(Tu.extents[5]-_u.z)*$u.z):(Bu.min=(Tu.extents[5]-_u.z)*$u.z,Bu.max=(Tu.extents[2]-_u.z)*$u.z),!(Cu.min>Bu.max||Bu.min>Cu.max)&&(Bu.min>Cu.min&&(Cu.min=Bu.min),Bu.max<Cu.max&&(Cu.max=Bu.max),!(Cu.max<0))}function Ht$1(_u,$u,Tu,Cu,Pu){if(Tu>=Cu)return[0,0,0,0,0,0];for(var Bu=1/0,Lu=1/0,Ru=1/0,Ou=-1/0,Du=-1/0,Fu=-1/0,Vu=Tu,ku=void 0,Nu=void 0;Vu<Cu;Vu++)(Nu=$u[ku=6*_u[Vu]])<Bu&&(Bu=Nu),(Nu=$u[ku+1])<Lu&&(Lu=Nu),(Nu=$u[ku+2])<Ru&&(Ru=Nu),(Nu=$u[ku+3])>Ou&&(Ou=Nu),(Nu=$u[ku+4])>Du&&(Du=Nu),(Nu=$u[ku+5])>Fu&&(Fu=Nu);return[Bu-Pu,Lu-Pu,Ru-Pu,Ou+Pu,Du+Pu,Fu+Pu]}var qt$1=function(){function _u(){}return _u.prototype.create=function($u){return this.trianglesArray=$u,this},_u.prototype.splitNode=function($u){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Tu=this.trianglesArray,Cu=Tu.length/9,Pu=new Uint32Array(Cu),Bu=new Float32Array(6*Cu),Lu=[],Ru=1/0,Ou=1/0,Du=1/0,Fu=-1/0,Vu=-1/0,ku=-1/0,Nu=0,Gu=0,ju=0,Hu=void 0,Uu=void 0,zu=void 0,Wu=void 0,Qu=void 0,Ku=void 0,Yu=void 0;Nu<Cu;Nu++,Gu+=6,ju+=9)Pu[Nu]=Nu,Hu=Wu=Tu[ju],(Yu=Tu[ju+3])<Hu&&(Hu=Yu),Yu>Wu&&(Wu=Yu),(Yu=Tu[ju+6])<Hu&&(Hu=Yu),Yu>Wu&&(Wu=Yu),Uu=Qu=Tu[ju+1],(Yu=Tu[ju+4])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),(Yu=Tu[ju+7])<Uu&&(Uu=Yu),Yu>Qu&&(Qu=Yu),zu=Ku=Tu[ju+2],(Yu=Tu[ju+5])<zu&&(zu=Yu),Yu>Ku&&(Ku=Yu),(Yu=Tu[ju+8])<zu&&(zu=Yu),Yu>Ku&&(Ku=Yu),Hu<Ru&&(Ru=Hu),Wu>Fu&&(Fu=Wu),Uu<Ou&&(Ou=Uu),Qu>Vu&&(Vu=Qu),zu<Du&&(Du=zu),Ku>ku&&(ku=Ku),Bu[Gu]=Hu,Bu[Gu+1]=Uu,Bu[Gu+2]=zu,Bu[Gu+3]=Wu,Bu[Gu+4]=Qu,Bu[Gu+5]=Ku;var Xc,_d=new Nt$1([Ru,Ou,Du,Fu,Vu,ku],0,Cu);function _f(qu){for(var Xu=qu.startIndex,Zu=qu.endIndex,_c=qu.extents,Ju=[_c[3]-_c[0],_c[4]-_c[1],_c[5]-_c[2]],_h=[0,1,2].sort(function(Cp,Ep){return Ju[Ep]-Ju[Cp]}),ep=0;ep<3;ep++){for(var tp=_h[ep],rp=_c[tp]+_c[tp+3],dp=Xu,cp=Zu-1,Sp=-1,yp=void 0;dp<=cp;)Sp===-1?(yp=Pu[dp],Bu[6*yp+tp]+Bu[6*yp+tp+3]<rp?dp++:Sp=yp):(yp=Pu[cp],Bu[6*yp+tp]+Bu[6*yp+tp+3]>=rp||(Pu[dp]=yp,Pu[cp]=Sp,Sp=-1,dp++),cp--);if(dp>Xu&&dp<Zu){var Bp=new Nt$1(Ht$1(Pu,Bu,Xu,dp,1e-6),Xu,dp);Bp.endIndex-Bp.startIndex>$u&&Lu.push(Bp);var _p=new Nt$1(Ht$1(Pu,Bu,dp,Zu,1e-6),dp,Zu);_p.endIndex-_p.startIndex>$u&&Lu.push(_p),qu.node0=Bp,qu.node1=_p,qu.startIndex=0,qu.endIndex=0;break}}}for(Lu.push(_d);Xc=Lu.pop();)_f(Xc);return this.offsetArray=Pu,this.rootNode=_d,this},_u.prototype.intersectRay=function($u,Tu,Cu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Pu,Bu=this.trianglesArray,Lu=this.offsetArray,Ru=this.rootNode,Ou=[],Du=[],Fu=new Ot$1(1/Tu.x,1/Tu.y,1/Tu.z),Vu=[Ru];Pu=Vu.pop();)if(_t$1($u,Fu,Pu)){Pu.node0&&Vu.push(Pu.node0),Pu.node1&&Vu.push(Pu.node1);for(var ku=Pu.startIndex;ku<Pu.endIndex;ku++)Ou.push(Lu[ku])}for(var Nu=new Ot$1(0,0,0),Gu=new Ot$1(0,0,0),ju=new Ot$1(0,0,0),Hu=new Ot$1($u.x,$u.y,$u.z),Uu=new Ot$1(Tu.x,Tu.y,Tu.z),zu=(ku=0,void 0),Wu=Ou.length;ku<Wu;ku++){zu=9*Ou[ku],Nu.x=Bu[zu],Nu.y=Bu[zu+1],Nu.z=Bu[zu+2],Gu.x=Bu[zu+3],Gu.y=Bu[zu+3+1],Gu.z=Bu[zu+3+2],ju.x=Bu[zu+6],ju.y=Bu[zu+6+1],ju.z=Bu[zu+6+2];var Qu=Qt$1(Nu,Gu,ju,Hu,Uu,Cu);Qu&&Du.push(new Ft$1([Nu.clone(),Gu.clone(),ju.clone()],Qu))}return Du},_u.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},_u}(),zt$1=!1,Kt$1=[];function Ut$1(_u){if(_u===void 0&&(_u=!1),_u||!zt$1){zt$1=!0;var $u=Kt$1.shift();if($u){try{$u()}catch{}at$1.shared.add(function(){return Ut$1(!0)},!0,2)}else zt$1=!1}}function jt$1(_u){return new Promise(function($u,Tu){Kt$1.push(function(){try{$u(_u())}catch(Cu){Tu(Cu)}}),Ut$1()})}function Gt$1(){var _u={OutWindow:function(){this._windowSize=0}};return _u.OutWindow.prototype.create=function($u){this._buffer&&this._windowSize===$u||(this._buffer=[]),this._windowSize=$u,this._pos=0,this._streamPos=0},_u.OutWindow.prototype.flush=function(){var $u=this._pos-this._streamPos;if($u!==0){for(;$u--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},_u.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},_u.OutWindow.prototype.setStream=function($u){this.releaseStream(),this._stream=$u},_u.OutWindow.prototype.init=function($u){$u||(this._streamPos=0,this._pos=0)},_u.OutWindow.prototype.copyBlock=function($u,Tu){var Cu=this._pos-$u-1;for(Cu<0&&(Cu+=this._windowSize);Tu--;)Cu>=this._windowSize&&(Cu=0),this._buffer[this._pos++]=this._buffer[Cu++],this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.putByte=function($u){this._buffer[this._pos++]=$u,this._pos>=this._windowSize&&this.flush()},_u.OutWindow.prototype.getByte=function($u){var Tu=this._pos-$u-1;return Tu<0&&(Tu+=this._windowSize),this._buffer[Tu]},_u.RangeDecoder=function(){},_u.RangeDecoder.prototype.setStream=function($u){this._stream=$u},_u.RangeDecoder.prototype.releaseStream=function(){this._stream=null},_u.RangeDecoder.prototype.init=function(){var $u=5;for(this._code=0,this._range=-1;$u--;)this._code=this._code<<8|this._stream.readByte()},_u.RangeDecoder.prototype.decodeDirectBits=function($u){for(var Tu,Cu=0,Pu=$u;Pu--;)this._range>>>=1,Tu=this._code-this._range>>>31,this._code-=this._range&Tu-1,Cu=Cu<<1|1-Tu,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Cu},_u.RangeDecoder.prototype.decodeBit=function($u,Tu){var Cu=$u[Tu],Pu=(this._range>>>11)*Cu;return(2147483648^this._code)<(2147483648^Pu)?(this._range=Pu,$u[Tu]+=2048-Cu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Pu,this._code-=Pu,$u[Tu]-=Cu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},_u.initBitModels=function($u,Tu){for(;Tu--;)$u[Tu]=1024},_u.BitTreeDecoder=function($u){this._models=[],this._numBitLevels=$u},_u.BitTreeDecoder.prototype.init=function(){_u.initBitModels(this._models,1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.decode=function($u){for(var Tu=1,Cu=this._numBitLevels;Cu--;)Tu=Tu<<1|$u.decodeBit(this._models,Tu);return Tu-(1<<this._numBitLevels)},_u.BitTreeDecoder.prototype.reverseDecode=function($u){for(var Tu,Cu=1,Pu=0,Bu=0;Bu<this._numBitLevels;++Bu)Cu=Cu<<1|(Tu=$u.decodeBit(this._models,Cu)),Pu|=Tu<<Bu;return Pu},_u.reverseDecode2=function($u,Tu,Cu,Pu){for(var Bu,Lu=1,Ru=0,Ou=0;Ou<Pu;++Ou)Lu=Lu<<1|(Bu=Cu.decodeBit($u,Tu+Lu)),Ru|=Bu<<Ou;return Ru},_u.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new _u.BitTreeDecoder(8),this._numPosStates=0},_u.LenDecoder.prototype.create=function($u){for(;this._numPosStates<$u;++this._numPosStates)this._lowCoder[this._numPosStates]=new _u.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new _u.BitTreeDecoder(3)},_u.LenDecoder.prototype.init=function(){var $u=this._numPosStates;for(_u.initBitModels(this._choice,2);$u--;)this._lowCoder[$u].init(),this._midCoder[$u].init();this._highCoder.init()},_u.LenDecoder.prototype.decode=function($u,Tu){return $u.decodeBit(this._choice,0)===0?this._lowCoder[Tu].decode($u):$u.decodeBit(this._choice,1)===0?8+this._midCoder[Tu].decode($u):16+this._highCoder.decode($u)},_u.Decoder2=function(){this._decoders=[]},_u.Decoder2.prototype.init=function(){_u.initBitModels(this._decoders,768)},_u.Decoder2.prototype.decodeNormal=function($u){var Tu=1;do Tu=Tu<<1|$u.decodeBit(this._decoders,Tu);while(Tu<256);return 255&Tu},_u.Decoder2.prototype.decodeWithMatchByte=function($u,Tu){var Cu,Pu,Bu=1;do if(Cu=Tu>>7&1,Tu<<=1,Bu=Bu<<1|(Pu=$u.decodeBit(this._decoders,(1+Cu<<8)+Bu)),Cu!==Pu){for(;Bu<256;)Bu=Bu<<1|$u.decodeBit(this._decoders,Bu);break}while(Bu<256);return 255&Bu},_u.LiteralDecoder=function(){},_u.LiteralDecoder.prototype.create=function($u,Tu){var Cu;if(!this._coders||this._numPrevBits!==Tu||this._numPosBits!==$u)for(this._numPosBits=$u,this._posMask=(1<<$u)-1,this._numPrevBits=Tu,this._coders=[],Cu=1<<this._numPrevBits+this._numPosBits;Cu--;)this._coders[Cu]=new _u.Decoder2},_u.LiteralDecoder.prototype.init=function(){for(var $u=1<<this._numPrevBits+this._numPosBits;$u--;)this._coders[$u].init()},_u.LiteralDecoder.prototype.getDecoder=function($u,Tu){return this._coders[(($u&this._posMask)<<this._numPrevBits)+((255&Tu)>>>8-this._numPrevBits)]},_u.Decoder=function(){this._outWindow=new _u.OutWindow,this._rangeDecoder=new _u.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new _u.BitTreeDecoder(4),this._lenDecoder=new _u.LenDecoder,this._repLenDecoder=new _u.LenDecoder,this._literalDecoder=new _u.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new _u.BitTreeDecoder(6),this._posSlotDecoder[1]=new _u.BitTreeDecoder(6),this._posSlotDecoder[2]=new _u.BitTreeDecoder(6),this._posSlotDecoder[3]=new _u.BitTreeDecoder(6)},_u.Decoder.prototype.setDictionarySize=function($u){return!($u<0)&&(this._dictionarySize!==$u&&(this._dictionarySize=$u,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},_u.Decoder.prototype.setLcLpPb=function($u,Tu,Cu){var Pu=1<<Cu;return!($u>8||Tu>4||Cu>4)&&(this._literalDecoder.create(Tu,$u),this._lenDecoder.create(Pu),this._repLenDecoder.create(Pu),this._posStateMask=Pu-1,!0)},_u.Decoder.prototype.init=function(){var $u=4;for(this._outWindow.init(!1),_u.initBitModels(this._isMatchDecoders,192),_u.initBitModels(this._isRep0LongDecoders,192),_u.initBitModels(this._isRepDecoders,12),_u.initBitModels(this._isRepG0Decoders,12),_u.initBitModels(this._isRepG1Decoders,12),_u.initBitModels(this._isRepG2Decoders,12),_u.initBitModels(this._posDecoders,114),this._literalDecoder.init();$u--;)this._posSlotDecoder[$u].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},_u.Decoder.prototype.decode=function($u,Tu,Cu){var Pu,Bu,Lu,Ru,Ou,Du,Fu=0,Vu=0,ku=0,Nu=0,Gu=0,ju=0,Hu=0;for(this._rangeDecoder.setStream($u),this._outWindow.setStream(Tu),this.init();Cu<0||ju<Cu;)if(Pu=ju&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Fu<<4)+Pu)===0)Bu=this._literalDecoder.getDecoder(ju++,Hu),Hu=Fu>=7?Bu.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Vu)):Bu.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Hu),Fu=Fu<4?0:Fu-(Fu<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Fu)===1)Lu=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Fu)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Fu<<4)+Pu)===0&&(Fu=Fu<7?9:11,Lu=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Fu)===0?Ru=ku:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Fu)===0?Ru=Nu:(Ru=Gu,Gu=Nu),Nu=ku),ku=Vu,Vu=Ru),Lu===0&&(Lu=2+this._repLenDecoder.decode(this._rangeDecoder,Pu),Fu=Fu<7?8:11);else if(Gu=Nu,Nu=ku,ku=Vu,Lu=2+this._lenDecoder.decode(this._rangeDecoder,Pu),Fu=Fu<7?7:10,(Ou=this._posSlotDecoder[Lu<=5?Lu-2:3].decode(this._rangeDecoder))>=4){if(Vu=(2|1&Ou)<<(Du=(Ou>>1)-1),Ou<14)Vu+=_u.reverseDecode2(this._posDecoders,Vu-Ou-1,this._rangeDecoder,Du);else if(Vu+=this._rangeDecoder.decodeDirectBits(Du-4)<<4,(Vu+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Vu===-1)break;return!1}}else Vu=Ou;if(Vu>=ju||Vu>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Vu,Lu),ju+=Lu,Hu=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},_u.Decoder.prototype.setDecoderProperties=function($u){var Tu,Cu,Pu,Bu,Lu;return!($u.size<5)&&(Cu=(Tu=$u.readByte())%9,Pu=(Tu=~~(Tu/9))%5,Bu=~~(Tu/5),!!this.setLcLpPb(Cu,Pu,Bu)&&(Lu=$u.readByte(),Lu|=$u.readByte()<<8,Lu|=$u.readByte()<<16,Lu+=16777216*$u.readByte(),this.setDictionarySize(Lu)))},_u.decompress=function($u,Tu,Cu,Pu){var Bu=new _u.Decoder;if(!Bu.setDecoderProperties($u))throw"Incorrect stream properties";if(!Bu.decode(Tu,Cu,Pu))throw"Error in data stream";return!0},_u.decompressFile=function($u,Tu){var Cu,Pu=new _u.Decoder;if(!Pu.setDecoderProperties($u))throw"Incorrect stream properties";if(Cu=$u.readByte(),Cu|=$u.readByte()<<8,Cu|=$u.readByte()<<16,Cu+=16777216*$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),$u.readByte(),!Pu.decode($u,Tu,Cu))throw"Error in data stream";return!0},_u}var Wt$1=Gt$1(),Xt$1=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt$1.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Tu){try{var Cu={data:$u,offset:0,readByte:function(){return this.data[this.offset++]}},Pu=Cu.data.length,Bu={data:[],offset:0,writeByte:function(Ou){var Du=Math.floor(this.offset/Pu);this.data[Du]||(this.data[Du]=new Uint8Array(Pu)),this.data[Du][this.offset%Pu]=Ou,this.offset++}};_u.decompressFile(Cu,Bu);for(var Lu=new Uint8Array(Bu.offset),Ru=0;Ru<Bu.offset;Ru++)Lu[Ru]=Bu.data[Math.floor(Ru/Pu)][Ru%Pu];Tu(null,Lu)}catch(Ou){Tu(Ou)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(_u){for(var $u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tu=new Uint8Array(256),Cu=0;Cu<$u.length;Cu++)Tu[$u.charCodeAt(Cu)]=Cu;var Pu,Bu,Lu,Ru,Ou,Du=.75*_u.length,Fu=_u.length,Vu=0;_u[_u.length-1]==="="&&(Du--,_u[_u.length-2]==="="&&Du--);var ku=new ArrayBuffer(Du),Nu=new Uint8Array(ku);for(Pu=0;Pu<Fu;Pu+=4)Bu=Tu[_u.charCodeAt(Pu)],Lu=Tu[_u.charCodeAt(Pu+1)],Ru=Tu[_u.charCodeAt(Pu+2)],Ou=Tu[_u.charCodeAt(Pu+3)],Nu[Vu++]=Bu<<2|Lu>>4,Nu[Vu++]=(15&Lu)<<4|Ru>>2,Nu[Vu++]=(3&Ru)<<6|63&Ou;return ku}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(_u,$u,Tu){try{var Cu=new WebAssembly.Memory({initial:16}),Pu=new WebAssembly.Module(_u),Bu=new WebAssembly.Instance(Pu,{env:{memory:Cu,abort:function(){Tu(new Error("webAssembly abort"))}}}).exports,Lu=Bu.newU8Array($u.length);new Uint8Array(Cu.buffer,Lu+24,$u.length).set($u);var Ru=Bu.decode(Lu),Ou=new Uint32Array(Cu.buffer,Ru,4),Du=Ou[0],Fu=Ou[2],Vu=Ou[3];Du?Tu(null,new Uint8Array(Cu.buffer,Vu+24,Fu).slice(0,Fu)):Tu(new Error("lzma deocder error"))}catch(ku){Tu(ku)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt$1=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt$1="";if(Yt$1)try{var Jt$1=new Blob([Xt$1],{type:"text/javascript"});Zt$1=URL.createObjectURL(Jt$1)}catch(_u){}var $t$1=function(){function _u(){var $u=this;if(!Yt$1)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Tu=this.worker=new Worker(Zt$1);Tu.onmessage=function(Cu){var Pu=Cu.data,Bu=Pu.id,Lu=Pu.result,Ru=Pu.error,Ou=$u.getKey(Bu);$u.requests[Ou]&&(Ru?$u.requests[Ou](new Error(Ru)):$u.requests[Ou](null,Lu),delete $u.requests[Ou])},Tu.onerror=function(Cu){return console.error(Cu)}}return _u.prototype.getKey=function($u){return"key_"+String($u)},_u.prototype.decompress=function($u,Tu){var Cu=++this.callCounter;this.requests[this.getKey(Cu)]=Tu,this.worker.postMessage({type:"decompress",id:Cu,data:$u},[$u.buffer])},_u.prototype.terminate=function(){this.worker.terminate()},_u.support=Yt$1,_u}();function ei(_u){return Array.prototype.reduce.call(_u,function($u,Tu,Cu){return $u|Tu<<8*Cu},0)}function ti(_u){var $u=new Uint8Array(_u),Tu=ei($u.slice(0,4));if(Tu>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Cu=[],Pu=[],Bu=4+4*Tu,Lu=0;Lu<Tu;Lu++)Pu[Lu]=ei($u.slice(4+4*Lu,8+4*Lu)),Cu[Lu]=Lu===Tu-1?$u.subarray(Bu,Bu+Pu[Lu]):$u.slice(Bu,Bu+Pu[Lu]),Bu+=Pu[Lu];return $t$1.support?function(Ru){for(var Ou=[],Du=Ru.length,Fu=function(ku){Ou.push(new Promise(function(Nu,Gu){var ju=new $t$1;ju.decompress(Ru[ku],function(Hu,Uu){if(ju.terminate(),Hu)return Gu(Hu);Nu(Uu)})}))},Vu=0;Vu<Du;Vu++)Fu(Vu);return Promise.all(Ou)}(Cu):Promise.resolve(function(Ru){for(var Ou,Du=[],Fu=Ru.length,Vu=function(Nu){var Gu={data:Ru[Nu],offset:0,readByte:function(){return this.data[this.offset++]}},ju=Gu.data.length,Hu={data:[],offset:0,writeByte:function(zu){var Wu=Math.floor(this.offset/ju);this.data[Wu]||(this.data[Wu]=new Uint8Array(ju)),this.data[Wu][this.offset%ju]=zu,this.offset++}};Wt$1.decompressFile(Gu,Hu),Ou=new Uint8Array(Hu.offset);for(var Uu=0;Uu<Hu.offset;Uu++)Ou[Uu]=Hu.data[Math.floor(Uu/ju)][Uu%ju];Du.push(Ou)},ku=0;ku<Fu;ku++)Vu(ku);return Du}(Cu))}function ii(_u,$u){for(var Tu={},Cu=0,Pu=$u;Cu<Pu.length;Cu++){var Bu=Pu[Cu];Bu in _u&&(Tu[Bu]=_u[Bu])}return Tu}var ni=!1;try{ni=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(_u){}var ri=[];function oi(){var _u=this.src;this.onerror=this.onload=Qe,this.removeAttribute("src"),/^blob\:/.test(_u)&&URL.revokeObjectURL(_u),this.close=Qe}function si(){ri.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi})}function li(_u){return new Promise(function($u,Tu){var Cu=ai();Cu.onload=function(){Cu.onload=Cu.onerror=Qe,setTimeout(function(){return $u(Cu)},30)},Cu.onerror=function(){var Pu=Cu.src;Cu.onload=Cu.onerror=Qe,Cu.close(),Tu(new Error("image load error: ".concat(Pu)))},Cu.src=URL.createObjectURL(_u)})}function ui(_u,$u){if($u&&(_u.width>$u.width||_u.height>$u.height)){var Tu=function(Ou,Du){var Fu=ri.shift();if(Fu)return Fu.width=Ou,Fu.height=Du,Fu;if(ni){var Vu=new OffscreenCanvas(Ou,Du);return Object.assign(Vu,{close:si})}return Vu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Vu,{close:si})}(Math.min(_u.width,$u.width),Math.min(_u.height,$u.height)),Cu=Tu.getContext("2d");Cu.clearRect(0,0,Tu.width,Tu.height),Cu.drawImage(_u,0,0,Tu.width,Tu.height),_u.close();var Pu=new r$a.Texture(Tu);Pu.needsUpdate=!0,Pu.flipY=!0;var Bu=Pu.dispose;return Pu.dispose=function(){Tu.close(),Bu.call(Pu),delete Pu.dispose},Pu}var Lu=new r$a.Texture(_u);Lu.needsUpdate=!0,Lu.minFilter=r$a.LinearFilter,Lu.magFilter=r$a.LinearFilter,Lu.flipY=!0;var Ru=Lu.dispose;return Lu.dispose=function(){_u.close(),Ru.call(Lu),delete Lu.dispose},Lu}var hi=new r$a.WebGLRenderTarget(1,1),ci=new r$a.OrthographicCamera(-1,1,1,-1,0,1),di=new r$a.BufferGeometry;di.setAttribute("position",new r$a.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$a.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$a.Mesh(di),fi=new r$a.Scene;fi.add(pi);var Ai,gi=new r$a.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$a.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(_u,$u,Tu){return $u.flipY!==void 0&&(_u.flipY=$u.flipY),$u.format!==void 0&&(_u.format=$u.format),$u.encoding!==void 0&&(_u.encoding=$u.encoding),$u.minFilter!==void 0&&(_u.minFilter=$u.minFilter),$u.magFilter!==void 0&&(_u.magFilter=$u.magFilter),Tu?new Promise(function(Cu){at$1.shared.add(function(){try{var Pu=Tu.getRenderTarget();Tu.setRenderTarget(hi),_u instanceof r$a.CubeTexture?(pi.material=mi,mi.uniforms.map.value=_u,Tu.render(fi,ci),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=_u,Tu.render(fi,ci),mi.uniforms.map.value=null),Tu.setRenderTarget(Pu),Cu(_u)}catch{Cu(_u)}},!0,1)}):Promise.resolve(_u)}var yi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi=((Ai={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),Ei=function(){function _u(){}return _u.setTranscoderPath=function($u){return this.transcoderPath=$u,this},_u.setWorkerLimit=function($u){return this.workerLimit=$u,this},_u.isInitialized=function(){return this.workerPool.filter(function($u){return $u._initialized}).length!==0},_u.detectSupport=function($u){var Tu=this.workerConfig;if(Tu.astcSupported=!!$u.extensions.get("WEBGL_compressed_texture_astc"),Tu.bptcSupported=!!$u.extensions.get("EXT_texture_compression_bptc"),Tu.etcSupported=!!$u.extensions.get("WEBGL_compressed_texture_etc1"),Tu.dxtSupported=!!$u.extensions.get("WEBGL_compressed_texture_s3tc"),Tu.pvrtcSupported=!!$u.extensions.get("WEBGL_compressed_texture_pvrtc")||!!$u.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Tu.astcSupported)Tu.format=_u.BASIS_FORMAT.cTFASTC_4x4;else if(Tu.bptcSupported)Tu.format=_u.BASIS_FORMAT.cTFBC7_M5;else if(Tu.dxtSupported)Tu.format=_u.BASIS_FORMAT.cTFBC3;else if(Tu.pvrtcSupported)Tu.format=_u.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Tu.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Tu.format=_u.BASIS_FORMAT.cTFETC1}return this},_u.createTexture=function($u){var Tu,Cu,Pu=this,Bu=$u.byteLength,Lu=this._allocateWorker(Bu).then(function(Ru){return Tu=Ru,Cu=Pu.workerNextTaskID++,new Promise(function(Ou,Du){Tu._callbacks[Cu]={resolve:Ou,reject:Du},Tu.postMessage({type:"transcode",id:Cu,buffer:$u},[$u])})}).then(function(Ru){var Ou,Du=Pu.workerConfig,Fu=Ru.width,Vu=Ru.height,ku=Ru.mipmaps;switch(Ru.format){case bi.cTFASTC_4x4:Ou=new r$a.CompressedTexture(ku,Fu,Vu,r$a.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:Ou=new r$a.CompressedTexture(ku,Fu,Vu,wi[Du.format],r$a.UnsignedByteType);break;case bi.cTFETC1:Ou=new r$a.CompressedTexture(ku,Fu,Vu,r$a.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:Ou=new r$a.CompressedTexture(ku,Fu,Vu,r$a.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:Ou=new r$a.CompressedTexture(ku,Fu,Vu,r$a.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Ou.minFilter=ku.length===1?r$a.LinearFilter:r$a.LinearMipmapLinearFilter,Ou.magFilter=r$a.LinearFilter,Ou.generateMipmaps=!1,Ou.needsUpdate=!0,Ou});return Lu.catch(function(){return!0}).then(function(){Tu&&Cu&&(Tu._taskLoad-=Bu,delete Tu._callbacks[Cu])}),Lu},_u._initTranscoder=function(){var $u=this;if(!this.transcoderPending){var Tu=new r$a.FileLoader;Tu.setPath(this.transcoderPath);var Cu=new Promise(function(Lu,Ru){Tu.load("basis_transcoder.js",Lu,void 0,Ru)}),Pu=new r$a.FileLoader;Pu.setPath(this.transcoderPath),Pu.setResponseType("arraybuffer");var Bu=new Promise(function(Lu,Ru){Pu.load("basis_transcoder.wasm",Lu,void 0,Ru)});this.transcoderPending=Promise.all([Cu,Bu]).then(function(Lu){var Ru=Lu[0],Ou=Lu[1],Du=["/* basis_transcoder.js */",Ru,"/* worker */",yi].join(`
`);$u.workerSourceURL=URL.createObjectURL(new Blob([Du])),$u.transcoderBinary=Ou})}return this.transcoderPending},_u._allocateWorker=function($u){var Tu=this;return this._initTranscoder().then(function(){if(Tu.workerPool.length<Tu.workerLimit){var Cu=function(Bu){var Lu=new Worker(Bu);return Object.assign(Lu,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Tu.workerSourceURL);Cu._callbacks={},Cu._initialized=!1,Cu._taskLoad=0,Cu.postMessage({type:"init",config:Tu.workerConfig,transcoderBinary:Tu.transcoderBinary}),Cu.onmessage=function(Bu){var Lu=Bu.data;switch(Lu.type){case"initialized":Cu._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Cu._callbacks[Lu.id].resolve(Lu);break;case"error":Cu._callbacks[Lu.id].reject(Lu);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Lu.type,'"'))}},Tu.workerPool.push(Cu)}else Tu.workerPool.sort(function(Bu,Lu){return Bu._taskLoad>Lu._taskLoad?-1:1});var Pu=Tu.workerPool[Tu.workerPool.length-1];return Pu._taskLoad+=$u,Pu})},_u.prototype.dispose=function(){for(var $u=0;$u<_u.workerPool.length;$u++)_u.workerPool[$u].terminate();return _u.workerPool.length=0,this},_u.BASIS_FORMAT=bi,_u.DXT_FORMAT=xi,_u.DXT_FORMAT_MAP=wi,_u.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",_u.transcoderBinary=null,_u.transcoderPending=null,_u.workerLimit=1,_u.workerPool=[],_u.workerNextTaskID=1,_u.workerSourceURL="",_u.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},_u}();function Mi(_u){var $u=_u.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return $u?$u[1]:location.protocol}var Ii=function(){function _u($u){this.timeout=$u.timeout,this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u},_u.prototype.load=function($u,Tu,Cu,Pu,Bu,Lu){var Ru;Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe);var Ou=Mi($u),Du={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Fu=(Ru=Tu.viaAjax)!==null&&Ru!==void 0&&Ru,Vu=Je($u),ku=/^https?:$/.test(Ou),Nu=/\.basis$/.test($e$1($u).split("?")[0]);if(Vu?Fu=!0:ku||(Fu=!1),Fu){if(Nu){var Gu=null,ju="arraybuffer";return Tu.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it$1($u,t$8.__assign(t$8.__assign({},Du),{responseType:ju}),void 0,void 0,Bu).then(function(Wu){return Gu=Wu.meta,Ei.createTexture(Wu.body)}).then(function(Wu){return Tu.preInit!==!1?vi(Wu,t$8.__assign({flipY:!1,encoding:r$a.sRGBEncoding},ii(Tu,["wrapS","wrapT"])),Lu):Wu}).then(function(Wu){var Qu={meta:Gu,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return Pu(Wu),Promise.reject(Wu)})}return ju="blob",it$1($u,t$8.__assign(t$8.__assign({},Du),{responseType:ju}),void 0,void 0,Bu).then(function(Wu){return li(Wu.body)}).then(function(Wu){return ui(Wu,Tu.maxSize)}).then(function(Wu){return Tu.preInit!==!1?vi(Wu,t$8.__assign({flipY:!0,encoding:r$a.sRGBEncoding},Tu),Lu):Wu}).then(function(Wu){var Qu={meta:null,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return Pu(Wu),Promise.reject(Wu)})}if(Nu){var Hu=new Error("cannot load basis texture via image");return Pu(Hu),Promise.reject(Hu)}var Uu=null,zu=ai();return rt$1($u,Du,void 0,void 0,Bu,zu).then(function(Wu){return Uu=Wu.meta,ui(Wu.body,Tu.maxSize)}).then(function(Wu){return Tu.preInit!==!1?vi(Wu,t$8.__assign({flipY:!0,encoding:r$a.sRGBEncoding},Tu),Lu):Wu}).then(function(Wu){var Qu={meta:Uu,body:Wu};return Cu(Qu),Qu}).catch(function(Wu){return zu.close(),Pu(Wu),Promise.reject(Wu)})},_u.prototype.loadCube=function($u,Tu,Cu,Pu,Bu,Lu){var Ru;Tu===void 0&&(Tu={}),Cu===void 0&&(Cu=Qe),Pu===void 0&&(Pu=Qe),Bu===void 0&&(Bu=Qe),performance.now(),Array.isArray($u)||($u=[$u.right,$u.left,$u.up,$u.down,$u.front,$u.back]);for(var Ou={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Du=[],Fu=[0,0,0,0,0,0],Vu=[],ku=function(ju){var Hu=$u[ju],Uu=Mi(Hu),zu=function(Xu){Fu[ju]=Xu,Bu(Fu.reduce(function(Zu,_c){return Zu+_c},0)/6)},Wu=(Ru=Tu.viaAjax)!==null&&Ru!==void 0&&Ru,Qu=/^https?:$/.test(Uu),Ku=Je(Hu),Yu=/\.basis$/.test($e$1(Hu).split("?")[0]);if(Ku?Wu=!0:Qu||(Wu=!1),Wu)if(Yu){var Xc="arraybuffer",_d=it$1(Hu,t$8.__assign(t$8.__assign({},Ou),{responseType:Xc}),void 0,void 0,zu).then(function(Xu){return Vu[ju]=Xu.meta,Ei.createTexture(Xu.body)});Du.push(_d)}else Xc="blob",_d=it$1(Hu,t$8.__assign(t$8.__assign({},Ou),{responseType:Xc}),void 0,void 0,zu).then(function(Xu){return Vu[ju]=Xu.meta,li(Xu.body)}),Du.push(_d);else{if(Yu){var _f=new Error("cannot load basis texture via image");return Pu(_f),{value:Promise.reject(_f)}}var qu=ai();_d=rt$1(Hu,Ou,void 0,void 0,zu,qu).then(function(Xu){return Vu[ju]=Xu.meta,Xu.body}).catch(function(Xu){return qu.close(),Promise.reject(Xu)}),Du.push(_d)}},Nu=0;Nu<6;Nu++){var Gu=ku(Nu);if(typeof Gu=="object")return Gu.value}return Promise.all(Du).then(function(ju){return performance.now(),ju[0]instanceof r$a.CompressedTexture?function(Hu){var Uu=new r$a.CubeTexture(Hu);Uu.needsUpdate=!0;var zu=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=Hu;Wu<Qu.length;Wu++)Qu[Wu].dispose();zu.call(Uu),delete Uu.dispose},Uu.isCompressedTexture=!0,Uu.format=Hu[0].format,Uu.minFilter=Hu[0].minFilter,Uu.magFilter=Hu[0].magFilter,Uu}(ju):function(Hu){var Uu=new r$a.CubeTexture(Hu);Uu.needsUpdate=!0,Uu.minFilter=r$a.LinearFilter,Uu.magFilter=r$a.LinearFilter,Uu.flipY=!1;var zu=Uu.dispose;return Uu.dispose=function(){for(var Wu=0,Qu=Hu;Wu<Qu.length;Wu++)Qu[Wu].close();zu.call(Uu),delete Uu.dispose},Uu}(ju)}).then(function(ju){return Tu.preInit!==!1?ju.isCompressedTexture?vi(ju,t$8.__assign({flipY:!1,encoding:r$a.sRGBEncoding},ii(Tu,["wrapS","wrapT"])),Lu):vi(ju,t$8.__assign({flipY:!1,encoding:r$a.sRGBEncoding},Tu),Lu):ju}).then(function(ju){var Hu={body:ju,meta:Vu};return Cu(Hu),Hu}).catch(function(ju){for(var Hu=0,Uu=Du;Hu<Uu.length;Hu++)Uu[Hu].then(function(zu){zu instanceof r$a.Texture?zu.dispose():zu.close()}).catch(Qe);return Pu(ju),Promise.reject(ju)})},_u}();const Si=o$a.Reader,Ci=o$a.util,Bi=o$a.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$a.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi.Model=(()=>{function _u($u){if(this.chunks=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.chunks=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Model;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.chunks&&Pu.chunks.length||(Pu.chunks=[]),Pu.chunks.push(Bi.Chunk.decode($u,$u.uint32()));break;default:$u.skipType(7&Bu)}}return Pu},_u})();Bi.Chunk=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.vertices=null,_u.prototype.faces=null,_u.prototype.name="",_u.prototype.texture="",_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Chunk;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.vertices=Bi.Vertices.decode($u,$u.uint32());break;case 2:Pu.faces=Bi.Faces.decode($u,$u.uint32());break;case 3:Pu.name=$u.string();break;case 4:Pu.texture=$u.string();break;default:$u.skipType(7&Bu)}}if(!Pu.hasOwnProperty("vertices"))throw Ci.ProtocolError("missing required 'vertices'",{instance:Pu});if(!Pu.hasOwnProperty("faces"))throw Ci.ProtocolError("missing required 'faces'",{instance:Pu});if(!Pu.hasOwnProperty("name"))throw Ci.ProtocolError("missing required 'name'",{instance:Pu});return Pu},_u})(),Bi.Vertices=(()=>{function _u($u){if(this.xyz=[],this.uvs=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.xyz=Ci.emptyArray,_u.prototype.uvs=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Vertices;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.xyz&&Pu.xyz.length||(Pu.xyz=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.xyz.push($u.float())}else Pu.xyz.push($u.float());break;case 2:if(Pu.uvs&&Pu.uvs.length||(Pu.uvs=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.uvs.push($u.float())}else Pu.uvs.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})(),Bi.Faces=(()=>{function _u($u){if(this.indices=[],this.normals=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.indices=Ci.emptyArray,_u.prototype.normals=Ci.emptyArray,_u.decode=function($u,Tu){$u instanceof Si||($u=Si.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new Bi.Faces;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.indices&&Pu.indices.length||(Pu.indices=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.indices.push($u.uint32())}else Pu.indices.push($u.uint32());break;case 2:if(Pu.normals&&Pu.normals.length||(Pu.normals=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.normals.push($u.float())}else Pu.normals.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})();var Pi=new r$a.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri(_u){var $u=_u.match(/(group|floor)-?(\d+)/);return $u?parseInt($u[2],10):0}function ki(_u){var $u=_u.match(/(chunk)-?(\d+)/);return $u?parseInt($u[2],10):0}function Di(_u){return 1e6*Ri(_u.name)+1e3*ki(_u.name)+function($u){var Tu=$u.match(/(sub)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}(_u.name)}function Li(_u,$u,Tu,Cu,Pu){var Bu=t$8.__assign({key:"texture.pbm",basisLoaderInitialized:Ei.isInitialized()},ii($u,["format","quality","size","sharpen","mappings"]));return _u=$u.transform?$u.transform(_u,Bu):ct$1(_u,Bu),new Ii({allowHosts:Tu,requestProxy:Cu,networkSubscribe:Pu}).load(_u,{wrapS:r$a.ClampToEdgeWrapping,wrapT:r$a.ClampToEdgeWrapping,minFilter:r$a.LinearFilter,maxSize:typeof Bu.size=="number"?new r$a.Vector2(Bu.size,Bu.size):void 0,preInit:!0}).then(function(Lu){var Ru=Lu.body;return Ru.needsUpdate=!0,Ru})}function Oi(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){Pu===void 0&&(Pu={});for(var Ou=function(Ju){for(var _h,ep,tp=[],rp=!0,dp=0,cp=Ju.chunks;dp<cp.length;dp++)if(!(ym=cp[dp]).faces.normals||ym.faces.normals.length===0){rp=!1;break}for(var Sp=[],yp=0,Bp=Ju.chunks.sort(function(sm,_m){return Di(sm)-Di(_m)});yp<Bp.length;yp++){var _p=Ri((ym=Bp[yp]).name);Sp[_p]||(Sp[_p]=[]),Sp[_p].push(ym)}for(var Cp=0;Cp<Sp.length;Cp++){var Ep=Sp[Cp];if(Ep)if(rp){for(var ap=0,ip=0;ip<Ep.length;ip++)ap+=(ym=Ep[ip]).faces.indices.length;for(var hp=3*ap,up=2*ap,pp=3*ap,gp=new ArrayBuffer(4*hp+4*up+4*pp),Ap=new Float32Array(gp,0,hp),Mp=new Float32Array(gp,4*hp,up),Dp=new Float32Array(gp,4*hp+4*up,pp),$p=[],np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],sp=0,Pp=0;Pp<Ep.length;Pp++){var Tp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Np=(ym=Ep[Pp]).vertices.xyz,Vp=ym.vertices.uvs,Gp=ym.faces.indices,qp=ym.faces.normals,Wp=Gp.length;for(ip=0;ip<Wp;ip++){var Jp=Gp[ip],Hp=Np[3*Jp],Kp=Np[3*Jp+1],jp=Np[3*Jp+2],Yp=1/(Pi[3]*Hp+Pi[7]*Kp+Pi[11]*jp+Pi[15]),xp=(Pi[0]*Hp+Pi[4]*Kp+Pi[8]*jp+Pi[12])*Yp,Qp=(Pi[1]*Hp+Pi[5]*Kp+Pi[9]*jp+Pi[13])*Yp,Zp=(Pi[2]*Hp+Pi[6]*Kp+Pi[10]*jp+Pi[14])*Yp;Ap[3*sp+3*ip]=xp,Ap[3*sp+3*ip+1]=Qp,Ap[3*sp+3*ip+2]=Zp,Mp[2*sp+2*ip]=Vp[2*Jp],Mp[2*sp+2*ip+1]=Vp[2*Jp+1];var tm=3*Math.floor(ip/3),em=qp[tm],lm=qp[tm+1],pm=qp[tm+2],mm=1/(Pi[3]*em+Pi[7]*lm+Pi[11]*pm+Pi[15]),Sm=(Pi[0]*em+Pi[4]*lm+Pi[8]*pm+Pi[12])*mm,fm=(Pi[1]*em+Pi[5]*lm+Pi[9]*pm+Pi[13])*mm,xm=(Pi[2]*em+Pi[6]*lm+Pi[10]*pm+Pi[14])*mm;Dp[3*sp+3*ip]=Sm,Dp[3*sp+3*ip+1]=fm,Dp[3*sp+3*ip+2]=xm,xp<Tp[0]&&(Tp[0]=xp),Qp<Tp[1]&&(Tp[1]=Qp),Zp<Tp[2]&&(Tp[2]=Zp),xp>Tp[3]&&(Tp[3]=xp),Qp>Tp[4]&&(Tp[4]=Qp),Zp>Tp[5]&&(Tp[5]=Zp)}Tp[0]<np[0]&&(np[0]=Tp[0]),Tp[1]<np[1]&&(np[1]=Tp[1]),Tp[2]<np[2]&&(np[2]=Tp[2]),Tp[3]>np[3]&&(np[3]=Tp[3]),Tp[4]>np[4]&&(np[4]=Tp[4]),Tp[5]>np[5]&&(np[5]=Tp[5]),$p.push({materialIndex:Pp,name:ym.name,chunkName:ki(ym.name),start:sp,count:ym.faces.indices.length,texture:(_h=ym.texture)!==null&&_h!==void 0?_h:void 0}),sp+=Wp}tp.push({floorIndex:Cp,vertices:Ap,uvs:Mp,indices:null,normals:Dp,groups:$p,extents:np})}else{ap=0;var wm=0;for(ip=0;ip<Ep.length;ip++)wm+=(ym=Ep[ip]).vertices.xyz.length/3,ap+=ym.faces.indices.length;hp=3*wm,up=2*wm,pp=3*wm;var gm=ap,Mm=(gp=new ArrayBuffer(4*hp+4*up+4*pp+4*gm),Ap=new Float32Array(gp,0,hp),Mp=new Float32Array(gp,4*hp,up),Dp=new Float32Array(gp,4*hp+4*up,pp),new Uint32Array(gp,4*hp+4*up+4*pp,gm)),Im=($p=[],np=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(sp=0,Pp=0;Pp<Ep.length;Pp++){Tp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Np=(ym=Ep[Pp]).vertices.xyz,Vp=ym.vertices.uvs,Gp=ym.faces.indices;var ym,mp=Np.length/3;for(Wp=Gp.length,ip=0;ip<mp;ip++)Hp=Np[3*ip],Kp=Np[3*ip+1],jp=Np[3*ip+2],Yp=1/(Pi[3]*Hp+Pi[7]*Kp+Pi[11]*jp+Pi[15]),xp=(Pi[0]*Hp+Pi[4]*Kp+Pi[8]*jp+Pi[12])*Yp,Qp=(Pi[1]*Hp+Pi[5]*Kp+Pi[9]*jp+Pi[13])*Yp,Zp=(Pi[2]*Hp+Pi[6]*Kp+Pi[10]*jp+Pi[14])*Yp,Ap[3*sp+3*ip]=xp,Ap[3*sp+3*ip+1]=Qp,Ap[3*sp+3*ip+2]=Zp,Mp[2*sp+2*ip]=Vp[2*ip],Mp[2*sp+2*ip+1]=Vp[2*ip+1],xp<Tp[0]&&(Tp[0]=xp),Qp<Tp[1]&&(Tp[1]=Qp),Zp<Tp[2]&&(Tp[2]=Zp),xp>Tp[3]&&(Tp[3]=xp),Qp>Tp[4]&&(Tp[4]=Qp),Zp>Tp[5]&&(Tp[5]=Zp);for(Tp[0]<np[0]&&(np[0]=Tp[0]),Tp[1]<np[1]&&(np[1]=Tp[1]),Tp[2]<np[2]&&(np[2]=Tp[2]),Tp[3]>np[3]&&(np[3]=Tp[3]),Tp[4]>np[4]&&(np[4]=Tp[4]),Tp[5]>np[5]&&(np[5]=Tp[5]),ip=0;ip<Wp;ip++)Mm[Im+ip]=sp+Gp[ip];$p.push({materialIndex:Pp,name:ym.name,chunkName:ki(ym.name),start:Im,count:ym.faces.indices.length,texture:(ep=ym.texture)!==null&&ep!==void 0?ep:void 0}),sp+=mp,Im+=Wp}for(ip=0;ip<ap;ip+=3){var Fp,Lp,kp,Xp,cm,um,im,om,dm,Am,op,vp,bp,Ip,Up,am;em=void 0,lm=void 0,pm=void 0,Fp=3*Mm[ip],Lp=3*Mm[ip+1],kp=3*Mm[ip+2],Xp=Ap[Fp],cm=Ap[Fp+1],um=Ap[Fp+2],im=Ap[Lp],om=Ap[Lp+1],dm=Ap[Lp+2],Am=Ap[kp],em=(vp=Ap[kp+1]-om)*(am=um-dm)-(bp=Ap[kp+2]-dm)*(Up=cm-om),lm=bp*(Ip=Xp-im)-(op=Am-im)*am,pm=op*Up-vp*Ip,Dp[Fp]+=em,Dp[Fp+1]+=lm,Dp[Fp+2]+=pm,Dp[Lp]+=em,Dp[Lp+1]+=lm,Dp[Lp+2]+=pm,Dp[kp]+=em,Dp[kp+1]+=lm,Dp[kp+2]+=pm}tp.push({floorIndex:Cp,vertices:Ap,uvs:Mp,indices:Mm,normals:Dp,groups:$p,extents:np})}}return tp}(_u),Du=[],Fu=0,Vu=Ou;Fu<Vu.length;Fu++){var ku=Vu[Fu],Nu=ku.floorIndex,Gu=ku.vertices,ju=ku.uvs,Hu=ku.indices,Uu=ku.normals,zu=ku.groups,Wu=ku.extents,Qu=new r$a.Box3;Qu.min.x=Wu[0],Qu.min.y=Wu[1],Qu.min.z=Wu[2],Qu.max.x=Wu[3],Qu.max.y=Wu[4],Qu.max.z=Wu[5];var Ku=new r$a.BufferGeometry;Ku.setAttribute("position",new r$a.BufferAttribute(Gu,3)),Ku.setAttribute("uv",new r$a.BufferAttribute(ju,2)),Ku.setAttribute("normal",new r$a.BufferAttribute(Uu,3)),Hu&&Ku.setIndex(new r$a.BufferAttribute(Hu,1)),Ku.boundingBox=Qu,Ku.boundingSphere=Qu.getBoundingSphere(new r$a.Sphere);for(var Yu=0,Xc=zu;Yu<Xc.length;Yu++){var _d=Xc[Yu];Ku.addGroup(_d.start,_d.count,_d.materialIndex)}for(var _f=[],qu=function(Ju){var _h=Tu[Ju.chunkName]||(Ju.texture?$u+Ju.texture:void 0),ep=new Mt$1;if(_f.push(ep),_h){var tp=void 0;_h in Pu?tp=Pu[_h]:(tp=Li(_h,Cu,Bu,Lu,Ru),Pu[_h]=tp),tp.then(function(rp){ep.uniforms.map.value=rp,ep.uniforms.exposure.value=3.3},function(){ep.defines.USE_MAP=!1,ep.uniforms.diffuse.value=new r$a.Color(16777215)})}else ep.defines.USE_MAP=!1,ep.uniforms.diffuse.value=new r$a.Color(16777215)},Xu=0,Zu=zu;Xu<Zu.length;Xu++)qu(_d=Zu[Xu]);var _c=new ft$1(Ku,_f);_c.name="model_floor_"+Nu,_c.floorIndex=Nu,Du.push(_c)}return{objects:Du,texturePromise:Promise.all(Object.keys(Pu).map(function(Ju){return Pu[Ju].catch(Qe)})).then(Qe)}}function Ni(_u,$u){return(_u=Object.assign({},_u)).autoResize!==!1&&($u>96?_u.size=Math.min(_u.size||1/0,100):$u>48?_u.size=Math.min(_u.size||1/0,200):$u>24?_u.size=Math.min(_u.size||1/0,400):$u>12?_u.size=Math.min(_u.size||1/0,800):$u>4&&(_u.size=Math.min(_u.size||1/0,1024))),_u}function Fi(_u){return _u.indexOf("//")===0||/^[0-9a-z]+\:/i.test(_u)}const Qi=o$a.Reader,Vi=o$a.util,_i=o$a.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$a.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi=_i.Model=(()=>{function _u($u){if(this.meshes=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.meshes=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Model;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.meshes&&Pu.meshes.length||(Pu.meshes=[]),Pu.meshes.push(_i.Mesh.decode($u,$u.uint32()));break;default:$u.skipType(7&Bu)}}return Pu},_u})();function qi(_u){for(var $u=[0,0,0],Tu=0;Tu<_u.attributes.normal.array.length/9;Tu++)$u[0]=_u.attributes.normal.array[9*Tu],$u[1]=_u.attributes.normal.array[9*Tu+1],$u[2]=_u.attributes.normal.array[9*Tu+2],_u.attributes.normal.array[9*Tu]=_u.attributes.normal.array[9*Tu+6],_u.attributes.normal.array[9*Tu+1]=_u.attributes.normal.array[9*Tu+7],_u.attributes.normal.array[9*Tu+2]=_u.attributes.normal.array[9*Tu+8],_u.attributes.normal.array[9*Tu+6]=$u[0],_u.attributes.normal.array[9*Tu+7]=$u[1],_u.attributes.normal.array[9*Tu+8]=$u[2];for(Tu=0;Tu<_u.attributes.position.array.length/9;Tu++)$u[0]=_u.attributes.position.array[9*Tu],$u[1]=_u.attributes.position.array[9*Tu+1],$u[2]=_u.attributes.position.array[9*Tu+2],_u.attributes.position.array[9*Tu]=_u.attributes.position.array[9*Tu+6],_u.attributes.position.array[9*Tu+1]=_u.attributes.position.array[9*Tu+7],_u.attributes.position.array[9*Tu+2]=_u.attributes.position.array[9*Tu+8],_u.attributes.position.array[9*Tu+6]=$u[0],_u.attributes.position.array[9*Tu+7]=$u[1],_u.attributes.position.array[9*Tu+8]=$u[2];for(Tu=0;Tu<_u.attributes.uv.array.length/6;Tu++)$u[0]=_u.attributes.uv.array[6*Tu],$u[1]=_u.attributes.uv.array[6*Tu+1],_u.attributes.uv.array[6*Tu]=_u.attributes.uv.array[6*Tu+4],_u.attributes.uv.array[6*Tu+1]=_u.attributes.uv.array[6*Tu+5],_u.attributes.uv.array[6*Tu+4]=$u[0],_u.attributes.uv.array[6*Tu+5]=$u[1];_u.attributes.normal.needsUpdate=!0,_u.attributes.position.needsUpdate=!0,_u.attributes.uv.needsUpdate=!0}function zi(_u){var $u=_u.position,Tu=_u.normal,Cu=_u.uv,Pu=_u.uv2,Bu=_u.groups,Lu=new r$a.BufferGeometry;Lu.setAttribute("position",new r$a.BufferAttribute(new Float32Array($u.array),3)),Tu&&Lu.setAttribute("normal",new r$a.BufferAttribute(new Float32Array(Tu.array),3)),Cu&&Lu.setAttribute("uv",new r$a.BufferAttribute(new Float32Array(Cu.array),2)),Pu&&Lu.setAttribute("uv2",new r$a.BufferAttribute(new Float32Array(Pu.array),2));for(var Ru=0,Ou=Bu;Ru<Ou.length;Ru++){var Du=Ou[Ru];Lu.addGroup(Du.start,Du.count,Du.materialIndex)}return Lu}function Ki(_u,$u,Tu,Cu,Pu,Bu){if(Bu.hasOwnProperty(_u))return Bu[_u];Fi(_u=_u.split("?")[0])||(_u=$u+_u),(_u=_u.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(_u="https:"+_u);var Lu=t$8.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei.isInitialized()},ii(Tu,["quality","format","sharpen","mappings"]));return Bu[_u=Tu.transform?Tu.transform(_u,Lu):ct$1(_u,Lu)]=Pu.load(_u,{wrapS:r$a.RepeatWrapping,wrapT:r$a.RepeatWrapping}).then(function(Ru){var Ou=Ru.body;return Cu&&Ou.repeat.copy(Cu),Ou.needsUpdate=!0,Ou.updateMatrix(),Ou})}function Ui(_u,$u,Tu,Cu,Pu){var Bu=[],Lu=new Mt$1,Ru=Lu.uniforms;Ru.exposure.value=4.3;var Ou=Lu.defines;if(Ou.USE_MAP=!1,Ou.USE_UV=!1,_u.kd&&(Ru.diffuse.value=new r$a.Color().fromArray(_u.kd.rgb)),_u.mapkd){var Du=null;if(_u.mapkdrepeat){var Fu=_u.mapkdrepeat.split(/\s+/).map(function(Gu){return Number(Gu)}),Vu=Fu[0],ku=Fu[1];Du=new r$a.Vector2(Vu,ku)}Bu.push(Ki(_u.mapkd,$u,Tu,Du,Cu,Pu).then(function(Gu){Ou.USE_MAP=!0,Ou.USE_UV=!0,Ru.map.value=Gu,Ru.uvTransform.value=Gu.matrix,Lu.needsUpdate=!0}).catch(Qe))}if(_u.ks&&(Ru.specular.value=new r$a.Color().fromArray(_u.ks.rgb)),_u.mapks&&Bu.push(Ki(_u.mapks,$u,Tu,null,Cu,Pu).then(function(Gu){Ru.specularMap.value=Gu}).catch(Qe)),_u.ke&&(Ru.emissive.value=new r$a.Color().fromArray(_u.ke.rgb)),_u.mapke&&Bu.push(Ki(_u.mapke,$u,Tu,null,Cu,Pu).then(function(Gu){Ru.emissiveMap.value=Gu}).catch(Qe)),_u.norm&&Bu.push(Ki(_u.norm,$u,Tu,null,Cu,Pu).then(function(Gu){Ru.normalMap.value=Gu}).catch(Qe)),_u.mapbump&&Bu.push(Ki(_u.mapbump,$u,Tu,null,Cu,Pu).then(function(Gu){Ru.bumpMap.value=Gu}).catch(Qe)),_u.bump&&Bu.push(Ki(_u.bump,$u,Tu,null,Cu,Pu).then(function(Gu){Ru.bumpMap.value=Gu}).catch(Qe)),typeof _u.ns=="number"&&(Ru.shininess.value=_u.ns),typeof _u.d=="number"){var Nu=_u.d;Nu>0&&Nu<1&&(Lu.originOpacity=Nu,Lu.opacity=Nu)}return{material:Lu,textureReady:Promise.all(Bu).then(Qe)}}function ji(_u,$u,Tu,Cu,Pu,Bu){for(var Lu,Ru=[],Ou=[],Du=(Lu=_u,Hi.decode(Lu).meshes),Fu=new Ii({allowHosts:Cu,requestProxy:Pu,networkSubscribe:Bu}),Vu=new r$a.Matrix4,ku=new r$a.Vector3,Nu=new r$a.Quaternion,Gu=new r$a.Vector3,ju={},Hu=0,Uu=Du;Hu<Uu.length;Hu++){var zu=Uu[Hu],Wu=zu.name,Qu=zu.chunks,Ku=zu.matrix;if(Wu!=="Ceiling"&&Wu!=="CeilingDrop")for(var Yu=0,Xc=Ku;Yu<Xc.length;Yu++){var _d=Xc[Yu];Vu.elements=_d.elements;var _f=new gt$1;_f.renderOrder=-3;for(var qu=0;qu<Qu.length;qu++){var Xu=zi(Qu[qu].geometry);Xu.applyMatrix4(Vu),Vu.decompose(ku,Nu,Gu),Gu.x*Gu.y*Gu.z<0&&Xu.attributes.normal&&Xu.attributes.position&&Xu.attributes.uv&&qi(Xu);for(var Zu=[],_c=0,Ju=Qu[qu].material;_c<Ju.length;_c++){var _h=Ui(Ju[_c],$u,Tu,Fu,ju),ep=_h.material,tp=_h.textureReady;Ou.push(tp),Zu.push(ep)}var rp=new ft$1(Xu,Zu);rp.name="chunk_"+qu,_f.add(rp)}_f.floorIndex=0,_f.name=Wu,Ru.push(_f)}}return{objects:Ru,texturePromise:Promise.all(Ou).catch(Qe)}}function Gi(_u,$u){if(!_u)throw new Error("math.gl assertion ".concat($u))}_i.Mesh=(()=>{function _u($u){if(this.chunks=[],this.matrix=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.name="",_u.prototype.chunks=Vi.emptyArray,_u.prototype.matrix=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Mesh;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.name=$u.string();break;case 2:Pu.chunks&&Pu.chunks.length||(Pu.chunks=[]),Pu.chunks.push(_i.Chunk.decode($u,$u.uint32()));break;case 3:Pu.matrix&&Pu.matrix.length||(Pu.matrix=[]),Pu.matrix.push(_i.Matrix.decode($u,$u.uint32()));break;default:$u.skipType(7&Bu)}}if(!Pu.hasOwnProperty("name"))throw Vi.ProtocolError("missing required 'name'",{instance:Pu});return Pu},_u})(),_i.Matrix=(()=>{function _u($u){if(this.elements=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.elements=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Matrix;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.elements&&Pu.elements.length||(Pu.elements=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.elements.push($u.float())}else Pu.elements.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})(),_i.Chunk=(()=>{function _u($u){if(this.material=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.geometry=null,_u.prototype.material=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Chunk;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 2:Pu.geometry=_i.Geometry.decode($u,$u.uint32());break;case 3:Pu.material&&Pu.material.length||(Pu.material=[]),Pu.material.push(_i.Material.decode($u,$u.uint32()));break;default:$u.skipType(7&Bu)}}if(!Pu.hasOwnProperty("geometry"))throw Vi.ProtocolError("missing required 'geometry'",{instance:Pu});return Pu},_u})(),_i.Geometry=(()=>{function _u($u){if(this.groups=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.position=null,_u.prototype.uv=null,_u.prototype.uv2=null,_u.prototype.normal=null,_u.prototype.groups=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Geometry;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.position=_i.Position.decode($u,$u.uint32());break;case 2:Pu.uv=_i.UV.decode($u,$u.uint32());break;case 3:Pu.uv2=_i.UV.decode($u,$u.uint32());break;case 4:Pu.normal=_i.Normal.decode($u,$u.uint32());break;case 5:Pu.groups&&Pu.groups.length||(Pu.groups=[]),Pu.groups.push(_i.Group.decode($u,$u.uint32()));break;default:$u.skipType(7&Bu)}}if(!Pu.hasOwnProperty("position"))throw Vi.ProtocolError("missing required 'position'",{instance:Pu});if(!Pu.hasOwnProperty("normal"))throw Vi.ProtocolError("missing required 'normal'",{instance:Pu});return Pu},_u})(),_i.Position=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Position;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})(),_i.UV=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.UV;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})(),_i.Normal=(()=>{function _u($u){if(this.array=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.array=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Normal;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.array&&Pu.array.length||(Pu.array=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.array.push($u.float())}else Pu.array.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})(),_i.Group=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.start=0,_u.prototype.count=0,_u.prototype.materialIndex=0,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Group;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.start=$u.uint32();break;case 2:Pu.count=$u.uint32();break;case 3:Pu.materialIndex=$u.uint32();break;default:$u.skipType(7&Bu)}}if(!Pu.hasOwnProperty("start"))throw Vi.ProtocolError("missing required 'start'",{instance:Pu});if(!Pu.hasOwnProperty("count"))throw Vi.ProtocolError("missing required 'count'",{instance:Pu});if(!Pu.hasOwnProperty("materialIndex"))throw Vi.ProtocolError("missing required 'materialIndex'",{instance:Pu});return Pu},_u})(),_i.Material=(()=>{function _u($u){if($u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.kd=null,_u.prototype.ks=null,_u.prototype.ke=null,_u.prototype.mapkd="",_u.prototype.mapks="",_u.prototype.mapke="",_u.prototype.norm="",_u.prototype.mapbump="",_u.prototype.bump="",_u.prototype.mapd="",_u.prototype.ns=0,_u.prototype.d=0,_u.prototype.tr=0,_u.prototype.mapkdrepeat="",_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Material;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:Pu.kd=_i.Color.decode($u,$u.uint32());break;case 2:Pu.ks=_i.Color.decode($u,$u.uint32());break;case 3:Pu.ke=_i.Color.decode($u,$u.uint32());break;case 4:Pu.mapkd=$u.string();break;case 5:Pu.mapks=$u.string();break;case 6:Pu.mapke=$u.string();break;case 7:Pu.norm=$u.string();break;case 8:Pu.mapbump=$u.string();break;case 9:Pu.bump=$u.string();break;case 10:Pu.mapd=$u.string();break;case 11:Pu.ns=$u.float();break;case 12:Pu.d=$u.float();break;case 13:Pu.tr=$u.float();break;case 14:Pu.mapkdrepeat=$u.string();break;default:$u.skipType(7&Bu)}}return Pu},_u})(),_i.Color=(()=>{function _u($u){if(this.rgb=[],$u)for(let Tu=Object.keys($u),Cu=0;Cu<Tu.length;++Cu)$u[Tu[Cu]]!=null&&(this[Tu[Cu]]=$u[Tu[Cu]])}return _u.prototype.rgb=Vi.emptyArray,_u.decode=function($u,Tu){$u instanceof Qi||($u=Qi.create($u));let Cu=Tu===void 0?$u.len:$u.pos+Tu,Pu=new _i.Color;for(;$u.pos<Cu;){let Bu=$u.uint32();switch(Bu>>>3){case 1:if(Pu.rgb&&Pu.rgb.length||(Pu.rgb=[]),(7&Bu)==2){let Lu=$u.uint32()+$u.pos;for(;$u.pos<Lu;)Pu.rgb.push($u.float())}else Pu.rgb.push($u.float());break;default:$u.skipType(7&Bu)}}return Pu},_u})();const Wi={};function Xi(_u,{precision:$u=Wi.precision||4}={}){return _u=function(Tu){return Math.round(Tu/Wi.EPSILON)*Wi.EPSILON}(_u),"".concat(parseFloat(_u.toPrecision($u)))}function Yi(_u){return Array.isArray(_u)||ArrayBuffer.isView(_u)&&!(_u instanceof DataView)}function Zi(_u,$u,Tu){const Cu=Wi.EPSILON;Tu&&(Wi.EPSILON=Tu);try{if(_u===$u)return!0;if(Yi(_u)&&Yi($u)){if(_u.length!==$u.length)return!1;for(let Pu=0;Pu<_u.length;++Pu)if(!Zi(_u[Pu],$u[Pu]))return!1;return!0}return _u&&_u.equals?_u.equals($u):$u&&$u.equals?$u.equals(_u):!(!Number.isFinite(_u)||!Number.isFinite($u))&&Math.abs(_u-$u)<=Wi.EPSILON*Math.max(1,Math.abs(_u),Math.abs($u))}finally{Wi.EPSILON=Cu}}Wi.EPSILON=1e-12,Wi.debug=!1,Wi.precision=4,Wi.printTypes=!1,Wi.printDegrees=!1,Wi.printRowMajor=!0;class Ji extends function($u){function Tu(){var Cu=Reflect.construct($u,Array.from(arguments));return Object.setPrototypeOf(Cu,Object.getPrototypeOf(this)),Cu}return Tu.prototype=Object.create($u.prototype,{constructor:{value:$u,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Tu,$u):Tu.__proto__=$u,Tu}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from($u){return Array.isArray($u)?this.copy($u):this.fromObject($u)}fromArray($u,Tu=0){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=$u[Cu+Tu];return this.check()}to($u){return $u===this?this:Yi($u)?this.toArray($u):this.toObject($u)}toTarget($u){return $u?this.to($u):this}toArray($u=[],Tu=0){for(let Cu=0;Cu<this.ELEMENTS;++Cu)$u[Tu+Cu]=this[Cu];return $u}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi)}formatString($u){let Tu="";for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=(Cu>0?", ":"")+Xi(this[Cu],$u);return"".concat($u.printTypes?this.constructor.name:"","[").concat(Tu,"]")}equals($u){if(!$u||this.length!==$u.length)return!1;for(let Tu=0;Tu<this.ELEMENTS;++Tu)if(!Zi(this[Tu],$u[Tu]))return!1;return!0}exactEquals($u){if(!$u||this.length!==$u.length)return!1;for(let Tu=0;Tu<this.ELEMENTS;++Tu)if(this[Tu]!==$u[Tu])return!1;return!0}negate(){for(let $u=0;$u<this.ELEMENTS;++$u)this[$u]=-this[$u];return this.check()}lerp($u,Tu,Cu){Cu===void 0&&(Cu=Tu,Tu=$u,$u=this);for(let Pu=0;Pu<this.ELEMENTS;++Pu){const Bu=$u[Pu];this[Pu]=Bu+Cu*(Tu[Pu]-Bu)}return this.check()}min($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=Math.min($u[Tu],this[Tu]);return this.check()}max($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=Math.max($u[Tu],this[Tu]);return this.check()}clamp($u,Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.min(Math.max(this[Cu],$u[Cu]),Tu[Cu]);return this.check()}add(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]+=Tu[Cu];return this.check()}subtract(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]-=Tu[Cu];return this.check()}scale($u){if(Array.isArray($u))return this.multiply($u);for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]*=$u;return this.check()}sub($u){return this.subtract($u)}setScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=$u;return this.check()}addScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]+=$u;return this.check()}subScalar($u){return this.addScalar(-$u)}multiplyScalar($u){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]*=$u;return this.check()}divideScalar($u){return this.scale(1/$u)}clampScalar($u,Tu){for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]=Math.min(Math.max(this[Cu],$u),Tu);return this.check()}multiplyByScalar($u){return this.scale($u)}get elements(){return this}check(){if(Wi.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let $u=this.length===this.ELEMENTS;for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u=$u&&Number.isFinite(this[Tu]);return $u}}function $i(_u){if(!Number.isFinite(_u))throw new Error("Invalid number ".concat(_u));return _u}function en(_u,$u,Tu=""){if(Wi.debug&&!function(Cu,Pu){if(Cu.length!==Pu)return!1;for(let Bu=0;Bu<Cu.length;++Bu)if(!Number.isFinite(Cu[Bu]))return!1;return!0}(_u,$u))throw new Error("math.gl: ".concat(Tu," some fields set to invalid numbers'"));return _u}const tn={};function nn(_u,$u){tn[_u]||(tn[_u]=!0,console.warn("".concat(_u," has been removed in version ").concat($u,", see upgrade guide for more information")))}class rn extends Ji{get ELEMENTS(){return Gi(!1),0}copy($u){return Gi(!1),this}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let $u=0;for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u+=this[Tu]*this[Tu];return $u}magnitudeSquared(){return this.lengthSquared()}distance($u){return Math.sqrt(this.distanceSquared($u))}distanceSquared($u){let Tu=0;for(let Cu=0;Cu<this.ELEMENTS;++Cu){const Pu=this[Cu]-$u[Cu];Tu+=Pu*Pu}return $i(Tu)}dot($u){let Tu=0;for(let Cu=0;Cu<this.ELEMENTS;++Cu)Tu+=this[Cu]*$u[Cu];return $i(Tu)}normalize(){const $u=this.magnitude();if($u!==0)for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]/=$u;return this.check()}multiply(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]*=Tu[Cu];return this.check()}divide(...$u){for(const Tu of $u)for(let Cu=0;Cu<this.ELEMENTS;++Cu)this[Cu]/=Tu[Cu];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo($u){return this.distance($u)}distanceToSquared($u){return this.distanceSquared($u)}getComponent($u){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),$i(this[$u])}setComponent($u,Tu){return Gi($u>=0&&$u<this.ELEMENTS,"index is out of range"),this[$u]=Tu,this.check()}addVectors($u,Tu){return this.copy($u).add(Tu)}subVectors($u,Tu){return this.copy($u).subtract(Tu)}multiplyVectors($u,Tu){return this.copy($u).multiply(Tu)}addScaledVector($u,Tu){return this.add(new this.constructor($u).multiplyScalar(Tu))}}var on$1=typeof Float32Array!="undefined"?Float32Array:Array;function sn(){var _u=new on$1(3);return on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u}function an(_u,$u,Tu){var Cu=new on$1(3);return Cu[0]=_u,Cu[1]=$u,Cu[2]=Tu,Cu}function ln(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]}function un(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=Tu[0],Ru=Tu[1],Ou=Tu[2];return _u[0]=Pu*Ou-Bu*Ru,_u[1]=Bu*Lu-Cu*Ou,_u[2]=Cu*Ru-Pu*Lu,_u}function hn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=Tu[3]*Cu+Tu[7]*Pu+Tu[11]*Bu+Tu[15];return Lu=Lu||1,_u[0]=(Tu[0]*Cu+Tu[4]*Pu+Tu[8]*Bu+Tu[12])/Lu,_u[1]=(Tu[1]*Cu+Tu[5]*Pu+Tu[9]*Bu+Tu[13])/Lu,_u[2]=(Tu[2]*Cu+Tu[6]*Pu+Tu[10]*Bu+Tu[14])/Lu,_u}function cn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2];return _u[0]=Cu*Tu[0]+Pu*Tu[3]+Bu*Tu[6],_u[1]=Cu*Tu[1]+Pu*Tu[4]+Bu*Tu[7],_u[2]=Cu*Tu[2]+Pu*Tu[5]+Bu*Tu[8],_u}Math.hypot||(Math.hypot=function(){for(var _u=0,$u=arguments.length;$u--;)_u+=arguments[$u]*arguments[$u];return Math.sqrt(_u)});var dn=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2];return Math.hypot($u,Tu,Cu)};function pn(_u,$u,Tu){const Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=Tu[3]*Cu+Tu[7]*Pu+Tu[11]*Bu||1;return _u[0]=(Tu[0]*Cu+Tu[4]*Pu+Tu[8]*Bu)/Lu,_u[1]=(Tu[1]*Cu+Tu[5]*Pu+Tu[9]*Bu)/Lu,_u[2]=(Tu[2]*Cu+Tu[6]*Pu+Tu[10]*Bu)/Lu,_u}sn();const fn=[0,0,0],An={};class gn extends rn{static get ZERO(){return An.ZERO=An.ZERO||Object.freeze(new gn(0,0,0,0))}constructor($u=0,Tu=0,Cu=0){super(-0,-0,-0),arguments.length===1&&Yi($u)?this.copy($u):(Wi.debug&&($i($u),$i(Tu),$i(Cu)),this[0]=$u,this[1]=Tu,this[2]=Cu)}set($u,Tu,Cu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this.check()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this.check()}fromObject($u){return Wi.debug&&($i($u.x),$i($u.y),$i($u.z)),this[0]=$u.x,this[1]=$u.y,this[2]=$u.z,this.check()}toObject($u){return $u.x=this[0],$u.y=this[1],$u.z=this[2],$u}get ELEMENTS(){return 3}get z(){return this[2]}set z($u){this[2]=$i($u)}angle($u){return function(Tu,Cu){var Pu=Tu[0],Bu=Tu[1],Lu=Tu[2],Ru=Cu[0],Ou=Cu[1],Du=Cu[2],Fu=Math.sqrt(Pu*Pu+Bu*Bu+Lu*Lu)*Math.sqrt(Ru*Ru+Ou*Ou+Du*Du),Vu=Fu&&ln(Tu,Cu)/Fu;return Math.acos(Math.min(Math.max(Vu,-1),1))}(this,$u)}cross($u){return un(this,this,$u),this.check()}rotateX({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Bu,Lu){var Ru=[],Ou=[];Ru[0]=Pu[0]-Bu[0],Ru[1]=Pu[1]-Bu[1],Ru[2]=Pu[2]-Bu[2],Ou[0]=Ru[0],Ou[1]=Ru[1]*Math.cos(Lu)-Ru[2]*Math.sin(Lu),Ou[2]=Ru[1]*Math.sin(Lu)+Ru[2]*Math.cos(Lu),Cu[0]=Ou[0]+Bu[0],Cu[1]=Ou[1]+Bu[1],Cu[2]=Ou[2]+Bu[2]}(this,this,Tu,$u),this.check()}rotateY({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Bu,Lu){var Ru=[],Ou=[];Ru[0]=Pu[0]-Bu[0],Ru[1]=Pu[1]-Bu[1],Ru[2]=Pu[2]-Bu[2],Ou[0]=Ru[2]*Math.sin(Lu)+Ru[0]*Math.cos(Lu),Ou[1]=Ru[1],Ou[2]=Ru[2]*Math.cos(Lu)-Ru[0]*Math.sin(Lu),Cu[0]=Ou[0]+Bu[0],Cu[1]=Ou[1]+Bu[1],Cu[2]=Ou[2]+Bu[2]}(this,this,Tu,$u),this.check()}rotateZ({radians:$u,origin:Tu=fn}){return function(Cu,Pu,Bu,Lu){var Ru=[],Ou=[];Ru[0]=Pu[0]-Bu[0],Ru[1]=Pu[1]-Bu[1],Ru[2]=Pu[2]-Bu[2],Ou[0]=Ru[0]*Math.cos(Lu)-Ru[1]*Math.sin(Lu),Ou[1]=Ru[0]*Math.sin(Lu)+Ru[1]*Math.cos(Lu),Ou[2]=Ru[2],Cu[0]=Ou[0]+Bu[0],Cu[1]=Ou[1]+Bu[1],Cu[2]=Ou[2]+Bu[2]}(this,this,Tu,$u),this.check()}transform($u){return this.transformAsPoint($u)}transformAsPoint($u){return hn(this,this,$u),this.check()}transformAsVector($u){return pn(this,this,$u),this.check()}transformByMatrix3($u){return cn(this,this,$u),this.check()}transformByMatrix2($u){return function(Tu,Cu,Pu){const Bu=Cu[0],Lu=Cu[1];Tu[0]=Pu[0]*Bu+Pu[2]*Lu,Tu[1]=Pu[1]*Bu+Pu[3]*Lu,Tu[2]=Cu[2]}(this,this,$u),this.check()}transformByQuaternion($u){return function(Tu,Cu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Cu[0],Fu=Cu[1],Vu=Cu[2],ku=Lu*Vu-Ru*Fu,Nu=Ru*Du-Bu*Vu,Gu=Bu*Fu-Lu*Du,ju=Lu*Gu-Ru*Nu,Hu=Ru*ku-Bu*Gu,Uu=Bu*Nu-Lu*ku,zu=2*Ou;ku*=zu,Nu*=zu,Gu*=zu,ju*=2,Hu*=2,Uu*=2,Tu[0]=Du+ku+ju,Tu[1]=Fu+Nu+Hu,Tu[2]=Vu+Gu+Uu}(this,this,$u),this.check()}}var mn={throttleRequests:!0,maxRequests:5},vn=function(){function _u($u){$u===void 0&&($u={}),this.props=t$8.__assign(t$8.__assign({},mn),$u),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return _u.prototype.scheduleRequest=function($u,Tu){if(Tu===void 0&&(Tu=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has($u))return this.requestMap.get($u);var Cu={identiy:$u,priority:0,getPriority:Tu,resolve:function(){}},Pu=new Promise(function(Bu){return Cu.resolve=Bu});return this.requestQueue.push(Cu),this.requestMap.set($u,Pu),this.issueNewRequests(),Pu},_u.prototype.issueRequest=function($u){var Tu=this,Cu=$u.identiy,Pu=$u.resolve,Bu=!1;this.activeRequestCount++,Pu({done:function(){Bu||(Bu=!0,Tu.requestMap.delete(Cu),Tu.activeRequestCount--,Tu.issueNewRequests())}})},_u.prototype.issueNewRequests=function(){var $u=this;this.deferred||(this.deferred=setTimeout(function(){return $u.issueNewRequestsAsync()},0))},_u.prototype.issueNewRequestsAsync=function(){this.deferred=null;var $u=Math.max(this.props.maxRequests-this.activeRequestCount,0);if($u!==0){this.updateAllRequests();for(var Tu=0;Tu<$u;Tu++){var Cu=this.requestQueue.shift();Cu&&this.issueRequest(Cu)}}},_u.prototype.updateAllRequests=function(){for(var $u=this.requestQueue,Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];this.updateRequest(Cu)||($u.splice(Tu,1),this.requestMap.delete(Cu.identiy),Tu--)}$u.sort(function(Pu,Bu){return Pu.priority-Bu.priority})},_u.prototype.updateRequest=function($u){return $u.priority=$u.getPriority($u.identiy),!($u.priority<0)||($u.resolve(null),!1)},_u}(),yn=function(_u,$u,Tu){this.item=_u,this.previous=$u,this.next=Tu},bn=function(){function _u(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.add=function($u){var Tu=new yn($u,this.tail,null);return this.tail?(this.tail.next=Tu,this.tail=Tu):(this.head=Tu,this.tail=Tu),this._length++,Tu},_u.prototype.remove=function($u){$u.previous&&$u.next?($u.previous.next=$u.next,$u.next.previous=$u.previous):$u.previous?($u.previous.next=null,this.tail=$u.previous):$u.next?($u.next.previous=null,this.head=$u.next):(this.head=null,this.tail=null),$u.next=null,$u.previous=null,this._length--},_u.prototype.splice=function($u,Tu){$u!==Tu&&(this.remove(Tu),this.insert($u,Tu))},_u.prototype.insert=function($u,Tu){var Cu=$u.next;$u.next=Tu,this.tail===$u?this.tail=Tu:Cu.previous=Tu,Tu.next=Cu,Tu.previous=$u,this._length++},_u}(),xn=function(){function _u(){this.list=new bn,this.sentinel=this.list.add("sentinel")}return _u.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},_u.prototype.touch=function($u){var Tu=$u.cacheNode;Tu&&this.list.splice(this.sentinel,Tu)},_u.prototype.add=function($u,Tu){$u.cacheNode||($u.cacheNode=this.list.add($u),Tu&&Tu($u))},_u.prototype.unloadTile=function($u,Tu){var Cu=$u.cacheNode;Cu&&(this.list.remove(Cu),$u.cacheNode=void 0,Tu&&Tu($u))},_u.prototype.unloadTiles=function($u,Tu){for(var Cu=this.list.head;Cu!==this.sentinel&&$u();){var Pu=Cu.item;Cu=Cu.next,this.unloadTile(Pu,Tu)}},_u}();class wn extends Ji{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let $u="[";if(Wi.printRowMajor){$u+="row-major:";for(let Tu=0;Tu<this.RANK;++Tu)for(let Cu=0;Cu<this.RANK;++Cu)$u+=" ".concat(this[Cu*this.RANK+Tu])}else{$u+="column-major:";for(let Tu=0;Tu<this.ELEMENTS;++Tu)$u+=" ".concat(this[Tu])}return $u+="]",$u}getElementIndex($u,Tu){return Tu*this.RANK+$u}getElement($u,Tu){return this[Tu*this.RANK+$u]}setElement($u,Tu,Cu){return this[Tu*this.RANK+$u]=$i(Cu),this}getColumn($u,Tu=new Array(this.RANK).fill(-0)){const Cu=$u*this.RANK;for(let Pu=0;Pu<this.RANK;++Pu)Tu[Pu]=this[Cu+Pu];return Tu}setColumn($u,Tu){const Cu=$u*this.RANK;for(let Pu=0;Pu<this.RANK;++Pu)this[Cu+Pu]=Tu[Pu];return this}}function En(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=$u[3],Ru=$u[4],Ou=$u[5],Du=$u[6],Fu=$u[7],Vu=$u[8],ku=$u[9],Nu=$u[10],Gu=$u[11],ju=$u[12],Hu=$u[13],Uu=$u[14],zu=$u[15],Wu=Tu[0],Qu=Tu[1],Ku=Tu[2],Yu=Tu[3];return _u[0]=Wu*Cu+Qu*Ru+Ku*Vu+Yu*ju,_u[1]=Wu*Pu+Qu*Ou+Ku*ku+Yu*Hu,_u[2]=Wu*Bu+Qu*Du+Ku*Nu+Yu*Uu,_u[3]=Wu*Lu+Qu*Fu+Ku*Gu+Yu*zu,Wu=Tu[4],Qu=Tu[5],Ku=Tu[6],Yu=Tu[7],_u[4]=Wu*Cu+Qu*Ru+Ku*Vu+Yu*ju,_u[5]=Wu*Pu+Qu*Ou+Ku*ku+Yu*Hu,_u[6]=Wu*Bu+Qu*Du+Ku*Nu+Yu*Uu,_u[7]=Wu*Lu+Qu*Fu+Ku*Gu+Yu*zu,Wu=Tu[8],Qu=Tu[9],Ku=Tu[10],Yu=Tu[11],_u[8]=Wu*Cu+Qu*Ru+Ku*Vu+Yu*ju,_u[9]=Wu*Pu+Qu*Ou+Ku*ku+Yu*Hu,_u[10]=Wu*Bu+Qu*Du+Ku*Nu+Yu*Uu,_u[11]=Wu*Lu+Qu*Fu+Ku*Gu+Yu*zu,Wu=Tu[12],Qu=Tu[13],Ku=Tu[14],Yu=Tu[15],_u[12]=Wu*Cu+Qu*Ru+Ku*Vu+Yu*ju,_u[13]=Wu*Pu+Qu*Ou+Ku*ku+Yu*Hu,_u[14]=Wu*Bu+Qu*Du+Ku*Nu+Yu*Uu,_u[15]=Wu*Lu+Qu*Fu+Ku*Gu+Yu*zu,_u}function Mn(_u,$u,Tu){var Cu=Tu[0],Pu=Tu[1],Bu=Tu[2];return _u[0]=$u[0]*Cu,_u[1]=$u[1]*Cu,_u[2]=$u[2]*Cu,_u[3]=$u[3]*Cu,_u[4]=$u[4]*Pu,_u[5]=$u[5]*Pu,_u[6]=$u[6]*Pu,_u[7]=$u[7]*Pu,_u[8]=$u[8]*Bu,_u[9]=$u[9]*Bu,_u[10]=$u[10]*Bu,_u[11]=$u[11]*Bu,_u[12]=$u[12],_u[13]=$u[13],_u[14]=$u[14],_u[15]=$u[15],_u}(function(){var _u;_u=new on$1(2),on$1!=Float32Array&&(_u[0]=0,_u[1]=0)})(),function(){var _u;_u=new on$1(4),on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0)}();const In=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn={};class Tn extends wn{static get IDENTITY(){return Bn.IDENTITY=Bn.IDENTITY||Object.freeze(new Tn(In)),Bn.IDENTITY}static get ZERO(){return Bn.ZERO=Bn.ZERO||Object.freeze(new Tn(Sn)),Bn.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this[9]=$u[9],this[10]=$u[10],this[11]=$u[11],this[12]=$u[12],this[13]=$u[13],this[14]=$u[14],this[15]=$u[15],this.check()}set($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this[4]=Bu,this[5]=Lu,this[6]=Ru,this[7]=Ou,this[8]=Du,this[9]=Fu,this[10]=Vu,this[11]=ku,this[12]=Nu,this[13]=Gu,this[14]=ju,this[15]=Hu,this.check()}setRowMajor($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu){return this[0]=$u,this[1]=Bu,this[2]=Du,this[3]=Nu,this[4]=Tu,this[5]=Lu,this[6]=Fu,this[7]=Gu,this[8]=Cu,this[9]=Ru,this[10]=Vu,this[11]=ju,this[12]=Pu,this[13]=Ou,this[14]=ku,this[15]=Hu,this.check()}toRowMajor($u){return $u[0]=this[0],$u[1]=this[4],$u[2]=this[8],$u[3]=this[12],$u[4]=this[1],$u[5]=this[5],$u[6]=this[9],$u[7]=this[13],$u[8]=this[2],$u[9]=this[6],$u[10]=this[10],$u[11]=this[14],$u[12]=this[3],$u[13]=this[7],$u[14]=this[11],$u[15]=this[15],$u}identity(){return this.copy(In)}fromQuaternion($u){return function(Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Lu=Cu[2],Ru=Cu[3],Ou=Pu+Pu,Du=Bu+Bu,Fu=Lu+Lu,Vu=Pu*Ou,ku=Bu*Ou,Nu=Bu*Du,Gu=Lu*Ou,ju=Lu*Du,Hu=Lu*Fu,Uu=Ru*Ou,zu=Ru*Du,Wu=Ru*Fu;Tu[0]=1-Nu-Hu,Tu[1]=ku+Wu,Tu[2]=Gu-zu,Tu[3]=0,Tu[4]=ku-Wu,Tu[5]=1-Vu-Hu,Tu[6]=ju+Uu,Tu[7]=0,Tu[8]=Gu+zu,Tu[9]=ju-Uu,Tu[10]=1-Vu-Nu,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1}(this,$u),this.check()}frustum({left:$u,right:Tu,bottom:Cu,top:Pu,near:Bu,far:Lu}){return Lu===1/0?Tn._computeInfinitePerspectiveOffCenter(this,$u,Tu,Cu,Pu,Bu):function(Ru,Ou,Du,Fu,Vu,ku,Nu){var Gu=1/(Du-Ou),ju=1/(Vu-Fu),Hu=1/(ku-Nu);Ru[0]=2*ku*Gu,Ru[1]=0,Ru[2]=0,Ru[3]=0,Ru[4]=0,Ru[5]=2*ku*ju,Ru[6]=0,Ru[7]=0,Ru[8]=(Du+Ou)*Gu,Ru[9]=(Vu+Fu)*ju,Ru[10]=(Nu+ku)*Hu,Ru[11]=-1,Ru[12]=0,Ru[13]=0,Ru[14]=Nu*ku*2*Hu,Ru[15]=0}(this,$u,Tu,Cu,Pu,Bu,Lu),this.check()}static _computeInfinitePerspectiveOffCenter($u,Tu,Cu,Pu,Bu,Lu){const Ru=2*Lu/(Cu-Tu),Ou=2*Lu/(Bu-Pu),Du=(Cu+Tu)/(Cu-Tu),Fu=(Bu+Pu)/(Bu-Pu),Vu=-2*Lu;return $u[0]=Ru,$u[1]=0,$u[2]=0,$u[3]=0,$u[4]=0,$u[5]=Ou,$u[6]=0,$u[7]=0,$u[8]=Du,$u[9]=Fu,$u[10]=-1,$u[11]=-1,$u[12]=0,$u[13]=0,$u[14]=Vu,$u[15]=0,$u}lookAt($u,Tu,Cu){return arguments.length===1&&({eye:$u,center:Tu,up:Cu}=$u),function(Pu,Bu,Lu,Ru){var Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu=Bu[0],Wu=Bu[1],Qu=Bu[2],Ku=Ru[0],Yu=Ru[1],Xc=Ru[2],_d=Lu[0],_f=Lu[1],qu=Lu[2];Math.abs(zu-_d)<1e-6&&Math.abs(Wu-_f)<1e-6&&Math.abs(Qu-qu)<1e-6?function(Xu){Xu[0]=1,Xu[1]=0,Xu[2]=0,Xu[3]=0,Xu[4]=0,Xu[5]=1,Xu[6]=0,Xu[7]=0,Xu[8]=0,Xu[9]=0,Xu[10]=1,Xu[11]=0,Xu[12]=0,Xu[13]=0,Xu[14]=0,Xu[15]=1}(Pu):(Gu=zu-_d,ju=Wu-_f,Hu=Qu-qu,Ou=Yu*(Hu*=Uu=1/Math.hypot(Gu,ju,Hu))-Xc*(ju*=Uu),Du=Xc*(Gu*=Uu)-Ku*Hu,Fu=Ku*ju-Yu*Gu,(Uu=Math.hypot(Ou,Du,Fu))?(Ou*=Uu=1/Uu,Du*=Uu,Fu*=Uu):(Ou=0,Du=0,Fu=0),Vu=ju*Fu-Hu*Du,ku=Hu*Ou-Gu*Fu,Nu=Gu*Du-ju*Ou,(Uu=Math.hypot(Vu,ku,Nu))?(Vu*=Uu=1/Uu,ku*=Uu,Nu*=Uu):(Vu=0,ku=0,Nu=0),Pu[0]=Ou,Pu[1]=Vu,Pu[2]=Gu,Pu[3]=0,Pu[4]=Du,Pu[5]=ku,Pu[6]=ju,Pu[7]=0,Pu[8]=Fu,Pu[9]=Nu,Pu[10]=Hu,Pu[11]=0,Pu[12]=-(Ou*zu+Du*Wu+Fu*Qu),Pu[13]=-(Vu*zu+ku*Wu+Nu*Qu),Pu[14]=-(Gu*zu+ju*Wu+Hu*Qu),Pu[15]=1)}(this,$u,Tu=Tu||[0,0,0],Cu=Cu||[0,1,0]),this.check()}ortho({left:$u,right:Tu,bottom:Cu,top:Pu,near:Bu=.1,far:Lu=500}){return function(Ru,Ou,Du,Fu,Vu,ku,Nu){var Gu=1/(Ou-Du),ju=1/(Fu-Vu),Hu=1/(ku-Nu);Ru[0]=-2*Gu,Ru[1]=0,Ru[2]=0,Ru[3]=0,Ru[4]=0,Ru[5]=-2*ju,Ru[6]=0,Ru[7]=0,Ru[8]=0,Ru[9]=0,Ru[10]=2*Hu,Ru[11]=0,Ru[12]=(Ou+Du)*Gu,Ru[13]=(Vu+Fu)*ju,Ru[14]=(Nu+ku)*Hu,Ru[15]=1}(this,$u,Tu,Cu,Pu,Bu,Lu),this.check()}orthographic({fovy:$u=45*Math.PI/180,aspect:Tu=1,focalDistance:Cu=1,near:Pu=.1,far:Bu=500}){if($u>2*Math.PI)throw Error("radians");const Lu=$u/2,Ru=Cu*Math.tan(Lu),Ou=Ru*Tu;return new Tn().ortho({left:-Ou,right:Ou,bottom:-Ru,top:Ru,near:Pu,far:Bu})}perspective({fovy:$u,fov:Tu=45*Math.PI/180,aspect:Cu=1,near:Pu=.1,far:Bu=500}={}){if(($u=$u||Tu)>2*Math.PI)throw Error("radians");return function(Lu,Ru,Ou,Du,Fu){var Vu,ku=1/Math.tan(Ru/2);Lu[0]=ku/Ou,Lu[1]=0,Lu[2]=0,Lu[3]=0,Lu[4]=0,Lu[5]=ku,Lu[6]=0,Lu[7]=0,Lu[8]=0,Lu[9]=0,Lu[11]=-1,Lu[12]=0,Lu[13]=0,Lu[15]=0,Fu!=null&&Fu!==1/0?(Vu=1/(Du-Fu),Lu[10]=(Fu+Du)*Vu,Lu[14]=2*Fu*Du*Vu):(Lu[10]=-1,Lu[14]=-2*Du)}(this,$u,Cu,Pu,Bu),this.check()}determinant(){return Tu=($u=this)[0],Cu=$u[1],Pu=$u[2],Bu=$u[3],Lu=$u[4],Ru=$u[5],Ou=$u[6],Du=$u[7],Fu=$u[8],Vu=$u[9],ku=$u[10],Nu=$u[11],Gu=$u[12],ju=$u[13],Hu=$u[14],Uu=$u[15],(Tu*Ru-Cu*Lu)*(ku*Uu-Nu*Hu)-(Tu*Ou-Pu*Lu)*(Vu*Uu-Nu*ju)+(Tu*Du-Bu*Lu)*(Vu*Hu-ku*ju)+(Cu*Ou-Pu*Ru)*(Fu*Uu-Nu*Gu)-(Cu*Du-Bu*Ru)*(Fu*Hu-ku*Gu)+(Pu*Du-Bu*Ou)*(Fu*ju-Vu*Gu);var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu}getScale($u=[-0,-0,-0]){return $u[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),$u[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),$u[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),$u}getTranslation($u=[-0,-0,-0]){return $u[0]=this[12],$u[1]=this[13],$u[2]=this[14],$u}getRotation($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Tu=null){const Cu=this.getScale(Tu||[-0,-0,-0]),Pu=1/Cu[0],Bu=1/Cu[1],Lu=1/Cu[2];return $u[0]=this[0]*Pu,$u[1]=this[1]*Bu,$u[2]=this[2]*Lu,$u[3]=0,$u[4]=this[4]*Pu,$u[5]=this[5]*Bu,$u[6]=this[6]*Lu,$u[7]=0,$u[8]=this[8]*Pu,$u[9]=this[9]*Bu,$u[10]=this[10]*Lu,$u[11]=0,$u[12]=0,$u[13]=0,$u[14]=0,$u[15]=1,$u}getRotationMatrix3($u=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Tu=null){const Cu=this.getScale(Tu||[-0,-0,-0]),Pu=1/Cu[0],Bu=1/Cu[1],Lu=1/Cu[2];return $u[0]=this[0]*Pu,$u[1]=this[1]*Bu,$u[2]=this[2]*Lu,$u[3]=this[4]*Pu,$u[4]=this[5]*Bu,$u[5]=this[6]*Lu,$u[6]=this[8]*Pu,$u[7]=this[9]*Bu,$u[8]=this[10]*Lu,$u}transpose(){return function($u,Tu){if($u===Tu){var Cu=Tu[1],Pu=Tu[2],Bu=Tu[3],Lu=Tu[6],Ru=Tu[7],Ou=Tu[11];$u[1]=Tu[4],$u[2]=Tu[8],$u[3]=Tu[12],$u[4]=Cu,$u[6]=Tu[9],$u[7]=Tu[13],$u[8]=Pu,$u[9]=Lu,$u[11]=Tu[14],$u[12]=Bu,$u[13]=Ru,$u[14]=Ou}else $u[0]=Tu[0],$u[1]=Tu[4],$u[2]=Tu[8],$u[3]=Tu[12],$u[4]=Tu[1],$u[5]=Tu[5],$u[6]=Tu[9],$u[7]=Tu[13],$u[8]=Tu[2],$u[9]=Tu[6],$u[10]=Tu[10],$u[11]=Tu[14],$u[12]=Tu[3],$u[13]=Tu[7],$u[14]=Tu[11],$u[15]=Tu[15]}(this,this),this.check()}invert(){var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu,Wu,Qu,Ku,Yu,Xc,_d,_f,qu,Xu,Zu,_c,Ju,_h;return $u=this,Cu=(Tu=this)[0],Pu=Tu[1],Bu=Tu[2],Lu=Tu[3],Ru=Tu[4],Ou=Tu[5],Du=Tu[6],Fu=Tu[7],Vu=Tu[8],ku=Tu[9],Nu=Tu[10],Gu=Tu[11],ju=Tu[12],Hu=Tu[13],Uu=Tu[14],zu=Tu[15],(_h=(Wu=Cu*Ou-Pu*Ru)*(Ju=Nu*zu-Gu*Uu)-(Qu=Cu*Du-Bu*Ru)*(_c=ku*zu-Gu*Hu)+(Ku=Cu*Fu-Lu*Ru)*(Zu=ku*Uu-Nu*Hu)+(Yu=Pu*Du-Bu*Ou)*(Xu=Vu*zu-Gu*ju)-(Xc=Pu*Fu-Lu*Ou)*(qu=Vu*Uu-Nu*ju)+(_d=Bu*Fu-Lu*Du)*(_f=Vu*Hu-ku*ju))&&(_h=1/_h,$u[0]=(Ou*Ju-Du*_c+Fu*Zu)*_h,$u[1]=(Bu*_c-Pu*Ju-Lu*Zu)*_h,$u[2]=(Hu*_d-Uu*Xc+zu*Yu)*_h,$u[3]=(Nu*Xc-ku*_d-Gu*Yu)*_h,$u[4]=(Du*Xu-Ru*Ju-Fu*qu)*_h,$u[5]=(Cu*Ju-Bu*Xu+Lu*qu)*_h,$u[6]=(Uu*Ku-ju*_d-zu*Qu)*_h,$u[7]=(Vu*_d-Nu*Ku+Gu*Qu)*_h,$u[8]=(Ru*_c-Ou*Xu+Fu*_f)*_h,$u[9]=(Pu*Xu-Cu*_c-Lu*_f)*_h,$u[10]=(ju*Xc-Hu*Ku+zu*Wu)*_h,$u[11]=(ku*Ku-Vu*Xc-Gu*Wu)*_h,$u[12]=(Ou*qu-Ru*Zu-Du*_f)*_h,$u[13]=(Cu*Zu-Pu*qu+Bu*_f)*_h,$u[14]=(Hu*Qu-ju*Yu-Uu*Wu)*_h,$u[15]=(Vu*Yu-ku*Qu+Nu*Wu)*_h),this.check()}multiplyLeft($u){return En(this,$u,this),this.check()}multiplyRight($u){return En(this,this,$u),this.check()}rotateX($u){var Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Bu=Math.sin(Pu),Lu=Math.cos(Pu),Ru=Cu[4],Ou=Cu[5],Du=Cu[6],Fu=Cu[7],Vu=Cu[8],ku=Cu[9],Nu=Cu[10],Gu=Cu[11],Cu!==Tu&&(Tu[0]=Cu[0],Tu[1]=Cu[1],Tu[2]=Cu[2],Tu[3]=Cu[3],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[4]=Ru*Lu+Vu*Bu,Tu[5]=Ou*Lu+ku*Bu,Tu[6]=Du*Lu+Nu*Bu,Tu[7]=Fu*Lu+Gu*Bu,Tu[8]=Vu*Lu-Ru*Bu,Tu[9]=ku*Lu-Ou*Bu,Tu[10]=Nu*Lu-Du*Bu,Tu[11]=Gu*Lu-Fu*Bu,this.check()}rotateY($u){var Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Bu=Math.sin(Pu),Lu=Math.cos(Pu),Ru=Cu[0],Ou=Cu[1],Du=Cu[2],Fu=Cu[3],Vu=Cu[8],ku=Cu[9],Nu=Cu[10],Gu=Cu[11],Cu!==Tu&&(Tu[4]=Cu[4],Tu[5]=Cu[5],Tu[6]=Cu[6],Tu[7]=Cu[7],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[0]=Ru*Lu-Vu*Bu,Tu[1]=Ou*Lu-ku*Bu,Tu[2]=Du*Lu-Nu*Bu,Tu[3]=Fu*Lu-Gu*Bu,Tu[8]=Ru*Bu+Vu*Lu,Tu[9]=Ou*Bu+ku*Lu,Tu[10]=Du*Bu+Nu*Lu,Tu[11]=Fu*Bu+Gu*Lu,this.check()}rotateZ($u){var Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu;return Tu=this,Cu=this,Pu=$u,Bu=Math.sin(Pu),Lu=Math.cos(Pu),Ru=Cu[0],Ou=Cu[1],Du=Cu[2],Fu=Cu[3],Vu=Cu[4],ku=Cu[5],Nu=Cu[6],Gu=Cu[7],Cu!==Tu&&(Tu[8]=Cu[8],Tu[9]=Cu[9],Tu[10]=Cu[10],Tu[11]=Cu[11],Tu[12]=Cu[12],Tu[13]=Cu[13],Tu[14]=Cu[14],Tu[15]=Cu[15]),Tu[0]=Ru*Lu+Vu*Bu,Tu[1]=Ou*Lu+ku*Bu,Tu[2]=Du*Lu+Nu*Bu,Tu[3]=Fu*Lu+Gu*Bu,Tu[4]=Vu*Lu-Ru*Bu,Tu[5]=ku*Lu-Ou*Bu,Tu[6]=Nu*Lu-Du*Bu,Tu[7]=Gu*Lu-Fu*Bu,this.check()}rotateXYZ([$u,Tu,Cu]){return this.rotateX($u).rotateY(Tu).rotateZ(Cu)}rotateAxis($u,Tu){return function(Cu,Pu,Bu,Lu){var Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu,Wu,Qu,Ku,Yu,Xc,_d,_f,qu,Xu,Zu,_c,Ju,_h=Lu[0],ep=Lu[1],tp=Lu[2],rp=Math.hypot(_h,ep,tp);rp<1e-6||(_h*=rp=1/rp,ep*=rp,tp*=rp,Ru=Math.sin(Bu),Du=1-(Ou=Math.cos(Bu)),Fu=Pu[0],Vu=Pu[1],ku=Pu[2],Nu=Pu[3],Gu=Pu[4],ju=Pu[5],Hu=Pu[6],Uu=Pu[7],zu=Pu[8],Wu=Pu[9],Qu=Pu[10],Ku=Pu[11],Yu=_h*_h*Du+Ou,Xc=ep*_h*Du+tp*Ru,_d=tp*_h*Du-ep*Ru,_f=_h*ep*Du-tp*Ru,qu=ep*ep*Du+Ou,Xu=tp*ep*Du+_h*Ru,Zu=_h*tp*Du+ep*Ru,_c=ep*tp*Du-_h*Ru,Ju=tp*tp*Du+Ou,Cu[0]=Fu*Yu+Gu*Xc+zu*_d,Cu[1]=Vu*Yu+ju*Xc+Wu*_d,Cu[2]=ku*Yu+Hu*Xc+Qu*_d,Cu[3]=Nu*Yu+Uu*Xc+Ku*_d,Cu[4]=Fu*_f+Gu*qu+zu*Xu,Cu[5]=Vu*_f+ju*qu+Wu*Xu,Cu[6]=ku*_f+Hu*qu+Qu*Xu,Cu[7]=Nu*_f+Uu*qu+Ku*Xu,Cu[8]=Fu*Zu+Gu*_c+zu*Ju,Cu[9]=Vu*Zu+ju*_c+Wu*Ju,Cu[10]=ku*Zu+Hu*_c+Qu*Ju,Cu[11]=Nu*Zu+Uu*_c+Ku*Ju,Pu!==Cu&&(Cu[12]=Pu[12],Cu[13]=Pu[13],Cu[14]=Pu[14],Cu[15]=Pu[15]))}(this,this,$u,Tu),this.check()}scale($u){return Array.isArray($u)?Mn(this,this,$u):Mn(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Tu,Cu,Pu){var Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu=Pu[0],zu=Pu[1],Wu=Pu[2];Cu===Tu?(Tu[12]=Cu[0]*Uu+Cu[4]*zu+Cu[8]*Wu+Cu[12],Tu[13]=Cu[1]*Uu+Cu[5]*zu+Cu[9]*Wu+Cu[13],Tu[14]=Cu[2]*Uu+Cu[6]*zu+Cu[10]*Wu+Cu[14],Tu[15]=Cu[3]*Uu+Cu[7]*zu+Cu[11]*Wu+Cu[15]):(Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Cu[4],Fu=Cu[5],Vu=Cu[6],ku=Cu[7],Nu=Cu[8],Gu=Cu[9],ju=Cu[10],Hu=Cu[11],Tu[0]=Bu,Tu[1]=Lu,Tu[2]=Ru,Tu[3]=Ou,Tu[4]=Du,Tu[5]=Fu,Tu[6]=Vu,Tu[7]=ku,Tu[8]=Nu,Tu[9]=Gu,Tu[10]=ju,Tu[11]=Hu,Tu[12]=Bu*Uu+Du*zu+Nu*Wu+Cu[12],Tu[13]=Lu*Uu+Fu*zu+Gu*Wu+Cu[13],Tu[14]=Ru*Uu+Vu*zu+ju*Wu+Cu[14],Tu[15]=Ou*Uu+ku*zu+Hu*Wu+Cu[15])}(this,this,$u),this.check()}transform($u,Tu){return $u.length===4?(en(Tu=function(Cu,Pu,Bu){var Lu=Pu[0],Ru=Pu[1],Ou=Pu[2],Du=Pu[3];return Cu[0]=Bu[0]*Lu+Bu[4]*Ru+Bu[8]*Ou+Bu[12]*Du,Cu[1]=Bu[1]*Lu+Bu[5]*Ru+Bu[9]*Ou+Bu[13]*Du,Cu[2]=Bu[2]*Lu+Bu[6]*Ru+Bu[10]*Ou+Bu[14]*Du,Cu[3]=Bu[3]*Lu+Bu[7]*Ru+Bu[11]*Ou+Bu[15]*Du,Cu}(Tu||[-0,-0,-0,-0],$u,this),4),Tu):this.transformAsPoint($u,Tu)}transformAsPoint($u,Tu){const{length:Cu}=$u;switch(Cu){case 2:Pu=Tu||[-0,-0],Lu=this,Ru=(Bu=$u)[0],Ou=Bu[1],Pu[0]=Lu[0]*Ru+Lu[4]*Ou+Lu[12],Pu[1]=Lu[1]*Ru+Lu[5]*Ou+Lu[13],Tu=Pu;break;case 3:Tu=hn(Tu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}var Pu,Bu,Lu,Ru,Ou;return en(Tu,$u.length),Tu}transformAsVector($u,Tu){switch($u.length){case 2:Tu=function(Cu,Pu,Bu){const Lu=Pu[0],Ru=Pu[1],Ou=Bu[3]*Lu+Bu[7]*Ru||1;return Cu[0]=(Bu[0]*Lu+Bu[4]*Ru)/Ou,Cu[1]=(Bu[1]*Lu+Bu[5]*Ru)/Ou,Cu}(Tu||[-0,-0],$u,this);break;case 3:Tu=pn(Tu||[-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en(Tu,$u.length),Tu}makeRotationX($u){return this.identity().rotateX($u)}makeTranslation($u,Tu,Cu){return this.identity().translate([$u,Tu,Cu])}transformPoint($u,Tu){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint($u,Tu)}transformVector($u,Tu){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint($u,Tu)}transformDirection($u,Tu){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector($u,Tu)}}var Pn=new gn,Rn=new gn,kn=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,1]),Tu===void 0&&(Tu=0),this.normal=new gn,this.distance=-0,this.fromNormalDistance($u,Tu)}return _u.prototype.fromNormalDistance=function($u,Tu){return this.normal.from($u).normalize(),this.distance=Tu,this},_u.prototype.fromPointNormal=function($u,Tu){$u=Pn.from($u),this.normal.from(Tu).normalize();var Cu=-this.normal.dot($u);return this.distance=Cu,this},_u.prototype.fromCoefficients=function($u,Tu,Cu,Pu){return this.normal.set($u,Tu,Cu),this.distance=Pu,this},_u.prototype.clone=function(){return new _u(this.normal,this.distance)},_u.prototype.equals=function($u){return this.distance===$u.distance&&this.normal.equals($u.normal)},_u.prototype.getPointDistance=function($u){return this.normal.dot($u)+this.distance},_u.prototype.transform=function($u){var Tu=Rn.copy(this.normal).transformAsVector($u).normalize(),Cu=this.normal.scale(-this.distance).transform($u);return this.fromPointNormal(Cu,Tu)},_u.prototype.projectPointOntoPlane=function($u,Tu){Tu===void 0&&(Tu=[0,0,0]),$u=Pn.from($u);var Cu=this.getPointDistance($u),Pu=Rn.copy(this.normal).scale(Cu);return $u.subtract(Pu).to(Tu)},_u}(),Dn=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln=[new gn([1,0,0]),new gn([0,1,0]),new gn([0,0,1])],On=new gn,Nn=new gn,Fn=function(){function _u($u){$u===void 0&&($u=[]),this.planes=$u}return Object.defineProperty(_u,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(_u,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),_u.prototype.fromBoundingSphere=function($u){this.planes.length=2*Ln.length;for(var Tu=$u.center,Cu=$u.radius,Pu=0,Bu=0,Lu=Ln;Bu<Lu.length;Bu++){var Ru=Lu[Bu],Ou=this.planes[Pu],Du=this.planes[Pu+1];Ou||(Ou=this.planes[Pu]=new kn),Du||(Du=this.planes[Pu+1]=new kn);var Fu=On.copy(Ru).scale(-Cu).add(Tu);Ou.fromPointNormal(Fu,Ru);var Vu=On.copy(Ru).scale(Cu).add(Tu),ku=Nn.copy(Ru).negate();Du.fromPointNormal(Vu,ku),Pu+=2}return this},_u.prototype.computeVisibilityWithPlaneMask=function($u,Tu){if(Tu===_u.MASK_OUTSIDE||Tu===_u.MASK_INSIDE)return Tu;for(var Cu=_u.MASK_INSIDE,Pu=this.planes,Bu=0;Bu<this.planes.length;++Bu){var Lu=Bu<31?1<<Bu:0;if(!(Bu<31&&(Tu&Lu)==0)){var Ru=Pu[Bu],Ou=$u.intersectPlane(Ru);if(Ou===Dn.OUTSIDE)return _u.MASK_OUTSIDE;Ou===Dn.INTERSECTING&&(Cu|=Lu)}}return Cu},_u}();function Qn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=$u[3],Ru=$u[4],Ou=$u[5],Du=$u[6],Fu=$u[7],Vu=$u[8],ku=Tu[0],Nu=Tu[1],Gu=Tu[2],ju=Tu[3],Hu=Tu[4],Uu=Tu[5],zu=Tu[6],Wu=Tu[7],Qu=Tu[8];return _u[0]=ku*Cu+Nu*Lu+Gu*Du,_u[1]=ku*Pu+Nu*Ru+Gu*Fu,_u[2]=ku*Bu+Nu*Ou+Gu*Vu,_u[3]=ju*Cu+Hu*Lu+Uu*Du,_u[4]=ju*Pu+Hu*Ru+Uu*Fu,_u[5]=ju*Bu+Hu*Ou+Uu*Vu,_u[6]=zu*Cu+Wu*Lu+Qu*Du,_u[7]=zu*Pu+Wu*Ru+Qu*Fu,_u[8]=zu*Bu+Wu*Ou+Qu*Vu,_u}function Vn(_u,$u,Tu){var Cu=Tu[0],Pu=Tu[1];return _u[0]=Cu*$u[0],_u[1]=Cu*$u[1],_u[2]=Cu*$u[2],_u[3]=Pu*$u[3],_u[4]=Pu*$u[4],_u[5]=Pu*$u[5],_u[6]=$u[6],_u[7]=$u[7],_u[8]=$u[8],_u}function _n(){var _u=new on$1(4);return on$1!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0),_u[3]=1,_u}function Hn(_u,$u,Tu){Tu*=.5;var Cu=Math.sin(Tu);return _u[0]=Cu*$u[0],_u[1]=Cu*$u[1],_u[2]=Cu*$u[2],_u[3]=Math.cos(Tu),_u}function qn(_u,$u,Tu){var Cu=$u[0],Pu=$u[1],Bu=$u[2],Lu=$u[3],Ru=Tu[0],Ou=Tu[1],Du=Tu[2],Fu=Tu[3];return _u[0]=Cu*Fu+Lu*Ru+Pu*Du-Bu*Ou,_u[1]=Pu*Fu+Lu*Ou+Bu*Ru-Cu*Du,_u[2]=Bu*Fu+Lu*Du+Cu*Ou-Pu*Ru,_u[3]=Lu*Fu-Cu*Ru-Pu*Ou-Bu*Du,_u}function zn(_u,$u,Tu,Cu){var Pu,Bu,Lu,Ru,Ou,Du=$u[0],Fu=$u[1],Vu=$u[2],ku=$u[3],Nu=Tu[0],Gu=Tu[1],ju=Tu[2],Hu=Tu[3];return(Bu=Du*Nu+Fu*Gu+Vu*ju+ku*Hu)<0&&(Bu=-Bu,Nu=-Nu,Gu=-Gu,ju=-ju,Hu=-Hu),1-Bu>1e-6?(Pu=Math.acos(Bu),Lu=Math.sin(Pu),Ru=Math.sin((1-Cu)*Pu)/Lu,Ou=Math.sin(Cu*Pu)/Lu):(Ru=1-Cu,Ou=Cu),_u[0]=Ru*Du+Ou*Nu,_u[1]=Ru*Fu+Ou*Gu,_u[2]=Ru*Vu+Ou*ju,_u[3]=Ru*ku+Ou*Hu,_u}function Kn(_u,$u){var Tu,Cu=$u[0]+$u[4]+$u[8];if(Cu>0)Tu=Math.sqrt(Cu+1),_u[3]=.5*Tu,Tu=.5/Tu,_u[0]=($u[5]-$u[7])*Tu,_u[1]=($u[6]-$u[2])*Tu,_u[2]=($u[1]-$u[3])*Tu;else{var Pu=0;$u[4]>$u[0]&&(Pu=1),$u[8]>$u[3*Pu+Pu]&&(Pu=2);var Bu=(Pu+1)%3,Lu=(Pu+2)%3;Tu=Math.sqrt($u[3*Pu+Pu]-$u[3*Bu+Bu]-$u[3*Lu+Lu]+1),_u[Pu]=.5*Tu,Tu=.5/Tu,_u[3]=($u[3*Bu+Lu]-$u[3*Lu+Bu])*Tu,_u[Bu]=($u[3*Bu+Pu]+$u[3*Pu+Bu])*Tu,_u[Lu]=($u[3*Lu+Pu]+$u[3*Pu+Lu])*Tu}return _u}var Un,jn,Gn,Wn,Xn=function(_u,$u,Tu){return _u[0]=$u[0]+Tu[0],_u[1]=$u[1]+Tu[1],_u[2]=$u[2]+Tu[2],_u[3]=$u[3]+Tu[3],_u},Yn=function(_u,$u,Tu){return _u[0]=$u[0]*Tu,_u[1]=$u[1]*Tu,_u[2]=$u[2]*Tu,_u[3]=$u[3]*Tu,_u},Zn=function(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]+_u[2]*$u[2]+_u[3]*$u[3]},Jn=function(_u,$u,Tu,Cu){var Pu=$u[0],Bu=$u[1],Lu=$u[2],Ru=$u[3];return _u[0]=Pu+Cu*(Tu[0]-Pu),_u[1]=Bu+Cu*(Tu[1]-Bu),_u[2]=Lu+Cu*(Tu[2]-Lu),_u[3]=Ru+Cu*(Tu[3]-Ru),_u},$n=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3];return Math.hypot($u,Tu,Cu,Pu)},er=function(_u){var $u=_u[0],Tu=_u[1],Cu=_u[2],Pu=_u[3];return $u*$u+Tu*Tu+Cu*Cu+Pu*Pu},tr=function(_u,$u){var Tu=$u[0],Cu=$u[1],Pu=$u[2],Bu=$u[3],Lu=Tu*Tu+Cu*Cu+Pu*Pu+Bu*Bu;return Lu>0&&(Lu=1/Math.sqrt(Lu)),_u[0]=Tu*Lu,_u[1]=Cu*Lu,_u[2]=Pu*Lu,_u[3]=Bu*Lu,_u},ir=(Un=sn(),jn=an(1,0,0),Gn=an(0,1,0),function(_u,$u,Tu){var Cu=ln($u,Tu);return Cu<-.999999?(un(Un,jn,$u),dn(Un)<1e-6&&un(Un,Gn,$u),function(Pu,Bu){var Lu=Bu[0],Ru=Bu[1],Ou=Bu[2],Du=Lu*Lu+Ru*Ru+Ou*Ou;Du>0&&(Du=1/Math.sqrt(Du)),Pu[0]=Bu[0]*Du,Pu[1]=Bu[1]*Du,Pu[2]=Bu[2]*Du}(Un,Un),Hn(_u,Un,Math.PI),_u):Cu>.999999?(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=1,_u):(un(Un,$u,Tu),_u[0]=Un[0],_u[1]=Un[1],_u[2]=Un[2],_u[3]=1+Cu,tr(_u,_u))});_n(),_n(),Wn=new on$1(9),on$1!=Float32Array&&(Wn[1]=0,Wn[2]=0,Wn[3]=0,Wn[5]=0,Wn[6]=0,Wn[7]=0),Wn[0]=1,Wn[4]=1,Wn[8]=1;const nr=[0,0,0,1];class rr extends Ji{constructor($u=0,Tu=0,Cu=0,Pu=1){super(-0,-0,-0,-0),Array.isArray($u)&&arguments.length===1?this.copy($u):this.set($u,Tu,Cu,Pu)}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this.check()}set($u,Tu,Cu,Pu){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this.check()}fromMatrix3($u){return Kn(this,$u),this.check()}identity(){return function($u){$u[0]=0,$u[1]=0,$u[2]=0,$u[3]=1}(this),this.check()}fromAxisRotation($u,Tu){return Hn(this,$u,Tu),this.check()}setAxisAngle($u,Tu){return this.fromAxisRotation($u,Tu)}get ELEMENTS(){return 4}get x(){return this[0]}set x($u){this[0]=$i($u)}get y(){return this[1]}set y($u){this[1]=$i($u)}get z(){return this[2]}set z($u){this[2]=$i($u)}get w(){return this[3]}set w($u){this[3]=$i($u)}len(){return $n(this)}lengthSquared(){return er(this)}dot($u,Tu){if(Tu!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn(this,$u)}rotationTo($u,Tu){return ir(this,$u,Tu),this.check()}add($u,Tu){if(Tu!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn(this,this,$u),this.check()}calculateW(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Bu=Tu[2];$u[0]=Cu,$u[1]=Pu,$u[2]=Bu,$u[3]=Math.sqrt(Math.abs(1-Cu*Cu-Pu*Pu-Bu*Bu))}(this,this),this.check()}conjugate(){return function($u,Tu){$u[0]=-Tu[0],$u[1]=-Tu[1],$u[2]=-Tu[2],$u[3]=Tu[3]}(this,this),this.check()}invert(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Bu=Tu[2],Lu=Tu[3],Ru=Cu*Cu+Pu*Pu+Bu*Bu+Lu*Lu,Ou=Ru?1/Ru:0;$u[0]=-Cu*Ou,$u[1]=-Pu*Ou,$u[2]=-Bu*Ou,$u[3]=Lu*Ou}(this,this),this.check()}lerp($u,Tu,Cu){return Jn(this,$u,Tu,Cu),this.check()}multiplyRight($u,Tu){return Gi(!Tu),qn(this,this,$u),this.check()}multiplyLeft($u,Tu){return Gi(!Tu),qn(this,$u,this),this.check()}normalize(){const $u=this.len(),Tu=$u>0?1/$u:0;return this[0]=this[0]*Tu,this[1]=this[1]*Tu,this[2]=this[2]*Tu,this[3]=this[3]*Tu,$u===0&&(this[3]=1),this.check()}rotateX($u){return function(Tu,Cu,Pu){Pu*=.5;var Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Math.sin(Pu),Fu=Math.cos(Pu);Tu[0]=Bu*Fu+Ou*Du,Tu[1]=Lu*Fu+Ru*Du,Tu[2]=Ru*Fu-Lu*Du,Tu[3]=Ou*Fu-Bu*Du}(this,this,$u),this.check()}rotateY($u){return function(Tu,Cu,Pu){Pu*=.5;var Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Math.sin(Pu),Fu=Math.cos(Pu);Tu[0]=Bu*Fu-Ru*Du,Tu[1]=Lu*Fu+Ou*Du,Tu[2]=Ru*Fu+Bu*Du,Tu[3]=Ou*Fu-Lu*Du}(this,this,$u),this.check()}rotateZ($u){return function(Tu,Cu,Pu){Pu*=.5;var Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Math.sin(Pu),Fu=Math.cos(Pu);Tu[0]=Bu*Fu+Lu*Du,Tu[1]=Lu*Fu-Bu*Du,Tu[2]=Ru*Fu+Ou*Du,Tu[3]=Ou*Fu-Ru*Du}(this,this,$u),this.check()}scale($u){return Yn(this,this,$u),this.check()}slerp($u,Tu,Cu){switch(arguments.length){case 1:({start:$u=nr,target:Tu,ratio:Cu}=arguments[0]);break;case 2:[Tu,Cu]=arguments,$u=this}return zn(this,$u,Tu,Cu),this.check()}transformVector4($u,Tu=$u){return function(Cu,Pu,Bu){var Lu=Pu[0],Ru=Pu[1],Ou=Pu[2],Du=Bu[0],Fu=Bu[1],Vu=Bu[2],ku=Bu[3],Nu=ku*Lu+Fu*Ou-Vu*Ru,Gu=ku*Ru+Vu*Lu-Du*Ou,ju=ku*Ou+Du*Ru-Fu*Lu,Hu=-Du*Lu-Fu*Ru-Vu*Ou;Cu[0]=Nu*ku+Hu*-Du+Gu*-Vu-ju*-Fu,Cu[1]=Gu*ku+Hu*-Fu+ju*-Du-Nu*-Vu,Cu[2]=ju*ku+Hu*-Vu+Nu*-Fu-Gu*-Du,Cu[3]=Pu[3]}(Tu,$u,this),en(Tu,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle($u,Tu){return this.setAxisAngle($u,Tu)}premultiply($u,Tu){return this.multiplyLeft($u,Tu)}multiply($u,Tu){return this.multiplyRight($u,Tu)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor($u){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray($u)?this.copy($u):this.identity()}copy($u){return this[0]=$u[0],this[1]=$u[1],this[2]=$u[2],this[3]=$u[3],this[4]=$u[4],this[5]=$u[5],this[6]=$u[6],this[7]=$u[7],this[8]=$u[8],this.check()}set($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du){return this[0]=$u,this[1]=Tu,this[2]=Cu,this[3]=Pu,this[4]=Bu,this[5]=Lu,this[6]=Ru,this[7]=Ou,this[8]=Du,this.check()}setRowMajor($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du){return this[0]=$u,this[1]=Pu,this[2]=Ru,this[3]=Tu,this[4]=Bu,this[5]=Ou,this[6]=Cu,this[7]=Lu,this[8]=Du,this.check()}determinant(){return Tu=($u=this)[0],Cu=$u[1],Pu=$u[2],Bu=$u[3],Lu=$u[4],Ru=$u[5],Ou=$u[6],Du=$u[7],Fu=$u[8],Tu*(Fu*Lu-Ru*Du)+Cu*(-Fu*Bu+Ru*Ou)+Pu*(Du*Bu-Lu*Ou);var $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu}identity(){return this.copy(or)}fromQuaternion($u){return function(Tu,Cu){var Pu=Cu[0],Bu=Cu[1],Lu=Cu[2],Ru=Cu[3],Ou=Pu+Pu,Du=Bu+Bu,Fu=Lu+Lu,Vu=Pu*Ou,ku=Bu*Ou,Nu=Bu*Du,Gu=Lu*Ou,ju=Lu*Du,Hu=Lu*Fu,Uu=Ru*Ou,zu=Ru*Du,Wu=Ru*Fu;Tu[0]=1-Nu-Hu,Tu[3]=ku-Wu,Tu[6]=Gu+zu,Tu[1]=ku+Wu,Tu[4]=1-Vu-Hu,Tu[7]=ju-Uu,Tu[2]=Gu-zu,Tu[5]=ju+Uu,Tu[8]=1-Vu-Nu}(this,$u),this.check()}transpose(){return function($u,Tu){if($u===Tu){var Cu=Tu[1],Pu=Tu[2],Bu=Tu[5];$u[1]=Tu[3],$u[2]=Tu[6],$u[3]=Cu,$u[5]=Tu[7],$u[6]=Pu,$u[7]=Bu}else $u[0]=Tu[0],$u[1]=Tu[3],$u[2]=Tu[6],$u[3]=Tu[1],$u[4]=Tu[4],$u[5]=Tu[7],$u[6]=Tu[2],$u[7]=Tu[5],$u[8]=Tu[8]}(this,this),this.check()}invert(){return function($u,Tu){var Cu=Tu[0],Pu=Tu[1],Bu=Tu[2],Lu=Tu[3],Ru=Tu[4],Ou=Tu[5],Du=Tu[6],Fu=Tu[7],Vu=Tu[8],ku=Vu*Ru-Ou*Fu,Nu=-Vu*Lu+Ou*Du,Gu=Fu*Lu-Ru*Du,ju=Cu*ku+Pu*Nu+Bu*Gu;ju&&(ju=1/ju,$u[0]=ku*ju,$u[1]=(-Vu*Pu+Bu*Fu)*ju,$u[2]=(Ou*Pu-Bu*Ru)*ju,$u[3]=Nu*ju,$u[4]=(Vu*Cu-Bu*Du)*ju,$u[5]=(-Ou*Cu+Bu*Lu)*ju,$u[6]=Gu*ju,$u[7]=(-Fu*Cu+Pu*Du)*ju,$u[8]=(Ru*Cu-Pu*Lu)*ju)}(this,this),this.check()}multiplyLeft($u){return Qn(this,$u,this),this.check()}multiplyRight($u){return Qn(this,this,$u),this.check()}rotate($u){return function(Tu,Cu,Pu){var Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Cu[4],Fu=Cu[5],Vu=Cu[6],ku=Cu[7],Nu=Cu[8],Gu=Math.sin(Pu),ju=Math.cos(Pu);Tu[0]=ju*Bu+Gu*Ou,Tu[1]=ju*Lu+Gu*Du,Tu[2]=ju*Ru+Gu*Fu,Tu[3]=ju*Ou-Gu*Bu,Tu[4]=ju*Du-Gu*Lu,Tu[5]=ju*Fu-Gu*Ru,Tu[6]=Vu,Tu[7]=ku,Tu[8]=Nu}(this,this,$u),this.check()}scale($u){return Array.isArray($u)?Vn(this,this,$u):Vn(this,this,[$u,$u,$u]),this.check()}translate($u){return function(Tu,Cu,Pu){var Bu=Cu[0],Lu=Cu[1],Ru=Cu[2],Ou=Cu[3],Du=Cu[4],Fu=Cu[5],Vu=Cu[6],ku=Cu[7],Nu=Cu[8],Gu=Pu[0],ju=Pu[1];Tu[0]=Bu,Tu[1]=Lu,Tu[2]=Ru,Tu[3]=Ou,Tu[4]=Du,Tu[5]=Fu,Tu[6]=Gu*Bu+ju*Ou+Vu,Tu[7]=Gu*Lu+ju*Du+ku,Tu[8]=Gu*Ru+ju*Fu+Nu}(this,this,$u),this.check()}transform($u,Tu){switch($u.length){case 2:Tu=function(Cu,Pu,Bu){var Lu=Pu[0],Ru=Pu[1];return Cu[0]=Bu[0]*Lu+Bu[3]*Ru+Bu[6],Cu[1]=Bu[1]*Lu+Bu[4]*Ru+Bu[7],Cu}(Tu||[-0,-0],$u,this);break;case 3:Tu=cn(Tu||[-0,-0,-0],$u,this);break;case 4:Tu=function(Cu,Pu,Bu){const Lu=Pu[0],Ru=Pu[1],Ou=Pu[2];return Cu[0]=Bu[0]*Lu+Bu[3]*Ru+Bu[6]*Ou,Cu[1]=Bu[1]*Lu+Bu[4]*Ru+Bu[7]*Ou,Cu[2]=Bu[2]*Lu+Bu[5]*Ru+Bu[8]*Ou,Cu[3]=Pu[3],Cu}(Tu||[-0,-0,-0,-0],$u,this);break;default:throw new Error("Illegal vector")}return en(Tu,$u.length),Tu}transformVector($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}transformVector2($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}transformVector3($u,Tu){return nn("Matrix3.transformVector"),this.transform($u,Tu)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn,dr=new gn,pr=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,0]),Tu===void 0&&(Tu=0),this.radius=-0,this.center=new gn,this.fromCenterRadius($u,Tu)}return _u.prototype.fromCenterRadius=function($u,Tu){return this.center.from($u),this.radius=Tu,this},_u.prototype.fromCornerPoints=function($u,Tu){return Tu=cr.from(Tu),this.center=new gn().from($u).add(Tu).scale(.5),this.radius=this.center.distance(Tu),this},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.radius===$u.radius},_u.prototype.clone=function(){return new _u(this.center,this.radius)},_u.prototype.union=function($u){var Tu=this.center,Cu=this.radius,Pu=$u.center,Bu=$u.radius,Lu=cr.copy(Pu).subtract(Tu),Ru=Lu.magnitude();if(Cu>=Ru+Bu)return this.clone();if(Bu>=Ru+Cu)return $u.clone();var Ou=.5*(Cu+Ru+Bu);return dr.copy(Lu).scale((-Cu+Ou)/Ru).add(Tu),this.center.copy(dr),this.radius=Ou,this},_u.prototype.expand=function($u){var Tu=($u=cr.from($u)).subtract(this.center).magnitude();return Tu>this.radius&&(this.radius=Tu),this},_u.prototype.transform=function($u){this.center.transform($u);var Tu=function(Cu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[4],Du=Pu[5],Fu=Pu[6],Vu=Pu[8],ku=Pu[9],Nu=Pu[10];return Cu[0]=Math.hypot(Bu,Lu,Ru),Cu[1]=Math.hypot(Ou,Du,Fu),Cu[2]=Math.hypot(Vu,ku,Nu),Cu}(cr,$u);return this.radius=Math.max(Tu[0],Math.max(Tu[1],Tu[2]))*this.radius,this},_u.prototype.distanceSquaredTo=function($u){var Tu=this.distanceTo($u);return Tu*Tu},_u.prototype.distanceTo=function($u){var Tu=($u=cr.from($u)).subtract(this.center);return Math.max(0,Tu.len()-this.radius)},_u.prototype.intersectPlane=function($u){var Tu=this.center,Cu=this.radius,Pu=$u.normal.dot(Tu)+$u.distance;return Pu<-Cu?hr.OUTSIDE:Pu<Cu?hr.INTERSECTING:hr.INSIDE},_u}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar=new gn,gr=new gn,mr=new gn,vr=new gn,yr=new gn,br=new gn,xr=new gn,wr=0,Er=1,Mr=2,Ir=3,Sr=4,Cr=5,Br=6,Tr=7,Pr=8,Rr=function(){function _u($u,Tu){$u===void 0&&($u=[0,0,0]),Tu===void 0&&(Tu=[0,0,0,0,0,0,0,0,0]),this.center=new gn().from($u),this.halfAxes=new ur(Tu)}return Object.defineProperty(_u.prototype,"halfSize",{get:function(){var $u=this.halfAxes.getColumn(0),Tu=this.halfAxes.getColumn(1),Cu=this.halfAxes.getColumn(2);return[new gn($u).len(),new gn(Tu).len(),new gn(Cu).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"quaternion",{get:function(){var $u=this.halfAxes.getColumn(0),Tu=this.halfAxes.getColumn(1),Cu=this.halfAxes.getColumn(2),Pu=new gn($u).normalize(),Bu=new gn(Tu).normalize(),Lu=new gn(Cu).normalize();return new rr().fromMatrix3(new ur(t$8.__spreadArray(t$8.__spreadArray(t$8.__spreadArray([],Pu,!0),Bu,!0),Lu,!0)))},enumerable:!1,configurable:!0}),_u.prototype.fromCenterHalfSizeQuaternion=function($u,Tu,Cu){var Pu=new rr(Cu),Bu=new ur().fromQuaternion(Pu);return Bu[0]=Bu[0]*Tu[0],Bu[1]=Bu[1]*Tu[0],Bu[2]=Bu[2]*Tu[0],Bu[3]=Bu[3]*Tu[1],Bu[4]=Bu[4]*Tu[1],Bu[5]=Bu[5]*Tu[1],Bu[6]=Bu[6]*Tu[2],Bu[7]=Bu[7]*Tu[2],Bu[8]=Bu[8]*Tu[2],this.center=new gn().from($u),this.halfAxes=Bu,this},_u.prototype.clone=function(){return new _u(this.center,this.halfAxes)},_u.prototype.equals=function($u){return this===$u||Boolean($u)&&this.center.equals($u.center)&&this.halfAxes.equals($u.halfAxes)},_u.prototype.getBoundingSphere=function($u){$u===void 0&&($u=new pr);var Tu=this.halfAxes,Cu=Tu.getColumn(0,mr),Pu=Tu.getColumn(1,vr),Bu=Tu.getColumn(2,yr),Lu=Ar.copy(Cu).add(Pu).add(Bu);return $u.center.copy(this.center),$u.radius=Lu.magnitude(),$u},_u.prototype.intersectPlane=function($u){var Tu=this.center,Cu=$u.normal,Pu=this.halfAxes,Bu=Cu.x,Lu=Cu.y,Ru=Cu.z,Ou=Math.abs(Bu*Pu[wr]+Lu*Pu[Er]+Ru*Pu[Mr])+Math.abs(Bu*Pu[Ir]+Lu*Pu[Sr]+Ru*Pu[Cr])+Math.abs(Bu*Pu[Br]+Lu*Pu[Tr]+Ru*Pu[Pr]),Du=Cu.dot(Tu)+$u.distance;return Du<=-Ou?fr.OUTSIDE:Du>=Ou?fr.INSIDE:fr.INTERSECTING},_u.prototype.distanceTo=function($u){return Math.sqrt(this.distanceSquaredTo($u))},_u.prototype.distanceSquaredTo=function($u){var Tu=gr.from($u).subtract(this.center),Cu=this.halfAxes,Pu=Cu.getColumn(0,mr),Bu=Cu.getColumn(1,vr),Lu=Cu.getColumn(2,yr),Ru=Pu.magnitude(),Ou=Bu.magnitude(),Du=Lu.magnitude();Pu.normalize(),Bu.normalize(),Lu.normalize();var Fu,Vu=0;return(Fu=Math.abs(Tu.dot(Pu))-Ru)>0&&(Vu+=Fu*Fu),(Fu=Math.abs(Tu.dot(Bu))-Ou)>0&&(Vu+=Fu*Fu),(Fu=Math.abs(Tu.dot(Lu))-Du)>0&&(Vu+=Fu*Fu),Vu},_u.prototype.computePlaneDistances=function($u,Tu,Cu){Cu===void 0&&(Cu=[-0,-0]);var Pu=Number.POSITIVE_INFINITY,Bu=Number.NEGATIVE_INFINITY,Lu=this.center,Ru=this.halfAxes,Ou=Ru.getColumn(0,mr),Du=Ru.getColumn(1,vr),Fu=Ru.getColumn(2,yr),Vu=br.copy(Ou).add(Du).add(Fu).add(Lu),ku=xr.copy(Vu).subtract($u),Nu=Tu.dot(ku);return Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Vu.copy(Lu).add(Ou).add(Du).subtract(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Vu.copy(Lu).add(Ou).subtract(Du).add(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Vu.copy(Lu).add(Ou).subtract(Du).subtract(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Lu.copy(Vu).subtract(Ou).add(Du).add(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Lu.copy(Vu).subtract(Ou).add(Du).subtract(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Lu.copy(Vu).subtract(Ou).subtract(Du).add(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Lu.copy(Vu).subtract(Ou).subtract(Du).subtract(Fu),ku.copy(Vu).subtract($u),Nu=Tu.dot(ku),Pu=Math.min(Nu,Pu),Bu=Math.max(Nu,Bu),Cu[0]=Pu,Cu[1]=Bu,Cu},_u.prototype.transform=function($u){this.center.transformAsPoint($u);var Tu=this.halfAxes.getColumn(0,mr);Tu.transformAsPoint($u);var Cu=this.halfAxes.getColumn(1,vr);Cu.transformAsPoint($u);var Pu=this.halfAxes.getColumn(2,yr);return Pu.transformAsPoint($u),this.halfAxes=new ur(t$8.__spreadArray(t$8.__spreadArray(t$8.__spreadArray([],Tu,!0),Cu,!0),Pu,!0)),this},_u}();function kr(_u,$u){if(_u.box)return function(Tu,Cu){var Pu=new gn(Tu[0],Tu[1],Tu[2]);Cu.transform(Pu,Pu);var Bu=[];if(Tu.length===10){var Lu=Tu.slice(3,6),Ru=new rr;Ru.fromArray(Tu,6);var Ou=new gn([1,0,0]),Du=new gn([0,1,0]),Fu=new gn([0,0,1]);Ou.transformByQuaternion(Ru),Ou.scale(Lu[0]),Du.transformByQuaternion(Ru),Du.scale(Lu[1]),Fu.transformByQuaternion(Ru),Fu.scale(Lu[2]),Bu=t$8.__spreadArray(t$8.__spreadArray(t$8.__spreadArray([],Ou.toArray(),!0),Du.toArray(),!0),Fu.toArray(),!0)}else Bu=t$8.__spreadArray(t$8.__spreadArray(t$8.__spreadArray([],Tu.slice(3,6),!0),Tu.slice(6,9),!0),Tu.slice(9,12),!0);var Vu=Cu.transformAsVector(Bu.slice(0,3),[0,0,0]),ku=Cu.transformAsVector(Bu.slice(3,6),[0,0,0]),Nu=Cu.transformAsVector(Bu.slice(6,9),[0,0,0]),Gu=new ur([Vu[0],Vu[1],Vu[2],ku[0],ku[1],ku[2],Nu[0],Nu[1],Nu[2]]);return new Rr(Pu,Gu)}(_u.box,$u);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr(_u,$u){if(_u.dynamicScreenSpaceError&&_u.dynamicScreenSpaceErrorComputedDensity){var Tu=_u.dynamicScreenSpaceErrorComputedDensity,Cu=_u.dynamicScreenSpaceErrorFactor;return function(Pu,Bu){var Lu=Pu*Bu;return 1-Math.exp(-Lu*Lu)}($u,Tu)*Cu}return 0}function Lr(_u,$u,Tu){var Cu=new TextDecoder("utf8"),Pu=new Uint8Array(_u,$u,Tu);return Cu.decode(Pu)}function Or(_u,$u,Tu){return Tu===void 0&&(Tu=0),Tu=function(Cu,Pu,Bu){Bu===void 0&&(Bu=0);var Lu=Cu.header,Ru=Lu.featureTableJsonByteLength,Ou=Lu.featureTableBinaryByteLength,Du=Lu.batchLength;if(Cu.featureTableJson={BATCH_LENGTH:Du||0},Ru>0){var Fu=Lr(Pu,Bu,Ru);Cu.featureTableJson=JSON.parse(Fu)}return Bu+=Ru,Cu.featureTableBinary=new Uint8Array(Pu,Bu,Ou),Bu+=Ou}(_u,$u,Tu),Tu=function(Cu,Pu,Bu){Bu===void 0&&(Bu=0);var Lu=Cu.header,Ru=Lu.batchTableJsonByteLength,Ou=Lu.batchTableBinaryByteLength;if(Ru>0){var Du=Lr(Pu,Bu,Ru);Cu.batchTableJson=JSON.parse(Du),Bu+=Ru,Ou>0&&(Cu.batchTableBinary=new Uint8Array(Pu,Bu,Ou),Cu.batchTableBinary=new Uint8Array(Cu.batchTableBinary),Bu+=Ou)}return Bu}(_u,$u,Tu)}function Nr(_u,$u,Tu){Tu===void 0&&(Tu=0);var Cu=_u.byteOffset+_u.byteLength-Tu;if(Cu===0)throw new Error("glTF byte length must be greater than 0.");return _u.rotateYtoZ=!0,_u.gltfUpAxis="Y",_u.gltfArrayBuffer=function(Pu,Bu,Lu){var Ru=Lu!==void 0?new Uint8Array(Pu).subarray(Bu,Bu+Lu):new Uint8Array(Pu).subarray(Bu);return new Uint8Array(Ru).buffer}($u,Tu,Cu),_u.gltfByteOffset=0,_u.gltfByteLength=Cu,Tu%4==0||console.warn("".concat(_u.type,": embedded glb is not aligned to a 4-byte boundary.")),_u.byteOffset+_u.byteLength}function Fr(_u,$u,Tu){Tu=function(Pu,Bu,Lu){Lu===void 0&&(Lu=0);var Ru=new DataView(Bu);if(Pu.magic=Ru.getUint32(Lu,!0),Lu+=4,Pu.version=Ru.getUint32(Lu,!0),Lu+=4,Pu.byteLength=Ru.getUint32(Lu,!0),Lu+=4,Pu.version!==1)throw new Error("3D Tile Version ".concat(Pu.version," not supported"));return Lu}(_u,$u,Tu),Tu=function(Pu,Bu,Lu){Lu===void 0&&(Lu=0);var Ru,Ou=new DataView(Bu);Pu.header=Pu.header||{};var Du=Ou.getUint32(Lu,!0);Lu+=4;var Fu=Ou.getUint32(Lu,!0);Lu+=4;var Vu=Ou.getUint32(Lu,!0);Lu+=4;var ku=Ou.getUint32(Lu,!0);return Lu+=4,Vu>=570425344?(Lu-=8,Ru=Du,Vu=Fu,ku=0,Du=0,Fu=0,console.warn("b3dm tile in legacy format.")):ku>=570425344&&(Lu-=4,Ru=Vu,Vu=Du,ku=Fu,Du=0,Fu=0,console.warn("b3dm tile in legacy format.")),Pu.header.featureTableJsonByteLength=Du,Pu.header.featureTableBinaryByteLength=Fu,Pu.header.batchTableJsonByteLength=Vu,Pu.header.batchTableBinaryByteLength=ku,Pu.header.batchLength=Ru,Lu}(_u,$u,Tu),Tu=Nr(_u,$u,Tu=Or(_u,$u,Tu));var Cu=_u.featureTableJson.RTC_CENTER;return Cu&&Number.isFinite(Cu.byteOffset)&&(_u.rtcCenter=new Float32Array(_u.featureTableBinary.buffer,_u.featureTableBinary.buffer.byteOffset+Cu.byteOffset,3)),Tu}var Qr=function(){function _u($u,Tu,Cu){this.header=Tu,this.tileset=$u,this.parent=Cu,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Pu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():$u.modelMatrix.clone();this.computedTransform=new Tn(Pu).multiplyRight(this.transform),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(_u.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var $u=this.tileset.b3dmMapping.b3dm_base_url;$u=/\/$/.test($u)?$u:$u+"/";var Tu=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Tu=/^\//.test(Tu)?Tu.slice(1):Tu;var Cu=/^https?:/.test(Tu)?Tu:$u+Tu;if(Cu.indexOf("http")!==-1&&Cu.indexOf("https")===-1){var Pu=Cu.slice(4);Cu="https"+Pu}return Cu}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),_u.prototype.getScreenSpaceError=function($u,Tu){if(this.tileset.type==="TILES3D")return function(Cu,Pu,Bu){var Lu=Cu.tileset,Ru=Cu.parent&&Cu.parent.lodMetricValue||Cu.lodMetricValue,Ou=Bu?Ru:Cu.lodMetricValue;if(Ou===0)return 0;var Du=Math.max(Cu.distanceToCamera,1e-7),Fu=Lu.options.viewDistanceScale,Vu=Ou*Pu.height*Fu/(Du*Pu.sseDenominator);return Vu-Dr(Lu,Du)}(this,$u,Tu);throw new Error("Unsupported tileset type")},_u.prototype.getPriority=function(){var $u=this.tileset.traverser,Tu=$u.options.skipLevelOfDetail,Cu=this.refine==="ADD"||Tu;if(Cu&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Pu=this.parent,Bu=Pu&&(!Cu||this.screenSpaceError===0)?Pu.screenSpaceError:this.screenSpaceError,Lu=$u.root?$u.root.screenSpaceError:0;return Math.max(Lu-Bu,0)},_u.prototype.loadContent=function(){var $u=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return $u.getPriority()}).then(function(Tu){return Tu?it$1($u.contentUrl,{responseType:"arraybuffer",allowHosts:$u.tileset.options.allowHosts,networkSubscribe:$u.tileset.options.networkSubscribe,requestProxy:$u.tileset.options.requestProxy}).then(function(Cu){return Cu.body}).then(function(Cu){return Fr(Pu={byteOffset:0,type:"b3dm"},Cu,Pu.byteOffset),Pu;var Pu}).then(function(Cu){return $u.content=Cu,$u.tileset.options.contentLoader($u).then(function(){return $u.contentState="READY",Tu.done(),!0})}).catch(function(Cu){return $u.contentState="FAILED",Tu.done(),Promise.reject(Cu)}):($u.contentState="UNLOADED",Promise.resolve(!1))}))},_u.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},_u.prototype.updateVisibility=function($u){if(this.frameNumber!==$u.frameNumber){var Tu=this.parent,Cu=Tu?Tu.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Pu=Tu?Tu.computedTransform:this.tileset.modelMatrix;this.updateTransform(Pu),this.distanceToCamera=this.distanceToTile($u),this.screenSpaceError=this.getScreenSpaceError($u,!1),this.visibilityPlaneMask=this.visibility($u,Cu),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=$u.frameNumber}},_u.prototype.visibility=function($u,Tu){return $u.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Tu)},_u.prototype.distanceToTile=function($u){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo($u.camera.position),0))},_u.prototype.updateTransform=function($u){$u===void 0&&($u=new Tn);var Tu=$u.clone().multiplyRight(this.transform);!Tu.equals(this.computedTransform)&&(this.computedTransform.copy(Tu),this.boundingVolume=kr(this.header.boundingVolume,this.computedTransform))},_u}(),Vr=function(){function _u(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(_u.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),_u.prototype.get=function($u){return this.array[$u]},_u.prototype.set=function($u,Tu){$u>=this.length&&(this._length=$u+1),this.map.has(this.array[$u])&&this.map.delete(this.array[$u]),this.array[$u]=Tu,this.map.set(Tu,$u)},_u.prototype.delete=function($u){var Tu=this.map.get($u);Tu!==void 0&&Tu>=0&&(this.array.splice(Tu,1),this.map.delete($u),this._length--)},_u.prototype.push=function($u){if(!this.map.has($u)){var Tu=this._length++;this.array[Tu]=$u,this.map.set($u,Tu)}},_u.prototype.pop=function(){var $u=this.array[--this._length];return this.map.delete($u),$u},_u.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},_u.prototype.find=function($u){return this.map.has($u)},_u}(),_r=function(){function _u($u){this.options=$u,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return _u.prototype.traverse=function($u,Tu){this.root=$u,this.reset(),this.updateTile($u,Tu),this._frameNumber=Tu.frameNumber,this.executeTraversal($u,Tu)},_u.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},_u.prototype.executeTraversal=function($u,Tu){var Cu=this._traversalStack;for($u.selectionDepth=1,Cu.push($u);Cu.length>0;){var Pu=Cu.pop(),Bu=!1;if(this.canTraverse(Pu,Tu)){this.updateChildTiles(Pu,Tu);var Lu=Pu.hasRenderContent?Pu.selectionDepth+1:Pu.selectionDepth;Bu=this.updateAndPushChildren(Pu,Tu,Cu,Lu)}var Ru=Pu.parent,Ou=Boolean(!Ru||Ru.shouldRefine),Du=!Bu;Pu.hasRenderContent?Pu.refine==="ADD"?(this.loadTile(Pu,Tu),this.selectTile(Pu,Tu)):Pu.refine==="REPLACE"&&(this.loadTile(Pu,Tu),Du&&this.selectTile(Pu,Tu)):(this.emptyTiles[Pu.id]=Pu,this.loadTile(Pu,Tu),Du&&this.selectTile(Pu,Tu)),this.touchTile(Pu,Tu),Pu.shouldRefine=Bu&&Ou}this.options.onTraversalEnd(Tu)},_u.prototype.updateChildTiles=function($u,Tu){for(var Cu=0,Pu=$u.children;Cu<Pu.length;Cu++){var Bu=Pu[Cu];this.updateTile(Bu,Tu)}return!0},_u.prototype.updateAndPushChildren=function($u,Tu,Cu,Pu){var Bu=this.options,Lu=Bu.loadSiblings,Ru=Bu.skipLevelOfDetail,Ou=$u.children;Ou.sort(this.compareDistanceToCamera.bind(this));for(var Du=$u.refine==="REPLACE"&&$u.hasRenderContent&&!Ru,Fu=!1,Vu=!0,ku=0,Nu=Ou;ku<Nu.length;ku++){var Gu=Nu[ku];if(Gu.selectionDepth=Pu,Gu.visible?(Cu.find(Gu)&&Cu.delete(Gu),Cu.push(Gu),Fu=!0):(Du||Lu)&&(this.loadTile(Gu,Tu),this.touchTile(Gu,Tu)),Du){var ju=void 0;if(ju=Gu.hasRenderContent?Gu.contentAvailable:this.executeEmptyTraversal(Gu,Tu),!(Vu=Vu&&ju))return!1}}return Fu||(Vu=!1),Vu},_u.prototype.updateTile=function($u,Tu){this.updateTileVisibility($u,Tu)},_u.prototype.selectTile=function($u,Tu){this.shouldSelectTile($u)&&($u.selectedFrameNumber=Tu.frameNumber,this.selectedTiles[$u.id]=$u)},_u.prototype.loadTile=function($u,Tu){this.shouldLoadTile($u)&&($u.requestedFrameNumber=Tu.frameNumber,this.requestedTiles[$u.id]=$u)},_u.prototype.touchTile=function($u,Tu){$u.tileset.cache.touch($u),$u.touchedFrameNumber=Tu.frameNumber},_u.prototype.canTraverse=function($u,Tu,Cu,Pu){return Cu===void 0&&(Cu=!1),Pu===void 0&&(Pu=!1),!!$u.hasChildren&&!(!Pu&&!$u.visible)&&this.shouldRefine($u,Tu,Cu)},_u.prototype.shouldLoadTile=function($u){var Tu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.hasUnloadedContent&&Tu},_u.prototype.shouldSelectTile=function($u){var Tu=!this.options.maxDepth||$u.depth<=this.options.maxDepth;return $u.contentAvailable&&!this.options.skipLevelOfDetail&&Tu},_u.prototype.shouldRefine=function($u,Tu,Cu){var Pu=$u.screenSpaceError;return Cu&&(Pu=$u.getScreenSpaceError(Tu,!0)),Pu>this.options.maxScreenSpaceError},_u.prototype.updateTileVisibility=function($u,Tu){if($u.updateVisibility(Tu),$u.visible){var Cu=$u.children.length>0;this.meetsScreenSpaceErrorEarly($u,Tu)?$u.visible=!1:$u.refine!=="REPLACE"||!Cu||this.anyChildrenVisible($u,Tu)||($u.visible=!1)}},_u.prototype.meetsScreenSpaceErrorEarly=function($u,Tu){var Cu=$u.parent;return!(!Cu||Cu.refine!=="ADD")&&!this.shouldRefine($u,Tu,!0)},_u.prototype.compareDistanceToCamera=function($u,Tu){return Tu.distanceToCamera===0&&$u.distanceToCamera===0?Tu.centerZDepth-$u.centerZDepth:Tu.distanceToCamera-$u.distanceToCamera},_u.prototype.anyChildrenVisible=function($u,Tu){for(var Cu=!1,Pu=0,Bu=$u.children;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Lu.updateVisibility(Tu),Cu=Cu||Lu.visible}return Cu},_u.prototype.everyChildrenVisibleIsLoaded=function($u){for(var Tu=!0,Cu=0,Pu=$u.children;Cu<Pu.length;Cu++){var Bu=Pu[Cu];Bu.visible&&Bu.contentState!=="READY"&&(Tu=!1)}return Tu},_u.prototype.executeEmptyTraversal=function($u,Tu){var Cu=!0,Pu=this._emptyTraversalStack;for(Pu.push($u);Pu.length>0&&Cu;){var Bu=Pu.pop();if(this.updateTile(Bu,Tu),Bu.visible||this.loadTile(Bu,Tu),this.touchTile(Bu,Tu),!Bu.hasRenderContent&&this.canTraverse(Bu,Tu,!1,!0))for(var Lu=0,Ru=Bu.children;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Pu.find(Ou)&&Pu.delete(Ou),Pu.push(Ou)}else Bu.contentAvailable||(Cu=!1)}return Cu},_u}();function Hr(_u){for(var $u=[],Tu=0,Cu=Object.keys(_u);Tu<Cu.length;Tu++){var Pu=Cu[Tu];$u.push(_u[Pu])}return $u}var qr=function(){function _u($u,Tu){var Cu=this;this.rawJson=$u,this.b3dmMapping=$u.b3dmMapping,this.options=Tu,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(Fu){return Cu.onTraversalEnd(Fu)}}),this.cache=new xn,this.requestScheduler=new vn({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,$u.root);for(var Pu=[this.root];Pu.length>0;)for(var Bu=Pu.pop(),Lu=0,Ru=Bu.header.children||[];Lu<Ru.length;Lu++){var Ou=Ru[Lu],Du=new Qr(this,Ou,Bu);Du.depth=Bu.depth+1,Bu.children.push(Du),Pu.push(Du)}}return Object.defineProperty(_u.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(_u.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),_u.prototype.reset=function(){for(var $u=[this.root];$u.length>0;){for(var Tu=$u.pop(),Cu=0,Pu=Tu.children;Cu<Pu.length;Cu++){var Bu=Pu[Cu];$u.push(Bu)}this.cache.unloadTile(Tu),this.unloadTile(Tu)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},_u.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},_u.prototype.onTraversalEnd=function($u){var Tu=this,Cu=new gn($u.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function(Du,Fu){return Du.boundingVolume.center.distanceTo(Cu)-Fu.boundingVolume.center.distanceTo(Cu)});for(var Pu=0,Bu=this.selectedTiles;Pu<Bu.length;Pu++){var Lu=Bu[Pu];this._tiles[Lu.id]=Lu}for(var Ru=0,Ou=this.requestedTiles;Ru<Ou.length;Ru++)(Lu=Ou[Ru]).contentUnloaded&&this.loadTile(Lu);this.cache.unloadTiles(function(){return Tu.memoryUsageInBytes>1024*Tu.maxMemoryUsage*1024},function(Du){return Tu.unloadTile(Du)})},_u.prototype.loadTile=function($u){var Tu=this;this.pendingCount++,$u.loadContent().catch(function(Cu){var Pu=Cu.message||Cu.toString();return console.error("A 3D tile failed to load: ".concat($u.id," ").concat(Pu)),Tu.options.onTileError($u,Pu),!1}).then(function(Cu){Tu.pendingCount--,Cu&&(Tu.cache.add($u,function(){$u.content&&(Tu.memoryUsageInBytes+=$u.content.byteLength||0)}),Tu.options.onTileLoad($u))})},_u.prototype.unloadTile=function($u){this.memoryUsageInBytes-=$u.content&&$u.content.byteLength||0,this.options.onTileUnload($u),$u.unloadContent()},_u}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(_u,$u){var Tu;return _u.content&&(_u.contentUrl="".concat($u,"/").concat(_u.content.uri||_u.content.url)),_u.id=(Tu=_u.contentUrl)!==null&&Tu!==void 0?Tu:"empty:"+Kr(),_u.lodMetricType="geometricError",_u.lodMetricValue=_u.geometricError,_u.transformMatrix=_u.transform,_u.type=_u.contentUrl?"SCENEGRAPH":"EMPTY",_u.refine=function(Cu){switch(Cu){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Cu," is not supported."))}}(_u.refine),_u}function jr(_u,$u){var Tu,Cu=JSON.parse(JSON.stringify(_u));return Cu.basePath=$u,Cu.root=function(Pu,Bu){Pu=Ur(Pu,Bu);var Lu=[];for(Lu.push(Pu);Lu.length>0;)for(var Ru=0,Ou=(Lu.pop()||{}).children||[];Ru<Ou.length;Ru++){var Du=Ou[Ru];Ur(Du,Bu),Lu.push(Du)}return Pu}(Cu.root,$u),Cu.type="TILES3D",Cu.lodMetricType="geometricError",Cu.lodMetricValue=((Tu=Cu.root)===null||Tu===void 0?void 0:Tu.lodMetricValue)||0,Cu}var Gr=new(function(){function _u(ap){e$6.Loader.call(this,ap),this.dracoLoader=null,this.ddsLoader=null}function $u(){var ap={};return{get:function(ip){return ap[ip]},add:function(ip,hp){ap[ip]=hp},remove:function(ip){delete ap[ip]},removeAll:function(){ap={}}}}_u.prototype=Object.assign(Object.create(e$6.Loader.prototype),{constructor:_u,load:function(ap,ip,hp,up){var pp,gp=this;pp=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$6.LoaderUtils.extractUrlBase(ap),gp.manager.itemStart(ap);var Ap=function(Dp){up?up(Dp):console.error(Dp),gp.manager.itemError(ap),gp.manager.itemEnd(ap)},Mp=new e$6.FileLoader(gp.manager);Mp.setPath(this.path),Mp.setResponseType("arraybuffer"),Mp.setRequestHeader(this.requestHeader),gp.crossOrigin==="use-credentials"&&Mp.setWithCredentials(!0),Mp.load(ap,function(Dp){try{gp.parse(Dp,pp,function($p){ip($p),gp.manager.itemEnd(ap)},Ap)}catch($p){Ap($p)}},hp,Ap)},setDRACOLoader:function(ap){return this.dracoLoader=ap,this},setDDSLoader:function(ap){return this.ddsLoader=ap,this},parse:function(ap,ip,hp,up){var pp,gp={};if(typeof ap=="string")pp=ap;else if(e$6.LoaderUtils.decodeText(new Uint8Array(ap,0,4))===Ru){try{gp[Tu.KHR_BINARY_GLTF]=new Fu(ap)}catch(sp){return void(up&&up(sp))}pp=gp[Tu.KHR_BINARY_GLTF].content}else pp=e$6.LoaderUtils.decodeText(new Uint8Array(ap));var Ap=JSON.parse(pp);if(Ap.asset===void 0||Ap.asset.version[0]<2)up&&up(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Ap.extensionsUsed)for(var Mp=0;Mp<Ap.extensionsUsed.length;++Mp){var Dp=Ap.extensionsUsed[Mp],$p=Ap.extensionsRequired||[];switch(Dp){case Tu.KHR_LIGHTS_PUNCTUAL:gp[Dp]=new Pu(Ap);break;case Tu.KHR_MATERIALS_CLEARCOAT:gp[Dp]=new Lu;break;case Tu.KHR_MATERIALS_UNLIT:gp[Dp]=new Bu;break;case Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:gp[Dp]=new Gu;break;case Tu.KHR_DRACO_MESH_COMPRESSION:gp[Dp]=new Vu(Ap,this.dracoLoader);break;case Tu.MSFT_TEXTURE_DDS:gp[Dp]=new Cu(this.ddsLoader);break;case Tu.KHR_TEXTURE_TRANSFORM:gp[Dp]=new ku;break;case Tu.KHR_MESH_QUANTIZATION:gp[Dp]=new ju;break;default:$p.indexOf(Dp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Dp+'".')}}var np=new _p(Ap,gp,{path:ip||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});np.fileLoader.setRequestHeader(this.requestHeader),np.parse(hp,up)}}});var Tu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Cu(ap){if(!ap)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Tu.MSFT_TEXTURE_DDS,this.ddsLoader=ap}function Pu(ap){this.name=Tu.KHR_LIGHTS_PUNCTUAL;var ip=ap.extensions&&ap.extensions[Tu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=ip.lights||[]}function Bu(){this.name=Tu.KHR_MATERIALS_UNLIT}function Lu(){this.name=Tu.KHR_MATERIALS_CLEARCOAT}Pu.prototype.loadLight=function(ap){var ip,hp=this.lightDefs[ap],up=new e$6.Color(16777215);hp.color!==void 0&&up.fromArray(hp.color);var pp=hp.range!==void 0?hp.range:0;switch(hp.type){case"directional":(ip=new e$6.DirectionalLight(up)).target.position.set(0,0,-1),ip.add(ip.target);break;case"point":(ip=new e$6.PointLight(up)).distance=pp;break;case"spot":(ip=new e$6.SpotLight(up)).distance=pp,hp.spot=hp.spot||{},hp.spot.innerConeAngle=hp.spot.innerConeAngle!==void 0?hp.spot.innerConeAngle:0,hp.spot.outerConeAngle=hp.spot.outerConeAngle!==void 0?hp.spot.outerConeAngle:Math.PI/4,ip.angle=hp.spot.outerConeAngle,ip.penumbra=1-hp.spot.innerConeAngle/hp.spot.outerConeAngle,ip.target.position.set(0,0,-1),ip.add(ip.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+hp.type+'".')}return ip.position.set(0,0,0),ip.decay=2,hp.intensity!==void 0&&(ip.intensity=hp.intensity),ip.name=hp.name||"light_"+ap,Promise.resolve(ip)},Bu.prototype.getMaterialType=function(){return e$6.MeshBasicMaterial},Bu.prototype.extendParams=function(ap,ip,hp){var up=[];ap.color=new e$6.Color(1,1,1),ap.opacity=1;var pp=ip.pbrMetallicRoughness;if(pp){if(Array.isArray(pp.baseColorFactor)){var gp=pp.baseColorFactor;ap.color.fromArray(gp),ap.opacity=gp[3]}pp.baseColorTexture!==void 0&&up.push(hp.assignTexture(ap,"map",pp.baseColorTexture))}return Promise.all(up)},Lu.prototype.getMaterialType=function(){return e$6.MeshPhysicalMaterial},Lu.prototype.extendParams=function(ap,ip,hp){var up=[],pp=ip.extensions[this.name];if(pp.clearcoatFactor!==void 0&&(ap.clearcoat=pp.clearcoatFactor),pp.clearcoatTexture!==void 0&&up.push(hp.assignTexture(ap,"clearcoatMap",pp.clearcoatTexture)),pp.clearcoatRoughnessFactor!==void 0&&(ap.clearcoatRoughness=pp.clearcoatRoughnessFactor),pp.clearcoatRoughnessTexture!==void 0&&up.push(hp.assignTexture(ap,"clearcoatRoughnessMap",pp.clearcoatRoughnessTexture)),pp.clearcoatNormalTexture!==void 0&&(up.push(hp.assignTexture(ap,"clearcoatNormalMap",pp.clearcoatNormalTexture)),pp.clearcoatNormalTexture.scale!==void 0)){var gp=pp.clearcoatNormalTexture.scale;ap.clearcoatNormalScale=new e$6.Vector2(gp,gp)}return Promise.all(up)};var Ru="glTF",Ou=1313821514,Du=5130562;function Fu(ap){this.name=Tu.KHR_BINARY_GLTF,this.content=null,this.body=null;var ip=new DataView(ap,0,12);if(this.header={magic:e$6.LoaderUtils.decodeText(new Uint8Array(ap.slice(0,4))),version:ip.getUint32(4,!0),length:ip.getUint32(8,!0)},this.header.magic!==Ru)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var hp=new DataView(ap,12),up=0;up<hp.byteLength;){var pp=hp.getUint32(up,!0);up+=4;var gp=hp.getUint32(up,!0);if(up+=4,gp===Ou){var Ap=new Uint8Array(ap,12+up,pp);this.content=e$6.LoaderUtils.decodeText(Ap)}else if(gp===Du){var Mp=12+up;this.body=ap.slice(Mp,Mp+pp)}up+=pp}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function Vu(ap,ip){if(!ip)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tu.KHR_DRACO_MESH_COMPRESSION,this.json=ap,this.dracoLoader=ip,this.dracoLoader.preload()}function ku(){this.name=Tu.KHR_TEXTURE_TRANSFORM}function Nu(ap){e$6.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var ip=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),hp=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),up=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),pp=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),gp=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Ap={specular:{value:new e$6.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Ap,this.onBeforeCompile=function(Mp){for(var Dp in Ap)Mp.uniforms[Dp]=Ap[Dp];Mp.fragmentShader=Mp.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Mp.fragmentShader=Mp.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Mp.fragmentShader=Mp.fragmentShader.replace("#include <roughnessmap_pars_fragment>",ip),Mp.fragmentShader=Mp.fragmentShader.replace("#include <metalnessmap_pars_fragment>",hp),Mp.fragmentShader=Mp.fragmentShader.replace("#include <roughnessmap_fragment>",up),Mp.fragmentShader=Mp.fragmentShader.replace("#include <metalnessmap_fragment>",pp),Mp.fragmentShader=Mp.fragmentShader.replace("#include <lights_physical_fragment>",gp)},Object.defineProperties(this,{specular:{get:function(){return Ap.specular.value},set:function(Mp){Ap.specular.value=Mp}},specularMap:{get:function(){return Ap.specularMap.value},set:function(Mp){Ap.specularMap.value=Mp}},glossiness:{get:function(){return Ap.glossiness.value},set:function(Mp){Ap.glossiness.value=Mp}},glossinessMap:{get:function(){return Ap.glossinessMap.value},set:function(Mp){Ap.glossinessMap.value=Mp,Mp?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(ap)}function Gu(){return{name:Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Nu},extendParams:function(ap,ip,hp){var up=ip.extensions[this.name];ap.color=new e$6.Color(1,1,1),ap.opacity=1;var pp=[];if(Array.isArray(up.diffuseFactor)){var gp=up.diffuseFactor;ap.color.fromArray(gp),ap.opacity=gp[3]}if(up.diffuseTexture!==void 0&&pp.push(hp.assignTexture(ap,"map",up.diffuseTexture)),ap.emissive=new e$6.Color(0,0,0),ap.glossiness=up.glossinessFactor!==void 0?up.glossinessFactor:1,ap.specular=new e$6.Color(1,1,1),Array.isArray(up.specularFactor)&&ap.specular.fromArray(up.specularFactor),up.specularGlossinessTexture!==void 0){var Ap=up.specularGlossinessTexture;pp.push(hp.assignTexture(ap,"glossinessMap",Ap)),pp.push(hp.assignTexture(ap,"specularMap",Ap))}return Promise.all(pp)},createMaterial:function(ap){var ip=new Nu(ap);return ip.fog=!0,ip.color=ap.color,ip.map=ap.map===void 0?null:ap.map,ip.lightMap=null,ip.lightMapIntensity=1,ip.aoMap=ap.aoMap===void 0?null:ap.aoMap,ip.aoMapIntensity=1,ip.emissive=ap.emissive,ip.emissiveIntensity=1,ip.emissiveMap=ap.emissiveMap===void 0?null:ap.emissiveMap,ip.bumpMap=ap.bumpMap===void 0?null:ap.bumpMap,ip.bumpScale=1,ip.normalMap=ap.normalMap===void 0?null:ap.normalMap,ip.normalMapType=e$6.TangentSpaceNormalMap,ap.normalScale&&(ip.normalScale=ap.normalScale),ip.displacementMap=null,ip.displacementScale=1,ip.displacementBias=0,ip.specularMap=ap.specularMap===void 0?null:ap.specularMap,ip.specular=ap.specular,ip.glossinessMap=ap.glossinessMap===void 0?null:ap.glossinessMap,ip.glossiness=ap.glossiness,ip.alphaMap=null,ip.envMap=ap.envMap===void 0?null:ap.envMap,ip.envMapIntensity=1,ip.refractionRatio=.98,ip}}}function ju(){this.name=Tu.KHR_MESH_QUANTIZATION}function Hu(ap,ip,hp,up){e$6.Interpolant.call(this,ap,ip,hp,up)}Vu.prototype.decodePrimitive=function(ap,ip){var hp=this.json,up=this.dracoLoader,pp=ap.extensions[this.name].bufferView,gp=ap.extensions[this.name].attributes,Ap={},Mp={},Dp={};for(var $p in gp){var np=Zu[$p]||$p.toLowerCase();Ap[np]=gp[$p]}for($p in ap.attributes)if(np=Zu[$p]||$p.toLowerCase(),gp[$p]!==void 0){var sp=hp.accessors[ap.attributes[$p]],Pp=_d[sp.componentType];Dp[np]=Pp,Mp[np]=sp.normalized===!0}return ip.getDependency("bufferView",pp).then(function(Tp){return new Promise(function(Np){up.decodeDracoFile(Tp,function(Vp){for(var Gp in Vp.attributes){var qp=Vp.attributes[Gp],Wp=Mp[Gp];Wp!==void 0&&(qp.normalized=Wp)}Np(Vp)},Ap,Dp)})})},ku.prototype.extendTexture=function(ap,ip){return ap=ap.clone(),ip.offset!==void 0&&ap.offset.fromArray(ip.offset),ip.rotation!==void 0&&(ap.rotation=ip.rotation),ip.scale!==void 0&&ap.repeat.fromArray(ip.scale),ip.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ap.needsUpdate=!0,ap},Nu.prototype=Object.create(e$6.MeshStandardMaterial.prototype),Nu.prototype.constructor=Nu,Nu.prototype.copy=function(ap){return e$6.MeshStandardMaterial.prototype.copy.call(this,ap),this.specularMap=ap.specularMap,this.specular.copy(ap.specular),this.glossinessMap=ap.glossinessMap,this.glossiness=ap.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Hu.prototype=Object.create(e$6.Interpolant.prototype),Hu.prototype.constructor=Hu,Hu.prototype.copySampleValue_=function(ap){for(var ip=this.resultBuffer,hp=this.sampleValues,up=this.valueSize,pp=ap*up*3+up,gp=0;gp!==up;gp++)ip[gp]=hp[pp+gp];return ip},Hu.prototype.beforeStart_=Hu.prototype.copySampleValue_,Hu.prototype.afterEnd_=Hu.prototype.copySampleValue_,Hu.prototype.interpolate_=function(ap,ip,hp,up){for(var pp=this.resultBuffer,gp=this.sampleValues,Ap=this.valueSize,Mp=2*Ap,Dp=3*Ap,$p=up-ip,np=(hp-ip)/$p,sp=np*np,Pp=sp*np,Tp=ap*Dp,Np=Tp-Dp,Vp=-2*Pp+3*sp,Gp=Pp-sp,qp=1-Vp,Wp=Gp-sp+np,Jp=0;Jp!==Ap;Jp++){var Hp=gp[Np+Jp+Ap],Kp=gp[Np+Jp+Mp]*$p,jp=gp[Tp+Jp+Ap],Yp=gp[Tp+Jp]*$p;pp[Jp]=qp*Hp+Wp*Kp+Vp*jp+Gp*Yp}return pp};var Uu=0,zu=1,Wu=2,Qu=3,Ku=4,Yu=5,Xc=6,_d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_f={9728:e$6.NearestFilter,9729:e$6.LinearFilter,9984:e$6.NearestMipmapNearestFilter,9985:e$6.LinearMipmapNearestFilter,9986:e$6.NearestMipmapLinearFilter,9987:e$6.LinearMipmapLinearFilter},qu={33071:e$6.ClampToEdgeWrapping,33648:e$6.MirroredRepeatWrapping,10497:e$6.RepeatWrapping},Xu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zu={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_c={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ju={CUBICSPLINE:void 0,LINEAR:e$6.InterpolateLinear,STEP:e$6.InterpolateDiscrete},_h="OPAQUE",ep="MASK",tp="BLEND",rp={"image/png":e$6.RGBAFormat,"image/jpeg":e$6.RGBFormat};function dp(ap,ip){return typeof ap!="string"||ap===""?"":(/^https?:\/\//i.test(ip)&&/^\//.test(ap)&&(ip=ip.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ap)||/^data:.*,.*$/i.test(ap)||/^blob:.*$/i.test(ap)?ap:ip+ap)}function cp(ap,ip,hp){for(var up in hp.extensions)ap[up]===void 0&&(ip.userData.gltfExtensions=ip.userData.gltfExtensions||{},ip.userData.gltfExtensions[up]=hp.extensions[up])}function Sp(ap,ip){ip.extras!==void 0&&(typeof ip.extras=="object"?Object.assign(ap.userData,ip.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ip.extras))}function yp(ap,ip){if(ap.updateMorphTargets(),ip.weights!==void 0)for(var hp=0,up=ip.weights.length;hp<up;hp++)ap.morphTargetInfluences[hp]=ip.weights[hp];if(ip.extras&&Array.isArray(ip.extras.targetNames)){var pp=ip.extras.targetNames;if(ap.morphTargetInfluences.length===pp.length)for(ap.morphTargetDictionary={},hp=0,up=pp.length;hp<up;hp++)ap.morphTargetDictionary[pp[hp]]=hp;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Bp(ap){for(var ip="",hp=Object.keys(ap).sort(),up=0,pp=hp.length;up<pp;up++)ip+=hp[up]+":"+ap[hp[up]]+";";return ip}function _p(ap,ip,hp){this.json=ap||{},this.extensions=ip||{},this.options=hp||{},this.cache=new $u,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$6.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$6.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Cp(ap,ip,hp){var up=ip.attributes,pp=[];function gp($p,np){return hp.getDependency("accessor",$p).then(function(sp){ap.setAttribute(np,sp)})}for(var Ap in up){var Mp=Zu[Ap]||Ap.toLowerCase();Mp in ap.attributes||pp.push(gp(up[Ap],Mp))}if(ip.indices!==void 0&&!ap.index){var Dp=hp.getDependency("accessor",ip.indices).then(function($p){ap.setIndex($p)});pp.push(Dp)}return Sp(ap,ip),function($p,np,sp){var Pp=np.attributes,Tp=new e$6.Box3;if(Pp.POSITION!==void 0){var Np=(Kp=sp.json.accessors[Pp.POSITION]).min,Vp=Kp.max;if(Np!==void 0&&Vp!==void 0){Tp.set(new e$6.Vector3(Np[0],Np[1],Np[2]),new e$6.Vector3(Vp[0],Vp[1],Vp[2]));var Gp=np.targets;if(Gp!==void 0){for(var qp=new e$6.Vector3,Wp=new e$6.Vector3,Jp=0,Hp=Gp.length;Jp<Hp;Jp++){var Kp,jp=Gp[Jp];jp.POSITION!==void 0&&(Np=(Kp=sp.json.accessors[jp.POSITION]).min,Vp=Kp.max,Np!==void 0&&Vp!==void 0?(Wp.setX(Math.max(Math.abs(Np[0]),Math.abs(Vp[0]))),Wp.setY(Math.max(Math.abs(Np[1]),Math.abs(Vp[1]))),Wp.setZ(Math.max(Math.abs(Np[2]),Math.abs(Vp[2]))),qp.max(Wp)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Tp.expandByVector(qp)}$p.boundingBox=Tp;var Yp=new e$6.Sphere;Tp.getCenter(Yp.center),Yp.radius=Tp.min.distanceTo(Tp.max)/2,$p.boundingSphere=Yp}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(ap,ip,hp),Promise.all(pp).then(function(){return ip.targets!==void 0?function($p,np,sp){for(var Pp=!1,Tp=!1,Np=0,Vp=np.length;Np<Vp&&((Wp=np[Np]).POSITION!==void 0&&(Pp=!0),Wp.NORMAL!==void 0&&(Tp=!0),!Pp||!Tp);Np++);if(!Pp&&!Tp)return Promise.resolve($p);var Gp=[],qp=[];for(Np=0,Vp=np.length;Np<Vp;Np++){var Wp=np[Np];if(Pp){var Jp=Wp.POSITION!==void 0?sp.getDependency("accessor",Wp.POSITION):$p.attributes.position;Gp.push(Jp)}Tp&&(Jp=Wp.NORMAL!==void 0?sp.getDependency("accessor",Wp.NORMAL):$p.attributes.normal,qp.push(Jp))}return Promise.all([Promise.all(Gp),Promise.all(qp)]).then(function(Hp){var Kp=Hp[0],jp=Hp[1];return Pp&&($p.morphAttributes.position=Kp),Tp&&($p.morphAttributes.normal=jp),$p.morphTargetsRelative=!0,$p})}(ap,ip.targets,hp):ap})}function Ep(ap,ip){var hp=ap.getIndex();if(hp===null){var up=[],pp=ap.getAttribute("position");if(pp===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ap;for(var gp=0;gp<pp.count;gp++)up.push(gp);ap.setIndex(up),hp=ap.getIndex()}var Ap=hp.count-2,Mp=[];if(ip===e$6.TriangleFanDrawMode)for(gp=1;gp<=Ap;gp++)Mp.push(hp.getX(0)),Mp.push(hp.getX(gp)),Mp.push(hp.getX(gp+1));else for(gp=0;gp<Ap;gp++)gp%2==0?(Mp.push(hp.getX(gp)),Mp.push(hp.getX(gp+1)),Mp.push(hp.getX(gp+2))):(Mp.push(hp.getX(gp+2)),Mp.push(hp.getX(gp+1)),Mp.push(hp.getX(gp)));Mp.length/3!==Ap&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var Dp=ap.clone();return Dp.setIndex(Mp),Dp}return _p.prototype.parse=function(ap,ip){var hp=this,up=this.json,pp=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(gp){var Ap={scene:gp[0][up.scene||0],scenes:gp[0],animations:gp[1],cameras:gp[2],asset:up.asset,parser:hp,userData:{}};cp(pp,Ap,up),Sp(Ap,up),ap(Ap)}).catch(ip)},_p.prototype.markDefs=function(){for(var ap=this.json.nodes||[],ip=this.json.skins||[],hp=this.json.meshes||[],up={},pp={},gp=0,Ap=ip.length;gp<Ap;gp++)for(var Mp=ip[gp].joints,Dp=0,$p=Mp.length;Dp<$p;Dp++)ap[Mp[Dp]].isBone=!0;for(var np=0,sp=ap.length;np<sp;np++){var Pp=ap[np];Pp.mesh!==void 0&&(up[Pp.mesh]===void 0&&(up[Pp.mesh]=pp[Pp.mesh]=0),up[Pp.mesh]++,Pp.skin!==void 0&&(hp[Pp.mesh].isSkinnedMesh=!0))}this.json.meshReferences=up,this.json.meshUses=pp},_p.prototype.getDependency=function(ap,ip){var hp=ap+":"+ip,up=this.cache.get(hp);if(!up){switch(ap){case"scene":up=this.loadScene(ip);break;case"node":up=this.loadNode(ip);break;case"mesh":up=this.loadMesh(ip);break;case"accessor":up=this.loadAccessor(ip);break;case"bufferView":up=this.loadBufferView(ip);break;case"buffer":up=this.loadBuffer(ip);break;case"material":up=this.loadMaterial(ip);break;case"texture":up=this.loadTexture(ip);break;case"skin":up=this.loadSkin(ip);break;case"animation":up=this.loadAnimation(ip);break;case"camera":up=this.loadCamera(ip);break;case"light":up=this.extensions[Tu.KHR_LIGHTS_PUNCTUAL].loadLight(ip);break;default:throw new Error("Unknown type: "+ap)}this.cache.add(hp,up)}return up},_p.prototype.getDependencies=function(ap){var ip=this.cache.get(ap);if(!ip){var hp=this,up=this.json[ap+(ap==="mesh"?"es":"s")]||[];ip=Promise.all(up.map(function(pp,gp){return hp.getDependency(ap,gp)})),this.cache.add(ap,ip)}return ip},_p.prototype.loadBuffer=function(ap){var ip=this.json.buffers[ap],hp=this.fileLoader;if(ip.type&&ip.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+ip.type+" buffer type is not supported.");if(ip.uri===void 0&&ap===0)return Promise.resolve(this.extensions[Tu.KHR_BINARY_GLTF].body);var up=this.options;return new Promise(function(pp,gp){hp.load(dp(ip.uri,up.path),pp,void 0,function(){gp(new Error('THREE.GLTFLoader: Failed to load buffer "'+ip.uri+'".'))})})},_p.prototype.loadBufferView=function(ap){var ip=this.json.bufferViews[ap];return this.getDependency("buffer",ip.buffer).then(function(hp){var up=ip.byteLength||0,pp=ip.byteOffset||0;return hp.slice(pp,pp+up)})},_p.prototype.loadAccessor=function(ap){var ip=this,hp=this.json,up=this.json.accessors[ap];if(up.bufferView===void 0&&up.sparse===void 0)return Promise.resolve(null);var pp=[];return up.bufferView!==void 0?pp.push(this.getDependency("bufferView",up.bufferView)):pp.push(null),up.sparse!==void 0&&(pp.push(this.getDependency("bufferView",up.sparse.indices.bufferView)),pp.push(this.getDependency("bufferView",up.sparse.values.bufferView))),Promise.all(pp).then(function(gp){var Ap,Mp,Dp=gp[0],$p=Xu[up.type],np=_d[up.componentType],sp=np.BYTES_PER_ELEMENT,Pp=sp*$p,Tp=up.byteOffset||0,Np=up.bufferView!==void 0?hp.bufferViews[up.bufferView].byteStride:void 0,Vp=up.normalized===!0;if(Np&&Np!==Pp){var Gp=Math.floor(Tp/Np),qp="InterleavedBuffer:"+up.bufferView+":"+up.componentType+":"+Gp+":"+up.count,Wp=ip.cache.get(qp);Wp||(Ap=new np(Dp,Gp*Np,up.count*Np/sp),Wp=new e$6.InterleavedBuffer(Ap,Np/sp),ip.cache.add(qp,Wp)),Mp=new e$6.InterleavedBufferAttribute(Wp,$p,Tp%Np/sp,Vp)}else Ap=Dp===null?new np(up.count*$p):new np(Dp,Tp,up.count*$p),Mp=new e$6.BufferAttribute(Ap,$p,Vp);if(up.sparse!==void 0){var Jp=Xu.SCALAR,Hp=_d[up.sparse.indices.componentType],Kp=up.sparse.indices.byteOffset||0,jp=up.sparse.values.byteOffset||0,Yp=new Hp(gp[1],Kp,up.sparse.count*Jp),xp=new np(gp[2],jp,up.sparse.count*$p);Dp!==null&&(Mp=new e$6.BufferAttribute(Mp.array.slice(),Mp.itemSize,Mp.normalized));for(var Qp=0,Zp=Yp.length;Qp<Zp;Qp++){var tm=Yp[Qp];if(Mp.setX(tm,xp[Qp*$p]),$p>=2&&Mp.setY(tm,xp[Qp*$p+1]),$p>=3&&Mp.setZ(tm,xp[Qp*$p+2]),$p>=4&&Mp.setW(tm,xp[Qp*$p+3]),$p>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Mp})},_p.prototype.loadTexture=function(ap){var ip,hp=this,up=this.json,pp=this.options,gp=this.textureLoader,Ap=self.URL||self.webkitURL,Mp=up.textures[ap],Dp=Mp.extensions||{},$p=(ip=Dp[Tu.MSFT_TEXTURE_DDS]?up.images[Dp[Tu.MSFT_TEXTURE_DDS].source]:up.images[Mp.source]).uri,np=!1;return ip.bufferView!==void 0&&($p=hp.getDependency("bufferView",ip.bufferView).then(function(sp){np=!0;var Pp=new Blob([sp],{type:ip.mimeType});return $p=Ap.createObjectURL(Pp)})),Promise.resolve($p).then(function(sp){var Pp=pp.manager.getHandler(sp);return Pp||(Pp=Dp[Tu.MSFT_TEXTURE_DDS]?hp.extensions[Tu.MSFT_TEXTURE_DDS].ddsLoader:gp),new Promise(function(Tp,Np){Pp.load(dp(sp,pp.path),Tp,void 0,Np)})}).then(function(sp){np===!0&&Ap.revokeObjectURL($p),sp.flipY=!1,Mp.name&&(sp.name=Mp.name),ip.mimeType in rp&&(sp.format=rp[ip.mimeType]);var Pp=(up.samplers||{})[Mp.sampler]||{};return sp.magFilter=_f[Pp.magFilter]||e$6.LinearFilter,sp.minFilter=_f[Pp.minFilter]||e$6.LinearMipmapLinearFilter,sp.wrapS=qu[Pp.wrapS]||e$6.RepeatWrapping,sp.wrapT=qu[Pp.wrapT]||e$6.RepeatWrapping,hp.associations.set(sp,{type:"textures",index:ap}),sp})},_p.prototype.assignTexture=function(ap,ip,hp){var up=this;return this.getDependency("texture",hp.index).then(function(pp){if(!pp.isCompressedTexture)switch(ip){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":pp.format=e$6.RGBFormat}if(hp.texCoord===void 0||hp.texCoord==0||ip==="aoMap"&&hp.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+hp.texCoord+" for texture "+ip+" not yet supported."),up.extensions[Tu.KHR_TEXTURE_TRANSFORM]){var gp=hp.extensions!==void 0?hp.extensions[Tu.KHR_TEXTURE_TRANSFORM]:void 0;if(gp){var Ap=this.associations.get(pp);pp=up.extensions[Tu.KHR_TEXTURE_TRANSFORM].extendTexture(pp,gp),this.associations.set(pp,Ap)}}ap[ip]=pp})},_p.prototype.assignFinalMaterial=function(ap){var ip=ap.geometry,hp=ap.material,up=ip.attributes.tangent!==void 0,pp=ip.attributes.color!==void 0,gp=ip.attributes.normal===void 0,Ap=ap.isSkinnedMesh===!0,Mp=Object.keys(ip.morphAttributes).length>0,Dp=Mp&&ip.morphAttributes.normal!==void 0;if(ap.isPoints){var $p="PointsMaterial:"+hp.uuid,np=this.cache.get($p);np||(np=new e$6.PointsMaterial,e$6.Material.prototype.copy.call(np,hp),np.color.copy(hp.color),np.map=hp.map,np.sizeAttenuation=!1,this.cache.add($p,np)),hp=np}else if(ap.isLine){$p="LineBasicMaterial:"+hp.uuid;var sp=this.cache.get($p);sp||(sp=new e$6.LineBasicMaterial,e$6.Material.prototype.copy.call(sp,hp),sp.color.copy(hp.color),this.cache.add($p,sp)),hp=sp}if(up||pp||gp||Ap||Mp){$p="ClonedMaterial:"+hp.uuid+":",hp.isGLTFSpecularGlossinessMaterial&&($p+="specular-glossiness:"),Ap&&($p+="skinning:"),up&&($p+="vertex-tangents:"),pp&&($p+="vertex-colors:"),gp&&($p+="flat-shading:"),Mp&&($p+="morph-targets:"),Dp&&($p+="morph-normals:");var Pp=this.cache.get($p);Pp||(Pp=hp.clone(),Ap&&(Pp.skinning=!0),up&&(Pp.vertexTangents=!0),pp&&(Pp.vertexColors=!0),gp&&(Pp.flatShading=!0),Mp&&(Pp.morphTargets=!0),Dp&&(Pp.morphNormals=!0),this.cache.add($p,Pp),this.associations.set(Pp,this.associations.get(hp))),hp=Pp}hp.aoMap&&ip.attributes.uv2===void 0&&ip.attributes.uv!==void 0&&ip.setAttribute("uv2",ip.attributes.uv),hp.normalScale&&!up&&(hp.normalScale.y=-hp.normalScale.y),hp.clearcoatNormalScale&&!up&&(hp.clearcoatNormalScale.y=-hp.clearcoatNormalScale.y),ap.material=hp},_p.prototype.loadMaterial=function(ap){var ip,hp=this,up=this.json,pp=this.extensions,gp=up.materials[ap],Ap={},Mp=gp.extensions||{},Dp=[];if(Mp[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var $p=pp[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];ip=$p.getMaterialType(),Dp.push($p.extendParams(Ap,gp,hp))}else if(Mp[Tu.KHR_MATERIALS_UNLIT]){var np=pp[Tu.KHR_MATERIALS_UNLIT];ip=np.getMaterialType(),Dp.push(np.extendParams(Ap,gp,hp))}else{ip=e$6.MeshStandardMaterial;var sp=gp.pbrMetallicRoughness||{};if(Ap.color=new e$6.Color(1,1,1),Ap.opacity=1,Array.isArray(sp.baseColorFactor)){var Pp=sp.baseColorFactor;Ap.color.fromArray(Pp),Ap.opacity=Pp[3]}sp.baseColorTexture!==void 0&&Dp.push(hp.assignTexture(Ap,"map",sp.baseColorTexture)),Ap.metalness=sp.metallicFactor!==void 0?sp.metallicFactor:1,Ap.roughness=sp.roughnessFactor!==void 0?sp.roughnessFactor:1,sp.metallicRoughnessTexture!==void 0&&(Dp.push(hp.assignTexture(Ap,"metalnessMap",sp.metallicRoughnessTexture)),Dp.push(hp.assignTexture(Ap,"roughnessMap",sp.metallicRoughnessTexture)))}gp.doubleSided===!0&&(Ap.side=e$6.DoubleSide);var Tp=gp.alphaMode||_h;if(Tp===tp?(Ap.transparent=!0,Ap.depthWrite=!1):(Ap.transparent=!1,Tp===ep&&(Ap.alphaTest=gp.alphaCutoff!==void 0?gp.alphaCutoff:.5)),gp.normalTexture!==void 0&&ip!==e$6.MeshBasicMaterial&&(Dp.push(hp.assignTexture(Ap,"normalMap",gp.normalTexture)),Ap.normalScale=new e$6.Vector2(1,1),gp.normalTexture.scale!==void 0&&Ap.normalScale.set(gp.normalTexture.scale,gp.normalTexture.scale)),gp.occlusionTexture!==void 0&&ip!==e$6.MeshBasicMaterial&&(Dp.push(hp.assignTexture(Ap,"aoMap",gp.occlusionTexture)),gp.occlusionTexture.strength!==void 0&&(Ap.aoMapIntensity=gp.occlusionTexture.strength)),gp.emissiveFactor!==void 0&&ip!==e$6.MeshBasicMaterial&&(Ap.emissive=new e$6.Color().fromArray(gp.emissiveFactor)),gp.emissiveTexture!==void 0&&ip!==e$6.MeshBasicMaterial&&Dp.push(hp.assignTexture(Ap,"emissiveMap",gp.emissiveTexture)),Mp[Tu.KHR_MATERIALS_CLEARCOAT]){var Np=pp[Tu.KHR_MATERIALS_CLEARCOAT];ip=Np.getMaterialType(),Dp.push(Np.extendParams(Ap,{extensions:Mp},hp))}return Promise.all(Dp).then(function(){var Vp;return Vp=ip===Nu?pp[Tu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Ap):new ip(Ap),gp.name&&(Vp.name=gp.name),Vp.map&&(Vp.map.encoding=e$6.sRGBEncoding),Vp.emissiveMap&&(Vp.emissiveMap.encoding=e$6.sRGBEncoding),Sp(Vp,gp),hp.associations.set(Vp,{type:"materials",index:ap}),gp.extensions&&cp(pp,Vp,gp),Vp})},_p.prototype.loadGeometries=function(ap){var ip=this,hp=this.extensions,up=this.primitiveCache;function pp(Np){return hp[Tu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Np,ip).then(function(Vp){return Cp(Vp,Np,ip)})}for(var gp,Ap,Mp=[],Dp=0,$p=ap.length;Dp<$p;Dp++){var np,sp=ap[Dp],Pp=(Ap=void 0,(Ap=(gp=sp).extensions&&gp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+Ap.bufferView+":"+Ap.indices+":"+Bp(Ap.attributes):gp.indices+":"+Bp(gp.attributes)+":"+gp.mode),Tp=up[Pp];Tp?Mp.push(Tp.promise):(np=sp.extensions&&sp.extensions[Tu.KHR_DRACO_MESH_COMPRESSION]?pp(sp):Cp(new e$6.BufferGeometry,sp,ip),up[Pp]={primitive:sp,promise:np},Mp.push(np))}return Promise.all(Mp)},_p.prototype.loadMesh=function(ap){for(var ip,hp=this,up=this.json.meshes[ap],pp=up.primitives,gp=[],Ap=0,Mp=pp.length;Ap<Mp;Ap++){var Dp=pp[Ap].material===void 0?((ip=this.cache).DefaultMaterial===void 0&&(ip.DefaultMaterial=new e$6.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$6.FrontSide})),ip.DefaultMaterial):this.getDependency("material",pp[Ap].material);gp.push(Dp)}return gp.push(hp.loadGeometries(pp)),Promise.all(gp).then(function($p){for(var np=$p.slice(0,$p.length-1),sp=$p[$p.length-1],Pp=[],Tp=0,Np=sp.length;Tp<Np;Tp++){var Vp,Gp=sp[Tp],qp=pp[Tp],Wp=np[Tp];if(qp.mode===Ku||qp.mode===Yu||qp.mode===Xc||qp.mode===void 0)(Vp=up.isSkinnedMesh===!0?new e$6.SkinnedMesh(Gp,Wp):new e$6.Mesh(Gp,Wp)).isSkinnedMesh!==!0||Vp.geometry.attributes.skinWeight.normalized||Vp.normalizeSkinWeights(),qp.mode===Yu?Vp.geometry=Ep(Vp.geometry,e$6.TriangleStripDrawMode):qp.mode===Xc&&(Vp.geometry=Ep(Vp.geometry,e$6.TriangleFanDrawMode));else if(qp.mode===zu)Vp=new e$6.LineSegments(Gp,Wp);else if(qp.mode===Qu)Vp=new e$6.Line(Gp,Wp);else if(qp.mode===Wu)Vp=new e$6.LineLoop(Gp,Wp);else{if(qp.mode!==Uu)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qp.mode);Vp=new e$6.Points(Gp,Wp)}Object.keys(Vp.geometry.morphAttributes).length>0&&yp(Vp,up),Vp.name=up.name||"mesh_"+ap,sp.length>1&&(Vp.name+="_"+Tp),Sp(Vp,up),hp.assignFinalMaterial(Vp),Pp.push(Vp)}if(Pp.length===1)return Pp[0];var Jp=new e$6.Group;for(Tp=0,Np=Pp.length;Tp<Np;Tp++)Jp.add(Pp[Tp]);return Jp})},_p.prototype.loadCamera=function(ap){var ip,hp=this.json.cameras[ap],up=hp[hp.type];if(up)return hp.type==="perspective"?ip=new e$6.PerspectiveCamera(e$6.MathUtils.radToDeg(up.yfov),up.aspectRatio||1,up.znear||1,up.zfar||2e6):hp.type==="orthographic"&&(ip=new e$6.OrthographicCamera(-up.xmag,up.xmag,up.ymag,-up.ymag,up.znear,up.zfar)),hp.name&&(ip.name=hp.name),Sp(ip,hp),Promise.resolve(ip);console.warn("THREE.GLTFLoader: Missing camera parameters.")},_p.prototype.loadSkin=function(ap){var ip=this.json.skins[ap],hp={joints:ip.joints};return ip.inverseBindMatrices===void 0?Promise.resolve(hp):this.getDependency("accessor",ip.inverseBindMatrices).then(function(up){return hp.inverseBindMatrices=up,hp})},_p.prototype.loadAnimation=function(ap){for(var ip=this.json.animations[ap],hp=[],up=[],pp=[],gp=[],Ap=[],Mp=0,Dp=ip.channels.length;Mp<Dp;Mp++){var $p=ip.channels[Mp],np=ip.samplers[$p.sampler],sp=$p.target,Pp=sp.node!==void 0?sp.node:sp.id,Tp=ip.parameters!==void 0?ip.parameters[np.input]:np.input,Np=ip.parameters!==void 0?ip.parameters[np.output]:np.output;hp.push(this.getDependency("node",Pp)),up.push(this.getDependency("accessor",Tp)),pp.push(this.getDependency("accessor",Np)),gp.push(np),Ap.push(sp)}return Promise.all([Promise.all(hp),Promise.all(up),Promise.all(pp),Promise.all(gp),Promise.all(Ap)]).then(function(Vp){for(var Gp=Vp[0],qp=Vp[1],Wp=Vp[2],Jp=Vp[3],Hp=Vp[4],Kp=[],jp=0,Yp=Gp.length;jp<Yp;jp++){var xp=Gp[jp],Qp=qp[jp],Zp=Wp[jp],tm=Jp[jp],em=Hp[jp];if(xp!==void 0){var lm;switch(xp.updateMatrix(),xp.matrixAutoUpdate=!0,_c[em.path]){case _c.weights:lm=e$6.NumberKeyframeTrack;break;case _c.rotation:lm=e$6.QuaternionKeyframeTrack;break;case _c.position:case _c.scale:default:lm=e$6.VectorKeyframeTrack}var pm=xp.name?xp.name:xp.uuid,mm=tm.interpolation!==void 0?Ju[tm.interpolation]:e$6.InterpolateLinear,Sm=[];_c[em.path]===_c.weights?xp.traverse(function(mp){mp.isMesh===!0&&mp.morphTargetInfluences&&Sm.push(mp.name?mp.name:mp.uuid)}):Sm.push(pm);var fm=Zp.array;if(Zp.normalized){var xm;if(fm.constructor===Int8Array)xm=1/127;else if(fm.constructor===Uint8Array)xm=1/255;else if(fm.constructor==Int16Array)xm=1/32767;else{if(fm.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");xm=1/65535}for(var wm=new Float32Array(fm.length),gm=0,Mm=fm.length;gm<Mm;gm++)wm[gm]=fm[gm]*xm;fm=wm}for(gm=0,Mm=Sm.length;gm<Mm;gm++){var Im=new lm(Sm[gm]+"."+_c[em.path],Qp.array,fm,mm);tm.interpolation==="CUBICSPLINE"&&(Im.createInterpolant=function(mp){return new Hu(this.times,this.values,this.getValueSize()/3,mp)},Im.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Kp.push(Im)}}}var ym=ip.name?ip.name:"animation_"+ap;return new e$6.AnimationClip(ym,void 0,Kp)})},_p.prototype.loadNode=function(ap){var ip,hp=this.json,up=this.extensions,pp=this,gp=hp.meshReferences,Ap=hp.meshUses,Mp=hp.nodes[ap];return(ip=[],Mp.mesh!==void 0&&ip.push(pp.getDependency("mesh",Mp.mesh).then(function(Dp){var $p;if(gp[Mp.mesh]>1){var np=Ap[Mp.mesh]++;($p=Dp.clone()).name+="_instance_"+np}else $p=Dp;return Mp.weights!==void 0&&$p.traverse(function(sp){if(sp.isMesh)for(var Pp=0,Tp=Mp.weights.length;Pp<Tp;Pp++)sp.morphTargetInfluences[Pp]=Mp.weights[Pp]}),$p})),Mp.camera!==void 0&&ip.push(pp.getDependency("camera",Mp.camera)),Mp.extensions&&Mp.extensions[Tu.KHR_LIGHTS_PUNCTUAL]&&Mp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&ip.push(pp.getDependency("light",Mp.extensions[Tu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(ip)).then(function(Dp){var $p;if(($p=Mp.isBone===!0?new e$6.Bone:Dp.length>1?new e$6.Group:Dp.length===1?Dp[0]:new e$6.Object3D)!==Dp[0])for(var np=0,sp=Dp.length;np<sp;np++)$p.add(Dp[np]);if(Mp.name&&($p.userData.name=Mp.name,$p.name=e$6.PropertyBinding.sanitizeNodeName(Mp.name)),Sp($p,Mp),Mp.extensions&&cp(up,$p,Mp),Mp.matrix!==void 0){var Pp=new e$6.Matrix4;Pp.fromArray(Mp.matrix),$p.applyMatrix4(Pp)}else Mp.translation!==void 0&&$p.position.fromArray(Mp.translation),Mp.rotation!==void 0&&$p.quaternion.fromArray(Mp.rotation),Mp.scale!==void 0&&$p.scale.fromArray(Mp.scale);return pp.associations.set($p,{type:"nodes",index:ap}),$p})},_p.prototype.loadScene=function(){function ap(ip,hp,up,pp){var gp=up.nodes[ip];return pp.getDependency("node",ip).then(function(Ap){return gp.skin===void 0?Ap:pp.getDependency("skin",gp.skin).then(function(Dp){for(var $p=[],np=0,sp=(Mp=Dp).joints.length;np<sp;np++)$p.push(pp.getDependency("node",Mp.joints[np]));return Promise.all($p)}).then(function(Dp){return Ap.traverse(function($p){if($p.isMesh){for(var np=[],sp=[],Pp=0,Tp=Dp.length;Pp<Tp;Pp++){var Np=Dp[Pp];if(Np){np.push(Np);var Vp=new e$6.Matrix4;Mp.inverseBindMatrices!==void 0&&Vp.fromArray(Mp.inverseBindMatrices.array,16*Pp),sp.push(Vp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Mp.joints[Pp])}$p.bind(new e$6.Skeleton(np,sp),$p.matrixWorld)}}),Ap});var Mp}).then(function(Ap){hp.add(Ap);var Mp=[];if(gp.children)for(var Dp=gp.children,$p=0,np=Dp.length;$p<np;$p++){var sp=Dp[$p];Mp.push(ap(sp,Ap,up,pp))}return Promise.all(Mp)})}return function(ip){var hp=this.json,up=this.extensions,pp=this.json.scenes[ip],gp=new e$6.Group;pp.name&&(gp.name=pp.name),Sp(gp,pp),pp.extensions&&cp(up,gp,pp);for(var Ap=pp.nodes||[],Mp=[],Dp=0,$p=Ap.length;Dp<$p;Dp++)Mp.push(ap(Ap[Dp],gp,hp,this));return Promise.all(Mp).then(function(){return gp})}}(),_u}()),Wr=new r$a.Matrix4().makeRotationAxis(new r$a.Vector3(1,0,0),Math.PI/2);function Xr(_u){function $u(Tu){if(Tu.isMesh)return function(Lu){var Ru=new ft$1;Ru.geometry=Lu.geometry,Ru.geometry.computeVertexNormals(),Ru.geometry.computeBoundingBox(),Ru.geometry.computeBoundingSphere(),Ru.geometry.addGroup(0,Lu.geometry.index.count,0);var Ou=new Mt$1;return Ou.uniforms.map.value=Lu.material.map,Ou.uniforms.exposure.value=3.3,Ou.opacity=1,Lu.material.dispose(),Ru.material=[Ou],Ru.position.copy(Lu.position),Ru.quaternion.copy(Lu.quaternion),Ru.scale.copy(Lu.scale),Ru.matrix.compose(Ru.position,Ru.quaternion,Ru.scale),Ru}(Tu);if(Tu.isGroup){for(var Cu=function(Lu){var Ru=new gt$1;return Ru.position.copy(Lu.position),Ru.quaternion.copy(Lu.quaternion),Ru.scale.copy(Lu.scale),Ru.matrix.compose(Ru.position,Ru.quaternion,Ru.scale),Ru}(Tu),Pu=0;Pu<Tu.children.length;Pu++){var Bu=$u(Tu.children[Pu]);Cu.add(Bu)}return Cu}return new gt$1}return new Promise(function(Tu,Cu){var Pu,Bu=new r$a.Matrix4().fromArray(_u.computedTransform);if(((Pu=_u.tileset.asset)===null||Pu===void 0?void 0:Pu.gltfUpAxis)!=="Z"&&Bu.multiply(Wr),_u.content){var Lu=_u.content.gltfArrayBuffer,Ru=_u.contentUrl?_u.contentUrl.slice(0,_u.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Lu,Ru,function(Ou){var Du=Ou.scene,Fu=new gt$1,Vu=$u(Du);Vu.applyMatrix4(Bu),Fu.add(Vu),Tu(Fu)},function(Ou){Cu(new Error("error parsing gltf in tile ".concat(_u.id,": ").concat(Ou.message)))})}else Tu(new gt$1)})}function Yr(_u){_u.traverse(function($u){if($u instanceof ft$1){$u.geometry.dispose();for(var Tu=0,Cu=$u.material;Tu<Cu.length;Tu++){var Pu=Cu[Tu];Pu.uniforms.map&&Pu.uniforms.map.value&&(Pu.uniforms.map.value.dispose(),Pu.uniforms.map.value=null)}}})}function Zr(_u){return new r$a.Matrix4().fromArray([2*_u[0],2*_u[1],2*_u[2],0,2*_u[3],2*_u[4],2*_u[5],0,2*_u[6],2*_u[7],2*_u[8],0,0,0,0,1])}function Jr(_u){return new Tn(_u.toArray())}function $r(_u){var $u=_u.planes.map(function(Tu){return new kn(Tu.normal.toArray(),Tu.constant)});return new Fn($u)}var eo=new r$a.EdgesGeometry(new r$a.BoxBufferGeometry(1,1,1)),to=new r$a.LineBasicMaterial({color:new r$a.Color(1,1,0),transparent:!0});function io(_u){_u.updateMatrix(),_u.updateMatrixWorld(),_u.matrixWorld.getInverse(_u.matrixWorldInverse);var $u=new r$a.Matrix4().multiplyMatrices(_u.projectionMatrix,_u.matrixWorldInverse);return new r$a.Frustum().setFromProjectionMatrix($u)}var no={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu=_u.call(this)||this;return Cu.options=t$8.__assign(t$8.__assign({},no),Tu),Cu.clock=new r$a.Clock,Cu.timer=0,Cu.unloadTileQueue=[],Cu.nodes={},Cu.boundings={},Cu.nodeGroup=new r$a.Group,Cu.boundingGroup=new r$a.Group,Cu.add(Cu.nodeGroup),Cu.sseDenominator=null,Cu.lastCameraTransform=new r$a.Matrix4,Cu.lastCameraAspect=1,Cu.lastCameraFov=null,Cu.lastCamera=null,Cu.lastRenderer=null,Cu.enabled=!1,Cu}return t$8.__extends($u,_u),Object.defineProperty($u.prototype,"enable",{get:function(){return this.enabled},set:function(Tu){this.enabled!==Tu&&(this.enabled=Tu,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),$u.prototype.load=function(Tu){var Cu=this,Pu=Tu.tileset_url;Tu.tileset_url_md5;var Bu=Tu.b3md_mappings_url;Tu.b3md_mappings_url_md5;var Lu={modelMatrix:Jr(new r$a.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(Fu){var Vu=function(ku){var Nu=ku.boundingVolume,Gu=new r$a.LineSegments(eo,to);return Gu.applyMatrix4(Zr(Nu.halfAxes)),Gu.position.set(Nu.center[0],Nu.center[1],Nu.center[2]),Gu}(Fu);return Vu.visible=!1,Cu.boundings[Fu.id]=Vu,Cu.boundingGroup.add(Vu),Vu.updateMatrixWorld(!0),Fu.type==="SCENEGRAPH"||Fu.type==="MESH"?Xr(Fu).then(function(ku){Cu.tileset===void 0?Yr(ku):(ku.visible=!1,Cu.nodes[Fu.id]=ku,Cu.nodeGroup.add(ku),Cu.options.onNodeCreated(ku),ku.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Cu.enabled&&Cu.tileset&&Cu.lastRenderer&&Cu.lastCamera&&(Cu.tileset.frameNumber++,Cu.tilesetUpdate(Cu.tileset,Cu.lastRenderer,Cu.lastCamera)),Cu.enabled||Cu.reset()},onTileUnload:function(Fu){Cu.unloadTileQueue.push(Fu)},onTileError:function(Fu,Vu){console.error("Tile error",Fu.id,Vu)},onTraversalComplete:function(Fu){return Fu},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Ru=Pu.split("/").slice(0,-1).join("/"),Ou=it$1(Pu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Fu){return JSON.parse(Fu.body)}).then(function(Fu){return jr(Fu,Ru)}),Du=it$1(Bu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Fu){return JSON.parse(Fu.body)});Promise.all([Ou,Du]).then(function(Fu){var Vu=Fu[0],ku=Fu[1];Vu.b3dmMapping=ku;var Nu=Cu.tileset=new qr(Vu,Lu),Gu=new r$a.Matrix4;if(Nu.root&&Nu.root.boundingVolume){var ju=Nu.root.boundingVolume,Hu=ju.halfAxes,Uu=ju.center;Gu.extractRotation(Zr(Hu)),Gu.setPosition(Uu[0],Uu[1],Uu[2])}Nu.modelMatrix.copy(Jr(new r$a.Matrix4().getInverse(Gu)))})},$u.prototype.update=function(Tu,Cu){this.lastCamera=Cu,this.lastRenderer=Tu,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Cu.matrixWorld.equals(this.lastCameraTransform)&&Cu.aspect===this.lastCameraAspect&&Cu.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Cu.matrixWorld),this.tilesetUpdate(this.tileset,Tu,Cu))))},$u.prototype.tilesetUpdate=function(Tu,Cu,Pu){this.sseDenominator&&Pu.aspect===this.lastCameraAspect&&Pu.fov===this.lastCameraFov||(this.sseDenominator=function(Nu){var Gu=Nu.aspect,ju=Nu.fov/180*Math.PI,Hu=Nu.aspect<=1?ju:2*Math.atan(Math.tan(.5*ju)/Gu);return 2*Math.tan(.5*Hu)}(Pu),this.lastCameraAspect=Pu.aspect,this.lastCameraFov=Pu.fov);var Bu,Lu={camera:{position:Pu.getWorldPosition(new r$a.Vector3).toArray(),direction:Pu.getWorldDirection(new r$a.Vector3).toArray(),up:Pu.up.toArray()},height:Cu.getSize(new r$a.Vector2).height,frameNumber:Tu.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io(Pu))};Tu.cache.reset(),Tu.traverser.traverse(Tu.root,Lu);for(var Ru=0,Ou=Tu.tiles;Ru<Ou.length;Ru++){var Du=Ou[Ru],Fu=Du.selected,Vu=Du.id;this.nodes[Vu]&&this.nodes[Vu].visible!==Fu&&(this.nodes[Vu].visible=Fu,Fu&&(this.nodes[Vu].needsRender=!0)),this.boundings[Vu]&&this.boundings[Vu].visible!==Fu&&(this.boundings[Vu].visible=Fu)}for(;Bu=this.unloadTileQueue.pop();){if(Vu=Bu.id,this.nodes[Vu]){var ku=this.nodes[Vu];this.nodeGroup.remove(ku),Yr(ku),delete this.nodes[Vu]}this.boundings[Vu]&&(ku=this.boundings[Vu],this.boundingGroup.remove(ku),delete this.boundings[Vu])}},$u.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Tu=void 0;Tu=this.unloadTileQueue.pop();)if(Tu.contentState!=="UNLOADED"){var Cu=Tu.id;if(this.nodes[Cu]){var Pu=this.nodes[Cu];this.nodeGroup.remove(Pu),Yr(Pu),delete this.nodes[Cu]}this.boundings[Cu]&&(Pu=this.boundings[Cu],this.boundingGroup.remove(Pu),delete this.boundings[Cu])}for(var Bu=0,Lu=Object.keys(this.nodes);Bu<Lu.length;Bu++){Cu=Lu[Bu];var Ru=this.nodes[Cu];this.nodeGroup.remove(Ru),Yr(Ru),delete this.nodes[Cu]}for(var Ou=0,Du=Object.keys(this.boundings);Ou<Du.length;Ou++)Cu=Du[Ou],Ru=this.boundings[Cu],this.boundingGroup.remove(Ru),delete this.boundings[Cu]}},$u}(At$1);function oo(_u){return _u==null}var so=function(_u,$u){$u===void 0&&($u=1e-4),$u=Math.max($u,Number.EPSILON);for(var Tu={},Cu=_u.getIndex(),Pu=_u.getAttribute("position"),Bu=Cu?Cu.count:Pu.count,Lu=0,Ru=Object.keys(_u.attributes),Ou={},Du={},Fu=[],Vu=["getX","getY","getZ","getW"],ku=0,Nu=Ru.length;ku<Nu;ku++)Ou[Wu=Ru[ku]]=[],(Xc=_u.morphAttributes[Wu])&&(Du[Wu]=new Array(Xc.length).fill().map(function(){return[]}));var Gu=Math.log10(1/$u),ju=Math.pow(10,Gu);for(ku=0;ku<Bu;ku++){var Hu=Cu?Cu.getX(ku):ku,Uu="",zu=0;for(Nu=Ru.length;zu<Nu;zu++)for(var Wu=Ru[zu],Qu=(Yu=_u.getAttribute(Wu)).itemSize,Ku=0;Ku<Qu;Ku++)Uu+="".concat(~~(Yu[Vu[Ku]](Hu)*ju),",");if(Uu in Tu)Fu.push(Tu[Uu]);else{for(zu=0,Nu=Ru.length;zu<Nu;zu++){Wu=Ru[zu];var Yu=_u.getAttribute(Wu),Xc=_u.morphAttributes[Wu],_d=(Qu=Yu.itemSize,Ou[Wu]),_f=Du[Wu];for(Ku=0;Ku<Qu;Ku++){var qu=Vu[Ku];if(_d.push(Yu[qu](Hu)),Xc)for(var Xu=0,Zu=Xc.length;Xu<Zu;Xu++)_f[Xu].push(Xc[Xu][qu](Hu))}}Tu[Uu]=Lu,Fu.push(Lu),Lu++}}var _c=_u.clone();for(ku=0,Nu=Ru.length;ku<Nu;ku++){Wu=Ru[ku];var Ju=_u.getAttribute(Wu),_h=new Ju.array.constructor(Ou[Wu]);if(Yu=new r$a.BufferAttribute(_h,Ju.itemSize,Ju.normalized),_c.setAttribute(Wu,Yu),Wu in Du)for(zu=0;zu<Du[Wu].length;zu++){var ep=_u.morphAttributes[Wu][zu],tp=(_h=new ep.array.constructor(Du[Wu][zu]),new r$a.BufferAttribute(_h,ep.itemSize,ep.normalized));_c.morphAttributes[Wu][zu]=tp}}return _c.setIndex(Fu),_c};function ao(_u){var $u;return new(($u=r$a.Triangle).bind.apply($u,t$8.__spreadArray([void 0],_u.map(function(Tu){return new r$a.Vector3(Tu.x,Tu.y,Tu.z)}),!1)))}var lo={at3d:function(_u,$u){for(var Tu=Ni($u.textureOptions,_u.textures.length),Cu={},Pu=0,Bu=_u.textures;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Cu[Lu]=Li(Lu,Tu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Ru){return ti(Ru.body)}).then(function(Ru){return jt$1(function(){for(var Ou,Du={chunks:[]},Fu=0,Vu=Ru;Fu<Vu.length;Fu++){var ku=Vu[Fu],Nu=Ti.decode(ku);Nu.chunks.length&&(Ou=Du.chunks).push.apply(Ou,Nu.chunks)}return Du})}).then(function(Ru){return jt$1(function(){return Oi(Ru,_u.textureBase,_u.textures.slice(),Tu,Cu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},pbm:function(_u,$u){for(var Tu=Ni($u.textureOptions,_u.textures.length),Cu={},Pu=0,Bu=_u.textures;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Cu[Lu]=Li(Lu,Tu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)}return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Ru){return jt$1(function(){var Ou=new Uint8Array(Ru.body);return Ti.decode(Ou)})}).then(function(Ru){return jt$1(function(){return Oi(Ru,_u.textureBase,_u.textures.slice(),Tu,Cu,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})})},dome:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Tu){return ji(new Uint8Array(Tu.body),_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})},domez:function(_u,$u){return Promise.resolve().then(function(){return it$1(_u.file,{responseType:"arraybuffer",allowHosts:$u.allowHosts,requestProxy:$u.requestProxy,networkSubscribe:$u.networkSubscribe})}).then(function(Tu){return ti(Tu.body)}).then(function(Tu){var Cu=Tu.reduce(function(Lu,Ru){return Lu+Ru.length},0),Pu=new Uint8Array(Cu),Bu=0;return Tu.forEach(function(Lu){Pu.set(Lu,Bu),Bu+=Lu.length}),Pu}).then(function(Tu){return ji(Tu,_u.textureBase,$u.textureOptions,$u.allowHosts,$u.requestProxy,$u.networkSubscribe)})}},uo=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu=_u.call(this)||this;return Cu.empty=!0,Cu.name="model",Cu.loaded=!1,Cu.bvhs=Object.assign([],{loaded:!1}),Cu.bounding=new r$a.Box3,Cu.shownFloor=null,Cu.floorLength=0,Cu.requestProxy=Tu.requestProxy,Cu.networkSubscribe=Tu.networkSubscribe,Cu.allowHosts=Tu.allowHosts,Cu.renderOrder=-3,Cu}return t$8.__extends($u,_u),Object.defineProperty($u.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Tu){this.tiledModel&&(this.tiledModel.enable=Tu)},enumerable:!1,configurable:!0}),$u.prototype.getEdges=function(Tu){var Cu;if(Tu===void 0&&(Tu=30/180*Math.PI),!this.originModel)return[];for(var Pu=Math.cos(Tu),Bu=[],Lu=0,Ru=this.originModel.children;Lu<Ru.length;Lu++){var Ou=Ru[Lu];if(Ou instanceof ft$1){for(var Du={},Fu=["a","b","c"],Vu=so(Ou.geometry),ku=Vu.getAttribute("position").array,Nu=((Cu=Vu.getIndex())===null||Cu===void 0?void 0:Cu.array)||[],Gu=[],ju=[],Hu=0,Uu=ku.length;Hu<Uu;Hu+=3)Gu.push(new r$a.Vector3(ku[Hu],ku[Hu+1],ku[Hu+2]));for(Hu=0,Uu=Nu.length;Hu<Uu;Hu+=3){var zu=Nu[Hu],Wu=Nu[Hu+1],Qu=Nu[Hu+2],Ku=new r$a.Vector3().crossVectors(Gu[Wu].clone().sub(Gu[zu]),Gu[Qu].clone().sub(Gu[zu])).normalize();ju.push({a:zu,b:Wu,c:Qu,normal:Ku})}for(Hu=0,Uu=ju.length;Hu<Uu;Hu++)for(var Yu=ju[Hu],Xc=0;Xc<3;Xc++){var _d=Yu[Fu[Xc]],_f=Yu[Fu[(Xc+1)%3]],qu=[Math.min(_d,_f),Math.max(_d,_f)];Du[Xu=qu[0]+"-"+qu[1]]===void 0?Du[Xu]={index1:qu[0],index2:qu[1],face1:Hu}:Du[Xu].face2=Hu}for(var Xu in Du){var Zu=Du[Xu];if(Zu.face2===void 0||ju[Zu.face1].normal.dot(ju[Zu.face2].normal)<=Pu){var _c=Gu[Zu.index1],Ju=Gu[Zu.index2];Bu.push(new r$a.Line3(_c,Ju))}}Vu.dispose(),Gu.length=0,ju.length=0}}return Bu},$u.prototype.hasFloors=function(){return this.hasFloors_()},$u.prototype.hasFloors_=function(){var Tu=[];return this.traverse(function(Cu){Cu instanceof ft$1&&(Tu[Cu.floorIndex]=!0)}),Tu.length},$u.prototype.show=function(){for(var Tu,Cu,Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];var Lu=this.shownFloor,Ru=null,Ou=(Tu=Pu[1])!==null&&Tu!==void 0?Tu:.1,Du=Pu.length!==0;this.shownFloor=Ru=Du?Pu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$a.Vector3(0,0,0)}),!((Cu=this.tiledModel)===null||Cu===void 0)&&Cu.enable?this.b3dmShow(Lu,Ru):this.at3dShow(Lu,Ru,Ou)},$u.prototype.at3dShow=function(Tu,Cu,Pu){this.traverse(function(Bu){Bu instanceof ft$1&&Bu.material.forEach(function(Lu){Cu===null||Cu===Bu.floorIndex?Lu.opacity=1*Lu.originOpacity:Lu.opacity=Lu.originOpacity*Pu})}),Tu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},$u.prototype.b3dmShow=function(Tu,Cu){var Pu,Bu;if(!((Bu=(Pu=this.tiledModel)===null||Pu===void 0?void 0:Pu.tileset)===null||Bu===void 0)&&Bu.floorInfo){if(typeof Cu=="number"&&Cu>=0&&Cu<this.tiledModel.tileset.floorInfo.length){var Lu=this.tiledModel.tileset.floorInfo,Ru=-Lu[Cu].ground,Ou=Lu[Cu].height+Ru;this.setMaterial({opacity:1,floorInfo:new r$a.Vector3(Ru,Ou,0)})}else this.setMaterial({opacity:1,floorInfo:new r$a.Vector3(0,0,0)});Tu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},$u.prototype.intersectRaycaster=function(Tu,Cu){var Pu=Tu.ray,Bu=Pu.origin,Lu=Pu.direction;if(oo(Cu))if(oo(this.shownFloor)){var Ru=this.floorLength;Cu=[];for(var Ou=-1;Ou<Ru;Ou++)Cu.push(Ou)}else Cu=[this.shownFloor];var Du=[],Fu=[];Array.isArray(Cu)?Fu.push.apply(Fu,Cu):Fu.push(Cu);for(var Vu=function(ju){var Hu=ku.bvhs&&ku.bvhs[ju];if(Hu){var Uu=new Ot$1(Bu.x,Bu.y,Bu.z),zu=new Ot$1(Lu.x,Lu.y,Lu.z);(Wu=Hu.intersectRay(Uu,zu,!0).map(function(Ku){var Yu=Ku.intersectionPoint,Xc=Ku.triangle,_d=new r$a.Vector3(Yu.x,Yu.y,Yu.z);return{point:_d,face:{normal:ao(Xc).getNormal(new r$a.Vector3)},distance:Bu.distanceTo(_d)}})).length&&Du.push.apply(Du,Wu)}else if(ku.originModel){var Wu,Qu=[];ku.originModel.traverse(function(Ku){Ku instanceof ft$1&&Ku.floorIndex===ju&&Qu.push(Ku)}),(Wu=Tu.intersectObjects(Qu).map(function(Ku){return{face:Ku.face?{normal:Ku.face.normal}:void 0,point:Ku.point,distance:Ku.distance}})).length&&Du.push.apply(Du,Wu)}},ku=this,Nu=0,Gu=Fu;Nu<Gu.length;Nu++)Vu(Gu[Nu]);return Du.filter(function(ju){var Hu=ju.distance;return Hu<=Tu.far&&Hu>=Tu.near}).sort(function(ju,Hu){return ju.distance-Hu.distance})},$u.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Tu=[];this.originModel.traverse(function(Yu){Yu instanceof ft$1&&(Tu[Yu.floorIndex]=Tu[Yu.floorIndex]||[],Tu[Yu.floorIndex].push(Yu.geometry))}),this.bvhs.length=0;for(var Cu=0,Pu=Tu;Cu<Pu.length;Cu++){var Bu=Pu[Cu],Lu=0;if(Bu){for(var Ru=0,Ou=Bu;Ru<Ou.length;Ru++){var Du=0;Du=(Gu=Ou[Ru]).index?Gu.index.array.length:Gu.attributes.position.array.length/3,Lu+=3*Math.floor(Du/3)}for(var Fu=new Float32Array(3*Lu),Vu=0,ku=0,Nu=Bu;ku<Nu.length;ku++){var Gu,ju=(Gu=Nu[ku]).attributes.position.array,Hu=Gu.index?Gu.index.array:null;if(Hu){for(var Uu=3*Math.floor(Hu.length/3),zu=0,Wu=void 0,Qu=void 0;zu<Uu;zu++)Wu=3*(Vu+zu),Qu=3*Hu[zu],Fu[Wu]=ju[Qu],Fu[Wu+1]=ju[Qu+1],Fu[Wu+2]=ju[Qu+2];Vu+=Uu}else{for(Uu=3*Math.floor(ju.length/3/3),zu=0,Wu=void 0,Qu=void 0;zu<Uu;zu++)Qu=3*zu,Fu[Wu=3*(Vu+zu)]=ju[Qu],Fu[Wu+1]=ju[Qu+1],Fu[Wu+2]=ju[Qu+2];Vu+=Uu}}var Ku=new qt$1().create(Fu).splitNode(50);this.bvhs.push(Ku)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},$u.prototype.load=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Bu=function(Ru,Ou){if(Ou===void 0&&(Ou=[]),/^blob\:/.test(Ru))return"at3d";var Du=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Ru);if(!Du)return"";for(var Fu=0,Vu=String(Du[1]).trim().split(".").slice(1).reverse();Fu<Vu.length;Fu++){var ku=Vu[Fu],Nu=Ou.indexOf(ku);if(Nu>=0)return Ou[Nu]}return""}(Tu.file,Object.keys(lo)),Lu=lo[Bu];if(!Lu)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Bu,") does not support."));return this.name=Tu.file,Lu(Tu,{textureOptions:Cu,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Ru){var Ou=Ru.objects,Du=Ru.texturePromise;Pu.bounding.makeEmpty();var Fu=Pu.originModel=new At$1;Fu.renderOrder=-3;for(var Vu=0,ku=Ou;Vu<ku.length;Vu++)(Hu=ku[Vu]).traverse(function(zu){if(zu instanceof ft$1){var Wu=zu.geometry;Wu.boundingBox||Wu.computeBoundingBox(),Wu.boundingSphere||Wu.computeBoundingSphere(),Pu.bounding.union(Wu.boundingBox)}}),Fu.add(Hu);for(var Nu=Pu.bounding.getCenter(new r$a.Vector3),Gu=0,ju=Ou;Gu<ju.length;Gu++){var Hu;(Hu=ju[Gu]).traverse(function(zu){if(zu instanceof ft$1)for(var Wu=0,Qu=zu.material;Wu<Qu.length;Wu++)Qu[Wu].uniforms.modelCenter.value=Nu})}if(Pu.add(Fu),Pu.floorLength=Pu.hasFloors_(),Pu.empty=!1,Pu.loaded=!0,Tu.tiles&&Tu.tiles.tileset_url&&Tu.tiles.b3md_mappings_url){var Uu=Pu.tiledModel=new ro({onNodeCreated:function(zu){var Wu=Fu.getMaterial();Wu&&(zu.setMaterial(Wu),zu.renderOrder=-3),zu.traverse(function(Qu){if(Qu instanceof ft$1)for(var Ku=0,Yu=Qu.material;Ku<Yu.length;Ku++)Yu[Ku].uniforms.modelCenter.value=Nu})},allowHosts:Pu.allowHosts,networkSubscribe:Pu.networkSubscribe,requestProxy:Pu.requestProxy});Uu.renderOrder=-3,Pu.add(Uu),Uu.load(Tu.tiles)}Tu.bvh&&Pu.buildBVH(),jt$1(function(){Pu.emit("geometryLoaded"),Du.then(function(){Pu.emit("materialLoaded"),Pu.emit("loaded")})})}).catch(function(Ru){return Pu.name="",Pu.emit("error",Ru),Promise.reject(Ru)})},$u.prototype.update=function(Tu,Cu){if(this.originModel){var Pu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Tu,Cu);var Bu=this.tiledModel.tileset.root;Bu.content&&Bu.contentState==="READY"&&Pu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Pu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},$u.prototype.dispose=function(){this.off();var Tu=this.originModel,Cu=this.tiledModel;if(Cu&&(Cu.enable=!1,Cu.reset()),Tu)for(Tu.disposeGeometry(),Tu.disposeMaterial();Tu.children.length;)Tu.remove(Tu.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},$u}(At$1);Object.assign(uo.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho(_u,$u,Tu){return _u<$u?$u:_u>Tu?Tu:_u}function co(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=[];_u=_u.map(function(Ru){return(Ru!=null?Ru:"").trim()}).filter(function(Ru){return Ru.length>0&&!/^\/+$/.test(Ru)});for(var Cu=0;Cu<_u.length;Cu++){var Pu=Cu===0,Bu=Cu===_u.length-1,Lu=_u[Cu];Pu||(Lu=Lu.replace(/^\/+/,"")),Bu||(Lu=Lu.replace(/\/+$/,"")),Tu.push(Lu)}return Tu.join("/")}function po(_u,$u){if(_u===$u)return!0;if(_u&&$u&&typeof _u=="object"&&typeof $u=="object"){if(_u.constructor!==$u.constructor)return!1;var Tu,Cu,Pu;if(Array.isArray(_u)){if((Tu=_u.length)!=$u.length)return!1;for(Cu=Tu;Cu--!=0;)if(!po(_u[Cu],$u[Cu]))return!1;return!0}if(_u.constructor===RegExp)return _u.source===$u.source&&_u.flags===$u.flags;if(_u.valueOf!==Object.prototype.valueOf)return _u.valueOf()===$u.valueOf();if(_u.toString!==Object.prototype.toString)return _u.toString()===$u.toString();if((Tu=(Pu=Object.keys(_u)).length)!==Object.keys($u).length)return!1;for(Cu=Tu;Cu--!=0;)if(!Object.prototype.hasOwnProperty.call($u,Pu[Cu]))return!1;for(Cu=Tu;Cu--!=0;){var Bu=Pu[Cu];if(!po(_u[Bu],$u[Bu]))return!1}return!0}return _u!=_u&&$u!=$u}function fo(_u){return typeof _u=="number"}function Ao(_u){return(_u&_u-1)==0&&_u!==0}var go=function(){return new Error("Invalid input.")},mo=function(){return new Error("Invalid certificate.")},vo=function(){return new Error("Invalid signature.")};function yo(_u,$u){$u===void 0&&($u=!1);var Tu=typeof _u;if(Tu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Cu="[",Pu=_u.length-1,Bu=0;Bu<Pu;Bu++)Cu+=yo(_u[Bu],!1)+",";return Pu>-1&&(Cu+=yo(_u[Bu],!1)),Cu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return yo(_u.toJSON(),$u);var Lu=Object.keys(_u).sort(),Ru=Lu.length;for(Cu="",Bu=0;Bu<Ru;){var Ou=Lu[Bu],Du=yo(_u[Ou],!0);Du!==void 0&&(Bu&&Cu!==""&&(Cu+=","),Cu+=JSON.stringify(Ou)+":"+Du),Bu++}return"{"+Cu+"}"}switch(Tu){case"function":case"undefined":return $u?void 0:null;case"number":return 0;default:return isFinite(_u)?_u:null}}function bo(_u){return String(yo(_u,!1))}function xo(_u){var $u,Tu,Cu;if(Array.isArray(_u)){var Pu,Bu,Lu=void 0;if(_u.length<=0)return go();for(var Ru=function(Qu){var Ku=xo(_u[Qu]);if(Ku instanceof Error)return{value:Ku};if(Lu){if(Lu!==Ku.issuer)return{value:mo()}}else Lu=Ku.issuer;Pu?Ku.expire.getTime()<Pu.getTime()&&(Pu=Ku.expire):Pu=Ku.expire,Bu=Bu?Bu.filter(function(Yu){return Ku.allowHosts.indexOf(Yu)!==-1}):Ku.allowHosts},Ou=0;Ou<_u.length;Ou++){var Du=Ru(Ou);if(typeof Du=="object")return Du.value}return He({issuer:Lu,expire:Pu,allowHosts:Bu})}var Fu=JSON.parse(_u),Vu=typeof location!="undefined"?location.hostname:"",ku=Date.now();if(typeof Fu!="object")return go();var Nu=new Date(typeof Fu.expire_at=="string"&&/^\d+$/.test(Fu.expire_at)?Number(Fu.expire_at):Fu.expire_at),Gu=Array.isArray(Fu.allow_hosts)?Fu.allow_hosts:[];if(Vu.length===0||ze$1(Vu)||je$1.filter(function(Qu){return Ke(Qu,Vu)}).length>0){var ju=String(($u=Fu.certificate)!==null&&$u!==void 0?$u:"");if(ju){var Hu=new Be$1;return Hu.readCertPEM(ju),He({issuer:Hu.getSubjectString(),expire:Nu,allowHosts:Gu})}return He({issuer:"none",expire:Nu,allowHosts:Gu})}var Uu=String((Tu=Fu.certificate)!==null&&Tu!==void 0?Tu:"");if(!Uu)return mo();var zu=new Be$1;zu.readCertPEM(Uu);var Wu=String((Cu=Fu._signature)!==null&&Cu!==void 0?Cu:"");return Wu?function(Qu,Ku,Yu){var Xc=new Be$1;if(typeof Yu=="string"?Xc.readCertPEM(Yu):Xc.readCertHex(Yu.hex),De(Xc)===!1)return!1;var _d=new X$5;return _d.readCertPubKeyHex(Xc.hex,6),!!_d.verify(Qu,O$b(Ku))}(bo(function(Qu,Ku){for(var Yu={},Xc=0,_d=Object.keys(Qu);Xc<_d.length;Xc++){var _f=_d[Xc];Ku.indexOf(_f)===-1&&(Yu[_f]=Qu[_f])}return Yu}(Fu,["_signature"])),Wu,zu)===!1?vo():ku<Nu.getTime()?Gu.filter(function(Qu){return Ke(Qu,Vu)}).length===0?function(Qu){return new Error("host(".concat(JSON.stringify(Qu),") is not allowed."))}(Vu):He({issuer:zu.getSubjectString(),expire:Nu,allowHosts:Gu}):function(Qu){return new Error("date(".concat(Qu.toString(),") expired."))}(Nu):vo()}var wo=new WeakMap,Eo=function(){function _u(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return _u.prototype.toJSON=function(){return this.raw.works},_u.parse=Co,_u}();function Mo(_u){return _u==null?"null":Array.isArray(_u)?"array":typeof _u=="object"?"dict":"value"}function Io(_u,$u){var Tu=Mo(_u),Cu=Mo($u);if(Cu==="null")return _u;if(Cu==="value")return $u;if(Cu!==Tu)return JSON.parse(JSON.stringify($u));if(Cu==="array")for(var Pu=0;Pu<$u.length;Pu++)_u[Pu]=Io(_u[Pu],$u[Pu]);else if(Cu==="dict")for(var Bu in $u)_u[Bu]=Io(_u[Bu],$u[Bu]);return _u}function So(_u,$u,Tu){for(var Cu,Pu=JSON.stringify($u),Bu=[],Lu=0,Ru=[].concat(_u);Lu<Ru.length;Lu++){var Ou=Ru[Lu];Ou instanceof Eo?Bu.push.apply(Bu,Ou.raw.works):typeof Ou=="string"?Bu.push(Ou):Bu.push(JSON.stringify(Ou))}var Du=xo(Bu);if(Du instanceof Error)return Du;$u=JSON.parse(Pu),_u=Bu.map(function($p){return JSON.parse($p)}).reduce(function($p,np){return Io($p,np)});var Fu=new Eo;if(Du instanceof Error)return Du;Fu.issuer=Du.issuer,Fu.expire=Du.expire,Fu.allowHosts=Du.allowHosts,Fu.raw={works:Bu,options:Pu};var Vu=(Cu=_u.base_url)!==null&&Cu!==void 0?Cu:"";Vu&&Vu[Vu.length-1]!=="/"&&(Vu+="/");var ku=function($p,np){return $p.indexOf(np)===0},Nu=function($p,np){var sp,Pp=$p;if($u.jsonp===!0){Pp=$p.replace(/([\?\#].*)?$/i,"");var Tp=Te$1("".concat(Pp)).slice(0,7);Pp="".concat(Pp,".").concat(Tp,".jsonp")}if($u.shortPath===!0){var Np=Pp.replace(Vu,"").split("."),Vp=(sp=Np.shift())!==null&&sp!==void 0?sp:"",Gp=Np.join(".");Pp=co(Vu,Te$1(Vp))+(Gp?"."+Gp:"")}var qp=Pp.replace(Vu,"");return $u.baseURL&&(Pp=co($u.baseURL,qp)),Tu&&Tu($p,Pp,qp,np),Pp},Gu=function($p,np){var sp,Pp,Tp,Np,Vp,Gp,qp=$p;if(!Fi($p)){var Wp=(Gp=(Np=(Pp=(sp=_u.panorama)===null||sp===void 0?void 0:sp.pano_high_cube_base_url)!==null&&Pp!==void 0?Pp:(Tp=_u.panorama)===null||Tp===void 0?void 0:Tp.pano_cube_base_url)!==null&&Np!==void 0?Np:(Vp=_u.panorama)===null||Vp===void 0?void 0:Vp.base_url)!==null&&Gp!==void 0?Gp:"";Wp&&(Wp=co(Wp,String(np))),qp=co(Wp,qp)}return Fi(qp)||(qp=co(Vu,qp)),ku(qp,Vu)||console.warn("".concat(qp," is not start with base_url(").concat(Vu,").")),Nu(qp,"panorama")},ju=function($p){var np=$p;return Fi(np)||(np=co(Vu,$p)),ku(np,Vu)||console.warn("".concat(np," is not start with base_url(").concat(Vu,").")),Nu(np,"model")},Hu=function($p,np){np===void 0&&(np="");var sp=$p;return Fi(sp)||(sp=co(np,sp)),Fi(sp)||(sp=co(Vu,sp)),ku(sp,Vu)||console.warn("".concat(sp," is not start with base_url(").concat(Vu,").")),Nu(sp,"texture")};if(Du instanceof Error||(Fu.workCode=String(_u.work_code||_u.code||_u.vr_code||_u.workCode),Fu.name=String(_u.name),Du instanceof Error))return Du;if(_u.model){var Uu={bvh:!0,async:!1,textureBase:"",textures:[]};typeof $u.modelBvh=="boolean"?Uu.bvh=$u.modelBvh:typeof _u.model.bvh=="boolean"?Uu.bvh=_u.model.bvh:typeof _u.bvh=="boolean"&&(Uu.bvh=_u.bvh),_u.model.file?Uu.file=ju(_u.model.file):_u.model.file_url&&(Uu.file=ju(_u.model.file_url)),_u.model.textureBase?Uu.textureBase=_u.model.textureBase:_u.model.material_base_url&&(Uu.textureBase=_u.model.material_base_url),Array.isArray(_u.model.textures)?Uu.textures=_u.model.textures.map(function($p){return Hu($p,Uu.textureBase)}):Array.isArray(_u.model.material_textures)&&(Uu.textures=_u.model.material_textures.map(function($p){return Hu($p,Uu.textureBase)})),_u.model.tiles&&(Uu.tiles=_u.model.tiles),Uu.file&&(Fu.model=Uu)}if(Du instanceof Error)return Du;if(_u.observers&&Array.isArray(_u.observers)){var zu=[];_u.panorama&&(Array.isArray(_u.panorama)?zu=_u.panorama:Array.isArray(_u.panorama.list)?zu=_u.panorama.list:Array.isArray(_u.panorama.info)&&(zu=_u.panorama.info));for(var Wu=0;Wu<_u.observers.length;Wu++){var Qu={},Ku=_u.observers[Wu];if(!Ku)break;var Yu=zu[Wu];if(!Yu)break;Ku=Object.assign({},Ku,Yu,{active:Ku.active!==!1&&Yu.active!==!1}),Qu.panoIndex=Wu,Qu.active=Ku.active!==!1,Qu.loadable=Ku.loadable===!0,Qu.images={up:Gu(Ku.images?Ku.images.up:Ku.up,Wu),down:Gu(Ku.images?Ku.images.down:Ku.down,Wu),right:Gu(Ku.images?Ku.images.right:Ku.right,Wu),left:Gu(Ku.images?Ku.images.left:Ku.left,Wu),front:Gu(Ku.images?Ku.images.front:Ku.front,Wu),back:Gu(Ku.images?Ku.images.back:Ku.back,Wu)};var Xc=Ku.images?Ku.images.depth:Ku.depth;Xc&&(Qu.images.depth=Gu(Xc,Wu));var _d=Ku.images?Ku.images.luminance:Ku.luminance;_d&&(Qu.images.luminance={up:Gu(_d.up,Wu),down:Gu(_d.down,Wu),right:Gu(_d.right,Wu),left:Gu(_d.left,Wu),front:Gu(_d.front,Wu),back:Gu(_d.back,Wu)});var _f=Ku.images?Ku.images.tiles:Ku.tiles;if(_f){for(var qu=[],Xu=function($p){var np=$p.match(/\/cube_(\d+)\//);if(np){var sp=Number(np[1]);if(Ao(sp))return sp}return!1},Zu=function($p,np){return $p.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(np,"/")})},_c=0,Ju=_f;_c<Ju.length;_c++){var _h=Ju[_c];if(typeof _h=="number"){var ep=_h,tp=Xu(Qu.images.front);if(tp===!1)continue;if((_p=Math.max(tp,512*Math.pow(2,ep)))>2048){var rp=Zu(Qu.images.up,_p),dp=Zu(Qu.images.down,_p),cp=Zu(Qu.images.right,_p),Sp=Zu(Qu.images.left,_p),yp=Zu(Qu.images.front,_p),Bp=Zu(Qu.images.back,_p);qu.push({level:ep,size:_p,up:rp,down:dp,right:cp,left:Sp,front:yp,back:Bp})}else rp=Qu.images.up,dp=Qu.images.down,cp=Qu.images.right,Sp=Qu.images.left,yp=Qu.images.front,Bp=Qu.images.back,qu.push({level:ep,size:_p,up:rp,down:dp,right:cp,left:Sp,front:yp,back:Bp})}else{var _p;if(typeof(ep=_h.level)!="number"||typeof(_p=_h.size)!="number")continue;rp=Gu(_h.up,Wu),dp=Gu(_h.down,Wu),cp=Gu(_h.right,Wu),Sp=Gu(_h.left,Wu),yp=Gu(_h.front,Wu),Bp=Gu(_h.back,Wu),qu.push({level:ep,size:_p,up:rp,down:dp,right:cp,left:Sp,front:yp,back:Bp})}}qu.sort(function($p,np){return $p.level-np.level}),Qu.images.tiles=qu}if(Ku.position instanceof r$a.Vector3)Qu.position=Ku.position.clone();else{if(!Array.isArray(Ku.position))break;Qu.position=new r$a.Vector3().fromArray(Ku.position)}if(Ku.standingPosition instanceof r$a.Vector3)Qu.standingPosition=Ku.standingPosition.clone();else if(Array.isArray(Ku.standingPosition))Qu.standingPosition=new r$a.Vector3().fromArray(Ku.standingPosition);else if(Ku.standing_position instanceof r$a.Vector3)Qu.standingPosition=Ku.standing_position.clone();else{if(!Array.isArray(Ku.standing_position))break;Qu.standingPosition=new r$a.Vector3().fromArray(Ku.standing_position)}if(Ku.quaternion instanceof r$a.Quaternion)Qu.quaternion=Ku.quaternion.clone();else if(Array.isArray(Ku.quaternion))Qu.quaternion=new r$a.Quaternion().fromArray(Ku.quaternion);else{if(!Ku.quaternion)break;var Cp=Ku.quaternion,Ep=Cp.x,ap=Cp.y,ip=Cp.z,hp=Cp.w;Qu.quaternion=new r$a.Quaternion(Ep,ap,ip,hp)}if(Array.isArray(Ku.accessibleNodes)?Qu.accessibleNodes=Ku.accessibleNodes.slice():Array.isArray(Ku.accessible_nodes)&&(Qu.accessibleNodes=Ku.accessible_nodes.slice()),Array.isArray(Ku.visibleNodes)?Qu.visibleNodes=Ku.visibleNodes.slice():Array.isArray(Ku.visible_nodes)&&(Qu.visibleNodes=Ku.visible_nodes.slice()),fo(Ku.floorIndex)?Qu.floorIndex=Ku.floorIndex:fo(Ku.floor_index)?Qu.floorIndex=Ku.floor_index:Qu.floorIndex=0,Ku.video){var up={};typeof Ku.video.source=="string"&&(up.source=Ku.video.source),Ku.video.matrix instanceof r$a.Matrix4?up.matrix=Ku.video.matrix.clone():Array.isArray(Ku.video.matrix)&&(up.matrix=new r$a.Matrix4().fromArray(Ku.video.matrix)),Ku.video.size instanceof r$a.Vector2?up.size=Ku.video.size.clone():Array.isArray(Ku.video.size)&&(up.size=new r$a.Vector2().fromArray(Ku.video.size)),up.source&&up.matrix&&up.size&&(Qu.video=up)}Fu.observers[Wu]=Qu}}if(Du instanceof Error)return Du;for(var pp=0,gp=Fu.observers;pp<gp.length;pp++){if((Qu=gp[pp]).accessibleNodes)Qu.accessibleNodes=Qu.accessibleNodes.filter(function($p){return $p<Fu.observers.length});else{Qu.accessibleNodes=[];for(var Ap=0;Ap<Fu.observers.length;Ap++)Fu.observers[Ap]!==Qu&&Qu.accessibleNodes.push(Ap)}if(Qu.visibleNodes)Qu.visibleNodes=Qu.visibleNodes.filter(function($p){return $p<Fu.observers.length});else for(Qu.visibleNodes=[],Ap=0;Ap<Fu.observers.length;Ap++)Fu.observers[Ap]!==Qu&&Qu.visibleNodes.push(Ap)}if(Du instanceof Error)return Du;if(_u.initial)if(_u.initial.mode!=="Floorplan"&&_u.initial.mode!=="Topview"&&_u.initial.mode!=="Panorama"&&_u.initial.mode!=="VRPanorama"&&_u.initial.mode!=="Model"&&_u.initial.mode!=="DepthPanorama"||(Fu.initial.mode=_u.initial.mode),fo(_u.initial.latitude)&&(Fu.initial.latitude=_u.initial.latitude),fo(_u.initial.longitude)?Fu.initial.longitude=_u.initial.longitude:fo(_u.initial.heading)&&(Fu.initial.longitude=-(360*(_u.initial.heading-.25)+90)/180*Math.PI),fo(_u.initial.fov)&&(Fu.initial.fov=_u.initial.fov),fo(_u.initial.panoIndex)){var Mp=Fu.observers.length>0?Fu.observers.length-1:0;Fu.initial.panoIndex=ho(_u.initial.panoIndex,0,Mp)}else fo(_u.initial.pano_index)?(Mp=Fu.observers.length>0?Fu.observers.length-1:0,Fu.initial.panoIndex=ho(_u.initial.pano_index,0,Mp)):fo(_u.initial.pano)&&(Mp=Fu.observers.length>0?Fu.observers.length-1:0,Fu.initial.panoIndex=ho(_u.initial.pano,0,Mp));if(Du instanceof Error)return Du;var Dp=He(Fu);return wo.set(Dp,{works:Bu,options:Pu}),Dp}function Co(_u,$u,Tu){typeof _u=="string"&&_u.trim()[0]==="{"&&(_u=JSON.parse(_u));var Cu=wo.get(_u);if(Cu){if($u&&!po(JSON.parse(Cu.options),$u))throw new Error("[PARSE FAILED]: work is parsed with different options.");return _u}var Pu=So(_u,$u!=null?$u:{},Tu);if(Pu instanceof Error)throw new Error("[PARSE FAILED]: "+Pu.message);return Pu}function Bo(_u,$u,Tu){return _u+($u-_u)*Tu}function To(_u,$u){var Tu=$u[1]-$u[0];return _u<$u[0]?To(_u+Tu,$u):_u>=$u[1]?To(_u-Tu,$u):_u}function Po(_u,$u,Tu,Cu){return Cu?function(Pu,Bu,Lu,Ru){var Ou=Ru[1]-Ru[0];return Pu=To(Pu,Ru),Bo((Bu=To(Bu,Ru))-Pu>Ou/2?Pu+Ou:Pu-Bu>Ou/2?Pu-Ou:Pu,Bu,Lu)}(_u,$u,Tu,Cu):Bo(_u,$u,Tu)}var Ro=function(){function _u($u){for(var Tu in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e$2(),this.startVelocity=0,this.duration=0,this.keyframes=[],$u){var Cu=$u[Tu];typeof Cu=="number"?(this.value[Tu]=Cu,this.config[Tu]={circle:!1}):(this.value[Tu]=Cu.value,this.config[Tu]={circle:Cu.circle})}this.keyframes=[{progress:0,value:t$8.__assign({},this.value)},{progress:1,value:t$8.__assign({},this.value)}]}return _u.prototype.getProgress=function($u){var Tu=$u-this.startTime;return Tu<0?0:Tu>=this.duration?1:1-function(Cu,Pu,Bu,Lu){var Ru=(Pu*Bu+2*Cu)/Math.pow(Bu,3),Ou=-(2*Pu*Bu+3*Cu)/Math.pow(Bu,2),Du=Pu,Fu=Cu;return Ru*Math.pow(Lu,3)+Ou*Math.pow(Lu,2)+Du*Lu+Fu}(1,this.startVelocity,this.duration,Tu)},_u.prototype.getValue=function($u){for(var Tu=1;Tu<this.keyframes.length;Tu++)if(this.keyframes[Tu].progress>$u){var Cu=this.keyframes[Tu-1],Pu=this.keyframes[Tu],Bu={};for(var Lu in this.config){var Ru=($u-Cu.progress)/(Pu.progress-Cu.progress);Bu[Lu]=Po(Cu.value[Lu],Pu.value[Lu],Ru,this.config[Lu].circle)}return Bu}return t$8.__assign({},this.keyframes[this.keyframes.length-1].value)},_u.prototype.getProgressVelocity=function($u){var Tu=$u-this.startTime;return Tu>=this.duration?0:function(Cu,Pu,Bu,Lu){var Ru=(Pu*Bu+2*Cu)/Math.pow(Bu,3),Ou=-(2*Pu*Bu+3*Cu)/Math.pow(Bu,2),Du=Pu;return 3*Ru*Math.pow(Lu,2)+2*Ou*Lu+Du}(1,this.startVelocity,this.duration,Tu)},_u.prototype.update=function($u){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress($u))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},_u.prototype.getKeyFrameSegment=function($u){for(var Tu=this.getProgress($u),Cu=1;Cu<this.keyframes.length;Cu++)if(this.keyframes[Cu].progress>Tu)return[this.keyframes[Cu-1],this.keyframes[Cu]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},_u.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},_u.prototype.set=function($u,Tu,Cu,Pu){var Bu;Cu===void 0&&(Cu=0),isNaN(Tu)&&(Tu=0),isNaN(Cu)&&(Cu=0),Pu=Pu!=null?Pu:_e$2();var Lu=this.getProgress(Pu),Ru=this.getValue(Lu),Ou={};for(var Du in this.config)Ou[Du]=(Bu=$u[Du])!==null&&Bu!==void 0?Bu:Ru[Du];var Fu=[{progress:0,value:Ru},{progress:1,value:Ou}];return this.setKeyframes(Fu,Tu,Cu,Pu)},_u.prototype.setKeyframes=function($u,Tu,Cu,Pu){var Bu=this;if(Cu===void 0&&(Cu=0),$u.length<2)throw new Error("keyframes invalid.");return isNaN(Tu)&&(Tu=0),isNaN(Cu)&&(Cu=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Lu,Ru){Pu=Pu!=null?Pu:_e$2(),Bu.progress=0,Bu.ended=!1,Bu.startTime=Pu,Bu.startVelocity=Cu,Bu.keyframes=$u,Bu.duration=Tu,Tu===0?(Bu.progress=1,Bu.value=t$8.__assign({},$u[$u.length-1].value)):Bu.value=t$8.__assign({},$u[0].value),Bu.callbacks=[Lu,Ru]})},_u.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},_u}(),ko=yt$1(),Do=new r$a.Texture(ko);ko.onload=function(){return Do.needsUpdate=!0},ko.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo=new r$a.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo=new r$a.MeshBasicMaterial({map:Do,transparent:!0}),No=new r$a.SphereBufferGeometry(.12,16,16),Fo=new r$a.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo(){if(typeof document=="undefined"){var _u=new r$a.Texture;return Object.assign(_u,{draw:function(Fu){},retain:!1,pool:!1})}var $u=document.createElement("canvas"),Tu=512,Cu=256,Pu=190;$u.setAttribute("width",String(Tu)),$u.setAttribute("height",String(Tu));var Bu=new r$a.Texture($u),Lu=$u.getContext("2d");if(!Lu)throw Error("cannot create canvas context");var Ru=Lu.createRadialGradient(Cu,Cu,150,Cu,Cu,0);function Ou(){var Fu=Math.PI/12,Vu=2*Math.PI/3;Lu&&(Lu.beginPath(),Lu.arc(Cu,Cu,Pu,0*Vu,1*Vu-Fu),Lu.stroke(),Lu.beginPath(),Lu.arc(Cu,Cu,Pu,1*Vu,2*Vu-Fu),Lu.stroke(),Lu.beginPath(),Lu.arc(Cu,Cu,Pu,2*Vu,3*Vu-Fu),Lu.stroke())}function Du(Fu){Lu&&(Lu.clearRect(0,0,Tu,Tu),Lu.lineWidth=20,Fu!==-1&&(Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, 1)",Ou(),Lu.globalCompositeOperation="source-in",Lu.beginPath(),Lu.arc(Cu,Cu,Pu,0,2*Math.PI*Fu),Lu.strokeStyle="rgba(255, 255, 255, 1)",Lu.stroke(),Lu.globalCompositeOperation="source-over",Lu.strokeStyle="rgba(255, 255, 255, "+(Fu?.5:1)+")",Ou()),Lu.beginPath(),Lu.arc(Cu,Cu,150,0,2*Math.PI),Lu.closePath(),Lu.fillStyle=Ru,Lu.fill(),Lu.fillStyle="rgba(255, 255, 255, 0.01)",Lu.fillRect(0,0,Tu,Tu),Bu.needsUpdate=!0)}return Ru.addColorStop(0,"rgba(255, 255, 255, 1)"),Ru.addColorStop(.15,"rgba(255, 255, 255, 1)"),Ru.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Ru.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Du(0),Object.assign(Bu,{draw:Du,retain:!1,pool:!1})}var Vo=[],_o=Qo();_o.draw(0);var Ho=Qo();Ho.draw(1);var qo$1=Qo();qo$1.draw(-1);var zo=new r$a.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko(){return new r$a.Mesh(zo,new r$a.MeshBasicMaterial({map:_o,transparent:!0}))}function Uo(_u,$u){var Tu=_u.map;$u===0||$u===1?(Tu.pool===!0&&(Tu.retain=!1),$u===0&&(_u.map=_o),$u===1&&(_u.map=Ho)):(Tu.pool!==!0&&(_u.map=function(){for(var Cu=0,Pu=Vo;Cu<Pu.length;Cu++){var Bu=Pu[Cu];if(Bu.retain===!1)return Bu}var Lu=Qo();return Lu.pool=!0,Lu.retain=!0,Vo.push(Lu),Lu}()),_u.map.draw($u))}var jo=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.loading=!1,Tu.disabled=!1,Tu.current=!1,Tu.progress=0,Tu.opacity=0,Tu.hitTestMesh=new r$a.Mesh(No,Fo),Tu.add(Tu.hitTestMesh),Tu.centerMesh=Ko(),Tu.centerMesh.position.y+=.01,Tu.add(Tu.centerMesh),Tu.loadingMesh=new r$a.Mesh(Lo,Oo),Tu.loadingMesh.position.y+=.011,Tu.progressMotion=new Ro({progress:Tu.progress}),Tu.opacityMotion=new Ro({opacity:Tu.opacity}),Tu.needsRender=!0,Tu.renderOrder=-2,Tu}return t$8.__extends($u,_u),$u.prototype.setLoading=function(Tu){var Cu=this;this.loading=Tu,this.stopInterval&&this.stopInterval(),Tu?(this.add(this.loadingMesh),this.stopInterval=at$1.shared.add(function(){Cu.loadingMesh.rotateOnAxis(new r$a.Vector3(0,1,0),.1),Cu.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},$u.prototype.setDisabled=function(Tu){this.disabled=Tu,function(Cu,Pu){var Bu=Cu.map;Bu.pool===!0&&(Bu.retain=!1),Cu.map=Pu?qo$1:_o}(this.centerMesh.material,Tu),this.needsRender=!0},$u.prototype.setProgress=function(Tu){this.setLoading(!1),this.setDisabled(!1),this.progress=Tu=ho(Tu,0,1),Tu!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Tu},120).catch(Qe)},$u.prototype.setOpacity=function(Tu){this.opacity=Tu=ho(Tu,0,1),this.current&&(Tu=1),Tu!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Tu},500).catch(Qe)},$u.prototype.setCurrent=function(Tu){this.current!==Tu&&(this.current=Tu,this.setOpacity(this.opacity))},$u.prototype.updateTime=function(Tu,Cu){this.opacityMotion.ended||(this.opacityMotion.update(Tu),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Tu),Uo(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},$u.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},$u}(r$a.Object3D),Go=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo=new Float32Array([0,1,1,1,0,0,1,0]),Xo=new Uint8Array([0,2,1,2,3,1]),Yo=new r$a.BufferGeometry;Yo.setAttribute("position",new r$a.BufferAttribute(Go,3)),Yo.setAttribute("uv",new r$a.BufferAttribute(Wo,2)),Yo.setIndex(new r$a.BufferAttribute(Xo,1));var Zo,Jo,$o=(Zo=yt$1(),Jo=new r$a.Texture,Zo.onload=function(){if(typeof document!="undefined"){var _u=256,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){Tu.drawImage(Zo,0,0,_u,_u),Tu.globalCompositeOperation="source-out";var Cu=128;Tu.beginPath(),Tu.lineWidth=29.952,Tu.arc(Cu,Cu,84.48,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.closePath(),Tu.stroke(),Jo.image=$u,Jo.needsUpdate=!0}}},Zo.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo),es=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),ts=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=138.24,Pu=$u.createLinearGradient(Tu-Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu+Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 1)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Pu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),is$3=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68,Pu=$u.createLinearGradient(Tu+Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu-Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),ns=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},rs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ns($u,2*Math.PI);var Tu=new r$a.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(ns($u,Cu),Tu.needsUpdate=!0)}})}return null},os=[],ss=rs(),as=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.ringRotateMotion=new Ro({angle:0}),Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$a.CustomBlending,blendSrc:r$a.SrcAlphaFactor,blendDst:r$a.OneMinusSrcAlphaFactor,blendSrcAlpha:r$a.OneFactor,blendDstAlpha:r$a.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.centerMesh=new r$a.Mesh(Yo,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:ts,opacity:0}))),Tu.ringMesh=new r$a.Mesh(Yo,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:is$3,opacity:0}))),Tu.loadingMesh=new r$a.Mesh(Yo,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:$o,opacity:.5}))),Tu.disableMesh=new r$a.Mesh(Yo,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:es,opacity:0}))),Tu.progressMesh=new r$a.Mesh(Yo,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:ss,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.ringMesh.position.y=.003,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.centerMesh),Tu.add(Tu.ringMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$8.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu===!0&&this.ringRotateMotion.ended){var Cu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Cu,5e3).catch(Qe)}this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.ringMesh.visible=!Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Bu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Bu===0)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else if(Bu===1)this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else{if(this.progressMesh.material.map===ss){var Lu=os.pop()||rs();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Bu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Ru=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ru,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ru,this.ringMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Ou=this.tapMotion.value.scale;this.centerMesh.scale.set(Ou,Ou,Ou),this.ringMesh.scale.set(Ou,Ou,Ou),this.progressMesh.scale.set(Ou,Ou,Ou),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ru,this.ringMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Tu),this.ringMesh.quaternion.setFromEuler(new r$a.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss&&(os.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$a.Object3D),ls=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us=new Float32Array([0,1,1,1,0,0,1,0]),hs=new Uint8Array([0,2,1,2,3,1]),cs=new r$a.BufferGeometry;cs.setAttribute("position",new r$a.BufferAttribute(ls,3)),cs.setAttribute("uv",new r$a.BufferAttribute(us,2)),cs.setIndex(new r$a.BufferAttribute(hs,1));var ds=function(){var _u=yt$1(),$u=new r$a.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Bu=128;Pu.beginPath(),Pu.lineWidth=29.952,Pu.arc(Bu,Bu,84.48,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 0.5)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),fs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u)return $u.beginPath(),$u.arc(256,256,199.68,0,2*Math.PI),$u.fillStyle="rgba(0, 0, 0, 0.2)",$u.closePath(),$u.fill(),new r$a.CanvasTexture(_u)}return null}(),As=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=138.24,Pu=$u.createLinearGradient(Tu-Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu+Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 1)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Pu.addColorStop(1,"rgba(255, 255, 255, 1)"),$u.beginPath(),$u.lineWidth=33.28,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=38.4,$u.shadowColor="rgba(0, 0, 0, 0.3)",$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),gs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68,Pu=$u.createLinearGradient(Tu+Math.cos(Math.PI/4)*Cu,Tu-Math.sin(Math.PI/4)*Cu,Tu-Math.cos(Math.PI/4)*Cu,Tu+Math.sin(Math.PI/4)*Cu);return Pu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),$u.beginPath(),$u.lineWidth=15.36,$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle=Pu,$u.shadowBlur=25.6,$u.shadowColor="rgba(0, 0, 0, 0.5)",$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),ms=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,84.48,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.2)",_u.stroke()},vs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&ms($u,2*Math.PI);var Tu=new r$a.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(ms($u,Cu),Tu.needsUpdate=!0)}})}return null},ys=[],bs=vs(),xs=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.ringRotateMotion=new Ro({angle:0}),Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$a.CustomBlending,blendSrc:r$a.SrcAlphaFactor,blendDst:r$a.OneMinusSrcAlphaFactor,blendSrcAlpha:r$a.OneFactor,blendDstAlpha:r$a.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.backgroundMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:fs,opacity:1}))),Tu.centerMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:As,opacity:0}))),Tu.ringMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:gs,opacity:0}))),Tu.loadingMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:ds,opacity:.5}))),Tu.disableMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:ps,opacity:0}))),Tu.progressMesh=new r$a.Mesh(cs,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:bs,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.backgroundMesh.position.y=.0018,Tu.ringMesh.position.y=.003,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.backgroundMesh),Tu.add(Tu.centerMesh),Tu.add(Tu.ringMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$8.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu===!0&&this.ringRotateMotion.ended){var Cu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Cu,5e3).catch(Qe)}this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.ringMesh.visible=!Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Bu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Bu===0)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else if(Bu===1)this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=bs);else{if(this.progressMesh.material.map===bs){var Lu=ys.pop()||vs();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Bu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Ru=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ru,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Ru,this.centerMesh.material.opacity=Ru,this.ringMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Ou=this.tapMotion.value.scale;this.backgroundMesh.scale.set(Ou,Ou,Ou),this.centerMesh.scale.set(Ou,Ou,Ou),this.ringMesh.scale.set(Ou,Ou,Ou),this.progressMesh.scale.set(Ou,Ou,Ou),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ru,this.ringMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Tu),this.ringMesh.quaternion.setFromEuler(new r$a.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},$u.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs&&(ys.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$a.Object3D),ws=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$a.BufferGeometry;Is.setAttribute("position",new r$a.BufferAttribute(ws,3)),Is.setAttribute("uv",new r$a.BufferAttribute(Es,2)),Is.setIndex(new r$a.BufferAttribute(Ms,1));var Ss=function(){var _u=yt$1(),$u=new r$a.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Bu=128;Pu.beginPath(),Pu.lineWidth=29.44,Pu.arc(Bu,Bu,55.04,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 0.7)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256,Cu=199.68;return $u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,Cu,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),Bs=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");if($u){var Tu=128;return $u.beginPath(),$u.lineWidth=29.44,$u.arc(Tu,Tu,84.48,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 1)",$u.shadowBlur=19.2,$u.shadowColor="rgba(200, 200, 200, 0.2)",$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),Ts=function(_u,$u){var Tu=128;_u.clearRect(0,0,256,256),_u.beginPath(),_u.lineWidth=29.44,_u.arc(Tu,Tu,57.6,0,2*Math.PI*$u),_u.strokeStyle="rgba(255, 255, 255, 0.6)",_u.stroke()},Ps=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(256)),_u.setAttribute("height",String(256));var $u=_u.getContext("2d");$u&&Ts($u,2*Math.PI);var Tu=new r$a.CanvasTexture(_u);return Object.assign(Tu,{setProgress:function(Cu){$u&&(Ts($u,Cu),Tu.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.tapMotion=new Ro({scale:1,opacity:1}),Tu.progressMotion=new Ro({progress:0}),Tu.progressOpacityMotion=new Ro({opacity:0}),Tu.opacityMotion=new Ro({opacity:0});var Cu={blending:r$a.CustomBlending,blendSrc:r$a.SrcAlphaFactor,blendDst:r$a.OneMinusSrcAlphaFactor,blendSrcAlpha:r$a.OneFactor,blendDstAlpha:r$a.OneMinusSrcAlphaFactor,depthWrite:!1};return Tu.centerMesh=new r$a.Mesh(Is,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Bs,opacity:0}))),Tu.loadingMesh=new r$a.Mesh(Is,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Ss,opacity:.5}))),Tu.disableMesh=new r$a.Mesh(Is,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Cs,opacity:0}))),Tu.progressMesh=new r$a.Mesh(Is,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:ks,opacity:0}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.disableMesh.position.y=.002,Tu.centerMesh.position.y=.002,Tu.loadingMesh.position.y=.005,Tu.progressMesh.position.y=.004,Tu.centerMesh.frustumCulled=!1,Tu.progressMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.renderOrder=-2,Tu.add(Tu.centerMesh),Tu.add(Tu.progressMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.needsRender=!0,Tu}return t$8.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Tu&&(Tu=ho(Tu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe),Tu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe),this.progressMotion.set({progress:ho(1.2*Tu,0,1)},0).catch(Qe)):this.progressMotion.set({progress:ho(1.2*Tu,0,1)},100).catch(Qe)),this.progress=Tu)},$u.prototype.setOpacity=function(Tu){Tu>0&&(Tu=1),this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},500).catch(Qe))},$u.prototype.setCurrent=function(Tu){this.current!==Tu&&(this.current=Tu)},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Tu,this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){var Tu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe),this.progressMotion.set({progress:0},0).catch(Qe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Tu.progressOpacityMotion.set({opacity:Tu.progress>0?1:0},300).catch(Qe),Tu.progressMotion.set({progress:Tu.progress},120).catch(Qe)}).catch(Qe)):Promise.resolve()},$u.prototype.setResolution=function(Tu,Cu){var Pu=ho(Math.max(Tu,Cu)/1e3,1.2,1.8);this.scale.set(Pu,0,Pu)},$u.prototype.updateTime=function(Tu,Cu){var Pu;if(!this.progressMotion.ended){this.progressMotion.update(Tu);var Bu=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Bu===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Bu===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Lu=Rs.pop()||Ps();this.progressMesh.material.map=Lu}(Pu=this.progressMesh.material.map)===null||Pu===void 0||Pu.setProgress(Bu)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Tu);var Ru=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Ru,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Tu),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Cu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Tu);var Ou=this.tapMotion.value.scale;this.centerMesh.scale.set(Ou,Ou,Ou),this.progressMesh.scale.set(Ou,Ou,Ou),Ru=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Ru,this.disableMesh.material.opacity=Ru,this.loadingMesh.material.opacity=Ru,this.needsRender=!0}},$u.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},$u}(r$a.Object3D),Ls=new r$a.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=192,Bu=76.8;Tu.lineWidth=Bu,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(147, 162, 255, 0.3)",Tu.shadowBlur=12.8,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.stroke(),Tu.lineWidth=Bu,Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Lu=Tu.createRadialGradient(Cu,Cu,153.6,Cu,Cu,230.4);Lu.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Tu.strokeStyle=Lu,Tu.stroke(),Tu.beginPath(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,228,0,2*Math.PI);var Ru=Tu.createLinearGradient(0,0,_u,0);return Ru.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ru.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Ru,Tu.stroke(),new r$a.CanvasTexture($u)}}return null}(),Ns=new r$a.MeshBasicMaterial({map:Os,transparent:!0}),Fs=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.ringMesh=new r$a.Mesh(Ls,Ns),Tu.ringMesh.renderOrder=-3,Tu.add(Tu.ringMesh),Tu}return t$8.__extends($u,_u),$u.prototype.dispose=function(){this.remove(this.ringMesh)},$u}(r$a.Object3D);function Qs(_u,$u,Tu){var Cu=Math.abs(_u-$u);return Cu<.001||Tu!==void 0&&Math.abs(Tu-Cu)<.001}function Vs(_u,$u,Tu){return!Qs(_u,$u,Tu)}function _s(_u,$u){return _u.distanceTo($u)<.001}function Hs(_u,$u){return!_s(_u,$u)}var qs=new r$a.Vector3(0,0,0),zs=function(_u){function $u(Tu,Cu){Cu===void 0&&(Cu=qs);var Pu=_u.call(this)||this,Bu=new r$a.BoxBufferGeometry(Tu.max.x-Tu.min.x+2*Cu.x,Tu.max.y-Tu.min.y+2*Cu.y,Tu.max.z-Tu.min.z+2*Cu.z,1,1);Bu.groups.length=0,Bu.groups.push({start:0,count:36,materialIndex:0}),Bu.applyMatrix4(new r$a.Matrix4().makeScale(-1,1,1)),Bu.computeVertexNormals();var Lu=new Mt$1;Lu.defines.USE_MAP=!1,Lu.defines.USE_UV=!1,Lu.uniforms.diffuse.value=new r$a.Color(16777215);var Ru=new ft$1(Bu,[Lu]);return Ru.floorIndex=-1,Ru.position.copy(Tu.getCenter(new r$a.Vector3)),Ru.frustumCulled=!1,Pu.renderOrder=-3,Pu.add(Ru),Pu.boundingBox=new r$a.Box3,Pu.computeBoundingBox(),Pu}return t$8.__extends($u,_u),$u.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},$u.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},$u}(gt$1);function Ks(_u,$u){return $u===void 0&&($u=qs),new zs(_u,$u)}function Us(_u){var $u=_u.getError();if($u===_u.NO_ERROR)return null;switch($u){case _u.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case _u.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case _u.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case _u.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case _u.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case _u.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js=2*Math.PI;function Gs(_u){return _u>=0&&_u<js?_u:(_u%js+js)%js}var Ws=Math.PI,Xs=2*Ws;function Ys(_u,$u,Tu){if(_u===$u)return $u;var Cu=$u-_u;return Math.abs(Cu)<=Tu?$u:_u+(Cu>0?1:-1)*Tu}(function(){try{var _u=document.createElement("canvas");!window.WebGLRenderingContext||!_u.getContext("webgl")&&_u.getContext("experimental-webgl")}catch{return!1}})();var Zs=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(_u)||/webos/i.test(_u)||/ipad|iphone|ipod/i.test(_u)||/iemobile/i.test(_u)||/opera mini/i.test(_u)||/blackberry/i.test(_u)||/windows phone/i.test(_u)};function Js(_u,$u){_u.mode=$u.mode,_u.panoIndex=$u.panoIndex,_u.longitude=$u.longitude,_u.latitude=$u.latitude,_u.fov=$u.fov,_u.offset.copy($u.offset)}function $s(_u,$u){return _u.panoIndex===$u.panoIndex&&_u.mode===$u.mode&&Qs(_u.longitude,$u.longitude,2*Math.PI)&&Qs(_u.latitude,$u.latitude)&&Qs(_u.fov,$u.fov)&&_s(_u.offset,$u.offset)}var ea$1=function(_u){return Number(_u)};function ta(_u,$u,Tu){var Cu;$u===void 0&&($u=ea$1),Tu===void 0&&(Tu=!1);for(var Pu,Bu=1/0,Lu=0,Ru=_u;Lu<Ru.length;Lu++){var Ou=Ru[Lu],Du=$u(Ou);Du<=Bu&&(Pu=(Cu=[Ou,Du])[0],Bu=Cu[1])}return Tu?[Pu,Bu]:Pu}function ia$1(_u){for(var $u in _u)return!1;return!0}function na(_u){return{longitude:_u.longitude,latitude:_u.latitude,fov:_u.fov,offset:_u.offset.clone(),distance:_u.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(_u,$u,Tu,Cu){var Pu,Bu=["","webkit","Moz","MS","ms","o"],Lu=$u.createElement?$u.createElement("div"):Cu,Ru=Math.round,Ou=Math.abs,Du=Date.now;function Fu(op,vp,bp){return setTimeout(Uu(op,bp),vp)}function Vu(op,vp,bp){return!!Array.isArray(op)&&(ku(op,bp[vp],bp),!0)}function ku(op,vp,bp){var Ip;if(op)if(op.forEach)op.forEach(vp,bp);else if(op.length!==Cu)for(Ip=0;Ip<op.length;)vp.call(bp,op[Ip],Ip,op),Ip++;else for(Ip in op)op.hasOwnProperty(Ip)&&vp.call(bp,op[Ip],Ip,op)}function Nu(op,vp,bp){var Ip="DEPRECATED METHOD: "+vp+`
`+bp+` AT 
`;return function(){var Up=new Error("get-stack-trace"),am=Up&&Up.stack?Up.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",sm=_u.console&&(_u.console.warn||_u.console.log);return sm&&sm.call(_u.console,Ip,am),op.apply(this,arguments)}}Pu=typeof Object.assign!="function"?function(op){if(op===Cu||op===null)throw new TypeError("Cannot convert undefined or null to object");for(var vp=Object(op),bp=1;bp<arguments.length;bp++){var Ip=arguments[bp];if(Ip!==Cu&&Ip!==null)for(var Up in Ip)Ip.hasOwnProperty(Up)&&(vp[Up]=Ip[Up])}return vp}:Object.assign;var Gu=Nu(function(op,vp,bp){for(var Ip=Object.keys(vp),Up=0;Up<Ip.length;)(!bp||bp&&op[Ip[Up]]===Cu)&&(op[Ip[Up]]=vp[Ip[Up]]),Up++;return op},"extend","Use `assign`."),ju=Nu(function(op,vp){return Gu(op,vp,!0)},"merge","Use `assign`.");function Hu(op,vp,bp){var Ip,Up=vp.prototype;(Ip=op.prototype=Object.create(Up)).constructor=op,Ip._super=Up,bp&&Pu(Ip,bp)}function Uu(op,vp){return function(){return op.apply(vp,arguments)}}function zu(op,vp){return typeof op=="function"?op.apply(vp&&vp[0]||Cu,vp):op}function Wu(op,vp){return op===Cu?vp:op}function Qu(op,vp,bp){ku(_d(vp),function(Ip){op.addEventListener(Ip,bp,!1)})}function Ku(op,vp,bp){ku(_d(vp),function(Ip){op.removeEventListener(Ip,bp,!1)})}function Yu(op,vp){for(;op;){if(op==vp)return!0;op=op.parentNode}return!1}function Xc(op,vp){return op.indexOf(vp)>-1}function _d(op){return op.trim().split(/\s+/g)}function _f(op,vp,bp){if(op.indexOf&&!bp)return op.indexOf(vp);for(var Ip=0;Ip<op.length;){if(bp&&op[Ip][bp]==vp||!bp&&op[Ip]===vp)return Ip;Ip++}return-1}function qu(op){return Array.prototype.slice.call(op,0)}function Xu(op,vp,bp){for(var Ip=[],Up=[],am=0;am<op.length;){var sm=vp?op[am][vp]:op[am];_f(Up,sm)<0&&Ip.push(op[am]),Up[am]=sm,am++}return bp&&(Ip=vp?Ip.sort(function(_m,nm){return _m[vp]>nm[vp]}):Ip.sort()),Ip}function Zu(op,vp){for(var bp,Ip,Up=vp[0].toUpperCase()+vp.slice(1),am=0;am<Bu.length;){if((Ip=(bp=Bu[am])?bp+Up:vp)in op)return Ip;am++}return Cu}var _c=1;function Ju(op){var vp=op.ownerDocument||op;return vp.defaultView||vp.parentWindow||_u}var _h="ontouchstart"in _u,ep=Zu(_u,"PointerEvent")!==Cu,tp=_h&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rp="touch",dp="mouse",cp=24,Sp=["x","y"],yp=["clientX","clientY"];function Bp(op,vp){var bp=this;this.manager=op,this.callback=vp,this.element=op.element,this.target=op.options.inputTarget,this.domHandler=function(Ip){zu(op.options.enable,[op])&&bp.handler(Ip)},this.init()}function _p(op,vp,bp){var Ip=bp.pointers.length,Up=bp.changedPointers.length,am=1&vp&&Ip-Up==0,sm=12&vp&&Ip-Up==0;bp.isFirst=!!am,bp.isFinal=!!sm,am&&(op.session={}),bp.eventType=vp,function(_m,nm){var Em=_m.session,Lm=nm.pointers,Wm=Lm.length;Em.firstInput||(Em.firstInput=Cp(nm)),Wm>1&&!Em.firstMultiple?Em.firstMultiple=Cp(nm):Wm===1&&(Em.firstMultiple=!1);var qm=Em.firstInput,km=Em.firstMultiple,Rm=km?km.center:qm.center,Hm=nm.center=Ep(Lm);nm.timeStamp=Du(),nm.deltaTime=nm.timeStamp-qm.timeStamp,nm.angle=up(Rm,Hm),nm.distance=hp(Rm,Hm),function($m,bm){var Cm=bm.center,Nm=$m.offsetDelta||{},Um=$m.prevDelta||{},Vm=$m.prevInput||{};bm.eventType!==1&&Vm.eventType!==4||(Um=$m.prevDelta={x:Vm.deltaX||0,y:Vm.deltaY||0},Nm=$m.offsetDelta={x:Cm.x,y:Cm.y}),bm.deltaX=Um.x+(Cm.x-Nm.x),bm.deltaY=Um.y+(Cm.y-Nm.y)}(Em,nm),nm.offsetDirection=ip(nm.deltaX,nm.deltaY);var Om=ap(nm.deltaTime,nm.deltaX,nm.deltaY);nm.overallVelocityX=Om.x,nm.overallVelocityY=Om.y,nm.overallVelocity=Ou(Om.x)>Ou(Om.y)?Om.x:Om.y,nm.scale=km?function($m,bm){return hp(bm[0],bm[1],yp)/hp($m[0],$m[1],yp)}(km.pointers,Lm):1,nm.rotation=km?function($m,bm){return up(bm[1],bm[0],yp)+up($m[1],$m[0],yp)}(km.pointers,Lm):0,nm.maxPointers=Em.prevInput?nm.pointers.length>Em.prevInput.maxPointers?nm.pointers.length:Em.prevInput.maxPointers:nm.pointers.length,function($m,bm){var Cm,Nm,Um,Vm,Tm=$m.lastInterval||bm,Qm=bm.timeStamp-Tm.timeStamp;if(bm.eventType!=8&&(Qm>25||Tm.velocity===Cu)){var Km=bm.deltaX-Tm.deltaX,Xm=bm.deltaY-Tm.deltaY,Gm=ap(Qm,Km,Xm);Nm=Gm.x,Um=Gm.y,Cm=Ou(Gm.x)>Ou(Gm.y)?Gm.x:Gm.y,Vm=ip(Km,Xm),$m.lastInterval=bm}else Cm=Tm.velocity,Nm=Tm.velocityX,Um=Tm.velocityY,Vm=Tm.direction;bm.velocity=Cm,bm.velocityX=Nm,bm.velocityY=Um,bm.direction=Vm}(Em,nm);var Fm=_m.element;Yu(nm.srcEvent.target,Fm)&&(Fm=nm.srcEvent.target),nm.target=Fm}(op,bp),op.emit("hammer.input",bp),op.recognize(bp),op.session.prevInput=bp}function Cp(op){for(var vp=[],bp=0;bp<op.pointers.length;)vp[bp]={clientX:Ru(op.pointers[bp].clientX),clientY:Ru(op.pointers[bp].clientY)},bp++;return{timeStamp:Du(),pointers:vp,center:Ep(vp),deltaX:op.deltaX,deltaY:op.deltaY}}function Ep(op){var vp=op.length;if(vp===1)return{x:Ru(op[0].clientX),y:Ru(op[0].clientY)};for(var bp=0,Ip=0,Up=0;Up<vp;)bp+=op[Up].clientX,Ip+=op[Up].clientY,Up++;return{x:Ru(bp/vp),y:Ru(Ip/vp)}}function ap(op,vp,bp){return{x:vp/op||0,y:bp/op||0}}function ip(op,vp){return op===vp?1:Ou(op)>=Ou(vp)?op<0?2:4:vp<0?8:16}function hp(op,vp,bp){bp||(bp=Sp);var Ip=vp[bp[0]]-op[bp[0]],Up=vp[bp[1]]-op[bp[1]];return Math.sqrt(Ip*Ip+Up*Up)}function up(op,vp,bp){bp||(bp=Sp);var Ip=vp[bp[0]]-op[bp[0]],Up=vp[bp[1]]-op[bp[1]];return 180*Math.atan2(Up,Ip)/Math.PI}Bp.prototype={handler:function(){},init:function(){this.evEl&&Qu(this.element,this.evEl,this.domHandler),this.evTarget&&Qu(this.target,this.evTarget,this.domHandler),this.evWin&&Qu(Ju(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ku(this.element,this.evEl,this.domHandler),this.evTarget&&Ku(this.target,this.evTarget,this.domHandler),this.evWin&&Ku(Ju(this.element),this.evWin,this.domHandler)}};var pp={mousedown:1,mousemove:2,mouseup:4},gp="mousedown",Ap="mousemove mouseup";function Mp(){this.evEl=gp,this.evWin=Ap,this.pressed=!1,Bp.apply(this,arguments)}Hu(Mp,Bp,{handler:function(op){var vp=pp[op.type];1&vp&&(op.button===0||op.button===2)&&(this.pressed=!0),2&vp&&op.which!==1&&(vp=4),this.pressed&&(4&vp&&(this.pressed=!1),this.callback(this.manager,vp,{pointers:[op],changedPointers:[op],pointerType:dp,srcEvent:op}))}});var Dp={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$p={2:rp,3:"pen",4:dp,5:"kinect"},np="pointerdown",sp="pointermove pointerup pointercancel";function Pp(){this.evEl=np,this.evWin=sp,Bp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_u.MSPointerEvent&&!_u.PointerEvent&&(np="MSPointerDown",sp="MSPointerMove MSPointerUp MSPointerCancel"),Hu(Pp,Bp,{handler:function(op){var vp=this.store,bp=!1,Ip=!1,Up=op.type.toLowerCase().replace("ms",""),am=Dp[Up],sm=$p[op.pointerType]||op.pointerType,_m=sm==rp,nm=_f(vp,op.pointerId,"pointerId");1&am&&(op.button===0||op.button===2||_m)?nm<0&&(vp.push(op),nm=vp.length-1):12&am?bp=!0:_m||op.buttons!==0||(bp=!0,Ip=!0,am=Dp.pointerup),nm<0||(Ip||(vp[nm]=op),this.callback(this.manager,am,{pointers:vp,changedPointers:[op],pointerType:sm,srcEvent:vp[nm]}),bp&&vp.splice(nm,1))}});var Tp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Np="touchstart",Vp="touchstart touchmove touchend touchcancel";function Gp(){this.evTarget=Np,this.evWin=Vp,this.started=!1,Bp.apply(this,arguments)}function qp(op,vp){var bp=qu(op.touches),Ip=qu(op.changedTouches);return 12&vp&&(bp=Xu(bp.concat(Ip),"identifier",!0)),[bp,Ip]}Hu(Gp,Bp,{handler:function(op){var vp=Tp[op.type];if(vp===1&&(this.started=!0),this.started){var bp=qp.call(this,op,vp);12&vp&&bp[0].length-bp[1].length==0&&(this.started=!1),this.callback(this.manager,vp,{pointers:bp[0],changedPointers:bp[1],pointerType:rp,srcEvent:op})}}});var Wp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Jp="touchstart touchmove touchend touchcancel";function Hp(){this.evTarget=Jp,this.targetIds={},Bp.apply(this,arguments)}function Kp(op,vp){var bp=qu(op.touches),Ip=this.targetIds;if(3&vp&&bp.length===1)return Ip[bp[0].identifier]=!0,[bp,bp];var Up,am,sm=qu(op.changedTouches),_m=[],nm=this.target;if(am=bp.filter(function(Em){return Yu(Em.target,nm)}),vp===1)for(Up=0;Up<am.length;)Ip[am[Up].identifier]=!0,Up++;for(Up=0;Up<sm.length;)Ip[sm[Up].identifier]&&_m.push(sm[Up]),12&vp&&delete Ip[sm[Up].identifier],Up++;return _m.length?[Xu(am.concat(_m),"identifier",!0),_m]:void 0}Hu(Hp,Bp,{handler:function(op){var vp=Wp[op.type],bp=Kp.call(this,op,vp);bp&&this.callback(this.manager,vp,{pointers:bp[0],changedPointers:bp[1],pointerType:rp,srcEvent:op})}});function jp(){Bp.apply(this,arguments);var op=Uu(this.handler,this);this.touch=new Hp(this.manager,op),this.mouse=new Mp(this.manager,op),this.primaryTouch=null,this.lastTouches=[]}function Yp(op,vp){1&op?(this.primaryTouch=vp.changedPointers[0].identifier,xp.call(this,vp)):12&op&&xp.call(this,vp)}function xp(op){var vp=op.changedPointers[0];if(vp.identifier===this.primaryTouch){var bp={x:vp.clientX,y:vp.clientY};this.lastTouches.push(bp);var Ip=this.lastTouches;setTimeout(function(){var Up=Ip.indexOf(bp);Up>-1&&Ip.splice(Up,1)},2500)}}function Qp(op){for(var vp=op.srcEvent.clientX,bp=op.srcEvent.clientY,Ip=0;Ip<this.lastTouches.length;Ip++){var Up=this.lastTouches[Ip],am=Math.abs(vp-Up.x),sm=Math.abs(bp-Up.y);if(am<=25&&sm<=25)return!0}return!1}Hu(jp,Bp,{handler:function(op,vp,bp){var Ip=bp.pointerType==rp,Up=bp.pointerType==dp;if(!(Up&&bp.sourceCapabilities&&bp.sourceCapabilities.firesTouchEvents)){if(Ip)Yp.call(this,vp,bp);else if(Up&&Qp.call(this,bp))return;this.callback(op,vp,bp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zp=Lu?Zu(Lu.style,"touchAction"):Cu,tm=Zp!==Cu,em="compute",lm="auto",pm="manipulation",mm="none",Sm="pan-x",fm="pan-y",xm=function(){if(!tm)return!1;var op={},vp=_u.CSS&&_u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(bp){op[bp]=!vp||_u.CSS.supports("touch-action",bp)}),op}();function wm(op,vp){this.manager=op,this.set(vp)}wm.prototype={set:function(op){op==em&&(op=this.compute()),tm&&this.manager.element.style&&xm[op]&&(this.manager.element.style[Zp]=op),this.actions=op.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var op=[];return ku(this.manager.recognizers,function(vp){zu(vp.options.enable,[vp])&&(op=op.concat(vp.getTouchAction()))}),function(vp){if(Xc(vp,mm))return mm;var bp=Xc(vp,Sm),Ip=Xc(vp,fm);return bp&&Ip?mm:bp||Ip?bp?Sm:fm:Xc(vp,pm)?pm:lm}(op.join(" "))},preventDefaults:function(op){var vp=op.srcEvent,bp=op.offsetDirection;if(this.manager.session.prevented)vp.preventDefault();else{var Ip=this.actions,Up=Xc(Ip,mm)&&!xm.none,am=Xc(Ip,fm)&&!xm["pan-y"],sm=Xc(Ip,Sm)&&!xm["pan-x"];if(Up){var _m=op.pointers.length===1,nm=op.distance<2,Em=op.deltaTime<250;if(_m&&nm&&Em)return}if(!sm||!am)return Up||am&&6&bp||sm&&bp&cp?this.preventSrc(vp):void 0}},preventSrc:function(op){this.manager.session.prevented=!0,op.preventDefault()}};var gm=32;function Mm(op){this.options=Pu({},this.defaults,op||{}),this.id=_c++,this.manager=null,this.options.enable=Wu(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Im(op){return 16&op?"cancel":8&op?"end":4&op?"move":2&op?"start":""}function ym(op){return op==16?"down":op==8?"up":op==2?"left":op==4?"right":""}function mp(op,vp){var bp=vp.manager;return bp?bp.get(op):op}function Fp(){Mm.apply(this,arguments)}function Lp(){Fp.apply(this,arguments),this.pX=null,this.pY=null}function kp(){Fp.apply(this,arguments)}function Xp(){Mm.apply(this,arguments),this._timer=null,this._input=null}function cm(){Fp.apply(this,arguments)}function um(){Fp.apply(this,arguments)}function im(){Mm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function om(op,vp){return(vp=vp||{}).recognizers=Wu(vp.recognizers,om.defaults.preset),new dm(op,vp)}Mm.prototype={defaults:{},set:function(op){return Pu(this.options,op),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(op){if(Vu(op,"recognizeWith",this))return this;var vp=this.simultaneous;return vp[(op=mp(op,this)).id]||(vp[op.id]=op,op.recognizeWith(this)),this},dropRecognizeWith:function(op){return Vu(op,"dropRecognizeWith",this)||(op=mp(op,this),delete this.simultaneous[op.id]),this},requireFailure:function(op){if(Vu(op,"requireFailure",this))return this;var vp=this.requireFail;return _f(vp,op=mp(op,this))===-1&&(vp.push(op),op.requireFailure(this)),this},dropRequireFailure:function(op){if(Vu(op,"dropRequireFailure",this))return this;op=mp(op,this);var vp=_f(this.requireFail,op);return vp>-1&&this.requireFail.splice(vp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(op){return!!this.simultaneous[op.id]},emit:function(op){var vp=this,bp=this.state;function Ip(Up){vp.manager.emit(Up,op)}bp<8&&Ip(vp.options.event+Im(bp)),Ip(vp.options.event),op.additionalEvent&&Ip(op.additionalEvent),bp>=8&&Ip(vp.options.event+Im(bp))},tryEmit:function(op){if(this.canEmit())return this.emit(op);this.state=gm},canEmit:function(){for(var op=0;op<this.requireFail.length;){if(!(33&this.requireFail[op].state))return!1;op++}return!0},recognize:function(op){var vp=Pu({},op);if(!zu(this.options.enable,[this,vp]))return this.reset(),void(this.state=gm);56&this.state&&(this.state=1),this.state=this.process(vp),30&this.state&&this.tryEmit(vp)},process:function(op){},getTouchAction:function(){},reset:function(){}},Hu(Fp,Mm,{defaults:{pointers:1},attrTest:function(op){var vp=this.options.pointers;return vp===0||op.pointers.length===vp},process:function(op){var vp=this.state,bp=op.eventType,Ip=6&vp,Up=this.attrTest(op);return Ip&&(8&bp||!Up)?16|vp:Ip||Up?4&bp?8|vp:2&vp?4|vp:2:gm}}),Hu(Lp,Fp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var op=this.options.direction,vp=[];return 6&op&&vp.push(fm),op&cp&&vp.push(Sm),vp},directionTest:function(op){var vp=this.options,bp=!0,Ip=op.distance,Up=op.direction,am=op.deltaX,sm=op.deltaY;return Up&vp.direction||(6&vp.direction?(Up=am===0?1:am<0?2:4,bp=am!=this.pX,Ip=Math.abs(op.deltaX)):(Up=sm===0?1:sm<0?8:16,bp=sm!=this.pY,Ip=Math.abs(op.deltaY))),op.direction=Up,bp&&Ip>vp.threshold&&Up&vp.direction},attrTest:function(op){return Fp.prototype.attrTest.call(this,op)&&(2&this.state||!(2&this.state)&&this.directionTest(op))},emit:function(op){this.pX=op.deltaX,this.pY=op.deltaY;var vp=ym(op.direction);vp&&(op.additionalEvent=this.options.event+vp),this._super.emit.call(this,op)}}),Hu(kp,Fp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(op){return this._super.attrTest.call(this,op)&&(Math.abs(op.scale-1)>this.options.threshold||2&this.state)},emit:function(op){if(op.scale!==1){var vp=op.scale<1?"in":"out";op.additionalEvent=this.options.event+vp}this._super.emit.call(this,op)}}),Hu(Xp,Mm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lm]},process:function(op){var vp=this.options,bp=op.pointers.length===vp.pointers,Ip=op.distance<vp.threshold,Up=op.deltaTime>vp.time;if(this._input=op,!Ip||!bp||12&op.eventType&&!Up)this.reset();else if(1&op.eventType)this.reset(),this._timer=Fu(function(){this.state=8,this.tryEmit()},vp.time,this);else if(4&op.eventType)return 8;return gm},reset:function(){clearTimeout(this._timer)},emit:function(op){this.state===8&&(op&&4&op.eventType?this.manager.emit(this.options.event+"up",op):(this._input.timeStamp=Du(),this.manager.emit(this.options.event,this._input)))}}),Hu(cm,Fp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mm]},attrTest:function(op){return this._super.attrTest.call(this,op)&&(Math.abs(op.rotation)>this.options.threshold||2&this.state)}}),Hu(um,Fp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Lp.prototype.getTouchAction.call(this)},attrTest:function(op){var vp,bp=this.options.direction;return 30&bp?vp=op.overallVelocity:6&bp?vp=op.overallVelocityX:bp&cp&&(vp=op.overallVelocityY),this._super.attrTest.call(this,op)&&bp&op.offsetDirection&&op.distance>this.options.threshold&&op.maxPointers==this.options.pointers&&Ou(vp)>this.options.velocity&&4&op.eventType},emit:function(op){var vp=ym(op.offsetDirection);vp&&this.manager.emit(this.options.event+vp,op),this.manager.emit(this.options.event,op)}}),Hu(im,Mm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[pm]},process:function(op){var vp=this.options,bp=op.pointers.length===vp.pointers,Ip=op.distance<vp.threshold,Up=op.deltaTime<vp.time;if(this.reset(),1&op.eventType&&this.count===0)return this.failTimeout();if(Ip&&Up&&bp){if(op.eventType!=4)return this.failTimeout();var am=!this.pTime||op.timeStamp-this.pTime<vp.interval,sm=!this.pCenter||hp(this.pCenter,op.center)<vp.posThreshold;if(this.pTime=op.timeStamp,this.pCenter=op.center,sm&&am?this.count+=1:this.count=1,this._input=op,this.count%vp.taps===0)return this.hasRequireFailures()?(this._timer=Fu(function(){this.state=8,this.tryEmit()},vp.interval,this),2):8}return gm},failTimeout:function(){return this._timer=Fu(function(){this.state=gm},this.options.interval,this),gm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),om.VERSION="2.0.7",om.defaults={domEvents:!1,touchAction:em,enable:!0,inputTarget:null,inputClass:null,preset:[[cm,{enable:!1}],[kp,{enable:!1},["rotate"]],[um,{direction:6}],[Lp,{direction:6},["swipe"]],[im],[im,{event:"doubletap",taps:2},["tap"]],[Xp]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function dm(op,vp){var bp;this.options=Pu({},om.defaults,vp||{}),this.options.inputTarget=this.options.inputTarget||op,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=op,this.input=new((bp=this).options.inputClass||(ep?Pp:tp?Hp:_h?jp:Mp))(bp,_p),this.touchAction=new wm(this,this.options.touchAction),Am(this,!0),ku(this.options.recognizers,function(Ip){var Up=this.add(new Ip[0](Ip[1]));Ip[2]&&Up.recognizeWith(Ip[2]),Ip[3]&&Up.requireFailure(Ip[3])},this)}function Am(op,vp){var bp,Ip=op.element;Ip.style&&(ku(op.options.cssProps,function(Up,am){bp=Zu(Ip.style,am),vp?(op.oldCssProps[bp]=Ip.style[bp],Ip.style[bp]=Up):Ip.style[bp]=op.oldCssProps[bp]||""}),vp||(op.oldCssProps={}))}return dm.prototype={set:function(op){return Pu(this.options,op),op.touchAction&&this.touchAction.update(),op.inputTarget&&(this.input.destroy(),this.input.target=op.inputTarget,this.input.init()),this},stop:function(op){this.session.stopped=op?2:1},recognize:function(op){var vp=this.session;if(!vp.stopped){var bp;this.touchAction.preventDefaults(op);var Ip=this.recognizers,Up=vp.curRecognizer;(!Up||Up&&8&Up.state)&&(Up=vp.curRecognizer=null);for(var am=0;am<Ip.length;)bp=Ip[am],vp.stopped===2||Up&&bp!=Up&&!bp.canRecognizeWith(Up)?bp.reset():bp.recognize(op),!Up&&14&bp.state&&(Up=vp.curRecognizer=bp),am++}},get:function(op){if(op instanceof Mm)return op;for(var vp=this.recognizers,bp=0;bp<vp.length;bp++)if(vp[bp].options.event==op)return vp[bp];return null},add:function(op){if(Vu(op,"add",this))return this;var vp=this.get(op.options.event);return vp&&this.remove(vp),this.recognizers.push(op),op.manager=this,this.touchAction.update(),op},remove:function(op){if(Vu(op,"remove",this))return this;if(op=this.get(op)){var vp=this.recognizers,bp=_f(vp,op);bp!==-1&&(vp.splice(bp,1),this.touchAction.update())}return this},on:function(op,vp){if(op!==Cu&&vp!==Cu){var bp=this.handlers;return ku(_d(op),function(Ip){bp[Ip]=bp[Ip]||[],bp[Ip].push(vp)}),this}},off:function(op,vp){if(op!==Cu){var bp=this.handlers;return ku(_d(op),function(Ip){vp?bp[Ip]&&bp[Ip].splice(_f(bp[Ip],vp),1):delete bp[Ip]}),this}},emit:function(op,vp){this.options.domEvents&&function(Up,am){var sm=$u.createEvent("Event");sm.initEvent(Up,!0,!0),sm.gesture=am,am.target.dispatchEvent(sm)}(op,vp);var bp=this.handlers[op]&&this.handlers[op].slice();if(bp&&bp.length){vp.type=op,vp.preventDefault=function(){vp.srcEvent.preventDefault()};for(var Ip=0;Ip<bp.length;)bp[Ip](vp),Ip++}},destroy:function(){this.element&&Am(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Pu(om,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:gm,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:cp,DIRECTION_ALL:30,Manager:dm,Input:Bp,TouchAction:wm,TouchInput:Hp,MouseInput:Mp,PointerEventInput:Pp,TouchMouseInput:jp,SingleTouchInput:Gp,Recognizer:Mm,AttrRecognizer:Fp,Tap:im,Pan:Lp,Swipe:um,Pinch:kp,Rotate:cm,Press:Xp,on:Qu,off:Ku,each:ku,merge:ju,extend:Gu,assign:Pu,inherit:Hu,bindFn:Uu,prefixed:Zu}),om}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(_u,$u,Tu){var Cu=$u.offsetWidth,Pu=$u.offsetHeight,Bu=$u.getBoundingClientRect(),Lu=Bu.top,Ru=Bu.left;return Tu&&(Ru+=Cu*Tu.left,Lu+=Pu*(1-Tu.bottom-Tu.height),Cu*=Tu.width,Pu*=Tu.height),new r$a.Vector2((_u.x-Ru)/Cu*2-1,-(_u.y-Lu)/Pu*2+1)}var sa=new r$a.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$a.BufferGeometry;aa$1.setAttribute("position",new r$a.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$a.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$a.Mesh(aa$1),ua=new r$a.Scene;ua.add(la);var ha$1=function(){function _u($u,Tu){var Cu;this.renderer=$u,this.material=new r$a.ShaderMaterial({vertexShader:(Cu=Tu.vertex)!==null&&Cu!==void 0?Cu:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Tu.fragment,uniforms:Object.assign({inputBuffer:new r$a.Uniform(null)},Tu.uniforms),defines:Object.assign({},Tu.defines),blending:r$a.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getRenderTarget(),Pu=la.material;this.material.uniforms.inputBuffer.value=$u.texture,la.material=this.material,this.renderer.setRenderTarget(Tu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Cu),la.material=Pu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),ca$1=function(){function _u($u){this.renderer=$u,this.material=new r$a.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$a.Uniform(new r$a.Vector3)}),blending:r$a.NoBlending,depthWrite:!1,depthTest:!1})}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getRenderTarget(),Pu=la.material;this.material.uniforms.inputValue.value.copy($u),la.material=this.material,this.renderer.setRenderTarget(Tu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Cu),la.material=Pu},_u.prototype.dispose=function(){this.material.dispose()},_u}(),da$1=function(_u){function $u(Tu){return _u.call(this,Tu,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$8.__extends($u,_u),$u}(ha$1),pa=function(){function _u($u){this.enable=!0,this.renderer=$u,this.copyPass=new da$1(this.renderer)}return _u.prototype.render=function($u,Tu){this.copyPass.render($u,Tu)},_u.prototype.dispose=function(){this.copyPass.dispose()},_u}(),fa$1=function(_u){function $u(Tu){var Cu,Pu=this;Pu=_u.call(this)||this;var Bu=$u.parseArgs(Tu);return Pu.pending=!0,Pu.userAction=Bu.initial[3],Pu.destroyed=!1,Pu.ident=Bu.ident,Pu.scene=Bu.scene,Pu.helper=Bu.helper,Pu.camera=Bu.camera,Pu.renderer=Bu.renderer,Pu.scissor=Bu.scissor,Pu.element=Bu.element,Pu.model=Bu.model,Pu.enableIOSEDR=(Cu=Bu.enableIOSEDR)!==null&&Cu!==void 0&&Cu,Pu.work=Bu.work,Pu.imageOptions=Bu.imageOptions,Pu.videoTexture=Bu.videoTexture,Pu.networkSubscribe=Bu.networkSubscribe,Pu.requestProxy=Bu.requestProxy,Pu.needsRender=!0,Pu.maxFov=120,Pu.minFov=40,Pu.maxLatitude=+Math.PI/2,Pu.minLatitude=-Math.PI/2,Pu.cameraMotion=new Ro({longitude:{value:Pu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Pu.camera.pose.latitude,fov:Pu.camera.pose.fov}),Pu.eventUnbinds=[Bu.element].concat(Bu.extraElements||[]).map(function(Lu){return Pu.bindEvents(Lu)}),at$1.shared.add(function(){return Pu.initAnimation.apply(Pu,Bu.initial)},!0),Pu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){return t$8.__assign({},Tu)},$u.initAnimationEndState=function(Tu){var Cu=this.parseArgs(Tu);return{longitude:Cu.camera.pose.longitude,latitude:Cu.camera.pose.latitude,fov:Cu.camera.pose.fov,offset:Cu.camera.pose.offset.clone(),distance:Cu.camera.pose.distance}},$u.prototype.destroy=function(){var Tu;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Cu=0,Pu=this.eventUnbinds;Cu<Pu.length;Cu++)(0,Pu[Cu])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Tu=this.pressState)===null||Tu===void 0||Tu.stop(),delete this.pressState},$u.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},$u.prototype.bindExtraElement=function(Tu){for(var Cu=0,Pu=this.eventUnbinds;Cu<Pu.length;Cu++)if(Pu[Cu].element===Tu)return;this.eventUnbinds.push(this.bindEvents(Tu))},$u.prototype.unbindExtraElement=function(Tu){for(var Cu=[],Pu=0,Bu=this.eventUnbinds;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Lu.element===Tu?Lu():Cu.push(Lu)}this.eventUnbinds=Cu},$u.prototype.updateRenderSize=function(){this.needsRender=!0},$u.prototype.updateModel=function(Tu){this.model=Tu,this.needsRender=!0},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){return this.work=Tu,this.userAction=Lu,!1},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Bu=2;Bu<arguments.length;Bu++)Pu[Bu-2]=arguments[Bu];if(!this.destroyed){var Lu={};this.cameraMotion.ended&&(this.cameraMotion.update(Tu),Lu.longitude=this.cameraMotion.value.longitude,Lu.latitude=this.cameraMotion.value.latitude,Lu.fov=this.cameraMotion.value.fov),ia$1(Lu)&&this.setCamera(Lu)}},$u.prototype.render=function(){this.renderer.render(this.scene,this.camera)},$u.prototype.postProcessing=function(Tu,Cu){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Tu,Cu))},$u.prototype.updateCamera=function(Tu,Cu,Pu){return this.userAction=Pu,this.cameraMotion.set(Tu,Cu)},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={}),this.userAction=Pu;var Bu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Cu.moveStartCallback&&Cu.moveStartCallback(Tu,Bu),this.emit("moveToPano",Tu,this.userAction),this.emit("panoWillArrive",Tu,Bu,this.userAction),this.emit("panoArrived",Tu,Bu,this.userAction),Cu.moveEndCallback&&Cu.moveEndCallback(Tu,Bu)},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){this.pending=!1,this.userAction=Bu},$u.prototype.setCamera=function(Tu){var Cu,Pu,Bu,Lu,Ru;Tu===void 0&&(Tu={});var Ou=(Cu=Tu.longitude)!==null&&Cu!==void 0?Cu:this.camera.pose.longitude,Du=(Pu=Tu.latitude)!==null&&Pu!==void 0?Pu:this.camera.pose.latitude,Fu=(Bu=Tu.fov)!==null&&Bu!==void 0?Bu:this.camera.pose.fov,Vu=(Lu=Tu.distance)!==null&&Lu!==void 0?Lu:this.camera.pose.distance,ku=(Ru=Tu.offset)!==null&&Ru!==void 0?Ru:this.camera.pose.offset,Nu=this.camera.position.clone(),Gu=Vs(Ou,this.camera.pose.longitude,2*Math.PI)||Vs(Du,this.camera.pose.latitude),ju=Vs(Fu,this.camera.pose.fov),Hu=Vs(Vu,this.camera.pose.distance),Uu=Hs(ku,this.camera.pose.offset);this.camera.setFromPose({longitude:Ou,latitude:Du,fov:Fu,distance:Vu,offset:ku});var zu=Hs(Nu,this.camera.position);ju&&this.emit("cameraFovUpdate",Fu,this.userAction),Gu&&this.emit("cameraDirectionUpdate",{longitude:Ou,latitude:Du},this.userAction),zu&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(ju||Gu||Uu||Hu)&&this.emit("cameraUpdate",{longitude:Ou,latitude:Du,fov:Fu,offset:ku,distance:Vu},this.userAction),this.needsRender=!0},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Bu=Tu.pointers.map(function(Lu){return ii(Lu,["x","y"])});this.emit("wantsGesture","pan",Bu,Tu.isFinal)||this.emit("gesture","pan",Bu,Tu.isFinal)}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Pu){return ii(Pu,["x","y"])});this.emit("wantsGesture","tap",Cu,!0)||this.emit("gesture","tap",Cu,!0)},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Bu=[Tu];if(this.emit("wantsGesture","press",Bu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;this.emit("gesture","press",Bu,Cu)},$u.prototype.onPinchGesture=function(Tu){var Cu=Tu.pointers.map(function(Pu){return ii(Pu,["x","y"])});this.emit("wantsGesture","pinch",Cu,Tu.isFinal)||this.emit("gesture","pinch",Cu,Tu.isFinal)},$u.prototype.onMouseWheel=function(Tu){var Cu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Pu=[{x:Tu.clientX,y:Tu.clientY,delta:Cu}];this.emit("wantsGesture","mouseWheel",Pu,!1)||this.emit("gesture","mouseWheel",Pu,!1)},$u.prototype.onMouseMove=function(Tu){},$u.prototype.onMouseOut=function(){},$u.prototype.relativeClientPosition=function(Tu){return oa(Tu,this.element,this.scissor)},$u.prototype.bindEvents=function(Tu){var Cu=this,Pu=function(Xc){var _d=oa(Xc,Cu.element,Cu.scissor);return!(Math.abs(_d.x)>1||Math.abs(_d.y)>1)},Bu=new ra.Manager(Tu),Lu=function(Xc){return Xc.session.firstInput||null};Bu.add(new ra.Pan({threshold:10,pointers:0})),Bu.add(new ra.Tap({interval:410})),Bu.add(new ra.Pinch({threshold:0,pointers:2})),Bu.on("panstart pan",function(Xc){var _d=Lu(Bu);_d&&!Pu(_d.center)||(Cu.onPanGesture(Xc),Hu())}),Bu.on("tap",function(Xc){if(Xc.pointerType!=="mouse"||Xc.srcEvent.button===0){var _d=Lu(Bu);_d&&!Pu(_d.center)||(Cu.onTapGesture(Xc),Hu())}}),Bu.on("pinchstart pinch pinchend",function(Xc){var _d=Lu(Bu);_d&&!Pu(_d.center)||(Cu.onPinchGesture(Xc),Hu())});var Ru=null,Ou=null,Du=function(Xc,_d,_f){var qu=Xc==="pinchend"?_d:_d-_f.deltaY/280;return{type:Xc,target:_f.target,pointerType:"mouse",srcEvent:_f,pointers:[{x:_f.clientX,y:_f.clientY}],isFirst:Xc==="pinchstart",isFinal:Xc==="pinchend",scale:ho(qu,.1,10),center:{x:_f.clientX,y:_f.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Fu=function(Xc){var _d,_f={x:Xc.clientX,y:Xc.clientY};if(Pu(_f)){if(Xc.preventDefault(),Xc.ctrlKey){var qu=(_d=Ru==null?void 0:Ru.prevInput.scale)!==null&&_d!==void 0?_d:1,Xu=Du(Ru?"pinch":"pinchstart",qu,Xc);Ru===null?Ru={firstInput:Xu,prevInput:Xu}:Ru.prevInput=Xu,Cu.onPinchGesture(Xu),Ou!==null&&window.clearTimeout(Ou),Ou=window.setTimeout(function(){var Zu;Ou=null;var _c=(Zu=Ru==null?void 0:Ru.prevInput.scale)!==null&&Zu!==void 0?Zu:1,Ju=Du("pinchend",_c,Xc);Ru=null,Cu.onPinchGesture(Ju)},200)}else Cu.onMouseWheel(Xc);Hu()}},Vu=function(Xc){if(!Zs()){var _d={x:Xc.clientX,y:Xc.clientY};Pu(_d)?(Cu.onMouseMove(Xc),Cu.pressState&&Math.abs(Xc.clientX-Cu.pressState.x)>10&&Math.abs(Xc.clientY-Cu.pressState.y)>10&&Hu()):Cu.onMouseOut()}},ku=function(){Cu.onMouseOut(),Hu()},Nu=function(Xc,_d){if(Pu(Xc)){Cu.pressState={x:Xc.x,y:Xc.y,time:Cu.pressState?Cu.pressState.time:_d,stop:Qe};var _f=_d-Cu.pressState.time;Cu.onPressGesture({x:Xc.x,y:Xc.y,delta:_f},!1),Cu.pressState&&(Cu.pressState.stop=at$1.shared.add(function(qu){return Nu({x:Xc.x,y:Xc.y},qu)},!0,1))}else Hu()},Gu=function(Xc){Hu(),Xc.touches.length>1||Xc.changedTouches.length<=0||Nu({x:Xc.changedTouches[0].clientX,y:Xc.changedTouches[0].clientY},_e$2())},ju=function(Xc){Hu(),Nu({x:Xc.clientX,y:Xc.clientY},_e$2())},Hu=function(){var Xc;if(Cu.pressState){var _d=_e$2()-Cu.pressState.time;Cu.onPressGesture({x:Cu.pressState.x,y:Cu.pressState.y,delta:_d},!0),(Xc=Cu.pressState)===null||Xc===void 0||Xc.stop(),delete Cu.pressState}},Uu=null,zu=function(Xc){var _d,_f="pinch",qu=!1,Xu=!1;switch(Xc.type){case"gesturestart":_f="pinchstart",qu=!0;break;case"gestureend":_f="pinchend",Xu=!0}return{type:_f,target:Xc.target,pointerType:"mouse",srcEvent:Xc,pointers:[{x:Xc.clientX,y:Xc.clientY}],isFirst:qu,isFinal:Xu,scale:(_d=Xc.scale)!==null&&_d!==void 0?_d:1,center:{x:Xc.clientX,y:Xc.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Wu=function(Xc){if(Xc.preventDefault(),!Zs()){var _d=zu(Xc),_f=(Uu={firstInput:_d}).firstInput;_f&&!Pu(_f.center)||Cu.onPinchGesture(_d)}},Qu=function(Xc){if(Xc.preventDefault(),!Zs()&&Uu){var _d=zu(Xc),_f=Uu.firstInput;_f&&!Pu(_f.center)||Cu.onPinchGesture(_d)}},Ku=function(Xc){if(Xc.preventDefault(),!Zs()&&Uu){var _d=zu(Xc),_f=Uu.firstInput;Uu=null,_f&&!Pu(_f.center)||Cu.onPinchGesture(_d)}},Yu=function(Xc){if(Xc&&typeof Xc.preventDefault=="function"&&Xc.currentTarget===Tu&&Xc.preventDefault(),typeof getSelection=="function"){var _d=getSelection();_d&&_d.focusNode&&(_d.removeAllRanges&&_d.removeAllRanges(),_d.empty&&_d.empty())}};return Tu.addEventListener("wheel",Fu,{passive:!1}),Tu.addEventListener("mousemove",Vu,!1),Tu.addEventListener("mouseout",ku,!1),Tu.addEventListener("touchstart",Gu,!1),Tu.addEventListener("touchend",Hu,!1),Tu.addEventListener("touchcancel",Hu,!1),Tu.addEventListener("mousedown",ju,!1),Tu.addEventListener("mouseup",Hu,!1),Tu.addEventListener("gesturestart",Wu,{passive:!1}),Tu.addEventListener("gesturechange",Qu,{passive:!1}),Tu.addEventListener("gestureend",Ku,{passive:!1}),Tu.addEventListener("touchstart",Yu,!1),Tu.addEventListener("contextmenu",Yu,!1),Object.assign(function(){Bu.destroy(),Tu.removeEventListener("wheel",Fu,!1),Tu.removeEventListener("mousemove",Vu,!1),Tu.removeEventListener("mouseout",ku,!1),Tu.removeEventListener("touchstart",Gu,!1),Tu.removeEventListener("touchend",Hu,!1),Tu.removeEventListener("touchcancel",Hu,!1),Tu.removeEventListener("mousedown",ju,!1),Tu.removeEventListener("mouseup",Hu,!1),Tu.removeEventListener("gesturestart",Wu,!1),Tu.removeEventListener("gesturechange",Qu,!1),Tu.removeEventListener("gestureend",Ku,!1),Tu.removeEventListener("touchstart",Yu,!1),Tu.removeEventListener("contextmenu",Yu,!1)},{element:Tu})},$u}(Fe),Aa=function(_u){function $u(Tu){var Cu,Pu,Bu,Lu,Ru=this,Ou=$u.parseArgs(Tu);return(Ru=_u.call(this,Ou)||this).defaultLongitude=Ou.defaultLongitude,Ru.defaultLatitude=Ou.defaultLatitude,Ru.defaultFov=Ou.defaultFov,Ru.maxFov=Ou.maxFov,Ru.minFov=Ou.minFov,Ru.maxLatitude=Ou.maxLatitude,Ru.minLatitude=Ou.minLatitude,Ru.locationMotion=new Ro({x:Ru.camera.pose.offset.x,y:Ru.camera.pose.offset.y,z:Ru.camera.pose.offset.z,distance:Ru.camera.pose.distance,modelAlpha:(Pu=(Cu=Ru.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Bu=Ru.model.getMaterial())===null||Bu===void 0?void 0:Bu.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ru}return t$8.__extends($u,_u),$u.distanceFromModel=function(Tu,Cu,Pu){var Bu=Tu.bounding,Lu=Math.pow(Math.pow(Bu.max.x-Bu.min.x+1,2)+Math.pow(Bu.max.y-Bu.min.y+1,2)+Math.pow(Bu.max.z-Bu.min.z+1,2),.5),Ru=Lu/2/Math.tan(Math.PI*Cu/360);return Pu<1&&(Ru/=Pu),isNaN(Ru)?Lu:Ru},$u.parseArgs=function(Tu){var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu=_u.parseArgs.call(this,Tu);return t$8.__assign(t$8.__assign({},Fu),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:Math.PI/4,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultFov:(Bu=Tu.defaultFov)!==null&&Bu!==void 0?Bu:80,maxFov:(Lu=Tu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Ru=Tu.minFov)!==null&&Ru!==void 0?Ru:40,maxLatitude:(Ou=Tu.maxLatitude)!==null&&Ou!==void 0?Ou:+Math.PI/2,minLatitude:(Du=Tu.minLatitude)!==null&&Du!==void 0?Du:-Math.PI/2})},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Bu,Lu=this.parseArgs(Tu),Ru=Tu.initial[1];return{longitude:(Cu=Ru.longitude)!==null&&Cu!==void 0?Cu:Lu.defaultLongitude,latitude:ho((Pu=Ru.latitude)!==null&&Pu!==void 0?Pu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:(Bu=Ru.fov)!==null&&Bu!==void 0?Bu:Lu.defaultFov,offset:Tu.model.bounding.getCenter(new r$a.Vector3),distance:$u.distanceFromModel(Lu.model,Lu.defaultFov,Lu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){return this.work=Tu,this.updateCamera(Pu,Bu!=null?Bu:0,Lu),!0},$u.prototype.updateModel=function(Tu){_u.prototype.updateModel.call(this,Tu);var Cu=Tu.bounding.getCenter(new r$a.Vector3),Pu=$u.distanceFromModel(Tu,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z,distance:Pu},0).catch(Qe)},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Bu=2;Bu<arguments.length;Bu++)Pu[Bu-2]=arguments[Bu];if(!this.destroyed){var Lu={},Ru={};this.locationMotion.ended||(this.locationMotion.update(Tu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ru.distance=this.locationMotion.value.distance,Ru.offset=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Tu),Ru.longitude=this.cameraMotion.value.longitude,Ru.latitude=this.cameraMotion.value.latitude,Ru.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ru)||this.setCamera(Ru)}},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$2())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:new r$a.Vector3(Cu.value.x,Cu.value.y,Cu.value.z),distance:Cu.value.distance}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;if(!this.destroyed){this.pending=!1,this.userAction=Bu;var Fu={longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ru=Cu.latitude)!==null&&Ru!==void 0?Ru:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Ou=Cu.fov)!==null&&Ou!==void 0?Ou:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$a.Vector3),distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Vu=ii(Fu,["longitude","latitude","fov"]),ku={x:Fu.offset.x,y:Fu.offset.y,z:Fu.offset.z,distance:Fu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Tu,Fu,this.userAction),this.cameraMotion.set(Vu,Pu).catch(Qe),this.locationMotion.set(ku,Pu).then(function(){Du.emit("initAnimationEnded",Tu,Fu,Du.userAction)},function(Nu){var Gu=na(Du.camera.pose);Du.emit("initAnimationEnded",Tu,Gu,Du.userAction)}).catch(Qe)}},$u.prototype.updateRenderSize=function(){this.locationMotion.set({distance:$u.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe)},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this.work.observers.filter(function(Ru){return Ru.active}),Pu=this.model.intersectRaycaster(Tu)[0];if(!Pu)return null;var Bu=ta(Cu,function(Ru){return Ru.standingPosition.distanceTo(Pu.point)},!0),Lu=Bu[0];return Bu[1]<5?this.work.observers.indexOf(Lu):null},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.renderer.getSize(new r$a.Vector2);return{longitude:2*Tu.x/(Cu.x*this.scissor.width),latitude:2*Tu.y/(Cu.y*this.scissor.height)}},$u.prototype.requestInteriaMovement=function(Tu,Cu){var Pu=this;if(this.interiaMovement!==!1){for(var Bu=t$8.__assign({},Tu),Lu={longitude:0,latitude:0},Ru=0;Ru<Cu;Ru++)Bu.longitude*=.996,Bu.latitude*=.994008,Lu.longitude+=Bu.longitude,Lu.latitude+=Bu.latitude;var Ou=Gs(this.cameraMotion.value.longitude+Lu.longitude),Du=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),Fu={longitude:Ou,latitude:Du,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Ou,latitude:Du},0).catch(Qe);var Vu=Bu.longitude>1e-4||Bu.longitude<-1e-4||Bu.latitude>1e-4||Bu.latitude<-1e-4;this.emit("interiaPan",Fu,!Vu),Vu?at$1.shared.add(function(ku,Nu){Pu.requestInteriaMovement(Bu,0|Nu)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Bu=Tu.pointers.map(function(ju){return ii(ju,["x","y"])});if(!this.emit("wantsGesture","pan",Bu,Tu.isFinal)){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Ru=this.relativeClientPosition(Tu.center),Ou=this.camera.pose.latitude<Math.PI/6||Ru.y<0?-1:1;Lu.x*=Ou;var Du=this.coordinatesForOffset(Lu),Fu=Gs(this.cameraMotion.value.longitude+Du.longitude),Vu=ho(this.cameraMotion.value.latitude+Du.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(Vu=this.cameraMotion.value.latitude);var ku={longitude:Fu,latitude:Vu,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",ku,Tu.isFinal)&&(this.emit("gesture","pan",Bu,Tu.isFinal),this.emit("panGesture",ku,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:ku.longitude,latitude:ku.latitude},0).catch(Qe),Tu.isFinal&&!this.emit("wantsInteriaPan",ku))){this.interiaMovement=!0;var Nu=Tu.velocityX*Ou,Gu=Tu.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Nu,y:Gu}),0)}}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Bu=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Bu=!0,delete this.panState,delete this.pinchState),Pu!==void 0){var Lu=Tu.pointers.map(function(Ou){return ii(Ou,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Bu)){var Ru=ho(Pu/Tu.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Tu.scale,Ru,Bu)||this.emit("wantsChangeCameraFov",Ru)||(this.emit("gesture","pinch",Lu,Bu),this.emit("pinchGesture",Tu.scale,Ru,Bu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ru},0).catch(Qe),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Bu=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Bu,!1)){var Lu=this.minFov,Ru=this.maxFov,Ou=ho(this.camera.fov-Pu,Lu,Ru);this.emit("wantsMouseWheel",Pu,Ou,!1)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","mouseWheel",Bu,!1),this.emit("mouseWheel",Pu,Ou,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ou},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Bu,!0)||Cu.emit("wantsMouseWheel",Pu,Ou,!0)||(Cu.emit("gesture","mouseWheel",Bu,!0),Cu.emit("mouseWheel",0,Ou,!0))},200)})}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Ou){return ii(Ou,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Bu=new r$a.Raycaster;if(Bu.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Bu,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Bu,Pu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Bu);if(!oo(Lu)){this.emit("panoSelected",Lu);var Ru={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Ru,!0)}}}},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Bu,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Ru=this.relativeClientPosition(Tu),Ou=new r$a.Raycaster;if(Ou.setFromCamera(Ru,this.camera),this.emit("wantsPressGesture",Ou,Ru,Tu.delta,Cu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Ou,Ru,Tu.delta,Cu)},$u}(fa$1),ga$1=function(_u){function $u(Tu){var Cu=$u.parseArgs(Tu);return _u.call(this,Cu)||this}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=[Tu.initial[0],t$8.__assign(t$8.__assign({},Tu.initial[1]),{longitude:0,latitude:Math.PI/2}),Tu.initial[2],Tu.initial[3]],Pu=t$8.__assign(t$8.__assign({},Tu),{initial:Cu,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return _u.parseArgs.call(this,Pu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.updateModel=function(Tu){this.model=Tu,this.needsRender=!0;var Cu=Tu.bounding.getCenter(new r$a.Vector3);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe)},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru=this;if(!this.destroyed){this.pending=!1,this.userAction=Bu;var Ou={longitude:0,latitude:Math.PI/2,fov:ho((Lu=Cu.fov)!==null&&Lu!==void 0?Lu:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$a.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Du=ii(Ou,["longitude","latitude","fov"]),Fu={x:Ou.offset.x,y:Ou.offset.y,z:Ou.offset.z,distance:Ou.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Du,Pu).catch(Qe),this.locationMotion.set(Fu,Pu).then(function(){Ru.emit("initAnimationEnded",Tu,Ou,Ru.userAction)},function(Vu){var ku=na(Ru.camera.pose);Ru.emit("initAnimationEnded",Tu,ku,Ru.userAction)})}},$u.prototype.getZoomOffsetFromFov=function(Tu,Cu,Pu){var Bu=new r$a.Vector3(0,-1,0),Lu=Math.tan(Pu/2*Math.PI/180),Ru=Math.tan(Cu.fov/2*Math.PI/180),Ou=(Ru-Lu)/Ru,Du=new r$a.Raycaster;Du.setFromCamera(Tu,Cu);var Fu=Du.ray.direction,Vu=Fu.angleTo(Bu),ku=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),Nu=ku*Math.tan(Vu),Gu=Fu.clone().setLength(ku*Math.cos(Vu)).projectOnPlane(Bu),ju=Gu.length(),Hu=Ou/ju*Gu.x*Nu,Uu=Ou/ju*Gu.z*Nu;return new r$a.Vector3(Hu,0,Uu)},$u.prototype.requestInteriaMovement=function(Tu,Cu){},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Bu=Tu.pointers.map(function(Hu){return ii(Hu,["x","y"])});if(!this.emit("wantsGesture","pan",Bu,Tu.isFinal)){var Lu=Tu.center.x-Cu.x,Ru=Tu.center.y-Cu.y,Ou=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Du=this.model.bounding,Fu=Du.getCenter(new r$a.Vector3),Vu=(Du.max.x-Du.min.x)/this.defaultFov*this.cameraMotion.value.fov,ku=(Du.max.y,Du.min.y,this.defaultFov,this.cameraMotion.value.fov,(Du.max.z-Du.min.z)/this.defaultFov*this.cameraMotion.value.fov),Nu=(this.camera.position.y-Du.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Gu=this.renderer.getSize(new r$a.Vector2);Ou.add(function(Hu,Uu){var zu=new r$a.Vector3;return zu.setFromMatrixColumn(Uu,0),zu.multiplyScalar(-Hu),zu}(2*Lu*Nu/Gu.y,this.camera.matrix)),Ou.add(function(Hu,Uu,zu){var Wu=new r$a.Vector3;return Wu.setFromMatrixColumn(zu,0),Wu.crossVectors(Uu,Wu),Wu.multiplyScalar(Hu),Wu}(2*Ru*Nu/Gu.y,this.camera.up,this.camera.matrix)),Ou.x=ho(Ou.x,Fu.x-Vu,Fu.x+Vu),Ou.z=ho(Ou.z,Fu.z-ku,Fu.z+ku),Ou.y=Fu.y;var ju={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ou,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",ju,Tu.isFinal)||(this.emit("gesture","pan",Bu,Tu.isFinal),this.emit("panGesture",ju,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Ou.x,y:Ou.y,z:Ou.z},0).catch(Qe))}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Bu=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Bu=!0,delete this.pinchState),Pu!==void 0){var Lu=Tu.pointers.map(function(Vu){return ii(Vu,["x","y"])});if(!this.emit("wantsGesture","pinch",Lu,Bu)){var Ru=ho(Pu/Tu.scale,this.minFov,this.maxFov),Ou=this.relativeClientPosition({x:Tu.center.x,y:Tu.center.y}),Du=this.getZoomOffsetFromFov(Ou,this.camera,Ru),Fu=this.camera.pose.offset.clone().add(Du);this.emit("wantsPinchGesture",Tu.scale,Ru,Bu)||this.emit("wantsChangeCameraFov",Ru)||(this.emit("gesture","pinch",Lu,Bu),this.emit("pinchGesture",Tu.scale,Ru,Bu),this.userAction=!0,this.locationMotion.set({x:Fu.x,y:Fu.y,z:Fu.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ru},0).catch(Qe),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Bu=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Bu,!1)){var Lu=ho(this.cameraMotion.value.fov-Pu,this.minFov,this.maxFov),Ru=this.relativeClientPosition({x:Tu.clientX,y:Tu.clientY}),Ou=this.getZoomOffsetFromFov(Ru,this.camera,Lu),Du=this.camera.pose.offset.clone().add(Ou);this.emit("wantsMouseWheel",Pu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Bu,!1),this.emit("mouseWheel",Pu,Lu,!1),this.userAction=!0,this.locationMotion.set({x:Du.x,y:Du.y,z:Du.z},0).catch(Qe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Bu,!0)||Cu.emit("wantsMouseWheel",Pu,Lu,!0)||Cu.emit("wantsChangeCameraFov",Lu)||(Cu.emit("gesture","mouseWheel",Bu,!0),Cu.emit("mouseWheel",0,Lu,!0))},200)})}},$u}(Aa);function ma(_u,$u){$u===void 0&&($u=!1);var Tu=typeof _u;if(Tu==="string")return JSON.stringify(_u);if(_u===!0)return"true";if(_u===!1)return"false";if(_u===null)return"null";if(_u instanceof Array){for(var Cu="[",Pu=_u.length-1,Bu=0;Bu<Pu;Bu++)Cu+=ma(_u[Bu],!1)+",";return Pu>-1&&(Cu+=ma(_u[Bu],!1)),Cu+"]"}if(_u instanceof Object){if(typeof _u.toJSON=="function")return ma(_u.toJSON(),$u);var Lu=Object.keys(_u).sort(),Ru=Lu.length;for(Cu="",Bu=0;Bu<Ru;){var Ou=Lu[Bu],Du=ma(_u[Ou],!0);Du!==void 0&&(Bu&&Cu!==""&&(Cu+=","),Cu+=JSON.stringify(Ou)+":"+Du),Bu++}return"{"+Cu+"}"}switch(Tu){case"function":case"undefined":return $u?void 0:null;case"number":return _u;default:return isFinite(_u)?_u:null}}function va(_u){return Te$1(String(ma(_u,!1)))}var ya,ba$1=function(_u){function $u(Tu){var Cu=this,Pu=$u.parseArgs(Tu);return(Cu=_u.call(this,Pu)||this).defaultLongitude=Pu.defaultLongitude,Cu.defaultLatitude=Pu.defaultLongitude,Cu.defaultFov=Pu.defaultFov,Cu.maxFov=Pu.maxFov,Cu.minFov=Pu.minFov,Cu.maxLatitude=Pu.maxLatitude,Cu.minLatitude=Pu.minLatitude,Cu.moveSpeed=Pu.moveSpeed,Cu.intersectMeshCreator=Pu.intersectMeshCreator,Cu.interiaMovement=!1,Cu.intersectMesh=Cu.intersectMeshCreator(),Cu.intersectMesh.name="intersect",Cu.intersectMesh.visible=!1,Cu.helper.add(Cu.intersectMesh),Cu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku=_u.parseArgs.call(this,Tu);return t$8.__assign(t$8.__assign({},ku),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:0,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:0,defaultFov:(Bu=Tu.defaultFov)!==null&&Bu!==void 0?Bu:90,maxFov:(Lu=Tu.maxFov)!==null&&Lu!==void 0?Lu:120,minFov:(Ru=Tu.minFov)!==null&&Ru!==void 0?Ru:40,maxLatitude:(Ou=Tu.maxLatitude)!==null&&Ou!==void 0?Ou:+Math.PI/2,minLatitude:(Du=Tu.minLatitude)!==null&&Du!==void 0?Du:-Math.PI/2,moveSpeed:(Fu=Tu.moveSpeed)!==null&&Fu!==void 0?Fu:3.2,intersectMeshCreator:(Vu=Tu.intersectMeshCreator)!==null&&Vu!==void 0?Vu:function(){return new Fs}})},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Bu,Lu=this.parseArgs(Tu),Ru=Tu.initial,Ou=Ru[0],Du=Ru[1];return{longitude:(Cu=Du.longitude)!==null&&Cu!==void 0?Cu:Lu.defaultLongitude,latitude:ho((Pu=Du.latitude)!==null&&Pu!==void 0?Pu:Lu.defaultLatitude,Lu.minLatitude,Lu.maxLatitude),fov:ho((Bu=Du.fov)!==null&&Bu!==void 0?Bu:Lu.defaultFov,Lu.minFov,Lu.maxFov),offset:Lu.work.observers[Ou].position.clone(),distance:0}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},$u.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&_u.prototype.isReady.call(this)},$u.prototype.calculateMovingDuration=function(Tu,Cu){switch(typeof Tu){case"function":return Tu(Cu,this.moveSpeed);case"number":return Tu;case"string":return Number(Tu);default:return ho(Cu,1,3)/this.moveSpeed*1e3}},$u.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.cameraMotion.value.fov,Pu=this.camera.aspect,Bu=this.renderer.getSize(new r$a.Vector2);return{longitude:2*Tu.x/(Bu.x*this.scissor.width)*Cu/95*Pu,latitude:-2*Tu.y/(Bu.y*this.scissor.height)*Cu/95}},$u.prototype.cameraBounce=function(){var Tu=this.cameraMotion.value,Cu=Tu.longitude,Pu=Tu.latitude,Bu=Tu.fov,Lu=[{progress:0,value:{longitude:Cu,latitude:Pu,fov:Bu}},{progress:.5,value:{longitude:Cu,latitude:Pu,fov:.98*Bu}},{progress:1,value:{longitude:Cu,latitude:Pu,fov:Bu}}];this.cameraMotion.setKeyframes(Lu,500).catch(Qe)},$u.prototype.requestInteriaMovement=function(Tu,Cu){var Pu=this;if(this.interiaMovement!==!1){for(var Bu=t$8.__assign({},Tu),Lu={longitude:0,latitude:0},Ru=0;Ru<Cu;Ru++)Bu.longitude*=.996,Bu.latitude*=.98604,Lu.longitude+=Bu.longitude,Lu.latitude+=Bu.latitude;var Ou=Gs(this.cameraMotion.value.longitude+Lu.longitude),Du=ho(this.cameraMotion.value.latitude+Lu.latitude,this.minLatitude,this.maxLatitude),Fu={longitude:Ou,latitude:Du,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:Ou,latitude:Du},0).catch(Qe);var Vu=Bu.longitude>1e-4||Bu.longitude<-1e-4||Bu.latitude>1e-4||Bu.latitude<-1e-4;this.emit("interiaPan",Fu,!Vu),Vu?at$1.shared.add(function(ku,Nu){Pu.requestInteriaMovement(Bu,0|Nu)},!0,1):this.interiaMovement=!1}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Bu=Tu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","pan",Bu,Tu.isFinal)){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Ru=this.coordinatesForOffset(Lu),Ou=Gs(this.cameraMotion.value.longitude+Ru.longitude),Du=ho(this.cameraMotion.value.latitude+Ru.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(Du=this.cameraMotion.value.latitude);var Fu={longitude:Ou,latitude:Du,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Fu,Tu.isFinal)){this.emit("gesture","pan",Bu,Tu.isFinal),this.emit("panGesture",Fu,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Vu={longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov};if(this.cameraMotion.set(Vu,0).catch(Qe),Tu.isFinal&&!this.emit("wantsInteriaPan",Fu)){this.interiaMovement=!0;var ku=Tu.velocityX,Nu=.6*Tu.velocityY;Math.abs(Nu)>.5&&Math.abs(ku)<.5&&(ku=0),this.requestInteriaMovement(this.coordinatesForOffset({x:ku,y:Nu}),0)}}}}},$u.prototype.onPinchGesture=function(Tu){var Cu,Pu=(Cu=this.pinchState)===null||Cu===void 0?void 0:Cu.fov,Bu=Tu.scale,Lu=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Lu=!0,delete this.pinchState),Pu!==void 0){var Ru=Tu.pointers.map(function(Du){return ii(Du,["x","y"])});if(!this.emit("wantsGesture","pinch",Ru,Lu)){var Ou=ho(Pu/Bu,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Bu,Ou,Lu)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","pinch",Ru,Lu),this.emit("pinchGesture",Bu,Ou,Lu),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ou},0).catch(Qe),this.onPanGesture(Tu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Bu=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Bu,!1)){var Lu=ho(this.cameraMotion.value.fov-Pu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Pu,Lu,!1)||this.emit("wantsChangeCameraFov",Lu)||(this.emit("gesture","mouseWheel",Bu,!1),this.emit("mouseWheel",Pu,Lu,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Bu,!0)||Cu.emit("wantsMouseWheel",Pu,Lu,!0)||Cu.emit("wantsChangeCameraFov",Lu)||(Cu.emit("gesture","mouseWheel",Bu,!0),Cu.emit("mouseWheel",0,Lu,!0))},200)})}},$u.prototype.onMouseMove=function(Tu){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Cu=this.relativeClientPosition({x:Tu.clientX,y:Tu.clientY}),Pu=new r$a.Raycaster;if(Pu.setFromCamera(Cu,this.camera),this.emit("wantsShowIntersectionOnModel",Pu))this.hideIntersectMesh();else{var Bu=this.model.intersectRaycaster(Pu)[0];if(Bu&&Bu.face){var Lu=Bu.face.normal,Ru=Lu.clone().multiplyScalar(.05),Ou=Bu.point.clone().add(Ru);this.intersectMesh.position.copy(Ou);var Du=Ou.clone().add(Ru);if(this.intersectMesh.lookAt(Du),Math.abs(Lu.y)>.99){var Fu=this.camera.position.clone().sub(Ou);this.intersectMesh.rotation.z=-Math.atan2(Fu.z,Fu.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Bu,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Tu.clientX,clientY:Tu.clientY}}}},$u.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Bu,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Ru=this.relativeClientPosition(Tu),Ou=new r$a.Raycaster;if(Ou.setFromCamera(Ru,this.camera),this.emit("wantsPressGesture",Ou,Ru,Tu.delta,Cu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Ou,Ru,Tu.delta,Cu)},$u}(fa$1);function xa(){return ya||(ya=new Promise(function(_u){var $u,Tu=document.createElement("video");Tu.muted=!0,Tu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Tu.addEventListener("timeupdate",function Cu(){Tu.removeEventListener("timeupdate",Cu,!1),clearTimeout($u);var Pu=document.createElement("canvas");Pu.width=Pu.height=1;var Bu=Pu.getContext("2d");Bu?(Bu.drawImage(Tu,0,0,1,1),Bu.getImageData(0,0,1,1).data[3]>10?_u(!0):_u(!1)):_u(!1)},!1),Tu.addEventListener("canplay",function Cu(){Tu.removeEventListener("canplay",Cu,!1),Tu.play()},!1),$u=window.setTimeout(function(){return _u(!1)},1e3)}))}var wa,Ea=function(_u){function $u(Tu,Cu){return Cu===void 0&&(Cu=.5),_u.call(this,Tu,{uniforms:{inputBuffer:new r$a.Uniform(null),scale:new r$a.Uniform(Cu)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$8.__extends($u,_u),$u}(ha$1),Ma=function(_u){function $u(Tu,Cu){Cu===void 0&&(Cu=.002);var Pu=_u.call(this,Tu,{uniforms:{targetBuffer:new r$a.Uniform(null),inputBuffer:new r$a.Uniform(null),step:new r$a.Uniform(Cu)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Pu.material.extensions.shaderTextureLOD=!0,Pu}return t$8.__extends($u,_u),Object.defineProperty($u.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Tu){this.material.uniforms.targetBuffer.value=Tu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Tu){this.material.uniforms.step.value=Tu},enumerable:!1,configurable:!0}),$u}(ha$1),Ia=function(_u){function $u(Tu){var Cu=_u.call(this,Tu,{uniforms:{inputBuffer:new r$a.Uniform(null),luminanceAdaptiveBuffer:new r$a.Uniform(null),progress:new r$a.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Cu.material.transparent=!0,Cu}return t$8.__extends($u,_u),Object.defineProperty($u.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Tu){this.material.uniforms.luminanceAdaptiveBuffer.value=Tu},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Tu){this.material.uniforms.progress.value=Tu},enumerable:!1,configurable:!0}),$u}(ha$1),Sa=function(_u){function $u(Tu){var Cu=_u.call(this,Tu)||this;return Cu.enableTime=_e$2(),Cu.renderer=Tu,Cu.valuePass=new ca$1(Cu.renderer),Cu.luminancePass=new Ea(Cu.renderer,Math.sqrt(1/3)),Cu.nextStepPass=new Ma(Cu.renderer,.01),Cu.luminanceAdaptivePass=new Ia(Cu.renderer),Cu}return t$8.__extends($u,_u),$u.prototype.render=function(Tu,Cu){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Tu);this.enableTime===null&&(this.enableTime=_e$2()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$a.WebGLRenderTarget(128,128,{minFilter:r$a.LinearMipmapLinearFilter,magFilter:r$a.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$a.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Tu,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$a.WebGLRenderTarget(1,1,{minFilter:r$a.NearestFilter,magFilter:r$a.NearestFilter,type:r$a.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$a.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$a.WebGLRenderTarget(1,1,{minFilter:r$a.NearestFilter,magFilter:r$a.NearestFilter,type:r$a.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$a.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e$2()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Tu,Cu)},$u.prototype.dispose=function(){var Tu,Cu,Pu;(Tu=this.luminanceTargetBuffer)===null||Tu===void 0||Tu.dispose(),(Cu=this.luminancePrevBuffer)===null||Cu===void 0||Cu.dispose(),(Pu=this.luminanceNextBuffer)===null||Pu===void 0||Pu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},$u}(pa),Ca=["up","down","left","right","front","back"],Ba=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta={up:new r$a.Quaternion(Ba,0,0,Ba),down:new r$a.Quaternion(-Ba,0,0,Ba),left:new r$a.Quaternion(0,Ba,0,Ba),right:new r$a.Quaternion(0,-Ba,0,Ba),front:new r$a.Quaternion(0,0,0,1),back:new r$a.Quaternion(0,1,0,0)},Pa=new r$a.Quaternion().setFromAxisAngle(new r$a.Vector3(0,1,0),Math.PI),Ra=new r$a.PerspectiveCamera,ka=new r$a.Frustum,Da=new r$a.Matrix4,La=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa=new Float32Array([0,0,1,0,0,1,1,1]),Na=new Uint8Array([0,1,2,1,3,2]),Fa=new r$a.BufferGeometry;Fa.setAttribute("position",new r$a.BufferAttribute(La,3)),Fa.setAttribute("uv",new r$a.BufferAttribute(Oa,2)),Fa.setIndex(new r$a.BufferAttribute(Na,1));var Qa=function(_u){function $u(){var Tu=_u.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Tu.depthTest=!1,Tu.depthWrite=!1,Tu.blending=r$a.NoBlending,Tu.map=Tu.uniforms.map.value,Tu.luminanceMap=Tu.uniforms.luminanceMap.value,Object.defineProperties(Tu,{map:{get:function(){return this.uniforms.map.value},set:function(Cu){this.uniforms.map.value=Cu}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Cu){this.uniforms.luminanceMap.value=Cu,this.defines.USE_LUMINANCE=Cu!==null,this.needsUpdate=!0}}}),Tu}return t$8.__extends($u,_u),$u}(r$a.ShaderMaterial),Va=function(_u){function $u(){var Tu=_u!==null&&_u.apply(this,arguments)||this;return Tu.level=0,Tu.sideCount=0,Tu.col=0,Tu.row=0,Tu.index=0,Tu.type="up",Tu}return t$8.__extends($u,_u),$u}(r$a.Box3),_a$1=function(_u){function $u(Tu,Cu){var Pu=this,Bu=new Qa;return Bu.visible=!1,(Pu=_u.call(this,Fa,Bu)||this).position.copy(Tu.getCenter(new r$a.Vector3)),Pu.quaternion.copy(Ta[Tu.type]),Pu.scale.setScalar(1/Math.pow(2,Tu.level)),Pu.name="tile-box",Pu.level=Tu.level,Pu.activeTime=-1,Pu.disposed=!1,Pu.needsRender=!1,Pu.frustumCulled=!1,Cu.then(function(Lu){var Ru=Lu[0],Ou=Lu[1];Pu.disposed?(Ru.dispose(),Ou==null||Ou.dispose()):(Pu.material.map=Ru,Pu.material.luminanceMap=Ou,Pu.material.needsUpdate=!0,Pu.material.visible=!0,Pu.needsRender=!0)}).catch(Qe),Pu}return t$8.__extends($u,_u),$u.getBox=function(Tu,Cu,Pu){var Bu=new Va,Lu=Math.pow(2,Tu),Ru=1/Lu,Ou=Pu%Lu,Du=Math.floor(Pu/Lu);switch(Bu.level=Tu,Bu.index=Pu,Bu.sideCount=Lu,Bu.row=Du,Bu.col=Ou,Bu.type=Cu,Cu){case"up":Bu.min.y=.5,Bu.max.y=.5,Bu.min.x=+Ou*Ru-.5,Bu.max.x=+Ou*Ru-.5+Ru,Bu.min.z=-Du*Ru+.5-Ru,Bu.max.z=-Du*Ru+.5;break;case"down":Bu.min.y=-.5,Bu.max.y=-.5,Bu.min.x=+Ou*Ru-.5,Bu.max.x=+Ou*Ru-.5+Ru,Bu.min.z=+Du*Ru-.5,Bu.max.z=+Du*Ru-.5+Ru;break;case"left":Bu.min.x=-.5,Bu.max.x=-.5,Bu.min.z=-Ou*Ru+.5-Ru,Bu.max.z=-Ou*Ru+.5,Bu.min.y=-Du*Ru+.5-Ru,Bu.max.y=-Du*Ru+.5;break;case"right":Bu.min.x=.5,Bu.max.x=.5,Bu.min.z=+Ou*Ru-.5,Bu.max.z=+Ou*Ru-.5+Ru,Bu.min.y=-Du*Ru+.5-Ru,Bu.max.y=-Du*Ru+.5;break;case"front":Bu.min.z=-.5,Bu.max.z=-.5,Bu.min.x=+Ou*Ru-.5,Bu.max.x=+Ou*Ru-.5+Ru,Bu.min.y=-Du*Ru+.5-Ru,Bu.max.y=-Du*Ru+.5;break;case"back":Bu.min.z=.5,Bu.max.z=.5,Bu.min.x=-Ou*Ru+.5-Ru,Bu.max.x=-Ou*Ru+.5,Bu.min.y=-Du*Ru+.5-Ru,Bu.max.y=-Du*Ru+.5}return Bu},$u.prototype.updateTime=function(Tu){},$u.prototype.dispose=function(){var Tu;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Tu=this.material.luminanceMap)===null||Tu===void 0||Tu.dispose()),this.material.dispose()},$u}(r$a.Mesh),Ha=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.needsRender=!1,Tu.name="tiling",Tu}return t$8.__extends($u,_u),$u}(r$a.Group),qa=function(){function _u($u,Tu){this.disposed=!1,this.textureLoader=new Ii($u),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Tu,this.object=new Ha}return _u.prototype.setAllowHosts=function($u){this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.textureLoader.setNetworkSubscribe($u)},_u.prototype.cleanup=function(){for(var $u=0;$u<this.tiles.length;$u++)if(this.tiles[$u]){var Tu=this.tiles[$u],Cu="level-group:"+$u,Pu=this.object.getObjectByName(Cu);for(var Bu in Tu){var Lu=Tu[Bu];Lu.dispose(),Pu.remove(Lu),delete Tu[Bu],this.object.needsRender=!0}}},_u.prototype.setRotation=function($u){if(!this.disposed){var Tu=new r$a.Quaternion().multiplyQuaternions($u,Pa);this.object.quaternion.equals(Tu)||(this.object.quaternion.copy(Tu),this.object.needsRender=!0)}},_u.prototype.setPosition=function($u){this.disposed||this.object.position.equals($u)||(this.object.position.copy($u),this.object.needsRender=!0)},_u.prototype.setResource=function($u){if(!this.disposed&&this.resource!==$u){this.cleanup(),this.resource=$u;for(var Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu].level;this.tiles[Cu]={};var Pu="level-group:"+Cu,Bu=this.object.getObjectByName(Pu);Bu||((Bu=new r$a.Group).name=Pu,Bu.renderOrder=-2),this.object.add(Bu)}this.object.needsRender=!0}},_u.prototype.setLuminance=function($u){this.luminance=$u},_u.prototype.getTileResources=function($u){for(var Tu,Cu=(Tu=this.imageOptions.size)!==null&&Tu!==void 0?Tu:2048,Pu=[],Bu=this.resource.length-1;Bu>=0;Bu--)this.resource[Bu].level<=$u&&512*Math.pow(2,this.resource[Bu].level)>Cu&&Pu.unshift(this.resource[Bu]);return Pu},_u.prototype.update=function($u,Tu,Cu){var Pu=this;if(!this.disposed){this.level=Tu;var Bu=Ra.copy($u);Bu.position.set(0,0,0),Bu.quaternion.premultiply(this.object.quaternion.clone().inverse()),Bu.updateMatrixWorld(!0),Bu.updateProjectionMatrix();for(var Lu=Bu.getWorldDirection(new r$a.Vector3),Ru=ka.setFromProjectionMatrix(Da.multiplyMatrices(Bu.projectionMatrix,Bu.matrixWorldInverse)),Ou=this.getTileResources(Tu),Du=function(Hu){if(Hu){for(var Uu=[],zu=Hu.level,Wu=Math.pow(2,zu),Qu=Wu*Wu,Ku=Fu.object.getObjectByName("level-group:"+zu),Yu=0,Xc=Ca;Yu<Xc.length;Yu++)for(var _d=Xc[Yu],_f=0;_f<Qu;_f++){var qu=_a$1.getBox(zu,_d,_f);Ru.intersectsBox(qu)&&Uu.push(qu)}var Xu=new r$a.Vector3;Uu.sort(function(np,sp){return np.getCenter(Xu).angleTo(Lu)-sp.getCenter(Xu).angleTo(Lu)});for(var Zu=[],_c=0,Ju=Uu;_c<Ju.length;_c++){var _h=(qu=Ju[_c]).sideCount,ep=qu.row,tp=qu.col,rp=(_d=qu.type,"tile-level:".concat(zu,"-face:").concat(_d,"-row:").concat(ep,"-col:").concat(tp));if(!Fu.tiles[zu][rp]){var dp=Hu[_d],cp=Hu.size,Sp=cp/_h,yp=[Sp*tp,Sp*ep,Sp,Sp],Bp=t$8.__assign({key:"pano_tile.".concat(Fu.panoIndex,".").concat(_d,".").concat(zu,".").concat(ep,".").concat(tp),basisLoaderInitialized:Ei.isInitialized(),cut:yp},ii(Fu.imageOptions,["format","mappings"]));zu<=1&&(Bp.format==="jpg"||/\.jpg$/.test(dp))?(Sp!==1024&&(Bp.size=1024),Bp.quality=70):Sp!==512&&(Bp.size=512);var _p=Fu.imageOptions.transform?Fu.imageOptions.transform(dp,Bp):ct$1(dp,Bp),Cp=Fu.textureLoader.load(_p,{preInit:!0}).then(function(np){return np.body}),Ep=null;if(Fu.luminance){var ap=Fu.luminance[_d],ip=ap.match(/\/cube_(\d+)\//),hp=!!ip&&Number(ip[1]);if(hp!==!1){var up=cp/hp,pp=t$8.__assign(t$8.__assign({},Bp),{size:256,cut:[yp[0]/up,yp[1]/up,yp[2]/up,yp[3]/up],key:"pano_tile_luminance.".concat(Fu.panoIndex,".").concat(_d,".").concat(zu,".").concat(ep,".").concat(tp)}),gp=Fu.imageOptions.transform?Fu.imageOptions.transform(ap,pp):ct$1(ap,pp);Ep=Fu.textureLoader.load(gp,{format:r$a.LuminanceFormat,preInit:!0}).then(function(np){return np.body}).catch(function(){return null})}}Fu.pedding++;var Ap=Promise.all([Cp,Ep]).then(function(np){return Pu.pedding--,np},function(np){return Pu.pedding--,Promise.reject(np)});($p=Fu.tiles[zu][rp]=new _a$1(qu,Ap)).name=rp,$p.renderOrder=zu,Ku.add($p)}Fu.tiles[zu][rp].activeTime=Cu,Zu.push(rp)}for(var Mp=0,Dp=Object.keys(Fu.tiles[zu]).sort(function(np,sp){return Pu.tiles[zu][sp].activeTime-Pu.tiles[zu][np].activeTime}).slice(Math.max(24,Zu.length));Mp<Dp.length;Mp++){rp=Dp[Mp];var $p=Fu.tiles[zu][rp];Ku.remove($p),$p.dispose(),delete Fu.tiles[zu][rp],Fu.object.needsRender=!0}}},Fu=this,Vu=0,ku=Ou;Vu<ku.length;Vu++)Du(ku[Vu]);for(var Nu=0;Nu<this.tiles.length;Nu++)if(this.tiles[Nu]){var Gu=Ou.length>0&&Nu<=Ou[Ou.length-1].level;for(var ju in this.tiles[Nu])this.tiles[Nu][ju].visible!==Gu&&(this.tiles[Nu][ju].visible=Gu,this.tiles[Nu][ju].needsRender=!0),this.tiles[Nu][ju].updateTime(Cu)}}},_u.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},_u}(),za=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua=new r$a.BufferGeometry;Ua.setAttribute("position",new r$a.BufferAttribute(za,3)),Ua.setIndex(new r$a.BufferAttribute(Ka,1));var ja=function(){function _u(){this.material=new r$a.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$a.Uniform(null),matrix:new r$a.Uniform(null),alpha:new r$a.Uniform(null),map:new r$a.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$a.CustomBlending,blendSrc:r$a.SrcAlphaFactor,blendDst:r$a.OneMinusSrcAlphaFactor,blendSrcAlpha:r$a.OneFactor,blendDstAlpha:r$a.OneMinusSrcAlphaFactor}),this.object=new r$a.Mesh(Ua,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro({alpha:0})}return _u.prototype.setMaterial=function($u){$u?(this.material.uniforms.size.value=$u.size,this.material.uniforms.matrix.value=$u.matrix,this.material.uniforms.map.value=$u.map,this.alphaMotion.set({alpha:$u.alpha},500).catch(Qe),this.material.uniforms.alpha.value=$u.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe));var Tu=$u!==null;Tu!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Tu,this.material.needsUpdate=!0,this.object.visible=$u!==null)},_u.prototype.updateTime=function($u){this.alphaMotion.ended||(this.alphaMotion.update($u),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},_u.prototype.dispose=function(){this.material.dispose()},_u}(),Ga=new r$a.Matrix4().makeRotationAxis(new r$a.Vector3(0,1,0),Math.PI),Wa=new r$a.Vector3(-1,1,1),Xa=function(_u){function $u(Tu){var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu=this,Vu=$u.parseArgs(Tu);(Fu=_u.call(this,Vu)||this).initAnimationed=!1,Fu.currentPanoIndex=Vu.initial[0],Fu.maxAccessibleDistance=Vu.maxAccessibleDistance,Fu.panoTapTriggerRadius=Vu.panoTapTriggerRadius,Fu.panoCircleMeshCreator=Vu.panoCircleMeshCreator,Fu.tileLevelForFov=Vu.tileLevelForFov;var ku=Fu.model.getMaterial()||{},Nu=ku.pano0,Gu=ku.pano1;Nu&&(Gu==null?void 0:Gu.map)!==Nu.map&&(Fu.model.setMaterial({pano0:Gu}),Nu.map.dispose(),(Cu=Nu.luminanceMap)===null||Cu===void 0||Cu.dispose()),Fu.boundingMesh=Fu.generateBoundingMesh(),Fu.boundingMesh.setMaterial(Fu.model.getMaterial()||{}),Fu.boundingMesh.visible=!1,Fu.scene.add(Fu.boundingMesh),Fu.panoMeshes=[],Fu.updatePanoMeshes(),Fu.locationMotion=new Ro({count:0,distance:Fu.camera.pose.distance,modelAlpha:(Bu=(Pu=Fu.model.getMaterial())===null||Pu===void 0?void 0:Pu.modelAlpha)!==null&&Bu!==void 0?Bu:0,perspToOrtho:(Ru=(Lu=Fu.model.getMaterial())===null||Lu===void 0?void 0:Lu.perspToOrtho)!==null&&Ru!==void 0?Ru:0}),Fu.panoResources={},Fu.panoResources[Fu.locationMotion.keyframes[0].key=Fu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Fu.currentPanoIndex,workCode:Fu.work.workCode,panoPicture:(Du=(Ou=Fu.model.getMaterial())===null||Ou===void 0?void 0:Ou.pano1)!==null&&Du!==void 0?Du:null,position:Fu.camera.pose.offset.clone(),effect:"fly"};var ju={allowHosts:Fu.work.allowHosts,requestProxy:Fu.requestProxy,networkSubscribe:Fu.networkSubscribe};return Fu.textureLoader=new Ii(ju),Fu.tiling=new qa(ju,Fu.imageOptions),Fu.scene.add(Fu.tiling.object),Fu.panoVideo=new ja,Fu.scene.add(Fu.panoVideo.object),Fu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Bu,Lu,Ru=_u.parseArgs.call(this,Tu);return t$8.__assign(t$8.__assign({},Ru),{maxAccessibleDistance:(Cu=Tu.maxAccessibleDistance)!==null&&Cu!==void 0?Cu:5,panoTapTriggerRadius:(Pu=Tu.panoTapTriggerRadius)!==null&&Pu!==void 0?Pu:.5,panoCircleMeshCreator:(Bu=Tu.panoCircleMeshCreator)!==null&&Bu!==void 0?Bu:function(){return new as},tileLevelForFov:(Lu=Tu.tileLevelForFov)!==null&&Lu!==void 0?Lu:function(Ou,Du){var Fu=2*Math.atan(Math.tan(Ou/180*Math.PI/2)*(Du.width/Du.height))/Math.PI*180,Vu=Math.max(Du.width/Fu,Du.height/Ou);return Vu>80?4:Vu>48?3:Vu>24?2:Vu>12?1:0}})},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){var Tu,Cu,Pu=this;_u.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Pu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Bu=this.videoTexture.image;Bu.pause(),Bu.oncanplay=function(){},Bu.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Lu=(Tu=this.model.getMaterial())!==null&&Tu!==void 0?Tu:{},Ru=Lu.pano0,Ou=Lu.pano1,Du=0,Fu=Object.keys(this.panoResources);Du<Fu.length;Du++){var Vu=Fu[Du],ku=this.panoResources[Vu];if(ku.panoPicture){var Nu=ku.panoPicture.map;Nu&&Nu!==(Ru==null?void 0:Ru.map)&&Nu!==(Ou==null?void 0:Ou.map)&&(Nu.dispose(),(Cu=ku.panoPicture.luminanceMap)===null||Cu===void 0||Cu.dispose(),ku.panoPicture=null)}delete this.panoResources[Vu]}},$u.prototype.isReady=function(){return this.locationMotion.ended===!0&&_u.prototype.isReady.call(this)},$u.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){var Ru=this;this.userAction=Lu,this.work=Tu,this.currentPanoIndex=Cu,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Ou={},Du=!0;this.boundingMesh&&(Ou=this.boundingMesh.getMaterial()||{},Du=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Du,this.boundingMesh.setMaterial(Ou),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Fu=0,Vu=this.panoMeshes;Fu<Vu.length;Fu++)Vu[Fu].visible=!1;return this.moveToPano(Cu,{effect:"fade",duration:Bu,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov,moveEndCallback:function(){Ru.initAnimationed=!0},moveCancelCallback:function(){Ru.initAnimationed=!0}},Lu),!0},$u.prototype.updateModel=function(Tu){this.model=Tu;var Cu={},Pu=!0;this.boundingMesh&&(Cu=this.boundingMesh.getMaterial()||{},Pu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Pu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Cu),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu=[],ku=2;ku<arguments.length;ku++)Vu[ku-2]=arguments[ku];if(!this.destroyed){var Nu={},Gu={},ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var zu=this.locationMotion.getKeyFrameSegment(Tu),Wu=zu[0],Qu=zu[1],Ku=this.panoResourceFromLocationMotionKeyframe(Wu),Yu=this.panoResourceFromLocationMotionKeyframe(Qu),Xc=new r$a.Vector3().copy(Ku.position),_d=new r$a.Vector3().copy(Yu.position),_f=this.locationMotion.value.count-Qu.value.count+1;Nu.progress=_f,Nu.modelAlpha=this.locationMotion.value.modelAlpha,Nu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Yu.panoPicture&&(_f<1?Ku.panoPicture&&(Nu.pano0=Ku.panoPicture):Nu.pano0=Yu.panoPicture,Nu.pano1=Yu.panoPicture),Uu=Nu.useBlackTransition=Yu.effect==="instant"||Yu.effect==="montage",Yu.effect!=="fade"&&Yu.effect!=="montage"||(Nu.pano0&&Ku.panoPicture&&(Nu.pano0={map:Nu.pano0.map,luminanceMap:Nu.pano0.luminanceMap,matrix:Ku.panoPicture.matrix.clone().setPosition(Yu.position)}),Xc.copy(_d)),Gu.distance=this.locationMotion.value.distance,Gu.offset=new r$a.Vector3(Xc.x+(_d.x-Xc.x)*_f,Xc.y+(_d.y-Xc.y)*_f,Xc.z+(_d.z-Xc.z)*_f);for(var qu=[],Xu=[],Zu=0,_c=this.locationMotion.keyframes;Zu<_c.length;Zu++){var Ju=_c[Zu],_h=Ju.key,ep=Ju.progress;_h!==void 0&&(qu.push(_h),ep>=this.locationMotion.progress&&Xu.push(_h))}for(var tp=0,rp=Object.keys(this.panoResources);tp<rp.length;tp++){var dp=rp[tp];if(!(Xu.indexOf(dp)>=0)){var cp=this.panoResources[dp];if(cp.panoPicture){var Sp=cp.panoPicture.map;if(Sp){if(Sp===((Pu=Nu.pano0)===null||Pu===void 0?void 0:Pu.map)||Sp===((Bu=Nu.pano1)===null||Bu===void 0?void 0:Bu.map))continue;Sp.dispose(),(Lu=cp.panoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),cp.panoPicture=null}}qu.indexOf(dp)>=0||delete this.panoResources[dp]}}Ku.workCode===Yu.workCode?this.currentPanoIndex=_f<.5?Ku.panoIndex:Yu.panoIndex:this.currentPanoIndex=Yu.panoIndex,this.emit("movingToPano",Hu.panoIndex,ju.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Gu.longitude=this.cameraMotion.value.longitude,Gu.latitude=this.cameraMotion.value.latitude,Gu.fov=this.cameraMotion.value.fov),ia$1(Nu)===!1&&(this.model.setMaterial(Nu),this.boundingMesh.setMaterial(Nu)),ia$1(Gu)===!1&&this.setCamera(Gu),this.camera.pose.distance>.1)for(var yp=0;yp<this.work.observers.length;yp++)(Ep=this.panoMeshes[yp])&&(Ep.visible=!1);else{var Bp=this.work.observers[this.currentPanoIndex];if(Bp){var _p=Bp.visibleNodes.concat(this.currentPanoIndex),Cp=this.getForwardPanoIndexOrNot();for(yp=0;yp<this.work.observers.length;yp++){var Ep,ap=this.work.observers[yp];if(Ep=this.panoMeshes[yp])if(ap.loadable||ap.active)if(_p.indexOf(yp)!==-1)if(Uu)Ep.visible=!1,Ep.setOpacity(0);else{Ep.visible=!0;var ip=Ep.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ep.setCurrent(Cp===yp),Ep.setOpacity(ip<.01?0:ho(1.4/ip,.5,.7)),Ep.updateTime&&Ep.updateTime(Tu,Cu)}else Ep.visible=!1,Ep.setOpacity(0);else Ep.visible=!1,Ep.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ru=this.boundingMesh.getMaterial())===null||Ru===void 0?void 0:Ru.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var hp=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var up=Hu.panoIndex,pp=this.work.observers[up];if(pp)if(_s(this.camera.position,pp.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Ou=pp.images.luminance)!==null&&Ou!==void 0?Ou:null),this.tiling.panoIndex!==up&&this.tiling.cleanup(),this.tiling.panoIndex=up,this.tiling.setResource((Fu=(Du=pp.images)===null||Du===void 0?void 0:Du.tiles)!==null&&Fu!==void 0?Fu:[]),this.tiling.setRotation(pp.quaternion),this.tiling.setPosition(pp.position);var gp=this.renderer.getDrawingBufferSize(new r$a.Vector2);gp.width*=this.scissor.width,gp.height*=this.scissor.height;var Ap=this.imageOptions.size;if(Ap===void 0&&pp){var Mp=pp.images.up.match(/\/cube_(\d+)\//);Mp&&(Ap=Number(Mp[1]))}Ap===void 0&&(Ap=2048);var Dp=0;Ap>=1024&&(Dp=1),Ap>=2048&&(Dp=2),Ap>=4096&&(Dp=3),Ap>=8192&&(Dp=4);var $p=this.tileLevelForFov(this.camera.fov,gp),np=$p>Dp?$p:0;this.tiling.update(this.camera,np,Tu)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;hp!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Tu)}},$u.prototype.render=function(){var Tu=this.work.observers[this.currentPanoIndex];Tu&&Tu.video&&(this.needsRender=!0),_u.prototype.render.call(this)},$u.prototype.postProcessing=function(Tu,Cu){if(!this.destroyed)return this.effect||(this.effect=new Sa(this.renderer)),this.effect.render(Tu,Cu)},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$2())[1],Pu=this.panoResourceFromLocationMotionKeyframe(Cu),Bu=this.work.observers[Pu.panoIndex];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:Bu?Bu.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Bu,Lu,Ru,Ou=this,Du=this.work.observers[Tu],Fu=t$8.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),Vu=(Bu=this.imageOptions.transform)!==null&&Bu!==void 0?Bu:ct$1,ku={right:Vu(Du.images.right,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".right")})),left:Vu(Du.images.left,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".left")})),up:Vu(Du.images.up,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".up")})),down:Vu(Du.images.down,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".down")})),front:Vu(Du.images.front,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".front")})),back:Vu(Du.images.back,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".back")}))},Nu={key:"pano_luminance.".concat(Tu),basisLoaderInitialized:Ei.isInitialized(),size:Fu.size?Fu.size/2:1024},Gu=this.enableIOSEDR&&Du.images.luminance?{right:Vu(Du.images.luminance.right,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".right")})),left:Vu(Du.images.luminance.left,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".left")})),up:Vu(Du.images.luminance.up,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".up")})),down:Vu(Du.images.luminance.down,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".down")})),front:Vu(Du.images.luminance.front,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".front")})),back:Vu(Du.images.luminance.back,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".back")}))}:null,ju="pano:"+va(ku);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ju)return;var Hu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Hu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Hu,Du),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Uu,zu=this.model.getMaterial()||{},Wu=zu.pano0,Qu=zu.pano1;if(Wu&&Wu.map.name===ju&&Wu.luminanceMap!==null===this.enableIOSEDR?Uu=Wu:(Qu==null?void 0:Qu.map.name)===ju&&Qu.luminanceMap!==null===this.enableIOSEDR&&(Uu=Qu),Uu){var Ku={panoIndex:Tu,workCode:this.work.workCode,effect:(Ru=Cu.effect)!==null&&Ru!==void 0?Ru:"fly",panoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$a.Matrix4().compose(Du.position,Du.quaternion,Wa)},position:Du.position.clone()};at$1.shared.add(function(){Ou.pending=!1,Ou.emit("panoLoaded",Tu),Ou.doMoveToPano(Tu,Ku,Cu,Pu)},!0,1)}else{this.pendingTextureTask={panoIndex:Tu,hash:ju,onLoad:function(Xc,_d){var _f,qu;if(Ou.pending=!1,Ou.destroyed)Xc.body.dispose();else{Xc.body.name=ju,Ou.emit("panoLoaded",Tu);var Xu={panoIndex:Tu,workCode:Ou.work.workCode,effect:(_f=Cu.effect)!==null&&_f!==void 0?_f:"fly",panoPicture:{map:Xc.body,luminanceMap:(qu=_d==null?void 0:_d.body)!==null&&qu!==void 0?qu:null,matrix:new r$a.Matrix4().compose(Du.position,Du.quaternion,Wa)},position:Du.position.clone()};Ou.doMoveToPano(Tu,Xu,Cu,Pu)}},onError:function(Xc){Ou.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Ou.emit("panoLoadError",Xc,Tu),Ou.emit("moveToPanoCanceled",Tu)}};var Yu=this.panoMeshes[Tu];Yu&&Yu.tap&&Yu.tap(),Promise.all([this.textureLoader.loadCube(ku,{format:r$a.RGBFormat,viaAjax:!0},void 0,void 0,function(Xc){var _d,_f;Ou.emit("textureLoading",Xc,Tu,Du),((_d=Ou.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===ju&&((_f=Ou.panoMeshes[Tu])===null||_f===void 0||_f.setProgress(Xc))},this.renderer),Gu?this.textureLoader.loadCube(Gu,{format:r$a.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Xc){var _d,_f,qu=Xc[0],Xu=Xc[1];((_d=Ou.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===ju?(Ou.pendingTextureTask.onLoad(qu,Xu),(_f=Ou.panoMeshes[Tu])===null||_f===void 0||_f.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureLoaded",Tu,Du,qu.meta)):(qu.body.dispose(),Xu==null||Xu.body.dispose())}).catch(function(Xc){var _d,_f;((_d=Ou.pendingTextureTask)===null||_d===void 0?void 0:_d.hash)===ju&&(Ou.pendingTextureTask.onError(Xc),(_f=Ou.panoMeshes[Tu])===null||_f===void 0||_f.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureError",Xc,Tu,Du),Ou.emit("error",Xc))}),this.emit("textureStartLoad",Tu,Du)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;if(!this.destroyed){var Fu=!1;this.pending=!1,this.userAction=Bu,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ru=Cu.latitude)!==null&&Ru!==void 0?Ru:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Ou=Cu.fov)!==null&&Ou!==void 0?Ou:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(Vu,ku){Fu=!0,Du.emit("initAnimationWillStart",Vu,ku,Du.userAction)},moveEndCallback:function(Vu,ku){Du.emit("initAnimationEnded",Vu,ku,Du.userAction),Du.initAnimationed=!0},moveCancelCallback:function(){var Vu={longitude:Du.camera.pose.longitude,latitude:Du.camera.pose.latitude,fov:Du.camera.pose.fov,offset:Du.camera.pose.offset.clone(),distance:Du.camera.pose.distance};Fu===!1&&Du.emit("initAnimationWillStart",Du.currentPanoIndex,Vu,Du.userAction),Du.emit("initAnimationEnded",Du.currentPanoIndex,Vu,Du.userAction),Du.initAnimationed=!0}},Bu)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.locationMotionKeyframesLength=function(Tu){for(var Cu=0,Pu=1;Pu<Tu.length;Pu++){var Bu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu]).position;Cu+=Bu.distanceTo(Lu)*(Tu[Pu].value.count-Tu[Pu-1].value.count)}return Cu},$u.prototype.updatePanoMeshes=function(Tu){Tu===void 0&&(Tu=!0);for(var Cu={},Pu=0,Bu=this.panoMeshes;Pu<Bu.length;Pu++)Cu[(Du=Bu[Pu]).name]=Du;this.panoMeshes.length=0;for(var Lu=0;Lu<this.work.observers.length;Lu++){var Ru="panoCircle_".concat(this.work.workCode,"_").concat(Lu),Ou=this.work.observers[Lu],Du=void 0;if(Cu[Ru]?((Du=Cu[Ru]).loading===!0&&Ou.loadable===!1&&Du.setLoading(!1),delete Cu[Ru]):((Du=this.panoCircleMeshCreator()).name=Ru,this.helper.add(Du)),Du.position.copy(Ou.standingPosition),Tu&&this.model.loaded&&this.model.bvhs.loaded){var Fu=new r$a.Vector3(0,-1,0),Vu=new r$a.Vector3(0,.1,0).add(Du.position),ku=new r$a.Raycaster(Vu,Fu,0,.2),Nu=this.model.intersectRaycaster(ku)[0];Nu&&Nu.point.distanceTo(Vu)<.1&&Du.position.copy(Nu.point)}this.panoMeshes[Lu]=Du}for(var Gu=0,ju=Object.keys(Cu);Gu<ju.length;Gu++){var Hu=ju[Gu];this.helper.remove(Cu[Hu]),Cu[Hu].dispose(),delete Cu[Hu]}},$u.prototype.generateBoundingMesh=function(Tu){Tu===void 0&&(Tu=!1);for(var Cu=this.model.bounding.clone(),Pu=0,Bu=this.work.observers;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Cu.expandByPoint(Lu.standingPosition),Cu.expandByPoint(new r$a.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Tu&&Cu.expandByPoint(this.camera.position);var Ru=Ks(Cu,new r$a.Vector3(1,0,1));return Ru.name="panorama_bounding",Ru},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;Pu===void 0&&(Pu={}),this.userAction=Bu;var Fu=_e$2(),Vu=Kr();this.tiling.cleanup(),this.panoResources[Vu]=Cu;var ku,Nu,Gu;if(this.locationMotion.ended){var ju=this.locationMotion.getKeyFrameSegment(Fu);ju[0];var Hu=ju[1],Uu=this.locationMotion.value,zu=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position;ku=Math.max(zu.distanceTo(Wu),1),Nu=[{key:Hu.key,progress:0,value:t$8.__assign(t$8.__assign({},Uu),{count:0})},{key:Vu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(Fu),Ku=Qu[0],Yu=(Hu=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Ku).position),Xc=(zu=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position,Hu.value.count-Uu.count),_d=Math.max(Yu.distanceTo(zu),1)*Xc;ku=_d+Math.max(zu.distanceTo(Wu),1),Nu=[{key:Ku.key,progress:0,value:t$8.__assign({},Uu)},{key:Hu.key,progress:_d/ku,value:Hu.value},{key:Vu,progress:1,value:{count:Hu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var _f=this.locationMotionKeyframesLength(this.locationMotion.keyframes),qu=this.locationMotionKeyframesLength(Nu);Gu=_f===0||_f===0?0:this.locationMotion.getProgressVelocity(Fu)*_f/qu}var Xu=this.calculateMovingDuration(Pu.duration,Pu.effect==="fade"||Pu.effect==="montage"?0:ku),Zu={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},_c={longitude:(Lu=Zu.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Ru=Zu.latitude)!==null&&Ru!==void 0?Ru:this.camera.pose.latitude,fov:(Ou=Zu.fov)!==null&&Ou!==void 0?Ou:this.camera.pose.fov,offset:Cu.position.clone(),distance:this.camera.pose.distance};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,_c),this.emit("panoWillArrive",Tu,_c,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Zu,Xu).catch(Qe),this.locationMotion.setKeyframes(Nu,Xu,Gu).then(function(){var Ju,_h,ep,tp={longitude:Du.camera.pose.longitude,latitude:Du.camera.pose.latitude,fov:Du.camera.pose.fov,offset:Du.camera.pose.offset.clone(),distance:Du.camera.pose.distance};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,tp),Du.emit("panoArrived",Tu,tp,Bu);var rp=Du.work.observers[Du.currentPanoIndex];if(rp&&rp.video&&Du.videoTexture&&Du.videoTexture.image instanceof HTMLVideoElement){var dp=Ga.clone().multiply((ep=(_h=(Ju=Du.model.getMaterial())===null||Ju===void 0?void 0:Ju.pano1)===null||_h===void 0?void 0:_h.matrix)!==null&&ep!==void 0?ep:new r$a.Matrix4).multiply(rp.video.matrix),cp={map:Du.videoTexture,size:rp.video.size,matrix:dp,alpha:1},Sp=Kr(),yp=Du.videoTexture.image;yp.setAttribute("uuid",Sp),xa().then(function(Bp){Bp&&rp.video&&yp.getAttribute("uuid")===Sp&&(yp.oncanplay=function(){yp.oncanplay=Qe,yp.play()},yp.ontimeupdate=function(){yp.currentTime>.5&&(yp.ontimeupdate=Qe,Du.panoVideo.setMaterial(cp))},yp.src=rp.video.source)}).catch(function(){yp.removeAttribute("uuid")})}},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("moveToPanoCanceled",Tu)})},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this,Pu=this.work.observers[this.currentPanoIndex];if(!Pu)return null;var Bu=Tu!=null?Tu:new r$a.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$a.Vector3)),Lu=Bu.ray.origin.clone(),Ru=new r$a.Vector3,Ou=this.model.intersectRaycaster(new r$a.Raycaster(Bu.ray.origin,new r$a.Vector3(0,-1,0)))[0];Ou&&Ou.distance<=2?Ru.copy(Ou.point):Ru.copy(Bu.ray.origin).add(new r$a.Vector3(0,-1.5,0));var Du=this.model.intersectRaycaster(Bu)[0],Fu=(Du?Du.point:Bu.ray.origin.clone().add(Bu.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Ru).normalize();if(Fu.length()===0)return null;for(var Vu=Pu.accessibleNodes.filter(function(Wu){if(Wu===Cu.currentPanoIndex)return!1;var Qu=Cu.work.observers[Wu],Ku=Qu.standingPosition.clone().sub(Lu);return Ku.length()!==0&&!(Ku.angleTo(new r$a.Vector3(0,-1,0))<Math.PI/12)&&(Qu.loadable||Qu.active)}).slice().sort(function(Wu,Qu){return Cu.work.observers[Wu].standingPosition.clone().distanceTo(Ru)-Cu.work.observers[Qu].standingPosition.clone().distanceTo(Ru)}),ku=0,Nu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];ku<Nu.length;ku++)for(var Gu=Nu[ku],ju=0,Hu=Vu;ju<Hu.length;ju++){var Uu=Hu[ju],zu=this.work.observers[Uu].standingPosition.clone().sub(Ru);if(zu.length()!==0&&Fu.angleTo(zu)<Gu)return Uu}return null},$u.prototype.onTapGesture=function(Tu){var Cu=this,Pu=Tu.pointers.map(function(Zu){return ii(Zu,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Bu=this.relativeClientPosition(Tu.center),Lu=new r$a.Raycaster;if(Lu.setFromCamera(Bu,this.camera),!this.emit("wantsTapGesture",Lu,Bu,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Lu,Bu,!0),this.interiaMovement=!1;var Ru=this.camera.getWorldDirection(new r$a.Vector3).setY(0),Ou=null,Du=this.work.observers[this.currentPanoIndex];if(Du){var Fu=Du.accessibleNodes.filter(function(Zu){if(Zu===Cu.currentPanoIndex)return!1;var _c=Cu.work.observers[Zu];return!(_c.position.distanceTo(Cu.camera.position)>Cu.maxAccessibleDistance)&&(_c.loadable||_c.active)}),Vu=this.model.intersectRaycaster(Lu)[0];if(Vu){var ku=ta(Fu,function(Zu){var _c=Cu.work.observers[Zu].standingPosition.clone();return _c.clone().sub(Cu.camera.position).setY(0).angleTo(Ru)>Math.PI/2?1/0:_c.distanceTo(Vu.point)},!0),Nu=ku[0];ku[1]<this.panoTapTriggerRadius&&(Ou=Nu)}oo(Ou)&&(Ou=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,ju=this.locationMotion.keyframes;Gu<ju.length;Gu++){var Hu=ju[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(Hu);if(!(Hu.progress<this.locationMotion.progress)&&Uu.panoIndex===Ou){Ou=null;break}}if(this.emit("panoSelected",Ou),oo(Ou))this.locationMotion.ended===!0&&this.cameraBounce();else{var zu=this.work.observers[Ou];if(zu.active){for(var Wu={},Qu=Math.PI/6,Ku=Math.PI/12,Yu=zu.position.clone().setY(0).sub(Du.position.clone().setY(0)).normalize(),Xc=[],_d=0,_f=zu.accessibleNodes;_d<_f.length;_d++)if((Nu=_f[_d])!==this.currentPanoIndex&&Nu!==Ou){var qu=this.work.observers[Nu].position.clone().sub(zu.position).setY(0);Yu.angleTo(qu)<Qu&&Xc.push(qu)}var Xu=(Xc.length>0?Xc:t$8.__spreadArray(t$8.__spreadArray([],[],!0),[],!0)).slice().sort(function(Zu,_c){return Zu.angleTo(Yu)-_c.angleTo(Yu)})[0];Xu&&Xu.angleTo(Ru)>Ku&&(Wu.longitude=Math.atan2(-Xu.x,-Xu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Wu.fov=this.defaultFov),this.emit("wantsMoveToPano",Ou,Wu,!0)}else this.panoMeshes[Ou]&&(this.panoMeshes[Ou].setDisabled(!1),this.panoMeshes[Ou].setLoading(!0))}}}}},$u}(ba$1),Ya=Math.PI/180,Za=180/Math.PI,Ja=function(){var _u=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _u}}(),$a=function(){var _u=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _u}}(),el=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _u}}(),tl=function(){var _u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,$u=_u?parseInt(_u[1],10):null;return function(){return $u}}(),il=function(){var _u=!1;if(tl()===65){var $u=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if($u){var Tu=$u[1].split(".");Tu[0],Tu[1];var Cu=Tu[2],Pu=Tu[3];_u=parseInt(Cu,10)===3325&&parseInt(Pu,10)<148}}return function(){return _u}}(),nl=function(){var _u=Ja()&&$a()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return _u}}(),rl=function(){var _u=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _u}}();function ol(){var _u=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl()?!_u:_u}var sl,al=(sl={},function(_u,$u){sl[_u]===void 0&&(console.warn("cardboard: "+$u),sl[_u]=!0)});function ll(_u){var $u,Tu=_u.indexOf("://");$u=Tu!==-1?Tu+3:0;var Cu=_u.indexOf("/",$u);return Cu===-1&&(Cu=_u.length),_u.substring(0,Cu)}var ul,hl=function(_u,$u,Tu){(function(Cu,Pu,Bu){var Lu=Pu?Pu[0]:0,Ru=Pu?Pu[1]:0,Ou=Pu?Pu[2]:0,Du=Pu?Pu[3]:1,Fu=Lu+Lu,Vu=Ru+Ru,ku=Ou+Ou,Nu=Lu*Fu,Gu=Lu*Vu,ju=Lu*ku,Hu=Ru*Vu,Uu=Ru*ku,zu=Ou*ku,Wu=Du*Fu,Qu=Du*Vu,Ku=Du*ku;Cu[0]=1-(Hu+zu),Cu[1]=Gu+Ku,Cu[2]=ju-Qu,Cu[3]=0,Cu[4]=Gu-Ku,Cu[5]=1-(Nu+zu),Cu[6]=Uu+Wu,Cu[7]=0,Cu[8]=ju+Qu,Cu[9]=Uu-Wu,Cu[10]=1-(Nu+Hu),Cu[11]=0,Cu[12]=Bu?Bu[0]:0,Cu[13]=Bu?Bu[1]:0,Cu[14]=Bu?Bu[2]:0,Cu[15]=1})(_u,$u),Tu&&function(Cu,Pu,Bu){var Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu=Bu[0],Wu=Bu[1],Qu=Bu[2];Pu===Cu?(Cu[12]=Pu[0]*zu+Pu[4]*Wu+Pu[8]*Qu+Pu[12],Cu[13]=Pu[1]*zu+Pu[5]*Wu+Pu[9]*Qu+Pu[13],Cu[14]=Pu[2]*zu+Pu[6]*Wu+Pu[10]*Qu+Pu[14],Cu[15]=Pu[3]*zu+Pu[7]*Wu+Pu[11]*Qu+Pu[15]):(Lu=Pu[0],Ru=Pu[1],Ou=Pu[2],Du=Pu[3],Fu=Pu[4],Vu=Pu[5],ku=Pu[6],Nu=Pu[7],Gu=Pu[8],ju=Pu[9],Hu=Pu[10],Uu=Pu[11],Cu[0]=Lu,Cu[1]=Ru,Cu[2]=Ou,Cu[3]=Du,Cu[4]=Fu,Cu[5]=Vu,Cu[6]=ku,Cu[7]=Nu,Cu[8]=Gu,Cu[9]=ju,Cu[10]=Hu,Cu[11]=Uu,Cu[12]=Lu*zu+Fu*Wu+Gu*Qu+Pu[12],Cu[13]=Ru*zu+Vu*Wu+ju*Qu+Pu[13],Cu[14]=Ou*zu+ku*Wu+Hu*Qu+Pu[14],Cu[15]=Du*zu+Nu*Wu+Uu*Qu+Pu[15])}(_u,_u,Tu),function(Cu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Pu[4],Fu=Pu[5],Vu=Pu[6],ku=Pu[7],Nu=Pu[8],Gu=Pu[9],ju=Pu[10],Hu=Pu[11],Uu=Pu[12],zu=Pu[13],Wu=Pu[14],Qu=Pu[15],Ku=Bu*Fu-Lu*Du,Yu=Bu*Vu-Ru*Du,Xc=Bu*ku-Ou*Du,_d=Lu*Vu-Ru*Fu,_f=Lu*ku-Ou*Fu,qu=Ru*ku-Ou*Vu,Xu=Nu*zu-Gu*Uu,Zu=Nu*Wu-ju*Uu,_c=Nu*Qu-Hu*Uu,Ju=Gu*Wu-ju*zu,_h=Gu*Qu-Hu*zu,ep=ju*Qu-Hu*Wu,tp=Ku*ep-Yu*_h+Xc*Ju+_d*_c-_f*Zu+qu*Xu;tp&&(tp=1/tp,Cu[0]=(Fu*ep-Vu*_h+ku*Ju)*tp,Cu[1]=(Ru*_h-Lu*ep-Ou*Ju)*tp,Cu[2]=(zu*qu-Wu*_f+Qu*_d)*tp,Cu[3]=(ju*_f-Gu*qu-Hu*_d)*tp,Cu[4]=(Vu*_c-Du*ep-ku*Zu)*tp,Cu[5]=(Bu*ep-Ru*_c+Ou*Zu)*tp,Cu[6]=(Wu*Xc-Uu*qu-Qu*Yu)*tp,Cu[7]=(Nu*qu-ju*Xc+Hu*Yu)*tp,Cu[8]=(Du*_h-Fu*_c+ku*Xu)*tp,Cu[9]=(Lu*_c-Bu*_h-Ou*Xu)*tp,Cu[10]=(Uu*_f-zu*Xc+Qu*Ku)*tp,Cu[11]=(Gu*Xc-Nu*_f-Hu*Ku)*tp,Cu[12]=(Fu*Zu-Du*Ju-Vu*Xu)*tp,Cu[13]=(Bu*Ju-Lu*Zu+Ru*Xu)*tp,Cu[14]=(zu*Yu-Uu*_d-Wu*Ku)*tp,Cu[15]=(Nu*_d-Gu*Yu+ju*Ku)*tp)}(_u,_u)},cl=function(){function _u($u,Tu){$u===void 0&&($u=new r$a.Vector3),Tu===void 0&&(Tu=0),this.sample=$u,this.timestampS=Tu}return _u.prototype.set=function($u,Tu){this.sample=$u,this.timestampS=Tu},_u.prototype.copy=function($u){this.set($u.sample,$u.timestampS)},_u}(),dl=function(){function _u($u,Tu){this.kFilter=$u,this.isDebug=Tu,this.currentAccelMeasurement=new cl,this.currentGyroMeasurement=new cl,this.previousGyroMeasurement=new cl,Ja()?this.filterQ=new r$a.Quaternion(-1,0,0,1):this.filterQ=new r$a.Quaternion(1,0,0,1),this.previousFilterQ=new r$a.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$a.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$a.Vector3,this.measuredGravity=new r$a.Vector3,this.gyroIntegralQ=new r$a.Quaternion}return _u.prototype.addAccelMeasurement=function($u,Tu){this.currentAccelMeasurement.set($u,Tu)},_u.prototype.addGyroMeasurement=function($u,Tu){this.currentGyroMeasurement.set($u,Tu);var Cu,Pu=Tu-this.previousGyroMeasurement.timestampS;Cu=Pu,isNaN(Cu)||Cu<=.001||Cu>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_u.prototype.getOrientation=function(){return this.filterQ},_u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var $u=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Tu=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,$u);this.gyroIntegralQ.multiply(Tu),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Tu);var Cu=new r$a.Quaternion;Cu.copy(this.filterQ),Cu.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Cu),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Pu,Bu=new r$a.Quaternion;Bu.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Bu.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za*((Pu=Bu).w>1?0:2*Math.acos(Pu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Lu=new r$a.Quaternion;Lu.copy(this.filterQ),Lu.multiply(Bu),this.filterQ.slerp(Lu,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_u.prototype.accelToQuaternion_=function($u){var Tu=new r$a.Vector3;Tu.copy($u),Tu.normalize();var Cu=new r$a.Quaternion;return Cu.setFromUnitVectors(new r$a.Vector3(0,0,-1),Tu),Cu.inverse(),Cu},_u.prototype.gyroToQuaternionDelta_=function($u,Tu){var Cu=new r$a.Quaternion,Pu=new r$a.Vector3;return Pu.copy($u),Pu.normalize(),Cu.setFromAxisAngle(Pu,$u.length()*Tu),Cu},_u}(),pl=function(){function _u($u,Tu){this.predictionTimeS=$u,this.isDebug=Tu,this.previousQ=new r$a.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$a.Quaternion,this.outQ=new r$a.Quaternion}return _u.prototype.getPrediction=function($u,Tu,Cu){if(!this.previousTimestampS)return this.previousQ.copy($u),this.previousTimestampS=Cu,$u;var Pu=new r$a.Vector3;Pu.copy(Tu),Pu.normalize();var Bu=Tu.length();if(Bu<20*Ya)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za*Bu).toFixed(1)),this.outQ.copy($u),this.previousQ.copy($u),this.outQ;var Lu=Bu*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Pu,Lu),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy($u),this.previousTimestampS=Cu,this.outQ},_u}(),fl=function(){function _u($u){this.coefficients=$u}return _u.prototype.distortInverse=function($u){for(var Tu=0,Cu=1,Pu=$u-this.distort(Tu);Math.abs(Cu-Tu)>1e-4;){var Bu=$u-this.distort(Cu),Lu=Cu-Bu*((Cu-Tu)/(Bu-Pu));Tu=Cu,Cu=Lu,Pu=Bu}return Cu},_u.prototype.distort=function($u){for(var Tu=$u*$u,Cu=0,Pu=0;Pu<this.coefficients.length;Pu++)Cu=Tu*(Cu+this.coefficients[Pu]);return(Cu+1)*$u},_u}(),Al=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml=function(){function _u($u,Tu,Cu,Pu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Cu,this.accelerometer=new r$a.Vector3,this.gyroscope=new r$a.Vector3,this.filter=new dl($u,Pu),this.posePredictor=new pl(Tu,Pu),this.isFirefoxAndroid=el(),this.isIOS=Ja();var Bu=tl();this.isDeviceMotionInRadians=!this.isIOS&&Bu!==null&&Bu<66,this.isWithoutDeviceMotion=il()||nl(),this.filterToWorldQ=new r$a.Quaternion,Ja()?this.filterToWorldQ.setFromAxisAngle(new r$a.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$a.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$a.Quaternion,this.worldToScreenQ=new r$a.Quaternion,this.originalPoseAdjustQ=new r$a.Quaternion;var Lu=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$a.Vector3(0,0,1),Lu),this.setScreenTransform_(),ol()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$a.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return _u.prototype.getPosition=function(){return null},_u.prototype.getOrientation=function(){var $u;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Lu=new r$a.Quaternion().setFromAxisAngle(new r$a.Vector3(0,0,-1),0),Ru=new r$a.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Ru.setFromAxisAngle(new r$a.Vector3(0,1,0),Math.PI/-2):Ru.setFromAxisAngle(new r$a.Vector3(0,1,0),Math.PI/2),Lu.multiply(Ru)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Cu=new r$a.Quaternion).setFromAxisAngle(new r$a.Vector3(1,0,0),-Math.PI/2),Cu),$u=this._deviceOrientationQ;var Tu=new r$a.Quaternion;return Tu.copy($u),Tu.multiply(this.deviceOrientationFilterToWorldQ),Tu.multiply(this.resetQ),Tu.multiply(this.worldToScreenQ),Tu.multiplyQuaternions(this.deviceOrientationFixQ,Tu),this.yawOnly&&(Tu.x=0,Tu.z=0,Tu.normalize()),this.orientationOut_[0]=Tu.x,this.orientationOut_[1]=Tu.y,this.orientationOut_[2]=Tu.z,this.orientationOut_[3]=Tu.w,this.orientationOut_}var Cu,Pu=this.filter.getOrientation();$u=this.posePredictor.getPrediction(Pu,this.gyroscope,this.previousTimestampS);var Bu=new r$a.Quaternion;return Bu.copy(this.filterToWorldQ),Bu.multiply(this.resetQ),Bu.multiply($u),Bu.multiply(this.worldToScreenQ),this.yawOnly&&(Bu.x=0,Bu.z=0,Bu.normalize()),this.orientationOut_[0]=Bu.x,this.orientationOut_[1]=Bu.y,this.orientationOut_[2]=Bu.z,this.orientationOut_[3]=Bu.w,this.orientationOut_},_u.prototype.getPose=function(){var $u=new Al;return $u.orientation=this.getOrientation(),$u},_u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_u.prototype.getFrameData=function($u){var Tu=this.getOrientation(),Cu=this.getEyeOffset(),Pu=this.getEyeProjectionMatrix();return $u.pose.angularAcceleration=null,$u.pose.angularVelocity=null,$u.pose.linearAcceleration=null,$u.pose.linearVelocity=null,$u.pose.orientation=Tu,$u.pose.position=null,$u.timestamp=this.previousTimestampS,$u.leftProjectionMatrix.set(Pu.left),$u.rightProjectionMatrix.set(Pu.right),hl($u.leftViewMatrix,Tu,Cu.left),hl($u.rightViewMatrix,Tu,Cu.right),$u},_u.prototype.start=function(){if(typeof window=="undefined")return function(){};var $u=this.onDeviceMotion_.bind(this),Tu=this.onOrientationChange_.bind(this),Cu=this.onMessage_.bind(this),Pu=this.onDeviceOrientation_.bind(this);return Ja()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Bu=window.self!==window.top,Lu=ll(document.referrer),Ru=ll(window.location.href);return Bu&&Lu!==Ru}()&&window.addEventListener("message",Cu),window.addEventListener("orientationchange",Tu),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Pu):window.addEventListener("devicemotion",$u),function(){window.removeEventListener("devicemotion",$u),window.removeEventListener("deviceorientation",Tu),window.removeEventListener("orientationchange",Tu),window.removeEventListener("message",Cu)}},_u.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},_u.prototype.getEyeProjectionMatrix=function(){var $u=this.getEyeFieldOfView(),Tu=this.depthNear,Cu=this.depthFar,Pu={left:[],right:[]},Bu=$u.left.upDegrees*Ya,Lu=$u.left.downDegrees*Ya,Ru=2/((Du=$u.left.leftDegrees*Ya)+(Fu=$u.left.rightDegrees*Ya)),Ou=2/(Bu+Lu);Pu.left[0]=Ru,Pu.left[1]=0,Pu.left[2]=0,Pu.left[3]=0,Pu.left[4]=0,Pu.left[5]=Ou,Pu.left[6]=0,Pu.left[7]=0,Pu.left[8]=-(Du-Fu)*Ru*.5,Pu.left[9]=(Bu-Lu)*Ou*.5,Pu.left[10]=Cu/(Tu-Cu),Pu.left[11]=-1,Pu.left[12]=0,Pu.left[13]=0,Pu.left[14]=Cu*Tu/(Tu-Cu),Pu.left[15]=0;var Du,Fu;return Bu=$u.right.upDegrees*Ya,Lu=$u.right.downDegrees*Ya,Ru=2/((Du=$u.right.leftDegrees*Ya)+(Fu=$u.right.rightDegrees*Ya)),Ou=2/(Bu+Lu),Pu.right[0]=Ru,Pu.right[1]=0,Pu.right[2]=0,Pu.right[3]=0,Pu.right[4]=0,Pu.right[5]=Ou,Pu.right[6]=0,Pu.right[7]=0,Pu.right[8]=-(Du-Fu)*Ru*.5,Pu.right[9]=(Bu-Lu)*Ou*.5,Pu.right[10]=Cu/(Tu-Cu),Pu.right[11]=-1,Pu.right[12]=0,Pu.right[13]=0,Pu.right[14]=Cu*Tu/(Tu-Cu),Pu.right[15]=0,Pu},_u.prototype.getEyeFieldOfView=function(){var $u=this.viewer,Tu=this.device,Cu=new fl($u.distortionCoefficients),Pu=$u.screenLensDistance,Bu=(Tu.widthMeters-$u.interLensDistance)/2,Lu=$u.interLensDistance/2,Ru=$u.baselineLensDistance-Tu.bevelMeters,Ou=Tu.heightMeters-Ru,Du=Za*Math.atan(Cu.distort(Bu/Pu)),Fu=Za*Math.atan(Cu.distort(Lu/Pu)),Vu=Za*Math.atan(Cu.distort(Ru/Pu)),ku=Za*Math.atan(Cu.distort(Ou/Pu)),Nu=new gl,Gu=new gl;return Nu.leftDegrees=Math.min(Du,$u.fov),Nu.rightDegrees=Math.min(Fu,$u.fov),Nu.downDegrees=Math.min(Vu,$u.fov),Nu.upDegrees=Math.min(ku,$u.fov),Gu.leftDegrees=Nu.rightDegrees,Gu.rightDegrees=Nu.leftDegrees,Gu.upDegrees=Nu.upDegrees,Gu.downDegrees=Nu.downDegrees,{left:Nu,right:Gu}},_u.prototype.onDeviceOrientation_=function($u){this._deviceOrientationQ=this._deviceOrientationQ||new r$a.Quaternion;var Tu=$u.alpha,Cu=$u.beta,Pu=$u.gamma;Tu=(Tu||0)*Math.PI/180,Cu=(Cu||0)*Math.PI/180,Pu=(Pu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$a.Euler(Tu,Cu,-Pu,"YXZ"))},_u.prototype.onDeviceMotion_=function($u){this.updateDeviceMotion_($u)},_u.prototype.updateDeviceMotion_=function($u){var Tu=$u.accelerationIncludingGravity,Cu=$u.rotationRate,Pu=$u.timeStamp/1e3,Bu=Pu-this.previousTimestampS;return Bu<0?(al("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Pu)):Bu<=.001||Bu>1?(al("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Pu)):(Tu&&(this.accelerometer.set(-Tu.x,-Tu.y,-Tu.z),Cu&&(rl()?this.gyroscope.set(-Cu.beta,Cu.alpha,Cu.gamma):this.gyroscope.set(Cu.alpha,Cu.beta,Cu.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Pu)),this.filter.addAccelMeasurement(this.accelerometer,Pu)),void(this.previousTimestampS=Pu))},_u.prototype.onOrientationChange_=function(){this.setScreenTransform_()},_u.prototype.onMessage_=function($u){var Tu=$u.data;Tu&&Tu.type&&Tu.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Tu.deviceMotionEvent)},_u.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$a.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$a.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_u}(),vl=[0,0,.5,1],yl=[.5,0,.5,1],bl=function(){function _u($u){var Tu=this;this.renderer=$u,this.sensor=new ml(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$a.PerspectiveCamera,this.cameraR=new r$a.PerspectiveCamera;var Cu=this.sensor.start();this.dispose=function(){var Pu=Tu.renderer.getSize(new r$a.Vector2);Tu.renderer.setScissor(0,0,Pu.width,Pu.height),Tu.renderer.setViewport(0,0,Pu.width,Pu.height),Tu.renderer.setScissorTest(!1),Cu()}}return _u.prototype.render=function($u,Tu){var Cu=this.renderer.getSize(new r$a.Vector2);if(Cu.width>Cu.height){var Pu=$u.autoUpdate;Pu&&($u.updateMatrixWorld(),$u.autoUpdate=!1);var Bu={x:Math.round(Cu.width*vl[0]),y:Math.round(Cu.height*vl[1]),width:Math.round(Cu.width*vl[2]),height:Math.round(Cu.height*vl[3])},Lu={x:Math.round(Cu.width*yl[0]),y:Math.round(Cu.height*yl[1]),width:Math.round(Cu.width*yl[2]),height:Math.round(Cu.height*yl[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Tu.parent===null&&Tu.updateMatrixWorld(),Tu.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Tu.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Ru=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$a.Vector3().fromArray(Ru.left),this.scale),this.cameraR.translateOnAxis(new r$a.Vector3().fromArray(Ru.right),this.scale);var Ou=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Ou.left.slice(),this.cameraR.projectionMatrix.elements=Ou.right.slice(),this.renderer.setViewport(Bu.x,Bu.y,Bu.width,Bu.height),this.renderer.setScissor(Bu.x,Bu.y,Bu.width,Bu.height),this.renderer.render($u,this.cameraL),this.renderer.setViewport(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.setScissor(Lu.x,Lu.y,Lu.width,Lu.height),this.renderer.render($u,this.cameraR),this.renderer.setViewport(0,0,Cu.width,Cu.height),this.renderer.setScissor(0,0,Cu.width,Cu.height),this.renderer.setScissorTest(!1),Pu&&($u.autoUpdate=!0)}else this.renderer.render($u,Tu)},_u.prototype.dispose=function(){},_u}(),xl={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl=typeof navigator!="undefined"&&(ul=xl[navigator.language.split("-")[0]])!==null&&ul!==void 0?ul:xl.zh,El=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml(_u){for(var $u=1,Tu=document.getElementsByTagName("meta"),Cu=0;Cu<Tu.length;Cu++){var Pu=Tu[Cu];if(Pu.getAttribute("name")==="viewport"){var Bu=(Pu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Bu&&($u=Number(Bu[1])),isNaN($u)&&($u=1)}}return El.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,_u).replace(/(\d+)px/g,function(Lu,Ru){return function(Ou){return Math.floor(Ou*$u)+"px"}(Number(Ru))})}var Il=new r$a.CircleBufferGeometry(.12,16),Sl=function(){var _u=yt$1(),$u=new r$a.Texture;return _u.onload=function(){if(typeof document!="undefined"){var Tu=256,Cu=document.createElement("canvas");Cu.setAttribute("width",String(Tu)),Cu.setAttribute("height",String(Tu));var Pu=Cu.getContext("2d");if(Pu){Pu.drawImage(_u,0,0,Tu,Tu),Pu.globalCompositeOperation="source-out";var Bu=128;Pu.beginPath(),Pu.lineWidth=6.4,Pu.arc(Bu,Bu,83.2,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 1.0)",Pu.closePath(),Pu.stroke(),$u.image=Cu,$u.needsUpdate=!0}}},_u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",$u}(),Cl=function(){if(typeof document!="undefined"){var _u=document.createElement("canvas");_u.setAttribute("width",String(512)),_u.setAttribute("height",String(512));var $u=_u.getContext("2d");if($u){var Tu=256;return $u.beginPath(),$u.arc(Tu,Tu,192,0,2*Math.PI),$u.fillStyle="rgba(255, 255, 255, 0.1)",$u.closePath(),$u.fill(),$u.save(),$u.beginPath(),$u.arc(Tu,Tu,192,0,2*Math.PI),$u.strokeStyle="rgba(255, 255, 255, 0.5)",$u.lineWidth=10.24,$u.closePath(),$u.stroke(),new r$a.CanvasTexture(_u)}}return null}(),Bl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256;Tu.arc(Cu,Cu,192,0,2*Math.PI),Tu.fillStyle="rgba(85, 90, 255, 0.6)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.fill(),Tu.arc(Cu,Cu,192,0,2*Math.PI);var Pu=Tu.createRadialGradient(Cu,Cu,0,Cu,Cu,Cu);Pu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Pu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Pu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Tu.fillStyle=Pu,Tu.fill(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,187.2,0,2*Math.PI);var Bu=Tu.createLinearGradient(0,0,0,_u);return Bu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Bu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Bu,Tu.stroke(),new r$a.CanvasTexture($u)}}return null}(),Tl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=179.2;Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.4)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.fill(),Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Bu=Tu.createRadialGradient(Cu,Cu,0,Cu,Cu,Cu);Bu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Bu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.fillStyle=Bu,Tu.fill(),Tu.lineWidth=4.8,Tu.arc(Cu,Cu,Pu-4.8,0,2*Math.PI);var Lu=Tu.createLinearGradient(0,0,0,_u);return Lu.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Lu.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Lu,Tu.stroke(),new r$a.CanvasTexture($u)}}return null}(),Pl=function(){if(typeof document!="undefined"){var _u=512,$u=document.createElement("canvas");$u.setAttribute("width",String(_u)),$u.setAttribute("height",String(_u));var Tu=$u.getContext("2d");if(Tu){var Cu=256,Pu=217.6,Bu=64;Tu.lineWidth=Bu,Tu.arc(Cu,Cu,Pu,0,2*Math.PI),Tu.strokeStyle="rgba(147, 162, 255, 0.3)",Tu.shadowBlur=25.6,Tu.shadowColor="rgba(255, 255, 255, 0.6)",Tu.stroke(),Tu.lineWidth=Bu,Tu.arc(Cu,Cu,Pu,0,2*Math.PI);var Lu=Tu.createRadialGradient(Cu,Cu,185.6,Cu,Cu,249.6);Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.strokeStyle=Lu,Tu.stroke(),Tu.beginPath(),Tu.lineWidth=4,Tu.arc(Cu,Cu,245.6,0,2*Math.PI);var Ru=Tu.createLinearGradient(0,0,_u,0);return Ru.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ru.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Tu.strokeStyle=Ru,Tu.stroke(),new r$a.CanvasTexture($u)}}return null}(),Rl=function(_u){function $u(){var Tu=_u.call(this)||this;Tu.progress=0,Tu.opacity=0,Tu.loading=!1,Tu.current=!1,Tu.disabled=!1,Tu.opacityMotion=new Ro({opacity:0}),Tu.loadingMotion=new Ro({opacity:0}),Tu.currentMotion=new Ro({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Cu={blending:r$a.CustomBlending,blendSrc:r$a.SrcAlphaFactor,blendDst:r$a.OneMinusSrcAlphaFactor,blendSrcAlpha:r$a.OneFactor,blendDstAlpha:r$a.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Tu.hitTestMesh=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{color:0,opacity:0}))),Tu.hitTestMesh.scale.set(1.5,1.5,1.5),Tu.centerMesh=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Bl,opacity:0}))),Tu.centerMesh2=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Tl,opacity:0}))),Tu.ringMesh=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Pl,opacity:0}))),Tu.loadingMesh=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Sl,opacity:.8}))),Tu.disableMesh=new r$a.Mesh(Il,new r$a.MeshBasicMaterial(t$8.__assign(t$8.__assign({},Cu),{map:Cl}))),Tu.loadingMesh.visible=!1,Tu.disableMesh.visible=!1,Tu.hitTestMesh.position.z=0,Tu.ringMesh.position.z=.003,Tu.disableMesh.position.z=.002,Tu.centerMesh.position.z=.002,Tu.centerMesh2.position.z=.002,Tu.loadingMesh.position.z=.005,Tu.hitTestMesh.frustumCulled=!1,Tu.centerMesh.frustumCulled=!1,Tu.centerMesh2.frustumCulled=!1,Tu.ringMesh.frustumCulled=!1,Tu.loadingMesh.frustumCulled=!1,Tu.disableMesh.frustumCulled=!1,Tu.add(Tu.hitTestMesh),Tu.add(Tu.centerMesh),Tu.add(Tu.centerMesh2),Tu.add(Tu.ringMesh),Tu.add(Tu.loadingMesh),Tu.add(Tu.disableMesh),Tu.renderOrder=1e4,Tu.needsRender=!0,Tu}return t$8.__extends($u,_u),$u.prototype.setProgress=function(Tu){this.progress=Tu,this.setLoading(Tu>0)},$u.prototype.setOpacity=function(Tu){this.opacity!==Tu&&(this.opacity=Tu=ho(Tu,0,1),this.opacityMotion.set({opacity:Tu},30).catch(Qe))},$u.prototype.setCurrent=function(Tu){if(this.current!==Tu){if(Tu){var Cu=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Cu,1500).catch(Qe)}else Cu=[{progress:0,value:t$8.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Cu,200).catch(Qe);this.current=Tu}},$u.prototype.setLoading=function(Tu){this.loading!==Tu&&(Tu?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Tu,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},$u.prototype.setDisabled=function(Tu){this.disabled!==Tu&&(this.disabled=Tu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Tu,this.centerMesh.visible=!Tu,this.needsRender=!0)},$u.prototype.tap=function(){return Promise.resolve()},$u.prototype.updateTime=function(Tu,Cu){this.opacityMotion.update(Tu),this.currentMotion.update(Tu),this.loadingMotion.update(Tu);var Pu=this.opacityMotion.value.opacity,Bu=this.currentMotion.value,Lu=Bu.ringScale,Ru=Bu.ringOpacity,Ou=Bu.circleFade,Du=Bu.circleOpacity,Fu=Bu.circleScale;if(this.ringMesh.scale.set(Lu,Lu,Lu),this.centerMesh.scale.set(Fu,Fu,Fu),this.centerMesh2.scale.set(Fu,Fu,Fu),this.ringMesh.material.opacity=Ru*Pu,this.centerMesh.material.opacity=(1-Ou)*Pu,this.centerMesh2.material.opacity=Ou*Du*Pu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Cu/200);var Vu=this.opacityMotion.value.opacity,ku=1.1;this.centerMesh.scale.set(ku,ku,ku),this.centerMesh2.scale.set(ku,ku,ku),this.centerMesh.material.opacity=0*Vu,this.centerMesh2.material.opacity=.2*Vu}else this.loadingMesh.visible=!1;this.needsRender=!0},$u.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},$u}(r$a.Object3D),kl=function(_u){function $u(Tu){var Cu=this,Pu=$u.parseArgs(Tu);(Cu=_u.call(this,Pu)||this).cardboard=new bl(Cu.renderer);var Bu,Lu,Ru,Ou=(Bu="five_vr_helper_"+Kr(),Lu=Ml(Bu),(Ru=document.createElement("div")).className=Bu,Ru.innerHTML=Lu,Ru);Cu.helperElement=Ou;var Du=new ra(Ou);return Cu.element.parentNode&&(Cu.element.parentNode.insertBefore(Ou,Cu.element),Cu.setHelperElementSize(),Du.on("tap",function(){return Cu.emit("vrWantsToExit")})),Cu.destroyHelper=function(){Du.destroy(),Ou.parentNode&&Ou.parentNode.removeChild(Ou),delete Cu.helperElement},Cu.boundingMesh.visible=!0,Cu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=t$8.__assign(t$8.__assign({},Tu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Cu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Tu=0,Cu=this.panoMeshes;Tu<Cu.length;Tu++){var Pu=Cu[Tu];this.helper.remove(Pu),Pu.dispose()}this.panoMeshes.length=0},$u.prototype.isReady=function(){return!1},$u.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},$u.prototype.updatePanoMeshes=function(){var Tu=this;this.panoMeshes.forEach(function(Lu){Tu.helper.remove(Lu),Lu.dispose()}),this.panoMeshes.length=0;for(var Cu=0;Cu<this.work.observers.length;Cu++){var Pu=this.work.observers[Cu],Bu=new Rl;Bu.name="panoSphere_".concat(this.work.workCode,"_").concat(Cu),Bu.position.copy(Pu.position),Bu.needsRender=!0,this.helper.add(Bu),this.panoMeshes[Cu]=Bu}},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Bu,Lu=[],Ru=2;Ru<arguments.length;Ru++)Lu[Ru-2]=arguments[Ru];if(!this.destroyed){this.needsRender=!0;var Ou={},Du={};if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var Fu=this.locationMotion.getKeyFrameSegment(Tu),Vu=Fu[0],ku=Fu[1],Nu=this.panoResourceFromLocationMotionKeyframe(Vu),Gu=this.panoResourceFromLocationMotionKeyframe(ku),ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Uu=Nu.position,zu=Gu.position,Wu=this.locationMotion.value.count-ku.value.count+1;Ou.modelAlpha=this.locationMotion.value.modelAlpha,Ou.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ou.useBlackTransition=Gu.effect==="instant",Gu.panoPicture&&(Wu<1?Nu.panoPicture&&(Ou.pano0=Nu.panoPicture):Ou.pano0=Gu.panoPicture,Ou.pano1=Gu.panoPicture),Gu.effect==="fade"&&(Ou.pano0&&Nu.panoPicture&&(Ou.pano0={map:Ou.pano0.map,luminanceMap:Ou.pano0.luminanceMap,matrix:Nu.panoPicture.matrix.clone().setPosition(Gu.position)}),Uu.copy(zu)),Ou.progress=Wu,Du.distance=this.locationMotion.value.distance,Du.offset=new r$a.Vector3(Uu.x+(zu.x-Uu.x)*Wu,Uu.y+(zu.y-Uu.y)*Wu,Uu.z+(zu.z-Uu.z)*Wu);for(var Qu=[],Ku=[],Yu=0,Xc=this.locationMotion.keyframes;Yu<Xc.length;Yu++){var _d=Xc[Yu],_f=_d.key,qu=_d.progress;_f!==void 0&&(Qu.push(_f),qu>=this.locationMotion.progress&&Ku.push(_f))}for(var Xu=0,Zu=Object.keys(this.panoResources);Xu<Zu.length;Xu++){var _c=Zu[Xu];if(!(Ku.indexOf(_c)>=0)){var Ju=this.panoResources[_c];if(Ju.panoPicture){var _h=Ju.panoPicture.map;if(_h){if(_h===((Pu=Ou.pano0)===null||Pu===void 0?void 0:Pu.map)||_h===((Bu=Ou.pano1)===null||Bu===void 0?void 0:Bu.map))continue;_h.dispose(),Ju.panoPicture=null}}Qu.indexOf(_c)>=0||delete this.panoResources[_c]}}this.currentPanoIndex=Wu<.5?Nu.panoIndex:Gu.panoIndex,this.emit("movingToPano",Hu.panoIndex,ju.panoIndex,this.locationMotion.progress)}ia$1(Ou)===!1&&(this.model.setMaterial(Ou),this.boundingMesh.setMaterial(Ou)),Du.offset&&this.camera.position.copy(Du.offset);var ep=this.camera.pose.longitude,tp=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var rp=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),dp=0;dp<this.work.observers.length;dp++){var cp=this.work.observers[dp];if((Bp=this.panoMeshes[dp]).visible=!0,cp.loadable||cp.active){if(rp.indexOf(dp)===-1)Bp.visible=!1;else{Bp.visible=!0;var Sp=Bp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Sp<.05?Bp.setOpacity(0):Bp.setOpacity(ho(1.5/Sp,0,1)),this.currentPanoIndex===dp&&Bp.setOpacity(0)}Bp.lookAt(this.camera.position)}else Bp.visible=!0}var yp=this.intersect(Tu);for(dp=0;dp<this.work.observers.length;dp++)(Bp=this.panoMeshes[dp])==null||Bp.setCurrent(Bp===yp);for(dp=0;dp<this.work.observers.length;dp++){var Bp;(Bp=this.panoMeshes[dp])&&Bp.updateTime&&Bp.updateTime(Tu,Cu)}ep===this.camera.pose.longitude&&tp===this.camera.pose.latitude||(this.cameraMotion.set(ii(this.camera.pose,["longitude","latitude"]),0).catch(Qe),this.emit("cameraDirectionUpdate",ii(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},$u.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},$u.prototype.setCamera=function(Tu){},$u.prototype.destroyHelper=function(){},$u.prototype.setHelperElementSize=function(){if(this.helperElement){var Tu=new r$a.Vector2(this.element.offsetWidth,this.element.offsetHeight),Cu=Tu.x*this.scissor.left,Pu=Tu.y*(1-this.scissor.bottom-this.scissor.height),Bu=Tu.x*this.scissor.width,Lu=Tu.y*this.scissor.height;this.helperElement.style.marginLeft=Cu+"px",this.helperElement.style.marginTop=Pu+"px",this.helperElement.style.width=Bu+"px",this.helperElement.style.height=Lu+"px"}},$u.prototype.intersect=function(Tu){var Cu;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Tu-this.activeTime>1500){var Pu=this.activePanoMesh;return(Fu=this.panoMeshes.indexOf(Pu))>=0&&this.moveToPano(Fu,{},!0),delete this.activePanoMesh,delete this.activeTime,Pu}for(var Bu=this.camera.getWorldDirection(new r$a.Vector3),Lu=new r$a.Raycaster(this.camera.position,Bu),Ru=void 0,Ou=[],Du=this.work.observers[this.currentPanoIndex].visibleNodes,Fu=0;Fu<this.work.observers.length;Fu++){var Vu=this.panoMeshes[Fu];if(Du.indexOf(Fu)!==-1){var ku=Lu.intersectObject((Cu=Vu.hitTestMesh)!==null&&Cu!==void 0?Cu:Vu,!0)[0];ku&&Ou.push({panoMesh:Vu,intersection:ku})}}var Nu=Ou.sort(function(zu,Wu){return zu.intersection.distance-Wu.intersection.distance})[0];if(Nu?(Ru=Nu.intersection,this.activePanoMesh!==Nu.panoMesh&&(this.activePanoMesh=Nu.panoMesh,this.activeTime=Tu),this.intersectMesh.position.copy(Nu.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Ru)if((Ru=this.model.intersectRaycaster(Lu)[0])&&Ru.face){var Gu=Ru.face.normal,ju=new r$a.Quaternion;ju.setFromUnitVectors(new r$a.Vector3(0,0,1),Gu),this.intersectMesh.quaternion.copy(ju);var Hu=Gu.clone().multiplyScalar(.05),Uu=Ru.point.clone().add(Hu);this.intersectMesh.position.copy(Uu),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Ru,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Nu==null?void 0:Nu.panoMesh},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u}(Xa),Dl=function(_u){function $u(Tu){var Cu,Pu,Bu,Lu,Ru=this,Ou=$u.parseArgs(Tu);return(Ru=_u.call(this,Ou)||this).currentPanoIndex=Ou.initial[0],Ru.locationMotion=new Ro({x:Ru.camera.pose.offset.x,y:Ru.camera.pose.offset.y,z:Ru.camera.pose.offset.z,distance:Ru.camera.pose.distance,modelAlpha:(Pu=(Cu=Ru.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Bu=Ru.model.getMaterial())===null||Bu===void 0?void 0:Bu.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ru}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){return _u.parseArgs.call(this,Tu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.locationMotion.dispose()},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){this.work=Tu,this.currentPanoIndex=Cu,this.hideIntersectMesh();var Ru={duration:0,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov};return this.moveToPano(Cu,Ru,Lu),!0},$u.prototype.updateTime=function(Tu,Cu){for(var Pu=[],Bu=2;Bu<arguments.length;Bu++)Pu[Bu-2]=arguments[Bu];if(!this.destroyed){var Lu={},Ru={};if(!this.locationMotion.ended){this.locationMotion.update(Tu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ru.distance=this.locationMotion.value.distance,Ru.offset=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Ou=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Du=ta(this.work.observers,function(Fu){return Fu.position.distanceTo(Ou)});this.currentPanoIndex=this.work.observers.indexOf(Du)}this.cameraMotion.ended||(this.cameraMotion.update(Tu),Ru.longitude=this.cameraMotion.value.longitude,Ru.latitude=this.cameraMotion.value.latitude,Ru.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ru)||this.setCamera(Ru)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;this.destroyed||(this.pending=!1,this.userAction=Bu,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ru=Cu.latitude)!==null&&Ru!==void 0?Ru:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Ou=Cu.fov)!==null&&Ou!==void 0?Ou:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(Fu,Vu){Du.emit("initAnimationWillStart",Fu,Vu,Du.userAction)},moveEndCallback:function(Fu,Vu){Du.emit("initAnimationEnded",Fu,Vu,Du.userAction)},moveCancelCallback:function(){var Fu=Du.currentPanoIndex,Vu={longitude:Du.camera.pose.longitude,latitude:Du.camera.pose.latitude,fov:Du.camera.pose.fov,offset:Du.camera.pose.offset.clone(),distance:Du.camera.pose.distance};Du.emit("initAnimationEnded",Fu,Vu,Du.userAction)}},Bu))},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$2())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:new r$a.Vector3(Cu.value.x,Cu.value.y,Cu.value.z),distance:Cu.value.distance}},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={});var Bu=this.work.observers[Tu];Bu&&this.moveToPosition(Bu.position,Cu,Pu)},$u.prototype.moveToPosition=function(Tu,Cu,Pu){var Bu,Lu,Ru,Ou=this;Cu===void 0&&(Cu={}),this.userAction=Pu;for(var Du=_e$2(),Fu=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Tu),Vu=this.locationMotion.getProgressVelocity(Du),ku=0,Nu=1;Nu<this.locationMotion.keyframes.length;Nu++){var Gu=this.locationMotion.keyframes[Nu-1].value,ju=Gu.x,Hu=Gu.y,Uu=Gu.z,zu=this.locationMotion.keyframes[Nu].value,Wu=zu.x,Qu=zu.y,Ku=zu.z;ku+=Math.sqrt(Math.pow(Wu-ju,2)+Math.pow(Qu-Hu,2)+Math.pow(Ku-Uu,2))}var Yu=Fu===0?0:Vu*ku/Fu,Xc=this.calculateMovingDuration(Cu.duration,Fu),_d={x:Tu.x,y:Tu.y,z:Tu.z,distance:0,modelAlpha:1,perspToOrtho:0},_f={longitude:Cu.longitude,latitude:Cu.latitude,fov:Cu.fov},qu={longitude:(Bu=_f.longitude)!==null&&Bu!==void 0?Bu:this.camera.pose.longitude,latitude:(Lu=_f.latitude)!==null&&Lu!==void 0?Lu:this.camera.pose.latitude,fov:(Ru=_f.fov)!==null&&Ru!==void 0?Ru:this.camera.pose.fov,offset:Tu.clone(),distance:0},Xu=ta(this.work.observers,function(_c){return _c.position.distanceTo(Tu)}),Zu=this.work.observers.indexOf(Xu);this.emit("moveToPano",Zu,this.userAction),Cu.moveStartCallback&&Cu.moveStartCallback(Zu,qu),this.emit("panoWillArrive",Zu,qu,this.userAction),this.cameraMotion.set(_f,Xc).catch(Qe),this.locationMotion.set(_d,Xc,Yu).then(function(){var _c=na(Ou.camera.pose);Cu.moveEndCallback&&Cu.moveEndCallback(Zu,_c),Ou.emit("panoArrived",Zu,_c,Ou.userAction)},function(){Cu.moveCancelCallback&&Cu.moveCancelCallback(),Ou.emit("moveToPanoCanceled",Zu)})},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Gu){return ii(Gu,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Bu=new r$a.Raycaster;if(Bu.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Bu,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Bu,Pu,!0),this.interiaMovement=!1;var Lu=this.model.intersectRaycaster(Bu)[0];if(Lu&&Lu.face){var Ru=Lu.face.normal,Ou=Lu.point;if(new r$a.Vector3(0,1,0).angleTo(Ru)>Math.PI/3){var Du=this.camera.position.clone().setY(Ou.y),Fu=Ou.clone().sub(Du).setLength(.3),Vu=Ou.clone().sub(Fu);Bu.set(Vu,new r$a.Vector3(0,-1,0)),Lu=this.model.intersectRaycaster(Bu)[0]}}if(Lu){var ku=Lu.point.clone(),Nu=ta(this.work.observers.filter(function(Gu){return Math.abs(Gu.standingPosition.y-ku.y)<1}),function(Gu){return Gu.standingPosition.distanceTo(ku)});if(Nu)return ku.y=Nu.position.y,void this.moveToPosition(ku,{},!0)}this.cameraBounce()}}},$u}(ba$1),Ll=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];var Tu=113,Cu=126,Pu=0,Bu="";return arguments[Pu].split(Bu).map(function(Lu){return Lu.charCodeAt(Pu)>Cu?Lu:String.fromCharCode((Lu.charCodeAt(Pu)+Tu)%Cu)}).join(Bu)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl=Object.assign({opacity:new r$a.Uniform(1),scale:new r$a.Uniform(13.1),panoMap:new r$a.Uniform(null),panoDisplacementMap:new r$a.Uniform(null),panoPosition:new r$a.Uniform(new r$a.Vector3),panoMatrix:new r$a.Uniform(new r$a.Matrix4)},{emissive:new r$a.Uniform(new r$a.Color(0)),emissiveMap:new r$a.Uniform(null),specular:new r$a.Uniform(new r$a.Color(1118481)),specularMap:new r$a.Uniform(null),normalMap:new r$a.Uniform(null),bumpMap:new r$a.Uniform(null),shininess:new r$a.Uniform(30)},r$a.UniformsLib.common,r$a.UniformsLib.lights),Fl=new r$a.SphereBufferGeometry(.01,128,128),Ql=function(){function _u($u){$u===void 0&&($u={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=$u.allowHosts,this.requestProxy=$u.requestProxy,this.networkSubscribe=$u.networkSubscribe}return _u.prototype.setAllowHosts=function($u){this.allowHosts=$u,this.textureLoader.setAllowHosts($u)},_u.prototype.setRequestProxy=function($u){this.requestProxy=$u,this.textureLoader.setRequestProxy($u)},_u.prototype.setNetworkSubscribe=function($u){this.networkSubscribe=$u,this.textureLoader.setNetworkSubscribe($u)},_u.prototype.load=function($u,Tu,Cu,Pu,Bu,Lu,Ru,Ou){var Du=[0,0],Fu=function(ku,Nu){Du[Nu]=ku,Ru(.8*Du[0]+.2*Du[1])},Vu=[this.textureLoader.load($u,{viaAjax:!0},void 0,void 0,function(ku){return Fu(ku,1)},Ou),this.textureLoader.loadCube(Tu,{viaAjax:!0},void 0,void 0,function(ku){return Fu(ku,0)},Ou)];return Promise.all(Vu).then(function(ku){var Nu=ku[0],Gu=ku[1],ju={body:function(Hu,Uu,zu,Wu){var Qu=new r$a.ShaderMaterial({side:r$a.BackSide,vertexShader:Ll,fragmentShader:Ol,transparent:!0,uniforms:r$a.UniformsUtils.clone(Nl)}),Ku=Uu;return Ku.needsUpdate=!0,Ku.minFilter=r$a.LinearFilter,Ku.magFilter=r$a.LinearFilter,Hu.needsUpdate=!0,Hu.minFilter=r$a.LinearFilter,Hu.magFilter=r$a.LinearFilter,Qu.uniforms.opacity.value=0,Qu.uniforms.panoMap.value=Ku,Qu.uniforms.panoDisplacementMap.value=Hu,Qu.uniforms.panoPosition.value=zu,Qu.uniforms.panoMatrix.value=Wu,Object.assign(new r$a.Mesh(Fl,Qu),{frustumCulled:!1,dispose:function(){this.material instanceof r$a.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Nu.body,Gu.body,Cu,Pu),meta:t$8.__spreadArray([Nu.meta],Gu.meta,!0)};return Bu(ju),ju}).catch(function(ku){for(var Nu=0,Gu=Vu;Nu<Gu.length;Nu++)Gu[Nu].then(function(ju){return ju.body.dispose()}).catch(Qe);return Lu(ku),Promise.reject(ku)})},_u}(),Vl=new r$a.Vector3(-1,1,1),_l=function(_u){function $u(Tu){var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu=this,Vu=$u.parseArgs(Tu);return(Fu=_u.call(this,Vu)||this).currentPanoIndex=Vu.initial[0],Fu.maxAccessibleDistance=Vu.maxAccessibleDistance,Fu.panoTapTriggerRadius=Vu.panoTapTriggerRadius,Fu.panoCircleMeshCreator=Vu.panoCircleMeshCreator,Fu.boundingMesh=Fu.generateBoundingMesh(),Fu.boundingMesh.setMaterial(Fu.model.getMaterial()||{}),Fu.boundingMesh.visible=!1,Fu.scene.add(Fu.boundingMesh),Fu.panoModelGroup=new r$a.Group,Fu.panoModelGroup.name="panoModels",Fu.scene.add(Fu.panoModelGroup),Fu.panoMeshes=[],Fu.updatePanoMeshes(),Fu.helper.remove(Fu.intersectMesh),Fu.locationMotion=new Ro({count:0,distance:Fu.camera.pose.distance,modelAlpha:(Pu=(Cu=Fu.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Bu=Fu.model.getMaterial())===null||Bu===void 0?void 0:Bu.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Fu.panoResources={},Fu.panoResources[Fu.locationMotion.keyframes[0].key=Fu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Fu.currentPanoIndex,workCode:Fu.work.workCode,matrix:(Du=(Ou=(Ru=Fu.model.getMaterial())===null||Ru===void 0?void 0:Ru.pano1)===null||Ou===void 0?void 0:Ou.matrix)!==null&&Du!==void 0?Du:new r$a.Matrix4,position:Fu.camera.pose.offset.clone(),effect:"fly"},Fu.depthTextureLoader=new Ql({allowHosts:Fu.work.allowHosts,requestProxy:Fu.requestProxy,networkSubscribe:Fu.networkSubscribe}),Fu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Bu,Lu=_u.parseArgs.call(this,Tu);return t$8.__assign(t$8.__assign({},Lu),{maxAccessibleDistance:(Cu=Tu.maxAccessibleDistance)!==null&&Cu!==void 0?Cu:5,panoTapTriggerRadius:(Pu=Tu.panoTapTriggerRadius)!==null&&Pu!==void 0?Pu:1,panoCircleMeshCreator:(Bu=Tu.panoCircleMeshCreator)!==null&&Bu!==void 0?Bu:function(){return new as}})},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.destroy=function(){var Tu,Cu=this;if(_u.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Pu=0,Bu=this.panoModelGroup.children;Pu<Bu.length;Pu++){var Lu=Bu[Pu];typeof Lu.dispose=="function"&&Lu.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Gu){Cu.helper.remove(Gu),Gu.dispose()}),this.panoMeshes.length=0);for(var Ru=(Tu=this.model.getMaterial())!==null&&Tu!==void 0?Tu:{},Ou=Ru.pano0,Du=Ru.pano1,Fu=0,Vu=Object.keys(this.panoResources);Fu<Vu.length;Fu++){var ku=Vu[Fu],Nu=this.panoResources[ku];Nu.panoModel&&Nu.panoModel.material.uniforms.panoMap.value!==(Ou==null?void 0:Ou.map)&&Nu.panoModel.material.uniforms.panoMap.value!==(Du==null?void 0:Du.map)&&(this.panoModelGroup.remove(Nu.panoModel),Nu.panoModel.material.uniforms.panoMap.value.dispose(),Nu.panoModel.dispose(),delete Nu.panoModel),delete this.panoResources[ku]}this.interiaMovement=!1},$u.prototype.isReady=function(){return this.locationMotion.ended===!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){this.userAction=Lu,this.work=Tu,this.currentPanoIndex=Cu,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Ru={},Ou=!0;this.boundingMesh&&(Ru=this.boundingMesh.getMaterial()||{},Ou=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ou,this.boundingMesh.setMaterial(Ru),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Du=0,Fu=this.panoMeshes;Du<Fu.length;Du++)Fu[Du].visible=!1;return this.moveToPano(Cu,{effect:"fade",duration:Bu,longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},Lu),!0},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Bu,Lu,Ru=[],Ou=2;Ou<arguments.length;Ou++)Ru[Ou-2]=arguments[Ou];if(!this.destroyed){var Du={},Fu={},Vu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ku=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Nu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var Gu=this.locationMotion.getKeyFrameSegment(Tu),ju=Gu[0],Hu=Gu[1],Uu=this.panoResourceFromLocationMotionKeyframe(ju),zu=this.panoResourceFromLocationMotionKeyframe(Hu),Wu=new r$a.Vector3().copy(Uu.position),Qu=new r$a.Vector3().copy(zu.position),Ku=this.locationMotion.value.count-Hu.value.count+1;Du.progress=Ku,Du.modelAlpha=this.locationMotion.value.modelAlpha,Du.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var Yu=0,Xc=this.panoModelGroup.children;Yu<Xc.length;Yu++){var _d=Xc[Yu];_d.visible=_d===Uu.panoModel||_d===zu.panoModel}Uu.panoModel&&(Uu.panoModel.material.uniforms.opacity.value=1-Ku,Uu.panoModel.material.depthTest=Ku!==0),zu.panoModel&&(zu.panoModel.material.uniforms.opacity.value=Ku,zu.panoModel.material.depthTest=Ku!==1),zu.panoModel&&(Ku<1?Uu.panoModel&&(Du.pano0={map:Uu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Uu.matrix}):Du.pano0={map:zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:zu.matrix},Du.pano1={map:zu.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:zu.matrix}),Nu=Du.useBlackTransition=zu.effect==="instant"||zu.effect==="montage",zu.effect!=="fade"&&zu.effect!=="montage"||(Du.pano0&&(Du.pano0={map:Du.pano0.map,luminanceMap:null,matrix:Uu.matrix.clone().setPosition(zu.position)}),Wu.copy(Qu)),Fu.distance=this.locationMotion.value.distance,Fu.offset=new r$a.Vector3(Wu.x+(Qu.x-Wu.x)*Ku,Wu.y+(Qu.y-Wu.y)*Ku,Wu.z+(Qu.z-Wu.z)*Ku);for(var _f=[],qu=[],Xu=0,Zu=this.locationMotion.keyframes;Xu<Zu.length;Xu++){var _c=Zu[Xu],Ju=_c.key,_h=_c.progress;Ju!==void 0&&(_f.push(Ju),_h>=this.locationMotion.progress&&qu.push(Ju))}for(var ep=0,tp=Object.keys(this.panoResources);ep<tp.length;ep++){var rp=tp[ep];if(!(qu.indexOf(rp)>=0)){var dp=this.panoResources[rp];if(dp.panoModel){if(dp.panoModel.material.uniforms.panoMap.value===((Pu=Du.pano0)===null||Pu===void 0?void 0:Pu.map)||dp.panoModel.material.uniforms.panoMap.value===((Bu=Du.pano1)===null||Bu===void 0?void 0:Bu.map))continue;this.panoModelGroup.remove(dp.panoModel),dp.panoModel.material.uniforms.panoMap.value.dispose(),dp.panoModel.dispose(),delete dp.panoModel}_f.indexOf(rp)>=0||delete this.panoResources[rp]}}Uu.workCode===zu.workCode?this.currentPanoIndex=Ku<.5?Uu.panoIndex:zu.panoIndex:this.currentPanoIndex=zu.panoIndex,this.emit("movingToPano",ku.panoIndex,Vu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Fu.longitude=this.cameraMotion.value.longitude,Fu.latitude=this.cameraMotion.value.latitude,Fu.fov=this.cameraMotion.value.fov),ia$1(Du)===!1&&(this.model.setMaterial(Du),this.boundingMesh.setMaterial(Du)),ia$1(Fu)===!1&&this.setCamera(Fu),this.camera.pose.distance>.1)for(var cp=0;cp<this.work.observers.length;cp++)(_p=this.panoMeshes[cp])&&(_p.visible=!1);else{var Sp=this.work.observers[this.currentPanoIndex];if(Sp){var yp=Sp.visibleNodes.concat(this.currentPanoIndex),Bp=this.getForwardPanoIndexOrNot();for(cp=0;cp<this.work.observers.length;cp++){var _p,Cp=this.work.observers[cp];if(_p=this.panoMeshes[cp])if(Cp.loadable||Cp.active)if(yp.indexOf(cp)!==-1)if(Nu)_p.visible=!1,_p.setOpacity(0);else{_p.visible=!0;var Ep=_p.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);_p.setCurrent(Bp===cp),_p.setOpacity(Ep<.01?0:ho(1.4/Ep,.5,.7)),_p.updateTime&&_p.updateTime(Tu,Cu)}else _p.visible=!1,_p.setOpacity(0);else _p.visible=!1,_p.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Lu=this.boundingMesh.getMaterial())===null||Lu===void 0?void 0:Lu.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$2())[1],Pu=this.panoResourceFromLocationMotionKeyframe(Cu),Bu=this.work.observers[Pu.panoIndex];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,offset:Bu?Bu.position.clone():this.camera.position.clone(),distance:0}},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Bu,Lu,Ru=this;Cu===void 0&&(Cu={});var Ou=this.work.observers[Tu].images.depth,Du=t$8.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality","sharpen","mappings"])),Fu=(Bu=this.imageOptions.transform)!==null&&Bu!==void 0?Bu:ct$1,Vu={right:Fu(this.work.observers[Tu].images.right,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".right")})),left:Fu(this.work.observers[Tu].images.left,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".left")})),up:Fu(this.work.observers[Tu].images.up,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".up")})),down:Fu(this.work.observers[Tu].images.down,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".down")})),front:Fu(this.work.observers[Tu].images.front,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".front")})),back:Fu(this.work.observers[Tu].images.back,t$8.__assign(t$8.__assign({},Du),{key:"pano.".concat(Tu,".back")}))},ku=this.work.observers[Tu],Nu=ku.position,Gu=ku.quaternion,ju=new r$a.Matrix4().compose(Nu,Gu,new r$a.Vector3(-1,1,1)),Hu="pano:"+va(Vu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Hu)return;var Uu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Uu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Uu,this.work.observers[Uu]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Tu,hash:Hu,onLoad:function(Wu){Ru.pending=!1,Ru.destroyed?Wu.body.dispose():(Wu.body.name=Hu,Ru.emit("panoLoaded",Tu),Ru.doMoveToPano(Tu,Wu.body,Cu,Pu))},onError:function(Wu){Ru.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Ru.emit("panoLoadError",Wu,Tu),Ru.emit("moveToPanoCanceled",Tu)}};var zu=this.panoMeshes[Tu];zu&&zu.tap&&zu.tap(),this.depthTextureLoader.load(Ou,Vu,Nu,ju,function(Wu){var Qu,Ku;((Qu=Ru.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu?(Ru.pendingTextureTask.onLoad(Wu),(Ku=Ru.panoMeshes[Tu])===null||Ku===void 0||Ku.setProgress(0),delete Ru.pendingTextureTask,Ru.emit("textureLoaded",Tu,Ru.work.observers[Tu],Wu.meta)):Wu.body.dispose()},function(Wu){var Qu,Ku;((Qu=Ru.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu&&(Ru.pendingTextureTask.onError(Wu),(Ku=Ru.panoMeshes[Tu])===null||Ku===void 0||Ku.setProgress(0),delete Ru.pendingTextureTask,Ru.emit("textureError",Wu,Tu,Ru.work.observers[Tu]),Ru.emit("error",Wu))},function(Wu){var Qu,Ku;Ru.emit("textureLoading",Wu,Tu,Ru.work.observers[Tu]),((Qu=Ru.pendingTextureTask)===null||Qu===void 0?void 0:Qu.hash)===Hu&&((Ku=Ru.panoMeshes[Tu])===null||Ku===void 0||Ku.setProgress(Wu))},this.renderer),this.emit("textureStartLoad",Tu,this.work.observers[Tu])},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;if(!this.destroyed){var Fu=!1;this.pending=!1,this.userAction=Bu,this.moveToPano(Tu,{longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ru=Cu.latitude)!==null&&Ru!==void 0?Ru:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((Ou=Cu.fov)!==null&&Ou!==void 0?Ou:this.defaultFov,this.minFov,this.maxFov),duration:Pu,moveStartCallback:function(Vu,ku){Fu=!0,Du.emit("initAnimationWillStart",Vu,ku,Du.userAction)},moveEndCallback:function(Vu,ku){Du.emit("initAnimationEnded",Vu,ku,Du.userAction)},moveCancelCallback:function(){var Vu=na(Du.camera.pose);Fu===!1&&Du.emit("initAnimationWillStart",Du.currentPanoIndex,Vu,Du.userAction),Du.emit("initAnimationEnded",Du.currentPanoIndex,Vu,Du.userAction)}},Bu)}},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.locationMotionKeyframesLength=function(Tu){for(var Cu=0,Pu=1;Pu<Tu.length;Pu++){var Bu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu-1]).position,Lu=this.panoResourceFromLocationMotionKeyframe(Tu[Pu]).position;Cu+=Bu.distanceTo(Lu)*(Tu[Pu].value.count-Tu[Pu-1].value.count)}return Cu},$u.prototype.updatePanoMeshes=function(){for(var Tu={},Cu=0,Pu=this.panoMeshes;Cu<Pu.length;Cu++)Tu[(Ou=Pu[Cu]).name]=Ou;this.panoMeshes.length=0;for(var Bu=0;Bu<this.work.observers.length;Bu++){var Lu="panoCircle_".concat(this.work.workCode,"_").concat(Bu),Ru=this.work.observers[Bu],Ou=void 0;Tu[Lu]?(Ou=Tu[Lu],delete Tu[Lu]):((Ou=this.panoCircleMeshCreator()).name=Lu,this.helper.add(Ou)),Ou.position.copy(Ru.standingPosition),this.panoMeshes[Bu]=Ou}for(var Du=0,Fu=Object.keys(Tu);Du<Fu.length;Du++){var Vu=Fu[Du];this.helper.remove(Tu[Vu]),Tu[Vu].dispose(),delete Tu[Vu]}},$u.prototype.generateBoundingMesh=function(Tu){Tu===void 0&&(Tu=!1);for(var Cu=this.model.bounding.clone(),Pu=0,Bu=this.work.observers;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Cu.expandByPoint(Lu.standingPosition),Cu.expandByPoint(new r$a.Vector3().fromArray([Lu.position.x,2*Lu.position.y-Lu.standingPosition.y,Lu.position.z]))}Tu&&Cu.expandByPoint(this.camera.position);var Ru=Ks(Cu,new r$a.Vector3(1,0,1));return Ru.name="panorama_bounding",Ru.frustumCulled=!1,Ru},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du,Fu=this;Pu===void 0&&(Pu={}),this.userAction=Bu;var Vu=_e$2(),ku=Kr(),Nu=this.work.observers[Tu],Gu=this.panoResources[ku]={panoIndex:Tu,workCode:this.work.workCode,effect:(Lu=Pu.effect)!==null&&Lu!==void 0?Lu:"fly",panoModel:Cu,matrix:new r$a.Matrix4().compose(Nu.position,Nu.quaternion,Vl),position:Nu.position.clone()};Cu.visible=!1,Cu.renderOrder=-1,this.panoModelGroup.add(Cu);var ju,Hu,Uu;if(this.locationMotion.ended){var zu=this.locationMotion.getKeyFrameSegment(Vu);zu[0];var Wu=zu[1],Qu=this.locationMotion.value,Ku=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position;ju=Math.max(Ku.distanceTo(Yu),1),Hu=[{key:Wu.key,progress:0,value:t$8.__assign(t$8.__assign({},Qu),{count:0})},{key:ku,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Uu=0}else{var Xc=this.locationMotion.getKeyFrameSegment(Vu),_d=Xc[0],_f=(Wu=Xc[1],Qu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(_d).position),qu=(Ku=this.panoResourceFromLocationMotionKeyframe(Wu).position,Yu=Gu.position,Wu.value.count-Qu.count),Xu=Math.max(_f.distanceTo(Ku),1)*qu;ju=Xu+Math.max(Ku.distanceTo(Yu),1),Hu=[{key:_d.key,progress:0,value:t$8.__assign({},Qu)},{key:Wu.key,progress:Xu/ju,value:Wu.value},{key:ku,progress:1,value:{count:Wu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Zu=this.locationMotionKeyframesLength(this.locationMotion.keyframes),_c=this.locationMotionKeyframesLength(Hu);Uu=Zu===0||Zu===0?0:this.locationMotion.getProgressVelocity(Vu)*Zu/_c}var Ju=this.calculateMovingDuration(Pu.duration,Pu.effect==="fade"||Pu.effect==="montage"?0:ju),_h={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},ep={longitude:(Ru=_h.longitude)!==null&&Ru!==void 0?Ru:this.camera.pose.longitude,latitude:(Ou=_h.latitude)!==null&&Ou!==void 0?Ou:this.camera.pose.latitude,fov:(Du=_h.fov)!==null&&Du!==void 0?Du:this.camera.pose.fov,offset:Nu.position.clone(),distance:this.camera.pose.distance};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,ep),this.emit("panoWillArrive",Tu,ep,this.userAction),this.cameraMotion.set(_h,Ju).catch(Qe),this.locationMotion.setKeyframes(Hu,Ju,Uu).then(function(){var tp={longitude:Fu.camera.pose.longitude,latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov,offset:Fu.camera.pose.offset.clone(),distance:Fu.camera.pose.distance};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,tp),Fu.emit("panoArrived",Tu,tp,Bu)},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Fu.emit("moveToPanoCanceled",Tu)})},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this,Pu=this.camera.getWorldDirection(new r$a.Vector3),Bu=this.camera.position.clone(),Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return null;var Ru=Lu.accessibleNodes.filter(function(Uu){if(Uu===Cu.currentPanoIndex)return!1;var zu=Cu.work.observers[Uu],Wu=zu.standingPosition.clone().sub(Bu);return Wu.length()!==0&&!(Wu.angleTo(new r$a.Vector3(0,-1,0))<Math.PI/12)&&(zu.loadable||zu.active)}),Ou=(Tu?Tu.ray.direction.clone():Pu.clone()).setY(0);if(Ou.length()===0)return null;for(var Du=Ru.slice().sort(function(Uu,zu){var Wu=Cu.work.observers[Uu].position.clone().setY(Bu.y),Qu=Cu.work.observers[zu].position.clone().setY(Bu.y);return Wu.distanceTo(Bu)-Qu.distanceTo(Bu)}),Fu=0,Vu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Fu<Vu.length;Fu++)for(var ku=Vu[Fu],Nu=0,Gu=Du;Nu<Gu.length;Nu++){var ju=Gu[Nu],Hu=this.work.observers[ju].position.clone().setY(Bu.y).sub(Bu);if(Hu.length()!==0&&Ou.angleTo(Hu)<ku)return ju}return null},$u.prototype.onTapGesture=function(Tu){var Cu=this,Pu=Tu.pointers.map(function(tp){return ii(tp,["x","y"])});if(!this.emit("wantsGesture","tap",Pu,!0)){var Bu=this.relativeClientPosition(Tu.center),Lu=new r$a.Raycaster;if(Lu.setFromCamera(Bu,this.camera),!this.emit("wantsTapGesture",Lu,Bu,!0)){this.emit("gesture","tap",Pu,!0),this.emit("tapGesture",Lu,Bu,!0),this.interiaMovement=!1;var Ru=this.camera.getWorldDirection(new r$a.Vector3).setY(0),Ou=null,Du=this.work.observers[this.currentPanoIndex];if(Du){var Fu=Du.accessibleNodes.filter(function(tp){if(tp===Cu.currentPanoIndex)return!1;var rp=Cu.work.observers[tp];return!(rp.position.distanceTo(Cu.camera.position)>Cu.maxAccessibleDistance)&&(rp.loadable||rp.active)}),Vu=Lu.intersectObject(this.boundingMesh,!0)[0];if(Vu){var ku=ta(Fu,function(tp){var rp=Cu.work.observers[tp].standingPosition.clone();return rp.clone().sub(Cu.camera.position).setY(0).angleTo(Ru)>Math.PI/2?1/0:rp.distanceTo(Vu.point)},!0),Nu=ku[0];ku[1]<this.panoTapTriggerRadius&&(Ou=Nu)}oo(Ou)&&(Ou=this.getForwardPanoIndexOrNot(Lu));for(var Gu=0,ju=this.locationMotion.keyframes;Gu<ju.length;Gu++){var Hu=ju[Gu],Uu=this.panoResourceFromLocationMotionKeyframe(Hu);if(!(Hu.progress<this.locationMotion.progress)&&Uu.panoIndex===Ou){Ou=null;break}}if(this.emit("panoSelected",Ou),oo(Ou))this.locationMotion.ended===!0&&this.cameraBounce();else{var zu=this.work.observers[Ou];if(zu.active){for(var Wu={},Qu=Math.PI/6,Ku=Math.PI/12,Yu=new r$a.Vector3(0,1,0),Xc=zu.position.clone().setY(0).sub(Du.position.clone().setY(0)).normalize(),_d=Xc.clone().applyAxisAngle(Yu,Qu),_f=Xc.clone().applyAxisAngle(Yu,-Qu),qu=[],Xu=[],Zu=[],_c=0,Ju=zu.accessibleNodes;_c<Ju.length;_c++)if((Nu=Ju[_c])!==this.currentPanoIndex&&Nu!==Ou){var _h=this.work.observers[Nu].position.clone().sub(zu.position).setY(0);Xc.angleTo(_h)<Qu?Zu.push(_h):_d.angleTo(_h)<Qu?qu.push(_h):_f.angleTo(_h)<Qu&&Xu.push(_h)}var ep=(Zu.length>0?Zu:t$8.__spreadArray(t$8.__spreadArray([],qu,!0),Xu,!0)).slice().sort(function(tp,rp){return tp.angleTo(Xc)-rp.angleTo(Xc)})[0];ep&&ep.angleTo(Ru)>Ku&&(Wu.longitude=Math.atan2(-ep.x,-ep.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Wu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Ou,Wu,!0)}else this.panoMeshes[Ou]&&(this.panoMeshes[Ou].setDisabled(!1),this.panoMeshes[Ou].setLoading(!0))}}}}},$u}(ba$1);function Hl(_u,$u){var Tu=new r$a.Vector3;return Tu.setFromMatrixColumn($u,0),Tu.multiplyScalar(-_u),Tu}function ql(_u,$u,Tu){var Cu=new r$a.Vector3;return Cu.setFromMatrixColumn(Tu,0),Cu.crossVectors($u,Cu),Cu.multiplyScalar(_u),Cu}var zl=function(_u){function $u(Tu){var Cu,Pu,Bu,Lu,Ru=this,Ou=$u.parseArgs(Tu);return(Ru=_u.call(this,Ou)||this).currentPanoIndex=Ou.initial[0],Ru.defaultLongitude=Ou.defaultLongitude,Ru.defaultLatitude=Ou.defaultLatitude,Ru.defaultDistance=Ou.defaultDistance,Ru.maxLatitude=Ou.maxLatitude,Ru.minLatitude=Ou.minLatitude,Ru.maxDistance=Ou.maxDistance,Ru.minDistance=Ou.minDistance,Ru.locationMotion=new Ro({x:Ru.camera.pose.offset.x,y:Ru.camera.pose.offset.y,z:Ru.camera.pose.offset.z,distance:Ru.camera.pose.distance,modelAlpha:(Pu=(Cu=Ru.model.getMaterial())===null||Cu===void 0?void 0:Cu.modelAlpha)!==null&&Pu!==void 0?Pu:0,perspToOrtho:(Lu=(Bu=Ru.model.getMaterial())===null||Bu===void 0?void 0:Bu.perspToOrtho)!==null&&Lu!==void 0?Lu:0}),Ru}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu=_u.parseArgs.call(this,Tu);return t$8.__assign(t$8.__assign({},Fu),{defaultLongitude:(Cu=Tu.defaultLongitude)!==null&&Cu!==void 0?Cu:Math.PI/4,defaultLatitude:(Pu=Tu.defaultLatitude)!==null&&Pu!==void 0?Pu:Math.PI/4,defaultDistance:(Bu=Tu.defaultDistance)!==null&&Bu!==void 0?Bu:100,maxLatitude:(Lu=Tu.maxLatitude)!==null&&Lu!==void 0?Lu:+Math.PI/2,minLatitude:(Ru=Tu.minLatitude)!==null&&Ru!==void 0?Ru:0,maxDistance:(Ou=Tu.maxDistance)!==null&&Ou!==void 0?Ou:100,minDistance:(Du=Tu.minDistance)!==null&&Du!==void 0?Du:2})},$u.distanceFromModel=function(Tu,Cu,Pu){var Bu=Tu.bounding,Lu=Math.pow(Math.pow(Bu.max.x-Bu.min.x+1,2)+Math.pow(Bu.max.y-Bu.min.y+1,2)+Math.pow(Bu.max.z-Bu.min.z+1,2),.5),Ru=Lu/2/Math.tan(Math.PI*Cu/360);return Pu<1&&(Ru/=Pu),isNaN(Ru)?Lu:Ru},$u.initAnimationEndPose=function(Tu){var Cu,Pu,Bu=this.parseArgs(Tu),Lu=Tu.initial[0],Ru=Tu.initial[1];return{longitude:(Cu=Ru.longitude)!==null&&Cu!==void 0?Cu:Bu.defaultLongitude,latitude:ho((Pu=Ru.latitude)!==null&&Pu!==void 0?Pu:Bu.defaultLatitude,Bu.minLatitude,Bu.maxLatitude),fov:90,offset:Bu.work.observers[Lu].position.clone(),distance:$u.distanceFromModel(Bu.model,90,Bu.camera.aspect)}},$u.prototype.destroy=function(){_u.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},$u.prototype.isReady=function(){return this.locationMotion.ended!==!1&&_u.prototype.isReady.call(this)},$u.prototype.updateWork=function(Tu,Cu,Pu,Bu,Lu){return this.work=Tu,this.updateCamera(Pu,Bu,Lu),!0},$u.prototype.updateModel=function(Tu){_u.prototype.updateModel.call(this,Tu);var Cu=Tu.bounding.getCenter(new r$a.Vector3);this.locationMotion.set({x:Cu.x,y:Cu.y,z:Cu.z},0).catch(Qe),this.model.enableTiles=!0},$u.prototype.updateTime=function(Tu,Cu){if(!this.destroyed){var Pu={},Bu={};this.locationMotion.ended||(this.locationMotion.update(Tu),Pu.modelAlpha=this.locationMotion.value.modelAlpha,Pu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Bu.distance=this.locationMotion.value.distance,Bu.offset=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Tu),Bu.longitude=this.cameraMotion.value.longitude,Bu.latitude=this.cameraMotion.value.latitude,Bu.fov=this.cameraMotion.value.fov),ia$1(Pu)||this.model.setMaterial(Pu),ia$1(Bu)||this.setCamera(Bu)}},$u.prototype.setCamera=function(Tu){_u.prototype.setCamera.call(this,Tu);var Cu=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Pu=new r$a.Raycaster(this.camera.getWorldPosition(new r$a.Vector3),this.camera.getWorldDirection(new r$a.Vector3)),Bu=this.model.intersectRaycaster(Pu)[0];Bu&&Cu.copy(Bu.point)}var Lu=ta(this.work.observers,function(Ou){return Ou.position.distanceTo(Cu)}),Ru=this.work.observers.indexOf(Lu);Ru!==this.currentPanoIndex&&(this.emit("moveToPano",Ru,this.userAction),this.emit("panoWillArrive",Ru,na(this.camera.pose),this.userAction),this.currentPanoIndex=Ru,this.emit("panoArrived",Ru,na(this.camera.pose),this.userAction))},$u.prototype.getTargetPose=function(){var Tu=this.cameraMotion.getKeyFrameSegment(_e$2())[1],Cu=this.locationMotion.getKeyFrameSegment(_e$2())[1];return{longitude:Tu.value.longitude,latitude:Tu.value.latitude,fov:Tu.value.fov,distance:Cu.value.distance,offset:new r$a.Vector3(Cu.value.x,Cu.value.y,Cu.value.z)}},$u.prototype.initAnimation=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou=this;if(!this.destroyed){this.pending=!1,this.userAction=Bu;var Du={longitude:(Lu=Cu.longitude)!==null&&Lu!==void 0?Lu:this.defaultLongitude,latitude:ho((Ru=Cu.latitude)!==null&&Ru!==void 0?Ru:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$a.Vector3),distance:$u.distanceFromModel(this.model,90,this.camera.aspect)},Fu=ii(Du,["longitude","latitude","fov"]),Vu={x:Du.offset.x,y:Du.offset.y,z:Du.offset.z,distance:Du.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Tu,Du,this.userAction),this.cameraMotion.set(Fu,Pu).catch(Qe),this.locationMotion.set(Vu,Pu).then(function(){Ou.emit("initAnimationEnded",Tu,Du,Ou.userAction)},function(ku){var Nu=na(Ou.camera.pose);Ou.emit("initAnimationEnded",Tu,Nu,Ou.userAction)}).then(function(){Ou.model.enableTiles=!0})}},$u.prototype.getForwardPanoIndexOrNot=function(Tu){var Cu=this.work.observers.filter(function(Ru){return Ru.active}),Pu=this.model.intersectRaycaster(Tu)[0];if(!Pu)return null;var Bu=ta(Cu,function(Ru){return Ru.standingPosition.distanceTo(Pu.point)},!0),Lu=Bu[0];return Bu[1]<5?this.work.observers.indexOf(Lu):null},$u.prototype.coordinatesForOffset=function(Tu){var Cu=this.cameraMotion.value.fov,Pu=this.camera.aspect,Bu=this.renderer.getSize(new r$a.Vector2);return{longitude:2*Tu.x/(Bu.x*this.scissor.width)*Cu/95*Pu,latitude:-2*Tu.y/(Bu.y*this.scissor.height)*Cu/95}},$u.prototype.onPanGesture=function(Tu){var Cu=this.panState,Pu=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Pu,x:Tu.center.x,y:Tu.center.y},Cu!==void 0&&Cu.pointerLength===Pu){var Bu=Tu.pointers.map(function(zu){return ii(zu,["x","y"])});if(!this.emit("wantsGesture","pan",Bu,Tu.isFinal))if(Tu.pointerType==="mouse"&&Tu.srcEvent.buttons===2){var Lu={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y},Ru=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Ou=this.model.bounding,Du=Ou.getCenter(new r$a.Vector3),Fu={x:(Ou.max.x-Ou.min.x)/90*this.cameraMotion.value.fov,y:(Ou.max.y-Ou.min.y)/90*this.cameraMotion.value.fov,z:(Ou.max.z-Ou.min.z)/90*this.cameraMotion.value.fov},Vu=(this.camera.position.y-Ou.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),ku=this.renderer.getSize(new r$a.Vector2);Ru.add(Hl(2*Lu.x*Vu/ku.y,this.camera.matrix)),Ru.add(ql(2*Lu.y*Vu/ku.y,this.camera.up,this.camera.matrix)),Ru.x=ho(Ru.x,Du.x-Fu.x,Du.x+Fu.x),Ru.z=ho(Ru.z,Du.z-Fu.z,Du.z+Fu.z);var Nu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ru,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",Nu,Tu.isFinal))return;this.emit("gesture","pan",Bu,Tu.isFinal),this.emit("panGesture",Nu,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Ru.x,y:Ru.y,z:Ru.z},0).catch(Qe)}else{Ru={x:Tu.center.x-Cu.x,y:Tu.center.y-Cu.y};var Gu=this.coordinatesForOffset(Ru),ju=Gs(this.cameraMotion.value.longitude+-1*Gu.longitude),Hu=ho(this.cameraMotion.value.latitude+-1*Gu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Tu.overallVelocityX)>.2&&Math.atan2(Math.abs(Tu.overallVelocityY),Math.abs(Tu.overallVelocityX))<Math.PI/6.923&&(Hu=this.cameraMotion.value.latitude),Nu={longitude:ju,latitude:Hu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",Nu,Tu.isFinal))return;this.emit("gesture","pan",Bu,Tu.isFinal),this.emit("panGesture",Nu,Tu.isFinal),this.userAction=!0,this.interiaMovement=!1;var Uu={longitude:Nu.longitude,latitude:Nu.latitude,fov:Nu.fov};this.cameraMotion.set(Uu,0).catch(Qe),Tu.isFinal&&(this.emit("wantsInteriaPan",Nu)||(this.interiaMovement=!0,Tu.velocityX,Tu.velocityY))}}},$u.prototype.onPinchGesture=function(Tu){var Cu=this.pinchState||{},Pu=Cu.distance;Cu.offsetY;var Bu=!1;if(Tu.type!=="pinchstart"){if(Tu.type==="pinchend"&&(Bu=!0,delete this.pinchState),Pu!==void 0){this.pinchState={distance:Pu};var Lu=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(this.emit("wantsGesture","pinch",Lu,Bu))return;var Ru=ho(Pu/Tu.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Tu.scale,this.camera.pose.fov,Bu))return;this.emit("gesture","pinch",Lu,Bu),this.emit("pinchGesture",Tu.scale,this.camera.pose.fov,Bu),this.userAction=!0,this.locationMotion.set({distance:Ru},0).catch(Qe)}var Ou=this.panState,Du=Tu.pointers.length;if(Tu.isFinal?delete this.panState:this.panState={pointerLength:Du,x:Tu.center.x,y:Tu.center.y},Ou!==void 0&&Ou.pointerLength===Du){var Fu=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",Fu,Bu)){var Vu=Tu.pointers.map(function(Qu){return ii(Qu,["x","y"])});if(!this.emit("wantsGesture","pinch",Vu,Bu)){var ku={x:Tu.center.x-Ou.x,y:Tu.center.y-Ou.y},Nu=new r$a.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Gu=this.model.bounding,ju=Gu.getCenter(new r$a.Vector3),Hu={x:(Gu.max.x-Gu.min.x)/90*this.cameraMotion.value.fov,y:(Gu.max.y-Gu.min.y)/90*this.cameraMotion.value.fov,z:(Gu.max.z-Gu.min.z)/90*this.cameraMotion.value.fov},Uu=(this.camera.position.y-Gu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),zu=this.renderer.getSize(new r$a.Vector2);Nu.add(Hl(2*ku.x*Uu/zu.y,this.camera.matrix)),Nu.add(ql(2*ku.y*Uu/zu.y,this.camera.up,this.camera.matrix)),Nu.x=ho(Nu.x,ju.x-Hu.x,ju.x+Hu.x),Nu.z=ho(Nu.z,ju.z-Hu.z,ju.z+Hu.z);var Wu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Nu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",Wu,Tu.isFinal)||(this.emit("gesture","pan",Vu,Tu.isFinal),this.emit("panGesture",Wu,Tu.isFinal),this.userAction=!0,this.locationMotion.set({x:Nu.x,y:Nu.y,z:Nu.z},0).catch(Qe))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},$u.prototype.onMouseWheel=function(Tu){var Cu=this,Pu=(Math.abs(Tu.deltaY)>Math.abs(Tu.deltaX)?Tu.deltaY:Tu.deltaX)/-60,Bu=[{x:Tu.clientX,y:Tu.clientY,delta:Pu}];if(!this.emit("wantsGesture","mouseWheel",Bu,!1)){var Lu=ho(this.locationMotion.value.distance-Pu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Pu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Bu,!1),this.emit("mouseWheel",Pu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Lu},0).catch(Qe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Cu.mouseWheelState,Cu.emit("wantsGesture","mouseWheel",Bu,!0)||Cu.emit("wantsMouseWheel",Pu,Cu.camera.pose.fov,!0)||(Cu.emit("gesture","mouseWheel",Bu,!0),Cu.emit("mouseWheel",0,Cu.camera.pose.fov,!0))},200)})}},$u.prototype.onTapGesture=function(Tu){var Cu=Tu.pointers.map(function(Ou){return ii(Ou,["x","y"])});if(!this.emit("wantsGesture","tap",Cu,!0)){var Pu=this.relativeClientPosition(Tu.center),Bu=new r$a.Raycaster;if(Bu.setFromCamera(Pu,this.camera),!this.emit("wantsTapGesture",Bu,Pu,!0)){this.emit("gesture","tap",Cu,!0),this.emit("tapGesture",Bu,Pu,!0),this.interiaMovement=!1;var Lu=this.getForwardPanoIndexOrNot(Bu);if(!oo(Lu)){this.emit("panoSelected",Lu);var Ru={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Lu,Ru,!0)}}}},$u.prototype.onPressGesture=function(Tu,Cu){var Pu,Bu,Lu=[Tu];if(this.emit("wantsGesture","press",Lu,Cu))return(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),void delete this.pressState;var Ru=this.relativeClientPosition(Tu),Ou=new r$a.Raycaster;if(Ou.setFromCamera(Ru,this.camera),this.emit("wantsPressGesture",Ou,Ru,Tu.delta,Cu))return(Bu=this.pressState)===null||Bu===void 0||Bu.stop(),void delete this.pressState;this.emit("gesture","press",Lu,Cu),this.emit("pressGesture",Ou,Ru,Tu.delta,Cu)},$u}(fa$1),Kl={type:"move"},Ul=function(){function _u(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return _u.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$a.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},_u.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$a.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$a.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$a.Vector3),this._targetRay},_u.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$a.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$a.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$a.Vector3),this._grip},_u.prototype.dispatchEvent=function($u){return this._targetRay!==null&&this._targetRay.dispatchEvent($u),this._grip!==null&&this._grip.dispatchEvent($u),this._hand!==null&&this._hand.dispatchEvent($u),this},_u.prototype.disconnect=function($u){return this.dispatchEvent({type:"disconnected",data:$u}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},_u.prototype.getAxes=function(){return this._axes},_u.prototype.update=function($u,Tu,Cu){var Pu=null,Bu=null,Lu=null,Ru=this._targetRay,Ou=this._grip,Du=this._hand;if($u&&$u.gamepad&&$u.gamepad.axes&&(this._axes=[$u.gamepad.axes[2],$u.gamepad.axes[3]]),$u&&Tu.session.visibilityState!=="visible-blurred")if(Ru!==null&&(Pu=Tu.getPose($u.targetRaySpace,Cu))!==null&&(Ru.matrix.fromArray(Pu.transform.matrix),Ru.matrix.decompose(Ru.position,Ru.rotation,Ru.scale),Pu.linearVelocity?(Ru.hasLinearVelocity=!0,Ru.linearVelocity.copy(Pu.linearVelocity)):Ru.hasLinearVelocity=!1,Pu.angularVelocity?(Ru.hasAngularVelocity=!0,Ru.angularVelocity.copy(Pu.angularVelocity)):Ru.hasAngularVelocity=!1,this.dispatchEvent(Kl)),Du&&$u.hand){Lu=!0;for(var Fu=0,Vu=$u.hand.values();Fu<Vu.length;Fu++){var ku=Vu[Fu],Nu=Tu.getJointPose(ku,Cu);if(Du.joints[ku.jointName]===void 0){var Gu=new r$a.Group;Gu.matrixAutoUpdate=!1,Gu.visible=!1,Du.joints[ku.jointName]=Gu,Du.add(Gu)}var ju=Du.joints[ku.jointName];Nu!==null&&(ju.matrix.fromArray(Nu.transform.matrix),ju.matrix.decompose(ju.position,ju.rotation,ju.scale),ju.jointRadius=Nu.radius),ju.visible=Nu!==null}var Hu=Du.joints["index-finger-tip"],Uu=Du.joints["thumb-tip"],zu=Hu.position.distanceTo(Uu.position);Du.inputState.pinching&&zu>.025?(Du.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:$u.handedness,target:this})):!Du.inputState.pinching&&zu<=.015&&(Du.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:$u.handedness,target:this}))}else Ou!==null&&$u.gripSpace&&(Bu=Tu.getPose($u.gripSpace,Cu))!==null&&(Ou.matrix.fromArray(Bu.transform.matrix),Ou.matrix.decompose(Ou.position,Ou.rotation,Ou.scale),Bu.linearVelocity?(Ou.hasLinearVelocity=!0,Ou.linearVelocity.copy(Bu.linearVelocity)):Ou.hasLinearVelocity=!1,Bu.angularVelocity?(Ou.hasAngularVelocity=!0,Ou.angularVelocity.copy(Bu.angularVelocity)):Ou.hasAngularVelocity=!1);return Ru!==null&&(Ru.visible=Pu!==null),Ou!==null&&(Ou.visible=Bu!==null),Du!==null&&(Du.visible=Lu!==null),this},_u}(),jl=function(_u){function $u(Tu,Cu,Pu){var Bu,Lu,Ru,Ou=this;return(Ou=_u.call(this)||this).isPanorama=(Bu=Pu==null?void 0:Pu.isPanorama)===null||Bu===void 0||Bu,Ou.machineType=(Lu=Pu==null?void 0:Pu.machineType)!==null&&Lu!==void 0?Lu:"Pico",Ou.renderer=Tu,Ou.gl=Cu,Ou.enabled=!1,Ou.session=null,Ou.referenceSpaceType=(Ru=Pu==null?void 0:Pu.referenceSpaceType)!==null&&Ru!==void 0?Ru:"local-floor",Ou.referenceSpace=null,Ou.controllers=[new Ul,new Ul],Ou.inputSourcesMap=new Map,Ou.cameraVR=new r$a.ArrayCamera,Ou.cameraL=new r$a.PerspectiveCamera,Ou.cameraR=new r$a.PerspectiveCamera,Ou.cameraL.viewport=new r$a.Vector4,Ou.cameraR.viewport=new r$a.Vector4,Ou.cameraL.layers.enable(1),Ou.cameraR.layers.enable(2),Ou.cameraVR.layers.enable(1),Ou.cameraVR.layers.enable(2),Ou.isPresenting=!1,Ou.currentDepthNear=null,Ou.currentDepthFar=null,Ou.cameraLPos=new r$a.Vector3,Ou.cameraRPos=new r$a.Vector3,Ou}return t$8.__extends($u,_u),$u.prototype.getController=function(Tu){var Cu=this.controllers[Tu];return Cu||console.warn("no controller find"),Cu.getTargetRaySpace()},$u.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},$u.prototype.updateCamera=function(Tu,Cu){Cu===null?Tu.matrixWorld.copy(Tu.matrix):Tu.matrixWorld.multiplyMatrices(Cu.matrixWorld,Tu.matrix),Tu.matrixWorldInverse.getInverse(Tu.matrixWorld)},$u.prototype.setProjectionFromUnion=function(Tu,Cu,Pu){this.cameraLPos.setFromMatrixPosition(Cu.matrixWorld),this.cameraRPos.setFromMatrixPosition(Pu.matrixWorld);var Bu=this.cameraLPos.distanceTo(this.cameraRPos),Lu=Cu.projectionMatrix.elements,Ru=Pu.projectionMatrix.elements,Ou=Lu[14]/(Lu[10]-1),Du=Lu[14]/(Lu[10]+1),Fu=(Lu[9]+1)/Lu[5],Vu=(Lu[9]-1)/Lu[5],ku=(Lu[8]-1)/Lu[0],Nu=(Ru[8]+1)/Ru[0],Gu=Ou*ku,ju=Ou*Nu,Hu=Bu/(-ku+Nu),Uu=Hu*-ku;Cu.matrixWorld.decompose(Tu.position,Tu.quaternion,Tu.scale),Tu.translateX(Uu),Tu.translateZ(Hu),Tu.matrixWorld.compose(Tu.position,Tu.quaternion,Tu.scale),Tu.matrixWorldInverse.getInverse(Tu.matrixWorld);var zu=Ou+Hu,Wu=Du+Hu,Qu=Gu-Uu,Ku=ju+(Bu-Uu),Yu=Fu*Du/Wu*zu,Xc=Vu*Du/Wu*zu;Tu.projectionMatrix.makePerspective(Qu,Ku,Yu,Xc,zu,Wu)},$u.prototype.getCamera=function(Tu){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Tu.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Tu.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Cu=Tu.parent,Pu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Cu);for(var Bu=0;Bu<Pu.length;Bu++)this.updateCamera(Pu[Bu],Cu);Tu.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Lu=Tu.children,Ru=(Bu=0,Lu.length);Bu<Ru;Bu++)Lu[Bu].updateMatrixWorld(!0);return Pu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},$u.prototype.updateInputSources=function(Tu){if(this.session){for(var Cu=this.session.inputSources,Pu=0;Pu<this.controllers.length;Pu++)this.inputSourcesMap.set(Cu[Pu],this.controllers[Pu]);for(Pu=0;Pu<Tu.removed.length;Pu++){var Bu=Tu.removed[Pu];(Lu=this.inputSourcesMap.get(Bu))&&(Lu.dispatchEvent({type:"disconnected",data:Bu}),this.inputSourcesMap.delete(Bu))}for(Pu=0;Pu<Tu.added.length;Pu++){var Lu;Bu=Tu.added[Pu],(Lu=this.inputSourcesMap.get(Bu))&&Lu.dispatchEvent({type:"connected",data:Bu})}}else console.warn("session is lose!")},$u.prototype.onSessionEvent=function(Tu){var Cu=this.inputSourcesMap.get(Tu.inputSource);Cu&&Cu.dispatchEvent({type:Tu.type})},$u.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Tu,Cu){Tu.disconnect(Cu)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at$1.shared.setContext(null),this.emit("webXRSessionEnd")},$u.prototype.onRequestReferenceSpace=function(Tu){this.referenceSpace=Tu,this.isPresenting=!0,this.emit("webXRSessionStart")},$u.prototype.setSession=function(Tu){var Cu=this;if(this.session=Tu,this.session){this.session.addEventListener("select",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("selectstart",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("selectend",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("squeeze",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("squeezestart",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("squeezeend",function(Bu){Cu.onSessionEvent(Bu)}),this.session.addEventListener("end",function(Bu){Cu.onSessionEnd()});var Pu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Bu={antialias:Pu==null?void 0:Pu.antialias,alpha:Pu==null?void 0:Pu.alpha,depth:Pu==null?void 0:Pu.depth,stencil:Pu==null?void 0:Pu.stencil,framebufferScaleFactor:1};if(Cu.session){switch(Cu.machineType){case"Pico":Cu.session.updateRenderState({baseLayer:new XRWebGLLayer(Cu.session,Cu.gl,Bu)});break;case"Oculus":Cu.session.updateRenderState({layers:[new XRWebGLLayer(Cu.session,Cu.gl,Bu)]});break;default:Cu.machineType}Cu.session.requestReferenceSpace(Cu.referenceSpaceType).then(function(Lu){Cu.onRequestReferenceSpace(Lu)}),Cu.session.addEventListener("inputsourceschange",function(Lu){Cu.updateInputSources(Lu)})}else console.error("session is lose while set session!")})}},$u}(Fe),Gl=["webXRSessionStart","webXRSessionEnd"];function Wl(_u,$u){if(!$u)return _u;var Tu=_u.match(/\d+_[a-z].png/);return _u.substring(0,Tu.index)+$u+"/"+_u.substring(Tu.index)}var Xl=new r$a.Matrix4().makeRotationAxis(new r$a.Vector3(0,1,0),Math.PI),Yl=new r$a.Vector3(-1,1,1),Zl=function(_u){function $u(Tu){var Cu=_u.call(this,Tu)||this;Cu.xrManager=new jl(Cu.renderer,Cu.renderer.getContext()),Cu.xrControllerRay=new r$a.Raycaster,Cu.boundingMesh.visible=!0,Cu.panoResources={},Cu.panoResources[Cu.locationMotion.keyframes[0].key=Cu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Cu.currentPanoIndex,workCode:Cu.work.workCode,leftPanoPicture:null,position:Cu.camera.pose.offset.clone(),effect:"fade"};var Pu=at$1.shared.getContext();if(!Pu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Cu;Pu.addEventListener("select",function(Du){Cu.emit("webXRSelected","Select"),Cu.checkSelectedPano()}),Pu.addEventListener("squeeze",function(Du){Cu.emit("webXRSelected","Squeeze")}),Cu.xrManager.setSession(Pu);for(var Bu=function(Du){Lu.xrManager.on(Du,function(){for(var Fu=[],Vu=0;Vu<arguments.length;Vu++)Fu[Vu]=arguments[Vu];Cu.emit.apply(Cu,t$8.__spreadArray([Du],Fu,!1))})},Lu=this,Ru=0,Ou=Gl;Ru<Ou.length;Ru++)Bu(Ou[Ru]);return Cu}return t$8.__extends($u,_u),$u.parseArgs=function(Tu){var Cu=t$8.__assign(t$8.__assign({},Tu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return _u.parseArgs.call(this,Cu)},$u.initAnimationEndPose=function(Tu){var Cu=this.parseArgs(Tu);return _u.initAnimationEndPose.call(this,Cu)},$u.prototype.moveToPano=function(Tu,Cu,Pu){var Bu,Lu,Ru,Ou=this,Du=this.work.observers[Tu],Fu=t$8.__assign({key:"pano.".concat(Tu),basisLoaderInitialized:Ei.isInitialized()},ii(this.imageOptions,["format","size","quality"])),Vu=(Bu=this.imageOptions.transform)!==null&&Bu!==void 0?Bu:ct$1,ku={right:Wl(Vu(Du.images.right,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".right")}))),left:Wl(Vu(Du.images.left,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".left")}))),up:Wl(Vu(Du.images.up,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".up")}))),down:Wl(Vu(Du.images.down,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".down")}))),front:Wl(Vu(Du.images.front,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".front")}))),back:Wl(Vu(Du.images.back,t$8.__assign(t$8.__assign({},Fu),{key:"".concat(Fu.key,".back")})))},Nu={key:"pano_luminance.".concat(Tu),basisLoaderInitialized:Ei.isInitialized(),size:Fu.size?Fu.size/2:1024},Gu=this.enableIOSEDR&&Du.images.luminance?{right:Vu(Du.images.luminance.right,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".right")})),left:Vu(Du.images.luminance.left,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".left")})),up:Vu(Du.images.luminance.up,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".up")})),down:Vu(Du.images.luminance.down,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".down")})),front:Vu(Du.images.luminance.front,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".front")})),back:Vu(Du.images.luminance.back,t$8.__assign(t$8.__assign({},Nu),{key:"".concat(Nu.key,".back")}))}:null,ju="pano:"+va(ku);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ju)return;var Hu=this.pendingTextureTask.panoIndex;(Lu=this.panoMeshes[Hu])===null||Lu===void 0||Lu.setProgress(0),this.emit("textureAbort",Hu,Du),this.pendingTextureTask.onError(new Error("texture aborted"))}var Uu,zu=this.model.getMaterial()||{},Wu=zu.pano0,Qu=zu.pano1;if((Wu==null?void 0:Wu.map.name)===ju?Uu=Wu:(Qu==null?void 0:Qu.map.name)===ju&&(Uu=Qu),Uu){var Ku={panoIndex:Tu,workCode:this.work.workCode,effect:(Ru=Cu.effect)!==null&&Ru!==void 0?Ru:"fade",leftPanoPicture:{map:Uu.map,luminanceMap:Uu.luminanceMap,matrix:new r$a.Matrix4().compose(Du.position,Du.quaternion,Yl)},position:Du.position.clone()};this.doMoveToPano(Tu,Ku,Cu,Pu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Tu,hash:ju,onLoad:function(Yu,Xc){var _d,_f;if(Ou.pending=!1,Ou.destroyed)Yu.body.dispose();else{Yu.body.name=ju;var qu={panoIndex:Tu,workCode:Ou.work.workCode,effect:(_d=Cu.effect)!==null&&_d!==void 0?_d:"fade",leftPanoPicture:{map:Yu.body,luminanceMap:(_f=Xc==null?void 0:Xc.body)!==null&&_f!==void 0?_f:null,matrix:new r$a.Matrix4().compose(Du.position,Du.quaternion,Yl)},position:Du.position.clone()};Ou.doMoveToPano(Tu,qu,Cu,Pu)}},onError:function(Yu){Ou.pending=!1,Cu.moveCancelCallback&&Cu.moveCancelCallback(),Ou.emit("panoLoadError",Yu,Tu),Ou.emit("moveToPanoCanceled",Tu)}},Promise.all([this.textureLoader.loadCube(ku,{format:r$a.RGBFormat},void 0,void 0,function(Yu){var Xc,_d;((Xc=Ou.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===ju&&((_d=Ou.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(Yu)),Ou.emit("textureLoading",Yu,Tu,Du)}),Gu?this.textureLoader.loadCube(Gu,{format:r$a.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Yu){var Xc,_d,_f=Yu[0],qu=Yu[1];((Xc=Ou.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===ju?(Ou.pendingTextureTask.onLoad(_f,qu),(_d=Ou.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureLoaded",Tu,Du,_f.meta)):(_f.body.dispose(),qu==null||qu.body.dispose())}).catch(function(Yu){var Xc,_d;((Xc=Ou.pendingTextureTask)===null||Xc===void 0?void 0:Xc.hash)===ju&&(Ou.pendingTextureTask.onError(Yu),(_d=Ou.panoMeshes[Tu])===null||_d===void 0||_d.setProgress(0),delete Ou.pendingTextureTask,Ou.emit("textureError",Yu,Tu,Du),Ou.emit("error",Yu))}),this.emit("textureStartLoad",Tu,Du)},$u.prototype.doMoveToPano=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du=this;Pu===void 0&&(Pu={}),this.userAction=Bu;var Fu=_e$2(),Vu=Kr();this.panoResources[Vu]=Cu;var ku,Nu,Gu;if(this.locationMotion.ended){var ju=this.locationMotion.getKeyFrameSegment(Fu);ju[0];var Hu=ju[1],Uu=this.locationMotion.value,zu=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position;ku=Math.max(zu.distanceTo(Wu),1),Nu=[{key:Hu.key,progress:0,value:t$8.__assign(t$8.__assign({},Uu),{count:0})},{key:Vu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Gu=0}else{var Qu=this.locationMotion.getKeyFrameSegment(Fu),Ku=Qu[0],Yu=(Hu=Qu[1],Uu=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Ku).position),Xc=(zu=this.panoResourceFromLocationMotionKeyframe(Hu).position,Wu=Cu.position,Hu.value.count-Uu.count),_d=Math.max(Yu.distanceTo(zu),1)*Xc;ku=_d+Math.max(zu.distanceTo(Wu),1),Nu=[{key:Ku.key,progress:0,value:t$8.__assign({},Uu)},{key:Hu.key,progress:_d/ku,value:Hu.value},{key:Vu,progress:1,value:{count:Hu.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var _f=this.locationMotionKeyframesLength(this.locationMotion.keyframes),qu=this.locationMotionKeyframesLength(Nu);Gu=this.locationMotion.getProgressVelocity(Fu)*_f/qu}var Xu=this.calculateMovingDuration(Pu.duration,ku),Zu={longitude:Pu.longitude,latitude:Pu.latitude,fov:Pu.fov},_c={longitude:(Lu=Zu.longitude)!==null&&Lu!==void 0?Lu:this.camera.pose.longitude,latitude:(Ru=Zu.latitude)!==null&&Ru!==void 0?Ru:this.camera.pose.latitude,fov:(Ou=Zu.fov)!==null&&Ou!==void 0?Ou:this.camera.pose.fov,offset:Cu.position.clone(),distance:0};Pu.moveStartCallback&&Pu.moveStartCallback(Tu,_c),this.emit("panoWillArrive",Tu,_c,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Zu,Xu).catch(Qe),this.locationMotion.setKeyframes(Nu,Xu,Gu).then(function(){var Ju,_h,ep,tp={longitude:Du.camera.pose.longitude,latitude:Du.camera.pose.latitude,fov:Du.camera.pose.fov,offset:Du.camera.pose.offset.clone(),distance:0};Pu.moveEndCallback&&Pu.moveEndCallback(Tu,tp),Du.emit("panoArrived",Tu,tp,Bu);var rp=Du.work.observers[Du.currentPanoIndex];if(rp&&rp.video&&Du.videoTexture&&Du.videoTexture.image instanceof HTMLVideoElement){var dp=Xl.clone().multiply((ep=(_h=(Ju=Du.model.getMaterial())===null||Ju===void 0?void 0:Ju.pano1)===null||_h===void 0?void 0:_h.matrix)!==null&&ep!==void 0?ep:new r$a.Matrix4).multiply(rp.video.matrix),cp={map:Du.videoTexture,size:rp.video.size,matrix:dp,alpha:1},Sp=Kr(),yp=Du.videoTexture.image;yp.setAttribute("uuid",Sp),xa().then(function(Bp){Bp&&rp.video&&yp.getAttribute("uuid")===Sp&&(yp.oncanplay=function(){yp.oncanplay=Qe,yp.play()},yp.ontimeupdate=function(){yp.currentTime>.5&&(yp.ontimeupdate=Qe,Du.panoVideo.setMaterial(cp))},yp.src=rp.video.source)}).catch(function(){yp.removeAttribute("uuid")})}},function(){Pu.moveCancelCallback&&Pu.moveCancelCallback(),Du.emit("moveToPanoCanceled",Tu)})},$u.prototype.checkSelectedPano=function(){var Tu=this,Cu=this.xrControllerRay;this.interiaMovement=!1;var Pu=this.camera.getWorldDirection(new r$a.Vector3).setY(0),Bu=null,Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return Bu;var Ru=Lu.accessibleNodes.filter(function(Ju){if(Ju===Tu.currentPanoIndex)return!1;var _h=Tu.work.observers[Ju];return!(_h.position.distanceTo(Tu.camera.position)>Tu.maxAccessibleDistance)&&(_h.loadable||_h.active)}),Ou=this.model.intersectRaycaster(Cu)[0];if(Ou){var Du=ta(Ru,function(Ju){var _h=Tu.work.observers[Ju].standingPosition.clone();return _h.clone().sub(Tu.camera.position).setY(0).angleTo(Pu)>Math.PI/2?1/0:_h.distanceTo(Ou.point)},!0),Fu=Du[0];Du[1]<this.panoTapTriggerRadius&&(Bu=Fu)}oo(Bu)&&(Bu=this.getForwardPanoIndexOrNot(Cu));for(var Vu=0,ku=this.locationMotion.keyframes;Vu<ku.length;Vu++){var Nu=ku[Vu],Gu=this.panoResourceFromLocationMotionKeyframe(Nu);if(!(Nu.progress<this.locationMotion.progress)&&Gu.panoIndex===Bu){Bu=null;break}}if(this.emit("panoSelected",Bu),oo(Bu))return this.locationMotion.ended===!0&&this.cameraBounce(),Bu;var ju=this.work.observers[Bu];if(!ju.active)return this.panoMeshes[Bu]&&(this.panoMeshes[Bu].setDisabled(!1),this.panoMeshes[Bu].setLoading(!0)),Bu;for(var Hu={effect:"fade"},Uu=Math.PI/6,zu=Math.PI/12,Wu=new r$a.Vector3(0,1,0),Qu=ju.position.clone().setY(0).sub(Lu.position.clone().setY(0)).normalize(),Ku=Qu.clone().applyAxisAngle(Wu,Uu),Yu=Qu.clone().applyAxisAngle(Wu,-Uu),Xc=[],_d=[],_f=[],qu=0,Xu=ju.accessibleNodes;qu<Xu.length;qu++)if((Fu=Xu[qu])!==this.currentPanoIndex&&Fu!==Bu){var Zu=this.work.observers[Fu].position.clone().sub(ju.position).setY(0);Qu.angleTo(Zu)<Uu?_f.push(Zu):Ku.angleTo(Zu)<Uu?Xc.push(Zu):Yu.angleTo(Zu)<Uu&&_d.push(Zu)}var _c=(_f.length>0?_f:t$8.__spreadArray(t$8.__spreadArray([],Xc,!0),_d,!0)).slice().sort(function(Ju,_h){return Ju.angleTo(Qu)-_h.angleTo(Qu)})[0];return _c&&_c.angleTo(Pu)>zu&&(Hu.longitude=Math.atan2(-_c.x,-_c.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Hu.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Hu.fov=this.defaultFov),this.emit("wantsMoveToPano",Bu,Hu,!0),Bu},$u.prototype.destroy=function(){_u.prototype.destroy.call(this)},$u.prototype.isReady=function(){return!1},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Bu,Lu,Ru=[],Ou=2;Ou<arguments.length;Ou++)Ru[Ou-2]=arguments[Ou];var Du={},Fu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Tu);var Vu=this.locationMotion.getKeyFrameSegment(Tu),ku=Vu[0],Nu=Vu[1],Gu=this.panoResourceFromLocationMotionKeyframe(ku),ju=this.panoResourceFromLocationMotionKeyframe(Nu),Hu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Uu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),zu=new r$a.Vector3().copy(Gu.position),Wu=new r$a.Vector3().copy(ju.position),Qu=this.locationMotion.value.count-Nu.value.count+1;Du.modelAlpha=this.locationMotion.value.modelAlpha,Du.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Du.useBlackTransition=ju.effect==="instant",ju.leftPanoPicture&&(Qu<1?Gu.leftPanoPicture&&(Du.pano0=Gu.leftPanoPicture):Du.pano0=ju.leftPanoPicture,Du.pano1=ju.leftPanoPicture),ju.effect==="fade"&&(Du.pano0&&Gu.leftPanoPicture&&(Du.pano0={map:Du.pano0.map,luminanceMap:Du.pano0.luminanceMap,matrix:Gu.leftPanoPicture.matrix.clone().setPosition(ju.position)}),zu.copy(Wu)),Du.progress=Qu,Fu.distance=this.locationMotion.value.distance,Fu.offset=new r$a.Vector3(zu.x+(Wu.x-zu.x)*Qu,zu.y+(Wu.y-zu.y)*Qu,zu.z+(Wu.z-zu.z)*Qu);for(var Ku=[],Yu=[],Xc=0,_d=this.locationMotion.keyframes;Xc<_d.length;Xc++){var _f=_d[Xc],qu=_f.key,Xu=_f.progress;qu!==void 0&&(Ku.push(qu),Xu>=this.locationMotion.progress&&Yu.push(qu))}for(var Zu=0,_c=Object.keys(this.panoResources);Zu<_c.length;Zu++){var Ju=_c[Zu];if(!(Yu.indexOf(Ju)>=0)){var _h=this.panoResources[Ju];if(_h.leftPanoPicture){var ep=_h.leftPanoPicture.map;if(ep){if(ep===((Pu=Du.pano0)===null||Pu===void 0?void 0:Pu.map)||ep===((Bu=Du.pano1)===null||Bu===void 0?void 0:Bu.map))continue;ep.dispose(),(Lu=_h.leftPanoPicture.luminanceMap)===null||Lu===void 0||Lu.dispose(),_h.leftPanoPicture=null}}Ku.indexOf(Ju)>=0||delete this.panoResources[Ju]}}Gu.workCode===ju.workCode?this.currentPanoIndex=Qu<.5?Gu.panoIndex:ju.panoIndex:this.currentPanoIndex=ju.panoIndex,this.emit("movingToPano",Uu.panoIndex,Hu.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Tu),Fu.longitude=this.cameraMotion.value.longitude,Fu.latitude=this.cameraMotion.value.latitude,Fu.fov=this.cameraMotion.value.fov),ia$1(Du)===!1&&(this.model.setMaterial(Du),this.boundingMesh.setMaterial(Du)),ia$1(Fu)===!1&&this.setCamera(Fu),Ru[0];var tp=Ru[1];if(tp)if(this.xrManager.session){var rp=this.xrManager.referenceSpace;if(rp){var dp=this.xrManager.cameraVR,cp=this.xrManager.cameraL,Sp=this.xrManager.cameraR,yp=[cp,Sp],Bp=tp.getViewerPose(rp),_p=new r$a.Vector3(0,0,0);if(Bp){var Cp=void 0;switch(this.xrManager.machineType){case"Pico":Cp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var Ep=this.xrManager.session.renderState.layers;Ep&&(Cp=Ep[0]);break;default:this.xrManager.machineType}var ap=Bp.views;if(!Cp)return void console.error("no layer found");this.renderer.setFramebuffer(Cp.framebuffer);var ip=!1;ap.length!==dp.cameras.length&&(dp.cameras.length=0,ip=!0);for(var hp=0;hp<ap.length;hp++){var up=ap[hp],pp=Cp.getViewport(up),gp=yp[hp];gp.matrix.fromArray(up.transform.matrix);var Ap=new r$a.Vector3,Mp=new r$a.Quaternion,Dp=new r$a.Vector3;gp.matrix.decompose(Ap,Mp,Dp);var $p=new r$a.Vector3,np=new r$a.Quaternion,sp=new r$a.Vector3;this.camera.matrix.decompose($p,np,sp),_p.copy($p),gp.matrix.compose($p,Mp,Dp),gp.projectionMatrix.fromArray(up.projectionMatrix),gp.viewport.set(pp.x,pp.y,pp.width,pp.height),hp===0&&dp.matrix.copy(gp.matrix),ip===!0&&dp.cameras.push(gp)}}var Pp=this.xrManager.session.inputSources;for(hp=0;hp<this.xrManager.controllers.length;hp++){var Tp=this.xrManager.controllers[hp],Np=Pp[hp];Tp.update(Np,tp,rp)}var Vp=this.xrManager.getController(0),Gp=Vp.position.add(_p);this.xrControllerRay.set(Gp,new r$a.Vector3(0,0,-1).applyEuler(Vp.rotation));var qp=this.model.intersectRaycaster(this.xrControllerRay);if(qp.length>=1&&qp[0].face){var Wp=qp[0].face.normal,Jp=Wp.clone().multiplyScalar(.05),Hp=qp[0].point.clone().add(Jp);this.intersectMesh.position.copy(Hp);var Kp=Hp.clone().add(Jp);if(this.intersectMesh.lookAt(Kp),Math.abs(Wp.y)>.99){var jp=this.camera.position.clone().sub(Hp);this.intersectMesh.rotation.z=-Math.atan2(jp.z,jp.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",qp[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var Yp=0;Yp<this.work.observers.length;Yp++)(tm=this.panoMeshes[Yp])&&(tm.visible=!1);else{var xp=this.work.observers[this.currentPanoIndex];if(xp){var Qp=xp.visibleNodes.concat(this.currentPanoIndex),Zp=this.getForwardPanoIndexOrNot();for(Yp=0;Yp<this.work.observers.length;Yp++){var tm,em=this.work.observers[Yp];if(tm=this.panoMeshes[Yp])if(em.loadable||em.active)if(Qp.indexOf(Yp)!==-1){tm.visible=!0;var lm=tm.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);tm.setCurrent(Zp===Yp),tm.setOpacity(lm<.01?0:ho(1.4/lm,.5,.7)),tm.updateTime&&tm.updateTime(Tu,Cu)}else tm.visible=!1,tm.setOpacity(0);else tm.visible=!1,tm.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},$u.prototype.render=function(){var Tu=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Tu)},$u.prototype.onPanGesture=function(){},$u.prototype.onTapGesture=function(){},$u.prototype.onPinchGesture=function(){},$u.prototype.onMouseMove=function(){},$u.prototype.onMouseOut=function(){},$u.prototype.panoResourceFromLocationMotionKeyframe=function(Tu){return this.panoResources[Tu.key]},$u.prototype.prepareForMoveToPano=function(Tu){var Cu=this,Pu={useXRBlackTransition:!0},Bu=_e$2(),Lu=0;return new Promise(function(Ru,Ou){var Du=setInterval(function(){if((Lu=Math.min(1,(_e$2()-Bu)/1e3))>=1)return Pu.useXRBlackTransition=!1,Pu.progress=0,Cu.model.setMaterial(Pu),clearInterval(Du),void Ru(!0);Pu.progress=Lu,Cu.model.setMaterial(Pu)},50)})},$u}(Xa),Jl=["Panorama","DepthPanorama","Model"],$l={Floorplan:Aa,Topview:ga$1,Panorama:Xa,VRPanorama:kl,Model:Dl,DepthPanorama:_l,Mapview:zl,XRPanorama:Zl};function eu(_u){for(var $u=0,Tu=Jl;$u<Tu.length;$u++){var Cu=Tu[$u];if(typeof _u=="string"){if(Cu===_u)return!0}else if(_u instanceof fa$1&&_u instanceof $l[Cu])return!0}return!1}var tu=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu(_u){for(var $u,Tu,Cu={},Pu=0,Bu=_u.split(/(\;|\,)/);Pu<Bu.length;Pu++){var Lu=Bu[Pu].split("="),Ru=($u=Lu[0])===null||$u===void 0?void 0:$u.trim(),Ou=(Tu=Lu[1])===null||Tu===void 0?void 0:Tu.trim();Ru&&Ou&&(Cu[Ru]=Ou)}return Cu}function nu(){for(var _u,$u=document.getElementsByTagName("meta"),Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];if(Cu.getAttribute("name")==="viewport"){var Pu=iu((_u=Cu.getAttribute("content"))!==null&&_u!==void 0?_u:""),Bu=Number(Pu["initial-scale"]);if(!isNaN(Bu))return Bu}}return 1}var ru=[351,63],ou=[20,20],su=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au=new Float32Array([0,0,1,0,0,1,1,1]),lu=new Uint8Array([0,1,2,1,3,2]),uu=new r$a.BufferGeometry;uu.setAttribute("position",new r$a.BufferAttribute(su,3)),uu.setAttribute("uv",new r$a.BufferAttribute(au,2)),uu.setIndex(new r$a.BufferAttribute(lu,1));var hu=new r$a.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu=new r$a.Mesh(uu,hu),du=new r$a.Scene;du.add(cu);var pu=new r$a.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu.position.set(0,0,.5),pu.lookAt(0,0,0);var fu=new r$a.Vector4,Au=new r$a.Vector4;function gu(_u){if(hu.map){var $u=_u.getViewport(fu),Tu=_u.getScissor(Au),Cu=_u.getScissorTest(),Pu=_u.autoClear;_u.setViewport(Tu.x+ou[0]/3,Tu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissor(Tu.x+ou[0]/3,Tu.y+ou[1]/3,ru[0]/3,ru[1]/3),_u.setScissorTest(!0),_u.autoClear=!1,_u.render(du,pu),_u.setViewport($u),_u.setScissor(Tu),_u.setScissorTest(Cu),_u.autoClear=Pu}else{var Bu=new r$a.Texture,Lu=new Image;Lu.onload=function(){Bu.image=Lu,Bu.wrapS=r$a.ClampToEdgeWrapping,Bu.wrapT=r$a.ClampToEdgeWrapping,Bu.minFilter=r$a.LinearFilter,Bu.needsUpdate=!0,hu.needsUpdate=!0,Lu.onload=function(){}},Lu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu.map=Bu}}var mu=new r$a.Box3(new r$a.Vector3(-50,-50,-50),new r$a.Vector3(50,50,50)),vu=function(_u){return _u.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu=new r$a.Vector2,bu=new r$a.Frustum,xu=new r$a.Matrix4,wu=new WeakMap,Eu=new WeakMap,Mu=function(_u){function $u(Tu){Tu===void 0&&(Tu={});var Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu=this;if((Gu=_u.call(this)||this).ident=Kr(),Iu.instances[Gu.ident]=Gu,Gu.renderSwitch01=0,Gu.panoIndex=0,Gu.needsRender=!1,Gu.onlyRenderIfNeeds=(Cu=Tu.onlyRenderIfNeeds)===null||Cu===void 0||Cu,Gu.imageOptions=t$8.__assign({},(Pu=Tu.imageOptions)!==null&&Pu!==void 0?Pu:{}),Gu.textureOptions=t$8.__assign({},(Bu=Tu.textureOptions)!==null&&Bu!==void 0?Bu:{}),Gu.poweredByRealsee=(Lu=Tu.poweredByRealsee)===null||Lu===void 0||Lu,Gu.extraElements=[],Gu.controllerInits={Panorama:Object.assign({},Tu.panorama),Model:Object.assign({},Tu.model),Floorplan:Object.assign({},Tu.floorplan),Topview:Object.assign({},Tu.topview),Mapview:Object.assign({},Tu.mapview),DepthPanorama:Object.assign({},Tu.depthPanorama),VRPanorama:Object.assign({},Tu.vrPanorama),XRPanorama:Object.assign({},Tu.xrPanorama)},Gu.fps={testCount:0,testTime:_e$2()},Gu.modeChangeDuration=(Ru=Tu.modeChangeDuration)!==null&&Ru!==void 0?Ru:800,Gu.panoramaLikeSavedPose={},typeof window!="undefined")if(Tu.renderer)Tu.renderer instanceof It&&Gu.throwError(new Error("cannot render a internal renderer")),Gu.renderer=Tu.renderer;else try{Gu.renderer=new It({preserveDrawingBuffer:Tu.preserveDrawingBuffer,backgroundColor:Tu.backgroundColor,backgroundAlpha:Tu.backgroundAlpha,antialias:Tu.antialias,webgl2:Tu==null?void 0:Tu.webgl2});var ju=nu();Gu.renderer.setPixelRatio(ju===1?window.devicePixelRatio:1),Gu.renderer.setSize(512,512)}catch(_f){_f instanceof Error&&Gu.throwError(_f)}Gu.getPixelsRenderTarget=new r$a.WebGLRenderTarget(1,1,{encoding:(Du=(Ou=Gu.renderer)===null||Ou===void 0?void 0:Ou.outputEncoding)!==null&&Du!==void 0?Du:r$a.sRGBEncoding}),Gu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Tu.scissor),Gu.camera=new Lt$1(80),Gu.scene=new St$1,Gu.lastLoadWorkTask=Promise.resolve(),Gu.requestProxy=(Fu=Tu.requestProxy)!==null&&Fu!==void 0?Fu:vu,Gu.networkSubscribe=new tt$1,Gu.networkSubscribe.on("network",function(_f,qu,Xu,Zu){var _c;Gu.emit("network",_f,qu,Xu,Zu),(_c=Gu.analysis)===null||_c===void 0||_c.network(Gu.work,_f,qu,Xu,Zu)}),Gu.model=new uo({allowHosts:[],requestProxy:Gu.requestProxy,networkSubscribe:Gu.networkSubscribe});var Hu=Ks(mu);Hu.name="model_empty",Gu.model.add(Hu),Gu.model.visible=!1,Gu.readyCallbacks=[],Gu.modelPending=!1,Gu.syncingState=!1,Gu.scene.add(Gu.model),Gu.helperGroup=new r$a.Group,Gu.helperGroup.name="helper",Gu.scene.add(Gu.helperGroup),Gu.videoTexture=new r$a.VideoTexture(Tu.videoInstance||function(){var _f=document.createElement("video");_f.loop=!0,_f.autoplay=!0,_f.playsInline=!0,_f.muted=!0,_f.crossOrigin="";var qu=function(){document.removeEventListener("touchstart",qu,!1),document.removeEventListener("mousedown",qu,!1),_f.muted=!1};return document.addEventListener("touchstart",qu,!1),document.addEventListener("mousedown",qu,!1),_f}()),function(_f){(qu=new r$a.DirectionalLight(16777215,.5)).position.copy(new r$a.Vector3(1,1,1)),_f.add(qu);var qu=new r$a.DirectionalLight(16777215,.3);_f.add(qu),qu=new r$a.AmbientLight(16777215,.3),_f.add(qu)}(Gu.scene),Gu.state={mode:(Vu=Gu.currentMode)!==null&&Vu!==void 0?Vu:"Panorama",panoIndex:(ku=Gu.panoIndex)!==null&&ku!==void 0?ku:0,longitude:Gu.camera.pose.longitude,latitude:Gu.camera.pose.latitude,fov:Gu.camera.pose.fov,offset:Gu.camera.pose.offset.clone(),distance:Gu.camera.pose.distance},Gu.stateSynced=!1,Gu._enableIOSEDR=!1,Gu.destroyed=!1,Gu.paused=!0,typeof window!="undefined"&&(Tu.play!==!1&&Gu.play(),((Nu=Tu.initialBasisLoader)!==null&&Nu!==void 0&&Nu)!==!1&&(typeof Tu.initialBasisLoader=="string"?Gu.initBasisLoader(Tu.initialBasisLoader):Gu.initBasisLoader()),Gu.stopAnimationLoop=at$1.shared.add(function(_f,qu){for(var Xu=[],Zu=2;Zu<arguments.length;Zu++)Xu[Zu-2]=arguments[Zu];Gu.updateTime.apply(Gu,t$8.__spreadArray([_f,qu],Xu,!1))},!1,0,10));var Uu=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Gu.currentMode==="VRPanorama"&&Gu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Uu,!1),Gu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Uu,!1)},Gu.plugins={},Tu.plugins&&Tu.plugins.length)for(var zu=0,Wu=Tu.plugins;zu<Wu.length;zu++){var Qu=Wu[zu];if(typeof Qu=="function")Qu(Gu);else if(Array.isArray(Qu)){var Ku=Qu[0],Yu=Qu[1],Xc=Qu[2];if(typeof Ku=="function"){var _d=Ku(Gu,Xc);typeof Yu=="string"&&(Gu.plugins[Yu]?Gu.throwError(new Error("plugin name ".concat(Yu," is exists."))):Gu.plugins[Yu]=_d)}}}return Gu}return t$8.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.dispose=function(){var Tu,Cu;if(this.destroyed!==!0){delete Iu.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Tu=this.renderer)===null||Tu===void 0||Tu.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Pu=this.getElement();Pu&&Pu.parentNode&&Pu.parentNode.removeChild(Pu),this.scene.remove(this.model);var Bu=this.model.getMaterial();Bu&&(Bu.pano0&&Bu.pano0.map.dispose(),Bu.pano1&&Bu.pano1.map!==((Cu=Bu.pano0)===null||Cu===void 0?void 0:Cu.map)&&Bu.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},$u.prototype.setScissor=function(Tu){Object.assign(this.scissor,Tu),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty($u.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Tu){this.helperGroup.visible!==Tu&&(this.helperGroup.visible=Tu,this.emit("helpersVisibleChange",Tu),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Tu){this._enableIOSEDR!==Tu&&(this._enableIOSEDR=Tu,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty($u.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Tu){var Cu,Pu;if(Tu){if(!this.screenBuffer){var Bu=this.getDrawingBufferSize(yu);this.screenBuffer=new r$a.WebGLRenderTarget(Bu.x,Bu.y,{encoding:(Pu=(Cu=this.renderer)===null||Cu===void 0?void 0:Cu.outputEncoding)!==null&&Pu!==void 0?Pu:r$a.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),$u.prototype.updateConfiguration=function(Tu){var Cu=!1;Tu.panorama&&(Object.assign(this.controllerInits.Panorama,Tu.panorama),this.currentMode==="Panorama"&&(Cu=!0)),Tu.model&&(Object.assign(this.controllerInits.Model,Tu.model),this.currentMode==="Model"&&(Cu=!0)),Tu.floorplan&&(Object.assign(this.controllerInits.Floorplan,Tu.floorplan),this.currentMode==="Floorplan"&&(Cu=!0)),Tu.topview&&(Object.assign(this.controllerInits.Topview,Tu.topview),this.currentMode==="Topview"&&(Cu=!0)),Tu.mapview&&(Object.assign(this.controllerInits.Mapview,Tu.topview),this.currentMode==="Mapview"&&(Cu=!0)),Tu.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Tu.depthPanorama),this.currentMode==="DepthPanorama"&&(Cu=!0)),Tu.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Tu.vrPanorama),this.currentMode==="VRPanorama"&&(Cu=!0)),Tu.imageOptions&&(Object.assign(this.imageOptions,Tu.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Cu=!0)),Cu&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},$u.prototype.appendTo=function(Tu,Cu){if(Cu===void 0&&(Cu={}),this.renderer)if(this.renderer instanceof It){var Pu=this.getElement();if(Pu){Tu.appendChild(Pu),this.refresh(Cu);var Bu=window.getComputedStyle(Tu).position;Bu!=="relative"&&Bu!=="absolute"&&Bu!=="fixed"&&Bu!=="sticky"&&(Tu.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},$u.prototype.refresh=function(Tu,Cu){if(Tu===void 0&&(Tu={}),this.renderer){var Pu=this.getElement();if(Pu){var Bu=Pu.parentNode;if(Bu&&Bu.nodeName){var Lu=Tu.width,Ru=Lu===void 0?Bu.offsetWidth:Lu,Ou=Tu.height,Du=Ou===void 0?Bu.offsetHeight:Ou;this.renderer instanceof It&&(Cu&&this.renderer.setPixelRatio(Cu),this.renderer.setSize(Ru,Du))}var Fu=this.renderer.getSize(new r$a.Vector2);this.camera.aspect=Fu.x*this.scissor.width/(Fu.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},$u.prototype.addExtraElement=function(Tu){var Cu=this;return this.extraElements.indexOf(Tu)===-1&&(this.extraElements.push(Tu),this.controller&&this.controller.bindExtraElement(Tu)),function(){return Cu.removeExtraElement(Tu)}},$u.prototype.removeExtraElement=function(Tu){var Cu=this.extraElements.indexOf(Tu);Cu!==-1&&(this.extraElements.splice(Cu,1),this.controller&&this.controller.unbindExtraElement(Tu))},$u.prototype.getPose=function(){var Tu=this.camera.copyPose(),Cu=Tu.longitude,Pu=Tu.latitude,Bu=Tu.fov,Lu=Tu.offset,Ru=Tu.distance;return{longitude:Cu,latitude:Pu,fov:Bu,offset:Lu.clone(),distance:Ru}},$u.prototype.getSize=function(Tu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Tu),Tu.x*=this.scissor.width,Tu.y*=this.scissor.height,Tu},$u.prototype.getDrawingBufferSize=function(Tu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Tu),Tu.x*=this.scissor.width,Tu.y*=this.scissor.height,Tu},$u.prototype.updateCamera=function(Tu,Cu,Pu){return Pu===void 0&&(Pu=!0),this.controller?this.controller.updateCamera(Tu,Cu,Pu):Promise.reject(new Error("controller is not initialized."))},$u.prototype.getLongitudeAndLatitude=function(){var Tu=this.getPose();return{longitude:Tu.longitude,latitude:Tu.latitude}},$u.prototype.getOffset=function(){return this.getPose().offset},$u.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Tu=this.work.observers[this.panoIndex],Cu=new r$a.Object3D;return Cu.position.copy(Tu.position),Cu.quaternion.copy(Tu.quaternion),Cu.scale.set(1,1,1),Cu.updateMatrixWorld(!0),function(Pu,Bu){var Lu=new r$a.Vector3(0,0,-1);Lu.applyQuaternion(Pu.quaternion);var Ru=Bu.quaternion.clone().inverse();return Lu.applyQuaternion(Ru),{theta:Math.atan2(Lu.x,-Lu.z),phi:-Math.asin(Lu.y),lookAtVector:Lu}}(this.camera,Cu)}},$u.prototype.initBasisLoader=function(Tu){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Tu=="string"&&Ei.setTranscoderPath(Tu),Ei.workerConfig.format||Ei.detectSupport(this.renderer),Ei._allocateWorker(0)}catch(Cu){Cu instanceof Error&&this.throwError(Cu)}},Object.defineProperty($u.prototype,"work",{get:function(){var Tu=Eu.get(this);if(Tu&&wo.get(Tu))return Tu},enumerable:!1,configurable:!0}),$u.prototype.load=function(Tu,Cu,Pu,Bu){var Lu=this;if(Bu===void 0&&(Bu=!0),!this.renderer)throw new Error("renderer is not initialized");var Ru=this.lastLoadWorkTask.then(function(){return!(Ou=Tu)||typeof Ou!="object"&&typeof Ou!="function"||typeof Ou.then!="function"?Lu.load_(Tu,Cu,Pu,Bu):Tu.then(function(Du){return Lu.load_(Du,Cu,Pu,Bu)});var Ou});return this.lastLoadWorkTask=Ru.catch(function(Ou){Lu.throwError(Ou)}),Ru},$u.prototype.load_=function(Tu,Cu,Pu,Bu){var Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju=this;Bu===void 0&&(Bu=!0);var Hu,Uu,zu,Wu=Co(Tu),Qu=this.work;Cu===void 0&&(Cu=Qu?"inherit":"initial"),Cu==="inherit"?(Hu=typeof this.panoIndex=="number"&&Wu.observers[this.panoIndex]?this.panoIndex:Wu.initial.panoIndex,Uu=(Lu=this.currentMode)!==null&&Lu!==void 0?Lu:Wu.initial.mode,zu={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Cu==="initial"?(Uu=(Ru=this.currentMode)!==null&&Ru!==void 0?Ru:Wu.initial.mode,Hu=Wu.initial.panoIndex,zu=Uu===$u.Mode.Panorama||Uu===$u.Mode.DepthPanorama||Uu===$u.Mode.Model||Uu===$u.Mode.VRPanorama||Uu===$u.Mode.XRPanorama?{longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,fov:Wu.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Hu=(Ou=Cu.panoIndex)!==null&&Ou!==void 0?Ou:Wu.initial.panoIndex,Uu=(Fu=(Du=Cu.mode)!==null&&Du!==void 0?Du:this.currentMode)!==null&&Fu!==void 0?Fu:"Panorama",zu={longitude:(Vu=Cu.longitude)!==null&&Vu!==void 0?Vu:Wu.initial.longitude,latitude:(ku=Cu.latitude)!==null&&ku!==void 0?ku:Wu.initial.latitude,fov:(Nu=Cu.fov)!==null&&Nu!==void 0?Nu:Wu.initial.fov}),this.emit("willLoad",Tu,Wu,{panoIndex:Hu,mode:Uu,longitude:zu.longitude,latitude:zu.latitude,fov:zu.fov});var Ku=function(){var Xc;ju.panoIndex=Hu,ju.panoramaLikeSavedPose.longitude=Wu.initial.longitude,ju.panoramaLikeSavedPose.latitude=Wu.initial.latitude,ju.panoramaLikeSavedPose.fov=Wu.initial.fov;var _d=ju.controller?Pu!=null?Pu:ju.modeChangeDuration:0,_f=t$8.__assign(t$8.__assign({initial:[Hu,zu,_d,Bu]},ju.commonParams()),ju.controllerInits[Uu]);ju.controller?ju.controller.updateWork(Wu,Hu,zu,_d,Bu)===!1&&(ju.controller.destroy(),ju.controller=ju.applyController(Uu,_f)):ju.controller=ju.applyController(Uu,_f),ju.emit("load",Tu,Wu,{panoIndex:Hu,mode:Uu,longitude:zu.longitude,latitude:zu.latitude,fov:zu.fov}),(Xc=ju.analysis)===null||Xc===void 0||Xc.work(Wu)},Yu=function(Xc){var _d;Xc===void 0&&(Xc=Qe),Wu.model&&(ju.model.name!==((_d=Wu.model)===null||_d===void 0?void 0:_d.file)?(ju.emit("modelWillLoad",Wu.model),ju.loadModel(Wu.model,Wu.allowHosts,Xc,!0)):Xc&&Xc())};return Eu.set(this,Wu),Uu===$u.Mode.Floorplan||Uu===$u.Mode.Topview||Uu===$u.Mode.Mapview||Uu===$u.Mode.Model?Yu(function(){Ku(),ju.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Wu.initial.fov,longitude:Wu.initial.longitude,latitude:Wu.initial.latitude,offset:Wu.observers[Wu.initial.panoIndex].position}),this.needsRender=!0),Ku(),(Gu=this.controller)===null||Gu===void 0||Gu.once("panoLoaded",function(){ju.needsRender=!0,ju.emit("cameraUpdate",ju.camera.copyPose(),Bu),Yu()})),this.ready().then(function(){ju.emit("loaded",Tu,ju.work)})},$u.prototype.changeMode=function(Tu,Cu,Pu,Bu,Lu){var Ru=this;if(Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=this.modeChangeDuration),Bu===void 0&&(Bu=!0),Lu===void 0&&(Lu=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Ou,Du){if(!$u.Mode.hasOwnProperty(Tu)){var Fu=new Error('mode "'.concat(Tu,'" is not existed'));return Ru.throwError(Fu),void Du(Fu)}if((Tu===$u.Mode.Floorplan||Tu===$u.Mode.Topview||Tu===$u.Mode.Mapview||Tu===$u.Mode.Model)&&(oo(Ru.model)||Ru.model.loaded!==!0))return Fu=new Error("model is not ready."),Ru.throwError(Fu),void Du(Fu);if(oo(Ru.controller))return Fu=new Error("controller is not ready."),Ru.throwError(Fu),void Du(Fu);var Vu=Ru.controller,ku=Ru.currentMode,Nu=function(){var ju,Hu,Uu,zu;if(Ru.emit("wantsChangeMode",Tu,ku))Du(new Error("change mode canceled."));else{if(Ru.controller&&Lu===!1&&ku===Tu)Tu===$u.Mode.Panorama||Tu===$u.Mode.DepthPanorama||Tu===$u.Mode.Model||Tu===$u.Mode.VRPanorama||Tu===$u.Mode.XRPanorama?typeof Cu.panoIndex=="number"&&Cu.panoIndex!==Ru.panoIndex?Ru.controller.moveToPano((Hu=(ju=Cu.panoIndex)!==null&&ju!==void 0?ju:Ru.panoIndex)!==null&&Hu!==void 0?Hu:0,t$8.__assign({duration:Pu},Cu),Bu):Ru.controller.updateCamera(Cu,Pu,Bu).catch(Qe):(typeof Cu.panoIndex=="number"&&Cu.panoIndex!==Ru.panoIndex&&(Ru.panoIndex=Cu.panoIndex),Ru.controller.updateCamera(Cu,Pu,Bu).catch(Qe));else{Vu.destroy();var Wu=(zu=(Uu=Cu.panoIndex)!==null&&Uu!==void 0?Uu:Ru.panoIndex)!==null&&zu!==void 0?zu:0,Qu=eu(Tu)?Ru.panoramaLikeSavedPose:{};Tu===$u.Mode.Mapview&&(Qu.longitude=Ru.panoramaLikeSavedPose.longitude),typeof Cu.longitude!="number"&&typeof Cu.latitude!="number"||(Qu.longitude=Cu.longitude,Qu.latitude=Cu.latitude),typeof Cu.fov=="number"&&(Qu.fov=Cu.fov);var Ku=t$8.__assign(t$8.__assign({initial:[Wu,Qu,Pu,Bu]},Ru.commonParams()),Ru.controllerInits[Tu]);Ru.saveControllerPose(Vu),Ru.controller=Ru.applyController(Tu,Ku);var Yu=$l[Tu].initAnimationEndPose(Ku);Ru.emit("modeChange",Tu,ku,Wu,Yu,Bu)}Ou()}};if(Tu===$u.Mode.VRPanorama)Ru.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(ju){if(ju=="granted")return Promise.resolve();var Hu=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Hu)}):Promise.resolve()).then(function(){return Nu()}).catch(function(ju){ju instanceof Error&&(Ru.exitFullscreen(),Ru.throwError(ju),Du(ju))});else if(Tu===$u.Mode.XRPanorama){var Gu=at$1.shared.getContext();Gu?Gu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(Hu){return Hu?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(Hu){return Promise.resolve(Hu)})});var ju=new Error("Request XR Permission denied.");return Promise.reject(ju)}().then(function(ju){at$1.shared.setContext(ju),Nu()}).catch(function(ju){ju instanceof Error&&(Ru.throwError(ju),Du(ju))}),Ru.on("webXRSessionEnd",function(){Ru.changeMode("Panorama")})}else Nu()})},$u.prototype.getPixels=function(Tu,Cu,Pu,Bu,Lu){if(Lu===void 0&&(Lu=1),!this.renderer)throw new Error("renderer is not initialized.");var Ru=this.getPixelsRenderTarget,Ou=this.renderer.getSize(new r$a.Vector2);Tu=ho(Tu,Math.floor(Pu/2),Math.floor(Ou.x-Pu)),Cu=ho(Cu,Math.floor(Bu/2),Math.floor(Ou.y-Bu)),Ru.setSize(Pu*Lu,Bu*Lu),this.renderer.setRenderTarget(Ru),this.camera.setViewOffset(Ou.width,Ou.height,Tu,Ou.height-Cu-Bu,Pu,Bu),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var Du=new Uint8Array(Pu*Lu*Bu*Lu*4);return this.renderer.readRenderTargetPixels(Ru,0,0,Pu*Lu,Bu*Lu,Du),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),Du},$u.prototype.getElement=function(){var Tu;return(Tu=this.renderer)===null||Tu===void 0?void 0:Tu.domElement},$u.prototype.render=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu=!1),!this.renderer)return null;if(Cu){var Bu=this.renderer.getSize(yu);this.scene.traverseVisible(function(Ru){Ru.setResolution&&Ru.setResolution(Bu.x,Bu.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Lu=this.getDrawingBufferSize(yu);return this.screenBuffer.setSize(Lu.x,Lu.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu(this.renderer),this.renderer.setRenderTarget(null),Tu&&at$1.shared.add(Tu,!0),this.screenBuffer}return this.aroundScissor(function(){Pu.renderer&&(Pu.controller?Pu.controller.render():Pu.renderer.render(Pu.scene,Pu.camera),Pu.poweredByRealsee&&Pu.currentMode!=="VRPanorama"&&Pu.currentMode!=="XRPanorama"&&gu(Pu.renderer)),Tu&&at$1.shared.add(Tu,!0)}),null},$u.prototype.updateTime=function(Tu,Cu){for(var Pu,Bu=this,Lu=[],Ru=2;Ru<arguments.length;Ru++)Lu[Ru-2]=arguments[Ru];if(!this.destroyed){this.syncingState=this.syncState(Tu,Cu),this.controller&&(Pu=this.controller).updateTime.apply(Pu,t$8.__spreadArray([Tu,Cu],Lu,!1)),this.syncingState=!1;var Ou=new r$a.Vector2(512,512),Du=new r$a.Vector2(512,512);this.renderer&&(this.renderer.getSize(Ou),Ou.x*=this.scissor.width,Ou.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Du),Du.x*=this.scissor.width,Du.y*=this.scissor.height);var Fu=[];if(xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu.setFromProjectionMatrix(xu),this.scene.traverse(function(zu){if(zu.setResolution&&zu.setResolution(Ou.x,Ou.y),zu.mixer instanceof r$a.AnimationMixer){var Wu=wu.get(zu.mixer);Wu||(Wu=new r$a.Clock,wu.set(zu.mixer,Wu)),zu.mixer.update(Wu.getDelta())}(zu instanceof r$a.Mesh||zu instanceof r$a.Line||zu instanceof r$a.Points)&&(zu instanceof r$a.ImmediateRenderObject||!zu.frustumCulled||bu.intersectsObject(zu))&&Fu.push(zu)}),Du.width*Du.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Vu=void 0;if(this.onlyRenderIfNeeds!==!0)Vu=this.render();else{for(var ku=0,Nu=Fu;ku<Nu.length;ku++){var Gu=Nu[ku],ju=function(zu){zu.needsRender===!0?(zu.needsRender=!1,Bu.needsRender=!0):zu.mixer&&zu.mixer.stats.actions.inUse>0&&(Bu.needsRender=!0)};ju(Gu),Gu.traverseAncestors(ju)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Vu=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Bu.controller.postProcessing(Bu.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Vu!==void 0)}if(this.fps.testTime&&Tu-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Tu,this.fps.testCount=0,this.renderer){var Hu=this.renderer.getContext(),Uu=Us(Hu);Uu&&this.throwError(Uu)}}},$u.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It&&this.renderer.clear(!0,!0,!0)},$u.prototype.play=function(){this.needsRender=!0,this.paused=!1},$u.prototype.moveToPano=function(Tu,Cu,Pu){Cu===void 0&&(Cu={}),Pu===void 0&&(Pu=!0);var Bu=this,Lu=Bu.controller,Ru=Bu.currentMode,Ou=Bu.renderer;return Lu?Ou?(Ru===$u.Mode.Floorplan||Ru===$u.Mode.Topview||Ru===$u.Mode.Mapview?oo(Tu)||(this.panoIndex=Tu,this.changeMode($u.Mode.Panorama,Cu,void 0,Pu)):Lu.moveToPano(Tu,Cu,Pu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},$u.prototype.preloadPano=function(Tu,Cu){var Pu=this;if(Cu===void 0&&(Cu=Qe),!this.work)return Promise.reject(new Error("work never loaded"));var Bu=this.work.observers[Tu],Lu=this.work.allowHosts,Ru=_e$2();return Promise.all(["right","left","up","down","front","back"].map(function(Ou){var Du=t$8.__assign({key:"pano.".concat(Tu,".").concat(Ou),basisLoaderInitialized:Ei.isInitialized()},ii(Pu.imageOptions,["size","format","quality","mappings"])),Fu=Bu.images[Ou];return function(Vu,ku){ku===void 0&&(ku={});var Nu=_e$2(),Gu=Vu;return Promise.resolve().then(function(){return ku.requestProxy?ku.requestProxy(Vu):Vu}).then(function(ju){return/^https\:/.test(location.href)&&/^http\:/.test(ju)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(ju,"'. This request was automatically upgraded to HTTPS")),ju.replace(/^http\:/,"https:")):ju}).catch(function(ju){var Hu,Uu=new Ge$1(Gu,"Link",ju&&ju.message?String(ju.message):String(ju));return(Hu=ku.networkSubscribe)===null||Hu===void 0||Hu.emit("network",Vu,"Link","proxy-error",Uu.message),Promise.reject(Uu)}).then(function(ju){return ju in nt$1?nt$1[ju]:nt$1[ju]=new Promise(function(Hu,Uu){var zu,Wu=ku.allowHosts?je$1.concat(ku.allowHosts):je$1.slice(),Qu=et$1(ju);if(location.hostname.length!==0&&!ze$1(location.hostname)&&je$1.filter(function(_f){return Ke(_f,location.hostname)}).length===0&&!ze$1(Qu)&&Wu.filter(function(_f){return Ke(_f,Qu)}).length===0){var Ku=new Ye(ju,"Link","request host(".concat(Qu,") is not allowed"));return Uu(Ku),void((zu=ku.networkSubscribe)===null||zu===void 0||zu.emit("network",ju,"Link","forbidden",Ku.message))}var Yu=document.createElement("link");Yu.href=ju,Yu.rel=Yu.relList&&Yu.relList.supports("prefetch")?"prefetch":"preload",Yu.as="fetch",Yu.crossOrigin="";var Xc=document.head||document.getElementsByTagName("head")[0];Xc&&Xc.appendChild(Yu);var _d=!1;Yu.onload=function(){var _f;if(_d!==!0){_d=!0,Hu();var qu=_e$2(),Xu={origin:Gu,source:ju,requestTime:Nu,responseTime:qu,costs:qu-Nu,headers:{}};(_f=ku.networkSubscribe)===null||_f===void 0||_f.emit("network",ju,"Link","preload",JSON.stringify(Xu))}},Yu.onerror=function(_f){var qu;if(_d!==!0){_d=!0;var Xu=new We(ju,"Link",0);Uu(Xu),(qu=ku.networkSubscribe)===null||qu===void 0||qu.emit("network",ju,"Link","error",Xu.message)}}})})}(Pu.imageOptions.transform?Pu.imageOptions.transform(Fu,Du):ct$1(Fu,Du),{allowHosts:Lu,requestProxy:Pu.requestProxy,networkSubscribe:Pu.networkSubscribe})})).then(function(){var Ou=_e$2()-Ru;return Cu(Ou),Ou})},$u.prototype.project2d=function(Tu,Cu){if(Cu===void 0&&(Cu=!1),!this.renderer)return null;if(this.model.empty===!1&&Cu){var Pu=this.camera.position,Bu=Tu.clone().sub(Pu),Lu=new r$a.Raycaster(Pu,Bu.clone().normalize()),Ru=this.model.intersectRaycaster(Lu)[0];if(Ru&&Ru.distance+.01<Bu.length())return null}var Ou=Tu.clone().project(this.camera);if(Math.abs(Ou.z)>1)return null;var Du=this.renderer.getSize(new r$a.Vector2),Fu=Du.x*this.scissor.width,Vu=Du.y*this.scissor.height,ku=Du.x*this.scissor.left+(Ou.x+1)/2*Fu,Nu=Du.y*(1-this.scissor.bottom-this.scissor.height)+(1-Ou.y)/2*Vu;return new r$a.Vector2(ku,Nu)},$u.prototype.getRenderObjects=function(Tu){xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu.setFromProjectionMatrix(xu),Tu||(Tu=this.scene);var Cu=[];return Tu.traverseVisible(function(Pu){(Pu instanceof r$a.Mesh||Pu instanceof r$a.Line||Pu instanceof r$a.Points)&&(Pu instanceof r$a.ImmediateRenderObject||!Pu.frustumCulled||bu.intersectsObject(Pu))&&Cu.push(Pu)}),Cu},$u.prototype.getCurrentState=function(){return t$8.__assign(t$8.__assign({},this.getPose()),{mode:this.currentMode||$u.Mode.Panorama,panoIndex:this.panoIndex||0})},$u.prototype.setState=function(Tu,Cu,Pu){var Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu;Cu===void 0&&(Cu=!1),Pu===void 0&&(Pu=!0),!(Tu=Object.assign({},Tu)).offset||Tu instanceof r$a.Vector3||(Tu.offset=new r$a.Vector3(Tu.offset.x,Tu.offset.y,Tu.offset.z));var Gu,ju,Hu,Uu,zu,Wu=(Bu=Tu.panoIndex)!==null&&Bu!==void 0?Bu:this.state.panoIndex,Qu=(Lu=Tu.mode)!==null&&Lu!==void 0?Lu:this.state.mode;if(this.work)if(this.work.observers[Wu])if(Tu.mode!==$u.Mode.Floorplan&&Tu.mode!==$u.Mode.Topview&&Tu.mode!==$u.Mode.Mapview&&Tu.mode!==$u.Mode.Model||!oo(this.model)&&this.model.loaded===!0){if(this.state.mode!==Qu){if(Qu==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var Ku=void 0;Ku=eu(this.state.mode)&&eu(Qu)?t$8.__assign({},this.state):eu(Qu)?t$8.__assign({},this.panoramaLikeSavedPose):Qu===$u.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$8.__assign({},Tu),typeof Tu.longitude=="number"&&(Ku.longitude=Tu.longitude),typeof Tu.latitude=="number"&&(Ku.latitude=Tu.latitude),typeof Tu.fov=="number"&&(Ku.fov=Tu.fov);var Yu=t$8.__assign(t$8.__assign({initial:[Wu,Ku,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Qu]),Xc=$l[Qu].initAnimationEndPose(Yu);Gu=Xc.longitude,ju=Xc.latitude,Hu=Xc.fov,Uu=Xc.offset,zu=Xc.distance}else Gu=(Ru=Tu.longitude)!==null&&Ru!==void 0?Ru:this.state.longitude,ju=(Ou=Tu.latitude)!==null&&Ou!==void 0?Ou:this.state.latitude,Hu=(Du=Tu.fov)!==null&&Du!==void 0?Du:this.state.fov,Uu=(Fu=Tu.offset)!==null&&Fu!==void 0?Fu:this.state.offset,zu=(Vu=Tu.distance)!==null&&Vu!==void 0?Vu:this.state.distance;var _d={panoIndex:Wu,mode:Qu,longitude:Gu,latitude:ju,fov:Hu,offset:Uu,distance:zu};this.emit("setState",_d),$s(this.state,_d)||(this.controller&&_d.mode==="VRPanorama"&&_d.mode!==this.state.mode?(Js(this.state,_d),this.changeMode("VRPanorama")):this.controller&&_d.mode==="XRPanorama"&&_d.mode!==this.state.mode?(Js(this.state,_d),this.changeMode("XRPanorama")):(Js(this.state,_d),this.controller&&(this.controller.userAction=Pu),Cu&&this.state.mode===_d.mode&&(this.syncingState=this.syncState(_e$2(),0,Cu),this.syncingState&&((ku=this.controller)===null||ku===void 0||ku.updateTime(_e$2(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Pu),(Nu=this.analysis)===null||Nu===void 0||Nu.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},$u.prototype.aroundScissor=function(Tu){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Cu=new r$a.Vector2,Pu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Pu){this.renderer.getSize(Cu);var Bu=Math.floor(Cu.x*this.scissor.left),Lu=Math.floor(Cu.y*this.scissor.bottom),Ru=Math.floor(Cu.x*this.scissor.width),Ou=Math.floor(Cu.y*this.scissor.height);this.renderer.setViewport(Bu,Lu,Ru,Ou),this.renderer.setScissor(Bu,Lu,Ru,Ou),this.renderer.setScissorTest(!0)}Tu(),Pu&&(this.renderer.setViewport(0,0,Cu.x,Cu.y),this.renderer.setScissor(0,0,Cu.x,Cu.y),this.renderer.setScissorTest(!1))}else Tu()},$u.prototype.syncState=function(Tu,Cu,Pu){Pu===void 0&&(Pu=!1);var Bu=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Lu={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Lu,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Ru=this.currentMode;if(!(Ru===$u.Mode.Floorplan||Ru===$u.Mode.Topview||Ru===$u.Mode.Mapview||Ru===$u.Mode.Model)||!this.modelPending){var Ou=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var Du=0,Fu=Ou;Du<Fu.length;Du++){var Vu=Fu[Du];this.controller instanceof $l.Panorama?Vu.tile!==!0||this.controller.isTileReady()?Vu():this.readyCallbacks.push(Vu):Vu()}}}if(this.controller instanceof $l.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var ku={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,ku,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return ku={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,ku,!1),!0;if(this.controller instanceof $l.Topview||this.controller instanceof $l.Mapview){var Nu=1,Gu=Pu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Nu),ju=Pu?new r$a.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$a.Vector3(Ys(this.camera.pose.offset.x,this.state.offset.x,.2),Ys(this.camera.pose.offset.y,this.state.offset.y,.2),Ys(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs(Gu,this.camera.pose.fov)||Hs(ju,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Gu},0).catch(Qe),this.controller.locationMotion.set({x:ju.x,y:ju.y,z:ju.z},0).catch(Qe),!0}else{Nu=1;var Hu=Math.PI/45,Uu=(Gu=Pu?this.state.fov:Ys(this.camera.pose.fov,this.state.fov,Nu),Pu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Qu,Ku,Yu){if(Qu.longitude===Ku.longitude&&Qu.latitude===Ku.latitude)return{longitude:Ku.longitude,latitude:Ku.latitude};var Xc=Gs(Qu.longitude),_d=Qu.latitude,_f=Gs(Ku.longitude),qu=Ku.latitude;_f-Xc>Ws?Xc+=Xs:Xc-_f>Ws&&(Xc-=Xs);var Xu=Yu/Math.sqrt(Math.pow(_f-Xc,2)+Math.pow(qu-_d,2));return Xu>=1?{longitude:Ku.longitude,latitude:Ku.latitude}:{longitude:Xc+(_f-Xc)*Xu,latitude:_d+(qu-_d)*Xu}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Hu)),zu=Uu.longitude,Wu=Uu.latitude;if(Vs(zu,this.camera.pose.longitude,2*Math.PI)||Vs(Wu,this.camera.pose.latitude)||Vs(Gu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:zu,latitude:Wu,fov:Gu},0).catch(Qe),!0}return this.stateSynced=!0,Bu===!1&&this.emit("stateSynced",this.state),!1},$u.prototype.ready=function(Tu){var Cu=this;return Tu===void 0&&(Tu={}),new Promise(function(Pu){var Bu;Cu.readyCallbacks.push(Object.assign(Pu,{tile:(Bu=Tu.tile)!==null&&Bu!==void 0&&Bu}))})},$u.prototype.requestFullscreen=function(){var Tu;if(Zs()){var Cu=(Tu=this.getElement())===null||Tu===void 0?void 0:Tu.parentNode;Cu&&"requestFullscreen"in Cu&&typeof document!="undefined"&&document.fullscreenElement===null&&Cu.requestFullscreen()}},$u.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},$u.prototype.throwError=function(Tu){this.hasListener("error")?this.emit("error",Tu):console.error(Tu)},$u.prototype.loadModel=function(Tu,Cu,Pu,Bu){var Lu=this,Ru=Tu.file;this.emit("modelWillLoad",Tu);var Ou=new uo({allowHosts:Cu,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});Ou.once("bvhLoaded",function(){var Du,Fu;Lu.destroyed||Ru===((Fu=(Du=Lu.work)===null||Du===void 0?void 0:Du.model)===null||Fu===void 0?void 0:Fu.file)&&Lu.emit("modelBvhLoaded",Ou)}),Ou.once("materialLoaded",function(){var Du,Fu;Lu.destroyed||Ru===((Fu=(Du=Lu.work)===null||Du===void 0?void 0:Du.model)===null||Fu===void 0?void 0:Fu.file)&&Lu.emit("modelMaterialLoaded",Ou)}),Ou.once("geometryLoaded",function(){var Du,Fu;Lu.destroyed||Ru===((Fu=(Du=Lu.work)===null||Du===void 0?void 0:Du.model)===null||Fu===void 0?void 0:Fu.file)&&(Ou.bounding.max.y-Ou.bounding.min.y<1.5&&(Ou.bounding.max.y=Ou.bounding.min.y+10),Lu.emit("modelGeometryLoaded",Ou))}),Ou.once("loaded",function(){var Du,Fu,Vu,ku;if(!Lu.destroyed&&Ru===((Fu=(Du=Lu.work)===null||Du===void 0?void 0:Du.model)===null||Fu===void 0?void 0:Fu.file)){var Nu,Gu=Lu.model;Gu&&(Gu.show(),Nu=Gu.getMaterial()||{},Lu.scene.remove(Gu),Gu.dispose(),Ou.setTransparent(Gu.getTransparent())),Nu&&Ou.setMaterial(Nu),Lu.model=Ou,Lu.scene.add(Ou),(Vu=Lu.controller)===null||Vu===void 0||Vu.updateModel(Ou),(ku=Lu.renderer)===null||ku===void 0||ku.compile(Lu.scene,Lu.camera),Lu.needsRender=!0,Lu.modelPending=!1,Pu(),Lu.emit("modelLoaded",Ou)}}),Ou.on("shownFloorChange",function(Du,Fu){var Vu,ku;Lu.destroyed||Ru===((ku=(Vu=Lu.work)===null||Vu===void 0?void 0:Vu.model)===null||ku===void 0?void 0:ku.file)&&Lu.emit("modelShownFloorChange",Du,Fu)}),Ou.on("error",function(Du){var Fu,Vu,ku,Nu;if(!Lu.destroyed&&Ru===((Vu=(Fu=Lu.work)===null||Fu===void 0?void 0:Fu.model)===null||Vu===void 0?void 0:Vu.file)){Ou.bounding.makeEmpty();for(var Gu=0,ju=Lu.work.observers;Gu<ju.length;Gu++){var Hu=ju[Gu];Ou.bounding.expandByPoint(Hu.standingPosition),Ou.bounding.expandByPoint(new r$a.Vector3().fromArray([Hu.position.x,2*Hu.position.y-Hu.standingPosition.y,Hu.position.z]))}var Uu=Ks(Ou.bounding,new r$a.Vector3(1,0,1));Uu.visible=!0,Uu.name="model_empty",Ou.add(Uu);var zu,Wu=Lu.model;Wu&&(Wu.show(),zu=Wu.getMaterial()||{},Lu.scene.remove(Wu),Wu.dispose(),Ou.setTransparent(Wu.getTransparent())),zu&&Ou.setMaterial(zu),Lu.model=Ou,Lu.scene.add(Ou),(ku=Lu.controller)===null||ku===void 0||ku.updateModel(Ou),(Nu=Lu.renderer)===null||Nu===void 0||Nu.compile(Lu.scene,Lu.camera),Lu.emit("modelLoadError",Du,Ou),Lu.throwError(Du),Lu.modelPending=!1,Pu()}}),this.modelPending=!0,Ou.load(Tu,this.textureOptions).catch(Qe)},$u.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},$u.prototype.saveControllerPose=function(Tu){Tu===void 0&&(Tu=this.controller),Tu&&eu(Tu)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},$u.prototype.applyController=function(Tu,Cu){var Pu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Bu=$l[Tu];Tu===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Tu===$u.Mode.Floorplan||Tu===$u.Mode.Topview||Tu===$u.Mode.Model||Tu===$u.Mode.Mapview),this.currentMode=Tu;for(var Lu=new Bu(Cu),Ru=function(Nu){Lu.on(Nu,function(){for(var Gu=[],ju=0;ju<arguments.length;ju++)Gu[ju]=arguments[ju];var Hu=Pu.emit.apply(Pu,t$8.__spreadArray([Nu],Gu,!1));if(Hu)return!1})},Ou=0,Du=tu;Ou<Du.length;Ou++)Ru(Du[Ou]);var Fu=$l[Tu].initAnimationEndPose(Cu),Vu=Cu.initial[3],ku={panoIndex:Cu.initial[0],mode:Tu,longitude:Fu.longitude,latitude:Fu.latitude,fov:Fu.fov,offset:Fu.offset,distance:Fu.distance};return $s(this.state,ku)||(Js(this.state,ku),this.emit("stateChange",this.state,Vu)),this.emit("currentStateChange",this.getCurrentState(),Vu),Lu.on("cameraUpdate",function(Nu,Gu){var ju;if(Pu.controller){var Hu=t$8.__assign(t$8.__assign({},Pu.controller.getTargetPose()),{panoIndex:Pu.panoIndex,mode:Tu});Gu&&Pu.syncingState===!1&&Pu.state.mode===Hu.mode&&!$s(Pu.state,Hu)&&(Js(Pu.state,Hu),Pu.emit("stateChange",Pu.state,Gu),(ju=Pu.analysis)===null||ju===void 0||ju.state(Pu.work,Pu.state))}Pu.emit("currentStateChange",Pu.getCurrentState(),Gu)}),Lu.on("initAnimationWillStart",function(Nu,Gu,ju){var Hu,Uu=t$8.__assign(t$8.__assign({},Gu),{panoIndex:Nu,mode:Tu});ju&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,ju),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("initAnimationEnded",function(Nu,Gu,ju){var Hu,Uu=t$8.__assign(t$8.__assign({},Gu),{panoIndex:Nu,mode:Tu});ju&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,ju),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("panoWillArrive",function(Nu,Gu,ju){var Hu;Pu.panoIndex=Nu;var Uu=t$8.__assign(t$8.__assign({},Gu),{panoIndex:Nu,mode:Tu});ju&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,ju),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("panoArrived",function(Nu,Gu,ju){var Hu,Uu=t$8.__assign(t$8.__assign({},Gu),{panoIndex:Nu,mode:Tu});ju&&Pu.state.mode===Uu.mode&&!$s(Pu.state,Uu)&&(Js(Pu.state,Uu),Pu.emit("stateChange",Pu.state,ju),(Hu=Pu.analysis)===null||Hu===void 0||Hu.state(Pu.work,Pu.state))}),Lu.on("moveToPano",function(Nu,Gu){Pu.emit("currentStateChange",Pu.getCurrentState(),Gu)}),Lu.on("wantsMoveToPano",function(Nu,Gu,ju){var Hu=Pu.emit("wantsMoveToPano",Nu,Gu,ju);Hu||(Hu=Pu.emit("wantsToMoveToPano",Nu,Gu,ju)),Hu||Pu.moveToPano(Nu,Gu,ju)}),Lu.on("vrWantsToExit",function(){Pu.currentMode===$u.Mode.VRPanorama&&(Pu.exitFullscreen(),Pu.changeMode($u.Mode.Panorama))}),Lu.on("error",function(Nu){return Pu.throwError(Nu)}),Lu},$u.prototype.removeEventListeners=function(){},$u.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},$u.Line=null,$u}(Fe),Iu={instances:{},constructor:Mu};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu});var Su=function(){function _u(){}return _u.createButton=function($u){var Tu=document.createElement("button");function Cu(){Tu.style.display="",Tu.style.cursor="auto",Tu.style.left="calc(50% - 75px)",Tu.style.width="150px",Tu.onmouseenter=null,Tu.onmouseleave=null,Tu.onclick=null,Tu.textContent="VR NOT SUPPORTED"}function Pu(Lu){Lu.style.position="absolute",Lu.style.bottom="20px",Lu.style.padding="12px 6px",Lu.style.border="1px solid #fff",Lu.style.borderRadius="4px",Lu.style.background="rgba(0,0,0,0.1)",Lu.style.color="#fff",Lu.style.font="normal 13px sans-serif",Lu.style.textAlign="center",Lu.style.opacity="0.5",Lu.style.outline="none",Lu.style.zIndex="999"}if("xr"in navigator)return Tu.id="VRButton",Tu.style.display="none",Pu(Tu),navigator.xr.isSessionSupported("immersive-vr").then(function(Lu){Lu?(Tu.style.display="",Tu.style.cursor="pointer",Tu.style.left="calc(50% - 50px)",Tu.style.width="100px",Tu.textContent="ENTER VR",Tu.onmouseenter=function(){Tu.style.opacity="1.0"},Tu.onmouseleave=function(){Tu.style.opacity="0.5"},Tu.onclick=function(){$u&&$u()}):Cu()}),Tu;var Bu=document.createElement("a");return window.isSecureContext===!1?(Bu.href=document.location.href.replace(/^http:/,"https:"),Bu.innerHTML="WEBXR NEEDS HTTPS"):(Bu.href="https://immersiveweb.dev/",Bu.innerHTML="WEBXR NOT AVAILABLE"),Bu.style.left="calc(50% - 90px)",Bu.style.width="180px",Bu.style.textDecoration="none",Pu(Bu),Bu},_u}();five.AnimationFrameLoop=at$1,five.BVH=qt$1,five.BVHIntersect=Ft$1,five.BVHNode=Nt$1,five.BVHVector3=Ot$1,five.Camera=Lt$1,Five=five.Five=Mu,five.InternalWebGLRenderer=It,five.IntersectMesh=Fs,five.LegacyPanoCircleMesh=jo,five.Model=uo,five.NetworkSubscribe=tt$1,five.PBMContainer=At$1,five.PBMGroup=gt$1,five.PBMMaterial=Mt$1,five.PBMMesh=ft$1,five.PROXY_CONTROLLER_EVENT_NAMES=tu,five.PanoCircleMesh=as,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St$1,Subscribe=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro,five.TileBoundingSphere=pr,five.TileCacheNode=yn,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn,five.TileRequestScheduler=vn,five.Tileset3D=qr,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo,five.XRButton=Su,five.defaultImageURLTransform=ct$1,five.getViewportScale=nu,five.imageSupport=function(){return pt$1||(pt$1=Promise.all([dt$1("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt$1("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(_u){var $u=_u[0];return{webp:_u[1],avif:$u}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$5=tslib.exports,t$7=react$1.exports,n$d=require$$1,r$9=five;function o$9(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var u$9=o$9(t$7),i$e=o$9(n$d),a$7=[],f$5=[],c$c=u$9.createContext(null);function s$b(){var _u=u$9.useContext(c$c);if(!_u)throw new Error("FiveProvider never found.");return _u.five}function l$9(){var _u=u$9.useContext(c$c);if(!_u)throw new Error("FiveProvider never found.");return _u.loadWork}var d$b={display:"inline-block",overflow:"hidden"};function v$8(_u,$u){var Tu=s$b(),Cu=[Tu];$u!==void 0&&(Cu=Cu.concat($u)),u$9.useLayoutEffect(function(){return _u(Tu.scene)},Cu)}var p$b=v$8;function h$7(_u){return e$5.__assign({},_u.state)}function m$a(_u){var $u=_u.camera.getWorldDirection(new i$e.Vector3);return new i$e.Raycaster(_u.camera.position,$u)}function y$6(_u){return _u.camera.getWorldDirection(new i$e.Vector3)}function g$9(_u){return _u.model.empty?"Empty":"Loaded"}function S$6(_u,$u){return $u.indexOf(_u)>=0}function b$7(_u,$u){for(var Tu=0,Cu=Object.keys($u);Tu<Cu.length;Tu++){var Pu=Cu[Tu];$u[Pu]!==void 0&&(_u[Pu]=$u[Pu])}}function C$7(_u,$u){if(S$6("loadWork",$u))return _u}function w$7(_u,$u){if(S$6("setState",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.setState.apply(_u,Tu)}}function k$5(_u,$u){if(S$6("on",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.on.apply(_u,Tu)}}function x$a(_u,$u){if(S$6("on",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.once.apply(_u,Tu)}}function E$e(_u,$u){if(S$6("off",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.off.apply(_u,Tu)}}function L$9(_u,$u){if(S$6("intersectRaycaster",$u))return function(){for(var Tu,Cu=[],Pu=0;Pu<arguments.length;Pu++)Cu[Pu]=arguments[Pu];return(Tu=_u.model).intersectRaycaster.apply(Tu,Cu)}}function F$8(_u,$u){if(S$6("project2d",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.project2d.apply(_u,Tu)}}function _(_u,$u){if(S$6("updateCamera",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.updateCamera.apply(_u,Tu)}}function P$c(_u,$u){if(S$6("initBasisLoader",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.initBasisLoader.apply(_u,Tu)}}function R$c(_u,$u){if(S$6("getPixels",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.getPixels.apply(_u,Tu)}}function V$8(_u,$u){if(S$6("render",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.render.apply(_u,Tu)}}function W$5(_u,$u){if(S$6("needsRender",$u))return function(){_u.needsRender=!0}}function M$9(_u,$u){if(S$6("preloadPano",$u))return function(){for(var Tu=[],Cu=0;Cu<arguments.length;Cu++)Tu[Cu]=arguments[Cu];return _u.preloadPano.apply(_u,Tu)}}function O$a(_u,$u){if(S$6("showFloor",$u))return function(Tu){typeof Tu=="number"?_u.model.show(Tu):_u.model.show()}}function j$5(_u,$u){if(S$6("toggleHelperVisible",$u))return function(Tu){_u.helperVisible=Tu}}function A$8(_u,$u){for(var Tu={},Cu=$u.length,Pu=-1;++Pu<Cu;){var Bu=$u[Pu];Bu in _u&&(Tu[Bu]=_u[Bu])}return Tu}function N$5(_u,$u){for(var Tu=0;Tu<_u.length;Tu++)for(var Cu=0;Cu<$u.length;Cu++)if(_u[Tu]===$u[Cu])return!0;return!1}var U$7=function(){function _u($u,Tu){this.values=$u,this.listeners=[],this.onValuesChange=Tu}return _u.prototype.on=function($u,Tu){var Cu=this,Pu=[$u,Tu];return this.listeners.push(Pu),function(){var Bu=Cu.listeners.indexOf(Pu);Bu>=0&&Cu.listeners.splice(Bu,1)}},_u.prototype.getValues=function($u){return A$8(this.values,$u)},_u.prototype.setValues=function($u,Tu){var Cu,Pu,Bu=[];for(var Lu in Tu)$u.indexOf(Lu)>=0&&(Cu=Tu[Lu],Pu=this.values[Lu],!(typeof Cu=="number"&&typeof Pu=="number"&&isNaN(Cu)&&isNaN(Pu)||Cu===Pu))&&Bu.push(Lu);if(Bu.length!==0){for(var Ru=e$5.__assign({},this.values),Ou=0,Du=Bu;Ou<Du.length;Ou++){var Fu=Du[Ou];this.values[Fu]=Tu[Fu]}this.onValuesChange&&this.onValuesChange(this.values,Ru);for(var Vu=0,ku=this.listeners;Vu<ku.length;Vu++){var Nu=ku[Vu],Gu=Nu[0],ju=Nu[1];if(N$5(Gu,Bu)){var Hu=A$8(Ru,Gu);ju(A$8(this.values,Gu),Hu)}}}},_u}();FiveCanvas=react.FiveCanvas=function(_u){var $u=_u.width,Tu=_u.height,Cu=s$b(),Pu=u$9.createRef(),Bu=e$5.__assign({width:$u,height:Tu},d$b);return u$9.useLayoutEffect(function(){if(Pu.current&&Cu.renderer){if(Cu.renderer.domElement.parentNode!==null&&Cu.renderer.domElement.parentNode!==Pu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Cu.renderer.domElement.parentNode!==Pu.current&&Pu.current.appendChild(Cu.renderer.domElement),Cu.camera.aspect=$u/Tu,Cu.camera.updateProjectionMatrix(),Cu.renderer.setSize($u,Tu),Cu.needsRender=!0}},[$u,Tu,Pu.current]),u$9.createElement("div",{ref:Pu,style:Bu})},react.INJECTION_PROPNAME="$five",react.Store=U$7,react.createFiveFeature=function(){for(var _u=[],$u=0;$u<arguments.length;$u++)_u[$u]=arguments[$u];return _u},createFiveProvider=react.createFiveProvider=function(_u){return _u===void 0&&(_u={}),function($u){function Tu(Cu){var Pu,Bu=this;Bu=$u.call(this,Cu)||this;var Lu=function(Ru){var Ou=Ru===void 0?{}:Ru,Du=Ou.backgroundColor,Fu=Du===void 0?1579548:Du,Vu=Ou.backgroundAlpha,ku=Vu===void 0?1:Vu,Nu=Ou.pixelRatio,Gu=Nu===void 0?1:Nu,ju=Ou.webgl2,Hu=ju!==void 0&&ju;if(typeof window!="undefined"){var Uu=null;if(!(Uu=Hu?a$7.shift():f$5.shift())){if(Hu){var zu=document.createElement("canvas"),Wu=zu.getContext("webgl2");if(Wu===null)throw new Error("error occurred when getting webgl2 canvas context");Uu=new i$e.WebGLRenderer({antialias:!1,alpha:!0,canvas:zu,context:Wu})}else Uu=new i$e.WebGLRenderer({antialias:!1,alpha:!0});Uu.outputEncoding=i$e.sRGBEncoding}return Uu.setPixelRatio(Gu),Uu.setClearColor(Fu,ku),Uu.autoClear=!0,Uu}}({pixelRatio:r$9.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:_u.backgroundAlpha,backgroundColor:_u.backgroundColor,webgl2:_u==null?void 0:_u.webgl2});return Bu.five=new r$9.Five(e$5.__assign({renderer:Lu},_u)),(Cu.work||Cu.initialWork)&&Bu.five.load(Cu.work||Cu.initialWork,Cu.initialState,void 0,(Pu=Cu.initialUserAction)===null||Pu===void 0||Pu),Bu.five.on("load",function(){var Ru;Bu.props.onWorkChange&&Bu.props.onWorkChange((Ru=Bu.five)===null||Ru===void 0?void 0:Ru.work)}),Bu.five.on("stateChange",function(Ru,Ou){Bu.props.onStateChange&&Bu.props.onStateChange(Ru,Ou)}),Bu.five.on("currentStateChange",function(Ru,Ou){Bu.props.onCurrentStateChange&&Bu.props.onCurrentStateChange(Ru,Ou)}),Bu.five.on("error",function(Ru){Bu.props.onError?Bu.props.onError(Ru):console.warn(Ru.message)}),Bu}return e$5.__extends(Tu,$u),Tu.prototype.loadWork=function(Cu,Pu,Bu,Lu){if(Lu===void 0&&(Lu=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Cu,Pu,Bu,Lu)},Tu.prototype.shouldComponentUpdate=function(Cu){var Pu,Bu;return Cu.work&&Cu.work!==((Pu=this.five)===null||Pu===void 0?void 0:Pu.work)&&((Bu=this.five)===null||Bu===void 0||Bu.load(Cu.work,Cu.initialState)),!0},Tu.prototype.componentWillUnmount=function(){var Cu;this.five&&(this.five.dispose(),(Cu=this.five.renderer)&&(Cu.capabilities.isWebGL2?f$5.indexOf(Cu)===-1&&f$5.push(Cu):a$7.indexOf(Cu)===-1&&a$7.push(Cu)),delete this.five)},Tu.prototype.render=function(){var Cu=this;return u$9.createElement(c$c.Provider,{value:{five:this.five,loadWork:function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.loadWork.apply(Cu,Pu)}}},this.props.children)},Tu}(u$9.Component)},react.createStore=function(_u){var $u=u$9.createContext(null);return{useStore:function(Tu){var Cu=u$9.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");var Pu=u$9.useRef(!0),Bu=u$9.useState(Cu.getValues(Tu)),Lu=Bu[0],Ru=Bu[1],Ou=e$5.__spreadArray([Cu],Tu,!0);return u$9.useLayoutEffect(function(){return Pu.current?Pu.current=!1:Ru(Cu.getValues(Tu)),Cu.on(Tu,function(Du){return Ru(Du)})},Ou),[Lu,u$9.useCallback(function(Du){return Cu.setValues(Tu,Du)},Ou)]},useStoreSetter:function(Tu){var Cu=u$9.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");return u$9.useCallback(function(Pu){return Cu.setValues(Tu,Pu)},e$5.__spreadArray([Cu],Tu,!0))},watchStore:function(Tu,Cu,Pu){var Bu=u$9.useContext($u);if(Bu===null)throw new Error("StoreProvider never found.");var Lu=e$5.__spreadArray([Bu],Tu,!0);Pu!==void 0&&(Lu=Lu.concat(Pu)),u$9.useLayoutEffect(function(){return Bu.on(Tu,Cu)},Lu)},useStoreAction:function(Tu){var Cu=u$9.useContext($u);if(Cu===null)throw new Error("StoreProvider never found.");return u$9.useCallback(function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];var Lu=_u[Tu],Ru=Lu[0],Ou=Lu.slice(1),Du=function(){return Cu.getValues(Ou)},Fu=function(Vu){return Cu.setValues(Ou,Vu)};return Ru.apply(void 0,e$5.__spreadArray([Du,Fu],Pu,!1))},[])},StoreProvider:function(Tu){function Cu(Pu){var Bu=Tu.call(this,Pu)||this;return Bu.store=new U$7(Pu.initialValue,function(){for(var Lu,Ru=[],Ou=0;Ou<arguments.length;Ou++)Ru[Ou]=arguments[Ou];Bu.props.onValuesChange&&(Lu=Bu.props).onValuesChange.apply(Lu,Ru)}),Bu}return e$5.__extends(Cu,Tu),Cu.prototype.shouldComponentUpdate=function(Pu){return Pu.children!==this.props.children},Cu.prototype.render=function(){return u$9.createElement($u.Provider,{value:this.store},this.props.children)},Cu}(u$9.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$b()},react.useFiveAction=function(){var _u=s$b();return{updateCamera:u$9.useCallback(function($u,Tu){return _u.updateCamera($u,Tu)},[_u]),initBasisLoader:u$9.useCallback(function($u){return _u.initBasisLoader($u)},[_u]),getPixels:u$9.useCallback(function($u,Tu,Cu,Pu,Bu){return _u.getPixels($u,Tu,Cu,Pu,Bu)},[_u]),render:u$9.useCallback(function($u){return _u.render($u)},[_u]),needsRender:u$9.useCallback(function(){return _u.needsRender=!0},[_u]),preloadPano:u$9.useCallback(function($u,Tu){return _u.preloadPano($u,Tu)},[_u])}},react.useFiveCameraDirection=function(){var _u=s$b(),$u=u$9.useState(function(){return y$6(_u)}),Tu=$u[0],Cu=$u[1];return u$9.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Cu(y$6(_u))})},[_u]),Tu},react.useFiveCameraRaycaster=function(){var _u=s$b(),$u=u$9.useState(function(){return m$a(_u)}),Tu=$u[0],Cu=$u[1];return u$9.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Cu(m$a(_u))})},[_u]),Tu},react.useFiveCurrentObserver=function(){var _u=s$b(),$u=u$9.useState(function(){return _u.getCurrentState()}),Tu=$u[0],Cu=$u[1];return u$9.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Cu(_u.getCurrentState())})},[_u]),_u.work?_u.work.observers[Tu.panoIndex]:null},react.useFiveCurrentState=function(){var _u=s$b(),$u=u$9.useState(function(){return _u.getCurrentState()}),Tu=$u[0],Cu=$u[1],Pu=u$9.useCallback(function(Bu,Lu,Ru){Lu===void 0&&(Lu=!1),Ru===void 0&&(Ru=!0);var Ou=typeof Bu=="function"?Bu(_u.getCurrentState()):Bu;_u.setState(Ou,Lu,Ru)},[_u]);return u$9.useLayoutEffect(function(){return _u.on("currentStateChange",function(){return Cu(_u.getCurrentState())})},[_u]),[Tu,Pu]},react.useFiveEventCallback=function(_u,$u,Tu){var Cu=s$b(),Pu=[Cu,_u];Tu!==void 0&&(Pu=Pu.concat(Tu)),u$9.useLayoutEffect(function(){return Cu.on(_u,$u)},Pu)},react.useFiveFloor=function(){var _u=s$b(),$u=u$9.useState(_u.model.shownFloor),Tu=$u[0],Cu=$u[1],Pu=u$9.useState(_u.model.floorLength),Bu=Pu[0],Lu=Pu[1],Ru=u$9.useCallback(function(Ou){typeof Ou=="number"?_u.model.show(Ou):_u.model.show()},[_u]);return u$9.useLayoutEffect(function(){var Ou=[];return Ou.push(_u.on("modelShownFloorChange",function(){return Cu(_u.model.shownFloor)})),Ou.push(_u.on("modelLoaded",function(){return Lu(_u.model.floorLength)})),function(){for(var Du;Du=Ou.shift();)Du()}},[_u]),[Tu,Bu,Ru]},react.useFiveHelper=function(){var _u=s$b(),$u=u$9.useState(_u.helperVisible),Tu=$u[0],Cu=$u[1],Pu=u$9.useCallback(function(Bu){_u.helperVisible=Bu},[_u]);return u$9.useLayoutEffect(function(){return _u.on("helpersVisibleChange",function(Bu){return Cu(Bu)})},[_u]),[Tu,Pu]},react.useFiveModelIntersectRaycaster=function(){var _u=s$b();return u$9.useCallback(function($u){return _u.model.intersectRaycaster($u)},[_u])},react.useFiveModelReadyState=function(){var _u=s$b(),$u=u$9.useState(function(){return g$9(_u)}),Tu=$u[0],Cu=$u[1];return u$9.useLayoutEffect(function(){return _u.on("modelLoaded",function(){return Cu(g$9(_u))})},[_u]),Tu},react.useFiveProject2d=function(){var _u=s$b(),$u=u$9.useState(function(){return Symbol()});$u[0];var Tu=$u[1];return u$9.useLayoutEffect(function(){return _u.on("cameraUpdate",function(){return Tu(Symbol())})},[_u]),u$9.useCallback(function(Cu,Pu){return _u.project2d(Cu,Pu)},[_u])},react.useFiveScene=p$b,react.useFiveSceneEffect=v$8,react.useFiveState=function(){var _u=s$b(),$u=u$9.useState(function(){return h$7(_u)}),Tu=$u[0],Cu=$u[1],Pu=u$9.useCallback(function(Bu,Lu,Ru){Lu===void 0&&(Lu=!1),Ru===void 0&&(Ru=!0);var Ou=typeof Bu=="function"?Bu(_u.getCurrentState()):Bu;_u.setState(Ou,Lu,Ru)},[_u]);return u$9.useLayoutEffect(function(){return _u.on("stateChange",function(){return Cu(h$7(_u))})},[_u]),[Tu,Pu]},react.useFiveWork=function(){var _u=s$b(),$u=l$9(),Tu=u$9.useState(function(){return _u.work}),Cu=Tu[0],Pu=Tu[1];return u$9.useLayoutEffect(function(){return _u.on("load",function(){return Pu(_u.work)})},[_u]),[Cu,$u]},react.withFive=function(_u){return function($u){return u$9.forwardRef(function(Tu,Cu){var Pu=s$b(),Bu=l$9(),Lu=function(ap,ip){return[S$6("unsafe__fiveInstance",ip)?ap:void 0]}(Pu,_u)[0],Ru=function(ap,ip){var hp=S$6("state",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return e$5.__assign({},ap.state)},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("stateChange",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Ou=Ru[0],Du=Ru[1],Fu=function(ap,ip){var hp=S$6("currentState",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.getCurrentState()},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("currentStateChange",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Vu=Fu[0],ku=Fu[1],Nu=function(ap,ip){var hp=S$6("currentObserver",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.getCurrentState()},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("currentStateChange",function(){return gp(Symbol())})},[ap]),[Ap?ap.work?ap.work.observers[Ap.panoIndex]:null:void 0,pp]}(Pu,_u),Gu=Nu[0],ju=Nu[1],Hu=function(ap,ip){var hp=S$6("work",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.work},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("load",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Uu=Hu[0],zu=Hu[1],Wu=function(ap,ip){var hp=S$6("model",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.model},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("modelLoaded",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Qu=Wu[0],Ku=Wu[1],Yu=function(ap,ip){return[S$6("scene",ip)?ap.scene:void 0]}(Pu,_u)[0],Xc=function(ap,ip){var hp=S$6("cameraDirection",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.camera.getWorldDirection(new i$e.Vector3)},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("cameraUpdate",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),_d=Xc[0],_f=Xc[1],qu=function(ap,ip){var hp=S$6("cameraRaycaster",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp){var Mp=ap.camera.getWorldDirection(new i$e.Vector3);return new i$e.Raycaster(ap.camera.position,Mp)}},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("cameraUpdate",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Xu=qu[0],Zu=qu[1],_c=function(ap,ip){var hp=S$6("modelReadyState",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.model.empty?"Empty":"Loaded"},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("modelLoaded",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Ju=_c[0],_h=_c[1],ep=function(ap,ip){var hp=S$6("shownFloor",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.model.shownFloor},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("modelShownFloorChange",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),tp=ep[0],rp=ep[1],dp=function(ap,ip){var hp=S$6("totalFloorLength",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.model.hasFloors()},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("modelLoaded",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),cp=dp[0],Sp=dp[1],yp=function(ap,ip){var hp=S$6("helperVisible",ip),up=u$9.useState(Symbol()),pp=up[0],gp=up[1],Ap=u$9.useMemo(function(){if(hp)return ap.helperVisible},[ap,pp]);return u$9.useLayoutEffect(function(){if(hp)return ap.on("helpersVisibleChange",function(){return gp(Symbol())})},[ap]),[Ap,pp]}(Pu,_u),Bp=yp[0],_p=yp[1],Cp=u$9.useMemo(function(){var ap={};return b$7(ap,{setState:w$7(Pu,_u),loadWork:C$7(Bu,_u),on:k$5(Pu,_u),once:x$a(Pu,_u),off:E$e(Pu,_u),intersectRaycaster:L$9(Pu,_u),project2d:F$8(Pu,_u),updateCamera:_(Pu,_u),initBasisLoader:P$c(Pu,_u),getPixels:R$c(Pu,_u),render:V$8(Pu,_u),needsRender:W$5(Pu,_u),preloadPano:M$9(Pu,_u),showFloor:O$a(Pu,_u),toggleHelperVisible:j$5(Pu,_u)}),ap},[Pu,Bu]),Ep=u$9.useMemo(function(){var ap=e$5.__assign({},Cp);return b$7(ap,{unsafe__fiveInstance:Lu,state:Ou,currentState:Vu,currentObserver:Gu,work:Uu,model:Qu,scene:Yu,cameraDirection:_d,cameraRaycaster:Xu,modelReadyState:Ju,shownFloor:tp,totalFloorLength:cp,helperVisible:Bp}),ap},[Pu,Cp,Du,ku,ju,zu,Ku,_f,Zu,_h,rp,Sp,_p]);return u$9.createElement($u,e$5.__assign({ref:Cu,$five:Ep},Tu))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$4=react$1.exports,g$8=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$6=Symbol.for;g$8=h$6("react.element"),reactJsxRuntime_production_min.Fragment=h$6("react.fragment")}var m$9=f$4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$c=Object.prototype.hasOwnProperty,p$a={key:!0,ref:!0,__self:!0,__source:!0};function q$7(_u,$u,Tu){var Cu,Pu={},Bu=null,Lu=null;Tu!==void 0&&(Bu=""+Tu),$u.key!==void 0&&(Bu=""+$u.key),$u.ref!==void 0&&(Lu=$u.ref);for(Cu in $u)n$c.call($u,Cu)&&!p$a.hasOwnProperty(Cu)&&(Pu[Cu]=$u[Cu]);if(_u&&_u.defaultProps)for(Cu in $u=_u.defaultProps,$u)Pu[Cu]===void 0&&(Pu[Cu]=$u[Cu]);return{$$typeof:g$8,type:_u,key:Bu,ref:Lu,props:Pu,_owner:m$9.current}}reactJsxRuntime_production_min.jsx=q$7;reactJsxRuntime_production_min.jsxs=q$7;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(_u){(function(){var $u={}.hasOwnProperty;function Tu(){for(var Cu=[],Pu=0;Pu<arguments.length;Pu++){var Bu=arguments[Pu];if(!!Bu){var Lu=typeof Bu;if(Lu==="string"||Lu==="number")Cu.push(Bu);else if(Array.isArray(Bu)){if(Bu.length){var Ru=Tu.apply(null,Bu);Ru&&Cu.push(Ru)}}else if(Lu==="object"){if(Bu.toString!==Object.prototype.toString&&!Bu.toString.toString().includes("[native code]")){Cu.push(Bu.toString());continue}for(var Ou in Bu)$u.call(Bu,Ou)&&Bu[Ou]&&Cu.push(Ou)}}}return Cu.join(" ")}_u.exports?(Tu.default=Tu,_u.exports=Tu):window.classNames=Tu})()})(classnames);var classNames=classnames.exports;function die(_u){for(var $u=arguments.length,Tu=new Array($u>1?$u-1:0),Cu=1;Cu<$u;Cu++)Tu[Cu-1]=arguments[Cu];throw new Error(typeof _u=="number"?"[MobX] minified error nr: "+_u+(Tu.length?" "+Tu.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+_u)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(_u){var $u=!1;return function(){if(!$u)return $u=!0,_u.apply(this,arguments)}}var noop=function _u(){};function isFunction(_u){return typeof _u=="function"}function isStringish(_u){var $u=typeof _u;switch($u){case"string":case"symbol":case"number":return!0}return!1}function isObject$2(_u){return _u!==null&&typeof _u=="object"}function isPlainObject(_u){if(!isObject$2(_u))return!1;var $u=Object.getPrototypeOf(_u);if($u==null)return!0;var Tu=Object.hasOwnProperty.call($u,"constructor")&&$u.constructor;return typeof Tu=="function"&&Tu.toString()===plainObjectString}function isGenerator(_u){var $u=_u==null?void 0:_u.constructor;return $u?$u.name==="GeneratorFunction"||$u.displayName==="GeneratorFunction":!1}function addHiddenProp(_u,$u,Tu){defineProperty(_u,$u,{enumerable:!1,writable:!0,configurable:!0,value:Tu})}function addHiddenFinalProp(_u,$u,Tu){defineProperty(_u,$u,{enumerable:!1,writable:!1,configurable:!0,value:Tu})}function createInstanceofPredicate(_u,$u){var Tu="isMobX"+_u;return $u.prototype[Tu]=!0,function(Cu){return isObject$2(Cu)&&Cu[Tu]===!0}}function isES6Map(_u){return _u instanceof Map}function isES6Set(_u){return _u instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(_u){var $u=Object.keys(_u);if(!hasGetOwnPropertySymbols)return $u;var Tu=Object.getOwnPropertySymbols(_u);return Tu.length?[].concat($u,Tu.filter(function(Cu){return objectPrototype.propertyIsEnumerable.call(_u,Cu)})):$u}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(_u){return Object.getOwnPropertyNames(_u).concat(Object.getOwnPropertySymbols(_u))}:Object.getOwnPropertyNames;function toPrimitive(_u){return _u===null?null:typeof _u=="object"?""+_u:_u}function hasProp(_u,$u){return objectPrototype.hasOwnProperty.call(_u,$u)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function _u($u){var Tu={};return ownKeys($u).forEach(function(Cu){Tu[Cu]=getDescriptor($u,Cu)}),Tu};function _defineProperties(_u,$u){for(var Tu=0;Tu<$u.length;Tu++){var Cu=$u[Tu];Cu.enumerable=Cu.enumerable||!1,Cu.configurable=!0,"value"in Cu&&(Cu.writable=!0),Object.defineProperty(_u,Cu.key,Cu)}}function _createClass(_u,$u,Tu){return $u&&_defineProperties(_u.prototype,$u),Tu&&_defineProperties(_u,Tu),Object.defineProperty(_u,"prototype",{writable:!1}),_u}function _extends(){return _extends=Object.assign||function(_u){for(var $u=1;$u<arguments.length;$u++){var Tu=arguments[$u];for(var Cu in Tu)Object.prototype.hasOwnProperty.call(Tu,Cu)&&(_u[Cu]=Tu[Cu])}return _u},_extends.apply(this,arguments)}function _inheritsLoose(_u,$u){_u.prototype=Object.create($u.prototype),_u.prototype.constructor=_u,_setPrototypeOf(_u,$u)}function _setPrototypeOf(_u,$u){return _setPrototypeOf=Object.setPrototypeOf||function(Cu,Pu){return Cu.__proto__=Pu,Cu},_setPrototypeOf(_u,$u)}function _assertThisInitialized(_u){if(_u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _u}function _unsupportedIterableToArray(_u,$u){if(!!_u){if(typeof _u=="string")return _arrayLikeToArray(_u,$u);var Tu=Object.prototype.toString.call(_u).slice(8,-1);if(Tu==="Object"&&_u.constructor&&(Tu=_u.constructor.name),Tu==="Map"||Tu==="Set")return Array.from(_u);if(Tu==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Tu))return _arrayLikeToArray(_u,$u)}}function _arrayLikeToArray(_u,$u){($u==null||$u>_u.length)&&($u=_u.length);for(var Tu=0,Cu=new Array($u);Tu<$u;Tu++)Cu[Tu]=_u[Tu];return Cu}function _createForOfIteratorHelperLoose(_u,$u){var Tu=typeof Symbol!="undefined"&&_u[Symbol.iterator]||_u["@@iterator"];if(Tu)return(Tu=Tu.call(_u)).next.bind(Tu);if(Array.isArray(_u)||(Tu=_unsupportedIterableToArray(_u))||$u&&_u&&typeof _u.length=="number"){Tu&&(_u=Tu);var Cu=0;return function(){return Cu>=_u.length?{done:!0}:{done:!1,value:_u[Cu++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(_u){function $u(Tu,Cu){storeAnnotation(Tu,Cu,_u)}return Object.assign($u,_u)}function storeAnnotation(_u,$u,Tu){hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),isOverride(Tu)||(_u[storedAnnotationsSymbol][$u]=Tu)}function collectStoredAnnotations(_u){return hasProp(_u,storedAnnotationsSymbol)||addHiddenProp(_u,storedAnnotationsSymbol,_extends({},_u[storedAnnotationsSymbol])),_u[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function _u(Tu){Tu===void 0&&(Tu="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Tu}var $u=_u.prototype;return $u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Cu){return Cu()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Cu){return Cu()})},$u.reportObserved=function(){return reportObserved(this)},$u.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},$u.toString=function(){return this.name_},_u}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(_u,$u,Tu){$u===void 0&&($u=noop),Tu===void 0&&(Tu=noop);var Cu=new Atom(_u);return $u!==noop&&onBecomeObserved(Cu,$u),Tu!==noop&&onBecomeUnobserved(Cu,Tu),Cu}function identityComparer(_u,$u){return _u===$u}function structuralComparer(_u,$u){return deepEqual(_u,$u)}function shallowComparer(_u,$u){return deepEqual(_u,$u,1)}function defaultComparer(_u,$u){return Object.is?Object.is(_u,$u):_u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(_u,$u,Tu){return isObservable(_u)?_u:Array.isArray(_u)?observable.array(_u,{name:Tu}):isPlainObject(_u)?observable.object(_u,void 0,{name:Tu}):isES6Map(_u)?observable.map(_u,{name:Tu}):isES6Set(_u)?observable.set(_u,{name:Tu}):typeof _u=="function"&&!isAction(_u)&&!isFlow(_u)?isGenerator(_u)?flow(_u):autoAction(Tu,_u):_u}function shallowEnhancer(_u,$u,Tu){if(_u==null||isObservableObject(_u)||isObservableArray(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(Array.isArray(_u))return observable.array(_u,{name:Tu,deep:!1});if(isPlainObject(_u))return observable.object(_u,void 0,{name:Tu,deep:!1});if(isES6Map(_u))return observable.map(_u,{name:Tu,deep:!1});if(isES6Set(_u))return observable.set(_u,{name:Tu,deep:!1})}function referenceEnhancer(_u){return _u}function refStructEnhancer(_u,$u){return deepEqual(_u,$u)?$u:_u}var OVERRIDE="override";function isOverride(_u){return _u.annotationType_===OVERRIDE}function createActionAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$1,extend_:extend_$1}}function make_$1(_u,$u,Tu,Cu){var Pu;if((Pu=this.options_)!=null&&Pu.bound)return this.extend_(_u,$u,Tu,!1)===null?0:1;if(Cu===_u.target_)return this.extend_(_u,$u,Tu,!1)===null?0:2;if(isAction(Tu.value))return 1;var Bu=createActionDescriptor(_u,this,$u,Tu,!1);return defineProperty(Cu,$u,Bu),2}function extend_$1(_u,$u,Tu,Cu){var Pu=createActionDescriptor(_u,this,$u,Tu);return _u.defineProperty_($u,Pu,Cu)}function assertActionDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.value}function createActionDescriptor(_u,$u,Tu,Cu,Pu){var Bu,Lu,Ru,Ou,Du,Fu,Vu;Pu===void 0&&(Pu=globalState.safeDescriptors),assertActionDescriptor(_u,$u,Tu,Cu);var ku=Cu.value;if((Bu=$u.options_)!=null&&Bu.bound){var Nu;ku=ku.bind((Nu=_u.proxy_)!=null?Nu:_u.target_)}return{value:createAction((Lu=(Ru=$u.options_)==null?void 0:Ru.name)!=null?Lu:Tu.toString(),ku,(Ou=(Du=$u.options_)==null?void 0:Du.autoAction)!=null?Ou:!1,(Fu=$u.options_)!=null&&Fu.bound?(Vu=_u.proxy_)!=null?Vu:_u.target_:void 0),configurable:Pu?_u.isPlainObject_:!0,enumerable:!1,writable:!Pu}}function createFlowAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$2,extend_:extend_$2}}function make_$2(_u,$u,Tu,Cu){var Pu;if(Cu===_u.target_)return this.extend_(_u,$u,Tu,!1)===null?0:2;if((Pu=this.options_)!=null&&Pu.bound&&(!hasProp(_u.target_,$u)||!isFlow(_u.target_[$u]))&&this.extend_(_u,$u,Tu,!1)===null)return 0;if(isFlow(Tu.value))return 1;var Bu=createFlowDescriptor(_u,this,$u,Tu,!1,!1);return defineProperty(Cu,$u,Bu),2}function extend_$2(_u,$u,Tu,Cu){var Pu,Bu=createFlowDescriptor(_u,this,$u,Tu,(Pu=this.options_)==null?void 0:Pu.bound);return _u.defineProperty_($u,Bu,Cu)}function assertFlowDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.value}function createFlowDescriptor(_u,$u,Tu,Cu,Pu,Bu){Bu===void 0&&(Bu=globalState.safeDescriptors),assertFlowDescriptor(_u,$u,Tu,Cu);var Lu=Cu.value;if(isFlow(Lu)||(Lu=flow(Lu)),Pu){var Ru;Lu=Lu.bind((Ru=_u.proxy_)!=null?Ru:_u.target_),Lu.isMobXFlow=!0}return{value:Lu,configurable:Bu?_u.isPlainObject_:!0,enumerable:!1,writable:!Bu}}function createComputedAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$3,extend_:extend_$3}}function make_$3(_u,$u,Tu){return this.extend_(_u,$u,Tu,!1)===null?0:1}function extend_$3(_u,$u,Tu,Cu){return assertComputedDescriptor(_u,this,$u,Tu),_u.defineComputedProperty_($u,_extends({},this.options_,{get:Tu.get,set:Tu.set}),Cu)}function assertComputedDescriptor(_u,$u,Tu,Cu){$u.annotationType_,Cu.get}function createObservableAnnotation(_u,$u){return{annotationType_:_u,options_:$u,make_:make_$4,extend_:extend_$4}}function make_$4(_u,$u,Tu){return this.extend_(_u,$u,Tu,!1)===null?0:1}function extend_$4(_u,$u,Tu,Cu){var Pu,Bu;return assertObservableDescriptor(_u,this),_u.defineObservableProperty_($u,Tu.value,(Pu=(Bu=this.options_)==null?void 0:Bu.enhancer)!=null?Pu:deepEnhancer,Cu)}function assertObservableDescriptor(_u,$u,Tu,Cu){$u.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(_u){return{annotationType_:AUTO,options_:_u,make_:make_$5,extend_:extend_$5}}function make_$5(_u,$u,Tu,Cu){var Pu,Bu;if(Tu.get)return computed.make_(_u,$u,Tu,Cu);if(Tu.set){var Lu=createAction($u.toString(),Tu.set);return Cu===_u.target_?_u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:Lu})===null?0:2:(defineProperty(Cu,$u,{configurable:!0,set:Lu}),2)}if(Cu!==_u.target_&&typeof Tu.value=="function"){var Ru;if(isGenerator(Tu.value)){var Ou,Du=(Ou=this.options_)!=null&&Ou.autoBind?flow.bound:flow;return Du.make_(_u,$u,Tu,Cu)}var Fu=(Ru=this.options_)!=null&&Ru.autoBind?autoAction.bound:autoAction;return Fu.make_(_u,$u,Tu,Cu)}var Vu=((Pu=this.options_)==null?void 0:Pu.deep)===!1?observable.ref:observable;if(typeof Tu.value=="function"&&(Bu=this.options_)!=null&&Bu.autoBind){var ku;Tu.value=Tu.value.bind((ku=_u.proxy_)!=null?ku:_u.target_)}return Vu.make_(_u,$u,Tu,Cu)}function extend_$5(_u,$u,Tu,Cu){var Pu,Bu;if(Tu.get)return computed.extend_(_u,$u,Tu,Cu);if(Tu.set)return _u.defineProperty_($u,{configurable:globalState.safeDescriptors?_u.isPlainObject_:!0,set:createAction($u.toString(),Tu.set)},Cu);if(typeof Tu.value=="function"&&(Pu=this.options_)!=null&&Pu.autoBind){var Lu;Tu.value=Tu.value.bind((Lu=_u.proxy_)!=null?Lu:_u.target_)}var Ru=((Bu=this.options_)==null?void 0:Bu.deep)===!1?observable.ref:observable;return Ru.extend_(_u,$u,Tu,Cu)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(_u){return _u||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(_u){return _u.deep===!0?deepEnhancer:_u.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(_u.defaultDecorator)}function getAnnotationFromOptions(_u){var $u;return _u?($u=_u.defaultDecorator)!=null?$u:createAutoAnnotation(_u):void 0}function getEnhancerFromAnnotation(_u){var $u,Tu;return _u&&($u=(Tu=_u.options_)==null?void 0:Tu.enhancer)!=null?$u:deepEnhancer}function createObservable(_u,$u,Tu){if(isStringish($u)){storeAnnotation(_u,$u,observableAnnotation);return}return isObservable(_u)?_u:isPlainObject(_u)?observable.object(_u,$u,Tu):Array.isArray(_u)?observable.array(_u,$u):isES6Map(_u)?observable.map(_u,$u):isES6Set(_u)?observable.set(_u,$u):typeof _u=="object"&&_u!==null?_u:observable.box(_u,$u)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableValue($u,getEnhancerFromOptions(Cu),Cu.name,!0,Cu.equals)},array:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return(globalState.useProxies===!1||Cu.proxy===!1?createLegacyArray:createObservableArray)($u,getEnhancerFromOptions(Cu),Cu.name)},map:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableMap($u,getEnhancerFromOptions(Cu),Cu.name)},set:function _u($u,Tu){var Cu=asCreateObservableOptions(Tu);return new ObservableSet($u,getEnhancerFromOptions(Cu),Cu.name)},object:function _u($u,Tu,Cu){return extendObservable(globalState.useProxies===!1||(Cu==null?void 0:Cu.proxy)===!1?asObservableObject({},Cu):asDynamicObservableObject({},Cu),$u,Tu)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function _u($u,Tu){if(isStringish(Tu))return storeAnnotation($u,Tu,computedAnnotation);if(isPlainObject($u))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,$u));var Cu=isPlainObject(Tu)?Tu:{};return Cu.get=$u,Cu.name||(Cu.name=$u.name||""),new ComputedValue(Cu)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(_u,$u,Tu,Cu){Tu===void 0&&(Tu=!1);function Pu(){return executeAction(_u,Tu,$u,Cu||this,arguments)}return Pu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=_u,Object.defineProperty(Pu,"name",tmpNameDescriptor)),Pu}function executeAction(_u,$u,Tu,Cu,Pu){var Bu=_startAction(_u,$u);try{return Tu.apply(Cu,Pu)}catch(Lu){throw Bu.error_=Lu,Lu}finally{_endAction(Bu)}}function _startAction(_u,$u,Tu,Cu){var Pu=!1,Bu=0,Lu=globalState.trackingDerivation,Ru=!$u||!Lu;startBatch();var Ou=globalState.allowStateChanges;Ru&&(untrackedStart(),Ou=allowStateChangesStart(!0));var Du=allowStateReadsStart(!0),Fu={runAsAction_:Ru,prevDerivation_:Lu,prevAllowStateChanges_:Ou,prevAllowStateReads_:Du,notifySpy_:Pu,startTime_:Bu,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Fu.actionId_,Fu}function _endAction(_u){currentActionId!==_u.actionId_&&die(30),currentActionId=_u.parentActionId_,_u.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(_u.prevAllowStateChanges_),allowStateReadsEnd(_u.prevAllowStateReads_),endBatch(),_u.runAsAction_&&untrackedEnd(_u.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(_u,$u){var Tu=allowStateChangesStart(_u);try{return $u()}finally{allowStateChangesEnd(Tu)}}function allowStateChangesStart(_u){var $u=globalState.allowStateChanges;return globalState.allowStateChanges=_u,$u}function allowStateChangesEnd(_u){globalState.allowStateChanges=_u}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(_u){_inheritsLoose($u,_u);function $u(Cu,Pu,Bu,Lu,Ru){var Ou;return Bu===void 0&&(Bu="ObservableValue"),Ru===void 0&&(Ru=comparer.default),Ou=_u.call(this,Bu)||this,Ou.enhancer=void 0,Ou.name_=void 0,Ou.equals=void 0,Ou.hasUnreportedChange_=!1,Ou.interceptors_=void 0,Ou.changeListeners_=void 0,Ou.value_=void 0,Ou.dehancer=void 0,Ou.enhancer=Pu,Ou.name_=Bu,Ou.equals=Ru,Ou.value_=Pu(Cu,void 0,Bu),Ou}var Tu=$u.prototype;return Tu.dehanceValue=function(Pu){return this.dehancer!==void 0?this.dehancer(Pu):Pu},Tu.set=function(Pu){this.value_,Pu=this.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED&&this.setNewValue_(Pu)},Tu.prepareNewValue_=function(Pu){if(hasInterceptors(this)){var Bu=interceptChange(this,{object:this,type:UPDATE,newValue:Pu});if(!Bu)return globalState.UNCHANGED;Pu=Bu.newValue}return Pu=this.enhancer(Pu,this.value_,this.name_),this.equals(this.value_,Pu)?globalState.UNCHANGED:Pu},Tu.setNewValue_=function(Pu){var Bu=this.value_;this.value_=Pu,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Pu,oldValue:Bu})},Tu.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Tu.intercept_=function(Pu){return registerInterceptor(this,Pu)},Tu.observe_=function(Pu,Bu){return Bu&&Pu({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Pu)},Tu.raw=function(){return this.value_},Tu.toJSON=function(){return this.get()},Tu.toString=function(){return this.name_+"["+this.value_+"]"},Tu.valueOf=function(){return toPrimitive(this.get())},Tu[_Symbol$toPrimitive]=function(){return this.valueOf()},$u}(Atom),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function _u(Tu){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Tu.get||die(31),this.derivation=Tu.get,this.name_=Tu.name||"ComputedValue",Tu.set&&(this.setter_=createAction("ComputedValue-setter",Tu.set)),this.equals_=Tu.equals||(Tu.compareStructural||Tu.struct?comparer.structural:comparer.default),this.scope_=Tu.context,this.requiresReaction_=Tu.requiresReaction,this.keepAlive_=!!Tu.keepAlive}var $u=_u.prototype;return $u.onBecomeStale_=function(){propagateMaybeChanged(this)},$u.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Cu){return Cu()})},$u.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Cu){return Cu()})},$u.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Cu=globalState.trackingContext;this.keepAlive_&&!Cu&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Cu}var Pu=this.value_;if(isCaughtException(Pu))throw Pu.cause;return Pu},$u.set=function(Cu){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Cu)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},$u.trackAndCompute=function(){var Cu=this.value_,Pu=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Bu=this.computeValue_(!0),Lu=Pu||isCaughtException(Cu)||isCaughtException(Bu)||!this.equals_(Cu,Bu);return Lu&&(this.value_=Bu),Lu},$u.computeValue_=function(Cu){this.isComputing_=!0;var Pu=allowStateChangesStart(!1),Bu;if(Cu)Bu=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Bu=this.derivation.call(this.scope_);else try{Bu=this.derivation.call(this.scope_)}catch(Lu){Bu=new CaughtException(Lu)}return allowStateChangesEnd(Pu),this.isComputing_=!1,Bu},$u.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},$u.observe_=function(Cu,Pu){var Bu=this,Lu=!0,Ru=void 0;return autorun(function(){var Ou=Bu.get();if(!Lu||Pu){var Du=untrackedStart();Cu({observableKind:"computed",debugObjectName:Bu.name_,type:UPDATE,object:Bu,newValue:Ou,oldValue:Ru}),untrackedEnd(Du)}Lu=!1,Ru=Ou})},$u.warnAboutUntrackedRead_=function(){},$u.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},$u.valueOf=function(){return toPrimitive(this.get())},$u[_Symbol$toPrimitive$1]=function(){return this.valueOf()},_u}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(_u){_u[_u.NOT_TRACKING_=-1]="NOT_TRACKING_",_u[_u.UP_TO_DATE_=0]="UP_TO_DATE_",_u[_u.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",_u[_u.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(_u){_u[_u.NONE=0]="NONE",_u[_u.LOG=1]="LOG",_u[_u.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function _u($u){this.cause=void 0,this.cause=$u};function isCaughtException(_u){return _u instanceof CaughtException}function shouldCompute(_u){switch(_u.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var $u=allowStateReadsStart(!0),Tu=untrackedStart(),Cu=_u.observing_,Pu=Cu.length,Bu=0;Bu<Pu;Bu++){var Lu=Cu[Bu];if(isComputedValue(Lu)){if(globalState.disableErrorBoundaries)Lu.get();else try{Lu.get()}catch{return untrackedEnd(Tu),allowStateReadsEnd($u),!0}if(_u.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Tu),allowStateReadsEnd($u),!0}}return changeDependenciesStateTo0(_u),untrackedEnd(Tu),allowStateReadsEnd($u),!1}}}function checkIfStateModificationsAreAllowed(_u){}function trackDerivedFunction(_u,$u,Tu){var Cu=allowStateReadsStart(!0);changeDependenciesStateTo0(_u),_u.newObserving_=new Array(_u.observing_.length+100),_u.unboundDepsCount_=0,_u.runId_=++globalState.runId;var Pu=globalState.trackingDerivation;globalState.trackingDerivation=_u,globalState.inBatch++;var Bu;if(globalState.disableErrorBoundaries===!0)Bu=$u.call(Tu);else try{Bu=$u.call(Tu)}catch(Lu){Bu=new CaughtException(Lu)}return globalState.inBatch--,globalState.trackingDerivation=Pu,bindDependencies(_u),allowStateReadsEnd(Cu),Bu}function bindDependencies(_u){for(var $u=_u.observing_,Tu=_u.observing_=_u.newObserving_,Cu=IDerivationState_.UP_TO_DATE_,Pu=0,Bu=_u.unboundDepsCount_,Lu=0;Lu<Bu;Lu++){var Ru=Tu[Lu];Ru.diffValue_===0&&(Ru.diffValue_=1,Pu!==Lu&&(Tu[Pu]=Ru),Pu++),Ru.dependenciesState_>Cu&&(Cu=Ru.dependenciesState_)}for(Tu.length=Pu,_u.newObserving_=null,Bu=$u.length;Bu--;){var Ou=$u[Bu];Ou.diffValue_===0&&removeObserver(Ou,_u),Ou.diffValue_=0}for(;Pu--;){var Du=Tu[Pu];Du.diffValue_===1&&(Du.diffValue_=0,addObserver(Du,_u))}Cu!==IDerivationState_.UP_TO_DATE_&&(_u.dependenciesState_=Cu,_u.onBecomeStale_())}function clearObserving(_u){var $u=_u.observing_;_u.observing_=[];for(var Tu=$u.length;Tu--;)removeObserver($u[Tu],_u);_u.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(_u){var $u=untrackedStart();try{return _u()}finally{untrackedEnd($u)}}function untrackedStart(){var _u=globalState.trackingDerivation;return globalState.trackingDerivation=null,_u}function untrackedEnd(_u){globalState.trackingDerivation=_u}function allowStateReadsStart(_u){var $u=globalState.allowStateReads;return globalState.allowStateReads=_u,$u}function allowStateReadsEnd(_u){globalState.allowStateReads=_u}function changeDependenciesStateTo0(_u){if(_u.dependenciesState_!==IDerivationState_.UP_TO_DATE_){_u.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var $u=_u.observing_,Tu=$u.length;Tu--;)$u[Tu].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function _u(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var _u=getGlobal();return _u.__mobxInstanceCount>0&&!_u.__mobxGlobals&&(canMergeGlobalState=!1),_u.__mobxGlobals&&_u.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?_u.__mobxGlobals?(_u.__mobxInstanceCount+=1,_u.__mobxGlobals.UNCHANGED||(_u.__mobxGlobals.UNCHANGED={}),_u.__mobxGlobals):(_u.__mobxInstanceCount=1,_u.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var _u=getGlobal();--_u.__mobxInstanceCount===0&&(_u.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(_u,$u){_u.observers_.add($u),_u.lowestObserverState_>$u.dependenciesState_&&(_u.lowestObserverState_=$u.dependenciesState_)}function removeObserver(_u,$u){_u.observers_.delete($u),_u.observers_.size===0&&queueForUnobservation(_u)}function queueForUnobservation(_u){_u.isPendingUnobservation_===!1&&(_u.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(_u))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var _u=globalState.pendingUnobservations,$u=0;$u<_u.length;$u++){var Tu=_u[$u];Tu.isPendingUnobservation_=!1,Tu.observers_.size===0&&(Tu.isBeingObserved_&&(Tu.isBeingObserved_=!1,Tu.onBUO()),Tu instanceof ComputedValue&&Tu.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(_u){var $u=globalState.trackingDerivation;return $u!==null?($u.runId_!==_u.lastAccessedBy_&&(_u.lastAccessedBy_=$u.runId_,$u.newObserving_[$u.unboundDepsCount_++]=_u,!_u.isBeingObserved_&&globalState.trackingContext&&(_u.isBeingObserved_=!0,_u.onBO())),!0):(_u.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(_u),!1)}function propagateChanged(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&$u.onBecomeStale_(),$u.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(_u){_u.lowestObserverState_!==IDerivationState_.STALE_&&(_u.lowestObserverState_=IDerivationState_.STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?$u.dependenciesState_=IDerivationState_.STALE_:$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(_u){_u.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(_u.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,_u.observers_.forEach(function($u){$u.dependenciesState_===IDerivationState_.UP_TO_DATE_&&($u.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,$u.onBecomeStale_())}))}var Reaction=function(){function _u(Tu,Cu,Pu,Bu){Tu===void 0&&(Tu="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Tu,this.onInvalidate_=Cu,this.errorHandler_=Pu,this.requiresObservable_=Bu}var $u=_u.prototype;return $u.onBecomeStale_=function(){this.schedule_()},$u.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},$u.isScheduled=function(){return this.isScheduled_},$u.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Cu=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Pu){this.reportExceptionInDerivation_(Pu)}}globalState.trackingContext=Cu,endBatch()}},$u.track=function(Cu){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Pu=globalState.trackingContext;globalState.trackingContext=this;var Bu=trackDerivedFunction(this,Cu,void 0);globalState.trackingContext=Pu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Bu)&&this.reportExceptionInDerivation_(Bu.cause),endBatch()}},$u.reportExceptionInDerivation_=function(Cu){var Pu=this;if(this.errorHandler_){this.errorHandler_(Cu,this);return}if(globalState.disableErrorBoundaries)throw Cu;var Bu="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Bu,Cu),globalState.globalReactionErrorHandlers.forEach(function(Lu){return Lu(Cu,Pu)})},$u.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},$u.getDisposer_=function(){var Cu=this.dispose.bind(this);return Cu[$mobx]=this,Cu},$u.toString=function(){return"Reaction["+this.name_+"]"},$u.trace=function(Cu){Cu===void 0&&(Cu=!1),trace(this,Cu)},_u}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function _u($u){return $u()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var _u=globalState.pendingReactions,$u=0;_u.length>0;){++$u===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+_u[0]),_u.splice(0));for(var Tu=_u.splice(0),Cu=0,Pu=Tu.length;Cu<Pu;Cu++)Tu[Cu].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(_u){var $u=reactionScheduler;reactionScheduler=function(Cu){return _u(function(){return $u(Cu)})}}function isSpyEnabled(){return!1}function spyReport(_u){}function spyReportStart(_u){}function spyReportEnd(_u){}function spy(_u){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(_u){var $u=function(Cu,Pu){if(isFunction(Cu))return createAction(Cu.name||DEFAULT_ACTION_NAME,Cu,_u);if(isFunction(Pu))return createAction(Cu,Pu,_u);if(isStringish(Pu))return storeAnnotation(Cu,Pu,_u?autoActionAnnotation:actionAnnotation);if(isStringish(Cu))return createDecoratorAnnotation(createActionAnnotation(_u?AUTOACTION:ACTION,{name:Cu,autoAction:_u}))};return $u}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(_u){return executeAction(_u.name||DEFAULT_ACTION_NAME,!1,_u,this,void 0)}function isAction(_u){return isFunction(_u)&&_u.isMobxAction===!0}function autorun(_u,$u){var Tu,Cu;$u===void 0&&($u=EMPTY_OBJECT);var Pu=(Tu=(Cu=$u)==null?void 0:Cu.name)!=null?Tu:"Autorun",Bu=!$u.scheduler&&!$u.delay,Lu;if(Bu)Lu=new Reaction(Pu,function(){this.track(Du)},$u.onError,$u.requiresObservable);else{var Ru=createSchedulerFromOptions($u),Ou=!1;Lu=new Reaction(Pu,function(){Ou||(Ou=!0,Ru(function(){Ou=!1,Lu.isDisposed_||Lu.track(Du)}))},$u.onError,$u.requiresObservable)}function Du(){_u(Lu)}return Lu.schedule_(),Lu.getDisposer_()}var run=function _u($u){return $u()};function createSchedulerFromOptions(_u){return _u.scheduler?_u.scheduler:_u.delay?function($u){return setTimeout($u,_u.delay)}:run}function reaction(_u,$u,Tu){var Cu;Tu===void 0&&(Tu=EMPTY_OBJECT);var Pu=(Cu=Tu.name)!=null?Cu:"Reaction",Bu=action(Pu,Tu.onError?wrapErrorHandler(Tu.onError,$u):$u),Lu=!Tu.scheduler&&!Tu.delay,Ru=createSchedulerFromOptions(Tu),Ou=!0,Du=!1,Fu,Vu,ku=Tu.compareStructural?comparer.structural:Tu.equals||comparer.default,Nu=new Reaction(Pu,function(){Ou||Lu?Gu():Du||(Du=!0,Ru(Gu))},Tu.onError,Tu.requiresObservable);function Gu(){if(Du=!1,!Nu.isDisposed_){var ju=!1;Nu.track(function(){var Hu=allowStateChanges(!1,function(){return _u(Nu)});ju=Ou||!ku(Fu,Hu),Vu=Fu,Fu=Hu}),(Ou&&Tu.fireImmediately||!Ou&&ju)&&Bu(Fu,Vu,Nu),Ou=!1}}return Nu.schedule_(),Nu.getDisposer_()}function wrapErrorHandler(_u,$u){return function(){try{return $u.apply(this,arguments)}catch(Tu){_u.call(this,Tu)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(_u,$u,Tu){return interceptHook(ON_BECOME_OBSERVED,_u,$u,Tu)}function onBecomeUnobserved(_u,$u,Tu){return interceptHook(ON_BECOME_UNOBSERVED,_u,$u,Tu)}function interceptHook(_u,$u,Tu,Cu){var Pu=typeof Cu=="function"?getAtom($u,Tu):getAtom($u),Bu=isFunction(Cu)?Cu:Tu,Lu=_u+"L";return Pu[Lu]?Pu[Lu].add(Bu):Pu[Lu]=new Set([Bu]),function(){var Ru=Pu[Lu];Ru&&(Ru.delete(Bu),Ru.size===0&&delete Pu[Lu])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(_u){_u.isolateGlobalState===!0&&isolateGlobalState();var $u=_u.useProxies,Tu=_u.enforceActions;if($u!==void 0&&(globalState.useProxies=$u===ALWAYS?!0:$u===NEVER?!1:typeof Proxy!="undefined"),$u==="ifavailable"&&(globalState.verifyProxies=!0),Tu!==void 0){var Cu=Tu===ALWAYS?ALWAYS:Tu===OBSERVED;globalState.enforceActions=Cu,globalState.allowStateChanges=!(Cu===!0||Cu===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Pu){Pu in _u&&(globalState[Pu]=!!_u[Pu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,_u.reactionScheduler&&setReactionScheduler(_u.reactionScheduler)}function extendObservable(_u,$u,Tu,Cu){var Pu=getOwnPropertyDescriptors($u),Bu=asObservableObject(_u,Cu)[$mobx];startBatch();try{ownKeys(Pu).forEach(function(Lu){Bu.extend_(Lu,Pu[Lu],Tu&&Lu in Tu?Tu[Lu]:!0)})}finally{endBatch()}return _u}function getDependencyTree(_u,$u){return nodeToDependencyTree(getAtom(_u,$u))}function nodeToDependencyTree(_u){var $u={name:_u.name_};return _u.observing_&&_u.observing_.length>0&&($u.dependencies=unique(_u.observing_).map(nodeToDependencyTree)),$u}function unique(_u){return Array.from(new Set(_u))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function _u($u,Tu){if(isStringish(Tu))return storeAnnotation($u,Tu,flowAnnotation);var Cu=$u,Pu=Cu.name||"<unnamed flow>",Bu=function(){var Ru=this,Ou=arguments,Du=++generatorId,Fu=action(Pu+" - runid: "+Du+" - init",Cu).apply(Ru,Ou),Vu,ku=void 0,Nu=new Promise(function(Gu,ju){var Hu=0;Vu=ju;function Uu(Qu){ku=void 0;var Ku;try{Ku=action(Pu+" - runid: "+Du+" - yield "+Hu++,Fu.next).call(Fu,Qu)}catch(Yu){return ju(Yu)}Wu(Ku)}function zu(Qu){ku=void 0;var Ku;try{Ku=action(Pu+" - runid: "+Du+" - yield "+Hu++,Fu.throw).call(Fu,Qu)}catch(Yu){return ju(Yu)}Wu(Ku)}function Wu(Qu){if(isFunction(Qu==null?void 0:Qu.then)){Qu.then(Wu,ju);return}return Qu.done?Gu(Qu.value):(ku=Promise.resolve(Qu.value),ku.then(Uu,zu))}Uu(void 0)});return Nu.cancel=action(Pu+" - runid: "+Du+" - cancel",function(){try{ku&&cancelPromise(ku);var Gu=Fu.return(void 0),ju=Promise.resolve(Gu.value);ju.then(noop,noop),cancelPromise(ju),Vu(new FlowCancellationError)}catch(Hu){Vu(Hu)}}),Nu};return Bu.isMobXFlow=!0,Bu},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(_u){isFunction(_u.cancel)&&_u.cancel()}function isFlow(_u){return(_u==null?void 0:_u.isMobXFlow)===!0}function _isObservable(_u,$u){return _u?$u!==void 0?isObservableObject(_u)?_u[$mobx].values_.has($u):!1:isObservableObject(_u)||!!_u[$mobx]||isAtom(_u)||isReaction(_u)||isComputedValue(_u):!1}function isObservable(_u){return _isObservable(_u)}function trace(){die("trace() is not available in production builds");for(var _u=!1,$u=arguments.length,Tu=new Array($u),Cu=0;Cu<$u;Cu++)Tu[Cu]=arguments[Cu];typeof Tu[Tu.length-1]=="boolean"&&(_u=Tu.pop());var Pu=getAtomFromArgs(Tu);if(!Pu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Pu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Pu.name_+"' tracing enabled"),Pu.isTracing_=_u?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(_u){switch(_u.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(_u[0]);case 2:return getAtom(_u[0],_u[1])}}function transaction(_u,$u){$u===void 0&&($u=void 0),startBatch();try{return _u.apply($u)}finally{endBatch()}}function getAdm(_u){return _u[$mobx]}var objectProxyTraps={has:function _u($u,Tu){return getAdm($u).has_(Tu)},get:function _u($u,Tu){return getAdm($u).get_(Tu)},set:function _u($u,Tu,Cu){var Pu;return isStringish(Tu)?(Pu=getAdm($u).set_(Tu,Cu,!0))!=null?Pu:!0:!1},deleteProperty:function _u($u,Tu){var Cu;return isStringish(Tu)?(Cu=getAdm($u).delete_(Tu,!0))!=null?Cu:!0:!1},defineProperty:function _u($u,Tu,Cu){var Pu;return(Pu=getAdm($u).defineProperty_(Tu,Cu))!=null?Pu:!0},ownKeys:function _u($u){return getAdm($u).ownKeys_()},preventExtensions:function _u($u){die(13)}};function asDynamicObservableObject(_u,$u){var Tu,Cu;return assertProxies(),_u=asObservableObject(_u,$u),(Cu=(Tu=_u[$mobx]).proxy_)!=null?Cu:Tu.proxy_=new Proxy(_u,objectProxyTraps)}function hasInterceptors(_u){return _u.interceptors_!==void 0&&_u.interceptors_.length>0}function registerInterceptor(_u,$u){var Tu=_u.interceptors_||(_u.interceptors_=[]);return Tu.push($u),once(function(){var Cu=Tu.indexOf($u);Cu!==-1&&Tu.splice(Cu,1)})}function interceptChange(_u,$u){var Tu=untrackedStart();try{for(var Cu=[].concat(_u.interceptors_||[]),Pu=0,Bu=Cu.length;Pu<Bu&&($u=Cu[Pu]($u),$u&&!$u.type&&die(14),!!$u);Pu++);return $u}finally{untrackedEnd(Tu)}}function hasListeners(_u){return _u.changeListeners_!==void 0&&_u.changeListeners_.length>0}function registerListener(_u,$u){var Tu=_u.changeListeners_||(_u.changeListeners_=[]);return Tu.push($u),once(function(){var Cu=Tu.indexOf($u);Cu!==-1&&Tu.splice(Cu,1)})}function notifyListeners(_u,$u){var Tu=untrackedStart(),Cu=_u.changeListeners_;if(!!Cu){Cu=Cu.slice();for(var Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Cu[Pu]($u);untrackedEnd(Tu)}}function makeObservable(_u,$u,Tu){var Cu=asObservableObject(_u,Tu)[$mobx];startBatch();try{var Pu;(Pu=$u)!=null||($u=collectStoredAnnotations(_u)),ownKeys($u).forEach(function(Bu){return Cu.make_(Bu,$u[Bu])})}finally{endBatch()}return _u}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function _u($u,Tu){var Cu=$u[$mobx];return Tu===$mobx?Cu:Tu==="length"?Cu.getArrayLength_():typeof Tu=="string"&&!isNaN(Tu)?Cu.get_(parseInt(Tu)):hasProp(arrayExtensions,Tu)?arrayExtensions[Tu]:$u[Tu]},set:function _u($u,Tu,Cu){var Pu=$u[$mobx];return Tu==="length"&&Pu.setArrayLength_(Cu),typeof Tu=="symbol"||isNaN(Tu)?$u[Tu]=Cu:Pu.set_(parseInt(Tu),Cu),!0},preventExtensions:function _u(){die(15)}},ObservableArrayAdministration=function(){function _u(Tu,Cu,Pu,Bu){Tu===void 0&&(Tu="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Pu,this.legacyMode_=Bu,this.atom_=new Atom(Tu),this.enhancer_=function(Lu,Ru){return Cu(Lu,Ru,"ObservableArray[..]")}}var $u=_u.prototype;return $u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.dehanceValues_=function(Cu){return this.dehancer!==void 0&&Cu.length>0?Cu.map(this.dehancer):Cu},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.observe_=function(Cu,Pu){return Pu===void 0&&(Pu=!1),Pu&&Cu({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Cu)},$u.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},$u.setArrayLength_=function(Cu){(typeof Cu!="number"||isNaN(Cu)||Cu<0)&&die("Out of range: "+Cu);var Pu=this.values_.length;if(Cu!==Pu)if(Cu>Pu){for(var Bu=new Array(Cu-Pu),Lu=0;Lu<Cu-Pu;Lu++)Bu[Lu]=void 0;this.spliceWithArray_(Pu,0,Bu)}else this.spliceWithArray_(Cu,Pu-Cu)},$u.updateArrayLength_=function(Cu,Pu){Cu!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Pu,this.legacyMode_&&Pu>0&&reserveArrayBuffer(Cu+Pu+1)},$u.spliceWithArray_=function(Cu,Pu,Bu){var Lu=this;this.atom_;var Ru=this.values_.length;if(Cu===void 0?Cu=0:Cu>Ru?Cu=Ru:Cu<0&&(Cu=Math.max(0,Ru+Cu)),arguments.length===1?Pu=Ru-Cu:Pu==null?Pu=0:Pu=Math.max(0,Math.min(Pu,Ru-Cu)),Bu===void 0&&(Bu=EMPTY_ARRAY),hasInterceptors(this)){var Ou=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Cu,removedCount:Pu,added:Bu});if(!Ou)return EMPTY_ARRAY;Pu=Ou.removedCount,Bu=Ou.added}if(Bu=Bu.length===0?Bu:Bu.map(function(Vu){return Lu.enhancer_(Vu,void 0)}),this.legacyMode_){var Du=Bu.length-Pu;this.updateArrayLength_(Ru,Du)}var Fu=this.spliceItemsIntoValues_(Cu,Pu,Bu);return(Pu!==0||Bu.length!==0)&&this.notifyArraySplice_(Cu,Bu,Fu),this.dehanceValues_(Fu)},$u.spliceItemsIntoValues_=function(Cu,Pu,Bu){if(Bu.length<MAX_SPLICE_SIZE){var Lu;return(Lu=this.values_).splice.apply(Lu,[Cu,Pu].concat(Bu))}else{var Ru=this.values_.slice(Cu,Cu+Pu),Ou=this.values_.slice(Cu+Pu);this.values_.length+=Bu.length-Pu;for(var Du=0;Du<Bu.length;Du++)this.values_[Cu+Du]=Bu[Du];for(var Fu=0;Fu<Ou.length;Fu++)this.values_[Cu+Bu.length+Fu]=Ou[Fu];return Ru}},$u.notifyArrayChildUpdate_=function(Cu,Pu,Bu){var Lu=!this.owned_&&isSpyEnabled(),Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Cu,newValue:Pu,oldValue:Bu}:null;this.atom_.reportChanged(),Ru&&notifyListeners(this,Ou)},$u.notifyArraySplice_=function(Cu,Pu,Bu){var Lu=!this.owned_&&isSpyEnabled(),Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Cu,removed:Bu,added:Pu,removedCount:Bu.length,addedCount:Pu.length}:null;this.atom_.reportChanged(),Ru&&notifyListeners(this,Ou)},$u.get_=function(Cu){if(Cu<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Cu]);console.warn("[mobx.array] Attempt to read an array index ("+Cu+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},$u.set_=function(Cu,Pu){var Bu=this.values_;if(Cu<Bu.length){this.atom_;var Lu=Bu[Cu];if(hasInterceptors(this)){var Ru=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Cu,newValue:Pu});if(!Ru)return;Pu=Ru.newValue}Pu=this.enhancer_(Pu,Lu);var Ou=Pu!==Lu;Ou&&(Bu[Cu]=Pu,this.notifyArrayChildUpdate_(Cu,Pu,Lu))}else Cu===Bu.length?this.spliceWithArray_(Cu,0,[Pu]):die(17,Cu,Bu.length)},_u}();function createObservableArray(_u,$u,Tu,Cu){Tu===void 0&&(Tu="ObservableArray"),Cu===void 0&&(Cu=!1),assertProxies();var Pu=new ObservableArrayAdministration(Tu,$u,Cu,!1);addHiddenFinalProp(Pu.values_,$mobx,Pu);var Bu=new Proxy(Pu.values_,arrayTraps);if(Pu.proxy_=Bu,_u&&_u.length){var Lu=allowStateChangesStart(!0);Pu.spliceWithArray_(0,0,_u),allowStateChangesEnd(Lu)}return Bu}var arrayExtensions={clear:function _u(){return this.splice(0)},replace:function _u($u){var Tu=this[$mobx];return Tu.spliceWithArray_(0,Tu.values_.length,$u)},toJSON:function _u(){return this.slice()},splice:function _u($u,Tu){for(var Cu=arguments.length,Pu=new Array(Cu>2?Cu-2:0),Bu=2;Bu<Cu;Bu++)Pu[Bu-2]=arguments[Bu];var Lu=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Lu.spliceWithArray_($u);case 2:return Lu.spliceWithArray_($u,Tu)}return Lu.spliceWithArray_($u,Tu,Pu)},spliceWithArray:function _u($u,Tu,Cu){return this[$mobx].spliceWithArray_($u,Tu,Cu)},push:function _u(){for(var $u=this[$mobx],Tu=arguments.length,Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=arguments[Pu];return $u.spliceWithArray_($u.values_.length,0,Cu),$u.values_.length},pop:function _u(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function _u(){return this.splice(0,1)[0]},unshift:function _u(){for(var $u=this[$mobx],Tu=arguments.length,Cu=new Array(Tu),Pu=0;Pu<Tu;Pu++)Cu[Pu]=arguments[Pu];return $u.spliceWithArray_(0,0,Cu),$u.values_.length},reverse:function _u(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function _u(){globalState.trackingDerivation&&die(37,"sort");var $u=this.slice();return $u.sort.apply($u,arguments),this.replace($u),this},remove:function _u($u){var Tu=this[$mobx],Cu=Tu.dehanceValues_(Tu.values_).indexOf($u);return Cu>-1?(this.splice(Cu,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(_u,$u){typeof Array.prototype[_u]=="function"&&(arrayExtensions[_u]=$u(_u))}function simpleFunc(_u){return function(){var $u=this[$mobx];$u.atom_.reportObserved();var Tu=$u.dehanceValues_($u.values_);return Tu[_u].apply(Tu,arguments)}}function mapLikeFunc(_u){return function($u,Tu){var Cu=this,Pu=this[$mobx];Pu.atom_.reportObserved();var Bu=Pu.dehanceValues_(Pu.values_);return Bu[_u](function(Lu,Ru){return $u.call(Tu,Lu,Ru,Cu)})}}function reduceLikeFunc(_u){return function(){var $u=this,Tu=this[$mobx];Tu.atom_.reportObserved();var Cu=Tu.dehanceValues_(Tu.values_),Pu=arguments[0];return arguments[0]=function(Bu,Lu,Ru){return Pu(Bu,Lu,Ru,$u)},Cu[_u].apply(Cu,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(_u){return isObject$2(_u)&&isObservableArrayAdministration(_u[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function _u(Tu,Cu,Pu){var Bu=this;Cu===void 0&&(Cu=deepEnhancer),Pu===void 0&&(Pu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Cu,this.name_=Pu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Bu.merge(Tu)})}var $u=_u.prototype;return $u.has_=function(Cu){return this.data_.has(Cu)},$u.has=function(Cu){var Pu=this;if(!globalState.trackingDerivation)return this.has_(Cu);var Bu=this.hasMap_.get(Cu);if(!Bu){var Lu=Bu=new ObservableValue(this.has_(Cu),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Cu,Lu),onBecomeUnobserved(Lu,function(){return Pu.hasMap_.delete(Cu)})}return Bu.get()},$u.set=function(Cu,Pu){var Bu=this.has_(Cu);if(hasInterceptors(this)){var Lu=interceptChange(this,{type:Bu?UPDATE:ADD,object:this,newValue:Pu,name:Cu});if(!Lu)return this;Pu=Lu.newValue}return Bu?this.updateValue_(Cu,Pu):this.addValue_(Cu,Pu),this},$u.delete=function(Cu){var Pu=this;if(this.keysAtom_,hasInterceptors(this)){var Bu=interceptChange(this,{type:DELETE,object:this,name:Cu});if(!Bu)return!1}if(this.has_(Cu)){var Lu=isSpyEnabled(),Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Cu).value_,name:Cu}:null;return transaction(function(){var Du;Pu.keysAtom_.reportChanged(),(Du=Pu.hasMap_.get(Cu))==null||Du.setNewValue_(!1);var Fu=Pu.data_.get(Cu);Fu.setNewValue_(void 0),Pu.data_.delete(Cu)}),Ru&&notifyListeners(this,Ou),!0}return!1},$u.updateValue_=function(Cu,Pu){var Bu=this.data_.get(Cu);if(Pu=Bu.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED){var Lu=isSpyEnabled(),Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Bu.value_,name:Cu,newValue:Pu}:null;Bu.setNewValue_(Pu),Ru&&notifyListeners(this,Ou)}},$u.addValue_=function(Cu,Pu){var Bu=this;this.keysAtom_,transaction(function(){var Du,Fu=new ObservableValue(Pu,Bu.enhancer_,"ObservableMap.key",!1);Bu.data_.set(Cu,Fu),Pu=Fu.value_,(Du=Bu.hasMap_.get(Cu))==null||Du.setNewValue_(!0),Bu.keysAtom_.reportChanged()});var Lu=isSpyEnabled(),Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Cu,newValue:Pu}:null;Ru&&notifyListeners(this,Ou)},$u.get=function(Cu){return this.has(Cu)?this.dehanceValue_(this.data_.get(Cu).get()):this.dehanceValue_(void 0)},$u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},$u.values=function(){var Cu=this,Pu=this.keys();return makeIterable({next:function(){var Lu=Pu.next(),Ru=Lu.done,Ou=Lu.value;return{done:Ru,value:Ru?void 0:Cu.get(Ou)}}})},$u.entries=function(){var Cu=this,Pu=this.keys();return makeIterable({next:function(){var Lu=Pu.next(),Ru=Lu.done,Ou=Lu.value;return{done:Ru,value:Ru?void 0:[Ou,Cu.get(Ou)]}}})},$u[_Symbol$iterator]=function(){return this.entries()},$u.forEach=function(Cu,Pu){for(var Bu=_createForOfIteratorHelperLoose(this),Lu;!(Lu=Bu()).done;){var Ru=Lu.value,Ou=Ru[0],Du=Ru[1];Cu.call(Pu,Du,Ou,this)}},$u.merge=function(Cu){var Pu=this;return isObservableMap(Cu)&&(Cu=new Map(Cu)),transaction(function(){isPlainObject(Cu)?getPlainObjectKeys(Cu).forEach(function(Bu){return Pu.set(Bu,Cu[Bu])}):Array.isArray(Cu)?Cu.forEach(function(Bu){var Lu=Bu[0],Ru=Bu[1];return Pu.set(Lu,Ru)}):isES6Map(Cu)?(Cu.constructor!==Map&&die(19,Cu),Cu.forEach(function(Bu,Lu){return Pu.set(Lu,Bu)})):Cu!=null&&die(20,Cu)}),this},$u.clear=function(){var Cu=this;transaction(function(){untracked(function(){for(var Pu=_createForOfIteratorHelperLoose(Cu.keys()),Bu;!(Bu=Pu()).done;){var Lu=Bu.value;Cu.delete(Lu)}})})},$u.replace=function(Cu){var Pu=this;return transaction(function(){for(var Bu=convertToMap(Cu),Lu=new Map,Ru=!1,Ou=_createForOfIteratorHelperLoose(Pu.data_.keys()),Du;!(Du=Ou()).done;){var Fu=Du.value;if(!Bu.has(Fu)){var Vu=Pu.delete(Fu);if(Vu)Ru=!0;else{var ku=Pu.data_.get(Fu);Lu.set(Fu,ku)}}}for(var Nu=_createForOfIteratorHelperLoose(Bu.entries()),Gu;!(Gu=Nu()).done;){var ju=Gu.value,Hu=ju[0],Uu=ju[1],zu=Pu.data_.has(Hu);if(Pu.set(Hu,Uu),Pu.data_.has(Hu)){var Wu=Pu.data_.get(Hu);Lu.set(Hu,Wu),zu||(Ru=!0)}}if(!Ru)if(Pu.data_.size!==Lu.size)Pu.keysAtom_.reportChanged();else for(var Qu=Pu.data_.keys(),Ku=Lu.keys(),Yu=Qu.next(),Xc=Ku.next();!Yu.done;){if(Yu.value!==Xc.value){Pu.keysAtom_.reportChanged();break}Yu=Qu.next(),Xc=Ku.next()}Pu.data_=Lu}),this},$u.toString=function(){return"[object ObservableMap]"},$u.toJSON=function(){return Array.from(this)},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},_createClass(_u,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),_u}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(_u){if(isES6Map(_u)||isObservableMap(_u))return _u;if(Array.isArray(_u))return new Map(_u);if(isPlainObject(_u)){var $u=new Map;for(var Tu in _u)$u.set(Tu,_u[Tu]);return $u}else return die(21,_u)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function _u(Tu,Cu,Pu){Cu===void 0&&(Cu=deepEnhancer),Pu===void 0&&(Pu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Pu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Bu,Lu){return Cu(Bu,Lu,Pu)},Tu&&this.replace(Tu)}var $u=_u.prototype;return $u.dehanceValue_=function(Cu){return this.dehancer!==void 0?this.dehancer(Cu):Cu},$u.clear=function(){var Cu=this;transaction(function(){untracked(function(){for(var Pu=_createForOfIteratorHelperLoose(Cu.data_.values()),Bu;!(Bu=Pu()).done;){var Lu=Bu.value;Cu.delete(Lu)}})})},$u.forEach=function(Cu,Pu){for(var Bu=_createForOfIteratorHelperLoose(this),Lu;!(Lu=Bu()).done;){var Ru=Lu.value;Cu.call(Pu,Ru,Ru,this)}},$u.add=function(Cu){var Pu=this;if(this.atom_,hasInterceptors(this)){var Bu=interceptChange(this,{type:ADD,object:this,newValue:Cu});if(!Bu)return this}if(!this.has(Cu)){transaction(function(){Pu.data_.add(Pu.enhancer_(Cu,void 0)),Pu.atom_.reportChanged()});var Lu=!1,Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Cu}:null;Ru&&notifyListeners(this,Ou)}return this},$u.delete=function(Cu){var Pu=this;if(hasInterceptors(this)){var Bu=interceptChange(this,{type:DELETE,object:this,oldValue:Cu});if(!Bu)return!1}if(this.has(Cu)){var Lu=!1,Ru=hasListeners(this),Ou=Ru||Lu?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Cu}:null;return transaction(function(){Pu.atom_.reportChanged(),Pu.data_.delete(Cu)}),Ru&&notifyListeners(this,Ou),!0}return!1},$u.has=function(Cu){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Cu))},$u.entries=function(){var Cu=0,Pu=Array.from(this.keys()),Bu=Array.from(this.values());return makeIterable({next:function(){var Ru=Cu;return Cu+=1,Ru<Bu.length?{value:[Pu[Ru],Bu[Ru]],done:!1}:{done:!0}}})},$u.keys=function(){return this.values()},$u.values=function(){this.atom_.reportObserved();var Cu=this,Pu=0,Bu=Array.from(this.data_.values());return makeIterable({next:function(){return Pu<Bu.length?{value:Cu.dehanceValue_(Bu[Pu++]),done:!1}:{done:!0}}})},$u.replace=function(Cu){var Pu=this;return isObservableSet(Cu)&&(Cu=new Set(Cu)),transaction(function(){Array.isArray(Cu)?(Pu.clear(),Cu.forEach(function(Bu){return Pu.add(Bu)})):isES6Set(Cu)?(Pu.clear(),Cu.forEach(function(Bu){return Pu.add(Bu)})):Cu!=null&&die("Cannot initialize set from "+Cu)}),this},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.toJSON=function(){return Array.from(this)},$u.toString=function(){return"[object ObservableSet]"},$u[_Symbol$iterator$1]=function(){return this.values()},_createClass(_u,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),_u}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function _u(Tu,Cu,Pu,Bu){Cu===void 0&&(Cu=new Map),Bu===void 0&&(Bu=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Tu,this.values_=Cu,this.name_=Pu,this.defaultAnnotation_=Bu,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var $u=_u.prototype;return $u.getObservablePropValue_=function(Cu){return this.values_.get(Cu).get()},$u.setObservablePropValue_=function(Cu,Pu){var Bu=this.values_.get(Cu);if(Bu instanceof ComputedValue)return Bu.set(Pu),!0;if(hasInterceptors(this)){var Lu=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Cu,newValue:Pu});if(!Lu)return null;Pu=Lu.newValue}if(Pu=Bu.prepareNewValue_(Pu),Pu!==globalState.UNCHANGED){var Ru=hasListeners(this),Ou=!1,Du=Ru||Ou?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Bu.value_,name:Cu,newValue:Pu}:null;Bu.setNewValue_(Pu),Ru&&notifyListeners(this,Du)}return!0},$u.get_=function(Cu){return globalState.trackingDerivation&&!hasProp(this.target_,Cu)&&this.has_(Cu),this.target_[Cu]},$u.set_=function(Cu,Pu,Bu){return Bu===void 0&&(Bu=!1),hasProp(this.target_,Cu)?this.values_.has(Cu)?this.setObservablePropValue_(Cu,Pu):Bu?Reflect.set(this.target_,Cu,Pu):(this.target_[Cu]=Pu,!0):this.extend_(Cu,{value:Pu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Bu)},$u.has_=function(Cu){if(!globalState.trackingDerivation)return Cu in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Pu=this.pendingKeys_.get(Cu);return Pu||(Pu=new ObservableValue(Cu in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Cu,Pu)),Pu.get()},$u.make_=function(Cu,Pu){if(Pu===!0&&(Pu=this.defaultAnnotation_),Pu!==!1){if(!(Cu in this.target_)){var Bu;if((Bu=this.target_[storedAnnotationsSymbol])!=null&&Bu[Cu])return;die(1,Pu.annotationType_,this.name_+"."+Cu.toString())}for(var Lu=this.target_;Lu&&Lu!==objectPrototype;){var Ru=getDescriptor(Lu,Cu);if(Ru){var Ou=Pu.make_(this,Cu,Ru,Lu);if(Ou===0)return;if(Ou===1)break}Lu=Object.getPrototypeOf(Lu)}recordAnnotationApplied(this,Pu,Cu)}},$u.extend_=function(Cu,Pu,Bu,Lu){if(Lu===void 0&&(Lu=!1),Bu===!0&&(Bu=this.defaultAnnotation_),Bu===!1)return this.defineProperty_(Cu,Pu,Lu);var Ru=Bu.extend_(this,Cu,Pu,Lu);return Ru&&recordAnnotationApplied(this,Bu,Cu),Ru},$u.defineProperty_=function(Cu,Pu,Bu){Bu===void 0&&(Bu=!1);try{startBatch();var Lu=this.delete_(Cu);if(!Lu)return Lu;if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:Pu.value});if(!Ru)return null;var Ou=Ru.newValue;Pu.value!==Ou&&(Pu=_extends({},Pu,{value:Ou}))}if(Bu){if(!Reflect.defineProperty(this.target_,Cu,Pu))return!1}else defineProperty(this.target_,Cu,Pu);this.notifyPropertyAddition_(Cu,Pu.value)}finally{endBatch()}return!0},$u.defineObservableProperty_=function(Cu,Pu,Bu,Lu){Lu===void 0&&(Lu=!1);try{startBatch();var Ru=this.delete_(Cu);if(!Ru)return Ru;if(hasInterceptors(this)){var Ou=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:Pu});if(!Ou)return null;Pu=Ou.newValue}var Du=getCachedObservablePropDescriptor(Cu),Fu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Du.get,set:Du.set};if(Lu){if(!Reflect.defineProperty(this.target_,Cu,Fu))return!1}else defineProperty(this.target_,Cu,Fu);var Vu=new ObservableValue(Pu,Bu,"ObservableObject.key",!1);this.values_.set(Cu,Vu),this.notifyPropertyAddition_(Cu,Vu.value_)}finally{endBatch()}return!0},$u.defineComputedProperty_=function(Cu,Pu,Bu){Bu===void 0&&(Bu=!1);try{startBatch();var Lu=this.delete_(Cu);if(!Lu)return Lu;if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:ADD,newValue:void 0});if(!Ru)return null}Pu.name||(Pu.name="ObservableObject.key"),Pu.context=this.proxy_||this.target_;var Ou=getCachedObservablePropDescriptor(Cu),Du={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Ou.get,set:Ou.set};if(Bu){if(!Reflect.defineProperty(this.target_,Cu,Du))return!1}else defineProperty(this.target_,Cu,Du);this.values_.set(Cu,new ComputedValue(Pu)),this.notifyPropertyAddition_(Cu,void 0)}finally{endBatch()}return!0},$u.delete_=function(Cu,Pu){if(Pu===void 0&&(Pu=!1),!hasProp(this.target_,Cu))return!0;if(hasInterceptors(this)){var Bu=interceptChange(this,{object:this.proxy_||this.target_,name:Cu,type:REMOVE});if(!Bu)return null}try{var Lu,Ru;startBatch();var Ou=hasListeners(this),Du=!1,Fu=this.values_.get(Cu),Vu=void 0;if(!Fu&&(Ou||Du)){var ku;Vu=(ku=getDescriptor(this.target_,Cu))==null?void 0:ku.value}if(Pu){if(!Reflect.deleteProperty(this.target_,Cu))return!1}else delete this.target_[Cu];if(Fu&&(this.values_.delete(Cu),Fu instanceof ObservableValue&&(Vu=Fu.value_),propagateChanged(Fu)),this.keysAtom_.reportChanged(),(Lu=this.pendingKeys_)==null||(Ru=Lu.get(Cu))==null||Ru.set(Cu in this.target_),Ou||Du){var Nu={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Vu,name:Cu};Ou&&notifyListeners(this,Nu)}}finally{endBatch()}return!0},$u.observe_=function(Cu,Pu){return registerListener(this,Cu)},$u.intercept_=function(Cu){return registerInterceptor(this,Cu)},$u.notifyPropertyAddition_=function(Cu,Pu){var Bu,Lu,Ru=hasListeners(this),Ou=!1;if(Ru||Ou){var Du=Ru||Ou?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Cu,newValue:Pu}:null;Ru&&notifyListeners(this,Du)}(Bu=this.pendingKeys_)==null||(Lu=Bu.get(Cu))==null||Lu.set(!0),this.keysAtom_.reportChanged()},$u.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},$u.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},_u}();function asObservableObject(_u,$u){var Tu;if(hasProp(_u,$mobx))return _u;var Cu=(Tu=$u==null?void 0:$u.name)!=null?Tu:"ObservableObject",Pu=new ObservableObjectAdministration(_u,new Map,String(Cu),getAnnotationFromOptions($u));return addHiddenProp(_u,$mobx,Pu),_u}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(_u){return descriptorCache[_u]||(descriptorCache[_u]={get:function(){return this[$mobx].getObservablePropValue_(_u)},set:function(Tu){return this[$mobx].setObservablePropValue_(_u,Tu)}})}function isObservableObject(_u){return isObject$2(_u)?isObservableObjectAdministration(_u[$mobx]):!1}function recordAnnotationApplied(_u,$u,Tu){var Cu;(Cu=_u.target_[storedAnnotationsSymbol])==null||delete Cu[Tu]}var ENTRY_0=createArrayEntryDescriptor(0),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function _u(){};function inherit(_u,$u){Object.setPrototypeOf?Object.setPrototypeOf(_u.prototype,$u):_u.prototype.__proto__!==void 0?_u.prototype.__proto__=$u:_u.prototype=$u}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(_u,$u,Tu){_inheritsLoose(Cu,_u);function Cu(Bu,Lu,Ru,Ou){var Du;Ru===void 0&&(Ru="ObservableArray"),Ou===void 0&&(Ou=!1),Du=_u.call(this)||this;var Fu=new ObservableArrayAdministration(Ru,Lu,Ou,!0);if(Fu.proxy_=_assertThisInitialized(Du),addHiddenFinalProp(_assertThisInitialized(Du),$mobx,Fu),Bu&&Bu.length){var Vu=allowStateChangesStart(!0);Du.spliceWithArray(0,0,Bu),allowStateChangesEnd(Vu)}return Object.defineProperty(_assertThisInitialized(Du),"0",ENTRY_0),Du}var Pu=Cu.prototype;return Pu.concat=function(){this[$mobx].atom_.reportObserved();for(var Lu=arguments.length,Ru=new Array(Lu),Ou=0;Ou<Lu;Ou++)Ru[Ou]=arguments[Ou];return Array.prototype.concat.apply(this.slice(),Ru.map(function(Du){return isObservableArray(Du)?Du.slice():Du}))},Pu[Tu]=function(){var Bu=this,Lu=0;return makeIterable({next:function(){return Lu<Bu.length?{value:Bu[Lu++],done:!1}:{done:!0,value:void 0}}})},_createClass(Cu,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Lu){this[$mobx].setArrayLength_(Lu)}},{key:$u,get:function(){return"Array"}}]),Cu}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(_u){var $u=_u[0],Tu=_u[1];$u!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,$u,Tu)});function createArrayEntryDescriptor(_u){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(_u)},set:function(Tu){this[$mobx].set_(_u,Tu)}}}function createArrayBufferItem(_u){defineProperty(LegacyObservableArray.prototype,""+_u,createArrayEntryDescriptor(_u))}function reserveArrayBuffer(_u){if(_u>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var $u=OBSERVABLE_ARRAY_BUFFER_SIZE;$u<_u+100;$u++)createArrayBufferItem($u);OBSERVABLE_ARRAY_BUFFER_SIZE=_u}}reserveArrayBuffer(1e3);function createLegacyArray(_u,$u,Tu){return new LegacyObservableArray(_u,$u,Tu)}function getAtom(_u,$u){if(typeof _u=="object"&&_u!==null){if(isObservableArray(_u))return $u!==void 0&&die(23),_u[$mobx].atom_;if(isObservableSet(_u))return _u[$mobx];if(isObservableMap(_u)){if($u===void 0)return _u.keysAtom_;var Tu=_u.data_.get($u)||_u.hasMap_.get($u);return Tu||die(25,$u,getDebugName(_u)),Tu}if(isObservableObject(_u)){if(!$u)return die(26);var Cu=_u[$mobx].values_.get($u);return Cu||die(27,$u,getDebugName(_u)),Cu}if(isAtom(_u)||isComputedValue(_u)||isReaction(_u))return _u}else if(isFunction(_u)&&isReaction(_u[$mobx]))return _u[$mobx];die(28)}function getAdministration(_u,$u){if(_u||die(29),$u!==void 0)return getAdministration(getAtom(_u,$u));if(isAtom(_u)||isComputedValue(_u)||isReaction(_u)||isObservableMap(_u)||isObservableSet(_u))return _u;if(_u[$mobx])return _u[$mobx];die(24,_u)}function getDebugName(_u,$u){var Tu;if($u!==void 0)Tu=getAtom(_u,$u);else{if(isAction(_u))return _u.name;isObservableObject(_u)||isObservableMap(_u)||isObservableSet(_u)?Tu=getAdministration(_u):Tu=getAtom(_u)}return Tu.name_}var toString=objectPrototype.toString;function deepEqual(_u,$u,Tu){return Tu===void 0&&(Tu=-1),eq$1(_u,$u,Tu)}function eq$1(_u,$u,Tu,Cu,Pu){if(_u===$u)return _u!==0||1/_u===1/$u;if(_u==null||$u==null)return!1;if(_u!==_u)return $u!==$u;var Bu=typeof _u;if(Bu!=="function"&&Bu!=="object"&&typeof $u!="object")return!1;var Lu=toString.call(_u);if(Lu!==toString.call($u))return!1;switch(Lu){case"[object RegExp]":case"[object String]":return""+_u==""+$u;case"[object Number]":return+_u!=+_u?+$u!=+$u:+_u==0?1/+_u===1/$u:+_u==+$u;case"[object Date]":case"[object Boolean]":return+_u==+$u;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(_u)===Symbol.valueOf.call($u);case"[object Map]":case"[object Set]":Tu>=0&&Tu++;break}_u=unwrap(_u),$u=unwrap($u);var Ru=Lu==="[object Array]";if(!Ru){if(typeof _u!="object"||typeof $u!="object")return!1;var Ou=_u.constructor,Du=$u.constructor;if(Ou!==Du&&!(isFunction(Ou)&&Ou instanceof Ou&&isFunction(Du)&&Du instanceof Du)&&"constructor"in _u&&"constructor"in $u)return!1}if(Tu===0)return!1;Tu<0&&(Tu=-1),Cu=Cu||[],Pu=Pu||[];for(var Fu=Cu.length;Fu--;)if(Cu[Fu]===_u)return Pu[Fu]===$u;if(Cu.push(_u),Pu.push($u),Ru){if(Fu=_u.length,Fu!==$u.length)return!1;for(;Fu--;)if(!eq$1(_u[Fu],$u[Fu],Tu-1,Cu,Pu))return!1}else{var Vu=Object.keys(_u),ku;if(Fu=Vu.length,Object.keys($u).length!==Fu)return!1;for(;Fu--;)if(ku=Vu[Fu],!(hasProp($u,ku)&&eq$1(_u[ku],$u[ku],Tu-1,Cu,Pu)))return!1}return Cu.pop(),Pu.pop(),!0}function unwrap(_u){return isObservableArray(_u)?_u.slice():isES6Map(_u)||isObservableMap(_u)||isES6Set(_u)||isObservableSet(_u)?Array.from(_u.entries()):_u}function makeIterable(_u){return _u[Symbol.iterator]=getSelf,_u}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(_u){var $u=getGlobal();typeof $u[_u]=="undefined"&&die("MobX requires global '"+_u+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(_u){_u()}function observerBatching(_u){_u||(_u=defaultNoopBatch),configure({reactionScheduler:_u})}function printDebugValue(_u){return getDependencyTree(_u)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(_u){var $u={reaction:_u,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return $u}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(_u){var $u=new Map,Tu=1,Cu=new _u(function(Bu){var Lu=$u.get(Bu);Lu&&(Lu.reaction.dispose(),$u.delete(Bu))});return{addReactionToTrack:function(Pu,Bu,Lu){var Ru=Tu++;return Cu.register(Lu,Ru,Pu),Pu.current=createTrackingData(Bu),Pu.current.finalizationRegistryCleanupToken=Ru,$u.set(Ru,Pu.current),Pu.current},recordReactionAsCommitted:function(Pu){Cu.unregister(Pu),Pu.current&&Pu.current.finalizationRegistryCleanupToken&&$u.delete(Pu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(_u){var $u=typeof Symbol=="function"&&Symbol.iterator,Tu=$u&&_u[$u],Cu=0;if(Tu)return Tu.call(_u);if(_u&&typeof _u.length=="number")return{next:function(){return _u&&Cu>=_u.length&&(_u=void 0),{value:_u&&_u[Cu++],done:!_u}}};throw new TypeError($u?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var _u=new Set,$u;function Tu(){$u&&(clearTimeout($u),Ru())}function Cu(){var Ou,Du;if(_u.size>0){try{for(var Fu=__values(_u),Vu=Fu.next();!Vu.done;Vu=Fu.next()){var ku=Vu.value,Nu=ku.current;Nu&&(Nu.reaction.dispose(),ku.current=null)}}catch(Gu){Ou={error:Gu}}finally{try{Vu&&!Vu.done&&(Du=Fu.return)&&Du.call(Fu)}finally{if(Ou)throw Ou.error}}_u.clear()}$u&&(clearTimeout($u),$u=void 0)}function Pu(){$u===void 0&&($u=setTimeout(Ru,CLEANUP_TIMER_LOOP_MILLIS))}function Bu(Ou){_u.add(Ou),Pu()}function Lu(Ou){_u.delete(Ou)}function Ru(){$u=void 0;var Ou=Date.now();_u.forEach(function(Du){var Fu=Du.current;Fu&&Ou>=Fu.cleanAt&&(Fu.reaction.dispose(),Du.current=null,_u.delete(Du))}),_u.size>0&&Pu()}return{addReactionToTrack:function(Ou,Du,Fu){return Ou.current=createTrackingData(Du),Bu(Ou),Ou.current},recordReactionAsCommitted:Lu,forceCleanupTimerToRunNowForTests:Tu,resetCleanupScheduleForTests:Cu}}var _a=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a.addReactionToTrack,recordReactionAsCommitted=_a.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(_u,$u){var Tu=typeof Symbol=="function"&&_u[Symbol.iterator];if(!Tu)return _u;var Cu=Tu.call(_u),Pu,Bu=[],Lu;try{for(;($u===void 0||$u-- >0)&&!(Pu=Cu.next()).done;)Bu.push(Pu.value)}catch(Ru){Lu={error:Ru}}finally{try{Pu&&!Pu.done&&(Tu=Cu.return)&&Tu.call(Cu)}finally{if(Lu)throw Lu.error}}return Bu};function observerComponentNameFor(_u){return"observer".concat(_u)}var ObjectToBeRetainedByReact=function(){function _u(){}return _u}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(_u,$u){$u===void 0&&($u="observed");var Tu=__read(React.useState(objectToBeRetainedByReactFactory),1),Cu=Tu[0],Pu=__read(React.useState(),2),Bu=Pu[1],Lu=function(){return Bu([])},Ru=React.useRef(null);if(!Ru.current)var Ou=new Reaction(observerComponentNameFor($u),function(){Du.mounted?Lu():Du.changedBeforeMount=!0}),Du=addReactionToTrack(Ru,Ou,Cu);var Fu=Ru.current.reaction;React.useDebugValue(Fu,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Ru),Ru.current?(Ru.current.mounted=!0,Ru.current.changedBeforeMount&&(Ru.current.changedBeforeMount=!1,Lu())):(Ru.current={reaction:new Reaction(observerComponentNameFor($u),function(){Lu()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Lu()),function(){Ru.current.reaction.dispose(),Ru.current=null}},[]);var Vu,ku;if(Fu.track(function(){try{Vu=_u()}catch(Nu){ku=Nu}}),ku)throw ku;return Vu}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(_u){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(_u){return null}).$$typeof;function observer$1(_u,$u){var Tu;if(ReactMemoSymbol&&_u.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Cu=(Tu=$u==null?void 0:$u.forwardRef)!==null&&Tu!==void 0?Tu:!1,Pu=_u,Bu=_u.displayName||_u.name;if(ReactForwardRefSymbol&&_u.$$typeof===ReactForwardRefSymbol&&(Cu=!0,Pu=_u.render,typeof Pu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Lu=function(Ru,Ou){return useObserver(function(){return Pu(Ru,Ou)},Bu)};return Bu!==""&&(Lu.displayName=Bu),_u.contextTypes&&(Lu.contextTypes=_u.contextTypes),Cu&&(Lu=react$1.exports.forwardRef(Lu)),Lu=react$1.exports.memo(Lu),copyStaticProperties(_u,Lu),Lu}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(_u,$u){Object.keys(_u).forEach(function(Tu){hoistBlackList[Tu]||Object.defineProperty($u,Tu,Object.getOwnPropertyDescriptor(_u,Tu))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(_u){if(typeof Symbol=="function")return Symbol(_u);var $u="__$mobx-react "+_u+" ("+symbolId+")";return symbolId++,$u}var createdSymbols={};function newSymbol(_u){return createdSymbols[_u]||(createdSymbols[_u]=createSymbol(_u)),createdSymbols[_u]}function shallowEqual(_u,$u){if(is$2(_u,$u))return!0;if(typeof _u!="object"||_u===null||typeof $u!="object"||$u===null)return!1;var Tu=Object.keys(_u),Cu=Object.keys($u);if(Tu.length!==Cu.length)return!1;for(var Pu=0;Pu<Tu.length;Pu++)if(!Object.hasOwnProperty.call($u,Tu[Pu])||!is$2(_u[Tu[Pu]],$u[Tu[Pu]]))return!1;return!0}function is$2(_u,$u){return _u===$u?_u!==0||1/_u===1/$u:_u!==_u&&$u!==$u}function setHiddenProp(_u,$u,Tu){Object.hasOwnProperty.call(_u,$u)?_u[$u]=Tu:Object.defineProperty(_u,$u,{enumerable:!1,configurable:!0,writable:!0,value:Tu})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(_u,$u){var Tu=_u[mobxMixins]=_u[mobxMixins]||{},Cu=Tu[$u]=Tu[$u]||{};return Cu.locks=Cu.locks||0,Cu.methods=Cu.methods||[],Cu}function wrapper(_u,$u){for(var Tu=this,Cu=arguments.length,Pu=new Array(Cu>2?Cu-2:0),Bu=2;Bu<Cu;Bu++)Pu[Bu-2]=arguments[Bu];$u.locks++;try{var Lu;return _u!=null&&(Lu=_u.apply(this,Pu)),Lu}finally{$u.locks--,$u.locks===0&&$u.methods.forEach(function(Ru){Ru.apply(Tu,Pu)})}}function wrapFunction(_u,$u){var Tu=function(){for(var Pu=arguments.length,Bu=new Array(Pu),Lu=0;Lu<Pu;Lu++)Bu[Lu]=arguments[Lu];wrapper.call.apply(wrapper,[this,_u,$u].concat(Bu))};return Tu}function patch(_u,$u,Tu){var Cu=getMixins(_u,$u);Cu.methods.indexOf(Tu)<0&&Cu.methods.push(Tu);var Pu=Object.getOwnPropertyDescriptor(_u,$u);if(!(Pu&&Pu[mobxPatchedDefinition])){var Bu=_u[$u],Lu=createDefinition(_u,$u,Pu?Pu.enumerable:void 0,Cu,Bu);Object.defineProperty(_u,$u,Lu)}}function createDefinition(_u,$u,Tu,Cu,Pu){var Bu,Lu=wrapFunction(Pu,Cu);return Bu={},Bu[mobxPatchedDefinition]=!0,Bu.get=function(){return Lu},Bu.set=function(Ou){if(this===_u)Lu=wrapFunction(Ou,Cu);else{var Du=createDefinition(this,$u,Tu,Cu,Ou);Object.defineProperty(this,$u,Du)}},Bu.configurable=!0,Bu.enumerable=Tu,Bu}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(_u){var $u=_u.prototype;if(_u[mobxObserverProperty]){var Tu=getDisplayName($u);console.warn("The provided component class ("+Tu+`)
                has already been declared as an observer component.`)}else _u[mobxObserverProperty]=!0;if($u.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(_u.__proto__!==react$1.exports.PureComponent){if(!$u.shouldComponentUpdate)$u.shouldComponentUpdate=observerSCU;else if($u.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp($u,"props"),makeObservableProp($u,"state"),_u.contextType&&makeObservableProp($u,"context");var Cu=$u.render;if(typeof Cu!="function"){var Pu=getDisplayName($u);throw new Error("[mobx-react] class component ("+Pu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return $u.render=function(){return this.render=createReactiveRender.call(this,Cu),this.render()},patch($u,"componentDidMount",function(){this[mobxIsUnmounted]=!1,this.render[mobxAdminProperty]||react$1.exports.Component.prototype.forceUpdate.call(this)}),patch($u,"componentWillUnmount",function(){var Bu=this.render[mobxAdminProperty];if(Bu)Bu.dispose(),this.render[mobxAdminProperty]=null;else{var Lu=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Lu+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[mobxIsUnmounted]=!0}),_u}function getDisplayName(_u){return _u.displayName||_u.name||_u.constructor&&(_u.constructor.displayName||_u.constructor.name)||"<component>"}function createReactiveRender(_u){var $u=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Tu=getDisplayName(this),Cu=_u.bind(this),Pu=!1,Bu=function(){var Ou=new Reaction(Tu+".render()",function(){if(!Pu&&(Pu=!0,$u[mobxIsUnmounted]!==!0)){var Du=!0;try{setHiddenProp($u,isForcingUpdateKey,!0),$u[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call($u),Du=!1}finally{setHiddenProp($u,isForcingUpdateKey,!1),Du&&(Ou.dispose(),$u.render[mobxAdminProperty]=null)}}});return Ou.reactComponent=$u,Ou};function Lu(){var Ru;Pu=!1;var Ou=(Ru=Lu[mobxAdminProperty])!=null?Ru:Lu[mobxAdminProperty]=Bu(),Du=void 0,Fu=void 0;if(Ou.track(function(){try{Fu=allowStateChanges(!1,Cu)}catch(Vu){Du=Vu}}),Du)throw Du;return Fu}return Lu}function observerSCU(_u,$u){return this.state!==$u?!0:!shallowEqual(this.props,_u)}function makeObservableProp(_u,$u){var Tu=newSymbol("reactProp_"+$u+"_valueHolder"),Cu=newSymbol("reactProp_"+$u+"_atomHolder");function Pu(){return this[Cu]||setHiddenProp(this,Cu,createAtom("reactive "+$u)),this[Cu]}Object.defineProperty(_u,$u,{configurable:!0,enumerable:!0,get:function(){var Lu=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Lu=allowStateReadsStart(!0)),Pu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Lu),this[Tu]},set:function(Lu){!this[isForcingUpdateKey]&&!shallowEqual(this[Tu],Lu)?(setHiddenProp(this,Tu,Lu),setHiddenProp(this,skipRenderKey,!0),Pu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Tu,Lu)}})}function observer(_u){return _u.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,_u)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,_u)?makeClassComponentObserver(_u):observer$1(_u)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function nextFrame(_u,$u=0){$u<=0?_requestAnimationFrame(_u):_requestAnimationFrame(()=>nextFrame(_u,$u-1))}function requestAnimationFrameInterval(_u,$u=60){let Tu=-1,Cu=0,Pu=-1;const Bu=1e3/$u;function Lu(Ru){Pu===-1&&(Pu=Ru),Tu=_requestAnimationFrame(Lu),!(Ru-Cu<Bu)&&(Cu=Ru,_u&&_u(Ru-Pu))}return Tu=_requestAnimationFrame(Lu),function(){_cancelAnimationFrame(Tu)}}var VreoKeyframeEnum=(_u=>(_u.CameraMovement="CameraMovement",_u.PanoTag="PanoTag",_u.PanoTextLabel="PanoTextLabel",_u.Prompter="Prompter",_u.UpdateVRPanorama="UpdateVRPanorama",_u.ModelVideo="ModelVideo",_u.PanoEffect="PanoEffect",_u.InfoPanel="InfoPanel",_u.VideoEffect="VideoEffect",_u.BgMusic="BgMusic",_u.Exit="Exit",_u.Custom="Custom",_u))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(_u=>(_u.Image="Image",_u.Video="Video",_u))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(_u=>(_u.Drawer="Drawer",_u.PopUp="PopUp",_u))(InfoPanelStyleEnum||{});function setElementDataset(_u,$u){_u&&Object.keys($u).forEach(Tu=>{const Cu=$u[Tu].toString();_u instanceof Element?_u.setAttribute(`data-${Tu}`,Cu):_u instanceof Document?_u.documentElement.setAttribute(`data-${Tu}`,Cu):_u instanceof HTMLElement?_u.dataset[Tu]=Cu:_u.setAttribute(`data-${Tu}`,Cu)})}function getFileExpandedName(_u){if(!_u)return"";const $u=_u.lastIndexOf(".");return _u.substring($u+1).toLowerCase()}function getMediaType(_u){const $u=getFileExpandedName(_u);return getMediaTypeByExpandedName($u)}function getMediaTypeByExpandedName(_u){return _u?/jpg|jpeg|png$/.test(_u)?"image":/mp3|wav$/.test(_u)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(_u)?"video":"unknown":"unknown"}class Controller extends Subscribe{constructor({five:Tu,container:Cu,configs:Pu}){super();hm(this,"five");hm(this,"configs");hm(this,"videoAgentScene");hm(this,"vreoUnit");hm(this,"stopInterval");hm(this,"playing",!1);hm(this,"ended",!1);hm(this,"loading",!1);hm(this,"containerSize",{width:0,height:0});hm(this,"appSize");hm(this,"container");hm(this,"waveAppearance",null);hm(this,"appearance",{waveStyle:"wave"});hm(this,"avatar",{});hm(this,"visible",!1);hm(this,"popUp",null);hm(this,"drawerConfig",null);this.configs=Pu,this.container=Cu,this.five=Tu,this.appSize=Pu.appSize,this.appearance={...this.appearance,...Pu.appearance},makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Bu,Lu])=>{if(Lu===null){this.waveAppearance=null;return}if(Bu==="wave")switch(Lu){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Bu==="solid")switch(Lu){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Bu=>{if(!(Bu!=null&&Bu.width))return;const Lu=Bu.width,Ru=Bu.height,Ou=(()=>Lu<=500?"S":Lu<=1024?"M":Lu<=2048?"L":"XL")(),Du=(()=>Ru>Lu?"portrait":"landscape")();setElementDataset(this.container,{size:Ou}),setElementDataset(this.container,{orientation:Du})},{fireImmediately:!0}),reaction(()=>this.ended,Bu=>{Bu&&this.emit("paused",!0)}),reaction(()=>this.playing,Bu=>{this.ended||this.emit(Bu?"playing":"paused")})}get agentType(){var Cu,Pu;const Tu=getMediaType((Cu=this.videoAgentScene)==null?void 0:Cu.videoAgentMesh.videoUrl);return(Pu=this.avatar)!=null&&Pu.force?"avatar":Tu==="video"?"video":"none"}openPopUp(Tu){if(!Tu){this.popUp=null;return}this.popUp=Tu}setLoading(Tu){this.loading=Tu}setAvatar(Tu){this.avatar=Tu}setContainerSize(Tu,Cu){this.containerSize={width:Tu,height:Cu}}setVisible(Tu){this.visible=Tu}setPlaying(Tu){this.playing=Tu}setEnded(Tu){this.ended=Tu}setAppearance(Tu){this.appearance={...this.appearance,...Tu}}openDrawer(Tu){var Cu;if(!Tu){this.drawerConfig={content:"",height:(Cu=this.drawerConfig)==null?void 0:Cu.height};return}this.drawerConfig=Tu}get ready(){return!!this.videoAgentScene}get currentTime(){var Tu;return((Tu=this.videoAgentScene)==null?void 0:Tu.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Cu=>{if(Cu.parsed||Cu.end<this.currentTime||Cu.start>this.currentTime)return!1;if(Cu.type===VreoKeyframeEnum.BgMusic)return!0;const Pu=this.currentTime-Cu.start;return Pu<=100&&Pu>=0}):[]}get mediaInstance(){var Tu;return(Tu=this.videoAgentScene)==null?void 0:Tu.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Tu){var Pu,Bu,Lu,Ru,Ou;if(((Pu=this.mediaInstance)==null?void 0:Pu.ended)&&this.mediaInstance.currentTime!==0){if(this.ended)return;(Bu=this.vreoUnit)==null||Bu.keyframes.forEach(Du=>Du.parsed=!1),this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause(),this.mediaInstance.currentTime=0;return}if(!this.playing){(Lu=this.mediaInstance)!=null&&Lu.paused||(Ru=this.mediaInstance)==null||Ru.pause();return}((Ou=this.mediaInstance)==null?void 0:Ou.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(Du=>{Du.parsed||(Du.parsed=!0,this.emit(Du.type,Du,this.currentTime),Tu&&Tu(Du.type,Du,this.currentTime))})}run(Tu){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(Tu)))}clear(){var Tu,Cu;this.setPlaying(!1),(Tu=this.vreoUnit)==null||Tu.keyframes.forEach(Pu=>Pu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.pause(),this.mediaInstance.currentTime=0),(Cu=this.stopInterval)==null||Cu.call(this),this.stopInterval=void 0}dispose(){this.clear()}}const ControllerContext=react$1.exports.createContext(null);function useController(){const _u=React.useContext(ControllerContext);if(!_u)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return _u}function useFiveInstance(){const _u=useController();if(!_u.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return _u.five}function useFiveProject2d(){const _u=useFiveInstance();return $u=>_u.project2d($u,!1)}var CameraMovementEffect=(_u=>(_u.Move="Move",_u.Rotate="Rotate",_u))(CameraMovementEffect||{}),Rotation=(_u=>(_u.Clockwise="Clockwise",_u.Anticlockwise="Anticlockwise",_u.Loop="Loop",_u))(Rotation||{}),Easing$1={Linear:{None:function(_u){return _u}},Quadratic:{In:function(_u){return _u*_u},Out:function(_u){return _u*(2-_u)},InOut:function(_u){return(_u*=2)<1?.5*_u*_u:-.5*(--_u*(_u-2)-1)}},Cubic:{In:function(_u){return _u*_u*_u},Out:function(_u){return--_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u:.5*((_u-=2)*_u*_u+2)}},Quartic:{In:function(_u){return _u*_u*_u*_u},Out:function(_u){return 1- --_u*_u*_u*_u},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u:-.5*((_u-=2)*_u*_u*_u-2)}},Quintic:{In:function(_u){return _u*_u*_u*_u*_u},Out:function(_u){return--_u*_u*_u*_u*_u+1},InOut:function(_u){return(_u*=2)<1?.5*_u*_u*_u*_u*_u:.5*((_u-=2)*_u*_u*_u*_u+2)}},Sinusoidal:{In:function(_u){return 1-Math.cos(_u*Math.PI/2)},Out:function(_u){return Math.sin(_u*Math.PI/2)},InOut:function(_u){return .5*(1-Math.cos(Math.PI*_u))}},Exponential:{In:function(_u){return _u===0?0:Math.pow(1024,_u-1)},Out:function(_u){return _u===1?1:1-Math.pow(2,-10*_u)},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2)<1?.5*Math.pow(1024,_u-1):.5*(-Math.pow(2,-10*(_u-1))+2)}},Circular:{In:function(_u){return 1-Math.sqrt(1-_u*_u)},Out:function(_u){return Math.sqrt(1- --_u*_u)},InOut:function(_u){return(_u*=2)<1?-.5*(Math.sqrt(1-_u*_u)-1):.5*(Math.sqrt(1-(_u-=2)*_u)+1)}},Elastic:{In:function(_u){return _u===0?0:_u===1?1:-Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)},Out:function(_u){return _u===0?0:_u===1?1:Math.pow(2,-10*_u)*Math.sin((_u-.1)*5*Math.PI)+1},InOut:function(_u){return _u===0?0:_u===1?1:(_u*=2,_u<1?-.5*Math.pow(2,10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI):.5*Math.pow(2,-10*(_u-1))*Math.sin((_u-1.1)*5*Math.PI)+1)}},Back:{In:function(_u){var $u=1.70158;return _u*_u*(($u+1)*_u-$u)},Out:function(_u){var $u=1.70158;return--_u*_u*(($u+1)*_u+$u)+1},InOut:function(_u){var $u=2.5949095;return(_u*=2)<1?.5*(_u*_u*(($u+1)*_u-$u)):.5*((_u-=2)*_u*(($u+1)*_u+$u)+2)}},Bounce:{In:function(_u){return 1-Easing$1.Bounce.Out(1-_u)},Out:function(_u){return _u<1/2.75?7.5625*_u*_u:_u<2/2.75?7.5625*(_u-=1.5/2.75)*_u+.75:_u<2.5/2.75?7.5625*(_u-=2.25/2.75)*_u+.9375:7.5625*(_u-=2.625/2.75)*_u+.984375},InOut:function(_u){return _u<.5?Easing$1.Bounce.In(_u*2)*.5:Easing$1.Bounce.Out(_u*2-1)*.5+.5}}},now$1;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now$1=function(){var _u=process.hrtime();return _u[0]*1e3+_u[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now$1=self.performance.now.bind(self.performance):Date.now!==void 0?now$1=Date.now:now$1=function(){return new Date().getTime()};var now$1$1=now$1,Group=function(){function _u(){this._tweens={},this._tweensAddedDuringUpdate={}}return _u.prototype.getAll=function(){var $u=this;return Object.keys(this._tweens).map(function(Tu){return $u._tweens[Tu]})},_u.prototype.removeAll=function(){this._tweens={}},_u.prototype.add=function($u){this._tweens[$u.getId()]=$u,this._tweensAddedDuringUpdate[$u.getId()]=$u},_u.prototype.remove=function($u){delete this._tweens[$u.getId()],delete this._tweensAddedDuringUpdate[$u.getId()]},_u.prototype.update=function($u,Tu){$u===void 0&&($u=now$1$1()),Tu===void 0&&(Tu=!1);var Cu=Object.keys(this._tweens);if(Cu.length===0)return!1;for(;Cu.length>0;){this._tweensAddedDuringUpdate={};for(var Pu=0;Pu<Cu.length;Pu++){var Bu=this._tweens[Cu[Pu]],Lu=!Tu;Bu&&Bu.update($u,Lu)===!1&&!Tu&&delete this._tweens[Cu[Pu]]}Cu=Object.keys(this._tweensAddedDuringUpdate)}return!0},_u}(),Interpolation={Linear:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Bu=Interpolation.Utils.Linear;return $u<0?Bu(_u[0],_u[1],Cu):$u>1?Bu(_u[Tu],_u[Tu-1],Tu-Cu):Bu(_u[Pu],_u[Pu+1>Tu?Tu:Pu+1],Cu-Pu)},Bezier:function(_u,$u){for(var Tu=0,Cu=_u.length-1,Pu=Math.pow,Bu=Interpolation.Utils.Bernstein,Lu=0;Lu<=Cu;Lu++)Tu+=Pu(1-$u,Cu-Lu)*Pu($u,Lu)*_u[Lu]*Bu(Cu,Lu);return Tu},CatmullRom:function(_u,$u){var Tu=_u.length-1,Cu=Tu*$u,Pu=Math.floor(Cu),Bu=Interpolation.Utils.CatmullRom;return _u[0]===_u[Tu]?($u<0&&(Pu=Math.floor(Cu=Tu*(1+$u))),Bu(_u[(Pu-1+Tu)%Tu],_u[Pu],_u[(Pu+1)%Tu],_u[(Pu+2)%Tu],Cu-Pu)):$u<0?_u[0]-(Bu(_u[0],_u[0],_u[1],_u[1],-Cu)-_u[0]):$u>1?_u[Tu]-(Bu(_u[Tu],_u[Tu],_u[Tu-1],_u[Tu-1],Cu-Tu)-_u[Tu]):Bu(_u[Pu?Pu-1:0],_u[Pu],_u[Tu<Pu+1?Tu:Pu+1],_u[Tu<Pu+2?Tu:Pu+2],Cu-Pu)},Utils:{Linear:function(_u,$u,Tu){return($u-_u)*Tu+_u},Bernstein:function(_u,$u){var Tu=Interpolation.Utils.Factorial;return Tu(_u)/Tu($u)/Tu(_u-$u)},Factorial:function(){var _u=[1];return function($u){var Tu=1;if(_u[$u])return _u[$u];for(var Cu=$u;Cu>1;Cu--)Tu*=Cu;return _u[$u]=Tu,Tu}}(),CatmullRom:function(_u,$u,Tu,Cu,Pu){var Bu=(Tu-_u)*.5,Lu=(Cu-$u)*.5,Ru=Pu*Pu,Ou=Pu*Ru;return(2*$u-2*Tu+Bu+Lu)*Ou+(-3*$u+3*Tu-2*Bu-Lu)*Ru+Bu*Pu+$u}}},Sequence=function(){function _u(){}return _u.nextId=function(){return _u._nextId++},_u._nextId=0,_u}(),mainGroup=new Group,Tween=function(){function _u($u,Tu){Tu===void 0&&(Tu=mainGroup),this._object=$u,this._group=Tu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return _u.prototype.getId=function(){return this._id},_u.prototype.isPlaying=function(){return this._isPlaying},_u.prototype.isPaused=function(){return this._isPaused},_u.prototype.to=function($u,Tu){return this._valuesEnd=Object.create($u),Tu!==void 0&&(this._duration=Tu),this},_u.prototype.duration=function($u){return this._duration=$u,this},_u.prototype.start=function($u){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Tu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Tu),this._valuesStart[Tu]=this._valuesStartRepeat[Tu]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=$u!==void 0?typeof $u=="string"?now$1$1()+parseFloat($u):$u:now$1$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},_u.prototype._setupProperties=function($u,Tu,Cu,Pu){for(var Bu in Cu){var Lu=$u[Bu],Ru=Array.isArray(Lu),Ou=Ru?"array":typeof Lu,Du=!Ru&&Array.isArray(Cu[Bu]);if(!(Ou==="undefined"||Ou==="function")){if(Du){var Fu=Cu[Bu];if(Fu.length===0)continue;Fu=Fu.map(this._handleRelativeValue.bind(this,Lu)),Cu[Bu]=[Lu].concat(Fu)}if((Ou==="object"||Ru)&&Lu&&!Du){Tu[Bu]=Ru?[]:{};for(var Vu in Lu)Tu[Bu][Vu]=Lu[Vu];Pu[Bu]=Ru?[]:{},this._setupProperties(Lu,Tu[Bu],Cu[Bu],Pu[Bu])}else typeof Tu[Bu]=="undefined"&&(Tu[Bu]=Lu),Ru||(Tu[Bu]*=1),Du?Pu[Bu]=Cu[Bu].slice().reverse():Pu[Bu]=Tu[Bu]||0}}},_u.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},_u.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},_u.prototype.pause=function($u){return $u===void 0&&($u=now$1$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=$u,this._group&&this._group.remove(this),this)},_u.prototype.resume=function($u){return $u===void 0&&($u=now$1$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=$u-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},_u.prototype.stopChainedTweens=function(){for(var $u=0,Tu=this._chainedTweens.length;$u<Tu;$u++)this._chainedTweens[$u].stop();return this},_u.prototype.group=function($u){return this._group=$u,this},_u.prototype.delay=function($u){return this._delayTime=$u,this},_u.prototype.repeat=function($u){return this._initialRepeat=$u,this._repeat=$u,this},_u.prototype.repeatDelay=function($u){return this._repeatDelayTime=$u,this},_u.prototype.yoyo=function($u){return this._yoyo=$u,this},_u.prototype.easing=function($u){return this._easingFunction=$u,this},_u.prototype.interpolation=function($u){return this._interpolationFunction=$u,this},_u.prototype.chain=function(){for(var $u=[],Tu=0;Tu<arguments.length;Tu++)$u[Tu]=arguments[Tu];return this._chainedTweens=$u,this},_u.prototype.onStart=function($u){return this._onStartCallback=$u,this},_u.prototype.onUpdate=function($u){return this._onUpdateCallback=$u,this},_u.prototype.onRepeat=function($u){return this._onRepeatCallback=$u,this},_u.prototype.onComplete=function($u){return this._onCompleteCallback=$u,this},_u.prototype.onStop=function($u){return this._onStopCallback=$u,this},_u.prototype.update=function($u,Tu){if($u===void 0&&($u=now$1$1()),Tu===void 0&&(Tu=!0),this._isPaused)return!0;var Cu,Pu,Bu=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if($u>Bu)return!1;Tu&&this.start($u)}if(this._goToEnd=!1,$u<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Pu=($u-this._startTime)/this._duration,Pu=this._duration===0||Pu>1?1:Pu;var Lu=this._easingFunction(Pu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Lu),this._onUpdateCallback&&this._onUpdateCallback(this._object,Pu),Pu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Cu in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Cu]=="string"&&(this._valuesStartRepeat[Cu]=this._valuesStartRepeat[Cu]+parseFloat(this._valuesEnd[Cu])),this._yoyo&&this._swapEndStartRepeatValues(Cu),this._valuesStart[Cu]=this._valuesStartRepeat[Cu];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=$u+this._repeatDelayTime:this._startTime=$u+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Ru=0,Ou=this._chainedTweens.length;Ru<Ou;Ru++)this._chainedTweens[Ru].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},_u.prototype._updateProperties=function($u,Tu,Cu,Pu){for(var Bu in Cu)if(Tu[Bu]!==void 0){var Lu=Tu[Bu]||0,Ru=Cu[Bu],Ou=Array.isArray($u[Bu]),Du=Array.isArray(Ru),Fu=!Ou&&Du;Fu?$u[Bu]=this._interpolationFunction(Ru,Pu):typeof Ru=="object"&&Ru?this._updateProperties($u[Bu],Lu,Ru,Pu):(Ru=this._handleRelativeValue(Lu,Ru),typeof Ru=="number"&&($u[Bu]=Lu+(Ru-Lu)*Pu))}},_u.prototype._handleRelativeValue=function($u,Tu){return typeof Tu!="string"?Tu:Tu.charAt(0)==="+"||Tu.charAt(0)==="-"?$u+parseFloat(Tu):parseFloat(Tu)},_u.prototype._swapEndStartRepeatValues=function($u){var Tu=this._valuesStartRepeat[$u],Cu=this._valuesEnd[$u];typeof Cu=="string"?this._valuesStartRepeat[$u]=this._valuesStartRepeat[$u]+parseFloat(Cu):this._valuesStartRepeat[$u]=this._valuesEnd[$u],this._valuesEnd[$u]=Tu},_u}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add$2=TWEEN.add.bind(TWEEN),remove$1=TWEEN.remove.bind(TWEEN),update$1=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add:add$2,remove:remove$1,update:update$1};const Easing=Easing$1;function tween(_u,$u,Tu,Cu=Easing.Linear.None){const Pu=new Tween(_u).to($u,Tu).easing(Cu);nextFrame(()=>Pu.start(0));const Bu=requestAnimationFrameInterval(Ru=>{Pu.update(Ru)===!1&&Bu()}),Lu=[];return Pu.onDestroy=Ru=>(Lu.push(Ru),Pu),Pu.destroy=function(){this.stop(),Object.assign(Pu,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Ru;for(;Ru=Lu.shift();)Ru();Bu()},Pu}function tweenProgress$1(_u,$u){return tween({progress:0},{progress:1},_u,$u)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(_u){return _u%PI_2$1}function formatLongitude(_u){return _u%PI_2$1}const getLongitudeParams=(_u,$u,Tu)=>{if(_u=formatLongitude(_u),$u=formatLongitude($u),Tu===Rotation.Anticlockwise&&_u>$u)$u+=PI_2$1;else if(Tu===Rotation.Clockwise&&$u>_u)_u+=PI_2$1;else{if(Tu!==Rotation.Anticlockwise&&Tu!==Rotation.Clockwise&&$u-_u>PI$1)return getLongitudeParams(_u,$u,Rotation.Clockwise);if(Tu!==Rotation.Anticlockwise&&Tu!==Rotation.Clockwise&&_u-$u>PI$1)return getLongitudeParams(_u,$u,Rotation.Anticlockwise)}return{from:_u,to:$u}};function progressNumber(_u,$u,Tu){return _u+($u-_u)*Tu}const CameraMovementPlugin=_u=>{const $u=(Pu,Bu,Lu={preload:!0})=>new Promise(async(Ru,Ou)=>{if(Lu.asyncStartCallback&&Lu.asyncStartCallback(),_u.panoIndex===void 0)return Ou(!1);if(Pu.mode&&Pu.mode!==_u.currentMode&&await new Promise(Fu=>{!Pu.mode||(_u.once("modeChange",Vu=>{_u.once("initAnimationEnded",()=>{Vu===Pu.mode&&Fu(!0)})}),_u.changeMode(Pu.mode,{fov:Pu.fov||void 0,latitude:Pu.latitude||void 0,longitude:Pu.longitude||void 0,panoIndex:Pu.panoIndex||void 0}))}),Pu.mode===Five.Mode.Floorplan||(Lu.preload&&Pu.panoIndex!==void 0&&Pu.panoIndex!==_u.panoIndex&&await _u.preloadPano(Pu.panoIndex),Lu.asyncEndCallback&&Lu.asyncEndCallback(),Pu.panoIndex===void 0&&Pu.fov===void 0&&Pu.latitude===void 0&&Pu.longitude===void 0))return Ru(!0);const Du=Pu.panoIndex!==void 0?Pu.panoIndex:_u.panoIndex;if(Du!==void 0){const Fu=Object.assign(Pu,{duration:Bu,moveEndCallback:()=>Ru(!0),moveCancelCallback:()=>{Ru(!0)}});await _u.moveToPano(Du,Fu)}else Ou(!1)}),Tu=Pu=>{const Bu=_u.state,Lu=formatLatitude(Bu.latitude),Ru=formatLatitude(Pu.latitude),{from:Ou,to:Du}=getLongitudeParams(Bu.longitude,Pu.longitude,Pu.rotation||Rotation.Loop),Fu=Bu.fov,Vu=Pu.fov;return{from:{latitude:Lu,longitude:Ou,fov:Fu},to:{latitude:Ru,longitude:Du,fov:Vu}}};return{move:$u,rotate:async(Pu,Bu,Lu={})=>{Lu.asyncStartCallback&&Lu.asyncStartCallback(),Pu.mode&&_u.currentMode!==Pu.mode&&await _u.changeMode(Pu.mode),Pu.mode===Five.Mode.Panorama&&_u.currentMode===Five.Mode.Panorama&&Pu.panoIndex!==void 0&&Pu.panoIndex!==_u.panoIndex&&(Lu.preload&&await _u.preloadPano(Pu.panoIndex),await new Promise((Du,Fu)=>{_u.moveToPano(Pu.panoIndex,{moveEndCallback:()=>Du(!0),moveCancelCallback:()=>Fu(!1),effect:"fade"})})),Lu.asyncEndCallback&&Lu.asyncEndCallback();const{from:Ru,to:Ou}=Tu(Pu);return await new Promise((Du,Fu)=>{const Vu=({progress:Hu})=>{const Uu={};Uu.longitude=progressNumber(Ru.longitude,Ou.longitude,Hu)%PI_2$1,Uu.latitude=progressNumber(Ru.latitude,Ou.latitude,Hu),Uu.fov=progressNumber(Ru.fov,Ou.fov,Hu),_u.setState(Uu,!0)},ku=()=>{Du(!0)},Nu=()=>{Du(!1)};let Gu=Bu;Pu.rotation===Rotation.Loop&&(Gu=Pu.rotateSpeed?Math.ceil(Math.abs(Ou.longitude-Ru.longitude)/Pu.rotateSpeed*1e3):Bu);const ju=tweenProgress$1(Gu,Easing.Linear.None).onUpdate(Vu).onComplete(ku).onDestroy(Nu);Pu.rotation===Rotation.Loop&&ju.repeat(1/0).yoyo(!0),setTimeout(()=>{ju.destroy(),Du(!0)},Bu)})}}};function CameraMovement(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Cu=async Pu=>{Tu.current||(Tu.current=CameraMovementPlugin($u));const{start:Bu,end:Lu,data:Ru}=Pu,Ou=Ru,Du=Ou.effect;Du===CameraMovementEffect.Rotate?await Tu.current.rotate(Ru,Lu-Bu):Du===CameraMovementEffect.Move?await Tu.current.move(Ru,Lu-Bu):Ou.panoIndex!==void 0&&Ou.panoIndex!==$u.panoIndex?await Tu.current.move(Ru,Lu-Bu):await Tu.current.rotate(Ru,Lu-Bu)};return _u.on(VreoKeyframeEnum.CameraMovement,Cu),()=>{_u.off(VreoKeyframeEnum.CameraMovement,Cu)}},[_u]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(_u,$u,Tu=!0){if(!_u)return()=>{};if(Tu&&$u(_u.clientWidth,_u.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Cu=new ResizeObserver(()=>$u(_u.clientWidth,_u.clientHeight));return Cu.observe(_u),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u&&Cu.unobserve(_u),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}}else{const Cu=document.createElement("iframe");return Cu.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Cu.classList.add("resize-sensor-iframe"),_u.appendChild(Cu),Cu.contentWindow?(Cu.contentWindow.addEventListener("resize",()=>{$u(Cu.clientWidth,Cu.clientHeight)}),resizeObserverCache.set(_u,resizeObserverCache.get(_u)||0+1),()=>{_u.removeChild(Cu),resizeObserverCache.get(_u)===1&&resizeObserverCache.delete(_u)}):()=>{}}}function hasResizeListener(_u){return _u?resizeObserverCache.get(_u)||0>0:!1}function ResizeObserver$1(){const _u=React.useRef(null),$u=useController();return React.useEffect(()=>{if(!_u.current)return;const Tu=$u.container.parentElement;if(hasResizeListener(Tu))return;const Cu=addResizeListener(Tu,(Pu,Bu)=>{$u.setContainerSize(Pu,Bu)});return()=>{Cu()}},[]),jsx("div",{className:"resizeObserver-element",ref:_u})}function InfoPanelImg({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("img",{className:"vreo-infoPanelImg",src:_u})]})})})})}function InfoPanelVideo({url:_u,children:$u}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[$u,jsx("div",{className:"vreo-infoPanelVideo",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:_u})})]})})})})}const Title=_u=>!_u.title&&!_u.subTitle?null:jsxs(Fragment,{children:[jsx("div",{className:"vreo-infoPanel-title-shadow"}),jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:_u.title}),jsx("div",{className:"vreo-infoPanel-t2",children:_u.subTitle})]})]});function InfoPanel(){const _u=react$1.exports.useRef(),$u=useController();return react$1.exports.useEffect(()=>{var Cu;if(((Cu=$u.configs)==null?void 0:Cu.keyframeMap.InfoPanel)===!1)return;const Tu=Pu=>{const{start:Bu,end:Lu,data:Ru}=Pu,Ou=Ru,{title:Du,subTitle:Fu,style:Vu}=Ou;do{if(Vu===InfoPanelStyleEnum.PopUp){Ou.type===InfoPanelTypeEnum.Image?$u.openPopUp(jsx(InfoPanelImg,{url:Ou.url,children:jsx(Title,{title:Du,subTitle:Fu})})):Ou.type===InfoPanelTypeEnum.Video&&$u.openPopUp(jsx(InfoPanelVideo,{url:Ou.url,children:jsx(Title,{title:Du,subTitle:Fu})}));break}Ou.type===InfoPanelTypeEnum.Image?$u.openDrawer({content:jsx(InfoPanelImg,{url:Ou.url,children:jsx(Title,{title:Du,subTitle:Fu})}),height:"60vh"}):Ou.type===InfoPanelTypeEnum.Video&&$u.openDrawer({content:jsx(InfoPanelVideo,{url:Ou.url,children:jsx(Title,{title:Du,subTitle:Fu})}),height:"60vh"})}while(!1);_u.current=setTimeout(()=>{$u.openDrawer(!1),$u.openPopUp(!1)},Lu-Bu)};return $u.on(VreoKeyframeEnum.InfoPanel,Tu),()=>{$u.off(VreoKeyframeEnum.InfoPanel,Tu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}const ModelTVVideoPlugin=(_u,{videoElement:$u})=>{const Tu={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:$u},Cu=Vu=>{Tu.videoTexture&&(Tu.videoTexture.image.muted=Vu,Tu.videoTexture.image.play())},Pu=()=>Tu.videoTexture?Tu.videoTexture.image.muted:!0,Bu=()=>{if(Tu.enabled||!Tu.videoTexture)return;Tu.enabled=!0,Tu.videoMeshes=Ru(),Tu.videoMeshes.forEach(ku=>_u.scene.add(ku));const Vu=()=>{if(!Tu.videoTexture)return;const ku=()=>{var Nu;!Tu.videoTexture||((Nu=Tu.videoTexture)==null||Nu.image.removeEventListener("timeupdate",ku),Tu.videoTextureEnabled=!0,Tu.videoMeshes.forEach(Gu=>{Gu.material.map!==Tu.videoTexture&&(Gu.material.map=Tu.videoTexture)}),_u.needsRender=!0)};Tu.videoTexture.image.addEventListener("timeupdate",ku),Tu.videoTexture&&Tu.videoMeshes.length&&Tu.videoTexture.image.play()};if(_u.model.loaded)Vu();else return _u.once("modelLoaded",()=>Vu())},Lu=()=>{!Tu.enabled||(Tu.enabled=!1,Tu.videoMeshes.forEach(Vu=>{Vu.geometry.dispose(),Vu.material.dispose(),_u.scene.remove(Vu),Tu.videoTexture&&Tu.videoTexture.image.pause()}),Tu.videoMeshes=[],_u.needsRender=!0)},Ru=()=>Tu.rectPoints.map((Vu,ku)=>{const Nu=new BufferGeometry,Gu=128,ju=[];ju.push(Vu[0].x,Vu[0].y,Vu[0].z);for(let Qu=1;Qu<Gu;Qu++)ju.push(Vu[0].x+(Vu[1].x-Vu[0].x)*Qu/Gu,Vu[0].y+(Vu[1].y-Vu[0].y)*Qu/Gu,Vu[0].z+(Vu[1].z-Vu[0].z)*Qu/Gu);ju.push(Vu[1].x,Vu[1].y,Vu[1].z),ju.push(Vu[2].x,Vu[2].y,Vu[2].z);for(let Qu=1;Qu<Gu;Qu++)ju.push(Vu[2].x+(Vu[3].x-Vu[2].x)*Qu/Gu,Vu[2].y+(Vu[3].y-Vu[2].y)*Qu/Gu,Vu[2].z+(Vu[3].z-Vu[2].z)*Qu/Gu);ju.push(Vu[3].x,Vu[3].y,Vu[3].z);const Hu=[];Hu.push(0,1);for(let Qu=1;Qu<Gu;Qu++)Hu.push(0,1-Qu/Gu);Hu.push(0,0),Hu.push(1,0);for(let Qu=1;Qu<Gu;Qu++)Hu.push(1,Qu/Gu);Hu.push(1,1);const Uu=[];for(let Qu=0;Qu<Gu;Qu++)Uu.push(Qu,Qu+1,Gu*2-Qu,Qu,Gu*2-Qu,Gu*2+1-Qu);Nu.setAttribute("position",new BufferAttribute(new Float32Array(ju),3)),Nu.setAttribute("uv",new BufferAttribute(new Float32Array(Hu),2)),Nu.setIndex(new BufferAttribute(new Uint32Array(Uu),1));const zu=new MeshBasicMaterial({map:Tu.videoTextureEnabled?Tu.videoTexture:Tu.imageTexture,side:DoubleSide}),Wu=new Mesh(Nu,zu);return Wu.renderOrder=1,Wu.name=`video-${ku}-${performance.now()}`,Wu}),Ou=Vu=>{const ku=new TextureLoader().load(Vu);return ku.minFilter=LinearFilter,ku.magFilter=LinearFilter,ku.format=RGBFormat,ku},Du=(Vu,ku)=>new Promise((Nu,Gu)=>{const ju=new XMLHttpRequest;ju.onreadystatechange=()=>{if(ju.readyState==4)if(ju.status==200){const Hu=window.URL||window.webkitURL;ku=ku||document.createElement("video"),ku.crossOrigin="anonymous",ku.autoplay=!0,ku.muted=!0,ku.loop=!0,ku.playsInline=!0,ku.src=Hu.createObjectURL(ju.response);const Uu=new VideoTexture(ku);Uu.minFilter=LinearFilter,Uu.magFilter=LinearFilter,Uu.format=RGBFormat,Nu(Object.assign(Uu,{videoSource:Vu}))}else Gu(new Error("Video download Error: "+ju.status))},ju.onerror=Hu=>Gu(Hu),ju.open("GET",Vu),ju.responseType="blob",ju.send()}),Fu=async(Vu,ku)=>{const{video_src:Nu,video_poster_src:Gu,points:ju}=Vu;Tu.videoSource=Nu,Tu.rectPoints=ju.map(Hu=>Hu.map(({x:Uu,y:zu,z:Wu})=>new Vector3(Uu,zu,Wu))),Tu.imageTexture=Ou(Gu),ku&&(Tu.videoElement=ku),Tu.videoTexture=await Du(Tu.videoSource,Tu.videoElement),Tu.enabled=!!Vu.enable,Tu.enabled&&Bu()};return _u.on("modeChange",()=>Cu(!0)),_u.on("wantsTapGesture",Vu=>{if(!Tu.enabled)return;const[ku]=Vu.intersectObjects(_u.scene.children,!0);if(!!ku&&/^video/.test(ku.object.name))return Tu.videoTexture&&Cu(!Tu.videoTexture.image.muted),!1}),_u.on("panoArrived",()=>{if(!Tu.enabled||Pu())return;const Vu=_u.camera.position;Tu.rectPoints.find(Nu=>{const Gu=Nu.reduce((ju,Hu)=>new Vector3(ju.x+Hu.x/Nu.length,ju.y+Hu.y/Nu.length,ju.z+Hu.z/Nu.length),new Vector3);return Nu.map(ju=>new Vector3((ju.x+Gu.x)/2,(ju.y+Gu.y)/2,(ju.z+Gu.z)/2)).filter(ju=>{ju=ju.clone().sub(Vu).normalize();const Hu=new Raycaster(Vu,ju),[Uu]=Hu.intersectObjects(_u.scene.children,!0);return!!Uu&&/^video/.test(Uu.object.name)}).length>=2})||Cu(!0)}),_u.on("renderFrame",()=>{Tu.videoMeshes.forEach(Vu=>{Vu&&(Vu.needsRender=!0)})}),_u.on("load",Vu=>{Vu.modelTVVideoData&&Fu(Vu.modelTVVideoData)}),{enable:Bu,disable:Lu,load:Fu}};function createTransMatrix(_u){const $u=new Matrix4;return $u.fromArray(_u),Tu=>{const Cu=new Vector3(...Tu);return Cu.applyMatrix4($u),Cu.toArray()}}function ModelVideo(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef(),Cu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Pu=async Bu=>{var Gu,ju;Tu.current||(Tu.current=ModelTVVideoPlugin($u,{}));const{start:Lu,end:Ru}=Bu,{videoSrc:Ou,videoPosterSrc:Du,vertexs:Fu,matrixWorld:Vu}=Bu.data,ku=(()=>{if(Fu.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Fu.length===4)return Fu;const Hu=new Box3;return Fu.forEach(Uu=>Hu.expandByPoint(new Vector3(Uu.x,Uu.y,Uu.z))),[new Vector3(Hu.min.x,Hu.max.y,Hu.max.z),new Vector3(Hu.min.x,Hu.min.y,Hu.max.z),new Vector3(Hu.max.x,Hu.min.y,Hu.max.z),new Vector3(Hu.max.x,Hu.max.y,Hu.max.z)]})(),Nu=(()=>{if(Vu){const Hu=createTransMatrix(Vu);return[ku.map(Uu=>{const zu=Hu([Uu.x,Uu.y,Uu.z]);return{x:zu[0],y:zu[1],z:zu[2]}})]}return[ku]})();Tu.current.disable(),await Tu.current.load({video_src:Ou,video_poster_src:Du,points:Nu},(ju=(Gu=_u.configs)==null?void 0:Gu.videos)==null?void 0:ju.modelTVVideo),Tu.current.enable(),Cu.current=setTimeout(()=>{var Hu;return(Hu=Tu.current)==null?void 0:Hu.disable()},Ru-Lu)};return _u.on(VreoKeyframeEnum.ModelVideo,Pu),()=>{_u.off(VreoKeyframeEnum.ModelVideo,Pu),Cu.current&&clearTimeout(Cu.current)}},[_u]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$6=tslib.exports;function e$4(_u){if(_u&&_u.__esModule)return _u;var $u=Object.create(null);return _u&&Object.keys(_u).forEach(function(Tu){if(Tu!=="default"){var Cu=Object.getOwnPropertyDescriptor(_u,Tu);Object.defineProperty($u,Tu,Cu.get?Cu:{enumerable:!0,get:function(){return _u[Tu]}})}}),$u.default=_u,Object.freeze($u)}var n$b=e$4(require$$1),i$d=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.type="LineSegmentsGeometry",Tu.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Tu.setAttribute("position",new n$b.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Tu.setAttribute("uv",new n$b.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Tu}return t$6.__extends($u,_u),$u.prototype.applyMatrix4=function(Tu){var Cu=this.attributes.instanceStart,Pu=this.attributes.instanceEnd;return Cu!==void 0&&(Cu.applyMatrix4(Tu),Pu.applyMatrix4(Tu),Cu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},$u.prototype.setPositions=function(Tu){var Cu;Cu=Tu instanceof Float32Array?Tu:Array.isArray(Tu)?new Float32Array(Tu):new Float32Array;var Pu=new n$b.InstancedInterleavedBuffer(Cu,6,1);return this.setAttribute("instanceStart",new n$b.InterleavedBufferAttribute(Pu,3,0)),this.setAttribute("instanceEnd",new n$b.InterleavedBufferAttribute(Pu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},$u.prototype.setColors=function(Tu){var Cu;Cu=Tu instanceof Float32Array?Tu:Array.isArray(Tu)?new Float32Array(Tu):new Float32Array;var Pu=new n$b.InstancedInterleavedBuffer(Cu,6,1);return this.setAttribute("instanceColorStart",new n$b.InterleavedBufferAttribute(Pu,3,0)),this.setAttribute("instanceColorEnd",new n$b.InterleavedBufferAttribute(Pu,3,3)),this},$u.prototype.fromWireframeGeometry=function(Tu){return this.setPositions(Tu.attributes.position.array),this},$u.prototype.fromEdgesGeometry=function(Tu){return this.setPositions(Tu.attributes.position.array),this},$u.prototype.fromMesh=function(Tu){return this.fromWireframeGeometry(new n$b.WireframeGeometry(Tu.geometry)),this},$u.prototype.fromLineSegments=function(Tu){var Cu=Tu.geometry;if(Cu instanceof n$b.Geometry){var Pu=new n$b.BufferGeometry().fromGeometry(Cu);this.setPositions(Pu.attributes.position.array)}else Cu instanceof n$b.BufferGeometry&&this.setPositions(Cu.attributes.position.array);return this},$u.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n$b.Box3);var Tu=this.attributes.instanceStart,Cu=this.attributes.instanceEnd;if(Tu!==void 0&&Cu!==void 0){var Pu=new n$b.Box3;this.boundingBox.setFromBufferAttribute(Tu),Pu.setFromBufferAttribute(Cu),this.boundingBox.union(Pu)}},$u.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n$b.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Tu=this.attributes.instanceStart,Cu=this.attributes.instanceEnd;if(Tu!==void 0&&Cu!==void 0){var Pu=this.boundingSphere.center;this.boundingBox.getCenter(Pu);for(var Bu=0,Lu=new n$b.Vector3,Ru=0,Ou=Tu.count;Ru<Ou;Ru++)Lu.fromBufferAttribute(Tu,Ru),Bu=Math.max(Bu,Pu.distanceToSquared(Lu)),Lu.fromBufferAttribute(Cu,Ru),Bu=Math.max(Bu,Pu.distanceToSquared(Lu));this.boundingSphere.radius=Math.sqrt(Bu),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},$u.prototype.toJSON=function(){},$u}(n$b.InstancedBufferGeometry);Object.assign(i$d.prototype,{isLineSegmentsGeometry:!0});var r$8={uniforms:n$b.UniformsUtils.merge([n$b.UniformsLib.common,n$b.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n$b.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o$8=function(_u){function $u(Tu){var Cu=_u.call(this,{uniforms:n$b.UniformsUtils.clone(r$8.uniforms),vertexShader:r$8.vertexShader,fragmentShader:r$8.fragmentShader,clipping:!0})||this;return Cu.type="LineMaterial",Cu.dashed=!1,Object.defineProperties(Cu,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Pu){this.uniforms.diffuse.value=Pu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Pu){this.uniforms.linewidth.value=Pu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Pu){this.uniforms.dashScale.value=Pu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Pu){this.uniforms.dashSize.value=Pu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Pu){this.uniforms.gapSize.value=Pu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Pu){this.uniforms.opacity.value=Pu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Pu){this.uniforms.resolution.value.copy(Pu)}}}),Cu.setValues(Tu),Cu}return t$6.__extends($u,_u),$u}(n$b.ShaderMaterial);Object.assign(o$8.prototype,{isLineMaterial:!0});var a$6=function(_u){function $u(Tu,Cu){var Pu=_u.call(this)||this;return Pu.type="LineSegments2",Pu.geometry=Tu!==void 0?Tu:new i$d,Pu.material=Cu!==void 0?Cu:new o$8({color:16777215*Math.random()}),Pu}return t$6.__extends($u,_u),$u.prototype.computeLineDistances=function(){for(var Tu=this.geometry,Cu=Tu.attributes.instanceStart,Pu=Tu.attributes.instanceEnd,Bu=new Float32Array(2*Cu.count),Lu=new n$b.Vector3,Ru=new n$b.Vector3,Ou=0,Du=0,Fu=Cu.count;Ou<Fu;Ou++,Du+=2)Lu.fromBufferAttribute(Cu,Ou),Ru.fromBufferAttribute(Pu,Ou),Bu[Du]=Du===0?0:Bu[Du-1],Bu[Du+1]=Bu[Du]+Lu.distanceTo(Ru);var Vu=new n$b.InstancedInterleavedBuffer(Bu,2,1);return Tu.setAttribute("instanceDistanceStart",new n$b.InterleavedBufferAttribute(Vu,1,0)),Tu.setAttribute("instanceDistanceEnd",new n$b.InterleavedBufferAttribute(Vu,1,1)),this},$u.prototype.raycast=function(Tu,Cu){Tu.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Pu=Tu.ray,Bu=Tu.camera,Lu=Bu.projectionMatrix,Ru=this.geometry,Ou=this.material,Du=Ou.resolution,Fu=Ou.linewidth,Vu=Ru.attributes.instanceStart,ku=Ru.attributes.instanceEnd,Nu=new n$b.Vector4,Gu=new n$b.Vector4,ju=new n$b.Vector4,Hu=new n$b.Vector3,Uu=new n$b.Matrix4,zu=new n$b.Line3,Wu=new n$b.Vector3;Pu.at(1,ju),ju.w=1,ju.applyMatrix4(Bu.matrixWorldInverse),ju.applyMatrix4(Lu),ju.multiplyScalar(1/ju.w),ju.x*=Du.x/2,ju.y*=Du.y/2,ju.z=0,Hu.copy(ju);var Qu=this.matrixWorld;Uu.multiplyMatrices(Bu.matrixWorldInverse,Qu);for(var Ku=0,Yu=Vu.count;Ku<Yu;Ku++){Nu.fromBufferAttribute(Vu,Ku),Gu.fromBufferAttribute(ku,Ku),Nu.w=1,Gu.w=1,Nu.applyMatrix4(Uu),Gu.applyMatrix4(Uu),Nu.applyMatrix4(Lu),Gu.applyMatrix4(Lu),Nu.multiplyScalar(1/Nu.w),Gu.multiplyScalar(1/Gu.w);var Xc=Nu.z<-1&&Gu.z<-1,_d=Nu.z>1&&Gu.z>1;if(!Xc&&!_d){Nu.x*=Du.x/2,Nu.y*=Du.y/2,Gu.x*=Du.x/2,Gu.y*=Du.y/2,zu.start.copy(Nu),zu.start.z=0,zu.end.copy(Gu),zu.end.z=0;var _f=zu.closestPointToPointParameter(Hu,!0);zu.at(_f,Wu);var qu=n$b.MathUtils.lerp(Nu.z,Gu.z,_f),Xu=qu>=-1&&qu<=1,Zu=Hu.distanceTo(Wu)<.5*Fu;if(Xu&&Zu){zu.start.fromBufferAttribute(Vu,Ku),zu.end.fromBufferAttribute(ku,Ku),zu.start.applyMatrix4(Qu),zu.end.applyMatrix4(Qu);var _c=new n$b.Vector3,Ju=new n$b.Vector3;Pu.distanceSqToSegment(zu.start,zu.end,Ju,_c),Cu.push({point:Ju,pointOnLine:_c,distance:Pu.origin.distanceTo(Ju),object:this,faceIndex:Ku})}}}},$u}(n$b.Mesh);Object.assign(a$6.prototype,{isLineSegments2:!0});var s$a=function(_u){function $u(Tu,Cu){var Pu=_u.call(this,Tu,Cu)||this;return Pu.type="Line2",Pu}return t$6.__extends($u,_u),$u}(a$6);Object.assign(s$a.prototype,{isLine2:!0});var u$8=function(_u){function $u(){var Tu=_u.call(this)||this;return Tu.type="LineGeometry",Tu}return t$6.__extends($u,_u),$u.prototype.setPositions=function(Tu){for(var Cu=Tu.length-3,Pu=new Float32Array(2*Cu),Bu=0;Bu<Cu;Bu+=3)Pu[2*Bu]=Tu[Bu],Pu[2*Bu+1]=Tu[Bu+1],Pu[2*Bu+2]=Tu[Bu+2],Pu[2*Bu+3]=Tu[Bu+3],Pu[2*Bu+4]=Tu[Bu+4],Pu[2*Bu+5]=Tu[Bu+5];return _u.prototype.setPositions.call(this,Pu),this},$u.prototype.setColors=function(Tu){for(var Cu=Tu.length-3,Pu=new Float32Array(2*Cu),Bu=0;Bu<Cu;Bu+=3)Pu[2*Bu]=Tu[Bu],Pu[2*Bu+1]=Tu[Bu+1],Pu[2*Bu+2]=Tu[Bu+2],Pu[2*Bu+3]=Tu[Bu+3],Pu[2*Bu+4]=Tu[Bu+4],Pu[2*Bu+5]=Tu[Bu+5];return _u.prototype.setColors.call(this,Pu),this},$u.prototype.fromLine=function(Tu){var Cu=Tu.geometry;if(Cu instanceof n$b.Geometry){var Pu=new n$b.BufferGeometry().fromGeometry(Cu);this.setPositions(Pu.attributes.position.array)}else Cu instanceof n$b.BufferGeometry&&this.setPositions(Cu.attributes.position.array);return this},$u.prototype.copy=function(){return this},$u}(i$d);Object.assign(u$8.prototype,{isLineGeometry:!0});var c$b=null,l$8=function(_u){function $u(Tu,Cu){Tu===void 0&&(Tu=new n$b.Vector3),Cu===void 0&&(Cu=new n$b.Vector3);var Pu=_u.call(this)||this;Pu.type="FiveLine",Pu.needsRender=!0;var Bu=new u$8,Lu=new o$8({color:14467195,linewidth:2,dashScale:20,dashed:!1});Pu.line=new s$a(Bu,Lu);var Ru=new n$b.BufferGeometry,Ou=new n$b.PointsMaterial({color:14467195,size:8,map:c$b||(c$b=new n$b.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Pu.points=new n$b.Points(Ru,Ou),Pu.points.renderOrder=11,Pu.points.frustumCulled=!1,Pu.setPoints(Tu,Cu),Pu.add(Pu.line,Pu.points),Pu}return t$6.__extends($u,_u),Object.defineProperty($u,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),$u.prototype.setPoints=function(Tu,Cu){var Pu=[].concat(Tu.toArray(),Cu.toArray());this.points.geometry.setAttribute("position",new n$b.BufferAttribute(new Float32Array(Pu),3)),this.line.geometry.setPositions(Pu),this.line.computeLineDistances(),this.needsRender=!0},$u.prototype.getPoints=function(){var Tu=this.points.geometry.attributes.position.array;return[new n$b.Vector3(Tu[0],Tu[1],Tu[2]),new n$b.Vector3(Tu[3],Tu[4],Tu[5])]},$u.prototype.setMaterial=function(Tu){var Cu=this.line.material;for(var Pu in Tu)if(Tu.hasOwnProperty(Pu)){var Bu=Tu[Pu];Pu==="dashed"?(Cu.dashed=Bu,Bu?Cu.defines.USE_DASH="":delete Cu.defines.USE_DASH,Cu.needsUpdate=!0):Cu[Pu]=Tu[Pu]}this.needsRender=!0},$u.prototype.setResolution=function(Tu,Cu){var Pu=this.line.material.resolution;Pu.x===Tu&&Pu.y===Cu||(Pu.set(Tu,Cu),this.needsRender=!0)},$u}(n$b.Object3D);Object.assign(l$8.prototype,{isFiveLine:!0}),Line=line.Line=l$8,line.LineGeometry=u$8,line.LineMaterial=o$8,line.LineSegmentsGeometry=i$d,line.THREE_Line2=s$a,line.THREE_LineSegments2=a$6;class BetterTween extends exports.Tween{constructor(){super(...arguments);hm(this,"disposeMethods",[]);hm(this,"animationFrameDisposer");hm(this,"onDispose",Tu=>(this.disposeMethods.push(Tu),this));hm(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));hm(this,"dispose",()=>{var Tu;this.stop(),(Tu=this.animationFrameDisposer)==null||Tu.call(this),this.disposeMethods.forEach(Cu=>Cu()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(_u,$u=exports.Easing.Linear.None){const Tu=new BetterTween({progress:0}).to({progress:1});return _u!==void 0&&Tu.duration(_u),$u!==void 0&&Tu.easing($u),Tu}function lineAnime(_u,$u,Tu){const Cu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Pu=new TextureLoader().load(Cu),Bu=new Color(16777215),Lu=new Line;Lu.setMaterial({linewidth:2,color:Bu});const Ru=Lu.points.material;return Ru.map=Pu,Ru.color.set(Bu),Lu.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Ou})=>{const Du=.5-Ou/2,Fu=.5+Ou/2,Vu=$u.clone().lerp(Tu,Du),ku=$u.clone().lerp(Tu,Fu);Lu.setPoints(Vu,ku)}).onStart(()=>_u.scene.add(Lu)).onDispose(()=>{_u.scene.remove(Lu),_u.needsRender=!0})}function PanoEffect(){const[_u,$u]=react$1.exports.useState(null),Tu=useFiveInstance(),Cu=react$1.exports.useRef(null),[Pu,Bu]=react$1.exports.useState(null),Lu=react$1.exports.useRef(),Ru=useController(),Ou=useFiveProject2d(),Du=()=>{Cu.current&&Cu.current.dispose()};return react$1.exports.useEffect(()=>{const Fu=Vu=>{const{start:ku,end:Nu,data:Gu}=Vu,ju=Gu,[Hu,Uu]=ju.twoVertexs,zu=new Vector3(Hu.x,Hu.y,Hu.z),Wu=new Vector3(Uu.x,Uu.y,Uu.z);Cu.current=lineAnime(Tu,zu.clone(),Wu.clone()),Cu.current.play();const Qu=zu.lerp(Wu,.5),Ku=zu.distanceTo(Wu),Yu=Ou(Qu);if(!Yu)return;const{x:Xc,y:_d}=Yu;$u({center:Qu,distance:Ku}),Bu({left:Xc,top:_d}),Lu.current=setTimeout(()=>{$u(null),Bu(null),Du()},Nu-ku)};return Ru.on(VreoKeyframeEnum.PanoEffect,Fu),()=>{Ru.off(VreoKeyframeEnum.PanoEffect,Fu),Lu.current&&clearTimeout(Lu.current),Du()}},[Ru]),react$1.exports.useEffect(()=>{const Fu=()=>{if(!(_u!=null&&_u.center))return;const{x:Vu,y:ku,z:Nu}=_u.center,Gu=Ou(new Vector3(Vu,ku,Nu));if(!Gu)return;const{x:ju,y:Hu}=Gu;Bu({left:ju,top:Hu})};return Tu.on("currentStateChange",Fu),()=>{Tu.off("currentStateChange",Fu)}},[_u==null?void 0:_u.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":_u}),style:{left:((Pu==null?void 0:Pu.left)||0)+"px",top:((Pu==null?void 0:Pu.top)||0)+"px"},children:(_u==null?void 0:_u.distance.toFixed(4))+"m"})})}Promise.resolve();function t$5(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r$7(){return(t$5()+t$5()+"-"+t$5()+"-4"+t$5().substr(0,3)+"-"+t$5()+"-"+t$5()+t$5()+t$5()).toLowerCase()}var CSS3DObject=function(_u){Object3D.call(this),this.element=_u,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function($u){$u.element instanceof Element&&$u.element.parentNode!==null&&$u.element.parentNode.removeChild($u.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(_u){CSS3DObject.call(this,_u)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var _u=this,$u,Tu,Cu,Pu,Bu=new Matrix4,Lu={camera:{fov:0,style:""},objects:new WeakMap},Ru=document.createElement("div");Ru.style.overflow="hidden",this.domElement=Ru;var Ou=document.createElement("div");Ou.style.WebkitTransformStyle="preserve-3d",Ou.style.transformStyle="preserve-3d",Ou.style.pointerEvents="none",Ru.appendChild(Ou);var Du=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:$u,height:Tu}},this.setSize=function(Uu,zu){$u=Uu,Tu=zu,Cu=$u/2,Pu=Tu/2,Ru.style.width=Uu+"px",Ru.style.height=zu+"px",Ou.style.width=Uu+"px",Ou.style.height=zu+"px"};function Fu(Uu){return Math.abs(Uu)<1e-10?0:Uu}function Vu(Uu){var zu=Uu.elements;return"matrix3d("+Fu(zu[0])+","+Fu(-zu[1])+","+Fu(zu[2])+","+Fu(zu[3])+","+Fu(zu[4])+","+Fu(-zu[5])+","+Fu(zu[6])+","+Fu(zu[7])+","+Fu(zu[8])+","+Fu(-zu[9])+","+Fu(zu[10])+","+Fu(zu[11])+","+Fu(zu[12])+","+Fu(-zu[13])+","+Fu(zu[14])+","+Fu(zu[15])+")"}function ku(Uu,zu){var Wu=Uu.elements,Qu="matrix3d("+Fu(Wu[0])+","+Fu(Wu[1])+","+Fu(Wu[2])+","+Fu(Wu[3])+","+Fu(-Wu[4])+","+Fu(-Wu[5])+","+Fu(-Wu[6])+","+Fu(-Wu[7])+","+Fu(Wu[8])+","+Fu(Wu[9])+","+Fu(Wu[10])+","+Fu(Wu[11])+","+Fu(Wu[12])+","+Fu(Wu[13])+","+Fu(Wu[14])+","+Fu(Wu[15])+")";return Du?"translate(-50%,-50%)translate("+Cu+"px,"+Pu+"px)"+zu+Qu:"translate(-50%,-50%)"+Qu}function Nu(Uu,zu,Wu,Qu){if(Uu instanceof CSS3DObject){Uu.onBeforeRender(_u,zu,Wu);var Ku;Uu instanceof CSS3DSprite?(Bu.copy(Wu.matrixWorldInverse),Bu.transpose(),Bu.copyPosition(Uu.matrixWorld),Bu.scale(Uu.scale),Bu.elements[3]=0,Bu.elements[7]=0,Bu.elements[11]=0,Bu.elements[15]=1,Ku=ku(Bu,Qu)):Ku=ku(Uu.matrixWorld,Qu);var Yu=Uu.element,Xc=Lu.objects.get(Uu);if(Xc===void 0||Xc.style!==Ku){Yu.style.WebkitTransform=Ku,Yu.style.transform=Ku;var _d={style:Ku};Du&&(_d.distanceToCameraSquared=Gu(Wu,Uu)),Lu.objects.set(Uu,_d)}Yu.style.display=Uu.visible?"":"none",Yu.parentNode!==Ou&&Ou.appendChild(Yu),Uu.onAfterRender(_u,zu,Wu)}for(var _f=0,qu=Uu.children.length;_f<qu;_f++)Nu(Uu.children[_f],zu,Wu,Qu)}var Gu=function(){var Uu=new Vector3,zu=new Vector3;return function(Wu,Qu){return Uu.setFromMatrixPosition(Wu.matrixWorld),zu.setFromMatrixPosition(Qu.matrixWorld),Uu.distanceToSquared(zu)}}();function ju(Uu){var zu=[];return Uu.traverse(function(Wu){Wu instanceof CSS3DObject&&zu.push(Wu)}),zu}function Hu(Uu){for(var zu=ju(Uu).sort(function(Yu,Xc){var _d=Lu.objects.get(Yu).distanceToCameraSquared,_f=Lu.objects.get(Xc).distanceToCameraSquared;return _d-_f}),Wu=zu.length,Qu=0,Ku=zu.length;Qu<Ku;Qu++)zu[Qu].element.style.zIndex=Wu-Qu}this.render=function(Uu,zu){var Wu=zu.projectionMatrix.elements[5]*Pu;if(Lu.camera.fov!==Wu&&(zu.isPerspectiveCamera?(Ru.style.WebkitPerspective=Wu+"px",Ru.style.perspective=Wu+"px"):(Ru.style.WebkitPerspective="",Ru.style.perspective=""),Lu.camera.fov=Wu),Uu.autoUpdate===!0&&Uu.updateMatrixWorld(),zu.parent===null&&zu.updateMatrixWorld(),zu.isOrthographicCamera)var Qu=-(zu.right+zu.left)/2,Ku=(zu.top+zu.bottom)/2;var Yu=zu.isOrthographicCamera?"scale("+Wu+")translate("+Fu(Qu)+"px,"+Fu(Ku)+"px)"+Vu(zu.matrixWorldInverse):"translateZ("+Wu+"px)"+Vu(zu.matrixWorldInverse),Xc=Yu+"translate("+Cu+"px,"+Pu+"px)";Lu.camera.style!==Xc&&!Du&&(Ou.style.WebkitTransform=Xc,Ou.style.transform=Xc,Lu.camera.style=Xc),Nu(Uu,Uu,zu,Yu),Du&&Hu(Uu)}};function l$7(..._u){const $u=[];return _u.forEach(Tu=>{Tu.isCSS3DObjectPlus?$u.push(Tu):$u.push(...l$7(...Tu.children))}),$u}function t$4(_u,$u){const Tu=Math.round(_u);return Tu%2===0?Tu:Tu+Number($u!=null&&$u.floor?-1:1)}function u$7(_u,$u,Tu=!0){if(!_u)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Cu=()=>{const Bu=t$4(_u.clientWidth,{floor:!0}),Lu=t$4(_u.clientHeight,{floor:!0});$u(Bu,Lu)};if(typeof ResizeObserver=="undefined"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Cu(),unobserve:()=>{}};const Pu=new ResizeObserver(Cu);return Tu&&Cu(),{observe:()=>Pu.observe(_u),unobserve:()=>Pu.unobserve(_u)}}var d$a=Object.defineProperty,l$6=(_u,$u,Tu)=>$u in _u?d$a(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$9=(_u,$u,Tu)=>(l$6(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class v$7 extends CSS3DRenderer{constructor(){super(),s$9(this,"wrapper"),s$9(this,"requestAnimationFrameId"),s$9(this,"resizeDisoper"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none"}setWrapper($u){if(!$u)throw new Error("CSS3DRenderer: wrapper is required");if($u.contains(this.domElement))return;const Tu=this.wrapper;return Tu&&Tu.contains(this.domElement)&&this.domElement.remove(),this.appendToElement($u),this.wrapper=$u,this}appendToElement($u){$u.appendChild(this.domElement);const Tu=(Bu,Lu)=>this.setSize(Bu,Lu),{observe:Cu,unobserve:Pu}=u$7($u,Tu,!0);Cu(),this.resizeDisoper=Pu,this.wrapper=$u}renderEveryFrame($u,Tu){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,$u),this.requestAnimationFrameId)return console.warn("CSS3DRenderer: render is running");const Cu=()=>{this.requestAnimationFrameId=requestAnimationFrame(Cu),!!$u.visible&&l$7($u).length!==0&&this.render($u,Tu)};Cu()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var $u;this.stopRender(),($u=this.resizeDisoper)==null||$u.call(this),this.domElement.remove()}}function v$6(_u){return typeof Symbol=="undefined"?`$Symbol<${_u}>$`:Symbol(_u)}const i$c=v$6("$$EVENT$$");function r$6(_u){return _u[i$c]||(_u[i$c]={}),_u[i$c]}function d$9(_u){_u[i$c]||delete _u[i$c]}class E$d{hasListener($u){const Tu=r$6(this);return Boolean((Tu==null?void 0:Tu[$u])&&Tu[$u].length>0)}on($u,Tu,Cu){const Pu=r$6(this);return Pu[$u]||(Pu[$u]=[]),Pu[$u].push([Tu,Cu||!1]),()=>this.off($u,Tu)}once($u,Tu){return this.on($u,Tu,!0)}off($u,Tu){if($u===void 0){d$9(this);return}const Cu=r$6(this);if(Cu[$u]||(Cu[$u]=[]),Tu===void 0){Cu[$u].length=0;return}let Pu=0;for(;Pu<Cu[$u].length&&Cu[$u][Pu][0]!==Tu;Pu++);Pu<Cu[$u].length&&Cu[$u].splice(Pu,1)}emit($u,...Tu){let Cu=!1;const Pu=r$6(this)[$u]||[];for(let Bu of Pu.slice()){const[Lu,Ru=!1]=Bu,Ou=Lu(...Tu);Ru&&this.off($u,Lu),Ou===!1&&(Cu=!0)}return Cu}}const n$a=({x:_u,y:$u,z:Tu})=>new Vector3(_u,$u,Tu),c$a=([_u,$u,Tu])=>new Vector3(_u,$u,Tu),s$8=_u=>_u instanceof Vector3?_u:Array.isArray(_u)?c$a(_u):n$a(_u);function c$9(..._u){const $u=new Vector3;return _u.forEach(Tu=>{$u.add(Tu)}),$u.divideScalar(_u.length),$u}var c$8=Object.defineProperty,m$8=(_u,$u,Tu)=>$u in _u?c$8(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,o$7=(_u,$u,Tu)=>(m$8(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class p$9 extends Mesh{constructor($u,Tu){const Cu=new MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:DoubleSide}),Pu=new PlaneGeometry($u,Tu);super(Pu,Cu),o$7(this,"name","opacity-mesh")}removeFromParent(){const $u=this.parent;return $u!==null&&$u.remove(this),this}}var $$6=Object.defineProperty,D$6=(_u,$u,Tu)=>$u in _u?$$6(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,i$b=(_u,$u,Tu)=>(D$6(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const w$6=1,A$7=`CSS3DObjectPlus@${w$6}`,Q$5=.00216,R$b=.003;class U$6 extends CSS3DObject{constructor($u){var Tu,Cu,Pu;const Bu=$u.container,Lu=$u.cornerPoints,Ru=(Tu=$u.ratio)!=null?Tu:R$b,Ou=(Cu=$u.dpr)!=null?Cu:1,Du=(Pu=$u.pointerEvents)!=null?Pu:"auto",Fu=Math.max(Q$5,Ru),Vu=Lu[0].distanceTo(Lu[1]),ku=Lu[1].distanceTo(Lu[2]),Nu=t$4(Vu/Ru*Ou),Gu=t$4(ku/Ru*Ou),ju=c$9(...Lu);let Hu;if(Fu===Ru)Bu.style.width=`${Nu}px`,Bu.style.height=`${Gu}px`,Hu=Bu;else{const Xc=document.createElement("div");Xc.style.width=`${Nu}px`,Xc.style.height=`${Gu}px`,Xc.style.pointerEvents="none";const _d=Ru/Fu;Bu.style.position="absolute",Bu.style.left="0",Bu.style.top="0",Bu.style.width=`${_d*Nu}px`,Bu.style.height=`${_d*Gu}px`,Xc.appendChild(Bu),Hu=Xc}if(super(Hu),i$b(this,"version",w$6),i$b(this,"isCSS3DObjectPlus",!0),i$b(this,"container"),i$b(this,"width"),i$b(this,"height"),i$b(this,"domWidthPx"),i$b(this,"domHeightPx"),i$b(this,"cornerPoints"),i$b(this,"centerPosition"),i$b(this,"ratio"),i$b(this,"mode","front"),i$b(this,"hooks",new E$d),i$b(this,"opacityMesh"),i$b(this,"selfVisible",!0),i$b(this,"parentVisibleListenerDisposer"),i$b(this,"createOpacityMesh",Xc=>{const{domWidthPx:_d,domHeightPx:_f}=Xc,qu=new p$9(_d,_f);return qu.position.copy(Xc.position),qu.rotation.copy(Xc.rotation),qu.scale.copy(Xc.scale),qu}),i$b(this,"addParentVisibleListener",()=>{var Xc;if((Xc=this.parent)!=null&&Xc.isCSS3DGroup){const _d=this.parent,_f=qu=>{this.setVisible(qu&&this.selfVisible,{setSelfVisible:!1})};_d.hooks.on("visibleChange",_f),this.parentVisibleListenerDisposer=()=>_d.hooks.off("visibleChange",_f)}}),i$b(this,"removeParentVisibleListener",()=>{var Xc;(Xc=this.parentVisibleListenerDisposer)==null||Xc.call(this)}),Bu.style.pointerEvents=Du,this.scale.set(Fu,Fu,Fu),this.cornerPoints=Lu,this.ratio=Ru,this.container=Bu,$u.mode&&(this.mode=$u.mode),Fu===Ru)this.width=Vu,this.height=ku,this.domWidthPx=Nu,this.domHeightPx=Gu,this.centerPosition=ju;else{const Xc=Ru/Fu;this.width=Xc*Vu,this.height=Xc*ku,this.domWidthPx=Xc*Nu,this.domHeightPx=Xc*Gu,this.centerPosition=new Vector3().subVectors(ju,Lu[0]).multiplyScalar(Xc).add(Lu[0])}Bu.classList.add(`${A$7}__container`);const Uu=new Vector3().subVectors(Lu[1],Lu[0]),zu=new Vector3().subVectors(Lu[3],Lu[0]),Wu=new Vector3().crossVectors(Uu,zu).normalize();this.lookAt(Wu);const Qu=this.up.clone().applyQuaternion(this.quaternion),Ku=zu.clone(),Yu=new Vector3().crossVectors(Qu,Ku).normalize();this.rotateOnWorldAxis(Yu,Qu.angleTo(Ku)),this.position.copy(ju),this.addEventListener("added",()=>{var Xc;this.mode==="front"&&((Xc=this.opacityMesh)==null||Xc.removeFromParent()),this.addParentVisibleListener()}),this.addEventListener("removed",()=>{var Xc;(Xc=this.opacityMesh)==null||Xc.removeFromParent(),this.removeParentVisibleListener()})}setVisible($u,Tu={setSelfVisible:!0}){Tu.setSelfVisible&&(this.selfVisible=$u),this.visible=$u,this.opacityMesh&&(this.opacityMesh.visible=$u)}removeFromParent(){var $u;const Tu=this.parent;return Tu!==null&&Tu.remove(this),($u=this.opacityMesh)==null||$u.removeFromParent(),this}removeOpacityMesh(){var $u;return($u=this.opacityMesh)==null||$u.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var $u;this.container.remove(),this.removeFromParent(),($u=this.opacityMesh)==null||$u.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const $u=this.createOpacityMesh(this);return this.opacityMesh=$u,$u}}applyMatrix4($u){var Tu;super.applyMatrix4($u),(Tu=this.opacityMesh)==null||Tu.applyMatrix4($u)}applyQuaternion($u){var Tu;return super.applyQuaternion($u),(Tu=this.opacityMesh)==null||Tu.applyQuaternion($u),this}applyScaleMatrix4($u){var Tu;this.scale.applyMatrix4($u),(Tu=this.opacityMesh)==null||Tu.scale.applyMatrix4($u)}}var i$a=Object.defineProperty,a$5=(_u,$u,Tu)=>$u in _u?i$a(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,d$8=(_u,$u,Tu)=>(a$5(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class m$7 extends Scene{constructor(){super()}add(...$u){return super.add(...$u),l$7(...$u).forEach(Tu=>{Tu.mode="front"}),this}}class p$8 extends Scene{constructor($u){if(super(),d$8(this,"scene"),!$u)throw new Error("CSS3DBehindScene: scene is required");this.scene=$u}add(...$u){return super.add(...$u),l$7(...$u).forEach(Tu=>{Tu.mode="behind",this.scene.add(Tu.getOpacityMesh())}),this}remove(...$u){return l$7(...$u).forEach(Tu=>{var Cu;(Cu=Tu.opacityMesh)==null||Cu.removeFromParent()}),super.remove(...$u),this}}var n$9=Object.defineProperty,d$7=(_u,$u,Tu)=>$u in _u?n$9(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$7=(_u,$u,Tu)=>(d$7(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class h$5 extends Group$1{constructor($u){super(),s$7(this,"isCSS3DGroup",!0),s$7(this,"mode"),s$7(this,"CSS3DObjectLength",0),s$7(this,"hooks",new E$d),this.mode=$u}add(...$u){return l$7(...$u).forEach(Tu=>{Tu.mode=this.mode}),super.add(...$u),this.updateLength(),this}setVisible($u){this.visible=$u,this.hooks.emit("visibleChange",$u)}remove(...$u){return super.remove(...$u),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=l$7(this).length}}class m$6 extends h$5{constructor(){super("front")}}class g$7 extends h$5{constructor($u){if(super("behind"),s$7(this,"scene"),!$u)throw new Error("CSS3DBehindScene: scene is required");this.scene=$u}add(...$u){return l$7(...$u).forEach(Tu=>{this.scene.add(Tu.getOpacityMesh())}),super.add(...$u),this}}var N$4=Object.defineProperty,E$c=Object.getOwnPropertySymbols,x$9=Object.prototype.hasOwnProperty,V$7=Object.prototype.propertyIsEnumerable,M$8=(_u,$u,Tu)=>$u in _u?N$4(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,C$6=(_u,$u)=>{for(var Tu in $u||($u={}))x$9.call($u,Tu)&&M$8(_u,Tu,$u[Tu]);if(E$c)for(var Tu of E$c($u))V$7.call($u,Tu)&&M$8(_u,Tu,$u[Tu]);return _u},i$9=(_u,$u,Tu)=>(M$8(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),p$7=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});const W$4=3,g$6="CSS3DRenderer",b$6=`${g$6}@${W$4}`,u$6=()=>{console.error(`${b$6} is disposed`)},n$8={css3DObjects:[],frontModeStore:{css3DRenderer:new v$7},behindModeStore:{css3DRenderer:new v$7}};function B$9(_u){return n$8.css3DObjects.find($u=>$u.id===_u)}function H$5(_u){n$8.frontModeStore.css3DRenderer.setWrapper(_u)}function T$4(_u){n$8.behindModeStore.css3DRenderer.setWrapper(_u)}class j$4{constructor($u){i$9(this,"hooks",new E$d),i$9(this,"state",{enabled:!0,visible:!0,disposed:!1}),i$9(this,"_scene"),i$9(this,"store",{frontModeGroup:new m$6}),i$9(this,"create3DElement",(Tu,Cu,Pu)=>{if(this.state.disposed)return u$6();const Bu=(()=>{const Qu={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(Qu,Pu)})(),Lu=Cu.map(s$8);if((Lu==null?void 0:Lu.length)<4)return console.error(`${b$6}: requires 4 point but params may have fewer`);const{ratio:Ru,devicePixelRatio:Ou,mode:Du,autoRender:Fu,container:Vu,pointerEvents:ku}=Bu,Nu=this.createObject(Lu,{ratio:Ru,dpr:Ou,container:Vu,mode:Du,pointerEvents:ku});n$8.css3DObjects.push(Nu),Bu.scene&&this.setScene(Bu.scene);const Gu=()=>{const Qu=Nu.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();!Qu||Qu.add(Nu)},ju=()=>{Gu(),this.render(Tu)},Hu=Qu=>this.setVisibleById(Nu.id,Qu),Uu=Qu=>this.setEnabledById(Nu.id,Qu),zu=()=>(Nu.removeFromParent(),!0),Wu=Du==="front"?n$8.frontModeStore.css3DRenderer:n$8.behindModeStore.css3DRenderer;return Fu&&ju(),{id:Nu.uuid,container:Vu,css3DObject:Nu,render:Fu?void 0:ju,show:()=>Hu(!0),hide:()=>Hu(!1),setVisible:Hu,enable:()=>Uu(!0),disable:()=>Uu(!1),setEnabled:Uu,dispose:zu,appendToElement:Qu=>Wu.setWrapper(Qu)}}),i$9(this,"setVisibleById",(Tu,Cu)=>{var Pu;(Pu=B$9(Tu))==null||Pu.setVisible(Cu)}),i$9(this,"setEnabledById",(Tu,Cu)=>{const Pu=B$9(Tu);if(!Pu)return;const Bu=Pu.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});!Bu||(Cu?Bu.add(Pu):Bu.remove(Pu))}),i$9(this,"createObject",(Tu,Cu)=>{const Pu=new U$6(C$6({cornerPoints:Tu},Cu));return Pu.element.classList.add(`${g$6}__container`),Pu.element.id=`${g$6}__container--${Pu.uuid}`,Pu}),$u&&this.setScene($u)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return n$8.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return n$8.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return n$8.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return n$8.behindModeStore.css3DRenderer}setScene($u){this._scene=$u}getCurrentState(){return this.state}setState($u,Tu={userAction:!0}){if(this.state.disposed)return u$6();const Cu=C$6({},this.state);this.state=Object.assign(this.state,$u),Cu.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Cu.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),Cu.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:Cu,userAction:Tu.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return p$7(this,arguments,function*({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$6();this.setState({visible:!0},{userAction:$u}),this.hooks.emit("show",{userAction:$u})})}hide(){return p$7(this,arguments,function*({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$6();this.setState({visible:!1},{userAction:$u}),this.hooks.emit("hide",{userAction:$u})})}enable({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$6();this.setState({enabled:!0},{userAction:$u}),this.hooks.emit("enable",{userAction:$u})}disable({userAction:$u}={userAction:!0}){if(this.state.disposed)return u$6();this.setState({enabled:!1},{userAction:$u}),this.hooks.emit("disable",{userAction:$u})}getFrontCSS3DScene({createSceneIfNotExists:$u=!1}={}){var Tu;const Cu=(Tu=n$8.frontModeStore)==null?void 0:Tu.css3DScene;if(Cu)return Cu;if($u){const Pu=new m$7;n$8.frontModeStore.css3DScene=Pu}return n$8.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:$u=!1}={}){var Tu,Cu;const Pu=(Tu=n$8.behindModeStore)==null?void 0:Tu.css3DScene;if(Pu)return Pu;if($u){const Bu=(Cu=n$8.behindModeStore.scene)!=null?Cu:this.scene;if(!Bu){console.error(`${b$6}: scene is required when mode is behind`);return}const Lu=new p$8(Bu);n$8.behindModeStore.css3DScene=Lu,n$8.behindModeStore.scene=Bu}return n$8.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:$u=!0}={}){const Tu=this.getFrontCSS3DScene({createSceneIfNotExists:$u});return $u&&Tu&&(Tu.getObjectById(this.store.frontModeGroup.id)||Tu.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:$u=!0}={}){var Tu;const Cu=this.getBehindCSS3DScene({createSceneIfNotExists:$u});if($u&&Cu&&this.scene){const Pu=(Tu=this.store.behindModeGroup)!=null?Tu:new g$7(this.scene);this.store.behindModeGroup=Pu,Cu.getObjectById(Pu.id)||Cu.add(Pu)}return this.store.behindModeGroup}render($u){var Tu,Cu;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const Pu=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!Pu)return console.error(`${b$6}: css3DScene is required when mode is front`);n$8.frontModeStore.css3DRenderer.renderEveryFrame(Pu,$u)}if(((Cu=(Tu=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:Tu.CSS3DObjectLength)!=null?Cu:0)>0){const Pu=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!Pu)return console.error(`${b$6}: css3DScene is required when mode is behind`);n$8.behindModeStore.css3DRenderer.renderEveryFrame(Pu,$u)}}handleShow(){return p$7(this,null,function*(){var $u;this.store.frontModeGroup.setVisible(!0),($u=this.store.behindModeGroup)==null||$u.setVisible(!0)})}handleHide(){return p$7(this,null,function*(){var $u;this.store.frontModeGroup.setVisible(!1),($u=this.store.behindModeGroup)==null||$u.setVisible(!1)})}handleEnable(){var $u,Tu;($u=this.getFrontCSS3DScene())==null||$u.add(this.store.frontModeGroup),this.store.behindModeGroup&&((Tu=this.getBehindCSS3DScene())==null||Tu.add(this.store.behindModeGroup))}handleDisable(){var $u,Tu,Cu;this.store.frontModeGroup.children.forEach(Pu=>{Pu instanceof CSS3DObject&&Pu.element instanceof Element&&Pu.element.parentNode!==null&&Pu.element.parentNode.removeChild(Pu.element)}),($u=this.store.behindModeGroup)==null||$u.children.forEach(Pu=>{Pu instanceof CSS3DObject&&Pu.element instanceof Element&&Pu.element.parentNode!==null&&Pu.element.parentNode.removeChild(Pu.element)}),(Tu=this.getFrontCSS3DScene())==null||Tu.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((Cu=this.getBehindCSS3DScene())==null||Cu.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}}i$9(j$4,"setFrontModeContainer",H$5),i$9(j$4,"setBehindModeContainer",T$4);var t$3=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});function f$3(_u){return t$3(this,null,function*(){return new Promise($u=>{var Tu;if((Tu=_u.model)!=null&&Tu.loaded){$u();return}else _u.once("modelLoaded",()=>$u())})})}const n$7=document.createElement("div");n$7.style.position="absolute";n$7.style.top="0";n$7.style.left="0";n$7.style.width="100%";n$7.style.height="100%";n$7.style.pointerEvents="none";function s$6(_u){var $u,Tu;const Cu=(Tu=l$5(_u.getElement()))!=null?Tu:l$5(($u=_u.getElement())==null?void 0:$u.parentElement);if(Cu!=null&&Cu.parentElement)return Cu.parentElement.insertBefore(n$7,Cu),n$7;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/blob/main/plugins/src/PanoTagPlugin/README.md")}function l$5(_u){var $u;if(!_u)return;const Tu=($u=_u.style.position)!=null?$u:getComputedStyle(_u).position;if(Tu!=="fixed"&&Tu!=="absolute"&&Tu!=="relative")return;const Cu=getComputedStyle(_u).backgroundColor;if(!(Cu!=="transparent"&&Cu!=="rgba(0, 0, 0, 0)"))return _u}var C$5=Object.defineProperty,E$b=Object.defineProperties,F$7=Object.getOwnPropertyDescriptors,b$5=Object.getOwnPropertySymbols,R$a=Object.prototype.hasOwnProperty,D$5=Object.prototype.propertyIsEnumerable,m$5=(_u,$u,Tu)=>$u in _u?C$5(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,p$6=(_u,$u)=>{for(var Tu in $u||($u={}))R$a.call($u,Tu)&&m$5(_u,Tu,$u[Tu]);if(b$5)for(var Tu of b$5($u))D$5.call($u,Tu)&&m$5(_u,Tu,$u[Tu]);return _u},l$4=(_u,$u)=>E$b(_u,F$7($u)),d$6=(_u,$u,Tu)=>(m$5(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);const x$8="v2.0.1",v$5=`CSS3DRenderPlugin@${x$8}`;class z$4 extends j$4{constructor($u){super(),d$6(this,"five"),d$6(this,"behindFiveContainer"),d$6(this,"staticPrefix","//vrlab-static.ljcdn.com"),d$6(this,"create3DDomContainer",(Tu,Cu)=>{if(this.state.disposed)return;const Pu=(()=>{var Fu;(Cu==null?void 0:Cu.dpr)!==void 0&&console.warn(`${v$5}: please use "config.devicePixelRatio" replace "config.dpr"`);const Vu={ratio:.00216,devicePixelRatio:(Fu=Cu==null?void 0:Cu.dpr)!=null?Fu:1,mode:"front",autoRender:!0};return Object.assign(Vu,Cu,(Cu==null?void 0:Cu.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Bu=this.five.getElement();if(!Bu){console.error(`${v$5}: five.getElement() is ${Bu}`);return}const{autoRender:Lu}=Pu;Pu.mode==="behind"&&Pu.behindFiveContainer&&(this.behindFiveContainer=Pu.behindFiveContainer);const Ru=this.create3DElement(this.five.camera,Tu,l$4(p$6({},Pu),{autoRender:!1}));if(!Ru)return;const Ou=()=>{const Fu=Ru.css3DObject.mode==="front"?Bu.parentElement:this.getBehindFiveElement();if(!Fu)return console.error(`${v$5}: wrapper is ${Fu}`);Ru.appendToElement(Fu),Ru.render()},Du=()=>{Ru.css3DObject.mode==="front"&&Ou(),Ru.css3DObject.mode==="behind"&&f$3(this.five).then(()=>{Ou()})};return Lu&&Du(),l$4(p$6({},Ru),{render:Lu?void 0:Du})}),this.five=$u}disposeAll(){return this.dispose()}setState(...$u){const Tu=super.setState(...$u);return this.five.needsRender=!0,Tu}getBehindFiveElement(){return this.behindFiveContainer?this.behindFiveContainer:(this.behindFiveContainer=s$6(this.five),this.behindFiveContainer)}}const R$9=_u=>new z$4(_u);function E$a(){}const nt=_u=>_u;function $t(_u,$u){for(const Tu in $u)_u[Tu]=$u[Tu];return _u}function it(_u){return _u()}function Y$3(){return Object.create(null)}function N$3(_u){_u.forEach(it)}function F$6(_u){return typeof _u=="function"}function Dt(_u,$u){return _u!=_u?$u==$u:_u!==$u||_u&&typeof _u=="object"||typeof _u=="function"}let O$9;function Lt(_u,$u){return O$9||(O$9=document.createElement("a")),O$9.href=$u,_u===O$9.href}function xt(_u){return Object.keys(_u).length===0}function Rt(_u,$u,Tu,Cu){if(_u){const Pu=ot(_u,$u,Tu,Cu);return _u[0](Pu)}}function ot(_u,$u,Tu,Cu){return _u[1]&&Cu?$t(Tu.ctx.slice(),_u[1](Cu($u))):Tu.ctx}function qt(_u,$u,Tu,Cu){if(_u[2]&&Cu){const Pu=_u[2](Cu(Tu));if($u.dirty===void 0)return Pu;if(typeof Pu=="object"){const Bu=[],Lu=Math.max($u.dirty.length,Pu.length);for(let Ru=0;Ru<Lu;Ru+=1)Bu[Ru]=$u.dirty[Ru]|Pu[Ru];return Bu}return $u.dirty|Pu}return $u.dirty}function Wt(_u,$u,Tu,Cu,Pu,Bu){if(Pu){const Lu=ot($u,Tu,Cu,Bu);_u.p(Lu,Pu)}}function Bt(_u){if(_u.ctx.length>32){const $u=[],Tu=_u.ctx.length/32;for(let Cu=0;Cu<Tu;Cu++)$u[Cu]=-1;return $u}return-1}function Ft(_u){const $u={};for(const Tu in _u)Tu[0]!=="$"&&($u[Tu]=_u[Tu]);return $u}function Ht(_u,$u){const Tu={};$u=new Set($u);for(const Cu in _u)!$u.has(Cu)&&Cu[0]!=="$"&&(Tu[Cu]=_u[Cu]);return Tu}const st=typeof window!="undefined";let rt=st?()=>window.performance.now():()=>Date.now(),Q$4=st?_u=>requestAnimationFrame(_u):E$a;const k$4=new Set;function ct(_u){k$4.forEach($u=>{$u.c(_u)||(k$4.delete($u),$u.f())}),k$4.size!==0&&Q$4(ct)}function ft(_u){let $u;return k$4.size===0&&Q$4(ct),{promise:new Promise(Tu=>{k$4.add($u={c:_u,f:Tu})}),abort(){k$4.delete($u)}}}function ut(_u,$u){_u.appendChild($u)}function Ut(_u,$u,Tu){const Cu=V$6(_u);if(!Cu.getElementById($u)){const Pu=I$8("style");Pu.id=$u,Pu.textContent=Tu,lt(Cu,Pu)}}function V$6(_u){if(!_u)return document;const $u=_u.getRootNode?_u.getRootNode():_u.ownerDocument;return $u&&$u.host?$u:_u.ownerDocument}function bt(_u){const $u=I$8("style");return lt(V$6(_u),$u),$u.sheet}function lt(_u,$u){return ut(_u.head||_u,$u),$u.sheet}function vt(_u,$u,Tu){_u.insertBefore($u,Tu||null)}function H$4(_u){_u.parentNode&&_u.parentNode.removeChild(_u)}function Gt(_u,$u){for(let Tu=0;Tu<_u.length;Tu+=1)_u[Tu]&&_u[Tu].d($u)}function I$8(_u){return document.createElement(_u)}function kt(_u){return document.createElementNS("http://www.w3.org/2000/svg",_u)}function at(_u){return document.createTextNode(_u)}function Jt(){return at(" ")}function Kt(){return at("")}function Z$2(_u,$u,Tu,Cu){return _u.addEventListener($u,Tu,Cu),()=>_u.removeEventListener($u,Tu,Cu)}function Qt(_u){return function($u){return $u.stopPropagation(),_u.call(this,$u)}}function Et(_u,$u,Tu){Tu==null?_u.removeAttribute($u):_u.getAttribute($u)!==Tu&&_u.setAttribute($u,Tu)}function Vt(_u,$u){const Tu=Object.getOwnPropertyDescriptors(_u.__proto__);for(const Cu in $u)$u[Cu]==null?_u.removeAttribute(Cu):Cu==="style"?_u.style.cssText=$u[Cu]:Cu==="__value"?_u.value=_u[Cu]=$u[Cu]:Tu[Cu]&&Tu[Cu].set?_u[Cu]=$u[Cu]:Et(_u,Cu,$u[Cu])}function Nt(_u){return Array.from(_u.childNodes)}function Xt(_u,$u){$u=""+$u,_u.wholeText!==$u&&(_u.data=$u)}function Yt(_u,$u,Tu,Cu){Tu===null?_u.style.removeProperty($u):_u.style.setProperty($u,Tu,Cu?"important":"")}let T$3;function At(){if(T$3===void 0){T$3=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{T$3=!0}}return T$3}function Zt(_u,$u){getComputedStyle(_u).position==="static"&&(_u.style.position="relative");const Tu=I$8("iframe");Tu.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Tu.setAttribute("aria-hidden","true"),Tu.tabIndex=-1;const Cu=At();let Pu;return Cu?(Tu.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Pu=Z$2(window,"message",Bu=>{Bu.source===Tu.contentWindow&&$u()})):(Tu.src="about:blank",Tu.onload=()=>{Pu=Z$2(Tu.contentWindow,"resize",$u)}),ut(_u,Tu),()=>{(Cu||Pu&&Tu.contentWindow)&&Pu(),H$4(Tu)}}function te$4(_u,$u,Tu){_u.classList[Tu?"add":"remove"]($u)}function dt(_u,$u,{bubbles:Tu=!1,cancelable:Cu=!1}={}){const Pu=document.createEvent("CustomEvent");return Pu.initCustomEvent(_u,Tu,Cu,$u),Pu}class ee$3{constructor($u=!1){this.is_svg=!1,this.is_svg=$u,this.e=this.n=null}c($u){this.h($u)}m($u,Tu,Cu=null){this.e||(this.is_svg?this.e=kt(Tu.nodeName):this.e=I$8(Tu.nodeName),this.t=Tu,this.c($u)),this.i(Cu)}h($u){this.e.innerHTML=$u,this.n=Array.from(this.e.childNodes)}i($u){for(let Tu=0;Tu<this.n.length;Tu+=1)vt(this.t,this.n[Tu],$u)}p($u){this.d(),this.h($u),this.i(this.a)}d(){this.n.forEach(H$4)}}const q$6=new Map;let W$3=0;function Ct(_u){let $u=5381,Tu=_u.length;for(;Tu--;)$u=($u<<5)-$u^_u.charCodeAt(Tu);return $u>>>0}function Mt(_u,$u){const Tu={stylesheet:bt($u),rules:{}};return q$6.set(_u,Tu),Tu}function ht(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru=0){const Ou=16.666/Cu;let Du=`{
`;for(let Hu=0;Hu<=1;Hu+=Ou){const Uu=$u+(Tu-$u)*Bu(Hu);Du+=Hu*100+`%{${Lu(Uu,1-Uu)}}
`}const Fu=Du+`100% {${Lu(Tu,1-Tu)}}
}`,Vu=`__svelte_${Ct(Fu)}_${Ru}`,ku=V$6(_u),{stylesheet:Nu,rules:Gu}=q$6.get(ku)||Mt(ku,_u);Gu[Vu]||(Gu[Vu]=!0,Nu.insertRule(`@keyframes ${Vu} ${Fu}`,Nu.cssRules.length));const ju=_u.style.animation||"";return _u.style.animation=`${ju?`${ju}, `:""}${Vu} ${Cu}ms linear ${Pu}ms 1 both`,W$3+=1,Vu}function J$6(_u,$u){const Tu=(_u.style.animation||"").split(", "),Cu=Tu.filter($u?Bu=>Bu.indexOf($u)<0:Bu=>Bu.indexOf("__svelte")===-1),Pu=Tu.length-Cu.length;Pu&&(_u.style.animation=Cu.join(", "),W$3-=Pu,W$3||St())}function St(){Q$4(()=>{W$3||(q$6.forEach(_u=>{const{ownerNode:$u}=_u.stylesheet;$u&&H$4($u)}),q$6.clear())})}let P$b;function S$5(_u){P$b=_u}function v$4(){if(!P$b)throw new Error("Function called outside component initialization");return P$b}function ne$4(_u){v$4().$$.before_update.push(_u)}function ie$3(_u){v$4().$$.on_mount.push(_u)}function oe$2(_u){v$4().$$.after_update.push(_u)}function se$3(_u){v$4().$$.on_destroy.push(_u)}function re$4(){const _u=v$4();return($u,Tu,{cancelable:Cu=!1}={})=>{const Pu=_u.$$.callbacks[$u];if(Pu){const Bu=dt($u,Tu,{cancelable:Cu});return Pu.slice().forEach(Lu=>{Lu.call(_u,Bu)}),!Bu.defaultPrevented}return!0}}function ce(_u,$u){return v$4().$$.context.set(_u,$u),$u}function fe$1(_u){return v$4().$$.context.get(_u)}function ue(_u,$u){const Tu=_u.$$.callbacks[$u.type];Tu&&Tu.slice().forEach(Cu=>Cu.call(this,$u))}const M$7=[],tt=[],L$8=[],et=[],_t=Promise.resolve();let K$7=!1;function pt(){K$7||(K$7=!0,_t.then(mt))}function le$2(){return pt(),_t}function j$3(_u){L$8.push(_u)}const G$5=new Set;let D$4=0;function mt(){const _u=P$b;do{for(;D$4<M$7.length;){const $u=M$7[D$4];D$4++,S$5($u),Pt($u.$$)}for(S$5(null),M$7.length=0,D$4=0;tt.length;)tt.pop()();for(let $u=0;$u<L$8.length;$u+=1){const Tu=L$8[$u];G$5.has(Tu)||(G$5.add(Tu),Tu())}L$8.length=0}while(M$7.length);for(;et.length;)et.pop()();K$7=!1,G$5.clear(),S$5(_u)}function Pt(_u){if(_u.fragment!==null){_u.update(),N$3(_u.before_update);const $u=_u.dirty;_u.dirty=[-1],_u.fragment&&_u.fragment.p(_u.ctx,$u),_u.after_update.forEach(j$3)}}let C$4;function yt(){return C$4||(C$4=Promise.resolve(),C$4.then(()=>{C$4=null})),C$4}function B$8(_u,$u,Tu){_u.dispatchEvent(dt(`${$u?"intro":"outro"}${Tu}`))}const R$8=new Set;let x$7;function ae$5(){x$7={r:0,c:[],p:x$7}}function de$2(){x$7.r||N$3(x$7.c),x$7=x$7.p}function gt(_u,$u){_u&&_u.i&&(R$8.delete(_u),_u.i($u))}function jt(_u,$u,Tu,Cu){if(_u&&_u.o){if(R$8.has(_u))return;R$8.add(_u),x$7.c.push(()=>{R$8.delete(_u),Cu&&(Tu&&_u.d(1),Cu())}),_u.o($u)}else Cu&&Cu()}const wt={duration:0};function he$1(_u,$u,Tu){let Cu=$u(_u,Tu),Pu=!1,Bu,Lu,Ru=0;function Ou(){Bu&&J$6(_u,Bu)}function Du(){const{delay:Vu=0,duration:ku=300,easing:Nu=nt,tick:Gu=E$a,css:ju}=Cu||wt;ju&&(Bu=ht(_u,0,1,ku,Vu,Nu,ju,Ru++)),Gu(0,1);const Hu=rt()+Vu,Uu=Hu+ku;Lu&&Lu.abort(),Pu=!0,j$3(()=>B$8(_u,!0,"start")),Lu=ft(zu=>{if(Pu){if(zu>=Uu)return Gu(1,0),B$8(_u,!0,"end"),Ou(),Pu=!1;if(zu>=Hu){const Wu=Nu((zu-Hu)/ku);Gu(Wu,1-Wu)}}return Pu})}let Fu=!1;return{start(){Fu||(Fu=!0,J$6(_u),F$6(Cu)?(Cu=Cu(),yt().then(Du)):Du())},invalidate(){Fu=!1},end(){Pu&&(Ou(),Pu=!1)}}}function _e$1(_u,$u,Tu){let Cu=$u(_u,Tu),Pu=!0,Bu;const Lu=x$7;Lu.r+=1;function Ru(){const{delay:Ou=0,duration:Du=300,easing:Fu=nt,tick:Vu=E$a,css:ku}=Cu||wt;ku&&(Bu=ht(_u,1,0,Du,Ou,Fu,ku));const Nu=rt()+Ou,Gu=Nu+Du;j$3(()=>B$8(_u,!1,"start")),ft(ju=>{if(Pu){if(ju>=Gu)return Vu(0,1),B$8(_u,!1,"end"),--Lu.r||N$3(Lu.c),!1;if(ju>=Nu){const Hu=Fu((ju-Nu)/Du);Vu(1-Hu,Hu)}}return Pu})}return F$6(Cu)?yt().then(()=>{Cu=Cu(),Ru()}):Ru(),{end(Ou){Ou&&Cu.tick&&Cu.tick(1,0),Pu&&(Bu&&J$6(_u,Bu),Pu=!1)}}}function ye$1(_u,$u){jt(_u,1,1,()=>{$u.delete(_u.key)})}function ge$1(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu){let ku=_u.length,Nu=Bu.length,Gu=ku;const ju={};for(;Gu--;)ju[_u[Gu].key]=Gu;const Hu=[],Uu=new Map,zu=new Map;for(Gu=Nu;Gu--;){const Yu=Vu(Pu,Bu,Gu),Xc=Tu(Yu);let _d=Lu.get(Xc);_d?Cu&&_d.p(Yu,$u):(_d=Du(Xc,Yu),_d.c()),Uu.set(Xc,Hu[Gu]=_d),Xc in ju&&zu.set(Xc,Math.abs(Gu-ju[Xc]))}const Wu=new Set,Qu=new Set;function Ku(Yu){gt(Yu,1),Yu.m(Ru,Fu),Lu.set(Yu.key,Yu),Fu=Yu.first,Nu--}for(;ku&&Nu;){const Yu=Hu[Nu-1],Xc=_u[ku-1],_d=Yu.key,_f=Xc.key;Yu===Xc?(Fu=Yu.first,ku--,Nu--):Uu.has(_f)?!Lu.has(_d)||Wu.has(_d)?Ku(Yu):Qu.has(_f)?ku--:zu.get(_d)>zu.get(_f)?(Qu.add(_d),Ku(Yu)):(Wu.add(_f),ku--):(Ou(Xc,Lu),ku--)}for(;ku--;){const Yu=_u[ku];Uu.has(Yu.key)||Ou(Yu,Lu)}for(;Nu;)Ku(Hu[Nu-1]);return Hu}function we$3(_u,$u){const Tu={},Cu={},Pu={$$scope:1};let Bu=_u.length;for(;Bu--;){const Lu=_u[Bu],Ru=$u[Bu];if(Ru){for(const Ou in Lu)Ou in Ru||(Cu[Ou]=1);for(const Ou in Ru)Pu[Ou]||(Tu[Ou]=Ru[Ou],Pu[Ou]=1);_u[Bu]=Ru}else for(const Ou in Lu)Pu[Ou]=1}for(const Lu in Cu)Lu in Tu||(Tu[Lu]=void 0);return Tu}function $e(_u){_u&&_u.c()}function zt(_u,$u,Tu,Cu){const{fragment:Pu,after_update:Bu}=_u.$$;Pu&&Pu.m($u,Tu),Cu||j$3(()=>{const Lu=_u.$$.on_mount.map(it).filter(F$6);_u.$$.on_destroy?_u.$$.on_destroy.push(...Lu):N$3(Lu),_u.$$.on_mount=[]}),Bu.forEach(j$3)}function Ot(_u,$u){const Tu=_u.$$;Tu.fragment!==null&&(N$3(Tu.on_destroy),Tu.fragment&&Tu.fragment.d($u),Tu.on_destroy=Tu.fragment=null,Tu.ctx=[])}function Tt(_u,$u){_u.$$.dirty[0]===-1&&(M$7.push(_u),pt(),_u.$$.dirty.fill(0)),_u.$$.dirty[$u/31|0]|=1<<$u%31}function xe(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru=[-1]){const Ou=P$b;S$5(_u);const Du=_u.$$={fragment:null,ctx:[],props:Bu,update:E$a,not_equal:Pu,bound:Y$3(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map($u.context||(Ou?Ou.$$.context:[])),callbacks:Y$3(),dirty:Ru,skip_bound:!1,root:$u.target||Ou.$$.root};Lu&&Lu(Du.root);let Fu=!1;if(Du.ctx=Tu?Tu(_u,$u.props||{},(Vu,ku,...Nu)=>{const Gu=Nu.length?Nu[0]:ku;return Du.ctx&&Pu(Du.ctx[Vu],Du.ctx[Vu]=Gu)&&(!Du.skip_bound&&Du.bound[Vu]&&Du.bound[Vu](Gu),Fu&&Tt(_u,Vu)),ku}):[],Du.update(),Fu=!0,N$3(Du.before_update),Du.fragment=Cu?Cu(Du.ctx):!1,$u.target){if($u.hydrate){const Vu=Nt($u.target);Du.fragment&&Du.fragment.l(Vu),Vu.forEach(H$4)}else Du.fragment&&Du.fragment.c();$u.intro&&gt(_u.$$.fragment),zt(_u,$u.target,$u.anchor,$u.customElement),mt()}S$5(Ou)}class be$1{$destroy(){Ot(this,1),this.$destroy=E$a}$on($u,Tu){if(!F$6(Tu))return E$a;const Cu=this.$$.callbacks[$u]||(this.$$.callbacks[$u]=[]);return Cu.push(Tu),()=>{const Pu=Cu.indexOf(Tu);Pu!==-1&&Cu.splice(Pu,1)}}$set($u){this.$$set&&!xt($u)&&(this.$$.skip_bound=!0,this.$$set($u),this.$$.skip_bound=!1)}}function e$3(_u){return Object.prototype.toString.call(_u)==="[object Object]"}function u$5(_u,$u){return _u===$u?!0:typeof _u!=typeof $u?!1:!!(Number.isNaN(_u)&&Number.isNaN($u))}function o$6(_u,$u){const Tu=Object.getOwnPropertyNames(_u),Cu=Object.getOwnPropertyNames($u);if(Tu.length!==Cu.length)return!1;for(let Pu=0,Bu=Tu.length;Pu<Bu;Pu++){const Lu=Tu[Pu];if(!u$5(_u[Lu],$u[Lu]))return!1}return!0}function p$5(_u,$u){if(_u.length!==$u.length)return!1;for(let Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(!u$5(_u[Tu],$u[Tu]))return!1;return!0}function c$7(_u,$u){return u$5(_u,$u)?!0:e$3(_u)&&e$3($u)?o$6(_u,$u):Array.isArray(_u)&&Array.isArray($u)?p$5(_u,$u):!1}function a$4(_u,$u){return u$5(_u,$u)?!0:e$3(_u)&&e$3($u)?g$5(_u,$u):Array.isArray(_u)&&Array.isArray($u)?y$5(_u,$u):!1}function y$5(_u,$u){if(_u.length!==$u.length)return!1;for(let Tu=0,Cu=_u.length;Tu<Cu;Tu++)if(!a$4(_u[Tu],$u[Tu]))return!1;return!0}function g$5(_u,$u){const Tu=Object.getOwnPropertyNames(_u),Cu=Object.getOwnPropertyNames($u);if(Tu.length!==Cu.length)return!1;for(let Pu=0,Bu=Tu.length;Pu<Bu;Pu++){const Lu=Tu[Pu];if(!a$4(_u[Lu],$u[Lu]))return!1}return!0}function b$4(_u,$u,Tu={deep:!1}){return Tu.deep?a$4(_u,$u):c$7(_u,$u)}function o$5(_u){return _u<.5?4*_u*_u*_u:.5*Math.pow(2*_u-2,3)+1}function r$5(_u){const $u=_u-1;return $u*$u*$u+1}function b$3(_u,{delay:$u=0,duration:Tu=400,easing:Cu=nt}={}){const Pu=+getComputedStyle(_u).opacity;return{delay:$u,duration:Tu,easing:Cu,css:Bu=>`opacity: ${Bu*Pu}`}}function h$4(_u,{delay:$u=0,duration:Tu=400,easing:Cu=r$5,x:Pu=0,y:Bu=0,opacity:Lu=0}={}){const Ru=getComputedStyle(_u),Ou=+Ru.opacity,Du=Ru.transform==="none"?"":Ru.transform,Fu=Ou*(1-Lu);return{delay:$u,duration:Tu,easing:Cu,css:(Vu,ku)=>`
			transform: ${Du} translate(${(1-Vu)*Pu}px, ${(1-Vu)*Bu}px);
			opacity: ${Ou-Fu*ku}`}}function k$3(_u,{delay:$u=0,speed:Tu,duration:Cu,easing:Pu=o$5}={}){let Bu=_u.getTotalLength();const Lu=getComputedStyle(_u);return Lu.strokeLinecap!=="butt"&&(Bu+=parseInt(Lu.strokeWidth)),Cu===void 0?Tu===void 0?Cu=800:Cu=Bu/Tu:typeof Cu=="function"&&(Cu=Cu(Bu)),{delay:$u,duration:Cu,easing:Pu,css:(Ru,Ou)=>`stroke-dasharray: ${Ru*Bu} ${Ou*Bu}`}}const s$5=[];function h$3(_u,$u=E$a){let Tu;const Cu=new Set;function Pu(Ru){if(Dt(_u,Ru)&&(_u=Ru,Tu)){const Ou=!s$5.length;for(const Du of Cu)Du[1](),s$5.push(Du,_u);if(Ou){for(let Du=0;Du<s$5.length;Du+=2)s$5[Du][0](s$5[Du+1]);s$5.length=0}}}function Bu(Ru){Pu(Ru(_u))}function Lu(Ru,Ou=E$a){const Du=[Ru,Ou];return Cu.add(Du),Cu.size===1&&(Tu=$u(Pu)||E$a),Ru(_u),()=>{Cu.delete(Du),Cu.size===0&&(Tu(),Tu=null)}}return{set:Pu,update:Bu,subscribe:Lu}}var i$8=Object.defineProperty,a$3=(_u,$u,Tu)=>$u in _u?i$8(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,s$4=(_u,$u,Tu)=>(a$3(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class x$6{constructor($u,Tu){s$4(this,"five"),s$4(this,"hooks",new E$d),s$4(this,"staticPrefix","//vrlab-static.ljcdn.com"),this.five=$u,Tu!=null&&Tu.staticPrefix&&(this.staticPrefix=Tu.staticPrefix)}getCurrentState(){return this.state}}class e$2 extends x$6{}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l$3=void 0,aa=mod;function r$4(_u,$u){var Tu=_u.split("."),Cu=aa;!(Tu[0]in Cu)&&Cu.execScript&&Cu.execScript("var "+Tu[0]);for(var Pu;Tu.length&&(Pu=Tu.shift());)!Tu.length&&$u!==l$3?Cu[Pu]=$u:Cu=Cu[Pu]?Cu[Pu]:Cu[Pu]={}}var t$2=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v$3(_u){var $u=_u.length,Tu=0,Cu=Number.POSITIVE_INFINITY,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu;for(Vu=0;Vu<$u;++Vu)_u[Vu]>Tu&&(Tu=_u[Vu]),_u[Vu]<Cu&&(Cu=_u[Vu]);for(Pu=1<<Tu,Bu=new(t$2?Uint32Array:Array)(Pu),Lu=1,Ru=0,Ou=2;Lu<=Tu;){for(Vu=0;Vu<$u;++Vu)if(_u[Vu]===Lu){for(Du=0,Fu=Ru,ku=0;ku<Lu;++ku)Du=Du<<1|Fu&1,Fu>>=1;for(Nu=Lu<<16|Vu,ku=Du;ku<Pu;ku+=Ou)Bu[ku]=Nu;++Ru}++Lu,Ru<<=1,Ou<<=1}return[Bu,Tu,Cu]}function w$5(_u,$u){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t$2?new Uint8Array(_u):_u,this.m=!1,this.i=y$4,this.r=!1,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.bufferSize&&(this.h=$u.bufferSize),$u.bufferType&&(this.i=$u.bufferType),$u.resize&&(this.r=$u.resize)),this.i){case A$6:this.b=32768,this.c=new(t$2?Uint8Array:Array)(32768+this.h+258);break;case y$4:this.b=0,this.c=new(t$2?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A$6=0,y$4=1,B$7={t:A$6,s:y$4};w$5.prototype.k=function(){for(;!this.m;){var _u=C$3(this,3);switch(_u&1&&(this.m=!0),_u>>>=1,_u){case 0:var $u=this.input,Tu=this.a,Cu=this.c,Pu=this.b,Bu=$u.length,Lu=l$3,Ru=l$3,Ou=Cu.length,Du=l$3;if(this.d=this.f=0,Tu+1>=Bu)throw Error("invalid uncompressed block header: LEN");if(Lu=$u[Tu++]|$u[Tu++]<<8,Tu+1>=Bu)throw Error("invalid uncompressed block header: NLEN");if(Ru=$u[Tu++]|$u[Tu++]<<8,Lu===~Ru)throw Error("invalid uncompressed block header: length verify");if(Tu+Lu>$u.length)throw Error("input buffer is broken");switch(this.i){case A$6:for(;Pu+Lu>Cu.length;){if(Du=Ou-Pu,Lu-=Du,t$2)Cu.set($u.subarray(Tu,Tu+Du),Pu),Pu+=Du,Tu+=Du;else for(;Du--;)Cu[Pu++]=$u[Tu++];this.b=Pu,Cu=this.e(),Pu=this.b}break;case y$4:for(;Pu+Lu>Cu.length;)Cu=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t$2)Cu.set($u.subarray(Tu,Tu+Lu),Pu),Pu+=Lu,Tu+=Lu;else for(;Lu--;)Cu[Pu++]=$u[Tu++];this.a=Tu,this.b=Pu,this.c=Cu;break;case 1:this.j(ba,ca);break;case 2:for(var Fu=C$3(this,5)+257,Vu=C$3(this,5)+1,ku=C$3(this,4)+4,Nu=new(t$2?Uint8Array:Array)(D$3.length),Gu=l$3,ju=l$3,Hu=l$3,Uu=l$3,zu=l$3,Wu=l$3,Qu=l$3,Yu=l$3,Ku=l$3,Yu=0;Yu<ku;++Yu)Nu[D$3[Yu]]=C$3(this,3);if(!t$2)for(Yu=ku,ku=Nu.length;Yu<ku;++Yu)Nu[D$3[Yu]]=0;for(Gu=v$3(Nu),Uu=new(t$2?Uint8Array:Array)(Fu+Vu),Yu=0,Ku=Fu+Vu;Yu<Ku;)switch(zu=E$9(this,Gu),zu){case 16:for(Qu=3+C$3(this,2);Qu--;)Uu[Yu++]=Wu;break;case 17:for(Qu=3+C$3(this,3);Qu--;)Uu[Yu++]=0;Wu=0;break;case 18:for(Qu=11+C$3(this,7);Qu--;)Uu[Yu++]=0;Wu=0;break;default:Wu=Uu[Yu++]=zu}ju=v$3(t$2?Uu.subarray(0,Fu):Uu.slice(0,Fu)),Hu=v$3(t$2?Uu.subarray(Fu):Uu.slice(Fu)),this.j(ju,Hu);break;default:throw Error("unknown BTYPE: "+_u)}}return this.n()};var G$4=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D$3=t$2?new Uint16Array(G$4):G$4,H$3=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I$7=t$2?new Uint16Array(H$3):H$3,J$5=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K$6=t$2?new Uint8Array(J$5):J$5,L$7=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t$2?new Uint16Array(L$7):L$7,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N$2=t$2?new Uint8Array(ea):ea,O$8=new(t$2?Uint8Array:Array)(288),P$a,fa;P$a=0;for(fa=O$8.length;P$a<fa;++P$a)O$8[P$a]=143>=P$a?8:255>=P$a?9:279>=P$a?7:8;var ba=v$3(O$8),Q$3=new(t$2?Uint8Array:Array)(30),R$7,ga;R$7=0;for(ga=Q$3.length;R$7<ga;++R$7)Q$3[R$7]=5;var ca=v$3(Q$3);function C$3(_u,$u){for(var Tu=_u.f,Cu=_u.d,Pu=_u.input,Bu=_u.a,Lu=Pu.length,Ru;Cu<$u;){if(Bu>=Lu)throw Error("input buffer is broken");Tu|=Pu[Bu++]<<Cu,Cu+=8}return Ru=Tu&(1<<$u)-1,_u.f=Tu>>>$u,_u.d=Cu-$u,_u.a=Bu,Ru}function E$9(_u,$u){for(var Tu=_u.f,Cu=_u.d,Pu=_u.input,Bu=_u.a,Lu=Pu.length,Ru=$u[0],Ou=$u[1],Du,Fu;Cu<Ou&&!(Bu>=Lu);)Tu|=Pu[Bu++]<<Cu,Cu+=8;if(Du=Ru[Tu&(1<<Ou)-1],Fu=Du>>>16,Fu>Cu)throw Error("invalid code length: "+Fu);return _u.f=Tu>>Fu,_u.d=Cu-Fu,_u.a=Bu,Du&65535}w$5.prototype.j=function(_u,$u){var Tu=this.c,Cu=this.b;this.o=_u;for(var Pu=Tu.length-258,Bu,Lu,Ru,Ou;(Bu=E$9(this,_u))!==256;)if(256>Bu)Cu>=Pu&&(this.b=Cu,Tu=this.e(),Cu=this.b),Tu[Cu++]=Bu;else for(Lu=Bu-257,Ou=I$7[Lu],0<K$6[Lu]&&(Ou+=C$3(this,K$6[Lu])),Bu=E$9(this,$u),Ru=da[Bu],0<N$2[Bu]&&(Ru+=C$3(this,N$2[Bu])),Cu>=Pu&&(this.b=Cu,Tu=this.e(),Cu=this.b);Ou--;)Tu[Cu]=Tu[Cu++-Ru];for(;8<=this.d;)this.d-=8,this.a--;this.b=Cu};w$5.prototype.w=function(_u,$u){var Tu=this.c,Cu=this.b;this.o=_u;for(var Pu=Tu.length,Bu,Lu,Ru,Ou;(Bu=E$9(this,_u))!==256;)if(256>Bu)Cu>=Pu&&(Tu=this.e(),Pu=Tu.length),Tu[Cu++]=Bu;else for(Lu=Bu-257,Ou=I$7[Lu],0<K$6[Lu]&&(Ou+=C$3(this,K$6[Lu])),Bu=E$9(this,$u),Ru=da[Bu],0<N$2[Bu]&&(Ru+=C$3(this,N$2[Bu])),Cu+Ou>Pu&&(Tu=this.e(),Pu=Tu.length);Ou--;)Tu[Cu]=Tu[Cu++-Ru];for(;8<=this.d;)this.d-=8,this.a--;this.b=Cu};w$5.prototype.e=function(){var _u=new(t$2?Uint8Array:Array)(this.b-32768),$u=this.b-32768,Tu,Cu,Pu=this.c;if(t$2)_u.set(Pu.subarray(32768,_u.length));else for(Tu=0,Cu=_u.length;Tu<Cu;++Tu)_u[Tu]=Pu[Tu+32768];if(this.g.push(_u),this.l+=_u.length,t$2)Pu.set(Pu.subarray($u,$u+32768));else for(Tu=0;32768>Tu;++Tu)Pu[Tu]=Pu[$u+Tu];return this.b=32768,Pu};w$5.prototype.z=function(_u){var $u,Tu=this.input.length/this.a+1|0,Cu,Pu,Bu,Lu=this.input,Ru=this.c;return _u&&(typeof _u.p=="number"&&(Tu=_u.p),typeof _u.u=="number"&&(Tu+=_u.u)),2>Tu?(Cu=(Lu.length-this.a)/this.o[2],Bu=258*(Cu/2)|0,Pu=Bu<Ru.length?Ru.length+Bu:Ru.length<<1):Pu=Ru.length*Tu,t$2?($u=new Uint8Array(Pu),$u.set(Ru)):$u=Ru,this.c=$u};w$5.prototype.n=function(){var _u=0,$u=this.c,Tu=this.g,Cu,Pu=new(t$2?Uint8Array:Array)(this.l+(this.b-32768)),Bu,Lu,Ru,Ou;if(Tu.length===0)return t$2?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Bu=0,Lu=Tu.length;Bu<Lu;++Bu)for(Cu=Tu[Bu],Ru=0,Ou=Cu.length;Ru<Ou;++Ru)Pu[_u++]=Cu[Ru];for(Bu=32768,Lu=this.b;Bu<Lu;++Bu)Pu[_u++]=$u[Bu];return this.g=[],this.buffer=Pu};w$5.prototype.v=function(){var _u,$u=this.b;return t$2?this.r?(_u=new Uint8Array($u),_u.set(this.c.subarray(0,$u))):_u=this.c.subarray(0,$u):(this.c.length>$u&&(this.c.length=$u),_u=this.c),this.buffer=_u};function W$2(_u,$u){var Tu,Cu;switch(this.input=_u,this.a=0,($u||!($u={}))&&($u.index&&(this.a=$u.index),$u.verify&&(this.A=$u.verify)),Tu=_u[this.a++],Cu=_u[this.a++],Tu&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Tu<<8)+Cu)%31!==0)throw Error("invalid fcheck flag:"+((Tu<<8)+Cu)%31);if(Cu&32)throw Error("fdict flag is not supported");this.q=new w$5(_u,{index:this.a,bufferSize:$u.bufferSize,bufferType:$u.bufferType,resize:$u.resize})}W$2.prototype.k=function(){var _u=this.input,$u,Tu;if($u=this.q.k(),this.a=this.q.a,this.A){Tu=(_u[this.a++]<<24|_u[this.a++]<<16|_u[this.a++]<<8|_u[this.a++])>>>0;var Cu=$u;if(typeof Cu=="string"){var Pu=Cu.split(""),Bu,Lu;for(Bu=0,Lu=Pu.length;Bu<Lu;Bu++)Pu[Bu]=(Pu[Bu].charCodeAt(0)&255)>>>0;Cu=Pu}for(var Ru=1,Ou=0,Du=Cu.length,Fu,Vu=0;0<Du;){Fu=1024<Du?1024:Du,Du-=Fu;do Ru+=Cu[Vu++],Ou+=Ru;while(--Fu);Ru%=65521,Ou%=65521}if(Tu!==(Ou<<16|Ru)>>>0)throw Error("invalid adler-32 checksum")}return $u};var ha=8;r$4("Zlib.Inflate",W$2);r$4("Zlib.Inflate.prototype.decompress",W$2.prototype.k);var X$4={ADAPTIVE:B$7.s,BLOCK:B$7.t},Y$2,Z$1,$$5,ia;if(Object.keys)Y$2=Object.keys(X$4);else for(Z$1 in Y$2=[],$$5=0,X$4)Y$2[$$5++]=Z$1;$$5=0;for(ia=Y$2.length;$$5<ia;++$$5)Z$1=Y$2[$$5],r$4("Zlib.Inflate.BufferType."+Z$1,X$4[Z$1]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(_u,$u,Tu){var Cu=Tu.length-_u-1;if($u>=Tu[Cu])return Cu-1;if($u<=Tu[_u])return _u;for(var Pu=_u,Bu=Cu,Lu=Math.floor((Pu+Bu)/2);$u<Tu[Lu]||$u>=Tu[Lu+1];)$u<Tu[Lu]?Bu=Lu:Pu=Lu,Lu=Math.floor((Pu+Bu)/2);return Lu},calcBasisFunctions:function(_u,$u,Tu,Cu){var Pu=[],Bu=[],Lu=[];Pu[0]=1;for(var Ru=1;Ru<=Tu;++Ru){Bu[Ru]=$u-Cu[_u+1-Ru],Lu[Ru]=Cu[_u+Ru]-$u;for(var Ou=0,Du=0;Du<Ru;++Du){var Fu=Lu[Du+1],Vu=Bu[Ru-Du],ku=Pu[Du]/(Fu+Vu);Pu[Du]=Ou+Fu*ku,Ou=Vu*ku}Pu[Ru]=Ou}return Pu},calcBSplinePoint:function(_u,$u,Tu,Cu){for(var Pu=this.findSpan(_u,Cu,$u),Bu=this.calcBasisFunctions(Pu,Cu,_u,$u),Lu=new Vector4(0,0,0,0),Ru=0;Ru<=_u;++Ru){var Ou=Tu[Pu-_u+Ru],Du=Bu[Ru],Fu=Ou.w*Du;Lu.x+=Ou.x*Fu,Lu.y+=Ou.y*Fu,Lu.z+=Ou.z*Fu,Lu.w+=Ou.w*Du}return Lu},calcBasisFunctionDerivatives:function(_u,$u,Tu,Cu,Pu){for(var Bu=[],Lu=0;Lu<=Tu;++Lu)Bu[Lu]=0;for(var Ru=[],Lu=0;Lu<=Cu;++Lu)Ru[Lu]=Bu.slice(0);for(var Ou=[],Lu=0;Lu<=Tu;++Lu)Ou[Lu]=Bu.slice(0);Ou[0][0]=1;for(var Du=Bu.slice(0),Fu=Bu.slice(0),Vu=1;Vu<=Tu;++Vu){Du[Vu]=$u-Pu[_u+1-Vu],Fu[Vu]=Pu[_u+Vu]-$u;for(var ku=0,_f=0;_f<Vu;++_f){var Nu=Fu[_f+1],Gu=Du[Vu-_f];Ou[Vu][_f]=Nu+Gu;var ju=Ou[_f][Vu-1]/Ou[Vu][_f];Ou[_f][Vu]=ku+Nu*ju,ku=Gu*ju}Ou[Vu][Vu]=ku}for(var Vu=0;Vu<=Tu;++Vu)Ru[0][Vu]=Ou[Vu][Tu];for(var _f=0;_f<=Tu;++_f){for(var Hu=0,Uu=1,zu=[],Lu=0;Lu<=Tu;++Lu)zu[Lu]=Bu.slice(0);zu[0][0]=1;for(var Wu=1;Wu<=Cu;++Wu){var Qu=0,Ku=_f-Wu,Yu=Tu-Wu;_f>=Wu&&(zu[Uu][0]=zu[Hu][0]/Ou[Yu+1][Ku],Qu=zu[Uu][0]*Ou[Ku][Yu]);for(var Xc=Ku>=-1?1:-Ku,_d=_f-1<=Yu?Wu-1:Tu-_f,Vu=Xc;Vu<=_d;++Vu)zu[Uu][Vu]=(zu[Hu][Vu]-zu[Hu][Vu-1])/Ou[Yu+1][Ku+Vu],Qu+=zu[Uu][Vu]*Ou[Ku+Vu][Yu];_f<=Yu&&(zu[Uu][Wu]=-zu[Hu][Wu-1]/Ou[Yu+1][_f],Qu+=zu[Uu][Wu]*Ou[_f][Yu]),Ru[Wu][_f]=Qu;var Vu=Hu;Hu=Uu,Uu=Vu}}for(var _f=Tu,Wu=1;Wu<=Cu;++Wu){for(var Vu=0;Vu<=Tu;++Vu)Ru[Wu][Vu]*=_f;_f*=Tu-Wu}return Ru},calcBSplineDerivatives:function(_u,$u,Tu,Cu,Pu){for(var Bu=Pu<_u?Pu:_u,Lu=[],Ru=this.findSpan(_u,Cu,$u),Ou=this.calcBasisFunctionDerivatives(Ru,Cu,_u,Bu,$u),Du=[],Fu=0;Fu<Tu.length;++Fu){var Vu=Tu[Fu].clone(),ku=Vu.w;Vu.x*=ku,Vu.y*=ku,Vu.z*=ku,Du[Fu]=Vu}for(var Nu=0;Nu<=Bu;++Nu){for(var Vu=Du[Ru-_u].clone().multiplyScalar(Ou[Nu][0]),Gu=1;Gu<=_u;++Gu)Vu.add(Du[Ru-_u+Gu].clone().multiplyScalar(Ou[Nu][Gu]));Lu[Nu]=Vu}for(var Nu=Bu+1;Nu<=Pu+1;++Nu)Lu[Nu]=new Vector4(0,0,0);return Lu},calcKoverI:function(_u,$u){for(var Tu=1,Cu=2;Cu<=_u;++Cu)Tu*=Cu;for(var Pu=1,Cu=2;Cu<=$u;++Cu)Pu*=Cu;for(var Cu=2;Cu<=_u-$u;++Cu)Pu*=Cu;return Tu/Pu},calcRationalCurveDerivatives:function(_u){for(var $u=_u.length,Tu=[],Cu=[],Pu=0;Pu<$u;++Pu){var Bu=_u[Pu];Tu[Pu]=new Vector3(Bu.x,Bu.y,Bu.z),Cu[Pu]=Bu.w}for(var Lu=[],Ru=0;Ru<$u;++Ru){for(var Ou=Tu[Ru].clone(),Pu=1;Pu<=Ru;++Pu)Ou.sub(Lu[Ru-Pu].clone().multiplyScalar(this.calcKoverI(Ru,Pu)*Cu[Pu]));Lu[Ru]=Ou.divideScalar(Cu[0])}return Lu},calcNURBSDerivatives:function(_u,$u,Tu,Cu,Pu){var Bu=this.calcBSplineDerivatives(_u,$u,Tu,Cu,Pu);return this.calcRationalCurveDerivatives(Bu)},calcSurfacePoint:function(_u,$u,Tu,Cu,Pu,Bu,Lu,Ru){for(var Ou=this.findSpan(_u,Bu,Tu),Du=this.findSpan($u,Lu,Cu),Fu=this.calcBasisFunctions(Ou,Bu,_u,Tu),Vu=this.calcBasisFunctions(Du,Lu,$u,Cu),ku=[],Nu=0;Nu<=$u;++Nu){ku[Nu]=new Vector4(0,0,0,0);for(var Gu=0;Gu<=_u;++Gu){var ju=Pu[Ou-_u+Gu][Du-$u+Nu].clone(),Hu=ju.w;ju.x*=Hu,ju.y*=Hu,ju.z*=Hu,ku[Nu].add(ju.multiplyScalar(Fu[Gu]))}}for(var Uu=new Vector4(0,0,0,0),Nu=0;Nu<=$u;++Nu)Uu.add(ku[Nu].multiplyScalar(Vu[Nu]));Uu.divideScalar(Uu.w),Ru.set(Uu.x,Uu.y,Uu.z)}},NURBSCurve=function(_u,$u,Tu,Cu,Pu){Curve.call(this),this.degree=_u,this.knots=$u,this.controlPoints=[],this.startKnot=Cu||0,this.endKnot=Pu||this.knots.length-1;for(var Bu=0;Bu<Tu.length;++Bu){var Lu=Tu[Bu];this.controlPoints[Bu]=new Vector4(Lu.x,Lu.y,Lu.z,Lu.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(_u,$u){var Tu=$u||new Vector3,Cu=this.knots[this.startKnot]+_u*(this.knots[this.endKnot]-this.knots[this.startKnot]),Pu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Cu);return Pu.w!=1&&Pu.divideScalar(Pu.w),Tu.set(Pu.x,Pu.y,Pu.z)};NURBSCurve.prototype.getTangent=function(_u,$u){var Tu=$u||new Vector3,Cu=this.knots[0]+_u*(this.knots[this.knots.length-1]-this.knots[0]),Pu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Cu,1);return Tu.copy(Pu[1]).normalize(),Tu};(function(){var _u,$u,Tu;function Cu(qu){Loader.call(this,qu)}Cu.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Cu,load:function(qu,Xu,Zu,_c){var Ju=this,_h=Ju.path===""?LoaderUtils.extractUrlBase(qu):Ju.path,ep=new FileLoader(this.manager);ep.setPath(Ju.path),ep.setResponseType("arraybuffer"),ep.load(qu,function(tp){try{Xu(Ju.parse(tp,_h))}catch(rp){_c?_c(rp):console.error(rp),Ju.manager.itemError(qu)}},Zu,_c)},parse:function(qu,Xu){if(Vu(qu))_u=new Ou().parse(qu);else{var Zu=Yu(qu);if(!ku(Zu))throw new Error("THREE.FBXLoader: Unknown format.");if(Nu(Zu)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Nu(Zu));_u=new Ru().parse(Zu)}var _c=new TextureLoader(this.manager).setPath(this.resourcePath||Xu).setCrossOrigin(this.crossOrigin);return new Pu(_c,this.manager).parse(_u)}});function Pu(qu,Xu){this.textureLoader=qu,this.manager=Xu}Pu.prototype={constructor:Pu,parse:function(){$u=this.parseConnections();var qu=this.parseImages(),Xu=this.parseTextures(qu),Zu=this.parseMaterials(Xu),_c=this.parseDeformers(),Ju=new Bu().parse(_c);return this.parseScene(_c,Ju,Zu),Tu},parseConnections:function(){var qu=new Map;if("Connections"in _u){var Xu=_u.Connections.connections;Xu.forEach(function(Zu){var _c=Zu[0],Ju=Zu[1],_h=Zu[2];qu.has(_c)||qu.set(_c,{parents:[],children:[]});var ep={ID:Ju,relationship:_h};qu.get(_c).parents.push(ep),qu.has(Ju)||qu.set(Ju,{parents:[],children:[]});var tp={ID:_c,relationship:_h};qu.get(Ju).children.push(tp)})}return qu},parseImages:function(){var qu={},Xu={};if("Video"in _u.Objects){var Zu=_u.Objects.Video;for(var _c in Zu){var Ju=Zu[_c],_h=parseInt(_c);if(qu[_h]=Ju.RelativeFilename||Ju.Filename,"Content"in Ju){var ep=Ju.Content instanceof ArrayBuffer&&Ju.Content.byteLength>0,tp=typeof Ju.Content=="string"&&Ju.Content!=="";if(ep||tp){var rp=this.parseImage(Zu[_c]);Xu[Ju.RelativeFilename||Ju.Filename]=rp}}}}for(var _h in qu){var dp=qu[_h];Xu[dp]!==void 0?qu[_h]=Xu[dp]:qu[_h]=qu[_h].split("\\").pop()}return qu},parseImage:function(qu){var Xu=qu.Content,Zu=qu.RelativeFilename||qu.Filename,_c=Zu.slice(Zu.lastIndexOf(".")+1).toLowerCase(),Ju;switch(_c){case"bmp":Ju="image/bmp";break;case"jpg":case"jpeg":Ju="image/jpeg";break;case"png":Ju="image/png";break;case"tif":Ju="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",Zu),Ju="image/tga";break;default:console.warn('FBXLoader: Image type "'+_c+'" is not supported.');return}if(typeof Xu=="string")return"data:"+Ju+";base64,"+Xu;var _h=new Uint8Array(Xu);return window.URL.createObjectURL(new Blob([_h],{type:Ju}))},parseTextures:function(qu){var Xu=new Map;if("Texture"in _u.Objects){var Zu=_u.Objects.Texture;for(var _c in Zu){var Ju=this.parseTexture(Zu[_c],qu);Xu.set(parseInt(_c),Ju)}}return Xu},parseTexture:function(qu,Xu){var Zu=this.loadTexture(qu,Xu);Zu.ID=qu.id,Zu.name=qu.attrName;var _c=qu.WrapModeU,Ju=qu.WrapModeV,_h=_c!==void 0?_c.value:0,ep=Ju!==void 0?Ju.value:0;if(Zu.wrapS=_h===0?RepeatWrapping:ClampToEdgeWrapping,Zu.wrapT=ep===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in qu){var tp=qu.Scaling.value;Zu.repeat.x=tp[0],Zu.repeat.y=tp[1]}return Zu},loadTexture:function(qu,Xu){var Zu,_c=this.textureLoader.path,Ju=$u.get(qu.id).children;Ju!==void 0&&Ju.length>0&&Xu[Ju[0].ID]!==void 0&&(Zu=Xu[Ju[0].ID],(Zu.indexOf("blob:")===0||Zu.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var _h,ep=qu.FileName.slice(-3).toLowerCase();if(ep==="tga"){var tp=this.manager.getHandler(".tga");tp===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",qu.RelativeFilename),_h=new Texture):_h=tp.load(Zu)}else ep==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",qu.RelativeFilename),_h=new Texture):_h=this.textureLoader.load(Zu);return this.textureLoader.setPath(_c),_h},parseMaterials:function(qu){var Xu=new Map;if("Material"in _u.Objects){var Zu=_u.Objects.Material;for(var _c in Zu){var Ju=this.parseMaterial(Zu[_c],qu);Ju!==null&&Xu.set(parseInt(_c),Ju)}}return Xu},parseMaterial:function(qu,Xu){var Zu=qu.id,_c=qu.attrName,Ju=qu.ShadingModel;if(typeof Ju=="object"&&(Ju=Ju.value),!$u.has(Zu))return null;var _h=this.parseParameters(qu,Xu,Zu),ep;switch(Ju.toLowerCase()){case"phong":ep=new MeshPhongMaterial;break;case"lambert":ep=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',Ju),ep=new MeshPhongMaterial;break}return ep.setValues(_h),ep.name=_c,ep},parseParameters:function(qu,Xu,Zu){var _c={};qu.BumpFactor&&(_c.bumpScale=qu.BumpFactor.value),qu.Diffuse?_c.color=new Color().fromArray(qu.Diffuse.value):qu.DiffuseColor&&qu.DiffuseColor.type==="Color"&&(_c.color=new Color().fromArray(qu.DiffuseColor.value)),qu.DisplacementFactor&&(_c.displacementScale=qu.DisplacementFactor.value),qu.Emissive?_c.emissive=new Color().fromArray(qu.Emissive.value):qu.EmissiveColor&&qu.EmissiveColor.type==="Color"&&(_c.emissive=new Color().fromArray(qu.EmissiveColor.value)),qu.EmissiveFactor&&(_c.emissiveIntensity=parseFloat(qu.EmissiveFactor.value)),qu.Opacity&&(_c.opacity=parseFloat(qu.Opacity.value)),_c.opacity<1&&(_c.transparent=!0),qu.ReflectionFactor&&(_c.reflectivity=qu.ReflectionFactor.value),qu.Shininess&&(_c.shininess=qu.Shininess.value),qu.Specular?_c.specular=new Color().fromArray(qu.Specular.value):qu.SpecularColor&&qu.SpecularColor.type==="Color"&&(_c.specular=new Color().fromArray(qu.SpecularColor.value));var Ju=this;return $u.get(Zu).children.forEach(function(_h){var ep=_h.relationship;switch(ep){case"Bump":_c.bumpMap=Ju.getTexture(Xu,_h.ID);break;case"Maya|TEX_ao_map":_c.aoMap=Ju.getTexture(Xu,_h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":_c.map=Ju.getTexture(Xu,_h.ID),_c.map.encoding=sRGBEncoding;break;case"DisplacementColor":_c.displacementMap=Ju.getTexture(Xu,_h.ID);break;case"EmissiveColor":_c.emissiveMap=Ju.getTexture(Xu,_h.ID),_c.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":_c.normalMap=Ju.getTexture(Xu,_h.ID);break;case"ReflectionColor":_c.envMap=Ju.getTexture(Xu,_h.ID),_c.envMap.mapping=EquirectangularReflectionMapping,_c.envMap.encoding=sRGBEncoding;break;case"SpecularColor":_c.specularMap=Ju.getTexture(Xu,_h.ID),_c.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":_c.alphaMap=Ju.getTexture(Xu,_h.ID),_c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",ep);break}}),_c},getTexture:function(qu,Xu){return"LayeredTexture"in _u.Objects&&Xu in _u.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Xu=$u.get(Xu).children[0].ID),qu.get(Xu)},parseDeformers:function(){var qu={},Xu={};if("Deformer"in _u.Objects){var Zu=_u.Objects.Deformer;for(var _c in Zu){var Ju=Zu[_c],_h=$u.get(parseInt(_c));if(Ju.attrType==="Skin"){var ep=this.parseSkeleton(_h,Zu);ep.ID=_c,_h.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),ep.geometryID=_h.parents[0].ID,qu[_c]=ep}else if(Ju.attrType==="BlendShape"){var tp={id:_c};tp.rawTargets=this.parseMorphTargets(_h,Zu),tp.id=_c,_h.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Xu[_c]=tp}}}return{skeletons:qu,morphTargets:Xu}},parseSkeleton:function(qu,Xu){var Zu=[];return qu.children.forEach(function(_c){var Ju=Xu[_c.ID];if(Ju.attrType==="Cluster"){var _h={ID:_c.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(Ju.TransformLink.a)};"Indexes"in Ju&&(_h.indices=Ju.Indexes.a,_h.weights=Ju.Weights.a),Zu.push(_h)}}),{rawBones:Zu,bones:[]}},parseMorphTargets:function(qu,Xu){for(var Zu=[],_c=0;_c<qu.children.length;_c++){var Ju=qu.children[_c],_h=Xu[Ju.ID],ep={name:_h.attrName,initialWeight:_h.DeformPercent,id:_h.id,fullWeights:_h.FullWeights.a};if(_h.attrType!=="BlendShapeChannel")return;ep.geoID=$u.get(parseInt(Ju.ID)).children.filter(function(tp){return tp.relationship===void 0})[0].ID,Zu.push(ep)}return Zu},parseScene:function(qu,Xu,Zu){Tu=new Group$1;var _c=this.parseModels(qu.skeletons,Xu,Zu),Ju=_u.Objects.Model,_h=this;_c.forEach(function(tp){var rp=Ju[tp.ID];_h.setLookAtProperties(tp,rp);var dp=$u.get(tp.ID).parents;dp.forEach(function(cp){var Sp=_c.get(cp.ID);Sp!==void 0&&Sp.add(tp)}),tp.parent===null&&Tu.add(tp)}),this.bindSkeleton(qu.skeletons,Xu,_c),this.createAmbientLight(),this.setupMorphMaterials(),Tu.traverse(function(tp){if(tp.userData.transformData){tp.parent&&(tp.userData.transformData.parentMatrixWorld=tp.parent.matrix);var rp=Wu(tp.userData.transformData);tp.applyMatrix4(rp)}});var ep=new Lu().parse();Tu.children.length===1&&Tu.children[0].isGroup&&(Tu.children[0].animations=ep,Tu=Tu.children[0]),Tu.animations=ep},parseModels:function(qu,Xu,Zu){var _c=new Map,Ju=_u.Objects.Model;for(var _h in Ju){var ep=parseInt(_h),tp=Ju[_h],rp=$u.get(ep),dp=this.buildSkeleton(rp,qu,ep,tp.attrName);if(!dp){switch(tp.attrType){case"Camera":dp=this.createCamera(rp);break;case"Light":dp=this.createLight(rp);break;case"Mesh":dp=this.createMesh(rp,Xu,Zu);break;case"NurbsCurve":dp=this.createCurve(rp,Xu);break;case"LimbNode":case"Root":dp=new Bone;break;case"Null":default:dp=new Group$1;break}dp.name=tp.attrName?PropertyBinding.sanitizeNodeName(tp.attrName):"",dp.ID=ep}this.getTransformData(dp,tp),_c.set(ep,dp)}return _c},buildSkeleton:function(qu,Xu,Zu,_c){var Ju=null;return qu.parents.forEach(function(_h){for(var ep in Xu){var tp=Xu[ep];tp.rawBones.forEach(function(rp,dp){if(rp.ID===_h.ID){var cp=Ju;Ju=new Bone,Ju.matrixWorld.copy(rp.transformLink),Ju.name=_c?PropertyBinding.sanitizeNodeName(_c):"",Ju.ID=Zu,tp.bones[dp]=Ju,cp!==null&&Ju.add(cp)}})}}),Ju},createCamera:function(qu){var Xu,Zu;if(qu.children.forEach(function(Sp){var yp=_u.Objects.NodeAttribute[Sp.ID];yp!==void 0&&(Zu=yp)}),Zu===void 0)Xu=new Object3D;else{var _c=0;Zu.CameraProjectionType!==void 0&&Zu.CameraProjectionType.value===1&&(_c=1);var Ju=1;Zu.NearPlane!==void 0&&(Ju=Zu.NearPlane.value/1e3);var _h=1e3;Zu.FarPlane!==void 0&&(_h=Zu.FarPlane.value/1e3);var ep=window.innerWidth,tp=window.innerHeight;Zu.AspectWidth!==void 0&&Zu.AspectHeight!==void 0&&(ep=Zu.AspectWidth.value,tp=Zu.AspectHeight.value);var rp=ep/tp,dp=45;Zu.FieldOfView!==void 0&&(dp=Zu.FieldOfView.value);var cp=Zu.FocalLength?Zu.FocalLength.value:null;switch(_c){case 0:Xu=new PerspectiveCamera(dp,rp,Ju,_h),cp!==null&&Xu.setFocalLength(cp);break;case 1:Xu=new OrthographicCamera(-ep/2,ep/2,tp/2,-tp/2,Ju,_h);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+_c+"."),Xu=new Object3D;break}}return Xu},createLight:function(qu){var Xu,Zu;if(qu.children.forEach(function(cp){var Sp=_u.Objects.NodeAttribute[cp.ID];Sp!==void 0&&(Zu=Sp)}),Zu===void 0)Xu=new Object3D;else{var _c;Zu.LightType===void 0?_c=0:_c=Zu.LightType.value;var Ju=16777215;Zu.Color!==void 0&&(Ju=new Color().fromArray(Zu.Color.value));var _h=Zu.Intensity===void 0?1:Zu.Intensity.value/100;Zu.CastLightOnObject!==void 0&&Zu.CastLightOnObject.value===0&&(_h=0);var ep=0;Zu.FarAttenuationEnd!==void 0&&(Zu.EnableFarAttenuation!==void 0&&Zu.EnableFarAttenuation.value===0?ep=0:ep=Zu.FarAttenuationEnd.value);var tp=1;switch(_c){case 0:Xu=new PointLight(Ju,_h,ep,tp);break;case 1:Xu=new DirectionalLight(Ju,_h);break;case 2:var rp=Math.PI/3;Zu.InnerAngle!==void 0&&(rp=MathUtils.degToRad(Zu.InnerAngle.value));var dp=0;Zu.OuterAngle!==void 0&&(dp=MathUtils.degToRad(Zu.OuterAngle.value),dp=Math.max(dp,1)),Xu=new SpotLight(Ju,_h,ep,rp,dp,tp);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Zu.LightType.value+", defaulting to a PointLight."),Xu=new PointLight(Ju,_h);break}Zu.CastShadows!==void 0&&Zu.CastShadows.value===1&&(Xu.castShadow=!0)}return Xu},createMesh:function(qu,Xu,Zu){var _c,Ju=null,_h=null,ep=[];return qu.children.forEach(function(tp){Xu.has(tp.ID)&&(Ju=Xu.get(tp.ID)),Zu.has(tp.ID)&&ep.push(Zu.get(tp.ID))}),ep.length>1?_h=ep:ep.length>0?_h=ep[0]:(_h=new MeshPhongMaterial({color:13421772}),ep.push(_h)),"color"in Ju.attributes&&ep.forEach(function(tp){tp.vertexColors=!0}),Ju.FBX_Deformer?(ep.forEach(function(tp){tp.skinning=!0}),_c=new SkinnedMesh(Ju,_h),_c.normalizeSkinWeights()):_c=new Mesh(Ju,_h),_c},createCurve:function(qu,Xu){var Zu=qu.children.reduce(function(Ju,_h){return Xu.has(_h.ID)&&(Ju=Xu.get(_h.ID)),Ju},null),_c=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(Zu,_c)},getTransformData:function(qu,Xu){var Zu={};"InheritType"in Xu&&(Zu.inheritType=parseInt(Xu.InheritType.value)),"RotationOrder"in Xu?Zu.eulerOrder=Qu(Xu.RotationOrder.value):Zu.eulerOrder="ZYX","Lcl_Translation"in Xu&&(Zu.translation=Xu.Lcl_Translation.value),"PreRotation"in Xu&&(Zu.preRotation=Xu.PreRotation.value),"Lcl_Rotation"in Xu&&(Zu.rotation=Xu.Lcl_Rotation.value),"PostRotation"in Xu&&(Zu.postRotation=Xu.PostRotation.value),"Lcl_Scaling"in Xu&&(Zu.scale=Xu.Lcl_Scaling.value),"ScalingOffset"in Xu&&(Zu.scalingOffset=Xu.ScalingOffset.value),"ScalingPivot"in Xu&&(Zu.scalingPivot=Xu.ScalingPivot.value),"RotationOffset"in Xu&&(Zu.rotationOffset=Xu.RotationOffset.value),"RotationPivot"in Xu&&(Zu.rotationPivot=Xu.RotationPivot.value),qu.userData.transformData=Zu},setLookAtProperties:function(qu,Xu){if("LookAtProperty"in Xu){var Zu=$u.get(qu.ID).children;Zu.forEach(function(_c){if(_c.relationship==="LookAtProperty"){var Ju=_u.Objects.Model[_c.ID];if("Lcl_Translation"in Ju){var _h=Ju.Lcl_Translation.value;qu.target!==void 0?(qu.target.position.fromArray(_h),Tu.add(qu.target)):qu.lookAt(new Vector3().fromArray(_h))}}})}},bindSkeleton:function(qu,Xu,Zu){var _c=this.parsePoseNodes();for(var Ju in qu){var _h=qu[Ju],ep=$u.get(parseInt(_h.ID)).parents;ep.forEach(function(tp){if(Xu.has(tp.ID)){var rp=tp.ID,dp=$u.get(rp);dp.parents.forEach(function(cp){if(Zu.has(cp.ID)){var Sp=Zu.get(cp.ID);Sp.bind(new Skeleton(_h.bones),_c[cp.ID])}})}})}},parsePoseNodes:function(){var qu={};if("Pose"in _u.Objects){var Xu=_u.Objects.Pose;for(var Zu in Xu)if(Xu[Zu].attrType==="BindPose"){var _c=Xu[Zu].PoseNode;Array.isArray(_c)?_c.forEach(function(Ju){qu[Ju.Node]=new Matrix4().fromArray(Ju.Matrix.a)}):qu[_c.Node]=new Matrix4().fromArray(_c.Matrix.a)}}return qu},createAmbientLight:function(){if("GlobalSettings"in _u&&"AmbientColor"in _u.GlobalSettings){var qu=_u.GlobalSettings.AmbientColor.value,Xu=qu[0],Zu=qu[1],_c=qu[2];if(Xu!==0||Zu!==0||_c!==0){var Ju=new Color(Xu,Zu,_c);Tu.add(new AmbientLight(Ju,1))}}},setupMorphMaterials:function(){var qu=this;Tu.traverse(function(Xu){Xu.isMesh&&Xu.geometry.morphAttributes.position&&Xu.geometry.morphAttributes.position.length&&(Array.isArray(Xu.material)?Xu.material.forEach(function(Zu,_c){qu.setupMorphMaterial(Xu,Zu,_c)}):qu.setupMorphMaterial(Xu,Xu.material))})},setupMorphMaterial:function(qu,Xu,Zu){var _c=qu.uuid,Ju=Xu.uuid,_h=!1;if(Tu.traverse(function(tp){tp.isMesh&&(Array.isArray(tp.material)?tp.material.forEach(function(rp){rp.uuid===Ju&&tp.uuid!==_c&&(_h=!0)}):tp.material.uuid===Ju&&tp.uuid!==_c&&(_h=!0))}),_h===!0){var ep=Xu.clone();ep.morphTargets=!0,Zu===void 0?qu.material=ep:qu.material[Zu]=ep}else Xu.morphTargets=!0}};function Bu(){}Bu.prototype={constructor:Bu,parse:function(qu){var Xu=new Map;if("Geometry"in _u.Objects){var Zu=_u.Objects.Geometry;for(var _c in Zu){var Ju=$u.get(parseInt(_c)),_h=this.parseGeometry(Ju,Zu[_c],qu);Xu.set(parseInt(_c),_h)}}return Xu},parseGeometry:function(qu,Xu,Zu){switch(Xu.attrType){case"Mesh":return this.parseMeshGeometry(qu,Xu,Zu);case"NurbsCurve":return this.parseNurbsGeometry(Xu)}},parseMeshGeometry:function(qu,Xu,Zu){var _c=Zu.skeletons,Ju=[],_h=qu.parents.map(function(cp){return _u.Objects.Model[cp.ID]});if(_h.length!==0){var ep=qu.children.reduce(function(cp,Sp){return _c[Sp.ID]!==void 0&&(cp=_c[Sp.ID]),cp},null);qu.children.forEach(function(cp){Zu.morphTargets[cp.ID]!==void 0&&Ju.push(Zu.morphTargets[cp.ID])});var tp=_h[0],rp={};"RotationOrder"in tp&&(rp.eulerOrder=Qu(tp.RotationOrder.value)),"InheritType"in tp&&(rp.inheritType=parseInt(tp.InheritType.value)),"GeometricTranslation"in tp&&(rp.translation=tp.GeometricTranslation.value),"GeometricRotation"in tp&&(rp.rotation=tp.GeometricRotation.value),"GeometricScaling"in tp&&(rp.scale=tp.GeometricScaling.value);var dp=Wu(rp);return this.genGeometry(Xu,ep,Ju,dp)}},genGeometry:function(qu,Xu,Zu,_c){var Ju=new BufferGeometry;qu.attrName&&(Ju.name=qu.attrName);var _h=this.parseGeoNode(qu,Xu),ep=this.genBuffers(_h),tp=new Float32BufferAttribute(ep.vertex,3);if(tp.applyMatrix4(_c),Ju.setAttribute("position",tp),ep.colors.length>0&&Ju.setAttribute("color",new Float32BufferAttribute(ep.colors,3)),Xu&&(Ju.setAttribute("skinIndex",new Uint16BufferAttribute(ep.weightsIndices,4)),Ju.setAttribute("skinWeight",new Float32BufferAttribute(ep.vertexWeights,4)),Ju.FBX_Deformer=Xu),ep.normal.length>0){var rp=new Matrix3().getNormalMatrix(_c),dp=new Float32BufferAttribute(ep.normal,3);dp.applyNormalMatrix(rp),Ju.setAttribute("normal",dp)}if(ep.uvs.forEach(function(_p,Cp){var Ep="uv"+(Cp+1).toString();Cp===0&&(Ep="uv"),Ju.setAttribute(Ep,new Float32BufferAttribute(ep.uvs[Cp],2))}),_h.material&&_h.material.mappingType!=="AllSame"){var cp=ep.materialIndex[0],Sp=0;if(ep.materialIndex.forEach(function(_p,Cp){_p!==cp&&(Ju.addGroup(Sp,Cp-Sp,cp),cp=_p,Sp=Cp)}),Ju.groups.length>0){var yp=Ju.groups[Ju.groups.length-1],Bp=yp.start+yp.count;Bp!==ep.materialIndex.length&&Ju.addGroup(Bp,ep.materialIndex.length-Bp,cp)}Ju.groups.length===0&&Ju.addGroup(0,ep.materialIndex.length,ep.materialIndex[0])}return this.addMorphTargets(Ju,qu,Zu,_c),Ju},parseGeoNode:function(qu,Xu){var Zu={};if(Zu.vertexPositions=qu.Vertices!==void 0?qu.Vertices.a:[],Zu.vertexIndices=qu.PolygonVertexIndex!==void 0?qu.PolygonVertexIndex.a:[],qu.LayerElementColor&&(Zu.color=this.parseVertexColors(qu.LayerElementColor[0])),qu.LayerElementMaterial&&(Zu.material=this.parseMaterialIndices(qu.LayerElementMaterial[0])),qu.LayerElementNormal&&(Zu.normal=this.parseNormals(qu.LayerElementNormal[0])),qu.LayerElementUV){Zu.uv=[];for(var _c=0;qu.LayerElementUV[_c];)Zu.uv.push(this.parseUVs(qu.LayerElementUV[_c])),_c++}return Zu.weightTable={},Xu!==null&&(Zu.skeleton=Xu,Xu.rawBones.forEach(function(Ju,_h){Ju.indices.forEach(function(ep,tp){Zu.weightTable[ep]===void 0&&(Zu.weightTable[ep]=[]),Zu.weightTable[ep].push({id:_h,weight:Ju.weights[tp]})})})),Zu},genBuffers:function(qu){var Xu={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Zu=0,_c=0,Ju=!1,_h=[],ep=[],tp=[],rp=[],dp=[],cp=[],Sp=this;return qu.vertexIndices.forEach(function(yp,Bp){var _p=!1;yp<0&&(yp=yp^-1,_p=!0);var Cp=[],Ep=[];if(_h.push(yp*3,yp*3+1,yp*3+2),qu.color){var ap=Hu(Bp,Zu,yp,qu.color);tp.push(ap[0],ap[1],ap[2])}if(qu.skeleton){if(qu.weightTable[yp]!==void 0&&qu.weightTable[yp].forEach(function(gp){Ep.push(gp.weight),Cp.push(gp.id)}),Ep.length>4){Ju||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),Ju=!0);var ip=[0,0,0,0],hp=[0,0,0,0];Ep.forEach(function(gp,Ap){var Mp=gp,Dp=Cp[Ap];hp.forEach(function($p,np,sp){if(Mp>$p){sp[np]=Mp,Mp=$p;var Pp=ip[np];ip[np]=Dp,Dp=Pp}})}),Cp=ip,Ep=hp}for(;Ep.length<4;)Ep.push(0),Cp.push(0);for(var up=0;up<4;++up)dp.push(Ep[up]),cp.push(Cp[up])}if(qu.normal){var ap=Hu(Bp,Zu,yp,qu.normal);ep.push(ap[0],ap[1],ap[2])}if(qu.material&&qu.material.mappingType!=="AllSame")var pp=Hu(Bp,Zu,yp,qu.material)[0];qu.uv&&qu.uv.forEach(function(gp,Ap){var Mp=Hu(Bp,Zu,yp,gp);rp[Ap]===void 0&&(rp[Ap]=[]),rp[Ap].push(Mp[0]),rp[Ap].push(Mp[1])}),_c++,_p&&(Sp.genFace(Xu,qu,_h,pp,ep,tp,rp,dp,cp,_c),Zu++,_c=0,_h=[],ep=[],tp=[],rp=[],dp=[],cp=[])}),Xu},genFace:function(qu,Xu,Zu,_c,Ju,_h,ep,tp,rp,dp){for(var cp=2;cp<dp;cp++)qu.vertex.push(Xu.vertexPositions[Zu[0]]),qu.vertex.push(Xu.vertexPositions[Zu[1]]),qu.vertex.push(Xu.vertexPositions[Zu[2]]),qu.vertex.push(Xu.vertexPositions[Zu[(cp-1)*3]]),qu.vertex.push(Xu.vertexPositions[Zu[(cp-1)*3+1]]),qu.vertex.push(Xu.vertexPositions[Zu[(cp-1)*3+2]]),qu.vertex.push(Xu.vertexPositions[Zu[cp*3]]),qu.vertex.push(Xu.vertexPositions[Zu[cp*3+1]]),qu.vertex.push(Xu.vertexPositions[Zu[cp*3+2]]),Xu.skeleton&&(qu.vertexWeights.push(tp[0]),qu.vertexWeights.push(tp[1]),qu.vertexWeights.push(tp[2]),qu.vertexWeights.push(tp[3]),qu.vertexWeights.push(tp[(cp-1)*4]),qu.vertexWeights.push(tp[(cp-1)*4+1]),qu.vertexWeights.push(tp[(cp-1)*4+2]),qu.vertexWeights.push(tp[(cp-1)*4+3]),qu.vertexWeights.push(tp[cp*4]),qu.vertexWeights.push(tp[cp*4+1]),qu.vertexWeights.push(tp[cp*4+2]),qu.vertexWeights.push(tp[cp*4+3]),qu.weightsIndices.push(rp[0]),qu.weightsIndices.push(rp[1]),qu.weightsIndices.push(rp[2]),qu.weightsIndices.push(rp[3]),qu.weightsIndices.push(rp[(cp-1)*4]),qu.weightsIndices.push(rp[(cp-1)*4+1]),qu.weightsIndices.push(rp[(cp-1)*4+2]),qu.weightsIndices.push(rp[(cp-1)*4+3]),qu.weightsIndices.push(rp[cp*4]),qu.weightsIndices.push(rp[cp*4+1]),qu.weightsIndices.push(rp[cp*4+2]),qu.weightsIndices.push(rp[cp*4+3])),Xu.color&&(qu.colors.push(_h[0]),qu.colors.push(_h[1]),qu.colors.push(_h[2]),qu.colors.push(_h[(cp-1)*3]),qu.colors.push(_h[(cp-1)*3+1]),qu.colors.push(_h[(cp-1)*3+2]),qu.colors.push(_h[cp*3]),qu.colors.push(_h[cp*3+1]),qu.colors.push(_h[cp*3+2])),Xu.material&&Xu.material.mappingType!=="AllSame"&&(qu.materialIndex.push(_c),qu.materialIndex.push(_c),qu.materialIndex.push(_c)),Xu.normal&&(qu.normal.push(Ju[0]),qu.normal.push(Ju[1]),qu.normal.push(Ju[2]),qu.normal.push(Ju[(cp-1)*3]),qu.normal.push(Ju[(cp-1)*3+1]),qu.normal.push(Ju[(cp-1)*3+2]),qu.normal.push(Ju[cp*3]),qu.normal.push(Ju[cp*3+1]),qu.normal.push(Ju[cp*3+2])),Xu.uv&&Xu.uv.forEach(function(Sp,yp){qu.uvs[yp]===void 0&&(qu.uvs[yp]=[]),qu.uvs[yp].push(ep[yp][0]),qu.uvs[yp].push(ep[yp][1]),qu.uvs[yp].push(ep[yp][(cp-1)*2]),qu.uvs[yp].push(ep[yp][(cp-1)*2+1]),qu.uvs[yp].push(ep[yp][cp*2]),qu.uvs[yp].push(ep[yp][cp*2+1])})},addMorphTargets:function(qu,Xu,Zu,_c){if(Zu.length!==0){qu.morphTargetsRelative=!0,qu.morphAttributes.position=[];var Ju=this;Zu.forEach(function(_h){_h.rawTargets.forEach(function(ep){var tp=_u.Objects.Geometry[ep.geoID];tp!==void 0&&Ju.genMorphGeometry(qu,Xu,tp,_c,ep.name)})})}},genMorphGeometry:function(qu,Xu,Zu,_c,Ju){for(var _h=Xu.PolygonVertexIndex!==void 0?Xu.PolygonVertexIndex.a:[],ep=Zu.Vertices!==void 0?Zu.Vertices.a:[],tp=Zu.Indexes!==void 0?Zu.Indexes.a:[],rp=qu.attributes.position.count*3,dp=new Float32Array(rp),cp=0;cp<tp.length;cp++){var Sp=tp[cp]*3;dp[Sp]=ep[cp*3],dp[Sp+1]=ep[cp*3+1],dp[Sp+2]=ep[cp*3+2]}var yp={vertexIndices:_h,vertexPositions:dp},Bp=this.genBuffers(yp),_p=new Float32BufferAttribute(Bp.vertex,3);_p.name=Ju||Zu.attrName,_p.applyMatrix4(_c),qu.morphAttributes.position.push(_p)},parseNormals:function(qu){var Xu=qu.MappingInformationType,Zu=qu.ReferenceInformationType,_c=qu.Normals.a,Ju=[];return Zu==="IndexToDirect"&&("NormalIndex"in qu?Ju=qu.NormalIndex.a:"NormalsIndex"in qu&&(Ju=qu.NormalsIndex.a)),{dataSize:3,buffer:_c,indices:Ju,mappingType:Xu,referenceType:Zu}},parseUVs:function(qu){var Xu=qu.MappingInformationType,Zu=qu.ReferenceInformationType,_c=qu.UV.a,Ju=[];return Zu==="IndexToDirect"&&(Ju=qu.UVIndex.a),{dataSize:2,buffer:_c,indices:Ju,mappingType:Xu,referenceType:Zu}},parseVertexColors:function(qu){var Xu=qu.MappingInformationType,Zu=qu.ReferenceInformationType,_c=qu.Colors.a,Ju=[];return Zu==="IndexToDirect"&&(Ju=qu.ColorIndex.a),{dataSize:4,buffer:_c,indices:Ju,mappingType:Xu,referenceType:Zu}},parseMaterialIndices:function(qu){var Xu=qu.MappingInformationType,Zu=qu.ReferenceInformationType;if(Xu==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Zu};for(var _c=qu.Materials.a,Ju=[],_h=0;_h<_c.length;++_h)Ju.push(_h);return{dataSize:1,buffer:_c,indices:Ju,mappingType:Xu,referenceType:Zu}},parseNurbsGeometry:function(qu){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var Xu=parseInt(qu.Order);if(isNaN(Xu))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",qu.Order,qu.id),new BufferGeometry;for(var Zu=Xu-1,_c=qu.KnotVector.a,Ju=[],_h=qu.Points.a,ep=0,tp=_h.length;ep<tp;ep+=4)Ju.push(new Vector4().fromArray(_h,ep));var rp,dp;if(qu.Form==="Closed")Ju.push(Ju[0]);else if(qu.Form==="Periodic"){rp=Zu,dp=_c.length-1-rp;for(var ep=0;ep<Zu;++ep)Ju.push(Ju[ep])}var cp=new NURBSCurve(Zu,_c,Ju,rp,dp),Sp=cp.getPoints(Ju.length*7),yp=new Float32Array(Sp.length*3);Sp.forEach(function(_p,Cp){_p.toArray(yp,Cp*3)});var Bp=new BufferGeometry;return Bp.setAttribute("position",new BufferAttribute(yp,3)),Bp}};function Lu(){}Lu.prototype={constructor:Lu,parse:function(){var qu=[],Xu=this.parseClips();if(Xu!==void 0)for(var Zu in Xu){var _c=Xu[Zu],Ju=this.addClip(_c);qu.push(Ju)}return qu},parseClips:function(){if(_u.Objects.AnimationCurve!==void 0){var qu=this.parseAnimationCurveNodes();this.parseAnimationCurves(qu);var Xu=this.parseAnimationLayers(qu),Zu=this.parseAnimStacks(Xu);return Zu}},parseAnimationCurveNodes:function(){var qu=_u.Objects.AnimationCurveNode,Xu=new Map;for(var Zu in qu){var _c=qu[Zu];if(_c.attrName.match(/S|R|T|DeformPercent/)!==null){var Ju={id:_c.id,attr:_c.attrName,curves:{}};Xu.set(Ju.id,Ju)}}return Xu},parseAnimationCurves:function(qu){var Xu=_u.Objects.AnimationCurve;for(var Zu in Xu){var _c={id:Xu[Zu].id,times:Xu[Zu].KeyTime.a.map(Gu),values:Xu[Zu].KeyValueFloat.a},Ju=$u.get(_c.id);if(Ju!==void 0){var _h=Ju.parents[0].ID,ep=Ju.parents[0].relationship;ep.match(/X/)?qu.get(_h).curves.x=_c:ep.match(/Y/)?qu.get(_h).curves.y=_c:ep.match(/Z/)?qu.get(_h).curves.z=_c:ep.match(/d|DeformPercent/)&&qu.has(_h)&&(qu.get(_h).curves.morph=_c)}}},parseAnimationLayers:function(qu){var Xu=_u.Objects.AnimationLayer,Zu=new Map;for(var _c in Xu){var Ju=[],_h=$u.get(parseInt(_c));if(_h!==void 0){var ep=_h.children;ep.forEach(function(tp,rp){if(qu.has(tp.ID)){var dp=qu.get(tp.ID);if(dp.curves.x!==void 0||dp.curves.y!==void 0||dp.curves.z!==void 0){if(Ju[rp]===void 0){var cp=$u.get(tp.ID).parents.filter(function(Ep){return Ep.relationship!==void 0})[0].ID;if(cp!==void 0){var Sp=_u.Objects.Model[cp.toString()];if(Sp===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",tp);return}var yp={modelName:Sp.attrName?PropertyBinding.sanitizeNodeName(Sp.attrName):"",ID:Sp.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Tu.traverse(function(Ep){Ep.ID===Sp.id&&(yp.transform=Ep.matrix,Ep.userData.transformData&&(yp.eulerOrder=Ep.userData.transformData.eulerOrder))}),yp.transform||(yp.transform=new Matrix4),"PreRotation"in Sp&&(yp.preRotation=Sp.PreRotation.value),"PostRotation"in Sp&&(yp.postRotation=Sp.PostRotation.value),Ju[rp]=yp}}Ju[rp]&&(Ju[rp][dp.attr]=dp)}else if(dp.curves.morph!==void 0){if(Ju[rp]===void 0){var Bp=$u.get(tp.ID).parents.filter(function(hp){return hp.relationship!==void 0})[0].ID,_p=$u.get(Bp).parents[0].ID,Cp=$u.get(_p).parents[0].ID,cp=$u.get(Cp).parents[0].ID,Sp=_u.Objects.Model[cp],yp={modelName:Sp.attrName?PropertyBinding.sanitizeNodeName(Sp.attrName):"",morphName:_u.Objects.Deformer[Bp].attrName};Ju[rp]=yp}Ju[rp][dp.attr]=dp}}}),Zu.set(parseInt(_c),Ju)}}return Zu},parseAnimStacks:function(qu){var Xu=_u.Objects.AnimationStack,Zu={};for(var _c in Xu){var Ju=$u.get(parseInt(_c)).children;Ju.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var _h=qu.get(Ju[0].ID);Zu[_c]={name:Xu[_c].attrName,layer:_h}}return Zu},addClip:function(qu){var Xu=[],Zu=this;return qu.layer.forEach(function(_c){Xu=Xu.concat(Zu.generateTracks(_c))}),new AnimationClip(qu.name,-1,Xu)},generateTracks:function(qu){var Xu=[],Zu=new Vector3,_c=new Quaternion,Ju=new Vector3;if(qu.transform&&qu.transform.decompose(Zu,_c,Ju),Zu=Zu.toArray(),_c=new Euler().setFromQuaternion(_c,qu.eulerOrder).toArray(),Ju=Ju.toArray(),qu.T!==void 0&&Object.keys(qu.T.curves).length>0){var _h=this.generateVectorTrack(qu.modelName,qu.T.curves,Zu,"position");_h!==void 0&&Xu.push(_h)}if(qu.R!==void 0&&Object.keys(qu.R.curves).length>0){var ep=this.generateRotationTrack(qu.modelName,qu.R.curves,_c,qu.preRotation,qu.postRotation,qu.eulerOrder);ep!==void 0&&Xu.push(ep)}if(qu.S!==void 0&&Object.keys(qu.S.curves).length>0){var tp=this.generateVectorTrack(qu.modelName,qu.S.curves,Ju,"scale");tp!==void 0&&Xu.push(tp)}if(qu.DeformPercent!==void 0){var rp=this.generateMorphTrack(qu);rp!==void 0&&Xu.push(rp)}return Xu},generateVectorTrack:function(qu,Xu,Zu,_c){var Ju=this.getTimesForAllAxes(Xu),_h=this.getKeyframeTrackValues(Ju,Xu,Zu);return new VectorKeyframeTrack(qu+"."+_c,Ju,_h)},generateRotationTrack:function(qu,Xu,Zu,_c,Ju,_h){Xu.x!==void 0&&(this.interpolateRotations(Xu.x),Xu.x.values=Xu.x.values.map(MathUtils.degToRad)),Xu.y!==void 0&&(this.interpolateRotations(Xu.y),Xu.y.values=Xu.y.values.map(MathUtils.degToRad)),Xu.z!==void 0&&(this.interpolateRotations(Xu.z),Xu.z.values=Xu.z.values.map(MathUtils.degToRad));var ep=this.getTimesForAllAxes(Xu),tp=this.getKeyframeTrackValues(ep,Xu,Zu);_c!==void 0&&(_c=_c.map(MathUtils.degToRad),_c.push(_h),_c=new Euler().fromArray(_c),_c=new Quaternion().setFromEuler(_c)),Ju!==void 0&&(Ju=Ju.map(MathUtils.degToRad),Ju.push(_h),Ju=new Euler().fromArray(Ju),Ju=new Quaternion().setFromEuler(Ju).inverse());for(var rp=new Quaternion,dp=new Euler,cp=[],Sp=0;Sp<tp.length;Sp+=3)dp.set(tp[Sp],tp[Sp+1],tp[Sp+2],_h),rp.setFromEuler(dp),_c!==void 0&&rp.premultiply(_c),Ju!==void 0&&rp.multiply(Ju),rp.toArray(cp,Sp/3*4);return new QuaternionKeyframeTrack(qu+".quaternion",ep,cp)},generateMorphTrack:function(qu){var Xu=qu.DeformPercent.curves.morph,Zu=Xu.values.map(function(Ju){return Ju/100}),_c=Tu.getObjectByName(qu.modelName).morphTargetDictionary[qu.morphName];return new NumberKeyframeTrack(qu.modelName+".morphTargetInfluences["+_c+"]",Xu.times,Zu)},getTimesForAllAxes:function(qu){var Xu=[];return qu.x!==void 0&&(Xu=Xu.concat(qu.x.times)),qu.y!==void 0&&(Xu=Xu.concat(qu.y.times)),qu.z!==void 0&&(Xu=Xu.concat(qu.z.times)),Xu=Xu.sort(function(Zu,_c){return Zu-_c}).filter(function(Zu,_c,Ju){return Ju.indexOf(Zu)==_c}),Xu},getKeyframeTrackValues:function(qu,Xu,Zu){var _c=Zu,Ju=[],_h=-1,ep=-1,tp=-1;return qu.forEach(function(rp){if(Xu.x&&(_h=Xu.x.times.indexOf(rp)),Xu.y&&(ep=Xu.y.times.indexOf(rp)),Xu.z&&(tp=Xu.z.times.indexOf(rp)),_h!==-1){var dp=Xu.x.values[_h];Ju.push(dp),_c[0]=dp}else Ju.push(_c[0]);if(ep!==-1){var cp=Xu.y.values[ep];Ju.push(cp),_c[1]=cp}else Ju.push(_c[1]);if(tp!==-1){var Sp=Xu.z.values[tp];Ju.push(Sp),_c[2]=Sp}else Ju.push(_c[2])}),Ju},interpolateRotations:function(qu){for(var Xu=1;Xu<qu.values.length;Xu++){var Zu=qu.values[Xu-1],_c=qu.values[Xu]-Zu,Ju=Math.abs(_c);if(Ju>=180){for(var _h=Ju/180,ep=_c/_h,tp=Zu+ep,rp=qu.times[Xu-1],dp=qu.times[Xu]-rp,cp=dp/_h,Sp=rp+cp,yp=[],Bp=[];Sp<qu.times[Xu];)yp.push(Sp),Sp+=cp,Bp.push(tp),tp+=ep;qu.times=_f(qu.times,Xu,yp),qu.values=_f(qu.values,Xu,Bp)}}}};function Ru(){}Ru.prototype={constructor:Ru,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(qu){this.nodeStack.push(qu),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(qu,Xu){this.currentProp=qu,this.currentPropName=Xu},parse:function(qu){this.currentIndent=0,this.allNodes=new Fu,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var Xu=this,Zu=qu.split(/[\r\n]+/);return Zu.forEach(function(_c,Ju){var _h=_c.match(/^[\s\t]*;/),ep=_c.match(/^[\s\t]*$/);if(!(_h||ep)){var tp=_c.match("^\\t{"+Xu.currentIndent+"}(\\w+):(.*){",""),rp=_c.match("^\\t{"+Xu.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),dp=_c.match("^\\t{"+(Xu.currentIndent-1)+"}}");tp?Xu.parseNodeBegin(_c,tp):rp?Xu.parseNodeProperty(_c,rp,Zu[++Ju]):dp?Xu.popStack():_c.match(/^[^\s\t}]/)&&Xu.parseNodePropertyContinued(_c)}}),this.allNodes},parseNodeBegin:function(qu,Xu){var Zu=Xu[1].trim().replace(/^"/,"").replace(/"$/,""),_c=Xu[2].split(",").map(function(tp){return tp.trim().replace(/^"/,"").replace(/"$/,"")}),Ju={name:Zu},_h=this.parseNodeAttr(_c),ep=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Zu,Ju):Zu in ep?(Zu==="PoseNode"?ep.PoseNode.push(Ju):ep[Zu].id!==void 0&&(ep[Zu]={},ep[Zu][ep[Zu].id]=ep[Zu]),_h.id!==""&&(ep[Zu][_h.id]=Ju)):typeof _h.id=="number"?(ep[Zu]={},ep[Zu][_h.id]=Ju):Zu!=="Properties70"&&(Zu==="PoseNode"?ep[Zu]=[Ju]:ep[Zu]=Ju),typeof _h.id=="number"&&(Ju.id=_h.id),_h.name!==""&&(Ju.attrName=_h.name),_h.type!==""&&(Ju.attrType=_h.type),this.pushStack(Ju)},parseNodeAttr:function(qu){var Xu=qu[0];qu[0]!==""&&(Xu=parseInt(qu[0]),isNaN(Xu)&&(Xu=qu[0]));var Zu="",_c="";return qu.length>1&&(Zu=qu[1].replace(/^(\w+)::/,""),_c=qu[2]),{id:Xu,name:Zu,type:_c}},parseNodeProperty:function(qu,Xu,Zu){var _c=Xu[1].replace(/^"/,"").replace(/"$/,"").trim(),Ju=Xu[2].replace(/^"/,"").replace(/"$/,"").trim();_c==="Content"&&Ju===","&&(Ju=Zu.replace(/"/g,"").replace(/,$/,"").trim());var _h=this.getCurrentNode(),ep=_h.name;if(ep==="Properties70"){this.parseNodeSpecialProperty(qu,_c,Ju);return}if(_c==="C"){var tp=Ju.split(",").slice(1),rp=parseInt(tp[0]),dp=parseInt(tp[1]),cp=Ju.split(",").slice(3);cp=cp.map(function(Sp){return Sp.trim().replace(/^"/,"")}),_c="connections",Ju=[rp,dp],Xc(Ju,cp),_h[_c]===void 0&&(_h[_c]=[])}_c==="Node"&&(_h.id=Ju),_c in _h&&Array.isArray(_h[_c])?_h[_c].push(Ju):_c!=="a"?_h[_c]=Ju:_h.a=Ju,this.setCurrentProp(_h,_c),_c==="a"&&Ju.slice(-1)!==","&&(_h.a=Ku(Ju))},parseNodePropertyContinued:function(qu){var Xu=this.getCurrentNode();Xu.a+=qu,qu.slice(-1)!==","&&(Xu.a=Ku(Xu.a))},parseNodeSpecialProperty:function(qu,Xu,Zu){var _c=Zu.split('",').map(function(dp){return dp.trim().replace(/^\"/,"").replace(/\s/,"_")}),Ju=_c[0],_h=_c[1],ep=_c[2],tp=_c[3],rp=_c[4];switch(_h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":rp=parseFloat(rp);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":rp=Ku(rp);break}this.getPrevNode()[Ju]={type:_h,type2:ep,flag:tp,value:rp},this.setCurrentProp(this.getPrevNode(),Ju)}};function Ou(){}Ou.prototype={constructor:Ou,parse:function(qu){var Xu=new Du(qu);Xu.skip(23);var Zu=Xu.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Zu);for(var _c=new Fu;!this.endOfContent(Xu);){var Ju=this.parseNode(Xu,Zu);Ju!==null&&_c.add(Ju.name,Ju)}return _c},endOfContent:function(qu){return qu.size()%16===0?(qu.getOffset()+160+16&-16)>=qu.size():qu.getOffset()+160+16>=qu.size()},parseNode:function(qu,Xu){var Zu={},_c=Xu>=7500?qu.getUint64():qu.getUint32(),Ju=Xu>=7500?qu.getUint64():qu.getUint32();Xu>=7500?qu.getUint64():qu.getUint32();var _h=qu.getUint8(),ep=qu.getString(_h);if(_c===0)return null;for(var tp=[],rp=0;rp<Ju;rp++)tp.push(this.parseProperty(qu));var dp=tp.length>0?tp[0]:"",cp=tp.length>1?tp[1]:"",Sp=tp.length>2?tp[2]:"";for(Zu.singleProperty=Ju===1&&qu.getOffset()===_c;_c>qu.getOffset();){var yp=this.parseNode(qu,Xu);yp!==null&&this.parseSubNode(ep,Zu,yp)}return Zu.propertyList=tp,typeof dp=="number"&&(Zu.id=dp),cp!==""&&(Zu.attrName=cp),Sp!==""&&(Zu.attrType=Sp),ep!==""&&(Zu.name=ep),Zu},parseSubNode:function(qu,Xu,Zu){if(Zu.singleProperty===!0){var _c=Zu.propertyList[0];Array.isArray(_c)?(Xu[Zu.name]=Zu,Zu.a=_c):Xu[Zu.name]=_c}else if(qu==="Connections"&&Zu.name==="C"){var Ju=[];Zu.propertyList.forEach(function(Sp,yp){yp!==0&&Ju.push(Sp)}),Xu.connections===void 0&&(Xu.connections=[]),Xu.connections.push(Ju)}else if(Zu.name==="Properties70"){var _h=Object.keys(Zu);_h.forEach(function(Sp){Xu[Sp]=Zu[Sp]})}else if(qu==="Properties70"&&Zu.name==="P"){var ep=Zu.propertyList[0],tp=Zu.propertyList[1],rp=Zu.propertyList[2],dp=Zu.propertyList[3],cp;ep.indexOf("Lcl ")===0&&(ep=ep.replace("Lcl ","Lcl_")),tp.indexOf("Lcl ")===0&&(tp=tp.replace("Lcl ","Lcl_")),tp==="Color"||tp==="ColorRGB"||tp==="Vector"||tp==="Vector3D"||tp.indexOf("Lcl_")===0?cp=[Zu.propertyList[4],Zu.propertyList[5],Zu.propertyList[6]]:cp=Zu.propertyList[4],Xu[ep]={type:tp,type2:rp,flag:dp,value:cp}}else Xu[Zu.name]===void 0?typeof Zu.id=="number"?(Xu[Zu.name]={},Xu[Zu.name][Zu.id]=Zu):Xu[Zu.name]=Zu:Zu.name==="PoseNode"?(Array.isArray(Xu[Zu.name])||(Xu[Zu.name]=[Xu[Zu.name]]),Xu[Zu.name].push(Zu)):Xu[Zu.name][Zu.id]===void 0&&(Xu[Zu.name][Zu.id]=Zu)},parseProperty:function(qu){var Xu=qu.getString(1);switch(Xu){case"C":return qu.getBoolean();case"D":return qu.getFloat64();case"F":return qu.getFloat32();case"I":return qu.getInt32();case"L":return qu.getInt64();case"R":var Zu=qu.getUint32();return qu.getArrayBuffer(Zu);case"S":var Zu=qu.getUint32();return qu.getString(Zu);case"Y":return qu.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var _c=qu.getUint32(),Ju=qu.getUint32(),_h=qu.getUint32();if(Ju===0)switch(Xu){case"b":case"c":return qu.getBooleanArray(_c);case"d":return qu.getFloat64Array(_c);case"f":return qu.getFloat32Array(_c);case"i":return qu.getInt32Array(_c);case"l":return qu.getInt64Array(_c)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var ep=new Zlib.Inflate(new Uint8Array(qu.getArrayBuffer(_h))),tp=new Du(ep.decompress().buffer);switch(Xu){case"b":case"c":return tp.getBooleanArray(_c);case"d":return tp.getFloat64Array(_c);case"f":return tp.getFloat32Array(_c);case"i":return tp.getInt32Array(_c);case"l":return tp.getInt64Array(_c)}default:throw new Error("THREE.FBXLoader: Unknown property type "+Xu)}}};function Du(qu,Xu){this.dv=new DataView(qu),this.offset=0,this.littleEndian=Xu!==void 0?Xu:!0}Du.prototype={constructor:Du,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(qu){this.offset+=qu},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu.push(this.getBoolean());return Xu},getUint8:function(){var qu=this.dv.getUint8(this.offset);return this.offset+=1,qu},getInt16:function(){var qu=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,qu},getInt32:function(){var qu=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,qu},getInt32Array:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu.push(this.getInt32());return Xu},getUint32:function(){var qu=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,qu},getInt64:function(){var qu,Xu;return this.littleEndian?(qu=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),qu=this.getUint32()),Xu&2147483648?(Xu=~Xu&4294967295,qu=~qu&4294967295,qu===4294967295&&(Xu=Xu+1&4294967295),qu=qu+1&4294967295,-(Xu*4294967296+qu)):Xu*4294967296+qu},getInt64Array:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu.push(this.getInt64());return Xu},getUint64:function(){var qu,Xu;return this.littleEndian?(qu=this.getUint32(),Xu=this.getUint32()):(Xu=this.getUint32(),qu=this.getUint32()),Xu*4294967296+qu},getFloat32:function(){var qu=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,qu},getFloat32Array:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu.push(this.getFloat32());return Xu},getFloat64:function(){var qu=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,qu},getFloat64Array:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu.push(this.getFloat64());return Xu},getArrayBuffer:function(qu){var Xu=this.dv.buffer.slice(this.offset,this.offset+qu);return this.offset+=qu,Xu},getString:function(qu){for(var Xu=[],Zu=0;Zu<qu;Zu++)Xu[Zu]=this.getUint8();var _c=Xu.indexOf(0);return _c>=0&&(Xu=Xu.slice(0,_c)),LoaderUtils.decodeText(new Uint8Array(Xu))}};function Fu(){}Fu.prototype={constructor:Fu,add:function(qu,Xu){this[qu]=Xu}};function Vu(qu){var Xu="Kaydara FBX Binary  \0";return qu.byteLength>=Xu.length&&Xu===Yu(qu,0,Xu.length)}function ku(qu){var Xu=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],Zu=0;function _c(ep){var tp=qu[ep-1];return qu=qu.slice(Zu+ep),Zu++,tp}for(var Ju=0;Ju<Xu.length;++Ju){var _h=_c(1);if(_h===Xu[Ju])return!1}return!0}function Nu(qu){var Xu=/FBXVersion: (\d+)/,Zu=qu.match(Xu);if(Zu){var _c=parseInt(Zu[1]);return _c}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Gu(qu){return qu/46186158e3}var ju=[];function Hu(qu,Xu,Zu,_c){var Ju;switch(_c.mappingType){case"ByPolygonVertex":Ju=qu;break;case"ByPolygon":Ju=Xu;break;case"ByVertice":Ju=Zu;break;case"AllSame":Ju=_c.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+_c.mappingType)}_c.referenceType==="IndexToDirect"&&(Ju=_c.indices[Ju]);var _h=Ju*_c.dataSize,ep=_h+_c.dataSize;return _d(ju,_c.buffer,_h,ep)}var Uu=new Euler,zu=new Vector3;function Wu(qu){var Xu=new Matrix4,Zu=new Matrix4,_c=new Matrix4,Ju=new Matrix4,_h=new Matrix4,ep=new Matrix4,tp=new Matrix4,rp=new Matrix4,dp=new Matrix4,cp=new Matrix4,Sp=new Matrix4,yp=qu.inheritType?qu.inheritType:0;if(qu.translation&&Xu.setPosition(zu.fromArray(qu.translation)),qu.preRotation){var Bp=qu.preRotation.map(MathUtils.degToRad);Bp.push(qu.eulerOrder),Zu.makeRotationFromEuler(Uu.fromArray(Bp))}if(qu.rotation){var Bp=qu.rotation.map(MathUtils.degToRad);Bp.push(qu.eulerOrder),_c.makeRotationFromEuler(Uu.fromArray(Bp))}if(qu.postRotation){var Bp=qu.postRotation.map(MathUtils.degToRad);Bp.push(qu.eulerOrder),Ju.makeRotationFromEuler(Uu.fromArray(Bp))}qu.scale&&_h.scale(zu.fromArray(qu.scale)),qu.scalingOffset&&tp.setPosition(zu.fromArray(qu.scalingOffset)),qu.scalingPivot&&ep.setPosition(zu.fromArray(qu.scalingPivot)),qu.rotationOffset&&rp.setPosition(zu.fromArray(qu.rotationOffset)),qu.rotationPivot&&dp.setPosition(zu.fromArray(qu.rotationPivot)),qu.parentMatrixWorld&&(cp=qu.parentMatrixWorld);var _p=Zu.multiply(_c).multiply(Ju),Cp=new Matrix4;cp.extractRotation(Cp);var Ep=new Matrix4;Ep.copyPosition(cp);var ap=new Matrix4;ap.getInverse(Cp).multiply(cp);var ip=new Matrix4;if(yp===0)ip.copy(Cp).multiply(_p).multiply(ap).multiply(_h);else if(yp===1)ip.copy(Cp).multiply(ap).multiply(_p).multiply(_h);else{var hp=new Matrix4().getInverse(_h),up=new Matrix4().multiply(ap).multiply(hp);ip.copy(Cp).multiply(_p).multiply(up).multiply(_h)}var pp=new Matrix4().getInverse(dp),gp=new Matrix4().getInverse(ep),Ap=new Matrix4;Ap.copy(Xu).multiply(rp).multiply(dp).multiply(Zu).multiply(_c).multiply(Ju).multiply(pp).multiply(tp).multiply(ep).multiply(_h).multiply(gp);var Mp=new Matrix4().copyPosition(Ap),Dp=new Matrix4().copy(cp).multiply(Mp);return Sp.copyPosition(Dp),Ap=new Matrix4().multiply(Sp).multiply(ip),Ap}function Qu(qu){qu=qu||0;var Xu=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return qu===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),Xu[0]):Xu[qu]}function Ku(qu){var Xu=qu.split(",").map(function(Zu){return parseFloat(Zu)});return Xu}function Yu(qu,Xu,Zu){return Xu===void 0&&(Xu=0),Zu===void 0&&(Zu=qu.byteLength),LoaderUtils.decodeText(new Uint8Array(qu,Xu,Zu))}function Xc(qu,Xu){for(var Zu=0,_c=qu.length,Ju=Xu.length;Zu<Ju;Zu++,_c++)qu[_c]=Xu[Zu]}function _d(qu,Xu,Zu,_c){for(var Ju=Zu,_h=0;Ju<_c;Ju++,_h++)qu[_h]=Xu[Ju];return qu}function _f(qu,Xu,Zu){return qu.slice(0,Xu).concat(Zu).concat(qu.slice(Xu))}return Cu})();var n$6=Object.defineProperty,a$2=(_u,$u,Tu)=>$u in _u?n$6(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,i$7=(_u,$u,Tu)=>(a$2(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class h$2 extends exports.Tween{constructor(){super(...arguments),i$7(this,"disposeMethods",[]),i$7(this,"animationFrameDisposer"),i$7(this,"onDispose",$u=>(this.disposeMethods.push($u),this)),i$7(this,"play",()=>(this.start(0),this.animationFrameDisposer=w$4($u=>this.update($u)),this)),i$7(this,"dispose",()=>{var $u;this.stop(),($u=this.animationFrameDisposer)==null||$u.call(this),this.disposeMethods.forEach(Tu=>Tu()),this.disposeMethods=[],exports.remove(this)})}}const i$6=window.requestAnimationFrame||(_u=>setTimeout(_u,16)),c$6=window.cancelAnimationFrame||clearTimeout;function w$4(_u,$u=60){let Tu=-1,Cu=0,Pu=-1;const Bu=1e3/$u;function Lu(Ru){Pu===-1&&(Pu=Ru),Tu=i$6(Lu),!(Ru-Cu<Bu)&&(Cu=Ru,_u&&_u(Ru-Pu))}return Tu=i$6(Lu),function(){c$6(Tu)}}new TextureLoader;var hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(_u){(function($u,Tu,Cu,Pu){var Bu=["","webkit","Moz","MS","ms","o"],Lu=Tu.createElement("div"),Ru="function",Ou=Math.round,Du=Math.abs,Fu=Date.now;function Vu(lp,fp,wp){return setTimeout(Wu(lp,wp),fp)}function ku(lp,fp,wp){return Array.isArray(lp)?(Nu(lp,wp[fp],wp),!0):!1}function Nu(lp,fp,wp){var Rp;if(!!lp)if(lp.forEach)lp.forEach(fp,wp);else if(lp.length!==Pu)for(Rp=0;Rp<lp.length;)fp.call(wp,lp[Rp],Rp,lp),Rp++;else for(Rp in lp)lp.hasOwnProperty(Rp)&&fp.call(wp,lp[Rp],Rp,lp)}function Gu(lp,fp,wp){var Rp="DEPRECATED METHOD: "+fp+`
`+wp+` AT 
`;return function(){var zp=new Error("get-stack-trace"),rm=zp&&zp.stack?zp.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",vm=$u.console&&($u.console.warn||$u.console.log);return vm&&vm.call($u.console,Rp,rm),lp.apply(this,arguments)}}var ju;typeof Object.assign!="function"?ju=function(fp){if(fp===Pu||fp===null)throw new TypeError("Cannot convert undefined or null to object");for(var wp=Object(fp),Rp=1;Rp<arguments.length;Rp++){var zp=arguments[Rp];if(zp!==Pu&&zp!==null)for(var rm in zp)zp.hasOwnProperty(rm)&&(wp[rm]=zp[rm])}return wp}:ju=Object.assign;var Hu=Gu(function(fp,wp,Rp){for(var zp=Object.keys(wp),rm=0;rm<zp.length;)(!Rp||Rp&&fp[zp[rm]]===Pu)&&(fp[zp[rm]]=wp[zp[rm]]),rm++;return fp},"extend","Use `assign`."),Uu=Gu(function(fp,wp){return Hu(fp,wp,!0)},"merge","Use `assign`.");function zu(lp,fp,wp){var Rp=fp.prototype,zp;zp=lp.prototype=Object.create(Rp),zp.constructor=lp,zp._super=Rp,wp&&ju(zp,wp)}function Wu(lp,fp){return function(){return lp.apply(fp,arguments)}}function Qu(lp,fp){return typeof lp==Ru?lp.apply(fp&&fp[0]||Pu,fp):lp}function Ku(lp,fp){return lp===Pu?fp:lp}function Yu(lp,fp,wp){Nu(qu(fp),function(Rp){lp.addEventListener(Rp,wp,!1)})}function Xc(lp,fp,wp){Nu(qu(fp),function(Rp){lp.removeEventListener(Rp,wp,!1)})}function _d(lp,fp){for(;lp;){if(lp==fp)return!0;lp=lp.parentNode}return!1}function _f(lp,fp){return lp.indexOf(fp)>-1}function qu(lp){return lp.trim().split(/\s+/g)}function Xu(lp,fp,wp){if(lp.indexOf&&!wp)return lp.indexOf(fp);for(var Rp=0;Rp<lp.length;){if(wp&&lp[Rp][wp]==fp||!wp&&lp[Rp]===fp)return Rp;Rp++}return-1}function Zu(lp){return Array.prototype.slice.call(lp,0)}function _c(lp,fp,wp){for(var Rp=[],zp=[],rm=0;rm<lp.length;){var vm=fp?lp[rm][fp]:lp[rm];Xu(zp,vm)<0&&Rp.push(lp[rm]),zp[rm]=vm,rm++}return wp&&(fp?Rp=Rp.sort(function(Bm,Dm){return Bm[fp]>Dm[fp]}):Rp=Rp.sort()),Rp}function Ju(lp,fp){for(var wp,Rp,zp=fp[0].toUpperCase()+fp.slice(1),rm=0;rm<Bu.length;){if(wp=Bu[rm],Rp=wp?wp+zp:fp,Rp in lp)return Rp;rm++}return Pu}var _h=1;function ep(){return _h++}function tp(lp){var fp=lp.ownerDocument||lp;return fp.defaultView||fp.parentWindow||$u}var rp=/mobile|tablet|ip(ad|hone|od)|android/i,dp="ontouchstart"in $u,cp=Ju($u,"PointerEvent")!==Pu,Sp=dp&&rp.test(navigator.userAgent),yp="touch",Bp="pen",_p="mouse",Cp="kinect",Ep=25,ap=1,ip=2,hp=4,up=8,pp=1,gp=2,Ap=4,Mp=8,Dp=16,$p=gp|Ap,np=Mp|Dp,sp=$p|np,Pp=["x","y"],Tp=["clientX","clientY"];function Np(lp,fp){var wp=this;this.manager=lp,this.callback=fp,this.element=lp.element,this.target=lp.options.inputTarget,this.domHandler=function(Rp){Qu(lp.options.enable,[lp])&&wp.handler(Rp)},this.init()}Np.prototype={handler:function(){},init:function(){this.evEl&&Yu(this.element,this.evEl,this.domHandler),this.evTarget&&Yu(this.target,this.evTarget,this.domHandler),this.evWin&&Yu(tp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Xc(this.element,this.evEl,this.domHandler),this.evTarget&&Xc(this.target,this.evTarget,this.domHandler),this.evWin&&Xc(tp(this.element),this.evWin,this.domHandler)}};function Vp(lp){var fp,wp=lp.options.inputClass;return wp?fp=wp:cp?fp=gm:Sp?fp=Xp:dp?fp=om:fp=mm,new fp(lp,Gp)}function Gp(lp,fp,wp){var Rp=wp.pointers.length,zp=wp.changedPointers.length,rm=fp&ap&&Rp-zp===0,vm=fp&(hp|up)&&Rp-zp===0;wp.isFirst=!!rm,wp.isFinal=!!vm,rm&&(lp.session={}),wp.eventType=fp,qp(lp,wp),lp.emit("hammer.input",wp),lp.recognize(wp),lp.session.prevInput=wp}function qp(lp,fp){var wp=lp.session,Rp=fp.pointers,zp=Rp.length;wp.firstInput||(wp.firstInput=Hp(fp)),zp>1&&!wp.firstMultiple?wp.firstMultiple=Hp(fp):zp===1&&(wp.firstMultiple=!1);var rm=wp.firstInput,vm=wp.firstMultiple,Pm=vm?vm.center:rm.center,Bm=fp.center=Kp(Rp);fp.timeStamp=Fu(),fp.deltaTime=fp.timeStamp-rm.timeStamp,fp.angle=Qp(Pm,Bm),fp.distance=xp(Pm,Bm),Wp(wp,fp),fp.offsetDirection=Yp(fp.deltaX,fp.deltaY);var Dm=jp(fp.deltaTime,fp.deltaX,fp.deltaY);fp.overallVelocityX=Dm.x,fp.overallVelocityY=Dm.y,fp.overallVelocity=Du(Dm.x)>Du(Dm.y)?Dm.x:Dm.y,fp.scale=vm?tm(vm.pointers,Rp):1,fp.rotation=vm?Zp(vm.pointers,Rp):0,fp.maxPointers=wp.prevInput?fp.pointers.length>wp.prevInput.maxPointers?fp.pointers.length:wp.prevInput.maxPointers:fp.pointers.length,Jp(wp,fp);var zm=lp.element;_d(fp.srcEvent.target,zm)&&(zm=fp.srcEvent.target),fp.target=zm}function Wp(lp,fp){var wp=fp.center,Rp=lp.offsetDelta||{},zp=lp.prevDelta||{},rm=lp.prevInput||{};(fp.eventType===ap||rm.eventType===hp)&&(zp=lp.prevDelta={x:rm.deltaX||0,y:rm.deltaY||0},Rp=lp.offsetDelta={x:wp.x,y:wp.y}),fp.deltaX=zp.x+(wp.x-Rp.x),fp.deltaY=zp.y+(wp.y-Rp.y)}function Jp(lp,fp){var wp=lp.lastInterval||fp,Rp=fp.timeStamp-wp.timeStamp,zp,rm,vm,Pm;if(fp.eventType!=up&&(Rp>Ep||wp.velocity===Pu)){var Bm=fp.deltaX-wp.deltaX,Dm=fp.deltaY-wp.deltaY,zm=jp(Rp,Bm,Dm);rm=zm.x,vm=zm.y,zp=Du(zm.x)>Du(zm.y)?zm.x:zm.y,Pm=Yp(Bm,Dm),lp.lastInterval=fp}else zp=wp.velocity,rm=wp.velocityX,vm=wp.velocityY,Pm=wp.direction;fp.velocity=zp,fp.velocityX=rm,fp.velocityY=vm,fp.direction=Pm}function Hp(lp){for(var fp=[],wp=0;wp<lp.pointers.length;)fp[wp]={clientX:Ou(lp.pointers[wp].clientX),clientY:Ou(lp.pointers[wp].clientY)},wp++;return{timeStamp:Fu(),pointers:fp,center:Kp(fp),deltaX:lp.deltaX,deltaY:lp.deltaY}}function Kp(lp){var fp=lp.length;if(fp===1)return{x:Ou(lp[0].clientX),y:Ou(lp[0].clientY)};for(var wp=0,Rp=0,zp=0;zp<fp;)wp+=lp[zp].clientX,Rp+=lp[zp].clientY,zp++;return{x:Ou(wp/fp),y:Ou(Rp/fp)}}function jp(lp,fp,wp){return{x:fp/lp||0,y:wp/lp||0}}function Yp(lp,fp){return lp===fp?pp:Du(lp)>=Du(fp)?lp<0?gp:Ap:fp<0?Mp:Dp}function xp(lp,fp,wp){wp||(wp=Pp);var Rp=fp[wp[0]]-lp[wp[0]],zp=fp[wp[1]]-lp[wp[1]];return Math.sqrt(Rp*Rp+zp*zp)}function Qp(lp,fp,wp){wp||(wp=Pp);var Rp=fp[wp[0]]-lp[wp[0]],zp=fp[wp[1]]-lp[wp[1]];return Math.atan2(zp,Rp)*180/Math.PI}function Zp(lp,fp){return Qp(fp[1],fp[0],Tp)+Qp(lp[1],lp[0],Tp)}function tm(lp,fp){return xp(fp[0],fp[1],Tp)/xp(lp[0],lp[1],Tp)}var em={mousedown:ap,mousemove:ip,mouseup:hp},lm="mousedown",pm="mousemove mouseup";function mm(){this.evEl=lm,this.evWin=pm,this.pressed=!1,Np.apply(this,arguments)}zu(mm,Np,{handler:function(fp){var wp=em[fp.type];wp&ap&&fp.button===0&&(this.pressed=!0),wp&ip&&fp.which!==1&&(wp=hp),this.pressed&&(wp&hp&&(this.pressed=!1),this.callback(this.manager,wp,{pointers:[fp],changedPointers:[fp],pointerType:_p,srcEvent:fp}))}});var Sm={pointerdown:ap,pointermove:ip,pointerup:hp,pointercancel:up,pointerout:up},fm={2:yp,3:Bp,4:_p,5:Cp},xm="pointerdown",wm="pointermove pointerup pointercancel";$u.MSPointerEvent&&!$u.PointerEvent&&(xm="MSPointerDown",wm="MSPointerMove MSPointerUp MSPointerCancel");function gm(){this.evEl=xm,this.evWin=wm,Np.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}zu(gm,Np,{handler:function(fp){var wp=this.store,Rp=!1,zp=fp.type.toLowerCase().replace("ms",""),rm=Sm[zp],vm=fm[fp.pointerType]||fp.pointerType,Pm=vm==yp,Bm=Xu(wp,fp.pointerId,"pointerId");rm&ap&&(fp.button===0||Pm)?Bm<0&&(wp.push(fp),Bm=wp.length-1):rm&(hp|up)&&(Rp=!0),!(Bm<0)&&(wp[Bm]=fp,this.callback(this.manager,rm,{pointers:wp,changedPointers:[fp],pointerType:vm,srcEvent:fp}),Rp&&wp.splice(Bm,1))}});var Mm={touchstart:ap,touchmove:ip,touchend:hp,touchcancel:up},Im="touchstart",ym="touchstart touchmove touchend touchcancel";function mp(){this.evTarget=Im,this.evWin=ym,this.started=!1,Np.apply(this,arguments)}zu(mp,Np,{handler:function(fp){var wp=Mm[fp.type];if(wp===ap&&(this.started=!0),!!this.started){var Rp=Fp.call(this,fp,wp);wp&(hp|up)&&Rp[0].length-Rp[1].length===0&&(this.started=!1),this.callback(this.manager,wp,{pointers:Rp[0],changedPointers:Rp[1],pointerType:yp,srcEvent:fp})}}});function Fp(lp,fp){var wp=Zu(lp.touches),Rp=Zu(lp.changedTouches);return fp&(hp|up)&&(wp=_c(wp.concat(Rp),"identifier",!0)),[wp,Rp]}var Lp={touchstart:ap,touchmove:ip,touchend:hp,touchcancel:up},kp="touchstart touchmove touchend touchcancel";function Xp(){this.evTarget=kp,this.targetIds={},Np.apply(this,arguments)}zu(Xp,Np,{handler:function(fp){var wp=Lp[fp.type],Rp=cm.call(this,fp,wp);!Rp||this.callback(this.manager,wp,{pointers:Rp[0],changedPointers:Rp[1],pointerType:yp,srcEvent:fp})}});function cm(lp,fp){var wp=Zu(lp.touches),Rp=this.targetIds;if(fp&(ap|ip)&&wp.length===1)return Rp[wp[0].identifier]=!0,[wp,wp];var zp,rm,vm=Zu(lp.changedTouches),Pm=[],Bm=this.target;if(rm=wp.filter(function(Dm){return _d(Dm.target,Bm)}),fp===ap)for(zp=0;zp<rm.length;)Rp[rm[zp].identifier]=!0,zp++;for(zp=0;zp<vm.length;)Rp[vm[zp].identifier]&&Pm.push(vm[zp]),fp&(hp|up)&&delete Rp[vm[zp].identifier],zp++;if(!!Pm.length)return[_c(rm.concat(Pm),"identifier",!0),Pm]}var um=2500,im=25;function om(){Np.apply(this,arguments);var lp=Wu(this.handler,this);this.touch=new Xp(this.manager,lp),this.mouse=new mm(this.manager,lp),this.primaryTouch=null,this.lastTouches=[]}zu(om,Np,{handler:function(fp,wp,Rp){var zp=Rp.pointerType==yp,rm=Rp.pointerType==_p;if(!(rm&&Rp.sourceCapabilities&&Rp.sourceCapabilities.firesTouchEvents)){if(zp)dm.call(this,wp,Rp);else if(rm&&op.call(this,Rp))return;this.callback(fp,wp,Rp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function dm(lp,fp){lp&ap?(this.primaryTouch=fp.changedPointers[0].identifier,Am.call(this,fp)):lp&(hp|up)&&Am.call(this,fp)}function Am(lp){var fp=lp.changedPointers[0];if(fp.identifier===this.primaryTouch){var wp={x:fp.clientX,y:fp.clientY};this.lastTouches.push(wp);var Rp=this.lastTouches,zp=function(){var rm=Rp.indexOf(wp);rm>-1&&Rp.splice(rm,1)};setTimeout(zp,um)}}function op(lp){for(var fp=lp.srcEvent.clientX,wp=lp.srcEvent.clientY,Rp=0;Rp<this.lastTouches.length;Rp++){var zp=this.lastTouches[Rp],rm=Math.abs(fp-zp.x),vm=Math.abs(wp-zp.y);if(rm<=im&&vm<=im)return!0}return!1}var vp=Ju(Lu.style,"touchAction"),bp=vp!==Pu,Ip="compute",Up="auto",am="manipulation",sm="none",_m="pan-x",nm="pan-y",Em=qm();function Lm(lp,fp){this.manager=lp,this.set(fp)}Lm.prototype={set:function(lp){lp==Ip&&(lp=this.compute()),bp&&this.manager.element.style&&Em[lp]&&(this.manager.element.style[vp]=lp),this.actions=lp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var lp=[];return Nu(this.manager.recognizers,function(fp){Qu(fp.options.enable,[fp])&&(lp=lp.concat(fp.getTouchAction()))}),Wm(lp.join(" "))},preventDefaults:function(lp){var fp=lp.srcEvent,wp=lp.offsetDirection;if(this.manager.session.prevented){fp.preventDefault();return}var Rp=this.actions,zp=_f(Rp,sm)&&!Em[sm],rm=_f(Rp,nm)&&!Em[nm],vm=_f(Rp,_m)&&!Em[_m];if(zp){var Pm=lp.pointers.length===1,Bm=lp.distance<2,Dm=lp.deltaTime<250;if(Pm&&Bm&&Dm)return}if(!(vm&&rm)&&(zp||rm&&wp&$p||vm&&wp&np))return this.preventSrc(fp)},preventSrc:function(lp){this.manager.session.prevented=!0,lp.preventDefault()}};function Wm(lp){if(_f(lp,sm))return sm;var fp=_f(lp,_m),wp=_f(lp,nm);return fp&&wp?sm:fp||wp?fp?_m:nm:_f(lp,am)?am:Up}function qm(){if(!bp)return!1;var lp={},fp=$u.CSS&&$u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(wp){lp[wp]=fp?$u.CSS.supports("touch-action",wp):!0}),lp}var km=1,Rm=2,Hm=4,Om=8,Fm=Om,$m=16,bm=32;function Cm(lp){this.options=ju({},this.defaults,lp||{}),this.id=ep(),this.manager=null,this.options.enable=Ku(this.options.enable,!0),this.state=km,this.simultaneous={},this.requireFail=[]}Cm.prototype={defaults:{},set:function(lp){return ju(this.options,lp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(lp){if(ku(lp,"recognizeWith",this))return this;var fp=this.simultaneous;return lp=Vm(lp,this),fp[lp.id]||(fp[lp.id]=lp,lp.recognizeWith(this)),this},dropRecognizeWith:function(lp){return ku(lp,"dropRecognizeWith",this)?this:(lp=Vm(lp,this),delete this.simultaneous[lp.id],this)},requireFailure:function(lp){if(ku(lp,"requireFailure",this))return this;var fp=this.requireFail;return lp=Vm(lp,this),Xu(fp,lp)===-1&&(fp.push(lp),lp.requireFailure(this)),this},dropRequireFailure:function(lp){if(ku(lp,"dropRequireFailure",this))return this;lp=Vm(lp,this);var fp=Xu(this.requireFail,lp);return fp>-1&&this.requireFail.splice(fp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(lp){return!!this.simultaneous[lp.id]},emit:function(lp){var fp=this,wp=this.state;function Rp(zp){fp.manager.emit(zp,lp)}wp<Om&&Rp(fp.options.event+Nm(wp)),Rp(fp.options.event),lp.additionalEvent&&Rp(lp.additionalEvent),wp>=Om&&Rp(fp.options.event+Nm(wp))},tryEmit:function(lp){if(this.canEmit())return this.emit(lp);this.state=bm},canEmit:function(){for(var lp=0;lp<this.requireFail.length;){if(!(this.requireFail[lp].state&(bm|km)))return!1;lp++}return!0},recognize:function(lp){var fp=ju({},lp);if(!Qu(this.options.enable,[this,fp])){this.reset(),this.state=bm;return}this.state&(Fm|$m|bm)&&(this.state=km),this.state=this.process(fp),this.state&(Rm|Hm|Om|$m)&&this.tryEmit(fp)},process:function(lp){},getTouchAction:function(){},reset:function(){}};function Nm(lp){return lp&$m?"cancel":lp&Om?"end":lp&Hm?"move":lp&Rm?"start":""}function Um(lp){return lp==Dp?"down":lp==Mp?"up":lp==gp?"left":lp==Ap?"right":""}function Vm(lp,fp){var wp=fp.manager;return wp?wp.get(lp):lp}function Tm(){Cm.apply(this,arguments)}zu(Tm,Cm,{defaults:{pointers:1},attrTest:function(lp){var fp=this.options.pointers;return fp===0||lp.pointers.length===fp},process:function(lp){var fp=this.state,wp=lp.eventType,Rp=fp&(Rm|Hm),zp=this.attrTest(lp);return Rp&&(wp&up||!zp)?fp|$m:Rp||zp?wp&hp?fp|Om:fp&Rm?fp|Hm:Rm:bm}});function Qm(){Tm.apply(this,arguments),this.pX=null,this.pY=null}zu(Qm,Tm,{defaults:{event:"pan",threshold:10,pointers:1,direction:sp},getTouchAction:function(){var lp=this.options.direction,fp=[];return lp&$p&&fp.push(nm),lp&np&&fp.push(_m),fp},directionTest:function(lp){var fp=this.options,wp=!0,Rp=lp.distance,zp=lp.direction,rm=lp.deltaX,vm=lp.deltaY;return zp&fp.direction||(fp.direction&$p?(zp=rm===0?pp:rm<0?gp:Ap,wp=rm!=this.pX,Rp=Math.abs(lp.deltaX)):(zp=vm===0?pp:vm<0?Mp:Dp,wp=vm!=this.pY,Rp=Math.abs(lp.deltaY))),lp.direction=zp,wp&&Rp>fp.threshold&&zp&fp.direction},attrTest:function(lp){return Tm.prototype.attrTest.call(this,lp)&&(this.state&Rm||!(this.state&Rm)&&this.directionTest(lp))},emit:function(lp){this.pX=lp.deltaX,this.pY=lp.deltaY;var fp=Um(lp.direction);fp&&(lp.additionalEvent=this.options.event+fp),this._super.emit.call(this,lp)}});function Km(){Tm.apply(this,arguments)}zu(Km,Tm,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[sm]},attrTest:function(lp){return this._super.attrTest.call(this,lp)&&(Math.abs(lp.scale-1)>this.options.threshold||this.state&Rm)},emit:function(lp){if(lp.scale!==1){var fp=lp.scale<1?"in":"out";lp.additionalEvent=this.options.event+fp}this._super.emit.call(this,lp)}});function Xm(){Cm.apply(this,arguments),this._timer=null,this._input=null}zu(Xm,Cm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Up]},process:function(lp){var fp=this.options,wp=lp.pointers.length===fp.pointers,Rp=lp.distance<fp.threshold,zp=lp.deltaTime>fp.time;if(this._input=lp,!Rp||!wp||lp.eventType&(hp|up)&&!zp)this.reset();else if(lp.eventType&ap)this.reset(),this._timer=Vu(function(){this.state=Fm,this.tryEmit()},fp.time,this);else if(lp.eventType&hp)return Fm;return bm},reset:function(){clearTimeout(this._timer)},emit:function(lp){this.state===Fm&&(lp&&lp.eventType&hp?this.manager.emit(this.options.event+"up",lp):(this._input.timeStamp=Fu(),this.manager.emit(this.options.event,this._input)))}});function Gm(){Tm.apply(this,arguments)}zu(Gm,Tm,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[sm]},attrTest:function(lp){return this._super.attrTest.call(this,lp)&&(Math.abs(lp.rotation)>this.options.threshold||this.state&Rm)}});function Zm(){Tm.apply(this,arguments)}zu(Zm,Tm,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$p|np,pointers:1},getTouchAction:function(){return Qm.prototype.getTouchAction.call(this)},attrTest:function(lp){var fp=this.options.direction,wp;return fp&($p|np)?wp=lp.overallVelocity:fp&$p?wp=lp.overallVelocityX:fp&np&&(wp=lp.overallVelocityY),this._super.attrTest.call(this,lp)&&fp&lp.offsetDirection&&lp.distance>this.options.threshold&&lp.maxPointers==this.options.pointers&&Du(wp)>this.options.velocity&&lp.eventType&hp},emit:function(lp){var fp=Um(lp.offsetDirection);fp&&this.manager.emit(this.options.event+fp,lp),this.manager.emit(this.options.event,lp)}});function Ym(){Cm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}zu(Ym,Cm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[am]},process:function(lp){var fp=this.options,wp=lp.pointers.length===fp.pointers,Rp=lp.distance<fp.threshold,zp=lp.deltaTime<fp.time;if(this.reset(),lp.eventType&ap&&this.count===0)return this.failTimeout();if(Rp&&zp&&wp){if(lp.eventType!=hp)return this.failTimeout();var rm=this.pTime?lp.timeStamp-this.pTime<fp.interval:!0,vm=!this.pCenter||xp(this.pCenter,lp.center)<fp.posThreshold;this.pTime=lp.timeStamp,this.pCenter=lp.center,!vm||!rm?this.count=1:this.count+=1,this._input=lp;var Pm=this.count%fp.taps;if(Pm===0)return this.hasRequireFailures()?(this._timer=Vu(function(){this.state=Fm,this.tryEmit()},fp.interval,this),Rm):Fm}return bm},failTimeout:function(){return this._timer=Vu(function(){this.state=bm},this.options.interval,this),bm},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Fm&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function jm(lp,fp){return fp=fp||{},fp.recognizers=Ku(fp.recognizers,jm.defaults.preset),new Jm(lp,fp)}jm.VERSION="2.0.7",jm.defaults={domEvents:!1,touchAction:Ip,enable:!0,inputTarget:null,inputClass:null,preset:[[Gm,{enable:!1}],[Km,{enable:!1},["rotate"]],[Zm,{direction:$p}],[Qm,{direction:$p},["swipe"]],[Ym],[Ym,{event:"doubletap",taps:2},["tap"]],[Xm]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var iv=1,ev=2;function Jm(lp,fp){this.options=ju({},jm.defaults,fp||{}),this.options.inputTarget=this.options.inputTarget||lp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=lp,this.input=Vp(this),this.touchAction=new Lm(this,this.options.touchAction),tv(this,!0),Nu(this.options.recognizers,function(wp){var Rp=this.add(new wp[0](wp[1]));wp[2]&&Rp.recognizeWith(wp[2]),wp[3]&&Rp.requireFailure(wp[3])},this)}Jm.prototype={set:function(lp){return ju(this.options,lp),lp.touchAction&&this.touchAction.update(),lp.inputTarget&&(this.input.destroy(),this.input.target=lp.inputTarget,this.input.init()),this},stop:function(lp){this.session.stopped=lp?ev:iv},recognize:function(lp){var fp=this.session;if(!fp.stopped){this.touchAction.preventDefaults(lp);var wp,Rp=this.recognizers,zp=fp.curRecognizer;(!zp||zp&&zp.state&Fm)&&(zp=fp.curRecognizer=null);for(var rm=0;rm<Rp.length;)wp=Rp[rm],fp.stopped!==ev&&(!zp||wp==zp||wp.canRecognizeWith(zp))?wp.recognize(lp):wp.reset(),!zp&&wp.state&(Rm|Hm|Om)&&(zp=fp.curRecognizer=wp),rm++}},get:function(lp){if(lp instanceof Cm)return lp;for(var fp=this.recognizers,wp=0;wp<fp.length;wp++)if(fp[wp].options.event==lp)return fp[wp];return null},add:function(lp){if(ku(lp,"add",this))return this;var fp=this.get(lp.options.event);return fp&&this.remove(fp),this.recognizers.push(lp),lp.manager=this,this.touchAction.update(),lp},remove:function(lp){if(ku(lp,"remove",this))return this;if(lp=this.get(lp),lp){var fp=this.recognizers,wp=Xu(fp,lp);wp!==-1&&(fp.splice(wp,1),this.touchAction.update())}return this},on:function(lp,fp){if(lp!==Pu&&fp!==Pu){var wp=this.handlers;return Nu(qu(lp),function(Rp){wp[Rp]=wp[Rp]||[],wp[Rp].push(fp)}),this}},off:function(lp,fp){if(lp!==Pu){var wp=this.handlers;return Nu(qu(lp),function(Rp){fp?wp[Rp]&&wp[Rp].splice(Xu(wp[Rp],fp),1):delete wp[Rp]}),this}},emit:function(lp,fp){this.options.domEvents&&av(lp,fp);var wp=this.handlers[lp]&&this.handlers[lp].slice();if(!(!wp||!wp.length)){fp.type=lp,fp.preventDefault=function(){fp.srcEvent.preventDefault()};for(var Rp=0;Rp<wp.length;)wp[Rp](fp),Rp++}},destroy:function(){this.element&&tv(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function tv(lp,fp){var wp=lp.element;if(!!wp.style){var Rp;Nu(lp.options.cssProps,function(zp,rm){Rp=Ju(wp.style,rm),fp?(lp.oldCssProps[Rp]=wp.style[Rp],wp.style[Rp]=zp):wp.style[Rp]=lp.oldCssProps[Rp]||""}),fp||(lp.oldCssProps={})}}function av(lp,fp){var wp=Tu.createEvent("Event");wp.initEvent(lp,!0,!0),wp.gesture=fp,fp.target.dispatchEvent(wp)}ju(jm,{INPUT_START:ap,INPUT_MOVE:ip,INPUT_END:hp,INPUT_CANCEL:up,STATE_POSSIBLE:km,STATE_BEGAN:Rm,STATE_CHANGED:Hm,STATE_ENDED:Om,STATE_RECOGNIZED:Fm,STATE_CANCELLED:$m,STATE_FAILED:bm,DIRECTION_NONE:pp,DIRECTION_LEFT:gp,DIRECTION_RIGHT:Ap,DIRECTION_UP:Mp,DIRECTION_DOWN:Dp,DIRECTION_HORIZONTAL:$p,DIRECTION_VERTICAL:np,DIRECTION_ALL:sp,Manager:Jm,Input:Np,TouchAction:Lm,TouchInput:Xp,MouseInput:mm,PointerEventInput:gm,TouchMouseInput:om,SingleTouchInput:mp,Recognizer:Cm,AttrRecognizer:Tm,Tap:Ym,Pan:Qm,Swipe:Zm,Pinch:Km,Rotate:Gm,Press:Xm,on:Yu,off:Xc,each:Nu,merge:Uu,extend:Hu,assign:ju,inherit:zu,bindFn:Wu,prefixed:Ju});var ov=typeof $u!="undefined"?$u:typeof self!="undefined"?self:{};ov.Hammer=jm,typeof Pu=="function"&&Pu.amd?Pu(function(){return jm}):_u.exports?_u.exports=jm:$u[Cu]=jm})(window,document,"Hammer")})(hammer);var g$4=Object.defineProperty,s$3=Object.defineProperties,d$5=Object.getOwnPropertyDescriptors,t$1=Object.getOwnPropertySymbols,p$4=Object.prototype.hasOwnProperty,B$6=Object.prototype.propertyIsEnumerable,i$5=(_u,$u,Tu)=>$u in _u?g$4(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,r$3=(_u,$u)=>{for(var Tu in $u||($u={}))p$4.call($u,Tu)&&i$5(_u,Tu,$u[Tu]);if(t$1)for(var Tu of t$1($u))B$6.call($u,Tu)&&i$5(_u,Tu,$u[Tu]);return _u},l$2=(_u,$u)=>s$3(_u,d$5($u));const c$5=1,I$6=new Color(16777215);new Color(6522623);const R$6=new Color(16777215);new Color(6522623);const E$8=6,U$5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",C$2=new TextureLoader().load(U$5),O$7={pointTexture:C$2,pointSize:E$8,lineWidth:c$5,lineColor:I$6,pointColor:R$6,lineRenderOrder:20,pointsRenderOrder:20};l$2(r$3({},O$7),{dashed:!0});var polylineMiterUtil={},add_1=add$1;function add$1(_u,$u,Tu){return _u[0]=$u[0]+Tu[0],_u[1]=$u[1]+Tu[1],_u}var set_1=set$1;function set$1(_u,$u,Tu){return _u[0]=$u,_u[1]=Tu,_u}var normalize_1=normalize$1;function normalize$1(_u,$u){var Tu=$u[0],Cu=$u[1],Pu=Tu*Tu+Cu*Cu;return Pu>0&&(Pu=1/Math.sqrt(Pu),_u[0]=$u[0]*Pu,_u[1]=$u[1]*Pu),_u}var subtract_1=subtract$1;function subtract$1(_u,$u,Tu){return _u[0]=$u[0]-Tu[0],_u[1]=$u[1]-Tu[1],_u}var dot_1=dot$1;function dot$1(_u,$u){return _u[0]*$u[0]+_u[1]*$u[1]}var add=add_1,set=set_1,normalize=normalize_1,subtract=subtract_1,dot=dot_1,tmp=[0,0];polylineMiterUtil.computeMiter=function _u($u,Tu,Cu,Pu,Bu){return add($u,Cu,Pu),normalize($u,$u),set(Tu,-$u[1],$u[0]),set(tmp,-Cu[1],Cu[0]),Bu/dot(Tu,tmp)};polylineMiterUtil.normal=function _u($u,Tu){return set($u,-Tu[1],Tu[0]),$u};polylineMiterUtil.direction=function _u($u,Tu,Cu){return subtract($u,Tu,Cu),normalize($u,$u),$u};var util=polylineMiterUtil,lineA=[0,0],lineB=[0,0],tangent=[0,0],miter=[0,0],polylineNormals=function(_u,$u){var Tu=null,Cu=[];$u&&(_u=_u.slice(),_u.push(_u[0]));for(var Pu=_u.length,Bu=1;Bu<Pu;Bu++){var Lu=_u[Bu-1],Ru=_u[Bu],Ou=Bu<_u.length-1?_u[Bu+1]:null;if(util.direction(lineA,Ru,Lu),Tu||(Tu=[0,0],util.normal(Tu,lineA)),Bu===1&&addNext(Cu,Tu,1),!Ou)util.normal(Tu,lineA),addNext(Cu,Tu,1);else{util.direction(lineB,Ou,Ru);var Du=util.computeMiter(tangent,miter,lineA,lineB,1);addNext(Cu,miter,Du)}}if(_u.length>2&&$u){var Fu=_u[Pu-2],Vu=_u[0],ku=_u[1];util.direction(lineA,Vu,Fu),util.direction(lineB,ku,Vu),util.normal(Tu,lineA);var Nu=util.computeMiter(tangent,miter,lineA,lineB,1);Cu[0][0]=miter.slice(),Cu[Pu-1][0]=miter.slice(),Cu[0][1]=Nu,Cu[Pu-1][1]=Nu,Cu.pop()}return Cu};function addNext(_u,$u,Tu){_u.push([[$u[0],$u[1]],Tu])}const O$6=2,U$4=3,V$5=3,F$5=2;function X$3(_u,$u){var Tu,Cu,Pu;if(_u.length<2)return console.warn("positionList length must be greater than 1"),[];const Bu=(Tu=$u==null?void 0:$u.unitWidth)!=null?Tu:.5,Lu=(Cu=$u==null?void 0:$u.unitHeight)!=null?Cu:.5,Ru=(Pu=$u==null?void 0:$u.skipPanoIndexMesh)!=null?Pu:!1,Ou=new CatmullRomCurve3(_u,!1,"catmullrom",1);if(Ru){const Du=Math.ceil(Ou.getLength()/Lu*1.5),Fu=Ou.getPoints(Du),Vu=[];let ku=0;const Nu=_u;return Nu.forEach((Gu,ju)=>{let Hu=0,Uu=99999999;Fu.forEach((Yu,Xc)=>{const _d=Yu.distanceTo(Gu);_d<Uu&&(Hu=Xc,Uu=_d)});const zu=Fu[Hu+1],Wu=zu==null?void 0:zu.distanceTo(Gu),Qu=Fu[Hu-1],Ku=Qu==null?void 0:Qu.distanceTo(Gu);if(Hu>ku&&Hu-ku>1){let Yu=Hu;Qu!==void 0&&Ku>.8&&(Yu=Hu+1),Qu!==void 0&&Ku>.2&&Ku<.3?Yu=Hu:Uu>.2&&Uu<.3&&(Yu=Hu+1);let Xc=ku;if(zu!==void 0&&Wu>.2&&Wu<.3?Xc=ku+1:Uu>.2&&Uu<.3&&(Xc=ku),Fu[Xc]&&Fu[Xc+1]){const qu=Nu[ju-1];if(qu)if(qu.equals(Fu[Xc]))Xc+=1;else{const Xu=new Vector3().subVectors(Fu[Xc+1],Fu[Xc]),Zu=new Vector3().subVectors(qu,Fu[Xc]);Xu.angleTo(Zu)<Math.PI/2&&(Xc+=1)}}if(Yu<Xc||Yu-Xc<=1)return;const _d=Fu.slice(Xc,Yu),_f=B$5(_d,Bu,Lu);Vu.push(_f),ku=Hu}}),Vu}else{const Du=Math.ceil(Ou.getLength()),Fu=Ou.getPoints(Du);return[B$5(Fu,Bu,Lu)]}}function B$5(_u,$u,Tu){const Cu=$u/2,Pu=Tu/$u,Bu=_u.length,Lu=polylineNormals(_u.map(Hu=>[Hu.x,Hu.z])),Ru=(_u.length-1)*O$6*U$4,Ou=2*Bu,Du=Ou*V$5,Fu=Ou*F$5,Vu=new Uint32Array(Ru),ku=new Float32Array(Du),Nu=new Float32Array(Fu);_u.forEach((Hu,Uu)=>{});let Gu=0;for(let Hu=0;Hu<_u.length;Hu++){const[Uu,zu]=Lu[Hu][0],Wu=_u[Hu],{x:Qu,y:Ku,z:Yu}=Wu,Xc=new Vector3(Qu+Uu*Cu,Ku+.05,Yu+zu*Cu);ku[Hu*6+0]=Xc.x,ku[Hu*6+1]=Xc.y,ku[Hu*6+2]=Xc.z;const _d=new Vector3(Qu-Uu*Cu,Ku+.05,Yu-zu*Cu);ku[Hu*6+3]=_d.x,ku[Hu*6+4]=_d.y,ku[Hu*6+5]=_d.z,Gu+=Hu>0?_u[Hu-1].clone().sub(_u[Hu]).length():0;const _f=Gu/$u/Pu;Nu[Hu*4+0]=0,Nu[Hu*4+1]=_f,Nu[Hu*4+2]=1,Nu[Hu*4+3]=_f,Hu!==_u.length-1&&(Vu[Hu*6+0]=Hu*2+0,Vu[Hu*6+1]=Hu*2+2,Vu[Hu*6+2]=Hu*2+1,Vu[Hu*6+3]=Hu*2+2,Vu[Hu*6+4]=Hu*2+3,Vu[Hu*6+5]=Hu*2+1)}const ju=new BufferGeometry;return ju.setAttribute("position",new BufferAttribute(ku,3)),ju.setAttribute("uv",new BufferAttribute(Nu,2)),ju.setIndex(new BufferAttribute(Vu,1)),ju}function o$4(_u){const $u=new TextureLoader().load(_u.textureUrl);return $u.wrapS=$u.wrapT=RepeatWrapping,$u.encoding=sRGBEncoding,new MeshBasicMaterial({color:16777215,map:$u,transparent:!0,opacity:.8})}function i$4(_u){return _u!=null}var k$2=Object.defineProperty,G$3=Object.getOwnPropertySymbols,x$5=Object.prototype.hasOwnProperty,P$9=Object.prototype.propertyIsEnumerable,m$4=(_u,$u,Tu)=>$u in _u?k$2(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,c$4=(_u,$u)=>{for(var Tu in $u||($u={}))x$5.call($u,Tu)&&m$4(_u,Tu,$u[Tu]);if(G$3)for(var Tu of G$3($u))P$9.call($u,Tu)&&m$4(_u,Tu,$u[Tu]);return _u},d$4=(_u,$u,Tu)=>(m$4(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),u$4=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});const L$6="v1.0.1",S$4="GuideLinePlugin",v$2=`${S$4}@${L$6}`,E$7=_u=>`${v$2}--${_u}`;class I$5 extends e$2{constructor($u,Tu){super($u,Tu),d$4(this,"state",{visible:!1,enabled:!0,disposed:!1}),d$4(this,"data"),d$4(this,"linesGroup"),d$4(this,"disposedErrorLog",()=>{console.error(`${v$2} is disposed`)}),d$4(this,"actionWhenEnabled",Cu=>{if(this.state.enabled)return Cu()}),Object.assign(window,{[`__${S$4}_DEBUG__`]:this})}load($u,Tu,Cu=!0){return u$4(this,null,function*(){const Pu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Bu=yield this.formatData($u);this.hooks.emit("dataChange",Bu,Pu),this.data=Bu,this.linesGroup&&this.five.scene.remove(this.linesGroup);const Lu=this.getLinesGroup(Bu.routes);!Lu||(this.linesGroup=Lu,yield this.waitFiveModelLoaded(),this.five.scene.add(Lu),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),Tu&&this.setState(Tu),this.five.needsRender=!0,this.hooks.emit("dataLoaded",Bu),console.log(`${v$2} loaded`,Bu))})}formatData($u){return u$4(this,null,function*(){return typeof $u=="object"&&$u!==null&&$u.version&&$u.data?$u.data:$u})}show($u){return u$4(this,null,function*(){this.setState({visible:!0},$u)})}hide($u){return u$4(this,null,function*(){this.setState({visible:!1},$u)})}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Tu){var Cu;if(this.state.disposed)return this.disposedErrorLog();const Pu=c$4({},this.state);this.state=c$4(c$4({},this.state),$u),$u.disposed!==void 0&&$u.disposed!==Pu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Pu.visible&&this.handleVisible($u.visible,Tu==null?void 0:Tu.userAction),$u.enabled!==void 0&&$u.enabled!==Pu.enabled&&this.handleEnable($u.enabled,Tu==null?void 0:Tu.userAction),b$4(Pu,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:Pu,userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0}),this.five.needsRender=!0)}handleEnable($u,Tu=!0){this.linesGroup&&($u?(this.five.scene.add(this.linesGroup),this.actionWhenEnabled(()=>this.hooks.emit("enable",{userAction:Tu}))):(this.five.scene.remove(this.linesGroup),this.hooks.emit("disable",{userAction:Tu})))}handleVisible($u,Tu=!0){this.linesGroup&&($u?(this.linesGroup.visible=!0,this.actionWhenEnabled(()=>this.hooks.emit("show",{userAction:Tu}))):(this.linesGroup.visible=!1,this.actionWhenEnabled(()=>this.hooks.emit("hide",{userAction:Tu}))))}handleDispose(){this.linesGroup&&this.five.scene.add(this.linesGroup)}getLinesGroup($u){const Tu=$u.map(this.getLine.bind(this)).filter(i$4),Cu=new Group$1;if(Cu.name=E$7("route-group"),Tu.length!==0)return Cu.add(...Tu),Cu}getLine($u){var Tu,Cu,Pu,Bu;const Lu=new Group$1,Ru=$u.panoIndexList.map(Fu=>{var Vu;return(Vu=this.five.work.observers[Fu])==null?void 0:Vu.standingPosition}).filter(i$4),Ou=X$3(Ru,{skipPanoIndexMesh:(Tu=$u.skipPanoIndexMesh)!=null?Tu:!0,unitWidth:(Cu=$u.unitWidth)!=null?Cu:.6,unitHeight:(Pu=$u.unitHeight)!=null?Pu:.4});if(!Ou)return;const Du=o$4({textureUrl:(Bu=$u.arrowTextureUrl)!=null?Bu:this.staticPrefix+"/release/web/arrow6.b6ce0c62.png"});return Ou.forEach(Fu=>{const Vu=new Mesh(Fu,Du);Vu.name=E$7("route-line-mesh"),Lu.add(Vu)}),Lu}waitFiveModelLoaded(){return u$4(this,null,function*(){return new Promise($u=>{if(this.five.model.loaded){$u();return}this.five.once("modelLoaded",()=>{$u()})})})}}d$4(I$5,"lasestVersion",L$6);const c$3=(_u,$u)=>new I$5(_u,$u);function n$5(_u){const $u=Math.abs(Math.cos(_u.latitude));return new Vector3(-Math.sin(_u.longitude)*$u,-Math.sin(_u.latitude),-Math.cos(_u.longitude)*$u)}function s$2(_u,$u){const Tu=n$5(_u),Cu=n$5($u);return Tu.angleTo(Cu)}var l$1=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});const p$3=_u=>l$1(void 0,null,function*(){try{_u().then(()=>{},()=>{}).catch(()=>{})}catch{}}),n$4=Math.PI*2;function o$3(_u){return _u>=0&&_u<n$4?_u:(_u%n$4+n$4)%n$4}function n$3(_u){return{longitude:o$3(-Math.atan2(_u.x,-_u.z)),latitude:-Math.asin(_u.y/1)}}function u$3(_u,$u,Tu,Cu){const Pu=-_u/Tu,Bu=_u;return Pu*Cu+Bu}function n$2(_u){return new Promise($u=>{setTimeout(()=>{$u()},_u)})}var G$2=Object.defineProperty,K$5=Object.defineProperties,U$3=Object.getOwnPropertyDescriptors,E$6=Object.getOwnPropertySymbols,T$2=Object.prototype.hasOwnProperty,A$5=Object.prototype.propertyIsEnumerable,x$4=(_u,$u,Tu)=>$u in _u?G$2(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,P$8=(_u,$u)=>{for(var Tu in $u||($u={}))T$2.call($u,Tu)&&x$4(_u,Tu,$u[Tu]);if(E$6)for(var Tu of E$6($u))A$5.call($u,Tu)&&x$4(_u,Tu,$u[Tu]);return _u},L$5=(_u,$u)=>K$5(_u,U$3($u)),S$3=(_u,$u,Tu)=>(x$4(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),g$3=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});const M$6="v1.0.6",D$2="CruisePlugin",w$3=`${D$2}@${M$6}`,F$4=()=>{console.error(`${w$3} is disposed`)},J$4=()=>{console.warn(`${w$3} is disabled`)},q$5=()=>{console.error(`${w$3} is disabled`)},C$1=new Map;class B$4 extends e$2{constructor($u,Tu){super($u,Tu),S$3(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),S$3(this,"data"),S$3(this,"config"),S$3(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,disposers:[],modeChanging:!1}),S$3(this,"GuideLine"),this.config=Tu,Object.assign(window,{[`__${D$2}_DEBUG__`]:this});const Cu=this.setFiveLinearUpdateCamera.bind(this),Pu=this.setFiveOriginUpdateCamera.bind(this);this.hooks.on("play",Cu),this.hooks.on("broke",Pu),this.hooks.on("end",Pu),this.hooks.on("pause",Pu),this.privateState.disposers.push(()=>{this.hooks.off("play",Cu),this.hooks.off("broke",Pu),this.hooks.off("end",Pu),this.hooks.off("pause",Pu)})}load($u,Tu,Cu){return g$3(this,null,function*(){var Pu,Bu,Lu,Ru,Ou;if(this.state.disposed)return F$4();this.privateState.fiveOriginGetProgress||(Bu=(Pu=this.five.controller)==null?void 0:Pu.cameraMotion)!=null&&Bu.getProgress||(yield this.waitFiveLoaded(),this.privateState.fiveOriginGetProgress=(Ru=(Lu=this.five.controller)==null?void 0:Lu.cameraMotion)==null?void 0:Ru.getProgress),this.clear();const Du=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Fu=yield this.formatData($u);this.data=Fu,this.hooks.emit("dataChange",Fu,Du);let Vu=[],ku;const Nu=this.data.keyframes.filter(Gu=>Gu.data.panoIndex!==void 0);Nu.filter((Gu,ju)=>{var Hu;return Gu.data.panoIndex!==((Hu=Nu[ju-1])==null?void 0:Hu.data.panoIndex)}).map(Gu=>Gu.data.panoIndex).forEach(Gu=>{var ju,Hu;const Uu=(ju=this.five.work.observers[Gu])==null?void 0:ju.floorIndex;if(Uu!==void 0)if(ku===Uu){const zu=Vu.length-1;Vu[zu]=[...(Hu=Vu[zu])!=null?Hu:[],Gu]}else{ku=Uu;const zu=Vu.length;Vu[zu]=[Gu]}}),this.GuideLine||(this.GuideLine=c$3(this.five,this.config)),(Ou=this.GuideLine)==null||Ou.load({routes:Vu.map(Gu=>({panoIndexList:Gu}))}),this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed),Tu&&this.setState(Tu,{userAction:Cu}),console.log(`${w$3} loaded`,Fu),this.hooks.emit("dataLoaded",Fu)})}play($u){this.setState({playing:!0},$u)}playFrom($u){const{index:Tu,id:Cu,userAction:Pu}=$u;this.state.playing&&this.setState({playing:!1},{userAction:Pu}),this.setState({playing:!0},{userAction:Pu,playFromIndex:Tu,playFromId:Cu})}playFromStart($u){return this.playFrom(L$5(P$8({},$u),{index:0}))}pause($u){this.setState({playing:!1},$u)}show($u){return g$3(this,null,function*(){this.setState({visible:!0},$u)})}hide($u){return g$3(this,null,function*(){this.setState({visible:!1},$u)})}enable($u){this.setState({enabled:!0},$u)}disable($u){this.setState({enabled:!1},$u)}dispose(){this.setState({disposed:!0})}setState($u,Tu){var Cu;if(this.state.disposed)return F$4();if(!this.state.enabled&&$u.enabled!==!0&&$u.disposed!==!0)return q$5();const Pu=P$8({},this.state);this.state=P$8(P$8({},this.state),$u),$u.disposed!==void 0&&$u.disposed!==Pu.disposed&&$u.disposed&&this.handleDispose(),$u.visible!==void 0&&$u.visible!==Pu.visible&&this.handleVisible($u.visible,Tu==null?void 0:Tu.userAction),$u.enabled!==void 0&&$u.enabled!==Pu.enabled&&this.handleEnable($u.enabled,Tu==null?void 0:Tu.userAction),$u.playing!==void 0&&$u.playing!==Pu.playing&&this.changePlayState($u.playing,Tu),$u.speed!==void 0&&$u.speed!==Pu.speed&&this.changeSpeed($u.speed,Tu==null?void 0:Tu.userAction),b$4(Pu,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:Pu,userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0})}formatData($u){return g$3(this,null,function*(){this.five.work||(yield this.waitFiveLoaded());const Tu=this.five.work.observers,Cu=(()=>{const Pu=$u;return typeof Pu=="object"&&Pu!==null&&Pu.version&&Pu.data?Pu.data:Pu})();if(Cu.keyframes)return{keyframesId:r$7(),keyframes:Cu.keyframes.map((Pu,Bu)=>{var Lu;const Ru=Cu.keyframes[Bu+1],Ou=(()=>!Ru||Ru.start===void 0||Pu.end===void 0?0:Ru.start-Pu.end)();return P$8({id:(Lu=Pu.uuid)!=null?Lu:r$7(),moveIndex:Bu,stay:Ou,index:Bu},Pu)})};if(Cu.panoIndexList){let Pu=[];const{moveEffect:Bu,moveToFirstPanoEffect:Lu}=Cu;return this.privateState.moveToFirstPanoEffect=Lu,Cu.panoIndexList.forEach((Ru,Ou)=>{const Du=(()=>{var Fu,Vu,ku,Nu;const Gu=Cu.panoIndexList.slice(Ou).find(zu=>zu!==Ru);if(Gu===void 0)return;const ju=(Fu=Tu[Ru])==null?void 0:Fu.position,Hu=(Vu=Tu[Gu])==null?void 0:Vu.position;if(!Hu||!ju||((ku=Tu[Ru])==null?void 0:ku.floorIndex)!==((Nu=Tu[Gu])==null?void 0:Nu.floorIndex))return;const Uu=new Vector3().subVectors(Hu,ju);return n$3(Uu)})();Cu.moveType===void 0||Cu.moveType==="justMove"?Pu.push({moveIndex:Ou,stay:Cu.stay,data:P$8({effect:"Move",panoIndex:Ru,moveEffect:Bu},Du!=null?Du:{})}):Cu.moveType==="moveAndRotate"&&(Pu.push({moveIndex:Ou,stay:Cu.stay,data:{effect:"Move",panoIndex:Ru,moveEffect:Bu}}),Du&&Pu.push({moveIndex:Ou,stay:Cu.stay,data:P$8({effect:"Rotate",panoIndex:Ru},Du)}))}),{keyframesId:r$7(),keyframes:Pu.map((Ru,Ou)=>P$8({id:r$7(),index:Ou},Ru))}}else throw new Error("format error: data no keyframes or no panoIndexList")})}handleEnable($u,Tu=!0){var Cu,Pu;$u?((Cu=this.GuideLine)==null||Cu.enable(),this.hooks.emit("enable",{userAction:Tu})):((Pu=this.GuideLine)==null||Pu.disable(),this.changePlayState(!1,{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})),this.state.enabled=$u}handleVisible($u,Tu=!0){var Cu,Pu;$u?((Cu=this.GuideLine)==null||Cu.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:Tu}))):((Pu=this.GuideLine)==null||Pu.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:Tu}))),this.state.visible=$u}changePlayState($u,Tu){this.actionIfStateIsEnabled(()=>{var Cu;return this.hooks.emit("playStateChange",$u?"playing":"pause",{userAction:(Cu=Tu==null?void 0:Tu.userAction)!=null?Cu:!0})}),$u?this.handlePlay(Tu):this.handlePause(Tu),this.state.playing=$u}handlePlay($u){return g$3(this,null,function*(){var Tu;const{data:Cu,state:Pu,privateState:Bu,hooks:Lu}=this;if(Bu.playing||!(Cu!=null&&Cu.keyframes)||(Cu==null?void 0:Cu.keyframes.length)===0)return;const Ru=r$7();Bu.playId=Ru,Bu.playing=!0,Bu.broke=!1;const Ou=Cu.keyframes,Du=this.getPauseData();($u==null?void 0:$u.notEmitEvent)!==!0&&Lu.emit("play",{userAction:(Tu=$u==null?void 0:$u.userAction)!=null?Tu:!0});let Fu=!1;const Vu=yield(()=>g$3(this,null,function*(){var ku,Nu;if(($u==null?void 0:$u.playFromIndex)!==void 0)return $u.playFromIndex;if(($u==null?void 0:$u.playFromId)!==void 0)return(ku=this.data)==null?void 0:ku.keyframes.findIndex(Gu=>Gu.id===$u.playFromId);if(Du!=null&&Du.keyframeId){const Gu=(Nu=this.data)==null?void 0:Nu.keyframes.find(ju=>ju.id===Du.keyframeId);if(Du!=null&&Du.fiveState&&(yield this.move(Du.fiveState,{moveEffect:Bu.moveToFirstPanoEffect})),Gu){if(Gu.data.effect==="Move")return Gu.index;if(Gu.data.effect==="Rotate"){const ju=Du.duration!==void 0?Du.duration*(1-Du.playedProgress):void 0;return yield this.playKeyframe(Gu,{duration:ju}),Fu=!0,Gu.index+1}}}}))();this.clearPauseData();for(const ku of Ou){if(Bu.broke||!Pu.playing||!Bu.playing||Ru!==Bu.playId)return;if(!(Vu!==void 0&&ku.index<Vu))try{Lu.emit("playIndexChange",ku.index,ku),yield this.playKeyframe(ku,{moveEffect:Fu===!1?Bu.moveToFirstPanoEffect:void 0,duration:800}),ku.stay&&(yield n$2(ku.stay)),Fu===!1&&(Fu=!0)}catch{return Promise.resolve("broke")}}Pu.playing&&Ru===Bu.playId&&(this.setState({playing:!1},{userAction:!1}),Lu.emit("end"),this.clearPauseData())})}handlePause($u){var Tu;const{state:Cu,privateState:Pu,hooks:Bu}=this;Cu.playing=!1,Pu.playing!==!1&&(Pu.playing=!1,this.setPauseData(),Pu.broke||this.forceInteruptUpdateCamera(),($u==null?void 0:$u.notEmitEvent)!==!0&&Bu.emit("pause",{userAction:(Tu=$u==null?void 0:$u.userAction)!=null?Tu:!0}))}playKeyframe($u,Tu){return g$3(this,null,function*(){var Cu;const{privateState:Pu}=this;return((Cu=this.privateState.currentPlayKeyframe)==null?void 0:Cu.keyframe.id)!==$u.id&&(this.privateState.currentPlayKeyframe={keyframe:$u}),Pu.currentPlayQueue.push(this.getPlayPromise($u,Tu)),this.actionPromiseQueue()})}addInterruptListener($u){const Tu=()=>{this.privateState.modeChanging||$u()},Cu=$u;return this.five.once("gesture",Cu),this.five.once("wantsChangeMode",Tu),()=>{this.five.off("gesture",Cu),this.five.once("wantsChangeMode",Tu)}}getPlayPromise($u,Tu){return g$3(this,null,function*(){const Cu=$u.data;if((Tu==null?void 0:Tu.duration)!=null||$u.start!==void 0&&$u.end!==void 0&&$u.end-$u.start,!!Cu)return new Promise((Pu,Bu)=>{let Lu=!1;this.addInterruptListener(()=>{if(!Lu)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),Lu=!0,Bu(new Error("play is interupted"))});try{if(Lu)return;const Ru=()=>{Pu(),Lu=!0};switch(Cu.effect){case"Move":this.move(Cu,Tu).then(Ru);break;case"Rotate":this.rotate(Cu,Tu).then(Ru);break;default:this.rotate(Cu,Tu).then(Ru)}}catch{}})})}actionPromiseQueue(){return g$3(this,null,function*(){const{privateState:$u}=this;return new Promise((Tu,Cu)=>{if($u.currentPlayQueue.length===0){Tu();return}const Pu=$u.currentPlayQueue.shift();if(!Pu){Tu();return}Pu.then(Tu,Cu)}).then(()=>$u.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())})}move($u,Tu){return g$3(this,null,function*(){if($u.mode&&$u.mode!==this.five.currentMode)yield this.changeMode($u);else if($u.panoIndex!==this.five.panoIndex)yield this.changePano($u,Tu);else return Promise.resolve()})}rotate($u,Tu){return g$3(this,null,function*(){if($u.mode&&$u.mode!==this.five.currentMode)yield this.changeMode({mode:$u.mode,panoIndex:$u.panoIndex});else if($u.panoIndex&&$u.panoIndex!==this.five.panoIndex)return yield this.changePano($u,Tu);yield this.updateCamera($u,Tu==null?void 0:Tu.duration)})}updateCamera($u,Tu=800){return g$3(this,null,function*(){const{five:Cu,privateState:Pu,state:Bu}=this;let Lu=Tu;const Ru=(()=>{var Du,Fu;const Vu=(Du=Bu.config)==null?void 0:Du.speedConfig,ku=(Fu=$u.rotateSpeed)!=null?Fu:Vu==null?void 0:Vu.rotateSpeed;if((Vu==null?void 0:Vu.rotateSpeedUnit)===void 0)return ku;if(ku!==void 0)return Vu.rotateSpeedUnit==="rad/ms"?ku:ku/1e3})();if(Ru){const Du=this.five.getCurrentState();Lu=s$2(Du,$u)/Ru}Pu.currentPlayKeyframe&&(Pu.currentPlayKeyframe.originDuration=Lu);const Ou=this.getSpeededDuration(Lu);return new Promise(Du=>{p$3(()=>Cu.updateCamera($u,Ou)),setTimeout(()=>Du(),Ou)})})}changePano($u,Tu){return g$3(this,null,function*(){var Cu;const{five:Pu,privateState:Bu,state:Lu}=this;if(typeof $u.panoIndex!="number"||$u.panoIndex===Pu.panoIndex)return;Pu.getCurrentState().mode;const Ru=Pu.getCurrentState().mode!=="Panorama";Ru&&(this.privateState.modeChanging=!0);let Ou=(Cu=Tu==null?void 0:Tu.duration)!=null?Cu:800;const Du=(()=>{var Vu,ku;const Nu=(Vu=Lu.config)==null?void 0:Vu.speedConfig,Gu=(ku=$u.moveSpeed)!=null?ku:Nu==null?void 0:Nu.moveSpeed;if((Nu==null?void 0:Nu.moveSpeedUnit)===void 0)return Gu;if(Gu!==void 0)return Nu.moveSpeedUnit==="m/ms"?Gu:Gu/1e3})();if(Du&&typeof Pu.panoIndex=="number"&&typeof $u.panoIndex=="number"){const Vu=Pu.work.observers[Pu.panoIndex].position,ku=Pu.work.observers[$u.panoIndex].position;Ou=Vu.distanceTo(ku)/Du}Bu.currentPlayKeyframe&&(Bu.currentPlayKeyframe.originDuration=Ou);const Fu=this.getSpeededDuration(Ou);yield new Promise(Vu=>{var ku,Nu,Gu;Pu.moveToPano($u.panoIndex,{latitude:$u.latitude,longitude:$u.longitude,fov:$u.fov,duration:Fu,effect:(Gu=(Nu=Tu==null?void 0:Tu.moveEffect)!=null?Nu:(ku=this.state.config)==null?void 0:ku.moveEffect)!=null?Gu:$u.moveEffect,moveCancelCallback:()=>Vu(),moveEndCallback:()=>Vu()}),Ru&&Pu.once("panoArrived",()=>Vu())}),Ru&&(this.privateState.modeChanging=!1)})}changeSpeed($u,Tu=!0){const{state:Cu,privateState:Pu,hooks:Bu}=this,{currentPlayKeyframe:Lu}=Pu;if(Bu.emit("speedChange",$u,{userAction:Tu}),Cu.playing&&Lu)try{const Ru=Lu.originDuration!==void 0?Lu.originDuration*(1-this.getProgress()):void 0,Ou=this.playKeyframe(Lu.keyframe,{duration:Ru});Pu.currentPlayQueue.push(Ou)}catch{}}getSpeededDuration($u){return $u/this.state.speed}getProgress(){return this.five.controller.cameraMotion.progress}changeMode($u,Tu){return g$3(this,null,function*(){$u.mode&&$u.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,yield this.five.changeMode($u.mode,$u,Tu),this.privateState.modeChanging=!1)})}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var $u,Tu;if(($u=this.data)!=null&&$u.keyframesId)return C$1.get((Tu=this.data)==null?void 0:Tu.keyframesId)}setPauseData(){var $u,Tu,Cu,Pu;if(($u=this.data)!=null&&$u.keyframesId)return C$1.set((Tu=this.data)==null?void 0:Tu.keyframesId,{keyframeId:(Cu=this.privateState.currentPlayKeyframe)==null?void 0:Cu.keyframe.id,fiveState:this.five.getCurrentState(),duration:(Pu=this.privateState.currentPlayKeyframe)==null?void 0:Pu.originDuration,playedProgress:this.getProgress()})}clearPauseData(){var $u,Tu;if(($u=this.data)!=null&&$u.keyframesId)return C$1.delete((Tu=this.data)==null?void 0:Tu.keyframesId)}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}handleDispose(){var $u,Tu;this.setState({playing:!1}),this.clearPauseData(),this.clear(),($u=this.GuideLine)==null||$u.dispose(),this.GuideLine=void 0,(Tu=this.privateState.disposers)==null||Tu.forEach(Cu=>Cu==null?void 0:Cu())}actionIfStateIsEnabled($u,Tu){if(this.state.enabled)return $u();Tu!=null&&Tu.warnLog&&J$4()}waitFiveLoaded(){return g$3(this,null,function*(){return new Promise($u=>{if(this.five.work){$u();return}this.five.once("loaded",()=>{$u()})})})}setFiveLinearUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=$u=>{const Tu=this.five.controller.cameraMotion,Cu=$u-Tu.startTime;return Cu<0?0:Cu>=Tu.duration?1:1-u$3(1,Tu.startVelocity,Tu.duration,Cu)})}setFiveOriginUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=this.privateState.fiveOriginGetProgress)}}S$3(B$4,"PluginVersion",M$6);var objectAssignDeep={exports:{}};function getTypeOf(_u){return _u===null?"null":typeof _u=="undefined"?"undefined":typeof _u=="object"?Array.isArray(_u)?"array":"object":typeof _u}function cloneValue(_u){return getTypeOf(_u)==="object"?quickCloneObject(_u):getTypeOf(_u)==="array"?quickCloneArray(_u):_u}function quickCloneArray(_u){return _u.map(cloneValue)}function quickCloneObject(_u){const $u={};for(const Tu in _u)!_u.hasOwnProperty(Tu)||($u[Tu]=cloneValue(_u[Tu]));return $u}function executeDeepMerge(_u,$u=[],Tu={}){const Cu={arrayBehaviour:Tu.arrayBehaviour||"replace"},Pu=$u.map(Lu=>Lu||{}),Bu=_u||{};for(let Lu=0;Lu<Pu.length;Lu++){const Ru=Pu[Lu],Ou=Object.keys(Ru);for(let Du=0;Du<Ou.length;Du++){const Fu=Ou[Du],Vu=Ru[Fu],ku=getTypeOf(Vu),Nu=getTypeOf(Bu[Fu]);if(ku==="object")if(Nu!=="undefined"){const Gu=Nu==="object"?Bu[Fu]:{};Bu[Fu]=executeDeepMerge({},[Gu,quickCloneObject(Vu)],Cu)}else Bu[Fu]=quickCloneObject(Vu);else if(ku==="array")if(Nu==="array"){const Gu=quickCloneArray(Vu);Bu[Fu]=Cu.arrayBehaviour==="merge"?Bu[Fu].concat(Gu):Gu}else Bu[Fu]=quickCloneArray(Vu);else Bu[Fu]=Vu}}return Bu}objectAssignDeep.exports=function _u($u,...Tu){return executeDeepMerge($u,Tu)};objectAssignDeep.exports.noMutate=function _u(...$u){return executeDeepMerge({},$u)};objectAssignDeep.exports.withOptions=function _u($u,Tu,Cu){return executeDeepMerge($u,Tu,Cu)};var m$3=objectAssignDeep.exports;const e$1=_u=>_u;var r$2=(_u=>(_u.Two="2D",_u.Three="3D",_u))(r$2||{}),g$2=(_u=>(_u.PointTag="PointTag",_u.PlaneTag="PlaneTag",_u))(g$2||{}),i$3=(_u=>(_u.Audio="Audio",_u.Text="Text",_u.ImageText="ImageText",_u.Link="Link",_u.Marketing="Marketing",_u.MediaPlane="MediaPlane",_u.Custom="Custom",_u))(i$3||{}),u$2=(_u=>(_u.VrLink="vr",_u.NormalLink="normal",_u))(u$2||{});function q$4(_u){Ut(_u,"svelte-1omzoh4",".straight-line.svelte-1omzoh4{display:block;width:100%;height:100%;overflow:visible}")}function m$2(_u){let $u,Tu,Cu,Pu;return{c(){$u=kt("path"),Et($u,"fill","none"),Et($u,"stroke","url(#"+_u[4]+")"),Et($u,"stroke-width","1"),Et($u,"d","M0 0.5 L 148 0.5")},m(Bu,Lu){vt(Bu,$u,Lu),Pu=!0},p(Bu,Lu){_u=Bu},i(Bu){Pu||(Bu&&j$3(()=>{Cu&&Cu.end(1),Tu=he$1($u,k$3,{duration:_u[1],delay:_u[0]}),Tu.start()}),Pu=!0)},o(Bu){Tu&&Tu.invalidate(),Bu&&(Cu=_e$1($u,k$3,{duration:_u[1],delay:_u[2]})),Pu=!1},d(Bu){Bu&&H$4($u),Bu&&Cu&&Cu.end()}}}function A$4(_u){let $u,Tu,Cu,Pu,Bu,Lu=_u[3]&&m$2(_u);return{c(){$u=kt("svg"),Tu=kt("defs"),Cu=kt("linearGradient"),Pu=kt("stop"),Bu=kt("stop"),Lu&&Lu.c(),Et(Pu,"offset","25%"),Et(Pu,"stop-color","white"),Et(Pu,"stop-opacity","1"),Et(Bu,"offset","100%"),Et(Bu,"stop-color","white"),Et(Bu,"stop-opacity","0.5"),Et(Cu,"id",_u[4]),Et(Cu,"gradientUnits","userSpaceOnUse"),Et($u,"class","straight-line svelte-1omzoh4"),Et($u,"viewBox","0 0 148 1"),Et($u,"preserveAspectRatio","none")},m(Ru,Ou){vt(Ru,$u,Ou),ut($u,Tu),ut(Tu,Cu),ut(Cu,Pu),ut(Cu,Bu),Lu&&Lu.m($u,null)},p(Ru,[Ou]){Ru[3]?Lu?(Lu.p(Ru,Ou),Ou&8&&gt(Lu,1)):(Lu=m$2(Ru),Lu.c(),gt(Lu,1),Lu.m($u,null)):Lu&&(ae$5(),jt(Lu,1,1,()=>{Lu=null}),de$2())},i(Ru){gt(Lu)},o(Ru){jt(Lu)},d(Ru){Ru&&H$4($u),Lu&&Lu.d()}}}function B$3(_u,$u,Tu){let{inDelay:Cu=0}=$u,{duration:Pu=0}=$u,{outDelay:Bu=0}=$u,{unfolded:Lu}=$u;const Ru=r$7();return _u.$$set=Ou=>{"inDelay"in Ou&&Tu(0,Cu=Ou.inDelay),"duration"in Ou&&Tu(1,Pu=Ou.duration),"outDelay"in Ou&&Tu(2,Bu=Ou.outDelay),"unfolded"in Ou&&Tu(3,Lu=Ou.unfolded)},[Cu,Pu,Bu,Lu,Ru]}class M$5 extends be$1{constructor($u){super(),xe(this,$u,B$3,A$4,Dt,{inDelay:0,duration:1,outDelay:2,unfolded:3},q$4)}}function J$3(_u){Ut(_u,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function k$1(_u){let $u,Tu,Cu,Pu,Bu;return{c(){$u=I$8("div"),Et($u,"class","shadow svelte-faoauy"),Et($u,"style",Tu=`
      left:${o$2(_u[5])};
      bottom:${o$2(_u[6])};
      box-shadow: 0 0 ${o$2(_u[10])} ${o$2(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),Yt($u,"width",o$2(_u[3])),Yt($u,"height",o$2(_u[4])),Yt($u,"z-index",_u[13])},m(Lu,Ru){vt(Lu,$u,Ru),Bu=!0},p(Lu,Ru){_u=Lu,(!Bu||Ru&8160&&Tu!==(Tu=`
      left:${o$2(_u[5])};
      bottom:${o$2(_u[6])};
      box-shadow: 0 0 ${o$2(_u[10])} ${o$2(_u[11])} rgba(0, 0, 0, ${_u[12]});
      ${_u[8]?"transform: translateX(-50%); left: 50%":""}
      ${_u[9]?"transform: translateX(-50%); top: 50%":""}
      ${_u[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&Et($u,"style",Tu),Ru&8&&Yt($u,"width",o$2(_u[3])),Ru&16&&Yt($u,"height",o$2(_u[4])),Ru&8192&&Yt($u,"z-index",_u[13])},i(Lu){Bu||(Lu&&j$3(()=>{Pu&&Pu.end(1),Cu=he$1($u,b$3,{duration:_u[0]}),Cu.start()}),Bu=!0)},o(Lu){Cu&&Cu.invalidate(),Lu&&(Pu=_e$1($u,b$3,{duration:_u[1]})),Bu=!1},d(Lu){Lu&&H$4($u),Lu&&Pu&&Pu.end()}}}function K$4(_u){let $u,Tu=_u[2]&&k$1(_u);return{c(){Tu&&Tu.c(),$u=Kt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),vt(Cu,$u,Pu)},p(Cu,[Pu]){Cu[2]?Tu?(Tu.p(Cu,Pu),Pu&4&&gt(Tu,1)):(Tu=k$1(Cu),Tu.c(),gt(Tu,1),Tu.m($u.parentNode,$u)):Tu&&(ae$5(),jt(Tu,1,1,()=>{Tu=null}),de$2())},i(Cu){gt(Tu)},o(Cu){jt(Tu)},d(Cu){Tu&&Tu.d(Cu),Cu&&H$4($u)}}}function o$2(_u){return typeof _u=="number"?_u/16+"rem":_u}function L$4(_u,$u,Tu){let{inDelay:Cu=1e3}=$u,{outDelay:Pu=1e3}=$u,{visible:Bu=!0}=$u,{width:Lu=0}=$u,{height:Ru=0}=$u,{left:Ou=0}=$u,{bottom:Du=0}=$u,{center:Fu=!1}=$u,{horizontalCenter:Vu=!1}=$u,{verticalCenter:ku=!1}=$u,{blurRadius:Nu}=$u,{spreadRadius:Gu}=$u,{opacity:ju=.15}=$u,{zIndex:Hu=void 0}=$u;return _u.$$set=Uu=>{"inDelay"in Uu&&Tu(0,Cu=Uu.inDelay),"outDelay"in Uu&&Tu(1,Pu=Uu.outDelay),"visible"in Uu&&Tu(2,Bu=Uu.visible),"width"in Uu&&Tu(3,Lu=Uu.width),"height"in Uu&&Tu(4,Ru=Uu.height),"left"in Uu&&Tu(5,Ou=Uu.left),"bottom"in Uu&&Tu(6,Du=Uu.bottom),"center"in Uu&&Tu(7,Fu=Uu.center),"horizontalCenter"in Uu&&Tu(8,Vu=Uu.horizontalCenter),"verticalCenter"in Uu&&Tu(9,ku=Uu.verticalCenter),"blurRadius"in Uu&&Tu(10,Nu=Uu.blurRadius),"spreadRadius"in Uu&&Tu(11,Gu=Uu.spreadRadius),"opacity"in Uu&&Tu(12,ju=Uu.opacity),"zIndex"in Uu&&Tu(13,Hu=Uu.zIndex)},[Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu]}class P$7 extends be$1{constructor($u){super(),xe(this,$u,L$4,K$4,Dt,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},J$3)}}var defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(_u,$u,Tu){return Math.min(Math.max(_u,$u),Tu)}function stringContains(_u,$u){return _u.indexOf($u)>-1}function applyArguments(_u,$u){return _u.apply(null,$u)}var is$1={arr:function(_u){return Array.isArray(_u)},obj:function(_u){return stringContains(Object.prototype.toString.call(_u),"Object")},pth:function(_u){return is$1.obj(_u)&&_u.hasOwnProperty("totalLength")},svg:function(_u){return _u instanceof SVGElement},inp:function(_u){return _u instanceof HTMLInputElement},dom:function(_u){return _u.nodeType||is$1.svg(_u)},str:function(_u){return typeof _u=="string"},fnc:function(_u){return typeof _u=="function"},und:function(_u){return typeof _u=="undefined"},nil:function(_u){return is$1.und(_u)||_u===null},hex:function(_u){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(_u)},rgb:function(_u){return/^rgb/.test(_u)},hsl:function(_u){return/^hsl/.test(_u)},col:function(_u){return is$1.hex(_u)||is$1.rgb(_u)||is$1.hsl(_u)},key:function(_u){return!defaultInstanceSettings.hasOwnProperty(_u)&&!defaultTweenSettings.hasOwnProperty(_u)&&_u!=="targets"&&_u!=="keyframes"}};function parseEasingParameters(_u){var $u=/\(([^)]+)\)/.exec(_u);return $u?$u[1].split(",").map(function(Tu){return parseFloat(Tu)}):[]}function spring(_u,$u){var Tu=parseEasingParameters(_u),Cu=minMax(is$1.und(Tu[0])?1:Tu[0],.1,100),Pu=minMax(is$1.und(Tu[1])?100:Tu[1],.1,100),Bu=minMax(is$1.und(Tu[2])?10:Tu[2],.1,100),Lu=minMax(is$1.und(Tu[3])?0:Tu[3],.1,100),Ru=Math.sqrt(Pu/Cu),Ou=Bu/(2*Math.sqrt(Pu*Cu)),Du=Ou<1?Ru*Math.sqrt(1-Ou*Ou):0,Fu=1,Vu=Ou<1?(Ou*Ru+-Lu)/Du:-Lu+Ru;function ku(Gu){var ju=$u?$u*Gu/1e3:Gu;return Ou<1?ju=Math.exp(-ju*Ou*Ru)*(Fu*Math.cos(Du*ju)+Vu*Math.sin(Du*ju)):ju=(Fu+Vu*ju)*Math.exp(-ju*Ru),Gu===0||Gu===1?Gu:1-ju}function Nu(){var Gu=cache.springs[_u];if(Gu)return Gu;for(var ju=1/6,Hu=0,Uu=0;;)if(Hu+=ju,ku(Hu)===1){if(Uu++,Uu>=16)break}else Uu=0;var zu=Hu*ju*1e3;return cache.springs[_u]=zu,zu}return $u?ku:Nu}function steps(_u){return _u===void 0&&(_u=10),function($u){return Math.ceil(minMax($u,1e-6,1)*_u)*(1/_u)}}var bezier=function(){var _u=11,$u=1/(_u-1);function Tu(Fu,Vu){return 1-3*Vu+3*Fu}function Cu(Fu,Vu){return 3*Vu-6*Fu}function Pu(Fu){return 3*Fu}function Bu(Fu,Vu,ku){return((Tu(Vu,ku)*Fu+Cu(Vu,ku))*Fu+Pu(Vu))*Fu}function Lu(Fu,Vu,ku){return 3*Tu(Vu,ku)*Fu*Fu+2*Cu(Vu,ku)*Fu+Pu(Vu)}function Ru(Fu,Vu,ku,Nu,Gu){var ju,Hu,Uu=0;do Hu=Vu+(ku-Vu)/2,ju=Bu(Hu,Nu,Gu)-Fu,ju>0?ku=Hu:Vu=Hu;while(Math.abs(ju)>1e-7&&++Uu<10);return Hu}function Ou(Fu,Vu,ku,Nu){for(var Gu=0;Gu<4;++Gu){var ju=Lu(Vu,ku,Nu);if(ju===0)return Vu;var Hu=Bu(Vu,ku,Nu)-Fu;Vu-=Hu/ju}return Vu}function Du(Fu,Vu,ku,Nu){if(!(0<=Fu&&Fu<=1&&0<=ku&&ku<=1))return;var Gu=new Float32Array(_u);if(Fu!==Vu||ku!==Nu)for(var ju=0;ju<_u;++ju)Gu[ju]=Bu(ju*$u,Fu,ku);function Hu(Uu){for(var zu=0,Wu=1,Qu=_u-1;Wu!==Qu&&Gu[Wu]<=Uu;++Wu)zu+=$u;--Wu;var Ku=(Uu-Gu[Wu])/(Gu[Wu+1]-Gu[Wu]),Yu=zu+Ku*$u,Xc=Lu(Yu,Fu,ku);return Xc>=.001?Ou(Uu,Yu,Fu,ku):Xc===0?Yu:Ru(Uu,zu,zu+$u,Fu,ku)}return function(Uu){return Fu===Vu&&ku===Nu||Uu===0||Uu===1?Uu:Bu(Hu(Uu),Vu,Nu)}}return Du}(),penner=function(){var _u={linear:function(){return function(Cu){return Cu}}},$u={Sine:function(){return function(Cu){return 1-Math.cos(Cu*Math.PI/2)}},Circ:function(){return function(Cu){return 1-Math.sqrt(1-Cu*Cu)}},Back:function(){return function(Cu){return Cu*Cu*(3*Cu-2)}},Bounce:function(){return function(Cu){for(var Pu,Bu=4;Cu<((Pu=Math.pow(2,--Bu))-1)/11;);return 1/Math.pow(4,3-Bu)-7.5625*Math.pow((Pu*3-2)/22-Cu,2)}},Elastic:function(Cu,Pu){Cu===void 0&&(Cu=1),Pu===void 0&&(Pu=.5);var Bu=minMax(Cu,1,10),Lu=minMax(Pu,.1,2);return function(Ru){return Ru===0||Ru===1?Ru:-Bu*Math.pow(2,10*(Ru-1))*Math.sin((Ru-1-Lu/(Math.PI*2)*Math.asin(1/Bu))*(Math.PI*2)/Lu)}}},Tu=["Quad","Cubic","Quart","Quint","Expo"];return Tu.forEach(function(Cu,Pu){$u[Cu]=function(){return function(Bu){return Math.pow(Bu,Pu+2)}}}),Object.keys($u).forEach(function(Cu){var Pu=$u[Cu];_u["easeIn"+Cu]=Pu,_u["easeOut"+Cu]=function(Bu,Lu){return function(Ru){return 1-Pu(Bu,Lu)(1-Ru)}},_u["easeInOut"+Cu]=function(Bu,Lu){return function(Ru){return Ru<.5?Pu(Bu,Lu)(Ru*2)/2:1-Pu(Bu,Lu)(Ru*-2+2)/2}},_u["easeOutIn"+Cu]=function(Bu,Lu){return function(Ru){return Ru<.5?(1-Pu(Bu,Lu)(1-Ru*2))/2:(Pu(Bu,Lu)(Ru*2-1)+1)/2}}}),_u}();function parseEasings(_u,$u){if(is$1.fnc(_u))return _u;var Tu=_u.split("(")[0],Cu=penner[Tu],Pu=parseEasingParameters(_u);switch(Tu){case"spring":return spring(_u,$u);case"cubicBezier":return applyArguments(bezier,Pu);case"steps":return applyArguments(steps,Pu);default:return applyArguments(Cu,Pu)}}function selectString(_u){try{var $u=document.querySelectorAll(_u);return $u}catch{return}}function filterArray(_u,$u){for(var Tu=_u.length,Cu=arguments.length>=2?arguments[1]:void 0,Pu=[],Bu=0;Bu<Tu;Bu++)if(Bu in _u){var Lu=_u[Bu];$u.call(Cu,Lu,Bu,_u)&&Pu.push(Lu)}return Pu}function flattenArray(_u){return _u.reduce(function($u,Tu){return $u.concat(is$1.arr(Tu)?flattenArray(Tu):Tu)},[])}function toArray(_u){return is$1.arr(_u)?_u:(is$1.str(_u)&&(_u=selectString(_u)||_u),_u instanceof NodeList||_u instanceof HTMLCollection?[].slice.call(_u):[_u])}function arrayContains(_u,$u){return _u.some(function(Tu){return Tu===$u})}function cloneObject(_u){var $u={};for(var Tu in _u)$u[Tu]=_u[Tu];return $u}function replaceObjectProps(_u,$u){var Tu=cloneObject(_u);for(var Cu in _u)Tu[Cu]=$u.hasOwnProperty(Cu)?$u[Cu]:_u[Cu];return Tu}function mergeObjects(_u,$u){var Tu=cloneObject(_u);for(var Cu in $u)Tu[Cu]=is$1.und(_u[Cu])?$u[Cu]:_u[Cu];return Tu}function rgbToRgba(_u){var $u=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(_u);return $u?"rgba("+$u[1]+",1)":_u}function hexToRgba(_u){var $u=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Tu=_u.replace($u,function(Ru,Ou,Du,Fu){return Ou+Ou+Du+Du+Fu+Fu}),Cu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Tu),Pu=parseInt(Cu[1],16),Bu=parseInt(Cu[2],16),Lu=parseInt(Cu[3],16);return"rgba("+Pu+","+Bu+","+Lu+",1)"}function hslToRgba(_u){var $u=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_u)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(_u),Tu=parseInt($u[1],10)/360,Cu=parseInt($u[2],10)/100,Pu=parseInt($u[3],10)/100,Bu=$u[4]||1;function Lu(ku,Nu,Gu){return Gu<0&&(Gu+=1),Gu>1&&(Gu-=1),Gu<1/6?ku+(Nu-ku)*6*Gu:Gu<1/2?Nu:Gu<2/3?ku+(Nu-ku)*(2/3-Gu)*6:ku}var Ru,Ou,Du;if(Cu==0)Ru=Ou=Du=Pu;else{var Fu=Pu<.5?Pu*(1+Cu):Pu+Cu-Pu*Cu,Vu=2*Pu-Fu;Ru=Lu(Vu,Fu,Tu+1/3),Ou=Lu(Vu,Fu,Tu),Du=Lu(Vu,Fu,Tu-1/3)}return"rgba("+Ru*255+","+Ou*255+","+Du*255+","+Bu+")"}function colorToRgb(_u){if(is$1.rgb(_u))return rgbToRgba(_u);if(is$1.hex(_u))return hexToRgba(_u);if(is$1.hsl(_u))return hslToRgba(_u)}function getUnit(_u){var $u=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(_u);if($u)return $u[1]}function getTransformUnit(_u){if(stringContains(_u,"translate")||_u==="perspective")return"px";if(stringContains(_u,"rotate")||stringContains(_u,"skew"))return"deg"}function getFunctionValue(_u,$u){return is$1.fnc(_u)?_u($u.target,$u.id,$u.total):_u}function getAttribute(_u,$u){return _u.getAttribute($u)}function convertPxToUnit(_u,$u,Tu){var Cu=getUnit($u);if(arrayContains([Tu,"deg","rad","turn"],Cu))return $u;var Pu=cache.CSS[$u+Tu];if(!is$1.und(Pu))return Pu;var Bu=100,Lu=document.createElement(_u.tagName),Ru=_u.parentNode&&_u.parentNode!==document?_u.parentNode:document.body;Ru.appendChild(Lu),Lu.style.position="absolute",Lu.style.width=Bu+Tu;var Ou=Bu/Lu.offsetWidth;Ru.removeChild(Lu);var Du=Ou*parseFloat($u);return cache.CSS[$u+Tu]=Du,Du}function getCSSValue(_u,$u,Tu){if($u in _u.style){var Cu=$u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Pu=_u.style[$u]||getComputedStyle(_u).getPropertyValue(Cu)||"0";return Tu?convertPxToUnit(_u,Pu,Tu):Pu}}function getAnimationType(_u,$u){if(is$1.dom(_u)&&!is$1.inp(_u)&&(!is$1.nil(getAttribute(_u,$u))||is$1.svg(_u)&&_u[$u]))return"attribute";if(is$1.dom(_u)&&arrayContains(validTransforms,$u))return"transform";if(is$1.dom(_u)&&$u!=="transform"&&getCSSValue(_u,$u))return"css";if(_u[$u]!=null)return"object"}function getElementTransforms(_u){if(!!is$1.dom(_u)){for(var $u=_u.style.transform||"",Tu=/(\w+)\(([^)]*)\)/g,Cu=new Map,Pu;Pu=Tu.exec($u);)Cu.set(Pu[1],Pu[2]);return Cu}}function getTransformValue(_u,$u,Tu,Cu){var Pu=stringContains($u,"scale")?1:0+getTransformUnit($u),Bu=getElementTransforms(_u).get($u)||Pu;return Tu&&(Tu.transforms.list.set($u,Bu),Tu.transforms.last=$u),Cu?convertPxToUnit(_u,Bu,Cu):Bu}function getOriginalTargetValue(_u,$u,Tu,Cu){switch(getAnimationType(_u,$u)){case"transform":return getTransformValue(_u,$u,Cu,Tu);case"css":return getCSSValue(_u,$u,Tu);case"attribute":return getAttribute(_u,$u);default:return _u[$u]||0}}function getRelativeValue(_u,$u){var Tu=/^(\*=|\+=|-=)/.exec(_u);if(!Tu)return _u;var Cu=getUnit(_u)||0,Pu=parseFloat($u),Bu=parseFloat(_u.replace(Tu[0],""));switch(Tu[0][0]){case"+":return Pu+Bu+Cu;case"-":return Pu-Bu+Cu;case"*":return Pu*Bu+Cu}}function validateValue(_u,$u){if(is$1.col(_u))return colorToRgb(_u);if(/\s/g.test(_u))return _u;var Tu=getUnit(_u),Cu=Tu?_u.substr(0,_u.length-Tu.length):_u;return $u?Cu+$u:Cu}function getDistance(_u,$u){return Math.sqrt(Math.pow($u.x-_u.x,2)+Math.pow($u.y-_u.y,2))}function getCircleLength(_u){return Math.PI*2*getAttribute(_u,"r")}function getRectLength(_u){return getAttribute(_u,"width")*2+getAttribute(_u,"height")*2}function getLineLength(_u){return getDistance({x:getAttribute(_u,"x1"),y:getAttribute(_u,"y1")},{x:getAttribute(_u,"x2"),y:getAttribute(_u,"y2")})}function getPolylineLength(_u){for(var $u=_u.points,Tu=0,Cu,Pu=0;Pu<$u.numberOfItems;Pu++){var Bu=$u.getItem(Pu);Pu>0&&(Tu+=getDistance(Cu,Bu)),Cu=Bu}return Tu}function getPolygonLength(_u){var $u=_u.points;return getPolylineLength(_u)+getDistance($u.getItem($u.numberOfItems-1),$u.getItem(0))}function getTotalLength(_u){if(_u.getTotalLength)return _u.getTotalLength();switch(_u.tagName.toLowerCase()){case"circle":return getCircleLength(_u);case"rect":return getRectLength(_u);case"line":return getLineLength(_u);case"polyline":return getPolylineLength(_u);case"polygon":return getPolygonLength(_u)}}function setDashoffset(_u){var $u=getTotalLength(_u);return _u.setAttribute("stroke-dasharray",$u),$u}function getParentSvgEl(_u){for(var $u=_u.parentNode;is$1.svg($u)&&is$1.svg($u.parentNode);)$u=$u.parentNode;return $u}function getParentSvg(_u,$u){var Tu=$u||{},Cu=Tu.el||getParentSvgEl(_u),Pu=Cu.getBoundingClientRect(),Bu=getAttribute(Cu,"viewBox"),Lu=Pu.width,Ru=Pu.height,Ou=Tu.viewBox||(Bu?Bu.split(" "):[0,0,Lu,Ru]);return{el:Cu,viewBox:Ou,x:Ou[0]/1,y:Ou[1]/1,w:Lu,h:Ru,vW:Ou[2],vH:Ou[3]}}function getPath(_u,$u){var Tu=is$1.str(_u)?selectString(_u)[0]:_u,Cu=$u||100;return function(Pu){return{property:Pu,el:Tu,svg:getParentSvg(Tu),totalLength:getTotalLength(Tu)*(Cu/100)}}}function getPathProgress(_u,$u,Tu){function Cu(Fu){Fu===void 0&&(Fu=0);var Vu=$u+Fu>=1?$u+Fu:0;return _u.el.getPointAtLength(Vu)}var Pu=getParentSvg(_u.el,_u.svg),Bu=Cu(),Lu=Cu(-1),Ru=Cu(1),Ou=Tu?1:Pu.w/Pu.vW,Du=Tu?1:Pu.h/Pu.vH;switch(_u.property){case"x":return(Bu.x-Pu.x)*Ou;case"y":return(Bu.y-Pu.y)*Du;case"angle":return Math.atan2(Ru.y-Lu.y,Ru.x-Lu.x)*180/Math.PI}}function decomposeValue(_u,$u){var Tu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Cu=validateValue(is$1.pth(_u)?_u.totalLength:_u,$u)+"";return{original:Cu,numbers:Cu.match(Tu)?Cu.match(Tu).map(Number):[0],strings:is$1.str(_u)||$u?Cu.split(Tu):[]}}function parseTargets(_u){var $u=_u?flattenArray(is$1.arr(_u)?_u.map(toArray):toArray(_u)):[];return filterArray($u,function(Tu,Cu,Pu){return Pu.indexOf(Tu)===Cu})}function getAnimatables(_u){var $u=parseTargets(_u);return $u.map(function(Tu,Cu){return{target:Tu,id:Cu,total:$u.length,transforms:{list:getElementTransforms(Tu)}}})}function normalizePropertyTweens(_u,$u){var Tu=cloneObject($u);if(/^spring/.test(Tu.easing)&&(Tu.duration=spring(Tu.easing)),is$1.arr(_u)){var Cu=_u.length,Pu=Cu===2&&!is$1.obj(_u[0]);Pu?_u={value:_u}:is$1.fnc($u.duration)||(Tu.duration=$u.duration/Cu)}var Bu=is$1.arr(_u)?_u:[_u];return Bu.map(function(Lu,Ru){var Ou=is$1.obj(Lu)&&!is$1.pth(Lu)?Lu:{value:Lu};return is$1.und(Ou.delay)&&(Ou.delay=Ru?0:$u.delay),is$1.und(Ou.endDelay)&&(Ou.endDelay=Ru===Bu.length-1?$u.endDelay:0),Ou}).map(function(Lu){return mergeObjects(Lu,Tu)})}function flattenKeyframes(_u){for(var $u=filterArray(flattenArray(_u.map(function(Bu){return Object.keys(Bu)})),function(Bu){return is$1.key(Bu)}).reduce(function(Bu,Lu){return Bu.indexOf(Lu)<0&&Bu.push(Lu),Bu},[]),Tu={},Cu=function(Bu){var Lu=$u[Bu];Tu[Lu]=_u.map(function(Ru){var Ou={};for(var Du in Ru)is$1.key(Du)?Du==Lu&&(Ou.value=Ru[Du]):Ou[Du]=Ru[Du];return Ou})},Pu=0;Pu<$u.length;Pu++)Cu(Pu);return Tu}function getProperties(_u,$u){var Tu=[],Cu=$u.keyframes;Cu&&($u=mergeObjects(flattenKeyframes(Cu),$u));for(var Pu in $u)is$1.key(Pu)&&Tu.push({name:Pu,tweens:normalizePropertyTweens($u[Pu],_u)});return Tu}function normalizeTweenValues(_u,$u){var Tu={};for(var Cu in _u){var Pu=getFunctionValue(_u[Cu],$u);is$1.arr(Pu)&&(Pu=Pu.map(function(Bu){return getFunctionValue(Bu,$u)}),Pu.length===1&&(Pu=Pu[0])),Tu[Cu]=Pu}return Tu.duration=parseFloat(Tu.duration),Tu.delay=parseFloat(Tu.delay),Tu}function normalizeTweens(_u,$u){var Tu;return _u.tweens.map(function(Cu){var Pu=normalizeTweenValues(Cu,$u),Bu=Pu.value,Lu=is$1.arr(Bu)?Bu[1]:Bu,Ru=getUnit(Lu),Ou=getOriginalTargetValue($u.target,_u.name,Ru,$u),Du=Tu?Tu.to.original:Ou,Fu=is$1.arr(Bu)?Bu[0]:Du,Vu=getUnit(Fu)||getUnit(Ou),ku=Ru||Vu;return is$1.und(Lu)&&(Lu=Du),Pu.from=decomposeValue(Fu,ku),Pu.to=decomposeValue(getRelativeValue(Lu,Fu),ku),Pu.start=Tu?Tu.end:0,Pu.end=Pu.start+Pu.delay+Pu.duration+Pu.endDelay,Pu.easing=parseEasings(Pu.easing,Pu.duration),Pu.isPath=is$1.pth(Bu),Pu.isPathTargetInsideSVG=Pu.isPath&&is$1.svg($u.target),Pu.isColor=is$1.col(Pu.from.original),Pu.isColor&&(Pu.round=1),Tu=Pu,Pu})}var setProgressValue={css:function(_u,$u,Tu){return _u.style[$u]=Tu},attribute:function(_u,$u,Tu){return _u.setAttribute($u,Tu)},object:function(_u,$u,Tu){return _u[$u]=Tu},transform:function(_u,$u,Tu,Cu,Pu){if(Cu.list.set($u,Tu),$u===Cu.last||Pu){var Bu="";Cu.list.forEach(function(Lu,Ru){Bu+=Ru+"("+Lu+") "}),_u.style.transform=Bu}}};function setTargetsValue(_u,$u){var Tu=getAnimatables(_u);Tu.forEach(function(Cu){for(var Pu in $u){var Bu=getFunctionValue($u[Pu],Cu),Lu=Cu.target,Ru=getUnit(Bu),Ou=getOriginalTargetValue(Lu,Pu,Ru,Cu),Du=Ru||getUnit(Ou),Fu=getRelativeValue(validateValue(Bu,Du),Ou),Vu=getAnimationType(Lu,Pu);setProgressValue[Vu](Lu,Pu,Fu,Cu.transforms,!0)}})}function createAnimation(_u,$u){var Tu=getAnimationType(_u.target,$u.name);if(Tu){var Cu=normalizeTweens($u,_u),Pu=Cu[Cu.length-1];return{type:Tu,property:$u.name,animatable:_u,tweens:Cu,duration:Pu.end,delay:Cu[0].delay,endDelay:Pu.endDelay}}}function getAnimations(_u,$u){return filterArray(flattenArray(_u.map(function(Tu){return $u.map(function(Cu){return createAnimation(Tu,Cu)})})),function(Tu){return!is$1.und(Tu)})}function getInstanceTimings(_u,$u){var Tu=_u.length,Cu=function(Bu){return Bu.timelineOffset?Bu.timelineOffset:0},Pu={};return Pu.duration=Tu?Math.max.apply(Math,_u.map(function(Bu){return Cu(Bu)+Bu.duration})):$u.duration,Pu.delay=Tu?Math.min.apply(Math,_u.map(function(Bu){return Cu(Bu)+Bu.delay})):$u.delay,Pu.endDelay=Tu?Pu.duration-Math.max.apply(Math,_u.map(function(Bu){return Cu(Bu)+Bu.duration-Bu.endDelay})):$u.endDelay,Pu}var instanceID=0;function createNewInstance(_u){var $u=replaceObjectProps(defaultInstanceSettings,_u),Tu=replaceObjectProps(defaultTweenSettings,_u),Cu=getProperties(Tu,_u),Pu=getAnimatables(_u.targets),Bu=getAnimations(Pu,Cu),Lu=getInstanceTimings(Bu,Tu),Ru=instanceID;return instanceID++,mergeObjects($u,{id:Ru,children:[],animatables:Pu,animations:Bu,duration:Lu.duration,delay:Lu.delay,endDelay:Lu.endDelay})}var activeInstances=[],engine=function(){var _u;function $u(){!_u&&(!isDocumentHidden()||!anime.suspendWhenDocumentHidden)&&activeInstances.length>0&&(_u=requestAnimationFrame(Tu))}function Tu(Pu){for(var Bu=activeInstances.length,Lu=0;Lu<Bu;){var Ru=activeInstances[Lu];Ru.paused?(activeInstances.splice(Lu,1),Bu--):(Ru.tick(Pu),Lu++)}_u=Lu>0?requestAnimationFrame(Tu):void 0}function Cu(){!anime.suspendWhenDocumentHidden||(isDocumentHidden()?_u=cancelAnimationFrame(_u):(activeInstances.forEach(function(Pu){return Pu._onDocumentVisibility()}),engine()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",Cu),$u}();function isDocumentHidden(){return!!document&&document.hidden}function anime(_u){_u===void 0&&(_u={});var $u=0,Tu=0,Cu=0,Pu,Bu=0,Lu=null;function Ru(zu){var Wu=window.Promise&&new Promise(function(Qu){return Lu=Qu});return zu.finished=Wu,Wu}var Ou=createNewInstance(_u);Ru(Ou);function Du(){var zu=Ou.direction;zu!=="alternate"&&(Ou.direction=zu!=="normal"?"normal":"reverse"),Ou.reversed=!Ou.reversed,Pu.forEach(function(Wu){return Wu.reversed=Ou.reversed})}function Fu(zu){return Ou.reversed?Ou.duration-zu:zu}function Vu(){$u=0,Tu=Fu(Ou.currentTime)*(1/anime.speed)}function ku(zu,Wu){Wu&&Wu.seek(zu-Wu.timelineOffset)}function Nu(zu){if(Ou.reversePlayback)for(var Qu=Bu;Qu--;)ku(zu,Pu[Qu]);else for(var Wu=0;Wu<Bu;Wu++)ku(zu,Pu[Wu])}function Gu(zu){for(var Wu=0,Qu=Ou.animations,Ku=Qu.length;Wu<Ku;){var Yu=Qu[Wu],Xc=Yu.animatable,_d=Yu.tweens,_f=_d.length-1,qu=_d[_f];_f&&(qu=filterArray(_d,function(Ep){return zu<Ep.end})[0]||qu);for(var Xu=minMax(zu-qu.start-qu.delay,0,qu.duration)/qu.duration,Zu=isNaN(Xu)?1:qu.easing(Xu),_c=qu.to.strings,Ju=qu.round,_h=[],ep=qu.to.numbers.length,tp=void 0,rp=0;rp<ep;rp++){var dp=void 0,cp=qu.to.numbers[rp],Sp=qu.from.numbers[rp]||0;qu.isPath?dp=getPathProgress(qu.value,Zu*cp,qu.isPathTargetInsideSVG):dp=Sp+Zu*(cp-Sp),Ju&&(qu.isColor&&rp>2||(dp=Math.round(dp*Ju)/Ju)),_h.push(dp)}var yp=_c.length;if(!yp)tp=_h[0];else{tp=_c[0];for(var Bp=0;Bp<yp;Bp++){_c[Bp];var _p=_c[Bp+1],Cp=_h[Bp];isNaN(Cp)||(_p?tp+=Cp+_p:tp+=Cp+" ")}}setProgressValue[Yu.type](Xc.target,Yu.property,tp,Xc.transforms),Yu.currentValue=tp,Wu++}}function ju(zu){Ou[zu]&&!Ou.passThrough&&Ou[zu](Ou)}function Hu(){Ou.remaining&&Ou.remaining!==!0&&Ou.remaining--}function Uu(zu){var Wu=Ou.duration,Qu=Ou.delay,Ku=Wu-Ou.endDelay,Yu=Fu(zu);Ou.progress=minMax(Yu/Wu*100,0,100),Ou.reversePlayback=Yu<Ou.currentTime,Pu&&Nu(Yu),!Ou.began&&Ou.currentTime>0&&(Ou.began=!0,ju("begin")),!Ou.loopBegan&&Ou.currentTime>0&&(Ou.loopBegan=!0,ju("loopBegin")),Yu<=Qu&&Ou.currentTime!==0&&Gu(0),(Yu>=Ku&&Ou.currentTime!==Wu||!Wu)&&Gu(Wu),Yu>Qu&&Yu<Ku?(Ou.changeBegan||(Ou.changeBegan=!0,Ou.changeCompleted=!1,ju("changeBegin")),ju("change"),Gu(Yu)):Ou.changeBegan&&(Ou.changeCompleted=!0,Ou.changeBegan=!1,ju("changeComplete")),Ou.currentTime=minMax(Yu,0,Wu),Ou.began&&ju("update"),zu>=Wu&&(Tu=0,Hu(),Ou.remaining?($u=Cu,ju("loopComplete"),Ou.loopBegan=!1,Ou.direction==="alternate"&&Du()):(Ou.paused=!0,Ou.completed||(Ou.completed=!0,ju("loopComplete"),ju("complete"),!Ou.passThrough&&"Promise"in window&&(Lu(),Ru(Ou)))))}return Ou.reset=function(){var zu=Ou.direction;Ou.passThrough=!1,Ou.currentTime=0,Ou.progress=0,Ou.paused=!0,Ou.began=!1,Ou.loopBegan=!1,Ou.changeBegan=!1,Ou.completed=!1,Ou.changeCompleted=!1,Ou.reversePlayback=!1,Ou.reversed=zu==="reverse",Ou.remaining=Ou.loop,Pu=Ou.children,Bu=Pu.length;for(var Wu=Bu;Wu--;)Ou.children[Wu].reset();(Ou.reversed&&Ou.loop!==!0||zu==="alternate"&&Ou.loop===1)&&Ou.remaining++,Gu(Ou.reversed?Ou.duration:0)},Ou._onDocumentVisibility=Vu,Ou.set=function(zu,Wu){return setTargetsValue(zu,Wu),Ou},Ou.tick=function(zu){Cu=zu,$u||($u=Cu),Uu((Cu+(Tu-$u))*anime.speed)},Ou.seek=function(zu){Uu(Fu(zu))},Ou.pause=function(){Ou.paused=!0,Vu()},Ou.play=function(){!Ou.paused||(Ou.completed&&Ou.reset(),Ou.paused=!1,activeInstances.push(Ou),Vu(),engine())},Ou.reverse=function(){Du(),Ou.completed=!Ou.reversed,Vu()},Ou.restart=function(){Ou.reset(),Ou.play()},Ou.remove=function(zu){var Wu=parseTargets(zu);removeTargetsFromInstance(Wu,Ou)},Ou.reset(),Ou.autoplay&&Ou.play(),Ou}function removeTargetsFromAnimations(_u,$u){for(var Tu=$u.length;Tu--;)arrayContains(_u,$u[Tu].animatable.target)&&$u.splice(Tu,1)}function removeTargetsFromInstance(_u,$u){var Tu=$u.animations,Cu=$u.children;removeTargetsFromAnimations(_u,Tu);for(var Pu=Cu.length;Pu--;){var Bu=Cu[Pu],Lu=Bu.animations;removeTargetsFromAnimations(_u,Lu),!Lu.length&&!Bu.children.length&&Cu.splice(Pu,1)}!Tu.length&&!Cu.length&&$u.pause()}function removeTargetsFromActiveInstances(_u){for(var $u=parseTargets(_u),Tu=activeInstances.length;Tu--;){var Cu=activeInstances[Tu];removeTargetsFromInstance($u,Cu)}}function stagger(_u,$u){$u===void 0&&($u={});var Tu=$u.direction||"normal",Cu=$u.easing?parseEasings($u.easing):null,Pu=$u.grid,Bu=$u.axis,Lu=$u.from||0,Ru=Lu==="first",Ou=Lu==="center",Du=Lu==="last",Fu=is$1.arr(_u),Vu=parseFloat(Fu?_u[0]:_u),ku=Fu?parseFloat(_u[1]):0,Nu=getUnit(Fu?_u[1]:_u)||0,Gu=$u.start||0+(Fu?Vu:0),ju=[],Hu=0;return function(Uu,zu,Wu){if(Ru&&(Lu=0),Ou&&(Lu=(Wu-1)/2),Du&&(Lu=Wu-1),!ju.length){for(var Qu=0;Qu<Wu;Qu++){if(!Pu)ju.push(Math.abs(Lu-Qu));else{var Ku=Ou?(Pu[0]-1)/2:Lu%Pu[0],Yu=Ou?(Pu[1]-1)/2:Math.floor(Lu/Pu[0]),Xc=Qu%Pu[0],_d=Math.floor(Qu/Pu[0]),_f=Ku-Xc,qu=Yu-_d,Xu=Math.sqrt(_f*_f+qu*qu);Bu==="x"&&(Xu=-_f),Bu==="y"&&(Xu=-qu),ju.push(Xu)}Hu=Math.max.apply(Math,ju)}Cu&&(ju=ju.map(function(_c){return Cu(_c/Hu)*Hu})),Tu==="reverse"&&(ju=ju.map(function(_c){return Bu?_c<0?_c*-1:-_c:Math.abs(Hu-_c)}))}var Zu=Fu?(ku-Vu)/Hu:Vu;return Gu+Zu*(Math.round(ju[zu]*100)/100)+Nu}}function timeline(_u){_u===void 0&&(_u={});var $u=anime(_u);return $u.duration=0,$u.add=function(Tu,Cu){var Pu=activeInstances.indexOf($u),Bu=$u.children;Pu>-1&&activeInstances.splice(Pu,1);function Lu(ku){ku.passThrough=!0}for(var Ru=0;Ru<Bu.length;Ru++)Lu(Bu[Ru]);var Ou=mergeObjects(Tu,replaceObjectProps(defaultTweenSettings,_u));Ou.targets=Ou.targets||_u.targets;var Du=$u.duration;Ou.autoplay=!1,Ou.direction=$u.direction,Ou.timelineOffset=is$1.und(Cu)?Du:getRelativeValue(Cu,Du),Lu($u),$u.seek(Ou.timelineOffset);var Fu=anime(Ou);Lu(Fu),Bu.push(Fu);var Vu=getInstanceTimings(Bu,_u);return $u.delay=Vu.delay,$u.endDelay=Vu.endDelay,$u.duration=Vu.duration,$u.seek(0),$u.reset(),$u.autoplay&&$u.play(),$u},$u}anime.version="3.2.1";anime.speed=1;anime.suspendWhenDocumentHidden=!0;anime.running=activeInstances;anime.remove=removeTargetsFromActiveInstances;anime.get=getOriginalTargetValue;anime.set=setTargetsValue;anime.convertPx=convertPxToUnit;anime.path=getPath;anime.setDashoffset=setDashoffset;anime.stagger=stagger;anime.timeline=timeline;anime.easing=parseEasings;anime.penner=penner;anime.random=function(_u,$u){return Math.floor(Math.random()*($u-_u+1))+_u};function s$1(_u,$u){const[Tu,Cu]=$u;if(Tu>=Cu||Cu<=1||Tu<=1)return-1;const Pu={},Bu=Lu=>(Pu[Lu]||(Pu[Lu]=_u(Lu)),Pu[Lu]);for(let Lu=Tu;Lu<Cu;Lu++){const Ru=Bu(Lu),Ou=Bu(Lu-1);if(Ru<Ou)return Lu}return-1}function n$1(){return Math.random().toString(36).slice(-6)}const t=n$1();function P$6(_u){Ut(_u,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function y$3(_u,$u,Tu){const Cu=_u.slice();return Cu[10]=$u[Tu],Cu[11]=$u,Cu[12]=Tu,Cu}function b$2(_u){let $u,Tu=_u[10]+"",Cu,Pu=_u[12];const Bu=()=>_u[6]($u,Pu),Lu=()=>_u[6](null,Pu);return{c(){$u=I$8("span"),Cu=at(Tu),Et($u,"class","text-char svelte-1b2n9wi")},m(Ru,Ou){vt(Ru,$u,Ou),ut($u,Cu),Bu()},p(Ru,Ou){_u=Ru,Ou&2&&Tu!==(Tu=_u[10]+"")&&Xt(Cu,Tu),Pu!==_u[12]&&(Lu(),Pu=_u[12],Bu())},d(Ru){Ru&&H$4($u),Lu()}}}function U$2(_u){let $u,Tu=_u[1],Cu=[];for(let Pu=0;Pu<Tu.length;Pu+=1)Cu[Pu]=b$2(y$3(_u,Tu,Pu));return{c(){for(let Pu=0;Pu<Cu.length;Pu+=1)Cu[Pu].c();$u=Kt()},m(Pu,Bu){for(let Lu=0;Lu<Cu.length;Lu+=1)Cu[Lu].m(Pu,Bu);vt(Pu,$u,Bu)},p(Pu,[Bu]){if(Bu&3){Tu=Pu[1];let Lu;for(Lu=0;Lu<Tu.length;Lu+=1){const Ru=y$3(Pu,Tu,Lu);Cu[Lu]?Cu[Lu].p(Ru,Bu):(Cu[Lu]=b$2(Ru),Cu[Lu].c(),Cu[Lu].m($u.parentNode,$u))}for(;Lu<Cu.length;Lu+=1)Cu[Lu].d(1);Cu.length=Tu.length}},i:E$a,o:E$a,d(Pu){Gt(Cu,Pu),Pu&&H$4($u)}}}function V$4(_u,$u,Tu){let Cu,{inDelay:Pu=0}=$u,{outDelay:Bu=0}=$u,{content:Lu}=$u,{unfolded:Ru}=$u,Ou,Du=[],Fu;function Vu(Nu){clearTimeout(Ou),Ou=setTimeout(function(){!Fu||(Nu&&Fu.reversed||!Nu&&!Fu.reversed)&&(Fu.reverse(),Fu.play())},Nu?Pu:Bu)}ie$3(function(){const Nu=(()=>{const Gu=s$1(ju=>Du[ju].getBoundingClientRect().x,[Math.min(Du.length-1,10),Math.min(Du.length-1,30)]);if(Gu>0)return Gu})();Fu=anime({targets:Du.filter(i$4).slice(0,Nu),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:anime.stagger(50),easing:"easeInOutCubic"}),Ru&&Fu.seek(Fu.duration)});function ku(Nu,Gu){tt[Nu?"unshift":"push"](()=>{Du[Gu]=Nu,Tu(0,Du)})}return _u.$$set=Nu=>{"inDelay"in Nu&&Tu(2,Pu=Nu.inDelay),"outDelay"in Nu&&Tu(3,Bu=Nu.outDelay),"content"in Nu&&Tu(4,Lu=Nu.content),"unfolded"in Nu&&Tu(5,Ru=Nu.unfolded)},_u.$$.update=()=>{_u.$$.dirty&16&&Tu(1,Cu=(()=>{const Nu=[],Gu=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu")),ju=`__EMOJI_SPLIT_${t}__`,Hu=`__EMOJI_${t}__`;return Lu.slice().replace(Gu,Uu=>`${ju}${Hu}${Uu}${ju}`).split(ju).forEach(Uu=>Uu.startsWith(Hu)?Nu.push(Uu.slice(Hu.length)):Nu.push(...Uu.split(""))),Nu.filter(Boolean)})()),_u.$$.dirty&32&&Vu(Ru)},[Du,Cu,Pu,Bu,Lu,Ru,ku]}class H$2 extends be$1{constructor($u){super(),xe(this,$u,V$4,U$2,Dt,{inDelay:2,outDelay:3,content:4,unfolded:5},P$6)}}const A$3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",a$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",g$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=";function M$4(_u){Ut(_u,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function h$1(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu;return Tu=new P$7({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Cu=Jt(),Pu=I$8("div"),Et(Pu,"class",Bu="arrow "+_u[0]+" svelte-1ogmlqq"),Yt(Pu,"background-image","url("+A$3+")"),Et($u,"class","arrow-wrapper svelte-1ogmlqq")},m(Vu,ku){vt(Vu,$u,ku),zt(Tu,$u,null),ut($u,Cu),ut($u,Pu),Ou=!0,Du||(Fu=Z$2(Pu,"click",_u[5]),Du=!0)},p(Vu,ku){_u=Vu,(!Ou||ku&1&&Bu!==(Bu="arrow "+_u[0]+" svelte-1ogmlqq"))&&Et(Pu,"class",Bu)},i(Vu){Ou||(gt(Tu.$$.fragment,Vu),Vu&&j$3(()=>{Ru&&Ru.end(1),Lu=he$1(Pu,b$3,{duration:_u[2],delay:_u[3],easing:o$5}),Lu.start()}),Ou=!0)},o(Vu){jt(Tu.$$.fragment,Vu),Lu&&Lu.invalidate(),Vu&&(Ru=_e$1(Pu,b$3,{duration:_u[2],delay:_u[4],easing:o$5})),Ou=!1},d(Vu){Vu&&H$4($u),Ot(Tu),Vu&&Ru&&Ru.end(),Du=!1,Fu()}}}function P$5(_u){let $u,Tu,Cu=_u[1]&&h$1(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[1]?Cu?(Cu.p(Pu,Bu),Bu&2&&gt(Cu,1)):(Cu=h$1(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function Q$2(_u,$u,Tu){let{direction:Cu="right"}=$u,{visible:Pu=!0}=$u,{duration:Bu=0}=$u,{inDelay:Lu=0}=$u,{outDelay:Ru=0}=$u;function Ou(Du){ue.call(this,_u,Du)}return _u.$$set=Du=>{"direction"in Du&&Tu(0,Cu=Du.direction),"visible"in Du&&Tu(1,Pu=Du.visible),"duration"in Du&&Tu(2,Bu=Du.duration),"inDelay"in Du&&Tu(3,Lu=Du.inDelay),"outDelay"in Du&&Tu(4,Ru=Du.outDelay)},[Cu,Pu,Bu,Lu,Ru,Ou]}class Y$1 extends be$1{constructor($u){super(),xe(this,$u,Q$2,P$5,Dt,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},M$4)}}function s(_u,$u,Tu=20,Cu=5){return new Promise((Pu,Bu)=>{let Lu=0;const Ru=setInterval(()=>{const Ou=_u();$u(Ou)?(clearInterval(Ru),Pu(Ou)):Lu>=Cu&&(clearInterval(Ru),Bu(Ou)),Lu++},Tu)})}function J$2(_u){Ut(_u,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function y$2(_u,$u,Tu){const Cu=_u.slice();return Cu[11]=$u[Tu].id,Cu[12]=$u[Tu].content,Cu}function w$2(_u,$u){let Tu,Cu,Pu;return Cu=new H$2({props:{unfolded:$u[0],content:$u[12],inDelay:500,outDelay:$u[5]}}),{key:_u,first:null,c(){Tu=I$8("div"),$e(Cu.$$.fragment),Et(Tu,"class","text svelte-1fuzm7v"),Yt(Tu,"transform",$u[7]),this.first=Tu},m(Bu,Lu){vt(Bu,Tu,Lu),zt(Cu,Tu,null),$u[10](Tu),Pu=!0},p(Bu,Lu){$u=Bu;const Ru={};Lu&1&&(Ru.unfolded=$u[0]),Lu&2&&(Ru.content=$u[12]),Lu&32&&(Ru.outDelay=$u[5]),Cu.$set(Ru),Lu&128&&Yt(Tu,"transform",$u[7])},i(Bu){Pu||(gt(Cu.$$.fragment,Bu),Pu=!0)},o(Bu){jt(Cu.$$.fragment,Bu),Pu=!1},d(Bu){Bu&&H$4(Tu),Ot(Cu),$u[10](null)}}}function z$3(_u){let $u,Tu,Cu;return Tu=new Y$1({props:{direction:_u[6],visible:_u[0],inDelay:600,duration:1e3}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Et($u,"class","arrow svelte-1fuzm7v")},m(Pu,Bu){vt(Pu,$u,Bu),zt(Tu,$u,null),Cu=!0},p(Pu,Bu){const Lu={};Bu&64&&(Lu.direction=Pu[6]),Bu&1&&(Lu.visible=Pu[0]),Tu.$set(Lu)},i(Pu){Cu||(gt(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){jt(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&H$4($u),Ot(Tu)}}}function K$3(_u){let $u=[],Tu=new Map,Cu,Pu,Bu,Lu=_u[1];const Ru=Du=>Du[11];for(let Du=0;Du<Lu.length;Du+=1){let Fu=y$2(_u,Lu,Du),Vu=Ru(Fu);Tu.set(Vu,$u[Du]=w$2(Vu,Fu))}let Ou=_u[3]<_u[4]&&z$3(_u);return{c(){for(let Du=0;Du<$u.length;Du+=1)$u[Du].c();Cu=Jt(),Ou&&Ou.c(),Pu=Kt()},m(Du,Fu){for(let Vu=0;Vu<$u.length;Vu+=1)$u[Vu].m(Du,Fu);vt(Du,Cu,Fu),Ou&&Ou.m(Du,Fu),vt(Du,Pu,Fu),Bu=!0},p(Du,[Fu]){Fu&167&&(Lu=Du[1],ae$5(),$u=ge$1($u,Fu,Ru,1,Du,Lu,Tu,Cu.parentNode,ye$1,w$2,Cu,y$2),de$2()),Du[3]<Du[4]?Ou?(Ou.p(Du,Fu),Fu&24&&gt(Ou,1)):(Ou=z$3(Du),Ou.c(),gt(Ou,1),Ou.m(Pu.parentNode,Pu)):Ou&&(ae$5(),jt(Ou,1,1,()=>{Ou=null}),de$2())},i(Du){if(!Bu){for(let Fu=0;Fu<Lu.length;Fu+=1)gt($u[Fu]);gt(Ou),Bu=!0}},o(Du){for(let Fu=0;Fu<$u.length;Fu+=1)jt($u[Fu]);jt(Ou),Bu=!1},d(Du){for(let Fu=0;Fu<$u.length;Fu+=1)$u[Fu].d(Du);Du&&H$4(Cu),Ou&&Ou.d(Du),Du&&H$4(Pu)}}}function O$5(_u,$u,Tu){let Cu,Pu,Bu,{visible:Lu=!1}=$u,{textUnfolded:Ru=!1}=$u,{textItems:Ou}=$u,Du,Fu=0,Vu=0,ku=0;function Nu(Gu){tt[Gu?"unshift":"push"](()=>{Du=Gu,Tu(2,Du)})}return _u.$$set=Gu=>{"visible"in Gu&&Tu(0,Lu=Gu.visible),"textUnfolded"in Gu&&Tu(8,Ru=Gu.textUnfolded),"textItems"in Gu&&Tu(1,Ou=Gu.textItems)},_u.$$.update=()=>{if(_u.$$.dirty&5&&Du&&Lu){const{lineHeight:Gu}=getComputedStyle(Du);Tu(4,ku=Du.offsetHeight),s(()=>Du==null?void 0:Du.offsetHeight,Boolean).then(()=>{Tu(4,ku=Du.offsetHeight)}),Tu(3,Vu=Number(Gu.replace("px","")))}_u.$$.dirty&280&&Tu(9,Fu=Ru?Vu-ku:0),_u.$$.dirty&512&&Tu(7,Cu=`translateY(${Fu}px)`),_u.$$.dirty&256&&Tu(6,Pu=Ru?"left":"right"),_u.$$.dirty&256&&Tu(5,Bu=Ru?450:0)},[Lu,Ou,Du,Vu,ku,Bu,Pu,Cu,Ru,Fu,Nu]}class W$1 extends be$1{constructor($u){super(),xe(this,$u,O$5,K$3,Dt,{visible:0,textUnfolded:8,textItems:1},J$2)}}function O$4(_u){Ut(_u,"svelte-18yy5x8",".line.svelte-18yy5x8{position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-18yy5x8{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function R$5(_u){var $u,Tu;let Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu;return Cu=new P$7({props:{visible:_u[2],left:_u[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Lu=new M$5({props:{unfolded:_u[2],duration:1e3,outDelay:_u[5]+40*Math.min((Tu=($u=_u[4][0])==null?void 0:$u.content.length)!=null?Tu:10,15)}}),Du=new W$1({props:{visible:_u[2],textUnfolded:_u[1],textItems:_u[4]}}),{c(){$e(Cu.$$.fragment),Pu=Jt(),Bu=I$8("div"),$e(Lu.$$.fragment),Ru=Jt(),Ou=I$8("div"),$e(Du.$$.fragment),Et(Bu,"class","line svelte-18yy5x8"),Yt(Bu,"width",_u[3]+"px"),Et(Ou,"class","content svelte-18yy5x8"),j$3(()=>_u[8].call(Ou))},m(Gu,ju){zt(Cu,Gu,ju),vt(Gu,Pu,ju),vt(Gu,Bu,ju),zt(Lu,Bu,null),vt(Gu,Ru,ju),vt(Gu,Ou,ju),zt(Du,Ou,null),Fu=Zt(Ou,_u[8].bind(Ou)),Vu=!0,ku||(Nu=Z$2(Ou,"click",_u[6]),ku=!0)},p(Gu,ju){var Hu,Uu;const zu={};ju&4&&(zu.visible=Gu[2]),ju&8&&(zu.left=Gu[3]/2+"px"),Cu.$set(zu);const Wu={};ju&4&&(Wu.unfolded=Gu[2]),ju&48&&(Wu.outDelay=Gu[5]+40*Math.min((Uu=(Hu=Gu[4][0])==null?void 0:Hu.content.length)!=null?Uu:10,15)),Lu.$set(Wu),ju&8&&Yt(Bu,"width",Gu[3]+"px");const Qu={};ju&4&&(Qu.visible=Gu[2]),ju&2&&(Qu.textUnfolded=Gu[1]),ju&16&&(Qu.textItems=Gu[4]),Du.$set(Qu)},i(Gu){Vu||(gt(Cu.$$.fragment,Gu),gt(Lu.$$.fragment,Gu),gt(Du.$$.fragment,Gu),Vu=!0)},o(Gu){jt(Cu.$$.fragment,Gu),jt(Lu.$$.fragment,Gu),jt(Du.$$.fragment,Gu),Vu=!1},d(Gu){Ot(Cu,Gu),Gu&&H$4(Pu),Gu&&H$4(Bu),Ot(Lu),Gu&&H$4(Ru),Gu&&H$4(Ou),Ot(Du),Fu(),ku=!1,Nu()}}}function P$4(_u){let $u,Tu,Cu=_u[0].state&&R$5(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[0].state?Cu?(Cu.p(Pu,Bu),Bu&1&&gt(Cu,1)):(Cu=R$5(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function Q$1(_u,$u,Tu){let Cu,Pu,Bu,{tag:Lu}=$u,Ru,Ou=!1,Du=[];function Fu(){Tu(1,Ou=!Ou)}function Vu(){Ru=this.clientWidth,Tu(3,Ru)}return _u.$$set=ku=>{"tag"in ku&&Tu(0,Lu=ku.tag)},_u.$$.update=()=>{var ku;_u.$$.dirty&1&&Tu(2,Cu=!!((ku=Lu.state)!=null&&ku.unfolded)),_u.$$.dirty&1&&Tu(7,Pu=Lu.data.text),_u.$$.dirty&128&&Tu(4,Du=[{id:r$7(),content:Pu}]),_u.$$.dirty&4&&(Cu||setTimeout(()=>{Tu(1,Ou=!1)},20)),_u.$$.dirty&2&&Tu(5,Bu=Ou?450:0)},[Lu,Ou,Cu,Ru,Du,Bu,Fu,Pu,Vu]}class te$3 extends be$1{constructor($u){super(),xe(this,$u,Q$1,P$4,Dt,{tag:0},O$4)}}function q$3(_u){Ut(_u,"svelte-e72ouh",".line.svelte-e72ouh{width:100%;height:100%;overflow:visible}")}function m$1(_u){let $u,Tu,Cu,Pu;return{c(){$u=kt("path"),Et($u,"fill","none"),Et($u,"stroke","url(#"+_u[4]+")"),Et($u,"stroke-width","1"),Et($u,"d","M0 21 L14 0.5 L105 0.5")},m(Bu,Lu){vt(Bu,$u,Lu),Pu=!0},p(Bu,Lu){_u=Bu},i(Bu){Pu||(Bu&&j$3(()=>{Cu&&Cu.end(1),Tu=he$1($u,k$3,{duration:_u[1],delay:_u[0],easing:r$5}),Tu.start()}),Pu=!0)},o(Bu){Tu&&Tu.invalidate(),Bu&&(Cu=_e$1($u,k$3,{duration:_u[1],delay:_u[2],easing:o$5})),Pu=!1},d(Bu){Bu&&H$4($u),Bu&&Cu&&Cu.end()}}}function B$2(_u){let $u,Tu,Cu,Pu,Bu,Lu=_u[3]&&m$1(_u);return{c(){$u=kt("svg"),Tu=kt("defs"),Cu=kt("linearGradient"),Pu=kt("stop"),Bu=kt("stop"),Lu&&Lu.c(),Et(Pu,"offset","25%"),Et(Pu,"stop-color","white"),Et(Pu,"stop-opacity","1"),Et(Bu,"offset","100%"),Et(Bu,"stop-color","white"),Et(Bu,"stop-opacity","0.5"),Et(Cu,"id",_u[4]),Et(Cu,"gradientUnits","userSpaceOnUse"),Et($u,"class","line svelte-e72ouh"),Et($u,"viewBox","0 0 105 21")},m(Ru,Ou){vt(Ru,$u,Ou),ut($u,Tu),ut(Tu,Cu),ut(Cu,Pu),ut(Cu,Bu),Lu&&Lu.m($u,null)},p(Ru,[Ou]){Ru[3]?Lu?(Lu.p(Ru,Ou),Ou&8&&gt(Lu,1)):(Lu=m$1(Ru),Lu.c(),gt(Lu,1),Lu.m($u,null)):Lu&&(ae$5(),jt(Lu,1,1,()=>{Lu=null}),de$2())},i(Ru){gt(Lu)},o(Ru){jt(Lu)},d(Ru){Ru&&H$4($u),Lu&&Lu.d()}}}function C(_u,$u,Tu){let{inDelay:Cu=0}=$u,{duration:Pu=0}=$u,{outDelay:Bu=0}=$u,{unfolded:Lu}=$u;const Ru=r$7();return _u.$$set=Ou=>{"inDelay"in Ou&&Tu(0,Cu=Ou.inDelay),"duration"in Ou&&Tu(1,Pu=Ou.duration),"outDelay"in Ou&&Tu(2,Bu=Ou.outDelay),"unfolded"in Ou&&Tu(3,Lu=Ou.unfolded)},[Cu,Pu,Bu,Lu,Ru]}class A$2 extends be$1{constructor($u){super(),xe(this,$u,C,B$2,Dt,{inDelay:0,duration:1,outDelay:2,unfolded:3},q$3)}}function isObject$1(_u){return _u!==null&&typeof _u=="object"&&"constructor"in _u&&_u.constructor===Object}function extend$1(_u={},$u={}){Object.keys($u).forEach(Tu=>{typeof _u[Tu]=="undefined"?_u[Tu]=$u[Tu]:isObject$1($u[Tu])&&isObject$1(_u[Tu])&&Object.keys($u[Tu]).length>0&&extend$1(_u[Tu],$u[Tu])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const _u=typeof document!="undefined"?document:{};return extend$1(_u,ssrDocument),_u}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function _u(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_u){return typeof setTimeout=="undefined"?(_u(),null):setTimeout(_u,0)},cancelAnimationFrame(_u){typeof setTimeout!="undefined"&&clearTimeout(_u)}};function getWindow(){const _u=typeof window!="undefined"?window:{};return extend$1(_u,ssrWindow),_u}function makeReactive(_u){const $u=_u.__proto__;Object.defineProperty(_u,"__proto__",{get(){return $u},set(Tu){$u.__proto__=Tu}})}class Dom7 extends Array{constructor($u){typeof $u=="number"?super($u):(super(...$u||[]),makeReactive(this))}}function arrayFlat(_u=[]){const $u=[];return _u.forEach(Tu=>{Array.isArray(Tu)?$u.push(...arrayFlat(Tu)):$u.push(Tu)}),$u}function arrayFilter(_u,$u){return Array.prototype.filter.call(_u,$u)}function arrayUnique(_u){const $u=[];for(let Tu=0;Tu<_u.length;Tu+=1)$u.indexOf(_u[Tu])===-1&&$u.push(_u[Tu]);return $u}function qsa(_u,$u){if(typeof _u!="string")return[_u];const Tu=[],Cu=$u.querySelectorAll(_u);for(let Pu=0;Pu<Cu.length;Pu+=1)Tu.push(Cu[Pu]);return Tu}function $$4(_u,$u){const Tu=getWindow(),Cu=getDocument();let Pu=[];if(!$u&&_u instanceof Dom7)return _u;if(!_u)return new Dom7(Pu);if(typeof _u=="string"){const Bu=_u.trim();if(Bu.indexOf("<")>=0&&Bu.indexOf(">")>=0){let Lu="div";Bu.indexOf("<li")===0&&(Lu="ul"),Bu.indexOf("<tr")===0&&(Lu="tbody"),(Bu.indexOf("<td")===0||Bu.indexOf("<th")===0)&&(Lu="tr"),Bu.indexOf("<tbody")===0&&(Lu="table"),Bu.indexOf("<option")===0&&(Lu="select");const Ru=Cu.createElement(Lu);Ru.innerHTML=Bu;for(let Ou=0;Ou<Ru.childNodes.length;Ou+=1)Pu.push(Ru.childNodes[Ou])}else Pu=qsa(_u.trim(),$u||Cu)}else if(_u.nodeType||_u===Tu||_u===Cu)Pu.push(_u);else if(Array.isArray(_u)){if(_u instanceof Dom7)return _u;Pu=_u}return new Dom7(arrayUnique(Pu))}$$4.fn=Dom7.prototype;function addClass(..._u){const $u=arrayFlat(_u.map(Tu=>Tu.split(" ")));return this.forEach(Tu=>{Tu.classList.add(...$u)}),this}function removeClass(..._u){const $u=arrayFlat(_u.map(Tu=>Tu.split(" ")));return this.forEach(Tu=>{Tu.classList.remove(...$u)}),this}function toggleClass(..._u){const $u=arrayFlat(_u.map(Tu=>Tu.split(" ")));this.forEach(Tu=>{$u.forEach(Cu=>{Tu.classList.toggle(Cu)})})}function hasClass(..._u){const $u=arrayFlat(_u.map(Tu=>Tu.split(" ")));return arrayFilter(this,Tu=>$u.filter(Cu=>Tu.classList.contains(Cu)).length>0).length>0}function attr(_u,$u){if(arguments.length===1&&typeof _u=="string")return this[0]?this[0].getAttribute(_u):void 0;for(let Tu=0;Tu<this.length;Tu+=1)if(arguments.length===2)this[Tu].setAttribute(_u,$u);else for(const Cu in _u)this[Tu][Cu]=_u[Cu],this[Tu].setAttribute(Cu,_u[Cu]);return this}function removeAttr(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].removeAttribute(_u);return this}function transform(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transform=_u;return this}function transition$1(_u){for(let $u=0;$u<this.length;$u+=1)this[$u].style.transitionDuration=typeof _u!="string"?`${_u}ms`:_u;return this}function on(..._u){let[$u,Tu,Cu,Pu]=_u;typeof _u[1]=="function"&&([$u,Cu,Pu]=_u,Tu=void 0),Pu||(Pu=!1);function Bu(Du){const Fu=Du.target;if(!Fu)return;const Vu=Du.target.dom7EventData||[];if(Vu.indexOf(Du)<0&&Vu.unshift(Du),$$4(Fu).is(Tu))Cu.apply(Fu,Vu);else{const ku=$$4(Fu).parents();for(let Nu=0;Nu<ku.length;Nu+=1)$$4(ku[Nu]).is(Tu)&&Cu.apply(ku[Nu],Vu)}}function Lu(Du){const Fu=Du&&Du.target?Du.target.dom7EventData||[]:[];Fu.indexOf(Du)<0&&Fu.unshift(Du),Cu.apply(this,Fu)}const Ru=$u.split(" ");let Ou;for(let Du=0;Du<this.length;Du+=1){const Fu=this[Du];if(Tu)for(Ou=0;Ou<Ru.length;Ou+=1){const Vu=Ru[Ou];Fu.dom7LiveListeners||(Fu.dom7LiveListeners={}),Fu.dom7LiveListeners[Vu]||(Fu.dom7LiveListeners[Vu]=[]),Fu.dom7LiveListeners[Vu].push({listener:Cu,proxyListener:Bu}),Fu.addEventListener(Vu,Bu,Pu)}else for(Ou=0;Ou<Ru.length;Ou+=1){const Vu=Ru[Ou];Fu.dom7Listeners||(Fu.dom7Listeners={}),Fu.dom7Listeners[Vu]||(Fu.dom7Listeners[Vu]=[]),Fu.dom7Listeners[Vu].push({listener:Cu,proxyListener:Lu}),Fu.addEventListener(Vu,Lu,Pu)}}return this}function off(..._u){let[$u,Tu,Cu,Pu]=_u;typeof _u[1]=="function"&&([$u,Cu,Pu]=_u,Tu=void 0),Pu||(Pu=!1);const Bu=$u.split(" ");for(let Lu=0;Lu<Bu.length;Lu+=1){const Ru=Bu[Lu];for(let Ou=0;Ou<this.length;Ou+=1){const Du=this[Ou];let Fu;if(!Tu&&Du.dom7Listeners?Fu=Du.dom7Listeners[Ru]:Tu&&Du.dom7LiveListeners&&(Fu=Du.dom7LiveListeners[Ru]),Fu&&Fu.length)for(let Vu=Fu.length-1;Vu>=0;Vu-=1){const ku=Fu[Vu];Cu&&ku.listener===Cu||Cu&&ku.listener&&ku.listener.dom7proxy&&ku.listener.dom7proxy===Cu?(Du.removeEventListener(Ru,ku.proxyListener,Pu),Fu.splice(Vu,1)):Cu||(Du.removeEventListener(Ru,ku.proxyListener,Pu),Fu.splice(Vu,1))}}}return this}function trigger(..._u){const $u=getWindow(),Tu=_u[0].split(" "),Cu=_u[1];for(let Pu=0;Pu<Tu.length;Pu+=1){const Bu=Tu[Pu];for(let Lu=0;Lu<this.length;Lu+=1){const Ru=this[Lu];if($u.CustomEvent){const Ou=new $u.CustomEvent(Bu,{detail:Cu,bubbles:!0,cancelable:!0});Ru.dom7EventData=_u.filter((Du,Fu)=>Fu>0),Ru.dispatchEvent(Ou),Ru.dom7EventData=[],delete Ru.dom7EventData}}}return this}function transitionEnd$1(_u){const $u=this;function Tu(Cu){Cu.target===this&&(_u.call(this,Cu),$u.off("transitionend",Tu))}return _u&&$u.on("transitionend",Tu),this}function outerWidth(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetWidth+parseFloat($u.getPropertyValue("margin-right"))+parseFloat($u.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(_u){if(this.length>0){if(_u){const $u=this.styles();return this[0].offsetHeight+parseFloat($u.getPropertyValue("margin-top"))+parseFloat($u.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const _u=getWindow(),$u=getDocument(),Tu=this[0],Cu=Tu.getBoundingClientRect(),Pu=$u.body,Bu=Tu.clientTop||Pu.clientTop||0,Lu=Tu.clientLeft||Pu.clientLeft||0,Ru=Tu===_u?_u.scrollY:Tu.scrollTop,Ou=Tu===_u?_u.scrollX:Tu.scrollLeft;return{top:Cu.top+Ru-Bu,left:Cu.left+Ou-Lu}}return null}function styles(){const _u=getWindow();return this[0]?_u.getComputedStyle(this[0],null):{}}function css(_u,$u){const Tu=getWindow();let Cu;if(arguments.length===1)if(typeof _u=="string"){if(this[0])return Tu.getComputedStyle(this[0],null).getPropertyValue(_u)}else{for(Cu=0;Cu<this.length;Cu+=1)for(const Pu in _u)this[Cu].style[Pu]=_u[Pu];return this}if(arguments.length===2&&typeof _u=="string"){for(Cu=0;Cu<this.length;Cu+=1)this[Cu].style[_u]=$u;return this}return this}function each(_u){return _u?(this.forEach(($u,Tu)=>{_u.apply($u,[$u,Tu])}),this):this}function filter(_u){const $u=arrayFilter(this,_u);return $$4($u)}function html(_u){if(typeof _u=="undefined")return this[0]?this[0].innerHTML:null;for(let $u=0;$u<this.length;$u+=1)this[$u].innerHTML=_u;return this}function text(_u){if(typeof _u=="undefined")return this[0]?this[0].textContent.trim():null;for(let $u=0;$u<this.length;$u+=1)this[$u].textContent=_u;return this}function is(_u){const $u=getWindow(),Tu=getDocument(),Cu=this[0];let Pu,Bu;if(!Cu||typeof _u=="undefined")return!1;if(typeof _u=="string"){if(Cu.matches)return Cu.matches(_u);if(Cu.webkitMatchesSelector)return Cu.webkitMatchesSelector(_u);if(Cu.msMatchesSelector)return Cu.msMatchesSelector(_u);for(Pu=$$4(_u),Bu=0;Bu<Pu.length;Bu+=1)if(Pu[Bu]===Cu)return!0;return!1}if(_u===Tu)return Cu===Tu;if(_u===$u)return Cu===$u;if(_u.nodeType||_u instanceof Dom7){for(Pu=_u.nodeType?[_u]:_u,Bu=0;Bu<Pu.length;Bu+=1)if(Pu[Bu]===Cu)return!0;return!1}return!1}function index(){let _u=this[0],$u;if(_u){for($u=0;(_u=_u.previousSibling)!==null;)_u.nodeType===1&&($u+=1);return $u}}function eq(_u){if(typeof _u=="undefined")return this;const $u=this.length;if(_u>$u-1)return $$4([]);if(_u<0){const Tu=$u+_u;return Tu<0?$$4([]):$$4([this[Tu]])}return $$4([this[_u]])}function append(..._u){let $u;const Tu=getDocument();for(let Cu=0;Cu<_u.length;Cu+=1){$u=_u[Cu];for(let Pu=0;Pu<this.length;Pu+=1)if(typeof $u=="string"){const Bu=Tu.createElement("div");for(Bu.innerHTML=$u;Bu.firstChild;)this[Pu].appendChild(Bu.firstChild)}else if($u instanceof Dom7)for(let Bu=0;Bu<$u.length;Bu+=1)this[Pu].appendChild($u[Bu]);else this[Pu].appendChild($u)}return this}function prepend(_u){const $u=getDocument();let Tu,Cu;for(Tu=0;Tu<this.length;Tu+=1)if(typeof _u=="string"){const Pu=$u.createElement("div");for(Pu.innerHTML=_u,Cu=Pu.childNodes.length-1;Cu>=0;Cu-=1)this[Tu].insertBefore(Pu.childNodes[Cu],this[Tu].childNodes[0])}else if(_u instanceof Dom7)for(Cu=0;Cu<_u.length;Cu+=1)this[Tu].insertBefore(_u[Cu],this[Tu].childNodes[0]);else this[Tu].insertBefore(_u,this[Tu].childNodes[0]);return this}function next(_u){return this.length>0?_u?this[0].nextElementSibling&&$$4(this[0].nextElementSibling).is(_u)?$$4([this[0].nextElementSibling]):$$4([]):this[0].nextElementSibling?$$4([this[0].nextElementSibling]):$$4([]):$$4([])}function nextAll(_u){const $u=[];let Tu=this[0];if(!Tu)return $$4([]);for(;Tu.nextElementSibling;){const Cu=Tu.nextElementSibling;_u?$$4(Cu).is(_u)&&$u.push(Cu):$u.push(Cu),Tu=Cu}return $$4($u)}function prev(_u){if(this.length>0){const $u=this[0];return _u?$u.previousElementSibling&&$$4($u.previousElementSibling).is(_u)?$$4([$u.previousElementSibling]):$$4([]):$u.previousElementSibling?$$4([$u.previousElementSibling]):$$4([])}return $$4([])}function prevAll(_u){const $u=[];let Tu=this[0];if(!Tu)return $$4([]);for(;Tu.previousElementSibling;){const Cu=Tu.previousElementSibling;_u?$$4(Cu).is(_u)&&$u.push(Cu):$u.push(Cu),Tu=Cu}return $$4($u)}function parent(_u){const $u=[];for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].parentNode!==null&&(_u?$$4(this[Tu].parentNode).is(_u)&&$u.push(this[Tu].parentNode):$u.push(this[Tu].parentNode));return $$4($u)}function parents(_u){const $u=[];for(let Tu=0;Tu<this.length;Tu+=1){let Cu=this[Tu].parentNode;for(;Cu;)_u?$$4(Cu).is(_u)&&$u.push(Cu):$u.push(Cu),Cu=Cu.parentNode}return $$4($u)}function closest(_u){let $u=this;return typeof _u=="undefined"?$$4([]):($u.is(_u)||($u=$u.parents(_u).eq(0)),$u)}function find(_u){const $u=[];for(let Tu=0;Tu<this.length;Tu+=1){const Cu=this[Tu].querySelectorAll(_u);for(let Pu=0;Pu<Cu.length;Pu+=1)$u.push(Cu[Pu])}return $$4($u)}function children(_u){const $u=[];for(let Tu=0;Tu<this.length;Tu+=1){const Cu=this[Tu].children;for(let Pu=0;Pu<Cu.length;Pu+=1)(!_u||$$4(Cu[Pu]).is(_u))&&$u.push(Cu[Pu])}return $$4($u)}function remove(){for(let _u=0;_u<this.length;_u+=1)this[_u].parentNode&&this[_u].parentNode.removeChild(this[_u]);return this}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter,remove};Object.keys(Methods).forEach(_u=>{Object.defineProperty($$4.fn,_u,{value:Methods[_u],writable:!0})});function deleteProps(_u){const $u=_u;Object.keys($u).forEach(Tu=>{try{$u[Tu]=null}catch{}try{delete $u[Tu]}catch{}})}function nextTick(_u,$u=0){return setTimeout(_u,$u)}function now(){return Date.now()}function getComputedStyle$1(_u){const $u=getWindow();let Tu;return $u.getComputedStyle&&(Tu=$u.getComputedStyle(_u,null)),!Tu&&_u.currentStyle&&(Tu=_u.currentStyle),Tu||(Tu=_u.style),Tu}function getTranslate(_u,$u="x"){const Tu=getWindow();let Cu,Pu,Bu;const Lu=getComputedStyle$1(_u);return Tu.WebKitCSSMatrix?(Pu=Lu.transform||Lu.webkitTransform,Pu.split(",").length>6&&(Pu=Pu.split(", ").map(Ru=>Ru.replace(",",".")).join(", ")),Bu=new Tu.WebKitCSSMatrix(Pu==="none"?"":Pu)):(Bu=Lu.MozTransform||Lu.OTransform||Lu.MsTransform||Lu.msTransform||Lu.transform||Lu.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Cu=Bu.toString().split(",")),$u==="x"&&(Tu.WebKitCSSMatrix?Pu=Bu.m41:Cu.length===16?Pu=parseFloat(Cu[12]):Pu=parseFloat(Cu[4])),$u==="y"&&(Tu.WebKitCSSMatrix?Pu=Bu.m42:Cu.length===16?Pu=parseFloat(Cu[13]):Pu=parseFloat(Cu[5])),Pu||0}function isObject(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function isNode(_u){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?_u instanceof HTMLElement:_u&&(_u.nodeType===1||_u.nodeType===11)}function extend(..._u){const $u=Object(_u[0]),Tu=["__proto__","constructor","prototype"];for(let Cu=1;Cu<_u.length;Cu+=1){const Pu=_u[Cu];if(Pu!=null&&!isNode(Pu)){const Bu=Object.keys(Object(Pu)).filter(Lu=>Tu.indexOf(Lu)<0);for(let Lu=0,Ru=Bu.length;Lu<Ru;Lu+=1){const Ou=Bu[Lu],Du=Object.getOwnPropertyDescriptor(Pu,Ou);Du!==void 0&&Du.enumerable&&(isObject($u[Ou])&&isObject(Pu[Ou])?Pu[Ou].__swiper__?$u[Ou]=Pu[Ou]:extend($u[Ou],Pu[Ou]):!isObject($u[Ou])&&isObject(Pu[Ou])?($u[Ou]={},Pu[Ou].__swiper__?$u[Ou]=Pu[Ou]:extend($u[Ou],Pu[Ou])):$u[Ou]=Pu[Ou])}}}return $u}function setCSSProperty(_u,$u,Tu){_u.style.setProperty($u,Tu)}function animateCSSModeScroll({swiper:_u,targetPosition:$u,side:Tu}){const Cu=getWindow(),Pu=-_u.translate;let Bu=null,Lu;const Ru=_u.params.speed;_u.wrapperEl.style.scrollSnapType="none",Cu.cancelAnimationFrame(_u.cssModeFrameID);const Ou=$u>Pu?"next":"prev",Du=(Vu,ku)=>Ou==="next"&&Vu>=ku||Ou==="prev"&&Vu<=ku,Fu=()=>{Lu=new Date().getTime(),Bu===null&&(Bu=Lu);const Vu=Math.max(Math.min((Lu-Bu)/Ru,1),0),ku=.5-Math.cos(Vu*Math.PI)/2;let Nu=Pu+ku*($u-Pu);if(Du(Nu,$u)&&(Nu=$u),_u.wrapperEl.scrollTo({[Tu]:Nu}),Du(Nu,$u)){_u.wrapperEl.style.overflow="hidden",_u.wrapperEl.style.scrollSnapType="",setTimeout(()=>{_u.wrapperEl.style.overflow="",_u.wrapperEl.scrollTo({[Tu]:Nu})}),Cu.cancelAnimationFrame(_u.cssModeFrameID);return}_u.cssModeFrameID=Cu.requestAnimationFrame(Fu)};Fu()}let support;function calcSupport(){const _u=getWindow(),$u=getDocument();return{smoothScroll:$u.documentElement&&"scrollBehavior"in $u.documentElement.style,touch:!!("ontouchstart"in _u||_u.DocumentTouch&&$u instanceof _u.DocumentTouch),passiveListener:function(){let Cu=!1;try{const Pu=Object.defineProperty({},"passive",{get(){Cu=!0}});_u.addEventListener("testPassiveListener",null,Pu)}catch{}return Cu}(),gestures:function(){return"ongesturestart"in _u}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:_u}={}){const $u=getSupport(),Tu=getWindow(),Cu=Tu.navigator.platform,Pu=_u||Tu.navigator.userAgent,Bu={ios:!1,android:!1},Lu=Tu.screen.width,Ru=Tu.screen.height,Ou=Pu.match(/(Android);?[\s\/]+([\d.]+)?/);let Du=Pu.match(/(iPad).*OS\s([\d_]+)/);const Fu=Pu.match(/(iPod)(.*OS\s([\d_]+))?/),Vu=!Du&&Pu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),ku=Cu==="Win32";let Nu=Cu==="MacIntel";const Gu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!Du&&Nu&&$u.touch&&Gu.indexOf(`${Lu}x${Ru}`)>=0&&(Du=Pu.match(/(Version)\/([\d.]+)/),Du||(Du=[0,1,"13_0_0"]),Nu=!1),Ou&&!ku&&(Bu.os="android",Bu.android=!0),(Du||Vu||Fu)&&(Bu.os="ios",Bu.ios=!0),Bu}function getDevice(_u={}){return deviceCached||(deviceCached=calcDevice(_u)),deviceCached}let browser;function calcBrowser(){const _u=getWindow();function $u(){const Tu=_u.navigator.userAgent.toLowerCase();return Tu.indexOf("safari")>=0&&Tu.indexOf("chrome")<0&&Tu.indexOf("android")<0}return{isSafari:$u(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_u.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize({swiper:_u,on:$u,emit:Tu}){const Cu=getWindow();let Pu=null,Bu=null;const Lu=()=>{!_u||_u.destroyed||!_u.initialized||(Tu("beforeResize"),Tu("resize"))},Ru=()=>{!_u||_u.destroyed||!_u.initialized||(Pu=new ResizeObserver(Fu=>{Bu=Cu.requestAnimationFrame(()=>{const{width:Vu,height:ku}=_u;let Nu=Vu,Gu=ku;Fu.forEach(({contentBoxSize:ju,contentRect:Hu,target:Uu})=>{Uu&&Uu!==_u.el||(Nu=Hu?Hu.width:(ju[0]||ju).inlineSize,Gu=Hu?Hu.height:(ju[0]||ju).blockSize)}),(Nu!==Vu||Gu!==ku)&&Lu()})}),Pu.observe(_u.el))},Ou=()=>{Bu&&Cu.cancelAnimationFrame(Bu),Pu&&Pu.unobserve&&_u.el&&(Pu.unobserve(_u.el),Pu=null)},Du=()=>{!_u||_u.destroyed||!_u.initialized||Tu("orientationchange")};$u("init",()=>{if(_u.params.resizeObserver&&typeof Cu.ResizeObserver!="undefined"){Ru();return}Cu.addEventListener("resize",Lu),Cu.addEventListener("orientationchange",Du)}),$u("destroy",()=>{Ou(),Cu.removeEventListener("resize",Lu),Cu.removeEventListener("orientationchange",Du)})}function Observer({swiper:_u,extendParams:$u,on:Tu,emit:Cu}){const Pu=[],Bu=getWindow(),Lu=(Du,Fu={})=>{const Vu=Bu.MutationObserver||Bu.WebkitMutationObserver,ku=new Vu(Nu=>{if(Nu.length===1){Cu("observerUpdate",Nu[0]);return}const Gu=function(){Cu("observerUpdate",Nu[0])};Bu.requestAnimationFrame?Bu.requestAnimationFrame(Gu):Bu.setTimeout(Gu,0)});ku.observe(Du,{attributes:typeof Fu.attributes=="undefined"?!0:Fu.attributes,childList:typeof Fu.childList=="undefined"?!0:Fu.childList,characterData:typeof Fu.characterData=="undefined"?!0:Fu.characterData}),Pu.push(ku)},Ru=()=>{if(!!_u.params.observer){if(_u.params.observeParents){const Du=_u.$el.parents();for(let Fu=0;Fu<Du.length;Fu+=1)Lu(Du[Fu])}Lu(_u.$el[0],{childList:_u.params.observeSlideChildren}),Lu(_u.$wrapperEl[0],{attributes:!1})}},Ou=()=>{Pu.forEach(Du=>{Du.disconnect()}),Pu.splice(0,Pu.length)};$u({observer:!1,observeParents:!1,observeSlideChildren:!1}),Tu("init",Ru),Tu("destroy",Ou)}var eventsEmitter={on(_u,$u,Tu){const Cu=this;if(!Cu.eventsListeners||Cu.destroyed||typeof $u!="function")return Cu;const Pu=Tu?"unshift":"push";return _u.split(" ").forEach(Bu=>{Cu.eventsListeners[Bu]||(Cu.eventsListeners[Bu]=[]),Cu.eventsListeners[Bu][Pu]($u)}),Cu},once(_u,$u,Tu){const Cu=this;if(!Cu.eventsListeners||Cu.destroyed||typeof $u!="function")return Cu;function Pu(...Bu){Cu.off(_u,Pu),Pu.__emitterProxy&&delete Pu.__emitterProxy,$u.apply(Cu,Bu)}return Pu.__emitterProxy=$u,Cu.on(_u,Pu,Tu)},onAny(_u,$u){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||typeof _u!="function")return Tu;const Cu=$u?"unshift":"push";return Tu.eventsAnyListeners.indexOf(_u)<0&&Tu.eventsAnyListeners[Cu](_u),Tu},offAny(_u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsAnyListeners)return $u;const Tu=$u.eventsAnyListeners.indexOf(_u);return Tu>=0&&$u.eventsAnyListeners.splice(Tu,1),$u},off(_u,$u){const Tu=this;return!Tu.eventsListeners||Tu.destroyed||!Tu.eventsListeners||_u.split(" ").forEach(Cu=>{typeof $u=="undefined"?Tu.eventsListeners[Cu]=[]:Tu.eventsListeners[Cu]&&Tu.eventsListeners[Cu].forEach((Pu,Bu)=>{(Pu===$u||Pu.__emitterProxy&&Pu.__emitterProxy===$u)&&Tu.eventsListeners[Cu].splice(Bu,1)})}),Tu},emit(..._u){const $u=this;if(!$u.eventsListeners||$u.destroyed||!$u.eventsListeners)return $u;let Tu,Cu,Pu;return typeof _u[0]=="string"||Array.isArray(_u[0])?(Tu=_u[0],Cu=_u.slice(1,_u.length),Pu=$u):(Tu=_u[0].events,Cu=_u[0].data,Pu=_u[0].context||$u),Cu.unshift(Pu),(Array.isArray(Tu)?Tu:Tu.split(" ")).forEach(Lu=>{$u.eventsAnyListeners&&$u.eventsAnyListeners.length&&$u.eventsAnyListeners.forEach(Ru=>{Ru.apply(Pu,[Lu,...Cu])}),$u.eventsListeners&&$u.eventsListeners[Lu]&&$u.eventsListeners[Lu].forEach(Ru=>{Ru.apply(Pu,Cu)})}),$u}};function updateSize(){const _u=this;let $u,Tu;const Cu=_u.$el;typeof _u.params.width!="undefined"&&_u.params.width!==null?$u=_u.params.width:$u=Cu[0].clientWidth,typeof _u.params.height!="undefined"&&_u.params.height!==null?Tu=_u.params.height:Tu=Cu[0].clientHeight,!($u===0&&_u.isHorizontal()||Tu===0&&_u.isVertical())&&($u=$u-parseInt(Cu.css("padding-left")||0,10)-parseInt(Cu.css("padding-right")||0,10),Tu=Tu-parseInt(Cu.css("padding-top")||0,10)-parseInt(Cu.css("padding-bottom")||0,10),Number.isNaN($u)&&($u=0),Number.isNaN(Tu)&&(Tu=0),Object.assign(_u,{width:$u,height:Tu,size:_u.isHorizontal()?$u:Tu}))}function updateSlides(){const _u=this;function $u(qu){return _u.isHorizontal()?qu:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[qu]}function Tu(qu,Xu){return parseFloat(qu.getPropertyValue($u(Xu))||0)}const Cu=_u.params,{$wrapperEl:Pu,size:Bu,rtlTranslate:Lu,wrongRTL:Ru}=_u,Ou=_u.virtual&&Cu.virtual.enabled,Du=Ou?_u.virtual.slides.length:_u.slides.length,Fu=Pu.children(`.${_u.params.slideClass}`),Vu=Ou?_u.virtual.slides.length:Fu.length;let ku=[];const Nu=[],Gu=[];let ju=Cu.slidesOffsetBefore;typeof ju=="function"&&(ju=Cu.slidesOffsetBefore.call(_u));let Hu=Cu.slidesOffsetAfter;typeof Hu=="function"&&(Hu=Cu.slidesOffsetAfter.call(_u));const Uu=_u.snapGrid.length,zu=_u.slidesGrid.length;let Wu=Cu.spaceBetween,Qu=-ju,Ku=0,Yu=0;if(typeof Bu=="undefined")return;typeof Wu=="string"&&Wu.indexOf("%")>=0&&(Wu=parseFloat(Wu.replace("%",""))/100*Bu),_u.virtualSize=-Wu,Lu?Fu.css({marginLeft:"",marginBottom:"",marginTop:""}):Fu.css({marginRight:"",marginBottom:"",marginTop:""}),Cu.centeredSlides&&Cu.cssMode&&(setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-after",""));const Xc=Cu.grid&&Cu.grid.rows>1&&_u.grid;Xc&&_u.grid.initSlides(Vu);let _d;const _f=Cu.slidesPerView==="auto"&&Cu.breakpoints&&Object.keys(Cu.breakpoints).filter(qu=>typeof Cu.breakpoints[qu].slidesPerView!="undefined").length>0;for(let qu=0;qu<Vu;qu+=1){_d=0;const Xu=Fu.eq(qu);if(Xc&&_u.grid.updateSlide(qu,Xu,Vu,$u),Xu.css("display")!=="none"){if(Cu.slidesPerView==="auto"){_f&&(Fu[qu].style[$u("width")]="");const Zu=getComputedStyle(Xu[0]),_c=Xu[0].style.transform,Ju=Xu[0].style.webkitTransform;if(_c&&(Xu[0].style.transform="none"),Ju&&(Xu[0].style.webkitTransform="none"),Cu.roundLengths)_d=_u.isHorizontal()?Xu.outerWidth(!0):Xu.outerHeight(!0);else{const _h=Tu(Zu,"width"),ep=Tu(Zu,"padding-left"),tp=Tu(Zu,"padding-right"),rp=Tu(Zu,"margin-left"),dp=Tu(Zu,"margin-right"),cp=Zu.getPropertyValue("box-sizing");if(cp&&cp==="border-box")_d=_h+rp+dp;else{const{clientWidth:Sp,offsetWidth:yp}=Xu[0];_d=_h+ep+tp+rp+dp+(yp-Sp)}}_c&&(Xu[0].style.transform=_c),Ju&&(Xu[0].style.webkitTransform=Ju),Cu.roundLengths&&(_d=Math.floor(_d))}else _d=(Bu-(Cu.slidesPerView-1)*Wu)/Cu.slidesPerView,Cu.roundLengths&&(_d=Math.floor(_d)),Fu[qu]&&(Fu[qu].style[$u("width")]=`${_d}px`);Fu[qu]&&(Fu[qu].swiperSlideSize=_d),Gu.push(_d),Cu.centeredSlides?(Qu=Qu+_d/2+Ku/2+Wu,Ku===0&&qu!==0&&(Qu=Qu-Bu/2-Wu),qu===0&&(Qu=Qu-Bu/2-Wu),Math.abs(Qu)<1/1e3&&(Qu=0),Cu.roundLengths&&(Qu=Math.floor(Qu)),Yu%Cu.slidesPerGroup===0&&ku.push(Qu),Nu.push(Qu)):(Cu.roundLengths&&(Qu=Math.floor(Qu)),(Yu-Math.min(_u.params.slidesPerGroupSkip,Yu))%_u.params.slidesPerGroup===0&&ku.push(Qu),Nu.push(Qu),Qu=Qu+_d+Wu),_u.virtualSize+=_d+Wu,Ku=_d,Yu+=1}}if(_u.virtualSize=Math.max(_u.virtualSize,Bu)+Hu,Lu&&Ru&&(Cu.effect==="slide"||Cu.effect==="coverflow")&&Pu.css({width:`${_u.virtualSize+Cu.spaceBetween}px`}),Cu.setWrapperSize&&Pu.css({[$u("width")]:`${_u.virtualSize+Cu.spaceBetween}px`}),Xc&&_u.grid.updateWrapperSize(_d,ku,$u),!Cu.centeredSlides){const qu=[];for(let Xu=0;Xu<ku.length;Xu+=1){let Zu=ku[Xu];Cu.roundLengths&&(Zu=Math.floor(Zu)),ku[Xu]<=_u.virtualSize-Bu&&qu.push(Zu)}ku=qu,Math.floor(_u.virtualSize-Bu)-Math.floor(ku[ku.length-1])>1&&ku.push(_u.virtualSize-Bu)}if(ku.length===0&&(ku=[0]),Cu.spaceBetween!==0){const qu=_u.isHorizontal()&&Lu?"marginLeft":$u("marginRight");Fu.filter((Xu,Zu)=>Cu.cssMode?Zu!==Fu.length-1:!0).css({[qu]:`${Wu}px`})}if(Cu.centeredSlides&&Cu.centeredSlidesBounds){let qu=0;Gu.forEach(Zu=>{qu+=Zu+(Cu.spaceBetween?Cu.spaceBetween:0)}),qu-=Cu.spaceBetween;const Xu=qu-Bu;ku=ku.map(Zu=>Zu<0?-ju:Zu>Xu?Xu+Hu:Zu)}if(Cu.centerInsufficientSlides){let qu=0;if(Gu.forEach(Xu=>{qu+=Xu+(Cu.spaceBetween?Cu.spaceBetween:0)}),qu-=Cu.spaceBetween,qu<Bu){const Xu=(Bu-qu)/2;ku.forEach((Zu,_c)=>{ku[_c]=Zu-Xu}),Nu.forEach((Zu,_c)=>{Nu[_c]=Zu+Xu})}}if(Object.assign(_u,{slides:Fu,snapGrid:ku,slidesGrid:Nu,slidesSizesGrid:Gu}),Cu.centeredSlides&&Cu.cssMode&&!Cu.centeredSlidesBounds){setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-before",`${-ku[0]}px`),setCSSProperty(_u.wrapperEl,"--swiper-centered-offset-after",`${_u.size/2-Gu[Gu.length-1]/2}px`);const qu=-_u.snapGrid[0],Xu=-_u.slidesGrid[0];_u.snapGrid=_u.snapGrid.map(Zu=>Zu+qu),_u.slidesGrid=_u.slidesGrid.map(Zu=>Zu+Xu)}if(Vu!==Du&&_u.emit("slidesLengthChange"),ku.length!==Uu&&(_u.params.watchOverflow&&_u.checkOverflow(),_u.emit("snapGridLengthChange")),Nu.length!==zu&&_u.emit("slidesGridLengthChange"),Cu.watchSlidesProgress&&_u.updateSlidesOffset(),!Ou&&!Cu.cssMode&&(Cu.effect==="slide"||Cu.effect==="fade")){const qu=`${Cu.containerModifierClass}backface-hidden`,Xu=_u.$el.hasClass(qu);Vu<=Cu.maxBackfaceHiddenSlides?Xu||_u.$el.addClass(qu):Xu&&_u.$el.removeClass(qu)}}function updateAutoHeight(_u){const $u=this,Tu=[],Cu=$u.virtual&&$u.params.virtual.enabled;let Pu=0,Bu;typeof _u=="number"?$u.setTransition(_u):_u===!0&&$u.setTransition($u.params.speed);const Lu=Ru=>Cu?$u.slides.filter(Ou=>parseInt(Ou.getAttribute("data-swiper-slide-index"),10)===Ru)[0]:$u.slides.eq(Ru)[0];if($u.params.slidesPerView!=="auto"&&$u.params.slidesPerView>1)if($u.params.centeredSlides)($u.visibleSlides||$$4([])).each(Ru=>{Tu.push(Ru)});else for(Bu=0;Bu<Math.ceil($u.params.slidesPerView);Bu+=1){const Ru=$u.activeIndex+Bu;if(Ru>$u.slides.length&&!Cu)break;Tu.push(Lu(Ru))}else Tu.push(Lu($u.activeIndex));for(Bu=0;Bu<Tu.length;Bu+=1)if(typeof Tu[Bu]!="undefined"){const Ru=Tu[Bu].offsetHeight;Pu=Ru>Pu?Ru:Pu}(Pu||Pu===0)&&$u.$wrapperEl.css("height",`${Pu}px`)}function updateSlidesOffset(){const _u=this,$u=_u.slides;for(let Tu=0;Tu<$u.length;Tu+=1)$u[Tu].swiperSlideOffset=_u.isHorizontal()?$u[Tu].offsetLeft:$u[Tu].offsetTop}function updateSlidesProgress(_u=this&&this.translate||0){const $u=this,Tu=$u.params,{slides:Cu,rtlTranslate:Pu,snapGrid:Bu}=$u;if(Cu.length===0)return;typeof Cu[0].swiperSlideOffset=="undefined"&&$u.updateSlidesOffset();let Lu=-_u;Pu&&(Lu=_u),Cu.removeClass(Tu.slideVisibleClass),$u.visibleSlidesIndexes=[],$u.visibleSlides=[];for(let Ru=0;Ru<Cu.length;Ru+=1){const Ou=Cu[Ru];let Du=Ou.swiperSlideOffset;Tu.cssMode&&Tu.centeredSlides&&(Du-=Cu[0].swiperSlideOffset);const Fu=(Lu+(Tu.centeredSlides?$u.minTranslate():0)-Du)/(Ou.swiperSlideSize+Tu.spaceBetween),Vu=(Lu-Bu[0]+(Tu.centeredSlides?$u.minTranslate():0)-Du)/(Ou.swiperSlideSize+Tu.spaceBetween),ku=-(Lu-Du),Nu=ku+$u.slidesSizesGrid[Ru];(ku>=0&&ku<$u.size-1||Nu>1&&Nu<=$u.size||ku<=0&&Nu>=$u.size)&&($u.visibleSlides.push(Ou),$u.visibleSlidesIndexes.push(Ru),Cu.eq(Ru).addClass(Tu.slideVisibleClass)),Ou.progress=Pu?-Fu:Fu,Ou.originalProgress=Pu?-Vu:Vu}$u.visibleSlides=$$4($u.visibleSlides)}function updateProgress(_u){const $u=this;if(typeof _u=="undefined"){const Du=$u.rtlTranslate?-1:1;_u=$u&&$u.translate&&$u.translate*Du||0}const Tu=$u.params,Cu=$u.maxTranslate()-$u.minTranslate();let{progress:Pu,isBeginning:Bu,isEnd:Lu}=$u;const Ru=Bu,Ou=Lu;Cu===0?(Pu=0,Bu=!0,Lu=!0):(Pu=(_u-$u.minTranslate())/Cu,Bu=Pu<=0,Lu=Pu>=1),Object.assign($u,{progress:Pu,isBeginning:Bu,isEnd:Lu}),(Tu.watchSlidesProgress||Tu.centeredSlides&&Tu.autoHeight)&&$u.updateSlidesProgress(_u),Bu&&!Ru&&$u.emit("reachBeginning toEdge"),Lu&&!Ou&&$u.emit("reachEnd toEdge"),(Ru&&!Bu||Ou&&!Lu)&&$u.emit("fromEdge"),$u.emit("progress",Pu)}function updateSlidesClasses(){const _u=this,{slides:$u,params:Tu,$wrapperEl:Cu,activeIndex:Pu,realIndex:Bu}=_u,Lu=_u.virtual&&Tu.virtual.enabled;$u.removeClass(`${Tu.slideActiveClass} ${Tu.slideNextClass} ${Tu.slidePrevClass} ${Tu.slideDuplicateActiveClass} ${Tu.slideDuplicateNextClass} ${Tu.slideDuplicatePrevClass}`);let Ru;Lu?Ru=_u.$wrapperEl.find(`.${Tu.slideClass}[data-swiper-slide-index="${Pu}"]`):Ru=$u.eq(Pu),Ru.addClass(Tu.slideActiveClass),Tu.loop&&(Ru.hasClass(Tu.slideDuplicateClass)?Cu.children(`.${Tu.slideClass}:not(.${Tu.slideDuplicateClass})[data-swiper-slide-index="${Bu}"]`).addClass(Tu.slideDuplicateActiveClass):Cu.children(`.${Tu.slideClass}.${Tu.slideDuplicateClass}[data-swiper-slide-index="${Bu}"]`).addClass(Tu.slideDuplicateActiveClass));let Ou=Ru.nextAll(`.${Tu.slideClass}`).eq(0).addClass(Tu.slideNextClass);Tu.loop&&Ou.length===0&&(Ou=$u.eq(0),Ou.addClass(Tu.slideNextClass));let Du=Ru.prevAll(`.${Tu.slideClass}`).eq(0).addClass(Tu.slidePrevClass);Tu.loop&&Du.length===0&&(Du=$u.eq(-1),Du.addClass(Tu.slidePrevClass)),Tu.loop&&(Ou.hasClass(Tu.slideDuplicateClass)?Cu.children(`.${Tu.slideClass}:not(.${Tu.slideDuplicateClass})[data-swiper-slide-index="${Ou.attr("data-swiper-slide-index")}"]`).addClass(Tu.slideDuplicateNextClass):Cu.children(`.${Tu.slideClass}.${Tu.slideDuplicateClass}[data-swiper-slide-index="${Ou.attr("data-swiper-slide-index")}"]`).addClass(Tu.slideDuplicateNextClass),Du.hasClass(Tu.slideDuplicateClass)?Cu.children(`.${Tu.slideClass}:not(.${Tu.slideDuplicateClass})[data-swiper-slide-index="${Du.attr("data-swiper-slide-index")}"]`).addClass(Tu.slideDuplicatePrevClass):Cu.children(`.${Tu.slideClass}.${Tu.slideDuplicateClass}[data-swiper-slide-index="${Du.attr("data-swiper-slide-index")}"]`).addClass(Tu.slideDuplicatePrevClass)),_u.emitSlidesClasses()}function updateActiveIndex(_u){const $u=this,Tu=$u.rtlTranslate?$u.translate:-$u.translate,{slidesGrid:Cu,snapGrid:Pu,params:Bu,activeIndex:Lu,realIndex:Ru,snapIndex:Ou}=$u;let Du=_u,Fu;if(typeof Du=="undefined"){for(let ku=0;ku<Cu.length;ku+=1)typeof Cu[ku+1]!="undefined"?Tu>=Cu[ku]&&Tu<Cu[ku+1]-(Cu[ku+1]-Cu[ku])/2?Du=ku:Tu>=Cu[ku]&&Tu<Cu[ku+1]&&(Du=ku+1):Tu>=Cu[ku]&&(Du=ku);Bu.normalizeSlideIndex&&(Du<0||typeof Du=="undefined")&&(Du=0)}if(Pu.indexOf(Tu)>=0)Fu=Pu.indexOf(Tu);else{const ku=Math.min(Bu.slidesPerGroupSkip,Du);Fu=ku+Math.floor((Du-ku)/Bu.slidesPerGroup)}if(Fu>=Pu.length&&(Fu=Pu.length-1),Du===Lu){Fu!==Ou&&($u.snapIndex=Fu,$u.emit("snapIndexChange"));return}const Vu=parseInt($u.slides.eq(Du).attr("data-swiper-slide-index")||Du,10);Object.assign($u,{snapIndex:Fu,realIndex:Vu,previousIndex:Lu,activeIndex:Du}),$u.emit("activeIndexChange"),$u.emit("snapIndexChange"),Ru!==Vu&&$u.emit("realIndexChange"),($u.initialized||$u.params.runCallbacksOnInit)&&$u.emit("slideChange")}function updateClickedSlide(_u){const $u=this,Tu=$u.params,Cu=$$4(_u).closest(`.${Tu.slideClass}`)[0];let Pu=!1,Bu;if(Cu){for(let Lu=0;Lu<$u.slides.length;Lu+=1)if($u.slides[Lu]===Cu){Pu=!0,Bu=Lu;break}}if(Cu&&Pu)$u.clickedSlide=Cu,$u.virtual&&$u.params.virtual.enabled?$u.clickedIndex=parseInt($$4(Cu).attr("data-swiper-slide-index"),10):$u.clickedIndex=Bu;else{$u.clickedSlide=void 0,$u.clickedIndex=void 0;return}Tu.slideToClickedSlide&&$u.clickedIndex!==void 0&&$u.clickedIndex!==$u.activeIndex&&$u.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(_u=this.isHorizontal()?"x":"y"){const $u=this,{params:Tu,rtlTranslate:Cu,translate:Pu,$wrapperEl:Bu}=$u;if(Tu.virtualTranslate)return Cu?-Pu:Pu;if(Tu.cssMode)return Pu;let Lu=getTranslate(Bu[0],_u);return Cu&&(Lu=-Lu),Lu||0}function setTranslate(_u,$u){const Tu=this,{rtlTranslate:Cu,params:Pu,$wrapperEl:Bu,wrapperEl:Lu,progress:Ru}=Tu;let Ou=0,Du=0;const Fu=0;Tu.isHorizontal()?Ou=Cu?-_u:_u:Du=_u,Pu.roundLengths&&(Ou=Math.floor(Ou),Du=Math.floor(Du)),Pu.cssMode?Lu[Tu.isHorizontal()?"scrollLeft":"scrollTop"]=Tu.isHorizontal()?-Ou:-Du:Pu.virtualTranslate||Bu.transform(`translate3d(${Ou}px, ${Du}px, ${Fu}px)`),Tu.previousTranslate=Tu.translate,Tu.translate=Tu.isHorizontal()?Ou:Du;let Vu;const ku=Tu.maxTranslate()-Tu.minTranslate();ku===0?Vu=0:Vu=(_u-Tu.minTranslate())/ku,Vu!==Ru&&Tu.updateProgress(_u),Tu.emit("setTranslate",Tu.translate,$u)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(_u=0,$u=this.params.speed,Tu=!0,Cu=!0,Pu){const Bu=this,{params:Lu,wrapperEl:Ru}=Bu;if(Bu.animating&&Lu.preventInteractionOnTransition)return!1;const Ou=Bu.minTranslate(),Du=Bu.maxTranslate();let Fu;if(Cu&&_u>Ou?Fu=Ou:Cu&&_u<Du?Fu=Du:Fu=_u,Bu.updateProgress(Fu),Lu.cssMode){const Vu=Bu.isHorizontal();if($u===0)Ru[Vu?"scrollLeft":"scrollTop"]=-Fu;else{if(!Bu.support.smoothScroll)return animateCSSModeScroll({swiper:Bu,targetPosition:-Fu,side:Vu?"left":"top"}),!0;Ru.scrollTo({[Vu?"left":"top"]:-Fu,behavior:"smooth"})}return!0}return $u===0?(Bu.setTransition(0),Bu.setTranslate(Fu),Tu&&(Bu.emit("beforeTransitionStart",$u,Pu),Bu.emit("transitionEnd"))):(Bu.setTransition($u),Bu.setTranslate(Fu),Tu&&(Bu.emit("beforeTransitionStart",$u,Pu),Bu.emit("transitionStart")),Bu.animating||(Bu.animating=!0,Bu.onTranslateToWrapperTransitionEnd||(Bu.onTranslateToWrapperTransitionEnd=function(ku){!Bu||Bu.destroyed||ku.target===this&&(Bu.$wrapperEl[0].removeEventListener("transitionend",Bu.onTranslateToWrapperTransitionEnd),Bu.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Bu.onTranslateToWrapperTransitionEnd),Bu.onTranslateToWrapperTransitionEnd=null,delete Bu.onTranslateToWrapperTransitionEnd,Tu&&Bu.emit("transitionEnd"))}),Bu.$wrapperEl[0].addEventListener("transitionend",Bu.onTranslateToWrapperTransitionEnd),Bu.$wrapperEl[0].addEventListener("webkitTransitionEnd",Bu.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(_u,$u){const Tu=this;Tu.params.cssMode||Tu.$wrapperEl.transition(_u),Tu.emit("setTransition",_u,$u)}function transitionEmit({swiper:_u,runCallbacks:$u,direction:Tu,step:Cu}){const{activeIndex:Pu,previousIndex:Bu}=_u;let Lu=Tu;if(Lu||(Pu>Bu?Lu="next":Pu<Bu?Lu="prev":Lu="reset"),_u.emit(`transition${Cu}`),$u&&Pu!==Bu){if(Lu==="reset"){_u.emit(`slideResetTransition${Cu}`);return}_u.emit(`slideChangeTransition${Cu}`),Lu==="next"?_u.emit(`slideNextTransition${Cu}`):_u.emit(`slidePrevTransition${Cu}`)}}function transitionStart(_u=!0,$u){const Tu=this,{params:Cu}=Tu;Cu.cssMode||(Cu.autoHeight&&Tu.updateAutoHeight(),transitionEmit({swiper:Tu,runCallbacks:_u,direction:$u,step:"Start"}))}function transitionEnd(_u=!0,$u){const Tu=this,{params:Cu}=Tu;Tu.animating=!1,!Cu.cssMode&&(Tu.setTransition(0),transitionEmit({swiper:Tu,runCallbacks:_u,direction:$u,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(_u=0,$u=this.params.speed,Tu=!0,Cu,Pu){if(typeof _u!="number"&&typeof _u!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof _u}] given.`);if(typeof _u=="string"){const Wu=parseInt(_u,10);if(!isFinite(Wu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Wu}const Bu=this;let Lu=_u;Lu<0&&(Lu=0);const{params:Ru,snapGrid:Ou,slidesGrid:Du,previousIndex:Fu,activeIndex:Vu,rtlTranslate:ku,wrapperEl:Nu,enabled:Gu}=Bu;if(Bu.animating&&Ru.preventInteractionOnTransition||!Gu&&!Cu&&!Pu)return!1;const ju=Math.min(Bu.params.slidesPerGroupSkip,Lu);let Hu=ju+Math.floor((Lu-ju)/Bu.params.slidesPerGroup);Hu>=Ou.length&&(Hu=Ou.length-1);const Uu=-Ou[Hu];if(Ru.normalizeSlideIndex)for(let Wu=0;Wu<Du.length;Wu+=1){const Qu=-Math.floor(Uu*100),Ku=Math.floor(Du[Wu]*100),Yu=Math.floor(Du[Wu+1]*100);typeof Du[Wu+1]!="undefined"?Qu>=Ku&&Qu<Yu-(Yu-Ku)/2?Lu=Wu:Qu>=Ku&&Qu<Yu&&(Lu=Wu+1):Qu>=Ku&&(Lu=Wu)}if(Bu.initialized&&Lu!==Vu&&(!Bu.allowSlideNext&&Uu<Bu.translate&&Uu<Bu.minTranslate()||!Bu.allowSlidePrev&&Uu>Bu.translate&&Uu>Bu.maxTranslate()&&(Vu||0)!==Lu))return!1;Lu!==(Fu||0)&&Tu&&Bu.emit("beforeSlideChangeStart"),Bu.updateProgress(Uu);let zu;if(Lu>Vu?zu="next":Lu<Vu?zu="prev":zu="reset",ku&&-Uu===Bu.translate||!ku&&Uu===Bu.translate)return Bu.updateActiveIndex(Lu),Ru.autoHeight&&Bu.updateAutoHeight(),Bu.updateSlidesClasses(),Ru.effect!=="slide"&&Bu.setTranslate(Uu),zu!=="reset"&&(Bu.transitionStart(Tu,zu),Bu.transitionEnd(Tu,zu)),!1;if(Ru.cssMode){const Wu=Bu.isHorizontal(),Qu=ku?Uu:-Uu;if($u===0){const Ku=Bu.virtual&&Bu.params.virtual.enabled;Ku&&(Bu.wrapperEl.style.scrollSnapType="none",Bu._immediateVirtual=!0),Nu[Wu?"scrollLeft":"scrollTop"]=Qu,Ku&&requestAnimationFrame(()=>{Bu.wrapperEl.style.scrollSnapType="",Bu._swiperImmediateVirtual=!1})}else{if(!Bu.support.smoothScroll)return animateCSSModeScroll({swiper:Bu,targetPosition:Qu,side:Wu?"left":"top"}),!0;Nu.scrollTo({[Wu?"left":"top"]:Qu,behavior:"smooth"})}return!0}return Bu.setTransition($u),Bu.setTranslate(Uu),Bu.updateActiveIndex(Lu),Bu.updateSlidesClasses(),Bu.emit("beforeTransitionStart",$u,Cu),Bu.transitionStart(Tu,zu),$u===0?Bu.transitionEnd(Tu,zu):Bu.animating||(Bu.animating=!0,Bu.onSlideToWrapperTransitionEnd||(Bu.onSlideToWrapperTransitionEnd=function(Qu){!Bu||Bu.destroyed||Qu.target===this&&(Bu.$wrapperEl[0].removeEventListener("transitionend",Bu.onSlideToWrapperTransitionEnd),Bu.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Bu.onSlideToWrapperTransitionEnd),Bu.onSlideToWrapperTransitionEnd=null,delete Bu.onSlideToWrapperTransitionEnd,Bu.transitionEnd(Tu,zu))}),Bu.$wrapperEl[0].addEventListener("transitionend",Bu.onSlideToWrapperTransitionEnd),Bu.$wrapperEl[0].addEventListener("webkitTransitionEnd",Bu.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(_u=0,$u=this.params.speed,Tu=!0,Cu){if(typeof _u=="string"){const Lu=parseInt(_u,10);if(!isFinite(Lu))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${_u}] given.`);_u=Lu}const Pu=this;let Bu=_u;return Pu.params.loop&&(Bu+=Pu.loopedSlides),Pu.slideTo(Bu,$u,Tu,Cu)}function slideNext(_u=this.params.speed,$u=!0,Tu){const Cu=this,{animating:Pu,enabled:Bu,params:Lu}=Cu;if(!Bu)return Cu;let Ru=Lu.slidesPerGroup;Lu.slidesPerView==="auto"&&Lu.slidesPerGroup===1&&Lu.slidesPerGroupAuto&&(Ru=Math.max(Cu.slidesPerViewDynamic("current",!0),1));const Ou=Cu.activeIndex<Lu.slidesPerGroupSkip?1:Ru;if(Lu.loop){if(Pu&&Lu.loopPreventsSlide)return!1;Cu.loopFix(),Cu._clientLeft=Cu.$wrapperEl[0].clientLeft}return Lu.rewind&&Cu.isEnd?Cu.slideTo(0,_u,$u,Tu):Cu.slideTo(Cu.activeIndex+Ou,_u,$u,Tu)}function slidePrev(_u=this.params.speed,$u=!0,Tu){const Cu=this,{params:Pu,animating:Bu,snapGrid:Lu,slidesGrid:Ru,rtlTranslate:Ou,enabled:Du}=Cu;if(!Du)return Cu;if(Pu.loop){if(Bu&&Pu.loopPreventsSlide)return!1;Cu.loopFix(),Cu._clientLeft=Cu.$wrapperEl[0].clientLeft}const Fu=Ou?Cu.translate:-Cu.translate;function Vu(Hu){return Hu<0?-Math.floor(Math.abs(Hu)):Math.floor(Hu)}const ku=Vu(Fu),Nu=Lu.map(Hu=>Vu(Hu));let Gu=Lu[Nu.indexOf(ku)-1];if(typeof Gu=="undefined"&&Pu.cssMode){let Hu;Lu.forEach((Uu,zu)=>{ku>=Uu&&(Hu=zu)}),typeof Hu!="undefined"&&(Gu=Lu[Hu>0?Hu-1:Hu])}let ju=0;if(typeof Gu!="undefined"&&(ju=Ru.indexOf(Gu),ju<0&&(ju=Cu.activeIndex-1),Pu.slidesPerView==="auto"&&Pu.slidesPerGroup===1&&Pu.slidesPerGroupAuto&&(ju=ju-Cu.slidesPerViewDynamic("previous",!0)+1,ju=Math.max(ju,0))),Pu.rewind&&Cu.isBeginning){const Hu=Cu.params.virtual&&Cu.params.virtual.enabled&&Cu.virtual?Cu.virtual.slides.length-1:Cu.slides.length-1;return Cu.slideTo(Hu,_u,$u,Tu)}return Cu.slideTo(ju,_u,$u,Tu)}function slideReset(_u=this.params.speed,$u=!0,Tu){const Cu=this;return Cu.slideTo(Cu.activeIndex,_u,$u,Tu)}function slideToClosest(_u=this.params.speed,$u=!0,Tu,Cu=.5){const Pu=this;let Bu=Pu.activeIndex;const Lu=Math.min(Pu.params.slidesPerGroupSkip,Bu),Ru=Lu+Math.floor((Bu-Lu)/Pu.params.slidesPerGroup),Ou=Pu.rtlTranslate?Pu.translate:-Pu.translate;if(Ou>=Pu.snapGrid[Ru]){const Du=Pu.snapGrid[Ru],Fu=Pu.snapGrid[Ru+1];Ou-Du>(Fu-Du)*Cu&&(Bu+=Pu.params.slidesPerGroup)}else{const Du=Pu.snapGrid[Ru-1],Fu=Pu.snapGrid[Ru];Ou-Du<=(Fu-Du)*Cu&&(Bu-=Pu.params.slidesPerGroup)}return Bu=Math.max(Bu,0),Bu=Math.min(Bu,Pu.slidesGrid.length-1),Pu.slideTo(Bu,_u,$u,Tu)}function slideToClickedSlide(){const _u=this,{params:$u,$wrapperEl:Tu}=_u,Cu=$u.slidesPerView==="auto"?_u.slidesPerViewDynamic():$u.slidesPerView;let Pu=_u.clickedIndex,Bu;if($u.loop){if(_u.animating)return;Bu=parseInt($$4(_u.clickedSlide).attr("data-swiper-slide-index"),10),$u.centeredSlides?Pu<_u.loopedSlides-Cu/2||Pu>_u.slides.length-_u.loopedSlides+Cu/2?(_u.loopFix(),Pu=Tu.children(`.${$u.slideClass}[data-swiper-slide-index="${Bu}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{_u.slideTo(Pu)})):_u.slideTo(Pu):Pu>_u.slides.length-Cu?(_u.loopFix(),Pu=Tu.children(`.${$u.slideClass}[data-swiper-slide-index="${Bu}"]:not(.${$u.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{_u.slideTo(Pu)})):_u.slideTo(Pu)}else _u.slideTo(Pu)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const _u=this,$u=getDocument(),{params:Tu,$wrapperEl:Cu}=_u,Pu=Cu.children().length>0?$$4(Cu.children()[0].parentNode):Cu;Pu.children(`.${Tu.slideClass}.${Tu.slideDuplicateClass}`).remove();let Bu=Pu.children(`.${Tu.slideClass}`);if(Tu.loopFillGroupWithBlank){const Ou=Tu.slidesPerGroup-Bu.length%Tu.slidesPerGroup;if(Ou!==Tu.slidesPerGroup){for(let Du=0;Du<Ou;Du+=1){const Fu=$$4($u.createElement("div")).addClass(`${Tu.slideClass} ${Tu.slideBlankClass}`);Pu.append(Fu)}Bu=Pu.children(`.${Tu.slideClass}`)}}Tu.slidesPerView==="auto"&&!Tu.loopedSlides&&(Tu.loopedSlides=Bu.length),_u.loopedSlides=Math.ceil(parseFloat(Tu.loopedSlides||Tu.slidesPerView,10)),_u.loopedSlides+=Tu.loopAdditionalSlides,_u.loopedSlides>Bu.length&&_u.params.loopedSlidesLimit&&(_u.loopedSlides=Bu.length);const Lu=[],Ru=[];Bu.each((Ou,Du)=>{$$4(Ou).attr("data-swiper-slide-index",Du)});for(let Ou=0;Ou<_u.loopedSlides;Ou+=1){const Du=Ou-Math.floor(Ou/Bu.length)*Bu.length;Ru.push(Bu.eq(Du)[0]),Lu.unshift(Bu.eq(Bu.length-Du-1)[0])}for(let Ou=0;Ou<Ru.length;Ou+=1)Pu.append($$4(Ru[Ou].cloneNode(!0)).addClass(Tu.slideDuplicateClass));for(let Ou=Lu.length-1;Ou>=0;Ou-=1)Pu.prepend($$4(Lu[Ou].cloneNode(!0)).addClass(Tu.slideDuplicateClass))}function loopFix(){const _u=this;_u.emit("beforeLoopFix");const{activeIndex:$u,slides:Tu,loopedSlides:Cu,allowSlidePrev:Pu,allowSlideNext:Bu,snapGrid:Lu,rtlTranslate:Ru}=_u;let Ou;_u.allowSlidePrev=!0,_u.allowSlideNext=!0;const Fu=-Lu[$u]-_u.getTranslate();$u<Cu?(Ou=Tu.length-Cu*3+$u,Ou+=Cu,_u.slideTo(Ou,0,!1,!0)&&Fu!==0&&_u.setTranslate((Ru?-_u.translate:_u.translate)-Fu)):$u>=Tu.length-Cu&&(Ou=-Tu.length+$u+Cu,Ou+=Cu,_u.slideTo(Ou,0,!1,!0)&&Fu!==0&&_u.setTranslate((Ru?-_u.translate:_u.translate)-Fu)),_u.allowSlidePrev=Pu,_u.allowSlideNext=Bu,_u.emit("loopFix")}function loopDestroy(){const _u=this,{$wrapperEl:$u,params:Tu,slides:Cu}=_u;$u.children(`.${Tu.slideClass}.${Tu.slideDuplicateClass},.${Tu.slideClass}.${Tu.slideBlankClass}`).remove(),Cu.removeAttr("data-swiper-slide-index")}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(_u){const $u=this;if($u.support.touch||!$u.params.simulateTouch||$u.params.watchOverflow&&$u.isLocked||$u.params.cssMode)return;const Tu=$u.params.touchEventsTarget==="container"?$u.el:$u.wrapperEl;Tu.style.cursor="move",Tu.style.cursor=_u?"grabbing":"grab"}function unsetGrabCursor(){const _u=this;_u.support.touch||_u.params.watchOverflow&&_u.isLocked||_u.params.cssMode||(_u[_u.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(_u,$u=this){function Tu(Cu){if(!Cu||Cu===getDocument()||Cu===getWindow())return null;Cu.assignedSlot&&(Cu=Cu.assignedSlot);const Pu=Cu.closest(_u);return!Pu&&!Cu.getRootNode?null:Pu||Tu(Cu.getRootNode().host)}return Tu($u)}function onTouchStart(_u){const $u=this,Tu=getDocument(),Cu=getWindow(),Pu=$u.touchEventsData,{params:Bu,touches:Lu,enabled:Ru}=$u;if(!Ru||$u.animating&&Bu.preventInteractionOnTransition)return;!$u.animating&&Bu.cssMode&&Bu.loop&&$u.loopFix();let Ou=_u;Ou.originalEvent&&(Ou=Ou.originalEvent);let Du=$$4(Ou.target);if(Bu.touchEventsTarget==="wrapper"&&!Du.closest($u.wrapperEl).length||(Pu.isTouchEvent=Ou.type==="touchstart",!Pu.isTouchEvent&&"which"in Ou&&Ou.which===3)||!Pu.isTouchEvent&&"button"in Ou&&Ou.button>0||Pu.isTouched&&Pu.isMoved)return;const Fu=!!Bu.noSwipingClass&&Bu.noSwipingClass!=="",Vu=_u.composedPath?_u.composedPath():_u.path;Fu&&Ou.target&&Ou.target.shadowRoot&&Vu&&(Du=$$4(Vu[0]));const ku=Bu.noSwipingSelector?Bu.noSwipingSelector:`.${Bu.noSwipingClass}`,Nu=!!(Ou.target&&Ou.target.shadowRoot);if(Bu.noSwiping&&(Nu?closestElement(ku,Du[0]):Du.closest(ku)[0])){$u.allowClick=!0;return}if(Bu.swipeHandler&&!Du.closest(Bu.swipeHandler)[0])return;Lu.currentX=Ou.type==="touchstart"?Ou.targetTouches[0].pageX:Ou.pageX,Lu.currentY=Ou.type==="touchstart"?Ou.targetTouches[0].pageY:Ou.pageY;const Gu=Lu.currentX,ju=Lu.currentY,Hu=Bu.edgeSwipeDetection||Bu.iOSEdgeSwipeDetection,Uu=Bu.edgeSwipeThreshold||Bu.iOSEdgeSwipeThreshold;if(Hu&&(Gu<=Uu||Gu>=Cu.innerWidth-Uu))if(Hu==="prevent")_u.preventDefault();else return;if(Object.assign(Pu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Lu.startX=Gu,Lu.startY=ju,Pu.touchStartTime=now(),$u.allowClick=!0,$u.updateSize(),$u.swipeDirection=void 0,Bu.threshold>0&&(Pu.allowThresholdMove=!1),Ou.type!=="touchstart"){let zu=!0;Du.is(Pu.focusableElements)&&(zu=!1,Du[0].nodeName==="SELECT"&&(Pu.isTouched=!1)),Tu.activeElement&&$$4(Tu.activeElement).is(Pu.focusableElements)&&Tu.activeElement!==Du[0]&&Tu.activeElement.blur();const Wu=zu&&$u.allowTouchMove&&Bu.touchStartPreventDefault;(Bu.touchStartForcePreventDefault||Wu)&&!Du[0].isContentEditable&&Ou.preventDefault()}$u.params.freeMode&&$u.params.freeMode.enabled&&$u.freeMode&&$u.animating&&!Bu.cssMode&&$u.freeMode.onTouchStart(),$u.emit("touchStart",Ou)}function onTouchMove(_u){const $u=getDocument(),Tu=this,Cu=Tu.touchEventsData,{params:Pu,touches:Bu,rtlTranslate:Lu,enabled:Ru}=Tu;if(!Ru)return;let Ou=_u;if(Ou.originalEvent&&(Ou=Ou.originalEvent),!Cu.isTouched){Cu.startMoving&&Cu.isScrolling&&Tu.emit("touchMoveOpposite",Ou);return}if(Cu.isTouchEvent&&Ou.type!=="touchmove")return;const Du=Ou.type==="touchmove"&&Ou.targetTouches&&(Ou.targetTouches[0]||Ou.changedTouches[0]),Fu=Ou.type==="touchmove"?Du.pageX:Ou.pageX,Vu=Ou.type==="touchmove"?Du.pageY:Ou.pageY;if(Ou.preventedByNestedSwiper){Bu.startX=Fu,Bu.startY=Vu;return}if(!Tu.allowTouchMove){$$4(Ou.target).is(Cu.focusableElements)||(Tu.allowClick=!1),Cu.isTouched&&(Object.assign(Bu,{startX:Fu,startY:Vu,currentX:Fu,currentY:Vu}),Cu.touchStartTime=now());return}if(Cu.isTouchEvent&&Pu.touchReleaseOnEdges&&!Pu.loop){if(Tu.isVertical()){if(Vu<Bu.startY&&Tu.translate<=Tu.maxTranslate()||Vu>Bu.startY&&Tu.translate>=Tu.minTranslate()){Cu.isTouched=!1,Cu.isMoved=!1;return}}else if(Fu<Bu.startX&&Tu.translate<=Tu.maxTranslate()||Fu>Bu.startX&&Tu.translate>=Tu.minTranslate())return}if(Cu.isTouchEvent&&$u.activeElement&&Ou.target===$u.activeElement&&$$4(Ou.target).is(Cu.focusableElements)){Cu.isMoved=!0,Tu.allowClick=!1;return}if(Cu.allowTouchCallbacks&&Tu.emit("touchMove",Ou),Ou.targetTouches&&Ou.targetTouches.length>1)return;Bu.currentX=Fu,Bu.currentY=Vu;const ku=Bu.currentX-Bu.startX,Nu=Bu.currentY-Bu.startY;if(Tu.params.threshold&&Math.sqrt(ku**2+Nu**2)<Tu.params.threshold)return;if(typeof Cu.isScrolling=="undefined"){let Uu;Tu.isHorizontal()&&Bu.currentY===Bu.startY||Tu.isVertical()&&Bu.currentX===Bu.startX?Cu.isScrolling=!1:ku*ku+Nu*Nu>=25&&(Uu=Math.atan2(Math.abs(Nu),Math.abs(ku))*180/Math.PI,Cu.isScrolling=Tu.isHorizontal()?Uu>Pu.touchAngle:90-Uu>Pu.touchAngle)}if(Cu.isScrolling&&Tu.emit("touchMoveOpposite",Ou),typeof Cu.startMoving=="undefined"&&(Bu.currentX!==Bu.startX||Bu.currentY!==Bu.startY)&&(Cu.startMoving=!0),Cu.isScrolling){Cu.isTouched=!1;return}if(!Cu.startMoving)return;Tu.allowClick=!1,!Pu.cssMode&&Ou.cancelable&&Ou.preventDefault(),Pu.touchMoveStopPropagation&&!Pu.nested&&Ou.stopPropagation(),Cu.isMoved||(Pu.loop&&!Pu.cssMode&&Tu.loopFix(),Cu.startTranslate=Tu.getTranslate(),Tu.setTransition(0),Tu.animating&&Tu.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Cu.allowMomentumBounce=!1,Pu.grabCursor&&(Tu.allowSlideNext===!0||Tu.allowSlidePrev===!0)&&Tu.setGrabCursor(!0),Tu.emit("sliderFirstMove",Ou)),Tu.emit("sliderMove",Ou),Cu.isMoved=!0;let Gu=Tu.isHorizontal()?ku:Nu;Bu.diff=Gu,Gu*=Pu.touchRatio,Lu&&(Gu=-Gu),Tu.swipeDirection=Gu>0?"prev":"next",Cu.currentTranslate=Gu+Cu.startTranslate;let ju=!0,Hu=Pu.resistanceRatio;if(Pu.touchReleaseOnEdges&&(Hu=0),Gu>0&&Cu.currentTranslate>Tu.minTranslate()?(ju=!1,Pu.resistance&&(Cu.currentTranslate=Tu.minTranslate()-1+(-Tu.minTranslate()+Cu.startTranslate+Gu)**Hu)):Gu<0&&Cu.currentTranslate<Tu.maxTranslate()&&(ju=!1,Pu.resistance&&(Cu.currentTranslate=Tu.maxTranslate()+1-(Tu.maxTranslate()-Cu.startTranslate-Gu)**Hu)),ju&&(Ou.preventedByNestedSwiper=!0),!Tu.allowSlideNext&&Tu.swipeDirection==="next"&&Cu.currentTranslate<Cu.startTranslate&&(Cu.currentTranslate=Cu.startTranslate),!Tu.allowSlidePrev&&Tu.swipeDirection==="prev"&&Cu.currentTranslate>Cu.startTranslate&&(Cu.currentTranslate=Cu.startTranslate),!Tu.allowSlidePrev&&!Tu.allowSlideNext&&(Cu.currentTranslate=Cu.startTranslate),Pu.threshold>0)if(Math.abs(Gu)>Pu.threshold||Cu.allowThresholdMove){if(!Cu.allowThresholdMove){Cu.allowThresholdMove=!0,Bu.startX=Bu.currentX,Bu.startY=Bu.currentY,Cu.currentTranslate=Cu.startTranslate,Bu.diff=Tu.isHorizontal()?Bu.currentX-Bu.startX:Bu.currentY-Bu.startY;return}}else{Cu.currentTranslate=Cu.startTranslate;return}!Pu.followFinger||Pu.cssMode||((Pu.freeMode&&Pu.freeMode.enabled&&Tu.freeMode||Pu.watchSlidesProgress)&&(Tu.updateActiveIndex(),Tu.updateSlidesClasses()),Tu.params.freeMode&&Pu.freeMode.enabled&&Tu.freeMode&&Tu.freeMode.onTouchMove(),Tu.updateProgress(Cu.currentTranslate),Tu.setTranslate(Cu.currentTranslate))}function onTouchEnd(_u){const $u=this,Tu=$u.touchEventsData,{params:Cu,touches:Pu,rtlTranslate:Bu,slidesGrid:Lu,enabled:Ru}=$u;if(!Ru)return;let Ou=_u;if(Ou.originalEvent&&(Ou=Ou.originalEvent),Tu.allowTouchCallbacks&&$u.emit("touchEnd",Ou),Tu.allowTouchCallbacks=!1,!Tu.isTouched){Tu.isMoved&&Cu.grabCursor&&$u.setGrabCursor(!1),Tu.isMoved=!1,Tu.startMoving=!1;return}Cu.grabCursor&&Tu.isMoved&&Tu.isTouched&&($u.allowSlideNext===!0||$u.allowSlidePrev===!0)&&$u.setGrabCursor(!1);const Du=now(),Fu=Du-Tu.touchStartTime;if($u.allowClick){const zu=Ou.path||Ou.composedPath&&Ou.composedPath();$u.updateClickedSlide(zu&&zu[0]||Ou.target),$u.emit("tap click",Ou),Fu<300&&Du-Tu.lastClickTime<300&&$u.emit("doubleTap doubleClick",Ou)}if(Tu.lastClickTime=now(),nextTick(()=>{$u.destroyed||($u.allowClick=!0)}),!Tu.isTouched||!Tu.isMoved||!$u.swipeDirection||Pu.diff===0||Tu.currentTranslate===Tu.startTranslate){Tu.isTouched=!1,Tu.isMoved=!1,Tu.startMoving=!1;return}Tu.isTouched=!1,Tu.isMoved=!1,Tu.startMoving=!1;let Vu;if(Cu.followFinger?Vu=Bu?$u.translate:-$u.translate:Vu=-Tu.currentTranslate,Cu.cssMode)return;if($u.params.freeMode&&Cu.freeMode.enabled){$u.freeMode.onTouchEnd({currentPos:Vu});return}let ku=0,Nu=$u.slidesSizesGrid[0];for(let zu=0;zu<Lu.length;zu+=zu<Cu.slidesPerGroupSkip?1:Cu.slidesPerGroup){const Wu=zu<Cu.slidesPerGroupSkip-1?1:Cu.slidesPerGroup;typeof Lu[zu+Wu]!="undefined"?Vu>=Lu[zu]&&Vu<Lu[zu+Wu]&&(ku=zu,Nu=Lu[zu+Wu]-Lu[zu]):Vu>=Lu[zu]&&(ku=zu,Nu=Lu[Lu.length-1]-Lu[Lu.length-2])}let Gu=null,ju=null;Cu.rewind&&($u.isBeginning?ju=$u.params.virtual&&$u.params.virtual.enabled&&$u.virtual?$u.virtual.slides.length-1:$u.slides.length-1:$u.isEnd&&(Gu=0));const Hu=(Vu-Lu[ku])/Nu,Uu=ku<Cu.slidesPerGroupSkip-1?1:Cu.slidesPerGroup;if(Fu>Cu.longSwipesMs){if(!Cu.longSwipes){$u.slideTo($u.activeIndex);return}$u.swipeDirection==="next"&&(Hu>=Cu.longSwipesRatio?$u.slideTo(Cu.rewind&&$u.isEnd?Gu:ku+Uu):$u.slideTo(ku)),$u.swipeDirection==="prev"&&(Hu>1-Cu.longSwipesRatio?$u.slideTo(ku+Uu):ju!==null&&Hu<0&&Math.abs(Hu)>Cu.longSwipesRatio?$u.slideTo(ju):$u.slideTo(ku))}else{if(!Cu.shortSwipes){$u.slideTo($u.activeIndex);return}$u.navigation&&(Ou.target===$u.navigation.nextEl||Ou.target===$u.navigation.prevEl)?Ou.target===$u.navigation.nextEl?$u.slideTo(ku+Uu):$u.slideTo(ku):($u.swipeDirection==="next"&&$u.slideTo(Gu!==null?Gu:ku+Uu),$u.swipeDirection==="prev"&&$u.slideTo(ju!==null?ju:ku))}}function onResize(){const _u=this,{params:$u,el:Tu}=_u;if(Tu&&Tu.offsetWidth===0)return;$u.breakpoints&&_u.setBreakpoint();const{allowSlideNext:Cu,allowSlidePrev:Pu,snapGrid:Bu}=_u;_u.allowSlideNext=!0,_u.allowSlidePrev=!0,_u.updateSize(),_u.updateSlides(),_u.updateSlidesClasses(),($u.slidesPerView==="auto"||$u.slidesPerView>1)&&_u.isEnd&&!_u.isBeginning&&!_u.params.centeredSlides?_u.slideTo(_u.slides.length-1,0,!1,!0):_u.slideTo(_u.activeIndex,0,!1,!0),_u.autoplay&&_u.autoplay.running&&_u.autoplay.paused&&_u.autoplay.run(),_u.allowSlidePrev=Pu,_u.allowSlideNext=Cu,_u.params.watchOverflow&&Bu!==_u.snapGrid&&_u.checkOverflow()}function onClick(_u){const $u=this;!$u.enabled||$u.allowClick||($u.params.preventClicks&&_u.preventDefault(),$u.params.preventClicksPropagation&&$u.animating&&(_u.stopPropagation(),_u.stopImmediatePropagation()))}function onScroll(){const _u=this,{wrapperEl:$u,rtlTranslate:Tu,enabled:Cu}=_u;if(!Cu)return;_u.previousTranslate=_u.translate,_u.isHorizontal()?_u.translate=-$u.scrollLeft:_u.translate=-$u.scrollTop,_u.translate===0&&(_u.translate=0),_u.updateActiveIndex(),_u.updateSlidesClasses();let Pu;const Bu=_u.maxTranslate()-_u.minTranslate();Bu===0?Pu=0:Pu=(_u.translate-_u.minTranslate())/Bu,Pu!==_u.progress&&_u.updateProgress(Tu?-_u.translate:_u.translate),_u.emit("setTranslate",_u.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(_u,$u)=>{const Tu=getDocument(),{params:Cu,touchEvents:Pu,el:Bu,wrapperEl:Lu,device:Ru,support:Ou}=_u,Du=!!Cu.nested,Fu=$u==="on"?"addEventListener":"removeEventListener",Vu=$u;if(!Ou.touch)Bu[Fu](Pu.start,_u.onTouchStart,!1),Tu[Fu](Pu.move,_u.onTouchMove,Du),Tu[Fu](Pu.end,_u.onTouchEnd,!1);else{const ku=Pu.start==="touchstart"&&Ou.passiveListener&&Cu.passiveListeners?{passive:!0,capture:!1}:!1;Bu[Fu](Pu.start,_u.onTouchStart,ku),Bu[Fu](Pu.move,_u.onTouchMove,Ou.passiveListener?{passive:!1,capture:Du}:Du),Bu[Fu](Pu.end,_u.onTouchEnd,ku),Pu.cancel&&Bu[Fu](Pu.cancel,_u.onTouchEnd,ku)}(Cu.preventClicks||Cu.preventClicksPropagation)&&Bu[Fu]("click",_u.onClick,!0),Cu.cssMode&&Lu[Fu]("scroll",_u.onScroll),Cu.updateOnWindowResize?_u[Vu](Ru.ios||Ru.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):_u[Vu]("observerUpdate",onResize,!0)};function attachEvents(){const _u=this,$u=getDocument(),{params:Tu,support:Cu}=_u;_u.onTouchStart=onTouchStart.bind(_u),_u.onTouchMove=onTouchMove.bind(_u),_u.onTouchEnd=onTouchEnd.bind(_u),Tu.cssMode&&(_u.onScroll=onScroll.bind(_u)),_u.onClick=onClick.bind(_u),Cu.touch&&!dummyEventAttached&&($u.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(_u,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(_u,$u)=>_u.grid&&$u.grid&&$u.grid.rows>1;function setBreakpoint(){const _u=this,{activeIndex:$u,initialized:Tu,loopedSlides:Cu=0,params:Pu,$el:Bu}=_u,Lu=Pu.breakpoints;if(!Lu||Lu&&Object.keys(Lu).length===0)return;const Ru=_u.getBreakpoint(Lu,_u.params.breakpointsBase,_u.el);if(!Ru||_u.currentBreakpoint===Ru)return;const Du=(Ru in Lu?Lu[Ru]:void 0)||_u.originalParams,Fu=isGridEnabled(_u,Pu),Vu=isGridEnabled(_u,Du),ku=Pu.enabled;Fu&&!Vu?(Bu.removeClass(`${Pu.containerModifierClass}grid ${Pu.containerModifierClass}grid-column`),_u.emitContainerClasses()):!Fu&&Vu&&(Bu.addClass(`${Pu.containerModifierClass}grid`),(Du.grid.fill&&Du.grid.fill==="column"||!Du.grid.fill&&Pu.grid.fill==="column")&&Bu.addClass(`${Pu.containerModifierClass}grid-column`),_u.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(Hu=>{const Uu=Pu[Hu]&&Pu[Hu].enabled,zu=Du[Hu]&&Du[Hu].enabled;Uu&&!zu&&_u[Hu].disable(),!Uu&&zu&&_u[Hu].enable()});const Nu=Du.direction&&Du.direction!==Pu.direction,Gu=Pu.loop&&(Du.slidesPerView!==Pu.slidesPerView||Nu);Nu&&Tu&&_u.changeDirection(),extend(_u.params,Du);const ju=_u.params.enabled;Object.assign(_u,{allowTouchMove:_u.params.allowTouchMove,allowSlideNext:_u.params.allowSlideNext,allowSlidePrev:_u.params.allowSlidePrev}),ku&&!ju?_u.disable():!ku&&ju&&_u.enable(),_u.currentBreakpoint=Ru,_u.emit("_beforeBreakpoint",Du),Gu&&Tu&&(_u.loopDestroy(),_u.loopCreate(),_u.updateSlides(),_u.slideTo($u-Cu+_u.loopedSlides,0,!1)),_u.emit("breakpoint",Du)}function getBreakpoint(_u,$u="window",Tu){if(!_u||$u==="container"&&!Tu)return;let Cu=!1;const Pu=getWindow(),Bu=$u==="window"?Pu.innerHeight:Tu.clientHeight,Lu=Object.keys(_u).map(Ru=>{if(typeof Ru=="string"&&Ru.indexOf("@")===0){const Ou=parseFloat(Ru.substr(1));return{value:Bu*Ou,point:Ru}}return{value:Ru,point:Ru}});Lu.sort((Ru,Ou)=>parseInt(Ru.value,10)-parseInt(Ou.value,10));for(let Ru=0;Ru<Lu.length;Ru+=1){const{point:Ou,value:Du}=Lu[Ru];$u==="window"?Pu.matchMedia(`(min-width: ${Du}px)`).matches&&(Cu=Ou):Du<=Tu.clientWidth&&(Cu=Ou)}return Cu||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(_u,$u){const Tu=[];return _u.forEach(Cu=>{typeof Cu=="object"?Object.keys(Cu).forEach(Pu=>{Cu[Pu]&&Tu.push($u+Pu)}):typeof Cu=="string"&&Tu.push($u+Cu)}),Tu}function addClasses(){const _u=this,{classNames:$u,params:Tu,rtl:Cu,$el:Pu,device:Bu,support:Lu}=_u,Ru=prepareClasses(["initialized",Tu.direction,{"pointer-events":!Lu.touch},{"free-mode":_u.params.freeMode&&Tu.freeMode.enabled},{autoheight:Tu.autoHeight},{rtl:Cu},{grid:Tu.grid&&Tu.grid.rows>1},{"grid-column":Tu.grid&&Tu.grid.rows>1&&Tu.grid.fill==="column"},{android:Bu.android},{ios:Bu.ios},{"css-mode":Tu.cssMode},{centered:Tu.cssMode&&Tu.centeredSlides},{"watch-progress":Tu.watchSlidesProgress}],Tu.containerModifierClass);$u.push(...Ru),Pu.addClass([...$u].join(" ")),_u.emitContainerClasses()}function removeClasses(){const _u=this,{$el:$u,classNames:Tu}=_u;$u.removeClass(Tu.join(" ")),_u.emitContainerClasses()}var classes={addClasses,removeClasses};function loadImage(_u,$u,Tu,Cu,Pu,Bu){const Lu=getWindow();let Ru;function Ou(){Bu&&Bu()}!$$4(_u).parent("picture")[0]&&(!_u.complete||!Pu)&&$u?(Ru=new Lu.Image,Ru.onload=Ou,Ru.onerror=Ou,Cu&&(Ru.sizes=Cu),Tu&&(Ru.srcset=Tu),$u&&(Ru.src=$u)):Ou()}function preloadImages(){const _u=this;_u.imagesToLoad=_u.$el.find("img");function $u(){typeof _u=="undefined"||_u===null||!_u||_u.destroyed||(_u.imagesLoaded!==void 0&&(_u.imagesLoaded+=1),_u.imagesLoaded===_u.imagesToLoad.length&&(_u.params.updateOnImagesReady&&_u.update(),_u.emit("imagesReady")))}for(let Tu=0;Tu<_u.imagesToLoad.length;Tu+=1){const Cu=_u.imagesToLoad[Tu];_u.loadImage(Cu,Cu.currentSrc||Cu.getAttribute("src"),Cu.srcset||Cu.getAttribute("srcset"),Cu.sizes||Cu.getAttribute("sizes"),!0,$u)}}var images={loadImage,preloadImages};function checkOverflow(){const _u=this,{isLocked:$u,params:Tu}=_u,{slidesOffsetBefore:Cu}=Tu;if(Cu){const Pu=_u.slides.length-1,Bu=_u.slidesGrid[Pu]+_u.slidesSizesGrid[Pu]+Cu*2;_u.isLocked=_u.size>Bu}else _u.isLocked=_u.snapGrid.length===1;Tu.allowSlideNext===!0&&(_u.allowSlideNext=!_u.isLocked),Tu.allowSlidePrev===!0&&(_u.allowSlidePrev=!_u.isLocked),$u&&$u!==_u.isLocked&&(_u.isEnd=!1),$u!==_u.isLocked&&_u.emit(_u.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(_u,$u){return function(Cu={}){const Pu=Object.keys(Cu)[0],Bu=Cu[Pu];if(typeof Bu!="object"||Bu===null){extend($u,Cu);return}if(["navigation","pagination","scrollbar"].indexOf(Pu)>=0&&_u[Pu]===!0&&(_u[Pu]={auto:!0}),!(Pu in _u&&"enabled"in Bu)){extend($u,Cu);return}_u[Pu]===!0&&(_u[Pu]={enabled:!0}),typeof _u[Pu]=="object"&&!("enabled"in _u[Pu])&&(_u[Pu].enabled=!0),_u[Pu]||(_u[Pu]={enabled:!1}),extend($u,Cu)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper{constructor(...$u){let Tu,Cu;if($u.length===1&&$u[0].constructor&&Object.prototype.toString.call($u[0]).slice(8,-1)==="Object"?Cu=$u[0]:[Tu,Cu]=$u,Cu||(Cu={}),Cu=extend({},Cu),Tu&&!Cu.el&&(Cu.el=Tu),Cu.el&&$$4(Cu.el).length>1){const Ru=[];return $$4(Cu.el).each(Ou=>{const Du=extend({},Cu,{el:Ou});Ru.push(new Swiper(Du))}),Ru}const Pu=this;Pu.__swiper__=!0,Pu.support=getSupport(),Pu.device=getDevice({userAgent:Cu.userAgent}),Pu.browser=getBrowser(),Pu.eventsListeners={},Pu.eventsAnyListeners=[],Pu.modules=[...Pu.__modules__],Cu.modules&&Array.isArray(Cu.modules)&&Pu.modules.push(...Cu.modules);const Bu={};Pu.modules.forEach(Ru=>{Ru({swiper:Pu,extendParams:moduleExtendParams(Cu,Bu),on:Pu.on.bind(Pu),once:Pu.once.bind(Pu),off:Pu.off.bind(Pu),emit:Pu.emit.bind(Pu)})});const Lu=extend({},defaults,Bu);return Pu.params=extend({},Lu,extendedDefaults,Cu),Pu.originalParams=extend({},Pu.params),Pu.passedParams=extend({},Cu),Pu.params&&Pu.params.on&&Object.keys(Pu.params.on).forEach(Ru=>{Pu.on(Ru,Pu.params.on[Ru])}),Pu.params&&Pu.params.onAny&&Pu.onAny(Pu.params.onAny),Pu.$=$$4,Object.assign(Pu,{enabled:Pu.params.enabled,el:Tu,classNames:[],slides:$$4(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Pu.params.direction==="horizontal"},isVertical(){return Pu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Pu.params.allowSlideNext,allowSlidePrev:Pu.params.allowSlidePrev,touchEvents:function(){const Ou=["touchstart","touchmove","touchend","touchcancel"],Du=["pointerdown","pointermove","pointerup"];return Pu.touchEventsTouch={start:Ou[0],move:Ou[1],end:Ou[2],cancel:Ou[3]},Pu.touchEventsDesktop={start:Du[0],move:Du[1],end:Du[2]},Pu.support.touch||!Pu.params.simulateTouch?Pu.touchEventsTouch:Pu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Pu.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Pu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Pu.emit("_swiper"),Pu.params.init&&Pu.init(),Pu}enable(){const $u=this;$u.enabled||($u.enabled=!0,$u.params.grabCursor&&$u.setGrabCursor(),$u.emit("enable"))}disable(){const $u=this;!$u.enabled||($u.enabled=!1,$u.params.grabCursor&&$u.unsetGrabCursor(),$u.emit("disable"))}setProgress($u,Tu){const Cu=this;$u=Math.min(Math.max($u,0),1);const Pu=Cu.minTranslate(),Lu=(Cu.maxTranslate()-Pu)*$u+Pu;Cu.translateTo(Lu,typeof Tu=="undefined"?0:Tu),Cu.updateActiveIndex(),Cu.updateSlidesClasses()}emitContainerClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Tu=$u.el.className.split(" ").filter(Cu=>Cu.indexOf("swiper")===0||Cu.indexOf($u.params.containerModifierClass)===0);$u.emit("_containerClasses",Tu.join(" "))}getSlideClasses($u){const Tu=this;return Tu.destroyed?"":$u.className.split(" ").filter(Cu=>Cu.indexOf("swiper-slide")===0||Cu.indexOf(Tu.params.slideClass)===0).join(" ")}emitSlidesClasses(){const $u=this;if(!$u.params._emitClasses||!$u.el)return;const Tu=[];$u.slides.each(Cu=>{const Pu=$u.getSlideClasses(Cu);Tu.push({slideEl:Cu,classNames:Pu}),$u.emit("_slideClass",Cu,Pu)}),$u.emit("_slideClasses",Tu)}slidesPerViewDynamic($u="current",Tu=!1){const Cu=this,{params:Pu,slides:Bu,slidesGrid:Lu,slidesSizesGrid:Ru,size:Ou,activeIndex:Du}=Cu;let Fu=1;if(Pu.centeredSlides){let Vu=Bu[Du].swiperSlideSize,ku;for(let Nu=Du+1;Nu<Bu.length;Nu+=1)Bu[Nu]&&!ku&&(Vu+=Bu[Nu].swiperSlideSize,Fu+=1,Vu>Ou&&(ku=!0));for(let Nu=Du-1;Nu>=0;Nu-=1)Bu[Nu]&&!ku&&(Vu+=Bu[Nu].swiperSlideSize,Fu+=1,Vu>Ou&&(ku=!0))}else if($u==="current")for(let Vu=Du+1;Vu<Bu.length;Vu+=1)(Tu?Lu[Vu]+Ru[Vu]-Lu[Du]<Ou:Lu[Vu]-Lu[Du]<Ou)&&(Fu+=1);else for(let Vu=Du-1;Vu>=0;Vu-=1)Lu[Du]-Lu[Vu]<Ou&&(Fu+=1);return Fu}update(){const $u=this;if(!$u||$u.destroyed)return;const{snapGrid:Tu,params:Cu}=$u;Cu.breakpoints&&$u.setBreakpoint(),$u.updateSize(),$u.updateSlides(),$u.updateProgress(),$u.updateSlidesClasses();function Pu(){const Lu=$u.rtlTranslate?$u.translate*-1:$u.translate,Ru=Math.min(Math.max(Lu,$u.maxTranslate()),$u.minTranslate());$u.setTranslate(Ru),$u.updateActiveIndex(),$u.updateSlidesClasses()}let Bu;$u.params.freeMode&&$u.params.freeMode.enabled?(Pu(),$u.params.autoHeight&&$u.updateAutoHeight()):(($u.params.slidesPerView==="auto"||$u.params.slidesPerView>1)&&$u.isEnd&&!$u.params.centeredSlides?Bu=$u.slideTo($u.slides.length-1,0,!1,!0):Bu=$u.slideTo($u.activeIndex,0,!1,!0),Bu||Pu()),Cu.watchOverflow&&Tu!==$u.snapGrid&&$u.checkOverflow(),$u.emit("update")}changeDirection($u,Tu=!0){const Cu=this,Pu=Cu.params.direction;return $u||($u=Pu==="horizontal"?"vertical":"horizontal"),$u===Pu||$u!=="horizontal"&&$u!=="vertical"||(Cu.$el.removeClass(`${Cu.params.containerModifierClass}${Pu}`).addClass(`${Cu.params.containerModifierClass}${$u}`),Cu.emitContainerClasses(),Cu.params.direction=$u,Cu.slides.each(Bu=>{$u==="vertical"?Bu.style.width="":Bu.style.height=""}),Cu.emit("changeDirection"),Tu&&Cu.update()),Cu}changeLanguageDirection($u){const Tu=this;Tu.rtl&&$u==="rtl"||!Tu.rtl&&$u==="ltr"||(Tu.rtl=$u==="rtl",Tu.rtlTranslate=Tu.params.direction==="horizontal"&&Tu.rtl,Tu.rtl?(Tu.$el.addClass(`${Tu.params.containerModifierClass}rtl`),Tu.el.dir="rtl"):(Tu.$el.removeClass(`${Tu.params.containerModifierClass}rtl`),Tu.el.dir="ltr"),Tu.update())}mount($u){const Tu=this;if(Tu.mounted)return!0;const Cu=$$4($u||Tu.params.el);if($u=Cu[0],!$u)return!1;$u.swiper=Tu;const Pu=()=>`.${(Tu.params.wrapperClass||"").trim().split(" ").join(".")}`;let Lu=(()=>{if($u&&$u.shadowRoot&&$u.shadowRoot.querySelector){const Ru=$$4($u.shadowRoot.querySelector(Pu()));return Ru.children=Ou=>Cu.children(Ou),Ru}return Cu.children?Cu.children(Pu()):$$4(Cu).children(Pu())})();if(Lu.length===0&&Tu.params.createElements){const Ou=getDocument().createElement("div");Lu=$$4(Ou),Ou.className=Tu.params.wrapperClass,Cu.append(Ou),Cu.children(`.${Tu.params.slideClass}`).each(Du=>{Lu.append(Du)})}return Object.assign(Tu,{$el:Cu,el:$u,$wrapperEl:Lu,wrapperEl:Lu[0],mounted:!0,rtl:$u.dir.toLowerCase()==="rtl"||Cu.css("direction")==="rtl",rtlTranslate:Tu.params.direction==="horizontal"&&($u.dir.toLowerCase()==="rtl"||Cu.css("direction")==="rtl"),wrongRTL:Lu.css("display")==="-webkit-box"}),!0}init($u){const Tu=this;return Tu.initialized||Tu.mount($u)===!1||(Tu.emit("beforeInit"),Tu.params.breakpoints&&Tu.setBreakpoint(),Tu.addClasses(),Tu.params.loop&&Tu.loopCreate(),Tu.updateSize(),Tu.updateSlides(),Tu.params.watchOverflow&&Tu.checkOverflow(),Tu.params.grabCursor&&Tu.enabled&&Tu.setGrabCursor(),Tu.params.preloadImages&&Tu.preloadImages(),Tu.params.loop?Tu.slideTo(Tu.params.initialSlide+Tu.loopedSlides,0,Tu.params.runCallbacksOnInit,!1,!0):Tu.slideTo(Tu.params.initialSlide,0,Tu.params.runCallbacksOnInit,!1,!0),Tu.attachEvents(),Tu.initialized=!0,Tu.emit("init"),Tu.emit("afterInit")),Tu}destroy($u=!0,Tu=!0){const Cu=this,{params:Pu,$el:Bu,$wrapperEl:Lu,slides:Ru}=Cu;return typeof Cu.params=="undefined"||Cu.destroyed||(Cu.emit("beforeDestroy"),Cu.initialized=!1,Cu.detachEvents(),Pu.loop&&Cu.loopDestroy(),Tu&&(Cu.removeClasses(),Bu.removeAttr("style"),Lu.removeAttr("style"),Ru&&Ru.length&&Ru.removeClass([Pu.slideVisibleClass,Pu.slideActiveClass,Pu.slideNextClass,Pu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Cu.emit("destroy"),Object.keys(Cu.eventsListeners).forEach(Ou=>{Cu.off(Ou)}),$u!==!1&&(Cu.$el[0].swiper=null,deleteProps(Cu)),Cu.destroyed=!0),null}static extendDefaults($u){extend(extendedDefaults,$u)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule($u){Swiper.prototype.__modules__||(Swiper.prototype.__modules__=[]);const Tu=Swiper.prototype.__modules__;typeof $u=="function"&&Tu.indexOf($u)<0&&Tu.push($u)}static use($u){return Array.isArray($u)?($u.forEach(Tu=>Swiper.installModule(Tu)),Swiper):(Swiper.installModule($u),Swiper)}}Object.keys(prototypes).forEach(_u=>{Object.keys(prototypes[_u]).forEach($u=>{Swiper.prototype[$u]=prototypes[_u][$u]})});Swiper.use([Resize,Observer]);function Autoplay({swiper:_u,extendParams:$u,on:Tu,emit:Cu}){let Pu;_u.autoplay={running:!1,paused:!1},$u({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function Bu(){if(!_u.size){_u.autoplay.running=!1,_u.autoplay.paused=!1;return}const ju=_u.slides.eq(_u.activeIndex);let Hu=_u.params.autoplay.delay;ju.attr("data-swiper-autoplay")&&(Hu=ju.attr("data-swiper-autoplay")||_u.params.autoplay.delay),clearTimeout(Pu),Pu=nextTick(()=>{let Uu;_u.params.autoplay.reverseDirection?_u.params.loop?(_u.loopFix(),Uu=_u.slidePrev(_u.params.speed,!0,!0),Cu("autoplay")):_u.isBeginning?_u.params.autoplay.stopOnLastSlide?Ru():(Uu=_u.slideTo(_u.slides.length-1,_u.params.speed,!0,!0),Cu("autoplay")):(Uu=_u.slidePrev(_u.params.speed,!0,!0),Cu("autoplay")):_u.params.loop?(_u.loopFix(),Uu=_u.slideNext(_u.params.speed,!0,!0),Cu("autoplay")):_u.isEnd?_u.params.autoplay.stopOnLastSlide?Ru():(Uu=_u.slideTo(0,_u.params.speed,!0,!0),Cu("autoplay")):(Uu=_u.slideNext(_u.params.speed,!0,!0),Cu("autoplay")),(_u.params.cssMode&&_u.autoplay.running||Uu===!1)&&Bu()},Hu)}function Lu(){return typeof Pu!="undefined"||_u.autoplay.running?!1:(_u.autoplay.running=!0,Cu("autoplayStart"),Bu(),!0)}function Ru(){return!_u.autoplay.running||typeof Pu=="undefined"?!1:(Pu&&(clearTimeout(Pu),Pu=void 0),_u.autoplay.running=!1,Cu("autoplayStop"),!0)}function Ou(ju){!_u.autoplay.running||_u.autoplay.paused||(Pu&&clearTimeout(Pu),_u.autoplay.paused=!0,ju===0||!_u.params.autoplay.waitForTransition?(_u.autoplay.paused=!1,Bu()):["transitionend","webkitTransitionEnd"].forEach(Hu=>{_u.$wrapperEl[0].addEventListener(Hu,Fu)}))}function Du(){const ju=getDocument();ju.visibilityState==="hidden"&&_u.autoplay.running&&Ou(),ju.visibilityState==="visible"&&_u.autoplay.paused&&(Bu(),_u.autoplay.paused=!1)}function Fu(ju){!_u||_u.destroyed||!_u.$wrapperEl||ju.target===_u.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(Hu=>{_u.$wrapperEl[0].removeEventListener(Hu,Fu)}),_u.autoplay.paused=!1,_u.autoplay.running?Bu():Ru())}function Vu(){_u.params.autoplay.disableOnInteraction?Ru():(Cu("autoplayPause"),Ou()),["transitionend","webkitTransitionEnd"].forEach(ju=>{_u.$wrapperEl[0].removeEventListener(ju,Fu)})}function ku(){_u.params.autoplay.disableOnInteraction||(_u.autoplay.paused=!1,Cu("autoplayResume"),Bu())}function Nu(){_u.params.autoplay.pauseOnMouseEnter&&(_u.$el.on("mouseenter",Vu),_u.$el.on("mouseleave",ku))}function Gu(){_u.$el.off("mouseenter",Vu),_u.$el.off("mouseleave",ku)}Tu("init",()=>{_u.params.autoplay.enabled&&(Lu(),getDocument().addEventListener("visibilitychange",Du),Nu())}),Tu("beforeTransitionStart",(ju,Hu,Uu)=>{_u.autoplay.running&&(Uu||!_u.params.autoplay.disableOnInteraction?_u.autoplay.pause(Hu):Ru())}),Tu("sliderFirstMove",()=>{_u.autoplay.running&&(_u.params.autoplay.disableOnInteraction?Ru():Ou())}),Tu("touchEnd",()=>{_u.params.cssMode&&_u.autoplay.paused&&!_u.params.autoplay.disableOnInteraction&&Bu()}),Tu("destroy",()=>{Gu(),_u.autoplay.running&&Ru(),getDocument().removeEventListener("visibilitychange",Du)}),Object.assign(_u.autoplay,{pause:Ou,run:Bu,start:Lu,stop:Ru})}function o$1(_u){return typeof _u=="object"&&_u!==null&&_u.constructor&&Object.prototype.toString.call(_u).slice(8,-1)==="Object"}function f$2(_u,$u){const Tu=["__proto__","constructor","prototype"];Object.keys($u).filter(Cu=>Tu.indexOf(Cu)<0).forEach(Cu=>{typeof _u[Cu]=="undefined"?_u[Cu]=$u[Cu]:o$1($u[Cu])&&o$1(_u[Cu])&&Object.keys($u[Cu]).length>0?$u[Cu].__swiper__?_u[Cu]=$u[Cu]:f$2(_u[Cu],$u[Cu]):_u[Cu]=$u[Cu]})}function l(_u={}){return _u.navigation&&typeof _u.navigation.nextEl=="undefined"&&typeof _u.navigation.prevEl=="undefined"}function u$1(_u={}){return _u.pagination&&typeof _u.pagination.el=="undefined"}function c$2(_u={}){return _u.scrollbar&&typeof _u.scrollbar.el=="undefined"}function d$3(_u=""){const $u=_u.split(" ").map(Cu=>Cu.trim()).filter(Cu=>!!Cu),Tu=[];return $u.forEach(Cu=>{Tu.indexOf(Cu)<0&&Tu.push(Cu)}),Tu.join(" ")}const e=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function g(_u={},$u=!0){const Tu={on:{}},Cu={},Pu={};f$2(Tu,Swiper.defaults),f$2(Tu,Swiper.extendedDefaults),Tu._emitClasses=!0,Tu.init=!1;const Bu={},Lu=e.map(Ou=>Ou.replace(/_/,"")),Ru=Object.assign({},_u);return Object.keys(Ru).forEach(Ou=>{typeof _u[Ou]!="undefined"&&(Lu.indexOf(Ou)>=0?o$1(_u[Ou])?(Tu[Ou]={},Pu[Ou]={},f$2(Tu[Ou],_u[Ou]),f$2(Pu[Ou],_u[Ou])):(Tu[Ou]=_u[Ou],Pu[Ou]=_u[Ou]):Ou.search(/on[A-Z]/)===0&&typeof _u[Ou]=="function"?$u?Cu[`${Ou[2].toLowerCase()}${Ou.substr(3)}`]=_u[Ou]:Tu.on[`${Ou[2].toLowerCase()}${Ou.substr(3)}`]=_u[Ou]:Bu[Ou]=_u[Ou])}),["navigation","pagination","scrollbar"].forEach(Ou=>{Tu[Ou]===!0&&(Tu[Ou]={}),Tu[Ou]===!1&&delete Tu[Ou]}),{params:Tu,passedParams:Pu,rest:Bu,events:Cu}}function d$2({el:_u,nextEl:$u,prevEl:Tu,paginationEl:Cu,scrollbarEl:Pu,swiper:Bu},Lu){l(Lu)&&$u&&Tu&&(Bu.params.navigation.nextEl=$u,Bu.originalParams.navigation.nextEl=$u,Bu.params.navigation.prevEl=Tu,Bu.originalParams.navigation.prevEl=Tu),u$1(Lu)&&Cu&&(Bu.params.pagination.el=Cu,Bu.originalParams.pagination.el=Cu),c$2(Lu)&&Pu&&(Bu.params.scrollbar.el=Pu,Bu.originalParams.scrollbar.el=Pu),Bu.init(_u)}function r$1(_u,$u,Tu,Cu,Pu){const Bu=[];if(!$u)return Bu;const Lu=Ru=>{Bu.indexOf(Ru)<0&&Bu.push(Ru)};if(Tu&&Cu){const Ru=Cu.map(Pu),Ou=Tu.map(Pu);Ru.join("")!==Ou.join("")&&Lu("children"),Cu.length!==Tu.length&&Lu("children")}return e.filter(Ru=>Ru[0]==="_").map(Ru=>Ru.replace(/_/,"")).forEach(Ru=>{if(Ru in _u&&Ru in $u)if(o$1(_u[Ru])&&o$1($u[Ru])){const Ou=Object.keys(_u[Ru]),Du=Object.keys($u[Ru]);Ou.length!==Du.length?Lu(Ru):(Ou.forEach(Fu=>{_u[Ru][Fu]!==$u[Ru][Fu]&&Lu(Ru)}),Du.forEach(Fu=>{_u[Ru][Fu]!==$u[Ru][Fu]&&Lu(Ru)}))}else _u[Ru]!==$u[Ru]&&Lu(Ru)}),Bu}function M$3({swiper:_u,slides:$u,passedParams:Tu,changedParams:Cu,nextEl:Pu,prevEl:Bu,scrollbarEl:Lu,paginationEl:Ru}){const Ou=Cu.filter(Ku=>Ku!=="children"&&Ku!=="direction"),{params:Du,pagination:Fu,navigation:Vu,scrollbar:ku,virtual:Nu,thumbs:Gu}=_u;let ju,Hu,Uu,zu,Wu;Cu.includes("thumbs")&&Tu.thumbs&&Tu.thumbs.swiper&&Du.thumbs&&!Du.thumbs.swiper&&(ju=!0),Cu.includes("controller")&&Tu.controller&&Tu.controller.control&&Du.controller&&!Du.controller.control&&(Hu=!0),Cu.includes("pagination")&&Tu.pagination&&(Tu.pagination.el||Ru)&&(Du.pagination||Du.pagination===!1)&&Fu&&!Fu.el&&(Uu=!0),Cu.includes("scrollbar")&&Tu.scrollbar&&(Tu.scrollbar.el||Lu)&&(Du.scrollbar||Du.scrollbar===!1)&&ku&&!ku.el&&(zu=!0),Cu.includes("navigation")&&Tu.navigation&&(Tu.navigation.prevEl||Bu)&&(Tu.navigation.nextEl||Pu)&&(Du.navigation||Du.navigation===!1)&&Vu&&!Vu.prevEl&&!Vu.nextEl&&(Wu=!0);const Qu=Ku=>{!_u[Ku]||(_u[Ku].destroy(),Ku==="navigation"?(Du[Ku].prevEl=void 0,Du[Ku].nextEl=void 0,_u[Ku].prevEl=void 0,_u[Ku].nextEl=void 0):(Du[Ku].el=void 0,_u[Ku].el=void 0))};Ou.forEach(Ku=>{if(o$1(Du[Ku])&&o$1(Tu[Ku]))f$2(Du[Ku],Tu[Ku]);else{const Yu=Tu[Ku];(Yu===!0||Yu===!1)&&(Ku==="navigation"||Ku==="pagination"||Ku==="scrollbar")?Yu===!1&&Qu(Ku):Du[Ku]=Tu[Ku]}}),Ou.includes("controller")&&!Hu&&_u.controller&&_u.controller.control&&Du.controller&&Du.controller.control&&(_u.controller.control=Du.controller.control),Cu.includes("children")&&$u&&Nu&&Du.virtual.enabled?(Nu.slides=$u,Nu.update(!0)):Cu.includes("children")&&_u.lazy&&_u.params.lazy.enabled&&_u.lazy.load(),ju&&Gu.init()&&Gu.update(!0),Hu&&(_u.controller.control=Du.controller.control),Uu&&(Ru&&(Du.pagination.el=Ru),Fu.init(),Fu.render(),Fu.update()),zu&&(Lu&&(Du.scrollbar.el=Lu),ku.init(),ku.updateSize(),ku.setTranslate()),Wu&&(Pu&&(Du.navigation.nextEl=Pu),Bu&&(Du.navigation.prevEl=Bu),Vu.init(),Vu.update()),Cu.includes("allowSlideNext")&&(_u.allowSlideNext=Tu.allowSlideNext),Cu.includes("allowSlidePrev")&&(_u.allowSlidePrev=Tu.allowSlidePrev),Cu.includes("direction")&&_u.changeDirection(Tu.direction,!1),_u.update()}const Ce=_u=>({virtualData:_u&512}),se$2=_u=>({virtualData:_u[9]}),ze=_u=>({virtualData:_u&512}),ne$3=_u=>({virtualData:_u[9]}),Be=_u=>({virtualData:_u&512}),le$1=_u=>({virtualData:_u[9]}),qe=_u=>({virtualData:_u&512}),ie$2=_u=>({virtualData:_u[9]}),Ne=_u=>({virtualData:_u&512}),re$3=_u=>({virtualData:_u[9]});function ae$4(_u){let $u,Tu,Cu;return{c(){$u=I$8("div"),Tu=Jt(),Cu=I$8("div"),Et($u,"class","swiper-button-prev"),Et(Cu,"class","swiper-button-next")},m(Pu,Bu){vt(Pu,$u,Bu),_u[13]($u),vt(Pu,Tu,Bu),vt(Pu,Cu,Bu),_u[14](Cu)},p:E$a,d(Pu){Pu&&H$4($u),_u[13](null),Pu&&H$4(Tu),Pu&&H$4(Cu),_u[14](null)}}}function oe$1(_u){let $u;return{c(){$u=I$8("div"),Et($u,"class","swiper-scrollbar")},m(Tu,Cu){vt(Tu,$u,Cu),_u[15]($u)},p:E$a,d(Tu){Tu&&H$4($u),_u[15](null)}}}function fe(_u){let $u;return{c(){$u=I$8("div"),Et($u,"class","swiper-pagination")},m(Tu,Cu){vt(Tu,$u,Cu),_u[16]($u)},p:E$a,d(Tu){Tu&&H$4($u),_u[16](null)}}}function Ue(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru=l(_u[2]),Ou,Du=c$2(_u[2]),Fu,Vu=u$1(_u[2]),ku,Nu,Gu;const ju=_u[12]["container-start"],Hu=Rt(ju,_u,_u[11],re$3),Uu=_u[12]["wrapper-start"],zu=Rt(Uu,_u,_u[11],ie$2),Wu=_u[12].default,Qu=Rt(Wu,_u,_u[11],le$1),Ku=_u[12]["wrapper-end"],Yu=Rt(Ku,_u,_u[11],ne$3);let Xc=Ru&&ae$4(_u),_d=Du&&oe$1(_u),_f=Vu&&fe(_u);const qu=_u[12]["container-end"],Xu=Rt(qu,_u,_u[11],se$2);let Zu=[{class:Nu=d$3(`${_u[1]}${_u[0]?` ${_u[0]}`:""}`)},_u[3]],_c={};for(let Ju=0;Ju<Zu.length;Ju+=1)_c=$t(_c,Zu[Ju]);return{c(){$u=I$8("div"),Hu&&Hu.c(),Tu=Jt(),Cu=I$8("div"),zu&&zu.c(),Pu=Jt(),Qu&&Qu.c(),Bu=Jt(),Yu&&Yu.c(),Lu=Jt(),Xc&&Xc.c(),Ou=Jt(),_d&&_d.c(),Fu=Jt(),_f&&_f.c(),ku=Jt(),Xu&&Xu.c(),Et(Cu,"class","swiper-wrapper"),Vt($u,_c)},m(Ju,_h){vt(Ju,$u,_h),Hu&&Hu.m($u,null),ut($u,Tu),ut($u,Cu),zu&&zu.m(Cu,null),ut(Cu,Pu),Qu&&Qu.m(Cu,null),ut(Cu,Bu),Yu&&Yu.m(Cu,null),ut($u,Lu),Xc&&Xc.m($u,null),ut($u,Ou),_d&&_d.m($u,null),ut($u,Fu),_f&&_f.m($u,null),ut($u,ku),Xu&&Xu.m($u,null),_u[17]($u),Gu=!0},p(Ju,[_h]){Hu&&Hu.p&&(!Gu||_h&2560)&&Wt(Hu,ju,Ju,Ju[11],Gu?qt(ju,Ju[11],_h,Ne):Bt(Ju[11]),re$3),zu&&zu.p&&(!Gu||_h&2560)&&Wt(zu,Uu,Ju,Ju[11],Gu?qt(Uu,Ju[11],_h,qe):Bt(Ju[11]),ie$2),Qu&&Qu.p&&(!Gu||_h&2560)&&Wt(Qu,Wu,Ju,Ju[11],Gu?qt(Wu,Ju[11],_h,Be):Bt(Ju[11]),le$1),Yu&&Yu.p&&(!Gu||_h&2560)&&Wt(Yu,Ku,Ju,Ju[11],Gu?qt(Ku,Ju[11],_h,ze):Bt(Ju[11]),ne$3),_h&4&&(Ru=l(Ju[2])),Ru?Xc?Xc.p(Ju,_h):(Xc=ae$4(Ju),Xc.c(),Xc.m($u,Ou)):Xc&&(Xc.d(1),Xc=null),_h&4&&(Du=c$2(Ju[2])),Du?_d?_d.p(Ju,_h):(_d=oe$1(Ju),_d.c(),_d.m($u,Fu)):_d&&(_d.d(1),_d=null),_h&4&&(Vu=u$1(Ju[2])),Vu?_f?_f.p(Ju,_h):(_f=fe(Ju),_f.c(),_f.m($u,ku)):_f&&(_f.d(1),_f=null),Xu&&Xu.p&&(!Gu||_h&2560)&&Wt(Xu,qu,Ju,Ju[11],Gu?qt(qu,Ju[11],_h,Ce):Bt(Ju[11]),se$2),Vt($u,_c=we$3(Zu,[(!Gu||_h&3&&Nu!==(Nu=d$3(`${Ju[1]}${Ju[0]?` ${Ju[0]}`:""}`)))&&{class:Nu},_h&8&&Ju[3]]))},i(Ju){Gu||(gt(Hu,Ju),gt(zu,Ju),gt(Qu,Ju),gt(Yu,Ju),gt(Xu,Ju),Gu=!0)},o(Ju){jt(Hu,Ju),jt(zu,Ju),jt(Qu,Ju),jt(Yu,Ju),jt(Xu,Ju),Gu=!1},d(Ju){Ju&&H$4($u),Hu&&Hu.d(Ju),zu&&zu.d(Ju),Qu&&Qu.d(Ju),Yu&&Yu.d(Ju),Xc&&Xc.d(),_d&&_d.d(),_f&&_f.d(),Xu&&Xu.d(Ju),_u[17](null)}}}function je(_u,$u,Tu){const Cu=["class","swiper"];let Pu=Ht($u,Cu),{$$slots:Bu={},$$scope:Lu}=$u;const Ru=re$4();let{class:Ou=void 0}=$u,Du="swiper",Fu=!1,Vu=null,ku=null,Nu,Gu,ju,Hu,Uu=null,zu=null,Wu=null,Qu=null,Ku=null,Yu={slides:[]};function Xc(){return Vu}const _d=ep=>{Tu(9,Yu=ep),le$2().then(()=>{Vu.$wrapperEl.children(".swiper-slide").each(tp=>{tp.onSwiper&&tp.onSwiper(Vu)}),Vu.updateSlides(),Vu.updateProgress(),Vu.updateSlidesClasses(),Vu.lazy&&Vu.params.lazy.enabled&&Vu.lazy.load()})},_f=()=>{Nu=g(Pu),Tu(2,Gu=Nu.params),ju=Nu.passedParams,Tu(3,Hu=Nu.rest)};_f(),ku=ju;const qu=()=>{Fu=!0};if(Gu.onAny=(ep,...tp)=>{Ru(ep,tp)},Object.assign(Gu.on,{_beforeBreakpoint:qu,_containerClasses(ep,tp){Tu(1,Du=tp)}}),Vu=new Swiper(Gu),ce("swiper",Vu),Vu.virtual&&Vu.params.virtual.enabled){const ep={cache:!1,renderExternal:tp=>{_d(tp),Gu.virtual&&Gu.virtual.renderExternal&&Gu.virtual.renderExternal(tp)},renderExternalUpdate:!1};f$2(Vu.params.virtual,ep),f$2(Vu.originalParams.virtual,ep)}ie$3(()=>{!Uu||(d$2({el:Uu,nextEl:Wu,prevEl:zu,paginationEl:Ku,scrollbarEl:Qu,swiper:Vu},Gu),Ru("swiper",[Vu]),!Gu.virtual&&Vu.slides.each(ep=>{ep.onSwiper&&ep.onSwiper(Vu)}))}),oe$2(()=>{if(!Vu)return;_f();const ep=r$1(ju,ku);(ep.length||Fu)&&Vu&&!Vu.destroyed&&M$3({swiper:Vu,passedParams:ju,changedParams:ep,nextEl:Wu,prevEl:zu,scrollbarEl:Qu,paginationEl:Ku}),Fu=!1,ku=ju}),se$3(()=>{typeof window!="undefined"&&Vu&&!Vu.destroyed&&Vu.destroy(!0,!1)});function Xu(ep){tt[ep?"unshift":"push"](()=>{zu=ep,Tu(5,zu)})}function Zu(ep){tt[ep?"unshift":"push"](()=>{Wu=ep,Tu(6,Wu)})}function _c(ep){tt[ep?"unshift":"push"](()=>{Qu=ep,Tu(7,Qu)})}function Ju(ep){tt[ep?"unshift":"push"](()=>{Ku=ep,Tu(8,Ku)})}function _h(ep){tt[ep?"unshift":"push"](()=>{Uu=ep,Tu(4,Uu)})}return _u.$$set=ep=>{$u=$t($t({},$u),Ft(ep)),Tu(27,Pu=Ht($u,Cu)),"class"in ep&&Tu(0,Ou=ep.class),"$$scope"in ep&&Tu(11,Lu=ep.$$scope)},[Ou,Du,Gu,Hu,Uu,zu,Wu,Qu,Ku,Yu,Xc,Lu,Bu,Xu,Zu,_c,Ju,_h]}class Ge extends be$1{constructor($u){super(),xe(this,$u,je,Ue,Dt,{class:0,swiper:10})}get swiper(){return this.$$.ctx[10]}}const Z=_u=>({data:_u&32}),I$4=_u=>({data:_u[5]}),x$3=_u=>({data:_u&32}),y$1=_u=>({data:_u[5]});function $$3(_u){let $u;const Tu=_u[8].default,Cu=Rt(Tu,_u,_u[7],I$4);return{c(){Cu&&Cu.c()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),$u=!0},p(Pu,Bu){Cu&&Cu.p&&(!$u||Bu&160)&&Wt(Cu,Tu,Pu,Pu[7],$u?qt(Tu,Pu[7],Bu,Z):Bt(Pu[7]),I$4)},i(Pu){$u||(gt(Cu,Pu),$u=!0)},o(Pu){jt(Cu,Pu),$u=!1},d(Pu){Cu&&Cu.d(Pu)}}}function ee$2(_u){let $u,Tu,Cu;const Pu=_u[8].default,Bu=Rt(Pu,_u,_u[7],y$1);return{c(){$u=I$8("div"),Bu&&Bu.c(),Et($u,"class","swiper-zoom-container"),Et($u,"data-swiper-zoom",Tu=typeof _u[0]=="number"?_u[0]:void 0)},m(Lu,Ru){vt(Lu,$u,Ru),Bu&&Bu.m($u,null),Cu=!0},p(Lu,Ru){Bu&&Bu.p&&(!Cu||Ru&160)&&Wt(Bu,Pu,Lu,Lu[7],Cu?qt(Pu,Lu[7],Ru,x$3):Bt(Lu[7]),y$1),(!Cu||Ru&1&&Tu!==(Tu=typeof Lu[0]=="number"?Lu[0]:void 0))&&Et($u,"data-swiper-zoom",Tu)},i(Lu){Cu||(gt(Bu,Lu),Cu=!0)},o(Lu){jt(Bu,Lu),Cu=!1},d(Lu){Lu&&H$4($u),Bu&&Bu.d(Lu)}}}function te$2(_u){let $u,Tu,Cu,Pu,Bu;const Lu=[ee$2,$$3],Ru=[];function Ou(Vu,ku){return Vu[0]?0:1}Tu=Ou(_u),Cu=Ru[Tu]=Lu[Tu](_u);let Du=[{class:Pu=d$3(`${_u[3]}${_u[2]?` ${_u[2]}`:""}`)},{"data-swiper-slide-index":_u[1]},_u[6]],Fu={};for(let Vu=0;Vu<Du.length;Vu+=1)Fu=$t(Fu,Du[Vu]);return{c(){$u=I$8("div"),Cu.c(),Vt($u,Fu)},m(Vu,ku){vt(Vu,$u,ku),Ru[Tu].m($u,null),_u[9]($u),Bu=!0},p(Vu,[ku]){let Nu=Tu;Tu=Ou(Vu),Tu===Nu?Ru[Tu].p(Vu,ku):(ae$5(),jt(Ru[Nu],1,1,()=>{Ru[Nu]=null}),de$2(),Cu=Ru[Tu],Cu?Cu.p(Vu,ku):(Cu=Ru[Tu]=Lu[Tu](Vu),Cu.c()),gt(Cu,1),Cu.m($u,null)),Vt($u,Fu=we$3(Du,[(!Bu||ku&12&&Pu!==(Pu=d$3(`${Vu[3]}${Vu[2]?` ${Vu[2]}`:""}`)))&&{class:Pu},(!Bu||ku&2)&&{"data-swiper-slide-index":Vu[1]},ku&64&&Vu[6]]))},i(Vu){Bu||(gt(Cu),Bu=!0)},o(Vu){jt(Cu),Bu=!1},d(Vu){Vu&&H$4($u),Ru[Tu].d(),_u[9](null)}}}function se$1(_u,$u,Tu){let Cu;const Pu=["zoom","virtualIndex","class"];let Bu=Ht($u,Pu),{$$slots:Lu={},$$scope:Ru}=$u,{zoom:Ou=void 0}=$u,{virtualIndex:Du=void 0}=$u,{class:Fu=void 0}=$u,Vu=null,ku="swiper-slide",Nu=fe$1("swiper"),Gu=!1;const ju=(Wu,Qu,Ku)=>{Qu===Vu&&Tu(3,ku=Ku)},Hu=()=>{!Nu||Gu||(Nu.on("_slideClass",ju),Gu=!0)},Uu=()=>{!Nu||(Nu.off("_slideClass",ju),Gu=!1)};ie$3(()=>{typeof Du!="undefined"&&(Tu(4,Vu.onSwiper=Wu=>{Nu=Wu,Hu()},Vu),Hu())}),oe$2(()=>{if(!(!Vu||!Nu)){if(Nu.destroyed){ku!=="swiper-slide"&&Tu(3,ku="swiper-slide");return}Hu()}}),ne$4(()=>{Hu()}),se$3(()=>{!Nu||Uu()});function zu(Wu){tt[Wu?"unshift":"push"](()=>{Vu=Wu,Tu(4,Vu)})}return _u.$$set=Wu=>{$u=$t($t({},$u),Ft(Wu)),Tu(6,Bu=Ht($u,Pu)),"zoom"in Wu&&Tu(0,Ou=Wu.zoom),"virtualIndex"in Wu&&Tu(1,Du=Wu.virtualIndex),"class"in Wu&&Tu(2,Fu=Wu.class),"$$scope"in Wu&&Tu(7,Ru=Wu.$$scope)},_u.$$.update=()=>{_u.$$.dirty&8&&Tu(5,Cu={isActive:ku.indexOf("swiper-slide-active")>=0||ku.indexOf("swiper-slide-duplicate-active")>=0,isVisible:ku.indexOf("swiper-slide-visible")>=0,isDuplicate:ku.indexOf("swiper-slide-duplicate")>=0,isPrev:ku.indexOf("swiper-slide-prev")>=0||ku.indexOf("swiper-slide-duplicate-prev")>=0,isNext:ku.indexOf("swiper-slide-next")>=0||ku.indexOf("swiper-slide-duplicate-next")>=0})},[Ou,Du,Fu,ku,Vu,Cu,Bu,Ru,Lu,zu]}class ne$2 extends be$1{constructor($u){super(),xe(this,$u,se$1,te$2,Dt,{zoom:0,virtualIndex:1,class:2})}}var swiper_min="",autoplay_min="";function M$2(_u){Ut(_u,"svelte-cwtvzu",".media-item.svelte-cwtvzu.svelte-cwtvzu{height:100%}.media-content.svelte-cwtvzu.svelte-cwtvzu{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.video-icon.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-cwtvzu.svelte-cwtvzu{display:none;pointer-events:auto;position:absolute;width:100%;height:100%;top:0;left:0}.video-play-button-container.showPlayButton.svelte-cwtvzu.svelte-cwtvzu{display:block}.video-icon.large.svelte-cwtvzu.svelte-cwtvzu{width:12.5rem;height:6.25rem}.video-icon.small.svelte-cwtvzu.svelte-cwtvzu{width:1.75rem;height:1.75rem}.video-icon.svelte-cwtvzu .video-icon-img.svelte-cwtvzu{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-cwtvzu .video-icon-img.canPlay.svelte-cwtvzu{cursor:pointer}")}function I$3(_u){let $u;function Tu(Bu,Lu){if(Bu[0].type==="Image")return A$1;if(Bu[0].type==="Video")return V$3}let Cu=Tu(_u),Pu=Cu&&Cu(_u);return{c(){$u=I$8("div"),Pu&&Pu.c(),Et($u,"class","media-item svelte-cwtvzu")},m(Bu,Lu){vt(Bu,$u,Lu),Pu&&Pu.m($u,null)},p(Bu,Lu){Cu===(Cu=Tu(Bu))&&Pu?Pu.p(Bu,Lu):(Pu&&Pu.d(1),Pu=Cu&&Cu(Bu),Pu&&(Pu.c(),Pu.m($u,null)))},d(Bu){Bu&&H$4($u),Pu&&Pu.d()}}}function V$3(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu;return{c(){var ku;$u=I$8("video"),Lu=Jt(),Ru=I$8("div"),Ou=I$8("div"),Du=I$8("div"),Et($u,"class","media-content svelte-cwtvzu"),Et($u,"style",Tu=`object-fit: ${_u[3]};`),Lt($u.src,Cu=_u[0].url+"#t=0.1")||Et($u,"src",Cu),Et($u,"poster",Pu=(ku=_u[0].videoCoverUrl)!=null?ku:void 0),Et($u,"preload",Bu=_u[0].videoCoverUrl?void 0:"auto"),$u.playsInline=!0,Et($u,"paused",""),$u.loop=!1,Et($u,"crossorigin",""),$u.controls=!1,te$4($u,"showPlayButton",_u[5]),Et(Du,"class","video-icon-img svelte-cwtvzu"),Yt(Du,"background-image","url("+(_u[1]==="large"?a$1:g$1)+")"),te$4(Du,"canPlay",_u[2]),Et(Ou,"class","video-icon svelte-cwtvzu"),te$4(Ou,"large",_u[1]==="large"),te$4(Ou,"small",_u[1]==="small"),Et(Ru,"class","video-play-button-container svelte-cwtvzu"),te$4(Ru,"showPlayButton",_u[5])},m(ku,Nu){vt(ku,$u,Nu),_u[7]($u),vt(ku,Lu,Nu),vt(ku,Ru,Nu),ut(Ru,Ou),ut(Ou,Du),Fu||(Vu=[Z$2($u,"click",_u[6]),Z$2(Du,"click",_u[8])],Fu=!0)},p(ku,Nu){var Gu;Nu&8&&Tu!==(Tu=`object-fit: ${ku[3]};`)&&Et($u,"style",Tu),Nu&1&&!Lt($u.src,Cu=ku[0].url+"#t=0.1")&&Et($u,"src",Cu),Nu&1&&Pu!==(Pu=(Gu=ku[0].videoCoverUrl)!=null?Gu:void 0)&&Et($u,"poster",Pu),Nu&1&&Bu!==(Bu=ku[0].videoCoverUrl?void 0:"auto")&&Et($u,"preload",Bu),Nu&32&&te$4($u,"showPlayButton",ku[5]),Nu&2&&Yt(Du,"background-image","url("+(ku[1]==="large"?a$1:g$1)+")"),Nu&4&&te$4(Du,"canPlay",ku[2]),Nu&2&&te$4(Ou,"large",ku[1]==="large"),Nu&2&&te$4(Ou,"small",ku[1]==="small"),Nu&32&&te$4(Ru,"showPlayButton",ku[5])},d(ku){ku&&H$4($u),_u[7](null),ku&&H$4(Lu),ku&&H$4(Ru),Fu=!1,N$3(Vu)}}}function A$1(_u){let $u,Tu,Cu,Pu;return{c(){$u=I$8("img"),Et($u,"class","media-content svelte-cwtvzu"),Et($u,"style",Tu=`object-fit: ${_u[3]};`),Lt($u.src,Cu=_u[0].url)||Et($u,"src",Cu),Et($u,"alt",Pu=_u[0].name)},m(Bu,Lu){vt(Bu,$u,Lu)},p(Bu,Lu){Lu&8&&Tu!==(Tu=`object-fit: ${Bu[3]};`)&&Et($u,"style",Tu),Lu&1&&!Lt($u.src,Cu=Bu[0].url)&&Et($u,"src",Cu),Lu&1&&Pu!==(Pu=Bu[0].name)&&Et($u,"alt",Pu)},d(Bu){Bu&&H$4($u)}}}function D$1(_u){let $u,Tu=_u[0]&&I$3(_u);return{c(){Tu&&Tu.c(),$u=Kt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),vt(Cu,$u,Pu)},p(Cu,[Pu]){Cu[0]?Tu?Tu.p(Cu,Pu):(Tu=I$3(Cu),Tu.c(),Tu.m($u.parentNode,$u)):Tu&&(Tu.d(1),Tu=null)},i:E$a,o:E$a,d(Cu){Tu&&Tu.d(Cu),Cu&&H$4($u)}}}function G$1(_u,$u,Tu){let{media:Cu}=$u,{playButtonIfNeed:Pu="small"}=$u,{canPlay:Bu=!0}=$u,{objectFit:Lu="cover"}=$u,Ru,Ou=!1;const Du=()=>Ru==null?void 0:Ru.pause();function Fu(ku){tt[ku?"unshift":"push"](()=>{Ru=ku,Tu(4,Ru)})}const Vu=()=>{!Bu||Ru&&Ru.play()};return _u.$$set=ku=>{"media"in ku&&Tu(0,Cu=ku.media),"playButtonIfNeed"in ku&&Tu(1,Pu=ku.playButtonIfNeed),"canPlay"in ku&&Tu(2,Bu=ku.canPlay),"objectFit"in ku&&Tu(3,Lu=ku.objectFit)},_u.$$.update=()=>{_u.$$.dirty&16&&Ru&&(Tu(5,Ou=Ru.paused),Ru.addEventListener("play",()=>{Tu(5,Ou=!1)}),Ru.addEventListener("pause",()=>{Tu(5,Ou=!0)}))},[Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu]}class K$2 extends be$1{constructor($u){super(),xe(this,$u,G$1,D$1,Dt,{media:0,playButtonIfNeed:1,canPlay:2,objectFit:3},M$2)}}var z$2=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});function ge(_u){Ut(_u,"svelte-ai0lv9",".media.svelte-ai0lv9{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}")}function W(_u,$u,Tu){const Cu=_u.slice();return Cu[23]=$u[Tu],Cu}function X$2(_u){let $u,Tu,Cu,Pu,Bu,Lu;const Ru=[pe,he],Ou=[];function Du(Fu,Vu){return Fu[13]?0:1}return Tu=Du(_u),Cu=Ou[Tu]=Ru[Tu](_u),{c(){$u=I$8("div"),Cu.c(),Et($u,"class","media svelte-ai0lv9"),te$4($u,"unfolded",_u[4])},m(Fu,Vu){vt(Fu,$u,Vu),Ou[Tu].m($u,null),Lu=!0},p(Fu,Vu){_u=Fu;let ku=Tu;Tu=Du(_u),Tu===ku?Ou[Tu].p(_u,Vu):(ae$5(),jt(Ou[ku],1,1,()=>{Ou[ku]=null}),de$2(),Cu=Ou[Tu],Cu?Cu.p(_u,Vu):(Cu=Ou[Tu]=Ru[Tu](_u),Cu.c()),gt(Cu,1),Cu.m($u,null)),(!Lu||Vu&16)&&te$4($u,"unfolded",_u[4])},i(Fu){Lu||(gt(Cu),Fu&&j$3(()=>{Bu&&Bu.end(1),Pu=he$1($u,h$4,_u[5]?{y:4,duration:_u[3],delay:_u[1],easing:nt}:void 0),Pu.start()}),Lu=!0)},o(Fu){jt(Cu),Pu&&Pu.invalidate(),Fu&&(Bu=_e$1($u,h$4,_u[5]?{y:4,duration:_u[3],delay:_u[2],easing:nt}:void 0)),Lu=!1},d(Fu){Fu&&H$4($u),Ou[Tu].d(),Fu&&Bu&&Bu.end()}}}function he(_u){let $u,Tu;return $u=new K$2({props:{media:_u[0][0],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&1&&(Bu.media=Cu[0][0]),Pu&256&&(Bu.objectFit=Cu[8]),Pu&64&&(Bu.playButtonIfNeed=Cu[6]),Pu&128&&(Bu.canPlay=Cu[7]),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function pe(_u){let $u,Tu;return $u=new Ge({props:{style:"height: 100%",modules:[Autoplay],spaceBetween:30,autoplay:_u[14]?e$1({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1,loop:!0,$$slots:{default:[ve]},$$scope:{ctx:_u}}}),$u.$on("init",_u[19]),$u.$on("slideChange",_u[20]),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&16384&&(Bu.autoplay=Cu[14]?e$1({delay:4e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1),Pu&67111360&&(Bu.$$scope={dirty:Pu,ctx:Cu}),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function be(_u){let $u,Tu,Cu;return $u=new K$2({props:{media:_u[23],objectFit:_u[8],playButtonIfNeed:_u[6],canPlay:_u[7]}}),{c(){$e($u.$$.fragment),Tu=Jt()},m(Pu,Bu){zt($u,Pu,Bu),vt(Pu,Tu,Bu),Cu=!0},p(Pu,Bu){const Lu={};Bu&2048&&(Lu.media=Pu[23]),Bu&256&&(Lu.objectFit=Pu[8]),Bu&64&&(Lu.playButtonIfNeed=Pu[6]),Bu&128&&(Lu.canPlay=Pu[7]),$u.$set(Lu)},i(Pu){Cu||(gt($u.$$.fragment,Pu),Cu=!0)},o(Pu){jt($u.$$.fragment,Pu),Cu=!1},d(Pu){Ot($u,Pu),Pu&&H$4(Tu)}}}function Y(_u){let $u,Tu;return $u=new ne$2({props:{$$slots:{default:[be]},$$scope:{ctx:_u}}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&67111360&&(Bu.$$scope={dirty:Pu,ctx:Cu}),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function ve(_u){let $u,Tu,Cu=_u[11],Pu=[];for(let Lu=0;Lu<Cu.length;Lu+=1)Pu[Lu]=Y(W(_u,Cu,Lu));const Bu=Lu=>jt(Pu[Lu],1,1,()=>{Pu[Lu]=null});return{c(){for(let Lu=0;Lu<Pu.length;Lu+=1)Pu[Lu].c();$u=Kt()},m(Lu,Ru){for(let Ou=0;Ou<Pu.length;Ou+=1)Pu[Ou].m(Lu,Ru);vt(Lu,$u,Ru),Tu=!0},p(Lu,Ru){if(Ru&2496){Cu=Lu[11];let Ou;for(Ou=0;Ou<Cu.length;Ou+=1){const Du=W(Lu,Cu,Ou);Pu[Ou]?(Pu[Ou].p(Du,Ru),gt(Pu[Ou],1)):(Pu[Ou]=Y(Du),Pu[Ou].c(),gt(Pu[Ou],1),Pu[Ou].m($u.parentNode,$u))}for(ae$5(),Ou=Cu.length;Ou<Pu.length;Ou+=1)Bu(Ou);de$2()}},i(Lu){if(!Tu){for(let Ru=0;Ru<Cu.length;Ru+=1)gt(Pu[Ru]);Tu=!0}},o(Lu){Pu=Pu.filter(Boolean);for(let Ru=0;Ru<Pu.length;Ru+=1)jt(Pu[Ru]);Tu=!1},d(Lu){Gt(Pu,Lu),Lu&&H$4($u)}}}function ke(_u){let $u,Tu,Cu=_u[4]&&X$2(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[4]?Cu?(Cu.p(Pu,Bu),Bu&16&&gt(Cu,1)):(Cu=X$2(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function we$2(_u,$u,Tu){let Cu,Pu,Bu,{tag:Lu}=$u,{mediaData:Ru}=$u,{inDelay:Ou=0}=$u,{outDelay:Du=0}=$u,{duration:Fu=0}=$u,{unfolded:Vu=!0}=$u,{animation:ku=!0}=$u,{playButtonIfNeed:Nu="small"}=$u,{canPlay:Gu=!0}=$u,{objectFit:ju="cover"}=$u,{enableCarousel:Hu=!0}=$u,{autoplayConfig:Uu={autoplay:!0,autoplayVideo:!1}}=$u;const zu=fe$1("mediaStore"),Wu=fe$1("hooks");let Qu;function Ku(qu){!Cu||!Qu||(zu.set({currentMediaUrl:this.src}),Wu.emit("playStateChange",{event:qu,state:"playing",tag:Lu,mediaInstance:this}),Qu.autoplay.stop())}function Yu(qu){!Cu||!Qu||(Wu.emit("playStateChange",{event:qu,state:"paused",tag:Lu,mediaInstance:this}),Qu.autoplay.running||Qu.autoplay.start())}let Xc=null;const _d=qu=>{Tu(10,Qu=qu.detail[0])},_f=qu=>z$2(this,null,function*(){var Xu,Zu,_c;if(!Bu||!Uu.autoplayVideo)return;const Ju=qu.detail[0];if(!Ju)return;const _h=Ju.realIndex;if(_h===Xc)return;Tu(12,Xc=_h);const ep=Pu[_h];if(!ep||ep.type!=="Video")return;Ju.autoplay.stop(),Ju.slides.map(rp=>rp.querySelector("video")).filter(i$4).forEach(rp=>rp.pause());const tp=(Xu=Ju.slides[Ju.activeIndex])==null?void 0:Xu.querySelector("video");if(tp&&(tp.removeEventListener("play",Ku),tp.removeEventListener("pause",Yu),tp.addEventListener("play",Ku),tp.addEventListener("pause",Yu)),tp){tp.addEventListener("click",()=>tp.pause());const rp=(_c=(Zu=tp.parentElement)==null?void 0:Zu.getElementsByClassName("video-play-button-container"))==null?void 0:_c[0];tp.addEventListener("play",()=>rp==null?void 0:rp.classList.remove("showPlayButton")),tp.addEventListener("pause",()=>rp==null?void 0:rp.classList.add("showPlayButton")),rp&&(tp.paused?rp.classList.add("showPlayButton"):rp.classList.remove("showPlayButton"),rp.addEventListener("click",()=>tp.play()))}});return _u.$$set=qu=>{"tag"in qu&&Tu(17,Lu=qu.tag),"mediaData"in qu&&Tu(0,Ru=qu.mediaData),"inDelay"in qu&&Tu(1,Ou=qu.inDelay),"outDelay"in qu&&Tu(2,Du=qu.outDelay),"duration"in qu&&Tu(3,Fu=qu.duration),"unfolded"in qu&&Tu(4,Vu=qu.unfolded),"animation"in qu&&Tu(5,ku=qu.animation),"playButtonIfNeed"in qu&&Tu(6,Nu=qu.playButtonIfNeed),"canPlay"in qu&&Tu(7,Gu=qu.canPlay),"objectFit"in qu&&Tu(8,ju=qu.objectFit),"enableCarousel"in qu&&Tu(18,Hu=qu.enableCarousel),"autoplayConfig"in qu&&Tu(9,Uu=qu.autoplayConfig)},_u.$$.update=()=>{_u.$$.dirty&262145&&Tu(13,Cu=Hu&&(Ru==null?void 0:Ru.length)>1),_u.$$.dirty&1&&Tu(11,Pu=Ru),_u.$$.dirty&2560&&Tu(14,Bu=Pu.length>1&&Uu.autoplay),_u.$$.dirty&1024&&Qu&&Qu.slides.forEach(qu=>{const Xu=qu.querySelector("video");Xu&&zu.subscribe(({currentMediaUrl:Zu})=>{Zu!==Xu.src&&Xu.pause()})})},[Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Uu,Qu,Pu,Xc,Cu,Bu,Ku,Yu,Lu,Hu,_d,_f]}class Oe extends be$1{constructor($u){super(),xe(this,$u,we$2,ke,Dt,{tag:17,mediaData:0,inDelay:1,outDelay:2,duration:3,unfolded:4,animation:5,playButtonIfNeed:6,canPlay:7,objectFit:8,enableCarousel:18,autoplayConfig:9},ge)}}function O$3(_u){Ut(_u,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function M$1(_u,$u,Tu){const Cu=_u.slice();return Cu[5]=$u[Tu].id,Cu[1]=$u[Tu].content,Cu}function P$3(_u){let $u,Tu,Cu,Pu,Bu,Lu=[],Ru=new Map,Ou,Du,Fu;$u=new P$7({props:{visible:_u[4],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Pu=new A$2({props:{unfolded:_u[4],duration:1e3,outDelay:400}});let Vu=_u[2];const ku=Gu=>Gu[5];for(let Gu=0;Gu<Vu.length;Gu+=1){let ju=M$1(_u,Vu,Gu),Hu=ku(ju);Ru.set(Hu,Lu[Gu]=R$4(Hu,ju))}let Nu=_u[3]&&S$2(_u);return{c(){$e($u.$$.fragment),Tu=Jt(),Cu=I$8("div"),$e(Pu.$$.fragment),Bu=Jt();for(let Gu=0;Gu<Lu.length;Gu+=1)Lu[Gu].c();Ou=Jt(),Nu&&Nu.c(),Du=Kt(),Et(Cu,"class","line svelte-1f7m1lj")},m(Gu,ju){zt($u,Gu,ju),vt(Gu,Tu,ju),vt(Gu,Cu,ju),zt(Pu,Cu,null),vt(Gu,Bu,ju);for(let Hu=0;Hu<Lu.length;Hu+=1)Lu[Hu].m(Gu,ju);vt(Gu,Ou,ju),Nu&&Nu.m(Gu,ju),vt(Gu,Du,ju),Fu=!0},p(Gu,ju){const Hu={};ju&16&&(Hu.visible=Gu[4]),$u.$set(Hu);const Uu={};ju&16&&(Uu.unfolded=Gu[4]),Pu.$set(Uu),ju&20&&(Vu=Gu[2],ae$5(),Lu=ge$1(Lu,ju,ku,1,Gu,Vu,Ru,Ou.parentNode,ye$1,R$4,Ou,M$1),de$2()),Gu[3]?Nu?(Nu.p(Gu,ju),ju&8&&gt(Nu,1)):(Nu=S$2(Gu),Nu.c(),gt(Nu,1),Nu.m(Du.parentNode,Du)):Nu&&(ae$5(),jt(Nu,1,1,()=>{Nu=null}),de$2())},i(Gu){if(!Fu){gt($u.$$.fragment,Gu),gt(Pu.$$.fragment,Gu);for(let ju=0;ju<Vu.length;ju+=1)gt(Lu[ju]);gt(Nu),Fu=!0}},o(Gu){jt($u.$$.fragment,Gu),jt(Pu.$$.fragment,Gu);for(let ju=0;ju<Lu.length;ju+=1)jt(Lu[ju]);jt(Nu),Fu=!1},d(Gu){Ot($u,Gu),Gu&&H$4(Tu),Gu&&H$4(Cu),Ot(Pu),Gu&&H$4(Bu);for(let ju=0;ju<Lu.length;ju+=1)Lu[ju].d(Gu);Gu&&H$4(Ou),Nu&&Nu.d(Gu),Gu&&H$4(Du)}}}function R$4(_u,$u){let Tu,Cu,Pu;return Cu=new H$2({props:{unfolded:$u[4],content:$u[1],inDelay:500}}),{key:_u,first:null,c(){Tu=I$8("div"),$e(Cu.$$.fragment),Et(Tu,"class","text svelte-1f7m1lj"),this.first=Tu},m(Bu,Lu){vt(Bu,Tu,Lu),zt(Cu,Tu,null),Pu=!0},p(Bu,Lu){$u=Bu;const Ru={};Lu&16&&(Ru.unfolded=$u[4]),Lu&4&&(Ru.content=$u[1]),Cu.$set(Ru)},i(Bu){Pu||(gt(Cu.$$.fragment,Bu),Pu=!0)},o(Bu){jt(Cu.$$.fragment,Bu),Pu=!1},d(Bu){Bu&&H$4(Tu),Ot(Cu)}}}function S$2(_u){let $u,Tu,Cu;return Tu=new Oe({props:{autoplayConfig:{autoplay:!1},unfolded:_u[4],mediaData:_u[3],tag:_u[0],enableCarousel:!1,canPlay:!1,playButtonIfNeed:"small",inDelay:500,duration:500}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Et($u,"class","media-wrapper svelte-1f7m1lj")},m(Pu,Bu){vt(Pu,$u,Bu),zt(Tu,$u,null),Cu=!0},p(Pu,Bu){const Lu={};Bu&16&&(Lu.unfolded=Pu[4]),Bu&8&&(Lu.mediaData=Pu[3]),Bu&1&&(Lu.tag=Pu[0]),Tu.$set(Lu)},i(Pu){Cu||(gt(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){jt(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&H$4($u),Ot(Tu)}}}function Q(_u){let $u,Tu,Cu=_u[0].state&&P$3(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[0].state?Cu?(Cu.p(Pu,Bu),Bu&1&&gt(Cu,1)):(Cu=P$3(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function U$1(_u,$u,Tu){let Cu,Pu,Bu,{tag:Lu}=$u,Ru;return _u.$$set=Ou=>{"tag"in Ou&&Tu(0,Lu=Ou.tag)},_u.$$.update=()=>{var Ou,Du,Fu;_u.$$.dirty&1&&Tu(4,Cu=Lu.state?Lu.state.unfolded:!1),_u.$$.dirty&1&&Tu(1,Pu=((Du=(Ou=Lu.data.text)==null?void 0:Ou.length)!=null?Du:0)>7?((Fu=Lu.data.text)==null?void 0:Fu.substring(0,6))+"...":Lu.data.text),_u.$$.dirty&1&&Tu(3,Bu=Lu.data.mediaData),_u.$$.dirty&2&&Tu(2,Ru=Pu?[{id:r$7(),content:Pu}]:[])},[Lu,Pu,Ru,Bu,Cu]}class te$1 extends be$1{constructor($u){super(),xe(this,$u,U$1,Q,Dt,{tag:0},O$3)}}function ye(_u){Ut(_u,"svelte-8mby9k",".svelte-8mby9k.svelte-8mby9k{box-sizing:border-box}.marketing.svelte-8mby9k.svelte-8mby9k{transform:translateY(-100%)}.content.svelte-8mby9k .headerImage.svelte-8mby9k{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.line.svelte-8mby9k.svelte-8mby9k{position:absolute;height:2.0625rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.content.svelte-8mby9k.svelte-8mby9k{background-color:white;position:relative;display:flex;flex-direction:column;min-width:11.125rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition:all 500ms}.title.svelte-8mby9k.svelte-8mby9k{position:absolute;background-color:white;border-radius:0.25rem;width:100%;top:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.title.svelte-8mby9k .text.svelte-8mby9k{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem;color:#000}.footer.svelte-8mby9k.svelte-8mby9k{position:relative;padding-left:0.75rem;padding-right:0.75rem;width:100%;height:1.375rem;display:flex;align-items:center}.footer.svelte-8mby9k .goto-button.svelte-8mby9k{flex-shrink:0;white-space:nowrap;background-image:linear-gradient(to right, rgba(87, 144, 253, 1) 0, rgba(42, 114, 254, 1) 100%);color:#fff;font-size:0.625rem;border-radius:0.875rem;font-weight:bold;padding-left:0.5rem;padding-right:0.5rem;height:1.25rem;margin-left:auto;display:flex;align-items:center}.footer.svelte-8mby9k .goto-icon.svelte-8mby9k::after{content:'';display:inline-block;width:0.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAJ3RSTlMAFNO2pYt4bErz8uP6ysawgVtBPDcR5C4s2L6ZmJBzZGJXUyEeDws/0G2zAAAAkklEQVQ4y+3TRw6DMBAF0OAeJ3QCpCe0uf8NwRILLBYfiS1/aT3JoymnI+sERZ5VCH0iVto3QDfBLmeSSMUTogRV9bBEpJAKaYpGijn13aTSLeraeG9D0NZFZv4/rRL5FDHnITlllqjv6tykWsmX4JHr05y7j6oFKq2P8He48B0tAM0EY0EDxquClw6vLz6EI35GmwwSZpe+WOgAAAAASUVORK5CYII=);background-size:100% auto;background-repeat:no-repeat}.price.svelte-8mby9k.svelte-8mby9k{flex-shrink:0;margin-right:0.75rem;white-space:nowrap;color:#ff6600;display:flex;align-items:baseline}.price.svelte-8mby9k .value.svelte-8mby9k{position:relative;top:0.0625rem;font-size:1.125rem;line-height:1.375rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.price.svelte-8mby9k .unit.svelte-8mby9k{padding-left:0.125rem;font-size:0.625rem}.tag.svelte-8mby9k.svelte-8mby9k{position:relative;background-color:white;display:flex;width:-moz-max-content;width:max-content;padding-left:0.75rem;padding-right:0.75rem;min-height:1.75rem}.tag.svelte-8mby9k .base-tag.svelte-8mby9k{height:1rem;margin-top:1.375rem;margin-bottom:0.5rem;margin-right:0.25rem;font-size:0.625rem;line-height:0.875rem;padding:0.0625rem 0.25rem;border-radius:0.125rem;overflow:hidden}.tag.svelte-8mby9k .primary-tag.svelte-8mby9k{background:#e5eefe;color:#0055ff}.tag.svelte-8mby9k .secondary-tag.svelte-8mby9k{background:rgba(255, 102, 0, 0.08);color:rgba(255, 102, 0, 1)}.unfolded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 1)}.folded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.unfolded.svelte-8mby9k .content.svelte-8mby9k{opacity:1}.folded.svelte-8mby9k .content.svelte-8mby9k{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}")}function $$2(_u,$u,Tu){const Cu=_u.slice();return Cu[0]=$u[Tu],Cu}function x$2(_u,$u,Tu){const Cu=_u.slice();return Cu[0]=$u[Tu],Cu}function ee$1(_u){let $u,Tu=_u[0]+"",Cu;return{c(){$u=I$8("div"),Cu=at(Tu),Et($u,"class","base-tag primary-tag svelte-8mby9k")},m(Pu,Bu){vt(Pu,$u,Bu),ut($u,Cu)},p(Pu,Bu){Bu&4&&Tu!==(Tu=Pu[0]+"")&&Xt(Cu,Tu)},d(Pu){Pu&&H$4($u)}}}function te(_u){let $u,Tu=_u[0]&&ee$1(_u);return{c(){Tu&&Tu.c(),$u=Kt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),vt(Cu,$u,Pu)},p(Cu,Pu){Cu[0]?Tu?Tu.p(Cu,Pu):(Tu=ee$1(Cu),Tu.c(),Tu.m($u.parentNode,$u)):Tu&&(Tu.d(1),Tu=null)},d(Cu){Tu&&Tu.d(Cu),Cu&&H$4($u)}}}function le(_u){let $u,Tu=_u[0]+"",Cu;return{c(){$u=I$8("div"),Cu=at(Tu),Et($u,"class","base-tag secondary-tag svelte-8mby9k")},m(Pu,Bu){vt(Pu,$u,Bu),ut($u,Cu)},p(Pu,Bu){Bu&4&&Tu!==(Tu=Pu[0]+"")&&Xt(Cu,Tu)},d(Pu){Pu&&H$4($u)}}}function ie$1(_u){let $u,Tu=_u[0]&&le(_u);return{c(){Tu&&Tu.c(),$u=Kt()},m(Cu,Pu){Tu&&Tu.m(Cu,Pu),vt(Cu,$u,Pu)},p(Cu,Pu){Cu[0]?Tu?Tu.p(Cu,Pu):(Tu=le(Cu),Tu.c(),Tu.m($u.parentNode,$u)):Tu&&(Tu.d(1),Tu=null)},d(Cu){Tu&&Tu.d(Cu),Cu&&H$4($u)}}}function ne$1(_u){let $u,Tu,Cu=_u[2].price.value+"",Pu,Bu,Lu=_u[2].price.unit&&re$2(_u);return{c(){$u=I$8("div"),Tu=I$8("span"),Pu=at(Cu),Bu=Jt(),Lu&&Lu.c(),Et(Tu,"class","value svelte-8mby9k"),Et($u,"class","price svelte-8mby9k")},m(Ru,Ou){vt(Ru,$u,Ou),ut($u,Tu),ut(Tu,Pu),ut($u,Bu),Lu&&Lu.m($u,null)},p(Ru,Ou){Ou&4&&Cu!==(Cu=Ru[2].price.value+"")&&Xt(Pu,Cu),Ru[2].price.unit?Lu?Lu.p(Ru,Ou):(Lu=re$2(Ru),Lu.c(),Lu.m($u,null)):Lu&&(Lu.d(1),Lu=null)},d(Ru){Ru&&H$4($u),Lu&&Lu.d()}}}function re$2(_u){let $u,Tu=_u[2].price.unit+"",Cu;return{c(){$u=I$8("span"),Cu=at(Tu),Et($u,"class","unit svelte-8mby9k")},m(Pu,Bu){vt(Pu,$u,Bu),ut($u,Cu)},p(Pu,Bu){Bu&4&&Tu!==(Tu=Pu[2].price.unit+"")&&Xt(Cu,Tu)},d(Pu){Pu&&H$4($u)}}}function oe(_u){let $u,Tu=_u[2].highlightText+"",Cu;return{c(){$u=I$8("div"),Cu=at(Tu),Et($u,"class","goto-button goto-icon svelte-8mby9k")},m(Pu,Bu){vt(Pu,$u,Bu),ut($u,Cu)},p(Pu,Bu){Bu&4&&Tu!==(Tu=Pu[2].highlightText+"")&&Xt(Cu,Tu)},d(Pu){Pu&&H$4($u)}}}function _e(_u){var $u,Tu;let Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu=_u[2].title+"",zu,Wu,Qu,Ku,Yu;Pu=new P$7({props:{visible:_u[1],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let Xc=_u[2].brandTags||[],_d=[];for(let _c=0;_c<Xc.length;_c+=1)_d[_c]=te(x$2(_u,Xc,_c));let _f=_u[2].tags||[],qu=[];for(let _c=0;_c<_f.length;_c+=1)qu[_c]=ie$1($$2(_u,_f,_c));let Xu=(($u=_u[2].price)==null?void 0:$u.value)!==void 0&&((Tu=_u[2].price)==null?void 0:Tu.value)!==null&&ne$1(_u),Zu=_u[2].highlightText&&oe(_u);return{c(){var _c,Ju;Cu=I$8("div"),$e(Pu.$$.fragment),Bu=Jt(),Lu=I$8("div"),Ru=Jt(),Ou=I$8("div"),Du=I$8("img"),Vu=Jt(),ku=I$8("div");for(let _h=0;_h<_d.length;_h+=1)_d[_h].c();Nu=Jt();for(let _h=0;_h<qu.length;_h+=1)qu[_h].c();Gu=Jt(),ju=I$8("div"),Hu=I$8("div"),zu=at(Uu),Wu=Jt(),Qu=I$8("div"),Xu&&Xu.c(),Ku=Jt(),Zu&&Zu.c(),Et(Lu,"class","line svelte-8mby9k"),Yt(Lu,"transition-delay",_u[1]?L$3+"ms":V$2+se-ae$3-40+"ms"),Et(Du,"class","headerImage svelte-8mby9k"),Lt(Du.src,Fu=_u[2].headerPictureUrl)||Et(Du,"src",Fu),Et(Du,"alt",""),Et(ku,"class","tag svelte-8mby9k"),Et(Hu,"class","text svelte-8mby9k"),Et(ju,"class","title svelte-8mby9k"),Et(Qu,"class","footer svelte-8mby9k"),Yt(Qu,"height",((_c=_u[2].price)==null?void 0:_c.value)!==void 0&&((Ju=_u[2].price)==null?void 0:Ju.value)!==null&&_u[2].highlightText?void 0:"1rem"),Et(Ou,"class","content svelte-8mby9k"),Yt(Ou,"transition-delay",_u[1]?L$3+V$2+"ms":"0ms"),Et(Cu,"class","marketing svelte-8mby9k"),te$4(Cu,"unfolded",_u[1]),te$4(Cu,"folded",_u[3])},m(_c,Ju){vt(_c,Cu,Ju),zt(Pu,Cu,null),ut(Cu,Bu),ut(Cu,Lu),ut(Cu,Ru),ut(Cu,Ou),ut(Ou,Du),ut(Ou,Vu),ut(Ou,ku);for(let _h=0;_h<_d.length;_h+=1)_d[_h].m(ku,null);ut(ku,Nu);for(let _h=0;_h<qu.length;_h+=1)qu[_h].m(ku,null);ut(Ou,Gu),ut(Ou,ju),ut(ju,Hu),ut(Hu,zu),ut(Ou,Wu),ut(Ou,Qu),Xu&&Xu.m(Qu,null),ut(Qu,Ku),Zu&&Zu.m(Qu,null),Yu=!0},p(_c,[Ju]){var _h,ep,tp,rp;const dp={};if(Ju&2&&(dp.visible=_c[1]),Pu.$set(dp),Ju&2&&Yt(Lu,"transition-delay",_c[1]?L$3+"ms":V$2+se-ae$3-40+"ms"),(!Yu||Ju&4&&!Lt(Du.src,Fu=_c[2].headerPictureUrl))&&Et(Du,"src",Fu),Ju&4){Xc=_c[2].brandTags||[];let cp;for(cp=0;cp<Xc.length;cp+=1){const Sp=x$2(_c,Xc,cp);_d[cp]?_d[cp].p(Sp,Ju):(_d[cp]=te(Sp),_d[cp].c(),_d[cp].m(ku,Nu))}for(;cp<_d.length;cp+=1)_d[cp].d(1);_d.length=Xc.length}if(Ju&4){_f=_c[2].tags||[];let cp;for(cp=0;cp<_f.length;cp+=1){const Sp=$$2(_c,_f,cp);qu[cp]?qu[cp].p(Sp,Ju):(qu[cp]=ie$1(Sp),qu[cp].c(),qu[cp].m(ku,null))}for(;cp<qu.length;cp+=1)qu[cp].d(1);qu.length=_f.length}(!Yu||Ju&4)&&Uu!==(Uu=_c[2].title+"")&&Xt(zu,Uu),((_h=_c[2].price)==null?void 0:_h.value)!==void 0&&((ep=_c[2].price)==null?void 0:ep.value)!==null?Xu?Xu.p(_c,Ju):(Xu=ne$1(_c),Xu.c(),Xu.m(Qu,Ku)):Xu&&(Xu.d(1),Xu=null),_c[2].highlightText?Zu?Zu.p(_c,Ju):(Zu=oe(_c),Zu.c(),Zu.m(Qu,null)):Zu&&(Zu.d(1),Zu=null),Ju&4&&Yt(Qu,"height",((tp=_c[2].price)==null?void 0:tp.value)!==void 0&&((rp=_c[2].price)==null?void 0:rp.value)!==null&&_c[2].highlightText?void 0:"1rem"),Ju&2&&Yt(Ou,"transition-delay",_c[1]?L$3+V$2+"ms":"0ms"),(!Yu||Ju&2)&&te$4(Cu,"unfolded",_c[1]),(!Yu||Ju&8)&&te$4(Cu,"folded",_c[3])},i(_c){Yu||(gt(Pu.$$.fragment,_c),Yu=!0)},o(_c){jt(Pu.$$.fragment,_c),Yu=!1},d(_c){_c&&H$4(Cu),Ot(Pu),Gt(_d,_c),Gt(qu,_c),Xu&&Xu.d(),Zu&&Zu.d()}}}const L$3=400,ae$3=500,V$2=180,se=500;function we$1(_u,$u,Tu){let Cu,Pu,Bu,{tag:Lu}=$u;return _u.$$set=Ru=>{"tag"in Ru&&Tu(0,Lu=Ru.tag)},_u.$$.update=()=>{var Ru,Ou;_u.$$.dirty&1&&Tu(1,Cu=(Ou=(Ru=Lu.state)==null?void 0:Ru.unfolded)!=null?Ou:!1),_u.$$.dirty&2&&Tu(3,Pu=!Cu),_u.$$.dirty&1&&Tu(2,Bu=Lu.data)},[Lu,Cu,Bu,Pu]}class Te extends be$1{constructor($u){super(),xe(this,$u,we$1,_e,Dt,{tag:0},ye)}}var N$1=Object.defineProperty,E$5=Object.getOwnPropertySymbols,O$2=Object.prototype.hasOwnProperty,P$2=Object.prototype.propertyIsEnumerable,F$3=(_u,$u,Tu)=>$u in _u?N$1(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,p$2=(_u,$u)=>{for(var Tu in $u||($u={}))O$2.call($u,Tu)&&F$3(_u,Tu,$u[Tu]);if(E$5)for(var Tu of E$5($u))P$2.call($u,Tu)&&F$3(_u,Tu,$u[Tu]);return _u};function ie(_u){Ut(_u,"svelte-1ku3wt4",`.audio.svelte-1ku3wt4.svelte-1ku3wt4{position:relative;width:100%;height:100%;cursor:pointer}@keyframes svelte-1ku3wt4-playing{25%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='9' cy='9' r='8' transform='translate(-1 -1)' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}50%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.533 6.685L4.169 8.049l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}75%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.656 4.874l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .875-.333 1.67-.88 2.268l.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}}.paused.svelte-1ku3wt4 .audio-icon.svelte-1ku3wt4{animation:none}.audio-icon.svelte-1ku3wt4.svelte-1ku3wt4{width:100%;height:100%;border-radius:50%;background-size:100%;animation:svelte-1ku3wt4-playing 2s steps(1) infinite;background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm1.428 2.79l-.953.952a6.222 6.222 0 0 1 1.775 4.36c0 1.571-.58 3.006-1.538 4.103l-.184.202.793.794a7.344 7.344 0 0 0 2.21-5.26A7.341 7.341 0 0 0 9.428 2.79zM7.344 4.873l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .802-.28 1.537-.748 2.115l-.132.153.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}`)}function L$2(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou=!0,Du,Fu,Vu,ku,Nu;return Tu=new P$7({props:{center:!0,blurRadius:15,spreadRadius:6}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Cu=Jt(),Pu=I$8("div"),Bu=Jt(),Lu=I$8("audio"),Et(Pu,"class","audio-icon svelte-1ku3wt4"),Lu.controls=!1,Et(Lu,"playsinline",""),Lt(Lu.src,Ru=_u[3])||Et(Lu,"src",Ru),Et($u,"class","audio svelte-1ku3wt4"),te$4($u,"paused",_u[6])},m(Gu,ju){vt(Gu,$u,ju),zt(Tu,$u,null),ut($u,Cu),ut($u,Pu),ut($u,Bu),ut($u,Lu),_u[9](Lu),Vu=!0,ku||(Nu=[Z$2(Lu,"play",_u[10]),Z$2(Lu,"pause",_u[10]),Z$2($u,"click",Qt(_u[7]))],ku=!0)},p(Gu,ju){_u=Gu,(!Vu||ju&8&&!Lt(Lu.src,Ru=_u[3]))&&Et(Lu,"src",Ru),ju&64&&Ou!==(Ou=_u[6])&&Lu[Ou?"pause":"play"](),(!Vu||ju&64)&&te$4($u,"paused",_u[6])},i(Gu){Vu||(gt(Tu.$$.fragment,Gu),Gu&&j$3(()=>{Fu&&Fu.end(1),Du=he$1($u,b$3,{duration:_u[2],delay:_u[0],easing:o$5}),Du.start()}),Vu=!0)},o(Gu){jt(Tu.$$.fragment,Gu),Du&&Du.invalidate(),Gu&&(Fu=_e$1($u,b$3,{duration:_u[2],delay:_u[1],easing:o$5})),Vu=!1},d(Gu){Gu&&H$4($u),Ot(Tu),_u[9](null),Gu&&Fu&&Fu.end(),ku=!1,N$3(Nu)}}}function ne(_u){let $u,Tu,Cu=_u[4]&&L$2(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[4]?Cu?(Cu.p(Pu,Bu),Bu&16&&gt(Cu,1)):(Cu=L$2(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function ae$2(_u,$u,Tu){let{inDelay:Cu=0}=$u,{outDelay:Pu=0}=$u,{duration:Bu=0}=$u,{url:Lu}=$u,{unfolded:Ru}=$u,{hooksInfo:Ou={}}=$u;const Du=fe$1("hooks"),Fu=fe$1("mediaStore");let Vu,ku=!0;Fu.subscribe(({currentMediaUrl:Hu})=>{Hu!==Lu&&(Vu==null||Vu.pause())});function Nu(Hu){Fu.set({currentMediaUrl:Lu}),Vu&&(Du.emit("click",p$2({event:Hu,target:"AudioTagPlayIcon",audioInstance:Vu},Ou)),Vu.paused?Vu.play():Vu.pause(),Tu(5,Vu.onplay=Uu=>Du.emit("playStateChange",p$2({event:Uu,state:"playing",mediaInstance:Vu},Ou)),Vu),Tu(5,Vu.onpause=Uu=>Du.emit("playStateChange",p$2({event:Uu,state:"paused",mediaInstance:Vu},Ou)),Vu))}function Gu(Hu){tt[Hu?"unshift":"push"](()=>{Vu=Hu,Tu(5,Vu)})}function ju(){ku=this.paused,Tu(6,ku)}return _u.$$set=Hu=>{"inDelay"in Hu&&Tu(0,Cu=Hu.inDelay),"outDelay"in Hu&&Tu(1,Pu=Hu.outDelay),"duration"in Hu&&Tu(2,Bu=Hu.duration),"url"in Hu&&Tu(3,Lu=Hu.url),"unfolded"in Hu&&Tu(4,Ru=Hu.unfolded),"hooksInfo"in Hu&&Tu(8,Ou=Hu.hooksInfo)},_u.$$.update=()=>{_u.$$.dirty&48&&(Ru||Vu==null||Vu.pause())},[Cu,Pu,Bu,Lu,Ru,Vu,ku,Nu,Ou,Gu,ju]}class de$1 extends be$1{constructor($u){super(),xe(this,$u,ae$2,ne,Dt,{inDelay:0,outDelay:1,duration:2,url:3,unfolded:4,hooksInfo:8},ie)}}function re$1(_u){Ut(_u,"svelte-4r8s18",".audio-tag.svelte-4r8s18.svelte-4r8s18{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.line.svelte-4r8s18.svelte-4r8s18{display:flex;position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-4r8s18.svelte-4r8s18{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-4r8s18.svelte-4r8s18{position:relative;width:100%;height:100%}.audio-icon.svelte-4r8s18.svelte-4r8s18{vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.unfolded.svelte-4r8s18 .audio-icon.svelte-4r8s18{pointer-events:auto}")}function H$1(_u){var $u,Tu,Cu,Pu;let Bu,Lu,Ru,Ou,Du,Fu,Vu,ku,Nu,Gu,ju,Hu,Uu,zu,Wu,Qu,Ku;return Lu=new P$7({props:{visible:_u[5],left:_u[2]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Du=new M$5({props:{unfolded:_u[5],duration:1e3,outDelay:_u[4]+20*Math.min((Tu=($u=_u[3][0])==null?void 0:$u.content.length)!=null?Tu:10,15)}}),Gu=new de$1({props:{unfolded:_u[5],url:_u[0].data.audioUrl,duration:1e3,outDelay:20*Math.min((Pu=(Cu=_u[3][0])==null?void 0:Cu.content.length)!=null?Pu:10,15),hooksInfo:{tag:_u[0]}}}),Uu=new W$1({props:{visible:_u[5],textUnfolded:_u[1],textItems:_u[3]}}),{c(){Bu=I$8("div"),$e(Lu.$$.fragment),Ru=Jt(),Ou=I$8("div"),$e(Du.$$.fragment),Fu=Jt(),Vu=I$8("div"),ku=I$8("div"),Nu=I$8("div"),$e(Gu.$$.fragment),ju=Jt(),Hu=I$8("div"),$e(Uu.$$.fragment),Et(Ou,"class","line svelte-4r8s18"),Yt(Ou,"width",_u[2]+"px"),Et(Nu,"class","audio-icon svelte-4r8s18"),Yt(Hu,"display","inline-block"),Et(ku,"class","wrapper svelte-4r8s18"),Et(Vu,"class","content svelte-4r8s18"),j$3(()=>_u[8].call(Vu)),Et(Bu,"class","audio-tag svelte-4r8s18"),te$4(Bu,"unfolded",_u[5])},m(Yu,Xc){vt(Yu,Bu,Xc),zt(Lu,Bu,null),ut(Bu,Ru),ut(Bu,Ou),zt(Du,Ou,null),ut(Bu,Fu),ut(Bu,Vu),ut(Vu,ku),ut(ku,Nu),zt(Gu,Nu,null),ut(ku,ju),ut(ku,Hu),zt(Uu,Hu,null),zu=Zt(Vu,_u[8].bind(Vu)),Wu=!0,Qu||(Ku=Z$2(Hu,"click",_u[6]),Qu=!0)},p(Yu,Xc){var _d,_f,qu,Xu;const Zu={};Xc&32&&(Zu.visible=Yu[5]),Xc&4&&(Zu.left=Yu[2]/2+"px"),Lu.$set(Zu);const _c={};Xc&32&&(_c.unfolded=Yu[5]),Xc&24&&(_c.outDelay=Yu[4]+20*Math.min((_f=(_d=Yu[3][0])==null?void 0:_d.content.length)!=null?_f:10,15)),Du.$set(_c),Xc&4&&Yt(Ou,"width",Yu[2]+"px");const Ju={};Xc&32&&(Ju.unfolded=Yu[5]),Xc&1&&(Ju.url=Yu[0].data.audioUrl),Xc&8&&(Ju.outDelay=20*Math.min((Xu=(qu=Yu[3][0])==null?void 0:qu.content.length)!=null?Xu:10,15)),Xc&1&&(Ju.hooksInfo={tag:Yu[0]}),Gu.$set(Ju);const _h={};Xc&32&&(_h.visible=Yu[5]),Xc&2&&(_h.textUnfolded=Yu[1]),Xc&8&&(_h.textItems=Yu[3]),Uu.$set(_h),(!Wu||Xc&32)&&te$4(Bu,"unfolded",Yu[5])},i(Yu){Wu||(gt(Lu.$$.fragment,Yu),gt(Du.$$.fragment,Yu),gt(Gu.$$.fragment,Yu),gt(Uu.$$.fragment,Yu),Wu=!0)},o(Yu){jt(Lu.$$.fragment,Yu),jt(Du.$$.fragment,Yu),jt(Gu.$$.fragment,Yu),jt(Uu.$$.fragment,Yu),Wu=!1},d(Yu){Yu&&H$4(Bu),Ot(Lu),Ot(Du),Ot(Gu),Ot(Uu),zu(),Qu=!1,Ku()}}}function ae$1(_u){let $u,Tu,Cu=_u[0].state&&H$1(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[0].state?Cu?(Cu.p(Pu,Bu),Bu&1&&gt(Cu,1)):(Cu=H$1(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function de(_u,$u,Tu){let Cu,Pu,Bu,{tag:Lu}=$u,Ru=!1,Ou,Du=[];function Fu(){Tu(1,Ru=!Ru)}function Vu(){Ou=this.clientWidth,Tu(2,Ou)}return _u.$$set=ku=>{"tag"in ku&&Tu(0,Lu=ku.tag)},_u.$$.update=()=>{var ku;_u.$$.dirty&1&&Tu(5,Cu=!!((ku=Lu.state)!=null&&ku.unfolded)),_u.$$.dirty&1&&Tu(7,Pu=Lu.data.text),_u.$$.dirty&128&&Tu(3,Du=[{id:r$7(),content:Pu}]),_u.$$.dirty&2&&Tu(4,Bu=Ru?450:0)},[Lu,Ru,Ou,Du,Bu,Cu,Fu,Pu,Vu]}class we extends be$1{constructor($u){super(),xe(this,$u,de,ae$1,Dt,{tag:0},re$1)}}function P$1(_u){Ut(_u,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function c$1(_u){let $u,Tu,Cu;return Tu=new Oe({props:{unfolded:_u[5],mediaData:_u[4],objectFit:_u[2],enableCarousel:_u[1],autoplayConfig:_u[3],tag:_u[0],canPlay:!0,playButtonIfNeed:"large",inDelay:500,duration:500}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Et($u,"class","media-wrapper svelte-10cw0el")},m(Pu,Bu){vt(Pu,$u,Bu),zt(Tu,$u,null),Cu=!0},p(Pu,Bu){const Lu={};Bu&32&&(Lu.unfolded=Pu[5]),Bu&16&&(Lu.mediaData=Pu[4]),Bu&4&&(Lu.objectFit=Pu[2]),Bu&2&&(Lu.enableCarousel=Pu[1]),Bu&8&&(Lu.autoplayConfig=Pu[3]),Bu&1&&(Lu.tag=Pu[0]),Tu.$set(Lu)},i(Pu){Cu||(gt(Tu.$$.fragment,Pu),Cu=!0)},o(Pu){jt(Tu.$$.fragment,Pu),Cu=!1},d(Pu){Pu&&H$4($u),Ot(Tu)}}}function q$2(_u){let $u,Tu,Cu=_u[0].state&&_u[4]&&c$1(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[0].state&&Pu[4]?Cu?(Cu.p(Pu,Bu),Bu&17&&gt(Cu,1)):(Cu=c$1(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function B$1(_u,$u,Tu){let Cu,Pu,Bu,Lu,Ru,{tag:Ou}=$u;return _u.$$set=Du=>{"tag"in Du&&Tu(0,Ou=Du.tag)},_u.$$.update=()=>{var Du,Fu;_u.$$.dirty&1&&Tu(5,Cu=Ou.state?Ou.state.unfolded:!1),_u.$$.dirty&1&&Tu(4,Pu=Ou.data.mediaData),_u.$$.dirty&1&&Tu(1,Bu=Ou.data.enableCarousel),_u.$$.dirty&3&&Tu(3,Lu=(Du=Ou.data.autoplayConfig)!=null?Du:{autoplay:Bu!=null?Bu:!0,autoplayVideo:!0}),_u.$$.dirty&1&&Tu(2,Ru=(Fu=Ou.data.objectFit)!=null?Fu:(()=>Ou.data.adaptationMode==="stretch"?"cover":Ou.data.adaptationMode==="proportional"?"contain":void 0)())},[Ou,Bu,Ru,Lu,Pu,Cu]}class V$1 extends be$1{constructor($u){super(),xe(this,$u,B$1,q$2,Dt,{tag:0},P$1)}}function O$1(_u){Ut(_u,"svelte-7x7u86",".wrapper.svelte-7x7u86{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-7x7u86{position:relative;display:flex;align-items:center;justify-content:center}.icon.svelte-7x7u86{position:relative;margin-bottom:0.6875rem}.arrow0.svelte-7x7u86,.arrow1.svelte-7x7u86,.arrow2.svelte-7x7u86{position:absolute;width:1.625rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAAAkCAYAAAAnxQwhAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATqADAAQAAAABAAAAJAAAAABrx2urAAAGm0lEQVRoBd2ZXbCVUxjH26QSfSCS0JwoFNEZ0cc45iSmUUaqC+KCwUUXxYUZw4yrLhozLlDDRWa6oW5yOFTT0IcyKn1JnIjDKelLPipJcXT8fttaZ95qd+yzv+uZ+e211rvfd61n/ddaz1rv3qkOFWgtLS3n4Vb34NqhVCr1d6W5mao0hxBNwfrCOcG346S7Ee9gKFdEUjHCIZi+XA69E8p4rQVM98EeBLRcdqsI4RCtI0r0h4uCIvo1BZx1b4GzTjsA3yFec7pUxo+yC4doXen/IDg/6GB5GlSH8mbSWXA4lI+SNiDekVAuS1JW4RCtF72+EWI8c6k+A6ZJc5m+BHvCxX9ItyLe/lAueVIW4UI8u4beDkj02FnnTOuUuJbM/kVhNjQkLjaSbyxH3Cu5cIjmUWMoOKti+2PIT4JsrI6blkKMe87GTYhX0iNLdDwbh/O+B9G6UclIMNWcXQ/CrRbaYRu5dz44C7XfYTXimZbESiYconk2GwGdwSOF4j0JV0AuZrybA4plfYq4BvF2kRbdSiIcog2hJ+6StmcnFesJ6AL52DEefgOiWNa/EfG25FNpNs8WVbgQz+7EEc9o0RRxYiwUKDXuJcVqovxRMeNe0YRDtB44Pw4uAc0jx2gYZqEItoE63TSc0fILLEa8oryqFUU4ROuH04oWl6I76WQwzhXTXLILIO6wLuVFiLedtKBWcOEQ7XY8rE146ZvAwxDfDBJfFSX7J7XOgz8Sta9AvE8T5byzBRMuxLP78Mg3Ac3l0gcmWCiD1dPmboh9/JL8+4WKe7HSvPqFaL6cTwGF0jyc3gTOvnLaehr/HOIrnUeYeYj3W75O5S0covnq9AhcEJxpJr0Lrgrlcic7cWAZ+AuM5o8DbyJeY7qU40dewiFaDe26FOOIKppl41olmWK9C1E8V0Q94q3M1cmchAvx7CEaHZ5oWKfGJ8qVmF2EU75hxH67YcxHQK+1y2IFWT+EaBdz81SoCg+59fvCXuh4tjnUf0tIC5WsoyJjnUckbTu8hni/WsjW2iUcog2k4unQPTTglm/HPLcVwpqoZCu4lOLxxeOFocCfneJgkc3LfuDpzyDG5UPkZyHetmxrzVo4RLubSh+FGM8OkHcTuBDyMUfaTihQHJBYn0cafTTVfKFX0KHgzM/HDvPwcugZKnGw5iLeh6HcZvK/woV45gu5wkVTtLGxkEN6jGc2gaJ5lDkXtCjUXvIrQf9qoDckzU56pFC8augMudoSHoziWcdSmIOA8e3Da6dYm8Ihmu+Zz8H14ckYWHONZ19Qz4+go53A9qNYLvtPYBlON5C2Gn4MpuDsHgVxecXvHQQH8krw7JiLuUnohz5pX8NM/PB9N6OdVjicNaa8AHFJROeqMtZ0+ovGk2/AI0o3iGKRTcey9aSO8locbXN3wyc75k4+BoaBYSNZ3yHKHj2ug6uhPdbEzQ6qK0ARXQ0z8MmYe4plFA4Hx3Hn0xB3Hiv0V9qTYxCXMpoie2LX+vyXnPDpiH4Ay3HMe9tt+NiTh0bDPRBXRLIed07tZvDebEzhN4CzV3O5voyPi9KlxMcJwuGMQj0FE8M9Ku9I1MIJ94bvk4mNGORdcr41GLd8xjpM94HxZAmO7CAtmOF3Pyoz5srJ8bCZaw68M95NJU4GshlNf1dAf4i+15F/Bb9b416rGDRuPHsRHCHN2PEz3GahDXMq/wR9wfgTGyObFnE56ULwDxW/K5rRB/tTDa4YY2Imf3Zx/TIwFLVl6/iyF8SNxxX0LH1Ix720cDRoTJgNcbT2hwdUPZPZeCNYsc9EQazPEV4NTm9/zjlKWnKjT11otBYUcRS4AuKgmjrYToxrwUHPZN9z0Ql0afhyL+k0+rQtRQOu/3qIAhjIB0IPSJrrvwEcARvTko44896DhXFUvKESjD66msbD/eBMSw60eQVygAfDyXH8INe2gZPLiaF4ExTucTLPg2aMGg7uVpqzZwu4tm8Ad7UoFtn0q4ti1SHWt16odKO/A/DxAZgAcYVFt+3nV2AcHAIdQTsOa6Ea7P9MhZtB5jHQmsDltwMM8qrszFPpaEfILIYF4H+ZVnrGGf12coyEyXAvdIU4KUydaa4+r/cDl3UVaHMVzun7erp4+g/FWQWK5a6oeGeNoYHijAVFrIG44shmtKkK52x6FSZluMW4pVjvIJbHibPe0MPl61JWxEEZOvw216a3LkEeGMGFO0D1d8KqMyVu4WtRDE2Mh85Az6Wuso/RZA1ph38BBMvNbHuq7kAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:contain;animation-fill-mode:backwards;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-duration:1.2s}.arrow1.svelte-7x7u86{position:relative}.arrow0.svelte-7x7u86{top:-0.75rem;animation-name:svelte-7x7u86-up0}.arrow1.svelte-7x7u86{animation-name:svelte-7x7u86-up1}.arrow2.svelte-7x7u86{top:0.75rem;animation-name:svelte-7x7u86-up2}.text.svelte-7x7u86{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;word-break:break-all;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}@keyframes svelte-7x7u86-up0{0%{opacity:0.8;transform:translate3d(0, 0, 0) scale(0.84)}33.33%,100%{opacity:0;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up1{0%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}33.33%,100%{opacity:0.8;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up2{0%{opacity:0}33.33%,100%{opacity:1;transform:translate3d(0, -0.75rem, 0)}}.link.svelte-7x7u86{position:relative;width:1.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAkCAMAAAAgl+0yAAAAnFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+TINBkAAAAM3RSTlMAjLy6ILM2Fi+Zng3BrPvao4VC9ceneQfKkmNdV1AbEeLOsHA77ujUtn5JLnRraSUUjVLj/+RVAAABhElEQVRIx63V2W6CQBiGYUBUQGDYdwTZQZZa7v/eimik/ket/7yZ4yeTTCYf8+dOX8etxGVoxAvCVbguR3g0uRTMA0w4odGi+CbzFnGKosCqrmHc5rdEwzCwqtGFJlC7DqtOcTxANY67BHnVKOpVoEZRjFPdLgxbqIZhhFTjINChGgThF06NhpGd35OGMcCppyDPfajm+YhUR8cRoeo4+RGlJnnbalBt2x6nHh1dt4Gq6bqDU886y2ZQZVn9jFJ51vcbqPo+Up18UeSgKoo3nHqVJEkGqi1JPk49aLZmQdW2xXf1zP+vUFHsC1QVReK33xdk+w9SaqAq+732UvvdZ2UEqrud8lR5Wc4a7pO8GaoL9VBjy7rMlMosq1lV43LhZlrtF+yuJlbtEXpqXXP3NYwI8VJqakOIziw5aepV1FQuTdfhvlWVZdJCrao6MPe0spRpqV5ZFivqNqYpq3RQ2TST5/h4quoRCmwqq6rymol6plV53IZSomTKE/MroWfxDevL/wAEdPq1eGDh4AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-size:contain;animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:1.2s;animation-name:svelte-7x7u86-left-right}@keyframes svelte-7x7u86-left-right{0%,100%{opacity:0.8;transform:translateX(-0.3125rem)}50%{opacity:1;transform:translateX(0)}}")}function N(_u){let $u,Tu,Cu,Pu;return $u=new P$7({props:{visible:!0,outDelay:0,inDelay:0,width:1.4,left:13,bottom:"auto",blurRadius:50,spreadRadius:18}}),{c(){$e($u.$$.fragment),Tu=Jt(),Cu=I$8("div"),Et(Cu,"class","link svelte-7x7u86")},m(Bu,Lu){zt($u,Bu,Lu),vt(Bu,Tu,Lu),vt(Bu,Cu,Lu),Pu=!0},i(Bu){Pu||(gt($u.$$.fragment,Bu),Pu=!0)},o(Bu){jt($u.$$.fragment,Bu),Pu=!1},d(Bu){Ot($u,Bu),Bu&&H$4(Tu),Bu&&H$4(Cu)}}}function S$1(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou;return $u=new P$7({props:{visible:!0,outDelay:0,inDelay:0,height:1.2,left:13,bottom:12,blurRadius:50,spreadRadius:18}}),{c(){$e($u.$$.fragment),Tu=Jt(),Cu=I$8("div"),Pu=Jt(),Bu=I$8("div"),Lu=Jt(),Ru=I$8("div"),Et(Cu,"class","arrow0 svelte-7x7u86"),Et(Bu,"class","arrow1 svelte-7x7u86"),Et(Ru,"class","arrow2 svelte-7x7u86")},m(Du,Fu){zt($u,Du,Fu),vt(Du,Tu,Fu),vt(Du,Cu,Fu),vt(Du,Pu,Fu),vt(Du,Bu,Fu),vt(Du,Lu,Fu),vt(Du,Ru,Fu),Ou=!0},i(Du){Ou||(gt($u.$$.fragment,Du),Ou=!0)},o(Du){jt($u.$$.fragment,Du),Ou=!1},d(Du){Ot($u,Du),Du&&H$4(Tu),Du&&H$4(Cu),Du&&H$4(Pu),Du&&H$4(Bu),Du&&H$4(Lu),Du&&H$4(Ru)}}}function J$1(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du,Fu=_u[0].text+"",Vu,ku;const Nu=[S$1,N],Gu=[];function ju(Hu,Uu){return Hu[0].linkType===u$2.VrLink?0:Hu[0].linkType===u$2.NormalLink?1:-1}return~(Cu=ju(_u))&&(Pu=Gu[Cu]=Nu[Cu](_u)),Ru=new P$7({props:{visible:!0,outDelay:0,inDelay:0,left:"auto",bottom:"auto",width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){$u=I$8("div"),Tu=I$8("div"),Pu&&Pu.c(),Bu=Jt(),Lu=I$8("div"),$e(Ru.$$.fragment),Ou=Jt(),Du=I$8("div"),Vu=at(Fu),Et(Tu,"class","icon svelte-7x7u86"),Et(Du,"class","text svelte-7x7u86"),Et(Lu,"class","text-wrapper svelte-7x7u86"),Et($u,"class","wrapper svelte-7x7u86")},m(Hu,Uu){vt(Hu,$u,Uu),ut($u,Tu),~Cu&&Gu[Cu].m(Tu,null),ut($u,Bu),ut($u,Lu),zt(Ru,Lu,null),ut(Lu,Ou),ut(Lu,Du),ut(Du,Vu),ku=!0},p(Hu,[Uu]){let zu=Cu;Cu=ju(Hu),Cu!==zu&&(Pu&&(ae$5(),jt(Gu[zu],1,1,()=>{Gu[zu]=null}),de$2()),~Cu?(Pu=Gu[Cu],Pu||(Pu=Gu[Cu]=Nu[Cu](Hu),Pu.c()),gt(Pu,1),Pu.m(Tu,null)):Pu=null),(!ku||Uu&1)&&Fu!==(Fu=Hu[0].text+"")&&Xt(Vu,Fu)},i(Hu){ku||(gt(Pu),gt(Ru.$$.fragment,Hu),ku=!0)},o(Hu){jt(Pu),jt(Ru.$$.fragment,Hu),ku=!1},d(Hu){Hu&&H$4($u),~Cu&&Gu[Cu].d(),Ot(Ru)}}}function K$1(_u,$u,Tu){let Cu,{tag:Pu}=$u;return _u.$$set=Bu=>{"tag"in Bu&&Tu(1,Pu=Bu.tag)},_u.$$.update=()=>{_u.$$.dirty&2&&Tu(0,Cu=Pu.data)},[Cu,Pu]}class z$1 extends be$1{constructor($u){super(),xe(this,$u,K$1,J$1,Dt,{tag:1},O$1)}}function j$2(_u){Ut(_u,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function m(_u){let $u,Tu=_u[0].element+"",Cu;return{c(){$u=new ee$3(!1),Cu=Kt(),$u.a=Cu},m(Pu,Bu){$u.m(Tu,Pu,Bu),vt(Pu,Cu,Bu)},p(Pu,Bu){Bu&1&&Tu!==(Tu=Pu[0].element+"")&&$u.p(Tu)},d(Pu){Pu&&H$4(Cu),Pu&&$u.d()}}}function z(_u){let $u,Tu=typeof _u[0].element=="string"&&m(_u);return{c(){$u=I$8("div"),Tu&&Tu.c(),Et($u,"class","customElement__container svelte-kzl2aj")},m(Cu,Pu){vt(Cu,$u,Pu),Tu&&Tu.m($u,null),_u[2]($u)},p(Cu,[Pu]){typeof Cu[0].element=="string"?Tu?Tu.p(Cu,Pu):(Tu=m(Cu),Tu.c(),Tu.m($u,null)):Tu&&(Tu.d(1),Tu=null)},i:E$a,o:E$a,d(Cu){Cu&&H$4($u),Tu&&Tu.d(),_u[2](null)}}}function E$4(_u,$u,Tu){let{tag:Cu}=$u,Pu,Bu;ie$3(()=>{if(Pu){if(Cu.element instanceof Element){const Ru=Cu.element;Pu.appendChild(Ru),Bu=()=>Pu==null?void 0:Pu.removeChild(Ru)}else if(typeof Cu.element=="function"){const Ru=Cu.element;Bu=Ru(Pu)}}}),se$3(()=>{Bu==null||Bu()});function Lu(Ru){tt[Ru?"unshift":"push"](()=>{Pu=Ru,Tu(1,Pu)})}return _u.$$set=Ru=>{"tag"in Ru&&Tu(0,Cu=Ru.tag)},[Cu,Pu,Lu]}class q$1 extends be$1{constructor($u){super(),xe(this,$u,E$4,z,Dt,{tag:0},j$2)}}function R$3(_u){Ut(_u,"svelte-95x526",`@font-face{font-family:'TG-TYPE';font-style:normal;font-weight:400;src:local('TG-TYPE-Bold'),
      url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==)
        format('woff2')}.content__container.svelte-95x526{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.unClickable.svelte-95x526{pointer-events:none !important}.content__container.unClickable.svelte-95x526 *{pointer-events:none !important}*{-webkit-tap-highlight-color:transparent}.content__wrapper.svelte-95x526{pointer-events:none;width:100%;height:100%}.withAnimation.svelte-95x526{transition:opacity 0.3s linear}.content__container.hide.svelte-95x526{opacity:0;pointer-events:none}.content__container.hide.svelte-95x526 *{pointer-events:none !important}.content__container.disable.svelte-95x526{display:none}.content__container.hide.svelte-95x526 *{pointer-events:none}.content.svelte-95x526{position:relative;width:100%;height:100%;font-size:0.75rem;line-height:1.125rem;color:#fff}.content.svelte-95x526:not(.unfolded){pointer-events:none}.content.svelte-95x526:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-95x526{pointer-events:auto}`)}function q(_u){let $u,Tu;return $u=new V$1({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function X$1(_u){let $u,Tu;return $u=new z$1({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function j$1(_u){let $u,Tu;return $u=new Te({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function $$1(_u){let $u,Tu;return $u=new we({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function AA(_u){let $u,Tu;return $u=new te$1({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function eA(_u){let $u,Tu;return $u=new te$3({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function tA(_u){let $u,Tu;return $u=new q$1({props:{tag:e$1(_u[1])}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&2&&(Bu.tag=e$1(Cu[1])),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function nA(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru,Ou,Du;const Fu=[tA,eA,AA,$$1,j$1,X$1,q],Vu=[];function ku(Nu,Gu){return Nu[1].element?0:Nu[1].contentType===i$3.Text?1:Nu[1].contentType===i$3.ImageText?2:Nu[1].contentType===i$3.Audio?3:Nu[1].contentType===i$3.Marketing?4:Nu[1].contentType===i$3.Link?5:Nu[1].contentType===i$3.MediaPlane?6:-1}return~(Pu=ku(_u))&&(Bu=Vu[Pu]=Fu[Pu](_u)),{c(){var Nu,Gu,ju;$u=I$8("div"),Tu=I$8("div"),Cu=I$8("div"),Bu&&Bu.c(),Et(Cu,"class","content svelte-95x526"),te$4(Cu,"unfolded",(Nu=_u[1].state)==null?void 0:Nu.unfolded),Et(Tu,"class","content__wrapper svelte-95x526"),Et($u,"class","content__container svelte-95x526"),Et($u,"data-id",Lu=_u[1].id),te$4($u,"disable",_u[1].enabled===!1||((Gu=_u[1].temporaryState)==null?void 0:Gu.visible)===!1),te$4($u,"hide",!_u[3].visible||!_u[3].enabled||!_u[4].visible||!((ju=_u[1].state)!=null&&ju.visible)),te$4($u,"withAnimation",_u[0]),te$4($u,"unClickable",_u[1].clickable===!1),Yt($u,"width",_u[1].pointType==="PointTag"?0:"100%"),Yt($u,"height",_u[1].pointType==="PointTag"?0:"100%")},m(Nu,Gu){vt(Nu,$u,Gu),ut($u,Tu),ut(Tu,Cu),~Pu&&Vu[Pu].m(Cu,null),Ru=!0,Ou||(Du=Z$2($u,"click",Qt(_u[11])),Ou=!0)},p(Nu,[Gu]){var ju,Hu,Uu;let zu=Pu;Pu=ku(Nu),Pu===zu?~Pu&&Vu[Pu].p(Nu,Gu):(Bu&&(ae$5(),jt(Vu[zu],1,1,()=>{Vu[zu]=null}),de$2()),~Pu?(Bu=Vu[Pu],Bu?Bu.p(Nu,Gu):(Bu=Vu[Pu]=Fu[Pu](Nu),Bu.c()),gt(Bu,1),Bu.m(Cu,null)):Bu=null),(!Ru||Gu&2)&&te$4(Cu,"unfolded",(ju=Nu[1].state)==null?void 0:ju.unfolded),(!Ru||Gu&2&&Lu!==(Lu=Nu[1].id))&&Et($u,"data-id",Lu),(!Ru||Gu&2)&&te$4($u,"disable",Nu[1].enabled===!1||((Hu=Nu[1].temporaryState)==null?void 0:Hu.visible)===!1),(!Ru||Gu&26)&&te$4($u,"hide",!Nu[3].visible||!Nu[3].enabled||!Nu[4].visible||!((Uu=Nu[1].state)!=null&&Uu.visible)),(!Ru||Gu&1)&&te$4($u,"withAnimation",Nu[0]),(!Ru||Gu&2)&&te$4($u,"unClickable",Nu[1].clickable===!1),Gu&2&&Yt($u,"width",Nu[1].pointType==="PointTag"?0:"100%"),Gu&2&&Yt($u,"height",Nu[1].pointType==="PointTag"?0:"100%")},i(Nu){Ru||(gt(Bu),Ru=!0)},o(Nu){jt(Bu),Ru=!1},d(Nu){Nu&&H$4($u),~Pu&&Vu[Pu].d(),Ou=!1,Du()}}}function iA(_u,$u,Tu){let Cu,Pu,Bu,Lu,{withAnimation:Ru=!1}=$u,{tag:Ou}=$u,{hooks:Du}=$u,{state:Fu}=$u,{mediaStore:Vu}=$u,{temporaryState:ku}=$u;ce("hooks",Du),ce("mediaStore",Vu);let Nu,Gu;function ju(Uu){Uu?Du.emit("exposure",{id:Lu,type:"start"}):Du.emit("exposure",{id:Lu,type:"end"})}const Hu=Uu=>Du.emit("click",{event:Uu,target:"TagContent",tag:Ou});return _u.$$set=Uu=>{"withAnimation"in Uu&&Tu(0,Ru=Uu.withAnimation),"tag"in Uu&&Tu(1,Ou=Uu.tag),"hooks"in Uu&&Tu(2,Du=Uu.hooks),"state"in Uu&&Tu(3,Fu=Uu.state),"mediaStore"in Uu&&Tu(5,Vu=Uu.mediaStore),"temporaryState"in Uu&&Tu(4,ku=Uu.temporaryState)},_u.$$.update=()=>{var Uu,zu;_u.$$.dirty&2&&Tu(9,Cu=(Uu=Ou.state)==null?void 0:Uu.unfolded),_u.$$.dirty&2&&Tu(8,Pu=(zu=Ou.state)==null?void 0:zu.visible),_u.$$.dirty&280&&Tu(10,Bu=Fu.visible&&ku.visible&&Pu),_u.$$.dirty&2&&(Lu=Ou.id),_u.$$.dirty&1024&&ju(Bu),_u.$$.dirty&962&&Ou.hooks&&(Cu!==void 0&&Cu!==Gu&&(Tu(7,Gu=Cu),Cu?Ou.hooks.emit("unfolded"):Ou.hooks.emit("folded")),Pu!==void 0&&Pu!==Nu&&(Tu(6,Nu=Pu),Pu?Ou.hooks.emit("show"):Ou.hooks.emit("hide")))},[Ru,Ou,Du,Fu,ku,Vu,Nu,Gu,Pu,Cu,Bu,Hu]}class dA extends be$1{constructor($u){super(),xe(this,$u,iA,nA,Dt,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:5,temporaryState:4},R$3)}}function I$2(_u){Ut(_u,"svelte-fuismw",".point.svelte-fuismw.svelte-fuismw{pointer-events:none;width:1.5rem;height:1.5rem}.small-point.svelte-fuismw.svelte-fuismw,.big-point.svelte-fuismw.svelte-fuismw{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-fuismw.svelte-fuismw{background-color:rgba(0, 0, 0, 0.1)}.folded.point.svelte-fuismw.svelte-fuismw{animation:svelte-fuismw-breathing 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::before,.big-point.svelte-fuismw.svelte-fuismw::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-fuismw.svelte-fuismw::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=)}.folded.svelte-fuismw .big-point.svelte-fuismw::before{animation:svelte-fuismw-rotate 2s linear infinite}.big-point.svelte-fuismw.svelte-fuismw::after{position:absolute;width:1rem;height:1rem;background-image:var(--iconUrl)}.small-point.svelte-fuismw.svelte-fuismw::before{content:'';display:block;position:absolute;pointer-events:none;width:0.25rem;height:0.25rem;border-radius:100%;background-color:white}.folded.svelte-fuismw .big-point.svelte-fuismw{opacity:1;scale:1}.unfolded.svelte-fuismw .big-point.svelte-fuismw{opacity:0;scale:0}.folded.svelte-fuismw .small-point.svelte-fuismw{opacity:0;scale:6}.unfolded.svelte-fuismw .small-point.svelte-fuismw{opacity:1;scale:1}@keyframes svelte-fuismw-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes svelte-fuismw-breathing{0%{transform:scale(1)}25%{transform:scale(0.9)}50%{transform:scale(1)}}")}function E$3(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru;return Tu=new P$7({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Cu=Jt(),Pu=I$8("div"),Bu=Jt(),Lu=I$8("div"),Et(Pu,"class","small-point svelte-fuismw"),Yt(Pu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),Et(Lu,"class","big-point svelte-fuismw"),Yt(Lu,"--iconUrl","url("+_u[1]+")"),Yt(Lu,"transition-delay",_u[3]?_u[2]+"ms":"0ms"),Et($u,"class","point svelte-fuismw"),te$4($u,"folded",_u[3]),te$4($u,"unfolded",_u[0])},m(Ou,Du){vt(Ou,$u,Du),zt(Tu,$u,null),ut($u,Cu),ut($u,Pu),ut($u,Bu),ut($u,Lu),Ru=!0},p(Ou,[Du]){Du&12&&Yt(Pu,"transition-delay",Ou[3]?Ou[2]+"ms":"0ms"),(!Ru||Du&2)&&Yt(Lu,"--iconUrl","url("+Ou[1]+")"),Du&12&&Yt(Lu,"transition-delay",Ou[3]?Ou[2]+"ms":"0ms"),(!Ru||Du&8)&&te$4($u,"folded",Ou[3]),(!Ru||Du&1)&&te$4($u,"unfolded",Ou[0])},i(Ou){Ru||(gt(Tu.$$.fragment,Ou),Ru=!0)},o(Ou){jt(Tu.$$.fragment,Ou),Ru=!1},d(Ou){Ou&&H$4($u),Ot(Tu)}}}function F$2(_u,$u,Tu){let Cu,{unfolded:Pu}=$u,{iconUrl:Bu}=$u,{foldDelay:Lu=800}=$u;return _u.$$set=Ru=>{"unfolded"in Ru&&Tu(0,Pu=Ru.unfolded),"iconUrl"in Ru&&Tu(1,Bu=Ru.iconUrl),"foldDelay"in Ru&&Tu(2,Lu=Ru.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Tu(3,Cu=!Pu)},[Pu,Bu,Lu,Cu]}class X extends be$1{constructor($u){super(),xe(this,$u,F$2,E$3,Dt,{unfolded:0,iconUrl:1,foldDelay:2},I$2)}}function I$1(_u){Ut(_u,"svelte-jzvcn0",".point.svelte-jzvcn0.svelte-jzvcn0{pointer-events:none;width:1rem;height:1rem}.small-point.svelte-jzvcn0.svelte-jzvcn0,.big-point.svelte-jzvcn0.svelte-jzvcn0{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-jzvcn0.svelte-jzvcn0::before,.big-point.svelte-jzvcn0.svelte-jzvcn0::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-jzvcn0.svelte-jzvcn0::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat}.small-point.svelte-jzvcn0.svelte-jzvcn0::before{content:'';display:block;position:absolute;pointer-events:none;width:0.375rem;height:0.375rem;border-radius:100%;background-color:white}.unfolded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:0;transform:scale(0)}.folded.svelte-jzvcn0 .big-point.svelte-jzvcn0{opacity:1;transform:scale(1)}.unfolded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(0.6)}.folded.svelte-jzvcn0 .small-point.svelte-jzvcn0{transform:scale(1)}")}function E$2(_u){let $u,Tu,Cu,Pu,Bu,Lu,Ru;return Tu=new P$7({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Cu=Jt(),Pu=I$8("div"),Bu=Jt(),Lu=I$8("div"),Et(Pu,"class","small-point svelte-jzvcn0"),Yt(Pu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),Et(Lu,"class","big-point svelte-jzvcn0"),Yt(Lu,"transition-delay",_u[2]?_u[1]+"ms":"0ms"),Et($u,"class","point svelte-jzvcn0"),te$4($u,"unfolded",_u[0]),te$4($u,"folded",_u[2])},m(Ou,Du){vt(Ou,$u,Du),zt(Tu,$u,null),ut($u,Cu),ut($u,Pu),ut($u,Bu),ut($u,Lu),Ru=!0},p(Ou,[Du]){Du&6&&Yt(Pu,"transition-delay",Ou[2]?Ou[1]+"ms":"0ms"),Du&6&&Yt(Lu,"transition-delay",Ou[2]?Ou[1]+"ms":"0ms"),(!Ru||Du&1)&&te$4($u,"unfolded",Ou[0]),(!Ru||Du&4)&&te$4($u,"folded",Ou[2])},i(Ou){Ru||(gt(Tu.$$.fragment,Ou),Ru=!0)},o(Ou){jt(Tu.$$.fragment,Ou),Ru=!1},d(Ou){Ou&&H$4($u),Ot(Tu)}}}function F$1(_u,$u,Tu){let Cu,{unfolded:Pu}=$u,{foldDelay:Bu=800}=$u;return _u.$$set=Lu=>{"unfolded"in Lu&&Tu(0,Pu=Lu.unfolded),"foldDelay"in Lu&&Tu(1,Bu=Lu.foldDelay)},_u.$$.update=()=>{_u.$$.dirty&1&&Tu(2,Cu=!Pu)},[Pu,Bu,Cu]}class U extends be$1{constructor($u){super(),xe(this,$u,F$1,E$2,Dt,{unfolded:0,foldDelay:1},I$1)}}function B(_u){Ut(_u,"svelte-8en2lj",".point-click-helper.svelte-8en2lj{position:absolute;width:2.5rem;height:2.5rem;left:50%;top:50%;transform:translate(-50%, -50%)}")}function T$1(_u){let $u,Tu,Cu=_u[0].contentType!==i$3.Link&&D(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,Bu){Pu[0].contentType!==i$3.Link?Cu?(Cu.p(Pu,Bu),Bu&1&&gt(Cu,1)):(Cu=D(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function D(_u){let $u,Tu,Cu,Pu,Bu,Lu;const Ru=[F,E$1],Ou=[];function Du(Fu,Vu){var ku,Nu,Gu,ju;return((Nu=(ku=Fu[0].style)==null?void 0:ku.point)==null?void 0:Nu.style)==="CustomIcon"&&((ju=(Gu=Fu[0].style)==null?void 0:Gu.point)==null?void 0:ju.iconUrl)?0:1}return Cu=Du(_u),Pu=Ou[Cu]=Ru[Cu](_u),{c(){$u=I$8("div"),Tu=Jt(),Pu.c(),Bu=Kt(),Et($u,"class","point-click-helper svelte-8en2lj")},m(Fu,Vu){vt(Fu,$u,Vu),vt(Fu,Tu,Vu),Ou[Cu].m(Fu,Vu),vt(Fu,Bu,Vu),Lu=!0},p(Fu,Vu){let ku=Cu;Cu=Du(Fu),Cu===ku?Ou[Cu].p(Fu,Vu):(ae$5(),jt(Ou[ku],1,1,()=>{Ou[ku]=null}),de$2(),Pu=Ou[Cu],Pu?Pu.p(Fu,Vu):(Pu=Ou[Cu]=Ru[Cu](Fu),Pu.c()),gt(Pu,1),Pu.m(Bu.parentNode,Bu))},i(Fu){Lu||(gt(Pu),Lu=!0)},o(Fu){jt(Pu),Lu=!1},d(Fu){Fu&&H$4($u),Fu&&H$4(Tu),Ou[Cu].d(Fu),Fu&&H$4(Bu)}}}function E$1(_u){let $u,Tu;return $u=new U({props:{unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&1&&(Bu.unfolded=Cu[0].state.unfolded),Pu&2&&(Bu.foldDelay=Cu[1]),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function F(_u){let $u,Tu;return $u=new X({props:{iconUrl:_u[0].style.point.iconUrl,unfolded:_u[0].state.unfolded,foldDelay:_u[1]}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&1&&(Bu.iconUrl=Cu[0].style.point.iconUrl),Pu&1&&(Bu.unfolded=Cu[0].state.unfolded),Pu&2&&(Bu.foldDelay=Cu[1]),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function G(_u){var $u,Tu,Cu;let Pu,Bu,Lu=(($u=_u[0].pointTagStyle)==null?void 0:$u.leftPercent)&&((Tu=_u[0].pointTagStyle)==null?void 0:Tu.topPercent)&&_u[0].enabled!==!1&&_u[0].state&&((Cu=_u[0].temporaryState)==null?void 0:Cu.visible)!==!1&&T$1(_u);return{c(){Lu&&Lu.c(),Pu=Kt()},m(Ru,Ou){Lu&&Lu.m(Ru,Ou),vt(Ru,Pu,Ou),Bu=!0},p(Ru,[Ou]){var Du,Fu,Vu;((Du=Ru[0].pointTagStyle)==null?void 0:Du.leftPercent)&&((Fu=Ru[0].pointTagStyle)==null?void 0:Fu.topPercent)&&Ru[0].enabled!==!1&&Ru[0].state&&((Vu=Ru[0].temporaryState)==null?void 0:Vu.visible)!==!1?Lu?(Lu.p(Ru,Ou),Ou&1&&gt(Lu,1)):(Lu=T$1(Ru),Lu.c(),gt(Lu,1),Lu.m(Pu.parentNode,Pu)):Lu&&(ae$5(),jt(Lu,1,1,()=>{Lu=null}),de$2())},i(Ru){Bu||(gt(Lu),Bu=!0)},o(Ru){jt(Lu),Bu=!1},d(Ru){Lu&&Lu.d(Ru),Ru&&H$4(Pu)}}}function H(_u,$u,Tu){let Cu,{tag:Pu}=$u;return _u.$$set=Bu=>{"tag"in Bu&&Tu(0,Pu=Bu.tag)},_u.$$.update=()=>{var Bu,Lu;_u.$$.dirty&1&&Tu(1,Cu=(Lu=(Bu=Pu.style)==null?void 0:Bu.foldedPointDelay)!=null?Lu:Pu.contentType===i$3.Marketing?600:void 0)},[Pu,Cu]}class R$2 extends be$1{constructor($u){super(),xe(this,$u,H,G,Dt,{tag:0},B)}}function x$1(_u){Ut(_u,"svelte-1vzhbu2",".wrapper.svelte-1vzhbu2{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}.point.svelte-1vzhbu2{-webkit-tap-highlight-color:transparent;position:absolute;transform:translate(-50%, -50%);left:50%;top:50%}")}function I(_u){let $u,Tu;return $u=new dA({props:{mediaStore:_u[4],withAnimation:_u[0],tag:e$1(_u[1]),hooks:_u[2],state:_u[3],temporaryState:_u[5]}}),{c(){$e($u.$$.fragment)},m(Cu,Pu){zt($u,Cu,Pu),Tu=!0},p(Cu,Pu){const Bu={};Pu&16&&(Bu.mediaStore=Cu[4]),Pu&1&&(Bu.withAnimation=Cu[0]),Pu&2&&(Bu.tag=e$1(Cu[1])),Pu&4&&(Bu.hooks=Cu[2]),Pu&8&&(Bu.state=Cu[3]),Pu&32&&(Bu.temporaryState=Cu[5]),$u.$set(Bu)},i(Cu){Tu||(gt($u.$$.fragment,Cu),Tu=!0)},o(Cu){jt($u.$$.fragment,Cu),Tu=!1},d(Cu){Ot($u,Cu)}}}function L$1(_u){let $u,Tu,Cu,Pu,Bu;return Tu=new R$2({props:{tag:_u[1]}}),{c(){$u=I$8("div"),$e(Tu.$$.fragment),Et($u,"class","point svelte-1vzhbu2")},m(Lu,Ru){vt(Lu,$u,Ru),zt(Tu,$u,null),Cu=!0,Pu||(Bu=Z$2($u,"click",Qt(_u[11])),Pu=!0)},p(Lu,Ru){const Ou={};Ru&2&&(Ou.tag=Lu[1]),Tu.$set(Ou)},i(Lu){Cu||(gt(Tu.$$.fragment,Lu),Cu=!0)},o(Lu){jt(Tu.$$.fragment,Lu),Cu=!1},d(Lu){Lu&&H$4($u),Ot(Tu),Pu=!1,Bu()}}}function $(_u){var $u,Tu;let Cu,Pu,Bu,Lu,Ru=_u[1].dimensionType===r$2.Two&&I(_u),Ou=_u[1].pointType===g$2.PointTag&&((Tu=($u=_u[1].style)==null?void 0:$u.point)==null?void 0:Tu.style)!=="noPoint"&&L$1(_u);return{c(){Cu=I$8("div"),Ru&&Ru.c(),Pu=Jt(),Ou&&Ou.c(),Et(Cu,"class","wrapper svelte-1vzhbu2"),Et(Cu,"data-id",Bu=_u[1].id),te$4(Cu,"hide",_u[10]),te$4(Cu,"unfolded",_u[6]),Yt(Cu,"left",_u[9]),Yt(Cu,"top",_u[8]),Yt(Cu,"z-index",_u[7])},m(Du,Fu){vt(Du,Cu,Fu),Ru&&Ru.m(Cu,null),ut(Cu,Pu),Ou&&Ou.m(Cu,null),Lu=!0},p(Du,[Fu]){var Vu,ku;Du[1].dimensionType===r$2.Two?Ru?(Ru.p(Du,Fu),Fu&2&&gt(Ru,1)):(Ru=I(Du),Ru.c(),gt(Ru,1),Ru.m(Cu,Pu)):Ru&&(ae$5(),jt(Ru,1,1,()=>{Ru=null}),de$2()),Du[1].pointType===g$2.PointTag&&((ku=(Vu=Du[1].style)==null?void 0:Vu.point)==null?void 0:ku.style)!=="noPoint"?Ou?(Ou.p(Du,Fu),Fu&2&&gt(Ou,1)):(Ou=L$1(Du),Ou.c(),gt(Ou,1),Ou.m(Cu,null)):Ou&&(ae$5(),jt(Ou,1,1,()=>{Ou=null}),de$2()),(!Lu||Fu&2&&Bu!==(Bu=Du[1].id))&&Et(Cu,"data-id",Bu),(!Lu||Fu&1024)&&te$4(Cu,"hide",Du[10]),(!Lu||Fu&64)&&te$4(Cu,"unfolded",Du[6]),Fu&512&&Yt(Cu,"left",Du[9]),Fu&256&&Yt(Cu,"top",Du[8]),Fu&128&&Yt(Cu,"z-index",Du[7])},i(Du){Lu||(gt(Ru),gt(Ou),Lu=!0)},o(Du){jt(Ru),jt(Ou),Lu=!1},d(Du){Du&&H$4(Cu),Ru&&Ru.d(),Ou&&Ou.d()}}}function ee(_u,$u,Tu){let Cu,Pu,Bu,Lu,Ru,Ou,{withAnimation:Du=!1}=$u,{tag:Fu}=$u,{hooks:Vu}=$u,{state:ku}=$u,{mediaStore:Nu}=$u,{temporaryState:Gu}=$u,ju,Hu=!1;function Uu(Wu){ju!==void 0&&clearTimeout(ju),Hu=!0,ju=setTimeout(()=>{Hu=!1},800)}const zu=Wu=>{Hu||Vu.emit("click",{event:Wu,target:"TagPoint",tag:Fu})};return _u.$$set=Wu=>{"withAnimation"in Wu&&Tu(0,Du=Wu.withAnimation),"tag"in Wu&&Tu(1,Fu=Wu.tag),"hooks"in Wu&&Tu(2,Vu=Wu.hooks),"state"in Wu&&Tu(3,ku=Wu.state),"mediaStore"in Wu&&Tu(4,Nu=Wu.mediaStore),"temporaryState"in Wu&&Tu(5,Gu=Wu.temporaryState)},_u.$$.update=()=>{var Wu,Qu,Ku,Yu;_u.$$.dirty&2&&Tu(12,Cu=(Wu=Fu.state)==null?void 0:Wu.visible),_u.$$.dirty&4096&&Tu(10,Pu=!Cu),_u.$$.dirty&2&&Tu(6,Bu=(Qu=Fu.state)==null?void 0:Qu.unfolded),_u.$$.dirty&2&&Tu(9,Lu=((Ku=Fu.pointTagStyle)==null?void 0:Ku.leftPercent)+"%"),_u.$$.dirty&2&&Tu(8,Ru=((Yu=Fu.pointTagStyle)==null?void 0:Yu.topPercent)+"%"),_u.$$.dirty&2&&Tu(7,Ou=Fu.contentType===i$3.Link?1:0),_u.$$.dirty&64&&Uu()},[Du,Fu,Vu,ku,Nu,Gu,Bu,Ou,Ru,Lu,Pu,zu,Cu]}class re extends be$1{constructor($u){super(),xe(this,$u,ee,$,Dt,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},x$1)}}function J(_u){Ut(_u,"svelte-1eci49s",".tag--container.svelte-1eci49s{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tag.hide.svelte-1eci49s{display:none}.withAnimation.svelte-1eci49s{transition:opacity 0.3s linear}.tag--container.hide.svelte-1eci49s{opacity:0;pointer-events:none}.tag--container.hide.svelte-1eci49s *{pointer-events:none}")}function k(_u,$u,Tu){const Cu=_u.slice();return Cu[6]=$u[Tu],Cu}function v$1(_u){let $u,Tu=[],Cu=new Map,Pu,Bu=_u[1];const Lu=Ru=>Ru[6].id;for(let Ru=0;Ru<Bu.length;Ru+=1){let Ou=k(_u,Bu,Ru),Du=Lu(Ou);Cu.set(Du,Tu[Ru]=y(Du,Ou))}return{c(){$u=I$8("div");for(let Ru=0;Ru<Tu.length;Ru+=1)Tu[Ru].c();Et($u,"class","tag--container svelte-1eci49s"),te$4($u,"hide",!_u[3].visible||!_u[5].visible),te$4($u,"withAnimation",_u[0])},m(Ru,Ou){vt(Ru,$u,Ou);for(let Du=0;Du<Tu.length;Du+=1)Tu[Du].m($u,null);Pu=!0},p(Ru,Ou){Ou&63&&(Bu=Ru[1],ae$5(),Tu=ge$1(Tu,Ou,Lu,1,Ru,Bu,Cu,$u,ye$1,y,null,k),de$2()),(!Pu||Ou&40)&&te$4($u,"hide",!Ru[3].visible||!Ru[5].visible),(!Pu||Ou&1)&&te$4($u,"withAnimation",Ru[0])},i(Ru){if(!Pu){for(let Ou=0;Ou<Bu.length;Ou+=1)gt(Tu[Ou]);Pu=!0}},o(Ru){for(let Ou=0;Ou<Tu.length;Ou+=1)jt(Tu[Ou]);Pu=!1},d(Ru){Ru&&H$4($u);for(let Ou=0;Ou<Tu.length;Ou+=1)Tu[Ou].d()}}}function y(_u,$u){let Tu,Cu,Pu,Bu;const Lu=[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}];let Ru={};for(let Ou=0;Ou<Lu.length;Ou+=1)Ru=$t(Ru,Lu[Ou]);return Cu=new re({props:Ru}),{key:_u,first:null,c(){var Ou,Du,Fu;Tu=I$8("div"),$e(Cu.$$.fragment),Pu=Jt(),Et(Tu,"class","tag svelte-1eci49s"),te$4(Tu,"hide",!((Ou=$u[6].pointTagStyle)!=null&&Ou.leftPercent)||!((Du=$u[6].pointTagStyle)!=null&&Du.topPercent)||$u[6].enabled===!1||!$u[6].state||((Fu=$u[6].temporaryState)==null?void 0:Fu.visible)===!1),this.first=Tu},m(Ou,Du){vt(Ou,Tu,Du),zt(Cu,Tu,null),ut(Tu,Pu),Bu=!0},p(Ou,Du){var Fu,Vu,ku;$u=Ou;const Nu=Du&63?we$3(Lu,[{tag:$u[6],hooks:$u[2],state:$u[3],mediaStore:$u[4],temporaryState:$u[5],withAnimation:$u[0]}]):{};Cu.$set(Nu),(!Bu||Du&2)&&te$4(Tu,"hide",!((Fu=$u[6].pointTagStyle)!=null&&Fu.leftPercent)||!((Vu=$u[6].pointTagStyle)!=null&&Vu.topPercent)||$u[6].enabled===!1||!$u[6].state||((ku=$u[6].temporaryState)==null?void 0:ku.visible)===!1)},i(Ou){Bu||(gt(Cu.$$.fragment,Ou),Bu=!0)},o(Ou){jt(Cu.$$.fragment,Ou),Bu=!1},d(Ou){Ou&&H$4(Tu),Ot(Cu)}}}function K(_u){let $u,Tu,Cu=_u[3].enabled&&v$1(_u);return{c(){Cu&&Cu.c(),$u=Kt()},m(Pu,Bu){Cu&&Cu.m(Pu,Bu),vt(Pu,$u,Bu),Tu=!0},p(Pu,[Bu]){Pu[3].enabled?Cu?(Cu.p(Pu,Bu),Bu&8&&gt(Cu,1)):(Cu=v$1(Pu),Cu.c(),gt(Cu,1),Cu.m($u.parentNode,$u)):Cu&&(ae$5(),jt(Cu,1,1,()=>{Cu=null}),de$2())},i(Pu){Tu||(gt(Cu),Tu=!0)},o(Pu){jt(Cu),Tu=!1},d(Pu){Cu&&Cu.d(Pu),Pu&&H$4($u)}}}function L(_u,$u,Tu){let{withAnimation:Cu=!1}=$u,{tags:Pu=[]}=$u,{hooks:Bu}=$u,{state:Lu}=$u,{mediaStore:Ru}=$u,{temporaryState:Ou}=$u;return _u.$$set=Du=>{"withAnimation"in Du&&Tu(0,Cu=Du.withAnimation),"tags"in Du&&Tu(1,Pu=Du.tags),"hooks"in Du&&Tu(2,Bu=Du.hooks),"state"in Du&&Tu(3,Lu=Du.state),"mediaStore"in Du&&Tu(4,Ru=Du.mediaStore),"temporaryState"in Du&&Tu(5,Ou=Du.temporaryState)},[Cu,Pu,Bu,Lu,Ru,Ou]}class R$1 extends be$1{constructor($u){super(),xe(this,$u,L,K,Dt,{withAnimation:0,tags:1,hooks:2,state:3,mediaStore:4,temporaryState:5},J)}}function M(_u,$u){$u.forEach(Tu=>{const Cu=new SphereGeometry(.02,16,16),Pu=[],Bu=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Tu.position.length===4)Tu.position.forEach((Lu,Ru)=>{const Ou=Bu[Ru],Du=new Mesh(Cu,Ou);Du.position.copy(c$a(Lu)),Pu.push(Du)});else{const Lu=Bu[0],Ru=new Mesh(Cu,Lu);Ru.position.copy(c$a(Tu.position)),Pu.push(Ru)}Pu.forEach(Lu=>{Lu.material.depthTest=!1,_u.scene.add(Lu)})})}function i$2(_u){if(_u.length<3)return;const $u=_u.map(s$8),Tu=$u[1].clone().sub($u[0]),Cu=$u[2].clone().sub($u[1]);return Tu.cross(Cu)}function d$1(_u,$u){_u.model.loaded?$u():_u.once("modelLoaded",()=>$u())}function d(_u,$u,Tu){const Cu=new Plane().setFromNormalAndCoplanarPoint(Tu,$u),Pu=$u.clone().sub(_u).cross(new Vector3(0,1,0)).setLength(.01),Bu=new Vector3(0,.01,0);return[$u.clone().sub(Pu).sub(Bu),$u.clone().add(Pu).sub(Bu),$u.clone().add(Pu).add(Bu),$u.clone().sub(Pu).add(Bu)].map(Lu=>Cu.projectPoint(Lu,new Vector3))}const r=(_u,$u=16.666666666666668)=>{let Tu=null;const Cu=_u;return(...Pu)=>{Tu&&clearTimeout(Tu),Tu=setTimeout(()=>{Cu==null||Cu(...Pu),Tu&&clearTimeout(Tu),Tu=null},$u)}};function i$1(_u,$u=200){let Tu;return function(...Cu){Tu||(_u.apply(this,Cu),Tu=setTimeout(function(){Tu=null},$u))}}function o(_u,$u){if(!$u||typeof ResizeObserver=="undefined"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Tu=new ResizeObserver(_u);return{observe:()=>Tu.observe($u),unobserve:()=>Tu.unobserve($u)}}}const n={globalConfig:{initialState:{},visibleConfig:{visibleDistance:{max:5},angleRange:{min:-45,max:45}},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Link-Any":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},"Any-Marketing-Any":{unfoldedConfig:void 0},"3D-MediaPlane-PlaneTag":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{alwaysShowWhenMovePano:!0,angleRange:void 0,visibleDistance:void 0}}}};function a(_u){if(Array.isArray(_u)&&_u.length===4){const $u=_u.map(s$8);return c$9($u[0],$u[2])}else return s$8(_u)}function i(_u,$u){if(_u===void 0)return;const{min:Tu,max:Cu}=$u!=null?$u:{};if(!(Tu===void 0&&Cu===void 0))return!(typeof Cu=="number"&&Cu<_u||typeof Tu=="number"&&Tu>_u)}var x=Object.defineProperty,u=(_u,$u,Tu)=>$u in _u?x(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,f$1=(_u,$u,Tu)=>(u(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class p$1 extends x$6{constructor($u){super($u),f$1(this,"tagCacheByPanoIndex",{})}getCaches({panoIndex:$u,id:Tu,key:Cu}){var Pu,Bu,Lu,Ru;const{five:Ou}=this,Du=(Pu=Ou.panoIndex)!=null?Pu:$u;if(Du===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${Du}`);const Fu=`${(Lu=(Bu=Ou.work)==null?void 0:Bu.workCode)!=null?Lu:Ou.model.uuid}-${Du}`;let Vu=this.tagCacheByPanoIndex[Fu];return Vu||(Vu=new Map,this.tagCacheByPanoIndex[Fu]=Vu),Tu===void 0?Vu:Cu===void 0?Vu.get(Tu)||(Vu.set(Tu,{}),Vu.get(Tu)):(Ru=Vu.get(Tu))==null?void 0:Ru[Cu]}clearCache(){this.tagCacheByPanoIndex={}}}var w$1=Object.defineProperty,j=(_u,$u,Tu)=>$u in _u?w$1(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,b$1=(_u,$u,Tu)=>(j(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu);class O extends p$1{constructor($u){super($u),b$1(this,"tags",[]),b$1(this,"config",n),b$1(this,"raycaster",new Raycaster)}getTagById($u){const Tu=this.tags.find(Cu=>Cu.id===$u);if(!Tu){console.error(`getTagById(): tag is ${Tu}, id is ${$u}`);return}return Tu}changeConfig($u,Tu=!0){Tu?this.config=m$3({},this.config,$u):this.config=$u,this.clearCache()}changeGlobalConfig($u,Tu=!0){Tu?this.config.globalConfig=m$3({},this.config.globalConfig,$u):this.config.globalConfig=$u,this.clearCache()}changeContentTypeConfig($u,Tu,Cu=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Cu?this.config.contentTypeConfig[$u]=m$3({},this.config.contentTypeConfig[$u],Tu):this.config.contentTypeConfig[$u]=Tu,this.clearCache()}getVisibleByPanoIndex($u,Tu){var Cu;const Pu=this.getCaches({panoIndex:Tu,id:$u.id}),Bu=(Cu=this.five.panoIndex)!=null?Cu:Tu;if(Pu.visible!==void 0)return Pu.visible;{const Lu=(()=>{var Ru,Ou,Du,Fu,Vu;const ku=(Ru=this.getTagConfig($u).visibleConfig)!=null?Ru:{},Nu=this.getDistance($u);if(typeof ku=="function")return ku(this.five,{tag:$u,distance:Nu});if(ku.keep==="hidden")return!1;if(ku.keep==="visible")return!0;if(ku.visiblePanoIndex!==void 0&&(Bu===void 0||!ku.visiblePanoIndex.includes(Bu))||ku.visibleDistance!==void 0&&ku.visibleDistance!=="unLimited"&&i(Nu,ku.visibleDistance)===!1)return!1;if(((Ou=ku.intersectRaycaster)==null?void 0:Ou.enabled)!==!1){if(Bu===void 0)return!1;const Gu=(Du=this.five.work.observers[Bu])==null?void 0:Du.position;if(Gu===void 0)throw new Error(`getVisible(): observerPosition is ${Gu}`);const ju=a($u.position).sub(Gu).normalize();this.raycaster.set(Gu,ju);const[Hu]=this.five.model.intersectRaycaster(this.raycaster),Uu=(Vu=(Fu=ku.intersectRaycaster)==null?void 0:Fu.distanceAccuracy)!=null?Vu:.01;if(Hu&&Hu.distance+Uu<Nu)return!1}return!(ku.angleRange&&$u.dimensionType===r$2.Three&&i(this.getAngle($u),ku.angleRange)===!1)})();return Pu.visible=Lu,Pu.visible}}getUnfoldedByPanoIndex($u,Tu){if(!this.getVisibleByPanoIndex($u))return;const Cu=this.getCaches({panoIndex:Tu,id:$u.id});if(Cu.unfolded!==void 0)return Cu.unfolded;{const Pu=this.getTagConfig($u).unfoldedConfig;if(!Pu)return;const Bu=(()=>{const Ru=this.getDistance($u);if(typeof Pu=="function")return Pu(this.five,{tag:$u,distance:Ru});if(Pu.keep==="folded")return!1;if(Pu.keep==="unfolded")return!0;if(Pu.disableUnfold===!0)return!1;if(Pu.disableFold===!0)return!0;if(Pu.unfoldDistance&&i(Ru,Pu.unfoldDistance)===!1)return!1})();Cu.unfolded=Bu;const Lu=this.getUnfoldedByCamera($u);return Lu!==void 0?Lu:Cu.unfolded}}getUnfoldedByCamera($u){return this.getVisibleByPanoIndex($u)?(()=>{var Tu;const Cu=this.getDistance($u),Pu=this.getTagConfig($u).unfoldedConfig;if(Pu){if(typeof Pu=="function")return Pu(this.five,{tag:$u,distance:Cu});if(Pu.keep==="folded")return!1;if(Pu.keep==="unfolded")return!0;if(Pu.disableUnfold===!0)return!1;if(Pu.disableFold===!0)return!0;if(Pu.autoUnfold===void 0)return;if(Pu.autoUnfold.strategy==="ScreenPostion"){const Bu=this.getTagProject($u);if(Bu&&i(Bu.x,Pu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Pu.autoUnfold.strategy==="MinimumDistance"){const Bu=this.filterPointTag().filter(Lu=>this.getVisibleByPanoIndex(Lu)).filter(Lu=>{const Ru=this.getTagProject(Lu);if(!Ru)return!1;const{x:Ou,y:Du,z:Fu}=Ru;return!(Math.abs(Fu)>1||Math.abs(Ou)>1||Math.abs(Du)>1)}).filter(Lu=>{var Ru;const Ou=this.getTagConfig(Lu).unfoldedConfig;return typeof Ou=="object"&&((Ru=Ou.autoUnfold)==null?void 0:Ru.strategy)==="MinimumDistance"}).map(Lu=>({id:Lu.id,distance:this.getDistance(Lu)})).filter(Lu=>Lu.distance!==void 0).sort((Lu,Ru)=>Lu.distance-Ru.distance).findIndex(Lu=>Lu.id===$u.id);if(Bu===-1||!(Bu<=((Tu=Pu.autoUnfold.maxNumber)!=null?Tu:1)-1))return!1}return!0}})():void 0}getDistance($u,Tu){var Cu,Pu,Bu;const Lu=(Cu=this.five.panoIndex)!=null?Cu:Tu;if(Lu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Lu}`);const Ru=this.getCaches({panoIndex:Tu,id:$u.id});if(Ru.distance!==void 0)return Ru.distance;{const Ou=(Bu=(Pu=this.five.work)==null?void 0:Pu.observers[Lu])==null?void 0:Bu.position;if(Ou===void 0)throw new Error(`getDistance(): observerPosition is ${Ou}`);const Du=(()=>$u.pointType===g$2.PointTag?c$a($u==null?void 0:$u.position):a($u.position))(),Fu=Ou.distanceTo(Du);return Ru.distance=Fu,Fu}}getAngle($u,Tu){var Cu,Pu,Bu;const Lu=(Cu=this.five.panoIndex)!=null?Cu:Tu;if(Lu===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Lu}`);const Ru=this.getCaches({panoIndex:Tu,id:$u.id});if(Ru.angle!==void 0)return Ru.angle;{const Ou=(Bu=(Pu=this.five.work)==null?void 0:Pu.observers[Lu])==null?void 0:Bu.position;if(Ou===void 0)throw new Error(`getAngleRange(): observerPosition is ${Ou}`);const Du=(()=>$u.pointType===g$2.PointTag?s$8($u.normal):i$2($u.position))();if(!Du)return;const Fu=new Vector3().copy(Ou).sub(a($u.position)),Vu=Du.angleTo(Fu)*180/Math.PI;return Ru.angle=Vu,Ru.angle}}getTagConfig($u){var Tu;if(!$u)return(Tu=this.config.globalConfig)!=null?Tu:{};const Cu={};return this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Pu=>{const Bu=Pu;if(Cu[Bu])return;const Lu=Bu.split("-"),[Ru="Any",Ou="Any",Du="Any"]=Lu||[];($u.dimensionType===Ru||Ru==="Any")&&($u.contentType===Ou||Ou==="Any")&&($u.pointType===Du||Du==="Any")&&(Cu[Bu]=this.config.contentTypeConfig[Bu])}),m$3({},this.config.globalConfig,...Object.values(Cu),$u.config)}canBe($u,Tu){const Cu=this.getTagConfig(Tu);if(!Cu||typeof Cu!="object")return!0;if($u==="show"||$u==="hide"){if(!Cu.visibleConfig||typeof Cu.visibleConfig!="object")return!0;if($u==="show"&&Cu.visibleConfig.keep==="hidden"||$u==="hide"&&(Cu.visibleConfig.keep==="visible"||Cu.visibleConfig.alwaysShowWhenMovePano))return!1}if($u==="fold"||$u==="unfold"){if(!Cu.unfoldedConfig||typeof Cu.unfoldedConfig!="object")return!0;if($u==="fold"&&(Cu.unfoldedConfig.disableFold||Cu.unfoldedConfig.keep==="unfolded")||$u==="unfold"&&(Cu.unfoldedConfig.disableUnfold||Cu.unfoldedConfig.keep==="folded"))return!1}return!0}setPointTagPosition(){const $u=this.filterPointTag();$u.length!==0&&$u.forEach(Tu=>{var Cu;if(!((Cu=Tu.state)!=null&&Cu.visible)){Tu.pointTagStyle=void 0;return}const Pu=this.getTagProject(Tu);if(!Pu){Tu.pointTagStyle=void 0;return}Tu.pointTagStyle={leftPercent:(Pu.x+1)/2*100,topPercent:(-Pu.y+1)/2*100}})}setVisibleByPanoIndex(){this.tags.forEach($u=>{const Tu=this.getVisibleByPanoIndex($u);$u.state&&($u.state.visible=Tu)})}setUnfoldedByPanoIndex(){this.tags.forEach($u=>{const Tu=this.getUnfoldedByPanoIndex($u);if(!!$u.state&&(Tu!==void 0&&($u.state.unfolded=Tu),Tu&&!$u.state.visible)){const Cu=this.getTagConfig($u);typeof Cu.unfoldedConfig=="object"&&Cu.unfoldedConfig.autoUnfoldWhenHide!==!1&&($u.state.unfolded=!1)}})}getTagProject($u){if(!this.getVisibleByPanoIndex($u))return;const Tu=a($u.position),{x:Cu,y:Pu,z:Bu}=Tu.project(this.five.camera);if(!(Bu>1))return{x:Cu,y:Pu,z:Bu}}filterPointTag(){return this.tags.filter($u=>$u.pointType===g$2.PointTag)}filterTag2D(){return this.tags.filter($u=>$u.dimensionType===r$2.Two)}filter3DPointTag(){return this.tags.filter($u=>$u.dimensionType===r$2.Three&&$u.pointType===g$2.PointTag)}filter3DTag(){return this.tags.filter($u=>$u.dimensionType===r$2.Three)}filterPlaneTag(){return this.tags.filter($u=>$u.dimensionType===r$2.Three&&$u.pointType===g$2.PlaneTag)}}var A=Object.defineProperty,P=Object.defineProperties,R=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,v=(_u,$u,Tu)=>$u in _u?A(_u,$u,{enumerable:!0,configurable:!0,writable:!0,value:Tu}):_u[$u]=Tu,f=(_u,$u)=>{for(var Tu in $u||($u={}))w.call($u,Tu)&&v(_u,Tu,$u[Tu]);if(T)for(var Tu of T($u))E.call($u,Tu)&&v(_u,Tu,$u[Tu]);return _u},c=(_u,$u)=>P(_u,R($u)),h=(_u,$u,Tu)=>(v(_u,typeof $u!="symbol"?$u+"":$u,Tu),Tu),p=(_u,$u,Tu)=>new Promise((Cu,Pu)=>{var Bu=Ou=>{try{Ru(Tu.next(Ou))}catch(Du){Pu(Du)}},Lu=Ou=>{try{Ru(Tu.throw(Ou))}catch(Du){Pu(Du)}},Ru=Ou=>Ou.done?Cu(Ou.value):Promise.resolve(Ou.value).then(Bu,Lu);Ru((Tu=Tu.apply(_u,$u)).next())});const S="1.2.6",b=`DnalogelPlugin-PanoTagPlugin@${S}`,V=!1;class ae extends O{constructor($u,Tu){super($u),h(this,"version",S),h(this,"state",{enabled:!0,visible:!0}),h(this,"params"),h(this,"debug"),h(this,"css3DRenderPlugin"),h(this,"TagContainerSvelte"),h(this,"temporaryState",{visible:!0}),h(this,"mediaStore",h$3({currentMediaUrl:""})),h(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),h(this,"staticUrl"),h(this,"disposedErrorLog",()=>{console.error(`${b} is disposed`)}),this.params=f({debug:!1,mergePluginDefaultConfigToLoadDataConfig:!1,config:this.config,staticConfig:{host:"vrlab-static.ljcdn.com"}},Tu),this.debug=this.params.debug,this.config=this.params.config,this.staticUrl=(()=>{var Cu;const Pu=this.params.staticConfig;if(typeof Pu=="string")return Pu;{const Bu=Pu.protocol?Pu.protocol+":":"",Lu=(Cu=Pu.host)!=null?Cu:"vrlab-static.ljcdn.com",Ru=Pu.port?":"+Pu.port:"";return`${Bu}//${Lu}${Ru}`}})(),Object.assign(window,{__PANOTAGPLUGIN_DEBUG__:this})}load($u,Tu){var Cu,Pu;this.clearTags(),console.log(b,"load:",{data:$u}),this.params.mergePluginDefaultConfigToLoadDataConfig?this.config=m$3({},this.config,{globalConfig:(Cu=$u.globalConfig)!=null?Cu:{},contentTypeConfig:(Pu=$u.contentTypeConfig)!=null?Pu:{}}):($u.globalConfig&&(this.config.globalConfig=$u.globalConfig),$u.contentTypeConfig&&(this.config.contentTypeConfig=$u.contentTypeConfig)),this.addTag($u.tagList,Tu),this.debug&&M(this.five,this.tags)}addTag($u,Tu){const Cu=(Array.isArray($u)?$u:[$u]).map(Pu=>{const Bu=this.getTagConfig(Pu);return c(f({},Pu),{state:f({visible:void 0,unfolded:V},Bu.initialState),hooks:new Subscribe,clickable:Bu.clickable})}).filter(Pu=>Pu.position);this.tags.push(...Cu),d$1(this.five,()=>{var Pu,Bu,Lu;this.store.eventListenerDisposer&&((Bu=(Pu=this.store).eventListenerDisposer)==null||Bu.call(Pu)),this.state.enabled&&(this.store.eventListenerDisposer=this.addEventListener()),this.addResizeListener(),this.checkPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Lu=Tu==null?void 0:Tu.withAnimation)!=null?Lu:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags()})}clearTags(){this.tags=[],this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}show($u){return p(this,null,function*(){const{userAction:Tu=!0,withAnimation:Cu=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Tu,visibleWithAnimation:Cu}),this.hooks.emit("show",{userAction:Tu,withAnimation:Cu})})}hide($u){return p(this,null,function*(){const{userAction:Tu=!0,withAnimation:Cu=!1}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Tu,visibleWithAnimation:Cu}),this.hooks.emit("hide",{userAction:Tu,withAnimation:Cu})})}enable($u){const{userAction:Tu=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Tu}),this.hooks.emit("enable",{userAction:Tu})}disable($u){const{userAction:Tu=!0}=$u!=null?$u:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})}dispose(){var $u,Tu,Cu,Pu,Bu,Lu;this.disposeAllCSS3DContainer(),($u=this.TagContainerSvelte)==null||$u.$destroy(),this.filter3DTag().forEach(Ru=>{var Ou;return(Ou=Ru.tag3DContentSvelte)==null?void 0:Ou.svelteApp.$destroy()}),this.tags=[],(Tu=this.store.disposers)==null||Tu.forEach(Ru=>Ru==null?void 0:Ru()),this.store.disposers=[],this.store.disposed=!0,(Pu=(Cu=this.store).eventListenerDisposer)==null||Pu.call(Cu),this.store.eventListenerDisposer=void 0,(Lu=(Bu=this.store).resizeObserverDisposer)==null||Lu.call(Bu),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.clearCache(),this.hooks.emit("dispose")}setState($u,Tu){if(this.store.disposed)return this.disposedErrorLog();const{userAction:Cu=!0,visibleWithAnimation:Pu=!1}=Tu,Bu=f({},this.state);this.state=Object.assign(this.state,$u),this.store.visibleWithAnimation=Pu,Bu.visible!==this.state.visible&&($u.visible?this.handleShow():this.handleHide()),Bu.enabled!==this.state.enabled&&($u.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Bu,userAction:Cu})}changeTagNormalById($u,Tu){const Cu=this.getTagById($u);!Cu||!Cu.tag3DContentSvelte||(Cu.tag3DContentSvelte.currentNormal=c$a(Tu),this.updateRenderPlaneTag())}changeDataById($u,Tu,Cu=!0){const Pu=this.getTagById($u);!Pu||(Cu?Pu.data=m$3({},Pu.data,Tu):Object.assign(Pu.data,Tu),this.checkPanelTag(),this.updateRenderAllTags())}changeTagById($u,Tu,Cu=!0){const Pu=this.getTagById($u);!Tu||(Cu?m$3(Pu,Tu):Object.assign(Pu,Tu),(Pu==null?void 0:Pu.tag3DContentSvelte)&&(Tu==null?void 0:Tu.normal)&&(Pu.tag3DContentSvelte.currentNormal=c$a(Tu.normal)),this.updateRenderAllTags(),this.checkPanelTag())}destroyTagById($u){(Array.isArray($u)?$u:[$u]).forEach(Tu=>{const Cu=this.tags.findIndex(Pu=>Pu.id===Tu);Cu!==-1&&this.tags.splice(Cu,1)}),this.updateRenderAllTags()}pauseCurrentMedia(){this.mediaStore.set({currentMediaUrl:""})}setVisibleAndUnfolded(){return p(this,arguments,function*({withAnimation:$u}={withAnimation:!1}){return this.setVisibleByPanoIndex(),$u?new Promise((Tu,Cu)=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Tu()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())})}handleShow(){this.state.visible=!0,this.updateTagContainerVisible()}handleHide(){this.state.visible=!1,this.updateTagContainerVisible()}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.updateRenderAllTags()}handleDisable(){var $u,Tu,Cu;this.state.enabled=!1,(Tu=($u=this.store).eventListenerDisposer)==null||Tu.call($u),(Cu=this.TagContainerSvelte)==null||Cu.$set({tags:[]}),this.filter3DTag().forEach(Pu=>{var Bu;(Bu=Pu.tag3DContentSvelte)==null||Bu.svelteApp.$destroy(),Pu.tag3DContentSvelte=void 0})}addEventListener(){const{five:$u,hooks:Tu}=this,Cu=this.handleFiveWantsMoveToPano.bind(this),Pu=this.handleFiveModeChange.bind(this),Bu=this.handleFiveCameraUpdate.bind(this),Lu=this.handleFiveCameraUpdateDebounce(),Ru=this.handleFivePanoArrived.bind(this),Ou=this.clickhandler.bind(this);return $u.on("wantsMoveToPano",Cu),$u.on("modeChange",Pu),$u.on("cameraUpdate",Bu),$u.on("cameraUpdate",Lu),$u.on("panoArrived",Ru),Tu.on("click",Ou),()=>{$u.off("wantsMoveToPano",Cu),$u.off("modeChange",Pu),$u.off("cameraUpdate",Bu),$u.off("cameraUpdate",Lu),$u.off("panoArrived",Ru),Tu.off("click",Ou),this.store.eventListenerDisposer=void 0}}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const $u=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=$u,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(!this.store.disposed)return;const $u=this.five.getElement(),Tu=()=>{!this.state.enabled||(this.show(),this.updateRenderAllTags())},Cu=()=>{!this.state.enabled||this.hide()},{observe:Pu,unobserve:Bu}=o(i$1(()=>{!this.store.resizeObserverDisposer||Cu()},500),$u),{observe:Lu,unobserve:Ru}=o(r(()=>Tu(),400),$u);return Pu(),Lu(),()=>{Bu(),Ru()}}handleFiveModeChange($u){$u==="Panorama"?this.five.once("panoArrived",()=>this.temporaryShow()):this.temporaryHide()}handleFiveWantsMoveToPano(){this.tags.forEach($u=>{const Tu=this.getTagConfig($u);typeof Tu.visibleConfig=="object"&&Tu.visibleConfig.keep?$u.temporaryState=c(f({},$u.temporaryState),{visible:Tu.visibleConfig.keep==="visible"}):typeof Tu.visibleConfig=="object"&&Tu.visibleConfig.alwaysShowWhenMovePano?$u.temporaryState=c(f({},$u.temporaryState),{visible:!0}):$u.temporaryState=c(f({},$u.temporaryState),{visible:!1})}),this.updateRenderAllTags()}temporaryShow(){this.temporaryState.visible=!0}temporaryHide(){this.temporaryState.visible=!1}clickhandler($u){if($u.target!=="TagPoint")return;if(!$u.tag.state)return console.warn("Clickhandler: params.tag.state is undefined");const Tu=this.canBe("fold",$u.tag),Cu=this.canBe("unfold",$u.tag);Tu&&Cu&&($u.tag.state.unfolded=!$u.tag.state.unfolded,$u.tag.state.unfolded&&this.tags.forEach(Pu=>{Pu.id!==$u.tag.id&&Pu.state&&this.canBe("fold",Pu)&&(Pu.state.unfolded=!1)}),this.updateRenderAllTags())}updateRenderAllTags(){this.updateRenderPointTag(),this.updateRenderPlaneTag()}updateTagContainerVisible(){var $u;($u=this.TagContainerSvelte)==null||$u.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filter3DTag().forEach(Tu=>{var Cu;(Cu=Tu.tag3DContentSvelte)==null||Cu.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}handleFiveCameraUpdateDebounce(){return r(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}handleFivePanoArrived(){return p(this,null,function*(){yield this.setVisibleAndUnfolded(),this.tags.forEach($u=>{$u.temporaryState=c(f({},$u.temporaryState),{visible:!0})}),this.updateRenderAllTags()})}setUnfoldedByCamera(){let $u=!1;this.tags.forEach(Tu=>{const Cu=this.getUnfoldedByCamera(Tu);!Tu.state||Cu!==void 0&&(Cu===!0&&($u=!0),Tu.state.unfolded=Cu)}),$u&&this.tags.forEach(Tu=>{const Cu=this.getTagConfig(Tu).unfoldedConfig;typeof Cu=="object"&&(Cu.autoUnfold||Cu.disableFold||Cu.keep)||Tu.state&&(Tu.state.unfolded=!1)})}updateRenderPointTag(){var $u;const Tu=this.filterPointTag();if(this.setPointTagPosition(),this.TagContainerSvelte)this.TagContainerSvelte.$set({tags:Tu,state:this.state,temporaryState:this.temporaryState});else{const Cu=($u=this.five.getElement())==null?void 0:$u.parentElement;if(!Cu)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new R$1({target:Cu,props:{hooks:this.hooks,tags:Tu,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateRenderPlaneTag(){[...this.filterPlaneTag(),...this.filter3DPointTag()].forEach($u=>{var Tu;if($u.tag3DContentSvelte){const{svelteApp:Cu,domContainer:Pu,initialNormal:Bu,currentNormal:Lu}=$u.tag3DContentSvelte;if(Cu.$set({tag:$u,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Bu.equals(Lu)){const Ru=new Quaternion().setFromUnitVectors(Bu,Lu);Pu.css3DObject.setRotationFromQuaternion(Ru)}}else{if(((Tu=$u.state)==null?void 0:Tu.visible)===!1)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=R$9(this.five)),$u.pointType===g$2.PointTag&&!$u.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Cu=$u.pointType===g$2.PlaneTag?$u.position:d(this.five.camera.position,c$a($u.position),c$a($u.normal)),Pu=$u.pointType===g$2.PlaneTag?i$2($u.position):c$a($u.normal),Bu=this.getTagConfig($u).tag3DConfig,Lu=this.css3DRenderPlugin.create3DDomContainer(Cu,Bu);if(!Lu)return;this.store.css3DRenderDisposer.set($u.id,Lu.dispose),$u.tag3DContentSvelte={svelteApp:new dA({target:Lu.container,props:{tag:$u,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}}),domContainer:Lu,initialNormal:Pu,currentNormal:Pu}}}),this.checkPanelTag()}disposeAllCSS3DContainer(){for(const[$u,Tu]of this.store.css3DRenderDisposer)Tu==null||Tu();this.store.css3DRenderDisposer=new Map}checkPanelTag(){this.tags.forEach($u=>{var Tu;$u.dimensionType===r$2.Two&&$u.pointType===g$2.PointTag&&((Tu=$u.tag3DContentSvelte)==null||Tu.domContainer.dispose(),$u.tag3DContentSvelte=void 0)});for(const[$u,Tu]of this.store.css3DRenderDisposer){const Cu=this.getTagById($u);(!Cu||Cu.dimensionType!==r$2.Three)&&(Tu==null||Tu(),this.store.css3DRenderDisposer.delete($u))}}}const qo=(_u,$u)=>new ae(_u,$u);new Vector3;function PanoTag(){const _u=react$1.exports.useRef(),$u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef(qo(Tu,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"},unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Bu;if(((Bu=$u.configs)==null?void 0:Bu.keyframeMap.PanoTag)===!1)return;const Pu=Lu=>{if(!Cu.current)return;const{start:Ru,end:Ou,data:Du}=Lu,Fu=Du,Vu=Date.now().toString(),ku=g$2.PointTag,Nu=r$2.Two,Gu=[Fu.vertex.x,Fu.vertex.y,Fu.vertex.z],ju=(()=>Fu.imgUrl?{id:Vu,pointType:ku,position:Gu,dimensionType:Nu,contentType:i$3.ImageText,data:{text:Fu.text,mediaData:[{type:"Image",url:Fu.imgUrl}]}}:{id:Vu,pointType:ku,position:Gu,dimensionType:Nu,contentType:i$3.Text,data:{text:Fu.text}})();Cu.current.load({tagList:[ju]}),_u.current=setTimeout(()=>{var Uu;const Hu=Cu.current.getTagById(Vu);!Hu||(Hu.state&&(Hu.state.unfolded=!1,Cu.current.updateRenderAllTags()),(Uu=Hu.hooks)==null||Uu.on("folded",()=>{setTimeout(()=>{Hu.state&&(Hu.state.visible=!1,Cu.current.destroyTagById(Vu))},1500)}))},Ou-Ru)};return $u.on(VreoKeyframeEnum.PanoTag,Pu),()=>{$u.off(VreoKeyframeEnum.PanoTag,Pu),_u.current&&clearTimeout(_u.current)}},[$u]),null}function evenNumber(_u,$u){const Tu=Math.round(_u);return Tu%2===0?Tu:Tu+Number($u!=null&&$u.smaller?-1:1)}function centerPoint(_u,$u){return new Vector3((_u.x+$u.x)/2,(_u.y+$u.y)/2,(_u.z+$u.z)/2)}const transformPositionToVector3=({x:_u,y:$u,z:Tu})=>new Vector3(_u,$u,Tu);function createResizeObserver(_u,$u){if(!$u||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",_u),unobserve:()=>window.removeEventListener("resize",_u)};{const Tu=new ResizeObserver(_u);return{observe:()=>Tu.observe($u),unobserve:()=>Tu.unobserve($u)}}}const CSS3DRenderPlugin=_u=>{const $u={disposeCallbacks:[]},Tu=(...Pu)=>{var Zu,_c,Ju;const Bu=Pu[0].map(_h=>_h instanceof Vector3?_h:transformPositionToVector3(_h)),Lu=Pu[1];if((Bu==null?void 0:Bu.length)<4)return console.error("points must be equal or greater than than 4");if(!((Zu=_u==null?void 0:_u.model)!=null&&Zu.loaded))return console.error("five.model.loaded is: ",(_c=_u==null?void 0:_u.model)==null?void 0:_c.loaded);const Ru=_u.getElement();if(!Ru)return console.error("five.getElement() is "+Ru);const Ou=[],Du=(Lu==null?void 0:Lu.ratio)||.00216;Du<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Fu=(Lu==null?void 0:Lu.dpr)||1,Vu=(Lu==null?void 0:Lu.mode)||"front",ku=(Ju=Lu==null?void 0:Lu.autoRender)!=null?Ju:!0,Nu=(Lu==null?void 0:Lu.behindFiveContainer)||Ru.parentElement||document.body,Gu=(Lu==null?void 0:Lu.container)||document.createElement("div");Gu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:ju,mesh:Hu}=Cu(Bu,{ratio:Du,dpr:Fu,container:Gu,mode:Vu});let Uu;const zu=Vu==="front"&&!$u.frontMode,Wu=Vu==="behind"&&!$u.behindMode,Qu=!(zu||Wu);let Ku=!1,Yu=null;Wu&&($u.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),zu&&($u.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:Xc,css3DRenderer:_d}=Vu==="behind"?$u.behindMode:$u.frontMode,_f=(()=>{if(Qu)return()=>{Xc.add(ju)};{const _h=()=>{const tp=evenNumber(Ru.clientWidth,{smaller:!0}),rp=evenNumber(Ru.clientHeight,{smaller:!0});_d.setSize(tp,rp)};_h(),Uu=createResizeObserver(_h,Ru),_d.domElement.style.position="absolute",_d.domElement.style.top="0",_d.domElement.style.userSelect="none",_d.domElement.style.pointerEvents="none";const ep=()=>{Ku||(Yu=requestAnimationFrame(ep),_d.render(Xc,_u.camera))};return()=>{var tp;Xc.add(ju),(tp=Uu==null?void 0:Uu.observe)==null||tp.call(Uu),ep(),Vu==="behind"&&Hu&&(_u.scene.add(Hu),Ou.push(()=>Hu&&_u.scene.remove(Hu)))}}})();zu&&(Ru.parentElement||document.body).appendChild(_d.domElement),Wu&&Nu.appendChild(_d.domElement);const qu=()=>{var _h;return Ku=!0,Ou.forEach(ep=>ep==null?void 0:ep()),Xc.remove(ju),typeof Yu=="number"&&cancelAnimationFrame(Yu),Xc.children.length===0&&(_d.domElement.remove(),Vu==="front"&&($u.frontMode=void 0),Vu==="behind"&&($u.behindMode=void 0),!$u.behindMode&&!$u.frontMode&&((_h=Uu==null?void 0:Uu.unobserve)==null||_h.call(Uu))),!0},Xu=$u.disposeCallbacks.findIndex(_h=>_h===qu);return Xu!==-1?$u.disposeCallbacks.splice(Xu,1):$u.disposeCallbacks.push(qu),ku&&_f(),{container:Gu,dispose:qu,css3DObject:ju,render:ku?void 0:_f}},Cu=(Pu,Bu)=>{const{ratio:Lu,dpr:Ru,container:Ou,mode:Du}=Bu,Fu=Pu[0].distanceTo(Pu[1]),Vu=Pu[1].distanceTo(Pu[2]),ku=evenNumber(Fu/Lu*Ru),Nu=evenNumber(Vu/Lu*Ru),Gu=new CSS3DObject(Ou);Gu.scale.set(Lu,Lu,Lu),Ou.style.width=ku+"px",Ou.style.height=Nu+"px",Ou.style.pointerEvents="none";const ju=centerPoint(Pu[0],Pu[2]),Hu=Pu[1].clone().sub(Pu[0]),Uu=Pu[2].clone().sub(Pu[1]),zu=new Vector3(0,1,0).angleTo(new Vector3(0,Uu.y,Uu.z)),Wu=new Vector3(1,0,0).angleTo(new Vector3(Hu.x,0,Hu.z)),Qu=Hu.angleTo(new Vector3(Hu.x,0,Hu.z)),Ku=(Uu.z>0?-1:1)*zu,Yu=(Hu.z<0?1:-1)*Wu,Xc=(Hu.x>0&&Hu.y<0||Hu.x<0&&Hu.y>0?-1:1)*Qu;Gu.rotateOnWorldAxis(new Vector3(1,0,0),Ku),Gu.rotateOnWorldAxis(new Vector3(0,1,0),Yu),Gu.rotateOnWorldAxis(new Vector3(0,0,1),Xc),Gu.position.set(ju.x,ju.y,ju.z);let _d;if(Du==="behind"){const _f=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),qu=new PlaneGeometry(ku,Nu);_d=new Mesh(qu,_f),_d.name="CSS3DRenderPlugin-mesh",_d.position.copy(Gu.position),_d.rotation.copy(Gu.rotation),_d.scale.copy(Gu.scale)}return{css3DObject:Gu,mesh:_d}};return{create3DDomContainer:Tu,disposeAll:()=>{$u.disposeCallbacks.forEach(Pu=>Pu==null?void 0:Pu()),$u.disposeCallbacks=[]}}},calcPoints=(_u,$u,Tu,Cu)=>{const Pu=Tu/375,Bu=Cu/375,Lu=new PlaneGeometry(Pu,Bu);if($u){const zu=new Vector3($u.x+_u.x,$u.y+_u.y,$u.z+_u.z);Lu.lookAt(zu)}const Ru=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Ou=new Mesh(Lu,Ru),Du=_u.clone();Ou.position.copy(Du);const[Fu,Vu,ku,Nu]=Ou.geometry.vertices,Gu=Du.clone().add(Nu),ju=Du.clone().add(ku),Hu=Du.clone().add(Vu),Uu=Du.clone().add(Fu);return[Gu,ju,Uu,Hu]};function PanoTextLabel(){const _u=react$1.exports.useRef(),$u=useController(),Tu=useFiveInstance(),Cu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Bu;if(((Bu=$u.configs)==null?void 0:Bu.keyframeMap.PanoTextLabel)===!1)return;const Pu=Lu=>{var Ku,Yu,Xc;const{start:Ru,end:Ou,data:Du}=Lu,Fu=Du;if(Du.text==="")return;const{x:Vu,y:ku,z:Nu}=Fu.vertex,Gu=new Vector3(Vu,ku,Nu),ju=new Vector3((Ku=Fu.normal)==null?void 0:Ku.x,(Yu=Fu.normal)==null?void 0:Yu.y,(Xc=Fu.normal)==null?void 0:Xc.z),Hu=200,Uu=30,zu=calcPoints(Gu,Fu.normal&&ju,Hu,Uu);Cu.current||(Cu.current=CSS3DRenderPlugin(Tu));const Wu=Cu.current.create3DDomContainer(zu),Qu=Wu==null?void 0:Wu.css3DObject;if(Du.quaternion){const _d=new Quaternion(Du.quaternion.x,Du.quaternion.y,Du.quaternion.z,Du.quaternion.w);Qu==null||Qu.quaternion.copy(_d)}Wu!=null&&Wu.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Du.fontSize||16}px`},className:"PanoText-innerText",children:Du.text||""})})}),Wu==null?void 0:Wu.container),_u.current=setTimeout(()=>{var _d;(_d=Cu.current)==null||_d.disposeAll()},Ou-Ru)};return $u.on(VreoKeyframeEnum.PanoTextLabel,Pu),()=>{$u.off(VreoKeyframeEnum.PanoTextLabel,Pu),_u.current&&clearTimeout(_u.current)}},[$u]),jsx(Fragment,{})}function Prompter(){const[_u,$u]=react$1.exports.useState(""),[Tu,Cu]=react$1.exports.useState(!0),Pu=react$1.exports.useRef(null),Bu=useController();return react$1.exports.useEffect(()=>{var Ru;if(((Ru=Bu.configs)==null?void 0:Ru.keyframeMap.Prompter)===!1)return;const Lu=Ou=>{const{start:Du,end:Fu,data:Vu}=Ou;$u(Vu.text),Cu(!1),Pu.current&&(clearTimeout(Pu.current),Pu.current=null),Pu.current=setTimeout(()=>{Cu(!0),$u(""),Pu.current&&clearTimeout(Pu.current),Pu.current=null},Fu-Du)};return Bu.on(VreoKeyframeEnum.Prompter,Lu),()=>{Bu.off(VreoKeyframeEnum.Prompter,Lu)}},[Bu]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Tu,[`vreo-prompter-left--${Bu.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:_u})})})}function UpdateVRPanorama(){const _u=useController(),$u=useFiveInstance(),Tu=react$1.exports.useRef(null),Cu=react$1.exports.useRef(null),Pu=react$1.exports.useCallback(()=>{if(Cu.current=null,Tu.current){const Ru=parseWork(Tu.current);$u.load(Ru)}},[]),Bu=react$1.exports.useCallback(()=>{if(Tu.current){const Ru=parseWork(Tu.current);Object.assign(window,{$rawWork:Ru}),$u.load(Ru)}},[]),Lu=react$1.exports.useCallback(()=>{!Cu.current||$u.load(Cu.current)},[]);return react$1.exports.useEffect(()=>{const Ru=Ou=>{var Vu;Tu.current||(Tu.current=$u.work.raw.works);const Du=Ou.data;if(Du.work){Cu.current=parseWork(Du.work),$u.load(Cu.current);return}const Fu=(Vu=$u.work)==null?void 0:Vu.raw.works[0];if(Du.dynamic_scene&&!Du.panorama){const Nu=JSON.parse(Fu).panorama,Gu=Du.dynamic_scene.images.index;Nu.list[Gu]=Du.dynamic_scene.images,Du.panorama=Nu,delete Du.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Fu),$work2:Du,parseWork}),Cu.current=parseWork([Fu,Du]),$u.load(Cu.current)};return _u.on(VreoKeyframeEnum.UpdateVRPanorama,Ru),_u.on(VreoKeyframeEnum.Exit,Pu),_u.on("loaded",Pu),_u.on("paused",Bu),_u.on("playing",Lu),()=>{_u.off(VreoKeyframeEnum.UpdateVRPanorama,Ru),_u.off(VreoKeyframeEnum.Exit,Pu),_u.off("loaded",Pu),_u.off("paused",Bu),_u.off("playing",Lu)}},[]),jsx(Fragment,{})}const inlinePlay=_u=>{if(!_u)return;const $u=()=>{_u.removeEventListener("canplaythrough",$u);try{_u.play()}catch{}};_u.addEventListener("canplaythrough",$u),_u.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const _u=react$1.exports.useRef(null),$u=react$1.exports.useRef(),Tu=useController(),Cu=react$1.exports.useRef(),[Pu,Bu]=react$1.exports.useState(!1),Lu=useFiveInstance(),Ru=Ou=>{!$u.current||($u.current.src=Ou)};return react$1.exports.useEffect(()=>{const Ou=async Du=>{const{start:Fu,end:Vu}=Du,{videoSrc:ku,fov:Nu,direction:Gu,panoIndex:ju,vector:Hu}=Du.data,[Uu,zu]=(()=>{if(Hu)return[Hu.longitude,Hu.latitude];if(!Gu)return[0,0];let Wu=-Math.atan2(Gu.x,-Gu.z);Wu=(Wu%PI_2+PI_2)%PI_2;const Qu=-Math.asin(Gu.y/1);return[Wu,Qu]})();Lu.setState({fov:Nu,panoIndex:ju,longitude:Uu,latitude:zu},!0),Ru(ku),inlinePlay($u.current),Bu(!0),Cu.current=setTimeout(()=>{var Wu,Qu;(Wu=$u.current)!=null&&Wu.paused||(Qu=$u.current)==null||Qu.pause(),Bu(!1),Ru("")},Vu-Fu)};return Tu.on(VreoKeyframeEnum.VideoEffect,Ou),()=>{Tu.off(VreoKeyframeEnum.VideoEffect,Ou),Cu.current&&clearTimeout(Cu.current)}},[Tu]),react$1.exports.useEffect(()=>{var Du,Fu;if(!_u.current)return;const Ou=((Fu=(Du=Tu.configs)==null?void 0:Du.videos)==null?void 0:Fu.videoEffect)||document.createElement("video");Ou.setAttribute("playsinline","true"),Ou.setAttribute("webkit-playsinline","true"),Ou.setAttribute("autoplay","true"),Ou.setAttribute("key","VideoEffect-video"),Ou.setAttribute("class","VideoEffect-video"),$u.current=Ou,_u.current.append($u.current),document.addEventListener("WeixinJSBridgeReady",function(){var Vu;(Vu=$u.current)==null||Vu.play()},!1),_u.current},[]),jsx("div",{ref:_u,className:classNames("VideoEffect",{"VideoEffect--visible":Pu})})}const Preloader={blob:_u=>{const $u=()=>null;return new Promise((Tu,Cu)=>{const Pu=new XMLHttpRequest,Bu=()=>{Pu.ontimeout=$u,Pu.onreadystatechange=$u,Pu.onprogress=$u,Pu.onabort=$u};Pu.ontimeout=()=>{Cu(new Error("timeout")),Bu()},Pu.onreadystatechange=()=>{Pu.readyState===4&&(Pu.status===0&&!Pu.response||(Pu.status===200||Pu.status===0?(Tu(Pu.response),Bu()):(Cu(new Error("status:"+Pu.status)),Bu())))},Pu.open("GET",_u,!0),Pu.responseType="blob",Pu.send(null)})}};class AudioLike extends Subscribe{constructor({duration:Tu}={}){super();hm(this,"$timestamp",null);hm(this,"$currentTime",0);hm(this,"$duration",0);hm(this,"stopInterval");hm(this,"muted",!1);hm(this,"src","");Tu&&(this.$duration=Tu)}setAttribute(Tu,Cu){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Tu=performance.now();this.$currentTime+=Tu-this.$timestamp,this.$timestamp=Tu,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Tu){this.$currentTime=Tu*1e3}get duration(){return this.$duration}set duration(Tu){this.$duration=Tu}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Tu,Cu,Pu=!1){this.on(Tu,Cu)}removeEventListener(Tu,Cu,Pu=!1){this.off(Tu,Cu)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Tu,Cu,Pu,Bu,Lu={preload:!0}){var Nu,Gu;if(!Lu.videoInstance)if(cacheInstance.videoInstance)Lu.videoInstance=cacheInstance.videoInstance;else{const ju=document.createElement("video");ju.style.opacity="0",ju.style.pointerEvents="none",ju.style.display="none",document.body.append(ju),Lu.videoInstance=ju,cacheInstance.videoInstance=ju,ju.playsInline=!0,ju.controls=!1}const Ru=new PlaneGeometry(Tu,Cu,Pu,Bu),Ou=new VideoTexture(Lu.videoInstance),Du=new ShaderMaterial({uniforms:{map:{value:Ou},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Ru,Du);hm(this,"options");hm(this,"videoUrl");hm(this,"freeze");hm(this,"paused");hm(this,"audioInstance");hm(this,"audioLikeInstance");hm(this,"$removeEventListener");if(this.options=Lu,this.freeze=!1,this.paused=!0,Lu.audioInstance)this.audioInstance=Lu.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const ju=document.createElement("audio");ju.crossOrigin="",ju.muted=!1,ju.autoplay=!1,ju.style.display="none",document.body.appendChild(ju),this.audioInstance=ju,cacheInstance.audioInstance=ju}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Fu=ju=>runInAction(()=>this.paused=ju),Vu=()=>Fu(!0),ku=()=>Fu(!1);this.audioInstance.addEventListener("pause",Vu),this.audioInstance.addEventListener("play",ku),(Nu=this.options.videoInstance)==null||Nu.addEventListener("pause",Vu),(Gu=this.options.videoInstance)==null||Gu.addEventListener("play",ku),this.audioLikeInstance.addEventListener("pause",Vu),this.audioLikeInstance.addEventListener("play",ku),this.$removeEventListener=()=>{var ju,Hu;this.audioInstance.removeEventListener("pause",Vu),this.audioInstance.removeEventListener("play",ku),(ju=this.options.videoInstance)==null||ju.removeEventListener("pause",Vu),(Hu=this.options.videoInstance)==null||Hu.removeEventListener("play",ku),this.audioLikeInstance.removeEventListener("pause",Vu),this.audioLikeInstance.removeEventListener("play",ku)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Tu){if(this.videoUrl===Tu)return;this.videoUrl=Tu,this.freeze=!0,await this.mediaInstance.pause();const Cu=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Pu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Cu.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Pu,!1))};this.mediaInstance.addEventListener("timeupdate",Pu,!1)}async play(Tu="",Cu=0,Pu){return Tu=Tu||"",Pu&&!Tu?(this.currentTime&&(this.mediaInstance.currentTime=Cu),this.mediaInstance.duration=Pu,this.videoUrl="",this.mediaInstance.play(),!0):Tu?Tu===this.videoUrl?(this.mediaInstance.currentTime=Cu,await this.mediaInstance.play(),!0):(await this.update(Tu),this.mediaInstance.pause(),await new Promise(Bu=>setTimeout(async()=>{this.mediaInstance.currentTime=Cu,await this.mediaInstance.play(),Bu(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor($u,Tu){hm(this,"videoAgentMesh");hm(this,"scene",new Scene);hm(this,"camera",new OrthographicCamera(-240,240,135,-135));hm(this,"renderer",new WebGLRenderer({alpha:!0}));hm(this,"disposers",[]);hm(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});hm(this,"dispose",()=>{var $u;($u=this.videoAgentMesh)==null||$u.dispose(),this.disposers.forEach(Tu=>Tu==null?void 0:Tu())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Tu),$u){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Cu=this.renderer.domElement;Cu.classList.add("VideoAgent-canvas");const Pu=addResizeListener($u,(Bu,Lu)=>{this.renderer.setSize(Bu*window.devicePixelRatio,Lu*window.devicePixelRatio),Cu.style.width=`${Bu}px`,Cu.style.height=`${Lu}px`});this.disposers.push(Pu),$u.append(Cu),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(_u){var Bu;const $u=react$1.exports.useRef(null),Tu=useController(),Cu=react$1.exports.useMemo(()=>{var Lu;return((Lu=Tu.avatar)==null?void 0:Lu.url)&&Tu.avatar.force===!0},[Tu.avatar]),Pu=react$1.exports.useMemo(()=>{var Lu;return Cu?!1:((Lu=Tu.videoAgentScene)==null?void 0:Lu.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Tu.videoAgentScene,Cu]);return react$1.exports.useEffect(()=>{if(!$u.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Tu.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Lu=new VideoAgentScene($u.current,_u.options);return Tu.videoAgentScene=Lu,()=>{var Ru;Tu.dispose(),(Ru=Tu.videoAgentScene)==null||Ru.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Cu?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Bu=Tu.avatar)==null?void 0:Bu.url,onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Pu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:$u,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Lu;return(Lu=_u.onClick)==null?void 0:Lu.call(_u)}})})})})})]})}const blankAudioSrc="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",audioList=[];function getAudio(_u){let $u=audioList.find(Tu=>!Tu.realSrc||Tu.realSrc===blankAudioSrc);if(!$u){console.warn("\u672A\u627E\u5230\u7F13\u5B58\u97F3\u9891\uFF0C\u5DF2\u65B0\u5EFA",audioList);debugger;$u=new IAudio(blankAudioSrc),audioList.push($u)}return _u&&($u.src=_u),$u}async function waitForBlankAudioGenerated(_u=100,$u=2e3){console.log("waitForBlankAudioGenerated, needGenerate: ",audioList.some(Pu=>!Pu.ended&&Pu.src===blankAudioSrc));const Tu=Date.now();let Cu=!1;for(;audioList.some(Pu=>!Pu.ended&&Pu.src===blankAudioSrc)&&!Cu;){if(Date.now()-Tu>$u)return Cu=!0,Promise.resolve();await new Promise(Pu=>setTimeout(Pu,_u))}}function generateBlankAudio(_u){const $u=_u-audioList.length;if(!($u<=0))for(let Tu=0;Tu<$u;Tu++)audioList.push(new IAudio(blankAudioSrc))}function initAudio(_u){_u.inited||(_u.src&&(_u.inited=!0,_u.removeDocumentEventListener()),_u.src===blankAudioSrc&&_u.play())}class IAudio extends Audio{constructor(Tu){super(Tu);hm(this,"preload","auto");hm(this,"realSrc","");hm(this,"inited",!1);hm(this,"removeDocumentEventListener");this.realSrc=Tu!=null?Tu:"",super.addEventListener("ended",()=>{this.src=""});const Cu=()=>initAudio(this);document.addEventListener("click",Cu),document.addEventListener("touchstart",Cu),this.removeDocumentEventListener=()=>{document.removeEventListener("click",Cu),document.removeEventListener("touchstart",Cu)}}get src(){return super.src}set src(Tu){super.src=Tu,this.realSrc=Tu}}const DefaultAudioCacheLength=3;var nv,rv;const audioCacheLength=Number((rv=(nv=location.search.match(/audio_cache=(\d+)/))==null?void 0:nv[1])!=null?rv:DefaultAudioCacheLength);generateBlankAudio(audioCacheLength);function BgMusic(){const _u=useController();return react$1.exports.useEffect(()=>{const $u=async(Tu,Cu)=>{const{start:Pu,end:Bu}=Tu,Lu=(Cu-Pu)/1e3;if(Lu<0||Lu>=Tu.end-Tu.start)return;const Ru=getAudio(Tu.data.url);Ru.currentTime=Math.max(0,Lu),console.log("play",Ru.src),Ru.play();const Ou=()=>{Ru.pause(),Ru.src=""};Ru.addEventListener("ended",()=>{Ou()}),_u.once("paused",()=>{Ou()})};return _u.on(VreoKeyframeEnum.BgMusic,$u),()=>{_u.off(VreoKeyframeEnum.BgMusic,$u)}}),jsx(Fragment,{})}const prefix="https://vr-public.realsee-cdn.cn/release/static/image/release/",WAVES={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},userAgent=typeof navigator!="undefined"?navigator.userAgent:"",isAppleDevice=/(iPhone|iPad|iPod)/i.test(userAgent),isSafari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)&&/version/i.test(userAgent),isMicroMessenger=/microMessenger/i.test(userAgent),canPlayHevc=isAppleDevice||isSafari,canPlayVp9=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function Wave(_u){const $u=React.useMemo(()=>{var Bu;const Pu=(Bu=_u==null?void 0:_u.appearance)!=null?Bu:"solid";return WAVES[Pu]},[_u==null?void 0:_u.appearance]),Tu=React.useMemo(()=>$u.height/$u.width,[$u]);let Cu=null;return isMicroMessenger?Cu=jsx(KeyframeWaveContent,{wave:$u}):canPlayHevc?Cu=jsx(VideoWaveContent,{format:"hevc",wave:$u}):canPlayVp9?Cu=jsx(VideoWaveContent,{format:"vp9",wave:$u}):Cu=jsx(KeyframeWaveContent,{wave:$u}),jsx("div",{className:"vreo-wave",children:jsx("div",{style:{position:"relative",width:"100%",paddingTop:`${Tu*100}%`},children:jsx("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0},children:Cu})})})}const VideoWaveContent=({wave:_u,format:$u})=>{const Tu=react$1.exports.useRef(null),[Cu,Pu]=react$1.exports.useState(!1),[Bu,Lu]=react$1.exports.useState(!1),Ru=prefix+_u[$u];react$1.exports.useEffect(()=>{Pu(!1)},[Ru]);const Ou=react$1.exports.useCallback(()=>{Tu.current&&Tu.current.play(),Pu(!0)},[]),Du=react$1.exports.useCallback(()=>{Lu(!0)},[]);return Bu?jsx(KeyframeWaveContent,{wave:_u}):jsx("video",{style:{opacity:Cu?1:0},preload:"auto",ref:Tu,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:Ou,onError:Du,muted:!0,loop:!0,src:Ru})},KeyframeWaveContent=({wave:_u})=>{const $u=prefix+_u.png;return jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${$u})`,backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:`steps(${_u.frames-1})`,animationDuration:`${_u.frames/25}s`,animationIterationCount:"infinite"}})},AppView=observer(({controller:_u})=>{var $u,Tu;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!_u.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[_u.waveAppearance&&jsx(Wave,{appearance:_u.waveAppearance}),jsx(VideoAgent,{onClick:()=>{_u.playing?_u.setPlaying(!1):_u.setPlaying(!0)},options:(($u=_u.configs)==null?void 0:$u.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Tu=_u.configs)==null?void 0:Tu.customPanelChildren]})})});function App(){const _u=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:_u})]})}const DrawerView=observer(({controller:_u})=>{var Cu;const $u="400px",Tu=(()=>{var Bu;const Pu=(Bu=_u.drawerConfig)==null?void 0:Bu.height;return Pu?typeof Pu=="number"?Pu+"px":Pu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":_u.drawerConfig&&_u.drawerConfig.content}),onClick:()=>_u.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Tu,maxHeight:$u},children:((Cu=_u.drawerConfig)==null?void 0:Cu.content)||""})})});function Drawer(){const _u=useController();return jsx(DrawerView,{controller:_u})}const PopUpView=observer(({controller:_u})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":_u.popUp}),onClick:()=>_u.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:_u.popUp||""})}));function PopUp(){const _u=useController();return jsx(PopUpView,{controller:_u})}class Player extends Subscribe{constructor(Tu,Cu={}){var Pu;super();hm(this,"$five");hm(this,"controller");hm(this,"configs");if(this.$five=Tu,Cu.container||(Cu.container=Cu.containter),!Cu.container){const Bu=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Bu),Bu.setAttribute("id","vreo-app"),Cu.container=Bu;const Lu=(Pu=Tu.getElement())==null?void 0:Pu.parentNode;Lu?Lu.append(Bu):document.body.append(Bu)}Cu.container.classList.contains("vreo-app")||Cu.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Cu)),this.controller=new Controller({five:Tu,container:Cu.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Bu,Lu)=>jsx(Bu,{subscribe:{on:(Ru,Ou)=>this.on(Ru,Ou),once:(Ru,Ou)=>this.once(Ru,Ou),off:(Ru,Ou)=>this.off(Ru,Ou)},five:Tu},Lu))]}),Cu.container),reaction(()=>this.controller.ended,Bu=>{Bu&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Bu=>{this.controller.ended||this.emit(Bu?"playing":"paused")})}async load(Tu,Cu=0,Pu=!1,Bu=!1){var Lu,Ru,Ou,Du;if(this.controller.clear(),this.controller.setLoading(!0),Bu&&(Tu=JSON.parse(JSON.stringify(Tu))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(Fu=>{setTimeout(()=>Fu(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Tu,(Lu=this.controller.mediaInstance)==null||Lu.pause(),this.$five.imageOptions.size&&((Ru=this.configs.imageOptions)==null?void 0:Ru.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Pu||Pu===void 0&&this.configs.autoPreload){const Fu=Tu.keyframes.filter(ku=>!(ku.type!==VreoKeyframeEnum.CameraMovement||ku.data.panoIndex===void 0)).reduce((ku,Nu)=>{const Gu=Nu.data.panoIndex;return ku[Gu]||(ku[Gu]=!0),ku},{}),Vu=Object.keys(Fu);for(let ku=0;ku<Vu.length;ku++)await this.$five.preloadPano(Number(Vu[ku]))}return this.emit("loaded",Tu),this.controller.emit("loaded",Tu),(Ou=this.controller.videoAgentScene)!=null&&Ou.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Cu/1e3),this.controller.setAvatar(Tu.video.avatar),await waitForBlankAudioGenerated(),await((Du=this.controller.videoAgentScene)==null?void 0:Du.videoAgentMesh.play(Tu.video.url,Cu/1e3,Tu.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Fu,Vu)=>this.emit(Fu,Vu,this.controller.currentTime)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Tu){var Cu;return this.controller.playing||(Tu&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Tu/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setEnded(!1),this.controller.setPlaying(!0),(Cu=this.controller.vreoUnit)==null||Cu.keyframes.forEach(Pu=>{Pu.type===VreoKeyframeEnum.BgMusic&&(Pu.parsed=!1)})),!0}setAppearance(Tu){this.controller.setAppearance(Tu)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`
    \u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
    \u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
    \u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
    \u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
