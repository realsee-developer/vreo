var Ax=Object.defineProperty;var bx=(Cu,Tu,Pu)=>Tu in Cu?Ax(Cu,Tu,{enumerable:!0,configurable:!0,writable:!0,value:Pu}):Cu[Tu]=Pu;var Cm=(Cu,Tu,Pu)=>(bx(Cu,typeof Tu!="symbol"?Tu+"":Tu,Pu),Pu);const p$4=function(){const Tu=document.createElement("link").relList;if(Tu&&Tu.supports&&Tu.supports("modulepreload"))return;for(const Lu of document.querySelectorAll('link[rel="modulepreload"]'))Bu(Lu);new MutationObserver(Lu=>{for(const Ru of Lu)if(Ru.type==="childList")for(const Ou of Ru.addedNodes)Ou.tagName==="LINK"&&Ou.rel==="modulepreload"&&Bu(Ou)}).observe(document,{childList:!0,subtree:!0});function Pu(Lu){const Ru={};return Lu.integrity&&(Ru.integrity=Lu.integrity),Lu.referrerpolicy&&(Ru.referrerPolicy=Lu.referrerpolicy),Lu.crossorigin==="use-credentials"?Ru.credentials="include":Lu.crossorigin==="anonymous"?Ru.credentials="omit":Ru.credentials="same-origin",Ru}function Bu(Lu){if(Lu.ep)return;Lu.ep=!0;const Ru=Pu(Lu);fetch(Lu.href,Ru)}};p$4();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(Cu){if(Cu.__esModule)return Cu;var Tu=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(Cu).forEach(function(Pu){var Bu=Object.getOwnPropertyDescriptor(Cu,Pu);Object.defineProperty(Tu,Pu,Bu.get?Bu:{enumerable:!0,get:function(){return Cu[Pu]}})}),Tu}var react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(Cu){if(Cu==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Cu)}function shouldUseNative(){try{if(!Object.assign)return!1;var Cu=new String("abc");if(Cu[5]="de",Object.getOwnPropertyNames(Cu)[0]==="5")return!1;for(var Tu={},Pu=0;Pu<10;Pu++)Tu["_"+String.fromCharCode(Pu)]=Pu;var Bu=Object.getOwnPropertyNames(Tu).map(function(Ru){return Tu[Ru]});if(Bu.join("")!=="0123456789")return!1;var Lu={};return"abcdefghijklmnopqrst".split("").forEach(function(Ru){Lu[Ru]=Ru}),Object.keys(Object.assign({},Lu)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(Cu,Tu){for(var Pu,Bu=toObject(Cu),Lu,Ru=1;Ru<arguments.length;Ru++){Pu=Object(arguments[Ru]);for(var Ou in Pu)hasOwnProperty.call(Pu,Ou)&&(Bu[Ou]=Pu[Ou]);if(getOwnPropertySymbols){Lu=getOwnPropertySymbols(Pu);for(var Du=0;Du<Lu.length;Du++)propIsEnumerable.call(Pu,Lu[Du])&&(Bu[Lu[Du]]=Pu[Lu[Du]])}}return Bu};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=objectAssign,n$5=typeof Symbol=="function"&&Symbol.for,p$3=n$5?Symbol.for("react.element"):60103,q$3=n$5?Symbol.for("react.portal"):60106,r$5=n$5?Symbol.for("react.fragment"):60107,t$4=n$5?Symbol.for("react.strict_mode"):60108,u$4=n$5?Symbol.for("react.profiler"):60114,v$4=n$5?Symbol.for("react.provider"):60109,w$3=n$5?Symbol.for("react.context"):60110,x$2=n$5?Symbol.for("react.forward_ref"):60112,y$3=n$5?Symbol.for("react.suspense"):60113,z$1=n$5?Symbol.for("react.memo"):60115,A$3=n$5?Symbol.for("react.lazy"):60116,B$3=typeof Symbol=="function"&&Symbol.iterator;function C$5(Cu){for(var Tu="https://reactjs.org/docs/error-decoder.html?invariant="+Cu,Pu=1;Pu<arguments.length;Pu++)Tu+="&args[]="+encodeURIComponent(arguments[Pu]);return"Minified React error #"+Cu+"; visit "+Tu+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E$4={};function F$4(Cu,Tu,Pu){this.props=Cu,this.context=Tu,this.refs=E$4,this.updater=Pu||D$2}F$4.prototype.isReactComponent={};F$4.prototype.setState=function(Cu,Tu){if(typeof Cu!="object"&&typeof Cu!="function"&&Cu!=null)throw Error(C$5(85));this.updater.enqueueSetState(this,Cu,Tu,"setState")};F$4.prototype.forceUpdate=function(Cu){this.updater.enqueueForceUpdate(this,Cu,"forceUpdate")};function G$3(){}G$3.prototype=F$4.prototype;function H$4(Cu,Tu,Pu){this.props=Cu,this.context=Tu,this.refs=E$4,this.updater=Pu||D$2}var I$3=H$4.prototype=new G$3;I$3.constructor=H$4;l$4(I$3,F$4.prototype);I$3.isPureReactComponent=!0;var J$3={current:null},K$3=Object.prototype.hasOwnProperty,L$5={key:!0,ref:!0,__self:!0,__source:!0};function M$4(Cu,Tu,Pu){var Bu,Lu={},Ru=null,Ou=null;if(Tu!=null)for(Bu in Tu.ref!==void 0&&(Ou=Tu.ref),Tu.key!==void 0&&(Ru=""+Tu.key),Tu)K$3.call(Tu,Bu)&&!L$5.hasOwnProperty(Bu)&&(Lu[Bu]=Tu[Bu]);var Du=arguments.length-2;if(Du===1)Lu.children=Pu;else if(1<Du){for(var ku=Array(Du),Fu=0;Fu<Du;Fu++)ku[Fu]=arguments[Fu+2];Lu.children=ku}if(Cu&&Cu.defaultProps)for(Bu in Du=Cu.defaultProps,Du)Lu[Bu]===void 0&&(Lu[Bu]=Du[Bu]);return{$$typeof:p$3,type:Cu,key:Ru,ref:Ou,props:Lu,_owner:J$3.current}}function N$4(Cu,Tu){return{$$typeof:p$3,type:Cu.type,key:Tu,ref:Cu.ref,props:Cu.props,_owner:Cu._owner}}function O$4(Cu){return typeof Cu=="object"&&Cu!==null&&Cu.$$typeof===p$3}function escape$1(Cu){var Tu={"=":"=0",":":"=2"};return"$"+(""+Cu).replace(/[=:]/g,function(Pu){return Tu[Pu]})}var P$4=/\/+/g,Q$4=[];function R$5(Cu,Tu,Pu,Bu){if(Q$4.length){var Lu=Q$4.pop();return Lu.result=Cu,Lu.keyPrefix=Tu,Lu.func=Pu,Lu.context=Bu,Lu.count=0,Lu}return{result:Cu,keyPrefix:Tu,func:Pu,context:Bu,count:0}}function S$3(Cu){Cu.result=null,Cu.keyPrefix=null,Cu.func=null,Cu.context=null,Cu.count=0,10>Q$4.length&&Q$4.push(Cu)}function T$2(Cu,Tu,Pu,Bu){var Lu=typeof Cu;(Lu==="undefined"||Lu==="boolean")&&(Cu=null);var Ru=!1;if(Cu===null)Ru=!0;else switch(Lu){case"string":case"number":Ru=!0;break;case"object":switch(Cu.$$typeof){case p$3:case q$3:Ru=!0}}if(Ru)return Pu(Bu,Cu,Tu===""?"."+U$3(Cu,0):Tu),1;if(Ru=0,Tu=Tu===""?".":Tu+":",Array.isArray(Cu))for(var Ou=0;Ou<Cu.length;Ou++){Lu=Cu[Ou];var Du=Tu+U$3(Lu,Ou);Ru+=T$2(Lu,Du,Pu,Bu)}else if(Cu===null||typeof Cu!="object"?Du=null:(Du=B$3&&Cu[B$3]||Cu["@@iterator"],Du=typeof Du=="function"?Du:null),typeof Du=="function")for(Cu=Du.call(Cu),Ou=0;!(Lu=Cu.next()).done;)Lu=Lu.value,Du=Tu+U$3(Lu,Ou++),Ru+=T$2(Lu,Du,Pu,Bu);else if(Lu==="object")throw Pu=""+Cu,Error(C$5(31,Pu==="[object Object]"?"object with keys {"+Object.keys(Cu).join(", ")+"}":Pu,""));return Ru}function V$3(Cu,Tu,Pu){return Cu==null?0:T$2(Cu,"",Tu,Pu)}function U$3(Cu,Tu){return typeof Cu=="object"&&Cu!==null&&Cu.key!=null?escape$1(Cu.key):Tu.toString(36)}function W$5(Cu,Tu){Cu.func.call(Cu.context,Tu,Cu.count++)}function aa$3(Cu,Tu,Pu){var Bu=Cu.result,Lu=Cu.keyPrefix;Cu=Cu.func.call(Cu.context,Tu,Cu.count++),Array.isArray(Cu)?X$3(Cu,Bu,Pu,function(Ru){return Ru}):Cu!=null&&(O$4(Cu)&&(Cu=N$4(Cu,Lu+(!Cu.key||Tu&&Tu.key===Cu.key?"":(""+Cu.key).replace(P$4,"$&/")+"/")+Pu)),Bu.push(Cu))}function X$3(Cu,Tu,Pu,Bu,Lu){var Ru="";Pu!=null&&(Ru=(""+Pu).replace(P$4,"$&/")+"/"),Tu=R$5(Tu,Ru,Bu,Lu),V$3(Cu,aa$3,Tu),S$3(Tu)}var Y$3={current:null};function Z$3(){var Cu=Y$3.current;if(Cu===null)throw Error(C$5(321));return Cu}var ba$3={ReactCurrentDispatcher:Y$3,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J$3,IsSomeRendererActing:{current:!1},assign:l$4};react_production_min.Children={map:function(Cu,Tu,Pu){if(Cu==null)return Cu;var Bu=[];return X$3(Cu,Bu,null,Tu,Pu),Bu},forEach:function(Cu,Tu,Pu){if(Cu==null)return Cu;Tu=R$5(null,null,Tu,Pu),V$3(Cu,W$5,Tu),S$3(Tu)},count:function(Cu){return V$3(Cu,function(){return null},null)},toArray:function(Cu){var Tu=[];return X$3(Cu,Tu,null,function(Pu){return Pu}),Tu},only:function(Cu){if(!O$4(Cu))throw Error(C$5(143));return Cu}};react_production_min.Component=F$4;react_production_min.Fragment=r$5;react_production_min.Profiler=u$4;react_production_min.PureComponent=H$4;react_production_min.StrictMode=t$4;react_production_min.Suspense=y$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba$3;react_production_min.cloneElement=function(Cu,Tu,Pu){if(Cu==null)throw Error(C$5(267,Cu));var Bu=l$4({},Cu.props),Lu=Cu.key,Ru=Cu.ref,Ou=Cu._owner;if(Tu!=null){if(Tu.ref!==void 0&&(Ru=Tu.ref,Ou=J$3.current),Tu.key!==void 0&&(Lu=""+Tu.key),Cu.type&&Cu.type.defaultProps)var Du=Cu.type.defaultProps;for(ku in Tu)K$3.call(Tu,ku)&&!L$5.hasOwnProperty(ku)&&(Bu[ku]=Tu[ku]===void 0&&Du!==void 0?Du[ku]:Tu[ku])}var ku=arguments.length-2;if(ku===1)Bu.children=Pu;else if(1<ku){Du=Array(ku);for(var Fu=0;Fu<ku;Fu++)Du[Fu]=arguments[Fu+2];Bu.children=Du}return{$$typeof:p$3,type:Cu.type,key:Lu,ref:Ru,props:Bu,_owner:Ou}};react_production_min.createContext=function(Cu,Tu){return Tu===void 0&&(Tu=null),Cu={$$typeof:w$3,_calculateChangedBits:Tu,_currentValue:Cu,_currentValue2:Cu,_threadCount:0,Provider:null,Consumer:null},Cu.Provider={$$typeof:v$4,_context:Cu},Cu.Consumer=Cu};react_production_min.createElement=M$4;react_production_min.createFactory=function(Cu){var Tu=M$4.bind(null,Cu);return Tu.type=Cu,Tu};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(Cu){return{$$typeof:x$2,render:Cu}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(Cu){return{$$typeof:A$3,_ctor:Cu,_status:-1,_result:null}};react_production_min.memo=function(Cu,Tu){return{$$typeof:z$1,type:Cu,compare:Tu===void 0?null:Tu}};react_production_min.useCallback=function(Cu,Tu){return Z$3().useCallback(Cu,Tu)};react_production_min.useContext=function(Cu,Tu){return Z$3().useContext(Cu,Tu)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(Cu,Tu){return Z$3().useEffect(Cu,Tu)};react_production_min.useImperativeHandle=function(Cu,Tu,Pu){return Z$3().useImperativeHandle(Cu,Tu,Pu)};react_production_min.useLayoutEffect=function(Cu,Tu){return Z$3().useLayoutEffect(Cu,Tu)};react_production_min.useMemo=function(Cu,Tu){return Z$3().useMemo(Cu,Tu)};react_production_min.useReducer=function(Cu,Tu,Pu){return Z$3().useReducer(Cu,Tu,Pu)};react_production_min.useRef=function(Cu){return Z$3().useRef(Cu)};react_production_min.useState=function(Cu){return Z$3().useState(Cu)};react_production_min.version="16.14.0";react$1.exports=react_production_min;var React=react$1.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(Cu){var Tu,Pu,Bu,Lu,Ru;if(typeof window=="undefined"||typeof MessageChannel!="function"){var Ou=null,Du=null,ku=function(){if(Ou!==null)try{var Rp=Cu.unstable_now();Ou(!0,Rp),Ou=null}catch(Gp){throw setTimeout(ku,0),Gp}},Fu=Date.now();Cu.unstable_now=function(){return Date.now()-Fu},Tu=function(Rp){Ou!==null?setTimeout(Tu,0,Rp):(Ou=Rp,setTimeout(ku,0))},Pu=function(Rp,Gp){Du=setTimeout(Rp,Gp)},Bu=function(){clearTimeout(Du)},Lu=function(){return!1},Ru=Cu.unstable_forceFrameRate=function(){}}else{var Nu=window.performance,Gu=window.Date,zu=window.setTimeout,Hu=window.clearTimeout;if(typeof console!="undefined"){var Wu=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof Wu!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof Nu=="object"&&typeof Nu.now=="function")Cu.unstable_now=function(){return Nu.now()};else{var _h=Gu.now();Cu.unstable_now=function(){return Gu.now()-_h}}var Xc=!1,ju=null,_c=-1,_f=5,ep=0;Lu=function(){return Cu.unstable_now()>=ep},Ru=function(){},Cu.unstable_forceFrameRate=function(Rp){0>Rp||125<Rp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_f=0<Rp?Math.floor(1e3/Rp):5};var tp=new MessageChannel,op=tp.port2;tp.port1.onmessage=function(){if(ju!==null){var Rp=Cu.unstable_now();ep=Rp+_f;try{ju(!0,Rp)?op.postMessage(null):(Xc=!1,ju=null)}catch(Gp){throw op.postMessage(null),Gp}}else Xc=!1},Tu=function(Rp){ju=Rp,Xc||(Xc=!0,op.postMessage(null))},Pu=function(Rp,Gp){_c=zu(function(){Rp(Cu.unstable_now())},Gp)},Bu=function(){Hu(_c),_c=-1}}function lp(Rp,Gp){var kp=Rp.length;Rp.push(Gp);e:for(;;){var gp=kp-1>>>1,mp=Rp[gp];if(mp!==void 0&&0<np(mp,Gp))Rp[gp]=Gp,Rp[kp]=mp,kp=gp;else break e}}function up(Rp){return Rp=Rp[0],Rp===void 0?null:Rp}function hp(Rp){var Gp=Rp[0];if(Gp!==void 0){var kp=Rp.pop();if(kp!==Gp){Rp[0]=kp;e:for(var gp=0,mp=Rp.length;gp<mp;){var Sp=2*(gp+1)-1,xp=Rp[Sp],Ep=Sp+1,$p=Rp[Ep];if(xp!==void 0&&0>np(xp,kp))$p!==void 0&&0>np($p,xp)?(Rp[gp]=$p,Rp[Ep]=kp,gp=Ep):(Rp[gp]=xp,Rp[Sp]=kp,gp=Sp);else if($p!==void 0&&0>np($p,kp))Rp[gp]=$p,Rp[Ep]=kp,gp=Ep;else break e}}return Gp}return null}function np(Rp,Gp){var kp=Rp.sortIndex-Gp.sortIndex;return kp!==0?kp:Rp.id-Gp.id}var rp=[],ip=[],ap=1,sp=null,cp=3,dp=!1,fp=!1,vp=!1;function _p(Rp){for(var Gp=up(ip);Gp!==null;){if(Gp.callback===null)hp(ip);else if(Gp.startTime<=Rp)hp(ip),Gp.sortIndex=Gp.expirationTime,lp(rp,Gp);else break;Gp=up(ip)}}function wp(Rp){if(vp=!1,_p(Rp),!fp)if(up(rp)!==null)fp=!0,Tu(Dp);else{var Gp=up(ip);Gp!==null&&Pu(wp,Gp.startTime-Rp)}}function Dp(Rp,Gp){fp=!1,vp&&(vp=!1,Bu()),dp=!0;var kp=cp;try{for(_p(Gp),sp=up(rp);sp!==null&&(!(sp.expirationTime>Gp)||Rp&&!Lu());){var gp=sp.callback;if(gp!==null){sp.callback=null,cp=sp.priorityLevel;var mp=gp(sp.expirationTime<=Gp);Gp=Cu.unstable_now(),typeof mp=="function"?sp.callback=mp:sp===up(rp)&&hp(rp),_p(Gp)}else hp(rp);sp=up(rp)}if(sp!==null)var Sp=!0;else{var xp=up(ip);xp!==null&&Pu(wp,xp.startTime-Gp),Sp=!1}return Sp}finally{sp=null,cp=kp,dp=!1}}function Pp(Rp){switch(Rp){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Wp=Ru;Cu.unstable_IdlePriority=5,Cu.unstable_ImmediatePriority=1,Cu.unstable_LowPriority=4,Cu.unstable_NormalPriority=3,Cu.unstable_Profiling=null,Cu.unstable_UserBlockingPriority=2,Cu.unstable_cancelCallback=function(Rp){Rp.callback=null},Cu.unstable_continueExecution=function(){fp||dp||(fp=!0,Tu(Dp))},Cu.unstable_getCurrentPriorityLevel=function(){return cp},Cu.unstable_getFirstCallbackNode=function(){return up(rp)},Cu.unstable_next=function(Rp){switch(cp){case 1:case 2:case 3:var Gp=3;break;default:Gp=cp}var kp=cp;cp=Gp;try{return Rp()}finally{cp=kp}},Cu.unstable_pauseExecution=function(){},Cu.unstable_requestPaint=Wp,Cu.unstable_runWithPriority=function(Rp,Gp){switch(Rp){case 1:case 2:case 3:case 4:case 5:break;default:Rp=3}var kp=cp;cp=Rp;try{return Gp()}finally{cp=kp}},Cu.unstable_scheduleCallback=function(Rp,Gp,kp){var gp=Cu.unstable_now();if(typeof kp=="object"&&kp!==null){var mp=kp.delay;mp=typeof mp=="number"&&0<mp?gp+mp:gp,kp=typeof kp.timeout=="number"?kp.timeout:Pp(Rp)}else kp=Pp(Rp),mp=gp;return kp=mp+kp,Rp={id:ap++,callback:Gp,priorityLevel:Rp,startTime:mp,expirationTime:kp,sortIndex:-1},mp>gp?(Rp.sortIndex=mp,lp(ip,Rp),up(rp)===null&&Rp===up(ip)&&(vp?Bu():vp=!0,Pu(wp,mp-gp))):(Rp.sortIndex=kp,lp(rp,Rp),fp||dp||(fp=!0,Tu(Dp))),Rp},Cu.unstable_shouldYield=function(){var Rp=Cu.unstable_now();_p(Rp);var Gp=up(rp);return Gp!==sp&&sp!==null&&Gp!==null&&Gp.callback!==null&&Gp.startTime<=Rp&&Gp.expirationTime<sp.expirationTime||Lu()},Cu.unstable_wrapCallback=function(Rp){var Gp=cp;return function(){var kp=cp;cp=Gp;try{return Rp.apply(this,arguments)}finally{cp=kp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=react$1.exports,n$4=objectAssign,r$4=scheduler.exports;function u$3(Cu){for(var Tu="https://reactjs.org/docs/error-decoder.html?invariant="+Cu,Pu=1;Pu<arguments.length;Pu++)Tu+="&args[]="+encodeURIComponent(arguments[Pu]);return"Minified React error #"+Cu+"; visit "+Tu+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$2)throw Error(u$3(227));function ba$2(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){var Fu=Array.prototype.slice.call(arguments,3);try{Tu.apply(Pu,Fu)}catch(Nu){this.onError(Nu)}}var da$2=!1,ea$2=null,fa$2=!1,ha$2=null,ia$2={onError:function(Cu){da$2=!0,ea$2=Cu}};function ja$1(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){da$2=!1,ea$2=null,ba$2.apply(ia$2,arguments)}function ka$1(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){if(ja$1.apply(this,arguments),da$2){if(da$2){var Fu=ea$2;da$2=!1,ea$2=null}else throw Error(u$3(198));fa$2||(fa$2=!0,ha$2=Fu)}}var la$1=null,ma$1=null,na$1=null;function oa$1(Cu,Tu,Pu){var Bu=Cu.type||"unknown-event";Cu.currentTarget=na$1(Pu),ka$1(Bu,Tu,void 0,Cu),Cu.currentTarget=null}var pa$1=null,qa$2={};function ra$1(){if(pa$1)for(var Cu in qa$2){var Tu=qa$2[Cu],Pu=pa$1.indexOf(Cu);if(!(-1<Pu))throw Error(u$3(96,Cu));if(!sa$1[Pu]){if(!Tu.extractEvents)throw Error(u$3(97,Cu));sa$1[Pu]=Tu,Pu=Tu.eventTypes;for(var Bu in Pu){var Lu=void 0,Ru=Pu[Bu],Ou=Tu,Du=Bu;if(ta$1.hasOwnProperty(Du))throw Error(u$3(99,Du));ta$1[Du]=Ru;var ku=Ru.phasedRegistrationNames;if(ku){for(Lu in ku)ku.hasOwnProperty(Lu)&&ua$1(ku[Lu],Ou,Du);Lu=!0}else Ru.registrationName?(ua$1(Ru.registrationName,Ou,Du),Lu=!0):Lu=!1;if(!Lu)throw Error(u$3(98,Bu,Cu))}}}}function ua$1(Cu,Tu,Pu){if(va$1[Cu])throw Error(u$3(100,Cu));va$1[Cu]=Tu,wa$1[Cu]=Tu.eventTypes[Pu].dependencies}var sa$1=[],ta$1={},va$1={},wa$1={};function xa$1(Cu){var Tu=!1,Pu;for(Pu in Cu)if(Cu.hasOwnProperty(Pu)){var Bu=Cu[Pu];if(!qa$2.hasOwnProperty(Pu)||qa$2[Pu]!==Bu){if(qa$2[Pu])throw Error(u$3(102,Pu));qa$2[Pu]=Bu,Tu=!0}}Tu&&ra$1()}var ya$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),za$1=null,Aa$1=null,Ba$1=null;function Ca$1(Cu){if(Cu=ma$1(Cu)){if(typeof za$1!="function")throw Error(u$3(280));var Tu=Cu.stateNode;Tu&&(Tu=la$1(Tu),za$1(Cu.stateNode,Cu.type,Tu))}}function Da$1(Cu){Aa$1?Ba$1?Ba$1.push(Cu):Ba$1=[Cu]:Aa$1=Cu}function Ea$1(){if(Aa$1){var Cu=Aa$1,Tu=Ba$1;if(Ba$1=Aa$1=null,Ca$1(Cu),Tu)for(Cu=0;Cu<Tu.length;Cu++)Ca$1(Tu[Cu])}}function Fa$2(Cu,Tu){return Cu(Tu)}function Ga$2(Cu,Tu,Pu,Bu,Lu){return Cu(Tu,Pu,Bu,Lu)}function Ha$2(){}var Ia$1=Fa$2,Ja$2=!1,Ka$2=!1;function La$1(){(Aa$1!==null||Ba$1!==null)&&(Ha$2(),Ea$1())}function Ma$1(Cu,Tu,Pu){if(Ka$2)return Cu(Tu,Pu);Ka$2=!0;try{return Ia$1(Cu,Tu,Pu)}finally{Ka$2=!1,La$1()}}var Na$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa$1=Object.prototype.hasOwnProperty,Pa$1={},Qa$2={};function Ra$1(Cu){return Oa$1.call(Qa$2,Cu)?!0:Oa$1.call(Pa$1,Cu)?!1:Na$2.test(Cu)?Qa$2[Cu]=!0:(Pa$1[Cu]=!0,!1)}function Sa$1(Cu,Tu,Pu,Bu){if(Pu!==null&&Pu.type===0)return!1;switch(typeof Tu){case"function":case"symbol":return!0;case"boolean":return Bu?!1:Pu!==null?!Pu.acceptsBooleans:(Cu=Cu.toLowerCase().slice(0,5),Cu!=="data-"&&Cu!=="aria-");default:return!1}}function Ta$1(Cu,Tu,Pu,Bu){if(Tu===null||typeof Tu=="undefined"||Sa$1(Cu,Tu,Pu,Bu))return!0;if(Bu)return!1;if(Pu!==null)switch(Pu.type){case 3:return!Tu;case 4:return Tu===!1;case 5:return isNaN(Tu);case 6:return isNaN(Tu)||1>Tu}return!1}function v$3(Cu,Tu,Pu,Bu,Lu,Ru){this.acceptsBooleans=Tu===2||Tu===3||Tu===4,this.attributeName=Bu,this.attributeNamespace=Lu,this.mustUseProperty=Pu,this.propertyName=Cu,this.type=Tu,this.sanitizeURL=Ru}var C$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Cu){C$4[Cu]=new v$3(Cu,0,!1,Cu,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Cu){var Tu=Cu[0];C$4[Tu]=new v$3(Tu,1,!1,Cu[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,2,!1,Cu.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,2,!1,Cu,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Cu){C$4[Cu]=new v$3(Cu,3,!1,Cu.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,3,!0,Cu,null,!1)});["capture","download"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,4,!1,Cu,null,!1)});["cols","rows","size","span"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,6,!1,Cu,null,!1)});["rowSpan","start"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,5,!1,Cu.toLowerCase(),null,!1)});var Ua$2=/[\-:]([a-z])/g;function Va$2(Cu){return Cu[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Cu){var Tu=Cu.replace(Ua$2,Va$2);C$4[Tu]=new v$3(Tu,1,!1,Cu,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Cu){var Tu=Cu.replace(Ua$2,Va$2);C$4[Tu]=new v$3(Tu,1,!1,Cu,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(Cu){var Tu=Cu.replace(Ua$2,Va$2);C$4[Tu]=new v$3(Tu,1,!1,Cu,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,1,!1,Cu.toLowerCase(),null,!1)});C$4.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(Cu){C$4[Cu]=new v$3(Cu,1,!1,Cu.toLowerCase(),null,!0)});var Wa$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa$2.hasOwnProperty("ReactCurrentDispatcher")||(Wa$2.ReactCurrentDispatcher={current:null});Wa$2.hasOwnProperty("ReactCurrentBatchConfig")||(Wa$2.ReactCurrentBatchConfig={suspense:null});function Xa$2(Cu,Tu,Pu,Bu){var Lu=C$4.hasOwnProperty(Tu)?C$4[Tu]:null,Ru=Lu!==null?Lu.type===0:Bu?!1:!(!(2<Tu.length)||Tu[0]!=="o"&&Tu[0]!=="O"||Tu[1]!=="n"&&Tu[1]!=="N");Ru||(Ta$1(Tu,Pu,Lu,Bu)&&(Pu=null),Bu||Lu===null?Ra$1(Tu)&&(Pu===null?Cu.removeAttribute(Tu):Cu.setAttribute(Tu,""+Pu)):Lu.mustUseProperty?Cu[Lu.propertyName]=Pu===null?Lu.type===3?!1:"":Pu:(Tu=Lu.attributeName,Bu=Lu.attributeNamespace,Pu===null?Cu.removeAttribute(Tu):(Lu=Lu.type,Pu=Lu===3||Lu===4&&Pu===!0?"":""+Pu,Bu?Cu.setAttributeNS(Bu,Tu,Pu):Cu.setAttribute(Tu,Pu))))}var Ya$2=/^(.*)[\\\/]/,E$3=typeof Symbol=="function"&&Symbol.for,Za$2=E$3?Symbol.for("react.element"):60103,$a$2=E$3?Symbol.for("react.portal"):60106,ab$1=E$3?Symbol.for("react.fragment"):60107,bb$1=E$3?Symbol.for("react.strict_mode"):60108,cb$1=E$3?Symbol.for("react.profiler"):60114,db$1=E$3?Symbol.for("react.provider"):60109,eb$1=E$3?Symbol.for("react.context"):60110,fb$1=E$3?Symbol.for("react.concurrent_mode"):60111,gb$1=E$3?Symbol.for("react.forward_ref"):60112,hb$1=E$3?Symbol.for("react.suspense"):60113,ib$1=E$3?Symbol.for("react.suspense_list"):60120,jb$1=E$3?Symbol.for("react.memo"):60115,kb$1=E$3?Symbol.for("react.lazy"):60116,lb$1=E$3?Symbol.for("react.block"):60121,mb$1=typeof Symbol=="function"&&Symbol.iterator;function nb$1(Cu){return Cu===null||typeof Cu!="object"?null:(Cu=mb$1&&Cu[mb$1]||Cu["@@iterator"],typeof Cu=="function"?Cu:null)}function ob$1(Cu){if(Cu._status===-1){Cu._status=0;var Tu=Cu._ctor;Tu=Tu(),Cu._result=Tu,Tu.then(function(Pu){Cu._status===0&&(Pu=Pu.default,Cu._status=1,Cu._result=Pu)},function(Pu){Cu._status===0&&(Cu._status=2,Cu._result=Pu)})}}function pb$1(Cu){if(Cu==null)return null;if(typeof Cu=="function")return Cu.displayName||Cu.name||null;if(typeof Cu=="string")return Cu;switch(Cu){case ab$1:return"Fragment";case $a$2:return"Portal";case cb$1:return"Profiler";case bb$1:return"StrictMode";case hb$1:return"Suspense";case ib$1:return"SuspenseList"}if(typeof Cu=="object")switch(Cu.$$typeof){case eb$1:return"Context.Consumer";case db$1:return"Context.Provider";case gb$1:var Tu=Cu.render;return Tu=Tu.displayName||Tu.name||"",Cu.displayName||(Tu!==""?"ForwardRef("+Tu+")":"ForwardRef");case jb$1:return pb$1(Cu.type);case lb$1:return pb$1(Cu.render);case kb$1:if(Cu=Cu._status===1?Cu._result:null)return pb$1(Cu)}return null}function qb$1(Cu){var Tu="";do{e:switch(Cu.tag){case 3:case 4:case 6:case 7:case 10:case 9:var Pu="";break e;default:var Bu=Cu._debugOwner,Lu=Cu._debugSource,Ru=pb$1(Cu.type);Pu=null,Bu&&(Pu=pb$1(Bu.type)),Bu=Ru,Ru="",Lu?Ru=" (at "+Lu.fileName.replace(Ya$2,"")+":"+Lu.lineNumber+")":Pu&&(Ru=" (created by "+Pu+")"),Pu=`
    in `+(Bu||"Unknown")+Ru}Tu+=Pu,Cu=Cu.return}while(Cu);return Tu}function rb$1(Cu){switch(typeof Cu){case"boolean":case"number":case"object":case"string":case"undefined":return Cu;default:return""}}function sb$1(Cu){var Tu=Cu.type;return(Cu=Cu.nodeName)&&Cu.toLowerCase()==="input"&&(Tu==="checkbox"||Tu==="radio")}function tb$1(Cu){var Tu=sb$1(Cu)?"checked":"value",Pu=Object.getOwnPropertyDescriptor(Cu.constructor.prototype,Tu),Bu=""+Cu[Tu];if(!Cu.hasOwnProperty(Tu)&&typeof Pu!="undefined"&&typeof Pu.get=="function"&&typeof Pu.set=="function"){var Lu=Pu.get,Ru=Pu.set;return Object.defineProperty(Cu,Tu,{configurable:!0,get:function(){return Lu.call(this)},set:function(Ou){Bu=""+Ou,Ru.call(this,Ou)}}),Object.defineProperty(Cu,Tu,{enumerable:Pu.enumerable}),{getValue:function(){return Bu},setValue:function(Ou){Bu=""+Ou},stopTracking:function(){Cu._valueTracker=null,delete Cu[Tu]}}}}function xb$1(Cu){Cu._valueTracker||(Cu._valueTracker=tb$1(Cu))}function yb$1(Cu){if(!Cu)return!1;var Tu=Cu._valueTracker;if(!Tu)return!0;var Pu=Tu.getValue(),Bu="";return Cu&&(Bu=sb$1(Cu)?Cu.checked?"true":"false":Cu.value),Cu=Bu,Cu!==Pu?(Tu.setValue(Cu),!0):!1}function zb$1(Cu,Tu){var Pu=Tu.checked;return n$4({},Tu,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Pu!=null?Pu:Cu._wrapperState.initialChecked})}function Ab$1(Cu,Tu){var Pu=Tu.defaultValue==null?"":Tu.defaultValue,Bu=Tu.checked!=null?Tu.checked:Tu.defaultChecked;Pu=rb$1(Tu.value!=null?Tu.value:Pu),Cu._wrapperState={initialChecked:Bu,initialValue:Pu,controlled:Tu.type==="checkbox"||Tu.type==="radio"?Tu.checked!=null:Tu.value!=null}}function Bb$1(Cu,Tu){Tu=Tu.checked,Tu!=null&&Xa$2(Cu,"checked",Tu,!1)}function Cb$1(Cu,Tu){Bb$1(Cu,Tu);var Pu=rb$1(Tu.value),Bu=Tu.type;if(Pu!=null)Bu==="number"?(Pu===0&&Cu.value===""||Cu.value!=Pu)&&(Cu.value=""+Pu):Cu.value!==""+Pu&&(Cu.value=""+Pu);else if(Bu==="submit"||Bu==="reset"){Cu.removeAttribute("value");return}Tu.hasOwnProperty("value")?Db$1(Cu,Tu.type,Pu):Tu.hasOwnProperty("defaultValue")&&Db$1(Cu,Tu.type,rb$1(Tu.defaultValue)),Tu.checked==null&&Tu.defaultChecked!=null&&(Cu.defaultChecked=!!Tu.defaultChecked)}function Eb$1(Cu,Tu,Pu){if(Tu.hasOwnProperty("value")||Tu.hasOwnProperty("defaultValue")){var Bu=Tu.type;if(!(Bu!=="submit"&&Bu!=="reset"||Tu.value!==void 0&&Tu.value!==null))return;Tu=""+Cu._wrapperState.initialValue,Pu||Tu===Cu.value||(Cu.value=Tu),Cu.defaultValue=Tu}Pu=Cu.name,Pu!==""&&(Cu.name=""),Cu.defaultChecked=!!Cu._wrapperState.initialChecked,Pu!==""&&(Cu.name=Pu)}function Db$1(Cu,Tu,Pu){(Tu!=="number"||Cu.ownerDocument.activeElement!==Cu)&&(Pu==null?Cu.defaultValue=""+Cu._wrapperState.initialValue:Cu.defaultValue!==""+Pu&&(Cu.defaultValue=""+Pu))}function Fb$1(Cu){var Tu="";return aa$2.Children.forEach(Cu,function(Pu){Pu!=null&&(Tu+=Pu)}),Tu}function Gb$1(Cu,Tu){return Cu=n$4({children:void 0},Tu),(Tu=Fb$1(Tu.children))&&(Cu.children=Tu),Cu}function Hb$1(Cu,Tu,Pu,Bu){if(Cu=Cu.options,Tu){Tu={};for(var Lu=0;Lu<Pu.length;Lu++)Tu["$"+Pu[Lu]]=!0;for(Pu=0;Pu<Cu.length;Pu++)Lu=Tu.hasOwnProperty("$"+Cu[Pu].value),Cu[Pu].selected!==Lu&&(Cu[Pu].selected=Lu),Lu&&Bu&&(Cu[Pu].defaultSelected=!0)}else{for(Pu=""+rb$1(Pu),Tu=null,Lu=0;Lu<Cu.length;Lu++){if(Cu[Lu].value===Pu){Cu[Lu].selected=!0,Bu&&(Cu[Lu].defaultSelected=!0);return}Tu!==null||Cu[Lu].disabled||(Tu=Cu[Lu])}Tu!==null&&(Tu.selected=!0)}}function Ib$1(Cu,Tu){if(Tu.dangerouslySetInnerHTML!=null)throw Error(u$3(91));return n$4({},Tu,{value:void 0,defaultValue:void 0,children:""+Cu._wrapperState.initialValue})}function Jb$1(Cu,Tu){var Pu=Tu.value;if(Pu==null){if(Pu=Tu.children,Tu=Tu.defaultValue,Pu!=null){if(Tu!=null)throw Error(u$3(92));if(Array.isArray(Pu)){if(!(1>=Pu.length))throw Error(u$3(93));Pu=Pu[0]}Tu=Pu}Tu==null&&(Tu=""),Pu=Tu}Cu._wrapperState={initialValue:rb$1(Pu)}}function Kb$1(Cu,Tu){var Pu=rb$1(Tu.value),Bu=rb$1(Tu.defaultValue);Pu!=null&&(Pu=""+Pu,Pu!==Cu.value&&(Cu.value=Pu),Tu.defaultValue==null&&Cu.defaultValue!==Pu&&(Cu.defaultValue=Pu)),Bu!=null&&(Cu.defaultValue=""+Bu)}function Lb$1(Cu){var Tu=Cu.textContent;Tu===Cu._wrapperState.initialValue&&Tu!==""&&Tu!==null&&(Cu.value=Tu)}var Mb$1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Nb$1(Cu){switch(Cu){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob$1(Cu,Tu){return Cu==null||Cu==="http://www.w3.org/1999/xhtml"?Nb$1(Tu):Cu==="http://www.w3.org/2000/svg"&&Tu==="foreignObject"?"http://www.w3.org/1999/xhtml":Cu}var Pb$1,Qb$1=function(Cu){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(Tu,Pu,Bu,Lu){MSApp.execUnsafeLocalFunction(function(){return Cu(Tu,Pu,Bu,Lu)})}:Cu}(function(Cu,Tu){if(Cu.namespaceURI!==Mb$1.svg||"innerHTML"in Cu)Cu.innerHTML=Tu;else{for(Pb$1=Pb$1||document.createElement("div"),Pb$1.innerHTML="<svg>"+Tu.valueOf().toString()+"</svg>",Tu=Pb$1.firstChild;Cu.firstChild;)Cu.removeChild(Cu.firstChild);for(;Tu.firstChild;)Cu.appendChild(Tu.firstChild)}});function Rb$1(Cu,Tu){if(Tu){var Pu=Cu.firstChild;if(Pu&&Pu===Cu.lastChild&&Pu.nodeType===3){Pu.nodeValue=Tu;return}}Cu.textContent=Tu}function Sb$1(Cu,Tu){var Pu={};return Pu[Cu.toLowerCase()]=Tu.toLowerCase(),Pu["Webkit"+Cu]="webkit"+Tu,Pu["Moz"+Cu]="moz"+Tu,Pu}var Tb$1={animationend:Sb$1("Animation","AnimationEnd"),animationiteration:Sb$1("Animation","AnimationIteration"),animationstart:Sb$1("Animation","AnimationStart"),transitionend:Sb$1("Transition","TransitionEnd")},Ub$1={},Vb$1={};ya$1&&(Vb$1=document.createElement("div").style,"AnimationEvent"in window||(delete Tb$1.animationend.animation,delete Tb$1.animationiteration.animation,delete Tb$1.animationstart.animation),"TransitionEvent"in window||delete Tb$1.transitionend.transition);function Wb$1(Cu){if(Ub$1[Cu])return Ub$1[Cu];if(!Tb$1[Cu])return Cu;var Tu=Tb$1[Cu],Pu;for(Pu in Tu)if(Tu.hasOwnProperty(Pu)&&Pu in Vb$1)return Ub$1[Cu]=Tu[Pu];return Cu}var Xb$1=Wb$1("animationend"),Yb$1=Wb$1("animationiteration"),Zb$1=Wb$1("animationstart"),$b$1=Wb$1("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc$1=new(typeof WeakMap=="function"?WeakMap:Map);function cc(Cu){var Tu=bc$1.get(Cu);return Tu===void 0&&(Tu=new Map,bc$1.set(Cu,Tu)),Tu}function dc(Cu){var Tu=Cu,Pu=Cu;if(Cu.alternate)for(;Tu.return;)Tu=Tu.return;else{Cu=Tu;do Tu=Cu,(Tu.effectTag&1026)!==0&&(Pu=Tu.return),Cu=Tu.return;while(Cu)}return Tu.tag===3?Pu:null}function ec$1(Cu){if(Cu.tag===13){var Tu=Cu.memoizedState;if(Tu===null&&(Cu=Cu.alternate,Cu!==null&&(Tu=Cu.memoizedState)),Tu!==null)return Tu.dehydrated}return null}function fc(Cu){if(dc(Cu)!==Cu)throw Error(u$3(188))}function gc$1(Cu){var Tu=Cu.alternate;if(!Tu){if(Tu=dc(Cu),Tu===null)throw Error(u$3(188));return Tu!==Cu?null:Cu}for(var Pu=Cu,Bu=Tu;;){var Lu=Pu.return;if(Lu===null)break;var Ru=Lu.alternate;if(Ru===null){if(Bu=Lu.return,Bu!==null){Pu=Bu;continue}break}if(Lu.child===Ru.child){for(Ru=Lu.child;Ru;){if(Ru===Pu)return fc(Lu),Cu;if(Ru===Bu)return fc(Lu),Tu;Ru=Ru.sibling}throw Error(u$3(188))}if(Pu.return!==Bu.return)Pu=Lu,Bu=Ru;else{for(var Ou=!1,Du=Lu.child;Du;){if(Du===Pu){Ou=!0,Pu=Lu,Bu=Ru;break}if(Du===Bu){Ou=!0,Bu=Lu,Pu=Ru;break}Du=Du.sibling}if(!Ou){for(Du=Ru.child;Du;){if(Du===Pu){Ou=!0,Pu=Ru,Bu=Lu;break}if(Du===Bu){Ou=!0,Bu=Ru,Pu=Lu;break}Du=Du.sibling}if(!Ou)throw Error(u$3(189))}}if(Pu.alternate!==Bu)throw Error(u$3(190))}if(Pu.tag!==3)throw Error(u$3(188));return Pu.stateNode.current===Pu?Cu:Tu}function hc(Cu){if(Cu=gc$1(Cu),!Cu)return null;for(var Tu=Cu;;){if(Tu.tag===5||Tu.tag===6)return Tu;if(Tu.child)Tu.child.return=Tu,Tu=Tu.child;else{if(Tu===Cu)break;for(;!Tu.sibling;){if(!Tu.return||Tu.return===Cu)return null;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}}return null}function ic$1(Cu,Tu){if(Tu==null)throw Error(u$3(30));return Cu==null?Tu:Array.isArray(Cu)?Array.isArray(Tu)?(Cu.push.apply(Cu,Tu),Cu):(Cu.push(Tu),Cu):Array.isArray(Tu)?[Cu].concat(Tu):[Cu,Tu]}function jc(Cu,Tu,Pu){Array.isArray(Cu)?Cu.forEach(Tu,Pu):Cu&&Tu.call(Pu,Cu)}var kc$1=null;function lc(Cu){if(Cu){var Tu=Cu._dispatchListeners,Pu=Cu._dispatchInstances;if(Array.isArray(Tu))for(var Bu=0;Bu<Tu.length&&!Cu.isPropagationStopped();Bu++)oa$1(Cu,Tu[Bu],Pu[Bu]);else Tu&&oa$1(Cu,Tu,Pu);Cu._dispatchListeners=null,Cu._dispatchInstances=null,Cu.isPersistent()||Cu.constructor.release(Cu)}}function mc$1(Cu){if(Cu!==null&&(kc$1=ic$1(kc$1,Cu)),Cu=kc$1,kc$1=null,Cu){if(jc(Cu,lc),kc$1)throw Error(u$3(95));if(fa$2)throw Cu=ha$2,fa$2=!1,ha$2=null,Cu}}function nc$1(Cu){return Cu=Cu.target||Cu.srcElement||window,Cu.correspondingUseElement&&(Cu=Cu.correspondingUseElement),Cu.nodeType===3?Cu.parentNode:Cu}function oc(Cu){if(!ya$1)return!1;Cu="on"+Cu;var Tu=Cu in document;return Tu||(Tu=document.createElement("div"),Tu.setAttribute(Cu,"return;"),Tu=typeof Tu[Cu]=="function"),Tu}var pc$1=[];function qc(Cu){Cu.topLevelType=null,Cu.nativeEvent=null,Cu.targetInst=null,Cu.ancestors.length=0,10>pc$1.length&&pc$1.push(Cu)}function rc(Cu,Tu,Pu,Bu){if(pc$1.length){var Lu=pc$1.pop();return Lu.topLevelType=Cu,Lu.eventSystemFlags=Bu,Lu.nativeEvent=Tu,Lu.targetInst=Pu,Lu}return{topLevelType:Cu,eventSystemFlags:Bu,nativeEvent:Tu,targetInst:Pu,ancestors:[]}}function sc$1(Cu){var Tu=Cu.targetInst,Pu=Tu;do{if(!Pu){Cu.ancestors.push(Pu);break}var Bu=Pu;if(Bu.tag===3)Bu=Bu.stateNode.containerInfo;else{for(;Bu.return;)Bu=Bu.return;Bu=Bu.tag!==3?null:Bu.stateNode.containerInfo}if(!Bu)break;Tu=Pu.tag,Tu!==5&&Tu!==6||Cu.ancestors.push(Pu),Pu=tc$1(Bu)}while(Pu);for(Pu=0;Pu<Cu.ancestors.length;Pu++){Tu=Cu.ancestors[Pu];var Lu=nc$1(Cu.nativeEvent);Bu=Cu.topLevelType;var Ru=Cu.nativeEvent,Ou=Cu.eventSystemFlags;Pu===0&&(Ou|=64);for(var Du=null,ku=0;ku<sa$1.length;ku++){var Fu=sa$1[ku];Fu&&(Fu=Fu.extractEvents(Bu,Tu,Ru,Lu,Ou))&&(Du=ic$1(Du,Fu))}mc$1(Du)}}function uc(Cu,Tu,Pu){if(!Pu.has(Cu)){switch(Cu){case"scroll":vc$1(Tu,"scroll",!0);break;case"focus":case"blur":vc$1(Tu,"focus",!0),vc$1(Tu,"blur",!0),Pu.set("blur",null),Pu.set("focus",null);break;case"cancel":case"close":oc(Cu)&&vc$1(Tu,Cu,!0);break;case"invalid":case"submit":case"reset":break;default:ac.indexOf(Cu)===-1&&F$3(Cu,Tu)}Pu.set(Cu,null)}}var wc$1,xc$1,yc$1,zc$1=!1,Ac$1=[],Bc$1=null,Cc$1=null,Dc$1=null,Ec$1=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic$1="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Jc(Cu,Tu){var Pu=cc(Tu);Hc.forEach(function(Bu){uc(Bu,Tu,Pu)}),Ic$1.forEach(function(Bu){uc(Bu,Tu,Pu)})}function Kc(Cu,Tu,Pu,Bu,Lu){return{blockedOn:Cu,topLevelType:Tu,eventSystemFlags:Pu|32,nativeEvent:Lu,container:Bu}}function Lc$1(Cu,Tu){switch(Cu){case"focus":case"blur":Bc$1=null;break;case"dragenter":case"dragleave":Cc$1=null;break;case"mouseover":case"mouseout":Dc$1=null;break;case"pointerover":case"pointerout":Ec$1.delete(Tu.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(Tu.pointerId)}}function Mc$1(Cu,Tu,Pu,Bu,Lu,Ru){return Cu===null||Cu.nativeEvent!==Ru?(Cu=Kc(Tu,Pu,Bu,Lu,Ru),Tu!==null&&(Tu=Nc(Tu),Tu!==null&&xc$1(Tu)),Cu):(Cu.eventSystemFlags|=Bu,Cu)}function Oc$1(Cu,Tu,Pu,Bu,Lu){switch(Tu){case"focus":return Bc$1=Mc$1(Bc$1,Cu,Tu,Pu,Bu,Lu),!0;case"dragenter":return Cc$1=Mc$1(Cc$1,Cu,Tu,Pu,Bu,Lu),!0;case"mouseover":return Dc$1=Mc$1(Dc$1,Cu,Tu,Pu,Bu,Lu),!0;case"pointerover":var Ru=Lu.pointerId;return Ec$1.set(Ru,Mc$1(Ec$1.get(Ru)||null,Cu,Tu,Pu,Bu,Lu)),!0;case"gotpointercapture":return Ru=Lu.pointerId,Fc.set(Ru,Mc$1(Fc.get(Ru)||null,Cu,Tu,Pu,Bu,Lu)),!0}return!1}function Pc$1(Cu){var Tu=tc$1(Cu.target);if(Tu!==null){var Pu=dc(Tu);if(Pu!==null){if(Tu=Pu.tag,Tu===13){if(Tu=ec$1(Pu),Tu!==null){Cu.blockedOn=Tu,r$4.unstable_runWithPriority(Cu.priority,function(){yc$1(Pu)});return}}else if(Tu===3&&Pu.stateNode.hydrate){Cu.blockedOn=Pu.tag===3?Pu.stateNode.containerInfo:null;return}}}Cu.blockedOn=null}function Qc(Cu){if(Cu.blockedOn!==null)return!1;var Tu=Rc(Cu.topLevelType,Cu.eventSystemFlags,Cu.container,Cu.nativeEvent);if(Tu!==null){var Pu=Nc(Tu);return Pu!==null&&xc$1(Pu),Cu.blockedOn=Tu,!1}return!0}function Sc$1(Cu,Tu,Pu){Qc(Cu)&&Pu.delete(Tu)}function Tc$1(){for(zc$1=!1;0<Ac$1.length;){var Cu=Ac$1[0];if(Cu.blockedOn!==null){Cu=Nc(Cu.blockedOn),Cu!==null&&wc$1(Cu);break}var Tu=Rc(Cu.topLevelType,Cu.eventSystemFlags,Cu.container,Cu.nativeEvent);Tu!==null?Cu.blockedOn=Tu:Ac$1.shift()}Bc$1!==null&&Qc(Bc$1)&&(Bc$1=null),Cc$1!==null&&Qc(Cc$1)&&(Cc$1=null),Dc$1!==null&&Qc(Dc$1)&&(Dc$1=null),Ec$1.forEach(Sc$1),Fc.forEach(Sc$1)}function Uc(Cu,Tu){Cu.blockedOn===Tu&&(Cu.blockedOn=null,zc$1||(zc$1=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Tc$1)))}function Vc$1(Cu){function Tu(Lu){return Uc(Lu,Cu)}if(0<Ac$1.length){Uc(Ac$1[0],Cu);for(var Pu=1;Pu<Ac$1.length;Pu++){var Bu=Ac$1[Pu];Bu.blockedOn===Cu&&(Bu.blockedOn=null)}}for(Bc$1!==null&&Uc(Bc$1,Cu),Cc$1!==null&&Uc(Cc$1,Cu),Dc$1!==null&&Uc(Dc$1,Cu),Ec$1.forEach(Tu),Fc.forEach(Tu),Pu=0;Pu<Gc.length;Pu++)Bu=Gc[Pu],Bu.blockedOn===Cu&&(Bu.blockedOn=null);for(;0<Gc.length&&(Pu=Gc[0],Pu.blockedOn===null);)Pc$1(Pu),Pu.blockedOn===null&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb$1,"animationEnd",Yb$1,"animationIteration",Zb$1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b$1,"transitionEnd","waiting","waiting"];function ad$1(Cu,Tu){for(var Pu=0;Pu<Cu.length;Pu+=2){var Bu=Cu[Pu],Lu=Cu[Pu+1],Ru="on"+(Lu[0].toUpperCase()+Lu.slice(1));Ru={phasedRegistrationNames:{bubbled:Ru,captured:Ru+"Capture"},dependencies:[Bu],eventPriority:Tu},Zc.set(Bu,Tu),Yc.set(Bu,Ru),Wc[Lu]=Ru}}ad$1("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ad$1("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ad$1($c,2);for(var bd$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd$1=0;cd$1<bd$1.length;cd$1++)Zc.set(bd$1[cd$1],0);var dd$1=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd$1=!0;function F$3(Cu,Tu){vc$1(Tu,Cu,!1)}function vc$1(Cu,Tu,Pu){var Bu=Zc.get(Tu);switch(Bu===void 0?2:Bu){case 0:Bu=gd$1.bind(null,Tu,1,Cu);break;case 1:Bu=hd$1.bind(null,Tu,1,Cu);break;default:Bu=id$1.bind(null,Tu,1,Cu)}Pu?Cu.addEventListener(Tu,Bu,!0):Cu.addEventListener(Tu,Bu,!1)}function gd$1(Cu,Tu,Pu,Bu){Ja$2||Ha$2();var Lu=id$1,Ru=Ja$2;Ja$2=!0;try{Ga$2(Lu,Cu,Tu,Pu,Bu)}finally{(Ja$2=Ru)||La$1()}}function hd$1(Cu,Tu,Pu,Bu){ed(dd$1,id$1.bind(null,Cu,Tu,Pu,Bu))}function id$1(Cu,Tu,Pu,Bu){if(fd$1)if(0<Ac$1.length&&-1<Hc.indexOf(Cu))Cu=Kc(null,Cu,Tu,Pu,Bu),Ac$1.push(Cu);else{var Lu=Rc(Cu,Tu,Pu,Bu);if(Lu===null)Lc$1(Cu,Bu);else if(-1<Hc.indexOf(Cu))Cu=Kc(Lu,Cu,Tu,Pu,Bu),Ac$1.push(Cu);else if(!Oc$1(Lu,Cu,Tu,Pu,Bu)){Lc$1(Cu,Bu),Cu=rc(Cu,Bu,null,Tu);try{Ma$1(sc$1,Cu)}finally{qc(Cu)}}}}function Rc(Cu,Tu,Pu,Bu){if(Pu=nc$1(Bu),Pu=tc$1(Pu),Pu!==null){var Lu=dc(Pu);if(Lu===null)Pu=null;else{var Ru=Lu.tag;if(Ru===13){if(Pu=ec$1(Lu),Pu!==null)return Pu;Pu=null}else if(Ru===3){if(Lu.stateNode.hydrate)return Lu.tag===3?Lu.stateNode.containerInfo:null;Pu=null}else Lu!==Pu&&(Pu=null)}}Cu=rc(Cu,Bu,Pu,Tu);try{Ma$1(sc$1,Cu)}finally{qc(Cu)}return null}var jd$1={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd$1=["Webkit","ms","Moz","O"];Object.keys(jd$1).forEach(function(Cu){kd$1.forEach(function(Tu){Tu=Tu+Cu.charAt(0).toUpperCase()+Cu.substring(1),jd$1[Tu]=jd$1[Cu]})});function ld$1(Cu,Tu,Pu){return Tu==null||typeof Tu=="boolean"||Tu===""?"":Pu||typeof Tu!="number"||Tu===0||jd$1.hasOwnProperty(Cu)&&jd$1[Cu]?(""+Tu).trim():Tu+"px"}function md$1(Cu,Tu){Cu=Cu.style;for(var Pu in Tu)if(Tu.hasOwnProperty(Pu)){var Bu=Pu.indexOf("--")===0,Lu=ld$1(Pu,Tu[Pu],Bu);Pu==="float"&&(Pu="cssFloat"),Bu?Cu.setProperty(Pu,Lu):Cu[Pu]=Lu}}var nd=n$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od$1(Cu,Tu){if(Tu){if(nd[Cu]&&(Tu.children!=null||Tu.dangerouslySetInnerHTML!=null))throw Error(u$3(137,Cu,""));if(Tu.dangerouslySetInnerHTML!=null){if(Tu.children!=null)throw Error(u$3(60));if(!(typeof Tu.dangerouslySetInnerHTML=="object"&&"__html"in Tu.dangerouslySetInnerHTML))throw Error(u$3(61))}if(Tu.style!=null&&typeof Tu.style!="object")throw Error(u$3(62,""))}}function pd$1(Cu,Tu){if(Cu.indexOf("-")===-1)return typeof Tu.is=="string";switch(Cu){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb$1.html;function rd$1(Cu,Tu){Cu=Cu.nodeType===9||Cu.nodeType===11?Cu:Cu.ownerDocument;var Pu=cc(Cu);Tu=wa$1[Tu];for(var Bu=0;Bu<Tu.length;Bu++)uc(Tu[Bu],Cu,Pu)}function sd(){}function td(Cu){if(Cu=Cu||(typeof document!="undefined"?document:void 0),typeof Cu=="undefined")return null;try{return Cu.activeElement||Cu.body}catch{return Cu.body}}function ud$1(Cu){for(;Cu&&Cu.firstChild;)Cu=Cu.firstChild;return Cu}function vd$1(Cu,Tu){var Pu=ud$1(Cu);Cu=0;for(var Bu;Pu;){if(Pu.nodeType===3){if(Bu=Cu+Pu.textContent.length,Cu<=Tu&&Bu>=Tu)return{node:Pu,offset:Tu-Cu};Cu=Bu}e:{for(;Pu;){if(Pu.nextSibling){Pu=Pu.nextSibling;break e}Pu=Pu.parentNode}Pu=void 0}Pu=ud$1(Pu)}}function wd$1(Cu,Tu){return Cu&&Tu?Cu===Tu?!0:Cu&&Cu.nodeType===3?!1:Tu&&Tu.nodeType===3?wd$1(Cu,Tu.parentNode):"contains"in Cu?Cu.contains(Tu):Cu.compareDocumentPosition?!!(Cu.compareDocumentPosition(Tu)&16):!1:!1}function xd$1(){for(var Cu=window,Tu=td();Tu instanceof Cu.HTMLIFrameElement;){try{var Pu=typeof Tu.contentWindow.location.href=="string"}catch{Pu=!1}if(Pu)Cu=Tu.contentWindow;else break;Tu=td(Cu.document)}return Tu}function yd$1(Cu){var Tu=Cu&&Cu.nodeName&&Cu.nodeName.toLowerCase();return Tu&&(Tu==="input"&&(Cu.type==="text"||Cu.type==="search"||Cu.type==="tel"||Cu.type==="url"||Cu.type==="password")||Tu==="textarea"||Cu.contentEditable==="true")}var zd$1="$",Ad$1="/$",Bd$1="$?",Cd$1="$!",Dd$1=null,Ed$1=null;function Fd$1(Cu,Tu){switch(Cu){case"button":case"input":case"select":case"textarea":return!!Tu.autoFocus}return!1}function Gd$1(Cu,Tu){return Cu==="textarea"||Cu==="option"||Cu==="noscript"||typeof Tu.children=="string"||typeof Tu.children=="number"||typeof Tu.dangerouslySetInnerHTML=="object"&&Tu.dangerouslySetInnerHTML!==null&&Tu.dangerouslySetInnerHTML.__html!=null}var Hd$1=typeof setTimeout=="function"?setTimeout:void 0,Id$1=typeof clearTimeout=="function"?clearTimeout:void 0;function Jd$1(Cu){for(;Cu!=null;Cu=Cu.nextSibling){var Tu=Cu.nodeType;if(Tu===1||Tu===3)break}return Cu}function Kd(Cu){Cu=Cu.previousSibling;for(var Tu=0;Cu;){if(Cu.nodeType===8){var Pu=Cu.data;if(Pu===zd$1||Pu===Cd$1||Pu===Bd$1){if(Tu===0)return Cu;Tu--}else Pu===Ad$1&&Tu++}Cu=Cu.previousSibling}return null}var Ld$1=Math.random().toString(36).slice(2),Md$1="__reactInternalInstance$"+Ld$1,Nd$1="__reactEventHandlers$"+Ld$1,Od$1="__reactContainere$"+Ld$1;function tc$1(Cu){var Tu=Cu[Md$1];if(Tu)return Tu;for(var Pu=Cu.parentNode;Pu;){if(Tu=Pu[Od$1]||Pu[Md$1]){if(Pu=Tu.alternate,Tu.child!==null||Pu!==null&&Pu.child!==null)for(Cu=Kd(Cu);Cu!==null;){if(Pu=Cu[Md$1])return Pu;Cu=Kd(Cu)}return Tu}Cu=Pu,Pu=Cu.parentNode}return null}function Nc(Cu){return Cu=Cu[Md$1]||Cu[Od$1],!Cu||Cu.tag!==5&&Cu.tag!==6&&Cu.tag!==13&&Cu.tag!==3?null:Cu}function Pd$1(Cu){if(Cu.tag===5||Cu.tag===6)return Cu.stateNode;throw Error(u$3(33))}function Qd$1(Cu){return Cu[Nd$1]||null}function Rd$1(Cu){do Cu=Cu.return;while(Cu&&Cu.tag!==5);return Cu||null}function Sd$1(Cu,Tu){var Pu=Cu.stateNode;if(!Pu)return null;var Bu=la$1(Pu);if(!Bu)return null;Pu=Bu[Tu];e:switch(Tu){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Bu=!Bu.disabled)||(Cu=Cu.type,Bu=!(Cu==="button"||Cu==="input"||Cu==="select"||Cu==="textarea")),Cu=!Bu;break e;default:Cu=!1}if(Cu)return null;if(Pu&&typeof Pu!="function")throw Error(u$3(231,Tu,typeof Pu));return Pu}function Td$1(Cu,Tu,Pu){(Tu=Sd$1(Cu,Pu.dispatchConfig.phasedRegistrationNames[Tu]))&&(Pu._dispatchListeners=ic$1(Pu._dispatchListeners,Tu),Pu._dispatchInstances=ic$1(Pu._dispatchInstances,Cu))}function Ud$1(Cu){if(Cu&&Cu.dispatchConfig.phasedRegistrationNames){for(var Tu=Cu._targetInst,Pu=[];Tu;)Pu.push(Tu),Tu=Rd$1(Tu);for(Tu=Pu.length;0<Tu--;)Td$1(Pu[Tu],"captured",Cu);for(Tu=0;Tu<Pu.length;Tu++)Td$1(Pu[Tu],"bubbled",Cu)}}function Vd$1(Cu,Tu,Pu){Cu&&Pu&&Pu.dispatchConfig.registrationName&&(Tu=Sd$1(Cu,Pu.dispatchConfig.registrationName))&&(Pu._dispatchListeners=ic$1(Pu._dispatchListeners,Tu),Pu._dispatchInstances=ic$1(Pu._dispatchInstances,Cu))}function Wd$1(Cu){Cu&&Cu.dispatchConfig.registrationName&&Vd$1(Cu._targetInst,null,Cu)}function Xd$1(Cu){jc(Cu,Ud$1)}var Yd$1=null,Zd$1=null,$d=null;function ae$2(){if($d)return $d;var Cu,Tu=Zd$1,Pu=Tu.length,Bu,Lu="value"in Yd$1?Yd$1.value:Yd$1.textContent,Ru=Lu.length;for(Cu=0;Cu<Pu&&Tu[Cu]===Lu[Cu];Cu++);var Ou=Pu-Cu;for(Bu=1;Bu<=Ou&&Tu[Pu-Bu]===Lu[Ru-Bu];Bu++);return $d=Lu.slice(Cu,1<Bu?1-Bu:void 0)}function be$2(){return!0}function ce$1(){return!1}function G$2(Cu,Tu,Pu,Bu){this.dispatchConfig=Cu,this._targetInst=Tu,this.nativeEvent=Pu,Cu=this.constructor.Interface;for(var Lu in Cu)Cu.hasOwnProperty(Lu)&&((Tu=Cu[Lu])?this[Lu]=Tu(Pu):Lu==="target"?this.target=Bu:this[Lu]=Pu[Lu]);return this.isDefaultPrevented=(Pu.defaultPrevented!=null?Pu.defaultPrevented:Pu.returnValue===!1)?be$2:ce$1,this.isPropagationStopped=ce$1,this}n$4(G$2.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Cu=this.nativeEvent;Cu&&(Cu.preventDefault?Cu.preventDefault():typeof Cu.returnValue!="unknown"&&(Cu.returnValue=!1),this.isDefaultPrevented=be$2)},stopPropagation:function(){var Cu=this.nativeEvent;Cu&&(Cu.stopPropagation?Cu.stopPropagation():typeof Cu.cancelBubble!="unknown"&&(Cu.cancelBubble=!0),this.isPropagationStopped=be$2)},persist:function(){this.isPersistent=be$2},isPersistent:ce$1,destructor:function(){var Cu=this.constructor.Interface,Tu;for(Tu in Cu)this[Tu]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce$1,this._dispatchInstances=this._dispatchListeners=null}});G$2.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(Cu){return Cu.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};G$2.extend=function(Cu){function Tu(){}function Pu(){return Bu.apply(this,arguments)}var Bu=this;Tu.prototype=Bu.prototype;var Lu=new Tu;return n$4(Lu,Pu.prototype),Pu.prototype=Lu,Pu.prototype.constructor=Pu,Pu.Interface=n$4({},Bu.Interface,Cu),Pu.extend=Bu.extend,de$2(Pu),Pu};de$2(G$2);function ee$1(Cu,Tu,Pu,Bu){if(this.eventPool.length){var Lu=this.eventPool.pop();return this.call(Lu,Cu,Tu,Pu,Bu),Lu}return new this(Cu,Tu,Pu,Bu)}function fe$2(Cu){if(!(Cu instanceof this))throw Error(u$3(279));Cu.destructor(),10>this.eventPool.length&&this.eventPool.push(Cu)}function de$2(Cu){Cu.eventPool=[],Cu.getPooled=ee$1,Cu.release=fe$2}var ge$2=G$2.extend({data:null}),he$2=G$2.extend({data:null}),ie$2=[9,13,27,32],je$2=ya$1&&"CompositionEvent"in window,ke$1=null;ya$1&&"documentMode"in document&&(ke$1=document.documentMode);var le$2=ya$1&&"TextEvent"in window&&!ke$1,me$2=ya$1&&(!je$2||ke$1&&8<ke$1&&11>=ke$1),ne$1=String.fromCharCode(32),oe$2={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe$1=!1;function qe$1(Cu,Tu){switch(Cu){case"keyup":return ie$2.indexOf(Tu.keyCode)!==-1;case"keydown":return Tu.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re$2(Cu){return Cu=Cu.detail,typeof Cu=="object"&&"data"in Cu?Cu.data:null}var se$2=!1;function te$1(Cu,Tu){switch(Cu){case"compositionend":return re$2(Tu);case"keypress":return Tu.which!==32?null:(pe$1=!0,ne$1);case"textInput":return Cu=Tu.data,Cu===ne$1&&pe$1?null:Cu;default:return null}}function ue$2(Cu,Tu){if(se$2)return Cu==="compositionend"||!je$2&&qe$1(Cu,Tu)?(Cu=ae$2(),$d=Zd$1=Yd$1=null,se$2=!1,Cu):null;switch(Cu){case"paste":return null;case"keypress":if(!(Tu.ctrlKey||Tu.altKey||Tu.metaKey)||Tu.ctrlKey&&Tu.altKey){if(Tu.char&&1<Tu.char.length)return Tu.char;if(Tu.which)return String.fromCharCode(Tu.which)}return null;case"compositionend":return me$2&&Tu.locale!=="ko"?null:Tu.data;default:return null}}var ve$2={eventTypes:oe$2,extractEvents:function(Cu,Tu,Pu,Bu){var Lu;if(je$2)e:{switch(Cu){case"compositionstart":var Ru=oe$2.compositionStart;break e;case"compositionend":Ru=oe$2.compositionEnd;break e;case"compositionupdate":Ru=oe$2.compositionUpdate;break e}Ru=void 0}else se$2?qe$1(Cu,Pu)&&(Ru=oe$2.compositionEnd):Cu==="keydown"&&Pu.keyCode===229&&(Ru=oe$2.compositionStart);return Ru?(me$2&&Pu.locale!=="ko"&&(se$2||Ru!==oe$2.compositionStart?Ru===oe$2.compositionEnd&&se$2&&(Lu=ae$2()):(Yd$1=Bu,Zd$1="value"in Yd$1?Yd$1.value:Yd$1.textContent,se$2=!0)),Ru=ge$2.getPooled(Ru,Tu,Pu,Bu),Lu?Ru.data=Lu:(Lu=re$2(Pu),Lu!==null&&(Ru.data=Lu)),Xd$1(Ru),Lu=Ru):Lu=null,(Cu=le$2?te$1(Cu,Pu):ue$2(Cu,Pu))?(Tu=he$2.getPooled(oe$2.beforeInput,Tu,Pu,Bu),Tu.data=Cu,Xd$1(Tu)):Tu=null,Lu===null?Tu:Tu===null?Lu:[Lu,Tu]}},we$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe$1(Cu){var Tu=Cu&&Cu.nodeName&&Cu.nodeName.toLowerCase();return Tu==="input"?!!we$1[Cu.type]:Tu==="textarea"}var ye$1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze$1(Cu,Tu,Pu){return Cu=G$2.getPooled(ye$1.change,Cu,Tu,Pu),Cu.type="change",Da$1(Pu),Xd$1(Cu),Cu}var Ae$1=null,Be$1=null;function Ce$1(Cu){mc$1(Cu)}function De$1(Cu){var Tu=Pd$1(Cu);if(yb$1(Tu))return Cu}function Ee$1(Cu,Tu){if(Cu==="change")return Tu}var Fe$1=!1;ya$1&&(Fe$1=oc("input")&&(!document.documentMode||9<document.documentMode));function Ge$2(){Ae$1&&(Ae$1.detachEvent("onpropertychange",He$1),Be$1=Ae$1=null)}function He$1(Cu){if(Cu.propertyName==="value"&&De$1(Be$1))if(Cu=ze$1(Be$1,Cu,nc$1(Cu)),Ja$2)mc$1(Cu);else{Ja$2=!0;try{Fa$2(Ce$1,Cu)}finally{Ja$2=!1,La$1()}}}function Ie$2(Cu,Tu,Pu){Cu==="focus"?(Ge$2(),Ae$1=Tu,Be$1=Pu,Ae$1.attachEvent("onpropertychange",He$1)):Cu==="blur"&&Ge$2()}function Je$2(Cu){if(Cu==="selectionchange"||Cu==="keyup"||Cu==="keydown")return De$1(Be$1)}function Ke$2(Cu,Tu){if(Cu==="click")return De$1(Tu)}function Le$1(Cu,Tu){if(Cu==="input"||Cu==="change")return De$1(Tu)}var Me$2={eventTypes:ye$1,_isInputEventSupported:Fe$1,extractEvents:function(Cu,Tu,Pu,Bu){var Lu=Tu?Pd$1(Tu):window,Ru=Lu.nodeName&&Lu.nodeName.toLowerCase();if(Ru==="select"||Ru==="input"&&Lu.type==="file")var Ou=Ee$1;else if(xe$1(Lu))if(Fe$1)Ou=Le$1;else{Ou=Je$2;var Du=Ie$2}else(Ru=Lu.nodeName)&&Ru.toLowerCase()==="input"&&(Lu.type==="checkbox"||Lu.type==="radio")&&(Ou=Ke$2);if(Ou&&(Ou=Ou(Cu,Tu)))return ze$1(Ou,Pu,Bu);Du&&Du(Cu,Lu,Tu),Cu==="blur"&&(Cu=Lu._wrapperState)&&Cu.controlled&&Lu.type==="number"&&Db$1(Lu,"number",Lu.value)}},Ne$2=G$2.extend({view:null,detail:null}),Oe$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe$2(Cu){var Tu=this.nativeEvent;return Tu.getModifierState?Tu.getModifierState(Cu):(Cu=Oe$2[Cu])?!!Tu[Cu]:!1}function Qe$2(){return Pe$2}var Re$2=0,Se$2=0,Te$1=!1,Ue$1=!1,Ve$2=Ne$2.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe$2,button:null,buttons:null,relatedTarget:function(Cu){return Cu.relatedTarget||(Cu.fromElement===Cu.srcElement?Cu.toElement:Cu.fromElement)},movementX:function(Cu){if("movementX"in Cu)return Cu.movementX;var Tu=Re$2;return Re$2=Cu.screenX,Te$1?Cu.type==="mousemove"?Cu.screenX-Tu:0:(Te$1=!0,0)},movementY:function(Cu){if("movementY"in Cu)return Cu.movementY;var Tu=Se$2;return Se$2=Cu.screenY,Ue$1?Cu.type==="mousemove"?Cu.screenY-Tu:0:(Ue$1=!0,0)}}),We$1=Ve$2.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe$1={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye$2={eventTypes:Xe$1,extractEvents:function(Cu,Tu,Pu,Bu,Lu){var Ru=Cu==="mouseover"||Cu==="pointerover",Ou=Cu==="mouseout"||Cu==="pointerout";if(Ru&&(Lu&32)===0&&(Pu.relatedTarget||Pu.fromElement)||!Ou&&!Ru)return null;if(Ru=Bu.window===Bu?Bu:(Ru=Bu.ownerDocument)?Ru.defaultView||Ru.parentWindow:window,Ou){if(Ou=Tu,Tu=(Tu=Pu.relatedTarget||Pu.toElement)?tc$1(Tu):null,Tu!==null){var Du=dc(Tu);(Tu!==Du||Tu.tag!==5&&Tu.tag!==6)&&(Tu=null)}}else Ou=null;if(Ou===Tu)return null;if(Cu==="mouseout"||Cu==="mouseover")var ku=Ve$2,Fu=Xe$1.mouseLeave,Nu=Xe$1.mouseEnter,Gu="mouse";else(Cu==="pointerout"||Cu==="pointerover")&&(ku=We$1,Fu=Xe$1.pointerLeave,Nu=Xe$1.pointerEnter,Gu="pointer");if(Cu=Ou==null?Ru:Pd$1(Ou),Ru=Tu==null?Ru:Pd$1(Tu),Fu=ku.getPooled(Fu,Ou,Pu,Bu),Fu.type=Gu+"leave",Fu.target=Cu,Fu.relatedTarget=Ru,Pu=ku.getPooled(Nu,Tu,Pu,Bu),Pu.type=Gu+"enter",Pu.target=Ru,Pu.relatedTarget=Cu,Bu=Ou,Gu=Tu,Bu&&Gu)e:{for(ku=Bu,Nu=Gu,Ou=0,Cu=ku;Cu;Cu=Rd$1(Cu))Ou++;for(Cu=0,Tu=Nu;Tu;Tu=Rd$1(Tu))Cu++;for(;0<Ou-Cu;)ku=Rd$1(ku),Ou--;for(;0<Cu-Ou;)Nu=Rd$1(Nu),Cu--;for(;Ou--;){if(ku===Nu||ku===Nu.alternate)break e;ku=Rd$1(ku),Nu=Rd$1(Nu)}ku=null}else ku=null;for(Nu=ku,ku=[];Bu&&Bu!==Nu&&(Ou=Bu.alternate,!(Ou!==null&&Ou===Nu));)ku.push(Bu),Bu=Rd$1(Bu);for(Bu=[];Gu&&Gu!==Nu&&(Ou=Gu.alternate,!(Ou!==null&&Ou===Nu));)Bu.push(Gu),Gu=Rd$1(Gu);for(Gu=0;Gu<ku.length;Gu++)Vd$1(ku[Gu],"bubbled",Fu);for(Gu=Bu.length;0<Gu--;)Vd$1(Bu[Gu],"captured",Pu);return(Lu&64)===0?[Fu]:[Fu,Pu]}};function Ze$1(Cu,Tu){return Cu===Tu&&(Cu!==0||1/Cu===1/Tu)||Cu!==Cu&&Tu!==Tu}var $e$1=typeof Object.is=="function"?Object.is:Ze$1,af$1=Object.prototype.hasOwnProperty;function bf(Cu,Tu){if($e$1(Cu,Tu))return!0;if(typeof Cu!="object"||Cu===null||typeof Tu!="object"||Tu===null)return!1;var Pu=Object.keys(Cu),Bu=Object.keys(Tu);if(Pu.length!==Bu.length)return!1;for(Bu=0;Bu<Pu.length;Bu++)if(!af$1.call(Tu,Pu[Bu])||!$e$1(Cu[Pu[Bu]],Tu[Pu[Bu]]))return!1;return!0}var cf$1=ya$1&&"documentMode"in document&&11>=document.documentMode,df$1={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef$1=null,ff$1=null,gf=null,hf=!1;function jf(Cu,Tu){var Pu=Tu.window===Tu?Tu.document:Tu.nodeType===9?Tu:Tu.ownerDocument;return hf||ef$1==null||ef$1!==td(Pu)?null:(Pu=ef$1,"selectionStart"in Pu&&yd$1(Pu)?Pu={start:Pu.selectionStart,end:Pu.selectionEnd}:(Pu=(Pu.ownerDocument&&Pu.ownerDocument.defaultView||window).getSelection(),Pu={anchorNode:Pu.anchorNode,anchorOffset:Pu.anchorOffset,focusNode:Pu.focusNode,focusOffset:Pu.focusOffset}),gf&&bf(gf,Pu)?null:(gf=Pu,Cu=G$2.getPooled(df$1.select,ff$1,Cu,Tu),Cu.type="select",Cu.target=ef$1,Xd$1(Cu),Cu))}var kf$1={eventTypes:df$1,extractEvents:function(Cu,Tu,Pu,Bu,Lu,Ru){if(Lu=Ru||(Bu.window===Bu?Bu.document:Bu.nodeType===9?Bu:Bu.ownerDocument),!(Ru=!Lu)){e:{Lu=cc(Lu),Ru=wa$1.onSelect;for(var Ou=0;Ou<Ru.length;Ou++)if(!Lu.has(Ru[Ou])){Lu=!1;break e}Lu=!0}Ru=!Lu}if(Ru)return null;switch(Lu=Tu?Pd$1(Tu):window,Cu){case"focus":(xe$1(Lu)||Lu.contentEditable==="true")&&(ef$1=Lu,ff$1=Tu,gf=null);break;case"blur":gf=ff$1=ef$1=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(Pu,Bu);case"selectionchange":if(cf$1)break;case"keydown":case"keyup":return jf(Pu,Bu)}return null}},lf$1=G$2.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G$2.extend({clipboardData:function(Cu){return"clipboardData"in Cu?Cu.clipboardData:window.clipboardData}}),nf$1=Ne$2.extend({relatedTarget:null});function of$1(Cu){var Tu=Cu.keyCode;return"charCode"in Cu?(Cu=Cu.charCode,Cu===0&&Tu===13&&(Cu=13)):Cu=Tu,Cu===10&&(Cu=13),32<=Cu||Cu===13?Cu:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf$1=Ne$2.extend({key:function(Cu){if(Cu.key){var Tu=pf[Cu.key]||Cu.key;if(Tu!=="Unidentified")return Tu}return Cu.type==="keypress"?(Cu=of$1(Cu),Cu===13?"Enter":String.fromCharCode(Cu)):Cu.type==="keydown"||Cu.type==="keyup"?qf[Cu.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe$2,charCode:function(Cu){return Cu.type==="keypress"?of$1(Cu):0},keyCode:function(Cu){return Cu.type==="keydown"||Cu.type==="keyup"?Cu.keyCode:0},which:function(Cu){return Cu.type==="keypress"?of$1(Cu):Cu.type==="keydown"||Cu.type==="keyup"?Cu.keyCode:0}}),sf$1=Ve$2.extend({dataTransfer:null}),tf$1=Ne$2.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe$2}),uf=G$2.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve$2.extend({deltaX:function(Cu){return"deltaX"in Cu?Cu.deltaX:"wheelDeltaX"in Cu?-Cu.wheelDeltaX:0},deltaY:function(Cu){return"deltaY"in Cu?Cu.deltaY:"wheelDeltaY"in Cu?-Cu.wheelDeltaY:"wheelDelta"in Cu?-Cu.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(Cu,Tu,Pu,Bu){var Lu=Yc.get(Cu);if(!Lu)return null;switch(Cu){case"keypress":if(of$1(Pu)===0)return null;case"keydown":case"keyup":Cu=rf$1;break;case"blur":case"focus":Cu=nf$1;break;case"click":if(Pu.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Cu=Ve$2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Cu=sf$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Cu=tf$1;break;case Xb$1:case Yb$1:case Zb$1:Cu=lf$1;break;case $b$1:Cu=uf;break;case"scroll":Cu=Ne$2;break;case"wheel":Cu=vf;break;case"copy":case"cut":case"paste":Cu=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Cu=We$1;break;default:Cu=G$2}return Tu=Cu.getPooled(Lu,Tu,Pu,Bu),Xd$1(Tu),Tu}};if(pa$1)throw Error(u$3(101));pa$1=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));ra$1();var xf$1=Nc;la$1=Qd$1;ma$1=xf$1;na$1=Pd$1;xa$1({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye$2,ChangeEventPlugin:Me$2,SelectEventPlugin:kf$1,BeforeInputEventPlugin:ve$2});var yf=[],zf=-1;function H$3(Cu){0>zf||(Cu.current=yf[zf],yf[zf]=null,zf--)}function I$2(Cu,Tu){zf++,yf[zf]=Cu.current,Cu.current=Tu}var Af={},J$2={current:Af},K$2={current:!1},Bf=Af;function Cf(Cu,Tu){var Pu=Cu.type.contextTypes;if(!Pu)return Af;var Bu=Cu.stateNode;if(Bu&&Bu.__reactInternalMemoizedUnmaskedChildContext===Tu)return Bu.__reactInternalMemoizedMaskedChildContext;var Lu={},Ru;for(Ru in Pu)Lu[Ru]=Tu[Ru];return Bu&&(Cu=Cu.stateNode,Cu.__reactInternalMemoizedUnmaskedChildContext=Tu,Cu.__reactInternalMemoizedMaskedChildContext=Lu),Lu}function L$4(Cu){return Cu=Cu.childContextTypes,Cu!=null}function Df(){H$3(K$2),H$3(J$2)}function Ef(Cu,Tu,Pu){if(J$2.current!==Af)throw Error(u$3(168));I$2(J$2,Tu),I$2(K$2,Pu)}function Ff(Cu,Tu,Pu){var Bu=Cu.stateNode;if(Cu=Tu.childContextTypes,typeof Bu.getChildContext!="function")return Pu;Bu=Bu.getChildContext();for(var Lu in Bu)if(!(Lu in Cu))throw Error(u$3(108,pb$1(Tu)||"Unknown",Lu));return n$4({},Pu,{},Bu)}function Gf(Cu){return Cu=(Cu=Cu.stateNode)&&Cu.__reactInternalMemoizedMergedChildContext||Af,Bf=J$2.current,I$2(J$2,Cu),I$2(K$2,K$2.current),!0}function Hf(Cu,Tu,Pu){var Bu=Cu.stateNode;if(!Bu)throw Error(u$3(169));Pu?(Cu=Ff(Cu,Tu,Bf),Bu.__reactInternalMemoizedMergedChildContext=Cu,H$3(K$2),H$3(J$2),I$2(J$2,Cu)):H$3(K$2),I$2(K$2,Pu)}var If$1=r$4.unstable_runWithPriority,Jf=r$4.unstable_scheduleCallback,Kf=r$4.unstable_cancelCallback,Lf=r$4.unstable_requestPaint,Mf=r$4.unstable_now,Nf=r$4.unstable_getCurrentPriorityLevel,Of=r$4.unstable_ImmediatePriority,Pf=r$4.unstable_UserBlockingPriority,Qf=r$4.unstable_NormalPriority,Rf=r$4.unstable_LowPriority,Sf$1=r$4.unstable_IdlePriority,Tf$1={},Uf=r$4.unstable_shouldYield,Vf=Lf!==void 0?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf$1:return 95;default:throw Error(u$3(332))}}function bg(Cu){switch(Cu){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf$1;default:throw Error(u$3(332))}}function cg(Cu,Tu){return Cu=bg(Cu),If$1(Cu,Tu)}function dg(Cu,Tu,Pu){return Cu=bg(Cu),Jf(Cu,Tu,Pu)}function eg(Cu){return Wf===null?(Wf=[Cu],Xf=Jf(Of,fg)):Wf.push(Cu),Tf$1}function gg(){if(Xf!==null){var Cu=Xf;Xf=null,Kf(Cu)}fg()}function fg(){if(!Yf&&Wf!==null){Yf=!0;var Cu=0;try{var Tu=Wf;cg(99,function(){for(;Cu<Tu.length;Cu++){var Pu=Tu[Cu];do Pu=Pu(!0);while(Pu!==null)}}),Wf=null}catch(Pu){throw Wf!==null&&(Wf=Wf.slice(Cu+1)),Jf(Of,gg),Pu}finally{Yf=!1}}}function hg(Cu,Tu,Pu){return Pu/=10,1073741821-(((1073741821-Cu+Tu/10)/Pu|0)+1)*Pu}function ig(Cu,Tu){if(Cu&&Cu.defaultProps){Tu=n$4({},Tu),Cu=Cu.defaultProps;for(var Pu in Cu)Tu[Pu]===void 0&&(Tu[Pu]=Cu[Pu])}return Tu}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(Cu){var Tu=jg.current;H$3(jg),Cu.type._context._currentValue=Tu}function pg(Cu,Tu){for(;Cu!==null;){var Pu=Cu.alternate;if(Cu.childExpirationTime<Tu)Cu.childExpirationTime=Tu,Pu!==null&&Pu.childExpirationTime<Tu&&(Pu.childExpirationTime=Tu);else if(Pu!==null&&Pu.childExpirationTime<Tu)Pu.childExpirationTime=Tu;else break;Cu=Cu.return}}function qg(Cu,Tu){kg=Cu,mg=lg=null,Cu=Cu.dependencies,Cu!==null&&Cu.firstContext!==null&&(Cu.expirationTime>=Tu&&(rg=!0),Cu.firstContext=null)}function sg(Cu,Tu){if(mg!==Cu&&Tu!==!1&&Tu!==0)if((typeof Tu!="number"||Tu===1073741823)&&(mg=Cu,Tu=1073741823),Tu={context:Cu,observedBits:Tu,next:null},lg===null){if(kg===null)throw Error(u$3(308));lg=Tu,kg.dependencies={expirationTime:0,firstContext:Tu,responders:null}}else lg=lg.next=Tu;return Cu._currentValue}var tg=!1;function ug(Cu){Cu.updateQueue={baseState:Cu.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(Cu,Tu){Cu=Cu.updateQueue,Tu.updateQueue===Cu&&(Tu.updateQueue={baseState:Cu.baseState,baseQueue:Cu.baseQueue,shared:Cu.shared,effects:Cu.effects})}function wg(Cu,Tu){return Cu={expirationTime:Cu,suspenseConfig:Tu,tag:0,payload:null,callback:null,next:null},Cu.next=Cu}function xg(Cu,Tu){if(Cu=Cu.updateQueue,Cu!==null){Cu=Cu.shared;var Pu=Cu.pending;Pu===null?Tu.next=Tu:(Tu.next=Pu.next,Pu.next=Tu),Cu.pending=Tu}}function yg(Cu,Tu){var Pu=Cu.alternate;Pu!==null&&vg(Pu,Cu),Cu=Cu.updateQueue,Pu=Cu.baseQueue,Pu===null?(Cu.baseQueue=Tu.next=Tu,Tu.next=Tu):(Tu.next=Pu.next,Pu.next=Tu)}function zg(Cu,Tu,Pu,Bu){var Lu=Cu.updateQueue;tg=!1;var Ru=Lu.baseQueue,Ou=Lu.shared.pending;if(Ou!==null){if(Ru!==null){var Du=Ru.next;Ru.next=Ou.next,Ou.next=Du}Ru=Ou,Lu.shared.pending=null,Du=Cu.alternate,Du!==null&&(Du=Du.updateQueue,Du!==null&&(Du.baseQueue=Ou))}if(Ru!==null){Du=Ru.next;var ku=Lu.baseState,Fu=0,Nu=null,Gu=null,zu=null;if(Du!==null){var Hu=Du;do{if(Ou=Hu.expirationTime,Ou<Bu){var Wu={expirationTime:Hu.expirationTime,suspenseConfig:Hu.suspenseConfig,tag:Hu.tag,payload:Hu.payload,callback:Hu.callback,next:null};zu===null?(Gu=zu=Wu,Nu=ku):zu=zu.next=Wu,Ou>Fu&&(Fu=Ou)}else{zu!==null&&(zu=zu.next={expirationTime:1073741823,suspenseConfig:Hu.suspenseConfig,tag:Hu.tag,payload:Hu.payload,callback:Hu.callback,next:null}),Ag(Ou,Hu.suspenseConfig);e:{var _h=Cu,Xc=Hu;switch(Ou=Tu,Wu=Pu,Xc.tag){case 1:if(_h=Xc.payload,typeof _h=="function"){ku=_h.call(Wu,ku,Ou);break e}ku=_h;break e;case 3:_h.effectTag=_h.effectTag&-4097|64;case 0:if(_h=Xc.payload,Ou=typeof _h=="function"?_h.call(Wu,ku,Ou):_h,Ou==null)break e;ku=n$4({},ku,Ou);break e;case 2:tg=!0}}Hu.callback!==null&&(Cu.effectTag|=32,Ou=Lu.effects,Ou===null?Lu.effects=[Hu]:Ou.push(Hu))}if(Hu=Hu.next,Hu===null||Hu===Du){if(Ou=Lu.shared.pending,Ou===null)break;Hu=Ru.next=Ou.next,Ou.next=Du,Lu.baseQueue=Ru=Ou,Lu.shared.pending=null}}while(1)}zu===null?Nu=ku:zu.next=Gu,Lu.baseState=Nu,Lu.baseQueue=zu,Bg(Fu),Cu.expirationTime=Fu,Cu.memoizedState=ku}}function Cg(Cu,Tu,Pu){if(Cu=Tu.effects,Tu.effects=null,Cu!==null)for(Tu=0;Tu<Cu.length;Tu++){var Bu=Cu[Tu],Lu=Bu.callback;if(Lu!==null){if(Bu.callback=null,Bu=Lu,Lu=Pu,typeof Bu!="function")throw Error(u$3(191,Bu));Bu.call(Lu)}}}var Dg=Wa$2.ReactCurrentBatchConfig,Eg=new aa$2.Component().refs;function Fg(Cu,Tu,Pu,Bu){Tu=Cu.memoizedState,Pu=Pu(Bu,Tu),Pu=Pu==null?Tu:n$4({},Tu,Pu),Cu.memoizedState=Pu,Cu.expirationTime===0&&(Cu.updateQueue.baseState=Pu)}var Jg={isMounted:function(Cu){return(Cu=Cu._reactInternalFiber)?dc(Cu)===Cu:!1},enqueueSetState:function(Cu,Tu,Pu){Cu=Cu._reactInternalFiber;var Bu=Gg(),Lu=Dg.suspense;Bu=Hg(Bu,Cu,Lu),Lu=wg(Bu,Lu),Lu.payload=Tu,Pu!=null&&(Lu.callback=Pu),xg(Cu,Lu),Ig(Cu,Bu)},enqueueReplaceState:function(Cu,Tu,Pu){Cu=Cu._reactInternalFiber;var Bu=Gg(),Lu=Dg.suspense;Bu=Hg(Bu,Cu,Lu),Lu=wg(Bu,Lu),Lu.tag=1,Lu.payload=Tu,Pu!=null&&(Lu.callback=Pu),xg(Cu,Lu),Ig(Cu,Bu)},enqueueForceUpdate:function(Cu,Tu){Cu=Cu._reactInternalFiber;var Pu=Gg(),Bu=Dg.suspense;Pu=Hg(Pu,Cu,Bu),Bu=wg(Pu,Bu),Bu.tag=2,Tu!=null&&(Bu.callback=Tu),xg(Cu,Bu),Ig(Cu,Pu)}};function Kg(Cu,Tu,Pu,Bu,Lu,Ru,Ou){return Cu=Cu.stateNode,typeof Cu.shouldComponentUpdate=="function"?Cu.shouldComponentUpdate(Bu,Ru,Ou):Tu.prototype&&Tu.prototype.isPureReactComponent?!bf(Pu,Bu)||!bf(Lu,Ru):!0}function Lg(Cu,Tu,Pu){var Bu=!1,Lu=Af,Ru=Tu.contextType;return typeof Ru=="object"&&Ru!==null?Ru=sg(Ru):(Lu=L$4(Tu)?Bf:J$2.current,Bu=Tu.contextTypes,Ru=(Bu=Bu!=null)?Cf(Cu,Lu):Af),Tu=new Tu(Pu,Ru),Cu.memoizedState=Tu.state!==null&&Tu.state!==void 0?Tu.state:null,Tu.updater=Jg,Cu.stateNode=Tu,Tu._reactInternalFiber=Cu,Bu&&(Cu=Cu.stateNode,Cu.__reactInternalMemoizedUnmaskedChildContext=Lu,Cu.__reactInternalMemoizedMaskedChildContext=Ru),Tu}function Mg(Cu,Tu,Pu,Bu){Cu=Tu.state,typeof Tu.componentWillReceiveProps=="function"&&Tu.componentWillReceiveProps(Pu,Bu),typeof Tu.UNSAFE_componentWillReceiveProps=="function"&&Tu.UNSAFE_componentWillReceiveProps(Pu,Bu),Tu.state!==Cu&&Jg.enqueueReplaceState(Tu,Tu.state,null)}function Ng(Cu,Tu,Pu,Bu){var Lu=Cu.stateNode;Lu.props=Pu,Lu.state=Cu.memoizedState,Lu.refs=Eg,ug(Cu);var Ru=Tu.contextType;typeof Ru=="object"&&Ru!==null?Lu.context=sg(Ru):(Ru=L$4(Tu)?Bf:J$2.current,Lu.context=Cf(Cu,Ru)),zg(Cu,Pu,Lu,Bu),Lu.state=Cu.memoizedState,Ru=Tu.getDerivedStateFromProps,typeof Ru=="function"&&(Fg(Cu,Tu,Ru,Pu),Lu.state=Cu.memoizedState),typeof Tu.getDerivedStateFromProps=="function"||typeof Lu.getSnapshotBeforeUpdate=="function"||typeof Lu.UNSAFE_componentWillMount!="function"&&typeof Lu.componentWillMount!="function"||(Tu=Lu.state,typeof Lu.componentWillMount=="function"&&Lu.componentWillMount(),typeof Lu.UNSAFE_componentWillMount=="function"&&Lu.UNSAFE_componentWillMount(),Tu!==Lu.state&&Jg.enqueueReplaceState(Lu,Lu.state,null),zg(Cu,Pu,Lu,Bu),Lu.state=Cu.memoizedState),typeof Lu.componentDidMount=="function"&&(Cu.effectTag|=4)}var Og=Array.isArray;function Pg(Cu,Tu,Pu){if(Cu=Pu.ref,Cu!==null&&typeof Cu!="function"&&typeof Cu!="object"){if(Pu._owner){if(Pu=Pu._owner,Pu){if(Pu.tag!==1)throw Error(u$3(309));var Bu=Pu.stateNode}if(!Bu)throw Error(u$3(147,Cu));var Lu=""+Cu;return Tu!==null&&Tu.ref!==null&&typeof Tu.ref=="function"&&Tu.ref._stringRef===Lu?Tu.ref:(Tu=function(Ru){var Ou=Bu.refs;Ou===Eg&&(Ou=Bu.refs={}),Ru===null?delete Ou[Lu]:Ou[Lu]=Ru},Tu._stringRef=Lu,Tu)}if(typeof Cu!="string")throw Error(u$3(284));if(!Pu._owner)throw Error(u$3(290,Cu))}return Cu}function Qg(Cu,Tu){if(Cu.type!=="textarea")throw Error(u$3(31,Object.prototype.toString.call(Tu)==="[object Object]"?"object with keys {"+Object.keys(Tu).join(", ")+"}":Tu,""))}function Rg(Cu){function Tu(Xc,ju){if(Cu){var _c=Xc.lastEffect;_c!==null?(_c.nextEffect=ju,Xc.lastEffect=ju):Xc.firstEffect=Xc.lastEffect=ju,ju.nextEffect=null,ju.effectTag=8}}function Pu(Xc,ju){if(!Cu)return null;for(;ju!==null;)Tu(Xc,ju),ju=ju.sibling;return null}function Bu(Xc,ju){for(Xc=new Map;ju!==null;)ju.key!==null?Xc.set(ju.key,ju):Xc.set(ju.index,ju),ju=ju.sibling;return Xc}function Lu(Xc,ju){return Xc=Sg(Xc,ju),Xc.index=0,Xc.sibling=null,Xc}function Ru(Xc,ju,_c){return Xc.index=_c,Cu?(_c=Xc.alternate,_c!==null?(_c=_c.index,_c<ju?(Xc.effectTag=2,ju):_c):(Xc.effectTag=2,ju)):ju}function Ou(Xc){return Cu&&Xc.alternate===null&&(Xc.effectTag=2),Xc}function Du(Xc,ju,_c,_f){return ju===null||ju.tag!==6?(ju=Tg(_c,Xc.mode,_f),ju.return=Xc,ju):(ju=Lu(ju,_c),ju.return=Xc,ju)}function ku(Xc,ju,_c,_f){return ju!==null&&ju.elementType===_c.type?(_f=Lu(ju,_c.props),_f.ref=Pg(Xc,ju,_c),_f.return=Xc,_f):(_f=Ug(_c.type,_c.key,_c.props,null,Xc.mode,_f),_f.ref=Pg(Xc,ju,_c),_f.return=Xc,_f)}function Fu(Xc,ju,_c,_f){return ju===null||ju.tag!==4||ju.stateNode.containerInfo!==_c.containerInfo||ju.stateNode.implementation!==_c.implementation?(ju=Vg(_c,Xc.mode,_f),ju.return=Xc,ju):(ju=Lu(ju,_c.children||[]),ju.return=Xc,ju)}function Nu(Xc,ju,_c,_f,ep){return ju===null||ju.tag!==7?(ju=Wg(_c,Xc.mode,_f,ep),ju.return=Xc,ju):(ju=Lu(ju,_c),ju.return=Xc,ju)}function Gu(Xc,ju,_c){if(typeof ju=="string"||typeof ju=="number")return ju=Tg(""+ju,Xc.mode,_c),ju.return=Xc,ju;if(typeof ju=="object"&&ju!==null){switch(ju.$$typeof){case Za$2:return _c=Ug(ju.type,ju.key,ju.props,null,Xc.mode,_c),_c.ref=Pg(Xc,null,ju),_c.return=Xc,_c;case $a$2:return ju=Vg(ju,Xc.mode,_c),ju.return=Xc,ju}if(Og(ju)||nb$1(ju))return ju=Wg(ju,Xc.mode,_c,null),ju.return=Xc,ju;Qg(Xc,ju)}return null}function zu(Xc,ju,_c,_f){var ep=ju!==null?ju.key:null;if(typeof _c=="string"||typeof _c=="number")return ep!==null?null:Du(Xc,ju,""+_c,_f);if(typeof _c=="object"&&_c!==null){switch(_c.$$typeof){case Za$2:return _c.key===ep?_c.type===ab$1?Nu(Xc,ju,_c.props.children,_f,ep):ku(Xc,ju,_c,_f):null;case $a$2:return _c.key===ep?Fu(Xc,ju,_c,_f):null}if(Og(_c)||nb$1(_c))return ep!==null?null:Nu(Xc,ju,_c,_f,null);Qg(Xc,_c)}return null}function Hu(Xc,ju,_c,_f,ep){if(typeof _f=="string"||typeof _f=="number")return Xc=Xc.get(_c)||null,Du(ju,Xc,""+_f,ep);if(typeof _f=="object"&&_f!==null){switch(_f.$$typeof){case Za$2:return Xc=Xc.get(_f.key===null?_c:_f.key)||null,_f.type===ab$1?Nu(ju,Xc,_f.props.children,ep,_f.key):ku(ju,Xc,_f,ep);case $a$2:return Xc=Xc.get(_f.key===null?_c:_f.key)||null,Fu(ju,Xc,_f,ep)}if(Og(_f)||nb$1(_f))return Xc=Xc.get(_c)||null,Nu(ju,Xc,_f,ep,null);Qg(ju,_f)}return null}function Wu(Xc,ju,_c,_f){for(var ep=null,tp=null,op=ju,lp=ju=0,up=null;op!==null&&lp<_c.length;lp++){op.index>lp?(up=op,op=null):up=op.sibling;var hp=zu(Xc,op,_c[lp],_f);if(hp===null){op===null&&(op=up);break}Cu&&op&&hp.alternate===null&&Tu(Xc,op),ju=Ru(hp,ju,lp),tp===null?ep=hp:tp.sibling=hp,tp=hp,op=up}if(lp===_c.length)return Pu(Xc,op),ep;if(op===null){for(;lp<_c.length;lp++)op=Gu(Xc,_c[lp],_f),op!==null&&(ju=Ru(op,ju,lp),tp===null?ep=op:tp.sibling=op,tp=op);return ep}for(op=Bu(Xc,op);lp<_c.length;lp++)up=Hu(op,Xc,lp,_c[lp],_f),up!==null&&(Cu&&up.alternate!==null&&op.delete(up.key===null?lp:up.key),ju=Ru(up,ju,lp),tp===null?ep=up:tp.sibling=up,tp=up);return Cu&&op.forEach(function(np){return Tu(Xc,np)}),ep}function _h(Xc,ju,_c,_f){var ep=nb$1(_c);if(typeof ep!="function")throw Error(u$3(150));if(_c=ep.call(_c),_c==null)throw Error(u$3(151));for(var tp=ep=null,op=ju,lp=ju=0,up=null,hp=_c.next();op!==null&&!hp.done;lp++,hp=_c.next()){op.index>lp?(up=op,op=null):up=op.sibling;var np=zu(Xc,op,hp.value,_f);if(np===null){op===null&&(op=up);break}Cu&&op&&np.alternate===null&&Tu(Xc,op),ju=Ru(np,ju,lp),tp===null?ep=np:tp.sibling=np,tp=np,op=up}if(hp.done)return Pu(Xc,op),ep;if(op===null){for(;!hp.done;lp++,hp=_c.next())hp=Gu(Xc,hp.value,_f),hp!==null&&(ju=Ru(hp,ju,lp),tp===null?ep=hp:tp.sibling=hp,tp=hp);return ep}for(op=Bu(Xc,op);!hp.done;lp++,hp=_c.next())hp=Hu(op,Xc,lp,hp.value,_f),hp!==null&&(Cu&&hp.alternate!==null&&op.delete(hp.key===null?lp:hp.key),ju=Ru(hp,ju,lp),tp===null?ep=hp:tp.sibling=hp,tp=hp);return Cu&&op.forEach(function(rp){return Tu(Xc,rp)}),ep}return function(Xc,ju,_c,_f){var ep=typeof _c=="object"&&_c!==null&&_c.type===ab$1&&_c.key===null;ep&&(_c=_c.props.children);var tp=typeof _c=="object"&&_c!==null;if(tp)switch(_c.$$typeof){case Za$2:e:{for(tp=_c.key,ep=ju;ep!==null;){if(ep.key===tp){switch(ep.tag){case 7:if(_c.type===ab$1){Pu(Xc,ep.sibling),ju=Lu(ep,_c.props.children),ju.return=Xc,Xc=ju;break e}break;default:if(ep.elementType===_c.type){Pu(Xc,ep.sibling),ju=Lu(ep,_c.props),ju.ref=Pg(Xc,ep,_c),ju.return=Xc,Xc=ju;break e}}Pu(Xc,ep);break}else Tu(Xc,ep);ep=ep.sibling}_c.type===ab$1?(ju=Wg(_c.props.children,Xc.mode,_f,_c.key),ju.return=Xc,Xc=ju):(_f=Ug(_c.type,_c.key,_c.props,null,Xc.mode,_f),_f.ref=Pg(Xc,ju,_c),_f.return=Xc,Xc=_f)}return Ou(Xc);case $a$2:e:{for(ep=_c.key;ju!==null;){if(ju.key===ep)if(ju.tag===4&&ju.stateNode.containerInfo===_c.containerInfo&&ju.stateNode.implementation===_c.implementation){Pu(Xc,ju.sibling),ju=Lu(ju,_c.children||[]),ju.return=Xc,Xc=ju;break e}else{Pu(Xc,ju);break}else Tu(Xc,ju);ju=ju.sibling}ju=Vg(_c,Xc.mode,_f),ju.return=Xc,Xc=ju}return Ou(Xc)}if(typeof _c=="string"||typeof _c=="number")return _c=""+_c,ju!==null&&ju.tag===6?(Pu(Xc,ju.sibling),ju=Lu(ju,_c),ju.return=Xc,Xc=ju):(Pu(Xc,ju),ju=Tg(_c,Xc.mode,_f),ju.return=Xc,Xc=ju),Ou(Xc);if(Og(_c))return Wu(Xc,ju,_c,_f);if(nb$1(_c))return _h(Xc,ju,_c,_f);if(tp&&Qg(Xc,_c),typeof _c=="undefined"&&!ep)switch(Xc.tag){case 1:case 0:throw Xc=Xc.type,Error(u$3(152,Xc.displayName||Xc.name||"Component"))}return Pu(Xc,ju)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(Cu){if(Cu===Zg)throw Error(u$3(174));return Cu}function dh(Cu,Tu){switch(I$2(bh,Tu),I$2(ah,Cu),I$2($g,Zg),Cu=Tu.nodeType,Cu){case 9:case 11:Tu=(Tu=Tu.documentElement)?Tu.namespaceURI:Ob$1(null,"");break;default:Cu=Cu===8?Tu.parentNode:Tu,Tu=Cu.namespaceURI||null,Cu=Cu.tagName,Tu=Ob$1(Tu,Cu)}H$3($g),I$2($g,Tu)}function eh(){H$3($g),H$3(ah),H$3(bh)}function fh(Cu){ch(bh.current);var Tu=ch($g.current),Pu=Ob$1(Tu,Cu.type);Tu!==Pu&&(I$2(ah,Cu),I$2($g,Pu))}function gh(Cu){ah.current===Cu&&(H$3($g),H$3(ah))}var M$3={current:0};function hh(Cu){for(var Tu=Cu;Tu!==null;){if(Tu.tag===13){var Pu=Tu.memoizedState;if(Pu!==null&&(Pu=Pu.dehydrated,Pu===null||Pu.data===Bd$1||Pu.data===Cd$1))return Tu}else if(Tu.tag===19&&Tu.memoizedProps.revealOrder!==void 0){if((Tu.effectTag&64)!==0)return Tu}else if(Tu.child!==null){Tu.child.return=Tu,Tu=Tu.child;continue}if(Tu===Cu)break;for(;Tu.sibling===null;){if(Tu.return===null||Tu.return===Cu)return null;Tu=Tu.return}Tu.sibling.return=Tu.return,Tu=Tu.sibling}return null}function ih(Cu,Tu){return{responder:Cu,props:Tu}}var jh=Wa$2.ReactCurrentDispatcher,kh=Wa$2.ReactCurrentBatchConfig,lh=0,N$3=null,O$3=null,P$3=null,mh=!1;function Q$3(){throw Error(u$3(321))}function nh(Cu,Tu){if(Tu===null)return!1;for(var Pu=0;Pu<Tu.length&&Pu<Cu.length;Pu++)if(!$e$1(Cu[Pu],Tu[Pu]))return!1;return!0}function oh(Cu,Tu,Pu,Bu,Lu,Ru){if(lh=Ru,N$3=Tu,Tu.memoizedState=null,Tu.updateQueue=null,Tu.expirationTime=0,jh.current=Cu===null||Cu.memoizedState===null?ph:qh,Cu=Pu(Bu,Lu),Tu.expirationTime===lh){Ru=0;do{if(Tu.expirationTime=0,!(25>Ru))throw Error(u$3(301));Ru+=1,P$3=O$3=null,Tu.updateQueue=null,jh.current=rh,Cu=Pu(Bu,Lu)}while(Tu.expirationTime===lh)}if(jh.current=sh,Tu=O$3!==null&&O$3.next!==null,lh=0,P$3=O$3=N$3=null,mh=!1,Tu)throw Error(u$3(300));return Cu}function th(){var Cu={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$3.memoizedState=P$3=Cu:P$3=P$3.next=Cu,P$3}function uh(){if(O$3===null){var Cu=N$3.alternate;Cu=Cu!==null?Cu.memoizedState:null}else Cu=O$3.next;var Tu=P$3===null?N$3.memoizedState:P$3.next;if(Tu!==null)P$3=Tu,O$3=Cu;else{if(Cu===null)throw Error(u$3(310));O$3=Cu,Cu={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$3===null?N$3.memoizedState=P$3=Cu:P$3=P$3.next=Cu}return P$3}function vh(Cu,Tu){return typeof Tu=="function"?Tu(Cu):Tu}function wh(Cu){var Tu=uh(),Pu=Tu.queue;if(Pu===null)throw Error(u$3(311));Pu.lastRenderedReducer=Cu;var Bu=O$3,Lu=Bu.baseQueue,Ru=Pu.pending;if(Ru!==null){if(Lu!==null){var Ou=Lu.next;Lu.next=Ru.next,Ru.next=Ou}Bu.baseQueue=Lu=Ru,Pu.pending=null}if(Lu!==null){Lu=Lu.next,Bu=Bu.baseState;var Du=Ou=Ru=null,ku=Lu;do{var Fu=ku.expirationTime;if(Fu<lh){var Nu={expirationTime:ku.expirationTime,suspenseConfig:ku.suspenseConfig,action:ku.action,eagerReducer:ku.eagerReducer,eagerState:ku.eagerState,next:null};Du===null?(Ou=Du=Nu,Ru=Bu):Du=Du.next=Nu,Fu>N$3.expirationTime&&(N$3.expirationTime=Fu,Bg(Fu))}else Du!==null&&(Du=Du.next={expirationTime:1073741823,suspenseConfig:ku.suspenseConfig,action:ku.action,eagerReducer:ku.eagerReducer,eagerState:ku.eagerState,next:null}),Ag(Fu,ku.suspenseConfig),Bu=ku.eagerReducer===Cu?ku.eagerState:Cu(Bu,ku.action);ku=ku.next}while(ku!==null&&ku!==Lu);Du===null?Ru=Bu:Du.next=Ou,$e$1(Bu,Tu.memoizedState)||(rg=!0),Tu.memoizedState=Bu,Tu.baseState=Ru,Tu.baseQueue=Du,Pu.lastRenderedState=Bu}return[Tu.memoizedState,Pu.dispatch]}function xh(Cu){var Tu=uh(),Pu=Tu.queue;if(Pu===null)throw Error(u$3(311));Pu.lastRenderedReducer=Cu;var Bu=Pu.dispatch,Lu=Pu.pending,Ru=Tu.memoizedState;if(Lu!==null){Pu.pending=null;var Ou=Lu=Lu.next;do Ru=Cu(Ru,Ou.action),Ou=Ou.next;while(Ou!==Lu);$e$1(Ru,Tu.memoizedState)||(rg=!0),Tu.memoizedState=Ru,Tu.baseQueue===null&&(Tu.baseState=Ru),Pu.lastRenderedState=Ru}return[Ru,Bu]}function yh(Cu){var Tu=th();return typeof Cu=="function"&&(Cu=Cu()),Tu.memoizedState=Tu.baseState=Cu,Cu=Tu.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:Cu},Cu=Cu.dispatch=zh.bind(null,N$3,Cu),[Tu.memoizedState,Cu]}function Ah(Cu,Tu,Pu,Bu){return Cu={tag:Cu,create:Tu,destroy:Pu,deps:Bu,next:null},Tu=N$3.updateQueue,Tu===null?(Tu={lastEffect:null},N$3.updateQueue=Tu,Tu.lastEffect=Cu.next=Cu):(Pu=Tu.lastEffect,Pu===null?Tu.lastEffect=Cu.next=Cu:(Bu=Pu.next,Pu.next=Cu,Cu.next=Bu,Tu.lastEffect=Cu)),Cu}function Bh(){return uh().memoizedState}function Ch(Cu,Tu,Pu,Bu){var Lu=th();N$3.effectTag|=Cu,Lu.memoizedState=Ah(1|Tu,Pu,void 0,Bu===void 0?null:Bu)}function Dh(Cu,Tu,Pu,Bu){var Lu=uh();Bu=Bu===void 0?null:Bu;var Ru=void 0;if(O$3!==null){var Ou=O$3.memoizedState;if(Ru=Ou.destroy,Bu!==null&&nh(Bu,Ou.deps)){Ah(Tu,Pu,Ru,Bu);return}}N$3.effectTag|=Cu,Lu.memoizedState=Ah(1|Tu,Pu,Ru,Bu)}function Eh(Cu,Tu){return Ch(516,4,Cu,Tu)}function Fh(Cu,Tu){return Dh(516,4,Cu,Tu)}function Gh(Cu,Tu){return Dh(4,2,Cu,Tu)}function Hh(Cu,Tu){if(typeof Tu=="function")return Cu=Cu(),Tu(Cu),function(){Tu(null)};if(Tu!=null)return Cu=Cu(),Tu.current=Cu,function(){Tu.current=null}}function Ih(Cu,Tu,Pu){return Pu=Pu!=null?Pu.concat([Cu]):null,Dh(4,2,Hh.bind(null,Tu,Cu),Pu)}function Jh(){}function Kh(Cu,Tu){return th().memoizedState=[Cu,Tu===void 0?null:Tu],Cu}function Lh(Cu,Tu){var Pu=uh();Tu=Tu===void 0?null:Tu;var Bu=Pu.memoizedState;return Bu!==null&&Tu!==null&&nh(Tu,Bu[1])?Bu[0]:(Pu.memoizedState=[Cu,Tu],Cu)}function Mh(Cu,Tu){var Pu=uh();Tu=Tu===void 0?null:Tu;var Bu=Pu.memoizedState;return Bu!==null&&Tu!==null&&nh(Tu,Bu[1])?Bu[0]:(Cu=Cu(),Pu.memoizedState=[Cu,Tu],Cu)}function Nh(Cu,Tu,Pu){var Bu=ag();cg(98>Bu?98:Bu,function(){Cu(!0)}),cg(97<Bu?97:Bu,function(){var Lu=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Cu(!1),Pu()}finally{kh.suspense=Lu}})}function zh(Cu,Tu,Pu){var Bu=Gg(),Lu=Dg.suspense;Bu=Hg(Bu,Cu,Lu),Lu={expirationTime:Bu,suspenseConfig:Lu,action:Pu,eagerReducer:null,eagerState:null,next:null};var Ru=Tu.pending;if(Ru===null?Lu.next=Lu:(Lu.next=Ru.next,Ru.next=Lu),Tu.pending=Lu,Ru=Cu.alternate,Cu===N$3||Ru!==null&&Ru===N$3)mh=!0,Lu.expirationTime=lh,N$3.expirationTime=lh;else{if(Cu.expirationTime===0&&(Ru===null||Ru.expirationTime===0)&&(Ru=Tu.lastRenderedReducer,Ru!==null))try{var Ou=Tu.lastRenderedState,Du=Ru(Ou,Pu);if(Lu.eagerReducer=Ru,Lu.eagerState=Du,$e$1(Du,Ou))return}catch{}finally{}Ig(Cu,Bu)}}var sh={readContext:sg,useCallback:Q$3,useContext:Q$3,useEffect:Q$3,useImperativeHandle:Q$3,useLayoutEffect:Q$3,useMemo:Q$3,useReducer:Q$3,useRef:Q$3,useState:Q$3,useDebugValue:Q$3,useResponder:Q$3,useDeferredValue:Q$3,useTransition:Q$3},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(Cu,Tu,Pu){return Pu=Pu!=null?Pu.concat([Cu]):null,Ch(4,2,Hh.bind(null,Tu,Cu),Pu)},useLayoutEffect:function(Cu,Tu){return Ch(4,2,Cu,Tu)},useMemo:function(Cu,Tu){var Pu=th();return Tu=Tu===void 0?null:Tu,Cu=Cu(),Pu.memoizedState=[Cu,Tu],Cu},useReducer:function(Cu,Tu,Pu){var Bu=th();return Tu=Pu!==void 0?Pu(Tu):Tu,Bu.memoizedState=Bu.baseState=Tu,Cu=Bu.queue={pending:null,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:Tu},Cu=Cu.dispatch=zh.bind(null,N$3,Cu),[Bu.memoizedState,Cu]},useRef:function(Cu){var Tu=th();return Cu={current:Cu},Tu.memoizedState=Cu},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(Cu,Tu){var Pu=yh(Cu),Bu=Pu[0],Lu=Pu[1];return Eh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Lu(Cu)}finally{kh.suspense=Ru}},[Cu,Tu]),Bu},useTransition:function(Cu){var Tu=yh(!1),Pu=Tu[0];return Tu=Tu[1],[Kh(Nh.bind(null,Tu,Cu),[Tu,Cu]),Pu]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(Cu,Tu){var Pu=wh(vh),Bu=Pu[0],Lu=Pu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Lu(Cu)}finally{kh.suspense=Ru}},[Cu,Tu]),Bu},useTransition:function(Cu){var Tu=wh(vh),Pu=Tu[0];return Tu=Tu[1],[Lh(Nh.bind(null,Tu,Cu),[Tu,Cu]),Pu]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(Cu,Tu){var Pu=xh(vh),Bu=Pu[0],Lu=Pu[1];return Fh(function(){var Ru=kh.suspense;kh.suspense=Tu===void 0?null:Tu;try{Lu(Cu)}finally{kh.suspense=Ru}},[Cu,Tu]),Bu},useTransition:function(Cu){var Tu=xh(vh),Pu=Tu[0];return Tu=Tu[1],[Lh(Nh.bind(null,Tu,Cu),[Tu,Cu]),Pu]}},Oh=null,Ph=null,Qh=!1;function Rh(Cu,Tu){var Pu=Sh(5,null,null,0);Pu.elementType="DELETED",Pu.type="DELETED",Pu.stateNode=Tu,Pu.return=Cu,Pu.effectTag=8,Cu.lastEffect!==null?(Cu.lastEffect.nextEffect=Pu,Cu.lastEffect=Pu):Cu.firstEffect=Cu.lastEffect=Pu}function Th(Cu,Tu){switch(Cu.tag){case 5:var Pu=Cu.type;return Tu=Tu.nodeType!==1||Pu.toLowerCase()!==Tu.nodeName.toLowerCase()?null:Tu,Tu!==null?(Cu.stateNode=Tu,!0):!1;case 6:return Tu=Cu.pendingProps===""||Tu.nodeType!==3?null:Tu,Tu!==null?(Cu.stateNode=Tu,!0):!1;case 13:return!1;default:return!1}}function Uh(Cu){if(Qh){var Tu=Ph;if(Tu){var Pu=Tu;if(!Th(Cu,Tu)){if(Tu=Jd$1(Pu.nextSibling),!Tu||!Th(Cu,Tu)){Cu.effectTag=Cu.effectTag&-1025|2,Qh=!1,Oh=Cu;return}Rh(Oh,Pu)}Oh=Cu,Ph=Jd$1(Tu.firstChild)}else Cu.effectTag=Cu.effectTag&-1025|2,Qh=!1,Oh=Cu}}function Vh(Cu){for(Cu=Cu.return;Cu!==null&&Cu.tag!==5&&Cu.tag!==3&&Cu.tag!==13;)Cu=Cu.return;Oh=Cu}function Wh(Cu){if(Cu!==Oh)return!1;if(!Qh)return Vh(Cu),Qh=!0,!1;var Tu=Cu.type;if(Cu.tag!==5||Tu!=="head"&&Tu!=="body"&&!Gd$1(Tu,Cu.memoizedProps))for(Tu=Ph;Tu;)Rh(Cu,Tu),Tu=Jd$1(Tu.nextSibling);if(Vh(Cu),Cu.tag===13){if(Cu=Cu.memoizedState,Cu=Cu!==null?Cu.dehydrated:null,!Cu)throw Error(u$3(317));e:{for(Cu=Cu.nextSibling,Tu=0;Cu;){if(Cu.nodeType===8){var Pu=Cu.data;if(Pu===Ad$1){if(Tu===0){Ph=Jd$1(Cu.nextSibling);break e}Tu--}else Pu!==zd$1&&Pu!==Cd$1&&Pu!==Bd$1||Tu++}Cu=Cu.nextSibling}Ph=null}}else Ph=Oh?Jd$1(Cu.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa$2.ReactCurrentOwner,rg=!1;function R$4(Cu,Tu,Pu,Bu){Tu.child=Cu===null?Yg(Tu,null,Pu,Bu):Xg(Tu,Cu.child,Pu,Bu)}function Zh(Cu,Tu,Pu,Bu,Lu){Pu=Pu.render;var Ru=Tu.ref;return qg(Tu,Lu),Bu=oh(Cu,Tu,Pu,Bu,Ru,Lu),Cu!==null&&!rg?(Tu.updateQueue=Cu.updateQueue,Tu.effectTag&=-517,Cu.expirationTime<=Lu&&(Cu.expirationTime=0),$h(Cu,Tu,Lu)):(Tu.effectTag|=1,R$4(Cu,Tu,Bu,Lu),Tu.child)}function ai$1(Cu,Tu,Pu,Bu,Lu,Ru){if(Cu===null){var Ou=Pu.type;return typeof Ou=="function"&&!bi$1(Ou)&&Ou.defaultProps===void 0&&Pu.compare===null&&Pu.defaultProps===void 0?(Tu.tag=15,Tu.type=Ou,ci$1(Cu,Tu,Ou,Bu,Lu,Ru)):(Cu=Ug(Pu.type,null,Bu,null,Tu.mode,Ru),Cu.ref=Tu.ref,Cu.return=Tu,Tu.child=Cu)}return Ou=Cu.child,Lu<Ru&&(Lu=Ou.memoizedProps,Pu=Pu.compare,Pu=Pu!==null?Pu:bf,Pu(Lu,Bu)&&Cu.ref===Tu.ref)?$h(Cu,Tu,Ru):(Tu.effectTag|=1,Cu=Sg(Ou,Bu),Cu.ref=Tu.ref,Cu.return=Tu,Tu.child=Cu)}function ci$1(Cu,Tu,Pu,Bu,Lu,Ru){return Cu!==null&&bf(Cu.memoizedProps,Bu)&&Cu.ref===Tu.ref&&(rg=!1,Lu<Ru)?(Tu.expirationTime=Cu.expirationTime,$h(Cu,Tu,Ru)):di$1(Cu,Tu,Pu,Bu,Ru)}function ei$2(Cu,Tu){var Pu=Tu.ref;(Cu===null&&Pu!==null||Cu!==null&&Cu.ref!==Pu)&&(Tu.effectTag|=128)}function di$1(Cu,Tu,Pu,Bu,Lu){var Ru=L$4(Pu)?Bf:J$2.current;return Ru=Cf(Tu,Ru),qg(Tu,Lu),Pu=oh(Cu,Tu,Pu,Bu,Ru,Lu),Cu!==null&&!rg?(Tu.updateQueue=Cu.updateQueue,Tu.effectTag&=-517,Cu.expirationTime<=Lu&&(Cu.expirationTime=0),$h(Cu,Tu,Lu)):(Tu.effectTag|=1,R$4(Cu,Tu,Pu,Lu),Tu.child)}function fi$1(Cu,Tu,Pu,Bu,Lu){if(L$4(Pu)){var Ru=!0;Gf(Tu)}else Ru=!1;if(qg(Tu,Lu),Tu.stateNode===null)Cu!==null&&(Cu.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Lg(Tu,Pu,Bu),Ng(Tu,Pu,Bu,Lu),Bu=!0;else if(Cu===null){var Ou=Tu.stateNode,Du=Tu.memoizedProps;Ou.props=Du;var ku=Ou.context,Fu=Pu.contextType;typeof Fu=="object"&&Fu!==null?Fu=sg(Fu):(Fu=L$4(Pu)?Bf:J$2.current,Fu=Cf(Tu,Fu));var Nu=Pu.getDerivedStateFromProps,Gu=typeof Nu=="function"||typeof Ou.getSnapshotBeforeUpdate=="function";Gu||typeof Ou.UNSAFE_componentWillReceiveProps!="function"&&typeof Ou.componentWillReceiveProps!="function"||(Du!==Bu||ku!==Fu)&&Mg(Tu,Ou,Bu,Fu),tg=!1;var zu=Tu.memoizedState;Ou.state=zu,zg(Tu,Bu,Ou,Lu),ku=Tu.memoizedState,Du!==Bu||zu!==ku||K$2.current||tg?(typeof Nu=="function"&&(Fg(Tu,Pu,Nu,Bu),ku=Tu.memoizedState),(Du=tg||Kg(Tu,Pu,Du,Bu,zu,ku,Fu))?(Gu||typeof Ou.UNSAFE_componentWillMount!="function"&&typeof Ou.componentWillMount!="function"||(typeof Ou.componentWillMount=="function"&&Ou.componentWillMount(),typeof Ou.UNSAFE_componentWillMount=="function"&&Ou.UNSAFE_componentWillMount()),typeof Ou.componentDidMount=="function"&&(Tu.effectTag|=4)):(typeof Ou.componentDidMount=="function"&&(Tu.effectTag|=4),Tu.memoizedProps=Bu,Tu.memoizedState=ku),Ou.props=Bu,Ou.state=ku,Ou.context=Fu,Bu=Du):(typeof Ou.componentDidMount=="function"&&(Tu.effectTag|=4),Bu=!1)}else Ou=Tu.stateNode,vg(Cu,Tu),Du=Tu.memoizedProps,Ou.props=Tu.type===Tu.elementType?Du:ig(Tu.type,Du),ku=Ou.context,Fu=Pu.contextType,typeof Fu=="object"&&Fu!==null?Fu=sg(Fu):(Fu=L$4(Pu)?Bf:J$2.current,Fu=Cf(Tu,Fu)),Nu=Pu.getDerivedStateFromProps,(Gu=typeof Nu=="function"||typeof Ou.getSnapshotBeforeUpdate=="function")||typeof Ou.UNSAFE_componentWillReceiveProps!="function"&&typeof Ou.componentWillReceiveProps!="function"||(Du!==Bu||ku!==Fu)&&Mg(Tu,Ou,Bu,Fu),tg=!1,ku=Tu.memoizedState,Ou.state=ku,zg(Tu,Bu,Ou,Lu),zu=Tu.memoizedState,Du!==Bu||ku!==zu||K$2.current||tg?(typeof Nu=="function"&&(Fg(Tu,Pu,Nu,Bu),zu=Tu.memoizedState),(Nu=tg||Kg(Tu,Pu,Du,Bu,ku,zu,Fu))?(Gu||typeof Ou.UNSAFE_componentWillUpdate!="function"&&typeof Ou.componentWillUpdate!="function"||(typeof Ou.componentWillUpdate=="function"&&Ou.componentWillUpdate(Bu,zu,Fu),typeof Ou.UNSAFE_componentWillUpdate=="function"&&Ou.UNSAFE_componentWillUpdate(Bu,zu,Fu)),typeof Ou.componentDidUpdate=="function"&&(Tu.effectTag|=4),typeof Ou.getSnapshotBeforeUpdate=="function"&&(Tu.effectTag|=256)):(typeof Ou.componentDidUpdate!="function"||Du===Cu.memoizedProps&&ku===Cu.memoizedState||(Tu.effectTag|=4),typeof Ou.getSnapshotBeforeUpdate!="function"||Du===Cu.memoizedProps&&ku===Cu.memoizedState||(Tu.effectTag|=256),Tu.memoizedProps=Bu,Tu.memoizedState=zu),Ou.props=Bu,Ou.state=zu,Ou.context=Fu,Bu=Nu):(typeof Ou.componentDidUpdate!="function"||Du===Cu.memoizedProps&&ku===Cu.memoizedState||(Tu.effectTag|=4),typeof Ou.getSnapshotBeforeUpdate!="function"||Du===Cu.memoizedProps&&ku===Cu.memoizedState||(Tu.effectTag|=256),Bu=!1);return gi$1(Cu,Tu,Pu,Bu,Ru,Lu)}function gi$1(Cu,Tu,Pu,Bu,Lu,Ru){ei$2(Cu,Tu);var Ou=(Tu.effectTag&64)!==0;if(!Bu&&!Ou)return Lu&&Hf(Tu,Pu,!1),$h(Cu,Tu,Ru);Bu=Tu.stateNode,Yh.current=Tu;var Du=Ou&&typeof Pu.getDerivedStateFromError!="function"?null:Bu.render();return Tu.effectTag|=1,Cu!==null&&Ou?(Tu.child=Xg(Tu,Cu.child,null,Ru),Tu.child=Xg(Tu,null,Du,Ru)):R$4(Cu,Tu,Du,Ru),Tu.memoizedState=Bu.state,Lu&&Hf(Tu,Pu,!0),Tu.child}function hi$1(Cu){var Tu=Cu.stateNode;Tu.pendingContext?Ef(Cu,Tu.pendingContext,Tu.pendingContext!==Tu.context):Tu.context&&Ef(Cu,Tu.context,!1),dh(Cu,Tu.containerInfo)}var ii$2={dehydrated:null,retryTime:0};function ji$2(Cu,Tu,Pu){var Bu=Tu.mode,Lu=Tu.pendingProps,Ru=M$3.current,Ou=!1,Du;if((Du=(Tu.effectTag&64)!==0)||(Du=(Ru&2)!==0&&(Cu===null||Cu.memoizedState!==null)),Du?(Ou=!0,Tu.effectTag&=-65):Cu!==null&&Cu.memoizedState===null||Lu.fallback===void 0||Lu.unstable_avoidThisFallback===!0||(Ru|=1),I$2(M$3,Ru&1),Cu===null){if(Lu.fallback!==void 0&&Uh(Tu),Ou){if(Ou=Lu.fallback,Lu=Wg(null,Bu,0,null),Lu.return=Tu,(Tu.mode&2)===0)for(Cu=Tu.memoizedState!==null?Tu.child.child:Tu.child,Lu.child=Cu;Cu!==null;)Cu.return=Lu,Cu=Cu.sibling;return Pu=Wg(Ou,Bu,Pu,null),Pu.return=Tu,Lu.sibling=Pu,Tu.memoizedState=ii$2,Tu.child=Lu,Pu}return Bu=Lu.children,Tu.memoizedState=null,Tu.child=Yg(Tu,null,Bu,Pu)}if(Cu.memoizedState!==null){if(Cu=Cu.child,Bu=Cu.sibling,Ou){if(Lu=Lu.fallback,Pu=Sg(Cu,Cu.pendingProps),Pu.return=Tu,(Tu.mode&2)===0&&(Ou=Tu.memoizedState!==null?Tu.child.child:Tu.child,Ou!==Cu.child))for(Pu.child=Ou;Ou!==null;)Ou.return=Pu,Ou=Ou.sibling;return Bu=Sg(Bu,Lu),Bu.return=Tu,Pu.sibling=Bu,Pu.childExpirationTime=0,Tu.memoizedState=ii$2,Tu.child=Pu,Bu}return Pu=Xg(Tu,Cu.child,Lu.children,Pu),Tu.memoizedState=null,Tu.child=Pu}if(Cu=Cu.child,Ou){if(Ou=Lu.fallback,Lu=Wg(null,Bu,0,null),Lu.return=Tu,Lu.child=Cu,Cu!==null&&(Cu.return=Lu),(Tu.mode&2)===0)for(Cu=Tu.memoizedState!==null?Tu.child.child:Tu.child,Lu.child=Cu;Cu!==null;)Cu.return=Lu,Cu=Cu.sibling;return Pu=Wg(Ou,Bu,Pu,null),Pu.return=Tu,Lu.sibling=Pu,Pu.effectTag|=2,Lu.childExpirationTime=0,Tu.memoizedState=ii$2,Tu.child=Lu,Pu}return Tu.memoizedState=null,Tu.child=Xg(Tu,Cu,Lu.children,Pu)}function ki$1(Cu,Tu){Cu.expirationTime<Tu&&(Cu.expirationTime=Tu);var Pu=Cu.alternate;Pu!==null&&Pu.expirationTime<Tu&&(Pu.expirationTime=Tu),pg(Cu.return,Tu)}function li$1(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=Cu.memoizedState;Ou===null?Cu.memoizedState={isBackwards:Tu,rendering:null,renderingStartTime:0,last:Bu,tail:Pu,tailExpiration:0,tailMode:Lu,lastEffect:Ru}:(Ou.isBackwards=Tu,Ou.rendering=null,Ou.renderingStartTime=0,Ou.last=Bu,Ou.tail=Pu,Ou.tailExpiration=0,Ou.tailMode=Lu,Ou.lastEffect=Ru)}function mi$1(Cu,Tu,Pu){var Bu=Tu.pendingProps,Lu=Bu.revealOrder,Ru=Bu.tail;if(R$4(Cu,Tu,Bu.children,Pu),Bu=M$3.current,(Bu&2)!==0)Bu=Bu&1|2,Tu.effectTag|=64;else{if(Cu!==null&&(Cu.effectTag&64)!==0)e:for(Cu=Tu.child;Cu!==null;){if(Cu.tag===13)Cu.memoizedState!==null&&ki$1(Cu,Pu);else if(Cu.tag===19)ki$1(Cu,Pu);else if(Cu.child!==null){Cu.child.return=Cu,Cu=Cu.child;continue}if(Cu===Tu)break e;for(;Cu.sibling===null;){if(Cu.return===null||Cu.return===Tu)break e;Cu=Cu.return}Cu.sibling.return=Cu.return,Cu=Cu.sibling}Bu&=1}if(I$2(M$3,Bu),(Tu.mode&2)===0)Tu.memoizedState=null;else switch(Lu){case"forwards":for(Pu=Tu.child,Lu=null;Pu!==null;)Cu=Pu.alternate,Cu!==null&&hh(Cu)===null&&(Lu=Pu),Pu=Pu.sibling;Pu=Lu,Pu===null?(Lu=Tu.child,Tu.child=null):(Lu=Pu.sibling,Pu.sibling=null),li$1(Tu,!1,Lu,Pu,Ru,Tu.lastEffect);break;case"backwards":for(Pu=null,Lu=Tu.child,Tu.child=null;Lu!==null;){if(Cu=Lu.alternate,Cu!==null&&hh(Cu)===null){Tu.child=Lu;break}Cu=Lu.sibling,Lu.sibling=Pu,Pu=Lu,Lu=Cu}li$1(Tu,!0,Pu,null,Ru,Tu.lastEffect);break;case"together":li$1(Tu,!1,null,null,void 0,Tu.lastEffect);break;default:Tu.memoizedState=null}return Tu.child}function $h(Cu,Tu,Pu){Cu!==null&&(Tu.dependencies=Cu.dependencies);var Bu=Tu.expirationTime;if(Bu!==0&&Bg(Bu),Tu.childExpirationTime<Pu)return null;if(Cu!==null&&Tu.child!==Cu.child)throw Error(u$3(153));if(Tu.child!==null){for(Cu=Tu.child,Pu=Sg(Cu,Cu.pendingProps),Tu.child=Pu,Pu.return=Tu;Cu.sibling!==null;)Cu=Cu.sibling,Pu=Pu.sibling=Sg(Cu,Cu.pendingProps),Pu.return=Tu;Pu.sibling=null}return Tu.child}var ni$2,oi$2,pi$1,qi$2;ni$2=function(Cu,Tu){for(var Pu=Tu.child;Pu!==null;){if(Pu.tag===5||Pu.tag===6)Cu.appendChild(Pu.stateNode);else if(Pu.tag!==4&&Pu.child!==null){Pu.child.return=Pu,Pu=Pu.child;continue}if(Pu===Tu)break;for(;Pu.sibling===null;){if(Pu.return===null||Pu.return===Tu)return;Pu=Pu.return}Pu.sibling.return=Pu.return,Pu=Pu.sibling}};oi$2=function(){};pi$1=function(Cu,Tu,Pu,Bu,Lu){var Ru=Cu.memoizedProps;if(Ru!==Bu){var Ou=Tu.stateNode;switch(ch($g.current),Cu=null,Pu){case"input":Ru=zb$1(Ou,Ru),Bu=zb$1(Ou,Bu),Cu=[];break;case"option":Ru=Gb$1(Ou,Ru),Bu=Gb$1(Ou,Bu),Cu=[];break;case"select":Ru=n$4({},Ru,{value:void 0}),Bu=n$4({},Bu,{value:void 0}),Cu=[];break;case"textarea":Ru=Ib$1(Ou,Ru),Bu=Ib$1(Ou,Bu),Cu=[];break;default:typeof Ru.onClick!="function"&&typeof Bu.onClick=="function"&&(Ou.onclick=sd)}od$1(Pu,Bu);var Du,ku;Pu=null;for(Du in Ru)if(!Bu.hasOwnProperty(Du)&&Ru.hasOwnProperty(Du)&&Ru[Du]!=null)if(Du==="style")for(ku in Ou=Ru[Du],Ou)Ou.hasOwnProperty(ku)&&(Pu||(Pu={}),Pu[ku]="");else Du!=="dangerouslySetInnerHTML"&&Du!=="children"&&Du!=="suppressContentEditableWarning"&&Du!=="suppressHydrationWarning"&&Du!=="autoFocus"&&(va$1.hasOwnProperty(Du)?Cu||(Cu=[]):(Cu=Cu||[]).push(Du,null));for(Du in Bu){var Fu=Bu[Du];if(Ou=Ru!=null?Ru[Du]:void 0,Bu.hasOwnProperty(Du)&&Fu!==Ou&&(Fu!=null||Ou!=null))if(Du==="style")if(Ou){for(ku in Ou)!Ou.hasOwnProperty(ku)||Fu&&Fu.hasOwnProperty(ku)||(Pu||(Pu={}),Pu[ku]="");for(ku in Fu)Fu.hasOwnProperty(ku)&&Ou[ku]!==Fu[ku]&&(Pu||(Pu={}),Pu[ku]=Fu[ku])}else Pu||(Cu||(Cu=[]),Cu.push(Du,Pu)),Pu=Fu;else Du==="dangerouslySetInnerHTML"?(Fu=Fu?Fu.__html:void 0,Ou=Ou?Ou.__html:void 0,Fu!=null&&Ou!==Fu&&(Cu=Cu||[]).push(Du,Fu)):Du==="children"?Ou===Fu||typeof Fu!="string"&&typeof Fu!="number"||(Cu=Cu||[]).push(Du,""+Fu):Du!=="suppressContentEditableWarning"&&Du!=="suppressHydrationWarning"&&(va$1.hasOwnProperty(Du)?(Fu!=null&&rd$1(Lu,Du),Cu||Ou===Fu||(Cu=[])):(Cu=Cu||[]).push(Du,Fu))}Pu&&(Cu=Cu||[]).push("style",Pu),Lu=Cu,(Tu.updateQueue=Lu)&&(Tu.effectTag|=4)}};qi$2=function(Cu,Tu,Pu,Bu){Pu!==Bu&&(Tu.effectTag|=4)};function ri$2(Cu,Tu){switch(Cu.tailMode){case"hidden":Tu=Cu.tail;for(var Pu=null;Tu!==null;)Tu.alternate!==null&&(Pu=Tu),Tu=Tu.sibling;Pu===null?Cu.tail=null:Pu.sibling=null;break;case"collapsed":Pu=Cu.tail;for(var Bu=null;Pu!==null;)Pu.alternate!==null&&(Bu=Pu),Pu=Pu.sibling;Bu===null?Tu||Cu.tail===null?Cu.tail=null:Cu.tail.sibling=null:Bu.sibling=null}}function si$1(Cu,Tu,Pu){var Bu=Tu.pendingProps;switch(Tu.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L$4(Tu.type)&&Df(),null;case 3:return eh(),H$3(K$2),H$3(J$2),Pu=Tu.stateNode,Pu.pendingContext&&(Pu.context=Pu.pendingContext,Pu.pendingContext=null),Cu!==null&&Cu.child!==null||!Wh(Tu)||(Tu.effectTag|=4),oi$2(Tu),null;case 5:gh(Tu),Pu=ch(bh.current);var Lu=Tu.type;if(Cu!==null&&Tu.stateNode!=null)pi$1(Cu,Tu,Lu,Bu,Pu),Cu.ref!==Tu.ref&&(Tu.effectTag|=128);else{if(!Bu){if(Tu.stateNode===null)throw Error(u$3(166));return null}if(Cu=ch($g.current),Wh(Tu)){Bu=Tu.stateNode,Lu=Tu.type;var Ru=Tu.memoizedProps;switch(Bu[Md$1]=Tu,Bu[Nd$1]=Ru,Lu){case"iframe":case"object":case"embed":F$3("load",Bu);break;case"video":case"audio":for(Cu=0;Cu<ac.length;Cu++)F$3(ac[Cu],Bu);break;case"source":F$3("error",Bu);break;case"img":case"image":case"link":F$3("error",Bu),F$3("load",Bu);break;case"form":F$3("reset",Bu),F$3("submit",Bu);break;case"details":F$3("toggle",Bu);break;case"input":Ab$1(Bu,Ru),F$3("invalid",Bu),rd$1(Pu,"onChange");break;case"select":Bu._wrapperState={wasMultiple:!!Ru.multiple},F$3("invalid",Bu),rd$1(Pu,"onChange");break;case"textarea":Jb$1(Bu,Ru),F$3("invalid",Bu),rd$1(Pu,"onChange")}od$1(Lu,Ru),Cu=null;for(var Ou in Ru)if(Ru.hasOwnProperty(Ou)){var Du=Ru[Ou];Ou==="children"?typeof Du=="string"?Bu.textContent!==Du&&(Cu=["children",Du]):typeof Du=="number"&&Bu.textContent!==""+Du&&(Cu=["children",""+Du]):va$1.hasOwnProperty(Ou)&&Du!=null&&rd$1(Pu,Ou)}switch(Lu){case"input":xb$1(Bu),Eb$1(Bu,Ru,!0);break;case"textarea":xb$1(Bu),Lb$1(Bu);break;case"select":case"option":break;default:typeof Ru.onClick=="function"&&(Bu.onclick=sd)}Pu=Cu,Tu.updateQueue=Pu,Pu!==null&&(Tu.effectTag|=4)}else{switch(Ou=Pu.nodeType===9?Pu:Pu.ownerDocument,Cu===qd&&(Cu=Nb$1(Lu)),Cu===qd?Lu==="script"?(Cu=Ou.createElement("div"),Cu.innerHTML="<script><\/script>",Cu=Cu.removeChild(Cu.firstChild)):typeof Bu.is=="string"?Cu=Ou.createElement(Lu,{is:Bu.is}):(Cu=Ou.createElement(Lu),Lu==="select"&&(Ou=Cu,Bu.multiple?Ou.multiple=!0:Bu.size&&(Ou.size=Bu.size))):Cu=Ou.createElementNS(Cu,Lu),Cu[Md$1]=Tu,Cu[Nd$1]=Bu,ni$2(Cu,Tu,!1,!1),Tu.stateNode=Cu,Ou=pd$1(Lu,Bu),Lu){case"iframe":case"object":case"embed":F$3("load",Cu),Du=Bu;break;case"video":case"audio":for(Du=0;Du<ac.length;Du++)F$3(ac[Du],Cu);Du=Bu;break;case"source":F$3("error",Cu),Du=Bu;break;case"img":case"image":case"link":F$3("error",Cu),F$3("load",Cu),Du=Bu;break;case"form":F$3("reset",Cu),F$3("submit",Cu),Du=Bu;break;case"details":F$3("toggle",Cu),Du=Bu;break;case"input":Ab$1(Cu,Bu),Du=zb$1(Cu,Bu),F$3("invalid",Cu),rd$1(Pu,"onChange");break;case"option":Du=Gb$1(Cu,Bu);break;case"select":Cu._wrapperState={wasMultiple:!!Bu.multiple},Du=n$4({},Bu,{value:void 0}),F$3("invalid",Cu),rd$1(Pu,"onChange");break;case"textarea":Jb$1(Cu,Bu),Du=Ib$1(Cu,Bu),F$3("invalid",Cu),rd$1(Pu,"onChange");break;default:Du=Bu}od$1(Lu,Du);var ku=Du;for(Ru in ku)if(ku.hasOwnProperty(Ru)){var Fu=ku[Ru];Ru==="style"?md$1(Cu,Fu):Ru==="dangerouslySetInnerHTML"?(Fu=Fu?Fu.__html:void 0,Fu!=null&&Qb$1(Cu,Fu)):Ru==="children"?typeof Fu=="string"?(Lu!=="textarea"||Fu!=="")&&Rb$1(Cu,Fu):typeof Fu=="number"&&Rb$1(Cu,""+Fu):Ru!=="suppressContentEditableWarning"&&Ru!=="suppressHydrationWarning"&&Ru!=="autoFocus"&&(va$1.hasOwnProperty(Ru)?Fu!=null&&rd$1(Pu,Ru):Fu!=null&&Xa$2(Cu,Ru,Fu,Ou))}switch(Lu){case"input":xb$1(Cu),Eb$1(Cu,Bu,!1);break;case"textarea":xb$1(Cu),Lb$1(Cu);break;case"option":Bu.value!=null&&Cu.setAttribute("value",""+rb$1(Bu.value));break;case"select":Cu.multiple=!!Bu.multiple,Pu=Bu.value,Pu!=null?Hb$1(Cu,!!Bu.multiple,Pu,!1):Bu.defaultValue!=null&&Hb$1(Cu,!!Bu.multiple,Bu.defaultValue,!0);break;default:typeof Du.onClick=="function"&&(Cu.onclick=sd)}Fd$1(Lu,Bu)&&(Tu.effectTag|=4)}Tu.ref!==null&&(Tu.effectTag|=128)}return null;case 6:if(Cu&&Tu.stateNode!=null)qi$2(Cu,Tu,Cu.memoizedProps,Bu);else{if(typeof Bu!="string"&&Tu.stateNode===null)throw Error(u$3(166));Pu=ch(bh.current),ch($g.current),Wh(Tu)?(Pu=Tu.stateNode,Bu=Tu.memoizedProps,Pu[Md$1]=Tu,Pu.nodeValue!==Bu&&(Tu.effectTag|=4)):(Pu=(Pu.nodeType===9?Pu:Pu.ownerDocument).createTextNode(Bu),Pu[Md$1]=Tu,Tu.stateNode=Pu)}return null;case 13:return H$3(M$3),Bu=Tu.memoizedState,(Tu.effectTag&64)!==0?(Tu.expirationTime=Pu,Tu):(Pu=Bu!==null,Bu=!1,Cu===null?Tu.memoizedProps.fallback!==void 0&&Wh(Tu):(Lu=Cu.memoizedState,Bu=Lu!==null,Pu||Lu===null||(Lu=Cu.child.sibling,Lu!==null&&(Ru=Tu.firstEffect,Ru!==null?(Tu.firstEffect=Lu,Lu.nextEffect=Ru):(Tu.firstEffect=Tu.lastEffect=Lu,Lu.nextEffect=null),Lu.effectTag=8))),Pu&&!Bu&&(Tu.mode&2)!==0&&(Cu===null&&Tu.memoizedProps.unstable_avoidThisFallback!==!0||(M$3.current&1)!==0?S$2===ti$2&&(S$2=ui$1):((S$2===ti$2||S$2===ui$1)&&(S$2=vi$1),wi$2!==0&&T$1!==null&&(xi$1(T$1,U$2),yi$2(T$1,wi$2)))),(Pu||Bu)&&(Tu.effectTag|=4),null);case 4:return eh(),oi$2(Tu),null;case 10:return og(Tu),null;case 17:return L$4(Tu.type)&&Df(),null;case 19:if(H$3(M$3),Bu=Tu.memoizedState,Bu===null)return null;if(Lu=(Tu.effectTag&64)!==0,Ru=Bu.rendering,Ru===null){if(Lu)ri$2(Bu,!1);else if(S$2!==ti$2||Cu!==null&&(Cu.effectTag&64)!==0)for(Ru=Tu.child;Ru!==null;){if(Cu=hh(Ru),Cu!==null){for(Tu.effectTag|=64,ri$2(Bu,!1),Lu=Cu.updateQueue,Lu!==null&&(Tu.updateQueue=Lu,Tu.effectTag|=4),Bu.lastEffect===null&&(Tu.firstEffect=null),Tu.lastEffect=Bu.lastEffect,Bu=Tu.child;Bu!==null;)Lu=Bu,Ru=Pu,Lu.effectTag&=2,Lu.nextEffect=null,Lu.firstEffect=null,Lu.lastEffect=null,Cu=Lu.alternate,Cu===null?(Lu.childExpirationTime=0,Lu.expirationTime=Ru,Lu.child=null,Lu.memoizedProps=null,Lu.memoizedState=null,Lu.updateQueue=null,Lu.dependencies=null):(Lu.childExpirationTime=Cu.childExpirationTime,Lu.expirationTime=Cu.expirationTime,Lu.child=Cu.child,Lu.memoizedProps=Cu.memoizedProps,Lu.memoizedState=Cu.memoizedState,Lu.updateQueue=Cu.updateQueue,Ru=Cu.dependencies,Lu.dependencies=Ru===null?null:{expirationTime:Ru.expirationTime,firstContext:Ru.firstContext,responders:Ru.responders}),Bu=Bu.sibling;return I$2(M$3,M$3.current&1|2),Tu.child}Ru=Ru.sibling}}else{if(!Lu)if(Cu=hh(Ru),Cu!==null){if(Tu.effectTag|=64,Lu=!0,Pu=Cu.updateQueue,Pu!==null&&(Tu.updateQueue=Pu,Tu.effectTag|=4),ri$2(Bu,!0),Bu.tail===null&&Bu.tailMode==="hidden"&&!Ru.alternate)return Tu=Tu.lastEffect=Bu.lastEffect,Tu!==null&&(Tu.nextEffect=null),null}else 2*$f()-Bu.renderingStartTime>Bu.tailExpiration&&1<Pu&&(Tu.effectTag|=64,Lu=!0,ri$2(Bu,!1),Tu.expirationTime=Tu.childExpirationTime=Pu-1);Bu.isBackwards?(Ru.sibling=Tu.child,Tu.child=Ru):(Pu=Bu.last,Pu!==null?Pu.sibling=Ru:Tu.child=Ru,Bu.last=Ru)}return Bu.tail!==null?(Bu.tailExpiration===0&&(Bu.tailExpiration=$f()+500),Pu=Bu.tail,Bu.rendering=Pu,Bu.tail=Pu.sibling,Bu.lastEffect=Tu.lastEffect,Bu.renderingStartTime=$f(),Pu.sibling=null,Tu=M$3.current,I$2(M$3,Lu?Tu&1|2:Tu&1),Pu):null}throw Error(u$3(156,Tu.tag))}function zi$2(Cu){switch(Cu.tag){case 1:L$4(Cu.type)&&Df();var Tu=Cu.effectTag;return Tu&4096?(Cu.effectTag=Tu&-4097|64,Cu):null;case 3:if(eh(),H$3(K$2),H$3(J$2),Tu=Cu.effectTag,(Tu&64)!==0)throw Error(u$3(285));return Cu.effectTag=Tu&-4097|64,Cu;case 5:return gh(Cu),null;case 13:return H$3(M$3),Tu=Cu.effectTag,Tu&4096?(Cu.effectTag=Tu&-4097|64,Cu):null;case 19:return H$3(M$3),null;case 4:return eh(),null;case 10:return og(Cu),null;default:return null}}function Ai$1(Cu,Tu){return{value:Cu,source:Tu,stack:qb$1(Tu)}}var Bi$2=typeof WeakSet=="function"?WeakSet:Set;function Ci$2(Cu,Tu){var Pu=Tu.source,Bu=Tu.stack;Bu===null&&Pu!==null&&(Bu=qb$1(Pu)),Pu!==null&&pb$1(Pu.type),Tu=Tu.value,Cu!==null&&Cu.tag===1&&pb$1(Cu.type);try{console.error(Tu)}catch(Lu){setTimeout(function(){throw Lu})}}function Di$2(Cu,Tu){try{Tu.props=Cu.memoizedProps,Tu.state=Cu.memoizedState,Tu.componentWillUnmount()}catch(Pu){Ei$2(Cu,Pu)}}function Fi$1(Cu){var Tu=Cu.ref;if(Tu!==null)if(typeof Tu=="function")try{Tu(null)}catch(Pu){Ei$2(Cu,Pu)}else Tu.current=null}function Gi$1(Cu,Tu){switch(Tu.tag){case 0:case 11:case 15:case 22:return;case 1:if(Tu.effectTag&256&&Cu!==null){var Pu=Cu.memoizedProps,Bu=Cu.memoizedState;Cu=Tu.stateNode,Tu=Cu.getSnapshotBeforeUpdate(Tu.elementType===Tu.type?Pu:ig(Tu.type,Pu),Bu),Cu.__reactInternalSnapshotBeforeUpdate=Tu}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u$3(163))}function Hi$2(Cu,Tu){if(Tu=Tu.updateQueue,Tu=Tu!==null?Tu.lastEffect:null,Tu!==null){var Pu=Tu=Tu.next;do{if((Pu.tag&Cu)===Cu){var Bu=Pu.destroy;Pu.destroy=void 0,Bu!==void 0&&Bu()}Pu=Pu.next}while(Pu!==Tu)}}function Ii$1(Cu,Tu){if(Tu=Tu.updateQueue,Tu=Tu!==null?Tu.lastEffect:null,Tu!==null){var Pu=Tu=Tu.next;do{if((Pu.tag&Cu)===Cu){var Bu=Pu.create;Pu.destroy=Bu()}Pu=Pu.next}while(Pu!==Tu)}}function Ji$2(Cu,Tu,Pu){switch(Pu.tag){case 0:case 11:case 15:case 22:Ii$1(3,Pu);return;case 1:if(Cu=Pu.stateNode,Pu.effectTag&4)if(Tu===null)Cu.componentDidMount();else{var Bu=Pu.elementType===Pu.type?Tu.memoizedProps:ig(Pu.type,Tu.memoizedProps);Cu.componentDidUpdate(Bu,Tu.memoizedState,Cu.__reactInternalSnapshotBeforeUpdate)}Tu=Pu.updateQueue,Tu!==null&&Cg(Pu,Tu,Cu);return;case 3:if(Tu=Pu.updateQueue,Tu!==null){if(Cu=null,Pu.child!==null)switch(Pu.child.tag){case 5:Cu=Pu.child.stateNode;break;case 1:Cu=Pu.child.stateNode}Cg(Pu,Tu,Cu)}return;case 5:Cu=Pu.stateNode,Tu===null&&Pu.effectTag&4&&Fd$1(Pu.type,Pu.memoizedProps)&&Cu.focus();return;case 6:return;case 4:return;case 12:return;case 13:Pu.memoizedState===null&&(Pu=Pu.alternate,Pu!==null&&(Pu=Pu.memoizedState,Pu!==null&&(Pu=Pu.dehydrated,Pu!==null&&Vc$1(Pu))));return;case 19:case 17:case 20:case 21:return}throw Error(u$3(163))}function Ki$2(Cu,Tu,Pu){switch(typeof Li$2=="function"&&Li$2(Tu),Tu.tag){case 0:case 11:case 14:case 15:case 22:if(Cu=Tu.updateQueue,Cu!==null&&(Cu=Cu.lastEffect,Cu!==null)){var Bu=Cu.next;cg(97<Pu?97:Pu,function(){var Lu=Bu;do{var Ru=Lu.destroy;if(Ru!==void 0){var Ou=Tu;try{Ru()}catch(Du){Ei$2(Ou,Du)}}Lu=Lu.next}while(Lu!==Bu)})}break;case 1:Fi$1(Tu),Pu=Tu.stateNode,typeof Pu.componentWillUnmount=="function"&&Di$2(Tu,Pu);break;case 5:Fi$1(Tu);break;case 4:Mi$2(Cu,Tu,Pu)}}function Ni$2(Cu){var Tu=Cu.alternate;Cu.return=null,Cu.child=null,Cu.memoizedState=null,Cu.updateQueue=null,Cu.dependencies=null,Cu.alternate=null,Cu.firstEffect=null,Cu.lastEffect=null,Cu.pendingProps=null,Cu.memoizedProps=null,Cu.stateNode=null,Tu!==null&&Ni$2(Tu)}function Oi$2(Cu){return Cu.tag===5||Cu.tag===3||Cu.tag===4}function Pi$1(Cu){e:{for(var Tu=Cu.return;Tu!==null;){if(Oi$2(Tu)){var Pu=Tu;break e}Tu=Tu.return}throw Error(u$3(160))}switch(Tu=Pu.stateNode,Pu.tag){case 5:var Bu=!1;break;case 3:Tu=Tu.containerInfo,Bu=!0;break;case 4:Tu=Tu.containerInfo,Bu=!0;break;default:throw Error(u$3(161))}Pu.effectTag&16&&(Rb$1(Tu,""),Pu.effectTag&=-17);e:t:for(Pu=Cu;;){for(;Pu.sibling===null;){if(Pu.return===null||Oi$2(Pu.return)){Pu=null;break e}Pu=Pu.return}for(Pu.sibling.return=Pu.return,Pu=Pu.sibling;Pu.tag!==5&&Pu.tag!==6&&Pu.tag!==18;){if(Pu.effectTag&2||Pu.child===null||Pu.tag===4)continue t;Pu.child.return=Pu,Pu=Pu.child}if(!(Pu.effectTag&2)){Pu=Pu.stateNode;break e}}Bu?Qi$2(Cu,Pu,Tu):Ri$2(Cu,Pu,Tu)}function Qi$2(Cu,Tu,Pu){var Bu=Cu.tag,Lu=Bu===5||Bu===6;if(Lu)Cu=Lu?Cu.stateNode:Cu.stateNode.instance,Tu?Pu.nodeType===8?Pu.parentNode.insertBefore(Cu,Tu):Pu.insertBefore(Cu,Tu):(Pu.nodeType===8?(Tu=Pu.parentNode,Tu.insertBefore(Cu,Pu)):(Tu=Pu,Tu.appendChild(Cu)),Pu=Pu._reactRootContainer,Pu!=null||Tu.onclick!==null||(Tu.onclick=sd));else if(Bu!==4&&(Cu=Cu.child,Cu!==null))for(Qi$2(Cu,Tu,Pu),Cu=Cu.sibling;Cu!==null;)Qi$2(Cu,Tu,Pu),Cu=Cu.sibling}function Ri$2(Cu,Tu,Pu){var Bu=Cu.tag,Lu=Bu===5||Bu===6;if(Lu)Cu=Lu?Cu.stateNode:Cu.stateNode.instance,Tu?Pu.insertBefore(Cu,Tu):Pu.appendChild(Cu);else if(Bu!==4&&(Cu=Cu.child,Cu!==null))for(Ri$2(Cu,Tu,Pu),Cu=Cu.sibling;Cu!==null;)Ri$2(Cu,Tu,Pu),Cu=Cu.sibling}function Mi$2(Cu,Tu,Pu){for(var Bu=Tu,Lu=!1,Ru,Ou;;){if(!Lu){Lu=Bu.return;e:for(;;){if(Lu===null)throw Error(u$3(160));switch(Ru=Lu.stateNode,Lu.tag){case 5:Ou=!1;break e;case 3:Ru=Ru.containerInfo,Ou=!0;break e;case 4:Ru=Ru.containerInfo,Ou=!0;break e}Lu=Lu.return}Lu=!0}if(Bu.tag===5||Bu.tag===6){e:for(var Du=Cu,ku=Bu,Fu=Pu,Nu=ku;;)if(Ki$2(Du,Nu,Fu),Nu.child!==null&&Nu.tag!==4)Nu.child.return=Nu,Nu=Nu.child;else{if(Nu===ku)break e;for(;Nu.sibling===null;){if(Nu.return===null||Nu.return===ku)break e;Nu=Nu.return}Nu.sibling.return=Nu.return,Nu=Nu.sibling}Ou?(Du=Ru,ku=Bu.stateNode,Du.nodeType===8?Du.parentNode.removeChild(ku):Du.removeChild(ku)):Ru.removeChild(Bu.stateNode)}else if(Bu.tag===4){if(Bu.child!==null){Ru=Bu.stateNode.containerInfo,Ou=!0,Bu.child.return=Bu,Bu=Bu.child;continue}}else if(Ki$2(Cu,Bu,Pu),Bu.child!==null){Bu.child.return=Bu,Bu=Bu.child;continue}if(Bu===Tu)break;for(;Bu.sibling===null;){if(Bu.return===null||Bu.return===Tu)return;Bu=Bu.return,Bu.tag===4&&(Lu=!1)}Bu.sibling.return=Bu.return,Bu=Bu.sibling}}function Si$1(Cu,Tu){switch(Tu.tag){case 0:case 11:case 14:case 15:case 22:Hi$2(3,Tu);return;case 1:return;case 5:var Pu=Tu.stateNode;if(Pu!=null){var Bu=Tu.memoizedProps,Lu=Cu!==null?Cu.memoizedProps:Bu;Cu=Tu.type;var Ru=Tu.updateQueue;if(Tu.updateQueue=null,Ru!==null){for(Pu[Nd$1]=Bu,Cu==="input"&&Bu.type==="radio"&&Bu.name!=null&&Bb$1(Pu,Bu),pd$1(Cu,Lu),Tu=pd$1(Cu,Bu),Lu=0;Lu<Ru.length;Lu+=2){var Ou=Ru[Lu],Du=Ru[Lu+1];Ou==="style"?md$1(Pu,Du):Ou==="dangerouslySetInnerHTML"?Qb$1(Pu,Du):Ou==="children"?Rb$1(Pu,Du):Xa$2(Pu,Ou,Du,Tu)}switch(Cu){case"input":Cb$1(Pu,Bu);break;case"textarea":Kb$1(Pu,Bu);break;case"select":Tu=Pu._wrapperState.wasMultiple,Pu._wrapperState.wasMultiple=!!Bu.multiple,Cu=Bu.value,Cu!=null?Hb$1(Pu,!!Bu.multiple,Cu,!1):Tu!==!!Bu.multiple&&(Bu.defaultValue!=null?Hb$1(Pu,!!Bu.multiple,Bu.defaultValue,!0):Hb$1(Pu,!!Bu.multiple,Bu.multiple?[]:"",!1))}}}return;case 6:if(Tu.stateNode===null)throw Error(u$3(162));Tu.stateNode.nodeValue=Tu.memoizedProps;return;case 3:Tu=Tu.stateNode,Tu.hydrate&&(Tu.hydrate=!1,Vc$1(Tu.containerInfo));return;case 12:return;case 13:if(Pu=Tu,Tu.memoizedState===null?Bu=!1:(Bu=!0,Pu=Tu.child,Ti$1=$f()),Pu!==null)e:for(Cu=Pu;;){if(Cu.tag===5)Ru=Cu.stateNode,Bu?(Ru=Ru.style,typeof Ru.setProperty=="function"?Ru.setProperty("display","none","important"):Ru.display="none"):(Ru=Cu.stateNode,Lu=Cu.memoizedProps.style,Lu=Lu!=null&&Lu.hasOwnProperty("display")?Lu.display:null,Ru.style.display=ld$1("display",Lu));else if(Cu.tag===6)Cu.stateNode.nodeValue=Bu?"":Cu.memoizedProps;else if(Cu.tag===13&&Cu.memoizedState!==null&&Cu.memoizedState.dehydrated===null){Ru=Cu.child.sibling,Ru.return=Cu,Cu=Ru;continue}else if(Cu.child!==null){Cu.child.return=Cu,Cu=Cu.child;continue}if(Cu===Pu)break;for(;Cu.sibling===null;){if(Cu.return===null||Cu.return===Pu)break e;Cu=Cu.return}Cu.sibling.return=Cu.return,Cu=Cu.sibling}Ui$2(Tu);return;case 19:Ui$2(Tu);return;case 17:return}throw Error(u$3(163))}function Ui$2(Cu){var Tu=Cu.updateQueue;if(Tu!==null){Cu.updateQueue=null;var Pu=Cu.stateNode;Pu===null&&(Pu=Cu.stateNode=new Bi$2),Tu.forEach(function(Bu){var Lu=Vi$2.bind(null,Cu,Bu);Pu.has(Bu)||(Pu.add(Bu),Bu.then(Lu,Lu))})}}var Wi$2=typeof WeakMap=="function"?WeakMap:Map;function Xi$1(Cu,Tu,Pu){Pu=wg(Pu,null),Pu.tag=3,Pu.payload={element:null};var Bu=Tu.value;return Pu.callback=function(){Yi$2||(Yi$2=!0,Zi$2=Bu),Ci$2(Cu,Tu)},Pu}function $i$1(Cu,Tu,Pu){Pu=wg(Pu,null),Pu.tag=3;var Bu=Cu.type.getDerivedStateFromError;if(typeof Bu=="function"){var Lu=Tu.value;Pu.payload=function(){return Ci$2(Cu,Tu),Bu(Lu)}}var Ru=Cu.stateNode;return Ru!==null&&typeof Ru.componentDidCatch=="function"&&(Pu.callback=function(){typeof Bu!="function"&&(aj===null?aj=new Set([this]):aj.add(this),Ci$2(Cu,Tu));var Ou=Tu.stack;this.componentDidCatch(Tu.value,{componentStack:Ou!==null?Ou:""})}),Pu}var bj=Math.ceil,cj=Wa$2.ReactCurrentDispatcher,dj=Wa$2.ReactCurrentOwner,V$2=0,ej=8,fj=16,gj=32,ti$2=0,hj=1,ij=2,ui$1=3,vi$1=4,jj=5,W$4=V$2,T$1=null,X$2=null,U$2=0,S$2=ti$2,kj=null,lj=1073741823,mj=1073741823,nj=null,wi$2=0,oj=!1,Ti$1=0,pj=500,Y$2=null,Yi$2=!1,Zi$2=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W$4&(fj|gj))!==V$2?1073741821-($f()/10|0):wj!==0?wj:wj=1073741821-($f()/10|0)}function Hg(Cu,Tu,Pu){if(Tu=Tu.mode,(Tu&2)===0)return 1073741823;var Bu=ag();if((Tu&4)===0)return Bu===99?1073741823:1073741822;if((W$4&fj)!==V$2)return U$2;if(Pu!==null)Cu=hg(Cu,Pu.timeoutMs|0||5e3,250);else switch(Bu){case 99:Cu=1073741823;break;case 98:Cu=hg(Cu,150,100);break;case 97:case 96:Cu=hg(Cu,5e3,250);break;case 95:Cu=2;break;default:throw Error(u$3(326))}return T$1!==null&&Cu===U$2&&--Cu,Cu}function Ig(Cu,Tu){if(50<uj)throw uj=0,vj=null,Error(u$3(185));if(Cu=xj(Cu,Tu),Cu!==null){var Pu=ag();Tu===1073741823?(W$4&ej)!==V$2&&(W$4&(fj|gj))===V$2?yj(Cu):(Z$2(Cu),W$4===V$2&&gg()):Z$2(Cu),(W$4&4)===V$2||Pu!==98&&Pu!==99||(tj===null?tj=new Map([[Cu,Tu]]):(Pu=tj.get(Cu),(Pu===void 0||Pu>Tu)&&tj.set(Cu,Tu)))}}function xj(Cu,Tu){Cu.expirationTime<Tu&&(Cu.expirationTime=Tu);var Pu=Cu.alternate;Pu!==null&&Pu.expirationTime<Tu&&(Pu.expirationTime=Tu);var Bu=Cu.return,Lu=null;if(Bu===null&&Cu.tag===3)Lu=Cu.stateNode;else for(;Bu!==null;){if(Pu=Bu.alternate,Bu.childExpirationTime<Tu&&(Bu.childExpirationTime=Tu),Pu!==null&&Pu.childExpirationTime<Tu&&(Pu.childExpirationTime=Tu),Bu.return===null&&Bu.tag===3){Lu=Bu.stateNode;break}Bu=Bu.return}return Lu!==null&&(T$1===Lu&&(Bg(Tu),S$2===vi$1&&xi$1(Lu,U$2)),yi$2(Lu,Tu)),Lu}function zj(Cu){var Tu=Cu.lastExpiredTime;if(Tu!==0||(Tu=Cu.firstPendingTime,!Aj(Cu,Tu)))return Tu;var Pu=Cu.lastPingedTime;return Cu=Cu.nextKnownPendingLevel,Cu=Pu>Cu?Pu:Cu,2>=Cu&&Tu!==Cu?0:Cu}function Z$2(Cu){if(Cu.lastExpiredTime!==0)Cu.callbackExpirationTime=1073741823,Cu.callbackPriority=99,Cu.callbackNode=eg(yj.bind(null,Cu));else{var Tu=zj(Cu),Pu=Cu.callbackNode;if(Tu===0)Pu!==null&&(Cu.callbackNode=null,Cu.callbackExpirationTime=0,Cu.callbackPriority=90);else{var Bu=Gg();if(Tu===1073741823?Bu=99:Tu===1||Tu===2?Bu=95:(Bu=10*(1073741821-Tu)-10*(1073741821-Bu),Bu=0>=Bu?99:250>=Bu?98:5250>=Bu?97:95),Pu!==null){var Lu=Cu.callbackPriority;if(Cu.callbackExpirationTime===Tu&&Lu>=Bu)return;Pu!==Tf$1&&Kf(Pu)}Cu.callbackExpirationTime=Tu,Cu.callbackPriority=Bu,Tu=Tu===1073741823?eg(yj.bind(null,Cu)):dg(Bu,Bj.bind(null,Cu),{timeout:10*(1073741821-Tu)-$f()}),Cu.callbackNode=Tu}}}function Bj(Cu,Tu){if(wj=0,Tu)return Tu=Gg(),Cj(Cu,Tu),Z$2(Cu),null;var Pu=zj(Cu);if(Pu!==0){if(Tu=Cu.callbackNode,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),Cu===T$1&&Pu===U$2||Ej(Cu,Pu),X$2!==null){var Bu=W$4;W$4|=fj;var Lu=Fj();do try{Gj();break}catch(Du){Hj(Cu,Du)}while(1);if(ng(),W$4=Bu,cj.current=Lu,S$2===hj)throw Tu=kj,Ej(Cu,Pu),xi$1(Cu,Pu),Z$2(Cu),Tu;if(X$2===null)switch(Lu=Cu.finishedWork=Cu.current.alternate,Cu.finishedExpirationTime=Pu,Bu=S$2,T$1=null,Bu){case ti$2:case hj:throw Error(u$3(345));case ij:Cj(Cu,2<Pu?2:Pu);break;case ui$1:if(xi$1(Cu,Pu),Bu=Cu.lastSuspendedTime,Pu===Bu&&(Cu.nextKnownPendingLevel=Ij(Lu)),lj===1073741823&&(Lu=Ti$1+pj-$f(),10<Lu)){if(oj){var Ru=Cu.lastPingedTime;if(Ru===0||Ru>=Pu){Cu.lastPingedTime=Pu,Ej(Cu,Pu);break}}if(Ru=zj(Cu),Ru!==0&&Ru!==Pu)break;if(Bu!==0&&Bu!==Pu){Cu.lastPingedTime=Bu;break}Cu.timeoutHandle=Hd$1(Jj.bind(null,Cu),Lu);break}Jj(Cu);break;case vi$1:if(xi$1(Cu,Pu),Bu=Cu.lastSuspendedTime,Pu===Bu&&(Cu.nextKnownPendingLevel=Ij(Lu)),oj&&(Lu=Cu.lastPingedTime,Lu===0||Lu>=Pu)){Cu.lastPingedTime=Pu,Ej(Cu,Pu);break}if(Lu=zj(Cu),Lu!==0&&Lu!==Pu)break;if(Bu!==0&&Bu!==Pu){Cu.lastPingedTime=Bu;break}if(mj!==1073741823?Bu=10*(1073741821-mj)-$f():lj===1073741823?Bu=0:(Bu=10*(1073741821-lj)-5e3,Lu=$f(),Pu=10*(1073741821-Pu)-Lu,Bu=Lu-Bu,0>Bu&&(Bu=0),Bu=(120>Bu?120:480>Bu?480:1080>Bu?1080:1920>Bu?1920:3e3>Bu?3e3:4320>Bu?4320:1960*bj(Bu/1960))-Bu,Pu<Bu&&(Bu=Pu)),10<Bu){Cu.timeoutHandle=Hd$1(Jj.bind(null,Cu),Bu);break}Jj(Cu);break;case jj:if(lj!==1073741823&&nj!==null){Ru=lj;var Ou=nj;if(Bu=Ou.busyMinDurationMs|0,0>=Bu?Bu=0:(Lu=Ou.busyDelayMs|0,Ru=$f()-(10*(1073741821-Ru)-(Ou.timeoutMs|0||5e3)),Bu=Ru<=Lu?0:Lu+Bu-Ru),10<Bu){xi$1(Cu,Pu),Cu.timeoutHandle=Hd$1(Jj.bind(null,Cu),Bu);break}}Jj(Cu);break;default:throw Error(u$3(329))}if(Z$2(Cu),Cu.callbackNode===Tu)return Bj.bind(null,Cu)}}return null}function yj(Cu){var Tu=Cu.lastExpiredTime;if(Tu=Tu!==0?Tu:1073741823,(W$4&(fj|gj))!==V$2)throw Error(u$3(327));if(Dj(),Cu===T$1&&Tu===U$2||Ej(Cu,Tu),X$2!==null){var Pu=W$4;W$4|=fj;var Bu=Fj();do try{Kj();break}catch(Lu){Hj(Cu,Lu)}while(1);if(ng(),W$4=Pu,cj.current=Bu,S$2===hj)throw Pu=kj,Ej(Cu,Tu),xi$1(Cu,Tu),Z$2(Cu),Pu;if(X$2!==null)throw Error(u$3(261));Cu.finishedWork=Cu.current.alternate,Cu.finishedExpirationTime=Tu,T$1=null,Jj(Cu),Z$2(Cu)}return null}function Lj(){if(tj!==null){var Cu=tj;tj=null,Cu.forEach(function(Tu,Pu){Cj(Pu,Tu),Z$2(Pu)}),gg()}}function Mj(Cu,Tu){var Pu=W$4;W$4|=1;try{return Cu(Tu)}finally{W$4=Pu,W$4===V$2&&gg()}}function Nj(Cu,Tu){var Pu=W$4;W$4&=-2,W$4|=ej;try{return Cu(Tu)}finally{W$4=Pu,W$4===V$2&&gg()}}function Ej(Cu,Tu){Cu.finishedWork=null,Cu.finishedExpirationTime=0;var Pu=Cu.timeoutHandle;if(Pu!==-1&&(Cu.timeoutHandle=-1,Id$1(Pu)),X$2!==null)for(Pu=X$2.return;Pu!==null;){var Bu=Pu;switch(Bu.tag){case 1:Bu=Bu.type.childContextTypes,Bu!=null&&Df();break;case 3:eh(),H$3(K$2),H$3(J$2);break;case 5:gh(Bu);break;case 4:eh();break;case 13:H$3(M$3);break;case 19:H$3(M$3);break;case 10:og(Bu)}Pu=Pu.return}T$1=Cu,X$2=Sg(Cu.current,null),U$2=Tu,S$2=ti$2,kj=null,mj=lj=1073741823,nj=null,wi$2=0,oj=!1}function Hj(Cu,Tu){do{try{if(ng(),jh.current=sh,mh)for(var Pu=N$3.memoizedState;Pu!==null;){var Bu=Pu.queue;Bu!==null&&(Bu.pending=null),Pu=Pu.next}if(lh=0,P$3=O$3=N$3=null,mh=!1,X$2===null||X$2.return===null)return S$2=hj,kj=Tu,X$2=null;e:{var Lu=Cu,Ru=X$2.return,Ou=X$2,Du=Tu;if(Tu=U$2,Ou.effectTag|=2048,Ou.firstEffect=Ou.lastEffect=null,Du!==null&&typeof Du=="object"&&typeof Du.then=="function"){var ku=Du;if((Ou.mode&2)===0){var Fu=Ou.alternate;Fu?(Ou.updateQueue=Fu.updateQueue,Ou.memoizedState=Fu.memoizedState,Ou.expirationTime=Fu.expirationTime):(Ou.updateQueue=null,Ou.memoizedState=null)}var Nu=(M$3.current&1)!==0,Gu=Ru;do{var zu;if(zu=Gu.tag===13){var Hu=Gu.memoizedState;if(Hu!==null)zu=Hu.dehydrated!==null;else{var Wu=Gu.memoizedProps;zu=Wu.fallback===void 0?!1:Wu.unstable_avoidThisFallback!==!0?!0:!Nu}}if(zu){var _h=Gu.updateQueue;if(_h===null){var Xc=new Set;Xc.add(ku),Gu.updateQueue=Xc}else _h.add(ku);if((Gu.mode&2)===0){if(Gu.effectTag|=64,Ou.effectTag&=-2981,Ou.tag===1)if(Ou.alternate===null)Ou.tag=17;else{var ju=wg(1073741823,null);ju.tag=2,xg(Ou,ju)}Ou.expirationTime=1073741823;break e}Du=void 0,Ou=Tu;var _c=Lu.pingCache;if(_c===null?(_c=Lu.pingCache=new Wi$2,Du=new Set,_c.set(ku,Du)):(Du=_c.get(ku),Du===void 0&&(Du=new Set,_c.set(ku,Du))),!Du.has(Ou)){Du.add(Ou);var _f=Oj.bind(null,Lu,ku,Ou);ku.then(_f,_f)}Gu.effectTag|=4096,Gu.expirationTime=Tu;break e}Gu=Gu.return}while(Gu!==null);Du=Error((pb$1(Ou.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+qb$1(Ou))}S$2!==jj&&(S$2=ij),Du=Ai$1(Du,Ou),Gu=Ru;do{switch(Gu.tag){case 3:ku=Du,Gu.effectTag|=4096,Gu.expirationTime=Tu;var ep=Xi$1(Gu,ku,Tu);yg(Gu,ep);break e;case 1:ku=Du;var tp=Gu.type,op=Gu.stateNode;if((Gu.effectTag&64)===0&&(typeof tp.getDerivedStateFromError=="function"||op!==null&&typeof op.componentDidCatch=="function"&&(aj===null||!aj.has(op)))){Gu.effectTag|=4096,Gu.expirationTime=Tu;var lp=$i$1(Gu,ku,Tu);yg(Gu,lp);break e}}Gu=Gu.return}while(Gu!==null)}X$2=Pj(X$2)}catch(up){Tu=up;continue}break}while(1)}function Fj(){var Cu=cj.current;return cj.current=sh,Cu===null?sh:Cu}function Ag(Cu,Tu){Cu<lj&&2<Cu&&(lj=Cu),Tu!==null&&Cu<mj&&2<Cu&&(mj=Cu,nj=Tu)}function Bg(Cu){Cu>wi$2&&(wi$2=Cu)}function Kj(){for(;X$2!==null;)X$2=Qj(X$2)}function Gj(){for(;X$2!==null&&!Uf();)X$2=Qj(X$2)}function Qj(Cu){var Tu=Rj(Cu.alternate,Cu,U$2);return Cu.memoizedProps=Cu.pendingProps,Tu===null&&(Tu=Pj(Cu)),dj.current=null,Tu}function Pj(Cu){X$2=Cu;do{var Tu=X$2.alternate;if(Cu=X$2.return,(X$2.effectTag&2048)===0){if(Tu=si$1(Tu,X$2,U$2),U$2===1||X$2.childExpirationTime!==1){for(var Pu=0,Bu=X$2.child;Bu!==null;){var Lu=Bu.expirationTime,Ru=Bu.childExpirationTime;Lu>Pu&&(Pu=Lu),Ru>Pu&&(Pu=Ru),Bu=Bu.sibling}X$2.childExpirationTime=Pu}if(Tu!==null)return Tu;Cu!==null&&(Cu.effectTag&2048)===0&&(Cu.firstEffect===null&&(Cu.firstEffect=X$2.firstEffect),X$2.lastEffect!==null&&(Cu.lastEffect!==null&&(Cu.lastEffect.nextEffect=X$2.firstEffect),Cu.lastEffect=X$2.lastEffect),1<X$2.effectTag&&(Cu.lastEffect!==null?Cu.lastEffect.nextEffect=X$2:Cu.firstEffect=X$2,Cu.lastEffect=X$2))}else{if(Tu=zi$2(X$2),Tu!==null)return Tu.effectTag&=2047,Tu;Cu!==null&&(Cu.firstEffect=Cu.lastEffect=null,Cu.effectTag|=2048)}if(Tu=X$2.sibling,Tu!==null)return Tu;X$2=Cu}while(X$2!==null);return S$2===ti$2&&(S$2=jj),null}function Ij(Cu){var Tu=Cu.expirationTime;return Cu=Cu.childExpirationTime,Tu>Cu?Tu:Cu}function Jj(Cu){var Tu=ag();return cg(99,Sj.bind(null,Cu,Tu)),null}function Sj(Cu,Tu){do Dj();while(rj!==null);if((W$4&(fj|gj))!==V$2)throw Error(u$3(327));var Pu=Cu.finishedWork,Bu=Cu.finishedExpirationTime;if(Pu===null)return null;if(Cu.finishedWork=null,Cu.finishedExpirationTime=0,Pu===Cu.current)throw Error(u$3(177));Cu.callbackNode=null,Cu.callbackExpirationTime=0,Cu.callbackPriority=90,Cu.nextKnownPendingLevel=0;var Lu=Ij(Pu);if(Cu.firstPendingTime=Lu,Bu<=Cu.lastSuspendedTime?Cu.firstSuspendedTime=Cu.lastSuspendedTime=Cu.nextKnownPendingLevel=0:Bu<=Cu.firstSuspendedTime&&(Cu.firstSuspendedTime=Bu-1),Bu<=Cu.lastPingedTime&&(Cu.lastPingedTime=0),Bu<=Cu.lastExpiredTime&&(Cu.lastExpiredTime=0),Cu===T$1&&(X$2=T$1=null,U$2=0),1<Pu.effectTag?Pu.lastEffect!==null?(Pu.lastEffect.nextEffect=Pu,Lu=Pu.firstEffect):Lu=Pu:Lu=Pu.firstEffect,Lu!==null){var Ru=W$4;W$4|=gj,dj.current=null,Dd$1=fd$1;var Ou=xd$1();if(yd$1(Ou)){if("selectionStart"in Ou)var Du={start:Ou.selectionStart,end:Ou.selectionEnd};else e:{Du=(Du=Ou.ownerDocument)&&Du.defaultView||window;var ku=Du.getSelection&&Du.getSelection();if(ku&&ku.rangeCount!==0){Du=ku.anchorNode;var Fu=ku.anchorOffset,Nu=ku.focusNode;ku=ku.focusOffset;try{Du.nodeType,Nu.nodeType}catch{Du=null;break e}var Gu=0,zu=-1,Hu=-1,Wu=0,_h=0,Xc=Ou,ju=null;t:for(;;){for(var _c;Xc!==Du||Fu!==0&&Xc.nodeType!==3||(zu=Gu+Fu),Xc!==Nu||ku!==0&&Xc.nodeType!==3||(Hu=Gu+ku),Xc.nodeType===3&&(Gu+=Xc.nodeValue.length),(_c=Xc.firstChild)!==null;)ju=Xc,Xc=_c;for(;;){if(Xc===Ou)break t;if(ju===Du&&++Wu===Fu&&(zu=Gu),ju===Nu&&++_h===ku&&(Hu=Gu),(_c=Xc.nextSibling)!==null)break;Xc=ju,ju=Xc.parentNode}Xc=_c}Du=zu===-1||Hu===-1?null:{start:zu,end:Hu}}else Du=null}Du=Du||{start:0,end:0}}else Du=null;Ed$1={activeElementDetached:null,focusedElem:Ou,selectionRange:Du},fd$1=!1,Y$2=Lu;do try{Tj()}catch(hp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,hp),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=Lu;do try{for(Ou=Cu,Du=Tu;Y$2!==null;){var _f=Y$2.effectTag;if(_f&16&&Rb$1(Y$2.stateNode,""),_f&128){var ep=Y$2.alternate;if(ep!==null){var tp=ep.ref;tp!==null&&(typeof tp=="function"?tp(null):tp.current=null)}}switch(_f&1038){case 2:Pi$1(Y$2),Y$2.effectTag&=-3;break;case 6:Pi$1(Y$2),Y$2.effectTag&=-3,Si$1(Y$2.alternate,Y$2);break;case 1024:Y$2.effectTag&=-1025;break;case 1028:Y$2.effectTag&=-1025,Si$1(Y$2.alternate,Y$2);break;case 4:Si$1(Y$2.alternate,Y$2);break;case 8:Fu=Y$2,Mi$2(Ou,Fu,Du),Ni$2(Fu)}Y$2=Y$2.nextEffect}}catch(hp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,hp),Y$2=Y$2.nextEffect}while(Y$2!==null);if(tp=Ed$1,ep=xd$1(),_f=tp.focusedElem,Du=tp.selectionRange,ep!==_f&&_f&&_f.ownerDocument&&wd$1(_f.ownerDocument.documentElement,_f)){for(Du!==null&&yd$1(_f)&&(ep=Du.start,tp=Du.end,tp===void 0&&(tp=ep),"selectionStart"in _f?(_f.selectionStart=ep,_f.selectionEnd=Math.min(tp,_f.value.length)):(tp=(ep=_f.ownerDocument||document)&&ep.defaultView||window,tp.getSelection&&(tp=tp.getSelection(),Fu=_f.textContent.length,Ou=Math.min(Du.start,Fu),Du=Du.end===void 0?Ou:Math.min(Du.end,Fu),!tp.extend&&Ou>Du&&(Fu=Du,Du=Ou,Ou=Fu),Fu=vd$1(_f,Ou),Nu=vd$1(_f,Du),Fu&&Nu&&(tp.rangeCount!==1||tp.anchorNode!==Fu.node||tp.anchorOffset!==Fu.offset||tp.focusNode!==Nu.node||tp.focusOffset!==Nu.offset)&&(ep=ep.createRange(),ep.setStart(Fu.node,Fu.offset),tp.removeAllRanges(),Ou>Du?(tp.addRange(ep),tp.extend(Nu.node,Nu.offset)):(ep.setEnd(Nu.node,Nu.offset),tp.addRange(ep)))))),ep=[],tp=_f;tp=tp.parentNode;)tp.nodeType===1&&ep.push({element:tp,left:tp.scrollLeft,top:tp.scrollTop});for(typeof _f.focus=="function"&&_f.focus(),_f=0;_f<ep.length;_f++)tp=ep[_f],tp.element.scrollLeft=tp.left,tp.element.scrollTop=tp.top}fd$1=!!Dd$1,Ed$1=Dd$1=null,Cu.current=Pu,Y$2=Lu;do try{for(_f=Cu;Y$2!==null;){var op=Y$2.effectTag;if(op&36&&Ji$2(_f,Y$2.alternate,Y$2),op&128){ep=void 0;var lp=Y$2.ref;if(lp!==null){var up=Y$2.stateNode;switch(Y$2.tag){case 5:ep=up;break;default:ep=up}typeof lp=="function"?lp(ep):lp.current=ep}}Y$2=Y$2.nextEffect}}catch(hp){if(Y$2===null)throw Error(u$3(330));Ei$2(Y$2,hp),Y$2=Y$2.nextEffect}while(Y$2!==null);Y$2=null,Vf(),W$4=Ru}else Cu.current=Pu;if(qj)qj=!1,rj=Cu,sj=Tu;else for(Y$2=Lu;Y$2!==null;)Tu=Y$2.nextEffect,Y$2.nextEffect=null,Y$2=Tu;if(Tu=Cu.firstPendingTime,Tu===0&&(aj=null),Tu===1073741823?Cu===vj?uj++:(uj=0,vj=Cu):uj=0,typeof Uj=="function"&&Uj(Pu.stateNode,Bu),Z$2(Cu),Yi$2)throw Yi$2=!1,Cu=Zi$2,Zi$2=null,Cu;return(W$4&ej)!==V$2||gg(),null}function Tj(){for(;Y$2!==null;){var Cu=Y$2.effectTag;(Cu&256)!==0&&Gi$1(Y$2.alternate,Y$2),(Cu&512)===0||qj||(qj=!0,dg(97,function(){return Dj(),null})),Y$2=Y$2.nextEffect}}function Dj(){if(sj!==90){var Cu=97<sj?97:sj;return sj=90,cg(Cu,Vj)}}function Vj(){if(rj===null)return!1;var Cu=rj;if(rj=null,(W$4&(fj|gj))!==V$2)throw Error(u$3(331));var Tu=W$4;for(W$4|=gj,Cu=Cu.current.firstEffect;Cu!==null;){try{var Pu=Cu;if((Pu.effectTag&512)!==0)switch(Pu.tag){case 0:case 11:case 15:case 22:Hi$2(5,Pu),Ii$1(5,Pu)}}catch(Bu){if(Cu===null)throw Error(u$3(330));Ei$2(Cu,Bu)}Pu=Cu.nextEffect,Cu.nextEffect=null,Cu=Pu}return W$4=Tu,gg(),!0}function Wj(Cu,Tu,Pu){Tu=Ai$1(Pu,Tu),Tu=Xi$1(Cu,Tu,1073741823),xg(Cu,Tu),Cu=xj(Cu,1073741823),Cu!==null&&Z$2(Cu)}function Ei$2(Cu,Tu){if(Cu.tag===3)Wj(Cu,Cu,Tu);else for(var Pu=Cu.return;Pu!==null;){if(Pu.tag===3){Wj(Pu,Cu,Tu);break}else if(Pu.tag===1){var Bu=Pu.stateNode;if(typeof Pu.type.getDerivedStateFromError=="function"||typeof Bu.componentDidCatch=="function"&&(aj===null||!aj.has(Bu))){Cu=Ai$1(Tu,Cu),Cu=$i$1(Pu,Cu,1073741823),xg(Pu,Cu),Pu=xj(Pu,1073741823),Pu!==null&&Z$2(Pu);break}}Pu=Pu.return}}function Oj(Cu,Tu,Pu){var Bu=Cu.pingCache;Bu!==null&&Bu.delete(Tu),T$1===Cu&&U$2===Pu?S$2===vi$1||S$2===ui$1&&lj===1073741823&&$f()-Ti$1<pj?Ej(Cu,U$2):oj=!0:Aj(Cu,Pu)&&(Tu=Cu.lastPingedTime,Tu!==0&&Tu<Pu||(Cu.lastPingedTime=Pu,Z$2(Cu)))}function Vi$2(Cu,Tu){var Pu=Cu.stateNode;Pu!==null&&Pu.delete(Tu),Tu=0,Tu===0&&(Tu=Gg(),Tu=Hg(Tu,Cu,null)),Cu=xj(Cu,Tu),Cu!==null&&Z$2(Cu)}var Rj;Rj=function(Cu,Tu,Pu){var Bu=Tu.expirationTime;if(Cu!==null){var Lu=Tu.pendingProps;if(Cu.memoizedProps!==Lu||K$2.current)rg=!0;else{if(Bu<Pu){switch(rg=!1,Tu.tag){case 3:hi$1(Tu),Xh();break;case 5:if(fh(Tu),Tu.mode&4&&Pu!==1&&Lu.hidden)return Tu.expirationTime=Tu.childExpirationTime=1,null;break;case 1:L$4(Tu.type)&&Gf(Tu);break;case 4:dh(Tu,Tu.stateNode.containerInfo);break;case 10:Bu=Tu.memoizedProps.value,Lu=Tu.type._context,I$2(jg,Lu._currentValue),Lu._currentValue=Bu;break;case 13:if(Tu.memoizedState!==null)return Bu=Tu.child.childExpirationTime,Bu!==0&&Bu>=Pu?ji$2(Cu,Tu,Pu):(I$2(M$3,M$3.current&1),Tu=$h(Cu,Tu,Pu),Tu!==null?Tu.sibling:null);I$2(M$3,M$3.current&1);break;case 19:if(Bu=Tu.childExpirationTime>=Pu,(Cu.effectTag&64)!==0){if(Bu)return mi$1(Cu,Tu,Pu);Tu.effectTag|=64}if(Lu=Tu.memoizedState,Lu!==null&&(Lu.rendering=null,Lu.tail=null),I$2(M$3,M$3.current),!Bu)return null}return $h(Cu,Tu,Pu)}rg=!1}}else rg=!1;switch(Tu.expirationTime=0,Tu.tag){case 2:if(Bu=Tu.type,Cu!==null&&(Cu.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Cu=Tu.pendingProps,Lu=Cf(Tu,J$2.current),qg(Tu,Pu),Lu=oh(null,Tu,Bu,Cu,Lu,Pu),Tu.effectTag|=1,typeof Lu=="object"&&Lu!==null&&typeof Lu.render=="function"&&Lu.$$typeof===void 0){if(Tu.tag=1,Tu.memoizedState=null,Tu.updateQueue=null,L$4(Bu)){var Ru=!0;Gf(Tu)}else Ru=!1;Tu.memoizedState=Lu.state!==null&&Lu.state!==void 0?Lu.state:null,ug(Tu);var Ou=Bu.getDerivedStateFromProps;typeof Ou=="function"&&Fg(Tu,Bu,Ou,Cu),Lu.updater=Jg,Tu.stateNode=Lu,Lu._reactInternalFiber=Tu,Ng(Tu,Bu,Cu,Pu),Tu=gi$1(null,Tu,Bu,!0,Ru,Pu)}else Tu.tag=0,R$4(null,Tu,Lu,Pu),Tu=Tu.child;return Tu;case 16:e:{if(Lu=Tu.elementType,Cu!==null&&(Cu.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Cu=Tu.pendingProps,ob$1(Lu),Lu._status!==1)throw Lu._result;switch(Lu=Lu._result,Tu.type=Lu,Ru=Tu.tag=Xj(Lu),Cu=ig(Lu,Cu),Ru){case 0:Tu=di$1(null,Tu,Lu,Cu,Pu);break e;case 1:Tu=fi$1(null,Tu,Lu,Cu,Pu);break e;case 11:Tu=Zh(null,Tu,Lu,Cu,Pu);break e;case 14:Tu=ai$1(null,Tu,Lu,ig(Lu.type,Cu),Bu,Pu);break e}throw Error(u$3(306,Lu,""))}return Tu;case 0:return Bu=Tu.type,Lu=Tu.pendingProps,Lu=Tu.elementType===Bu?Lu:ig(Bu,Lu),di$1(Cu,Tu,Bu,Lu,Pu);case 1:return Bu=Tu.type,Lu=Tu.pendingProps,Lu=Tu.elementType===Bu?Lu:ig(Bu,Lu),fi$1(Cu,Tu,Bu,Lu,Pu);case 3:if(hi$1(Tu),Bu=Tu.updateQueue,Cu===null||Bu===null)throw Error(u$3(282));if(Bu=Tu.pendingProps,Lu=Tu.memoizedState,Lu=Lu!==null?Lu.element:null,vg(Cu,Tu),zg(Tu,Bu,null,Pu),Bu=Tu.memoizedState.element,Bu===Lu)Xh(),Tu=$h(Cu,Tu,Pu);else{if((Lu=Tu.stateNode.hydrate)&&(Ph=Jd$1(Tu.stateNode.containerInfo.firstChild),Oh=Tu,Lu=Qh=!0),Lu)for(Pu=Yg(Tu,null,Bu,Pu),Tu.child=Pu;Pu;)Pu.effectTag=Pu.effectTag&-3|1024,Pu=Pu.sibling;else R$4(Cu,Tu,Bu,Pu),Xh();Tu=Tu.child}return Tu;case 5:return fh(Tu),Cu===null&&Uh(Tu),Bu=Tu.type,Lu=Tu.pendingProps,Ru=Cu!==null?Cu.memoizedProps:null,Ou=Lu.children,Gd$1(Bu,Lu)?Ou=null:Ru!==null&&Gd$1(Bu,Ru)&&(Tu.effectTag|=16),ei$2(Cu,Tu),Tu.mode&4&&Pu!==1&&Lu.hidden?(Tu.expirationTime=Tu.childExpirationTime=1,Tu=null):(R$4(Cu,Tu,Ou,Pu),Tu=Tu.child),Tu;case 6:return Cu===null&&Uh(Tu),null;case 13:return ji$2(Cu,Tu,Pu);case 4:return dh(Tu,Tu.stateNode.containerInfo),Bu=Tu.pendingProps,Cu===null?Tu.child=Xg(Tu,null,Bu,Pu):R$4(Cu,Tu,Bu,Pu),Tu.child;case 11:return Bu=Tu.type,Lu=Tu.pendingProps,Lu=Tu.elementType===Bu?Lu:ig(Bu,Lu),Zh(Cu,Tu,Bu,Lu,Pu);case 7:return R$4(Cu,Tu,Tu.pendingProps,Pu),Tu.child;case 8:return R$4(Cu,Tu,Tu.pendingProps.children,Pu),Tu.child;case 12:return R$4(Cu,Tu,Tu.pendingProps.children,Pu),Tu.child;case 10:e:{Bu=Tu.type._context,Lu=Tu.pendingProps,Ou=Tu.memoizedProps,Ru=Lu.value;var Du=Tu.type._context;if(I$2(jg,Du._currentValue),Du._currentValue=Ru,Ou!==null)if(Du=Ou.value,Ru=$e$1(Du,Ru)?0:(typeof Bu._calculateChangedBits=="function"?Bu._calculateChangedBits(Du,Ru):1073741823)|0,Ru===0){if(Ou.children===Lu.children&&!K$2.current){Tu=$h(Cu,Tu,Pu);break e}}else for(Du=Tu.child,Du!==null&&(Du.return=Tu);Du!==null;){var ku=Du.dependencies;if(ku!==null){Ou=Du.child;for(var Fu=ku.firstContext;Fu!==null;){if(Fu.context===Bu&&(Fu.observedBits&Ru)!==0){Du.tag===1&&(Fu=wg(Pu,null),Fu.tag=2,xg(Du,Fu)),Du.expirationTime<Pu&&(Du.expirationTime=Pu),Fu=Du.alternate,Fu!==null&&Fu.expirationTime<Pu&&(Fu.expirationTime=Pu),pg(Du.return,Pu),ku.expirationTime<Pu&&(ku.expirationTime=Pu);break}Fu=Fu.next}}else Ou=Du.tag===10&&Du.type===Tu.type?null:Du.child;if(Ou!==null)Ou.return=Du;else for(Ou=Du;Ou!==null;){if(Ou===Tu){Ou=null;break}if(Du=Ou.sibling,Du!==null){Du.return=Ou.return,Ou=Du;break}Ou=Ou.return}Du=Ou}R$4(Cu,Tu,Lu.children,Pu),Tu=Tu.child}return Tu;case 9:return Lu=Tu.type,Ru=Tu.pendingProps,Bu=Ru.children,qg(Tu,Pu),Lu=sg(Lu,Ru.unstable_observedBits),Bu=Bu(Lu),Tu.effectTag|=1,R$4(Cu,Tu,Bu,Pu),Tu.child;case 14:return Lu=Tu.type,Ru=ig(Lu,Tu.pendingProps),Ru=ig(Lu.type,Ru),ai$1(Cu,Tu,Lu,Ru,Bu,Pu);case 15:return ci$1(Cu,Tu,Tu.type,Tu.pendingProps,Bu,Pu);case 17:return Bu=Tu.type,Lu=Tu.pendingProps,Lu=Tu.elementType===Bu?Lu:ig(Bu,Lu),Cu!==null&&(Cu.alternate=null,Tu.alternate=null,Tu.effectTag|=2),Tu.tag=1,L$4(Bu)?(Cu=!0,Gf(Tu)):Cu=!1,qg(Tu,Pu),Lg(Tu,Bu,Lu),Ng(Tu,Bu,Lu,Pu),gi$1(null,Tu,Bu,!0,Cu,Pu);case 19:return mi$1(Cu,Tu,Pu)}throw Error(u$3(156,Tu.tag))};var Uj=null,Li$2=null;function Yj(Cu){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(Tu.isDisabled||!Tu.supportsFiber)return!0;try{var Pu=Tu.inject(Cu);Uj=function(Bu){try{Tu.onCommitFiberRoot(Pu,Bu,void 0,(Bu.current.effectTag&64)===64)}catch{}},Li$2=function(Bu){try{Tu.onCommitFiberUnmount(Pu,Bu)}catch{}}}catch{}return!0}function Zj(Cu,Tu,Pu,Bu){this.tag=Cu,this.key=Pu,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Tu,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Bu,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(Cu,Tu,Pu,Bu){return new Zj(Cu,Tu,Pu,Bu)}function bi$1(Cu){return Cu=Cu.prototype,!(!Cu||!Cu.isReactComponent)}function Xj(Cu){if(typeof Cu=="function")return bi$1(Cu)?1:0;if(Cu!=null){if(Cu=Cu.$$typeof,Cu===gb$1)return 11;if(Cu===jb$1)return 14}return 2}function Sg(Cu,Tu){var Pu=Cu.alternate;return Pu===null?(Pu=Sh(Cu.tag,Tu,Cu.key,Cu.mode),Pu.elementType=Cu.elementType,Pu.type=Cu.type,Pu.stateNode=Cu.stateNode,Pu.alternate=Cu,Cu.alternate=Pu):(Pu.pendingProps=Tu,Pu.effectTag=0,Pu.nextEffect=null,Pu.firstEffect=null,Pu.lastEffect=null),Pu.childExpirationTime=Cu.childExpirationTime,Pu.expirationTime=Cu.expirationTime,Pu.child=Cu.child,Pu.memoizedProps=Cu.memoizedProps,Pu.memoizedState=Cu.memoizedState,Pu.updateQueue=Cu.updateQueue,Tu=Cu.dependencies,Pu.dependencies=Tu===null?null:{expirationTime:Tu.expirationTime,firstContext:Tu.firstContext,responders:Tu.responders},Pu.sibling=Cu.sibling,Pu.index=Cu.index,Pu.ref=Cu.ref,Pu}function Ug(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=2;if(Bu=Cu,typeof Cu=="function")bi$1(Cu)&&(Ou=1);else if(typeof Cu=="string")Ou=5;else e:switch(Cu){case ab$1:return Wg(Pu.children,Lu,Ru,Tu);case fb$1:Ou=8,Lu|=7;break;case bb$1:Ou=8,Lu|=1;break;case cb$1:return Cu=Sh(12,Pu,Tu,Lu|8),Cu.elementType=cb$1,Cu.type=cb$1,Cu.expirationTime=Ru,Cu;case hb$1:return Cu=Sh(13,Pu,Tu,Lu),Cu.type=hb$1,Cu.elementType=hb$1,Cu.expirationTime=Ru,Cu;case ib$1:return Cu=Sh(19,Pu,Tu,Lu),Cu.elementType=ib$1,Cu.expirationTime=Ru,Cu;default:if(typeof Cu=="object"&&Cu!==null)switch(Cu.$$typeof){case db$1:Ou=10;break e;case eb$1:Ou=9;break e;case gb$1:Ou=11;break e;case jb$1:Ou=14;break e;case kb$1:Ou=16,Bu=null;break e;case lb$1:Ou=22;break e}throw Error(u$3(130,Cu==null?Cu:typeof Cu,""))}return Tu=Sh(Ou,Pu,Tu,Lu),Tu.elementType=Cu,Tu.type=Bu,Tu.expirationTime=Ru,Tu}function Wg(Cu,Tu,Pu,Bu){return Cu=Sh(7,Cu,Bu,Tu),Cu.expirationTime=Pu,Cu}function Tg(Cu,Tu,Pu){return Cu=Sh(6,Cu,null,Tu),Cu.expirationTime=Pu,Cu}function Vg(Cu,Tu,Pu){return Tu=Sh(4,Cu.children!==null?Cu.children:[],Cu.key,Tu),Tu.expirationTime=Pu,Tu.stateNode={containerInfo:Cu.containerInfo,pendingChildren:null,implementation:Cu.implementation},Tu}function ak(Cu,Tu,Pu){this.tag=Tu,this.current=null,this.containerInfo=Cu,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=Pu,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(Cu,Tu){var Pu=Cu.firstSuspendedTime;return Cu=Cu.lastSuspendedTime,Pu!==0&&Pu>=Tu&&Cu<=Tu}function xi$1(Cu,Tu){var Pu=Cu.firstSuspendedTime,Bu=Cu.lastSuspendedTime;Pu<Tu&&(Cu.firstSuspendedTime=Tu),(Bu>Tu||Pu===0)&&(Cu.lastSuspendedTime=Tu),Tu<=Cu.lastPingedTime&&(Cu.lastPingedTime=0),Tu<=Cu.lastExpiredTime&&(Cu.lastExpiredTime=0)}function yi$2(Cu,Tu){Tu>Cu.firstPendingTime&&(Cu.firstPendingTime=Tu);var Pu=Cu.firstSuspendedTime;Pu!==0&&(Tu>=Pu?Cu.firstSuspendedTime=Cu.lastSuspendedTime=Cu.nextKnownPendingLevel=0:Tu>=Cu.lastSuspendedTime&&(Cu.lastSuspendedTime=Tu+1),Tu>Cu.nextKnownPendingLevel&&(Cu.nextKnownPendingLevel=Tu))}function Cj(Cu,Tu){var Pu=Cu.lastExpiredTime;(Pu===0||Pu>Tu)&&(Cu.lastExpiredTime=Tu)}function bk(Cu,Tu,Pu,Bu){var Lu=Tu.current,Ru=Gg(),Ou=Dg.suspense;Ru=Hg(Ru,Lu,Ou);e:if(Pu){Pu=Pu._reactInternalFiber;t:{if(dc(Pu)!==Pu||Pu.tag!==1)throw Error(u$3(170));var Du=Pu;do{switch(Du.tag){case 3:Du=Du.stateNode.context;break t;case 1:if(L$4(Du.type)){Du=Du.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Du=Du.return}while(Du!==null);throw Error(u$3(171))}if(Pu.tag===1){var ku=Pu.type;if(L$4(ku)){Pu=Ff(Pu,ku,Du);break e}}Pu=Du}else Pu=Af;return Tu.context===null?Tu.context=Pu:Tu.pendingContext=Pu,Tu=wg(Ru,Ou),Tu.payload={element:Cu},Bu=Bu===void 0?null:Bu,Bu!==null&&(Tu.callback=Bu),xg(Lu,Tu),Ig(Lu,Ru),Ru}function ck(Cu){if(Cu=Cu.current,!Cu.child)return null;switch(Cu.child.tag){case 5:return Cu.child.stateNode;default:return Cu.child.stateNode}}function dk(Cu,Tu){Cu=Cu.memoizedState,Cu!==null&&Cu.dehydrated!==null&&Cu.retryTime<Tu&&(Cu.retryTime=Tu)}function ek(Cu,Tu){dk(Cu,Tu),(Cu=Cu.alternate)&&dk(Cu,Tu)}function fk(Cu,Tu,Pu){Pu=Pu!=null&&Pu.hydrate===!0;var Bu=new ak(Cu,Tu,Pu),Lu=Sh(3,null,null,Tu===2?7:Tu===1?3:0);Bu.current=Lu,Lu.stateNode=Bu,ug(Lu),Cu[Od$1]=Bu.current,Pu&&Tu!==0&&Jc(Cu,Cu.nodeType===9?Cu:Cu.ownerDocument),this._internalRoot=Bu}fk.prototype.render=function(Cu){bk(Cu,this._internalRoot,null,null)};fk.prototype.unmount=function(){var Cu=this._internalRoot,Tu=Cu.containerInfo;bk(null,Cu,null,function(){Tu[Od$1]=null})};function gk(Cu){return!(!Cu||Cu.nodeType!==1&&Cu.nodeType!==9&&Cu.nodeType!==11&&(Cu.nodeType!==8||Cu.nodeValue!==" react-mount-point-unstable "))}function hk(Cu,Tu){if(Tu||(Tu=Cu?Cu.nodeType===9?Cu.documentElement:Cu.firstChild:null,Tu=!(!Tu||Tu.nodeType!==1||!Tu.hasAttribute("data-reactroot"))),!Tu)for(var Pu;Pu=Cu.lastChild;)Cu.removeChild(Pu);return new fk(Cu,0,Tu?{hydrate:!0}:void 0)}function ik(Cu,Tu,Pu,Bu,Lu){var Ru=Pu._reactRootContainer;if(Ru){var Ou=Ru._internalRoot;if(typeof Lu=="function"){var Du=Lu;Lu=function(){var Fu=ck(Ou);Du.call(Fu)}}bk(Tu,Ou,Cu,Lu)}else{if(Ru=Pu._reactRootContainer=hk(Pu,Bu),Ou=Ru._internalRoot,typeof Lu=="function"){var ku=Lu;Lu=function(){var Fu=ck(Ou);ku.call(Fu)}}Nj(function(){bk(Tu,Ou,Cu,Lu)})}return ck(Ou)}function jk(Cu,Tu,Pu){var Bu=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$a$2,key:Bu==null?null:""+Bu,children:Cu,containerInfo:Tu,implementation:Pu}}wc$1=function(Cu){if(Cu.tag===13){var Tu=hg(Gg(),150,100);Ig(Cu,Tu),ek(Cu,Tu)}};xc$1=function(Cu){Cu.tag===13&&(Ig(Cu,3),ek(Cu,3))};yc$1=function(Cu){if(Cu.tag===13){var Tu=Gg();Tu=Hg(Tu,Cu,null),Ig(Cu,Tu),ek(Cu,Tu)}};za$1=function(Cu,Tu,Pu){switch(Tu){case"input":if(Cb$1(Cu,Pu),Tu=Pu.name,Pu.type==="radio"&&Tu!=null){for(Pu=Cu;Pu.parentNode;)Pu=Pu.parentNode;for(Pu=Pu.querySelectorAll("input[name="+JSON.stringify(""+Tu)+'][type="radio"]'),Tu=0;Tu<Pu.length;Tu++){var Bu=Pu[Tu];if(Bu!==Cu&&Bu.form===Cu.form){var Lu=Qd$1(Bu);if(!Lu)throw Error(u$3(90));yb$1(Bu),Cb$1(Bu,Lu)}}}break;case"textarea":Kb$1(Cu,Pu);break;case"select":Tu=Pu.value,Tu!=null&&Hb$1(Cu,!!Pu.multiple,Tu,!1)}};Fa$2=Mj;Ga$2=function(Cu,Tu,Pu,Bu,Lu){var Ru=W$4;W$4|=4;try{return cg(98,Cu.bind(null,Tu,Pu,Bu,Lu))}finally{W$4=Ru,W$4===V$2&&gg()}};Ha$2=function(){(W$4&(1|fj|gj))===V$2&&(Lj(),Dj())};Ia$1=function(Cu,Tu){var Pu=W$4;W$4|=2;try{return Cu(Tu)}finally{W$4=Pu,W$4===V$2&&gg()}};function kk(Cu,Tu){var Pu=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gk(Tu))throw Error(u$3(200));return jk(Cu,Tu,null,Pu)}var lk={Events:[Nc,Pd$1,Qd$1,xa$1,ta$1,Xd$1,function(Cu){jc(Cu,Wd$1)},Da$1,Ea$1,id$1,mc$1,Dj,{current:!1}]};(function(Cu){var Tu=Cu.findFiberByHostInstance;return Yj(n$4({},Cu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(Pu){return Pu=hc(Pu),Pu===null?null:Pu.stateNode},findFiberByHostInstance:function(Pu){return Tu?Tu(Pu):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc$1,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;reactDom_production_min.createPortal=kk;reactDom_production_min.findDOMNode=function(Cu){if(Cu==null)return null;if(Cu.nodeType===1)return Cu;var Tu=Cu._reactInternalFiber;if(Tu===void 0)throw typeof Cu.render=="function"?Error(u$3(188)):Error(u$3(268,Object.keys(Cu)));return Cu=hc(Tu),Cu=Cu===null?null:Cu.stateNode,Cu};reactDom_production_min.flushSync=function(Cu,Tu){if((W$4&(fj|gj))!==V$2)throw Error(u$3(187));var Pu=W$4;W$4|=1;try{return cg(99,Cu.bind(null,Tu))}finally{W$4=Pu,gg()}};reactDom_production_min.hydrate=function(Cu,Tu,Pu){if(!gk(Tu))throw Error(u$3(200));return ik(null,Cu,Tu,!0,Pu)};reactDom_production_min.render=function(Cu,Tu,Pu){if(!gk(Tu))throw Error(u$3(200));return ik(null,Cu,Tu,!1,Pu)};reactDom_production_min.unmountComponentAtNode=function(Cu){if(!gk(Cu))throw Error(u$3(40));return Cu._reactRootContainer?(Nj(function(){ik(null,null,Cu,!1,function(){Cu._reactRootContainer=null,Cu[Od$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Mj;reactDom_production_min.unstable_createPortal=function(Cu,Tu){return kk(Cu,Tu,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(Cu,Tu,Pu,Bu){if(!gk(Pu))throw Error(u$3(200));if(Cu==null||Cu._reactInternalFiber===void 0)throw Error(u$3(38));return ik(Cu,Tu,Pu,!1,Bu)};reactDom_production_min.version="16.14.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(Cu){console.error(Cu)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports,five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(Cu){return typeof Cu=="number"&&isFinite(Cu)&&Math.floor(Cu)===Cu});Math.sign===void 0&&(Math.sign=function(Cu){return Cu<0?-1:Cu>0?1:+Cu});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(Cu){if(Cu==null)throw new TypeError("Cannot convert undefined or null to object");const Tu=Object(Cu);for(let Pu=1;Pu<arguments.length;Pu++){const Bu=arguments[Pu];if(Bu!=null)for(const Lu in Bu)Object.prototype.hasOwnProperty.call(Bu,Lu)&&(Tu[Lu]=Bu[Lu])}return Tu});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(Cu,Tu){this._listeners===void 0&&(this._listeners={});var Pu=this._listeners;Pu[Cu]===void 0&&(Pu[Cu]=[]),Pu[Cu].indexOf(Tu)===-1&&Pu[Cu].push(Tu)},hasEventListener:function(Cu,Tu){if(this._listeners===void 0)return!1;var Pu=this._listeners;return Pu[Cu]!==void 0&&Pu[Cu].indexOf(Tu)!==-1},removeEventListener:function(Cu,Tu){if(this._listeners!==void 0){var Pu=this._listeners,Bu=Pu[Cu];if(Bu!==void 0){var Lu=Bu.indexOf(Tu);Lu!==-1&&Bu.splice(Lu,1)}}},dispatchEvent:function(Cu){if(this._listeners!==void 0){var Tu=this._listeners,Pu=Tu[Cu.type];if(Pu!==void 0){Cu.target=this;for(var Bu=Pu.slice(0),Lu=0,Ru=Bu.length;Lu<Ru;Lu++)Bu[Lu].call(this,Cu)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var Cu=Math.random()*4294967295|0,Tu=Math.random()*4294967295|0,Pu=Math.random()*4294967295|0,Bu=Math.random()*4294967295|0,Lu=_lut[Cu&255]+_lut[Cu>>8&255]+_lut[Cu>>16&255]+_lut[Cu>>24&255]+"-"+_lut[Tu&255]+_lut[Tu>>8&255]+"-"+_lut[Tu>>16&15|64]+_lut[Tu>>24&255]+"-"+_lut[Pu&63|128]+_lut[Pu>>8&255]+"-"+_lut[Pu>>16&255]+_lut[Pu>>24&255]+_lut[Bu&255]+_lut[Bu>>8&255]+_lut[Bu>>16&255]+_lut[Bu>>24&255];return Lu.toUpperCase()},clamp:function(Cu,Tu,Pu){return Math.max(Tu,Math.min(Pu,Cu))},euclideanModulo:function(Cu,Tu){return(Cu%Tu+Tu)%Tu},mapLinear:function(Cu,Tu,Pu,Bu,Lu){return Bu+(Cu-Tu)*(Lu-Bu)/(Pu-Tu)},lerp:function(Cu,Tu,Pu){return(1-Pu)*Cu+Pu*Tu},smoothstep:function(Cu,Tu,Pu){return Cu<=Tu?0:Cu>=Pu?1:(Cu=(Cu-Tu)/(Pu-Tu),Cu*Cu*(3-2*Cu))},smootherstep:function(Cu,Tu,Pu){return Cu<=Tu?0:Cu>=Pu?1:(Cu=(Cu-Tu)/(Pu-Tu),Cu*Cu*Cu*(Cu*(Cu*6-15)+10))},randInt:function(Cu,Tu){return Cu+Math.floor(Math.random()*(Tu-Cu+1))},randFloat:function(Cu,Tu){return Cu+Math.random()*(Tu-Cu)},randFloatSpread:function(Cu){return Cu*(.5-Math.random())},degToRad:function(Cu){return Cu*MathUtils.DEG2RAD},radToDeg:function(Cu){return Cu*MathUtils.RAD2DEG},isPowerOfTwo:function(Cu){return(Cu&Cu-1)===0&&Cu!==0},ceilPowerOfTwo:function(Cu){return Math.pow(2,Math.ceil(Math.log(Cu)/Math.LN2))},floorPowerOfTwo:function(Cu){return Math.pow(2,Math.floor(Math.log(Cu)/Math.LN2))},setQuaternionFromProperEuler:function(Cu,Tu,Pu,Bu,Lu){var Ru=Math.cos,Ou=Math.sin,Du=Ru(Pu/2),ku=Ou(Pu/2),Fu=Ru((Tu+Bu)/2),Nu=Ou((Tu+Bu)/2),Gu=Ru((Tu-Bu)/2),zu=Ou((Tu-Bu)/2),Hu=Ru((Bu-Tu)/2),Wu=Ou((Bu-Tu)/2);switch(Lu){case"XYX":Cu.set(Du*Nu,ku*Gu,ku*zu,Du*Fu);break;case"YZY":Cu.set(ku*zu,Du*Nu,ku*Gu,Du*Fu);break;case"ZXZ":Cu.set(ku*Gu,ku*zu,Du*Nu,Du*Fu);break;case"XZX":Cu.set(Du*Nu,ku*Wu,ku*Hu,Du*Fu);break;case"YXY":Cu.set(ku*Hu,Du*Nu,ku*Wu,Du*Fu);break;case"ZYZ":Cu.set(ku*Wu,ku*Hu,Du*Nu,Du*Fu);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Lu)}}};function Vector2(Cu,Tu){this.x=Cu||0,this.y=Tu||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(Cu){this.x=Cu}},height:{get:function(){return this.y},set:function(Cu){this.y=Cu}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(Cu,Tu){return this.x=Cu,this.y=Tu,this},setScalar:function(Cu){return this.x=Cu,this.y=Cu,this},setX:function(Cu){return this.x=Cu,this},setY:function(Cu){return this.y=Cu,this},setComponent:function(Cu,Tu){switch(Cu){case 0:this.x=Tu;break;case 1:this.y=Tu;break;default:throw new Error("index is out of range: "+Cu)}return this},getComponent:function(Cu){switch(Cu){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+Cu)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(Cu){return this.x=Cu.x,this.y=Cu.y,this},add:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Cu,Tu)):(this.x+=Cu.x,this.y+=Cu.y,this)},addScalar:function(Cu){return this.x+=Cu,this.y+=Cu,this},addVectors:function(Cu,Tu){return this.x=Cu.x+Tu.x,this.y=Cu.y+Tu.y,this},addScaledVector:function(Cu,Tu){return this.x+=Cu.x*Tu,this.y+=Cu.y*Tu,this},sub:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Cu,Tu)):(this.x-=Cu.x,this.y-=Cu.y,this)},subScalar:function(Cu){return this.x-=Cu,this.y-=Cu,this},subVectors:function(Cu,Tu){return this.x=Cu.x-Tu.x,this.y=Cu.y-Tu.y,this},multiply:function(Cu){return this.x*=Cu.x,this.y*=Cu.y,this},multiplyScalar:function(Cu){return this.x*=Cu,this.y*=Cu,this},divide:function(Cu){return this.x/=Cu.x,this.y/=Cu.y,this},divideScalar:function(Cu){return this.multiplyScalar(1/Cu)},applyMatrix3:function(Cu){var Tu=this.x,Pu=this.y,Bu=Cu.elements;return this.x=Bu[0]*Tu+Bu[3]*Pu+Bu[6],this.y=Bu[1]*Tu+Bu[4]*Pu+Bu[7],this},min:function(Cu){return this.x=Math.min(this.x,Cu.x),this.y=Math.min(this.y,Cu.y),this},max:function(Cu){return this.x=Math.max(this.x,Cu.x),this.y=Math.max(this.y,Cu.y),this},clamp:function(Cu,Tu){return this.x=Math.max(Cu.x,Math.min(Tu.x,this.x)),this.y=Math.max(Cu.y,Math.min(Tu.y,this.y)),this},clampScalar:function(Cu,Tu){return this.x=Math.max(Cu,Math.min(Tu,this.x)),this.y=Math.max(Cu,Math.min(Tu,this.y)),this},clampLength:function(Cu,Tu){var Pu=this.length();return this.divideScalar(Pu||1).multiplyScalar(Math.max(Cu,Math.min(Tu,Pu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(Cu){return this.x*Cu.x+this.y*Cu.y},cross:function(Cu){return this.x*Cu.y-this.y*Cu.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var Cu=Math.atan2(-this.y,-this.x)+Math.PI;return Cu},distanceTo:function(Cu){return Math.sqrt(this.distanceToSquared(Cu))},distanceToSquared:function(Cu){var Tu=this.x-Cu.x,Pu=this.y-Cu.y;return Tu*Tu+Pu*Pu},manhattanDistanceTo:function(Cu){return Math.abs(this.x-Cu.x)+Math.abs(this.y-Cu.y)},setLength:function(Cu){return this.normalize().multiplyScalar(Cu)},lerp:function(Cu,Tu){return this.x+=(Cu.x-this.x)*Tu,this.y+=(Cu.y-this.y)*Tu,this},lerpVectors:function(Cu,Tu,Pu){return this.x=Cu.x+(Tu.x-Cu.x)*Pu,this.y=Cu.y+(Tu.y-Cu.y)*Pu,this},equals:function(Cu){return Cu.x===this.x&&Cu.y===this.y},fromArray:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.x=Cu[Tu],this.y=Cu[Tu+1],this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this.x,Cu[Tu+1]=this.y,Cu},fromBufferAttribute:function(Cu,Tu,Pu){return Pu!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=Cu.getX(Tu),this.y=Cu.getY(Tu),this},rotateAround:function(Cu,Tu){var Pu=Math.cos(Tu),Bu=Math.sin(Tu),Lu=this.x-Cu.x,Ru=this.y-Cu.y;return this.x=Lu*Pu-Ru*Bu+Cu.x,this.y=Lu*Bu+Ru*Pu+Cu.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){var Fu=this.elements;return Fu[0]=Cu,Fu[1]=Bu,Fu[2]=Ou,Fu[3]=Tu,Fu[4]=Lu,Fu[5]=Du,Fu[6]=Pu,Fu[7]=Ru,Fu[8]=ku,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(Cu){var Tu=this.elements,Pu=Cu.elements;return Tu[0]=Pu[0],Tu[1]=Pu[1],Tu[2]=Pu[2],Tu[3]=Pu[3],Tu[4]=Pu[4],Tu[5]=Pu[5],Tu[6]=Pu[6],Tu[7]=Pu[7],Tu[8]=Pu[8],this},extractBasis:function(Cu,Tu,Pu){return Cu.setFromMatrix3Column(this,0),Tu.setFromMatrix3Column(this,1),Pu.setFromMatrix3Column(this,2),this},setFromMatrix4:function(Cu){var Tu=Cu.elements;return this.set(Tu[0],Tu[4],Tu[8],Tu[1],Tu[5],Tu[9],Tu[2],Tu[6],Tu[10]),this},multiply:function(Cu){return this.multiplyMatrices(this,Cu)},premultiply:function(Cu){return this.multiplyMatrices(Cu,this)},multiplyMatrices:function(Cu,Tu){var Pu=Cu.elements,Bu=Tu.elements,Lu=this.elements,Ru=Pu[0],Ou=Pu[3],Du=Pu[6],ku=Pu[1],Fu=Pu[4],Nu=Pu[7],Gu=Pu[2],zu=Pu[5],Hu=Pu[8],Wu=Bu[0],_h=Bu[3],Xc=Bu[6],ju=Bu[1],_c=Bu[4],_f=Bu[7],ep=Bu[2],tp=Bu[5],op=Bu[8];return Lu[0]=Ru*Wu+Ou*ju+Du*ep,Lu[3]=Ru*_h+Ou*_c+Du*tp,Lu[6]=Ru*Xc+Ou*_f+Du*op,Lu[1]=ku*Wu+Fu*ju+Nu*ep,Lu[4]=ku*_h+Fu*_c+Nu*tp,Lu[7]=ku*Xc+Fu*_f+Nu*op,Lu[2]=Gu*Wu+zu*ju+Hu*ep,Lu[5]=Gu*_h+zu*_c+Hu*tp,Lu[8]=Gu*Xc+zu*_f+Hu*op,this},multiplyScalar:function(Cu){var Tu=this.elements;return Tu[0]*=Cu,Tu[3]*=Cu,Tu[6]*=Cu,Tu[1]*=Cu,Tu[4]*=Cu,Tu[7]*=Cu,Tu[2]*=Cu,Tu[5]*=Cu,Tu[8]*=Cu,this},determinant:function(){var Cu=this.elements,Tu=Cu[0],Pu=Cu[1],Bu=Cu[2],Lu=Cu[3],Ru=Cu[4],Ou=Cu[5],Du=Cu[6],ku=Cu[7],Fu=Cu[8];return Tu*Ru*Fu-Tu*Ou*ku-Pu*Lu*Fu+Pu*Ou*Du+Bu*Lu*ku-Bu*Ru*Du},getInverse:function(Cu,Tu){Tu!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var Pu=Cu.elements,Bu=this.elements,Lu=Pu[0],Ru=Pu[1],Ou=Pu[2],Du=Pu[3],ku=Pu[4],Fu=Pu[5],Nu=Pu[6],Gu=Pu[7],zu=Pu[8],Hu=zu*ku-Fu*Gu,Wu=Fu*Nu-zu*Du,_h=Gu*Du-ku*Nu,Xc=Lu*Hu+Ru*Wu+Ou*_h;if(Xc===0)return this.set(0,0,0,0,0,0,0,0,0);var ju=1/Xc;return Bu[0]=Hu*ju,Bu[1]=(Ou*Gu-zu*Ru)*ju,Bu[2]=(Fu*Ru-Ou*ku)*ju,Bu[3]=Wu*ju,Bu[4]=(zu*Lu-Ou*Nu)*ju,Bu[5]=(Ou*Du-Fu*Lu)*ju,Bu[6]=_h*ju,Bu[7]=(Ru*Nu-Gu*Lu)*ju,Bu[8]=(ku*Lu-Ru*Du)*ju,this},transpose:function(){var Cu,Tu=this.elements;return Cu=Tu[1],Tu[1]=Tu[3],Tu[3]=Cu,Cu=Tu[2],Tu[2]=Tu[6],Tu[6]=Cu,Cu=Tu[5],Tu[5]=Tu[7],Tu[7]=Cu,this},getNormalMatrix:function(Cu){return this.setFromMatrix4(Cu).getInverse(this).transpose()},transposeIntoArray:function(Cu){var Tu=this.elements;return Cu[0]=Tu[0],Cu[1]=Tu[3],Cu[2]=Tu[6],Cu[3]=Tu[1],Cu[4]=Tu[4],Cu[5]=Tu[7],Cu[6]=Tu[2],Cu[7]=Tu[5],Cu[8]=Tu[8],this},setUvTransform:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou){var Du=Math.cos(Lu),ku=Math.sin(Lu);this.set(Pu*Du,Pu*ku,-Pu*(Du*Ru+ku*Ou)+Ru+Cu,-Bu*ku,Bu*Du,-Bu*(-ku*Ru+Du*Ou)+Ou+Tu,0,0,1)},scale:function(Cu,Tu){var Pu=this.elements;return Pu[0]*=Cu,Pu[3]*=Cu,Pu[6]*=Cu,Pu[1]*=Tu,Pu[4]*=Tu,Pu[7]*=Tu,this},rotate:function(Cu){var Tu=Math.cos(Cu),Pu=Math.sin(Cu),Bu=this.elements,Lu=Bu[0],Ru=Bu[3],Ou=Bu[6],Du=Bu[1],ku=Bu[4],Fu=Bu[7];return Bu[0]=Tu*Lu+Pu*Du,Bu[3]=Tu*Ru+Pu*ku,Bu[6]=Tu*Ou+Pu*Fu,Bu[1]=-Pu*Lu+Tu*Du,Bu[4]=-Pu*Ru+Tu*ku,Bu[7]=-Pu*Ou+Tu*Fu,this},translate:function(Cu,Tu){var Pu=this.elements;return Pu[0]+=Cu*Pu[2],Pu[3]+=Cu*Pu[5],Pu[6]+=Cu*Pu[8],Pu[1]+=Tu*Pu[2],Pu[4]+=Tu*Pu[5],Pu[7]+=Tu*Pu[8],this},equals:function(Cu){for(var Tu=this.elements,Pu=Cu.elements,Bu=0;Bu<9;Bu++)if(Tu[Bu]!==Pu[Bu])return!1;return!0},fromArray:function(Cu,Tu){Tu===void 0&&(Tu=0);for(var Pu=0;Pu<9;Pu++)this.elements[Pu]=Cu[Pu+Tu];return this},toArray:function(Cu,Tu){Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0);var Pu=this.elements;return Cu[Tu]=Pu[0],Cu[Tu+1]=Pu[1],Cu[Tu+2]=Pu[2],Cu[Tu+3]=Pu[3],Cu[Tu+4]=Pu[4],Cu[Tu+5]=Pu[5],Cu[Tu+6]=Pu[6],Cu[Tu+7]=Pu[7],Cu[Tu+8]=Pu[8],Cu}});var _canvas,ImageUtils={getDataURL:function(Cu){var Tu;if(typeof HTMLCanvasElement=="undefined")return Cu.src;if(Cu instanceof HTMLCanvasElement)Tu=Cu;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=Cu.width,_canvas.height=Cu.height;var Pu=_canvas.getContext("2d");Cu instanceof ImageData?Pu.putImageData(Cu,0,0):Pu.drawImage(Cu,0,0,Cu.width,Cu.height),Tu=_canvas}return Tu.width>2048||Tu.height>2048?Tu.toDataURL("image/jpeg",.6):Tu.toDataURL("image/png")}},textureId=0;function Texture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=Cu!==void 0?Cu:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=Tu!==void 0?Tu:Texture.DEFAULT_MAPPING,this.wrapS=Pu!==void 0?Pu:ClampToEdgeWrapping,this.wrapT=Bu!==void 0?Bu:ClampToEdgeWrapping,this.magFilter=Lu!==void 0?Lu:LinearFilter,this.minFilter=Ru!==void 0?Ru:LinearMipmapLinearFilter,this.anisotropy=ku!==void 0?ku:1,this.format=Ou!==void 0?Ou:RGBAFormat,this.internalFormat=null,this.type=Du!==void 0?Du:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Fu!==void 0?Fu:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.name=Cu.name,this.image=Cu.image,this.mipmaps=Cu.mipmaps.slice(0),this.mapping=Cu.mapping,this.wrapS=Cu.wrapS,this.wrapT=Cu.wrapT,this.magFilter=Cu.magFilter,this.minFilter=Cu.minFilter,this.anisotropy=Cu.anisotropy,this.format=Cu.format,this.internalFormat=Cu.internalFormat,this.type=Cu.type,this.offset.copy(Cu.offset),this.repeat.copy(Cu.repeat),this.center.copy(Cu.center),this.rotation=Cu.rotation,this.matrixAutoUpdate=Cu.matrixAutoUpdate,this.matrix.copy(Cu.matrix),this.generateMipmaps=Cu.generateMipmaps,this.premultiplyAlpha=Cu.premultiplyAlpha,this.flipY=Cu.flipY,this.unpackAlignment=Cu.unpackAlignment,this.encoding=Cu.encoding,this},toJSON:function(Cu){var Tu=Cu===void 0||typeof Cu=="string";if(!Tu&&Cu.textures[this.uuid]!==void 0)return Cu.textures[this.uuid];var Pu={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Bu=this.image;if(Bu.uuid===void 0&&(Bu.uuid=MathUtils.generateUUID()),!Tu&&Cu.images[Bu.uuid]===void 0){var Lu;if(Array.isArray(Bu)){Lu=[];for(var Ru=0,Ou=Bu.length;Ru<Ou;Ru++)Lu.push(ImageUtils.getDataURL(Bu[Ru]))}else Lu=ImageUtils.getDataURL(Bu);Cu.images[Bu.uuid]={uuid:Bu.uuid,url:Lu}}Pu.image=Bu.uuid}return Tu||(Cu.textures[this.uuid]=Pu),Pu},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(Cu){if(this.mapping!==UVMapping)return Cu;if(Cu.applyMatrix3(this.matrix),Cu.x<0||Cu.x>1)switch(this.wrapS){case RepeatWrapping:Cu.x=Cu.x-Math.floor(Cu.x);break;case ClampToEdgeWrapping:Cu.x=Cu.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(Cu.x)%2)===1?Cu.x=Math.ceil(Cu.x)-Cu.x:Cu.x=Cu.x-Math.floor(Cu.x);break}if(Cu.y<0||Cu.y>1)switch(this.wrapT){case RepeatWrapping:Cu.y=Cu.y-Math.floor(Cu.y);break;case ClampToEdgeWrapping:Cu.y=Cu.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(Cu.y)%2)===1?Cu.y=Math.ceil(Cu.y)-Cu.y:Cu.y=Cu.y-Math.floor(Cu.y);break}return this.flipY&&(Cu.y=1-Cu.y),Cu}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(Cu){Cu===!0&&this.version++}});function Vector4(Cu,Tu,Pu,Bu){this.x=Cu||0,this.y=Tu||0,this.z=Pu||0,this.w=Bu!==void 0?Bu:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(Cu){this.z=Cu}},height:{get:function(){return this.w},set:function(Cu){this.w=Cu}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(Cu,Tu,Pu,Bu){return this.x=Cu,this.y=Tu,this.z=Pu,this.w=Bu,this},setScalar:function(Cu){return this.x=Cu,this.y=Cu,this.z=Cu,this.w=Cu,this},setX:function(Cu){return this.x=Cu,this},setY:function(Cu){return this.y=Cu,this},setZ:function(Cu){return this.z=Cu,this},setW:function(Cu){return this.w=Cu,this},setComponent:function(Cu,Tu){switch(Cu){case 0:this.x=Tu;break;case 1:this.y=Tu;break;case 2:this.z=Tu;break;case 3:this.w=Tu;break;default:throw new Error("index is out of range: "+Cu)}return this},getComponent:function(Cu){switch(Cu){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+Cu)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(Cu){return this.x=Cu.x,this.y=Cu.y,this.z=Cu.z,this.w=Cu.w!==void 0?Cu.w:1,this},add:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Cu,Tu)):(this.x+=Cu.x,this.y+=Cu.y,this.z+=Cu.z,this.w+=Cu.w,this)},addScalar:function(Cu){return this.x+=Cu,this.y+=Cu,this.z+=Cu,this.w+=Cu,this},addVectors:function(Cu,Tu){return this.x=Cu.x+Tu.x,this.y=Cu.y+Tu.y,this.z=Cu.z+Tu.z,this.w=Cu.w+Tu.w,this},addScaledVector:function(Cu,Tu){return this.x+=Cu.x*Tu,this.y+=Cu.y*Tu,this.z+=Cu.z*Tu,this.w+=Cu.w*Tu,this},sub:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Cu,Tu)):(this.x-=Cu.x,this.y-=Cu.y,this.z-=Cu.z,this.w-=Cu.w,this)},subScalar:function(Cu){return this.x-=Cu,this.y-=Cu,this.z-=Cu,this.w-=Cu,this},subVectors:function(Cu,Tu){return this.x=Cu.x-Tu.x,this.y=Cu.y-Tu.y,this.z=Cu.z-Tu.z,this.w=Cu.w-Tu.w,this},multiplyScalar:function(Cu){return this.x*=Cu,this.y*=Cu,this.z*=Cu,this.w*=Cu,this},applyMatrix4:function(Cu){var Tu=this.x,Pu=this.y,Bu=this.z,Lu=this.w,Ru=Cu.elements;return this.x=Ru[0]*Tu+Ru[4]*Pu+Ru[8]*Bu+Ru[12]*Lu,this.y=Ru[1]*Tu+Ru[5]*Pu+Ru[9]*Bu+Ru[13]*Lu,this.z=Ru[2]*Tu+Ru[6]*Pu+Ru[10]*Bu+Ru[14]*Lu,this.w=Ru[3]*Tu+Ru[7]*Pu+Ru[11]*Bu+Ru[15]*Lu,this},divideScalar:function(Cu){return this.multiplyScalar(1/Cu)},setAxisAngleFromQuaternion:function(Cu){this.w=2*Math.acos(Cu.w);var Tu=Math.sqrt(1-Cu.w*Cu.w);return Tu<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=Cu.x/Tu,this.y=Cu.y/Tu,this.z=Cu.z/Tu),this},setAxisAngleFromRotationMatrix:function(Cu){var Tu,Pu,Bu,Lu,Ru=.01,Ou=.1,Du=Cu.elements,ku=Du[0],Fu=Du[4],Nu=Du[8],Gu=Du[1],zu=Du[5],Hu=Du[9],Wu=Du[2],_h=Du[6],Xc=Du[10];if(Math.abs(Fu-Gu)<Ru&&Math.abs(Nu-Wu)<Ru&&Math.abs(Hu-_h)<Ru){if(Math.abs(Fu+Gu)<Ou&&Math.abs(Nu+Wu)<Ou&&Math.abs(Hu+_h)<Ou&&Math.abs(ku+zu+Xc-3)<Ou)return this.set(1,0,0,0),this;Tu=Math.PI;var ju=(ku+1)/2,_c=(zu+1)/2,_f=(Xc+1)/2,ep=(Fu+Gu)/4,tp=(Nu+Wu)/4,op=(Hu+_h)/4;return ju>_c&&ju>_f?ju<Ru?(Pu=0,Bu=.707106781,Lu=.707106781):(Pu=Math.sqrt(ju),Bu=ep/Pu,Lu=tp/Pu):_c>_f?_c<Ru?(Pu=.707106781,Bu=0,Lu=.707106781):(Bu=Math.sqrt(_c),Pu=ep/Bu,Lu=op/Bu):_f<Ru?(Pu=.707106781,Bu=.707106781,Lu=0):(Lu=Math.sqrt(_f),Pu=tp/Lu,Bu=op/Lu),this.set(Pu,Bu,Lu,Tu),this}var lp=Math.sqrt((_h-Hu)*(_h-Hu)+(Nu-Wu)*(Nu-Wu)+(Gu-Fu)*(Gu-Fu));return Math.abs(lp)<.001&&(lp=1),this.x=(_h-Hu)/lp,this.y=(Nu-Wu)/lp,this.z=(Gu-Fu)/lp,this.w=Math.acos((ku+zu+Xc-1)/2),this},min:function(Cu){return this.x=Math.min(this.x,Cu.x),this.y=Math.min(this.y,Cu.y),this.z=Math.min(this.z,Cu.z),this.w=Math.min(this.w,Cu.w),this},max:function(Cu){return this.x=Math.max(this.x,Cu.x),this.y=Math.max(this.y,Cu.y),this.z=Math.max(this.z,Cu.z),this.w=Math.max(this.w,Cu.w),this},clamp:function(Cu,Tu){return this.x=Math.max(Cu.x,Math.min(Tu.x,this.x)),this.y=Math.max(Cu.y,Math.min(Tu.y,this.y)),this.z=Math.max(Cu.z,Math.min(Tu.z,this.z)),this.w=Math.max(Cu.w,Math.min(Tu.w,this.w)),this},clampScalar:function(Cu,Tu){return this.x=Math.max(Cu,Math.min(Tu,this.x)),this.y=Math.max(Cu,Math.min(Tu,this.y)),this.z=Math.max(Cu,Math.min(Tu,this.z)),this.w=Math.max(Cu,Math.min(Tu,this.w)),this},clampLength:function(Cu,Tu){var Pu=this.length();return this.divideScalar(Pu||1).multiplyScalar(Math.max(Cu,Math.min(Tu,Pu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(Cu){return this.x*Cu.x+this.y*Cu.y+this.z*Cu.z+this.w*Cu.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(Cu){return this.normalize().multiplyScalar(Cu)},lerp:function(Cu,Tu){return this.x+=(Cu.x-this.x)*Tu,this.y+=(Cu.y-this.y)*Tu,this.z+=(Cu.z-this.z)*Tu,this.w+=(Cu.w-this.w)*Tu,this},lerpVectors:function(Cu,Tu,Pu){return this.x=Cu.x+(Tu.x-Cu.x)*Pu,this.y=Cu.y+(Tu.y-Cu.y)*Pu,this.z=Cu.z+(Tu.z-Cu.z)*Pu,this.w=Cu.w+(Tu.w-Cu.w)*Pu,this},equals:function(Cu){return Cu.x===this.x&&Cu.y===this.y&&Cu.z===this.z&&Cu.w===this.w},fromArray:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.x=Cu[Tu],this.y=Cu[Tu+1],this.z=Cu[Tu+2],this.w=Cu[Tu+3],this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this.x,Cu[Tu+1]=this.y,Cu[Tu+2]=this.z,Cu[Tu+3]=this.w,Cu},fromBufferAttribute:function(Cu,Tu,Pu){return Pu!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=Cu.getX(Tu),this.y=Cu.getY(Tu),this.z=Cu.getZ(Tu),this.w=Cu.getW(Tu),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(Cu,Tu,Pu){this.width=Cu,this.height=Tu,this.scissor=new Vector4(0,0,Cu,Tu),this.scissorTest=!1,this.viewport=new Vector4(0,0,Cu,Tu),Pu=Pu||{},this.texture=new Texture(void 0,Pu.mapping,Pu.wrapS,Pu.wrapT,Pu.magFilter,Pu.minFilter,Pu.format,Pu.type,Pu.anisotropy,Pu.encoding),this.texture.image={},this.texture.image.width=Cu,this.texture.image.height=Tu,this.texture.generateMipmaps=Pu.generateMipmaps!==void 0?Pu.generateMipmaps:!1,this.texture.minFilter=Pu.minFilter!==void 0?Pu.minFilter:LinearFilter,this.depthBuffer=Pu.depthBuffer!==void 0?Pu.depthBuffer:!0,this.stencilBuffer=Pu.stencilBuffer!==void 0?Pu.stencilBuffer:!0,this.depthTexture=Pu.depthTexture!==void 0?Pu.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(Cu,Tu){(this.width!==Cu||this.height!==Tu)&&(this.width=Cu,this.height=Tu,this.texture.image.width=Cu,this.texture.image.height=Tu,this.dispose()),this.viewport.set(0,0,Cu,Tu),this.scissor.set(0,0,Cu,Tu)},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.width=Cu.width,this.height=Cu.height,this.viewport.copy(Cu.viewport),this.texture=Cu.texture.clone(),this.depthBuffer=Cu.depthBuffer,this.stencilBuffer=Cu.stencilBuffer,this.depthTexture=Cu.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(Cu,Tu,Pu){WebGLRenderTarget.call(this,Cu,Tu,Pu),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(Cu){return WebGLRenderTarget.prototype.copy.call(this,Cu),this.samples=Cu.samples,this}});function Quaternion(Cu,Tu,Pu,Bu){this._x=Cu||0,this._y=Tu||0,this._z=Pu||0,this._w=Bu!==void 0?Bu:1}Object.assign(Quaternion,{slerp:function(Cu,Tu,Pu,Bu){return Pu.copy(Cu).slerp(Tu,Bu)},slerpFlat:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou){var Du=Pu[Bu+0],ku=Pu[Bu+1],Fu=Pu[Bu+2],Nu=Pu[Bu+3],Gu=Lu[Ru+0],zu=Lu[Ru+1],Hu=Lu[Ru+2],Wu=Lu[Ru+3];if(Nu!==Wu||Du!==Gu||ku!==zu||Fu!==Hu){var _h=1-Ou,Xc=Du*Gu+ku*zu+Fu*Hu+Nu*Wu,ju=Xc>=0?1:-1,_c=1-Xc*Xc;if(_c>Number.EPSILON){var _f=Math.sqrt(_c),ep=Math.atan2(_f,Xc*ju);_h=Math.sin(_h*ep)/_f,Ou=Math.sin(Ou*ep)/_f}var tp=Ou*ju;if(Du=Du*_h+Gu*tp,ku=ku*_h+zu*tp,Fu=Fu*_h+Hu*tp,Nu=Nu*_h+Wu*tp,_h===1-Ou){var op=1/Math.sqrt(Du*Du+ku*ku+Fu*Fu+Nu*Nu);Du*=op,ku*=op,Fu*=op,Nu*=op}}Cu[Tu]=Du,Cu[Tu+1]=ku,Cu[Tu+2]=Fu,Cu[Tu+3]=Nu},multiplyQuaternionsFlat:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=Pu[Bu],Du=Pu[Bu+1],ku=Pu[Bu+2],Fu=Pu[Bu+3],Nu=Lu[Ru],Gu=Lu[Ru+1],zu=Lu[Ru+2],Hu=Lu[Ru+3];return Cu[Tu]=Ou*Hu+Fu*Nu+Du*zu-ku*Gu,Cu[Tu+1]=Du*Hu+Fu*Gu+ku*Nu-Ou*zu,Cu[Tu+2]=ku*Hu+Fu*zu+Ou*Gu-Du*Nu,Cu[Tu+3]=Fu*Hu-Ou*Nu-Du*Gu-ku*zu,Cu}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(Cu){this._x=Cu,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(Cu){this._y=Cu,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(Cu){this._z=Cu,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(Cu){this._w=Cu,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(Cu,Tu,Pu,Bu){return this._x=Cu,this._y=Tu,this._z=Pu,this._w=Bu,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(Cu){return this._x=Cu.x,this._y=Cu.y,this._z=Cu.z,this._w=Cu.w,this._onChangeCallback(),this},setFromEuler:function(Cu,Tu){if(!(Cu&&Cu.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Pu=Cu._x,Bu=Cu._y,Lu=Cu._z,Ru=Cu.order,Ou=Math.cos,Du=Math.sin,ku=Ou(Pu/2),Fu=Ou(Bu/2),Nu=Ou(Lu/2),Gu=Du(Pu/2),zu=Du(Bu/2),Hu=Du(Lu/2);switch(Ru){case"XYZ":this._x=Gu*Fu*Nu+ku*zu*Hu,this._y=ku*zu*Nu-Gu*Fu*Hu,this._z=ku*Fu*Hu+Gu*zu*Nu,this._w=ku*Fu*Nu-Gu*zu*Hu;break;case"YXZ":this._x=Gu*Fu*Nu+ku*zu*Hu,this._y=ku*zu*Nu-Gu*Fu*Hu,this._z=ku*Fu*Hu-Gu*zu*Nu,this._w=ku*Fu*Nu+Gu*zu*Hu;break;case"ZXY":this._x=Gu*Fu*Nu-ku*zu*Hu,this._y=ku*zu*Nu+Gu*Fu*Hu,this._z=ku*Fu*Hu+Gu*zu*Nu,this._w=ku*Fu*Nu-Gu*zu*Hu;break;case"ZYX":this._x=Gu*Fu*Nu-ku*zu*Hu,this._y=ku*zu*Nu+Gu*Fu*Hu,this._z=ku*Fu*Hu-Gu*zu*Nu,this._w=ku*Fu*Nu+Gu*zu*Hu;break;case"YZX":this._x=Gu*Fu*Nu+ku*zu*Hu,this._y=ku*zu*Nu+Gu*Fu*Hu,this._z=ku*Fu*Hu-Gu*zu*Nu,this._w=ku*Fu*Nu-Gu*zu*Hu;break;case"XZY":this._x=Gu*Fu*Nu-ku*zu*Hu,this._y=ku*zu*Nu-Gu*Fu*Hu,this._z=ku*Fu*Hu+Gu*zu*Nu,this._w=ku*Fu*Nu+Gu*zu*Hu;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ru)}return Tu!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(Cu,Tu){var Pu=Tu/2,Bu=Math.sin(Pu);return this._x=Cu.x*Bu,this._y=Cu.y*Bu,this._z=Cu.z*Bu,this._w=Math.cos(Pu),this._onChangeCallback(),this},setFromRotationMatrix:function(Cu){var Tu=Cu.elements,Pu=Tu[0],Bu=Tu[4],Lu=Tu[8],Ru=Tu[1],Ou=Tu[5],Du=Tu[9],ku=Tu[2],Fu=Tu[6],Nu=Tu[10],Gu=Pu+Ou+Nu,zu;return Gu>0?(zu=.5/Math.sqrt(Gu+1),this._w=.25/zu,this._x=(Fu-Du)*zu,this._y=(Lu-ku)*zu,this._z=(Ru-Bu)*zu):Pu>Ou&&Pu>Nu?(zu=2*Math.sqrt(1+Pu-Ou-Nu),this._w=(Fu-Du)/zu,this._x=.25*zu,this._y=(Bu+Ru)/zu,this._z=(Lu+ku)/zu):Ou>Nu?(zu=2*Math.sqrt(1+Ou-Pu-Nu),this._w=(Lu-ku)/zu,this._x=(Bu+Ru)/zu,this._y=.25*zu,this._z=(Du+Fu)/zu):(zu=2*Math.sqrt(1+Nu-Pu-Ou),this._w=(Ru-Bu)/zu,this._x=(Lu+ku)/zu,this._y=(Du+Fu)/zu,this._z=.25*zu),this._onChangeCallback(),this},setFromUnitVectors:function(Cu,Tu){var Pu=1e-6,Bu=Cu.dot(Tu)+1;return Bu<Pu?(Bu=0,Math.abs(Cu.x)>Math.abs(Cu.z)?(this._x=-Cu.y,this._y=Cu.x,this._z=0,this._w=Bu):(this._x=0,this._y=-Cu.z,this._z=Cu.y,this._w=Bu)):(this._x=Cu.y*Tu.z-Cu.z*Tu.y,this._y=Cu.z*Tu.x-Cu.x*Tu.z,this._z=Cu.x*Tu.y-Cu.y*Tu.x,this._w=Bu),this.normalize()},angleTo:function(Cu){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(Cu),-1,1)))},rotateTowards:function(Cu,Tu){var Pu=this.angleTo(Cu);if(Pu===0)return this;var Bu=Math.min(1,Tu/Pu);return this.slerp(Cu,Bu),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(Cu){return this._x*Cu._x+this._y*Cu._y+this._z*Cu._z+this._w*Cu._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var Cu=this.length();return Cu===0?(this._x=0,this._y=0,this._z=0,this._w=1):(Cu=1/Cu,this._x=this._x*Cu,this._y=this._y*Cu,this._z=this._z*Cu,this._w=this._w*Cu),this._onChangeCallback(),this},multiply:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(Cu,Tu)):this.multiplyQuaternions(this,Cu)},premultiply:function(Cu){return this.multiplyQuaternions(Cu,this)},multiplyQuaternions:function(Cu,Tu){var Pu=Cu._x,Bu=Cu._y,Lu=Cu._z,Ru=Cu._w,Ou=Tu._x,Du=Tu._y,ku=Tu._z,Fu=Tu._w;return this._x=Pu*Fu+Ru*Ou+Bu*ku-Lu*Du,this._y=Bu*Fu+Ru*Du+Lu*Ou-Pu*ku,this._z=Lu*Fu+Ru*ku+Pu*Du-Bu*Ou,this._w=Ru*Fu-Pu*Ou-Bu*Du-Lu*ku,this._onChangeCallback(),this},slerp:function(Cu,Tu){if(Tu===0)return this;if(Tu===1)return this.copy(Cu);var Pu=this._x,Bu=this._y,Lu=this._z,Ru=this._w,Ou=Ru*Cu._w+Pu*Cu._x+Bu*Cu._y+Lu*Cu._z;if(Ou<0?(this._w=-Cu._w,this._x=-Cu._x,this._y=-Cu._y,this._z=-Cu._z,Ou=-Ou):this.copy(Cu),Ou>=1)return this._w=Ru,this._x=Pu,this._y=Bu,this._z=Lu,this;var Du=1-Ou*Ou;if(Du<=Number.EPSILON){var ku=1-Tu;return this._w=ku*Ru+Tu*this._w,this._x=ku*Pu+Tu*this._x,this._y=ku*Bu+Tu*this._y,this._z=ku*Lu+Tu*this._z,this.normalize(),this._onChangeCallback(),this}var Fu=Math.sqrt(Du),Nu=Math.atan2(Fu,Ou),Gu=Math.sin((1-Tu)*Nu)/Fu,zu=Math.sin(Tu*Nu)/Fu;return this._w=Ru*Gu+this._w*zu,this._x=Pu*Gu+this._x*zu,this._y=Bu*Gu+this._y*zu,this._z=Lu*Gu+this._z*zu,this._onChangeCallback(),this},equals:function(Cu){return Cu._x===this._x&&Cu._y===this._y&&Cu._z===this._z&&Cu._w===this._w},fromArray:function(Cu,Tu){return Tu===void 0&&(Tu=0),this._x=Cu[Tu],this._y=Cu[Tu+1],this._z=Cu[Tu+2],this._w=Cu[Tu+3],this._onChangeCallback(),this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this._x,Cu[Tu+1]=this._y,Cu[Tu+2]=this._z,Cu[Tu+3]=this._w,Cu},fromBufferAttribute:function(Cu,Tu){return this._x=Cu.getX(Tu),this._y=Cu.getY(Tu),this._z=Cu.getZ(Tu),this._w=Cu.getW(Tu),this},_onChange:function(Cu){return this._onChangeCallback=Cu,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(Cu,Tu,Pu){this.x=Cu||0,this.y=Tu||0,this.z=Pu||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(Cu,Tu,Pu){return this.x=Cu,this.y=Tu,this.z=Pu,this},setScalar:function(Cu){return this.x=Cu,this.y=Cu,this.z=Cu,this},setX:function(Cu){return this.x=Cu,this},setY:function(Cu){return this.y=Cu,this},setZ:function(Cu){return this.z=Cu,this},setComponent:function(Cu,Tu){switch(Cu){case 0:this.x=Tu;break;case 1:this.y=Tu;break;case 2:this.z=Tu;break;default:throw new Error("index is out of range: "+Cu)}return this},getComponent:function(Cu){switch(Cu){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+Cu)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(Cu){return this.x=Cu.x,this.y=Cu.y,this.z=Cu.z,this},add:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Cu,Tu)):(this.x+=Cu.x,this.y+=Cu.y,this.z+=Cu.z,this)},addScalar:function(Cu){return this.x+=Cu,this.y+=Cu,this.z+=Cu,this},addVectors:function(Cu,Tu){return this.x=Cu.x+Tu.x,this.y=Cu.y+Tu.y,this.z=Cu.z+Tu.z,this},addScaledVector:function(Cu,Tu){return this.x+=Cu.x*Tu,this.y+=Cu.y*Tu,this.z+=Cu.z*Tu,this},sub:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Cu,Tu)):(this.x-=Cu.x,this.y-=Cu.y,this.z-=Cu.z,this)},subScalar:function(Cu){return this.x-=Cu,this.y-=Cu,this.z-=Cu,this},subVectors:function(Cu,Tu){return this.x=Cu.x-Tu.x,this.y=Cu.y-Tu.y,this.z=Cu.z-Tu.z,this},multiply:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(Cu,Tu)):(this.x*=Cu.x,this.y*=Cu.y,this.z*=Cu.z,this)},multiplyScalar:function(Cu){return this.x*=Cu,this.y*=Cu,this.z*=Cu,this},multiplyVectors:function(Cu,Tu){return this.x=Cu.x*Tu.x,this.y=Cu.y*Tu.y,this.z=Cu.z*Tu.z,this},applyEuler:function(Cu){return Cu&&Cu.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(Cu))},applyAxisAngle:function(Cu,Tu){return this.applyQuaternion(_quaternion.setFromAxisAngle(Cu,Tu))},applyMatrix3:function(Cu){var Tu=this.x,Pu=this.y,Bu=this.z,Lu=Cu.elements;return this.x=Lu[0]*Tu+Lu[3]*Pu+Lu[6]*Bu,this.y=Lu[1]*Tu+Lu[4]*Pu+Lu[7]*Bu,this.z=Lu[2]*Tu+Lu[5]*Pu+Lu[8]*Bu,this},applyNormalMatrix:function(Cu){return this.applyMatrix3(Cu).normalize()},applyMatrix4:function(Cu){var Tu=this.x,Pu=this.y,Bu=this.z,Lu=Cu.elements,Ru=1/(Lu[3]*Tu+Lu[7]*Pu+Lu[11]*Bu+Lu[15]);return this.x=(Lu[0]*Tu+Lu[4]*Pu+Lu[8]*Bu+Lu[12])*Ru,this.y=(Lu[1]*Tu+Lu[5]*Pu+Lu[9]*Bu+Lu[13])*Ru,this.z=(Lu[2]*Tu+Lu[6]*Pu+Lu[10]*Bu+Lu[14])*Ru,this},applyQuaternion:function(Cu){var Tu=this.x,Pu=this.y,Bu=this.z,Lu=Cu.x,Ru=Cu.y,Ou=Cu.z,Du=Cu.w,ku=Du*Tu+Ru*Bu-Ou*Pu,Fu=Du*Pu+Ou*Tu-Lu*Bu,Nu=Du*Bu+Lu*Pu-Ru*Tu,Gu=-Lu*Tu-Ru*Pu-Ou*Bu;return this.x=ku*Du+Gu*-Lu+Fu*-Ou-Nu*-Ru,this.y=Fu*Du+Gu*-Ru+Nu*-Lu-ku*-Ou,this.z=Nu*Du+Gu*-Ou+ku*-Ru-Fu*-Lu,this},project:function(Cu){return this.applyMatrix4(Cu.matrixWorldInverse).applyMatrix4(Cu.projectionMatrix)},unproject:function(Cu){return this.applyMatrix4(Cu.projectionMatrixInverse).applyMatrix4(Cu.matrixWorld)},transformDirection:function(Cu){var Tu=this.x,Pu=this.y,Bu=this.z,Lu=Cu.elements;return this.x=Lu[0]*Tu+Lu[4]*Pu+Lu[8]*Bu,this.y=Lu[1]*Tu+Lu[5]*Pu+Lu[9]*Bu,this.z=Lu[2]*Tu+Lu[6]*Pu+Lu[10]*Bu,this.normalize()},divide:function(Cu){return this.x/=Cu.x,this.y/=Cu.y,this.z/=Cu.z,this},divideScalar:function(Cu){return this.multiplyScalar(1/Cu)},min:function(Cu){return this.x=Math.min(this.x,Cu.x),this.y=Math.min(this.y,Cu.y),this.z=Math.min(this.z,Cu.z),this},max:function(Cu){return this.x=Math.max(this.x,Cu.x),this.y=Math.max(this.y,Cu.y),this.z=Math.max(this.z,Cu.z),this},clamp:function(Cu,Tu){return this.x=Math.max(Cu.x,Math.min(Tu.x,this.x)),this.y=Math.max(Cu.y,Math.min(Tu.y,this.y)),this.z=Math.max(Cu.z,Math.min(Tu.z,this.z)),this},clampScalar:function(Cu,Tu){return this.x=Math.max(Cu,Math.min(Tu,this.x)),this.y=Math.max(Cu,Math.min(Tu,this.y)),this.z=Math.max(Cu,Math.min(Tu,this.z)),this},clampLength:function(Cu,Tu){var Pu=this.length();return this.divideScalar(Pu||1).multiplyScalar(Math.max(Cu,Math.min(Tu,Pu)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(Cu){return this.x*Cu.x+this.y*Cu.y+this.z*Cu.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(Cu){return this.normalize().multiplyScalar(Cu)},lerp:function(Cu,Tu){return this.x+=(Cu.x-this.x)*Tu,this.y+=(Cu.y-this.y)*Tu,this.z+=(Cu.z-this.z)*Tu,this},lerpVectors:function(Cu,Tu,Pu){return this.x=Cu.x+(Tu.x-Cu.x)*Pu,this.y=Cu.y+(Tu.y-Cu.y)*Pu,this.z=Cu.z+(Tu.z-Cu.z)*Pu,this},cross:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(Cu,Tu)):this.crossVectors(this,Cu)},crossVectors:function(Cu,Tu){var Pu=Cu.x,Bu=Cu.y,Lu=Cu.z,Ru=Tu.x,Ou=Tu.y,Du=Tu.z;return this.x=Bu*Du-Lu*Ou,this.y=Lu*Ru-Pu*Du,this.z=Pu*Ou-Bu*Ru,this},projectOnVector:function(Cu){var Tu=Cu.lengthSq();if(Tu===0)return this.set(0,0,0);var Pu=Cu.dot(this)/Tu;return this.copy(Cu).multiplyScalar(Pu)},projectOnPlane:function(Cu){return _vector.copy(this).projectOnVector(Cu),this.sub(_vector)},reflect:function(Cu){return this.sub(_vector.copy(Cu).multiplyScalar(2*this.dot(Cu)))},angleTo:function(Cu){var Tu=Math.sqrt(this.lengthSq()*Cu.lengthSq());if(Tu===0)return Math.PI/2;var Pu=this.dot(Cu)/Tu;return Math.acos(MathUtils.clamp(Pu,-1,1))},distanceTo:function(Cu){return Math.sqrt(this.distanceToSquared(Cu))},distanceToSquared:function(Cu){var Tu=this.x-Cu.x,Pu=this.y-Cu.y,Bu=this.z-Cu.z;return Tu*Tu+Pu*Pu+Bu*Bu},manhattanDistanceTo:function(Cu){return Math.abs(this.x-Cu.x)+Math.abs(this.y-Cu.y)+Math.abs(this.z-Cu.z)},setFromSpherical:function(Cu){return this.setFromSphericalCoords(Cu.radius,Cu.phi,Cu.theta)},setFromSphericalCoords:function(Cu,Tu,Pu){var Bu=Math.sin(Tu)*Cu;return this.x=Bu*Math.sin(Pu),this.y=Math.cos(Tu)*Cu,this.z=Bu*Math.cos(Pu),this},setFromCylindrical:function(Cu){return this.setFromCylindricalCoords(Cu.radius,Cu.theta,Cu.y)},setFromCylindricalCoords:function(Cu,Tu,Pu){return this.x=Cu*Math.sin(Tu),this.y=Pu,this.z=Cu*Math.cos(Tu),this},setFromMatrixPosition:function(Cu){var Tu=Cu.elements;return this.x=Tu[12],this.y=Tu[13],this.z=Tu[14],this},setFromMatrixScale:function(Cu){var Tu=this.setFromMatrixColumn(Cu,0).length(),Pu=this.setFromMatrixColumn(Cu,1).length(),Bu=this.setFromMatrixColumn(Cu,2).length();return this.x=Tu,this.y=Pu,this.z=Bu,this},setFromMatrixColumn:function(Cu,Tu){return this.fromArray(Cu.elements,Tu*4)},setFromMatrix3Column:function(Cu,Tu){return this.fromArray(Cu.elements,Tu*3)},equals:function(Cu){return Cu.x===this.x&&Cu.y===this.y&&Cu.z===this.z},fromArray:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.x=Cu[Tu],this.y=Cu[Tu+1],this.z=Cu[Tu+2],this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this.x,Cu[Tu+1]=this.y,Cu[Tu+2]=this.z,Cu},fromBufferAttribute:function(Cu,Tu,Pu){return Pu!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=Cu.getX(Tu),this.y=Cu.getY(Tu),this.z=Cu.getZ(Tu),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y$1=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h){var Xc=this.elements;return Xc[0]=Cu,Xc[4]=Tu,Xc[8]=Pu,Xc[12]=Bu,Xc[1]=Lu,Xc[5]=Ru,Xc[9]=Ou,Xc[13]=Du,Xc[2]=ku,Xc[6]=Fu,Xc[10]=Nu,Xc[14]=Gu,Xc[3]=zu,Xc[7]=Hu,Xc[11]=Wu,Xc[15]=_h,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(Cu){var Tu=this.elements,Pu=Cu.elements;return Tu[0]=Pu[0],Tu[1]=Pu[1],Tu[2]=Pu[2],Tu[3]=Pu[3],Tu[4]=Pu[4],Tu[5]=Pu[5],Tu[6]=Pu[6],Tu[7]=Pu[7],Tu[8]=Pu[8],Tu[9]=Pu[9],Tu[10]=Pu[10],Tu[11]=Pu[11],Tu[12]=Pu[12],Tu[13]=Pu[13],Tu[14]=Pu[14],Tu[15]=Pu[15],this},copyPosition:function(Cu){var Tu=this.elements,Pu=Cu.elements;return Tu[12]=Pu[12],Tu[13]=Pu[13],Tu[14]=Pu[14],this},extractBasis:function(Cu,Tu,Pu){return Cu.setFromMatrixColumn(this,0),Tu.setFromMatrixColumn(this,1),Pu.setFromMatrixColumn(this,2),this},makeBasis:function(Cu,Tu,Pu){return this.set(Cu.x,Tu.x,Pu.x,0,Cu.y,Tu.y,Pu.y,0,Cu.z,Tu.z,Pu.z,0,0,0,0,1),this},extractRotation:function(Cu){var Tu=this.elements,Pu=Cu.elements,Bu=1/_v1.setFromMatrixColumn(Cu,0).length(),Lu=1/_v1.setFromMatrixColumn(Cu,1).length(),Ru=1/_v1.setFromMatrixColumn(Cu,2).length();return Tu[0]=Pu[0]*Bu,Tu[1]=Pu[1]*Bu,Tu[2]=Pu[2]*Bu,Tu[3]=0,Tu[4]=Pu[4]*Lu,Tu[5]=Pu[5]*Lu,Tu[6]=Pu[6]*Lu,Tu[7]=0,Tu[8]=Pu[8]*Ru,Tu[9]=Pu[9]*Ru,Tu[10]=Pu[10]*Ru,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,this},makeRotationFromEuler:function(Cu){Cu&&Cu.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var Tu=this.elements,Pu=Cu.x,Bu=Cu.y,Lu=Cu.z,Ru=Math.cos(Pu),Ou=Math.sin(Pu),Du=Math.cos(Bu),ku=Math.sin(Bu),Fu=Math.cos(Lu),Nu=Math.sin(Lu);if(Cu.order==="XYZ"){var Gu=Ru*Fu,zu=Ru*Nu,Hu=Ou*Fu,Wu=Ou*Nu;Tu[0]=Du*Fu,Tu[4]=-Du*Nu,Tu[8]=ku,Tu[1]=zu+Hu*ku,Tu[5]=Gu-Wu*ku,Tu[9]=-Ou*Du,Tu[2]=Wu-Gu*ku,Tu[6]=Hu+zu*ku,Tu[10]=Ru*Du}else if(Cu.order==="YXZ"){var _h=Du*Fu,Xc=Du*Nu,ju=ku*Fu,_c=ku*Nu;Tu[0]=_h+_c*Ou,Tu[4]=ju*Ou-Xc,Tu[8]=Ru*ku,Tu[1]=Ru*Nu,Tu[5]=Ru*Fu,Tu[9]=-Ou,Tu[2]=Xc*Ou-ju,Tu[6]=_c+_h*Ou,Tu[10]=Ru*Du}else if(Cu.order==="ZXY"){var _h=Du*Fu,Xc=Du*Nu,ju=ku*Fu,_c=ku*Nu;Tu[0]=_h-_c*Ou,Tu[4]=-Ru*Nu,Tu[8]=ju+Xc*Ou,Tu[1]=Xc+ju*Ou,Tu[5]=Ru*Fu,Tu[9]=_c-_h*Ou,Tu[2]=-Ru*ku,Tu[6]=Ou,Tu[10]=Ru*Du}else if(Cu.order==="ZYX"){var Gu=Ru*Fu,zu=Ru*Nu,Hu=Ou*Fu,Wu=Ou*Nu;Tu[0]=Du*Fu,Tu[4]=Hu*ku-zu,Tu[8]=Gu*ku+Wu,Tu[1]=Du*Nu,Tu[5]=Wu*ku+Gu,Tu[9]=zu*ku-Hu,Tu[2]=-ku,Tu[6]=Ou*Du,Tu[10]=Ru*Du}else if(Cu.order==="YZX"){var _f=Ru*Du,ep=Ru*ku,tp=Ou*Du,op=Ou*ku;Tu[0]=Du*Fu,Tu[4]=op-_f*Nu,Tu[8]=tp*Nu+ep,Tu[1]=Nu,Tu[5]=Ru*Fu,Tu[9]=-Ou*Fu,Tu[2]=-ku*Fu,Tu[6]=ep*Nu+tp,Tu[10]=_f-op*Nu}else if(Cu.order==="XZY"){var _f=Ru*Du,ep=Ru*ku,tp=Ou*Du,op=Ou*ku;Tu[0]=Du*Fu,Tu[4]=-Nu,Tu[8]=ku*Fu,Tu[1]=_f*Nu+op,Tu[5]=Ru*Fu,Tu[9]=ep*Nu-tp,Tu[2]=tp*Nu-ep,Tu[6]=Ou*Fu,Tu[10]=op*Nu+_f}return Tu[3]=0,Tu[7]=0,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,this},makeRotationFromQuaternion:function(Cu){return this.compose(_zero,Cu,_one)},lookAt:function(Cu,Tu,Pu){var Bu=this.elements;return _z.subVectors(Cu,Tu),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Pu,_z),_x.lengthSq()===0&&(Math.abs(Pu.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Pu,_z)),_x.normalize(),_y$1.crossVectors(_z,_x),Bu[0]=_x.x,Bu[4]=_y$1.x,Bu[8]=_z.x,Bu[1]=_x.y,Bu[5]=_y$1.y,Bu[9]=_z.y,Bu[2]=_x.z,Bu[6]=_y$1.z,Bu[10]=_z.z,this},multiply:function(Cu,Tu){return Tu!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(Cu,Tu)):this.multiplyMatrices(this,Cu)},premultiply:function(Cu){return this.multiplyMatrices(Cu,this)},multiplyMatrices:function(Cu,Tu){var Pu=Cu.elements,Bu=Tu.elements,Lu=this.elements,Ru=Pu[0],Ou=Pu[4],Du=Pu[8],ku=Pu[12],Fu=Pu[1],Nu=Pu[5],Gu=Pu[9],zu=Pu[13],Hu=Pu[2],Wu=Pu[6],_h=Pu[10],Xc=Pu[14],ju=Pu[3],_c=Pu[7],_f=Pu[11],ep=Pu[15],tp=Bu[0],op=Bu[4],lp=Bu[8],up=Bu[12],hp=Bu[1],np=Bu[5],rp=Bu[9],ip=Bu[13],ap=Bu[2],sp=Bu[6],cp=Bu[10],dp=Bu[14],fp=Bu[3],vp=Bu[7],_p=Bu[11],wp=Bu[15];return Lu[0]=Ru*tp+Ou*hp+Du*ap+ku*fp,Lu[4]=Ru*op+Ou*np+Du*sp+ku*vp,Lu[8]=Ru*lp+Ou*rp+Du*cp+ku*_p,Lu[12]=Ru*up+Ou*ip+Du*dp+ku*wp,Lu[1]=Fu*tp+Nu*hp+Gu*ap+zu*fp,Lu[5]=Fu*op+Nu*np+Gu*sp+zu*vp,Lu[9]=Fu*lp+Nu*rp+Gu*cp+zu*_p,Lu[13]=Fu*up+Nu*ip+Gu*dp+zu*wp,Lu[2]=Hu*tp+Wu*hp+_h*ap+Xc*fp,Lu[6]=Hu*op+Wu*np+_h*sp+Xc*vp,Lu[10]=Hu*lp+Wu*rp+_h*cp+Xc*_p,Lu[14]=Hu*up+Wu*ip+_h*dp+Xc*wp,Lu[3]=ju*tp+_c*hp+_f*ap+ep*fp,Lu[7]=ju*op+_c*np+_f*sp+ep*vp,Lu[11]=ju*lp+_c*rp+_f*cp+ep*_p,Lu[15]=ju*up+_c*ip+_f*dp+ep*wp,this},multiplyScalar:function(Cu){var Tu=this.elements;return Tu[0]*=Cu,Tu[4]*=Cu,Tu[8]*=Cu,Tu[12]*=Cu,Tu[1]*=Cu,Tu[5]*=Cu,Tu[9]*=Cu,Tu[13]*=Cu,Tu[2]*=Cu,Tu[6]*=Cu,Tu[10]*=Cu,Tu[14]*=Cu,Tu[3]*=Cu,Tu[7]*=Cu,Tu[11]*=Cu,Tu[15]*=Cu,this},determinant:function(){var Cu=this.elements,Tu=Cu[0],Pu=Cu[4],Bu=Cu[8],Lu=Cu[12],Ru=Cu[1],Ou=Cu[5],Du=Cu[9],ku=Cu[13],Fu=Cu[2],Nu=Cu[6],Gu=Cu[10],zu=Cu[14],Hu=Cu[3],Wu=Cu[7],_h=Cu[11],Xc=Cu[15];return Hu*(+Lu*Du*Nu-Bu*ku*Nu-Lu*Ou*Gu+Pu*ku*Gu+Bu*Ou*zu-Pu*Du*zu)+Wu*(+Tu*Du*zu-Tu*ku*Gu+Lu*Ru*Gu-Bu*Ru*zu+Bu*ku*Fu-Lu*Du*Fu)+_h*(+Tu*ku*Nu-Tu*Ou*zu-Lu*Ru*Nu+Pu*Ru*zu+Lu*Ou*Fu-Pu*ku*Fu)+Xc*(-Bu*Ou*Fu-Tu*Du*Nu+Tu*Ou*Gu+Bu*Ru*Nu-Pu*Ru*Gu+Pu*Du*Fu)},transpose:function(){var Cu=this.elements,Tu;return Tu=Cu[1],Cu[1]=Cu[4],Cu[4]=Tu,Tu=Cu[2],Cu[2]=Cu[8],Cu[8]=Tu,Tu=Cu[6],Cu[6]=Cu[9],Cu[9]=Tu,Tu=Cu[3],Cu[3]=Cu[12],Cu[12]=Tu,Tu=Cu[7],Cu[7]=Cu[13],Cu[13]=Tu,Tu=Cu[11],Cu[11]=Cu[14],Cu[14]=Tu,this},setPosition:function(Cu,Tu,Pu){var Bu=this.elements;return Cu.isVector3?(Bu[12]=Cu.x,Bu[13]=Cu.y,Bu[14]=Cu.z):(Bu[12]=Cu,Bu[13]=Tu,Bu[14]=Pu),this},getInverse:function(Cu,Tu){Tu!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var Pu=this.elements,Bu=Cu.elements,Lu=Bu[0],Ru=Bu[1],Ou=Bu[2],Du=Bu[3],ku=Bu[4],Fu=Bu[5],Nu=Bu[6],Gu=Bu[7],zu=Bu[8],Hu=Bu[9],Wu=Bu[10],_h=Bu[11],Xc=Bu[12],ju=Bu[13],_c=Bu[14],_f=Bu[15],ep=Hu*_c*Gu-ju*Wu*Gu+ju*Nu*_h-Fu*_c*_h-Hu*Nu*_f+Fu*Wu*_f,tp=Xc*Wu*Gu-zu*_c*Gu-Xc*Nu*_h+ku*_c*_h+zu*Nu*_f-ku*Wu*_f,op=zu*ju*Gu-Xc*Hu*Gu+Xc*Fu*_h-ku*ju*_h-zu*Fu*_f+ku*Hu*_f,lp=Xc*Hu*Nu-zu*ju*Nu-Xc*Fu*Wu+ku*ju*Wu+zu*Fu*_c-ku*Hu*_c,up=Lu*ep+Ru*tp+Ou*op+Du*lp;if(up===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var hp=1/up;return Pu[0]=ep*hp,Pu[1]=(ju*Wu*Du-Hu*_c*Du-ju*Ou*_h+Ru*_c*_h+Hu*Ou*_f-Ru*Wu*_f)*hp,Pu[2]=(Fu*_c*Du-ju*Nu*Du+ju*Ou*Gu-Ru*_c*Gu-Fu*Ou*_f+Ru*Nu*_f)*hp,Pu[3]=(Hu*Nu*Du-Fu*Wu*Du-Hu*Ou*Gu+Ru*Wu*Gu+Fu*Ou*_h-Ru*Nu*_h)*hp,Pu[4]=tp*hp,Pu[5]=(zu*_c*Du-Xc*Wu*Du+Xc*Ou*_h-Lu*_c*_h-zu*Ou*_f+Lu*Wu*_f)*hp,Pu[6]=(Xc*Nu*Du-ku*_c*Du-Xc*Ou*Gu+Lu*_c*Gu+ku*Ou*_f-Lu*Nu*_f)*hp,Pu[7]=(ku*Wu*Du-zu*Nu*Du+zu*Ou*Gu-Lu*Wu*Gu-ku*Ou*_h+Lu*Nu*_h)*hp,Pu[8]=op*hp,Pu[9]=(Xc*Hu*Du-zu*ju*Du-Xc*Ru*_h+Lu*ju*_h+zu*Ru*_f-Lu*Hu*_f)*hp,Pu[10]=(ku*ju*Du-Xc*Fu*Du+Xc*Ru*Gu-Lu*ju*Gu-ku*Ru*_f+Lu*Fu*_f)*hp,Pu[11]=(zu*Fu*Du-ku*Hu*Du-zu*Ru*Gu+Lu*Hu*Gu+ku*Ru*_h-Lu*Fu*_h)*hp,Pu[12]=lp*hp,Pu[13]=(zu*ju*Ou-Xc*Hu*Ou+Xc*Ru*Wu-Lu*ju*Wu-zu*Ru*_c+Lu*Hu*_c)*hp,Pu[14]=(Xc*Fu*Ou-ku*ju*Ou-Xc*Ru*Nu+Lu*ju*Nu+ku*Ru*_c-Lu*Fu*_c)*hp,Pu[15]=(ku*Hu*Ou-zu*Fu*Ou+zu*Ru*Nu-Lu*Hu*Nu-ku*Ru*Wu+Lu*Fu*Wu)*hp,this},scale:function(Cu){var Tu=this.elements,Pu=Cu.x,Bu=Cu.y,Lu=Cu.z;return Tu[0]*=Pu,Tu[4]*=Bu,Tu[8]*=Lu,Tu[1]*=Pu,Tu[5]*=Bu,Tu[9]*=Lu,Tu[2]*=Pu,Tu[6]*=Bu,Tu[10]*=Lu,Tu[3]*=Pu,Tu[7]*=Bu,Tu[11]*=Lu,this},getMaxScaleOnAxis:function(){var Cu=this.elements,Tu=Cu[0]*Cu[0]+Cu[1]*Cu[1]+Cu[2]*Cu[2],Pu=Cu[4]*Cu[4]+Cu[5]*Cu[5]+Cu[6]*Cu[6],Bu=Cu[8]*Cu[8]+Cu[9]*Cu[9]+Cu[10]*Cu[10];return Math.sqrt(Math.max(Tu,Pu,Bu))},makeTranslation:function(Cu,Tu,Pu){return this.set(1,0,0,Cu,0,1,0,Tu,0,0,1,Pu,0,0,0,1),this},makeRotationX:function(Cu){var Tu=Math.cos(Cu),Pu=Math.sin(Cu);return this.set(1,0,0,0,0,Tu,-Pu,0,0,Pu,Tu,0,0,0,0,1),this},makeRotationY:function(Cu){var Tu=Math.cos(Cu),Pu=Math.sin(Cu);return this.set(Tu,0,Pu,0,0,1,0,0,-Pu,0,Tu,0,0,0,0,1),this},makeRotationZ:function(Cu){var Tu=Math.cos(Cu),Pu=Math.sin(Cu);return this.set(Tu,-Pu,0,0,Pu,Tu,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(Cu,Tu){var Pu=Math.cos(Tu),Bu=Math.sin(Tu),Lu=1-Pu,Ru=Cu.x,Ou=Cu.y,Du=Cu.z,ku=Lu*Ru,Fu=Lu*Ou;return this.set(ku*Ru+Pu,ku*Ou-Bu*Du,ku*Du+Bu*Ou,0,ku*Ou+Bu*Du,Fu*Ou+Pu,Fu*Du-Bu*Ru,0,ku*Du-Bu*Ou,Fu*Du+Bu*Ru,Lu*Du*Du+Pu,0,0,0,0,1),this},makeScale:function(Cu,Tu,Pu){return this.set(Cu,0,0,0,0,Tu,0,0,0,0,Pu,0,0,0,0,1),this},makeShear:function(Cu,Tu,Pu){return this.set(1,Tu,Pu,0,Cu,1,Pu,0,Cu,Tu,1,0,0,0,0,1),this},compose:function(Cu,Tu,Pu){var Bu=this.elements,Lu=Tu._x,Ru=Tu._y,Ou=Tu._z,Du=Tu._w,ku=Lu+Lu,Fu=Ru+Ru,Nu=Ou+Ou,Gu=Lu*ku,zu=Lu*Fu,Hu=Lu*Nu,Wu=Ru*Fu,_h=Ru*Nu,Xc=Ou*Nu,ju=Du*ku,_c=Du*Fu,_f=Du*Nu,ep=Pu.x,tp=Pu.y,op=Pu.z;return Bu[0]=(1-(Wu+Xc))*ep,Bu[1]=(zu+_f)*ep,Bu[2]=(Hu-_c)*ep,Bu[3]=0,Bu[4]=(zu-_f)*tp,Bu[5]=(1-(Gu+Xc))*tp,Bu[6]=(_h+ju)*tp,Bu[7]=0,Bu[8]=(Hu+_c)*op,Bu[9]=(_h-ju)*op,Bu[10]=(1-(Gu+Wu))*op,Bu[11]=0,Bu[12]=Cu.x,Bu[13]=Cu.y,Bu[14]=Cu.z,Bu[15]=1,this},decompose:function(Cu,Tu,Pu){var Bu=this.elements,Lu=_v1.set(Bu[0],Bu[1],Bu[2]).length(),Ru=_v1.set(Bu[4],Bu[5],Bu[6]).length(),Ou=_v1.set(Bu[8],Bu[9],Bu[10]).length(),Du=this.determinant();Du<0&&(Lu=-Lu),Cu.x=Bu[12],Cu.y=Bu[13],Cu.z=Bu[14],_m1.copy(this);var ku=1/Lu,Fu=1/Ru,Nu=1/Ou;return _m1.elements[0]*=ku,_m1.elements[1]*=ku,_m1.elements[2]*=ku,_m1.elements[4]*=Fu,_m1.elements[5]*=Fu,_m1.elements[6]*=Fu,_m1.elements[8]*=Nu,_m1.elements[9]*=Nu,_m1.elements[10]*=Nu,Tu.setFromRotationMatrix(_m1),Pu.x=Lu,Pu.y=Ru,Pu.z=Ou,this},makePerspective:function(Cu,Tu,Pu,Bu,Lu,Ru){Ru===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Ou=this.elements,Du=2*Lu/(Tu-Cu),ku=2*Lu/(Pu-Bu),Fu=(Tu+Cu)/(Tu-Cu),Nu=(Pu+Bu)/(Pu-Bu),Gu=-(Ru+Lu)/(Ru-Lu),zu=-2*Ru*Lu/(Ru-Lu);return Ou[0]=Du,Ou[4]=0,Ou[8]=Fu,Ou[12]=0,Ou[1]=0,Ou[5]=ku,Ou[9]=Nu,Ou[13]=0,Ou[2]=0,Ou[6]=0,Ou[10]=Gu,Ou[14]=zu,Ou[3]=0,Ou[7]=0,Ou[11]=-1,Ou[15]=0,this},makeOrthographic:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=this.elements,Du=1/(Tu-Cu),ku=1/(Pu-Bu),Fu=1/(Ru-Lu),Nu=(Tu+Cu)*Du,Gu=(Pu+Bu)*ku,zu=(Ru+Lu)*Fu;return Ou[0]=2*Du,Ou[4]=0,Ou[8]=0,Ou[12]=-Nu,Ou[1]=0,Ou[5]=2*ku,Ou[9]=0,Ou[13]=-Gu,Ou[2]=0,Ou[6]=0,Ou[10]=-2*Fu,Ou[14]=-zu,Ou[3]=0,Ou[7]=0,Ou[11]=0,Ou[15]=1,this},equals:function(Cu){for(var Tu=this.elements,Pu=Cu.elements,Bu=0;Bu<16;Bu++)if(Tu[Bu]!==Pu[Bu])return!1;return!0},fromArray:function(Cu,Tu){Tu===void 0&&(Tu=0);for(var Pu=0;Pu<16;Pu++)this.elements[Pu]=Cu[Pu+Tu];return this},toArray:function(Cu,Tu){Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0);var Pu=this.elements;return Cu[Tu]=Pu[0],Cu[Tu+1]=Pu[1],Cu[Tu+2]=Pu[2],Cu[Tu+3]=Pu[3],Cu[Tu+4]=Pu[4],Cu[Tu+5]=Pu[5],Cu[Tu+6]=Pu[6],Cu[Tu+7]=Pu[7],Cu[Tu+8]=Pu[8],Cu[Tu+9]=Pu[9],Cu[Tu+10]=Pu[10],Cu[Tu+11]=Pu[11],Cu[Tu+12]=Pu[12],Cu[Tu+13]=Pu[13],Cu[Tu+14]=Pu[14],Cu[Tu+15]=Pu[15],Cu}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(Cu,Tu,Pu,Bu){this._x=Cu||0,this._y=Tu||0,this._z=Pu||0,this._order=Bu||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(Cu){this._x=Cu,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(Cu){this._y=Cu,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(Cu){this._z=Cu,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(Cu){this._order=Cu,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(Cu,Tu,Pu,Bu){return this._x=Cu,this._y=Tu,this._z=Pu,this._order=Bu||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(Cu){return this._x=Cu._x,this._y=Cu._y,this._z=Cu._z,this._order=Cu._order,this._onChangeCallback(),this},setFromRotationMatrix:function(Cu,Tu,Pu){var Bu=MathUtils.clamp,Lu=Cu.elements,Ru=Lu[0],Ou=Lu[4],Du=Lu[8],ku=Lu[1],Fu=Lu[5],Nu=Lu[9],Gu=Lu[2],zu=Lu[6],Hu=Lu[10];switch(Tu=Tu||this._order,Tu){case"XYZ":this._y=Math.asin(Bu(Du,-1,1)),Math.abs(Du)<.9999999?(this._x=Math.atan2(-Nu,Hu),this._z=Math.atan2(-Ou,Ru)):(this._x=Math.atan2(zu,Fu),this._z=0);break;case"YXZ":this._x=Math.asin(-Bu(Nu,-1,1)),Math.abs(Nu)<.9999999?(this._y=Math.atan2(Du,Hu),this._z=Math.atan2(ku,Fu)):(this._y=Math.atan2(-Gu,Ru),this._z=0);break;case"ZXY":this._x=Math.asin(Bu(zu,-1,1)),Math.abs(zu)<.9999999?(this._y=Math.atan2(-Gu,Hu),this._z=Math.atan2(-Ou,Fu)):(this._y=0,this._z=Math.atan2(ku,Ru));break;case"ZYX":this._y=Math.asin(-Bu(Gu,-1,1)),Math.abs(Gu)<.9999999?(this._x=Math.atan2(zu,Hu),this._z=Math.atan2(ku,Ru)):(this._x=0,this._z=Math.atan2(-Ou,Fu));break;case"YZX":this._z=Math.asin(Bu(ku,-1,1)),Math.abs(ku)<.9999999?(this._x=Math.atan2(-Nu,Fu),this._y=Math.atan2(-Gu,Ru)):(this._x=0,this._y=Math.atan2(Du,Hu));break;case"XZY":this._z=Math.asin(-Bu(Ou,-1,1)),Math.abs(Ou)<.9999999?(this._x=Math.atan2(zu,Fu),this._y=Math.atan2(Du,Ru)):(this._x=Math.atan2(-Nu,Hu),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Tu)}return this._order=Tu,Pu!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(Cu,Tu,Pu){return _matrix.makeRotationFromQuaternion(Cu),this.setFromRotationMatrix(_matrix,Tu,Pu)},setFromVector3:function(Cu,Tu){return this.set(Cu.x,Cu.y,Cu.z,Tu||this._order)},reorder:function(Cu){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,Cu)},equals:function(Cu){return Cu._x===this._x&&Cu._y===this._y&&Cu._z===this._z&&Cu._order===this._order},fromArray:function(Cu){return this._x=Cu[0],this._y=Cu[1],this._z=Cu[2],Cu[3]!==void 0&&(this._order=Cu[3]),this._onChangeCallback(),this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this._x,Cu[Tu+1]=this._y,Cu[Tu+2]=this._z,Cu[Tu+3]=this._order,Cu},toVector3:function(Cu){return Cu?Cu.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(Cu){return this._onChangeCallback=Cu,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(Cu){this.mask=1<<Cu|0},enable:function(Cu){this.mask|=1<<Cu|0},enableAll:function(){this.mask=-1},toggle:function(Cu){this.mask^=1<<Cu|0},disable:function(Cu){this.mask&=~(1<<Cu|0)},disableAll:function(){this.mask=0},test:function(Cu){return(this.mask&Cu.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var Cu=new Vector3,Tu=new Euler,Pu=new Quaternion,Bu=new Vector3(1,1,1);function Lu(){Pu.setFromEuler(Tu,!1)}function Ru(){Tu.setFromQuaternion(Pu,void 0,!1)}Tu._onChange(Lu),Pu._onChange(Ru),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:Cu},rotation:{configurable:!0,enumerable:!0,value:Tu},quaternion:{configurable:!0,enumerable:!0,value:Pu},scale:{configurable:!0,enumerable:!0,value:Bu},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(Cu){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(Cu),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(Cu){return this.quaternion.premultiply(Cu),this},setRotationFromAxisAngle:function(Cu,Tu){this.quaternion.setFromAxisAngle(Cu,Tu)},setRotationFromEuler:function(Cu){this.quaternion.setFromEuler(Cu,!0)},setRotationFromMatrix:function(Cu){this.quaternion.setFromRotationMatrix(Cu)},setRotationFromQuaternion:function(Cu){this.quaternion.copy(Cu)},rotateOnAxis:function(Cu,Tu){return _q1.setFromAxisAngle(Cu,Tu),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(Cu,Tu){return _q1.setFromAxisAngle(Cu,Tu),this.quaternion.premultiply(_q1),this},rotateX:function(Cu){return this.rotateOnAxis(_xAxis,Cu)},rotateY:function(Cu){return this.rotateOnAxis(_yAxis,Cu)},rotateZ:function(Cu){return this.rotateOnAxis(_zAxis,Cu)},translateOnAxis:function(Cu,Tu){return _v1$1.copy(Cu).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(Tu)),this},translateX:function(Cu){return this.translateOnAxis(_xAxis,Cu)},translateY:function(Cu){return this.translateOnAxis(_yAxis,Cu)},translateZ:function(Cu){return this.translateOnAxis(_zAxis,Cu)},localToWorld:function(Cu){return Cu.applyMatrix4(this.matrixWorld)},worldToLocal:function(Cu){return Cu.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(Cu,Tu,Pu){Cu.isVector3?_target.copy(Cu):_target.set(Cu,Tu,Pu);var Bu=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Bu&&(_m1$1.extractRotation(Bu.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(Cu){if(arguments.length>1){for(var Tu=0;Tu<arguments.length;Tu++)this.add(arguments[Tu]);return this}return Cu===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",Cu),this):(Cu&&Cu.isObject3D?(Cu.parent!==null&&Cu.parent.remove(Cu),Cu.parent=this,this.children.push(Cu),Cu.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",Cu),this)},remove:function(Cu){if(arguments.length>1){for(var Tu=0;Tu<arguments.length;Tu++)this.remove(arguments[Tu]);return this}var Pu=this.children.indexOf(Cu);return Pu!==-1&&(Cu.parent=null,this.children.splice(Pu,1),Cu.dispatchEvent(_removedEvent)),this},attach:function(Cu){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),Cu.parent!==null&&(Cu.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(Cu.parent.matrixWorld)),Cu.applyMatrix4(_m1$1),Cu.updateWorldMatrix(!1,!1),this.add(Cu),this},getObjectById:function(Cu){return this.getObjectByProperty("id",Cu)},getObjectByName:function(Cu){return this.getObjectByProperty("name",Cu)},getObjectByProperty:function(Cu,Tu){if(this[Cu]===Tu)return this;for(var Pu=0,Bu=this.children.length;Pu<Bu;Pu++){var Lu=this.children[Pu],Ru=Lu.getObjectByProperty(Cu,Tu);if(Ru!==void 0)return Ru}},getWorldPosition:function(Cu){return Cu===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),Cu=new Vector3),this.updateMatrixWorld(!0),Cu.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(Cu){return Cu===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),Cu=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,Cu,_scale),Cu},getWorldScale:function(Cu){return Cu===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),Cu=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,Cu),Cu},getWorldDirection:function(Cu){Cu===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),Cu=new Vector3),this.updateMatrixWorld(!0);var Tu=this.matrixWorld.elements;return Cu.set(Tu[8],Tu[9],Tu[10]).normalize()},raycast:function(){},traverse:function(Cu){Cu(this);for(var Tu=this.children,Pu=0,Bu=Tu.length;Pu<Bu;Pu++)Tu[Pu].traverse(Cu)},traverseVisible:function(Cu){if(this.visible!==!1){Cu(this);for(var Tu=this.children,Pu=0,Bu=Tu.length;Pu<Bu;Pu++)Tu[Pu].traverseVisible(Cu)}},traverseAncestors:function(Cu){var Tu=this.parent;Tu!==null&&(Cu(Tu),Tu.traverseAncestors(Cu))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(Cu){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||Cu)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,Cu=!0);for(var Tu=this.children,Pu=0,Bu=Tu.length;Pu<Bu;Pu++)Tu[Pu].updateMatrixWorld(Cu)},updateWorldMatrix:function(Cu,Tu){var Pu=this.parent;if(Cu===!0&&Pu!==null&&Pu.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),Tu===!0)for(var Bu=this.children,Lu=0,Ru=Bu.length;Lu<Ru;Lu++)Bu[Lu].updateWorldMatrix(!1,!0)},toJSON:function(Cu){var Tu=Cu===void 0||typeof Cu=="string",Pu={};Tu&&(Cu={geometries:{},materials:{},textures:{},images:{},shapes:{}},Pu.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Bu={};Bu.uuid=this.uuid,Bu.type=this.type,this.name!==""&&(Bu.name=this.name),this.castShadow===!0&&(Bu.castShadow=!0),this.receiveShadow===!0&&(Bu.receiveShadow=!0),this.visible===!1&&(Bu.visible=!1),this.frustumCulled===!1&&(Bu.frustumCulled=!1),this.renderOrder!==0&&(Bu.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Bu.userData=this.userData),Bu.layers=this.layers.mask,Bu.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Bu.matrixAutoUpdate=!1),this.isInstancedMesh&&(Bu.type="InstancedMesh",Bu.count=this.count,Bu.instanceMatrix=this.instanceMatrix.toJSON());function Lu(Xc,ju){return Xc[ju.uuid]===void 0&&(Xc[ju.uuid]=ju.toJSON(Cu)),ju.uuid}if(this.isMesh||this.isLine||this.isPoints){Bu.geometry=Lu(Cu.geometries,this.geometry);var Ru=this.geometry.parameters;if(Ru!==void 0&&Ru.shapes!==void 0){var Ou=Ru.shapes;if(Array.isArray(Ou))for(var Du=0,ku=Ou.length;Du<ku;Du++){var Fu=Ou[Du];Lu(Cu.shapes,Fu)}else Lu(Cu.shapes,Ou)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Nu=[],Du=0,ku=this.material.length;Du<ku;Du++)Nu.push(Lu(Cu.materials,this.material[Du]));Bu.material=Nu}else Bu.material=Lu(Cu.materials,this.material);if(this.children.length>0){Bu.children=[];for(var Du=0;Du<this.children.length;Du++)Bu.children.push(this.children[Du].toJSON(Cu).object)}if(Tu){var Gu=_h(Cu.geometries),zu=_h(Cu.materials),Hu=_h(Cu.textures),Wu=_h(Cu.images),Ou=_h(Cu.shapes);Gu.length>0&&(Pu.geometries=Gu),zu.length>0&&(Pu.materials=zu),Hu.length>0&&(Pu.textures=Hu),Wu.length>0&&(Pu.images=Wu),Ou.length>0&&(Pu.shapes=Ou)}return Pu.object=Bu,Pu;function _h(Xc){var ju=[];for(var _c in Xc){var _f=Xc[_c];delete _f.metadata,ju.push(_f)}return ju}},clone:function(Cu){return new this.constructor().copy(this,Cu)},copy:function(Cu,Tu){if(Tu===void 0&&(Tu=!0),this.name=Cu.name,this.up.copy(Cu.up),this.position.copy(Cu.position),this.quaternion.copy(Cu.quaternion),this.scale.copy(Cu.scale),this.matrix.copy(Cu.matrix),this.matrixWorld.copy(Cu.matrixWorld),this.matrixAutoUpdate=Cu.matrixAutoUpdate,this.matrixWorldNeedsUpdate=Cu.matrixWorldNeedsUpdate,this.layers.mask=Cu.layers.mask,this.visible=Cu.visible,this.castShadow=Cu.castShadow,this.receiveShadow=Cu.receiveShadow,this.frustumCulled=Cu.frustumCulled,this.renderOrder=Cu.renderOrder,this.userData=JSON.parse(JSON.stringify(Cu.userData)),Tu===!0)for(var Pu=0;Pu<Cu.children.length;Pu++){var Bu=Cu.children[Pu];this.add(Bu.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(Cu,Tu){return Object3D.prototype.copy.call(this,Cu,Tu),Cu.background!==null&&(this.background=Cu.background.clone()),Cu.environment!==null&&(this.environment=Cu.environment.clone()),Cu.fog!==null&&(this.fog=Cu.fog.clone()),Cu.overrideMaterial!==null&&(this.overrideMaterial=Cu.overrideMaterial.clone()),this.autoUpdate=Cu.autoUpdate,this.matrixAutoUpdate=Cu.matrixAutoUpdate,this},toJSON:function(Cu){var Tu=Object3D.prototype.toJSON.call(this,Cu);return this.background!==null&&(Tu.object.background=this.background.toJSON(Cu)),this.environment!==null&&(Tu.object.environment=this.environment.toJSON(Cu)),this.fog!==null&&(Tu.object.fog=this.fog.toJSON()),Tu},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(Cu,Tu){this.min=Cu!==void 0?Cu:new Vector3(1/0,1/0,1/0),this.max=Tu!==void 0?Tu:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(Cu,Tu){return this.min.copy(Cu),this.max.copy(Tu),this},setFromArray:function(Cu){for(var Tu=1/0,Pu=1/0,Bu=1/0,Lu=-1/0,Ru=-1/0,Ou=-1/0,Du=0,ku=Cu.length;Du<ku;Du+=3){var Fu=Cu[Du],Nu=Cu[Du+1],Gu=Cu[Du+2];Fu<Tu&&(Tu=Fu),Nu<Pu&&(Pu=Nu),Gu<Bu&&(Bu=Gu),Fu>Lu&&(Lu=Fu),Nu>Ru&&(Ru=Nu),Gu>Ou&&(Ou=Gu)}return this.min.set(Tu,Pu,Bu),this.max.set(Lu,Ru,Ou),this},setFromBufferAttribute:function(Cu){for(var Tu=1/0,Pu=1/0,Bu=1/0,Lu=-1/0,Ru=-1/0,Ou=-1/0,Du=0,ku=Cu.count;Du<ku;Du++){var Fu=Cu.getX(Du),Nu=Cu.getY(Du),Gu=Cu.getZ(Du);Fu<Tu&&(Tu=Fu),Nu<Pu&&(Pu=Nu),Gu<Bu&&(Bu=Gu),Fu>Lu&&(Lu=Fu),Nu>Ru&&(Ru=Nu),Gu>Ou&&(Ou=Gu)}return this.min.set(Tu,Pu,Bu),this.max.set(Lu,Ru,Ou),this},setFromPoints:function(Cu){this.makeEmpty();for(var Tu=0,Pu=Cu.length;Tu<Pu;Tu++)this.expandByPoint(Cu[Tu]);return this},setFromCenterAndSize:function(Cu,Tu){var Pu=_vector$1.copy(Tu).multiplyScalar(.5);return this.min.copy(Cu).sub(Pu),this.max.copy(Cu).add(Pu),this},setFromObject:function(Cu){return this.makeEmpty(),this.expandByObject(Cu)},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.min.copy(Cu.min),this.max.copy(Cu.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(Cu){return Cu===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),Cu=new Vector3),this.isEmpty()?Cu.set(0,0,0):Cu.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(Cu){return Cu===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),Cu=new Vector3),this.isEmpty()?Cu.set(0,0,0):Cu.subVectors(this.max,this.min)},expandByPoint:function(Cu){return this.min.min(Cu),this.max.max(Cu),this},expandByVector:function(Cu){return this.min.sub(Cu),this.max.add(Cu),this},expandByScalar:function(Cu){return this.min.addScalar(-Cu),this.max.addScalar(Cu),this},expandByObject:function(Cu){Cu.updateWorldMatrix(!1,!1);var Tu=Cu.geometry;Tu!==void 0&&(Tu.boundingBox===null&&Tu.computeBoundingBox(),_box.copy(Tu.boundingBox),_box.applyMatrix4(Cu.matrixWorld),this.union(_box));for(var Pu=Cu.children,Bu=0,Lu=Pu.length;Bu<Lu;Bu++)this.expandByObject(Pu[Bu]);return this},containsPoint:function(Cu){return!(Cu.x<this.min.x||Cu.x>this.max.x||Cu.y<this.min.y||Cu.y>this.max.y||Cu.z<this.min.z||Cu.z>this.max.z)},containsBox:function(Cu){return this.min.x<=Cu.min.x&&Cu.max.x<=this.max.x&&this.min.y<=Cu.min.y&&Cu.max.y<=this.max.y&&this.min.z<=Cu.min.z&&Cu.max.z<=this.max.z},getParameter:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),Tu=new Vector3),Tu.set((Cu.x-this.min.x)/(this.max.x-this.min.x),(Cu.y-this.min.y)/(this.max.y-this.min.y),(Cu.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(Cu){return!(Cu.max.x<this.min.x||Cu.min.x>this.max.x||Cu.max.y<this.min.y||Cu.min.y>this.max.y||Cu.max.z<this.min.z||Cu.min.z>this.max.z)},intersectsSphere:function(Cu){return this.clampPoint(Cu.center,_vector$1),_vector$1.distanceToSquared(Cu.center)<=Cu.radius*Cu.radius},intersectsPlane:function(Cu){var Tu,Pu;return Cu.normal.x>0?(Tu=Cu.normal.x*this.min.x,Pu=Cu.normal.x*this.max.x):(Tu=Cu.normal.x*this.max.x,Pu=Cu.normal.x*this.min.x),Cu.normal.y>0?(Tu+=Cu.normal.y*this.min.y,Pu+=Cu.normal.y*this.max.y):(Tu+=Cu.normal.y*this.max.y,Pu+=Cu.normal.y*this.min.y),Cu.normal.z>0?(Tu+=Cu.normal.z*this.min.z,Pu+=Cu.normal.z*this.max.z):(Tu+=Cu.normal.z*this.max.z,Pu+=Cu.normal.z*this.min.z),Tu<=-Cu.constant&&Pu>=-Cu.constant},intersectsTriangle:function(Cu){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(Cu.a,_center),_v1$2.subVectors(Cu.b,_center),_v2.subVectors(Cu.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var Tu=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(Tu,_v0,_v1$2,_v2,_extents)||(Tu=[1,0,0,0,1,0,0,0,1],!satForAxes(Tu,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),Tu=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(Tu,_v0,_v1$2,_v2,_extents))},clampPoint:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),Tu=new Vector3),Tu.copy(Cu).clamp(this.min,this.max)},distanceToPoint:function(Cu){var Tu=_vector$1.copy(Cu).clamp(this.min,this.max);return Tu.sub(Cu).length()},getBoundingSphere:function(Cu){return Cu===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(Cu.center),Cu.radius=this.getSize(_vector$1).length()*.5,Cu},intersect:function(Cu){return this.min.max(Cu.min),this.max.min(Cu.max),this.isEmpty()&&this.makeEmpty(),this},union:function(Cu){return this.min.min(Cu.min),this.max.max(Cu.max),this},applyMatrix4:function(Cu){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(Cu),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(Cu),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(Cu),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(Cu),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(Cu),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(Cu),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(Cu),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(Cu),this.setFromPoints(_points),this)},translate:function(Cu){return this.min.add(Cu),this.max.add(Cu),this},equals:function(Cu){return Cu.min.equals(this.min)&&Cu.max.equals(this.max)}});function satForAxes(Cu,Tu,Pu,Bu,Lu){var Ru,Ou;for(Ru=0,Ou=Cu.length-3;Ru<=Ou;Ru+=3){_testAxis.fromArray(Cu,Ru);var Du=Lu.x*Math.abs(_testAxis.x)+Lu.y*Math.abs(_testAxis.y)+Lu.z*Math.abs(_testAxis.z),ku=Tu.dot(_testAxis),Fu=Pu.dot(_testAxis),Nu=Bu.dot(_testAxis);if(Math.max(-Math.max(ku,Fu,Nu),Math.min(ku,Fu,Nu))>Du)return!1}return!0}var _box$1=new Box3;function Sphere(Cu,Tu){this.center=Cu!==void 0?Cu:new Vector3,this.radius=Tu!==void 0?Tu:-1}Object.assign(Sphere.prototype,{set:function(Cu,Tu){return this.center.copy(Cu),this.radius=Tu,this},setFromPoints:function(Cu,Tu){var Pu=this.center;Tu!==void 0?Pu.copy(Tu):_box$1.setFromPoints(Cu).getCenter(Pu);for(var Bu=0,Lu=0,Ru=Cu.length;Lu<Ru;Lu++)Bu=Math.max(Bu,Pu.distanceToSquared(Cu[Lu]));return this.radius=Math.sqrt(Bu),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.center.copy(Cu.center),this.radius=Cu.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(Cu){return Cu.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(Cu){return Cu.distanceTo(this.center)-this.radius},intersectsSphere:function(Cu){var Tu=this.radius+Cu.radius;return Cu.center.distanceToSquared(this.center)<=Tu*Tu},intersectsBox:function(Cu){return Cu.intersectsSphere(this)},intersectsPlane:function(Cu){return Math.abs(Cu.distanceToPoint(this.center))<=this.radius},clampPoint:function(Cu,Tu){var Pu=this.center.distanceToSquared(Cu);return Tu===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),Tu=new Vector3),Tu.copy(Cu),Pu>this.radius*this.radius&&(Tu.sub(this.center).normalize(),Tu.multiplyScalar(this.radius).add(this.center)),Tu},getBoundingBox:function(Cu){return Cu===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),Cu=new Box3),this.isEmpty()?(Cu.makeEmpty(),Cu):(Cu.set(this.center,this.center),Cu.expandByScalar(this.radius),Cu)},applyMatrix4:function(Cu){return this.center.applyMatrix4(Cu),this.radius=this.radius*Cu.getMaxScaleOnAxis(),this},translate:function(Cu){return this.center.add(Cu),this},equals:function(Cu){return Cu.center.equals(this.center)&&Cu.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(Cu,Tu){this.origin=Cu!==void 0?Cu:new Vector3,this.direction=Tu!==void 0?Tu:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(Cu,Tu){return this.origin.copy(Cu),this.direction.copy(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.origin.copy(Cu.origin),this.direction.copy(Cu.direction),this},at:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Ray: .at() target is now required"),Tu=new Vector3),Tu.copy(this.direction).multiplyScalar(Cu).add(this.origin)},lookAt:function(Cu){return this.direction.copy(Cu).sub(this.origin).normalize(),this},recast:function(Cu){return this.origin.copy(this.at(Cu,_vector$2)),this},closestPointToPoint:function(Cu,Tu){Tu===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),Tu=new Vector3),Tu.subVectors(Cu,this.origin);var Pu=Tu.dot(this.direction);return Pu<0?Tu.copy(this.origin):Tu.copy(this.direction).multiplyScalar(Pu).add(this.origin)},distanceToPoint:function(Cu){return Math.sqrt(this.distanceSqToPoint(Cu))},distanceSqToPoint:function(Cu){var Tu=_vector$2.subVectors(Cu,this.origin).dot(this.direction);return Tu<0?this.origin.distanceToSquared(Cu):(_vector$2.copy(this.direction).multiplyScalar(Tu).add(this.origin),_vector$2.distanceToSquared(Cu))},distanceSqToSegment:function(Cu,Tu,Pu,Bu){_segCenter.copy(Cu).add(Tu).multiplyScalar(.5),_segDir.copy(Tu).sub(Cu).normalize(),_diff.copy(this.origin).sub(_segCenter);var Lu=Cu.distanceTo(Tu)*.5,Ru=-this.direction.dot(_segDir),Ou=_diff.dot(this.direction),Du=-_diff.dot(_segDir),ku=_diff.lengthSq(),Fu=Math.abs(1-Ru*Ru),Nu,Gu,zu,Hu;if(Fu>0)if(Nu=Ru*Du-Ou,Gu=Ru*Ou-Du,Hu=Lu*Fu,Nu>=0)if(Gu>=-Hu)if(Gu<=Hu){var Wu=1/Fu;Nu*=Wu,Gu*=Wu,zu=Nu*(Nu+Ru*Gu+2*Ou)+Gu*(Ru*Nu+Gu+2*Du)+ku}else Gu=Lu,Nu=Math.max(0,-(Ru*Gu+Ou)),zu=-Nu*Nu+Gu*(Gu+2*Du)+ku;else Gu=-Lu,Nu=Math.max(0,-(Ru*Gu+Ou)),zu=-Nu*Nu+Gu*(Gu+2*Du)+ku;else Gu<=-Hu?(Nu=Math.max(0,-(-Ru*Lu+Ou)),Gu=Nu>0?-Lu:Math.min(Math.max(-Lu,-Du),Lu),zu=-Nu*Nu+Gu*(Gu+2*Du)+ku):Gu<=Hu?(Nu=0,Gu=Math.min(Math.max(-Lu,-Du),Lu),zu=Gu*(Gu+2*Du)+ku):(Nu=Math.max(0,-(Ru*Lu+Ou)),Gu=Nu>0?Lu:Math.min(Math.max(-Lu,-Du),Lu),zu=-Nu*Nu+Gu*(Gu+2*Du)+ku);else Gu=Ru>0?-Lu:Lu,Nu=Math.max(0,-(Ru*Gu+Ou)),zu=-Nu*Nu+Gu*(Gu+2*Du)+ku;return Pu&&Pu.copy(this.direction).multiplyScalar(Nu).add(this.origin),Bu&&Bu.copy(_segDir).multiplyScalar(Gu).add(_segCenter),zu},intersectSphere:function(Cu,Tu){_vector$2.subVectors(Cu.center,this.origin);var Pu=_vector$2.dot(this.direction),Bu=_vector$2.dot(_vector$2)-Pu*Pu,Lu=Cu.radius*Cu.radius;if(Bu>Lu)return null;var Ru=Math.sqrt(Lu-Bu),Ou=Pu-Ru,Du=Pu+Ru;return Ou<0&&Du<0?null:Ou<0?this.at(Du,Tu):this.at(Ou,Tu)},intersectsSphere:function(Cu){return this.distanceSqToPoint(Cu.center)<=Cu.radius*Cu.radius},distanceToPlane:function(Cu){var Tu=Cu.normal.dot(this.direction);if(Tu===0)return Cu.distanceToPoint(this.origin)===0?0:null;var Pu=-(this.origin.dot(Cu.normal)+Cu.constant)/Tu;return Pu>=0?Pu:null},intersectPlane:function(Cu,Tu){var Pu=this.distanceToPlane(Cu);return Pu===null?null:this.at(Pu,Tu)},intersectsPlane:function(Cu){var Tu=Cu.distanceToPoint(this.origin);if(Tu===0)return!0;var Pu=Cu.normal.dot(this.direction);return Pu*Tu<0},intersectBox:function(Cu,Tu){var Pu,Bu,Lu,Ru,Ou,Du,ku=1/this.direction.x,Fu=1/this.direction.y,Nu=1/this.direction.z,Gu=this.origin;return ku>=0?(Pu=(Cu.min.x-Gu.x)*ku,Bu=(Cu.max.x-Gu.x)*ku):(Pu=(Cu.max.x-Gu.x)*ku,Bu=(Cu.min.x-Gu.x)*ku),Fu>=0?(Lu=(Cu.min.y-Gu.y)*Fu,Ru=(Cu.max.y-Gu.y)*Fu):(Lu=(Cu.max.y-Gu.y)*Fu,Ru=(Cu.min.y-Gu.y)*Fu),Pu>Ru||Lu>Bu||((Lu>Pu||Pu!==Pu)&&(Pu=Lu),(Ru<Bu||Bu!==Bu)&&(Bu=Ru),Nu>=0?(Ou=(Cu.min.z-Gu.z)*Nu,Du=(Cu.max.z-Gu.z)*Nu):(Ou=(Cu.max.z-Gu.z)*Nu,Du=(Cu.min.z-Gu.z)*Nu),Pu>Du||Ou>Bu)||((Ou>Pu||Pu!==Pu)&&(Pu=Ou),(Du<Bu||Bu!==Bu)&&(Bu=Du),Bu<0)?null:this.at(Pu>=0?Pu:Bu,Tu)},intersectsBox:function(Cu){return this.intersectBox(Cu,_vector$2)!==null},intersectTriangle:function(Cu,Tu,Pu,Bu,Lu){_edge1.subVectors(Tu,Cu),_edge2.subVectors(Pu,Cu),_normal.crossVectors(_edge1,_edge2);var Ru=this.direction.dot(_normal),Ou;if(Ru>0){if(Bu)return null;Ou=1}else if(Ru<0)Ou=-1,Ru=-Ru;else return null;_diff.subVectors(this.origin,Cu);var Du=Ou*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Du<0)return null;var ku=Ou*this.direction.dot(_edge1.cross(_diff));if(ku<0||Du+ku>Ru)return null;var Fu=-Ou*_diff.dot(_normal);return Fu<0?null:this.at(Fu/Ru,Lu)},applyMatrix4:function(Cu){return this.origin.applyMatrix4(Cu),this.direction.transformDirection(Cu),this},equals:function(Cu){return Cu.origin.equals(this.origin)&&Cu.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(Cu,Tu){this.normal=Cu!==void 0?Cu:new Vector3(1,0,0),this.constant=Tu!==void 0?Tu:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(Cu,Tu){return this.normal.copy(Cu),this.constant=Tu,this},setComponents:function(Cu,Tu,Pu,Bu){return this.normal.set(Cu,Tu,Pu),this.constant=Bu,this},setFromNormalAndCoplanarPoint:function(Cu,Tu){return this.normal.copy(Cu),this.constant=-Tu.dot(this.normal),this},setFromCoplanarPoints:function(Cu,Tu,Pu){var Bu=_vector1.subVectors(Pu,Tu).cross(_vector2.subVectors(Cu,Tu)).normalize();return this.setFromNormalAndCoplanarPoint(Bu,Cu),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.normal.copy(Cu.normal),this.constant=Cu.constant,this},normalize:function(){var Cu=1/this.normal.length();return this.normal.multiplyScalar(Cu),this.constant*=Cu,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(Cu){return this.normal.dot(Cu)+this.constant},distanceToSphere:function(Cu){return this.distanceToPoint(Cu.center)-Cu.radius},projectPoint:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),Tu=new Vector3),Tu.copy(this.normal).multiplyScalar(-this.distanceToPoint(Cu)).add(Cu)},intersectLine:function(Cu,Tu){Tu===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),Tu=new Vector3);var Pu=Cu.delta(_vector1),Bu=this.normal.dot(Pu);if(Bu===0)return this.distanceToPoint(Cu.start)===0?Tu.copy(Cu.start):void 0;var Lu=-(Cu.start.dot(this.normal)+this.constant)/Bu;if(!(Lu<0||Lu>1))return Tu.copy(Pu).multiplyScalar(Lu).add(Cu.start)},intersectsLine:function(Cu){var Tu=this.distanceToPoint(Cu.start),Pu=this.distanceToPoint(Cu.end);return Tu<0&&Pu>0||Pu<0&&Tu>0},intersectsBox:function(Cu){return Cu.intersectsPlane(this)},intersectsSphere:function(Cu){return Cu.intersectsPlane(this)},coplanarPoint:function(Cu){return Cu===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),Cu=new Vector3),Cu.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(Cu,Tu){var Pu=Tu||_normalMatrix.getNormalMatrix(Cu),Bu=this.coplanarPoint(_vector1).applyMatrix4(Cu),Lu=this.normal.applyMatrix3(Pu).normalize();return this.constant=-Bu.dot(Lu),this},translate:function(Cu){return this.constant-=Cu.dot(this.normal),this},equals:function(Cu){return Cu.normal.equals(this.normal)&&Cu.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(Cu,Tu,Pu){this.a=Cu!==void 0?Cu:new Vector3,this.b=Tu!==void 0?Tu:new Vector3,this.c=Pu!==void 0?Pu:new Vector3}Object.assign(Triangle,{getNormal:function(Cu,Tu,Pu,Bu){Bu===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Bu=new Vector3),Bu.subVectors(Pu,Tu),_v0$1.subVectors(Cu,Tu),Bu.cross(_v0$1);var Lu=Bu.lengthSq();return Lu>0?Bu.multiplyScalar(1/Math.sqrt(Lu)):Bu.set(0,0,0)},getBarycoord:function(Cu,Tu,Pu,Bu,Lu){_v0$1.subVectors(Bu,Tu),_v1$3.subVectors(Pu,Tu),_v2$1.subVectors(Cu,Tu);var Ru=_v0$1.dot(_v0$1),Ou=_v0$1.dot(_v1$3),Du=_v0$1.dot(_v2$1),ku=_v1$3.dot(_v1$3),Fu=_v1$3.dot(_v2$1),Nu=Ru*ku-Ou*Ou;if(Lu===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Lu=new Vector3),Nu===0)return Lu.set(-2,-1,-1);var Gu=1/Nu,zu=(ku*Du-Ou*Fu)*Gu,Hu=(Ru*Fu-Ou*Du)*Gu;return Lu.set(1-zu-Hu,Hu,zu)},containsPoint:function(Cu,Tu,Pu,Bu){return Triangle.getBarycoord(Cu,Tu,Pu,Bu,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){return this.getBarycoord(Cu,Tu,Pu,Bu,_v3),Du.set(0,0),Du.addScaledVector(Lu,_v3.x),Du.addScaledVector(Ru,_v3.y),Du.addScaledVector(Ou,_v3.z),Du},isFrontFacing:function(Cu,Tu,Pu,Bu){return _v0$1.subVectors(Pu,Tu),_v1$3.subVectors(Cu,Tu),_v0$1.cross(_v1$3).dot(Bu)<0}});Object.assign(Triangle.prototype,{set:function(Cu,Tu,Pu){return this.a.copy(Cu),this.b.copy(Tu),this.c.copy(Pu),this},setFromPointsAndIndices:function(Cu,Tu,Pu,Bu){return this.a.copy(Cu[Tu]),this.b.copy(Cu[Pu]),this.c.copy(Cu[Bu]),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.a.copy(Cu.a),this.b.copy(Cu.b),this.c.copy(Cu.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(Cu){return Cu===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),Cu=new Vector3),Cu.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(Cu){return Triangle.getNormal(this.a,this.b,this.c,Cu)},getPlane:function(Cu){return Cu===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),Cu=new Plane),Cu.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(Cu,Tu){return Triangle.getBarycoord(Cu,this.a,this.b,this.c,Tu)},getUV:function(Cu,Tu,Pu,Bu,Lu){return Triangle.getUV(Cu,this.a,this.b,this.c,Tu,Pu,Bu,Lu)},containsPoint:function(Cu){return Triangle.containsPoint(Cu,this.a,this.b,this.c)},isFrontFacing:function(Cu){return Triangle.isFrontFacing(this.a,this.b,this.c,Cu)},intersectsBox:function(Cu){return Cu.intersectsTriangle(this)},closestPointToPoint:function(Cu,Tu){Tu===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),Tu=new Vector3);var Pu=this.a,Bu=this.b,Lu=this.c,Ru,Ou;_vab.subVectors(Bu,Pu),_vac.subVectors(Lu,Pu),_vap.subVectors(Cu,Pu);var Du=_vab.dot(_vap),ku=_vac.dot(_vap);if(Du<=0&&ku<=0)return Tu.copy(Pu);_vbp.subVectors(Cu,Bu);var Fu=_vab.dot(_vbp),Nu=_vac.dot(_vbp);if(Fu>=0&&Nu<=Fu)return Tu.copy(Bu);var Gu=Du*Nu-Fu*ku;if(Gu<=0&&Du>=0&&Fu<=0)return Ru=Du/(Du-Fu),Tu.copy(Pu).addScaledVector(_vab,Ru);_vcp.subVectors(Cu,Lu);var zu=_vab.dot(_vcp),Hu=_vac.dot(_vcp);if(Hu>=0&&zu<=Hu)return Tu.copy(Lu);var Wu=zu*ku-Du*Hu;if(Wu<=0&&ku>=0&&Hu<=0)return Ou=ku/(ku-Hu),Tu.copy(Pu).addScaledVector(_vac,Ou);var _h=Fu*Hu-zu*Nu;if(_h<=0&&Nu-Fu>=0&&zu-Hu>=0)return _vbc.subVectors(Lu,Bu),Ou=(Nu-Fu)/(Nu-Fu+(zu-Hu)),Tu.copy(Bu).addScaledVector(_vbc,Ou);var Xc=1/(_h+Wu+Gu);return Ru=Wu*Xc,Ou=Gu*Xc,Tu.copy(Pu).addScaledVector(_vab,Ru).addScaledVector(_vac,Ou)},equals:function(Cu){return Cu.a.equals(this.a)&&Cu.b.equals(this.b)&&Cu.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(Cu,Tu,Pu){return Tu===void 0&&Pu===void 0?this.set(Cu):this.setRGB(Cu,Tu,Pu)}function hue2rgb(Cu,Tu,Pu){return Pu<0&&(Pu+=1),Pu>1&&(Pu-=1),Pu<1/6?Cu+(Tu-Cu)*6*Pu:Pu<1/2?Tu:Pu<2/3?Cu+(Tu-Cu)*6*(2/3-Pu):Cu}function SRGBToLinear(Cu){return Cu<.04045?Cu*.0773993808:Math.pow(Cu*.9478672986+.0521327014,2.4)}function LinearToSRGB(Cu){return Cu<.0031308?Cu*12.92:1.055*Math.pow(Cu,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(Cu){return Cu&&Cu.isColor?this.copy(Cu):typeof Cu=="number"?this.setHex(Cu):typeof Cu=="string"&&this.setStyle(Cu),this},setScalar:function(Cu){return this.r=Cu,this.g=Cu,this.b=Cu,this},setHex:function(Cu){return Cu=Math.floor(Cu),this.r=(Cu>>16&255)/255,this.g=(Cu>>8&255)/255,this.b=(Cu&255)/255,this},setRGB:function(Cu,Tu,Pu){return this.r=Cu,this.g=Tu,this.b=Pu,this},setHSL:function(Cu,Tu,Pu){if(Cu=MathUtils.euclideanModulo(Cu,1),Tu=MathUtils.clamp(Tu,0,1),Pu=MathUtils.clamp(Pu,0,1),Tu===0)this.r=this.g=this.b=Pu;else{var Bu=Pu<=.5?Pu*(1+Tu):Pu+Tu-Pu*Tu,Lu=2*Pu-Bu;this.r=hue2rgb(Lu,Bu,Cu+1/3),this.g=hue2rgb(Lu,Bu,Cu),this.b=hue2rgb(Lu,Bu,Cu-1/3)}return this},setStyle:function(Cu){function Tu(Gu){Gu!==void 0&&parseFloat(Gu)<1&&console.warn("THREE.Color: Alpha component of "+Cu+" will be ignored.")}var Pu;if(Pu=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(Cu)){var Bu,Lu=Pu[1],Ru=Pu[2];switch(Lu){case"rgb":case"rgba":if(Bu=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(255,parseInt(Bu[1],10))/255,this.g=Math.min(255,parseInt(Bu[2],10))/255,this.b=Math.min(255,parseInt(Bu[3],10))/255,Tu(Bu[5]),this;if(Bu=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru))return this.r=Math.min(100,parseInt(Bu[1],10))/100,this.g=Math.min(100,parseInt(Bu[2],10))/100,this.b=Math.min(100,parseInt(Bu[3],10))/100,Tu(Bu[5]),this;break;case"hsl":case"hsla":if(Bu=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ru)){var Ou=parseFloat(Bu[1])/360,Du=parseInt(Bu[2],10)/100,ku=parseInt(Bu[3],10)/100;return Tu(Bu[5]),this.setHSL(Ou,Du,ku)}break}}else if(Pu=/^\#([A-Fa-f0-9]+)$/.exec(Cu)){var Fu=Pu[1],Nu=Fu.length;if(Nu===3)return this.r=parseInt(Fu.charAt(0)+Fu.charAt(0),16)/255,this.g=parseInt(Fu.charAt(1)+Fu.charAt(1),16)/255,this.b=parseInt(Fu.charAt(2)+Fu.charAt(2),16)/255,this;if(Nu===6)return this.r=parseInt(Fu.charAt(0)+Fu.charAt(1),16)/255,this.g=parseInt(Fu.charAt(2)+Fu.charAt(3),16)/255,this.b=parseInt(Fu.charAt(4)+Fu.charAt(5),16)/255,this}return Cu&&Cu.length>0?this.setColorName(Cu):this},setColorName:function(Cu){var Tu=_colorKeywords[Cu];return Tu!==void 0?this.setHex(Tu):console.warn("THREE.Color: Unknown color "+Cu),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(Cu){return this.r=Cu.r,this.g=Cu.g,this.b=Cu.b,this},copyGammaToLinear:function(Cu,Tu){return Tu===void 0&&(Tu=2),this.r=Math.pow(Cu.r,Tu),this.g=Math.pow(Cu.g,Tu),this.b=Math.pow(Cu.b,Tu),this},copyLinearToGamma:function(Cu,Tu){Tu===void 0&&(Tu=2);var Pu=Tu>0?1/Tu:1;return this.r=Math.pow(Cu.r,Pu),this.g=Math.pow(Cu.g,Pu),this.b=Math.pow(Cu.b,Pu),this},convertGammaToLinear:function(Cu){return this.copyGammaToLinear(this,Cu),this},convertLinearToGamma:function(Cu){return this.copyLinearToGamma(this,Cu),this},copySRGBToLinear:function(Cu){return this.r=SRGBToLinear(Cu.r),this.g=SRGBToLinear(Cu.g),this.b=SRGBToLinear(Cu.b),this},copyLinearToSRGB:function(Cu){return this.r=LinearToSRGB(Cu.r),this.g=LinearToSRGB(Cu.g),this.b=LinearToSRGB(Cu.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(Cu){Cu===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),Cu={h:0,s:0,l:0});var Tu=this.r,Pu=this.g,Bu=this.b,Lu=Math.max(Tu,Pu,Bu),Ru=Math.min(Tu,Pu,Bu),Ou,Du,ku=(Ru+Lu)/2;if(Ru===Lu)Ou=0,Du=0;else{var Fu=Lu-Ru;switch(Du=ku<=.5?Fu/(Lu+Ru):Fu/(2-Lu-Ru),Lu){case Tu:Ou=(Pu-Bu)/Fu+(Pu<Bu?6:0);break;case Pu:Ou=(Bu-Tu)/Fu+2;break;case Bu:Ou=(Tu-Pu)/Fu+4;break}Ou/=6}return Cu.h=Ou,Cu.s=Du,Cu.l=ku,Cu},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(Cu,Tu,Pu){return this.getHSL(_hslA),_hslA.h+=Cu,_hslA.s+=Tu,_hslA.l+=Pu,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(Cu){return this.r+=Cu.r,this.g+=Cu.g,this.b+=Cu.b,this},addColors:function(Cu,Tu){return this.r=Cu.r+Tu.r,this.g=Cu.g+Tu.g,this.b=Cu.b+Tu.b,this},addScalar:function(Cu){return this.r+=Cu,this.g+=Cu,this.b+=Cu,this},sub:function(Cu){return this.r=Math.max(0,this.r-Cu.r),this.g=Math.max(0,this.g-Cu.g),this.b=Math.max(0,this.b-Cu.b),this},multiply:function(Cu){return this.r*=Cu.r,this.g*=Cu.g,this.b*=Cu.b,this},multiplyScalar:function(Cu){return this.r*=Cu,this.g*=Cu,this.b*=Cu,this},lerp:function(Cu,Tu){return this.r+=(Cu.r-this.r)*Tu,this.g+=(Cu.g-this.g)*Tu,this.b+=(Cu.b-this.b)*Tu,this},lerpHSL:function(Cu,Tu){this.getHSL(_hslA),Cu.getHSL(_hslB);var Pu=MathUtils.lerp(_hslA.h,_hslB.h,Tu),Bu=MathUtils.lerp(_hslA.s,_hslB.s,Tu),Lu=MathUtils.lerp(_hslA.l,_hslB.l,Tu);return this.setHSL(Pu,Bu,Lu),this},equals:function(Cu){return Cu.r===this.r&&Cu.g===this.g&&Cu.b===this.b},fromArray:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.r=Cu[Tu],this.g=Cu[Tu+1],this.b=Cu[Tu+2],this},toArray:function(Cu,Tu){return Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0),Cu[Tu]=this.r,Cu[Tu+1]=this.g,Cu[Tu+2]=this.b,Cu},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(Cu,Tu,Pu,Bu,Lu,Ru){this.a=Cu,this.b=Tu,this.c=Pu,this.normal=Bu&&Bu.isVector3?Bu:new Vector3,this.vertexNormals=Array.isArray(Bu)?Bu:[],this.color=Lu&&Lu.isColor?Lu:new Color,this.vertexColors=Array.isArray(Lu)?Lu:[],this.materialIndex=Ru!==void 0?Ru:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(Cu){this.a=Cu.a,this.b=Cu.b,this.c=Cu.c,this.normal.copy(Cu.normal),this.color.copy(Cu.color),this.materialIndex=Cu.materialIndex;for(var Tu=0,Pu=Cu.vertexNormals.length;Tu<Pu;Tu++)this.vertexNormals[Tu]=Cu.vertexNormals[Tu].clone();for(var Tu=0,Pu=Cu.vertexColors.length;Tu<Pu;Tu++)this.vertexColors[Tu]=Cu.vertexColors[Tu].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(Cu){if(Cu!==void 0)for(var Tu in Cu){var Pu=Cu[Tu];if(Pu===void 0){console.warn("THREE.Material: '"+Tu+"' parameter is undefined.");continue}if(Tu==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Pu===FlatShading;continue}var Bu=this[Tu];if(Bu===void 0){console.warn("THREE."+this.type+": '"+Tu+"' is not a property of this material.");continue}Bu&&Bu.isColor?Bu.set(Pu):Bu&&Bu.isVector3&&Pu&&Pu.isVector3?Bu.copy(Pu):this[Tu]=Pu}},toJSON:function(Cu){var Tu=Cu===void 0||typeof Cu=="string";Tu&&(Cu={textures:{},images:{}});var Pu={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};Pu.uuid=this.uuid,Pu.type=this.type,this.name!==""&&(Pu.name=this.name),this.color&&this.color.isColor&&(Pu.color=this.color.getHex()),this.roughness!==void 0&&(Pu.roughness=this.roughness),this.metalness!==void 0&&(Pu.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(Pu.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(Pu.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(Pu.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Pu.specular=this.specular.getHex()),this.shininess!==void 0&&(Pu.shininess=this.shininess),this.clearcoat!==void 0&&(Pu.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Pu.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Pu.clearcoatMap=this.clearcoatMap.toJSON(Cu).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Pu.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(Cu).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Pu.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(Cu).uuid,Pu.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(Pu.map=this.map.toJSON(Cu).uuid),this.matcap&&this.matcap.isTexture&&(Pu.matcap=this.matcap.toJSON(Cu).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Pu.alphaMap=this.alphaMap.toJSON(Cu).uuid),this.lightMap&&this.lightMap.isTexture&&(Pu.lightMap=this.lightMap.toJSON(Cu).uuid),this.aoMap&&this.aoMap.isTexture&&(Pu.aoMap=this.aoMap.toJSON(Cu).uuid,Pu.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Pu.bumpMap=this.bumpMap.toJSON(Cu).uuid,Pu.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Pu.normalMap=this.normalMap.toJSON(Cu).uuid,Pu.normalMapType=this.normalMapType,Pu.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Pu.displacementMap=this.displacementMap.toJSON(Cu).uuid,Pu.displacementScale=this.displacementScale,Pu.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Pu.roughnessMap=this.roughnessMap.toJSON(Cu).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Pu.metalnessMap=this.metalnessMap.toJSON(Cu).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Pu.emissiveMap=this.emissiveMap.toJSON(Cu).uuid),this.specularMap&&this.specularMap.isTexture&&(Pu.specularMap=this.specularMap.toJSON(Cu).uuid),this.envMap&&this.envMap.isTexture&&(Pu.envMap=this.envMap.toJSON(Cu).uuid,Pu.reflectivity=this.reflectivity,Pu.refractionRatio=this.refractionRatio,this.combine!==void 0&&(Pu.combine=this.combine),this.envMapIntensity!==void 0&&(Pu.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(Pu.gradientMap=this.gradientMap.toJSON(Cu).uuid),this.size!==void 0&&(Pu.size=this.size),this.sizeAttenuation!==void 0&&(Pu.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Pu.blending=this.blending),this.flatShading===!0&&(Pu.flatShading=this.flatShading),this.side!==FrontSide&&(Pu.side=this.side),this.vertexColors&&(Pu.vertexColors=!0),this.opacity<1&&(Pu.opacity=this.opacity),this.transparent===!0&&(Pu.transparent=this.transparent),Pu.depthFunc=this.depthFunc,Pu.depthTest=this.depthTest,Pu.depthWrite=this.depthWrite,Pu.stencilWrite=this.stencilWrite,Pu.stencilWriteMask=this.stencilWriteMask,Pu.stencilFunc=this.stencilFunc,Pu.stencilRef=this.stencilRef,Pu.stencilFuncMask=this.stencilFuncMask,Pu.stencilFail=this.stencilFail,Pu.stencilZFail=this.stencilZFail,Pu.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(Pu.rotation=this.rotation),this.polygonOffset===!0&&(Pu.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Pu.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Pu.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(Pu.linewidth=this.linewidth),this.dashSize!==void 0&&(Pu.dashSize=this.dashSize),this.gapSize!==void 0&&(Pu.gapSize=this.gapSize),this.scale!==void 0&&(Pu.scale=this.scale),this.dithering===!0&&(Pu.dithering=!0),this.alphaTest>0&&(Pu.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(Pu.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(Pu.wireframe=this.wireframe),this.wireframeLinewidth>1&&(Pu.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Pu.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Pu.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(Pu.morphTargets=!0),this.morphNormals===!0&&(Pu.morphNormals=!0),this.skinning===!0&&(Pu.skinning=!0),this.visible===!1&&(Pu.visible=!1),this.toneMapped===!1&&(Pu.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(Pu.userData=this.userData);function Bu(Ou){var Du=[];for(var ku in Ou){var Fu=Ou[ku];delete Fu.metadata,Du.push(Fu)}return Du}if(Tu){var Lu=Bu(Cu.textures),Ru=Bu(Cu.images);Lu.length>0&&(Pu.textures=Lu),Ru.length>0&&(Pu.images=Ru)}return Pu},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){this.name=Cu.name,this.fog=Cu.fog,this.blending=Cu.blending,this.side=Cu.side,this.flatShading=Cu.flatShading,this.vertexColors=Cu.vertexColors,this.opacity=Cu.opacity,this.transparent=Cu.transparent,this.blendSrc=Cu.blendSrc,this.blendDst=Cu.blendDst,this.blendEquation=Cu.blendEquation,this.blendSrcAlpha=Cu.blendSrcAlpha,this.blendDstAlpha=Cu.blendDstAlpha,this.blendEquationAlpha=Cu.blendEquationAlpha,this.depthFunc=Cu.depthFunc,this.depthTest=Cu.depthTest,this.depthWrite=Cu.depthWrite,this.stencilWriteMask=Cu.stencilWriteMask,this.stencilFunc=Cu.stencilFunc,this.stencilRef=Cu.stencilRef,this.stencilFuncMask=Cu.stencilFuncMask,this.stencilFail=Cu.stencilFail,this.stencilZFail=Cu.stencilZFail,this.stencilZPass=Cu.stencilZPass,this.stencilWrite=Cu.stencilWrite;var Tu=Cu.clippingPlanes,Pu=null;if(Tu!==null){var Bu=Tu.length;Pu=new Array(Bu);for(var Lu=0;Lu!==Bu;++Lu)Pu[Lu]=Tu[Lu].clone()}return this.clippingPlanes=Pu,this.clipIntersection=Cu.clipIntersection,this.clipShadows=Cu.clipShadows,this.shadowSide=Cu.shadowSide,this.colorWrite=Cu.colorWrite,this.precision=Cu.precision,this.polygonOffset=Cu.polygonOffset,this.polygonOffsetFactor=Cu.polygonOffsetFactor,this.polygonOffsetUnits=Cu.polygonOffsetUnits,this.dithering=Cu.dithering,this.alphaTest=Cu.alphaTest,this.premultipliedAlpha=Cu.premultipliedAlpha,this.visible=Cu.visible,this.toneMapped=Cu.toneMapped,this.userData=JSON.parse(JSON.stringify(Cu.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(Cu){Cu===!0&&this.version++}});function MeshBasicMaterial(Cu){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(Cu)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.map=Cu.map,this.lightMap=Cu.lightMap,this.lightMapIntensity=Cu.lightMapIntensity,this.aoMap=Cu.aoMap,this.aoMapIntensity=Cu.aoMapIntensity,this.specularMap=Cu.specularMap,this.alphaMap=Cu.alphaMap,this.envMap=Cu.envMap,this.combine=Cu.combine,this.reflectivity=Cu.reflectivity,this.refractionRatio=Cu.refractionRatio,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.wireframeLinecap=Cu.wireframeLinecap,this.wireframeLinejoin=Cu.wireframeLinejoin,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(Cu,Tu,Pu){if(Array.isArray(Cu))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=Cu,this.itemSize=Tu,this.count=Cu!==void 0?Cu.length/Tu:0,this.normalized=Pu===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(Cu){Cu===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(Cu){return this.usage=Cu,this},copy:function(Cu){return this.name=Cu.name,this.array=new Cu.array.constructor(Cu.array),this.itemSize=Cu.itemSize,this.count=Cu.count,this.normalized=Cu.normalized,this.usage=Cu.usage,this},copyAt:function(Cu,Tu,Pu){Cu*=this.itemSize,Pu*=Tu.itemSize;for(var Bu=0,Lu=this.itemSize;Bu<Lu;Bu++)this.array[Cu+Bu]=Tu.array[Pu+Bu];return this},copyArray:function(Cu){return this.array.set(Cu),this},copyColorsArray:function(Cu){for(var Tu=this.array,Pu=0,Bu=0,Lu=Cu.length;Bu<Lu;Bu++){var Ru=Cu[Bu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Bu),Ru=new Color),Tu[Pu++]=Ru.r,Tu[Pu++]=Ru.g,Tu[Pu++]=Ru.b}return this},copyVector2sArray:function(Cu){for(var Tu=this.array,Pu=0,Bu=0,Lu=Cu.length;Bu<Lu;Bu++){var Ru=Cu[Bu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Bu),Ru=new Vector2),Tu[Pu++]=Ru.x,Tu[Pu++]=Ru.y}return this},copyVector3sArray:function(Cu){for(var Tu=this.array,Pu=0,Bu=0,Lu=Cu.length;Bu<Lu;Bu++){var Ru=Cu[Bu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Bu),Ru=new Vector3),Tu[Pu++]=Ru.x,Tu[Pu++]=Ru.y,Tu[Pu++]=Ru.z}return this},copyVector4sArray:function(Cu){for(var Tu=this.array,Pu=0,Bu=0,Lu=Cu.length;Bu<Lu;Bu++){var Ru=Cu[Bu];Ru===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Bu),Ru=new Vector4),Tu[Pu++]=Ru.x,Tu[Pu++]=Ru.y,Tu[Pu++]=Ru.z,Tu[Pu++]=Ru.w}return this},applyMatrix3:function(Cu){for(var Tu=0,Pu=this.count;Tu<Pu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyMatrix3(Cu),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(Cu){for(var Tu=0,Pu=this.count;Tu<Pu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyMatrix4(Cu),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(Cu){for(var Tu=0,Pu=this.count;Tu<Pu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.applyNormalMatrix(Cu),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(Cu){for(var Tu=0,Pu=this.count;Tu<Pu;Tu++)_vector$3.x=this.getX(Tu),_vector$3.y=this.getY(Tu),_vector$3.z=this.getZ(Tu),_vector$3.transformDirection(Cu),this.setXYZ(Tu,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.array.set(Cu,Tu),this},getX:function(Cu){return this.array[Cu*this.itemSize]},setX:function(Cu,Tu){return this.array[Cu*this.itemSize]=Tu,this},getY:function(Cu){return this.array[Cu*this.itemSize+1]},setY:function(Cu,Tu){return this.array[Cu*this.itemSize+1]=Tu,this},getZ:function(Cu){return this.array[Cu*this.itemSize+2]},setZ:function(Cu,Tu){return this.array[Cu*this.itemSize+2]=Tu,this},getW:function(Cu){return this.array[Cu*this.itemSize+3]},setW:function(Cu,Tu){return this.array[Cu*this.itemSize+3]=Tu,this},setXY:function(Cu,Tu,Pu){return Cu*=this.itemSize,this.array[Cu+0]=Tu,this.array[Cu+1]=Pu,this},setXYZ:function(Cu,Tu,Pu,Bu){return Cu*=this.itemSize,this.array[Cu+0]=Tu,this.array[Cu+1]=Pu,this.array[Cu+2]=Bu,this},setXYZW:function(Cu,Tu,Pu,Bu,Lu){return Cu*=this.itemSize,this.array[Cu+0]=Tu,this.array[Cu+1]=Pu,this.array[Cu+2]=Bu,this.array[Cu+3]=Lu,this},onUpload:function(Cu){return this.onUploadCallback=Cu,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Int8Array(Cu),Tu,Pu)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Uint8Array(Cu),Tu,Pu)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Uint8ClampedArray(Cu),Tu,Pu)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Int16Array(Cu),Tu,Pu)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Uint16Array(Cu),Tu,Pu)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Int32Array(Cu),Tu,Pu)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Uint32Array(Cu),Tu,Pu)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Float32Array(Cu),Tu,Pu)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(Cu,Tu,Pu){BufferAttribute.call(this,new Float64Array(Cu),Tu,Pu)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(Cu){for(var Tu,Pu=[],Bu=void 0,Lu=Cu.faces,Ru=0;Ru<Lu.length;Ru++){var Ou=Lu[Ru];Ou.materialIndex!==Bu&&(Bu=Ou.materialIndex,Tu!==void 0&&(Tu.count=Ru*3-Tu.start,Pu.push(Tu)),Tu={start:Ru*3,materialIndex:Bu})}Tu!==void 0&&(Tu.count=Ru*3-Tu.start,Pu.push(Tu)),this.groups=Pu},fromGeometry:function(Cu){var Tu=Cu.faces,Pu=Cu.vertices,Bu=Cu.faceVertexUvs,Lu=Bu[0]&&Bu[0].length>0,Ru=Bu[1]&&Bu[1].length>0,Ou=Cu.morphTargets,Du=Ou.length,ku;if(Du>0){ku=[];for(var Fu=0;Fu<Du;Fu++)ku[Fu]={name:Ou[Fu].name,data:[]};this.morphTargets.position=ku}var Nu=Cu.morphNormals,Gu=Nu.length,zu;if(Gu>0){zu=[];for(var Fu=0;Fu<Gu;Fu++)zu[Fu]={name:Nu[Fu].name,data:[]};this.morphTargets.normal=zu}var Hu=Cu.skinIndices,Wu=Cu.skinWeights,_h=Hu.length===Pu.length,Xc=Wu.length===Pu.length;Pu.length>0&&Tu.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Fu=0;Fu<Tu.length;Fu++){var ju=Tu[Fu];this.vertices.push(Pu[ju.a],Pu[ju.b],Pu[ju.c]);var _c=ju.vertexNormals;if(_c.length===3)this.normals.push(_c[0],_c[1],_c[2]);else{var _f=ju.normal;this.normals.push(_f,_f,_f)}var ep=ju.vertexColors;if(ep.length===3)this.colors.push(ep[0],ep[1],ep[2]);else{var tp=ju.color;this.colors.push(tp,tp,tp)}if(Lu===!0){var op=Bu[0][Fu];op!==void 0?this.uvs.push(op[0],op[1],op[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Fu),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Ru===!0){var op=Bu[1][Fu];op!==void 0?this.uvs2.push(op[0],op[1],op[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Fu),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var lp=0;lp<Du;lp++){var up=Ou[lp].vertices;ku[lp].data.push(up[ju.a],up[ju.b],up[ju.c])}for(var lp=0;lp<Gu;lp++){var hp=Nu[lp].vertexNormals[Fu];zu[lp].data.push(hp.a,hp.b,hp.c)}_h&&this.skinIndices.push(Hu[ju.a],Hu[ju.b],Hu[ju.c]),Xc&&this.skinWeights.push(Wu[ju.a],Wu[ju.b],Wu[ju.c])}return this.computeGroups(Cu),this.verticesNeedUpdate=Cu.verticesNeedUpdate,this.normalsNeedUpdate=Cu.normalsNeedUpdate,this.colorsNeedUpdate=Cu.colorsNeedUpdate,this.uvsNeedUpdate=Cu.uvsNeedUpdate,this.groupsNeedUpdate=Cu.groupsNeedUpdate,Cu.boundingSphere!==null&&(this.boundingSphere=Cu.boundingSphere.clone()),Cu.boundingBox!==null&&(this.boundingBox=Cu.boundingBox.clone()),this}});function arrayMax(Cu){if(Cu.length===0)return-1/0;let Tu=Cu[0];for(let Pu=1,Bu=Cu.length;Pu<Bu;++Pu)Cu[Pu]>Tu&&(Tu=Cu[Pu]);return Tu}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(Cu){Array.isArray(Cu)?this.index=new(arrayMax(Cu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Cu,1):this.index=Cu},getAttribute:function(Cu){return this.attributes[Cu]},setAttribute:function(Cu,Tu){return this.attributes[Cu]=Tu,this},deleteAttribute:function(Cu){return delete this.attributes[Cu],this},addGroup:function(Cu,Tu,Pu){this.groups.push({start:Cu,count:Tu,materialIndex:Pu!==void 0?Pu:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(Cu,Tu){this.drawRange.start=Cu,this.drawRange.count=Tu},applyMatrix4:function(Cu){var Tu=this.attributes.position;Tu!==void 0&&(Tu.applyMatrix4(Cu),Tu.needsUpdate=!0);var Pu=this.attributes.normal;if(Pu!==void 0){var Bu=new Matrix3().getNormalMatrix(Cu);Pu.applyNormalMatrix(Bu),Pu.needsUpdate=!0}var Lu=this.attributes.tangent;return Lu!==void 0&&(Lu.transformDirection(Cu),Lu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(Cu){return _m1$2.makeRotationX(Cu),this.applyMatrix4(_m1$2),this},rotateY:function(Cu){return _m1$2.makeRotationY(Cu),this.applyMatrix4(_m1$2),this},rotateZ:function(Cu){return _m1$2.makeRotationZ(Cu),this.applyMatrix4(_m1$2),this},translate:function(Cu,Tu,Pu){return _m1$2.makeTranslation(Cu,Tu,Pu),this.applyMatrix4(_m1$2),this},scale:function(Cu,Tu,Pu){return _m1$2.makeScale(Cu,Tu,Pu),this.applyMatrix4(_m1$2),this},lookAt:function(Cu){return _obj.lookAt(Cu),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(Cu){var Tu=Cu.geometry;if(Cu.isPoints||Cu.isLine){var Pu=new Float32BufferAttribute(Tu.vertices.length*3,3),Bu=new Float32BufferAttribute(Tu.colors.length*3,3);if(this.setAttribute("position",Pu.copyVector3sArray(Tu.vertices)),this.setAttribute("color",Bu.copyColorsArray(Tu.colors)),Tu.lineDistances&&Tu.lineDistances.length===Tu.vertices.length){var Lu=new Float32BufferAttribute(Tu.lineDistances.length,1);this.setAttribute("lineDistance",Lu.copyArray(Tu.lineDistances))}Tu.boundingSphere!==null&&(this.boundingSphere=Tu.boundingSphere.clone()),Tu.boundingBox!==null&&(this.boundingBox=Tu.boundingBox.clone())}else Cu.isMesh&&Tu&&Tu.isGeometry&&this.fromGeometry(Tu);return this},setFromPoints:function(Cu){for(var Tu=[],Pu=0,Bu=Cu.length;Pu<Bu;Pu++){var Lu=Cu[Pu];Tu.push(Lu.x,Lu.y,Lu.z||0)}return this.setAttribute("position",new Float32BufferAttribute(Tu,3)),this},updateFromObject:function(Cu){var Tu=Cu.geometry;if(Cu.isMesh){var Pu=Tu.__directGeometry;if(Tu.elementsNeedUpdate===!0&&(Pu=void 0,Tu.elementsNeedUpdate=!1),Pu===void 0)return this.fromGeometry(Tu);Pu.verticesNeedUpdate=Tu.verticesNeedUpdate,Pu.normalsNeedUpdate=Tu.normalsNeedUpdate,Pu.colorsNeedUpdate=Tu.colorsNeedUpdate,Pu.uvsNeedUpdate=Tu.uvsNeedUpdate,Pu.groupsNeedUpdate=Tu.groupsNeedUpdate,Tu.verticesNeedUpdate=!1,Tu.normalsNeedUpdate=!1,Tu.colorsNeedUpdate=!1,Tu.uvsNeedUpdate=!1,Tu.groupsNeedUpdate=!1,Tu=Pu}var Bu;return Tu.verticesNeedUpdate===!0&&(Bu=this.attributes.position,Bu!==void 0&&(Bu.copyVector3sArray(Tu.vertices),Bu.needsUpdate=!0),Tu.verticesNeedUpdate=!1),Tu.normalsNeedUpdate===!0&&(Bu=this.attributes.normal,Bu!==void 0&&(Bu.copyVector3sArray(Tu.normals),Bu.needsUpdate=!0),Tu.normalsNeedUpdate=!1),Tu.colorsNeedUpdate===!0&&(Bu=this.attributes.color,Bu!==void 0&&(Bu.copyColorsArray(Tu.colors),Bu.needsUpdate=!0),Tu.colorsNeedUpdate=!1),Tu.uvsNeedUpdate&&(Bu=this.attributes.uv,Bu!==void 0&&(Bu.copyVector2sArray(Tu.uvs),Bu.needsUpdate=!0),Tu.uvsNeedUpdate=!1),Tu.lineDistancesNeedUpdate&&(Bu=this.attributes.lineDistance,Bu!==void 0&&(Bu.copyArray(Tu.lineDistances),Bu.needsUpdate=!0),Tu.lineDistancesNeedUpdate=!1),Tu.groupsNeedUpdate&&(Tu.computeGroups(Cu.geometry),this.groups=Tu.groups,Tu.groupsNeedUpdate=!1),this},fromGeometry:function(Cu){return Cu.__directGeometry=new DirectGeometry().fromGeometry(Cu),this.fromDirectGeometry(Cu.__directGeometry)},fromDirectGeometry:function(Cu){var Tu=new Float32Array(Cu.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(Tu,3).copyVector3sArray(Cu.vertices)),Cu.normals.length>0){var Pu=new Float32Array(Cu.normals.length*3);this.setAttribute("normal",new BufferAttribute(Pu,3).copyVector3sArray(Cu.normals))}if(Cu.colors.length>0){var Bu=new Float32Array(Cu.colors.length*3);this.setAttribute("color",new BufferAttribute(Bu,3).copyColorsArray(Cu.colors))}if(Cu.uvs.length>0){var Lu=new Float32Array(Cu.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Lu,2).copyVector2sArray(Cu.uvs))}if(Cu.uvs2.length>0){var Ru=new Float32Array(Cu.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Ru,2).copyVector2sArray(Cu.uvs2))}this.groups=Cu.groups;for(var Ou in Cu.morphTargets){for(var Du=[],ku=Cu.morphTargets[Ou],Fu=0,Nu=ku.length;Fu<Nu;Fu++){var Gu=ku[Fu],zu=new Float32BufferAttribute(Gu.data.length*3,3);zu.name=Gu.name,Du.push(zu.copyVector3sArray(Gu.data))}this.morphAttributes[Ou]=Du}if(Cu.skinIndices.length>0){var Hu=new Float32BufferAttribute(Cu.skinIndices.length*4,4);this.setAttribute("skinIndex",Hu.copyVector4sArray(Cu.skinIndices))}if(Cu.skinWeights.length>0){var Wu=new Float32BufferAttribute(Cu.skinWeights.length*4,4);this.setAttribute("skinWeight",Wu.copyVector4sArray(Cu.skinWeights))}return Cu.boundingSphere!==null&&(this.boundingSphere=Cu.boundingSphere.clone()),Cu.boundingBox!==null&&(this.boundingBox=Cu.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var Cu=this.attributes.position,Tu=this.morphAttributes.position;if(Cu!==void 0){if(this.boundingBox.setFromBufferAttribute(Cu),Tu)for(var Pu=0,Bu=Tu.length;Pu<Bu;Pu++){var Lu=Tu[Pu];_box$2.setFromBufferAttribute(Lu),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var Cu=this.attributes.position,Tu=this.morphAttributes.position;if(Cu){var Pu=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(Cu),Tu)for(var Bu=0,Lu=Tu.length;Bu<Lu;Bu++){var Ru=Tu[Bu];_boxMorphTargets.setFromBufferAttribute(Ru),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Pu);for(var Ou=0,Bu=0,Lu=Cu.count;Bu<Lu;Bu++)_vector$4.fromBufferAttribute(Cu,Bu),Ou=Math.max(Ou,Pu.distanceToSquared(_vector$4));if(Tu)for(var Bu=0,Lu=Tu.length;Bu<Lu;Bu++)for(var Ru=Tu[Bu],Du=this.morphTargetsRelative,ku=0,Fu=Ru.count;ku<Fu;ku++)_vector$4.fromBufferAttribute(Ru,ku),Du&&(_offset.fromBufferAttribute(Cu,ku),_vector$4.add(_offset)),Ou=Math.max(Ou,Pu.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Ou),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var Cu=this.index,Tu=this.attributes;if(Tu.position){var Pu=Tu.position.array;if(Tu.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(Pu.length),3));else for(var Bu=Tu.normal.array,Lu=0,Ru=Bu.length;Lu<Ru;Lu++)Bu[Lu]=0;var Ou=Tu.normal.array,Du,ku,Fu,Nu=new Vector3,Gu=new Vector3,zu=new Vector3,Hu=new Vector3,Wu=new Vector3;if(Cu)for(var _h=Cu.array,Lu=0,Ru=Cu.count;Lu<Ru;Lu+=3)Du=_h[Lu+0]*3,ku=_h[Lu+1]*3,Fu=_h[Lu+2]*3,Nu.fromArray(Pu,Du),Gu.fromArray(Pu,ku),zu.fromArray(Pu,Fu),Hu.subVectors(zu,Gu),Wu.subVectors(Nu,Gu),Hu.cross(Wu),Ou[Du]+=Hu.x,Ou[Du+1]+=Hu.y,Ou[Du+2]+=Hu.z,Ou[ku]+=Hu.x,Ou[ku+1]+=Hu.y,Ou[ku+2]+=Hu.z,Ou[Fu]+=Hu.x,Ou[Fu+1]+=Hu.y,Ou[Fu+2]+=Hu.z;else for(var Lu=0,Ru=Pu.length;Lu<Ru;Lu+=9)Nu.fromArray(Pu,Lu),Gu.fromArray(Pu,Lu+3),zu.fromArray(Pu,Lu+6),Hu.subVectors(zu,Gu),Wu.subVectors(Nu,Gu),Hu.cross(Wu),Ou[Lu]=Hu.x,Ou[Lu+1]=Hu.y,Ou[Lu+2]=Hu.z,Ou[Lu+3]=Hu.x,Ou[Lu+4]=Hu.y,Ou[Lu+5]=Hu.z,Ou[Lu+6]=Hu.x,Ou[Lu+7]=Hu.y,Ou[Lu+8]=Hu.z;this.normalizeNormals(),Tu.normal.needsUpdate=!0}},merge:function(Cu,Tu){if(!(Cu&&Cu.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",Cu);return}Tu===void 0&&(Tu=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var Pu=this.attributes;for(var Bu in Pu)if(Cu.attributes[Bu]!==void 0)for(var Lu=Pu[Bu],Ru=Lu.array,Ou=Cu.attributes[Bu],Du=Ou.array,ku=Ou.itemSize*Tu,Fu=Math.min(Du.length,Ru.length-ku),Nu=0,Gu=ku;Nu<Fu;Nu++,Gu++)Ru[Gu]=Du[Nu];return this},normalizeNormals:function(){for(var Cu=this.attributes.normal,Tu=0,Pu=Cu.count;Tu<Pu;Tu++)_vector$4.x=Cu.getX(Tu),_vector$4.y=Cu.getY(Tu),_vector$4.z=Cu.getZ(Tu),_vector$4.normalize(),Cu.setXYZ(Tu,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function Cu(_h,Xc){for(var ju=_h.array,_c=_h.itemSize,_f=_h.normalized,ep=new ju.constructor(Xc.length*_c),tp=0,op=0,lp=0,up=Xc.length;lp<up;lp++){tp=Xc[lp]*_c;for(var hp=0;hp<_c;hp++)ep[op++]=ju[tp++]}return new BufferAttribute(ep,_c,_f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var Tu=new BufferGeometry,Pu=this.index.array,Bu=this.attributes;for(var Lu in Bu){var Ru=Bu[Lu],Ou=Cu(Ru,Pu);Tu.setAttribute(Lu,Ou)}var Du=this.morphAttributes;for(Lu in Du){for(var ku=[],Fu=Du[Lu],Nu=0,Gu=Fu.length;Nu<Gu;Nu++){var Ru=Fu[Nu],Ou=Cu(Ru,Pu);ku.push(Ou)}Tu.morphAttributes[Lu]=ku}Tu.morphTargetsRelative=this.morphTargetsRelative;for(var zu=this.groups,Nu=0,Hu=zu.length;Nu<Hu;Nu++){var Wu=zu[Nu];Tu.addGroup(Wu.start,Wu.count,Wu.materialIndex)}return Tu},toJSON:function(){var Cu={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(Cu.uuid=this.uuid,Cu.type=this.type,this.name!==""&&(Cu.name=this.name),Object.keys(this.userData).length>0&&(Cu.userData=this.userData),this.parameters!==void 0){var Tu=this.parameters;for(var Pu in Tu)Tu[Pu]!==void 0&&(Cu[Pu]=Tu[Pu]);return Cu}Cu.data={attributes:{}};var Bu=this.index;Bu!==null&&(Cu.data.index={type:Bu.array.constructor.name,array:Array.prototype.slice.call(Bu.array)});var Lu=this.attributes;for(var Pu in Lu){var Ru=Lu[Pu],Ou=Ru.toJSON();Ru.name!==""&&(Ou.name=Ru.name),Cu.data.attributes[Pu]=Ou}var Du={},ku=!1;for(var Pu in this.morphAttributes){for(var Fu=this.morphAttributes[Pu],Nu=[],Gu=0,zu=Fu.length;Gu<zu;Gu++){var Ru=Fu[Gu],Ou=Ru.toJSON();Ru.name!==""&&(Ou.name=Ru.name),Nu.push(Ou)}Nu.length>0&&(Du[Pu]=Nu,ku=!0)}ku&&(Cu.data.morphAttributes=Du,Cu.data.morphTargetsRelative=this.morphTargetsRelative);var Hu=this.groups;Hu.length>0&&(Cu.data.groups=JSON.parse(JSON.stringify(Hu)));var Wu=this.boundingSphere;return Wu!==null&&(Cu.data.boundingSphere={center:Wu.center.toArray(),radius:Wu.radius}),Cu},clone:function(){return new BufferGeometry().copy(this)},copy:function(Cu){var Tu,Pu,Bu;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=Cu.name;var Lu=Cu.index;Lu!==null&&this.setIndex(Lu.clone());var Ru=Cu.attributes;for(Tu in Ru){var Ou=Ru[Tu];this.setAttribute(Tu,Ou.clone())}var Du=Cu.morphAttributes;for(Tu in Du){var ku=[],Fu=Du[Tu];for(Pu=0,Bu=Fu.length;Pu<Bu;Pu++)ku.push(Fu[Pu].clone());this.morphAttributes[Tu]=ku}this.morphTargetsRelative=Cu.morphTargetsRelative;var Nu=Cu.groups;for(Pu=0,Bu=Nu.length;Pu<Bu;Pu++){var Gu=Nu[Pu];this.addGroup(Gu.start,Gu.count,Gu.materialIndex)}var zu=Cu.boundingBox;zu!==null&&(this.boundingBox=zu.clone());var Hu=Cu.boundingSphere;return Hu!==null&&(this.boundingSphere=Hu.clone()),this.drawRange.start=Cu.drawRange.start,this.drawRange.count=Cu.drawRange.count,this.userData=Cu.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(Cu,Tu){Object3D.call(this),this.type="Mesh",this.geometry=Cu!==void 0?Cu:new BufferGeometry,this.material=Tu!==void 0?Tu:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(Cu){return Object3D.prototype.copy.call(this,Cu),Cu.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=Cu.morphTargetInfluences.slice()),Cu.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},Cu.morphTargetDictionary)),this},updateMorphTargets:function(){var Cu=this.geometry,Tu,Pu,Bu;if(Cu.isBufferGeometry){var Lu=Cu.morphAttributes,Ru=Object.keys(Lu);if(Ru.length>0){var Ou=Lu[Ru[0]];if(Ou!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Pu=Ou.length;Tu<Pu;Tu++)Bu=Ou[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Bu]=Tu}}else{var Du=Cu.morphTargets;Du!==void 0&&Du.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(Cu,Tu){var Pu=this.geometry,Bu=this.material,Lu=this.matrixWorld;if(Bu!==void 0&&(Pu.boundingSphere===null&&Pu.computeBoundingSphere(),_sphere.copy(Pu.boundingSphere),_sphere.applyMatrix4(Lu),Cu.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Lu),_ray.copy(Cu.ray).applyMatrix4(_inverseMatrix),!(Pu.boundingBox!==null&&_ray.intersectsBox(Pu.boundingBox)===!1)))){var Ru;if(Pu.isBufferGeometry){var Ou,Du,ku,Fu=Pu.index,Nu=Pu.attributes.position,Gu=Pu.morphAttributes.position,zu=Pu.morphTargetsRelative,Hu=Pu.attributes.uv,Wu=Pu.attributes.uv2,_h=Pu.groups,Xc=Pu.drawRange,ju,_c,_f,ep,tp,op,lp,up;if(Fu!==null)if(Array.isArray(Bu))for(ju=0,_f=_h.length;ju<_f;ju++)for(tp=_h[ju],op=Bu[tp.materialIndex],lp=Math.max(tp.start,Xc.start),up=Math.min(tp.start+tp.count,Xc.start+Xc.count),_c=lp,ep=up;_c<ep;_c+=3)Ou=Fu.getX(_c),Du=Fu.getX(_c+1),ku=Fu.getX(_c+2),Ru=checkBufferGeometryIntersection(this,op,Cu,_ray,Nu,Gu,zu,Hu,Wu,Ou,Du,ku),Ru&&(Ru.faceIndex=Math.floor(_c/3),Ru.face.materialIndex=tp.materialIndex,Tu.push(Ru));else for(lp=Math.max(0,Xc.start),up=Math.min(Fu.count,Xc.start+Xc.count),ju=lp,_f=up;ju<_f;ju+=3)Ou=Fu.getX(ju),Du=Fu.getX(ju+1),ku=Fu.getX(ju+2),Ru=checkBufferGeometryIntersection(this,Bu,Cu,_ray,Nu,Gu,zu,Hu,Wu,Ou,Du,ku),Ru&&(Ru.faceIndex=Math.floor(ju/3),Tu.push(Ru));else if(Nu!==void 0)if(Array.isArray(Bu))for(ju=0,_f=_h.length;ju<_f;ju++)for(tp=_h[ju],op=Bu[tp.materialIndex],lp=Math.max(tp.start,Xc.start),up=Math.min(tp.start+tp.count,Xc.start+Xc.count),_c=lp,ep=up;_c<ep;_c+=3)Ou=_c,Du=_c+1,ku=_c+2,Ru=checkBufferGeometryIntersection(this,op,Cu,_ray,Nu,Gu,zu,Hu,Wu,Ou,Du,ku),Ru&&(Ru.faceIndex=Math.floor(_c/3),Ru.face.materialIndex=tp.materialIndex,Tu.push(Ru));else for(lp=Math.max(0,Xc.start),up=Math.min(Nu.count,Xc.start+Xc.count),ju=lp,_f=up;ju<_f;ju+=3)Ou=ju,Du=ju+1,ku=ju+2,Ru=checkBufferGeometryIntersection(this,Bu,Cu,_ray,Nu,Gu,zu,Hu,Wu,Ou,Du,ku),Ru&&(Ru.faceIndex=Math.floor(ju/3),Tu.push(Ru))}else if(Pu.isGeometry){var hp,np,rp,ip=Array.isArray(Bu),ap=Pu.vertices,sp=Pu.faces,cp,dp=Pu.faceVertexUvs[0];dp.length>0&&(cp=dp);for(var fp=0,vp=sp.length;fp<vp;fp++){var _p=sp[fp],wp=ip?Bu[_p.materialIndex]:Bu;if(wp!==void 0&&(hp=ap[_p.a],np=ap[_p.b],rp=ap[_p.c],Ru=checkIntersection(this,wp,Cu,_ray,hp,np,rp,_intersectionPoint),Ru)){if(cp&&cp[fp]){var Dp=cp[fp];_uvA.copy(Dp[0]),_uvB.copy(Dp[1]),_uvC.copy(Dp[2]),Ru.uv=Triangle.getUV(_intersectionPoint,hp,np,rp,_uvA,_uvB,_uvC,new Vector2)}Ru.face=_p,Ru.faceIndex=fp,Tu.push(Ru)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){var ku;if(Tu.side===BackSide?ku=Bu.intersectTriangle(Ou,Ru,Lu,!0,Du):ku=Bu.intersectTriangle(Lu,Ru,Ou,Tu.side!==DoubleSide,Du),ku===null)return null;_intersectionPointWorld.copy(Du),_intersectionPointWorld.applyMatrix4(Cu.matrixWorld);var Fu=Pu.ray.origin.distanceTo(_intersectionPointWorld);return Fu<Pu.near||Fu>Pu.far?null:{distance:Fu,point:_intersectionPointWorld.clone(),object:Cu}}function checkBufferGeometryIntersection(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu){_vA.fromBufferAttribute(Lu,Fu),_vB.fromBufferAttribute(Lu,Nu),_vC.fromBufferAttribute(Lu,Gu);var zu=Cu.morphTargetInfluences;if(Tu.morphTargets&&Ru&&zu){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Hu=0,Wu=Ru.length;Hu<Wu;Hu++){var _h=zu[Hu],Xc=Ru[Hu];_h!==0&&(_tempA.fromBufferAttribute(Xc,Fu),_tempB.fromBufferAttribute(Xc,Nu),_tempC.fromBufferAttribute(Xc,Gu),Ou?(_morphA.addScaledVector(_tempA,_h),_morphB.addScaledVector(_tempB,_h),_morphC.addScaledVector(_tempC,_h)):(_morphA.addScaledVector(_tempA.sub(_vA),_h),_morphB.addScaledVector(_tempB.sub(_vB),_h),_morphC.addScaledVector(_tempC.sub(_vC),_h)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}Cu.isSkinnedMesh&&(Cu.boneTransform(Fu,_vA),Cu.boneTransform(Nu,_vB),Cu.boneTransform(Gu,_vC));var ju=checkIntersection(Cu,Tu,Pu,Bu,_vA,_vB,_vC,_intersectionPoint);if(ju){Du&&(_uvA.fromBufferAttribute(Du,Fu),_uvB.fromBufferAttribute(Du,Nu),_uvC.fromBufferAttribute(Du,Gu),ju.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),ku&&(_uvA.fromBufferAttribute(ku,Fu),_uvB.fromBufferAttribute(ku,Nu),_uvC.fromBufferAttribute(ku,Gu),ju.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var _c=new Face3(Fu,Nu,Gu);Triangle.getNormal(_vA,_vB,_vC,_c.normal),ju.face=_c}return ju}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(Cu){for(var Tu=new Matrix3().getNormalMatrix(Cu),Pu=0,Bu=this.vertices.length;Pu<Bu;Pu++){var Lu=this.vertices[Pu];Lu.applyMatrix4(Cu)}for(var Pu=0,Bu=this.faces.length;Pu<Bu;Pu++){var Ru=this.faces[Pu];Ru.normal.applyMatrix3(Tu).normalize();for(var Ou=0,Du=Ru.vertexNormals.length;Ou<Du;Ou++)Ru.vertexNormals[Ou].applyMatrix3(Tu).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(Cu){return _m1$3.makeRotationX(Cu),this.applyMatrix4(_m1$3),this},rotateY:function(Cu){return _m1$3.makeRotationY(Cu),this.applyMatrix4(_m1$3),this},rotateZ:function(Cu){return _m1$3.makeRotationZ(Cu),this.applyMatrix4(_m1$3),this},translate:function(Cu,Tu,Pu){return _m1$3.makeTranslation(Cu,Tu,Pu),this.applyMatrix4(_m1$3),this},scale:function(Cu,Tu,Pu){return _m1$3.makeScale(Cu,Tu,Pu),this.applyMatrix4(_m1$3),this},lookAt:function(Cu){return _obj$1.lookAt(Cu),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(Cu){var Tu=this,Pu=Cu.index!==null?Cu.index.array:void 0,Bu=Cu.attributes;if(Bu.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Lu=Bu.position.array,Ru=Bu.normal!==void 0?Bu.normal.array:void 0,Ou=Bu.color!==void 0?Bu.color.array:void 0,Du=Bu.uv!==void 0?Bu.uv.array:void 0,ku=Bu.uv2!==void 0?Bu.uv2.array:void 0;ku!==void 0&&(this.faceVertexUvs[1]=[]);for(var Fu=0;Fu<Lu.length;Fu+=3)Tu.vertices.push(new Vector3().fromArray(Lu,Fu)),Ou!==void 0&&Tu.colors.push(new Color().fromArray(Ou,Fu));function Nu(ju,_c,_f,ep){var tp=Ou===void 0?[]:[Tu.colors[ju].clone(),Tu.colors[_c].clone(),Tu.colors[_f].clone()],op=Ru===void 0?[]:[new Vector3().fromArray(Ru,ju*3),new Vector3().fromArray(Ru,_c*3),new Vector3().fromArray(Ru,_f*3)],lp=new Face3(ju,_c,_f,op,tp,ep);Tu.faces.push(lp),Du!==void 0&&Tu.faceVertexUvs[0].push([new Vector2().fromArray(Du,ju*2),new Vector2().fromArray(Du,_c*2),new Vector2().fromArray(Du,_f*2)]),ku!==void 0&&Tu.faceVertexUvs[1].push([new Vector2().fromArray(ku,ju*2),new Vector2().fromArray(ku,_c*2),new Vector2().fromArray(ku,_f*2)])}var Gu=Cu.groups;if(Gu.length>0)for(var Fu=0;Fu<Gu.length;Fu++)for(var zu=Gu[Fu],Hu=zu.start,Wu=zu.count,_h=Hu,Xc=Hu+Wu;_h<Xc;_h+=3)Pu!==void 0?Nu(Pu[_h],Pu[_h+1],Pu[_h+2],zu.materialIndex):Nu(_h,_h+1,_h+2,zu.materialIndex);else if(Pu!==void 0)for(var Fu=0;Fu<Pu.length;Fu+=3)Nu(Pu[Fu],Pu[Fu+1],Pu[Fu+2]);else for(var Fu=0;Fu<Lu.length/3;Fu+=3)Nu(Fu,Fu+1,Fu+2);return this.computeFaceNormals(),Cu.boundingBox!==null&&(this.boundingBox=Cu.boundingBox.clone()),Cu.boundingSphere!==null&&(this.boundingSphere=Cu.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var Cu=this.boundingSphere.center,Tu=this.boundingSphere.radius,Pu=Tu===0?1:1/Tu,Bu=new Matrix4;return Bu.set(Pu,0,0,-Pu*Cu.x,0,Pu,0,-Pu*Cu.y,0,0,Pu,-Pu*Cu.z,0,0,0,1),this.applyMatrix4(Bu),this},computeFaceNormals:function(){for(var Cu=new Vector3,Tu=new Vector3,Pu=0,Bu=this.faces.length;Pu<Bu;Pu++){var Lu=this.faces[Pu],Ru=this.vertices[Lu.a],Ou=this.vertices[Lu.b],Du=this.vertices[Lu.c];Cu.subVectors(Du,Ou),Tu.subVectors(Ru,Ou),Cu.cross(Tu),Cu.normalize(),Lu.normal.copy(Cu)}},computeVertexNormals:function(Cu){Cu===void 0&&(Cu=!0);var Tu,Pu,Bu,Lu,Ru,Ou;for(Ou=new Array(this.vertices.length),Tu=0,Pu=this.vertices.length;Tu<Pu;Tu++)Ou[Tu]=new Vector3;if(Cu){var Du,ku,Fu,Nu=new Vector3,Gu=new Vector3;for(Bu=0,Lu=this.faces.length;Bu<Lu;Bu++)Ru=this.faces[Bu],Du=this.vertices[Ru.a],ku=this.vertices[Ru.b],Fu=this.vertices[Ru.c],Nu.subVectors(Fu,ku),Gu.subVectors(Du,ku),Nu.cross(Gu),Ou[Ru.a].add(Nu),Ou[Ru.b].add(Nu),Ou[Ru.c].add(Nu)}else for(this.computeFaceNormals(),Bu=0,Lu=this.faces.length;Bu<Lu;Bu++)Ru=this.faces[Bu],Ou[Ru.a].add(Ru.normal),Ou[Ru.b].add(Ru.normal),Ou[Ru.c].add(Ru.normal);for(Tu=0,Pu=this.vertices.length;Tu<Pu;Tu++)Ou[Tu].normalize();for(Bu=0,Lu=this.faces.length;Bu<Lu;Bu++){Ru=this.faces[Bu];var zu=Ru.vertexNormals;zu.length===3?(zu[0].copy(Ou[Ru.a]),zu[1].copy(Ou[Ru.b]),zu[2].copy(Ou[Ru.c])):(zu[0]=Ou[Ru.a].clone(),zu[1]=Ou[Ru.b].clone(),zu[2]=Ou[Ru.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var Cu,Tu,Pu;for(this.computeFaceNormals(),Cu=0,Tu=this.faces.length;Cu<Tu;Cu++){Pu=this.faces[Cu];var Bu=Pu.vertexNormals;Bu.length===3?(Bu[0].copy(Pu.normal),Bu[1].copy(Pu.normal),Bu[2].copy(Pu.normal)):(Bu[0]=Pu.normal.clone(),Bu[1]=Pu.normal.clone(),Bu[2]=Pu.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var Cu,Tu,Pu,Bu,Lu;for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)for(Lu=this.faces[Pu],Lu.__originalFaceNormal?Lu.__originalFaceNormal.copy(Lu.normal):Lu.__originalFaceNormal=Lu.normal.clone(),Lu.__originalVertexNormals||(Lu.__originalVertexNormals=[]),Cu=0,Tu=Lu.vertexNormals.length;Cu<Tu;Cu++)Lu.__originalVertexNormals[Cu]?Lu.__originalVertexNormals[Cu].copy(Lu.vertexNormals[Cu]):Lu.__originalVertexNormals[Cu]=Lu.vertexNormals[Cu].clone();var Ru=new Geometry;for(Ru.faces=this.faces,Cu=0,Tu=this.morphTargets.length;Cu<Tu;Cu++){if(!this.morphNormals[Cu]){this.morphNormals[Cu]={},this.morphNormals[Cu].faceNormals=[],this.morphNormals[Cu].vertexNormals=[];var Ou=this.morphNormals[Cu].faceNormals,Du=this.morphNormals[Cu].vertexNormals,Fu,Nu;for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)Fu=new Vector3,Nu={a:new Vector3,b:new Vector3,c:new Vector3},Ou.push(Fu),Du.push(Nu)}var ku=this.morphNormals[Cu];Ru.vertices=this.morphTargets[Cu].vertices,Ru.computeFaceNormals(),Ru.computeVertexNormals();var Fu,Nu;for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)Lu=this.faces[Pu],Fu=ku.faceNormals[Pu],Nu=ku.vertexNormals[Pu],Fu.copy(Lu.normal),Nu.a.copy(Lu.vertexNormals[0]),Nu.b.copy(Lu.vertexNormals[1]),Nu.c.copy(Lu.vertexNormals[2])}for(Pu=0,Bu=this.faces.length;Pu<Bu;Pu++)Lu=this.faces[Pu],Lu.normal=Lu.__originalFaceNormal,Lu.vertexNormals=Lu.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(Cu,Tu,Pu){if(!(Cu&&Cu.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",Cu);return}var Bu,Lu=this.vertices.length,Ru=this.vertices,Ou=Cu.vertices,Du=this.faces,ku=Cu.faces,Fu=this.colors,Nu=Cu.colors;Pu===void 0&&(Pu=0),Tu!==void 0&&(Bu=new Matrix3().getNormalMatrix(Tu));for(var Gu=0,zu=Ou.length;Gu<zu;Gu++){var Hu=Ou[Gu],Wu=Hu.clone();Tu!==void 0&&Wu.applyMatrix4(Tu),Ru.push(Wu)}for(var Gu=0,zu=Nu.length;Gu<zu;Gu++)Fu.push(Nu[Gu].clone());for(Gu=0,zu=ku.length;Gu<zu;Gu++){var _h=ku[Gu],Xc,ju,_c,_f=_h.vertexNormals,ep=_h.vertexColors;Xc=new Face3(_h.a+Lu,_h.b+Lu,_h.c+Lu),Xc.normal.copy(_h.normal),Bu!==void 0&&Xc.normal.applyMatrix3(Bu).normalize();for(var tp=0,op=_f.length;tp<op;tp++)ju=_f[tp].clone(),Bu!==void 0&&ju.applyMatrix3(Bu).normalize(),Xc.vertexNormals.push(ju);Xc.color.copy(_h.color);for(var tp=0,op=ep.length;tp<op;tp++)_c=ep[tp],Xc.vertexColors.push(_c.clone());Xc.materialIndex=_h.materialIndex+Pu,Du.push(Xc)}for(var Gu=0,zu=Cu.faceVertexUvs.length;Gu<zu;Gu++){var lp=Cu.faceVertexUvs[Gu];this.faceVertexUvs[Gu]===void 0&&(this.faceVertexUvs[Gu]=[]);for(var tp=0,op=lp.length;tp<op;tp++){for(var up=lp[tp],hp=[],np=0,rp=up.length;np<rp;np++)hp.push(up[np].clone());this.faceVertexUvs[Gu].push(hp)}}},mergeMesh:function(Cu){if(!(Cu&&Cu.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",Cu);return}Cu.matrixAutoUpdate&&Cu.updateMatrix(),this.merge(Cu.geometry,Cu.matrix)},mergeVertices:function(){var Cu={},Tu=[],Pu=[],Bu,Lu,Ru=4,Ou=Math.pow(10,Ru),Du,ku,Fu,Nu,Gu,zu;for(Du=0,ku=this.vertices.length;Du<ku;Du++)Bu=this.vertices[Du],Lu=Math.round(Bu.x*Ou)+"_"+Math.round(Bu.y*Ou)+"_"+Math.round(Bu.z*Ou),Cu[Lu]===void 0?(Cu[Lu]=Du,Tu.push(this.vertices[Du]),Pu[Du]=Tu.length-1):Pu[Du]=Pu[Cu[Lu]];var Hu=[];for(Du=0,ku=this.faces.length;Du<ku;Du++){Fu=this.faces[Du],Fu.a=Pu[Fu.a],Fu.b=Pu[Fu.b],Fu.c=Pu[Fu.c],Nu=[Fu.a,Fu.b,Fu.c];for(var Wu=0;Wu<3;Wu++)if(Nu[Wu]===Nu[(Wu+1)%3]){Hu.push(Du);break}}for(Du=Hu.length-1;Du>=0;Du--){var _h=Hu[Du];for(this.faces.splice(_h,1),Gu=0,zu=this.faceVertexUvs.length;Gu<zu;Gu++)this.faceVertexUvs[Gu].splice(_h,1)}var Xc=this.vertices.length-Tu.length;return this.vertices=Tu,Xc},setFromPoints:function(Cu){this.vertices=[];for(var Tu=0,Pu=Cu.length;Tu<Pu;Tu++){var Bu=Cu[Tu];this.vertices.push(new Vector3(Bu.x,Bu.y,Bu.z||0))}return this},sortFacesByMaterialIndex:function(){for(var Cu=this.faces,Tu=Cu.length,Pu=0;Pu<Tu;Pu++)Cu[Pu]._id=Pu;function Bu(Fu,Nu){return Fu.materialIndex-Nu.materialIndex}Cu.sort(Bu);var Lu=this.faceVertexUvs[0],Ru=this.faceVertexUvs[1],Ou,Du;Lu&&Lu.length===Tu&&(Ou=[]),Ru&&Ru.length===Tu&&(Du=[]);for(var Pu=0;Pu<Tu;Pu++){var ku=Cu[Pu]._id;Ou&&Ou.push(Lu[ku]),Du&&Du.push(Ru[ku])}Ou&&(this.faceVertexUvs[0]=Ou),Du&&(this.faceVertexUvs[1]=Du)},toJSON:function(){var Cu={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(Cu.uuid=this.uuid,Cu.type=this.type,this.name!==""&&(Cu.name=this.name),this.parameters!==void 0){var Tu=this.parameters;for(var Pu in Tu)Tu[Pu]!==void 0&&(Cu[Pu]=Tu[Pu]);return Cu}for(var Bu=[],Lu=0;Lu<this.vertices.length;Lu++){var Ru=this.vertices[Lu];Bu.push(Ru.x,Ru.y,Ru.z)}for(var Ou=[],Du=[],ku={},Fu=[],Nu={},Gu=[],zu={},Lu=0;Lu<this.faces.length;Lu++){var Hu=this.faces[Lu],Wu=!0,_h=!1,Xc=this.faceVertexUvs[0][Lu]!==void 0,ju=Hu.normal.length()>0,_c=Hu.vertexNormals.length>0,_f=Hu.color.r!==1||Hu.color.g!==1||Hu.color.b!==1,ep=Hu.vertexColors.length>0,tp=0;if(tp=hp(tp,0,0),tp=hp(tp,1,Wu),tp=hp(tp,2,_h),tp=hp(tp,3,Xc),tp=hp(tp,4,ju),tp=hp(tp,5,_c),tp=hp(tp,6,_f),tp=hp(tp,7,ep),Ou.push(tp),Ou.push(Hu.a,Hu.b,Hu.c),Ou.push(Hu.materialIndex),Xc){var op=this.faceVertexUvs[0][Lu];Ou.push(ip(op[0]),ip(op[1]),ip(op[2]))}if(ju&&Ou.push(np(Hu.normal)),_c){var lp=Hu.vertexNormals;Ou.push(np(lp[0]),np(lp[1]),np(lp[2]))}if(_f&&Ou.push(rp(Hu.color)),ep){var up=Hu.vertexColors;Ou.push(rp(up[0]),rp(up[1]),rp(up[2]))}}function hp(ap,sp,cp){return cp?ap|1<<sp:ap&~(1<<sp)}function np(ap){var sp=ap.x.toString()+ap.y.toString()+ap.z.toString();return ku[sp]!==void 0||(ku[sp]=Du.length/3,Du.push(ap.x,ap.y,ap.z)),ku[sp]}function rp(ap){var sp=ap.r.toString()+ap.g.toString()+ap.b.toString();return Nu[sp]!==void 0||(Nu[sp]=Fu.length,Fu.push(ap.getHex())),Nu[sp]}function ip(ap){var sp=ap.x.toString()+ap.y.toString();return zu[sp]!==void 0||(zu[sp]=Gu.length/2,Gu.push(ap.x,ap.y)),zu[sp]}return Cu.data={},Cu.data.vertices=Bu,Cu.data.normals=Du,Fu.length>0&&(Cu.data.colors=Fu),Gu.length>0&&(Cu.data.uvs=[Gu]),Cu.data.faces=Ou,Cu},clone:function(){return new Geometry().copy(this)},copy:function(Cu){var Tu,Pu,Bu,Lu,Ru,Ou;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=Cu.name;var Du=Cu.vertices;for(Tu=0,Pu=Du.length;Tu<Pu;Tu++)this.vertices.push(Du[Tu].clone());var ku=Cu.colors;for(Tu=0,Pu=ku.length;Tu<Pu;Tu++)this.colors.push(ku[Tu].clone());var Fu=Cu.faces;for(Tu=0,Pu=Fu.length;Tu<Pu;Tu++)this.faces.push(Fu[Tu].clone());for(Tu=0,Pu=Cu.faceVertexUvs.length;Tu<Pu;Tu++){var Nu=Cu.faceVertexUvs[Tu];for(this.faceVertexUvs[Tu]===void 0&&(this.faceVertexUvs[Tu]=[]),Bu=0,Lu=Nu.length;Bu<Lu;Bu++){var Gu=Nu[Bu],zu=[];for(Ru=0,Ou=Gu.length;Ru<Ou;Ru++){var Hu=Gu[Ru];zu.push(Hu.clone())}this.faceVertexUvs[Tu].push(zu)}}var Wu=Cu.morphTargets;for(Tu=0,Pu=Wu.length;Tu<Pu;Tu++){var _h={};if(_h.name=Wu[Tu].name,Wu[Tu].vertices!==void 0)for(_h.vertices=[],Bu=0,Lu=Wu[Tu].vertices.length;Bu<Lu;Bu++)_h.vertices.push(Wu[Tu].vertices[Bu].clone());if(Wu[Tu].normals!==void 0)for(_h.normals=[],Bu=0,Lu=Wu[Tu].normals.length;Bu<Lu;Bu++)_h.normals.push(Wu[Tu].normals[Bu].clone());this.morphTargets.push(_h)}var Xc=Cu.morphNormals;for(Tu=0,Pu=Xc.length;Tu<Pu;Tu++){var ju={};if(Xc[Tu].vertexNormals!==void 0)for(ju.vertexNormals=[],Bu=0,Lu=Xc[Tu].vertexNormals.length;Bu<Lu;Bu++){var _c=Xc[Tu].vertexNormals[Bu],_f={};_f.a=_c.a.clone(),_f.b=_c.b.clone(),_f.c=_c.c.clone(),ju.vertexNormals.push(_f)}if(Xc[Tu].faceNormals!==void 0)for(ju.faceNormals=[],Bu=0,Lu=Xc[Tu].faceNormals.length;Bu<Lu;Bu++)ju.faceNormals.push(Xc[Tu].faceNormals[Bu].clone());this.morphNormals.push(ju)}var ep=Cu.skinWeights;for(Tu=0,Pu=ep.length;Tu<Pu;Tu++)this.skinWeights.push(ep[Tu].clone());var tp=Cu.skinIndices;for(Tu=0,Pu=tp.length;Tu<Pu;Tu++)this.skinIndices.push(tp[Tu].clone());var op=Cu.lineDistances;for(Tu=0,Pu=op.length;Tu<Pu;Tu++)this.lineDistances.push(op[Tu]);var lp=Cu.boundingBox;lp!==null&&(this.boundingBox=lp.clone());var up=Cu.boundingSphere;return up!==null&&(this.boundingSphere=up.clone()),this.elementsNeedUpdate=Cu.elementsNeedUpdate,this.verticesNeedUpdate=Cu.verticesNeedUpdate,this.uvsNeedUpdate=Cu.uvsNeedUpdate,this.normalsNeedUpdate=Cu.normalsNeedUpdate,this.colorsNeedUpdate=Cu.colorsNeedUpdate,this.lineDistancesNeedUpdate=Cu.lineDistancesNeedUpdate,this.groupsNeedUpdate=Cu.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(Tu,Pu,Bu,Lu,Ru,Ou){super(),this.type="BoxGeometry",this.parameters={width:Tu,height:Pu,depth:Bu,widthSegments:Lu,heightSegments:Ru,depthSegments:Ou},this.fromBufferGeometry(new BoxBufferGeometry(Tu,Pu,Bu,Lu,Ru,Ou)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(Tu,Pu,Bu,Lu,Ru,Ou){super(),this.type="BoxBufferGeometry",this.parameters={width:Tu,height:Pu,depth:Bu,widthSegments:Lu,heightSegments:Ru,depthSegments:Ou};const Du=this;Tu=Tu||1,Pu=Pu||1,Bu=Bu||1,Lu=Math.floor(Lu)||1,Ru=Math.floor(Ru)||1,Ou=Math.floor(Ou)||1;const ku=[],Fu=[],Nu=[],Gu=[];let zu=0,Hu=0;Wu("z","y","x",-1,-1,Bu,Pu,Tu,Ou,Ru,0),Wu("z","y","x",1,-1,Bu,Pu,-Tu,Ou,Ru,1),Wu("x","z","y",1,1,Tu,Bu,Pu,Lu,Ou,2),Wu("x","z","y",1,-1,Tu,Bu,-Pu,Lu,Ou,3),Wu("x","y","z",1,-1,Tu,Pu,Bu,Lu,Ru,4),Wu("x","y","z",-1,-1,Tu,Pu,-Bu,Lu,Ru,5),this.setIndex(ku),this.setAttribute("position",new Float32BufferAttribute(Fu,3)),this.setAttribute("normal",new Float32BufferAttribute(Nu,3)),this.setAttribute("uv",new Float32BufferAttribute(Gu,2));function Wu(_h,Xc,ju,_c,_f,ep,tp,op,lp,up,hp){const np=ep/lp,rp=tp/up,ip=ep/2,ap=tp/2,sp=op/2,cp=lp+1,dp=up+1;let fp=0,vp=0;const _p=new Vector3;for(let wp=0;wp<dp;wp++){const Dp=wp*rp-ap;for(let Pp=0;Pp<cp;Pp++){const Wp=Pp*np-ip;_p[_h]=Wp*_c,_p[Xc]=Dp*_f,_p[ju]=sp,Fu.push(_p.x,_p.y,_p.z),_p[_h]=0,_p[Xc]=0,_p[ju]=op>0?1:-1,Nu.push(_p.x,_p.y,_p.z),Gu.push(Pp/lp),Gu.push(1-wp/up),fp+=1}}for(let wp=0;wp<up;wp++)for(let Dp=0;Dp<lp;Dp++){const Pp=zu+Dp+cp*wp,Wp=zu+Dp+cp*(wp+1),Rp=zu+(Dp+1)+cp*(wp+1),Gp=zu+(Dp+1)+cp*wp;ku.push(Pp,Wp,Gp),ku.push(Wp,Rp,Gp),vp+=6}Du.addGroup(Hu,vp,hp),Hu+=vp,zu+=fp}}}function cloneUniforms(Cu){var Tu={};for(var Pu in Cu){Tu[Pu]={};for(var Bu in Cu[Pu]){var Lu=Cu[Pu][Bu];Lu&&(Lu.isColor||Lu.isMatrix3||Lu.isMatrix4||Lu.isVector2||Lu.isVector3||Lu.isVector4||Lu.isTexture)?Tu[Pu][Bu]=Lu.clone():Array.isArray(Lu)?Tu[Pu][Bu]=Lu.slice():Tu[Pu][Bu]=Lu}}return Tu}function mergeUniforms(Cu){for(var Tu={},Pu=0;Pu<Cu.length;Pu++){var Bu=cloneUniforms(Cu[Pu]);for(var Lu in Bu)Tu[Lu]=Bu[Lu]}return Tu}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(Cu){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,Cu!==void 0&&(Cu.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(Cu))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.fragmentShader=Cu.fragmentShader,this.vertexShader=Cu.vertexShader,this.uniforms=cloneUniforms(Cu.uniforms),this.defines=Object.assign({},Cu.defines),this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.lights=Cu.lights,this.clipping=Cu.clipping,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this.extensions=Object.assign({},Cu.extensions),this};ShaderMaterial.prototype.toJSON=function(Cu){var Tu=Material.prototype.toJSON.call(this,Cu);Tu.uniforms={};for(var Pu in this.uniforms){var Bu=this.uniforms[Pu],Lu=Bu.value;Lu&&Lu.isTexture?Tu.uniforms[Pu]={type:"t",value:Lu.toJSON(Cu).uuid}:Lu&&Lu.isColor?Tu.uniforms[Pu]={type:"c",value:Lu.getHex()}:Lu&&Lu.isVector2?Tu.uniforms[Pu]={type:"v2",value:Lu.toArray()}:Lu&&Lu.isVector3?Tu.uniforms[Pu]={type:"v3",value:Lu.toArray()}:Lu&&Lu.isVector4?Tu.uniforms[Pu]={type:"v4",value:Lu.toArray()}:Lu&&Lu.isMatrix3?Tu.uniforms[Pu]={type:"m3",value:Lu.toArray()}:Lu&&Lu.isMatrix4?Tu.uniforms[Pu]={type:"m4",value:Lu.toArray()}:Tu.uniforms[Pu]={value:Lu}}Object.keys(this.defines).length>0&&(Tu.defines=this.defines),Tu.vertexShader=this.vertexShader,Tu.fragmentShader=this.fragmentShader;var Ru={};for(var Ou in this.extensions)this.extensions[Ou]===!0&&(Ru[Ou]=!0);return Object.keys(Ru).length>0&&(Tu.extensions=Ru),Tu};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(Cu,Tu){return Object3D.prototype.copy.call(this,Cu,Tu),this.matrixWorldInverse.copy(Cu.matrixWorldInverse),this.projectionMatrix.copy(Cu.projectionMatrix),this.projectionMatrixInverse.copy(Cu.projectionMatrixInverse),this},getWorldDirection:function(Cu){Cu===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),Cu=new Vector3),this.updateMatrixWorld(!0);var Tu=this.matrixWorld.elements;return Cu.set(-Tu[8],-Tu[9],-Tu[10]).normalize()},updateMatrixWorld:function(Cu){Object3D.prototype.updateMatrixWorld.call(this,Cu),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(Cu,Tu){Object3D.prototype.updateWorldMatrix.call(this,Cu,Tu),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(Cu,Tu,Pu,Bu){Camera.call(this),this.type="PerspectiveCamera",this.fov=Cu!==void 0?Cu:50,this.zoom=1,this.near=Pu!==void 0?Pu:.1,this.far=Bu!==void 0?Bu:2e3,this.focus=10,this.aspect=Tu!==void 0?Tu:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(Cu,Tu){return Camera.prototype.copy.call(this,Cu,Tu),this.fov=Cu.fov,this.zoom=Cu.zoom,this.near=Cu.near,this.far=Cu.far,this.focus=Cu.focus,this.aspect=Cu.aspect,this.view=Cu.view===null?null:Object.assign({},Cu.view),this.filmGauge=Cu.filmGauge,this.filmOffset=Cu.filmOffset,this},setFocalLength:function(Cu){var Tu=.5*this.getFilmHeight()/Cu;this.fov=MathUtils.RAD2DEG*2*Math.atan(Tu),this.updateProjectionMatrix()},getFocalLength:function(){var Cu=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/Cu},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(Cu,Tu,Pu,Bu,Lu,Ru){this.aspect=Cu/Tu,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=Cu,this.view.fullHeight=Tu,this.view.offsetX=Pu,this.view.offsetY=Bu,this.view.width=Lu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Cu=this.near,Tu=Cu*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,Pu=2*Tu,Bu=this.aspect*Pu,Lu=-.5*Bu,Ru=this.view;if(this.view!==null&&this.view.enabled){var Ou=Ru.fullWidth,Du=Ru.fullHeight;Lu+=Ru.offsetX*Bu/Ou,Tu-=Ru.offsetY*Pu/Du,Bu*=Ru.width/Ou,Pu*=Ru.height/Du}var ku=this.filmOffset;ku!==0&&(Lu+=Cu*ku/this.getFilmWidth()),this.projectionMatrix.makePerspective(Lu,Lu+Bu,Tu,Tu-Pu,Cu,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(Cu){var Tu=Object3D.prototype.toJSON.call(this,Cu);return Tu.object.fov=this.fov,Tu.object.zoom=this.zoom,Tu.object.near=this.near,Tu.object.far=this.far,Tu.object.focus=this.focus,Tu.object.aspect=this.aspect,this.view!==null&&(Tu.object.view=Object.assign({},this.view)),Tu.object.filmGauge=this.filmGauge,Tu.object.filmOffset=this.filmOffset,Tu}});var fov=90,aspect=1;function CubeCamera(Cu,Tu,Pu){if(Object3D.call(this),this.type="CubeCamera",Pu.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=Pu;var Bu=new PerspectiveCamera(fov,aspect,Cu,Tu);Bu.layers=this.layers,Bu.up.set(0,-1,0),Bu.lookAt(new Vector3(1,0,0)),this.add(Bu);var Lu=new PerspectiveCamera(fov,aspect,Cu,Tu);Lu.layers=this.layers,Lu.up.set(0,-1,0),Lu.lookAt(new Vector3(-1,0,0)),this.add(Lu);var Ru=new PerspectiveCamera(fov,aspect,Cu,Tu);Ru.layers=this.layers,Ru.up.set(0,0,1),Ru.lookAt(new Vector3(0,1,0)),this.add(Ru);var Ou=new PerspectiveCamera(fov,aspect,Cu,Tu);Ou.layers=this.layers,Ou.up.set(0,0,-1),Ou.lookAt(new Vector3(0,-1,0)),this.add(Ou);var Du=new PerspectiveCamera(fov,aspect,Cu,Tu);Du.layers=this.layers,Du.up.set(0,-1,0),Du.lookAt(new Vector3(0,0,1)),this.add(Du);var ku=new PerspectiveCamera(fov,aspect,Cu,Tu);ku.layers=this.layers,ku.up.set(0,-1,0),ku.lookAt(new Vector3(0,0,-1)),this.add(ku),this.update=function(Fu,Nu){this.parent===null&&this.updateMatrixWorld();var Gu=Fu.xr.enabled,zu=Fu.getRenderTarget();Fu.xr.enabled=!1;var Hu=Pu.texture.generateMipmaps;Pu.texture.generateMipmaps=!1,Fu.setRenderTarget(Pu,0),Fu.render(Nu,Bu),Fu.setRenderTarget(Pu,1),Fu.render(Nu,Lu),Fu.setRenderTarget(Pu,2),Fu.render(Nu,Ru),Fu.setRenderTarget(Pu,3),Fu.render(Nu,Ou),Fu.setRenderTarget(Pu,4),Fu.render(Nu,Du),Pu.texture.generateMipmaps=Hu,Fu.setRenderTarget(Pu,5),Fu.render(Nu,ku),Fu.setRenderTarget(zu),Fu.xr.enabled=Gu},this.clear=function(Fu,Nu,Gu,zu){for(var Hu=Fu.getRenderTarget(),Wu=0;Wu<6;Wu++)Fu.setRenderTarget(Pu,Wu),Fu.clear(Nu,Gu,zu);Fu.setRenderTarget(Hu)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(Cu,Tu,Pu){Number.isInteger(Tu)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),Tu=Pu),WebGLRenderTarget.call(this,Cu,Cu,Tu)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(Cu,Tu){this.texture.type=Tu.type,this.texture.format=Tu.format,this.texture.encoding=Tu.encoding;var Pu=new Scene,Bu={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Lu=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Bu.uniforms),vertexShader:Bu.vertexShader,fragmentShader:Bu.fragmentShader,side:BackSide,blending:NoBlending});Lu.uniforms.tEquirect.value=Tu;var Ru=new Mesh(new BoxBufferGeometry(5,5,5),Lu);Pu.add(Ru);var Ou=new CubeCamera(1,10,this);return Ou.update(Cu,Pu),Ru.geometry.dispose(),Ru.material.dispose(),this};function DataTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu){Texture.call(this,null,Ru,Ou,Du,ku,Fu,Bu,Lu,Nu,Gu),this.image={data:Cu||null,width:Tu||1,height:Pu||1},this.magFilter=ku!==void 0?ku:NearestFilter,this.minFilter=Fu!==void 0?Fu:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(Cu,Tu,Pu,Bu,Lu,Ru){this.planes=[Cu!==void 0?Cu:new Plane,Tu!==void 0?Tu:new Plane,Pu!==void 0?Pu:new Plane,Bu!==void 0?Bu:new Plane,Lu!==void 0?Lu:new Plane,Ru!==void 0?Ru:new Plane]}Object.assign(Frustum.prototype,{set:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=this.planes;return Ou[0].copy(Cu),Ou[1].copy(Tu),Ou[2].copy(Pu),Ou[3].copy(Bu),Ou[4].copy(Lu),Ou[5].copy(Ru),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){for(var Tu=this.planes,Pu=0;Pu<6;Pu++)Tu[Pu].copy(Cu.planes[Pu]);return this},setFromProjectionMatrix:function(Cu){var Tu=this.planes,Pu=Cu.elements,Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Gu=Pu[8],zu=Pu[9],Hu=Pu[10],Wu=Pu[11],_h=Pu[12],Xc=Pu[13],ju=Pu[14],_c=Pu[15];return Tu[0].setComponents(Ou-Bu,Nu-Du,Wu-Gu,_c-_h).normalize(),Tu[1].setComponents(Ou+Bu,Nu+Du,Wu+Gu,_c+_h).normalize(),Tu[2].setComponents(Ou+Lu,Nu+ku,Wu+zu,_c+Xc).normalize(),Tu[3].setComponents(Ou-Lu,Nu-ku,Wu-zu,_c-Xc).normalize(),Tu[4].setComponents(Ou-Ru,Nu-Fu,Wu-Hu,_c-ju).normalize(),Tu[5].setComponents(Ou+Ru,Nu+Fu,Wu+Hu,_c+ju).normalize(),this},intersectsObject:function(Cu){var Tu=Cu.geometry;return Tu.boundingSphere===null&&Tu.computeBoundingSphere(),_sphere$1.copy(Tu.boundingSphere).applyMatrix4(Cu.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(Cu){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(Cu.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(Cu){for(var Tu=this.planes,Pu=Cu.center,Bu=-Cu.radius,Lu=0;Lu<6;Lu++){var Ru=Tu[Lu].distanceToPoint(Pu);if(Ru<Bu)return!1}return!0},intersectsBox:function(Cu){for(var Tu=this.planes,Pu=0;Pu<6;Pu++){var Bu=Tu[Pu];if(_vector$5.x=Bu.normal.x>0?Cu.max.x:Cu.min.x,_vector$5.y=Bu.normal.y>0?Cu.max.y:Cu.min.y,_vector$5.z=Bu.normal.z>0?Cu.max.z:Cu.min.z,Bu.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(Cu){for(var Tu=this.planes,Pu=0;Pu<6;Pu++)if(Tu[Pu].distanceToPoint(Cu)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var Cu=null,Tu=!1,Pu=null;function Bu(Lu,Ru){Tu!==!1&&(Pu(Lu,Ru),Cu.requestAnimationFrame(Bu))}return{start:function(){Tu!==!0&&Pu!==null&&(Cu.requestAnimationFrame(Bu),Tu=!0)},stop:function(){Tu=!1},setAnimationLoop:function(Lu){Pu=Lu},setContext:function(Lu){Cu=Lu}}}function WebGLAttributes(Cu,Tu){var Pu=Tu.isWebGL2,Bu=new WeakMap;function Lu(Fu,Nu){var Gu=Fu.array,zu=Fu.usage,Hu=Cu.createBuffer();Cu.bindBuffer(Nu,Hu),Cu.bufferData(Nu,Gu,zu),Fu.onUploadCallback();var Wu=5126;return Gu instanceof Float32Array?Wu=5126:Gu instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Gu instanceof Uint16Array?Wu=5123:Gu instanceof Int16Array?Wu=5122:Gu instanceof Uint32Array?Wu=5125:Gu instanceof Int32Array?Wu=5124:Gu instanceof Int8Array?Wu=5120:Gu instanceof Uint8Array&&(Wu=5121),{buffer:Hu,type:Wu,bytesPerElement:Gu.BYTES_PER_ELEMENT,version:Fu.version}}function Ru(Fu,Nu,Gu){var zu=Nu.array,Hu=Nu.updateRange;Cu.bindBuffer(Gu,Fu),Hu.count===-1?Cu.bufferSubData(Gu,0,zu):(Pu?Cu.bufferSubData(Gu,Hu.offset*zu.BYTES_PER_ELEMENT,zu,Hu.offset,Hu.count):Cu.bufferSubData(Gu,Hu.offset*zu.BYTES_PER_ELEMENT,zu.subarray(Hu.offset,Hu.offset+Hu.count)),Hu.count=-1)}function Ou(Fu){return Fu.isInterleavedBufferAttribute&&(Fu=Fu.data),Bu.get(Fu)}function Du(Fu){Fu.isInterleavedBufferAttribute&&(Fu=Fu.data);var Nu=Bu.get(Fu);Nu&&(Cu.deleteBuffer(Nu.buffer),Bu.delete(Fu))}function ku(Fu,Nu){Fu.isInterleavedBufferAttribute&&(Fu=Fu.data);var Gu=Bu.get(Fu);Gu===void 0?Bu.set(Fu,Lu(Fu,Nu)):Gu.version<Fu.version&&(Ru(Gu.buffer,Fu,Nu),Gu.version=Fu.version)}return{get:Ou,remove:Du,update:ku}}function PlaneGeometry(Cu,Tu,Pu,Bu){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:Cu,height:Tu,widthSegments:Pu,heightSegments:Bu},this.fromBufferGeometry(new PlaneBufferGeometry(Cu,Tu,Pu,Bu)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(Cu,Tu,Pu,Bu){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:Cu,height:Tu,widthSegments:Pu,heightSegments:Bu},Cu=Cu||1,Tu=Tu||1;var Lu=Cu/2,Ru=Tu/2,Ou=Math.floor(Pu)||1,Du=Math.floor(Bu)||1,ku=Ou+1,Fu=Du+1,Nu=Cu/Ou,Gu=Tu/Du,zu,Hu,Wu=[],_h=[],Xc=[],ju=[];for(Hu=0;Hu<Fu;Hu++){var _c=Hu*Gu-Ru;for(zu=0;zu<ku;zu++){var _f=zu*Nu-Lu;_h.push(_f,-_c,0),Xc.push(0,0,1),ju.push(zu/Ou),ju.push(1-Hu/Du)}}for(Hu=0;Hu<Du;Hu++)for(zu=0;zu<Ou;zu++){var ep=zu+ku*Hu,tp=zu+ku*(Hu+1),op=zu+1+ku*(Hu+1),lp=zu+1+ku*Hu;Wu.push(ep,tp,lp),Wu.push(tp,op,lp)}this.setIndex(Wu),this.setAttribute("position",new Float32BufferAttribute(_h,3)),this.setAttribute("normal",new Float32BufferAttribute(Xc,3)),this.setAttribute("uv",new Float32BufferAttribute(ju,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(Cu,Tu,Pu,Bu){var Lu=new Color(0),Ru=0,Ou,Du,ku=null,Fu=0,Nu=null;function Gu(Hu,Wu,_h,Xc){var ju=Wu.background,_c=Cu.xr,_f=_c.getSession&&_c.getSession();if(_f&&_f.environmentBlendMode==="additive"&&(ju=null),ju===null?zu(Lu,Ru):ju&&ju.isColor&&(zu(ju,1),Xc=!0),(Cu.autoClear||Xc)&&Cu.clear(Cu.autoClearColor,Cu.autoClearDepth,Cu.autoClearStencil),ju&&(ju.isCubeTexture||ju.isWebGLCubeRenderTarget||ju.mapping===CubeUVReflectionMapping)){Du===void 0&&(Du=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Du.geometry.deleteAttribute("normal"),Du.geometry.deleteAttribute("uv"),Du.onBeforeRender=function(tp,op,lp){this.matrixWorld.copyPosition(lp.matrixWorld)},Object.defineProperty(Du.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Pu.update(Du));var ep=ju.isWebGLCubeRenderTarget?ju.texture:ju;Du.material.uniforms.envMap.value=ep,Du.material.uniforms.flipEnvMap.value=ep.isCubeTexture?-1:1,(ku!==ju||Fu!==ep.version||Nu!==Cu.toneMapping)&&(Du.material.needsUpdate=!0,ku=ju,Fu=ep.version,Nu=Cu.toneMapping),Hu.unshift(Du,Du.geometry,Du.material,0,0,null)}else ju&&ju.isTexture&&(Ou===void 0&&(Ou=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ou.geometry.deleteAttribute("normal"),Object.defineProperty(Ou.material,"map",{get:function(){return this.uniforms.t2D.value}}),Pu.update(Ou)),Ou.material.uniforms.t2D.value=ju,ju.matrixAutoUpdate===!0&&ju.updateMatrix(),Ou.material.uniforms.uvTransform.value.copy(ju.matrix),(ku!==ju||Fu!==ju.version||Nu!==Cu.toneMapping)&&(Ou.material.needsUpdate=!0,ku=ju,Fu=ju.version,Nu=Cu.toneMapping),Hu.unshift(Ou,Ou.geometry,Ou.material,0,0,null))}function zu(Hu,Wu){Tu.buffers.color.setClear(Hu.r,Hu.g,Hu.b,Wu,Bu)}return{getClearColor:function(){return Lu},setClearColor:function(Hu,Wu){Lu.set(Hu),Ru=Wu!==void 0?Wu:1,zu(Lu,Ru)},getClearAlpha:function(){return Ru},setClearAlpha:function(Hu){Ru=Hu,zu(Lu,Ru)},render:Gu}}function WebGLBufferRenderer(Cu,Tu,Pu,Bu){var Lu=Bu.isWebGL2,Ru;function Ou(Fu){Ru=Fu}function Du(Fu,Nu){Cu.drawArrays(Ru,Fu,Nu),Pu.update(Nu,Ru)}function ku(Fu,Nu,Gu,zu){if(zu!==0){var Hu,Wu;if(Lu)Hu=Cu,Wu="drawArraysInstanced";else if(Hu=Tu.get("ANGLE_instanced_arrays"),Wu="drawArraysInstancedANGLE",Hu===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Hu[Wu](Ru,Nu,Gu,zu),Pu.update(Gu,Ru,zu)}}this.setMode=Ou,this.render=Du,this.renderInstances=ku}function WebGLCapabilities(Cu,Tu,Pu){var Bu;function Lu(){if(Bu!==void 0)return Bu;var op=Tu.get("EXT_texture_filter_anisotropic");return op!==null?Bu=Cu.getParameter(op.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Bu=0,Bu}function Ru(op){if(op==="highp"){if(Cu.getShaderPrecisionFormat(35633,36338).precision>0&&Cu.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";op="mediump"}return op==="mediump"&&Cu.getShaderPrecisionFormat(35633,36337).precision>0&&Cu.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Ou=typeof WebGL2RenderingContext!="undefined"&&Cu instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&Cu instanceof WebGL2ComputeRenderingContext,Du=Pu.precision!==void 0?Pu.precision:"highp",ku=Ru(Du);ku!==Du&&(console.warn("THREE.WebGLRenderer:",Du,"not supported, using",ku,"instead."),Du=ku);var Fu=Pu.logarithmicDepthBuffer===!0,Nu=Cu.getParameter(34930),Gu=Cu.getParameter(35660),zu=Cu.getParameter(3379),Hu=Cu.getParameter(34076),Wu=Cu.getParameter(34921),_h=Cu.getParameter(36347),Xc=Cu.getParameter(36348),ju=Cu.getParameter(36349),_c=Gu>0,_f=Ou||!!Tu.get("OES_texture_float"),ep=_c&&_f,tp=Ou?Cu.getParameter(36183):0;return{isWebGL2:Ou,getMaxAnisotropy:Lu,getMaxPrecision:Ru,precision:Du,logarithmicDepthBuffer:Fu,maxTextures:Nu,maxVertexTextures:Gu,maxTextureSize:zu,maxCubemapSize:Hu,maxAttributes:Wu,maxVertexUniforms:_h,maxVaryings:Xc,maxFragmentUniforms:ju,vertexTextures:_c,floatFragmentTextures:_f,floatVertexTextures:ep,maxSamples:tp}}function WebGLClipping(){var Cu=this,Tu=null,Pu=0,Bu=!1,Lu=!1,Ru=new Plane,Ou=new Matrix3,Du={value:null,needsUpdate:!1};this.uniform=Du,this.numPlanes=0,this.numIntersection=0,this.init=function(Nu,Gu,zu){var Hu=Nu.length!==0||Gu||Pu!==0||Bu;return Bu=Gu,Tu=Fu(Nu,zu,0),Pu=Nu.length,Hu},this.beginShadows=function(){Lu=!0,Fu(null)},this.endShadows=function(){Lu=!1,ku()},this.setState=function(Nu,Gu,zu,Hu,Wu,_h){if(!Bu||Nu===null||Nu.length===0||Lu&&!zu)Lu?Fu(null):ku();else{var Xc=Lu?0:Pu,ju=Xc*4,_c=Wu.clippingState||null;Du.value=_c,_c=Fu(Nu,Hu,ju,_h);for(var _f=0;_f!==ju;++_f)_c[_f]=Tu[_f];Wu.clippingState=_c,this.numIntersection=Gu?this.numPlanes:0,this.numPlanes+=Xc}};function ku(){Du.value!==Tu&&(Du.value=Tu,Du.needsUpdate=Pu>0),Cu.numPlanes=Pu,Cu.numIntersection=0}function Fu(Nu,Gu,zu,Hu){var Wu=Nu!==null?Nu.length:0,_h=null;if(Wu!==0){if(_h=Du.value,Hu!==!0||_h===null){var Xc=zu+Wu*4,ju=Gu.matrixWorldInverse;Ou.getNormalMatrix(ju),(_h===null||_h.length<Xc)&&(_h=new Float32Array(Xc));for(var _c=0,_f=zu;_c!==Wu;++_c,_f+=4)Ru.copy(Nu[_c]).applyMatrix4(ju,Ou),Ru.normal.toArray(_h,_f),_h[_f+3]=Ru.constant}Du.value=_h,Du.needsUpdate=!0}return Cu.numPlanes=Wu,Cu.numIntersection=0,_h}}function WebGLExtensions(Cu){var Tu={};return{get:function(Pu){if(Tu[Pu]!==void 0)return Tu[Pu];var Bu;switch(Pu){case"WEBGL_depth_texture":Bu=Cu.getExtension("WEBGL_depth_texture")||Cu.getExtension("MOZ_WEBGL_depth_texture")||Cu.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Bu=Cu.getExtension("EXT_texture_filter_anisotropic")||Cu.getExtension("MOZ_EXT_texture_filter_anisotropic")||Cu.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Bu=Cu.getExtension("WEBGL_compressed_texture_s3tc")||Cu.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Cu.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Bu=Cu.getExtension("WEBGL_compressed_texture_pvrtc")||Cu.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Bu=Cu.getExtension(Pu)}return Bu===null&&console.warn("THREE.WebGLRenderer: "+Pu+" extension not supported."),Tu[Pu]=Bu,Bu}}}function WebGLGeometries(Cu,Tu,Pu){var Bu=new WeakMap,Lu=new WeakMap;function Ru(Nu){var Gu=Nu.target,zu=Bu.get(Gu);zu.index!==null&&Tu.remove(zu.index);for(var Hu in zu.attributes)Tu.remove(zu.attributes[Hu]);Gu.removeEventListener("dispose",Ru),Bu.delete(Gu);var Wu=Lu.get(zu);Wu&&(Tu.remove(Wu),Lu.delete(zu)),Pu.memory.geometries--}function Ou(Nu,Gu){var zu=Bu.get(Gu);return zu||(Gu.addEventListener("dispose",Ru),Gu.isBufferGeometry?zu=Gu:Gu.isGeometry&&(Gu._bufferGeometry===void 0&&(Gu._bufferGeometry=new BufferGeometry().setFromObject(Nu)),zu=Gu._bufferGeometry),Bu.set(Gu,zu),Pu.memory.geometries++,zu)}function Du(Nu){var Gu=Nu.index,zu=Nu.attributes;Gu!==null&&Tu.update(Gu,34963);for(var Hu in zu)Tu.update(zu[Hu],34962);var Wu=Nu.morphAttributes;for(var Hu in Wu)for(var _h=Wu[Hu],Xc=0,ju=_h.length;Xc<ju;Xc++)Tu.update(_h[Xc],34962)}function ku(Nu){var Gu=[],zu=Nu.index,Hu=Nu.attributes.position,Wu=0;if(zu!==null){var _h=zu.array;Wu=zu.version;for(var Xc=0,ju=_h.length;Xc<ju;Xc+=3){var _c=_h[Xc+0],_f=_h[Xc+1],ep=_h[Xc+2];Gu.push(_c,_f,_f,ep,ep,_c)}}else{var _h=Hu.array;Wu=Hu.version;for(var Xc=0,ju=_h.length/3-1;Xc<ju;Xc+=3){var _c=Xc+0,_f=Xc+1,ep=Xc+2;Gu.push(_c,_f,_f,ep,ep,_c)}}var tp=new(arrayMax(Gu)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Gu,1);tp.version=Wu,Tu.update(tp,34963);var op=Lu.get(Nu);op&&Tu.remove(op),Lu.set(Nu,tp)}function Fu(Nu){var Gu=Lu.get(Nu);if(Gu){var zu=Nu.index;zu!==null&&Gu.version<zu.version&&ku(Nu)}else ku(Nu);return Lu.get(Nu)}return{get:Ou,update:Du,getWireframeAttribute:Fu}}function WebGLIndexedBufferRenderer(Cu,Tu,Pu,Bu){var Lu=Bu.isWebGL2,Ru;function Ou(zu){Ru=zu}var Du,ku;function Fu(zu){Du=zu.type,ku=zu.bytesPerElement}function Nu(zu,Hu){Cu.drawElements(Ru,Hu,Du,zu*ku),Pu.update(Hu,Ru)}function Gu(zu,Hu,Wu,_h){if(_h!==0){var Xc,ju;if(Lu)Xc=Cu,ju="drawElementsInstanced";else if(Xc=Tu.get("ANGLE_instanced_arrays"),ju="drawElementsInstancedANGLE",Xc===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Xc[ju](Ru,Wu,Du,Hu*ku,_h),Pu.update(Wu,Ru,_h)}}this.setMode=Ou,this.setIndex=Fu,this.render=Nu,this.renderInstances=Gu}function WebGLInfo(Cu){var Tu={geometries:0,textures:0},Pu={frame:0,calls:0,triangles:0,points:0,lines:0};function Bu(Ru,Ou,Du){switch(Du=Du||1,Pu.calls++,Ou){case 4:Pu.triangles+=Du*(Ru/3);break;case 1:Pu.lines+=Du*(Ru/2);break;case 3:Pu.lines+=Du*(Ru-1);break;case 2:Pu.lines+=Du*Ru;break;case 0:Pu.points+=Du*Ru;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ou);break}}function Lu(){Pu.frame++,Pu.calls=0,Pu.triangles=0,Pu.points=0,Pu.lines=0}return{memory:Tu,render:Pu,programs:null,autoReset:!0,reset:Lu,update:Bu}}function absNumericalSort(Cu,Tu){return Math.abs(Tu[1])-Math.abs(Cu[1])}function WebGLMorphtargets(Cu){var Tu={},Pu=new Float32Array(8);function Bu(Lu,Ru,Ou,Du){var ku=Lu.morphTargetInfluences,Fu=ku===void 0?0:ku.length,Nu=Tu[Ru.id];if(Nu===void 0){Nu=[];for(var Gu=0;Gu<Fu;Gu++)Nu[Gu]=[Gu,0];Tu[Ru.id]=Nu}for(var zu=Ou.morphTargets&&Ru.morphAttributes.position,Hu=Ou.morphNormals&&Ru.morphAttributes.normal,Gu=0;Gu<Fu;Gu++){var Wu=Nu[Gu];Wu[1]!==0&&(zu&&Ru.deleteAttribute("morphTarget"+Gu),Hu&&Ru.deleteAttribute("morphNormal"+Gu))}for(var Gu=0;Gu<Fu;Gu++){var Wu=Nu[Gu];Wu[0]=Gu,Wu[1]=ku[Gu]}Nu.sort(absNumericalSort);for(var _h=0,Gu=0;Gu<8;Gu++){var Wu=Nu[Gu];if(Wu){var Xc=Wu[0],ju=Wu[1];if(ju){zu&&Ru.setAttribute("morphTarget"+Gu,zu[Xc]),Hu&&Ru.setAttribute("morphNormal"+Gu,Hu[Xc]),Pu[Gu]=ju,_h+=ju;continue}}Pu[Gu]=0}var _c=Ru.morphTargetsRelative?1:1-_h;Du.getUniforms().setValue(Cu,"morphTargetBaseInfluence",_c),Du.getUniforms().setValue(Cu,"morphTargetInfluences",Pu)}return{update:Bu}}function WebGLObjects(Cu,Tu,Pu,Bu){var Lu=new WeakMap;function Ru(Du){var ku=Bu.render.frame,Fu=Du.geometry,Nu=Tu.get(Du,Fu);return Lu.get(Nu)!==ku&&(Fu.isGeometry&&Nu.updateFromObject(Du),Tu.update(Nu),Lu.set(Nu,ku)),Du.isInstancedMesh&&Pu.update(Du.instanceMatrix,34962),Nu}function Ou(){Lu=new WeakMap}return{update:Ru,dispose:Ou}}function CubeTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu){Cu=Cu!==void 0?Cu:[],Tu=Tu!==void 0?Tu:CubeReflectionMapping,Ou=Ou!==void 0?Ou:RGBFormat,Texture.call(this,Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(Cu){this.image=Cu}});function DataTexture2DArray(Cu,Tu,Pu,Bu){Texture.call(this,null),this.image={data:Cu||null,width:Tu||1,height:Pu||1,depth:Bu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(Cu,Tu,Pu,Bu){Texture.call(this,null),this.image={data:Cu||null,width:Tu||1,height:Pu||1,depth:Bu||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(Cu,Tu,Pu){var Bu=Cu[0];if(Bu<=0||Bu>0)return Cu;var Lu=Tu*Pu,Ru=arrayCacheF32[Lu];if(Ru===void 0&&(Ru=new Float32Array(Lu),arrayCacheF32[Lu]=Ru),Tu!==0){Bu.toArray(Ru,0);for(var Ou=1,Du=0;Ou!==Tu;++Ou)Du+=Pu,Cu[Ou].toArray(Ru,Du)}return Ru}function arraysEqual(Cu,Tu){if(Cu.length!==Tu.length)return!1;for(var Pu=0,Bu=Cu.length;Pu<Bu;Pu++)if(Cu[Pu]!==Tu[Pu])return!1;return!0}function copyArray(Cu,Tu){for(var Pu=0,Bu=Tu.length;Pu<Bu;Pu++)Cu[Pu]=Tu[Pu]}function allocTexUnits(Cu,Tu){var Pu=arrayCacheI32[Tu];Pu===void 0&&(Pu=new Int32Array(Tu),arrayCacheI32[Tu]=Pu);for(var Bu=0;Bu!==Tu;++Bu)Pu[Bu]=Cu.allocateTextureUnit();return Pu}function setValueV1f(Cu,Tu){var Pu=this.cache;Pu[0]!==Tu&&(Cu.uniform1f(this.addr,Tu),Pu[0]=Tu)}function setValueV2f(Cu,Tu){var Pu=this.cache;if(Tu.x!==void 0)(Pu[0]!==Tu.x||Pu[1]!==Tu.y)&&(Cu.uniform2f(this.addr,Tu.x,Tu.y),Pu[0]=Tu.x,Pu[1]=Tu.y);else{if(arraysEqual(Pu,Tu))return;Cu.uniform2fv(this.addr,Tu),copyArray(Pu,Tu)}}function setValueV3f(Cu,Tu){var Pu=this.cache;if(Tu.x!==void 0)(Pu[0]!==Tu.x||Pu[1]!==Tu.y||Pu[2]!==Tu.z)&&(Cu.uniform3f(this.addr,Tu.x,Tu.y,Tu.z),Pu[0]=Tu.x,Pu[1]=Tu.y,Pu[2]=Tu.z);else if(Tu.r!==void 0)(Pu[0]!==Tu.r||Pu[1]!==Tu.g||Pu[2]!==Tu.b)&&(Cu.uniform3f(this.addr,Tu.r,Tu.g,Tu.b),Pu[0]=Tu.r,Pu[1]=Tu.g,Pu[2]=Tu.b);else{if(arraysEqual(Pu,Tu))return;Cu.uniform3fv(this.addr,Tu),copyArray(Pu,Tu)}}function setValueV4f(Cu,Tu){var Pu=this.cache;if(Tu.x!==void 0)(Pu[0]!==Tu.x||Pu[1]!==Tu.y||Pu[2]!==Tu.z||Pu[3]!==Tu.w)&&(Cu.uniform4f(this.addr,Tu.x,Tu.y,Tu.z,Tu.w),Pu[0]=Tu.x,Pu[1]=Tu.y,Pu[2]=Tu.z,Pu[3]=Tu.w);else{if(arraysEqual(Pu,Tu))return;Cu.uniform4fv(this.addr,Tu),copyArray(Pu,Tu)}}function setValueM2(Cu,Tu){var Pu=this.cache,Bu=Tu.elements;if(Bu===void 0){if(arraysEqual(Pu,Tu))return;Cu.uniformMatrix2fv(this.addr,!1,Tu),copyArray(Pu,Tu)}else{if(arraysEqual(Pu,Bu))return;mat2array.set(Bu),Cu.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(Pu,Bu)}}function setValueM3(Cu,Tu){var Pu=this.cache,Bu=Tu.elements;if(Bu===void 0){if(arraysEqual(Pu,Tu))return;Cu.uniformMatrix3fv(this.addr,!1,Tu),copyArray(Pu,Tu)}else{if(arraysEqual(Pu,Bu))return;mat3array.set(Bu),Cu.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(Pu,Bu)}}function setValueM4(Cu,Tu){var Pu=this.cache,Bu=Tu.elements;if(Bu===void 0){if(arraysEqual(Pu,Tu))return;Cu.uniformMatrix4fv(this.addr,!1,Tu),copyArray(Pu,Tu)}else{if(arraysEqual(Pu,Bu))return;mat4array.set(Bu),Cu.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(Pu,Bu)}}function setValueT1(Cu,Tu,Pu){var Bu=this.cache,Lu=Pu.allocateTextureUnit();Bu[0]!==Lu&&(Cu.uniform1i(this.addr,Lu),Bu[0]=Lu),Pu.safeSetTexture2D(Tu||emptyTexture,Lu)}function setValueT2DArray1(Cu,Tu,Pu){var Bu=this.cache,Lu=Pu.allocateTextureUnit();Bu[0]!==Lu&&(Cu.uniform1i(this.addr,Lu),Bu[0]=Lu),Pu.setTexture2DArray(Tu||emptyTexture2dArray,Lu)}function setValueT3D1(Cu,Tu,Pu){var Bu=this.cache,Lu=Pu.allocateTextureUnit();Bu[0]!==Lu&&(Cu.uniform1i(this.addr,Lu),Bu[0]=Lu),Pu.setTexture3D(Tu||emptyTexture3d,Lu)}function setValueT6(Cu,Tu,Pu){var Bu=this.cache,Lu=Pu.allocateTextureUnit();Bu[0]!==Lu&&(Cu.uniform1i(this.addr,Lu),Bu[0]=Lu),Pu.safeSetTextureCube(Tu||emptyCubeTexture,Lu)}function setValueV1i(Cu,Tu){var Pu=this.cache;Pu[0]!==Tu&&(Cu.uniform1i(this.addr,Tu),Pu[0]=Tu)}function setValueV2i(Cu,Tu){var Pu=this.cache;arraysEqual(Pu,Tu)||(Cu.uniform2iv(this.addr,Tu),copyArray(Pu,Tu))}function setValueV3i(Cu,Tu){var Pu=this.cache;arraysEqual(Pu,Tu)||(Cu.uniform3iv(this.addr,Tu),copyArray(Pu,Tu))}function setValueV4i(Cu,Tu){var Pu=this.cache;arraysEqual(Pu,Tu)||(Cu.uniform4iv(this.addr,Tu),copyArray(Pu,Tu))}function setValueV1ui(Cu,Tu){var Pu=this.cache;Pu[0]!==Tu&&(Cu.uniform1ui(this.addr,Tu),Pu[0]=Tu)}function getSingularSetter(Cu){switch(Cu){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(Cu,Tu){Cu.uniform1fv(this.addr,Tu)}function setValueV1iArray(Cu,Tu){Cu.uniform1iv(this.addr,Tu)}function setValueV2iArray(Cu,Tu){Cu.uniform2iv(this.addr,Tu)}function setValueV3iArray(Cu,Tu){Cu.uniform3iv(this.addr,Tu)}function setValueV4iArray(Cu,Tu){Cu.uniform4iv(this.addr,Tu)}function setValueV2fArray(Cu,Tu){var Pu=flatten(Tu,this.size,2);Cu.uniform2fv(this.addr,Pu)}function setValueV3fArray(Cu,Tu){var Pu=flatten(Tu,this.size,3);Cu.uniform3fv(this.addr,Pu)}function setValueV4fArray(Cu,Tu){var Pu=flatten(Tu,this.size,4);Cu.uniform4fv(this.addr,Pu)}function setValueM2Array(Cu,Tu){var Pu=flatten(Tu,this.size,4);Cu.uniformMatrix2fv(this.addr,!1,Pu)}function setValueM3Array(Cu,Tu){var Pu=flatten(Tu,this.size,9);Cu.uniformMatrix3fv(this.addr,!1,Pu)}function setValueM4Array(Cu,Tu){var Pu=flatten(Tu,this.size,16);Cu.uniformMatrix4fv(this.addr,!1,Pu)}function setValueT1Array(Cu,Tu,Pu){var Bu=Tu.length,Lu=allocTexUnits(Pu,Bu);Cu.uniform1iv(this.addr,Lu);for(var Ru=0;Ru!==Bu;++Ru)Pu.safeSetTexture2D(Tu[Ru]||emptyTexture,Lu[Ru])}function setValueT6Array(Cu,Tu,Pu){var Bu=Tu.length,Lu=allocTexUnits(Pu,Bu);Cu.uniform1iv(this.addr,Lu);for(var Ru=0;Ru!==Bu;++Ru)Pu.safeSetTextureCube(Tu[Ru]||emptyCubeTexture,Lu[Ru])}function getPureArraySetter(Cu){switch(Cu){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(Cu,Tu,Pu){this.id=Cu,this.addr=Pu,this.cache=[],this.setValue=getSingularSetter(Tu.type)}function PureArrayUniform(Cu,Tu,Pu){this.id=Cu,this.addr=Pu,this.cache=[],this.size=Tu.size,this.setValue=getPureArraySetter(Tu.type)}PureArrayUniform.prototype.updateCache=function(Cu){var Tu=this.cache;Cu instanceof Float32Array&&Tu.length!==Cu.length&&(this.cache=new Float32Array(Cu.length)),copyArray(Tu,Cu)};function StructuredUniform(Cu){this.id=Cu,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(Cu,Tu,Pu){for(var Bu=this.seq,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu){var Ou=Bu[Lu];Ou.setValue(Cu,Tu[Ou.id],Pu)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(Cu,Tu){Cu.seq.push(Tu),Cu.map[Tu.id]=Tu}function parseUniform(Cu,Tu,Pu){var Bu=Cu.name,Lu=Bu.length;for(RePathPart.lastIndex=0;;){var Ru=RePathPart.exec(Bu),Ou=RePathPart.lastIndex,Du=Ru[1],ku=Ru[2]==="]",Fu=Ru[3];if(ku&&(Du=Du|0),Fu===void 0||Fu==="["&&Ou+2===Lu){addUniform(Pu,Fu===void 0?new SingleUniform(Du,Cu,Tu):new PureArrayUniform(Du,Cu,Tu));break}else{var Nu=Pu.map,Gu=Nu[Du];Gu===void 0&&(Gu=new StructuredUniform(Du),addUniform(Pu,Gu)),Pu=Gu}}}function WebGLUniforms(Cu,Tu){this.seq=[],this.map={};for(var Pu=Cu.getProgramParameter(Tu,35718),Bu=0;Bu<Pu;++Bu){var Lu=Cu.getActiveUniform(Tu,Bu),Ru=Cu.getUniformLocation(Tu,Lu.name);parseUniform(Lu,Ru,this)}}WebGLUniforms.prototype.setValue=function(Cu,Tu,Pu,Bu){var Lu=this.map[Tu];Lu!==void 0&&Lu.setValue(Cu,Pu,Bu)};WebGLUniforms.prototype.setOptional=function(Cu,Tu,Pu){var Bu=Tu[Pu];Bu!==void 0&&this.setValue(Cu,Pu,Bu)};WebGLUniforms.upload=function(Cu,Tu,Pu,Bu){for(var Lu=0,Ru=Tu.length;Lu!==Ru;++Lu){var Ou=Tu[Lu],Du=Pu[Ou.id];Du.needsUpdate!==!1&&Ou.setValue(Cu,Du.value,Bu)}};WebGLUniforms.seqWithValue=function(Cu,Tu){for(var Pu=[],Bu=0,Lu=Cu.length;Bu!==Lu;++Bu){var Ru=Cu[Bu];Ru.id in Tu&&Pu.push(Ru)}return Pu};function WebGLShader(Cu,Tu,Pu){var Bu=Cu.createShader(Tu);return Cu.shaderSource(Bu,Pu),Cu.compileShader(Bu),Bu}var programIdCount=0;function addLineNumbers(Cu){for(var Tu=Cu.split(`
`),Pu=0;Pu<Tu.length;Pu++)Tu[Pu]=Pu+1+": "+Tu[Pu];return Tu.join(`
`)}function getEncodingComponents(Cu){switch(Cu){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+Cu)}}function getShaderErrors(Cu,Tu,Pu){var Bu=Cu.getShaderParameter(Tu,35713),Lu=Cu.getShaderInfoLog(Tu).trim();if(Bu&&Lu==="")return"";var Ru=Cu.getShaderSource(Tu);return"THREE.WebGLShader: gl.getShaderInfoLog() "+Pu+`
`+Lu+addLineNumbers(Ru)}function getTexelDecodingFunction(Cu,Tu){var Pu=getEncodingComponents(Tu);return"vec4 "+Cu+"( vec4 value ) { return "+Pu[0]+"ToLinear"+Pu[1]+"; }"}function getTexelEncodingFunction(Cu,Tu){var Pu=getEncodingComponents(Tu);return"vec4 "+Cu+"( vec4 value ) { return LinearTo"+Pu[0]+Pu[1]+"; }"}function getToneMappingFunction(Cu,Tu){var Pu;switch(Tu){case LinearToneMapping:Pu="Linear";break;case ReinhardToneMapping:Pu="Reinhard";break;case Uncharted2ToneMapping:Pu="Uncharted2";break;case CineonToneMapping:Pu="OptimizedCineon";break;case ACESFilmicToneMapping:Pu="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+Tu)}return"vec3 "+Cu+"( vec3 color ) { return "+Pu+"ToneMapping( color ); }"}function generateExtensions(Cu){var Tu=[Cu.extensionDerivatives||Cu.envMapCubeUV||Cu.bumpMap||Cu.tangentSpaceNormalMap||Cu.clearcoatNormalMap||Cu.flatShading||Cu.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(Cu.extensionFragDepth||Cu.logarithmicDepthBuffer)&&Cu.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",Cu.extensionDrawBuffers&&Cu.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(Cu.extensionShaderTextureLOD||Cu.envMap)&&Cu.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return Tu.filter(filterEmptyLine).join(`
`)}function generateDefines(Cu){var Tu=[];for(var Pu in Cu){var Bu=Cu[Pu];Bu!==!1&&Tu.push("#define "+Pu+" "+Bu)}return Tu.join(`
`)}function fetchAttributeLocations(Cu,Tu){for(var Pu={},Bu=Cu.getProgramParameter(Tu,35721),Lu=0;Lu<Bu;Lu++){var Ru=Cu.getActiveAttrib(Tu,Lu),Ou=Ru.name;Pu[Ou]=Cu.getAttribLocation(Tu,Ou)}return Pu}function filterEmptyLine(Cu){return Cu!==""}function replaceLightNums(Cu,Tu){return Cu.replace(/NUM_DIR_LIGHTS/g,Tu.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Tu.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,Tu.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Tu.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Tu.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Tu.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Tu.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Tu.numPointLightShadows)}function replaceClippingPlaneNums(Cu,Tu){return Cu.replace(/NUM_CLIPPING_PLANES/g,Tu.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Tu.numClippingPlanes-Tu.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(Cu){return Cu.replace(includePattern,includeReplacer)}function includeReplacer(Cu,Tu){var Pu=ShaderChunk[Tu];if(Pu===void 0)throw new Error("Can not resolve #include <"+Tu+">");return resolveIncludes(Pu)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(Cu){return Cu.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(Cu,Tu,Pu,Bu){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(Cu,Tu,Pu,Bu)}function loopReplacer(Cu,Tu,Pu,Bu){for(var Lu="",Ru=parseInt(Tu);Ru<parseInt(Pu);Ru++)Lu+=Bu.replace(/\[ i \]/g,"[ "+Ru+" ]").replace(/UNROLLED_LOOP_INDEX/g,Ru);return Lu}function generatePrecision(Cu){var Tu="precision "+Cu.precision+` float;
precision `+Cu.precision+" int;";return Cu.precision==="highp"?Tu+=`
#define HIGH_PRECISION`:Cu.precision==="mediump"?Tu+=`
#define MEDIUM_PRECISION`:Cu.precision==="lowp"&&(Tu+=`
#define LOW_PRECISION`),Tu}function generateShadowMapTypeDefine(Cu){var Tu="SHADOWMAP_TYPE_BASIC";return Cu.shadowMapType===PCFShadowMap?Tu="SHADOWMAP_TYPE_PCF":Cu.shadowMapType===PCFSoftShadowMap?Tu="SHADOWMAP_TYPE_PCF_SOFT":Cu.shadowMapType===VSMShadowMap&&(Tu="SHADOWMAP_TYPE_VSM"),Tu}function generateEnvMapTypeDefine(Cu){var Tu="ENVMAP_TYPE_CUBE";if(Cu.envMap)switch(Cu.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:Tu="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:Tu="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:Tu="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:Tu="ENVMAP_TYPE_SPHERE";break}return Tu}function generateEnvMapModeDefine(Cu){var Tu="ENVMAP_MODE_REFLECTION";if(Cu.envMap)switch(Cu.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:Tu="ENVMAP_MODE_REFRACTION";break}return Tu}function generateEnvMapBlendingDefine(Cu){var Tu="ENVMAP_BLENDING_NONE";if(Cu.envMap)switch(Cu.combine){case MultiplyOperation:Tu="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:Tu="ENVMAP_BLENDING_MIX";break;case AddOperation:Tu="ENVMAP_BLENDING_ADD";break}return Tu}function WebGLProgram(Cu,Tu,Pu){var Bu=Cu.getContext(),Lu=Pu.defines,Ru=Pu.vertexShader,Ou=Pu.fragmentShader,Du=generateShadowMapTypeDefine(Pu),ku=generateEnvMapTypeDefine(Pu),Fu=generateEnvMapModeDefine(Pu),Nu=generateEnvMapBlendingDefine(Pu),Gu=Cu.gammaFactor>0?Cu.gammaFactor:1,zu=Pu.isWebGL2?"":generateExtensions(Pu),Hu=generateDefines(Lu),Wu=Bu.createProgram(),_h,Xc;if(Pu.isRawShaderMaterial?(_h=[Hu].filter(filterEmptyLine).join(`
`),_h.length>0&&(_h+=`
`),Xc=[zu,Hu].filter(filterEmptyLine).join(`
`),Xc.length>0&&(Xc+=`
`)):(_h=[generatePrecision(Pu),"#define SHADER_NAME "+Pu.shaderName,Hu,Pu.instancing?"#define USE_INSTANCING":"",Pu.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Gu,"#define MAX_BONES "+Pu.maxBones,Pu.useFog&&Pu.fog?"#define USE_FOG":"",Pu.useFog&&Pu.fogExp2?"#define FOG_EXP2":"",Pu.map?"#define USE_MAP":"",Pu.envMap?"#define USE_ENVMAP":"",Pu.envMap?"#define "+Fu:"",Pu.lightMap?"#define USE_LIGHTMAP":"",Pu.aoMap?"#define USE_AOMAP":"",Pu.emissiveMap?"#define USE_EMISSIVEMAP":"",Pu.bumpMap?"#define USE_BUMPMAP":"",Pu.normalMap?"#define USE_NORMALMAP":"",Pu.normalMap&&Pu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Pu.normalMap&&Pu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Pu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Pu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Pu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Pu.displacementMap&&Pu.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Pu.specularMap?"#define USE_SPECULARMAP":"",Pu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Pu.metalnessMap?"#define USE_METALNESSMAP":"",Pu.alphaMap?"#define USE_ALPHAMAP":"",Pu.vertexTangents?"#define USE_TANGENT":"",Pu.vertexColors?"#define USE_COLOR":"",Pu.vertexUvs?"#define USE_UV":"",Pu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Pu.flatShading?"#define FLAT_SHADED":"",Pu.skinning?"#define USE_SKINNING":"",Pu.useVertexTexture?"#define BONE_TEXTURE":"",Pu.morphTargets?"#define USE_MORPHTARGETS":"",Pu.morphNormals&&Pu.flatShading===!1?"#define USE_MORPHNORMALS":"",Pu.doubleSided?"#define DOUBLE_SIDED":"",Pu.flipSided?"#define FLIP_SIDED":"",Pu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Pu.shadowMapEnabled?"#define "+Du:"",Pu.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Pu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Pu.logarithmicDepthBuffer&&Pu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Xc=[zu,generatePrecision(Pu),"#define SHADER_NAME "+Pu.shaderName,Hu,Pu.alphaTest?"#define ALPHATEST "+Pu.alphaTest+(Pu.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Gu,Pu.useFog&&Pu.fog?"#define USE_FOG":"",Pu.useFog&&Pu.fogExp2?"#define FOG_EXP2":"",Pu.map?"#define USE_MAP":"",Pu.matcap?"#define USE_MATCAP":"",Pu.envMap?"#define USE_ENVMAP":"",Pu.envMap?"#define "+ku:"",Pu.envMap?"#define "+Fu:"",Pu.envMap?"#define "+Nu:"",Pu.lightMap?"#define USE_LIGHTMAP":"",Pu.aoMap?"#define USE_AOMAP":"",Pu.emissiveMap?"#define USE_EMISSIVEMAP":"",Pu.bumpMap?"#define USE_BUMPMAP":"",Pu.normalMap?"#define USE_NORMALMAP":"",Pu.normalMap&&Pu.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",Pu.normalMap&&Pu.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",Pu.clearcoatMap?"#define USE_CLEARCOATMAP":"",Pu.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Pu.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Pu.specularMap?"#define USE_SPECULARMAP":"",Pu.roughnessMap?"#define USE_ROUGHNESSMAP":"",Pu.metalnessMap?"#define USE_METALNESSMAP":"",Pu.alphaMap?"#define USE_ALPHAMAP":"",Pu.sheen?"#define USE_SHEEN":"",Pu.vertexTangents?"#define USE_TANGENT":"",Pu.vertexColors?"#define USE_COLOR":"",Pu.vertexUvs?"#define USE_UV":"",Pu.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",Pu.gradientMap?"#define USE_GRADIENTMAP":"",Pu.flatShading?"#define FLAT_SHADED":"",Pu.doubleSided?"#define DOUBLE_SIDED":"",Pu.flipSided?"#define FLIP_SIDED":"",Pu.shadowMapEnabled?"#define USE_SHADOWMAP":"",Pu.shadowMapEnabled?"#define "+Du:"",Pu.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Pu.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Pu.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Pu.logarithmicDepthBuffer&&Pu.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(Pu.extensionShaderTextureLOD||Pu.envMap)&&Pu.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Pu.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",Pu.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",Pu.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",Pu.toneMapping):"",Pu.dithering?"#define DITHERING":"",Pu.outputEncoding||Pu.mapEncoding||Pu.matcapEncoding||Pu.envMapEncoding||Pu.emissiveMapEncoding||Pu.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",Pu.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",Pu.mapEncoding):"",Pu.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",Pu.matcapEncoding):"",Pu.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",Pu.envMapEncoding):"",Pu.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",Pu.emissiveMapEncoding):"",Pu.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",Pu.lightMapEncoding):"",Pu.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",Pu.outputEncoding):"",Pu.depthPacking?"#define DEPTH_PACKING "+Pu.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ru=resolveIncludes(Ru),Ru=replaceLightNums(Ru,Pu),Ru=replaceClippingPlaneNums(Ru,Pu),Ou=resolveIncludes(Ou),Ou=replaceLightNums(Ou,Pu),Ou=replaceClippingPlaneNums(Ou,Pu),Ru=unrollLoops(Ru),Ou=unrollLoops(Ou),Pu.isWebGL2&&!Pu.isRawShaderMaterial){var ju=!1,_c=/^\s*#version\s+300\s+es\s*\n/;Pu.isShaderMaterial&&Ru.match(_c)!==null&&Ou.match(_c)!==null&&(ju=!0,Ru=Ru.replace(_c,""),Ou=Ou.replace(_c,"")),_h=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_h,Xc=[`#version 300 es
`,"#define varying in",ju?"":"out highp vec4 pc_fragColor;",ju?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Xc}var _f=_h+Ru,ep=Xc+Ou,tp=WebGLShader(Bu,35633,_f),op=WebGLShader(Bu,35632,ep);if(Bu.attachShader(Wu,tp),Bu.attachShader(Wu,op),Pu.index0AttributeName!==void 0?Bu.bindAttribLocation(Wu,0,Pu.index0AttributeName):Pu.morphTargets===!0&&Bu.bindAttribLocation(Wu,0,"position"),Bu.linkProgram(Wu),Cu.debug.checkShaderErrors){var lp=Bu.getProgramInfoLog(Wu).trim(),up=Bu.getShaderInfoLog(tp).trim(),hp=Bu.getShaderInfoLog(op).trim(),np=!0,rp=!0;if(Bu.getProgramParameter(Wu,35714)===!1){np=!1;var ip=getShaderErrors(Bu,tp,"vertex"),ap=getShaderErrors(Bu,op,"fragment");console.error("THREE.WebGLProgram: shader error: ",Bu.getError(),"35715",Bu.getProgramParameter(Wu,35715),"gl.getProgramInfoLog",lp,ip,ap)}else lp!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",lp):(up===""||hp==="")&&(rp=!1);rp&&(this.diagnostics={runnable:np,programLog:lp,vertexShader:{log:up,prefix:_h},fragmentShader:{log:hp,prefix:Xc}})}Bu.deleteShader(tp),Bu.deleteShader(op);var sp;this.getUniforms=function(){return sp===void 0&&(sp=new WebGLUniforms(Bu,Wu)),sp};var cp;return this.getAttributes=function(){return cp===void 0&&(cp=fetchAttributeLocations(Bu,Wu)),cp},this.destroy=function(){Bu.deleteProgram(Wu),this.program=void 0},this.name=Pu.shaderName,this.id=programIdCount++,this.cacheKey=Tu,this.usedTimes=1,this.program=Wu,this.vertexShader=tp,this.fragmentShader=op,this}function WebGLPrograms(Cu,Tu,Pu){var Bu=[],Lu=Pu.isWebGL2,Ru=Pu.logarithmicDepthBuffer,Ou=Pu.floatVertexTextures,Du=Pu.precision,ku=Pu.maxVertexUniforms,Fu=Pu.vertexTextures,Nu={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Gu=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function zu(_h,Xc){var ju;if(Xc){var _c=ShaderLib[Xc];ju={name:_h.type,uniforms:UniformsUtils.clone(_c.uniforms),vertexShader:_c.vertexShader,fragmentShader:_c.fragmentShader}}else ju={name:_h.type,uniforms:_h.uniforms,vertexShader:_h.vertexShader,fragmentShader:_h.fragmentShader};return ju}function Hu(_h){var Xc=_h.skeleton,ju=Xc.bones;if(Ou)return 1024;var _c=ku,_f=Math.floor((_c-20)/4),ep=Math.min(_f,ju.length);return ep<ju.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ju.length+" bones. This GPU supports "+ep+"."),0):ep}function Wu(_h){var Xc;return _h?_h.isTexture?Xc=_h.encoding:_h.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Xc=_h.texture.encoding):Xc=LinearEncoding,Xc}this.getParameters=function(_h,Xc,ju,_c,_f,ep,tp){var op=_c.fog,lp=_h.isMeshStandardMaterial?_c.environment:null,up=_h.envMap||lp,hp=Nu[_h.type],np=tp.isSkinnedMesh?Hu(tp):0;_h.precision!==null&&(Du=Pu.getMaxPrecision(_h.precision),Du!==_h.precision&&console.warn("THREE.WebGLProgram.getParameters:",_h.precision,"not supported, using",Du,"instead."));var rp=zu(_h,hp);_h.onBeforeCompile(rp,Cu);var ip=Cu.getRenderTarget(),ap={isWebGL2:Lu,shaderID:hp,shaderName:rp.name,uniforms:rp.uniforms,vertexShader:rp.vertexShader,fragmentShader:rp.fragmentShader,defines:_h.defines,isRawShaderMaterial:_h.isRawShaderMaterial,isShaderMaterial:_h.isShaderMaterial,precision:Du,instancing:tp.isInstancedMesh===!0,supportsVertexTextures:Fu,outputEncoding:ip!==null?Wu(ip.texture):Cu.outputEncoding,map:!!_h.map,mapEncoding:Wu(_h.map),matcap:!!_h.matcap,matcapEncoding:Wu(_h.matcap),envMap:!!up,envMapMode:up&&up.mapping,envMapEncoding:Wu(up),envMapCubeUV:!!up&&(up.mapping===CubeUVReflectionMapping||up.mapping===CubeUVRefractionMapping),lightMap:!!_h.lightMap,lightMapEncoding:Wu(_h.lightMap),aoMap:!!_h.aoMap,emissiveMap:!!_h.emissiveMap,emissiveMapEncoding:Wu(_h.emissiveMap),bumpMap:!!_h.bumpMap,normalMap:!!_h.normalMap,objectSpaceNormalMap:_h.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:_h.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!_h.clearcoatMap,clearcoatRoughnessMap:!!_h.clearcoatRoughnessMap,clearcoatNormalMap:!!_h.clearcoatNormalMap,displacementMap:!!_h.displacementMap,roughnessMap:!!_h.roughnessMap,metalnessMap:!!_h.metalnessMap,specularMap:!!_h.specularMap,alphaMap:!!_h.alphaMap,gradientMap:!!_h.gradientMap,sheen:!!_h.sheen,combine:_h.combine,vertexTangents:_h.normalMap&&_h.vertexTangents,vertexColors:_h.vertexColors,vertexUvs:!!_h.map||!!_h.bumpMap||!!_h.normalMap||!!_h.specularMap||!!_h.alphaMap||!!_h.emissiveMap||!!_h.roughnessMap||!!_h.metalnessMap||!!_h.clearcoatMap||!!_h.clearcoatRoughnessMap||!!_h.clearcoatNormalMap||!!_h.displacementMap,uvsVertexOnly:!(!!_h.map||!!_h.bumpMap||!!_h.normalMap||!!_h.specularMap||!!_h.alphaMap||!!_h.emissiveMap||!!_h.roughnessMap||!!_h.metalnessMap||!!_h.clearcoatNormalMap)&&!!_h.displacementMap,fog:!!op,useFog:_h.fog,fogExp2:op&&op.isFogExp2,flatShading:_h.flatShading,sizeAttenuation:_h.sizeAttenuation,logarithmicDepthBuffer:Ru,skinning:_h.skinning&&np>0,maxBones:np,useVertexTexture:Ou,morphTargets:_h.morphTargets,morphNormals:_h.morphNormals,maxMorphTargets:Cu.maxMorphTargets,maxMorphNormals:Cu.maxMorphNormals,numDirLights:Xc.directional.length,numPointLights:Xc.point.length,numSpotLights:Xc.spot.length,numRectAreaLights:Xc.rectArea.length,numHemiLights:Xc.hemi.length,numDirLightShadows:Xc.directionalShadowMap.length,numPointLightShadows:Xc.pointShadowMap.length,numSpotLightShadows:Xc.spotShadowMap.length,numClippingPlanes:_f,numClipIntersection:ep,dithering:_h.dithering,shadowMapEnabled:Cu.shadowMap.enabled&&ju.length>0,shadowMapType:Cu.shadowMap.type,toneMapping:_h.toneMapped?Cu.toneMapping:NoToneMapping,physicallyCorrectLights:Cu.physicallyCorrectLights,premultipliedAlpha:_h.premultipliedAlpha,alphaTest:_h.alphaTest,doubleSided:_h.side===DoubleSide,flipSided:_h.side===BackSide,depthPacking:_h.depthPacking!==void 0?_h.depthPacking:!1,index0AttributeName:_h.index0AttributeName,extensionDerivatives:_h.extensions&&_h.extensions.derivatives,extensionFragDepth:_h.extensions&&_h.extensions.fragDepth,extensionDrawBuffers:_h.extensions&&_h.extensions.drawBuffers,extensionShaderTextureLOD:_h.extensions&&_h.extensions.shaderTextureLOD,rendererExtensionFragDepth:Lu||Tu.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Lu||Tu.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Lu||Tu.get("EXT_shader_texture_lod")!==null,onBeforeCompile:_h.onBeforeCompile};return ap},this.getProgramCacheKey=function(_h){var Xc=[];if(_h.shaderID?Xc.push(_h.shaderID):(Xc.push(_h.fragmentShader),Xc.push(_h.vertexShader)),_h.defines!==void 0)for(var ju in _h.defines)Xc.push(ju),Xc.push(_h.defines[ju]);if(_h.isRawShaderMaterial===void 0){for(var _c=0;_c<Gu.length;_c++)Xc.push(_h[Gu[_c]]);Xc.push(Cu.outputEncoding),Xc.push(Cu.gammaFactor)}return Xc.push(_h.onBeforeCompile.toString()),Xc.join()},this.acquireProgram=function(_h,Xc){for(var ju,_c=0,_f=Bu.length;_c<_f;_c++){var ep=Bu[_c];if(ep.cacheKey===Xc){ju=ep,++ju.usedTimes;break}}return ju===void 0&&(ju=new WebGLProgram(Cu,Xc,_h),Bu.push(ju)),ju},this.releaseProgram=function(_h){if(--_h.usedTimes===0){var Xc=Bu.indexOf(_h);Bu[Xc]=Bu[Bu.length-1],Bu.pop(),_h.destroy()}},this.programs=Bu}function WebGLProperties(){var Cu=new WeakMap;function Tu(Ru){var Ou=Cu.get(Ru);return Ou===void 0&&(Ou={},Cu.set(Ru,Ou)),Ou}function Pu(Ru){Cu.delete(Ru)}function Bu(Ru,Ou,Du){Cu.get(Ru)[Ou]=Du}function Lu(){Cu=new WeakMap}return{get:Tu,remove:Pu,update:Bu,dispose:Lu}}function painterSortStable(Cu,Tu){return Cu.groupOrder!==Tu.groupOrder?Cu.groupOrder-Tu.groupOrder:Cu.renderOrder!==Tu.renderOrder?Cu.renderOrder-Tu.renderOrder:Cu.program!==Tu.program?Cu.program.id-Tu.program.id:Cu.material.id!==Tu.material.id?Cu.material.id-Tu.material.id:Cu.z!==Tu.z?Cu.z-Tu.z:Cu.id-Tu.id}function reversePainterSortStable(Cu,Tu){return Cu.groupOrder!==Tu.groupOrder?Cu.groupOrder-Tu.groupOrder:Cu.renderOrder!==Tu.renderOrder?Cu.renderOrder-Tu.renderOrder:Cu.z!==Tu.z?Tu.z-Cu.z:Cu.id-Tu.id}function WebGLRenderList(){var Cu=[],Tu=0,Pu=[],Bu=[],Lu={id:-1};function Ru(){Tu=0,Pu.length=0,Bu.length=0}function Ou(Gu,zu,Hu,Wu,_h,Xc){var ju=Cu[Tu];return ju===void 0?(ju={id:Gu.id,object:Gu,geometry:zu,material:Hu,program:Hu.program||Lu,groupOrder:Wu,renderOrder:Gu.renderOrder,z:_h,group:Xc},Cu[Tu]=ju):(ju.id=Gu.id,ju.object=Gu,ju.geometry=zu,ju.material=Hu,ju.program=Hu.program||Lu,ju.groupOrder=Wu,ju.renderOrder=Gu.renderOrder,ju.z=_h,ju.group=Xc),Tu++,ju}function Du(Gu,zu,Hu,Wu,_h,Xc){var ju=Ou(Gu,zu,Hu,Wu,_h,Xc);(Hu.transparent===!0?Bu:Pu).push(ju)}function ku(Gu,zu,Hu,Wu,_h,Xc){var ju=Ou(Gu,zu,Hu,Wu,_h,Xc);(Hu.transparent===!0?Bu:Pu).unshift(ju)}function Fu(Gu,zu){Pu.length>1&&Pu.sort(Gu||painterSortStable),Bu.length>1&&Bu.sort(zu||reversePainterSortStable)}function Nu(){for(var Gu=Tu,zu=Cu.length;Gu<zu;Gu++){var Hu=Cu[Gu];if(Hu.id===null)break;Hu.id=null,Hu.object=null,Hu.geometry=null,Hu.material=null,Hu.program=null,Hu.group=null}}return{opaque:Pu,transparent:Bu,init:Ru,push:Du,unshift:ku,finish:Nu,sort:Fu}}function WebGLRenderLists(){var Cu=new WeakMap;function Tu(Lu){var Ru=Lu.target;Ru.removeEventListener("dispose",Tu),Cu.delete(Ru)}function Pu(Lu,Ru){var Ou=Cu.get(Lu),Du;return Ou===void 0?(Du=new WebGLRenderList,Cu.set(Lu,new WeakMap),Cu.get(Lu).set(Ru,Du),Lu.addEventListener("dispose",Tu)):(Du=Ou.get(Ru),Du===void 0&&(Du=new WebGLRenderList,Ou.set(Ru,Du))),Du}function Bu(){Cu=new WeakMap}return{get:Pu,dispose:Bu}}function UniformsCache(){var Cu={};return{get:function(Tu){if(Cu[Tu.id]!==void 0)return Cu[Tu.id];var Pu;switch(Tu.type){case"DirectionalLight":Pu={direction:new Vector3,color:new Color};break;case"SpotLight":Pu={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Pu={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":Pu={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":Pu={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return Cu[Tu.id]=Pu,Pu}}}function ShadowUniformsCache(){var Cu={};return{get:function(Tu){if(Cu[Tu.id]!==void 0)return Cu[Tu.id];var Pu;switch(Tu.type){case"DirectionalLight":Pu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":Pu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":Pu={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return Cu[Tu.id]=Pu,Pu}}}var nextVersion=0;function shadowCastingLightsFirst(Cu,Tu){return(Tu.castShadow?1:0)-(Cu.castShadow?1:0)}function WebGLLights(){for(var Cu=new UniformsCache,Tu=ShadowUniformsCache(),Pu={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Bu=0;Bu<9;Bu++)Pu.probe.push(new Vector3);var Lu=new Vector3,Ru=new Matrix4,Ou=new Matrix4;function Du(ku,Fu,Nu){for(var Gu=0,zu=0,Hu=0,Wu=0;Wu<9;Wu++)Pu.probe[Wu].set(0,0,0);var _h=0,Xc=0,ju=0,_c=0,_f=0,ep=0,tp=0,op=0,lp=Nu.matrixWorldInverse;ku.sort(shadowCastingLightsFirst);for(var Wu=0,up=ku.length;Wu<up;Wu++){var hp=ku[Wu],np=hp.color,rp=hp.intensity,ip=hp.distance,ap=hp.shadow&&hp.shadow.map?hp.shadow.map.texture:null;if(hp.isAmbientLight)Gu+=np.r*rp,zu+=np.g*rp,Hu+=np.b*rp;else if(hp.isLightProbe)for(var sp=0;sp<9;sp++)Pu.probe[sp].addScaledVector(hp.sh.coefficients[sp],rp);else if(hp.isDirectionalLight){var cp=Cu.get(hp);if(cp.color.copy(hp.color).multiplyScalar(hp.intensity),cp.direction.setFromMatrixPosition(hp.matrixWorld),Lu.setFromMatrixPosition(hp.target.matrixWorld),cp.direction.sub(Lu),cp.direction.transformDirection(lp),hp.castShadow){var dp=hp.shadow,fp=Tu.get(hp);fp.shadowBias=dp.bias,fp.shadowRadius=dp.radius,fp.shadowMapSize=dp.mapSize,Pu.directionalShadow[_h]=fp,Pu.directionalShadowMap[_h]=ap,Pu.directionalShadowMatrix[_h]=hp.shadow.matrix,ep++}Pu.directional[_h]=cp,_h++}else if(hp.isSpotLight){var cp=Cu.get(hp);if(cp.position.setFromMatrixPosition(hp.matrixWorld),cp.position.applyMatrix4(lp),cp.color.copy(np).multiplyScalar(rp),cp.distance=ip,cp.direction.setFromMatrixPosition(hp.matrixWorld),Lu.setFromMatrixPosition(hp.target.matrixWorld),cp.direction.sub(Lu),cp.direction.transformDirection(lp),cp.coneCos=Math.cos(hp.angle),cp.penumbraCos=Math.cos(hp.angle*(1-hp.penumbra)),cp.decay=hp.decay,hp.castShadow){var dp=hp.shadow,fp=Tu.get(hp);fp.shadowBias=dp.bias,fp.shadowRadius=dp.radius,fp.shadowMapSize=dp.mapSize,Pu.spotShadow[ju]=fp,Pu.spotShadowMap[ju]=ap,Pu.spotShadowMatrix[ju]=hp.shadow.matrix,op++}Pu.spot[ju]=cp,ju++}else if(hp.isRectAreaLight){var cp=Cu.get(hp);cp.color.copy(np).multiplyScalar(rp),cp.position.setFromMatrixPosition(hp.matrixWorld),cp.position.applyMatrix4(lp),Ou.identity(),Ru.copy(hp.matrixWorld),Ru.premultiply(lp),Ou.extractRotation(Ru),cp.halfWidth.set(hp.width*.5,0,0),cp.halfHeight.set(0,hp.height*.5,0),cp.halfWidth.applyMatrix4(Ou),cp.halfHeight.applyMatrix4(Ou),Pu.rectArea[_c]=cp,_c++}else if(hp.isPointLight){var cp=Cu.get(hp);if(cp.position.setFromMatrixPosition(hp.matrixWorld),cp.position.applyMatrix4(lp),cp.color.copy(hp.color).multiplyScalar(hp.intensity),cp.distance=hp.distance,cp.decay=hp.decay,hp.castShadow){var dp=hp.shadow,fp=Tu.get(hp);fp.shadowBias=dp.bias,fp.shadowRadius=dp.radius,fp.shadowMapSize=dp.mapSize,fp.shadowCameraNear=dp.camera.near,fp.shadowCameraFar=dp.camera.far,Pu.pointShadow[Xc]=fp,Pu.pointShadowMap[Xc]=ap,Pu.pointShadowMatrix[Xc]=hp.shadow.matrix,tp++}Pu.point[Xc]=cp,Xc++}else if(hp.isHemisphereLight){var cp=Cu.get(hp);cp.direction.setFromMatrixPosition(hp.matrixWorld),cp.direction.transformDirection(lp),cp.direction.normalize(),cp.skyColor.copy(hp.color).multiplyScalar(rp),cp.groundColor.copy(hp.groundColor).multiplyScalar(rp),Pu.hemi[_f]=cp,_f++}}Pu.ambient[0]=Gu,Pu.ambient[1]=zu,Pu.ambient[2]=Hu;var vp=Pu.hash;(vp.directionalLength!==_h||vp.pointLength!==Xc||vp.spotLength!==ju||vp.rectAreaLength!==_c||vp.hemiLength!==_f||vp.numDirectionalShadows!==ep||vp.numPointShadows!==tp||vp.numSpotShadows!==op)&&(Pu.directional.length=_h,Pu.spot.length=ju,Pu.rectArea.length=_c,Pu.point.length=Xc,Pu.hemi.length=_f,Pu.directionalShadow.length=ep,Pu.directionalShadowMap.length=ep,Pu.pointShadow.length=tp,Pu.pointShadowMap.length=tp,Pu.spotShadow.length=op,Pu.spotShadowMap.length=op,Pu.directionalShadowMatrix.length=ep,Pu.pointShadowMatrix.length=tp,Pu.spotShadowMatrix.length=op,vp.directionalLength=_h,vp.pointLength=Xc,vp.spotLength=ju,vp.rectAreaLength=_c,vp.hemiLength=_f,vp.numDirectionalShadows=ep,vp.numPointShadows=tp,vp.numSpotShadows=op,Pu.version=nextVersion++)}return{setup:Du,state:Pu}}function WebGLRenderState(){var Cu=new WebGLLights,Tu=[],Pu=[];function Bu(){Tu.length=0,Pu.length=0}function Lu(ku){Tu.push(ku)}function Ru(ku){Pu.push(ku)}function Ou(ku){Cu.setup(Tu,Pu,ku)}var Du={lightsArray:Tu,shadowsArray:Pu,lights:Cu};return{init:Bu,state:Du,setupLights:Ou,pushLight:Lu,pushShadow:Ru}}function WebGLRenderStates(){var Cu=new WeakMap;function Tu(Lu){var Ru=Lu.target;Ru.removeEventListener("dispose",Tu),Cu.delete(Ru)}function Pu(Lu,Ru){var Ou;return Cu.has(Lu)===!1?(Ou=new WebGLRenderState,Cu.set(Lu,new WeakMap),Cu.get(Lu).set(Ru,Ou),Lu.addEventListener("dispose",Tu)):Cu.get(Lu).has(Ru)===!1?(Ou=new WebGLRenderState,Cu.get(Lu).set(Ru,Ou)):Ou=Cu.get(Lu).get(Ru),Ou}function Bu(){Cu=new WeakMap}return{get:Pu,dispose:Bu}}function MeshDepthMaterial(Cu){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(Cu)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.depthPacking=Cu.depthPacking,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.map=Cu.map,this.alphaMap=Cu.alphaMap,this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this};function MeshDistanceMaterial(Cu){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(Cu)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.referencePosition.copy(Cu.referencePosition),this.nearDistance=Cu.nearDistance,this.farDistance=Cu.farDistance,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.map=Cu.map,this.alphaMap=Cu.alphaMap,this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(Cu,Tu,Pu){var Bu=new Frustum,Lu=new Vector2,Ru=new Vector2,Ou=new Vector4,Du=[],ku=[],Fu={},Nu={0:BackSide,1:FrontSide,2:DoubleSide},Gu=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),zu=Gu.clone();zu.defines.HORIZONAL_PASS=1;var Hu=new BufferGeometry;Hu.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Wu=new Mesh(Hu,Gu),_h=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(tp,op,lp){if(_h.enabled!==!1&&!(_h.autoUpdate===!1&&_h.needsUpdate===!1)&&tp.length!==0){var up=Cu.getRenderTarget(),hp=Cu.getActiveCubeFace(),np=Cu.getActiveMipmapLevel(),rp=Cu.state;rp.setBlending(NoBlending),rp.buffers.color.setClear(1,1,1,1),rp.buffers.depth.setTest(!0),rp.setScissorTest(!1);for(var ip=0,ap=tp.length;ip<ap;ip++){var sp=tp[ip],cp=sp.shadow;if(cp===void 0){console.warn("THREE.WebGLShadowMap:",sp,"has no shadow.");continue}Lu.copy(cp.mapSize);var dp=cp.getFrameExtents();if(Lu.multiply(dp),Ru.copy(cp.mapSize),(Lu.x>Pu||Lu.y>Pu)&&(Lu.x>Pu&&(Ru.x=Math.floor(Pu/dp.x),Lu.x=Ru.x*dp.x,cp.mapSize.x=Ru.x),Lu.y>Pu&&(Ru.y=Math.floor(Pu/dp.y),Lu.y=Ru.y*dp.y,cp.mapSize.y=Ru.y)),cp.map===null&&!cp.isPointLightShadow&&this.type===VSMShadowMap){var fp={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};cp.map=new WebGLRenderTarget(Lu.x,Lu.y,fp),cp.map.texture.name=sp.name+".shadowMap",cp.mapPass=new WebGLRenderTarget(Lu.x,Lu.y,fp),cp.camera.updateProjectionMatrix()}if(cp.map===null){var fp={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};cp.map=new WebGLRenderTarget(Lu.x,Lu.y,fp),cp.map.texture.name=sp.name+".shadowMap",cp.camera.updateProjectionMatrix()}Cu.setRenderTarget(cp.map),Cu.clear();for(var vp=cp.getViewportCount(),_p=0;_p<vp;_p++){var wp=cp.getViewport(_p);Ou.set(Ru.x*wp.x,Ru.y*wp.y,Ru.x*wp.z,Ru.y*wp.w),rp.viewport(Ou),cp.updateMatrices(sp,_p),Bu=cp.getFrustum(),ep(op,lp,cp.camera,sp,this.type)}!cp.isPointLightShadow&&this.type===VSMShadowMap&&Xc(cp,lp)}_h.needsUpdate=!1,Cu.setRenderTarget(up,hp,np)}};function Xc(tp,op){var lp=Tu.update(Wu);Gu.uniforms.shadow_pass.value=tp.map.texture,Gu.uniforms.resolution.value=tp.mapSize,Gu.uniforms.radius.value=tp.radius,Cu.setRenderTarget(tp.mapPass),Cu.clear(),Cu.renderBufferDirect(op,null,lp,Gu,Wu,null),zu.uniforms.shadow_pass.value=tp.mapPass.texture,zu.uniforms.resolution.value=tp.mapSize,zu.uniforms.radius.value=tp.radius,Cu.setRenderTarget(tp.map),Cu.clear(),Cu.renderBufferDirect(op,null,lp,zu,Wu,null)}function ju(tp,op,lp){var up=tp<<0|op<<1|lp<<2,hp=Du[up];return hp===void 0&&(hp=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:tp,skinning:op}),Du[up]=hp),hp}function _c(tp,op,lp){var up=tp<<0|op<<1|lp<<2,hp=ku[up];return hp===void 0&&(hp=new MeshDistanceMaterial({morphTargets:tp,skinning:op}),ku[up]=hp),hp}function _f(tp,op,lp,up,hp,np,rp){var ip=null,ap=ju,sp=tp.customDepthMaterial;if(up.isPointLight===!0&&(ap=_c,sp=tp.customDistanceMaterial),sp===void 0){var cp=!1;lp.morphTargets===!0&&(cp=op.morphAttributes&&op.morphAttributes.position&&op.morphAttributes.position.length>0);var dp=!1;tp.isSkinnedMesh===!0&&(lp.skinning===!0?dp=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",tp));var fp=tp.isInstancedMesh===!0;ip=ap(cp,dp,fp)}else ip=sp;if(Cu.localClippingEnabled&&lp.clipShadows===!0&&lp.clippingPlanes.length!==0){var vp=ip.uuid,_p=lp.uuid,wp=Fu[vp];wp===void 0&&(wp={},Fu[vp]=wp);var Dp=wp[_p];Dp===void 0&&(Dp=ip.clone(),wp[_p]=Dp),ip=Dp}return ip.visible=lp.visible,ip.wireframe=lp.wireframe,rp===VSMShadowMap?ip.side=lp.shadowSide!==null?lp.shadowSide:lp.side:ip.side=lp.shadowSide!==null?lp.shadowSide:Nu[lp.side],ip.clipShadows=lp.clipShadows,ip.clippingPlanes=lp.clippingPlanes,ip.clipIntersection=lp.clipIntersection,ip.wireframeLinewidth=lp.wireframeLinewidth,ip.linewidth=lp.linewidth,up.isPointLight===!0&&ip.isMeshDistanceMaterial===!0&&(ip.referencePosition.setFromMatrixPosition(up.matrixWorld),ip.nearDistance=hp,ip.farDistance=np),ip}function ep(tp,op,lp,up,hp){if(tp.visible!==!1){var np=tp.layers.test(op.layers);if(np&&(tp.isMesh||tp.isLine||tp.isPoints)&&(tp.castShadow||tp.receiveShadow&&hp===VSMShadowMap)&&(!tp.frustumCulled||Bu.intersectsObject(tp))){tp.modelViewMatrix.multiplyMatrices(lp.matrixWorldInverse,tp.matrixWorld);var rp=Tu.update(tp),ip=tp.material;if(Array.isArray(ip))for(var ap=rp.groups,sp=0,cp=ap.length;sp<cp;sp++){var dp=ap[sp],fp=ip[dp.materialIndex];if(fp&&fp.visible){var vp=_f(tp,rp,fp,up,lp.near,lp.far,hp);Cu.renderBufferDirect(lp,null,rp,vp,tp,dp)}}else if(ip.visible){var vp=_f(tp,rp,ip,up,lp.near,lp.far,hp);Cu.renderBufferDirect(lp,null,rp,vp,tp,null)}}for(var _p=tp.children,wp=0,Dp=_p.length;wp<Dp;wp++)ep(_p[wp],op,lp,up,hp)}}}function WebGLState(Cu,Tu,Pu){var Bu=Pu.isWebGL2;function Lu(){var Lp=!1,sm=new Vector4,dm=null,mm=new Vector4(0,0,0,0);return{setMask:function(pm){dm!==pm&&!Lp&&(Cu.colorMask(pm,pm,pm,pm),dm=pm)},setLocked:function(pm){Lp=pm},setClear:function(pm,wm,$m,Pm,Nm){Nm===!0&&(pm*=Pm,wm*=Pm,$m*=Pm),sm.set(pm,wm,$m,Pm),mm.equals(sm)===!1&&(Cu.clearColor(pm,wm,$m,Pm),mm.copy(sm))},reset:function(){Lp=!1,dm=null,mm.set(-1,0,0,0)}}}function Ru(){var Lp=!1,sm=null,dm=null,mm=null;return{setTest:function(pm){pm?Sp(2929):xp(2929)},setMask:function(pm){sm!==pm&&!Lp&&(Cu.depthMask(pm),sm=pm)},setFunc:function(pm){if(dm!==pm){if(pm)switch(pm){case NeverDepth:Cu.depthFunc(512);break;case AlwaysDepth:Cu.depthFunc(519);break;case LessDepth:Cu.depthFunc(513);break;case LessEqualDepth:Cu.depthFunc(515);break;case EqualDepth:Cu.depthFunc(514);break;case GreaterEqualDepth:Cu.depthFunc(518);break;case GreaterDepth:Cu.depthFunc(516);break;case NotEqualDepth:Cu.depthFunc(517);break;default:Cu.depthFunc(515)}else Cu.depthFunc(515);dm=pm}},setLocked:function(pm){Lp=pm},setClear:function(pm){mm!==pm&&(Cu.clearDepth(pm),mm=pm)},reset:function(){Lp=!1,sm=null,dm=null,mm=null}}}function Ou(){var Lp=!1,sm=null,dm=null,mm=null,pm=null,wm=null,$m=null,Pm=null,Nm=null;return{setTest:function(Tm){Lp||(Tm?Sp(2960):xp(2960))},setMask:function(Tm){sm!==Tm&&!Lp&&(Cu.stencilMask(Tm),sm=Tm)},setFunc:function(Tm,Dm,km){(dm!==Tm||mm!==Dm||pm!==km)&&(Cu.stencilFunc(Tm,Dm,km),dm=Tm,mm=Dm,pm=km)},setOp:function(Tm,Dm,km){(wm!==Tm||$m!==Dm||Pm!==km)&&(Cu.stencilOp(Tm,Dm,km),wm=Tm,$m=Dm,Pm=km)},setLocked:function(Tm){Lp=Tm},setClear:function(Tm){Nm!==Tm&&(Cu.clearStencil(Tm),Nm=Tm)},reset:function(){Lp=!1,sm=null,dm=null,mm=null,pm=null,wm=null,$m=null,Pm=null,Nm=null}}}var Du=new Lu,ku=new Ru,Fu=new Ou,Nu=Cu.getParameter(34921),Gu=new Uint8Array(Nu),zu=new Uint8Array(Nu),Hu=new Uint8Array(Nu),Wu={},_h=null,Xc=null,ju=null,_c=null,_f=null,ep=null,tp=null,op=null,lp=null,up=!1,hp=null,np=null,rp=null,ip=null,ap=null,sp=Cu.getParameter(35661),cp=!1,dp=0,fp=Cu.getParameter(7938);fp.indexOf("WebGL")!==-1?(dp=parseFloat(/^WebGL\ ([0-9])/.exec(fp)[1]),cp=dp>=1):fp.indexOf("OpenGL ES")!==-1&&(dp=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(fp)[1]),cp=dp>=2);var vp=null,_p={},wp=new Vector4,Dp=new Vector4;function Pp(Lp,sm,dm){var mm=new Uint8Array(4),pm=Cu.createTexture();Cu.bindTexture(Lp,pm),Cu.texParameteri(Lp,10241,9728),Cu.texParameteri(Lp,10240,9728);for(var wm=0;wm<dm;wm++)Cu.texImage2D(sm+wm,0,6408,1,1,0,6408,5121,mm);return pm}var Wp={};Wp[3553]=Pp(3553,3553,1),Wp[34067]=Pp(34067,34069,6),Du.setClear(0,0,0,1),ku.setClear(1),Fu.setClear(0),Sp(2929),ku.setFunc(LessEqualDepth),pp(!1),bp(CullFaceBack),Sp(2884),qp(NoBlending);function Rp(){for(var Lp=0,sm=Gu.length;Lp<sm;Lp++)Gu[Lp]=0}function Gp(Lp){kp(Lp,0)}function kp(Lp,sm){if(Gu[Lp]=1,zu[Lp]===0&&(Cu.enableVertexAttribArray(Lp),zu[Lp]=1),Hu[Lp]!==sm){var dm=Bu?Cu:Tu.get("ANGLE_instanced_arrays");dm[Bu?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Lp,sm),Hu[Lp]=sm}}function gp(){for(var Lp=0,sm=zu.length;Lp!==sm;++Lp)zu[Lp]!==Gu[Lp]&&(Cu.disableVertexAttribArray(Lp),zu[Lp]=0)}function mp(Lp,sm,dm,mm,pm,wm){Bu===!0&&(dm===5124||dm===5125)?Cu.vertexAttribIPointer(Lp,sm,dm,mm,pm,wm):Cu.vertexAttribPointer(Lp,sm,dm,mm,pm,wm)}function Sp(Lp){Wu[Lp]!==!0&&(Cu.enable(Lp),Wu[Lp]=!0)}function xp(Lp){Wu[Lp]!==!1&&(Cu.disable(Lp),Wu[Lp]=!1)}function Ep(Lp){return _h!==Lp?(Cu.useProgram(Lp),_h=Lp,!0):!1}var $p={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Bu)$p[MinEquation]=32775,$p[MaxEquation]=32776;else{var Ip=Tu.get("EXT_blend_minmax");Ip!==null&&($p[MinEquation]=Ip.MIN_EXT,$p[MaxEquation]=Ip.MAX_EXT)}var Np={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function qp(Lp,sm,dm,mm,pm,wm,$m,Pm){if(Lp===NoBlending){Xc&&(xp(3042),Xc=!1);return}if(Xc||(Sp(3042),Xc=!0),Lp!==CustomBlending){if(Lp!==ju||Pm!==up){if((_c!==AddEquation||tp!==AddEquation)&&(Cu.blendEquation(32774),_c=AddEquation,tp=AddEquation),Pm)switch(Lp){case NormalBlending:Cu.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:Cu.blendFunc(1,1);break;case SubtractiveBlending:Cu.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:Cu.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lp);break}else switch(Lp){case NormalBlending:Cu.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:Cu.blendFunc(770,1);break;case SubtractiveBlending:Cu.blendFunc(0,769);break;case MultiplyBlending:Cu.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lp);break}_f=null,ep=null,op=null,lp=null,ju=Lp,up=Pm}return}pm=pm||sm,wm=wm||dm,$m=$m||mm,(sm!==_c||pm!==tp)&&(Cu.blendEquationSeparate($p[sm],$p[pm]),_c=sm,tp=pm),(dm!==_f||mm!==ep||wm!==op||$m!==lp)&&(Cu.blendFuncSeparate(Np[dm],Np[mm],Np[wm],Np[$m]),_f=dm,ep=mm,op=wm,lp=$m),ju=Lp,up=null}function Vp(Lp,sm){Lp.side===DoubleSide?xp(2884):Sp(2884);var dm=Lp.side===BackSide;sm&&(dm=!dm),pp(dm),Lp.blending===NormalBlending&&Lp.transparent===!1?qp(NoBlending):qp(Lp.blending,Lp.blendEquation,Lp.blendSrc,Lp.blendDst,Lp.blendEquationAlpha,Lp.blendSrcAlpha,Lp.blendDstAlpha,Lp.premultipliedAlpha),ku.setFunc(Lp.depthFunc),ku.setTest(Lp.depthTest),ku.setMask(Lp.depthWrite),Du.setMask(Lp.colorWrite);var mm=Lp.stencilWrite;Fu.setTest(mm),mm&&(Fu.setMask(Lp.stencilWriteMask),Fu.setFunc(Lp.stencilFunc,Lp.stencilRef,Lp.stencilFuncMask),Fu.setOp(Lp.stencilFail,Lp.stencilZFail,Lp.stencilZPass)),Up(Lp.polygonOffset,Lp.polygonOffsetFactor,Lp.polygonOffsetUnits)}function pp(Lp){hp!==Lp&&(Lp?Cu.frontFace(2304):Cu.frontFace(2305),hp=Lp)}function bp(Lp){Lp!==CullFaceNone?(Sp(2884),Lp!==np&&(Lp===CullFaceBack?Cu.cullFace(1029):Lp===CullFaceFront?Cu.cullFace(1028):Cu.cullFace(1032))):xp(2884),np=Lp}function zp(Lp){Lp!==rp&&(cp&&Cu.lineWidth(Lp),rp=Lp)}function Up(Lp,sm,dm){Lp?(Sp(32823),(ip!==sm||ap!==dm)&&(Cu.polygonOffset(sm,dm),ip=sm,ap=dm)):xp(32823)}function Jp(Lp){Lp?Sp(3089):xp(3089)}function Xp(Lp){Lp===void 0&&(Lp=33984+sp-1),vp!==Lp&&(Cu.activeTexture(Lp),vp=Lp)}function tm(Lp,sm){vp===null&&Xp();var dm=_p[vp];dm===void 0&&(dm={type:void 0,texture:void 0},_p[vp]=dm),(dm.type!==Lp||dm.texture!==sm)&&(Cu.bindTexture(Lp,sm||Wp[Lp]),dm.type=Lp,dm.texture=sm)}function lm(){var Lp=_p[vp];Lp!==void 0&&Lp.type!==void 0&&(Cu.bindTexture(Lp.type,null),Lp.type=void 0,Lp.texture=void 0)}function am(){try{Cu.compressedTexImage2D.apply(Cu,arguments)}catch(Lp){console.error("THREE.WebGLState:",Lp)}}function fm(){try{Cu.texImage2D.apply(Cu,arguments)}catch(Lp){console.error("THREE.WebGLState:",Lp)}}function rm(){try{Cu.texImage3D.apply(Cu,arguments)}catch(Lp){console.error("THREE.WebGLState:",Lp)}}function um(Lp){wp.equals(Lp)===!1&&(Cu.scissor(Lp.x,Lp.y,Lp.z,Lp.w),wp.copy(Lp))}function om(Lp){Dp.equals(Lp)===!1&&(Cu.viewport(Lp.x,Lp.y,Lp.z,Lp.w),Dp.copy(Lp))}function hm(){for(var Lp=0;Lp<zu.length;Lp++)zu[Lp]===1&&(Cu.disableVertexAttribArray(Lp),zu[Lp]=0);Wu={},vp=null,_p={},_h=null,ju=null,hp=null,np=null,Du.reset(),ku.reset(),Fu.reset()}return{buffers:{color:Du,depth:ku,stencil:Fu},initAttributes:Rp,enableAttribute:Gp,enableAttributeAndDivisor:kp,disableUnusedAttributes:gp,vertexAttribPointer:mp,enable:Sp,disable:xp,useProgram:Ep,setBlending:qp,setMaterial:Vp,setFlipSided:pp,setCullFace:bp,setLineWidth:zp,setPolygonOffset:Up,setScissorTest:Jp,activeTexture:Xp,bindTexture:tm,unbindTexture:lm,compressedTexImage2D:am,texImage2D:fm,texImage3D:rm,scissor:um,viewport:om,reset:hm}}function WebGLTextures(Cu,Tu,Pu,Bu,Lu,Ru,Ou){var Du=Lu.isWebGL2,ku=Lu.maxTextures,Fu=Lu.maxCubemapSize,Nu=Lu.maxTextureSize,Gu=Lu.maxSamples,zu=new WeakMap,Hu,Wu=!1;try{Wu=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _h(pp,bp){return Wu?new OffscreenCanvas(pp,bp):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Xc(pp,bp,zp,Up){var Jp=1;if((pp.width>Up||pp.height>Up)&&(Jp=Up/Math.max(pp.width,pp.height)),Jp<1||bp===!0)if(typeof HTMLImageElement!="undefined"&&pp instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&pp instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&pp instanceof ImageBitmap){var Xp=bp?MathUtils.floorPowerOfTwo:Math.floor,tm=Xp(Jp*pp.width),lm=Xp(Jp*pp.height);Hu===void 0&&(Hu=_h(tm,lm));var am=zp?_h(tm,lm):Hu;am.width=tm,am.height=lm;var fm=am.getContext("2d");return fm.drawImage(pp,0,0,tm,lm),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pp.width+"x"+pp.height+") to ("+tm+"x"+lm+")."),am}else return"data"in pp&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pp.width+"x"+pp.height+")."),pp;return pp}function ju(pp){return MathUtils.isPowerOfTwo(pp.width)&&MathUtils.isPowerOfTwo(pp.height)}function _c(pp){return Du?!1:pp.wrapS!==ClampToEdgeWrapping||pp.wrapT!==ClampToEdgeWrapping||pp.minFilter!==NearestFilter&&pp.minFilter!==LinearFilter}function _f(pp,bp){return pp.generateMipmaps&&bp&&pp.minFilter!==NearestFilter&&pp.minFilter!==LinearFilter}function ep(pp,bp,zp,Up){Cu.generateMipmap(pp);var Jp=Bu.get(bp);Jp.__maxMipLevel=Math.log(Math.max(zp,Up))*Math.LOG2E}function tp(pp,bp,zp){if(Du===!1)return bp;if(pp!==null){if(Cu[pp]!==void 0)return Cu[pp];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pp+"'")}var Up=bp;return bp===6403&&(zp===5126&&(Up=33326),zp===5131&&(Up=33325),zp===5121&&(Up=33321)),bp===6407&&(zp===5126&&(Up=34837),zp===5131&&(Up=34843),zp===5121&&(Up=32849)),bp===6408&&(zp===5126&&(Up=34836),zp===5131&&(Up=34842),zp===5121&&(Up=32856)),(Up===33325||Up===33326||Up===34842||Up===34836)&&Tu.get("EXT_color_buffer_float"),Up}function op(pp){return pp===NearestFilter||pp===NearestMipmapNearestFilter||pp===NearestMipmapLinearFilter?9728:9729}function lp(pp){var bp=pp.target;bp.removeEventListener("dispose",lp),hp(bp),bp.isVideoTexture&&zu.delete(bp),Ou.memory.textures--}function up(pp){var bp=pp.target;bp.removeEventListener("dispose",up),np(bp),Ou.memory.textures--}function hp(pp){var bp=Bu.get(pp);bp.__webglInit!==void 0&&(Cu.deleteTexture(bp.__webglTexture),Bu.remove(pp))}function np(pp){var bp=Bu.get(pp),zp=Bu.get(pp.texture);if(!!pp){if(zp.__webglTexture!==void 0&&Cu.deleteTexture(zp.__webglTexture),pp.depthTexture&&pp.depthTexture.dispose(),pp.isWebGLCubeRenderTarget)for(var Up=0;Up<6;Up++)Cu.deleteFramebuffer(bp.__webglFramebuffer[Up]),bp.__webglDepthbuffer&&Cu.deleteRenderbuffer(bp.__webglDepthbuffer[Up]);else Cu.deleteFramebuffer(bp.__webglFramebuffer),bp.__webglDepthbuffer&&Cu.deleteRenderbuffer(bp.__webglDepthbuffer),bp.__webglMultisampledFramebuffer&&Cu.deleteFramebuffer(bp.__webglMultisampledFramebuffer),bp.__webglColorRenderbuffer&&Cu.deleteRenderbuffer(bp.__webglColorRenderbuffer),bp.__webglDepthRenderbuffer&&Cu.deleteRenderbuffer(bp.__webglDepthRenderbuffer);Bu.remove(pp.texture),Bu.remove(pp)}}var rp=0;function ip(){rp=0}function ap(){var pp=rp;return pp>=ku&&console.warn("THREE.WebGLTextures: Trying to use "+pp+" texture units while this GPU supports only "+ku),rp+=1,pp}function sp(pp,bp){var zp=Bu.get(pp);if(pp.isVideoTexture&&$p(pp),pp.version>0&&zp.__version!==pp.version){var Up=pp.image;if(Up===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Up.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Wp(zp,pp,bp);return}}Pu.activeTexture(33984+bp),Pu.bindTexture(3553,zp.__webglTexture)}function cp(pp,bp){var zp=Bu.get(pp);if(pp.version>0&&zp.__version!==pp.version){Wp(zp,pp,bp);return}Pu.activeTexture(33984+bp),Pu.bindTexture(35866,zp.__webglTexture)}function dp(pp,bp){var zp=Bu.get(pp);if(pp.version>0&&zp.__version!==pp.version){Wp(zp,pp,bp);return}Pu.activeTexture(33984+bp),Pu.bindTexture(32879,zp.__webglTexture)}function fp(pp,bp){if(pp.image.length===6){var zp=Bu.get(pp);if(pp.version>0&&zp.__version!==pp.version){Pp(zp,pp),Pu.activeTexture(33984+bp),Pu.bindTexture(34067,zp.__webglTexture),Cu.pixelStorei(37440,pp.flipY);for(var Up=pp&&(pp.isCompressedTexture||pp.image[0].isCompressedTexture),Jp=pp.image[0]&&pp.image[0].isDataTexture,Xp=[],tm=0;tm<6;tm++)!Up&&!Jp?Xp[tm]=Xc(pp.image[tm],!1,!0,Fu):Xp[tm]=Jp?pp.image[tm].image:pp.image[tm];var lm=Xp[0],am=ju(lm)||Du,fm=Ru.convert(pp.format),rm=Ru.convert(pp.type),um=tp(pp.internalFormat,fm,rm);Dp(34067,pp,am);var om;if(Up){for(var tm=0;tm<6;tm++){om=Xp[tm].mipmaps;for(var hm=0;hm<om.length;hm++){var Lp=om[hm];pp.format!==RGBAFormat&&pp.format!==RGBFormat?fm!==null?Pu.compressedTexImage2D(34069+tm,hm,um,Lp.width,Lp.height,0,Lp.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pu.texImage2D(34069+tm,hm,um,Lp.width,Lp.height,0,fm,rm,Lp.data)}}zp.__maxMipLevel=om.length-1}else{om=pp.mipmaps;for(var tm=0;tm<6;tm++)if(Jp){Pu.texImage2D(34069+tm,0,um,Xp[tm].width,Xp[tm].height,0,fm,rm,Xp[tm].data);for(var hm=0;hm<om.length;hm++){var Lp=om[hm],sm=Lp.image[tm].image;Pu.texImage2D(34069+tm,hm+1,um,sm.width,sm.height,0,fm,rm,sm.data)}}else{Pu.texImage2D(34069+tm,0,um,fm,rm,Xp[tm]);for(var hm=0;hm<om.length;hm++){var Lp=om[hm];Pu.texImage2D(34069+tm,hm+1,um,fm,rm,Lp.image[tm])}}zp.__maxMipLevel=om.length}_f(pp,am)&&ep(34067,pp,lm.width,lm.height),zp.__version=pp.version,pp.onUpdate&&pp.onUpdate(pp)}else Pu.activeTexture(33984+bp),Pu.bindTexture(34067,zp.__webglTexture)}}function vp(pp,bp){Pu.activeTexture(33984+bp),Pu.bindTexture(34067,Bu.get(pp).__webglTexture)}var _p={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},wp={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Dp(pp,bp,zp){zp?(Cu.texParameteri(pp,10242,_p[bp.wrapS]),Cu.texParameteri(pp,10243,_p[bp.wrapT]),(pp===32879||pp===35866)&&Cu.texParameteri(pp,32882,_p[bp.wrapR]),Cu.texParameteri(pp,10240,wp[bp.magFilter]),Cu.texParameteri(pp,10241,wp[bp.minFilter])):(Cu.texParameteri(pp,10242,33071),Cu.texParameteri(pp,10243,33071),(pp===32879||pp===35866)&&Cu.texParameteri(pp,32882,33071),(bp.wrapS!==ClampToEdgeWrapping||bp.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),Cu.texParameteri(pp,10240,op(bp.magFilter)),Cu.texParameteri(pp,10241,op(bp.minFilter)),bp.minFilter!==NearestFilter&&bp.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Up=Tu.get("EXT_texture_filter_anisotropic");if(Up){if(bp.type===FloatType&&Tu.get("OES_texture_float_linear")===null||bp.type===HalfFloatType&&(Du||Tu.get("OES_texture_half_float_linear"))===null)return;(bp.anisotropy>1||Bu.get(bp).__currentAnisotropy)&&(Cu.texParameterf(pp,Up.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(bp.anisotropy,Lu.getMaxAnisotropy())),Bu.get(bp).__currentAnisotropy=bp.anisotropy)}}function Pp(pp,bp){pp.__webglInit===void 0&&(pp.__webglInit=!0,bp.addEventListener("dispose",lp),pp.__webglTexture=Cu.createTexture(),Ou.memory.textures++)}function Wp(pp,bp,zp){var Up=3553;bp.isDataTexture2DArray&&(Up=35866),bp.isDataTexture3D&&(Up=32879),Pp(pp,bp),Pu.activeTexture(33984+zp),Pu.bindTexture(Up,pp.__webglTexture),Cu.pixelStorei(37440,bp.flipY),Cu.pixelStorei(37441,bp.premultiplyAlpha),Cu.pixelStorei(3317,bp.unpackAlignment);var Jp=_c(bp)&&ju(bp.image)===!1,Xp=Xc(bp.image,Jp,!1,Nu),tm=ju(Xp)||Du,lm=Ru.convert(bp.format),am=Ru.convert(bp.type),fm=tp(bp.internalFormat,lm,am);Dp(Up,bp,tm);var rm,um=bp.mipmaps;if(bp.isDepthTexture)fm=6402,Du?bp.type===FloatType?fm=36012:bp.type===UnsignedIntType?fm=33190:bp.type===UnsignedInt248Type?fm=35056:fm=33189:bp.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),bp.format===DepthFormat&&fm===6402&&bp.type!==UnsignedShortType&&bp.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),bp.type=UnsignedShortType,am=Ru.convert(bp.type)),bp.format===DepthStencilFormat&&fm===6402&&(fm=34041,bp.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),bp.type=UnsignedInt248Type,am=Ru.convert(bp.type))),Pu.texImage2D(3553,0,fm,Xp.width,Xp.height,0,lm,am,null);else if(bp.isDataTexture)if(um.length>0&&tm){for(var om=0,hm=um.length;om<hm;om++)rm=um[om],Pu.texImage2D(3553,om,fm,rm.width,rm.height,0,lm,am,rm.data);bp.generateMipmaps=!1,pp.__maxMipLevel=um.length-1}else Pu.texImage2D(3553,0,fm,Xp.width,Xp.height,0,lm,am,Xp.data),pp.__maxMipLevel=0;else if(bp.isCompressedTexture){for(var om=0,hm=um.length;om<hm;om++)rm=um[om],bp.format!==RGBAFormat&&bp.format!==RGBFormat?lm!==null?Pu.compressedTexImage2D(3553,om,fm,rm.width,rm.height,0,rm.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pu.texImage2D(3553,om,fm,rm.width,rm.height,0,lm,am,rm.data);pp.__maxMipLevel=um.length-1}else if(bp.isDataTexture2DArray)Pu.texImage3D(35866,0,fm,Xp.width,Xp.height,Xp.depth,0,lm,am,Xp.data),pp.__maxMipLevel=0;else if(bp.isDataTexture3D)Pu.texImage3D(32879,0,fm,Xp.width,Xp.height,Xp.depth,0,lm,am,Xp.data),pp.__maxMipLevel=0;else if(um.length>0&&tm){for(var om=0,hm=um.length;om<hm;om++)rm=um[om],Pu.texImage2D(3553,om,fm,lm,am,rm);bp.generateMipmaps=!1,pp.__maxMipLevel=um.length-1}else Pu.texImage2D(3553,0,fm,lm,am,Xp),pp.__maxMipLevel=0;_f(bp,tm)&&ep(Up,bp,Xp.width,Xp.height),pp.__version=bp.version,bp.onUpdate&&bp.onUpdate(bp)}function Rp(pp,bp,zp,Up){var Jp=Ru.convert(bp.texture.format),Xp=Ru.convert(bp.texture.type),tm=tp(bp.texture.internalFormat,Jp,Xp);Pu.texImage2D(Up,0,tm,bp.width,bp.height,0,Jp,Xp,null),Cu.bindFramebuffer(36160,pp),Cu.framebufferTexture2D(36160,zp,Up,Bu.get(bp.texture).__webglTexture,0),Cu.bindFramebuffer(36160,null)}function Gp(pp,bp,zp){if(Cu.bindRenderbuffer(36161,pp),bp.depthBuffer&&!bp.stencilBuffer){var Up=33189;if(zp){var Jp=bp.depthTexture;Jp&&Jp.isDepthTexture&&(Jp.type===FloatType?Up=36012:Jp.type===UnsignedIntType&&(Up=33190));var Xp=Ep(bp);Cu.renderbufferStorageMultisample(36161,Xp,Up,bp.width,bp.height)}else Cu.renderbufferStorage(36161,Up,bp.width,bp.height);Cu.framebufferRenderbuffer(36160,36096,36161,pp)}else if(bp.depthBuffer&&bp.stencilBuffer){if(zp){var Xp=Ep(bp);Cu.renderbufferStorageMultisample(36161,Xp,35056,bp.width,bp.height)}else Cu.renderbufferStorage(36161,34041,bp.width,bp.height);Cu.framebufferRenderbuffer(36160,33306,36161,pp)}else{var tm=Ru.convert(bp.texture.format),lm=Ru.convert(bp.texture.type),Up=tp(bp.texture.internalFormat,tm,lm);if(zp){var Xp=Ep(bp);Cu.renderbufferStorageMultisample(36161,Xp,Up,bp.width,bp.height)}else Cu.renderbufferStorage(36161,Up,bp.width,bp.height)}Cu.bindRenderbuffer(36161,null)}function kp(pp,bp){var zp=bp&&bp.isWebGLCubeRenderTarget;if(zp)throw new Error("Depth Texture with cube render targets is not supported");if(Cu.bindFramebuffer(36160,pp),!(bp.depthTexture&&bp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Bu.get(bp.depthTexture).__webglTexture||bp.depthTexture.image.width!==bp.width||bp.depthTexture.image.height!==bp.height)&&(bp.depthTexture.image.width=bp.width,bp.depthTexture.image.height=bp.height,bp.depthTexture.needsUpdate=!0),sp(bp.depthTexture,0);var Up=Bu.get(bp.depthTexture).__webglTexture;if(bp.depthTexture.format===DepthFormat)Cu.framebufferTexture2D(36160,36096,3553,Up,0);else if(bp.depthTexture.format===DepthStencilFormat)Cu.framebufferTexture2D(36160,33306,3553,Up,0);else throw new Error("Unknown depthTexture format")}function gp(pp){var bp=Bu.get(pp),zp=pp.isWebGLCubeRenderTarget===!0;if(pp.depthTexture){if(zp)throw new Error("target.depthTexture not supported in Cube render targets");kp(bp.__webglFramebuffer,pp)}else if(zp){bp.__webglDepthbuffer=[];for(var Up=0;Up<6;Up++)Cu.bindFramebuffer(36160,bp.__webglFramebuffer[Up]),bp.__webglDepthbuffer[Up]=Cu.createRenderbuffer(),Gp(bp.__webglDepthbuffer[Up],pp,!1)}else Cu.bindFramebuffer(36160,bp.__webglFramebuffer),bp.__webglDepthbuffer=Cu.createRenderbuffer(),Gp(bp.__webglDepthbuffer,pp,!1);Cu.bindFramebuffer(36160,null)}function mp(pp){var bp=Bu.get(pp),zp=Bu.get(pp.texture);pp.addEventListener("dispose",up),zp.__webglTexture=Cu.createTexture(),Ou.memory.textures++;var Up=pp.isWebGLCubeRenderTarget===!0,Jp=pp.isWebGLMultisampleRenderTarget===!0,Xp=ju(pp)||Du;if(Du&&pp.texture.format===RGBFormat&&(pp.texture.type===FloatType||pp.texture.type===HalfFloatType)&&(pp.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Up){bp.__webglFramebuffer=[];for(var tm=0;tm<6;tm++)bp.__webglFramebuffer[tm]=Cu.createFramebuffer()}else if(bp.__webglFramebuffer=Cu.createFramebuffer(),Jp)if(Du){bp.__webglMultisampledFramebuffer=Cu.createFramebuffer(),bp.__webglColorRenderbuffer=Cu.createRenderbuffer(),Cu.bindRenderbuffer(36161,bp.__webglColorRenderbuffer);var lm=Ru.convert(pp.texture.format),am=Ru.convert(pp.texture.type),fm=tp(pp.texture.internalFormat,lm,am),rm=Ep(pp);Cu.renderbufferStorageMultisample(36161,rm,fm,pp.width,pp.height),Cu.bindFramebuffer(36160,bp.__webglMultisampledFramebuffer),Cu.framebufferRenderbuffer(36160,36064,36161,bp.__webglColorRenderbuffer),Cu.bindRenderbuffer(36161,null),pp.depthBuffer&&(bp.__webglDepthRenderbuffer=Cu.createRenderbuffer(),Gp(bp.__webglDepthRenderbuffer,pp,!0)),Cu.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Up){Pu.bindTexture(34067,zp.__webglTexture),Dp(34067,pp.texture,Xp);for(var tm=0;tm<6;tm++)Rp(bp.__webglFramebuffer[tm],pp,36064,34069+tm);_f(pp.texture,Xp)&&ep(34067,pp.texture,pp.width,pp.height),Pu.bindTexture(34067,null)}else Pu.bindTexture(3553,zp.__webglTexture),Dp(3553,pp.texture,Xp),Rp(bp.__webglFramebuffer,pp,36064,3553),_f(pp.texture,Xp)&&ep(3553,pp.texture,pp.width,pp.height),Pu.bindTexture(3553,null);pp.depthBuffer&&gp(pp)}function Sp(pp){var bp=pp.texture,zp=ju(pp)||Du;if(_f(bp,zp)){var Up=pp.isWebGLCubeRenderTarget?34067:3553,Jp=Bu.get(bp).__webglTexture;Pu.bindTexture(Up,Jp),ep(Up,bp,pp.width,pp.height),Pu.bindTexture(Up,null)}}function xp(pp){if(pp.isWebGLMultisampleRenderTarget)if(Du){var bp=Bu.get(pp);Cu.bindFramebuffer(36008,bp.__webglMultisampledFramebuffer),Cu.bindFramebuffer(36009,bp.__webglFramebuffer);var zp=pp.width,Up=pp.height,Jp=16384;pp.depthBuffer&&(Jp|=256),pp.stencilBuffer&&(Jp|=1024),Cu.blitFramebuffer(0,0,zp,Up,0,0,zp,Up,Jp,9728),Cu.bindFramebuffer(36160,bp.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Ep(pp){return Du&&pp.isWebGLMultisampleRenderTarget?Math.min(Gu,pp.samples):0}function $p(pp){var bp=Ou.render.frame;zu.get(pp)!==bp&&(zu.set(pp,bp),pp.update())}var Ip=!1,Np=!1;function qp(pp,bp){pp&&pp.isWebGLRenderTarget&&(Ip===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ip=!0),pp=pp.texture),sp(pp,bp)}function Vp(pp,bp){pp&&pp.isWebGLCubeRenderTarget&&(Np===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Np=!0),pp=pp.texture),pp&&pp.isCubeTexture||Array.isArray(pp.image)&&pp.image.length===6?fp(pp,bp):vp(pp,bp)}this.allocateTextureUnit=ap,this.resetTextureUnits=ip,this.setTexture2D=sp,this.setTexture2DArray=cp,this.setTexture3D=dp,this.setTextureCube=fp,this.setTextureCubeDynamic=vp,this.setupRenderTarget=mp,this.updateRenderTargetMipmap=Sp,this.updateMultisampleRenderTarget=xp,this.safeSetTexture2D=qp,this.safeSetTextureCube=Vp}function WebGLUtils(Cu,Tu,Pu){var Bu=Pu.isWebGL2;function Lu(Ru){var Ou;if(Ru===UnsignedByteType)return 5121;if(Ru===UnsignedShort4444Type)return 32819;if(Ru===UnsignedShort5551Type)return 32820;if(Ru===UnsignedShort565Type)return 33635;if(Ru===ByteType)return 5120;if(Ru===ShortType)return 5122;if(Ru===UnsignedShortType)return 5123;if(Ru===IntType)return 5124;if(Ru===UnsignedIntType)return 5125;if(Ru===FloatType)return 5126;if(Ru===HalfFloatType)return Bu?5131:(Ou=Tu.get("OES_texture_half_float"),Ou!==null?Ou.HALF_FLOAT_OES:null);if(Ru===AlphaFormat)return 6406;if(Ru===RGBFormat)return 6407;if(Ru===RGBAFormat)return 6408;if(Ru===LuminanceFormat)return 6409;if(Ru===LuminanceAlphaFormat)return 6410;if(Ru===DepthFormat)return 6402;if(Ru===DepthStencilFormat)return 34041;if(Ru===RedFormat)return 6403;if(Ru===RedIntegerFormat)return 36244;if(Ru===RGFormat)return 33319;if(Ru===RGIntegerFormat)return 33320;if(Ru===RGBIntegerFormat)return 36248;if(Ru===RGBAIntegerFormat)return 36249;if(Ru===RGB_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT1_Format||Ru===RGBA_S3TC_DXT3_Format||Ru===RGBA_S3TC_DXT5_Format)if(Ou=Tu.get("WEBGL_compressed_texture_s3tc"),Ou!==null){if(Ru===RGB_S3TC_DXT1_Format)return Ou.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT1_Format)return Ou.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ru===RGBA_S3TC_DXT3_Format)return Ou.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ru===RGBA_S3TC_DXT5_Format)return Ou.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Ru===RGB_PVRTC_4BPPV1_Format||Ru===RGB_PVRTC_2BPPV1_Format||Ru===RGBA_PVRTC_4BPPV1_Format||Ru===RGBA_PVRTC_2BPPV1_Format)if(Ou=Tu.get("WEBGL_compressed_texture_pvrtc"),Ou!==null){if(Ru===RGB_PVRTC_4BPPV1_Format)return Ou.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ru===RGB_PVRTC_2BPPV1_Format)return Ou.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ru===RGBA_PVRTC_4BPPV1_Format)return Ou.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ru===RGBA_PVRTC_2BPPV1_Format)return Ou.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Ru===RGB_ETC1_Format)return Ou=Tu.get("WEBGL_compressed_texture_etc1"),Ou!==null?Ou.COMPRESSED_RGB_ETC1_WEBGL:null;if((Ru===RGB_ETC2_Format||Ru===RGBA_ETC2_EAC_Format)&&(Ou=Tu.get("WEBGL_compressed_texture_etc"),Ou!==null)){if(Ru===RGB_ETC2_Format)return Ou.COMPRESSED_RGB8_ETC2;if(Ru===RGBA_ETC2_EAC_Format)return Ou.COMPRESSED_RGBA8_ETC2_EAC}if(Ru===RGBA_ASTC_4x4_Format||Ru===RGBA_ASTC_5x4_Format||Ru===RGBA_ASTC_5x5_Format||Ru===RGBA_ASTC_6x5_Format||Ru===RGBA_ASTC_6x6_Format||Ru===RGBA_ASTC_8x5_Format||Ru===RGBA_ASTC_8x6_Format||Ru===RGBA_ASTC_8x8_Format||Ru===RGBA_ASTC_10x5_Format||Ru===RGBA_ASTC_10x6_Format||Ru===RGBA_ASTC_10x8_Format||Ru===RGBA_ASTC_10x10_Format||Ru===RGBA_ASTC_12x10_Format||Ru===RGBA_ASTC_12x12_Format||Ru===SRGB8_ALPHA8_ASTC_4x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x4_Format||Ru===SRGB8_ALPHA8_ASTC_5x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x5_Format||Ru===SRGB8_ALPHA8_ASTC_6x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x5_Format||Ru===SRGB8_ALPHA8_ASTC_8x6_Format||Ru===SRGB8_ALPHA8_ASTC_8x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x5_Format||Ru===SRGB8_ALPHA8_ASTC_10x6_Format||Ru===SRGB8_ALPHA8_ASTC_10x8_Format||Ru===SRGB8_ALPHA8_ASTC_10x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x10_Format||Ru===SRGB8_ALPHA8_ASTC_12x12_Format)return Ou=Tu.get("WEBGL_compressed_texture_astc"),Ou!==null?Ru:null;if(Ru===RGBA_BPTC_Format)return Ou=Tu.get("EXT_texture_compression_bptc"),Ou!==null?Ru:null;if(Ru===UnsignedInt248Type)return Bu?34042:(Ou=Tu.get("WEBGL_depth_texture"),Ou!==null?Ou.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Lu}}function ArrayCamera(Cu){PerspectiveCamera.call(this),this.cameras=Cu||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(Cu){return this._targetRay!==null&&this._targetRay.dispatchEvent(Cu),this._grip!==null&&this._grip.dispatchEvent(Cu),this},disconnect:function(Cu){return this.dispatchEvent({type:"disconnected",data:Cu}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(Cu,Tu,Pu){var Bu=null,Lu=null,Ru=this._targetRay,Ou=this._grip;return Cu&&(Ru!==null&&(Bu=Tu.getPose(Cu.targetRaySpace,Pu),Bu!==null&&(Ru.matrix.fromArray(Bu.transform.matrix),Ru.matrix.decompose(Ru.position,Ru.rotation,Ru.scale))),Ou!==null&&Cu.gripSpace&&(Lu=Tu.getPose(Cu.gripSpace,Pu),Lu!==null&&(Ou.matrix.fromArray(Lu.transform.matrix),Ou.matrix.decompose(Ou.position,Ou.rotation,Ou.scale)))),Ru!==null&&(Ru.visible=Bu!==null),Ou!==null&&(Ou.visible=Lu!==null),this}});function WebXRManager(Cu,Tu){var Pu=this,Bu=null,Lu=1,Ru=null,Ou="local-floor",Du=null,ku=[],Fu=new Map,Nu=new PerspectiveCamera;Nu.layers.enable(1),Nu.viewport=new Vector4;var Gu=new PerspectiveCamera;Gu.layers.enable(2),Gu.viewport=new Vector4;var zu=[Nu,Gu],Hu=new ArrayCamera;Hu.layers.enable(1),Hu.layers.enable(2);var Wu=null,_h=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(rp){var ip=ku[rp];return ip===void 0&&(ip=new WebXRController,ku[rp]=ip),ip.getTargetRaySpace()},this.getControllerGrip=function(rp){var ip=ku[rp];return ip===void 0&&(ip=new WebXRController,ku[rp]=ip),ip.getGripSpace()};function Xc(rp){var ip=Fu.get(rp.inputSource);ip&&ip.dispatchEvent({type:rp.type})}function ju(){Fu.forEach(function(rp,ip){rp.disconnect(ip)}),Fu.clear(),Cu.setFramebuffer(null),Cu.setRenderTarget(Cu.getRenderTarget()),np.stop(),Pu.isPresenting=!1,Pu.dispatchEvent({type:"sessionend"})}function _c(rp){Ru=rp,np.setContext(Bu),np.start(),Pu.isPresenting=!0,Pu.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(rp){Lu=rp,Pu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(rp){Ou=rp,Pu.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ru},this.getSession=function(){return Bu},this.setSession=function(rp){if(Bu=rp,Bu!==null){Bu.addEventListener("select",Xc),Bu.addEventListener("selectstart",Xc),Bu.addEventListener("selectend",Xc),Bu.addEventListener("squeeze",Xc),Bu.addEventListener("squeezestart",Xc),Bu.addEventListener("squeezeend",Xc),Bu.addEventListener("end",ju);var ip=Tu.getContextAttributes();ip.xrCompatible!==!0&&Tu.makeXRCompatible();var ap={antialias:ip.antialias,alpha:ip.alpha,depth:ip.depth,stencil:ip.stencil,framebufferScaleFactor:Lu},sp=new XRWebGLLayer(Bu,Tu,ap);Bu.updateRenderState({baseLayer:sp}),Bu.requestReferenceSpace(Ou).then(_c),Bu.addEventListener("inputsourceschange",_f)}};function _f(rp){for(var ip=Bu.inputSources,ap=0;ap<ku.length;ap++)Fu.set(ip[ap],ku[ap]);for(var ap=0;ap<rp.removed.length;ap++){var sp=rp.removed[ap],cp=Fu.get(sp);cp&&(cp.dispatchEvent({type:"disconnected",data:sp}),Fu.delete(sp))}for(var ap=0;ap<rp.added.length;ap++){var sp=rp.added[ap],cp=Fu.get(sp);cp&&cp.dispatchEvent({type:"connected",data:sp})}}var ep=new Vector3,tp=new Vector3;function op(rp,ip,ap){ep.setFromMatrixPosition(ip.matrixWorld),tp.setFromMatrixPosition(ap.matrixWorld);var sp=ep.distanceTo(tp),cp=ip.projectionMatrix.elements,dp=ap.projectionMatrix.elements,fp=cp[14]/(cp[10]-1),vp=cp[14]/(cp[10]+1),_p=(cp[9]+1)/cp[5],wp=(cp[9]-1)/cp[5],Dp=(cp[8]-1)/cp[0],Pp=(dp[8]+1)/dp[0],Wp=fp*Dp,Rp=fp*Pp,Gp=sp/(-Dp+Pp),kp=Gp*-Dp;ip.matrixWorld.decompose(rp.position,rp.quaternion,rp.scale),rp.translateX(kp),rp.translateZ(Gp),rp.matrixWorld.compose(rp.position,rp.quaternion,rp.scale),rp.matrixWorldInverse.getInverse(rp.matrixWorld);var gp=fp+Gp,mp=vp+Gp,Sp=Wp-kp,xp=Rp+(sp-kp),Ep=_p*vp/mp*gp,$p=wp*vp/mp*gp;rp.projectionMatrix.makePerspective(Sp,xp,Ep,$p,gp,mp)}function lp(rp,ip){ip===null?rp.matrixWorld.copy(rp.matrix):rp.matrixWorld.multiplyMatrices(ip.matrixWorld,rp.matrix),rp.matrixWorldInverse.getInverse(rp.matrixWorld)}this.getCamera=function(rp){Hu.near=Gu.near=Nu.near=rp.near,Hu.far=Gu.far=Nu.far=rp.far,(Wu!==Hu.near||_h!==Hu.far)&&(Bu.updateRenderState({depthNear:Hu.near,depthFar:Hu.far}),Wu=Hu.near,_h=Hu.far);var ip=rp.parent,ap=Hu.cameras;lp(Hu,ip);for(var sp=0;sp<ap.length;sp++)lp(ap[sp],ip);rp.matrixWorld.copy(Hu.matrixWorld);for(var cp=rp.children,sp=0,dp=cp.length;sp<dp;sp++)cp[sp].updateMatrixWorld(!0);return ap.length===2?op(Hu,Nu,Gu):Hu.projectionMatrix.copy(Nu.projectionMatrix),Hu};var up=null;function hp(rp,ip){if(Du=ip.getViewerPose(Ru),Du!==null){var ap=Du.views,sp=Bu.renderState.baseLayer;Cu.setFramebuffer(sp.framebuffer);var cp=!1;ap.length!==Hu.cameras.length&&(Hu.cameras.length=0,cp=!0);for(var dp=0;dp<ap.length;dp++){var fp=ap[dp],vp=sp.getViewport(fp),_p=zu[dp];_p.matrix.fromArray(fp.transform.matrix),_p.projectionMatrix.fromArray(fp.projectionMatrix),_p.viewport.set(vp.x,vp.y,vp.width,vp.height),dp===0&&Hu.matrix.copy(_p.matrix),cp===!0&&Hu.cameras.push(_p)}}for(var wp=Bu.inputSources,dp=0;dp<ku.length;dp++){var Dp=ku[dp],Pp=wp[dp];Dp.update(Pp,ip,Ru)}up&&up(rp,ip)}var np=new WebGLAnimation;np.setAnimationLoop(hp),this.setAnimationLoop=function(rp){up=rp},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(Cu){function Tu(ju,_c){ju.fogColor.value.copy(_c.color),_c.isFog?(ju.fogNear.value=_c.near,ju.fogFar.value=_c.far):_c.isFogExp2&&(ju.fogDensity.value=_c.density)}function Pu(ju,_c,_f,ep,tp){_c.isMeshBasicMaterial?Bu(ju,_c):_c.isMeshLambertMaterial?(Bu(ju,_c),ku(ju,_c)):_c.isMeshToonMaterial?(Bu(ju,_c),Nu(ju,_c)):_c.isMeshPhongMaterial?(Bu(ju,_c),Fu(ju,_c)):_c.isMeshStandardMaterial?(Bu(ju,_c,_f),_c.isMeshPhysicalMaterial?zu(ju,_c,_f):Gu(ju,_c,_f)):_c.isMeshMatcapMaterial?(Bu(ju,_c),Hu(ju,_c)):_c.isMeshDepthMaterial?(Bu(ju,_c),Wu(ju,_c)):_c.isMeshDistanceMaterial?(Bu(ju,_c),_h(ju,_c)):_c.isMeshNormalMaterial?(Bu(ju,_c),Xc(ju,_c)):_c.isLineBasicMaterial?(Lu(ju,_c),_c.isLineDashedMaterial&&Ru(ju,_c)):_c.isPointsMaterial?Ou(ju,_c,ep,tp):_c.isSpriteMaterial?Du(ju,_c):_c.isShadowMaterial?(ju.color.value.copy(_c.color),ju.opacity.value=_c.opacity):_c.isShaderMaterial&&(_c.uniformsNeedUpdate=!1)}function Bu(ju,_c,_f){ju.opacity.value=_c.opacity,_c.color&&ju.diffuse.value.copy(_c.color),_c.emissive&&ju.emissive.value.copy(_c.emissive).multiplyScalar(_c.emissiveIntensity),_c.map&&(ju.map.value=_c.map),_c.alphaMap&&(ju.alphaMap.value=_c.alphaMap),_c.specularMap&&(ju.specularMap.value=_c.specularMap);var ep=_c.envMap||_f;ep&&(ju.envMap.value=ep,ju.flipEnvMap.value=ep.isCubeTexture?-1:1,ju.reflectivity.value=_c.reflectivity,ju.refractionRatio.value=_c.refractionRatio,ju.maxMipLevel.value=Cu.get(ep).__maxMipLevel),_c.lightMap&&(ju.lightMap.value=_c.lightMap,ju.lightMapIntensity.value=_c.lightMapIntensity),_c.aoMap&&(ju.aoMap.value=_c.aoMap,ju.aoMapIntensity.value=_c.aoMapIntensity);var tp;_c.map?tp=_c.map:_c.specularMap?tp=_c.specularMap:_c.displacementMap?tp=_c.displacementMap:_c.normalMap?tp=_c.normalMap:_c.bumpMap?tp=_c.bumpMap:_c.roughnessMap?tp=_c.roughnessMap:_c.metalnessMap?tp=_c.metalnessMap:_c.alphaMap?tp=_c.alphaMap:_c.emissiveMap&&(tp=_c.emissiveMap),tp!==void 0&&(tp.isWebGLRenderTarget&&(tp=tp.texture),tp.matrixAutoUpdate===!0&&tp.updateMatrix(),ju.uvTransform.value.copy(tp.matrix));var op;_c.aoMap?op=_c.aoMap:_c.lightMap&&(op=_c.lightMap),op!==void 0&&(op.isWebGLRenderTarget&&(op=op.texture),op.matrixAutoUpdate===!0&&op.updateMatrix(),ju.uv2Transform.value.copy(op.matrix))}function Lu(ju,_c){ju.diffuse.value.copy(_c.color),ju.opacity.value=_c.opacity}function Ru(ju,_c){ju.dashSize.value=_c.dashSize,ju.totalSize.value=_c.dashSize+_c.gapSize,ju.scale.value=_c.scale}function Ou(ju,_c,_f,ep){ju.diffuse.value.copy(_c.color),ju.opacity.value=_c.opacity,ju.size.value=_c.size*_f,ju.scale.value=ep*.5,_c.map&&(ju.map.value=_c.map),_c.alphaMap&&(ju.alphaMap.value=_c.alphaMap);var tp;_c.map?tp=_c.map:_c.alphaMap&&(tp=_c.alphaMap),tp!==void 0&&(tp.matrixAutoUpdate===!0&&tp.updateMatrix(),ju.uvTransform.value.copy(tp.matrix))}function Du(ju,_c){ju.diffuse.value.copy(_c.color),ju.opacity.value=_c.opacity,ju.rotation.value=_c.rotation,_c.map&&(ju.map.value=_c.map),_c.alphaMap&&(ju.alphaMap.value=_c.alphaMap);var _f;_c.map?_f=_c.map:_c.alphaMap&&(_f=_c.alphaMap),_f!==void 0&&(_f.matrixAutoUpdate===!0&&_f.updateMatrix(),ju.uvTransform.value.copy(_f.matrix))}function ku(ju,_c){_c.emissiveMap&&(ju.emissiveMap.value=_c.emissiveMap)}function Fu(ju,_c){ju.specular.value.copy(_c.specular),ju.shininess.value=Math.max(_c.shininess,1e-4),_c.emissiveMap&&(ju.emissiveMap.value=_c.emissiveMap),_c.bumpMap&&(ju.bumpMap.value=_c.bumpMap,ju.bumpScale.value=_c.bumpScale,_c.side===BackSide&&(ju.bumpScale.value*=-1)),_c.normalMap&&(ju.normalMap.value=_c.normalMap,ju.normalScale.value.copy(_c.normalScale),_c.side===BackSide&&ju.normalScale.value.negate()),_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias)}function Nu(ju,_c){ju.specular.value.copy(_c.specular),ju.shininess.value=Math.max(_c.shininess,1e-4),_c.gradientMap&&(ju.gradientMap.value=_c.gradientMap),_c.emissiveMap&&(ju.emissiveMap.value=_c.emissiveMap),_c.bumpMap&&(ju.bumpMap.value=_c.bumpMap,ju.bumpScale.value=_c.bumpScale,_c.side===BackSide&&(ju.bumpScale.value*=-1)),_c.normalMap&&(ju.normalMap.value=_c.normalMap,ju.normalScale.value.copy(_c.normalScale),_c.side===BackSide&&ju.normalScale.value.negate()),_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias)}function Gu(ju,_c,_f){ju.roughness.value=_c.roughness,ju.metalness.value=_c.metalness,_c.roughnessMap&&(ju.roughnessMap.value=_c.roughnessMap),_c.metalnessMap&&(ju.metalnessMap.value=_c.metalnessMap),_c.emissiveMap&&(ju.emissiveMap.value=_c.emissiveMap),_c.bumpMap&&(ju.bumpMap.value=_c.bumpMap,ju.bumpScale.value=_c.bumpScale,_c.side===BackSide&&(ju.bumpScale.value*=-1)),_c.normalMap&&(ju.normalMap.value=_c.normalMap,ju.normalScale.value.copy(_c.normalScale),_c.side===BackSide&&ju.normalScale.value.negate()),_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias),(_c.envMap||_f)&&(ju.envMapIntensity.value=_c.envMapIntensity)}function zu(ju,_c,_f){Gu(ju,_c,_f),ju.reflectivity.value=_c.reflectivity,ju.clearcoat.value=_c.clearcoat,ju.clearcoatRoughness.value=_c.clearcoatRoughness,_c.sheen&&ju.sheen.value.copy(_c.sheen),_c.clearcoatMap&&(ju.clearcoatMap.value=_c.clearcoatMap),_c.clearcoatRoughnessMap&&(ju.clearcoatRoughnessMap.value=_c.clearcoatRoughnessMap),_c.clearcoatNormalMap&&(ju.clearcoatNormalScale.value.copy(_c.clearcoatNormalScale),ju.clearcoatNormalMap.value=_c.clearcoatNormalMap,_c.side===BackSide&&ju.clearcoatNormalScale.value.negate()),ju.transparency.value=_c.transparency}function Hu(ju,_c){_c.matcap&&(ju.matcap.value=_c.matcap),_c.bumpMap&&(ju.bumpMap.value=_c.bumpMap,ju.bumpScale.value=_c.bumpScale,_c.side===BackSide&&(ju.bumpScale.value*=-1)),_c.normalMap&&(ju.normalMap.value=_c.normalMap,ju.normalScale.value.copy(_c.normalScale),_c.side===BackSide&&ju.normalScale.value.negate()),_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias)}function Wu(ju,_c){_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias)}function _h(ju,_c){_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias),ju.referencePosition.value.copy(_c.referencePosition),ju.nearDistance.value=_c.nearDistance,ju.farDistance.value=_c.farDistance}function Xc(ju,_c){_c.bumpMap&&(ju.bumpMap.value=_c.bumpMap,ju.bumpScale.value=_c.bumpScale,_c.side===BackSide&&(ju.bumpScale.value*=-1)),_c.normalMap&&(ju.normalMap.value=_c.normalMap,ju.normalScale.value.copy(_c.normalScale),_c.side===BackSide&&ju.normalScale.value.negate()),_c.displacementMap&&(ju.displacementMap.value=_c.displacementMap,ju.displacementScale.value=_c.displacementScale,ju.displacementBias.value=_c.displacementBias)}return{refreshFogUniforms:Tu,refreshMaterialUniforms:Pu}}function WebGLRenderer(Cu){Cu=Cu||{};var Tu=Cu.canvas!==void 0?Cu.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Pu=Cu.context!==void 0?Cu.context:null,Bu=Cu.alpha!==void 0?Cu.alpha:!1,Lu=Cu.depth!==void 0?Cu.depth:!0,Ru=Cu.stencil!==void 0?Cu.stencil:!0,Ou=Cu.antialias!==void 0?Cu.antialias:!1,Du=Cu.premultipliedAlpha!==void 0?Cu.premultipliedAlpha:!0,ku=Cu.preserveDrawingBuffer!==void 0?Cu.preserveDrawingBuffer:!1,Fu=Cu.powerPreference!==void 0?Cu.powerPreference:"default",Nu=Cu.failIfMajorPerformanceCaveat!==void 0?Cu.failIfMajorPerformanceCaveat:!1,Gu=null,zu=null;this.domElement=Tu,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Hu=this,Wu=!1,_h=null,Xc=0,ju=0,_c=null,_f=null,ep=-1,tp={geometry:null,program:null,wireframe:!1},op=null,lp=null,up=new Vector4,hp=new Vector4,np=null,rp=Tu.width,ip=Tu.height,ap=1,sp=null,cp=null,dp=new Vector4(0,0,rp,ip),fp=new Vector4(0,0,rp,ip),vp=!1,_p=new Frustum,wp=new WebGLClipping,Dp=!1,Pp=!1,Wp=new Matrix4,Rp=new Vector3;function Gp(){return _c===null?ap:1}var kp;try{var gp={alpha:Bu,depth:Lu,stencil:Ru,antialias:Ou,premultipliedAlpha:Du,preserveDrawingBuffer:ku,powerPreference:Fu,failIfMajorPerformanceCaveat:Nu};if(Tu.addEventListener("webglcontextlost",om,!1),Tu.addEventListener("webglcontextrestored",hm,!1),kp=Pu||Tu.getContext("webgl",gp)||Tu.getContext("experimental-webgl",gp),kp===null)throw Tu.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");kp.getShaderPrecisionFormat===void 0&&(kp.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Cp){throw console.error("THREE.WebGLRenderer: "+Cp.message),Cp}var mp,Sp,xp,Ep,$p,Ip,Np,qp,Vp,pp,bp,zp,Up,Jp,Xp,tm,lm,am;function fm(){mp=new WebGLExtensions(kp),Sp=new WebGLCapabilities(kp,mp,Cu),Sp.isWebGL2===!1&&(mp.get("WEBGL_depth_texture"),mp.get("OES_texture_float"),mp.get("OES_texture_half_float"),mp.get("OES_texture_half_float_linear"),mp.get("OES_standard_derivatives"),mp.get("OES_element_index_uint"),mp.get("ANGLE_instanced_arrays")),mp.get("OES_texture_float_linear"),am=new WebGLUtils(kp,mp,Sp),xp=new WebGLState(kp,mp,Sp),xp.scissor(hp.copy(fp).multiplyScalar(ap).floor()),xp.viewport(up.copy(dp).multiplyScalar(ap).floor()),Ep=new WebGLInfo,$p=new WebGLProperties,Ip=new WebGLTextures(kp,mp,xp,$p,Sp,am,Ep),Np=new WebGLAttributes(kp,Sp),qp=new WebGLGeometries(kp,Np,Ep),Vp=new WebGLObjects(kp,qp,Np,Ep),Xp=new WebGLMorphtargets(kp),pp=new WebGLPrograms(Hu,mp,Sp),bp=new WebGLMaterials($p),zp=new WebGLRenderLists,Up=new WebGLRenderStates,Jp=new WebGLBackground(Hu,xp,Vp,Du),tm=new WebGLBufferRenderer(kp,mp,Ep,Sp),lm=new WebGLIndexedBufferRenderer(kp,mp,Ep,Sp),Ep.programs=pp.programs,Hu.capabilities=Sp,Hu.extensions=mp,Hu.properties=$p,Hu.renderLists=zp,Hu.state=xp,Hu.info=Ep}fm();var rm=new WebXRManager(Hu,kp);this.xr=rm;var um=new WebGLShadowMap(Hu,Vp,Sp.maxTextureSize);this.shadowMap=um,this.getContext=function(){return kp},this.getContextAttributes=function(){return kp.getContextAttributes()},this.forceContextLoss=function(){var Cp=mp.get("WEBGL_lose_context");Cp&&Cp.loseContext()},this.forceContextRestore=function(){var Cp=mp.get("WEBGL_lose_context");Cp&&Cp.restoreContext()},this.getPixelRatio=function(){return ap},this.setPixelRatio=function(Cp){Cp!==void 0&&(ap=Cp,this.setSize(rp,ip,!1))},this.getSize=function(Cp){return Cp===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Cp=new Vector2),Cp.set(rp,ip)},this.setSize=function(Cp,Kp,Qp){if(rm.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}rp=Cp,ip=Kp,Tu.width=Math.floor(Cp*ap),Tu.height=Math.floor(Kp*ap),Qp!==!1&&(Tu.style.width=Cp+"px",Tu.style.height=Kp+"px"),this.setViewport(0,0,Cp,Kp)},this.getDrawingBufferSize=function(Cp){return Cp===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Cp=new Vector2),Cp.set(rp*ap,ip*ap).floor()},this.setDrawingBufferSize=function(Cp,Kp,Qp){rp=Cp,ip=Kp,ap=Qp,Tu.width=Math.floor(Cp*Qp),Tu.height=Math.floor(Kp*Qp),this.setViewport(0,0,Cp,Kp)},this.getCurrentViewport=function(Cp){return Cp===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Cp=new Vector4),Cp.copy(up)},this.getViewport=function(Cp){return Cp.copy(dp)},this.setViewport=function(Cp,Kp,Qp,Zp){Cp.isVector4?dp.set(Cp.x,Cp.y,Cp.z,Cp.w):dp.set(Cp,Kp,Qp,Zp),xp.viewport(up.copy(dp).multiplyScalar(ap).floor())},this.getScissor=function(Cp){return Cp.copy(fp)},this.setScissor=function(Cp,Kp,Qp,Zp){Cp.isVector4?fp.set(Cp.x,Cp.y,Cp.z,Cp.w):fp.set(Cp,Kp,Qp,Zp),xp.scissor(hp.copy(fp).multiplyScalar(ap).floor())},this.getScissorTest=function(){return vp},this.setScissorTest=function(Cp){xp.setScissorTest(vp=Cp)},this.setOpaqueSort=function(Cp){sp=Cp},this.setTransparentSort=function(Cp){cp=Cp},this.getClearColor=function(){return Jp.getClearColor()},this.setClearColor=function(){Jp.setClearColor.apply(Jp,arguments)},this.getClearAlpha=function(){return Jp.getClearAlpha()},this.setClearAlpha=function(){Jp.setClearAlpha.apply(Jp,arguments)},this.clear=function(Cp,Kp,Qp){var Zp=0;(Cp===void 0||Cp)&&(Zp|=16384),(Kp===void 0||Kp)&&(Zp|=256),(Qp===void 0||Qp)&&(Zp|=1024),kp.clear(Zp)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){Tu.removeEventListener("webglcontextlost",om,!1),Tu.removeEventListener("webglcontextrestored",hm,!1),zp.dispose(),Up.dispose(),$p.dispose(),Vp.dispose(),rm.dispose(),Nm.stop()};function om(Cp){Cp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Wu=!0}function hm(){console.log("THREE.WebGLRenderer: Context Restored."),Wu=!1,fm()}function Lp(Cp){var Kp=Cp.target;Kp.removeEventListener("dispose",Lp),sm(Kp)}function sm(Cp){dm(Cp),$p.remove(Cp)}function dm(Cp){var Kp=$p.get(Cp).program;Cp.program=void 0,Kp!==void 0&&pp.releaseProgram(Kp)}function mm(Cp,Kp){Cp.render(function(Qp){Hu.renderBufferImmediate(Qp,Kp)})}this.renderBufferImmediate=function(Cp,Kp){xp.initAttributes();var Qp=$p.get(Cp);Cp.hasPositions&&!Qp.position&&(Qp.position=kp.createBuffer()),Cp.hasNormals&&!Qp.normal&&(Qp.normal=kp.createBuffer()),Cp.hasUvs&&!Qp.uv&&(Qp.uv=kp.createBuffer()),Cp.hasColors&&!Qp.color&&(Qp.color=kp.createBuffer());var Zp=Kp.getAttributes();Cp.hasPositions&&(kp.bindBuffer(34962,Qp.position),kp.bufferData(34962,Cp.positionArray,35048),xp.enableAttribute(Zp.position),kp.vertexAttribPointer(Zp.position,3,5126,!1,0,0)),Cp.hasNormals&&(kp.bindBuffer(34962,Qp.normal),kp.bufferData(34962,Cp.normalArray,35048),xp.enableAttribute(Zp.normal),kp.vertexAttribPointer(Zp.normal,3,5126,!1,0,0)),Cp.hasUvs&&(kp.bindBuffer(34962,Qp.uv),kp.bufferData(34962,Cp.uvArray,35048),xp.enableAttribute(Zp.uv),kp.vertexAttribPointer(Zp.uv,2,5126,!1,0,0)),Cp.hasColors&&(kp.bindBuffer(34962,Qp.color),kp.bufferData(34962,Cp.colorArray,35048),xp.enableAttribute(Zp.color),kp.vertexAttribPointer(Zp.color,3,5126,!1,0,0)),xp.disableUnusedAttributes(),kp.drawArrays(4,0,Cp.count),Cp.count=0};var pm=new Scene;this.renderBufferDirect=function(Cp,Kp,Qp,Zp,cm,Mm){Kp===null&&(Kp=pm);var _m=cm.isMesh&&cm.matrixWorld.determinant()<0,ym=Um(Cp,Kp,Zp,cm);xp.setMaterial(Zp,_m);var bm=!1;(tp.geometry!==Qp.id||tp.program!==ym.id||tp.wireframe!==(Zp.wireframe===!0))&&(tp.geometry=Qp.id,tp.program=ym.id,tp.wireframe=Zp.wireframe===!0,bm=!0),(Zp.morphTargets||Zp.morphNormals)&&(Xp.update(cm,Qp,Zp,ym),bm=!0),cm.isInstancedMesh===!0&&(bm=!0);var Em=Qp.index,Rm=Qp.attributes.position;if(Em===null){if(Rm===void 0||Rm.count===0)return}else if(Em.count===0)return;var yp=1;Zp.wireframe===!0&&(Em=qp.getWireframeAttribute(Qp),yp=2);var Tp,Bp=tm;Em!==null&&(Tp=Np.get(Em),Bp=lm,Bp.setIndex(Tp)),bm&&(wm(cm,Qp,Zp,ym),Em!==null&&kp.bindBuffer(34963,Tp.buffer));var Hp=Em!==null?Em.count:Rm.count,em=Qp.drawRange.start*yp,Am=Qp.drawRange.count*yp,xm=Mm!==null?Mm.start*yp:0,Fm=Mm!==null?Mm.count*yp:1/0,gm=Math.max(em,xm),Vm=Math.min(Hp,em+Am,xm+Fm)-1,Qm=Math.max(0,Vm-gm+1);if(Qm!==0){if(cm.isMesh)Zp.wireframe===!0?(xp.setLineWidth(Zp.wireframeLinewidth*Gp()),Bp.setMode(1)):Bp.setMode(4);else if(cm.isLine){var ox=Zp.linewidth;ox===void 0&&(ox=1),xp.setLineWidth(ox*Gp()),cm.isLineSegments?Bp.setMode(1):cm.isLineLoop?Bp.setMode(2):Bp.setMode(3)}else cm.isPoints?Bp.setMode(0):cm.isSprite&&Bp.setMode(4);if(cm.isInstancedMesh)Bp.renderInstances(Qp,gm,Qm,cm.count);else if(Qp.isInstancedBufferGeometry){var sx=Math.min(Qp.instanceCount,Qp._maxInstanceCount);Bp.renderInstances(Qp,gm,Qm,sx)}else Bp.render(gm,Qm)}};function wm(Cp,Kp,Qp,Zp){if(!(Sp.isWebGL2===!1&&(Cp.isInstancedMesh||Kp.isInstancedBufferGeometry)&&mp.get("ANGLE_instanced_arrays")===null)){xp.initAttributes();var cm=Kp.attributes,Mm=Zp.getAttributes(),_m=Qp.defaultAttributeValues;for(var ym in Mm){var bm=Mm[ym];if(bm>=0){var Em=cm[ym];if(Em!==void 0){var Rm=Em.normalized,yp=Em.itemSize,Tp=Np.get(Em);if(Tp===void 0)continue;var Bp=Tp.buffer,Hp=Tp.type,em=Tp.bytesPerElement;if(Em.isInterleavedBufferAttribute){var Am=Em.data,xm=Am.stride,Fm=Em.offset;Am&&Am.isInstancedInterleavedBuffer?(xp.enableAttributeAndDivisor(bm,Am.meshPerAttribute),Kp._maxInstanceCount===void 0&&(Kp._maxInstanceCount=Am.meshPerAttribute*Am.count)):xp.enableAttribute(bm),kp.bindBuffer(34962,Bp),xp.vertexAttribPointer(bm,yp,Hp,Rm,xm*em,Fm*em)}else Em.isInstancedBufferAttribute?(xp.enableAttributeAndDivisor(bm,Em.meshPerAttribute),Kp._maxInstanceCount===void 0&&(Kp._maxInstanceCount=Em.meshPerAttribute*Em.count)):xp.enableAttribute(bm),kp.bindBuffer(34962,Bp),xp.vertexAttribPointer(bm,yp,Hp,Rm,0,0)}else if(ym==="instanceMatrix"){var Tp=Np.get(Cp.instanceMatrix);if(Tp===void 0)continue;var Bp=Tp.buffer,Hp=Tp.type;xp.enableAttributeAndDivisor(bm+0,1),xp.enableAttributeAndDivisor(bm+1,1),xp.enableAttributeAndDivisor(bm+2,1),xp.enableAttributeAndDivisor(bm+3,1),kp.bindBuffer(34962,Bp),kp.vertexAttribPointer(bm+0,4,Hp,!1,64,0),kp.vertexAttribPointer(bm+1,4,Hp,!1,64,16),kp.vertexAttribPointer(bm+2,4,Hp,!1,64,32),kp.vertexAttribPointer(bm+3,4,Hp,!1,64,48)}else if(_m!==void 0){var gm=_m[ym];if(gm!==void 0)switch(gm.length){case 2:kp.vertexAttrib2fv(bm,gm);break;case 3:kp.vertexAttrib3fv(bm,gm);break;case 4:kp.vertexAttrib4fv(bm,gm);break;default:kp.vertexAttrib1fv(bm,gm)}}}}xp.disableUnusedAttributes()}}this.compile=function(Cp,Kp){zu=Up.get(Cp,Kp),zu.init(),Cp.traverse(function(Zp){Zp.isLight&&(zu.pushLight(Zp),Zp.castShadow&&zu.pushShadow(Zp))}),zu.setupLights(Kp);const Qp={};Cp.traverse(function(Zp){let cm=Zp.material;if(cm)if(Array.isArray(cm))for(let Mm=0;Mm<cm.length;Mm++){let _m=cm[Mm];_m.uuid in Qp||(Im(_m,Cp,Zp),Qp[_m.uuid]=!0)}else cm.uuid in Qp||(Im(cm,Cp,Zp),Qp[cm.uuid]=!0)})};var $m=null;function Pm(Cp){rm.isPresenting||$m&&$m(Cp)}var Nm=new WebGLAnimation;Nm.setAnimationLoop(Pm),typeof window!="undefined"&&Nm.setContext(window),this.setAnimationLoop=function(Cp){$m=Cp,rm.setAnimationLoop(Cp),Nm.start()},this.render=function(Cp,Kp){var Qp,Zp;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Qp=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Zp=arguments[3]),!(Kp&&Kp.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!Wu){tp.geometry=null,tp.program=null,tp.wireframe=!1,ep=-1,op=null,Cp.autoUpdate===!0&&Cp.updateMatrixWorld(),Kp.parent===null&&Kp.updateMatrixWorld(),rm.enabled&&rm.isPresenting&&(Kp=rm.getCamera(Kp)),Cp.onBeforeRender(Hu,Cp,Kp,Qp||_c),zu=Up.get(Cp,Kp),zu.init(),Wp.multiplyMatrices(Kp.projectionMatrix,Kp.matrixWorldInverse),_p.setFromProjectionMatrix(Wp),Pp=this.localClippingEnabled,Dp=wp.init(this.clippingPlanes,Pp,Kp),Gu=zp.get(Cp,Kp),Gu.init(),Tm(Cp,Kp,0,Hu.sortObjects),Gu.finish(),Hu.sortObjects===!0&&Gu.sort(sp,cp),Dp&&wp.beginShadows();var cm=zu.state.shadowsArray;um.render(cm,Cp,Kp),zu.setupLights(Kp),Dp&&wp.endShadows(),this.info.autoReset&&this.info.reset(),Qp!==void 0&&this.setRenderTarget(Qp),Jp.render(Gu,Cp,Kp,Zp);var Mm=Gu.opaque,_m=Gu.transparent;if(Cp.overrideMaterial){var ym=Cp.overrideMaterial;Mm.length&&Dm(Mm,Cp,Kp,ym),_m.length&&Dm(_m,Cp,Kp,ym)}else Mm.length&&Dm(Mm,Cp,Kp),_m.length&&Dm(_m,Cp,Kp);Cp.onAfterRender(Hu,Cp,Kp),_c!==null&&(Ip.updateRenderTargetMipmap(_c),Ip.updateMultisampleRenderTarget(_c)),xp.buffers.depth.setTest(!0),xp.buffers.depth.setMask(!0),xp.buffers.color.setMask(!0),xp.setPolygonOffset(!1),Gu=null,zu=null}};function Tm(Cp,Kp,Qp,Zp){if(Cp.visible!==!1){var cm=Cp.layers.test(Kp.layers);if(cm){if(Cp.isGroup)Qp=Cp.renderOrder;else if(Cp.isLOD)Cp.autoUpdate===!0&&Cp.update(Kp);else if(Cp.isLight)zu.pushLight(Cp),Cp.castShadow&&zu.pushShadow(Cp);else if(Cp.isSprite){if(!Cp.frustumCulled||_p.intersectsSprite(Cp)){Zp&&Rp.setFromMatrixPosition(Cp.matrixWorld).applyMatrix4(Wp);var Mm=Vp.update(Cp),_m=Cp.material;_m.visible&&Gu.push(Cp,Mm,_m,Qp,Rp.z,null)}}else if(Cp.isImmediateRenderObject)Zp&&Rp.setFromMatrixPosition(Cp.matrixWorld).applyMatrix4(Wp),Gu.push(Cp,null,Cp.material,Qp,Rp.z,null);else if((Cp.isMesh||Cp.isLine||Cp.isPoints)&&(Cp.isSkinnedMesh&&Cp.skeleton.frame!==Ep.render.frame&&(Cp.skeleton.update(),Cp.skeleton.frame=Ep.render.frame),!Cp.frustumCulled||_p.intersectsObject(Cp))){Zp&&Rp.setFromMatrixPosition(Cp.matrixWorld).applyMatrix4(Wp);var Mm=Vp.update(Cp),_m=Cp.material;if(Array.isArray(_m))for(var ym=Mm.groups,bm=0,Em=ym.length;bm<Em;bm++){var Rm=ym[bm],yp=_m[Rm.materialIndex];yp&&yp.visible&&Gu.push(Cp,Mm,yp,Qp,Rp.z,Rm)}else _m.visible&&Gu.push(Cp,Mm,_m,Qp,Rp.z,null)}}for(var Tp=Cp.children,bm=0,Em=Tp.length;bm<Em;bm++)Tm(Tp[bm],Kp,Qp,Zp)}}function Dm(Cp,Kp,Qp,Zp){for(var cm=0,Mm=Cp.length;cm<Mm;cm++){var _m=Cp[cm],ym=_m.object,bm=_m.geometry,Em=Zp===void 0?_m.material:Zp,Rm=_m.group;if(Qp.isArrayCamera){lp=Qp;for(var yp=Qp.cameras,Tp=0,Bp=yp.length;Tp<Bp;Tp++){var Hp=yp[Tp];ym.layers.test(Hp.layers)&&(xp.viewport(up.copy(Hp.viewport)),zu.setupLights(Hp),km(ym,Kp,Hp,bm,Em,Rm))}}else lp=null,km(ym,Kp,Qp,bm,Em,Rm)}}function km(Cp,Kp,Qp,Zp,cm,Mm){if(Cp.onBeforeRender(Hu,Kp,Qp,Zp,cm,Mm),zu=Up.get(Kp,lp||Qp),Cp.modelViewMatrix.multiplyMatrices(Qp.matrixWorldInverse,Cp.matrixWorld),Cp.normalMatrix.getNormalMatrix(Cp.modelViewMatrix),Cp.isImmediateRenderObject){var _m=Um(Qp,Kp,cm,Cp);xp.setMaterial(cm),tp.geometry=null,tp.program=null,tp.wireframe=!1,mm(Cp,_m)}else Hu.renderBufferDirect(Qp,Kp,Zp,cm,Cp,Mm);Cp.onAfterRender(Hu,Kp,Qp,Zp,cm,Mm),zu=Up.get(Kp,lp||Qp)}function Im(Cp,Kp,Qp){var Zp=$p.get(Cp),cm=zu.state.lights,Mm=zu.state.shadowsArray,_m=cm.state.version,ym=pp.getParameters(Cp,cm.state,Mm,Kp,wp.numPlanes,wp.numIntersection,Qp),bm=pp.getProgramCacheKey(ym),Em=Zp.program,Rm=!0;if(Em===void 0)Cp.addEventListener("dispose",Lp);else if(Em.cacheKey!==bm)dm(Cp);else if(Zp.lightsStateVersion!==_m)Zp.lightsStateVersion=_m,Rm=!1;else{if(ym.shaderID!==void 0)return;Rm=!1}Rm&&(Em=pp.acquireProgram(ym,bm),Zp.program=Em,Zp.uniforms=ym.uniforms,Zp.outputEncoding=ym.outputEncoding,Cp.program=Em);var yp=Em.getAttributes();if(Cp.morphTargets){Cp.numSupportedMorphTargets=0;for(var Tp=0;Tp<Hu.maxMorphTargets;Tp++)yp["morphTarget"+Tp]>=0&&Cp.numSupportedMorphTargets++}if(Cp.morphNormals){Cp.numSupportedMorphNormals=0;for(var Tp=0;Tp<Hu.maxMorphNormals;Tp++)yp["morphNormal"+Tp]>=0&&Cp.numSupportedMorphNormals++}var Bp=Zp.uniforms;(!Cp.isShaderMaterial&&!Cp.isRawShaderMaterial||Cp.clipping===!0)&&(Zp.numClippingPlanes=wp.numPlanes,Zp.numIntersection=wp.numIntersection,Bp.clippingPlanes=wp.uniform),Zp.environment=Cp.isMeshStandardMaterial?Kp.environment:null,Zp.fog=Kp.fog,Zp.needsLights=Lm(Cp),Zp.lightsStateVersion=_m,Zp.needsLights&&(Bp.ambientLightColor.value=cm.state.ambient,Bp.lightProbe.value=cm.state.probe,Bp.directionalLights.value=cm.state.directional,Bp.directionalLightShadows.value=cm.state.directionalShadow,Bp.spotLights.value=cm.state.spot,Bp.spotLightShadows.value=cm.state.spotShadow,Bp.rectAreaLights.value=cm.state.rectArea,Bp.pointLights.value=cm.state.point,Bp.pointLightShadows.value=cm.state.pointShadow,Bp.hemisphereLights.value=cm.state.hemi,Bp.directionalShadowMap.value=cm.state.directionalShadowMap,Bp.directionalShadowMatrix.value=cm.state.directionalShadowMatrix,Bp.spotShadowMap.value=cm.state.spotShadowMap,Bp.spotShadowMatrix.value=cm.state.spotShadowMatrix,Bp.pointShadowMap.value=cm.state.pointShadowMap,Bp.pointShadowMatrix.value=cm.state.pointShadowMatrix);var Hp=Zp.program.getUniforms(),em=WebGLUniforms.seqWithValue(Hp.seq,Bp);Zp.uniformsList=em}function Um(Cp,Kp,Qp,Zp){Ip.resetTextureUnits();var cm=Kp.fog,Mm=Qp.isMeshStandardMaterial?Kp.environment:null,_m=_c===null?Hu.outputEncoding:_c.texture.encoding,ym=$p.get(Qp),bm=zu.state.lights;if(Dp&&(Pp||Cp!==op)){var Em=Cp===op&&Qp.id===ep;wp.setState(Qp.clippingPlanes,Qp.clipIntersection,Qp.clipShadows,Cp,ym,Em)}Qp.version===ym.__version?(ym.program===void 0||Qp.fog&&ym.fog!==cm||ym.environment!==Mm||ym.needsLights&&ym.lightsStateVersion!==bm.state.version||ym.numClippingPlanes!==void 0&&(ym.numClippingPlanes!==wp.numPlanes||ym.numIntersection!==wp.numIntersection)||ym.outputEncoding!==_m)&&Im(Qp,Kp,Zp):(Im(Qp,Kp,Zp),ym.__version=Qp.version);var Rm=!1,yp=!1,Tp=!1,Bp=ym.program,Hp=Bp.getUniforms(),em=ym.uniforms;if(xp.useProgram(Bp.program)&&(Rm=!0,yp=!0,Tp=!0),Qp.id!==ep&&(ep=Qp.id,yp=!0),Rm||op!==Cp){if(Hp.setValue(kp,"projectionMatrix",Cp.projectionMatrix),Sp.logarithmicDepthBuffer&&Hp.setValue(kp,"logDepthBufFC",2/(Math.log(Cp.far+1)/Math.LN2)),op!==Cp&&(op=Cp,yp=!0,Tp=!0),Qp.isShaderMaterial||Qp.isMeshPhongMaterial||Qp.isMeshToonMaterial||Qp.isMeshStandardMaterial||Qp.envMap){var Am=Hp.map.cameraPosition;Am!==void 0&&Am.setValue(kp,Rp.setFromMatrixPosition(Cp.matrixWorld))}(Qp.isMeshPhongMaterial||Qp.isMeshToonMaterial||Qp.isMeshLambertMaterial||Qp.isMeshBasicMaterial||Qp.isMeshStandardMaterial||Qp.isShaderMaterial)&&Hp.setValue(kp,"isOrthographic",Cp.isOrthographicCamera===!0),(Qp.isMeshPhongMaterial||Qp.isMeshToonMaterial||Qp.isMeshLambertMaterial||Qp.isMeshBasicMaterial||Qp.isMeshStandardMaterial||Qp.isShaderMaterial||Qp.skinning)&&Hp.setValue(kp,"viewMatrix",Cp.matrixWorldInverse)}if(Qp.skinning){Hp.setOptional(kp,Zp,"bindMatrix"),Hp.setOptional(kp,Zp,"bindMatrixInverse");var xm=Zp.skeleton;if(xm){var Fm=xm.bones;if(Sp.floatVertexTextures){if(xm.boneTexture===void 0){var gm=Math.sqrt(Fm.length*4);gm=MathUtils.ceilPowerOfTwo(gm),gm=Math.max(gm,4);var Vm=new Float32Array(gm*gm*4);Vm.set(xm.boneMatrices);var Qm=new DataTexture(Vm,gm,gm,RGBAFormat,FloatType);xm.boneMatrices=Vm,xm.boneTexture=Qm,xm.boneTextureSize=gm}Hp.setValue(kp,"boneTexture",xm.boneTexture,Ip),Hp.setValue(kp,"boneTextureSize",xm.boneTextureSize)}else Hp.setOptional(kp,xm,"boneMatrices")}}return(yp||ym.receiveShadow!==Zp.receiveShadow)&&(ym.receiveShadow=Zp.receiveShadow,Hp.setValue(kp,"receiveShadow",Zp.receiveShadow)),yp&&(Hp.setValue(kp,"toneMappingExposure",Hu.toneMappingExposure),Hp.setValue(kp,"toneMappingWhitePoint",Hu.toneMappingWhitePoint),ym.needsLights&&Wm(em,Tp),cm&&Qp.fog&&bp.refreshFogUniforms(em,cm),bp.refreshMaterialUniforms(em,Qp,Mm,ap,ip),em.ltc_1!==void 0&&(em.ltc_1.value=UniformsLib.LTC_1),em.ltc_2!==void 0&&(em.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(kp,ym.uniformsList,em,Ip)),Qp.isShaderMaterial&&Qp.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(kp,ym.uniformsList,em,Ip),Qp.uniformsNeedUpdate=!1),Qp.isSpriteMaterial&&Hp.setValue(kp,"center",Zp.center),Hp.setValue(kp,"modelViewMatrix",Zp.modelViewMatrix),Hp.setValue(kp,"normalMatrix",Zp.normalMatrix),Hp.setValue(kp,"modelMatrix",Zp.matrixWorld),Bp}function Wm(Cp,Kp){Cp.ambientLightColor.needsUpdate=Kp,Cp.lightProbe.needsUpdate=Kp,Cp.directionalLights.needsUpdate=Kp,Cp.directionalLightShadows.needsUpdate=Kp,Cp.pointLights.needsUpdate=Kp,Cp.pointLightShadows.needsUpdate=Kp,Cp.spotLights.needsUpdate=Kp,Cp.spotLightShadows.needsUpdate=Kp,Cp.rectAreaLights.needsUpdate=Kp,Cp.hemisphereLights.needsUpdate=Kp}function Lm(Cp){return Cp.isMeshLambertMaterial||Cp.isMeshToonMaterial||Cp.isMeshPhongMaterial||Cp.isMeshStandardMaterial||Cp.isShadowMaterial||Cp.isShaderMaterial&&Cp.lights===!0}this.setFramebuffer=function(Cp){_h!==Cp&&_c===null&&kp.bindFramebuffer(36160,Cp),_h=Cp},this.getActiveCubeFace=function(){return Xc},this.getActiveMipmapLevel=function(){return ju},this.getRenderTarget=function(){return _c},this.setRenderTarget=function(Cp,Kp,Qp){_c=Cp,Xc=Kp,ju=Qp,Cp&&$p.get(Cp).__webglFramebuffer===void 0&&Ip.setupRenderTarget(Cp);var Zp=_h,cm=!1;if(Cp){var Mm=$p.get(Cp).__webglFramebuffer;Cp.isWebGLCubeRenderTarget?(Zp=Mm[Kp||0],cm=!0):Cp.isWebGLMultisampleRenderTarget?Zp=$p.get(Cp).__webglMultisampledFramebuffer:Zp=Mm,up.copy(Cp.viewport),hp.copy(Cp.scissor),np=Cp.scissorTest}else up.copy(dp).multiplyScalar(ap).floor(),hp.copy(fp).multiplyScalar(ap).floor(),np=vp;if(_f!==Zp&&(kp.bindFramebuffer(36160,Zp),_f=Zp),xp.viewport(up),xp.scissor(hp),xp.setScissorTest(np),cm){var _m=$p.get(Cp.texture);kp.framebufferTexture2D(36160,36064,34069+(Kp||0),_m.__webglTexture,Qp||0)}},this.readRenderTargetPixels=function(Cp,Kp,Qp,Zp,cm,Mm,_m){if(!(Cp&&Cp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var ym=$p.get(Cp).__webglFramebuffer;if(Cp.isWebGLCubeRenderTarget&&_m!==void 0&&(ym=ym[_m]),ym){var bm=!1;ym!==_f&&(kp.bindFramebuffer(36160,ym),bm=!0);try{var Em=Cp.texture,Rm=Em.format,yp=Em.type;if(Rm!==RGBAFormat&&am.convert(Rm)!==kp.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(yp!==UnsignedByteType&&am.convert(yp)!==kp.getParameter(35738)&&!(yp===FloatType&&(Sp.isWebGL2||mp.get("OES_texture_float")||mp.get("WEBGL_color_buffer_float")))&&!(yp===HalfFloatType&&(Sp.isWebGL2?mp.get("EXT_color_buffer_float"):mp.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}kp.checkFramebufferStatus(36160)===36053?Kp>=0&&Kp<=Cp.width-Zp&&Qp>=0&&Qp<=Cp.height-cm&&kp.readPixels(Kp,Qp,Zp,cm,am.convert(Rm),am.convert(yp),Mm):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{bm&&kp.bindFramebuffer(36160,_f)}}},this.copyFramebufferToTexture=function(Cp,Kp,Qp){Qp===void 0&&(Qp=0);var Zp=Math.pow(2,-Qp),cm=Math.floor(Kp.image.width*Zp),Mm=Math.floor(Kp.image.height*Zp),_m=am.convert(Kp.format);Ip.setTexture2D(Kp,0),kp.copyTexImage2D(3553,Qp,_m,Cp.x,Cp.y,cm,Mm,0),xp.unbindTexture()},this.copyTextureToTexture=function(Cp,Kp,Qp,Zp){Zp===void 0&&(Zp=0);var cm=Kp.image.width,Mm=Kp.image.height,_m=am.convert(Qp.format),ym=am.convert(Qp.type);Ip.setTexture2D(Qp,0),Kp.isDataTexture?kp.texSubImage2D(3553,Zp,Cp.x,Cp.y,cm,Mm,_m,ym,Kp.image.data):Kp.isCompressedTexture?kp.compressedTexSubImage2D(3553,Zp,Cp.x,Cp.y,Kp.mipmaps[0].width,Kp.mipmaps[0].height,_m,Kp.mipmaps[0].data):kp.texSubImage2D(3553,Zp,Cp.x,Cp.y,_m,ym,Kp.image),Zp===0&&Qp.generateMipmaps&&kp.generateMipmap(3553),xp.unbindTexture()},this.initTexture=function(Cp){Ip.setTexture2D(Cp,0),xp.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(Cu,Tu){this.name="",this.color=new Color(Cu),this.density=Tu!==void 0?Tu:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(Cu,Tu,Pu){this.name="",this.color=new Color(Cu),this.near=Tu!==void 0?Tu:1,this.far=Pu!==void 0?Pu:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(Cu,Tu){this.array=Cu,this.stride=Tu,this.count=Cu!==void 0?Cu.length/Tu:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(Cu){Cu===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(Cu){return this.usage=Cu,this},copy:function(Cu){return this.array=new Cu.array.constructor(Cu.array),this.count=Cu.count,this.stride=Cu.stride,this.usage=Cu.usage,this},copyAt:function(Cu,Tu,Pu){Cu*=this.stride,Pu*=Tu.stride;for(var Bu=0,Lu=this.stride;Bu<Lu;Bu++)this.array[Cu+Bu]=Tu.array[Pu+Bu];return this},set:function(Cu,Tu){return Tu===void 0&&(Tu=0),this.array.set(Cu,Tu),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(Cu){return this.onUploadCallback=Cu,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(Cu,Tu,Pu,Bu){this.name="",this.data=Cu,this.itemSize=Tu,this.offset=Pu,this.normalized=Bu===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(Cu){for(var Tu=0,Pu=this.data.count;Tu<Pu;Tu++)_vector$6.x=this.getX(Tu),_vector$6.y=this.getY(Tu),_vector$6.z=this.getZ(Tu),_vector$6.applyMatrix4(Cu),this.setXYZ(Tu,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(Cu,Tu){return this.data.array[Cu*this.data.stride+this.offset]=Tu,this},setY:function(Cu,Tu){return this.data.array[Cu*this.data.stride+this.offset+1]=Tu,this},setZ:function(Cu,Tu){return this.data.array[Cu*this.data.stride+this.offset+2]=Tu,this},setW:function(Cu,Tu){return this.data.array[Cu*this.data.stride+this.offset+3]=Tu,this},getX:function(Cu){return this.data.array[Cu*this.data.stride+this.offset]},getY:function(Cu){return this.data.array[Cu*this.data.stride+this.offset+1]},getZ:function(Cu){return this.data.array[Cu*this.data.stride+this.offset+2]},getW:function(Cu){return this.data.array[Cu*this.data.stride+this.offset+3]},setXY:function(Cu,Tu,Pu){return Cu=Cu*this.data.stride+this.offset,this.data.array[Cu+0]=Tu,this.data.array[Cu+1]=Pu,this},setXYZ:function(Cu,Tu,Pu,Bu){return Cu=Cu*this.data.stride+this.offset,this.data.array[Cu+0]=Tu,this.data.array[Cu+1]=Pu,this.data.array[Cu+2]=Bu,this},setXYZW:function(Cu,Tu,Pu,Bu,Lu){return Cu=Cu*this.data.stride+this.offset,this.data.array[Cu+0]=Tu,this.data.array[Cu+1]=Pu,this.data.array[Cu+2]=Bu,this.data.array[Cu+3]=Lu,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var Cu=[],Tu=0;Tu<this.count;Tu++)for(var Pu=Tu*this.data.stride+this.offset,Bu=0;Bu<this.itemSize;Bu++)Cu.push(this.data.array[Pu+Bu]);return new BufferAttribute(new this.array.constructor(Cu),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var Cu=[],Tu=0;Tu<this.count;Tu++)for(var Pu=Tu*this.data.stride+this.offset,Bu=0;Bu<this.itemSize;Bu++)Cu.push(this.data.array[Pu+Bu]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:Cu,normalized:this.normalized}}});function SpriteMaterial(Cu){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(Cu)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.map=Cu.map,this.alphaMap=Cu.alphaMap,this.rotation=Cu.rotation,this.sizeAttenuation=Cu.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(Cu){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var Tu=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Pu=new InterleavedBuffer(Tu,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Pu,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Pu,2,3,!1))}this.geometry=_geometry,this.material=Cu!==void 0?Cu:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(Cu,Tu){Cu.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(Cu.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(Cu.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),Cu.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var Pu=this.material.rotation,Bu,Lu;Pu!==0&&(Lu=Math.cos(Pu),Bu=Math.sin(Pu));var Ru=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Ru,_worldScale,Bu,Lu),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Ru,_worldScale,Bu,Lu),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Ru,_worldScale,Bu,Lu),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Ou=Cu.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Ou===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Ru,_worldScale,Bu,Lu),_uvB$1.set(0,1),Ou=Cu.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Ou===null))){var Du=Cu.ray.origin.distanceTo(_intersectPoint);Du<Cu.near||Du>Cu.far||Tu.push({distance:Du,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(Cu){return Object3D.prototype.copy.call(this,Cu),Cu.center!==void 0&&this.center.copy(Cu.center),this}});function transformVertex(Cu,Tu,Pu,Bu,Lu,Ru){_alignedPosition.subVectors(Cu,Pu).addScalar(.5).multiply(Bu),Lu!==void 0?(_rotatedPosition.x=Ru*_alignedPosition.x-Lu*_alignedPosition.y,_rotatedPosition.y=Lu*_alignedPosition.x+Ru*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),Cu.copy(Tu),Cu.x+=_rotatedPosition.x,Cu.y+=_rotatedPosition.y,Cu.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(Cu){Object3D.prototype.copy.call(this,Cu,!1);for(var Tu=Cu.levels,Pu=0,Bu=Tu.length;Pu<Bu;Pu++){var Lu=Tu[Pu];this.addLevel(Lu.object.clone(),Lu.distance)}return this.autoUpdate=Cu.autoUpdate,this},addLevel:function(Cu,Tu){Tu===void 0&&(Tu=0),Tu=Math.abs(Tu);for(var Pu=this.levels,Bu=0;Bu<Pu.length&&!(Tu<Pu[Bu].distance);Bu++);return Pu.splice(Bu,0,{distance:Tu,object:Cu}),this.add(Cu),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(Cu){var Tu=this.levels;if(Tu.length>0){for(var Pu=1,Bu=Tu.length;Pu<Bu&&!(Cu<Tu[Pu].distance);Pu++);return Tu[Pu-1].object}return null},raycast:function(Cu,Tu){var Pu=this.levels;if(Pu.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Bu=Cu.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Bu).raycast(Cu,Tu)}},update:function(Cu){var Tu=this.levels;if(Tu.length>1){_v1$4.setFromMatrixPosition(Cu.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var Pu=_v1$4.distanceTo(_v2$2)/Cu.zoom;Tu[0].object.visible=!0;for(var Bu=1,Lu=Tu.length;Bu<Lu&&Pu>=Tu[Bu].distance;Bu++)Tu[Bu-1].object.visible=!1,Tu[Bu].object.visible=!0;for(this._currentLevel=Bu-1;Bu<Lu;Bu++)Tu[Bu].object.visible=!1}},toJSON:function(Cu){var Tu=Object3D.prototype.toJSON.call(this,Cu);this.autoUpdate===!1&&(Tu.object.autoUpdate=!1),Tu.object.levels=[];for(var Pu=this.levels,Bu=0,Lu=Pu.length;Bu<Lu;Bu++){var Ru=Pu[Bu];Tu.object.levels.push({object:Ru.object.uuid,distance:Ru.distance})}return Tu}});function SkinnedMesh(Cu,Tu){Cu&&Cu.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,Cu,Tu),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(Cu,Tu){this.skeleton=Cu,Tu===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Tu=this.matrixWorld),this.bindMatrix.copy(Tu),this.bindMatrixInverse.getInverse(Tu)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var Cu=new Vector4,Tu=this.geometry.attributes.skinWeight,Pu=0,Bu=Tu.count;Pu<Bu;Pu++){Cu.x=Tu.getX(Pu),Cu.y=Tu.getY(Pu),Cu.z=Tu.getZ(Pu),Cu.w=Tu.getW(Pu);var Lu=1/Cu.manhattanLength();Lu!==1/0?Cu.multiplyScalar(Lu):Cu.set(1,0,0,0),Tu.setXYZW(Pu,Cu.x,Cu.y,Cu.z,Cu.w)}},updateMatrixWorld:function(Cu){Mesh.prototype.updateMatrixWorld.call(this,Cu),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var Cu=new Vector3,Tu=new Vector4,Pu=new Vector4,Bu=new Vector3,Lu=new Matrix4;return function(Ru,Ou){var Du=this.skeleton,ku=this.geometry;Tu.fromBufferAttribute(ku.attributes.skinIndex,Ru),Pu.fromBufferAttribute(ku.attributes.skinWeight,Ru),Cu.fromBufferAttribute(ku.attributes.position,Ru).applyMatrix4(this.bindMatrix),Ou.set(0,0,0);for(var Fu=0;Fu<4;Fu++){var Nu=Pu.getComponent(Fu);if(Nu!==0){var Gu=Tu.getComponent(Fu);Lu.multiplyMatrices(Du.bones[Gu].matrixWorld,Du.boneInverses[Gu]),Ou.addScaledVector(Bu.copy(Cu).applyMatrix4(Lu),Nu)}}return Ou.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(Cu,Tu){if(Cu=Cu||[],this.bones=Cu.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,Tu===void 0)this.calculateInverses();else if(this.bones.length===Tu.length)this.boneInverses=Tu.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Pu=0,Bu=this.bones.length;Pu<Bu;Pu++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var Cu=0,Tu=this.bones.length;Cu<Tu;Cu++){var Pu=new Matrix4;this.bones[Cu]&&Pu.getInverse(this.bones[Cu].matrixWorld),this.boneInverses.push(Pu)}},pose:function(){var Cu,Tu,Pu;for(Tu=0,Pu=this.bones.length;Tu<Pu;Tu++)Cu=this.bones[Tu],Cu&&Cu.matrixWorld.getInverse(this.boneInverses[Tu]);for(Tu=0,Pu=this.bones.length;Tu<Pu;Tu++)Cu=this.bones[Tu],Cu&&(Cu.parent&&Cu.parent.isBone?(Cu.matrix.getInverse(Cu.parent.matrixWorld),Cu.matrix.multiply(Cu.matrixWorld)):Cu.matrix.copy(Cu.matrixWorld),Cu.matrix.decompose(Cu.position,Cu.quaternion,Cu.scale))},update:function(){for(var Cu=this.bones,Tu=this.boneInverses,Pu=this.boneMatrices,Bu=this.boneTexture,Lu=0,Ru=Cu.length;Lu<Ru;Lu++){var Ou=Cu[Lu]?Cu[Lu].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Ou,Tu[Lu]),_offsetMatrix.toArray(Pu,Lu*16)}Bu!==void 0&&(Bu.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(Cu){for(var Tu=0,Pu=this.bones.length;Tu<Pu;Tu++){var Bu=this.bones[Tu];if(Bu.name===Cu)return Bu}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(Cu,Tu,Pu){Mesh.call(this,Cu,Tu),this.instanceMatrix=new BufferAttribute(new Float32Array(Pu*16),16),this.count=Pu,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(Cu,Tu){Tu.fromArray(this.instanceMatrix.array,Cu*16)},raycast:function(Cu,Tu){var Pu=this.matrixWorld,Bu=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Lu=0;Lu<Bu;Lu++){this.getMatrixAt(Lu,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Pu,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(Cu,_instanceIntersects);for(var Ru=0,Ou=_instanceIntersects.length;Ru<Ou;Ru++){var Du=_instanceIntersects[Ru];Du.instanceId=Lu,Du.object=this,Tu.push(Du)}_instanceIntersects.length=0}},setMatrixAt:function(Cu,Tu){Tu.toArray(this.instanceMatrix.array,Cu*16)},updateMorphTargets:function(){}});function LineBasicMaterial(Cu){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(Cu)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.linewidth=Cu.linewidth,this.linecap=Cu.linecap,this.linejoin=Cu.linejoin,this.morphTargets=Cu.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(Cu,Tu,Pu){Pu===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=Cu!==void 0?Cu:new BufferGeometry,this.material=Tu!==void 0?Tu:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var Cu=this.geometry;if(Cu.isBufferGeometry)if(Cu.index===null){for(var Tu=Cu.attributes.position,Pu=[0],Bu=1,Lu=Tu.count;Bu<Lu;Bu++)_start.fromBufferAttribute(Tu,Bu-1),_end.fromBufferAttribute(Tu,Bu),Pu[Bu]=Pu[Bu-1],Pu[Bu]+=_start.distanceTo(_end);Cu.setAttribute("lineDistance",new Float32BufferAttribute(Pu,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(Cu.isGeometry){var Ru=Cu.vertices,Pu=Cu.lineDistances;Pu[0]=0;for(var Bu=1,Lu=Ru.length;Bu<Lu;Bu++)Pu[Bu]=Pu[Bu-1],Pu[Bu]+=Ru[Bu-1].distanceTo(Ru[Bu])}return this},raycast:function(Cu,Tu){var Pu=this.geometry,Bu=this.matrixWorld,Lu=Cu.params.Line.threshold;if(Pu.boundingSphere===null&&Pu.computeBoundingSphere(),_sphere$2.copy(Pu.boundingSphere),_sphere$2.applyMatrix4(Bu),_sphere$2.radius+=Lu,Cu.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Bu),_ray$1.copy(Cu.ray).applyMatrix4(_inverseMatrix$1);var Ru=Lu/((this.scale.x+this.scale.y+this.scale.z)/3),Ou=Ru*Ru,Du=new Vector3,ku=new Vector3,Fu=new Vector3,Nu=new Vector3,Gu=this&&this.isLineSegments?2:1;if(Pu.isBufferGeometry){var zu=Pu.index,Hu=Pu.attributes,Wu=Hu.position.array;if(zu!==null)for(var _h=zu.array,Xc=0,ju=_h.length-1;Xc<ju;Xc+=Gu){var _c=_h[Xc],_f=_h[Xc+1];Du.fromArray(Wu,_c*3),ku.fromArray(Wu,_f*3);var ep=_ray$1.distanceSqToSegment(Du,ku,Nu,Fu);if(!(ep>Ou)){Nu.applyMatrix4(this.matrixWorld);var tp=Cu.ray.origin.distanceTo(Nu);tp<Cu.near||tp>Cu.far||Tu.push({distance:tp,point:Fu.clone().applyMatrix4(this.matrixWorld),index:Xc,face:null,faceIndex:null,object:this})}}else for(var Xc=0,ju=Wu.length/3-1;Xc<ju;Xc+=Gu){Du.fromArray(Wu,3*Xc),ku.fromArray(Wu,3*Xc+3);var ep=_ray$1.distanceSqToSegment(Du,ku,Nu,Fu);if(!(ep>Ou)){Nu.applyMatrix4(this.matrixWorld);var tp=Cu.ray.origin.distanceTo(Nu);tp<Cu.near||tp>Cu.far||Tu.push({distance:tp,point:Fu.clone().applyMatrix4(this.matrixWorld),index:Xc,face:null,faceIndex:null,object:this})}}}else if(Pu.isGeometry)for(var op=Pu.vertices,lp=op.length,Xc=0;Xc<lp-1;Xc+=Gu){var ep=_ray$1.distanceSqToSegment(op[Xc],op[Xc+1],Nu,Fu);if(!(ep>Ou)){Nu.applyMatrix4(this.matrixWorld);var tp=Cu.ray.origin.distanceTo(Nu);tp<Cu.near||tp>Cu.far||Tu.push({distance:tp,point:Fu.clone().applyMatrix4(this.matrixWorld),index:Xc,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var Cu=this.geometry,Tu,Pu,Bu;if(Cu.isBufferGeometry){var Lu=Cu.morphAttributes,Ru=Object.keys(Lu);if(Ru.length>0){var Ou=Lu[Ru[0]];if(Ou!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Pu=Ou.length;Tu<Pu;Tu++)Bu=Ou[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Bu]=Tu}}else{var Du=Cu.morphTargets;Du!==void 0&&Du.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(Cu,Tu){Line$1.call(this,Cu,Tu),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var Cu=this.geometry;if(Cu.isBufferGeometry)if(Cu.index===null){for(var Tu=Cu.attributes.position,Pu=[],Bu=0,Lu=Tu.count;Bu<Lu;Bu+=2)_start$1.fromBufferAttribute(Tu,Bu),_end$1.fromBufferAttribute(Tu,Bu+1),Pu[Bu]=Bu===0?0:Pu[Bu-1],Pu[Bu+1]=Pu[Bu]+_start$1.distanceTo(_end$1);Cu.setAttribute("lineDistance",new Float32BufferAttribute(Pu,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(Cu.isGeometry)for(var Ru=Cu.vertices,Pu=Cu.lineDistances,Bu=0,Lu=Ru.length;Bu<Lu;Bu+=2)_start$1.copy(Ru[Bu]),_end$1.copy(Ru[Bu+1]),Pu[Bu]=Bu===0?0:Pu[Bu-1],Pu[Bu+1]=Pu[Bu]+_start$1.distanceTo(_end$1);return this}});function LineLoop(Cu,Tu){Line$1.call(this,Cu,Tu),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(Cu){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(Cu)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.map=Cu.map,this.alphaMap=Cu.alphaMap,this.size=Cu.size,this.sizeAttenuation=Cu.sizeAttenuation,this.morphTargets=Cu.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(Cu,Tu){Object3D.call(this),this.type="Points",this.geometry=Cu!==void 0?Cu:new BufferGeometry,this.material=Tu!==void 0?Tu:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(Cu,Tu){var Pu=this.geometry,Bu=this.matrixWorld,Lu=Cu.params.Points.threshold;if(Pu.boundingSphere===null&&Pu.computeBoundingSphere(),_sphere$3.copy(Pu.boundingSphere),_sphere$3.applyMatrix4(Bu),_sphere$3.radius+=Lu,Cu.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Bu),_ray$2.copy(Cu.ray).applyMatrix4(_inverseMatrix$2);var Ru=Lu/((this.scale.x+this.scale.y+this.scale.z)/3),Ou=Ru*Ru;if(Pu.isBufferGeometry){var Du=Pu.index,ku=Pu.attributes,Fu=ku.position.array;if(Du!==null)for(var Nu=Du.array,Gu=0,zu=Nu.length;Gu<zu;Gu++){var Hu=Nu[Gu];_position$1.fromArray(Fu,Hu*3),testPoint(_position$1,Hu,Ou,Bu,Cu,Tu,this)}else for(var Gu=0,Wu=Fu.length/3;Gu<Wu;Gu++)_position$1.fromArray(Fu,Gu*3),testPoint(_position$1,Gu,Ou,Bu,Cu,Tu,this)}else for(var _h=Pu.vertices,Gu=0,Wu=_h.length;Gu<Wu;Gu++)testPoint(_h[Gu],Gu,Ou,Bu,Cu,Tu,this)}},updateMorphTargets:function(){var Cu=this.geometry,Tu,Pu,Bu;if(Cu.isBufferGeometry){var Lu=Cu.morphAttributes,Ru=Object.keys(Lu);if(Ru.length>0){var Ou=Lu[Ru[0]];if(Ou!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},Tu=0,Pu=Ou.length;Tu<Pu;Tu++)Bu=Ou[Tu].name||String(Tu),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Bu]=Tu}}else{var Du=Cu.morphTargets;Du!==void 0&&Du.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(Cu,Tu,Pu,Bu,Lu,Ru,Ou){var Du=_ray$2.distanceSqToPoint(Cu);if(Du<Pu){var ku=new Vector3;_ray$2.closestPointToPoint(Cu,ku),ku.applyMatrix4(Bu);var Fu=Lu.ray.origin.distanceTo(ku);if(Fu<Lu.near||Fu>Lu.far)return;Ru.push({distance:Fu,distanceToRay:Math.sqrt(Du),point:ku,index:Tu,face:null,object:Ou})}}function VideoTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){Texture.call(this,Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku),this.format=Ou!==void 0?Ou:RGBFormat,this.minFilter=Ru!==void 0?Ru:LinearFilter,this.magFilter=Lu!==void 0?Lu:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var Cu=this.image;Cu.readyState>=Cu.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu){Texture.call(this,null,Ru,Ou,Du,ku,Fu,Bu,Lu,Nu,Gu),this.image={width:Tu,height:Pu},this.mipmaps=Cu,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){Texture.call(this,Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu){if(Fu=Fu!==void 0?Fu:DepthFormat,Fu!==DepthFormat&&Fu!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Pu===void 0&&Fu===DepthFormat&&(Pu=UnsignedShortType),Pu===void 0&&Fu===DepthStencilFormat&&(Pu=UnsignedInt248Type),Texture.call(this,null,Bu,Lu,Ru,Ou,Du,Fu,Pu,ku),this.image={width:Cu,height:Tu},this.magFilter=Ou!==void 0?Ou:NearestFilter,this.minFilter=Du!==void 0?Du:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(Cu){BufferGeometry.call(this),this.type="WireframeGeometry";var Tu=[],Pu,Bu,Lu,Ru,Ou,Du=[0,0],ku={},Fu,Nu,Gu,zu,Hu=["a","b","c"],Wu;if(Cu&&Cu.isGeometry){var _h=Cu.faces;for(Pu=0,Lu=_h.length;Pu<Lu;Pu++){var Xc=_h[Pu];for(Bu=0;Bu<3;Bu++)Nu=Xc[Hu[Bu]],Gu=Xc[Hu[(Bu+1)%3]],Du[0]=Math.min(Nu,Gu),Du[1]=Math.max(Nu,Gu),zu=Du[0]+","+Du[1],ku[zu]===void 0&&(ku[zu]={index1:Du[0],index2:Du[1]})}for(zu in ku)Fu=ku[zu],Wu=Cu.vertices[Fu.index1],Tu.push(Wu.x,Wu.y,Wu.z),Wu=Cu.vertices[Fu.index2],Tu.push(Wu.x,Wu.y,Wu.z)}else if(Cu&&Cu.isBufferGeometry){var ju,_c,_f,ep,tp,op,lp,up;if(Wu=new Vector3,Cu.index!==null){for(ju=Cu.attributes.position,_c=Cu.index,_f=Cu.groups,_f.length===0&&(_f=[{start:0,count:_c.count,materialIndex:0}]),Ru=0,Ou=_f.length;Ru<Ou;++Ru)for(ep=_f[Ru],tp=ep.start,op=ep.count,Pu=tp,Lu=tp+op;Pu<Lu;Pu+=3)for(Bu=0;Bu<3;Bu++)Nu=_c.getX(Pu+Bu),Gu=_c.getX(Pu+(Bu+1)%3),Du[0]=Math.min(Nu,Gu),Du[1]=Math.max(Nu,Gu),zu=Du[0]+","+Du[1],ku[zu]===void 0&&(ku[zu]={index1:Du[0],index2:Du[1]});for(zu in ku)Fu=ku[zu],Wu.fromBufferAttribute(ju,Fu.index1),Tu.push(Wu.x,Wu.y,Wu.z),Wu.fromBufferAttribute(ju,Fu.index2),Tu.push(Wu.x,Wu.y,Wu.z)}else for(ju=Cu.attributes.position,Pu=0,Lu=ju.count/3;Pu<Lu;Pu++)for(Bu=0;Bu<3;Bu++)lp=3*Pu+Bu,Wu.fromBufferAttribute(ju,lp),Tu.push(Wu.x,Wu.y,Wu.z),up=3*Pu+(Bu+1)%3,Wu.fromBufferAttribute(ju,up),Tu.push(Wu.x,Wu.y,Wu.z)}this.setAttribute("position",new Float32BufferAttribute(Tu,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(Cu,Tu,Pu){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:Cu,slices:Tu,stacks:Pu},this.fromBufferGeometry(new ParametricBufferGeometry(Cu,Tu,Pu)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(Cu,Tu,Pu){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:Cu,slices:Tu,stacks:Pu};var Bu=[],Lu=[],Ru=[],Ou=[],Du=1e-5,ku=new Vector3,Fu=new Vector3,Nu=new Vector3,Gu=new Vector3,zu=new Vector3,Hu,Wu;Cu.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var _h=Tu+1;for(Hu=0;Hu<=Pu;Hu++){var Xc=Hu/Pu;for(Wu=0;Wu<=Tu;Wu++){var ju=Wu/Tu;Cu(ju,Xc,Fu),Lu.push(Fu.x,Fu.y,Fu.z),ju-Du>=0?(Cu(ju-Du,Xc,Nu),Gu.subVectors(Fu,Nu)):(Cu(ju+Du,Xc,Nu),Gu.subVectors(Nu,Fu)),Xc-Du>=0?(Cu(ju,Xc-Du,Nu),zu.subVectors(Fu,Nu)):(Cu(ju,Xc+Du,Nu),zu.subVectors(Nu,Fu)),ku.crossVectors(Gu,zu).normalize(),Ru.push(ku.x,ku.y,ku.z),Ou.push(ju,Xc)}}for(Hu=0;Hu<Pu;Hu++)for(Wu=0;Wu<Tu;Wu++){var _c=Hu*_h+Wu,_f=Hu*_h+Wu+1,ep=(Hu+1)*_h+Wu+1,tp=(Hu+1)*_h+Wu;Bu.push(_c,_f,tp),Bu.push(_f,ep,tp)}this.setIndex(Bu),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(Cu,Tu,Pu,Bu){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:Cu,indices:Tu,radius:Pu,detail:Bu},this.fromBufferGeometry(new PolyhedronBufferGeometry(Cu,Tu,Pu,Bu)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(Cu,Tu,Pu,Bu){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:Cu,indices:Tu,radius:Pu,detail:Bu},Pu=Pu||1,Bu=Bu||0;var Lu=[],Ru=[];Ou(Bu),ku(Pu),Fu(),this.setAttribute("position",new Float32BufferAttribute(Lu,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2)),Bu===0?this.computeVertexNormals():this.normalizeNormals();function Ou(ju){for(var _c=new Vector3,_f=new Vector3,ep=new Vector3,tp=0;tp<Tu.length;tp+=3)zu(Tu[tp+0],_c),zu(Tu[tp+1],_f),zu(Tu[tp+2],ep),Du(_c,_f,ep,ju)}function Du(ju,_c,_f,ep){var tp=Math.pow(2,ep),op=[],lp,up;for(lp=0;lp<=tp;lp++){op[lp]=[];var hp=ju.clone().lerp(_f,lp/tp),np=_c.clone().lerp(_f,lp/tp),rp=tp-lp;for(up=0;up<=rp;up++)up===0&&lp===tp?op[lp][up]=hp:op[lp][up]=hp.clone().lerp(np,up/rp)}for(lp=0;lp<tp;lp++)for(up=0;up<2*(tp-lp)-1;up++){var ip=Math.floor(up/2);up%2===0?(Gu(op[lp][ip+1]),Gu(op[lp+1][ip]),Gu(op[lp][ip])):(Gu(op[lp][ip+1]),Gu(op[lp+1][ip+1]),Gu(op[lp+1][ip]))}}function ku(ju){for(var _c=new Vector3,_f=0;_f<Lu.length;_f+=3)_c.x=Lu[_f+0],_c.y=Lu[_f+1],_c.z=Lu[_f+2],_c.normalize().multiplyScalar(ju),Lu[_f+0]=_c.x,Lu[_f+1]=_c.y,Lu[_f+2]=_c.z}function Fu(){for(var ju=new Vector3,_c=0;_c<Lu.length;_c+=3){ju.x=Lu[_c+0],ju.y=Lu[_c+1],ju.z=Lu[_c+2];var _f=_h(ju)/2/Math.PI+.5,ep=Xc(ju)/Math.PI+.5;Ru.push(_f,1-ep)}Hu(),Nu()}function Nu(){for(var ju=0;ju<Ru.length;ju+=6){var _c=Ru[ju+0],_f=Ru[ju+2],ep=Ru[ju+4],tp=Math.max(_c,_f,ep),op=Math.min(_c,_f,ep);tp>.9&&op<.1&&(_c<.2&&(Ru[ju+0]+=1),_f<.2&&(Ru[ju+2]+=1),ep<.2&&(Ru[ju+4]+=1))}}function Gu(ju){Lu.push(ju.x,ju.y,ju.z)}function zu(ju,_c){var _f=ju*3;_c.x=Cu[_f+0],_c.y=Cu[_f+1],_c.z=Cu[_f+2]}function Hu(){for(var ju=new Vector3,_c=new Vector3,_f=new Vector3,ep=new Vector3,tp=new Vector2,op=new Vector2,lp=new Vector2,up=0,hp=0;up<Lu.length;up+=9,hp+=6){ju.set(Lu[up+0],Lu[up+1],Lu[up+2]),_c.set(Lu[up+3],Lu[up+4],Lu[up+5]),_f.set(Lu[up+6],Lu[up+7],Lu[up+8]),tp.set(Ru[hp+0],Ru[hp+1]),op.set(Ru[hp+2],Ru[hp+3]),lp.set(Ru[hp+4],Ru[hp+5]),ep.copy(ju).add(_c).add(_f).divideScalar(3);var np=_h(ep);Wu(tp,hp+0,ju,np),Wu(op,hp+2,_c,np),Wu(lp,hp+4,_f,np)}}function Wu(ju,_c,_f,ep){ep<0&&ju.x===1&&(Ru[_c]=ju.x-1),_f.x===0&&_f.z===0&&(Ru[_c]=ep/2/Math.PI+.5)}function _h(ju){return Math.atan2(ju.z,-ju.x)}function Xc(ju){return Math.atan2(-ju.y,Math.sqrt(ju.x*ju.x+ju.z*ju.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(Cu,Tu){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:Cu,detail:Tu},this.fromBufferGeometry(new TetrahedronBufferGeometry(Cu,Tu)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(Cu,Tu){var Pu=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Bu=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,Pu,Bu,Cu,Tu),this.type="TetrahedronBufferGeometry",this.parameters={radius:Cu,detail:Tu}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(Cu,Tu){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:Cu,detail:Tu},this.fromBufferGeometry(new OctahedronBufferGeometry(Cu,Tu)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(Cu,Tu){var Pu=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Bu=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,Pu,Bu,Cu,Tu),this.type="OctahedronBufferGeometry",this.parameters={radius:Cu,detail:Tu}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(Cu,Tu){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:Cu,detail:Tu},this.fromBufferGeometry(new IcosahedronBufferGeometry(Cu,Tu)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(Cu,Tu){var Pu=(1+Math.sqrt(5))/2,Bu=[-1,Pu,0,1,Pu,0,-1,-Pu,0,1,-Pu,0,0,-1,Pu,0,1,Pu,0,-1,-Pu,0,1,-Pu,Pu,0,-1,Pu,0,1,-Pu,0,-1,-Pu,0,1],Lu=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Bu,Lu,Cu,Tu),this.type="IcosahedronBufferGeometry",this.parameters={radius:Cu,detail:Tu}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(Cu,Tu){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:Cu,detail:Tu},this.fromBufferGeometry(new DodecahedronBufferGeometry(Cu,Tu)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(Cu,Tu){var Pu=(1+Math.sqrt(5))/2,Bu=1/Pu,Lu=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Bu,-Pu,0,-Bu,Pu,0,Bu,-Pu,0,Bu,Pu,-Bu,-Pu,0,-Bu,Pu,0,Bu,-Pu,0,Bu,Pu,0,-Pu,0,-Bu,Pu,0,-Bu,-Pu,0,Bu,Pu,0,Bu],Ru=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Lu,Ru,Cu,Tu),this.type="DodecahedronBufferGeometry",this.parameters={radius:Cu,detail:Tu}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(Cu,Tu,Pu,Bu,Lu,Ru){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:Cu,tubularSegments:Tu,radius:Pu,radialSegments:Bu,closed:Lu},Ru!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Ou=new TubeBufferGeometry(Cu,Tu,Pu,Bu,Lu);this.tangents=Ou.tangents,this.normals=Ou.normals,this.binormals=Ou.binormals,this.fromBufferGeometry(Ou),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(Cu,Tu,Pu,Bu,Lu){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:Cu,tubularSegments:Tu,radius:Pu,radialSegments:Bu,closed:Lu},Tu=Tu||64,Pu=Pu||1,Bu=Bu||8,Lu=Lu||!1;var Ru=Cu.computeFrenetFrames(Tu,Lu);this.tangents=Ru.tangents,this.normals=Ru.normals,this.binormals=Ru.binormals;var Ou=new Vector3,Du=new Vector3,ku=new Vector2,Fu=new Vector3,Nu,Gu,zu=[],Hu=[],Wu=[],_h=[];Xc(),this.setIndex(_h),this.setAttribute("position",new Float32BufferAttribute(zu,3)),this.setAttribute("normal",new Float32BufferAttribute(Hu,3)),this.setAttribute("uv",new Float32BufferAttribute(Wu,2));function Xc(){for(Nu=0;Nu<Tu;Nu++)ju(Nu);ju(Lu===!1?Tu:0),_f(),_c()}function ju(ep){Fu=Cu.getPointAt(ep/Tu,Fu);var tp=Ru.normals[ep],op=Ru.binormals[ep];for(Gu=0;Gu<=Bu;Gu++){var lp=Gu/Bu*Math.PI*2,up=Math.sin(lp),hp=-Math.cos(lp);Du.x=hp*tp.x+up*op.x,Du.y=hp*tp.y+up*op.y,Du.z=hp*tp.z+up*op.z,Du.normalize(),Hu.push(Du.x,Du.y,Du.z),Ou.x=Fu.x+Pu*Du.x,Ou.y=Fu.y+Pu*Du.y,Ou.z=Fu.z+Pu*Du.z,zu.push(Ou.x,Ou.y,Ou.z)}}function _c(){for(Gu=1;Gu<=Tu;Gu++)for(Nu=1;Nu<=Bu;Nu++){var ep=(Bu+1)*(Gu-1)+(Nu-1),tp=(Bu+1)*Gu+(Nu-1),op=(Bu+1)*Gu+Nu,lp=(Bu+1)*(Gu-1)+Nu;_h.push(ep,tp,lp),_h.push(tp,op,lp)}}function _f(){for(Nu=0;Nu<=Tu;Nu++)for(Gu=0;Gu<=Bu;Gu++)ku.x=Nu/Tu,ku.y=Gu/Bu,Wu.push(ku.x,ku.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var Cu=BufferGeometry.prototype.toJSON.call(this);return Cu.path=this.parameters.path.toJSON(),Cu};function TorusKnotGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:Cu,tube:Tu,tubularSegments:Pu,radialSegments:Bu,p:Lu,q:Ru},Ou!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:Cu,tube:Tu,tubularSegments:Pu,radialSegments:Bu,p:Lu,q:Ru},Cu=Cu||1,Tu=Tu||.4,Pu=Math.floor(Pu)||64,Bu=Math.floor(Bu)||8,Lu=Lu||2,Ru=Ru||3;var Ou=[],Du=[],ku=[],Fu=[],Nu,Gu,zu=new Vector3,Hu=new Vector3,Wu=new Vector3,_h=new Vector3,Xc=new Vector3,ju=new Vector3,_c=new Vector3;for(Nu=0;Nu<=Pu;++Nu){var _f=Nu/Pu*Lu*Math.PI*2;for(rp(_f,Lu,Ru,Cu,Wu),rp(_f+.01,Lu,Ru,Cu,_h),ju.subVectors(_h,Wu),_c.addVectors(_h,Wu),Xc.crossVectors(ju,_c),_c.crossVectors(Xc,ju),Xc.normalize(),_c.normalize(),Gu=0;Gu<=Bu;++Gu){var ep=Gu/Bu*Math.PI*2,tp=-Tu*Math.cos(ep),op=Tu*Math.sin(ep);zu.x=Wu.x+(tp*_c.x+op*Xc.x),zu.y=Wu.y+(tp*_c.y+op*Xc.y),zu.z=Wu.z+(tp*_c.z+op*Xc.z),Du.push(zu.x,zu.y,zu.z),Hu.subVectors(zu,Wu).normalize(),ku.push(Hu.x,Hu.y,Hu.z),Fu.push(Nu/Pu),Fu.push(Gu/Bu)}}for(Gu=1;Gu<=Pu;Gu++)for(Nu=1;Nu<=Bu;Nu++){var lp=(Bu+1)*(Gu-1)+(Nu-1),up=(Bu+1)*Gu+(Nu-1),hp=(Bu+1)*Gu+Nu,np=(Bu+1)*(Gu-1)+Nu;Ou.push(lp,up,np),Ou.push(up,hp,np)}this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Du,3)),this.setAttribute("normal",new Float32BufferAttribute(ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2));function rp(ip,ap,sp,cp,dp){var fp=Math.cos(ip),vp=Math.sin(ip),_p=sp/ap*ip,wp=Math.cos(_p);dp.x=cp*(2+wp)*.5*fp,dp.y=cp*(2+wp)*vp*.5,dp.z=cp*Math.sin(_p)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(Cu,Tu,Pu,Bu,Lu){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:Cu,tube:Tu,radialSegments:Pu,tubularSegments:Bu,arc:Lu},this.fromBufferGeometry(new TorusBufferGeometry(Cu,Tu,Pu,Bu,Lu)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(Cu,Tu,Pu,Bu,Lu){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:Cu,tube:Tu,radialSegments:Pu,tubularSegments:Bu,arc:Lu},Cu=Cu||1,Tu=Tu||.4,Pu=Math.floor(Pu)||8,Bu=Math.floor(Bu)||6,Lu=Lu||Math.PI*2;var Ru=[],Ou=[],Du=[],ku=[],Fu=new Vector3,Nu=new Vector3,Gu=new Vector3,zu,Hu;for(zu=0;zu<=Pu;zu++)for(Hu=0;Hu<=Bu;Hu++){var Wu=Hu/Bu*Lu,_h=zu/Pu*Math.PI*2;Nu.x=(Cu+Tu*Math.cos(_h))*Math.cos(Wu),Nu.y=(Cu+Tu*Math.cos(_h))*Math.sin(Wu),Nu.z=Tu*Math.sin(_h),Ou.push(Nu.x,Nu.y,Nu.z),Fu.x=Cu*Math.cos(Wu),Fu.y=Cu*Math.sin(Wu),Gu.subVectors(Nu,Fu).normalize(),Du.push(Gu.x,Gu.y,Gu.z),ku.push(Hu/Bu),ku.push(zu/Pu)}for(zu=1;zu<=Pu;zu++)for(Hu=1;Hu<=Bu;Hu++){var Xc=(Bu+1)*zu+Hu-1,ju=(Bu+1)*(zu-1)+Hu-1,_c=(Bu+1)*(zu-1)+Hu,_f=(Bu+1)*zu+Hu;Ru.push(Xc,ju,_f),Ru.push(ju,_c,_f)}this.setIndex(Ru),this.setAttribute("position",new Float32BufferAttribute(Ou,3)),this.setAttribute("normal",new Float32BufferAttribute(Du,3)),this.setAttribute("uv",new Float32BufferAttribute(ku,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(Cu,Tu,Pu){Pu=Pu||2;var Bu=Tu&&Tu.length,Lu=Bu?Tu[0]*Pu:Cu.length,Ru=linkedList(Cu,0,Lu,Pu,!0),Ou=[];if(!Ru||Ru.next===Ru.prev)return Ou;var Du,ku,Fu,Nu,Gu,zu,Hu;if(Bu&&(Ru=eliminateHoles(Cu,Tu,Ru,Pu)),Cu.length>80*Pu){Du=Fu=Cu[0],ku=Nu=Cu[1];for(var Wu=Pu;Wu<Lu;Wu+=Pu)Gu=Cu[Wu],zu=Cu[Wu+1],Gu<Du&&(Du=Gu),zu<ku&&(ku=zu),Gu>Fu&&(Fu=Gu),zu>Nu&&(Nu=zu);Hu=Math.max(Fu-Du,Nu-ku),Hu=Hu!==0?1/Hu:0}return earcutLinked(Ru,Ou,Pu,Du,ku,Hu),Ou}};function linkedList(Cu,Tu,Pu,Bu,Lu){var Ru,Ou;if(Lu===signedArea(Cu,Tu,Pu,Bu)>0)for(Ru=Tu;Ru<Pu;Ru+=Bu)Ou=insertNode(Ru,Cu[Ru],Cu[Ru+1],Ou);else for(Ru=Pu-Bu;Ru>=Tu;Ru-=Bu)Ou=insertNode(Ru,Cu[Ru],Cu[Ru+1],Ou);return Ou&&equals(Ou,Ou.next)&&(removeNode(Ou),Ou=Ou.next),Ou}function filterPoints(Cu,Tu){if(!Cu)return Cu;Tu||(Tu=Cu);var Pu=Cu,Bu;do if(Bu=!1,!Pu.steiner&&(equals(Pu,Pu.next)||area(Pu.prev,Pu,Pu.next)===0)){if(removeNode(Pu),Pu=Tu=Pu.prev,Pu===Pu.next)break;Bu=!0}else Pu=Pu.next;while(Bu||Pu!==Tu);return Tu}function earcutLinked(Cu,Tu,Pu,Bu,Lu,Ru,Ou){if(!!Cu){!Ou&&Ru&&indexCurve(Cu,Bu,Lu,Ru);for(var Du=Cu,ku,Fu;Cu.prev!==Cu.next;){if(ku=Cu.prev,Fu=Cu.next,Ru?isEarHashed(Cu,Bu,Lu,Ru):isEar(Cu)){Tu.push(ku.i/Pu),Tu.push(Cu.i/Pu),Tu.push(Fu.i/Pu),removeNode(Cu),Cu=Fu.next,Du=Fu.next;continue}if(Cu=Fu,Cu===Du){Ou?Ou===1?(Cu=cureLocalIntersections(filterPoints(Cu),Tu,Pu),earcutLinked(Cu,Tu,Pu,Bu,Lu,Ru,2)):Ou===2&&splitEarcut(Cu,Tu,Pu,Bu,Lu,Ru):earcutLinked(filterPoints(Cu),Tu,Pu,Bu,Lu,Ru,1);break}}}}function isEar(Cu){var Tu=Cu.prev,Pu=Cu,Bu=Cu.next;if(area(Tu,Pu,Bu)>=0)return!1;for(var Lu=Cu.next.next;Lu!==Cu.prev;){if(pointInTriangle(Tu.x,Tu.y,Pu.x,Pu.y,Bu.x,Bu.y,Lu.x,Lu.y)&&area(Lu.prev,Lu,Lu.next)>=0)return!1;Lu=Lu.next}return!0}function isEarHashed(Cu,Tu,Pu,Bu){var Lu=Cu.prev,Ru=Cu,Ou=Cu.next;if(area(Lu,Ru,Ou)>=0)return!1;for(var Du=Lu.x<Ru.x?Lu.x<Ou.x?Lu.x:Ou.x:Ru.x<Ou.x?Ru.x:Ou.x,ku=Lu.y<Ru.y?Lu.y<Ou.y?Lu.y:Ou.y:Ru.y<Ou.y?Ru.y:Ou.y,Fu=Lu.x>Ru.x?Lu.x>Ou.x?Lu.x:Ou.x:Ru.x>Ou.x?Ru.x:Ou.x,Nu=Lu.y>Ru.y?Lu.y>Ou.y?Lu.y:Ou.y:Ru.y>Ou.y?Ru.y:Ou.y,Gu=zOrder(Du,ku,Tu,Pu,Bu),zu=zOrder(Fu,Nu,Tu,Pu,Bu),Hu=Cu.prevZ,Wu=Cu.nextZ;Hu&&Hu.z>=Gu&&Wu&&Wu.z<=zu;){if(Hu!==Cu.prev&&Hu!==Cu.next&&pointInTriangle(Lu.x,Lu.y,Ru.x,Ru.y,Ou.x,Ou.y,Hu.x,Hu.y)&&area(Hu.prev,Hu,Hu.next)>=0||(Hu=Hu.prevZ,Wu!==Cu.prev&&Wu!==Cu.next&&pointInTriangle(Lu.x,Lu.y,Ru.x,Ru.y,Ou.x,Ou.y,Wu.x,Wu.y)&&area(Wu.prev,Wu,Wu.next)>=0))return!1;Wu=Wu.nextZ}for(;Hu&&Hu.z>=Gu;){if(Hu!==Cu.prev&&Hu!==Cu.next&&pointInTriangle(Lu.x,Lu.y,Ru.x,Ru.y,Ou.x,Ou.y,Hu.x,Hu.y)&&area(Hu.prev,Hu,Hu.next)>=0)return!1;Hu=Hu.prevZ}for(;Wu&&Wu.z<=zu;){if(Wu!==Cu.prev&&Wu!==Cu.next&&pointInTriangle(Lu.x,Lu.y,Ru.x,Ru.y,Ou.x,Ou.y,Wu.x,Wu.y)&&area(Wu.prev,Wu,Wu.next)>=0)return!1;Wu=Wu.nextZ}return!0}function cureLocalIntersections(Cu,Tu,Pu){var Bu=Cu;do{var Lu=Bu.prev,Ru=Bu.next.next;!equals(Lu,Ru)&&intersects(Lu,Bu,Bu.next,Ru)&&locallyInside(Lu,Ru)&&locallyInside(Ru,Lu)&&(Tu.push(Lu.i/Pu),Tu.push(Bu.i/Pu),Tu.push(Ru.i/Pu),removeNode(Bu),removeNode(Bu.next),Bu=Cu=Ru),Bu=Bu.next}while(Bu!==Cu);return filterPoints(Bu)}function splitEarcut(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=Cu;do{for(var Du=Ou.next.next;Du!==Ou.prev;){if(Ou.i!==Du.i&&isValidDiagonal(Ou,Du)){var ku=splitPolygon(Ou,Du);Ou=filterPoints(Ou,Ou.next),ku=filterPoints(ku,ku.next),earcutLinked(Ou,Tu,Pu,Bu,Lu,Ru),earcutLinked(ku,Tu,Pu,Bu,Lu,Ru);return}Du=Du.next}Ou=Ou.next}while(Ou!==Cu)}function eliminateHoles(Cu,Tu,Pu,Bu){var Lu=[],Ru,Ou,Du,ku,Fu;for(Ru=0,Ou=Tu.length;Ru<Ou;Ru++)Du=Tu[Ru]*Bu,ku=Ru<Ou-1?Tu[Ru+1]*Bu:Cu.length,Fu=linkedList(Cu,Du,ku,Bu,!1),Fu===Fu.next&&(Fu.steiner=!0),Lu.push(getLeftmost(Fu));for(Lu.sort(compareX),Ru=0;Ru<Lu.length;Ru++)eliminateHole(Lu[Ru],Pu),Pu=filterPoints(Pu,Pu.next);return Pu}function compareX(Cu,Tu){return Cu.x-Tu.x}function eliminateHole(Cu,Tu){if(Tu=findHoleBridge(Cu,Tu),Tu){var Pu=splitPolygon(Tu,Cu);filterPoints(Tu,Tu.next),filterPoints(Pu,Pu.next)}}function findHoleBridge(Cu,Tu){var Pu=Tu,Bu=Cu.x,Lu=Cu.y,Ru=-1/0,Ou;do{if(Lu<=Pu.y&&Lu>=Pu.next.y&&Pu.next.y!==Pu.y){var Du=Pu.x+(Lu-Pu.y)*(Pu.next.x-Pu.x)/(Pu.next.y-Pu.y);if(Du<=Bu&&Du>Ru){if(Ru=Du,Du===Bu){if(Lu===Pu.y)return Pu;if(Lu===Pu.next.y)return Pu.next}Ou=Pu.x<Pu.next.x?Pu:Pu.next}}Pu=Pu.next}while(Pu!==Tu);if(!Ou)return null;if(Bu===Ru)return Ou;var ku=Ou,Fu=Ou.x,Nu=Ou.y,Gu=1/0,zu;Pu=Ou;do Bu>=Pu.x&&Pu.x>=Fu&&Bu!==Pu.x&&pointInTriangle(Lu<Nu?Bu:Ru,Lu,Fu,Nu,Lu<Nu?Ru:Bu,Lu,Pu.x,Pu.y)&&(zu=Math.abs(Lu-Pu.y)/(Bu-Pu.x),locallyInside(Pu,Cu)&&(zu<Gu||zu===Gu&&(Pu.x>Ou.x||Pu.x===Ou.x&&sectorContainsSector(Ou,Pu)))&&(Ou=Pu,Gu=zu)),Pu=Pu.next;while(Pu!==ku);return Ou}function sectorContainsSector(Cu,Tu){return area(Cu.prev,Cu,Tu.prev)<0&&area(Tu.next,Cu,Cu.next)<0}function indexCurve(Cu,Tu,Pu,Bu){var Lu=Cu;do Lu.z===null&&(Lu.z=zOrder(Lu.x,Lu.y,Tu,Pu,Bu)),Lu.prevZ=Lu.prev,Lu.nextZ=Lu.next,Lu=Lu.next;while(Lu!==Cu);Lu.prevZ.nextZ=null,Lu.prevZ=null,sortLinked(Lu)}function sortLinked(Cu){var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu=1;do{for(Pu=Cu,Cu=null,Ru=null,Ou=0;Pu;){for(Ou++,Bu=Pu,Du=0,Tu=0;Tu<Fu&&(Du++,Bu=Bu.nextZ,!!Bu);Tu++);for(ku=Fu;Du>0||ku>0&&Bu;)Du!==0&&(ku===0||!Bu||Pu.z<=Bu.z)?(Lu=Pu,Pu=Pu.nextZ,Du--):(Lu=Bu,Bu=Bu.nextZ,ku--),Ru?Ru.nextZ=Lu:Cu=Lu,Lu.prevZ=Ru,Ru=Lu;Pu=Bu}Ru.nextZ=null,Fu*=2}while(Ou>1);return Cu}function zOrder(Cu,Tu,Pu,Bu,Lu){return Cu=32767*(Cu-Pu)*Lu,Tu=32767*(Tu-Bu)*Lu,Cu=(Cu|Cu<<8)&16711935,Cu=(Cu|Cu<<4)&252645135,Cu=(Cu|Cu<<2)&858993459,Cu=(Cu|Cu<<1)&1431655765,Tu=(Tu|Tu<<8)&16711935,Tu=(Tu|Tu<<4)&252645135,Tu=(Tu|Tu<<2)&858993459,Tu=(Tu|Tu<<1)&1431655765,Cu|Tu<<1}function getLeftmost(Cu){var Tu=Cu,Pu=Cu;do(Tu.x<Pu.x||Tu.x===Pu.x&&Tu.y<Pu.y)&&(Pu=Tu),Tu=Tu.next;while(Tu!==Cu);return Pu}function pointInTriangle(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){return(Lu-Ou)*(Tu-Du)-(Cu-Ou)*(Ru-Du)>=0&&(Cu-Ou)*(Bu-Du)-(Pu-Ou)*(Tu-Du)>=0&&(Pu-Ou)*(Ru-Du)-(Lu-Ou)*(Bu-Du)>=0}function isValidDiagonal(Cu,Tu){return Cu.next.i!==Tu.i&&Cu.prev.i!==Tu.i&&!intersectsPolygon(Cu,Tu)&&(locallyInside(Cu,Tu)&&locallyInside(Tu,Cu)&&middleInside(Cu,Tu)&&(area(Cu.prev,Cu,Tu.prev)||area(Cu,Tu.prev,Tu))||equals(Cu,Tu)&&area(Cu.prev,Cu,Cu.next)>0&&area(Tu.prev,Tu,Tu.next)>0)}function area(Cu,Tu,Pu){return(Tu.y-Cu.y)*(Pu.x-Tu.x)-(Tu.x-Cu.x)*(Pu.y-Tu.y)}function equals(Cu,Tu){return Cu.x===Tu.x&&Cu.y===Tu.y}function intersects(Cu,Tu,Pu,Bu){var Lu=sign(area(Cu,Tu,Pu)),Ru=sign(area(Cu,Tu,Bu)),Ou=sign(area(Pu,Bu,Cu)),Du=sign(area(Pu,Bu,Tu));return!!(Lu!==Ru&&Ou!==Du||Lu===0&&onSegment(Cu,Pu,Tu)||Ru===0&&onSegment(Cu,Bu,Tu)||Ou===0&&onSegment(Pu,Cu,Bu)||Du===0&&onSegment(Pu,Tu,Bu))}function onSegment(Cu,Tu,Pu){return Tu.x<=Math.max(Cu.x,Pu.x)&&Tu.x>=Math.min(Cu.x,Pu.x)&&Tu.y<=Math.max(Cu.y,Pu.y)&&Tu.y>=Math.min(Cu.y,Pu.y)}function sign(Cu){return Cu>0?1:Cu<0?-1:0}function intersectsPolygon(Cu,Tu){var Pu=Cu;do{if(Pu.i!==Cu.i&&Pu.next.i!==Cu.i&&Pu.i!==Tu.i&&Pu.next.i!==Tu.i&&intersects(Pu,Pu.next,Cu,Tu))return!0;Pu=Pu.next}while(Pu!==Cu);return!1}function locallyInside(Cu,Tu){return area(Cu.prev,Cu,Cu.next)<0?area(Cu,Tu,Cu.next)>=0&&area(Cu,Cu.prev,Tu)>=0:area(Cu,Tu,Cu.prev)<0||area(Cu,Cu.next,Tu)<0}function middleInside(Cu,Tu){var Pu=Cu,Bu=!1,Lu=(Cu.x+Tu.x)/2,Ru=(Cu.y+Tu.y)/2;do Pu.y>Ru!=Pu.next.y>Ru&&Pu.next.y!==Pu.y&&Lu<(Pu.next.x-Pu.x)*(Ru-Pu.y)/(Pu.next.y-Pu.y)+Pu.x&&(Bu=!Bu),Pu=Pu.next;while(Pu!==Cu);return Bu}function splitPolygon(Cu,Tu){var Pu=new Node(Cu.i,Cu.x,Cu.y),Bu=new Node(Tu.i,Tu.x,Tu.y),Lu=Cu.next,Ru=Tu.prev;return Cu.next=Tu,Tu.prev=Cu,Pu.next=Lu,Lu.prev=Pu,Bu.next=Pu,Pu.prev=Bu,Ru.next=Bu,Bu.prev=Ru,Bu}function insertNode(Cu,Tu,Pu,Bu){var Lu=new Node(Cu,Tu,Pu);return Bu?(Lu.next=Bu.next,Lu.prev=Bu,Bu.next.prev=Lu,Bu.next=Lu):(Lu.prev=Lu,Lu.next=Lu),Lu}function removeNode(Cu){Cu.next.prev=Cu.prev,Cu.prev.next=Cu.next,Cu.prevZ&&(Cu.prevZ.nextZ=Cu.nextZ),Cu.nextZ&&(Cu.nextZ.prevZ=Cu.prevZ)}function Node(Cu,Tu,Pu){this.i=Cu,this.x=Tu,this.y=Pu,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(Cu,Tu,Pu,Bu){for(var Lu=0,Ru=Tu,Ou=Pu-Bu;Ru<Pu;Ru+=Bu)Lu+=(Cu[Ou]-Cu[Ru])*(Cu[Ru+1]+Cu[Ou+1]),Ou=Ru;return Lu}var ShapeUtils={area:function(Cu){for(var Tu=Cu.length,Pu=0,Bu=Tu-1,Lu=0;Lu<Tu;Bu=Lu++)Pu+=Cu[Bu].x*Cu[Lu].y-Cu[Lu].x*Cu[Bu].y;return Pu*.5},isClockWise:function(Cu){return ShapeUtils.area(Cu)<0},triangulateShape:function(Cu,Tu){var Pu=[],Bu=[],Lu=[];removeDupEndPts(Cu),addContour(Pu,Cu);var Ru=Cu.length;Tu.forEach(removeDupEndPts);for(var Ou=0;Ou<Tu.length;Ou++)Bu.push(Ru),Ru+=Tu[Ou].length,addContour(Pu,Tu[Ou]);for(var Du=Earcut.triangulate(Pu,Bu),Ou=0;Ou<Du.length;Ou+=3)Lu.push(Du.slice(Ou,Ou+3));return Lu}};function removeDupEndPts(Cu){var Tu=Cu.length;Tu>2&&Cu[Tu-1].equals(Cu[0])&&Cu.pop()}function addContour(Cu,Tu){for(var Pu=0;Pu<Tu.length;Pu++)Cu.push(Tu[Pu].x),Cu.push(Tu[Pu].y)}function ExtrudeGeometry(Cu,Tu){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:Cu,options:Tu},this.fromBufferGeometry(new ExtrudeBufferGeometry(Cu,Tu)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var Cu=Geometry.prototype.toJSON.call(this),Tu=this.parameters.shapes,Pu=this.parameters.options;return toJSON(Tu,Pu,Cu)};function ExtrudeBufferGeometry(Cu,Tu){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:Cu,options:Tu},Cu=Array.isArray(Cu)?Cu:[Cu];for(var Pu=this,Bu=[],Lu=[],Ru=0,Ou=Cu.length;Ru<Ou;Ru++){var Du=Cu[Ru];ku(Du)}this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("uv",new Float32BufferAttribute(Lu,2)),this.computeVertexNormals();function ku(Fu){var Nu=[],Gu=Tu.curveSegments!==void 0?Tu.curveSegments:12,zu=Tu.steps!==void 0?Tu.steps:1,Hu=Tu.depth!==void 0?Tu.depth:100,Wu=Tu.bevelEnabled!==void 0?Tu.bevelEnabled:!0,_h=Tu.bevelThickness!==void 0?Tu.bevelThickness:6,Xc=Tu.bevelSize!==void 0?Tu.bevelSize:_h-2,ju=Tu.bevelOffset!==void 0?Tu.bevelOffset:0,_c=Tu.bevelSegments!==void 0?Tu.bevelSegments:3,_f=Tu.extrudePath,ep=Tu.UVGenerator!==void 0?Tu.UVGenerator:WorldUVGenerator;Tu.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Hu=Tu.amount);var tp,op=!1,lp,up,hp,np;_f&&(tp=_f.getSpacedPoints(zu),op=!0,Wu=!1,lp=_f.computeFrenetFrames(zu,!1),up=new Vector3,hp=new Vector3,np=new Vector3),Wu||(_c=0,_h=0,Xc=0,ju=0);var rp,ip,ap,sp=Fu.extractPoints(Gu),cp=sp.shape,dp=sp.holes,fp=!ShapeUtils.isClockWise(cp);if(fp)for(cp=cp.reverse(),ip=0,ap=dp.length;ip<ap;ip++)rp=dp[ip],ShapeUtils.isClockWise(rp)&&(dp[ip]=rp.reverse());var vp=ShapeUtils.triangulateShape(cp,dp),_p=cp;for(ip=0,ap=dp.length;ip<ap;ip++)rp=dp[ip],cp=cp.concat(rp);function wp(rm,um,om){return um||console.error("THREE.ExtrudeGeometry: vec does not exist"),um.clone().multiplyScalar(om).add(rm)}var Dp,Pp,Wp,Rp,Gp,kp=cp.length,gp,mp=vp.length;function Sp(rm,um,om){var hm,Lp,sm,dm=rm.x-um.x,mm=rm.y-um.y,pm=om.x-rm.x,wm=om.y-rm.y,$m=dm*dm+mm*mm,Pm=dm*wm-mm*pm;if(Math.abs(Pm)>Number.EPSILON){var Nm=Math.sqrt($m),Tm=Math.sqrt(pm*pm+wm*wm),Dm=um.x-mm/Nm,km=um.y+dm/Nm,Im=om.x-wm/Tm,Um=om.y+pm/Tm,Wm=((Im-Dm)*wm-(Um-km)*pm)/(dm*wm-mm*pm);hm=Dm+dm*Wm-rm.x,Lp=km+mm*Wm-rm.y;var Lm=hm*hm+Lp*Lp;if(Lm<=2)return new Vector2(hm,Lp);sm=Math.sqrt(Lm/2)}else{var Cp=!1;dm>Number.EPSILON?pm>Number.EPSILON&&(Cp=!0):dm<-Number.EPSILON?pm<-Number.EPSILON&&(Cp=!0):Math.sign(mm)===Math.sign(wm)&&(Cp=!0),Cp?(hm=-mm,Lp=dm,sm=Math.sqrt($m)):(hm=dm,Lp=mm,sm=Math.sqrt($m/2))}return new Vector2(hm/sm,Lp/sm)}for(var xp=[],Ep=0,$p=_p.length,Ip=$p-1,Np=Ep+1;Ep<$p;Ep++,Ip++,Np++)Ip===$p&&(Ip=0),Np===$p&&(Np=0),xp[Ep]=Sp(_p[Ep],_p[Ip],_p[Np]);var qp=[],Vp,pp=xp.concat();for(ip=0,ap=dp.length;ip<ap;ip++){for(rp=dp[ip],Vp=[],Ep=0,$p=rp.length,Ip=$p-1,Np=Ep+1;Ep<$p;Ep++,Ip++,Np++)Ip===$p&&(Ip=0),Np===$p&&(Np=0),Vp[Ep]=Sp(rp[Ep],rp[Ip],rp[Np]);qp.push(Vp),pp=pp.concat(Vp)}for(Dp=0;Dp<_c;Dp++){for(Wp=Dp/_c,Rp=_h*Math.cos(Wp*Math.PI/2),Pp=Xc*Math.sin(Wp*Math.PI/2)+ju,Ep=0,$p=_p.length;Ep<$p;Ep++)Gp=wp(_p[Ep],xp[Ep],Pp),Xp(Gp.x,Gp.y,-Rp);for(ip=0,ap=dp.length;ip<ap;ip++)for(rp=dp[ip],Vp=qp[ip],Ep=0,$p=rp.length;Ep<$p;Ep++)Gp=wp(rp[Ep],Vp[Ep],Pp),Xp(Gp.x,Gp.y,-Rp)}for(Pp=Xc+ju,Ep=0;Ep<kp;Ep++)Gp=Wu?wp(cp[Ep],pp[Ep],Pp):cp[Ep],op?(hp.copy(lp.normals[0]).multiplyScalar(Gp.x),up.copy(lp.binormals[0]).multiplyScalar(Gp.y),np.copy(tp[0]).add(hp).add(up),Xp(np.x,np.y,np.z)):Xp(Gp.x,Gp.y,0);var bp;for(bp=1;bp<=zu;bp++)for(Ep=0;Ep<kp;Ep++)Gp=Wu?wp(cp[Ep],pp[Ep],Pp):cp[Ep],op?(hp.copy(lp.normals[bp]).multiplyScalar(Gp.x),up.copy(lp.binormals[bp]).multiplyScalar(Gp.y),np.copy(tp[bp]).add(hp).add(up),Xp(np.x,np.y,np.z)):Xp(Gp.x,Gp.y,Hu/zu*bp);for(Dp=_c-1;Dp>=0;Dp--){for(Wp=Dp/_c,Rp=_h*Math.cos(Wp*Math.PI/2),Pp=Xc*Math.sin(Wp*Math.PI/2)+ju,Ep=0,$p=_p.length;Ep<$p;Ep++)Gp=wp(_p[Ep],xp[Ep],Pp),Xp(Gp.x,Gp.y,Hu+Rp);for(ip=0,ap=dp.length;ip<ap;ip++)for(rp=dp[ip],Vp=qp[ip],Ep=0,$p=rp.length;Ep<$p;Ep++)Gp=wp(rp[Ep],Vp[Ep],Pp),op?Xp(Gp.x,Gp.y+tp[zu-1].y,tp[zu-1].x+Rp):Xp(Gp.x,Gp.y,Hu+Rp)}zp(),Up();function zp(){var rm=Bu.length/3;if(Wu){var um=0,om=kp*um;for(Ep=0;Ep<mp;Ep++)gp=vp[Ep],tm(gp[2]+om,gp[1]+om,gp[0]+om);for(um=zu+_c*2,om=kp*um,Ep=0;Ep<mp;Ep++)gp=vp[Ep],tm(gp[0]+om,gp[1]+om,gp[2]+om)}else{for(Ep=0;Ep<mp;Ep++)gp=vp[Ep],tm(gp[2],gp[1],gp[0]);for(Ep=0;Ep<mp;Ep++)gp=vp[Ep],tm(gp[0]+kp*zu,gp[1]+kp*zu,gp[2]+kp*zu)}Pu.addGroup(rm,Bu.length/3-rm,0)}function Up(){var rm=Bu.length/3,um=0;for(Jp(_p,um),um+=_p.length,ip=0,ap=dp.length;ip<ap;ip++)rp=dp[ip],Jp(rp,um),um+=rp.length;Pu.addGroup(rm,Bu.length/3-rm,1)}function Jp(rm,um){var om,hm;for(Ep=rm.length;--Ep>=0;){om=Ep,hm=Ep-1,hm<0&&(hm=rm.length-1);var Lp=0,sm=zu+_c*2;for(Lp=0;Lp<sm;Lp++){var dm=kp*Lp,mm=kp*(Lp+1),pm=um+om+dm,wm=um+hm+dm,$m=um+hm+mm,Pm=um+om+mm;lm(pm,wm,$m,Pm)}}}function Xp(rm,um,om){Nu.push(rm),Nu.push(um),Nu.push(om)}function tm(rm,um,om){am(rm),am(um),am(om);var hm=Bu.length/3,Lp=ep.generateTopUV(Pu,Bu,hm-3,hm-2,hm-1);fm(Lp[0]),fm(Lp[1]),fm(Lp[2])}function lm(rm,um,om,hm){am(rm),am(um),am(hm),am(um),am(om),am(hm);var Lp=Bu.length/3,sm=ep.generateSideWallUV(Pu,Bu,Lp-6,Lp-3,Lp-2,Lp-1);fm(sm[0]),fm(sm[1]),fm(sm[3]),fm(sm[1]),fm(sm[2]),fm(sm[3])}function am(rm){Bu.push(Nu[rm*3+0]),Bu.push(Nu[rm*3+1]),Bu.push(Nu[rm*3+2])}function fm(rm){Lu.push(rm.x),Lu.push(rm.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var Cu=BufferGeometry.prototype.toJSON.call(this),Tu=this.parameters.shapes,Pu=this.parameters.options;return toJSON(Tu,Pu,Cu)};var WorldUVGenerator={generateTopUV:function(Cu,Tu,Pu,Bu,Lu){var Ru=Tu[Pu*3],Ou=Tu[Pu*3+1],Du=Tu[Bu*3],ku=Tu[Bu*3+1],Fu=Tu[Lu*3],Nu=Tu[Lu*3+1];return[new Vector2(Ru,Ou),new Vector2(Du,ku),new Vector2(Fu,Nu)]},generateSideWallUV:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=Tu[Pu*3],Du=Tu[Pu*3+1],ku=Tu[Pu*3+2],Fu=Tu[Bu*3],Nu=Tu[Bu*3+1],Gu=Tu[Bu*3+2],zu=Tu[Lu*3],Hu=Tu[Lu*3+1],Wu=Tu[Lu*3+2],_h=Tu[Ru*3],Xc=Tu[Ru*3+1],ju=Tu[Ru*3+2];return Math.abs(Du-Nu)<.01?[new Vector2(Ou,1-ku),new Vector2(Fu,1-Gu),new Vector2(zu,1-Wu),new Vector2(_h,1-ju)]:[new Vector2(Du,1-ku),new Vector2(Nu,1-Gu),new Vector2(Hu,1-Wu),new Vector2(Xc,1-ju)]}};function toJSON(Cu,Tu,Pu){if(Pu.shapes=[],Array.isArray(Cu))for(var Bu=0,Lu=Cu.length;Bu<Lu;Bu++){var Ru=Cu[Bu];Pu.shapes.push(Ru.uuid)}else Pu.shapes.push(Cu.uuid);return Tu.extrudePath!==void 0&&(Pu.options.extrudePath=Tu.extrudePath.toJSON()),Pu}function TextGeometry(Cu,Tu){Geometry.call(this),this.type="TextGeometry",this.parameters={text:Cu,parameters:Tu},this.fromBufferGeometry(new TextBufferGeometry(Cu,Tu)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(Cu,Tu){Tu=Tu||{};var Pu=Tu.font;if(!(Pu&&Pu.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Bu=Pu.generateShapes(Cu,Tu.size);Tu.depth=Tu.height!==void 0?Tu.height:50,Tu.bevelThickness===void 0&&(Tu.bevelThickness=10),Tu.bevelSize===void 0&&(Tu.bevelSize=8),Tu.bevelEnabled===void 0&&(Tu.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Bu,Tu),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:Cu,widthSegments:Tu,heightSegments:Pu,phiStart:Bu,phiLength:Lu,thetaStart:Ru,thetaLength:Ou},this.fromBufferGeometry(new SphereBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:Cu,widthSegments:Tu,heightSegments:Pu,phiStart:Bu,phiLength:Lu,thetaStart:Ru,thetaLength:Ou},Cu=Cu||1,Tu=Math.max(3,Math.floor(Tu)||8),Pu=Math.max(2,Math.floor(Pu)||6),Bu=Bu!==void 0?Bu:0,Lu=Lu!==void 0?Lu:Math.PI*2,Ru=Ru!==void 0?Ru:0,Ou=Ou!==void 0?Ou:Math.PI;var Du=Math.min(Ru+Ou,Math.PI),ku,Fu,Nu=0,Gu=[],zu=new Vector3,Hu=new Vector3,Wu=[],_h=[],Xc=[],ju=[];for(Fu=0;Fu<=Pu;Fu++){var _c=[],_f=Fu/Pu,ep=0;for(Fu==0&&Ru==0?ep=.5/Tu:Fu==Pu&&Du==Math.PI&&(ep=-.5/Tu),ku=0;ku<=Tu;ku++){var tp=ku/Tu;zu.x=-Cu*Math.cos(Bu+tp*Lu)*Math.sin(Ru+_f*Ou),zu.y=Cu*Math.cos(Ru+_f*Ou),zu.z=Cu*Math.sin(Bu+tp*Lu)*Math.sin(Ru+_f*Ou),_h.push(zu.x,zu.y,zu.z),Hu.copy(zu).normalize(),Xc.push(Hu.x,Hu.y,Hu.z),ju.push(tp+ep,1-_f),_c.push(Nu++)}Gu.push(_c)}for(Fu=0;Fu<Pu;Fu++)for(ku=0;ku<Tu;ku++){var op=Gu[Fu][ku+1],lp=Gu[Fu][ku],up=Gu[Fu+1][ku],hp=Gu[Fu+1][ku+1];(Fu!==0||Ru>0)&&Wu.push(op,lp,hp),(Fu!==Pu-1||Du<Math.PI)&&Wu.push(lp,up,hp)}this.setIndex(Wu),this.setAttribute("position",new Float32BufferAttribute(_h,3)),this.setAttribute("normal",new Float32BufferAttribute(Xc,3)),this.setAttribute("uv",new Float32BufferAttribute(ju,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(Cu,Tu,Pu,Bu,Lu,Ru){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:Cu,outerRadius:Tu,thetaSegments:Pu,phiSegments:Bu,thetaStart:Lu,thetaLength:Ru},this.fromBufferGeometry(new RingBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:Cu,outerRadius:Tu,thetaSegments:Pu,phiSegments:Bu,thetaStart:Lu,thetaLength:Ru},Cu=Cu||.5,Tu=Tu||1,Lu=Lu!==void 0?Lu:0,Ru=Ru!==void 0?Ru:Math.PI*2,Pu=Pu!==void 0?Math.max(3,Pu):8,Bu=Bu!==void 0?Math.max(1,Bu):1;var Ou=[],Du=[],ku=[],Fu=[],Nu,Gu=Cu,zu=(Tu-Cu)/Bu,Hu=new Vector3,Wu=new Vector2,_h,Xc;for(_h=0;_h<=Bu;_h++){for(Xc=0;Xc<=Pu;Xc++)Nu=Lu+Xc/Pu*Ru,Hu.x=Gu*Math.cos(Nu),Hu.y=Gu*Math.sin(Nu),Du.push(Hu.x,Hu.y,Hu.z),ku.push(0,0,1),Wu.x=(Hu.x/Tu+1)/2,Wu.y=(Hu.y/Tu+1)/2,Fu.push(Wu.x,Wu.y);Gu+=zu}for(_h=0;_h<Bu;_h++){var ju=_h*(Pu+1);for(Xc=0;Xc<Pu;Xc++){Nu=Xc+ju;var _c=Nu,_f=Nu+Pu+1,ep=Nu+Pu+2,tp=Nu+1;Ou.push(_c,_f,tp),Ou.push(_f,ep,tp)}}this.setIndex(Ou),this.setAttribute("position",new Float32BufferAttribute(Du,3)),this.setAttribute("normal",new Float32BufferAttribute(ku,3)),this.setAttribute("uv",new Float32BufferAttribute(Fu,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(Cu,Tu,Pu,Bu){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:Cu,segments:Tu,phiStart:Pu,phiLength:Bu},this.fromBufferGeometry(new LatheBufferGeometry(Cu,Tu,Pu,Bu)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(Cu,Tu,Pu,Bu){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:Cu,segments:Tu,phiStart:Pu,phiLength:Bu},Tu=Math.floor(Tu)||12,Pu=Pu||0,Bu=Bu||Math.PI*2,Bu=MathUtils.clamp(Bu,0,Math.PI*2);var Lu=[],Ru=[],Ou=[],Du,ku=1/Tu,Fu=new Vector3,Nu=new Vector2,Gu,zu;for(Gu=0;Gu<=Tu;Gu++){var Hu=Pu+Gu*ku*Bu,Wu=Math.sin(Hu),_h=Math.cos(Hu);for(zu=0;zu<=Cu.length-1;zu++)Fu.x=Cu[zu].x*Wu,Fu.y=Cu[zu].y,Fu.z=Cu[zu].x*_h,Ru.push(Fu.x,Fu.y,Fu.z),Nu.x=Gu/Tu,Nu.y=zu/(Cu.length-1),Ou.push(Nu.x,Nu.y)}for(Gu=0;Gu<Tu;Gu++)for(zu=0;zu<Cu.length-1;zu++){Du=zu+Gu*Cu.length;var Xc=Du,ju=Du+Cu.length,_c=Du+Cu.length+1,_f=Du+1;Lu.push(Xc,ju,_f),Lu.push(ju,_c,_f)}if(this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("uv",new Float32BufferAttribute(Ou,2)),this.computeVertexNormals(),Bu===Math.PI*2){var ep=this.attributes.normal.array,tp=new Vector3,op=new Vector3,lp=new Vector3;for(Du=Tu*Cu.length*3,Gu=0,zu=0;Gu<Cu.length;Gu++,zu+=3)tp.x=ep[zu+0],tp.y=ep[zu+1],tp.z=ep[zu+2],op.x=ep[Du+zu+0],op.y=ep[Du+zu+1],op.z=ep[Du+zu+2],lp.addVectors(tp,op).normalize(),ep[zu+0]=ep[Du+zu+0]=lp.x,ep[zu+1]=ep[Du+zu+1]=lp.y,ep[zu+2]=ep[Du+zu+2]=lp.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(Cu,Tu){Geometry.call(this),this.type="ShapeGeometry",typeof Tu=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),Tu=Tu.curveSegments),this.parameters={shapes:Cu,curveSegments:Tu},this.fromBufferGeometry(new ShapeBufferGeometry(Cu,Tu)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var Cu=Geometry.prototype.toJSON.call(this),Tu=this.parameters.shapes;return toJSON$1(Tu,Cu)};function ShapeBufferGeometry(Cu,Tu){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:Cu,curveSegments:Tu},Tu=Tu||12;var Pu=[],Bu=[],Lu=[],Ru=[],Ou=0,Du=0;if(Array.isArray(Cu)===!1)Fu(Cu);else for(var ku=0;ku<Cu.length;ku++)Fu(Cu[ku]),this.addGroup(Ou,Du,ku),Ou+=Du,Du=0;this.setIndex(Pu),this.setAttribute("position",new Float32BufferAttribute(Bu,3)),this.setAttribute("normal",new Float32BufferAttribute(Lu,3)),this.setAttribute("uv",new Float32BufferAttribute(Ru,2));function Fu(Nu){var Gu,zu,Hu,Wu=Bu.length/3,_h=Nu.extractPoints(Tu),Xc=_h.shape,ju=_h.holes;for(ShapeUtils.isClockWise(Xc)===!1&&(Xc=Xc.reverse()),Gu=0,zu=ju.length;Gu<zu;Gu++)Hu=ju[Gu],ShapeUtils.isClockWise(Hu)===!0&&(ju[Gu]=Hu.reverse());var _c=ShapeUtils.triangulateShape(Xc,ju);for(Gu=0,zu=ju.length;Gu<zu;Gu++)Hu=ju[Gu],Xc=Xc.concat(Hu);for(Gu=0,zu=Xc.length;Gu<zu;Gu++){var _f=Xc[Gu];Bu.push(_f.x,_f.y,0),Lu.push(0,0,1),Ru.push(_f.x,_f.y)}for(Gu=0,zu=_c.length;Gu<zu;Gu++){var ep=_c[Gu],tp=ep[0]+Wu,op=ep[1]+Wu,lp=ep[2]+Wu;Pu.push(tp,op,lp),Du+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var Cu=BufferGeometry.prototype.toJSON.call(this),Tu=this.parameters.shapes;return toJSON$1(Tu,Cu)};function toJSON$1(Cu,Tu){if(Tu.shapes=[],Array.isArray(Cu))for(var Pu=0,Bu=Cu.length;Pu<Bu;Pu++){var Lu=Cu[Pu];Tu.shapes.push(Lu.uuid)}else Tu.shapes.push(Cu.uuid);return Tu}function EdgesGeometry(Cu,Tu){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:Tu},Tu=Tu!==void 0?Tu:1;var Pu=[],Bu=Math.cos(MathUtils.DEG2RAD*Tu),Lu=[0,0],Ru={},Ou,Du,ku,Fu=["a","b","c"],Nu;Cu.isBufferGeometry?(Nu=new Geometry,Nu.fromBufferGeometry(Cu)):Nu=Cu.clone(),Nu.mergeVertices(),Nu.computeFaceNormals();for(var Gu=Nu.vertices,zu=Nu.faces,Hu=0,Wu=zu.length;Hu<Wu;Hu++)for(var _h=zu[Hu],Xc=0;Xc<3;Xc++)Ou=_h[Fu[Xc]],Du=_h[Fu[(Xc+1)%3]],Lu[0]=Math.min(Ou,Du),Lu[1]=Math.max(Ou,Du),ku=Lu[0]+","+Lu[1],Ru[ku]===void 0?Ru[ku]={index1:Lu[0],index2:Lu[1],face1:Hu,face2:void 0}:Ru[ku].face2=Hu;for(ku in Ru){var ju=Ru[ku];if(ju.face2===void 0||zu[ju.face1].normal.dot(zu[ju.face2].normal)<=Bu){var _c=Gu[ju.index1];Pu.push(_c.x,_c.y,_c.z),_c=Gu[ju.index2],Pu.push(_c.x,_c.y,_c.z)}}this.setAttribute("position",new Float32BufferAttribute(Pu,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:Cu,radiusBottom:Tu,height:Pu,radialSegments:Bu,heightSegments:Lu,openEnded:Ru,thetaStart:Ou,thetaLength:Du},this.fromBufferGeometry(new CylinderBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:Cu,radiusBottom:Tu,height:Pu,radialSegments:Bu,heightSegments:Lu,openEnded:Ru,thetaStart:Ou,thetaLength:Du};var ku=this;Cu=Cu!==void 0?Cu:1,Tu=Tu!==void 0?Tu:1,Pu=Pu||1,Bu=Math.floor(Bu)||8,Lu=Math.floor(Lu)||1,Ru=Ru!==void 0?Ru:!1,Ou=Ou!==void 0?Ou:0,Du=Du!==void 0?Du:Math.PI*2;var Fu=[],Nu=[],Gu=[],zu=[],Hu=0,Wu=[],_h=Pu/2,Xc=0;ju(),Ru===!1&&(Cu>0&&_c(!0),Tu>0&&_c(!1)),this.setIndex(Fu),this.setAttribute("position",new Float32BufferAttribute(Nu,3)),this.setAttribute("normal",new Float32BufferAttribute(Gu,3)),this.setAttribute("uv",new Float32BufferAttribute(zu,2));function ju(){var _f,ep,tp=new Vector3,op=new Vector3,lp=0,up=(Tu-Cu)/Pu;for(ep=0;ep<=Lu;ep++){var hp=[],np=ep/Lu,rp=np*(Tu-Cu)+Cu;for(_f=0;_f<=Bu;_f++){var ip=_f/Bu,ap=ip*Du+Ou,sp=Math.sin(ap),cp=Math.cos(ap);op.x=rp*sp,op.y=-np*Pu+_h,op.z=rp*cp,Nu.push(op.x,op.y,op.z),tp.set(sp,up,cp).normalize(),Gu.push(tp.x,tp.y,tp.z),zu.push(ip,1-np),hp.push(Hu++)}Wu.push(hp)}for(_f=0;_f<Bu;_f++)for(ep=0;ep<Lu;ep++){var dp=Wu[ep][_f],fp=Wu[ep+1][_f],vp=Wu[ep+1][_f+1],_p=Wu[ep][_f+1];Fu.push(dp,fp,_p),Fu.push(fp,vp,_p),lp+=6}ku.addGroup(Xc,lp,0),Xc+=lp}function _c(_f){var ep,tp,op,lp=new Vector2,up=new Vector3,hp=0,np=_f===!0?Cu:Tu,rp=_f===!0?1:-1;for(tp=Hu,ep=1;ep<=Bu;ep++)Nu.push(0,_h*rp,0),Gu.push(0,rp,0),zu.push(.5,.5),Hu++;for(op=Hu,ep=0;ep<=Bu;ep++){var ip=ep/Bu,ap=ip*Du+Ou,sp=Math.cos(ap),cp=Math.sin(ap);up.x=np*cp,up.y=_h*rp,up.z=np*sp,Nu.push(up.x,up.y,up.z),Gu.push(0,rp,0),lp.x=sp*.5+.5,lp.y=cp*.5*rp+.5,zu.push(lp.x,lp.y),Hu++}for(ep=0;ep<Bu;ep++){var dp=tp+ep,fp=op+ep;_f===!0?Fu.push(fp,fp+1,dp):Fu.push(fp+1,fp,dp),hp+=3}ku.addGroup(Xc,hp,_f===!0?1:2),Xc+=hp}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou){CylinderGeometry.call(this,0,Cu,Tu,Pu,Bu,Lu,Ru,Ou),this.type="ConeGeometry",this.parameters={radius:Cu,height:Tu,radialSegments:Pu,heightSegments:Bu,openEnded:Lu,thetaStart:Ru,thetaLength:Ou}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(Cu,Tu,Pu,Bu,Lu,Ru,Ou){CylinderBufferGeometry.call(this,0,Cu,Tu,Pu,Bu,Lu,Ru,Ou),this.type="ConeBufferGeometry",this.parameters={radius:Cu,height:Tu,radialSegments:Pu,heightSegments:Bu,openEnded:Lu,thetaStart:Ru,thetaLength:Ou}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(Cu,Tu,Pu,Bu){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:Cu,segments:Tu,thetaStart:Pu,thetaLength:Bu},this.fromBufferGeometry(new CircleBufferGeometry(Cu,Tu,Pu,Bu)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(Cu,Tu,Pu,Bu){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:Cu,segments:Tu,thetaStart:Pu,thetaLength:Bu},Cu=Cu||1,Tu=Tu!==void 0?Math.max(3,Tu):8,Pu=Pu!==void 0?Pu:0,Bu=Bu!==void 0?Bu:Math.PI*2;var Lu=[],Ru=[],Ou=[],Du=[],ku,Fu,Nu=new Vector3,Gu=new Vector2;for(Ru.push(0,0,0),Ou.push(0,0,1),Du.push(.5,.5),Fu=0,ku=3;Fu<=Tu;Fu++,ku+=3){var zu=Pu+Fu/Tu*Bu;Nu.x=Cu*Math.cos(zu),Nu.y=Cu*Math.sin(zu),Ru.push(Nu.x,Nu.y,Nu.z),Ou.push(0,0,1),Gu.x=(Ru[ku]/Cu+1)/2,Gu.y=(Ru[ku+1]/Cu+1)/2,Du.push(Gu.x,Gu.y)}for(ku=1;ku<=Tu;ku++)Lu.push(ku,ku+1,0);this.setIndex(Lu),this.setAttribute("position",new Float32BufferAttribute(Ru,3)),this.setAttribute("normal",new Float32BufferAttribute(Ou,3)),this.setAttribute("uv",new Float32BufferAttribute(Du,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(Cu){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(Cu)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this};function RawShaderMaterial(Cu){ShaderMaterial.call(this,Cu),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(Cu){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(Cu)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.defines={STANDARD:""},this.color.copy(Cu.color),this.roughness=Cu.roughness,this.metalness=Cu.metalness,this.map=Cu.map,this.lightMap=Cu.lightMap,this.lightMapIntensity=Cu.lightMapIntensity,this.aoMap=Cu.aoMap,this.aoMapIntensity=Cu.aoMapIntensity,this.emissive.copy(Cu.emissive),this.emissiveMap=Cu.emissiveMap,this.emissiveIntensity=Cu.emissiveIntensity,this.bumpMap=Cu.bumpMap,this.bumpScale=Cu.bumpScale,this.normalMap=Cu.normalMap,this.normalMapType=Cu.normalMapType,this.normalScale.copy(Cu.normalScale),this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.roughnessMap=Cu.roughnessMap,this.metalnessMap=Cu.metalnessMap,this.alphaMap=Cu.alphaMap,this.envMap=Cu.envMap,this.envMapIntensity=Cu.envMapIntensity,this.refractionRatio=Cu.refractionRatio,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.wireframeLinecap=Cu.wireframeLinecap,this.wireframeLinejoin=Cu.wireframeLinejoin,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this.vertexTangents=Cu.vertexTangents,this};function MeshPhysicalMaterial(Cu){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(Cu)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(Cu){return MeshStandardMaterial.prototype.copy.call(this,Cu),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=Cu.clearcoat,this.clearcoatMap=Cu.clearcoatMap,this.clearcoatRoughness=Cu.clearcoatRoughness,this.clearcoatRoughnessMap=Cu.clearcoatRoughnessMap,this.clearcoatNormalMap=Cu.clearcoatNormalMap,this.clearcoatNormalScale.copy(Cu.clearcoatNormalScale),this.reflectivity=Cu.reflectivity,Cu.sheen?this.sheen=(this.sheen||new Color).copy(Cu.sheen):this.sheen=null,this.transparency=Cu.transparency,this};function MeshPhongMaterial(Cu){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Cu)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.specular.copy(Cu.specular),this.shininess=Cu.shininess,this.map=Cu.map,this.lightMap=Cu.lightMap,this.lightMapIntensity=Cu.lightMapIntensity,this.aoMap=Cu.aoMap,this.aoMapIntensity=Cu.aoMapIntensity,this.emissive.copy(Cu.emissive),this.emissiveMap=Cu.emissiveMap,this.emissiveIntensity=Cu.emissiveIntensity,this.bumpMap=Cu.bumpMap,this.bumpScale=Cu.bumpScale,this.normalMap=Cu.normalMap,this.normalMapType=Cu.normalMapType,this.normalScale.copy(Cu.normalScale),this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.specularMap=Cu.specularMap,this.alphaMap=Cu.alphaMap,this.envMap=Cu.envMap,this.combine=Cu.combine,this.reflectivity=Cu.reflectivity,this.refractionRatio=Cu.refractionRatio,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.wireframeLinecap=Cu.wireframeLinecap,this.wireframeLinejoin=Cu.wireframeLinejoin,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this};function MeshToonMaterial(Cu){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Cu)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.specular.copy(Cu.specular),this.shininess=Cu.shininess,this.map=Cu.map,this.gradientMap=Cu.gradientMap,this.lightMap=Cu.lightMap,this.lightMapIntensity=Cu.lightMapIntensity,this.aoMap=Cu.aoMap,this.aoMapIntensity=Cu.aoMapIntensity,this.emissive.copy(Cu.emissive),this.emissiveMap=Cu.emissiveMap,this.emissiveIntensity=Cu.emissiveIntensity,this.bumpMap=Cu.bumpMap,this.bumpScale=Cu.bumpScale,this.normalMap=Cu.normalMap,this.normalMapType=Cu.normalMapType,this.normalScale.copy(Cu.normalScale),this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.specularMap=Cu.specularMap,this.alphaMap=Cu.alphaMap,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.wireframeLinecap=Cu.wireframeLinecap,this.wireframeLinejoin=Cu.wireframeLinejoin,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this};function MeshNormalMaterial(Cu){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Cu)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.bumpMap=Cu.bumpMap,this.bumpScale=Cu.bumpScale,this.normalMap=Cu.normalMap,this.normalMapType=Cu.normalMapType,this.normalScale.copy(Cu.normalScale),this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this};function MeshLambertMaterial(Cu){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Cu)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.map=Cu.map,this.lightMap=Cu.lightMap,this.lightMapIntensity=Cu.lightMapIntensity,this.aoMap=Cu.aoMap,this.aoMapIntensity=Cu.aoMapIntensity,this.emissive.copy(Cu.emissive),this.emissiveMap=Cu.emissiveMap,this.emissiveIntensity=Cu.emissiveIntensity,this.specularMap=Cu.specularMap,this.alphaMap=Cu.alphaMap,this.envMap=Cu.envMap,this.combine=Cu.combine,this.reflectivity=Cu.reflectivity,this.refractionRatio=Cu.refractionRatio,this.wireframe=Cu.wireframe,this.wireframeLinewidth=Cu.wireframeLinewidth,this.wireframeLinecap=Cu.wireframeLinecap,this.wireframeLinejoin=Cu.wireframeLinejoin,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this};function MeshMatcapMaterial(Cu){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Cu)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(Cu){return Material.prototype.copy.call(this,Cu),this.defines={MATCAP:""},this.color.copy(Cu.color),this.matcap=Cu.matcap,this.map=Cu.map,this.bumpMap=Cu.bumpMap,this.bumpScale=Cu.bumpScale,this.normalMap=Cu.normalMap,this.normalMapType=Cu.normalMapType,this.normalScale.copy(Cu.normalScale),this.displacementMap=Cu.displacementMap,this.displacementScale=Cu.displacementScale,this.displacementBias=Cu.displacementBias,this.alphaMap=Cu.alphaMap,this.skinning=Cu.skinning,this.morphTargets=Cu.morphTargets,this.morphNormals=Cu.morphNormals,this};function LineDashedMaterial(Cu){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(Cu)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(Cu){return LineBasicMaterial.prototype.copy.call(this,Cu),this.scale=Cu.scale,this.dashSize=Cu.dashSize,this.gapSize=Cu.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(Cu,Tu,Pu){return AnimationUtils.isTypedArray(Cu)?new Cu.constructor(Cu.subarray(Tu,Pu!==void 0?Pu:Cu.length)):Cu.slice(Tu,Pu)},convertArray:function(Cu,Tu,Pu){return!Cu||!Pu&&Cu.constructor===Tu?Cu:typeof Tu.BYTES_PER_ELEMENT=="number"?new Tu(Cu):Array.prototype.slice.call(Cu)},isTypedArray:function(Cu){return ArrayBuffer.isView(Cu)&&!(Cu instanceof DataView)},getKeyframeOrder:function(Cu){function Tu(Ru,Ou){return Cu[Ru]-Cu[Ou]}for(var Pu=Cu.length,Bu=new Array(Pu),Lu=0;Lu!==Pu;++Lu)Bu[Lu]=Lu;return Bu.sort(Tu),Bu},sortedArray:function(Cu,Tu,Pu){for(var Bu=Cu.length,Lu=new Cu.constructor(Bu),Ru=0,Ou=0;Ou!==Bu;++Ru)for(var Du=Pu[Ru]*Tu,ku=0;ku!==Tu;++ku)Lu[Ou++]=Cu[Du+ku];return Lu},flattenJSON:function(Cu,Tu,Pu,Bu){for(var Lu=1,Ru=Cu[0];Ru!==void 0&&Ru[Bu]===void 0;)Ru=Cu[Lu++];if(Ru!==void 0){var Ou=Ru[Bu];if(Ou!==void 0)if(Array.isArray(Ou))do Ou=Ru[Bu],Ou!==void 0&&(Tu.push(Ru.time),Pu.push.apply(Pu,Ou)),Ru=Cu[Lu++];while(Ru!==void 0);else if(Ou.toArray!==void 0)do Ou=Ru[Bu],Ou!==void 0&&(Tu.push(Ru.time),Ou.toArray(Pu,Pu.length)),Ru=Cu[Lu++];while(Ru!==void 0);else do Ou=Ru[Bu],Ou!==void 0&&(Tu.push(Ru.time),Pu.push(Ou)),Ru=Cu[Lu++];while(Ru!==void 0)}},subclip:function(Cu,Tu,Pu,Bu,Lu){Lu=Lu||30;var Ru=Cu.clone();Ru.name=Tu;for(var Ou=[],Du=0;Du<Ru.tracks.length;++Du){for(var ku=Ru.tracks[Du],Fu=ku.getValueSize(),Nu=[],Gu=[],zu=0;zu<ku.times.length;++zu){var Hu=ku.times[zu]*Lu;if(!(Hu<Pu||Hu>=Bu)){Nu.push(ku.times[zu]);for(var Wu=0;Wu<Fu;++Wu)Gu.push(ku.values[zu*Fu+Wu])}}Nu.length!==0&&(ku.times=AnimationUtils.convertArray(Nu,ku.times.constructor),ku.values=AnimationUtils.convertArray(Gu,ku.values.constructor),Ou.push(ku))}Ru.tracks=Ou;for(var _h=1/0,Du=0;Du<Ru.tracks.length;++Du)_h>Ru.tracks[Du].times[0]&&(_h=Ru.tracks[Du].times[0]);for(var Du=0;Du<Ru.tracks.length;++Du)Ru.tracks[Du].shift(-1*_h);return Ru.resetDuration(),Ru},makeClipAdditive:function(Cu,Tu,Pu,Bu){Tu===void 0&&(Tu=0),Pu===void 0&&(Pu=Cu),(Bu===void 0||Bu<=0)&&(Bu=30);for(var Lu=Cu.tracks.length,Ru=Tu/Bu,Ou=0;Ou<Lu;++Ou){var Du=Pu.tracks[Ou],ku=Du.ValueTypeName;if(!(ku==="bool"||ku==="string")){var Fu=Cu.tracks.find(function(ep){return ep.name===Du.name&&ep.ValueTypeName===ku});if(Fu!==void 0){var Nu=Du.getValueSize(),Gu=Du.times.length-1,zu;if(Ru<=Du.times[0])zu=AnimationUtils.arraySlice(Du.values,0,Du.valueSize);else if(Ru>=Du.times[Gu]){var Hu=Gu*Nu;zu=AnimationUtils.arraySlice(Du.values,Hu)}else{var Wu=Du.createInterpolant();Wu.evaluate(Ru),zu=Wu.resultBuffer}if(ku==="quaternion"){var _h=new Quaternion(zu[0],zu[1],zu[2],zu[3]).normalize().conjugate();_h.toArray(zu)}for(var Xc=Fu.times.length,ju=0;ju<Xc;++ju){var _c=ju*Nu;if(ku==="quaternion")Quaternion.multiplyQuaternionsFlat(Fu.values,_c,zu,0,Fu.values,_c);else for(var _f=0;_f<Nu;++_f)Fu.values[_c+_f]-=zu[_f]}}}}return Cu.blendMode=AdditiveAnimationBlendMode,Cu}};function Interpolant(Cu,Tu,Pu,Bu){this.parameterPositions=Cu,this._cachedIndex=0,this.resultBuffer=Bu!==void 0?Bu:new Tu.constructor(Pu),this.sampleValues=Tu,this.valueSize=Pu}Object.assign(Interpolant.prototype,{evaluate:function(Cu){var Tu=this.parameterPositions,Pu=this._cachedIndex,Bu=Tu[Pu],Lu=Tu[Pu-1];e:{t:{var Ru;n:{r:if(!(Cu<Bu)){for(var Ou=Pu+2;;){if(Bu===void 0){if(Cu<Lu)break r;return Pu=Tu.length,this._cachedIndex=Pu,this.afterEnd_(Pu-1,Cu,Lu)}if(Pu===Ou)break;if(Lu=Bu,Bu=Tu[++Pu],Cu<Bu)break t}Ru=Tu.length;break n}if(!(Cu>=Lu)){var Du=Tu[1];Cu<Du&&(Pu=2,Lu=Du);for(var Ou=Pu-2;;){if(Lu===void 0)return this._cachedIndex=0,this.beforeStart_(0,Cu,Bu);if(Pu===Ou)break;if(Bu=Lu,Lu=Tu[--Pu-1],Cu>=Lu)break t}Ru=Pu,Pu=0;break n}break e}for(;Pu<Ru;){var ku=Pu+Ru>>>1;Cu<Tu[ku]?Ru=ku:Pu=ku+1}if(Bu=Tu[Pu],Lu=Tu[Pu-1],Lu===void 0)return this._cachedIndex=0,this.beforeStart_(0,Cu,Bu);if(Bu===void 0)return Pu=Tu.length,this._cachedIndex=Pu,this.afterEnd_(Pu-1,Lu,Cu)}this._cachedIndex=Pu,this.intervalChanged_(Pu,Lu,Bu)}return this.interpolate_(Pu,Lu,Cu,Bu)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(Cu){for(var Tu=this.resultBuffer,Pu=this.sampleValues,Bu=this.valueSize,Lu=Cu*Bu,Ru=0;Ru!==Bu;++Ru)Tu[Ru]=Pu[Lu+Ru];return Tu},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(Cu,Tu,Pu,Bu){Interpolant.call(this,Cu,Tu,Pu,Bu),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(Cu,Tu,Pu){var Bu=this.parameterPositions,Lu=Cu-2,Ru=Cu+1,Ou=Bu[Lu],Du=Bu[Ru];if(Ou===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Lu=Cu,Ou=2*Tu-Pu;break;case WrapAroundEnding:Lu=Bu.length-2,Ou=Tu+Bu[Lu]-Bu[Lu+1];break;default:Lu=Cu,Ou=Pu}if(Du===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ru=Cu,Du=2*Pu-Tu;break;case WrapAroundEnding:Ru=1,Du=Pu+Bu[1]-Bu[0];break;default:Ru=Cu-1,Du=Tu}var ku=(Pu-Tu)*.5,Fu=this.valueSize;this._weightPrev=ku/(Tu-Ou),this._weightNext=ku/(Du-Pu),this._offsetPrev=Lu*Fu,this._offsetNext=Ru*Fu},interpolate_:function(Cu,Tu,Pu,Bu){for(var Lu=this.resultBuffer,Ru=this.sampleValues,Ou=this.valueSize,Du=Cu*Ou,ku=Du-Ou,Fu=this._offsetPrev,Nu=this._offsetNext,Gu=this._weightPrev,zu=this._weightNext,Hu=(Pu-Tu)/(Bu-Tu),Wu=Hu*Hu,_h=Wu*Hu,Xc=-Gu*_h+2*Gu*Wu-Gu*Hu,ju=(1+Gu)*_h+(-1.5-2*Gu)*Wu+(-.5+Gu)*Hu+1,_c=(-1-zu)*_h+(1.5+zu)*Wu+.5*Hu,_f=zu*_h-zu*Wu,ep=0;ep!==Ou;++ep)Lu[ep]=Xc*Ru[Fu+ep]+ju*Ru[ku+ep]+_c*Ru[Du+ep]+_f*Ru[Nu+ep];return Lu}});function LinearInterpolant(Cu,Tu,Pu,Bu){Interpolant.call(this,Cu,Tu,Pu,Bu)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(Cu,Tu,Pu,Bu){for(var Lu=this.resultBuffer,Ru=this.sampleValues,Ou=this.valueSize,Du=Cu*Ou,ku=Du-Ou,Fu=(Pu-Tu)/(Bu-Tu),Nu=1-Fu,Gu=0;Gu!==Ou;++Gu)Lu[Gu]=Ru[ku+Gu]*Nu+Ru[Du+Gu]*Fu;return Lu}});function DiscreteInterpolant(Cu,Tu,Pu,Bu){Interpolant.call(this,Cu,Tu,Pu,Bu)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(Cu){return this.copySampleValue_(Cu-1)}});function KeyframeTrack(Cu,Tu,Pu,Bu){if(Cu===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(Tu===void 0||Tu.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+Cu);this.name=Cu,this.times=AnimationUtils.convertArray(Tu,this.TimeBufferType),this.values=AnimationUtils.convertArray(Pu,this.ValueBufferType),this.setInterpolation(Bu||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(Cu){var Tu=Cu.constructor,Pu;if(Tu.toJSON!==void 0)Pu=Tu.toJSON(Cu);else{Pu={name:Cu.name,times:AnimationUtils.convertArray(Cu.times,Array),values:AnimationUtils.convertArray(Cu.values,Array)};var Bu=Cu.getInterpolation();Bu!==Cu.DefaultInterpolation&&(Pu.interpolation=Bu)}return Pu.type=Cu.ValueTypeName,Pu}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(Cu){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),Cu)},InterpolantFactoryMethodLinear:function(Cu){return new LinearInterpolant(this.times,this.values,this.getValueSize(),Cu)},InterpolantFactoryMethodSmooth:function(Cu){return new CubicInterpolant(this.times,this.values,this.getValueSize(),Cu)},setInterpolation:function(Cu){var Tu;switch(Cu){case InterpolateDiscrete:Tu=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:Tu=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:Tu=this.InterpolantFactoryMethodSmooth;break}if(Tu===void 0){var Pu="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(Cu!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Pu);return console.warn("THREE.KeyframeTrack:",Pu),this}return this.createInterpolant=Tu,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(Cu){if(Cu!==0)for(var Tu=this.times,Pu=0,Bu=Tu.length;Pu!==Bu;++Pu)Tu[Pu]+=Cu;return this},scale:function(Cu){if(Cu!==1)for(var Tu=this.times,Pu=0,Bu=Tu.length;Pu!==Bu;++Pu)Tu[Pu]*=Cu;return this},trim:function(Cu,Tu){for(var Pu=this.times,Bu=Pu.length,Lu=0,Ru=Bu-1;Lu!==Bu&&Pu[Lu]<Cu;)++Lu;for(;Ru!==-1&&Pu[Ru]>Tu;)--Ru;if(++Ru,Lu!==0||Ru!==Bu){Lu>=Ru&&(Ru=Math.max(Ru,1),Lu=Ru-1);var Ou=this.getValueSize();this.times=AnimationUtils.arraySlice(Pu,Lu,Ru),this.values=AnimationUtils.arraySlice(this.values,Lu*Ou,Ru*Ou)}return this},validate:function(){var Cu=!0,Tu=this.getValueSize();Tu-Math.floor(Tu)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),Cu=!1);var Pu=this.times,Bu=this.values,Lu=Pu.length;Lu===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),Cu=!1);for(var Ru=null,Ou=0;Ou!==Lu;Ou++){var Du=Pu[Ou];if(typeof Du=="number"&&isNaN(Du)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Ou,Du),Cu=!1;break}if(Ru!==null&&Ru>Du){console.error("THREE.KeyframeTrack: Out of order keys.",this,Ou,Du,Ru),Cu=!1;break}Ru=Du}if(Bu!==void 0&&AnimationUtils.isTypedArray(Bu))for(var Ou=0,ku=Bu.length;Ou!==ku;++Ou){var Fu=Bu[Ou];if(isNaN(Fu)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Ou,Fu),Cu=!1;break}}return Cu},optimize:function(){for(var Cu=AnimationUtils.arraySlice(this.times),Tu=AnimationUtils.arraySlice(this.values),Pu=this.getValueSize(),Bu=this.getInterpolation()===InterpolateSmooth,Lu=1,Ru=Cu.length-1,Ou=1;Ou<Ru;++Ou){var Du=!1,ku=Cu[Ou],Fu=Cu[Ou+1];if(ku!==Fu&&(Ou!==1||ku!==ku[0]))if(Bu)Du=!0;else for(var Nu=Ou*Pu,Gu=Nu-Pu,zu=Nu+Pu,Hu=0;Hu!==Pu;++Hu){var Wu=Tu[Nu+Hu];if(Wu!==Tu[Gu+Hu]||Wu!==Tu[zu+Hu]){Du=!0;break}}if(Du){if(Ou!==Lu){Cu[Lu]=Cu[Ou];for(var _h=Ou*Pu,Xc=Lu*Pu,Hu=0;Hu!==Pu;++Hu)Tu[Xc+Hu]=Tu[_h+Hu]}++Lu}}if(Ru>0){Cu[Lu]=Cu[Ru];for(var _h=Ru*Pu,Xc=Lu*Pu,Hu=0;Hu!==Pu;++Hu)Tu[Xc+Hu]=Tu[_h+Hu];++Lu}return Lu!==Cu.length?(this.times=AnimationUtils.arraySlice(Cu,0,Lu),this.values=AnimationUtils.arraySlice(Tu,0,Lu*Pu)):(this.times=Cu,this.values=Tu),this},clone:function(){var Cu=AnimationUtils.arraySlice(this.times,0),Tu=AnimationUtils.arraySlice(this.values,0),Pu=this.constructor,Bu=new Pu(this.name,Cu,Tu);return Bu.createInterpolant=this.createInterpolant,Bu}});function BooleanKeyframeTrack(Cu,Tu,Pu){KeyframeTrack.call(this,Cu,Tu,Pu)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(Cu,Tu,Pu,Bu){KeyframeTrack.call(this,Cu,Tu,Pu,Bu)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(Cu,Tu,Pu,Bu){KeyframeTrack.call(this,Cu,Tu,Pu,Bu)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(Cu,Tu,Pu,Bu){Interpolant.call(this,Cu,Tu,Pu,Bu)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(Cu,Tu,Pu,Bu){for(var Lu=this.resultBuffer,Ru=this.sampleValues,Ou=this.valueSize,Du=Cu*Ou,ku=(Pu-Tu)/(Bu-Tu),Fu=Du+Ou;Du!==Fu;Du+=4)Quaternion.slerpFlat(Lu,0,Ru,Du-Ou,Ru,Du,ku);return Lu}});function QuaternionKeyframeTrack(Cu,Tu,Pu,Bu){KeyframeTrack.call(this,Cu,Tu,Pu,Bu)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(Cu){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),Cu)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(Cu,Tu,Pu,Bu){KeyframeTrack.call(this,Cu,Tu,Pu,Bu)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(Cu,Tu,Pu,Bu){KeyframeTrack.call(this,Cu,Tu,Pu,Bu)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(Cu,Tu,Pu,Bu){this.name=Cu,this.tracks=Pu,this.duration=Tu!==void 0?Tu:-1,this.blendMode=Bu!==void 0?Bu:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(Cu){switch(Cu.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+Cu)}function parseKeyframeTrack(Cu){if(Cu.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var Tu=getTrackTypeForValueTypeName(Cu.type);if(Cu.times===void 0){var Pu=[],Bu=[];AnimationUtils.flattenJSON(Cu.keys,Pu,Bu,"value"),Cu.times=Pu,Cu.values=Bu}return Tu.parse!==void 0?Tu.parse(Cu):new Tu(Cu.name,Cu.times,Cu.values,Cu.interpolation)}Object.assign(AnimationClip,{parse:function(Cu){for(var Tu=[],Pu=Cu.tracks,Bu=1/(Cu.fps||1),Lu=0,Ru=Pu.length;Lu!==Ru;++Lu)Tu.push(parseKeyframeTrack(Pu[Lu]).scale(Bu));return new AnimationClip(Cu.name,Cu.duration,Tu,Cu.blendMode)},toJSON:function(Cu){for(var Tu=[],Pu=Cu.tracks,Bu={name:Cu.name,duration:Cu.duration,tracks:Tu,uuid:Cu.uuid,blendMode:Cu.blendMode},Lu=0,Ru=Pu.length;Lu!==Ru;++Lu)Tu.push(KeyframeTrack.toJSON(Pu[Lu]));return Bu},CreateFromMorphTargetSequence:function(Cu,Tu,Pu,Bu){for(var Lu=Tu.length,Ru=[],Ou=0;Ou<Lu;Ou++){var Du=[],ku=[];Du.push((Ou+Lu-1)%Lu,Ou,(Ou+1)%Lu),ku.push(0,1,0);var Fu=AnimationUtils.getKeyframeOrder(Du);Du=AnimationUtils.sortedArray(Du,1,Fu),ku=AnimationUtils.sortedArray(ku,1,Fu),!Bu&&Du[0]===0&&(Du.push(Lu),ku.push(ku[0])),Ru.push(new NumberKeyframeTrack(".morphTargetInfluences["+Tu[Ou].name+"]",Du,ku).scale(1/Pu))}return new AnimationClip(Cu,-1,Ru)},findByName:function(Cu,Tu){var Pu=Cu;if(!Array.isArray(Cu)){var Bu=Cu;Pu=Bu.geometry&&Bu.geometry.animations||Bu.animations}for(var Lu=0;Lu<Pu.length;Lu++)if(Pu[Lu].name===Tu)return Pu[Lu];return null},CreateClipsFromMorphTargetSequences:function(Cu,Tu,Pu){for(var Bu={},Lu=/^([\w-]*?)([\d]+)$/,Ru=0,Ou=Cu.length;Ru<Ou;Ru++){var Du=Cu[Ru],ku=Du.name.match(Lu);if(ku&&ku.length>1){var Fu=ku[1],Nu=Bu[Fu];Nu||(Bu[Fu]=Nu=[]),Nu.push(Du)}}var Gu=[];for(var Fu in Bu)Gu.push(AnimationClip.CreateFromMorphTargetSequence(Fu,Bu[Fu],Tu,Pu));return Gu},parseAnimation:function(Cu,Tu){if(!Cu)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Pu=function(ep,tp,op,lp,up){if(op.length!==0){var hp=[],np=[];AnimationUtils.flattenJSON(op,hp,np,lp),hp.length!==0&&up.push(new ep(tp,hp,np))}},Bu=[],Lu=Cu.name||"default",Ru=Cu.length||-1,Ou=Cu.fps||30,Du=Cu.blendMode,ku=Cu.hierarchy||[],Fu=0;Fu<ku.length;Fu++){var Nu=ku[Fu].keys;if(!(!Nu||Nu.length===0))if(Nu[0].morphTargets){for(var Gu={},zu=0;zu<Nu.length;zu++)if(Nu[zu].morphTargets)for(var Hu=0;Hu<Nu[zu].morphTargets.length;Hu++)Gu[Nu[zu].morphTargets[Hu]]=-1;for(var Wu in Gu){for(var _h=[],Xc=[],Hu=0;Hu!==Nu[zu].morphTargets.length;++Hu){var ju=Nu[zu];_h.push(ju.time),Xc.push(ju.morphTarget===Wu?1:0)}Bu.push(new NumberKeyframeTrack(".morphTargetInfluence["+Wu+"]",_h,Xc))}Ru=Gu.length*(Ou||1)}else{var _c=".bones["+Tu[Fu].name+"]";Pu(VectorKeyframeTrack,_c+".position",Nu,"pos",Bu),Pu(QuaternionKeyframeTrack,_c+".quaternion",Nu,"rot",Bu),Pu(VectorKeyframeTrack,_c+".scale",Nu,"scl",Bu)}}if(Bu.length===0)return null;var _f=new AnimationClip(Lu,Ru,Bu,Du);return _f}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var Cu=this.tracks,Tu=0,Pu=0,Bu=Cu.length;Pu!==Bu;++Pu){var Lu=this.tracks[Pu];Tu=Math.max(Tu,Lu.times[Lu.times.length-1])}return this.duration=Tu,this},trim:function(){for(var Cu=0;Cu<this.tracks.length;Cu++)this.tracks[Cu].trim(0,this.duration);return this},validate:function(){for(var Cu=!0,Tu=0;Tu<this.tracks.length;Tu++)Cu=Cu&&this.tracks[Tu].validate();return Cu},optimize:function(){for(var Cu=0;Cu<this.tracks.length;Cu++)this.tracks[Cu].optimize();return this},clone:function(){for(var Cu=[],Tu=0;Tu<this.tracks.length;Tu++)Cu.push(this.tracks[Tu].clone());return new AnimationClip(this.name,this.duration,Cu,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(Cu,Tu){this.enabled!==!1&&(this.files[Cu]=Tu)},get:function(Cu){if(this.enabled!==!1)return this.files[Cu]},remove:function(Cu){delete this.files[Cu]},clear:function(){this.files={}}};function LoadingManager(Cu,Tu,Pu){var Bu=this,Lu=!1,Ru=0,Ou=0,Du=void 0,ku=[];this.onStart=void 0,this.onLoad=Cu,this.onProgress=Tu,this.onError=Pu,this.itemStart=function(Fu){Ou++,Lu===!1&&Bu.onStart!==void 0&&Bu.onStart(Fu,Ru,Ou),Lu=!0},this.itemEnd=function(Fu){Ru++,Bu.onProgress!==void 0&&Bu.onProgress(Fu,Ru,Ou),Ru===Ou&&(Lu=!1,Bu.onLoad!==void 0&&Bu.onLoad())},this.itemError=function(Fu){Bu.onError!==void 0&&Bu.onError(Fu)},this.resolveURL=function(Fu){return Du?Du(Fu):Fu},this.setURLModifier=function(Fu){return Du=Fu,this},this.addHandler=function(Fu,Nu){return ku.push(Fu,Nu),this},this.removeHandler=function(Fu){var Nu=ku.indexOf(Fu);return Nu!==-1&&ku.splice(Nu,2),this},this.getHandler=function(Fu){for(var Nu=0,Gu=ku.length;Nu<Gu;Nu+=2){var zu=ku[Nu],Hu=ku[Nu+1];if(zu.global&&(zu.lastIndex=0),zu.test(Fu))return Hu}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(Cu){this.manager=Cu!==void 0?Cu:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(Cu,Tu){var Pu=this;return new Promise(function(Bu,Lu){Pu.load(Cu,Bu,Tu,Lu)})},parse:function(){},setCrossOrigin:function(Cu){return this.crossOrigin=Cu,this},setPath:function(Cu){return this.path=Cu,this},setResourcePath:function(Cu){return this.resourcePath=Cu,this},setRequestHeader:function(Cu){return this.requestHeader=Cu,this}});var loading={};function FileLoader(Cu){Loader.call(this,Cu)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(Cu,Tu,Pu,Bu){Cu===void 0&&(Cu=""),this.path!==void 0&&(Cu=this.path+Cu),Cu=this.manager.resolveURL(Cu);var Lu=this,Ru=Cache.get(Cu);if(Ru!==void 0)return Lu.manager.itemStart(Cu),setTimeout(function(){Tu&&Tu(Ru),Lu.manager.itemEnd(Cu)},0),Ru;if(loading[Cu]!==void 0){loading[Cu].push({onLoad:Tu,onProgress:Pu,onError:Bu});return}var Ou=/^data:(.*?)(;base64)?,(.*)$/,Du=Cu.match(Ou);if(Du){var ku=Du[1],Fu=!!Du[2],Nu=Du[3];Nu=decodeURIComponent(Nu),Fu&&(Nu=atob(Nu));try{var Gu,zu=(this.responseType||"").toLowerCase();switch(zu){case"arraybuffer":case"blob":for(var Hu=new Uint8Array(Nu.length),Wu=0;Wu<Nu.length;Wu++)Hu[Wu]=Nu.charCodeAt(Wu);zu==="blob"?Gu=new Blob([Hu.buffer],{type:ku}):Gu=Hu.buffer;break;case"document":var _h=new DOMParser;Gu=_h.parseFromString(Nu,ku);break;case"json":Gu=JSON.parse(Nu);break;default:Gu=Nu;break}setTimeout(function(){Tu&&Tu(Gu),Lu.manager.itemEnd(Cu)},0)}catch(_c){setTimeout(function(){Bu&&Bu(_c),Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)},0)}}else{loading[Cu]=[],loading[Cu].push({onLoad:Tu,onProgress:Pu,onError:Bu});var Xc=new XMLHttpRequest;Xc.open("GET",Cu,!0),Xc.addEventListener("load",function(_c){var _f=this.response,ep=loading[Cu];if(delete loading[Cu],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(Cu,_f);for(var tp=0,op=ep.length;tp<op;tp++){var lp=ep[tp];lp.onLoad&&lp.onLoad(_f)}Lu.manager.itemEnd(Cu)}else{for(var tp=0,op=ep.length;tp<op;tp++){var lp=ep[tp];lp.onError&&lp.onError(_c)}Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)}},!1),Xc.addEventListener("progress",function(_c){for(var _f=loading[Cu],ep=0,tp=_f.length;ep<tp;ep++){var op=_f[ep];op.onProgress&&op.onProgress(_c)}},!1),Xc.addEventListener("error",function(_c){var _f=loading[Cu];delete loading[Cu];for(var ep=0,tp=_f.length;ep<tp;ep++){var op=_f[ep];op.onError&&op.onError(_c)}Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)},!1),Xc.addEventListener("abort",function(_c){var _f=loading[Cu];delete loading[Cu];for(var ep=0,tp=_f.length;ep<tp;ep++){var op=_f[ep];op.onError&&op.onError(_c)}Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)},!1),this.responseType!==void 0&&(Xc.responseType=this.responseType),this.withCredentials!==void 0&&(Xc.withCredentials=this.withCredentials),Xc.overrideMimeType&&Xc.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var ju in this.requestHeader)Xc.setRequestHeader(ju,this.requestHeader[ju]);Xc.send(null)}return Lu.manager.itemStart(Cu),Xc},setResponseType:function(Cu){return this.responseType=Cu,this},setWithCredentials:function(Cu){return this.withCredentials=Cu,this},setMimeType:function(Cu){return this.mimeType=Cu,this}});function AnimationLoader(Cu){Loader.call(this,Cu)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new FileLoader(Lu.manager);Ru.setPath(Lu.path),Ru.load(Cu,function(Ou){try{Tu(Lu.parse(JSON.parse(Ou)))}catch(Du){Bu?Bu(Du):console.error(Du),Lu.manager.itemError(Cu)}},Pu,Bu)},parse:function(Cu){for(var Tu=[],Pu=0;Pu<Cu.length;Pu++){var Bu=AnimationClip.parse(Cu[Pu]);Tu.push(Bu)}return Tu}});function CompressedTextureLoader(Cu){Loader.call(this,Cu)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=[],Ou=new CompressedTexture;Ou.image=Ru;var Du=new FileLoader(this.manager);Du.setPath(this.path),Du.setResponseType("arraybuffer");function ku(zu){Du.load(Cu[zu],function(Hu){var Wu=Lu.parse(Hu,!0);Ru[zu]={width:Wu.width,height:Wu.height,format:Wu.format,mipmaps:Wu.mipmaps},Fu+=1,Fu===6&&(Wu.mipmapCount===1&&(Ou.minFilter=LinearFilter),Ou.format=Wu.format,Ou.needsUpdate=!0,Tu&&Tu(Ou))},Pu,Bu)}if(Array.isArray(Cu))for(var Fu=0,Nu=0,Gu=Cu.length;Nu<Gu;++Nu)ku(Nu);else Du.load(Cu,function(zu){var Hu=Lu.parse(zu,!0);if(Hu.isCubemap)for(var Wu=Hu.mipmaps.length/Hu.mipmapCount,_h=0;_h<Wu;_h++){Ru[_h]={mipmaps:[]};for(var Xc=0;Xc<Hu.mipmapCount;Xc++)Ru[_h].mipmaps.push(Hu.mipmaps[_h*Hu.mipmapCount+Xc]),Ru[_h].format=Hu.format,Ru[_h].width=Hu.width,Ru[_h].height=Hu.height}else Ou.image.width=Hu.width,Ou.image.height=Hu.height,Ou.mipmaps=Hu.mipmaps;Hu.mipmapCount===1&&(Ou.minFilter=LinearFilter),Ou.format=Hu.format,Ou.needsUpdate=!0,Tu&&Tu(Ou)},Pu,Bu);return Ou}});function DataTextureLoader(Cu){Loader.call(this,Cu)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new DataTexture,Ou=new FileLoader(this.manager);return Ou.setResponseType("arraybuffer"),Ou.setPath(this.path),Ou.load(Cu,function(Du){var ku=Lu.parse(Du);!ku||(ku.image!==void 0?Ru.image=ku.image:ku.data!==void 0&&(Ru.image.width=ku.width,Ru.image.height=ku.height,Ru.image.data=ku.data),Ru.wrapS=ku.wrapS!==void 0?ku.wrapS:ClampToEdgeWrapping,Ru.wrapT=ku.wrapT!==void 0?ku.wrapT:ClampToEdgeWrapping,Ru.magFilter=ku.magFilter!==void 0?ku.magFilter:LinearFilter,Ru.minFilter=ku.minFilter!==void 0?ku.minFilter:LinearFilter,Ru.anisotropy=ku.anisotropy!==void 0?ku.anisotropy:1,ku.format!==void 0&&(Ru.format=ku.format),ku.type!==void 0&&(Ru.type=ku.type),ku.mipmaps!==void 0&&(Ru.mipmaps=ku.mipmaps,Ru.minFilter=LinearMipmapLinearFilter),ku.mipmapCount===1&&(Ru.minFilter=LinearFilter),Ru.needsUpdate=!0,Tu&&Tu(Ru,ku))},Pu,Bu),Ru}});function ImageLoader(Cu){Loader.call(this,Cu)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(Cu,Tu,Pu,Bu){this.path!==void 0&&(Cu=this.path+Cu),Cu=this.manager.resolveURL(Cu);var Lu=this,Ru=Cache.get(Cu);if(Ru!==void 0)return Lu.manager.itemStart(Cu),setTimeout(function(){Tu&&Tu(Ru),Lu.manager.itemEnd(Cu)},0),Ru;var Ou=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Du(){Ou.removeEventListener("load",Du,!1),Ou.removeEventListener("error",ku,!1),Cache.add(Cu,this),Tu&&Tu(this),Lu.manager.itemEnd(Cu)}function ku(Fu){Ou.removeEventListener("load",Du,!1),Ou.removeEventListener("error",ku,!1),Bu&&Bu(Fu),Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)}return Ou.addEventListener("load",Du,!1),Ou.addEventListener("error",ku,!1),Cu.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Ou.crossOrigin=this.crossOrigin),Lu.manager.itemStart(Cu),Ou.src=Cu,Ou}});function CubeTextureLoader(Cu){Loader.call(this,Cu)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(Cu,Tu,Pu,Bu){var Lu=new CubeTexture,Ru=new ImageLoader(this.manager);Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path);var Ou=0;function Du(Fu){Ru.load(Cu[Fu],function(Nu){Lu.images[Fu]=Nu,Ou++,Ou===6&&(Lu.needsUpdate=!0,Tu&&Tu(Lu))},void 0,Bu)}for(var ku=0;ku<Cu.length;++ku)Du(ku);return Lu}});function TextureLoader(Cu){Loader.call(this,Cu)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(Cu,Tu,Pu,Bu){var Lu=new Texture,Ru=new ImageLoader(this.manager);return Ru.setCrossOrigin(this.crossOrigin),Ru.setPath(this.path),Ru.load(Cu,function(Ou){Lu.image=Ou;var Du=Cu.search(/\.jpe?g($|\?)/i)>0||Cu.search(/^data\:image\/jpeg/)===0;Lu.format=Du?RGBFormat:RGBAFormat,Lu.needsUpdate=!0,Tu!==void 0&&Tu(Lu)},Pu,Bu),Lu}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(Cu,Tu){var Pu=this.getUtoTmapping(Cu);return this.getPoint(Pu,Tu)},getPoints:function(Cu){Cu===void 0&&(Cu=5);for(var Tu=[],Pu=0;Pu<=Cu;Pu++)Tu.push(this.getPoint(Pu/Cu));return Tu},getSpacedPoints:function(Cu){Cu===void 0&&(Cu=5);for(var Tu=[],Pu=0;Pu<=Cu;Pu++)Tu.push(this.getPointAt(Pu/Cu));return Tu},getLength:function(){var Cu=this.getLengths();return Cu[Cu.length-1]},getLengths:function(Cu){if(Cu===void 0&&(Cu=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===Cu+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var Tu=[],Pu,Bu=this.getPoint(0),Lu,Ru=0;for(Tu.push(0),Lu=1;Lu<=Cu;Lu++)Pu=this.getPoint(Lu/Cu),Ru+=Pu.distanceTo(Bu),Tu.push(Ru),Bu=Pu;return this.cacheArcLengths=Tu,Tu},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(Cu,Tu){var Pu=this.getLengths(),Bu=0,Lu=Pu.length,Ru;Tu?Ru=Tu:Ru=Cu*Pu[Lu-1];for(var Ou=0,Du=Lu-1,ku;Ou<=Du;)if(Bu=Math.floor(Ou+(Du-Ou)/2),ku=Pu[Bu]-Ru,ku<0)Ou=Bu+1;else if(ku>0)Du=Bu-1;else{Du=Bu;break}if(Bu=Du,Pu[Bu]===Ru)return Bu/(Lu-1);var Fu=Pu[Bu],Nu=Pu[Bu+1],Gu=Nu-Fu,zu=(Ru-Fu)/Gu,Hu=(Bu+zu)/(Lu-1);return Hu},getTangent:function(Cu,Tu){var Pu=1e-4,Bu=Cu-Pu,Lu=Cu+Pu;Bu<0&&(Bu=0),Lu>1&&(Lu=1);var Ru=this.getPoint(Bu),Ou=this.getPoint(Lu),Du=Tu||(Ru.isVector2?new Vector2:new Vector3);return Du.copy(Ou).sub(Ru).normalize(),Du},getTangentAt:function(Cu,Tu){var Pu=this.getUtoTmapping(Cu);return this.getTangent(Pu,Tu)},computeFrenetFrames:function(Cu,Tu){var Pu=new Vector3,Bu=[],Lu=[],Ru=[],Ou=new Vector3,Du=new Matrix4,ku,Fu,Nu;for(ku=0;ku<=Cu;ku++)Fu=ku/Cu,Bu[ku]=this.getTangentAt(Fu,new Vector3),Bu[ku].normalize();Lu[0]=new Vector3,Ru[0]=new Vector3;var Gu=Number.MAX_VALUE,zu=Math.abs(Bu[0].x),Hu=Math.abs(Bu[0].y),Wu=Math.abs(Bu[0].z);for(zu<=Gu&&(Gu=zu,Pu.set(1,0,0)),Hu<=Gu&&(Gu=Hu,Pu.set(0,1,0)),Wu<=Gu&&Pu.set(0,0,1),Ou.crossVectors(Bu[0],Pu).normalize(),Lu[0].crossVectors(Bu[0],Ou),Ru[0].crossVectors(Bu[0],Lu[0]),ku=1;ku<=Cu;ku++)Lu[ku]=Lu[ku-1].clone(),Ru[ku]=Ru[ku-1].clone(),Ou.crossVectors(Bu[ku-1],Bu[ku]),Ou.length()>Number.EPSILON&&(Ou.normalize(),Nu=Math.acos(MathUtils.clamp(Bu[ku-1].dot(Bu[ku]),-1,1)),Lu[ku].applyMatrix4(Du.makeRotationAxis(Ou,Nu))),Ru[ku].crossVectors(Bu[ku],Lu[ku]);if(Tu===!0)for(Nu=Math.acos(MathUtils.clamp(Lu[0].dot(Lu[Cu]),-1,1)),Nu/=Cu,Bu[0].dot(Ou.crossVectors(Lu[0],Lu[Cu]))>0&&(Nu=-Nu),ku=1;ku<=Cu;ku++)Lu[ku].applyMatrix4(Du.makeRotationAxis(Bu[ku],Nu*ku)),Ru[ku].crossVectors(Bu[ku],Lu[ku]);return{tangents:Bu,normals:Lu,binormals:Ru}},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.arcLengthDivisions=Cu.arcLengthDivisions,this},toJSON:function(){var Cu={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return Cu.arcLengthDivisions=this.arcLengthDivisions,Cu.type=this.type,Cu},fromJSON:function(Cu){return this.arcLengthDivisions=Cu.arcLengthDivisions,this}});function EllipseCurve(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){Curve.call(this),this.type="EllipseCurve",this.aX=Cu||0,this.aY=Tu||0,this.xRadius=Pu||1,this.yRadius=Bu||1,this.aStartAngle=Lu||0,this.aEndAngle=Ru||2*Math.PI,this.aClockwise=Ou||!1,this.aRotation=Du||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(Cu,Tu){for(var Pu=Tu||new Vector2,Bu=Math.PI*2,Lu=this.aEndAngle-this.aStartAngle,Ru=Math.abs(Lu)<Number.EPSILON;Lu<0;)Lu+=Bu;for(;Lu>Bu;)Lu-=Bu;Lu<Number.EPSILON&&(Ru?Lu=0:Lu=Bu),this.aClockwise===!0&&!Ru&&(Lu===Bu?Lu=-Bu:Lu=Lu-Bu);var Ou=this.aStartAngle+Cu*Lu,Du=this.aX+this.xRadius*Math.cos(Ou),ku=this.aY+this.yRadius*Math.sin(Ou);if(this.aRotation!==0){var Fu=Math.cos(this.aRotation),Nu=Math.sin(this.aRotation),Gu=Du-this.aX,zu=ku-this.aY;Du=Gu*Fu-zu*Nu+this.aX,ku=Gu*Nu+zu*Fu+this.aY}return Pu.set(Du,ku)};EllipseCurve.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.aX=Cu.aX,this.aY=Cu.aY,this.xRadius=Cu.xRadius,this.yRadius=Cu.yRadius,this.aStartAngle=Cu.aStartAngle,this.aEndAngle=Cu.aEndAngle,this.aClockwise=Cu.aClockwise,this.aRotation=Cu.aRotation,this};EllipseCurve.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.aX=this.aX,Cu.aY=this.aY,Cu.xRadius=this.xRadius,Cu.yRadius=this.yRadius,Cu.aStartAngle=this.aStartAngle,Cu.aEndAngle=this.aEndAngle,Cu.aClockwise=this.aClockwise,Cu.aRotation=this.aRotation,Cu};EllipseCurve.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.aX=Cu.aX,this.aY=Cu.aY,this.xRadius=Cu.xRadius,this.yRadius=Cu.yRadius,this.aStartAngle=Cu.aStartAngle,this.aEndAngle=Cu.aEndAngle,this.aClockwise=Cu.aClockwise,this.aRotation=Cu.aRotation,this};function ArcCurve(Cu,Tu,Pu,Bu,Lu,Ru){EllipseCurve.call(this,Cu,Tu,Pu,Pu,Bu,Lu,Ru),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var Cu=0,Tu=0,Pu=0,Bu=0;function Lu(Ru,Ou,Du,ku){Cu=Ru,Tu=Du,Pu=-3*Ru+3*Ou-2*Du-ku,Bu=2*Ru-2*Ou+Du+ku}return{initCatmullRom:function(Ru,Ou,Du,ku,Fu){Lu(Ou,Du,Fu*(Du-Ru),Fu*(ku-Ou))},initNonuniformCatmullRom:function(Ru,Ou,Du,ku,Fu,Nu,Gu){var zu=(Ou-Ru)/Fu-(Du-Ru)/(Fu+Nu)+(Du-Ou)/Nu,Hu=(Du-Ou)/Nu-(ku-Ou)/(Nu+Gu)+(ku-Du)/Gu;zu*=Nu,Hu*=Nu,Lu(Ou,Du,zu,Hu)},calc:function(Ru){var Ou=Ru*Ru,Du=Ou*Ru;return Cu+Tu*Ru+Pu*Ou+Bu*Du}}}var tmp=new Vector3,px=new CubicPoly,py$1=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(Cu,Tu,Pu,Bu){Curve.call(this),this.type="CatmullRomCurve3",this.points=Cu||[],this.closed=Tu||!1,this.curveType=Pu||"centripetal",this.tension=Bu||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector3,Bu=this.points,Lu=Bu.length,Ru=(Lu-(this.closed?0:1))*Cu,Ou=Math.floor(Ru),Du=Ru-Ou;this.closed?Ou+=Ou>0?0:(Math.floor(Math.abs(Ou)/Lu)+1)*Lu:Du===0&&Ou===Lu-1&&(Ou=Lu-2,Du=1);var ku,Fu,Nu,Gu;if(this.closed||Ou>0?ku=Bu[(Ou-1)%Lu]:(tmp.subVectors(Bu[0],Bu[1]).add(Bu[0]),ku=tmp),Fu=Bu[Ou%Lu],Nu=Bu[(Ou+1)%Lu],this.closed||Ou+2<Lu?Gu=Bu[(Ou+2)%Lu]:(tmp.subVectors(Bu[Lu-1],Bu[Lu-2]).add(Bu[Lu-1]),Gu=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var zu=this.curveType==="chordal"?.5:.25,Hu=Math.pow(ku.distanceToSquared(Fu),zu),Wu=Math.pow(Fu.distanceToSquared(Nu),zu),_h=Math.pow(Nu.distanceToSquared(Gu),zu);Wu<1e-4&&(Wu=1),Hu<1e-4&&(Hu=Wu),_h<1e-4&&(_h=Wu),px.initNonuniformCatmullRom(ku.x,Fu.x,Nu.x,Gu.x,Hu,Wu,_h),py$1.initNonuniformCatmullRom(ku.y,Fu.y,Nu.y,Gu.y,Hu,Wu,_h),pz.initNonuniformCatmullRom(ku.z,Fu.z,Nu.z,Gu.z,Hu,Wu,_h)}else this.curveType==="catmullrom"&&(px.initCatmullRom(ku.x,Fu.x,Nu.x,Gu.x,this.tension),py$1.initCatmullRom(ku.y,Fu.y,Nu.y,Gu.y,this.tension),pz.initCatmullRom(ku.z,Fu.z,Nu.z,Gu.z,this.tension));return Pu.set(px.calc(Du),py$1.calc(Du),pz.calc(Du)),Pu};CatmullRomCurve3.prototype.copy=function(Cu){Curve.prototype.copy.call(this,Cu),this.points=[];for(var Tu=0,Pu=Cu.points.length;Tu<Pu;Tu++){var Bu=Cu.points[Tu];this.points.push(Bu.clone())}return this.closed=Cu.closed,this.curveType=Cu.curveType,this.tension=Cu.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);Cu.points=[];for(var Tu=0,Pu=this.points.length;Tu<Pu;Tu++){var Bu=this.points[Tu];Cu.points.push(Bu.toArray())}return Cu.closed=this.closed,Cu.curveType=this.curveType,Cu.tension=this.tension,Cu};CatmullRomCurve3.prototype.fromJSON=function(Cu){Curve.prototype.fromJSON.call(this,Cu),this.points=[];for(var Tu=0,Pu=Cu.points.length;Tu<Pu;Tu++){var Bu=Cu.points[Tu];this.points.push(new Vector3().fromArray(Bu))}return this.closed=Cu.closed,this.curveType=Cu.curveType,this.tension=Cu.tension,this};function CatmullRom(Cu,Tu,Pu,Bu,Lu){var Ru=(Bu-Tu)*.5,Ou=(Lu-Pu)*.5,Du=Cu*Cu,ku=Cu*Du;return(2*Pu-2*Bu+Ru+Ou)*ku+(-3*Pu+3*Bu-2*Ru-Ou)*Du+Ru*Cu+Pu}function QuadraticBezierP0(Cu,Tu){var Pu=1-Cu;return Pu*Pu*Tu}function QuadraticBezierP1(Cu,Tu){return 2*(1-Cu)*Cu*Tu}function QuadraticBezierP2(Cu,Tu){return Cu*Cu*Tu}function QuadraticBezier(Cu,Tu,Pu,Bu){return QuadraticBezierP0(Cu,Tu)+QuadraticBezierP1(Cu,Pu)+QuadraticBezierP2(Cu,Bu)}function CubicBezierP0(Cu,Tu){var Pu=1-Cu;return Pu*Pu*Pu*Tu}function CubicBezierP1(Cu,Tu){var Pu=1-Cu;return 3*Pu*Pu*Cu*Tu}function CubicBezierP2(Cu,Tu){return 3*(1-Cu)*Cu*Cu*Tu}function CubicBezierP3(Cu,Tu){return Cu*Cu*Cu*Tu}function CubicBezier(Cu,Tu,Pu,Bu,Lu){return CubicBezierP0(Cu,Tu)+CubicBezierP1(Cu,Pu)+CubicBezierP2(Cu,Bu)+CubicBezierP3(Cu,Lu)}function CubicBezierCurve(Cu,Tu,Pu,Bu){Curve.call(this),this.type="CubicBezierCurve",this.v0=Cu||new Vector2,this.v1=Tu||new Vector2,this.v2=Pu||new Vector2,this.v3=Bu||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector2,Bu=this.v0,Lu=this.v1,Ru=this.v2,Ou=this.v3;return Pu.set(CubicBezier(Cu,Bu.x,Lu.x,Ru.x,Ou.x),CubicBezier(Cu,Bu.y,Lu.y,Ru.y,Ou.y)),Pu};CubicBezierCurve.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v0.copy(Cu.v0),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this.v3.copy(Cu.v3),this};CubicBezierCurve.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v0=this.v0.toArray(),Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu.v3=this.v3.toArray(),Cu};CubicBezierCurve.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v0.fromArray(Cu.v0),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this.v3.fromArray(Cu.v3),this};function CubicBezierCurve3(Cu,Tu,Pu,Bu){Curve.call(this),this.type="CubicBezierCurve3",this.v0=Cu||new Vector3,this.v1=Tu||new Vector3,this.v2=Pu||new Vector3,this.v3=Bu||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector3,Bu=this.v0,Lu=this.v1,Ru=this.v2,Ou=this.v3;return Pu.set(CubicBezier(Cu,Bu.x,Lu.x,Ru.x,Ou.x),CubicBezier(Cu,Bu.y,Lu.y,Ru.y,Ou.y),CubicBezier(Cu,Bu.z,Lu.z,Ru.z,Ou.z)),Pu};CubicBezierCurve3.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v0.copy(Cu.v0),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this.v3.copy(Cu.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v0=this.v0.toArray(),Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu.v3=this.v3.toArray(),Cu};CubicBezierCurve3.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v0.fromArray(Cu.v0),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this.v3.fromArray(Cu.v3),this};function LineCurve(Cu,Tu){Curve.call(this),this.type="LineCurve",this.v1=Cu||new Vector2,this.v2=Tu||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector2;return Cu===1?Pu.copy(this.v2):(Pu.copy(this.v2).sub(this.v1),Pu.multiplyScalar(Cu).add(this.v1)),Pu};LineCurve.prototype.getPointAt=function(Cu,Tu){return this.getPoint(Cu,Tu)};LineCurve.prototype.getTangent=function(Cu,Tu){var Pu=Tu||new Vector2,Pu=Pu.copy(this.v2).sub(this.v1).normalize();return Pu};LineCurve.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this};LineCurve.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu};LineCurve.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this};function LineCurve3(Cu,Tu){Curve.call(this),this.type="LineCurve3",this.v1=Cu||new Vector3,this.v2=Tu||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector3;return Cu===1?Pu.copy(this.v2):(Pu.copy(this.v2).sub(this.v1),Pu.multiplyScalar(Cu).add(this.v1)),Pu};LineCurve3.prototype.getPointAt=function(Cu,Tu){return this.getPoint(Cu,Tu)};LineCurve3.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this};LineCurve3.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu};LineCurve3.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this};function QuadraticBezierCurve(Cu,Tu,Pu){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=Cu||new Vector2,this.v1=Tu||new Vector2,this.v2=Pu||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector2,Bu=this.v0,Lu=this.v1,Ru=this.v2;return Pu.set(QuadraticBezier(Cu,Bu.x,Lu.x,Ru.x),QuadraticBezier(Cu,Bu.y,Lu.y,Ru.y)),Pu};QuadraticBezierCurve.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v0.copy(Cu.v0),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v0=this.v0.toArray(),Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu};QuadraticBezierCurve.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v0.fromArray(Cu.v0),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this};function QuadraticBezierCurve3(Cu,Tu,Pu){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=Cu||new Vector3,this.v1=Tu||new Vector3,this.v2=Pu||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector3,Bu=this.v0,Lu=this.v1,Ru=this.v2;return Pu.set(QuadraticBezier(Cu,Bu.x,Lu.x,Ru.x),QuadraticBezier(Cu,Bu.y,Lu.y,Ru.y),QuadraticBezier(Cu,Bu.z,Lu.z,Ru.z)),Pu};QuadraticBezierCurve3.prototype.copy=function(Cu){return Curve.prototype.copy.call(this,Cu),this.v0.copy(Cu.v0),this.v1.copy(Cu.v1),this.v2.copy(Cu.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);return Cu.v0=this.v0.toArray(),Cu.v1=this.v1.toArray(),Cu.v2=this.v2.toArray(),Cu};QuadraticBezierCurve3.prototype.fromJSON=function(Cu){return Curve.prototype.fromJSON.call(this,Cu),this.v0.fromArray(Cu.v0),this.v1.fromArray(Cu.v1),this.v2.fromArray(Cu.v2),this};function SplineCurve(Cu){Curve.call(this),this.type="SplineCurve",this.points=Cu||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector2,Bu=this.points,Lu=(Bu.length-1)*Cu,Ru=Math.floor(Lu),Ou=Lu-Ru,Du=Bu[Ru===0?Ru:Ru-1],ku=Bu[Ru],Fu=Bu[Ru>Bu.length-2?Bu.length-1:Ru+1],Nu=Bu[Ru>Bu.length-3?Bu.length-1:Ru+2];return Pu.set(CatmullRom(Ou,Du.x,ku.x,Fu.x,Nu.x),CatmullRom(Ou,Du.y,ku.y,Fu.y,Nu.y)),Pu};SplineCurve.prototype.copy=function(Cu){Curve.prototype.copy.call(this,Cu),this.points=[];for(var Tu=0,Pu=Cu.points.length;Tu<Pu;Tu++){var Bu=Cu.points[Tu];this.points.push(Bu.clone())}return this};SplineCurve.prototype.toJSON=function(){var Cu=Curve.prototype.toJSON.call(this);Cu.points=[];for(var Tu=0,Pu=this.points.length;Tu<Pu;Tu++){var Bu=this.points[Tu];Cu.points.push(Bu.toArray())}return Cu};SplineCurve.prototype.fromJSON=function(Cu){Curve.prototype.fromJSON.call(this,Cu),this.points=[];for(var Tu=0,Pu=Cu.points.length;Tu<Pu;Tu++){var Bu=Cu.points[Tu];this.points.push(new Vector2().fromArray(Bu))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(Cu){this.curves.push(Cu)},closePath:function(){var Cu=this.curves[0].getPoint(0),Tu=this.curves[this.curves.length-1].getPoint(1);Cu.equals(Tu)||this.curves.push(new LineCurve(Tu,Cu))},getPoint:function(Cu){for(var Tu=Cu*this.getLength(),Pu=this.getCurveLengths(),Bu=0;Bu<Pu.length;){if(Pu[Bu]>=Tu){var Lu=Pu[Bu]-Tu,Ru=this.curves[Bu],Ou=Ru.getLength(),Du=Ou===0?0:1-Lu/Ou;return Ru.getPointAt(Du)}Bu++}return null},getLength:function(){var Cu=this.getCurveLengths();return Cu[Cu.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var Cu=[],Tu=0,Pu=0,Bu=this.curves.length;Pu<Bu;Pu++)Tu+=this.curves[Pu].getLength(),Cu.push(Tu);return this.cacheLengths=Cu,Cu},getSpacedPoints:function(Cu){Cu===void 0&&(Cu=40);for(var Tu=[],Pu=0;Pu<=Cu;Pu++)Tu.push(this.getPoint(Pu/Cu));return this.autoClose&&Tu.push(Tu[0]),Tu},getPoints:function(Cu){Cu=Cu||12;for(var Tu=[],Pu,Bu=0,Lu=this.curves;Bu<Lu.length;Bu++)for(var Ru=Lu[Bu],Ou=Ru&&Ru.isEllipseCurve?Cu*2:Ru&&(Ru.isLineCurve||Ru.isLineCurve3)?1:Ru&&Ru.isSplineCurve?Cu*Ru.points.length:Cu,Du=Ru.getPoints(Ou),ku=0;ku<Du.length;ku++){var Fu=Du[ku];Pu&&Pu.equals(Fu)||(Tu.push(Fu),Pu=Fu)}return this.autoClose&&Tu.length>1&&!Tu[Tu.length-1].equals(Tu[0])&&Tu.push(Tu[0]),Tu},copy:function(Cu){Curve.prototype.copy.call(this,Cu),this.curves=[];for(var Tu=0,Pu=Cu.curves.length;Tu<Pu;Tu++){var Bu=Cu.curves[Tu];this.curves.push(Bu.clone())}return this.autoClose=Cu.autoClose,this},toJSON:function(){var Cu=Curve.prototype.toJSON.call(this);Cu.autoClose=this.autoClose,Cu.curves=[];for(var Tu=0,Pu=this.curves.length;Tu<Pu;Tu++){var Bu=this.curves[Tu];Cu.curves.push(Bu.toJSON())}return Cu},fromJSON:function(Cu){Curve.prototype.fromJSON.call(this,Cu),this.autoClose=Cu.autoClose,this.curves=[];for(var Tu=0,Pu=Cu.curves.length;Tu<Pu;Tu++){var Bu=Cu.curves[Tu];this.curves.push(new Curves[Bu.type]().fromJSON(Bu))}return this}});function Path(Cu){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,Cu&&this.setFromPoints(Cu)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(Cu){this.moveTo(Cu[0].x,Cu[0].y);for(var Tu=1,Pu=Cu.length;Tu<Pu;Tu++)this.lineTo(Cu[Tu].x,Cu[Tu].y);return this},moveTo:function(Cu,Tu){return this.currentPoint.set(Cu,Tu),this},lineTo:function(Cu,Tu){var Pu=new LineCurve(this.currentPoint.clone(),new Vector2(Cu,Tu));return this.curves.push(Pu),this.currentPoint.set(Cu,Tu),this},quadraticCurveTo:function(Cu,Tu,Pu,Bu){var Lu=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(Cu,Tu),new Vector2(Pu,Bu));return this.curves.push(Lu),this.currentPoint.set(Pu,Bu),this},bezierCurveTo:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(Cu,Tu),new Vector2(Pu,Bu),new Vector2(Lu,Ru));return this.curves.push(Ou),this.currentPoint.set(Lu,Ru),this},splineThru:function(Cu){var Tu=[this.currentPoint.clone()].concat(Cu),Pu=new SplineCurve(Tu);return this.curves.push(Pu),this.currentPoint.copy(Cu[Cu.length-1]),this},arc:function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=this.currentPoint.x,Du=this.currentPoint.y;return this.absarc(Cu+Ou,Tu+Du,Pu,Bu,Lu,Ru),this},absarc:function(Cu,Tu,Pu,Bu,Lu,Ru){return this.absellipse(Cu,Tu,Pu,Pu,Bu,Lu,Ru),this},ellipse:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){var ku=this.currentPoint.x,Fu=this.currentPoint.y;return this.absellipse(Cu+ku,Tu+Fu,Pu,Bu,Lu,Ru,Ou,Du),this},absellipse:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){var ku=new EllipseCurve(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du);if(this.curves.length>0){var Fu=ku.getPoint(0);Fu.equals(this.currentPoint)||this.lineTo(Fu.x,Fu.y)}this.curves.push(ku);var Nu=ku.getPoint(1);return this.currentPoint.copy(Nu),this},copy:function(Cu){return CurvePath.prototype.copy.call(this,Cu),this.currentPoint.copy(Cu.currentPoint),this},toJSON:function(){var Cu=CurvePath.prototype.toJSON.call(this);return Cu.currentPoint=this.currentPoint.toArray(),Cu},fromJSON:function(Cu){return CurvePath.prototype.fromJSON.call(this,Cu),this.currentPoint.fromArray(Cu.currentPoint),this}});function Shape(Cu){Path.call(this,Cu),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(Cu){for(var Tu=[],Pu=0,Bu=this.holes.length;Pu<Bu;Pu++)Tu[Pu]=this.holes[Pu].getPoints(Cu);return Tu},extractPoints:function(Cu){return{shape:this.getPoints(Cu),holes:this.getPointsHoles(Cu)}},copy:function(Cu){Path.prototype.copy.call(this,Cu),this.holes=[];for(var Tu=0,Pu=Cu.holes.length;Tu<Pu;Tu++){var Bu=Cu.holes[Tu];this.holes.push(Bu.clone())}return this},toJSON:function(){var Cu=Path.prototype.toJSON.call(this);Cu.uuid=this.uuid,Cu.holes=[];for(var Tu=0,Pu=this.holes.length;Tu<Pu;Tu++){var Bu=this.holes[Tu];Cu.holes.push(Bu.toJSON())}return Cu},fromJSON:function(Cu){Path.prototype.fromJSON.call(this,Cu),this.uuid=Cu.uuid,this.holes=[];for(var Tu=0,Pu=Cu.holes.length;Tu<Pu;Tu++){var Bu=Cu.holes[Tu];this.holes.push(new Path().fromJSON(Bu))}return this}});function Light(Cu,Tu){Object3D.call(this),this.type="Light",this.color=new Color(Cu),this.intensity=Tu!==void 0?Tu:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(Cu){return Object3D.prototype.copy.call(this,Cu),this.color.copy(Cu.color),this.intensity=Cu.intensity,this},toJSON:function(Cu){var Tu=Object3D.prototype.toJSON.call(this,Cu);return Tu.object.color=this.color.getHex(),Tu.object.intensity=this.intensity,this.groundColor!==void 0&&(Tu.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(Tu.object.distance=this.distance),this.angle!==void 0&&(Tu.object.angle=this.angle),this.decay!==void 0&&(Tu.object.decay=this.decay),this.penumbra!==void 0&&(Tu.object.penumbra=this.penumbra),this.shadow!==void 0&&(Tu.object.shadow=this.shadow.toJSON()),Tu}});function HemisphereLight(Cu,Tu,Pu){Light.call(this,Cu,Pu),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(Tu)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.groundColor.copy(Cu.groundColor),this}});function LightShadow(Cu){this.camera=Cu,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(Cu){var Tu=this.camera,Pu=this.matrix,Bu=this._projScreenMatrix,Lu=this._lookTarget,Ru=this._lightPositionWorld;Ru.setFromMatrixPosition(Cu.matrixWorld),Tu.position.copy(Ru),Lu.setFromMatrixPosition(Cu.target.matrixWorld),Tu.lookAt(Lu),Tu.updateMatrixWorld(),Bu.multiplyMatrices(Tu.projectionMatrix,Tu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bu),Pu.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Pu.multiply(Tu.projectionMatrix),Pu.multiply(Tu.matrixWorldInverse)},getViewport:function(Cu){return this._viewports[Cu]},getFrameExtents:function(){return this._frameExtents},copy:function(Cu){return this.camera=Cu.camera.clone(),this.bias=Cu.bias,this.radius=Cu.radius,this.mapSize.copy(Cu.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var Cu={};return this.bias!==0&&(Cu.bias=this.bias),this.radius!==1&&(Cu.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(Cu.mapSize=this.mapSize.toArray()),Cu.camera=this.camera.toJSON(!1).object,delete Cu.camera.matrix,Cu}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(Cu){var Tu=this.camera,Pu=MathUtils.RAD2DEG*2*Cu.angle,Bu=this.mapSize.width/this.mapSize.height,Lu=Cu.distance||Tu.far;(Pu!==Tu.fov||Bu!==Tu.aspect||Lu!==Tu.far)&&(Tu.fov=Pu,Tu.aspect=Bu,Tu.far=Lu,Tu.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,Cu)}});function SpotLight(Cu,Tu,Pu,Bu,Lu,Ru){Light.call(this,Cu,Tu),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ou){this.intensity=Ou/Math.PI}}),this.distance=Pu!==void 0?Pu:0,this.angle=Bu!==void 0?Bu:Math.PI/3,this.penumbra=Lu!==void 0?Lu:0,this.decay=Ru!==void 0?Ru:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.distance=Cu.distance,this.angle=Cu.angle,this.penumbra=Cu.penumbra,this.decay=Cu.decay,this.target=Cu.target.clone(),this.shadow=Cu.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(Cu,Tu){Tu===void 0&&(Tu=0);var Pu=this.camera,Bu=this.matrix,Lu=this._lightPositionWorld,Ru=this._lookTarget,Ou=this._projScreenMatrix;Lu.setFromMatrixPosition(Cu.matrixWorld),Pu.position.copy(Lu),Ru.copy(Pu.position),Ru.add(this._cubeDirections[Tu]),Pu.up.copy(this._cubeUps[Tu]),Pu.lookAt(Ru),Pu.updateMatrixWorld(),Bu.makeTranslation(-Lu.x,-Lu.y,-Lu.z),Ou.multiplyMatrices(Pu.projectionMatrix,Pu.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ou)}});function PointLight(Cu,Tu,Pu,Bu){Light.call(this,Cu,Tu),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Lu){this.intensity=Lu/(4*Math.PI)}}),this.distance=Pu!==void 0?Pu:0,this.decay=Bu!==void 0?Bu:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.distance=Cu.distance,this.decay=Cu.decay,this.shadow=Cu.shadow.clone(),this}});function OrthographicCamera(Cu,Tu,Pu,Bu,Lu,Ru){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=Cu!==void 0?Cu:-1,this.right=Tu!==void 0?Tu:1,this.top=Pu!==void 0?Pu:1,this.bottom=Bu!==void 0?Bu:-1,this.near=Lu!==void 0?Lu:.1,this.far=Ru!==void 0?Ru:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(Cu,Tu){return Camera.prototype.copy.call(this,Cu,Tu),this.left=Cu.left,this.right=Cu.right,this.top=Cu.top,this.bottom=Cu.bottom,this.near=Cu.near,this.far=Cu.far,this.zoom=Cu.zoom,this.view=Cu.view===null?null:Object.assign({},Cu.view),this},setViewOffset:function(Cu,Tu,Pu,Bu,Lu,Ru){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=Cu,this.view.fullHeight=Tu,this.view.offsetX=Pu,this.view.offsetY=Bu,this.view.width=Lu,this.view.height=Ru,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Cu=(this.right-this.left)/(2*this.zoom),Tu=(this.top-this.bottom)/(2*this.zoom),Pu=(this.right+this.left)/2,Bu=(this.top+this.bottom)/2,Lu=Pu-Cu,Ru=Pu+Cu,Ou=Bu+Tu,Du=Bu-Tu;if(this.view!==null&&this.view.enabled){var ku=(this.right-this.left)/this.view.fullWidth/this.zoom,Fu=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Lu+=ku*this.view.offsetX,Ru=Lu+ku*this.view.width,Ou-=Fu*this.view.offsetY,Du=Ou-Fu*this.view.height}this.projectionMatrix.makeOrthographic(Lu,Ru,Ou,Du,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(Cu){var Tu=Object3D.prototype.toJSON.call(this,Cu);return Tu.object.zoom=this.zoom,Tu.object.left=this.left,Tu.object.right=this.right,Tu.object.top=this.top,Tu.object.bottom=this.bottom,Tu.object.near=this.near,Tu.object.far=this.far,this.view!==null&&(Tu.object.view=Object.assign({},this.view)),Tu}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(Cu){LightShadow.prototype.updateMatrices.call(this,Cu)}});function DirectionalLight(Cu,Tu){Light.call(this,Cu,Tu),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.target=Cu.target.clone(),this.shadow=Cu.shadow.clone(),this}});function AmbientLight(Cu,Tu){Light.call(this,Cu,Tu),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(Cu,Tu,Pu,Bu){Light.call(this,Cu,Tu),this.type="RectAreaLight",this.width=Pu!==void 0?Pu:10,this.height=Bu!==void 0?Bu:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.width=Cu.width,this.height=Cu.height,this},toJSON:function(Cu){var Tu=Light.prototype.toJSON.call(this,Cu);return Tu.object.width=this.width,Tu.object.height=this.height,Tu}});function SphericalHarmonics3(){this.coefficients=[];for(var Cu=0;Cu<9;Cu++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(Cu){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].copy(Cu[Tu]);return this},zero:function(){for(var Cu=0;Cu<9;Cu++)this.coefficients[Cu].set(0,0,0);return this},getAt:function(Cu,Tu){var Pu=Cu.x,Bu=Cu.y,Lu=Cu.z,Ru=this.coefficients;return Tu.copy(Ru[0]).multiplyScalar(.282095),Tu.addScaledVector(Ru[1],.488603*Bu),Tu.addScaledVector(Ru[2],.488603*Lu),Tu.addScaledVector(Ru[3],.488603*Pu),Tu.addScaledVector(Ru[4],1.092548*(Pu*Bu)),Tu.addScaledVector(Ru[5],1.092548*(Bu*Lu)),Tu.addScaledVector(Ru[6],.315392*(3*Lu*Lu-1)),Tu.addScaledVector(Ru[7],1.092548*(Pu*Lu)),Tu.addScaledVector(Ru[8],.546274*(Pu*Pu-Bu*Bu)),Tu},getIrradianceAt:function(Cu,Tu){var Pu=Cu.x,Bu=Cu.y,Lu=Cu.z,Ru=this.coefficients;return Tu.copy(Ru[0]).multiplyScalar(.886227),Tu.addScaledVector(Ru[1],2*.511664*Bu),Tu.addScaledVector(Ru[2],2*.511664*Lu),Tu.addScaledVector(Ru[3],2*.511664*Pu),Tu.addScaledVector(Ru[4],2*.429043*Pu*Bu),Tu.addScaledVector(Ru[5],2*.429043*Bu*Lu),Tu.addScaledVector(Ru[6],.743125*Lu*Lu-.247708),Tu.addScaledVector(Ru[7],2*.429043*Pu*Lu),Tu.addScaledVector(Ru[8],.429043*(Pu*Pu-Bu*Bu)),Tu},add:function(Cu){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].add(Cu.coefficients[Tu]);return this},addScaledSH:function(Cu,Tu){for(var Pu=0;Pu<9;Pu++)this.coefficients[Pu].addScaledVector(Cu.coefficients[Pu],Tu);return this},scale:function(Cu){for(var Tu=0;Tu<9;Tu++)this.coefficients[Tu].multiplyScalar(Cu);return this},lerp:function(Cu,Tu){for(var Pu=0;Pu<9;Pu++)this.coefficients[Pu].lerp(Cu.coefficients[Pu],Tu);return this},equals:function(Cu){for(var Tu=0;Tu<9;Tu++)if(!this.coefficients[Tu].equals(Cu.coefficients[Tu]))return!1;return!0},copy:function(Cu){return this.set(Cu.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(Cu,Tu){Tu===void 0&&(Tu=0);for(var Pu=this.coefficients,Bu=0;Bu<9;Bu++)Pu[Bu].fromArray(Cu,Tu+Bu*3);return this},toArray:function(Cu,Tu){Cu===void 0&&(Cu=[]),Tu===void 0&&(Tu=0);for(var Pu=this.coefficients,Bu=0;Bu<9;Bu++)Pu[Bu].toArray(Cu,Tu+Bu*3);return Cu}});Object.assign(SphericalHarmonics3,{getBasisAt:function(Cu,Tu){var Pu=Cu.x,Bu=Cu.y,Lu=Cu.z;Tu[0]=.282095,Tu[1]=.488603*Bu,Tu[2]=.488603*Lu,Tu[3]=.488603*Pu,Tu[4]=1.092548*Pu*Bu,Tu[5]=1.092548*Bu*Lu,Tu[6]=.315392*(3*Lu*Lu-1),Tu[7]=1.092548*Pu*Lu,Tu[8]=.546274*(Pu*Pu-Bu*Bu)}});function LightProbe(Cu,Tu){Light.call(this,void 0,Tu),this.type="LightProbe",this.sh=Cu!==void 0?Cu:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(Cu){return Light.prototype.copy.call(this,Cu),this.sh.copy(Cu.sh),this},fromJSON:function(Cu){return this.intensity=Cu.intensity,this.sh.fromArray(Cu.sh),this},toJSON:function(Cu){var Tu=Light.prototype.toJSON.call(this,Cu);return Tu.object.sh=this.sh.toArray(),Tu}});function MaterialLoader(Cu){Loader.call(this,Cu),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new FileLoader(Lu.manager);Ru.setPath(Lu.path),Ru.load(Cu,function(Ou){try{Tu(Lu.parse(JSON.parse(Ou)))}catch(Du){Bu?Bu(Du):console.error(Du),Lu.manager.itemError(Cu)}},Pu,Bu)},parse:function(Cu){var Tu=this.textures;function Pu(ku){return Tu[ku]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ku),Tu[ku]}var Bu=new Materials[Cu.type];if(Cu.uuid!==void 0&&(Bu.uuid=Cu.uuid),Cu.name!==void 0&&(Bu.name=Cu.name),Cu.color!==void 0&&Bu.color.setHex(Cu.color),Cu.roughness!==void 0&&(Bu.roughness=Cu.roughness),Cu.metalness!==void 0&&(Bu.metalness=Cu.metalness),Cu.sheen!==void 0&&(Bu.sheen=new Color().setHex(Cu.sheen)),Cu.emissive!==void 0&&Bu.emissive.setHex(Cu.emissive),Cu.specular!==void 0&&Bu.specular.setHex(Cu.specular),Cu.shininess!==void 0&&(Bu.shininess=Cu.shininess),Cu.clearcoat!==void 0&&(Bu.clearcoat=Cu.clearcoat),Cu.clearcoatRoughness!==void 0&&(Bu.clearcoatRoughness=Cu.clearcoatRoughness),Cu.fog!==void 0&&(Bu.fog=Cu.fog),Cu.flatShading!==void 0&&(Bu.flatShading=Cu.flatShading),Cu.blending!==void 0&&(Bu.blending=Cu.blending),Cu.combine!==void 0&&(Bu.combine=Cu.combine),Cu.side!==void 0&&(Bu.side=Cu.side),Cu.opacity!==void 0&&(Bu.opacity=Cu.opacity),Cu.transparent!==void 0&&(Bu.transparent=Cu.transparent),Cu.alphaTest!==void 0&&(Bu.alphaTest=Cu.alphaTest),Cu.depthTest!==void 0&&(Bu.depthTest=Cu.depthTest),Cu.depthWrite!==void 0&&(Bu.depthWrite=Cu.depthWrite),Cu.colorWrite!==void 0&&(Bu.colorWrite=Cu.colorWrite),Cu.stencilWrite!==void 0&&(Bu.stencilWrite=Cu.stencilWrite),Cu.stencilWriteMask!==void 0&&(Bu.stencilWriteMask=Cu.stencilWriteMask),Cu.stencilFunc!==void 0&&(Bu.stencilFunc=Cu.stencilFunc),Cu.stencilRef!==void 0&&(Bu.stencilRef=Cu.stencilRef),Cu.stencilFuncMask!==void 0&&(Bu.stencilFuncMask=Cu.stencilFuncMask),Cu.stencilFail!==void 0&&(Bu.stencilFail=Cu.stencilFail),Cu.stencilZFail!==void 0&&(Bu.stencilZFail=Cu.stencilZFail),Cu.stencilZPass!==void 0&&(Bu.stencilZPass=Cu.stencilZPass),Cu.wireframe!==void 0&&(Bu.wireframe=Cu.wireframe),Cu.wireframeLinewidth!==void 0&&(Bu.wireframeLinewidth=Cu.wireframeLinewidth),Cu.wireframeLinecap!==void 0&&(Bu.wireframeLinecap=Cu.wireframeLinecap),Cu.wireframeLinejoin!==void 0&&(Bu.wireframeLinejoin=Cu.wireframeLinejoin),Cu.rotation!==void 0&&(Bu.rotation=Cu.rotation),Cu.linewidth!==1&&(Bu.linewidth=Cu.linewidth),Cu.dashSize!==void 0&&(Bu.dashSize=Cu.dashSize),Cu.gapSize!==void 0&&(Bu.gapSize=Cu.gapSize),Cu.scale!==void 0&&(Bu.scale=Cu.scale),Cu.polygonOffset!==void 0&&(Bu.polygonOffset=Cu.polygonOffset),Cu.polygonOffsetFactor!==void 0&&(Bu.polygonOffsetFactor=Cu.polygonOffsetFactor),Cu.polygonOffsetUnits!==void 0&&(Bu.polygonOffsetUnits=Cu.polygonOffsetUnits),Cu.skinning!==void 0&&(Bu.skinning=Cu.skinning),Cu.morphTargets!==void 0&&(Bu.morphTargets=Cu.morphTargets),Cu.morphNormals!==void 0&&(Bu.morphNormals=Cu.morphNormals),Cu.dithering!==void 0&&(Bu.dithering=Cu.dithering),Cu.vertexTangents!==void 0&&(Bu.vertexTangents=Cu.vertexTangents),Cu.visible!==void 0&&(Bu.visible=Cu.visible),Cu.toneMapped!==void 0&&(Bu.toneMapped=Cu.toneMapped),Cu.userData!==void 0&&(Bu.userData=Cu.userData),Cu.vertexColors!==void 0&&(typeof Cu.vertexColors=="number"?Bu.vertexColors=Cu.vertexColors>0:Bu.vertexColors=Cu.vertexColors),Cu.uniforms!==void 0)for(var Lu in Cu.uniforms){var Ru=Cu.uniforms[Lu];switch(Bu.uniforms[Lu]={},Ru.type){case"t":Bu.uniforms[Lu].value=Pu(Ru.value);break;case"c":Bu.uniforms[Lu].value=new Color().setHex(Ru.value);break;case"v2":Bu.uniforms[Lu].value=new Vector2().fromArray(Ru.value);break;case"v3":Bu.uniforms[Lu].value=new Vector3().fromArray(Ru.value);break;case"v4":Bu.uniforms[Lu].value=new Vector4().fromArray(Ru.value);break;case"m3":Bu.uniforms[Lu].value=new Matrix3().fromArray(Ru.value);case"m4":Bu.uniforms[Lu].value=new Matrix4().fromArray(Ru.value);break;default:Bu.uniforms[Lu].value=Ru.value}}if(Cu.defines!==void 0&&(Bu.defines=Cu.defines),Cu.vertexShader!==void 0&&(Bu.vertexShader=Cu.vertexShader),Cu.fragmentShader!==void 0&&(Bu.fragmentShader=Cu.fragmentShader),Cu.extensions!==void 0)for(var Ou in Cu.extensions)Bu.extensions[Ou]=Cu.extensions[Ou];if(Cu.shading!==void 0&&(Bu.flatShading=Cu.shading===1),Cu.size!==void 0&&(Bu.size=Cu.size),Cu.sizeAttenuation!==void 0&&(Bu.sizeAttenuation=Cu.sizeAttenuation),Cu.map!==void 0&&(Bu.map=Pu(Cu.map)),Cu.matcap!==void 0&&(Bu.matcap=Pu(Cu.matcap)),Cu.alphaMap!==void 0&&(Bu.alphaMap=Pu(Cu.alphaMap)),Cu.bumpMap!==void 0&&(Bu.bumpMap=Pu(Cu.bumpMap)),Cu.bumpScale!==void 0&&(Bu.bumpScale=Cu.bumpScale),Cu.normalMap!==void 0&&(Bu.normalMap=Pu(Cu.normalMap)),Cu.normalMapType!==void 0&&(Bu.normalMapType=Cu.normalMapType),Cu.normalScale!==void 0){var Du=Cu.normalScale;Array.isArray(Du)===!1&&(Du=[Du,Du]),Bu.normalScale=new Vector2().fromArray(Du)}return Cu.displacementMap!==void 0&&(Bu.displacementMap=Pu(Cu.displacementMap)),Cu.displacementScale!==void 0&&(Bu.displacementScale=Cu.displacementScale),Cu.displacementBias!==void 0&&(Bu.displacementBias=Cu.displacementBias),Cu.roughnessMap!==void 0&&(Bu.roughnessMap=Pu(Cu.roughnessMap)),Cu.metalnessMap!==void 0&&(Bu.metalnessMap=Pu(Cu.metalnessMap)),Cu.emissiveMap!==void 0&&(Bu.emissiveMap=Pu(Cu.emissiveMap)),Cu.emissiveIntensity!==void 0&&(Bu.emissiveIntensity=Cu.emissiveIntensity),Cu.specularMap!==void 0&&(Bu.specularMap=Pu(Cu.specularMap)),Cu.envMap!==void 0&&(Bu.envMap=Pu(Cu.envMap)),Cu.envMapIntensity!==void 0&&(Bu.envMapIntensity=Cu.envMapIntensity),Cu.reflectivity!==void 0&&(Bu.reflectivity=Cu.reflectivity),Cu.refractionRatio!==void 0&&(Bu.refractionRatio=Cu.refractionRatio),Cu.lightMap!==void 0&&(Bu.lightMap=Pu(Cu.lightMap)),Cu.lightMapIntensity!==void 0&&(Bu.lightMapIntensity=Cu.lightMapIntensity),Cu.aoMap!==void 0&&(Bu.aoMap=Pu(Cu.aoMap)),Cu.aoMapIntensity!==void 0&&(Bu.aoMapIntensity=Cu.aoMapIntensity),Cu.gradientMap!==void 0&&(Bu.gradientMap=Pu(Cu.gradientMap)),Cu.clearcoatMap!==void 0&&(Bu.clearcoatMap=Pu(Cu.clearcoatMap)),Cu.clearcoatRoughnessMap!==void 0&&(Bu.clearcoatRoughnessMap=Pu(Cu.clearcoatRoughnessMap)),Cu.clearcoatNormalMap!==void 0&&(Bu.clearcoatNormalMap=Pu(Cu.clearcoatNormalMap)),Cu.clearcoatNormalScale!==void 0&&(Bu.clearcoatNormalScale=new Vector2().fromArray(Cu.clearcoatNormalScale)),Bu},setTextures:function(Cu){return this.textures=Cu,this}});var LoaderUtils={decodeText:function(Cu){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(Cu);for(var Tu="",Pu=0,Bu=Cu.length;Pu<Bu;Pu++)Tu+=String.fromCharCode(Cu[Pu]);try{return decodeURIComponent(escape(Tu))}catch{return Tu}},extractUrlBase:function(Cu){var Tu=Cu.lastIndexOf("/");return Tu===-1?"./":Cu.substr(0,Tu+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(Cu){return BufferGeometry.prototype.copy.call(this,Cu),this.instanceCount=Cu.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var Cu=BufferGeometry.prototype.toJSON.call(this);return Cu.instanceCount=this.instanceCount,Cu.isInstancedBufferGeometry=!0,Cu}});function InstancedBufferAttribute(Cu,Tu,Pu,Bu){typeof Pu=="number"&&(Bu=Pu,Pu=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,Cu,Tu,Pu),this.meshPerAttribute=Bu||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(Cu){return BufferAttribute.prototype.copy.call(this,Cu),this.meshPerAttribute=Cu.meshPerAttribute,this},toJSON:function(){var Cu=BufferAttribute.prototype.toJSON.call(this);return Cu.meshPerAttribute=this.meshPerAttribute,Cu.isInstancedBufferAttribute=!0,Cu}});function BufferGeometryLoader(Cu){Loader.call(this,Cu)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new FileLoader(Lu.manager);Ru.setPath(Lu.path),Ru.load(Cu,function(Ou){try{Tu(Lu.parse(JSON.parse(Ou)))}catch(Du){Bu?Bu(Du):console.error(Du),Lu.manager.itemError(Cu)}},Pu,Bu)},parse:function(Cu){var Tu=Cu.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Pu=Cu.data.index;if(Pu!==void 0){var Bu=new TYPED_ARRAYS[Pu.type](Pu.array);Tu.setIndex(new BufferAttribute(Bu,1))}var Lu=Cu.data.attributes;for(var Ru in Lu){var Ou=Lu[Ru],Bu=new TYPED_ARRAYS[Ou.type](Ou.array),Du=Ou.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,ku=new Du(Bu,Ou.itemSize,Ou.normalized);Ou.name!==void 0&&(ku.name=Ou.name),Tu.setAttribute(Ru,ku)}var Fu=Cu.data.morphAttributes;if(Fu)for(var Ru in Fu){for(var Nu=Fu[Ru],Gu=[],zu=0,Hu=Nu.length;zu<Hu;zu++){var Ou=Nu[zu],Bu=new TYPED_ARRAYS[Ou.type](Ou.array),ku=new BufferAttribute(Bu,Ou.itemSize,Ou.normalized);Ou.name!==void 0&&(ku.name=Ou.name),Gu.push(ku)}Tu.morphAttributes[Ru]=Gu}var Wu=Cu.data.morphTargetsRelative;Wu&&(Tu.morphTargetsRelative=!0);var _h=Cu.data.groups||Cu.data.drawcalls||Cu.data.offsets;if(_h!==void 0)for(var zu=0,Xc=_h.length;zu!==Xc;++zu){var ju=_h[zu];Tu.addGroup(ju.start,ju.count,ju.materialIndex)}var _c=Cu.data.boundingSphere;if(_c!==void 0){var _f=new Vector3;_c.center!==void 0&&_f.fromArray(_c.center),Tu.boundingSphere=new Sphere(_f,_c.radius)}return Cu.name&&(Tu.name=Cu.name),Cu.userData&&(Tu.userData=Cu.userData),Tu}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(Cu){Loader.call(this,Cu)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=this.path===""?LoaderUtils.extractUrlBase(Cu):this.path;this.resourcePath=this.resourcePath||Ru;var Ou=new FileLoader(Lu.manager);Ou.setPath(this.path),Ou.load(Cu,function(Du){var ku=null;try{ku=JSON.parse(Du)}catch(Nu){Bu!==void 0&&Bu(Nu),console.error("THREE:ObjectLoader: Can't parse "+Cu+".",Nu.message);return}var Fu=ku.metadata;if(Fu===void 0||Fu.type===void 0||Fu.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+Cu);return}Lu.parse(ku,Tu)},Pu,Bu)},parse:function(Cu,Tu){var Pu=this.parseShape(Cu.shapes),Bu=this.parseGeometries(Cu.geometries,Pu),Lu=this.parseImages(Cu.images,function(){Tu!==void 0&&Tu(Du)}),Ru=this.parseTextures(Cu.textures,Lu),Ou=this.parseMaterials(Cu.materials,Ru),Du=this.parseObject(Cu.object,Bu,Ou);return Cu.animations&&(Du.animations=this.parseAnimations(Cu.animations)),(Cu.images===void 0||Cu.images.length===0)&&Tu!==void 0&&Tu(Du),Du},parseShape:function(Cu){var Tu={};if(Cu!==void 0)for(var Pu=0,Bu=Cu.length;Pu<Bu;Pu++){var Lu=new Shape().fromJSON(Cu[Pu]);Tu[Lu.uuid]=Lu}return Tu},parseGeometries:function(Cu,Tu){var Pu={};if(Cu!==void 0)for(var Bu=new BufferGeometryLoader,Lu=0,Ru=Cu.length;Lu<Ru;Lu++){var Ou,Du=Cu[Lu];switch(Du.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ou=new Geometries[Du.type](Du.width,Du.height,Du.widthSegments,Du.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ou=new Geometries[Du.type](Du.width,Du.height,Du.depth,Du.widthSegments,Du.heightSegments,Du.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.segments,Du.thetaStart,Du.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ou=new Geometries[Du.type](Du.radiusTop,Du.radiusBottom,Du.height,Du.radialSegments,Du.heightSegments,Du.openEnded,Du.thetaStart,Du.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.height,Du.radialSegments,Du.heightSegments,Du.openEnded,Du.thetaStart,Du.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.widthSegments,Du.heightSegments,Du.phiStart,Du.phiLength,Du.thetaStart,Du.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.detail);break;case"RingGeometry":case"RingBufferGeometry":Ou=new Geometries[Du.type](Du.innerRadius,Du.outerRadius,Du.thetaSegments,Du.phiSegments,Du.thetaStart,Du.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.tube,Du.radialSegments,Du.tubularSegments,Du.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ou=new Geometries[Du.type](Du.radius,Du.tube,Du.tubularSegments,Du.radialSegments,Du.p,Du.q);break;case"TubeGeometry":case"TubeBufferGeometry":Ou=new Geometries[Du.type](new Curves[Du.path.type]().fromJSON(Du.path),Du.tubularSegments,Du.radius,Du.radialSegments,Du.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Ou=new Geometries[Du.type](Du.points,Du.segments,Du.phiStart,Du.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Ou=new Geometries[Du.type](Du.vertices,Du.indices,Du.radius,Du.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Gu=[],ku=0,Fu=Du.shapes.length;ku<Fu;ku++){var Nu=Tu[Du.shapes[ku]];Gu.push(Nu)}Ou=new Geometries[Du.type](Gu,Du.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Gu=[],ku=0,Fu=Du.shapes.length;ku<Fu;ku++){var Nu=Tu[Du.shapes[ku]];Gu.push(Nu)}var zu=Du.options.extrudePath;zu!==void 0&&(Du.options.extrudePath=new Curves[zu.type]().fromJSON(zu)),Ou=new Geometries[Du.type](Gu,Du.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Ou=Bu.parse(Du);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Du.type+'"');continue}Ou.uuid=Du.uuid,Du.name!==void 0&&(Ou.name=Du.name),Ou.isBufferGeometry===!0&&Du.userData!==void 0&&(Ou.userData=Du.userData),Pu[Du.uuid]=Ou}return Pu},parseMaterials:function(Cu,Tu){var Pu={},Bu={};if(Cu!==void 0){var Lu=new MaterialLoader;Lu.setTextures(Tu);for(var Ru=0,Ou=Cu.length;Ru<Ou;Ru++){var Du=Cu[Ru];if(Du.type==="MultiMaterial"){for(var ku=[],Fu=0;Fu<Du.materials.length;Fu++){var Nu=Du.materials[Fu];Pu[Nu.uuid]===void 0&&(Pu[Nu.uuid]=Lu.parse(Nu)),ku.push(Pu[Nu.uuid])}Bu[Du.uuid]=ku}else Pu[Du.uuid]===void 0&&(Pu[Du.uuid]=Lu.parse(Du)),Bu[Du.uuid]=Pu[Du.uuid]}}return Bu},parseAnimations:function(Cu){for(var Tu=[],Pu=0;Pu<Cu.length;Pu++){var Bu=Cu[Pu],Lu=AnimationClip.parse(Bu);Bu.uuid!==void 0&&(Lu.uuid=Bu.uuid),Tu.push(Lu)}return Tu},parseImages:function(Cu,Tu){var Pu=this,Bu={};function Lu(_h){return Pu.manager.itemStart(_h),Ou.load(_h,function(){Pu.manager.itemEnd(_h)},void 0,function(){Pu.manager.itemError(_h),Pu.manager.itemEnd(_h)})}if(Cu!==void 0&&Cu.length>0){var Ru=new LoadingManager(Tu),Ou=new ImageLoader(Ru);Ou.setCrossOrigin(this.crossOrigin);for(var Du=0,ku=Cu.length;Du<ku;Du++){var Fu=Cu[Du],Nu=Fu.url;if(Array.isArray(Nu)){Bu[Fu.uuid]=[];for(var Gu=0,zu=Nu.length;Gu<zu;Gu++){var Hu=Nu[Gu],Wu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Hu)?Hu:Pu.resourcePath+Hu;Bu[Fu.uuid].push(Lu(Wu))}}else{var Wu=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Fu.url)?Fu.url:Pu.resourcePath+Fu.url;Bu[Fu.uuid]=Lu(Wu)}}}return Bu},parseTextures:function(Cu,Tu){function Pu(ku,Fu){return typeof ku=="number"?ku:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ku),Fu[ku])}var Bu={};if(Cu!==void 0)for(var Lu=0,Ru=Cu.length;Lu<Ru;Lu++){var Ou=Cu[Lu];Ou.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Ou.uuid),Tu[Ou.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Ou.image);var Du;Array.isArray(Tu[Ou.image])?Du=new CubeTexture(Tu[Ou.image]):Du=new Texture(Tu[Ou.image]),Du.needsUpdate=!0,Du.uuid=Ou.uuid,Ou.name!==void 0&&(Du.name=Ou.name),Ou.mapping!==void 0&&(Du.mapping=Pu(Ou.mapping,TEXTURE_MAPPING)),Ou.offset!==void 0&&Du.offset.fromArray(Ou.offset),Ou.repeat!==void 0&&Du.repeat.fromArray(Ou.repeat),Ou.center!==void 0&&Du.center.fromArray(Ou.center),Ou.rotation!==void 0&&(Du.rotation=Ou.rotation),Ou.wrap!==void 0&&(Du.wrapS=Pu(Ou.wrap[0],TEXTURE_WRAPPING),Du.wrapT=Pu(Ou.wrap[1],TEXTURE_WRAPPING)),Ou.format!==void 0&&(Du.format=Ou.format),Ou.type!==void 0&&(Du.type=Ou.type),Ou.encoding!==void 0&&(Du.encoding=Ou.encoding),Ou.minFilter!==void 0&&(Du.minFilter=Pu(Ou.minFilter,TEXTURE_FILTER)),Ou.magFilter!==void 0&&(Du.magFilter=Pu(Ou.magFilter,TEXTURE_FILTER)),Ou.anisotropy!==void 0&&(Du.anisotropy=Ou.anisotropy),Ou.flipY!==void 0&&(Du.flipY=Ou.flipY),Ou.premultiplyAlpha!==void 0&&(Du.premultiplyAlpha=Ou.premultiplyAlpha),Ou.unpackAlignment!==void 0&&(Du.unpackAlignment=Ou.unpackAlignment),Bu[Ou.uuid]=Du}return Bu},parseObject:function(Cu,Tu,Pu){var Bu;function Lu(Xc){return Tu[Xc]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Xc),Tu[Xc]}function Ru(Xc){if(Xc!==void 0){if(Array.isArray(Xc)){for(var ju=[],_c=0,_f=Xc.length;_c<_f;_c++){var ep=Xc[_c];Pu[ep]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ep),ju.push(Pu[ep])}return ju}return Pu[Xc]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Xc),Pu[Xc]}}switch(Cu.type){case"Scene":Bu=new Scene,Cu.background!==void 0&&Number.isInteger(Cu.background)&&(Bu.background=new Color(Cu.background)),Cu.fog!==void 0&&(Cu.fog.type==="Fog"?Bu.fog=new Fog(Cu.fog.color,Cu.fog.near,Cu.fog.far):Cu.fog.type==="FogExp2"&&(Bu.fog=new FogExp2(Cu.fog.color,Cu.fog.density)));break;case"PerspectiveCamera":Bu=new PerspectiveCamera(Cu.fov,Cu.aspect,Cu.near,Cu.far),Cu.focus!==void 0&&(Bu.focus=Cu.focus),Cu.zoom!==void 0&&(Bu.zoom=Cu.zoom),Cu.filmGauge!==void 0&&(Bu.filmGauge=Cu.filmGauge),Cu.filmOffset!==void 0&&(Bu.filmOffset=Cu.filmOffset),Cu.view!==void 0&&(Bu.view=Object.assign({},Cu.view));break;case"OrthographicCamera":Bu=new OrthographicCamera(Cu.left,Cu.right,Cu.top,Cu.bottom,Cu.near,Cu.far),Cu.zoom!==void 0&&(Bu.zoom=Cu.zoom),Cu.view!==void 0&&(Bu.view=Object.assign({},Cu.view));break;case"AmbientLight":Bu=new AmbientLight(Cu.color,Cu.intensity);break;case"DirectionalLight":Bu=new DirectionalLight(Cu.color,Cu.intensity);break;case"PointLight":Bu=new PointLight(Cu.color,Cu.intensity,Cu.distance,Cu.decay);break;case"RectAreaLight":Bu=new RectAreaLight(Cu.color,Cu.intensity,Cu.width,Cu.height);break;case"SpotLight":Bu=new SpotLight(Cu.color,Cu.intensity,Cu.distance,Cu.angle,Cu.penumbra,Cu.decay);break;case"HemisphereLight":Bu=new HemisphereLight(Cu.color,Cu.groundColor,Cu.intensity);break;case"LightProbe":Bu=new LightProbe().fromJSON(Cu);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Ou=Lu(Cu.geometry),Du=Ru(Cu.material);Bu=new Mesh(Ou,Du);break;case"InstancedMesh":var Ou=Lu(Cu.geometry),Du=Ru(Cu.material),ku=Cu.count,Fu=Cu.instanceMatrix;Bu=new InstancedMesh(Ou,Du,ku),Bu.instanceMatrix=new BufferAttribute(new Float32Array(Fu.array),16);break;case"LOD":Bu=new LOD;break;case"Line":Bu=new Line$1(Lu(Cu.geometry),Ru(Cu.material),Cu.mode);break;case"LineLoop":Bu=new LineLoop(Lu(Cu.geometry),Ru(Cu.material));break;case"LineSegments":Bu=new LineSegments(Lu(Cu.geometry),Ru(Cu.material));break;case"PointCloud":case"Points":Bu=new Points(Lu(Cu.geometry),Ru(Cu.material));break;case"Sprite":Bu=new Sprite(Ru(Cu.material));break;case"Group":Bu=new Group$1;break;default:Bu=new Object3D}if(Bu.uuid=Cu.uuid,Cu.name!==void 0&&(Bu.name=Cu.name),Cu.matrix!==void 0?(Bu.matrix.fromArray(Cu.matrix),Cu.matrixAutoUpdate!==void 0&&(Bu.matrixAutoUpdate=Cu.matrixAutoUpdate),Bu.matrixAutoUpdate&&Bu.matrix.decompose(Bu.position,Bu.quaternion,Bu.scale)):(Cu.position!==void 0&&Bu.position.fromArray(Cu.position),Cu.rotation!==void 0&&Bu.rotation.fromArray(Cu.rotation),Cu.quaternion!==void 0&&Bu.quaternion.fromArray(Cu.quaternion),Cu.scale!==void 0&&Bu.scale.fromArray(Cu.scale)),Cu.castShadow!==void 0&&(Bu.castShadow=Cu.castShadow),Cu.receiveShadow!==void 0&&(Bu.receiveShadow=Cu.receiveShadow),Cu.shadow&&(Cu.shadow.bias!==void 0&&(Bu.shadow.bias=Cu.shadow.bias),Cu.shadow.radius!==void 0&&(Bu.shadow.radius=Cu.shadow.radius),Cu.shadow.mapSize!==void 0&&Bu.shadow.mapSize.fromArray(Cu.shadow.mapSize),Cu.shadow.camera!==void 0&&(Bu.shadow.camera=this.parseObject(Cu.shadow.camera))),Cu.visible!==void 0&&(Bu.visible=Cu.visible),Cu.frustumCulled!==void 0&&(Bu.frustumCulled=Cu.frustumCulled),Cu.renderOrder!==void 0&&(Bu.renderOrder=Cu.renderOrder),Cu.userData!==void 0&&(Bu.userData=Cu.userData),Cu.layers!==void 0&&(Bu.layers.mask=Cu.layers),Cu.children!==void 0)for(var Nu=Cu.children,Gu=0;Gu<Nu.length;Gu++)Bu.add(this.parseObject(Nu[Gu],Tu,Pu));if(Cu.type==="LOD"){Cu.autoUpdate!==void 0&&(Bu.autoUpdate=Cu.autoUpdate);for(var zu=Cu.levels,Hu=0;Hu<zu.length;Hu++){var Wu=zu[Hu],_h=Bu.getObjectByProperty("uuid",Wu.object);_h!==void 0&&Bu.addLevel(_h,Wu.distance)}}return Bu}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(Cu){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,Cu),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(Tu){return this.options=Tu,this},load:function(Cu,Tu,Pu,Bu){Cu===void 0&&(Cu=""),this.path!==void 0&&(Cu=this.path+Cu),Cu=this.manager.resolveURL(Cu);var Lu=this,Ru=Cache.get(Cu);if(Ru!==void 0)return Lu.manager.itemStart(Cu),setTimeout(function(){Tu&&Tu(Ru),Lu.manager.itemEnd(Cu)},0),Ru;fetch(Cu).then(function(Ou){return Ou.blob()}).then(function(Ou){return Lu.options===void 0?createImageBitmap(Ou):createImageBitmap(Ou,Lu.options)}).then(function(Ou){Cache.add(Cu,Ou),Tu&&Tu(Ou),Lu.manager.itemEnd(Cu)}).catch(function(Ou){Bu&&Bu(Ou),Lu.manager.itemError(Cu),Lu.manager.itemEnd(Cu)}),Lu.manager.itemStart(Cu)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(Cu,Tu){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(Cu,Tu),this},lineTo:function(Cu,Tu){return this.currentPath.lineTo(Cu,Tu),this},quadraticCurveTo:function(Cu,Tu,Pu,Bu){return this.currentPath.quadraticCurveTo(Cu,Tu,Pu,Bu),this},bezierCurveTo:function(Cu,Tu,Pu,Bu,Lu,Ru){return this.currentPath.bezierCurveTo(Cu,Tu,Pu,Bu,Lu,Ru),this},splineThru:function(Cu){return this.currentPath.splineThru(Cu),this},toShapes:function(Cu,Tu){function Pu(cp){for(var dp=[],fp=0,vp=cp.length;fp<vp;fp++){var _p=cp[fp],wp=new Shape;wp.curves=_p.curves,dp.push(wp)}return dp}function Bu(cp,dp){for(var fp=dp.length,vp=!1,_p=fp-1,wp=0;wp<fp;_p=wp++){var Dp=dp[_p],Pp=dp[wp],Wp=Pp.x-Dp.x,Rp=Pp.y-Dp.y;if(Math.abs(Rp)>Number.EPSILON){if(Rp<0&&(Dp=dp[wp],Wp=-Wp,Pp=dp[_p],Rp=-Rp),cp.y<Dp.y||cp.y>Pp.y)continue;if(cp.y===Dp.y){if(cp.x===Dp.x)return!0}else{var Gp=Rp*(cp.x-Dp.x)-Wp*(cp.y-Dp.y);if(Gp===0)return!0;if(Gp<0)continue;vp=!vp}}else{if(cp.y!==Dp.y)continue;if(Pp.x<=cp.x&&cp.x<=Dp.x||Dp.x<=cp.x&&cp.x<=Pp.x)return!0}}return vp}var Lu=ShapeUtils.isClockWise,Ru=this.subPaths;if(Ru.length===0)return[];if(Tu===!0)return Pu(Ru);var Ou,Du,ku,Fu=[];if(Ru.length===1)return Du=Ru[0],ku=new Shape,ku.curves=Du.curves,Fu.push(ku),Fu;var Nu=!Lu(Ru[0].getPoints());Nu=Cu?!Nu:Nu;var Gu=[],zu=[],Hu=[],Wu=0,_h;zu[Wu]=void 0,Hu[Wu]=[];for(var Xc=0,ju=Ru.length;Xc<ju;Xc++)Du=Ru[Xc],_h=Du.getPoints(),Ou=Lu(_h),Ou=Cu?!Ou:Ou,Ou?(!Nu&&zu[Wu]&&Wu++,zu[Wu]={s:new Shape,p:_h},zu[Wu].s.curves=Du.curves,Nu&&Wu++,Hu[Wu]=[]):Hu[Wu].push({h:Du,p:_h[0]});if(!zu[0])return Pu(Ru);if(zu.length>1){for(var _c=!1,_f=[],ep=0,tp=zu.length;ep<tp;ep++)Gu[ep]=[];for(var ep=0,tp=zu.length;ep<tp;ep++)for(var op=Hu[ep],lp=0;lp<op.length;lp++){for(var up=op[lp],hp=!0,np=0;np<zu.length;np++)Bu(up.p,zu[np].p)&&(ep!==np&&_f.push({froms:ep,tos:np,hole:lp}),hp?(hp=!1,Gu[np].push(up)):_c=!0);hp&&Gu[ep].push(up)}_f.length>0&&(_c||(Hu=Gu))}for(var rp,Xc=0,ip=zu.length;Xc<ip;Xc++){ku=zu[Xc].s,Fu.push(ku),rp=Hu[Xc];for(var ap=0,sp=rp.length;ap<sp;ap++)ku.holes.push(rp[ap].h)}return Fu}});function Font(Cu){this.type="Font",this.data=Cu}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(Cu,Tu){Tu===void 0&&(Tu=100);for(var Pu=[],Bu=createPaths(Cu,Tu,this.data),Lu=0,Ru=Bu.length;Lu<Ru;Lu++)Array.prototype.push.apply(Pu,Bu[Lu].toShapes());return Pu}});function createPaths(Cu,Tu,Pu){for(var Bu=Array.from?Array.from(Cu):String(Cu).split(""),Lu=Tu/Pu.resolution,Ru=(Pu.boundingBox.yMax-Pu.boundingBox.yMin+Pu.underlineThickness)*Lu,Ou=[],Du=0,ku=0,Fu=0;Fu<Bu.length;Fu++){var Nu=Bu[Fu];if(Nu===`
`)Du=0,ku-=Ru;else{var Gu=createPath(Nu,Lu,Du,ku,Pu);Du+=Gu.offsetX,Ou.push(Gu.path)}}return Ou}function createPath(Cu,Tu,Pu,Bu,Lu){var Ru=Lu.glyphs[Cu]||Lu.glyphs["?"];if(!Ru){console.error('THREE.Font: character "'+Cu+'" does not exists in font family '+Lu.familyName+".");return}var Ou=new ShapePath,Du,ku,Fu,Nu,Gu,zu,Hu,Wu;if(Ru.o)for(var _h=Ru._cachedOutline||(Ru._cachedOutline=Ru.o.split(" ")),Xc=0,ju=_h.length;Xc<ju;){var _c=_h[Xc++];switch(_c){case"m":Du=_h[Xc++]*Tu+Pu,ku=_h[Xc++]*Tu+Bu,Ou.moveTo(Du,ku);break;case"l":Du=_h[Xc++]*Tu+Pu,ku=_h[Xc++]*Tu+Bu,Ou.lineTo(Du,ku);break;case"q":Fu=_h[Xc++]*Tu+Pu,Nu=_h[Xc++]*Tu+Bu,Gu=_h[Xc++]*Tu+Pu,zu=_h[Xc++]*Tu+Bu,Ou.quadraticCurveTo(Gu,zu,Fu,Nu);break;case"b":Fu=_h[Xc++]*Tu+Pu,Nu=_h[Xc++]*Tu+Bu,Gu=_h[Xc++]*Tu+Pu,zu=_h[Xc++]*Tu+Bu,Hu=_h[Xc++]*Tu+Pu,Wu=_h[Xc++]*Tu+Bu,Ou.bezierCurveTo(Gu,zu,Hu,Wu,Fu,Nu);break}}return{offsetX:Ru.ha*Tu,path:Ou}}function FontLoader(Cu){Loader.call(this,Cu)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new FileLoader(this.manager);Ru.setPath(this.path),Ru.load(Cu,function(Ou){var Du;try{Du=JSON.parse(Ou)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Du=JSON.parse(Ou.substring(65,Ou.length-2))}var ku=Lu.parse(Du);Tu&&Tu(ku)},Pu,Bu)},parse:function(Cu){return new Font(Cu)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(Cu){_context=Cu}};function AudioLoader(Cu){Loader.call(this,Cu)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(Cu,Tu,Pu,Bu){var Lu=this,Ru=new FileLoader(Lu.manager);Ru.setResponseType("arraybuffer"),Ru.setPath(Lu.path),Ru.load(Cu,function(Ou){try{var Du=Ou.slice(0),ku=AudioContext.getContext();ku.decodeAudioData(Du,function(Fu){Tu(Fu)})}catch(Fu){Bu?Bu(Fu):console.error(Fu),Lu.manager.itemError(Cu)}},Pu,Bu)}});function HemisphereLightProbe(Cu,Tu,Pu){LightProbe.call(this,void 0,Pu);var Bu=new Color().set(Cu),Lu=new Color().set(Tu),Ru=new Vector3(Bu.r,Bu.g,Bu.b),Ou=new Vector3(Lu.r,Lu.g,Lu.b),Du=Math.sqrt(Math.PI),ku=Du*Math.sqrt(.75);this.sh.coefficients[0].copy(Ru).add(Ou).multiplyScalar(Du),this.sh.coefficients[1].copy(Ru).sub(Ou).multiplyScalar(ku)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(Cu){return LightProbe.prototype.copy.call(this,Cu),this},toJSON:function(Cu){var Tu=LightProbe.prototype.toJSON.call(this,Cu);return Tu}});function AmbientLightProbe(Cu,Tu){LightProbe.call(this,void 0,Tu);var Pu=new Color().set(Cu);this.sh.coefficients[0].set(Pu.r,Pu.g,Pu.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(Cu){return LightProbe.prototype.copy.call(this,Cu),this},toJSON:function(Cu){var Tu=LightProbe.prototype.toJSON.call(this,Cu);return Tu}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(Cu){var Tu=this._cache,Pu=Tu.focus!==Cu.focus||Tu.fov!==Cu.fov||Tu.aspect!==Cu.aspect*this.aspect||Tu.near!==Cu.near||Tu.far!==Cu.far||Tu.zoom!==Cu.zoom||Tu.eyeSep!==this.eyeSep;if(Pu){Tu.focus=Cu.focus,Tu.fov=Cu.fov,Tu.aspect=Cu.aspect*this.aspect,Tu.near=Cu.near,Tu.far=Cu.far,Tu.zoom=Cu.zoom,Tu.eyeSep=this.eyeSep;var Bu=Cu.projectionMatrix.clone(),Lu=Tu.eyeSep/2,Ru=Lu*Tu.near/Tu.focus,Ou=Tu.near*Math.tan(MathUtils.DEG2RAD*Tu.fov*.5)/Tu.zoom,Du,ku;_eyeLeft.elements[12]=-Lu,_eyeRight.elements[12]=Lu,Du=-Ou*Tu.aspect+Ru,ku=Ou*Tu.aspect+Ru,Bu.elements[0]=2*Tu.near/(ku-Du),Bu.elements[8]=(ku+Du)/(ku-Du),this.cameraL.projectionMatrix.copy(Bu),Du=-Ou*Tu.aspect-Ru,ku=Ou*Tu.aspect-Ru,Bu.elements[0]=2*Tu.near/(ku-Du),Bu.elements[8]=(ku+Du)/(ku-Du),this.cameraR.projectionMatrix.copy(Bu)}this.cameraL.matrixWorld.copy(Cu.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(Cu.matrixWorld).multiply(_eyeRight)}});function Clock(Cu){this.autoStart=Cu!==void 0?Cu:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var Cu=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Tu=(typeof performance=="undefined"?Date:performance).now();Cu=(Tu-this.oldTime)/1e3,this.oldTime=Tu,this.elapsedTime+=Cu}return Cu}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(Cu){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=Cu,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(Cu){return this.gain.gain.setTargetAtTime(Cu,this.context.currentTime,.01),this},updateMatrixWorld:function(Cu){Object3D.prototype.updateMatrixWorld.call(this,Cu);var Tu=this.context.listener,Pu=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),Tu.positionX){var Bu=this.context.currentTime+this.timeDelta;Tu.positionX.linearRampToValueAtTime(_position$2.x,Bu),Tu.positionY.linearRampToValueAtTime(_position$2.y,Bu),Tu.positionZ.linearRampToValueAtTime(_position$2.z,Bu),Tu.forwardX.linearRampToValueAtTime(_orientation.x,Bu),Tu.forwardY.linearRampToValueAtTime(_orientation.y,Bu),Tu.forwardZ.linearRampToValueAtTime(_orientation.z,Bu),Tu.upX.linearRampToValueAtTime(Pu.x,Bu),Tu.upY.linearRampToValueAtTime(Pu.y,Bu),Tu.upZ.linearRampToValueAtTime(Pu.z,Bu)}else Tu.setPosition(_position$2.x,_position$2.y,_position$2.z),Tu.setOrientation(_orientation.x,_orientation.y,_orientation.z,Pu.x,Pu.y,Pu.z)}});function Audio$1(Cu){Object3D.call(this),this.type="Audio",this.listener=Cu,this.context=Cu.context,this.gain=this.context.createGain(),this.gain.connect(Cu.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(Cu){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=Cu,this.connect(),this},setMediaElementSource:function(Cu){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(Cu),this.connect(),this},setMediaStreamSource:function(Cu){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(Cu),this.connect(),this},setBuffer:function(Cu){return this.buffer=Cu,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(Cu){if(Cu===void 0&&(Cu=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+Cu;var Tu=this.context.createBufferSource();return Tu.buffer=this.buffer,Tu.loop=this.loop,Tu.loopStart=this.loopStart,Tu.loopEnd=this.loopEnd,Tu.onended=this.onEnded.bind(this),Tu.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=Tu,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var Cu=1,Tu=this.filters.length;Cu<Tu;Cu++)this.filters[Cu-1].connect(this.filters[Cu]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var Cu=1,Tu=this.filters.length;Cu<Tu;Cu++)this.filters[Cu-1].disconnect(this.filters[Cu]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(Cu){return Cu||(Cu=[]),this.isPlaying===!0?(this.disconnect(),this.filters=Cu,this.connect()):this.filters=Cu,this},setDetune:function(Cu){if(this.detune=Cu,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(Cu){return this.setFilters(Cu?[Cu]:[])},setPlaybackRate:function(Cu){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=Cu,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(Cu){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=Cu,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(Cu){return this.loopStart=Cu,this},setLoopEnd:function(Cu){return this.loopEnd=Cu,this},getVolume:function(){return this.gain.gain.value},setVolume:function(Cu){return this.gain.gain.setTargetAtTime(Cu,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(Cu){Audio$1.call(this,Cu),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(Cu){return this.panner.refDistance=Cu,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(Cu){return this.panner.rolloffFactor=Cu,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(Cu){return this.panner.distanceModel=Cu,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(Cu){return this.panner.maxDistance=Cu,this},setDirectionalCone:function(Cu,Tu,Pu){return this.panner.coneInnerAngle=Cu,this.panner.coneOuterAngle=Tu,this.panner.coneOuterGain=Pu,this},updateMatrixWorld:function(Cu){if(Object3D.prototype.updateMatrixWorld.call(this,Cu),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var Tu=this.panner;if(Tu.positionX){var Pu=this.context.currentTime+this.listener.timeDelta;Tu.positionX.linearRampToValueAtTime(_position$3.x,Pu),Tu.positionY.linearRampToValueAtTime(_position$3.y,Pu),Tu.positionZ.linearRampToValueAtTime(_position$3.z,Pu),Tu.orientationX.linearRampToValueAtTime(_orientation$1.x,Pu),Tu.orientationY.linearRampToValueAtTime(_orientation$1.y,Pu),Tu.orientationZ.linearRampToValueAtTime(_orientation$1.z,Pu)}else Tu.setPosition(_position$3.x,_position$3.y,_position$3.z),Tu.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(Cu,Tu){this.analyser=Cu.context.createAnalyser(),this.analyser.fftSize=Tu!==void 0?Tu:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),Cu.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var Cu=0,Tu=this.getFrequencyData(),Pu=0;Pu<Tu.length;Pu++)Cu+=Tu[Pu];return Cu/Tu.length}});function PropertyMixer(Cu,Tu,Pu){this.binding=Cu,this.valueSize=Pu;var Bu,Lu,Ru;switch(Tu){case"quaternion":Bu=this._slerp,Lu=this._slerpAdditive,Ru=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Pu*6),this._workIndex=5;break;case"string":case"bool":Bu=this._select,Lu=this._select,Ru=this._setAdditiveIdentityOther,this.buffer=new Array(Pu*5);break;default:Bu=this._lerp,Lu=this._lerpAdditive,Ru=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Pu*5)}this._mixBufferRegion=Bu,this._mixBufferRegionAdditive=Lu,this._setIdentity=Ru,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(Cu,Tu){var Pu=this.buffer,Bu=this.valueSize,Lu=Cu*Bu+Bu,Ru=this.cumulativeWeight;if(Ru===0){for(var Ou=0;Ou!==Bu;++Ou)Pu[Lu+Ou]=Pu[Ou];Ru=Tu}else{Ru+=Tu;var Du=Tu/Ru;this._mixBufferRegion(Pu,Lu,0,Du,Bu)}this.cumulativeWeight=Ru},accumulateAdditive:function(Cu){var Tu=this.buffer,Pu=this.valueSize,Bu=Pu*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(Tu,Bu,0,Cu,Pu),this.cumulativeWeightAdditive+=Cu},apply:function(Cu){var Tu=this.valueSize,Pu=this.buffer,Bu=Cu*Tu+Tu,Lu=this.cumulativeWeight,Ru=this.cumulativeWeightAdditive,Ou=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Lu<1){var Du=Tu*this._origIndex;this._mixBufferRegion(Pu,Bu,Du,1-Lu,Tu)}Ru>0&&this._mixBufferRegionAdditive(Pu,Bu,this._addIndex*Tu,1,Tu);for(var ku=Tu,Fu=Tu+Tu;ku!==Fu;++ku)if(Pu[ku]!==Pu[ku+Tu]){Ou.setValue(Pu,Bu);break}},saveOriginalState:function(){var Cu=this.binding,Tu=this.buffer,Pu=this.valueSize,Bu=Pu*this._origIndex;Cu.getValue(Tu,Bu);for(var Lu=Pu,Ru=Bu;Lu!==Ru;++Lu)Tu[Lu]=Tu[Bu+Lu%Pu];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var Cu=this.valueSize*3;this.binding.setValue(this.buffer,Cu)},_setAdditiveIdentityNumeric:function(){for(var Cu=this._addIndex*this.valueSize,Tu=Cu+this.valueSize,Pu=Cu;Pu<Tu;Pu++)this.buffer[Pu]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var Cu=this._origIndex*this.valueSize,Tu=this._addIndex*this.valueSize,Pu=0;Pu<this.valueSize;Pu++)this.buffer[Tu+Pu]=this.buffer[Cu+Pu]},_select:function(Cu,Tu,Pu,Bu,Lu){if(Bu>=.5)for(var Ru=0;Ru!==Lu;++Ru)Cu[Tu+Ru]=Cu[Pu+Ru]},_slerp:function(Cu,Tu,Pu,Bu){Quaternion.slerpFlat(Cu,Tu,Cu,Tu,Cu,Pu,Bu)},_slerpAdditive:function(Cu,Tu,Pu,Bu,Lu){var Ru=this._workIndex*Lu;Quaternion.multiplyQuaternionsFlat(Cu,Ru,Cu,Tu,Cu,Pu),Quaternion.slerpFlat(Cu,Tu,Cu,Tu,Cu,Ru,Bu)},_lerp:function(Cu,Tu,Pu,Bu,Lu){for(var Ru=1-Bu,Ou=0;Ou!==Lu;++Ou){var Du=Tu+Ou;Cu[Du]=Cu[Du]*Ru+Cu[Pu+Ou]*Bu}},_lerpAdditive:function(Cu,Tu,Pu,Bu,Lu){for(var Ru=0;Ru!==Lu;++Ru){var Ou=Tu+Ru;Cu[Ou]=Cu[Ou]+Cu[Pu+Ru]*Bu}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(Cu,Tu,Pu){var Bu=Pu||PropertyBinding.parseTrackName(Tu);this._targetGroup=Cu,this._bindings=Cu.subscribe_(Tu,Bu)}Object.assign(Composite.prototype,{getValue:function(Cu,Tu){this.bind();var Pu=this._targetGroup.nCachedObjects_,Bu=this._bindings[Pu];Bu!==void 0&&Bu.getValue(Cu,Tu)},setValue:function(Cu,Tu){for(var Pu=this._bindings,Bu=this._targetGroup.nCachedObjects_,Lu=Pu.length;Bu!==Lu;++Bu)Pu[Bu].setValue(Cu,Tu)},bind:function(){for(var Cu=this._bindings,Tu=this._targetGroup.nCachedObjects_,Pu=Cu.length;Tu!==Pu;++Tu)Cu[Tu].bind()},unbind:function(){for(var Cu=this._bindings,Tu=this._targetGroup.nCachedObjects_,Pu=Cu.length;Tu!==Pu;++Tu)Cu[Tu].unbind()}});function PropertyBinding(Cu,Tu,Pu){this.path=Tu,this.parsedPath=Pu||PropertyBinding.parseTrackName(Tu),this.node=PropertyBinding.findNode(Cu,this.parsedPath.nodeName)||Cu,this.rootNode=Cu}Object.assign(PropertyBinding,{Composite,create:function(Cu,Tu,Pu){return Cu&&Cu.isAnimationObjectGroup?new PropertyBinding.Composite(Cu,Tu,Pu):new PropertyBinding(Cu,Tu,Pu)},sanitizeNodeName:function(Cu){return Cu.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(Cu){var Tu=_trackRe.exec(Cu);if(!Tu)throw new Error("PropertyBinding: Cannot parse trackName: "+Cu);var Pu={nodeName:Tu[2],objectName:Tu[3],objectIndex:Tu[4],propertyName:Tu[5],propertyIndex:Tu[6]},Bu=Pu.nodeName&&Pu.nodeName.lastIndexOf(".");if(Bu!==void 0&&Bu!==-1){var Lu=Pu.nodeName.substring(Bu+1);_supportedObjectNames.indexOf(Lu)!==-1&&(Pu.nodeName=Pu.nodeName.substring(0,Bu),Pu.objectName=Lu)}if(Pu.propertyName===null||Pu.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+Cu);return Pu},findNode:function(Cu,Tu){if(!Tu||Tu===""||Tu==="."||Tu===-1||Tu===Cu.name||Tu===Cu.uuid)return Cu;if(Cu.skeleton){var Pu=Cu.skeleton.getBoneByName(Tu);if(Pu!==void 0)return Pu}if(Cu.children){var Bu=function(Ru){for(var Ou=0;Ou<Ru.length;Ou++){var Du=Ru[Ou];if(Du.name===Tu||Du.uuid===Tu)return Du;var ku=Bu(Du.children);if(ku)return ku}return null},Lu=Bu(Cu.children);if(Lu)return Lu}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(Tu,Pu){Tu[Pu]=this.node[this.propertyName]},function(Tu,Pu){for(var Bu=this.resolvedProperty,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu)Tu[Pu++]=Bu[Lu]},function(Tu,Pu){Tu[Pu]=this.resolvedProperty[this.propertyIndex]},function(Tu,Pu){this.resolvedProperty.toArray(Tu,Pu)}],SetterByBindingTypeAndVersioning:[[function(Tu,Pu){this.targetObject[this.propertyName]=Tu[Pu]},function(Tu,Pu){this.targetObject[this.propertyName]=Tu[Pu],this.targetObject.needsUpdate=!0},function(Tu,Pu){this.targetObject[this.propertyName]=Tu[Pu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Pu){for(var Bu=this.resolvedProperty,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu)Bu[Lu]=Tu[Pu++]},function(Tu,Pu){for(var Bu=this.resolvedProperty,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu)Bu[Lu]=Tu[Pu++];this.targetObject.needsUpdate=!0},function(Tu,Pu){for(var Bu=this.resolvedProperty,Lu=0,Ru=Bu.length;Lu!==Ru;++Lu)Bu[Lu]=Tu[Pu++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Pu){this.resolvedProperty[this.propertyIndex]=Tu[Pu]},function(Tu,Pu){this.resolvedProperty[this.propertyIndex]=Tu[Pu],this.targetObject.needsUpdate=!0},function(Tu,Pu){this.resolvedProperty[this.propertyIndex]=Tu[Pu],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Tu,Pu){this.resolvedProperty.fromArray(Tu,Pu)},function(Tu,Pu){this.resolvedProperty.fromArray(Tu,Pu),this.targetObject.needsUpdate=!0},function(Tu,Pu){this.resolvedProperty.fromArray(Tu,Pu),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(Tu,Pu){this.bind(),this.getValue(Tu,Pu)},setValue:function(Tu,Pu){this.bind(),this.setValue(Tu,Pu)},bind:function(){var Cu=this.node,Tu=this.parsedPath,Pu=Tu.objectName,Bu=Tu.propertyName,Lu=Tu.propertyIndex;if(Cu||(Cu=PropertyBinding.findNode(this.rootNode,Tu.nodeName)||this.rootNode,this.node=Cu),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!Cu){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(Pu){var Ru=Tu.objectIndex;switch(Pu){case"materials":if(!Cu.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!Cu.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}Cu=Cu.material.materials;break;case"bones":if(!Cu.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}Cu=Cu.skeleton.bones;for(var Ou=0;Ou<Cu.length;Ou++)if(Cu[Ou].name===Ru){Ru=Ou;break}break;default:if(Cu[Pu]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}Cu=Cu[Pu]}if(Ru!==void 0){if(Cu[Ru]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,Cu);return}Cu=Cu[Ru]}}var Du=Cu[Bu];if(Du===void 0){var ku=Tu.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+ku+"."+Bu+" but it wasn't found.",Cu);return}var Fu=this.Versioning.None;this.targetObject=Cu,Cu.needsUpdate!==void 0?Fu=this.Versioning.NeedsUpdate:Cu.matrixWorldNeedsUpdate!==void 0&&(Fu=this.Versioning.MatrixWorldNeedsUpdate);var Nu=this.BindingType.Direct;if(Lu!==void 0){if(Bu==="morphTargetInfluences"){if(!Cu.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(Cu.geometry.isBufferGeometry){if(!Cu.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}Cu.morphTargetDictionary[Lu]!==void 0&&(Lu=Cu.morphTargetDictionary[Lu])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Nu=this.BindingType.ArrayElement,this.resolvedProperty=Du,this.propertyIndex=Lu}else Du.fromArray!==void 0&&Du.toArray!==void 0?(Nu=this.BindingType.HasFromToArray,this.resolvedProperty=Du):Array.isArray(Du)?(Nu=this.BindingType.EntireArray,this.resolvedProperty=Du):this.propertyName=Bu;this.getValue=this.GetterByBindingType[Nu],this.setValue=this.SetterByBindingTypeAndVersioning[Nu][Fu]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var Cu={};this._indicesByUUID=Cu;for(var Tu=0,Pu=arguments.length;Tu!==Pu;++Tu)Cu[arguments[Tu].uuid]=Tu;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Bu=this;this.stats={objects:{get total(){return Bu._objects.length},get inUse(){return this.total-Bu.nCachedObjects_}},get bindingsPerObject(){return Bu._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var Cu=this._objects,Tu=Cu.length,Pu=this.nCachedObjects_,Bu=this._indicesByUUID,Lu=this._paths,Ru=this._parsedPaths,Ou=this._bindings,Du=Ou.length,ku=void 0,Fu=0,Nu=arguments.length;Fu!==Nu;++Fu){var Gu=arguments[Fu],zu=Gu.uuid,Hu=Bu[zu];if(Hu===void 0){Hu=Tu++,Bu[zu]=Hu,Cu.push(Gu);for(var Wu=0,_h=Du;Wu!==_h;++Wu)Ou[Wu].push(new PropertyBinding(Gu,Lu[Wu],Ru[Wu]))}else if(Hu<Pu){ku=Cu[Hu];var Xc=--Pu,ju=Cu[Xc];Bu[ju.uuid]=Hu,Cu[Hu]=ju,Bu[zu]=Xc,Cu[Xc]=Gu;for(var Wu=0,_h=Du;Wu!==_h;++Wu){var _c=Ou[Wu],_f=_c[Xc],ep=_c[Hu];_c[Hu]=_f,ep===void 0&&(ep=new PropertyBinding(Gu,Lu[Wu],Ru[Wu])),_c[Xc]=ep}}else Cu[Hu]!==ku&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Pu},remove:function(){for(var Cu=this._objects,Tu=this.nCachedObjects_,Pu=this._indicesByUUID,Bu=this._bindings,Lu=Bu.length,Ru=0,Ou=arguments.length;Ru!==Ou;++Ru){var Du=arguments[Ru],ku=Du.uuid,Fu=Pu[ku];if(Fu!==void 0&&Fu>=Tu){var Nu=Tu++,Gu=Cu[Nu];Pu[Gu.uuid]=Fu,Cu[Fu]=Gu,Pu[ku]=Nu,Cu[Nu]=Du;for(var zu=0,Hu=Lu;zu!==Hu;++zu){var Wu=Bu[zu],_h=Wu[Nu],Xc=Wu[Fu];Wu[Fu]=_h,Wu[Nu]=Xc}}}this.nCachedObjects_=Tu},uncache:function(){for(var Cu=this._objects,Tu=Cu.length,Pu=this.nCachedObjects_,Bu=this._indicesByUUID,Lu=this._bindings,Ru=Lu.length,Ou=0,Du=arguments.length;Ou!==Du;++Ou){var ku=arguments[Ou],Fu=ku.uuid,Nu=Bu[Fu];if(Nu!==void 0)if(delete Bu[Fu],Nu<Pu){var Gu=--Pu,zu=Cu[Gu],Hu=--Tu,Wu=Cu[Hu];Bu[zu.uuid]=Nu,Cu[Nu]=zu,Bu[Wu.uuid]=Gu,Cu[Gu]=Wu,Cu.pop();for(var _h=0,Xc=Ru;_h!==Xc;++_h){var ju=Lu[_h],_c=ju[Gu],_f=ju[Hu];ju[Nu]=_c,ju[Gu]=_f,ju.pop()}}else{var Hu=--Tu,Wu=Cu[Hu];Bu[Wu.uuid]=Nu,Cu[Nu]=Wu,Cu.pop();for(var _h=0,Xc=Ru;_h!==Xc;++_h){var ju=Lu[_h];ju[Nu]=ju[Hu],ju.pop()}}}this.nCachedObjects_=Pu},subscribe_:function(Cu,Tu){var Pu=this._bindingsIndicesByPath,Bu=Pu[Cu],Lu=this._bindings;if(Bu!==void 0)return Lu[Bu];var Ru=this._paths,Ou=this._parsedPaths,Du=this._objects,ku=Du.length,Fu=this.nCachedObjects_,Nu=new Array(ku);Bu=Lu.length,Pu[Cu]=Bu,Ru.push(Cu),Ou.push(Tu),Lu.push(Nu);for(var Gu=Fu,zu=Du.length;Gu!==zu;++Gu){var Hu=Du[Gu];Nu[Gu]=new PropertyBinding(Hu,Cu,Tu)}return Nu},unsubscribe_:function(Cu){var Tu=this._bindingsIndicesByPath,Pu=Tu[Cu];if(Pu!==void 0){var Bu=this._paths,Lu=this._parsedPaths,Ru=this._bindings,Ou=Ru.length-1,Du=Ru[Ou],ku=Cu[Ou];Tu[ku]=Pu,Ru[Pu]=Du,Ru.pop(),Lu[Pu]=Lu[Ou],Lu.pop(),Bu[Pu]=Bu[Ou],Bu.pop()}}});function AnimationAction(Cu,Tu,Pu,Bu){this._mixer=Cu,this._clip=Tu,this._localRoot=Pu||null,this.blendMode=Bu||Tu.blendMode;for(var Lu=Tu.tracks,Ru=Lu.length,Ou=new Array(Ru),Du={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},ku=0;ku!==Ru;++ku){var Fu=Lu[ku].createInterpolant(null);Ou[ku]=Fu,Fu.settings=Du}this._interpolantSettings=Du,this._interpolants=Ou,this._propertyBindings=new Array(Ru),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(Cu){return this._startTime=Cu,this},setLoop:function(Cu,Tu){return this.loop=Cu,this.repetitions=Tu,this},setEffectiveWeight:function(Cu){return this.weight=Cu,this._effectiveWeight=this.enabled?Cu:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(Cu){return this._scheduleFading(Cu,0,1)},fadeOut:function(Cu){return this._scheduleFading(Cu,1,0)},crossFadeFrom:function(Cu,Tu,Pu){if(Cu.fadeOut(Tu),this.fadeIn(Tu),Pu){var Bu=this._clip.duration,Lu=Cu._clip.duration,Ru=Lu/Bu,Ou=Bu/Lu;Cu.warp(1,Ru,Tu),this.warp(Ou,1,Tu)}return this},crossFadeTo:function(Cu,Tu,Pu){return Cu.crossFadeFrom(this,Tu,Pu)},stopFading:function(){var Cu=this._weightInterpolant;return Cu!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(Cu)),this},setEffectiveTimeScale:function(Cu){return this.timeScale=Cu,this._effectiveTimeScale=this.paused?0:Cu,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(Cu){return this.timeScale=this._clip.duration/Cu,this.stopWarping()},syncWith:function(Cu){return this.time=Cu.time,this.timeScale=Cu.timeScale,this.stopWarping()},halt:function(Cu){return this.warp(this._effectiveTimeScale,0,Cu)},warp:function(Cu,Tu,Pu){var Bu=this._mixer,Lu=Bu.time,Ru=this._timeScaleInterpolant,Ou=this.timeScale;Ru===null&&(Ru=Bu._lendControlInterpolant(),this._timeScaleInterpolant=Ru);var Du=Ru.parameterPositions,ku=Ru.sampleValues;return Du[0]=Lu,Du[1]=Lu+Pu,ku[0]=Cu/Ou,ku[1]=Tu/Ou,this},stopWarping:function(){var Cu=this._timeScaleInterpolant;return Cu!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(Cu)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(Cu,Tu,Pu,Bu){if(!this.enabled){this._updateWeight(Cu);return}var Lu=this._startTime;if(Lu!==null){var Ru=(Cu-Lu)*Pu;if(Ru<0||Pu===0)return;this._startTime=null,Tu=Pu*Ru}Tu*=this._updateTimeScale(Cu);var Ou=this._updateTime(Tu),Du=this._updateWeight(Cu);if(Du>0){var ku=this._interpolants,Fu=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Nu=0,Gu=ku.length;Nu!==Gu;++Nu)ku[Nu].evaluate(Ou),Fu[Nu].accumulateAdditive(Du);break;case NormalAnimationBlendMode:default:for(var Nu=0,Gu=ku.length;Nu!==Gu;++Nu)ku[Nu].evaluate(Ou),Fu[Nu].accumulate(Bu,Du)}}},_updateWeight:function(Cu){var Tu=0;if(this.enabled){Tu=this.weight;var Pu=this._weightInterpolant;if(Pu!==null){var Bu=Pu.evaluate(Cu)[0];Tu*=Bu,Cu>Pu.parameterPositions[1]&&(this.stopFading(),Bu===0&&(this.enabled=!1))}}return this._effectiveWeight=Tu,Tu},_updateTimeScale:function(Cu){var Tu=0;if(!this.paused){Tu=this.timeScale;var Pu=this._timeScaleInterpolant;if(Pu!==null){var Bu=Pu.evaluate(Cu)[0];Tu*=Bu,Cu>Pu.parameterPositions[1]&&(this.stopWarping(),Tu===0?this.paused=!0:this.timeScale=Tu)}}return this._effectiveTimeScale=Tu,Tu},_updateTime:function(Cu){var Tu=this.time+Cu,Pu=this._clip.duration,Bu=this.loop,Lu=this._loopCount,Ru=Bu===LoopPingPong;if(Cu===0)return Lu===-1?Tu:Ru&&(Lu&1)===1?Pu-Tu:Tu;if(Bu===LoopOnce){Lu===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(Tu>=Pu)Tu=Pu;else if(Tu<0)Tu=0;else{this.time=Tu;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=Tu,this._mixer.dispatchEvent({type:"finished",action:this,direction:Cu<0?-1:1})}}else{if(Lu===-1&&(Cu>=0?(Lu=0,this._setEndings(!0,this.repetitions===0,Ru)):this._setEndings(this.repetitions===0,!0,Ru)),Tu>=Pu||Tu<0){var Ou=Math.floor(Tu/Pu);Tu-=Pu*Ou,Lu+=Math.abs(Ou);var Du=this.repetitions-Lu;if(Du<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Tu=Cu>0?Pu:0,this.time=Tu,this._mixer.dispatchEvent({type:"finished",action:this,direction:Cu>0?1:-1});else{if(Du===1){var ku=Cu<0;this._setEndings(ku,!ku,Ru)}else this._setEndings(!1,!1,Ru);this._loopCount=Lu,this.time=Tu,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ou})}}else this.time=Tu;if(Ru&&(Lu&1)===1)return Pu-Tu}return Tu},_setEndings:function(Cu,Tu,Pu){var Bu=this._interpolantSettings;Pu?(Bu.endingStart=ZeroSlopeEnding,Bu.endingEnd=ZeroSlopeEnding):(Cu?Bu.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Bu.endingStart=WrapAroundEnding,Tu?Bu.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Bu.endingEnd=WrapAroundEnding)},_scheduleFading:function(Cu,Tu,Pu){var Bu=this._mixer,Lu=Bu.time,Ru=this._weightInterpolant;Ru===null&&(Ru=Bu._lendControlInterpolant(),this._weightInterpolant=Ru);var Ou=Ru.parameterPositions,Du=Ru.sampleValues;return Ou[0]=Lu,Du[0]=Tu,Ou[1]=Lu+Cu,Du[1]=Pu,this}});function AnimationMixer(Cu){this._root=Cu,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(Cu,Tu){var Pu=Cu._localRoot||this._root,Bu=Cu._clip.tracks,Lu=Bu.length,Ru=Cu._propertyBindings,Ou=Cu._interpolants,Du=Pu.uuid,ku=this._bindingsByRootAndName,Fu=ku[Du];Fu===void 0&&(Fu={},ku[Du]=Fu);for(var Nu=0;Nu!==Lu;++Nu){var Gu=Bu[Nu],zu=Gu.name,Hu=Fu[zu];if(Hu!==void 0)Ru[Nu]=Hu;else{if(Hu=Ru[Nu],Hu!==void 0){Hu._cacheIndex===null&&(++Hu.referenceCount,this._addInactiveBinding(Hu,Du,zu));continue}var Wu=Tu&&Tu._propertyBindings[Nu].binding.parsedPath;Hu=new PropertyMixer(PropertyBinding.create(Pu,zu,Wu),Gu.ValueTypeName,Gu.getValueSize()),++Hu.referenceCount,this._addInactiveBinding(Hu,Du,zu),Ru[Nu]=Hu}Ou[Nu].resultBuffer=Hu.buffer}},_activateAction:function(Cu){if(!this._isActiveAction(Cu)){if(Cu._cacheIndex===null){var Tu=(Cu._localRoot||this._root).uuid,Pu=Cu._clip.uuid,Bu=this._actionsByClip[Pu];this._bindAction(Cu,Bu&&Bu.knownActions[0]),this._addInactiveAction(Cu,Pu,Tu)}for(var Lu=Cu._propertyBindings,Ru=0,Ou=Lu.length;Ru!==Ou;++Ru){var Du=Lu[Ru];Du.useCount++===0&&(this._lendBinding(Du),Du.saveOriginalState())}this._lendAction(Cu)}},_deactivateAction:function(Cu){if(this._isActiveAction(Cu)){for(var Tu=Cu._propertyBindings,Pu=0,Bu=Tu.length;Pu!==Bu;++Pu){var Lu=Tu[Pu];--Lu.useCount===0&&(Lu.restoreOriginalState(),this._takeBackBinding(Lu))}this._takeBackAction(Cu)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var Cu=this;this.stats={actions:{get total(){return Cu._actions.length},get inUse(){return Cu._nActiveActions}},bindings:{get total(){return Cu._bindings.length},get inUse(){return Cu._nActiveBindings}},controlInterpolants:{get total(){return Cu._controlInterpolants.length},get inUse(){return Cu._nActiveControlInterpolants}}}},_isActiveAction:function(Cu){var Tu=Cu._cacheIndex;return Tu!==null&&Tu<this._nActiveActions},_addInactiveAction:function(Cu,Tu,Pu){var Bu=this._actions,Lu=this._actionsByClip,Ru=Lu[Tu];if(Ru===void 0)Ru={knownActions:[Cu],actionByRoot:{}},Cu._byClipCacheIndex=0,Lu[Tu]=Ru;else{var Ou=Ru.knownActions;Cu._byClipCacheIndex=Ou.length,Ou.push(Cu)}Cu._cacheIndex=Bu.length,Bu.push(Cu),Ru.actionByRoot[Pu]=Cu},_removeInactiveAction:function(Cu){var Tu=this._actions,Pu=Tu[Tu.length-1],Bu=Cu._cacheIndex;Pu._cacheIndex=Bu,Tu[Bu]=Pu,Tu.pop(),Cu._cacheIndex=null;var Lu=Cu._clip.uuid,Ru=this._actionsByClip,Ou=Ru[Lu],Du=Ou.knownActions,ku=Du[Du.length-1],Fu=Cu._byClipCacheIndex;ku._byClipCacheIndex=Fu,Du[Fu]=ku,Du.pop(),Cu._byClipCacheIndex=null;var Nu=Ou.actionByRoot,Gu=(Cu._localRoot||this._root).uuid;delete Nu[Gu],Du.length===0&&delete Ru[Lu],this._removeInactiveBindingsForAction(Cu)},_removeInactiveBindingsForAction:function(Cu){for(var Tu=Cu._propertyBindings,Pu=0,Bu=Tu.length;Pu!==Bu;++Pu){var Lu=Tu[Pu];--Lu.referenceCount===0&&this._removeInactiveBinding(Lu)}},_lendAction:function(Cu){var Tu=this._actions,Pu=Cu._cacheIndex,Bu=this._nActiveActions++,Lu=Tu[Bu];Cu._cacheIndex=Bu,Tu[Bu]=Cu,Lu._cacheIndex=Pu,Tu[Pu]=Lu},_takeBackAction:function(Cu){var Tu=this._actions,Pu=Cu._cacheIndex,Bu=--this._nActiveActions,Lu=Tu[Bu];Cu._cacheIndex=Bu,Tu[Bu]=Cu,Lu._cacheIndex=Pu,Tu[Pu]=Lu},_addInactiveBinding:function(Cu,Tu,Pu){var Bu=this._bindingsByRootAndName,Lu=Bu[Tu],Ru=this._bindings;Lu===void 0&&(Lu={},Bu[Tu]=Lu),Lu[Pu]=Cu,Cu._cacheIndex=Ru.length,Ru.push(Cu)},_removeInactiveBinding:function(Cu){var Tu=this._bindings,Pu=Cu.binding,Bu=Pu.rootNode.uuid,Lu=Pu.path,Ru=this._bindingsByRootAndName,Ou=Ru[Bu],Du=Tu[Tu.length-1],ku=Cu._cacheIndex;Du._cacheIndex=ku,Tu[ku]=Du,Tu.pop(),delete Ou[Lu],Object.keys(Ou).length===0&&delete Ru[Bu]},_lendBinding:function(Cu){var Tu=this._bindings,Pu=Cu._cacheIndex,Bu=this._nActiveBindings++,Lu=Tu[Bu];Cu._cacheIndex=Bu,Tu[Bu]=Cu,Lu._cacheIndex=Pu,Tu[Pu]=Lu},_takeBackBinding:function(Cu){var Tu=this._bindings,Pu=Cu._cacheIndex,Bu=--this._nActiveBindings,Lu=Tu[Bu];Cu._cacheIndex=Bu,Tu[Bu]=Cu,Lu._cacheIndex=Pu,Tu[Pu]=Lu},_lendControlInterpolant:function(){var Cu=this._controlInterpolants,Tu=this._nActiveControlInterpolants++,Pu=Cu[Tu];return Pu===void 0&&(Pu=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Pu.__cacheIndex=Tu,Cu[Tu]=Pu),Pu},_takeBackControlInterpolant:function(Cu){var Tu=this._controlInterpolants,Pu=Cu.__cacheIndex,Bu=--this._nActiveControlInterpolants,Lu=Tu[Bu];Cu.__cacheIndex=Bu,Tu[Bu]=Cu,Lu.__cacheIndex=Pu,Tu[Pu]=Lu},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(Cu,Tu,Pu){var Bu=Tu||this._root,Lu=Bu.uuid,Ru=typeof Cu=="string"?AnimationClip.findByName(Bu,Cu):Cu,Ou=Ru!==null?Ru.uuid:Cu,Du=this._actionsByClip[Ou],ku=null;if(Pu===void 0&&(Ru!==null?Pu=Ru.blendMode:Pu=NormalAnimationBlendMode),Du!==void 0){var Fu=Du.actionByRoot[Lu];if(Fu!==void 0&&Fu.blendMode===Pu)return Fu;ku=Du.knownActions[0],Ru===null&&(Ru=ku._clip)}if(Ru===null)return null;var Nu=new AnimationAction(this,Ru,Tu,Pu);return this._bindAction(Nu,ku),this._addInactiveAction(Nu,Ou,Lu),Nu},existingAction:function(Cu,Tu){var Pu=Tu||this._root,Bu=Pu.uuid,Lu=typeof Cu=="string"?AnimationClip.findByName(Pu,Cu):Cu,Ru=Lu?Lu.uuid:Cu,Ou=this._actionsByClip[Ru];return Ou!==void 0&&Ou.actionByRoot[Bu]||null},stopAllAction:function(){for(var Cu=this._actions,Tu=this._nActiveActions,Pu=Tu-1;Pu>=0;--Pu)Cu[Pu].stop();return this},update:function(Cu){Cu*=this.timeScale;for(var Tu=this._actions,Pu=this._nActiveActions,Bu=this.time+=Cu,Lu=Math.sign(Cu),Ru=this._accuIndex^=1,Ou=0;Ou!==Pu;++Ou){var Du=Tu[Ou];Du._update(Bu,Cu,Lu,Ru)}for(var ku=this._bindings,Fu=this._nActiveBindings,Ou=0;Ou!==Fu;++Ou)ku[Ou].apply(Ru);return this},setTime:function(Cu){this.time=0;for(var Tu=0;Tu<this._actions.length;Tu++)this._actions[Tu].time=0;return this.update(Cu)},getRoot:function(){return this._root},uncacheClip:function(Cu){var Tu=this._actions,Pu=Cu.uuid,Bu=this._actionsByClip,Lu=Bu[Pu];if(Lu!==void 0){for(var Ru=Lu.knownActions,Ou=0,Du=Ru.length;Ou!==Du;++Ou){var ku=Ru[Ou];this._deactivateAction(ku);var Fu=ku._cacheIndex,Nu=Tu[Tu.length-1];ku._cacheIndex=null,ku._byClipCacheIndex=null,Nu._cacheIndex=Fu,Tu[Fu]=Nu,Tu.pop(),this._removeInactiveBindingsForAction(ku)}delete Bu[Pu]}},uncacheRoot:function(Cu){var Tu=Cu.uuid,Pu=this._actionsByClip;for(var Bu in Pu){var Lu=Pu[Bu].actionByRoot,Ru=Lu[Tu];Ru!==void 0&&(this._deactivateAction(Ru),this._removeInactiveAction(Ru))}var Ou=this._bindingsByRootAndName,Du=Ou[Tu];if(Du!==void 0)for(var ku in Du){var Fu=Du[ku];Fu.restoreOriginalState(),this._removeInactiveBinding(Fu)}},uncacheAction:function(Cu,Tu){var Pu=this.existingAction(Cu,Tu);Pu!==null&&(this._deactivateAction(Pu),this._removeInactiveAction(Pu))}});function Uniform(Cu){typeof Cu=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),Cu=arguments[1]),this.value=Cu}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(Cu,Tu,Pu){InterleavedBuffer.call(this,Cu,Tu),this.meshPerAttribute=Pu||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(Cu){return InterleavedBuffer.prototype.copy.call(this,Cu),this.meshPerAttribute=Cu.meshPerAttribute,this}});function Raycaster(Cu,Tu,Pu,Bu){this.ray=new Ray(Cu,Tu),this.near=Pu||0,this.far=Bu||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(Cu,Tu){return Cu.distance-Tu.distance}function intersectObject(Cu,Tu,Pu,Bu){if(Cu.layers.test(Tu.layers)&&Cu.raycast(Tu,Pu),Bu===!0)for(var Lu=Cu.children,Ru=0,Ou=Lu.length;Ru<Ou;Ru++)intersectObject(Lu[Ru],Tu,Pu,!0)}Object.assign(Raycaster.prototype,{set:function(Cu,Tu){this.ray.set(Cu,Tu)},setFromCamera:function(Cu,Tu){Tu&&Tu.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(Tu.matrixWorld),this.ray.direction.set(Cu.x,Cu.y,.5).unproject(Tu).sub(this.ray.origin).normalize(),this.camera=Tu):Tu&&Tu.isOrthographicCamera?(this.ray.origin.set(Cu.x,Cu.y,(Tu.near+Tu.far)/(Tu.near-Tu.far)).unproject(Tu),this.ray.direction.set(0,0,-1).transformDirection(Tu.matrixWorld),this.camera=Tu):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(Cu,Tu,Pu){var Bu=Pu||[];return intersectObject(Cu,this,Bu,Tu),Bu.sort(ascSort),Bu},intersectObjects:function(Cu,Tu,Pu){var Bu=Pu||[];if(Array.isArray(Cu)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Bu;for(var Lu=0,Ru=Cu.length;Lu<Ru;Lu++)intersectObject(Cu[Lu],this,Bu,Tu);return Bu.sort(ascSort),Bu}});function Spherical(Cu,Tu,Pu){return this.radius=Cu!==void 0?Cu:1,this.phi=Tu!==void 0?Tu:0,this.theta=Pu!==void 0?Pu:0,this}Object.assign(Spherical.prototype,{set:function(Cu,Tu,Pu){return this.radius=Cu,this.phi=Tu,this.theta=Pu,this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.radius=Cu.radius,this.phi=Cu.phi,this.theta=Cu.theta,this},makeSafe:function(){var Cu=1e-6;return this.phi=Math.max(Cu,Math.min(Math.PI-Cu,this.phi)),this},setFromVector3:function(Cu){return this.setFromCartesianCoords(Cu.x,Cu.y,Cu.z)},setFromCartesianCoords:function(Cu,Tu,Pu){return this.radius=Math.sqrt(Cu*Cu+Tu*Tu+Pu*Pu),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(Cu,Pu),this.phi=Math.acos(MathUtils.clamp(Tu/this.radius,-1,1))),this}});function Cylindrical(Cu,Tu,Pu){return this.radius=Cu!==void 0?Cu:1,this.theta=Tu!==void 0?Tu:0,this.y=Pu!==void 0?Pu:0,this}Object.assign(Cylindrical.prototype,{set:function(Cu,Tu,Pu){return this.radius=Cu,this.theta=Tu,this.y=Pu,this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.radius=Cu.radius,this.theta=Cu.theta,this.y=Cu.y,this},setFromVector3:function(Cu){return this.setFromCartesianCoords(Cu.x,Cu.y,Cu.z)},setFromCartesianCoords:function(Cu,Tu,Pu){return this.radius=Math.sqrt(Cu*Cu+Pu*Pu),this.theta=Math.atan2(Cu,Pu),this.y=Tu,this}});var _vector$7=new Vector2;function Box2(Cu,Tu){this.min=Cu!==void 0?Cu:new Vector2(1/0,1/0),this.max=Tu!==void 0?Tu:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(Cu,Tu){return this.min.copy(Cu),this.max.copy(Tu),this},setFromPoints:function(Cu){this.makeEmpty();for(var Tu=0,Pu=Cu.length;Tu<Pu;Tu++)this.expandByPoint(Cu[Tu]);return this},setFromCenterAndSize:function(Cu,Tu){var Pu=_vector$7.copy(Tu).multiplyScalar(.5);return this.min.copy(Cu).sub(Pu),this.max.copy(Cu).add(Pu),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.min.copy(Cu.min),this.max.copy(Cu.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(Cu){return Cu===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),Cu=new Vector2),this.isEmpty()?Cu.set(0,0):Cu.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(Cu){return Cu===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),Cu=new Vector2),this.isEmpty()?Cu.set(0,0):Cu.subVectors(this.max,this.min)},expandByPoint:function(Cu){return this.min.min(Cu),this.max.max(Cu),this},expandByVector:function(Cu){return this.min.sub(Cu),this.max.add(Cu),this},expandByScalar:function(Cu){return this.min.addScalar(-Cu),this.max.addScalar(Cu),this},containsPoint:function(Cu){return!(Cu.x<this.min.x||Cu.x>this.max.x||Cu.y<this.min.y||Cu.y>this.max.y)},containsBox:function(Cu){return this.min.x<=Cu.min.x&&Cu.max.x<=this.max.x&&this.min.y<=Cu.min.y&&Cu.max.y<=this.max.y},getParameter:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),Tu=new Vector2),Tu.set((Cu.x-this.min.x)/(this.max.x-this.min.x),(Cu.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(Cu){return!(Cu.max.x<this.min.x||Cu.min.x>this.max.x||Cu.max.y<this.min.y||Cu.min.y>this.max.y)},clampPoint:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),Tu=new Vector2),Tu.copy(Cu).clamp(this.min,this.max)},distanceToPoint:function(Cu){var Tu=_vector$7.copy(Cu).clamp(this.min,this.max);return Tu.sub(Cu).length()},intersect:function(Cu){return this.min.max(Cu.min),this.max.min(Cu.max),this},union:function(Cu){return this.min.min(Cu.min),this.max.max(Cu.max),this},translate:function(Cu){return this.min.add(Cu),this.max.add(Cu),this},equals:function(Cu){return Cu.min.equals(this.min)&&Cu.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(Cu,Tu){this.start=Cu!==void 0?Cu:new Vector3,this.end=Tu!==void 0?Tu:new Vector3}Object.assign(Line3.prototype,{set:function(Cu,Tu){return this.start.copy(Cu),this.end.copy(Tu),this},clone:function(){return new this.constructor().copy(this)},copy:function(Cu){return this.start.copy(Cu.start),this.end.copy(Cu.end),this},getCenter:function(Cu){return Cu===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),Cu=new Vector3),Cu.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(Cu){return Cu===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),Cu=new Vector3),Cu.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(Cu,Tu){return Tu===void 0&&(console.warn("THREE.Line3: .at() target is now required"),Tu=new Vector3),this.delta(Tu).multiplyScalar(Cu).add(this.start)},closestPointToPointParameter:function(Cu,Tu){_startP.subVectors(Cu,this.start),_startEnd.subVectors(this.end,this.start);var Pu=_startEnd.dot(_startEnd),Bu=_startEnd.dot(_startP),Lu=Bu/Pu;return Tu&&(Lu=MathUtils.clamp(Lu,0,1)),Lu},closestPointToPoint:function(Cu,Tu,Pu){var Bu=this.closestPointToPointParameter(Cu,Tu);return Pu===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),Pu=new Vector3),this.delta(Pu).multiplyScalar(Bu).add(this.start)},applyMatrix4:function(Cu){return this.start.applyMatrix4(Cu),this.end.applyMatrix4(Cu),this},equals:function(Cu){return Cu.start.equals(this.start)&&Cu.end.equals(this.end)}});function ImmediateRenderObject(Cu){Object3D.call(this),this.material=Cu,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(Cu,Tu){Object3D.call(this),this.light=Cu,this.light.updateMatrixWorld(),this.matrix=Cu.matrixWorld,this.matrixAutoUpdate=!1,this.color=Tu;for(var Pu=new BufferGeometry,Bu=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Lu=0,Ru=1,Ou=32;Lu<Ou;Lu++,Ru++){var Du=Lu/Ou*Math.PI*2,ku=Ru/Ou*Math.PI*2;Bu.push(Math.cos(Du),Math.sin(Du),1,Math.cos(ku),Math.sin(ku),1)}Pu.setAttribute("position",new Float32BufferAttribute(Bu,3));var Fu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Pu,Fu),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var Cu=this.light.distance?this.light.distance:1e3,Tu=Cu*Math.tan(this.light.angle);this.cone.scale.set(Tu,Tu,Cu),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(Cu){var Tu=[];Cu&&Cu.isBone&&Tu.push(Cu);for(var Pu=0;Pu<Cu.children.length;Pu++)Tu.push.apply(Tu,getBoneList(Cu.children[Pu]));return Tu}function SkeletonHelper(Cu){for(var Tu=getBoneList(Cu),Pu=new BufferGeometry,Bu=[],Lu=[],Ru=new Color(0,0,1),Ou=new Color(0,1,0),Du=0;Du<Tu.length;Du++){var ku=Tu[Du];ku.parent&&ku.parent.isBone&&(Bu.push(0,0,0),Bu.push(0,0,0),Lu.push(Ru.r,Ru.g,Ru.b),Lu.push(Ou.r,Ou.g,Ou.b))}Pu.setAttribute("position",new Float32BufferAttribute(Bu,3)),Pu.setAttribute("color",new Float32BufferAttribute(Lu,3));var Fu=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,Pu,Fu),this.type="SkeletonHelper",this.root=Cu,this.bones=Tu,this.matrix=Cu.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(Cu){var Tu=this.bones,Pu=this.geometry,Bu=Pu.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Lu=0,Ru=0;Lu<Tu.length;Lu++){var Ou=Tu[Lu];Ou.parent&&Ou.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Ou.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Bu.setXYZ(Ru,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Ou.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Bu.setXYZ(Ru+1,_vector$9.x,_vector$9.y,_vector$9.z),Ru+=2)}Pu.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,Cu)};function PointLightHelper(Cu,Tu,Pu){this.light=Cu,this.light.updateMatrixWorld(),this.color=Pu;var Bu=new SphereBufferGeometry(Tu,4,2),Lu=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Bu,Lu),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(Cu,Tu,Pu){Object3D.call(this),this.light=Cu,this.light.updateMatrixWorld(),this.matrix=Cu.matrixWorld,this.matrixAutoUpdate=!1,this.color=Pu;var Bu=new OctahedronBufferGeometry(Tu);Bu.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Lu=Bu.getAttribute("position"),Ru=new Float32Array(Lu.count*3);Bu.setAttribute("color",new BufferAttribute(Ru,3)),this.add(new Mesh(Bu,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var Cu=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var Tu=Cu.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var Pu=0,Bu=Tu.count;Pu<Bu;Pu++){var Lu=Pu<Bu/2?_color1:_color2;Tu.setXYZ(Pu,Lu.r,Lu.g,Lu.b)}Tu.needsUpdate=!0}Cu.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(Cu,Tu,Pu,Bu){Cu=Cu||10,Tu=Tu||10,Pu=new Color(Pu!==void 0?Pu:4473924),Bu=new Color(Bu!==void 0?Bu:8947848);for(var Lu=Tu/2,Ru=Cu/Tu,Ou=Cu/2,Du=[],ku=[],Fu=0,Nu=0,Gu=-Ou;Fu<=Tu;Fu++,Gu+=Ru){Du.push(-Ou,0,Gu,Ou,0,Gu),Du.push(Gu,0,-Ou,Gu,0,Ou);var zu=Fu===Lu?Pu:Bu;zu.toArray(ku,Nu),Nu+=3,zu.toArray(ku,Nu),Nu+=3,zu.toArray(ku,Nu),Nu+=3,zu.toArray(ku,Nu),Nu+=3}var Hu=new BufferGeometry;Hu.setAttribute("position",new Float32BufferAttribute(Du,3)),Hu.setAttribute("color",new Float32BufferAttribute(ku,3));var Wu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Hu,Wu),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(Cu){return LineSegments.prototype.copy.call(this,Cu),this.geometry.copy(Cu.geometry),this.material.copy(Cu.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(Cu,Tu,Pu,Bu,Lu,Ru){Cu=Cu||10,Tu=Tu||16,Pu=Pu||8,Bu=Bu||64,Lu=new Color(Lu!==void 0?Lu:4473924),Ru=new Color(Ru!==void 0?Ru:8947848);var Ou=[],Du=[],ku,Fu,Nu,Gu,zu,Hu,Wu;for(Gu=0;Gu<=Tu;Gu++)Nu=Gu/Tu*(Math.PI*2),ku=Math.sin(Nu)*Cu,Fu=Math.cos(Nu)*Cu,Ou.push(0,0,0),Ou.push(ku,0,Fu),Wu=Gu&1?Lu:Ru,Du.push(Wu.r,Wu.g,Wu.b),Du.push(Wu.r,Wu.g,Wu.b);for(Gu=0;Gu<=Pu;Gu++)for(Wu=Gu&1?Lu:Ru,Hu=Cu-Cu/Pu*Gu,zu=0;zu<Bu;zu++)Nu=zu/Bu*(Math.PI*2),ku=Math.sin(Nu)*Hu,Fu=Math.cos(Nu)*Hu,Ou.push(ku,0,Fu),Du.push(Wu.r,Wu.g,Wu.b),Nu=(zu+1)/Bu*(Math.PI*2),ku=Math.sin(Nu)*Hu,Fu=Math.cos(Nu)*Hu,Ou.push(ku,0,Fu),Du.push(Wu.r,Wu.g,Wu.b);var _h=new BufferGeometry;_h.setAttribute("position",new Float32BufferAttribute(Ou,3)),_h.setAttribute("color",new Float32BufferAttribute(Du,3));var Xc=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,_h,Xc),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(Cu,Tu,Pu){Object3D.call(this),this.light=Cu,this.light.updateMatrixWorld(),this.matrix=Cu.matrixWorld,this.matrixAutoUpdate=!1,this.color=Pu,Tu===void 0&&(Tu=1);var Bu=new BufferGeometry;Bu.setAttribute("position",new Float32BufferAttribute([-Tu,Tu,0,Tu,Tu,0,Tu,-Tu,0,-Tu,-Tu,0,-Tu,Tu,0],3));var Lu=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(Bu,Lu),this.add(this.lightPlane),Bu=new BufferGeometry,Bu.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(Bu,Lu),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(Cu){var Tu=new BufferGeometry,Pu=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Bu=[],Lu=[],Ru={},Ou=new Color(16755200),Du=new Color(16711680),ku=new Color(43775),Fu=new Color(16777215),Nu=new Color(3355443);Gu("n1","n2",Ou),Gu("n2","n4",Ou),Gu("n4","n3",Ou),Gu("n3","n1",Ou),Gu("f1","f2",Ou),Gu("f2","f4",Ou),Gu("f4","f3",Ou),Gu("f3","f1",Ou),Gu("n1","f1",Ou),Gu("n2","f2",Ou),Gu("n3","f3",Ou),Gu("n4","f4",Ou),Gu("p","n1",Du),Gu("p","n2",Du),Gu("p","n3",Du),Gu("p","n4",Du),Gu("u1","u2",ku),Gu("u2","u3",ku),Gu("u3","u1",ku),Gu("c","t",Fu),Gu("p","c",Nu),Gu("cn1","cn2",Nu),Gu("cn3","cn4",Nu),Gu("cf1","cf2",Nu),Gu("cf3","cf4",Nu);function Gu(Hu,Wu,_h){zu(Hu,_h),zu(Wu,_h)}function zu(Hu,Wu){Bu.push(0,0,0),Lu.push(Wu.r,Wu.g,Wu.b),Ru[Hu]===void 0&&(Ru[Hu]=[]),Ru[Hu].push(Bu.length/3-1)}Tu.setAttribute("position",new Float32BufferAttribute(Bu,3)),Tu.setAttribute("color",new Float32BufferAttribute(Lu,3)),LineSegments.call(this,Tu,Pu),this.type="CameraHelper",this.camera=Cu,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=Cu.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ru,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var Cu=this.geometry,Tu=this.pointMap,Pu=1,Bu=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",Tu,Cu,_camera,0,0,-1),setPoint("t",Tu,Cu,_camera,0,0,1),setPoint("n1",Tu,Cu,_camera,-Pu,-Bu,-1),setPoint("n2",Tu,Cu,_camera,Pu,-Bu,-1),setPoint("n3",Tu,Cu,_camera,-Pu,Bu,-1),setPoint("n4",Tu,Cu,_camera,Pu,Bu,-1),setPoint("f1",Tu,Cu,_camera,-Pu,-Bu,1),setPoint("f2",Tu,Cu,_camera,Pu,-Bu,1),setPoint("f3",Tu,Cu,_camera,-Pu,Bu,1),setPoint("f4",Tu,Cu,_camera,Pu,Bu,1),setPoint("u1",Tu,Cu,_camera,Pu*.7,Bu*1.1,-1),setPoint("u2",Tu,Cu,_camera,-Pu*.7,Bu*1.1,-1),setPoint("u3",Tu,Cu,_camera,0,Bu*2,-1),setPoint("cf1",Tu,Cu,_camera,-Pu,0,1),setPoint("cf2",Tu,Cu,_camera,Pu,0,1),setPoint("cf3",Tu,Cu,_camera,0,-Bu,1),setPoint("cf4",Tu,Cu,_camera,0,Bu,1),setPoint("cn1",Tu,Cu,_camera,-Pu,0,-1),setPoint("cn2",Tu,Cu,_camera,Pu,0,-1),setPoint("cn3",Tu,Cu,_camera,0,-Bu,-1),setPoint("cn4",Tu,Cu,_camera,0,Bu,-1),Cu.getAttribute("position").needsUpdate=!0};function setPoint(Cu,Tu,Pu,Bu,Lu,Ru,Ou){_vector$b.set(Lu,Ru,Ou).unproject(Bu);var Du=Tu[Cu];if(Du!==void 0)for(var ku=Pu.getAttribute("position"),Fu=0,Nu=Du.length;Fu<Nu;Fu++)ku.setXYZ(Du[Fu],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(Cu,Tu){this.object=Cu,Tu===void 0&&(Tu=16776960);var Pu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Bu=new Float32Array(8*3),Lu=new BufferGeometry;Lu.setIndex(new BufferAttribute(Pu,1)),Lu.setAttribute("position",new BufferAttribute(Bu,3)),LineSegments.call(this,Lu,new LineBasicMaterial({color:Tu,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(Cu){if(Cu!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var Tu=_box$3.min,Pu=_box$3.max,Bu=this.geometry.attributes.position,Lu=Bu.array;Lu[0]=Pu.x,Lu[1]=Pu.y,Lu[2]=Pu.z,Lu[3]=Tu.x,Lu[4]=Pu.y,Lu[5]=Pu.z,Lu[6]=Tu.x,Lu[7]=Tu.y,Lu[8]=Pu.z,Lu[9]=Pu.x,Lu[10]=Tu.y,Lu[11]=Pu.z,Lu[12]=Pu.x,Lu[13]=Pu.y,Lu[14]=Tu.z,Lu[15]=Tu.x,Lu[16]=Pu.y,Lu[17]=Tu.z,Lu[18]=Tu.x,Lu[19]=Tu.y,Lu[20]=Tu.z,Lu[21]=Pu.x,Lu[22]=Tu.y,Lu[23]=Tu.z,Bu.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(Cu){return this.object=Cu,this.update(),this};BoxHelper.prototype.copy=function(Cu){return LineSegments.prototype.copy.call(this,Cu),this.object=Cu.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(Cu,Tu){this.type="Box3Helper",this.box=Cu,Tu=Tu||16776960;var Pu=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Bu=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Lu=new BufferGeometry;Lu.setIndex(new BufferAttribute(Pu,1)),Lu.setAttribute("position",new Float32BufferAttribute(Bu,3)),LineSegments.call(this,Lu,new LineBasicMaterial({color:Tu,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(Cu){var Tu=this.box;Tu.isEmpty()||(Tu.getCenter(this.position),Tu.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,Cu))};function PlaneHelper(Cu,Tu,Pu){this.plane=Cu,this.size=Tu===void 0?1:Tu;var Bu=Pu!==void 0?Pu:16776960,Lu=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Ru=new BufferGeometry;Ru.setAttribute("position",new Float32BufferAttribute(Lu,3)),Ru.computeBoundingSphere(),Line$1.call(this,Ru,new LineBasicMaterial({color:Bu,toneMapped:!1})),this.type="PlaneHelper";var Ou=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Du=new BufferGeometry;Du.setAttribute("position",new Float32BufferAttribute(Ou,3)),Du.computeBoundingSphere(),this.add(new Mesh(Du,new MeshBasicMaterial({color:Bu,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(Cu){var Tu=-this.plane.constant;Math.abs(Tu)<1e-8&&(Tu=1e-8),this.scale.set(.5*this.size,.5*this.size,Tu),this.children[0].material.side=Tu<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,Cu)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(Cu,Tu,Pu,Bu,Lu,Ru){Object3D.call(this),this.type="ArrowHelper",Cu===void 0&&(Cu=new Vector3(0,0,1)),Tu===void 0&&(Tu=new Vector3(0,0,0)),Pu===void 0&&(Pu=1),Bu===void 0&&(Bu=16776960),Lu===void 0&&(Lu=.2*Pu),Ru===void 0&&(Ru=.2*Lu),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(Tu),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:Bu,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Bu,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(Cu),this.setLength(Pu,Lu,Ru)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(Cu){if(Cu.y>.99999)this.quaternion.set(0,0,0,1);else if(Cu.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(Cu.z,0,-Cu.x).normalize();var Tu=Math.acos(Cu.y);this.quaternion.setFromAxisAngle(_axis,Tu)}};ArrowHelper.prototype.setLength=function(Cu,Tu,Pu){Tu===void 0&&(Tu=.2*Cu),Pu===void 0&&(Pu=.2*Tu),this.line.scale.set(1,Math.max(1e-4,Cu-Tu),1),this.line.updateMatrix(),this.cone.scale.set(Pu,Tu,Pu),this.cone.position.y=Cu,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(Cu){this.line.material.color.set(Cu),this.cone.material.color.set(Cu)};ArrowHelper.prototype.copy=function(Cu){return Object3D.prototype.copy.call(this,Cu,!1),this.line.copy(Cu.line),this.cone.copy(Cu.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(Cu){Cu=Cu||1;var Tu=[0,0,0,Cu,0,0,0,0,0,0,Cu,0,0,0,0,0,0,Cu],Pu=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Bu=new BufferGeometry;Bu.setAttribute("position",new Float32BufferAttribute(Tu,3)),Bu.setAttribute("color",new Float32BufferAttribute(Pu,3));var Lu=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Bu,Lu),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(Cu){this._renderer=Cu,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(Cu,Tu=0,Pu=.1,Bu=100){_oldTarget=this._renderer.getRenderTarget();var Lu=this._allocateTargets();return this._sceneToCubeUV(Cu,Pu,Bu,Lu),Tu>0&&this._blur(Lu,0,0,Tu),this._applyPMREM(Lu),this._cleanup(Lu),Lu},fromEquirectangular:function(Cu){return Cu.magFilter=NearestFilter,Cu.minFilter=NearestFilter,Cu.generateMipmaps=!1,this.fromCubemap(Cu)},fromCubemap:function(Cu){_oldTarget=this._renderer.getRenderTarget();var Tu=this._allocateTargets(Cu);return this._textureToCubeUV(Cu,Tu),this._applyPMREM(Tu),this._cleanup(Tu),Tu},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var Cu=0;Cu<_lodPlanes.length;Cu++)_lodPlanes[Cu].dispose()},_cleanup:function(Cu){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),Cu.scissorTest=!1,Cu.setSize(Cu.width,Cu.height)},_allocateTargets:function(Cu){var Tu={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(Cu)?Cu.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},Pu=_createRenderTarget(Tu);return Pu.depthBuffer=!Cu,this._pingPongRenderTarget=_createRenderTarget(Tu),Pu},_compileMaterial:function(Cu){var Tu=new Mesh(_lodPlanes[0],Cu);this._renderer.compile(Tu,_flatCamera)},_sceneToCubeUV:function(Cu,Tu,Pu,Bu){var Lu=90,Ru=1,Ou=new PerspectiveCamera(Lu,Ru,Tu,Pu),Du=[1,-1,1,1,1,1],ku=[1,1,1,-1,-1,-1],Fu=this._renderer,Nu=Fu.outputEncoding,Gu=Fu.toneMapping,zu=Fu.toneMappingExposure,Hu=Fu.getClearColor(),Wu=Fu.getClearAlpha();Fu.toneMapping=LinearToneMapping,Fu.toneMappingExposure=1,Fu.outputEncoding=LinearEncoding;var _h=Cu.background;if(_h&&_h.isColor){_h.convertSRGBToLinear();var Xc=Math.max(_h.r,_h.g,_h.b),ju=Math.min(Math.max(Math.ceil(Math.log2(Xc)),-128),127);_h=_h.multiplyScalar(Math.pow(2,-ju));var _c=(ju+128)/255;Fu.setClearColor(_h,_c),Cu.background=null}for(var _f=0;_f<6;_f++){var ep=_f%3;ep==0?(Ou.up.set(0,Du[_f],0),Ou.lookAt(ku[_f],0,0)):ep==1?(Ou.up.set(0,0,Du[_f]),Ou.lookAt(0,ku[_f],0)):(Ou.up.set(0,Du[_f],0),Ou.lookAt(0,0,ku[_f])),_setViewport(Bu,ep*SIZE_MAX,_f>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Fu.setRenderTarget(Bu),Fu.render(Cu,Ou)}Fu.toneMapping=Gu,Fu.toneMappingExposure=zu,Fu.outputEncoding=Nu,Fu.setClearColor(Hu,Wu)},_textureToCubeUV:function(Cu,Tu){var Pu=this._renderer;Cu.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Bu=Cu.isCubeTexture?this._cubemapShader:this._equirectShader,Lu=new Mesh(_lodPlanes[0],Bu),Ru=Bu.uniforms;Ru.envMap.value=Cu,Cu.isCubeTexture||Ru.texelSize.value.set(1/Cu.image.width,1/Cu.image.height),Ru.inputEncoding.value=ENCODINGS[Cu.encoding],Ru.outputEncoding.value=ENCODINGS[Tu.texture.encoding],_setViewport(Tu,0,0,3*SIZE_MAX,2*SIZE_MAX),Pu.setRenderTarget(Tu),Pu.render(Lu,_flatCamera)},_applyPMREM:function(Cu){var Tu=this._renderer,Pu=Tu.autoClear;Tu.autoClear=!1;for(var Bu=1;Bu<TOTAL_LODS;Bu++){var Lu=Math.sqrt(_sigmas[Bu]*_sigmas[Bu]-_sigmas[Bu-1]*_sigmas[Bu-1]),Ru=_axisDirections[(Bu-1)%_axisDirections.length];this._blur(Cu,Bu-1,Bu,Lu,Ru)}Tu.autoClear=Pu},_blur:function(Cu,Tu,Pu,Bu,Lu){var Ru=this._pingPongRenderTarget;this._halfBlur(Cu,Ru,Tu,Pu,Bu,"latitudinal",Lu),this._halfBlur(Ru,Cu,Pu,Pu,Bu,"longitudinal",Lu)},_halfBlur:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou){var Du=this._renderer,ku=this._blurMaterial;Ru!=="latitudinal"&&Ru!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Fu=3,Nu=new Mesh(_lodPlanes[Bu],ku),Gu=ku.uniforms,zu=_sizeLods[Pu]-1,Hu=isFinite(Lu)?Math.PI/(2*zu):2*Math.PI/(2*MAX_SAMPLES-1),Wu=Lu/Hu,_h=isFinite(Lu)?1+Math.floor(Fu*Wu):MAX_SAMPLES;_h>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Lu}, is too large and will clip, as it requested ${_h} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Xc=[],ju=0,_c=0;_c<MAX_SAMPLES;++_c){var tp=_c/Wu,_f=Math.exp(-tp*tp/2);Xc.push(_f),_c==0?ju+=_f:_c<_h&&(ju+=2*_f)}for(var _c=0;_c<Xc.length;_c++)Xc[_c]=Xc[_c]/ju;Gu.envMap.value=Cu.texture,Gu.samples.value=_h,Gu.weights.value=Xc,Gu.latitudinal.value=Ru==="latitudinal",Ou&&(Gu.poleAxis.value=Ou),Gu.dTheta.value=Hu,Gu.mipInt.value=LOD_MAX-Pu,Gu.inputEncoding.value=ENCODINGS[Cu.texture.encoding],Gu.outputEncoding.value=ENCODINGS[Cu.texture.encoding];var ep=_sizeLods[Bu],tp=3*Math.max(0,SIZE_MAX-2*ep),op=(Bu===0?0:2*SIZE_MAX)+2*ep*(Bu>LOD_MAX-LOD_MIN?Bu-LOD_MAX+LOD_MIN:0);_setViewport(Tu,tp,op,3*ep,2*ep),Du.setRenderTarget(Tu),Du.render(Nu,_flatCamera)}};function _isLDR(Cu){return Cu===void 0||Cu.type!==UnsignedByteType?!1:Cu.encoding===LinearEncoding||Cu.encoding===sRGBEncoding||Cu.encoding===GammaEncoding}function _createPlanes(){for(var Cu=[],Tu=[],Pu=[],Bu=LOD_MAX,Lu=0;Lu<TOTAL_LODS;Lu++){var Ru=Math.pow(2,Bu);Tu.push(Ru);var Ou=1/Ru;Lu>LOD_MAX-LOD_MIN?Ou=EXTRA_LOD_SIGMA[Lu-LOD_MAX+LOD_MIN-1]:Lu==0&&(Ou=0),Pu.push(Ou);for(var Du=1/(Ru-1),ku=-Du/2,Fu=1+Du/2,Nu=[ku,ku,Fu,ku,Fu,Fu,ku,ku,Fu,Fu,ku,Fu],Gu=6,zu=6,Hu=3,Wu=2,_h=1,Xc=new Float32Array(Hu*zu*Gu),ju=new Float32Array(Wu*zu*Gu),_c=new Float32Array(_h*zu*Gu),_f=0;_f<Gu;_f++){var ep=_f%3*2/3-1,tp=_f>2?0:-1,op=[ep,tp,0,ep+2/3,tp,0,ep+2/3,tp+1,0,ep,tp,0,ep+2/3,tp+1,0,ep,tp+1,0];Xc.set(op,Hu*zu*_f),ju.set(Nu,Wu*zu*_f);var lp=[_f,_f,_f,_f,_f,_f];_c.set(lp,_h*zu*_f)}var up=new BufferGeometry;up.setAttribute("position",new BufferAttribute(Xc,Hu)),up.setAttribute("uv",new BufferAttribute(ju,Wu)),up.setAttribute("faceIndex",new BufferAttribute(_c,_h)),Cu.push(up),Bu>LOD_MIN&&Bu--}return{_lodPlanes:Cu,_sizeLods:Tu,_sigmas:Pu}}function _createRenderTarget(Cu){var Tu=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,Cu);return Tu.texture.mapping=CubeUVReflectionMapping,Tu.texture.name="PMREM.cubeUv",Tu.scissorTest=!0,Tu}function _setViewport(Cu,Tu,Pu,Bu,Lu){Cu.viewport.set(Tu,Pu,Bu,Lu),Cu.scissor.set(Tu,Pu,Bu,Lu)}function _getBlurShader(Cu){var Tu=new Float32Array(Cu),Pu=new Vector3(0,1,0),Bu=new RawShaderMaterial({defines:{n:Cu},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Tu},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Pu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Bu.type="SphericalGaussianBlur",Bu}function _getEquirectShader(){var Cu=new Vector2(1,1),Tu=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:Cu},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Tu.type="EquirectangularToCubeUV",Tu}function _getCubemapShader(){var Cu=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Cu.type="CubemapToCubeUV",Cu}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(Cu,Tu,Pu,Bu,Lu,Ru,Ou){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(Cu,Tu,Pu,Lu,Ru,Ou)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(Cu){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),Cu}function MultiMaterial(Cu){return Cu===void 0&&(Cu=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),Cu.isMultiMaterial=!0,Cu.materials=Cu,Cu.clone=function(){return Cu.slice()},Cu}function PointCloud(Cu,Tu){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(Cu,Tu)}function Particle(Cu){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(Cu)}function ParticleSystem(Cu,Tu){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(Cu,Tu)}function PointCloudMaterial(Cu){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(Cu)}function ParticleBasicMaterial(Cu){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(Cu)}function ParticleSystemMaterial(Cu){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(Cu)}function Vertex(Cu,Tu,Pu){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(Cu,Tu,Pu)}function DynamicBufferAttribute(Cu,Tu){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(Cu,Tu).setUsage(DynamicDrawUsage)}function Int8Attribute(Cu,Tu){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(Cu,Tu)}function Uint8Attribute(Cu,Tu){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(Cu,Tu)}function Uint8ClampedAttribute(Cu,Tu){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(Cu,Tu)}function Int16Attribute(Cu,Tu){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(Cu,Tu)}function Uint16Attribute(Cu,Tu){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(Cu,Tu)}function Int32Attribute(Cu,Tu){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(Cu,Tu)}function Uint32Attribute(Cu,Tu){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(Cu,Tu)}function Float32Attribute(Cu,Tu){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(Cu,Tu)}function Float64Attribute(Cu,Tu){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(Cu,Tu)}Curve.create=function(Cu,Tu){return console.log("THREE.Curve.create() has been deprecated"),Cu.prototype=Object.create(Curve.prototype),Cu.prototype.constructor=Cu,Cu.prototype.getPoint=Tu,Cu};Object.assign(CurvePath.prototype,{createPointsGeometry:function(Cu){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Tu=this.getPoints(Cu);return this.createGeometry(Tu)},createSpacedPointsGeometry:function(Cu){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Tu=this.getSpacedPoints(Cu);return this.createGeometry(Tu)},createGeometry:function(Cu){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var Tu=new Geometry,Pu=0,Bu=Cu.length;Pu<Bu;Pu++){var Lu=Cu[Pu];Tu.vertices.push(new Vector3(Lu.x,Lu.y,Lu.z||0))}return Tu}});Object.assign(Path.prototype,{fromPoints:function(Cu){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(Cu)}});function ClosedSplineCurve3(Cu){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,Cu),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(Cu){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,Cu),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(Cu){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,Cu),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(Cu){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(Cu)}function BoundingBoxHelper(Cu,Tu){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(Cu,Tu)}function EdgesHelper(Cu,Tu){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(Cu.geometry),new LineBasicMaterial({color:Tu!==void 0?Tu:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(Cu,Tu){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(Cu.geometry),new LineBasicMaterial({color:Tu!==void 0?Tu:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(Cu){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(Cu)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(Cu){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(Cu)}function BinaryTextureLoader(Cu){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(Cu)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(Cu){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(Cu)}});Object.assign(Box2.prototype,{center:function(Cu){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(Cu)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Cu){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Cu)},size:function(Cu){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(Cu)}});Object.assign(Box3.prototype,{center:function(Cu){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(Cu)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Cu){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Cu)},isIntersectionSphere:function(Cu){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Cu)},size:function(Cu){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(Cu)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(Cu){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(Cu)};Line3.prototype.center=function(Cu){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(Cu)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(Cu){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(Cu)},nextPowerOfTwo:function(Cu){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(Cu)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(Cu,Tu){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(Cu,Tu)},multiplyVector3:function(Cu){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),Cu.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(Cu){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),Cu.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(Cu){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(Cu)},flattenToArrayOffset:function(Cu,Tu){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(Cu,Tu)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(Cu){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(Cu)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(Cu){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),Cu.applyMatrix4(this)},multiplyVector4:function(Cu){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),Cu.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(Cu){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),Cu.transformDirection(this)},crossVector:function(Cu){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),Cu.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(Cu){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),Cu.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(Cu,Tu,Pu,Bu,Lu,Ru){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(Cu,Tu,Bu,Pu,Lu,Ru)}});Plane.prototype.isIntersectionLine=function(Cu){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(Cu)};Quaternion.prototype.multiplyVector3=function(Cu){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),Cu.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(Cu){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Cu)},isIntersectionPlane:function(Cu){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(Cu)},isIntersectionSphere:function(Cu){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Cu)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(Cu,Tu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(Cu,Tu)},midpoint:function(Cu){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(Cu)},normal:function(Cu){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(Cu)},plane:function(Cu){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(Cu)}});Object.assign(Triangle,{barycoordFromPoint:function(Cu,Tu,Pu,Bu,Lu){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(Cu,Tu,Pu,Bu,Lu)},normal:function(Cu,Tu,Pu,Bu){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(Cu,Tu,Pu,Bu)}});Object.assign(Shape.prototype,{extractAllPoints:function(Cu){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(Cu)},extrude:function(Cu){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,Cu)},makeGeometry:function(Cu){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,Cu)}});Object.assign(Vector2.prototype,{fromAttribute:function(Cu,Tu,Pu){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Cu,Tu,Pu)},distanceToManhattan:function(Cu){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(Cu)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(Cu){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(Cu)},getScaleFromMatrix:function(Cu){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(Cu)},getColumnFromMatrix:function(Cu,Tu){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(Tu,Cu)},applyProjection:function(Cu){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(Cu)},fromAttribute:function(Cu,Tu,Pu){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Cu,Tu,Pu)},distanceToManhattan:function(Cu){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(Cu)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(Cu,Tu,Pu){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Cu,Tu,Pu)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(Cu){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(Cu)}});Object.assign(Object3D.prototype,{getChildByName:function(Cu){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(Cu)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(Cu,Tu){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(Tu,Cu)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(Cu){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(Cu)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(Cu){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=Cu}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(Cu){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=Cu}});PerspectiveCamera.prototype.setLens=function(Cu,Tu){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),Tu!==void 0&&(this.filmGauge=Tu),this.setFocalLength(Cu)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(Cu){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=Cu}},shadowCameraLeft:{set:function(Cu){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=Cu}},shadowCameraRight:{set:function(Cu){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=Cu}},shadowCameraTop:{set:function(Cu){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=Cu}},shadowCameraBottom:{set:function(Cu){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=Cu}},shadowCameraNear:{set:function(Cu){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=Cu}},shadowCameraFar:{set:function(Cu){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=Cu}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(Cu){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=Cu}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(Cu){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=Cu}},shadowMapHeight:{set:function(Cu){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=Cu}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(Cu){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(Cu===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(Cu){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(Cu)},addAttribute:function(Cu,Tu){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(Tu&&Tu.isBufferAttribute)&&!(Tu&&Tu.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(Cu,new BufferAttribute(arguments[1],arguments[2]))):Cu==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(Tu),this):this.setAttribute(Cu,Tu)},addDrawCall:function(Cu,Tu,Pu){Pu!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(Cu,Tu)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(Cu){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(Cu)},applyMatrix:function(Cu){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(Cu)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(Cu){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=Cu}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(Cu){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=Cu}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(Cu){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(Cu)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(Cu){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(Cu===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(Cu){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Cu===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(Cu){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=Cu}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(Cu){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=Cu}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(Cu,Tu,Pu,Bu){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(Cu),this.clear(Tu,Pu,Bu)},animate:function(Cu){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(Cu)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(Cu){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(Cu)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(Cu){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=Cu}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(Cu){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=Cu}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(Cu){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=Cu===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(Cu,Tu,Pu){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(Cu,Pu)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=Cu}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=Cu}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=Cu}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=Cu}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=Cu}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=Cu}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=Cu}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=Cu}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=Cu}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(Cu){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=Cu}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(Cu){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var Tu=this,Pu=new AudioLoader;return Pu.load(Cu,function(Bu){Tu.setBuffer(Bu)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(Cu,Tu){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(Cu,Tu)};var GeometryUtils={merge:function(Cu,Tu,Pu){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Bu;Tu.isMesh&&(Tu.matrixAutoUpdate&&Tu.updateMatrix(),Bu=Tu.matrix,Tu=Tu.geometry),Cu.merge(Tu,Bu,Pu)},center:function(Cu){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),Cu.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(Cu,Tu,Pu,Bu){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Lu=new TextureLoader;Lu.setCrossOrigin(this.crossOrigin);var Ru=Lu.load(Cu,Pu,void 0,Bu);return Tu&&(Ru.mapping=Tu),Ru};ImageUtils.loadTextureCube=function(Cu,Tu,Pu,Bu){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Lu=new CubeTextureLoader;Lu.setCrossOrigin(this.crossOrigin);var Ru=Lu.load(Cu,Pu,void 0,Bu);return Tu&&(Ru.mapping=Tu),Ru};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var L$3=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(L$3),tslib={exports:{}};(function(Cu){var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c,_f,ep,tp,op,lp,up,hp;(function(np){var rp=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};np(ip(rp,ip(Cu.exports)));function ip(ap,sp){return ap!==rp&&(typeof Object.create=="function"?Object.defineProperty(ap,"__esModule",{value:!0}):ap.__esModule=!0),function(cp,dp){return ap[cp]=sp?sp(cp,dp):dp}}})(function(np){var rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var cp in sp)Object.prototype.hasOwnProperty.call(sp,cp)&&(ap[cp]=sp[cp])};Tu=function(ap,sp){if(typeof sp!="function"&&sp!==null)throw new TypeError("Class extends value "+String(sp)+" is not a constructor or null");rp(ap,sp);function cp(){this.constructor=ap}ap.prototype=sp===null?Object.create(sp):(cp.prototype=sp.prototype,new cp)},Pu=Object.assign||function(ap){for(var sp,cp=1,dp=arguments.length;cp<dp;cp++){sp=arguments[cp];for(var fp in sp)Object.prototype.hasOwnProperty.call(sp,fp)&&(ap[fp]=sp[fp])}return ap},Bu=function(ap,sp){var cp={};for(var dp in ap)Object.prototype.hasOwnProperty.call(ap,dp)&&sp.indexOf(dp)<0&&(cp[dp]=ap[dp]);if(ap!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fp=0,dp=Object.getOwnPropertySymbols(ap);fp<dp.length;fp++)sp.indexOf(dp[fp])<0&&Object.prototype.propertyIsEnumerable.call(ap,dp[fp])&&(cp[dp[fp]]=ap[dp[fp]]);return cp},Lu=function(ap,sp,cp,dp){var fp=arguments.length,vp=fp<3?sp:dp===null?dp=Object.getOwnPropertyDescriptor(sp,cp):dp,_p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vp=Reflect.decorate(ap,sp,cp,dp);else for(var wp=ap.length-1;wp>=0;wp--)(_p=ap[wp])&&(vp=(fp<3?_p(vp):fp>3?_p(sp,cp,vp):_p(sp,cp))||vp);return fp>3&&vp&&Object.defineProperty(sp,cp,vp),vp},Ru=function(ap,sp){return function(cp,dp){sp(cp,dp,ap)}},Ou=function(ap,sp){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ap,sp)},Du=function(ap,sp,cp,dp){function fp(vp){return vp instanceof cp?vp:new cp(function(_p){_p(vp)})}return new(cp||(cp=Promise))(function(vp,_p){function wp(Wp){try{Pp(dp.next(Wp))}catch(Rp){_p(Rp)}}function Dp(Wp){try{Pp(dp.throw(Wp))}catch(Rp){_p(Rp)}}function Pp(Wp){Wp.done?vp(Wp.value):fp(Wp.value).then(wp,Dp)}Pp((dp=dp.apply(ap,sp||[])).next())})},ku=function(ap,sp){var cp={label:0,sent:function(){if(vp[0]&1)throw vp[1];return vp[1]},trys:[],ops:[]},dp,fp,vp,_p;return _p={next:wp(0),throw:wp(1),return:wp(2)},typeof Symbol=="function"&&(_p[Symbol.iterator]=function(){return this}),_p;function wp(Pp){return function(Wp){return Dp([Pp,Wp])}}function Dp(Pp){if(dp)throw new TypeError("Generator is already executing.");for(;cp;)try{if(dp=1,fp&&(vp=Pp[0]&2?fp.return:Pp[0]?fp.throw||((vp=fp.return)&&vp.call(fp),0):fp.next)&&!(vp=vp.call(fp,Pp[1])).done)return vp;switch(fp=0,vp&&(Pp=[Pp[0]&2,vp.value]),Pp[0]){case 0:case 1:vp=Pp;break;case 4:return cp.label++,{value:Pp[1],done:!1};case 5:cp.label++,fp=Pp[1],Pp=[0];continue;case 7:Pp=cp.ops.pop(),cp.trys.pop();continue;default:if(vp=cp.trys,!(vp=vp.length>0&&vp[vp.length-1])&&(Pp[0]===6||Pp[0]===2)){cp=0;continue}if(Pp[0]===3&&(!vp||Pp[1]>vp[0]&&Pp[1]<vp[3])){cp.label=Pp[1];break}if(Pp[0]===6&&cp.label<vp[1]){cp.label=vp[1],vp=Pp;break}if(vp&&cp.label<vp[2]){cp.label=vp[2],cp.ops.push(Pp);break}vp[2]&&cp.ops.pop(),cp.trys.pop();continue}Pp=sp.call(ap,cp)}catch(Wp){Pp=[6,Wp],fp=0}finally{dp=vp=0}if(Pp[0]&5)throw Pp[1];return{value:Pp[0]?Pp[1]:void 0,done:!0}}},Fu=function(ap,sp){for(var cp in ap)cp!=="default"&&!Object.prototype.hasOwnProperty.call(sp,cp)&&hp(sp,ap,cp)},hp=Object.create?function(ap,sp,cp,dp){dp===void 0&&(dp=cp);var fp=Object.getOwnPropertyDescriptor(sp,cp);(!fp||("get"in fp?!sp.__esModule:fp.writable||fp.configurable))&&(fp={enumerable:!0,get:function(){return sp[cp]}}),Object.defineProperty(ap,dp,fp)}:function(ap,sp,cp,dp){dp===void 0&&(dp=cp),ap[dp]=sp[cp]},Nu=function(ap){var sp=typeof Symbol=="function"&&Symbol.iterator,cp=sp&&ap[sp],dp=0;if(cp)return cp.call(ap);if(ap&&typeof ap.length=="number")return{next:function(){return ap&&dp>=ap.length&&(ap=void 0),{value:ap&&ap[dp++],done:!ap}}};throw new TypeError(sp?"Object is not iterable.":"Symbol.iterator is not defined.")},Gu=function(ap,sp){var cp=typeof Symbol=="function"&&ap[Symbol.iterator];if(!cp)return ap;var dp=cp.call(ap),fp,vp=[],_p;try{for(;(sp===void 0||sp-- >0)&&!(fp=dp.next()).done;)vp.push(fp.value)}catch(wp){_p={error:wp}}finally{try{fp&&!fp.done&&(cp=dp.return)&&cp.call(dp)}finally{if(_p)throw _p.error}}return vp},zu=function(){for(var ap=[],sp=0;sp<arguments.length;sp++)ap=ap.concat(Gu(arguments[sp]));return ap},Hu=function(){for(var ap=0,sp=0,cp=arguments.length;sp<cp;sp++)ap+=arguments[sp].length;for(var dp=Array(ap),fp=0,sp=0;sp<cp;sp++)for(var vp=arguments[sp],_p=0,wp=vp.length;_p<wp;_p++,fp++)dp[fp]=vp[_p];return dp},Wu=function(ap,sp,cp){if(cp||arguments.length===2)for(var dp=0,fp=sp.length,vp;dp<fp;dp++)(vp||!(dp in sp))&&(vp||(vp=Array.prototype.slice.call(sp,0,dp)),vp[dp]=sp[dp]);return ap.concat(vp||Array.prototype.slice.call(sp))},_h=function(ap){return this instanceof _h?(this.v=ap,this):new _h(ap)},Xc=function(ap,sp,cp){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dp=cp.apply(ap,sp||[]),fp,vp=[];return fp={},_p("next"),_p("throw"),_p("return"),fp[Symbol.asyncIterator]=function(){return this},fp;function _p(Gp){dp[Gp]&&(fp[Gp]=function(kp){return new Promise(function(gp,mp){vp.push([Gp,kp,gp,mp])>1||wp(Gp,kp)})})}function wp(Gp,kp){try{Dp(dp[Gp](kp))}catch(gp){Rp(vp[0][3],gp)}}function Dp(Gp){Gp.value instanceof _h?Promise.resolve(Gp.value.v).then(Pp,Wp):Rp(vp[0][2],Gp)}function Pp(Gp){wp("next",Gp)}function Wp(Gp){wp("throw",Gp)}function Rp(Gp,kp){Gp(kp),vp.shift(),vp.length&&wp(vp[0][0],vp[0][1])}},ju=function(ap){var sp,cp;return sp={},dp("next"),dp("throw",function(fp){throw fp}),dp("return"),sp[Symbol.iterator]=function(){return this},sp;function dp(fp,vp){sp[fp]=ap[fp]?function(_p){return(cp=!cp)?{value:_h(ap[fp](_p)),done:fp==="return"}:vp?vp(_p):_p}:vp}},_c=function(ap){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var sp=ap[Symbol.asyncIterator],cp;return sp?sp.call(ap):(ap=typeof Nu=="function"?Nu(ap):ap[Symbol.iterator](),cp={},dp("next"),dp("throw"),dp("return"),cp[Symbol.asyncIterator]=function(){return this},cp);function dp(vp){cp[vp]=ap[vp]&&function(_p){return new Promise(function(wp,Dp){_p=ap[vp](_p),fp(wp,Dp,_p.done,_p.value)})}}function fp(vp,_p,wp,Dp){Promise.resolve(Dp).then(function(Pp){vp({value:Pp,done:wp})},_p)}},_f=function(ap,sp){return Object.defineProperty?Object.defineProperty(ap,"raw",{value:sp}):ap.raw=sp,ap};var ip=Object.create?function(ap,sp){Object.defineProperty(ap,"default",{enumerable:!0,value:sp})}:function(ap,sp){ap.default=sp};ep=function(ap){if(ap&&ap.__esModule)return ap;var sp={};if(ap!=null)for(var cp in ap)cp!=="default"&&Object.prototype.hasOwnProperty.call(ap,cp)&&hp(sp,ap,cp);return ip(sp,ap),sp},tp=function(ap){return ap&&ap.__esModule?ap:{default:ap}},op=function(ap,sp,cp,dp){if(cp==="a"&&!dp)throw new TypeError("Private accessor was defined without a getter");if(typeof sp=="function"?ap!==sp||!dp:!sp.has(ap))throw new TypeError("Cannot read private member from an object whose class did not declare it");return cp==="m"?dp:cp==="a"?dp.call(ap):dp?dp.value:sp.get(ap)},lp=function(ap,sp,cp,dp,fp){if(dp==="m")throw new TypeError("Private method is not writable");if(dp==="a"&&!fp)throw new TypeError("Private accessor was defined without a setter");if(typeof sp=="function"?ap!==sp||!fp:!sp.has(ap))throw new TypeError("Cannot write private member to an object whose class did not declare it");return dp==="a"?fp.call(ap,cp):fp?fp.value=cp:sp.set(ap,cp),cp},up=function(ap,sp){if(sp===null||typeof sp!="object"&&typeof sp!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ap=="function"?sp===ap:ap.has(sp)},np("__extends",Tu),np("__assign",Pu),np("__rest",Bu),np("__decorate",Lu),np("__param",Ru),np("__metadata",Ou),np("__awaiter",Du),np("__generator",ku),np("__exportStar",Fu),np("__createBinding",hp),np("__values",Nu),np("__read",Gu),np("__spread",zu),np("__spreadArrays",Hu),np("__spreadArray",Wu),np("__await",_h),np("__asyncGenerator",Xc),np("__asyncDelegator",ju),np("__asyncValues",_c),np("__makeTemplateObject",_f),np("__importStar",ep),np("__importDefault",tp),np("__classPrivateFieldGet",op),np("__classPrivateFieldSet",lp),np("__classPrivateFieldIn",up)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(Cu,Tu){for(var Pu=new Array(arguments.length-1),Bu=0,Lu=2,Ru=!0;Lu<arguments.length;)Pu[Bu++]=arguments[Lu++];return new Promise(function(Du,ku){Pu[Bu]=function(Nu){if(Ru)if(Ru=!1,Nu)ku(Nu);else{for(var Gu=new Array(arguments.length-1),zu=0;zu<Gu.length;)Gu[zu++]=arguments[zu];Du.apply(null,Gu)}};try{Cu.apply(Tu||null,Pu)}catch(Fu){Ru&&(Ru=!1,ku(Fu))}})}var base64$1={};(function(Cu){var Tu=Cu;Tu.length=function(Du){var ku=Du.length;if(!ku)return 0;for(var Fu=0;--ku%4>1&&Du.charAt(ku)==="=";)++Fu;return Math.ceil(Du.length*3)/4-Fu};for(var Pu=new Array(64),Bu=new Array(123),Lu=0;Lu<64;)Bu[Pu[Lu]=Lu<26?Lu+65:Lu<52?Lu+71:Lu<62?Lu-4:Lu-59|43]=Lu++;Tu.encode=function(Du,ku,Fu){for(var Nu=null,Gu=[],zu=0,Hu=0,Wu;ku<Fu;){var _h=Du[ku++];switch(Hu){case 0:Gu[zu++]=Pu[_h>>2],Wu=(_h&3)<<4,Hu=1;break;case 1:Gu[zu++]=Pu[Wu|_h>>4],Wu=(_h&15)<<2,Hu=2;break;case 2:Gu[zu++]=Pu[Wu|_h>>6],Gu[zu++]=Pu[_h&63],Hu=0;break}zu>8191&&((Nu||(Nu=[])).push(String.fromCharCode.apply(String,Gu)),zu=0)}return Hu&&(Gu[zu++]=Pu[Wu],Gu[zu++]=61,Hu===1&&(Gu[zu++]=61)),Nu?(zu&&Nu.push(String.fromCharCode.apply(String,Gu.slice(0,zu))),Nu.join("")):String.fromCharCode.apply(String,Gu.slice(0,zu))};var Ru="invalid encoding";Tu.decode=function(Du,ku,Fu){for(var Nu=Fu,Gu=0,zu,Hu=0;Hu<Du.length;){var Wu=Du.charCodeAt(Hu++);if(Wu===61&&Gu>1)break;if((Wu=Bu[Wu])===void 0)throw Error(Ru);switch(Gu){case 0:zu=Wu,Gu=1;break;case 1:ku[Fu++]=zu<<2|(Wu&48)>>4,zu=Wu,Gu=2;break;case 2:ku[Fu++]=(zu&15)<<4|(Wu&60)>>2,zu=Wu,Gu=3;break;case 3:ku[Fu++]=(zu&3)<<6|Wu,Gu=0;break}}if(Gu===1)throw Error(Ru);return Fu-Nu},Tu.test=function(Du){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Du)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(Tu,Pu,Bu){return(this._listeners[Tu]||(this._listeners[Tu]=[])).push({fn:Pu,ctx:Bu||this}),this};EventEmitter.prototype.off=function(Tu,Pu){if(Tu===void 0)this._listeners={};else if(Pu===void 0)this._listeners[Tu]=[];else for(var Bu=this._listeners[Tu],Lu=0;Lu<Bu.length;)Bu[Lu].fn===Pu?Bu.splice(Lu,1):++Lu;return this};EventEmitter.prototype.emit=function(Tu){var Pu=this._listeners[Tu];if(Pu){for(var Bu=[],Lu=1;Lu<arguments.length;)Bu.push(arguments[Lu++]);for(Lu=0;Lu<Pu.length;)Pu[Lu].fn.apply(Pu[Lu++].ctx,Bu)}return this};var float=factory(factory);function factory(Cu){return typeof Float32Array!="undefined"?function(){var Tu=new Float32Array([-0]),Pu=new Uint8Array(Tu.buffer),Bu=Pu[3]===128;function Lu(ku,Fu,Nu){Tu[0]=ku,Fu[Nu]=Pu[0],Fu[Nu+1]=Pu[1],Fu[Nu+2]=Pu[2],Fu[Nu+3]=Pu[3]}function Ru(ku,Fu,Nu){Tu[0]=ku,Fu[Nu]=Pu[3],Fu[Nu+1]=Pu[2],Fu[Nu+2]=Pu[1],Fu[Nu+3]=Pu[0]}Cu.writeFloatLE=Bu?Lu:Ru,Cu.writeFloatBE=Bu?Ru:Lu;function Ou(ku,Fu){return Pu[0]=ku[Fu],Pu[1]=ku[Fu+1],Pu[2]=ku[Fu+2],Pu[3]=ku[Fu+3],Tu[0]}function Du(ku,Fu){return Pu[3]=ku[Fu],Pu[2]=ku[Fu+1],Pu[1]=ku[Fu+2],Pu[0]=ku[Fu+3],Tu[0]}Cu.readFloatLE=Bu?Ou:Du,Cu.readFloatBE=Bu?Du:Ou}():function(){function Tu(Bu,Lu,Ru,Ou){var Du=Lu<0?1:0;if(Du&&(Lu=-Lu),Lu===0)Bu(1/Lu>0?0:2147483648,Ru,Ou);else if(isNaN(Lu))Bu(2143289344,Ru,Ou);else if(Lu>34028234663852886e22)Bu((Du<<31|2139095040)>>>0,Ru,Ou);else if(Lu<11754943508222875e-54)Bu((Du<<31|Math.round(Lu/1401298464324817e-60))>>>0,Ru,Ou);else{var ku=Math.floor(Math.log(Lu)/Math.LN2),Fu=Math.round(Lu*Math.pow(2,-ku)*8388608)&8388607;Bu((Du<<31|ku+127<<23|Fu)>>>0,Ru,Ou)}}Cu.writeFloatLE=Tu.bind(null,writeUintLE),Cu.writeFloatBE=Tu.bind(null,writeUintBE);function Pu(Bu,Lu,Ru){var Ou=Bu(Lu,Ru),Du=(Ou>>31)*2+1,ku=Ou>>>23&255,Fu=Ou&8388607;return ku===255?Fu?NaN:Du*(1/0):ku===0?Du*1401298464324817e-60*Fu:Du*Math.pow(2,ku-150)*(Fu+8388608)}Cu.readFloatLE=Pu.bind(null,readUintLE),Cu.readFloatBE=Pu.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var Tu=new Float64Array([-0]),Pu=new Uint8Array(Tu.buffer),Bu=Pu[7]===128;function Lu(ku,Fu,Nu){Tu[0]=ku,Fu[Nu]=Pu[0],Fu[Nu+1]=Pu[1],Fu[Nu+2]=Pu[2],Fu[Nu+3]=Pu[3],Fu[Nu+4]=Pu[4],Fu[Nu+5]=Pu[5],Fu[Nu+6]=Pu[6],Fu[Nu+7]=Pu[7]}function Ru(ku,Fu,Nu){Tu[0]=ku,Fu[Nu]=Pu[7],Fu[Nu+1]=Pu[6],Fu[Nu+2]=Pu[5],Fu[Nu+3]=Pu[4],Fu[Nu+4]=Pu[3],Fu[Nu+5]=Pu[2],Fu[Nu+6]=Pu[1],Fu[Nu+7]=Pu[0]}Cu.writeDoubleLE=Bu?Lu:Ru,Cu.writeDoubleBE=Bu?Ru:Lu;function Ou(ku,Fu){return Pu[0]=ku[Fu],Pu[1]=ku[Fu+1],Pu[2]=ku[Fu+2],Pu[3]=ku[Fu+3],Pu[4]=ku[Fu+4],Pu[5]=ku[Fu+5],Pu[6]=ku[Fu+6],Pu[7]=ku[Fu+7],Tu[0]}function Du(ku,Fu){return Pu[7]=ku[Fu],Pu[6]=ku[Fu+1],Pu[5]=ku[Fu+2],Pu[4]=ku[Fu+3],Pu[3]=ku[Fu+4],Pu[2]=ku[Fu+5],Pu[1]=ku[Fu+6],Pu[0]=ku[Fu+7],Tu[0]}Cu.readDoubleLE=Bu?Ou:Du,Cu.readDoubleBE=Bu?Du:Ou}():function(){function Tu(Bu,Lu,Ru,Ou,Du,ku){var Fu=Ou<0?1:0;if(Fu&&(Ou=-Ou),Ou===0)Bu(0,Du,ku+Lu),Bu(1/Ou>0?0:2147483648,Du,ku+Ru);else if(isNaN(Ou))Bu(0,Du,ku+Lu),Bu(2146959360,Du,ku+Ru);else if(Ou>17976931348623157e292)Bu(0,Du,ku+Lu),Bu((Fu<<31|2146435072)>>>0,Du,ku+Ru);else{var Nu;if(Ou<22250738585072014e-324)Nu=Ou/5e-324,Bu(Nu>>>0,Du,ku+Lu),Bu((Fu<<31|Nu/4294967296)>>>0,Du,ku+Ru);else{var Gu=Math.floor(Math.log(Ou)/Math.LN2);Gu===1024&&(Gu=1023),Nu=Ou*Math.pow(2,-Gu),Bu(Nu*4503599627370496>>>0,Du,ku+Lu),Bu((Fu<<31|Gu+1023<<20|Nu*1048576&1048575)>>>0,Du,ku+Ru)}}}Cu.writeDoubleLE=Tu.bind(null,writeUintLE,0,4),Cu.writeDoubleBE=Tu.bind(null,writeUintBE,4,0);function Pu(Bu,Lu,Ru,Ou,Du){var ku=Bu(Ou,Du+Lu),Fu=Bu(Ou,Du+Ru),Nu=(Fu>>31)*2+1,Gu=Fu>>>20&2047,zu=4294967296*(Fu&1048575)+ku;return Gu===2047?zu?NaN:Nu*(1/0):Gu===0?Nu*5e-324*zu:Nu*Math.pow(2,Gu-1075)*(zu+4503599627370496)}Cu.readDoubleLE=Pu.bind(null,readUintLE,0,4),Cu.readDoubleBE=Pu.bind(null,readUintBE,4,0)}(),Cu}function writeUintLE(Cu,Tu,Pu){Tu[Pu]=Cu&255,Tu[Pu+1]=Cu>>>8&255,Tu[Pu+2]=Cu>>>16&255,Tu[Pu+3]=Cu>>>24}function writeUintBE(Cu,Tu,Pu){Tu[Pu]=Cu>>>24,Tu[Pu+1]=Cu>>>16&255,Tu[Pu+2]=Cu>>>8&255,Tu[Pu+3]=Cu&255}function readUintLE(Cu,Tu){return(Cu[Tu]|Cu[Tu+1]<<8|Cu[Tu+2]<<16|Cu[Tu+3]<<24)>>>0}function readUintBE(Cu,Tu){return(Cu[Tu]<<24|Cu[Tu+1]<<16|Cu[Tu+2]<<8|Cu[Tu+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Cu){}return null}var utf8$2={};(function(Cu){var Tu=Cu;Tu.length=function(Bu){for(var Lu=0,Ru=0,Ou=0;Ou<Bu.length;++Ou)Ru=Bu.charCodeAt(Ou),Ru<128?Lu+=1:Ru<2048?Lu+=2:(Ru&64512)===55296&&(Bu.charCodeAt(Ou+1)&64512)===56320?(++Ou,Lu+=4):Lu+=3;return Lu},Tu.read=function(Bu,Lu,Ru){var Ou=Ru-Lu;if(Ou<1)return"";for(var Du=null,ku=[],Fu=0,Nu;Lu<Ru;)Nu=Bu[Lu++],Nu<128?ku[Fu++]=Nu:Nu>191&&Nu<224?ku[Fu++]=(Nu&31)<<6|Bu[Lu++]&63:Nu>239&&Nu<365?(Nu=((Nu&7)<<18|(Bu[Lu++]&63)<<12|(Bu[Lu++]&63)<<6|Bu[Lu++]&63)-65536,ku[Fu++]=55296+(Nu>>10),ku[Fu++]=56320+(Nu&1023)):ku[Fu++]=(Nu&15)<<12|(Bu[Lu++]&63)<<6|Bu[Lu++]&63,Fu>8191&&((Du||(Du=[])).push(String.fromCharCode.apply(String,ku)),Fu=0);return Du?(Fu&&Du.push(String.fromCharCode.apply(String,ku.slice(0,Fu))),Du.join("")):String.fromCharCode.apply(String,ku.slice(0,Fu))},Tu.write=function(Bu,Lu,Ru){for(var Ou=Ru,Du,ku,Fu=0;Fu<Bu.length;++Fu)Du=Bu.charCodeAt(Fu),Du<128?Lu[Ru++]=Du:Du<2048?(Lu[Ru++]=Du>>6|192,Lu[Ru++]=Du&63|128):(Du&64512)===55296&&((ku=Bu.charCodeAt(Fu+1))&64512)===56320?(Du=65536+((Du&1023)<<10)+(ku&1023),++Fu,Lu[Ru++]=Du>>18|240,Lu[Ru++]=Du>>12&63|128,Lu[Ru++]=Du>>6&63|128,Lu[Ru++]=Du&63|128):(Lu[Ru++]=Du>>12|224,Lu[Ru++]=Du>>6&63|128,Lu[Ru++]=Du&63|128);return Ru-Ou}})(utf8$2);var pool_1=pool;function pool(Cu,Tu,Pu){var Bu=Pu||8192,Lu=Bu>>>1,Ru=null,Ou=Bu;return function(ku){if(ku<1||ku>Lu)return Cu(ku);Ou+ku>Bu&&(Ru=Cu(Bu),Ou=0);var Fu=Tu.call(Ru,Ou,Ou+=ku);return Ou&7&&(Ou=(Ou|7)+1),Fu}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(Cu,Tu){this.lo=Cu>>>0,this.hi=Tu>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function Cu(Tu){if(Tu===0)return zero;var Pu=Tu<0;Pu&&(Tu=-Tu);var Bu=Tu>>>0,Lu=(Tu-Bu)/4294967296>>>0;return Pu&&(Lu=~Lu>>>0,Bu=~Bu>>>0,++Bu>4294967295&&(Bu=0,++Lu>4294967295&&(Lu=0))),new LongBits$2(Bu,Lu)};LongBits$2.from=function Cu(Tu){if(typeof Tu=="number")return LongBits$2.fromNumber(Tu);if(util$5.isString(Tu))if(util$5.Long)Tu=util$5.Long.fromString(Tu);else return LongBits$2.fromNumber(parseInt(Tu,10));return Tu.low||Tu.high?new LongBits$2(Tu.low>>>0,Tu.high>>>0):zero};LongBits$2.prototype.toNumber=function Cu(Tu){if(!Tu&&this.hi>>>31){var Pu=~this.lo+1>>>0,Bu=~this.hi>>>0;return Pu||(Bu=Bu+1>>>0),-(Pu+Bu*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function Cu(Tu){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(Tu)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(Tu)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function Cu(Tu){return Tu===zeroHash?zero:new LongBits$2((charCodeAt.call(Tu,0)|charCodeAt.call(Tu,1)<<8|charCodeAt.call(Tu,2)<<16|charCodeAt.call(Tu,3)<<24)>>>0,(charCodeAt.call(Tu,4)|charCodeAt.call(Tu,5)<<8|charCodeAt.call(Tu,6)<<16|charCodeAt.call(Tu,7)<<24)>>>0)};LongBits$2.prototype.toHash=function Cu(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function Cu(){var Tu=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Tu)>>>0,this.lo=(this.lo<<1^Tu)>>>0,this};LongBits$2.prototype.zzDecode=function Cu(){var Tu=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^Tu)>>>0,this.hi=(this.hi>>>1^Tu)>>>0,this};LongBits$2.prototype.length=function Cu(){var Tu=this.lo,Pu=(this.lo>>>28|this.hi<<4)>>>0,Bu=this.hi>>>24;return Bu===0?Pu===0?Tu<16384?Tu<128?1:2:Tu<2097152?3:4:Pu<16384?Pu<128?5:6:Pu<2097152?7:8:Bu<128?9:10};(function(Cu){var Tu=Cu;Tu.asPromise=aspromise,Tu.base64=base64$1,Tu.EventEmitter=eventemitter,Tu.float=float,Tu.inquire=inquire_1,Tu.utf8=utf8$2,Tu.pool=pool_1,Tu.LongBits=longbits,Tu.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),Tu.global=Tu.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,Tu.emptyArray=Object.freeze?Object.freeze([]):[],Tu.emptyObject=Object.freeze?Object.freeze({}):{},Tu.isInteger=Number.isInteger||function(Ru){return typeof Ru=="number"&&isFinite(Ru)&&Math.floor(Ru)===Ru},Tu.isString=function(Ru){return typeof Ru=="string"||Ru instanceof String},Tu.isObject=function(Ru){return Ru&&typeof Ru=="object"},Tu.isset=Tu.isSet=function(Ru,Ou){var Du=Ru[Ou];return Du!=null&&Ru.hasOwnProperty(Ou)?typeof Du!="object"||(Array.isArray(Du)?Du.length:Object.keys(Du).length)>0:!1},Tu.Buffer=function(){try{var Lu=Tu.inquire("buffer").Buffer;return Lu.prototype.utf8Write?Lu:null}catch{return null}}(),Tu._Buffer_from=null,Tu._Buffer_allocUnsafe=null,Tu.newBuffer=function(Ru){return typeof Ru=="number"?Tu.Buffer?Tu._Buffer_allocUnsafe(Ru):new Tu.Array(Ru):Tu.Buffer?Tu._Buffer_from(Ru):typeof Uint8Array=="undefined"?Ru:new Uint8Array(Ru)},Tu.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,Tu.Long=Tu.global.dcodeIO&&Tu.global.dcodeIO.Long||Tu.global.Long||Tu.inquire("long"),Tu.key2Re=/^true|false|0|1$/,Tu.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Tu.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Tu.longToHash=function(Ru){return Ru?Tu.LongBits.from(Ru).toHash():Tu.LongBits.zeroHash},Tu.longFromHash=function(Ru,Ou){var Du=Tu.LongBits.fromHash(Ru);return Tu.Long?Tu.Long.fromBits(Du.lo,Du.hi,Ou):Du.toNumber(Boolean(Ou))};function Pu(Lu,Ru,Ou){for(var Du=Object.keys(Ru),ku=0;ku<Du.length;++ku)(Lu[Du[ku]]===void 0||!Ou)&&(Lu[Du[ku]]=Ru[Du[ku]]);return Lu}Tu.merge=Pu,Tu.lcFirst=function(Ru){return Ru.charAt(0).toLowerCase()+Ru.substring(1)};function Bu(Lu){function Ru(Ou,Du){if(!(this instanceof Ru))return new Ru(Ou,Du);Object.defineProperty(this,"message",{get:function(){return Ou}}),Error.captureStackTrace?Error.captureStackTrace(this,Ru):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Du&&Pu(this,Du)}return(Ru.prototype=Object.create(Error.prototype)).constructor=Ru,Object.defineProperty(Ru.prototype,"name",{get:function(){return Lu}}),Ru.prototype.toString=function(){return this.name+": "+this.message},Ru}Tu.newError=Bu,Tu.ProtocolError=Bu("ProtocolError"),Tu.oneOfGetter=function(Ru){for(var Ou={},Du=0;Du<Ru.length;++Du)Ou[Ru[Du]]=1;return function(){for(var ku=Object.keys(this),Fu=ku.length-1;Fu>-1;--Fu)if(Ou[ku[Fu]]===1&&this[ku[Fu]]!==void 0&&this[ku[Fu]]!==null)return ku[Fu]}},Tu.oneOfSetter=function(Ru){return function(Ou){for(var Du=0;Du<Ru.length;++Du)Ru[Du]!==Ou&&delete this[Ru[Du]]}},Tu.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Tu._configure=function(){var Lu=Tu.Buffer;if(!Lu){Tu._Buffer_from=Tu._Buffer_allocUnsafe=null;return}Tu._Buffer_from=Lu.from!==Uint8Array.from&&Lu.from||function(Ou,Du){return new Lu(Ou,Du)},Tu._Buffer_allocUnsafe=Lu.allocUnsafe||function(Ou){return new Lu(Ou)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(Cu,Tu,Pu){this.fn=Cu,this.len=Tu,this.next=void 0,this.val=Pu}function noop$1(){}function State(Cu){this.head=Cu.head,this.tail=Cu.tail,this.len=Cu.len,this.next=Cu.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function Cu(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function Cu(Tu){return new util$4.Array(Tu)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function Cu(Tu,Pu,Bu){return this.tail=this.tail.next=new Op(Tu,Pu,Bu),this.len+=Pu,this};function writeByte(Cu,Tu,Pu){Tu[Pu]=Cu&255}function writeVarint32(Cu,Tu,Pu){for(;Cu>127;)Tu[Pu++]=Cu&127|128,Cu>>>=7;Tu[Pu]=Cu}function VarintOp(Cu,Tu){this.len=Cu,this.next=void 0,this.val=Tu}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function Cu(Tu){return this.len+=(this.tail=this.tail.next=new VarintOp((Tu=Tu>>>0)<128?1:Tu<16384?2:Tu<2097152?3:Tu<268435456?4:5,Tu)).len,this};Writer$1.prototype.int32=function Cu(Tu){return Tu<0?this._push(writeVarint64,10,LongBits$1.fromNumber(Tu)):this.uint32(Tu)};Writer$1.prototype.sint32=function Cu(Tu){return this.uint32((Tu<<1^Tu>>31)>>>0)};function writeVarint64(Cu,Tu,Pu){for(;Cu.hi;)Tu[Pu++]=Cu.lo&127|128,Cu.lo=(Cu.lo>>>7|Cu.hi<<25)>>>0,Cu.hi>>>=7;for(;Cu.lo>127;)Tu[Pu++]=Cu.lo&127|128,Cu.lo=Cu.lo>>>7;Tu[Pu++]=Cu.lo}Writer$1.prototype.uint64=function Cu(Tu){var Pu=LongBits$1.from(Tu);return this._push(writeVarint64,Pu.length(),Pu)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function Cu(Tu){var Pu=LongBits$1.from(Tu).zzEncode();return this._push(writeVarint64,Pu.length(),Pu)};Writer$1.prototype.bool=function Cu(Tu){return this._push(writeByte,1,Tu?1:0)};function writeFixed32(Cu,Tu,Pu){Tu[Pu]=Cu&255,Tu[Pu+1]=Cu>>>8&255,Tu[Pu+2]=Cu>>>16&255,Tu[Pu+3]=Cu>>>24}Writer$1.prototype.fixed32=function Cu(Tu){return this._push(writeFixed32,4,Tu>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function Cu(Tu){var Pu=LongBits$1.from(Tu);return this._push(writeFixed32,4,Pu.lo)._push(writeFixed32,4,Pu.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function Cu(Tu){return this._push(util$4.float.writeFloatLE,4,Tu)};Writer$1.prototype.double=function Cu(Tu){return this._push(util$4.float.writeDoubleLE,8,Tu)};var writeBytes=util$4.Array.prototype.set?function Cu(Tu,Pu,Bu){Pu.set(Tu,Bu)}:function Cu(Tu,Pu,Bu){for(var Lu=0;Lu<Tu.length;++Lu)Pu[Bu+Lu]=Tu[Lu]};Writer$1.prototype.bytes=function Cu(Tu){var Pu=Tu.length>>>0;if(!Pu)return this._push(writeByte,1,0);if(util$4.isString(Tu)){var Bu=Writer$1.alloc(Pu=base64.length(Tu));base64.decode(Tu,Bu,0),Tu=Bu}return this.uint32(Pu)._push(writeBytes,Pu,Tu)};Writer$1.prototype.string=function Cu(Tu){var Pu=utf8$1.length(Tu);return Pu?this.uint32(Pu)._push(utf8$1.write,Pu,Tu):this._push(writeByte,1,0)};Writer$1.prototype.fork=function Cu(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function Cu(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function Cu(){var Tu=this.head,Pu=this.tail,Bu=this.len;return this.reset().uint32(Bu),Bu&&(this.tail.next=Tu.next,this.tail=Pu,this.len+=Bu),this};Writer$1.prototype.finish=function Cu(){for(var Tu=this.head.next,Pu=this.constructor.alloc(this.len),Bu=0;Tu;)Tu.fn(Tu.val,Pu,Bu),Bu+=Tu.len,Tu=Tu.next;return Pu};Writer$1._configure=function(Cu){BufferWriter$1=Cu,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(Tu,Pu,Bu){Pu.set(Tu,Bu)}:function(Tu,Pu,Bu){if(Tu.copy)Tu.copy(Pu,Bu,0,Tu.length);else for(var Lu=0;Lu<Tu.length;)Pu[Bu++]=Tu[Lu++]}};BufferWriter.prototype.bytes=function Cu(Tu){util$3.isString(Tu)&&(Tu=util$3._Buffer_from(Tu,"base64"));var Pu=Tu.length>>>0;return this.uint32(Pu),Pu&&this._push(BufferWriter.writeBytesBuffer,Pu,Tu),this};function writeStringBuffer(Cu,Tu,Pu){Cu.length<40?util$3.utf8.write(Cu,Tu,Pu):Tu.utf8Write?Tu.utf8Write(Cu,Pu):Tu.write(Cu,Pu)}BufferWriter.prototype.string=function Cu(Tu){var Pu=util$3.Buffer.byteLength(Tu);return this.uint32(Pu),Pu&&this._push(writeStringBuffer,Pu,Tu),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(Cu,Tu){return RangeError("index out of range: "+Cu.pos+" + "+(Tu||1)+" > "+Cu.len)}function Reader$1(Cu){this.buf=Cu,this.pos=0,this.len=Cu.length}var create_array=typeof Uint8Array!="undefined"?function Cu(Tu){if(Tu instanceof Uint8Array||Array.isArray(Tu))return new Reader$1(Tu);throw Error("illegal buffer")}:function Cu(Tu){if(Array.isArray(Tu))return new Reader$1(Tu);throw Error("illegal buffer")},create=function Cu(){return util$2.Buffer?function(Pu){return(Reader$1.create=function(Lu){return util$2.Buffer.isBuffer(Lu)?new BufferReader$1(Lu):create_array(Lu)})(Pu)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function Cu(){var Tu=4294967295;return function(){if(Tu=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Tu=(Tu|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Tu=(Tu|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Tu;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return Tu}}();Reader$1.prototype.int32=function Cu(){return this.uint32()|0};Reader$1.prototype.sint32=function Cu(){var Tu=this.uint32();return Tu>>>1^-(Tu&1)|0};function readLongVarint(){var Cu=new LongBits(0,0),Tu=0;if(this.len-this.pos>4){for(;Tu<4;++Tu)if(Cu.lo=(Cu.lo|(this.buf[this.pos]&127)<<Tu*7)>>>0,this.buf[this.pos++]<128)return Cu;if(Cu.lo=(Cu.lo|(this.buf[this.pos]&127)<<28)>>>0,Cu.hi=(Cu.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Cu;Tu=0}else{for(;Tu<3;++Tu){if(this.pos>=this.len)throw indexOutOfRange(this);if(Cu.lo=(Cu.lo|(this.buf[this.pos]&127)<<Tu*7)>>>0,this.buf[this.pos++]<128)return Cu}return Cu.lo=(Cu.lo|(this.buf[this.pos++]&127)<<Tu*7)>>>0,Cu}if(this.len-this.pos>4){for(;Tu<5;++Tu)if(Cu.hi=(Cu.hi|(this.buf[this.pos]&127)<<Tu*7+3)>>>0,this.buf[this.pos++]<128)return Cu}else for(;Tu<5;++Tu){if(this.pos>=this.len)throw indexOutOfRange(this);if(Cu.hi=(Cu.hi|(this.buf[this.pos]&127)<<Tu*7+3)>>>0,this.buf[this.pos++]<128)return Cu}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function Cu(){return this.uint32()!==0};function readFixed32_end(Cu,Tu){return(Cu[Tu-4]|Cu[Tu-3]<<8|Cu[Tu-2]<<16|Cu[Tu-1]<<24)>>>0}Reader$1.prototype.fixed32=function Cu(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function Cu(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function Cu(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var Tu=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Tu};Reader$1.prototype.double=function Cu(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var Tu=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Tu};Reader$1.prototype.bytes=function Cu(){var Tu=this.uint32(),Pu=this.pos,Bu=this.pos+Tu;if(Bu>this.len)throw indexOutOfRange(this,Tu);return this.pos+=Tu,Array.isArray(this.buf)?this.buf.slice(Pu,Bu):Pu===Bu?new this.buf.constructor(0):this._slice.call(this.buf,Pu,Bu)};Reader$1.prototype.string=function Cu(){var Tu=this.bytes();return utf8.read(Tu,0,Tu.length)};Reader$1.prototype.skip=function Cu(Tu){if(typeof Tu=="number"){if(this.pos+Tu>this.len)throw indexOutOfRange(this,Tu);this.pos+=Tu}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(Cu){switch(Cu){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Cu=this.uint32()&7)!==4;)this.skipType(Cu);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Cu+" at offset "+this.pos)}return this};Reader$1._configure=function(Cu){BufferReader$1=Cu,Reader$1.create=create(),BufferReader$1._configure();var Tu=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[Tu](!1)},uint64:function(){return readLongVarint.call(this)[Tu](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[Tu](!1)},fixed64:function(){return readFixed64.call(this)[Tu](!0)},sfixed64:function(){return readFixed64.call(this)[Tu](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(Cu){Reader.call(this,Cu)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function Cu(){var Tu=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Tu,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Tu,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(Cu,Tu,Pu){if(typeof Cu!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=Cu,this.requestDelimited=Boolean(Tu),this.responseDelimited=Boolean(Pu)}Service.prototype.rpcCall=function Cu(Tu,Pu,Bu,Lu,Ru){if(!Lu)throw TypeError("request must be specified");var Ou=this;if(!Ru)return util.asPromise(Cu,Ou,Tu,Pu,Bu,Lu);if(!Ou.rpcImpl){setTimeout(function(){Ru(Error("already ended"))},0);return}try{return Ou.rpcImpl(Tu,Pu[Ou.requestDelimited?"encodeDelimited":"encode"](Lu).finish(),function(ku,Fu){if(ku)return Ou.emit("error",ku,Tu),Ru(ku);if(Fu===null){Ou.end(!0);return}if(!(Fu instanceof Bu))try{Fu=Bu[Ou.responseDelimited?"decodeDelimited":"decode"](Fu)}catch(Nu){return Ou.emit("error",Nu,Tu),Ru(Nu)}return Ou.emit("data",Fu,Tu),Ru(null,Fu)})}catch(Du){Ou.emit("error",Du,Tu),setTimeout(function(){Ru(Du)},0);return}};Service.prototype.end=function Cu(Tu){return this.rpcImpl&&(Tu||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(Cu){var Tu=Cu;Tu.Service=service})(rpc);var roots={};(function(Cu){var Tu=Cu;Tu.build="minimal",Tu.Writer=writer,Tu.BufferWriter=writer_buffer,Tu.Reader=reader,Tu.BufferReader=reader_buffer,Tu.util=minimal$1,Tu.rpc=rpc,Tu.roots=roots,Tu.configure=Pu;function Pu(){Tu.util._configure(),Tu.Writer._configure(Tu.BufferWriter),Tu.Reader._configure(Tu.BufferReader)}Pu()})(indexMinimal);var minimal=indexMinimal,parseWork,Subscribe,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$2=require$$1,t$3=tslib.exports,i$2=minimal;function n$3(Cu){if(Cu&&Cu.__esModule)return Cu;var Tu=Object.create(null);return Cu&&Object.keys(Cu).forEach(function(Pu){if(Pu!=="default"){var Bu=Object.getOwnPropertyDescriptor(Cu,Pu);Object.defineProperty(Tu,Pu,Bu.get?Bu:{enumerable:!0,get:function(){return Cu[Pu]}})}}),Tu.default=Cu,Object.freeze(Tu)}var r$3=n$3(e$2),o$2=n$3(i$2),s$2=Number(r$3.REVISION);if(s$2<115||s$2>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$2,l$3={},u$2={},h$2=h$2||function(Cu,Tu){var Pu={},Bu=Pu.lib={},Lu=Bu.Base=function(){function zu(){}return{extend:function(Hu){zu.prototype=this;var Wu=new zu;return Hu&&Wu.mixIn(Hu),Wu.hasOwnProperty("init")||(Wu.init=function(){Wu.$super.init.apply(this,arguments)}),Wu.init.prototype=Wu,Wu.$super=this,Wu},create:function(){var Hu=this.extend();return Hu.init.apply(Hu,arguments),Hu},init:function(){},mixIn:function(Hu){for(var Wu in Hu)Hu.hasOwnProperty(Wu)&&(this[Wu]=Hu[Wu]);Hu.hasOwnProperty("toString")&&(this.toString=Hu.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ru=Bu.WordArray=Lu.extend({init:function(zu,Hu){zu=this.words=zu||[],this.sigBytes=Hu!=null?Hu:4*zu.length},toString:function(zu){return(zu||Du).stringify(this)},concat:function(zu){var Hu=this.words,Wu=zu.words,_h=this.sigBytes,Xc=zu.sigBytes;if(this.clamp(),_h%4)for(var ju=0;ju<Xc;ju++){var _c=Wu[ju>>>2]>>>24-ju%4*8&255;Hu[_h+ju>>>2]|=_c<<24-(_h+ju)%4*8}else for(ju=0;ju<Xc;ju+=4)Hu[_h+ju>>>2]=Wu[ju>>>2];return this.sigBytes+=Xc,this},clamp:function(){var zu=this.words,Hu=this.sigBytes;zu[Hu>>>2]&=4294967295<<32-Hu%4*8,zu.length=Cu.ceil(Hu/4)},clone:function(){var zu=Lu.clone.call(this);return zu.words=this.words.slice(0),zu},random:function(zu){for(var Hu=[],Wu=0;Wu<zu;Wu+=4)Hu.push(4294967296*Cu.random()|0);return new Ru.init(Hu,zu)}}),Ou=Pu.enc={},Du=Ou.Hex={stringify:function(zu){for(var Hu=zu.words,Wu=zu.sigBytes,_h=[],Xc=0;Xc<Wu;Xc++){var ju=Hu[Xc>>>2]>>>24-Xc%4*8&255;_h.push((ju>>>4).toString(16)),_h.push((15&ju).toString(16))}return _h.join("")},parse:function(zu){for(var Hu=zu.length,Wu=[],_h=0;_h<Hu;_h+=2)Wu[_h>>>3]|=parseInt(zu.substr(_h,2),16)<<24-_h%8*4;return new Ru.init(Wu,Hu/2)}},ku=Ou.Latin1={stringify:function(zu){for(var Hu=zu.words,Wu=zu.sigBytes,_h=[],Xc=0;Xc<Wu;Xc++){var ju=Hu[Xc>>>2]>>>24-Xc%4*8&255;_h.push(String.fromCharCode(ju))}return _h.join("")},parse:function(zu){for(var Hu=zu.length,Wu=[],_h=0;_h<Hu;_h++)Wu[_h>>>2]|=(255&zu.charCodeAt(_h))<<24-_h%4*8;return new Ru.init(Wu,Hu)}},Fu=Ou.Utf8={stringify:function(zu){try{return decodeURIComponent(escape(ku.stringify(zu)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(zu){return ku.parse(unescape(encodeURIComponent(zu)))}},Nu=Bu.BufferedBlockAlgorithm=Lu.extend({reset:function(){this._data=new Ru.init,this._nDataBytes=0},_append:function(zu){typeof zu=="string"&&(zu=Fu.parse(zu)),this._data.concat(zu),this._nDataBytes+=zu.sigBytes},_process:function(zu){var Hu=this._data,Wu=Hu.words,_h=Hu.sigBytes,Xc=this.blockSize,ju=_h/(4*Xc),_c=(ju=zu?Cu.ceil(ju):Cu.max((0|ju)-this._minBufferSize,0))*Xc,_f=Cu.min(4*_c,_h);if(_c){for(var ep=0;ep<_c;ep+=Xc)this._doProcessBlock(Wu,ep);var tp=Wu.splice(0,_c);Hu.sigBytes-=_f}return new Ru.init(tp,_f)},clone:function(){var zu=Lu.clone.call(this);return zu._data=this._data.clone(),zu},_minBufferSize:0});Bu.Hasher=Nu.extend({cfg:Lu.extend(),init:function(zu){this.cfg=this.cfg.extend(zu),this.reset()},reset:function(){Nu.reset.call(this),this._doReset()},update:function(zu){return this._append(zu),this._process(),this},finalize:function(zu){return zu&&this._append(zu),this._doFinalize()},blockSize:16,_createHelper:function(zu){return function(Hu,Wu){return new zu.init(Wu).finalize(Hu)}},_createHmacHelper:function(zu){return function(Hu,Wu){return new Gu.HMAC.init(zu,Wu).finalize(Hu)}}});var Gu=Pu.algo={};return Pu}(Math);function c$2(Cu,Tu,Pu){Cu!=null&&(typeof Cu=="number"?this.fromNumber(Cu,Tu,Pu):Tu==null&&typeof Cu!="string"?this.fromString(Cu,256):this.fromString(Cu,Tu))}function d$1(){return new c$2(null)}(function(Cu){for(var Tu=h$2,Pu=(Lu=Tu.lib).WordArray,Bu=Lu.Hasher,Lu=Tu.algo,Ru=[],Ou=[],Du=function(Wu){return 4294967296*(Wu-(0|Wu))|0},ku=2,Fu=0;64>Fu;){var Nu;e:{Nu=ku;for(var Gu=Cu.sqrt(Nu),zu=2;zu<=Gu;zu++)if(!(Nu%zu)){Nu=!1;break e}Nu=!0}Nu&&(8>Fu&&(Ru[Fu]=Du(Cu.pow(ku,.5))),Ou[Fu]=Du(Cu.pow(ku,1/3)),Fu++),ku++}var Hu=[];Lu=Lu.SHA256=Bu.extend({_doReset:function(){this._hash=new Pu.init(Ru.slice(0))},_doProcessBlock:function(Wu,_h){for(var Xc=this._hash.words,ju=Xc[0],_c=Xc[1],_f=Xc[2],ep=Xc[3],tp=Xc[4],op=Xc[5],lp=Xc[6],up=Xc[7],hp=0;64>hp;hp++){if(16>hp)Hu[hp]=0|Wu[_h+hp];else{var np=Hu[hp-15],rp=Hu[hp-2];Hu[hp]=((np<<25|np>>>7)^(np<<14|np>>>18)^np>>>3)+Hu[hp-7]+((rp<<15|rp>>>17)^(rp<<13|rp>>>19)^rp>>>10)+Hu[hp-16]}np=up+((tp<<26|tp>>>6)^(tp<<21|tp>>>11)^(tp<<7|tp>>>25))+(tp&op^~tp&lp)+Ou[hp]+Hu[hp],rp=((ju<<30|ju>>>2)^(ju<<19|ju>>>13)^(ju<<10|ju>>>22))+(ju&_c^ju&_f^_c&_f),up=lp,lp=op,op=tp,tp=ep+np|0,ep=_f,_f=_c,_c=ju,ju=np+rp|0}Xc[0]=Xc[0]+ju|0,Xc[1]=Xc[1]+_c|0,Xc[2]=Xc[2]+_f|0,Xc[3]=Xc[3]+ep|0,Xc[4]=Xc[4]+tp|0,Xc[5]=Xc[5]+op|0,Xc[6]=Xc[6]+lp|0,Xc[7]=Xc[7]+up|0},_doFinalize:function(){var Wu=this._data,_h=Wu.words,Xc=8*this._nDataBytes,ju=8*Wu.sigBytes;return _h[ju>>>5]|=128<<24-ju%32,_h[14+(ju+64>>>9<<4)]=Cu.floor(Xc/4294967296),_h[15+(ju+64>>>9<<4)]=Xc,Wu.sigBytes=4*_h.length,this._process(),this._hash},clone:function(){var Wu=Bu.clone.call(this);return Wu._hash=this._hash.clone(),Wu}}),Tu.SHA256=Bu._createHelper(Lu),Tu.HmacSHA256=Bu._createHmacHelper(Lu)})(Math),h$2.lib.Cipher||function(Cu){var Tu=(Hu=h$2).lib,Pu=Tu.Base,Bu=Tu.WordArray,Lu=Tu.BufferedBlockAlgorithm,Ru=Hu.enc.Base64,Ou=Hu.algo.EvpKDF,Du=Tu.Cipher=Lu.extend({cfg:Pu.extend(),createEncryptor:function(_h,Xc){return this.create(this._ENC_XFORM_MODE,_h,Xc)},createDecryptor:function(_h,Xc){return this.create(this._DEC_XFORM_MODE,_h,Xc)},init:function(_h,Xc,ju){this.cfg=this.cfg.extend(ju),this._xformMode=_h,this._key=Xc,this.reset()},reset:function(){Lu.reset.call(this),this._doReset()},process:function(_h){return this._append(_h),this._process()},finalize:function(_h){return _h&&this._append(_h),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(_h){return{encrypt:function(Xc,ju,_c){return(typeof ju=="string"?Wu:zu).encrypt(_h,Xc,ju,_c)},decrypt:function(Xc,ju,_c){return(typeof ju=="string"?Wu:zu).decrypt(_h,Xc,ju,_c)}}}});Tu.StreamCipher=Du.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var ku=Hu.mode={},Fu=function(_h,Xc,ju){var _c=this._iv;_c?this._iv=void 0:_c=this._prevBlock;for(var _f=0;_f<ju;_f++)_h[Xc+_f]^=_c[_f]},Nu=(Tu.BlockCipherMode=Pu.extend({createEncryptor:function(_h,Xc){return this.Encryptor.create(_h,Xc)},createDecryptor:function(_h,Xc){return this.Decryptor.create(_h,Xc)},init:function(_h,Xc){this._cipher=_h,this._iv=Xc}})).extend();Nu.Encryptor=Nu.extend({processBlock:function(_h,Xc){var ju=this._cipher,_c=ju.blockSize;Fu.call(this,_h,Xc,_c),ju.encryptBlock(_h,Xc),this._prevBlock=_h.slice(Xc,Xc+_c)}}),Nu.Decryptor=Nu.extend({processBlock:function(_h,Xc){var ju=this._cipher,_c=ju.blockSize,_f=_h.slice(Xc,Xc+_c);ju.decryptBlock(_h,Xc),Fu.call(this,_h,Xc,_c),this._prevBlock=_f}}),ku=ku.CBC=Nu,Nu=(Hu.pad={}).Pkcs7={pad:function(_h,Xc){for(var ju,_c=(ju=(ju=4*Xc)-_h.sigBytes%ju)<<24|ju<<16|ju<<8|ju,_f=[],ep=0;ep<ju;ep+=4)_f.push(_c);ju=Bu.create(_f,ju),_h.concat(ju)},unpad:function(_h){_h.sigBytes-=255&_h.words[_h.sigBytes-1>>>2]}},Tu.BlockCipher=Du.extend({cfg:Du.cfg.extend({mode:ku,padding:Nu}),reset:function(){Du.reset.call(this);var _h=(Xc=this.cfg).iv,Xc=Xc.mode;if(this._xformMode==this._ENC_XFORM_MODE)var ju=Xc.createEncryptor;else ju=Xc.createDecryptor,this._minBufferSize=1;this._mode=ju.call(Xc,this,_h&&_h.words)},_doProcessBlock:function(_h,Xc){this._mode.processBlock(_h,Xc)},_doFinalize:function(){var _h=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){_h.pad(this._data,this.blockSize);var Xc=this._process(!0)}else Xc=this._process(!0),_h.unpad(Xc);return Xc},blockSize:4});var Gu=Tu.CipherParams=Pu.extend({init:function(_h){this.mixIn(_h)},toString:function(_h){return(_h||this.formatter).stringify(this)}}),zu=(ku=(Hu.format={}).OpenSSL={stringify:function(_h){var Xc=_h.ciphertext;return((_h=_h.salt)?Bu.create([1398893684,1701076831]).concat(_h).concat(Xc):Xc).toString(Ru)},parse:function(_h){var Xc=(_h=Ru.parse(_h)).words;if(Xc[0]==1398893684&&Xc[1]==1701076831){var ju=Bu.create(Xc.slice(2,4));Xc.splice(0,4),_h.sigBytes-=16}return Gu.create({ciphertext:_h,salt:ju})}},Tu.SerializableCipher=Pu.extend({cfg:Pu.extend({format:ku}),encrypt:function(_h,Xc,ju,_c){_c=this.cfg.extend(_c);var _f=_h.createEncryptor(ju,_c);return Xc=_f.finalize(Xc),_f=_f.cfg,Gu.create({ciphertext:Xc,key:ju,iv:_f.iv,algorithm:_h,mode:_f.mode,padding:_f.padding,blockSize:_h.blockSize,formatter:_c.format})},decrypt:function(_h,Xc,ju,_c){return _c=this.cfg.extend(_c),Xc=this._parse(Xc,_c.format),_h.createDecryptor(ju,_c).finalize(Xc.ciphertext)},_parse:function(_h,Xc){return typeof _h=="string"?Xc.parse(_h,this):_h}})),Hu=(Hu.kdf={}).OpenSSL={execute:function(_h,Xc,ju,_c){return _c||(_c=Bu.random(8)),_h=Ou.create({keySize:Xc+ju}).compute(_h,_c),ju=Bu.create(_h.words.slice(Xc),4*ju),_h.sigBytes=4*Xc,Gu.create({key:_h,iv:ju,salt:_c})}},Wu=Tu.PasswordBasedCipher=zu.extend({cfg:zu.cfg.extend({kdf:Hu}),encrypt:function(_h,Xc,ju,_c){return ju=(_c=this.cfg.extend(_c)).kdf.execute(ju,_h.keySize,_h.ivSize),_c.iv=ju.iv,(_h=zu.encrypt.call(this,_h,Xc,ju.key,_c)).mixIn(ju),_h},decrypt:function(_h,Xc,ju,_c){return _c=this.cfg.extend(_c),Xc=this._parse(Xc,_c.format),ju=_c.kdf.execute(ju,_h.keySize,_h.ivSize,Xc.salt),_c.iv=ju.iv,zu.decrypt.call(this,_h,Xc,ju.key,_c)}})}(),function(){for(var Cu=h$2,Tu=Cu.lib.BlockCipher,Pu=Cu.algo,Bu=[],Lu=[],Ru=[],Ou=[],Du=[],ku=[],Fu=[],Nu=[],Gu=[],zu=[],Hu=[],Wu=0;256>Wu;Wu++)Hu[Wu]=128>Wu?Wu<<1:Wu<<1^283;var _h=0,Xc=0;for(Wu=0;256>Wu;Wu++){var ju=(ju=Xc^Xc<<1^Xc<<2^Xc<<3^Xc<<4)>>>8^255&ju^99;Bu[_h]=ju,Lu[ju]=_h;var _c=Hu[_h],_f=Hu[_c],ep=Hu[_f],tp=257*Hu[ju]^16843008*ju;Ru[_h]=tp<<24|tp>>>8,Ou[_h]=tp<<16|tp>>>16,Du[_h]=tp<<8|tp>>>24,ku[_h]=tp,tp=16843009*ep^65537*_f^257*_c^16843008*_h,Fu[ju]=tp<<24|tp>>>8,Nu[ju]=tp<<16|tp>>>16,Gu[ju]=tp<<8|tp>>>24,zu[ju]=tp,_h?(_h=_c^Hu[Hu[Hu[ep^_c]]],Xc^=Hu[Hu[Xc]]):_h=Xc=1}var op=[0,1,2,4,8,16,32,64,128,27,54];Pu=Pu.AES=Tu.extend({_doReset:function(){for(var lp=(hp=this._key).words,up=hp.sigBytes/4,hp=4*((this._nRounds=up+6)+1),np=this._keySchedule=[],rp=0;rp<hp;rp++)if(rp<up)np[rp]=lp[rp];else{var ip=np[rp-1];rp%up?6<up&&rp%up==4&&(ip=Bu[ip>>>24]<<24|Bu[ip>>>16&255]<<16|Bu[ip>>>8&255]<<8|Bu[255&ip]):(ip=Bu[(ip=ip<<8|ip>>>24)>>>24]<<24|Bu[ip>>>16&255]<<16|Bu[ip>>>8&255]<<8|Bu[255&ip],ip^=op[rp/up|0]<<24),np[rp]=np[rp-up]^ip}for(lp=this._invKeySchedule=[],up=0;up<hp;up++)rp=hp-up,ip=up%4?np[rp]:np[rp-4],lp[up]=4>up||4>=rp?ip:Fu[Bu[ip>>>24]]^Nu[Bu[ip>>>16&255]]^Gu[Bu[ip>>>8&255]]^zu[Bu[255&ip]]},encryptBlock:function(lp,up){this._doCryptBlock(lp,up,this._keySchedule,Ru,Ou,Du,ku,Bu)},decryptBlock:function(lp,up){var hp=lp[up+1];lp[up+1]=lp[up+3],lp[up+3]=hp,this._doCryptBlock(lp,up,this._invKeySchedule,Fu,Nu,Gu,zu,Lu),hp=lp[up+1],lp[up+1]=lp[up+3],lp[up+3]=hp},_doCryptBlock:function(lp,up,hp,np,rp,ip,ap,sp){for(var cp=this._nRounds,dp=lp[up]^hp[0],fp=lp[up+1]^hp[1],vp=lp[up+2]^hp[2],_p=lp[up+3]^hp[3],wp=4,Dp=1;Dp<cp;Dp++){var Pp=np[dp>>>24]^rp[fp>>>16&255]^ip[vp>>>8&255]^ap[255&_p]^hp[wp++],Wp=np[fp>>>24]^rp[vp>>>16&255]^ip[_p>>>8&255]^ap[255&dp]^hp[wp++],Rp=np[vp>>>24]^rp[_p>>>16&255]^ip[dp>>>8&255]^ap[255&fp]^hp[wp++];_p=np[_p>>>24]^rp[dp>>>16&255]^ip[fp>>>8&255]^ap[255&vp]^hp[wp++],dp=Pp,fp=Wp,vp=Rp}Pp=(sp[dp>>>24]<<24|sp[fp>>>16&255]<<16|sp[vp>>>8&255]<<8|sp[255&_p])^hp[wp++],Wp=(sp[fp>>>24]<<24|sp[vp>>>16&255]<<16|sp[_p>>>8&255]<<8|sp[255&dp])^hp[wp++],Rp=(sp[vp>>>24]<<24|sp[_p>>>16&255]<<16|sp[dp>>>8&255]<<8|sp[255&fp])^hp[wp++],_p=(sp[_p>>>24]<<24|sp[dp>>>16&255]<<16|sp[fp>>>8&255]<<8|sp[255&vp])^hp[wp++],lp[up]=Pp,lp[up+1]=Wp,lp[up+2]=Rp,lp[up+3]=_p},keySize:8}),Cu.AES=Tu._createHelper(Pu)}(),u$2.lang={extend:function(Cu,Tu,Pu){if(!Tu||!Cu)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Bu=function(){};if(Bu.prototype=Tu.prototype,Cu.prototype=new Bu,Cu.prototype.constructor=Cu,Cu.superclass=Tu.prototype,Tu.prototype.constructor==Object.prototype.constructor&&(Tu.prototype.constructor=Tu),Pu){var Lu;for(Lu in Pu)Cu.prototype[Lu]=Pu[Lu];var Ru=function(){},Ou=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Ru=function(Du,ku){for(Lu=0;Lu<Ou.length;Lu+=1){var Fu=Ou[Lu],Nu=ku[Fu];typeof Nu=="function"&&Nu!=Object.prototype[Fu]&&(Du[Fu]=Nu)}})}catch{}Ru(Cu.prototype,Pu)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$2.prototype.am=function(Cu,Tu,Pu,Bu,Lu,Ru){for(var Ou=32767&Tu,Du=Tu>>15;--Ru>=0;){var ku=32767&this[Cu],Fu=this[Cu++]>>15,Nu=Du*ku+Fu*Ou;Lu=((ku=Ou*ku+((32767&Nu)<<15)+Pu[Bu]+(1073741823&Lu))>>>30)+(Nu>>>15)+Du*Fu+(Lu>>>30),Pu[Bu++]=1073741823&ku}return Lu},a$2=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$2.prototype.am=function(Cu,Tu,Pu,Bu,Lu,Ru){for(;--Ru>=0;){var Ou=Tu*this[Cu++]+Pu[Bu]+Lu;Lu=Math.floor(Ou/67108864),Pu[Bu++]=67108863&Ou}return Lu},a$2=26):(c$2.prototype.am=function(Cu,Tu,Pu,Bu,Lu,Ru){for(var Ou=16383&Tu,Du=Tu>>14;--Ru>=0;){var ku=16383&this[Cu],Fu=this[Cu++]>>14,Nu=Du*ku+Fu*Ou;Lu=((ku=Ou*ku+((16383&Nu)<<14)+Pu[Bu]+Lu)>>28)+(Nu>>14)+Du*Fu,Pu[Bu++]=268435455&ku}return Lu},a$2=28),c$2.prototype.DB=a$2,c$2.prototype.DM=(1<<a$2)-1,c$2.prototype.DV=1<<a$2;c$2.prototype.FV=Math.pow(2,52),c$2.prototype.F1=52-a$2,c$2.prototype.F2=2*a$2-52;var p$2,f$2,A$2=new Array;for(p$2="0".charCodeAt(0),f$2=0;f$2<=9;++f$2)A$2[p$2++]=f$2;for(p$2="a".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;for(p$2="A".charCodeAt(0),f$2=10;f$2<36;++f$2)A$2[p$2++]=f$2;function g$2(Cu){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(Cu)}function m$2(Cu,Tu){var Pu=A$2[Cu.charCodeAt(Tu)];return Pu==null?-1:Pu}function v$2(Cu){var Tu=d$1();return Tu.fromInt(Cu),Tu}function y$2(Cu){var Tu,Pu=1;return(Tu=Cu>>>16)!=0&&(Cu=Tu,Pu+=16),(Tu=Cu>>8)!=0&&(Cu=Tu,Pu+=8),(Tu=Cu>>4)!=0&&(Cu=Tu,Pu+=4),(Tu=Cu>>2)!=0&&(Cu=Tu,Pu+=2),(Tu=Cu>>1)!=0&&(Cu=Tu,Pu+=1),Pu}function b$2(Cu){this.m=Cu}function x$1(Cu){this.m=Cu,this.mp=Cu.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<Cu.DB-15)-1,this.mt2=2*Cu.t}function w$2(Cu,Tu){return Cu&Tu}function E$2(Cu,Tu){return Cu|Tu}function M$2(Cu,Tu){return Cu^Tu}function I$1(Cu,Tu){return Cu&~Tu}function S$1(Cu){if(Cu==0)return-1;var Tu=0;return(65535&Cu)==0&&(Cu>>=16,Tu+=16),(255&Cu)==0&&(Cu>>=8,Tu+=8),(15&Cu)==0&&(Cu>>=4,Tu+=4),(3&Cu)==0&&(Cu>>=2,Tu+=2),(1&Cu)==0&&++Tu,Tu}function C$3(Cu){for(var Tu=0;Cu!=0;)Cu&=Cu-1,++Tu;return Tu}function B$2(){}function T(Cu){return Cu}function P$2(Cu){this.r2=d$1(),this.q3=d$1(),c$2.ONE.dlShiftTo(2*Cu.t,this.r2),this.mu=this.r2.divide(Cu),this.m=Cu}b$2.prototype.convert=function(Cu){return Cu.s<0||Cu.compareTo(this.m)>=0?Cu.mod(this.m):Cu},b$2.prototype.revert=function(Cu){return Cu},b$2.prototype.reduce=function(Cu){Cu.divRemTo(this.m,null,Cu)},b$2.prototype.mulTo=function(Cu,Tu,Pu){Cu.multiplyTo(Tu,Pu),this.reduce(Pu)},b$2.prototype.sqrTo=function(Cu,Tu){Cu.squareTo(Tu),this.reduce(Tu)},x$1.prototype.convert=function(Cu){var Tu=d$1();return Cu.abs().dlShiftTo(this.m.t,Tu),Tu.divRemTo(this.m,null,Tu),Cu.s<0&&Tu.compareTo(c$2.ZERO)>0&&this.m.subTo(Tu,Tu),Tu},x$1.prototype.revert=function(Cu){var Tu=d$1();return Cu.copyTo(Tu),this.reduce(Tu),Tu},x$1.prototype.reduce=function(Cu){for(;Cu.t<=this.mt2;)Cu[Cu.t++]=0;for(var Tu=0;Tu<this.m.t;++Tu){var Pu=32767&Cu[Tu],Bu=Pu*this.mpl+((Pu*this.mph+(Cu[Tu]>>15)*this.mpl&this.um)<<15)&Cu.DM;for(Cu[Pu=Tu+this.m.t]+=this.m.am(0,Bu,Cu,Tu,0,this.m.t);Cu[Pu]>=Cu.DV;)Cu[Pu]-=Cu.DV,Cu[++Pu]++}Cu.clamp(),Cu.drShiftTo(this.m.t,Cu),Cu.compareTo(this.m)>=0&&Cu.subTo(this.m,Cu)},x$1.prototype.mulTo=function(Cu,Tu,Pu){Cu.multiplyTo(Tu,Pu),this.reduce(Pu)},x$1.prototype.sqrTo=function(Cu,Tu){Cu.squareTo(Tu),this.reduce(Tu)},c$2.prototype.copyTo=function(Cu){for(var Tu=this.t-1;Tu>=0;--Tu)Cu[Tu]=this[Tu];Cu.t=this.t,Cu.s=this.s},c$2.prototype.fromInt=function(Cu){this.t=1,this.s=Cu<0?-1:0,Cu>0?this[0]=Cu:Cu<-1?this[0]=Cu+this.DV:this.t=0},c$2.prototype.fromString=function(Cu,Tu){var Pu;if(Tu==16)Pu=4;else if(Tu==8)Pu=3;else if(Tu==256)Pu=8;else if(Tu==2)Pu=1;else if(Tu==32)Pu=5;else{if(Tu!=4)return void this.fromRadix(Cu,Tu);Pu=2}this.t=0,this.s=0;for(var Bu=Cu.length,Lu=!1,Ru=0;--Bu>=0;){var Ou=Pu==8?255&Cu[Bu]:m$2(Cu,Bu);Ou<0?Cu.charAt(Bu)=="-"&&(Lu=!0):(Lu=!1,Ru==0?this[this.t++]=Ou:Ru+Pu>this.DB?(this[this.t-1]|=(Ou&(1<<this.DB-Ru)-1)<<Ru,this[this.t++]=Ou>>this.DB-Ru):this[this.t-1]|=Ou<<Ru,(Ru+=Pu)>=this.DB&&(Ru-=this.DB))}Pu==8&&(128&Cu[0])!=0&&(this.s=-1,Ru>0&&(this[this.t-1]|=(1<<this.DB-Ru)-1<<Ru)),this.clamp(),Lu&&c$2.ZERO.subTo(this,this)},c$2.prototype.clamp=function(){for(var Cu=this.s&this.DM;this.t>0&&this[this.t-1]==Cu;)--this.t},c$2.prototype.dlShiftTo=function(Cu,Tu){var Pu;for(Pu=this.t-1;Pu>=0;--Pu)Tu[Pu+Cu]=this[Pu];for(Pu=Cu-1;Pu>=0;--Pu)Tu[Pu]=0;Tu.t=this.t+Cu,Tu.s=this.s},c$2.prototype.drShiftTo=function(Cu,Tu){for(var Pu=Cu;Pu<this.t;++Pu)Tu[Pu-Cu]=this[Pu];Tu.t=Math.max(this.t-Cu,0),Tu.s=this.s},c$2.prototype.lShiftTo=function(Cu,Tu){var Pu,Bu=Cu%this.DB,Lu=this.DB-Bu,Ru=(1<<Lu)-1,Ou=Math.floor(Cu/this.DB),Du=this.s<<Bu&this.DM;for(Pu=this.t-1;Pu>=0;--Pu)Tu[Pu+Ou+1]=this[Pu]>>Lu|Du,Du=(this[Pu]&Ru)<<Bu;for(Pu=Ou-1;Pu>=0;--Pu)Tu[Pu]=0;Tu[Ou]=Du,Tu.t=this.t+Ou+1,Tu.s=this.s,Tu.clamp()},c$2.prototype.rShiftTo=function(Cu,Tu){Tu.s=this.s;var Pu=Math.floor(Cu/this.DB);if(Pu>=this.t)Tu.t=0;else{var Bu=Cu%this.DB,Lu=this.DB-Bu,Ru=(1<<Bu)-1;Tu[0]=this[Pu]>>Bu;for(var Ou=Pu+1;Ou<this.t;++Ou)Tu[Ou-Pu-1]|=(this[Ou]&Ru)<<Lu,Tu[Ou-Pu]=this[Ou]>>Bu;Bu>0&&(Tu[this.t-Pu-1]|=(this.s&Ru)<<Lu),Tu.t=this.t-Pu,Tu.clamp()}},c$2.prototype.subTo=function(Cu,Tu){for(var Pu=0,Bu=0,Lu=Math.min(Cu.t,this.t);Pu<Lu;)Bu+=this[Pu]-Cu[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;if(Cu.t<this.t){for(Bu-=Cu.s;Pu<this.t;)Bu+=this[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;Bu+=this.s}else{for(Bu+=this.s;Pu<Cu.t;)Bu-=Cu[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;Bu-=Cu.s}Tu.s=Bu<0?-1:0,Bu<-1?Tu[Pu++]=this.DV+Bu:Bu>0&&(Tu[Pu++]=Bu),Tu.t=Pu,Tu.clamp()},c$2.prototype.multiplyTo=function(Cu,Tu){var Pu=this.abs(),Bu=Cu.abs(),Lu=Pu.t;for(Tu.t=Lu+Bu.t;--Lu>=0;)Tu[Lu]=0;for(Lu=0;Lu<Bu.t;++Lu)Tu[Lu+Pu.t]=Pu.am(0,Bu[Lu],Tu,Lu,0,Pu.t);Tu.s=0,Tu.clamp(),this.s!=Cu.s&&c$2.ZERO.subTo(Tu,Tu)},c$2.prototype.squareTo=function(Cu){for(var Tu=this.abs(),Pu=Cu.t=2*Tu.t;--Pu>=0;)Cu[Pu]=0;for(Pu=0;Pu<Tu.t-1;++Pu){var Bu=Tu.am(Pu,Tu[Pu],Cu,2*Pu,0,1);(Cu[Pu+Tu.t]+=Tu.am(Pu+1,2*Tu[Pu],Cu,2*Pu+1,Bu,Tu.t-Pu-1))>=Tu.DV&&(Cu[Pu+Tu.t]-=Tu.DV,Cu[Pu+Tu.t+1]=1)}Cu.t>0&&(Cu[Cu.t-1]+=Tu.am(Pu,Tu[Pu],Cu,2*Pu,0,1)),Cu.s=0,Cu.clamp()},c$2.prototype.divRemTo=function(Cu,Tu,Pu){var Bu=Cu.abs();if(!(Bu.t<=0)){var Lu=this.abs();if(Lu.t<Bu.t)return Tu!=null&&Tu.fromInt(0),void(Pu!=null&&this.copyTo(Pu));Pu==null&&(Pu=d$1());var Ru=d$1(),Ou=this.s,Du=Cu.s,ku=this.DB-y$2(Bu[Bu.t-1]);ku>0?(Bu.lShiftTo(ku,Ru),Lu.lShiftTo(ku,Pu)):(Bu.copyTo(Ru),Lu.copyTo(Pu));var Fu=Ru.t,Nu=Ru[Fu-1];if(Nu!=0){var Gu=Nu*(1<<this.F1)+(Fu>1?Ru[Fu-2]>>this.F2:0),zu=this.FV/Gu,Hu=(1<<this.F1)/Gu,Wu=1<<this.F2,_h=Pu.t,Xc=_h-Fu,ju=Tu==null?d$1():Tu;for(Ru.dlShiftTo(Xc,ju),Pu.compareTo(ju)>=0&&(Pu[Pu.t++]=1,Pu.subTo(ju,Pu)),c$2.ONE.dlShiftTo(Fu,ju),ju.subTo(Ru,Ru);Ru.t<Fu;)Ru[Ru.t++]=0;for(;--Xc>=0;){var _c=Pu[--_h]==Nu?this.DM:Math.floor(Pu[_h]*zu+(Pu[_h-1]+Wu)*Hu);if((Pu[_h]+=Ru.am(0,_c,Pu,Xc,0,Fu))<_c)for(Ru.dlShiftTo(Xc,ju),Pu.subTo(ju,Pu);Pu[_h]<--_c;)Pu.subTo(ju,Pu)}Tu!=null&&(Pu.drShiftTo(Fu,Tu),Ou!=Du&&c$2.ZERO.subTo(Tu,Tu)),Pu.t=Fu,Pu.clamp(),ku>0&&Pu.rShiftTo(ku,Pu),Ou<0&&c$2.ZERO.subTo(Pu,Pu)}}},c$2.prototype.invDigit=function(){if(this.t<1)return 0;var Cu=this[0];if((1&Cu)==0)return 0;var Tu=3&Cu;return(Tu=(Tu=(Tu=(Tu=Tu*(2-(15&Cu)*Tu)&15)*(2-(255&Cu)*Tu)&255)*(2-((65535&Cu)*Tu&65535))&65535)*(2-Cu*Tu%this.DV)%this.DV)>0?this.DV-Tu:-Tu},c$2.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$2.prototype.exp=function(Cu,Tu){if(Cu>4294967295||Cu<1)return c$2.ONE;var Pu=d$1(),Bu=d$1(),Lu=Tu.convert(this),Ru=y$2(Cu)-1;for(Lu.copyTo(Pu);--Ru>=0;)if(Tu.sqrTo(Pu,Bu),(Cu&1<<Ru)>0)Tu.mulTo(Bu,Lu,Pu);else{var Ou=Pu;Pu=Bu,Bu=Ou}return Tu.revert(Pu)},c$2.prototype.toString=function(Cu){if(this.s<0)return"-"+this.negate().toString(Cu);var Tu;if(Cu==16)Tu=4;else if(Cu==8)Tu=3;else if(Cu==2)Tu=1;else if(Cu==32)Tu=5;else{if(Cu!=4)return this.toRadix(Cu);Tu=2}var Pu,Bu=(1<<Tu)-1,Lu=!1,Ru="",Ou=this.t,Du=this.DB-Ou*this.DB%Tu;if(Ou-- >0)for(Du<this.DB&&(Pu=this[Ou]>>Du)>0&&(Lu=!0,Ru=g$2(Pu));Ou>=0;)Du<Tu?(Pu=(this[Ou]&(1<<Du)-1)<<Tu-Du,Pu|=this[--Ou]>>(Du+=this.DB-Tu)):(Pu=this[Ou]>>(Du-=Tu)&Bu,Du<=0&&(Du+=this.DB,--Ou)),Pu>0&&(Lu=!0),Lu&&(Ru+=g$2(Pu));return Lu?Ru:"0"},c$2.prototype.negate=function(){var Cu=d$1();return c$2.ZERO.subTo(this,Cu),Cu},c$2.prototype.abs=function(){return this.s<0?this.negate():this},c$2.prototype.compareTo=function(Cu){var Tu=this.s-Cu.s;if(Tu!=0)return Tu;var Pu=this.t;if((Tu=Pu-Cu.t)!=0)return this.s<0?-Tu:Tu;for(;--Pu>=0;)if((Tu=this[Pu]-Cu[Pu])!=0)return Tu;return 0},c$2.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$2(this[this.t-1]^this.s&this.DM)},c$2.prototype.mod=function(Cu){var Tu=d$1();return this.abs().divRemTo(Cu,null,Tu),this.s<0&&Tu.compareTo(c$2.ZERO)>0&&Cu.subTo(Tu,Tu),Tu},c$2.prototype.modPowInt=function(Cu,Tu){var Pu;return Pu=Cu<256||Tu.isEven()?new b$2(Tu):new x$1(Tu),this.exp(Cu,Pu)},c$2.ZERO=v$2(0),c$2.ONE=v$2(1),B$2.prototype.convert=T,B$2.prototype.revert=T,B$2.prototype.mulTo=function(Cu,Tu,Pu){Cu.multiplyTo(Tu,Pu)},B$2.prototype.sqrTo=function(Cu,Tu){Cu.squareTo(Tu)},P$2.prototype.convert=function(Cu){if(Cu.s<0||Cu.t>2*this.m.t)return Cu.mod(this.m);if(Cu.compareTo(this.m)<0)return Cu;var Tu=d$1();return Cu.copyTo(Tu),this.reduce(Tu),Tu},P$2.prototype.revert=function(Cu){return Cu},P$2.prototype.reduce=function(Cu){for(Cu.drShiftTo(this.m.t-1,this.r2),Cu.t>this.m.t+1&&(Cu.t=this.m.t+1,Cu.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Cu.compareTo(this.r2)<0;)Cu.dAddOffset(1,this.m.t+1);for(Cu.subTo(this.r2,Cu);Cu.compareTo(this.m)>=0;)Cu.subTo(this.m,Cu)},P$2.prototype.mulTo=function(Cu,Tu,Pu){Cu.multiplyTo(Tu,Pu),this.reduce(Pu)},P$2.prototype.sqrTo=function(Cu,Tu){Cu.squareTo(Tu),this.reduce(Tu)};var R$3=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k$1=(1<<26)/R$3[R$3.length-1];c$2.prototype.chunkSize=function(Cu){return Math.floor(Math.LN2*this.DB/Math.log(Cu))},c$2.prototype.toRadix=function(Cu){if(Cu==null&&(Cu=10),this.signum()==0||Cu<2||Cu>36)return"0";var Tu=this.chunkSize(Cu),Pu=Math.pow(Cu,Tu),Bu=v$2(Pu),Lu=d$1(),Ru=d$1(),Ou="";for(this.divRemTo(Bu,Lu,Ru);Lu.signum()>0;)Ou=(Pu+Ru.intValue()).toString(Cu).substr(1)+Ou,Lu.divRemTo(Bu,Lu,Ru);return Ru.intValue().toString(Cu)+Ou},c$2.prototype.fromRadix=function(Cu,Tu){this.fromInt(0),Tu==null&&(Tu=10);for(var Pu=this.chunkSize(Tu),Bu=Math.pow(Tu,Pu),Lu=!1,Ru=0,Ou=0,Du=0;Du<Cu.length;++Du){var ku=m$2(Cu,Du);ku<0?Cu.charAt(Du)=="-"&&this.signum()==0&&(Lu=!0):(Ou=Tu*Ou+ku,++Ru>=Pu&&(this.dMultiply(Bu),this.dAddOffset(Ou,0),Ru=0,Ou=0))}Ru>0&&(this.dMultiply(Math.pow(Tu,Ru)),this.dAddOffset(Ou,0)),Lu&&c$2.ZERO.subTo(this,this)},c$2.prototype.fromNumber=function(Cu,Tu,Pu){if(typeof Tu=="number")if(Cu<2)this.fromInt(1);else for(this.fromNumber(Cu,Pu),this.testBit(Cu-1)||this.bitwiseTo(c$2.ONE.shiftLeft(Cu-1),E$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Tu);)this.dAddOffset(2,0),this.bitLength()>Cu&&this.subTo(c$2.ONE.shiftLeft(Cu-1),this);else{var Bu=new Array,Lu=7&Cu;Bu.length=1+(Cu>>3),Tu.nextBytes(Bu),Lu>0?Bu[0]&=(1<<Lu)-1:Bu[0]=0,this.fromString(Bu,256)}},c$2.prototype.bitwiseTo=function(Cu,Tu,Pu){var Bu,Lu,Ru=Math.min(Cu.t,this.t);for(Bu=0;Bu<Ru;++Bu)Pu[Bu]=Tu(this[Bu],Cu[Bu]);if(Cu.t<this.t){for(Lu=Cu.s&this.DM,Bu=Ru;Bu<this.t;++Bu)Pu[Bu]=Tu(this[Bu],Lu);Pu.t=this.t}else{for(Lu=this.s&this.DM,Bu=Ru;Bu<Cu.t;++Bu)Pu[Bu]=Tu(Lu,Cu[Bu]);Pu.t=Cu.t}Pu.s=Tu(this.s,Cu.s),Pu.clamp()},c$2.prototype.changeBit=function(Cu,Tu){var Pu=c$2.ONE.shiftLeft(Cu);return this.bitwiseTo(Pu,Tu,Pu),Pu},c$2.prototype.addTo=function(Cu,Tu){for(var Pu=0,Bu=0,Lu=Math.min(Cu.t,this.t);Pu<Lu;)Bu+=this[Pu]+Cu[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;if(Cu.t<this.t){for(Bu+=Cu.s;Pu<this.t;)Bu+=this[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;Bu+=this.s}else{for(Bu+=this.s;Pu<Cu.t;)Bu+=Cu[Pu],Tu[Pu++]=Bu&this.DM,Bu>>=this.DB;Bu+=Cu.s}Tu.s=Bu<0?-1:0,Bu>0?Tu[Pu++]=Bu:Bu<-1&&(Tu[Pu++]=this.DV+Bu),Tu.t=Pu,Tu.clamp()},c$2.prototype.dMultiply=function(Cu){this[this.t]=this.am(0,Cu-1,this,0,0,this.t),++this.t,this.clamp()},c$2.prototype.dAddOffset=function(Cu,Tu){if(Cu!=0){for(;this.t<=Tu;)this[this.t++]=0;for(this[Tu]+=Cu;this[Tu]>=this.DV;)this[Tu]-=this.DV,++Tu>=this.t&&(this[this.t++]=0),++this[Tu]}},c$2.prototype.multiplyLowerTo=function(Cu,Tu,Pu){var Bu,Lu=Math.min(this.t+Cu.t,Tu);for(Pu.s=0,Pu.t=Lu;Lu>0;)Pu[--Lu]=0;for(Bu=Pu.t-this.t;Lu<Bu;++Lu)Pu[Lu+this.t]=this.am(0,Cu[Lu],Pu,Lu,0,this.t);for(Bu=Math.min(Cu.t,Tu);Lu<Bu;++Lu)this.am(0,Cu[Lu],Pu,Lu,0,Tu-Lu);Pu.clamp()},c$2.prototype.multiplyUpperTo=function(Cu,Tu,Pu){--Tu;var Bu=Pu.t=this.t+Cu.t-Tu;for(Pu.s=0;--Bu>=0;)Pu[Bu]=0;for(Bu=Math.max(Tu-this.t,0);Bu<Cu.t;++Bu)Pu[this.t+Bu-Tu]=this.am(Tu-Bu,Cu[Bu],Pu,0,0,this.t+Bu-Tu);Pu.clamp(),Pu.drShiftTo(1,Pu)},c$2.prototype.modInt=function(Cu){if(Cu<=0)return 0;var Tu=this.DV%Cu,Pu=this.s<0?Cu-1:0;if(this.t>0)if(Tu==0)Pu=this[0]%Cu;else for(var Bu=this.t-1;Bu>=0;--Bu)Pu=(Tu*Pu+this[Bu])%Cu;return Pu},c$2.prototype.millerRabin=function(Cu){var Tu=this.subtract(c$2.ONE),Pu=Tu.getLowestSetBit();if(Pu<=0)return!1;var Bu=Tu.shiftRight(Pu);(Cu=Cu+1>>1)>R$3.length&&(Cu=R$3.length);for(var Lu=d$1(),Ru=0;Ru<Cu;++Ru){Lu.fromInt(R$3[Math.floor(Math.random()*R$3.length)]);var Ou=Lu.modPow(Bu,this);if(Ou.compareTo(c$2.ONE)!=0&&Ou.compareTo(Tu)!=0){for(var Du=1;Du++<Pu&&Ou.compareTo(Tu)!=0;)if((Ou=Ou.modPowInt(2,this)).compareTo(c$2.ONE)==0)return!1;if(Ou.compareTo(Tu)!=0)return!1}}return!0},c$2.prototype.clone=function(){var Cu=d$1();return this.copyTo(Cu),Cu},c$2.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$2.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$2.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$2.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$2.prototype.toByteArray=function(){var Cu=this.t,Tu=new Array;Tu[0]=this.s;var Pu,Bu=this.DB-Cu*this.DB%8,Lu=0;if(Cu-- >0)for(Bu<this.DB&&(Pu=this[Cu]>>Bu)!=(this.s&this.DM)>>Bu&&(Tu[Lu++]=Pu|this.s<<this.DB-Bu);Cu>=0;)Bu<8?(Pu=(this[Cu]&(1<<Bu)-1)<<8-Bu,Pu|=this[--Cu]>>(Bu+=this.DB-8)):(Pu=this[Cu]>>(Bu-=8)&255,Bu<=0&&(Bu+=this.DB,--Cu)),(128&Pu)!=0&&(Pu|=-256),Lu==0&&(128&this.s)!=(128&Pu)&&++Lu,(Lu>0||Pu!=this.s)&&(Tu[Lu++]=Pu);return Tu},c$2.prototype.equals=function(Cu){return this.compareTo(Cu)==0},c$2.prototype.min=function(Cu){return this.compareTo(Cu)<0?this:Cu},c$2.prototype.max=function(Cu){return this.compareTo(Cu)>0?this:Cu},c$2.prototype.and=function(Cu){var Tu=d$1();return this.bitwiseTo(Cu,w$2,Tu),Tu},c$2.prototype.or=function(Cu){var Tu=d$1();return this.bitwiseTo(Cu,E$2,Tu),Tu},c$2.prototype.xor=function(Cu){var Tu=d$1();return this.bitwiseTo(Cu,M$2,Tu),Tu},c$2.prototype.andNot=function(Cu){var Tu=d$1();return this.bitwiseTo(Cu,I$1,Tu),Tu},c$2.prototype.not=function(){for(var Cu=d$1(),Tu=0;Tu<this.t;++Tu)Cu[Tu]=this.DM&~this[Tu];return Cu.t=this.t,Cu.s=~this.s,Cu},c$2.prototype.shiftLeft=function(Cu){var Tu=d$1();return Cu<0?this.rShiftTo(-Cu,Tu):this.lShiftTo(Cu,Tu),Tu},c$2.prototype.shiftRight=function(Cu){var Tu=d$1();return Cu<0?this.lShiftTo(-Cu,Tu):this.rShiftTo(Cu,Tu),Tu},c$2.prototype.getLowestSetBit=function(){for(var Cu=0;Cu<this.t;++Cu)if(this[Cu]!=0)return Cu*this.DB+S$1(this[Cu]);return this.s<0?this.t*this.DB:-1},c$2.prototype.bitCount=function(){for(var Cu=0,Tu=this.s&this.DM,Pu=0;Pu<this.t;++Pu)Cu+=C$3(this[Pu]^Tu);return Cu},c$2.prototype.testBit=function(Cu){var Tu=Math.floor(Cu/this.DB);return Tu>=this.t?this.s!=0:(this[Tu]&1<<Cu%this.DB)!=0},c$2.prototype.setBit=function(Cu){return this.changeBit(Cu,E$2)},c$2.prototype.clearBit=function(Cu){return this.changeBit(Cu,I$1)},c$2.prototype.flipBit=function(Cu){return this.changeBit(Cu,M$2)},c$2.prototype.add=function(Cu){var Tu=d$1();return this.addTo(Cu,Tu),Tu},c$2.prototype.subtract=function(Cu){var Tu=d$1();return this.subTo(Cu,Tu),Tu},c$2.prototype.multiply=function(Cu){var Tu=d$1();return this.multiplyTo(Cu,Tu),Tu},c$2.prototype.divide=function(Cu){var Tu=d$1();return this.divRemTo(Cu,Tu,null),Tu},c$2.prototype.remainder=function(Cu){var Tu=d$1();return this.divRemTo(Cu,null,Tu),Tu},c$2.prototype.divideAndRemainder=function(Cu){var Tu=d$1(),Pu=d$1();return this.divRemTo(Cu,Tu,Pu),new Array(Tu,Pu)},c$2.prototype.modPow=function(Cu,Tu){var Pu,Bu,Lu=Cu.bitLength(),Ru=v$2(1);if(Lu<=0)return Ru;Pu=Lu<18?1:Lu<48?3:Lu<144?4:Lu<768?5:6,Bu=Lu<8?new b$2(Tu):Tu.isEven()?new P$2(Tu):new x$1(Tu);var Ou=new Array,Du=3,ku=Pu-1,Fu=(1<<Pu)-1;if(Ou[1]=Bu.convert(this),Pu>1){var Nu=d$1();for(Bu.sqrTo(Ou[1],Nu);Du<=Fu;)Ou[Du]=d$1(),Bu.mulTo(Nu,Ou[Du-2],Ou[Du]),Du+=2}var Gu,zu,Hu=Cu.t-1,Wu=!0,_h=d$1();for(Lu=y$2(Cu[Hu])-1;Hu>=0;){for(Lu>=ku?Gu=Cu[Hu]>>Lu-ku&Fu:(Gu=(Cu[Hu]&(1<<Lu+1)-1)<<ku-Lu,Hu>0&&(Gu|=Cu[Hu-1]>>this.DB+Lu-ku)),Du=Pu;(1&Gu)==0;)Gu>>=1,--Du;if((Lu-=Du)<0&&(Lu+=this.DB,--Hu),Wu)Ou[Gu].copyTo(Ru),Wu=!1;else{for(;Du>1;)Bu.sqrTo(Ru,_h),Bu.sqrTo(_h,Ru),Du-=2;Du>0?Bu.sqrTo(Ru,_h):(zu=Ru,Ru=_h,_h=zu),Bu.mulTo(_h,Ou[Gu],Ru)}for(;Hu>=0&&(Cu[Hu]&1<<Lu)==0;)Bu.sqrTo(Ru,_h),zu=Ru,Ru=_h,_h=zu,--Lu<0&&(Lu=this.DB-1,--Hu)}return Bu.revert(Ru)},c$2.prototype.modInverse=function(Cu){var Tu=Cu.isEven();if(this.isEven()&&Tu||Cu.signum()==0)return c$2.ZERO;for(var Pu=Cu.clone(),Bu=this.clone(),Lu=v$2(1),Ru=v$2(0),Ou=v$2(0),Du=v$2(1);Pu.signum()!=0;){for(;Pu.isEven();)Pu.rShiftTo(1,Pu),Tu?(Lu.isEven()&&Ru.isEven()||(Lu.addTo(this,Lu),Ru.subTo(Cu,Ru)),Lu.rShiftTo(1,Lu)):Ru.isEven()||Ru.subTo(Cu,Ru),Ru.rShiftTo(1,Ru);for(;Bu.isEven();)Bu.rShiftTo(1,Bu),Tu?(Ou.isEven()&&Du.isEven()||(Ou.addTo(this,Ou),Du.subTo(Cu,Du)),Ou.rShiftTo(1,Ou)):Du.isEven()||Du.subTo(Cu,Du),Du.rShiftTo(1,Du);Pu.compareTo(Bu)>=0?(Pu.subTo(Bu,Pu),Tu&&Lu.subTo(Ou,Lu),Ru.subTo(Du,Ru)):(Bu.subTo(Pu,Bu),Tu&&Ou.subTo(Lu,Ou),Du.subTo(Ru,Du))}return Bu.compareTo(c$2.ONE)!=0?c$2.ZERO:Du.compareTo(Cu)>=0?Du.subtract(Cu):Du.signum()<0?(Du.addTo(Cu,Du),Du.signum()<0?Du.add(Cu):Du):Du},c$2.prototype.pow=function(Cu){return this.exp(Cu,new B$2)},c$2.prototype.gcd=function(Cu){var Tu=this.s<0?this.negate():this.clone(),Pu=Cu.s<0?Cu.negate():Cu.clone();if(Tu.compareTo(Pu)<0){var Bu=Tu;Tu=Pu,Pu=Bu}var Lu=Tu.getLowestSetBit(),Ru=Pu.getLowestSetBit();if(Ru<0)return Tu;for(Lu<Ru&&(Ru=Lu),Ru>0&&(Tu.rShiftTo(Ru,Tu),Pu.rShiftTo(Ru,Pu));Tu.signum()>0;)(Lu=Tu.getLowestSetBit())>0&&Tu.rShiftTo(Lu,Tu),(Lu=Pu.getLowestSetBit())>0&&Pu.rShiftTo(Lu,Pu),Tu.compareTo(Pu)>=0?(Tu.subTo(Pu,Tu),Tu.rShiftTo(1,Tu)):(Pu.subTo(Tu,Pu),Pu.rShiftTo(1,Pu));return Ru>0&&Pu.lShiftTo(Ru,Pu),Pu},c$2.prototype.isProbablePrime=function(Cu){var Tu,Pu=this.abs();if(Pu.t==1&&Pu[0]<=R$3[R$3.length-1]){for(Tu=0;Tu<R$3.length;++Tu)if(Pu[0]==R$3[Tu])return!0;return!1}if(Pu.isEven())return!1;for(Tu=1;Tu<R$3.length;){for(var Bu=R$3[Tu],Lu=Tu+1;Lu<R$3.length&&Bu<k$1;)Bu*=R$3[Lu++];for(Bu=Pu.modInt(Bu);Tu<Lu;)if(Bu%R$3[Tu++]==0)return!1}return Pu.millerRabin(Cu)},c$2.prototype.square=function(){var Cu=d$1();return this.squareTo(Cu),Cu};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L$2(Cu){var Tu,Pu,Bu="";for(Tu=0;Tu+3<=Cu.length;Tu+=3)Pu=parseInt(Cu.substring(Tu,Tu+3),16),Bu+=D$1.charAt(Pu>>6)+D$1.charAt(63&Pu);for(Tu+1==Cu.length?(Pu=parseInt(Cu.substring(Tu,Tu+1),16),Bu+=D$1.charAt(Pu<<2)):Tu+2==Cu.length&&(Pu=parseInt(Cu.substring(Tu,Tu+2),16),Bu+=D$1.charAt(Pu>>2)+D$1.charAt((3&Pu)<<4));(3&Bu.length)>0;)Bu+="=";return Bu}function O$2(Cu){var Tu,Pu,Bu,Lu="",Ru=0;for(Tu=0;Tu<Cu.length&&Cu.charAt(Tu)!="=";++Tu)(Bu=D$1.indexOf(Cu.charAt(Tu)))<0||(Ru==0?(Lu+=g$2(Bu>>2),Pu=3&Bu,Ru=1):Ru==1?(Lu+=g$2(Pu<<2|Bu>>4),Pu=15&Bu,Ru=2):Ru==2?(Lu+=g$2(Pu),Lu+=g$2(Bu>>2),Pu=3&Bu,Ru=3):(Lu+=g$2(Pu<<2|Bu>>4),Lu+=g$2(15&Bu),Ru=0));return Ru==1&&(Lu+=g$2(Pu<<2)),Lu}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function N$2(){this.i=0,this.j=0,this.S=new Array}N$2.prototype.init=function(Cu){var Tu,Pu,Bu;for(Tu=0;Tu<256;++Tu)this.S[Tu]=Tu;for(Pu=0,Tu=0;Tu<256;++Tu)Pu=Pu+this.S[Tu]+Cu[Tu%Cu.length]&255,Bu=this.S[Tu],this.S[Tu]=this.S[Pu],this.S[Pu]=Bu;this.i=0,this.j=0},N$2.prototype.next=function(){var Cu;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,Cu=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=Cu,this.S[Cu+this.S[this.i]&255]};var F$2,Q$2,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function _$1(){var Cu;Cu=new Date().getTime(),Q$2[V$1++]^=255&Cu,Q$2[V$1++]^=Cu>>8&255,Q$2[V$1++]^=Cu>>16&255,Q$2[V$1++]^=Cu>>24&255,V$1>=256&&(V$1-=256)}if(Q$2==null){var H$2;if(Q$2=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var q$2=window.crypto||window.msCrypto;if(q$2.getRandomValues){var z=new Uint8Array(32);for(q$2.getRandomValues(z),H$2=0;H$2<32;++H$2)Q$2[V$1++]=z[H$2]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var K$1=window.crypto.random(32);for(H$2=0;H$2<K$1.length;++H$2)Q$2[V$1++]=255&K$1.charCodeAt(H$2)}}for(;V$1<256;)H$2=Math.floor(65536*Math.random()),Q$2[V$1++]=H$2>>>8,Q$2[V$1++]=255&H$2;V$1=0,_$1()}function U$1(){if(F$2==null){for(_$1(),(F$2=new N$2).init(Q$2),V$1=0;V$1<Q$2.length;++V$1)Q$2[V$1]=0;V$1=0}return F$2.next()}function j$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G$1(Cu,Tu){return new c$2(Cu,Tu)}function W$3(Cu,Tu,Pu){for(var Bu="",Lu=0;Bu.length<Tu;)Bu+=Pu(String.fromCharCode.apply(String,Cu.concat([(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu]))),Lu+=1;return Bu}function X$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y$1(Cu,Tu,Pu){for(var Bu="",Lu=0;Bu.length<Tu;)Bu+=Pu(Cu+String.fromCharCode.apply(String,[(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu])),Lu+=1;return Bu}function Z$1(Cu){for(var Tu="",Pu=0;Pu<Cu.length;Pu++){var Bu=Cu[Pu].toString(16);Bu.length==1&&(Bu="0"+Bu),Tu+=Bu}return Tu}function J$1(Cu){return Z$1(function(Tu){for(var Pu=new Array,Bu=0;Bu<Tu.length;Bu++)Pu[Bu]=Tu.charCodeAt(Bu);return Pu}(Cu))}function $$1(Cu){return Cu.length%4==2?Cu+="==":Cu.length%4==3&&(Cu+="="),Cu=(Cu=Cu.replace(/-/g,"+")).replace(/_/g,"/")}function ee(Cu){return Cu.length%2==1&&(Cu="0"+Cu),function(Tu){return(Tu=(Tu=Tu.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(L$2(Cu))}function te(Cu){return O$2($$1(Cu))}function ie$1(Cu){return function(Tu){return Tu.replace(/%/g,"")}(function(Tu){for(var Pu=encodeURIComponent(Tu),Bu="",Lu=0;Lu<Pu.length;Lu++)Pu[Lu]=="%"?(Bu+=Pu.substr(Lu,3),Lu+=2):Bu=Bu+"%"+J$1(Pu[Lu]);return Bu}(Cu))}function ne(Cu){return decodeURIComponent(function(Tu){return Tu.replace(/(..)/g,"%$1")}(Cu))}function re$1(Cu){for(var Tu="",Pu=0;Pu<Cu.length-1;Pu+=2)Tu+=String.fromCharCode(parseInt(Cu.substr(Pu,2),16));return Tu}function oe$1(Cu){for(var Tu="",Pu=0;Pu<Cu.length;Pu++)Tu+=("0"+Cu.charCodeAt(Pu).toString(16)).slice(-2);return Tu}function se$1(Cu){var Tu=function(Pu){return L$2(Pu)}(Cu).replace(/(.{64})/g,`$1\r
`);return Tu=Tu.replace(/\r\n$/,"")}function ae$1(Cu,Tu){return"-----BEGIN "+Tu+`-----\r
`+se$1(Cu)+`\r
-----END `+Tu+`-----\r
`}function le$1(Cu,Tu){if(Cu.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+Tu;return function(Pu){return O$2(Pu.replace(/[^0-9A-Za-z\/+=]*/g,""))}(Cu=Tu!==void 0?(Cu=Cu.replace(new RegExp("^[^]*-----BEGIN "+Tu+"-----"),"")).replace(new RegExp("-----END "+Tu+"-----[^]*$"),""):(Cu=Cu.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ue$1(Cu){var Tu="malformed hex value";if(!Cu.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Tu;if(Cu.length!=8)return Cu.length==32?function(Pu){if(!Pu.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var Bu=(Pu=Pu.toLowerCase()).match(/.{1,4}/g),Lu=0;Lu<8;Lu++)Bu[Lu]=Bu[Lu].replace(/^0+/,""),Bu[Lu]==""&&(Bu[Lu]="0");var Ru=(Pu=":"+Bu.join(":")+":").match(/:(0:){2,}/g);if(Ru===null)return Pu.slice(1,-1);var Ou="";for(Lu=0;Lu<Ru.length;Lu++)Ru[Lu].length>Ou.length&&(Ou=Ru[Lu]);return(Pu=Pu.replace(Ou,"::")).slice(1,-1)}(Cu):Cu;try{return parseInt(Cu.substr(0,2),16)+"."+parseInt(Cu.substr(2,2),16)+"."+parseInt(Cu.substr(4,2),16)+"."+parseInt(Cu.substr(6,2),16)}catch{throw Tu}}function he$1(Cu){return Cu.match(/.{4}/g).map(function(Tu){var Pu=parseInt(Tu.substr(0,2),16),Bu=parseInt(Tu.substr(2),16);if(Pu==0&Bu<128)return String.fromCharCode(Bu);if(Pu<8){var Lu=128|63&Bu;return ne((192|(7&Pu)<<3|(192&Bu)>>6).toString(16)+Lu.toString(16))}Lu=128|(15&Pu)<<2|(192&Bu)>>6;var Ru=128|63&Bu;return ne((224|(240&Pu)>>4).toString(16)+Lu.toString(16)+Ru.toString(16))}).join("")}function ce(Cu){return!(Cu.length%2!=0||!Cu.match(/^[0-9a-f]+$/)&&!Cu.match(/^[0-9A-F]+$/))}function de$1(Cu){return Cu.length%2==1?"0"+Cu:Cu.substr(0,1)>"7"?"00"+Cu:Cu}j$1.prototype.nextBytes=function(Cu){var Tu;for(Tu=0;Tu<Cu.length;++Tu)Cu[Tu]=U$1()},X$1.prototype.doPublic=function(Cu){return Cu.modPowInt(this.e,this.n)},X$1.prototype.setPublic=function(Cu,Tu){if(this.isPublic=!0,this.isPrivate=!1,typeof Cu!="string")this.n=Cu,this.e=Tu;else{if(!(Cu!=null&&Tu!=null&&Cu.length>0&&Tu.length>0))throw"Invalid RSA public key";this.n=G$1(Cu,16),this.e=parseInt(Tu,16)}},X$1.prototype.encrypt=function(Cu){var Tu=function(Lu,Ru){if(Ru<Lu.length+11)throw"Message too long for RSA";for(var Ou=new Array,Du=Lu.length-1;Du>=0&&Ru>0;){var ku=Lu.charCodeAt(Du--);ku<128?Ou[--Ru]=ku:ku>127&&ku<2048?(Ou[--Ru]=63&ku|128,Ou[--Ru]=ku>>6|192):(Ou[--Ru]=63&ku|128,Ou[--Ru]=ku>>6&63|128,Ou[--Ru]=ku>>12|224)}Ou[--Ru]=0;for(var Fu=new j$1,Nu=new Array;Ru>2;){for(Nu[0]=0;Nu[0]==0;)Fu.nextBytes(Nu);Ou[--Ru]=Nu[0]}return Ou[--Ru]=2,Ou[--Ru]=0,new c$2(Ou)}(Cu,this.n.bitLength()+7>>3);if(Tu==null)return null;var Pu=this.doPublic(Tu);if(Pu==null)return null;var Bu=Pu.toString(16);return(1&Bu.length)==0?Bu:"0"+Bu},X$1.prototype.encryptOAEP=function(Cu,Tu,Pu){var Bu=function(Ou,Du,ku,Fu){var Nu=l$3.crypto.MessageDigest,Gu=l$3.crypto.Util,zu=null;if(ku||(ku="sha1"),typeof ku=="string"&&(zu=Nu.getCanonicalAlgName(ku),Fu=Nu.getHashLength(zu),ku=function(tp){return re$1(Gu.hashHex(oe$1(tp),zu))}),Ou.length+2*Fu+2>Du)throw"Message too long for RSA";var Hu,Wu="";for(Hu=0;Hu<Du-Ou.length-2*Fu-2;Hu+=1)Wu+="\0";var _h=ku("")+Wu+""+Ou,Xc=new Array(Fu);new j$1().nextBytes(Xc);var ju=W$3(Xc,_h.length,ku),_c=[];for(Hu=0;Hu<_h.length;Hu+=1)_c[Hu]=_h.charCodeAt(Hu)^ju.charCodeAt(Hu);var _f=W$3(_c,Xc.length,ku),ep=[0];for(Hu=0;Hu<Xc.length;Hu+=1)ep[Hu+1]=Xc[Hu]^_f.charCodeAt(Hu);return new c$2(ep.concat(_c))}(Cu,this.n.bitLength()+7>>3,Tu,Pu);if(Bu==null)return null;var Lu=this.doPublic(Bu);if(Lu==null)return null;var Ru=Lu.toString(16);return(1&Ru.length)==0?Ru:"0"+Ru},X$1.prototype.type="RSA",X$1.prototype.doPrivate=function(Cu){if(this.p==null||this.q==null)return Cu.modPow(this.d,this.n);for(var Tu=Cu.mod(this.p).modPow(this.dmp1,this.p),Pu=Cu.mod(this.q).modPow(this.dmq1,this.q);Tu.compareTo(Pu)<0;)Tu=Tu.add(this.p);return Tu.subtract(Pu).multiply(this.coeff).mod(this.p).multiply(this.q).add(Pu)},X$1.prototype.setPrivate=function(Cu,Tu,Pu){if(this.isPrivate=!0,typeof Cu!="string")this.n=Cu,this.e=Tu,this.d=Pu;else{if(!(Cu!=null&&Tu!=null&&Cu.length>0&&Tu.length>0))throw"Invalid RSA private key";this.n=G$1(Cu,16),this.e=parseInt(Tu,16),this.d=G$1(Pu,16)}},X$1.prototype.setPrivateEx=function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){if(this.isPrivate=!0,this.isPublic=!1,Cu==null)throw"RSASetPrivateEx N == null";if(Tu==null)throw"RSASetPrivateEx E == null";if(Cu.length==0)throw"RSASetPrivateEx N.length == 0";if(Tu.length==0)throw"RSASetPrivateEx E.length == 0";if(!(Cu!=null&&Tu!=null&&Cu.length>0&&Tu.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G$1(Cu,16),this.e=parseInt(Tu,16),this.d=G$1(Pu,16),this.p=G$1(Bu,16),this.q=G$1(Lu,16),this.dmp1=G$1(Ru,16),this.dmq1=G$1(Ou,16),this.coeff=G$1(Du,16)},X$1.prototype.generate=function(Cu,Tu){var Pu=new j$1,Bu=Cu>>1;this.e=parseInt(Tu,16);for(var Lu=new c$2(Tu,16);;){for(;this.p=new c$2(Cu-Bu,1,Pu),this.p.subtract(c$2.ONE).gcd(Lu).compareTo(c$2.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$2(Bu,1,Pu),this.q.subtract(c$2.ONE).gcd(Lu).compareTo(c$2.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Ru=this.p;this.p=this.q,this.q=Ru}var Ou=this.p.subtract(c$2.ONE),Du=this.q.subtract(c$2.ONE),ku=Ou.multiply(Du);if(ku.gcd(Lu).compareTo(c$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==Cu)){this.d=Lu.modInverse(ku),this.dmp1=this.d.mod(Ou),this.dmq1=this.d.mod(Du),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X$1.prototype.decrypt=function(Cu){if(Cu.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Tu=G$1(Cu,16),Pu=this.doPrivate(Tu);return Pu==null?null:function(Bu,Lu){for(var Ru=Bu.toByteArray(),Ou=0;Ou<Ru.length&&Ru[Ou]==0;)++Ou;if(Ru.length-Ou!=Lu-1||Ru[Ou]!=2)return null;for(++Ou;Ru[Ou]!=0;)if(++Ou>=Ru.length)return null;for(var Du="";++Ou<Ru.length;){var ku=255&Ru[Ou];ku<128?Du+=String.fromCharCode(ku):ku>191&&ku<224?(Du+=String.fromCharCode((31&ku)<<6|63&Ru[Ou+1]),++Ou):(Du+=String.fromCharCode((15&ku)<<12|(63&Ru[Ou+1])<<6|63&Ru[Ou+2]),Ou+=2)}return Du}(Pu,this.n.bitLength()+7>>3)},X$1.prototype.decryptOAEP=function(Cu,Tu,Pu){if(Cu.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Bu=G$1(Cu,16),Lu=this.doPrivate(Bu);return Lu==null?null:function(Ru,Ou,Du,ku){var Fu=l$3.crypto.MessageDigest,Nu=l$3.crypto.Util,Gu=null;for(Du||(Du="sha1"),typeof Du=="string"&&(Gu=Fu.getCanonicalAlgName(Du),ku=Fu.getHashLength(Gu),Du=function(ep){return re$1(Nu.hashHex(oe$1(ep),Gu))}),Ru=Ru.toByteArray(),zu=0;zu<Ru.length;zu+=1)Ru[zu]&=255;for(;Ru.length<Ou;)Ru.unshift(0);if((Ru=String.fromCharCode.apply(String,Ru)).length<2*ku+2)throw"Cipher too short";var zu,Hu=Ru.substr(1,ku),Wu=Ru.substr(ku+1),_h=Y$1(Wu,ku,Du),Xc=[];for(zu=0;zu<Hu.length;zu+=1)Xc[zu]=Hu.charCodeAt(zu)^_h.charCodeAt(zu);var ju=Y$1(String.fromCharCode.apply(String,Xc),Ru.length-ku,Du),_c=[];for(zu=0;zu<Wu.length;zu+=1)_c[zu]=Wu.charCodeAt(zu)^ju.charCodeAt(zu);if((_c=String.fromCharCode.apply(String,_c)).substr(0,ku)!==Du(""))throw"Hash mismatch";var _f=(_c=_c.substr(ku)).indexOf("");if((_f!=-1?_c.substr(0,_f).lastIndexOf("\0"):-1)+1!=_f)throw"Malformed data";return _c.substr(_f+1)}(Lu,this.n.bitLength()+7>>3,Tu,Pu)},l$3.lang!==void 0&&l$3.lang||(l$3.lang={}),l$3.lang.String=function(){},l$3.lang.String.isInteger=function(Cu){return!!Cu.match(/^[0-9]+$/)||!!Cu.match(/^-[0-9]+$/)},l$3.lang.String.isHex=function(Cu){return ce(Cu)},l$3.lang.String.isBase64=function(Cu){return!(!(Cu=Cu.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||Cu.length%4!=0)},l$3.lang.String.isBase64URL=function(Cu){return!Cu.match(/[+/=]/)&&(Cu=$$1(Cu),l$3.lang.String.isBase64(Cu))},l$3.lang.String.isIntegerArray=function(Cu){return!!(Cu=Cu.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},l$3.lang.String.isPrintable=function(Cu){return Cu.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},l$3.lang.String.isIA5=function(Cu){return Cu.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},l$3.lang.String.isMail=function(Cu){return Cu.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pe=function(Cu,Tu,Pu){return Pu==null&&(Pu="0"),Cu.length>=Tu?Cu:new Array(Tu-Cu.length+1).join(Pu)+Cu};function fe$1(Cu,Tu){var Pu=function(){};Pu.prototype=Tu.prototype,Cu.prototype=new Pu,Cu.prototype.constructor=Cu,Cu.superclass=Tu.prototype,Tu.prototype.constructor==Object.prototype.constructor&&(Tu.prototype.constructor=Tu)}l$3.crypto!==void 0&&l$3.crypto||(l$3.crypto={}),l$3.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$2.algo.MD5,sha1:h$2.algo.SHA1,sha224:h$2.algo.SHA224,sha256:h$2.algo.SHA256,sha384:h$2.algo.SHA384,sha512:h$2.algo.SHA512,ripemd160:h$2.algo.RIPEMD160},this.getDigestInfoHex=function(Cu,Tu){if(this.DIGESTINFOHEAD[Tu]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+Tu;return this.DIGESTINFOHEAD[Tu]+Cu},this.getPaddedDigestInfoHex=function(Cu,Tu,Pu){var Bu=this.getDigestInfoHex(Cu,Tu),Lu=Pu/4;if(Bu.length+22>Lu)throw"key is too short for SigAlg: keylen="+Pu+","+Tu;for(var Ru="0001",Ou="00"+Bu,Du="",ku=Lu-Ru.length-Ou.length,Fu=0;Fu<ku;Fu+=2)Du+="ff";return Ru+Du+Ou},this.hashString=function(Cu,Tu){return new l$3.crypto.MessageDigest({alg:Tu}).digestString(Cu)},this.hashHex=function(Cu,Tu){return new l$3.crypto.MessageDigest({alg:Tu}).digestHex(Cu)},this.sha1=function(Cu){return this.hashString(Cu,"sha1")},this.sha256=function(Cu){return this.hashString(Cu,"sha256")},this.sha256Hex=function(Cu){return this.hashHex(Cu,"sha256")},this.sha512=function(Cu){return this.hashString(Cu,"sha512")},this.sha512Hex=function(Cu){return this.hashHex(Cu,"sha512")},this.isKey=function(Cu){return Cu instanceof X$1||Cu instanceof l$3.crypto.DSA||Cu instanceof l$3.crypto.ECDSA}},l$3.crypto.Util.md5=function(Cu){return new l$3.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(Cu)},l$3.crypto.Util.ripemd160=function(Cu){return new l$3.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(Cu)},l$3.crypto.Util.SECURERANDOMGEN=new j$1,l$3.crypto.Util.getRandomHexOfNbytes=function(Cu){var Tu=new Array(Cu);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Tu),Z$1(Tu)},l$3.crypto.Util.getRandomBigIntegerOfNbytes=function(Cu){return new c$2(l$3.crypto.Util.getRandomHexOfNbytes(Cu),16)},l$3.crypto.Util.getRandomHexOfNbits=function(Cu){var Tu=Cu%8,Pu=new Array((Cu-Tu)/8+1);return l$3.crypto.Util.SECURERANDOMGEN.nextBytes(Pu),Pu[0]=(255<<Tu&255^255)&Pu[0],Z$1(Pu)},l$3.crypto.Util.getRandomBigIntegerOfNbits=function(Cu){return new c$2(l$3.crypto.Util.getRandomHexOfNbits(Cu),16)},l$3.crypto.Util.getRandomBigIntegerZeroToMax=function(Cu){for(var Tu=Cu.bitLength();;){var Pu=l$3.crypto.Util.getRandomBigIntegerOfNbits(Tu);if(Cu.compareTo(Pu)!=-1)return Pu}},l$3.crypto.Util.getRandomBigIntegerMinToMax=function(Cu,Tu){var Pu=Cu.compareTo(Tu);if(Pu==1)throw"biMin is greater than biMax";if(Pu==0)return Cu;var Bu=Tu.subtract(Cu);return l$3.crypto.Util.getRandomBigIntegerZeroToMax(Bu).add(Cu)},l$3.crypto.MessageDigest=function(Cu){this.setAlgAndProvider=function(Tu,Pu){if((Tu=l$3.crypto.MessageDigest.getCanonicalAlgName(Tu))!==null&&Pu===void 0&&(Pu=l$3.crypto.Util.DEFAULTPROVIDER[Tu]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Tu)!=-1&&Pu=="cryptojs"){try{this.md=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Tu].create()}catch(Bu){throw"setAlgAndProvider hash alg set fail alg="+Tu+"/"+Bu}this.updateString=function(Bu){this.md.update(Bu)},this.updateHex=function(Bu){var Lu=h$2.enc.Hex.parse(Bu);this.md.update(Lu)},this.digest=function(){return this.md.finalize().toString(h$2.enc.Hex)},this.digestString=function(Bu){return this.updateString(Bu),this.digest()},this.digestHex=function(Bu){return this.updateHex(Bu),this.digest()}}if(":sha256:".indexOf(Tu)!=-1&&Pu=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Bu){throw"setAlgAndProvider hash alg set fail alg="+Tu+"/"+Bu}this.updateString=function(Bu){this.md.update(Bu)},this.updateHex=function(Bu){var Lu=sjcl.codec.hex.toBits(Bu);this.md.update(Lu)},this.digest=function(){var Bu=this.md.finalize();return sjcl.codec.hex.fromBits(Bu)},this.digestString=function(Bu){return this.updateString(Bu),this.digest()},this.digestHex=function(Bu){return this.updateHex(Bu),this.digest()}}},this.updateString=function(Tu){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(Tu){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(Tu){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},Cu!==void 0&&Cu.alg!==void 0&&(this.algName=Cu.alg,Cu.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},l$3.crypto.MessageDigest.getCanonicalAlgName=function(Cu){return typeof Cu=="string"&&(Cu=(Cu=Cu.toLowerCase()).replace(/-/,"")),Cu},l$3.crypto.MessageDigest.getHashLength=function(Cu){var Tu=l$3.crypto.MessageDigest,Pu=Tu.getCanonicalAlgName(Cu);if(Tu.HASHLENGTH[Pu]===void 0)throw"not supported algorithm: "+Cu;return Tu.HASHLENGTH[Pu]},l$3.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},l$3.crypto.Mac=function(Cu){this.setAlgAndProvider=function(Tu,Pu){if((Tu=Tu.toLowerCase())==null&&(Tu="hmacsha1"),(Tu=Tu.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+Tu;Pu===void 0&&(Pu=l$3.crypto.Util.DEFAULTPROVIDER[Tu]),this.algProv=Tu+"/"+Pu;var Bu=Tu.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(Bu)!=-1&&Pu=="cryptojs"){try{var Lu=l$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[Bu];this.mac=h$2.algo.HMAC.create(Lu,this.pass)}catch(Ru){throw"setAlgAndProvider hash alg set fail hashAlg="+Bu+"/"+Ru}this.updateString=function(Ru){this.mac.update(Ru)},this.updateHex=function(Ru){var Ou=h$2.enc.Hex.parse(Ru);this.mac.update(Ou)},this.doFinal=function(){return this.mac.finalize().toString(h$2.enc.Hex)},this.doFinalString=function(Ru){return this.updateString(Ru),this.doFinal()},this.doFinalHex=function(Ru){return this.updateHex(Ru),this.doFinal()}}},this.updateString=function(Tu){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(Tu){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(Tu){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(Tu){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(Tu){if(typeof Tu=="string"){var Pu=Tu;return Tu.length%2!=1&&Tu.match(/^[0-9A-Fa-f]+$/)||(Pu=oe$1(Tu)),void(this.pass=h$2.enc.Hex.parse(Pu))}if(typeof Tu!="object")throw"KJUR.crypto.Mac unsupported password type: "+Tu;if(Pu=null,Tu.hex!==void 0){if(Tu.hex.length%2!=0||!Tu.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+Tu.hex;Pu=Tu.hex}if(Tu.utf8!==void 0&&(Pu=ie$1(Tu.utf8)),Tu.rstr!==void 0&&(Pu=oe$1(Tu.rstr)),Tu.b64!==void 0&&(Pu=O$2(Tu.b64)),Tu.b64u!==void 0&&(Pu=te(Tu.b64u)),Pu==null)throw"KJUR.crypto.Mac unsupported password type: "+Tu;this.pass=h$2.enc.Hex.parse(Pu)},Cu!==void 0&&(Cu.pass!==void 0&&this.setPassword(Cu.pass),Cu.alg!==void 0&&(this.algName=Cu.alg,Cu.prov===void 0&&(this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},l$3.crypto.Signature=function(Cu){var Tu=null;if(this._setAlgNames=function(){var Pu=this.algName.match(/^(.+)with(.+)$/);Pu&&(this.mdAlgName=Pu[1].toLowerCase(),this.pubkeyAlgName=Pu[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Pu,Bu){for(var Lu="",Ru=Bu/4-Pu.length,Ou=0;Ou<Ru;Ou++)Lu+="0";return Lu+Pu},this.setAlgAndProvider=function(Pu,Bu){if(this._setAlgNames(),Bu!="cryptojs/jsrsa")throw new Error("provider not supported: "+Bu);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new l$3.crypto.MessageDigest({alg:this.mdAlgName})}catch(Lu){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Lu)}this.init=function(Lu,Ru){var Ou=null;try{Ou=Ru===void 0?Ee.getKey(Lu):Ee.getKey(Lu,Ru)}catch(Du){throw"init failed:"+Du}if(Ou.isPrivate===!0)this.prvKey=Ou,this.state="SIGN";else{if(Ou.isPublic!==!0)throw"init failed.:"+Ou;this.pubKey=Ou,this.state="VERIFY"}},this.updateString=function(Lu){this.md.updateString(Lu)},this.updateHex=function(Lu){this.md.updateHex(Lu)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.prvKey=new l$3.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof l$3.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof l$3.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Lu){return this.updateString(Lu),this.sign()},this.signHex=function(Lu){return this.updateHex(Lu),this.sign()},this.verify=function(Lu){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&l$3.crypto.ECDSA!==void 0&&(this.pubKey=new l$3.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Lu,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);if(l$3.crypto.ECDSA!==void 0&&this.pubKey instanceof l$3.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);if(l$3.crypto.DSA!==void 0&&this.pubKey instanceof l$3.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Lu);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Pu,Bu){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Pu){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Pu){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Pu){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Pu){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Pu){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=Cu,Cu!==void 0&&(Cu.alg!==void 0&&(this.algName=Cu.alg,Cu.prov===void 0?this.provName=l$3.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=Cu.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),Cu.psssaltlen!==void 0&&(this.pssSaltLen=Cu.psssaltlen),Cu.prvkeypem!==void 0)){if(Cu.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{Tu=Ee.getKey(Cu.prvkeypem),this.init(Tu)}catch(Pu){throw"fatal error to load pem private key: "+Pu}}},l$3.crypto.Cipher=function(Cu){},l$3.crypto.Cipher.encrypt=function(Cu,Tu,Pu){if(Tu instanceof X$1&&Tu.isPublic){var Bu=l$3.crypto.Cipher.getAlgByKeyAndName(Tu,Pu);if(Bu==="RSA")return Tu.encrypt(Cu);if(Bu==="RSAOAEP")return Tu.encryptOAEP(Cu,"sha1");var Lu=Bu.match(/^RSAOAEP(\d+)$/);if(Lu!==null)return Tu.encryptOAEP(Cu,"sha"+Lu[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Pu}throw"Cipher.encrypt: unsupported key or algorithm"},l$3.crypto.Cipher.decrypt=function(Cu,Tu,Pu){if(Tu instanceof X$1&&Tu.isPrivate){var Bu=l$3.crypto.Cipher.getAlgByKeyAndName(Tu,Pu);if(Bu==="RSA")return Tu.decrypt(Cu);if(Bu==="RSAOAEP")return Tu.decryptOAEP(Cu,"sha1");var Lu=Bu.match(/^RSAOAEP(\d+)$/);if(Lu!==null)return Tu.decryptOAEP(Cu,"sha"+Lu[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Pu}throw"Cipher.decrypt: unsupported key or algorithm"},l$3.crypto.Cipher.getAlgByKeyAndName=function(Cu,Tu){if(Cu instanceof X$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(Tu)!=-1)return Tu;if(Tu==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+Tu}throw"getAlgByKeyAndName: not supported algorithm name: "+Tu},l$3.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Ae,ge$1,me$1,ve$1,ye,be$1,xe,we,Ee=(Ae=function(Cu,Tu,Pu){return ge$1(h$2.AES,Cu,Tu,Pu)},ge$1=function(Cu,Tu,Pu,Bu){var Lu=h$2.enc.Hex.parse(Tu),Ru=h$2.enc.Hex.parse(Pu),Ou=h$2.enc.Hex.parse(Bu),Du={};Du.key=Ru,Du.iv=Ou,Du.ciphertext=Lu;var ku=Cu.decrypt(Du,Ru,{iv:Ou});return h$2.enc.Hex.stringify(ku)},me$1=function(Cu,Tu,Pu){return ve$1(h$2.AES,Cu,Tu,Pu)},ve$1=function(Cu,Tu,Pu,Bu){var Lu=h$2.enc.Hex.parse(Tu),Ru=h$2.enc.Hex.parse(Pu),Ou=h$2.enc.Hex.parse(Bu),Du=Cu.encrypt(Lu,Ru,{iv:Ou}),ku=h$2.enc.Hex.parse(Du.toString());return h$2.enc.Base64.stringify(ku)},ye={"AES-256-CBC":{proc:Ae,eproc:me$1,keylen:32,ivlen:16},"AES-192-CBC":{proc:Ae,eproc:me$1,keylen:24,ivlen:16},"AES-128-CBC":{proc:Ae,eproc:me$1,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(Cu,Tu,Pu){return ge$1(h$2.TripleDES,Cu,Tu,Pu)},eproc:function(Cu,Tu,Pu){return ve$1(h$2.TripleDES,Cu,Tu,Pu)},keylen:24,ivlen:8},"DES-CBC":{proc:function(Cu,Tu,Pu){return ge$1(h$2.DES,Cu,Tu,Pu)},eproc:function(Cu,Tu,Pu){return ve$1(h$2.DES,Cu,Tu,Pu)},keylen:8,ivlen:8}},be$1=function(Cu){var Tu={},Pu=Cu.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Pu&&(Tu.cipher=Pu[1],Tu.ivsalt=Pu[2]);var Bu=Cu.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Bu&&(Tu.type=Bu[1]);var Lu=-1,Ru=0;Cu.indexOf(`\r
\r
`)!=-1&&(Lu=Cu.indexOf(`\r
\r
`),Ru=2),Cu.indexOf(`

`)!=-1&&(Lu=Cu.indexOf(`

`),Ru=1);var Ou=Cu.indexOf("-----END");if(Lu!=-1&&Ou!=-1){var Du=Cu.substring(Lu+2*Ru,Ou-Ru);Du=Du.replace(/\s+/g,""),Tu.data=Du}return Tu},xe=function(Cu,Tu,Pu){for(var Bu=Pu.substring(0,16),Lu=h$2.enc.Hex.parse(Bu),Ru=h$2.enc.Utf8.parse(Tu),Ou=ye[Cu].keylen+ye[Cu].ivlen,Du="",ku=null;;){var Fu=h$2.algo.MD5.create();if(ku!=null&&Fu.update(ku),Fu.update(Ru),Fu.update(Lu),ku=Fu.finalize(),(Du+=h$2.enc.Hex.stringify(ku)).length>=2*Ou)break}var Nu={};return Nu.keyhex=Du.substr(0,2*ye[Cu].keylen),Nu.ivhex=Du.substr(2*ye[Cu].keylen,2*ye[Cu].ivlen),Nu},we=function(Cu,Tu,Pu,Bu){var Lu=h$2.enc.Base64.parse(Cu),Ru=h$2.enc.Hex.stringify(Lu);return(0,ye[Tu].proc)(Ru,Pu,Bu)},{version:"1.0.0",parsePKCS5PEM:function(Cu){return be$1(Cu)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(Cu,Tu,Pu){return xe(Cu,Tu,Pu)},decryptKeyB64:function(Cu,Tu,Pu,Bu){return we(Cu,Tu,Pu,Bu)},getDecryptedKeyHex:function(Cu,Tu){var Pu=be$1(Cu),Bu=Pu.cipher,Lu=Pu.ivsalt,Ru=Pu.data,Ou=xe(Bu,Tu,Lu).keyhex;return we(Ru,Bu,Ou,Lu)},getEncryptedPKCS5PEMFromPrvKeyHex:function(Cu,Tu,Pu,Bu,Lu){var Ru="";if(Bu!==void 0&&Bu!=null||(Bu="AES-256-CBC"),ye[Bu]===void 0)throw"KEYUTIL unsupported algorithm: "+Bu;Lu!==void 0&&Lu!=null||(Lu=function(Du){var ku=h$2.lib.WordArray.random(Du);return h$2.enc.Hex.stringify(ku)}(ye[Bu].ivlen).toUpperCase());var Ou=function(Du,ku,Fu,Nu){return(0,ye[ku].eproc)(Du,Fu,Nu)}(Tu,Bu,xe(Bu,Pu,Lu).keyhex,Lu);return Ru="-----BEGIN "+Cu+` PRIVATE KEY-----\r
`,Ru+=`Proc-Type: 4,ENCRYPTED\r
`,Ru+="DEK-Info: "+Bu+","+Lu+`\r
`,Ru+=`\r
`,Ru+=Ou.replace(/(.{64})/g,`$1\r
`),Ru+=`\r
-----END `+Cu+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(Cu){var Tu=Me$1,Pu=Tu.getChildIdx,Bu=Tu.getV,Lu={},Ru=Pu(Cu,0);if(Ru.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Ru.length;Lu.ciphertext=Bu(Cu,Ru[1]);var Ou=Pu(Cu,Ru[0]);if(Ou.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Ou.length;if(Bu(Cu,Ou[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Du=Pu(Cu,Ou[1]);if(Ou.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Du.length;var ku=Pu(Cu,Du[1]);if(ku.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+ku.length;if(Bu(Cu,ku[0])!="2a864886f70d0307")throw"this only supports TripleDES";Lu.encryptionSchemeAlg="TripleDES",Lu.encryptionSchemeIV=Bu(Cu,ku[1]);var Fu=Pu(Cu,Du[0]);if(Fu.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Fu.length;if(Bu(Cu,Fu[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Nu=Pu(Cu,Fu[1]);if(Nu.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Nu.length;Lu.pbkdf2Salt=Bu(Cu,Nu[0]);var Gu=Bu(Cu,Nu[1]);try{Lu.pbkdf2Iter=parseInt(Gu,16)}catch{throw"malformed format pbkdf2Iter: "+Gu}return Lu},getPBKDF2KeyHexFromParam:function(Cu,Tu){var Pu=h$2.enc.Hex.parse(Cu.pbkdf2Salt),Bu=Cu.pbkdf2Iter,Lu=h$2.PBKDF2(Tu,Pu,{keySize:6,iterations:Bu});return h$2.enc.Hex.stringify(Lu)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(Cu,Tu){var Pu=le$1(Cu,"ENCRYPTED PRIVATE KEY"),Bu=this.parseHexOfEncryptedPKCS8(Pu),Lu=Ee.getPBKDF2KeyHexFromParam(Bu,Tu),Ru={};Ru.ciphertext=h$2.enc.Hex.parse(Bu.ciphertext);var Ou=h$2.enc.Hex.parse(Lu),Du=h$2.enc.Hex.parse(Bu.encryptionSchemeIV),ku=h$2.TripleDES.decrypt(Ru,Ou,{iv:Du});return h$2.enc.Hex.stringify(ku)},getKeyFromEncryptedPKCS8PEM:function(Cu,Tu){var Pu=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(Cu,Tu);return this.getKeyFromPlainPrivatePKCS8Hex(Pu)},parsePlainPrivatePKCS8Hex:function(Cu){var Tu=Me$1,Pu=Tu.getChildIdx,Bu=Tu.getV,Lu={algparam:null};if(Cu.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ru=Pu(Cu,0);if(Ru.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(Cu.substr(Ru[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ou=Pu(Cu,Ru[1]);if(Ou.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(Cu.substr(Ou[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Lu.algoid=Bu(Cu,Ou[0]),Cu.substr(Ou[1],2)=="06"&&(Lu.algparam=Bu(Cu,Ou[1])),Cu.substr(Ru[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Lu.keyidx=Tu.getVidx(Cu,Ru[2]),Lu},getKeyFromPlainPrivatePKCS8PEM:function(Cu){var Tu=le$1(Cu,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Tu)},getKeyFromPlainPrivatePKCS8Hex:function(Cu){var Tu,Pu=this.parsePlainPrivatePKCS8Hex(Cu);if(Pu.algoid=="2a864886f70d010101")Tu=new X$1;else if(Pu.algoid=="2a8648ce380401")Tu=new l$3.crypto.DSA;else{if(Pu.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";Tu=new l$3.crypto.ECDSA}return Tu.readPKCS8PrvKeyHex(Cu),Tu},_getKeyFromPublicPKCS8Hex:function(Cu){var Tu,Pu=Me$1.getVbyList(Cu,0,[0,0],"06");if(Pu==="2a864886f70d010101")Tu=new X$1;else if(Pu==="2a8648ce380401")Tu=new l$3.crypto.DSA;else{if(Pu!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";Tu=new l$3.crypto.ECDSA}return Tu.readPKCS8PubKeyHex(Cu),Tu},parsePublicRawRSAKeyHex:function(Cu){var Tu=Me$1,Pu=Tu.getChildIdx,Bu=Tu.getV,Lu={};if(Cu.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Ru=Pu(Cu,0);if(Ru.length!=2)throw"malformed RSA key(code:002)";if(Cu.substr(Ru[0],2)!="02")throw"malformed RSA key(code:003)";if(Lu.n=Bu(Cu,Ru[0]),Cu.substr(Ru[1],2)!="02")throw"malformed RSA key(code:004)";return Lu.e=Bu(Cu,Ru[1]),Lu},parsePublicPKCS8Hex:function(Cu){var Tu=Me$1,Pu=Tu.getChildIdx,Bu=Tu.getV,Lu={algparam:null},Ru=Pu(Cu,0);if(Ru.length!=2)throw"outer DERSequence shall have 2 elements: "+Ru.length;var Ou=Ru[0];if(Cu.substr(Ou,2)!="30")throw"malformed PKCS8 public key(code:001)";var Du=Pu(Cu,Ou);if(Du.length!=2)throw"malformed PKCS8 public key(code:002)";if(Cu.substr(Du[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(Lu.algoid=Bu(Cu,Du[0]),Cu.substr(Du[1],2)=="06"?Lu.algparam=Bu(Cu,Du[1]):Cu.substr(Du[1],2)=="30"&&(Lu.algparam={},Lu.algparam.p=Tu.getVbyList(Cu,Du[1],[0],"02"),Lu.algparam.q=Tu.getVbyList(Cu,Du[1],[1],"02"),Lu.algparam.g=Tu.getVbyList(Cu,Du[1],[2],"02")),Cu.substr(Ru[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return Lu.key=Bu(Cu,Ru[1]).substr(2),Lu}});Ee.getKey=function(Cu,Tu,Pu){var Bu=(Xc=Me$1).getChildIdx;Xc.getV;var Lu=Xc.getVbyList,Ru=l$3.crypto,Ou=Ru.ECDSA,Du=Ru.DSA,ku=X$1,Fu=le$1,Nu=Ee;if(ku!==void 0&&Cu instanceof ku||Ou!==void 0&&Cu instanceof Ou||Du!==void 0&&Cu instanceof Du)return Cu;if(Cu.curve!==void 0&&Cu.xy!==void 0&&Cu.d===void 0)return new Ou({pub:Cu.xy,curve:Cu.curve});if(Cu.curve!==void 0&&Cu.d!==void 0)return new Ou({prv:Cu.d,curve:Cu.curve});if(Cu.kty===void 0&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d===void 0)return(rp=new ku).setPublic(Cu.n,Cu.e),rp;if(Cu.kty===void 0&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d!==void 0&&Cu.p!==void 0&&Cu.q!==void 0&&Cu.dp!==void 0&&Cu.dq!==void 0&&Cu.co!==void 0&&Cu.qi===void 0)return(rp=new ku).setPrivateEx(Cu.n,Cu.e,Cu.d,Cu.p,Cu.q,Cu.dp,Cu.dq,Cu.co),rp;if(Cu.kty===void 0&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d!==void 0&&Cu.p===void 0)return(rp=new ku).setPrivate(Cu.n,Cu.e,Cu.d),rp;if(Cu.p!==void 0&&Cu.q!==void 0&&Cu.g!==void 0&&Cu.y!==void 0&&Cu.x===void 0)return(rp=new Du).setPublic(Cu.p,Cu.q,Cu.g,Cu.y),rp;if(Cu.p!==void 0&&Cu.q!==void 0&&Cu.g!==void 0&&Cu.y!==void 0&&Cu.x!==void 0)return(rp=new Du).setPrivate(Cu.p,Cu.q,Cu.g,Cu.y,Cu.x),rp;if(Cu.kty==="RSA"&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d===void 0)return(rp=new ku).setPublic(te(Cu.n),te(Cu.e)),rp;if(Cu.kty==="RSA"&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d!==void 0&&Cu.p!==void 0&&Cu.q!==void 0&&Cu.dp!==void 0&&Cu.dq!==void 0&&Cu.qi!==void 0)return(rp=new ku).setPrivateEx(te(Cu.n),te(Cu.e),te(Cu.d),te(Cu.p),te(Cu.q),te(Cu.dp),te(Cu.dq),te(Cu.qi)),rp;if(Cu.kty==="RSA"&&Cu.n!==void 0&&Cu.e!==void 0&&Cu.d!==void 0)return(rp=new ku).setPrivate(te(Cu.n),te(Cu.e),te(Cu.d)),rp;if(Cu.kty==="EC"&&Cu.crv!==void 0&&Cu.x!==void 0&&Cu.y!==void 0&&Cu.d===void 0){var Gu=(np=new Ou({curve:Cu.crv})).ecparams.keylen/4,zu="04"+("0000000000"+te(Cu.x)).slice(-Gu)+("0000000000"+te(Cu.y)).slice(-Gu);return np.setPublicKeyHex(zu),np}if(Cu.kty==="EC"&&Cu.crv!==void 0&&Cu.x!==void 0&&Cu.y!==void 0&&Cu.d!==void 0){Gu=(np=new Ou({curve:Cu.crv})).ecparams.keylen/4,zu="04"+("0000000000"+te(Cu.x)).slice(-Gu)+("0000000000"+te(Cu.y)).slice(-Gu);var Hu=("0000000000"+te(Cu.d)).slice(-Gu);return np.setPublicKeyHex(zu),np.setPrivateKeyHex(Hu),np}if(Pu==="pkcs5prv"){var Wu,_h=Cu,Xc=Me$1;if((Wu=Bu(_h,0)).length===9)(rp=new ku).readPKCS5PrvKeyHex(_h);else if(Wu.length===6)(rp=new Du).readPKCS5PrvKeyHex(_h);else{if(!(Wu.length>2&&_h.substr(Wu[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(rp=new Ou).readPKCS5PrvKeyHex(_h)}return rp}if(Pu==="pkcs8prv")return rp=Nu.getKeyFromPlainPrivatePKCS8Hex(Cu);if(Pu==="pkcs8pub")return Nu._getKeyFromPublicPKCS8Hex(Cu);if(Pu==="x509pub")return Be.getPublicKeyFromCertHex(Cu);if(Cu.indexOf("-END CERTIFICATE-",0)!=-1||Cu.indexOf("-END X509 CERTIFICATE-",0)!=-1||Cu.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Be.getPublicKeyFromCertPEM(Cu);if(Cu.indexOf("-END PUBLIC KEY-")!=-1){var ju=le$1(Cu,"PUBLIC KEY");return Nu._getKeyFromPublicPKCS8Hex(ju)}if(Cu.indexOf("-END RSA PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")==-1){var _c=Fu(Cu,"RSA PRIVATE KEY");return Nu.getKey(_c,null,"pkcs5prv")}if(Cu.indexOf("-END DSA PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")==-1){var _f=Lu(sp=Fu(Cu,"DSA PRIVATE KEY"),0,[1],"02"),ep=Lu(sp,0,[2],"02"),tp=Lu(sp,0,[3],"02"),op=Lu(sp,0,[4],"02"),lp=Lu(sp,0,[5],"02");return(rp=new Du).setPrivate(new c$2(_f,16),new c$2(ep,16),new c$2(tp,16),new c$2(op,16),new c$2(lp,16)),rp}if(Cu.indexOf("-END EC PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")==-1)return _c=Fu(Cu,"EC PRIVATE KEY"),Nu.getKey(_c,null,"pkcs5prv");if(Cu.indexOf("-END PRIVATE KEY-")!=-1)return Nu.getKeyFromPlainPrivatePKCS8PEM(Cu);if(Cu.indexOf("-END RSA PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")!=-1){var up=Nu.getDecryptedKeyHex(Cu,Tu),hp=new X$1;return hp.readPKCS5PrvKeyHex(up),hp}if(Cu.indexOf("-END EC PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")!=-1){var np,rp=Lu(sp=Nu.getDecryptedKeyHex(Cu,Tu),0,[1],"04"),ip=Lu(sp,0,[2,0],"06"),ap=Lu(sp,0,[3,0],"03").substr(2);if(l$3.crypto.OID.oidhex2name[ip]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+ip;return(np=new Ou({curve:l$3.crypto.OID.oidhex2name[ip]})).setPublicKeyHex(ap),np.setPrivateKeyHex(rp),np.isPublic=!1,np}if(Cu.indexOf("-END DSA PRIVATE KEY-")!=-1&&Cu.indexOf("4,ENCRYPTED")!=-1){var sp;return _f=Lu(sp=Nu.getDecryptedKeyHex(Cu,Tu),0,[1],"02"),ep=Lu(sp,0,[2],"02"),tp=Lu(sp,0,[3],"02"),op=Lu(sp,0,[4],"02"),lp=Lu(sp,0,[5],"02"),(rp=new Du).setPrivate(new c$2(_f,16),new c$2(ep,16),new c$2(tp,16),new c$2(op,16),new c$2(lp,16)),rp}if(Cu.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Nu.getKeyFromEncryptedPKCS8PEM(Cu,Tu);throw new Error("not supported argument")},Ee.generateKeypair=function(Cu,Tu){if(Cu=="RSA"){var Pu=Tu;(Ou=new X$1).generate(Pu,"10001"),Ou.isPrivate=!0,Ou.isPublic=!0;var Bu=new X$1,Lu=Ou.n.toString(16),Ru=Ou.e.toString(16);return Bu.setPublic(Lu,Ru),Bu.isPrivate=!1,Bu.isPublic=!0,(Du={}).prvKeyObj=Ou,Du.pubKeyObj=Bu,Du}if(Cu=="EC"){var Ou,Du,ku=Tu,Fu=new l$3.crypto.ECDSA({curve:ku}).generateKeyPairHex();return(Ou=new l$3.crypto.ECDSA({curve:ku})).setPublicKeyHex(Fu.ecpubhex),Ou.setPrivateKeyHex(Fu.ecprvhex),Ou.isPrivate=!0,Ou.isPublic=!1,(Bu=new l$3.crypto.ECDSA({curve:ku})).setPublicKeyHex(Fu.ecpubhex),Bu.isPrivate=!1,Bu.isPublic=!0,(Du={}).prvKeyObj=Ou,Du.pubKeyObj=Bu,Du}throw"unknown algorithm: "+Cu},Ee.getPEM=function(Cu,Tu,Pu,Bu,Lu,Ru){var Ou=l$3,Du=Ou.asn1,ku=Du.DERObjectIdentifier,Fu=Du.DERInteger,Nu=Du.ASN1Util.newObject,Gu=Du.x509.SubjectPublicKeyInfo,zu=Ou.crypto,Hu=zu.DSA,Wu=zu.ECDSA,_h=X$1;function Xc(np){return Nu({seq:[{int:0},{int:{bigint:np.n}},{int:np.e},{int:{bigint:np.d}},{int:{bigint:np.p}},{int:{bigint:np.q}},{int:{bigint:np.dmp1}},{int:{bigint:np.dmq1}},{int:{bigint:np.coeff}}]})}function ju(np){return Nu({seq:[{int:1},{octstr:{hex:np.prvKeyHex}},{tag:["a0",!0,{oid:{name:np.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+np.pubKeyHex}}]}]})}function _c(np){return Nu({seq:[{int:0},{int:{bigint:np.p}},{int:{bigint:np.q}},{int:{bigint:np.g}},{int:{bigint:np.y}},{int:{bigint:np.x}}]})}if((_h!==void 0&&Cu instanceof _h||Hu!==void 0&&Cu instanceof Hu||Wu!==void 0&&Cu instanceof Wu)&&Cu.isPublic==1&&(Tu===void 0||Tu=="PKCS8PUB"))return ae$1(op=new Gu(Cu).getEncodedHex(),"PUBLIC KEY");if(Tu=="PKCS1PRV"&&_h!==void 0&&Cu instanceof _h&&(Pu===void 0||Pu==null)&&Cu.isPrivate==1)return ae$1(op=Xc(Cu).getEncodedHex(),"RSA PRIVATE KEY");if(Tu=="PKCS1PRV"&&Wu!==void 0&&Cu instanceof Wu&&(Pu===void 0||Pu==null)&&Cu.isPrivate==1){var _f=new ku({name:Cu.curveName}).getEncodedHex(),ep=ju(Cu).getEncodedHex(),tp="";return tp+=ae$1(_f,"EC PARAMETERS"),tp+=ae$1(ep,"EC PRIVATE KEY")}if(Tu=="PKCS1PRV"&&Hu!==void 0&&Cu instanceof Hu&&(Pu===void 0||Pu==null)&&Cu.isPrivate==1)return ae$1(op=_c(Cu).getEncodedHex(),"DSA PRIVATE KEY");if(Tu=="PKCS5PRV"&&_h!==void 0&&Cu instanceof _h&&Pu!==void 0&&Pu!=null&&Cu.isPrivate==1){var op=Xc(Cu).getEncodedHex();return Bu===void 0&&(Bu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",op,Pu,Bu,Ru)}if(Tu=="PKCS5PRV"&&Wu!==void 0&&Cu instanceof Wu&&Pu!==void 0&&Pu!=null&&Cu.isPrivate==1)return op=ju(Cu).getEncodedHex(),Bu===void 0&&(Bu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",op,Pu,Bu,Ru);if(Tu=="PKCS5PRV"&&Hu!==void 0&&Cu instanceof Hu&&Pu!==void 0&&Pu!=null&&Cu.isPrivate==1)return op=_c(Cu).getEncodedHex(),Bu===void 0&&(Bu="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",op,Pu,Bu,Ru);var lp=function(np,rp){var ip=up(np,rp);return new Nu({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:ip.pbkdf2Salt}},{int:ip.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:ip.encryptionSchemeIV}}]}]}]},{octstr:{hex:ip.ciphertext}}]}).getEncodedHex()},up=function(np,rp){var ip=h$2.lib.WordArray.random(8),ap=h$2.lib.WordArray.random(8),sp=h$2.PBKDF2(rp,ip,{keySize:6,iterations:100}),cp=h$2.enc.Hex.parse(np),dp=h$2.TripleDES.encrypt(cp,sp,{iv:ap})+"",fp={};return fp.ciphertext=dp,fp.pbkdf2Salt=h$2.enc.Hex.stringify(ip),fp.pbkdf2Iter=100,fp.encryptionSchemeAlg="DES-EDE3-CBC",fp.encryptionSchemeIV=h$2.enc.Hex.stringify(ap),fp};if(Tu=="PKCS8PRV"&&_h!=null&&Cu instanceof _h&&Cu.isPrivate==1){var hp=Xc(Cu).getEncodedHex();return op=Nu({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:hp}}]}).getEncodedHex(),Pu===void 0||Pu==null?ae$1(op,"PRIVATE KEY"):ae$1(ep=lp(op,Pu),"ENCRYPTED PRIVATE KEY")}if(Tu=="PKCS8PRV"&&Wu!==void 0&&Cu instanceof Wu&&Cu.isPrivate==1)return hp=new Nu({seq:[{int:1},{octstr:{hex:Cu.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+Cu.pubKeyHex}}]}]}).getEncodedHex(),op=Nu({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:Cu.curveName}}]},{octstr:{hex:hp}}]}).getEncodedHex(),Pu===void 0||Pu==null?ae$1(op,"PRIVATE KEY"):ae$1(ep=lp(op,Pu),"ENCRYPTED PRIVATE KEY");if(Tu=="PKCS8PRV"&&Hu!==void 0&&Cu instanceof Hu&&Cu.isPrivate==1)return hp=new Fu({bigint:Cu.x}).getEncodedHex(),op=Nu({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:Cu.p}},{int:{bigint:Cu.q}},{int:{bigint:Cu.g}}]}]},{octstr:{hex:hp}}]}).getEncodedHex(),Pu===void 0||Pu==null?ae$1(op,"PRIVATE KEY"):ae$1(ep=lp(op,Pu),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(Cu){var Tu=le$1(Cu,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex(Tu)},Ee.getKeyFromCSRHex=function(Cu){var Tu=Ee.parseCSRHex(Cu);return Ee.getKey(Tu.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(Cu){var Tu=Me$1,Pu=Tu.getChildIdx,Bu=Tu.getTLV,Lu={},Ru=Cu;if(Ru.substr(0,2)!="30")throw"malformed CSR(code:001)";var Ou=Pu(Ru,0);if(Ou.length<1)throw"malformed CSR(code:002)";if(Ru.substr(Ou[0],2)!="30")throw"malformed CSR(code:003)";var Du=Pu(Ru,Ou[0]);if(Du.length<3)throw"malformed CSR(code:004)";return Lu.p8pubkeyhex=Bu(Ru,Du[2]),Lu},Ee.getKeyID=function(Cu){var Tu=Ee,Pu=Me$1;typeof Cu=="string"&&Cu.indexOf("BEGIN ")!=-1&&(Cu=Tu.getKey(Cu));var Bu=le$1(Tu.getPEM(Cu)),Lu=Pu.getIdxbyList(Bu,0,[1]),Ru=Pu.getV(Bu,Lu).substring(2);return l$3.crypto.Util.hashHex(Ru,"sha1")},Ee.getJWKFromKey=function(Cu){var Tu={};if(Cu instanceof X$1&&Cu.isPrivate)return Tu.kty="RSA",Tu.n=ee(Cu.n.toString(16)),Tu.e=ee(Cu.e.toString(16)),Tu.d=ee(Cu.d.toString(16)),Tu.p=ee(Cu.p.toString(16)),Tu.q=ee(Cu.q.toString(16)),Tu.dp=ee(Cu.dmp1.toString(16)),Tu.dq=ee(Cu.dmq1.toString(16)),Tu.qi=ee(Cu.coeff.toString(16)),Tu;if(Cu instanceof X$1&&Cu.isPublic)return Tu.kty="RSA",Tu.n=ee(Cu.n.toString(16)),Tu.e=ee(Cu.e.toString(16)),Tu;if(Cu instanceof l$3.crypto.ECDSA&&Cu.isPrivate){if((Bu=Cu.getShortNISTPCurveName())!=="P-256"&&Bu!=="P-384")throw"unsupported curve name for JWT: "+Bu;var Pu=Cu.getPublicKeyXYHex();return Tu.kty="EC",Tu.crv=Bu,Tu.x=ee(Pu.x),Tu.y=ee(Pu.y),Tu.d=ee(Cu.prvKeyHex),Tu}if(Cu instanceof l$3.crypto.ECDSA&&Cu.isPublic){var Bu;if((Bu=Cu.getShortNISTPCurveName())!=="P-256"&&Bu!=="P-384")throw"unsupported curve name for JWT: "+Bu;return Pu=Cu.getPublicKeyXYHex(),Tu.kty="EC",Tu.crv=Bu,Tu.x=ee(Pu.x),Tu.y=ee(Pu.y),Tu}throw"not supported key object"},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.ASN1Util=new function(){this.integerToByteHex=function(Cu){var Tu=Cu.toString(16);return Tu.length%2==1&&(Tu="0"+Tu),Tu},this.bigIntToMinTwosComplementsHex=function(Cu){var Tu=Cu.toString(16);if(Tu.substr(0,1)!="-")Tu.length%2==1?Tu="0"+Tu:Tu.match(/^[0-7]/)||(Tu="00"+Tu);else{var Pu=Tu.substr(1).length;Pu%2==1?Pu+=1:Tu.match(/^[0-7]/)||(Pu+=2);for(var Bu="",Lu=0;Lu<Pu;Lu++)Bu+="f";Tu=new c$2(Bu,16).xor(Cu).add(c$2.ONE).toString(16).replace(/^-/,"")}return Tu},this.getPEMStringFromHex=function(Cu,Tu){return ae$1(Cu,Tu)},this.newObject=function(Cu){var Tu=l$3.asn1,Pu=Tu.ASN1Object,Bu=Tu.DERBoolean,Lu=Tu.DERInteger,Ru=Tu.DERBitString,Ou=Tu.DEROctetString,Du=Tu.DERNull,ku=Tu.DERObjectIdentifier,Fu=Tu.DEREnumerated,Nu=Tu.DERUTF8String,Gu=Tu.DERNumericString,zu=Tu.DERPrintableString,Hu=Tu.DERTeletexString,Wu=Tu.DERIA5String,_h=Tu.DERUTCTime,Xc=Tu.DERGeneralizedTime,ju=Tu.DERVisibleString,_c=Tu.DERBMPString,_f=Tu.DERSequence,ep=Tu.DERSet,tp=Tu.DERTaggedObject,op=Tu.ASN1Util.newObject;if(Cu instanceof Tu.ASN1Object)return Cu;var lp=Object.keys(Cu);if(lp.length!=1)throw new Error("key of param shall be only one.");var up=lp[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+up+":")==-1)throw new Error("undefined key: "+up);if(up=="bool")return new Bu(Cu[up]);if(up=="int")return new Lu(Cu[up]);if(up=="bitstr")return new Ru(Cu[up]);if(up=="octstr")return new Ou(Cu[up]);if(up=="null")return new Du(Cu[up]);if(up=="oid")return new ku(Cu[up]);if(up=="enum")return new Fu(Cu[up]);if(up=="utf8str")return new Nu(Cu[up]);if(up=="numstr")return new Gu(Cu[up]);if(up=="prnstr")return new zu(Cu[up]);if(up=="telstr")return new Hu(Cu[up]);if(up=="ia5str")return new Wu(Cu[up]);if(up=="utctime")return new _h(Cu[up]);if(up=="gentime")return new Xc(Cu[up]);if(up=="visstr")return new ju(Cu[up]);if(up=="bmpstr")return new _c(Cu[up]);if(up=="asn1")return new Pu(Cu[up]);if(up=="seq"){for(var hp=Cu[up],np=[],rp=0;rp<hp.length;rp++){var ip=op(hp[rp]);np.push(ip)}return new _f({array:np})}if(up=="set"){for(hp=Cu[up],np=[],rp=0;rp<hp.length;rp++)ip=op(hp[rp]),np.push(ip);return new ep({array:np})}if(up=="tag"){var ap=Cu[up];if(Object.prototype.toString.call(ap)==="[object Array]"&&ap.length==3){var sp=op(ap[2]);return new tp({tag:ap[0],explicit:ap[1],obj:sp})}return new tp(ap)}},this.jsonToASN1HEX=function(Cu){return this.newObject(Cu).getEncodedHex()}},l$3.asn1.ASN1Util.oidHexToInt=function(Cu){for(var Tu="",Pu=parseInt(Cu.substr(0,2),16),Bu=(Tu=Math.floor(Pu/40)+"."+Pu%40,""),Lu=2;Lu<Cu.length;Lu+=2){var Ru=("00000000"+parseInt(Cu.substr(Lu,2),16).toString(2)).slice(-8);Bu+=Ru.substr(1,7),Ru.substr(0,1)=="0"&&(Tu=Tu+"."+new c$2(Bu,2).toString(10),Bu="")}return Tu},l$3.asn1.ASN1Util.oidIntToHex=function(Cu){var Tu=function(Du){var ku=Du.toString(16);return ku.length==1&&(ku="0"+ku),ku},Pu=function(Du){var ku="",Fu=new c$2(Du,10).toString(2),Nu=7-Fu.length%7;Nu==7&&(Nu=0);for(var Gu="",zu=0;zu<Nu;zu++)Gu+="0";for(Fu=Gu+Fu,zu=0;zu<Fu.length-1;zu+=7){var Hu=Fu.substr(zu,7);zu!=Fu.length-7&&(Hu="1"+Hu),ku+=Tu(parseInt(Hu,2))}return ku};if(!Cu.match(/^[0-9.]+$/))throw"malformed oid string: "+Cu;var Bu="",Lu=Cu.split("."),Ru=40*parseInt(Lu[0])+parseInt(Lu[1]);Bu+=Tu(Ru),Lu.splice(0,2);for(var Ou=0;Ou<Lu.length;Ou++)Bu+=Pu(Lu[Ou]);return Bu},l$3.asn1.ASN1Object=function(Cu){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var Tu=this.hV.length/2,Pu=Tu.toString(16);if(Pu.length%2==1&&(Pu="0"+Pu),Tu<128)return Pu;var Bu=Pu.length/2;if(Bu>15)throw"ASN.1 length too long to represent by 8x: n = "+Tu.toString(16);return(128+Bu).toString(16)+Pu},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(Tu){this.params=Tu},Cu!=null&&Cu.tlv!=null&&(this.hTLV=Cu.tlv,this.isModified=!1)},l$3.asn1.DERAbstractString=function(Cu){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(Tu){this.hTLV=null,this.isModified=!0,this.s=Tu,this.hV=ie$1(this.s).toLowerCase()},this.setStringHex=function(Tu){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.getFreshValueHex=function(){return this.hV},Cu!==void 0&&(typeof Cu=="string"?this.setString(Cu):Cu.str!==void 0?this.setString(Cu.str):Cu.hex!==void 0&&this.setStringHex(Cu.hex))},u$2.lang.extend(l$3.asn1.DERAbstractString,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractTime=function(Cu){l$3.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(Tu){var Pu=Tu.getTime()+6e4*Tu.getTimezoneOffset();return new Date(Pu)},this.formatDate=function(Tu,Pu,Bu){var Lu=this.zeroPadding,Ru=this.localDateToUTC(Tu),Ou=String(Ru.getFullYear());Pu=="utc"&&(Ou=Ou.substr(2,2));var Du=Ou+Lu(String(Ru.getMonth()+1),2)+Lu(String(Ru.getDate()),2)+Lu(String(Ru.getHours()),2)+Lu(String(Ru.getMinutes()),2)+Lu(String(Ru.getSeconds()),2);if(Bu===!0){var ku=Ru.getMilliseconds();if(ku!=0){var Fu=Lu(String(ku),3);Du=Du+"."+(Fu=Fu.replace(/[0]+$/,""))}}return Du+"Z"},this.zeroPadding=function(Tu,Pu){return Tu.length>=Pu?Tu:new Array(Pu-Tu.length+1).join("0")+Tu},this.getString=function(){return this.s},this.setString=function(Tu){this.hTLV=null,this.isModified=!0,this.s=Tu,this.hV=J$1(Tu)},this.setByDateValue=function(Tu,Pu,Bu,Lu,Ru,Ou){var Du=new Date(Date.UTC(Tu,Pu-1,Bu,Lu,Ru,Ou,0));this.setByDate(Du)},this.getFreshValueHex=function(){return this.hV}},u$2.lang.extend(l$3.asn1.DERAbstractTime,l$3.asn1.ASN1Object),l$3.asn1.DERAbstractStructured=function(Cu){l$3.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(Tu){this.hTLV=null,this.isModified=!0,this.asn1Array=Tu},this.appendASN1Object=function(Tu){this.hTLV=null,this.isModified=!0,this.asn1Array.push(Tu)},this.asn1Array=new Array,Cu!==void 0&&Cu.array!==void 0&&(this.asn1Array=Cu.array)},u$2.lang.extend(l$3.asn1.DERAbstractStructured,l$3.asn1.ASN1Object),l$3.asn1.DERBoolean=function(Cu){l$3.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=Cu==0?"010100":"0101ff"},u$2.lang.extend(l$3.asn1.DERBoolean,l$3.asn1.ASN1Object),l$3.asn1.DERInteger=function(Cu){l$3.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Tu)},this.setByInteger=function(Tu){var Pu=new c$2(String(Tu),10);this.setByBigInteger(Pu)},this.setValueHex=function(Tu){this.hV=Tu},this.getFreshValueHex=function(){return this.hV},Cu!==void 0&&(Cu.bigint!==void 0?this.setByBigInteger(Cu.bigint):Cu.int!==void 0?this.setByInteger(Cu.int):typeof Cu=="number"?this.setByInteger(Cu):Cu.hex!==void 0&&this.setValueHex(Cu.hex))},u$2.lang.extend(l$3.asn1.DERInteger,l$3.asn1.ASN1Object),l$3.asn1.DERBitString=function(Cu){if(Cu!==void 0&&Cu.obj!==void 0){var Tu=l$3.asn1.ASN1Util.newObject(Cu.obj);Cu.hex="00"+Tu.getEncodedHex()}l$3.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Pu){this.hTLV=null,this.isModified=!0,this.hV=Pu},this.setUnusedBitsAndHexValue=function(Pu,Bu){if(Pu<0||7<Pu)throw"unused bits shall be from 0 to 7: u = "+Pu;var Lu="0"+Pu;this.hTLV=null,this.isModified=!0,this.hV=Lu+Bu},this.setByBinaryString=function(Pu){var Bu=8-(Pu=Pu.replace(/0+$/,"")).length%8;Bu==8&&(Bu=0);for(var Lu=0;Lu<=Bu;Lu++)Pu+="0";var Ru="";for(Lu=0;Lu<Pu.length-1;Lu+=8){var Ou=Pu.substr(Lu,8),Du=parseInt(Ou,2).toString(16);Du.length==1&&(Du="0"+Du),Ru+=Du}this.hTLV=null,this.isModified=!0,this.hV="0"+Bu+Ru},this.setByBooleanArray=function(Pu){for(var Bu="",Lu=0;Lu<Pu.length;Lu++)Pu[Lu]==1?Bu+="1":Bu+="0";this.setByBinaryString(Bu)},this.newFalseArray=function(Pu){for(var Bu=new Array(Pu),Lu=0;Lu<Pu;Lu++)Bu[Lu]=!1;return Bu},this.getFreshValueHex=function(){return this.hV},Cu!==void 0&&(typeof Cu=="string"&&Cu.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(Cu):Cu.hex!==void 0?this.setHexValueIncludingUnusedBits(Cu.hex):Cu.bin!==void 0?this.setByBinaryString(Cu.bin):Cu.array!==void 0&&this.setByBooleanArray(Cu.array))},u$2.lang.extend(l$3.asn1.DERBitString,l$3.asn1.ASN1Object),l$3.asn1.DEROctetString=function(Cu){if(Cu!==void 0&&Cu.obj!==void 0){var Tu=l$3.asn1.ASN1Util.newObject(Cu.obj);Cu.hex=Tu.getEncodedHex()}l$3.asn1.DEROctetString.superclass.constructor.call(this,Cu),this.hT="04"},u$2.lang.extend(l$3.asn1.DEROctetString,l$3.asn1.DERAbstractString),l$3.asn1.DERNull=function(){l$3.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},u$2.lang.extend(l$3.asn1.DERNull,l$3.asn1.ASN1Object),l$3.asn1.DERObjectIdentifier=function(Cu){l$3.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(Tu){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Tu},this.setValueOidString=function(Tu){var Pu=function(Bu){var Lu=function(Nu){var Gu=Nu.toString(16);return Gu.length==1&&(Gu="0"+Gu),Gu},Ru=function(Nu){var Gu="",zu=parseInt(Nu,10).toString(2),Hu=7-zu.length%7;Hu==7&&(Hu=0);for(var Wu="",_h=0;_h<Hu;_h++)Wu+="0";for(zu=Wu+zu,_h=0;_h<zu.length-1;_h+=7){var Xc=zu.substr(_h,7);_h!=zu.length-7&&(Xc="1"+Xc),Gu+=Lu(parseInt(Xc,2))}return Gu};try{if(!Bu.match(/^[0-9.]+$/))return null;var Ou="",Du=Bu.split("."),ku=40*parseInt(Du[0],10)+parseInt(Du[1],10);Ou+=Lu(ku),Du.splice(0,2);for(var Fu=0;Fu<Du.length;Fu++)Ou+=Ru(Du[Fu]);return Ou}catch{return null}}(Tu);if(Pu==null)throw new Error("malformed oid string: "+Tu);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Pu},this.setValueName=function(Tu){var Pu=l$3.asn1.x509.OID.name2oid(Tu);if(Pu==="")throw new Error("DERObjectIdentifier oidName undefined: "+Tu);this.setValueOidString(Pu)},this.setValueNameOrOid=function(Tu){Tu.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(Tu):this.setValueName(Tu)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Tu){typeof Tu=="string"?this.setValueNameOrOid(Tu):Tu.oid!==void 0?this.setValueNameOrOid(Tu.oid):Tu.name!==void 0?this.setValueNameOrOid(Tu.name):Tu.hex!==void 0&&this.setValueHex(Tu.hex)},Cu!==void 0&&this.setByParam(Cu)},u$2.lang.extend(l$3.asn1.DERObjectIdentifier,l$3.asn1.ASN1Object),l$3.asn1.DEREnumerated=function(Cu){l$3.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(Tu){this.hTLV=null,this.isModified=!0,this.hV=l$3.asn1.ASN1Util.bigIntToMinTwosComplementsHex(Tu)},this.setByInteger=function(Tu){var Pu=new c$2(String(Tu),10);this.setByBigInteger(Pu)},this.setValueHex=function(Tu){this.hV=Tu},this.getFreshValueHex=function(){return this.hV},Cu!==void 0&&(Cu.int!==void 0?this.setByInteger(Cu.int):typeof Cu=="number"?this.setByInteger(Cu):Cu.hex!==void 0&&this.setValueHex(Cu.hex))},u$2.lang.extend(l$3.asn1.DEREnumerated,l$3.asn1.ASN1Object),l$3.asn1.DERUTF8String=function(Cu){l$3.asn1.DERUTF8String.superclass.constructor.call(this,Cu),this.hT="0c"},u$2.lang.extend(l$3.asn1.DERUTF8String,l$3.asn1.DERAbstractString),l$3.asn1.DERNumericString=function(Cu){l$3.asn1.DERNumericString.superclass.constructor.call(this,Cu),this.hT="12"},u$2.lang.extend(l$3.asn1.DERNumericString,l$3.asn1.DERAbstractString),l$3.asn1.DERPrintableString=function(Cu){l$3.asn1.DERPrintableString.superclass.constructor.call(this,Cu),this.hT="13"},u$2.lang.extend(l$3.asn1.DERPrintableString,l$3.asn1.DERAbstractString),l$3.asn1.DERTeletexString=function(Cu){l$3.asn1.DERTeletexString.superclass.constructor.call(this,Cu),this.hT="14"},u$2.lang.extend(l$3.asn1.DERTeletexString,l$3.asn1.DERAbstractString),l$3.asn1.DERIA5String=function(Cu){l$3.asn1.DERIA5String.superclass.constructor.call(this,Cu),this.hT="16"},u$2.lang.extend(l$3.asn1.DERIA5String,l$3.asn1.DERAbstractString),l$3.asn1.DERVisibleString=function(Cu){l$3.asn1.DERIA5String.superclass.constructor.call(this,Cu),this.hT="1a"},u$2.lang.extend(l$3.asn1.DERVisibleString,l$3.asn1.DERAbstractString),l$3.asn1.DERBMPString=function(Cu){l$3.asn1.DERBMPString.superclass.constructor.call(this,Cu),this.hT="1e"},u$2.lang.extend(l$3.asn1.DERBMPString,l$3.asn1.DERAbstractString),l$3.asn1.DERUTCTime=function(Cu){l$3.asn1.DERUTCTime.superclass.constructor.call(this,Cu),this.hT="17",this.setByDate=function(Tu){this.hTLV=null,this.isModified=!0,this.date=Tu,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J$1(this.s)),this.hV},Cu!==void 0&&(Cu.str!==void 0?this.setString(Cu.str):typeof Cu=="string"&&Cu.match(/^[0-9]{12}Z$/)?this.setString(Cu):Cu.hex!==void 0?this.setStringHex(Cu.hex):Cu.date!==void 0&&this.setByDate(Cu.date))},u$2.lang.extend(l$3.asn1.DERUTCTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERGeneralizedTime=function(Cu){l$3.asn1.DERGeneralizedTime.superclass.constructor.call(this,Cu),this.hT="18",this.withMillis=!1,this.setByDate=function(Tu){this.hTLV=null,this.isModified=!0,this.date=Tu,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J$1(this.s)),this.hV},Cu!==void 0&&(Cu.str!==void 0?this.setString(Cu.str):typeof Cu=="string"&&Cu.match(/^[0-9]{14}Z$/)?this.setString(Cu):Cu.hex!==void 0?this.setStringHex(Cu.hex):Cu.date!==void 0&&this.setByDate(Cu.date),Cu.millis===!0&&(this.withMillis=!0))},u$2.lang.extend(l$3.asn1.DERGeneralizedTime,l$3.asn1.DERAbstractTime),l$3.asn1.DERSequence=function(Cu){l$3.asn1.DERSequence.superclass.constructor.call(this,Cu),this.hT="30",this.getFreshValueHex=function(){for(var Tu="",Pu=0;Pu<this.asn1Array.length;Pu++)Tu+=this.asn1Array[Pu].getEncodedHex();return this.hV=Tu,this.hV}},u$2.lang.extend(l$3.asn1.DERSequence,l$3.asn1.DERAbstractStructured),l$3.asn1.DERSet=function(Cu){l$3.asn1.DERSet.superclass.constructor.call(this,Cu),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var Tu=new Array,Pu=0;Pu<this.asn1Array.length;Pu++){var Bu=this.asn1Array[Pu];Tu.push(Bu.getEncodedHex())}return this.sortFlag==1&&Tu.sort(),this.hV=Tu.join(""),this.hV},Cu!==void 0&&Cu.sortflag!==void 0&&Cu.sortflag==0&&(this.sortFlag=!1)},u$2.lang.extend(l$3.asn1.DERSet,l$3.asn1.DERAbstractStructured),l$3.asn1.DERTaggedObject=function(Cu){l$3.asn1.DERTaggedObject.superclass.constructor.call(this);var Tu=l$3.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Pu,Bu,Lu){this.hT=Bu,this.isExplicit=Pu,this.asn1Object=Lu,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Lu.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,Bu),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Pu){Pu.tag!=null&&(this.hT=Pu.tag),Pu.explicit!=null&&(this.isExplicit=Pu.explicit),Pu.tage!=null&&(this.hT=Pu.tage,this.isExplicit=!0),Pu.tagi!=null&&(this.hT=Pu.tagi,this.isExplicit=!1),Pu.obj!=null&&(Pu.obj instanceof Tu.ASN1Object?(this.asn1Object=Pu.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof Pu.obj=="object"&&(this.asn1Object=Tu.ASN1Util.newObject(Pu.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Cu!=null&&this.setByParam(Cu)},u$2.lang.extend(l$3.asn1.DERTaggedObject,l$3.asn1.ASN1Object);var Me$1=new function(){};function Ie$1(Cu,Tu){for(var Pu="",Bu=Tu/4-Cu.length,Lu=0;Lu<Bu;Lu++)Pu+="0";return Pu+Cu}function Se$1(Cu,Tu,Pu){for(var Bu="",Lu=0;Bu.length<Tu;)Bu+=re$1(Pu(oe$1(Cu+String.fromCharCode.apply(String,[(4278190080&Lu)>>24,(16711680&Lu)>>16,(65280&Lu)>>8,255&Lu])))),Lu+=1;return Bu}function Ce(Cu){for(var Tu in l$3.crypto.Util.DIGESTINFOHEAD){var Pu=l$3.crypto.Util.DIGESTINFOHEAD[Tu],Bu=Pu.length;if(Cu.substring(0,Bu)==Pu)return[Tu,Cu.substring(Bu)]}return[]}function Be(Cu){var Tu,Pu=Me$1,Bu=Pu.getChildIdx,Lu=Pu.getV,Ru=Pu.getTLV,Ou=Pu.getVbyList,Du=Pu.getVbyListEx,ku=Pu.getTLVbyList,Fu=Pu.getTLVbyListEx,Nu=Pu.getIdxbyList,Gu=Pu.getIdxbyListEx,zu=Pu.getVidx,Hu=Pu.getInt,Wu=Pu.oidname,_h=Pu.hextooidstr,Xc=le$1;try{Tu=l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var ju=ku(this.hex,0,[0,0]);if(ju.substr(0,2)=="a0"){var _c=ku(ju,0,[0]),_f=Hu(_c,0);if(_f<0||2<_f)throw new Error("malformed version field");return this.version=_f+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Du(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ju=Fu(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ju)},this.getAlgorithmIdentifierName=function(ju){for(var _c in Tu)if(ju===Tu[_c])return _c;return Wu(Du(ju,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return ku(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return ku(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var ju=Ou(this.hex,0,[0,4+this.foffset,0]);return ju=ju.replace(/(..)/g,"%$1"),ju=decodeURIComponent(ju)},this.getNotAfter=function(){var ju=Ou(this.hex,0,[0,4+this.foffset,1]);return ju=ju.replace(/(..)/g,"%$1"),ju=decodeURIComponent(ju)},this.getPublicKeyHex=function(){return Pu.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Nu(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ju=this.getPublicKeyIdx();return Nu(this.hex,ju,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ju=ku(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ju)},this.getSignatureValueHex=function(){return Ou(this.hex,0,[2],"03",!0)},this.verifySignature=function(ju){var _c=this.getSignatureAlgorithmField(),_f=this.getSignatureValueHex(),ep=ku(this.hex,0,[0],"30"),tp=new l$3.crypto.Signature({alg:_c});return tp.init(ju),tp.updateHex(ep),tp.verify(_f)},this.parseExt=function(ju){var _c,_f,ep;if(ju===void 0){if(ep=this.hex,this.version!==3)return-1;_c=Nu(ep,0,[0,7,0],"30"),_f=Bu(ep,_c)}else{ep=le$1(ju);var tp=Nu(ep,0,[0,3,0,0],"06");if(Lu(ep,tp)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);_c=Nu(ep,0,[0,3,0,1,0],"30"),_f=Bu(ep,_c),this.hex=ep}this.aExtInfo=new Array;for(var op=0;op<_f.length;op++){var lp={critical:!1},up=0;Bu(ep,_f[op]).length===3&&(lp.critical=!0,up=1),lp.oid=Pu.hextooidstr(Ou(ep,_f[op],[0],"06"));var hp=Nu(ep,_f[op],[1+up]);lp.vidx=zu(ep,hp),this.aExtInfo.push(lp)}},this.getExtInfo=function(ju){var _c=this.aExtInfo,_f=ju;if(ju.match(/^[0-9.]+$/)||(_f=l$3.asn1.x509.OID.name2oid(ju)),_f!==""){for(var ep=0;ep<_c.length;ep++)if(_c[ep].oid===_f)return _c[ep]}},this.getExtBasicConstraints=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("basicConstraints");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"basicConstraints"};if(_c&&(ep.critical=!0),ju==="3000")return ep;if(ju==="30030101ff")return ep.cA=!0,ep;if(ju.substr(0,12)==="30060101ff02"){var tp=Lu(ju,10),op=parseInt(tp,16);return ep.cA=!0,ep.pathLen=op,ep}throw new Error("hExtV parse error: "+ju)},this.getExtKeyUsage=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("keyUsage");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"keyUsage"};return _c&&(ep.critical=!0),ep.names=this.getExtKeyUsageString(ju).split(","),ep},this.getExtKeyUsageBin=function(ju){if(ju===void 0){var _c=this.getExtInfo("keyUsage");if(_c===void 0)return"";ju=Ru(this.hex,_c.vidx)}if(ju.length!=8&&ju.length!=10)throw new Error("malformed key usage value: "+ju);var _f="000000000000000"+parseInt(ju.substr(6),16).toString(2);return ju.length==8&&(_f=_f.slice(-8)),ju.length==10&&(_f=_f.slice(-16)),(_f=_f.replace(/0+$/,""))==""&&(_f="0"),_f},this.getExtKeyUsageString=function(ju){for(var _c=this.getExtKeyUsageBin(ju),_f=new Array,ep=0;ep<_c.length;ep++)_c.substr(ep,1)=="1"&&_f.push(Be.KEYUSAGE_NAME[ep]);return _f.join(",")},this.getExtSubjectKeyIdentifier=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("subjectKeyIdentifier");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"subjectKeyIdentifier"};_c&&(ep.critical=!0);var tp=Lu(ju,0);return ep.kid={hex:tp},ep},this.getExtAuthorityKeyIdentifier=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("authorityKeyIdentifier");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"authorityKeyIdentifier"};_c&&(ep.critical=!0);for(var tp=Bu(ju,0),op=0;op<tp.length;op++){var lp=ju.substr(tp[op],2);if(lp==="80"&&(ep.kid={hex:Lu(ju,tp[op])}),lp==="a1"){var up=Ru(ju,tp[op]),hp=this.getGeneralNames(up);ep.issuer=hp[0].dn}lp==="82"&&(ep.sn={hex:Lu(ju,tp[op])})}return ep},this.getExtExtKeyUsage=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("extKeyUsage");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"extKeyUsage",array:[]};_c&&(ep.critical=!0);for(var tp=Bu(ju,0),op=0;op<tp.length;op++)ep.array.push(Wu(Lu(ju,tp[op])));return ep},this.getExtExtKeyUsageName=function(){var ju=this.getExtInfo("extKeyUsage");if(ju===void 0)return ju;var _c=new Array,_f=Ru(this.hex,ju.vidx);if(_f==="")return _c;for(var ep=Bu(_f,0),tp=0;tp<ep.length;tp++)_c.push(Wu(Lu(_f,ep[tp])));return _c},this.getExtSubjectAltName=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("subjectAltName");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"subjectAltName",array:[]};return _c&&(ep.critical=!0),ep.array=this.getGeneralNames(ju),ep},this.getExtIssuerAltName=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("issuerAltName");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"issuerAltName",array:[]};return _c&&(ep.critical=!0),ep.array=this.getGeneralNames(ju),ep},this.getGeneralNames=function(ju){for(var _c=Bu(ju,0),_f=[],ep=0;ep<_c.length;ep++){var tp=this.getGeneralName(Ru(ju,_c[ep]));tp!==void 0&&_f.push(tp)}return _f},this.getGeneralName=function(ju){var _c=ju.substr(0,2),_f=Lu(ju,0),ep=re$1(_f);return _c=="81"?{rfc822:ep}:_c=="82"?{dns:ep}:_c=="86"?{uri:ep}:_c=="87"?{ip:ue$1(_f)}:_c=="a4"?{dn:this.getX500Name(_f)}:void 0},this.getExtSubjectAltName2=function(){var ju,_c,_f,ep=this.getExtInfo("subjectAltName");if(ep===void 0)return ep;for(var tp=new Array,op=Ru(this.hex,ep.vidx),lp=Bu(op,0),up=0;up<lp.length;up++)_f=op.substr(lp[up],2),ju=Lu(op,lp[up]),_f==="81"&&(_c=ne(ju),tp.push(["MAIL",_c])),_f==="82"&&(_c=ne(ju),tp.push(["DNS",_c])),_f==="84"&&(_c=Be.hex2dn(ju,0),tp.push(["DN",_c])),_f==="86"&&(_c=ne(ju),tp.push(["URI",_c])),_f==="87"&&(_c=ue$1(ju),tp.push(["IP",_c]));return tp},this.getExtCRLDistributionPoints=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("cRLDistributionPoints");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"cRLDistributionPoints",array:[]};_c&&(ep.critical=!0);for(var tp=Bu(ju,0),op=0;op<tp.length;op++){var lp=Ru(ju,tp[op]);ep.array.push(this.getDistributionPoint(lp))}return ep},this.getDistributionPoint=function(ju){for(var _c={},_f=Bu(ju,0),ep=0;ep<_f.length;ep++){var tp=ju.substr(_f[ep],2),op=Ru(ju,_f[ep]);tp=="a0"&&(_c.dpname=this.getDistributionPointName(op))}return _c},this.getDistributionPointName=function(ju){for(var _c={},_f=Bu(ju,0),ep=0;ep<_f.length;ep++){var tp=ju.substr(_f[ep],2),op=Ru(ju,_f[ep]);tp=="a0"&&(_c.full=this.getGeneralNames(op))}return _c},this.getExtCRLDistributionPointsURI=function(){var ju=this.getExtInfo("cRLDistributionPoints");if(ju===void 0)return ju;for(var _c=new Array,_f=Bu(this.hex,ju.vidx),ep=0;ep<_f.length;ep++)try{var tp=ne(Ou(this.hex,_f[ep],[0,0,0],"86"));_c.push(tp)}catch{}return _c},this.getExtAIAInfo=function(){var ju=this.getExtInfo("authorityInfoAccess");if(ju===void 0)return ju;for(var _c={ocsp:[],caissuer:[]},_f=Bu(this.hex,ju.vidx),ep=0;ep<_f.length;ep++){var tp=Ou(this.hex,_f[ep],[0],"06"),op=Ou(this.hex,_f[ep],[1],"86");tp==="2b06010505073001"&&_c.ocsp.push(ne(op)),tp==="2b06010505073002"&&_c.caissuer.push(ne(op))}return _c},this.getExtAuthorityInfoAccess=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("authorityInfoAccess");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"authorityInfoAccess",array:[]};_c&&(ep.critical=!0);for(var tp=Bu(ju,0),op=0;op<tp.length;op++){var lp=Du(ju,tp[op],[0],"06"),up=ne(Ou(ju,tp[op],[1],"86"));if(lp=="2b06010505073001")ep.array.push({ocsp:up});else{if(lp!="2b06010505073002")throw new Error("unknown method: "+lp);ep.array.push({caissuer:up})}}return ep},this.getExtCertificatePolicies=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("certificatePolicies");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"certificatePolicies",array:[]};_c&&(ep.critical=!0);for(var tp=Bu(ju,0),op=0;op<tp.length;op++){var lp=Ru(ju,tp[op]),up=this.getPolicyInformation(lp);ep.array.push(up)}return ep},this.getPolicyInformation=function(ju){var _c={},_f=Ou(ju,0,[0],"06");_c.policyoid=Wu(_f);var ep=Gu(ju,0,[1],"30");if(ep!=-1){_c.array=[];for(var tp=Bu(ju,ep),op=0;op<tp.length;op++){var lp=Ru(ju,tp[op]),up=this.getPolicyQualifierInfo(lp);_c.array.push(up)}}return _c},this.getPolicyQualifierInfo=function(ju){var _c={},_f=Ou(ju,0,[0],"06");if(_f==="2b06010505070201"){var ep=Du(ju,0,[1],"16");_c.cps=re$1(ep)}else if(_f==="2b06010505070202"){var tp=ku(ju,0,[1],"30");_c.unotice=this.getUserNotice(tp)}return _c},this.getUserNotice=function(ju){for(var _c={},_f=Bu(ju,0),ep=0;ep<_f.length;ep++){var tp=Ru(ju,_f[ep]);tp.substr(0,2)!="30"&&(_c.exptext=this.getDisplayText(tp))}return _c},this.getDisplayText=function(ju){var _c={};return _c.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[ju.substr(0,2)],_c.str=re$1(Lu(ju,0)),_c},this.getExtCRLNumber=function(ju,_c){var _f={extname:"cRLNumber"};if(_c&&(_f.critical=!0),ju.substr(0,2)=="02")return _f.num={hex:Lu(ju,0)},_f;throw new Error("hExtV parse error: "+ju)},this.getExtCRLReason=function(ju,_c){var _f={extname:"cRLReason"};if(_c&&(_f.critical=!0),ju.substr(0,2)=="0a")return _f.code=parseInt(Lu(ju,0),16),_f;throw new Error("hExtV parse error: "+ju)},this.getExtOcspNonce=function(ju,_c){var _f={extname:"ocspNonce"};_c&&(_f.critical=!0);var ep=Lu(ju,0);return _f.hex=ep,_f},this.getExtOcspNoCheck=function(ju,_c){var _f={extname:"ocspNoCheck"};return _c&&(_f.critical=!0),_f},this.getExtAdobeTimeStamp=function(ju,_c){if(ju===void 0&&_c===void 0){var _f=this.getExtInfo("adobeTimeStamp");if(_f===void 0)return;ju=Ru(this.hex,_f.vidx),_c=_f.critical}var ep={extname:"adobeTimeStamp"};_c&&(ep.critical=!0);var tp=Bu(ju,0);if(tp.length>1){var op=Ru(ju,tp[1]),lp=this.getGeneralName(op);lp.uri!=null&&(ep.uri=lp.uri)}if(tp.length>2){var up=Ru(ju,tp[2]);up=="0101ff"&&(ep.reqauth=!0),up=="010100"&&(ep.reqauth=!1)}return ep},this.getX500NameRule=function(ju){for(var _c=null,_f=[],ep=0;ep<ju.length;ep++)for(var tp=ju[ep],op=0;op<tp.length;op++)_f.push(tp[op]);for(ep=0;ep<_f.length;ep++){var lp=_f[ep],up=lp.ds,hp=lp.value,np=lp.type;if(up!="prn"&&up!="utf8"&&up!="ia5")return"mixed";if(up=="ia5"){if(np!="CN")return"mixed";if(l$3.lang.String.isMail(hp))continue;return"mixed"}if(np=="C"){if(up=="prn")continue;return"mixed"}if(_c==null)_c=up;else if(_c!==up)return"mixed"}return _c==null?"prn":_c},this.getX500Name=function(ju){var _c=this.getX500NameArray(ju);return{array:_c,str:this.dnarraytostr(_c)}},this.getX500NameArray=function(ju){for(var _c=[],_f=Bu(ju,0),ep=0;ep<_f.length;ep++)_c.push(this.getRDN(Ru(ju,_f[ep])));return _c},this.getRDN=function(ju){for(var _c=[],_f=Bu(ju,0),ep=0;ep<_f.length;ep++)_c.push(this.getAttrTypeAndValue(Ru(ju,_f[ep])));return _c},this.getAttrTypeAndValue=function(ju){var _c={type:null,value:null,ds:null},_f=Bu(ju,0),ep=Ou(ju,_f[0],[],"06"),tp=Ou(ju,_f[1],[]),op=l$3.asn1.ASN1Util.oidHexToInt(ep);return _c.type=l$3.asn1.x509.OID.oid2atype(op),_c.ds=this.HEX2STAG[ju.substr(_f[1],2)],_c.ds!="bmp"?_c.value=ne(tp):_c.value=he$1(tp),_c},this.readCertPEM=function(ju){this.readCertHex(Xc(ju))},this.readCertHex=function(ju){this.hex=ju,this.getVersion();try{Nu(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var ju={};return ju.version=this.getVersion(),ju.serial={hex:this.getSerialNumberHex()},ju.sigalg=this.getSignatureAlgorithmField(),ju.issuer=this.getIssuer(),ju.notbefore=this.getNotBefore(),ju.notafter=this.getNotAfter(),ju.subject=this.getSubject(),ju.sbjpubkey=ae$1(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(ju.ext=this.getExtParamArray()),ju.sighex=this.getSignatureValueHex(),ju},this.getExtParamArray=function(ju){ju==null&&Gu(this.hex,0,[0,"[3]"])!=-1&&(ju=Fu(this.hex,0,[0,"[3]",0],"30"));for(var _c=[],_f=Bu(ju,0),ep=0;ep<_f.length;ep++){var tp=Ru(ju,_f[ep]),op=this.getExtParam(tp);op!=null&&_c.push(op)}return _c},this.getExtParam=function(ju){var _c=Bu(ju,0).length;if(_c!=2&&_c!=3)throw new Error("wrong number elements in Extension: "+_c+" "+ju);var _f=_h(Ou(ju,0,[0],"06")),ep=!1;_c==3&&ku(ju,0,[1])=="0101ff"&&(ep=!0);var tp=ku(ju,0,[_c-1,0]),op=void 0;if(_f=="2.5.29.14"?op=this.getExtSubjectKeyIdentifier(tp,ep):_f=="2.5.29.15"?op=this.getExtKeyUsage(tp,ep):_f=="2.5.29.17"?op=this.getExtSubjectAltName(tp,ep):_f=="2.5.29.18"?op=this.getExtIssuerAltName(tp,ep):_f=="2.5.29.19"?op=this.getExtBasicConstraints(tp,ep):_f=="2.5.29.31"?op=this.getExtCRLDistributionPoints(tp,ep):_f=="2.5.29.32"?op=this.getExtCertificatePolicies(tp,ep):_f=="2.5.29.35"?op=this.getExtAuthorityKeyIdentifier(tp,ep):_f=="2.5.29.37"?op=this.getExtExtKeyUsage(tp,ep):_f=="1.3.6.1.5.5.7.1.1"?op=this.getExtAuthorityInfoAccess(tp,ep):_f=="2.5.29.20"?op=this.getExtCRLNumber(tp,ep):_f=="2.5.29.21"?op=this.getExtCRLReason(tp,ep):_f=="1.3.6.1.5.5.7.48.1.2"?op=this.getExtOcspNonce(tp,ep):_f=="1.3.6.1.5.5.7.48.1.5"?op=this.getExtOcspNoCheck(tp,ep):_f=="1.2.840.113583.1.1.9.1"&&(op=this.getExtAdobeTimeStamp(tp,ep)),op!=null)return op;var lp={extname:_f,extn:tp};return ep&&(lp.critical=!0),lp},this.findExt=function(ju,_c){for(var _f=0;_f<ju.length;_f++)if(ju[_f].extname==_c)return ju[_f];return null},this.updateExtCDPFullURI=function(ju,_c){var _f=this.findExt(ju,"cRLDistributionPoints");if(_f!=null&&_f.array!=null){for(var ep=_f.array,tp=0;tp<ep.length;tp++)if(ep[tp].dpname!=null&&ep[tp].dpname.full!=null)for(var op=ep[tp].dpname.full,lp=0;lp<op.length;lp++){var up=op[tp];up.uri!=null&&(up.uri=_c)}}},this.updateExtAIAOCSP=function(ju,_c){var _f=this.findExt(ju,"authorityInfoAccess");if(_f!=null&&_f.array!=null)for(var ep=_f.array,tp=0;tp<ep.length;tp++)ep[tp].ocsp!=null&&(ep[tp].ocsp=_c)},this.updateExtAIACAIssuer=function(ju,_c){var _f=this.findExt(ju,"authorityInfoAccess");if(_f!=null&&_f.array!=null)for(var ep=_f.array,tp=0;tp<ep.length;tp++)ep[tp].caissuer!=null&&(ep[tp].caissuer=_c)},this.dnarraytostr=function(ju){return"/"+ju.map(function(_c){return function(_f){return _f.map(function(ep){return function(tp){return tp.type+"="+tp.value}(ep).replace(/\+/,"\\+")}).join("+")}(_c).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var ju,_c,_f,ep,tp=function(sp){for(var cp="",dp=sp.array,fp=0;fp<dp.length;fp++){var vp=dp[fp];if(cp+="    policy oid: "+vp.policyoid+`
`,vp.array!==void 0)for(var _p=0;_p<vp.array.length;_p++){var wp=vp.array[_p];wp.cps!==void 0&&(cp+="    cps: "+wp.cps+`
`)}}return cp},op=function(sp){for(var cp="",dp=sp.array,fp=0;fp<dp.length;fp++){var vp=dp[fp];try{vp.dpname.full[0].uri!==void 0&&(cp+="    "+vp.dpname.full[0].uri+`
`)}catch{}try{vp.dname.full[0].dn.hex!==void 0&&(cp+="    "+Be.hex2dn(vp.dpname.full[0].dn.hex)+`
`)}catch{}}return cp},lp=function(sp){for(var cp="",dp=sp.array,fp=0;fp<dp.length;fp++){var vp=dp[fp];vp.caissuer!==void 0&&(cp+="    caissuer: "+vp.caissuer+`
`),vp.ocsp!==void 0&&(cp+="    ocsp: "+vp.ocsp+`
`)}return cp};if(ju=`Basic Fields
`,ju+="  serial number: "+this.getSerialNumberHex()+`
`,ju+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,ju+="  issuer: "+this.getIssuerString()+`
`,ju+="  notBefore: "+this.getNotBefore()+`
`,ju+="  notAfter: "+this.getNotAfter()+`
`,ju+="  subject: "+this.getSubjectString()+`
`,ju+=`  subject public key info: 
`,ju+="    key algorithm: "+(_c=this.getPublicKey()).type+`
`,_c.type==="RSA"&&(ju+="    n="+de$1(_c.n.toString(16)).substr(0,16)+`...
`,ju+="    e="+de$1(_c.e.toString(16))+`
`),(_f=this.aExtInfo)!=null){ju+=`X509v3 Extensions:
`;for(var up=0;up<_f.length;up++){var hp=_f[up],np=l$3.asn1.x509.OID.oid2name(hp.oid);np===""&&(np=hp.oid);var rp="";if(hp.critical===!0&&(rp="CRITICAL"),ju+="  "+np+" "+rp+`:
`,np==="basicConstraints"){var ip=this.getExtBasicConstraints();ip.cA===void 0?ju+=`    {}
`:(ju+="    cA=true",ip.pathLen!==void 0&&(ju+=", pathLen="+ip.pathLen),ju+=`
`)}else if(np==="keyUsage")ju+="    "+this.getExtKeyUsageString()+`
`;else if(np==="subjectKeyIdentifier")ju+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(np==="authorityKeyIdentifier"){var ap=this.getExtAuthorityKeyIdentifier();ap.kid!==void 0&&(ju+="    kid="+ap.kid.hex+`
`)}else np==="extKeyUsage"?ju+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:np==="subjectAltName"?ju+="    "+(ep=this.getExtSubjectAltName(),JSON.stringify(ep.array).replace(/[\[\]\{\}\"]/g,""))+`
`:np==="cRLDistributionPoints"?ju+=op(this.getExtCRLDistributionPoints()):np==="authorityInfoAccess"?ju+=lp(this.getExtAuthorityInfoAccess()):np==="certificatePolicies"&&(ju+=tp(this.getExtCertificatePolicies()))}}return ju+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,ju+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof Cu=="string"&&(Cu.indexOf("-----BEGIN")!=-1?this.readCertPEM(Cu):l$3.lang.String.isHex(Cu)&&this.readCertHex(Cu))}function Te(Cu){return h$2.SHA256(Cu).toString()}Me$1.getLblen=function(Cu,Tu){if(Cu.substr(Tu+2,1)!="8")return 1;var Pu=parseInt(Cu.substr(Tu+3,1));return Pu==0?-1:0<Pu&&Pu<10?Pu+1:-2},Me$1.getL=function(Cu,Tu){var Pu=Me$1.getLblen(Cu,Tu);return Pu<1?"":Cu.substr(Tu+2,2*Pu)},Me$1.getVblen=function(Cu,Tu){var Pu;return(Pu=Me$1.getL(Cu,Tu))==""?-1:(Pu.substr(0,1)==="8"?new c$2(Pu.substr(2),16):new c$2(Pu,16)).intValue()},Me$1.getVidx=function(Cu,Tu){var Pu=Me$1.getLblen(Cu,Tu);return Pu<0?Pu:Tu+2*(Pu+1)},Me$1.getV=function(Cu,Tu){var Pu=Me$1.getVidx(Cu,Tu),Bu=Me$1.getVblen(Cu,Tu);return Cu.substr(Pu,2*Bu)},Me$1.getTLV=function(Cu,Tu){return Cu.substr(Tu,2)+Me$1.getL(Cu,Tu)+Me$1.getV(Cu,Tu)},Me$1.getTLVblen=function(Cu,Tu){return 2+2*Me$1.getLblen(Cu,Tu)+2*Me$1.getVblen(Cu,Tu)},Me$1.getNextSiblingIdx=function(Cu,Tu){return Me$1.getVidx(Cu,Tu)+2*Me$1.getVblen(Cu,Tu)},Me$1.getChildIdx=function(Cu,Tu){var Pu,Bu,Lu,Ru=Me$1,Ou=[];Pu=Ru.getVidx(Cu,Tu),Bu=2*Ru.getVblen(Cu,Tu),Cu.substr(Tu,2)=="03"&&(Pu+=2,Bu-=2),Lu=0;for(var Du=Pu;Lu<=Bu;){var ku=Ru.getTLVblen(Cu,Du);if((Lu+=ku)<=Bu&&Ou.push(Du),Du+=ku,Lu>=Bu)break}return Ou},Me$1.getNthChildIdx=function(Cu,Tu,Pu){return Me$1.getChildIdx(Cu,Tu)[Pu]},Me$1.getIdxbyList=function(Cu,Tu,Pu,Bu){var Lu,Ru,Ou=Me$1;return Pu.length==0?Bu!==void 0&&Cu.substr(Tu,2)!==Bu?-1:Tu:(Lu=Pu.shift())>=(Ru=Ou.getChildIdx(Cu,Tu)).length?-1:Ou.getIdxbyList(Cu,Ru[Lu],Pu,Bu)},Me$1.getIdxbyListEx=function(Cu,Tu,Pu,Bu){var Lu,Ru,Ou=Me$1;if(Pu.length==0)return Bu!==void 0&&Cu.substr(Tu,2)!==Bu?-1:Tu;Lu=Pu.shift(),Ru=Ou.getChildIdx(Cu,Tu);for(var Du=0,ku=0;ku<Ru.length;ku++){var Fu=Cu.substr(Ru[ku],2);if(typeof Lu=="number"&&!Ou.isContextTag(Fu)&&Du==Lu||typeof Lu=="string"&&Ou.isContextTag(Fu,Lu))return Ou.getIdxbyListEx(Cu,Ru[ku],Pu,Bu);Ou.isContextTag(Fu)||Du++}return-1},Me$1.getTLVbyList=function(Cu,Tu,Pu,Bu){var Lu=Me$1,Ru=Lu.getIdxbyList(Cu,Tu,Pu,Bu);return Ru==-1||Ru>=Cu.length?null:Lu.getTLV(Cu,Ru)},Me$1.getTLVbyListEx=function(Cu,Tu,Pu,Bu){var Lu=Me$1,Ru=Lu.getIdxbyListEx(Cu,Tu,Pu,Bu);return Ru==-1?null:Lu.getTLV(Cu,Ru)},Me$1.getVbyList=function(Cu,Tu,Pu,Bu,Lu){var Ru,Ou,Du=Me$1;return(Ru=Du.getIdxbyList(Cu,Tu,Pu,Bu))==-1||Ru>=Cu.length?null:(Ou=Du.getV(Cu,Ru),Lu===!0&&(Ou=Ou.substr(2)),Ou)},Me$1.getVbyListEx=function(Cu,Tu,Pu,Bu,Lu){var Ru,Ou,Du=Me$1;return(Ru=Du.getIdxbyListEx(Cu,Tu,Pu,Bu))==-1?null:(Ou=Du.getV(Cu,Ru),Cu.substr(Ru,2)=="03"&&Lu!==!1&&(Ou=Ou.substr(2)),Ou)},Me$1.getInt=function(Cu,Tu,Pu){Pu==null&&(Pu=-1);try{var Bu=Cu.substr(Tu,2);if(Bu!="02"&&Bu!="03")return Pu;var Lu=Me$1.getV(Cu,Tu);return Bu=="02"?parseInt(Lu,16):function(Ru){try{var Ou=Ru.substr(0,2);if(Ou=="00")return parseInt(Ru.substr(2),16);var Du=parseInt(Ou,16),ku=Ru.substr(2),Fu=parseInt(ku,16).toString(2);return Fu=="0"&&(Fu="00000000"),Fu=Fu.slice(0,0-Du),parseInt(Fu,2)}catch{return-1}}(Lu)}catch{return Pu}},Me$1.getOID=function(Cu,Tu,Pu){Pu==null&&(Pu=null);try{return Cu.substr(Tu,2)!="06"?Pu:function(Bu){if(!ce(Bu))return null;try{var Lu=[],Ru=Bu.substr(0,2),Ou=parseInt(Ru,16);Lu[0]=new String(Math.floor(Ou/40)),Lu[1]=new String(Ou%40);for(var Du=Bu.substr(2),ku=[],Fu=0;Fu<Du.length/2;Fu++)ku.push(parseInt(Du.substr(2*Fu,2),16));var Nu=[],Gu="";for(Fu=0;Fu<ku.length;Fu++)128&ku[Fu]?Gu+=pe((127&ku[Fu]).toString(2),7):(Gu+=pe((127&ku[Fu]).toString(2),7),Nu.push(new String(parseInt(Gu,2))),Gu="");var zu=Lu.join(".");return Nu.length>0&&(zu=zu+"."+Nu.join(".")),zu}catch{return null}}(Me$1.getV(Cu,Tu))}catch{return Pu}},Me$1.getOIDName=function(Cu,Tu,Pu){Pu==null&&(Pu=null);try{var Bu=Me$1.getOID(Cu,Tu,Pu);if(Bu==Pu)return Pu;var Lu=l$3.asn1.x509.OID.oid2name(Bu);return Lu==""?Bu:Lu}catch{return Pu}},Me$1.getString=function(Cu,Tu,Pu){Pu==null&&(Pu=null);try{return re$1(Me$1.getV(Cu,Tu))}catch{return Pu}},Me$1.hextooidstr=function(Cu){var Tu=function(Gu,zu){return Gu.length>=zu?Gu:new Array(zu-Gu.length+1).join("0")+Gu},Pu=[],Bu=Cu.substr(0,2),Lu=parseInt(Bu,16);Pu[0]=new String(Math.floor(Lu/40)),Pu[1]=new String(Lu%40);for(var Ru=Cu.substr(2),Ou=[],Du=0;Du<Ru.length/2;Du++)Ou.push(parseInt(Ru.substr(2*Du,2),16));var ku=[],Fu="";for(Du=0;Du<Ou.length;Du++)128&Ou[Du]?Fu+=Tu((127&Ou[Du]).toString(2),7):(Fu+=Tu((127&Ou[Du]).toString(2),7),ku.push(new String(parseInt(Fu,2))),Fu="");var Nu=Pu.join(".");return ku.length>0&&(Nu=Nu+"."+ku.join(".")),Nu},Me$1.dump=function(Cu,Tu,Pu,Bu){var Lu=Me$1,Ru=Lu.getV,Ou=Lu.dump,Du=Lu.getChildIdx,ku=Cu;Cu instanceof l$3.asn1.ASN1Object&&(ku=Cu.getEncodedHex());var Fu=function(lp,up){return lp.length<=2*up?lp:lp.substr(0,up)+"..(total "+lp.length/2+"bytes).."+lp.substr(lp.length-up,up)};Tu===void 0&&(Tu={ommit_long_octet:32}),Pu===void 0&&(Pu=0),Bu===void 0&&(Bu="");var Nu,Gu=Tu.ommit_long_octet;if((Nu=ku.substr(Pu,2))=="01")return(zu=Ru(ku,Pu))=="00"?Bu+`BOOLEAN FALSE
`:Bu+`BOOLEAN TRUE
`;if(Nu=="02")return Bu+"INTEGER "+Fu(zu=Ru(ku,Pu),Gu)+`
`;if(Nu=="03"){var zu=Ru(ku,Pu);if(Lu.isASN1HEX(zu.substr(2))){var Hu=Bu+`BITSTRING, encapsulates
`;return Hu+=Ou(zu.substr(2),Tu,0,Bu+"  ")}return Bu+"BITSTRING "+Fu(zu,Gu)+`
`}if(Nu=="04")return zu=Ru(ku,Pu),Lu.isASN1HEX(zu)?(Hu=Bu+`OCTETSTRING, encapsulates
`,Hu+=Ou(zu,Tu,0,Bu+"  ")):Bu+"OCTETSTRING "+Fu(zu,Gu)+`
`;if(Nu=="05")return Bu+`NULL
`;if(Nu=="06"){var Wu=Ru(ku,Pu),_h=l$3.asn1.ASN1Util.oidHexToInt(Wu),Xc=l$3.asn1.x509.OID.oid2name(_h),ju=_h.replace(/\./g," ");return Xc!=""?Bu+"ObjectIdentifier "+Xc+" ("+ju+`)
`:Bu+"ObjectIdentifier ("+ju+`)
`}if(Nu=="0a")return Bu+"ENUMERATED "+parseInt(Ru(ku,Pu))+`
`;if(Nu=="0c")return Bu+"UTF8String '"+ne(Ru(ku,Pu))+`'
`;if(Nu=="13")return Bu+"PrintableString '"+ne(Ru(ku,Pu))+`'
`;if(Nu=="14")return Bu+"TeletexString '"+ne(Ru(ku,Pu))+`'
`;if(Nu=="16")return Bu+"IA5String '"+ne(Ru(ku,Pu))+`'
`;if(Nu=="17")return Bu+"UTCTime "+ne(Ru(ku,Pu))+`
`;if(Nu=="18")return Bu+"GeneralizedTime "+ne(Ru(ku,Pu))+`
`;if(Nu=="1a")return Bu+"VisualString '"+ne(Ru(ku,Pu))+`'
`;if(Nu=="1e")return Bu+"BMPString '"+he$1(Ru(ku,Pu))+`'
`;if(Nu=="30"){if(ku.substr(Pu,4)=="3000")return Bu+`SEQUENCE {}
`;Hu=Bu+`SEQUENCE
`;var _c=Tu;if(((tp=Du(ku,Pu)).length==2||tp.length==3)&&ku.substr(tp[0],2)=="06"&&ku.substr(tp[tp.length-1],2)=="04"){Xc=Lu.oidname(Ru(ku,tp[0]));var _f=JSON.parse(JSON.stringify(Tu));_f.x509ExtName=Xc,_c=_f}for(var ep=0;ep<tp.length;ep++)Hu+=Ou(ku,_c,tp[ep],Bu+"  ");return Hu}if(Nu=="31"){Hu=Bu+`SET
`;var tp=Du(ku,Pu);for(ep=0;ep<tp.length;ep++)Hu+=Ou(ku,Tu,tp[ep],Bu+"  ");return Hu}if((128&(Nu=parseInt(Nu,16)))!=0){var op=31&Nu;if((32&Nu)!=0){for(Hu=Bu+"["+op+`]
`,tp=Du(ku,Pu),ep=0;ep<tp.length;ep++)Hu+=Ou(ku,Tu,tp[ep],Bu+"  ");return Hu}if(zu=Ru(ku,Pu),Me$1.isASN1HEX(zu)){var Hu=Bu+"["+op+`]
`;return Hu+=Ou(zu,Tu,0,Bu+"  ")}return(zu.substr(0,8)=="68747470"||Tu.x509ExtName==="subjectAltName"&&op==2)&&(zu=ne(zu)),Hu=Bu+"["+op+"] "+zu+`
`}return Bu+"UNKNOWN("+Nu+") "+Ru(ku,Pu)+`
`},Me$1.isContextTag=function(Cu,Tu){var Pu,Bu;Cu=Cu.toLowerCase();try{Pu=parseInt(Cu,16)}catch{return-1}if(Tu===void 0)return(192&Pu)==128;try{return Tu.match(/^\[[0-9]+\]$/)!=null&&!((Bu=parseInt(Tu.substr(1,Tu.length-1),10))>31)&&(192&Pu)==128&&(31&Pu)==Bu}catch{return!1}},Me$1.isASN1HEX=function(Cu){var Tu=Me$1;if(Cu.length%2==1)return!1;var Pu=Tu.getVblen(Cu,0),Bu=Cu.substr(0,2),Lu=Tu.getL(Cu,0);return Cu.length-Bu.length-Lu.length==2*Pu},Me$1.checkStrictDER=function(Cu,Tu,Pu,Bu,Lu){var Ru=Me$1;if(Pu===void 0){if(typeof Cu!="string")throw new Error("not hex string");if(Cu=Cu.toLowerCase(),!l$3.lang.String.isHex(Cu))throw new Error("not hex string");Pu=Cu.length,Lu=(Bu=Cu.length/2)<128?1:Math.ceil(Bu.toString(16))+1}if(Ru.getL(Cu,Tu).length>2*Lu)throw new Error("L of TLV too long: idx="+Tu);var Ou=Ru.getVblen(Cu,Tu);if(Ou>Bu)throw new Error("value of L too long than hex: idx="+Tu);var Du=Ru.getTLV(Cu,Tu),ku=Du.length-2-Ru.getL(Cu,Tu).length;if(ku!==2*Ou)throw new Error("V string length and L's value not the same:"+ku+"/"+2*Ou);if(Tu===0&&Cu.length!=Du.length)throw new Error("total length and TLV length unmatch:"+Cu.length+"!="+Du.length);var Fu=Cu.substr(Tu,2);if(Fu==="02"){var Nu=Ru.getVidx(Cu,Tu);if(Cu.substr(Nu,2)=="00"&&Cu.charCodeAt(Nu+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Fu,16)){for(var Gu=Ru.getVblen(Cu,Tu),zu=0,Hu=Ru.getChildIdx(Cu,Tu),Wu=0;Wu<Hu.length;Wu++)zu+=Ru.getTLV(Cu,Hu[Wu]).length,Ru.checkStrictDER(Cu,Hu[Wu],Pu,Bu,Lu);if(2*Gu!=zu)throw new Error("sum of children's TLV length and L unmatch: "+2*Gu+"!="+zu)}},Me$1.oidname=function(Cu){var Tu=l$3.asn1;l$3.lang.String.isHex(Cu)&&(Cu=Tu.ASN1Util.oidHexToInt(Cu));var Pu=Tu.x509.OID.oid2name(Cu);return Pu===""&&(Pu=Cu),Pu},l$3.asn1!==void 0&&l$3.asn1||(l$3.asn1={}),l$3.asn1.x509!==void 0&&l$3.asn1.x509||(l$3.asn1.x509={}),l$3.asn1.x509.Certificate=function(Cu){l$3.asn1.x509.Certificate.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERBitString,Bu=Tu.DERSequence,Lu=Tu.x509,Ru=Lu.TBSCertificate,Ou=Lu.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Du){this.params=Du},this.sign=function(){var Du=this.params,ku=Du.sigalg;Du.sigalg.name!=null&&(ku=Du.sigalg.name);var Fu=Du.tbsobj.getEncodedHex(),Nu=new l$3.crypto.Signature({alg:ku});Nu.init(Du.cakey),Nu.updateHex(Fu),Du.sighex=Nu.sign()},this.getPEM=function(){return ae$1(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Du=this.params;if(Du.tbsobj!=null&&Du.tbsobj!=null||(Du.tbsobj=new Ru(Du)),Du.sighex==null&&Du.cakey!=null&&this.sign(),Du.sighex==null)throw new Error("sighex or cakey parameter not defined");var ku=[];return ku.push(Du.tbsobj),ku.push(new Ou({name:Du.sigalg})),ku.push(new Pu({hex:"00"+Du.sighex})),new Bu({array:ku}).getEncodedHex()},Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.Certificate,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertificate=function(Cu){l$3.asn1.x509.TBSCertificate.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.x509,Bu=Tu.DERTaggedObject,Lu=Tu.DERInteger,Ru=Tu.DERSequence,Ou=Pu.AlgorithmIdentifier,Du=Pu.Time,ku=Pu.X500Name,Fu=Pu.Extensions,Nu=Pu.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Gu){this.params=Gu},this.getEncodedHex=function(){var Gu=[],zu=this.params;if(zu.version!=null||zu.version!=1){var Hu=2;zu.version!=null&&(Hu=zu.version-1);var Wu=new Bu({obj:new Lu({int:Hu})});Gu.push(Wu)}return Gu.push(new Lu(zu.serial)),Gu.push(new Ou({name:zu.sigalg})),Gu.push(new ku(zu.issuer)),Gu.push(new Ru({array:[new Du(zu.notbefore),new Du(zu.notafter)]})),Gu.push(new ku(zu.subject)),Gu.push(new Nu(Ee.getKey(zu.sbjpubkey))),zu.ext!==void 0&&zu.ext.length>0&&Gu.push(new Bu({tag:"a3",obj:new Fu(zu.ext)})),new l$3.asn1.DERSequence({array:Gu}).getEncodedHex()},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.TBSCertificate,l$3.asn1.ASN1Object),l$3.asn1.x509.Extensions=function(Cu){l$3.asn1.x509.Extensions.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERSequence,Bu=Tu.x509;this.aParam=[],this.setByParam=function(Lu){this.aParam=Lu},this.getEncodedHex=function(){for(var Lu=[],Ru=0;Ru<this.aParam.length;Ru++){var Ou=this.aParam[Ru],Du=Ou.extname,ku=null;if(Ou.extn!=null)ku=new Bu.PrivateExtension(Ou);else if(Du=="subjectKeyIdentifier")ku=new Bu.SubjectKeyIdentifier(Ou);else if(Du=="keyUsage")ku=new Bu.KeyUsage(Ou);else if(Du=="subjectAltName")ku=new Bu.SubjectAltName(Ou);else if(Du=="issuerAltName")ku=new Bu.IssuerAltName(Ou);else if(Du=="basicConstraints")ku=new Bu.BasicConstraints(Ou);else if(Du=="cRLDistributionPoints")ku=new Bu.CRLDistributionPoints(Ou);else if(Du=="certificatePolicies")ku=new Bu.CertificatePolicies(Ou);else if(Du=="authorityKeyIdentifier")ku=new Bu.AuthorityKeyIdentifier(Ou);else if(Du=="extKeyUsage")ku=new Bu.ExtKeyUsage(Ou);else if(Du=="authorityInfoAccess")ku=new Bu.AuthorityInfoAccess(Ou);else if(Du=="cRLNumber")ku=new Bu.CRLNumber(Ou);else if(Du=="cRLReason")ku=new Bu.CRLReason(Ou);else if(Du=="ocspNonce")ku=new Bu.OCSPNonce(Ou);else if(Du=="ocspNoCheck")ku=new Bu.OCSPNoCheck(Ou);else if(Du=="adobeTimeStamp")ku=new Bu.AdobeTimeStamp(Ou);else{if(Du!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Ou));ku=new Bu.SubjectDirectoryAttributes(Ou)}ku!=null&&Lu.push(ku)}return new Pu({array:Lu}).getEncodedHex()},Cu!=null&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.Extensions,l$3.asn1.ASN1Object),l$3.asn1.x509.Extension=function(Cu){l$3.asn1.x509.Extension.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERObjectIdentifier,Bu=Tu.DEROctetString;Tu.DERBitString;var Lu=Tu.DERBoolean,Ru=Tu.DERSequence;this.getEncodedHex=function(){var Ou=new Pu({oid:this.oid}),Du=new Bu({hex:this.getExtnValueHex()}),ku=new Array;return ku.push(Ou),this.critical&&ku.push(new Lu),ku.push(Du),new Ru({array:ku}).getEncodedHex()},this.critical=!1,Cu!==void 0&&Cu.critical!==void 0&&(this.critical=Cu.critical)},fe$1(l$3.asn1.x509.Extension,l$3.asn1.ASN1Object),l$3.asn1.x509.KeyUsage=function(Cu){l$3.asn1.x509.KeyUsage.superclass.constructor.call(this,Cu);var Tu=Be.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",Cu!==void 0&&(Cu.bin!==void 0&&(this.asn1ExtnValue=new l$3.asn1.DERBitString(Cu)),Cu.names!==void 0&&Cu.names.length!==void 0)){for(var Pu=Cu.names,Bu="000000000",Lu=0;Lu<Pu.length;Lu++)for(var Ru=0;Ru<Tu.length;Ru++)Pu[Lu]===Tu[Ru]&&(Bu=Bu.substring(0,Ru)+"1"+Bu.substring(Ru+1,Bu.length));this.asn1ExtnValue=new l$3.asn1.DERBitString({bin:Bu})}},fe$1(l$3.asn1.x509.KeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.BasicConstraints=function(Cu){l$3.asn1.x509.BasicConstraints.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.DERBoolean,Bu=Tu.DERInteger,Lu=Tu.DERSequence;this.getExtnValueHex=function(){var Ru=new Array;this.cA&&Ru.push(new Pu),this.pathLen>-1&&Ru.push(new Bu({int:this.pathLen}));var Ou=new Lu({array:Ru});return this.asn1ExtnValue=Ou,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,Cu!==void 0&&(Cu.cA!==void 0&&(this.cA=Cu.cA),Cu.pathLen!==void 0&&(this.pathLen=Cu.pathLen))},fe$1(l$3.asn1.x509.BasicConstraints,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLDistributionPoints=function(Cu){l$3.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(Bu){for(var Lu=[],Ru=0;Ru<Bu.length;Ru++)if(Bu[Ru]instanceof l$3.asn1.ASN1Object)Lu.push(Bu[Ru]);else{var Ou=new Pu.DistributionPoint(Bu[Ru]);Lu.push(Ou)}this.asn1ExtnValue=new Tu.DERSequence({array:Lu})},this.setByOneURI=function(Bu){var Lu=new Pu.DistributionPoint({fulluri:Bu});this.setByDPArray([Lu])},this.oid="2.5.29.31",Cu!==void 0&&(Cu.array!==void 0?this.setByDPArray(Cu.array):Cu.uri!==void 0&&this.setByOneURI(Cu.uri))},fe$1(l$3.asn1.x509.CRLDistributionPoints,l$3.asn1.x509.Extension),l$3.asn1.x509.DistributionPoint=function(Cu){l$3.asn1.x509.DistributionPoint.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.x509.DistributionPointName;this.getEncodedHex=function(){var Bu=new Tu.DERSequence;if(this.asn1DP!=null){var Lu=new Tu.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});Bu.appendASN1Object(Lu)}return this.hTLV=Bu.getEncodedHex(),this.hTLV},Cu!==void 0&&(Cu.dpobj!==void 0?this.asn1DP=Cu.dpobj:Cu.dpname!==void 0?this.asn1DP=new Pu(Cu.dpname):Cu.fulluri!==void 0&&(this.asn1DP=new Pu({full:[{uri:Cu.fulluri}]})))},fe$1(l$3.asn1.x509.DistributionPoint,l$3.asn1.ASN1Object),l$3.asn1.x509.DistributionPointName=function(Cu){l$3.asn1.x509.DistributionPointName.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new Pu({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},Cu!==void 0)if(Tu.x509.GeneralNames.prototype.isPrototypeOf(Cu))this.type="full",this.tag="a0",this.asn1V=Cu;else{if(Cu.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new Tu.x509.GeneralNames(Cu.full)}},fe$1(l$3.asn1.x509.DistributionPointName,l$3.asn1.ASN1Object),l$3.asn1.x509.CertificatePolicies=function(Cu){l$3.asn1.x509.CertificatePolicies.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.x509,Bu=Tu.DERSequence,Lu=Pu.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Ou=0;Ou<this.params.array.length;Ou++)Ru.push(new Lu(this.params.array[Ou]));var Du=new Bu({array:Ru});return this.asn1ExtnValue=Du,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.CertificatePolicies,l$3.asn1.x509.Extension),l$3.asn1.x509.PolicyInformation=function(Cu){l$3.asn1.x509.PolicyInformation.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.DERSequence,Bu=Tu.DERObjectIdentifier,Lu=Tu.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Ru=[new Bu(this.params.policyoid)];if(this.params.array!==void 0){for(var Ou=[],Du=0;Du<this.params.array.length;Du++)Ou.push(new Lu(this.params.array[Du]));Ou.length>0&&Ru.push(new Pu({array:Ou}))}return new Pu({array:Ru}).getEncodedHex()},Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.PolicyInformation,l$3.asn1.ASN1Object),l$3.asn1.x509.PolicyQualifierInfo=function(Cu){l$3.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.DERSequence,Bu=Tu.DERIA5String,Lu=Tu.DERObjectIdentifier,Ru=Tu.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new Pu({array:[new Lu({oid:"1.3.6.1.5.5.7.2.1"}),new Bu({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new Pu({array:[new Lu({oid:"1.3.6.1.5.5.7.2.2"}),new Ru(this.params.unotice)]}).getEncodedHex():void 0},Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.PolicyQualifierInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.UserNotice=function(Cu){l$3.asn1.x509.UserNotice.superclass.constructor.call(this,Cu);var Tu=l$3.asn1.DERSequence;l$3.asn1.DERInteger;var Pu=l$3.asn1.x509.DisplayText,Bu=l$3.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var Lu=[];return this.params.noticeref!==void 0&&Lu.push(new Bu(this.params.noticeref)),this.params.exptext!==void 0&&Lu.push(new Pu(this.params.exptext)),new Tu({array:Lu}).getEncodedHex()},Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.UserNotice,l$3.asn1.ASN1Object),l$3.asn1.x509.NoticeReference=function(Cu){l$3.asn1.x509.NoticeReference.superclass.constructor.call(this,Cu);var Tu=l$3.asn1.DERSequence,Pu=l$3.asn1.DERInteger,Bu=l$3.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var Lu=[];if(this.params.org!==void 0&&Lu.push(new Bu(this.params.org)),this.params.noticenum!==void 0){for(var Ru=[],Ou=this.params.noticenum,Du=0;Du<Ou.length;Du++)Ru.push(new Pu(Ou[Du]));Lu.push(new Tu({array:Ru}))}if(Lu.length==0)throw new Error("parameter is empty");return new Tu({array:Lu}).getEncodedHex()},Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.NoticeReference,l$3.asn1.ASN1Object),l$3.asn1.x509.DisplayText=function(Cu){l$3.asn1.x509.DisplayText.superclass.constructor.call(this,Cu),this.hT="0c",Cu!==void 0&&(Cu.type==="ia5"?this.hT="16":Cu.type==="vis"?this.hT="1a":Cu.type==="bmp"&&(this.hT="1e"))},fe$1(l$3.asn1.x509.DisplayText,l$3.asn1.DERAbstractString),l$3.asn1.x509.ExtKeyUsage=function(Cu){l$3.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,Cu);var Tu=l$3.asn1;this.setPurposeArray=function(Pu){this.asn1ExtnValue=new Tu.DERSequence;for(var Bu=0;Bu<Pu.length;Bu++){var Lu=new Tu.DERObjectIdentifier(Pu[Bu]);this.asn1ExtnValue.appendASN1Object(Lu)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",Cu!==void 0&&Cu.array!==void 0&&this.setPurposeArray(Cu.array)},fe$1(l$3.asn1.x509.ExtKeyUsage,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityKeyIdentifier=function(Cu){l$3.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,Cu);var Tu=l$3,Pu=Tu.asn1,Bu=Pu.DERTaggedObject,Lu=Pu.x509.GeneralNames;Tu.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Ru=new Array;this.asn1KID&&Ru.push(new Bu({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Ru.push(new Bu({explicit:!1,tag:"a1",obj:new Lu([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Ru.push(new Bu({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Ou=new Pu.DERSequence({array:Ru});return this.asn1ExtnValue=Ou,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ru){if(Ru.str!==void 0||Ru.hex!==void 0)this.asn1KID=new l$3.asn1.DEROctetString(Ru);else if(typeof Ru=="object"&&l$3.crypto.Util.isKey(Ru)||typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1){var Ou=Ru;typeof Ru=="string"&&(Ou=Ee.getKey(Ru));var Du=Ee.getKeyID(Ou);this.asn1KID=new l$3.asn1.DEROctetString({hex:Du})}},this.setCertIssuerByParam=function(Ru){Ru.str!==void 0||Ru.ldapstr!==void 0||Ru.hex!==void 0||Ru.certsubject!==void 0||Ru.certissuer!==void 0?this.asn1CertIssuer=new l$3.asn1.x509.X500Name(Ru):typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new l$3.asn1.x509.X500Name({certissuer:Ru}))},this.setCertSNByParam=function(Ru){if(Ru.str!==void 0||Ru.bigint!==void 0||Ru.hex!==void 0)this.asn1CertSN=new l$3.asn1.DERInteger(Ru);else if(typeof Ru=="string"&&Ru.indexOf("BEGIN ")!=-1&&Ru.indexOf("CERTIFICATE")){var Ou=new Be;Ou.readCertPEM(Ru);var Du=Ou.getSerialNumberHex();this.asn1CertSN=new l$3.asn1.DERInteger({hex:Du})}},this.oid="2.5.29.35",Cu!==void 0&&(Cu.kid!==void 0&&this.setKIDByParam(Cu.kid),Cu.issuer!==void 0&&this.setCertIssuerByParam(Cu.issuer),Cu.sn!==void 0&&this.setCertSNByParam(Cu.sn),Cu.issuersn!==void 0&&typeof Cu.issuersn=="string"&&Cu.issuersn.indexOf("BEGIN ")!=-1&&Cu.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(Cu.issuersn),this.setCertIssuerByParam(Cu.issuersn)))},fe$1(l$3.asn1.x509.AuthorityKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectKeyIdentifier=function(Cu){l$3.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,Cu);var Tu=l$3.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Pu){if(Pu.str!==void 0||Pu.hex!==void 0)this.asn1KID=new Tu(Pu);else if(typeof Pu=="object"&&l$3.crypto.Util.isKey(Pu)||typeof Pu=="string"&&Pu.indexOf("BEGIN")!=-1){var Bu=Pu;typeof Pu=="string"&&(Bu=Ee.getKey(Pu));var Lu=Ee.getKeyID(Bu);this.asn1KID=new l$3.asn1.DEROctetString({hex:Lu})}},this.oid="2.5.29.14",Cu!==void 0&&Cu.kid!==void 0&&this.setKIDByParam(Cu.kid)},fe$1(l$3.asn1.x509.SubjectKeyIdentifier,l$3.asn1.x509.Extension),l$3.asn1.x509.AuthorityInfoAccess=function(Cu){l$3.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,Cu),this.setAccessDescriptionArray=function(Tu){for(var Pu=new Array,Bu=l$3.asn1,Lu=Bu.DERSequence,Ru=Bu.DERObjectIdentifier,Ou=Bu.x509.GeneralName,Du=0;Du<Tu.length;Du++){var ku,Fu=Tu[Du];if(Fu.ocsp!==void 0)ku=new Lu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.1"}),new Ou({uri:Fu.ocsp})]});else{if(Fu.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Fu));ku=new Lu({array:[new Ru({oid:"1.3.6.1.5.5.7.48.2"}),new Ou({uri:Fu.caissuer})]})}Pu.push(ku)}this.asn1ExtnValue=new Lu({array:Pu})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",Cu!==void 0&&Cu.array!==void 0&&this.setAccessDescriptionArray(Cu.array)},fe$1(l$3.asn1.x509.AuthorityInfoAccess,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectAltName=function(Cu){l$3.asn1.x509.SubjectAltName.superclass.constructor.call(this,Cu),this.setNameArray=function(Tu){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames(Tu)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",Cu!==void 0&&Cu.array!==void 0&&this.setNameArray(Cu.array)},fe$1(l$3.asn1.x509.SubjectAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.IssuerAltName=function(Cu){l$3.asn1.x509.IssuerAltName.superclass.constructor.call(this,Cu),this.setNameArray=function(Tu){this.asn1ExtnValue=new l$3.asn1.x509.GeneralNames(Tu)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",Cu!==void 0&&Cu.array!==void 0&&this.setNameArray(Cu.array)},fe$1(l$3.asn1.x509.IssuerAltName,l$3.asn1.x509.Extension),l$3.asn1.x509.SubjectDirectoryAttributes=function(Cu){l$3.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.DERSequence,Bu=Tu.ASN1Util.newObject,Lu=Tu.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Ru=[],Ou=0;Ou<this.params.array.length;Ou++){var Du=this.params.array[Ou],ku={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Du.attr=="dateOfBirth")ku.seq[0].oid=Lu(Du.attr),ku.seq[1].set[0]={gentime:Du.str};else if(Du.attr=="placeOfBirth")ku.seq[0].oid=Lu(Du.attr),ku.seq[1].set[0]={utf8str:Du.str};else if(Du.attr=="gender")ku.seq[0].oid=Lu(Du.attr),ku.seq[1].set[0]={prnstr:Du.str};else if(Du.attr=="countryOfCitizenship")ku.seq[0].oid=Lu(Du.attr),ku.seq[1].set[0]={prnstr:Du.str};else{if(Du.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Du.attr);ku.seq[0].oid=Lu(Du.attr),ku.seq[1].set[0]={prnstr:Du.str}}Ru.push(new Bu(ku))}var Fu=new Pu({array:Ru});return this.asn1ExtnValue=Fu,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",Cu!==void 0&&(this.params=Cu)},fe$1(l$3.asn1.x509.SubjectDirectoryAttributes,l$3.asn1.x509.Extension),l$3.asn1.x509.PrivateExtension=function(Cu){l$3.asn1.x509.PrivateExtension.superclass.constructor.call(this,Cu);var Tu=l$3,Pu=Tu.lang.String.isHex,Bu=Tu.asn1,Lu=Bu.x509.OID.name2oid,Ru=Bu.ASN1Util.newObject;this.params=null,this.setByParam=function(Ou){this.oid=Lu(Ou.extname),this.params=Ou},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Ou=this.params.extn;if(typeof Ou=="string"&&Pu(Ou))return Ou;if(typeof Ou=="object")try{return Ru(Ou).getEncodedHex()}catch{}throw new Error("unsupported extn value")},Cu!=null&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.PrivateExtension,l$3.asn1.x509.Extension),l$3.asn1.x509.CRL=function(Cu){l$3.asn1.x509.CRL.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERSequence,Bu=Tu.DERBitString,Lu=Tu.x509,Ru=Lu.AlgorithmIdentifier,Ou=Lu.TBSCertList;this.params=void 0,this.setByParam=function(Du){this.params=Du},this.sign=function(){var Du=new Ou(this.params).getEncodedHex(),ku=new l$3.crypto.Signature({alg:this.params.sigalg});ku.init(this.params.cakey),ku.updateHex(Du);var Fu=ku.sign();this.params.sighex=Fu},this.getPEM=function(){return ae$1(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Du=this.params;if(Du.tbsobj==null&&(Du.tbsobj=new Ou(Du)),Du.sighex==null&&Du.cakey!=null&&this.sign(),Du.sighex==null)throw new Error("sighex or cakey parameter not defined");var ku=[];return ku.push(Du.tbsobj),ku.push(new Ru({name:Du.sigalg})),ku.push(new Bu({hex:"00"+Du.sighex})),new Pu({array:ku}).getEncodedHex()},Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.CRL,l$3.asn1.ASN1Object),l$3.asn1.x509.TBSCertList=function(Cu){l$3.asn1.x509.TBSCertList.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERInteger,Bu=Tu.DERSequence,Lu=Tu.DERTaggedObject;Tu.DERObjectIdentifier;var Ru=Tu.x509,Ou=Ru.AlgorithmIdentifier,Du=Ru.Time,ku=Ru.Extensions,Fu=Ru.X500Name;this.params=null,this.setByParam=function(Nu){this.params=Nu},this.getRevCertSequence=function(){for(var Nu=[],Gu=this.params.revcert,zu=0;zu<Gu.length;zu++){var Hu=[new Pu(Gu[zu].sn),new Du(Gu[zu].date)];Gu[zu].ext!=null&&Hu.push(new ku(Gu[zu].ext)),Nu.push(new Bu({array:Hu}))}return new Bu({array:Nu})},this.getEncodedHex=function(){var Nu=[],Gu=this.params;if(Gu.version!=null){var zu=Gu.version-1,Hu=new Pu({int:zu});Nu.push(Hu)}if(Nu.push(new Ou({name:Gu.sigalg})),Nu.push(new Fu(Gu.issuer)),Nu.push(new Du(Gu.thisupdate)),Gu.nextupdate!=null&&Nu.push(new Du(Gu.nextupdate)),Gu.revcert!=null&&Nu.push(this.getRevCertSequence()),Gu.ext!=null){var Wu=new ku(Gu.ext);Nu.push(new Lu({tag:"a0",explicit:!0,obj:Wu}))}return new Bu({array:Nu}).getEncodedHex()},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.TBSCertList,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLEntry=function(Cu){l$3.asn1.x509.CRLEntry.superclass.constructor.call(this);var Tu=l$3.asn1;this.setCertSerial=function(Pu){this.sn=new Tu.DERInteger(Pu)},this.setRevocationDate=function(Pu){this.time=new Tu.x509.Time(Pu)},this.getEncodedHex=function(){var Pu=new Tu.DERSequence({array:[this.sn,this.time]});return this.TLV=Pu.getEncodedHex(),this.TLV},Cu!==void 0&&(Cu.time!==void 0&&this.setRevocationDate(Cu.time),Cu.sn!==void 0&&this.setCertSerial(Cu.sn))},fe$1(l$3.asn1.x509.CRLEntry,l$3.asn1.ASN1Object),l$3.asn1.x509.CRLNumber=function(Cu){l$3.asn1.x509.CRLNumber.superclass.constructor.call(this,Cu),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.CRLNumber,l$3.asn1.x509.Extension),l$3.asn1.x509.CRLReason=function(Cu){l$3.asn1.x509.CRLReason.superclass.constructor.call(this,Cu),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.CRLReason,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNonce=function(Cu){l$3.asn1.x509.OCSPNonce.superclass.constructor.call(this,Cu),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.OCSPNonce,l$3.asn1.x509.Extension),l$3.asn1.x509.OCSPNoCheck=function(Cu){l$3.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,Cu),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new l$3.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",Cu!=null&&(this.params=Cu)},fe$1(l$3.asn1.x509.OCSPNoCheck,l$3.asn1.x509.Extension),l$3.asn1.x509.AdobeTimeStamp=function(Cu){l$3.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,Cu);var Tu=l$3.asn1,Pu=Tu.DERInteger,Bu=Tu.DERBoolean,Lu=Tu.DERSequence,Ru=Tu.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Ou=this.params,Du=[new Pu(1)];return Du.push(new Ru({uri:Ou.uri})),Ou.reqauth!=null&&Du.push(new Bu(Ou.reqauth)),this.asn1ExtnValue=new Lu({array:Du}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.AdobeTimeStamp,l$3.asn1.x509.Extension),l$3.asn1.x509.X500Name=function(Cu){l$3.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var Tu=l$3.asn1,Pu=Tu.x509,Bu=Pu.RDN;this.setByString=function(Lu,Ru){Ru!==void 0&&(this.sRule=Ru);var Ou=Lu.split("/");Ou.shift();for(var Du=[],ku=0;ku<Ou.length;ku++)if(Ou[ku].match(/^[^=]+=.+$/))Du.push(Ou[ku]);else{var Fu=Du.length-1;Du[Fu]=Du[Fu]+"/"+Ou[ku]}for(ku=0;ku<Du.length;ku++)this.asn1Array.push(new Bu({str:Du[ku],rule:this.sRule}))},this.setByLdapString=function(Lu,Ru){Ru!==void 0&&(this.sRule=Ru);var Ou=Pu.X500Name.ldapToCompat(Lu);this.setByString(Ou,Ru)},this.setByObject=function(Lu,Ru){for(var Ou in Ru!==void 0&&(this.sRule=Ru),Lu)if(Lu.hasOwnProperty(Ou)){var Du=new Bu({str:Ou+"="+Lu[Ou],rule:this.sRule});this.asn1Array?this.asn1Array.push(Du):this.asn1Array=[Du]}},this.setByParam=function(Lu){var Ru;Lu.rule!==void 0&&(this.sRule=Lu.rule),Lu.array!==void 0?this.paramArray=Lu.array:Lu.str!==void 0?this.setByString(Lu.str):Lu.ldapstr!==void 0?this.setByLdapString(Lu.ldapstr):Lu.hex!==void 0?this.hTLV=Lu.hex:Lu.certissuer!==void 0?((Ru=new Be).readCertPEM(Lu.certissuer),this.hTLV=Ru.getIssuerHex()):Lu.certsubject!==void 0?((Ru=new Be).readCertPEM(Lu.certsubject),this.hTLV=Ru.getSubjectHex()):typeof Lu=="object"&&Lu.certsubject===void 0&&Lu.certissuer===void 0&&this.setByObject(Lu)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Lu=0;Lu<this.paramArray.length;Lu++){var Ru={array:this.paramArray[Lu]};this.sRule!="utf8"&&(Ru.rule=this.sRule);var Ou=new Bu(Ru);this.asn1Array.push(Ou)}var Du=new Tu.DERSequence({array:this.asn1Array});return this.hTLV=Du.getEncodedHex(),this.hTLV},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.X500Name,l$3.asn1.ASN1Object),l$3.asn1.x509.X500Name.compatToLDAP=function(Cu){if(Cu.substr(0,1)!=="/")throw"malformed input";var Tu=(Cu=Cu.substr(1)).split("/");return Tu.reverse(),(Tu=Tu.map(function(Pu){return Pu.replace(/,/,"\\,")})).join(",")},l$3.asn1.x509.X500Name.onelineToLDAP=function(Cu){return l$3.asn1.x509.X500Name.compatToLDAP(Cu)},l$3.asn1.x509.X500Name.ldapToCompat=function(Cu){for(var Tu=Cu.split(","),Pu=!1,Bu=[],Lu=0;Tu.length>0;Lu++){var Ru=Tu.shift();if(Pu===!0){var Ou=(Bu.pop()+","+Ru).replace(/\\,/g,",");Bu.push(Ou),Pu=!1}else Bu.push(Ru);Ru.substr(-1,1)==="\\"&&(Pu=!0)}return(Bu=Bu.map(function(Du){return Du.replace("/","\\/")})).reverse(),"/"+Bu.join("/")},l$3.asn1.x509.X500Name.ldapToOneline=function(Cu){return l$3.asn1.x509.X500Name.ldapToCompat(Cu)},l$3.asn1.x509.RDN=function(Cu){l$3.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var Tu=l$3.asn1.x509.AttributeTypeAndValue;this.setByParam=function(Pu){Pu.rule!==void 0&&(this.sRule=Pu.rule),Pu.str!==void 0&&this.addByMultiValuedString(Pu.str),Pu.array!==void 0&&(this.paramArray=Pu.array)},this.addByString=function(Pu){this.asn1Array.push(new l$3.asn1.x509.AttributeTypeAndValue({str:Pu,rule:this.sRule}))},this.addByMultiValuedString=function(Pu){for(var Bu=l$3.asn1.x509.RDN.parseString(Pu),Lu=0;Lu<Bu.length;Lu++)this.addByString(Bu[Lu])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var Pu=0;Pu<this.paramArray.length;Pu++){var Bu=this.paramArray[Pu];Bu.rule!==void 0&&this.sRule!="utf8"&&(Bu.rule=this.sRule);var Lu=new Tu(Bu);this.asn1Array.push(Lu)}var Ru=new l$3.asn1.DERSet({array:this.asn1Array});return this.TLV=Ru.getEncodedHex(),this.TLV},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.RDN,l$3.asn1.ASN1Object),l$3.asn1.x509.RDN.parseString=function(Cu){for(var Tu=Cu.split(/\+/),Pu=!1,Bu=[],Lu=0;Tu.length>0;Lu++){var Ru=Tu.shift();if(Pu===!0){var Ou=(Bu.pop()+"+"+Ru).replace(/\\\+/g,"+");Bu.push(Ou),Pu=!1}else Bu.push(Ru);Ru.substr(-1,1)==="\\"&&(Pu=!0)}var Du=!1,ku=[];for(Lu=0;Bu.length>0;Lu++){if(Ru=Bu.shift(),Du===!0){var Fu=ku.pop();Ru.match(/"$/)?(Ou=(Fu+"+"+Ru).replace(/^([^=]+)="(.*)"$/,"$1=$2"),ku.push(Ou),Du=!1):ku.push(Fu+"+"+Ru)}else ku.push(Ru);Ru.match(/^[^=]+="/)&&(Du=!0)}return ku},l$3.asn1.x509.AttributeTypeAndValue=function(Cu){l$3.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var Tu=l$3,Pu=Tu.asn1,Bu=Pu.DERSequence,Lu=Pu.DERUTF8String,Ru=Pu.DERPrintableString,Ou=Pu.DERTeletexString,Du=Pu.DERIA5String,ku=Pu.DERVisibleString,Fu=Pu.DERBMPString,Nu=Tu.lang.String.isMail,Gu=Tu.lang.String.isPrintable;this.setByParam=function(zu){if(zu.rule!==void 0&&(this.sRule=zu.rule),zu.ds!==void 0&&(this.dsType=zu.ds),zu.value===void 0&&zu.str!==void 0){var Hu=zu.str.match(/^([^=]+)=(.+)$/);if(!Hu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Hu[1],this.sValue=Hu[2]}else this.sType=zu.type,this.sValue=zu.value},this.setByString=function(zu,Hu){Hu!==void 0&&(this.sRule=Hu);var Wu=zu.match(/^([^=]+)=(.+)$/);if(!Wu)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(Wu[1],Wu[2])},this._getDsType=function(){var zu=this.sType,Hu=this.sValue,Wu=this.sRule;return Wu==="prn"?zu=="CN"&&Nu(Hu)?"ia5":Gu(Hu)?"prn":"utf8":Wu==="utf8"?zu=="CN"&&Nu(Hu)?"ia5":zu=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(zu,Hu,Wu){Wu!==void 0&&(this.sRule=Wu),this.sType=zu,this.sValue=Hu},this.getValueObj=function(zu,Hu){if(zu=="utf8")return new Lu({str:Hu});if(zu=="prn")return new Ru({str:Hu});if(zu=="tel")return new Ou({str:Hu});if(zu=="ia5")return new Du({str:Hu});if(zu=="vis")return new ku({str:Hu});if(zu=="bmp")return new Fu({str:Hu});throw new Error("unsupported directory string type: type="+zu+" value="+Hu)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var zu=l$3.asn1.x509.OID.atype2obj(this.sType),Hu=this.getValueObj(this.dsType,this.sValue),Wu=new Bu({array:[zu,Hu]});return this.TLV=Wu.getEncodedHex(),this.TLV},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.AttributeTypeAndValue,l$3.asn1.ASN1Object),l$3.asn1.x509.SubjectPublicKeyInfo=function(Cu){l$3.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var Tu=l$3,Pu=Tu.asn1,Bu=Pu.DERInteger,Lu=Pu.DERBitString,Ru=Pu.DERObjectIdentifier,Ou=Pu.DERSequence,Du=Pu.ASN1Util.newObject,ku=Pu.x509.AlgorithmIdentifier,Fu=Tu.crypto;Fu.ECDSA,Fu.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Ou({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Nu=this.getASN1Object();return this.hTLV=Nu.getEncodedHex(),this.hTLV},this.setPubKey=function(Nu){try{if(Nu instanceof X$1){var Gu=Du({seq:[{int:{bigint:Nu.n}},{int:{int:Nu.e}}]}).getEncodedHex();this.asn1AlgId=new ku({name:"rsaEncryption"}),this.asn1SubjPKey=new Lu({hex:"00"+Gu})}}catch{}try{if(Nu instanceof l$3.crypto.ECDSA){var zu=new Ru({name:Nu.curveName});this.asn1AlgId=new ku({name:"ecPublicKey",asn1params:zu}),this.asn1SubjPKey=new Lu({hex:"00"+Nu.pubKeyHex})}}catch{}try{if(Nu instanceof l$3.crypto.DSA){zu=new Du({seq:[{int:{bigint:Nu.p}},{int:{bigint:Nu.q}},{int:{bigint:Nu.g}}]}),this.asn1AlgId=new ku({name:"dsa",asn1params:zu});var Hu=new Bu({bigint:Nu.y});this.asn1SubjPKey=new Lu({hex:"00"+Hu.getEncodedHex()})}}catch{}},Cu!==void 0&&this.setPubKey(Cu)},fe$1(l$3.asn1.x509.SubjectPublicKeyInfo,l$3.asn1.ASN1Object),l$3.asn1.x509.Time=function(Cu){l$3.asn1.x509.Time.superclass.constructor.call(this);var Tu=l$3.asn1,Pu=Tu.DERUTCTime,Bu=Tu.DERGeneralizedTime;this.setTimeParams=function(Lu){this.timeParams=Lu},this.getEncodedHex=function(){var Lu=null;return Lu=this.timeParams!=null?this.type=="utc"?new Pu(this.timeParams):new Bu(this.timeParams):this.type=="utc"?new Pu:new Bu,this.TLV=Lu.getEncodedHex(),this.TLV},this.type="utc",Cu!==void 0&&(Cu.type!==void 0?this.type=Cu.type:Cu.str!==void 0&&(Cu.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),Cu.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=Cu)},fe$1(l$3.asn1.x509.Time,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier=function(Cu){l$3.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var Tu=l$3.asn1,Pu=Tu.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var Lu=null;for(var Ru in Pu)Ru===this.nameAlg&&(Lu=Pu[Ru]);if(Lu!==null)return this.hTLV=Lu,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=Tu.x509.OID.name2obj(this.nameAlg));var Ou=[this.asn1Alg];this.asn1Params!==null&&Ou.push(this.asn1Params);var Du=new Tu.DERSequence({array:Ou});return this.hTLV=Du.getEncodedHex(),this.hTLV},Cu!==void 0&&(Cu.name!==void 0&&(this.nameAlg=Cu.name),Cu.asn1params!==void 0&&(this.asn1Params=Cu.asn1params),Cu.paramempty!==void 0&&(this.paramEmpty=Cu.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var Bu=this.nameAlg.toLowerCase();Bu.substr(-7,7)!=="withdsa"&&Bu.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new Tu.DERNull)}},fe$1(l$3.asn1.x509.AlgorithmIdentifier,l$3.asn1.ASN1Object),l$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},l$3.asn1.x509.GeneralName=function(Cu){l$3.asn1.x509.GeneralName.superclass.constructor.call(this);var Tu={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},Pu=l$3.asn1;Pu.DERSequence;var Bu=Pu.DEROctetString,Lu=Pu.DERIA5String,Ru=Pu.DERTaggedObject,Ou=Pu.ASN1Object,Du=Pu.x509.X500Name,ku=le$1;this.explicit=!1,this.setByParam=function(Fu){var Nu=null;if(Fu!==void 0){if(Fu.rfc822!==void 0&&(this.type="rfc822",Nu=new Lu({str:Fu[this.type]})),Fu.dns!==void 0&&(this.type="dns",Nu=new Lu({str:Fu[this.type]})),Fu.uri!==void 0&&(this.type="uri",Nu=new Lu({str:Fu[this.type]})),Fu.dn!==void 0&&(this.type="dn",this.explicit=!0,Nu=typeof Fu.dn=="string"?new Du({str:Fu.dn}):Fu.dn instanceof l$3.asn1.x509.X500Name?Fu.dn:new Du(Fu.dn)),Fu.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Nu=new Du({ldapstr:Fu.ldapdn})),Fu.certissuer!==void 0){this.type="dn",this.explicit=!0;var Gu=null;if((Hu=Fu.certissuer).match(/^[0-9A-Fa-f]+$/),Hu.indexOf("-----BEGIN ")!=-1&&(Gu=ku(Hu)),Gu==null)throw"certissuer param not cert";(Wu=new Be).hex=Gu;var zu=Wu.getIssuerHex();(Nu=new Ou).hTLV=zu}if(Fu.certsubj!==void 0){this.type="dn",this.explicit=!0;var Hu,Wu;if(Gu=null,(Hu=Fu.certsubj).match(/^[0-9A-Fa-f]+$/),Hu.indexOf("-----BEGIN ")!=-1&&(Gu=ku(Hu)),Gu==null)throw"certsubj param not cert";(Wu=new Be).hex=Gu,zu=Wu.getSubjectHex(),(Nu=new Ou).hTLV=zu}if(Fu.ip!==void 0){this.type="ip",this.explicit=!1;var _h,Xc=Fu.ip,ju="malformed IP address";if(Xc.match(/^[0-9.]+[.][0-9.]+$/)){if((_h=function(_c){_c=(_c=(_c=_c.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return _c.split(/,/).map(function(_f,ep,tp){var op=parseInt(_f);if(op<0||255<op)throw"integer not in range 0-255";return("00"+op.toString(16)).slice(-2)}).join("")}catch(_f){throw"malformed integer array string: "+_f}}("["+Xc.split(".").join(",")+"]")).length!==8)throw ju}else if(Xc.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))_h=function(_c){var _f="malformed IPv6 address";if(!_c.match(/^[0-9A-Fa-f:]+$/))throw _f;var ep=(_c=_c.toLowerCase()).split(":").length-1;if(ep<2)throw _f;var tp=":".repeat(7-ep+2),op=(_c=_c.replace("::",tp)).split(":");if(op.length!=8)throw _f;for(var lp=0;lp<8;lp++)op[lp]=("0000"+op[lp]).slice(-4);return op.join("")}(Xc);else{if(!Xc.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw ju;_h=Xc}Nu=new Bu({hex:_h})}if(this.type==null)throw"unsupported type in params="+Fu;this.asn1Obj=new Ru({explicit:this.explicit,tag:Tu[this.type],obj:Nu})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},Cu!==void 0&&this.setByParam(Cu)},fe$1(l$3.asn1.x509.GeneralName,l$3.asn1.ASN1Object),l$3.asn1.x509.GeneralNames=function(Cu){l$3.asn1.x509.GeneralNames.superclass.constructor.call(this);var Tu=l$3.asn1;this.setByParamArray=function(Pu){for(var Bu=0;Bu<Pu.length;Bu++){var Lu=new Tu.x509.GeneralName(Pu[Bu]);this.asn1Array.push(Lu)}},this.getEncodedHex=function(){return new Tu.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,Cu!==void 0&&this.setByParamArray(Cu)},fe$1(l$3.asn1.x509.GeneralNames,l$3.asn1.ASN1Object),l$3.asn1.x509.OID=new function(Cu){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(Tu){if(this.objCache[Tu]!==void 0)return this.objCache[Tu];if(this.name2oidList[Tu]===void 0)throw"Name of ObjectIdentifier not defined: "+Tu;var Pu=this.name2oidList[Tu],Bu=new l$3.asn1.DERObjectIdentifier({oid:Pu});return this.objCache[Tu]=Bu,Bu},this.atype2obj=function(Tu){if(this.objCache[Tu]!==void 0)return this.objCache[Tu];var Pu;if(Tu.match(/^\d+\.\d+\.[0-9.]+$/))Pu=Tu;else if(this.atype2oidList[Tu]!==void 0)Pu=this.atype2oidList[Tu];else{if(this.name2oidList[Tu]===void 0)throw"AttributeType name undefined: "+Tu;Pu=this.name2oidList[Tu]}var Bu=new l$3.asn1.DERObjectIdentifier({oid:Pu});return this.objCache[Tu]=Bu,Bu}},l$3.asn1.x509.OID.oid2name=function(Cu){var Tu=l$3.asn1.x509.OID.name2oidList;for(var Pu in Tu)if(Tu[Pu]==Cu)return Pu;return""},l$3.asn1.x509.OID.oid2atype=function(Cu){var Tu=l$3.asn1.x509.OID.atype2oidList;for(var Pu in Tu)if(Tu[Pu]==Cu)return Pu;return Cu},l$3.asn1.x509.OID.name2oid=function(Cu){if(Cu.match(/^[0-9.]+$/))return Cu;var Tu=l$3.asn1.x509.OID.name2oidList;return Tu[Cu]===void 0?"":Tu[Cu]},l$3.asn1.x509.X509Util={},l$3.asn1.x509.X509Util.newCertPEM=function(Cu){var Tu=l$3.asn1.x509;return Tu.TBSCertificate,new Tu.Certificate(Cu).getPEM()},X$1.getPosArrayOfChildrenFromHex=function(Cu){return Me$1.getChildIdx(Cu,0)},X$1.getHexValueArrayOfChildrenFromHex=function(Cu){var Tu,Pu=Me$1.getV,Bu=Pu(Cu,(Tu=X$1.getPosArrayOfChildrenFromHex(Cu))[0]),Lu=Pu(Cu,Tu[1]),Ru=Pu(Cu,Tu[2]),Ou=Pu(Cu,Tu[3]),Du=Pu(Cu,Tu[4]),ku=Pu(Cu,Tu[5]),Fu=Pu(Cu,Tu[6]),Nu=Pu(Cu,Tu[7]),Gu=Pu(Cu,Tu[8]);return(Tu=new Array).push(Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu),Tu},X$1.prototype.readPrivateKeyFromPEMString=function(Cu){var Tu=le$1(Cu),Pu=X$1.getHexValueArrayOfChildrenFromHex(Tu);this.setPrivateEx(Pu[1],Pu[2],Pu[3],Pu[4],Pu[5],Pu[6],Pu[7],Pu[8])},X$1.prototype.readPKCS5PrvKeyHex=function(Cu){var Tu=X$1.getHexValueArrayOfChildrenFromHex(Cu);this.setPrivateEx(Tu[1],Tu[2],Tu[3],Tu[4],Tu[5],Tu[6],Tu[7],Tu[8])},X$1.prototype.readPKCS8PrvKeyHex=function(Cu){var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu=Me$1,Nu=Fu.getVbyListEx;if(Fu.isASN1HEX(Cu)===!1)throw new Error("not ASN.1 hex string");try{Tu=Nu(Cu,0,[2,0,1],"02"),Pu=Nu(Cu,0,[2,0,2],"02"),Bu=Nu(Cu,0,[2,0,3],"02"),Lu=Nu(Cu,0,[2,0,4],"02"),Ru=Nu(Cu,0,[2,0,5],"02"),Ou=Nu(Cu,0,[2,0,6],"02"),Du=Nu(Cu,0,[2,0,7],"02"),ku=Nu(Cu,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku)},X$1.prototype.readPKCS5PubKeyHex=function(Cu){var Tu=Me$1,Pu=Tu.getV;if(Tu.isASN1HEX(Cu)===!1)throw new Error("keyHex is not ASN.1 hex string");var Bu=Tu.getChildIdx(Cu,0);if(Bu.length!==2||Cu.substr(Bu[0],2)!=="02"||Cu.substr(Bu[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Lu=Pu(Cu,Bu[0]),Ru=Pu(Cu,Bu[1]);this.setPublic(Lu,Ru)},X$1.prototype.readPKCS8PubKeyHex=function(Cu){var Tu=Me$1;if(Tu.isASN1HEX(Cu)===!1)throw new Error("not ASN.1 hex string");if(Tu.getTLVbyListEx(Cu,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var Pu=Tu.getTLVbyListEx(Cu,0,[1,0]);this.readPKCS5PubKeyHex(Pu)},X$1.prototype.readCertPubKeyHex=function(Cu,Tu){var Pu,Bu;(Pu=new Be).readCertHex(Cu),Bu=Pu.getPublicKeyHex(),this.readPKCS8PubKeyHex(Bu)},X$1.prototype.sign=function(Cu,Tu){var Pu,Bu=(Pu=Cu,l$3.crypto.Util.hashString(Pu,Tu));return this.signWithMessageHash(Bu,Tu)},X$1.prototype.signWithMessageHash=function(Cu,Tu){var Pu=G$1(l$3.crypto.Util.getPaddedDigestInfoHex(Cu,Tu,this.n.bitLength()),16);return Ie$1(this.doPrivate(Pu).toString(16),this.n.bitLength())},X$1.prototype.signPSS=function(Cu,Tu,Pu){var Bu,Lu=(Bu=oe$1(Cu),l$3.crypto.Util.hashHex(Bu,Tu));return Pu===void 0&&(Pu=-1),this.signWithMessageHashPSS(Lu,Tu,Pu)},X$1.prototype.signWithMessageHashPSS=function(Cu,Tu,Pu){var Bu,Lu=re$1(Cu),Ru=Lu.length,Ou=this.n.bitLength()-1,Du=Math.ceil(Ou/8),ku=function(Xc){return l$3.crypto.Util.hashHex(Xc,Tu)};if(Pu===-1||Pu===void 0)Pu=Ru;else if(Pu===-2)Pu=Du-Ru-2;else if(Pu<-2)throw new Error("invalid salt length");if(Du<Ru+Pu+2)throw new Error("data too long");var Fu="";Pu>0&&(Fu=new Array(Pu),new j$1().nextBytes(Fu),Fu=String.fromCharCode.apply(String,Fu));var Nu=re$1(ku(oe$1("\0\0\0\0\0\0\0\0"+Lu+Fu))),Gu=[];for(Bu=0;Bu<Du-Pu-Ru-2;Bu+=1)Gu[Bu]=0;var zu=String.fromCharCode.apply(String,Gu)+""+Fu,Hu=Se$1(Nu,zu.length,ku),Wu=[];for(Bu=0;Bu<zu.length;Bu+=1)Wu[Bu]=zu.charCodeAt(Bu)^Hu.charCodeAt(Bu);var _h=65280>>8*Du-Ou&255;for(Wu[0]&=~_h,Bu=0;Bu<Ru;Bu++)Wu.push(Nu.charCodeAt(Bu));return Wu.push(188),Ie$1(this.doPrivate(new c$2(Wu)).toString(16),this.n.bitLength())},X$1.prototype.verify=function(Cu,Tu){if((Tu=Tu.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var Pu=G$1(Tu,16),Bu=this.n.bitLength();if(Pu.bitLength()>Bu)return!1;var Lu=this.doPublic(Pu).toString(16);if(Lu.length+3!=Bu/4)return!1;var Ru=Ce(Lu.replace(/^1f+00/,""));if(Ru.length==0)return!1;var Ou,Du=Ru[0];return Ru[1]==(Ou=Cu,l$3.crypto.Util.hashString(Ou,Du))},X$1.prototype.verifyWithMessageHash=function(Cu,Tu){if(Tu.length!=Math.ceil(this.n.bitLength()/4))return!1;var Pu=G$1(Tu,16);if(Pu.bitLength()>this.n.bitLength())return 0;var Bu=Ce(this.doPublic(Pu).toString(16).replace(/^1f+00/,""));return Bu.length!=0&&(Bu[0],Bu[1]==Cu)},X$1.prototype.verifyPSS=function(Cu,Tu,Pu,Bu){var Lu=function(Ru){return l$3.crypto.Util.hashHex(Ru,Pu)}(oe$1(Cu));return Bu===void 0&&(Bu=-1),this.verifyWithMessageHashPSS(Lu,Tu,Pu,Bu)},X$1.prototype.verifyWithMessageHashPSS=function(Cu,Tu,Pu,Bu){if(Tu.length!=Math.ceil(this.n.bitLength()/4))return!1;var Lu,Ru=new c$2(Tu,16),Ou=function(_c){return l$3.crypto.Util.hashHex(_c,Pu)},Du=re$1(Cu),ku=Du.length,Fu=this.n.bitLength()-1,Nu=Math.ceil(Fu/8);if(Bu===-1||Bu===void 0)Bu=ku;else if(Bu===-2)Bu=Nu-ku-2;else if(Bu<-2)throw new Error("invalid salt length");if(Nu<ku+Bu+2)throw new Error("data too long");var Gu=this.doPublic(Ru).toByteArray();for(Lu=0;Lu<Gu.length;Lu+=1)Gu[Lu]&=255;for(;Gu.length<Nu;)Gu.unshift(0);if(Gu[Nu-1]!==188)throw new Error("encoded message does not end in 0xbc");var zu=(Gu=String.fromCharCode.apply(String,Gu)).substr(0,Nu-ku-1),Hu=Gu.substr(zu.length,ku),Wu=65280>>8*Nu-Fu&255;if((zu.charCodeAt(0)&Wu)!=0)throw new Error("bits beyond keysize not zero");var _h=Se$1(Hu,zu.length,Ou),Xc=[];for(Lu=0;Lu<zu.length;Lu+=1)Xc[Lu]=zu.charCodeAt(Lu)^_h.charCodeAt(Lu);Xc[0]&=~Wu;var ju=Nu-ku-Bu-2;for(Lu=0;Lu<ju;Lu+=1)if(Xc[Lu]!==0)throw new Error("leftmost octets not zero");if(Xc[ju]!==1)throw new Error("0x01 marker not found");return Hu===re$1(Ou(oe$1("\0\0\0\0\0\0\0\0"+Du+String.fromCharCode.apply(String,Xc.slice(-Bu)))))},X$1.SALT_LEN_HLEN=-1,X$1.SALT_LEN_MAX=-2,X$1.SALT_LEN_RECOVER=-2,Be.hex2dn=function(Cu,Tu){Tu===void 0&&(Tu=0);var Pu=new Be;return Me$1.getTLV(Cu,Tu),Pu.getX500Name(Cu).str},Be.hex2rdn=function(Cu,Tu){if(Tu===void 0&&(Tu=0),Cu.substr(Tu,2)!=="31")throw new Error("malformed RDN");for(var Pu=new Array,Bu=Me$1.getChildIdx(Cu,Tu),Lu=0;Lu<Bu.length;Lu++)Pu.push(Be.hex2attrTypeValue(Cu,Bu[Lu]));return(Pu=Pu.map(function(Ru){return Ru.replace("+","\\+")})).join("+")},Be.hex2attrTypeValue=function(Cu,Tu){var Pu=Me$1,Bu=Pu.getV;if(Tu===void 0&&(Tu=0),Cu.substr(Tu,2)!=="30")throw new Error("malformed attribute type and value");var Lu=Pu.getChildIdx(Cu,Tu);Lu.length!==2||Cu.substr(Lu[0],2);var Ru=Bu(Cu,Lu[0]),Ou=l$3.asn1.ASN1Util.oidHexToInt(Ru);return l$3.asn1.x509.OID.oid2atype(Ou)+"="+re$1(Bu(Cu,Lu[1]))},Be.getPublicKeyFromCertHex=function(Cu){var Tu=new Be;return Tu.readCertHex(Cu),Tu.getPublicKey()},Be.getPublicKeyFromCertPEM=function(Cu){var Tu=new Be;return Tu.readCertPEM(Cu),Tu.getPublicKey()},Be.getPublicKeyInfoPropOfCertPEM=function(Cu){var Tu,Pu,Bu=Me$1.getVbyList,Lu={};return Lu.algparam=null,(Tu=new Be).readCertPEM(Cu),Pu=Tu.getPublicKeyHex(),Lu.keyhex=Bu(Pu,0,[1],"03").substr(2),Lu.algoid=Bu(Pu,0,[0,0],"06"),Lu.algoid==="2a8648ce3d0201"&&(Lu.algparam=Bu(Pu,0,[0,1],"06")),Lu},Be.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pe$1,Re$1=[(Pe$1=new Be,Pe$1.readCertPEM(function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Pe$1)];function ke(Cu,Tu){var Pu=Cu.getIssuerHex();if(Pu===Cu.getSubjectHex())return Cu.verifySignature(Cu.getPublicKey());var Bu=function(Lu,Ru){for(var Ou=0,Du=Ru;Ou<Du.length;Ou++){var ku=Du[Ou];if(ku.getSubjectHex()===Lu)return ku}}(Pu,Tu);return!!Bu&&Cu.verifySignature(Bu.getPublicKey())!==!1&&ke(Bu,Tu)}function De(Cu){return Cu.getIssuerHex()!==Cu.getSubjectHex()&&ke(Cu,Re$1)}(function(Cu){var Tu=new Be;typeof Cu=="string"?Tu.readCertPEM(Cu):Tu.readCertHex(Cu.hex),De(Tu),Re$1.push(Tu)})(function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Le,Oe$1=(Le="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Le,">$"):Symbol(Le));function Ne$1(Cu){return Cu[Oe$1]||(Cu[Oe$1]={}),Cu[Oe$1]}var Fe=function(){function Cu(){}return Cu.prototype.hasListener=function(Tu){var Pu=Ne$1(this);return Pu&&Pu[Tu]&&Pu[Tu].length>0},Cu.prototype.on=function(Tu,Pu,Bu){var Lu=this,Ru=Ne$1(this);return Ru[Tu]||(Ru[Tu]=[]),Ru[Tu].push([Pu,Bu||!1]),function(){return Lu.off(Tu,Pu)}},Cu.prototype.once=function(Tu,Pu){return this.on(Tu,Pu,!0)},Cu.prototype.off=function(Tu,Pu){if(Tu!==void 0){var Bu,Lu=Ne$1(this);if(Lu[Tu]||(Lu[Tu]=[]),Pu!==void 0){for(var Ru=0;Ru<Lu[Tu].length&&Lu[Tu][Ru][0]!==Pu;Ru++);Ru<Lu[Tu].length&&Lu[Tu].splice(Ru,1)}else Lu[Tu].length=0}else(Bu=this)[Oe$1]||delete Bu[Oe$1]},Cu.prototype.emit=function(Tu){for(var Pu=[],Bu=1;Bu<arguments.length;Bu++)Pu[Bu-1]=arguments[Bu];for(var Lu=!1,Ru=Ne$1(this),Ou=Ru[Tu]||[],Du=0,ku=Ou.slice();Du<ku.length;Du++){var Fu=ku[Du],Nu=Fu[0],Gu=Fu[1],zu=Gu!==void 0&&Gu,Hu=Nu.apply(void 0,Pu);zu&&this.off(Tu,Nu),Hu===!1&&(Lu=!0)}return Lu},Cu}();function Qe$1(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu]}var Ve$1=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),_e$1=typeof performance!="undefined"?function(){return Ve$1+performance.now()}:function(){return Date.now()};function He(Cu){Object.freeze(Cu);var Tu=typeof Cu=="function",Pu=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(Cu).forEach(function(Bu){!Pu.call(Cu,Bu)||Tu&&(Bu==="caller"||Bu==="callee"||Bu==="arguments")||Cu[Bu]===null||typeof Cu[Bu]!="object"&&typeof Cu[Bu]!="function"||Object.isFrozen(Cu[Bu])||He(Cu[Bu])}),Cu}var qe=/^([^.]+)(\.([^.]+))*$/;function ze(Cu){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(Cu)}function Ke$1(Cu,Tu){return qe.test(Cu)&&qe.test(Tu)&&function(Pu,Bu){if(Pu==="*")return!0;var Lu=Pu.split(".").reverse(),Ru=Bu.split(".").reverse();if(Lu.length<=1)return Pu===Bu;for(var Ou=0;Ou<Lu.length;Ou++)if(Lu[Ou]!==Ru[Ou])return!1;return!0}(Cu,Tu)}var Ue=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],je$1=He(JSON.parse(function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/pnyp{|qr;vr/j"))),Ge$1=function(Cu){function Tu(Pu,Bu,Lu){return Cu.call(this,"[NETWORK]: request proxy error(type: ".concat(Bu,", reason: ").concat(Lu,"): ").concat(Pu))||this}return t$3.__extends(Tu,Cu),Tu}(Error),We=function(Cu){function Tu(Pu,Bu,Lu){var Ru=Cu.call(this,"[NETWORK]: response error(type: ".concat(Bu,", status: ").concat(Lu,"): ").concat(Pu))||this;return Ru.httpStatus=Lu,Ru}return t$3.__extends(Tu,Cu),Tu}(Error);(function(Cu){function Tu(Pu,Bu){return Cu.call(this,"[NETWORK]: request abort(type: ".concat(Bu,"): ").concat(Pu))||this}t$3.__extends(Tu,Cu)})(Error);var Xe=function(Cu){function Tu(Pu,Bu,Lu){return Cu.call(this,"[NETWORK]: request timeout(type: ".concat(Bu,", timeout: ").concat(Lu,"ms): ").concat(Pu))||this}return t$3.__extends(Tu,Cu),Tu}(Error),Ye$1=function(Cu){function Tu(Pu,Bu,Lu){return Cu.call(this,"[NETWORK]: request forbidden(type: ".concat(Bu,", reason: ").concat(Lu,"): ").concat(Pu))||this}return t$3.__extends(Tu,Cu),Tu}(Error);function Ze(Cu){for(var Tu=0,Pu=Ue;Tu<Pu.length;Tu++){var Bu=Pu[Tu],Lu=Cu.match(Bu);if(Lu)return"jsonp_"+Lu[1]}return null}function Je$1(Cu){return Ze(Cu)!==null}function $e(Cu){return Ue.reduce(function(Tu,Pu){return Tu.replace(Pu,"")},Cu)}function et(Cu){if(/^blob\:/i.test(Cu))return"blob:";if(/^data\:/i.test(Cu))return"data:";var Tu=Cu.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return Tu?Tu[2]:location.hostname}var tt=function(Cu){function Tu(){return Cu!==null&&Cu.apply(this,arguments)||this}return t$3.__extends(Tu,Cu),Tu}(Fe);function it(Cu,Tu,Pu,Bu,Lu){Tu===void 0&&(Tu={}),Pu===void 0&&(Pu=Qe$1),Bu===void 0&&(Bu=Qe$1),Lu===void 0&&(Lu=Qe$1);var Ru=_e$1(),Ou=Cu;return Promise.resolve().then(function(){return Tu.requestProxy?Tu.requestProxy(Cu):Cu}).then(function(Du){return/^https\:/.test(location.href)&&/^http\:/.test(Du)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Du,"'. This request was automatically upgraded to HTTPS")),Du.replace(/^http\:/,"https:")):Du}).catch(function(Du){var ku,Fu=Ze(Cu)?"Script":"XMLHttpRequest",Nu=new Ge$1(Ou,Fu,Du&&Du.message?String(Du.message):String(Du));return(ku=Tu.networkSubscribe)===null||ku===void 0||ku.emit("network",Cu,Fu,"proxy-error",Nu.message),Promise.reject(Nu)}).then(function(Du){return new Promise(function(ku,Fu){var Nu,Gu=Tu.allowHosts?je$1.concat(Tu.allowHosts):je$1.slice(),zu=et(Du),Hu=Ze(Du);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(rp){return Ke$1(rp,location.hostname)}).length===0&&!ze(zu)&&Gu.filter(function(rp){return Ke$1(rp,zu)}).length===0){var Wu=Hu?"Script":"XMLHttpRequest",_h=new Ye$1(Du,Wu,"request host(".concat(zu,") is not allowed"));return Bu(_h),Fu(_h),void((Nu=Tu.networkSubscribe)===null||Nu===void 0||Nu.emit("network",Du,Wu,"forbidden",_h.message))}if(Hu){var Xc=window,ju=null,_c=!1,_f=document.createElement("script");Xc[Hu]=function(rp){var ip,ap,sp=_e$1(),cp=sp-Ru;if(delete Xc[Hu],_f.parentNode&&_f.parentNode.removeChild(_f),ju!==null&&(window.clearTimeout(ju),ju=null),_c!==!0){if(rp.indexOf("data:")!==0){var dp=new We(Du,"Script",500);return Bu(dp),Fu(dp),void((ip=Tu.networkSubscribe)===null||ip===void 0||ip.emit("network",Du,"Script","error",dp.message))}var fp=rp.split(","),vp=(fp[0].match(/:(.*?);/)||[])[1],_p=fp[1];if(Tu.responseType==="arraybuffer"||Tu.responseType==="blob"){for(var wp=atob(fp[1]),Dp=wp.length,Pp=new Uint8Array(Dp),Wp=0;Wp<Dp;Wp++)Pp[Wp]=wp.charCodeAt(Wp);_p=Tu.responseType==="arraybuffer"?Pp.buffer:new Blob([Pp],{type:vp})}var Rp={body:_p,meta:{origin:Ou,source:Du,requestTime:Ru,responseTime:sp,costs:cp,headers:{}}};Pu(Rp),ku(Rp),(ap=Tu.networkSubscribe)===null||ap===void 0||ap.emit("network",Du,"Script","ok",JSON.stringify(Rp.meta)),_c=!0}},_f.src=Du,document.body.appendChild(_f),typeof Tu.timeout=="number"&&(ju=window.setTimeout(function(){var rp;if(ju=null,_c!==!0){_c=!0;var ip=new Xe(Du,"Script",Tu.timeout||NaN);Bu(ip),Fu(ip),(rp=Tu.networkSubscribe)===null||rp===void 0||rp.emit("network",Du,"Script","timeout",ip.message)}},Tu.timeout))}else{var ep=!1,tp=new XMLHttpRequest,op=function(){tp&&(tp.removeEventListener("timeout",lp,!1),tp.removeEventListener("progress",up,!1),tp.removeEventListener("load",hp,!1),tp.removeEventListener("error",np,!1)),tp=null,op=Qe$1},lp=function(){var rp;if(ep!==!0){ep=!0,op();var ip=new Xe(Du,"XMLHttpRequest",Tu.timeout||NaN);Bu(ip),Fu(ip),(rp=Tu.networkSubscribe)===null||rp===void 0||rp.emit("network",Du,"XMLHttpRequest","timeout",ip.message)}},up=function(rp){ep!==!0&&rp.lengthComputable&&(rp.total<=0||Lu(rp.loaded/rp.total))},hp=function(rp){var ip;if(ep!==!0){var ap=this.status;if(ap===0||ap>=200&&ap<400){ep=!0,op();var sp=_e$1(),cp=sp-Ru,dp=function(_p){if(!_p)return{};for(var wp={},Dp=_p.trim().split(`
`),Pp=0;Pp<Dp.length;Pp++){var Wp=Dp[Pp],Rp=Wp.indexOf(":"),Gp=Wp.slice(0,Rp).trim().toLowerCase(),kp=Wp.slice(Rp+1).trim();kp&&(wp[Gp]?wp[Gp]+=", "+kp:wp[Gp]=kp)}return wp}(this.getAllResponseHeaders()),fp=rp.total,vp={body:this.response,meta:{origin:Ou,source:Du,requestTime:Ru,responseTime:sp,costs:cp,headers:dp,size:fp}};Pu(vp),ku(vp),(ip=Tu.networkSubscribe)===null||ip===void 0||ip.emit("network",Du,"XMLHttpRequest","ok",JSON.stringify(vp.meta))}else np.call(this)}},np=function(){var rp;if(ep!==!0){ep=!0,op();var ip=new We(Du,"XMLHttpRequest",this.status);Bu(ip),Fu(ip),(rp=Tu.networkSubscribe)===null||rp===void 0||rp.emit("network",Du,"XMLHttpRequest","error",ip.message)}};tp.addEventListener("timeout",lp,!1),tp.addEventListener("progress",up,!1),tp.addEventListener("load",hp,!1),tp.addEventListener("error",np,!1),Tu.responseType&&(tp.responseType=Tu.responseType),typeof Tu.timeout=="number"&&(tp.timeout=Tu.timeout),tp.open("GET",Du,!0),tp.send(null)}})})}var nt={};function rt$1(Cu,Tu,Pu,Bu,Lu,Ru){Tu===void 0&&(Tu={}),Pu===void 0&&(Pu=Qe$1),Bu===void 0&&(Bu=Qe$1),Lu===void 0&&(Lu=Qe$1);var Ou=_e$1(),Du=Cu;return Promise.resolve().then(function(){return Tu.requestProxy?Tu.requestProxy(Cu):Cu}).then(function(ku){return/^https\:/.test(location.href)&&/^http\:/.test(ku)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(ku,"'. This request was automatically upgraded to HTTPS")),ku.replace(/^http\:/,"https:")):ku}).catch(function(ku){var Fu,Nu=new Ge$1(Du,"Image",ku&&ku.message?String(ku.message):String(ku));return(Fu=Tu.networkSubscribe)===null||Fu===void 0||Fu.emit("network",Cu,"Image","proxy-error",Nu.message),Promise.reject(Nu)}).then(function(ku){return new Promise(function(Fu,Nu){var Gu,zu=Tu.allowHosts?je$1.concat(Tu.allowHosts):je$1.slice(),Hu=et(ku);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(_c){return Ke$1(_c,location.hostname)}).length===0&&!ze(Hu)&&zu.filter(function(_c){return Ke$1(_c,Hu)}).length===0){var Wu=new Ye$1(ku,"Image","request host(".concat(Hu,") is not allowed"));return Bu(Wu),Nu(Wu),void((Gu=Tu.networkSubscribe)===null||Gu===void 0||Gu.emit("network",ku,"Image","forbidden",Wu.message))}var _h=Ru!=null?Ru:new Image,Xc=!1,ju=null;typeof Tu.timeout=="number"&&(ju=window.setTimeout(function(){var _c;if(_h.onload=Qe$1,_h.onerror=Qe$1,ju=null,Xc!==!0){Xc=!0;var _f=new Xe(ku,"Image",Tu.timeout);Bu(_f),Nu(_f),(_c=Tu.networkSubscribe)===null||_c===void 0||_c.emit("network",ku,"Image","timeout",_f.message)}},Tu.timeout)),_h.onload=function(){var _c;if(_h.onload=Qe$1,_h.onerror=Qe$1,ju!==null&&(clearTimeout(ju),ju=null),Xc!==!0){var _f=_e$1();Xc=!0;var ep={body:_h,meta:{headers:{},origin:Du,source:ku,requestTime:Ou,responseTime:_f,costs:_f-Ou}};Lu(1),Pu(ep),Fu(ep),(_c=Tu.networkSubscribe)===null||_c===void 0||_c.emit("network",ku,"Image","ok",JSON.stringify(ep.meta))}},_h.onerror=function(){var _c;if(_h.onload=Qe$1,_h.onerror=Qe$1,ju!==null&&(clearTimeout(ju),ju=null),Xc!==!0){Xc=!0;var _f=new We(ku,"Image",0);Bu(_f),Nu(_f),(_c=Tu.networkSubscribe)===null||_c===void 0||_c.emit("network",ku,"Image","ok",_f.message)}},Lu(0),_h.src=ku})})}var ot$1=function(){if(typeof window!="undefined"){var Cu=window;return Cu.requestAnimationFrame||Cu.mozRequestAnimationFrame||Cu.webkitRequestAnimationFrame||Cu.msRequestAnimationFrame||function(Tu){return setTimeout(Tu,16)}}return function(Tu){return setTimeout(Tu,16)}}(),st$1=16,at=function(){function Cu(){this.frames=[],this.stoped=!1,this.time=_e$1(),this.context=null,this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(Cu,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new Cu),this.sharedInstance},enumerable:!1,configurable:!0}),Cu.getFrameTime=function(){return st$1},Cu.prototype.loop=function(){for(var Tu=[],Pu=0;Pu<arguments.length;Pu++)Tu[Pu]=arguments[Pu];if(!this.stoped){var Bu=_e$1(),Lu=Bu-this.time;this.time=Bu;var Ru=[];st$1=Lu;for(var Ou=0,Du=this.frames;Ou<Du.length;Ou++){var ku=Du[Ou];if(ku.delay>0)ku.delay=ku.delay-1;else{try{ku.callback.apply(ku,t$3.__spreadArray([Bu,Lu],Tu,!1))}catch(Fu){console.error(Fu)}ku.once&&Ru.push(ku)}}Ru.length>0&&(this.frames=this.frames.filter(function(Fu){return Ru.indexOf(Fu)===-1})),this.requestAnimationFrame(this.loop)}},Cu.prototype.setContext=function(Tu){this.cancelAnimationFrame(this.requestId),this.context=Tu,this.requestId=this.requestAnimationFrame(this.loop)},Cu.prototype.getContext=function(){return this.context},Cu.prototype.requestAnimationFrame=function(Tu){return this.context?this.context.requestAnimationFrame(Tu):ot$1(Tu)},Cu.prototype.cancelAnimationFrame=function(Tu){this.context?this.context.cancelAnimationFrame(Tu):function(Pu){var Bu;if(typeof window!="undefined"){var Lu=window;Bu=Lu.cancelAnimationFrame||Lu.mozCancelAnimationFrame||Lu.webkitCancelAnimationFrame||Lu.msCancelAnimationFrame||function(Ru){return window.clearTimeout(Ru)}}else Bu=function(Ru){return window.clearTimeout(Ru)};Bu(Pu)}(this.loop),this.requestId=null},Cu.prototype.remove=function(Tu){var Pu=this.frames.indexOf(Tu);Pu>=0&&this.frames.splice(Pu,1)},Cu.prototype.add=function(Tu,Pu,Bu,Lu){var Ru=this;Pu===void 0&&(Pu=!1),Bu===void 0&&(Bu=0),Lu===void 0&&(Lu=5);var Ou={callback:Tu,once:Pu,delay:Bu,order:Lu};return this.frames.push(Ou),this.frames.sort(function(Du,ku){return Du.order-ku.order}),function(){return Ru.remove(Ou)}},Cu.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},Cu}(),lt=/^https?\:\/\/?([^\/]+)/;function ut(Cu,Tu){return Cu.replace(lt,function(Pu,Bu){return Pu.slice(0,Pu.length-Bu.length)+Tu})}var ht={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}};function ct$1(Cu,Tu){var Pu=t$3.__assign(t$3.__assign({},ht),Tu.mappings),Bu=function(Ru){var Ou=Ru.match(lt);return Ou===null?null:Ou[1]}(Cu);if(Bu===null)return Cu;var Lu=Pu[Bu];return Lu?(/\.basis(\?|$)/.test(Cu)&&Tu.basisLoaderInitialized!==!0&&(Cu=Cu.replace(/\.basis(\?|$)/,".jpg$1")),function(Ru,Ou){var Du,ku=Ru.split("?")[0],Fu=ku.split(".").pop();if(Fu==="jpeg"&&(Fu="jpg"),Fu!=="png"&&Fu!=="jpg")return Ru;var Nu="";if(Ou.format!==void 0&&Ou.format!==Fu&&(Nu+="/format/".concat(Ou.format)),Ou.cut!==void 0&&(Nu+="/cut/".concat(Ou.cut[2],"x").concat(Ou.cut[3],"x").concat(Ou.cut[0],"x").concat(Ou.cut[1])),Ou.quality!==void 0){var Gu=(Du=Ou.format)!==null&&Du!==void 0?Du:Fu;Gu&&["jpg","webp","tpg","heif","avif"].indexOf(Gu)>=0&&(Nu+="/quality/".concat(Ou.quality))}if(Ou.size!==void 0){var zu=Ru.match(/\/cube_(\d+)\//);(zu?Number(zu[1]):NaN)!==Number(Ou.size)&&(Nu+="/thumbnail/".concat(Ou.size,"x"))}return Ou.sharpen!==void 0&&(Nu+="/sharpen/".concat(Ou.sharpen)),Nu.length&&(Nu="?imageMogr2"+Nu),ku+Nu}(function(Ru,Ou,Du){var ku=Ou.split("."),Fu=ku[0],Nu=ku.slice(1);if(Fu==="texture")return ut(Ru,Du.texture[0]);if(Fu==="pano"||Fu==="pano_luminance")switch(Nu[0],Nu[1]){case"front":case"left":case"up":return ut(Ru,Du.pano[0]);case"down":case"right":case"back":return ut(Ru,Du.pano[1])}else if(Fu==="pano_tile"||Fu==="pano_tile_luminance"){Nu[0],Nu[1];var Gu=Nu[2],zu=Nu[3],Hu=Nu[4],Wu=Math.pow(2,Number(Gu))*Number(zu)+Number(Hu);if(!isNaN(Wu))return ut(Ru,Du.tile[Wu%2])}return ut(Ru,Du.default[0])}(Cu,Tu.key,Lu),Tu)):Cu}function dt$1(Cu){return new Promise(function(Tu){var Pu=new Image,Bu=setTimeout(function(){Pu.onload=Pu.onerror=function(){},clearTimeout(Bu),Tu(!1)});Pu.onload=Pu.onerror=function(){Pu.onload=Pu.onerror=function(){},clearTimeout(Bu),Tu(Pu.height===2)},Pu.src=Cu})}var pt$1=null,ft$1=function(Cu){function Tu(){var Pu=Cu!==null&&Cu.apply(this,arguments)||this;return Pu.floorIndex=0,Pu.needsRender=!0,Pu}return t$3.__extends(Tu,Cu),Tu}(r$3.Mesh),At$1=function(Cu){function Tu(){var Pu=Cu!==null&&Cu.apply(this,arguments)||this;return Pu.needsRender=!0,Pu.enableTransparent=!0,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.getTransparent=function(){return this.enableTransparent},Tu.prototype.setTransparent=function(Pu){this.enableTransparent=Pu,this.traverse(function(Bu){Bu instanceof ft$1&&Bu.material.forEach(function(Lu){Lu.transparent=Pu})})},Tu.prototype.getMaterial=function(){var Pu=null;return this.traverse(function(Bu){if(Pu===null&&Bu instanceof ft$1){var Lu=Bu.material[0];Pu={pano0:Lu.pano0,pano1:Lu.pano1,modelAlpha:Lu.modelAlpha,progress:Lu.progress,useBlackTransition:Lu.useBlackTransition,useXRBlackTransition:Lu.useXRBlackTransition,perspToOrtho:Lu.perspToOrtho,opacity:Lu.opacity,floorInfo:Lu.floorInfo}}}),Pu},Tu.prototype.setMaterial=function(Pu){this.traverse(function(Bu){Bu instanceof ft$1&&Bu.material.forEach(function(Lu){Pu.pano0!==void 0&&(Lu.pano0=Pu.pano0),Pu.pano1!==void 0&&(Lu.pano1=Pu.pano1),Pu.modelAlpha!==void 0&&(Lu.modelAlpha=Pu.modelAlpha),Pu.progress!==void 0&&(Lu.progress=Pu.progress),Pu.useBlackTransition!==void 0&&(Lu.useBlackTransition=Pu.useBlackTransition),Pu.useXRBlackTransition!==void 0&&(Lu.useXRBlackTransition=Pu.useXRBlackTransition),Pu.perspToOrtho!==void 0&&(Lu.perspToOrtho=Pu.perspToOrtho),Pu.opacity!==void 0&&(Lu.opacity=Pu.opacity),Pu.floorInfo!==void 0&&(Lu.floorInfo=Pu.floorInfo)})})},Tu.prototype.disposeMaterial=function(){this.traverse(function(Pu){if(Pu instanceof ft$1){var Bu=[];Pu.material.forEach(function(Lu){var Ru=Lu.uniforms;Object.keys(Ru).map(function(Ou){if(/^pano\d\_/.test(Ou))Ru[Ou].value=null;else{var Du=Ru[Ou].value;Du&&typeof Du.dispose=="function"&&Bu.indexOf(Du)===-1&&(Ru[Ou].value=null,Bu.push(Du))}}),Lu.dispose()}),Bu.forEach(function(Lu){return Lu.dispose()})}})},Tu.prototype.disposeGeometry=function(){this.traverse(function(Pu){Pu instanceof ft$1&&Pu.geometry.dispose()})},Tu}(r$3.Group),gt=function(Cu){function Tu(){var Pu=Cu!==null&&Cu.apply(this,arguments)||this;return Pu.floorIndex=0,Pu}return t$3.__extends(Tu,Cu),Tu}(At$1),mt$1=function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;===>9-no5q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{666H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),vt=function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-e_lOYNPXlP\\Y\\_-rpA5=;=9=;=9=;=9>;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvs0vs-qrsv{rq5b`RlPYV]SY\\\\_6{vs|z-rp@-sy||V{s|H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--vs-5q|5cvr]|vv|{9-[|zny6-I-=;=6-\n----qvpnqH--\f--0vs-qrsv{rq5b`RlPYV]SY\\\\_6----vs-5|yq]|vv|{;\b-I-sy||V{s|;-\v\v-|yq]|vv|{;\b-K-sy||V{s|;t6-\n------qvpnqH----\f--0r{qvs--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryvs-qrsv{rq5b`Rle_lOYNPXla_N[`VaV\\[6}n{|P|y|-J-zv\x075}n{|=P|y|9e_lOYNPXlP\\Y\\_9zv{5>;=9-}|tr66H0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt$1(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var bt$1=yt$1();bt$1.width=bt$1.height=8;var xt=new r$3.Texture(bt$1);xt.name="EMPTY_TEXTURE";var wt$1=new r$3.CubeTexture([bt$1,bt$1,bt$1,bt$1,bt$1,bt$1]);wt$1.name="EMPTY_CUBE_TEXTURE",xt.dispose=wt$1.dispose=function(){};var Et$1=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(wt$1),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(wt$1),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0),floorInfo:new r$3.Vector3(0,0,0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsUtils.clone(r$3.UniformsLib.common),r$3.UniformsUtils.clone(r$3.UniformsLib.lights)),Mt=function(Cu){function Tu(Pu){Pu===void 0&&(Pu={});var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu=this;return zu=Cu.call(this,{vertexShader:mt$1,fragmentShader:vt,uniforms:r$3.UniformsUtils.clone(Et$1),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_XR_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1,USE_CLIPFLOOR:!1},blending:r$3.NoBlending,lights:!0})||this,Object.defineProperties(zu,{pano0:{get:function(){return this.uniforms.pano0_map.value===wt$1?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Hu){Hu===null?(this.uniforms.pano0_map.value=wt$1,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Hu.map,this.uniforms.pano0_luminanceMap.value=Hu.luminanceMap,this.uniforms.pano0_matrix.value.copy(Hu.matrix));var Wu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Wu&&(this.defines.USE_LUMINANCE=Wu,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===wt$1?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Hu){Hu===null?(this.uniforms.pano1_map.value=wt$1,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Hu.map,this.uniforms.pano1_luminanceMap.value=Hu.luminanceMap,this.uniforms.pano1_matrix.value.copy(Hu.matrix));var Wu=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Wu&&(this.defines.USE_LUMINANCE=Wu,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Hu){this.uniforms.modelAlpha.value=Hu}},progress:{get:function(){return this.uniforms.progress.value},set:function(Hu){this.uniforms.progress.value=Hu}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Hu){this.defines.USE_BLACK_TRANSITION!==Hu&&(this.defines.USE_BLACK_TRANSITION=Hu,this.needsUpdate=!0)}},useXRBlackTransition:{get:function(){return this.defines.USE_XR_BLACK_TRANSITION},set:function(Hu){this.defines.USE_XR_BLACK_TRANSITION!==Hu&&(this.defines.USE_XR_BLACK_TRANSITION=Hu,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Hu){this.uniforms.opacity.value=Hu;var Wu=Hu<1?r$3.NormalBlending:r$3.NoBlending;Wu!==this.blending&&(this.blending=Wu,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Hu){this.uniforms.perspToOrtho.value=Hu}},floorInfo:{get:function(){return this.uniforms.floorInfo.value},set:function(Hu){Hu&&Hu.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!1,this.needsUpdate=!0),Hu&&!Hu.equals(new r$3.Vector3(0,0,0))&&(this.defines.USE_CLIPFLOOR=!0,this.uniforms.floorInfo.value=Hu,this.needsUpdate=!0)}}}),zu.pano0=(Bu=Pu.pano0)!==null&&Bu!==void 0?Bu:null,zu.pano1=(Lu=Pu.pano1)!==null&&Lu!==void 0?Lu:null,zu.modelAlpha=(Ru=Pu.modelAlpha)!==null&&Ru!==void 0?Ru:1,zu.progress=(Ou=Pu.progress)!==null&&Ou!==void 0?Ou:0,zu.useBlackTransition=(Du=Pu.useBlackTransition)!==null&&Du!==void 0&&Du,zu.useXRBlackTransition=(ku=Pu.useXRBlackTransition)!==null&&ku!==void 0&&ku,zu.perspToOrtho=(Fu=Pu.perspToOrtho)!==null&&Fu!==void 0?Fu:0,zu.opacity=(Nu=Pu.opacity)!==null&&Nu!==void 0?Nu:1,zu.originOpacity=1,zu.floorInfo=(Gu=Pu.floorInfo)!==null&&Gu!==void 0?Gu:null,zu}return t$3.__extends(Tu,Cu),Tu}(r$3.ShaderMaterial),It=function(Cu){function Tu(Pu){var Bu=Pu.preserveDrawingBuffer,Lu=Bu===void 0||Bu,Ru=Pu.backgroundColor,Ou=Ru===void 0?1579548:Ru,Du=Pu.backgroundAlpha,ku=Du===void 0?1:Du,Fu=Pu.pixelRatio,Nu=Fu===void 0?1:Fu,Gu=Pu.antialias,zu=Gu!==void 0&&Gu,Hu=Pu.webgl2,Wu=this;if(Hu!==void 0&&Hu){var _h=document.createElement("canvas"),Xc=_h.getContext("webgl2");if(Xc===null)throw new Error("error occurred when getting webgl2 canvas context");Wu=Cu.call(this,{antialias:zu,preserveDrawingBuffer:Lu,alpha:ku<1,canvas:_h,context:Xc})||this}else Wu=Cu.call(this,{antialias:zu,preserveDrawingBuffer:Lu,alpha:ku<1})||this;return Wu.setPixelRatio(Nu),Wu.setClearColor(Ou,ku),Wu.outputEncoding=r$3.sRGBEncoding,Wu.autoClear=!0,Wu}return t$3.__extends(Tu,Cu),Tu}(r$3.WebGLRenderer),St$1=function(Cu){function Tu(){return Cu!==null&&Cu.apply(this,arguments)||this}return t$3.__extends(Tu,Cu),Tu.prototype.add=function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.prototype.add.apply(this,Pu)},Tu.prototype.remove=function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.prototype.remove.apply(this,Pu)},Tu}(r$3.Scene),Ct$1=2*Math.PI,Bt=Math.PI/2;function Tt$1(Cu){return Cu>0&&Cu<=Ct$1?Cu:(Cu%Ct$1+Ct$1)%Ct$1}var Pt,Rt,kt$1,Dt$1,Lt$1=function(Cu){function Tu(Pu){var Bu=Cu.call(this,Pu,1,.1,1e3)||this;return Bu.pose={longitude:0,latitude:0,fov:Pu,distance:0,offset:new r$3.Vector3},Bu.computePose(),Bu}return t$3.__extends(Tu,Cu),Tu.prototype.computePose=function(){var Pu=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=Tt$1(-Math.atan2(Pu.x,-Pu.z)),this.pose.latitude=-Math.asin(Pu.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},Tu.prototype.setFromPose=function(Pu){var Bu,Lu,Ru,Ou,Du,ku=Tt$1((Bu=Pu.longitude)!==null&&Bu!==void 0?Bu:this.pose.longitude),Fu=Math.max(1e-4-Bt,Math.min(Bt-1e-4,(Lu=Pu.latitude)!==null&&Lu!==void 0?Lu:this.pose.latitude)),Nu=(Ru=Pu.fov)!==null&&Ru!==void 0?Ru:this.pose.fov,Gu=(Ou=Pu.distance)!==null&&Ou!==void 0?Ou:this.pose.distance,zu=(Du=Pu.offset)!==null&&Du!==void 0?Du:this.pose.offset,Hu=function(Wu){var _h=Math.abs(Math.cos(Wu.latitude));return new r$3.Vector3(-Math.sin(Wu.longitude)*_h,-Math.sin(Wu.latitude),-Math.cos(Wu.longitude)*_h)}({longitude:ku,latitude:Fu}).normalize();return this.position.set(0,0,0),this.lookAt(Hu),this.position.add(zu).sub(Hu.clone().setLength(Gu)),this.fov!==Nu&&(this.fov=Nu,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=ku,this.pose.latitude=Fu,this.pose.fov=Nu,this.pose.distance=Gu,this.pose.offset.copy(zu),this},Tu.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},Tu}(r$3.PerspectiveCamera),Ot$1=function(){function Cu(Tu,Pu,Bu){this.x=Tu,this.y=Pu,this.z=Bu}return Cu.prototype.copy=function(Tu){return this.x=Tu.x,this.y=Tu.y,this.z=Tu.z,this},Cu.prototype.set=function(Tu,Pu,Bu){return this.x=Tu,this.y=Pu,this.z=Bu,this},Cu.prototype.fromArray=function(Tu,Pu){return Pu===void 0&&(Pu=0),this.x=Tu[Pu],this.y=Tu[Pu+1],this.z=Tu[Pu+2],this},Cu.prototype.add=function(Tu){return this.x+=Tu.x,this.y+=Tu.y,this.z+=Tu.z,this},Cu.prototype.multiplyScalar=function(Tu){return this.x*=Tu,this.y*=Tu,this.z*=Tu,this},Cu.prototype.subVectors=function(Tu,Pu){return this.x=Tu.x-Pu.x,this.y=Tu.y-Pu.y,this.z=Tu.z-Pu.z,this},Cu.prototype.dot=function(Tu){return this.x*Tu.x+this.y*Tu.y+this.z*Tu.z},Cu.prototype.cross=function(Tu){var Pu=this.x,Bu=this.y,Lu=this.z;return this.x=Bu*Tu.z-Lu*Tu.y,this.y=Lu*Tu.x-Pu*Tu.z,this.z=Pu*Tu.y-Bu*Tu.x,this},Cu.prototype.crossVectors=function(Tu,Pu){var Bu=Tu.x,Lu=Tu.y,Ru=Tu.z,Ou=Pu.x,Du=Pu.y,ku=Pu.z;return this.x=Lu*ku-Ru*Du,this.y=Ru*Ou-Bu*ku,this.z=Bu*Du-Lu*Ou,this},Cu.prototype.clone=function(){return new Cu(this.x,this.y,this.z)},Cu}(),Nt=function(Cu,Tu,Pu){this.extents=Cu,this.startIndex=Tu,this.endIndex=Pu},Ft=function(Cu,Tu){this.triangle=Cu,this.intersectionPoint=Tu},Qt$1=(Pt=new Ot$1(0,0,0),Rt=new Ot$1(0,0,0),kt$1=new Ot$1(0,0,0),Dt$1=new Ot$1(0,0,0),function(Cu,Tu,Pu,Bu,Lu,Ru){Rt.subVectors(Tu,Cu),kt$1.subVectors(Pu,Cu),Dt$1.crossVectors(Rt,kt$1);var Ou,Du=Lu.dot(Dt$1);if(Du>0){if(Ru)return null;Ou=1}else{if(!(Du<0))return null;Ou=-1,Du=-Du}Pt.subVectors(Bu,Cu);var ku=Ou*Lu.dot(kt$1.crossVectors(Pt,kt$1));if(ku<0)return null;var Fu=Ou*Lu.dot(Rt.cross(Pt));if(Fu<0||ku+Fu>Du)return null;var Nu=-Ou*Pt.dot(Dt$1);if(Nu<0)return null;var Gu=Nu/Du;return new Ot$1(0,0,0).copy(Lu).multiplyScalar(Gu).add(Bu)}),Vt=function(Cu,Tu){this.min=Cu,this.max=Tu};function _t$1(Cu,Tu,Pu){var Bu=new Vt(0,0);Tu.x>=0?(Bu.min=(Pu.extents[0]-Cu.x)*Tu.x,Bu.max=(Pu.extents[3]-Cu.x)*Tu.x):(Bu.min=(Pu.extents[3]-Cu.x)*Tu.x,Bu.max=(Pu.extents[0]-Cu.x)*Tu.x);var Lu=new Vt(0,0);if(Tu.y>=0?(Lu.min=(Pu.extents[1]-Cu.y)*Tu.y,Lu.max=(Pu.extents[4]-Cu.y)*Tu.y):(Lu.min=(Pu.extents[4]-Cu.y)*Tu.y,Lu.max=(Pu.extents[1]-Cu.y)*Tu.y),Bu.min>Lu.max||Lu.min>Bu.max)return!1;Lu.min>Bu.min&&(Bu.min=Lu.min),Lu.max<Bu.max&&(Bu.max=Lu.max);var Ru=new Vt(0,0);return Tu.z>=0?(Ru.min=(Pu.extents[2]-Cu.z)*Tu.z,Ru.max=(Pu.extents[5]-Cu.z)*Tu.z):(Ru.min=(Pu.extents[5]-Cu.z)*Tu.z,Ru.max=(Pu.extents[2]-Cu.z)*Tu.z),!(Bu.min>Ru.max||Ru.min>Bu.max)&&(Ru.min>Bu.min&&(Bu.min=Ru.min),Ru.max<Bu.max&&(Bu.max=Ru.max),!(Bu.max<0))}function Ht(Cu,Tu,Pu,Bu,Lu){if(Pu>=Bu)return[0,0,0,0,0,0];for(var Ru=1/0,Ou=1/0,Du=1/0,ku=-1/0,Fu=-1/0,Nu=-1/0,Gu=Pu,zu=void 0,Hu=void 0;Gu<Bu;Gu++)(Hu=Tu[zu=6*Cu[Gu]])<Ru&&(Ru=Hu),(Hu=Tu[zu+1])<Ou&&(Ou=Hu),(Hu=Tu[zu+2])<Du&&(Du=Hu),(Hu=Tu[zu+3])>ku&&(ku=Hu),(Hu=Tu[zu+4])>Fu&&(Fu=Hu),(Hu=Tu[zu+5])>Nu&&(Nu=Hu);return[Ru-Lu,Ou-Lu,Du-Lu,ku+Lu,Fu+Lu,Nu+Lu]}var qt=function(){function Cu(){}return Cu.prototype.create=function(Tu){return this.trianglesArray=Tu,this},Cu.prototype.splitNode=function(Tu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var Pu=this.trianglesArray,Bu=Pu.length/9,Lu=new Uint32Array(Bu),Ru=new Float32Array(6*Bu),Ou=[],Du=1/0,ku=1/0,Fu=1/0,Nu=-1/0,Gu=-1/0,zu=-1/0,Hu=0,Wu=0,_h=0,Xc=void 0,ju=void 0,_c=void 0,_f=void 0,ep=void 0,tp=void 0,op=void 0;Hu<Bu;Hu++,Wu+=6,_h+=9)Lu[Hu]=Hu,Xc=_f=Pu[_h],(op=Pu[_h+3])<Xc&&(Xc=op),op>_f&&(_f=op),(op=Pu[_h+6])<Xc&&(Xc=op),op>_f&&(_f=op),ju=ep=Pu[_h+1],(op=Pu[_h+4])<ju&&(ju=op),op>ep&&(ep=op),(op=Pu[_h+7])<ju&&(ju=op),op>ep&&(ep=op),_c=tp=Pu[_h+2],(op=Pu[_h+5])<_c&&(_c=op),op>tp&&(tp=op),(op=Pu[_h+8])<_c&&(_c=op),op>tp&&(tp=op),Xc<Du&&(Du=Xc),_f>Nu&&(Nu=_f),ju<ku&&(ku=ju),ep>Gu&&(Gu=ep),_c<Fu&&(Fu=_c),tp>zu&&(zu=tp),Ru[Wu]=Xc,Ru[Wu+1]=ju,Ru[Wu+2]=_c,Ru[Wu+3]=_f,Ru[Wu+4]=ep,Ru[Wu+5]=tp;var lp,up=new Nt([Du,ku,Fu,Nu,Gu,zu],0,Bu);function hp(np){for(var rp=np.startIndex,ip=np.endIndex,ap=np.extents,sp=[ap[3]-ap[0],ap[4]-ap[1],ap[5]-ap[2]],cp=[0,1,2].sort(function(Gp,kp){return sp[kp]-sp[Gp]}),dp=0;dp<3;dp++){for(var fp=cp[dp],vp=ap[fp]+ap[fp+3],_p=rp,wp=ip-1,Dp=-1,Pp=void 0;_p<=wp;)Dp===-1?(Pp=Lu[_p],Ru[6*Pp+fp]+Ru[6*Pp+fp+3]<vp?_p++:Dp=Pp):(Pp=Lu[wp],Ru[6*Pp+fp]+Ru[6*Pp+fp+3]>=vp||(Lu[_p]=Pp,Lu[wp]=Dp,Dp=-1,_p++),wp--);if(_p>rp&&_p<ip){var Wp=new Nt(Ht(Lu,Ru,rp,_p,1e-6),rp,_p);Wp.endIndex-Wp.startIndex>Tu&&Ou.push(Wp);var Rp=new Nt(Ht(Lu,Ru,_p,ip,1e-6),_p,ip);Rp.endIndex-Rp.startIndex>Tu&&Ou.push(Rp),np.node0=Wp,np.node1=Rp,np.startIndex=0,np.endIndex=0;break}}}for(Ou.push(up);lp=Ou.pop();)hp(lp);return this.offsetArray=Lu,this.rootNode=up,this},Cu.prototype.intersectRay=function(Tu,Pu,Bu){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var Lu,Ru=this.trianglesArray,Ou=this.offsetArray,Du=this.rootNode,ku=[],Fu=[],Nu=new Ot$1(1/Pu.x,1/Pu.y,1/Pu.z),Gu=[Du];Lu=Gu.pop();)if(_t$1(Tu,Nu,Lu)){Lu.node0&&Gu.push(Lu.node0),Lu.node1&&Gu.push(Lu.node1);for(var zu=Lu.startIndex;zu<Lu.endIndex;zu++)ku.push(Ou[zu])}for(var Hu=new Ot$1(0,0,0),Wu=new Ot$1(0,0,0),_h=new Ot$1(0,0,0),Xc=new Ot$1(Tu.x,Tu.y,Tu.z),ju=new Ot$1(Pu.x,Pu.y,Pu.z),_c=(zu=0,void 0),_f=ku.length;zu<_f;zu++){_c=9*ku[zu],Hu.x=Ru[_c],Hu.y=Ru[_c+1],Hu.z=Ru[_c+2],Wu.x=Ru[_c+3],Wu.y=Ru[_c+3+1],Wu.z=Ru[_c+3+2],_h.x=Ru[_c+6],_h.y=Ru[_c+6+1],_h.z=Ru[_c+6+2];var ep=Qt$1(Hu,Wu,_h,Xc,ju,Bu);ep&&Fu.push(new Ft([Hu.clone(),Wu.clone(),_h.clone()],ep))}return Fu},Cu.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},Cu}(),zt=!1,Kt$1=[];function Ut(Cu){if(Cu===void 0&&(Cu=!1),Cu||!zt){zt=!0;var Tu=Kt$1.shift();if(Tu){try{Tu()}catch{}at.shared.add(function(){return Ut(!0)},!0,2)}else zt=!1}}function jt$1(Cu){return new Promise(function(Tu,Pu){Kt$1.push(function(){try{Tu(Cu())}catch(Bu){Pu(Bu)}}),Ut()})}function Gt$1(){var Cu={OutWindow:function(){this._windowSize=0}};return Cu.OutWindow.prototype.create=function(Tu){this._buffer&&this._windowSize===Tu||(this._buffer=[]),this._windowSize=Tu,this._pos=0,this._streamPos=0},Cu.OutWindow.prototype.flush=function(){var Tu=this._pos-this._streamPos;if(Tu!==0){for(;Tu--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},Cu.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},Cu.OutWindow.prototype.setStream=function(Tu){this.releaseStream(),this._stream=Tu},Cu.OutWindow.prototype.init=function(Tu){Tu||(this._streamPos=0,this._pos=0)},Cu.OutWindow.prototype.copyBlock=function(Tu,Pu){var Bu=this._pos-Tu-1;for(Bu<0&&(Bu+=this._windowSize);Pu--;)Bu>=this._windowSize&&(Bu=0),this._buffer[this._pos++]=this._buffer[Bu++],this._pos>=this._windowSize&&this.flush()},Cu.OutWindow.prototype.putByte=function(Tu){this._buffer[this._pos++]=Tu,this._pos>=this._windowSize&&this.flush()},Cu.OutWindow.prototype.getByte=function(Tu){var Pu=this._pos-Tu-1;return Pu<0&&(Pu+=this._windowSize),this._buffer[Pu]},Cu.RangeDecoder=function(){},Cu.RangeDecoder.prototype.setStream=function(Tu){this._stream=Tu},Cu.RangeDecoder.prototype.releaseStream=function(){this._stream=null},Cu.RangeDecoder.prototype.init=function(){var Tu=5;for(this._code=0,this._range=-1;Tu--;)this._code=this._code<<8|this._stream.readByte()},Cu.RangeDecoder.prototype.decodeDirectBits=function(Tu){for(var Pu,Bu=0,Lu=Tu;Lu--;)this._range>>>=1,Pu=this._code-this._range>>>31,this._code-=this._range&Pu-1,Bu=Bu<<1|1-Pu,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return Bu},Cu.RangeDecoder.prototype.decodeBit=function(Tu,Pu){var Bu=Tu[Pu],Lu=(this._range>>>11)*Bu;return(2147483648^this._code)<(2147483648^Lu)?(this._range=Lu,Tu[Pu]+=2048-Bu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Lu,this._code-=Lu,Tu[Pu]-=Bu>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},Cu.initBitModels=function(Tu,Pu){for(;Pu--;)Tu[Pu]=1024},Cu.BitTreeDecoder=function(Tu){this._models=[],this._numBitLevels=Tu},Cu.BitTreeDecoder.prototype.init=function(){Cu.initBitModels(this._models,1<<this._numBitLevels)},Cu.BitTreeDecoder.prototype.decode=function(Tu){for(var Pu=1,Bu=this._numBitLevels;Bu--;)Pu=Pu<<1|Tu.decodeBit(this._models,Pu);return Pu-(1<<this._numBitLevels)},Cu.BitTreeDecoder.prototype.reverseDecode=function(Tu){for(var Pu,Bu=1,Lu=0,Ru=0;Ru<this._numBitLevels;++Ru)Bu=Bu<<1|(Pu=Tu.decodeBit(this._models,Bu)),Lu|=Pu<<Ru;return Lu},Cu.reverseDecode2=function(Tu,Pu,Bu,Lu){for(var Ru,Ou=1,Du=0,ku=0;ku<Lu;++ku)Ou=Ou<<1|(Ru=Bu.decodeBit(Tu,Pu+Ou)),Du|=Ru<<ku;return Du},Cu.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new Cu.BitTreeDecoder(8),this._numPosStates=0},Cu.LenDecoder.prototype.create=function(Tu){for(;this._numPosStates<Tu;++this._numPosStates)this._lowCoder[this._numPosStates]=new Cu.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new Cu.BitTreeDecoder(3)},Cu.LenDecoder.prototype.init=function(){var Tu=this._numPosStates;for(Cu.initBitModels(this._choice,2);Tu--;)this._lowCoder[Tu].init(),this._midCoder[Tu].init();this._highCoder.init()},Cu.LenDecoder.prototype.decode=function(Tu,Pu){return Tu.decodeBit(this._choice,0)===0?this._lowCoder[Pu].decode(Tu):Tu.decodeBit(this._choice,1)===0?8+this._midCoder[Pu].decode(Tu):16+this._highCoder.decode(Tu)},Cu.Decoder2=function(){this._decoders=[]},Cu.Decoder2.prototype.init=function(){Cu.initBitModels(this._decoders,768)},Cu.Decoder2.prototype.decodeNormal=function(Tu){var Pu=1;do Pu=Pu<<1|Tu.decodeBit(this._decoders,Pu);while(Pu<256);return 255&Pu},Cu.Decoder2.prototype.decodeWithMatchByte=function(Tu,Pu){var Bu,Lu,Ru=1;do if(Bu=Pu>>7&1,Pu<<=1,Ru=Ru<<1|(Lu=Tu.decodeBit(this._decoders,(1+Bu<<8)+Ru)),Bu!==Lu){for(;Ru<256;)Ru=Ru<<1|Tu.decodeBit(this._decoders,Ru);break}while(Ru<256);return 255&Ru},Cu.LiteralDecoder=function(){},Cu.LiteralDecoder.prototype.create=function(Tu,Pu){var Bu;if(!this._coders||this._numPrevBits!==Pu||this._numPosBits!==Tu)for(this._numPosBits=Tu,this._posMask=(1<<Tu)-1,this._numPrevBits=Pu,this._coders=[],Bu=1<<this._numPrevBits+this._numPosBits;Bu--;)this._coders[Bu]=new Cu.Decoder2},Cu.LiteralDecoder.prototype.init=function(){for(var Tu=1<<this._numPrevBits+this._numPosBits;Tu--;)this._coders[Tu].init()},Cu.LiteralDecoder.prototype.getDecoder=function(Tu,Pu){return this._coders[((Tu&this._posMask)<<this._numPrevBits)+((255&Pu)>>>8-this._numPrevBits)]},Cu.Decoder=function(){this._outWindow=new Cu.OutWindow,this._rangeDecoder=new Cu.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new Cu.BitTreeDecoder(4),this._lenDecoder=new Cu.LenDecoder,this._repLenDecoder=new Cu.LenDecoder,this._literalDecoder=new Cu.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new Cu.BitTreeDecoder(6),this._posSlotDecoder[1]=new Cu.BitTreeDecoder(6),this._posSlotDecoder[2]=new Cu.BitTreeDecoder(6),this._posSlotDecoder[3]=new Cu.BitTreeDecoder(6)},Cu.Decoder.prototype.setDictionarySize=function(Tu){return!(Tu<0)&&(this._dictionarySize!==Tu&&(this._dictionarySize=Tu,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},Cu.Decoder.prototype.setLcLpPb=function(Tu,Pu,Bu){var Lu=1<<Bu;return!(Tu>8||Pu>4||Bu>4)&&(this._literalDecoder.create(Pu,Tu),this._lenDecoder.create(Lu),this._repLenDecoder.create(Lu),this._posStateMask=Lu-1,!0)},Cu.Decoder.prototype.init=function(){var Tu=4;for(this._outWindow.init(!1),Cu.initBitModels(this._isMatchDecoders,192),Cu.initBitModels(this._isRep0LongDecoders,192),Cu.initBitModels(this._isRepDecoders,12),Cu.initBitModels(this._isRepG0Decoders,12),Cu.initBitModels(this._isRepG1Decoders,12),Cu.initBitModels(this._isRepG2Decoders,12),Cu.initBitModels(this._posDecoders,114),this._literalDecoder.init();Tu--;)this._posSlotDecoder[Tu].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},Cu.Decoder.prototype.decode=function(Tu,Pu,Bu){var Lu,Ru,Ou,Du,ku,Fu,Nu=0,Gu=0,zu=0,Hu=0,Wu=0,_h=0,Xc=0;for(this._rangeDecoder.setStream(Tu),this._outWindow.setStream(Pu),this.init();Bu<0||_h<Bu;)if(Lu=_h&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Nu<<4)+Lu)===0)Ru=this._literalDecoder.getDecoder(_h++,Xc),Xc=Nu>=7?Ru.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Gu)):Ru.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Xc),Nu=Nu<4?0:Nu-(Nu<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Nu)===1)Ou=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Nu)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Nu<<4)+Lu)===0&&(Nu=Nu<7?9:11,Ou=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Nu)===0?Du=zu:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Nu)===0?Du=Hu:(Du=Wu,Wu=Hu),Hu=zu),zu=Gu,Gu=Du),Ou===0&&(Ou=2+this._repLenDecoder.decode(this._rangeDecoder,Lu),Nu=Nu<7?8:11);else if(Wu=Hu,Hu=zu,zu=Gu,Ou=2+this._lenDecoder.decode(this._rangeDecoder,Lu),Nu=Nu<7?7:10,(ku=this._posSlotDecoder[Ou<=5?Ou-2:3].decode(this._rangeDecoder))>=4){if(Gu=(2|1&ku)<<(Fu=(ku>>1)-1),ku<14)Gu+=Cu.reverseDecode2(this._posDecoders,Gu-ku-1,this._rangeDecoder,Fu);else if(Gu+=this._rangeDecoder.decodeDirectBits(Fu-4)<<4,(Gu+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Gu===-1)break;return!1}}else Gu=ku;if(Gu>=_h||Gu>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Gu,Ou),_h+=Ou,Xc=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},Cu.Decoder.prototype.setDecoderProperties=function(Tu){var Pu,Bu,Lu,Ru,Ou;return!(Tu.size<5)&&(Bu=(Pu=Tu.readByte())%9,Lu=(Pu=~~(Pu/9))%5,Ru=~~(Pu/5),!!this.setLcLpPb(Bu,Lu,Ru)&&(Ou=Tu.readByte(),Ou|=Tu.readByte()<<8,Ou|=Tu.readByte()<<16,Ou+=16777216*Tu.readByte(),this.setDictionarySize(Ou)))},Cu.decompress=function(Tu,Pu,Bu,Lu){var Ru=new Cu.Decoder;if(!Ru.setDecoderProperties(Tu))throw"Incorrect stream properties";if(!Ru.decode(Pu,Bu,Lu))throw"Error in data stream";return!0},Cu.decompressFile=function(Tu,Pu){var Bu,Lu=new Cu.Decoder;if(!Lu.setDecoderProperties(Tu))throw"Incorrect stream properties";if(Bu=Tu.readByte(),Bu|=Tu.readByte()<<8,Bu|=Tu.readByte()<<16,Bu+=16777216*Tu.readByte(),Tu.readByte(),Tu.readByte(),Tu.readByte(),Tu.readByte(),!Lu.decode(Tu,Pu,Bu))throw"Error in data stream";return!0},Cu}var Wt=Gt$1(),Xt=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Gt$1.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(Cu,Tu,Pu){try{var Bu={data:Tu,offset:0,readByte:function(){return this.data[this.offset++]}},Lu=Bu.data.length,Ru={data:[],offset:0,writeByte:function(ku){var Fu=Math.floor(this.offset/Lu);this.data[Fu]||(this.data[Fu]=new Uint8Array(Lu)),this.data[Fu][this.offset%Lu]=ku,this.offset++}};Cu.decompressFile(Bu,Ru);for(var Ou=new Uint8Array(Ru.offset),Du=0;Du<Ru.offset;Du++)Ou[Du]=Ru.data[Math.floor(Du/Lu)][Du%Lu];Pu(null,Ou)}catch(ku){Pu(ku)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(Cu){for(var Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pu=new Uint8Array(256),Bu=0;Bu<Tu.length;Bu++)Pu[Tu.charCodeAt(Bu)]=Bu;var Lu,Ru,Ou,Du,ku,Fu=.75*Cu.length,Nu=Cu.length,Gu=0;Cu[Cu.length-1]==="="&&(Fu--,Cu[Cu.length-2]==="="&&Fu--);var zu=new ArrayBuffer(Fu),Hu=new Uint8Array(zu);for(Lu=0;Lu<Nu;Lu+=4)Ru=Pu[Cu.charCodeAt(Lu)],Ou=Pu[Cu.charCodeAt(Lu+1)],Du=Pu[Cu.charCodeAt(Lu+2)],ku=Pu[Cu.charCodeAt(Lu+3)],Hu[Gu++]=Ru<<2|Ou>>4,Hu[Gu++]=(15&Ou)<<4|Du>>2,Hu[Gu++]=(3&Du)<<6|63&ku;return zu}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(Cu,Tu,Pu){try{var Bu=new WebAssembly.Memory({initial:16}),Lu=new WebAssembly.Module(Cu),Ru=new WebAssembly.Instance(Lu,{env:{memory:Bu,abort:function(){Pu(new Error("webAssembly abort"))}}}).exports,Ou=Ru.newU8Array(Tu.length);new Uint8Array(Bu.buffer,Ou+24,Tu.length).set(Tu);var Du=Ru.decode(Ou),ku=new Uint32Array(Bu.buffer,Du,4),Fu=ku[0],Nu=ku[2],Gu=ku[3];Fu?Pu(null,new Uint8Array(Bu.buffer,Gu+24,Nu).slice(0,Nu)):Pu(new Error("lzma deocder error"))}catch(zu){Pu(zu)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Yt$1=typeof Worker!="undefined"&&typeof Blob!="undefined",Zt$1="";if(Yt$1)try{var Jt=new Blob([Xt],{type:"text/javascript"});Zt$1=URL.createObjectURL(Jt)}catch(Cu){}var $t$1=function(){function Cu(){var Tu=this;if(!Yt$1)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var Pu=this.worker=new Worker(Zt$1);Pu.onmessage=function(Bu){var Lu=Bu.data,Ru=Lu.id,Ou=Lu.result,Du=Lu.error,ku=Tu.getKey(Ru);Tu.requests[ku]&&(Du?Tu.requests[ku](new Error(Du)):Tu.requests[ku](null,Ou),delete Tu.requests[ku])},Pu.onerror=function(Bu){return console.error(Bu)}}return Cu.prototype.getKey=function(Tu){return"key_"+String(Tu)},Cu.prototype.decompress=function(Tu,Pu){var Bu=++this.callCounter;this.requests[this.getKey(Bu)]=Pu,this.worker.postMessage({type:"decompress",id:Bu,data:Tu},[Tu.buffer])},Cu.prototype.terminate=function(){this.worker.terminate()},Cu.support=Yt$1,Cu}();function ei$1(Cu){return Array.prototype.reduce.call(Cu,function(Tu,Pu,Bu){return Tu|Pu<<8*Bu},0)}function ti$1(Cu){var Tu=new Uint8Array(Cu),Pu=ei$1(Tu.slice(0,4));if(Pu>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Bu=[],Lu=[],Ru=4+4*Pu,Ou=0;Ou<Pu;Ou++)Lu[Ou]=ei$1(Tu.slice(4+4*Ou,8+4*Ou)),Bu[Ou]=Ou===Pu-1?Tu.subarray(Ru,Ru+Lu[Ou]):Tu.slice(Ru,Ru+Lu[Ou]),Ru+=Lu[Ou];return $t$1.support?function(Du){for(var ku=[],Fu=Du.length,Nu=function(zu){ku.push(new Promise(function(Hu,Wu){var _h=new $t$1;_h.decompress(Du[zu],function(Xc,ju){if(_h.terminate(),Xc)return Wu(Xc);Hu(ju)})}))},Gu=0;Gu<Fu;Gu++)Nu(Gu);return Promise.all(ku)}(Bu):Promise.resolve(function(Du){for(var ku,Fu=[],Nu=Du.length,Gu=function(Hu){var Wu={data:Du[Hu],offset:0,readByte:function(){return this.data[this.offset++]}},_h=Wu.data.length,Xc={data:[],offset:0,writeByte:function(_c){var _f=Math.floor(this.offset/_h);this.data[_f]||(this.data[_f]=new Uint8Array(_h)),this.data[_f][this.offset%_h]=_c,this.offset++}};Wt.decompressFile(Wu,Xc),ku=new Uint8Array(Xc.offset);for(var ju=0;ju<Xc.offset;ju++)ku[ju]=Xc.data[Math.floor(ju/_h)][ju%_h];Fu.push(ku)},zu=0;zu<Nu;zu++)Gu(zu);return Fu}(Bu))}function ii$1(Cu,Tu){for(var Pu={},Bu=0,Lu=Tu;Bu<Lu.length;Bu++){var Ru=Lu[Bu];Ru in Cu&&(Pu[Ru]=Cu[Ru])}return Pu}var ni$1=!1;try{ni$1=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Cu){}var ri$1=[];function oi$1(){var Cu=this.src;this.onerror=this.onload=Qe$1,this.removeAttribute("src"),/^blob\:/.test(Cu)&&URL.revokeObjectURL(Cu),this.close=Qe$1}function si(){ri$1.push(this)}function ai(){return Object.assign(new Image,{crossOrigin:"",close:oi$1})}function li(Cu){return new Promise(function(Tu,Pu){var Bu=ai();Bu.onload=function(){Bu.onload=Bu.onerror=Qe$1,setTimeout(function(){return Tu(Bu)},30)},Bu.onerror=function(){var Lu=Bu.src;Bu.onload=Bu.onerror=Qe$1,Bu.close(),Pu(new Error("image load error: ".concat(Lu)))},Bu.src=URL.createObjectURL(Cu)})}function ui(Cu,Tu){if(Tu&&(Cu.width>Tu.width||Cu.height>Tu.height)){var Pu=function(ku,Fu){var Nu=ri$1.shift();if(Nu)return Nu.width=ku,Nu.height=Fu,Nu;if(ni$1){var Gu=new OffscreenCanvas(ku,Fu);return Object.assign(Gu,{close:si})}return Gu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Gu,{close:si})}(Math.min(Cu.width,Tu.width),Math.min(Cu.height,Tu.height)),Bu=Pu.getContext("2d");Bu.clearRect(0,0,Pu.width,Pu.height),Bu.drawImage(Cu,0,0,Pu.width,Pu.height),Cu.close();var Lu=new r$3.Texture(Pu);Lu.needsUpdate=!0,Lu.flipY=!0;var Ru=Lu.dispose;return Lu.dispose=function(){Pu.close(),Ru.call(Lu),delete Lu.dispose},Lu}var Ou=new r$3.Texture(Cu);Ou.needsUpdate=!0,Ou.minFilter=r$3.LinearFilter,Ou.magFilter=r$3.LinearFilter,Ou.flipY=!0;var Du=Ou.dispose;return Ou.dispose=function(){Cu.close(),Du.call(Ou),delete Ou.dispose},Ou}var hi=new r$3.WebGLRenderTarget(1,1),ci=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var pi=new r$3.Mesh(di),fi=new r$3.Scene;fi.add(pi);var Ai,gi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),mi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(Cu,Tu,Pu){return Tu.flipY!==void 0&&(Cu.flipY=Tu.flipY),Tu.format!==void 0&&(Cu.format=Tu.format),Tu.encoding!==void 0&&(Cu.encoding=Tu.encoding),Tu.minFilter!==void 0&&(Cu.minFilter=Tu.minFilter),Tu.magFilter!==void 0&&(Cu.magFilter=Tu.magFilter),Pu?new Promise(function(Bu){at.shared.add(function(){try{var Lu=Pu.getRenderTarget();Pu.setRenderTarget(hi),Cu instanceof r$3.CubeTexture?(pi.material=mi,mi.uniforms.map.value=Cu,Pu.render(fi,ci),mi.uniforms.map.value=null):(pi.material=gi,gi.uniforms.map.value=Cu,Pu.render(fi,ci),mi.uniforms.map.value=null),Pu.setRenderTarget(Lu),Bu(Cu)}catch{Bu(Cu)}},!0,1)}):Promise.resolve(Cu)}var yi$1=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,bi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},xi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},wi$1=((Ai={})[bi.cTFBC1]=xi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[bi.cTFBC3]=xi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),Ei$1=function(){function Cu(){}return Cu.setTranscoderPath=function(Tu){return this.transcoderPath=Tu,this},Cu.setWorkerLimit=function(Tu){return this.workerLimit=Tu,this},Cu.isInitialized=function(){return this.workerPool.filter(function(Tu){return Tu._initialized}).length!==0},Cu.detectSupport=function(Tu){var Pu=this.workerConfig;if(Pu.astcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_astc"),Pu.bptcSupported=!!Tu.extensions.get("EXT_texture_compression_bptc"),Pu.etcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_etc1"),Pu.dxtSupported=!!Tu.extensions.get("WEBGL_compressed_texture_s3tc"),Pu.pvrtcSupported=!!Tu.extensions.get("WEBGL_compressed_texture_pvrtc")||!!Tu.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),Pu.astcSupported)Pu.format=Cu.BASIS_FORMAT.cTFASTC_4x4;else if(Pu.bptcSupported)Pu.format=Cu.BASIS_FORMAT.cTFBC7_M5;else if(Pu.dxtSupported)Pu.format=Cu.BASIS_FORMAT.cTFBC3;else if(Pu.pvrtcSupported)Pu.format=Cu.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!Pu.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");Pu.format=Cu.BASIS_FORMAT.cTFETC1}return this},Cu.createTexture=function(Tu){var Pu,Bu,Lu=this,Ru=Tu.byteLength,Ou=this._allocateWorker(Ru).then(function(Du){return Pu=Du,Bu=Lu.workerNextTaskID++,new Promise(function(ku,Fu){Pu._callbacks[Bu]={resolve:ku,reject:Fu},Pu.postMessage({type:"transcode",id:Bu,buffer:Tu},[Tu])})}).then(function(Du){var ku,Fu=Lu.workerConfig,Nu=Du.width,Gu=Du.height,zu=Du.mipmaps;switch(Du.format){case bi.cTFASTC_4x4:ku=new r$3.CompressedTexture(zu,Nu,Gu,r$3.RGBA_ASTC_4x4_Format);break;case bi.cTFBC1:case bi.cTFBC3:ku=new r$3.CompressedTexture(zu,Nu,Gu,wi$1[Fu.format],r$3.UnsignedByteType);break;case bi.cTFETC1:ku=new r$3.CompressedTexture(zu,Nu,Gu,r$3.RGB_ETC1_Format);break;case bi.cTFPVRTC1_4_RGB:ku=new r$3.CompressedTexture(zu,Nu,Gu,r$3.RGB_PVRTC_4BPPV1_Format);break;case bi.cTFPVRTC1_4_RGBA:ku=new r$3.CompressedTexture(zu,Nu,Gu,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return ku.minFilter=zu.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,ku.magFilter=r$3.LinearFilter,ku.generateMipmaps=!1,ku.needsUpdate=!0,ku});return Ou.catch(function(){return!0}).then(function(){Pu&&Bu&&(Pu._taskLoad-=Ru,delete Pu._callbacks[Bu])}),Ou},Cu._initTranscoder=function(){var Tu=this;if(!this.transcoderPending){var Pu=new r$3.FileLoader;Pu.setPath(this.transcoderPath);var Bu=new Promise(function(Ou,Du){Pu.load("basis_transcoder.js",Ou,void 0,Du)}),Lu=new r$3.FileLoader;Lu.setPath(this.transcoderPath),Lu.setResponseType("arraybuffer");var Ru=new Promise(function(Ou,Du){Lu.load("basis_transcoder.wasm",Ou,void 0,Du)});this.transcoderPending=Promise.all([Bu,Ru]).then(function(Ou){var Du=Ou[0],ku=Ou[1],Fu=["/* basis_transcoder.js */",Du,"/* worker */",yi$1].join(`
`);Tu.workerSourceURL=URL.createObjectURL(new Blob([Fu])),Tu.transcoderBinary=ku})}return this.transcoderPending},Cu._allocateWorker=function(Tu){var Pu=this;return this._initTranscoder().then(function(){if(Pu.workerPool.length<Pu.workerLimit){var Bu=function(Ru){var Ou=new Worker(Ru);return Object.assign(Ou,{_callbacks:{},_initialized:!1,_taskLoad:0})}(Pu.workerSourceURL);Bu._callbacks={},Bu._initialized=!1,Bu._taskLoad=0,Bu.postMessage({type:"init",config:Pu.workerConfig,transcoderBinary:Pu.transcoderBinary}),Bu.onmessage=function(Ru){var Ou=Ru.data;switch(Ou.type){case"initialized":Bu._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":Bu._callbacks[Ou.id].resolve(Ou);break;case"error":Bu._callbacks[Ou.id].reject(Ou);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Ou.type,'"'))}},Pu.workerPool.push(Bu)}else Pu.workerPool.sort(function(Ru,Ou){return Ru._taskLoad>Ou._taskLoad?-1:1});var Lu=Pu.workerPool[Pu.workerPool.length-1];return Lu._taskLoad+=Tu,Lu})},Cu.prototype.dispose=function(){for(var Tu=0;Tu<Cu.workerPool.length;Tu++)Cu.workerPool[Tu].terminate();return Cu.workerPool.length=0,this},Cu.BASIS_FORMAT=bi,Cu.DXT_FORMAT=xi,Cu.DXT_FORMAT_MAP=wi$1,Cu.transcoderPath="https://vr-public.realsee-cdn.cn/release/static/image/release/five/basis/",Cu.transcoderBinary=null,Cu.transcoderPending=null,Cu.workerLimit=1,Cu.workerPool=[],Cu.workerNextTaskID=1,Cu.workerSourceURL="",Cu.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},Cu}();function Mi$1(Cu){var Tu=Cu.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return Tu?Tu[1]:location.protocol}var Ii=function(){function Cu(Tu){this.timeout=Tu.timeout,this.allowHosts=Tu.allowHosts,this.requestProxy=Tu.requestProxy,this.networkSubscribe=Tu.networkSubscribe}return Cu.prototype.setAllowHosts=function(Tu){this.allowHosts=Tu},Cu.prototype.setRequestProxy=function(Tu){this.requestProxy=Tu},Cu.prototype.setNetworkSubscribe=function(Tu){this.networkSubscribe=Tu},Cu.prototype.load=function(Tu,Pu,Bu,Lu,Ru,Ou){var Du;Pu===void 0&&(Pu={}),Bu===void 0&&(Bu=Qe$1),Lu===void 0&&(Lu=Qe$1),Ru===void 0&&(Ru=Qe$1);var ku=Mi$1(Tu),Fu={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Nu=(Du=Pu.viaAjax)!==null&&Du!==void 0&&Du,Gu=Je$1(Tu),zu=/^https?:$/.test(ku),Hu=/\.basis$/.test($e(Tu).split("?")[0]);if(Gu?Nu=!0:zu||(Nu=!1),Nu){if(Hu){var Wu=null,_h="arraybuffer";return Pu.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):it(Tu,t$3.__assign(t$3.__assign({},Fu),{responseType:_h}),void 0,void 0,Ru).then(function(_f){return Wu=_f.meta,Ei$1.createTexture(_f.body)}).then(function(_f){return Pu.preInit!==!1?vi(_f,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii$1(Pu,["wrapS","wrapT"])),Ou):_f}).then(function(_f){var ep={meta:Wu,body:_f};return Bu(ep),ep}).catch(function(_f){return Lu(_f),Promise.reject(_f)})}return _h="blob",it(Tu,t$3.__assign(t$3.__assign({},Fu),{responseType:_h}),void 0,void 0,Ru).then(function(_f){return li(_f.body)}).then(function(_f){return ui(_f,Pu.maxSize)}).then(function(_f){return Pu.preInit!==!1?vi(_f,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Pu),Ou):_f}).then(function(_f){var ep={meta:null,body:_f};return Bu(ep),ep}).catch(function(_f){return Lu(_f),Promise.reject(_f)})}if(Hu){var Xc=new Error("cannot load basis texture via image");return Lu(Xc),Promise.reject(Xc)}var ju=null,_c=ai();return rt$1(Tu,Fu,void 0,void 0,Ru,_c).then(function(_f){return ju=_f.meta,ui(_f.body,Pu.maxSize)}).then(function(_f){return Pu.preInit!==!1?vi(_f,t$3.__assign({flipY:!0,encoding:r$3.sRGBEncoding},Pu),Ou):_f}).then(function(_f){var ep={meta:ju,body:_f};return Bu(ep),ep}).catch(function(_f){return _c.close(),Lu(_f),Promise.reject(_f)})},Cu.prototype.loadCube=function(Tu,Pu,Bu,Lu,Ru,Ou){var Du;Pu===void 0&&(Pu={}),Bu===void 0&&(Bu=Qe$1),Lu===void 0&&(Lu=Qe$1),Ru===void 0&&(Ru=Qe$1),performance.now(),Array.isArray(Tu)||(Tu=[Tu.right,Tu.left,Tu.up,Tu.down,Tu.front,Tu.back]);for(var ku={timeout:this.timeout,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe},Fu=[],Nu=[0,0,0,0,0,0],Gu=[],zu=function(_h){var Xc=Tu[_h],ju=Mi$1(Xc),_c=function(rp){Nu[_h]=rp,Ru(Nu.reduce(function(ip,ap){return ip+ap},0)/6)},_f=(Du=Pu.viaAjax)!==null&&Du!==void 0&&Du,ep=/^https?:$/.test(ju),tp=Je$1(Xc),op=/\.basis$/.test($e(Xc).split("?")[0]);if(tp?_f=!0:ep||(_f=!1),_f)if(op){var lp="arraybuffer",up=it(Xc,t$3.__assign(t$3.__assign({},ku),{responseType:lp}),void 0,void 0,_c).then(function(rp){return Gu[_h]=rp.meta,Ei$1.createTexture(rp.body)});Fu.push(up)}else lp="blob",up=it(Xc,t$3.__assign(t$3.__assign({},ku),{responseType:lp}),void 0,void 0,_c).then(function(rp){return Gu[_h]=rp.meta,li(rp.body)}),Fu.push(up);else{if(op){var hp=new Error("cannot load basis texture via image");return Lu(hp),{value:Promise.reject(hp)}}var np=ai();up=rt$1(Xc,ku,void 0,void 0,_c,np).then(function(rp){return Gu[_h]=rp.meta,rp.body}).catch(function(rp){return np.close(),Promise.reject(rp)}),Fu.push(up)}},Hu=0;Hu<6;Hu++){var Wu=zu(Hu);if(typeof Wu=="object")return Wu.value}return Promise.all(Fu).then(function(_h){return performance.now(),_h[0]instanceof r$3.CompressedTexture?function(Xc){var ju=new r$3.CubeTexture(Xc);ju.needsUpdate=!0;var _c=ju.dispose;return ju.dispose=function(){for(var _f=0,ep=Xc;_f<ep.length;_f++)ep[_f].dispose();_c.call(ju),delete ju.dispose},ju.isCompressedTexture=!0,ju.format=Xc[0].format,ju.minFilter=Xc[0].minFilter,ju.magFilter=Xc[0].magFilter,ju}(_h):function(Xc){var ju=new r$3.CubeTexture(Xc);ju.needsUpdate=!0,ju.minFilter=r$3.LinearFilter,ju.magFilter=r$3.LinearFilter,ju.flipY=!1;var _c=ju.dispose;return ju.dispose=function(){for(var _f=0,ep=Xc;_f<ep.length;_f++)ep[_f].close();_c.call(ju),delete ju.dispose},ju}(_h)}).then(function(_h){return Pu.preInit!==!1?_h.isCompressedTexture?vi(_h,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ii$1(Pu,["wrapS","wrapT"])),Ou):vi(_h,t$3.__assign({flipY:!1,encoding:r$3.sRGBEncoding},Pu),Ou):_h}).then(function(_h){var Xc={body:_h,meta:Gu};return Bu(Xc),Xc}).catch(function(_h){for(var Xc=0,ju=Fu;Xc<ju.length;Xc++)ju[Xc].then(function(_c){_c instanceof r$3.Texture?_c.dispose():_c.close()}).catch(Qe$1);return Lu(_h),Promise.reject(_h)})},Cu}();const Si=o$2.Reader,Ci$1=o$2.util,Bi$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ti=Bi$1.Model=(()=>{function Cu(Tu){if(this.chunks=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.chunks=Ci$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Si||(Tu=Si.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new Bi$1.Model;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.chunks&&Lu.chunks.length||(Lu.chunks=[]),Lu.chunks.push(Bi$1.Chunk.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}return Lu},Cu})();Bi$1.Chunk=(()=>{function Cu(Tu){if(Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.vertices=null,Cu.prototype.faces=null,Cu.prototype.name="",Cu.prototype.texture="",Cu.decode=function(Tu,Pu){Tu instanceof Si||(Tu=Si.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new Bi$1.Chunk;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.vertices=Bi$1.Vertices.decode(Tu,Tu.uint32());break;case 2:Lu.faces=Bi$1.Faces.decode(Tu,Tu.uint32());break;case 3:Lu.name=Tu.string();break;case 4:Lu.texture=Tu.string();break;default:Tu.skipType(7&Ru)}}if(!Lu.hasOwnProperty("vertices"))throw Ci$1.ProtocolError("missing required 'vertices'",{instance:Lu});if(!Lu.hasOwnProperty("faces"))throw Ci$1.ProtocolError("missing required 'faces'",{instance:Lu});if(!Lu.hasOwnProperty("name"))throw Ci$1.ProtocolError("missing required 'name'",{instance:Lu});return Lu},Cu})(),Bi$1.Vertices=(()=>{function Cu(Tu){if(this.xyz=[],this.uvs=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.xyz=Ci$1.emptyArray,Cu.prototype.uvs=Ci$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Si||(Tu=Si.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new Bi$1.Vertices;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.xyz&&Lu.xyz.length||(Lu.xyz=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.xyz.push(Tu.float())}else Lu.xyz.push(Tu.float());break;case 2:if(Lu.uvs&&Lu.uvs.length||(Lu.uvs=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.uvs.push(Tu.float())}else Lu.uvs.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),Bi$1.Faces=(()=>{function Cu(Tu){if(this.indices=[],this.normals=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.indices=Ci$1.emptyArray,Cu.prototype.normals=Ci$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Si||(Tu=Si.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new Bi$1.Faces;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.indices&&Lu.indices.length||(Lu.indices=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.indices.push(Tu.uint32())}else Lu.indices.push(Tu.uint32());break;case 2:if(Lu.normals&&Lu.normals.length||(Lu.normals=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.normals.push(Tu.float())}else Lu.normals.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})();var Pi=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1).elements;function Ri$1(Cu){var Tu=Cu.match(/(group|floor)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}function ki(Cu){var Tu=Cu.match(/(chunk)-?(\d+)/);return Tu?parseInt(Tu[2],10):0}function Di$1(Cu){return 1e6*Ri$1(Cu.name)+1e3*ki(Cu.name)+function(Tu){var Pu=Tu.match(/(sub)-?(\d+)/);return Pu?parseInt(Pu[2],10):0}(Cu.name)}function Li$1(Cu,Tu,Pu,Bu,Lu){var Ru=t$3.__assign({key:"texture.pbm",basisLoaderInitialized:Ei$1.isInitialized()},ii$1(Tu,["format","quality","size","sharpen","mappings"]));return Cu=Tu.transform?Tu.transform(Cu,Ru):ct$1(Cu,Ru),new Ii({allowHosts:Pu,requestProxy:Bu,networkSubscribe:Lu}).load(Cu,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:typeof Ru.size=="number"?new r$3.Vector2(Ru.size,Ru.size):void 0,preInit:!0}).then(function(Ou){var Du=Ou.body;return Du.needsUpdate=!0,Du})}function Oi$1(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){Lu===void 0&&(Lu={});for(var ku=function(sp){for(var cp,dp,fp=[],vp=!0,_p=0,wp=sp.chunks;_p<wp.length;_p++)if(!(Lm=wp[_p]).faces.normals||Lm.faces.normals.length===0){vp=!1;break}for(var Dp=[],Pp=0,Wp=sp.chunks.sort(function(xm,Fm){return Di$1(xm)-Di$1(Fm)});Pp<Wp.length;Pp++){var Rp=Ri$1((Lm=Wp[Pp]).name);Dp[Rp]||(Dp[Rp]=[]),Dp[Rp].push(Lm)}for(var Gp=0;Gp<Dp.length;Gp++){var kp=Dp[Gp];if(kp)if(vp){for(var gp=0,mp=0;mp<kp.length;mp++)gp+=(Lm=kp[mp]).faces.indices.length;for(var Sp=3*gp,xp=2*gp,Ep=3*gp,$p=new ArrayBuffer(4*Sp+4*xp+4*Ep),Ip=new Float32Array($p,0,Sp),Np=new Float32Array($p,4*Sp,xp),qp=new Float32Array($p,4*Sp+4*xp,Ep),Vp=[],pp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],bp=0,zp=0;zp<kp.length;zp++){var Up=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Jp=(Lm=kp[zp]).vertices.xyz,Xp=Lm.vertices.uvs,tm=Lm.faces.indices,lm=Lm.faces.normals,am=tm.length;for(mp=0;mp<am;mp++){var fm=tm[mp],rm=Jp[3*fm],um=Jp[3*fm+1],om=Jp[3*fm+2],hm=1/(Pi[3]*rm+Pi[7]*um+Pi[11]*om+Pi[15]),Lp=(Pi[0]*rm+Pi[4]*um+Pi[8]*om+Pi[12])*hm,sm=(Pi[1]*rm+Pi[5]*um+Pi[9]*om+Pi[13])*hm,dm=(Pi[2]*rm+Pi[6]*um+Pi[10]*om+Pi[14])*hm;Ip[3*bp+3*mp]=Lp,Ip[3*bp+3*mp+1]=sm,Ip[3*bp+3*mp+2]=dm,Np[2*bp+2*mp]=Xp[2*fm],Np[2*bp+2*mp+1]=Xp[2*fm+1];var mm=3*Math.floor(mp/3),pm=lm[mm],wm=lm[mm+1],$m=lm[mm+2],Pm=1/(Pi[3]*pm+Pi[7]*wm+Pi[11]*$m+Pi[15]),Nm=(Pi[0]*pm+Pi[4]*wm+Pi[8]*$m+Pi[12])*Pm,Tm=(Pi[1]*pm+Pi[5]*wm+Pi[9]*$m+Pi[13])*Pm,Dm=(Pi[2]*pm+Pi[6]*wm+Pi[10]*$m+Pi[14])*Pm;qp[3*bp+3*mp]=Nm,qp[3*bp+3*mp+1]=Tm,qp[3*bp+3*mp+2]=Dm,Lp<Up[0]&&(Up[0]=Lp),sm<Up[1]&&(Up[1]=sm),dm<Up[2]&&(Up[2]=dm),Lp>Up[3]&&(Up[3]=Lp),sm>Up[4]&&(Up[4]=sm),dm>Up[5]&&(Up[5]=dm)}Up[0]<pp[0]&&(pp[0]=Up[0]),Up[1]<pp[1]&&(pp[1]=Up[1]),Up[2]<pp[2]&&(pp[2]=Up[2]),Up[3]>pp[3]&&(pp[3]=Up[3]),Up[4]>pp[4]&&(pp[4]=Up[4]),Up[5]>pp[5]&&(pp[5]=Up[5]),Vp.push({materialIndex:zp,name:Lm.name,chunkName:ki(Lm.name),start:bp,count:Lm.faces.indices.length,texture:(cp=Lm.texture)!==null&&cp!==void 0?cp:void 0}),bp+=am}fp.push({floorIndex:Gp,vertices:Ip,uvs:Np,indices:null,normals:qp,groups:Vp,extents:pp})}else{gp=0;var km=0;for(mp=0;mp<kp.length;mp++)km+=(Lm=kp[mp]).vertices.xyz.length/3,gp+=Lm.faces.indices.length;Sp=3*km,xp=2*km,Ep=3*km;var Im=gp,Um=($p=new ArrayBuffer(4*Sp+4*xp+4*Ep+4*Im),Ip=new Float32Array($p,0,Sp),Np=new Float32Array($p,4*Sp,xp),qp=new Float32Array($p,4*Sp+4*xp,Ep),new Uint32Array($p,4*Sp+4*xp+4*Ep,Im)),Wm=(Vp=[],pp=[1/0,1/0,1/0,-1/0,-1/0,-1/0],0);for(bp=0,zp=0;zp<kp.length;zp++){Up=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Jp=(Lm=kp[zp]).vertices.xyz,Xp=Lm.vertices.uvs,tm=Lm.faces.indices;var Lm,Cp=Jp.length/3;for(am=tm.length,mp=0;mp<Cp;mp++)rm=Jp[3*mp],um=Jp[3*mp+1],om=Jp[3*mp+2],hm=1/(Pi[3]*rm+Pi[7]*um+Pi[11]*om+Pi[15]),Lp=(Pi[0]*rm+Pi[4]*um+Pi[8]*om+Pi[12])*hm,sm=(Pi[1]*rm+Pi[5]*um+Pi[9]*om+Pi[13])*hm,dm=(Pi[2]*rm+Pi[6]*um+Pi[10]*om+Pi[14])*hm,Ip[3*bp+3*mp]=Lp,Ip[3*bp+3*mp+1]=sm,Ip[3*bp+3*mp+2]=dm,Np[2*bp+2*mp]=Xp[2*mp],Np[2*bp+2*mp+1]=Xp[2*mp+1],Lp<Up[0]&&(Up[0]=Lp),sm<Up[1]&&(Up[1]=sm),dm<Up[2]&&(Up[2]=dm),Lp>Up[3]&&(Up[3]=Lp),sm>Up[4]&&(Up[4]=sm),dm>Up[5]&&(Up[5]=dm);for(Up[0]<pp[0]&&(pp[0]=Up[0]),Up[1]<pp[1]&&(pp[1]=Up[1]),Up[2]<pp[2]&&(pp[2]=Up[2]),Up[3]>pp[3]&&(pp[3]=Up[3]),Up[4]>pp[4]&&(pp[4]=Up[4]),Up[5]>pp[5]&&(pp[5]=Up[5]),mp=0;mp<am;mp++)Um[Wm+mp]=bp+tm[mp];Vp.push({materialIndex:zp,name:Lm.name,chunkName:ki(Lm.name),start:Wm,count:Lm.faces.indices.length,texture:(dp=Lm.texture)!==null&&dp!==void 0?dp:void 0}),bp+=Cp,Wm+=am}for(mp=0;mp<gp;mp+=3){var Kp,Qp,Zp,cm,Mm,_m,ym,bm,Em,Rm,yp,Tp,Bp,Hp,em,Am;pm=void 0,wm=void 0,$m=void 0,Kp=3*Um[mp],Qp=3*Um[mp+1],Zp=3*Um[mp+2],cm=Ip[Kp],Mm=Ip[Kp+1],_m=Ip[Kp+2],ym=Ip[Qp],bm=Ip[Qp+1],Em=Ip[Qp+2],Rm=Ip[Zp],pm=(Tp=Ip[Zp+1]-bm)*(Am=_m-Em)-(Bp=Ip[Zp+2]-Em)*(em=Mm-bm),wm=Bp*(Hp=cm-ym)-(yp=Rm-ym)*Am,$m=yp*em-Tp*Hp,qp[Kp]+=pm,qp[Kp+1]+=wm,qp[Kp+2]+=$m,qp[Qp]+=pm,qp[Qp+1]+=wm,qp[Qp+2]+=$m,qp[Zp]+=pm,qp[Zp+1]+=wm,qp[Zp+2]+=$m}fp.push({floorIndex:Gp,vertices:Ip,uvs:Np,indices:Um,normals:qp,groups:Vp,extents:pp})}}return fp}(Cu),Fu=[],Nu=0,Gu=ku;Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=zu.floorIndex,Wu=zu.vertices,_h=zu.uvs,Xc=zu.indices,ju=zu.normals,_c=zu.groups,_f=zu.extents,ep=new r$3.Box3;ep.min.x=_f[0],ep.min.y=_f[1],ep.min.z=_f[2],ep.max.x=_f[3],ep.max.y=_f[4],ep.max.z=_f[5];var tp=new r$3.BufferGeometry;tp.setAttribute("position",new r$3.BufferAttribute(Wu,3)),tp.setAttribute("uv",new r$3.BufferAttribute(_h,2)),tp.setAttribute("normal",new r$3.BufferAttribute(ju,3)),Xc&&tp.setIndex(new r$3.BufferAttribute(Xc,1)),tp.boundingBox=ep,tp.boundingSphere=ep.getBoundingSphere(new r$3.Sphere);for(var op=0,lp=_c;op<lp.length;op++){var up=lp[op];tp.addGroup(up.start,up.count,up.materialIndex)}for(var hp=[],np=function(sp){var cp=Pu[sp.chunkName]||(sp.texture?Tu+sp.texture:void 0),dp=new Mt;if(hp.push(dp),cp){var fp=void 0;cp in Lu?fp=Lu[cp]:(fp=Li$1(cp,Bu,Ru,Ou,Du),Lu[cp]=fp),fp.then(function(vp){dp.uniforms.map.value=vp,dp.uniforms.exposure.value=3.3},function(){dp.defines.USE_MAP=!1,dp.uniforms.diffuse.value=new r$3.Color(16777215)})}else dp.defines.USE_MAP=!1,dp.uniforms.diffuse.value=new r$3.Color(16777215)},rp=0,ip=_c;rp<ip.length;rp++)np(up=ip[rp]);var ap=new ft$1(tp,hp);ap.name="model_floor_"+Hu,ap.floorIndex=Hu,Fu.push(ap)}return{objects:Fu,texturePromise:Promise.all(Object.keys(Lu).map(function(sp){return Lu[sp].catch(Qe$1)})).then(Qe$1)}}function Ni$1(Cu,Tu){return(Cu=Object.assign({},Cu)).autoResize!==!1&&(Tu>96?Cu.size=Math.min(Cu.size||1/0,100):Tu>48?Cu.size=Math.min(Cu.size||1/0,200):Tu>24?Cu.size=Math.min(Cu.size||1/0,400):Tu>12?Cu.size=Math.min(Cu.size||1/0,800):Tu>4&&(Cu.size=Math.min(Cu.size||1/0,1024))),Cu}function Fi(Cu){return Cu.indexOf("//")===0||/^[0-9a-z]+\:/i.test(Cu)}const Qi$1=o$2.Reader,Vi$1=o$2.util,_i$1=o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$2.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Hi$1=_i$1.Model=(()=>{function Cu(Tu){if(this.meshes=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.meshes=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Model;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.meshes&&Lu.meshes.length||(Lu.meshes=[]),Lu.meshes.push(_i$1.Mesh.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}return Lu},Cu})();function qi$1(Cu){for(var Tu=[0,0,0],Pu=0;Pu<Cu.attributes.normal.array.length/9;Pu++)Tu[0]=Cu.attributes.normal.array[9*Pu],Tu[1]=Cu.attributes.normal.array[9*Pu+1],Tu[2]=Cu.attributes.normal.array[9*Pu+2],Cu.attributes.normal.array[9*Pu]=Cu.attributes.normal.array[9*Pu+6],Cu.attributes.normal.array[9*Pu+1]=Cu.attributes.normal.array[9*Pu+7],Cu.attributes.normal.array[9*Pu+2]=Cu.attributes.normal.array[9*Pu+8],Cu.attributes.normal.array[9*Pu+6]=Tu[0],Cu.attributes.normal.array[9*Pu+7]=Tu[1],Cu.attributes.normal.array[9*Pu+8]=Tu[2];for(Pu=0;Pu<Cu.attributes.position.array.length/9;Pu++)Tu[0]=Cu.attributes.position.array[9*Pu],Tu[1]=Cu.attributes.position.array[9*Pu+1],Tu[2]=Cu.attributes.position.array[9*Pu+2],Cu.attributes.position.array[9*Pu]=Cu.attributes.position.array[9*Pu+6],Cu.attributes.position.array[9*Pu+1]=Cu.attributes.position.array[9*Pu+7],Cu.attributes.position.array[9*Pu+2]=Cu.attributes.position.array[9*Pu+8],Cu.attributes.position.array[9*Pu+6]=Tu[0],Cu.attributes.position.array[9*Pu+7]=Tu[1],Cu.attributes.position.array[9*Pu+8]=Tu[2];for(Pu=0;Pu<Cu.attributes.uv.array.length/6;Pu++)Tu[0]=Cu.attributes.uv.array[6*Pu],Tu[1]=Cu.attributes.uv.array[6*Pu+1],Cu.attributes.uv.array[6*Pu]=Cu.attributes.uv.array[6*Pu+4],Cu.attributes.uv.array[6*Pu+1]=Cu.attributes.uv.array[6*Pu+5],Cu.attributes.uv.array[6*Pu+4]=Tu[0],Cu.attributes.uv.array[6*Pu+5]=Tu[1];Cu.attributes.normal.needsUpdate=!0,Cu.attributes.position.needsUpdate=!0,Cu.attributes.uv.needsUpdate=!0}function zi$1(Cu){var Tu=Cu.position,Pu=Cu.normal,Bu=Cu.uv,Lu=Cu.uv2,Ru=Cu.groups,Ou=new r$3.BufferGeometry;Ou.setAttribute("position",new r$3.BufferAttribute(new Float32Array(Tu.array),3)),Pu&&Ou.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(Pu.array),3)),Bu&&Ou.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(Bu.array),2)),Lu&&Ou.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(Lu.array),2));for(var Du=0,ku=Ru;Du<ku.length;Du++){var Fu=ku[Du];Ou.addGroup(Fu.start,Fu.count,Fu.materialIndex)}return Ou}function Ki$1(Cu,Tu,Pu,Bu,Lu,Ru){if(Ru.hasOwnProperty(Cu))return Ru[Cu];Fi(Cu=Cu.split("?")[0])||(Cu=Tu+Cu),(Cu=Cu.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(Cu="https:"+Cu);var Ou=t$3.__assign({key:"texture.dome",size:64,basisLoaderInitialized:Ei$1.isInitialized()},ii$1(Pu,["quality","format","sharpen","mappings"]));return Ru[Cu=Pu.transform?Pu.transform(Cu,Ou):ct$1(Cu,Ou)]=Lu.load(Cu,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping}).then(function(Du){var ku=Du.body;return Bu&&ku.repeat.copy(Bu),ku.needsUpdate=!0,ku.updateMatrix(),ku})}function Ui$1(Cu,Tu,Pu,Bu,Lu){var Ru=[],Ou=new Mt,Du=Ou.uniforms;Du.exposure.value=4.3;var ku=Ou.defines;if(ku.USE_MAP=!1,ku.USE_UV=!1,Cu.kd&&(Du.diffuse.value=new r$3.Color().fromArray(Cu.kd.rgb)),Cu.mapkd){var Fu=null;if(Cu.mapkdrepeat){var Nu=Cu.mapkdrepeat.split(/\s+/).map(function(Wu){return Number(Wu)}),Gu=Nu[0],zu=Nu[1];Fu=new r$3.Vector2(Gu,zu)}Ru.push(Ki$1(Cu.mapkd,Tu,Pu,Fu,Bu,Lu).then(function(Wu){ku.USE_MAP=!0,ku.USE_UV=!0,Du.map.value=Wu,Du.uvTransform.value=Wu.matrix,Ou.needsUpdate=!0}).catch(Qe$1))}if(Cu.ks&&(Du.specular.value=new r$3.Color().fromArray(Cu.ks.rgb)),Cu.mapks&&Ru.push(Ki$1(Cu.mapks,Tu,Pu,null,Bu,Lu).then(function(Wu){Du.specularMap.value=Wu}).catch(Qe$1)),Cu.ke&&(Du.emissive.value=new r$3.Color().fromArray(Cu.ke.rgb)),Cu.mapke&&Ru.push(Ki$1(Cu.mapke,Tu,Pu,null,Bu,Lu).then(function(Wu){Du.emissiveMap.value=Wu}).catch(Qe$1)),Cu.norm&&Ru.push(Ki$1(Cu.norm,Tu,Pu,null,Bu,Lu).then(function(Wu){Du.normalMap.value=Wu}).catch(Qe$1)),Cu.mapbump&&Ru.push(Ki$1(Cu.mapbump,Tu,Pu,null,Bu,Lu).then(function(Wu){Du.bumpMap.value=Wu}).catch(Qe$1)),Cu.bump&&Ru.push(Ki$1(Cu.bump,Tu,Pu,null,Bu,Lu).then(function(Wu){Du.bumpMap.value=Wu}).catch(Qe$1)),typeof Cu.ns=="number"&&(Du.shininess.value=Cu.ns),typeof Cu.d=="number"){var Hu=Cu.d;Hu>0&&Hu<1&&(Ou.originOpacity=Hu,Ou.opacity=Hu)}return{material:Ou,textureReady:Promise.all(Ru).then(Qe$1)}}function ji$1(Cu,Tu,Pu,Bu,Lu,Ru){for(var Ou,Du=[],ku=[],Fu=(Ou=Cu,Hi$1.decode(Ou).meshes),Nu=new Ii({allowHosts:Bu,requestProxy:Lu,networkSubscribe:Ru}),Gu=new r$3.Matrix4,zu=new r$3.Vector3,Hu=new r$3.Quaternion,Wu=new r$3.Vector3,_h={},Xc=0,ju=Fu;Xc<ju.length;Xc++){var _c=ju[Xc],_f=_c.name,ep=_c.chunks,tp=_c.matrix;if(_f!=="Ceiling"&&_f!=="CeilingDrop")for(var op=0,lp=tp;op<lp.length;op++){var up=lp[op];Gu.elements=up.elements;var hp=new gt;hp.renderOrder=-3;for(var np=0;np<ep.length;np++){var rp=zi$1(ep[np].geometry);rp.applyMatrix4(Gu),Gu.decompose(zu,Hu,Wu),Wu.x*Wu.y*Wu.z<0&&rp.attributes.normal&&rp.attributes.position&&rp.attributes.uv&&qi$1(rp);for(var ip=[],ap=0,sp=ep[np].material;ap<sp.length;ap++){var cp=Ui$1(sp[ap],Tu,Pu,Nu,_h),dp=cp.material,fp=cp.textureReady;ku.push(fp),ip.push(dp)}var vp=new ft$1(rp,ip);vp.name="chunk_"+np,hp.add(vp)}hp.floorIndex=0,hp.name=_f,Du.push(hp)}}return{objects:Du,texturePromise:Promise.all(ku).catch(Qe$1)}}function Gi(Cu,Tu){if(!Cu)throw new Error("math.gl assertion ".concat(Tu))}_i$1.Mesh=(()=>{function Cu(Tu){if(this.chunks=[],this.matrix=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.name="",Cu.prototype.chunks=Vi$1.emptyArray,Cu.prototype.matrix=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Mesh;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.name=Tu.string();break;case 2:Lu.chunks&&Lu.chunks.length||(Lu.chunks=[]),Lu.chunks.push(_i$1.Chunk.decode(Tu,Tu.uint32()));break;case 3:Lu.matrix&&Lu.matrix.length||(Lu.matrix=[]),Lu.matrix.push(_i$1.Matrix.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Lu.hasOwnProperty("name"))throw Vi$1.ProtocolError("missing required 'name'",{instance:Lu});return Lu},Cu})(),_i$1.Matrix=(()=>{function Cu(Tu){if(this.elements=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.elements=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Matrix;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.elements&&Lu.elements.length||(Lu.elements=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.elements.push(Tu.float())}else Lu.elements.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),_i$1.Chunk=(()=>{function Cu(Tu){if(this.material=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.geometry=null,Cu.prototype.material=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Chunk;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 2:Lu.geometry=_i$1.Geometry.decode(Tu,Tu.uint32());break;case 3:Lu.material&&Lu.material.length||(Lu.material=[]),Lu.material.push(_i$1.Material.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Lu.hasOwnProperty("geometry"))throw Vi$1.ProtocolError("missing required 'geometry'",{instance:Lu});return Lu},Cu})(),_i$1.Geometry=(()=>{function Cu(Tu){if(this.groups=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.position=null,Cu.prototype.uv=null,Cu.prototype.uv2=null,Cu.prototype.normal=null,Cu.prototype.groups=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Geometry;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.position=_i$1.Position.decode(Tu,Tu.uint32());break;case 2:Lu.uv=_i$1.UV.decode(Tu,Tu.uint32());break;case 3:Lu.uv2=_i$1.UV.decode(Tu,Tu.uint32());break;case 4:Lu.normal=_i$1.Normal.decode(Tu,Tu.uint32());break;case 5:Lu.groups&&Lu.groups.length||(Lu.groups=[]),Lu.groups.push(_i$1.Group.decode(Tu,Tu.uint32()));break;default:Tu.skipType(7&Ru)}}if(!Lu.hasOwnProperty("position"))throw Vi$1.ProtocolError("missing required 'position'",{instance:Lu});if(!Lu.hasOwnProperty("normal"))throw Vi$1.ProtocolError("missing required 'normal'",{instance:Lu});return Lu},Cu})(),_i$1.Position=(()=>{function Cu(Tu){if(this.array=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.array=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Position;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.array.push(Tu.float())}else Lu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),_i$1.UV=(()=>{function Cu(Tu){if(this.array=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.array=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.UV;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.array.push(Tu.float())}else Lu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),_i$1.Normal=(()=>{function Cu(Tu){if(this.array=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.array=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Normal;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.array&&Lu.array.length||(Lu.array=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.array.push(Tu.float())}else Lu.array.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),_i$1.Group=(()=>{function Cu(Tu){if(Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.start=0,Cu.prototype.count=0,Cu.prototype.materialIndex=0,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Group;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.start=Tu.uint32();break;case 2:Lu.count=Tu.uint32();break;case 3:Lu.materialIndex=Tu.uint32();break;default:Tu.skipType(7&Ru)}}if(!Lu.hasOwnProperty("start"))throw Vi$1.ProtocolError("missing required 'start'",{instance:Lu});if(!Lu.hasOwnProperty("count"))throw Vi$1.ProtocolError("missing required 'count'",{instance:Lu});if(!Lu.hasOwnProperty("materialIndex"))throw Vi$1.ProtocolError("missing required 'materialIndex'",{instance:Lu});return Lu},Cu})(),_i$1.Material=(()=>{function Cu(Tu){if(Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.kd=null,Cu.prototype.ks=null,Cu.prototype.ke=null,Cu.prototype.mapkd="",Cu.prototype.mapks="",Cu.prototype.mapke="",Cu.prototype.norm="",Cu.prototype.mapbump="",Cu.prototype.bump="",Cu.prototype.mapd="",Cu.prototype.ns=0,Cu.prototype.d=0,Cu.prototype.tr=0,Cu.prototype.mapkdrepeat="",Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Material;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:Lu.kd=_i$1.Color.decode(Tu,Tu.uint32());break;case 2:Lu.ks=_i$1.Color.decode(Tu,Tu.uint32());break;case 3:Lu.ke=_i$1.Color.decode(Tu,Tu.uint32());break;case 4:Lu.mapkd=Tu.string();break;case 5:Lu.mapks=Tu.string();break;case 6:Lu.mapke=Tu.string();break;case 7:Lu.norm=Tu.string();break;case 8:Lu.mapbump=Tu.string();break;case 9:Lu.bump=Tu.string();break;case 10:Lu.mapd=Tu.string();break;case 11:Lu.ns=Tu.float();break;case 12:Lu.d=Tu.float();break;case 13:Lu.tr=Tu.float();break;case 14:Lu.mapkdrepeat=Tu.string();break;default:Tu.skipType(7&Ru)}}return Lu},Cu})(),_i$1.Color=(()=>{function Cu(Tu){if(this.rgb=[],Tu)for(let Pu=Object.keys(Tu),Bu=0;Bu<Pu.length;++Bu)Tu[Pu[Bu]]!=null&&(this[Pu[Bu]]=Tu[Pu[Bu]])}return Cu.prototype.rgb=Vi$1.emptyArray,Cu.decode=function(Tu,Pu){Tu instanceof Qi$1||(Tu=Qi$1.create(Tu));let Bu=Pu===void 0?Tu.len:Tu.pos+Pu,Lu=new _i$1.Color;for(;Tu.pos<Bu;){let Ru=Tu.uint32();switch(Ru>>>3){case 1:if(Lu.rgb&&Lu.rgb.length||(Lu.rgb=[]),(7&Ru)==2){let Ou=Tu.uint32()+Tu.pos;for(;Tu.pos<Ou;)Lu.rgb.push(Tu.float())}else Lu.rgb.push(Tu.float());break;default:Tu.skipType(7&Ru)}}return Lu},Cu})();const Wi$1={};function Xi(Cu,{precision:Tu=Wi$1.precision||4}={}){return Cu=function(Pu){return Math.round(Pu/Wi$1.EPSILON)*Wi$1.EPSILON}(Cu),"".concat(parseFloat(Cu.toPrecision(Tu)))}function Yi$1(Cu){return Array.isArray(Cu)||ArrayBuffer.isView(Cu)&&!(Cu instanceof DataView)}function Zi$1(Cu,Tu,Pu){const Bu=Wi$1.EPSILON;Pu&&(Wi$1.EPSILON=Pu);try{if(Cu===Tu)return!0;if(Yi$1(Cu)&&Yi$1(Tu)){if(Cu.length!==Tu.length)return!1;for(let Lu=0;Lu<Cu.length;++Lu)if(!Zi$1(Cu[Lu],Tu[Lu]))return!1;return!0}return Cu&&Cu.equals?Cu.equals(Tu):Tu&&Tu.equals?Tu.equals(Cu):!(!Number.isFinite(Cu)||!Number.isFinite(Tu))&&Math.abs(Cu-Tu)<=Wi$1.EPSILON*Math.max(1,Math.abs(Cu),Math.abs(Tu))}finally{Wi$1.EPSILON=Bu}}Wi$1.EPSILON=1e-12,Wi$1.debug=!1,Wi$1.precision=4,Wi$1.printTypes=!1,Wi$1.printDegrees=!1,Wi$1.printRowMajor=!0;class Ji$1 extends function(Tu){function Pu(){var Bu=Reflect.construct(Tu,Array.from(arguments));return Object.setPrototypeOf(Bu,Object.getPrototypeOf(this)),Bu}return Pu.prototype=Object.create(Tu.prototype,{constructor:{value:Tu,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Pu,Tu):Pu.__proto__=Tu,Pu}(Array){get ELEMENTS(){return Gi(!1),0}clone(){return new this.constructor().copy(this)}from(Tu){return Array.isArray(Tu)?this.copy(Tu):this.fromObject(Tu)}fromArray(Tu,Pu=0){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=Tu[Bu+Pu];return this.check()}to(Tu){return Tu===this?this:Yi$1(Tu)?this.toArray(Tu):this.toObject(Tu)}toTarget(Tu){return Tu?this.to(Tu):this}toArray(Tu=[],Pu=0){for(let Bu=0;Bu<this.ELEMENTS;++Bu)Tu[Pu+Bu]=this[Bu];return Tu}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wi$1)}formatString(Tu){let Pu="";for(let Bu=0;Bu<this.ELEMENTS;++Bu)Pu+=(Bu>0?", ":"")+Xi(this[Bu],Tu);return"".concat(Tu.printTypes?this.constructor.name:"","[").concat(Pu,"]")}equals(Tu){if(!Tu||this.length!==Tu.length)return!1;for(let Pu=0;Pu<this.ELEMENTS;++Pu)if(!Zi$1(this[Pu],Tu[Pu]))return!1;return!0}exactEquals(Tu){if(!Tu||this.length!==Tu.length)return!1;for(let Pu=0;Pu<this.ELEMENTS;++Pu)if(this[Pu]!==Tu[Pu])return!1;return!0}negate(){for(let Tu=0;Tu<this.ELEMENTS;++Tu)this[Tu]=-this[Tu];return this.check()}lerp(Tu,Pu,Bu){Bu===void 0&&(Bu=Pu,Pu=Tu,Tu=this);for(let Lu=0;Lu<this.ELEMENTS;++Lu){const Ru=Tu[Lu];this[Lu]=Ru+Bu*(Pu[Lu]-Ru)}return this.check()}min(Tu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Math.min(Tu[Pu],this[Pu]);return this.check()}max(Tu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Math.max(Tu[Pu],this[Pu]);return this.check()}clamp(Tu,Pu){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=Math.min(Math.max(this[Bu],Tu[Bu]),Pu[Bu]);return this.check()}add(...Tu){for(const Pu of Tu)for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]+=Pu[Bu];return this.check()}subtract(...Tu){for(const Pu of Tu)for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]-=Pu[Bu];return this.check()}scale(Tu){if(Array.isArray(Tu))return this.multiply(Tu);for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]*=Tu;return this.check()}sub(Tu){return this.subtract(Tu)}setScalar(Tu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]=Tu;return this.check()}addScalar(Tu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]+=Tu;return this.check()}subScalar(Tu){return this.addScalar(-Tu)}multiplyScalar(Tu){for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]*=Tu;return this.check()}divideScalar(Tu){return this.scale(1/Tu)}clampScalar(Tu,Pu){for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]=Math.min(Math.max(this[Bu],Tu),Pu);return this.check()}multiplyByScalar(Tu){return this.scale(Tu)}get elements(){return this}check(){if(Wi$1.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let Tu=this.length===this.ELEMENTS;for(let Pu=0;Pu<this.ELEMENTS;++Pu)Tu=Tu&&Number.isFinite(this[Pu]);return Tu}}function $i(Cu){if(!Number.isFinite(Cu))throw new Error("Invalid number ".concat(Cu));return Cu}function en$1(Cu,Tu,Pu=""){if(Wi$1.debug&&!function(Bu,Lu){if(Bu.length!==Lu)return!1;for(let Ru=0;Ru<Bu.length;++Ru)if(!Number.isFinite(Bu[Ru]))return!1;return!0}(Cu,Tu))throw new Error("math.gl: ".concat(Pu," some fields set to invalid numbers'"));return Cu}const tn$1={};function nn(Cu,Tu){tn$1[Cu]||(tn$1[Cu]=!0,console.warn("".concat(Cu," has been removed in version ").concat(Tu,", see upgrade guide for more information")))}class rn$1 extends Ji$1{get ELEMENTS(){return Gi(!1),0}copy(Tu){return Gi(!1),this}get x(){return this[0]}set x(Tu){this[0]=$i(Tu)}get y(){return this[1]}set y(Tu){this[1]=$i(Tu)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let Tu=0;for(let Pu=0;Pu<this.ELEMENTS;++Pu)Tu+=this[Pu]*this[Pu];return Tu}magnitudeSquared(){return this.lengthSquared()}distance(Tu){return Math.sqrt(this.distanceSquared(Tu))}distanceSquared(Tu){let Pu=0;for(let Bu=0;Bu<this.ELEMENTS;++Bu){const Lu=this[Bu]-Tu[Bu];Pu+=Lu*Lu}return $i(Pu)}dot(Tu){let Pu=0;for(let Bu=0;Bu<this.ELEMENTS;++Bu)Pu+=this[Bu]*Tu[Bu];return $i(Pu)}normalize(){const Tu=this.magnitude();if(Tu!==0)for(let Pu=0;Pu<this.ELEMENTS;++Pu)this[Pu]/=Tu;return this.check()}multiply(...Tu){for(const Pu of Tu)for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]*=Pu[Bu];return this.check()}divide(...Tu){for(const Pu of Tu)for(let Bu=0;Bu<this.ELEMENTS;++Bu)this[Bu]/=Pu[Bu];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(Tu){return this.distance(Tu)}distanceToSquared(Tu){return this.distanceSquared(Tu)}getComponent(Tu){return Gi(Tu>=0&&Tu<this.ELEMENTS,"index is out of range"),$i(this[Tu])}setComponent(Tu,Pu){return Gi(Tu>=0&&Tu<this.ELEMENTS,"index is out of range"),this[Tu]=Pu,this.check()}addVectors(Tu,Pu){return this.copy(Tu).add(Pu)}subVectors(Tu,Pu){return this.copy(Tu).subtract(Pu)}multiplyVectors(Tu,Pu){return this.copy(Tu).multiply(Pu)}addScaledVector(Tu,Pu){return this.add(new this.constructor(Tu).multiplyScalar(Pu))}}var on$1=typeof Float32Array!="undefined"?Float32Array:Array;function sn(){var Cu=new on$1(3);return on$1!=Float32Array&&(Cu[0]=0,Cu[1]=0,Cu[2]=0),Cu}function an$1(Cu,Tu,Pu){var Bu=new on$1(3);return Bu[0]=Cu,Bu[1]=Tu,Bu[2]=Pu,Bu}function ln(Cu,Tu){return Cu[0]*Tu[0]+Cu[1]*Tu[1]+Cu[2]*Tu[2]}function un$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Pu[0],Du=Pu[1],ku=Pu[2];return Cu[0]=Lu*ku-Ru*Du,Cu[1]=Ru*Ou-Bu*ku,Cu[2]=Bu*Du-Lu*Ou,Cu}function hn$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Pu[3]*Bu+Pu[7]*Lu+Pu[11]*Ru+Pu[15];return Ou=Ou||1,Cu[0]=(Pu[0]*Bu+Pu[4]*Lu+Pu[8]*Ru+Pu[12])/Ou,Cu[1]=(Pu[1]*Bu+Pu[5]*Lu+Pu[9]*Ru+Pu[13])/Ou,Cu[2]=(Pu[2]*Bu+Pu[6]*Lu+Pu[10]*Ru+Pu[14])/Ou,Cu}function cn$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2];return Cu[0]=Bu*Pu[0]+Lu*Pu[3]+Ru*Pu[6],Cu[1]=Bu*Pu[1]+Lu*Pu[4]+Ru*Pu[7],Cu[2]=Bu*Pu[2]+Lu*Pu[5]+Ru*Pu[8],Cu}Math.hypot||(Math.hypot=function(){for(var Cu=0,Tu=arguments.length;Tu--;)Cu+=arguments[Tu]*arguments[Tu];return Math.sqrt(Cu)});var dn$1=function(Cu){var Tu=Cu[0],Pu=Cu[1],Bu=Cu[2];return Math.hypot(Tu,Pu,Bu)};function pn(Cu,Tu,Pu){const Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Pu[3]*Bu+Pu[7]*Lu+Pu[11]*Ru||1;return Cu[0]=(Pu[0]*Bu+Pu[4]*Lu+Pu[8]*Ru)/Ou,Cu[1]=(Pu[1]*Bu+Pu[5]*Lu+Pu[9]*Ru)/Ou,Cu[2]=(Pu[2]*Bu+Pu[6]*Lu+Pu[10]*Ru)/Ou,Cu}sn();const fn$1=[0,0,0],An={};class gn extends rn$1{static get ZERO(){return An.ZERO=An.ZERO||Object.freeze(new gn(0,0,0,0))}constructor(Tu=0,Pu=0,Bu=0){super(-0,-0,-0),arguments.length===1&&Yi$1(Tu)?this.copy(Tu):(Wi$1.debug&&($i(Tu),$i(Pu),$i(Bu)),this[0]=Tu,this[1]=Pu,this[2]=Bu)}set(Tu,Pu,Bu){return this[0]=Tu,this[1]=Pu,this[2]=Bu,this.check()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this.check()}fromObject(Tu){return Wi$1.debug&&($i(Tu.x),$i(Tu.y),$i(Tu.z)),this[0]=Tu.x,this[1]=Tu.y,this[2]=Tu.z,this.check()}toObject(Tu){return Tu.x=this[0],Tu.y=this[1],Tu.z=this[2],Tu}get ELEMENTS(){return 3}get z(){return this[2]}set z(Tu){this[2]=$i(Tu)}angle(Tu){return function(Pu,Bu){var Lu=Pu[0],Ru=Pu[1],Ou=Pu[2],Du=Bu[0],ku=Bu[1],Fu=Bu[2],Nu=Math.sqrt(Lu*Lu+Ru*Ru+Ou*Ou)*Math.sqrt(Du*Du+ku*ku+Fu*Fu),Gu=Nu&&ln(Pu,Bu)/Nu;return Math.acos(Math.min(Math.max(Gu,-1),1))}(this,Tu)}cross(Tu){return un$1(this,this,Tu),this.check()}rotateX({radians:Tu,origin:Pu=fn$1}){return function(Bu,Lu,Ru,Ou){var Du=[],ku=[];Du[0]=Lu[0]-Ru[0],Du[1]=Lu[1]-Ru[1],Du[2]=Lu[2]-Ru[2],ku[0]=Du[0],ku[1]=Du[1]*Math.cos(Ou)-Du[2]*Math.sin(Ou),ku[2]=Du[1]*Math.sin(Ou)+Du[2]*Math.cos(Ou),Bu[0]=ku[0]+Ru[0],Bu[1]=ku[1]+Ru[1],Bu[2]=ku[2]+Ru[2]}(this,this,Pu,Tu),this.check()}rotateY({radians:Tu,origin:Pu=fn$1}){return function(Bu,Lu,Ru,Ou){var Du=[],ku=[];Du[0]=Lu[0]-Ru[0],Du[1]=Lu[1]-Ru[1],Du[2]=Lu[2]-Ru[2],ku[0]=Du[2]*Math.sin(Ou)+Du[0]*Math.cos(Ou),ku[1]=Du[1],ku[2]=Du[2]*Math.cos(Ou)-Du[0]*Math.sin(Ou),Bu[0]=ku[0]+Ru[0],Bu[1]=ku[1]+Ru[1],Bu[2]=ku[2]+Ru[2]}(this,this,Pu,Tu),this.check()}rotateZ({radians:Tu,origin:Pu=fn$1}){return function(Bu,Lu,Ru,Ou){var Du=[],ku=[];Du[0]=Lu[0]-Ru[0],Du[1]=Lu[1]-Ru[1],Du[2]=Lu[2]-Ru[2],ku[0]=Du[0]*Math.cos(Ou)-Du[1]*Math.sin(Ou),ku[1]=Du[0]*Math.sin(Ou)+Du[1]*Math.cos(Ou),ku[2]=Du[2],Bu[0]=ku[0]+Ru[0],Bu[1]=ku[1]+Ru[1],Bu[2]=ku[2]+Ru[2]}(this,this,Pu,Tu),this.check()}transform(Tu){return this.transformAsPoint(Tu)}transformAsPoint(Tu){return hn$1(this,this,Tu),this.check()}transformAsVector(Tu){return pn(this,this,Tu),this.check()}transformByMatrix3(Tu){return cn$1(this,this,Tu),this.check()}transformByMatrix2(Tu){return function(Pu,Bu,Lu){const Ru=Bu[0],Ou=Bu[1];Pu[0]=Lu[0]*Ru+Lu[2]*Ou,Pu[1]=Lu[1]*Ru+Lu[3]*Ou,Pu[2]=Bu[2]}(this,this,Tu),this.check()}transformByQuaternion(Tu){return function(Pu,Bu,Lu){var Ru=Lu[0],Ou=Lu[1],Du=Lu[2],ku=Lu[3],Fu=Bu[0],Nu=Bu[1],Gu=Bu[2],zu=Ou*Gu-Du*Nu,Hu=Du*Fu-Ru*Gu,Wu=Ru*Nu-Ou*Fu,_h=Ou*Wu-Du*Hu,Xc=Du*zu-Ru*Wu,ju=Ru*Hu-Ou*zu,_c=2*ku;zu*=_c,Hu*=_c,Wu*=_c,_h*=2,Xc*=2,ju*=2,Pu[0]=Fu+zu+_h,Pu[1]=Nu+Hu+Xc,Pu[2]=Gu+Wu+ju}(this,this,Tu),this.check()}}var mn={throttleRequests:!0,maxRequests:5},vn$1=function(){function Cu(Tu){Tu===void 0&&(Tu={}),this.props=t$3.__assign(t$3.__assign({},mn),Tu),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferred=null}return Cu.prototype.scheduleRequest=function(Tu,Pu){if(Pu===void 0&&(Pu=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(Tu))return this.requestMap.get(Tu);var Bu={identiy:Tu,priority:0,getPriority:Pu,resolve:function(){}},Lu=new Promise(function(Ru){return Bu.resolve=Ru});return this.requestQueue.push(Bu),this.requestMap.set(Tu,Lu),this.issueNewRequests(),Lu},Cu.prototype.issueRequest=function(Tu){var Pu=this,Bu=Tu.identiy,Lu=Tu.resolve,Ru=!1;this.activeRequestCount++,Lu({done:function(){Ru||(Ru=!0,Pu.requestMap.delete(Bu),Pu.activeRequestCount--,Pu.issueNewRequests())}})},Cu.prototype.issueNewRequests=function(){var Tu=this;this.deferred||(this.deferred=setTimeout(function(){return Tu.issueNewRequestsAsync()},0))},Cu.prototype.issueNewRequestsAsync=function(){this.deferred=null;var Tu=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(Tu!==0){this.updateAllRequests();for(var Pu=0;Pu<Tu;Pu++){var Bu=this.requestQueue.shift();Bu&&this.issueRequest(Bu)}}},Cu.prototype.updateAllRequests=function(){for(var Tu=this.requestQueue,Pu=0;Pu<Tu.length;Pu++){var Bu=Tu[Pu];this.updateRequest(Bu)||(Tu.splice(Pu,1),this.requestMap.delete(Bu.identiy),Pu--)}Tu.sort(function(Lu,Ru){return Lu.priority-Ru.priority})},Cu.prototype.updateRequest=function(Tu){return Tu.priority=Tu.getPriority(Tu.identiy),!(Tu.priority<0)||(Tu.resolve(null),!1)},Cu}(),yn$1=function(Cu,Tu,Pu){this.item=Cu,this.previous=Tu,this.next=Pu},bn$1=function(){function Cu(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(Cu.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Cu.prototype.add=function(Tu){var Pu=new yn$1(Tu,this.tail,null);return this.tail?(this.tail.next=Pu,this.tail=Pu):(this.head=Pu,this.tail=Pu),this._length++,Pu},Cu.prototype.remove=function(Tu){Tu.previous&&Tu.next?(Tu.previous.next=Tu.next,Tu.next.previous=Tu.previous):Tu.previous?(Tu.previous.next=null,this.tail=Tu.previous):Tu.next?(Tu.next.previous=null,this.head=Tu.next):(this.head=null,this.tail=null),Tu.next=null,Tu.previous=null,this._length--},Cu.prototype.splice=function(Tu,Pu){Tu!==Pu&&(this.remove(Pu),this.insert(Tu,Pu))},Cu.prototype.insert=function(Tu,Pu){var Bu=Tu.next;Tu.next=Pu,this.tail===Tu?this.tail=Pu:Bu.previous=Pu,Pu.next=Bu,Pu.previous=Tu,this._length++},Cu}(),xn=function(){function Cu(){this.list=new bn$1,this.sentinel=this.list.add("sentinel")}return Cu.prototype.reset=function(){this.list.splice(this.list.tail,this.sentinel)},Cu.prototype.touch=function(Tu){var Pu=Tu.cacheNode;Pu&&this.list.splice(this.sentinel,Pu)},Cu.prototype.add=function(Tu,Pu){Tu.cacheNode||(Tu.cacheNode=this.list.add(Tu),Pu&&Pu(Tu))},Cu.prototype.unloadTile=function(Tu,Pu){var Bu=Tu.cacheNode;Bu&&(this.list.remove(Bu),Tu.cacheNode=void 0,Pu&&Pu(Tu))},Cu.prototype.unloadTiles=function(Tu,Pu){for(var Bu=this.list.head;Bu!==this.sentinel&&Tu();){var Lu=Bu.item;Bu=Bu.next,this.unloadTile(Lu,Pu)}},Cu}();class wn$1 extends Ji$1{get ELEMENTS(){return Gi(!1),0}get RANK(){return Gi(!1),0}toString(){let Tu="[";if(Wi$1.printRowMajor){Tu+="row-major:";for(let Pu=0;Pu<this.RANK;++Pu)for(let Bu=0;Bu<this.RANK;++Bu)Tu+=" ".concat(this[Bu*this.RANK+Pu])}else{Tu+="column-major:";for(let Pu=0;Pu<this.ELEMENTS;++Pu)Tu+=" ".concat(this[Pu])}return Tu+="]",Tu}getElementIndex(Tu,Pu){return Pu*this.RANK+Tu}getElement(Tu,Pu){return this[Pu*this.RANK+Tu]}setElement(Tu,Pu,Bu){return this[Pu*this.RANK+Tu]=$i(Bu),this}getColumn(Tu,Pu=new Array(this.RANK).fill(-0)){const Bu=Tu*this.RANK;for(let Lu=0;Lu<this.RANK;++Lu)Pu[Lu]=this[Bu+Lu];return Pu}setColumn(Tu,Pu){const Bu=Tu*this.RANK;for(let Lu=0;Lu<this.RANK;++Lu)this[Bu+Lu]=Pu[Lu];return this}}function En$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Tu[3],Du=Tu[4],ku=Tu[5],Fu=Tu[6],Nu=Tu[7],Gu=Tu[8],zu=Tu[9],Hu=Tu[10],Wu=Tu[11],_h=Tu[12],Xc=Tu[13],ju=Tu[14],_c=Tu[15],_f=Pu[0],ep=Pu[1],tp=Pu[2],op=Pu[3];return Cu[0]=_f*Bu+ep*Du+tp*Gu+op*_h,Cu[1]=_f*Lu+ep*ku+tp*zu+op*Xc,Cu[2]=_f*Ru+ep*Fu+tp*Hu+op*ju,Cu[3]=_f*Ou+ep*Nu+tp*Wu+op*_c,_f=Pu[4],ep=Pu[5],tp=Pu[6],op=Pu[7],Cu[4]=_f*Bu+ep*Du+tp*Gu+op*_h,Cu[5]=_f*Lu+ep*ku+tp*zu+op*Xc,Cu[6]=_f*Ru+ep*Fu+tp*Hu+op*ju,Cu[7]=_f*Ou+ep*Nu+tp*Wu+op*_c,_f=Pu[8],ep=Pu[9],tp=Pu[10],op=Pu[11],Cu[8]=_f*Bu+ep*Du+tp*Gu+op*_h,Cu[9]=_f*Lu+ep*ku+tp*zu+op*Xc,Cu[10]=_f*Ru+ep*Fu+tp*Hu+op*ju,Cu[11]=_f*Ou+ep*Nu+tp*Wu+op*_c,_f=Pu[12],ep=Pu[13],tp=Pu[14],op=Pu[15],Cu[12]=_f*Bu+ep*Du+tp*Gu+op*_h,Cu[13]=_f*Lu+ep*ku+tp*zu+op*Xc,Cu[14]=_f*Ru+ep*Fu+tp*Hu+op*ju,Cu[15]=_f*Ou+ep*Nu+tp*Wu+op*_c,Cu}function Mn$1(Cu,Tu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2];return Cu[0]=Tu[0]*Bu,Cu[1]=Tu[1]*Bu,Cu[2]=Tu[2]*Bu,Cu[3]=Tu[3]*Bu,Cu[4]=Tu[4]*Lu,Cu[5]=Tu[5]*Lu,Cu[6]=Tu[6]*Lu,Cu[7]=Tu[7]*Lu,Cu[8]=Tu[8]*Ru,Cu[9]=Tu[9]*Ru,Cu[10]=Tu[10]*Ru,Cu[11]=Tu[11]*Ru,Cu[12]=Tu[12],Cu[13]=Tu[13],Cu[14]=Tu[14],Cu[15]=Tu[15],Cu}(function(){var Cu;Cu=new on$1(2),on$1!=Float32Array&&(Cu[0]=0,Cu[1]=0)})(),function(){var Cu;Cu=new on$1(4),on$1!=Float32Array&&(Cu[0]=0,Cu[1]=0,Cu[2]=0,Cu[3]=0)}();const In$1=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Sn=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Cn=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Bn$1={};class Tn extends wn$1{static get IDENTITY(){return Bn$1.IDENTITY=Bn$1.IDENTITY||Object.freeze(new Tn(In$1)),Bn$1.IDENTITY}static get ZERO(){return Bn$1.ZERO=Bn$1.ZERO||Object.freeze(new Tn(Sn)),Bn$1.ZERO}get INDICES(){return Cn}get ELEMENTS(){return 16}get RANK(){return 4}constructor(Tu){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(Tu)?this.copy(Tu):this.identity()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this[4]=Tu[4],this[5]=Tu[5],this[6]=Tu[6],this[7]=Tu[7],this[8]=Tu[8],this[9]=Tu[9],this[10]=Tu[10],this[11]=Tu[11],this[12]=Tu[12],this[13]=Tu[13],this[14]=Tu[14],this[15]=Tu[15],this.check()}set(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc){return this[0]=Tu,this[1]=Pu,this[2]=Bu,this[3]=Lu,this[4]=Ru,this[5]=Ou,this[6]=Du,this[7]=ku,this[8]=Fu,this[9]=Nu,this[10]=Gu,this[11]=zu,this[12]=Hu,this[13]=Wu,this[14]=_h,this[15]=Xc,this.check()}setRowMajor(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc){return this[0]=Tu,this[1]=Ru,this[2]=Fu,this[3]=Hu,this[4]=Pu,this[5]=Ou,this[6]=Nu,this[7]=Wu,this[8]=Bu,this[9]=Du,this[10]=Gu,this[11]=_h,this[12]=Lu,this[13]=ku,this[14]=zu,this[15]=Xc,this.check()}toRowMajor(Tu){return Tu[0]=this[0],Tu[1]=this[4],Tu[2]=this[8],Tu[3]=this[12],Tu[4]=this[1],Tu[5]=this[5],Tu[6]=this[9],Tu[7]=this[13],Tu[8]=this[2],Tu[9]=this[6],Tu[10]=this[10],Tu[11]=this[14],Tu[12]=this[3],Tu[13]=this[7],Tu[14]=this[11],Tu[15]=this[15],Tu}identity(){return this.copy(In$1)}fromQuaternion(Tu){return function(Pu,Bu){var Lu=Bu[0],Ru=Bu[1],Ou=Bu[2],Du=Bu[3],ku=Lu+Lu,Fu=Ru+Ru,Nu=Ou+Ou,Gu=Lu*ku,zu=Ru*ku,Hu=Ru*Fu,Wu=Ou*ku,_h=Ou*Fu,Xc=Ou*Nu,ju=Du*ku,_c=Du*Fu,_f=Du*Nu;Pu[0]=1-Hu-Xc,Pu[1]=zu+_f,Pu[2]=Wu-_c,Pu[3]=0,Pu[4]=zu-_f,Pu[5]=1-Gu-Xc,Pu[6]=_h+ju,Pu[7]=0,Pu[8]=Wu+_c,Pu[9]=_h-ju,Pu[10]=1-Gu-Hu,Pu[11]=0,Pu[12]=0,Pu[13]=0,Pu[14]=0,Pu[15]=1}(this,Tu),this.check()}frustum({left:Tu,right:Pu,bottom:Bu,top:Lu,near:Ru,far:Ou}){return Ou===1/0?Tn._computeInfinitePerspectiveOffCenter(this,Tu,Pu,Bu,Lu,Ru):function(Du,ku,Fu,Nu,Gu,zu,Hu){var Wu=1/(Fu-ku),_h=1/(Gu-Nu),Xc=1/(zu-Hu);Du[0]=2*zu*Wu,Du[1]=0,Du[2]=0,Du[3]=0,Du[4]=0,Du[5]=2*zu*_h,Du[6]=0,Du[7]=0,Du[8]=(Fu+ku)*Wu,Du[9]=(Gu+Nu)*_h,Du[10]=(Hu+zu)*Xc,Du[11]=-1,Du[12]=0,Du[13]=0,Du[14]=Hu*zu*2*Xc,Du[15]=0}(this,Tu,Pu,Bu,Lu,Ru,Ou),this.check()}static _computeInfinitePerspectiveOffCenter(Tu,Pu,Bu,Lu,Ru,Ou){const Du=2*Ou/(Bu-Pu),ku=2*Ou/(Ru-Lu),Fu=(Bu+Pu)/(Bu-Pu),Nu=(Ru+Lu)/(Ru-Lu),Gu=-2*Ou;return Tu[0]=Du,Tu[1]=0,Tu[2]=0,Tu[3]=0,Tu[4]=0,Tu[5]=ku,Tu[6]=0,Tu[7]=0,Tu[8]=Fu,Tu[9]=Nu,Tu[10]=-1,Tu[11]=-1,Tu[12]=0,Tu[13]=0,Tu[14]=Gu,Tu[15]=0,Tu}lookAt(Tu,Pu,Bu){return arguments.length===1&&({eye:Tu,center:Pu,up:Bu}=Tu),function(Lu,Ru,Ou,Du){var ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c=Ru[0],_f=Ru[1],ep=Ru[2],tp=Du[0],op=Du[1],lp=Du[2],up=Ou[0],hp=Ou[1],np=Ou[2];Math.abs(_c-up)<1e-6&&Math.abs(_f-hp)<1e-6&&Math.abs(ep-np)<1e-6?function(rp){rp[0]=1,rp[1]=0,rp[2]=0,rp[3]=0,rp[4]=0,rp[5]=1,rp[6]=0,rp[7]=0,rp[8]=0,rp[9]=0,rp[10]=1,rp[11]=0,rp[12]=0,rp[13]=0,rp[14]=0,rp[15]=1}(Lu):(Wu=_c-up,_h=_f-hp,Xc=ep-np,ku=op*(Xc*=ju=1/Math.hypot(Wu,_h,Xc))-lp*(_h*=ju),Fu=lp*(Wu*=ju)-tp*Xc,Nu=tp*_h-op*Wu,(ju=Math.hypot(ku,Fu,Nu))?(ku*=ju=1/ju,Fu*=ju,Nu*=ju):(ku=0,Fu=0,Nu=0),Gu=_h*Nu-Xc*Fu,zu=Xc*ku-Wu*Nu,Hu=Wu*Fu-_h*ku,(ju=Math.hypot(Gu,zu,Hu))?(Gu*=ju=1/ju,zu*=ju,Hu*=ju):(Gu=0,zu=0,Hu=0),Lu[0]=ku,Lu[1]=Gu,Lu[2]=Wu,Lu[3]=0,Lu[4]=Fu,Lu[5]=zu,Lu[6]=_h,Lu[7]=0,Lu[8]=Nu,Lu[9]=Hu,Lu[10]=Xc,Lu[11]=0,Lu[12]=-(ku*_c+Fu*_f+Nu*ep),Lu[13]=-(Gu*_c+zu*_f+Hu*ep),Lu[14]=-(Wu*_c+_h*_f+Xc*ep),Lu[15]=1)}(this,Tu,Pu=Pu||[0,0,0],Bu=Bu||[0,1,0]),this.check()}ortho({left:Tu,right:Pu,bottom:Bu,top:Lu,near:Ru=.1,far:Ou=500}){return function(Du,ku,Fu,Nu,Gu,zu,Hu){var Wu=1/(ku-Fu),_h=1/(Nu-Gu),Xc=1/(zu-Hu);Du[0]=-2*Wu,Du[1]=0,Du[2]=0,Du[3]=0,Du[4]=0,Du[5]=-2*_h,Du[6]=0,Du[7]=0,Du[8]=0,Du[9]=0,Du[10]=2*Xc,Du[11]=0,Du[12]=(ku+Fu)*Wu,Du[13]=(Gu+Nu)*_h,Du[14]=(Hu+zu)*Xc,Du[15]=1}(this,Tu,Pu,Bu,Lu,Ru,Ou),this.check()}orthographic({fovy:Tu=45*Math.PI/180,aspect:Pu=1,focalDistance:Bu=1,near:Lu=.1,far:Ru=500}){if(Tu>2*Math.PI)throw Error("radians");const Ou=Tu/2,Du=Bu*Math.tan(Ou),ku=Du*Pu;return new Tn().ortho({left:-ku,right:ku,bottom:-Du,top:Du,near:Lu,far:Ru})}perspective({fovy:Tu,fov:Pu=45*Math.PI/180,aspect:Bu=1,near:Lu=.1,far:Ru=500}={}){if((Tu=Tu||Pu)>2*Math.PI)throw Error("radians");return function(Ou,Du,ku,Fu,Nu){var Gu,zu=1/Math.tan(Du/2);Ou[0]=zu/ku,Ou[1]=0,Ou[2]=0,Ou[3]=0,Ou[4]=0,Ou[5]=zu,Ou[6]=0,Ou[7]=0,Ou[8]=0,Ou[9]=0,Ou[11]=-1,Ou[12]=0,Ou[13]=0,Ou[15]=0,Nu!=null&&Nu!==1/0?(Gu=1/(Fu-Nu),Ou[10]=(Nu+Fu)*Gu,Ou[14]=2*Nu*Fu*Gu):(Ou[10]=-1,Ou[14]=-2*Fu)}(this,Tu,Bu,Lu,Ru),this.check()}determinant(){return Pu=(Tu=this)[0],Bu=Tu[1],Lu=Tu[2],Ru=Tu[3],Ou=Tu[4],Du=Tu[5],ku=Tu[6],Fu=Tu[7],Nu=Tu[8],Gu=Tu[9],zu=Tu[10],Hu=Tu[11],Wu=Tu[12],_h=Tu[13],Xc=Tu[14],ju=Tu[15],(Pu*Du-Bu*Ou)*(zu*ju-Hu*Xc)-(Pu*ku-Lu*Ou)*(Gu*ju-Hu*_h)+(Pu*Fu-Ru*Ou)*(Gu*Xc-zu*_h)+(Bu*ku-Lu*Du)*(Nu*ju-Hu*Wu)-(Bu*Fu-Ru*Du)*(Nu*Xc-zu*Wu)+(Lu*Fu-Ru*ku)*(Nu*_h-Gu*Wu);var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju}getScale(Tu=[-0,-0,-0]){return Tu[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),Tu[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),Tu[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),Tu}getTranslation(Tu=[-0,-0,-0]){return Tu[0]=this[12],Tu[1]=this[13],Tu[2]=this[14],Tu}getRotation(Tu=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Pu=null){const Bu=this.getScale(Pu||[-0,-0,-0]),Lu=1/Bu[0],Ru=1/Bu[1],Ou=1/Bu[2];return Tu[0]=this[0]*Lu,Tu[1]=this[1]*Ru,Tu[2]=this[2]*Ou,Tu[3]=0,Tu[4]=this[4]*Lu,Tu[5]=this[5]*Ru,Tu[6]=this[6]*Ou,Tu[7]=0,Tu[8]=this[8]*Lu,Tu[9]=this[9]*Ru,Tu[10]=this[10]*Ou,Tu[11]=0,Tu[12]=0,Tu[13]=0,Tu[14]=0,Tu[15]=1,Tu}getRotationMatrix3(Tu=[-0,-0,-0,-0,-0,-0,-0,-0,-0],Pu=null){const Bu=this.getScale(Pu||[-0,-0,-0]),Lu=1/Bu[0],Ru=1/Bu[1],Ou=1/Bu[2];return Tu[0]=this[0]*Lu,Tu[1]=this[1]*Ru,Tu[2]=this[2]*Ou,Tu[3]=this[4]*Lu,Tu[4]=this[5]*Ru,Tu[5]=this[6]*Ou,Tu[6]=this[8]*Lu,Tu[7]=this[9]*Ru,Tu[8]=this[10]*Ou,Tu}transpose(){return function(Tu,Pu){if(Tu===Pu){var Bu=Pu[1],Lu=Pu[2],Ru=Pu[3],Ou=Pu[6],Du=Pu[7],ku=Pu[11];Tu[1]=Pu[4],Tu[2]=Pu[8],Tu[3]=Pu[12],Tu[4]=Bu,Tu[6]=Pu[9],Tu[7]=Pu[13],Tu[8]=Lu,Tu[9]=Ou,Tu[11]=Pu[14],Tu[12]=Ru,Tu[13]=Du,Tu[14]=ku}else Tu[0]=Pu[0],Tu[1]=Pu[4],Tu[2]=Pu[8],Tu[3]=Pu[12],Tu[4]=Pu[1],Tu[5]=Pu[5],Tu[6]=Pu[9],Tu[7]=Pu[13],Tu[8]=Pu[2],Tu[9]=Pu[6],Tu[10]=Pu[10],Tu[11]=Pu[14],Tu[12]=Pu[3],Tu[13]=Pu[7],Tu[14]=Pu[11],Tu[15]=Pu[15]}(this,this),this.check()}invert(){var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c,_f,ep,tp,op,lp,up,hp,np,rp,ip,ap,sp,cp;return Tu=this,Bu=(Pu=this)[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Gu=Pu[8],zu=Pu[9],Hu=Pu[10],Wu=Pu[11],_h=Pu[12],Xc=Pu[13],ju=Pu[14],_c=Pu[15],(cp=(_f=Bu*ku-Lu*Du)*(sp=Hu*_c-Wu*ju)-(ep=Bu*Fu-Ru*Du)*(ap=zu*_c-Wu*Xc)+(tp=Bu*Nu-Ou*Du)*(ip=zu*ju-Hu*Xc)+(op=Lu*Fu-Ru*ku)*(rp=Gu*_c-Wu*_h)-(lp=Lu*Nu-Ou*ku)*(np=Gu*ju-Hu*_h)+(up=Ru*Nu-Ou*Fu)*(hp=Gu*Xc-zu*_h))&&(cp=1/cp,Tu[0]=(ku*sp-Fu*ap+Nu*ip)*cp,Tu[1]=(Ru*ap-Lu*sp-Ou*ip)*cp,Tu[2]=(Xc*up-ju*lp+_c*op)*cp,Tu[3]=(Hu*lp-zu*up-Wu*op)*cp,Tu[4]=(Fu*rp-Du*sp-Nu*np)*cp,Tu[5]=(Bu*sp-Ru*rp+Ou*np)*cp,Tu[6]=(ju*tp-_h*up-_c*ep)*cp,Tu[7]=(Gu*up-Hu*tp+Wu*ep)*cp,Tu[8]=(Du*ap-ku*rp+Nu*hp)*cp,Tu[9]=(Lu*rp-Bu*ap-Ou*hp)*cp,Tu[10]=(_h*lp-Xc*tp+_c*_f)*cp,Tu[11]=(zu*tp-Gu*lp-Wu*_f)*cp,Tu[12]=(ku*np-Du*ip-Fu*hp)*cp,Tu[13]=(Bu*ip-Lu*np+Ru*hp)*cp,Tu[14]=(Xc*ep-_h*op-ju*_f)*cp,Tu[15]=(Gu*op-zu*ep+Hu*_f)*cp),this.check()}multiplyLeft(Tu){return En$1(this,Tu,this),this.check()}multiplyRight(Tu){return En$1(this,this,Tu),this.check()}rotateX(Tu){var Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu;return Pu=this,Bu=this,Lu=Tu,Ru=Math.sin(Lu),Ou=Math.cos(Lu),Du=Bu[4],ku=Bu[5],Fu=Bu[6],Nu=Bu[7],Gu=Bu[8],zu=Bu[9],Hu=Bu[10],Wu=Bu[11],Bu!==Pu&&(Pu[0]=Bu[0],Pu[1]=Bu[1],Pu[2]=Bu[2],Pu[3]=Bu[3],Pu[12]=Bu[12],Pu[13]=Bu[13],Pu[14]=Bu[14],Pu[15]=Bu[15]),Pu[4]=Du*Ou+Gu*Ru,Pu[5]=ku*Ou+zu*Ru,Pu[6]=Fu*Ou+Hu*Ru,Pu[7]=Nu*Ou+Wu*Ru,Pu[8]=Gu*Ou-Du*Ru,Pu[9]=zu*Ou-ku*Ru,Pu[10]=Hu*Ou-Fu*Ru,Pu[11]=Wu*Ou-Nu*Ru,this.check()}rotateY(Tu){var Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu;return Pu=this,Bu=this,Lu=Tu,Ru=Math.sin(Lu),Ou=Math.cos(Lu),Du=Bu[0],ku=Bu[1],Fu=Bu[2],Nu=Bu[3],Gu=Bu[8],zu=Bu[9],Hu=Bu[10],Wu=Bu[11],Bu!==Pu&&(Pu[4]=Bu[4],Pu[5]=Bu[5],Pu[6]=Bu[6],Pu[7]=Bu[7],Pu[12]=Bu[12],Pu[13]=Bu[13],Pu[14]=Bu[14],Pu[15]=Bu[15]),Pu[0]=Du*Ou-Gu*Ru,Pu[1]=ku*Ou-zu*Ru,Pu[2]=Fu*Ou-Hu*Ru,Pu[3]=Nu*Ou-Wu*Ru,Pu[8]=Du*Ru+Gu*Ou,Pu[9]=ku*Ru+zu*Ou,Pu[10]=Fu*Ru+Hu*Ou,Pu[11]=Nu*Ru+Wu*Ou,this.check()}rotateZ(Tu){var Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu;return Pu=this,Bu=this,Lu=Tu,Ru=Math.sin(Lu),Ou=Math.cos(Lu),Du=Bu[0],ku=Bu[1],Fu=Bu[2],Nu=Bu[3],Gu=Bu[4],zu=Bu[5],Hu=Bu[6],Wu=Bu[7],Bu!==Pu&&(Pu[8]=Bu[8],Pu[9]=Bu[9],Pu[10]=Bu[10],Pu[11]=Bu[11],Pu[12]=Bu[12],Pu[13]=Bu[13],Pu[14]=Bu[14],Pu[15]=Bu[15]),Pu[0]=Du*Ou+Gu*Ru,Pu[1]=ku*Ou+zu*Ru,Pu[2]=Fu*Ou+Hu*Ru,Pu[3]=Nu*Ou+Wu*Ru,Pu[4]=Gu*Ou-Du*Ru,Pu[5]=zu*Ou-ku*Ru,Pu[6]=Hu*Ou-Fu*Ru,Pu[7]=Wu*Ou-Nu*Ru,this.check()}rotateXYZ([Tu,Pu,Bu]){return this.rotateX(Tu).rotateY(Pu).rotateZ(Bu)}rotateAxis(Tu,Pu){return function(Bu,Lu,Ru,Ou){var Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c,_f,ep,tp,op,lp,up,hp,np,rp,ip,ap,sp,cp=Ou[0],dp=Ou[1],fp=Ou[2],vp=Math.hypot(cp,dp,fp);vp<1e-6||(cp*=vp=1/vp,dp*=vp,fp*=vp,Du=Math.sin(Ru),Fu=1-(ku=Math.cos(Ru)),Nu=Lu[0],Gu=Lu[1],zu=Lu[2],Hu=Lu[3],Wu=Lu[4],_h=Lu[5],Xc=Lu[6],ju=Lu[7],_c=Lu[8],_f=Lu[9],ep=Lu[10],tp=Lu[11],op=cp*cp*Fu+ku,lp=dp*cp*Fu+fp*Du,up=fp*cp*Fu-dp*Du,hp=cp*dp*Fu-fp*Du,np=dp*dp*Fu+ku,rp=fp*dp*Fu+cp*Du,ip=cp*fp*Fu+dp*Du,ap=dp*fp*Fu-cp*Du,sp=fp*fp*Fu+ku,Bu[0]=Nu*op+Wu*lp+_c*up,Bu[1]=Gu*op+_h*lp+_f*up,Bu[2]=zu*op+Xc*lp+ep*up,Bu[3]=Hu*op+ju*lp+tp*up,Bu[4]=Nu*hp+Wu*np+_c*rp,Bu[5]=Gu*hp+_h*np+_f*rp,Bu[6]=zu*hp+Xc*np+ep*rp,Bu[7]=Hu*hp+ju*np+tp*rp,Bu[8]=Nu*ip+Wu*ap+_c*sp,Bu[9]=Gu*ip+_h*ap+_f*sp,Bu[10]=zu*ip+Xc*ap+ep*sp,Bu[11]=Hu*ip+ju*ap+tp*sp,Lu!==Bu&&(Bu[12]=Lu[12],Bu[13]=Lu[13],Bu[14]=Lu[14],Bu[15]=Lu[15]))}(this,this,Tu,Pu),this.check()}scale(Tu){return Array.isArray(Tu)?Mn$1(this,this,Tu):Mn$1(this,this,[Tu,Tu,Tu]),this.check()}translate(Tu){return function(Pu,Bu,Lu){var Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju=Lu[0],_c=Lu[1],_f=Lu[2];Bu===Pu?(Pu[12]=Bu[0]*ju+Bu[4]*_c+Bu[8]*_f+Bu[12],Pu[13]=Bu[1]*ju+Bu[5]*_c+Bu[9]*_f+Bu[13],Pu[14]=Bu[2]*ju+Bu[6]*_c+Bu[10]*_f+Bu[14],Pu[15]=Bu[3]*ju+Bu[7]*_c+Bu[11]*_f+Bu[15]):(Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Bu[4],Nu=Bu[5],Gu=Bu[6],zu=Bu[7],Hu=Bu[8],Wu=Bu[9],_h=Bu[10],Xc=Bu[11],Pu[0]=Ru,Pu[1]=Ou,Pu[2]=Du,Pu[3]=ku,Pu[4]=Fu,Pu[5]=Nu,Pu[6]=Gu,Pu[7]=zu,Pu[8]=Hu,Pu[9]=Wu,Pu[10]=_h,Pu[11]=Xc,Pu[12]=Ru*ju+Fu*_c+Hu*_f+Bu[12],Pu[13]=Ou*ju+Nu*_c+Wu*_f+Bu[13],Pu[14]=Du*ju+Gu*_c+_h*_f+Bu[14],Pu[15]=ku*ju+zu*_c+Xc*_f+Bu[15])}(this,this,Tu),this.check()}transform(Tu,Pu){return Tu.length===4?(en$1(Pu=function(Bu,Lu,Ru){var Ou=Lu[0],Du=Lu[1],ku=Lu[2],Fu=Lu[3];return Bu[0]=Ru[0]*Ou+Ru[4]*Du+Ru[8]*ku+Ru[12]*Fu,Bu[1]=Ru[1]*Ou+Ru[5]*Du+Ru[9]*ku+Ru[13]*Fu,Bu[2]=Ru[2]*Ou+Ru[6]*Du+Ru[10]*ku+Ru[14]*Fu,Bu[3]=Ru[3]*Ou+Ru[7]*Du+Ru[11]*ku+Ru[15]*Fu,Bu}(Pu||[-0,-0,-0,-0],Tu,this),4),Pu):this.transformAsPoint(Tu,Pu)}transformAsPoint(Tu,Pu){const{length:Bu}=Tu;switch(Bu){case 2:Lu=Pu||[-0,-0],Ou=this,Du=(Ru=Tu)[0],ku=Ru[1],Lu[0]=Ou[0]*Du+Ou[4]*ku+Ou[12],Lu[1]=Ou[1]*Du+Ou[5]*ku+Ou[13],Pu=Lu;break;case 3:Pu=hn$1(Pu||[-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}var Lu,Ru,Ou,Du,ku;return en$1(Pu,Tu.length),Pu}transformAsVector(Tu,Pu){switch(Tu.length){case 2:Pu=function(Bu,Lu,Ru){const Ou=Lu[0],Du=Lu[1],ku=Ru[3]*Ou+Ru[7]*Du||1;return Bu[0]=(Ru[0]*Ou+Ru[4]*Du)/ku,Bu[1]=(Ru[1]*Ou+Ru[5]*Du)/ku,Bu}(Pu||[-0,-0],Tu,this);break;case 3:Pu=pn(Pu||[-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}return en$1(Pu,Tu.length),Pu}makeRotationX(Tu){return this.identity().rotateX(Tu)}makeTranslation(Tu,Pu,Bu){return this.identity().translate([Tu,Pu,Bu])}transformPoint(Tu,Pu){return nn("Matrix4.transformPoint","3.0"),this.transformAsPoint(Tu,Pu)}transformVector(Tu,Pu){return nn("Matrix4.transformVector","3.0"),this.transformAsPoint(Tu,Pu)}transformDirection(Tu,Pu){return nn("Matrix4.transformDirection","3.0"),this.transformAsVector(Tu,Pu)}}var Pn=new gn,Rn=new gn,kn=function(){function Cu(Tu,Pu){Tu===void 0&&(Tu=[0,0,1]),Pu===void 0&&(Pu=0),this.normal=new gn,this.distance=-0,this.fromNormalDistance(Tu,Pu)}return Cu.prototype.fromNormalDistance=function(Tu,Pu){return this.normal.from(Tu).normalize(),this.distance=Pu,this},Cu.prototype.fromPointNormal=function(Tu,Pu){Tu=Pn.from(Tu),this.normal.from(Pu).normalize();var Bu=-this.normal.dot(Tu);return this.distance=Bu,this},Cu.prototype.fromCoefficients=function(Tu,Pu,Bu,Lu){return this.normal.set(Tu,Pu,Bu),this.distance=Lu,this},Cu.prototype.clone=function(){return new Cu(this.normal,this.distance)},Cu.prototype.equals=function(Tu){return this.distance===Tu.distance&&this.normal.equals(Tu.normal)},Cu.prototype.getPointDistance=function(Tu){return this.normal.dot(Tu)+this.distance},Cu.prototype.transform=function(Tu){var Pu=Rn.copy(this.normal).transformAsVector(Tu).normalize(),Bu=this.normal.scale(-this.distance).transform(Tu);return this.fromPointNormal(Bu,Pu)},Cu.prototype.projectPointOntoPlane=function(Tu,Pu){Pu===void 0&&(Pu=[0,0,0]),Tu=Pn.from(Tu);var Bu=this.getPointDistance(Tu),Lu=Rn.copy(this.normal).scale(Bu);return Tu.subtract(Lu).to(Pu)},Cu}(),Dn=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ln=[new gn([1,0,0]),new gn([0,1,0]),new gn([0,0,1])],On$1=new gn,Nn=new gn,Fn=function(){function Cu(Tu){Tu===void 0&&(Tu=[]),this.planes=Tu}return Object.defineProperty(Cu,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(Cu,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(Cu,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),Cu.prototype.fromBoundingSphere=function(Tu){this.planes.length=2*Ln.length;for(var Pu=Tu.center,Bu=Tu.radius,Lu=0,Ru=0,Ou=Ln;Ru<Ou.length;Ru++){var Du=Ou[Ru],ku=this.planes[Lu],Fu=this.planes[Lu+1];ku||(ku=this.planes[Lu]=new kn),Fu||(Fu=this.planes[Lu+1]=new kn);var Nu=On$1.copy(Du).scale(-Bu).add(Pu);ku.fromPointNormal(Nu,Du);var Gu=On$1.copy(Du).scale(Bu).add(Pu),zu=Nn.copy(Du).negate();Fu.fromPointNormal(Gu,zu),Lu+=2}return this},Cu.prototype.computeVisibilityWithPlaneMask=function(Tu,Pu){if(Pu===Cu.MASK_OUTSIDE||Pu===Cu.MASK_INSIDE)return Pu;for(var Bu=Cu.MASK_INSIDE,Lu=this.planes,Ru=0;Ru<this.planes.length;++Ru){var Ou=Ru<31?1<<Ru:0;if(!(Ru<31&&(Pu&Ou)==0)){var Du=Lu[Ru],ku=Tu.intersectPlane(Du);if(ku===Dn.OUTSIDE)return Cu.MASK_OUTSIDE;ku===Dn.INTERSECTING&&(Bu|=Ou)}}return Bu},Cu}();function Qn$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Tu[3],Du=Tu[4],ku=Tu[5],Fu=Tu[6],Nu=Tu[7],Gu=Tu[8],zu=Pu[0],Hu=Pu[1],Wu=Pu[2],_h=Pu[3],Xc=Pu[4],ju=Pu[5],_c=Pu[6],_f=Pu[7],ep=Pu[8];return Cu[0]=zu*Bu+Hu*Ou+Wu*Fu,Cu[1]=zu*Lu+Hu*Du+Wu*Nu,Cu[2]=zu*Ru+Hu*ku+Wu*Gu,Cu[3]=_h*Bu+Xc*Ou+ju*Fu,Cu[4]=_h*Lu+Xc*Du+ju*Nu,Cu[5]=_h*Ru+Xc*ku+ju*Gu,Cu[6]=_c*Bu+_f*Ou+ep*Fu,Cu[7]=_c*Lu+_f*Du+ep*Nu,Cu[8]=_c*Ru+_f*ku+ep*Gu,Cu}function Vn(Cu,Tu,Pu){var Bu=Pu[0],Lu=Pu[1];return Cu[0]=Bu*Tu[0],Cu[1]=Bu*Tu[1],Cu[2]=Bu*Tu[2],Cu[3]=Lu*Tu[3],Cu[4]=Lu*Tu[4],Cu[5]=Lu*Tu[5],Cu[6]=Tu[6],Cu[7]=Tu[7],Cu[8]=Tu[8],Cu}function _n$1(){var Cu=new on$1(4);return on$1!=Float32Array&&(Cu[0]=0,Cu[1]=0,Cu[2]=0),Cu[3]=1,Cu}function Hn(Cu,Tu,Pu){Pu*=.5;var Bu=Math.sin(Pu);return Cu[0]=Bu*Tu[0],Cu[1]=Bu*Tu[1],Cu[2]=Bu*Tu[2],Cu[3]=Math.cos(Pu),Cu}function qn$1(Cu,Tu,Pu){var Bu=Tu[0],Lu=Tu[1],Ru=Tu[2],Ou=Tu[3],Du=Pu[0],ku=Pu[1],Fu=Pu[2],Nu=Pu[3];return Cu[0]=Bu*Nu+Ou*Du+Lu*Fu-Ru*ku,Cu[1]=Lu*Nu+Ou*ku+Ru*Du-Bu*Fu,Cu[2]=Ru*Nu+Ou*Fu+Bu*ku-Lu*Du,Cu[3]=Ou*Nu-Bu*Du-Lu*ku-Ru*Fu,Cu}function zn$1(Cu,Tu,Pu,Bu){var Lu,Ru,Ou,Du,ku,Fu=Tu[0],Nu=Tu[1],Gu=Tu[2],zu=Tu[3],Hu=Pu[0],Wu=Pu[1],_h=Pu[2],Xc=Pu[3];return(Ru=Fu*Hu+Nu*Wu+Gu*_h+zu*Xc)<0&&(Ru=-Ru,Hu=-Hu,Wu=-Wu,_h=-_h,Xc=-Xc),1-Ru>1e-6?(Lu=Math.acos(Ru),Ou=Math.sin(Lu),Du=Math.sin((1-Bu)*Lu)/Ou,ku=Math.sin(Bu*Lu)/Ou):(Du=1-Bu,ku=Bu),Cu[0]=Du*Fu+ku*Hu,Cu[1]=Du*Nu+ku*Wu,Cu[2]=Du*Gu+ku*_h,Cu[3]=Du*zu+ku*Xc,Cu}function Kn$1(Cu,Tu){var Pu,Bu=Tu[0]+Tu[4]+Tu[8];if(Bu>0)Pu=Math.sqrt(Bu+1),Cu[3]=.5*Pu,Pu=.5/Pu,Cu[0]=(Tu[5]-Tu[7])*Pu,Cu[1]=(Tu[6]-Tu[2])*Pu,Cu[2]=(Tu[1]-Tu[3])*Pu;else{var Lu=0;Tu[4]>Tu[0]&&(Lu=1),Tu[8]>Tu[3*Lu+Lu]&&(Lu=2);var Ru=(Lu+1)%3,Ou=(Lu+2)%3;Pu=Math.sqrt(Tu[3*Lu+Lu]-Tu[3*Ru+Ru]-Tu[3*Ou+Ou]+1),Cu[Lu]=.5*Pu,Pu=.5/Pu,Cu[3]=(Tu[3*Ru+Ou]-Tu[3*Ou+Ru])*Pu,Cu[Ru]=(Tu[3*Ru+Lu]+Tu[3*Lu+Ru])*Pu,Cu[Ou]=(Tu[3*Ou+Lu]+Tu[3*Lu+Ou])*Pu}return Cu}var Un,jn,Gn,Wn,Xn$1=function(Cu,Tu,Pu){return Cu[0]=Tu[0]+Pu[0],Cu[1]=Tu[1]+Pu[1],Cu[2]=Tu[2]+Pu[2],Cu[3]=Tu[3]+Pu[3],Cu},Yn=function(Cu,Tu,Pu){return Cu[0]=Tu[0]*Pu,Cu[1]=Tu[1]*Pu,Cu[2]=Tu[2]*Pu,Cu[3]=Tu[3]*Pu,Cu},Zn$1=function(Cu,Tu){return Cu[0]*Tu[0]+Cu[1]*Tu[1]+Cu[2]*Tu[2]+Cu[3]*Tu[3]},Jn$1=function(Cu,Tu,Pu,Bu){var Lu=Tu[0],Ru=Tu[1],Ou=Tu[2],Du=Tu[3];return Cu[0]=Lu+Bu*(Pu[0]-Lu),Cu[1]=Ru+Bu*(Pu[1]-Ru),Cu[2]=Ou+Bu*(Pu[2]-Ou),Cu[3]=Du+Bu*(Pu[3]-Du),Cu},$n=function(Cu){var Tu=Cu[0],Pu=Cu[1],Bu=Cu[2],Lu=Cu[3];return Math.hypot(Tu,Pu,Bu,Lu)},er$1=function(Cu){var Tu=Cu[0],Pu=Cu[1],Bu=Cu[2],Lu=Cu[3];return Tu*Tu+Pu*Pu+Bu*Bu+Lu*Lu},tr$1=function(Cu,Tu){var Pu=Tu[0],Bu=Tu[1],Lu=Tu[2],Ru=Tu[3],Ou=Pu*Pu+Bu*Bu+Lu*Lu+Ru*Ru;return Ou>0&&(Ou=1/Math.sqrt(Ou)),Cu[0]=Pu*Ou,Cu[1]=Bu*Ou,Cu[2]=Lu*Ou,Cu[3]=Ru*Ou,Cu},ir$1=(Un=sn(),jn=an$1(1,0,0),Gn=an$1(0,1,0),function(Cu,Tu,Pu){var Bu=ln(Tu,Pu);return Bu<-.999999?(un$1(Un,jn,Tu),dn$1(Un)<1e-6&&un$1(Un,Gn,Tu),function(Lu,Ru){var Ou=Ru[0],Du=Ru[1],ku=Ru[2],Fu=Ou*Ou+Du*Du+ku*ku;Fu>0&&(Fu=1/Math.sqrt(Fu)),Lu[0]=Ru[0]*Fu,Lu[1]=Ru[1]*Fu,Lu[2]=Ru[2]*Fu}(Un,Un),Hn(Cu,Un,Math.PI),Cu):Bu>.999999?(Cu[0]=0,Cu[1]=0,Cu[2]=0,Cu[3]=1,Cu):(un$1(Un,Tu,Pu),Cu[0]=Un[0],Cu[1]=Un[1],Cu[2]=Un[2],Cu[3]=1+Bu,tr$1(Cu,Cu))});_n$1(),_n$1(),Wn=new on$1(9),on$1!=Float32Array&&(Wn[1]=0,Wn[2]=0,Wn[3]=0,Wn[5]=0,Wn[6]=0,Wn[7]=0),Wn[0]=1,Wn[4]=1,Wn[8]=1;const nr$1=[0,0,0,1];class rr extends Ji$1{constructor(Tu=0,Pu=0,Bu=0,Lu=1){super(-0,-0,-0,-0),Array.isArray(Tu)&&arguments.length===1?this.copy(Tu):this.set(Tu,Pu,Bu,Lu)}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this.check()}set(Tu,Pu,Bu,Lu){return this[0]=Tu,this[1]=Pu,this[2]=Bu,this[3]=Lu,this.check()}fromMatrix3(Tu){return Kn$1(this,Tu),this.check()}identity(){return function(Tu){Tu[0]=0,Tu[1]=0,Tu[2]=0,Tu[3]=1}(this),this.check()}fromAxisRotation(Tu,Pu){return Hn(this,Tu,Pu),this.check()}setAxisAngle(Tu,Pu){return this.fromAxisRotation(Tu,Pu)}get ELEMENTS(){return 4}get x(){return this[0]}set x(Tu){this[0]=$i(Tu)}get y(){return this[1]}set y(Tu){this[1]=$i(Tu)}get z(){return this[2]}set z(Tu){this[2]=$i(Tu)}get w(){return this[3]}set w(Tu){this[3]=$i(Tu)}len(){return $n(this)}lengthSquared(){return er$1(this)}dot(Tu,Pu){if(Pu!==void 0)throw new Error("Quaternion.dot only takes one argument");return Zn$1(this,Tu)}rotationTo(Tu,Pu){return ir$1(this,Tu,Pu),this.check()}add(Tu,Pu){if(Pu!==void 0)throw new Error("Quaternion.add only takes one argument");return Xn$1(this,this,Tu),this.check()}calculateW(){return function(Tu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2];Tu[0]=Bu,Tu[1]=Lu,Tu[2]=Ru,Tu[3]=Math.sqrt(Math.abs(1-Bu*Bu-Lu*Lu-Ru*Ru))}(this,this),this.check()}conjugate(){return function(Tu,Pu){Tu[0]=-Pu[0],Tu[1]=-Pu[1],Tu[2]=-Pu[2],Tu[3]=Pu[3]}(this,this),this.check()}invert(){return function(Tu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Bu*Bu+Lu*Lu+Ru*Ru+Ou*Ou,ku=Du?1/Du:0;Tu[0]=-Bu*ku,Tu[1]=-Lu*ku,Tu[2]=-Ru*ku,Tu[3]=Ou*ku}(this,this),this.check()}lerp(Tu,Pu,Bu){return Jn$1(this,Tu,Pu,Bu),this.check()}multiplyRight(Tu,Pu){return Gi(!Pu),qn$1(this,this,Tu),this.check()}multiplyLeft(Tu,Pu){return Gi(!Pu),qn$1(this,Tu,this),this.check()}normalize(){const Tu=this.len(),Pu=Tu>0?1/Tu:0;return this[0]=this[0]*Pu,this[1]=this[1]*Pu,this[2]=this[2]*Pu,this[3]=this[3]*Pu,Tu===0&&(this[3]=1),this.check()}rotateX(Tu){return function(Pu,Bu,Lu){Lu*=.5;var Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Math.sin(Lu),Nu=Math.cos(Lu);Pu[0]=Ru*Nu+ku*Fu,Pu[1]=Ou*Nu+Du*Fu,Pu[2]=Du*Nu-Ou*Fu,Pu[3]=ku*Nu-Ru*Fu}(this,this,Tu),this.check()}rotateY(Tu){return function(Pu,Bu,Lu){Lu*=.5;var Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Math.sin(Lu),Nu=Math.cos(Lu);Pu[0]=Ru*Nu-Du*Fu,Pu[1]=Ou*Nu+ku*Fu,Pu[2]=Du*Nu+Ru*Fu,Pu[3]=ku*Nu-Ou*Fu}(this,this,Tu),this.check()}rotateZ(Tu){return function(Pu,Bu,Lu){Lu*=.5;var Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Math.sin(Lu),Nu=Math.cos(Lu);Pu[0]=Ru*Nu+Ou*Fu,Pu[1]=Ou*Nu-Ru*Fu,Pu[2]=Du*Nu+ku*Fu,Pu[3]=ku*Nu-Du*Fu}(this,this,Tu),this.check()}scale(Tu){return Yn(this,this,Tu),this.check()}slerp(Tu,Pu,Bu){switch(arguments.length){case 1:({start:Tu=nr$1,target:Pu,ratio:Bu}=arguments[0]);break;case 2:[Pu,Bu]=arguments,Tu=this}return zn$1(this,Tu,Pu,Bu),this.check()}transformVector4(Tu,Pu=Tu){return function(Bu,Lu,Ru){var Ou=Lu[0],Du=Lu[1],ku=Lu[2],Fu=Ru[0],Nu=Ru[1],Gu=Ru[2],zu=Ru[3],Hu=zu*Ou+Nu*ku-Gu*Du,Wu=zu*Du+Gu*Ou-Fu*ku,_h=zu*ku+Fu*Du-Nu*Ou,Xc=-Fu*Ou-Nu*Du-Gu*ku;Bu[0]=Hu*zu+Xc*-Fu+Wu*-Gu-_h*-Nu,Bu[1]=Wu*zu+Xc*-Nu+_h*-Fu-Hu*-Gu,Bu[2]=_h*zu+Xc*-Gu+Hu*-Nu-Wu*-Fu,Bu[3]=Lu[3]}(Pu,Tu,this),en$1(Pu,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(Tu,Pu){return this.setAxisAngle(Tu,Pu)}premultiply(Tu,Pu){return this.multiplyLeft(Tu,Pu)}multiply(Tu,Pu){return this.multiplyRight(Tu,Pu)}}const or=Object.freeze([1,0,0,0,1,0,0,0,1]),sr$1=Object.freeze([0,0,0,0,0,0,0,0,0]),ar=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),lr={};class ur extends wn$1{static get IDENTITY(){return lr.IDENTITY=lr.IDENTITY||Object.freeze(new ur(or)),lr.IDENTITY}static get ZERO(){return lr.ZERO=lr.ZERO||Object.freeze(new ur(sr$1)),lr.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ar}constructor(Tu){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(Tu)?this.copy(Tu):this.identity()}copy(Tu){return this[0]=Tu[0],this[1]=Tu[1],this[2]=Tu[2],this[3]=Tu[3],this[4]=Tu[4],this[5]=Tu[5],this[6]=Tu[6],this[7]=Tu[7],this[8]=Tu[8],this.check()}set(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu){return this[0]=Tu,this[1]=Pu,this[2]=Bu,this[3]=Lu,this[4]=Ru,this[5]=Ou,this[6]=Du,this[7]=ku,this[8]=Fu,this.check()}setRowMajor(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu){return this[0]=Tu,this[1]=Lu,this[2]=Du,this[3]=Pu,this[4]=Ru,this[5]=ku,this[6]=Bu,this[7]=Ou,this[8]=Fu,this.check()}determinant(){return Pu=(Tu=this)[0],Bu=Tu[1],Lu=Tu[2],Ru=Tu[3],Ou=Tu[4],Du=Tu[5],ku=Tu[6],Fu=Tu[7],Nu=Tu[8],Pu*(Nu*Ou-Du*Fu)+Bu*(-Nu*Ru+Du*ku)+Lu*(Fu*Ru-Ou*ku);var Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu}identity(){return this.copy(or)}fromQuaternion(Tu){return function(Pu,Bu){var Lu=Bu[0],Ru=Bu[1],Ou=Bu[2],Du=Bu[3],ku=Lu+Lu,Fu=Ru+Ru,Nu=Ou+Ou,Gu=Lu*ku,zu=Ru*ku,Hu=Ru*Fu,Wu=Ou*ku,_h=Ou*Fu,Xc=Ou*Nu,ju=Du*ku,_c=Du*Fu,_f=Du*Nu;Pu[0]=1-Hu-Xc,Pu[3]=zu-_f,Pu[6]=Wu+_c,Pu[1]=zu+_f,Pu[4]=1-Gu-Xc,Pu[7]=_h-ju,Pu[2]=Wu-_c,Pu[5]=_h+ju,Pu[8]=1-Gu-Hu}(this,Tu),this.check()}transpose(){return function(Tu,Pu){if(Tu===Pu){var Bu=Pu[1],Lu=Pu[2],Ru=Pu[5];Tu[1]=Pu[3],Tu[2]=Pu[6],Tu[3]=Bu,Tu[5]=Pu[7],Tu[6]=Lu,Tu[7]=Ru}else Tu[0]=Pu[0],Tu[1]=Pu[3],Tu[2]=Pu[6],Tu[3]=Pu[1],Tu[4]=Pu[4],Tu[5]=Pu[7],Tu[6]=Pu[2],Tu[7]=Pu[5],Tu[8]=Pu[8]}(this,this),this.check()}invert(){return function(Tu,Pu){var Bu=Pu[0],Lu=Pu[1],Ru=Pu[2],Ou=Pu[3],Du=Pu[4],ku=Pu[5],Fu=Pu[6],Nu=Pu[7],Gu=Pu[8],zu=Gu*Du-ku*Nu,Hu=-Gu*Ou+ku*Fu,Wu=Nu*Ou-Du*Fu,_h=Bu*zu+Lu*Hu+Ru*Wu;_h&&(_h=1/_h,Tu[0]=zu*_h,Tu[1]=(-Gu*Lu+Ru*Nu)*_h,Tu[2]=(ku*Lu-Ru*Du)*_h,Tu[3]=Hu*_h,Tu[4]=(Gu*Bu-Ru*Fu)*_h,Tu[5]=(-ku*Bu+Ru*Ou)*_h,Tu[6]=Wu*_h,Tu[7]=(-Nu*Bu+Lu*Fu)*_h,Tu[8]=(Du*Bu-Lu*Ou)*_h)}(this,this),this.check()}multiplyLeft(Tu){return Qn$1(this,Tu,this),this.check()}multiplyRight(Tu){return Qn$1(this,this,Tu),this.check()}rotate(Tu){return function(Pu,Bu,Lu){var Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Bu[4],Nu=Bu[5],Gu=Bu[6],zu=Bu[7],Hu=Bu[8],Wu=Math.sin(Lu),_h=Math.cos(Lu);Pu[0]=_h*Ru+Wu*ku,Pu[1]=_h*Ou+Wu*Fu,Pu[2]=_h*Du+Wu*Nu,Pu[3]=_h*ku-Wu*Ru,Pu[4]=_h*Fu-Wu*Ou,Pu[5]=_h*Nu-Wu*Du,Pu[6]=Gu,Pu[7]=zu,Pu[8]=Hu}(this,this,Tu),this.check()}scale(Tu){return Array.isArray(Tu)?Vn(this,this,Tu):Vn(this,this,[Tu,Tu,Tu]),this.check()}translate(Tu){return function(Pu,Bu,Lu){var Ru=Bu[0],Ou=Bu[1],Du=Bu[2],ku=Bu[3],Fu=Bu[4],Nu=Bu[5],Gu=Bu[6],zu=Bu[7],Hu=Bu[8],Wu=Lu[0],_h=Lu[1];Pu[0]=Ru,Pu[1]=Ou,Pu[2]=Du,Pu[3]=ku,Pu[4]=Fu,Pu[5]=Nu,Pu[6]=Wu*Ru+_h*ku+Gu,Pu[7]=Wu*Ou+_h*Fu+zu,Pu[8]=Wu*Du+_h*Nu+Hu}(this,this,Tu),this.check()}transform(Tu,Pu){switch(Tu.length){case 2:Pu=function(Bu,Lu,Ru){var Ou=Lu[0],Du=Lu[1];return Bu[0]=Ru[0]*Ou+Ru[3]*Du+Ru[6],Bu[1]=Ru[1]*Ou+Ru[4]*Du+Ru[7],Bu}(Pu||[-0,-0],Tu,this);break;case 3:Pu=cn$1(Pu||[-0,-0,-0],Tu,this);break;case 4:Pu=function(Bu,Lu,Ru){const Ou=Lu[0],Du=Lu[1],ku=Lu[2];return Bu[0]=Ru[0]*Ou+Ru[3]*Du+Ru[6]*ku,Bu[1]=Ru[1]*Ou+Ru[4]*Du+Ru[7]*ku,Bu[2]=Ru[2]*Ou+Ru[5]*Du+Ru[8]*ku,Bu[3]=Lu[3],Bu}(Pu||[-0,-0,-0,-0],Tu,this);break;default:throw new Error("Illegal vector")}return en$1(Pu,Tu.length),Pu}transformVector(Tu,Pu){return nn("Matrix3.transformVector"),this.transform(Tu,Pu)}transformVector2(Tu,Pu){return nn("Matrix3.transformVector"),this.transform(Tu,Pu)}transformVector3(Tu,Pu){return nn("Matrix3.transformVector"),this.transform(Tu,Pu)}}var hr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),cr=new gn,dr=new gn,pr=function(){function Cu(Tu,Pu){Tu===void 0&&(Tu=[0,0,0]),Pu===void 0&&(Pu=0),this.radius=-0,this.center=new gn,this.fromCenterRadius(Tu,Pu)}return Cu.prototype.fromCenterRadius=function(Tu,Pu){return this.center.from(Tu),this.radius=Pu,this},Cu.prototype.fromCornerPoints=function(Tu,Pu){return Pu=cr.from(Pu),this.center=new gn().from(Tu).add(Pu).scale(.5),this.radius=this.center.distance(Pu),this},Cu.prototype.equals=function(Tu){return this===Tu||Boolean(Tu)&&this.center.equals(Tu.center)&&this.radius===Tu.radius},Cu.prototype.clone=function(){return new Cu(this.center,this.radius)},Cu.prototype.union=function(Tu){var Pu=this.center,Bu=this.radius,Lu=Tu.center,Ru=Tu.radius,Ou=cr.copy(Lu).subtract(Pu),Du=Ou.magnitude();if(Bu>=Du+Ru)return this.clone();if(Ru>=Du+Bu)return Tu.clone();var ku=.5*(Bu+Du+Ru);return dr.copy(Ou).scale((-Bu+ku)/Du).add(Pu),this.center.copy(dr),this.radius=ku,this},Cu.prototype.expand=function(Tu){var Pu=(Tu=cr.from(Tu)).subtract(this.center).magnitude();return Pu>this.radius&&(this.radius=Pu),this},Cu.prototype.transform=function(Tu){this.center.transform(Tu);var Pu=function(Bu,Lu){var Ru=Lu[0],Ou=Lu[1],Du=Lu[2],ku=Lu[4],Fu=Lu[5],Nu=Lu[6],Gu=Lu[8],zu=Lu[9],Hu=Lu[10];return Bu[0]=Math.hypot(Ru,Ou,Du),Bu[1]=Math.hypot(ku,Fu,Nu),Bu[2]=Math.hypot(Gu,zu,Hu),Bu}(cr,Tu);return this.radius=Math.max(Pu[0],Math.max(Pu[1],Pu[2]))*this.radius,this},Cu.prototype.distanceSquaredTo=function(Tu){var Pu=this.distanceTo(Tu);return Pu*Pu},Cu.prototype.distanceTo=function(Tu){var Pu=(Tu=cr.from(Tu)).subtract(this.center);return Math.max(0,Pu.len()-this.radius)},Cu.prototype.intersectPlane=function(Tu){var Pu=this.center,Bu=this.radius,Lu=Tu.normal.dot(Pu)+Tu.distance;return Lu<-Bu?hr.OUTSIDE:Lu<Bu?hr.INTERSECTING:hr.INSIDE},Cu}(),fr=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Ar=new gn,gr=new gn,mr=new gn,vr=new gn,yr=new gn,br=new gn,xr=new gn,wr=0,Er=1,Mr=2,Ir=3,Sr$1=4,Cr=5,Br=6,Tr=7,Pr=8,Rr=function(){function Cu(Tu,Pu){Tu===void 0&&(Tu=[0,0,0]),Pu===void 0&&(Pu=[0,0,0,0,0,0,0,0,0]),this.center=new gn().from(Tu),this.halfAxes=new ur(Pu)}return Object.defineProperty(Cu.prototype,"halfSize",{get:function(){var Tu=this.halfAxes.getColumn(0),Pu=this.halfAxes.getColumn(1),Bu=this.halfAxes.getColumn(2);return[new gn(Tu).len(),new gn(Pu).len(),new gn(Bu).len()]},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"quaternion",{get:function(){var Tu=this.halfAxes.getColumn(0),Pu=this.halfAxes.getColumn(1),Bu=this.halfAxes.getColumn(2),Lu=new gn(Tu).normalize(),Ru=new gn(Pu).normalize(),Ou=new gn(Bu).normalize();return new rr().fromMatrix3(new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Lu,!0),Ru,!0),Ou,!0)))},enumerable:!1,configurable:!0}),Cu.prototype.fromCenterHalfSizeQuaternion=function(Tu,Pu,Bu){var Lu=new rr(Bu),Ru=new ur().fromQuaternion(Lu);return Ru[0]=Ru[0]*Pu[0],Ru[1]=Ru[1]*Pu[0],Ru[2]=Ru[2]*Pu[0],Ru[3]=Ru[3]*Pu[1],Ru[4]=Ru[4]*Pu[1],Ru[5]=Ru[5]*Pu[1],Ru[6]=Ru[6]*Pu[2],Ru[7]=Ru[7]*Pu[2],Ru[8]=Ru[8]*Pu[2],this.center=new gn().from(Tu),this.halfAxes=Ru,this},Cu.prototype.clone=function(){return new Cu(this.center,this.halfAxes)},Cu.prototype.equals=function(Tu){return this===Tu||Boolean(Tu)&&this.center.equals(Tu.center)&&this.halfAxes.equals(Tu.halfAxes)},Cu.prototype.getBoundingSphere=function(Tu){Tu===void 0&&(Tu=new pr);var Pu=this.halfAxes,Bu=Pu.getColumn(0,mr),Lu=Pu.getColumn(1,vr),Ru=Pu.getColumn(2,yr),Ou=Ar.copy(Bu).add(Lu).add(Ru);return Tu.center.copy(this.center),Tu.radius=Ou.magnitude(),Tu},Cu.prototype.intersectPlane=function(Tu){var Pu=this.center,Bu=Tu.normal,Lu=this.halfAxes,Ru=Bu.x,Ou=Bu.y,Du=Bu.z,ku=Math.abs(Ru*Lu[wr]+Ou*Lu[Er]+Du*Lu[Mr])+Math.abs(Ru*Lu[Ir]+Ou*Lu[Sr$1]+Du*Lu[Cr])+Math.abs(Ru*Lu[Br]+Ou*Lu[Tr]+Du*Lu[Pr]),Fu=Bu.dot(Pu)+Tu.distance;return Fu<=-ku?fr.OUTSIDE:Fu>=ku?fr.INSIDE:fr.INTERSECTING},Cu.prototype.distanceTo=function(Tu){return Math.sqrt(this.distanceSquaredTo(Tu))},Cu.prototype.distanceSquaredTo=function(Tu){var Pu=gr.from(Tu).subtract(this.center),Bu=this.halfAxes,Lu=Bu.getColumn(0,mr),Ru=Bu.getColumn(1,vr),Ou=Bu.getColumn(2,yr),Du=Lu.magnitude(),ku=Ru.magnitude(),Fu=Ou.magnitude();Lu.normalize(),Ru.normalize(),Ou.normalize();var Nu,Gu=0;return(Nu=Math.abs(Pu.dot(Lu))-Du)>0&&(Gu+=Nu*Nu),(Nu=Math.abs(Pu.dot(Ru))-ku)>0&&(Gu+=Nu*Nu),(Nu=Math.abs(Pu.dot(Ou))-Fu)>0&&(Gu+=Nu*Nu),Gu},Cu.prototype.computePlaneDistances=function(Tu,Pu,Bu){Bu===void 0&&(Bu=[-0,-0]);var Lu=Number.POSITIVE_INFINITY,Ru=Number.NEGATIVE_INFINITY,Ou=this.center,Du=this.halfAxes,ku=Du.getColumn(0,mr),Fu=Du.getColumn(1,vr),Nu=Du.getColumn(2,yr),Gu=br.copy(ku).add(Fu).add(Nu).add(Ou),zu=xr.copy(Gu).subtract(Tu),Hu=Pu.dot(zu);return Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Gu.copy(Ou).add(ku).add(Fu).subtract(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Gu.copy(Ou).add(ku).subtract(Fu).add(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Gu.copy(Ou).add(ku).subtract(Fu).subtract(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Ou.copy(Gu).subtract(ku).add(Fu).add(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Ou.copy(Gu).subtract(ku).add(Fu).subtract(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Ou.copy(Gu).subtract(ku).subtract(Fu).add(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Ou.copy(Gu).subtract(ku).subtract(Fu).subtract(Nu),zu.copy(Gu).subtract(Tu),Hu=Pu.dot(zu),Lu=Math.min(Hu,Lu),Ru=Math.max(Hu,Ru),Bu[0]=Lu,Bu[1]=Ru,Bu},Cu.prototype.transform=function(Tu){this.center.transformAsPoint(Tu);var Pu=this.halfAxes.getColumn(0,mr);Pu.transformAsPoint(Tu);var Bu=this.halfAxes.getColumn(1,vr);Bu.transformAsPoint(Tu);var Lu=this.halfAxes.getColumn(2,yr);return Lu.transformAsPoint(Tu),this.halfAxes=new ur(t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Pu,!0),Bu,!0),Lu,!0)),this},Cu}();function kr$1(Cu,Tu){if(Cu.box)return function(Pu,Bu){var Lu=new gn(Pu[0],Pu[1],Pu[2]);Bu.transform(Lu,Lu);var Ru=[];if(Pu.length===10){var Ou=Pu.slice(3,6),Du=new rr;Du.fromArray(Pu,6);var ku=new gn([1,0,0]),Fu=new gn([0,1,0]),Nu=new gn([0,0,1]);ku.transformByQuaternion(Du),ku.scale(Ou[0]),Fu.transformByQuaternion(Du),Fu.scale(Ou[1]),Nu.transformByQuaternion(Du),Nu.scale(Ou[2]),Ru=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],ku.toArray(),!0),Fu.toArray(),!0),Nu.toArray(),!0)}else Ru=t$3.__spreadArray(t$3.__spreadArray(t$3.__spreadArray([],Pu.slice(3,6),!0),Pu.slice(6,9),!0),Pu.slice(9,12),!0);var Gu=Bu.transformAsVector(Ru.slice(0,3),[0,0,0]),zu=Bu.transformAsVector(Ru.slice(3,6),[0,0,0]),Hu=Bu.transformAsVector(Ru.slice(6,9),[0,0,0]),Wu=new ur([Gu[0],Gu[1],Gu[2],zu[0],zu[1],zu[2],Hu[0],Hu[1],Hu[2]]);return new Rr(Lu,Wu)}(Cu.box,Tu);throw new Error("3D Tile: boundingVolume must only can be box")}function Dr$1(Cu,Tu){if(Cu.dynamicScreenSpaceError&&Cu.dynamicScreenSpaceErrorComputedDensity){var Pu=Cu.dynamicScreenSpaceErrorComputedDensity,Bu=Cu.dynamicScreenSpaceErrorFactor;return function(Lu,Ru){var Ou=Lu*Ru;return 1-Math.exp(-Ou*Ou)}(Tu,Pu)*Bu}return 0}function Lr$1(Cu,Tu,Pu){var Bu=new TextDecoder("utf8"),Lu=new Uint8Array(Cu,Tu,Pu);return Bu.decode(Lu)}function Or$1(Cu,Tu,Pu){return Pu===void 0&&(Pu=0),Pu=function(Bu,Lu,Ru){Ru===void 0&&(Ru=0);var Ou=Bu.header,Du=Ou.featureTableJsonByteLength,ku=Ou.featureTableBinaryByteLength,Fu=Ou.batchLength;if(Bu.featureTableJson={BATCH_LENGTH:Fu||0},Du>0){var Nu=Lr$1(Lu,Ru,Du);Bu.featureTableJson=JSON.parse(Nu)}return Ru+=Du,Bu.featureTableBinary=new Uint8Array(Lu,Ru,ku),Ru+=ku}(Cu,Tu,Pu),Pu=function(Bu,Lu,Ru){Ru===void 0&&(Ru=0);var Ou=Bu.header,Du=Ou.batchTableJsonByteLength,ku=Ou.batchTableBinaryByteLength;if(Du>0){var Fu=Lr$1(Lu,Ru,Du);Bu.batchTableJson=JSON.parse(Fu),Ru+=Du,ku>0&&(Bu.batchTableBinary=new Uint8Array(Lu,Ru,ku),Bu.batchTableBinary=new Uint8Array(Bu.batchTableBinary),Ru+=ku)}return Ru}(Cu,Tu,Pu)}function Nr(Cu,Tu,Pu){Pu===void 0&&(Pu=0);var Bu=Cu.byteOffset+Cu.byteLength-Pu;if(Bu===0)throw new Error("glTF byte length must be greater than 0.");return Cu.rotateYtoZ=!0,Cu.gltfUpAxis="Y",Cu.gltfArrayBuffer=function(Lu,Ru,Ou){var Du=Ou!==void 0?new Uint8Array(Lu).subarray(Ru,Ru+Ou):new Uint8Array(Lu).subarray(Ru);return new Uint8Array(Du).buffer}(Tu,Pu,Bu),Cu.gltfByteOffset=0,Cu.gltfByteLength=Bu,Pu%4==0||console.warn("".concat(Cu.type,": embedded glb is not aligned to a 4-byte boundary.")),Cu.byteOffset+Cu.byteLength}function Fr(Cu,Tu,Pu){Pu=function(Lu,Ru,Ou){Ou===void 0&&(Ou=0);var Du=new DataView(Ru);if(Lu.magic=Du.getUint32(Ou,!0),Ou+=4,Lu.version=Du.getUint32(Ou,!0),Ou+=4,Lu.byteLength=Du.getUint32(Ou,!0),Ou+=4,Lu.version!==1)throw new Error("3D Tile Version ".concat(Lu.version," not supported"));return Ou}(Cu,Tu,Pu),Pu=function(Lu,Ru,Ou){Ou===void 0&&(Ou=0);var Du,ku=new DataView(Ru);Lu.header=Lu.header||{};var Fu=ku.getUint32(Ou,!0);Ou+=4;var Nu=ku.getUint32(Ou,!0);Ou+=4;var Gu=ku.getUint32(Ou,!0);Ou+=4;var zu=ku.getUint32(Ou,!0);return Ou+=4,Gu>=570425344?(Ou-=8,Du=Fu,Gu=Nu,zu=0,Fu=0,Nu=0,console.warn("b3dm tile in legacy format.")):zu>=570425344&&(Ou-=4,Du=Gu,Gu=Fu,zu=Nu,Fu=0,Nu=0,console.warn("b3dm tile in legacy format.")),Lu.header.featureTableJsonByteLength=Fu,Lu.header.featureTableBinaryByteLength=Nu,Lu.header.batchTableJsonByteLength=Gu,Lu.header.batchTableBinaryByteLength=zu,Lu.header.batchLength=Du,Ou}(Cu,Tu,Pu),Pu=Nr(Cu,Tu,Pu=Or$1(Cu,Tu,Pu));var Bu=Cu.featureTableJson.RTC_CENTER;return Bu&&Number.isFinite(Bu.byteOffset)&&(Cu.rtcCenter=new Float32Array(Cu.featureTableBinary.buffer,Cu.featureTableBinary.buffer.byteOffset+Bu.byteOffset,3)),Pu}var Qr=function(){function Cu(Tu,Pu,Bu){this.header=Pu,this.tileset=Tu,this.parent=Bu,this.children=[],this.contentState="UNLOADED",this.transform=this.header.transform?new Tn(this.header.transform.slice()):new Tn;var Lu=this.parent&&this.parent.computedTransform?this.parent.computedTransform.clone():Tu.modelMatrix.clone();this.computedTransform=new Tn(Lu).multiplyRight(this.transform),this.boundingVolume=kr$1(this.header.boundingVolume,this.computedTransform),this.depth=this.parent?this.parent.depth+1:0,this.distanceToCamera=0,this.centerZDepth=0,this.screenSpaceError=0,this.shouldRefine=!1,this.visibilityPlaneMask=Fn.MASK_INDETERMINATE,this.visible=!1,this.selectionDepth=0,this.frameNumber=0,this.touchedFrameNumber=0,this.selectedFrameNumber=0,this.requestedFrameNumber=0}return Object.defineProperty(Cu.prototype,"id",{get:function(){return this.header.id},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"refine",{get:function(){return this.header.refine||this.parent&&this.parent.refine||"REPLACE"},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"type",{get:function(){return this.header.type},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"contentUrl",{get:function(){if(this.header.content.uri){var Tu=this.tileset.b3dmMapping.b3dm_base_url;Tu=/\/$/.test(Tu)?Tu:Tu+"/";var Pu=this.tileset.b3dmMapping.b3dm_url[this.header.content.uri];Pu=/^\//.test(Pu)?Pu.slice(1):Pu;var Bu=/^https?:/.test(Pu)?Pu:Tu+Pu;if(Bu.indexOf("http")!==-1&&Bu.indexOf("https")===-1){var Lu=Bu.slice(4);Bu="https"+Lu}return Bu}return this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"lodMetricType",{get:function(){return this.header.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"lodMetricValue",{get:function(){return this.header.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"hasEmptyContent",{get:function(){return!this.header.contentUrl},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"selected",{get:function(){return this.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"hasRenderContent",{get:function(){return!this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"hasChildren",{get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"contentReady",{get:function(){return this.contentState==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"contentAvailable",{get:function(){return Boolean(this.contentReady&&this.hasRenderContent||!1)},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"hasUnloadedContent",{get:function(){return this.hasRenderContent&&this.contentUnloaded},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"contentUnloaded",{get:function(){return this.contentState==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"contentFailed",{get:function(){return this.contentState==="FAILED"},enumerable:!1,configurable:!0}),Cu.prototype.getScreenSpaceError=function(Tu,Pu){if(this.tileset.type==="TILES3D")return function(Bu,Lu,Ru){var Ou=Bu.tileset,Du=Bu.parent&&Bu.parent.lodMetricValue||Bu.lodMetricValue,ku=Ru?Du:Bu.lodMetricValue;if(ku===0)return 0;var Fu=Math.max(Bu.distanceToCamera,1e-7),Nu=Ou.options.viewDistanceScale,Gu=ku*Lu.height*Nu/(Fu*Lu.sseDenominator);return Gu-Dr$1(Ou,Fu)}(this,Tu,Pu);throw new Error("Unsupported tileset type")},Cu.prototype.getPriority=function(){var Tu=this.tileset.traverser,Pu=Tu.options.skipLevelOfDetail,Bu=this.refine==="ADD"||Pu;if(Bu&&!this.visible||this.tileset.frameNumber-this.touchedFrameNumber>=1||this.contentState==="UNLOADED")return-1;var Lu=this.parent,Ru=Lu&&(!Bu||this.screenSpaceError===0)?Lu.screenSpaceError:this.screenSpaceError,Ou=Tu.root?Tu.root.screenSpaceError:0;return Math.max(Ou-Ru,0)},Cu.prototype.loadContent=function(){var Tu=this;return this.hasEmptyContent||!this.contentUrl?Promise.resolve(!1):this.content?Promise.resolve(!0):(this.contentState="LOADING",this.tileset.requestScheduler.scheduleRequest(this.id,function(){return Tu.getPriority()}).then(function(Pu){return Pu?it(Tu.contentUrl,{responseType:"arraybuffer",allowHosts:Tu.tileset.options.allowHosts,networkSubscribe:Tu.tileset.options.networkSubscribe,requestProxy:Tu.tileset.options.requestProxy}).then(function(Bu){return Bu.body}).then(function(Bu){return Fr(Lu={byteOffset:0,type:"b3dm"},Bu,Lu.byteOffset),Lu;var Lu}).then(function(Bu){return Tu.content=Bu,Tu.tileset.options.contentLoader(Tu).then(function(){return Tu.contentState="READY",Pu.done(),!0})}).catch(function(Bu){return Tu.contentState="FAILED",Pu.done(),Promise.reject(Bu)}):(Tu.contentState="UNLOADED",Promise.resolve(!1))}))},Cu.prototype.unloadContent=function(){this.content=void 0,this.contentState="UNLOADED"},Cu.prototype.updateVisibility=function(Tu){if(this.frameNumber!==Tu.frameNumber){var Pu=this.parent,Bu=Pu?Pu.visibilityPlaneMask:Fn.MASK_INDETERMINATE,Lu=Pu?Pu.computedTransform:this.tileset.modelMatrix;this.updateTransform(Lu),this.distanceToCamera=this.distanceToTile(Tu),this.screenSpaceError=this.getScreenSpaceError(Tu,!1),this.visibilityPlaneMask=this.visibility(Tu,Bu),this.visible=this.visibilityPlaneMask!==Fn.MASK_OUTSIDE,this.frameNumber=Tu.frameNumber}},Cu.prototype.visibility=function(Tu,Pu){return Tu.cullingVolume.computeVisibilityWithPlaneMask(this.boundingVolume,Pu)},Cu.prototype.distanceToTile=function(Tu){return Math.sqrt(Math.max(this.boundingVolume.distanceSquaredTo(Tu.camera.position),0))},Cu.prototype.updateTransform=function(Tu){Tu===void 0&&(Tu=new Tn);var Pu=Tu.clone().multiplyRight(this.transform);!Pu.equals(this.computedTransform)&&(this.computedTransform.copy(Pu),this.boundingVolume=kr$1(this.header.boundingVolume,this.computedTransform))},Cu}(),Vr=function(){function Cu(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(Cu.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Cu.prototype.get=function(Tu){return this.array[Tu]},Cu.prototype.set=function(Tu,Pu){Tu>=this.length&&(this._length=Tu+1),this.map.has(this.array[Tu])&&this.map.delete(this.array[Tu]),this.array[Tu]=Pu,this.map.set(Pu,Tu)},Cu.prototype.delete=function(Tu){var Pu=this.map.get(Tu);Pu!==void 0&&Pu>=0&&(this.array.splice(Pu,1),this.map.delete(Tu),this._length--)},Cu.prototype.push=function(Tu){if(!this.map.has(Tu)){var Pu=this._length++;this.array[Pu]=Tu,this.map.set(Tu,Pu)}},Cu.prototype.pop=function(){var Tu=this.array[--this._length];return this.map.delete(Tu),Tu},Cu.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},Cu.prototype.find=function(Tu){return this.map.has(Tu)},Cu}(),_r=function(){function Cu(Tu){this.options=Tu,this._traversalStack=new Vr,this._emptyTraversalStack=new Vr,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return Cu.prototype.traverse=function(Tu,Pu){this.root=Tu,this.reset(),this.updateTile(Tu,Pu),this._frameNumber=Pu.frameNumber,this.executeTraversal(Tu,Pu)},Cu.prototype.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},Cu.prototype.executeTraversal=function(Tu,Pu){var Bu=this._traversalStack;for(Tu.selectionDepth=1,Bu.push(Tu);Bu.length>0;){var Lu=Bu.pop(),Ru=!1;if(this.canTraverse(Lu,Pu)){this.updateChildTiles(Lu,Pu);var Ou=Lu.hasRenderContent?Lu.selectionDepth+1:Lu.selectionDepth;Ru=this.updateAndPushChildren(Lu,Pu,Bu,Ou)}var Du=Lu.parent,ku=Boolean(!Du||Du.shouldRefine),Fu=!Ru;Lu.hasRenderContent?Lu.refine==="ADD"?(this.loadTile(Lu,Pu),this.selectTile(Lu,Pu)):Lu.refine==="REPLACE"&&(this.loadTile(Lu,Pu),Fu&&this.selectTile(Lu,Pu)):(this.emptyTiles[Lu.id]=Lu,this.loadTile(Lu,Pu),Fu&&this.selectTile(Lu,Pu)),this.touchTile(Lu,Pu),Lu.shouldRefine=Ru&&ku}this.options.onTraversalEnd(Pu)},Cu.prototype.updateChildTiles=function(Tu,Pu){for(var Bu=0,Lu=Tu.children;Bu<Lu.length;Bu++){var Ru=Lu[Bu];this.updateTile(Ru,Pu)}return!0},Cu.prototype.updateAndPushChildren=function(Tu,Pu,Bu,Lu){var Ru=this.options,Ou=Ru.loadSiblings,Du=Ru.skipLevelOfDetail,ku=Tu.children;ku.sort(this.compareDistanceToCamera.bind(this));for(var Fu=Tu.refine==="REPLACE"&&Tu.hasRenderContent&&!Du,Nu=!1,Gu=!0,zu=0,Hu=ku;zu<Hu.length;zu++){var Wu=Hu[zu];if(Wu.selectionDepth=Lu,Wu.visible?(Bu.find(Wu)&&Bu.delete(Wu),Bu.push(Wu),Nu=!0):(Fu||Ou)&&(this.loadTile(Wu,Pu),this.touchTile(Wu,Pu)),Fu){var _h=void 0;if(_h=Wu.hasRenderContent?Wu.contentAvailable:this.executeEmptyTraversal(Wu,Pu),!(Gu=Gu&&_h))return!1}}return Nu||(Gu=!1),Gu},Cu.prototype.updateTile=function(Tu,Pu){this.updateTileVisibility(Tu,Pu)},Cu.prototype.selectTile=function(Tu,Pu){this.shouldSelectTile(Tu)&&(Tu.selectedFrameNumber=Pu.frameNumber,this.selectedTiles[Tu.id]=Tu)},Cu.prototype.loadTile=function(Tu,Pu){this.shouldLoadTile(Tu)&&(Tu.requestedFrameNumber=Pu.frameNumber,this.requestedTiles[Tu.id]=Tu)},Cu.prototype.touchTile=function(Tu,Pu){Tu.tileset.cache.touch(Tu),Tu.touchedFrameNumber=Pu.frameNumber},Cu.prototype.canTraverse=function(Tu,Pu,Bu,Lu){return Bu===void 0&&(Bu=!1),Lu===void 0&&(Lu=!1),!!Tu.hasChildren&&!(!Lu&&!Tu.visible)&&this.shouldRefine(Tu,Pu,Bu)},Cu.prototype.shouldLoadTile=function(Tu){var Pu=!this.options.maxDepth||Tu.depth<=this.options.maxDepth;return Tu.hasUnloadedContent&&Pu},Cu.prototype.shouldSelectTile=function(Tu){var Pu=!this.options.maxDepth||Tu.depth<=this.options.maxDepth;return Tu.contentAvailable&&!this.options.skipLevelOfDetail&&Pu},Cu.prototype.shouldRefine=function(Tu,Pu,Bu){var Lu=Tu.screenSpaceError;return Bu&&(Lu=Tu.getScreenSpaceError(Pu,!0)),Lu>this.options.maxScreenSpaceError},Cu.prototype.updateTileVisibility=function(Tu,Pu){if(Tu.updateVisibility(Pu),Tu.visible){var Bu=Tu.children.length>0;this.meetsScreenSpaceErrorEarly(Tu,Pu)?Tu.visible=!1:Tu.refine!=="REPLACE"||!Bu||this.anyChildrenVisible(Tu,Pu)||(Tu.visible=!1)}},Cu.prototype.meetsScreenSpaceErrorEarly=function(Tu,Pu){var Bu=Tu.parent;return!(!Bu||Bu.refine!=="ADD")&&!this.shouldRefine(Tu,Pu,!0)},Cu.prototype.compareDistanceToCamera=function(Tu,Pu){return Pu.distanceToCamera===0&&Tu.distanceToCamera===0?Pu.centerZDepth-Tu.centerZDepth:Pu.distanceToCamera-Tu.distanceToCamera},Cu.prototype.anyChildrenVisible=function(Tu,Pu){for(var Bu=!1,Lu=0,Ru=Tu.children;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Ou.updateVisibility(Pu),Bu=Bu||Ou.visible}return Bu},Cu.prototype.everyChildrenVisibleIsLoaded=function(Tu){for(var Pu=!0,Bu=0,Lu=Tu.children;Bu<Lu.length;Bu++){var Ru=Lu[Bu];Ru.visible&&Ru.contentState!=="READY"&&(Pu=!1)}return Pu},Cu.prototype.executeEmptyTraversal=function(Tu,Pu){var Bu=!0,Lu=this._emptyTraversalStack;for(Lu.push(Tu);Lu.length>0&&Bu;){var Ru=Lu.pop();if(this.updateTile(Ru,Pu),Ru.visible||this.loadTile(Ru,Pu),this.touchTile(Ru,Pu),!Ru.hasRenderContent&&this.canTraverse(Ru,Pu,!1,!0))for(var Ou=0,Du=Ru.children;Ou<Du.length;Ou++){var ku=Du[Ou];Lu.find(ku)&&Lu.delete(ku),Lu.push(ku)}else Ru.contentAvailable||(Bu=!1)}return Bu},Cu}();function Hr(Cu){for(var Tu=[],Pu=0,Bu=Object.keys(Cu);Pu<Bu.length;Pu++){var Lu=Bu[Pu];Tu.push(Cu[Lu])}return Tu}var qr=function(){function Cu(Tu,Pu){var Bu=this;this.rawJson=Tu,this.b3dmMapping=Tu.b3dmMapping,this.options=Pu,this.traverser=new _r({loadSiblings:!1,maxScreenSpaceError:this.options.maxScreenSpaceError,skipLevelOfDetail:!1,maxDepth:this.options.maxDepth,onTraversalEnd:function(Nu){return Bu.onTraversalEnd(Nu)}}),this.cache=new xn,this.requestScheduler=new vn$1({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.frameNumber=0,this.pendingCount=0,this._tiles={},this.selectedTiles=[],this.requestedTiles=[],this.memoryUsageInBytes=0,this.root=new Qr(this,Tu.root);for(var Lu=[this.root];Lu.length>0;)for(var Ru=Lu.pop(),Ou=0,Du=Ru.header.children||[];Ou<Du.length;Ou++){var ku=Du[Ou],Fu=new Qr(this,ku,Ru);Fu.depth=Ru.depth+1,Ru.children.push(Fu),Lu.push(Fu)}}return Object.defineProperty(Cu.prototype,"maxMemoryUsage",{get:function(){return this.options.maxMemoryUsage},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"asset",{get:function(){return this.rawJson.asset},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"type",{get:function(){return this.rawJson.type},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"basePath",{get:function(){return this.rawJson.basePath},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"modelMatrix",{get:function(){return this.options.modelMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"geometricError",{get:function(){return this.rawJson.geometricError},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"lodMetricType",{get:function(){return this.rawJson.lodMetricType},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"lodMetricValue",{get:function(){return this.rawJson.lodMetricValue},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"refine",{get:function(){return this.rawJson.root.refine},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"tiles",{get:function(){return Hr(this._tiles)},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"floorInfo",{get:function(){return this.rawJson.floorInfo||this.rawJson.floor_info||[]},enumerable:!1,configurable:!0}),Cu.prototype.reset=function(){for(var Tu=[this.root];Tu.length>0;){for(var Pu=Tu.pop(),Bu=0,Lu=Pu.children;Bu<Lu.length;Bu++){var Ru=Lu[Bu];Tu.push(Ru)}this.cache.unloadTile(Pu),this.unloadTile(Pu)}this.cache.reset(),this.traverser.reset(),this.selectedTiles=[],this.requestedTiles=[]},Cu.prototype.isLoaded=function(){return this.pendingCount===0&&this.frameNumber!==0},Cu.prototype.onTraversalEnd=function(Tu){var Pu=this,Bu=new gn(Tu.camera.position);this.selectedTiles=this.options.onTraversalComplete(Hr(this.traverser.selectedTiles)),this.requestedTiles=Hr(this.traverser.requestedTiles).slice().sort(function(Fu,Nu){return Fu.boundingVolume.center.distanceTo(Bu)-Nu.boundingVolume.center.distanceTo(Bu)});for(var Lu=0,Ru=this.selectedTiles;Lu<Ru.length;Lu++){var Ou=Ru[Lu];this._tiles[Ou.id]=Ou}for(var Du=0,ku=this.requestedTiles;Du<ku.length;Du++)(Ou=ku[Du]).contentUnloaded&&this.loadTile(Ou);this.cache.unloadTiles(function(){return Pu.memoryUsageInBytes>1024*Pu.maxMemoryUsage*1024},function(Fu){return Pu.unloadTile(Fu)})},Cu.prototype.loadTile=function(Tu){var Pu=this;this.pendingCount++,Tu.loadContent().catch(function(Bu){var Lu=Bu.message||Bu.toString();return console.error("A 3D tile failed to load: ".concat(Tu.id," ").concat(Lu)),Pu.options.onTileError(Tu,Lu),!1}).then(function(Bu){Pu.pendingCount--,Bu&&(Pu.cache.add(Tu,function(){Tu.content&&(Pu.memoryUsageInBytes+=Tu.content.byteLength||0)}),Pu.options.onTileLoad(Tu))})},Cu.prototype.unloadTile=function(Tu){this.memoryUsageInBytes-=Tu.content&&Tu.content.byteLength||0,this.options.onTileUnload(Tu),Tu.unloadContent()},Cu}();function zr(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Kr(){return(zr()+zr()+"-"+zr()+"-4"+zr().substr(0,3)+"-"+zr()+"-"+zr()+zr()+zr()).toLowerCase()}function Ur(Cu,Tu){var Pu;return Cu.content&&(Cu.contentUrl="".concat(Tu,"/").concat(Cu.content.uri||Cu.content.url)),Cu.id=(Pu=Cu.contentUrl)!==null&&Pu!==void 0?Pu:"empty:"+Kr(),Cu.lodMetricType="geometricError",Cu.lodMetricValue=Cu.geometricError,Cu.transformMatrix=Cu.transform,Cu.type=Cu.contentUrl?"SCENEGRAPH":"EMPTY",Cu.refine=function(Bu){switch(Bu){case"REPLACE":case"replace":return"REPLACE";case"ADD":case"add":return"ADD";default:throw new Error("refine ".concat(Bu," is not supported."))}}(Cu.refine),Cu}function jr(Cu,Tu){var Pu,Bu=JSON.parse(JSON.stringify(Cu));return Bu.basePath=Tu,Bu.root=function(Lu,Ru){Lu=Ur(Lu,Ru);var Ou=[];for(Ou.push(Lu);Ou.length>0;)for(var Du=0,ku=(Ou.pop()||{}).children||[];Du<ku.length;Du++){var Fu=ku[Du];Ur(Fu,Ru),Ou.push(Fu)}return Lu}(Bu.root,Tu),Bu.type="TILES3D",Bu.lodMetricType="geometricError",Bu.lodMetricValue=((Pu=Bu.root)===null||Pu===void 0?void 0:Pu.lodMetricValue)||0,Bu}var Gr=new(function(){function Cu(gp){e$2.Loader.call(this,gp),this.dracoLoader=null,this.ddsLoader=null}function Tu(){var gp={};return{get:function(mp){return gp[mp]},add:function(mp,Sp){gp[mp]=Sp},remove:function(mp){delete gp[mp]},removeAll:function(){gp={}}}}Cu.prototype=Object.assign(Object.create(e$2.Loader.prototype),{constructor:Cu,load:function(gp,mp,Sp,xp){var Ep,$p=this;Ep=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:e$2.LoaderUtils.extractUrlBase(gp),$p.manager.itemStart(gp);var Ip=function(qp){xp?xp(qp):console.error(qp),$p.manager.itemError(gp),$p.manager.itemEnd(gp)},Np=new e$2.FileLoader($p.manager);Np.setPath(this.path),Np.setResponseType("arraybuffer"),Np.setRequestHeader(this.requestHeader),$p.crossOrigin==="use-credentials"&&Np.setWithCredentials(!0),Np.load(gp,function(qp){try{$p.parse(qp,Ep,function(Vp){mp(Vp),$p.manager.itemEnd(gp)},Ip)}catch(Vp){Ip(Vp)}},Sp,Ip)},setDRACOLoader:function(gp){return this.dracoLoader=gp,this},setDDSLoader:function(gp){return this.ddsLoader=gp,this},parse:function(gp,mp,Sp,xp){var Ep,$p={};if(typeof gp=="string")Ep=gp;else if(e$2.LoaderUtils.decodeText(new Uint8Array(gp,0,4))===Du){try{$p[Pu.KHR_BINARY_GLTF]=new Nu(gp)}catch(bp){return void(xp&&xp(bp))}Ep=$p[Pu.KHR_BINARY_GLTF].content}else Ep=e$2.LoaderUtils.decodeText(new Uint8Array(gp));var Ip=JSON.parse(Ep);if(Ip.asset===void 0||Ip.asset.version[0]<2)xp&&xp(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Ip.extensionsUsed)for(var Np=0;Np<Ip.extensionsUsed.length;++Np){var qp=Ip.extensionsUsed[Np],Vp=Ip.extensionsRequired||[];switch(qp){case Pu.KHR_LIGHTS_PUNCTUAL:$p[qp]=new Lu(Ip);break;case Pu.KHR_MATERIALS_CLEARCOAT:$p[qp]=new Ou;break;case Pu.KHR_MATERIALS_UNLIT:$p[qp]=new Ru;break;case Pu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:$p[qp]=new Wu;break;case Pu.KHR_DRACO_MESH_COMPRESSION:$p[qp]=new Gu(Ip,this.dracoLoader);break;case Pu.MSFT_TEXTURE_DDS:$p[qp]=new Bu(this.ddsLoader);break;case Pu.KHR_TEXTURE_TRANSFORM:$p[qp]=new zu;break;case Pu.KHR_MESH_QUANTIZATION:$p[qp]=new _h;break;default:Vp.indexOf(qp)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+qp+'".')}}var pp=new Rp(Ip,$p,{path:mp||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});pp.fileLoader.setRequestHeader(this.requestHeader),pp.parse(Sp,xp)}}});var Pu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function Bu(gp){if(!gp)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Pu.MSFT_TEXTURE_DDS,this.ddsLoader=gp}function Lu(gp){this.name=Pu.KHR_LIGHTS_PUNCTUAL;var mp=gp.extensions&&gp.extensions[Pu.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=mp.lights||[]}function Ru(){this.name=Pu.KHR_MATERIALS_UNLIT}function Ou(){this.name=Pu.KHR_MATERIALS_CLEARCOAT}Lu.prototype.loadLight=function(gp){var mp,Sp=this.lightDefs[gp],xp=new e$2.Color(16777215);Sp.color!==void 0&&xp.fromArray(Sp.color);var Ep=Sp.range!==void 0?Sp.range:0;switch(Sp.type){case"directional":(mp=new e$2.DirectionalLight(xp)).target.position.set(0,0,-1),mp.add(mp.target);break;case"point":(mp=new e$2.PointLight(xp)).distance=Ep;break;case"spot":(mp=new e$2.SpotLight(xp)).distance=Ep,Sp.spot=Sp.spot||{},Sp.spot.innerConeAngle=Sp.spot.innerConeAngle!==void 0?Sp.spot.innerConeAngle:0,Sp.spot.outerConeAngle=Sp.spot.outerConeAngle!==void 0?Sp.spot.outerConeAngle:Math.PI/4,mp.angle=Sp.spot.outerConeAngle,mp.penumbra=1-Sp.spot.innerConeAngle/Sp.spot.outerConeAngle,mp.target.position.set(0,0,-1),mp.add(mp.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+Sp.type+'".')}return mp.position.set(0,0,0),mp.decay=2,Sp.intensity!==void 0&&(mp.intensity=Sp.intensity),mp.name=Sp.name||"light_"+gp,Promise.resolve(mp)},Ru.prototype.getMaterialType=function(){return e$2.MeshBasicMaterial},Ru.prototype.extendParams=function(gp,mp,Sp){var xp=[];gp.color=new e$2.Color(1,1,1),gp.opacity=1;var Ep=mp.pbrMetallicRoughness;if(Ep){if(Array.isArray(Ep.baseColorFactor)){var $p=Ep.baseColorFactor;gp.color.fromArray($p),gp.opacity=$p[3]}Ep.baseColorTexture!==void 0&&xp.push(Sp.assignTexture(gp,"map",Ep.baseColorTexture))}return Promise.all(xp)},Ou.prototype.getMaterialType=function(){return e$2.MeshPhysicalMaterial},Ou.prototype.extendParams=function(gp,mp,Sp){var xp=[],Ep=mp.extensions[this.name];if(Ep.clearcoatFactor!==void 0&&(gp.clearcoat=Ep.clearcoatFactor),Ep.clearcoatTexture!==void 0&&xp.push(Sp.assignTexture(gp,"clearcoatMap",Ep.clearcoatTexture)),Ep.clearcoatRoughnessFactor!==void 0&&(gp.clearcoatRoughness=Ep.clearcoatRoughnessFactor),Ep.clearcoatRoughnessTexture!==void 0&&xp.push(Sp.assignTexture(gp,"clearcoatRoughnessMap",Ep.clearcoatRoughnessTexture)),Ep.clearcoatNormalTexture!==void 0&&(xp.push(Sp.assignTexture(gp,"clearcoatNormalMap",Ep.clearcoatNormalTexture)),Ep.clearcoatNormalTexture.scale!==void 0)){var $p=Ep.clearcoatNormalTexture.scale;gp.clearcoatNormalScale=new e$2.Vector2($p,$p)}return Promise.all(xp)};var Du="glTF",ku=1313821514,Fu=5130562;function Nu(gp){this.name=Pu.KHR_BINARY_GLTF,this.content=null,this.body=null;var mp=new DataView(gp,0,12);if(this.header={magic:e$2.LoaderUtils.decodeText(new Uint8Array(gp.slice(0,4))),version:mp.getUint32(4,!0),length:mp.getUint32(8,!0)},this.header.magic!==Du)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var Sp=new DataView(gp,12),xp=0;xp<Sp.byteLength;){var Ep=Sp.getUint32(xp,!0);xp+=4;var $p=Sp.getUint32(xp,!0);if(xp+=4,$p===ku){var Ip=new Uint8Array(gp,12+xp,Ep);this.content=e$2.LoaderUtils.decodeText(Ip)}else if($p===Fu){var Np=12+xp;this.body=gp.slice(Np,Np+Ep)}xp+=Ep}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function Gu(gp,mp){if(!mp)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pu.KHR_DRACO_MESH_COMPRESSION,this.json=gp,this.dracoLoader=mp,this.dracoLoader.preload()}function zu(){this.name=Pu.KHR_TEXTURE_TRANSFORM}function Hu(gp){e$2.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var mp=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),Sp=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),xp=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Ep=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),$p=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Ip={specular:{value:new e$2.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Ip,this.onBeforeCompile=function(Np){for(var qp in Ip)Np.uniforms[qp]=Ip[qp];Np.fragmentShader=Np.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),Np.fragmentShader=Np.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),Np.fragmentShader=Np.fragmentShader.replace("#include <roughnessmap_pars_fragment>",mp),Np.fragmentShader=Np.fragmentShader.replace("#include <metalnessmap_pars_fragment>",Sp),Np.fragmentShader=Np.fragmentShader.replace("#include <roughnessmap_fragment>",xp),Np.fragmentShader=Np.fragmentShader.replace("#include <metalnessmap_fragment>",Ep),Np.fragmentShader=Np.fragmentShader.replace("#include <lights_physical_fragment>",$p)},Object.defineProperties(this,{specular:{get:function(){return Ip.specular.value},set:function(Np){Ip.specular.value=Np}},specularMap:{get:function(){return Ip.specularMap.value},set:function(Np){Ip.specularMap.value=Np}},glossiness:{get:function(){return Ip.glossiness.value},set:function(Np){Ip.glossiness.value=Np}},glossinessMap:{get:function(){return Ip.glossinessMap.value},set:function(Np){Ip.glossinessMap.value=Np,Np?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(gp)}function Wu(){return{name:Pu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Hu},extendParams:function(gp,mp,Sp){var xp=mp.extensions[this.name];gp.color=new e$2.Color(1,1,1),gp.opacity=1;var Ep=[];if(Array.isArray(xp.diffuseFactor)){var $p=xp.diffuseFactor;gp.color.fromArray($p),gp.opacity=$p[3]}if(xp.diffuseTexture!==void 0&&Ep.push(Sp.assignTexture(gp,"map",xp.diffuseTexture)),gp.emissive=new e$2.Color(0,0,0),gp.glossiness=xp.glossinessFactor!==void 0?xp.glossinessFactor:1,gp.specular=new e$2.Color(1,1,1),Array.isArray(xp.specularFactor)&&gp.specular.fromArray(xp.specularFactor),xp.specularGlossinessTexture!==void 0){var Ip=xp.specularGlossinessTexture;Ep.push(Sp.assignTexture(gp,"glossinessMap",Ip)),Ep.push(Sp.assignTexture(gp,"specularMap",Ip))}return Promise.all(Ep)},createMaterial:function(gp){var mp=new Hu(gp);return mp.fog=!0,mp.color=gp.color,mp.map=gp.map===void 0?null:gp.map,mp.lightMap=null,mp.lightMapIntensity=1,mp.aoMap=gp.aoMap===void 0?null:gp.aoMap,mp.aoMapIntensity=1,mp.emissive=gp.emissive,mp.emissiveIntensity=1,mp.emissiveMap=gp.emissiveMap===void 0?null:gp.emissiveMap,mp.bumpMap=gp.bumpMap===void 0?null:gp.bumpMap,mp.bumpScale=1,mp.normalMap=gp.normalMap===void 0?null:gp.normalMap,mp.normalMapType=e$2.TangentSpaceNormalMap,gp.normalScale&&(mp.normalScale=gp.normalScale),mp.displacementMap=null,mp.displacementScale=1,mp.displacementBias=0,mp.specularMap=gp.specularMap===void 0?null:gp.specularMap,mp.specular=gp.specular,mp.glossinessMap=gp.glossinessMap===void 0?null:gp.glossinessMap,mp.glossiness=gp.glossiness,mp.alphaMap=null,mp.envMap=gp.envMap===void 0?null:gp.envMap,mp.envMapIntensity=1,mp.refractionRatio=.98,mp}}}function _h(){this.name=Pu.KHR_MESH_QUANTIZATION}function Xc(gp,mp,Sp,xp){e$2.Interpolant.call(this,gp,mp,Sp,xp)}Gu.prototype.decodePrimitive=function(gp,mp){var Sp=this.json,xp=this.dracoLoader,Ep=gp.extensions[this.name].bufferView,$p=gp.extensions[this.name].attributes,Ip={},Np={},qp={};for(var Vp in $p){var pp=ip[Vp]||Vp.toLowerCase();Ip[pp]=$p[Vp]}for(Vp in gp.attributes)if(pp=ip[Vp]||Vp.toLowerCase(),$p[Vp]!==void 0){var bp=Sp.accessors[gp.attributes[Vp]],zp=up[bp.componentType];qp[pp]=zp,Np[pp]=bp.normalized===!0}return mp.getDependency("bufferView",Ep).then(function(Up){return new Promise(function(Jp){xp.decodeDracoFile(Up,function(Xp){for(var tm in Xp.attributes){var lm=Xp.attributes[tm],am=Np[tm];am!==void 0&&(lm.normalized=am)}Jp(Xp)},Ip,qp)})})},zu.prototype.extendTexture=function(gp,mp){return gp=gp.clone(),mp.offset!==void 0&&gp.offset.fromArray(mp.offset),mp.rotation!==void 0&&(gp.rotation=mp.rotation),mp.scale!==void 0&&gp.repeat.fromArray(mp.scale),mp.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),gp.needsUpdate=!0,gp},Hu.prototype=Object.create(e$2.MeshStandardMaterial.prototype),Hu.prototype.constructor=Hu,Hu.prototype.copy=function(gp){return e$2.MeshStandardMaterial.prototype.copy.call(this,gp),this.specularMap=gp.specularMap,this.specular.copy(gp.specular),this.glossinessMap=gp.glossinessMap,this.glossiness=gp.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},Xc.prototype=Object.create(e$2.Interpolant.prototype),Xc.prototype.constructor=Xc,Xc.prototype.copySampleValue_=function(gp){for(var mp=this.resultBuffer,Sp=this.sampleValues,xp=this.valueSize,Ep=gp*xp*3+xp,$p=0;$p!==xp;$p++)mp[$p]=Sp[Ep+$p];return mp},Xc.prototype.beforeStart_=Xc.prototype.copySampleValue_,Xc.prototype.afterEnd_=Xc.prototype.copySampleValue_,Xc.prototype.interpolate_=function(gp,mp,Sp,xp){for(var Ep=this.resultBuffer,$p=this.sampleValues,Ip=this.valueSize,Np=2*Ip,qp=3*Ip,Vp=xp-mp,pp=(Sp-mp)/Vp,bp=pp*pp,zp=bp*pp,Up=gp*qp,Jp=Up-qp,Xp=-2*zp+3*bp,tm=zp-bp,lm=1-Xp,am=tm-bp+pp,fm=0;fm!==Ip;fm++){var rm=$p[Jp+fm+Ip],um=$p[Jp+fm+Np]*Vp,om=$p[Up+fm+Ip],hm=$p[Up+fm]*Vp;Ep[fm]=lm*rm+am*um+Xp*om+tm*hm}return Ep};var ju=0,_c=1,_f=2,ep=3,tp=4,op=5,lp=6,up={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hp={9728:e$2.NearestFilter,9729:e$2.LinearFilter,9984:e$2.NearestMipmapNearestFilter,9985:e$2.LinearMipmapNearestFilter,9986:e$2.NearestMipmapLinearFilter,9987:e$2.LinearMipmapLinearFilter},np={33071:e$2.ClampToEdgeWrapping,33648:e$2.MirroredRepeatWrapping,10497:e$2.RepeatWrapping},rp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ip={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ap={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sp={CUBICSPLINE:void 0,LINEAR:e$2.InterpolateLinear,STEP:e$2.InterpolateDiscrete},cp="OPAQUE",dp="MASK",fp="BLEND",vp={"image/png":e$2.RGBAFormat,"image/jpeg":e$2.RGBFormat};function _p(gp,mp){return typeof gp!="string"||gp===""?"":(/^https?:\/\//i.test(mp)&&/^\//.test(gp)&&(mp=mp.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(gp)||/^data:.*,.*$/i.test(gp)||/^blob:.*$/i.test(gp)?gp:mp+gp)}function wp(gp,mp,Sp){for(var xp in Sp.extensions)gp[xp]===void 0&&(mp.userData.gltfExtensions=mp.userData.gltfExtensions||{},mp.userData.gltfExtensions[xp]=Sp.extensions[xp])}function Dp(gp,mp){mp.extras!==void 0&&(typeof mp.extras=="object"?Object.assign(gp.userData,mp.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+mp.extras))}function Pp(gp,mp){if(gp.updateMorphTargets(),mp.weights!==void 0)for(var Sp=0,xp=mp.weights.length;Sp<xp;Sp++)gp.morphTargetInfluences[Sp]=mp.weights[Sp];if(mp.extras&&Array.isArray(mp.extras.targetNames)){var Ep=mp.extras.targetNames;if(gp.morphTargetInfluences.length===Ep.length)for(gp.morphTargetDictionary={},Sp=0,xp=Ep.length;Sp<xp;Sp++)gp.morphTargetDictionary[Ep[Sp]]=Sp;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Wp(gp){for(var mp="",Sp=Object.keys(gp).sort(),xp=0,Ep=Sp.length;xp<Ep;xp++)mp+=Sp[xp]+":"+gp[Sp[xp]]+";";return mp}function Rp(gp,mp,Sp){this.json=gp||{},this.extensions=mp||{},this.options=Sp||{},this.cache=new Tu,this.associations=new Map,this.primitiveCache={},this.textureLoader=new e$2.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e$2.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Gp(gp,mp,Sp){var xp=mp.attributes,Ep=[];function $p(Vp,pp){return Sp.getDependency("accessor",Vp).then(function(bp){gp.setAttribute(pp,bp)})}for(var Ip in xp){var Np=ip[Ip]||Ip.toLowerCase();Np in gp.attributes||Ep.push($p(xp[Ip],Np))}if(mp.indices!==void 0&&!gp.index){var qp=Sp.getDependency("accessor",mp.indices).then(function(Vp){gp.setIndex(Vp)});Ep.push(qp)}return Dp(gp,mp),function(Vp,pp,bp){var zp=pp.attributes,Up=new e$2.Box3;if(zp.POSITION!==void 0){var Jp=(um=bp.json.accessors[zp.POSITION]).min,Xp=um.max;if(Jp!==void 0&&Xp!==void 0){Up.set(new e$2.Vector3(Jp[0],Jp[1],Jp[2]),new e$2.Vector3(Xp[0],Xp[1],Xp[2]));var tm=pp.targets;if(tm!==void 0){for(var lm=new e$2.Vector3,am=new e$2.Vector3,fm=0,rm=tm.length;fm<rm;fm++){var um,om=tm[fm];om.POSITION!==void 0&&(Jp=(um=bp.json.accessors[om.POSITION]).min,Xp=um.max,Jp!==void 0&&Xp!==void 0?(am.setX(Math.max(Math.abs(Jp[0]),Math.abs(Xp[0]))),am.setY(Math.max(Math.abs(Jp[1]),Math.abs(Xp[1]))),am.setZ(Math.max(Math.abs(Jp[2]),Math.abs(Xp[2]))),lm.max(am)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}Up.expandByVector(lm)}Vp.boundingBox=Up;var hm=new e$2.Sphere;Up.getCenter(hm.center),hm.radius=Up.min.distanceTo(Up.max)/2,Vp.boundingSphere=hm}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(gp,mp,Sp),Promise.all(Ep).then(function(){return mp.targets!==void 0?function(Vp,pp,bp){for(var zp=!1,Up=!1,Jp=0,Xp=pp.length;Jp<Xp&&((am=pp[Jp]).POSITION!==void 0&&(zp=!0),am.NORMAL!==void 0&&(Up=!0),!zp||!Up);Jp++);if(!zp&&!Up)return Promise.resolve(Vp);var tm=[],lm=[];for(Jp=0,Xp=pp.length;Jp<Xp;Jp++){var am=pp[Jp];if(zp){var fm=am.POSITION!==void 0?bp.getDependency("accessor",am.POSITION):Vp.attributes.position;tm.push(fm)}Up&&(fm=am.NORMAL!==void 0?bp.getDependency("accessor",am.NORMAL):Vp.attributes.normal,lm.push(fm))}return Promise.all([Promise.all(tm),Promise.all(lm)]).then(function(rm){var um=rm[0],om=rm[1];return zp&&(Vp.morphAttributes.position=um),Up&&(Vp.morphAttributes.normal=om),Vp.morphTargetsRelative=!0,Vp})}(gp,mp.targets,Sp):gp})}function kp(gp,mp){var Sp=gp.getIndex();if(Sp===null){var xp=[],Ep=gp.getAttribute("position");if(Ep===void 0)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),gp;for(var $p=0;$p<Ep.count;$p++)xp.push($p);gp.setIndex(xp),Sp=gp.getIndex()}var Ip=Sp.count-2,Np=[];if(mp===e$2.TriangleFanDrawMode)for($p=1;$p<=Ip;$p++)Np.push(Sp.getX(0)),Np.push(Sp.getX($p)),Np.push(Sp.getX($p+1));else for($p=0;$p<Ip;$p++)$p%2==0?(Np.push(Sp.getX($p)),Np.push(Sp.getX($p+1)),Np.push(Sp.getX($p+2))):(Np.push(Sp.getX($p+2)),Np.push(Sp.getX($p+1)),Np.push(Sp.getX($p)));Np.length/3!==Ip&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var qp=gp.clone();return qp.setIndex(Np),qp}return Rp.prototype.parse=function(gp,mp){var Sp=this,xp=this.json,Ep=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function($p){var Ip={scene:$p[0][xp.scene||0],scenes:$p[0],animations:$p[1],cameras:$p[2],asset:xp.asset,parser:Sp,userData:{}};wp(Ep,Ip,xp),Dp(Ip,xp),gp(Ip)}).catch(mp)},Rp.prototype.markDefs=function(){for(var gp=this.json.nodes||[],mp=this.json.skins||[],Sp=this.json.meshes||[],xp={},Ep={},$p=0,Ip=mp.length;$p<Ip;$p++)for(var Np=mp[$p].joints,qp=0,Vp=Np.length;qp<Vp;qp++)gp[Np[qp]].isBone=!0;for(var pp=0,bp=gp.length;pp<bp;pp++){var zp=gp[pp];zp.mesh!==void 0&&(xp[zp.mesh]===void 0&&(xp[zp.mesh]=Ep[zp.mesh]=0),xp[zp.mesh]++,zp.skin!==void 0&&(Sp[zp.mesh].isSkinnedMesh=!0))}this.json.meshReferences=xp,this.json.meshUses=Ep},Rp.prototype.getDependency=function(gp,mp){var Sp=gp+":"+mp,xp=this.cache.get(Sp);if(!xp){switch(gp){case"scene":xp=this.loadScene(mp);break;case"node":xp=this.loadNode(mp);break;case"mesh":xp=this.loadMesh(mp);break;case"accessor":xp=this.loadAccessor(mp);break;case"bufferView":xp=this.loadBufferView(mp);break;case"buffer":xp=this.loadBuffer(mp);break;case"material":xp=this.loadMaterial(mp);break;case"texture":xp=this.loadTexture(mp);break;case"skin":xp=this.loadSkin(mp);break;case"animation":xp=this.loadAnimation(mp);break;case"camera":xp=this.loadCamera(mp);break;case"light":xp=this.extensions[Pu.KHR_LIGHTS_PUNCTUAL].loadLight(mp);break;default:throw new Error("Unknown type: "+gp)}this.cache.add(Sp,xp)}return xp},Rp.prototype.getDependencies=function(gp){var mp=this.cache.get(gp);if(!mp){var Sp=this,xp=this.json[gp+(gp==="mesh"?"es":"s")]||[];mp=Promise.all(xp.map(function(Ep,$p){return Sp.getDependency(gp,$p)})),this.cache.add(gp,mp)}return mp},Rp.prototype.loadBuffer=function(gp){var mp=this.json.buffers[gp],Sp=this.fileLoader;if(mp.type&&mp.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+mp.type+" buffer type is not supported.");if(mp.uri===void 0&&gp===0)return Promise.resolve(this.extensions[Pu.KHR_BINARY_GLTF].body);var xp=this.options;return new Promise(function(Ep,$p){Sp.load(_p(mp.uri,xp.path),Ep,void 0,function(){$p(new Error('THREE.GLTFLoader: Failed to load buffer "'+mp.uri+'".'))})})},Rp.prototype.loadBufferView=function(gp){var mp=this.json.bufferViews[gp];return this.getDependency("buffer",mp.buffer).then(function(Sp){var xp=mp.byteLength||0,Ep=mp.byteOffset||0;return Sp.slice(Ep,Ep+xp)})},Rp.prototype.loadAccessor=function(gp){var mp=this,Sp=this.json,xp=this.json.accessors[gp];if(xp.bufferView===void 0&&xp.sparse===void 0)return Promise.resolve(null);var Ep=[];return xp.bufferView!==void 0?Ep.push(this.getDependency("bufferView",xp.bufferView)):Ep.push(null),xp.sparse!==void 0&&(Ep.push(this.getDependency("bufferView",xp.sparse.indices.bufferView)),Ep.push(this.getDependency("bufferView",xp.sparse.values.bufferView))),Promise.all(Ep).then(function($p){var Ip,Np,qp=$p[0],Vp=rp[xp.type],pp=up[xp.componentType],bp=pp.BYTES_PER_ELEMENT,zp=bp*Vp,Up=xp.byteOffset||0,Jp=xp.bufferView!==void 0?Sp.bufferViews[xp.bufferView].byteStride:void 0,Xp=xp.normalized===!0;if(Jp&&Jp!==zp){var tm=Math.floor(Up/Jp),lm="InterleavedBuffer:"+xp.bufferView+":"+xp.componentType+":"+tm+":"+xp.count,am=mp.cache.get(lm);am||(Ip=new pp(qp,tm*Jp,xp.count*Jp/bp),am=new e$2.InterleavedBuffer(Ip,Jp/bp),mp.cache.add(lm,am)),Np=new e$2.InterleavedBufferAttribute(am,Vp,Up%Jp/bp,Xp)}else Ip=qp===null?new pp(xp.count*Vp):new pp(qp,Up,xp.count*Vp),Np=new e$2.BufferAttribute(Ip,Vp,Xp);if(xp.sparse!==void 0){var fm=rp.SCALAR,rm=up[xp.sparse.indices.componentType],um=xp.sparse.indices.byteOffset||0,om=xp.sparse.values.byteOffset||0,hm=new rm($p[1],um,xp.sparse.count*fm),Lp=new pp($p[2],om,xp.sparse.count*Vp);qp!==null&&(Np=new e$2.BufferAttribute(Np.array.slice(),Np.itemSize,Np.normalized));for(var sm=0,dm=hm.length;sm<dm;sm++){var mm=hm[sm];if(Np.setX(mm,Lp[sm*Vp]),Vp>=2&&Np.setY(mm,Lp[sm*Vp+1]),Vp>=3&&Np.setZ(mm,Lp[sm*Vp+2]),Vp>=4&&Np.setW(mm,Lp[sm*Vp+3]),Vp>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Np})},Rp.prototype.loadTexture=function(gp){var mp,Sp=this,xp=this.json,Ep=this.options,$p=this.textureLoader,Ip=self.URL||self.webkitURL,Np=xp.textures[gp],qp=Np.extensions||{},Vp=(mp=qp[Pu.MSFT_TEXTURE_DDS]?xp.images[qp[Pu.MSFT_TEXTURE_DDS].source]:xp.images[Np.source]).uri,pp=!1;return mp.bufferView!==void 0&&(Vp=Sp.getDependency("bufferView",mp.bufferView).then(function(bp){pp=!0;var zp=new Blob([bp],{type:mp.mimeType});return Vp=Ip.createObjectURL(zp)})),Promise.resolve(Vp).then(function(bp){var zp=Ep.manager.getHandler(bp);return zp||(zp=qp[Pu.MSFT_TEXTURE_DDS]?Sp.extensions[Pu.MSFT_TEXTURE_DDS].ddsLoader:$p),new Promise(function(Up,Jp){zp.load(_p(bp,Ep.path),Up,void 0,Jp)})}).then(function(bp){pp===!0&&Ip.revokeObjectURL(Vp),bp.flipY=!1,Np.name&&(bp.name=Np.name),mp.mimeType in vp&&(bp.format=vp[mp.mimeType]);var zp=(xp.samplers||{})[Np.sampler]||{};return bp.magFilter=hp[zp.magFilter]||e$2.LinearFilter,bp.minFilter=hp[zp.minFilter]||e$2.LinearMipmapLinearFilter,bp.wrapS=np[zp.wrapS]||e$2.RepeatWrapping,bp.wrapT=np[zp.wrapT]||e$2.RepeatWrapping,Sp.associations.set(bp,{type:"textures",index:gp}),bp})},Rp.prototype.assignTexture=function(gp,mp,Sp){var xp=this;return this.getDependency("texture",Sp.index).then(function(Ep){if(!Ep.isCompressedTexture)switch(mp){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":Ep.format=e$2.RGBFormat}if(Sp.texCoord===void 0||Sp.texCoord==0||mp==="aoMap"&&Sp.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+Sp.texCoord+" for texture "+mp+" not yet supported."),xp.extensions[Pu.KHR_TEXTURE_TRANSFORM]){var $p=Sp.extensions!==void 0?Sp.extensions[Pu.KHR_TEXTURE_TRANSFORM]:void 0;if($p){var Ip=this.associations.get(Ep);Ep=xp.extensions[Pu.KHR_TEXTURE_TRANSFORM].extendTexture(Ep,$p),this.associations.set(Ep,Ip)}}gp[mp]=Ep})},Rp.prototype.assignFinalMaterial=function(gp){var mp=gp.geometry,Sp=gp.material,xp=mp.attributes.tangent!==void 0,Ep=mp.attributes.color!==void 0,$p=mp.attributes.normal===void 0,Ip=gp.isSkinnedMesh===!0,Np=Object.keys(mp.morphAttributes).length>0,qp=Np&&mp.morphAttributes.normal!==void 0;if(gp.isPoints){var Vp="PointsMaterial:"+Sp.uuid,pp=this.cache.get(Vp);pp||(pp=new e$2.PointsMaterial,e$2.Material.prototype.copy.call(pp,Sp),pp.color.copy(Sp.color),pp.map=Sp.map,pp.sizeAttenuation=!1,this.cache.add(Vp,pp)),Sp=pp}else if(gp.isLine){Vp="LineBasicMaterial:"+Sp.uuid;var bp=this.cache.get(Vp);bp||(bp=new e$2.LineBasicMaterial,e$2.Material.prototype.copy.call(bp,Sp),bp.color.copy(Sp.color),this.cache.add(Vp,bp)),Sp=bp}if(xp||Ep||$p||Ip||Np){Vp="ClonedMaterial:"+Sp.uuid+":",Sp.isGLTFSpecularGlossinessMaterial&&(Vp+="specular-glossiness:"),Ip&&(Vp+="skinning:"),xp&&(Vp+="vertex-tangents:"),Ep&&(Vp+="vertex-colors:"),$p&&(Vp+="flat-shading:"),Np&&(Vp+="morph-targets:"),qp&&(Vp+="morph-normals:");var zp=this.cache.get(Vp);zp||(zp=Sp.clone(),Ip&&(zp.skinning=!0),xp&&(zp.vertexTangents=!0),Ep&&(zp.vertexColors=!0),$p&&(zp.flatShading=!0),Np&&(zp.morphTargets=!0),qp&&(zp.morphNormals=!0),this.cache.add(Vp,zp),this.associations.set(zp,this.associations.get(Sp))),Sp=zp}Sp.aoMap&&mp.attributes.uv2===void 0&&mp.attributes.uv!==void 0&&mp.setAttribute("uv2",mp.attributes.uv),Sp.normalScale&&!xp&&(Sp.normalScale.y=-Sp.normalScale.y),Sp.clearcoatNormalScale&&!xp&&(Sp.clearcoatNormalScale.y=-Sp.clearcoatNormalScale.y),gp.material=Sp},Rp.prototype.loadMaterial=function(gp){var mp,Sp=this,xp=this.json,Ep=this.extensions,$p=xp.materials[gp],Ip={},Np=$p.extensions||{},qp=[];if(Np[Pu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Vp=Ep[Pu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];mp=Vp.getMaterialType(),qp.push(Vp.extendParams(Ip,$p,Sp))}else if(Np[Pu.KHR_MATERIALS_UNLIT]){var pp=Ep[Pu.KHR_MATERIALS_UNLIT];mp=pp.getMaterialType(),qp.push(pp.extendParams(Ip,$p,Sp))}else{mp=e$2.MeshStandardMaterial;var bp=$p.pbrMetallicRoughness||{};if(Ip.color=new e$2.Color(1,1,1),Ip.opacity=1,Array.isArray(bp.baseColorFactor)){var zp=bp.baseColorFactor;Ip.color.fromArray(zp),Ip.opacity=zp[3]}bp.baseColorTexture!==void 0&&qp.push(Sp.assignTexture(Ip,"map",bp.baseColorTexture)),Ip.metalness=bp.metallicFactor!==void 0?bp.metallicFactor:1,Ip.roughness=bp.roughnessFactor!==void 0?bp.roughnessFactor:1,bp.metallicRoughnessTexture!==void 0&&(qp.push(Sp.assignTexture(Ip,"metalnessMap",bp.metallicRoughnessTexture)),qp.push(Sp.assignTexture(Ip,"roughnessMap",bp.metallicRoughnessTexture)))}$p.doubleSided===!0&&(Ip.side=e$2.DoubleSide);var Up=$p.alphaMode||cp;if(Up===fp?(Ip.transparent=!0,Ip.depthWrite=!1):(Ip.transparent=!1,Up===dp&&(Ip.alphaTest=$p.alphaCutoff!==void 0?$p.alphaCutoff:.5)),$p.normalTexture!==void 0&&mp!==e$2.MeshBasicMaterial&&(qp.push(Sp.assignTexture(Ip,"normalMap",$p.normalTexture)),Ip.normalScale=new e$2.Vector2(1,1),$p.normalTexture.scale!==void 0&&Ip.normalScale.set($p.normalTexture.scale,$p.normalTexture.scale)),$p.occlusionTexture!==void 0&&mp!==e$2.MeshBasicMaterial&&(qp.push(Sp.assignTexture(Ip,"aoMap",$p.occlusionTexture)),$p.occlusionTexture.strength!==void 0&&(Ip.aoMapIntensity=$p.occlusionTexture.strength)),$p.emissiveFactor!==void 0&&mp!==e$2.MeshBasicMaterial&&(Ip.emissive=new e$2.Color().fromArray($p.emissiveFactor)),$p.emissiveTexture!==void 0&&mp!==e$2.MeshBasicMaterial&&qp.push(Sp.assignTexture(Ip,"emissiveMap",$p.emissiveTexture)),Np[Pu.KHR_MATERIALS_CLEARCOAT]){var Jp=Ep[Pu.KHR_MATERIALS_CLEARCOAT];mp=Jp.getMaterialType(),qp.push(Jp.extendParams(Ip,{extensions:Np},Sp))}return Promise.all(qp).then(function(){var Xp;return Xp=mp===Hu?Ep[Pu.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Ip):new mp(Ip),$p.name&&(Xp.name=$p.name),Xp.map&&(Xp.map.encoding=e$2.sRGBEncoding),Xp.emissiveMap&&(Xp.emissiveMap.encoding=e$2.sRGBEncoding),Dp(Xp,$p),Sp.associations.set(Xp,{type:"materials",index:gp}),$p.extensions&&wp(Ep,Xp,$p),Xp})},Rp.prototype.loadGeometries=function(gp){var mp=this,Sp=this.extensions,xp=this.primitiveCache;function Ep(Jp){return Sp[Pu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Jp,mp).then(function(Xp){return Gp(Xp,Jp,mp)})}for(var $p,Ip,Np=[],qp=0,Vp=gp.length;qp<Vp;qp++){var pp,bp=gp[qp],zp=(Ip=void 0,(Ip=($p=bp).extensions&&$p.extensions[Pu.KHR_DRACO_MESH_COMPRESSION])?"draco:"+Ip.bufferView+":"+Ip.indices+":"+Wp(Ip.attributes):$p.indices+":"+Wp($p.attributes)+":"+$p.mode),Up=xp[zp];Up?Np.push(Up.promise):(pp=bp.extensions&&bp.extensions[Pu.KHR_DRACO_MESH_COMPRESSION]?Ep(bp):Gp(new e$2.BufferGeometry,bp,mp),xp[zp]={primitive:bp,promise:pp},Np.push(pp))}return Promise.all(Np)},Rp.prototype.loadMesh=function(gp){for(var mp,Sp=this,xp=this.json.meshes[gp],Ep=xp.primitives,$p=[],Ip=0,Np=Ep.length;Ip<Np;Ip++){var qp=Ep[Ip].material===void 0?((mp=this.cache).DefaultMaterial===void 0&&(mp.DefaultMaterial=new e$2.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e$2.FrontSide})),mp.DefaultMaterial):this.getDependency("material",Ep[Ip].material);$p.push(qp)}return $p.push(Sp.loadGeometries(Ep)),Promise.all($p).then(function(Vp){for(var pp=Vp.slice(0,Vp.length-1),bp=Vp[Vp.length-1],zp=[],Up=0,Jp=bp.length;Up<Jp;Up++){var Xp,tm=bp[Up],lm=Ep[Up],am=pp[Up];if(lm.mode===tp||lm.mode===op||lm.mode===lp||lm.mode===void 0)(Xp=xp.isSkinnedMesh===!0?new e$2.SkinnedMesh(tm,am):new e$2.Mesh(tm,am)).isSkinnedMesh!==!0||Xp.geometry.attributes.skinWeight.normalized||Xp.normalizeSkinWeights(),lm.mode===op?Xp.geometry=kp(Xp.geometry,e$2.TriangleStripDrawMode):lm.mode===lp&&(Xp.geometry=kp(Xp.geometry,e$2.TriangleFanDrawMode));else if(lm.mode===_c)Xp=new e$2.LineSegments(tm,am);else if(lm.mode===ep)Xp=new e$2.Line(tm,am);else if(lm.mode===_f)Xp=new e$2.LineLoop(tm,am);else{if(lm.mode!==ju)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+lm.mode);Xp=new e$2.Points(tm,am)}Object.keys(Xp.geometry.morphAttributes).length>0&&Pp(Xp,xp),Xp.name=xp.name||"mesh_"+gp,bp.length>1&&(Xp.name+="_"+Up),Dp(Xp,xp),Sp.assignFinalMaterial(Xp),zp.push(Xp)}if(zp.length===1)return zp[0];var fm=new e$2.Group;for(Up=0,Jp=zp.length;Up<Jp;Up++)fm.add(zp[Up]);return fm})},Rp.prototype.loadCamera=function(gp){var mp,Sp=this.json.cameras[gp],xp=Sp[Sp.type];if(xp)return Sp.type==="perspective"?mp=new e$2.PerspectiveCamera(e$2.MathUtils.radToDeg(xp.yfov),xp.aspectRatio||1,xp.znear||1,xp.zfar||2e6):Sp.type==="orthographic"&&(mp=new e$2.OrthographicCamera(-xp.xmag,xp.xmag,xp.ymag,-xp.ymag,xp.znear,xp.zfar)),Sp.name&&(mp.name=Sp.name),Dp(mp,Sp),Promise.resolve(mp);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Rp.prototype.loadSkin=function(gp){var mp=this.json.skins[gp],Sp={joints:mp.joints};return mp.inverseBindMatrices===void 0?Promise.resolve(Sp):this.getDependency("accessor",mp.inverseBindMatrices).then(function(xp){return Sp.inverseBindMatrices=xp,Sp})},Rp.prototype.loadAnimation=function(gp){for(var mp=this.json.animations[gp],Sp=[],xp=[],Ep=[],$p=[],Ip=[],Np=0,qp=mp.channels.length;Np<qp;Np++){var Vp=mp.channels[Np],pp=mp.samplers[Vp.sampler],bp=Vp.target,zp=bp.node!==void 0?bp.node:bp.id,Up=mp.parameters!==void 0?mp.parameters[pp.input]:pp.input,Jp=mp.parameters!==void 0?mp.parameters[pp.output]:pp.output;Sp.push(this.getDependency("node",zp)),xp.push(this.getDependency("accessor",Up)),Ep.push(this.getDependency("accessor",Jp)),$p.push(pp),Ip.push(bp)}return Promise.all([Promise.all(Sp),Promise.all(xp),Promise.all(Ep),Promise.all($p),Promise.all(Ip)]).then(function(Xp){for(var tm=Xp[0],lm=Xp[1],am=Xp[2],fm=Xp[3],rm=Xp[4],um=[],om=0,hm=tm.length;om<hm;om++){var Lp=tm[om],sm=lm[om],dm=am[om],mm=fm[om],pm=rm[om];if(Lp!==void 0){var wm;switch(Lp.updateMatrix(),Lp.matrixAutoUpdate=!0,ap[pm.path]){case ap.weights:wm=e$2.NumberKeyframeTrack;break;case ap.rotation:wm=e$2.QuaternionKeyframeTrack;break;case ap.position:case ap.scale:default:wm=e$2.VectorKeyframeTrack}var $m=Lp.name?Lp.name:Lp.uuid,Pm=mm.interpolation!==void 0?sp[mm.interpolation]:e$2.InterpolateLinear,Nm=[];ap[pm.path]===ap.weights?Lp.traverse(function(Cp){Cp.isMesh===!0&&Cp.morphTargetInfluences&&Nm.push(Cp.name?Cp.name:Cp.uuid)}):Nm.push($m);var Tm=dm.array;if(dm.normalized){var Dm;if(Tm.constructor===Int8Array)Dm=1/127;else if(Tm.constructor===Uint8Array)Dm=1/255;else if(Tm.constructor==Int16Array)Dm=1/32767;else{if(Tm.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");Dm=1/65535}for(var km=new Float32Array(Tm.length),Im=0,Um=Tm.length;Im<Um;Im++)km[Im]=Tm[Im]*Dm;Tm=km}for(Im=0,Um=Nm.length;Im<Um;Im++){var Wm=new wm(Nm[Im]+"."+ap[pm.path],sm.array,Tm,Pm);mm.interpolation==="CUBICSPLINE"&&(Wm.createInterpolant=function(Cp){return new Xc(this.times,this.values,this.getValueSize()/3,Cp)},Wm.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),um.push(Wm)}}}var Lm=mp.name?mp.name:"animation_"+gp;return new e$2.AnimationClip(Lm,void 0,um)})},Rp.prototype.loadNode=function(gp){var mp,Sp=this.json,xp=this.extensions,Ep=this,$p=Sp.meshReferences,Ip=Sp.meshUses,Np=Sp.nodes[gp];return(mp=[],Np.mesh!==void 0&&mp.push(Ep.getDependency("mesh",Np.mesh).then(function(qp){var Vp;if($p[Np.mesh]>1){var pp=Ip[Np.mesh]++;(Vp=qp.clone()).name+="_instance_"+pp}else Vp=qp;return Np.weights!==void 0&&Vp.traverse(function(bp){if(bp.isMesh)for(var zp=0,Up=Np.weights.length;zp<Up;zp++)bp.morphTargetInfluences[zp]=Np.weights[zp]}),Vp})),Np.camera!==void 0&&mp.push(Ep.getDependency("camera",Np.camera)),Np.extensions&&Np.extensions[Pu.KHR_LIGHTS_PUNCTUAL]&&Np.extensions[Pu.KHR_LIGHTS_PUNCTUAL].light!==void 0&&mp.push(Ep.getDependency("light",Np.extensions[Pu.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(mp)).then(function(qp){var Vp;if((Vp=Np.isBone===!0?new e$2.Bone:qp.length>1?new e$2.Group:qp.length===1?qp[0]:new e$2.Object3D)!==qp[0])for(var pp=0,bp=qp.length;pp<bp;pp++)Vp.add(qp[pp]);if(Np.name&&(Vp.userData.name=Np.name,Vp.name=e$2.PropertyBinding.sanitizeNodeName(Np.name)),Dp(Vp,Np),Np.extensions&&wp(xp,Vp,Np),Np.matrix!==void 0){var zp=new e$2.Matrix4;zp.fromArray(Np.matrix),Vp.applyMatrix4(zp)}else Np.translation!==void 0&&Vp.position.fromArray(Np.translation),Np.rotation!==void 0&&Vp.quaternion.fromArray(Np.rotation),Np.scale!==void 0&&Vp.scale.fromArray(Np.scale);return Ep.associations.set(Vp,{type:"nodes",index:gp}),Vp})},Rp.prototype.loadScene=function(){function gp(mp,Sp,xp,Ep){var $p=xp.nodes[mp];return Ep.getDependency("node",mp).then(function(Ip){return $p.skin===void 0?Ip:Ep.getDependency("skin",$p.skin).then(function(qp){for(var Vp=[],pp=0,bp=(Np=qp).joints.length;pp<bp;pp++)Vp.push(Ep.getDependency("node",Np.joints[pp]));return Promise.all(Vp)}).then(function(qp){return Ip.traverse(function(Vp){if(Vp.isMesh){for(var pp=[],bp=[],zp=0,Up=qp.length;zp<Up;zp++){var Jp=qp[zp];if(Jp){pp.push(Jp);var Xp=new e$2.Matrix4;Np.inverseBindMatrices!==void 0&&Xp.fromArray(Np.inverseBindMatrices.array,16*zp),bp.push(Xp)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Np.joints[zp])}Vp.bind(new e$2.Skeleton(pp,bp),Vp.matrixWorld)}}),Ip});var Np}).then(function(Ip){Sp.add(Ip);var Np=[];if($p.children)for(var qp=$p.children,Vp=0,pp=qp.length;Vp<pp;Vp++){var bp=qp[Vp];Np.push(gp(bp,Ip,xp,Ep))}return Promise.all(Np)})}return function(mp){var Sp=this.json,xp=this.extensions,Ep=this.json.scenes[mp],$p=new e$2.Group;Ep.name&&($p.name=Ep.name),Dp($p,Ep),Ep.extensions&&wp(xp,$p,Ep);for(var Ip=Ep.nodes||[],Np=[],qp=0,Vp=Ip.length;qp<Vp;qp++)Np.push(gp(Ip[qp],$p,Sp,this));return Promise.all(Np).then(function(){return $p})}}(),Cu}()),Wr=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(1,0,0),Math.PI/2);function Xr(Cu){function Tu(Pu){if(Pu.isMesh)return function(Ou){var Du=new ft$1;Du.geometry=Ou.geometry,Du.geometry.computeVertexNormals(),Du.geometry.computeBoundingBox(),Du.geometry.computeBoundingSphere(),Du.geometry.addGroup(0,Ou.geometry.index.count,0);var ku=new Mt;return ku.uniforms.map.value=Ou.material.map,ku.uniforms.exposure.value=3.3,ku.opacity=1,Ou.material.dispose(),Du.material=[ku],Du.position.copy(Ou.position),Du.quaternion.copy(Ou.quaternion),Du.scale.copy(Ou.scale),Du.matrix.compose(Du.position,Du.quaternion,Du.scale),Du}(Pu);if(Pu.isGroup){for(var Bu=function(Ou){var Du=new gt;return Du.position.copy(Ou.position),Du.quaternion.copy(Ou.quaternion),Du.scale.copy(Ou.scale),Du.matrix.compose(Du.position,Du.quaternion,Du.scale),Du}(Pu),Lu=0;Lu<Pu.children.length;Lu++){var Ru=Tu(Pu.children[Lu]);Bu.add(Ru)}return Bu}return new gt}return new Promise(function(Pu,Bu){var Lu,Ru=new r$3.Matrix4().fromArray(Cu.computedTransform);if(((Lu=Cu.tileset.asset)===null||Lu===void 0?void 0:Lu.gltfUpAxis)!=="Z"&&Ru.multiply(Wr),Cu.content){var Ou=Cu.content.gltfArrayBuffer,Du=Cu.contentUrl?Cu.contentUrl.slice(0,Cu.contentUrl.lastIndexOf("/")+1):"";Gr.parse(Ou,Du,function(ku){var Fu=ku.scene,Nu=new gt,Gu=Tu(Fu);Gu.applyMatrix4(Ru),Nu.add(Gu),Pu(Nu)},function(ku){Bu(new Error("error parsing gltf in tile ".concat(Cu.id,": ").concat(ku.message)))})}else Pu(new gt)})}function Yr(Cu){Cu.traverse(function(Tu){if(Tu instanceof ft$1){Tu.geometry.dispose();for(var Pu=0,Bu=Tu.material;Pu<Bu.length;Pu++){var Lu=Bu[Pu];Lu.uniforms.map&&Lu.uniforms.map.value&&(Lu.uniforms.map.value.dispose(),Lu.uniforms.map.value=null)}}})}function Zr(Cu){return new r$3.Matrix4().fromArray([2*Cu[0],2*Cu[1],2*Cu[2],0,2*Cu[3],2*Cu[4],2*Cu[5],0,2*Cu[6],2*Cu[7],2*Cu[8],0,0,0,0,1])}function Jr(Cu){return new Tn(Cu.toArray())}function $r(Cu){var Tu=Cu.planes.map(function(Pu){return new kn(Pu.normal.toArray(),Pu.constant)});return new Fn(Tu)}var eo$1=new r$3.EdgesGeometry(new r$3.BoxBufferGeometry(1,1,1)),to=new r$3.LineBasicMaterial({color:new r$3.Color(1,1,0),transparent:!0});function io(Cu){Cu.updateMatrix(),Cu.updateMatrixWorld(),Cu.matrixWorld.getInverse(Cu.matrixWorldInverse);var Tu=new r$3.Matrix4().multiplyMatrices(Cu.projectionMatrix,Cu.matrixWorldInverse);return new r$3.Frustum().setFromProjectionMatrix(Tu)}var no={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxScreenSpaceError:8,maxMemoryUsage:32,viewDistanceScale:.2,onNodeCreated:function(){}},ro=function(Cu){function Tu(Pu){Pu===void 0&&(Pu={});var Bu=Cu.call(this)||this;return Bu.options=t$3.__assign(t$3.__assign({},no),Pu),Bu.clock=new r$3.Clock,Bu.timer=0,Bu.unloadTileQueue=[],Bu.nodes={},Bu.boundings={},Bu.nodeGroup=new r$3.Group,Bu.boundingGroup=new r$3.Group,Bu.add(Bu.nodeGroup),Bu.sseDenominator=null,Bu.lastCameraTransform=new r$3.Matrix4,Bu.lastCameraAspect=1,Bu.lastCameraFov=null,Bu.lastCamera=null,Bu.lastRenderer=null,Bu.enabled=!1,Bu}return t$3.__extends(Tu,Cu),Object.defineProperty(Tu.prototype,"enable",{get:function(){return this.enabled},set:function(Pu){this.enabled!==Pu&&(this.enabled=Pu,this.enabled===!1?this.reset():(this.timer=0,this.clock.getDelta()))},enumerable:!1,configurable:!0}),Tu.prototype.load=function(Pu){var Bu=this,Lu=Pu.tileset_url;Pu.tileset_url_md5;var Ru=Pu.b3md_mappings_url;Pu.b3md_mappings_url_md5;var Ou={modelMatrix:Jr(new r$3.Matrix4().fromArray([1,0,0,0,0,-1,0,1e9,0,0,-1,0,0,0,0,1])),maxMemoryUsage:this.options.maxMemoryUsage,maxScreenSpaceError:this.options.maxScreenSpaceError,viewDistanceScale:this.options.viewDistanceScale,throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests,contentLoader:function(Nu){var Gu=function(zu){var Hu=zu.boundingVolume,Wu=new r$3.LineSegments(eo$1,to);return Wu.applyMatrix4(Zr(Hu.halfAxes)),Wu.position.set(Hu.center[0],Hu.center[1],Hu.center[2]),Wu}(Nu);return Gu.visible=!1,Bu.boundings[Nu.id]=Gu,Bu.boundingGroup.add(Gu),Gu.updateMatrixWorld(!0),Nu.type==="SCENEGRAPH"||Nu.type==="MESH"?Xr(Nu).then(function(zu){Bu.tileset===void 0?Yr(zu):(zu.visible=!1,Bu.nodes[Nu.id]=zu,Bu.nodeGroup.add(zu),Bu.options.onNodeCreated(zu),zu.updateMatrixWorld(!0))}):Promise.resolve()},onTileLoad:function(){Bu.enabled&&Bu.tileset&&Bu.lastRenderer&&Bu.lastCamera&&(Bu.tileset.frameNumber++,Bu.tilesetUpdate(Bu.tileset,Bu.lastRenderer,Bu.lastCamera)),Bu.enabled||Bu.reset()},onTileUnload:function(Nu){Bu.unloadTileQueue.push(Nu)},onTileError:function(Nu,Gu){console.error("Tile error",Nu.id,Gu)},onTraversalComplete:function(Nu){return Nu},allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy,maxDepth:this.options.maxDepth},Du=Lu.split("/").slice(0,-1).join("/"),ku=it(Lu,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Nu){return JSON.parse(Nu.body)}).then(function(Nu){return jr(Nu,Du)}),Fu=it(Ru,{allowHosts:this.options.allowHosts,networkSubscribe:this.options.networkSubscribe,requestProxy:this.options.requestProxy}).then(function(Nu){return JSON.parse(Nu.body)});Promise.all([ku,Fu]).then(function(Nu){var Gu=Nu[0],zu=Nu[1];Gu.b3dmMapping=zu;var Hu=Bu.tileset=new qr(Gu,Ou),Wu=new r$3.Matrix4;if(Hu.root&&Hu.root.boundingVolume){var _h=Hu.root.boundingVolume,Xc=_h.halfAxes,ju=_h.center;Wu.extractRotation(Zr(Xc)),Wu.setPosition(ju[0],ju[1],ju[2])}Hu.modelMatrix.copy(Jr(new r$3.Matrix4().getInverse(Wu)))})},Tu.prototype.update=function(Pu,Bu){this.lastCamera=Bu,this.lastRenderer=Pu,this.enabled!==!1&&(this.timer+=this.clock.getDelta(),this.tileset&&this.timer>=this.options.updateInterval&&(Bu.matrixWorld.equals(this.lastCameraTransform)&&Bu.aspect===this.lastCameraAspect&&Bu.fov===this.lastCameraFov||(this.timer=0,this.tileset.frameNumber++,this.lastCameraTransform.copy(Bu.matrixWorld),this.tilesetUpdate(this.tileset,Pu,Bu))))},Tu.prototype.tilesetUpdate=function(Pu,Bu,Lu){this.sseDenominator&&Lu.aspect===this.lastCameraAspect&&Lu.fov===this.lastCameraFov||(this.sseDenominator=function(Hu){var Wu=Hu.aspect,_h=Hu.fov/180*Math.PI,Xc=Hu.aspect<=1?_h:2*Math.atan(Math.tan(.5*_h)/Wu);return 2*Math.tan(.5*Xc)}(Lu),this.lastCameraAspect=Lu.aspect,this.lastCameraFov=Lu.fov);var Ru,Ou={camera:{position:Lu.getWorldPosition(new r$3.Vector3).toArray(),direction:Lu.getWorldDirection(new r$3.Vector3).toArray(),up:Lu.up.toArray()},height:Bu.getSize(new r$3.Vector2).height,frameNumber:Pu.frameNumber,sseDenominator:this.sseDenominator,cullingVolume:$r(io(Lu))};Pu.cache.reset(),Pu.traverser.traverse(Pu.root,Ou);for(var Du=0,ku=Pu.tiles;Du<ku.length;Du++){var Fu=ku[Du],Nu=Fu.selected,Gu=Fu.id;this.nodes[Gu]&&this.nodes[Gu].visible!==Nu&&(this.nodes[Gu].visible=Nu,Nu&&(this.nodes[Gu].needsRender=!0)),this.boundings[Gu]&&this.boundings[Gu].visible!==Nu&&(this.boundings[Gu].visible=Nu)}for(;Ru=this.unloadTileQueue.pop();){if(Gu=Ru.id,this.nodes[Gu]){var zu=this.nodes[Gu];this.nodeGroup.remove(zu),Yr(zu),delete this.nodes[Gu]}this.boundings[Gu]&&(zu=this.boundings[Gu],this.boundingGroup.remove(zu),delete this.boundings[Gu])}},Tu.prototype.reset=function(){if(this.tileset){this.tileset.reset();for(var Pu=void 0;Pu=this.unloadTileQueue.pop();)if(Pu.contentState!=="UNLOADED"){var Bu=Pu.id;if(this.nodes[Bu]){var Lu=this.nodes[Bu];this.nodeGroup.remove(Lu),Yr(Lu),delete this.nodes[Bu]}this.boundings[Bu]&&(Lu=this.boundings[Bu],this.boundingGroup.remove(Lu),delete this.boundings[Bu])}for(var Ru=0,Ou=Object.keys(this.nodes);Ru<Ou.length;Ru++){Bu=Ou[Ru];var Du=this.nodes[Bu];this.nodeGroup.remove(Du),Yr(Du),delete this.nodes[Bu]}for(var ku=0,Fu=Object.keys(this.boundings);ku<Fu.length;ku++)Bu=Fu[ku],Du=this.boundings[Bu],this.boundingGroup.remove(Du),delete this.boundings[Bu]}},Tu}(At$1);function oo(Cu){return Cu==null}var so=function(Cu,Tu){Tu===void 0&&(Tu=1e-4),Tu=Math.max(Tu,Number.EPSILON);for(var Pu={},Bu=Cu.getIndex(),Lu=Cu.getAttribute("position"),Ru=Bu?Bu.count:Lu.count,Ou=0,Du=Object.keys(Cu.attributes),ku={},Fu={},Nu=[],Gu=["getX","getY","getZ","getW"],zu=0,Hu=Du.length;zu<Hu;zu++)ku[_f=Du[zu]]=[],(lp=Cu.morphAttributes[_f])&&(Fu[_f]=new Array(lp.length).fill().map(function(){return[]}));var Wu=Math.log10(1/Tu),_h=Math.pow(10,Wu);for(zu=0;zu<Ru;zu++){var Xc=Bu?Bu.getX(zu):zu,ju="",_c=0;for(Hu=Du.length;_c<Hu;_c++)for(var _f=Du[_c],ep=(op=Cu.getAttribute(_f)).itemSize,tp=0;tp<ep;tp++)ju+="".concat(~~(op[Gu[tp]](Xc)*_h),",");if(ju in Pu)Nu.push(Pu[ju]);else{for(_c=0,Hu=Du.length;_c<Hu;_c++){_f=Du[_c];var op=Cu.getAttribute(_f),lp=Cu.morphAttributes[_f],up=(ep=op.itemSize,ku[_f]),hp=Fu[_f];for(tp=0;tp<ep;tp++){var np=Gu[tp];if(up.push(op[np](Xc)),lp)for(var rp=0,ip=lp.length;rp<ip;rp++)hp[rp].push(lp[rp][np](Xc))}}Pu[ju]=Ou,Nu.push(Ou),Ou++}}var ap=Cu.clone();for(zu=0,Hu=Du.length;zu<Hu;zu++){_f=Du[zu];var sp=Cu.getAttribute(_f),cp=new sp.array.constructor(ku[_f]);if(op=new r$3.BufferAttribute(cp,sp.itemSize,sp.normalized),ap.setAttribute(_f,op),_f in Fu)for(_c=0;_c<Fu[_f].length;_c++){var dp=Cu.morphAttributes[_f][_c],fp=(cp=new dp.array.constructor(Fu[_f][_c]),new r$3.BufferAttribute(cp,dp.itemSize,dp.normalized));ap.morphAttributes[_f][_c]=fp}}return ap.setIndex(Nu),ap};function ao$1(Cu){var Tu;return new((Tu=r$3.Triangle).bind.apply(Tu,t$3.__spreadArray([void 0],Cu.map(function(Pu){return new r$3.Vector3(Pu.x,Pu.y,Pu.z)}),!1)))}var lo$1={at3d:function(Cu,Tu){for(var Pu=Ni$1(Tu.textureOptions,Cu.textures.length),Bu={},Lu=0,Ru=Cu.textures;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Bu[Ou]=Li$1(Ou,Pu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)}return Promise.resolve().then(function(){return it(Cu.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Du){return ti$1(Du.body)}).then(function(Du){return jt$1(function(){for(var ku,Fu={chunks:[]},Nu=0,Gu=Du;Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=Ti.decode(zu);Hu.chunks.length&&(ku=Fu.chunks).push.apply(ku,Hu.chunks)}return Fu})}).then(function(Du){return jt$1(function(){return Oi$1(Du,Cu.textureBase,Cu.textures.slice(),Pu,Bu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})})},pbm:function(Cu,Tu){for(var Pu=Ni$1(Tu.textureOptions,Cu.textures.length),Bu={},Lu=0,Ru=Cu.textures;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Bu[Ou]=Li$1(Ou,Pu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)}return Promise.resolve().then(function(){return it(Cu.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Du){return jt$1(function(){var ku=new Uint8Array(Du.body);return Ti.decode(ku)})}).then(function(Du){return jt$1(function(){return Oi$1(Du,Cu.textureBase,Cu.textures.slice(),Pu,Bu,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})})},dome:function(Cu,Tu){return Promise.resolve().then(function(){return it(Cu.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Pu){return ji$1(new Uint8Array(Pu.body),Cu.textureBase,Tu.textureOptions,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})},domez:function(Cu,Tu){return Promise.resolve().then(function(){return it(Cu.file,{responseType:"arraybuffer",allowHosts:Tu.allowHosts,requestProxy:Tu.requestProxy,networkSubscribe:Tu.networkSubscribe})}).then(function(Pu){return ti$1(Pu.body)}).then(function(Pu){var Bu=Pu.reduce(function(Ou,Du){return Ou+Du.length},0),Lu=new Uint8Array(Bu),Ru=0;return Pu.forEach(function(Ou){Lu.set(Ou,Ru),Ru+=Ou.length}),Lu}).then(function(Pu){return ji$1(Pu,Cu.textureBase,Tu.textureOptions,Tu.allowHosts,Tu.requestProxy,Tu.networkSubscribe)})}},uo=function(Cu){function Tu(Pu){Pu===void 0&&(Pu={});var Bu=Cu.call(this)||this;return Bu.empty=!0,Bu.name="model",Bu.loaded=!1,Bu.bvhs=Object.assign([],{loaded:!1}),Bu.bounding=new r$3.Box3,Bu.shownFloor=null,Bu.floorLength=0,Bu.requestProxy=Pu.requestProxy,Bu.networkSubscribe=Pu.networkSubscribe,Bu.allowHosts=Pu.allowHosts,Bu.renderOrder=-3,Bu}return t$3.__extends(Tu,Cu),Object.defineProperty(Tu.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"hasTiles",{get:function(){return this.tiledModel!==void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enableTiles",{get:function(){return!!this.tiledModel&&this.tiledModel.enable},set:function(Pu){this.tiledModel&&(this.tiledModel.enable=Pu)},enumerable:!1,configurable:!0}),Tu.prototype.getEdges=function(Pu){var Bu;if(Pu===void 0&&(Pu=30/180*Math.PI),!this.originModel)return[];for(var Lu=Math.cos(Pu),Ru=[],Ou=0,Du=this.originModel.children;Ou<Du.length;Ou++){var ku=Du[Ou];if(ku instanceof ft$1){for(var Fu={},Nu=["a","b","c"],Gu=so(ku.geometry),zu=Gu.getAttribute("position").array,Hu=((Bu=Gu.getIndex())===null||Bu===void 0?void 0:Bu.array)||[],Wu=[],_h=[],Xc=0,ju=zu.length;Xc<ju;Xc+=3)Wu.push(new r$3.Vector3(zu[Xc],zu[Xc+1],zu[Xc+2]));for(Xc=0,ju=Hu.length;Xc<ju;Xc+=3){var _c=Hu[Xc],_f=Hu[Xc+1],ep=Hu[Xc+2],tp=new r$3.Vector3().crossVectors(Wu[_f].clone().sub(Wu[_c]),Wu[ep].clone().sub(Wu[_c])).normalize();_h.push({a:_c,b:_f,c:ep,normal:tp})}for(Xc=0,ju=_h.length;Xc<ju;Xc++)for(var op=_h[Xc],lp=0;lp<3;lp++){var up=op[Nu[lp]],hp=op[Nu[(lp+1)%3]],np=[Math.min(up,hp),Math.max(up,hp)];Fu[rp=np[0]+"-"+np[1]]===void 0?Fu[rp]={index1:np[0],index2:np[1],face1:Xc}:Fu[rp].face2=Xc}for(var rp in Fu){var ip=Fu[rp];if(ip.face2===void 0||_h[ip.face1].normal.dot(_h[ip.face2].normal)<=Lu){var ap=Wu[ip.index1],sp=Wu[ip.index2];Ru.push(new r$3.Line3(ap,sp))}}Gu.dispose(),Wu.length=0,_h.length=0}}return Ru},Tu.prototype.hasFloors=function(){return this.hasFloors_()},Tu.prototype.hasFloors_=function(){var Pu=[];return this.traverse(function(Bu){Bu instanceof ft$1&&(Pu[Bu.floorIndex]=!0)}),Pu.length},Tu.prototype.show=function(){for(var Pu,Bu,Lu=[],Ru=0;Ru<arguments.length;Ru++)Lu[Ru]=arguments[Ru];var Ou=this.shownFloor,Du=null,ku=(Pu=Lu[1])!==null&&Pu!==void 0?Pu:.1,Fu=Lu.length!==0;this.shownFloor=Du=Fu?Lu[0]:null,this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)}),!((Bu=this.tiledModel)===null||Bu===void 0)&&Bu.enable?this.b3dmShow(Ou,Du):this.at3dShow(Ou,Du,ku)},Tu.prototype.at3dShow=function(Pu,Bu,Lu){this.traverse(function(Ru){Ru instanceof ft$1&&Ru.material.forEach(function(Ou){Bu===null||Bu===Ru.floorIndex?Ou.opacity=1*Ou.originOpacity:Ou.opacity=Ou.originOpacity*Lu})}),Pu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},Tu.prototype.b3dmShow=function(Pu,Bu){var Lu,Ru;if(!((Ru=(Lu=this.tiledModel)===null||Lu===void 0?void 0:Lu.tileset)===null||Ru===void 0)&&Ru.floorInfo){if(typeof Bu=="number"&&Bu>=0&&Bu<this.tiledModel.tileset.floorInfo.length){var Ou=this.tiledModel.tileset.floorInfo,Du=-Ou[Bu].ground,ku=Ou[Bu].height+Du;this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(Du,ku,0)})}else this.setMaterial({opacity:1,floorInfo:new r$3.Vector3(0,0,0)});Pu!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0}},Tu.prototype.intersectRaycaster=function(Pu,Bu){var Lu=Pu.ray,Ru=Lu.origin,Ou=Lu.direction;if(oo(Bu))if(oo(this.shownFloor)){var Du=this.floorLength;Bu=[];for(var ku=-1;ku<Du;ku++)Bu.push(ku)}else Bu=[this.shownFloor];var Fu=[],Nu=[];Array.isArray(Bu)?Nu.push.apply(Nu,Bu):Nu.push(Bu);for(var Gu=function(_h){var Xc=zu.bvhs&&zu.bvhs[_h];if(Xc){var ju=new Ot$1(Ru.x,Ru.y,Ru.z),_c=new Ot$1(Ou.x,Ou.y,Ou.z);(_f=Xc.intersectRay(ju,_c,!0).map(function(tp){var op=tp.intersectionPoint,lp=tp.triangle,up=new r$3.Vector3(op.x,op.y,op.z);return{point:up,face:{normal:ao$1(lp).getNormal(new r$3.Vector3)},distance:Ru.distanceTo(up)}})).length&&Fu.push.apply(Fu,_f)}else if(zu.originModel){var _f,ep=[];zu.originModel.traverse(function(tp){tp instanceof ft$1&&tp.floorIndex===_h&&ep.push(tp)}),(_f=Pu.intersectObjects(ep).map(function(tp){return{face:tp.face?{normal:tp.face.normal}:void 0,point:tp.point,distance:tp.distance}})).length&&Fu.push.apply(Fu,_f)}},zu=this,Hu=0,Wu=Nu;Hu<Wu.length;Hu++)Gu(Wu[Hu]);return Fu.filter(function(_h){var Xc=_h.distance;return Xc<=Pu.far&&Xc>=Pu.near}).sort(function(_h,Xc){return _h.distance-Xc.distance})},Tu.prototype.buildBVH=function(){if(!this.bvhs.loaded&&this.originModel){var Pu=[];this.originModel.traverse(function(op){op instanceof ft$1&&(Pu[op.floorIndex]=Pu[op.floorIndex]||[],Pu[op.floorIndex].push(op.geometry))}),this.bvhs.length=0;for(var Bu=0,Lu=Pu;Bu<Lu.length;Bu++){var Ru=Lu[Bu],Ou=0;if(Ru){for(var Du=0,ku=Ru;Du<ku.length;Du++){var Fu=0;Fu=(Wu=ku[Du]).index?Wu.index.array.length:Wu.attributes.position.array.length/3,Ou+=3*Math.floor(Fu/3)}for(var Nu=new Float32Array(3*Ou),Gu=0,zu=0,Hu=Ru;zu<Hu.length;zu++){var Wu,_h=(Wu=Hu[zu]).attributes.position.array,Xc=Wu.index?Wu.index.array:null;if(Xc){for(var ju=3*Math.floor(Xc.length/3),_c=0,_f=void 0,ep=void 0;_c<ju;_c++)_f=3*(Gu+_c),ep=3*Xc[_c],Nu[_f]=_h[ep],Nu[_f+1]=_h[ep+1],Nu[_f+2]=_h[ep+2];Gu+=ju}else{for(ju=3*Math.floor(_h.length/3/3),_c=0,_f=void 0,ep=void 0;_c<ju;_c++)ep=3*_c,Nu[_f=3*(Gu+_c)]=_h[ep],Nu[_f+1]=_h[ep+1],Nu[_f+2]=_h[ep+2];Gu+=ju}}var tp=new qt().create(Nu).splitNode(50);this.bvhs.push(tp)}}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},Tu.prototype.load=function(Pu,Bu){var Lu=this;if(Bu===void 0&&(Bu={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Ru=function(Du,ku){if(ku===void 0&&(ku=[]),/^blob\:/.test(Du))return"at3d";var Fu=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Du);if(!Fu)return"";for(var Nu=0,Gu=String(Fu[1]).trim().split(".").slice(1).reverse();Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=ku.indexOf(zu);if(Hu>=0)return ku[Hu]}return""}(Pu.file,Object.keys(lo$1)),Ou=lo$1[Ru];if(!Ou)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Ru,") does not support."));return this.name=Pu.file,Ou(Pu,{textureOptions:Bu,allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}).then(function(Du){var ku=Du.objects,Fu=Du.texturePromise;Lu.bounding.makeEmpty();var Nu=Lu.originModel=new At$1;Nu.renderOrder=-3;for(var Gu=0,zu=ku;Gu<zu.length;Gu++)(Xc=zu[Gu]).traverse(function(_c){if(_c instanceof ft$1){var _f=_c.geometry;_f.boundingBox||_f.computeBoundingBox(),_f.boundingSphere||_f.computeBoundingSphere(),Lu.bounding.union(_f.boundingBox)}}),Nu.add(Xc);for(var Hu=Lu.bounding.getCenter(new r$3.Vector3),Wu=0,_h=ku;Wu<_h.length;Wu++){var Xc;(Xc=_h[Wu]).traverse(function(_c){if(_c instanceof ft$1)for(var _f=0,ep=_c.material;_f<ep.length;_f++)ep[_f].uniforms.modelCenter.value=Hu})}if(Lu.add(Nu),Lu.floorLength=Lu.hasFloors_(),Lu.empty=!1,Lu.loaded=!0,Pu.tiles&&Pu.tiles.tileset_url&&Pu.tiles.b3md_mappings_url){var ju=Lu.tiledModel=new ro({onNodeCreated:function(_c){var _f=Nu.getMaterial();_f&&(_c.setMaterial(_f),_c.renderOrder=-3),_c.traverse(function(ep){if(ep instanceof ft$1)for(var tp=0,op=ep.material;tp<op.length;tp++)op[tp].uniforms.modelCenter.value=Hu})},allowHosts:Lu.allowHosts,networkSubscribe:Lu.networkSubscribe,requestProxy:Lu.requestProxy});ju.renderOrder=-3,Lu.add(ju),ju.load(Pu.tiles)}Pu.bvh&&Lu.buildBVH(),jt$1(function(){Lu.emit("geometryLoaded"),Fu.then(function(){Lu.emit("materialLoaded"),Lu.emit("loaded")})})}).catch(function(Du){return Lu.name="",Lu.emit("error",Du),Promise.reject(Du)})},Tu.prototype.update=function(Pu,Bu){if(this.originModel){var Lu=this.originModel.visible;if(this.tiledModel&&this.tiledModel.enable&&this.tiledModel.tileset){this.tiledModel.update(Pu,Bu);var Ru=this.tiledModel.tileset.root;Ru.content&&Ru.contentState==="READY"&&Lu!==!1&&(this.setTransparent(!1),this.shownFloor&&this.show(this.shownFloor),this.originModel.visible=!1,this.originModel.needsRender=!0)}else Lu!==!0&&(this.originModel.visible=!0,this.originModel.needsRender=!0)}},Tu.prototype.dispose=function(){this.off();var Pu=this.originModel,Bu=this.tiledModel;if(Bu&&(Bu.enable=!1,Bu.reset()),Pu)for(Pu.disposeGeometry(),Pu.disposeMaterial();Pu.children.length;)Pu.remove(Pu.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},Tu}(At$1);Object.assign(uo.prototype,{on:Fe.prototype.on,once:Fe.prototype.once,off:Fe.prototype.off,emit:Fe.prototype.emit,hasListener:Fe.prototype.hasListener});function ho(Cu,Tu,Pu){return Cu<Tu?Tu:Cu>Pu?Pu:Cu}function co(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=[];Cu=Cu.map(function(Du){return(Du!=null?Du:"").trim()}).filter(function(Du){return Du.length>0&&!/^\/+$/.test(Du)});for(var Bu=0;Bu<Cu.length;Bu++){var Lu=Bu===0,Ru=Bu===Cu.length-1,Ou=Cu[Bu];Lu||(Ou=Ou.replace(/^\/+/,"")),Ru||(Ou=Ou.replace(/\/+$/,"")),Pu.push(Ou)}return Pu.join("/")}function po$1(Cu,Tu){if(Cu===Tu)return!0;if(Cu&&Tu&&typeof Cu=="object"&&typeof Tu=="object"){if(Cu.constructor!==Tu.constructor)return!1;var Pu,Bu,Lu;if(Array.isArray(Cu)){if((Pu=Cu.length)!=Tu.length)return!1;for(Bu=Pu;Bu--!=0;)if(!po$1(Cu[Bu],Tu[Bu]))return!1;return!0}if(Cu.constructor===RegExp)return Cu.source===Tu.source&&Cu.flags===Tu.flags;if(Cu.valueOf!==Object.prototype.valueOf)return Cu.valueOf()===Tu.valueOf();if(Cu.toString!==Object.prototype.toString)return Cu.toString()===Tu.toString();if((Pu=(Lu=Object.keys(Cu)).length)!==Object.keys(Tu).length)return!1;for(Bu=Pu;Bu--!=0;)if(!Object.prototype.hasOwnProperty.call(Tu,Lu[Bu]))return!1;for(Bu=Pu;Bu--!=0;){var Ru=Lu[Bu];if(!po$1(Cu[Ru],Tu[Ru]))return!1}return!0}return Cu!=Cu&&Tu!=Tu}function fo(Cu){return typeof Cu=="number"}function Ao$1(Cu){return(Cu&Cu-1)==0&&Cu!==0}var go$1=function(){return new Error("Invalid input.")},mo$1=function(){return new Error("Invalid certificate.")},vo$1=function(){return new Error("Invalid signature.")};function yo$1(Cu,Tu){Tu===void 0&&(Tu=!1);var Pu=typeof Cu;if(Pu==="string")return JSON.stringify(Cu);if(Cu===!0)return"true";if(Cu===!1)return"false";if(Cu===null)return"null";if(Cu instanceof Array){for(var Bu="[",Lu=Cu.length-1,Ru=0;Ru<Lu;Ru++)Bu+=yo$1(Cu[Ru],!1)+",";return Lu>-1&&(Bu+=yo$1(Cu[Ru],!1)),Bu+"]"}if(Cu instanceof Object){if(typeof Cu.toJSON=="function")return yo$1(Cu.toJSON(),Tu);var Ou=Object.keys(Cu).sort(),Du=Ou.length;for(Bu="",Ru=0;Ru<Du;){var ku=Ou[Ru],Fu=yo$1(Cu[ku],!0);Fu!==void 0&&(Ru&&Bu!==""&&(Bu+=","),Bu+=JSON.stringify(ku)+":"+Fu),Ru++}return"{"+Bu+"}"}switch(Pu){case"function":case"undefined":return Tu?void 0:null;case"number":return 0;default:return isFinite(Cu)?Cu:null}}function bo$1(Cu){return String(yo$1(Cu,!1))}function xo$1(Cu){var Tu,Pu,Bu;if(Array.isArray(Cu)){var Lu,Ru,Ou=void 0;if(Cu.length<=0)return go$1();for(var Du=function(ep){var tp=xo$1(Cu[ep]);if(tp instanceof Error)return{value:tp};if(Ou){if(Ou!==tp.issuer)return{value:mo$1()}}else Ou=tp.issuer;Lu?tp.expire.getTime()<Lu.getTime()&&(Lu=tp.expire):Lu=tp.expire,Ru=Ru?Ru.filter(function(op){return tp.allowHosts.indexOf(op)!==-1}):tp.allowHosts},ku=0;ku<Cu.length;ku++){var Fu=Du(ku);if(typeof Fu=="object")return Fu.value}return He({issuer:Ou,expire:Lu,allowHosts:Ru})}var Nu=JSON.parse(Cu),Gu=typeof location!="undefined"?location.hostname:"",zu=Date.now();if(typeof Nu!="object")return go$1();var Hu=new Date(typeof Nu.expire_at=="string"&&/^\d+$/.test(Nu.expire_at)?Number(Nu.expire_at):Nu.expire_at),Wu=Array.isArray(Nu.allow_hosts)?Nu.allow_hosts:[];if(Gu.length===0||ze(Gu)||je$1.filter(function(ep){return Ke$1(ep,Gu)}).length>0){var _h=String((Tu=Nu.certificate)!==null&&Tu!==void 0?Tu:"");if(_h){var Xc=new Be;return Xc.readCertPEM(_h),He({issuer:Xc.getSubjectString(),expire:Hu,allowHosts:Wu})}return He({issuer:"none",expire:Hu,allowHosts:Wu})}var ju=String((Pu=Nu.certificate)!==null&&Pu!==void 0?Pu:"");if(!ju)return mo$1();var _c=new Be;_c.readCertPEM(ju);var _f=String((Bu=Nu._signature)!==null&&Bu!==void 0?Bu:"");return _f?function(ep,tp,op){var lp=new Be;if(typeof op=="string"?lp.readCertPEM(op):lp.readCertHex(op.hex),De(lp)===!1)return!1;var up=new X$1;return up.readCertPubKeyHex(lp.hex,6),!!up.verify(ep,O$2(tp))}(bo$1(function(ep,tp){for(var op={},lp=0,up=Object.keys(ep);lp<up.length;lp++){var hp=up[lp];tp.indexOf(hp)===-1&&(op[hp]=ep[hp])}return op}(Nu,["_signature"])),_f,_c)===!1?vo$1():zu<Hu.getTime()?Wu.filter(function(ep){return Ke$1(ep,Gu)}).length===0?function(ep){return new Error("host(".concat(JSON.stringify(ep),") is not allowed."))}(Gu):He({issuer:_c.getSubjectString(),expire:Hu,allowHosts:Wu}):function(ep){return new Error("date(".concat(ep.toString(),") expired."))}(Hu):vo$1()}var wo$1=new WeakMap,Eo$1=function(){function Cu(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return Cu.prototype.toJSON=function(){return this.raw.works},Cu.parse=Co$1,Cu}();function Mo$1(Cu){return Cu==null?"null":Array.isArray(Cu)?"array":typeof Cu=="object"?"dict":"value"}function Io(Cu,Tu){var Pu=Mo$1(Cu),Bu=Mo$1(Tu);if(Bu==="null")return Cu;if(Bu==="value")return Tu;if(Bu!==Pu)return JSON.parse(JSON.stringify(Tu));if(Bu==="array")for(var Lu=0;Lu<Tu.length;Lu++)Cu[Lu]=Io(Cu[Lu],Tu[Lu]);else if(Bu==="dict")for(var Ru in Tu)Cu[Ru]=Io(Cu[Ru],Tu[Ru]);return Cu}function So(Cu,Tu,Pu){for(var Bu,Lu=JSON.stringify(Tu),Ru=[],Ou=0,Du=[].concat(Cu);Ou<Du.length;Ou++){var ku=Du[Ou];ku instanceof Eo$1?Ru.push.apply(Ru,ku.raw.works):typeof ku=="string"?Ru.push(ku):Ru.push(JSON.stringify(ku))}var Fu=xo$1(Ru);if(Fu instanceof Error)return Fu;Tu=JSON.parse(Lu),Cu=Ru.map(function(Vp){return JSON.parse(Vp)}).reduce(function(Vp,pp){return Io(Vp,pp)});var Nu=new Eo$1;if(Fu instanceof Error)return Fu;Nu.issuer=Fu.issuer,Nu.expire=Fu.expire,Nu.allowHosts=Fu.allowHosts,Nu.raw={works:Ru,options:Lu};var Gu=(Bu=Cu.base_url)!==null&&Bu!==void 0?Bu:"";Gu&&Gu[Gu.length-1]!=="/"&&(Gu+="/");var zu=function(Vp,pp){return Vp.indexOf(pp)===0},Hu=function(Vp,pp){var bp,zp=Vp;if(Tu.jsonp===!0){zp=Vp.replace(/([\?\#].*)?$/i,"");var Up=Te("".concat(zp)).slice(0,7);zp="".concat(zp,".").concat(Up,".jsonp")}if(Tu.shortPath===!0){var Jp=zp.replace(Gu,"").split("."),Xp=(bp=Jp.shift())!==null&&bp!==void 0?bp:"",tm=Jp.join(".");zp=co(Gu,Te(Xp))+(tm?"."+tm:"")}var lm=zp.replace(Gu,"");return Tu.baseURL&&(zp=co(Tu.baseURL,lm)),Pu&&Pu(Vp,zp,lm,pp),zp},Wu=function(Vp,pp){var bp,zp,Up,Jp,Xp,tm,lm=Vp;if(!Fi(Vp)){var am=(tm=(Jp=(zp=(bp=Cu.panorama)===null||bp===void 0?void 0:bp.pano_high_cube_base_url)!==null&&zp!==void 0?zp:(Up=Cu.panorama)===null||Up===void 0?void 0:Up.pano_cube_base_url)!==null&&Jp!==void 0?Jp:(Xp=Cu.panorama)===null||Xp===void 0?void 0:Xp.base_url)!==null&&tm!==void 0?tm:"";am&&(am=co(am,String(pp))),lm=co(am,lm)}return Fi(lm)||(lm=co(Gu,lm)),zu(lm,Gu)||console.warn("".concat(lm," is not start with base_url(").concat(Gu,").")),Hu(lm,"panorama")},_h=function(Vp){var pp=Vp;return Fi(pp)||(pp=co(Gu,Vp)),zu(pp,Gu)||console.warn("".concat(pp," is not start with base_url(").concat(Gu,").")),Hu(pp,"model")},Xc=function(Vp,pp){pp===void 0&&(pp="");var bp=Vp;return Fi(bp)||(bp=co(pp,bp)),Fi(bp)||(bp=co(Gu,bp)),zu(bp,Gu)||console.warn("".concat(bp," is not start with base_url(").concat(Gu,").")),Hu(bp,"texture")};if(Fu instanceof Error||(Nu.workCode=String(Cu.work_code||Cu.code||Cu.vr_code||Cu.workCode),Nu.name=String(Cu.name),Fu instanceof Error))return Fu;if(Cu.model){var ju={bvh:!0,async:!1,textureBase:"",textures:[]};typeof Tu.modelBvh=="boolean"?ju.bvh=Tu.modelBvh:typeof Cu.model.bvh=="boolean"?ju.bvh=Cu.model.bvh:typeof Cu.bvh=="boolean"&&(ju.bvh=Cu.bvh),Cu.model.file?ju.file=_h(Cu.model.file):Cu.model.file_url&&(ju.file=_h(Cu.model.file_url)),Cu.model.textureBase?ju.textureBase=Cu.model.textureBase:Cu.model.material_base_url&&(ju.textureBase=Cu.model.material_base_url),Array.isArray(Cu.model.textures)?ju.textures=Cu.model.textures.map(function(Vp){return Xc(Vp,ju.textureBase)}):Array.isArray(Cu.model.material_textures)&&(ju.textures=Cu.model.material_textures.map(function(Vp){return Xc(Vp,ju.textureBase)})),Cu.model.tiles&&(ju.tiles=Cu.model.tiles),ju.file&&(Nu.model=ju)}if(Fu instanceof Error)return Fu;if(Cu.observers&&Array.isArray(Cu.observers)){var _c=[];Cu.panorama&&(Array.isArray(Cu.panorama)?_c=Cu.panorama:Array.isArray(Cu.panorama.list)?_c=Cu.panorama.list:Array.isArray(Cu.panorama.info)&&(_c=Cu.panorama.info));for(var _f=0;_f<Cu.observers.length;_f++){var ep={},tp=Cu.observers[_f];if(!tp)break;var op=_c[_f];if(!op)break;tp=Object.assign({},tp,op,{active:tp.active!==!1&&op.active!==!1}),ep.panoIndex=_f,ep.active=tp.active!==!1,ep.loadable=tp.loadable===!0,ep.images={up:Wu(tp.images?tp.images.up:tp.up,_f),down:Wu(tp.images?tp.images.down:tp.down,_f),right:Wu(tp.images?tp.images.right:tp.right,_f),left:Wu(tp.images?tp.images.left:tp.left,_f),front:Wu(tp.images?tp.images.front:tp.front,_f),back:Wu(tp.images?tp.images.back:tp.back,_f)};var lp=tp.images?tp.images.depth:tp.depth;lp&&(ep.images.depth=Wu(lp,_f));var up=tp.images?tp.images.luminance:tp.luminance;up&&(ep.images.luminance={up:Wu(up.up,_f),down:Wu(up.down,_f),right:Wu(up.right,_f),left:Wu(up.left,_f),front:Wu(up.front,_f),back:Wu(up.back,_f)});var hp=tp.images?tp.images.tiles:tp.tiles;if(hp){for(var np=[],rp=function(Vp){var pp=Vp.match(/\/cube_(\d+)\//);if(pp){var bp=Number(pp[1]);if(Ao$1(bp))return bp}return!1},ip=function(Vp,pp){return Vp.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(pp,"/")})},ap=0,sp=hp;ap<sp.length;ap++){var cp=sp[ap];if(typeof cp=="number"){var dp=cp,fp=rp(ep.images.front);if(fp===!1)continue;if((Rp=Math.max(fp,512*Math.pow(2,dp)))>2048){var vp=ip(ep.images.up,Rp),_p=ip(ep.images.down,Rp),wp=ip(ep.images.right,Rp),Dp=ip(ep.images.left,Rp),Pp=ip(ep.images.front,Rp),Wp=ip(ep.images.back,Rp);np.push({level:dp,size:Rp,up:vp,down:_p,right:wp,left:Dp,front:Pp,back:Wp})}else vp=ep.images.up,_p=ep.images.down,wp=ep.images.right,Dp=ep.images.left,Pp=ep.images.front,Wp=ep.images.back,np.push({level:dp,size:Rp,up:vp,down:_p,right:wp,left:Dp,front:Pp,back:Wp})}else{var Rp;if(typeof(dp=cp.level)!="number"||typeof(Rp=cp.size)!="number")continue;vp=Wu(cp.up,_f),_p=Wu(cp.down,_f),wp=Wu(cp.right,_f),Dp=Wu(cp.left,_f),Pp=Wu(cp.front,_f),Wp=Wu(cp.back,_f),np.push({level:dp,size:Rp,up:vp,down:_p,right:wp,left:Dp,front:Pp,back:Wp})}}np.sort(function(Vp,pp){return Vp.level-pp.level}),ep.images.tiles=np}if(tp.position instanceof r$3.Vector3)ep.position=tp.position.clone();else{if(!Array.isArray(tp.position))break;ep.position=new r$3.Vector3().fromArray(tp.position)}if(tp.standingPosition instanceof r$3.Vector3)ep.standingPosition=tp.standingPosition.clone();else if(Array.isArray(tp.standingPosition))ep.standingPosition=new r$3.Vector3().fromArray(tp.standingPosition);else if(tp.standing_position instanceof r$3.Vector3)ep.standingPosition=tp.standing_position.clone();else{if(!Array.isArray(tp.standing_position))break;ep.standingPosition=new r$3.Vector3().fromArray(tp.standing_position)}if(tp.quaternion instanceof r$3.Quaternion)ep.quaternion=tp.quaternion.clone();else if(Array.isArray(tp.quaternion))ep.quaternion=new r$3.Quaternion().fromArray(tp.quaternion);else{if(!tp.quaternion)break;var Gp=tp.quaternion,kp=Gp.x,gp=Gp.y,mp=Gp.z,Sp=Gp.w;ep.quaternion=new r$3.Quaternion(kp,gp,mp,Sp)}if(Array.isArray(tp.accessibleNodes)?ep.accessibleNodes=tp.accessibleNodes.slice():Array.isArray(tp.accessible_nodes)&&(ep.accessibleNodes=tp.accessible_nodes.slice()),Array.isArray(tp.visibleNodes)?ep.visibleNodes=tp.visibleNodes.slice():Array.isArray(tp.visible_nodes)&&(ep.visibleNodes=tp.visible_nodes.slice()),fo(tp.floorIndex)?ep.floorIndex=tp.floorIndex:fo(tp.floor_index)?ep.floorIndex=tp.floor_index:ep.floorIndex=0,tp.video){var xp={};typeof tp.video.source=="string"&&(xp.source=tp.video.source),tp.video.matrix instanceof r$3.Matrix4?xp.matrix=tp.video.matrix.clone():Array.isArray(tp.video.matrix)&&(xp.matrix=new r$3.Matrix4().fromArray(tp.video.matrix)),tp.video.size instanceof r$3.Vector2?xp.size=tp.video.size.clone():Array.isArray(tp.video.size)&&(xp.size=new r$3.Vector2().fromArray(tp.video.size)),xp.source&&xp.matrix&&xp.size&&(ep.video=xp)}Nu.observers[_f]=ep}}if(Fu instanceof Error)return Fu;for(var Ep=0,$p=Nu.observers;Ep<$p.length;Ep++){if((ep=$p[Ep]).accessibleNodes)ep.accessibleNodes=ep.accessibleNodes.filter(function(Vp){return Vp<Nu.observers.length});else{ep.accessibleNodes=[];for(var Ip=0;Ip<Nu.observers.length;Ip++)Nu.observers[Ip]!==ep&&ep.accessibleNodes.push(Ip)}if(ep.visibleNodes)ep.visibleNodes=ep.visibleNodes.filter(function(Vp){return Vp<Nu.observers.length});else for(ep.visibleNodes=[],Ip=0;Ip<Nu.observers.length;Ip++)Nu.observers[Ip]!==ep&&ep.visibleNodes.push(Ip)}if(Fu instanceof Error)return Fu;if(Cu.initial)if(Cu.initial.mode!=="Floorplan"&&Cu.initial.mode!=="Topview"&&Cu.initial.mode!=="Panorama"&&Cu.initial.mode!=="VRPanorama"&&Cu.initial.mode!=="Model"&&Cu.initial.mode!=="DepthPanorama"||(Nu.initial.mode=Cu.initial.mode),fo(Cu.initial.latitude)&&(Nu.initial.latitude=Cu.initial.latitude),fo(Cu.initial.longitude)?Nu.initial.longitude=Cu.initial.longitude:fo(Cu.initial.heading)&&(Nu.initial.longitude=-(360*(Cu.initial.heading-.25)+90)/180*Math.PI),fo(Cu.initial.fov)&&(Nu.initial.fov=Cu.initial.fov),fo(Cu.initial.panoIndex)){var Np=Nu.observers.length>0?Nu.observers.length-1:0;Nu.initial.panoIndex=ho(Cu.initial.panoIndex,0,Np)}else fo(Cu.initial.pano_index)?(Np=Nu.observers.length>0?Nu.observers.length-1:0,Nu.initial.panoIndex=ho(Cu.initial.pano_index,0,Np)):fo(Cu.initial.pano)&&(Np=Nu.observers.length>0?Nu.observers.length-1:0,Nu.initial.panoIndex=ho(Cu.initial.pano,0,Np));if(Fu instanceof Error)return Fu;var qp=He(Nu);return wo$1.set(qp,{works:Ru,options:Lu}),qp}function Co$1(Cu,Tu,Pu){typeof Cu=="string"&&Cu.trim()[0]==="{"&&(Cu=JSON.parse(Cu));var Bu=wo$1.get(Cu);if(Bu){if(Tu&&!po$1(JSON.parse(Bu.options),Tu))throw new Error("[PARSE FAILED]: work is parsed with different options.");return Cu}var Lu=So(Cu,Tu!=null?Tu:{},Pu);if(Lu instanceof Error)throw new Error("[PARSE FAILED]: "+Lu.message);return Lu}function Bo$1(Cu,Tu,Pu){return Cu+(Tu-Cu)*Pu}function To(Cu,Tu){var Pu=Tu[1]-Tu[0];return Cu<Tu[0]?To(Cu+Pu,Tu):Cu>=Tu[1]?To(Cu-Pu,Tu):Cu}function Po$1(Cu,Tu,Pu,Bu){return Bu?function(Lu,Ru,Ou,Du){var ku=Du[1]-Du[0];return Lu=To(Lu,Du),Bo$1((Ru=To(Ru,Du))-Lu>ku/2?Lu+ku:Lu-Ru>ku/2?Lu-ku:Lu,Ru,Ou)}(Cu,Tu,Pu,Bu):Bo$1(Cu,Tu,Pu)}var Ro$1=function(){function Cu(Tu){for(var Pu in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=_e$1(),this.startVelocity=0,this.duration=0,this.keyframes=[],Tu){var Bu=Tu[Pu];typeof Bu=="number"?(this.value[Pu]=Bu,this.config[Pu]={circle:!1}):(this.value[Pu]=Bu.value,this.config[Pu]={circle:Bu.circle})}this.keyframes=[{progress:0,value:t$3.__assign({},this.value)},{progress:1,value:t$3.__assign({},this.value)}]}return Cu.prototype.getProgress=function(Tu){var Pu=Tu-this.startTime;return Pu<0?0:Pu>=this.duration?1:1-function(Bu,Lu,Ru,Ou){var Du=(Lu*Ru+2*Bu)/Math.pow(Ru,3),ku=-(2*Lu*Ru+3*Bu)/Math.pow(Ru,2),Fu=Lu,Nu=Bu;return Du*Math.pow(Ou,3)+ku*Math.pow(Ou,2)+Fu*Ou+Nu}(1,this.startVelocity,this.duration,Pu)},Cu.prototype.getValue=function(Tu){for(var Pu=1;Pu<this.keyframes.length;Pu++)if(this.keyframes[Pu].progress>Tu){var Bu=this.keyframes[Pu-1],Lu=this.keyframes[Pu],Ru={};for(var Ou in this.config){var Du=(Tu-Bu.progress)/(Lu.progress-Bu.progress);Ru[Ou]=Po$1(Bu.value[Ou],Lu.value[Ou],Du,this.config[Ou].circle)}return Ru}return t$3.__assign({},this.keyframes[this.keyframes.length-1].value)},Cu.prototype.getProgressVelocity=function(Tu){var Pu=Tu-this.startTime;return Pu>=this.duration?0:function(Bu,Lu,Ru,Ou){var Du=(Lu*Ru+2*Bu)/Math.pow(Ru,3),ku=-(2*Lu*Ru+3*Bu)/Math.pow(Ru,2),Fu=Lu;return 3*Du*Math.pow(Ou,2)+2*ku*Ou+Fu}(1,this.startVelocity,this.duration,Pu)},Cu.prototype.update=function(Tu){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(Tu))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},Cu.prototype.getKeyFrameSegment=function(Tu){for(var Pu=this.getProgress(Tu),Bu=1;Bu<this.keyframes.length;Bu++)if(this.keyframes[Bu].progress>Pu)return[this.keyframes[Bu-1],this.keyframes[Bu]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},Cu.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},Cu.prototype.set=function(Tu,Pu,Bu,Lu){var Ru;Bu===void 0&&(Bu=0),isNaN(Pu)&&(Pu=0),isNaN(Bu)&&(Bu=0),Lu=Lu!=null?Lu:_e$1();var Ou=this.getProgress(Lu),Du=this.getValue(Ou),ku={};for(var Fu in this.config)ku[Fu]=(Ru=Tu[Fu])!==null&&Ru!==void 0?Ru:Du[Fu];var Nu=[{progress:0,value:Du},{progress:1,value:ku}];return this.setKeyframes(Nu,Pu,Bu,Lu)},Cu.prototype.setKeyframes=function(Tu,Pu,Bu,Lu){var Ru=this;if(Bu===void 0&&(Bu=0),Tu.length<2)throw new Error("keyframes invalid.");return isNaN(Pu)&&(Pu=0),isNaN(Bu)&&(Bu=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Ou,Du){Lu=Lu!=null?Lu:_e$1(),Ru.progress=0,Ru.ended=!1,Ru.startTime=Lu,Ru.startVelocity=Bu,Ru.keyframes=Tu,Ru.duration=Pu,Pu===0?(Ru.progress=1,Ru.value=t$3.__assign({},Tu[Tu.length-1].value)):Ru.value=t$3.__assign({},Tu[0].value),Ru.callbacks=[Ou,Du]})},Cu.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},Cu}(),ko$1=yt$1(),Do$1=new r$3.Texture(ko$1);ko$1.onload=function(){return Do$1.needsUpdate=!0},ko$1.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Lo$1=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),Oo$1=new r$3.MeshBasicMaterial({map:Do$1,transparent:!0}),No=new r$3.SphereBufferGeometry(.12,16,16),Fo=new r$3.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function Qo(){if(typeof document=="undefined"){var Cu=new r$3.Texture;return Object.assign(Cu,{draw:function(Nu){},retain:!1,pool:!1})}var Tu=document.createElement("canvas"),Pu=512,Bu=256,Lu=190;Tu.setAttribute("width",String(Pu)),Tu.setAttribute("height",String(Pu));var Ru=new r$3.Texture(Tu),Ou=Tu.getContext("2d");if(!Ou)throw Error("cannot create canvas context");var Du=Ou.createRadialGradient(Bu,Bu,150,Bu,Bu,0);function ku(){var Nu=Math.PI/12,Gu=2*Math.PI/3;Ou&&(Ou.beginPath(),Ou.arc(Bu,Bu,Lu,0*Gu,1*Gu-Nu),Ou.stroke(),Ou.beginPath(),Ou.arc(Bu,Bu,Lu,1*Gu,2*Gu-Nu),Ou.stroke(),Ou.beginPath(),Ou.arc(Bu,Bu,Lu,2*Gu,3*Gu-Nu),Ou.stroke())}function Fu(Nu){Ou&&(Ou.clearRect(0,0,Pu,Pu),Ou.lineWidth=20,Nu!==-1&&(Ou.globalCompositeOperation="source-over",Ou.strokeStyle="rgba(255, 255, 255, 1)",ku(),Ou.globalCompositeOperation="source-in",Ou.beginPath(),Ou.arc(Bu,Bu,Lu,0,2*Math.PI*Nu),Ou.strokeStyle="rgba(255, 255, 255, 1)",Ou.stroke(),Ou.globalCompositeOperation="source-over",Ou.strokeStyle="rgba(255, 255, 255, "+(Nu?.5:1)+")",ku()),Ou.beginPath(),Ou.arc(Bu,Bu,150,0,2*Math.PI),Ou.closePath(),Ou.fillStyle=Du,Ou.fill(),Ou.fillStyle="rgba(255, 255, 255, 0.01)",Ou.fillRect(0,0,Pu,Pu),Ru.needsUpdate=!0)}return Du.addColorStop(0,"rgba(255, 255, 255, 1)"),Du.addColorStop(.15,"rgba(255, 255, 255, 1)"),Du.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Du.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Du.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Fu(0),Object.assign(Ru,{draw:Fu,retain:!1,pool:!1})}var Vo$1=[],_o$1=Qo();_o$1.draw(0);var Ho=Qo();Ho.draw(1);var qo$1=Qo();qo$1.draw(-1);var zo$1=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Ko$1(){return new r$3.Mesh(zo$1,new r$3.MeshBasicMaterial({map:_o$1,transparent:!0}))}function Uo$1(Cu,Tu){var Pu=Cu.map;Tu===0||Tu===1?(Pu.pool===!0&&(Pu.retain=!1),Tu===0&&(Cu.map=_o$1),Tu===1&&(Cu.map=Ho)):(Pu.pool!==!0&&(Cu.map=function(){for(var Bu=0,Lu=Vo$1;Bu<Lu.length;Bu++){var Ru=Lu[Bu];if(Ru.retain===!1)return Ru}var Ou=Qo();return Ou.pool=!0,Ou.retain=!0,Vo$1.push(Ou),Ou}()),Cu.map.draw(Tu))}var jo$1=function(Cu){function Tu(){var Pu=Cu.call(this)||this;return Pu.loading=!1,Pu.disabled=!1,Pu.current=!1,Pu.progress=0,Pu.opacity=0,Pu.hitTestMesh=new r$3.Mesh(No,Fo),Pu.add(Pu.hitTestMesh),Pu.centerMesh=Ko$1(),Pu.centerMesh.position.y+=.01,Pu.add(Pu.centerMesh),Pu.loadingMesh=new r$3.Mesh(Lo$1,Oo$1),Pu.loadingMesh.position.y+=.011,Pu.progressMotion=new Ro$1({progress:Pu.progress}),Pu.opacityMotion=new Ro$1({opacity:Pu.opacity}),Pu.needsRender=!0,Pu.renderOrder=-2,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.setLoading=function(Pu){var Bu=this;this.loading=Pu,this.stopInterval&&this.stopInterval(),Pu?(this.add(this.loadingMesh),this.stopInterval=at.shared.add(function(){Bu.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),Bu.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},Tu.prototype.setDisabled=function(Pu){this.disabled=Pu,function(Bu,Lu){var Ru=Bu.map;Ru.pool===!0&&(Ru.retain=!1),Bu.map=Lu?qo$1:_o$1}(this.centerMesh.material,Pu),this.needsRender=!0},Tu.prototype.setProgress=function(Pu){this.setLoading(!1),this.setDisabled(!1),this.progress=Pu=ho(Pu,0,1),Pu!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:Pu},120).catch(Qe$1)},Tu.prototype.setOpacity=function(Pu){this.opacity=Pu=ho(Pu,0,1),this.current&&(Pu=1),Pu!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:Pu},500).catch(Qe$1)},Tu.prototype.setCurrent=function(Pu){this.current!==Pu&&(this.current=Pu,this.setOpacity(this.opacity))},Tu.prototype.updateTime=function(Pu,Bu){this.opacityMotion.ended||(this.opacityMotion.update(Pu),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(Pu),Uo$1(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},Tu.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},Tu}(r$3.Object3D),Go=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Wo=new Float32Array([0,1,1,1,0,0,1,0]),Xo=new Uint8Array([0,2,1,2,3,1]),Yo=new r$3.BufferGeometry;Yo.setAttribute("position",new r$3.BufferAttribute(Go,3)),Yo.setAttribute("uv",new r$3.BufferAttribute(Wo,2)),Yo.setIndex(new r$3.BufferAttribute(Xo,1));var Zo$1,Jo$1,$o$1=(Zo$1=yt$1(),Jo$1=new r$3.Texture,Zo$1.onload=function(){if(typeof document!="undefined"){var Cu=256,Tu=document.createElement("canvas");Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Pu=Tu.getContext("2d");if(Pu){Pu.drawImage(Zo$1,0,0,Cu,Cu),Pu.globalCompositeOperation="source-out";var Bu=128;Pu.beginPath(),Pu.lineWidth=29.952,Pu.arc(Bu,Bu,84.48,0,2*Math.PI),Pu.strokeStyle="rgba(255, 255, 255, 0.5)",Pu.closePath(),Pu.stroke(),Jo$1.image=Tu,Jo$1.needsUpdate=!0}}},Zo$1.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Jo$1),es$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=199.68;return Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),ts$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=138.24,Lu=Tu.createLinearGradient(Pu-Math.cos(Math.PI/4)*Bu,Pu-Math.sin(Math.PI/4)*Bu,Pu+Math.cos(Math.PI/4)*Bu,Pu+Math.sin(Math.PI/4)*Bu);return Lu.addColorStop(0,"rgba(255, 255, 255, 1)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Lu.addColorStop(1,"rgba(255, 255, 255, 1)"),Tu.beginPath(),Tu.lineWidth=33.28,Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle=Lu,Tu.shadowBlur=38.4,Tu.shadowColor="rgba(0, 0, 0, 0.3)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),is$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=199.68,Lu=Tu.createLinearGradient(Pu+Math.cos(Math.PI/4)*Bu,Pu-Math.sin(Math.PI/4)*Bu,Pu-Math.cos(Math.PI/4)*Bu,Pu+Math.sin(Math.PI/4)*Bu);return Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.beginPath(),Tu.lineWidth=15.36,Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle=Lu,Tu.shadowBlur=25.6,Tu.shadowColor="rgba(0, 0, 0, 0.5)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),ns$1=function(Cu,Tu){var Pu=128;Cu.clearRect(0,0,256,256),Cu.beginPath(),Cu.lineWidth=29.44,Cu.arc(Pu,Pu,84.48,0,2*Math.PI*Tu),Cu.strokeStyle="rgba(255, 255, 255, 0.2)",Cu.stroke()},rs$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(256)),Cu.setAttribute("height",String(256));var Tu=Cu.getContext("2d");Tu&&ns$1(Tu,2*Math.PI);var Pu=new r$3.CanvasTexture(Cu);return Object.assign(Pu,{setProgress:function(Bu){Tu&&(ns$1(Tu,Bu),Pu.needsUpdate=!0)}})}return null},os$1=[],ss=rs$1(),as$1=function(Cu){function Tu(){var Pu=Cu.call(this)||this;Pu.progress=0,Pu.opacity=0,Pu.loading=!1,Pu.current=!1,Pu.disabled=!1,Pu.ringRotateMotion=new Ro$1({angle:0}),Pu.tapMotion=new Ro$1({scale:1,opacity:1}),Pu.progressMotion=new Ro$1({progress:0}),Pu.progressOpacityMotion=new Ro$1({opacity:0}),Pu.opacityMotion=new Ro$1({opacity:0});var Bu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Pu.centerMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:ts$1,opacity:0}))),Pu.ringMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:is$1,opacity:0}))),Pu.loadingMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:$o$1,opacity:.5}))),Pu.disableMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:es$1,opacity:0}))),Pu.progressMesh=new r$3.Mesh(Yo,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:ss,opacity:0}))),Pu.loadingMesh.visible=!1,Pu.disableMesh.visible=!1,Pu.ringMesh.position.y=.003,Pu.disableMesh.position.y=.002,Pu.centerMesh.position.y=.002,Pu.loadingMesh.position.y=.005,Pu.progressMesh.position.y=.004,Pu.centerMesh.frustumCulled=!1,Pu.ringMesh.frustumCulled=!1,Pu.progressMesh.frustumCulled=!1,Pu.loadingMesh.frustumCulled=!1,Pu.disableMesh.frustumCulled=!1,Pu.renderOrder=-2,Pu.add(Pu.centerMesh),Pu.add(Pu.ringMesh),Pu.add(Pu.progressMesh),Pu.add(Pu.loadingMesh),Pu.add(Pu.disableMesh),Pu.needsRender=!0,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.setProgress=function(Pu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Pu&&(Pu=ho(Pu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Pu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Pu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Pu,0,1)},100).catch(Qe$1)),this.progress=Pu)},Tu.prototype.setOpacity=function(Pu){this.opacity!==Pu&&(this.opacity=Pu=ho(Pu,0,1),this.opacityMotion.set({opacity:Pu},500).catch(Qe$1))},Tu.prototype.setCurrent=function(Pu){if(this.current!==Pu){if(Pu===!0&&this.ringRotateMotion.ended){var Bu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Bu,5e3).catch(Qe$1)}this.current=Pu}},Tu.prototype.setLoading=function(Pu){this.loading!==Pu&&(this.loading=Pu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Pu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Pu){this.disabled!==Pu&&(this.disabled=Pu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Pu,this.ringMesh.visible=!Pu,this.centerMesh.visible=!Pu,this.needsRender=!0)},Tu.prototype.tap=function(){var Pu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Pu.progressOpacityMotion.set({opacity:Pu.progress>0?1:0},300).catch(Qe$1),Pu.progressMotion.set({progress:Pu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},Tu.prototype.setResolution=function(Pu,Bu){var Lu=ho(Math.max(Pu,Bu)/1e3,1,1.8);this.scale.set(Lu,0,Lu)},Tu.prototype.updateTime=function(Pu,Bu){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Pu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ss&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else if(Ru===1)this.progressMesh.material.map!==ss&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=ss);else{if(this.progressMesh.material.map===ss){var Ou=os$1.pop()||rs$1();this.progressMesh.material.map=Ou}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Pu);var Du=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Du,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Pu),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Du,this.ringMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Bu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Pu);var ku=this.tapMotion.value.scale;this.centerMesh.scale.set(ku,ku,ku),this.ringMesh.scale.set(ku,ku,ku),this.progressMesh.scale.set(ku,ku,ku),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Du,this.ringMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Pu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},Tu.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ss&&(os$1.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),ls$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),us$1=new Float32Array([0,1,1,1,0,0,1,0]),hs=new Uint8Array([0,2,1,2,3,1]),cs$1=new r$3.BufferGeometry;cs$1.setAttribute("position",new r$3.BufferAttribute(ls$1,3)),cs$1.setAttribute("uv",new r$3.BufferAttribute(us$1,2)),cs$1.setIndex(new r$3.BufferAttribute(hs,1));var ds$1=function(){var Cu=yt$1(),Tu=new r$3.Texture;return Cu.onload=function(){if(typeof document!="undefined"){var Pu=256,Bu=document.createElement("canvas");Bu.setAttribute("width",String(Pu)),Bu.setAttribute("height",String(Pu));var Lu=Bu.getContext("2d");if(Lu){Lu.drawImage(Cu,0,0,Pu,Pu),Lu.globalCompositeOperation="source-out";var Ru=128;Lu.beginPath(),Lu.lineWidth=29.952,Lu.arc(Ru,Ru,84.48,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 0.5)",Lu.closePath(),Lu.stroke(),Tu.image=Bu,Tu.needsUpdate=!0}}},Cu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),ps$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=199.68;return Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),fs=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu)return Tu.beginPath(),Tu.arc(256,256,199.68,0,2*Math.PI),Tu.fillStyle="rgba(0, 0, 0, 0.2)",Tu.closePath(),Tu.fill(),new r$3.CanvasTexture(Cu)}return null}(),As$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=138.24,Lu=Tu.createLinearGradient(Pu-Math.cos(Math.PI/4)*Bu,Pu-Math.sin(Math.PI/4)*Bu,Pu+Math.cos(Math.PI/4)*Bu,Pu+Math.sin(Math.PI/4)*Bu);return Lu.addColorStop(0,"rgba(255, 255, 255, 1)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),Lu.addColorStop(1,"rgba(255, 255, 255, 1)"),Tu.beginPath(),Tu.lineWidth=33.28,Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle=Lu,Tu.shadowBlur=38.4,Tu.shadowColor="rgba(0, 0, 0, 0.3)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),gs=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=199.68,Lu=Tu.createLinearGradient(Pu+Math.cos(Math.PI/4)*Bu,Pu-Math.sin(Math.PI/4)*Bu,Pu-Math.cos(Math.PI/4)*Bu,Pu+Math.sin(Math.PI/4)*Bu);return Lu.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Tu.beginPath(),Tu.lineWidth=15.36,Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle=Lu,Tu.shadowBlur=25.6,Tu.shadowColor="rgba(0, 0, 0, 0.5)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),ms=function(Cu,Tu){var Pu=128;Cu.clearRect(0,0,256,256),Cu.beginPath(),Cu.lineWidth=29.44,Cu.arc(Pu,Pu,84.48,0,2*Math.PI*Tu),Cu.strokeStyle="rgba(255, 255, 255, 0.2)",Cu.stroke()},vs$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(256)),Cu.setAttribute("height",String(256));var Tu=Cu.getContext("2d");Tu&&ms(Tu,2*Math.PI);var Pu=new r$3.CanvasTexture(Cu);return Object.assign(Pu,{setProgress:function(Bu){Tu&&(ms(Tu,Bu),Pu.needsUpdate=!0)}})}return null},ys$1=[],bs$1=vs$1(),xs=function(Cu){function Tu(){var Pu=Cu.call(this)||this;Pu.progress=0,Pu.opacity=0,Pu.loading=!1,Pu.current=!1,Pu.disabled=!1,Pu.ringRotateMotion=new Ro$1({angle:0}),Pu.tapMotion=new Ro$1({scale:1,opacity:1}),Pu.progressMotion=new Ro$1({progress:0}),Pu.progressOpacityMotion=new Ro$1({opacity:0}),Pu.opacityMotion=new Ro$1({opacity:0});var Bu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Pu.backgroundMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:fs,opacity:1}))),Pu.centerMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:As$1,opacity:0}))),Pu.ringMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:gs,opacity:0}))),Pu.loadingMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:ds$1,opacity:.5}))),Pu.disableMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:ps$1,opacity:0}))),Pu.progressMesh=new r$3.Mesh(cs$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:bs$1,opacity:0}))),Pu.loadingMesh.visible=!1,Pu.disableMesh.visible=!1,Pu.backgroundMesh.position.y=.0018,Pu.ringMesh.position.y=.003,Pu.disableMesh.position.y=.002,Pu.centerMesh.position.y=.002,Pu.loadingMesh.position.y=.005,Pu.progressMesh.position.y=.004,Pu.centerMesh.frustumCulled=!1,Pu.ringMesh.frustumCulled=!1,Pu.progressMesh.frustumCulled=!1,Pu.loadingMesh.frustumCulled=!1,Pu.disableMesh.frustumCulled=!1,Pu.renderOrder=-2,Pu.add(Pu.backgroundMesh),Pu.add(Pu.centerMesh),Pu.add(Pu.ringMesh),Pu.add(Pu.progressMesh),Pu.add(Pu.loadingMesh),Pu.add(Pu.disableMesh),Pu.needsRender=!0,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.setProgress=function(Pu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Pu&&(Pu=ho(Pu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Pu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Pu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Pu,0,1)},100).catch(Qe$1)),this.progress=Pu)},Tu.prototype.setOpacity=function(Pu){this.opacity!==Pu&&(this.opacity=Pu=ho(Pu,0,1),this.opacityMotion.set({opacity:Pu},500).catch(Qe$1))},Tu.prototype.setCurrent=function(Pu){if(this.current!==Pu){if(Pu===!0&&this.ringRotateMotion.ended){var Bu=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(Bu,5e3).catch(Qe$1)}this.current=Pu}},Tu.prototype.setLoading=function(Pu){this.loading!==Pu&&(this.loading=Pu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Pu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Pu){this.disabled!==Pu&&(this.disabled=Pu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Pu,this.ringMesh.visible=!Pu,this.centerMesh.visible=!Pu,this.needsRender=!0)},Tu.prototype.tap=function(){var Pu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Pu.progressOpacityMotion.set({opacity:Pu.progress>0?1:0},300).catch(Qe$1),Pu.progressMotion.set({progress:Pu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},Tu.prototype.setResolution=function(Pu,Bu){var Lu=ho(Math.max(Pu,Bu)/1e3,1,1.8);this.scale.set(Lu,0,Lu)},Tu.prototype.updateTime=function(Pu,Bu){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Pu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else if(Ru===1)this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=bs$1);else{if(this.progressMesh.material.map===bs$1){var Ou=ys$1.pop()||vs$1();this.progressMesh.material.map=Ou}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Pu);var Du=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Du,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Pu),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.backgroundMesh.material.opacity=Du,this.centerMesh.material.opacity=Du,this.ringMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Bu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Pu);var ku=this.tapMotion.value.scale;this.backgroundMesh.scale.set(ku,ku,ku),this.centerMesh.scale.set(ku,ku,ku),this.ringMesh.scale.set(ku,ku,ku),this.progressMesh.scale.set(ku,ku,ku),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Du,this.ringMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(Pu),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},Tu.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==bs$1&&(ys$1.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),ws$1=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Es$1=new Float32Array([0,1,1,1,0,0,1,0]),Ms=new Uint8Array([0,2,1,2,3,1]),Is=new r$3.BufferGeometry;Is.setAttribute("position",new r$3.BufferAttribute(ws$1,3)),Is.setAttribute("uv",new r$3.BufferAttribute(Es$1,2)),Is.setIndex(new r$3.BufferAttribute(Ms,1));var Ss=function(){var Cu=yt$1(),Tu=new r$3.Texture;return Cu.onload=function(){if(typeof document!="undefined"){var Pu=256,Bu=document.createElement("canvas");Bu.setAttribute("width",String(Pu)),Bu.setAttribute("height",String(Pu));var Lu=Bu.getContext("2d");if(Lu){Lu.drawImage(Cu,0,0,Pu,Pu),Lu.globalCompositeOperation="source-out";var Ru=128;Lu.beginPath(),Lu.lineWidth=29.44,Lu.arc(Ru,Ru,55.04,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 0.7)",Lu.closePath(),Lu.stroke(),Tu.image=Bu,Tu.needsUpdate=!0}}},Cu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),Cs=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256,Bu=199.68;return Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Pu,Pu,Bu,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),Bs=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(256)),Cu.setAttribute("height",String(256));var Tu=Cu.getContext("2d");if(Tu){var Pu=128;return Tu.beginPath(),Tu.lineWidth=29.44,Tu.arc(Pu,Pu,84.48,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 1)",Tu.shadowBlur=19.2,Tu.shadowColor="rgba(200, 200, 200, 0.2)",Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),Ts=function(Cu,Tu){var Pu=128;Cu.clearRect(0,0,256,256),Cu.beginPath(),Cu.lineWidth=29.44,Cu.arc(Pu,Pu,57.6,0,2*Math.PI*Tu),Cu.strokeStyle="rgba(255, 255, 255, 0.6)",Cu.stroke()},Ps=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(256)),Cu.setAttribute("height",String(256));var Tu=Cu.getContext("2d");Tu&&Ts(Tu,2*Math.PI);var Pu=new r$3.CanvasTexture(Cu);return Object.assign(Pu,{setProgress:function(Bu){Tu&&(Ts(Tu,Bu),Pu.needsUpdate=!0)}})}return null},Rs=[],ks=Ps(),Ds=function(Cu){function Tu(){var Pu=Cu.call(this)||this;Pu.progress=0,Pu.opacity=0,Pu.loading=!1,Pu.current=!1,Pu.disabled=!1,Pu.tapMotion=new Ro$1({scale:1,opacity:1}),Pu.progressMotion=new Ro$1({progress:0}),Pu.progressOpacityMotion=new Ro$1({opacity:0}),Pu.opacityMotion=new Ro$1({opacity:0});var Bu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return Pu.centerMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Bs,opacity:0}))),Pu.loadingMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Ss,opacity:.5}))),Pu.disableMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Cs,opacity:0}))),Pu.progressMesh=new r$3.Mesh(Is,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:ks,opacity:0}))),Pu.loadingMesh.visible=!1,Pu.disableMesh.visible=!1,Pu.disableMesh.position.y=.002,Pu.centerMesh.position.y=.002,Pu.loadingMesh.position.y=.005,Pu.progressMesh.position.y=.004,Pu.centerMesh.frustumCulled=!1,Pu.progressMesh.frustumCulled=!1,Pu.loadingMesh.frustumCulled=!1,Pu.disableMesh.frustumCulled=!1,Pu.renderOrder=-2,Pu.add(Pu.centerMesh),Pu.add(Pu.progressMesh),Pu.add(Pu.loadingMesh),Pu.add(Pu.disableMesh),Pu.needsRender=!0,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.setProgress=function(Pu){this.setDisabled(!1),this.setLoading(!1),this.progress!==Pu&&(Pu=ho(Pu,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Qe$1),Pu===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Qe$1),this.progressMotion.set({progress:ho(1.2*Pu,0,1)},0).catch(Qe$1)):this.progressMotion.set({progress:ho(1.2*Pu,0,1)},100).catch(Qe$1)),this.progress=Pu)},Tu.prototype.setOpacity=function(Pu){Pu>0&&(Pu=1),this.opacity!==Pu&&(this.opacity=Pu=ho(Pu,0,1),this.opacityMotion.set({opacity:Pu},500).catch(Qe$1))},Tu.prototype.setCurrent=function(Pu){this.current!==Pu&&(this.current=Pu)},Tu.prototype.setLoading=function(Pu){this.loading!==Pu&&(this.loading=Pu,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=Pu,this.needsRender=!0)},Tu.prototype.setDisabled=function(Pu){this.disabled!==Pu&&(this.disabled=Pu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Pu,this.centerMesh.visible=!Pu,this.needsRender=!0)},Tu.prototype.tap=function(){var Pu=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Qe$1),this.progressMotion.set({progress:0},0).catch(Qe$1),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){Pu.progressOpacityMotion.set({opacity:Pu.progress>0?1:0},300).catch(Qe$1),Pu.progressMotion.set({progress:Pu.progress},120).catch(Qe$1)}).catch(Qe$1)):Promise.resolve()},Tu.prototype.setResolution=function(Pu,Bu){var Lu=ho(Math.max(Pu,Bu)/1e3,1.2,1.8);this.scale.set(Lu,0,Lu)},Tu.prototype.updateTime=function(Pu,Bu){var Lu;if(!this.progressMotion.ended){this.progressMotion.update(Pu);var Ru=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ru===0)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else if(Ru===1)this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=ks);else{if(this.progressMesh.material.map===ks){var Ou=Rs.pop()||Ps();this.progressMesh.material.map=Ou}(Lu=this.progressMesh.material.map)===null||Lu===void 0||Lu.setProgress(Ru)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(Pu);var Du=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Du,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(Pu),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-Bu/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(Pu);var ku=this.tapMotion.value.scale;this.centerMesh.scale.set(ku,ku,ku),this.progressMesh.scale.set(ku,ku,ku),Du=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Du,this.disableMesh.material.opacity=Du,this.loadingMesh.material.opacity=Du,this.needsRender=!0}},Tu.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==ks&&(Rs.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},Tu}(r$3.Object3D),Ls=new r$3.CircleBufferGeometry(.1,16),Os=function(){if(typeof document!="undefined"){var Cu=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Pu=Tu.getContext("2d");if(Pu){var Bu=256,Lu=192,Ru=76.8;Pu.lineWidth=Ru,Pu.arc(Bu,Bu,Lu,0,2*Math.PI),Pu.strokeStyle="rgba(147, 162, 255, 0.3)",Pu.shadowBlur=12.8,Pu.shadowColor="rgba(255, 255, 255, 0.6)",Pu.stroke(),Pu.lineWidth=Ru,Pu.arc(Bu,Bu,Lu,0,2*Math.PI);var Ou=Pu.createRadialGradient(Bu,Bu,153.6,Bu,Bu,230.4);Ou.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Ou.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(1,"rgba(255, 255, 255, 0.3)"),Pu.strokeStyle=Ou,Pu.stroke(),Pu.beginPath(),Pu.lineWidth=4.8,Pu.arc(Bu,Bu,228,0,2*Math.PI);var Du=Pu.createLinearGradient(0,0,Cu,0);return Du.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Du.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Du.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Du.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Pu.strokeStyle=Du,Pu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Ns=new r$3.MeshBasicMaterial({map:Os,transparent:!0}),Fs=function(Cu){function Tu(){var Pu=Cu.call(this)||this;return Pu.ringMesh=new r$3.Mesh(Ls,Ns),Pu.ringMesh.renderOrder=-3,Pu.add(Pu.ringMesh),Pu}return t$3.__extends(Tu,Cu),Tu.prototype.dispose=function(){this.remove(this.ringMesh)},Tu}(r$3.Object3D);function Qs$1(Cu,Tu,Pu){var Bu=Math.abs(Cu-Tu);return Bu<.001||Pu!==void 0&&Math.abs(Pu-Bu)<.001}function Vs$1(Cu,Tu,Pu){return!Qs$1(Cu,Tu,Pu)}function _s$1(Cu,Tu){return Cu.distanceTo(Tu)<.001}function Hs(Cu,Tu){return!_s$1(Cu,Tu)}var qs$1=new r$3.Vector3(0,0,0),zs=function(Cu){function Tu(Pu,Bu){Bu===void 0&&(Bu=qs$1);var Lu=Cu.call(this)||this,Ru=new r$3.BoxBufferGeometry(Pu.max.x-Pu.min.x+2*Bu.x,Pu.max.y-Pu.min.y+2*Bu.y,Pu.max.z-Pu.min.z+2*Bu.z,1,1);Ru.groups.length=0,Ru.groups.push({start:0,count:36,materialIndex:0}),Ru.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1)),Ru.computeVertexNormals();var Ou=new Mt;Ou.defines.USE_MAP=!1,Ou.defines.USE_UV=!1,Ou.uniforms.diffuse.value=new r$3.Color(16777215);var Du=new ft$1(Ru,[Ou]);return Du.floorIndex=-1,Du.position.copy(Pu.getCenter(new r$3.Vector3)),Du.frustumCulled=!1,Lu.renderOrder=-3,Lu.add(Du),Lu.boundingBox=new r$3.Box3,Lu.computeBoundingBox(),Lu}return t$3.__extends(Tu,Cu),Tu.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},Tu.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},Tu}(gt);function Ks$1(Cu,Tu){return Tu===void 0&&(Tu=qs$1),new zs(Cu,Tu)}function Us$1(Cu){var Tu=Cu.getError();if(Tu===Cu.NO_ERROR)return null;switch(Tu){case Cu.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case Cu.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case Cu.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case Cu.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case Cu.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case Cu.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}var js$1=2*Math.PI;function Gs(Cu){return Cu>=0&&Cu<js$1?Cu:(Cu%js$1+js$1)%js$1}var Ws$1=Math.PI,Xs$1=2*Ws$1;function Ys$1(Cu,Tu,Pu){if(Cu===Tu)return Tu;var Bu=Tu-Cu;return Math.abs(Bu)<=Pu?Tu:Cu+(Bu>0?1:-1)*Pu}(function(){try{var Cu=document.createElement("canvas");!window.WebGLRenderingContext||!Cu.getContext("webgl")&&Cu.getContext("experimental-webgl")}catch{return!1}})();var Zs$1=function(){var Cu=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(Cu)||/webos/i.test(Cu)||/ipad|iphone|ipod/i.test(Cu)||/iemobile/i.test(Cu)||/opera mini/i.test(Cu)||/blackberry/i.test(Cu)||/windows phone/i.test(Cu)};function Js$1(Cu,Tu){Cu.mode=Tu.mode,Cu.panoIndex=Tu.panoIndex,Cu.longitude=Tu.longitude,Cu.latitude=Tu.latitude,Cu.fov=Tu.fov,Cu.offset.copy(Tu.offset)}function $s$1(Cu,Tu){return Cu.panoIndex===Tu.panoIndex&&Cu.mode===Tu.mode&&Qs$1(Cu.longitude,Tu.longitude,2*Math.PI)&&Qs$1(Cu.latitude,Tu.latitude)&&Qs$1(Cu.fov,Tu.fov)&&_s$1(Cu.offset,Tu.offset)}var ea$1=function(Cu){return Number(Cu)};function ta(Cu,Tu,Pu){var Bu;Tu===void 0&&(Tu=ea$1),Pu===void 0&&(Pu=!1);for(var Lu,Ru=1/0,Ou=0,Du=Cu;Ou<Du.length;Ou++){var ku=Du[Ou],Fu=Tu(ku);Fu<=Ru&&(Lu=(Bu=[ku,Fu])[0],Ru=Bu[1])}return Pu?[Lu,Ru]:Lu}function ia$1(Cu){for(var Tu in Cu)return!1;return!0}function na(Cu){return{longitude:Cu.longitude,latitude:Cu.latitude,fov:Cu.fov,offset:Cu.offset.clone(),distance:Cu.distance}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var ra=function(Cu,Tu,Pu,Bu){var Lu,Ru=["","webkit","Moz","MS","ms","o"],Ou=Tu.createElement?Tu.createElement("div"):Bu,Du=Math.round,ku=Math.abs,Fu=Date.now;function Nu(yp,Tp,Bp){return setTimeout(ju(yp,Bp),Tp)}function Gu(yp,Tp,Bp){return!!Array.isArray(yp)&&(zu(yp,Bp[Tp],Bp),!0)}function zu(yp,Tp,Bp){var Hp;if(yp)if(yp.forEach)yp.forEach(Tp,Bp);else if(yp.length!==Bu)for(Hp=0;Hp<yp.length;)Tp.call(Bp,yp[Hp],Hp,yp),Hp++;else for(Hp in yp)yp.hasOwnProperty(Hp)&&Tp.call(Bp,yp[Hp],Hp,yp)}function Hu(yp,Tp,Bp){var Hp="DEPRECATED METHOD: "+Tp+`
`+Bp+` AT 
`;return function(){var em=new Error("get-stack-trace"),Am=em&&em.stack?em.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",xm=Cu.console&&(Cu.console.warn||Cu.console.log);return xm&&xm.call(Cu.console,Hp,Am),yp.apply(this,arguments)}}Lu=typeof Object.assign!="function"?function(yp){if(yp===Bu||yp===null)throw new TypeError("Cannot convert undefined or null to object");for(var Tp=Object(yp),Bp=1;Bp<arguments.length;Bp++){var Hp=arguments[Bp];if(Hp!==Bu&&Hp!==null)for(var em in Hp)Hp.hasOwnProperty(em)&&(Tp[em]=Hp[em])}return Tp}:Object.assign;var Wu=Hu(function(yp,Tp,Bp){for(var Hp=Object.keys(Tp),em=0;em<Hp.length;)(!Bp||Bp&&yp[Hp[em]]===Bu)&&(yp[Hp[em]]=Tp[Hp[em]]),em++;return yp},"extend","Use `assign`."),_h=Hu(function(yp,Tp){return Wu(yp,Tp,!0)},"merge","Use `assign`.");function Xc(yp,Tp,Bp){var Hp,em=Tp.prototype;(Hp=yp.prototype=Object.create(em)).constructor=yp,Hp._super=em,Bp&&Lu(Hp,Bp)}function ju(yp,Tp){return function(){return yp.apply(Tp,arguments)}}function _c(yp,Tp){return typeof yp=="function"?yp.apply(Tp&&Tp[0]||Bu,Tp):yp}function _f(yp,Tp){return yp===Bu?Tp:yp}function ep(yp,Tp,Bp){zu(up(Tp),function(Hp){yp.addEventListener(Hp,Bp,!1)})}function tp(yp,Tp,Bp){zu(up(Tp),function(Hp){yp.removeEventListener(Hp,Bp,!1)})}function op(yp,Tp){for(;yp;){if(yp==Tp)return!0;yp=yp.parentNode}return!1}function lp(yp,Tp){return yp.indexOf(Tp)>-1}function up(yp){return yp.trim().split(/\s+/g)}function hp(yp,Tp,Bp){if(yp.indexOf&&!Bp)return yp.indexOf(Tp);for(var Hp=0;Hp<yp.length;){if(Bp&&yp[Hp][Bp]==Tp||!Bp&&yp[Hp]===Tp)return Hp;Hp++}return-1}function np(yp){return Array.prototype.slice.call(yp,0)}function rp(yp,Tp,Bp){for(var Hp=[],em=[],Am=0;Am<yp.length;){var xm=Tp?yp[Am][Tp]:yp[Am];hp(em,xm)<0&&Hp.push(yp[Am]),em[Am]=xm,Am++}return Bp&&(Hp=Tp?Hp.sort(function(Fm,gm){return Fm[Tp]>gm[Tp]}):Hp.sort()),Hp}function ip(yp,Tp){for(var Bp,Hp,em=Tp[0].toUpperCase()+Tp.slice(1),Am=0;Am<Ru.length;){if((Hp=(Bp=Ru[Am])?Bp+em:Tp)in yp)return Hp;Am++}return Bu}var ap=1;function sp(yp){var Tp=yp.ownerDocument||yp;return Tp.defaultView||Tp.parentWindow||Cu}var cp="ontouchstart"in Cu,dp=ip(Cu,"PointerEvent")!==Bu,fp=cp&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),vp="touch",_p="mouse",wp=24,Dp=["x","y"],Pp=["clientX","clientY"];function Wp(yp,Tp){var Bp=this;this.manager=yp,this.callback=Tp,this.element=yp.element,this.target=yp.options.inputTarget,this.domHandler=function(Hp){_c(yp.options.enable,[yp])&&Bp.handler(Hp)},this.init()}function Rp(yp,Tp,Bp){var Hp=Bp.pointers.length,em=Bp.changedPointers.length,Am=1&Tp&&Hp-em==0,xm=12&Tp&&Hp-em==0;Bp.isFirst=!!Am,Bp.isFinal=!!xm,Am&&(yp.session={}),Bp.eventType=Tp,function(Fm,gm){var Vm=Fm.session,Qm=gm.pointers,ox=Qm.length;Vm.firstInput||(Vm.firstInput=Gp(gm)),ox>1&&!Vm.firstMultiple?Vm.firstMultiple=Gp(gm):ox===1&&(Vm.firstMultiple=!1);var sx=Vm.firstInput,Jm=Vm.firstMultiple,qm=Jm?Jm.center:sx.center,rx=gm.center=kp(Qm);gm.timeStamp=Fu(),gm.deltaTime=gm.timeStamp-sx.timeStamp,gm.angle=xp(qm,rx),gm.distance=Sp(qm,rx),function(zm,Om){var jm=Om.center,e0=zm.offsetDelta||{},ex=zm.prevDelta||{},Zm=zm.prevInput||{};Om.eventType!==1&&Zm.eventType!==4||(ex=zm.prevDelta={x:Zm.deltaX||0,y:Zm.deltaY||0},e0=zm.offsetDelta={x:jm.x,y:jm.y}),Om.deltaX=ex.x+(jm.x-e0.x),Om.deltaY=ex.y+(jm.y-e0.y)}(Vm,gm),gm.offsetDirection=mp(gm.deltaX,gm.deltaY);var Km=gp(gm.deltaTime,gm.deltaX,gm.deltaY);gm.overallVelocityX=Km.x,gm.overallVelocityY=Km.y,gm.overallVelocity=ku(Km.x)>ku(Km.y)?Km.x:Km.y,gm.scale=Jm?function(zm,Om){return Sp(Om[0],Om[1],Pp)/Sp(zm[0],zm[1],Pp)}(Jm.pointers,Qm):1,gm.rotation=Jm?function(zm,Om){return xp(Om[1],Om[0],Pp)+xp(zm[1],zm[0],Pp)}(Jm.pointers,Qm):0,gm.maxPointers=Vm.prevInput?gm.pointers.length>Vm.prevInput.maxPointers?gm.pointers.length:Vm.prevInput.maxPointers:gm.pointers.length,function(zm,Om){var jm,e0,ex,Zm,Hm=zm.lastInterval||Om,ax=Om.timeStamp-Hm.timeStamp;if(Om.eventType!=8&&(ax>25||Hm.velocity===Bu)){var lx=Om.deltaX-Hm.deltaX,ux=Om.deltaY-Hm.deltaY,tx=gp(ax,lx,ux);e0=tx.x,ex=tx.y,jm=ku(tx.x)>ku(tx.y)?tx.x:tx.y,Zm=mp(lx,ux),zm.lastInterval=Om}else jm=Hm.velocity,e0=Hm.velocityX,ex=Hm.velocityY,Zm=Hm.direction;Om.velocity=jm,Om.velocityX=e0,Om.velocityY=ex,Om.direction=Zm}(Vm,gm);var Xm=Fm.element;op(gm.srcEvent.target,Xm)&&(Xm=gm.srcEvent.target),gm.target=Xm}(yp,Bp),yp.emit("hammer.input",Bp),yp.recognize(Bp),yp.session.prevInput=Bp}function Gp(yp){for(var Tp=[],Bp=0;Bp<yp.pointers.length;)Tp[Bp]={clientX:Du(yp.pointers[Bp].clientX),clientY:Du(yp.pointers[Bp].clientY)},Bp++;return{timeStamp:Fu(),pointers:Tp,center:kp(Tp),deltaX:yp.deltaX,deltaY:yp.deltaY}}function kp(yp){var Tp=yp.length;if(Tp===1)return{x:Du(yp[0].clientX),y:Du(yp[0].clientY)};for(var Bp=0,Hp=0,em=0;em<Tp;)Bp+=yp[em].clientX,Hp+=yp[em].clientY,em++;return{x:Du(Bp/Tp),y:Du(Hp/Tp)}}function gp(yp,Tp,Bp){return{x:Tp/yp||0,y:Bp/yp||0}}function mp(yp,Tp){return yp===Tp?1:ku(yp)>=ku(Tp)?yp<0?2:4:Tp<0?8:16}function Sp(yp,Tp,Bp){Bp||(Bp=Dp);var Hp=Tp[Bp[0]]-yp[Bp[0]],em=Tp[Bp[1]]-yp[Bp[1]];return Math.sqrt(Hp*Hp+em*em)}function xp(yp,Tp,Bp){Bp||(Bp=Dp);var Hp=Tp[Bp[0]]-yp[Bp[0]],em=Tp[Bp[1]]-yp[Bp[1]];return 180*Math.atan2(em,Hp)/Math.PI}Wp.prototype={handler:function(){},init:function(){this.evEl&&ep(this.element,this.evEl,this.domHandler),this.evTarget&&ep(this.target,this.evTarget,this.domHandler),this.evWin&&ep(sp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&tp(this.element,this.evEl,this.domHandler),this.evTarget&&tp(this.target,this.evTarget,this.domHandler),this.evWin&&tp(sp(this.element),this.evWin,this.domHandler)}};var Ep={mousedown:1,mousemove:2,mouseup:4},$p="mousedown",Ip="mousemove mouseup";function Np(){this.evEl=$p,this.evWin=Ip,this.pressed=!1,Wp.apply(this,arguments)}Xc(Np,Wp,{handler:function(yp){var Tp=Ep[yp.type];1&Tp&&(yp.button===0||yp.button===2)&&(this.pressed=!0),2&Tp&&yp.which!==1&&(Tp=4),this.pressed&&(4&Tp&&(this.pressed=!1),this.callback(this.manager,Tp,{pointers:[yp],changedPointers:[yp],pointerType:_p,srcEvent:yp}))}});var qp={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Vp={2:vp,3:"pen",4:_p,5:"kinect"},pp="pointerdown",bp="pointermove pointerup pointercancel";function zp(){this.evEl=pp,this.evWin=bp,Wp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Cu.MSPointerEvent&&!Cu.PointerEvent&&(pp="MSPointerDown",bp="MSPointerMove MSPointerUp MSPointerCancel"),Xc(zp,Wp,{handler:function(yp){var Tp=this.store,Bp=!1,Hp=!1,em=yp.type.toLowerCase().replace("ms",""),Am=qp[em],xm=Vp[yp.pointerType]||yp.pointerType,Fm=xm==vp,gm=hp(Tp,yp.pointerId,"pointerId");1&Am&&(yp.button===0||yp.button===2||Fm)?gm<0&&(Tp.push(yp),gm=Tp.length-1):12&Am?Bp=!0:Fm||yp.buttons!==0||(Bp=!0,Hp=!0,Am=qp.pointerup),gm<0||(Hp||(Tp[gm]=yp),this.callback(this.manager,Am,{pointers:Tp,changedPointers:[yp],pointerType:xm,srcEvent:Tp[gm]}),Bp&&Tp.splice(gm,1))}});var Up={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Jp="touchstart",Xp="touchstart touchmove touchend touchcancel";function tm(){this.evTarget=Jp,this.evWin=Xp,this.started=!1,Wp.apply(this,arguments)}function lm(yp,Tp){var Bp=np(yp.touches),Hp=np(yp.changedTouches);return 12&Tp&&(Bp=rp(Bp.concat(Hp),"identifier",!0)),[Bp,Hp]}Xc(tm,Wp,{handler:function(yp){var Tp=Up[yp.type];if(Tp===1&&(this.started=!0),this.started){var Bp=lm.call(this,yp,Tp);12&Tp&&Bp[0].length-Bp[1].length==0&&(this.started=!1),this.callback(this.manager,Tp,{pointers:Bp[0],changedPointers:Bp[1],pointerType:vp,srcEvent:yp})}}});var am={touchstart:1,touchmove:2,touchend:4,touchcancel:8},fm="touchstart touchmove touchend touchcancel";function rm(){this.evTarget=fm,this.targetIds={},Wp.apply(this,arguments)}function um(yp,Tp){var Bp=np(yp.touches),Hp=this.targetIds;if(3&Tp&&Bp.length===1)return Hp[Bp[0].identifier]=!0,[Bp,Bp];var em,Am,xm=np(yp.changedTouches),Fm=[],gm=this.target;if(Am=Bp.filter(function(Vm){return op(Vm.target,gm)}),Tp===1)for(em=0;em<Am.length;)Hp[Am[em].identifier]=!0,em++;for(em=0;em<xm.length;)Hp[xm[em].identifier]&&Fm.push(xm[em]),12&Tp&&delete Hp[xm[em].identifier],em++;return Fm.length?[rp(Am.concat(Fm),"identifier",!0),Fm]:void 0}Xc(rm,Wp,{handler:function(yp){var Tp=am[yp.type],Bp=um.call(this,yp,Tp);Bp&&this.callback(this.manager,Tp,{pointers:Bp[0],changedPointers:Bp[1],pointerType:vp,srcEvent:yp})}});function om(){Wp.apply(this,arguments);var yp=ju(this.handler,this);this.touch=new rm(this.manager,yp),this.mouse=new Np(this.manager,yp),this.primaryTouch=null,this.lastTouches=[]}function hm(yp,Tp){1&yp?(this.primaryTouch=Tp.changedPointers[0].identifier,Lp.call(this,Tp)):12&yp&&Lp.call(this,Tp)}function Lp(yp){var Tp=yp.changedPointers[0];if(Tp.identifier===this.primaryTouch){var Bp={x:Tp.clientX,y:Tp.clientY};this.lastTouches.push(Bp);var Hp=this.lastTouches;setTimeout(function(){var em=Hp.indexOf(Bp);em>-1&&Hp.splice(em,1)},2500)}}function sm(yp){for(var Tp=yp.srcEvent.clientX,Bp=yp.srcEvent.clientY,Hp=0;Hp<this.lastTouches.length;Hp++){var em=this.lastTouches[Hp],Am=Math.abs(Tp-em.x),xm=Math.abs(Bp-em.y);if(Am<=25&&xm<=25)return!0}return!1}Xc(om,Wp,{handler:function(yp,Tp,Bp){var Hp=Bp.pointerType==vp,em=Bp.pointerType==_p;if(!(em&&Bp.sourceCapabilities&&Bp.sourceCapabilities.firesTouchEvents)){if(Hp)hm.call(this,Tp,Bp);else if(em&&sm.call(this,Bp))return;this.callback(yp,Tp,Bp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var dm=Ou?ip(Ou.style,"touchAction"):Bu,mm=dm!==Bu,pm="compute",wm="auto",$m="manipulation",Pm="none",Nm="pan-x",Tm="pan-y",Dm=function(){if(!mm)return!1;var yp={},Tp=Cu.CSS&&Cu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Bp){yp[Bp]=!Tp||Cu.CSS.supports("touch-action",Bp)}),yp}();function km(yp,Tp){this.manager=yp,this.set(Tp)}km.prototype={set:function(yp){yp==pm&&(yp=this.compute()),mm&&this.manager.element.style&&Dm[yp]&&(this.manager.element.style[dm]=yp),this.actions=yp.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var yp=[];return zu(this.manager.recognizers,function(Tp){_c(Tp.options.enable,[Tp])&&(yp=yp.concat(Tp.getTouchAction()))}),function(Tp){if(lp(Tp,Pm))return Pm;var Bp=lp(Tp,Nm),Hp=lp(Tp,Tm);return Bp&&Hp?Pm:Bp||Hp?Bp?Nm:Tm:lp(Tp,$m)?$m:wm}(yp.join(" "))},preventDefaults:function(yp){var Tp=yp.srcEvent,Bp=yp.offsetDirection;if(this.manager.session.prevented)Tp.preventDefault();else{var Hp=this.actions,em=lp(Hp,Pm)&&!Dm.none,Am=lp(Hp,Tm)&&!Dm["pan-y"],xm=lp(Hp,Nm)&&!Dm["pan-x"];if(em){var Fm=yp.pointers.length===1,gm=yp.distance<2,Vm=yp.deltaTime<250;if(Fm&&gm&&Vm)return}if(!xm||!Am)return em||Am&&6&Bp||xm&&Bp&wp?this.preventSrc(Tp):void 0}},preventSrc:function(yp){this.manager.session.prevented=!0,yp.preventDefault()}};var Im=32;function Um(yp){this.options=Lu({},this.defaults,yp||{}),this.id=ap++,this.manager=null,this.options.enable=_f(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Wm(yp){return 16&yp?"cancel":8&yp?"end":4&yp?"move":2&yp?"start":""}function Lm(yp){return yp==16?"down":yp==8?"up":yp==2?"left":yp==4?"right":""}function Cp(yp,Tp){var Bp=Tp.manager;return Bp?Bp.get(yp):yp}function Kp(){Um.apply(this,arguments)}function Qp(){Kp.apply(this,arguments),this.pX=null,this.pY=null}function Zp(){Kp.apply(this,arguments)}function cm(){Um.apply(this,arguments),this._timer=null,this._input=null}function Mm(){Kp.apply(this,arguments)}function _m(){Kp.apply(this,arguments)}function ym(){Um.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function bm(yp,Tp){return(Tp=Tp||{}).recognizers=_f(Tp.recognizers,bm.defaults.preset),new Em(yp,Tp)}Um.prototype={defaults:{},set:function(yp){return Lu(this.options,yp),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(yp){if(Gu(yp,"recognizeWith",this))return this;var Tp=this.simultaneous;return Tp[(yp=Cp(yp,this)).id]||(Tp[yp.id]=yp,yp.recognizeWith(this)),this},dropRecognizeWith:function(yp){return Gu(yp,"dropRecognizeWith",this)||(yp=Cp(yp,this),delete this.simultaneous[yp.id]),this},requireFailure:function(yp){if(Gu(yp,"requireFailure",this))return this;var Tp=this.requireFail;return hp(Tp,yp=Cp(yp,this))===-1&&(Tp.push(yp),yp.requireFailure(this)),this},dropRequireFailure:function(yp){if(Gu(yp,"dropRequireFailure",this))return this;yp=Cp(yp,this);var Tp=hp(this.requireFail,yp);return Tp>-1&&this.requireFail.splice(Tp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(yp){return!!this.simultaneous[yp.id]},emit:function(yp){var Tp=this,Bp=this.state;function Hp(em){Tp.manager.emit(em,yp)}Bp<8&&Hp(Tp.options.event+Wm(Bp)),Hp(Tp.options.event),yp.additionalEvent&&Hp(yp.additionalEvent),Bp>=8&&Hp(Tp.options.event+Wm(Bp))},tryEmit:function(yp){if(this.canEmit())return this.emit(yp);this.state=Im},canEmit:function(){for(var yp=0;yp<this.requireFail.length;){if(!(33&this.requireFail[yp].state))return!1;yp++}return!0},recognize:function(yp){var Tp=Lu({},yp);if(!_c(this.options.enable,[this,Tp]))return this.reset(),void(this.state=Im);56&this.state&&(this.state=1),this.state=this.process(Tp),30&this.state&&this.tryEmit(Tp)},process:function(yp){},getTouchAction:function(){},reset:function(){}},Xc(Kp,Um,{defaults:{pointers:1},attrTest:function(yp){var Tp=this.options.pointers;return Tp===0||yp.pointers.length===Tp},process:function(yp){var Tp=this.state,Bp=yp.eventType,Hp=6&Tp,em=this.attrTest(yp);return Hp&&(8&Bp||!em)?16|Tp:Hp||em?4&Bp?8|Tp:2&Tp?4|Tp:2:Im}}),Xc(Qp,Kp,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var yp=this.options.direction,Tp=[];return 6&yp&&Tp.push(Tm),yp&wp&&Tp.push(Nm),Tp},directionTest:function(yp){var Tp=this.options,Bp=!0,Hp=yp.distance,em=yp.direction,Am=yp.deltaX,xm=yp.deltaY;return em&Tp.direction||(6&Tp.direction?(em=Am===0?1:Am<0?2:4,Bp=Am!=this.pX,Hp=Math.abs(yp.deltaX)):(em=xm===0?1:xm<0?8:16,Bp=xm!=this.pY,Hp=Math.abs(yp.deltaY))),yp.direction=em,Bp&&Hp>Tp.threshold&&em&Tp.direction},attrTest:function(yp){return Kp.prototype.attrTest.call(this,yp)&&(2&this.state||!(2&this.state)&&this.directionTest(yp))},emit:function(yp){this.pX=yp.deltaX,this.pY=yp.deltaY;var Tp=Lm(yp.direction);Tp&&(yp.additionalEvent=this.options.event+Tp),this._super.emit.call(this,yp)}}),Xc(Zp,Kp,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Pm]},attrTest:function(yp){return this._super.attrTest.call(this,yp)&&(Math.abs(yp.scale-1)>this.options.threshold||2&this.state)},emit:function(yp){if(yp.scale!==1){var Tp=yp.scale<1?"in":"out";yp.additionalEvent=this.options.event+Tp}this._super.emit.call(this,yp)}}),Xc(cm,Um,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wm]},process:function(yp){var Tp=this.options,Bp=yp.pointers.length===Tp.pointers,Hp=yp.distance<Tp.threshold,em=yp.deltaTime>Tp.time;if(this._input=yp,!Hp||!Bp||12&yp.eventType&&!em)this.reset();else if(1&yp.eventType)this.reset(),this._timer=Nu(function(){this.state=8,this.tryEmit()},Tp.time,this);else if(4&yp.eventType)return 8;return Im},reset:function(){clearTimeout(this._timer)},emit:function(yp){this.state===8&&(yp&&4&yp.eventType?this.manager.emit(this.options.event+"up",yp):(this._input.timeStamp=Fu(),this.manager.emit(this.options.event,this._input)))}}),Xc(Mm,Kp,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Pm]},attrTest:function(yp){return this._super.attrTest.call(this,yp)&&(Math.abs(yp.rotation)>this.options.threshold||2&this.state)}}),Xc(_m,Kp,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Qp.prototype.getTouchAction.call(this)},attrTest:function(yp){var Tp,Bp=this.options.direction;return 30&Bp?Tp=yp.overallVelocity:6&Bp?Tp=yp.overallVelocityX:Bp&wp&&(Tp=yp.overallVelocityY),this._super.attrTest.call(this,yp)&&Bp&yp.offsetDirection&&yp.distance>this.options.threshold&&yp.maxPointers==this.options.pointers&&ku(Tp)>this.options.velocity&&4&yp.eventType},emit:function(yp){var Tp=Lm(yp.offsetDirection);Tp&&this.manager.emit(this.options.event+Tp,yp),this.manager.emit(this.options.event,yp)}}),Xc(ym,Um,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$m]},process:function(yp){var Tp=this.options,Bp=yp.pointers.length===Tp.pointers,Hp=yp.distance<Tp.threshold,em=yp.deltaTime<Tp.time;if(this.reset(),1&yp.eventType&&this.count===0)return this.failTimeout();if(Hp&&em&&Bp){if(yp.eventType!=4)return this.failTimeout();var Am=!this.pTime||yp.timeStamp-this.pTime<Tp.interval,xm=!this.pCenter||Sp(this.pCenter,yp.center)<Tp.posThreshold;if(this.pTime=yp.timeStamp,this.pCenter=yp.center,xm&&Am?this.count+=1:this.count=1,this._input=yp,this.count%Tp.taps===0)return this.hasRequireFailures()?(this._timer=Nu(function(){this.state=8,this.tryEmit()},Tp.interval,this),2):8}return Im},failTimeout:function(){return this._timer=Nu(function(){this.state=Im},this.options.interval,this),Im},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),bm.VERSION="2.0.7",bm.defaults={domEvents:!1,touchAction:pm,enable:!0,inputTarget:null,inputClass:null,preset:[[Mm,{enable:!1}],[Zp,{enable:!1},["rotate"]],[_m,{direction:6}],[Qp,{direction:6},["swipe"]],[ym],[ym,{event:"doubletap",taps:2},["tap"]],[cm]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Em(yp,Tp){var Bp;this.options=Lu({},bm.defaults,Tp||{}),this.options.inputTarget=this.options.inputTarget||yp,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=yp,this.input=new((Bp=this).options.inputClass||(dp?zp:fp?rm:cp?om:Np))(Bp,Rp),this.touchAction=new km(this,this.options.touchAction),Rm(this,!0),zu(this.options.recognizers,function(Hp){var em=this.add(new Hp[0](Hp[1]));Hp[2]&&em.recognizeWith(Hp[2]),Hp[3]&&em.requireFailure(Hp[3])},this)}function Rm(yp,Tp){var Bp,Hp=yp.element;Hp.style&&(zu(yp.options.cssProps,function(em,Am){Bp=ip(Hp.style,Am),Tp?(yp.oldCssProps[Bp]=Hp.style[Bp],Hp.style[Bp]=em):Hp.style[Bp]=yp.oldCssProps[Bp]||""}),Tp||(yp.oldCssProps={}))}return Em.prototype={set:function(yp){return Lu(this.options,yp),yp.touchAction&&this.touchAction.update(),yp.inputTarget&&(this.input.destroy(),this.input.target=yp.inputTarget,this.input.init()),this},stop:function(yp){this.session.stopped=yp?2:1},recognize:function(yp){var Tp=this.session;if(!Tp.stopped){var Bp;this.touchAction.preventDefaults(yp);var Hp=this.recognizers,em=Tp.curRecognizer;(!em||em&&8&em.state)&&(em=Tp.curRecognizer=null);for(var Am=0;Am<Hp.length;)Bp=Hp[Am],Tp.stopped===2||em&&Bp!=em&&!Bp.canRecognizeWith(em)?Bp.reset():Bp.recognize(yp),!em&&14&Bp.state&&(em=Tp.curRecognizer=Bp),Am++}},get:function(yp){if(yp instanceof Um)return yp;for(var Tp=this.recognizers,Bp=0;Bp<Tp.length;Bp++)if(Tp[Bp].options.event==yp)return Tp[Bp];return null},add:function(yp){if(Gu(yp,"add",this))return this;var Tp=this.get(yp.options.event);return Tp&&this.remove(Tp),this.recognizers.push(yp),yp.manager=this,this.touchAction.update(),yp},remove:function(yp){if(Gu(yp,"remove",this))return this;if(yp=this.get(yp)){var Tp=this.recognizers,Bp=hp(Tp,yp);Bp!==-1&&(Tp.splice(Bp,1),this.touchAction.update())}return this},on:function(yp,Tp){if(yp!==Bu&&Tp!==Bu){var Bp=this.handlers;return zu(up(yp),function(Hp){Bp[Hp]=Bp[Hp]||[],Bp[Hp].push(Tp)}),this}},off:function(yp,Tp){if(yp!==Bu){var Bp=this.handlers;return zu(up(yp),function(Hp){Tp?Bp[Hp]&&Bp[Hp].splice(hp(Bp[Hp],Tp),1):delete Bp[Hp]}),this}},emit:function(yp,Tp){this.options.domEvents&&function(em,Am){var xm=Tu.createEvent("Event");xm.initEvent(em,!0,!0),xm.gesture=Am,Am.target.dispatchEvent(xm)}(yp,Tp);var Bp=this.handlers[yp]&&this.handlers[yp].slice();if(Bp&&Bp.length){Tp.type=yp,Tp.preventDefault=function(){Tp.srcEvent.preventDefault()};for(var Hp=0;Hp<Bp.length;)Bp[Hp](Tp),Hp++}},destroy:function(){this.element&&Rm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Lu(bm,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Im,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:wp,DIRECTION_ALL:30,Manager:Em,Input:Wp,TouchAction:km,TouchInput:rm,MouseInput:Np,PointerEventInput:zp,TouchMouseInput:om,SingleTouchInput:tm,Recognizer:Um,AttrRecognizer:Kp,Tap:ym,Pan:Qp,Swipe:_m,Pinch:Zp,Rotate:Mm,Press:cm,on:ep,off:tp,each:zu,merge:_h,extend:Wu,assign:Lu,inherit:Xc,bindFn:ju,prefixed:ip}),bm}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function oa(Cu,Tu,Pu){var Bu=Tu.offsetWidth,Lu=Tu.offsetHeight,Ru=Tu.getBoundingClientRect(),Ou=Ru.top,Du=Ru.left;return Pu&&(Du+=Bu*Pu.left,Ou+=Lu*(1-Pu.bottom-Pu.height),Bu*=Pu.width,Lu*=Pu.height),new r$3.Vector2((Cu.x-Du)/Bu*2-1,-(Cu.y-Ou)/Lu*2+1)}var sa=new r$3.OrthographicCamera(-1,1,1,-1,0,1),aa$1=new r$3.BufferGeometry;aa$1.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),aa$1.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var la=new r$3.Mesh(aa$1),ua=new r$3.Scene;ua.add(la);var ha$1=function(){function Cu(Tu,Pu){var Bu;this.renderer=Tu,this.material=new r$3.ShaderMaterial({vertexShader:(Bu=Pu.vertex)!==null&&Bu!==void 0?Bu:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:Pu.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},Pu.uniforms),defines:Object.assign({},Pu.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return Cu.prototype.render=function(Tu,Pu){var Bu=this.renderer.getRenderTarget(),Lu=la.material;this.material.uniforms.inputBuffer.value=Tu.texture,la.material=this.material,this.renderer.setRenderTarget(Pu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Bu),la.material=Lu},Cu.prototype.dispose=function(){this.material.dispose()},Cu}(),ca$1=function(){function Cu(Tu){this.renderer=Tu,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return Cu.prototype.render=function(Tu,Pu){var Bu=this.renderer.getRenderTarget(),Lu=la.material;this.material.uniforms.inputValue.value.copy(Tu),la.material=this.material,this.renderer.setRenderTarget(Pu||null),this.renderer.render(ua,sa),this.renderer.setRenderTarget(Bu),la.material=Lu},Cu.prototype.dispose=function(){this.material.dispose()},Cu}(),da$1=function(Cu){function Tu(Pu){return Cu.call(this,Pu,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$3.__extends(Tu,Cu),Tu}(ha$1),pa=function(){function Cu(Tu){this.enable=!0,this.renderer=Tu,this.copyPass=new da$1(this.renderer)}return Cu.prototype.render=function(Tu,Pu){this.copyPass.render(Tu,Pu)},Cu.prototype.dispose=function(){this.copyPass.dispose()},Cu}(),fa$1=function(Cu){function Tu(Pu){var Bu,Lu=this;Lu=Cu.call(this)||this;var Ru=Tu.parseArgs(Pu);return Lu.pending=!0,Lu.userAction=Ru.initial[3],Lu.destroyed=!1,Lu.ident=Ru.ident,Lu.scene=Ru.scene,Lu.helper=Ru.helper,Lu.camera=Ru.camera,Lu.renderer=Ru.renderer,Lu.scissor=Ru.scissor,Lu.element=Ru.element,Lu.model=Ru.model,Lu.enableIOSEDR=(Bu=Ru.enableIOSEDR)!==null&&Bu!==void 0&&Bu,Lu.work=Ru.work,Lu.imageOptions=Ru.imageOptions,Lu.videoTexture=Ru.videoTexture,Lu.networkSubscribe=Ru.networkSubscribe,Lu.requestProxy=Ru.requestProxy,Lu.needsRender=!0,Lu.maxFov=120,Lu.minFov=40,Lu.maxLatitude=+Math.PI/2,Lu.minLatitude=-Math.PI/2,Lu.cameraMotion=new Ro$1({longitude:{value:Lu.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:Lu.camera.pose.latitude,fov:Lu.camera.pose.fov}),Lu.eventUnbinds=[Ru.element].concat(Ru.extraElements||[]).map(function(Ou){return Lu.bindEvents(Ou)}),at.shared.add(function(){return Lu.initAnimation.apply(Lu,Ru.initial)},!0),Lu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){return t$3.__assign({},Pu)},Tu.initAnimationEndState=function(Pu){var Bu=this.parseArgs(Pu);return{longitude:Bu.camera.pose.longitude,latitude:Bu.camera.pose.latitude,fov:Bu.camera.pose.fov,offset:Bu.camera.pose.offset.clone(),distance:Bu.camera.pose.distance}},Tu.prototype.destroy=function(){var Pu;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Bu=0,Lu=this.eventUnbinds;Bu<Lu.length;Bu++)(0,Lu[Bu])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(Pu=this.pressState)===null||Pu===void 0||Pu.stop(),delete this.pressState},Tu.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},Tu.prototype.bindExtraElement=function(Pu){for(var Bu=0,Lu=this.eventUnbinds;Bu<Lu.length;Bu++)if(Lu[Bu].element===Pu)return;this.eventUnbinds.push(this.bindEvents(Pu))},Tu.prototype.unbindExtraElement=function(Pu){for(var Bu=[],Lu=0,Ru=this.eventUnbinds;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Ou.element===Pu?Ou():Bu.push(Ou)}this.eventUnbinds=Bu},Tu.prototype.updateRenderSize=function(){this.needsRender=!0},Tu.prototype.updateModel=function(Pu){this.model=Pu,this.needsRender=!0},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){return this.work=Pu,this.userAction=Ou,!1},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu=[],Ru=2;Ru<arguments.length;Ru++)Lu[Ru-2]=arguments[Ru];if(!this.destroyed){var Ou={};this.cameraMotion.ended&&(this.cameraMotion.update(Pu),Ou.longitude=this.cameraMotion.value.longitude,Ou.latitude=this.cameraMotion.value.latitude,Ou.fov=this.cameraMotion.value.fov),ia$1(Ou)&&this.setCamera(Ou)}},Tu.prototype.render=function(){this.renderer.render(this.scene,this.camera)},Tu.prototype.postProcessing=function(Pu,Bu){this.destroyed||(this.effect||(this.effect=new pa(this.renderer)),this.effect.render(Pu,Bu))},Tu.prototype.updateCamera=function(Pu,Bu,Lu){return this.userAction=Lu,this.cameraMotion.set(Pu,Bu)},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}},Tu.prototype.moveToPano=function(Pu,Bu,Lu){Bu===void 0&&(Bu={}),this.userAction=Lu;var Ru={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};Bu.moveStartCallback&&Bu.moveStartCallback(Pu,Ru),this.emit("moveToPano",Pu,this.userAction),this.emit("panoWillArrive",Pu,Ru,this.userAction),this.emit("panoArrived",Pu,Ru,this.userAction),Bu.moveEndCallback&&Bu.moveEndCallback(Pu,Ru)},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){this.pending=!1,this.userAction=Ru},Tu.prototype.setCamera=function(Pu){var Bu,Lu,Ru,Ou,Du;Pu===void 0&&(Pu={});var ku=(Bu=Pu.longitude)!==null&&Bu!==void 0?Bu:this.camera.pose.longitude,Fu=(Lu=Pu.latitude)!==null&&Lu!==void 0?Lu:this.camera.pose.latitude,Nu=(Ru=Pu.fov)!==null&&Ru!==void 0?Ru:this.camera.pose.fov,Gu=(Ou=Pu.distance)!==null&&Ou!==void 0?Ou:this.camera.pose.distance,zu=(Du=Pu.offset)!==null&&Du!==void 0?Du:this.camera.pose.offset,Hu=this.camera.position.clone(),Wu=Vs$1(ku,this.camera.pose.longitude,2*Math.PI)||Vs$1(Fu,this.camera.pose.latitude),_h=Vs$1(Nu,this.camera.pose.fov),Xc=Vs$1(Gu,this.camera.pose.distance),ju=Hs(zu,this.camera.pose.offset);this.camera.setFromPose({longitude:ku,latitude:Fu,fov:Nu,distance:Gu,offset:zu});var _c=Hs(Hu,this.camera.position);_h&&this.emit("cameraFovUpdate",Nu,this.userAction),Wu&&this.emit("cameraDirectionUpdate",{longitude:ku,latitude:Fu},this.userAction),_c&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(_h||Wu||ju||Xc)&&this.emit("cameraUpdate",{longitude:ku,latitude:Fu,fov:Nu,offset:zu,distance:Gu},this.userAction),this.needsRender=!0},Tu.prototype.onPanGesture=function(Pu){var Bu=this.panState,Lu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Pu.center.x,y:Pu.center.y},Bu!==void 0&&Bu.pointerLength===Lu){var Ru=Pu.pointers.map(function(Ou){return ii$1(Ou,["x","y"])});this.emit("wantsGesture","pan",Ru,Pu.isFinal)||this.emit("gesture","pan",Ru,Pu.isFinal)}},Tu.prototype.onTapGesture=function(Pu){var Bu=Pu.pointers.map(function(Lu){return ii$1(Lu,["x","y"])});this.emit("wantsGesture","tap",Bu,!0)||this.emit("gesture","tap",Bu,!0)},Tu.prototype.onPressGesture=function(Pu,Bu){var Lu,Ru=[Pu];if(this.emit("wantsGesture","press",Ru,Bu))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;this.emit("gesture","press",Ru,Bu)},Tu.prototype.onPinchGesture=function(Pu){var Bu=Pu.pointers.map(function(Lu){return ii$1(Lu,["x","y"])});this.emit("wantsGesture","pinch",Bu,Pu.isFinal)||this.emit("gesture","pinch",Bu,Pu.isFinal)},Tu.prototype.onMouseWheel=function(Pu){var Bu=(Math.abs(Pu.deltaY)>Math.abs(Pu.deltaX)?Pu.deltaY:Pu.deltaX)/-60,Lu=[{x:Pu.clientX,y:Pu.clientY,delta:Bu}];this.emit("wantsGesture","mouseWheel",Lu,!1)||this.emit("gesture","mouseWheel",Lu,!1)},Tu.prototype.onMouseMove=function(Pu){},Tu.prototype.onMouseOut=function(){},Tu.prototype.relativeClientPosition=function(Pu){return oa(Pu,this.element,this.scissor)},Tu.prototype.bindEvents=function(Pu){var Bu=this,Lu=function(lp){var up=oa(lp,Bu.element,Bu.scissor);return!(Math.abs(up.x)>1||Math.abs(up.y)>1)},Ru=new ra.Manager(Pu),Ou=function(lp){return lp.session.firstInput||null};Ru.add(new ra.Pan({threshold:10,pointers:0})),Ru.add(new ra.Tap({interval:410})),Ru.add(new ra.Pinch({threshold:0,pointers:2})),Ru.on("panstart pan",function(lp){var up=Ou(Ru);up&&!Lu(up.center)||(Bu.onPanGesture(lp),Xc())}),Ru.on("tap",function(lp){if(lp.pointerType!=="mouse"||lp.srcEvent.button===0){var up=Ou(Ru);up&&!Lu(up.center)||(Bu.onTapGesture(lp),Xc())}}),Ru.on("pinchstart pinch pinchend",function(lp){var up=Ou(Ru);up&&!Lu(up.center)||(Bu.onPinchGesture(lp),Xc())});var Du=null,ku=null,Fu=function(lp,up,hp){var np=lp==="pinchend"?up:up-hp.deltaY/280;return{type:lp,target:hp.target,pointerType:"mouse",srcEvent:hp,pointers:[{x:hp.clientX,y:hp.clientY}],isFirst:lp==="pinchstart",isFinal:lp==="pinchend",scale:ho(np,.1,10),center:{x:hp.clientX,y:hp.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},Nu=function(lp){var up,hp={x:lp.clientX,y:lp.clientY};if(Lu(hp)){if(lp.preventDefault(),lp.ctrlKey){var np=(up=Du==null?void 0:Du.prevInput.scale)!==null&&up!==void 0?up:1,rp=Fu(Du?"pinch":"pinchstart",np,lp);Du===null?Du={firstInput:rp,prevInput:rp}:Du.prevInput=rp,Bu.onPinchGesture(rp),ku!==null&&window.clearTimeout(ku),ku=window.setTimeout(function(){var ip;ku=null;var ap=(ip=Du==null?void 0:Du.prevInput.scale)!==null&&ip!==void 0?ip:1,sp=Fu("pinchend",ap,lp);Du=null,Bu.onPinchGesture(sp)},200)}else Bu.onMouseWheel(lp);Xc()}},Gu=function(lp){if(!Zs$1()){var up={x:lp.clientX,y:lp.clientY};Lu(up)?(Bu.onMouseMove(lp),Bu.pressState&&Math.abs(lp.clientX-Bu.pressState.x)>10&&Math.abs(lp.clientY-Bu.pressState.y)>10&&Xc()):Bu.onMouseOut()}},zu=function(){Bu.onMouseOut(),Xc()},Hu=function(lp,up){if(Lu(lp)){Bu.pressState={x:lp.x,y:lp.y,time:Bu.pressState?Bu.pressState.time:up,stop:Qe$1};var hp=up-Bu.pressState.time;Bu.onPressGesture({x:lp.x,y:lp.y,delta:hp},!1),Bu.pressState&&(Bu.pressState.stop=at.shared.add(function(np){return Hu({x:lp.x,y:lp.y},np)},!0,1))}else Xc()},Wu=function(lp){Xc(),lp.touches.length>1||lp.changedTouches.length<=0||Hu({x:lp.changedTouches[0].clientX,y:lp.changedTouches[0].clientY},_e$1())},_h=function(lp){Xc(),Hu({x:lp.clientX,y:lp.clientY},_e$1())},Xc=function(){var lp;if(Bu.pressState){var up=_e$1()-Bu.pressState.time;Bu.onPressGesture({x:Bu.pressState.x,y:Bu.pressState.y,delta:up},!0),(lp=Bu.pressState)===null||lp===void 0||lp.stop(),delete Bu.pressState}},ju=null,_c=function(lp){var up,hp="pinch",np=!1,rp=!1;switch(lp.type){case"gesturestart":hp="pinchstart",np=!0;break;case"gestureend":hp="pinchend",rp=!0}return{type:hp,target:lp.target,pointerType:"mouse",srcEvent:lp,pointers:[{x:lp.clientX,y:lp.clientY}],isFirst:np,isFinal:rp,scale:(up=lp.scale)!==null&&up!==void 0?up:1,center:{x:lp.clientX,y:lp.clientY},velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0}},_f=function(lp){if(lp.preventDefault(),!Zs$1()){var up=_c(lp),hp=(ju={firstInput:up}).firstInput;hp&&!Lu(hp.center)||Bu.onPinchGesture(up)}},ep=function(lp){if(lp.preventDefault(),!Zs$1()&&ju){var up=_c(lp),hp=ju.firstInput;hp&&!Lu(hp.center)||Bu.onPinchGesture(up)}},tp=function(lp){if(lp.preventDefault(),!Zs$1()&&ju){var up=_c(lp),hp=ju.firstInput;ju=null,hp&&!Lu(hp.center)||Bu.onPinchGesture(up)}},op=function(lp){if(lp&&typeof lp.preventDefault=="function"&&lp.currentTarget===Pu&&lp.preventDefault(),typeof getSelection=="function"){var up=getSelection();up&&up.focusNode&&(up.removeAllRanges&&up.removeAllRanges(),up.empty&&up.empty())}};return Pu.addEventListener("wheel",Nu,{passive:!1}),Pu.addEventListener("mousemove",Gu,!1),Pu.addEventListener("mouseout",zu,!1),Pu.addEventListener("touchstart",Wu,!1),Pu.addEventListener("touchend",Xc,!1),Pu.addEventListener("touchcancel",Xc,!1),Pu.addEventListener("mousedown",_h,!1),Pu.addEventListener("mouseup",Xc,!1),Pu.addEventListener("gesturestart",_f,{passive:!1}),Pu.addEventListener("gesturechange",ep,{passive:!1}),Pu.addEventListener("gestureend",tp,{passive:!1}),Pu.addEventListener("touchstart",op,!1),Pu.addEventListener("contextmenu",op,!1),Object.assign(function(){Ru.destroy(),Pu.removeEventListener("wheel",Nu,!1),Pu.removeEventListener("mousemove",Gu,!1),Pu.removeEventListener("mouseout",zu,!1),Pu.removeEventListener("touchstart",Wu,!1),Pu.removeEventListener("touchend",Xc,!1),Pu.removeEventListener("touchcancel",Xc,!1),Pu.removeEventListener("mousedown",_h,!1),Pu.removeEventListener("mouseup",Xc,!1),Pu.removeEventListener("gesturestart",_f,!1),Pu.removeEventListener("gesturechange",ep,!1),Pu.removeEventListener("gestureend",tp,!1),Pu.removeEventListener("touchstart",op,!1),Pu.removeEventListener("contextmenu",op,!1)},{element:Pu})},Tu}(Fe),Aa=function(Cu){function Tu(Pu){var Bu,Lu,Ru,Ou,Du=this,ku=Tu.parseArgs(Pu);return(Du=Cu.call(this,ku)||this).defaultLongitude=ku.defaultLongitude,Du.defaultLatitude=ku.defaultLatitude,Du.defaultFov=ku.defaultFov,Du.maxFov=ku.maxFov,Du.minFov=ku.minFov,Du.maxLatitude=ku.maxLatitude,Du.minLatitude=ku.minLatitude,Du.locationMotion=new Ro$1({x:Du.camera.pose.offset.x,y:Du.camera.pose.offset.y,z:Du.camera.pose.offset.z,distance:Du.camera.pose.distance,modelAlpha:(Lu=(Bu=Du.model.getMaterial())===null||Bu===void 0?void 0:Bu.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Ou=(Ru=Du.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Ou!==void 0?Ou:0}),Du}return t$3.__extends(Tu,Cu),Tu.distanceFromModel=function(Pu,Bu,Lu){var Ru=Pu.bounding,Ou=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Du=Ou/2/Math.tan(Math.PI*Bu/360);return Lu<1&&(Du/=Lu),isNaN(Du)?Ou:Du},Tu.parseArgs=function(Pu){var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu=Cu.parseArgs.call(this,Pu);return t$3.__assign(t$3.__assign({},Nu),{defaultLongitude:(Bu=Pu.defaultLongitude)!==null&&Bu!==void 0?Bu:Math.PI/4,defaultLatitude:(Lu=Pu.defaultLatitude)!==null&&Lu!==void 0?Lu:Math.PI/4,defaultFov:(Ru=Pu.defaultFov)!==null&&Ru!==void 0?Ru:80,maxFov:(Ou=Pu.maxFov)!==null&&Ou!==void 0?Ou:120,minFov:(Du=Pu.minFov)!==null&&Du!==void 0?Du:40,maxLatitude:(ku=Pu.maxLatitude)!==null&&ku!==void 0?ku:+Math.PI/2,minLatitude:(Fu=Pu.minLatitude)!==null&&Fu!==void 0?Fu:-Math.PI/2})},Tu.initAnimationEndPose=function(Pu){var Bu,Lu,Ru,Ou=this.parseArgs(Pu),Du=Pu.initial[1];return{longitude:(Bu=Du.longitude)!==null&&Bu!==void 0?Bu:Ou.defaultLongitude,latitude:ho((Lu=Du.latitude)!==null&&Lu!==void 0?Lu:Ou.defaultLatitude,Ou.minLatitude,Ou.maxLatitude),fov:(Ru=Du.fov)!==null&&Ru!==void 0?Ru:Ou.defaultFov,offset:Pu.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(Ou.model,Ou.defaultFov,Ou.camera.aspect)}},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&Cu.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){return this.work=Pu,this.updateCamera(Lu,Ru!=null?Ru:0,Ou),!0},Tu.prototype.updateModel=function(Pu){Cu.prototype.updateModel.call(this,Pu);var Bu=Pu.bounding.getCenter(new r$3.Vector3),Lu=Tu.distanceFromModel(Pu,this.defaultFov,this.camera.aspect);this.locationMotion.set({x:Bu.x,y:Bu.y,z:Bu.z,distance:Lu},0).catch(Qe$1)},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu=[],Ru=2;Ru<arguments.length;Ru++)Lu[Ru-2]=arguments[Ru];if(!this.destroyed){var Ou={},Du={};this.locationMotion.ended||(this.locationMotion.update(Pu),Ou.modelAlpha=this.locationMotion.value.modelAlpha,Ou.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Du.distance=this.locationMotion.value.distance,Du.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Pu),Du.longitude=this.cameraMotion.value.longitude,Du.latitude=this.cameraMotion.value.latitude,Du.fov=this.cameraMotion.value.fov),ia$1(Ou)||this.model.setMaterial(Ou),ia$1(Du)||this.setCamera(Du)}},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Bu=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,offset:new r$3.Vector3(Bu.value.x,Bu.value.y,Bu.value.z),distance:Bu.value.distance}},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Nu={longitude:(Ou=Bu.longitude)!==null&&Ou!==void 0?Ou:this.defaultLongitude,latitude:ho((Du=Bu.latitude)!==null&&Du!==void 0?Du:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((ku=Bu.fov)!==null&&ku!==void 0?ku:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Gu=ii$1(Nu,["longitude","latitude","fov"]),zu={x:Nu.offset.x,y:Nu.offset.y,z:Nu.offset.z,distance:Nu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Pu,Nu,this.userAction),this.cameraMotion.set(Gu,Lu).catch(Qe$1),this.locationMotion.set(zu,Lu).then(function(){Fu.emit("initAnimationEnded",Pu,Nu,Fu.userAction)},function(Hu){var Wu=na(Fu.camera.pose);Fu.emit("initAnimationEnded",Pu,Wu,Fu.userAction)}).catch(Qe$1)}},Tu.prototype.updateRenderSize=function(){this.locationMotion.set({distance:Tu.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},Tu.prototype.getForwardPanoIndexOrNot=function(Pu){var Bu=this.work.observers.filter(function(Du){return Du.active}),Lu=this.model.intersectRaycaster(Pu)[0];if(!Lu)return null;var Ru=ta(Bu,function(Du){return Du.standingPosition.distanceTo(Lu.point)},!0),Ou=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Ou):null},Tu.prototype.coordinatesForOffset=function(Pu){var Bu=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Pu.x/(Bu.x*this.scissor.width),latitude:2*Pu.y/(Bu.y*this.scissor.height)}},Tu.prototype.requestInteriaMovement=function(Pu,Bu){var Lu=this;if(this.interiaMovement!==!1){for(var Ru=t$3.__assign({},Pu),Ou={longitude:0,latitude:0},Du=0;Du<Bu;Du++)Ru.longitude*=.996,Ru.latitude*=.994008,Ou.longitude+=Ru.longitude,Ou.latitude+=Ru.latitude;var ku=Gs(this.cameraMotion.value.longitude+Ou.longitude),Fu=ho(this.cameraMotion.value.latitude+Ou.latitude,this.minLatitude,this.maxLatitude),Nu={longitude:ku,latitude:Fu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:ku,latitude:Fu},0).catch(Qe$1);var Gu=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",Nu,!Gu),Gu?at.shared.add(function(zu,Hu){Lu.requestInteriaMovement(Ru,0|Hu)},!0,1):this.interiaMovement=!1}},Tu.prototype.onPanGesture=function(Pu){var Bu=this.panState,Lu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Pu.center.x,y:Pu.center.y},Bu!==void 0&&Bu.pointerLength===Lu){var Ru=Pu.pointers.map(function(_h){return ii$1(_h,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Pu.isFinal)){var Ou={x:Pu.center.x-Bu.x,y:Pu.center.y-Bu.y},Du=this.relativeClientPosition(Pu.center),ku=this.camera.pose.latitude<Math.PI/6||Du.y<0?-1:1;Ou.x*=ku;var Fu=this.coordinatesForOffset(Ou),Nu=Gs(this.cameraMotion.value.longitude+Fu.longitude),Gu=ho(this.cameraMotion.value.latitude+Fu.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Pu.overallVelocityX)>.2&&Math.atan2(Math.abs(Pu.overallVelocityY),Math.abs(Pu.overallVelocityX))<Math.PI/6.923&&(Gu=this.cameraMotion.value.latitude);var zu={longitude:Nu,latitude:Gu,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",zu,Pu.isFinal)&&(this.emit("gesture","pan",Ru,Pu.isFinal),this.emit("panGesture",zu,Pu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:zu.longitude,latitude:zu.latitude},0).catch(Qe$1),Pu.isFinal&&!this.emit("wantsInteriaPan",zu))){this.interiaMovement=!0;var Hu=Pu.velocityX*ku,Wu=Pu.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Hu,y:Wu}),0)}}}},Tu.prototype.onPinchGesture=function(Pu){var Bu,Lu=(Bu=this.pinchState)===null||Bu===void 0?void 0:Bu.fov,Ru=!1;if(Pu.type!=="pinchstart"){if(Pu.type==="pinchend"&&(Ru=!0,delete this.panState,delete this.pinchState),Lu!==void 0){var Ou=Pu.pointers.map(function(ku){return ii$1(ku,["x","y"])});if(!this.emit("wantsGesture","pinch",Ou,Ru)){var Du=ho(Lu/Pu.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Pu.scale,Du,Ru)||this.emit("wantsChangeCameraFov",Du)||(this.emit("gesture","pinch",Ou,Ru),this.emit("pinchGesture",Pu.scale,Du,Ru),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Du},0).catch(Qe$1),this.onPanGesture(Pu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Pu){var Bu=this,Lu=(Math.abs(Pu.deltaY)>Math.abs(Pu.deltaX)?Pu.deltaY:Pu.deltaX)/-60,Ru=[{x:Pu.clientX,y:Pu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Ou=this.minFov,Du=this.maxFov,ku=ho(this.camera.fov-Lu,Ou,Du);this.emit("wantsMouseWheel",Lu,ku,!1)||this.emit("wantsChangeCameraFov",ku)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Lu,ku,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:ku},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Bu.mouseWheelState,Bu.emit("wantsGesture","mouseWheel",Ru,!0)||Bu.emit("wantsMouseWheel",Lu,ku,!0)||(Bu.emit("gesture","mouseWheel",Ru,!0),Bu.emit("mouseWheel",0,ku,!0))},200)})}},Tu.prototype.onTapGesture=function(Pu){var Bu=Pu.pointers.map(function(ku){return ii$1(ku,["x","y"])});if(!this.emit("wantsGesture","tap",Bu,!0)){var Lu=this.relativeClientPosition(Pu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ru,Lu,!0)){this.emit("gesture","tap",Bu,!0),this.emit("tapGesture",Ru,Lu,!0),this.interiaMovement=!1;var Ou=this.getForwardPanoIndexOrNot(Ru);if(!oo(Ou)){this.emit("panoSelected",Ou);var Du={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ou,Du,!0)}}}},Tu.prototype.onPressGesture=function(Pu,Bu){var Lu,Ru,Ou=[Pu];if(this.emit("wantsGesture","press",Ou,Bu))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Du=this.relativeClientPosition(Pu),ku=new r$3.Raycaster;if(ku.setFromCamera(Du,this.camera),this.emit("wantsPressGesture",ku,Du,Pu.delta,Bu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Ou,Bu),this.emit("pressGesture",ku,Du,Pu.delta,Bu)},Tu}(fa$1),ga$1=function(Cu){function Tu(Pu){var Bu=Tu.parseArgs(Pu);return Cu.call(this,Bu)||this}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu=[Pu.initial[0],t$3.__assign(t$3.__assign({},Pu.initial[1]),{longitude:0,latitude:Math.PI/2}),Pu.initial[2],Pu.initial[3]],Lu=t$3.__assign(t$3.__assign({},Pu),{initial:Bu,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return Cu.parseArgs.call(this,Lu)},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.updateModel=function(Pu){this.model=Pu,this.needsRender=!0;var Bu=Pu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Bu.x,y:Bu.y,z:Bu.z,distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},0).catch(Qe$1)},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var ku={longitude:0,latitude:Math.PI/2,fov:ho((Ou=Bu.fov)!==null&&Ou!==void 0?Ou:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect)},Fu=ii$1(ku,["longitude","latitude","fov"]),Nu={x:ku.offset.x,y:ku.offset.y,z:ku.offset.z,distance:ku.distance,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Fu,Lu).catch(Qe$1),this.locationMotion.set(Nu,Lu).then(function(){Du.emit("initAnimationEnded",Pu,ku,Du.userAction)},function(Gu){var zu=na(Du.camera.pose);Du.emit("initAnimationEnded",Pu,zu,Du.userAction)})}},Tu.prototype.getZoomOffsetFromFov=function(Pu,Bu,Lu){var Ru=new r$3.Vector3(0,-1,0),Ou=Math.tan(Lu/2*Math.PI/180),Du=Math.tan(Bu.fov/2*Math.PI/180),ku=(Du-Ou)/Du,Fu=new r$3.Raycaster;Fu.setFromCamera(Pu,Bu);var Nu=Fu.ray.direction,Gu=Nu.angleTo(Ru),zu=Aa.distanceFromModel(this.model,this.defaultFov,this.camera.aspect),Hu=zu*Math.tan(Gu),Wu=Nu.clone().setLength(zu*Math.cos(Gu)).projectOnPlane(Ru),_h=Wu.length(),Xc=ku/_h*Wu.x*Hu,ju=ku/_h*Wu.z*Hu;return new r$3.Vector3(Xc,0,ju)},Tu.prototype.requestInteriaMovement=function(Pu,Bu){},Tu.prototype.onPanGesture=function(Pu){var Bu=this.panState,Lu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Pu.center.x,y:Pu.center.y},Bu!==void 0&&Bu.pointerLength===Lu){var Ru=Pu.pointers.map(function(Xc){return ii$1(Xc,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Pu.isFinal)){var Ou=Pu.center.x-Bu.x,Du=Pu.center.y-Bu.y,ku=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Fu=this.model.bounding,Nu=Fu.getCenter(new r$3.Vector3),Gu=(Fu.max.x-Fu.min.x)/this.defaultFov*this.cameraMotion.value.fov,zu=(Fu.max.y,Fu.min.y,this.defaultFov,this.cameraMotion.value.fov,(Fu.max.z-Fu.min.z)/this.defaultFov*this.cameraMotion.value.fov),Hu=(this.camera.position.y-Fu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),Wu=this.renderer.getSize(new r$3.Vector2);ku.add(function(Xc,ju){var _c=new r$3.Vector3;return _c.setFromMatrixColumn(ju,0),_c.multiplyScalar(-Xc),_c}(2*Ou*Hu/Wu.y,this.camera.matrix)),ku.add(function(Xc,ju,_c){var _f=new r$3.Vector3;return _f.setFromMatrixColumn(_c,0),_f.crossVectors(ju,_f),_f.multiplyScalar(Xc),_f}(2*Du*Hu/Wu.y,this.camera.up,this.camera.matrix)),ku.x=ho(ku.x,Nu.x-Gu,Nu.x+Gu),ku.z=ho(ku.z,Nu.z-zu,Nu.z+zu),ku.y=Nu.y;var _h={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:ku,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",_h,Pu.isFinal)||(this.emit("gesture","pan",Ru,Pu.isFinal),this.emit("panGesture",_h,Pu.isFinal),this.userAction=!0,this.locationMotion.set({x:ku.x,y:ku.y,z:ku.z},0).catch(Qe$1))}}},Tu.prototype.onPinchGesture=function(Pu){var Bu,Lu=(Bu=this.pinchState)===null||Bu===void 0?void 0:Bu.fov,Ru=!1;if(Pu.type!=="pinchstart"){if(Pu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Lu!==void 0){var Ou=Pu.pointers.map(function(Gu){return ii$1(Gu,["x","y"])});if(!this.emit("wantsGesture","pinch",Ou,Ru)){var Du=ho(Lu/Pu.scale,this.minFov,this.maxFov),ku=this.relativeClientPosition({x:Pu.center.x,y:Pu.center.y}),Fu=this.getZoomOffsetFromFov(ku,this.camera,Du),Nu=this.camera.pose.offset.clone().add(Fu);this.emit("wantsPinchGesture",Pu.scale,Du,Ru)||this.emit("wantsChangeCameraFov",Du)||(this.emit("gesture","pinch",Ou,Ru),this.emit("pinchGesture",Pu.scale,Du,Ru),this.userAction=!0,this.locationMotion.set({x:Nu.x,y:Nu.y,z:Nu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Du},0).catch(Qe$1),this.onPanGesture(Pu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Pu){var Bu=this,Lu=(Math.abs(Pu.deltaY)>Math.abs(Pu.deltaX)?Pu.deltaY:Pu.deltaX)/-60,Ru=[{x:Pu.clientX,y:Pu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Ou=ho(this.cameraMotion.value.fov-Lu,this.minFov,this.maxFov),Du=this.relativeClientPosition({x:Pu.clientX,y:Pu.clientY}),ku=this.getZoomOffsetFromFov(Du,this.camera,Ou),Fu=this.camera.pose.offset.clone().add(ku);this.emit("wantsMouseWheel",Lu,Ou,!1)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Lu,Ou,!1),this.userAction=!0,this.locationMotion.set({x:Fu.x,y:Fu.y,z:Fu.z},0).catch(Qe$1),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ou},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Bu.mouseWheelState,Bu.emit("wantsGesture","mouseWheel",Ru,!0)||Bu.emit("wantsMouseWheel",Lu,Ou,!0)||Bu.emit("wantsChangeCameraFov",Ou)||(Bu.emit("gesture","mouseWheel",Ru,!0),Bu.emit("mouseWheel",0,Ou,!0))},200)})}},Tu}(Aa);function ma(Cu,Tu){Tu===void 0&&(Tu=!1);var Pu=typeof Cu;if(Pu==="string")return JSON.stringify(Cu);if(Cu===!0)return"true";if(Cu===!1)return"false";if(Cu===null)return"null";if(Cu instanceof Array){for(var Bu="[",Lu=Cu.length-1,Ru=0;Ru<Lu;Ru++)Bu+=ma(Cu[Ru],!1)+",";return Lu>-1&&(Bu+=ma(Cu[Ru],!1)),Bu+"]"}if(Cu instanceof Object){if(typeof Cu.toJSON=="function")return ma(Cu.toJSON(),Tu);var Ou=Object.keys(Cu).sort(),Du=Ou.length;for(Bu="",Ru=0;Ru<Du;){var ku=Ou[Ru],Fu=ma(Cu[ku],!0);Fu!==void 0&&(Ru&&Bu!==""&&(Bu+=","),Bu+=JSON.stringify(ku)+":"+Fu),Ru++}return"{"+Bu+"}"}switch(Pu){case"function":case"undefined":return Tu?void 0:null;case"number":return Cu;default:return isFinite(Cu)?Cu:null}}function va(Cu){return Te(String(ma(Cu,!1)))}var ya,ba$1=function(Cu){function Tu(Pu){var Bu=this,Lu=Tu.parseArgs(Pu);return(Bu=Cu.call(this,Lu)||this).defaultLongitude=Lu.defaultLongitude,Bu.defaultLatitude=Lu.defaultLongitude,Bu.defaultFov=Lu.defaultFov,Bu.maxFov=Lu.maxFov,Bu.minFov=Lu.minFov,Bu.maxLatitude=Lu.maxLatitude,Bu.minLatitude=Lu.minLatitude,Bu.moveSpeed=Lu.moveSpeed,Bu.intersectMeshCreator=Lu.intersectMeshCreator,Bu.interiaMovement=!1,Bu.intersectMesh=Bu.intersectMeshCreator(),Bu.intersectMesh.name="intersect",Bu.intersectMesh.visible=!1,Bu.helper.add(Bu.intersectMesh),Bu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu=Cu.parseArgs.call(this,Pu);return t$3.__assign(t$3.__assign({},zu),{defaultLongitude:(Bu=Pu.defaultLongitude)!==null&&Bu!==void 0?Bu:0,defaultLatitude:(Lu=Pu.defaultLatitude)!==null&&Lu!==void 0?Lu:0,defaultFov:(Ru=Pu.defaultFov)!==null&&Ru!==void 0?Ru:90,maxFov:(Ou=Pu.maxFov)!==null&&Ou!==void 0?Ou:120,minFov:(Du=Pu.minFov)!==null&&Du!==void 0?Du:40,maxLatitude:(ku=Pu.maxLatitude)!==null&&ku!==void 0?ku:+Math.PI/2,minLatitude:(Fu=Pu.minLatitude)!==null&&Fu!==void 0?Fu:-Math.PI/2,moveSpeed:(Nu=Pu.moveSpeed)!==null&&Nu!==void 0?Nu:3.2,intersectMeshCreator:(Gu=Pu.intersectMeshCreator)!==null&&Gu!==void 0?Gu:function(){return new Fs}})},Tu.initAnimationEndPose=function(Pu){var Bu,Lu,Ru,Ou=this.parseArgs(Pu),Du=Pu.initial,ku=Du[0],Fu=Du[1];return{longitude:(Bu=Fu.longitude)!==null&&Bu!==void 0?Bu:Ou.defaultLongitude,latitude:ho((Lu=Fu.latitude)!==null&&Lu!==void 0?Lu:Ou.defaultLatitude,Ou.minLatitude,Ou.maxLatitude),fov:ho((Ru=Fu.fov)!==null&&Ru!==void 0?Ru:Ou.defaultFov,Ou.minFov,Ou.maxFov),offset:Ou.work.observers[ku].position.clone(),distance:0}},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},Tu.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&Cu.prototype.isReady.call(this)},Tu.prototype.calculateMovingDuration=function(Pu,Bu){switch(typeof Pu){case"function":return Pu(Bu,this.moveSpeed);case"number":return Pu;case"string":return Number(Pu);default:return ho(Bu,1,3)/this.moveSpeed*1e3}},Tu.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},Tu.prototype.coordinatesForOffset=function(Pu){var Bu=this.cameraMotion.value.fov,Lu=this.camera.aspect,Ru=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Pu.x/(Ru.x*this.scissor.width)*Bu/95*Lu,latitude:-2*Pu.y/(Ru.y*this.scissor.height)*Bu/95}},Tu.prototype.cameraBounce=function(){var Pu=this.cameraMotion.value,Bu=Pu.longitude,Lu=Pu.latitude,Ru=Pu.fov,Ou=[{progress:0,value:{longitude:Bu,latitude:Lu,fov:Ru}},{progress:.5,value:{longitude:Bu,latitude:Lu,fov:.98*Ru}},{progress:1,value:{longitude:Bu,latitude:Lu,fov:Ru}}];this.cameraMotion.setKeyframes(Ou,500).catch(Qe$1)},Tu.prototype.requestInteriaMovement=function(Pu,Bu){var Lu=this;if(this.interiaMovement!==!1){for(var Ru=t$3.__assign({},Pu),Ou={longitude:0,latitude:0},Du=0;Du<Bu;Du++)Ru.longitude*=.996,Ru.latitude*=.98604,Ou.longitude+=Ru.longitude,Ou.latitude+=Ru.latitude;var ku=Gs(this.cameraMotion.value.longitude+Ou.longitude),Fu=ho(this.cameraMotion.value.latitude+Ou.latitude,this.minLatitude,this.maxLatitude),Nu={longitude:ku,latitude:Fu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};this.cameraMotion.set({longitude:ku,latitude:Fu},0).catch(Qe$1);var Gu=Ru.longitude>1e-4||Ru.longitude<-1e-4||Ru.latitude>1e-4||Ru.latitude<-1e-4;this.emit("interiaPan",Nu,!Gu),Gu?at.shared.add(function(zu,Hu){Lu.requestInteriaMovement(Ru,0|Hu)},!0,1):this.interiaMovement=!1}},Tu.prototype.onPanGesture=function(Pu){var Bu=this.panState,Lu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Pu.center.x,y:Pu.center.y},Bu!==void 0&&Bu.pointerLength===Lu){var Ru=Pu.pointers.map(function(Wu){return ii$1(Wu,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Pu.isFinal)){var Ou={x:Pu.center.x-Bu.x,y:Pu.center.y-Bu.y},Du=this.coordinatesForOffset(Ou),ku=Gs(this.cameraMotion.value.longitude+Du.longitude),Fu=ho(this.cameraMotion.value.latitude+Du.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(Pu.overallVelocityX)>.2&&Math.atan2(Math.abs(Pu.overallVelocityY),Math.abs(Pu.overallVelocityX))<Math.PI/6.923&&(Fu=this.cameraMotion.value.latitude);var Nu={longitude:ku,latitude:Fu,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance};if(!this.emit("wantsPanGesture",Nu,Pu.isFinal)){this.emit("gesture","pan",Ru,Pu.isFinal),this.emit("panGesture",Nu,Pu.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Gu={longitude:Nu.longitude,latitude:Nu.latitude,fov:Nu.fov};if(this.cameraMotion.set(Gu,0).catch(Qe$1),Pu.isFinal&&!this.emit("wantsInteriaPan",Nu)){this.interiaMovement=!0;var zu=Pu.velocityX,Hu=.6*Pu.velocityY;Math.abs(Hu)>.5&&Math.abs(zu)<.5&&(zu=0),this.requestInteriaMovement(this.coordinatesForOffset({x:zu,y:Hu}),0)}}}}},Tu.prototype.onPinchGesture=function(Pu){var Bu,Lu=(Bu=this.pinchState)===null||Bu===void 0?void 0:Bu.fov,Ru=Pu.scale,Ou=!1;if(Pu.type!=="pinchstart"){if(Pu.type==="pinchend"&&(Ou=!0,delete this.pinchState),Lu!==void 0){var Du=Pu.pointers.map(function(Fu){return ii$1(Fu,["x","y"])});if(!this.emit("wantsGesture","pinch",Du,Ou)){var ku=ho(Lu/Ru,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ru,ku,Ou)||this.emit("wantsChangeCameraFov",ku)||(this.emit("gesture","pinch",Du,Ou),this.emit("pinchGesture",Ru,ku,Ou),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:ku},0).catch(Qe$1),this.onPanGesture(Pu))}}}else this.pinchState={fov:this.cameraMotion.value.fov}},Tu.prototype.onMouseWheel=function(Pu){var Bu=this,Lu=(Math.abs(Pu.deltaY)>Math.abs(Pu.deltaX)?Pu.deltaY:Pu.deltaX)/-60,Ru=[{x:Pu.clientX,y:Pu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Ou=ho(this.cameraMotion.value.fov-Lu,this.minFov,this.maxFov);this.emit("wantsMouseWheel",Lu,Ou,!1)||this.emit("wantsChangeCameraFov",Ou)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Lu,Ou,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ou},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Bu.mouseWheelState,Bu.emit("wantsGesture","mouseWheel",Ru,!0)||Bu.emit("wantsMouseWheel",Lu,Ou,!0)||Bu.emit("wantsChangeCameraFov",Ou)||(Bu.emit("gesture","mouseWheel",Ru,!0),Bu.emit("mouseWheel",0,Ou,!0))},200)})}},Tu.prototype.onMouseMove=function(Pu){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var Bu=this.relativeClientPosition({x:Pu.clientX,y:Pu.clientY}),Lu=new r$3.Raycaster;if(Lu.setFromCamera(Bu,this.camera),this.emit("wantsShowIntersectionOnModel",Lu))this.hideIntersectMesh();else{var Ru=this.model.intersectRaycaster(Lu)[0];if(Ru&&Ru.face){var Ou=Ru.face.normal,Du=Ou.clone().multiplyScalar(.05),ku=Ru.point.clone().add(Du);this.intersectMesh.position.copy(ku);var Fu=ku.clone().add(Du);if(this.intersectMesh.lookAt(Fu),Math.abs(Ou.y)>.99){var Nu=this.camera.position.clone().sub(ku);this.intersectMesh.rotation.z=-Math.atan2(Nu.z,Nu.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Ru,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:Pu.clientX,clientY:Pu.clientY}}}},Tu.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},Tu.prototype.onPressGesture=function(Pu,Bu){var Lu,Ru,Ou=[Pu];if(this.emit("wantsGesture","press",Ou,Bu))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Du=this.relativeClientPosition(Pu),ku=new r$3.Raycaster;if(ku.setFromCamera(Du,this.camera),this.emit("wantsPressGesture",ku,Du,Pu.delta,Bu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Ou,Bu),this.emit("pressGesture",ku,Du,Pu.delta,Bu)},Tu}(fa$1);function xa(){return ya||(ya=new Promise(function(Cu){var Tu,Pu=document.createElement("video");Pu.muted=!0,Pu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Pu.addEventListener("timeupdate",function Bu(){Pu.removeEventListener("timeupdate",Bu,!1),clearTimeout(Tu);var Lu=document.createElement("canvas");Lu.width=Lu.height=1;var Ru=Lu.getContext("2d");Ru?(Ru.drawImage(Pu,0,0,1,1),Ru.getImageData(0,0,1,1).data[3]>10?Cu(!0):Cu(!1)):Cu(!1)},!1),Pu.addEventListener("canplay",function Bu(){Pu.removeEventListener("canplay",Bu,!1),Pu.play()},!1),Tu=window.setTimeout(function(){return Cu(!1)},1e3)}))}var wa,Ea=function(Cu){function Tu(Pu,Bu){return Bu===void 0&&(Bu=.5),Cu.call(this,Pu,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(Bu)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$3.__extends(Tu,Cu),Tu}(ha$1),Ma=function(Cu){function Tu(Pu,Bu){Bu===void 0&&(Bu=.002);var Lu=Cu.call(this,Pu,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(Bu)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Lu.material.extensions.shaderTextureLOD=!0,Lu}return t$3.__extends(Tu,Cu),Object.defineProperty(Tu.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(Pu){this.material.uniforms.targetBuffer.value=Pu},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(Pu){this.material.uniforms.step.value=Pu},enumerable:!1,configurable:!0}),Tu}(ha$1),Ia=function(Cu){function Tu(Pu){var Bu=Cu.call(this,Pu,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Bu.material.transparent=!0,Bu}return t$3.__extends(Tu,Cu),Object.defineProperty(Tu.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(Pu){this.material.uniforms.luminanceAdaptiveBuffer.value=Pu},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(Pu){this.material.uniforms.progress.value=Pu},enumerable:!1,configurable:!0}),Tu}(ha$1),Sa=function(Cu){function Tu(Pu){var Bu=Cu.call(this,Pu)||this;return Bu.enableTime=_e$1(),Bu.renderer=Pu,Bu.valuePass=new ca$1(Bu.renderer),Bu.luminancePass=new Ea(Bu.renderer,Math.sqrt(1/3)),Bu.nextStepPass=new Ma(Bu.renderer,.01),Bu.luminanceAdaptivePass=new Ia(Bu.renderer),Bu}return t$3.__extends(Tu,Cu),Tu.prototype.render=function(Pu,Bu){if(!this.enable)return this.enableTime=null,void this.copyPass.render(Pu);this.enableTime===null&&(this.enableTime=_e$1()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(Pu,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((_e$1()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(Pu,Bu)},Tu.prototype.dispose=function(){var Pu,Bu,Lu;(Pu=this.luminanceTargetBuffer)===null||Pu===void 0||Pu.dispose(),(Bu=this.luminancePrevBuffer)===null||Bu===void 0||Bu.dispose(),(Lu=this.luminanceNextBuffer)===null||Lu===void 0||Lu.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},Tu}(pa),Ca=["up","down","left","right","front","back"],Ba=(wa=Math.SQRT1_2)!==null&&wa!==void 0?wa:Math.sqrt(2),Ta={up:new r$3.Quaternion(Ba,0,0,Ba),down:new r$3.Quaternion(-Ba,0,0,Ba),left:new r$3.Quaternion(0,Ba,0,Ba),right:new r$3.Quaternion(0,-Ba,0,Ba),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},Pa=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Ra=new r$3.PerspectiveCamera,ka=new r$3.Frustum,Da=new r$3.Matrix4,La=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Oa=new Float32Array([0,0,1,0,0,1,1,1]),Na$1=new Uint8Array([0,1,2,1,3,2]),Fa$1=new r$3.BufferGeometry;Fa$1.setAttribute("position",new r$3.BufferAttribute(La,3)),Fa$1.setAttribute("uv",new r$3.BufferAttribute(Oa,2)),Fa$1.setIndex(new r$3.BufferAttribute(Na$1,1));var Qa$1=function(Cu){function Tu(){var Pu=Cu.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return Pu.depthTest=!1,Pu.depthWrite=!1,Pu.blending=r$3.NoBlending,Pu.map=Pu.uniforms.map.value,Pu.luminanceMap=Pu.uniforms.luminanceMap.value,Object.defineProperties(Pu,{map:{get:function(){return this.uniforms.map.value},set:function(Bu){this.uniforms.map.value=Bu}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Bu){this.uniforms.luminanceMap.value=Bu,this.defines.USE_LUMINANCE=Bu!==null,this.needsUpdate=!0}}}),Pu}return t$3.__extends(Tu,Cu),Tu}(r$3.ShaderMaterial),Va$1=function(Cu){function Tu(){var Pu=Cu!==null&&Cu.apply(this,arguments)||this;return Pu.level=0,Pu.sideCount=0,Pu.col=0,Pu.row=0,Pu.index=0,Pu.type="up",Pu}return t$3.__extends(Tu,Cu),Tu}(r$3.Box3),_a$2=function(Cu){function Tu(Pu,Bu){var Lu=this,Ru=new Qa$1;return Ru.visible=!1,(Lu=Cu.call(this,Fa$1,Ru)||this).position.copy(Pu.getCenter(new r$3.Vector3)),Lu.quaternion.copy(Ta[Pu.type]),Lu.scale.setScalar(1/Math.pow(2,Pu.level)),Lu.name="tile-box",Lu.level=Pu.level,Lu.activeTime=-1,Lu.disposed=!1,Lu.needsRender=!1,Lu.frustumCulled=!1,Bu.then(function(Ou){var Du=Ou[0],ku=Ou[1];Lu.disposed?(Du.dispose(),ku==null||ku.dispose()):(Lu.material.map=Du,Lu.material.luminanceMap=ku,Lu.material.needsUpdate=!0,Lu.material.visible=!0,Lu.needsRender=!0)}).catch(Qe$1),Lu}return t$3.__extends(Tu,Cu),Tu.getBox=function(Pu,Bu,Lu){var Ru=new Va$1,Ou=Math.pow(2,Pu),Du=1/Ou,ku=Lu%Ou,Fu=Math.floor(Lu/Ou);switch(Ru.level=Pu,Ru.index=Lu,Ru.sideCount=Ou,Ru.row=Fu,Ru.col=ku,Ru.type=Bu,Bu){case"up":Ru.min.y=.5,Ru.max.y=.5,Ru.min.x=+ku*Du-.5,Ru.max.x=+ku*Du-.5+Du,Ru.min.z=-Fu*Du+.5-Du,Ru.max.z=-Fu*Du+.5;break;case"down":Ru.min.y=-.5,Ru.max.y=-.5,Ru.min.x=+ku*Du-.5,Ru.max.x=+ku*Du-.5+Du,Ru.min.z=+Fu*Du-.5,Ru.max.z=+Fu*Du-.5+Du;break;case"left":Ru.min.x=-.5,Ru.max.x=-.5,Ru.min.z=-ku*Du+.5-Du,Ru.max.z=-ku*Du+.5,Ru.min.y=-Fu*Du+.5-Du,Ru.max.y=-Fu*Du+.5;break;case"right":Ru.min.x=.5,Ru.max.x=.5,Ru.min.z=+ku*Du-.5,Ru.max.z=+ku*Du-.5+Du,Ru.min.y=-Fu*Du+.5-Du,Ru.max.y=-Fu*Du+.5;break;case"front":Ru.min.z=-.5,Ru.max.z=-.5,Ru.min.x=+ku*Du-.5,Ru.max.x=+ku*Du-.5+Du,Ru.min.y=-Fu*Du+.5-Du,Ru.max.y=-Fu*Du+.5;break;case"back":Ru.min.z=.5,Ru.max.z=.5,Ru.min.x=-ku*Du+.5-Du,Ru.max.x=-ku*Du+.5,Ru.min.y=-Fu*Du+.5-Du,Ru.max.y=-Fu*Du+.5}return Ru},Tu.prototype.updateTime=function(Pu){},Tu.prototype.dispose=function(){var Pu;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(Pu=this.material.luminanceMap)===null||Pu===void 0||Pu.dispose()),this.material.dispose()},Tu}(r$3.Mesh),Ha$1=function(Cu){function Tu(){var Pu=Cu.call(this)||this;return Pu.needsRender=!1,Pu.name="tiling",Pu}return t$3.__extends(Tu,Cu),Tu}(r$3.Group),qa$1=function(){function Cu(Tu,Pu){this.disposed=!1,this.textureLoader=new Ii(Tu),this.level=0,this.panoIndex=0,this.pedding=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=Pu,this.object=new Ha$1}return Cu.prototype.setAllowHosts=function(Tu){this.textureLoader.setAllowHosts(Tu)},Cu.prototype.setRequestProxy=function(Tu){this.textureLoader.setRequestProxy(Tu)},Cu.prototype.setNetworkSubscribe=function(Tu){this.textureLoader.setNetworkSubscribe(Tu)},Cu.prototype.cleanup=function(){for(var Tu=0;Tu<this.tiles.length;Tu++)if(this.tiles[Tu]){var Pu=this.tiles[Tu],Bu="level-group:"+Tu,Lu=this.object.getObjectByName(Bu);for(var Ru in Pu){var Ou=Pu[Ru];Ou.dispose(),Lu.remove(Ou),delete Pu[Ru],this.object.needsRender=!0}}},Cu.prototype.setRotation=function(Tu){if(!this.disposed){var Pu=new r$3.Quaternion().multiplyQuaternions(Tu,Pa);this.object.quaternion.equals(Pu)||(this.object.quaternion.copy(Pu),this.object.needsRender=!0)}},Cu.prototype.setPosition=function(Tu){this.disposed||this.object.position.equals(Tu)||(this.object.position.copy(Tu),this.object.needsRender=!0)},Cu.prototype.setResource=function(Tu){if(!this.disposed&&this.resource!==Tu){this.cleanup(),this.resource=Tu;for(var Pu=0;Pu<Tu.length;Pu++){var Bu=Tu[Pu].level;this.tiles[Bu]={};var Lu="level-group:"+Bu,Ru=this.object.getObjectByName(Lu);Ru||((Ru=new r$3.Group).name=Lu,Ru.renderOrder=-2),this.object.add(Ru)}this.object.needsRender=!0}},Cu.prototype.setLuminance=function(Tu){this.luminance=Tu},Cu.prototype.getTileResources=function(Tu){for(var Pu,Bu=(Pu=this.imageOptions.size)!==null&&Pu!==void 0?Pu:2048,Lu=[],Ru=this.resource.length-1;Ru>=0;Ru--)this.resource[Ru].level<=Tu&&512*Math.pow(2,this.resource[Ru].level)>Bu&&Lu.unshift(this.resource[Ru]);return Lu},Cu.prototype.update=function(Tu,Pu,Bu){var Lu=this;if(!this.disposed){this.level=Pu;var Ru=Ra.copy(Tu);Ru.position.set(0,0,0),Ru.quaternion.premultiply(this.object.quaternion.clone().inverse()),Ru.updateMatrixWorld(!0),Ru.updateProjectionMatrix();for(var Ou=Ru.getWorldDirection(new r$3.Vector3),Du=ka.setFromProjectionMatrix(Da.multiplyMatrices(Ru.projectionMatrix,Ru.matrixWorldInverse)),ku=this.getTileResources(Pu),Fu=function(Xc){if(Xc){for(var ju=[],_c=Xc.level,_f=Math.pow(2,_c),ep=_f*_f,tp=Nu.object.getObjectByName("level-group:"+_c),op=0,lp=Ca;op<lp.length;op++)for(var up=lp[op],hp=0;hp<ep;hp++){var np=_a$2.getBox(_c,up,hp);Du.intersectsBox(np)&&ju.push(np)}var rp=new r$3.Vector3;ju.sort(function(pp,bp){return pp.getCenter(rp).angleTo(Ou)-bp.getCenter(rp).angleTo(Ou)});for(var ip=[],ap=0,sp=ju;ap<sp.length;ap++){var cp=(np=sp[ap]).sideCount,dp=np.row,fp=np.col,vp=(up=np.type,"tile-level:".concat(_c,"-face:").concat(up,"-row:").concat(dp,"-col:").concat(fp));if(!Nu.tiles[_c][vp]){var _p=Xc[up],wp=Xc.size,Dp=wp/cp,Pp=[Dp*fp,Dp*dp,Dp,Dp],Wp=t$3.__assign({key:"pano_tile.".concat(Nu.panoIndex,".").concat(up,".").concat(_c,".").concat(dp,".").concat(fp),basisLoaderInitialized:Ei$1.isInitialized(),cut:Pp},ii$1(Nu.imageOptions,["format","mappings"]));_c<=1&&(Wp.format==="jpg"||/\.jpg$/.test(_p))?(Dp!==1024&&(Wp.size=1024),Wp.quality=70):Dp!==512&&(Wp.size=512);var Rp=Nu.imageOptions.transform?Nu.imageOptions.transform(_p,Wp):ct$1(_p,Wp),Gp=Nu.textureLoader.load(Rp,{preInit:!0}).then(function(pp){return pp.body}),kp=null;if(Nu.luminance){var gp=Nu.luminance[up],mp=gp.match(/\/cube_(\d+)\//),Sp=!!mp&&Number(mp[1]);if(Sp!==!1){var xp=wp/Sp,Ep=t$3.__assign(t$3.__assign({},Wp),{size:256,cut:[Pp[0]/xp,Pp[1]/xp,Pp[2]/xp,Pp[3]/xp],key:"pano_tile_luminance.".concat(Nu.panoIndex,".").concat(up,".").concat(_c,".").concat(dp,".").concat(fp)}),$p=Nu.imageOptions.transform?Nu.imageOptions.transform(gp,Ep):ct$1(gp,Ep);kp=Nu.textureLoader.load($p,{format:r$3.LuminanceFormat,preInit:!0}).then(function(pp){return pp.body}).catch(function(){return null})}}Nu.pedding++;var Ip=Promise.all([Gp,kp]).then(function(pp){return Lu.pedding--,pp},function(pp){return Lu.pedding--,Promise.reject(pp)});(Vp=Nu.tiles[_c][vp]=new _a$2(np,Ip)).name=vp,Vp.renderOrder=_c,tp.add(Vp)}Nu.tiles[_c][vp].activeTime=Bu,ip.push(vp)}for(var Np=0,qp=Object.keys(Nu.tiles[_c]).sort(function(pp,bp){return Lu.tiles[_c][bp].activeTime-Lu.tiles[_c][pp].activeTime}).slice(Math.max(24,ip.length));Np<qp.length;Np++){vp=qp[Np];var Vp=Nu.tiles[_c][vp];tp.remove(Vp),Vp.dispose(),delete Nu.tiles[_c][vp],Nu.object.needsRender=!0}}},Nu=this,Gu=0,zu=ku;Gu<zu.length;Gu++)Fu(zu[Gu]);for(var Hu=0;Hu<this.tiles.length;Hu++)if(this.tiles[Hu]){var Wu=ku.length>0&&Hu<=ku[ku.length-1].level;for(var _h in this.tiles[Hu])this.tiles[Hu][_h].visible!==Wu&&(this.tiles[Hu][_h].visible=Wu,this.tiles[Hu][_h].needsRender=!0),this.tiles[Hu][_h].updateTime(Bu)}}},Cu.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},Cu}(),za=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Ka$1=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),Ua$1=new r$3.BufferGeometry;Ua$1.setAttribute("position",new r$3.BufferAttribute(za,3)),Ua$1.setIndex(new r$3.BufferAttribute(Ka$1,1));var ja=function(){function Cu(){this.material=new r$3.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh(Ua$1,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new Ro$1({alpha:0})}return Cu.prototype.setMaterial=function(Tu){Tu?(this.material.uniforms.size.value=Tu.size,this.material.uniforms.matrix.value=Tu.matrix,this.material.uniforms.map.value=Tu.map,this.alphaMotion.set({alpha:Tu.alpha},500).catch(Qe$1),this.material.uniforms.alpha.value=Tu.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Qe$1));var Pu=Tu!==null;Pu!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=Pu,this.material.needsUpdate=!0,this.object.visible=Tu!==null)},Cu.prototype.updateTime=function(Tu){this.alphaMotion.ended||(this.alphaMotion.update(Tu),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},Cu.prototype.dispose=function(){this.material.dispose()},Cu}(),Ga$1=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Wa$1=new r$3.Vector3(-1,1,1),Xa$1=function(Cu){function Tu(Pu){var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu=this,Gu=Tu.parseArgs(Pu);(Nu=Cu.call(this,Gu)||this).initAnimationed=!1,Nu.currentPanoIndex=Gu.initial[0],Nu.maxAccessibleDistance=Gu.maxAccessibleDistance,Nu.panoTapTriggerRadius=Gu.panoTapTriggerRadius,Nu.panoCircleMeshCreator=Gu.panoCircleMeshCreator,Nu.tileLevelForFov=Gu.tileLevelForFov;var zu=Nu.model.getMaterial()||{},Hu=zu.pano0,Wu=zu.pano1;Hu&&(Wu==null?void 0:Wu.map)!==Hu.map&&(Nu.model.setMaterial({pano0:Wu}),Hu.map.dispose(),(Bu=Hu.luminanceMap)===null||Bu===void 0||Bu.dispose()),Nu.boundingMesh=Nu.generateBoundingMesh(),Nu.boundingMesh.setMaterial(Nu.model.getMaterial()||{}),Nu.boundingMesh.visible=!1,Nu.scene.add(Nu.boundingMesh),Nu.panoMeshes=[],Nu.updatePanoMeshes(),Nu.locationMotion=new Ro$1({count:0,distance:Nu.camera.pose.distance,modelAlpha:(Ru=(Lu=Nu.model.getMaterial())===null||Lu===void 0?void 0:Lu.modelAlpha)!==null&&Ru!==void 0?Ru:0,perspToOrtho:(Du=(Ou=Nu.model.getMaterial())===null||Ou===void 0?void 0:Ou.perspToOrtho)!==null&&Du!==void 0?Du:0}),Nu.panoResources={},Nu.panoResources[Nu.locationMotion.keyframes[0].key=Nu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Nu.currentPanoIndex,workCode:Nu.work.workCode,panoPicture:(Fu=(ku=Nu.model.getMaterial())===null||ku===void 0?void 0:ku.pano1)!==null&&Fu!==void 0?Fu:null,position:Nu.camera.pose.offset.clone(),effect:"fly"};var _h={allowHosts:Nu.work.allowHosts,requestProxy:Nu.requestProxy,networkSubscribe:Nu.networkSubscribe};return Nu.textureLoader=new Ii(_h),Nu.tiling=new qa$1(_h,Nu.imageOptions),Nu.scene.add(Nu.tiling.object),Nu.panoVideo=new ja,Nu.scene.add(Nu.panoVideo.object),Nu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu,Lu,Ru,Ou,Du=Cu.parseArgs.call(this,Pu);return t$3.__assign(t$3.__assign({},Du),{maxAccessibleDistance:(Bu=Pu.maxAccessibleDistance)!==null&&Bu!==void 0?Bu:5,panoTapTriggerRadius:(Lu=Pu.panoTapTriggerRadius)!==null&&Lu!==void 0?Lu:.5,panoCircleMeshCreator:(Ru=Pu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as$1},tileLevelForFov:(Ou=Pu.tileLevelForFov)!==null&&Ou!==void 0?Ou:function(ku,Fu){var Nu=2*Math.atan(Math.tan(ku/180*Math.PI/2)*(Fu.width/Fu.height))/Math.PI*180,Gu=Math.max(Fu.width/Nu,Fu.height/ku);return Gu>80?4:Gu>48?3:Gu>24?2:Gu>12?1:0}})},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.destroy=function(){var Pu,Bu,Lu=this;Cu.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Wu){Lu.helper.remove(Wu),Wu.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Ru=this.videoTexture.image;Ru.pause(),Ru.oncanplay=function(){},Ru.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Ou=(Pu=this.model.getMaterial())!==null&&Pu!==void 0?Pu:{},Du=Ou.pano0,ku=Ou.pano1,Fu=0,Nu=Object.keys(this.panoResources);Fu<Nu.length;Fu++){var Gu=Nu[Fu],zu=this.panoResources[Gu];if(zu.panoPicture){var Hu=zu.panoPicture.map;Hu&&Hu!==(Du==null?void 0:Du.map)&&Hu!==(ku==null?void 0:ku.map)&&(Hu.dispose(),(Bu=zu.panoPicture.luminanceMap)===null||Bu===void 0||Bu.dispose(),zu.panoPicture=null)}delete this.panoResources[Gu]}},Tu.prototype.isReady=function(){return this.locationMotion.ended===!0&&Cu.prototype.isReady.call(this)},Tu.prototype.isTileReady=function(){return this.initAnimationed&&this.tiling.pedding<=0},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){var Du=this;this.userAction=Ou,this.work=Pu,this.currentPanoIndex=Bu,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var ku={},Fu=!0;this.boundingMesh&&(ku=this.boundingMesh.getMaterial()||{},Fu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Fu,this.boundingMesh.setMaterial(ku),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Nu=0,Gu=this.panoMeshes;Nu<Gu.length;Nu++)Gu[Nu].visible=!1;return this.moveToPano(Bu,{effect:"fade",duration:Ru,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov,moveEndCallback:function(){Du.initAnimationed=!0},moveCancelCallback:function(){Du.initAnimationed=!0}},Ou),!0},Tu.prototype.updateModel=function(Pu){this.model=Pu;var Bu={},Lu=!0;this.boundingMesh&&(Bu=this.boundingMesh.getMaterial()||{},Lu=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=Lu,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(Bu),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu,Ru,Ou,Du,ku,Fu,Nu,Gu=[],zu=2;zu<arguments.length;zu++)Gu[zu-2]=arguments[zu];if(!this.destroyed){var Hu={},Wu={},_h=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Xc=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ju=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Pu);var _c=this.locationMotion.getKeyFrameSegment(Pu),_f=_c[0],ep=_c[1],tp=this.panoResourceFromLocationMotionKeyframe(_f),op=this.panoResourceFromLocationMotionKeyframe(ep),lp=new r$3.Vector3().copy(tp.position),up=new r$3.Vector3().copy(op.position),hp=this.locationMotion.value.count-ep.value.count+1;Hu.progress=hp,Hu.modelAlpha=this.locationMotion.value.modelAlpha,Hu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),op.panoPicture&&(hp<1?tp.panoPicture&&(Hu.pano0=tp.panoPicture):Hu.pano0=op.panoPicture,Hu.pano1=op.panoPicture),ju=Hu.useBlackTransition=op.effect==="instant"||op.effect==="montage",op.effect!=="fade"&&op.effect!=="montage"||(Hu.pano0&&tp.panoPicture&&(Hu.pano0={map:Hu.pano0.map,luminanceMap:Hu.pano0.luminanceMap,matrix:tp.panoPicture.matrix.clone().setPosition(op.position)}),lp.copy(up)),Wu.distance=this.locationMotion.value.distance,Wu.offset=new r$3.Vector3(lp.x+(up.x-lp.x)*hp,lp.y+(up.y-lp.y)*hp,lp.z+(up.z-lp.z)*hp);for(var np=[],rp=[],ip=0,ap=this.locationMotion.keyframes;ip<ap.length;ip++){var sp=ap[ip],cp=sp.key,dp=sp.progress;cp!==void 0&&(np.push(cp),dp>=this.locationMotion.progress&&rp.push(cp))}for(var fp=0,vp=Object.keys(this.panoResources);fp<vp.length;fp++){var _p=vp[fp];if(!(rp.indexOf(_p)>=0)){var wp=this.panoResources[_p];if(wp.panoPicture){var Dp=wp.panoPicture.map;if(Dp){if(Dp===((Lu=Hu.pano0)===null||Lu===void 0?void 0:Lu.map)||Dp===((Ru=Hu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;Dp.dispose(),(Ou=wp.panoPicture.luminanceMap)===null||Ou===void 0||Ou.dispose(),wp.panoPicture=null}}np.indexOf(_p)>=0||delete this.panoResources[_p]}}tp.workCode===op.workCode?this.currentPanoIndex=hp<.5?tp.panoIndex:op.panoIndex:this.currentPanoIndex=op.panoIndex,this.emit("movingToPano",Xc.panoIndex,_h.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Pu),Wu.longitude=this.cameraMotion.value.longitude,Wu.latitude=this.cameraMotion.value.latitude,Wu.fov=this.cameraMotion.value.fov),ia$1(Hu)===!1&&(this.model.setMaterial(Hu),this.boundingMesh.setMaterial(Hu)),ia$1(Wu)===!1&&this.setCamera(Wu),this.camera.pose.distance>.1)for(var Pp=0;Pp<this.work.observers.length;Pp++)(kp=this.panoMeshes[Pp])&&(kp.visible=!1);else{var Wp=this.work.observers[this.currentPanoIndex];if(Wp){var Rp=Wp.visibleNodes.concat(this.currentPanoIndex),Gp=this.getForwardPanoIndexOrNot();for(Pp=0;Pp<this.work.observers.length;Pp++){var kp,gp=this.work.observers[Pp];if(kp=this.panoMeshes[Pp])if(gp.loadable||gp.active)if(Rp.indexOf(Pp)!==-1)if(ju)kp.visible=!1,kp.setOpacity(0);else{kp.visible=!0;var mp=kp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);kp.setCurrent(Gp===Pp),kp.setOpacity(mp<.01?0:ho(1.4/mp,.5,.7)),kp.updateTime&&kp.updateTime(Pu,Bu)}else kp.visible=!1,kp.setOpacity(0);else kp.visible=!1,kp.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Du=this.boundingMesh.getMaterial())===null||Du===void 0?void 0:Du.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var Sp=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var xp=Xc.panoIndex,Ep=this.work.observers[xp];if(Ep)if(_s$1(this.camera.position,Ep.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((ku=Ep.images.luminance)!==null&&ku!==void 0?ku:null),this.tiling.panoIndex!==xp&&this.tiling.cleanup(),this.tiling.panoIndex=xp,this.tiling.setResource((Nu=(Fu=Ep.images)===null||Fu===void 0?void 0:Fu.tiles)!==null&&Nu!==void 0?Nu:[]),this.tiling.setRotation(Ep.quaternion),this.tiling.setPosition(Ep.position);var $p=this.renderer.getDrawingBufferSize(new r$3.Vector2);$p.width*=this.scissor.width,$p.height*=this.scissor.height;var Ip=this.imageOptions.size;if(Ip===void 0&&Ep){var Np=Ep.images.up.match(/\/cube_(\d+)\//);Np&&(Ip=Number(Np[1]))}Ip===void 0&&(Ip=2048);var qp=0;Ip>=1024&&(qp=1),Ip>=2048&&(qp=2),Ip>=4096&&(qp=3),Ip>=8192&&(qp=4);var Vp=this.tileLevelForFov(this.camera.fov,$p),pp=Vp>qp?Vp:0;this.tiling.update(this.camera,pp,Pu)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;Sp!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(Pu)}},Tu.prototype.render=function(){var Pu=this.work.observers[this.currentPanoIndex];Pu&&Pu.video&&(this.needsRender=!0),Cu.prototype.render.call(this)},Tu.prototype.postProcessing=function(Pu,Bu){if(!this.destroyed)return this.effect||(this.effect=new Sa(this.renderer)),this.effect.render(Pu,Bu)},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Bu=this.locationMotion.getKeyFrameSegment(_e$1())[1],Lu=this.panoResourceFromLocationMotionKeyframe(Bu),Ru=this.work.observers[Lu.panoIndex];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},Tu.prototype.moveToPano=function(Pu,Bu,Lu){var Ru,Ou,Du,ku=this,Fu=this.work.observers[Pu],Nu=t$3.__assign({key:"pano.".concat(Pu),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality","sharpen","mappings"])),Gu=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$1,zu={right:Gu(Fu.images.right,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".right")})),left:Gu(Fu.images.left,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".left")})),up:Gu(Fu.images.up,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".up")})),down:Gu(Fu.images.down,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".down")})),front:Gu(Fu.images.front,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".front")})),back:Gu(Fu.images.back,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".back")}))},Hu={key:"pano_luminance.".concat(Pu),basisLoaderInitialized:Ei$1.isInitialized(),size:Nu.size?Nu.size/2:1024},Wu=this.enableIOSEDR&&Fu.images.luminance?{right:Gu(Fu.images.luminance.right,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".right")})),left:Gu(Fu.images.luminance.left,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".left")})),up:Gu(Fu.images.luminance.up,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".up")})),down:Gu(Fu.images.luminance.down,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".down")})),front:Gu(Fu.images.luminance.front,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".front")})),back:Gu(Fu.images.luminance.back,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".back")}))}:null,_h="pano:"+va(zu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===_h)return;var Xc=this.pendingTextureTask.panoIndex;(Ou=this.panoMeshes[Xc])===null||Ou===void 0||Ou.setProgress(0),this.emit("textureAbort",Xc,Fu),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var ju,_c=this.model.getMaterial()||{},_f=_c.pano0,ep=_c.pano1;if(_f&&_f.map.name===_h&&_f.luminanceMap!==null===this.enableIOSEDR?ju=_f:(ep==null?void 0:ep.map.name)===_h&&ep.luminanceMap!==null===this.enableIOSEDR&&(ju=ep),ju){var tp={panoIndex:Pu,workCode:this.work.workCode,effect:(Du=Bu.effect)!==null&&Du!==void 0?Du:"fly",panoPicture:{map:ju.map,luminanceMap:ju.luminanceMap,matrix:new r$3.Matrix4().compose(Fu.position,Fu.quaternion,Wa$1)},position:Fu.position.clone()};at.shared.add(function(){ku.pending=!1,ku.emit("panoLoaded",Pu),ku.doMoveToPano(Pu,tp,Bu,Lu)},!0,1)}else{this.pendingTextureTask={panoIndex:Pu,hash:_h,onLoad:function(lp,up){var hp,np;if(ku.pending=!1,ku.destroyed)lp.body.dispose();else{lp.body.name=_h,ku.emit("panoLoaded",Pu);var rp={panoIndex:Pu,workCode:ku.work.workCode,effect:(hp=Bu.effect)!==null&&hp!==void 0?hp:"fly",panoPicture:{map:lp.body,luminanceMap:(np=up==null?void 0:up.body)!==null&&np!==void 0?np:null,matrix:new r$3.Matrix4().compose(Fu.position,Fu.quaternion,Wa$1)},position:Fu.position.clone()};ku.doMoveToPano(Pu,rp,Bu,Lu)}},onError:function(lp){ku.pending=!1,Bu.moveCancelCallback&&Bu.moveCancelCallback(),ku.emit("panoLoadError",lp,Pu),ku.emit("moveToPanoCanceled",Pu)}};var op=this.panoMeshes[Pu];op&&op.tap&&op.tap(),Promise.all([this.textureLoader.loadCube(zu,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,function(lp){var up,hp;ku.emit("textureLoading",lp,Pu,Fu),((up=ku.pendingTextureTask)===null||up===void 0?void 0:up.hash)===_h&&((hp=ku.panoMeshes[Pu])===null||hp===void 0||hp.setProgress(lp))},this.renderer),Wu?this.textureLoader.loadCube(Wu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(lp){var up,hp,np=lp[0],rp=lp[1];((up=ku.pendingTextureTask)===null||up===void 0?void 0:up.hash)===_h?(ku.pendingTextureTask.onLoad(np,rp),(hp=ku.panoMeshes[Pu])===null||hp===void 0||hp.setProgress(0),delete ku.pendingTextureTask,ku.emit("textureLoaded",Pu,Fu,np.meta)):(np.body.dispose(),rp==null||rp.body.dispose())}).catch(function(lp){var up,hp;((up=ku.pendingTextureTask)===null||up===void 0?void 0:up.hash)===_h&&(ku.pendingTextureTask.onError(lp),(hp=ku.panoMeshes[Pu])===null||hp===void 0||hp.setProgress(0),delete ku.pendingTextureTask,ku.emit("textureError",lp,Pu,Fu),ku.emit("error",lp))}),this.emit("textureStartLoad",Pu,Fu)}},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;if(!this.destroyed){var Nu=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Pu,{longitude:(Ou=Bu.longitude)!==null&&Ou!==void 0?Ou:this.defaultLongitude,latitude:ho((Du=Bu.latitude)!==null&&Du!==void 0?Du:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((ku=Bu.fov)!==null&&ku!==void 0?ku:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(Gu,zu){Nu=!0,Fu.emit("initAnimationWillStart",Gu,zu,Fu.userAction)},moveEndCallback:function(Gu,zu){Fu.emit("initAnimationEnded",Gu,zu,Fu.userAction),Fu.initAnimationed=!0},moveCancelCallback:function(){var Gu={longitude:Fu.camera.pose.longitude,latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov,offset:Fu.camera.pose.offset.clone(),distance:Fu.camera.pose.distance};Nu===!1&&Fu.emit("initAnimationWillStart",Fu.currentPanoIndex,Gu,Fu.userAction),Fu.emit("initAnimationEnded",Fu.currentPanoIndex,Gu,Fu.userAction),Fu.initAnimationed=!0}},Ru)}},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Pu){return this.panoResources[Pu.key]},Tu.prototype.locationMotionKeyframesLength=function(Pu){for(var Bu=0,Lu=1;Lu<Pu.length;Lu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Pu[Lu-1]).position,Ou=this.panoResourceFromLocationMotionKeyframe(Pu[Lu]).position;Bu+=Ru.distanceTo(Ou)*(Pu[Lu].value.count-Pu[Lu-1].value.count)}return Bu},Tu.prototype.updatePanoMeshes=function(Pu){Pu===void 0&&(Pu=!0);for(var Bu={},Lu=0,Ru=this.panoMeshes;Lu<Ru.length;Lu++)Bu[(Fu=Ru[Lu]).name]=Fu;this.panoMeshes.length=0;for(var Ou=0;Ou<this.work.observers.length;Ou++){var Du="panoCircle_".concat(this.work.workCode,"_").concat(Ou),ku=this.work.observers[Ou],Fu=void 0;if(Bu[Du]?((Fu=Bu[Du]).loading===!0&&ku.loadable===!1&&Fu.setLoading(!1),delete Bu[Du]):((Fu=this.panoCircleMeshCreator()).name=Du,this.helper.add(Fu)),Fu.position.copy(ku.standingPosition),Pu&&this.model.loaded&&this.model.bvhs.loaded){var Nu=new r$3.Vector3(0,-1,0),Gu=new r$3.Vector3(0,.1,0).add(Fu.position),zu=new r$3.Raycaster(Gu,Nu,0,.2),Hu=this.model.intersectRaycaster(zu)[0];Hu&&Hu.point.distanceTo(Gu)<.1&&Fu.position.copy(Hu.point)}this.panoMeshes[Ou]=Fu}for(var Wu=0,_h=Object.keys(Bu);Wu<_h.length;Wu++){var Xc=_h[Wu];this.helper.remove(Bu[Xc]),Bu[Xc].dispose(),delete Bu[Xc]}},Tu.prototype.generateBoundingMesh=function(Pu){Pu===void 0&&(Pu=!1);for(var Bu=this.model.bounding.clone(),Lu=0,Ru=this.work.observers;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Bu.expandByPoint(Ou.standingPosition),Bu.expandByPoint(new r$3.Vector3().fromArray([Ou.position.x,2*Ou.position.y-Ou.standingPosition.y,Ou.position.z]))}Pu&&Bu.expandByPoint(this.camera.position);var Du=Ks$1(Bu,new r$3.Vector3(1,0,1));return Du.name="panorama_bounding",Du},Tu.prototype.doMoveToPano=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;Lu===void 0&&(Lu={}),this.userAction=Ru;var Nu=_e$1(),Gu=Kr();this.tiling.cleanup(),this.panoResources[Gu]=Bu;var zu,Hu,Wu;if(this.locationMotion.ended){var _h=this.locationMotion.getKeyFrameSegment(Nu);_h[0];var Xc=_h[1],ju=this.locationMotion.value,_c=this.panoResourceFromLocationMotionKeyframe(Xc).position,_f=Bu.position;zu=Math.max(_c.distanceTo(_f),1),Hu=[{key:Xc.key,progress:0,value:t$3.__assign(t$3.__assign({},ju),{count:0})},{key:Gu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Wu=0}else{var ep=this.locationMotion.getKeyFrameSegment(Nu),tp=ep[0],op=(Xc=ep[1],ju=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(tp).position),lp=(_c=this.panoResourceFromLocationMotionKeyframe(Xc).position,_f=Bu.position,Xc.value.count-ju.count),up=Math.max(op.distanceTo(_c),1)*lp;zu=up+Math.max(_c.distanceTo(_f),1),Hu=[{key:tp.key,progress:0,value:t$3.__assign({},ju)},{key:Xc.key,progress:up/zu,value:Xc.value},{key:Gu,progress:1,value:{count:Xc.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var hp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),np=this.locationMotionKeyframesLength(Hu);Wu=hp===0||hp===0?0:this.locationMotion.getProgressVelocity(Nu)*hp/np}var rp=this.calculateMovingDuration(Lu.duration,Lu.effect==="fade"||Lu.effect==="montage"?0:zu),ip={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},ap={longitude:(Ou=ip.longitude)!==null&&Ou!==void 0?Ou:this.camera.pose.longitude,latitude:(Du=ip.latitude)!==null&&Du!==void 0?Du:this.camera.pose.latitude,fov:(ku=ip.fov)!==null&&ku!==void 0?ku:this.camera.pose.fov,offset:Bu.position.clone(),distance:this.camera.pose.distance};Lu.moveStartCallback&&Lu.moveStartCallback(Pu,ap),this.emit("panoWillArrive",Pu,ap,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(ip,rp).catch(Qe$1),this.locationMotion.setKeyframes(Hu,rp,Wu).then(function(){var sp,cp,dp,fp={longitude:Fu.camera.pose.longitude,latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov,offset:Fu.camera.pose.offset.clone(),distance:Fu.camera.pose.distance};Lu.moveEndCallback&&Lu.moveEndCallback(Pu,fp),Fu.emit("panoArrived",Pu,fp,Ru);var vp=Fu.work.observers[Fu.currentPanoIndex];if(vp&&vp.video&&Fu.videoTexture&&Fu.videoTexture.image instanceof HTMLVideoElement){var _p=Ga$1.clone().multiply((dp=(cp=(sp=Fu.model.getMaterial())===null||sp===void 0?void 0:sp.pano1)===null||cp===void 0?void 0:cp.matrix)!==null&&dp!==void 0?dp:new r$3.Matrix4).multiply(vp.video.matrix),wp={map:Fu.videoTexture,size:vp.video.size,matrix:_p,alpha:1},Dp=Kr(),Pp=Fu.videoTexture.image;Pp.setAttribute("uuid",Dp),xa().then(function(Wp){Wp&&vp.video&&Pp.getAttribute("uuid")===Dp&&(Pp.oncanplay=function(){Pp.oncanplay=Qe$1,Pp.play()},Pp.ontimeupdate=function(){Pp.currentTime>.5&&(Pp.ontimeupdate=Qe$1,Fu.panoVideo.setMaterial(wp))},Pp.src=vp.video.source)}).catch(function(){Pp.removeAttribute("uuid")})}},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Fu.emit("moveToPanoCanceled",Pu)})},Tu.prototype.getForwardPanoIndexOrNot=function(Pu){var Bu=this,Lu=this.work.observers[this.currentPanoIndex];if(!Lu)return null;var Ru=Pu!=null?Pu:new r$3.Raycaster(this.camera.position.clone(),this.camera.getWorldDirection(new r$3.Vector3)),Ou=Ru.ray.origin.clone(),Du=new r$3.Vector3,ku=this.model.intersectRaycaster(new r$3.Raycaster(Ru.ray.origin,new r$3.Vector3(0,-1,0)))[0];ku&&ku.distance<=2?Du.copy(ku.point):Du.copy(Ru.ray.origin).add(new r$3.Vector3(0,-1.5,0));var Fu=this.model.intersectRaycaster(Ru)[0],Nu=(Fu?Fu.point:Ru.ray.origin.clone().add(Ru.ray.direction.clone().normalize().multiplyScalar(3))).clone().sub(Du).normalize();if(Nu.length()===0)return null;for(var Gu=Lu.accessibleNodes.filter(function(_f){if(_f===Bu.currentPanoIndex)return!1;var ep=Bu.work.observers[_f],tp=ep.standingPosition.clone().sub(Ou);return tp.length()!==0&&!(tp.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(ep.loadable||ep.active)}).slice().sort(function(_f,ep){return Bu.work.observers[_f].standingPosition.clone().distanceTo(Du)-Bu.work.observers[ep].standingPosition.clone().distanceTo(Du)}),zu=0,Hu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];zu<Hu.length;zu++)for(var Wu=Hu[zu],_h=0,Xc=Gu;_h<Xc.length;_h++){var ju=Xc[_h],_c=this.work.observers[ju].standingPosition.clone().sub(Du);if(_c.length()!==0&&Nu.angleTo(_c)<Wu)return ju}return null},Tu.prototype.onTapGesture=function(Pu){var Bu=this,Lu=Pu.pointers.map(function(ip){return ii$1(ip,["x","y"])});if(!this.emit("wantsGesture","tap",Lu,!0)){var Ru=this.relativeClientPosition(Pu.center),Ou=new r$3.Raycaster;if(Ou.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Ou,Ru,!0)){this.emit("gesture","tap",Lu,!0),this.emit("tapGesture",Ou,Ru,!0),this.interiaMovement=!1;var Du=this.camera.getWorldDirection(new r$3.Vector3).setY(0),ku=null,Fu=this.work.observers[this.currentPanoIndex];if(Fu){var Nu=Fu.accessibleNodes.filter(function(ip){if(ip===Bu.currentPanoIndex)return!1;var ap=Bu.work.observers[ip];return!(ap.position.distanceTo(Bu.camera.position)>Bu.maxAccessibleDistance)&&(ap.loadable||ap.active)}),Gu=this.model.intersectRaycaster(Ou)[0];if(Gu){var zu=ta(Nu,function(ip){var ap=Bu.work.observers[ip].standingPosition.clone();return ap.clone().sub(Bu.camera.position).setY(0).angleTo(Du)>Math.PI/2?1/0:ap.distanceTo(Gu.point)},!0),Hu=zu[0];zu[1]<this.panoTapTriggerRadius&&(ku=Hu)}oo(ku)&&(ku=this.getForwardPanoIndexOrNot(Ou));for(var Wu=0,_h=this.locationMotion.keyframes;Wu<_h.length;Wu++){var Xc=_h[Wu],ju=this.panoResourceFromLocationMotionKeyframe(Xc);if(!(Xc.progress<this.locationMotion.progress)&&ju.panoIndex===ku){ku=null;break}}if(this.emit("panoSelected",ku),oo(ku))this.locationMotion.ended===!0&&this.cameraBounce();else{var _c=this.work.observers[ku];if(_c.active){for(var _f={},ep=Math.PI/6,tp=Math.PI/12,op=_c.position.clone().setY(0).sub(Fu.position.clone().setY(0)).normalize(),lp=[],up=0,hp=_c.accessibleNodes;up<hp.length;up++)if((Hu=hp[up])!==this.currentPanoIndex&&Hu!==ku){var np=this.work.observers[Hu].position.clone().sub(_c.position).setY(0);op.angleTo(np)<ep&&lp.push(np)}var rp=(lp.length>0?lp:t$3.__spreadArray(t$3.__spreadArray([],[],!0),[],!0)).slice().sort(function(ip,ap){return ip.angleTo(op)-ap.angleTo(op)})[0];rp&&rp.angleTo(Du)>tp&&(_f.longitude=Math.atan2(-rp.x,-rp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(_f.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(_f.fov=this.defaultFov),this.emit("wantsMoveToPano",ku,_f,!0)}else this.panoMeshes[ku]&&(this.panoMeshes[ku].setDisabled(!1),this.panoMeshes[ku].setLoading(!0))}}}}},Tu}(ba$1),Ya$1=Math.PI/180,Za$1=180/Math.PI,Ja$1=function(){var Cu=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return Cu}}(),$a$1=function(){var Cu=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return Cu}}(),el$1=function(){var Cu=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return Cu}}(),tl$1=function(){var Cu=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,Tu=Cu?parseInt(Cu[1],10):null;return function(){return Tu}}(),il$1=function(){var Cu=!1;if(tl$1()===65){var Tu=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(Tu){var Pu=Tu[1].split(".");Pu[0],Pu[1];var Bu=Pu[2],Lu=Pu[3];Cu=parseInt(Bu,10)===3325&&parseInt(Lu,10)<148}}return function(){return Cu}}(),nl$1=function(){var Cu=Ja$1()&&$a$1()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return Cu}}(),rl$1=function(){var Cu=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return Cu}}();function ol$1(){var Cu=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return rl$1()?!Cu:Cu}var sl$1,al$1=(sl$1={},function(Cu,Tu){sl$1[Cu]===void 0&&(console.warn("cardboard: "+Tu),sl$1[Cu]=!0)});function ll$1(Cu){var Tu,Pu=Cu.indexOf("://");Tu=Pu!==-1?Pu+3:0;var Bu=Cu.indexOf("/",Tu);return Bu===-1&&(Bu=Cu.length),Cu.substring(0,Bu)}var ul$1,hl$1=function(Cu,Tu,Pu){(function(Bu,Lu,Ru){var Ou=Lu?Lu[0]:0,Du=Lu?Lu[1]:0,ku=Lu?Lu[2]:0,Fu=Lu?Lu[3]:1,Nu=Ou+Ou,Gu=Du+Du,zu=ku+ku,Hu=Ou*Nu,Wu=Ou*Gu,_h=Ou*zu,Xc=Du*Gu,ju=Du*zu,_c=ku*zu,_f=Fu*Nu,ep=Fu*Gu,tp=Fu*zu;Bu[0]=1-(Xc+_c),Bu[1]=Wu+tp,Bu[2]=_h-ep,Bu[3]=0,Bu[4]=Wu-tp,Bu[5]=1-(Hu+_c),Bu[6]=ju+_f,Bu[7]=0,Bu[8]=_h+ep,Bu[9]=ju-_f,Bu[10]=1-(Hu+Xc),Bu[11]=0,Bu[12]=Ru?Ru[0]:0,Bu[13]=Ru?Ru[1]:0,Bu[14]=Ru?Ru[2]:0,Bu[15]=1})(Cu,Tu),Pu&&function(Bu,Lu,Ru){var Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c=Ru[0],_f=Ru[1],ep=Ru[2];Lu===Bu?(Bu[12]=Lu[0]*_c+Lu[4]*_f+Lu[8]*ep+Lu[12],Bu[13]=Lu[1]*_c+Lu[5]*_f+Lu[9]*ep+Lu[13],Bu[14]=Lu[2]*_c+Lu[6]*_f+Lu[10]*ep+Lu[14],Bu[15]=Lu[3]*_c+Lu[7]*_f+Lu[11]*ep+Lu[15]):(Ou=Lu[0],Du=Lu[1],ku=Lu[2],Fu=Lu[3],Nu=Lu[4],Gu=Lu[5],zu=Lu[6],Hu=Lu[7],Wu=Lu[8],_h=Lu[9],Xc=Lu[10],ju=Lu[11],Bu[0]=Ou,Bu[1]=Du,Bu[2]=ku,Bu[3]=Fu,Bu[4]=Nu,Bu[5]=Gu,Bu[6]=zu,Bu[7]=Hu,Bu[8]=Wu,Bu[9]=_h,Bu[10]=Xc,Bu[11]=ju,Bu[12]=Ou*_c+Nu*_f+Wu*ep+Lu[12],Bu[13]=Du*_c+Gu*_f+_h*ep+Lu[13],Bu[14]=ku*_c+zu*_f+Xc*ep+Lu[14],Bu[15]=Fu*_c+Hu*_f+ju*ep+Lu[15])}(Cu,Cu,Pu),function(Bu,Lu){var Ru=Lu[0],Ou=Lu[1],Du=Lu[2],ku=Lu[3],Fu=Lu[4],Nu=Lu[5],Gu=Lu[6],zu=Lu[7],Hu=Lu[8],Wu=Lu[9],_h=Lu[10],Xc=Lu[11],ju=Lu[12],_c=Lu[13],_f=Lu[14],ep=Lu[15],tp=Ru*Nu-Ou*Fu,op=Ru*Gu-Du*Fu,lp=Ru*zu-ku*Fu,up=Ou*Gu-Du*Nu,hp=Ou*zu-ku*Nu,np=Du*zu-ku*Gu,rp=Hu*_c-Wu*ju,ip=Hu*_f-_h*ju,ap=Hu*ep-Xc*ju,sp=Wu*_f-_h*_c,cp=Wu*ep-Xc*_c,dp=_h*ep-Xc*_f,fp=tp*dp-op*cp+lp*sp+up*ap-hp*ip+np*rp;fp&&(fp=1/fp,Bu[0]=(Nu*dp-Gu*cp+zu*sp)*fp,Bu[1]=(Du*cp-Ou*dp-ku*sp)*fp,Bu[2]=(_c*np-_f*hp+ep*up)*fp,Bu[3]=(_h*hp-Wu*np-Xc*up)*fp,Bu[4]=(Gu*ap-Fu*dp-zu*ip)*fp,Bu[5]=(Ru*dp-Du*ap+ku*ip)*fp,Bu[6]=(_f*lp-ju*np-ep*op)*fp,Bu[7]=(Hu*np-_h*lp+Xc*op)*fp,Bu[8]=(Fu*cp-Nu*ap+zu*rp)*fp,Bu[9]=(Ou*ap-Ru*cp-ku*rp)*fp,Bu[10]=(ju*hp-_c*lp+ep*tp)*fp,Bu[11]=(Wu*lp-Hu*hp-Xc*tp)*fp,Bu[12]=(Nu*ip-Fu*sp-Gu*rp)*fp,Bu[13]=(Ru*sp-Ou*ip+Du*rp)*fp,Bu[14]=(_c*op-ju*up-_f*tp)*fp,Bu[15]=(Hu*up-Wu*op+_h*tp)*fp)}(Cu,Cu)},cl$1=function(){function Cu(Tu,Pu){Tu===void 0&&(Tu=new r$3.Vector3),Pu===void 0&&(Pu=0),this.sample=Tu,this.timestampS=Pu}return Cu.prototype.set=function(Tu,Pu){this.sample=Tu,this.timestampS=Pu},Cu.prototype.copy=function(Tu){this.set(Tu.sample,Tu.timestampS)},Cu}(),dl$1=function(){function Cu(Tu,Pu){this.kFilter=Tu,this.isDebug=Pu,this.currentAccelMeasurement=new cl$1,this.currentGyroMeasurement=new cl$1,this.previousGyroMeasurement=new cl$1,Ja$1()?this.filterQ=new r$3.Quaternion(-1,0,0,1):this.filterQ=new r$3.Quaternion(1,0,0,1),this.previousFilterQ=new r$3.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$3.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$3.Vector3,this.measuredGravity=new r$3.Vector3,this.gyroIntegralQ=new r$3.Quaternion}return Cu.prototype.addAccelMeasurement=function(Tu,Pu){this.currentAccelMeasurement.set(Tu,Pu)},Cu.prototype.addGyroMeasurement=function(Tu,Pu){this.currentGyroMeasurement.set(Tu,Pu);var Bu,Lu=Pu-this.previousGyroMeasurement.timestampS;Bu=Lu,isNaN(Bu)||Bu<=.001||Bu>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Cu.prototype.getOrientation=function(){return this.filterQ},Cu.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var Tu=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Pu=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,Tu);this.gyroIntegralQ.multiply(Pu),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Pu);var Bu=new r$3.Quaternion;Bu.copy(this.filterQ),Bu.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Bu),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Lu,Ru=new r$3.Quaternion;Ru.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ru.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Za$1*((Lu=Ru).w>1?0:2*Math.acos(Lu.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ou=new r$3.Quaternion;Ou.copy(this.filterQ),Ou.multiply(Ru),this.filterQ.slerp(Ou,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Cu.prototype.accelToQuaternion_=function(Tu){var Pu=new r$3.Vector3;Pu.copy(Tu),Pu.normalize();var Bu=new r$3.Quaternion;return Bu.setFromUnitVectors(new r$3.Vector3(0,0,-1),Pu),Bu.inverse(),Bu},Cu.prototype.gyroToQuaternionDelta_=function(Tu,Pu){var Bu=new r$3.Quaternion,Lu=new r$3.Vector3;return Lu.copy(Tu),Lu.normalize(),Bu.setFromAxisAngle(Lu,Tu.length()*Pu),Bu},Cu}(),pl$1=function(){function Cu(Tu,Pu){this.predictionTimeS=Tu,this.isDebug=Pu,this.previousQ=new r$3.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$3.Quaternion,this.outQ=new r$3.Quaternion}return Cu.prototype.getPrediction=function(Tu,Pu,Bu){if(!this.previousTimestampS)return this.previousQ.copy(Tu),this.previousTimestampS=Bu,Tu;var Lu=new r$3.Vector3;Lu.copy(Pu),Lu.normalize();var Ru=Pu.length();if(Ru<20*Ya$1)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Za$1*Ru).toFixed(1)),this.outQ.copy(Tu),this.previousQ.copy(Tu),this.outQ;var Ou=Ru*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Lu,Ou),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(Tu),this.previousTimestampS=Bu,this.outQ},Cu}(),fl$1=function(){function Cu(Tu){this.coefficients=Tu}return Cu.prototype.distortInverse=function(Tu){for(var Pu=0,Bu=1,Lu=Tu-this.distort(Pu);Math.abs(Bu-Pu)>1e-4;){var Ru=Tu-this.distort(Bu),Ou=Bu-Ru*((Bu-Pu)/(Ru-Lu));Pu=Bu,Bu=Ou,Lu=Ru}return Bu},Cu.prototype.distort=function(Tu){for(var Pu=Tu*Tu,Bu=0,Lu=0;Lu<this.coefficients.length;Lu++)Bu=Pu*(Bu+this.coefficients[Lu]);return(Bu+1)*Tu},Cu}(),Al$1=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},gl$1=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},ml$1=function(){function Cu(Tu,Pu,Bu,Lu){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Bu,this.accelerometer=new r$3.Vector3,this.gyroscope=new r$3.Vector3,this.filter=new dl$1(Tu,Lu),this.posePredictor=new pl$1(Pu,Lu),this.isFirefoxAndroid=el$1(),this.isIOS=Ja$1();var Ru=tl$1();this.isDeviceMotionInRadians=!this.isIOS&&Ru!==null&&Ru<66,this.isWithoutDeviceMotion=il$1()||nl$1(),this.filterToWorldQ=new r$3.Quaternion,Ja$1()?this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$3.Quaternion,this.worldToScreenQ=new r$3.Quaternion,this.originalPoseAdjustQ=new r$3.Quaternion;var Ou=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Ou),this.setScreenTransform_(),ol$1()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$3.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return Cu.prototype.getPosition=function(){return null},Cu.prototype.getOrientation=function(){var Tu;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ou=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,0,-1),0),Du=new r$3.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Du.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/-2):Du.setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI/2),Ou.multiply(Du)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((Bu=new r$3.Quaternion).setFromAxisAngle(new r$3.Vector3(1,0,0),-Math.PI/2),Bu),Tu=this._deviceOrientationQ;var Pu=new r$3.Quaternion;return Pu.copy(Tu),Pu.multiply(this.deviceOrientationFilterToWorldQ),Pu.multiply(this.resetQ),Pu.multiply(this.worldToScreenQ),Pu.multiplyQuaternions(this.deviceOrientationFixQ,Pu),this.yawOnly&&(Pu.x=0,Pu.z=0,Pu.normalize()),this.orientationOut_[0]=Pu.x,this.orientationOut_[1]=Pu.y,this.orientationOut_[2]=Pu.z,this.orientationOut_[3]=Pu.w,this.orientationOut_}var Bu,Lu=this.filter.getOrientation();Tu=this.posePredictor.getPrediction(Lu,this.gyroscope,this.previousTimestampS);var Ru=new r$3.Quaternion;return Ru.copy(this.filterToWorldQ),Ru.multiply(this.resetQ),Ru.multiply(Tu),Ru.multiply(this.worldToScreenQ),this.yawOnly&&(Ru.x=0,Ru.z=0,Ru.normalize()),this.orientationOut_[0]=Ru.x,this.orientationOut_[1]=Ru.y,this.orientationOut_[2]=Ru.z,this.orientationOut_[3]=Ru.w,this.orientationOut_},Cu.prototype.getPose=function(){var Tu=new Al$1;return Tu.orientation=this.getOrientation(),Tu},Cu.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ol$1()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Cu.prototype.getFrameData=function(Tu){var Pu=this.getOrientation(),Bu=this.getEyeOffset(),Lu=this.getEyeProjectionMatrix();return Tu.pose.angularAcceleration=null,Tu.pose.angularVelocity=null,Tu.pose.linearAcceleration=null,Tu.pose.linearVelocity=null,Tu.pose.orientation=Pu,Tu.pose.position=null,Tu.timestamp=this.previousTimestampS,Tu.leftProjectionMatrix.set(Lu.left),Tu.rightProjectionMatrix.set(Lu.right),hl$1(Tu.leftViewMatrix,Pu,Bu.left),hl$1(Tu.rightViewMatrix,Pu,Bu.right),Tu},Cu.prototype.start=function(){if(typeof window=="undefined")return function(){};var Tu=this.onDeviceMotion_.bind(this),Pu=this.onOrientationChange_.bind(this),Bu=this.onMessage_.bind(this),Lu=this.onDeviceOrientation_.bind(this);return Ja$1()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Ru=window.self!==window.top,Ou=ll$1(document.referrer),Du=ll$1(window.location.href);return Ru&&Ou!==Du}()&&window.addEventListener("message",Bu),window.addEventListener("orientationchange",Pu),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Lu):window.addEventListener("devicemotion",Tu),function(){window.removeEventListener("devicemotion",Tu),window.removeEventListener("deviceorientation",Pu),window.removeEventListener("orientationchange",Pu),window.removeEventListener("message",Bu)}},Cu.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},Cu.prototype.getEyeProjectionMatrix=function(){var Tu=this.getEyeFieldOfView(),Pu=this.depthNear,Bu=this.depthFar,Lu={left:[],right:[]},Ru=Tu.left.upDegrees*Ya$1,Ou=Tu.left.downDegrees*Ya$1,Du=2/((Fu=Tu.left.leftDegrees*Ya$1)+(Nu=Tu.left.rightDegrees*Ya$1)),ku=2/(Ru+Ou);Lu.left[0]=Du,Lu.left[1]=0,Lu.left[2]=0,Lu.left[3]=0,Lu.left[4]=0,Lu.left[5]=ku,Lu.left[6]=0,Lu.left[7]=0,Lu.left[8]=-(Fu-Nu)*Du*.5,Lu.left[9]=(Ru-Ou)*ku*.5,Lu.left[10]=Bu/(Pu-Bu),Lu.left[11]=-1,Lu.left[12]=0,Lu.left[13]=0,Lu.left[14]=Bu*Pu/(Pu-Bu),Lu.left[15]=0;var Fu,Nu;return Ru=Tu.right.upDegrees*Ya$1,Ou=Tu.right.downDegrees*Ya$1,Du=2/((Fu=Tu.right.leftDegrees*Ya$1)+(Nu=Tu.right.rightDegrees*Ya$1)),ku=2/(Ru+Ou),Lu.right[0]=Du,Lu.right[1]=0,Lu.right[2]=0,Lu.right[3]=0,Lu.right[4]=0,Lu.right[5]=ku,Lu.right[6]=0,Lu.right[7]=0,Lu.right[8]=-(Fu-Nu)*Du*.5,Lu.right[9]=(Ru-Ou)*ku*.5,Lu.right[10]=Bu/(Pu-Bu),Lu.right[11]=-1,Lu.right[12]=0,Lu.right[13]=0,Lu.right[14]=Bu*Pu/(Pu-Bu),Lu.right[15]=0,Lu},Cu.prototype.getEyeFieldOfView=function(){var Tu=this.viewer,Pu=this.device,Bu=new fl$1(Tu.distortionCoefficients),Lu=Tu.screenLensDistance,Ru=(Pu.widthMeters-Tu.interLensDistance)/2,Ou=Tu.interLensDistance/2,Du=Tu.baselineLensDistance-Pu.bevelMeters,ku=Pu.heightMeters-Du,Fu=Za$1*Math.atan(Bu.distort(Ru/Lu)),Nu=Za$1*Math.atan(Bu.distort(Ou/Lu)),Gu=Za$1*Math.atan(Bu.distort(Du/Lu)),zu=Za$1*Math.atan(Bu.distort(ku/Lu)),Hu=new gl$1,Wu=new gl$1;return Hu.leftDegrees=Math.min(Fu,Tu.fov),Hu.rightDegrees=Math.min(Nu,Tu.fov),Hu.downDegrees=Math.min(Gu,Tu.fov),Hu.upDegrees=Math.min(zu,Tu.fov),Wu.leftDegrees=Hu.rightDegrees,Wu.rightDegrees=Hu.leftDegrees,Wu.upDegrees=Hu.upDegrees,Wu.downDegrees=Hu.downDegrees,{left:Hu,right:Wu}},Cu.prototype.onDeviceOrientation_=function(Tu){this._deviceOrientationQ=this._deviceOrientationQ||new r$3.Quaternion;var Pu=Tu.alpha,Bu=Tu.beta,Lu=Tu.gamma;Pu=(Pu||0)*Math.PI/180,Bu=(Bu||0)*Math.PI/180,Lu=(Lu||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$3.Euler(Pu,Bu,-Lu,"YXZ"))},Cu.prototype.onDeviceMotion_=function(Tu){this.updateDeviceMotion_(Tu)},Cu.prototype.updateDeviceMotion_=function(Tu){var Pu=Tu.accelerationIncludingGravity,Bu=Tu.rotationRate,Lu=Tu.timeStamp/1e3,Ru=Lu-this.previousTimestampS;return Ru<0?(al$1("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Lu)):Ru<=.001||Ru>1?(al$1("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Lu)):(Pu&&(this.accelerometer.set(-Pu.x,-Pu.y,-Pu.z),Bu&&(rl$1()?this.gyroscope.set(-Bu.beta,Bu.alpha,Bu.gamma):this.gyroscope.set(Bu.alpha,Bu.beta,Bu.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Lu)),this.filter.addAccelMeasurement(this.accelerometer,Lu)),void(this.previousTimestampS=Lu))},Cu.prototype.onOrientationChange_=function(){this.setScreenTransform_()},Cu.prototype.onMessage_=function(Tu){var Pu=Tu.data;Pu&&Pu.type&&Pu.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(Pu.deviceMotionEvent)},Cu.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$3.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Cu}(),vl$1=[0,0,.5,1],yl$1=[.5,0,.5,1],bl$1=function(){function Cu(Tu){var Pu=this;this.renderer=Tu,this.sensor=new ml$1(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$3.PerspectiveCamera,this.cameraR=new r$3.PerspectiveCamera;var Bu=this.sensor.start();this.dispose=function(){var Lu=Pu.renderer.getSize(new r$3.Vector2);Pu.renderer.setScissor(0,0,Lu.width,Lu.height),Pu.renderer.setViewport(0,0,Lu.width,Lu.height),Pu.renderer.setScissorTest(!1),Bu()}}return Cu.prototype.render=function(Tu,Pu){var Bu=this.renderer.getSize(new r$3.Vector2);if(Bu.width>Bu.height){var Lu=Tu.autoUpdate;Lu&&(Tu.updateMatrixWorld(),Tu.autoUpdate=!1);var Ru={x:Math.round(Bu.width*vl$1[0]),y:Math.round(Bu.height*vl$1[1]),width:Math.round(Bu.width*vl$1[2]),height:Math.round(Bu.height*vl$1[3])},Ou={x:Math.round(Bu.width*yl$1[0]),y:Math.round(Bu.height*yl$1[1]),width:Math.round(Bu.width*yl$1[2]),height:Math.round(Bu.height*yl$1[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),Pu.parent===null&&Pu.updateMatrixWorld(),Pu.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),Pu.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Du=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$3.Vector3().fromArray(Du.left),this.scale),this.cameraR.translateOnAxis(new r$3.Vector3().fromArray(Du.right),this.scale);var ku=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=ku.left.slice(),this.cameraR.projectionMatrix.elements=ku.right.slice(),this.renderer.setViewport(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.setScissor(Ru.x,Ru.y,Ru.width,Ru.height),this.renderer.render(Tu,this.cameraL),this.renderer.setViewport(Ou.x,Ou.y,Ou.width,Ou.height),this.renderer.setScissor(Ou.x,Ou.y,Ou.width,Ou.height),this.renderer.render(Tu,this.cameraR),this.renderer.setViewport(0,0,Bu.width,Bu.height),this.renderer.setScissor(0,0,Bu.width,Bu.height),this.renderer.setScissorTest(!1),Lu&&(Tu.autoUpdate=!0)}else this.renderer.render(Tu,Pu)},Cu.prototype.dispose=function(){},Cu}(),xl$1={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},wl$1=typeof navigator!="undefined"&&(ul$1=xl$1[navigator.language.split("-")[0]])!==null&&ul$1!==void 0?ul$1:xl$1.zh,El$1=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(wl$1.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(wl$1.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function Ml$1(Cu){for(var Tu=1,Pu=document.getElementsByTagName("meta"),Bu=0;Bu<Pu.length;Bu++){var Lu=Pu[Bu];if(Lu.getAttribute("name")==="viewport"){var Ru=(Lu.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Ru&&(Tu=Number(Ru[1])),isNaN(Tu)&&(Tu=1)}}return El$1.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,Cu).replace(/(\d+)px/g,function(Ou,Du){return function(ku){return Math.floor(ku*Tu)+"px"}(Number(Du))})}var Il$1=new r$3.CircleBufferGeometry(.12,16),Sl$1=function(){var Cu=yt$1(),Tu=new r$3.Texture;return Cu.onload=function(){if(typeof document!="undefined"){var Pu=256,Bu=document.createElement("canvas");Bu.setAttribute("width",String(Pu)),Bu.setAttribute("height",String(Pu));var Lu=Bu.getContext("2d");if(Lu){Lu.drawImage(Cu,0,0,Pu,Pu),Lu.globalCompositeOperation="source-out";var Ru=128;Lu.beginPath(),Lu.lineWidth=6.4,Lu.arc(Ru,Ru,83.2,0,2*Math.PI),Lu.strokeStyle="rgba(255, 255, 255, 1.0)",Lu.closePath(),Lu.stroke(),Tu.image=Bu,Tu.needsUpdate=!0}}},Cu.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Tu}(),Cl$1=function(){if(typeof document!="undefined"){var Cu=document.createElement("canvas");Cu.setAttribute("width",String(512)),Cu.setAttribute("height",String(512));var Tu=Cu.getContext("2d");if(Tu){var Pu=256;return Tu.beginPath(),Tu.arc(Pu,Pu,192,0,2*Math.PI),Tu.fillStyle="rgba(255, 255, 255, 0.1)",Tu.closePath(),Tu.fill(),Tu.save(),Tu.beginPath(),Tu.arc(Pu,Pu,192,0,2*Math.PI),Tu.strokeStyle="rgba(255, 255, 255, 0.5)",Tu.lineWidth=10.24,Tu.closePath(),Tu.stroke(),new r$3.CanvasTexture(Cu)}}return null}(),Bl$1=function(){if(typeof document!="undefined"){var Cu=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Pu=Tu.getContext("2d");if(Pu){var Bu=256;Pu.arc(Bu,Bu,192,0,2*Math.PI),Pu.fillStyle="rgba(85, 90, 255, 0.6)",Pu.shadowBlur=25.6,Pu.shadowColor="rgba(255, 255, 255, 0.6)",Pu.fill(),Pu.arc(Bu,Bu,192,0,2*Math.PI);var Lu=Pu.createRadialGradient(Bu,Bu,0,Bu,Bu,Bu);Lu.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Lu.addColorStop(1,"rgba(255, 255, 255, 0.2)"),Pu.fillStyle=Lu,Pu.fill(),Pu.lineWidth=4.8,Pu.arc(Bu,Bu,187.2,0,2*Math.PI);var Ru=Pu.createLinearGradient(0,0,0,Cu);return Ru.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ru.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Pu.strokeStyle=Ru,Pu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Tl$1=function(){if(typeof document!="undefined"){var Cu=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Pu=Tu.getContext("2d");if(Pu){var Bu=256,Lu=179.2;Pu.arc(Bu,Bu,Lu,0,2*Math.PI),Pu.fillStyle="rgba(255, 255, 255, 0.4)",Pu.shadowBlur=25.6,Pu.shadowColor="rgba(255, 255, 255, 0.6)",Pu.fill(),Pu.arc(Bu,Bu,Lu,0,2*Math.PI);var Ru=Pu.createRadialGradient(Bu,Bu,0,Bu,Bu,Bu);Ru.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ru.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Pu.fillStyle=Ru,Pu.fill(),Pu.lineWidth=4.8,Pu.arc(Bu,Bu,Lu-4.8,0,2*Math.PI);var Ou=Pu.createLinearGradient(0,0,0,Cu);return Ou.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ou.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Pu.strokeStyle=Ou,Pu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Pl$1=function(){if(typeof document!="undefined"){var Cu=512,Tu=document.createElement("canvas");Tu.setAttribute("width",String(Cu)),Tu.setAttribute("height",String(Cu));var Pu=Tu.getContext("2d");if(Pu){var Bu=256,Lu=217.6,Ru=64;Pu.lineWidth=Ru,Pu.arc(Bu,Bu,Lu,0,2*Math.PI),Pu.strokeStyle="rgba(147, 162, 255, 0.3)",Pu.shadowBlur=25.6,Pu.shadowColor="rgba(255, 255, 255, 0.6)",Pu.stroke(),Pu.lineWidth=Ru,Pu.arc(Bu,Bu,Lu,0,2*Math.PI);var Ou=Pu.createRadialGradient(Bu,Bu,185.6,Bu,Bu,249.6);Ou.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ou.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ou.addColorStop(1,"rgba(255, 255, 255, 0.5)"),Pu.strokeStyle=Ou,Pu.stroke(),Pu.beginPath(),Pu.lineWidth=4,Pu.arc(Bu,Bu,245.6,0,2*Math.PI);var Du=Pu.createLinearGradient(0,0,Cu,0);return Du.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Du.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Du.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Du.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),Pu.strokeStyle=Du,Pu.stroke(),new r$3.CanvasTexture(Tu)}}return null}(),Rl$1=function(Cu){function Tu(){var Pu=Cu.call(this)||this;Pu.progress=0,Pu.opacity=0,Pu.loading=!1,Pu.current=!1,Pu.disabled=!1,Pu.opacityMotion=new Ro$1({opacity:0}),Pu.loadingMotion=new Ro$1({opacity:0}),Pu.currentMotion=new Ro$1({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var Bu={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return Pu.hitTestMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{color:0,opacity:0}))),Pu.hitTestMesh.scale.set(1.5,1.5,1.5),Pu.centerMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Bl$1,opacity:0}))),Pu.centerMesh2=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Tl$1,opacity:0}))),Pu.ringMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Pl$1,opacity:0}))),Pu.loadingMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Sl$1,opacity:.8}))),Pu.disableMesh=new r$3.Mesh(Il$1,new r$3.MeshBasicMaterial(t$3.__assign(t$3.__assign({},Bu),{map:Cl$1}))),Pu.loadingMesh.visible=!1,Pu.disableMesh.visible=!1,Pu.hitTestMesh.position.z=0,Pu.ringMesh.position.z=.003,Pu.disableMesh.position.z=.002,Pu.centerMesh.position.z=.002,Pu.centerMesh2.position.z=.002,Pu.loadingMesh.position.z=.005,Pu.hitTestMesh.frustumCulled=!1,Pu.centerMesh.frustumCulled=!1,Pu.centerMesh2.frustumCulled=!1,Pu.ringMesh.frustumCulled=!1,Pu.loadingMesh.frustumCulled=!1,Pu.disableMesh.frustumCulled=!1,Pu.add(Pu.hitTestMesh),Pu.add(Pu.centerMesh),Pu.add(Pu.centerMesh2),Pu.add(Pu.ringMesh),Pu.add(Pu.loadingMesh),Pu.add(Pu.disableMesh),Pu.renderOrder=1e4,Pu.needsRender=!0,Pu}return t$3.__extends(Tu,Cu),Tu.prototype.setProgress=function(Pu){this.progress=Pu,this.setLoading(Pu>0)},Tu.prototype.setOpacity=function(Pu){this.opacity!==Pu&&(this.opacity=Pu=ho(Pu,0,1),this.opacityMotion.set({opacity:Pu},30).catch(Qe$1))},Tu.prototype.setCurrent=function(Pu){if(this.current!==Pu){if(Pu){var Bu=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(Bu,1500).catch(Qe$1)}else Bu=[{progress:0,value:t$3.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(Bu,200).catch(Qe$1);this.current=Pu}},Tu.prototype.setLoading=function(Pu){this.loading!==Pu&&(Pu?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=Pu,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},Tu.prototype.setDisabled=function(Pu){this.disabled!==Pu&&(this.disabled=Pu,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=Pu,this.centerMesh.visible=!Pu,this.needsRender=!0)},Tu.prototype.tap=function(){return Promise.resolve()},Tu.prototype.updateTime=function(Pu,Bu){this.opacityMotion.update(Pu),this.currentMotion.update(Pu),this.loadingMotion.update(Pu);var Lu=this.opacityMotion.value.opacity,Ru=this.currentMotion.value,Ou=Ru.ringScale,Du=Ru.ringOpacity,ku=Ru.circleFade,Fu=Ru.circleOpacity,Nu=Ru.circleScale;if(this.ringMesh.scale.set(Ou,Ou,Ou),this.centerMesh.scale.set(Nu,Nu,Nu),this.centerMesh2.scale.set(Nu,Nu,Nu),this.ringMesh.material.opacity=Du*Lu,this.centerMesh.material.opacity=(1-ku)*Lu,this.centerMesh2.material.opacity=ku*Fu*Lu,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-Bu/200);var Gu=this.opacityMotion.value.opacity,zu=1.1;this.centerMesh.scale.set(zu,zu,zu),this.centerMesh2.scale.set(zu,zu,zu),this.centerMesh.material.opacity=0*Gu,this.centerMesh2.material.opacity=.2*Gu}else this.loadingMesh.visible=!1;this.needsRender=!0},Tu.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},Tu}(r$3.Object3D),kl$1=function(Cu){function Tu(Pu){var Bu=this,Lu=Tu.parseArgs(Pu);(Bu=Cu.call(this,Lu)||this).cardboard=new bl$1(Bu.renderer);var Ru,Ou,Du,ku=(Ru="five_vr_helper_"+Kr(),Ou=Ml$1(Ru),(Du=document.createElement("div")).className=Ru,Du.innerHTML=Ou,Du);Bu.helperElement=ku;var Fu=new ra(ku);return Bu.element.parentNode&&(Bu.element.parentNode.insertBefore(ku,Bu.element),Bu.setHelperElementSize(),Fu.on("tap",function(){return Bu.emit("vrWantsToExit")})),Bu.destroyHelper=function(){Fu.destroy(),ku.parentNode&&ku.parentNode.removeChild(ku),delete Bu.helperElement},Bu.boundingMesh.visible=!0,Bu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu=t$3.__assign(t$3.__assign({},Pu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return Cu.parseArgs.call(this,Bu)},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var Pu=0,Bu=this.panoMeshes;Pu<Bu.length;Pu++){var Lu=Bu[Pu];this.helper.remove(Lu),Lu.dispose()}this.panoMeshes.length=0},Tu.prototype.isReady=function(){return!1},Tu.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},Tu.prototype.updatePanoMeshes=function(){var Pu=this;this.panoMeshes.forEach(function(Ou){Pu.helper.remove(Ou),Ou.dispose()}),this.panoMeshes.length=0;for(var Bu=0;Bu<this.work.observers.length;Bu++){var Lu=this.work.observers[Bu],Ru=new Rl$1;Ru.name="panoSphere_".concat(this.work.workCode,"_").concat(Bu),Ru.position.copy(Lu.position),Ru.needsRender=!0,this.helper.add(Ru),this.panoMeshes[Bu]=Ru}},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu,Ru,Ou=[],Du=2;Du<arguments.length;Du++)Ou[Du-2]=arguments[Du];if(!this.destroyed){this.needsRender=!0;var ku={},Fu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Pu);var Nu=this.locationMotion.getKeyFrameSegment(Pu),Gu=Nu[0],zu=Nu[1],Hu=this.panoResourceFromLocationMotionKeyframe(Gu),Wu=this.panoResourceFromLocationMotionKeyframe(zu),_h=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Xc=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ju=Hu.position,_c=Wu.position,_f=this.locationMotion.value.count-zu.value.count+1;ku.modelAlpha=this.locationMotion.value.modelAlpha,ku.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),ku.useBlackTransition=Wu.effect==="instant",Wu.panoPicture&&(_f<1?Hu.panoPicture&&(ku.pano0=Hu.panoPicture):ku.pano0=Wu.panoPicture,ku.pano1=Wu.panoPicture),Wu.effect==="fade"&&(ku.pano0&&Hu.panoPicture&&(ku.pano0={map:ku.pano0.map,luminanceMap:ku.pano0.luminanceMap,matrix:Hu.panoPicture.matrix.clone().setPosition(Wu.position)}),ju.copy(_c)),ku.progress=_f,Fu.distance=this.locationMotion.value.distance,Fu.offset=new r$3.Vector3(ju.x+(_c.x-ju.x)*_f,ju.y+(_c.y-ju.y)*_f,ju.z+(_c.z-ju.z)*_f);for(var ep=[],tp=[],op=0,lp=this.locationMotion.keyframes;op<lp.length;op++){var up=lp[op],hp=up.key,np=up.progress;hp!==void 0&&(ep.push(hp),np>=this.locationMotion.progress&&tp.push(hp))}for(var rp=0,ip=Object.keys(this.panoResources);rp<ip.length;rp++){var ap=ip[rp];if(!(tp.indexOf(ap)>=0)){var sp=this.panoResources[ap];if(sp.panoPicture){var cp=sp.panoPicture.map;if(cp){if(cp===((Lu=ku.pano0)===null||Lu===void 0?void 0:Lu.map)||cp===((Ru=ku.pano1)===null||Ru===void 0?void 0:Ru.map))continue;cp.dispose(),sp.panoPicture=null}}ep.indexOf(ap)>=0||delete this.panoResources[ap]}}this.currentPanoIndex=_f<.5?Hu.panoIndex:Wu.panoIndex,this.emit("movingToPano",Xc.panoIndex,_h.panoIndex,this.locationMotion.progress)}ia$1(ku)===!1&&(this.model.setMaterial(ku),this.boundingMesh.setMaterial(ku)),Fu.offset&&this.camera.position.copy(Fu.offset);var dp=this.camera.pose.longitude,fp=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var vp=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),_p=0;_p<this.work.observers.length;_p++){var wp=this.work.observers[_p];if((Wp=this.panoMeshes[_p]).visible=!0,wp.loadable||wp.active){if(vp.indexOf(_p)===-1)Wp.visible=!1;else{Wp.visible=!0;var Dp=Wp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Dp<.05?Wp.setOpacity(0):Wp.setOpacity(ho(1.5/Dp,0,1)),this.currentPanoIndex===_p&&Wp.setOpacity(0)}Wp.lookAt(this.camera.position)}else Wp.visible=!0}var Pp=this.intersect(Pu);for(_p=0;_p<this.work.observers.length;_p++)(Wp=this.panoMeshes[_p])==null||Wp.setCurrent(Wp===Pp);for(_p=0;_p<this.work.observers.length;_p++){var Wp;(Wp=this.panoMeshes[_p])&&Wp.updateTime&&Wp.updateTime(Pu,Bu)}dp===this.camera.pose.longitude&&fp===this.camera.pose.latitude||(this.cameraMotion.set(ii$1(this.camera.pose,["longitude","latitude"]),0).catch(Qe$1),this.emit("cameraDirectionUpdate",ii$1(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",na(ii$1(this.camera.pose,["longitude","latitude","fov","offset","distance"])),!0))}},Tu.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},Tu.prototype.setCamera=function(Pu){},Tu.prototype.destroyHelper=function(){},Tu.prototype.setHelperElementSize=function(){if(this.helperElement){var Pu=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),Bu=Pu.x*this.scissor.left,Lu=Pu.y*(1-this.scissor.bottom-this.scissor.height),Ru=Pu.x*this.scissor.width,Ou=Pu.y*this.scissor.height;this.helperElement.style.marginLeft=Bu+"px",this.helperElement.style.marginTop=Lu+"px",this.helperElement.style.width=Ru+"px",this.helperElement.style.height=Ou+"px"}},Tu.prototype.intersect=function(Pu){var Bu;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&Pu-this.activeTime>1500){var Lu=this.activePanoMesh;return(Nu=this.panoMeshes.indexOf(Lu))>=0&&this.moveToPano(Nu,{},!0),delete this.activePanoMesh,delete this.activeTime,Lu}for(var Ru=this.camera.getWorldDirection(new r$3.Vector3),Ou=new r$3.Raycaster(this.camera.position,Ru),Du=void 0,ku=[],Fu=this.work.observers[this.currentPanoIndex].visibleNodes,Nu=0;Nu<this.work.observers.length;Nu++){var Gu=this.panoMeshes[Nu];if(Fu.indexOf(Nu)!==-1){var zu=Ou.intersectObject((Bu=Gu.hitTestMesh)!==null&&Bu!==void 0?Bu:Gu,!0)[0];zu&&ku.push({panoMesh:Gu,intersection:zu})}}var Hu=ku.sort(function(_c,_f){return _c.intersection.distance-_f.intersection.distance})[0];if(Hu?(Du=Hu.intersection,this.activePanoMesh!==Hu.panoMesh&&(this.activePanoMesh=Hu.panoMesh,this.activeTime=Pu),this.intersectMesh.position.copy(Hu.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Du)if((Du=this.model.intersectRaycaster(Ou)[0])&&Du.face){var Wu=Du.face.normal,_h=new r$3.Quaternion;_h.setFromUnitVectors(new r$3.Vector3(0,0,1),Wu),this.intersectMesh.quaternion.copy(_h);var Xc=Wu.clone().multiplyScalar(.05),ju=Du.point.clone().add(Xc);this.intersectMesh.position.copy(ju),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Du,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Hu==null?void 0:Hu.panoMesh},Tu.prototype.onPanGesture=function(){},Tu.prototype.onTapGesture=function(){},Tu.prototype.onPinchGesture=function(){},Tu.prototype.onMouseMove=function(){},Tu.prototype.onMouseOut=function(){},Tu}(Xa$1),Dl$1=function(Cu){function Tu(Pu){var Bu,Lu,Ru,Ou,Du=this,ku=Tu.parseArgs(Pu);return(Du=Cu.call(this,ku)||this).currentPanoIndex=ku.initial[0],Du.locationMotion=new Ro$1({x:Du.camera.pose.offset.x,y:Du.camera.pose.offset.y,z:Du.camera.pose.offset.z,distance:Du.camera.pose.distance,modelAlpha:(Lu=(Bu=Du.model.getMaterial())===null||Bu===void 0?void 0:Bu.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Ou=(Ru=Du.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Ou!==void 0?Ou:0}),Du}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){return Cu.parseArgs.call(this,Pu)},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this),this.locationMotion.dispose()},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&Cu.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){this.work=Pu,this.currentPanoIndex=Bu,this.hideIntersectMesh();var Du={duration:0,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov};return this.moveToPano(Bu,Du,Ou),!0},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu=[],Ru=2;Ru<arguments.length;Ru++)Lu[Ru-2]=arguments[Ru];if(!this.destroyed){var Ou={},Du={};if(!this.locationMotion.ended){this.locationMotion.update(Pu),Ou.modelAlpha=this.locationMotion.value.modelAlpha,Ou.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Du.distance=this.locationMotion.value.distance,Du.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var ku=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Fu=ta(this.work.observers,function(Nu){return Nu.position.distanceTo(ku)});this.currentPanoIndex=this.work.observers.indexOf(Fu)}this.cameraMotion.ended||(this.cameraMotion.update(Pu),Du.longitude=this.cameraMotion.value.longitude,Du.latitude=this.cameraMotion.value.latitude,Du.fov=this.cameraMotion.value.fov),ia$1(Ou)||this.model.setMaterial(Ou),ia$1(Du)||this.setCamera(Du)}},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;this.destroyed||(this.pending=!1,this.userAction=Ru,this.moveToPano(Pu,{longitude:(Ou=Bu.longitude)!==null&&Ou!==void 0?Ou:this.defaultLongitude,latitude:ho((Du=Bu.latitude)!==null&&Du!==void 0?Du:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((ku=Bu.fov)!==null&&ku!==void 0?ku:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(Nu,Gu){Fu.emit("initAnimationWillStart",Nu,Gu,Fu.userAction)},moveEndCallback:function(Nu,Gu){Fu.emit("initAnimationEnded",Nu,Gu,Fu.userAction)},moveCancelCallback:function(){var Nu=Fu.currentPanoIndex,Gu={longitude:Fu.camera.pose.longitude,latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov,offset:Fu.camera.pose.offset.clone(),distance:Fu.camera.pose.distance};Fu.emit("initAnimationEnded",Nu,Gu,Fu.userAction)}},Ru))},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Bu=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,offset:new r$3.Vector3(Bu.value.x,Bu.value.y,Bu.value.z),distance:Bu.value.distance}},Tu.prototype.moveToPano=function(Pu,Bu,Lu){Bu===void 0&&(Bu={});var Ru=this.work.observers[Pu];Ru&&this.moveToPosition(Ru.position,Bu,Lu)},Tu.prototype.moveToPosition=function(Pu,Bu,Lu){var Ru,Ou,Du,ku=this;Bu===void 0&&(Bu={}),this.userAction=Lu;for(var Fu=_e$1(),Nu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(Pu),Gu=this.locationMotion.getProgressVelocity(Fu),zu=0,Hu=1;Hu<this.locationMotion.keyframes.length;Hu++){var Wu=this.locationMotion.keyframes[Hu-1].value,_h=Wu.x,Xc=Wu.y,ju=Wu.z,_c=this.locationMotion.keyframes[Hu].value,_f=_c.x,ep=_c.y,tp=_c.z;zu+=Math.sqrt(Math.pow(_f-_h,2)+Math.pow(ep-Xc,2)+Math.pow(tp-ju,2))}var op=Nu===0?0:Gu*zu/Nu,lp=this.calculateMovingDuration(Bu.duration,Nu),up={x:Pu.x,y:Pu.y,z:Pu.z,distance:0,modelAlpha:1,perspToOrtho:0},hp={longitude:Bu.longitude,latitude:Bu.latitude,fov:Bu.fov},np={longitude:(Ru=hp.longitude)!==null&&Ru!==void 0?Ru:this.camera.pose.longitude,latitude:(Ou=hp.latitude)!==null&&Ou!==void 0?Ou:this.camera.pose.latitude,fov:(Du=hp.fov)!==null&&Du!==void 0?Du:this.camera.pose.fov,offset:Pu.clone(),distance:0},rp=ta(this.work.observers,function(ap){return ap.position.distanceTo(Pu)}),ip=this.work.observers.indexOf(rp);this.emit("moveToPano",ip,this.userAction),Bu.moveStartCallback&&Bu.moveStartCallback(ip,np),this.emit("panoWillArrive",ip,np,this.userAction),this.cameraMotion.set(hp,lp).catch(Qe$1),this.locationMotion.set(up,lp,op).then(function(){var ap=na(ku.camera.pose);Bu.moveEndCallback&&Bu.moveEndCallback(ip,ap),ku.emit("panoArrived",ip,ap,ku.userAction)},function(){Bu.moveCancelCallback&&Bu.moveCancelCallback(),ku.emit("moveToPanoCanceled",ip)})},Tu.prototype.onTapGesture=function(Pu){var Bu=Pu.pointers.map(function(Wu){return ii$1(Wu,["x","y"])});if(!this.emit("wantsGesture","tap",Bu,!0)){var Lu=this.relativeClientPosition(Pu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ru,Lu,!0)){this.emit("gesture","tap",Bu,!0),this.emit("tapGesture",Ru,Lu,!0),this.interiaMovement=!1;var Ou=this.model.intersectRaycaster(Ru)[0];if(Ou&&Ou.face){var Du=Ou.face.normal,ku=Ou.point;if(new r$3.Vector3(0,1,0).angleTo(Du)>Math.PI/3){var Fu=this.camera.position.clone().setY(ku.y),Nu=ku.clone().sub(Fu).setLength(.3),Gu=ku.clone().sub(Nu);Ru.set(Gu,new r$3.Vector3(0,-1,0)),Ou=this.model.intersectRaycaster(Ru)[0]}}if(Ou){var zu=Ou.point.clone(),Hu=ta(this.work.observers.filter(function(Wu){return Math.abs(Wu.standingPosition.y-zu.y)<1}),function(Wu){return Wu.standingPosition.distanceTo(zu)});if(Hu)return zu.y=Hu.position.y,void this.moveToPosition(zu,{},!0)}this.cameraBounce()}}},Tu}(ba$1),Ll$1=function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),Ol$1=function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];var Pu=113,Bu=126,Lu=0,Ru="";return arguments[Lu].split(Ru).map(function(Ou){return Ou.charCodeAt(Lu)>Bu?Ou:String.fromCharCode((Ou.charCodeAt(Lu)+Pu)%Bu)}).join(Ru)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Nl$1=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Fl$1=new r$3.SphereBufferGeometry(.01,128,128),Ql$1=function(){function Cu(Tu){Tu===void 0&&(Tu={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe}),this.allowHosts=Tu.allowHosts,this.requestProxy=Tu.requestProxy,this.networkSubscribe=Tu.networkSubscribe}return Cu.prototype.setAllowHosts=function(Tu){this.allowHosts=Tu,this.textureLoader.setAllowHosts(Tu)},Cu.prototype.setRequestProxy=function(Tu){this.requestProxy=Tu,this.textureLoader.setRequestProxy(Tu)},Cu.prototype.setNetworkSubscribe=function(Tu){this.networkSubscribe=Tu,this.textureLoader.setNetworkSubscribe(Tu)},Cu.prototype.load=function(Tu,Pu,Bu,Lu,Ru,Ou,Du,ku){var Fu=[0,0],Nu=function(zu,Hu){Fu[Hu]=zu,Du(.8*Fu[0]+.2*Fu[1])},Gu=[this.textureLoader.load(Tu,{viaAjax:!0},void 0,void 0,function(zu){return Nu(zu,1)},ku),this.textureLoader.loadCube(Pu,{viaAjax:!0},void 0,void 0,function(zu){return Nu(zu,0)},ku)];return Promise.all(Gu).then(function(zu){var Hu=zu[0],Wu=zu[1],_h={body:function(Xc,ju,_c,_f){var ep=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:Ll$1,fragmentShader:Ol$1,transparent:!0,uniforms:r$3.UniformsUtils.clone(Nl$1)}),tp=ju;return tp.needsUpdate=!0,tp.minFilter=r$3.LinearFilter,tp.magFilter=r$3.LinearFilter,Xc.needsUpdate=!0,Xc.minFilter=r$3.LinearFilter,Xc.magFilter=r$3.LinearFilter,ep.uniforms.opacity.value=0,ep.uniforms.panoMap.value=tp,ep.uniforms.panoDisplacementMap.value=Xc,ep.uniforms.panoPosition.value=_c,ep.uniforms.panoMatrix.value=_f,Object.assign(new r$3.Mesh(Fl$1,ep),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Hu.body,Wu.body,Bu,Lu),meta:t$3.__spreadArray([Hu.meta],Wu.meta,!0)};return Ru(_h),_h}).catch(function(zu){for(var Hu=0,Wu=Gu;Hu<Wu.length;Hu++)Wu[Hu].then(function(_h){return _h.body.dispose()}).catch(Qe$1);return Ou(zu),Promise.reject(zu)})},Cu}(),Vl$1=new r$3.Vector3(-1,1,1),_l$1=function(Cu){function Tu(Pu){var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu=this,Gu=Tu.parseArgs(Pu);return(Nu=Cu.call(this,Gu)||this).currentPanoIndex=Gu.initial[0],Nu.maxAccessibleDistance=Gu.maxAccessibleDistance,Nu.panoTapTriggerRadius=Gu.panoTapTriggerRadius,Nu.panoCircleMeshCreator=Gu.panoCircleMeshCreator,Nu.boundingMesh=Nu.generateBoundingMesh(),Nu.boundingMesh.setMaterial(Nu.model.getMaterial()||{}),Nu.boundingMesh.visible=!1,Nu.scene.add(Nu.boundingMesh),Nu.panoModelGroup=new r$3.Group,Nu.panoModelGroup.name="panoModels",Nu.scene.add(Nu.panoModelGroup),Nu.panoMeshes=[],Nu.updatePanoMeshes(),Nu.helper.remove(Nu.intersectMesh),Nu.locationMotion=new Ro$1({count:0,distance:Nu.camera.pose.distance,modelAlpha:(Lu=(Bu=Nu.model.getMaterial())===null||Bu===void 0?void 0:Bu.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Ou=(Ru=Nu.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Ou!==void 0?Ou:0}),Nu.panoResources={},Nu.panoResources[Nu.locationMotion.keyframes[0].key=Nu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Nu.currentPanoIndex,workCode:Nu.work.workCode,matrix:(Fu=(ku=(Du=Nu.model.getMaterial())===null||Du===void 0?void 0:Du.pano1)===null||ku===void 0?void 0:ku.matrix)!==null&&Fu!==void 0?Fu:new r$3.Matrix4,position:Nu.camera.pose.offset.clone(),effect:"fly"},Nu.depthTextureLoader=new Ql$1({allowHosts:Nu.work.allowHosts,requestProxy:Nu.requestProxy,networkSubscribe:Nu.networkSubscribe}),Nu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu,Lu,Ru,Ou=Cu.parseArgs.call(this,Pu);return t$3.__assign(t$3.__assign({},Ou),{maxAccessibleDistance:(Bu=Pu.maxAccessibleDistance)!==null&&Bu!==void 0?Bu:5,panoTapTriggerRadius:(Lu=Pu.panoTapTriggerRadius)!==null&&Lu!==void 0?Lu:1,panoCircleMeshCreator:(Ru=Pu.panoCircleMeshCreator)!==null&&Ru!==void 0?Ru:function(){return new as$1}})},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.destroy=function(){var Pu,Bu=this;if(Cu.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var Lu=0,Ru=this.panoModelGroup.children;Lu<Ru.length;Lu++){var Ou=Ru[Lu];typeof Ou.dispose=="function"&&Ou.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(Wu){Bu.helper.remove(Wu),Wu.dispose()}),this.panoMeshes.length=0);for(var Du=(Pu=this.model.getMaterial())!==null&&Pu!==void 0?Pu:{},ku=Du.pano0,Fu=Du.pano1,Nu=0,Gu=Object.keys(this.panoResources);Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=this.panoResources[zu];Hu.panoModel&&Hu.panoModel.material.uniforms.panoMap.value!==(ku==null?void 0:ku.map)&&Hu.panoModel.material.uniforms.panoMap.value!==(Fu==null?void 0:Fu.map)&&(this.panoModelGroup.remove(Hu.panoModel),Hu.panoModel.material.uniforms.panoMap.value.dispose(),Hu.panoModel.dispose(),delete Hu.panoModel),delete this.panoResources[zu]}this.interiaMovement=!1},Tu.prototype.isReady=function(){return this.locationMotion.ended===!1&&Cu.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){this.userAction=Ou,this.work=Pu,this.currentPanoIndex=Bu,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Du={},ku=!0;this.boundingMesh&&(Du=this.boundingMesh.getMaterial()||{},ku=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=ku,this.boundingMesh.setMaterial(Du),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Fu=0,Nu=this.panoMeshes;Fu<Nu.length;Fu++)Nu[Fu].visible=!1;return this.moveToPano(Bu,{effect:"fade",duration:Ru,longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},Ou),!0},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu,Ru,Ou,Du=[],ku=2;ku<arguments.length;ku++)Du[ku-2]=arguments[ku];if(!this.destroyed){var Fu={},Nu={},Gu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),zu=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Hu=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(Pu);var Wu=this.locationMotion.getKeyFrameSegment(Pu),_h=Wu[0],Xc=Wu[1],ju=this.panoResourceFromLocationMotionKeyframe(_h),_c=this.panoResourceFromLocationMotionKeyframe(Xc),_f=new r$3.Vector3().copy(ju.position),ep=new r$3.Vector3().copy(_c.position),tp=this.locationMotion.value.count-Xc.value.count+1;Fu.progress=tp,Fu.modelAlpha=this.locationMotion.value.modelAlpha,Fu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var op=0,lp=this.panoModelGroup.children;op<lp.length;op++){var up=lp[op];up.visible=up===ju.panoModel||up===_c.panoModel}ju.panoModel&&(ju.panoModel.material.uniforms.opacity.value=1-tp,ju.panoModel.material.depthTest=tp!==0),_c.panoModel&&(_c.panoModel.material.uniforms.opacity.value=tp,_c.panoModel.material.depthTest=tp!==1),_c.panoModel&&(tp<1?ju.panoModel&&(Fu.pano0={map:ju.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:ju.matrix}):Fu.pano0={map:_c.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:_c.matrix},Fu.pano1={map:_c.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:_c.matrix}),Hu=Fu.useBlackTransition=_c.effect==="instant"||_c.effect==="montage",_c.effect!=="fade"&&_c.effect!=="montage"||(Fu.pano0&&(Fu.pano0={map:Fu.pano0.map,luminanceMap:null,matrix:ju.matrix.clone().setPosition(_c.position)}),_f.copy(ep)),Nu.distance=this.locationMotion.value.distance,Nu.offset=new r$3.Vector3(_f.x+(ep.x-_f.x)*tp,_f.y+(ep.y-_f.y)*tp,_f.z+(ep.z-_f.z)*tp);for(var hp=[],np=[],rp=0,ip=this.locationMotion.keyframes;rp<ip.length;rp++){var ap=ip[rp],sp=ap.key,cp=ap.progress;sp!==void 0&&(hp.push(sp),cp>=this.locationMotion.progress&&np.push(sp))}for(var dp=0,fp=Object.keys(this.panoResources);dp<fp.length;dp++){var vp=fp[dp];if(!(np.indexOf(vp)>=0)){var _p=this.panoResources[vp];if(_p.panoModel){if(_p.panoModel.material.uniforms.panoMap.value===((Lu=Fu.pano0)===null||Lu===void 0?void 0:Lu.map)||_p.panoModel.material.uniforms.panoMap.value===((Ru=Fu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;this.panoModelGroup.remove(_p.panoModel),_p.panoModel.material.uniforms.panoMap.value.dispose(),_p.panoModel.dispose(),delete _p.panoModel}hp.indexOf(vp)>=0||delete this.panoResources[vp]}}ju.workCode===_c.workCode?this.currentPanoIndex=tp<.5?ju.panoIndex:_c.panoIndex:this.currentPanoIndex=_c.panoIndex,this.emit("movingToPano",zu.panoIndex,Gu.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(Pu),Nu.longitude=this.cameraMotion.value.longitude,Nu.latitude=this.cameraMotion.value.latitude,Nu.fov=this.cameraMotion.value.fov),ia$1(Fu)===!1&&(this.model.setMaterial(Fu),this.boundingMesh.setMaterial(Fu)),ia$1(Nu)===!1&&this.setCamera(Nu),this.camera.pose.distance>.1)for(var wp=0;wp<this.work.observers.length;wp++)(Rp=this.panoMeshes[wp])&&(Rp.visible=!1);else{var Dp=this.work.observers[this.currentPanoIndex];if(Dp){var Pp=Dp.visibleNodes.concat(this.currentPanoIndex),Wp=this.getForwardPanoIndexOrNot();for(wp=0;wp<this.work.observers.length;wp++){var Rp,Gp=this.work.observers[wp];if(Rp=this.panoMeshes[wp])if(Gp.loadable||Gp.active)if(Pp.indexOf(wp)!==-1)if(Hu)Rp.visible=!1,Rp.setOpacity(0);else{Rp.visible=!0;var kp=Rp.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Rp.setCurrent(Wp===wp),Rp.setOpacity(kp<.01?0:ho(1.4/kp,.5,.7)),Rp.updateTime&&Rp.updateTime(Pu,Bu)}else Rp.visible=!1,Rp.setOpacity(0);else Rp.visible=!1,Rp.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ou=this.boundingMesh.getMaterial())===null||Ou===void 0?void 0:Ou.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Bu=this.locationMotion.getKeyFrameSegment(_e$1())[1],Lu=this.panoResourceFromLocationMotionKeyframe(Bu),Ru=this.work.observers[Lu.panoIndex];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,offset:Ru?Ru.position.clone():this.camera.position.clone(),distance:0}},Tu.prototype.moveToPano=function(Pu,Bu,Lu){var Ru,Ou,Du=this;Bu===void 0&&(Bu={});var ku=this.work.observers[Pu].images.depth,Fu=t$3.__assign({key:"pano.".concat(Pu),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality","sharpen","mappings"])),Nu=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$1,Gu={right:Nu(this.work.observers[Pu].images.right,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".right")})),left:Nu(this.work.observers[Pu].images.left,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".left")})),up:Nu(this.work.observers[Pu].images.up,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".up")})),down:Nu(this.work.observers[Pu].images.down,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".down")})),front:Nu(this.work.observers[Pu].images.front,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".front")})),back:Nu(this.work.observers[Pu].images.back,t$3.__assign(t$3.__assign({},Fu),{key:"pano.".concat(Pu,".back")}))},zu=this.work.observers[Pu],Hu=zu.position,Wu=zu.quaternion,_h=new r$3.Matrix4().compose(Hu,Wu,new r$3.Vector3(-1,1,1)),Xc="pano:"+va(Gu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Xc)return;var ju=this.pendingTextureTask.panoIndex;(Ou=this.panoMeshes[ju])===null||Ou===void 0||Ou.setProgress(0),this.emit("textureAbort",ju,this.work.observers[ju]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:Pu,hash:Xc,onLoad:function(_f){Du.pending=!1,Du.destroyed?_f.body.dispose():(_f.body.name=Xc,Du.emit("panoLoaded",Pu),Du.doMoveToPano(Pu,_f.body,Bu,Lu))},onError:function(_f){Du.pending=!1,Bu.moveCancelCallback&&Bu.moveCancelCallback(),Du.emit("panoLoadError",_f,Pu),Du.emit("moveToPanoCanceled",Pu)}};var _c=this.panoMeshes[Pu];_c&&_c.tap&&_c.tap(),this.depthTextureLoader.load(ku,Gu,Hu,_h,function(_f){var ep,tp;((ep=Du.pendingTextureTask)===null||ep===void 0?void 0:ep.hash)===Xc?(Du.pendingTextureTask.onLoad(_f),(tp=Du.panoMeshes[Pu])===null||tp===void 0||tp.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureLoaded",Pu,Du.work.observers[Pu],_f.meta)):_f.body.dispose()},function(_f){var ep,tp;((ep=Du.pendingTextureTask)===null||ep===void 0?void 0:ep.hash)===Xc&&(Du.pendingTextureTask.onError(_f),(tp=Du.panoMeshes[Pu])===null||tp===void 0||tp.setProgress(0),delete Du.pendingTextureTask,Du.emit("textureError",_f,Pu,Du.work.observers[Pu]),Du.emit("error",_f))},function(_f){var ep,tp;Du.emit("textureLoading",_f,Pu,Du.work.observers[Pu]),((ep=Du.pendingTextureTask)===null||ep===void 0?void 0:ep.hash)===Xc&&((tp=Du.panoMeshes[Pu])===null||tp===void 0||tp.setProgress(_f))},this.renderer),this.emit("textureStartLoad",Pu,this.work.observers[Pu])},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;if(!this.destroyed){var Nu=!1;this.pending=!1,this.userAction=Ru,this.moveToPano(Pu,{longitude:(Ou=Bu.longitude)!==null&&Ou!==void 0?Ou:this.defaultLongitude,latitude:ho((Du=Bu.latitude)!==null&&Du!==void 0?Du:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:ho((ku=Bu.fov)!==null&&ku!==void 0?ku:this.defaultFov,this.minFov,this.maxFov),duration:Lu,moveStartCallback:function(Gu,zu){Nu=!0,Fu.emit("initAnimationWillStart",Gu,zu,Fu.userAction)},moveEndCallback:function(Gu,zu){Fu.emit("initAnimationEnded",Gu,zu,Fu.userAction)},moveCancelCallback:function(){var Gu=na(Fu.camera.pose);Nu===!1&&Fu.emit("initAnimationWillStart",Fu.currentPanoIndex,Gu,Fu.userAction),Fu.emit("initAnimationEnded",Fu.currentPanoIndex,Gu,Fu.userAction)}},Ru)}},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Pu){return this.panoResources[Pu.key]},Tu.prototype.locationMotionKeyframesLength=function(Pu){for(var Bu=0,Lu=1;Lu<Pu.length;Lu++){var Ru=this.panoResourceFromLocationMotionKeyframe(Pu[Lu-1]).position,Ou=this.panoResourceFromLocationMotionKeyframe(Pu[Lu]).position;Bu+=Ru.distanceTo(Ou)*(Pu[Lu].value.count-Pu[Lu-1].value.count)}return Bu},Tu.prototype.updatePanoMeshes=function(){for(var Pu={},Bu=0,Lu=this.panoMeshes;Bu<Lu.length;Bu++)Pu[(ku=Lu[Bu]).name]=ku;this.panoMeshes.length=0;for(var Ru=0;Ru<this.work.observers.length;Ru++){var Ou="panoCircle_".concat(this.work.workCode,"_").concat(Ru),Du=this.work.observers[Ru],ku=void 0;Pu[Ou]?(ku=Pu[Ou],delete Pu[Ou]):((ku=this.panoCircleMeshCreator()).name=Ou,this.helper.add(ku)),ku.position.copy(Du.standingPosition),this.panoMeshes[Ru]=ku}for(var Fu=0,Nu=Object.keys(Pu);Fu<Nu.length;Fu++){var Gu=Nu[Fu];this.helper.remove(Pu[Gu]),Pu[Gu].dispose(),delete Pu[Gu]}},Tu.prototype.generateBoundingMesh=function(Pu){Pu===void 0&&(Pu=!1);for(var Bu=this.model.bounding.clone(),Lu=0,Ru=this.work.observers;Lu<Ru.length;Lu++){var Ou=Ru[Lu];Bu.expandByPoint(Ou.standingPosition),Bu.expandByPoint(new r$3.Vector3().fromArray([Ou.position.x,2*Ou.position.y-Ou.standingPosition.y,Ou.position.z]))}Pu&&Bu.expandByPoint(this.camera.position);var Du=Ks$1(Bu,new r$3.Vector3(1,0,1));return Du.name="panorama_bounding",Du.frustumCulled=!1,Du},Tu.prototype.doMoveToPano=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu,Nu=this;Lu===void 0&&(Lu={}),this.userAction=Ru;var Gu=_e$1(),zu=Kr(),Hu=this.work.observers[Pu],Wu=this.panoResources[zu]={panoIndex:Pu,workCode:this.work.workCode,effect:(Ou=Lu.effect)!==null&&Ou!==void 0?Ou:"fly",panoModel:Bu,matrix:new r$3.Matrix4().compose(Hu.position,Hu.quaternion,Vl$1),position:Hu.position.clone()};Bu.visible=!1,Bu.renderOrder=-1,this.panoModelGroup.add(Bu);var _h,Xc,ju;if(this.locationMotion.ended){var _c=this.locationMotion.getKeyFrameSegment(Gu);_c[0];var _f=_c[1],ep=this.locationMotion.value,tp=this.panoResourceFromLocationMotionKeyframe(_f).position,op=Wu.position;_h=Math.max(tp.distanceTo(op),1),Xc=[{key:_f.key,progress:0,value:t$3.__assign(t$3.__assign({},ep),{count:0})},{key:zu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],ju=0}else{var lp=this.locationMotion.getKeyFrameSegment(Gu),up=lp[0],hp=(_f=lp[1],ep=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(up).position),np=(tp=this.panoResourceFromLocationMotionKeyframe(_f).position,op=Wu.position,_f.value.count-ep.count),rp=Math.max(hp.distanceTo(tp),1)*np;_h=rp+Math.max(tp.distanceTo(op),1),Xc=[{key:up.key,progress:0,value:t$3.__assign({},ep)},{key:_f.key,progress:rp/_h,value:_f.value},{key:zu,progress:1,value:{count:_f.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var ip=this.locationMotionKeyframesLength(this.locationMotion.keyframes),ap=this.locationMotionKeyframesLength(Xc);ju=ip===0||ip===0?0:this.locationMotion.getProgressVelocity(Gu)*ip/ap}var sp=this.calculateMovingDuration(Lu.duration,Lu.effect==="fade"||Lu.effect==="montage"?0:_h),cp={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},dp={longitude:(Du=cp.longitude)!==null&&Du!==void 0?Du:this.camera.pose.longitude,latitude:(ku=cp.latitude)!==null&&ku!==void 0?ku:this.camera.pose.latitude,fov:(Fu=cp.fov)!==null&&Fu!==void 0?Fu:this.camera.pose.fov,offset:Hu.position.clone(),distance:this.camera.pose.distance};Lu.moveStartCallback&&Lu.moveStartCallback(Pu,dp),this.emit("panoWillArrive",Pu,dp,this.userAction),this.cameraMotion.set(cp,sp).catch(Qe$1),this.locationMotion.setKeyframes(Xc,sp,ju).then(function(){var fp={longitude:Nu.camera.pose.longitude,latitude:Nu.camera.pose.latitude,fov:Nu.camera.pose.fov,offset:Nu.camera.pose.offset.clone(),distance:Nu.camera.pose.distance};Lu.moveEndCallback&&Lu.moveEndCallback(Pu,fp),Nu.emit("panoArrived",Pu,fp,Ru)},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Nu.emit("moveToPanoCanceled",Pu)})},Tu.prototype.getForwardPanoIndexOrNot=function(Pu){var Bu=this,Lu=this.camera.getWorldDirection(new r$3.Vector3),Ru=this.camera.position.clone(),Ou=this.work.observers[this.currentPanoIndex];if(!Ou)return null;var Du=Ou.accessibleNodes.filter(function(ju){if(ju===Bu.currentPanoIndex)return!1;var _c=Bu.work.observers[ju],_f=_c.standingPosition.clone().sub(Ru);return _f.length()!==0&&!(_f.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(_c.loadable||_c.active)}),ku=(Pu?Pu.ray.direction.clone():Lu.clone()).setY(0);if(ku.length()===0)return null;for(var Fu=Du.slice().sort(function(ju,_c){var _f=Bu.work.observers[ju].position.clone().setY(Ru.y),ep=Bu.work.observers[_c].position.clone().setY(Ru.y);return _f.distanceTo(Ru)-ep.distanceTo(Ru)}),Nu=0,Gu=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Nu<Gu.length;Nu++)for(var zu=Gu[Nu],Hu=0,Wu=Fu;Hu<Wu.length;Hu++){var _h=Wu[Hu],Xc=this.work.observers[_h].position.clone().setY(Ru.y).sub(Ru);if(Xc.length()!==0&&ku.angleTo(Xc)<zu)return _h}return null},Tu.prototype.onTapGesture=function(Pu){var Bu=this,Lu=Pu.pointers.map(function(fp){return ii$1(fp,["x","y"])});if(!this.emit("wantsGesture","tap",Lu,!0)){var Ru=this.relativeClientPosition(Pu.center),Ou=new r$3.Raycaster;if(Ou.setFromCamera(Ru,this.camera),!this.emit("wantsTapGesture",Ou,Ru,!0)){this.emit("gesture","tap",Lu,!0),this.emit("tapGesture",Ou,Ru,!0),this.interiaMovement=!1;var Du=this.camera.getWorldDirection(new r$3.Vector3).setY(0),ku=null,Fu=this.work.observers[this.currentPanoIndex];if(Fu){var Nu=Fu.accessibleNodes.filter(function(fp){if(fp===Bu.currentPanoIndex)return!1;var vp=Bu.work.observers[fp];return!(vp.position.distanceTo(Bu.camera.position)>Bu.maxAccessibleDistance)&&(vp.loadable||vp.active)}),Gu=Ou.intersectObject(this.boundingMesh,!0)[0];if(Gu){var zu=ta(Nu,function(fp){var vp=Bu.work.observers[fp].standingPosition.clone();return vp.clone().sub(Bu.camera.position).setY(0).angleTo(Du)>Math.PI/2?1/0:vp.distanceTo(Gu.point)},!0),Hu=zu[0];zu[1]<this.panoTapTriggerRadius&&(ku=Hu)}oo(ku)&&(ku=this.getForwardPanoIndexOrNot(Ou));for(var Wu=0,_h=this.locationMotion.keyframes;Wu<_h.length;Wu++){var Xc=_h[Wu],ju=this.panoResourceFromLocationMotionKeyframe(Xc);if(!(Xc.progress<this.locationMotion.progress)&&ju.panoIndex===ku){ku=null;break}}if(this.emit("panoSelected",ku),oo(ku))this.locationMotion.ended===!0&&this.cameraBounce();else{var _c=this.work.observers[ku];if(_c.active){for(var _f={},ep=Math.PI/6,tp=Math.PI/12,op=new r$3.Vector3(0,1,0),lp=_c.position.clone().setY(0).sub(Fu.position.clone().setY(0)).normalize(),up=lp.clone().applyAxisAngle(op,ep),hp=lp.clone().applyAxisAngle(op,-ep),np=[],rp=[],ip=[],ap=0,sp=_c.accessibleNodes;ap<sp.length;ap++)if((Hu=sp[ap])!==this.currentPanoIndex&&Hu!==ku){var cp=this.work.observers[Hu].position.clone().sub(_c.position).setY(0);lp.angleTo(cp)<ep?ip.push(cp):up.angleTo(cp)<ep?np.push(cp):hp.angleTo(cp)<ep&&rp.push(cp)}var dp=(ip.length>0?ip:t$3.__spreadArray(t$3.__spreadArray([],np,!0),rp,!0)).slice().sort(function(fp,vp){return fp.angleTo(lp)-vp.angleTo(lp)})[0];dp&&dp.angleTo(Du)>tp&&(_f.longitude=Math.atan2(-dp.x,-dp.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(_f.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",ku,_f,!0)}else this.panoMeshes[ku]&&(this.panoMeshes[ku].setDisabled(!1),this.panoMeshes[ku].setLoading(!0))}}}}},Tu}(ba$1);function Hl$1(Cu,Tu){var Pu=new r$3.Vector3;return Pu.setFromMatrixColumn(Tu,0),Pu.multiplyScalar(-Cu),Pu}function ql$1(Cu,Tu,Pu){var Bu=new r$3.Vector3;return Bu.setFromMatrixColumn(Pu,0),Bu.crossVectors(Tu,Bu),Bu.multiplyScalar(Cu),Bu}var zl$1=function(Cu){function Tu(Pu){var Bu,Lu,Ru,Ou,Du=this,ku=Tu.parseArgs(Pu);return(Du=Cu.call(this,ku)||this).currentPanoIndex=ku.initial[0],Du.defaultLongitude=ku.defaultLongitude,Du.defaultLatitude=ku.defaultLatitude,Du.defaultDistance=ku.defaultDistance,Du.maxLatitude=ku.maxLatitude,Du.minLatitude=ku.minLatitude,Du.maxDistance=ku.maxDistance,Du.minDistance=ku.minDistance,Du.locationMotion=new Ro$1({x:Du.camera.pose.offset.x,y:Du.camera.pose.offset.y,z:Du.camera.pose.offset.z,distance:Du.camera.pose.distance,modelAlpha:(Lu=(Bu=Du.model.getMaterial())===null||Bu===void 0?void 0:Bu.modelAlpha)!==null&&Lu!==void 0?Lu:0,perspToOrtho:(Ou=(Ru=Du.model.getMaterial())===null||Ru===void 0?void 0:Ru.perspToOrtho)!==null&&Ou!==void 0?Ou:0}),Du}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu=Cu.parseArgs.call(this,Pu);return t$3.__assign(t$3.__assign({},Nu),{defaultLongitude:(Bu=Pu.defaultLongitude)!==null&&Bu!==void 0?Bu:Math.PI/4,defaultLatitude:(Lu=Pu.defaultLatitude)!==null&&Lu!==void 0?Lu:Math.PI/4,defaultDistance:(Ru=Pu.defaultDistance)!==null&&Ru!==void 0?Ru:100,maxLatitude:(Ou=Pu.maxLatitude)!==null&&Ou!==void 0?Ou:+Math.PI/2,minLatitude:(Du=Pu.minLatitude)!==null&&Du!==void 0?Du:0,maxDistance:(ku=Pu.maxDistance)!==null&&ku!==void 0?ku:100,minDistance:(Fu=Pu.minDistance)!==null&&Fu!==void 0?Fu:2})},Tu.distanceFromModel=function(Pu,Bu,Lu){var Ru=Pu.bounding,Ou=Math.pow(Math.pow(Ru.max.x-Ru.min.x+1,2)+Math.pow(Ru.max.y-Ru.min.y+1,2)+Math.pow(Ru.max.z-Ru.min.z+1,2),.5),Du=Ou/2/Math.tan(Math.PI*Bu/360);return Lu<1&&(Du/=Lu),isNaN(Du)?Ou:Du},Tu.initAnimationEndPose=function(Pu){var Bu,Lu,Ru=this.parseArgs(Pu),Ou=Pu.initial[0],Du=Pu.initial[1];return{longitude:(Bu=Du.longitude)!==null&&Bu!==void 0?Bu:Ru.defaultLongitude,latitude:ho((Lu=Du.latitude)!==null&&Lu!==void 0?Lu:Ru.defaultLatitude,Ru.minLatitude,Ru.maxLatitude),fov:90,offset:Ru.work.observers[Ou].position.clone(),distance:Tu.distanceFromModel(Ru.model,90,Ru.camera.aspect)}},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this),this.model.enableTiles=!1,this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},Tu.prototype.isReady=function(){return this.locationMotion.ended!==!1&&Cu.prototype.isReady.call(this)},Tu.prototype.updateWork=function(Pu,Bu,Lu,Ru,Ou){return this.work=Pu,this.updateCamera(Lu,Ru,Ou),!0},Tu.prototype.updateModel=function(Pu){Cu.prototype.updateModel.call(this,Pu);var Bu=Pu.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:Bu.x,y:Bu.y,z:Bu.z},0).catch(Qe$1),this.model.enableTiles=!0},Tu.prototype.updateTime=function(Pu,Bu){if(!this.destroyed){var Lu={},Ru={};this.locationMotion.ended||(this.locationMotion.update(Pu),Lu.modelAlpha=this.locationMotion.value.modelAlpha,Lu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ru.distance=this.locationMotion.value.distance,Ru.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(Pu),Ru.longitude=this.cameraMotion.value.longitude,Ru.latitude=this.cameraMotion.value.latitude,Ru.fov=this.cameraMotion.value.fov),ia$1(Lu)||this.model.setMaterial(Lu),ia$1(Ru)||this.setCamera(Ru)}},Tu.prototype.setCamera=function(Pu){Cu.prototype.setCamera.call(this,Pu);var Bu=this.camera.pose.offset.clone();if(this.model.bvhs.loaded){var Lu=new r$3.Raycaster(this.camera.getWorldPosition(new r$3.Vector3),this.camera.getWorldDirection(new r$3.Vector3)),Ru=this.model.intersectRaycaster(Lu)[0];Ru&&Bu.copy(Ru.point)}var Ou=ta(this.work.observers,function(ku){return ku.position.distanceTo(Bu)}),Du=this.work.observers.indexOf(Ou);Du!==this.currentPanoIndex&&(this.emit("moveToPano",Du,this.userAction),this.emit("panoWillArrive",Du,na(this.camera.pose),this.userAction),this.currentPanoIndex=Du,this.emit("panoArrived",Du,na(this.camera.pose),this.userAction))},Tu.prototype.getTargetPose=function(){var Pu=this.cameraMotion.getKeyFrameSegment(_e$1())[1],Bu=this.locationMotion.getKeyFrameSegment(_e$1())[1];return{longitude:Pu.value.longitude,latitude:Pu.value.latitude,fov:Pu.value.fov,distance:Bu.value.distance,offset:new r$3.Vector3(Bu.value.x,Bu.value.y,Bu.value.z)}},Tu.prototype.initAnimation=function(Pu,Bu,Lu,Ru){var Ou,Du,ku=this;if(!this.destroyed){this.pending=!1,this.userAction=Ru;var Fu={longitude:(Ou=Bu.longitude)!==null&&Ou!==void 0?Ou:this.defaultLongitude,latitude:ho((Du=Bu.latitude)!==null&&Du!==void 0?Du:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:90,offset:this.model.bounding.getCenter(new r$3.Vector3),distance:Tu.distanceFromModel(this.model,90,this.camera.aspect)},Nu=ii$1(Fu,["longitude","latitude","fov"]),Gu={x:Fu.offset.x,y:Fu.offset.y,z:Fu.offset.z,distance:Fu.distance,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",Pu,Fu,this.userAction),this.cameraMotion.set(Nu,Lu).catch(Qe$1),this.locationMotion.set(Gu,Lu).then(function(){ku.emit("initAnimationEnded",Pu,Fu,ku.userAction)},function(zu){var Hu=na(ku.camera.pose);ku.emit("initAnimationEnded",Pu,Hu,ku.userAction)}).then(function(){ku.model.enableTiles=!0})}},Tu.prototype.getForwardPanoIndexOrNot=function(Pu){var Bu=this.work.observers.filter(function(Du){return Du.active}),Lu=this.model.intersectRaycaster(Pu)[0];if(!Lu)return null;var Ru=ta(Bu,function(Du){return Du.standingPosition.distanceTo(Lu.point)},!0),Ou=Ru[0];return Ru[1]<5?this.work.observers.indexOf(Ou):null},Tu.prototype.coordinatesForOffset=function(Pu){var Bu=this.cameraMotion.value.fov,Lu=this.camera.aspect,Ru=this.renderer.getSize(new r$3.Vector2);return{longitude:2*Pu.x/(Ru.x*this.scissor.width)*Bu/95*Lu,latitude:-2*Pu.y/(Ru.y*this.scissor.height)*Bu/95}},Tu.prototype.onPanGesture=function(Pu){var Bu=this.panState,Lu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Lu,x:Pu.center.x,y:Pu.center.y},Bu!==void 0&&Bu.pointerLength===Lu){var Ru=Pu.pointers.map(function(_c){return ii$1(_c,["x","y"])});if(!this.emit("wantsGesture","pan",Ru,Pu.isFinal))if(Pu.pointerType==="mouse"&&Pu.srcEvent.buttons===2){var Ou={x:Pu.center.x-Bu.x,y:Pu.center.y-Bu.y},Du=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),ku=this.model.bounding,Fu=ku.getCenter(new r$3.Vector3),Nu={x:(ku.max.x-ku.min.x)/90*this.cameraMotion.value.fov,y:(ku.max.y-ku.min.y)/90*this.cameraMotion.value.fov,z:(ku.max.z-ku.min.z)/90*this.cameraMotion.value.fov},Gu=(this.camera.position.y-ku.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),zu=this.renderer.getSize(new r$3.Vector2);Du.add(Hl$1(2*Ou.x*Gu/zu.y,this.camera.matrix)),Du.add(ql$1(2*Ou.y*Gu/zu.y,this.camera.up,this.camera.matrix)),Du.x=ho(Du.x,Fu.x-Nu.x,Fu.x+Nu.x),Du.z=ho(Du.z,Fu.z-Nu.z,Fu.z+Nu.z);var Hu={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Du,distance:this.locationMotion.value.distance};if(this.emit("wantsPanGesture",Hu,Pu.isFinal))return;this.emit("gesture","pan",Ru,Pu.isFinal),this.emit("panGesture",Hu,Pu.isFinal),this.userAction=!0,this.locationMotion.set({x:Du.x,y:Du.y,z:Du.z},0).catch(Qe$1)}else{Du={x:Pu.center.x-Bu.x,y:Pu.center.y-Bu.y};var Wu=this.coordinatesForOffset(Du),_h=Gs(this.cameraMotion.value.longitude+-1*Wu.longitude),Xc=ho(this.cameraMotion.value.latitude+-1*Wu.latitude,this.minLatitude,this.maxLatitude);if(this.camera.aspect<1&&Math.abs(Pu.overallVelocityX)>.2&&Math.atan2(Math.abs(Pu.overallVelocityY),Math.abs(Pu.overallVelocityX))<Math.PI/6.923&&(Xc=this.cameraMotion.value.latitude),Hu={longitude:_h,latitude:Xc,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance},this.emit("wantsPanGesture",Hu,Pu.isFinal))return;this.emit("gesture","pan",Ru,Pu.isFinal),this.emit("panGesture",Hu,Pu.isFinal),this.userAction=!0,this.interiaMovement=!1;var ju={longitude:Hu.longitude,latitude:Hu.latitude,fov:Hu.fov};this.cameraMotion.set(ju,0).catch(Qe$1),Pu.isFinal&&(this.emit("wantsInteriaPan",Hu)||(this.interiaMovement=!0,Pu.velocityX,Pu.velocityY))}}},Tu.prototype.onPinchGesture=function(Pu){var Bu=this.pinchState||{},Lu=Bu.distance;Bu.offsetY;var Ru=!1;if(Pu.type!=="pinchstart"){if(Pu.type==="pinchend"&&(Ru=!0,delete this.pinchState),Lu!==void 0){this.pinchState={distance:Lu};var Ou=Pu.pointers.map(function(ep){return ii$1(ep,["x","y"])});if(this.emit("wantsGesture","pinch",Ou,Ru))return;var Du=ho(Lu/Pu.scale,this.minDistance,this.maxDistance);if(this.emit("wantsPinchGesture",Pu.scale,this.camera.pose.fov,Ru))return;this.emit("gesture","pinch",Ou,Ru),this.emit("pinchGesture",Pu.scale,this.camera.pose.fov,Ru),this.userAction=!0,this.locationMotion.set({distance:Du},0).catch(Qe$1)}var ku=this.panState,Fu=Pu.pointers.length;if(Pu.isFinal?delete this.panState:this.panState={pointerLength:Fu,x:Pu.center.x,y:Pu.center.y},ku!==void 0&&ku.pointerLength===Fu){var Nu=Pu.pointers.map(function(ep){return ii$1(ep,["x","y"])});if(!this.emit("wantsGesture","pinch",Nu,Ru)){var Gu=Pu.pointers.map(function(ep){return ii$1(ep,["x","y"])});if(!this.emit("wantsGesture","pinch",Gu,Ru)){var zu={x:Pu.center.x-ku.x,y:Pu.center.y-ku.y},Hu=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Wu=this.model.bounding,_h=Wu.getCenter(new r$3.Vector3),Xc={x:(Wu.max.x-Wu.min.x)/90*this.cameraMotion.value.fov,y:(Wu.max.y-Wu.min.y)/90*this.cameraMotion.value.fov,z:(Wu.max.z-Wu.min.z)/90*this.cameraMotion.value.fov},ju=(this.camera.position.y-Wu.min.y)*Math.tan(this.camera.fov/2*Math.PI/180),_c=this.renderer.getSize(new r$3.Vector2);Hu.add(Hl$1(2*zu.x*ju/_c.y,this.camera.matrix)),Hu.add(ql$1(2*zu.y*ju/_c.y,this.camera.up,this.camera.matrix)),Hu.x=ho(Hu.x,_h.x-Xc.x,_h.x+Xc.x),Hu.z=ho(Hu.z,_h.z-Xc.z,_h.z+Xc.z);var _f={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Hu,distance:this.locationMotion.value.distance};this.emit("wantsPanGesture",_f,Pu.isFinal)||(this.emit("gesture","pan",Gu,Pu.isFinal),this.emit("panGesture",_f,Pu.isFinal),this.userAction=!0,this.locationMotion.set({x:Hu.x,y:Hu.y,z:Hu.z},0).catch(Qe$1))}}}}else this.pinchState={distance:this.locationMotion.value.distance}},Tu.prototype.onMouseWheel=function(Pu){var Bu=this,Lu=(Math.abs(Pu.deltaY)>Math.abs(Pu.deltaX)?Pu.deltaY:Pu.deltaX)/-60,Ru=[{x:Pu.clientX,y:Pu.clientY,delta:Lu}];if(!this.emit("wantsGesture","mouseWheel",Ru,!1)){var Ou=ho(this.locationMotion.value.distance-Lu/2,this.minDistance,this.maxDistance);this.emit("wantsMouseWheel",Lu,this.camera.pose.fov,!1)||(this.emit("gesture","mouseWheel",Ru,!1),this.emit("mouseWheel",Lu,this.camera.pose.fov,!1),this.userAction=!0,this.locationMotion.set({distance:Ou},0).catch(Qe$1),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete Bu.mouseWheelState,Bu.emit("wantsGesture","mouseWheel",Ru,!0)||Bu.emit("wantsMouseWheel",Lu,Bu.camera.pose.fov,!0)||(Bu.emit("gesture","mouseWheel",Ru,!0),Bu.emit("mouseWheel",0,Bu.camera.pose.fov,!0))},200)})}},Tu.prototype.onTapGesture=function(Pu){var Bu=Pu.pointers.map(function(ku){return ii$1(ku,["x","y"])});if(!this.emit("wantsGesture","tap",Bu,!0)){var Lu=this.relativeClientPosition(Pu.center),Ru=new r$3.Raycaster;if(Ru.setFromCamera(Lu,this.camera),!this.emit("wantsTapGesture",Ru,Lu,!0)){this.emit("gesture","tap",Bu,!0),this.emit("tapGesture",Ru,Lu,!0),this.interiaMovement=!1;var Ou=this.getForwardPanoIndexOrNot(Ru);if(!oo(Ou)){this.emit("panoSelected",Ou);var Du={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ou,Du,!0)}}}},Tu.prototype.onPressGesture=function(Pu,Bu){var Lu,Ru,Ou=[Pu];if(this.emit("wantsGesture","press",Ou,Bu))return(Lu=this.pressState)===null||Lu===void 0||Lu.stop(),void delete this.pressState;var Du=this.relativeClientPosition(Pu),ku=new r$3.Raycaster;if(ku.setFromCamera(Du,this.camera),this.emit("wantsPressGesture",ku,Du,Pu.delta,Bu))return(Ru=this.pressState)===null||Ru===void 0||Ru.stop(),void delete this.pressState;this.emit("gesture","press",Ou,Bu),this.emit("pressGesture",ku,Du,Pu.delta,Bu)},Tu}(fa$1),Kl$1={type:"move"},Ul$1=function(){function Cu(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return Cu.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new r$3.Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},Cu.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new r$3.Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r$3.Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r$3.Vector3),this._targetRay},Cu.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new r$3.Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r$3.Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r$3.Vector3),this._grip},Cu.prototype.dispatchEvent=function(Tu){return this._targetRay!==null&&this._targetRay.dispatchEvent(Tu),this._grip!==null&&this._grip.dispatchEvent(Tu),this._hand!==null&&this._hand.dispatchEvent(Tu),this},Cu.prototype.disconnect=function(Tu){return this.dispatchEvent({type:"disconnected",data:Tu}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},Cu.prototype.getAxes=function(){return this._axes},Cu.prototype.update=function(Tu,Pu,Bu){var Lu=null,Ru=null,Ou=null,Du=this._targetRay,ku=this._grip,Fu=this._hand;if(Tu&&Tu.gamepad&&Tu.gamepad.axes&&(this._axes=[Tu.gamepad.axes[2],Tu.gamepad.axes[3]]),Tu&&Pu.session.visibilityState!=="visible-blurred")if(Du!==null&&(Lu=Pu.getPose(Tu.targetRaySpace,Bu))!==null&&(Du.matrix.fromArray(Lu.transform.matrix),Du.matrix.decompose(Du.position,Du.rotation,Du.scale),Lu.linearVelocity?(Du.hasLinearVelocity=!0,Du.linearVelocity.copy(Lu.linearVelocity)):Du.hasLinearVelocity=!1,Lu.angularVelocity?(Du.hasAngularVelocity=!0,Du.angularVelocity.copy(Lu.angularVelocity)):Du.hasAngularVelocity=!1,this.dispatchEvent(Kl$1)),Fu&&Tu.hand){Ou=!0;for(var Nu=0,Gu=Tu.hand.values();Nu<Gu.length;Nu++){var zu=Gu[Nu],Hu=Pu.getJointPose(zu,Bu);if(Fu.joints[zu.jointName]===void 0){var Wu=new r$3.Group;Wu.matrixAutoUpdate=!1,Wu.visible=!1,Fu.joints[zu.jointName]=Wu,Fu.add(Wu)}var _h=Fu.joints[zu.jointName];Hu!==null&&(_h.matrix.fromArray(Hu.transform.matrix),_h.matrix.decompose(_h.position,_h.rotation,_h.scale),_h.jointRadius=Hu.radius),_h.visible=Hu!==null}var Xc=Fu.joints["index-finger-tip"],ju=Fu.joints["thumb-tip"],_c=Xc.position.distanceTo(ju.position);Fu.inputState.pinching&&_c>.025?(Fu.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:Tu.handedness,target:this})):!Fu.inputState.pinching&&_c<=.015&&(Fu.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:Tu.handedness,target:this}))}else ku!==null&&Tu.gripSpace&&(Ru=Pu.getPose(Tu.gripSpace,Bu))!==null&&(ku.matrix.fromArray(Ru.transform.matrix),ku.matrix.decompose(ku.position,ku.rotation,ku.scale),Ru.linearVelocity?(ku.hasLinearVelocity=!0,ku.linearVelocity.copy(Ru.linearVelocity)):ku.hasLinearVelocity=!1,Ru.angularVelocity?(ku.hasAngularVelocity=!0,ku.angularVelocity.copy(Ru.angularVelocity)):ku.hasAngularVelocity=!1);return Du!==null&&(Du.visible=Lu!==null),ku!==null&&(ku.visible=Ru!==null),Fu!==null&&(Fu.visible=Ou!==null),this},Cu}(),jl$1=function(Cu){function Tu(Pu,Bu,Lu){var Ru,Ou,Du,ku=this;return(ku=Cu.call(this)||this).isPanorama=(Ru=Lu==null?void 0:Lu.isPanorama)===null||Ru===void 0||Ru,ku.machineType=(Ou=Lu==null?void 0:Lu.machineType)!==null&&Ou!==void 0?Ou:"Pico",ku.renderer=Pu,ku.gl=Bu,ku.enabled=!1,ku.session=null,ku.referenceSpaceType=(Du=Lu==null?void 0:Lu.referenceSpaceType)!==null&&Du!==void 0?Du:"local-floor",ku.referenceSpace=null,ku.controllers=[new Ul$1,new Ul$1],ku.inputSourcesMap=new Map,ku.cameraVR=new r$3.ArrayCamera,ku.cameraL=new r$3.PerspectiveCamera,ku.cameraR=new r$3.PerspectiveCamera,ku.cameraL.viewport=new r$3.Vector4,ku.cameraR.viewport=new r$3.Vector4,ku.cameraL.layers.enable(1),ku.cameraR.layers.enable(2),ku.cameraVR.layers.enable(1),ku.cameraVR.layers.enable(2),ku.isPresenting=!1,ku.currentDepthNear=null,ku.currentDepthFar=null,ku.cameraLPos=new r$3.Vector3,ku.cameraRPos=new r$3.Vector3,ku}return t$3.__extends(Tu,Cu),Tu.prototype.getController=function(Pu){var Bu=this.controllers[Pu];return Bu||console.warn("no controller find"),Bu.getTargetRaySpace()},Tu.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},Tu.prototype.updateCamera=function(Pu,Bu){Bu===null?Pu.matrixWorld.copy(Pu.matrix):Pu.matrixWorld.multiplyMatrices(Bu.matrixWorld,Pu.matrix),Pu.matrixWorldInverse.getInverse(Pu.matrixWorld)},Tu.prototype.setProjectionFromUnion=function(Pu,Bu,Lu){this.cameraLPos.setFromMatrixPosition(Bu.matrixWorld),this.cameraRPos.setFromMatrixPosition(Lu.matrixWorld);var Ru=this.cameraLPos.distanceTo(this.cameraRPos),Ou=Bu.projectionMatrix.elements,Du=Lu.projectionMatrix.elements,ku=Ou[14]/(Ou[10]-1),Fu=Ou[14]/(Ou[10]+1),Nu=(Ou[9]+1)/Ou[5],Gu=(Ou[9]-1)/Ou[5],zu=(Ou[8]-1)/Ou[0],Hu=(Du[8]+1)/Du[0],Wu=ku*zu,_h=ku*Hu,Xc=Ru/(-zu+Hu),ju=Xc*-zu;Bu.matrixWorld.decompose(Pu.position,Pu.quaternion,Pu.scale),Pu.translateX(ju),Pu.translateZ(Xc),Pu.matrixWorld.compose(Pu.position,Pu.quaternion,Pu.scale),Pu.matrixWorldInverse.getInverse(Pu.matrixWorld);var _c=ku+Xc,_f=Fu+Xc,ep=Wu-ju,tp=_h+(Ru-ju),op=Nu*Fu/_f*_c,lp=Gu*Fu/_f*_c;Pu.projectionMatrix.makePerspective(ep,tp,op,lp,_c,_f)},Tu.prototype.getCamera=function(Pu){this.cameraVR.near=this.cameraR.near=this.cameraL.near=Pu.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=Pu.far,!this.session||this.currentDepthNear===this.cameraVR.near&&this.currentDepthFar===this.cameraVR.far||(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var Bu=Pu.parent,Lu=this.cameraVR.cameras;this.updateCamera(this.cameraVR,Bu);for(var Ru=0;Ru<Lu.length;Ru++)this.updateCamera(Lu[Ru],Bu);Pu.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Ou=Pu.children,Du=(Ru=0,Ou.length);Ru<Du;Ru++)Ou[Ru].updateMatrixWorld(!0);return Lu.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},Tu.prototype.updateInputSources=function(Pu){if(this.session){for(var Bu=this.session.inputSources,Lu=0;Lu<this.controllers.length;Lu++)this.inputSourcesMap.set(Bu[Lu],this.controllers[Lu]);for(Lu=0;Lu<Pu.removed.length;Lu++){var Ru=Pu.removed[Lu];(Ou=this.inputSourcesMap.get(Ru))&&(Ou.dispatchEvent({type:"disconnected",data:Ru}),this.inputSourcesMap.delete(Ru))}for(Lu=0;Lu<Pu.added.length;Lu++){var Ou;Ru=Pu.added[Lu],(Ou=this.inputSourcesMap.get(Ru))&&Ou.dispatchEvent({type:"connected",data:Ru})}}else console.warn("session is lose!")},Tu.prototype.onSessionEvent=function(Pu){var Bu=this.inputSourcesMap.get(Pu.inputSource);Bu&&Bu.dispatchEvent({type:Pu.type})},Tu.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(Pu,Bu){Pu.disconnect(Bu)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,at.shared.setContext(null),this.emit("webXRSessionEnd")},Tu.prototype.onRequestReferenceSpace=function(Pu){this.referenceSpace=Pu,this.isPresenting=!0,this.emit("webXRSessionStart")},Tu.prototype.setSession=function(Pu){var Bu=this;if(this.session=Pu,this.session){this.session.addEventListener("select",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("selectstart",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("selectend",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("squeeze",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("squeezestart",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("squeezeend",function(Ru){Bu.onSessionEvent(Ru)}),this.session.addEventListener("end",function(Ru){Bu.onSessionEnd()});var Lu=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Ru={antialias:Lu==null?void 0:Lu.antialias,alpha:Lu==null?void 0:Lu.alpha,depth:Lu==null?void 0:Lu.depth,stencil:Lu==null?void 0:Lu.stencil,framebufferScaleFactor:1};if(Bu.session){switch(Bu.machineType){case"Pico":Bu.session.updateRenderState({baseLayer:new XRWebGLLayer(Bu.session,Bu.gl,Ru)});break;case"Oculus":Bu.session.updateRenderState({layers:[new XRWebGLLayer(Bu.session,Bu.gl,Ru)]});break;default:Bu.machineType}Bu.session.requestReferenceSpace(Bu.referenceSpaceType).then(function(Ou){Bu.onRequestReferenceSpace(Ou)}),Bu.session.addEventListener("inputsourceschange",function(Ou){Bu.updateInputSources(Ou)})}else console.error("session is lose while set session!")})}},Tu}(Fe),Gl$1=["webXRSessionStart","webXRSessionEnd"];function Wl$1(Cu,Tu){if(!Tu)return Cu;var Pu=Cu.match(/\d+_[a-z].png/);return Cu.substring(0,Pu.index)+Tu+"/"+Cu.substring(Pu.index)}var Xl$1=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),Yl$1=new r$3.Vector3(-1,1,1),Zl$1=function(Cu){function Tu(Pu){var Bu=Cu.call(this,Pu)||this;Bu.xrManager=new jl$1(Bu.renderer,Bu.renderer.getContext()),Bu.xrControllerRay=new r$3.Raycaster,Bu.boundingMesh.visible=!0,Bu.panoResources={},Bu.panoResources[Bu.locationMotion.keyframes[0].key=Bu.locationMotion.keyframes[1].key=Kr()]={panoIndex:Bu.currentPanoIndex,workCode:Bu.work.workCode,leftPanoPicture:null,position:Bu.camera.pose.offset.clone(),effect:"fade"};var Lu=at.shared.getContext();if(!Lu)return console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Bu;Lu.addEventListener("select",function(Fu){Bu.emit("webXRSelected","Select"),Bu.checkSelectedPano()}),Lu.addEventListener("squeeze",function(Fu){Bu.emit("webXRSelected","Squeeze")}),Bu.xrManager.setSession(Lu);for(var Ru=function(Fu){Ou.xrManager.on(Fu,function(){for(var Nu=[],Gu=0;Gu<arguments.length;Gu++)Nu[Gu]=arguments[Gu];Bu.emit.apply(Bu,t$3.__spreadArray([Fu],Nu,!1))})},Ou=this,Du=0,ku=Gl$1;Du<ku.length;Du++)Ru(ku[Du]);return Bu}return t$3.__extends(Tu,Cu),Tu.parseArgs=function(Pu){var Bu=t$3.__assign(t$3.__assign({},Pu),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return Cu.parseArgs.call(this,Bu)},Tu.initAnimationEndPose=function(Pu){var Bu=this.parseArgs(Pu);return Cu.initAnimationEndPose.call(this,Bu)},Tu.prototype.moveToPano=function(Pu,Bu,Lu){var Ru,Ou,Du,ku=this,Fu=this.work.observers[Pu],Nu=t$3.__assign({key:"pano.".concat(Pu),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(this.imageOptions,["format","size","quality"])),Gu=(Ru=this.imageOptions.transform)!==null&&Ru!==void 0?Ru:ct$1,zu={right:Wl$1(Gu(Fu.images.right,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".right")}))),left:Wl$1(Gu(Fu.images.left,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".left")}))),up:Wl$1(Gu(Fu.images.up,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".up")}))),down:Wl$1(Gu(Fu.images.down,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".down")}))),front:Wl$1(Gu(Fu.images.front,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".front")}))),back:Wl$1(Gu(Fu.images.back,t$3.__assign(t$3.__assign({},Nu),{key:"".concat(Nu.key,".back")})))},Hu={key:"pano_luminance.".concat(Pu),basisLoaderInitialized:Ei$1.isInitialized(),size:Nu.size?Nu.size/2:1024},Wu=this.enableIOSEDR&&Fu.images.luminance?{right:Gu(Fu.images.luminance.right,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".right")})),left:Gu(Fu.images.luminance.left,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".left")})),up:Gu(Fu.images.luminance.up,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".up")})),down:Gu(Fu.images.luminance.down,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".down")})),front:Gu(Fu.images.luminance.front,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".front")})),back:Gu(Fu.images.luminance.back,t$3.__assign(t$3.__assign({},Hu),{key:"".concat(Hu.key,".back")}))}:null,_h="pano:"+va(zu);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===_h)return;var Xc=this.pendingTextureTask.panoIndex;(Ou=this.panoMeshes[Xc])===null||Ou===void 0||Ou.setProgress(0),this.emit("textureAbort",Xc,Fu),this.pendingTextureTask.onError(new Error("texture aborted"))}var ju,_c=this.model.getMaterial()||{},_f=_c.pano0,ep=_c.pano1;if((_f==null?void 0:_f.map.name)===_h?ju=_f:(ep==null?void 0:ep.map.name)===_h&&(ju=ep),ju){var tp={panoIndex:Pu,workCode:this.work.workCode,effect:(Du=Bu.effect)!==null&&Du!==void 0?Du:"fade",leftPanoPicture:{map:ju.map,luminanceMap:ju.luminanceMap,matrix:new r$3.Matrix4().compose(Fu.position,Fu.quaternion,Yl$1)},position:Fu.position.clone()};this.doMoveToPano(Pu,tp,Bu,Lu)}else this.pending=!0,this.pendingTextureTask={panoIndex:Pu,hash:_h,onLoad:function(op,lp){var up,hp;if(ku.pending=!1,ku.destroyed)op.body.dispose();else{op.body.name=_h;var np={panoIndex:Pu,workCode:ku.work.workCode,effect:(up=Bu.effect)!==null&&up!==void 0?up:"fade",leftPanoPicture:{map:op.body,luminanceMap:(hp=lp==null?void 0:lp.body)!==null&&hp!==void 0?hp:null,matrix:new r$3.Matrix4().compose(Fu.position,Fu.quaternion,Yl$1)},position:Fu.position.clone()};ku.doMoveToPano(Pu,np,Bu,Lu)}},onError:function(op){ku.pending=!1,Bu.moveCancelCallback&&Bu.moveCancelCallback(),ku.emit("panoLoadError",op,Pu),ku.emit("moveToPanoCanceled",Pu)}},Promise.all([this.textureLoader.loadCube(zu,{format:r$3.RGBFormat},void 0,void 0,function(op){var lp,up;((lp=ku.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_h&&((up=ku.panoMeshes[Pu])===null||up===void 0||up.setProgress(op)),ku.emit("textureLoading",op,Pu,Fu)}),Wu?this.textureLoader.loadCube(Wu,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(op){var lp,up,hp=op[0],np=op[1];((lp=ku.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_h?(ku.pendingTextureTask.onLoad(hp,np),(up=ku.panoMeshes[Pu])===null||up===void 0||up.setProgress(0),delete ku.pendingTextureTask,ku.emit("textureLoaded",Pu,Fu,hp.meta)):(hp.body.dispose(),np==null||np.body.dispose())}).catch(function(op){var lp,up;((lp=ku.pendingTextureTask)===null||lp===void 0?void 0:lp.hash)===_h&&(ku.pendingTextureTask.onError(op),(up=ku.panoMeshes[Pu])===null||up===void 0||up.setProgress(0),delete ku.pendingTextureTask,ku.emit("textureError",op,Pu,Fu),ku.emit("error",op))}),this.emit("textureStartLoad",Pu,Fu)},Tu.prototype.doMoveToPano=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu=this;Lu===void 0&&(Lu={}),this.userAction=Ru;var Nu=_e$1(),Gu=Kr();this.panoResources[Gu]=Bu;var zu,Hu,Wu;if(this.locationMotion.ended){var _h=this.locationMotion.getKeyFrameSegment(Nu);_h[0];var Xc=_h[1],ju=this.locationMotion.value,_c=this.panoResourceFromLocationMotionKeyframe(Xc).position,_f=Bu.position;zu=Math.max(_c.distanceTo(_f),1),Hu=[{key:Xc.key,progress:0,value:t$3.__assign(t$3.__assign({},ju),{count:0})},{key:Gu,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Wu=0}else{var ep=this.locationMotion.getKeyFrameSegment(Nu),tp=ep[0],op=(Xc=ep[1],ju=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(tp).position),lp=(_c=this.panoResourceFromLocationMotionKeyframe(Xc).position,_f=Bu.position,Xc.value.count-ju.count),up=Math.max(op.distanceTo(_c),1)*lp;zu=up+Math.max(_c.distanceTo(_f),1),Hu=[{key:tp.key,progress:0,value:t$3.__assign({},ju)},{key:Xc.key,progress:up/zu,value:Xc.value},{key:Gu,progress:1,value:{count:Xc.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var hp=this.locationMotionKeyframesLength(this.locationMotion.keyframes),np=this.locationMotionKeyframesLength(Hu);Wu=this.locationMotion.getProgressVelocity(Nu)*hp/np}var rp=this.calculateMovingDuration(Lu.duration,zu),ip={longitude:Lu.longitude,latitude:Lu.latitude,fov:Lu.fov},ap={longitude:(Ou=ip.longitude)!==null&&Ou!==void 0?Ou:this.camera.pose.longitude,latitude:(Du=ip.latitude)!==null&&Du!==void 0?Du:this.camera.pose.latitude,fov:(ku=ip.fov)!==null&&ku!==void 0?ku:this.camera.pose.fov,offset:Bu.position.clone(),distance:0};Lu.moveStartCallback&&Lu.moveStartCallback(Pu,ap),this.emit("panoWillArrive",Pu,ap,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Qe$1,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(ip,rp).catch(Qe$1),this.locationMotion.setKeyframes(Hu,rp,Wu).then(function(){var sp,cp,dp,fp={longitude:Fu.camera.pose.longitude,latitude:Fu.camera.pose.latitude,fov:Fu.camera.pose.fov,offset:Fu.camera.pose.offset.clone(),distance:0};Lu.moveEndCallback&&Lu.moveEndCallback(Pu,fp),Fu.emit("panoArrived",Pu,fp,Ru);var vp=Fu.work.observers[Fu.currentPanoIndex];if(vp&&vp.video&&Fu.videoTexture&&Fu.videoTexture.image instanceof HTMLVideoElement){var _p=Xl$1.clone().multiply((dp=(cp=(sp=Fu.model.getMaterial())===null||sp===void 0?void 0:sp.pano1)===null||cp===void 0?void 0:cp.matrix)!==null&&dp!==void 0?dp:new r$3.Matrix4).multiply(vp.video.matrix),wp={map:Fu.videoTexture,size:vp.video.size,matrix:_p,alpha:1},Dp=Kr(),Pp=Fu.videoTexture.image;Pp.setAttribute("uuid",Dp),xa().then(function(Wp){Wp&&vp.video&&Pp.getAttribute("uuid")===Dp&&(Pp.oncanplay=function(){Pp.oncanplay=Qe$1,Pp.play()},Pp.ontimeupdate=function(){Pp.currentTime>.5&&(Pp.ontimeupdate=Qe$1,Fu.panoVideo.setMaterial(wp))},Pp.src=vp.video.source)}).catch(function(){Pp.removeAttribute("uuid")})}},function(){Lu.moveCancelCallback&&Lu.moveCancelCallback(),Fu.emit("moveToPanoCanceled",Pu)})},Tu.prototype.checkSelectedPano=function(){var Pu=this,Bu=this.xrControllerRay;this.interiaMovement=!1;var Lu=this.camera.getWorldDirection(new r$3.Vector3).setY(0),Ru=null,Ou=this.work.observers[this.currentPanoIndex];if(!Ou)return Ru;var Du=Ou.accessibleNodes.filter(function(sp){if(sp===Pu.currentPanoIndex)return!1;var cp=Pu.work.observers[sp];return!(cp.position.distanceTo(Pu.camera.position)>Pu.maxAccessibleDistance)&&(cp.loadable||cp.active)}),ku=this.model.intersectRaycaster(Bu)[0];if(ku){var Fu=ta(Du,function(sp){var cp=Pu.work.observers[sp].standingPosition.clone();return cp.clone().sub(Pu.camera.position).setY(0).angleTo(Lu)>Math.PI/2?1/0:cp.distanceTo(ku.point)},!0),Nu=Fu[0];Fu[1]<this.panoTapTriggerRadius&&(Ru=Nu)}oo(Ru)&&(Ru=this.getForwardPanoIndexOrNot(Bu));for(var Gu=0,zu=this.locationMotion.keyframes;Gu<zu.length;Gu++){var Hu=zu[Gu],Wu=this.panoResourceFromLocationMotionKeyframe(Hu);if(!(Hu.progress<this.locationMotion.progress)&&Wu.panoIndex===Ru){Ru=null;break}}if(this.emit("panoSelected",Ru),oo(Ru))return this.locationMotion.ended===!0&&this.cameraBounce(),Ru;var _h=this.work.observers[Ru];if(!_h.active)return this.panoMeshes[Ru]&&(this.panoMeshes[Ru].setDisabled(!1),this.panoMeshes[Ru].setLoading(!0)),Ru;for(var Xc={effect:"fade"},ju=Math.PI/6,_c=Math.PI/12,_f=new r$3.Vector3(0,1,0),ep=_h.position.clone().setY(0).sub(Ou.position.clone().setY(0)).normalize(),tp=ep.clone().applyAxisAngle(_f,ju),op=ep.clone().applyAxisAngle(_f,-ju),lp=[],up=[],hp=[],np=0,rp=_h.accessibleNodes;np<rp.length;np++)if((Nu=rp[np])!==this.currentPanoIndex&&Nu!==Ru){var ip=this.work.observers[Nu].position.clone().sub(_h.position).setY(0);ep.angleTo(ip)<ju?hp.push(ip):tp.angleTo(ip)<ju?lp.push(ip):op.angleTo(ip)<ju&&up.push(ip)}var ap=(hp.length>0?hp:t$3.__spreadArray(t$3.__spreadArray([],lp,!0),up,!0)).slice().sort(function(sp,cp){return sp.angleTo(ep)-cp.angleTo(ep)})[0];return ap&&ap.angleTo(Lu)>_c&&(Xc.longitude=Math.atan2(-ap.x,-ap.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Xc.latitude=ho(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Xc.fov=this.defaultFov),this.emit("wantsMoveToPano",Ru,Xc,!0),Ru},Tu.prototype.destroy=function(){Cu.prototype.destroy.call(this)},Tu.prototype.isReady=function(){return!1},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu,Ru,Ou,Du=[],ku=2;ku<arguments.length;ku++)Du[ku-2]=arguments[ku];var Fu={},Nu={};if(this.locationMotion.ended===!1){this.locationMotion.update(Pu);var Gu=this.locationMotion.getKeyFrameSegment(Pu),zu=Gu[0],Hu=Gu[1],Wu=this.panoResourceFromLocationMotionKeyframe(zu),_h=this.panoResourceFromLocationMotionKeyframe(Hu),Xc=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ju=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),_c=new r$3.Vector3().copy(Wu.position),_f=new r$3.Vector3().copy(_h.position),ep=this.locationMotion.value.count-Hu.value.count+1;Fu.modelAlpha=this.locationMotion.value.modelAlpha,Fu.perspToOrtho=ho(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Fu.useBlackTransition=_h.effect==="instant",_h.leftPanoPicture&&(ep<1?Wu.leftPanoPicture&&(Fu.pano0=Wu.leftPanoPicture):Fu.pano0=_h.leftPanoPicture,Fu.pano1=_h.leftPanoPicture),_h.effect==="fade"&&(Fu.pano0&&Wu.leftPanoPicture&&(Fu.pano0={map:Fu.pano0.map,luminanceMap:Fu.pano0.luminanceMap,matrix:Wu.leftPanoPicture.matrix.clone().setPosition(_h.position)}),_c.copy(_f)),Fu.progress=ep,Nu.distance=this.locationMotion.value.distance,Nu.offset=new r$3.Vector3(_c.x+(_f.x-_c.x)*ep,_c.y+(_f.y-_c.y)*ep,_c.z+(_f.z-_c.z)*ep);for(var tp=[],op=[],lp=0,up=this.locationMotion.keyframes;lp<up.length;lp++){var hp=up[lp],np=hp.key,rp=hp.progress;np!==void 0&&(tp.push(np),rp>=this.locationMotion.progress&&op.push(np))}for(var ip=0,ap=Object.keys(this.panoResources);ip<ap.length;ip++){var sp=ap[ip];if(!(op.indexOf(sp)>=0)){var cp=this.panoResources[sp];if(cp.leftPanoPicture){var dp=cp.leftPanoPicture.map;if(dp){if(dp===((Lu=Fu.pano0)===null||Lu===void 0?void 0:Lu.map)||dp===((Ru=Fu.pano1)===null||Ru===void 0?void 0:Ru.map))continue;dp.dispose(),(Ou=cp.leftPanoPicture.luminanceMap)===null||Ou===void 0||Ou.dispose(),cp.leftPanoPicture=null}}tp.indexOf(sp)>=0||delete this.panoResources[sp]}}Wu.workCode===_h.workCode?this.currentPanoIndex=ep<.5?Wu.panoIndex:_h.panoIndex:this.currentPanoIndex=_h.panoIndex,this.emit("movingToPano",ju.panoIndex,Xc.panoIndex,this.locationMotion.progress),this.tiling.object.visible=!1}else this.tiling.object.visible=this.tileLevelForFov!==!1;this.cameraMotion.ended===!1&&(this.cameraMotion.update(Pu),Nu.longitude=this.cameraMotion.value.longitude,Nu.latitude=this.cameraMotion.value.latitude,Nu.fov=this.cameraMotion.value.fov),ia$1(Fu)===!1&&(this.model.setMaterial(Fu),this.boundingMesh.setMaterial(Fu)),ia$1(Nu)===!1&&this.setCamera(Nu),Du[0];var fp=Du[1];if(fp)if(this.xrManager.session){var vp=this.xrManager.referenceSpace;if(vp){var _p=this.xrManager.cameraVR,wp=this.xrManager.cameraL,Dp=this.xrManager.cameraR,Pp=[wp,Dp],Wp=fp.getViewerPose(vp),Rp=new r$3.Vector3(0,0,0);if(Wp){var Gp=void 0;switch(this.xrManager.machineType){case"Pico":Gp=this.xrManager.session.renderState.baseLayer;break;case"Oculus":var kp=this.xrManager.session.renderState.layers;kp&&(Gp=kp[0]);break;default:this.xrManager.machineType}var gp=Wp.views;if(!Gp)return void console.error("no layer found");this.renderer.setFramebuffer(Gp.framebuffer);var mp=!1;gp.length!==_p.cameras.length&&(_p.cameras.length=0,mp=!0);for(var Sp=0;Sp<gp.length;Sp++){var xp=gp[Sp],Ep=Gp.getViewport(xp),$p=Pp[Sp];$p.matrix.fromArray(xp.transform.matrix);var Ip=new r$3.Vector3,Np=new r$3.Quaternion,qp=new r$3.Vector3;$p.matrix.decompose(Ip,Np,qp);var Vp=new r$3.Vector3,pp=new r$3.Quaternion,bp=new r$3.Vector3;this.camera.matrix.decompose(Vp,pp,bp),Rp.copy(Vp),$p.matrix.compose(Vp,Np,qp),$p.projectionMatrix.fromArray(xp.projectionMatrix),$p.viewport.set(Ep.x,Ep.y,Ep.width,Ep.height),Sp===0&&_p.matrix.copy($p.matrix),mp===!0&&_p.cameras.push($p)}}var zp=this.xrManager.session.inputSources;for(Sp=0;Sp<this.xrManager.controllers.length;Sp++){var Up=this.xrManager.controllers[Sp],Jp=zp[Sp];Up.update(Jp,fp,vp)}var Xp=this.xrManager.getController(0),tm=Xp.position.add(Rp);this.xrControllerRay.set(tm,new r$3.Vector3(0,0,-1).applyEuler(Xp.rotation));var lm=this.model.intersectRaycaster(this.xrControllerRay);if(lm.length>=1&&lm[0].face){var am=lm[0].face.normal,fm=am.clone().multiplyScalar(.05),rm=lm[0].point.clone().add(fm);this.intersectMesh.position.copy(rm);var um=rm.clone().add(fm);if(this.intersectMesh.lookAt(um),Math.abs(am.y)>.99){var om=this.camera.position.clone().sub(rm);this.intersectMesh.rotation.z=-Math.atan2(om.z,om.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",lm[0],this.intersectMesh)}if(this.camera.pose.distance>.1)for(var hm=0;hm<this.work.observers.length;hm++)(mm=this.panoMeshes[hm])&&(mm.visible=!1);else{var Lp=this.work.observers[this.currentPanoIndex];if(Lp){var sm=Lp.visibleNodes.concat(this.currentPanoIndex),dm=this.getForwardPanoIndexOrNot();for(hm=0;hm<this.work.observers.length;hm++){var mm,pm=this.work.observers[hm];if(mm=this.panoMeshes[hm])if(pm.loadable||pm.active)if(sm.indexOf(hm)!==-1){mm.visible=!0;var wm=mm.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);mm.setCurrent(dm===hm),mm.setOpacity(wm<.01?0:ho(1.4/wm,.5,.7)),mm.updateTime&&mm.updateTime(Pu,Bu)}else mm.visible=!1,mm.setOpacity(0);else mm.visible=!1,mm.setOpacity(0)}}}this.needsRender=!0}}else console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");else console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5")},Tu.prototype.render=function(){var Pu=this.xrManager.getCamera(this.camera);this.renderer.render(this.scene,Pu)},Tu.prototype.onPanGesture=function(){},Tu.prototype.onTapGesture=function(){},Tu.prototype.onPinchGesture=function(){},Tu.prototype.onMouseMove=function(){},Tu.prototype.onMouseOut=function(){},Tu.prototype.panoResourceFromLocationMotionKeyframe=function(Pu){return this.panoResources[Pu.key]},Tu.prototype.prepareForMoveToPano=function(Pu){var Bu=this,Lu={useXRBlackTransition:!0},Ru=_e$1(),Ou=0;return new Promise(function(Du,ku){var Fu=setInterval(function(){if((Ou=Math.min(1,(_e$1()-Ru)/1e3))>=1)return Lu.useXRBlackTransition=!1,Lu.progress=0,Bu.model.setMaterial(Lu),clearInterval(Fu),void Du(!0);Lu.progress=Ou,Bu.model.setMaterial(Lu)},50)})},Tu}(Xa$1),Jl$1=["Panorama","DepthPanorama","Model"],$l$1={Floorplan:Aa,Topview:ga$1,Panorama:Xa$1,VRPanorama:kl$1,Model:Dl$1,DepthPanorama:_l$1,Mapview:zl$1,XRPanorama:Zl$1};function eu(Cu){for(var Tu=0,Pu=Jl$1;Tu<Pu.length;Tu++){var Bu=Pu[Tu];if(typeof Cu=="string"){if(Bu===Cu)return!0}else if(Cu instanceof fa$1&&Cu instanceof $l$1[Bu])return!0}return!1}var tu=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError","webXRSessionStart","webXRSessionEnd","webXRSelected"];function iu(Cu){for(var Tu,Pu,Bu={},Lu=0,Ru=Cu.split(/(\;|\,)/);Lu<Ru.length;Lu++){var Ou=Ru[Lu].split("="),Du=(Tu=Ou[0])===null||Tu===void 0?void 0:Tu.trim(),ku=(Pu=Ou[1])===null||Pu===void 0?void 0:Pu.trim();Du&&ku&&(Bu[Du]=ku)}return Bu}function nu(){for(var Cu,Tu=document.getElementsByTagName("meta"),Pu=0;Pu<Tu.length;Pu++){var Bu=Tu[Pu];if(Bu.getAttribute("name")==="viewport"){var Lu=iu((Cu=Bu.getAttribute("content"))!==null&&Cu!==void 0?Cu:""),Ru=Number(Lu["initial-scale"]);if(!isNaN(Ru))return Ru}}return 1}var ru=[351,63],ou=[20,20],su=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),au=new Float32Array([0,0,1,0,0,1,1,1]),lu=new Uint8Array([0,1,2,1,3,2]),uu=new r$3.BufferGeometry;uu.setAttribute("position",new r$3.BufferAttribute(su,3)),uu.setAttribute("uv",new r$3.BufferAttribute(au,2)),uu.setIndex(new r$3.BufferAttribute(lu,1));var hu=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),cu=new r$3.Mesh(uu,hu),du=new r$3.Scene;du.add(cu);var pu=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);pu.position.set(0,0,.5),pu.lookAt(0,0,0);var fu=new r$3.Vector4,Au=new r$3.Vector4;function gu(Cu){if(hu.map){var Tu=Cu.getViewport(fu),Pu=Cu.getScissor(Au),Bu=Cu.getScissorTest(),Lu=Cu.autoClear;Cu.setViewport(Pu.x+ou[0]/3,Pu.y+ou[1]/3,ru[0]/3,ru[1]/3),Cu.setScissor(Pu.x+ou[0]/3,Pu.y+ou[1]/3,ru[0]/3,ru[1]/3),Cu.setScissorTest(!0),Cu.autoClear=!1,Cu.render(du,pu),Cu.setViewport(Tu),Cu.setScissor(Pu),Cu.setScissorTest(Bu),Cu.autoClear=Lu}else{var Ru=new r$3.Texture,Ou=new Image;Ou.onload=function(){Ru.image=Ou,Ru.wrapS=r$3.ClampToEdgeWrapping,Ru.wrapT=r$3.ClampToEdgeWrapping,Ru.minFilter=r$3.LinearFilter,Ru.needsUpdate=!0,hu.needsUpdate=!0,Ou.onload=function(){}},Ou.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",hu.map=Ru}}var mu=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),vu=function(Cu){return Cu.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},yu$1=new r$3.Vector2,bu=new r$3.Frustum,xu=new r$3.Matrix4,wu$1=new WeakMap,Eu=new WeakMap,Mu=function(Cu){function Tu(Pu){Pu===void 0&&(Pu={});var Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu=this;if((Wu=Cu.call(this)||this).ident=Kr(),Iu.instances[Wu.ident]=Wu,Wu.renderSwitch01=0,Wu.panoIndex=0,Wu.needsRender=!1,Wu.onlyRenderIfNeeds=(Bu=Pu.onlyRenderIfNeeds)===null||Bu===void 0||Bu,Wu.imageOptions=t$3.__assign({},(Lu=Pu.imageOptions)!==null&&Lu!==void 0?Lu:{}),Wu.textureOptions=t$3.__assign({},(Ru=Pu.textureOptions)!==null&&Ru!==void 0?Ru:{}),Wu.poweredByRealsee=(Ou=Pu.poweredByRealsee)===null||Ou===void 0||Ou,Wu.extraElements=[],Wu.controllerInits={Panorama:Object.assign({},Pu.panorama),Model:Object.assign({},Pu.model),Floorplan:Object.assign({},Pu.floorplan),Topview:Object.assign({},Pu.topview),Mapview:Object.assign({},Pu.mapview),DepthPanorama:Object.assign({},Pu.depthPanorama),VRPanorama:Object.assign({},Pu.vrPanorama),XRPanorama:Object.assign({},Pu.xrPanorama)},Wu.fps={testCount:0,testTime:_e$1()},Wu.modeChangeDuration=(Du=Pu.modeChangeDuration)!==null&&Du!==void 0?Du:800,Wu.panoramaLikeSavedPose={},typeof window!="undefined")if(Pu.renderer)Pu.renderer instanceof It&&Wu.throwError(new Error("cannot render a internal renderer")),Wu.renderer=Pu.renderer;else try{Wu.renderer=new It({preserveDrawingBuffer:Pu.preserveDrawingBuffer,backgroundColor:Pu.backgroundColor,backgroundAlpha:Pu.backgroundAlpha,antialias:Pu.antialias,webgl2:Pu==null?void 0:Pu.webgl2});var _h=nu();Wu.renderer.setPixelRatio(_h===1?window.devicePixelRatio:1),Wu.renderer.setSize(512,512)}catch(hp){hp instanceof Error&&Wu.throwError(hp)}Wu.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:(Fu=(ku=Wu.renderer)===null||ku===void 0?void 0:ku.outputEncoding)!==null&&Fu!==void 0?Fu:r$3.sRGBEncoding}),Wu.scissor=Object.assign({left:0,bottom:0,width:1,height:1},Pu.scissor),Wu.camera=new Lt$1(80),Wu.scene=new St$1,Wu.lastLoadWorkTask=Promise.resolve(),Wu.requestProxy=(Nu=Pu.requestProxy)!==null&&Nu!==void 0?Nu:vu,Wu.networkSubscribe=new tt,Wu.networkSubscribe.on("network",function(hp,np,rp,ip){var ap;Wu.emit("network",hp,np,rp,ip),(ap=Wu.analysis)===null||ap===void 0||ap.network(Wu.work,hp,np,rp,ip)}),Wu.model=new uo({allowHosts:[],requestProxy:Wu.requestProxy,networkSubscribe:Wu.networkSubscribe});var Xc=Ks$1(mu);Xc.name="model_empty",Wu.model.add(Xc),Wu.model.visible=!1,Wu.readyCallbacks=[],Wu.modelPending=!1,Wu.syncingState=!1,Wu.scene.add(Wu.model),Wu.helperGroup=new r$3.Group,Wu.helperGroup.name="helper",Wu.scene.add(Wu.helperGroup),Wu.videoTexture=new r$3.VideoTexture(Pu.videoInstance||function(){var hp=document.createElement("video");hp.loop=!0,hp.autoplay=!0,hp.playsInline=!0,hp.muted=!0,hp.crossOrigin="";var np=function(){document.removeEventListener("touchstart",np,!1),document.removeEventListener("mousedown",np,!1),hp.muted=!1};return document.addEventListener("touchstart",np,!1),document.addEventListener("mousedown",np,!1),hp}()),function(hp){(np=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),hp.add(np);var np=new r$3.DirectionalLight(16777215,.3);hp.add(np),np=new r$3.AmbientLight(16777215,.3),hp.add(np)}(Wu.scene),Wu.state={mode:(Gu=Wu.currentMode)!==null&&Gu!==void 0?Gu:"Panorama",panoIndex:(zu=Wu.panoIndex)!==null&&zu!==void 0?zu:0,longitude:Wu.camera.pose.longitude,latitude:Wu.camera.pose.latitude,fov:Wu.camera.pose.fov,offset:Wu.camera.pose.offset.clone(),distance:Wu.camera.pose.distance},Wu.stateSynced=!1,Wu._enableIOSEDR=!1,Wu.destroyed=!1,Wu.paused=!0,typeof window!="undefined"&&(Pu.play!==!1&&Wu.play(),((Hu=Pu.initialBasisLoader)!==null&&Hu!==void 0&&Hu)!==!1&&(typeof Pu.initialBasisLoader=="string"?Wu.initBasisLoader(Pu.initialBasisLoader):Wu.initBasisLoader()),Wu.stopAnimationLoop=at.shared.add(function(hp,np){for(var rp=[],ip=2;ip<arguments.length;ip++)rp[ip-2]=arguments[ip];Wu.updateTime.apply(Wu,t$3.__spreadArray([hp,np],rp,!1))},!1,0,10));var ju=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Wu.currentMode==="VRPanorama"&&Wu.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",ju,!1),Wu.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",ju,!1)},Wu.plugins={},Pu.plugins&&Pu.plugins.length)for(var _c=0,_f=Pu.plugins;_c<_f.length;_c++){var ep=_f[_c];if(typeof ep=="function")ep(Wu);else if(Array.isArray(ep)){var tp=ep[0],op=ep[1],lp=ep[2];if(typeof tp=="function"){var up=tp(Wu,lp);typeof op=="string"&&(Wu.plugins[op]?Wu.throwError(new Error("plugin name ".concat(op," is exists."))):Wu.plugins[op]=up)}}}return Wu}return t$3.__extends(Tu,Cu),Object.defineProperty(Tu,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),Tu.prototype.dispose=function(){var Pu,Bu;if(this.destroyed!==!0){delete Iu.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(Pu=this.renderer)===null||Pu===void 0||Pu.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Lu=this.getElement();Lu&&Lu.parentNode&&Lu.parentNode.removeChild(Lu),this.scene.remove(this.model);var Ru=this.model.getMaterial();Ru&&(Ru.pano0&&Ru.pano0.map.dispose(),Ru.pano1&&Ru.pano1.map!==((Bu=Ru.pano0)===null||Bu===void 0?void 0:Bu.map)&&Ru.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof It&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},Tu.prototype.setScissor=function(Pu){Object.assign(this.scissor,Pu),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(Tu.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(Pu){this.helperGroup.visible!==Pu&&(this.helperGroup.visible=Pu,this.emit("helpersVisibleChange",Pu),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(Pu){this._enableIOSEDR!==Pu&&(this._enableIOSEDR=Pu,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Tu.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(Pu){var Bu,Lu;if(Pu){if(!this.screenBuffer){var Ru=this.getDrawingBufferSize(yu$1);this.screenBuffer=new r$3.WebGLRenderTarget(Ru.x,Ru.y,{encoding:(Lu=(Bu=this.renderer)===null||Bu===void 0?void 0:Bu.outputEncoding)!==null&&Lu!==void 0?Lu:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),Tu.prototype.updateConfiguration=function(Pu){var Bu=!1;Pu.panorama&&(Object.assign(this.controllerInits.Panorama,Pu.panorama),this.currentMode==="Panorama"&&(Bu=!0)),Pu.model&&(Object.assign(this.controllerInits.Model,Pu.model),this.currentMode==="Model"&&(Bu=!0)),Pu.floorplan&&(Object.assign(this.controllerInits.Floorplan,Pu.floorplan),this.currentMode==="Floorplan"&&(Bu=!0)),Pu.topview&&(Object.assign(this.controllerInits.Topview,Pu.topview),this.currentMode==="Topview"&&(Bu=!0)),Pu.mapview&&(Object.assign(this.controllerInits.Mapview,Pu.topview),this.currentMode==="Mapview"&&(Bu=!0)),Pu.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,Pu.depthPanorama),this.currentMode==="DepthPanorama"&&(Bu=!0)),Pu.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,Pu.vrPanorama),this.currentMode==="VRPanorama"&&(Bu=!0)),Pu.imageOptions&&(Object.assign(this.imageOptions,Pu.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(Bu=!0)),Bu&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},Tu.prototype.appendTo=function(Pu,Bu){if(Bu===void 0&&(Bu={}),this.renderer)if(this.renderer instanceof It){var Lu=this.getElement();if(Lu){Pu.appendChild(Lu),this.refresh(Bu);var Ru=window.getComputedStyle(Pu).position;Ru!=="relative"&&Ru!=="absolute"&&Ru!=="fixed"&&Ru!=="sticky"&&(Pu.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},Tu.prototype.refresh=function(Pu,Bu){if(Pu===void 0&&(Pu={}),this.renderer){var Lu=this.getElement();if(Lu){var Ru=Lu.parentNode;if(Ru&&Ru.nodeName){var Ou=Pu.width,Du=Ou===void 0?Ru.offsetWidth:Ou,ku=Pu.height,Fu=ku===void 0?Ru.offsetHeight:ku;this.renderer instanceof It&&(Bu&&this.renderer.setPixelRatio(Bu),this.renderer.setSize(Du,Fu))}var Nu=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=Nu.x*this.scissor.width/(Nu.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},Tu.prototype.addExtraElement=function(Pu){var Bu=this;return this.extraElements.indexOf(Pu)===-1&&(this.extraElements.push(Pu),this.controller&&this.controller.bindExtraElement(Pu)),function(){return Bu.removeExtraElement(Pu)}},Tu.prototype.removeExtraElement=function(Pu){var Bu=this.extraElements.indexOf(Pu);Bu!==-1&&(this.extraElements.splice(Bu,1),this.controller&&this.controller.unbindExtraElement(Pu))},Tu.prototype.getPose=function(){var Pu=this.camera.copyPose(),Bu=Pu.longitude,Lu=Pu.latitude,Ru=Pu.fov,Ou=Pu.offset,Du=Pu.distance;return{longitude:Bu,latitude:Lu,fov:Ru,offset:Ou.clone(),distance:Du}},Tu.prototype.getSize=function(Pu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(Pu),Pu.x*=this.scissor.width,Pu.y*=this.scissor.height,Pu},Tu.prototype.getDrawingBufferSize=function(Pu){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(Pu),Pu.x*=this.scissor.width,Pu.y*=this.scissor.height,Pu},Tu.prototype.updateCamera=function(Pu,Bu,Lu){return Lu===void 0&&(Lu=!0),this.controller?this.controller.updateCamera(Pu,Bu,Lu):Promise.reject(new Error("controller is not initialized."))},Tu.prototype.getLongitudeAndLatitude=function(){var Pu=this.getPose();return{longitude:Pu.longitude,latitude:Pu.latitude}},Tu.prototype.getOffset=function(){return this.getPose().offset},Tu.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var Pu=this.work.observers[this.panoIndex],Bu=new r$3.Object3D;return Bu.position.copy(Pu.position),Bu.quaternion.copy(Pu.quaternion),Bu.scale.set(1,1,1),Bu.updateMatrixWorld(!0),function(Lu,Ru){var Ou=new r$3.Vector3(0,0,-1);Ou.applyQuaternion(Lu.quaternion);var Du=Ru.quaternion.clone().inverse();return Ou.applyQuaternion(Du),{theta:Math.atan2(Ou.x,-Ou.z),phi:-Math.asin(Ou.y),lookAtVector:Ou}}(this.camera,Bu)}},Tu.prototype.initBasisLoader=function(Pu){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof Pu=="string"&&Ei$1.setTranscoderPath(Pu),Ei$1.workerConfig.format||Ei$1.detectSupport(this.renderer),Ei$1._allocateWorker(0)}catch(Bu){Bu instanceof Error&&this.throwError(Bu)}},Object.defineProperty(Tu.prototype,"work",{get:function(){var Pu=Eu.get(this);if(Pu&&wo$1.get(Pu))return Pu},enumerable:!1,configurable:!0}),Tu.prototype.load=function(Pu,Bu,Lu,Ru){var Ou=this;if(Ru===void 0&&(Ru=!0),!this.renderer)throw new Error("renderer is not initialized");var Du=this.lastLoadWorkTask.then(function(){return!(ku=Pu)||typeof ku!="object"&&typeof ku!="function"||typeof ku.then!="function"?Ou.load_(Pu,Bu,Lu,Ru):Pu.then(function(Fu){return Ou.load_(Fu,Bu,Lu,Ru)});var ku});return this.lastLoadWorkTask=Du.catch(function(ku){Ou.throwError(ku)}),Du},Tu.prototype.load_=function(Pu,Bu,Lu,Ru){var Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h=this;Ru===void 0&&(Ru=!0);var Xc,ju,_c,_f=Co$1(Pu),ep=this.work;Bu===void 0&&(Bu=ep?"inherit":"initial"),Bu==="inherit"?(Xc=typeof this.panoIndex=="number"&&_f.observers[this.panoIndex]?this.panoIndex:_f.initial.panoIndex,ju=(Ou=this.currentMode)!==null&&Ou!==void 0?Ou:_f.initial.mode,_c={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):Bu==="initial"?(ju=(Du=this.currentMode)!==null&&Du!==void 0?Du:_f.initial.mode,Xc=_f.initial.panoIndex,_c=ju===Tu.Mode.Panorama||ju===Tu.Mode.DepthPanorama||ju===Tu.Mode.Model||ju===Tu.Mode.VRPanorama||ju===Tu.Mode.XRPanorama?{longitude:_f.initial.longitude,latitude:_f.initial.latitude,fov:_f.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Xc=(ku=Bu.panoIndex)!==null&&ku!==void 0?ku:_f.initial.panoIndex,ju=(Nu=(Fu=Bu.mode)!==null&&Fu!==void 0?Fu:this.currentMode)!==null&&Nu!==void 0?Nu:"Panorama",_c={longitude:(Gu=Bu.longitude)!==null&&Gu!==void 0?Gu:_f.initial.longitude,latitude:(zu=Bu.latitude)!==null&&zu!==void 0?zu:_f.initial.latitude,fov:(Hu=Bu.fov)!==null&&Hu!==void 0?Hu:_f.initial.fov}),this.emit("willLoad",Pu,_f,{panoIndex:Xc,mode:ju,longitude:_c.longitude,latitude:_c.latitude,fov:_c.fov});var tp=function(){var lp;_h.panoIndex=Xc,_h.panoramaLikeSavedPose.longitude=_f.initial.longitude,_h.panoramaLikeSavedPose.latitude=_f.initial.latitude,_h.panoramaLikeSavedPose.fov=_f.initial.fov;var up=_h.controller?Lu!=null?Lu:_h.modeChangeDuration:0,hp=t$3.__assign(t$3.__assign({initial:[Xc,_c,up,Ru]},_h.commonParams()),_h.controllerInits[ju]);_h.controller?_h.controller.updateWork(_f,Xc,_c,up,Ru)===!1&&(_h.controller.destroy(),_h.controller=_h.applyController(ju,hp)):_h.controller=_h.applyController(ju,hp),_h.emit("load",Pu,_f,{panoIndex:Xc,mode:ju,longitude:_c.longitude,latitude:_c.latitude,fov:_c.fov}),(lp=_h.analysis)===null||lp===void 0||lp.work(_f)},op=function(lp){var up;lp===void 0&&(lp=Qe$1),_f.model&&(_h.model.name!==((up=_f.model)===null||up===void 0?void 0:up.file)?(_h.emit("modelWillLoad",_f.model),_h.loadModel(_f.model,_f.allowHosts,lp,!0)):lp&&lp())};return Eu.set(this,_f),ju===Tu.Mode.Floorplan||ju===Tu.Mode.Topview||ju===Tu.Mode.Mapview||ju===Tu.Mode.Model?op(function(){tp(),_h.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:_f.initial.fov,longitude:_f.initial.longitude,latitude:_f.initial.latitude,offset:_f.observers[_f.initial.panoIndex].position}),this.needsRender=!0),tp(),(Wu=this.controller)===null||Wu===void 0||Wu.once("panoLoaded",function(){_h.needsRender=!0,_h.emit("cameraUpdate",_h.camera.copyPose(),Ru),op()})),this.ready().then(function(){_h.emit("loaded",Pu,_h.work)})},Tu.prototype.changeMode=function(Pu,Bu,Lu,Ru,Ou){var Du=this;if(Bu===void 0&&(Bu={}),Lu===void 0&&(Lu=this.modeChangeDuration),Ru===void 0&&(Ru=!0),Ou===void 0&&(Ou=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(ku,Fu){if(!Tu.Mode.hasOwnProperty(Pu)){var Nu=new Error('mode "'.concat(Pu,'" is not existed'));return Du.throwError(Nu),void Fu(Nu)}if((Pu===Tu.Mode.Floorplan||Pu===Tu.Mode.Topview||Pu===Tu.Mode.Mapview||Pu===Tu.Mode.Model)&&(oo(Du.model)||Du.model.loaded!==!0))return Nu=new Error("model is not ready."),Du.throwError(Nu),void Fu(Nu);if(oo(Du.controller))return Nu=new Error("controller is not ready."),Du.throwError(Nu),void Fu(Nu);var Gu=Du.controller,zu=Du.currentMode,Hu=function(){var _h,Xc,ju,_c;if(Du.emit("wantsChangeMode",Pu,zu))Fu(new Error("change mode canceled."));else{if(Du.controller&&Ou===!1&&zu===Pu)Pu===Tu.Mode.Panorama||Pu===Tu.Mode.DepthPanorama||Pu===Tu.Mode.Model||Pu===Tu.Mode.VRPanorama||Pu===Tu.Mode.XRPanorama?typeof Bu.panoIndex=="number"&&Bu.panoIndex!==Du.panoIndex?Du.controller.moveToPano((Xc=(_h=Bu.panoIndex)!==null&&_h!==void 0?_h:Du.panoIndex)!==null&&Xc!==void 0?Xc:0,t$3.__assign({duration:Lu},Bu),Ru):Du.controller.updateCamera(Bu,Lu,Ru).catch(Qe$1):(typeof Bu.panoIndex=="number"&&Bu.panoIndex!==Du.panoIndex&&(Du.panoIndex=Bu.panoIndex),Du.controller.updateCamera(Bu,Lu,Ru).catch(Qe$1));else{Gu.destroy();var _f=(_c=(ju=Bu.panoIndex)!==null&&ju!==void 0?ju:Du.panoIndex)!==null&&_c!==void 0?_c:0,ep=eu(Pu)?Du.panoramaLikeSavedPose:{};Pu===Tu.Mode.Mapview&&(ep.longitude=Du.panoramaLikeSavedPose.longitude),typeof Bu.longitude!="number"&&typeof Bu.latitude!="number"||(ep.longitude=Bu.longitude,ep.latitude=Bu.latitude),typeof Bu.fov=="number"&&(ep.fov=Bu.fov);var tp=t$3.__assign(t$3.__assign({initial:[_f,ep,Lu,Ru]},Du.commonParams()),Du.controllerInits[Pu]);Du.saveControllerPose(Gu),Du.controller=Du.applyController(Pu,tp);var op=$l$1[Pu].initAnimationEndPose(tp);Du.emit("modeChange",Pu,zu,_f,op,Ru)}ku()}};if(Pu===Tu.Mode.VRPanorama)Du.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(_h){if(_h=="granted")return Promise.resolve();var Xc=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(Xc)}):Promise.resolve()).then(function(){return Hu()}).catch(function(_h){_h instanceof Error&&(Du.exitFullscreen(),Du.throwError(_h),Fu(_h))});else if(Pu===Tu.Mode.XRPanorama){var Wu=at.shared.getContext();Wu?Wu.end():function(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(Xc){return Xc?Promise.resolve():Promise.reject()}).then(function(){return navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(Xc){return Promise.resolve(Xc)})});var _h=new Error("Request XR Permission denied.");return Promise.reject(_h)}().then(function(_h){at.shared.setContext(_h),Hu()}).catch(function(_h){_h instanceof Error&&(Du.throwError(_h),Fu(_h))}),Du.on("webXRSessionEnd",function(){Du.changeMode("Panorama")})}else Hu()})},Tu.prototype.getPixels=function(Pu,Bu,Lu,Ru,Ou){if(Ou===void 0&&(Ou=1),!this.renderer)throw new Error("renderer is not initialized.");var Du=this.getPixelsRenderTarget,ku=this.renderer.getSize(new r$3.Vector2);Pu=ho(Pu,Math.floor(Lu/2),Math.floor(ku.x-Lu)),Bu=ho(Bu,Math.floor(Ru/2),Math.floor(ku.y-Ru)),Du.setSize(Lu*Ou,Ru*Ou),this.renderer.setRenderTarget(Du),this.camera.setViewOffset(ku.width,ku.height,Pu,ku.height-Bu-Ru,Lu,Ru),this.controller?this.controller.render():this.renderer.render(this.scene,this.camera);var Fu=new Uint8Array(Lu*Ou*Ru*Ou*4);return this.renderer.readRenderTargetPixels(Du,0,0,Lu*Ou,Ru*Ou,Fu),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),Fu},Tu.prototype.getElement=function(){var Pu;return(Pu=this.renderer)===null||Pu===void 0?void 0:Pu.domElement},Tu.prototype.render=function(Pu,Bu){var Lu=this;if(Bu===void 0&&(Bu=!1),!this.renderer)return null;if(Bu){var Ru=this.renderer.getSize(yu$1);this.scene.traverseVisible(function(Du){Du.setResolution&&Du.setResolution(Ru.x,Ru.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Ou=this.getDrawingBufferSize(yu$1);return this.screenBuffer.setSize(Ou.x,Ou.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.currentMode!=="XRPanorama"&&this.poweredByRealsee&&gu(this.renderer),this.renderer.setRenderTarget(null),Pu&&at.shared.add(Pu,!0),this.screenBuffer}return this.aroundScissor(function(){Lu.renderer&&(Lu.controller?Lu.controller.render():Lu.renderer.render(Lu.scene,Lu.camera),Lu.poweredByRealsee&&Lu.currentMode!=="VRPanorama"&&Lu.currentMode!=="XRPanorama"&&gu(Lu.renderer)),Pu&&at.shared.add(Pu,!0)}),null},Tu.prototype.updateTime=function(Pu,Bu){for(var Lu,Ru=this,Ou=[],Du=2;Du<arguments.length;Du++)Ou[Du-2]=arguments[Du];if(!this.destroyed){this.syncingState=this.syncState(Pu,Bu),this.controller&&(Lu=this.controller).updateTime.apply(Lu,t$3.__spreadArray([Pu,Bu],Ou,!1)),this.syncingState=!1;var ku=new r$3.Vector2(512,512),Fu=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(ku),ku.x*=this.scissor.width,ku.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Fu),Fu.x*=this.scissor.width,Fu.y*=this.scissor.height);var Nu=[];if(xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.renderer&&this.model.update(this.renderer,this.camera),bu.setFromProjectionMatrix(xu),this.scene.traverse(function(_c){if(_c.setResolution&&_c.setResolution(ku.x,ku.y),_c.mixer instanceof r$3.AnimationMixer){var _f=wu$1.get(_c.mixer);_f||(_f=new r$3.Clock,wu$1.set(_c.mixer,_f)),_c.mixer.update(_f.getDelta())}(_c instanceof r$3.Mesh||_c instanceof r$3.Line||_c instanceof r$3.Points)&&(_c instanceof r$3.ImmediateRenderObject||!_c.frustumCulled||bu.intersectsObject(_c))&&Nu.push(_c)}),Fu.width*Fu.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Gu=void 0;if(this.onlyRenderIfNeeds!==!0)Gu=this.render();else{for(var zu=0,Hu=Nu;zu<Hu.length;zu++){var Wu=Hu[zu],_h=function(_c){_c.needsRender===!0?(_c.needsRender=!1,Ru.needsRender=!0):_c.mixer&&_c.mixer.stats.actions.inUse>0&&(Ru.needsRender=!0)};_h(Wu),Wu.traverseAncestors(_h)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Gu=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return Ru.controller.postProcessing(Ru.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Gu!==void 0)}if(this.fps.testTime&&Pu-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=Pu,this.fps.testCount=0,this.renderer){var Xc=this.renderer.getContext(),ju=Us$1(Xc);ju&&this.throwError(ju)}}},Tu.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof It&&this.renderer.clear(!0,!0,!0)},Tu.prototype.play=function(){this.needsRender=!0,this.paused=!1},Tu.prototype.moveToPano=function(Pu,Bu,Lu){Bu===void 0&&(Bu={}),Lu===void 0&&(Lu=!0);var Ru=this,Ou=Ru.controller,Du=Ru.currentMode,ku=Ru.renderer;return Ou?ku?(Du===Tu.Mode.Floorplan||Du===Tu.Mode.Topview||Du===Tu.Mode.Mapview?oo(Pu)||(this.panoIndex=Pu,this.changeMode(Tu.Mode.Panorama,Bu,void 0,Lu)):Ou.moveToPano(Pu,Bu,Lu),this.ready()):(this.throwError(new Error("renderer is not initialized.")),Promise.resolve()):(this.throwError(new Error("controller is not initialized.")),Promise.resolve())},Tu.prototype.preloadPano=function(Pu,Bu){var Lu=this;if(Bu===void 0&&(Bu=Qe$1),!this.work)return Promise.reject(new Error("work never loaded"));var Ru=this.work.observers[Pu],Ou=this.work.allowHosts,Du=_e$1();return Promise.all(["right","left","up","down","front","back"].map(function(ku){var Fu=t$3.__assign({key:"pano.".concat(Pu,".").concat(ku),basisLoaderInitialized:Ei$1.isInitialized()},ii$1(Lu.imageOptions,["size","format","quality","mappings"])),Nu=Ru.images[ku];return function(Gu,zu){zu===void 0&&(zu={});var Hu=_e$1(),Wu=Gu;return Promise.resolve().then(function(){return zu.requestProxy?zu.requestProxy(Gu):Gu}).then(function(_h){return/^https\:/.test(location.href)&&/^http\:/.test(_h)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(_h,"'. This request was automatically upgraded to HTTPS")),_h.replace(/^http\:/,"https:")):_h}).catch(function(_h){var Xc,ju=new Ge$1(Wu,"Link",_h&&_h.message?String(_h.message):String(_h));return(Xc=zu.networkSubscribe)===null||Xc===void 0||Xc.emit("network",Gu,"Link","proxy-error",ju.message),Promise.reject(ju)}).then(function(_h){return _h in nt?nt[_h]:nt[_h]=new Promise(function(Xc,ju){var _c,_f=zu.allowHosts?je$1.concat(zu.allowHosts):je$1.slice(),ep=et(_h);if(location.hostname.length!==0&&!ze(location.hostname)&&je$1.filter(function(hp){return Ke$1(hp,location.hostname)}).length===0&&!ze(ep)&&_f.filter(function(hp){return Ke$1(hp,ep)}).length===0){var tp=new Ye$1(_h,"Link","request host(".concat(ep,") is not allowed"));return ju(tp),void((_c=zu.networkSubscribe)===null||_c===void 0||_c.emit("network",_h,"Link","forbidden",tp.message))}var op=document.createElement("link");op.href=_h,op.rel=op.relList&&op.relList.supports("prefetch")?"prefetch":"preload",op.as="fetch",op.crossOrigin="";var lp=document.head||document.getElementsByTagName("head")[0];lp&&lp.appendChild(op);var up=!1;op.onload=function(){var hp;if(up!==!0){up=!0,Xc();var np=_e$1(),rp={origin:Wu,source:_h,requestTime:Hu,responseTime:np,costs:np-Hu,headers:{}};(hp=zu.networkSubscribe)===null||hp===void 0||hp.emit("network",_h,"Link","preload",JSON.stringify(rp))}},op.onerror=function(hp){var np;if(up!==!0){up=!0;var rp=new We(_h,"Link",0);ju(rp),(np=zu.networkSubscribe)===null||np===void 0||np.emit("network",_h,"Link","error",rp.message)}}})})}(Lu.imageOptions.transform?Lu.imageOptions.transform(Nu,Fu):ct$1(Nu,Fu),{allowHosts:Ou,requestProxy:Lu.requestProxy,networkSubscribe:Lu.networkSubscribe})})).then(function(){var ku=_e$1()-Du;return Bu(ku),ku})},Tu.prototype.project2d=function(Pu,Bu){if(Bu===void 0&&(Bu=!1),!this.renderer)return null;if(this.model.empty===!1&&Bu){var Lu=this.camera.position,Ru=Pu.clone().sub(Lu),Ou=new r$3.Raycaster(Lu,Ru.clone().normalize()),Du=this.model.intersectRaycaster(Ou)[0];if(Du&&Du.distance+.01<Ru.length())return null}var ku=Pu.clone().project(this.camera);if(Math.abs(ku.z)>1)return null;var Fu=this.renderer.getSize(new r$3.Vector2),Nu=Fu.x*this.scissor.width,Gu=Fu.y*this.scissor.height,zu=Fu.x*this.scissor.left+(ku.x+1)/2*Nu,Hu=Fu.y*(1-this.scissor.bottom-this.scissor.height)+(1-ku.y)/2*Gu;return new r$3.Vector2(zu,Hu)},Tu.prototype.getRenderObjects=function(Pu){xu.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),bu.setFromProjectionMatrix(xu),Pu||(Pu=this.scene);var Bu=[];return Pu.traverseVisible(function(Lu){(Lu instanceof r$3.Mesh||Lu instanceof r$3.Line||Lu instanceof r$3.Points)&&(Lu instanceof r$3.ImmediateRenderObject||!Lu.frustumCulled||bu.intersectsObject(Lu))&&Bu.push(Lu)}),Bu},Tu.prototype.getCurrentState=function(){return t$3.__assign(t$3.__assign({},this.getPose()),{mode:this.currentMode||Tu.Mode.Panorama,panoIndex:this.panoIndex||0})},Tu.prototype.setState=function(Pu,Bu,Lu){var Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu;Bu===void 0&&(Bu=!1),Lu===void 0&&(Lu=!0),!(Pu=Object.assign({},Pu)).offset||Pu instanceof r$3.Vector3||(Pu.offset=new r$3.Vector3(Pu.offset.x,Pu.offset.y,Pu.offset.z));var Wu,_h,Xc,ju,_c,_f=(Ru=Pu.panoIndex)!==null&&Ru!==void 0?Ru:this.state.panoIndex,ep=(Ou=Pu.mode)!==null&&Ou!==void 0?Ou:this.state.mode;if(this.work)if(this.work.observers[_f])if(Pu.mode!==Tu.Mode.Floorplan&&Pu.mode!==Tu.Mode.Topview&&Pu.mode!==Tu.Mode.Mapview&&Pu.mode!==Tu.Mode.Model||!oo(this.model)&&this.model.loaded===!0){if(this.state.mode!==ep){if(ep==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var tp=void 0;tp=eu(this.state.mode)&&eu(ep)?t$3.__assign({},this.state):eu(ep)?t$3.__assign({},this.panoramaLikeSavedPose):ep===Tu.Mode.Mapview?{longitude:this.panoramaLikeSavedPose.latitude}:t$3.__assign({},Pu),typeof Pu.longitude=="number"&&(tp.longitude=Pu.longitude),typeof Pu.latitude=="number"&&(tp.latitude=Pu.latitude),typeof Pu.fov=="number"&&(tp.fov=Pu.fov);var op=t$3.__assign(t$3.__assign({initial:[_f,tp,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[ep]),lp=$l$1[ep].initAnimationEndPose(op);Wu=lp.longitude,_h=lp.latitude,Xc=lp.fov,ju=lp.offset,_c=lp.distance}else Wu=(Du=Pu.longitude)!==null&&Du!==void 0?Du:this.state.longitude,_h=(ku=Pu.latitude)!==null&&ku!==void 0?ku:this.state.latitude,Xc=(Fu=Pu.fov)!==null&&Fu!==void 0?Fu:this.state.fov,ju=(Nu=Pu.offset)!==null&&Nu!==void 0?Nu:this.state.offset,_c=(Gu=Pu.distance)!==null&&Gu!==void 0?Gu:this.state.distance;var up={panoIndex:_f,mode:ep,longitude:Wu,latitude:_h,fov:Xc,offset:ju,distance:_c};this.emit("setState",up),$s$1(this.state,up)||(this.controller&&up.mode==="VRPanorama"&&up.mode!==this.state.mode?(Js$1(this.state,up),this.changeMode("VRPanorama")):this.controller&&up.mode==="XRPanorama"&&up.mode!==this.state.mode?(Js$1(this.state,up),this.changeMode("XRPanorama")):(Js$1(this.state,up),this.controller&&(this.controller.userAction=Lu),Bu&&this.state.mode===up.mode&&(this.syncingState=this.syncState(_e$1(),0,Bu),this.syncingState&&((zu=this.controller)===null||zu===void 0||zu.updateTime(_e$1(),0),this.syncingState=!1)),this.emit("stateChange",this.state,Lu),(Hu=this.analysis)===null||Hu===void 0||Hu.state(this.work,this.state)))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},Tu.prototype.aroundScissor=function(Pu){if(this.renderer)if(this.state.mode!=="XRPanorama"){var Bu=new r$3.Vector2,Lu=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Lu){this.renderer.getSize(Bu);var Ru=Math.floor(Bu.x*this.scissor.left),Ou=Math.floor(Bu.y*this.scissor.bottom),Du=Math.floor(Bu.x*this.scissor.width),ku=Math.floor(Bu.y*this.scissor.height);this.renderer.setViewport(Ru,Ou,Du,ku),this.renderer.setScissor(Ru,Ou,Du,ku),this.renderer.setScissorTest(!0)}Pu(),Lu&&(this.renderer.setViewport(0,0,Bu.x,Bu.y),this.renderer.setScissor(0,0,Bu.x,Bu.y),this.renderer.setScissorTest(!1))}else Pu()},Tu.prototype.syncState=function(Pu,Bu,Lu){Lu===void 0&&(Lu=!1);var Ru=this.stateSynced;if(this.stateSynced=!1,!this.work||!this.controller)return!1;if(this.state.mode!==this.currentMode){var Ou={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Ou,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Du=this.currentMode;if(!(Du===Tu.Mode.Floorplan||Du===Tu.Mode.Topview||Du===Tu.Mode.Mapview||Du===Tu.Mode.Model)||!this.modelPending){var ku=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var Fu=0,Nu=ku;Fu<Nu.length;Fu++){var Gu=Nu[Fu];this.controller instanceof $l$1.Panorama?Gu.tile!==!0||this.controller.isTileReady()?Gu():this.readyCallbacks.push(Gu):Gu()}}}if(this.controller instanceof $l$1.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var zu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,zu,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return zu={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance},this.controller.moveToPano(this.state.panoIndex,zu,!1),!0;if(this.controller instanceof $l$1.Topview||this.controller instanceof $l$1.Mapview){var Hu=1,Wu=Lu?this.state.fov:Ys$1(this.camera.pose.fov,this.state.fov,Hu),_h=Lu?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(Ys$1(this.camera.pose.offset.x,this.state.offset.x,.2),Ys$1(this.camera.pose.offset.y,this.state.offset.y,.2),Ys$1(this.camera.pose.offset.z,this.state.offset.z,.2));if(Vs$1(Wu,this.camera.pose.fov)||Hs(_h,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Wu},0).catch(Qe$1),this.controller.locationMotion.set({x:_h.x,y:_h.y,z:_h.z},0).catch(Qe$1),!0}else{Hu=1;var Xc=Math.PI/45,ju=(Wu=Lu?this.state.fov:Ys$1(this.camera.pose.fov,this.state.fov,Hu),Lu?{longitude:this.state.longitude,latitude:this.state.latitude}:function(ep,tp,op){if(ep.longitude===tp.longitude&&ep.latitude===tp.latitude)return{longitude:tp.longitude,latitude:tp.latitude};var lp=Gs(ep.longitude),up=ep.latitude,hp=Gs(tp.longitude),np=tp.latitude;hp-lp>Ws$1?lp+=Xs$1:lp-hp>Ws$1&&(lp-=Xs$1);var rp=op/Math.sqrt(Math.pow(hp-lp,2)+Math.pow(np-up,2));return rp>=1?{longitude:tp.longitude,latitude:tp.latitude}:{longitude:lp+(hp-lp)*rp,latitude:up+(np-up)*rp}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Xc)),_c=ju.longitude,_f=ju.latitude;if(Vs$1(_c,this.camera.pose.longitude,2*Math.PI)||Vs$1(_f,this.camera.pose.latitude)||Vs$1(Wu,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:_c,latitude:_f,fov:Wu},0).catch(Qe$1),!0}return this.stateSynced=!0,Ru===!1&&this.emit("stateSynced",this.state),!1},Tu.prototype.ready=function(Pu){var Bu=this;return Pu===void 0&&(Pu={}),new Promise(function(Lu){var Ru;Bu.readyCallbacks.push(Object.assign(Lu,{tile:(Ru=Pu.tile)!==null&&Ru!==void 0&&Ru}))})},Tu.prototype.requestFullscreen=function(){var Pu;if(Zs$1()){var Bu=(Pu=this.getElement())===null||Pu===void 0?void 0:Pu.parentNode;Bu&&"requestFullscreen"in Bu&&typeof document!="undefined"&&document.fullscreenElement===null&&Bu.requestFullscreen()}},Tu.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},Tu.prototype.throwError=function(Pu){this.hasListener("error")?this.emit("error",Pu):console.error(Pu)},Tu.prototype.loadModel=function(Pu,Bu,Lu,Ru){var Ou=this,Du=Pu.file;this.emit("modelWillLoad",Pu);var ku=new uo({allowHosts:Bu,requestProxy:this.requestProxy,networkSubscribe:this.networkSubscribe});ku.once("bvhLoaded",function(){var Fu,Nu;Ou.destroyed||Du===((Nu=(Fu=Ou.work)===null||Fu===void 0?void 0:Fu.model)===null||Nu===void 0?void 0:Nu.file)&&Ou.emit("modelBvhLoaded",ku)}),ku.once("materialLoaded",function(){var Fu,Nu;Ou.destroyed||Du===((Nu=(Fu=Ou.work)===null||Fu===void 0?void 0:Fu.model)===null||Nu===void 0?void 0:Nu.file)&&Ou.emit("modelMaterialLoaded",ku)}),ku.once("geometryLoaded",function(){var Fu,Nu;Ou.destroyed||Du===((Nu=(Fu=Ou.work)===null||Fu===void 0?void 0:Fu.model)===null||Nu===void 0?void 0:Nu.file)&&(ku.bounding.max.y-ku.bounding.min.y<1.5&&(ku.bounding.max.y=ku.bounding.min.y+10),Ou.emit("modelGeometryLoaded",ku))}),ku.once("loaded",function(){var Fu,Nu,Gu,zu;if(!Ou.destroyed&&Du===((Nu=(Fu=Ou.work)===null||Fu===void 0?void 0:Fu.model)===null||Nu===void 0?void 0:Nu.file)){var Hu,Wu=Ou.model;Wu&&(Wu.show(),Hu=Wu.getMaterial()||{},Ou.scene.remove(Wu),Wu.dispose(),ku.setTransparent(Wu.getTransparent())),Hu&&ku.setMaterial(Hu),Ou.model=ku,Ou.scene.add(ku),(Gu=Ou.controller)===null||Gu===void 0||Gu.updateModel(ku),(zu=Ou.renderer)===null||zu===void 0||zu.compile(Ou.scene,Ou.camera),Ou.needsRender=!0,Ou.modelPending=!1,Lu(),Ou.emit("modelLoaded",ku)}}),ku.on("shownFloorChange",function(Fu,Nu){var Gu,zu;Ou.destroyed||Du===((zu=(Gu=Ou.work)===null||Gu===void 0?void 0:Gu.model)===null||zu===void 0?void 0:zu.file)&&Ou.emit("modelShownFloorChange",Fu,Nu)}),ku.on("error",function(Fu){var Nu,Gu,zu,Hu;if(!Ou.destroyed&&Du===((Gu=(Nu=Ou.work)===null||Nu===void 0?void 0:Nu.model)===null||Gu===void 0?void 0:Gu.file)){ku.bounding.makeEmpty();for(var Wu=0,_h=Ou.work.observers;Wu<_h.length;Wu++){var Xc=_h[Wu];ku.bounding.expandByPoint(Xc.standingPosition),ku.bounding.expandByPoint(new r$3.Vector3().fromArray([Xc.position.x,2*Xc.position.y-Xc.standingPosition.y,Xc.position.z]))}var ju=Ks$1(ku.bounding,new r$3.Vector3(1,0,1));ju.visible=!0,ju.name="model_empty",ku.add(ju);var _c,_f=Ou.model;_f&&(_f.show(),_c=_f.getMaterial()||{},Ou.scene.remove(_f),_f.dispose(),ku.setTransparent(_f.getTransparent())),_c&&ku.setMaterial(_c),Ou.model=ku,Ou.scene.add(ku),(zu=Ou.controller)===null||zu===void 0||zu.updateModel(ku),(Hu=Ou.renderer)===null||Hu===void 0||Hu.compile(Ou.scene,Ou.camera),Ou.emit("modelLoadError",Fu,ku),Ou.throwError(Fu),Ou.modelPending=!1,Lu()}}),this.modelPending=!0,ku.load(Pu,this.textureOptions).catch(Qe$1)},Tu.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe,requestProxy:this.requestProxy}},Tu.prototype.saveControllerPose=function(Pu){Pu===void 0&&(Pu=this.controller),Pu&&eu(Pu)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},Tu.prototype.applyController=function(Pu,Bu){var Lu=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Ru=$l$1[Pu];Pu===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(Pu===Tu.Mode.Floorplan||Pu===Tu.Mode.Topview||Pu===Tu.Mode.Model||Pu===Tu.Mode.Mapview),this.currentMode=Pu;for(var Ou=new Ru(Bu),Du=function(Hu){Ou.on(Hu,function(){for(var Wu=[],_h=0;_h<arguments.length;_h++)Wu[_h]=arguments[_h];var Xc=Lu.emit.apply(Lu,t$3.__spreadArray([Hu],Wu,!1));if(Xc)return!1})},ku=0,Fu=tu;ku<Fu.length;ku++)Du(Fu[ku]);var Nu=$l$1[Pu].initAnimationEndPose(Bu),Gu=Bu.initial[3],zu={panoIndex:Bu.initial[0],mode:Pu,longitude:Nu.longitude,latitude:Nu.latitude,fov:Nu.fov,offset:Nu.offset,distance:Nu.distance};return $s$1(this.state,zu)||(Js$1(this.state,zu),this.emit("stateChange",this.state,Gu)),this.emit("currentStateChange",this.getCurrentState(),Gu),Ou.on("cameraUpdate",function(Hu,Wu){var _h;if(Lu.controller){var Xc=t$3.__assign(t$3.__assign({},Lu.controller.getTargetPose()),{panoIndex:Lu.panoIndex,mode:Pu});Wu&&Lu.syncingState===!1&&Lu.state.mode===Xc.mode&&!$s$1(Lu.state,Xc)&&(Js$1(Lu.state,Xc),Lu.emit("stateChange",Lu.state,Wu),(_h=Lu.analysis)===null||_h===void 0||_h.state(Lu.work,Lu.state))}Lu.emit("currentStateChange",Lu.getCurrentState(),Wu)}),Ou.on("initAnimationWillStart",function(Hu,Wu,_h){var Xc,ju=t$3.__assign(t$3.__assign({},Wu),{panoIndex:Hu,mode:Pu});_h&&Lu.state.mode===ju.mode&&!$s$1(Lu.state,ju)&&(Js$1(Lu.state,ju),Lu.emit("stateChange",Lu.state,_h),(Xc=Lu.analysis)===null||Xc===void 0||Xc.state(Lu.work,Lu.state))}),Ou.on("initAnimationEnded",function(Hu,Wu,_h){var Xc,ju=t$3.__assign(t$3.__assign({},Wu),{panoIndex:Hu,mode:Pu});_h&&Lu.state.mode===ju.mode&&!$s$1(Lu.state,ju)&&(Js$1(Lu.state,ju),Lu.emit("stateChange",Lu.state,_h),(Xc=Lu.analysis)===null||Xc===void 0||Xc.state(Lu.work,Lu.state))}),Ou.on("panoWillArrive",function(Hu,Wu,_h){var Xc;Lu.panoIndex=Hu;var ju=t$3.__assign(t$3.__assign({},Wu),{panoIndex:Hu,mode:Pu});_h&&Lu.state.mode===ju.mode&&!$s$1(Lu.state,ju)&&(Js$1(Lu.state,ju),Lu.emit("stateChange",Lu.state,_h),(Xc=Lu.analysis)===null||Xc===void 0||Xc.state(Lu.work,Lu.state))}),Ou.on("panoArrived",function(Hu,Wu,_h){var Xc,ju=t$3.__assign(t$3.__assign({},Wu),{panoIndex:Hu,mode:Pu});_h&&Lu.state.mode===ju.mode&&!$s$1(Lu.state,ju)&&(Js$1(Lu.state,ju),Lu.emit("stateChange",Lu.state,_h),(Xc=Lu.analysis)===null||Xc===void 0||Xc.state(Lu.work,Lu.state))}),Ou.on("moveToPano",function(Hu,Wu){Lu.emit("currentStateChange",Lu.getCurrentState(),Wu)}),Ou.on("wantsMoveToPano",function(Hu,Wu,_h){var Xc=Lu.emit("wantsMoveToPano",Hu,Wu,_h);Xc||(Xc=Lu.emit("wantsToMoveToPano",Hu,Wu,_h)),Xc||Lu.moveToPano(Hu,Wu,_h)}),Ou.on("vrWantsToExit",function(){Lu.currentMode===Tu.Mode.VRPanorama&&(Lu.exitFullscreen(),Lu.changeMode(Tu.Mode.Panorama))}),Ou.on("error",function(Hu){return Lu.throwError(Hu)}),Ou},Tu.prototype.removeEventListeners=function(){},Tu.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},Tu.Line=null,Tu}(Fe),Iu={instances:{},constructor:Mu};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:Iu});var Su=function(){function Cu(){}return Cu.createButton=function(Tu){var Pu=document.createElement("button");function Bu(){Pu.style.display="",Pu.style.cursor="auto",Pu.style.left="calc(50% - 75px)",Pu.style.width="150px",Pu.onmouseenter=null,Pu.onmouseleave=null,Pu.onclick=null,Pu.textContent="VR NOT SUPPORTED"}function Lu(Ou){Ou.style.position="absolute",Ou.style.bottom="20px",Ou.style.padding="12px 6px",Ou.style.border="1px solid #fff",Ou.style.borderRadius="4px",Ou.style.background="rgba(0,0,0,0.1)",Ou.style.color="#fff",Ou.style.font="normal 13px sans-serif",Ou.style.textAlign="center",Ou.style.opacity="0.5",Ou.style.outline="none",Ou.style.zIndex="999"}if("xr"in navigator)return Pu.id="VRButton",Pu.style.display="none",Lu(Pu),navigator.xr.isSessionSupported("immersive-vr").then(function(Ou){Ou?(Pu.style.display="",Pu.style.cursor="pointer",Pu.style.left="calc(50% - 50px)",Pu.style.width="100px",Pu.textContent="ENTER VR",Pu.onmouseenter=function(){Pu.style.opacity="1.0"},Pu.onmouseleave=function(){Pu.style.opacity="0.5"},Pu.onclick=function(){Tu&&Tu()}):Bu()}),Pu;var Ru=document.createElement("a");return window.isSecureContext===!1?(Ru.href=document.location.href.replace(/^http:/,"https:"),Ru.innerHTML="WEBXR NEEDS HTTPS"):(Ru.href="https://immersiveweb.dev/",Ru.innerHTML="WEBXR NOT AVAILABLE"),Ru.style.left="calc(50% - 90px)",Ru.style.width="180px",Ru.style.textDecoration="none",Lu(Ru),Ru},Cu}();five.AnimationFrameLoop=at,five.BVH=qt,five.BVHIntersect=Ft,five.BVHNode=Nt,five.BVHVector3=Ot$1,five.Camera=Lt$1,Five=five.Five=Mu,five.InternalWebGLRenderer=It,five.IntersectMesh=Fs,five.LegacyPanoCircleMesh=jo$1,five.Model=uo,five.NetworkSubscribe=tt,five.PBMContainer=At$1,five.PBMGroup=gt,five.PBMMaterial=Mt,five.PBMMesh=ft$1,five.PROXY_CONTROLLER_EVENT_NAMES=tu,five.PanoCircleMesh=as$1,five.PanoCircleMeshDark=xs,five.PanoCircleMeshSolid=Ds,five.Scene=St$1,Subscribe=five.Subscribe=Fe,five.Tile3D=Qr,five.Tile3DModel=ro,five.TileBoundingSphere=pr,five.TileCacheNode=yn$1,five.TileCullingVolume=Fn,five.TileOrientedBoundingBox=Rr,five.TilePlane=kn,five.TileRequestScheduler=vn$1,five.Tileset3D=qr,five.Tileset3DTraverser=_r,five.TilesetCache=xn,five.Work=Eo$1,five.XRButton=Su,five.defaultImageURLTransform=ct$1,five.getViewportScale=nu,five.imageSupport=function(){return pt$1||(pt$1=Promise.all([dt$1("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),dt$1("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA")]).then(function(Cu){var Tu=Cu[0];return{webp:Cu[1],avif:Tu}}).catch(function(){return{webp:!1,avif:!1}}))},parseWork=five.parseWork=Co$1;var react={},unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$1=tslib.exports,t$2=react$1.exports,n$2=require$$1,r$2=five;function o$1(Cu){if(Cu&&Cu.__esModule)return Cu;var Tu=Object.create(null);return Cu&&Object.keys(Cu).forEach(function(Pu){if(Pu!=="default"){var Bu=Object.getOwnPropertyDescriptor(Cu,Pu);Object.defineProperty(Tu,Pu,Bu.get?Bu:{enumerable:!0,get:function(){return Cu[Pu]}})}}),Tu.default=Cu,Object.freeze(Tu)}var u$1=o$1(t$2),i$1=o$1(n$2),a$1=[],f$1=[],c$1=u$1.createContext(null);function s$1(){var Cu=u$1.useContext(c$1);if(!Cu)throw new Error("FiveProvider never found.");return Cu.five}function l$2(){var Cu=u$1.useContext(c$1);if(!Cu)throw new Error("FiveProvider never found.");return Cu.loadWork}var d={display:"inline-block",overflow:"hidden"};function v$1(Cu,Tu){var Pu=s$1(),Bu=[Pu];Tu!==void 0&&(Bu=Bu.concat(Tu)),u$1.useLayoutEffect(function(){return Cu(Pu.scene)},Bu)}var p$1=v$1;function h$1(Cu){return e$1.__assign({},Cu.state)}function m$1(Cu){var Tu=Cu.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(Cu.camera.position,Tu)}function y$1(Cu){return Cu.camera.getWorldDirection(new i$1.Vector3)}function g$1(Cu){return Cu.model.empty?"Empty":"Loaded"}function S(Cu,Tu){return Tu.indexOf(Cu)>=0}function b$1(Cu,Tu){for(var Pu=0,Bu=Object.keys(Tu);Pu<Bu.length;Pu++){var Lu=Bu[Pu];Tu[Lu]!==void 0&&(Cu[Lu]=Tu[Lu])}}function C$2(Cu,Tu){if(S("loadWork",Tu))return Cu}function w$1(Cu,Tu){if(S("setState",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.setState.apply(Cu,Pu)}}function k(Cu,Tu){if(S("on",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.on.apply(Cu,Pu)}}function x(Cu,Tu){if(S("on",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.once.apply(Cu,Pu)}}function E$1(Cu,Tu){if(S("off",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.off.apply(Cu,Pu)}}function L$1(Cu,Tu){if(S("intersectRaycaster",Tu))return function(){for(var Pu,Bu=[],Lu=0;Lu<arguments.length;Lu++)Bu[Lu]=arguments[Lu];return(Pu=Cu.model).intersectRaycaster.apply(Pu,Bu)}}function F$1(Cu,Tu){if(S("project2d",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.project2d.apply(Cu,Pu)}}function _(Cu,Tu){if(S("updateCamera",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.updateCamera.apply(Cu,Pu)}}function P$1(Cu,Tu){if(S("initBasisLoader",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.initBasisLoader.apply(Cu,Pu)}}function R$2(Cu,Tu){if(S("getPixels",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.getPixels.apply(Cu,Pu)}}function V(Cu,Tu){if(S("render",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.render.apply(Cu,Pu)}}function W$2(Cu,Tu){if(S("needsRender",Tu))return function(){Cu.needsRender=!0}}function M$1(Cu,Tu){if(S("preloadPano",Tu))return function(){for(var Pu=[],Bu=0;Bu<arguments.length;Bu++)Pu[Bu]=arguments[Bu];return Cu.preloadPano.apply(Cu,Pu)}}function O$1(Cu,Tu){if(S("showFloor",Tu))return function(Pu){typeof Pu=="number"?Cu.model.show(Pu):Cu.model.show()}}function j(Cu,Tu){if(S("toggleHelperVisible",Tu))return function(Pu){Cu.helperVisible=Pu}}function A$1(Cu,Tu){for(var Pu={},Bu=Tu.length,Lu=-1;++Lu<Bu;){var Ru=Tu[Lu];Ru in Cu&&(Pu[Ru]=Cu[Ru])}return Pu}function N$1(Cu,Tu){for(var Pu=0;Pu<Cu.length;Pu++)for(var Bu=0;Bu<Tu.length;Bu++)if(Cu[Pu]===Tu[Bu])return!0;return!1}var U=function(){function Cu(Tu,Pu){this.values=Tu,this.listeners=[],this.onValuesChange=Pu}return Cu.prototype.on=function(Tu,Pu){var Bu=this,Lu=[Tu,Pu];return this.listeners.push(Lu),function(){var Ru=Bu.listeners.indexOf(Lu);Ru>=0&&Bu.listeners.splice(Ru,1)}},Cu.prototype.getValues=function(Tu){return A$1(this.values,Tu)},Cu.prototype.setValues=function(Tu,Pu){var Bu,Lu,Ru=[];for(var Ou in Pu)Tu.indexOf(Ou)>=0&&(Bu=Pu[Ou],Lu=this.values[Ou],!(typeof Bu=="number"&&typeof Lu=="number"&&isNaN(Bu)&&isNaN(Lu)||Bu===Lu))&&Ru.push(Ou);if(Ru.length!==0){for(var Du=e$1.__assign({},this.values),ku=0,Fu=Ru;ku<Fu.length;ku++){var Nu=Fu[ku];this.values[Nu]=Pu[Nu]}this.onValuesChange&&this.onValuesChange(this.values,Du);for(var Gu=0,zu=this.listeners;Gu<zu.length;Gu++){var Hu=zu[Gu],Wu=Hu[0],_h=Hu[1];if(N$1(Wu,Ru)){var Xc=A$1(Du,Wu);_h(A$1(this.values,Wu),Xc)}}}},Cu}();FiveCanvas=react.FiveCanvas=function(Cu){var Tu=Cu.width,Pu=Cu.height,Bu=s$1(),Lu=u$1.createRef(),Ru=e$1.__assign({width:Tu,height:Pu},d);return u$1.useLayoutEffect(function(){if(Lu.current&&Bu.renderer){if(Bu.renderer.domElement.parentNode!==null&&Bu.renderer.domElement.parentNode!==Lu.current)throw new Error("There are more than 2 fiveCanvas in this context.");Bu.renderer.domElement.parentNode!==Lu.current&&Lu.current.appendChild(Bu.renderer.domElement),Bu.camera.aspect=Tu/Pu,Bu.camera.updateProjectionMatrix(),Bu.renderer.setSize(Tu,Pu),Bu.needsRender=!0}},[Tu,Pu,Lu.current]),u$1.createElement("div",{ref:Lu,style:Ru})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var Cu=[],Tu=0;Tu<arguments.length;Tu++)Cu[Tu]=arguments[Tu];return Cu},createFiveProvider=react.createFiveProvider=function(Cu){return Cu===void 0&&(Cu={}),function(Tu){function Pu(Bu){var Lu,Ru=this;Ru=Tu.call(this,Bu)||this;var Ou=function(Du){var ku=Du===void 0?{}:Du,Fu=ku.backgroundColor,Nu=Fu===void 0?1579548:Fu,Gu=ku.backgroundAlpha,zu=Gu===void 0?1:Gu,Hu=ku.pixelRatio,Wu=Hu===void 0?1:Hu,_h=ku.webgl2,Xc=_h!==void 0&&_h;if(typeof window!="undefined"){var ju=null;if(!(ju=Xc?a$1.shift():f$1.shift())){if(Xc){var _c=document.createElement("canvas"),_f=_c.getContext("webgl2");if(_f===null)throw new Error("error occurred when getting webgl2 canvas context");ju=new i$1.WebGLRenderer({antialias:!1,alpha:!0,canvas:_c,context:_f})}else ju=new i$1.WebGLRenderer({antialias:!1,alpha:!0});ju.outputEncoding=i$1.sRGBEncoding}return ju.setPixelRatio(Wu),ju.setClearColor(Nu,zu),ju.autoClear=!0,ju}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:Cu.backgroundAlpha,backgroundColor:Cu.backgroundColor,webgl2:Cu==null?void 0:Cu.webgl2});return Ru.five=new r$2.Five(e$1.__assign({renderer:Ou},Cu)),(Bu.work||Bu.initialWork)&&Ru.five.load(Bu.work||Bu.initialWork,Bu.initialState,void 0,(Lu=Bu.initialUserAction)===null||Lu===void 0||Lu),Ru.five.on("load",function(){var Du;Ru.props.onWorkChange&&Ru.props.onWorkChange((Du=Ru.five)===null||Du===void 0?void 0:Du.work)}),Ru.five.on("stateChange",function(Du,ku){Ru.props.onStateChange&&Ru.props.onStateChange(Du,ku)}),Ru.five.on("currentStateChange",function(Du,ku){Ru.props.onCurrentStateChange&&Ru.props.onCurrentStateChange(Du,ku)}),Ru.five.on("error",function(Du){Ru.props.onError?Ru.props.onError(Du):console.warn(Du.message)}),Ru}return e$1.__extends(Pu,Tu),Pu.prototype.loadWork=function(Bu,Lu,Ru,Ou){if(Ou===void 0&&(Ou=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Bu,Lu,Ru,Ou)},Pu.prototype.shouldComponentUpdate=function(Bu){var Lu,Ru;return Bu.work&&Bu.work!==((Lu=this.five)===null||Lu===void 0?void 0:Lu.work)&&((Ru=this.five)===null||Ru===void 0||Ru.load(Bu.work,Bu.initialState)),!0},Pu.prototype.componentWillUnmount=function(){var Bu;this.five&&(this.five.dispose(),(Bu=this.five.renderer)&&(Bu.capabilities.isWebGL2?f$1.indexOf(Bu)===-1&&f$1.push(Bu):a$1.indexOf(Bu)===-1&&a$1.push(Bu)),delete this.five)},Pu.prototype.render=function(){var Bu=this;return u$1.createElement(c$1.Provider,{value:{five:this.five,loadWork:function(){for(var Lu=[],Ru=0;Ru<arguments.length;Ru++)Lu[Ru]=arguments[Ru];return Bu.loadWork.apply(Bu,Lu)}}},this.props.children)},Pu}(u$1.Component)},react.createStore=function(Cu){var Tu=u$1.createContext(null);return{useStore:function(Pu){var Bu=u$1.useContext(Tu);if(Bu===null)throw new Error("StoreProvider never found.");var Lu=u$1.useRef(!0),Ru=u$1.useState(Bu.getValues(Pu)),Ou=Ru[0],Du=Ru[1],ku=e$1.__spreadArray([Bu],Pu,!0);return u$1.useLayoutEffect(function(){return Lu.current?Lu.current=!1:Du(Bu.getValues(Pu)),Bu.on(Pu,function(Fu){return Du(Fu)})},ku),[Ou,u$1.useCallback(function(Fu){return Bu.setValues(Pu,Fu)},ku)]},useStoreSetter:function(Pu){var Bu=u$1.useContext(Tu);if(Bu===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(Lu){return Bu.setValues(Pu,Lu)},e$1.__spreadArray([Bu],Pu,!0))},watchStore:function(Pu,Bu,Lu){var Ru=u$1.useContext(Tu);if(Ru===null)throw new Error("StoreProvider never found.");var Ou=e$1.__spreadArray([Ru],Pu,!0);Lu!==void 0&&(Ou=Ou.concat(Lu)),u$1.useLayoutEffect(function(){return Ru.on(Pu,Bu)},Ou)},useStoreAction:function(Pu){var Bu=u$1.useContext(Tu);if(Bu===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var Lu=[],Ru=0;Ru<arguments.length;Ru++)Lu[Ru]=arguments[Ru];var Ou=Cu[Pu],Du=Ou[0],ku=Ou.slice(1),Fu=function(){return Bu.getValues(ku)},Nu=function(Gu){return Bu.setValues(ku,Gu)};return Du.apply(void 0,e$1.__spreadArray([Fu,Nu],Lu,!1))},[])},StoreProvider:function(Pu){function Bu(Lu){var Ru=Pu.call(this,Lu)||this;return Ru.store=new U(Lu.initialValue,function(){for(var Ou,Du=[],ku=0;ku<arguments.length;ku++)Du[ku]=arguments[ku];Ru.props.onValuesChange&&(Ou=Ru.props).onValuesChange.apply(Ou,Du)}),Ru}return e$1.__extends(Bu,Pu),Bu.prototype.shouldComponentUpdate=function(Lu){return Lu.children!==this.props.children},Bu.prototype.render=function(){return u$1.createElement(Tu.Provider,{value:this.store},this.props.children)},Bu}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s$1()},react.useFiveAction=function(){var Cu=s$1();return{updateCamera:u$1.useCallback(function(Tu,Pu){return Cu.updateCamera(Tu,Pu)},[Cu]),initBasisLoader:u$1.useCallback(function(Tu){return Cu.initBasisLoader(Tu)},[Cu]),getPixels:u$1.useCallback(function(Tu,Pu,Bu,Lu,Ru){return Cu.getPixels(Tu,Pu,Bu,Lu,Ru)},[Cu]),render:u$1.useCallback(function(Tu){return Cu.render(Tu)},[Cu]),needsRender:u$1.useCallback(function(){return Cu.needsRender=!0},[Cu]),preloadPano:u$1.useCallback(function(Tu,Pu){return Cu.preloadPano(Tu,Pu)},[Cu])}},react.useFiveCameraDirection=function(){var Cu=s$1(),Tu=u$1.useState(function(){return y$1(Cu)}),Pu=Tu[0],Bu=Tu[1];return u$1.useLayoutEffect(function(){return Cu.on("cameraUpdate",function(){return Bu(y$1(Cu))})},[Cu]),Pu},react.useFiveCameraRaycaster=function(){var Cu=s$1(),Tu=u$1.useState(function(){return m$1(Cu)}),Pu=Tu[0],Bu=Tu[1];return u$1.useLayoutEffect(function(){return Cu.on("cameraUpdate",function(){return Bu(m$1(Cu))})},[Cu]),Pu},react.useFiveCurrentObserver=function(){var Cu=s$1(),Tu=u$1.useState(function(){return Cu.getCurrentState()}),Pu=Tu[0],Bu=Tu[1];return u$1.useLayoutEffect(function(){return Cu.on("currentStateChange",function(){return Bu(Cu.getCurrentState())})},[Cu]),Cu.work?Cu.work.observers[Pu.panoIndex]:null},react.useFiveCurrentState=function(){var Cu=s$1(),Tu=u$1.useState(function(){return Cu.getCurrentState()}),Pu=Tu[0],Bu=Tu[1],Lu=u$1.useCallback(function(Ru,Ou,Du){Ou===void 0&&(Ou=!1),Du===void 0&&(Du=!0);var ku=typeof Ru=="function"?Ru(Cu.getCurrentState()):Ru;Cu.setState(ku,Ou,Du)},[Cu]);return u$1.useLayoutEffect(function(){return Cu.on("currentStateChange",function(){return Bu(Cu.getCurrentState())})},[Cu]),[Pu,Lu]},react.useFiveEventCallback=function(Cu,Tu,Pu){var Bu=s$1(),Lu=[Bu,Cu];Pu!==void 0&&(Lu=Lu.concat(Pu)),u$1.useLayoutEffect(function(){return Bu.on(Cu,Tu)},Lu)},react.useFiveFloor=function(){var Cu=s$1(),Tu=u$1.useState(Cu.model.shownFloor),Pu=Tu[0],Bu=Tu[1],Lu=u$1.useState(Cu.model.floorLength),Ru=Lu[0],Ou=Lu[1],Du=u$1.useCallback(function(ku){typeof ku=="number"?Cu.model.show(ku):Cu.model.show()},[Cu]);return u$1.useLayoutEffect(function(){var ku=[];return ku.push(Cu.on("modelShownFloorChange",function(){return Bu(Cu.model.shownFloor)})),ku.push(Cu.on("modelLoaded",function(){return Ou(Cu.model.floorLength)})),function(){for(var Fu;Fu=ku.shift();)Fu()}},[Cu]),[Pu,Ru,Du]},react.useFiveHelper=function(){var Cu=s$1(),Tu=u$1.useState(Cu.helperVisible),Pu=Tu[0],Bu=Tu[1],Lu=u$1.useCallback(function(Ru){Cu.helperVisible=Ru},[Cu]);return u$1.useLayoutEffect(function(){return Cu.on("helpersVisibleChange",function(Ru){return Bu(Ru)})},[Cu]),[Pu,Lu]},react.useFiveModelIntersectRaycaster=function(){var Cu=s$1();return u$1.useCallback(function(Tu){return Cu.model.intersectRaycaster(Tu)},[Cu])},react.useFiveModelReadyState=function(){var Cu=s$1(),Tu=u$1.useState(function(){return g$1(Cu)}),Pu=Tu[0],Bu=Tu[1];return u$1.useLayoutEffect(function(){return Cu.on("modelLoaded",function(){return Bu(g$1(Cu))})},[Cu]),Pu},react.useFiveProject2d=function(){var Cu=s$1(),Tu=u$1.useState(function(){return Symbol()});Tu[0];var Pu=Tu[1];return u$1.useLayoutEffect(function(){return Cu.on("cameraUpdate",function(){return Pu(Symbol())})},[Cu]),u$1.useCallback(function(Bu,Lu){return Cu.project2d(Bu,Lu)},[Cu])},react.useFiveScene=p$1,react.useFiveSceneEffect=v$1,react.useFiveState=function(){var Cu=s$1(),Tu=u$1.useState(function(){return h$1(Cu)}),Pu=Tu[0],Bu=Tu[1],Lu=u$1.useCallback(function(Ru,Ou,Du){Ou===void 0&&(Ou=!1),Du===void 0&&(Du=!0);var ku=typeof Ru=="function"?Ru(Cu.getCurrentState()):Ru;Cu.setState(ku,Ou,Du)},[Cu]);return u$1.useLayoutEffect(function(){return Cu.on("stateChange",function(){return Bu(h$1(Cu))})},[Cu]),[Pu,Lu]},react.useFiveWork=function(){var Cu=s$1(),Tu=l$2(),Pu=u$1.useState(function(){return Cu.work}),Bu=Pu[0],Lu=Pu[1];return u$1.useLayoutEffect(function(){return Cu.on("load",function(){return Lu(Cu.work)})},[Cu]),[Bu,Tu]},react.withFive=function(Cu){return function(Tu){return u$1.forwardRef(function(Pu,Bu){var Lu=s$1(),Ru=l$2(),Ou=function(gp,mp){return[S("unsafe__fiveInstance",mp)?gp:void 0]}(Lu,Cu)[0],Du=function(gp,mp){var Sp=S("state",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return e$1.__assign({},gp.state)},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("stateChange",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),ku=Du[0],Fu=Du[1],Nu=function(gp,mp){var Sp=S("currentState",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.getCurrentState()},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("currentStateChange",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),Gu=Nu[0],zu=Nu[1],Hu=function(gp,mp){var Sp=S("currentObserver",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.getCurrentState()},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("currentStateChange",function(){return $p(Symbol())})},[gp]),[Ip?gp.work?gp.work.observers[Ip.panoIndex]:null:void 0,Ep]}(Lu,Cu),Wu=Hu[0],_h=Hu[1],Xc=function(gp,mp){var Sp=S("work",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.work},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("load",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),ju=Xc[0],_c=Xc[1],_f=function(gp,mp){var Sp=S("model",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.model},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("modelLoaded",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),ep=_f[0],tp=_f[1],op=function(gp,mp){return[S("scene",mp)?gp.scene:void 0]}(Lu,Cu)[0],lp=function(gp,mp){var Sp=S("cameraDirection",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.camera.getWorldDirection(new i$1.Vector3)},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("cameraUpdate",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),up=lp[0],hp=lp[1],np=function(gp,mp){var Sp=S("cameraRaycaster",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp){var Np=gp.camera.getWorldDirection(new i$1.Vector3);return new i$1.Raycaster(gp.camera.position,Np)}},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("cameraUpdate",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),rp=np[0],ip=np[1],ap=function(gp,mp){var Sp=S("modelReadyState",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.model.empty?"Empty":"Loaded"},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("modelLoaded",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),sp=ap[0],cp=ap[1],dp=function(gp,mp){var Sp=S("shownFloor",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.model.shownFloor},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("modelShownFloorChange",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),fp=dp[0],vp=dp[1],_p=function(gp,mp){var Sp=S("totalFloorLength",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.model.hasFloors()},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("modelLoaded",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),wp=_p[0],Dp=_p[1],Pp=function(gp,mp){var Sp=S("helperVisible",mp),xp=u$1.useState(Symbol()),Ep=xp[0],$p=xp[1],Ip=u$1.useMemo(function(){if(Sp)return gp.helperVisible},[gp,Ep]);return u$1.useLayoutEffect(function(){if(Sp)return gp.on("helpersVisibleChange",function(){return $p(Symbol())})},[gp]),[Ip,Ep]}(Lu,Cu),Wp=Pp[0],Rp=Pp[1],Gp=u$1.useMemo(function(){var gp={};return b$1(gp,{setState:w$1(Lu,Cu),loadWork:C$2(Ru,Cu),on:k(Lu,Cu),once:x(Lu,Cu),off:E$1(Lu,Cu),intersectRaycaster:L$1(Lu,Cu),project2d:F$1(Lu,Cu),updateCamera:_(Lu,Cu),initBasisLoader:P$1(Lu,Cu),getPixels:R$2(Lu,Cu),render:V(Lu,Cu),needsRender:W$2(Lu,Cu),preloadPano:M$1(Lu,Cu),showFloor:O$1(Lu,Cu),toggleHelperVisible:j(Lu,Cu)}),gp},[Lu,Ru]),kp=u$1.useMemo(function(){var gp=e$1.__assign({},Gp);return b$1(gp,{unsafe__fiveInstance:Ou,state:ku,currentState:Gu,currentObserver:Wu,work:ju,model:ep,scene:op,cameraDirection:up,cameraRaycaster:rp,modelReadyState:sp,shownFloor:fp,totalFloorLength:wp,helperVisible:Wp}),gp},[Lu,Gp,Fu,zu,_h,_c,tp,hp,ip,cp,vp,Dp,Rp]);return u$1.createElement(Tu,e$1.__assign({ref:Bu,$five:kp},Pu))})}};var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q$1(Cu,Tu,Pu){var Bu,Lu={},Ru=null,Ou=null;Pu!==void 0&&(Ru=""+Pu),Tu.key!==void 0&&(Ru=""+Tu.key),Tu.ref!==void 0&&(Ou=Tu.ref);for(Bu in Tu)n$1.call(Tu,Bu)&&!p.hasOwnProperty(Bu)&&(Lu[Bu]=Tu[Bu]);if(Cu&&Cu.defaultProps)for(Bu in Tu=Cu.defaultProps,Tu)Lu[Bu]===void 0&&(Lu[Bu]=Tu[Bu]);return{$$typeof:g,type:Cu,key:Ru,ref:Ou,props:Lu,_owner:m.current}}reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(Cu){(function(){var Tu={}.hasOwnProperty;function Pu(){for(var Bu=[],Lu=0;Lu<arguments.length;Lu++){var Ru=arguments[Lu];if(!!Ru){var Ou=typeof Ru;if(Ou==="string"||Ou==="number")Bu.push(Ru);else if(Array.isArray(Ru)){if(Ru.length){var Du=Pu.apply(null,Ru);Du&&Bu.push(Du)}}else if(Ou==="object"){if(Ru.toString!==Object.prototype.toString&&!Ru.toString.toString().includes("[native code]")){Bu.push(Ru.toString());continue}for(var ku in Ru)Tu.call(Ru,ku)&&Ru[ku]&&Bu.push(ku)}}}return Bu.join(" ")}Cu.exports?(Pu.default=Pu,Cu.exports=Pu):window.classNames=Pu})()})(classnames);var classNames=classnames.exports;function die(Cu){for(var Tu=arguments.length,Pu=new Array(Tu>1?Tu-1:0),Bu=1;Bu<Tu;Bu++)Pu[Bu-1]=arguments[Bu];throw new Error(typeof Cu=="number"?"[MobX] minified error nr: "+Cu+(Pu.length?" "+Pu.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+Cu)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(Cu){var Tu=!1;return function(){if(!Tu)return Tu=!0,Cu.apply(this,arguments)}}var noop=function Cu(){};function isFunction(Cu){return typeof Cu=="function"}function isStringish(Cu){var Tu=typeof Cu;switch(Tu){case"string":case"symbol":case"number":return!0}return!1}function isObject(Cu){return Cu!==null&&typeof Cu=="object"}function isPlainObject(Cu){if(!isObject(Cu))return!1;var Tu=Object.getPrototypeOf(Cu);if(Tu==null)return!0;var Pu=Object.hasOwnProperty.call(Tu,"constructor")&&Tu.constructor;return typeof Pu=="function"&&Pu.toString()===plainObjectString}function isGenerator(Cu){var Tu=Cu==null?void 0:Cu.constructor;return Tu?Tu.name==="GeneratorFunction"||Tu.displayName==="GeneratorFunction":!1}function addHiddenProp(Cu,Tu,Pu){defineProperty(Cu,Tu,{enumerable:!1,writable:!0,configurable:!0,value:Pu})}function addHiddenFinalProp(Cu,Tu,Pu){defineProperty(Cu,Tu,{enumerable:!1,writable:!1,configurable:!0,value:Pu})}function createInstanceofPredicate(Cu,Tu){var Pu="isMobX"+Cu;return Tu.prototype[Pu]=!0,function(Bu){return isObject(Bu)&&Bu[Pu]===!0}}function isES6Map(Cu){return Cu instanceof Map}function isES6Set(Cu){return Cu instanceof Set}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(Cu){var Tu=Object.keys(Cu);if(!hasGetOwnPropertySymbols)return Tu;var Pu=Object.getOwnPropertySymbols(Cu);return Pu.length?[].concat(Tu,Pu.filter(function(Bu){return objectPrototype.propertyIsEnumerable.call(Cu,Bu)})):Tu}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(Cu){return Object.getOwnPropertyNames(Cu).concat(Object.getOwnPropertySymbols(Cu))}:Object.getOwnPropertyNames;function toPrimitive(Cu){return Cu===null?null:typeof Cu=="object"?""+Cu:Cu}function hasProp(Cu,Tu){return objectPrototype.hasOwnProperty.call(Cu,Tu)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function Cu(Tu){var Pu={};return ownKeys(Tu).forEach(function(Bu){Pu[Bu]=getDescriptor(Tu,Bu)}),Pu};function _defineProperties(Cu,Tu){for(var Pu=0;Pu<Tu.length;Pu++){var Bu=Tu[Pu];Bu.enumerable=Bu.enumerable||!1,Bu.configurable=!0,"value"in Bu&&(Bu.writable=!0),Object.defineProperty(Cu,Bu.key,Bu)}}function _createClass(Cu,Tu,Pu){return Tu&&_defineProperties(Cu.prototype,Tu),Pu&&_defineProperties(Cu,Pu),Object.defineProperty(Cu,"prototype",{writable:!1}),Cu}function _extends(){return _extends=Object.assign||function(Cu){for(var Tu=1;Tu<arguments.length;Tu++){var Pu=arguments[Tu];for(var Bu in Pu)Object.prototype.hasOwnProperty.call(Pu,Bu)&&(Cu[Bu]=Pu[Bu])}return Cu},_extends.apply(this,arguments)}function _inheritsLoose(Cu,Tu){Cu.prototype=Object.create(Tu.prototype),Cu.prototype.constructor=Cu,_setPrototypeOf(Cu,Tu)}function _setPrototypeOf(Cu,Tu){return _setPrototypeOf=Object.setPrototypeOf||function(Bu,Lu){return Bu.__proto__=Lu,Bu},_setPrototypeOf(Cu,Tu)}function _assertThisInitialized(Cu){if(Cu===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Cu}function _unsupportedIterableToArray(Cu,Tu){if(!!Cu){if(typeof Cu=="string")return _arrayLikeToArray(Cu,Tu);var Pu=Object.prototype.toString.call(Cu).slice(8,-1);if(Pu==="Object"&&Cu.constructor&&(Pu=Cu.constructor.name),Pu==="Map"||Pu==="Set")return Array.from(Cu);if(Pu==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pu))return _arrayLikeToArray(Cu,Tu)}}function _arrayLikeToArray(Cu,Tu){(Tu==null||Tu>Cu.length)&&(Tu=Cu.length);for(var Pu=0,Bu=new Array(Tu);Pu<Tu;Pu++)Bu[Pu]=Cu[Pu];return Bu}function _createForOfIteratorHelperLoose(Cu,Tu){var Pu=typeof Symbol!="undefined"&&Cu[Symbol.iterator]||Cu["@@iterator"];if(Pu)return(Pu=Pu.call(Cu)).next.bind(Pu);if(Array.isArray(Cu)||(Pu=_unsupportedIterableToArray(Cu))||Tu&&Cu&&typeof Cu.length=="number"){Pu&&(Cu=Pu);var Bu=0;return function(){return Bu>=Cu.length?{done:!0}:{done:!1,value:Cu[Bu++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(Cu){function Tu(Pu,Bu){storeAnnotation(Pu,Bu,Cu)}return Object.assign(Tu,Cu)}function storeAnnotation(Cu,Tu,Pu){hasProp(Cu,storedAnnotationsSymbol)||addHiddenProp(Cu,storedAnnotationsSymbol,_extends({},Cu[storedAnnotationsSymbol])),isOverride(Pu)||(Cu[storedAnnotationsSymbol][Tu]=Pu)}function collectStoredAnnotations(Cu){return hasProp(Cu,storedAnnotationsSymbol)||addHiddenProp(Cu,storedAnnotationsSymbol,_extends({},Cu[storedAnnotationsSymbol])),Cu[storedAnnotationsSymbol]}var $mobx=Symbol("mobx administration"),Atom=function(){function Cu(Pu){Pu===void 0&&(Pu="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=Pu}var Tu=Cu.prototype;return Tu.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Bu){return Bu()})},Tu.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Bu){return Bu()})},Tu.reportObserved=function(){return reportObserved(this)},Tu.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},Tu.toString=function(){return this.name_},Cu}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(Cu,Tu,Pu){Tu===void 0&&(Tu=noop),Pu===void 0&&(Pu=noop);var Bu=new Atom(Cu);return Tu!==noop&&onBecomeObserved(Bu,Tu),Pu!==noop&&onBecomeUnobserved(Bu,Pu),Bu}function identityComparer(Cu,Tu){return Cu===Tu}function structuralComparer(Cu,Tu){return deepEqual(Cu,Tu)}function shallowComparer(Cu,Tu){return deepEqual(Cu,Tu,1)}function defaultComparer(Cu,Tu){return Object.is?Object.is(Cu,Tu):Cu===Tu?Cu!==0||1/Cu===1/Tu:Cu!==Cu&&Tu!==Tu}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(Cu,Tu,Pu){return isObservable(Cu)?Cu:Array.isArray(Cu)?observable.array(Cu,{name:Pu}):isPlainObject(Cu)?observable.object(Cu,void 0,{name:Pu}):isES6Map(Cu)?observable.map(Cu,{name:Pu}):isES6Set(Cu)?observable.set(Cu,{name:Pu}):typeof Cu=="function"&&!isAction(Cu)&&!isFlow(Cu)?isGenerator(Cu)?flow(Cu):autoAction(Pu,Cu):Cu}function shallowEnhancer(Cu,Tu,Pu){if(Cu==null||isObservableObject(Cu)||isObservableArray(Cu)||isObservableMap(Cu)||isObservableSet(Cu))return Cu;if(Array.isArray(Cu))return observable.array(Cu,{name:Pu,deep:!1});if(isPlainObject(Cu))return observable.object(Cu,void 0,{name:Pu,deep:!1});if(isES6Map(Cu))return observable.map(Cu,{name:Pu,deep:!1});if(isES6Set(Cu))return observable.set(Cu,{name:Pu,deep:!1})}function referenceEnhancer(Cu){return Cu}function refStructEnhancer(Cu,Tu){return deepEqual(Cu,Tu)?Tu:Cu}var OVERRIDE="override";function isOverride(Cu){return Cu.annotationType_===OVERRIDE}function createActionAnnotation(Cu,Tu){return{annotationType_:Cu,options_:Tu,make_:make_$1,extend_:extend_$1}}function make_$1(Cu,Tu,Pu,Bu){var Lu;if((Lu=this.options_)!=null&&Lu.bound)return this.extend_(Cu,Tu,Pu,!1)===null?0:1;if(Bu===Cu.target_)return this.extend_(Cu,Tu,Pu,!1)===null?0:2;if(isAction(Pu.value))return 1;var Ru=createActionDescriptor(Cu,this,Tu,Pu,!1);return defineProperty(Bu,Tu,Ru),2}function extend_$1(Cu,Tu,Pu,Bu){var Lu=createActionDescriptor(Cu,this,Tu,Pu);return Cu.defineProperty_(Tu,Lu,Bu)}function assertActionDescriptor(Cu,Tu,Pu,Bu){Tu.annotationType_,Bu.value}function createActionDescriptor(Cu,Tu,Pu,Bu,Lu){var Ru,Ou,Du,ku,Fu,Nu,Gu;Lu===void 0&&(Lu=globalState.safeDescriptors),assertActionDescriptor(Cu,Tu,Pu,Bu);var zu=Bu.value;if((Ru=Tu.options_)!=null&&Ru.bound){var Hu;zu=zu.bind((Hu=Cu.proxy_)!=null?Hu:Cu.target_)}return{value:createAction((Ou=(Du=Tu.options_)==null?void 0:Du.name)!=null?Ou:Pu.toString(),zu,(ku=(Fu=Tu.options_)==null?void 0:Fu.autoAction)!=null?ku:!1,(Nu=Tu.options_)!=null&&Nu.bound?(Gu=Cu.proxy_)!=null?Gu:Cu.target_:void 0),configurable:Lu?Cu.isPlainObject_:!0,enumerable:!1,writable:!Lu}}function createFlowAnnotation(Cu,Tu){return{annotationType_:Cu,options_:Tu,make_:make_$2,extend_:extend_$2}}function make_$2(Cu,Tu,Pu,Bu){var Lu;if(Bu===Cu.target_)return this.extend_(Cu,Tu,Pu,!1)===null?0:2;if((Lu=this.options_)!=null&&Lu.bound&&(!hasProp(Cu.target_,Tu)||!isFlow(Cu.target_[Tu]))&&this.extend_(Cu,Tu,Pu,!1)===null)return 0;if(isFlow(Pu.value))return 1;var Ru=createFlowDescriptor(Cu,this,Tu,Pu,!1,!1);return defineProperty(Bu,Tu,Ru),2}function extend_$2(Cu,Tu,Pu,Bu){var Lu,Ru=createFlowDescriptor(Cu,this,Tu,Pu,(Lu=this.options_)==null?void 0:Lu.bound);return Cu.defineProperty_(Tu,Ru,Bu)}function assertFlowDescriptor(Cu,Tu,Pu,Bu){Tu.annotationType_,Bu.value}function createFlowDescriptor(Cu,Tu,Pu,Bu,Lu,Ru){Ru===void 0&&(Ru=globalState.safeDescriptors),assertFlowDescriptor(Cu,Tu,Pu,Bu);var Ou=Bu.value;if(isFlow(Ou)||(Ou=flow(Ou)),Lu){var Du;Ou=Ou.bind((Du=Cu.proxy_)!=null?Du:Cu.target_),Ou.isMobXFlow=!0}return{value:Ou,configurable:Ru?Cu.isPlainObject_:!0,enumerable:!1,writable:!Ru}}function createComputedAnnotation(Cu,Tu){return{annotationType_:Cu,options_:Tu,make_:make_$3,extend_:extend_$3}}function make_$3(Cu,Tu,Pu){return this.extend_(Cu,Tu,Pu,!1)===null?0:1}function extend_$3(Cu,Tu,Pu,Bu){return assertComputedDescriptor(Cu,this,Tu,Pu),Cu.defineComputedProperty_(Tu,_extends({},this.options_,{get:Pu.get,set:Pu.set}),Bu)}function assertComputedDescriptor(Cu,Tu,Pu,Bu){Tu.annotationType_,Bu.get}function createObservableAnnotation(Cu,Tu){return{annotationType_:Cu,options_:Tu,make_:make_$4,extend_:extend_$4}}function make_$4(Cu,Tu,Pu){return this.extend_(Cu,Tu,Pu,!1)===null?0:1}function extend_$4(Cu,Tu,Pu,Bu){var Lu,Ru;return assertObservableDescriptor(Cu,this),Cu.defineObservableProperty_(Tu,Pu.value,(Lu=(Ru=this.options_)==null?void 0:Ru.enhancer)!=null?Lu:deepEnhancer,Bu)}function assertObservableDescriptor(Cu,Tu,Pu,Bu){Tu.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(Cu){return{annotationType_:AUTO,options_:Cu,make_:make_$5,extend_:extend_$5}}function make_$5(Cu,Tu,Pu,Bu){var Lu,Ru;if(Pu.get)return computed.make_(Cu,Tu,Pu,Bu);if(Pu.set){var Ou=createAction(Tu.toString(),Pu.set);return Bu===Cu.target_?Cu.defineProperty_(Tu,{configurable:globalState.safeDescriptors?Cu.isPlainObject_:!0,set:Ou})===null?0:2:(defineProperty(Bu,Tu,{configurable:!0,set:Ou}),2)}if(Bu!==Cu.target_&&typeof Pu.value=="function"){var Du;if(isGenerator(Pu.value)){var ku,Fu=(ku=this.options_)!=null&&ku.autoBind?flow.bound:flow;return Fu.make_(Cu,Tu,Pu,Bu)}var Nu=(Du=this.options_)!=null&&Du.autoBind?autoAction.bound:autoAction;return Nu.make_(Cu,Tu,Pu,Bu)}var Gu=((Lu=this.options_)==null?void 0:Lu.deep)===!1?observable.ref:observable;if(typeof Pu.value=="function"&&(Ru=this.options_)!=null&&Ru.autoBind){var zu;Pu.value=Pu.value.bind((zu=Cu.proxy_)!=null?zu:Cu.target_)}return Gu.make_(Cu,Tu,Pu,Bu)}function extend_$5(Cu,Tu,Pu,Bu){var Lu,Ru;if(Pu.get)return computed.extend_(Cu,Tu,Pu,Bu);if(Pu.set)return Cu.defineProperty_(Tu,{configurable:globalState.safeDescriptors?Cu.isPlainObject_:!0,set:createAction(Tu.toString(),Pu.set)},Bu);if(typeof Pu.value=="function"&&(Lu=this.options_)!=null&&Lu.autoBind){var Ou;Pu.value=Pu.value.bind((Ou=Cu.proxy_)!=null?Ou:Cu.target_)}var Du=((Ru=this.options_)==null?void 0:Ru.deep)===!1?observable.ref:observable;return Du.extend_(Cu,Tu,Pu,Bu)}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(Cu){return Cu||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(Cu){return Cu.deep===!0?deepEnhancer:Cu.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(Cu.defaultDecorator)}function getAnnotationFromOptions(Cu){var Tu;return Cu?(Tu=Cu.defaultDecorator)!=null?Tu:createAutoAnnotation(Cu):void 0}function getEnhancerFromAnnotation(Cu){var Tu,Pu;return Cu&&(Tu=(Pu=Cu.options_)==null?void 0:Pu.enhancer)!=null?Tu:deepEnhancer}function createObservable(Cu,Tu,Pu){if(isStringish(Tu)){storeAnnotation(Cu,Tu,observableAnnotation);return}return isObservable(Cu)?Cu:isPlainObject(Cu)?observable.object(Cu,Tu,Pu):Array.isArray(Cu)?observable.array(Cu,Tu):isES6Map(Cu)?observable.map(Cu,Tu):isES6Set(Cu)?observable.set(Cu,Tu):typeof Cu=="object"&&Cu!==null?Cu:observable.box(Cu,Tu)}Object.assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function Cu(Tu,Pu){var Bu=asCreateObservableOptions(Pu);return new ObservableValue(Tu,getEnhancerFromOptions(Bu),Bu.name,!0,Bu.equals)},array:function Cu(Tu,Pu){var Bu=asCreateObservableOptions(Pu);return(globalState.useProxies===!1||Bu.proxy===!1?createLegacyArray:createObservableArray)(Tu,getEnhancerFromOptions(Bu),Bu.name)},map:function Cu(Tu,Pu){var Bu=asCreateObservableOptions(Pu);return new ObservableMap(Tu,getEnhancerFromOptions(Bu),Bu.name)},set:function Cu(Tu,Pu){var Bu=asCreateObservableOptions(Pu);return new ObservableSet(Tu,getEnhancerFromOptions(Bu),Bu.name)},object:function Cu(Tu,Pu,Bu){return extendObservable(globalState.useProxies===!1||(Bu==null?void 0:Bu.proxy)===!1?asObservableObject({},Bu):asDynamicObservableObject({},Bu),Tu,Pu)},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function Cu(Tu,Pu){if(isStringish(Pu))return storeAnnotation(Tu,Pu,computedAnnotation);if(isPlainObject(Tu))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,Tu));var Bu=isPlainObject(Pu)?Pu:{};return Bu.get=Tu,Bu.name||(Bu.name=Tu.name||""),new ComputedValue(Bu)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(Cu,Tu,Pu,Bu){Pu===void 0&&(Pu=!1);function Lu(){return executeAction(Cu,Pu,Tu,Bu||this,arguments)}return Lu.isMobxAction=!0,isFunctionNameConfigurable&&(tmpNameDescriptor.value=Cu,Object.defineProperty(Lu,"name",tmpNameDescriptor)),Lu}function executeAction(Cu,Tu,Pu,Bu,Lu){var Ru=_startAction(Cu,Tu);try{return Pu.apply(Bu,Lu)}catch(Ou){throw Ru.error_=Ou,Ou}finally{_endAction(Ru)}}function _startAction(Cu,Tu,Pu,Bu){var Lu=!1,Ru=0,Ou=globalState.trackingDerivation,Du=!Tu||!Ou;startBatch();var ku=globalState.allowStateChanges;Du&&(untrackedStart(),ku=allowStateChangesStart(!0));var Fu=allowStateReadsStart(!0),Nu={runAsAction_:Du,prevDerivation_:Ou,prevAllowStateChanges_:ku,prevAllowStateReads_:Fu,notifySpy_:Lu,startTime_:Ru,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Nu.actionId_,Nu}function _endAction(Cu){currentActionId!==Cu.actionId_&&die(30),currentActionId=Cu.parentActionId_,Cu.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(Cu.prevAllowStateChanges_),allowStateReadsEnd(Cu.prevAllowStateReads_),endBatch(),Cu.runAsAction_&&untrackedEnd(Cu.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(Cu,Tu){var Pu=allowStateChangesStart(Cu);try{return Tu()}finally{allowStateChangesEnd(Pu)}}function allowStateChangesStart(Cu){var Tu=globalState.allowStateChanges;return globalState.allowStateChanges=Cu,Tu}function allowStateChangesEnd(Cu){globalState.allowStateChanges=Cu}var _Symbol$toPrimitive;_Symbol$toPrimitive=Symbol.toPrimitive;var ObservableValue=function(Cu){_inheritsLoose(Tu,Cu);function Tu(Bu,Lu,Ru,Ou,Du){var ku;return Ru===void 0&&(Ru="ObservableValue"),Du===void 0&&(Du=comparer.default),ku=Cu.call(this,Ru)||this,ku.enhancer=void 0,ku.name_=void 0,ku.equals=void 0,ku.hasUnreportedChange_=!1,ku.interceptors_=void 0,ku.changeListeners_=void 0,ku.value_=void 0,ku.dehancer=void 0,ku.enhancer=Lu,ku.name_=Ru,ku.equals=Du,ku.value_=Lu(Bu,void 0,Ru),ku}var Pu=Tu.prototype;return Pu.dehanceValue=function(Lu){return this.dehancer!==void 0?this.dehancer(Lu):Lu},Pu.set=function(Lu){this.value_,Lu=this.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED&&this.setNewValue_(Lu)},Pu.prepareNewValue_=function(Lu){if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this,type:UPDATE,newValue:Lu});if(!Ru)return globalState.UNCHANGED;Lu=Ru.newValue}return Lu=this.enhancer(Lu,this.value_,this.name_),this.equals(this.value_,Lu)?globalState.UNCHANGED:Lu},Pu.setNewValue_=function(Lu){var Ru=this.value_;this.value_=Lu,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Lu,oldValue:Ru})},Pu.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},Pu.intercept_=function(Lu){return registerInterceptor(this,Lu)},Pu.observe_=function(Lu,Ru){return Ru&&Lu({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Lu)},Pu.raw=function(){return this.value_},Pu.toJSON=function(){return this.get()},Pu.toString=function(){return this.name_+"["+this.value_+"]"},Pu.valueOf=function(){return toPrimitive(this.get())},Pu[_Symbol$toPrimitive]=function(){return this.valueOf()},Tu}(Atom),_Symbol$toPrimitive$1;_Symbol$toPrimitive$1=Symbol.toPrimitive;var ComputedValue=function(){function Cu(Pu){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,Pu.get||die(31),this.derivation=Pu.get,this.name_=Pu.name||"ComputedValue",Pu.set&&(this.setter_=createAction("ComputedValue-setter",Pu.set)),this.equals_=Pu.equals||(Pu.compareStructural||Pu.struct?comparer.structural:comparer.default),this.scope_=Pu.context,this.requiresReaction_=Pu.requiresReaction,this.keepAlive_=!!Pu.keepAlive}var Tu=Cu.prototype;return Tu.onBecomeStale_=function(){propagateMaybeChanged(this)},Tu.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Bu){return Bu()})},Tu.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Bu){return Bu()})},Tu.get=function(){if(this.isComputing_&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Bu=globalState.trackingContext;this.keepAlive_&&!Bu&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Bu}var Lu=this.value_;if(isCaughtException(Lu))throw Lu.cause;return Lu},Tu.set=function(Bu){if(this.setter_){this.isRunningSetter_&&die(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,Bu)}finally{this.isRunningSetter_=!1}}else die(34,this.name_)},Tu.trackAndCompute=function(){var Bu=this.value_,Lu=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Ru=this.computeValue_(!0),Ou=Lu||isCaughtException(Bu)||isCaughtException(Ru)||!this.equals_(Bu,Ru);return Ou&&(this.value_=Ru),Ou},Tu.computeValue_=function(Bu){this.isComputing_=!0;var Lu=allowStateChangesStart(!1),Ru;if(Bu)Ru=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Ru=this.derivation.call(this.scope_);else try{Ru=this.derivation.call(this.scope_)}catch(Ou){Ru=new CaughtException(Ou)}return allowStateChangesEnd(Lu),this.isComputing_=!1,Ru},Tu.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},Tu.observe_=function(Bu,Lu){var Ru=this,Ou=!0,Du=void 0;return autorun(function(){var ku=Ru.get();if(!Ou||Lu){var Fu=untrackedStart();Bu({observableKind:"computed",debugObjectName:Ru.name_,type:UPDATE,object:Ru,newValue:ku,oldValue:Du}),untrackedEnd(Fu)}Ou=!1,Du=ku})},Tu.warnAboutUntrackedRead_=function(){},Tu.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},Tu.valueOf=function(){return toPrimitive(this.get())},Tu[_Symbol$toPrimitive$1]=function(){return this.valueOf()},Cu}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(Cu){Cu[Cu.NOT_TRACKING_=-1]="NOT_TRACKING_",Cu[Cu.UP_TO_DATE_=0]="UP_TO_DATE_",Cu[Cu.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",Cu[Cu.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(Cu){Cu[Cu.NONE=0]="NONE",Cu[Cu.LOG=1]="LOG",Cu[Cu.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function Cu(Tu){this.cause=void 0,this.cause=Tu};function isCaughtException(Cu){return Cu instanceof CaughtException}function shouldCompute(Cu){switch(Cu.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var Tu=allowStateReadsStart(!0),Pu=untrackedStart(),Bu=Cu.observing_,Lu=Bu.length,Ru=0;Ru<Lu;Ru++){var Ou=Bu[Ru];if(isComputedValue(Ou)){if(globalState.disableErrorBoundaries)Ou.get();else try{Ou.get()}catch{return untrackedEnd(Pu),allowStateReadsEnd(Tu),!0}if(Cu.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(Pu),allowStateReadsEnd(Tu),!0}}return changeDependenciesStateTo0(Cu),untrackedEnd(Pu),allowStateReadsEnd(Tu),!1}}}function checkIfStateModificationsAreAllowed(Cu){}function trackDerivedFunction(Cu,Tu,Pu){var Bu=allowStateReadsStart(!0);changeDependenciesStateTo0(Cu),Cu.newObserving_=new Array(Cu.observing_.length+100),Cu.unboundDepsCount_=0,Cu.runId_=++globalState.runId;var Lu=globalState.trackingDerivation;globalState.trackingDerivation=Cu,globalState.inBatch++;var Ru;if(globalState.disableErrorBoundaries===!0)Ru=Tu.call(Pu);else try{Ru=Tu.call(Pu)}catch(Ou){Ru=new CaughtException(Ou)}return globalState.inBatch--,globalState.trackingDerivation=Lu,bindDependencies(Cu),allowStateReadsEnd(Bu),Ru}function bindDependencies(Cu){for(var Tu=Cu.observing_,Pu=Cu.observing_=Cu.newObserving_,Bu=IDerivationState_.UP_TO_DATE_,Lu=0,Ru=Cu.unboundDepsCount_,Ou=0;Ou<Ru;Ou++){var Du=Pu[Ou];Du.diffValue_===0&&(Du.diffValue_=1,Lu!==Ou&&(Pu[Lu]=Du),Lu++),Du.dependenciesState_>Bu&&(Bu=Du.dependenciesState_)}for(Pu.length=Lu,Cu.newObserving_=null,Ru=Tu.length;Ru--;){var ku=Tu[Ru];ku.diffValue_===0&&removeObserver(ku,Cu),ku.diffValue_=0}for(;Lu--;){var Fu=Pu[Lu];Fu.diffValue_===1&&(Fu.diffValue_=0,addObserver(Fu,Cu))}Bu!==IDerivationState_.UP_TO_DATE_&&(Cu.dependenciesState_=Bu,Cu.onBecomeStale_())}function clearObserving(Cu){var Tu=Cu.observing_;Cu.observing_=[];for(var Pu=Tu.length;Pu--;)removeObserver(Tu[Pu],Cu);Cu.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(Cu){var Tu=untrackedStart();try{return Cu()}finally{untrackedEnd(Tu)}}function untrackedStart(){var Cu=globalState.trackingDerivation;return globalState.trackingDerivation=null,Cu}function untrackedEnd(Cu){globalState.trackingDerivation=Cu}function allowStateReadsStart(Cu){var Tu=globalState.allowStateReads;return globalState.allowStateReads=Cu,Tu}function allowStateReadsEnd(Cu){globalState.allowStateReads=Cu}function changeDependenciesStateTo0(Cu){if(Cu.dependenciesState_!==IDerivationState_.UP_TO_DATE_){Cu.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var Tu=Cu.observing_,Pu=Tu.length;Pu--;)Tu[Pu].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function Cu(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var Cu=getGlobal();return Cu.__mobxInstanceCount>0&&!Cu.__mobxGlobals&&(canMergeGlobalState=!1),Cu.__mobxGlobals&&Cu.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?Cu.__mobxGlobals?(Cu.__mobxInstanceCount+=1,Cu.__mobxGlobals.UNCHANGED||(Cu.__mobxGlobals.UNCHANGED={}),Cu.__mobxGlobals):(Cu.__mobxInstanceCount=1,Cu.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var Cu=getGlobal();--Cu.__mobxInstanceCount===0&&(Cu.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(Cu,Tu){Cu.observers_.add(Tu),Cu.lowestObserverState_>Tu.dependenciesState_&&(Cu.lowestObserverState_=Tu.dependenciesState_)}function removeObserver(Cu,Tu){Cu.observers_.delete(Tu),Cu.observers_.size===0&&queueForUnobservation(Cu)}function queueForUnobservation(Cu){Cu.isPendingUnobservation_===!1&&(Cu.isPendingUnobservation_=!0,globalState.pendingUnobservations.push(Cu))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var Cu=globalState.pendingUnobservations,Tu=0;Tu<Cu.length;Tu++){var Pu=Cu[Tu];Pu.isPendingUnobservation_=!1,Pu.observers_.size===0&&(Pu.isBeingObserved_&&(Pu.isBeingObserved_=!1,Pu.onBUO()),Pu instanceof ComputedValue&&Pu.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(Cu){var Tu=globalState.trackingDerivation;return Tu!==null?(Tu.runId_!==Cu.lastAccessedBy_&&(Cu.lastAccessedBy_=Tu.runId_,Tu.newObserving_[Tu.unboundDepsCount_++]=Cu,!Cu.isBeingObserved_&&globalState.trackingContext&&(Cu.isBeingObserved_=!0,Cu.onBO())),!0):(Cu.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(Cu),!1)}function propagateChanged(Cu){Cu.lowestObserverState_!==IDerivationState_.STALE_&&(Cu.lowestObserverState_=IDerivationState_.STALE_,Cu.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&Tu.onBecomeStale_(),Tu.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(Cu){Cu.lowestObserverState_!==IDerivationState_.STALE_&&(Cu.lowestObserverState_=IDerivationState_.STALE_,Cu.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?Tu.dependenciesState_=IDerivationState_.STALE_:Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(Cu.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(Cu){Cu.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(Cu.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,Cu.observers_.forEach(function(Tu){Tu.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(Tu.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,Tu.onBecomeStale_())}))}var Reaction=function(){function Cu(Pu,Bu,Lu,Ru){Pu===void 0&&(Pu="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=TraceMode.NONE,this.name_=Pu,this.onInvalidate_=Bu,this.errorHandler_=Lu,this.requiresObservable_=Ru}var Tu=Cu.prototype;return Tu.onBecomeStale_=function(){this.schedule_()},Tu.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,globalState.pendingReactions.push(this),runReactions())},Tu.isScheduled=function(){return this.isScheduled_},Tu.runReaction_=function(){if(!this.isDisposed_){startBatch(),this.isScheduled_=!1;var Bu=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Lu){this.reportExceptionInDerivation_(Lu)}}globalState.trackingContext=Bu,endBatch()}},Tu.track=function(Bu){if(!this.isDisposed_){startBatch(),this.isRunning_=!0;var Lu=globalState.trackingContext;globalState.trackingContext=this;var Ru=trackDerivedFunction(this,Bu,void 0);globalState.trackingContext=Lu,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&clearObserving(this),isCaughtException(Ru)&&this.reportExceptionInDerivation_(Ru.cause),endBatch()}},Tu.reportExceptionInDerivation_=function(Bu){var Lu=this;if(this.errorHandler_){this.errorHandler_(Bu,this);return}if(globalState.disableErrorBoundaries)throw Bu;var Ru="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Ru,Bu),globalState.globalReactionErrorHandlers.forEach(function(Ou){return Ou(Bu,Lu)})},Tu.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(startBatch(),clearObserving(this),endBatch()))},Tu.getDisposer_=function(){var Bu=this.dispose.bind(this);return Bu[$mobx]=this,Bu},Tu.toString=function(){return"Reaction["+this.name_+"]"},Tu.trace=function(Bu){Bu===void 0&&(Bu=!1),trace(this,Bu)},Cu}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function Cu(Tu){return Tu()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var Cu=globalState.pendingReactions,Tu=0;Cu.length>0;){++Tu===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+Cu[0]),Cu.splice(0));for(var Pu=Cu.splice(0),Bu=0,Lu=Pu.length;Bu<Lu;Bu++)Pu[Bu].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(Cu){var Tu=reactionScheduler;reactionScheduler=function(Bu){return Cu(function(){return Tu(Bu)})}}function isSpyEnabled(){return!1}function spyReport(Cu){}function spyReportStart(Cu){}function spyReportEnd(Cu){}function spy(Cu){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(Cu){var Tu=function(Bu,Lu){if(isFunction(Bu))return createAction(Bu.name||DEFAULT_ACTION_NAME,Bu,Cu);if(isFunction(Lu))return createAction(Bu,Lu,Cu);if(isStringish(Lu))return storeAnnotation(Bu,Lu,Cu?autoActionAnnotation:actionAnnotation);if(isStringish(Bu))return createDecoratorAnnotation(createActionAnnotation(Cu?AUTOACTION:ACTION,{name:Bu,autoAction:Cu}))};return Tu}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(Cu){return executeAction(Cu.name||DEFAULT_ACTION_NAME,!1,Cu,this,void 0)}function isAction(Cu){return isFunction(Cu)&&Cu.isMobxAction===!0}function autorun(Cu,Tu){var Pu,Bu;Tu===void 0&&(Tu=EMPTY_OBJECT);var Lu=(Pu=(Bu=Tu)==null?void 0:Bu.name)!=null?Pu:"Autorun",Ru=!Tu.scheduler&&!Tu.delay,Ou;if(Ru)Ou=new Reaction(Lu,function(){this.track(Fu)},Tu.onError,Tu.requiresObservable);else{var Du=createSchedulerFromOptions(Tu),ku=!1;Ou=new Reaction(Lu,function(){ku||(ku=!0,Du(function(){ku=!1,Ou.isDisposed_||Ou.track(Fu)}))},Tu.onError,Tu.requiresObservable)}function Fu(){Cu(Ou)}return Ou.schedule_(),Ou.getDisposer_()}var run=function Cu(Tu){return Tu()};function createSchedulerFromOptions(Cu){return Cu.scheduler?Cu.scheduler:Cu.delay?function(Tu){return setTimeout(Tu,Cu.delay)}:run}function reaction(Cu,Tu,Pu){var Bu;Pu===void 0&&(Pu=EMPTY_OBJECT);var Lu=(Bu=Pu.name)!=null?Bu:"Reaction",Ru=action(Lu,Pu.onError?wrapErrorHandler(Pu.onError,Tu):Tu),Ou=!Pu.scheduler&&!Pu.delay,Du=createSchedulerFromOptions(Pu),ku=!0,Fu=!1,Nu,Gu,zu=Pu.compareStructural?comparer.structural:Pu.equals||comparer.default,Hu=new Reaction(Lu,function(){ku||Ou?Wu():Fu||(Fu=!0,Du(Wu))},Pu.onError,Pu.requiresObservable);function Wu(){if(Fu=!1,!Hu.isDisposed_){var _h=!1;Hu.track(function(){var Xc=allowStateChanges(!1,function(){return Cu(Hu)});_h=ku||!zu(Nu,Xc),Gu=Nu,Nu=Xc}),(ku&&Pu.fireImmediately||!ku&&_h)&&Ru(Nu,Gu,Hu),ku=!1}}return Hu.schedule_(),Hu.getDisposer_()}function wrapErrorHandler(Cu,Tu){return function(){try{return Tu.apply(this,arguments)}catch(Pu){Cu.call(this,Pu)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(Cu,Tu,Pu){return interceptHook(ON_BECOME_OBSERVED,Cu,Tu,Pu)}function onBecomeUnobserved(Cu,Tu,Pu){return interceptHook(ON_BECOME_UNOBSERVED,Cu,Tu,Pu)}function interceptHook(Cu,Tu,Pu,Bu){var Lu=typeof Bu=="function"?getAtom(Tu,Pu):getAtom(Tu),Ru=isFunction(Bu)?Bu:Pu,Ou=Cu+"L";return Lu[Ou]?Lu[Ou].add(Ru):Lu[Ou]=new Set([Ru]),function(){var Du=Lu[Ou];Du&&(Du.delete(Ru),Du.size===0&&delete Lu[Ou])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(Cu){Cu.isolateGlobalState===!0&&isolateGlobalState();var Tu=Cu.useProxies,Pu=Cu.enforceActions;if(Tu!==void 0&&(globalState.useProxies=Tu===ALWAYS?!0:Tu===NEVER?!1:typeof Proxy!="undefined"),Tu==="ifavailable"&&(globalState.verifyProxies=!0),Pu!==void 0){var Bu=Pu===ALWAYS?ALWAYS:Pu===OBSERVED;globalState.enforceActions=Bu,globalState.allowStateChanges=!(Bu===!0||Bu===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Lu){Lu in Cu&&(globalState[Lu]=!!Cu[Lu])}),globalState.allowStateReads=!globalState.observableRequiresReaction,Cu.reactionScheduler&&setReactionScheduler(Cu.reactionScheduler)}function extendObservable(Cu,Tu,Pu,Bu){var Lu=getOwnPropertyDescriptors(Tu),Ru=asObservableObject(Cu,Bu)[$mobx];startBatch();try{ownKeys(Lu).forEach(function(Ou){Ru.extend_(Ou,Lu[Ou],Pu&&Ou in Pu?Pu[Ou]:!0)})}finally{endBatch()}return Cu}function getDependencyTree(Cu,Tu){return nodeToDependencyTree(getAtom(Cu,Tu))}function nodeToDependencyTree(Cu){var Tu={name:Cu.name_};return Cu.observing_&&Cu.observing_.length>0&&(Tu.dependencies=unique(Cu.observing_).map(nodeToDependencyTree)),Tu}function unique(Cu){return Array.from(new Set(Cu))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function Cu(Tu,Pu){if(isStringish(Pu))return storeAnnotation(Tu,Pu,flowAnnotation);var Bu=Tu,Lu=Bu.name||"<unnamed flow>",Ru=function(){var Du=this,ku=arguments,Fu=++generatorId,Nu=action(Lu+" - runid: "+Fu+" - init",Bu).apply(Du,ku),Gu,zu=void 0,Hu=new Promise(function(Wu,_h){var Xc=0;Gu=_h;function ju(ep){zu=void 0;var tp;try{tp=action(Lu+" - runid: "+Fu+" - yield "+Xc++,Nu.next).call(Nu,ep)}catch(op){return _h(op)}_f(tp)}function _c(ep){zu=void 0;var tp;try{tp=action(Lu+" - runid: "+Fu+" - yield "+Xc++,Nu.throw).call(Nu,ep)}catch(op){return _h(op)}_f(tp)}function _f(ep){if(isFunction(ep==null?void 0:ep.then)){ep.then(_f,_h);return}return ep.done?Wu(ep.value):(zu=Promise.resolve(ep.value),zu.then(ju,_c))}ju(void 0)});return Hu.cancel=action(Lu+" - runid: "+Fu+" - cancel",function(){try{zu&&cancelPromise(zu);var Wu=Nu.return(void 0),_h=Promise.resolve(Wu.value);_h.then(noop,noop),cancelPromise(_h),Gu(new FlowCancellationError)}catch(Xc){Gu(Xc)}}),Hu};return Ru.isMobXFlow=!0,Ru},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(Cu){isFunction(Cu.cancel)&&Cu.cancel()}function isFlow(Cu){return(Cu==null?void 0:Cu.isMobXFlow)===!0}function _isObservable(Cu,Tu){return Cu?Tu!==void 0?isObservableObject(Cu)?Cu[$mobx].values_.has(Tu):!1:isObservableObject(Cu)||!!Cu[$mobx]||isAtom(Cu)||isReaction(Cu)||isComputedValue(Cu):!1}function isObservable(Cu){return _isObservable(Cu)}function trace(){die("trace() is not available in production builds");for(var Cu=!1,Tu=arguments.length,Pu=new Array(Tu),Bu=0;Bu<Tu;Bu++)Pu[Bu]=arguments[Bu];typeof Pu[Pu.length-1]=="boolean"&&(Cu=Pu.pop());var Lu=getAtomFromArgs(Pu);if(!Lu)return die("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");Lu.isTracing_===TraceMode.NONE&&console.log("[mobx.trace] '"+Lu.name_+"' tracing enabled"),Lu.isTracing_=Cu?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(Cu){switch(Cu.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(Cu[0]);case 2:return getAtom(Cu[0],Cu[1])}}function transaction(Cu,Tu){Tu===void 0&&(Tu=void 0),startBatch();try{return Cu.apply(Tu)}finally{endBatch()}}function getAdm(Cu){return Cu[$mobx]}var objectProxyTraps={has:function Cu(Tu,Pu){return getAdm(Tu).has_(Pu)},get:function Cu(Tu,Pu){return getAdm(Tu).get_(Pu)},set:function Cu(Tu,Pu,Bu){var Lu;return isStringish(Pu)?(Lu=getAdm(Tu).set_(Pu,Bu,!0))!=null?Lu:!0:!1},deleteProperty:function Cu(Tu,Pu){var Bu;return isStringish(Pu)?(Bu=getAdm(Tu).delete_(Pu,!0))!=null?Bu:!0:!1},defineProperty:function Cu(Tu,Pu,Bu){var Lu;return(Lu=getAdm(Tu).defineProperty_(Pu,Bu))!=null?Lu:!0},ownKeys:function Cu(Tu){return getAdm(Tu).ownKeys_()},preventExtensions:function Cu(Tu){die(13)}};function asDynamicObservableObject(Cu,Tu){var Pu,Bu;return assertProxies(),Cu=asObservableObject(Cu,Tu),(Bu=(Pu=Cu[$mobx]).proxy_)!=null?Bu:Pu.proxy_=new Proxy(Cu,objectProxyTraps)}function hasInterceptors(Cu){return Cu.interceptors_!==void 0&&Cu.interceptors_.length>0}function registerInterceptor(Cu,Tu){var Pu=Cu.interceptors_||(Cu.interceptors_=[]);return Pu.push(Tu),once(function(){var Bu=Pu.indexOf(Tu);Bu!==-1&&Pu.splice(Bu,1)})}function interceptChange(Cu,Tu){var Pu=untrackedStart();try{for(var Bu=[].concat(Cu.interceptors_||[]),Lu=0,Ru=Bu.length;Lu<Ru&&(Tu=Bu[Lu](Tu),Tu&&!Tu.type&&die(14),!!Tu);Lu++);return Tu}finally{untrackedEnd(Pu)}}function hasListeners(Cu){return Cu.changeListeners_!==void 0&&Cu.changeListeners_.length>0}function registerListener(Cu,Tu){var Pu=Cu.changeListeners_||(Cu.changeListeners_=[]);return Pu.push(Tu),once(function(){var Bu=Pu.indexOf(Tu);Bu!==-1&&Pu.splice(Bu,1)})}function notifyListeners(Cu,Tu){var Pu=untrackedStart(),Bu=Cu.changeListeners_;if(!!Bu){Bu=Bu.slice();for(var Lu=0,Ru=Bu.length;Lu<Ru;Lu++)Bu[Lu](Tu);untrackedEnd(Pu)}}function makeObservable(Cu,Tu,Pu){var Bu=asObservableObject(Cu,Pu)[$mobx];startBatch();try{var Lu;(Lu=Tu)!=null||(Tu=collectStoredAnnotations(Cu)),ownKeys(Tu).forEach(function(Ru){return Bu.make_(Ru,Tu[Ru])})}finally{endBatch()}return Cu}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function Cu(Tu,Pu){var Bu=Tu[$mobx];return Pu===$mobx?Bu:Pu==="length"?Bu.getArrayLength_():typeof Pu=="string"&&!isNaN(Pu)?Bu.get_(parseInt(Pu)):hasProp(arrayExtensions,Pu)?arrayExtensions[Pu]:Tu[Pu]},set:function Cu(Tu,Pu,Bu){var Lu=Tu[$mobx];return Pu==="length"&&Lu.setArrayLength_(Bu),typeof Pu=="symbol"||isNaN(Pu)?Tu[Pu]=Bu:Lu.set_(parseInt(Pu),Bu),!0},preventExtensions:function Cu(){die(15)}},ObservableArrayAdministration=function(){function Cu(Pu,Bu,Lu,Ru){Pu===void 0&&(Pu="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Lu,this.legacyMode_=Ru,this.atom_=new Atom(Pu),this.enhancer_=function(Ou,Du){return Bu(Ou,Du,"ObservableArray[..]")}}var Tu=Cu.prototype;return Tu.dehanceValue_=function(Bu){return this.dehancer!==void 0?this.dehancer(Bu):Bu},Tu.dehanceValues_=function(Bu){return this.dehancer!==void 0&&Bu.length>0?Bu.map(this.dehancer):Bu},Tu.intercept_=function(Bu){return registerInterceptor(this,Bu)},Tu.observe_=function(Bu,Lu){return Lu===void 0&&(Lu=!1),Lu&&Bu({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Bu)},Tu.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},Tu.setArrayLength_=function(Bu){(typeof Bu!="number"||isNaN(Bu)||Bu<0)&&die("Out of range: "+Bu);var Lu=this.values_.length;if(Bu!==Lu)if(Bu>Lu){for(var Ru=new Array(Bu-Lu),Ou=0;Ou<Bu-Lu;Ou++)Ru[Ou]=void 0;this.spliceWithArray_(Lu,0,Ru)}else this.spliceWithArray_(Bu,Lu-Bu)},Tu.updateArrayLength_=function(Bu,Lu){Bu!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Lu,this.legacyMode_&&Lu>0&&reserveArrayBuffer(Bu+Lu+1)},Tu.spliceWithArray_=function(Bu,Lu,Ru){var Ou=this;this.atom_;var Du=this.values_.length;if(Bu===void 0?Bu=0:Bu>Du?Bu=Du:Bu<0&&(Bu=Math.max(0,Du+Bu)),arguments.length===1?Lu=Du-Bu:Lu==null?Lu=0:Lu=Math.max(0,Math.min(Lu,Du-Bu)),Ru===void 0&&(Ru=EMPTY_ARRAY),hasInterceptors(this)){var ku=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Bu,removedCount:Lu,added:Ru});if(!ku)return EMPTY_ARRAY;Lu=ku.removedCount,Ru=ku.added}if(Ru=Ru.length===0?Ru:Ru.map(function(Gu){return Ou.enhancer_(Gu,void 0)}),this.legacyMode_){var Fu=Ru.length-Lu;this.updateArrayLength_(Du,Fu)}var Nu=this.spliceItemsIntoValues_(Bu,Lu,Ru);return(Lu!==0||Ru.length!==0)&&this.notifyArraySplice_(Bu,Ru,Nu),this.dehanceValues_(Nu)},Tu.spliceItemsIntoValues_=function(Bu,Lu,Ru){if(Ru.length<MAX_SPLICE_SIZE){var Ou;return(Ou=this.values_).splice.apply(Ou,[Bu,Lu].concat(Ru))}else{var Du=this.values_.slice(Bu,Bu+Lu),ku=this.values_.slice(Bu+Lu);this.values_.length+=Ru.length-Lu;for(var Fu=0;Fu<Ru.length;Fu++)this.values_[Bu+Fu]=Ru[Fu];for(var Nu=0;Nu<ku.length;Nu++)this.values_[Bu+Ru.length+Nu]=ku[Nu];return Du}},Tu.notifyArrayChildUpdate_=function(Bu,Lu,Ru){var Ou=!this.owned_&&isSpyEnabled(),Du=hasListeners(this),ku=Du||Ou?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Bu,newValue:Lu,oldValue:Ru}:null;this.atom_.reportChanged(),Du&&notifyListeners(this,ku)},Tu.notifyArraySplice_=function(Bu,Lu,Ru){var Ou=!this.owned_&&isSpyEnabled(),Du=hasListeners(this),ku=Du||Ou?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Bu,removed:Ru,added:Lu,removedCount:Ru.length,addedCount:Lu.length}:null;this.atom_.reportChanged(),Du&&notifyListeners(this,ku)},Tu.get_=function(Bu){if(Bu<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Bu]);console.warn("[mobx.array] Attempt to read an array index ("+Bu+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},Tu.set_=function(Bu,Lu){var Ru=this.values_;if(Bu<Ru.length){this.atom_;var Ou=Ru[Bu];if(hasInterceptors(this)){var Du=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Bu,newValue:Lu});if(!Du)return;Lu=Du.newValue}Lu=this.enhancer_(Lu,Ou);var ku=Lu!==Ou;ku&&(Ru[Bu]=Lu,this.notifyArrayChildUpdate_(Bu,Lu,Ou))}else Bu===Ru.length?this.spliceWithArray_(Bu,0,[Lu]):die(17,Bu,Ru.length)},Cu}();function createObservableArray(Cu,Tu,Pu,Bu){Pu===void 0&&(Pu="ObservableArray"),Bu===void 0&&(Bu=!1),assertProxies();var Lu=new ObservableArrayAdministration(Pu,Tu,Bu,!1);addHiddenFinalProp(Lu.values_,$mobx,Lu);var Ru=new Proxy(Lu.values_,arrayTraps);if(Lu.proxy_=Ru,Cu&&Cu.length){var Ou=allowStateChangesStart(!0);Lu.spliceWithArray_(0,0,Cu),allowStateChangesEnd(Ou)}return Ru}var arrayExtensions={clear:function Cu(){return this.splice(0)},replace:function Cu(Tu){var Pu=this[$mobx];return Pu.spliceWithArray_(0,Pu.values_.length,Tu)},toJSON:function Cu(){return this.slice()},splice:function Cu(Tu,Pu){for(var Bu=arguments.length,Lu=new Array(Bu>2?Bu-2:0),Ru=2;Ru<Bu;Ru++)Lu[Ru-2]=arguments[Ru];var Ou=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Ou.spliceWithArray_(Tu);case 2:return Ou.spliceWithArray_(Tu,Pu)}return Ou.spliceWithArray_(Tu,Pu,Lu)},spliceWithArray:function Cu(Tu,Pu,Bu){return this[$mobx].spliceWithArray_(Tu,Pu,Bu)},push:function Cu(){for(var Tu=this[$mobx],Pu=arguments.length,Bu=new Array(Pu),Lu=0;Lu<Pu;Lu++)Bu[Lu]=arguments[Lu];return Tu.spliceWithArray_(Tu.values_.length,0,Bu),Tu.values_.length},pop:function Cu(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function Cu(){return this.splice(0,1)[0]},unshift:function Cu(){for(var Tu=this[$mobx],Pu=arguments.length,Bu=new Array(Pu),Lu=0;Lu<Pu;Lu++)Bu[Lu]=arguments[Lu];return Tu.spliceWithArray_(0,0,Bu),Tu.values_.length},reverse:function Cu(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function Cu(){globalState.trackingDerivation&&die(37,"sort");var Tu=this.slice();return Tu.sort.apply(Tu,arguments),this.replace(Tu),this},remove:function Cu(Tu){var Pu=this[$mobx],Bu=Pu.dehanceValues_(Pu.values_).indexOf(Tu);return Bu>-1?(this.splice(Bu,1),!0):!1}};addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(Cu,Tu){typeof Array.prototype[Cu]=="function"&&(arrayExtensions[Cu]=Tu(Cu))}function simpleFunc(Cu){return function(){var Tu=this[$mobx];Tu.atom_.reportObserved();var Pu=Tu.dehanceValues_(Tu.values_);return Pu[Cu].apply(Pu,arguments)}}function mapLikeFunc(Cu){return function(Tu,Pu){var Bu=this,Lu=this[$mobx];Lu.atom_.reportObserved();var Ru=Lu.dehanceValues_(Lu.values_);return Ru[Cu](function(Ou,Du){return Tu.call(Pu,Ou,Du,Bu)})}}function reduceLikeFunc(Cu){return function(){var Tu=this,Pu=this[$mobx];Pu.atom_.reportObserved();var Bu=Pu.dehanceValues_(Pu.values_),Lu=arguments[0];return arguments[0]=function(Ru,Ou,Du){return Lu(Ru,Ou,Du,Tu)},Bu[Cu].apply(Bu,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(Cu){return isObject(Cu)&&isObservableArrayAdministration(Cu[$mobx])}var _Symbol$iterator,_Symbol$toStringTag,ObservableMapMarker={},ADD="add",DELETE="delete";_Symbol$iterator=Symbol.iterator;_Symbol$toStringTag=Symbol.toStringTag;var ObservableMap=function(){function Cu(Pu,Bu,Lu){var Ru=this;Bu===void 0&&(Bu=deepEnhancer),Lu===void 0&&(Lu="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Bu,this.name_=Lu,isFunction(Map)||die(18),this.keysAtom_=createAtom("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,allowStateChanges(!0,function(){Ru.merge(Pu)})}var Tu=Cu.prototype;return Tu.has_=function(Bu){return this.data_.has(Bu)},Tu.has=function(Bu){var Lu=this;if(!globalState.trackingDerivation)return this.has_(Bu);var Ru=this.hasMap_.get(Bu);if(!Ru){var Ou=Ru=new ObservableValue(this.has_(Bu),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Bu,Ou),onBecomeUnobserved(Ou,function(){return Lu.hasMap_.delete(Bu)})}return Ru.get()},Tu.set=function(Bu,Lu){var Ru=this.has_(Bu);if(hasInterceptors(this)){var Ou=interceptChange(this,{type:Ru?UPDATE:ADD,object:this,newValue:Lu,name:Bu});if(!Ou)return this;Lu=Ou.newValue}return Ru?this.updateValue_(Bu,Lu):this.addValue_(Bu,Lu),this},Tu.delete=function(Bu){var Lu=this;if(this.keysAtom_,hasInterceptors(this)){var Ru=interceptChange(this,{type:DELETE,object:this,name:Bu});if(!Ru)return!1}if(this.has_(Bu)){var Ou=isSpyEnabled(),Du=hasListeners(this),ku=Du||Ou?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Bu).value_,name:Bu}:null;return transaction(function(){var Fu;Lu.keysAtom_.reportChanged(),(Fu=Lu.hasMap_.get(Bu))==null||Fu.setNewValue_(!1);var Nu=Lu.data_.get(Bu);Nu.setNewValue_(void 0),Lu.data_.delete(Bu)}),Du&&notifyListeners(this,ku),!0}return!1},Tu.updateValue_=function(Bu,Lu){var Ru=this.data_.get(Bu);if(Lu=Ru.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED){var Ou=isSpyEnabled(),Du=hasListeners(this),ku=Du||Ou?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Ru.value_,name:Bu,newValue:Lu}:null;Ru.setNewValue_(Lu),Du&&notifyListeners(this,ku)}},Tu.addValue_=function(Bu,Lu){var Ru=this;this.keysAtom_,transaction(function(){var Fu,Nu=new ObservableValue(Lu,Ru.enhancer_,"ObservableMap.key",!1);Ru.data_.set(Bu,Nu),Lu=Nu.value_,(Fu=Ru.hasMap_.get(Bu))==null||Fu.setNewValue_(!0),Ru.keysAtom_.reportChanged()});var Ou=isSpyEnabled(),Du=hasListeners(this),ku=Du||Ou?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Bu,newValue:Lu}:null;Du&&notifyListeners(this,ku)},Tu.get=function(Bu){return this.has(Bu)?this.dehanceValue_(this.data_.get(Bu).get()):this.dehanceValue_(void 0)},Tu.dehanceValue_=function(Bu){return this.dehancer!==void 0?this.dehancer(Bu):Bu},Tu.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},Tu.values=function(){var Bu=this,Lu=this.keys();return makeIterable({next:function(){var Ou=Lu.next(),Du=Ou.done,ku=Ou.value;return{done:Du,value:Du?void 0:Bu.get(ku)}}})},Tu.entries=function(){var Bu=this,Lu=this.keys();return makeIterable({next:function(){var Ou=Lu.next(),Du=Ou.done,ku=Ou.value;return{done:Du,value:Du?void 0:[ku,Bu.get(ku)]}}})},Tu[_Symbol$iterator]=function(){return this.entries()},Tu.forEach=function(Bu,Lu){for(var Ru=_createForOfIteratorHelperLoose(this),Ou;!(Ou=Ru()).done;){var Du=Ou.value,ku=Du[0],Fu=Du[1];Bu.call(Lu,Fu,ku,this)}},Tu.merge=function(Bu){var Lu=this;return isObservableMap(Bu)&&(Bu=new Map(Bu)),transaction(function(){isPlainObject(Bu)?getPlainObjectKeys(Bu).forEach(function(Ru){return Lu.set(Ru,Bu[Ru])}):Array.isArray(Bu)?Bu.forEach(function(Ru){var Ou=Ru[0],Du=Ru[1];return Lu.set(Ou,Du)}):isES6Map(Bu)?(Bu.constructor!==Map&&die(19,Bu),Bu.forEach(function(Ru,Ou){return Lu.set(Ou,Ru)})):Bu!=null&&die(20,Bu)}),this},Tu.clear=function(){var Bu=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Bu.keys()),Ru;!(Ru=Lu()).done;){var Ou=Ru.value;Bu.delete(Ou)}})})},Tu.replace=function(Bu){var Lu=this;return transaction(function(){for(var Ru=convertToMap(Bu),Ou=new Map,Du=!1,ku=_createForOfIteratorHelperLoose(Lu.data_.keys()),Fu;!(Fu=ku()).done;){var Nu=Fu.value;if(!Ru.has(Nu)){var Gu=Lu.delete(Nu);if(Gu)Du=!0;else{var zu=Lu.data_.get(Nu);Ou.set(Nu,zu)}}}for(var Hu=_createForOfIteratorHelperLoose(Ru.entries()),Wu;!(Wu=Hu()).done;){var _h=Wu.value,Xc=_h[0],ju=_h[1],_c=Lu.data_.has(Xc);if(Lu.set(Xc,ju),Lu.data_.has(Xc)){var _f=Lu.data_.get(Xc);Ou.set(Xc,_f),_c||(Du=!0)}}if(!Du)if(Lu.data_.size!==Ou.size)Lu.keysAtom_.reportChanged();else for(var ep=Lu.data_.keys(),tp=Ou.keys(),op=ep.next(),lp=tp.next();!op.done;){if(op.value!==lp.value){Lu.keysAtom_.reportChanged();break}op=ep.next(),lp=tp.next()}Lu.data_=Ou}),this},Tu.toString=function(){return"[object ObservableMap]"},Tu.toJSON=function(){return Array.from(this)},Tu.observe_=function(Bu,Lu){return registerListener(this,Bu)},Tu.intercept_=function(Bu){return registerInterceptor(this,Bu)},_createClass(Cu,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag,get:function(){return"Map"}}]),Cu}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(Cu){if(isES6Map(Cu)||isObservableMap(Cu))return Cu;if(Array.isArray(Cu))return new Map(Cu);if(isPlainObject(Cu)){var Tu=new Map;for(var Pu in Cu)Tu.set(Pu,Cu[Pu]);return Tu}else return die(21,Cu)}var _Symbol$iterator$1,_Symbol$toStringTag$1,ObservableSetMarker={};_Symbol$iterator$1=Symbol.iterator;_Symbol$toStringTag$1=Symbol.toStringTag;var ObservableSet=function(){function Cu(Pu,Bu,Lu){Bu===void 0&&(Bu=deepEnhancer),Lu===void 0&&(Lu="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Lu,isFunction(Set)||die(22),this.atom_=createAtom(this.name_),this.enhancer_=function(Ru,Ou){return Bu(Ru,Ou,Lu)},Pu&&this.replace(Pu)}var Tu=Cu.prototype;return Tu.dehanceValue_=function(Bu){return this.dehancer!==void 0?this.dehancer(Bu):Bu},Tu.clear=function(){var Bu=this;transaction(function(){untracked(function(){for(var Lu=_createForOfIteratorHelperLoose(Bu.data_.values()),Ru;!(Ru=Lu()).done;){var Ou=Ru.value;Bu.delete(Ou)}})})},Tu.forEach=function(Bu,Lu){for(var Ru=_createForOfIteratorHelperLoose(this),Ou;!(Ou=Ru()).done;){var Du=Ou.value;Bu.call(Lu,Du,Du,this)}},Tu.add=function(Bu){var Lu=this;if(this.atom_,hasInterceptors(this)){var Ru=interceptChange(this,{type:ADD,object:this,newValue:Bu});if(!Ru)return this}if(!this.has(Bu)){transaction(function(){Lu.data_.add(Lu.enhancer_(Bu,void 0)),Lu.atom_.reportChanged()});var Ou=!1,Du=hasListeners(this),ku=Du||Ou?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Bu}:null;Du&&notifyListeners(this,ku)}return this},Tu.delete=function(Bu){var Lu=this;if(hasInterceptors(this)){var Ru=interceptChange(this,{type:DELETE,object:this,oldValue:Bu});if(!Ru)return!1}if(this.has(Bu)){var Ou=!1,Du=hasListeners(this),ku=Du||Ou?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Bu}:null;return transaction(function(){Lu.atom_.reportChanged(),Lu.data_.delete(Bu)}),Du&&notifyListeners(this,ku),!0}return!1},Tu.has=function(Bu){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Bu))},Tu.entries=function(){var Bu=0,Lu=Array.from(this.keys()),Ru=Array.from(this.values());return makeIterable({next:function(){var Du=Bu;return Bu+=1,Du<Ru.length?{value:[Lu[Du],Ru[Du]],done:!1}:{done:!0}}})},Tu.keys=function(){return this.values()},Tu.values=function(){this.atom_.reportObserved();var Bu=this,Lu=0,Ru=Array.from(this.data_.values());return makeIterable({next:function(){return Lu<Ru.length?{value:Bu.dehanceValue_(Ru[Lu++]),done:!1}:{done:!0}}})},Tu.replace=function(Bu){var Lu=this;return isObservableSet(Bu)&&(Bu=new Set(Bu)),transaction(function(){Array.isArray(Bu)?(Lu.clear(),Bu.forEach(function(Ru){return Lu.add(Ru)})):isES6Set(Bu)?(Lu.clear(),Bu.forEach(function(Ru){return Lu.add(Ru)})):Bu!=null&&die("Cannot initialize set from "+Bu)}),this},Tu.observe_=function(Bu,Lu){return registerListener(this,Bu)},Tu.intercept_=function(Bu){return registerInterceptor(this,Bu)},Tu.toJSON=function(){return Array.from(this)},Tu.toString=function(){return"[object ObservableSet]"},Tu[_Symbol$iterator$1]=function(){return this.values()},_createClass(Cu,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_Symbol$toStringTag$1,get:function(){return"Set"}}]),Cu}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function Cu(Pu,Bu,Lu,Ru){Bu===void 0&&(Bu=new Map),Ru===void 0&&(Ru=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=Pu,this.values_=Bu,this.name_=Lu,this.defaultAnnotation_=Ru,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var Tu=Cu.prototype;return Tu.getObservablePropValue_=function(Bu){return this.values_.get(Bu).get()},Tu.setObservablePropValue_=function(Bu,Lu){var Ru=this.values_.get(Bu);if(Ru instanceof ComputedValue)return Ru.set(Lu),!0;if(hasInterceptors(this)){var Ou=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Bu,newValue:Lu});if(!Ou)return null;Lu=Ou.newValue}if(Lu=Ru.prepareNewValue_(Lu),Lu!==globalState.UNCHANGED){var Du=hasListeners(this),ku=!1,Fu=Du||ku?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Ru.value_,name:Bu,newValue:Lu}:null;Ru.setNewValue_(Lu),Du&&notifyListeners(this,Fu)}return!0},Tu.get_=function(Bu){return globalState.trackingDerivation&&!hasProp(this.target_,Bu)&&this.has_(Bu),this.target_[Bu]},Tu.set_=function(Bu,Lu,Ru){return Ru===void 0&&(Ru=!1),hasProp(this.target_,Bu)?this.values_.has(Bu)?this.setObservablePropValue_(Bu,Lu):Ru?Reflect.set(this.target_,Bu,Lu):(this.target_[Bu]=Lu,!0):this.extend_(Bu,{value:Lu,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Ru)},Tu.has_=function(Bu){if(!globalState.trackingDerivation)return Bu in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Lu=this.pendingKeys_.get(Bu);return Lu||(Lu=new ObservableValue(Bu in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Bu,Lu)),Lu.get()},Tu.make_=function(Bu,Lu){if(Lu===!0&&(Lu=this.defaultAnnotation_),Lu!==!1){if(!(Bu in this.target_)){var Ru;if((Ru=this.target_[storedAnnotationsSymbol])!=null&&Ru[Bu])return;die(1,Lu.annotationType_,this.name_+"."+Bu.toString())}for(var Ou=this.target_;Ou&&Ou!==objectPrototype;){var Du=getDescriptor(Ou,Bu);if(Du){var ku=Lu.make_(this,Bu,Du,Ou);if(ku===0)return;if(ku===1)break}Ou=Object.getPrototypeOf(Ou)}recordAnnotationApplied(this,Lu,Bu)}},Tu.extend_=function(Bu,Lu,Ru,Ou){if(Ou===void 0&&(Ou=!1),Ru===!0&&(Ru=this.defaultAnnotation_),Ru===!1)return this.defineProperty_(Bu,Lu,Ou);var Du=Ru.extend_(this,Bu,Lu,Ou);return Du&&recordAnnotationApplied(this,Ru,Bu),Du},Tu.defineProperty_=function(Bu,Lu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Ou=this.delete_(Bu);if(!Ou)return Ou;if(hasInterceptors(this)){var Du=interceptChange(this,{object:this.proxy_||this.target_,name:Bu,type:ADD,newValue:Lu.value});if(!Du)return null;var ku=Du.newValue;Lu.value!==ku&&(Lu=_extends({},Lu,{value:ku}))}if(Ru){if(!Reflect.defineProperty(this.target_,Bu,Lu))return!1}else defineProperty(this.target_,Bu,Lu);this.notifyPropertyAddition_(Bu,Lu.value)}finally{endBatch()}return!0},Tu.defineObservableProperty_=function(Bu,Lu,Ru,Ou){Ou===void 0&&(Ou=!1);try{startBatch();var Du=this.delete_(Bu);if(!Du)return Du;if(hasInterceptors(this)){var ku=interceptChange(this,{object:this.proxy_||this.target_,name:Bu,type:ADD,newValue:Lu});if(!ku)return null;Lu=ku.newValue}var Fu=getCachedObservablePropDescriptor(Bu),Nu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Fu.get,set:Fu.set};if(Ou){if(!Reflect.defineProperty(this.target_,Bu,Nu))return!1}else defineProperty(this.target_,Bu,Nu);var Gu=new ObservableValue(Lu,Ru,"ObservableObject.key",!1);this.values_.set(Bu,Gu),this.notifyPropertyAddition_(Bu,Gu.value_)}finally{endBatch()}return!0},Tu.defineComputedProperty_=function(Bu,Lu,Ru){Ru===void 0&&(Ru=!1);try{startBatch();var Ou=this.delete_(Bu);if(!Ou)return Ou;if(hasInterceptors(this)){var Du=interceptChange(this,{object:this.proxy_||this.target_,name:Bu,type:ADD,newValue:void 0});if(!Du)return null}Lu.name||(Lu.name="ObservableObject.key"),Lu.context=this.proxy_||this.target_;var ku=getCachedObservablePropDescriptor(Bu),Fu={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:ku.get,set:ku.set};if(Ru){if(!Reflect.defineProperty(this.target_,Bu,Fu))return!1}else defineProperty(this.target_,Bu,Fu);this.values_.set(Bu,new ComputedValue(Lu)),this.notifyPropertyAddition_(Bu,void 0)}finally{endBatch()}return!0},Tu.delete_=function(Bu,Lu){if(Lu===void 0&&(Lu=!1),!hasProp(this.target_,Bu))return!0;if(hasInterceptors(this)){var Ru=interceptChange(this,{object:this.proxy_||this.target_,name:Bu,type:REMOVE});if(!Ru)return null}try{var Ou,Du;startBatch();var ku=hasListeners(this),Fu=!1,Nu=this.values_.get(Bu),Gu=void 0;if(!Nu&&(ku||Fu)){var zu;Gu=(zu=getDescriptor(this.target_,Bu))==null?void 0:zu.value}if(Lu){if(!Reflect.deleteProperty(this.target_,Bu))return!1}else delete this.target_[Bu];if(Nu&&(this.values_.delete(Bu),Nu instanceof ObservableValue&&(Gu=Nu.value_),propagateChanged(Nu)),this.keysAtom_.reportChanged(),(Ou=this.pendingKeys_)==null||(Du=Ou.get(Bu))==null||Du.set(Bu in this.target_),ku||Fu){var Hu={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Gu,name:Bu};ku&&notifyListeners(this,Hu)}}finally{endBatch()}return!0},Tu.observe_=function(Bu,Lu){return registerListener(this,Bu)},Tu.intercept_=function(Bu){return registerInterceptor(this,Bu)},Tu.notifyPropertyAddition_=function(Bu,Lu){var Ru,Ou,Du=hasListeners(this),ku=!1;if(Du||ku){var Fu=Du||ku?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Bu,newValue:Lu}:null;Du&&notifyListeners(this,Fu)}(Ru=this.pendingKeys_)==null||(Ou=Ru.get(Bu))==null||Ou.set(!0),this.keysAtom_.reportChanged()},Tu.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},Tu.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},Cu}();function asObservableObject(Cu,Tu){var Pu;if(hasProp(Cu,$mobx))return Cu;var Bu=(Pu=Tu==null?void 0:Tu.name)!=null?Pu:"ObservableObject",Lu=new ObservableObjectAdministration(Cu,new Map,String(Bu),getAnnotationFromOptions(Tu));return addHiddenProp(Cu,$mobx,Lu),Cu}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(Cu){return descriptorCache[Cu]||(descriptorCache[Cu]={get:function(){return this[$mobx].getObservablePropValue_(Cu)},set:function(Pu){return this[$mobx].setObservablePropValue_(Cu,Pu)}})}function isObservableObject(Cu){return isObject(Cu)?isObservableObjectAdministration(Cu[$mobx]):!1}function recordAnnotationApplied(Cu,Tu,Pu){var Bu;(Bu=Cu.target_[storedAnnotationsSymbol])==null||delete Bu[Pu]}var ENTRY_0=createArrayEntryDescriptor(0),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function Cu(){};function inherit(Cu,Tu){Object.setPrototypeOf?Object.setPrototypeOf(Cu.prototype,Tu):Cu.prototype.__proto__!==void 0?Cu.prototype.__proto__=Tu:Cu.prototype=Tu}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(Cu,Tu,Pu){_inheritsLoose(Bu,Cu);function Bu(Ru,Ou,Du,ku){var Fu;Du===void 0&&(Du="ObservableArray"),ku===void 0&&(ku=!1),Fu=Cu.call(this)||this;var Nu=new ObservableArrayAdministration(Du,Ou,ku,!0);if(Nu.proxy_=_assertThisInitialized(Fu),addHiddenFinalProp(_assertThisInitialized(Fu),$mobx,Nu),Ru&&Ru.length){var Gu=allowStateChangesStart(!0);Fu.spliceWithArray(0,0,Ru),allowStateChangesEnd(Gu)}return Object.defineProperty(_assertThisInitialized(Fu),"0",ENTRY_0),Fu}var Lu=Bu.prototype;return Lu.concat=function(){this[$mobx].atom_.reportObserved();for(var Ou=arguments.length,Du=new Array(Ou),ku=0;ku<Ou;ku++)Du[ku]=arguments[ku];return Array.prototype.concat.apply(this.slice(),Du.map(function(Fu){return isObservableArray(Fu)?Fu.slice():Fu}))},Lu[Pu]=function(){var Ru=this,Ou=0;return makeIterable({next:function(){return Ou<Ru.length?{value:Ru[Ou++],done:!1}:{done:!0,value:void 0}}})},_createClass(Bu,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Ou){this[$mobx].setArrayLength_(Ou)}},{key:Tu,get:function(){return"Array"}}]),Bu}(StubArray,Symbol.toStringTag,Symbol.iterator);Object.entries(arrayExtensions).forEach(function(Cu){var Tu=Cu[0],Pu=Cu[1];Tu!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,Tu,Pu)});function createArrayEntryDescriptor(Cu){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(Cu)},set:function(Pu){this[$mobx].set_(Cu,Pu)}}}function createArrayBufferItem(Cu){defineProperty(LegacyObservableArray.prototype,""+Cu,createArrayEntryDescriptor(Cu))}function reserveArrayBuffer(Cu){if(Cu>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var Tu=OBSERVABLE_ARRAY_BUFFER_SIZE;Tu<Cu+100;Tu++)createArrayBufferItem(Tu);OBSERVABLE_ARRAY_BUFFER_SIZE=Cu}}reserveArrayBuffer(1e3);function createLegacyArray(Cu,Tu,Pu){return new LegacyObservableArray(Cu,Tu,Pu)}function getAtom(Cu,Tu){if(typeof Cu=="object"&&Cu!==null){if(isObservableArray(Cu))return Tu!==void 0&&die(23),Cu[$mobx].atom_;if(isObservableSet(Cu))return Cu[$mobx];if(isObservableMap(Cu)){if(Tu===void 0)return Cu.keysAtom_;var Pu=Cu.data_.get(Tu)||Cu.hasMap_.get(Tu);return Pu||die(25,Tu,getDebugName(Cu)),Pu}if(isObservableObject(Cu)){if(!Tu)return die(26);var Bu=Cu[$mobx].values_.get(Tu);return Bu||die(27,Tu,getDebugName(Cu)),Bu}if(isAtom(Cu)||isComputedValue(Cu)||isReaction(Cu))return Cu}else if(isFunction(Cu)&&isReaction(Cu[$mobx]))return Cu[$mobx];die(28)}function getAdministration(Cu,Tu){if(Cu||die(29),Tu!==void 0)return getAdministration(getAtom(Cu,Tu));if(isAtom(Cu)||isComputedValue(Cu)||isReaction(Cu)||isObservableMap(Cu)||isObservableSet(Cu))return Cu;if(Cu[$mobx])return Cu[$mobx];die(24,Cu)}function getDebugName(Cu,Tu){var Pu;if(Tu!==void 0)Pu=getAtom(Cu,Tu);else{if(isAction(Cu))return Cu.name;isObservableObject(Cu)||isObservableMap(Cu)||isObservableSet(Cu)?Pu=getAdministration(Cu):Pu=getAtom(Cu)}return Pu.name_}var toString=objectPrototype.toString;function deepEqual(Cu,Tu,Pu){return Pu===void 0&&(Pu=-1),eq(Cu,Tu,Pu)}function eq(Cu,Tu,Pu,Bu,Lu){if(Cu===Tu)return Cu!==0||1/Cu===1/Tu;if(Cu==null||Tu==null)return!1;if(Cu!==Cu)return Tu!==Tu;var Ru=typeof Cu;if(Ru!=="function"&&Ru!=="object"&&typeof Tu!="object")return!1;var Ou=toString.call(Cu);if(Ou!==toString.call(Tu))return!1;switch(Ou){case"[object RegExp]":case"[object String]":return""+Cu==""+Tu;case"[object Number]":return+Cu!=+Cu?+Tu!=+Tu:+Cu==0?1/+Cu===1/Tu:+Cu==+Tu;case"[object Date]":case"[object Boolean]":return+Cu==+Tu;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(Cu)===Symbol.valueOf.call(Tu);case"[object Map]":case"[object Set]":Pu>=0&&Pu++;break}Cu=unwrap(Cu),Tu=unwrap(Tu);var Du=Ou==="[object Array]";if(!Du){if(typeof Cu!="object"||typeof Tu!="object")return!1;var ku=Cu.constructor,Fu=Tu.constructor;if(ku!==Fu&&!(isFunction(ku)&&ku instanceof ku&&isFunction(Fu)&&Fu instanceof Fu)&&"constructor"in Cu&&"constructor"in Tu)return!1}if(Pu===0)return!1;Pu<0&&(Pu=-1),Bu=Bu||[],Lu=Lu||[];for(var Nu=Bu.length;Nu--;)if(Bu[Nu]===Cu)return Lu[Nu]===Tu;if(Bu.push(Cu),Lu.push(Tu),Du){if(Nu=Cu.length,Nu!==Tu.length)return!1;for(;Nu--;)if(!eq(Cu[Nu],Tu[Nu],Pu-1,Bu,Lu))return!1}else{var Gu=Object.keys(Cu),zu;if(Nu=Gu.length,Object.keys(Tu).length!==Nu)return!1;for(;Nu--;)if(zu=Gu[Nu],!(hasProp(Tu,zu)&&eq(Cu[zu],Tu[zu],Pu-1,Bu,Lu)))return!1}return Bu.pop(),Lu.pop(),!0}function unwrap(Cu){return isObservableArray(Cu)?Cu.slice():isES6Map(Cu)||isObservableMap(Cu)||isES6Set(Cu)||isObservableSet(Cu)?Array.from(Cu.entries()):Cu}function makeIterable(Cu){return Cu[Symbol.iterator]=getSelf,Cu}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(Cu){var Tu=getGlobal();typeof Tu[Cu]=="undefined"&&die("MobX requires global '"+Cu+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react$1.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(Cu){Cu()}function observerBatching(Cu){Cu||(Cu=defaultNoopBatch),configure({reactionScheduler:Cu})}function printDebugValue(Cu){return getDependencyTree(Cu)}var FinalizationRegistryLocal=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function createTrackingData(Cu){var Tu={reaction:Cu,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS};return Tu}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=1e4,CLEANUP_TIMER_LOOP_MILLIS=1e4;function createReactionCleanupTrackingUsingFinalizationRegister(Cu){var Tu=new Map,Pu=1,Bu=new Cu(function(Ru){var Ou=Tu.get(Ru);Ou&&(Ou.reaction.dispose(),Tu.delete(Ru))});return{addReactionToTrack:function(Lu,Ru,Ou){var Du=Pu++;return Bu.register(Ou,Du,Lu),Lu.current=createTrackingData(Ru),Lu.current.finalizationRegistryCleanupToken=Du,Tu.set(Du,Lu.current),Lu.current},recordReactionAsCommitted:function(Lu){Bu.unregister(Lu),Lu.current&&Lu.current.finalizationRegistryCleanupToken&&Tu.delete(Lu.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var __values=globalThis&&globalThis.__values||function(Cu){var Tu=typeof Symbol=="function"&&Symbol.iterator,Pu=Tu&&Cu[Tu],Bu=0;if(Pu)return Pu.call(Cu);if(Cu&&typeof Cu.length=="number")return{next:function(){return Cu&&Bu>=Cu.length&&(Cu=void 0),{value:Cu&&Cu[Bu++],done:!Cu}}};throw new TypeError(Tu?"Object is not iterable.":"Symbol.iterator is not defined.")};function createTimerBasedReactionCleanupTracking(){var Cu=new Set,Tu;function Pu(){Tu&&(clearTimeout(Tu),Du())}function Bu(){var ku,Fu;if(Cu.size>0){try{for(var Nu=__values(Cu),Gu=Nu.next();!Gu.done;Gu=Nu.next()){var zu=Gu.value,Hu=zu.current;Hu&&(Hu.reaction.dispose(),zu.current=null)}}catch(Wu){ku={error:Wu}}finally{try{Gu&&!Gu.done&&(Fu=Nu.return)&&Fu.call(Nu)}finally{if(ku)throw ku.error}}Cu.clear()}Tu&&(clearTimeout(Tu),Tu=void 0)}function Lu(){Tu===void 0&&(Tu=setTimeout(Du,CLEANUP_TIMER_LOOP_MILLIS))}function Ru(ku){Cu.add(ku),Lu()}function Ou(ku){Cu.delete(ku)}function Du(){Tu=void 0;var ku=Date.now();Cu.forEach(function(Fu){var Nu=Fu.current;Nu&&ku>=Nu.cleanAt&&(Nu.reaction.dispose(),Fu.current=null,Cu.delete(Fu))}),Cu.size>0&&Lu()}return{addReactionToTrack:function(ku,Fu,Nu){return ku.current=createTrackingData(Fu),Ru(ku),ku.current},recordReactionAsCommitted:Ou,forceCleanupTimerToRunNowForTests:Pu,resetCleanupScheduleForTests:Bu}}var _a$1=FinalizationRegistryLocal?createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryLocal):createTimerBasedReactionCleanupTracking(),addReactionToTrack=_a$1.addReactionToTrack,recordReactionAsCommitted=_a$1.recordReactionAsCommitted,__read=globalThis&&globalThis.__read||function(Cu,Tu){var Pu=typeof Symbol=="function"&&Cu[Symbol.iterator];if(!Pu)return Cu;var Bu=Pu.call(Cu),Lu,Ru=[],Ou;try{for(;(Tu===void 0||Tu-- >0)&&!(Lu=Bu.next()).done;)Ru.push(Lu.value)}catch(Du){Ou={error:Du}}finally{try{Lu&&!Lu.done&&(Pu=Bu.return)&&Pu.call(Bu)}finally{if(Ou)throw Ou.error}}return Ru};function observerComponentNameFor(Cu){return"observer".concat(Cu)}var ObjectToBeRetainedByReact=function(){function Cu(){}return Cu}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(Cu,Tu){Tu===void 0&&(Tu="observed");var Pu=__read(React.useState(objectToBeRetainedByReactFactory),1),Bu=Pu[0],Lu=__read(React.useState(),2),Ru=Lu[1],Ou=function(){return Ru([])},Du=React.useRef(null);if(!Du.current)var ku=new Reaction(observerComponentNameFor(Tu),function(){Fu.mounted?Ou():Fu.changedBeforeMount=!0}),Fu=addReactionToTrack(Du,ku,Bu);var Nu=Du.current.reaction;React.useDebugValue(Nu,printDebugValue),React.useEffect(function(){return recordReactionAsCommitted(Du),Du.current?(Du.current.mounted=!0,Du.current.changedBeforeMount&&(Du.current.changedBeforeMount=!1,Ou())):(Du.current={reaction:new Reaction(observerComponentNameFor(Tu),function(){Ou()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},Ou()),function(){Du.current.reaction.dispose(),Du.current=null}},[]);var Gu,zu;if(Nu.track(function(){try{Gu=Cu()}catch(Hu){zu=Hu}}),zu)throw zu;return Gu}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react$1.exports.forwardRef=="function"&&react$1.exports.forwardRef(function(Cu){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react$1.exports.memo=="function"&&react$1.exports.memo(function(Cu){return null}).$$typeof;function observer$1(Cu,Tu){var Pu;if(ReactMemoSymbol&&Cu.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Bu=(Pu=Tu==null?void 0:Tu.forwardRef)!==null&&Pu!==void 0?Pu:!1,Lu=Cu,Ru=Cu.displayName||Cu.name;if(ReactForwardRefSymbol&&Cu.$$typeof===ReactForwardRefSymbol&&(Bu=!0,Lu=Cu.render,typeof Lu!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Ou=function(Du,ku){return useObserver(function(){return Lu(Du,ku)},Ru)};return Ru!==""&&(Ou.displayName=Ru),Cu.contextTypes&&(Ou.contextTypes=Cu.contextTypes),Bu&&(Ou=react$1.exports.forwardRef(Ou)),Ou=react$1.exports.memo(Ou),copyStaticProperties(Cu,Ou),Ou}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(Cu,Tu){Object.keys(Cu).forEach(function(Pu){hoistBlackList[Pu]||Object.defineProperty(Tu,Pu,Object.getOwnPropertyDescriptor(Cu,Pu))})}globalThis&&globalThis.__read;observerBatching(reactDom.exports.unstable_batchedUpdates);var symbolId=0;function createSymbol(Cu){if(typeof Symbol=="function")return Symbol(Cu);var Tu="__$mobx-react "+Cu+" ("+symbolId+")";return symbolId++,Tu}var createdSymbols={};function newSymbol(Cu){return createdSymbols[Cu]||(createdSymbols[Cu]=createSymbol(Cu)),createdSymbols[Cu]}function shallowEqual(Cu,Tu){if(is(Cu,Tu))return!0;if(typeof Cu!="object"||Cu===null||typeof Tu!="object"||Tu===null)return!1;var Pu=Object.keys(Cu),Bu=Object.keys(Tu);if(Pu.length!==Bu.length)return!1;for(var Lu=0;Lu<Pu.length;Lu++)if(!Object.hasOwnProperty.call(Tu,Pu[Lu])||!is(Cu[Pu[Lu]],Tu[Pu[Lu]]))return!1;return!0}function is(Cu,Tu){return Cu===Tu?Cu!==0||1/Cu===1/Tu:Cu!==Cu&&Tu!==Tu}function setHiddenProp(Cu,Tu,Pu){Object.hasOwnProperty.call(Cu,Tu)?Cu[Tu]=Pu:Object.defineProperty(Cu,Tu,{enumerable:!1,configurable:!0,writable:!0,value:Pu})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(Cu,Tu){var Pu=Cu[mobxMixins]=Cu[mobxMixins]||{},Bu=Pu[Tu]=Pu[Tu]||{};return Bu.locks=Bu.locks||0,Bu.methods=Bu.methods||[],Bu}function wrapper(Cu,Tu){for(var Pu=this,Bu=arguments.length,Lu=new Array(Bu>2?Bu-2:0),Ru=2;Ru<Bu;Ru++)Lu[Ru-2]=arguments[Ru];Tu.locks++;try{var Ou;return Cu!=null&&(Ou=Cu.apply(this,Lu)),Ou}finally{Tu.locks--,Tu.locks===0&&Tu.methods.forEach(function(Du){Du.apply(Pu,Lu)})}}function wrapFunction(Cu,Tu){var Pu=function(){for(var Lu=arguments.length,Ru=new Array(Lu),Ou=0;Ou<Lu;Ou++)Ru[Ou]=arguments[Ou];wrapper.call.apply(wrapper,[this,Cu,Tu].concat(Ru))};return Pu}function patch(Cu,Tu,Pu){var Bu=getMixins(Cu,Tu);Bu.methods.indexOf(Pu)<0&&Bu.methods.push(Pu);var Lu=Object.getOwnPropertyDescriptor(Cu,Tu);if(!(Lu&&Lu[mobxPatchedDefinition])){var Ru=Cu[Tu],Ou=createDefinition(Cu,Tu,Lu?Lu.enumerable:void 0,Bu,Ru);Object.defineProperty(Cu,Tu,Ou)}}function createDefinition(Cu,Tu,Pu,Bu,Lu){var Ru,Ou=wrapFunction(Lu,Bu);return Ru={},Ru[mobxPatchedDefinition]=!0,Ru.get=function(){return Ou},Ru.set=function(ku){if(this===Cu)Ou=wrapFunction(ku,Bu);else{var Fu=createDefinition(this,Tu,Pu,Bu,ku);Object.defineProperty(this,Tu,Fu)}},Ru.configurable=!0,Ru.enumerable=Pu,Ru}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(Cu){var Tu=Cu.prototype;if(Cu[mobxObserverProperty]){var Pu=getDisplayName(Tu);console.warn("The provided component class ("+Pu+`)
                has already been declared as an observer component.`)}else Cu[mobxObserverProperty]=!0;if(Tu.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(Cu.__proto__!==react$1.exports.PureComponent){if(!Tu.shouldComponentUpdate)Tu.shouldComponentUpdate=observerSCU;else if(Tu.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(Tu,"props"),makeObservableProp(Tu,"state"),Cu.contextType&&makeObservableProp(Tu,"context");var Bu=Tu.render;if(typeof Bu!="function"){var Lu=getDisplayName(Tu);throw new Error("[mobx-react] class component ("+Lu+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return Tu.render=function(){return this.render=createReactiveRender.call(this,Bu),this.render()},patch(Tu,"componentDidMount",function(){this[mobxIsUnmounted]=!1,this.render[mobxAdminProperty]||react$1.exports.Component.prototype.forceUpdate.call(this)}),patch(Tu,"componentWillUnmount",function(){var Ru=this.render[mobxAdminProperty];if(Ru)Ru.dispose(),this.render[mobxAdminProperty]=null;else{var Ou=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Ou+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[mobxIsUnmounted]=!0}),Cu}function getDisplayName(Cu){return Cu.displayName||Cu.name||Cu.constructor&&(Cu.constructor.displayName||Cu.constructor.name)||"<component>"}function createReactiveRender(Cu){var Tu=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var Pu=getDisplayName(this),Bu=Cu.bind(this),Lu=!1,Ru=function(){var ku=new Reaction(Pu+".render()",function(){if(!Lu&&(Lu=!0,Tu[mobxIsUnmounted]!==!0)){var Fu=!0;try{setHiddenProp(Tu,isForcingUpdateKey,!0),Tu[skipRenderKey]||react$1.exports.Component.prototype.forceUpdate.call(Tu),Fu=!1}finally{setHiddenProp(Tu,isForcingUpdateKey,!1),Fu&&(ku.dispose(),Tu.render[mobxAdminProperty]=null)}}});return ku.reactComponent=Tu,ku};function Ou(){var Du;Lu=!1;var ku=(Du=Ou[mobxAdminProperty])!=null?Du:Ou[mobxAdminProperty]=Ru(),Fu=void 0,Nu=void 0;if(ku.track(function(){try{Nu=allowStateChanges(!1,Bu)}catch(Gu){Fu=Gu}}),Fu)throw Fu;return Nu}return Ou}function observerSCU(Cu,Tu){return this.state!==Tu?!0:!shallowEqual(this.props,Cu)}function makeObservableProp(Cu,Tu){var Pu=newSymbol("reactProp_"+Tu+"_valueHolder"),Bu=newSymbol("reactProp_"+Tu+"_atomHolder");function Lu(){return this[Bu]||setHiddenProp(this,Bu,createAtom("reactive "+Tu)),this[Bu]}Object.defineProperty(Cu,Tu,{configurable:!0,enumerable:!0,get:function(){var Ou=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Ou=allowStateReadsStart(!0)),Lu.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Ou),this[Pu]},set:function(Ou){!this[isForcingUpdateKey]&&!shallowEqual(this[Pu],Ou)?(setHiddenProp(this,Pu,Ou),setHiddenProp(this,skipRenderKey,!0),Lu.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,Pu,Ou)}})}function observer(Cu){return Cu.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react$1.exports.Component,Cu)||Object.prototype.isPrototypeOf.call(react$1.exports.PureComponent,Cu)?makeClassComponentObserver(Cu):observer$1(Cu)}if(!react$1.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(Cu=>setTimeout(Cu,16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function nextFrame(Cu,Tu=0){Tu<=0?_requestAnimationFrame(Cu):_requestAnimationFrame(()=>nextFrame(Cu,Tu-1))}function requestAnimationFrameInterval(Cu,Tu=60){let Pu=-1,Bu=0,Lu=-1;const Ru=1e3/Tu;function Ou(Du){Lu===-1&&(Lu=Du),Pu=_requestAnimationFrame(Ou),!(Du-Bu<Ru)&&(Bu=Du,Cu&&Cu(Du-Lu))}return Pu=_requestAnimationFrame(Ou),function(){_cancelAnimationFrame(Pu)}}function setElementDataset(Cu,Tu){Cu&&Object.keys(Tu).forEach(Pu=>{const Bu=Tu[Pu].toString();Cu instanceof Element?Cu.setAttribute(`data-${Pu}`,Bu):Cu instanceof Document?Cu.documentElement.setAttribute(`data-${Pu}`,Bu):Cu instanceof HTMLElement?Cu.dataset[Pu]=Bu:Cu.setAttribute(`data-${Pu}`,Bu)})}function getFileExpandedName(Cu){if(!Cu)return"";const Tu=Cu.lastIndexOf(".");return Cu.substring(Tu+1).toLowerCase()}function getMediaType(Cu){const Tu=getFileExpandedName(Cu);return getMediaTypeByExpandedName(Tu)}function getMediaTypeByExpandedName(Cu){return Cu?/jpg|jpeg|png$/.test(Cu)?"image":/mp3|wav$/.test(Cu)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(Cu)?"video":"unknown":"unknown"}class Controller extends Subscribe{constructor({five:Pu,container:Bu,configs:Lu}){super();Cm(this,"five");Cm(this,"configs");Cm(this,"videoAgentScene");Cm(this,"vreoUnit");Cm(this,"stopInterval");Cm(this,"playing",!1);Cm(this,"ended",!1);Cm(this,"loading",!1);Cm(this,"containerSize",{width:0,height:0});Cm(this,"appSize");Cm(this,"container");Cm(this,"waveAppearance",null);Cm(this,"appearance",{waveStyle:"wave"});Cm(this,"avatar",{});Cm(this,"visible",!1);Cm(this,"popUp",null);Cm(this,"drawerConfig",null);this.configs=Lu,this.container=Bu,this.five=Pu,this.appSize=Lu.appSize,this.appearance={...this.appearance,...Lu.appearance},makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Ru,Ou])=>{if(Ou===null){this.waveAppearance=null;return}if(Ru==="wave")switch(Ou){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Ru==="solid")switch(Ou){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Ru=>{if(!(Ru!=null&&Ru.width))return;const Ou=Ru.width,Du=Ru.height,ku=(()=>Ou<=500?"S":Ou<=1024?"M":Ou<=2048?"L":"XL")(),Fu=(()=>Du>Ou?"portrait":"landscape")();setElementDataset(this.container,{size:ku}),setElementDataset(this.container,{orientation:Fu})},{fireImmediately:!0}),reaction(()=>this.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.playing,Ru=>{this.ended||this.emit(Ru?"playing":"paused")})}get agentType(){var Bu,Lu;const Pu=getMediaType((Bu=this.videoAgentScene)==null?void 0:Bu.videoAgentMesh.videoUrl);return(Lu=this.avatar)!=null&&Lu.force?"avatar":Pu==="video"?"video":"none"}openPopUp(Pu){if(!Pu){this.popUp=null;return}this.popUp=Pu}setLoading(Pu){this.loading=Pu}setAvatar(Pu){this.avatar=Pu}setContainerSize(Pu,Bu){this.containerSize={width:Pu,height:Bu}}setVisible(Pu){this.visible=Pu}setPlaying(Pu){this.playing=Pu}setEnded(Pu){this.ended=Pu}setAppearance(Pu){this.appearance={...this.appearance,...Pu}}openDrawer(Pu){var Bu;if(!Pu){this.drawerConfig={content:"",height:(Bu=this.drawerConfig)==null?void 0:Bu.height};return}this.drawerConfig=Pu}get ready(){return!!this.videoAgentScene}get currentTime(){var Pu;return((Pu=this.videoAgentScene)==null?void 0:Pu.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Bu=>{if(Bu.parsed)return!1;const Lu=this.currentTime-Bu.start;return Lu<=100&&Lu>=0}):[]}get mediaInstance(){var Pu;return(Pu=this.videoAgentScene)==null?void 0:Pu.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(Pu){var Lu,Ru,Ou,Du;if((Lu=this.mediaInstance)!=null&&Lu.ended){this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause();return}if(!this.playing){(Ru=this.mediaInstance)!=null&&Ru.paused||(Ou=this.mediaInstance)==null||Ou.pause();return}((Du=this.mediaInstance)==null?void 0:Du.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach(ku=>{ku.parsed||(ku.parsed=!0,this.emit(ku.type,ku),Pu&&Pu(ku.type,ku))})}run(Pu){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(Pu)))}dispose(){this.setPlaying(!1),this.currentKeyframes&&this.currentKeyframes.forEach(Pu=>Pu.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.currentTime=0),this.stopInterval&&(this.stopInterval(),this.stopInterval=void 0)}}const ControllerContext=react$1.exports.createContext(null);function useController(){const Cu=React.useContext(ControllerContext);if(!Cu)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return Cu}function useFiveInstance(){const Cu=useController();if(!Cu.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return Cu.five}function useFiveProject2d(){const Cu=useFiveInstance();return Tu=>Cu.project2d(Tu,!1)}var CameraMovementEffect=(Cu=>(Cu.Move="Move",Cu.Rotate="Rotate",Cu))(CameraMovementEffect||{}),Rotation=(Cu=>(Cu.Clockwise="Clockwise",Cu.Anticlockwise="Anticlockwise",Cu.Loop="Loop",Cu))(Rotation||{}),Easing$1={Linear:{None:function(Cu){return Cu}},Quadratic:{In:function(Cu){return Cu*Cu},Out:function(Cu){return Cu*(2-Cu)},InOut:function(Cu){return(Cu*=2)<1?.5*Cu*Cu:-.5*(--Cu*(Cu-2)-1)}},Cubic:{In:function(Cu){return Cu*Cu*Cu},Out:function(Cu){return--Cu*Cu*Cu+1},InOut:function(Cu){return(Cu*=2)<1?.5*Cu*Cu*Cu:.5*((Cu-=2)*Cu*Cu+2)}},Quartic:{In:function(Cu){return Cu*Cu*Cu*Cu},Out:function(Cu){return 1- --Cu*Cu*Cu*Cu},InOut:function(Cu){return(Cu*=2)<1?.5*Cu*Cu*Cu*Cu:-.5*((Cu-=2)*Cu*Cu*Cu-2)}},Quintic:{In:function(Cu){return Cu*Cu*Cu*Cu*Cu},Out:function(Cu){return--Cu*Cu*Cu*Cu*Cu+1},InOut:function(Cu){return(Cu*=2)<1?.5*Cu*Cu*Cu*Cu*Cu:.5*((Cu-=2)*Cu*Cu*Cu*Cu+2)}},Sinusoidal:{In:function(Cu){return 1-Math.cos(Cu*Math.PI/2)},Out:function(Cu){return Math.sin(Cu*Math.PI/2)},InOut:function(Cu){return .5*(1-Math.cos(Math.PI*Cu))}},Exponential:{In:function(Cu){return Cu===0?0:Math.pow(1024,Cu-1)},Out:function(Cu){return Cu===1?1:1-Math.pow(2,-10*Cu)},InOut:function(Cu){return Cu===0?0:Cu===1?1:(Cu*=2)<1?.5*Math.pow(1024,Cu-1):.5*(-Math.pow(2,-10*(Cu-1))+2)}},Circular:{In:function(Cu){return 1-Math.sqrt(1-Cu*Cu)},Out:function(Cu){return Math.sqrt(1- --Cu*Cu)},InOut:function(Cu){return(Cu*=2)<1?-.5*(Math.sqrt(1-Cu*Cu)-1):.5*(Math.sqrt(1-(Cu-=2)*Cu)+1)}},Elastic:{In:function(Cu){return Cu===0?0:Cu===1?1:-Math.pow(2,10*(Cu-1))*Math.sin((Cu-1.1)*5*Math.PI)},Out:function(Cu){return Cu===0?0:Cu===1?1:Math.pow(2,-10*Cu)*Math.sin((Cu-.1)*5*Math.PI)+1},InOut:function(Cu){return Cu===0?0:Cu===1?1:(Cu*=2,Cu<1?-.5*Math.pow(2,10*(Cu-1))*Math.sin((Cu-1.1)*5*Math.PI):.5*Math.pow(2,-10*(Cu-1))*Math.sin((Cu-1.1)*5*Math.PI)+1)}},Back:{In:function(Cu){var Tu=1.70158;return Cu*Cu*((Tu+1)*Cu-Tu)},Out:function(Cu){var Tu=1.70158;return--Cu*Cu*((Tu+1)*Cu+Tu)+1},InOut:function(Cu){var Tu=2.5949095;return(Cu*=2)<1?.5*(Cu*Cu*((Tu+1)*Cu-Tu)):.5*((Cu-=2)*Cu*((Tu+1)*Cu+Tu)+2)}},Bounce:{In:function(Cu){return 1-Easing$1.Bounce.Out(1-Cu)},Out:function(Cu){return Cu<1/2.75?7.5625*Cu*Cu:Cu<2/2.75?7.5625*(Cu-=1.5/2.75)*Cu+.75:Cu<2.5/2.75?7.5625*(Cu-=2.25/2.75)*Cu+.9375:7.5625*(Cu-=2.625/2.75)*Cu+.984375},InOut:function(Cu){return Cu<.5?Easing$1.Bounce.In(Cu*2)*.5:Easing$1.Bounce.Out(Cu*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var Cu=process.hrtime();return Cu[0]*1e3+Cu[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function Cu(){this._tweens={},this._tweensAddedDuringUpdate={}}return Cu.prototype.getAll=function(){var Tu=this;return Object.keys(this._tweens).map(function(Pu){return Tu._tweens[Pu]})},Cu.prototype.removeAll=function(){this._tweens={}},Cu.prototype.add=function(Tu){this._tweens[Tu.getId()]=Tu,this._tweensAddedDuringUpdate[Tu.getId()]=Tu},Cu.prototype.remove=function(Tu){delete this._tweens[Tu.getId()],delete this._tweensAddedDuringUpdate[Tu.getId()]},Cu.prototype.update=function(Tu,Pu){Tu===void 0&&(Tu=now$1()),Pu===void 0&&(Pu=!1);var Bu=Object.keys(this._tweens);if(Bu.length===0)return!1;for(;Bu.length>0;){this._tweensAddedDuringUpdate={};for(var Lu=0;Lu<Bu.length;Lu++){var Ru=this._tweens[Bu[Lu]],Ou=!Pu;Ru&&Ru.update(Tu,Ou)===!1&&!Pu&&delete this._tweens[Bu[Lu]]}Bu=Object.keys(this._tweensAddedDuringUpdate)}return!0},Cu}(),Interpolation={Linear:function(Cu,Tu){var Pu=Cu.length-1,Bu=Pu*Tu,Lu=Math.floor(Bu),Ru=Interpolation.Utils.Linear;return Tu<0?Ru(Cu[0],Cu[1],Bu):Tu>1?Ru(Cu[Pu],Cu[Pu-1],Pu-Bu):Ru(Cu[Lu],Cu[Lu+1>Pu?Pu:Lu+1],Bu-Lu)},Bezier:function(Cu,Tu){for(var Pu=0,Bu=Cu.length-1,Lu=Math.pow,Ru=Interpolation.Utils.Bernstein,Ou=0;Ou<=Bu;Ou++)Pu+=Lu(1-Tu,Bu-Ou)*Lu(Tu,Ou)*Cu[Ou]*Ru(Bu,Ou);return Pu},CatmullRom:function(Cu,Tu){var Pu=Cu.length-1,Bu=Pu*Tu,Lu=Math.floor(Bu),Ru=Interpolation.Utils.CatmullRom;return Cu[0]===Cu[Pu]?(Tu<0&&(Lu=Math.floor(Bu=Pu*(1+Tu))),Ru(Cu[(Lu-1+Pu)%Pu],Cu[Lu],Cu[(Lu+1)%Pu],Cu[(Lu+2)%Pu],Bu-Lu)):Tu<0?Cu[0]-(Ru(Cu[0],Cu[0],Cu[1],Cu[1],-Bu)-Cu[0]):Tu>1?Cu[Pu]-(Ru(Cu[Pu],Cu[Pu],Cu[Pu-1],Cu[Pu-1],Bu-Pu)-Cu[Pu]):Ru(Cu[Lu?Lu-1:0],Cu[Lu],Cu[Pu<Lu+1?Pu:Lu+1],Cu[Pu<Lu+2?Pu:Lu+2],Bu-Lu)},Utils:{Linear:function(Cu,Tu,Pu){return(Tu-Cu)*Pu+Cu},Bernstein:function(Cu,Tu){var Pu=Interpolation.Utils.Factorial;return Pu(Cu)/Pu(Tu)/Pu(Cu-Tu)},Factorial:function(){var Cu=[1];return function(Tu){var Pu=1;if(Cu[Tu])return Cu[Tu];for(var Bu=Tu;Bu>1;Bu--)Pu*=Bu;return Cu[Tu]=Pu,Pu}}(),CatmullRom:function(Cu,Tu,Pu,Bu,Lu){var Ru=(Pu-Cu)*.5,Ou=(Bu-Tu)*.5,Du=Lu*Lu,ku=Lu*Du;return(2*Tu-2*Pu+Ru+Ou)*ku+(-3*Tu+3*Pu-2*Ru-Ou)*Du+Ru*Lu+Tu}}},Sequence=function(){function Cu(){}return Cu.nextId=function(){return Cu._nextId++},Cu._nextId=0,Cu}(),mainGroup=new Group,Tween=function(){function Cu(Tu,Pu){Pu===void 0&&(Pu=mainGroup),this._object=Tu,this._group=Pu,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return Cu.prototype.getId=function(){return this._id},Cu.prototype.isPlaying=function(){return this._isPlaying},Cu.prototype.isPaused=function(){return this._isPaused},Cu.prototype.to=function(Tu,Pu){return this._valuesEnd=Object.create(Tu),Pu!==void 0&&(this._duration=Pu),this},Cu.prototype.duration=function(Tu){return this._duration=Tu,this},Cu.prototype.start=function(Tu){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Pu in this._valuesStartRepeat)this._swapEndStartRepeatValues(Pu),this._valuesStart[Pu]=this._valuesStartRepeat[Pu]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=Tu!==void 0?typeof Tu=="string"?now$1()+parseFloat(Tu):Tu:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},Cu.prototype._setupProperties=function(Tu,Pu,Bu,Lu){for(var Ru in Bu){var Ou=Tu[Ru],Du=Array.isArray(Ou),ku=Du?"array":typeof Ou,Fu=!Du&&Array.isArray(Bu[Ru]);if(!(ku==="undefined"||ku==="function")){if(Fu){var Nu=Bu[Ru];if(Nu.length===0)continue;Nu=Nu.map(this._handleRelativeValue.bind(this,Ou)),Bu[Ru]=[Ou].concat(Nu)}if((ku==="object"||Du)&&Ou&&!Fu){Pu[Ru]=Du?[]:{};for(var Gu in Ou)Pu[Ru][Gu]=Ou[Gu];Lu[Ru]=Du?[]:{},this._setupProperties(Ou,Pu[Ru],Bu[Ru],Lu[Ru])}else typeof Pu[Ru]=="undefined"&&(Pu[Ru]=Ou),Du||(Pu[Ru]*=1),Fu?Lu[Ru]=Bu[Ru].slice().reverse():Lu[Ru]=Pu[Ru]||0}}},Cu.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},Cu.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},Cu.prototype.pause=function(Tu){return Tu===void 0&&(Tu=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=Tu,this._group&&this._group.remove(this),this)},Cu.prototype.resume=function(Tu){return Tu===void 0&&(Tu=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=Tu-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},Cu.prototype.stopChainedTweens=function(){for(var Tu=0,Pu=this._chainedTweens.length;Tu<Pu;Tu++)this._chainedTweens[Tu].stop();return this},Cu.prototype.group=function(Tu){return this._group=Tu,this},Cu.prototype.delay=function(Tu){return this._delayTime=Tu,this},Cu.prototype.repeat=function(Tu){return this._initialRepeat=Tu,this._repeat=Tu,this},Cu.prototype.repeatDelay=function(Tu){return this._repeatDelayTime=Tu,this},Cu.prototype.yoyo=function(Tu){return this._yoyo=Tu,this},Cu.prototype.easing=function(Tu){return this._easingFunction=Tu,this},Cu.prototype.interpolation=function(Tu){return this._interpolationFunction=Tu,this},Cu.prototype.chain=function(){for(var Tu=[],Pu=0;Pu<arguments.length;Pu++)Tu[Pu]=arguments[Pu];return this._chainedTweens=Tu,this},Cu.prototype.onStart=function(Tu){return this._onStartCallback=Tu,this},Cu.prototype.onUpdate=function(Tu){return this._onUpdateCallback=Tu,this},Cu.prototype.onRepeat=function(Tu){return this._onRepeatCallback=Tu,this},Cu.prototype.onComplete=function(Tu){return this._onCompleteCallback=Tu,this},Cu.prototype.onStop=function(Tu){return this._onStopCallback=Tu,this},Cu.prototype.update=function(Tu,Pu){if(Tu===void 0&&(Tu=now$1()),Pu===void 0&&(Pu=!0),this._isPaused)return!0;var Bu,Lu,Ru=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(Tu>Ru)return!1;Pu&&this.start(Tu)}if(this._goToEnd=!1,Tu<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Lu=(Tu-this._startTime)/this._duration,Lu=this._duration===0||Lu>1?1:Lu;var Ou=this._easingFunction(Lu);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Ou),this._onUpdateCallback&&this._onUpdateCallback(this._object,Lu),Lu===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Bu in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Bu]=="string"&&(this._valuesStartRepeat[Bu]=this._valuesStartRepeat[Bu]+parseFloat(this._valuesEnd[Bu])),this._yoyo&&this._swapEndStartRepeatValues(Bu),this._valuesStart[Bu]=this._valuesStartRepeat[Bu];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=Tu+this._repeatDelayTime:this._startTime=Tu+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var Du=0,ku=this._chainedTweens.length;Du<ku;Du++)this._chainedTweens[Du].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},Cu.prototype._updateProperties=function(Tu,Pu,Bu,Lu){for(var Ru in Bu)if(Pu[Ru]!==void 0){var Ou=Pu[Ru]||0,Du=Bu[Ru],ku=Array.isArray(Tu[Ru]),Fu=Array.isArray(Du),Nu=!ku&&Fu;Nu?Tu[Ru]=this._interpolationFunction(Du,Lu):typeof Du=="object"&&Du?this._updateProperties(Tu[Ru],Ou,Du,Lu):(Du=this._handleRelativeValue(Ou,Du),typeof Du=="number"&&(Tu[Ru]=Ou+(Du-Ou)*Lu))}},Cu.prototype._handleRelativeValue=function(Tu,Pu){return typeof Pu!="string"?Pu:Pu.charAt(0)==="+"||Pu.charAt(0)==="-"?Tu+parseFloat(Pu):parseFloat(Pu)},Cu.prototype._swapEndStartRepeatValues=function(Tu){var Pu=this._valuesStartRepeat[Tu],Bu=this._valuesEnd[Tu];typeof Bu=="string"?this._valuesStartRepeat[Tu]=this._valuesStartRepeat[Tu]+parseFloat(Bu):this._valuesStartRepeat[Tu]=this._valuesEnd[Tu],this._valuesEnd[Tu]=Pu},Cu}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing:Easing$1,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};const Easing=Easing$1;function tween(Cu,Tu,Pu,Bu=Easing.Linear.None){const Lu=new Tween(Cu).to(Tu,Pu).easing(Bu);nextFrame(()=>Lu.start(0));const Ru=requestAnimationFrameInterval(Du=>{Lu.update(Du)===!1&&Ru()}),Ou=[];return Lu.onDestroy=Du=>(Ou.push(Du),Lu),Lu.destroy=function(){this.stop(),Object.assign(Lu,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let Du;for(;Du=Ou.shift();)Du();Ru()},Lu}function tweenProgress$1(Cu,Tu){return tween({progress:0},{progress:1},Cu,Tu)}const PI$1=Math.PI,PI_2$1=PI$1*2;function formatLatitude(Cu){return Cu%PI_2$1}function formatLongitude(Cu){return Cu%PI_2$1}const getLongitudeParams=(Cu,Tu,Pu)=>{if(Cu=formatLongitude(Cu),Tu=formatLongitude(Tu),Pu===Rotation.Anticlockwise&&Cu>Tu)Tu+=PI_2$1;else if(Pu===Rotation.Clockwise&&Tu>Cu)Cu+=PI_2$1;else{if(Pu!==Rotation.Anticlockwise&&Pu!==Rotation.Clockwise&&Tu-Cu>PI$1)return getLongitudeParams(Cu,Tu,Rotation.Clockwise);if(Pu!==Rotation.Anticlockwise&&Pu!==Rotation.Clockwise&&Cu-Tu>PI$1)return getLongitudeParams(Cu,Tu,Rotation.Anticlockwise)}return{from:Cu,to:Tu}};function progressNumber(Cu,Tu,Pu){return Cu+(Tu-Cu)*Pu}const CameraMovementPlugin=Cu=>{const Tu=(Lu,Ru,Ou={preload:!0})=>new Promise(async(Du,ku)=>{if(Ou.asyncStartCallback&&Ou.asyncStartCallback(),Cu.panoIndex===void 0)return ku(!1);if(Lu.mode&&Lu.mode!==Cu.currentMode&&await new Promise(Nu=>{!Lu.mode||(Cu.once("modeChange",Gu=>{Cu.once("initAnimationEnded",()=>{Gu===Lu.mode&&Nu(!0)})}),Cu.changeMode(Lu.mode,{fov:Lu.fov||void 0,latitude:Lu.latitude||void 0,longitude:Lu.longitude||void 0,panoIndex:Lu.panoIndex||void 0}))}),Lu.mode===Five.Mode.Floorplan||(Ou.preload&&Lu.panoIndex!==void 0&&Lu.panoIndex!==Cu.panoIndex&&await Cu.preloadPano(Lu.panoIndex),Ou.asyncEndCallback&&Ou.asyncEndCallback(),Lu.panoIndex===void 0&&Lu.fov===void 0&&Lu.latitude===void 0&&Lu.longitude===void 0))return Du(!0);const Fu=Lu.panoIndex!==void 0?Lu.panoIndex:Cu.panoIndex;if(Fu!==void 0){const Nu=Object.assign(Lu,{duration:Ru,moveEndCallback:()=>Du(!0),moveCancelCallback:()=>{Du(!0)}});await Cu.moveToPano(Fu,Nu)}else ku(!1)}),Pu=Lu=>{const Ru=Cu.state,Ou=formatLatitude(Ru.latitude),Du=formatLatitude(Lu.latitude),{from:ku,to:Fu}=getLongitudeParams(Ru.longitude,Lu.longitude,Lu.rotation||Rotation.Loop),Nu=Ru.fov,Gu=Lu.fov;return{from:{latitude:Ou,longitude:ku,fov:Nu},to:{latitude:Du,longitude:Fu,fov:Gu}}};return{move:Tu,rotate:async(Lu,Ru,Ou={})=>{Ou.asyncStartCallback&&Ou.asyncStartCallback(),Lu.mode&&Cu.currentMode!==Lu.mode&&await Cu.changeMode(Lu.mode),Lu.mode===Five.Mode.Panorama&&Cu.currentMode===Five.Mode.Panorama&&Lu.panoIndex!==void 0&&Lu.panoIndex!==Cu.panoIndex&&(Ou.preload&&await Cu.preloadPano(Lu.panoIndex),await new Promise((Fu,Nu)=>{Cu.moveToPano(Lu.panoIndex,{moveEndCallback:()=>Fu(!0),moveCancelCallback:()=>Nu(!1),effect:"fade"})})),Ou.asyncEndCallback&&Ou.asyncEndCallback();const{from:Du,to:ku}=Pu(Lu);return await new Promise((Fu,Nu)=>{const Gu=({progress:Xc})=>{const ju={};ju.longitude=progressNumber(Du.longitude,ku.longitude,Xc)%PI_2$1,ju.latitude=progressNumber(Du.latitude,ku.latitude,Xc),ju.fov=progressNumber(Du.fov,ku.fov,Xc),Cu.setState(ju,!0)},zu=()=>{Fu(!0)},Hu=()=>{Fu(!1)};let Wu=Ru;Lu.rotation===Rotation.Loop&&(Wu=Lu.rotateSpeed?Math.ceil(Math.abs(ku.longitude-Du.longitude)/Lu.rotateSpeed*1e3):Ru);const _h=tweenProgress$1(Wu,Easing.Linear.None).onUpdate(Gu).onComplete(zu).onDestroy(Hu);Lu.rotation===Rotation.Loop&&_h.repeat(1/0).yoyo(!0),setTimeout(()=>{_h.destroy(),Fu(!0)},Ru)})}}};var VreoKeyframeEnum=(Cu=>(Cu.CameraMovement="CameraMovement",Cu.PanoTag="PanoTag",Cu.PanoTextLabel="PanoTextLabel",Cu.Prompter="Prompter",Cu.UpdateVRPanorama="UpdateVRPanorama",Cu.ModelVideo="ModelVideo",Cu.PanoEffect="PanoEffect",Cu.InfoPanel="InfoPanel",Cu.VideoEffect="VideoEffect",Cu.BgMusic="BgMusic",Cu.Exit="Exit",Cu.Custom="Custom",Cu))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(Cu=>(Cu.Image="Image",Cu.Video="Video",Cu))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(Cu=>(Cu.Drawer="Drawer",Cu.PopUp="PopUp",Cu))(InfoPanelStyleEnum||{});function CameraMovement(){const Cu=useController(),Tu=useFiveInstance(),Pu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Bu=async Lu=>{Pu.current||(Pu.current=CameraMovementPlugin(Tu));const{start:Ru,end:Ou,data:Du}=Lu,ku=Du,Fu=ku.effect;Fu===CameraMovementEffect.Rotate?await Pu.current.rotate(Du,Ou-Ru):Fu===CameraMovementEffect.Move?await Pu.current.move(Du,Ou-Ru):ku.panoIndex!==void 0&&ku.panoIndex!==Tu.panoIndex?await Pu.current.move(Du,Ou-Ru):await Pu.current.rotate(Du,Ou-Ru)};return Cu.on(VreoKeyframeEnum.CameraMovement,Bu),()=>{Cu.off(VreoKeyframeEnum.CameraMovement,Bu)}},[Cu]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(Cu,Tu,Pu=!0){if(!Cu)return()=>{};if(Pu&&Tu(Cu.clientWidth,Cu.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Bu=new ResizeObserver(()=>Tu(Cu.clientWidth,Cu.clientHeight));return Bu.observe(Cu),resizeObserverCache.set(Cu,resizeObserverCache.get(Cu)||0+1),()=>{Cu&&Bu.unobserve(Cu),resizeObserverCache.get(Cu)===1&&resizeObserverCache.delete(Cu)}}else{const Bu=document.createElement("iframe");return Bu.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Bu.classList.add("resize-sensor-iframe"),Cu.appendChild(Bu),Bu.contentWindow?(Bu.contentWindow.addEventListener("resize",()=>{Tu(Bu.clientWidth,Bu.clientHeight)}),resizeObserverCache.set(Cu,resizeObserverCache.get(Cu)||0+1),()=>{Cu.removeChild(Bu),resizeObserverCache.get(Cu)===1&&resizeObserverCache.delete(Cu)}):()=>{}}}function hasResizeListener(Cu){return Cu?resizeObserverCache.get(Cu)||0>0:!1}function ResizeObserver$1(){const Cu=React.useRef(null),Tu=useController();return React.useEffect(()=>{if(!Cu.current)return;const Pu=Tu.container.parentElement;if(hasResizeListener(Pu))return;const Bu=addResizeListener(Pu,(Lu,Ru)=>{Tu.setContainerSize(Lu,Ru)});return()=>{Bu()}},[]),jsx("div",{className:"resizeObserver-element",ref:Cu})}function InfoPanelImg({url:Cu,children:Tu}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--img",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[Tu,jsx("img",{className:"vreo-infoPanelImg",src:Cu})]})})})})}function InfoPanelVideo({url:Cu,children:Tu}){return jsx("div",{className:"vreo-infoPanel-container",children:jsx("div",{className:"vreo-infoPanel vreo-infoPanel--video",children:jsx("div",{className:"ratio-4-5 vreo-infoPanel-wrapper",children:jsxs("div",{className:"vreo-infoPanel-inner",children:[Tu,jsx("div",{className:"vreo-infoPanelVideo",children:jsx("video",{playsInline:!0,autoPlay:!0,className:"vreo-infoPanelVideo",src:Cu})})]})})})})}const Title=Cu=>!Cu.title&&!Cu.subTitle?null:jsxs(Fragment,{children:[jsx("div",{className:"vreo-infoPanel-title-shadow"}),jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:Cu.title}),jsx("div",{className:"vreo-infoPanel-t2",children:Cu.subTitle})]})]});function InfoPanel(){const Cu=react$1.exports.useRef(),Tu=useController();return react$1.exports.useEffect(()=>{var Bu;if(((Bu=Tu.configs)==null?void 0:Bu.keyframeMap.InfoPanel)===!1)return;const Pu=Lu=>{const{start:Ru,end:Ou,data:Du}=Lu,ku=Du,{title:Fu,subTitle:Nu,style:Gu}=ku;do{if(Gu===InfoPanelStyleEnum.PopUp){ku.type===InfoPanelTypeEnum.Image?Tu.openPopUp(jsx(InfoPanelImg,{url:ku.url,children:jsx(Title,{title:Fu,subTitle:Nu})})):ku.type===InfoPanelTypeEnum.Video&&Tu.openPopUp(jsx(InfoPanelVideo,{url:ku.url,children:jsx(Title,{title:Fu,subTitle:Nu})}));break}ku.type===InfoPanelTypeEnum.Image?Tu.openDrawer({content:jsx(InfoPanelImg,{url:ku.url,children:jsx(Title,{title:Fu,subTitle:Nu})}),height:"60vh"}):ku.type===InfoPanelTypeEnum.Video&&Tu.openDrawer({content:jsx(InfoPanelVideo,{url:ku.url,children:jsx(Title,{title:Fu,subTitle:Nu})}),height:"60vh"})}while(!1);Cu.current=setTimeout(()=>{Tu.openDrawer(!1),Tu.openPopUp(!1)},Ou-Ru)};return Tu.on(VreoKeyframeEnum.InfoPanel,Pu),()=>{Tu.off(VreoKeyframeEnum.InfoPanel,Pu),Cu.current&&clearTimeout(Cu.current)}},[Tu]),jsx(Fragment,{})}const ModelTVVideoPlugin=(Cu,{videoElement:Tu})=>{const Pu={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:Tu},Bu=Gu=>{Pu.videoTexture&&(Pu.videoTexture.image.muted=Gu,Pu.videoTexture.image.play())},Lu=()=>Pu.videoTexture?Pu.videoTexture.image.muted:!0,Ru=()=>{if(Pu.enabled||!Pu.videoTexture)return;Pu.enabled=!0,Pu.videoMeshes=Du(),Pu.videoMeshes.forEach(zu=>Cu.scene.add(zu));const Gu=()=>{if(!Pu.videoTexture)return;const zu=()=>{var Hu;!Pu.videoTexture||((Hu=Pu.videoTexture)==null||Hu.image.removeEventListener("timeupdate",zu),Pu.videoTextureEnabled=!0,Pu.videoMeshes.forEach(Wu=>{Wu.material.map!==Pu.videoTexture&&(Wu.material.map=Pu.videoTexture)}),Cu.needsRender=!0)};Pu.videoTexture.image.addEventListener("timeupdate",zu),Pu.videoTexture&&Pu.videoMeshes.length&&Pu.videoTexture.image.play()};if(Cu.model.loaded)Gu();else return Cu.once("modelLoaded",()=>Gu())},Ou=()=>{!Pu.enabled||(Pu.enabled=!1,Pu.videoMeshes.forEach(Gu=>{Gu.geometry.dispose(),Gu.material.dispose(),Cu.scene.remove(Gu),Pu.videoTexture&&Pu.videoTexture.image.pause()}),Pu.videoMeshes=[],Cu.needsRender=!0)},Du=()=>Pu.rectPoints.map((Gu,zu)=>{const Hu=new BufferGeometry,Wu=128,_h=[];_h.push(Gu[0].x,Gu[0].y,Gu[0].z);for(let ep=1;ep<Wu;ep++)_h.push(Gu[0].x+(Gu[1].x-Gu[0].x)*ep/Wu,Gu[0].y+(Gu[1].y-Gu[0].y)*ep/Wu,Gu[0].z+(Gu[1].z-Gu[0].z)*ep/Wu);_h.push(Gu[1].x,Gu[1].y,Gu[1].z),_h.push(Gu[2].x,Gu[2].y,Gu[2].z);for(let ep=1;ep<Wu;ep++)_h.push(Gu[2].x+(Gu[3].x-Gu[2].x)*ep/Wu,Gu[2].y+(Gu[3].y-Gu[2].y)*ep/Wu,Gu[2].z+(Gu[3].z-Gu[2].z)*ep/Wu);_h.push(Gu[3].x,Gu[3].y,Gu[3].z);const Xc=[];Xc.push(0,1);for(let ep=1;ep<Wu;ep++)Xc.push(0,1-ep/Wu);Xc.push(0,0),Xc.push(1,0);for(let ep=1;ep<Wu;ep++)Xc.push(1,ep/Wu);Xc.push(1,1);const ju=[];for(let ep=0;ep<Wu;ep++)ju.push(ep,ep+1,Wu*2-ep,ep,Wu*2-ep,Wu*2+1-ep);Hu.setAttribute("position",new BufferAttribute(new Float32Array(_h),3)),Hu.setAttribute("uv",new BufferAttribute(new Float32Array(Xc),2)),Hu.setIndex(new BufferAttribute(new Uint32Array(ju),1));const _c=new MeshBasicMaterial({map:Pu.videoTextureEnabled?Pu.videoTexture:Pu.imageTexture,side:DoubleSide}),_f=new Mesh(Hu,_c);return _f.renderOrder=1,_f.name=`video-${zu}-${performance.now()}`,_f}),ku=Gu=>{const zu=new TextureLoader().load(Gu);return zu.minFilter=LinearFilter,zu.magFilter=LinearFilter,zu.format=RGBFormat,zu},Fu=(Gu,zu)=>new Promise((Hu,Wu)=>{const _h=new XMLHttpRequest;_h.onreadystatechange=()=>{if(_h.readyState==4)if(_h.status==200){const Xc=window.URL||window.webkitURL;zu=zu||document.createElement("video"),zu.crossOrigin="anonymous",zu.autoplay=!0,zu.muted=!0,zu.loop=!0,zu.playsInline=!0,zu.src=Xc.createObjectURL(_h.response);const ju=new VideoTexture(zu);ju.minFilter=LinearFilter,ju.magFilter=LinearFilter,ju.format=RGBFormat,Hu(Object.assign(ju,{videoSource:Gu}))}else Wu(new Error("Video download Error: "+_h.status))},_h.onerror=Xc=>Wu(Xc),_h.open("GET",Gu),_h.responseType="blob",_h.send()}),Nu=async(Gu,zu)=>{const{video_src:Hu,video_poster_src:Wu,points:_h}=Gu;Pu.videoSource=Hu,Pu.rectPoints=_h.map(Xc=>Xc.map(({x:ju,y:_c,z:_f})=>new Vector3(ju,_c,_f))),Pu.imageTexture=ku(Wu),zu&&(Pu.videoElement=zu),Pu.videoTexture=await Fu(Pu.videoSource,Pu.videoElement),Pu.enabled=!!Gu.enable,Pu.enabled&&Ru()};return Cu.on("modeChange",()=>Bu(!0)),Cu.on("wantsTapGesture",Gu=>{if(!Pu.enabled)return;const[zu]=Gu.intersectObjects(Cu.scene.children,!0);if(!!zu&&/^video/.test(zu.object.name))return Pu.videoTexture&&Bu(!Pu.videoTexture.image.muted),!1}),Cu.on("panoArrived",()=>{if(!Pu.enabled||Lu())return;const Gu=Cu.camera.position;Pu.rectPoints.find(Hu=>{const Wu=Hu.reduce((_h,Xc)=>new Vector3(_h.x+Xc.x/Hu.length,_h.y+Xc.y/Hu.length,_h.z+Xc.z/Hu.length),new Vector3);return Hu.map(_h=>new Vector3((_h.x+Wu.x)/2,(_h.y+Wu.y)/2,(_h.z+Wu.z)/2)).filter(_h=>{_h=_h.clone().sub(Gu).normalize();const Xc=new Raycaster(Gu,_h),[ju]=Xc.intersectObjects(Cu.scene.children,!0);return!!ju&&/^video/.test(ju.object.name)}).length>=2})||Bu(!0)}),Cu.on("renderFrame",()=>{Pu.videoMeshes.forEach(Gu=>{Gu&&(Gu.needsRender=!0)})}),Cu.on("load",Gu=>{Gu.modelTVVideoData&&Nu(Gu.modelTVVideoData)}),{enable:Ru,disable:Ou,load:Nu}};function createTransMatrix(Cu){const Tu=new Matrix4;return Tu.fromArray(Cu),Pu=>{const Bu=new Vector3(...Pu);return Bu.applyMatrix4(Tu),Bu.toArray()}}function ModelVideo(){const Cu=useController(),Tu=useFiveInstance(),Pu=react$1.exports.useRef(),Bu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{const Lu=async Ru=>{var Wu,_h;Pu.current||(Pu.current=ModelTVVideoPlugin(Tu,{}));const{start:Ou,end:Du}=Ru,{videoSrc:ku,videoPosterSrc:Fu,vertexs:Nu,matrixWorld:Gu}=Ru.data,zu=(()=>{if(Nu.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Nu.length===4)return Nu;const Xc=new Box3;return Nu.forEach(ju=>Xc.expandByPoint(new Vector3(ju.x,ju.y,ju.z))),[new Vector3(Xc.min.x,Xc.max.y,Xc.max.z),new Vector3(Xc.min.x,Xc.min.y,Xc.max.z),new Vector3(Xc.max.x,Xc.min.y,Xc.max.z),new Vector3(Xc.max.x,Xc.max.y,Xc.max.z)]})(),Hu=(()=>{if(Gu){const Xc=createTransMatrix(Gu);return[zu.map(ju=>{const _c=Xc([ju.x,ju.y,ju.z]);return{x:_c[0],y:_c[1],z:_c[2]}})]}return[zu]})();Pu.current.disable(),await Pu.current.load({video_src:ku,video_poster_src:Fu,points:Hu},(_h=(Wu=Cu.configs)==null?void 0:Wu.videos)==null?void 0:_h.modelTVVideo),Pu.current.enable(),Bu.current=setTimeout(()=>{var Xc;return(Xc=Pu.current)==null?void 0:Xc.disable()},Du-Ou)};return Cu.on(VreoKeyframeEnum.ModelVideo,Lu),()=>{Cu.off(VreoKeyframeEnum.ModelVideo,Lu),Bu.current&&clearTimeout(Bu.current)}},[Cu]),jsx(Fragment,{})}var line={},Line;Object.defineProperty(line,"__esModule",{value:!0});var t$1=tslib.exports;function e(Cu){if(Cu&&Cu.__esModule)return Cu;var Tu=Object.create(null);return Cu&&Object.keys(Cu).forEach(function(Pu){if(Pu!=="default"){var Bu=Object.getOwnPropertyDescriptor(Cu,Pu);Object.defineProperty(Tu,Pu,Bu.get?Bu:{enumerable:!0,get:function(){return Cu[Pu]}})}}),Tu.default=Cu,Object.freeze(Tu)}var n=e(require$$1),i=function(Cu){function Tu(){var Pu=Cu.call(this)||this;return Pu.type="LineSegmentsGeometry",Pu.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),Pu.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),Pu.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),Pu}return t$1.__extends(Tu,Cu),Tu.prototype.applyMatrix4=function(Pu){var Bu=this.attributes.instanceStart,Lu=this.attributes.instanceEnd;return Bu!==void 0&&(Bu.applyMatrix4(Pu),Lu.applyMatrix4(Pu),Bu.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},Tu.prototype.setPositions=function(Pu){var Bu;Bu=Pu instanceof Float32Array?Pu:Array.isArray(Pu)?new Float32Array(Pu):new Float32Array;var Lu=new n.InstancedInterleavedBuffer(Bu,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(Lu,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(Lu,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},Tu.prototype.setColors=function(Pu){var Bu;Bu=Pu instanceof Float32Array?Pu:Array.isArray(Pu)?new Float32Array(Pu):new Float32Array;var Lu=new n.InstancedInterleavedBuffer(Bu,6,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(Lu,3,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(Lu,3,3)),this},Tu.prototype.fromWireframeGeometry=function(Pu){return this.setPositions(Pu.attributes.position.array),this},Tu.prototype.fromEdgesGeometry=function(Pu){return this.setPositions(Pu.attributes.position.array),this},Tu.prototype.fromMesh=function(Pu){return this.fromWireframeGeometry(new n.WireframeGeometry(Pu.geometry)),this},Tu.prototype.fromLineSegments=function(Pu){var Bu=Pu.geometry;if(Bu instanceof n.Geometry){var Lu=new n.BufferGeometry().fromGeometry(Bu);this.setPositions(Lu.attributes.position.array)}else Bu instanceof n.BufferGeometry&&this.setPositions(Bu.attributes.position.array);return this},Tu.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n.Box3);var Pu=this.attributes.instanceStart,Bu=this.attributes.instanceEnd;if(Pu!==void 0&&Bu!==void 0){var Lu=new n.Box3;this.boundingBox.setFromBufferAttribute(Pu),Lu.setFromBufferAttribute(Bu),this.boundingBox.union(Lu)}},Tu.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n.Sphere),this.boundingBox===null&&this.computeBoundingBox();var Pu=this.attributes.instanceStart,Bu=this.attributes.instanceEnd;if(Pu!==void 0&&Bu!==void 0){var Lu=this.boundingSphere.center;this.boundingBox.getCenter(Lu);for(var Ru=0,Ou=new n.Vector3,Du=0,ku=Pu.count;Du<ku;Du++)Ou.fromBufferAttribute(Pu,Du),Ru=Math.max(Ru,Lu.distanceToSquared(Ou)),Ou.fromBufferAttribute(Bu,Du),Ru=Math.max(Ru,Lu.distanceToSquared(Ou));this.boundingSphere.radius=Math.sqrt(Ru),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},Tu.prototype.toJSON=function(){},Tu}(n.InstancedBufferGeometry);Object.assign(i.prototype,{isLineSegmentsGeometry:!0});var r$1={uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o=function(Cu){function Tu(Pu){var Bu=Cu.call(this,{uniforms:n.UniformsUtils.clone(r$1.uniforms),vertexShader:r$1.vertexShader,fragmentShader:r$1.fragmentShader,clipping:!0})||this;return Bu.type="LineMaterial",Bu.dashed=!1,Object.defineProperties(Bu,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Lu){this.uniforms.diffuse.value=Lu}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Lu){this.uniforms.linewidth.value=Lu}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Lu){this.uniforms.dashScale.value=Lu}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Lu){this.uniforms.dashSize.value=Lu}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Lu){this.uniforms.gapSize.value=Lu}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Lu){this.uniforms.opacity.value=Lu}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Lu){this.uniforms.resolution.value.copy(Lu)}}}),Bu.setValues(Pu),Bu}return t$1.__extends(Tu,Cu),Tu}(n.ShaderMaterial);Object.assign(o.prototype,{isLineMaterial:!0});var a=function(Cu){function Tu(Pu,Bu){var Lu=Cu.call(this)||this;return Lu.type="LineSegments2",Lu.geometry=Pu!==void 0?Pu:new i,Lu.material=Bu!==void 0?Bu:new o({color:16777215*Math.random()}),Lu}return t$1.__extends(Tu,Cu),Tu.prototype.computeLineDistances=function(){for(var Pu=this.geometry,Bu=Pu.attributes.instanceStart,Lu=Pu.attributes.instanceEnd,Ru=new Float32Array(2*Bu.count),Ou=new n.Vector3,Du=new n.Vector3,ku=0,Fu=0,Nu=Bu.count;ku<Nu;ku++,Fu+=2)Ou.fromBufferAttribute(Bu,ku),Du.fromBufferAttribute(Lu,ku),Ru[Fu]=Fu===0?0:Ru[Fu-1],Ru[Fu+1]=Ru[Fu]+Ou.distanceTo(Du);var Gu=new n.InstancedInterleavedBuffer(Ru,2,1);return Pu.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(Gu,1,0)),Pu.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(Gu,1,1)),this},Tu.prototype.raycast=function(Pu,Bu){Pu.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Lu=Pu.ray,Ru=Pu.camera,Ou=Ru.projectionMatrix,Du=this.geometry,ku=this.material,Fu=ku.resolution,Nu=ku.linewidth,Gu=Du.attributes.instanceStart,zu=Du.attributes.instanceEnd,Hu=new n.Vector4,Wu=new n.Vector4,_h=new n.Vector4,Xc=new n.Vector3,ju=new n.Matrix4,_c=new n.Line3,_f=new n.Vector3;Lu.at(1,_h),_h.w=1,_h.applyMatrix4(Ru.matrixWorldInverse),_h.applyMatrix4(Ou),_h.multiplyScalar(1/_h.w),_h.x*=Fu.x/2,_h.y*=Fu.y/2,_h.z=0,Xc.copy(_h);var ep=this.matrixWorld;ju.multiplyMatrices(Ru.matrixWorldInverse,ep);for(var tp=0,op=Gu.count;tp<op;tp++){Hu.fromBufferAttribute(Gu,tp),Wu.fromBufferAttribute(zu,tp),Hu.w=1,Wu.w=1,Hu.applyMatrix4(ju),Wu.applyMatrix4(ju),Hu.applyMatrix4(Ou),Wu.applyMatrix4(Ou),Hu.multiplyScalar(1/Hu.w),Wu.multiplyScalar(1/Wu.w);var lp=Hu.z<-1&&Wu.z<-1,up=Hu.z>1&&Wu.z>1;if(!lp&&!up){Hu.x*=Fu.x/2,Hu.y*=Fu.y/2,Wu.x*=Fu.x/2,Wu.y*=Fu.y/2,_c.start.copy(Hu),_c.start.z=0,_c.end.copy(Wu),_c.end.z=0;var hp=_c.closestPointToPointParameter(Xc,!0);_c.at(hp,_f);var np=n.MathUtils.lerp(Hu.z,Wu.z,hp),rp=np>=-1&&np<=1,ip=Xc.distanceTo(_f)<.5*Nu;if(rp&&ip){_c.start.fromBufferAttribute(Gu,tp),_c.end.fromBufferAttribute(zu,tp),_c.start.applyMatrix4(ep),_c.end.applyMatrix4(ep);var ap=new n.Vector3,sp=new n.Vector3;Lu.distanceSqToSegment(_c.start,_c.end,sp,ap),Bu.push({point:sp,pointOnLine:ap,distance:Lu.origin.distanceTo(sp),object:this,faceIndex:tp})}}}},Tu}(n.Mesh);Object.assign(a.prototype,{isLineSegments2:!0});var s=function(Cu){function Tu(Pu,Bu){var Lu=Cu.call(this,Pu,Bu)||this;return Lu.type="Line2",Lu}return t$1.__extends(Tu,Cu),Tu}(a);Object.assign(s.prototype,{isLine2:!0});var u=function(Cu){function Tu(){var Pu=Cu.call(this)||this;return Pu.type="LineGeometry",Pu}return t$1.__extends(Tu,Cu),Tu.prototype.setPositions=function(Pu){for(var Bu=Pu.length-3,Lu=new Float32Array(2*Bu),Ru=0;Ru<Bu;Ru+=3)Lu[2*Ru]=Pu[Ru],Lu[2*Ru+1]=Pu[Ru+1],Lu[2*Ru+2]=Pu[Ru+2],Lu[2*Ru+3]=Pu[Ru+3],Lu[2*Ru+4]=Pu[Ru+4],Lu[2*Ru+5]=Pu[Ru+5];return Cu.prototype.setPositions.call(this,Lu),this},Tu.prototype.setColors=function(Pu){for(var Bu=Pu.length-3,Lu=new Float32Array(2*Bu),Ru=0;Ru<Bu;Ru+=3)Lu[2*Ru]=Pu[Ru],Lu[2*Ru+1]=Pu[Ru+1],Lu[2*Ru+2]=Pu[Ru+2],Lu[2*Ru+3]=Pu[Ru+3],Lu[2*Ru+4]=Pu[Ru+4],Lu[2*Ru+5]=Pu[Ru+5];return Cu.prototype.setColors.call(this,Lu),this},Tu.prototype.fromLine=function(Pu){var Bu=Pu.geometry;if(Bu instanceof n.Geometry){var Lu=new n.BufferGeometry().fromGeometry(Bu);this.setPositions(Lu.attributes.position.array)}else Bu instanceof n.BufferGeometry&&this.setPositions(Bu.attributes.position.array);return this},Tu.prototype.copy=function(){return this},Tu}(i);Object.assign(u.prototype,{isLineGeometry:!0});var c=null,l$1=function(Cu){function Tu(Pu,Bu){Pu===void 0&&(Pu=new n.Vector3),Bu===void 0&&(Bu=new n.Vector3);var Lu=Cu.call(this)||this;Lu.type="FiveLine",Lu.needsRender=!0;var Ru=new u,Ou=new o({color:14467195,linewidth:2,dashScale:20,dashed:!1});Lu.line=new s(Ru,Ou);var Du=new n.BufferGeometry,ku=new n.PointsMaterial({color:14467195,size:8,map:c||(c=new n.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return Lu.points=new n.Points(Du,ku),Lu.points.renderOrder=11,Lu.points.frustumCulled=!1,Lu.setPoints(Pu,Bu),Lu.add(Lu.line,Lu.points),Lu}return t$1.__extends(Tu,Cu),Object.defineProperty(Tu,"version",{get:function(){return"5.0.0-alpha.149"},enumerable:!1,configurable:!0}),Tu.prototype.setPoints=function(Pu,Bu){var Lu=[].concat(Pu.toArray(),Bu.toArray());this.points.geometry.setAttribute("position",new n.BufferAttribute(new Float32Array(Lu),3)),this.line.geometry.setPositions(Lu),this.line.computeLineDistances(),this.needsRender=!0},Tu.prototype.getPoints=function(){var Pu=this.points.geometry.attributes.position.array;return[new n.Vector3(Pu[0],Pu[1],Pu[2]),new n.Vector3(Pu[3],Pu[4],Pu[5])]},Tu.prototype.setMaterial=function(Pu){var Bu=this.line.material;for(var Lu in Pu)if(Pu.hasOwnProperty(Lu)){var Ru=Pu[Lu];Lu==="dashed"?(Bu.dashed=Ru,Ru?Bu.defines.USE_DASH="":delete Bu.defines.USE_DASH,Bu.needsUpdate=!0):Bu[Lu]=Pu[Lu]}this.needsRender=!0},Tu.prototype.setResolution=function(Pu,Bu){var Lu=this.line.material.resolution;Lu.x===Pu&&Lu.y===Bu||(Lu.set(Pu,Bu),this.needsRender=!0)},Tu}(n.Object3D);Object.assign(l$1.prototype,{isFiveLine:!0}),Line=line.Line=l$1,line.LineGeometry=u,line.LineMaterial=o,line.LineSegmentsGeometry=i,line.THREE_Line2=s,line.THREE_LineSegments2=a;class BetterTween extends exports.Tween{constructor(){super(...arguments);Cm(this,"disposeMethods",[]);Cm(this,"animationFrameDisposer");Cm(this,"onDispose",Pu=>(this.disposeMethods.push(Pu),this));Cm(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));Cm(this,"dispose",()=>{var Pu;this.stop(),(Pu=this.animationFrameDisposer)==null||Pu.call(this),this.disposeMethods.forEach(Bu=>Bu()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(Cu,Tu=exports.Easing.Linear.None){const Pu=new BetterTween({progress:0}).to({progress:1});return Cu!==void 0&&Pu.duration(Cu),Tu!==void 0&&Pu.easing(Tu),Pu}function lineAnime(Cu,Tu,Pu){const Bu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Lu=new TextureLoader().load(Bu),Ru=new Color(16777215),Ou=new Line;Ou.setMaterial({linewidth:2,color:Ru});const Du=Ou.points.material;return Du.map=Lu,Du.color.set(Ru),Ou.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:ku})=>{const Fu=.5-ku/2,Nu=.5+ku/2,Gu=Tu.clone().lerp(Pu,Fu),zu=Tu.clone().lerp(Pu,Nu);Ou.setPoints(Gu,zu)}).onStart(()=>Cu.scene.add(Ou)).onDispose(()=>{Cu.scene.remove(Ou),Cu.needsRender=!0})}function PanoEffect(){const[Cu,Tu]=react$1.exports.useState(null),Pu=useFiveInstance(),Bu=react$1.exports.useRef(null),[Lu,Ru]=react$1.exports.useState(null),Ou=react$1.exports.useRef(),Du=useController(),ku=useFiveProject2d(),Fu=()=>{Bu.current&&Bu.current.dispose()};return react$1.exports.useEffect(()=>{const Nu=Gu=>{const{start:zu,end:Hu,data:Wu}=Gu,_h=Wu,[Xc,ju]=_h.twoVertexs,_c=new Vector3(Xc.x,Xc.y,Xc.z),_f=new Vector3(ju.x,ju.y,ju.z);Bu.current=lineAnime(Pu,_c.clone(),_f.clone()),Bu.current.play();const ep=_c.lerp(_f,.5),tp=_c.distanceTo(_f),op=ku(ep);if(!op)return;const{x:lp,y:up}=op;Tu({center:ep,distance:tp}),Ru({left:lp,top:up}),Ou.current=setTimeout(()=>{Tu(null),Ru(null),Fu()},Hu-zu)};return Du.on(VreoKeyframeEnum.PanoEffect,Nu),()=>{Du.off(VreoKeyframeEnum.PanoEffect,Nu),Ou.current&&clearTimeout(Ou.current),Fu()}},[Du]),react$1.exports.useEffect(()=>{const Nu=()=>{if(!(Cu!=null&&Cu.center))return;const{x:Gu,y:zu,z:Hu}=Cu.center,Wu=ku(new Vector3(Gu,zu,Hu));if(!Wu)return;const{x:_h,y:Xc}=Wu;Ru({left:_h,top:Xc})};return Pu.on("currentStateChange",Nu),()=>{Pu.off("currentStateChange",Nu)}},[Cu==null?void 0:Cu.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":Cu}),style:{left:((Lu==null?void 0:Lu.left)||0)+"px",top:((Lu==null?void 0:Lu.top)||0)+"px"},children:(Cu==null?void 0:Cu.distance.toFixed(4))+"m"})})}var CSS3DObject=function(Cu){Object3D.call(this),this.element=Cu,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(Tu){Tu.element instanceof Element&&Tu.element.parentNode!==null&&Tu.element.parentNode.removeChild(Tu.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(Cu){CSS3DObject.call(this,Cu)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var Cu=this,Tu,Pu,Bu,Lu,Ru=new Matrix4,Ou={camera:{fov:0,style:""},objects:new WeakMap},Du=document.createElement("div");Du.style.overflow="hidden",this.domElement=Du;var ku=document.createElement("div");ku.style.WebkitTransformStyle="preserve-3d",ku.style.transformStyle="preserve-3d",ku.style.pointerEvents="none",Du.appendChild(ku);var Fu=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:Tu,height:Pu}},this.setSize=function(ju,_c){Tu=ju,Pu=_c,Bu=Tu/2,Lu=Pu/2,Du.style.width=ju+"px",Du.style.height=_c+"px",ku.style.width=ju+"px",ku.style.height=_c+"px"};function Nu(ju){return Math.abs(ju)<1e-10?0:ju}function Gu(ju){var _c=ju.elements;return"matrix3d("+Nu(_c[0])+","+Nu(-_c[1])+","+Nu(_c[2])+","+Nu(_c[3])+","+Nu(_c[4])+","+Nu(-_c[5])+","+Nu(_c[6])+","+Nu(_c[7])+","+Nu(_c[8])+","+Nu(-_c[9])+","+Nu(_c[10])+","+Nu(_c[11])+","+Nu(_c[12])+","+Nu(-_c[13])+","+Nu(_c[14])+","+Nu(_c[15])+")"}function zu(ju,_c){var _f=ju.elements,ep="matrix3d("+Nu(_f[0])+","+Nu(_f[1])+","+Nu(_f[2])+","+Nu(_f[3])+","+Nu(-_f[4])+","+Nu(-_f[5])+","+Nu(-_f[6])+","+Nu(-_f[7])+","+Nu(_f[8])+","+Nu(_f[9])+","+Nu(_f[10])+","+Nu(_f[11])+","+Nu(_f[12])+","+Nu(_f[13])+","+Nu(_f[14])+","+Nu(_f[15])+")";return Fu?"translate(-50%,-50%)translate("+Bu+"px,"+Lu+"px)"+_c+ep:"translate(-50%,-50%)"+ep}function Hu(ju,_c,_f,ep){if(ju instanceof CSS3DObject){ju.onBeforeRender(Cu,_c,_f);var tp;ju instanceof CSS3DSprite?(Ru.copy(_f.matrixWorldInverse),Ru.transpose(),Ru.copyPosition(ju.matrixWorld),Ru.scale(ju.scale),Ru.elements[3]=0,Ru.elements[7]=0,Ru.elements[11]=0,Ru.elements[15]=1,tp=zu(Ru,ep)):tp=zu(ju.matrixWorld,ep);var op=ju.element,lp=Ou.objects.get(ju);if(lp===void 0||lp.style!==tp){op.style.WebkitTransform=tp,op.style.transform=tp;var up={style:tp};Fu&&(up.distanceToCameraSquared=Wu(_f,ju)),Ou.objects.set(ju,up)}op.style.display=ju.visible?"":"none",op.parentNode!==ku&&ku.appendChild(op),ju.onAfterRender(Cu,_c,_f)}for(var hp=0,np=ju.children.length;hp<np;hp++)Hu(ju.children[hp],_c,_f,ep)}var Wu=function(){var ju=new Vector3,_c=new Vector3;return function(_f,ep){return ju.setFromMatrixPosition(_f.matrixWorld),_c.setFromMatrixPosition(ep.matrixWorld),ju.distanceToSquared(_c)}}();function _h(ju){var _c=[];return ju.traverse(function(_f){_f instanceof CSS3DObject&&_c.push(_f)}),_c}function Xc(ju){for(var _c=_h(ju).sort(function(op,lp){var up=Ou.objects.get(op).distanceToCameraSquared,hp=Ou.objects.get(lp).distanceToCameraSquared;return up-hp}),_f=_c.length,ep=0,tp=_c.length;ep<tp;ep++)_c[ep].element.style.zIndex=_f-ep}this.render=function(ju,_c){var _f=_c.projectionMatrix.elements[5]*Lu;if(Ou.camera.fov!==_f&&(_c.isPerspectiveCamera?(Du.style.WebkitPerspective=_f+"px",Du.style.perspective=_f+"px"):(Du.style.WebkitPerspective="",Du.style.perspective=""),Ou.camera.fov=_f),ju.autoUpdate===!0&&ju.updateMatrixWorld(),_c.parent===null&&_c.updateMatrixWorld(),_c.isOrthographicCamera)var ep=-(_c.right+_c.left)/2,tp=(_c.top+_c.bottom)/2;var op=_c.isOrthographicCamera?"scale("+_f+")translate("+Nu(ep)+"px,"+Nu(tp)+"px)"+Gu(_c.matrixWorldInverse):"translateZ("+_f+"px)"+Gu(_c.matrixWorldInverse),lp=op+"translate("+Bu+"px,"+Lu+"px)";Ou.camera.style!==lp&&!Fu&&(ku.style.WebkitTransform=lp,ku.style.transform=lp,Ou.camera.style=lp),Hu(ju,ju,_c,op),Fu&&Xc(ju)}};/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={},l=void 0,aa=mod;function r(Cu,Tu){var Pu=Cu.split("."),Bu=aa;!(Pu[0]in Bu)&&Bu.execScript&&Bu.execScript("var "+Pu[0]);for(var Lu;Pu.length&&(Lu=Pu.shift());)!Pu.length&&Tu!==l?Bu[Lu]=Tu:Bu=Bu[Lu]?Bu[Lu]:Bu[Lu]={}}var t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function v(Cu){var Tu=Cu.length,Pu=0,Bu=Number.POSITIVE_INFINITY,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu;for(Gu=0;Gu<Tu;++Gu)Cu[Gu]>Pu&&(Pu=Cu[Gu]),Cu[Gu]<Bu&&(Bu=Cu[Gu]);for(Lu=1<<Pu,Ru=new(t?Uint32Array:Array)(Lu),Ou=1,Du=0,ku=2;Ou<=Pu;){for(Gu=0;Gu<Tu;++Gu)if(Cu[Gu]===Ou){for(Fu=0,Nu=Du,zu=0;zu<Ou;++zu)Fu=Fu<<1|Nu&1,Nu>>=1;for(Hu=Ou<<16|Gu,zu=Fu;zu<Lu;zu+=ku)Ru[zu]=Hu;++Du}++Ou,Du<<=1,ku<<=1}return[Ru,Pu,Bu]}function w(Cu,Tu){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=t?new Uint8Array(Cu):Cu,this.m=!1,this.i=y,this.r=!1,(Tu||!(Tu={}))&&(Tu.index&&(this.a=Tu.index),Tu.bufferSize&&(this.h=Tu.bufferSize),Tu.bufferType&&(this.i=Tu.bufferType),Tu.resize&&(this.r=Tu.resize)),this.i){case A:this.b=32768,this.c=new(t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0,this.c=new(t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var A=0,y=1,B$1={t:A,s:y};w.prototype.k=function(){for(;!this.m;){var Cu=C$1(this,3);switch(Cu&1&&(this.m=!0),Cu>>>=1,Cu){case 0:var Tu=this.input,Pu=this.a,Bu=this.c,Lu=this.b,Ru=Tu.length,Ou=l,Du=l,ku=Bu.length,Fu=l;if(this.d=this.f=0,Pu+1>=Ru)throw Error("invalid uncompressed block header: LEN");if(Ou=Tu[Pu++]|Tu[Pu++]<<8,Pu+1>=Ru)throw Error("invalid uncompressed block header: NLEN");if(Du=Tu[Pu++]|Tu[Pu++]<<8,Ou===~Du)throw Error("invalid uncompressed block header: length verify");if(Pu+Ou>Tu.length)throw Error("input buffer is broken");switch(this.i){case A:for(;Lu+Ou>Bu.length;){if(Fu=ku-Lu,Ou-=Fu,t)Bu.set(Tu.subarray(Pu,Pu+Fu),Lu),Lu+=Fu,Pu+=Fu;else for(;Fu--;)Bu[Lu++]=Tu[Pu++];this.b=Lu,Bu=this.e(),Lu=this.b}break;case y:for(;Lu+Ou>Bu.length;)Bu=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(t)Bu.set(Tu.subarray(Pu,Pu+Ou),Lu),Lu+=Ou,Pu+=Ou;else for(;Ou--;)Bu[Lu++]=Tu[Pu++];this.a=Pu,this.b=Lu,this.c=Bu;break;case 1:this.j(ba,ca);break;case 2:for(var Nu=C$1(this,5)+257,Gu=C$1(this,5)+1,zu=C$1(this,4)+4,Hu=new(t?Uint8Array:Array)(D.length),Wu=l,_h=l,Xc=l,ju=l,_c=l,_f=l,ep=l,op=l,tp=l,op=0;op<zu;++op)Hu[D[op]]=C$1(this,3);if(!t)for(op=zu,zu=Hu.length;op<zu;++op)Hu[D[op]]=0;for(Wu=v(Hu),ju=new(t?Uint8Array:Array)(Nu+Gu),op=0,tp=Nu+Gu;op<tp;)switch(_c=E(this,Wu),_c){case 16:for(ep=3+C$1(this,2);ep--;)ju[op++]=_f;break;case 17:for(ep=3+C$1(this,3);ep--;)ju[op++]=0;_f=0;break;case 18:for(ep=11+C$1(this,7);ep--;)ju[op++]=0;_f=0;break;default:_f=ju[op++]=_c}_h=v(t?ju.subarray(0,Nu):ju.slice(0,Nu)),Xc=v(t?ju.subarray(Nu):ju.slice(Nu)),this.j(_h,Xc);break;default:throw Error("unknown BTYPE: "+Cu)}}return this.n()};var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H$1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H$1):H$1,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=t?new Uint8Array(ea):ea,O=new(t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q$1=new(t?Uint8Array:Array)(30),R$1,ga;R$1=0;for(ga=Q$1.length;R$1<ga;++R$1)Q$1[R$1]=5;var ca=v(Q$1);function C$1(Cu,Tu){for(var Pu=Cu.f,Bu=Cu.d,Lu=Cu.input,Ru=Cu.a,Ou=Lu.length,Du;Bu<Tu;){if(Ru>=Ou)throw Error("input buffer is broken");Pu|=Lu[Ru++]<<Bu,Bu+=8}return Du=Pu&(1<<Tu)-1,Cu.f=Pu>>>Tu,Cu.d=Bu-Tu,Cu.a=Ru,Du}function E(Cu,Tu){for(var Pu=Cu.f,Bu=Cu.d,Lu=Cu.input,Ru=Cu.a,Ou=Lu.length,Du=Tu[0],ku=Tu[1],Fu,Nu;Bu<ku&&!(Ru>=Ou);)Pu|=Lu[Ru++]<<Bu,Bu+=8;if(Fu=Du[Pu&(1<<ku)-1],Nu=Fu>>>16,Nu>Bu)throw Error("invalid code length: "+Nu);return Cu.f=Pu>>Nu,Cu.d=Bu-Nu,Cu.a=Ru,Fu&65535}w.prototype.j=function(Cu,Tu){var Pu=this.c,Bu=this.b;this.o=Cu;for(var Lu=Pu.length-258,Ru,Ou,Du,ku;(Ru=E(this,Cu))!==256;)if(256>Ru)Bu>=Lu&&(this.b=Bu,Pu=this.e(),Bu=this.b),Pu[Bu++]=Ru;else for(Ou=Ru-257,ku=I[Ou],0<K[Ou]&&(ku+=C$1(this,K[Ou])),Ru=E(this,Tu),Du=da[Ru],0<N[Ru]&&(Du+=C$1(this,N[Ru])),Bu>=Lu&&(this.b=Bu,Pu=this.e(),Bu=this.b);ku--;)Pu[Bu]=Pu[Bu++-Du];for(;8<=this.d;)this.d-=8,this.a--;this.b=Bu};w.prototype.w=function(Cu,Tu){var Pu=this.c,Bu=this.b;this.o=Cu;for(var Lu=Pu.length,Ru,Ou,Du,ku;(Ru=E(this,Cu))!==256;)if(256>Ru)Bu>=Lu&&(Pu=this.e(),Lu=Pu.length),Pu[Bu++]=Ru;else for(Ou=Ru-257,ku=I[Ou],0<K[Ou]&&(ku+=C$1(this,K[Ou])),Ru=E(this,Tu),Du=da[Ru],0<N[Ru]&&(Du+=C$1(this,N[Ru])),Bu+ku>Lu&&(Pu=this.e(),Lu=Pu.length);ku--;)Pu[Bu]=Pu[Bu++-Du];for(;8<=this.d;)this.d-=8,this.a--;this.b=Bu};w.prototype.e=function(){var Cu=new(t?Uint8Array:Array)(this.b-32768),Tu=this.b-32768,Pu,Bu,Lu=this.c;if(t)Cu.set(Lu.subarray(32768,Cu.length));else for(Pu=0,Bu=Cu.length;Pu<Bu;++Pu)Cu[Pu]=Lu[Pu+32768];if(this.g.push(Cu),this.l+=Cu.length,t)Lu.set(Lu.subarray(Tu,Tu+32768));else for(Pu=0;32768>Pu;++Pu)Lu[Pu]=Lu[Tu+Pu];return this.b=32768,Lu};w.prototype.z=function(Cu){var Tu,Pu=this.input.length/this.a+1|0,Bu,Lu,Ru,Ou=this.input,Du=this.c;return Cu&&(typeof Cu.p=="number"&&(Pu=Cu.p),typeof Cu.u=="number"&&(Pu+=Cu.u)),2>Pu?(Bu=(Ou.length-this.a)/this.o[2],Ru=258*(Bu/2)|0,Lu=Ru<Du.length?Du.length+Ru:Du.length<<1):Lu=Du.length*Pu,t?(Tu=new Uint8Array(Lu),Tu.set(Du)):Tu=Du,this.c=Tu};w.prototype.n=function(){var Cu=0,Tu=this.c,Pu=this.g,Bu,Lu=new(t?Uint8Array:Array)(this.l+(this.b-32768)),Ru,Ou,Du,ku;if(Pu.length===0)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Ru=0,Ou=Pu.length;Ru<Ou;++Ru)for(Bu=Pu[Ru],Du=0,ku=Bu.length;Du<ku;++Du)Lu[Cu++]=Bu[Du];for(Ru=32768,Ou=this.b;Ru<Ou;++Ru)Lu[Cu++]=Tu[Ru];return this.g=[],this.buffer=Lu};w.prototype.v=function(){var Cu,Tu=this.b;return t?this.r?(Cu=new Uint8Array(Tu),Cu.set(this.c.subarray(0,Tu))):Cu=this.c.subarray(0,Tu):(this.c.length>Tu&&(this.c.length=Tu),Cu=this.c),this.buffer=Cu};function W$1(Cu,Tu){var Pu,Bu;switch(this.input=Cu,this.a=0,(Tu||!(Tu={}))&&(Tu.index&&(this.a=Tu.index),Tu.verify&&(this.A=Tu.verify)),Pu=Cu[this.a++],Bu=Cu[this.a++],Pu&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method")}if(((Pu<<8)+Bu)%31!==0)throw Error("invalid fcheck flag:"+((Pu<<8)+Bu)%31);if(Bu&32)throw Error("fdict flag is not supported");this.q=new w(Cu,{index:this.a,bufferSize:Tu.bufferSize,bufferType:Tu.bufferType,resize:Tu.resize})}W$1.prototype.k=function(){var Cu=this.input,Tu,Pu;if(Tu=this.q.k(),this.a=this.q.a,this.A){Pu=(Cu[this.a++]<<24|Cu[this.a++]<<16|Cu[this.a++]<<8|Cu[this.a++])>>>0;var Bu=Tu;if(typeof Bu=="string"){var Lu=Bu.split(""),Ru,Ou;for(Ru=0,Ou=Lu.length;Ru<Ou;Ru++)Lu[Ru]=(Lu[Ru].charCodeAt(0)&255)>>>0;Bu=Lu}for(var Du=1,ku=0,Fu=Bu.length,Nu,Gu=0;0<Fu;){Nu=1024<Fu?1024:Fu,Fu-=Nu;do Du+=Bu[Gu++],ku+=Du;while(--Nu);Du%=65521,ku%=65521}if(Pu!==(ku<<16|Du)>>>0)throw Error("invalid adler-32 checksum")}return Tu};var ha=8;r("Zlib.Inflate",W$1);r("Zlib.Inflate.prototype.decompress",W$1.prototype.k);var X={ADAPTIVE:B$1.s,BLOCK:B$1.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);var Zlib=mod.Zlib,NURBSUtils={findSpan:function(Cu,Tu,Pu){var Bu=Pu.length-Cu-1;if(Tu>=Pu[Bu])return Bu-1;if(Tu<=Pu[Cu])return Cu;for(var Lu=Cu,Ru=Bu,Ou=Math.floor((Lu+Ru)/2);Tu<Pu[Ou]||Tu>=Pu[Ou+1];)Tu<Pu[Ou]?Ru=Ou:Lu=Ou,Ou=Math.floor((Lu+Ru)/2);return Ou},calcBasisFunctions:function(Cu,Tu,Pu,Bu){var Lu=[],Ru=[],Ou=[];Lu[0]=1;for(var Du=1;Du<=Pu;++Du){Ru[Du]=Tu-Bu[Cu+1-Du],Ou[Du]=Bu[Cu+Du]-Tu;for(var ku=0,Fu=0;Fu<Du;++Fu){var Nu=Ou[Fu+1],Gu=Ru[Du-Fu],zu=Lu[Fu]/(Nu+Gu);Lu[Fu]=ku+Nu*zu,ku=Gu*zu}Lu[Du]=ku}return Lu},calcBSplinePoint:function(Cu,Tu,Pu,Bu){for(var Lu=this.findSpan(Cu,Bu,Tu),Ru=this.calcBasisFunctions(Lu,Bu,Cu,Tu),Ou=new Vector4(0,0,0,0),Du=0;Du<=Cu;++Du){var ku=Pu[Lu-Cu+Du],Fu=Ru[Du],Nu=ku.w*Fu;Ou.x+=ku.x*Nu,Ou.y+=ku.y*Nu,Ou.z+=ku.z*Nu,Ou.w+=ku.w*Fu}return Ou},calcBasisFunctionDerivatives:function(Cu,Tu,Pu,Bu,Lu){for(var Ru=[],Ou=0;Ou<=Pu;++Ou)Ru[Ou]=0;for(var Du=[],Ou=0;Ou<=Bu;++Ou)Du[Ou]=Ru.slice(0);for(var ku=[],Ou=0;Ou<=Pu;++Ou)ku[Ou]=Ru.slice(0);ku[0][0]=1;for(var Fu=Ru.slice(0),Nu=Ru.slice(0),Gu=1;Gu<=Pu;++Gu){Fu[Gu]=Tu-Lu[Cu+1-Gu],Nu[Gu]=Lu[Cu+Gu]-Tu;for(var zu=0,hp=0;hp<Gu;++hp){var Hu=Nu[hp+1],Wu=Fu[Gu-hp];ku[Gu][hp]=Hu+Wu;var _h=ku[hp][Gu-1]/ku[Gu][hp];ku[hp][Gu]=zu+Hu*_h,zu=Wu*_h}ku[Gu][Gu]=zu}for(var Gu=0;Gu<=Pu;++Gu)Du[0][Gu]=ku[Gu][Pu];for(var hp=0;hp<=Pu;++hp){for(var Xc=0,ju=1,_c=[],Ou=0;Ou<=Pu;++Ou)_c[Ou]=Ru.slice(0);_c[0][0]=1;for(var _f=1;_f<=Bu;++_f){var ep=0,tp=hp-_f,op=Pu-_f;hp>=_f&&(_c[ju][0]=_c[Xc][0]/ku[op+1][tp],ep=_c[ju][0]*ku[tp][op]);for(var lp=tp>=-1?1:-tp,up=hp-1<=op?_f-1:Pu-hp,Gu=lp;Gu<=up;++Gu)_c[ju][Gu]=(_c[Xc][Gu]-_c[Xc][Gu-1])/ku[op+1][tp+Gu],ep+=_c[ju][Gu]*ku[tp+Gu][op];hp<=op&&(_c[ju][_f]=-_c[Xc][_f-1]/ku[op+1][hp],ep+=_c[ju][_f]*ku[hp][op]),Du[_f][hp]=ep;var Gu=Xc;Xc=ju,ju=Gu}}for(var hp=Pu,_f=1;_f<=Bu;++_f){for(var Gu=0;Gu<=Pu;++Gu)Du[_f][Gu]*=hp;hp*=Pu-_f}return Du},calcBSplineDerivatives:function(Cu,Tu,Pu,Bu,Lu){for(var Ru=Lu<Cu?Lu:Cu,Ou=[],Du=this.findSpan(Cu,Bu,Tu),ku=this.calcBasisFunctionDerivatives(Du,Bu,Cu,Ru,Tu),Fu=[],Nu=0;Nu<Pu.length;++Nu){var Gu=Pu[Nu].clone(),zu=Gu.w;Gu.x*=zu,Gu.y*=zu,Gu.z*=zu,Fu[Nu]=Gu}for(var Hu=0;Hu<=Ru;++Hu){for(var Gu=Fu[Du-Cu].clone().multiplyScalar(ku[Hu][0]),Wu=1;Wu<=Cu;++Wu)Gu.add(Fu[Du-Cu+Wu].clone().multiplyScalar(ku[Hu][Wu]));Ou[Hu]=Gu}for(var Hu=Ru+1;Hu<=Lu+1;++Hu)Ou[Hu]=new Vector4(0,0,0);return Ou},calcKoverI:function(Cu,Tu){for(var Pu=1,Bu=2;Bu<=Cu;++Bu)Pu*=Bu;for(var Lu=1,Bu=2;Bu<=Tu;++Bu)Lu*=Bu;for(var Bu=2;Bu<=Cu-Tu;++Bu)Lu*=Bu;return Pu/Lu},calcRationalCurveDerivatives:function(Cu){for(var Tu=Cu.length,Pu=[],Bu=[],Lu=0;Lu<Tu;++Lu){var Ru=Cu[Lu];Pu[Lu]=new Vector3(Ru.x,Ru.y,Ru.z),Bu[Lu]=Ru.w}for(var Ou=[],Du=0;Du<Tu;++Du){for(var ku=Pu[Du].clone(),Lu=1;Lu<=Du;++Lu)ku.sub(Ou[Du-Lu].clone().multiplyScalar(this.calcKoverI(Du,Lu)*Bu[Lu]));Ou[Du]=ku.divideScalar(Bu[0])}return Ou},calcNURBSDerivatives:function(Cu,Tu,Pu,Bu,Lu){var Ru=this.calcBSplineDerivatives(Cu,Tu,Pu,Bu,Lu);return this.calcRationalCurveDerivatives(Ru)},calcSurfacePoint:function(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du){for(var ku=this.findSpan(Cu,Ru,Pu),Fu=this.findSpan(Tu,Ou,Bu),Nu=this.calcBasisFunctions(ku,Ru,Cu,Pu),Gu=this.calcBasisFunctions(Fu,Ou,Tu,Bu),zu=[],Hu=0;Hu<=Tu;++Hu){zu[Hu]=new Vector4(0,0,0,0);for(var Wu=0;Wu<=Cu;++Wu){var _h=Lu[ku-Cu+Wu][Fu-Tu+Hu].clone(),Xc=_h.w;_h.x*=Xc,_h.y*=Xc,_h.z*=Xc,zu[Hu].add(_h.multiplyScalar(Nu[Wu]))}}for(var ju=new Vector4(0,0,0,0),Hu=0;Hu<=Tu;++Hu)ju.add(zu[Hu].multiplyScalar(Gu[Hu]));ju.divideScalar(ju.w),Du.set(ju.x,ju.y,ju.z)}},NURBSCurve=function(Cu,Tu,Pu,Bu,Lu){Curve.call(this),this.degree=Cu,this.knots=Tu,this.controlPoints=[],this.startKnot=Bu||0,this.endKnot=Lu||this.knots.length-1;for(var Ru=0;Ru<Pu.length;++Ru){var Ou=Pu[Ru];this.controlPoints[Ru]=new Vector4(Ou.x,Ou.y,Ou.z,Ou.w)}};NURBSCurve.prototype=Object.create(Curve.prototype);NURBSCurve.prototype.constructor=NURBSCurve;NURBSCurve.prototype.getPoint=function(Cu,Tu){var Pu=Tu||new Vector3,Bu=this.knots[this.startKnot]+Cu*(this.knots[this.endKnot]-this.knots[this.startKnot]),Lu=NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Bu);return Lu.w!=1&&Lu.divideScalar(Lu.w),Pu.set(Lu.x,Lu.y,Lu.z)};NURBSCurve.prototype.getTangent=function(Cu,Tu){var Pu=Tu||new Vector3,Bu=this.knots[0]+Cu*(this.knots[this.knots.length-1]-this.knots[0]),Lu=NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Bu,1);return Pu.copy(Lu[1]).normalize(),Pu};(function(){var Cu,Tu,Pu;function Bu(np){Loader.call(this,np)}Bu.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Bu,load:function(np,rp,ip,ap){var sp=this,cp=sp.path===""?LoaderUtils.extractUrlBase(np):sp.path,dp=new FileLoader(this.manager);dp.setPath(sp.path),dp.setResponseType("arraybuffer"),dp.load(np,function(fp){try{rp(sp.parse(fp,cp))}catch(vp){ap?ap(vp):console.error(vp),sp.manager.itemError(np)}},ip,ap)},parse:function(np,rp){if(Gu(np))Cu=new ku().parse(np);else{var ip=op(np);if(!zu(ip))throw new Error("THREE.FBXLoader: Unknown format.");if(Hu(ip)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Hu(ip));Cu=new Du().parse(ip)}var ap=new TextureLoader(this.manager).setPath(this.resourcePath||rp).setCrossOrigin(this.crossOrigin);return new Lu(ap,this.manager).parse(Cu)}});function Lu(np,rp){this.textureLoader=np,this.manager=rp}Lu.prototype={constructor:Lu,parse:function(){Tu=this.parseConnections();var np=this.parseImages(),rp=this.parseTextures(np),ip=this.parseMaterials(rp),ap=this.parseDeformers(),sp=new Ru().parse(ap);return this.parseScene(ap,sp,ip),Pu},parseConnections:function(){var np=new Map;if("Connections"in Cu){var rp=Cu.Connections.connections;rp.forEach(function(ip){var ap=ip[0],sp=ip[1],cp=ip[2];np.has(ap)||np.set(ap,{parents:[],children:[]});var dp={ID:sp,relationship:cp};np.get(ap).parents.push(dp),np.has(sp)||np.set(sp,{parents:[],children:[]});var fp={ID:ap,relationship:cp};np.get(sp).children.push(fp)})}return np},parseImages:function(){var np={},rp={};if("Video"in Cu.Objects){var ip=Cu.Objects.Video;for(var ap in ip){var sp=ip[ap],cp=parseInt(ap);if(np[cp]=sp.RelativeFilename||sp.Filename,"Content"in sp){var dp=sp.Content instanceof ArrayBuffer&&sp.Content.byteLength>0,fp=typeof sp.Content=="string"&&sp.Content!=="";if(dp||fp){var vp=this.parseImage(ip[ap]);rp[sp.RelativeFilename||sp.Filename]=vp}}}}for(var cp in np){var _p=np[cp];rp[_p]!==void 0?np[cp]=rp[_p]:np[cp]=np[cp].split("\\").pop()}return np},parseImage:function(np){var rp=np.Content,ip=np.RelativeFilename||np.Filename,ap=ip.slice(ip.lastIndexOf(".")+1).toLowerCase(),sp;switch(ap){case"bmp":sp="image/bmp";break;case"jpg":case"jpeg":sp="image/jpeg";break;case"png":sp="image/png";break;case"tif":sp="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",ip),sp="image/tga";break;default:console.warn('FBXLoader: Image type "'+ap+'" is not supported.');return}if(typeof rp=="string")return"data:"+sp+";base64,"+rp;var cp=new Uint8Array(rp);return window.URL.createObjectURL(new Blob([cp],{type:sp}))},parseTextures:function(np){var rp=new Map;if("Texture"in Cu.Objects){var ip=Cu.Objects.Texture;for(var ap in ip){var sp=this.parseTexture(ip[ap],np);rp.set(parseInt(ap),sp)}}return rp},parseTexture:function(np,rp){var ip=this.loadTexture(np,rp);ip.ID=np.id,ip.name=np.attrName;var ap=np.WrapModeU,sp=np.WrapModeV,cp=ap!==void 0?ap.value:0,dp=sp!==void 0?sp.value:0;if(ip.wrapS=cp===0?RepeatWrapping:ClampToEdgeWrapping,ip.wrapT=dp===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in np){var fp=np.Scaling.value;ip.repeat.x=fp[0],ip.repeat.y=fp[1]}return ip},loadTexture:function(np,rp){var ip,ap=this.textureLoader.path,sp=Tu.get(np.id).children;sp!==void 0&&sp.length>0&&rp[sp[0].ID]!==void 0&&(ip=rp[sp[0].ID],(ip.indexOf("blob:")===0||ip.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var cp,dp=np.FileName.slice(-3).toLowerCase();if(dp==="tga"){var fp=this.manager.getHandler(".tga");fp===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",np.RelativeFilename),cp=new Texture):cp=fp.load(ip)}else dp==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",np.RelativeFilename),cp=new Texture):cp=this.textureLoader.load(ip);return this.textureLoader.setPath(ap),cp},parseMaterials:function(np){var rp=new Map;if("Material"in Cu.Objects){var ip=Cu.Objects.Material;for(var ap in ip){var sp=this.parseMaterial(ip[ap],np);sp!==null&&rp.set(parseInt(ap),sp)}}return rp},parseMaterial:function(np,rp){var ip=np.id,ap=np.attrName,sp=np.ShadingModel;if(typeof sp=="object"&&(sp=sp.value),!Tu.has(ip))return null;var cp=this.parseParameters(np,rp,ip),dp;switch(sp.toLowerCase()){case"phong":dp=new MeshPhongMaterial;break;case"lambert":dp=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',sp),dp=new MeshPhongMaterial;break}return dp.setValues(cp),dp.name=ap,dp},parseParameters:function(np,rp,ip){var ap={};np.BumpFactor&&(ap.bumpScale=np.BumpFactor.value),np.Diffuse?ap.color=new Color().fromArray(np.Diffuse.value):np.DiffuseColor&&np.DiffuseColor.type==="Color"&&(ap.color=new Color().fromArray(np.DiffuseColor.value)),np.DisplacementFactor&&(ap.displacementScale=np.DisplacementFactor.value),np.Emissive?ap.emissive=new Color().fromArray(np.Emissive.value):np.EmissiveColor&&np.EmissiveColor.type==="Color"&&(ap.emissive=new Color().fromArray(np.EmissiveColor.value)),np.EmissiveFactor&&(ap.emissiveIntensity=parseFloat(np.EmissiveFactor.value)),np.Opacity&&(ap.opacity=parseFloat(np.Opacity.value)),ap.opacity<1&&(ap.transparent=!0),np.ReflectionFactor&&(ap.reflectivity=np.ReflectionFactor.value),np.Shininess&&(ap.shininess=np.Shininess.value),np.Specular?ap.specular=new Color().fromArray(np.Specular.value):np.SpecularColor&&np.SpecularColor.type==="Color"&&(ap.specular=new Color().fromArray(np.SpecularColor.value));var sp=this;return Tu.get(ip).children.forEach(function(cp){var dp=cp.relationship;switch(dp){case"Bump":ap.bumpMap=sp.getTexture(rp,cp.ID);break;case"Maya|TEX_ao_map":ap.aoMap=sp.getTexture(rp,cp.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":ap.map=sp.getTexture(rp,cp.ID),ap.map.encoding=sRGBEncoding;break;case"DisplacementColor":ap.displacementMap=sp.getTexture(rp,cp.ID);break;case"EmissiveColor":ap.emissiveMap=sp.getTexture(rp,cp.ID),ap.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":ap.normalMap=sp.getTexture(rp,cp.ID);break;case"ReflectionColor":ap.envMap=sp.getTexture(rp,cp.ID),ap.envMap.mapping=EquirectangularReflectionMapping,ap.envMap.encoding=sRGBEncoding;break;case"SpecularColor":ap.specularMap=sp.getTexture(rp,cp.ID),ap.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":ap.alphaMap=sp.getTexture(rp,cp.ID),ap.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",dp);break}}),ap},getTexture:function(np,rp){return"LayeredTexture"in Cu.Objects&&rp in Cu.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),rp=Tu.get(rp).children[0].ID),np.get(rp)},parseDeformers:function(){var np={},rp={};if("Deformer"in Cu.Objects){var ip=Cu.Objects.Deformer;for(var ap in ip){var sp=ip[ap],cp=Tu.get(parseInt(ap));if(sp.attrType==="Skin"){var dp=this.parseSkeleton(cp,ip);dp.ID=ap,cp.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),dp.geometryID=cp.parents[0].ID,np[ap]=dp}else if(sp.attrType==="BlendShape"){var fp={id:ap};fp.rawTargets=this.parseMorphTargets(cp,ip),fp.id=ap,cp.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),rp[ap]=fp}}}return{skeletons:np,morphTargets:rp}},parseSkeleton:function(np,rp){var ip=[];return np.children.forEach(function(ap){var sp=rp[ap.ID];if(sp.attrType==="Cluster"){var cp={ID:ap.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(sp.TransformLink.a)};"Indexes"in sp&&(cp.indices=sp.Indexes.a,cp.weights=sp.Weights.a),ip.push(cp)}}),{rawBones:ip,bones:[]}},parseMorphTargets:function(np,rp){for(var ip=[],ap=0;ap<np.children.length;ap++){var sp=np.children[ap],cp=rp[sp.ID],dp={name:cp.attrName,initialWeight:cp.DeformPercent,id:cp.id,fullWeights:cp.FullWeights.a};if(cp.attrType!=="BlendShapeChannel")return;dp.geoID=Tu.get(parseInt(sp.ID)).children.filter(function(fp){return fp.relationship===void 0})[0].ID,ip.push(dp)}return ip},parseScene:function(np,rp,ip){Pu=new Group$1;var ap=this.parseModels(np.skeletons,rp,ip),sp=Cu.Objects.Model,cp=this;ap.forEach(function(fp){var vp=sp[fp.ID];cp.setLookAtProperties(fp,vp);var _p=Tu.get(fp.ID).parents;_p.forEach(function(wp){var Dp=ap.get(wp.ID);Dp!==void 0&&Dp.add(fp)}),fp.parent===null&&Pu.add(fp)}),this.bindSkeleton(np.skeletons,rp,ap),this.createAmbientLight(),this.setupMorphMaterials(),Pu.traverse(function(fp){if(fp.userData.transformData){fp.parent&&(fp.userData.transformData.parentMatrixWorld=fp.parent.matrix);var vp=_f(fp.userData.transformData);fp.applyMatrix4(vp)}});var dp=new Ou().parse();Pu.children.length===1&&Pu.children[0].isGroup&&(Pu.children[0].animations=dp,Pu=Pu.children[0]),Pu.animations=dp},parseModels:function(np,rp,ip){var ap=new Map,sp=Cu.Objects.Model;for(var cp in sp){var dp=parseInt(cp),fp=sp[cp],vp=Tu.get(dp),_p=this.buildSkeleton(vp,np,dp,fp.attrName);if(!_p){switch(fp.attrType){case"Camera":_p=this.createCamera(vp);break;case"Light":_p=this.createLight(vp);break;case"Mesh":_p=this.createMesh(vp,rp,ip);break;case"NurbsCurve":_p=this.createCurve(vp,rp);break;case"LimbNode":case"Root":_p=new Bone;break;case"Null":default:_p=new Group$1;break}_p.name=fp.attrName?PropertyBinding.sanitizeNodeName(fp.attrName):"",_p.ID=dp}this.getTransformData(_p,fp),ap.set(dp,_p)}return ap},buildSkeleton:function(np,rp,ip,ap){var sp=null;return np.parents.forEach(function(cp){for(var dp in rp){var fp=rp[dp];fp.rawBones.forEach(function(vp,_p){if(vp.ID===cp.ID){var wp=sp;sp=new Bone,sp.matrixWorld.copy(vp.transformLink),sp.name=ap?PropertyBinding.sanitizeNodeName(ap):"",sp.ID=ip,fp.bones[_p]=sp,wp!==null&&sp.add(wp)}})}}),sp},createCamera:function(np){var rp,ip;if(np.children.forEach(function(Dp){var Pp=Cu.Objects.NodeAttribute[Dp.ID];Pp!==void 0&&(ip=Pp)}),ip===void 0)rp=new Object3D;else{var ap=0;ip.CameraProjectionType!==void 0&&ip.CameraProjectionType.value===1&&(ap=1);var sp=1;ip.NearPlane!==void 0&&(sp=ip.NearPlane.value/1e3);var cp=1e3;ip.FarPlane!==void 0&&(cp=ip.FarPlane.value/1e3);var dp=window.innerWidth,fp=window.innerHeight;ip.AspectWidth!==void 0&&ip.AspectHeight!==void 0&&(dp=ip.AspectWidth.value,fp=ip.AspectHeight.value);var vp=dp/fp,_p=45;ip.FieldOfView!==void 0&&(_p=ip.FieldOfView.value);var wp=ip.FocalLength?ip.FocalLength.value:null;switch(ap){case 0:rp=new PerspectiveCamera(_p,vp,sp,cp),wp!==null&&rp.setFocalLength(wp);break;case 1:rp=new OrthographicCamera(-dp/2,dp/2,fp/2,-fp/2,sp,cp);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+ap+"."),rp=new Object3D;break}}return rp},createLight:function(np){var rp,ip;if(np.children.forEach(function(wp){var Dp=Cu.Objects.NodeAttribute[wp.ID];Dp!==void 0&&(ip=Dp)}),ip===void 0)rp=new Object3D;else{var ap;ip.LightType===void 0?ap=0:ap=ip.LightType.value;var sp=16777215;ip.Color!==void 0&&(sp=new Color().fromArray(ip.Color.value));var cp=ip.Intensity===void 0?1:ip.Intensity.value/100;ip.CastLightOnObject!==void 0&&ip.CastLightOnObject.value===0&&(cp=0);var dp=0;ip.FarAttenuationEnd!==void 0&&(ip.EnableFarAttenuation!==void 0&&ip.EnableFarAttenuation.value===0?dp=0:dp=ip.FarAttenuationEnd.value);var fp=1;switch(ap){case 0:rp=new PointLight(sp,cp,dp,fp);break;case 1:rp=new DirectionalLight(sp,cp);break;case 2:var vp=Math.PI/3;ip.InnerAngle!==void 0&&(vp=MathUtils.degToRad(ip.InnerAngle.value));var _p=0;ip.OuterAngle!==void 0&&(_p=MathUtils.degToRad(ip.OuterAngle.value),_p=Math.max(_p,1)),rp=new SpotLight(sp,cp,dp,vp,_p,fp);break;default:console.warn("THREE.FBXLoader: Unknown light type "+ip.LightType.value+", defaulting to a PointLight."),rp=new PointLight(sp,cp);break}ip.CastShadows!==void 0&&ip.CastShadows.value===1&&(rp.castShadow=!0)}return rp},createMesh:function(np,rp,ip){var ap,sp=null,cp=null,dp=[];return np.children.forEach(function(fp){rp.has(fp.ID)&&(sp=rp.get(fp.ID)),ip.has(fp.ID)&&dp.push(ip.get(fp.ID))}),dp.length>1?cp=dp:dp.length>0?cp=dp[0]:(cp=new MeshPhongMaterial({color:13421772}),dp.push(cp)),"color"in sp.attributes&&dp.forEach(function(fp){fp.vertexColors=!0}),sp.FBX_Deformer?(dp.forEach(function(fp){fp.skinning=!0}),ap=new SkinnedMesh(sp,cp),ap.normalizeSkinWeights()):ap=new Mesh(sp,cp),ap},createCurve:function(np,rp){var ip=np.children.reduce(function(sp,cp){return rp.has(cp.ID)&&(sp=rp.get(cp.ID)),sp},null),ap=new LineBasicMaterial({color:3342591,linewidth:1});return new Line$1(ip,ap)},getTransformData:function(np,rp){var ip={};"InheritType"in rp&&(ip.inheritType=parseInt(rp.InheritType.value)),"RotationOrder"in rp?ip.eulerOrder=ep(rp.RotationOrder.value):ip.eulerOrder="ZYX","Lcl_Translation"in rp&&(ip.translation=rp.Lcl_Translation.value),"PreRotation"in rp&&(ip.preRotation=rp.PreRotation.value),"Lcl_Rotation"in rp&&(ip.rotation=rp.Lcl_Rotation.value),"PostRotation"in rp&&(ip.postRotation=rp.PostRotation.value),"Lcl_Scaling"in rp&&(ip.scale=rp.Lcl_Scaling.value),"ScalingOffset"in rp&&(ip.scalingOffset=rp.ScalingOffset.value),"ScalingPivot"in rp&&(ip.scalingPivot=rp.ScalingPivot.value),"RotationOffset"in rp&&(ip.rotationOffset=rp.RotationOffset.value),"RotationPivot"in rp&&(ip.rotationPivot=rp.RotationPivot.value),np.userData.transformData=ip},setLookAtProperties:function(np,rp){if("LookAtProperty"in rp){var ip=Tu.get(np.ID).children;ip.forEach(function(ap){if(ap.relationship==="LookAtProperty"){var sp=Cu.Objects.Model[ap.ID];if("Lcl_Translation"in sp){var cp=sp.Lcl_Translation.value;np.target!==void 0?(np.target.position.fromArray(cp),Pu.add(np.target)):np.lookAt(new Vector3().fromArray(cp))}}})}},bindSkeleton:function(np,rp,ip){var ap=this.parsePoseNodes();for(var sp in np){var cp=np[sp],dp=Tu.get(parseInt(cp.ID)).parents;dp.forEach(function(fp){if(rp.has(fp.ID)){var vp=fp.ID,_p=Tu.get(vp);_p.parents.forEach(function(wp){if(ip.has(wp.ID)){var Dp=ip.get(wp.ID);Dp.bind(new Skeleton(cp.bones),ap[wp.ID])}})}})}},parsePoseNodes:function(){var np={};if("Pose"in Cu.Objects){var rp=Cu.Objects.Pose;for(var ip in rp)if(rp[ip].attrType==="BindPose"){var ap=rp[ip].PoseNode;Array.isArray(ap)?ap.forEach(function(sp){np[sp.Node]=new Matrix4().fromArray(sp.Matrix.a)}):np[ap.Node]=new Matrix4().fromArray(ap.Matrix.a)}}return np},createAmbientLight:function(){if("GlobalSettings"in Cu&&"AmbientColor"in Cu.GlobalSettings){var np=Cu.GlobalSettings.AmbientColor.value,rp=np[0],ip=np[1],ap=np[2];if(rp!==0||ip!==0||ap!==0){var sp=new Color(rp,ip,ap);Pu.add(new AmbientLight(sp,1))}}},setupMorphMaterials:function(){var np=this;Pu.traverse(function(rp){rp.isMesh&&rp.geometry.morphAttributes.position&&rp.geometry.morphAttributes.position.length&&(Array.isArray(rp.material)?rp.material.forEach(function(ip,ap){np.setupMorphMaterial(rp,ip,ap)}):np.setupMorphMaterial(rp,rp.material))})},setupMorphMaterial:function(np,rp,ip){var ap=np.uuid,sp=rp.uuid,cp=!1;if(Pu.traverse(function(fp){fp.isMesh&&(Array.isArray(fp.material)?fp.material.forEach(function(vp){vp.uuid===sp&&fp.uuid!==ap&&(cp=!0)}):fp.material.uuid===sp&&fp.uuid!==ap&&(cp=!0))}),cp===!0){var dp=rp.clone();dp.morphTargets=!0,ip===void 0?np.material=dp:np.material[ip]=dp}else rp.morphTargets=!0}};function Ru(){}Ru.prototype={constructor:Ru,parse:function(np){var rp=new Map;if("Geometry"in Cu.Objects){var ip=Cu.Objects.Geometry;for(var ap in ip){var sp=Tu.get(parseInt(ap)),cp=this.parseGeometry(sp,ip[ap],np);rp.set(parseInt(ap),cp)}}return rp},parseGeometry:function(np,rp,ip){switch(rp.attrType){case"Mesh":return this.parseMeshGeometry(np,rp,ip);case"NurbsCurve":return this.parseNurbsGeometry(rp)}},parseMeshGeometry:function(np,rp,ip){var ap=ip.skeletons,sp=[],cp=np.parents.map(function(wp){return Cu.Objects.Model[wp.ID]});if(cp.length!==0){var dp=np.children.reduce(function(wp,Dp){return ap[Dp.ID]!==void 0&&(wp=ap[Dp.ID]),wp},null);np.children.forEach(function(wp){ip.morphTargets[wp.ID]!==void 0&&sp.push(ip.morphTargets[wp.ID])});var fp=cp[0],vp={};"RotationOrder"in fp&&(vp.eulerOrder=ep(fp.RotationOrder.value)),"InheritType"in fp&&(vp.inheritType=parseInt(fp.InheritType.value)),"GeometricTranslation"in fp&&(vp.translation=fp.GeometricTranslation.value),"GeometricRotation"in fp&&(vp.rotation=fp.GeometricRotation.value),"GeometricScaling"in fp&&(vp.scale=fp.GeometricScaling.value);var _p=_f(vp);return this.genGeometry(rp,dp,sp,_p)}},genGeometry:function(np,rp,ip,ap){var sp=new BufferGeometry;np.attrName&&(sp.name=np.attrName);var cp=this.parseGeoNode(np,rp),dp=this.genBuffers(cp),fp=new Float32BufferAttribute(dp.vertex,3);if(fp.applyMatrix4(ap),sp.setAttribute("position",fp),dp.colors.length>0&&sp.setAttribute("color",new Float32BufferAttribute(dp.colors,3)),rp&&(sp.setAttribute("skinIndex",new Uint16BufferAttribute(dp.weightsIndices,4)),sp.setAttribute("skinWeight",new Float32BufferAttribute(dp.vertexWeights,4)),sp.FBX_Deformer=rp),dp.normal.length>0){var vp=new Matrix3().getNormalMatrix(ap),_p=new Float32BufferAttribute(dp.normal,3);_p.applyNormalMatrix(vp),sp.setAttribute("normal",_p)}if(dp.uvs.forEach(function(Rp,Gp){var kp="uv"+(Gp+1).toString();Gp===0&&(kp="uv"),sp.setAttribute(kp,new Float32BufferAttribute(dp.uvs[Gp],2))}),cp.material&&cp.material.mappingType!=="AllSame"){var wp=dp.materialIndex[0],Dp=0;if(dp.materialIndex.forEach(function(Rp,Gp){Rp!==wp&&(sp.addGroup(Dp,Gp-Dp,wp),wp=Rp,Dp=Gp)}),sp.groups.length>0){var Pp=sp.groups[sp.groups.length-1],Wp=Pp.start+Pp.count;Wp!==dp.materialIndex.length&&sp.addGroup(Wp,dp.materialIndex.length-Wp,wp)}sp.groups.length===0&&sp.addGroup(0,dp.materialIndex.length,dp.materialIndex[0])}return this.addMorphTargets(sp,np,ip,ap),sp},parseGeoNode:function(np,rp){var ip={};if(ip.vertexPositions=np.Vertices!==void 0?np.Vertices.a:[],ip.vertexIndices=np.PolygonVertexIndex!==void 0?np.PolygonVertexIndex.a:[],np.LayerElementColor&&(ip.color=this.parseVertexColors(np.LayerElementColor[0])),np.LayerElementMaterial&&(ip.material=this.parseMaterialIndices(np.LayerElementMaterial[0])),np.LayerElementNormal&&(ip.normal=this.parseNormals(np.LayerElementNormal[0])),np.LayerElementUV){ip.uv=[];for(var ap=0;np.LayerElementUV[ap];)ip.uv.push(this.parseUVs(np.LayerElementUV[ap])),ap++}return ip.weightTable={},rp!==null&&(ip.skeleton=rp,rp.rawBones.forEach(function(sp,cp){sp.indices.forEach(function(dp,fp){ip.weightTable[dp]===void 0&&(ip.weightTable[dp]=[]),ip.weightTable[dp].push({id:cp,weight:sp.weights[fp]})})})),ip},genBuffers:function(np){var rp={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},ip=0,ap=0,sp=!1,cp=[],dp=[],fp=[],vp=[],_p=[],wp=[],Dp=this;return np.vertexIndices.forEach(function(Pp,Wp){var Rp=!1;Pp<0&&(Pp=Pp^-1,Rp=!0);var Gp=[],kp=[];if(cp.push(Pp*3,Pp*3+1,Pp*3+2),np.color){var gp=Xc(Wp,ip,Pp,np.color);fp.push(gp[0],gp[1],gp[2])}if(np.skeleton){if(np.weightTable[Pp]!==void 0&&np.weightTable[Pp].forEach(function($p){kp.push($p.weight),Gp.push($p.id)}),kp.length>4){sp||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),sp=!0);var mp=[0,0,0,0],Sp=[0,0,0,0];kp.forEach(function($p,Ip){var Np=$p,qp=Gp[Ip];Sp.forEach(function(Vp,pp,bp){if(Np>Vp){bp[pp]=Np,Np=Vp;var zp=mp[pp];mp[pp]=qp,qp=zp}})}),Gp=mp,kp=Sp}for(;kp.length<4;)kp.push(0),Gp.push(0);for(var xp=0;xp<4;++xp)_p.push(kp[xp]),wp.push(Gp[xp])}if(np.normal){var gp=Xc(Wp,ip,Pp,np.normal);dp.push(gp[0],gp[1],gp[2])}if(np.material&&np.material.mappingType!=="AllSame")var Ep=Xc(Wp,ip,Pp,np.material)[0];np.uv&&np.uv.forEach(function($p,Ip){var Np=Xc(Wp,ip,Pp,$p);vp[Ip]===void 0&&(vp[Ip]=[]),vp[Ip].push(Np[0]),vp[Ip].push(Np[1])}),ap++,Rp&&(Dp.genFace(rp,np,cp,Ep,dp,fp,vp,_p,wp,ap),ip++,ap=0,cp=[],dp=[],fp=[],vp=[],_p=[],wp=[])}),rp},genFace:function(np,rp,ip,ap,sp,cp,dp,fp,vp,_p){for(var wp=2;wp<_p;wp++)np.vertex.push(rp.vertexPositions[ip[0]]),np.vertex.push(rp.vertexPositions[ip[1]]),np.vertex.push(rp.vertexPositions[ip[2]]),np.vertex.push(rp.vertexPositions[ip[(wp-1)*3]]),np.vertex.push(rp.vertexPositions[ip[(wp-1)*3+1]]),np.vertex.push(rp.vertexPositions[ip[(wp-1)*3+2]]),np.vertex.push(rp.vertexPositions[ip[wp*3]]),np.vertex.push(rp.vertexPositions[ip[wp*3+1]]),np.vertex.push(rp.vertexPositions[ip[wp*3+2]]),rp.skeleton&&(np.vertexWeights.push(fp[0]),np.vertexWeights.push(fp[1]),np.vertexWeights.push(fp[2]),np.vertexWeights.push(fp[3]),np.vertexWeights.push(fp[(wp-1)*4]),np.vertexWeights.push(fp[(wp-1)*4+1]),np.vertexWeights.push(fp[(wp-1)*4+2]),np.vertexWeights.push(fp[(wp-1)*4+3]),np.vertexWeights.push(fp[wp*4]),np.vertexWeights.push(fp[wp*4+1]),np.vertexWeights.push(fp[wp*4+2]),np.vertexWeights.push(fp[wp*4+3]),np.weightsIndices.push(vp[0]),np.weightsIndices.push(vp[1]),np.weightsIndices.push(vp[2]),np.weightsIndices.push(vp[3]),np.weightsIndices.push(vp[(wp-1)*4]),np.weightsIndices.push(vp[(wp-1)*4+1]),np.weightsIndices.push(vp[(wp-1)*4+2]),np.weightsIndices.push(vp[(wp-1)*4+3]),np.weightsIndices.push(vp[wp*4]),np.weightsIndices.push(vp[wp*4+1]),np.weightsIndices.push(vp[wp*4+2]),np.weightsIndices.push(vp[wp*4+3])),rp.color&&(np.colors.push(cp[0]),np.colors.push(cp[1]),np.colors.push(cp[2]),np.colors.push(cp[(wp-1)*3]),np.colors.push(cp[(wp-1)*3+1]),np.colors.push(cp[(wp-1)*3+2]),np.colors.push(cp[wp*3]),np.colors.push(cp[wp*3+1]),np.colors.push(cp[wp*3+2])),rp.material&&rp.material.mappingType!=="AllSame"&&(np.materialIndex.push(ap),np.materialIndex.push(ap),np.materialIndex.push(ap)),rp.normal&&(np.normal.push(sp[0]),np.normal.push(sp[1]),np.normal.push(sp[2]),np.normal.push(sp[(wp-1)*3]),np.normal.push(sp[(wp-1)*3+1]),np.normal.push(sp[(wp-1)*3+2]),np.normal.push(sp[wp*3]),np.normal.push(sp[wp*3+1]),np.normal.push(sp[wp*3+2])),rp.uv&&rp.uv.forEach(function(Dp,Pp){np.uvs[Pp]===void 0&&(np.uvs[Pp]=[]),np.uvs[Pp].push(dp[Pp][0]),np.uvs[Pp].push(dp[Pp][1]),np.uvs[Pp].push(dp[Pp][(wp-1)*2]),np.uvs[Pp].push(dp[Pp][(wp-1)*2+1]),np.uvs[Pp].push(dp[Pp][wp*2]),np.uvs[Pp].push(dp[Pp][wp*2+1])})},addMorphTargets:function(np,rp,ip,ap){if(ip.length!==0){np.morphTargetsRelative=!0,np.morphAttributes.position=[];var sp=this;ip.forEach(function(cp){cp.rawTargets.forEach(function(dp){var fp=Cu.Objects.Geometry[dp.geoID];fp!==void 0&&sp.genMorphGeometry(np,rp,fp,ap,dp.name)})})}},genMorphGeometry:function(np,rp,ip,ap,sp){for(var cp=rp.PolygonVertexIndex!==void 0?rp.PolygonVertexIndex.a:[],dp=ip.Vertices!==void 0?ip.Vertices.a:[],fp=ip.Indexes!==void 0?ip.Indexes.a:[],vp=np.attributes.position.count*3,_p=new Float32Array(vp),wp=0;wp<fp.length;wp++){var Dp=fp[wp]*3;_p[Dp]=dp[wp*3],_p[Dp+1]=dp[wp*3+1],_p[Dp+2]=dp[wp*3+2]}var Pp={vertexIndices:cp,vertexPositions:_p},Wp=this.genBuffers(Pp),Rp=new Float32BufferAttribute(Wp.vertex,3);Rp.name=sp||ip.attrName,Rp.applyMatrix4(ap),np.morphAttributes.position.push(Rp)},parseNormals:function(np){var rp=np.MappingInformationType,ip=np.ReferenceInformationType,ap=np.Normals.a,sp=[];return ip==="IndexToDirect"&&("NormalIndex"in np?sp=np.NormalIndex.a:"NormalsIndex"in np&&(sp=np.NormalsIndex.a)),{dataSize:3,buffer:ap,indices:sp,mappingType:rp,referenceType:ip}},parseUVs:function(np){var rp=np.MappingInformationType,ip=np.ReferenceInformationType,ap=np.UV.a,sp=[];return ip==="IndexToDirect"&&(sp=np.UVIndex.a),{dataSize:2,buffer:ap,indices:sp,mappingType:rp,referenceType:ip}},parseVertexColors:function(np){var rp=np.MappingInformationType,ip=np.ReferenceInformationType,ap=np.Colors.a,sp=[];return ip==="IndexToDirect"&&(sp=np.ColorIndex.a),{dataSize:4,buffer:ap,indices:sp,mappingType:rp,referenceType:ip}},parseMaterialIndices:function(np){var rp=np.MappingInformationType,ip=np.ReferenceInformationType;if(rp==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:ip};for(var ap=np.Materials.a,sp=[],cp=0;cp<ap.length;++cp)sp.push(cp);return{dataSize:1,buffer:ap,indices:sp,mappingType:rp,referenceType:ip}},parseNurbsGeometry:function(np){if(NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var rp=parseInt(np.Order);if(isNaN(rp))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",np.Order,np.id),new BufferGeometry;for(var ip=rp-1,ap=np.KnotVector.a,sp=[],cp=np.Points.a,dp=0,fp=cp.length;dp<fp;dp+=4)sp.push(new Vector4().fromArray(cp,dp));var vp,_p;if(np.Form==="Closed")sp.push(sp[0]);else if(np.Form==="Periodic"){vp=ip,_p=ap.length-1-vp;for(var dp=0;dp<ip;++dp)sp.push(sp[dp])}var wp=new NURBSCurve(ip,ap,sp,vp,_p),Dp=wp.getPoints(sp.length*7),Pp=new Float32Array(Dp.length*3);Dp.forEach(function(Rp,Gp){Rp.toArray(Pp,Gp*3)});var Wp=new BufferGeometry;return Wp.setAttribute("position",new BufferAttribute(Pp,3)),Wp}};function Ou(){}Ou.prototype={constructor:Ou,parse:function(){var np=[],rp=this.parseClips();if(rp!==void 0)for(var ip in rp){var ap=rp[ip],sp=this.addClip(ap);np.push(sp)}return np},parseClips:function(){if(Cu.Objects.AnimationCurve!==void 0){var np=this.parseAnimationCurveNodes();this.parseAnimationCurves(np);var rp=this.parseAnimationLayers(np),ip=this.parseAnimStacks(rp);return ip}},parseAnimationCurveNodes:function(){var np=Cu.Objects.AnimationCurveNode,rp=new Map;for(var ip in np){var ap=np[ip];if(ap.attrName.match(/S|R|T|DeformPercent/)!==null){var sp={id:ap.id,attr:ap.attrName,curves:{}};rp.set(sp.id,sp)}}return rp},parseAnimationCurves:function(np){var rp=Cu.Objects.AnimationCurve;for(var ip in rp){var ap={id:rp[ip].id,times:rp[ip].KeyTime.a.map(Wu),values:rp[ip].KeyValueFloat.a},sp=Tu.get(ap.id);if(sp!==void 0){var cp=sp.parents[0].ID,dp=sp.parents[0].relationship;dp.match(/X/)?np.get(cp).curves.x=ap:dp.match(/Y/)?np.get(cp).curves.y=ap:dp.match(/Z/)?np.get(cp).curves.z=ap:dp.match(/d|DeformPercent/)&&np.has(cp)&&(np.get(cp).curves.morph=ap)}}},parseAnimationLayers:function(np){var rp=Cu.Objects.AnimationLayer,ip=new Map;for(var ap in rp){var sp=[],cp=Tu.get(parseInt(ap));if(cp!==void 0){var dp=cp.children;dp.forEach(function(fp,vp){if(np.has(fp.ID)){var _p=np.get(fp.ID);if(_p.curves.x!==void 0||_p.curves.y!==void 0||_p.curves.z!==void 0){if(sp[vp]===void 0){var wp=Tu.get(fp.ID).parents.filter(function(kp){return kp.relationship!==void 0})[0].ID;if(wp!==void 0){var Dp=Cu.Objects.Model[wp.toString()];if(Dp===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",fp);return}var Pp={modelName:Dp.attrName?PropertyBinding.sanitizeNodeName(Dp.attrName):"",ID:Dp.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Pu.traverse(function(kp){kp.ID===Dp.id&&(Pp.transform=kp.matrix,kp.userData.transformData&&(Pp.eulerOrder=kp.userData.transformData.eulerOrder))}),Pp.transform||(Pp.transform=new Matrix4),"PreRotation"in Dp&&(Pp.preRotation=Dp.PreRotation.value),"PostRotation"in Dp&&(Pp.postRotation=Dp.PostRotation.value),sp[vp]=Pp}}sp[vp]&&(sp[vp][_p.attr]=_p)}else if(_p.curves.morph!==void 0){if(sp[vp]===void 0){var Wp=Tu.get(fp.ID).parents.filter(function(Sp){return Sp.relationship!==void 0})[0].ID,Rp=Tu.get(Wp).parents[0].ID,Gp=Tu.get(Rp).parents[0].ID,wp=Tu.get(Gp).parents[0].ID,Dp=Cu.Objects.Model[wp],Pp={modelName:Dp.attrName?PropertyBinding.sanitizeNodeName(Dp.attrName):"",morphName:Cu.Objects.Deformer[Wp].attrName};sp[vp]=Pp}sp[vp][_p.attr]=_p}}}),ip.set(parseInt(ap),sp)}}return ip},parseAnimStacks:function(np){var rp=Cu.Objects.AnimationStack,ip={};for(var ap in rp){var sp=Tu.get(parseInt(ap)).children;sp.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var cp=np.get(sp[0].ID);ip[ap]={name:rp[ap].attrName,layer:cp}}return ip},addClip:function(np){var rp=[],ip=this;return np.layer.forEach(function(ap){rp=rp.concat(ip.generateTracks(ap))}),new AnimationClip(np.name,-1,rp)},generateTracks:function(np){var rp=[],ip=new Vector3,ap=new Quaternion,sp=new Vector3;if(np.transform&&np.transform.decompose(ip,ap,sp),ip=ip.toArray(),ap=new Euler().setFromQuaternion(ap,np.eulerOrder).toArray(),sp=sp.toArray(),np.T!==void 0&&Object.keys(np.T.curves).length>0){var cp=this.generateVectorTrack(np.modelName,np.T.curves,ip,"position");cp!==void 0&&rp.push(cp)}if(np.R!==void 0&&Object.keys(np.R.curves).length>0){var dp=this.generateRotationTrack(np.modelName,np.R.curves,ap,np.preRotation,np.postRotation,np.eulerOrder);dp!==void 0&&rp.push(dp)}if(np.S!==void 0&&Object.keys(np.S.curves).length>0){var fp=this.generateVectorTrack(np.modelName,np.S.curves,sp,"scale");fp!==void 0&&rp.push(fp)}if(np.DeformPercent!==void 0){var vp=this.generateMorphTrack(np);vp!==void 0&&rp.push(vp)}return rp},generateVectorTrack:function(np,rp,ip,ap){var sp=this.getTimesForAllAxes(rp),cp=this.getKeyframeTrackValues(sp,rp,ip);return new VectorKeyframeTrack(np+"."+ap,sp,cp)},generateRotationTrack:function(np,rp,ip,ap,sp,cp){rp.x!==void 0&&(this.interpolateRotations(rp.x),rp.x.values=rp.x.values.map(MathUtils.degToRad)),rp.y!==void 0&&(this.interpolateRotations(rp.y),rp.y.values=rp.y.values.map(MathUtils.degToRad)),rp.z!==void 0&&(this.interpolateRotations(rp.z),rp.z.values=rp.z.values.map(MathUtils.degToRad));var dp=this.getTimesForAllAxes(rp),fp=this.getKeyframeTrackValues(dp,rp,ip);ap!==void 0&&(ap=ap.map(MathUtils.degToRad),ap.push(cp),ap=new Euler().fromArray(ap),ap=new Quaternion().setFromEuler(ap)),sp!==void 0&&(sp=sp.map(MathUtils.degToRad),sp.push(cp),sp=new Euler().fromArray(sp),sp=new Quaternion().setFromEuler(sp).inverse());for(var vp=new Quaternion,_p=new Euler,wp=[],Dp=0;Dp<fp.length;Dp+=3)_p.set(fp[Dp],fp[Dp+1],fp[Dp+2],cp),vp.setFromEuler(_p),ap!==void 0&&vp.premultiply(ap),sp!==void 0&&vp.multiply(sp),vp.toArray(wp,Dp/3*4);return new QuaternionKeyframeTrack(np+".quaternion",dp,wp)},generateMorphTrack:function(np){var rp=np.DeformPercent.curves.morph,ip=rp.values.map(function(sp){return sp/100}),ap=Pu.getObjectByName(np.modelName).morphTargetDictionary[np.morphName];return new NumberKeyframeTrack(np.modelName+".morphTargetInfluences["+ap+"]",rp.times,ip)},getTimesForAllAxes:function(np){var rp=[];return np.x!==void 0&&(rp=rp.concat(np.x.times)),np.y!==void 0&&(rp=rp.concat(np.y.times)),np.z!==void 0&&(rp=rp.concat(np.z.times)),rp=rp.sort(function(ip,ap){return ip-ap}).filter(function(ip,ap,sp){return sp.indexOf(ip)==ap}),rp},getKeyframeTrackValues:function(np,rp,ip){var ap=ip,sp=[],cp=-1,dp=-1,fp=-1;return np.forEach(function(vp){if(rp.x&&(cp=rp.x.times.indexOf(vp)),rp.y&&(dp=rp.y.times.indexOf(vp)),rp.z&&(fp=rp.z.times.indexOf(vp)),cp!==-1){var _p=rp.x.values[cp];sp.push(_p),ap[0]=_p}else sp.push(ap[0]);if(dp!==-1){var wp=rp.y.values[dp];sp.push(wp),ap[1]=wp}else sp.push(ap[1]);if(fp!==-1){var Dp=rp.z.values[fp];sp.push(Dp),ap[2]=Dp}else sp.push(ap[2])}),sp},interpolateRotations:function(np){for(var rp=1;rp<np.values.length;rp++){var ip=np.values[rp-1],ap=np.values[rp]-ip,sp=Math.abs(ap);if(sp>=180){for(var cp=sp/180,dp=ap/cp,fp=ip+dp,vp=np.times[rp-1],_p=np.times[rp]-vp,wp=_p/cp,Dp=vp+wp,Pp=[],Wp=[];Dp<np.times[rp];)Pp.push(Dp),Dp+=wp,Wp.push(fp),fp+=dp;np.times=hp(np.times,rp,Pp),np.values=hp(np.values,rp,Wp)}}}};function Du(){}Du.prototype={constructor:Du,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(np){this.nodeStack.push(np),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(np,rp){this.currentProp=np,this.currentPropName=rp},parse:function(np){this.currentIndent=0,this.allNodes=new Nu,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var rp=this,ip=np.split(/[\r\n]+/);return ip.forEach(function(ap,sp){var cp=ap.match(/^[\s\t]*;/),dp=ap.match(/^[\s\t]*$/);if(!(cp||dp)){var fp=ap.match("^\\t{"+rp.currentIndent+"}(\\w+):(.*){",""),vp=ap.match("^\\t{"+rp.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),_p=ap.match("^\\t{"+(rp.currentIndent-1)+"}}");fp?rp.parseNodeBegin(ap,fp):vp?rp.parseNodeProperty(ap,vp,ip[++sp]):_p?rp.popStack():ap.match(/^[^\s\t}]/)&&rp.parseNodePropertyContinued(ap)}}),this.allNodes},parseNodeBegin:function(np,rp){var ip=rp[1].trim().replace(/^"/,"").replace(/"$/,""),ap=rp[2].split(",").map(function(fp){return fp.trim().replace(/^"/,"").replace(/"$/,"")}),sp={name:ip},cp=this.parseNodeAttr(ap),dp=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(ip,sp):ip in dp?(ip==="PoseNode"?dp.PoseNode.push(sp):dp[ip].id!==void 0&&(dp[ip]={},dp[ip][dp[ip].id]=dp[ip]),cp.id!==""&&(dp[ip][cp.id]=sp)):typeof cp.id=="number"?(dp[ip]={},dp[ip][cp.id]=sp):ip!=="Properties70"&&(ip==="PoseNode"?dp[ip]=[sp]:dp[ip]=sp),typeof cp.id=="number"&&(sp.id=cp.id),cp.name!==""&&(sp.attrName=cp.name),cp.type!==""&&(sp.attrType=cp.type),this.pushStack(sp)},parseNodeAttr:function(np){var rp=np[0];np[0]!==""&&(rp=parseInt(np[0]),isNaN(rp)&&(rp=np[0]));var ip="",ap="";return np.length>1&&(ip=np[1].replace(/^(\w+)::/,""),ap=np[2]),{id:rp,name:ip,type:ap}},parseNodeProperty:function(np,rp,ip){var ap=rp[1].replace(/^"/,"").replace(/"$/,"").trim(),sp=rp[2].replace(/^"/,"").replace(/"$/,"").trim();ap==="Content"&&sp===","&&(sp=ip.replace(/"/g,"").replace(/,$/,"").trim());var cp=this.getCurrentNode(),dp=cp.name;if(dp==="Properties70"){this.parseNodeSpecialProperty(np,ap,sp);return}if(ap==="C"){var fp=sp.split(",").slice(1),vp=parseInt(fp[0]),_p=parseInt(fp[1]),wp=sp.split(",").slice(3);wp=wp.map(function(Dp){return Dp.trim().replace(/^"/,"")}),ap="connections",sp=[vp,_p],lp(sp,wp),cp[ap]===void 0&&(cp[ap]=[])}ap==="Node"&&(cp.id=sp),ap in cp&&Array.isArray(cp[ap])?cp[ap].push(sp):ap!=="a"?cp[ap]=sp:cp.a=sp,this.setCurrentProp(cp,ap),ap==="a"&&sp.slice(-1)!==","&&(cp.a=tp(sp))},parseNodePropertyContinued:function(np){var rp=this.getCurrentNode();rp.a+=np,np.slice(-1)!==","&&(rp.a=tp(rp.a))},parseNodeSpecialProperty:function(np,rp,ip){var ap=ip.split('",').map(function(_p){return _p.trim().replace(/^\"/,"").replace(/\s/,"_")}),sp=ap[0],cp=ap[1],dp=ap[2],fp=ap[3],vp=ap[4];switch(cp){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":vp=parseFloat(vp);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":vp=tp(vp);break}this.getPrevNode()[sp]={type:cp,type2:dp,flag:fp,value:vp},this.setCurrentProp(this.getPrevNode(),sp)}};function ku(){}ku.prototype={constructor:ku,parse:function(np){var rp=new Fu(np);rp.skip(23);var ip=rp.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+ip);for(var ap=new Nu;!this.endOfContent(rp);){var sp=this.parseNode(rp,ip);sp!==null&&ap.add(sp.name,sp)}return ap},endOfContent:function(np){return np.size()%16===0?(np.getOffset()+160+16&-16)>=np.size():np.getOffset()+160+16>=np.size()},parseNode:function(np,rp){var ip={},ap=rp>=7500?np.getUint64():np.getUint32(),sp=rp>=7500?np.getUint64():np.getUint32();rp>=7500?np.getUint64():np.getUint32();var cp=np.getUint8(),dp=np.getString(cp);if(ap===0)return null;for(var fp=[],vp=0;vp<sp;vp++)fp.push(this.parseProperty(np));var _p=fp.length>0?fp[0]:"",wp=fp.length>1?fp[1]:"",Dp=fp.length>2?fp[2]:"";for(ip.singleProperty=sp===1&&np.getOffset()===ap;ap>np.getOffset();){var Pp=this.parseNode(np,rp);Pp!==null&&this.parseSubNode(dp,ip,Pp)}return ip.propertyList=fp,typeof _p=="number"&&(ip.id=_p),wp!==""&&(ip.attrName=wp),Dp!==""&&(ip.attrType=Dp),dp!==""&&(ip.name=dp),ip},parseSubNode:function(np,rp,ip){if(ip.singleProperty===!0){var ap=ip.propertyList[0];Array.isArray(ap)?(rp[ip.name]=ip,ip.a=ap):rp[ip.name]=ap}else if(np==="Connections"&&ip.name==="C"){var sp=[];ip.propertyList.forEach(function(Dp,Pp){Pp!==0&&sp.push(Dp)}),rp.connections===void 0&&(rp.connections=[]),rp.connections.push(sp)}else if(ip.name==="Properties70"){var cp=Object.keys(ip);cp.forEach(function(Dp){rp[Dp]=ip[Dp]})}else if(np==="Properties70"&&ip.name==="P"){var dp=ip.propertyList[0],fp=ip.propertyList[1],vp=ip.propertyList[2],_p=ip.propertyList[3],wp;dp.indexOf("Lcl ")===0&&(dp=dp.replace("Lcl ","Lcl_")),fp.indexOf("Lcl ")===0&&(fp=fp.replace("Lcl ","Lcl_")),fp==="Color"||fp==="ColorRGB"||fp==="Vector"||fp==="Vector3D"||fp.indexOf("Lcl_")===0?wp=[ip.propertyList[4],ip.propertyList[5],ip.propertyList[6]]:wp=ip.propertyList[4],rp[dp]={type:fp,type2:vp,flag:_p,value:wp}}else rp[ip.name]===void 0?typeof ip.id=="number"?(rp[ip.name]={},rp[ip.name][ip.id]=ip):rp[ip.name]=ip:ip.name==="PoseNode"?(Array.isArray(rp[ip.name])||(rp[ip.name]=[rp[ip.name]]),rp[ip.name].push(ip)):rp[ip.name][ip.id]===void 0&&(rp[ip.name][ip.id]=ip)},parseProperty:function(np){var rp=np.getString(1);switch(rp){case"C":return np.getBoolean();case"D":return np.getFloat64();case"F":return np.getFloat32();case"I":return np.getInt32();case"L":return np.getInt64();case"R":var ip=np.getUint32();return np.getArrayBuffer(ip);case"S":var ip=np.getUint32();return np.getString(ip);case"Y":return np.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var ap=np.getUint32(),sp=np.getUint32(),cp=np.getUint32();if(sp===0)switch(rp){case"b":case"c":return np.getBooleanArray(ap);case"d":return np.getFloat64Array(ap);case"f":return np.getFloat32Array(ap);case"i":return np.getInt32Array(ap);case"l":return np.getInt64Array(ap)}typeof Zlib=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var dp=new Zlib.Inflate(new Uint8Array(np.getArrayBuffer(cp))),fp=new Fu(dp.decompress().buffer);switch(rp){case"b":case"c":return fp.getBooleanArray(ap);case"d":return fp.getFloat64Array(ap);case"f":return fp.getFloat32Array(ap);case"i":return fp.getInt32Array(ap);case"l":return fp.getInt64Array(ap)}default:throw new Error("THREE.FBXLoader: Unknown property type "+rp)}}};function Fu(np,rp){this.dv=new DataView(np),this.offset=0,this.littleEndian=rp!==void 0?rp:!0}Fu.prototype={constructor:Fu,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(np){this.offset+=np},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(np){for(var rp=[],ip=0;ip<np;ip++)rp.push(this.getBoolean());return rp},getUint8:function(){var np=this.dv.getUint8(this.offset);return this.offset+=1,np},getInt16:function(){var np=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,np},getInt32:function(){var np=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,np},getInt32Array:function(np){for(var rp=[],ip=0;ip<np;ip++)rp.push(this.getInt32());return rp},getUint32:function(){var np=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,np},getInt64:function(){var np,rp;return this.littleEndian?(np=this.getUint32(),rp=this.getUint32()):(rp=this.getUint32(),np=this.getUint32()),rp&2147483648?(rp=~rp&4294967295,np=~np&4294967295,np===4294967295&&(rp=rp+1&4294967295),np=np+1&4294967295,-(rp*4294967296+np)):rp*4294967296+np},getInt64Array:function(np){for(var rp=[],ip=0;ip<np;ip++)rp.push(this.getInt64());return rp},getUint64:function(){var np,rp;return this.littleEndian?(np=this.getUint32(),rp=this.getUint32()):(rp=this.getUint32(),np=this.getUint32()),rp*4294967296+np},getFloat32:function(){var np=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,np},getFloat32Array:function(np){for(var rp=[],ip=0;ip<np;ip++)rp.push(this.getFloat32());return rp},getFloat64:function(){var np=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,np},getFloat64Array:function(np){for(var rp=[],ip=0;ip<np;ip++)rp.push(this.getFloat64());return rp},getArrayBuffer:function(np){var rp=this.dv.buffer.slice(this.offset,this.offset+np);return this.offset+=np,rp},getString:function(np){for(var rp=[],ip=0;ip<np;ip++)rp[ip]=this.getUint8();var ap=rp.indexOf(0);return ap>=0&&(rp=rp.slice(0,ap)),LoaderUtils.decodeText(new Uint8Array(rp))}};function Nu(){}Nu.prototype={constructor:Nu,add:function(np,rp){this[np]=rp}};function Gu(np){var rp="Kaydara FBX Binary  \0";return np.byteLength>=rp.length&&rp===op(np,0,rp.length)}function zu(np){var rp=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],ip=0;function ap(dp){var fp=np[dp-1];return np=np.slice(ip+dp),ip++,fp}for(var sp=0;sp<rp.length;++sp){var cp=ap(1);if(cp===rp[sp])return!1}return!0}function Hu(np){var rp=/FBXVersion: (\d+)/,ip=np.match(rp);if(ip){var ap=parseInt(ip[1]);return ap}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Wu(np){return np/46186158e3}var _h=[];function Xc(np,rp,ip,ap){var sp;switch(ap.mappingType){case"ByPolygonVertex":sp=np;break;case"ByPolygon":sp=rp;break;case"ByVertice":sp=ip;break;case"AllSame":sp=ap.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+ap.mappingType)}ap.referenceType==="IndexToDirect"&&(sp=ap.indices[sp]);var cp=sp*ap.dataSize,dp=cp+ap.dataSize;return up(_h,ap.buffer,cp,dp)}var ju=new Euler,_c=new Vector3;function _f(np){var rp=new Matrix4,ip=new Matrix4,ap=new Matrix4,sp=new Matrix4,cp=new Matrix4,dp=new Matrix4,fp=new Matrix4,vp=new Matrix4,_p=new Matrix4,wp=new Matrix4,Dp=new Matrix4,Pp=np.inheritType?np.inheritType:0;if(np.translation&&rp.setPosition(_c.fromArray(np.translation)),np.preRotation){var Wp=np.preRotation.map(MathUtils.degToRad);Wp.push(np.eulerOrder),ip.makeRotationFromEuler(ju.fromArray(Wp))}if(np.rotation){var Wp=np.rotation.map(MathUtils.degToRad);Wp.push(np.eulerOrder),ap.makeRotationFromEuler(ju.fromArray(Wp))}if(np.postRotation){var Wp=np.postRotation.map(MathUtils.degToRad);Wp.push(np.eulerOrder),sp.makeRotationFromEuler(ju.fromArray(Wp))}np.scale&&cp.scale(_c.fromArray(np.scale)),np.scalingOffset&&fp.setPosition(_c.fromArray(np.scalingOffset)),np.scalingPivot&&dp.setPosition(_c.fromArray(np.scalingPivot)),np.rotationOffset&&vp.setPosition(_c.fromArray(np.rotationOffset)),np.rotationPivot&&_p.setPosition(_c.fromArray(np.rotationPivot)),np.parentMatrixWorld&&(wp=np.parentMatrixWorld);var Rp=ip.multiply(ap).multiply(sp),Gp=new Matrix4;wp.extractRotation(Gp);var kp=new Matrix4;kp.copyPosition(wp);var gp=new Matrix4;gp.getInverse(Gp).multiply(wp);var mp=new Matrix4;if(Pp===0)mp.copy(Gp).multiply(Rp).multiply(gp).multiply(cp);else if(Pp===1)mp.copy(Gp).multiply(gp).multiply(Rp).multiply(cp);else{var Sp=new Matrix4().getInverse(cp),xp=new Matrix4().multiply(gp).multiply(Sp);mp.copy(Gp).multiply(Rp).multiply(xp).multiply(cp)}var Ep=new Matrix4().getInverse(_p),$p=new Matrix4().getInverse(dp),Ip=new Matrix4;Ip.copy(rp).multiply(vp).multiply(_p).multiply(ip).multiply(ap).multiply(sp).multiply(Ep).multiply(fp).multiply(dp).multiply(cp).multiply($p);var Np=new Matrix4().copyPosition(Ip),qp=new Matrix4().copy(wp).multiply(Np);return Dp.copyPosition(qp),Ip=new Matrix4().multiply(Dp).multiply(mp),Ip}function ep(np){np=np||0;var rp=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return np===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),rp[0]):rp[np]}function tp(np){var rp=np.split(",").map(function(ip){return parseFloat(ip)});return rp}function op(np,rp,ip){return rp===void 0&&(rp=0),ip===void 0&&(ip=np.byteLength),LoaderUtils.decodeText(new Uint8Array(np,rp,ip))}function lp(np,rp){for(var ip=0,ap=np.length,sp=rp.length;ip<sp;ip++,ap++)np[ap]=rp[ip]}function up(np,rp,ip,ap){for(var sp=ip,cp=0;sp<ap;sp++,cp++)np[cp]=rp[sp];return np}function hp(np,rp,ip){return np.slice(0,rp).concat(ip).concat(np.slice(rp))}return Bu})();var yu=Object.defineProperty,wu=(Cu,Tu,Pu)=>Tu in Cu?yu(Cu,Tu,{enumerable:!0,configurable:!0,writable:!0,value:Pu}):Cu[Tu]=Pu,b=(Cu,Tu,Pu)=>(wu(Cu,typeof Tu!="symbol"?Tu+"":Tu,Pu),Pu);Promise.resolve();exports.Easing;function Zt(){return((1+Math.random())*65536|0).toString(16).substring(1)}function ot(){return(Zt()+Zt()+"-"+Zt()+"-4"+Zt().substr(0,3)+"-"+Zt()+"-"+Zt()+Zt()+Zt()).toLowerCase()}function Qu(Cu){return typeof Symbol>"u"?`$Symbol<${Cu}>$`:Symbol(Cu)}const Zn=Qu("$$EVENT$$");function yi(Cu){return Cu[Zn]||(Cu[Zn]={}),Cu[Zn]}function _u(Cu){Cu[Zn]||delete Cu[Zn]}class ko{hasListener(Tu){const Pu=yi(this);return Boolean((Pu==null?void 0:Pu[Tu])&&Pu[Tu].length>0)}on(Tu,Pu,Bu){const Lu=yi(this);return Lu[Tu]||(Lu[Tu]=[]),Lu[Tu].push([Pu,Bu||!1]),()=>this.off(Tu,Pu)}once(Tu,Pu){return this.on(Tu,Pu,!0)}off(Tu,Pu){if(Tu===void 0){_u(this);return}const Bu=yi(this);if(Bu[Tu]||(Bu[Tu]=[]),Pu===void 0){Bu[Tu].length=0;return}let Lu=0;for(;Lu<Bu[Tu].length&&Bu[Tu][Lu][0]!==Pu;Lu++);Lu<Bu[Tu].length&&Bu[Tu].splice(Lu,1)}emit(Tu,...Pu){let Bu=!1;const Lu=yi(this)[Tu]||[];for(let Ru of Lu.slice()){const[Ou,Du=!1]=Ru,ku=Ou(...Pu);Du&&this.off(Tu,Ou),ku===!1&&(Bu=!0)}return Bu}}function pc(Cu,Tu){return new Vector3((Cu.x+Tu.x)/2,(Cu.y+Tu.y)/2,(Cu.z+Tu.z)/2)}function Yi(Cu,Tu){const Pu=Math.round(Cu);return Pu%2===0?Pu:Pu+Number(Tu!=null&&Tu.smaller?-1:1)}function Xu(){return Math.random().toString(36).slice(-6)}const Yu=({x:Cu,y:Tu,z:Pu})=>new Vector3(Cu,Tu,Pu),Qt=([Cu,Tu,Pu])=>new Vector3(Cu,Tu,Pu),ei=Cu=>Cu instanceof Vector3?Cu:Array.isArray(Cu)?Qt(Cu):Yu(Cu),mc="1.0.0",Vu=`CSS3DObjectPlus@${mc}`,Uu=.00216,Zu=.003;class Jn extends CSS3DObject{constructor(Tu,Pu,Bu=Zu,Lu=1){const Ru=Math.max(Uu,Bu),Ou=Pu[0].distanceTo(Pu[1]),Du=Pu[1].distanceTo(Pu[2]),ku=Yi(Ou/Bu*Lu),Fu=Yi(Du/Bu*Lu),Nu=pc(Pu[0],Pu[2]);let Gu;if(Ru===Bu)Tu.style.width=`${ku}px`,Tu.style.height=`${Fu}px`,Gu=Tu;else{const _c=document.createElement("div");_c.style.width=`${ku}px`,_c.style.height=`${Fu}px`,_c.style.pointerEvents="none";const _f=Bu/Ru;Tu.style.position="absolute",Tu.style.left="0",Tu.style.top="0",Tu.style.width=`${_f*ku}px`,Tu.style.height=`${_f*Fu}px`,_c.appendChild(Tu),Gu=_c}if(super(Gu),b(this,"version",mc),b(this,"width"),b(this,"height"),b(this,"domWidthPx"),b(this,"domHeightPx"),b(this,"cornerPoints"),b(this,"ratio"),b(this,"container"),b(this,"centerPosition"),this.scale.set(Ru,Ru,Ru),this.cornerPoints=Pu,this.ratio=Bu,this.container=Tu,Ru===Bu)this.width=Ou,this.height=Du,this.domWidthPx=ku,this.domHeightPx=Fu,this.centerPosition=Nu;else{const _c=Bu/Ru;this.width=_c*Ou,this.height=_c*Du,this.domWidthPx=_c*ku,this.domHeightPx=_c*Fu,this.centerPosition=new Vector3().subVectors(Nu.clone(),Pu[0].clone()).multiplyScalar(_c).add(Pu[0])}Tu.classList.add(`${Vu}__container`);const zu=new Vector3(1,0,0),Hu=new Vector3(0,1,0),Wu=new Vector3().subVectors(Pu[1],Pu[0]),_h=new Vector3().subVectors(Pu[2],Pu[1]),Xc=new Quaternion().setFromUnitVectors(zu.normalize(),Wu.normalize());this.applyQuaternion(Xc),Hu.applyQuaternion(Xc);const ju=new Quaternion().setFromUnitVectors(Hu.normalize(),_h.normalize());this.applyQuaternion(ju),this.position.set(Nu.x,Nu.y,Nu.z)}}const Ju="v2.0.0",gc="CSS3DRenderer",Wi=`${gc}@${Ju}`,Sr=Cu=>`${Wi}--${Cu}`,Se={};class vc{constructor(){b(this,"hooks",new ko),b(this,"state",{enabled:!0,visible:!0,disposed:!1}),b(this,"store",{disposers:[],frontModeCSS3DObjects:{},behindModeCSS3DObjects:{}}),b(this,"create3DElement",(Tu,Pu,Bu)=>{if(this.state.disposed)return this.disposedErrorLog();const Lu=(()=>{const ap={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none"};return Object.assign(ap,Bu)})(),Ru=Pu.map(ei);if((Ru==null?void 0:Ru.length)<4)return console.error(`${Wi}: requires 4 point but params may have fewer`);const{ratio:Ou,devicePixelRatio:Du,mode:ku,autoRender:Fu,container:Nu,pointerEvents:Gu}=Lu,zu=[],{css3DObject:Hu,opacityMesh:Wu}=this.createObject(Ru,{ratio:Ou,dpr:Du,container:Nu,mode:ku,pointerEvents:Gu});Nu.id=`container--${Hu.uuid}`;const _h=ku==="front"&&!Se.frontModeStore,Xc=ku==="behind"&&!Se.behindModeStore;Xc&&(Se.behindModeStore={scene:Lu.scene,css3DScene:new Scene,css3DRenderer:new CSS3DRenderer}),_h&&(Se.frontModeStore={css3DScene:new Scene,css3DRenderer:new CSS3DRenderer});const ju=ku==="front"?Se.frontModeStore:Se.behindModeStore,{css3DScene:_c,css3DRenderer:_f}=ju,ep=(()=>{const ap=()=>{ku==="front"?this.store.frontModeCSS3DObjects[Hu.uuid]={visible:!0,enabled:!0,css3DObject:Hu,mode:"front"}:this.store.behindModeCSS3DObjects[Hu.uuid]={visible:!0,enabled:!0,css3DObject:Hu,opacityMesh:Wu,mode:"behind",scene:Lu.scene},_c.add(Hu),ku==="behind"&&Wu&&(Lu.scene.add(Wu),zu.push(()=>Wu&&Lu.scene.remove(Wu)))};if(_h||Xc){_f.domElement.style.position="absolute",_f.domElement.style.top="0",_f.domElement.style.userSelect="none",_f.domElement.style.pointerEvents="none",_f.domElement.classList.add(Sr(ku));const sp=()=>{const cp=requestAnimationFrame(sp);ju.requestAnimationFrameId=cp,_f.render(_c,Tu)};return()=>{ap(),sp()}}return()=>ap()})(),tp=ku==="front"?Se.frontModeContainer:Se.behindModeContainer;if(tp){this.appendToElement(tp,ku);const ap=ku==="front"?Se.frontModeStore:Se.behindModeStore;ap&&(ap.appendedToPage=!0)}const op=ap=>this.setVisibleById(Hu.uuid,ap),lp=ap=>this.setEnabledById(Hu.uuid,ap),up=()=>op(!0),hp=()=>op(!1),np=()=>lp(!0),rp=()=>lp(!1),ip=()=>(delete this.store.frontModeCSS3DObjects[Hu.uuid],delete this.store.behindModeCSS3DObjects[Hu.uuid],zu.forEach(ap=>ap==null?void 0:ap()),_c.remove(Hu),_c.children.length===0&&(typeof ju.requestAnimationFrameId=="number"&&cancelAnimationFrame(ju.requestAnimationFrameId),_f.domElement.remove(),ku==="front"&&(Se.frontModeStore=void 0),ku==="behind"&&(Se.behindModeStore=void 0),Se.resizeObserver=void 0),!0);return this.store.disposers.push(ip),Fu&&ep(),{id:Hu.uuid,container:Nu,dispose:ip,css3DObject:Hu,render:Fu?void 0:ep,show:up,hide:hp,setVisible:op,disable:rp,enable:np,setEnabled:lp,appendToElement:ap=>this.appendToElement(ap,ku)}}),b(this,"setVisibleById",(Tu,Pu)=>{var Bu;const Lu=(Bu=this.store.frontModeCSS3DObjects[Tu])!=null?Bu:this.store.behindModeCSS3DObjects[Tu];!Lu||(Lu.css3DObject.visible=Pu,Lu.visible=Pu,Lu.mode==="behind"&&(Lu.opacityMesh.visible=Pu))}),b(this,"setEnabledById",(Tu,Pu)=>{var Bu,Lu,Ru;const Ou=(Bu=this.store.frontModeCSS3DObjects[Tu])!=null?Bu:this.store.behindModeCSS3DObjects[Tu];if(!Ou)return;const Du=Ou.mode==="front"?(Lu=Se.frontModeStore)==null?void 0:Lu.css3DScene:(Ru=Se.behindModeStore)==null?void 0:Ru.css3DScene;!Du||(Pu?(Du.add(Ou.css3DObject),Ou.mode==="behind"&&Ou.scene.add(Ou.opacityMesh)):(Du.remove(Ou.css3DObject),Ou.mode==="behind"&&Ou.scene.remove(Ou.opacityMesh)),Ou.enabled=Pu)}),b(this,"createObject",(Tu,Pu)=>{const{ratio:Bu,dpr:Lu,container:Ru,mode:Ou,pointerEvents:Du}=Pu,ku=new Jn(Ru,Tu,Bu,Lu);Ru.style.pointerEvents=Du,Ru.classList.add(`${gc}__container`);const{domWidthPx:Fu,domHeightPx:Nu}=ku,Gu=(()=>{if(Ou==="behind"){const zu=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),Hu=new PlaneGeometry(Fu,Nu),Wu=new Mesh(Hu,zu);return Wu.name=Sr("mesh"),Wu.position.copy(ku.position),Wu.rotation.copy(ku.rotation),Wu.scale.copy(ku.scale),Wu}})();return{css3DObject:ku,opacityMesh:Gu}}),b(this,"createResizeObserver",(Tu,Pu,Bu=!0)=>{if(!Tu)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Lu=()=>{const Ou=Yi(Tu.clientWidth,{smaller:!0}),Du=Yi(Tu.clientHeight,{smaller:!0});Pu(Ou,Du)};if(typeof ResizeObserver>"u"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Lu(),unobserve:()=>{}};const Ru=new ResizeObserver(Lu);return Bu&&Lu(),{observe:()=>Ru.observe(Tu),unobserve:()=>Ru.unobserve(Tu)}}),b(this,"disposedErrorLog",()=>{console.error(`${Wi} is disposed`)})}getCurrentState(){return this.state}setState(Tu,Pu={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();const Bu={...this.state};this.state=Object.assign(this.state,Tu),Bu.visible!==this.state.visible&&(Tu.visible?this.handleShow():this.handleHide()),Bu.enabled!==this.state.enabled&&(Tu.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Bu,userAction:Pu.userAction})}dispose(){this.store.disposers.forEach(Tu=>Tu==null?void 0:Tu()),this.store.disposers=[],this.hooks.emit("dispose"),this.state.disposed=!0}async show({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Tu}),this.hooks.emit("show",{userAction:Tu})}async hide({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Tu}),this.hooks.emit("hide",{userAction:Tu})}enable({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Tu}),this.hooks.emit("enable",{userAction:Tu})}disable({userAction:Tu}={userAction:!0}){if(this.state.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Tu}),this.hooks.emit("disable",{userAction:Tu})}appendToElement(Tu,Pu){if(!Tu)throw new Error(`${Wi} Cannot append to container: container is ${Tu}`);const Bu=Pu==="front"?Se.frontModeStore:Se.behindModeStore;if(!Bu){Pu==="front"&&(Se.frontModeContainer=Tu),Pu==="behind"&&(Se.behindModeContainer=Tu);return}if(!Bu.appendedToPage){if(Tu.appendChild(Bu.css3DRenderer.domElement),!Se.resizeObserver){const Lu=(Du,ku)=>{var Fu,Nu;(Fu=Se.frontModeStore)==null||Fu.css3DRenderer.setSize(Du,ku),(Nu=Se.behindModeStore)==null||Nu.css3DRenderer.setSize(Du,ku)},{observe:Ru,unobserve:Ou}=this.createResizeObserver(Tu,Lu,!0);Se.resizeObserver={observe:Ru,unobserve:Ou},Ru(),this.store.disposers.push(Ou)}Bu.appendedToPage=!0}}async handleShow(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=Tu.visible}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=Tu.visible,Tu.opacityMesh.visible=Tu.visible})}async handleHide(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=!1}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{Tu.css3DObject.visible=!1,Tu.opacityMesh.visible=!1})}handleEnable(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{var Pu;!Tu.enabled||(Pu=Se.frontModeStore)==null||Pu.css3DScene.add(Tu.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{var Pu,Bu;!Tu.enabled||((Pu=Se.behindModeStore)==null||Pu.css3DScene.add(Tu.css3DObject),(Bu=Se.behindModeStore)==null||Bu.scene.add(Tu.opacityMesh))})}handleDisable(){Object.values(this.store.frontModeCSS3DObjects).forEach(Tu=>{var Pu;(Pu=Se.frontModeStore)==null||Pu.css3DScene.remove(Tu.css3DObject)}),Object.values(this.store.behindModeCSS3DObjects).forEach(Tu=>{var Pu,Bu;(Pu=Se.behindModeStore)==null||Pu.css3DScene.remove(Tu.css3DObject),(Bu=Se.behindModeStore)==null||Bu.scene.remove(Tu.opacityMesh)})}}const qu="v2.0.0",kr=`CSS3DRenderPlugin-${Xu()}@${qu}`;class Ku extends vc{constructor(Tu){super(),b(this,"five"),b(this,"create3DDomContainer",(Pu,Bu)=>{if(this.state.disposed)return;const Lu=(()=>{var zu;(Bu==null?void 0:Bu.dpr)!==void 0&&console.warn(`${kr}: please use "config.devicePixelRatio" replace "config.dpr"`);const Hu={ratio:.00216,devicePixelRatio:(zu=Bu==null?void 0:Bu.dpr)!=null?zu:1,mode:"front",autoRender:!0};return Object.assign(Hu,Bu,(Bu==null?void 0:Bu.mode)==="behind"?{scene:this.five.scene}:void 0)})(),Ru=this.five.getElement();if(!Ru)return console.error(`${kr}: five.getElement() is ${Ru}`);const{autoRender:Ou,mode:Du}=Lu,ku=Du==="front"?Ru.parentElement:Lu.behindFiveContainer;this.appendToElement(ku||document.body,Du);const Fu=this.create3DElement(this.five.camera,Pu,{...Lu,autoRender:!1});if(!Fu)return;const Nu=Fu.render,Gu=()=>{var zu;Du==="front"&&Nu(),Du==="behind"&&((zu=this.five.model)!=null&&zu.loaded?Nu():this.five.once("modelLoaded",()=>Nu()))};return Ou&&Gu(),{...Fu,render:Ou?void 0:Gu}}),this.five=Tu}disposeAll(){return this.dispose()}setState(...Tu){const Pu=super.setState(...Tu);return this.five.needsRender=!0,Pu}}const Do=Cu=>new Ku(Cu);function le(){}const zn=Cu=>Cu;function je(Cu,Tu){for(const Pu in Tu)Cu[Pu]=Tu[Pu];return Cu}function bc(Cu){return Cu()}function Dr(){return Object.create(null)}function on(Cu){Cu.forEach(bc)}function ds(Cu){return typeof Cu=="function"}function de(Cu,Tu){return Cu!=Cu?Tu==Tu:Cu!==Tu||Cu&&typeof Cu=="object"||typeof Cu=="function"}let wi;function Ot(Cu,Tu){return wi||(wi=document.createElement("a")),wi.href=Tu,Cu===wi.href}function $u(Cu){return Object.keys(Cu).length===0}function dn(Cu,Tu,Pu,Bu){if(Cu){const Lu=Ac(Cu,Tu,Pu,Bu);return Cu[0](Lu)}}function Ac(Cu,Tu,Pu,Bu){return Cu[1]&&Bu?je(Pu.ctx.slice(),Cu[1](Bu(Tu))):Pu.ctx}function un(Cu,Tu,Pu,Bu){if(Cu[2]&&Bu){const Lu=Cu[2](Bu(Pu));if(Tu.dirty===void 0)return Lu;if(typeof Lu=="object"){const Ru=[],Ou=Math.max(Tu.dirty.length,Lu.length);for(let Du=0;Du<Ou;Du+=1)Ru[Du]=Tu.dirty[Du]|Lu[Du];return Ru}return Tu.dirty|Lu}return Tu.dirty}function fn(Cu,Tu,Pu,Bu,Lu,Ru){if(Lu){const Ou=Ac(Tu,Pu,Bu,Ru);Cu.p(Ou,Lu)}}function hn(Cu){if(Cu.ctx.length>32){const Tu=[],Pu=Cu.ctx.length/32;for(let Bu=0;Bu<Pu;Bu++)Tu[Bu]=-1;return Tu}return-1}function yc(Cu){const Tu={};for(const Pu in Cu)Pu[0]!=="$"&&(Tu[Pu]=Cu[Pu]);return Tu}function Vi(Cu,Tu){const Pu={};Tu=new Set(Tu);for(const Bu in Cu)!Tu.has(Bu)&&Bu[0]!=="$"&&(Pu[Bu]=Cu[Bu]);return Pu}const wc=typeof window<"u";let Ec=wc?()=>window.performance.now():()=>Date.now(),Lo=wc?Cu=>requestAnimationFrame(Cu):le;const Mn=new Set;function Cc(Cu){Mn.forEach(Tu=>{Tu.c(Cu)||(Mn.delete(Tu),Tu.f())}),Mn.size!==0&&Lo(Cc)}function Pc(Cu){let Tu;return Mn.size===0&&Lo(Cc),{promise:new Promise(Pu=>{Mn.add(Tu={c:Cu,f:Pu})}),abort(){Mn.delete(Tu)}}}function W(Cu,Tu){Cu.appendChild(Tu)}function ge(Cu,Tu,Pu){const Bu=Mo(Cu);if(!Bu.getElementById(Tu)){const Lu=F("style");Lu.id=Tu,Lu.textContent=Pu,xc(Bu,Lu)}}function Mo(Cu){if(!Cu)return document;const Tu=Cu.getRootNode?Cu.getRootNode():Cu.ownerDocument;return Tu&&Tu.host?Tu:Cu.ownerDocument}function ef(Cu){const Tu=F("style");return xc(Mo(Cu),Tu),Tu.sheet}function xc(Cu,Tu){return W(Cu.head||Cu,Tu),Tu.sheet}function H(Cu,Tu,Pu){Cu.insertBefore(Tu,Pu||null)}function B(Cu){Cu.parentNode.removeChild(Cu)}function jt(Cu,Tu){for(let Pu=0;Pu<Cu.length;Pu+=1)Cu[Pu]&&Cu[Pu].d(Tu)}function F(Cu){return document.createElement(Cu)}function Ie(Cu){return document.createElementNS("http://www.w3.org/2000/svg",Cu)}function Ge(Cu){return document.createTextNode(Cu)}function q(){return Ge(" ")}function Pe(){return Ge("")}function Ne(Cu,Tu,Pu,Bu){return Cu.addEventListener(Tu,Pu,Bu),()=>Cu.removeEventListener(Tu,Pu,Bu)}function zo(Cu){return function(Tu){return Tu.stopPropagation(),Cu.call(this,Tu)}}function C(Cu,Tu,Pu){Pu==null?Cu.removeAttribute(Tu):Cu.getAttribute(Tu)!==Pu&&Cu.setAttribute(Tu,Pu)}function Ui(Cu,Tu){const Pu=Object.getOwnPropertyDescriptors(Cu.__proto__);for(const Bu in Tu)Tu[Bu]==null?Cu.removeAttribute(Bu):Bu==="style"?Cu.style.cssText=Tu[Bu]:Bu==="__value"?Cu.value=Cu[Bu]=Tu[Bu]:Pu[Bu]&&Pu[Bu].set?Cu[Bu]=Tu[Bu]:C(Cu,Bu,Tu[Bu])}function tf(Cu){return Array.from(Cu.childNodes)}function Ye(Cu,Tu){Tu=""+Tu,Cu.wholeText!==Tu&&(Cu.data=Tu)}function Q(Cu,Tu,Pu,Bu){Pu===null?Cu.style.removeProperty(Tu):Cu.style.setProperty(Tu,Pu,Bu?"important":"")}let Ei;function nf(){if(Ei===void 0){Ei=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ei=!0}}return Ei}function rn(Cu,Tu){getComputedStyle(Cu).position==="static"&&(Cu.style.position="relative");const Pu=F("iframe");Pu.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),Pu.setAttribute("aria-hidden","true"),Pu.tabIndex=-1;const Bu=nf();let Lu;return Bu?(Pu.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",Lu=Ne(window,"message",Ru=>{Ru.source===Pu.contentWindow&&Tu()})):(Pu.src="about:blank",Pu.onload=()=>{Lu=Ne(Pu.contentWindow,"resize",Tu)}),W(Cu,Pu),()=>{(Bu||Lu&&Pu.contentWindow)&&Lu(),B(Pu)}}function me(Cu,Tu,Pu){Cu.classList[Pu?"add":"remove"](Tu)}function Ic(Cu,Tu,{bubbles:Pu=!1,cancelable:Bu=!1}={}){const Lu=document.createEvent("CustomEvent");return Lu.initCustomEvent(Cu,Pu,Bu,Tu),Lu}class Zi{constructor(Tu=!1){this.is_svg=!1,this.is_svg=Tu,this.e=this.n=null}c(Tu){this.h(Tu)}m(Tu,Pu,Bu=null){this.e||(this.is_svg?this.e=Ie(Pu.nodeName):this.e=F(Pu.nodeName),this.t=Pu,this.c(Tu)),this.i(Bu)}h(Tu){this.e.innerHTML=Tu,this.n=Array.from(this.e.childNodes)}i(Tu){for(let Pu=0;Pu<this.n.length;Pu+=1)H(this.t,this.n[Pu],Tu)}p(Tu){this.d(),this.h(Tu),this.i(this.a)}d(){this.n.forEach(B)}}const Ji=new Map;let qi=0;function sf(Cu){let Tu=5381,Pu=Cu.length;for(;Pu--;)Tu=(Tu<<5)-Tu^Cu.charCodeAt(Pu);return Tu>>>0}function of(Cu,Tu){const Pu={stylesheet:ef(Tu),rules:{}};return Ji.set(Cu,Pu),Pu}function Tc(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du=0){const ku=16.666/Bu;let Fu=`{
`;for(let Xc=0;Xc<=1;Xc+=ku){const ju=Tu+(Pu-Tu)*Ru(Xc);Fu+=Xc*100+`%{${Ou(ju,1-ju)}}
`}const Nu=Fu+`100% {${Ou(Pu,1-Pu)}}
}`,Gu=`__svelte_${sf(Nu)}_${Du}`,zu=Mo(Cu),{stylesheet:Hu,rules:Wu}=Ji.get(zu)||of(zu,Cu);Wu[Gu]||(Wu[Gu]=!0,Hu.insertRule(`@keyframes ${Gu} ${Nu}`,Hu.cssRules.length));const _h=Cu.style.animation||"";return Cu.style.animation=`${_h?`${_h}, `:""}${Gu} ${Bu}ms linear ${Lu}ms 1 both`,qi+=1,Gu}function ao(Cu,Tu){const Pu=(Cu.style.animation||"").split(", "),Bu=Pu.filter(Tu?Ru=>Ru.indexOf(Tu)<0:Ru=>Ru.indexOf("__svelte")===-1),Lu=Pu.length-Bu.length;Lu&&(Cu.style.animation=Bu.join(", "),qi-=Lu,qi||rf())}function rf(){Lo(()=>{qi||(Ji.forEach(Cu=>{const{ownerNode:Tu}=Cu.stylesheet;Tu&&B(Tu)}),Ji.clear())})}let ti;function qn(Cu){ti=Cu}function yn(){if(!ti)throw new Error("Function called outside component initialization");return ti}function Oo(Cu){yn().$$.before_update.push(Cu)}function wt(Cu){yn().$$.on_mount.push(Cu)}function jo(Cu){yn().$$.after_update.push(Cu)}function an(Cu){yn().$$.on_destroy.push(Cu)}function af(){const Cu=yn();return(Tu,Pu,{cancelable:Bu=!1}={})=>{const Lu=Cu.$$.callbacks[Tu];if(Lu){const Ru=Ic(Tu,Pu,{cancelable:Bu});return Lu.slice().forEach(Ou=>{Ou.call(Cu,Ru)}),!Ru.defaultPrevented}return!0}}function Sc(Cu,Tu){return yn().$$.context.set(Cu,Tu),Tu}function kc(Cu){return yn().$$.context.get(Cu)}function lf(Cu,Tu){const Pu=Cu.$$.callbacks[Tu.type];Pu&&Pu.slice().forEach(Bu=>Bu.call(this,Tu))}const Xn=[],Je=[],Qi=[],Lr=[],Dc=Promise.resolve();let lo=!1;function Lc(){lo||(lo=!0,Dc.then(Mc))}function cf(){return Lc(),Dc}function Re(Cu){Qi.push(Cu)}const js=new Set;let Ci=0;function Mc(){const Cu=ti;do{for(;Ci<Xn.length;){const Tu=Xn[Ci];Ci++,qn(Tu),df(Tu.$$)}for(qn(null),Xn.length=0,Ci=0;Je.length;)Je.pop()();for(let Tu=0;Tu<Qi.length;Tu+=1){const Pu=Qi[Tu];js.has(Pu)||(js.add(Pu),Pu())}Qi.length=0}while(Xn.length);for(;Lr.length;)Lr.pop()();lo=!1,js.clear(),qn(Cu)}function df(Cu){if(Cu.fragment!==null){Cu.update(),on(Cu.before_update);const Tu=Cu.dirty;Cu.dirty=[-1],Cu.fragment&&Cu.fragment.p(Cu.ctx,Tu),Cu.after_update.forEach(Re)}}let Qn;function zc(){return Qn||(Qn=Promise.resolve(),Qn.then(()=>{Qn=null})),Qn}function Ki(Cu,Tu,Pu){Cu.dispatchEvent(Ic(`${Tu?"intro":"outro"}${Pu}`))}const _i=new Set;let Kt;function ve(){Kt={r:0,c:[],p:Kt}}function be(){Kt.r||on(Kt.c),Kt=Kt.p}function M(Cu,Tu){Cu&&Cu.i&&(_i.delete(Cu),Cu.i(Tu))}function R(Cu,Tu,Pu,Bu){if(Cu&&Cu.o){if(_i.has(Cu))return;_i.add(Cu),Kt.c.push(()=>{_i.delete(Cu),Bu&&(Pu&&Cu.d(1),Bu())}),Cu.o(Tu)}else Bu&&Bu()}const Oc={duration:0};function wn(Cu,Tu,Pu){let Bu=Tu(Cu,Pu),Lu=!1,Ru,Ou,Du=0;function ku(){Ru&&ao(Cu,Ru)}function Fu(){const{delay:Gu=0,duration:zu=300,easing:Hu=zn,tick:Wu=le,css:_h}=Bu||Oc;_h&&(Ru=Tc(Cu,0,1,zu,Gu,Hu,_h,Du++)),Wu(0,1);const Xc=Ec()+Gu,ju=Xc+zu;Ou&&Ou.abort(),Lu=!0,Re(()=>Ki(Cu,!0,"start")),Ou=Pc(_c=>{if(Lu){if(_c>=ju)return Wu(1,0),Ki(Cu,!0,"end"),ku(),Lu=!1;if(_c>=Xc){const _f=Hu((_c-Xc)/zu);Wu(_f,1-_f)}}return Lu})}let Nu=!1;return{start(){Nu||(Nu=!0,ao(Cu),ds(Bu)?(Bu=Bu(),zc().then(Fu)):Fu())},invalidate(){Nu=!1},end(){Lu&&(ku(),Lu=!1)}}}function Bn(Cu,Tu,Pu){let Bu=Tu(Cu,Pu),Lu=!0,Ru;const Ou=Kt;Ou.r+=1;function Du(){const{delay:ku=0,duration:Fu=300,easing:Nu=zn,tick:Gu=le,css:zu}=Bu||Oc;zu&&(Ru=Tc(Cu,1,0,Fu,ku,Nu,zu));const Hu=Ec()+ku,Wu=Hu+Fu;Re(()=>Ki(Cu,!1,"start")),Pc(_h=>{if(Lu){if(_h>=Wu)return Gu(0,1),Ki(Cu,!1,"end"),--Ou.r||on(Ou.c),!1;if(_h>=Hu){const Xc=Nu((_h-Hu)/Fu);Gu(1-Xc,Xc)}}return Lu})}return ds(Bu)?zc().then(()=>{Bu=Bu(),Du()}):Du(),{end(ku){ku&&Bu.tick&&Bu.tick(1,0),Lu&&(Ru&&ao(Cu,Ru),Lu=!1)}}}function Yt(Cu,Tu){R(Cu,1,1,()=>{Tu.delete(Cu.key)})}function Et(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu){let zu=Cu.length,Hu=Ru.length,Wu=zu;const _h={};for(;Wu--;)_h[Cu[Wu].key]=Wu;const Xc=[],ju=new Map,_c=new Map;for(Wu=Hu;Wu--;){const op=Gu(Lu,Ru,Wu),lp=Pu(op);let up=Ou.get(lp);up?Bu&&up.p(op,Tu):(up=Fu(lp,op),up.c()),ju.set(lp,Xc[Wu]=up),lp in _h&&_c.set(lp,Math.abs(Wu-_h[lp]))}const _f=new Set,ep=new Set;function tp(op){M(op,1),op.m(Du,Nu),Ou.set(op.key,op),Nu=op.first,Hu--}for(;zu&&Hu;){const op=Xc[Hu-1],lp=Cu[zu-1],up=op.key,hp=lp.key;op===lp?(Nu=op.first,zu--,Hu--):ju.has(hp)?!Ou.has(up)||_f.has(up)?tp(op):ep.has(hp)?zu--:_c.get(up)>_c.get(hp)?(ep.add(up),tp(op)):(_f.add(hp),zu--):(ku(lp,Ou),zu--)}for(;zu--;){const op=Cu[zu];ju.has(op.key)||ku(op,Ou)}for(;Hu;)tp(Xc[Hu-1]);return Xc}function Ve(Cu,Tu){const Pu={},Bu={},Lu={$$scope:1};let Ru=Cu.length;for(;Ru--;){const Ou=Cu[Ru],Du=Tu[Ru];if(Du){for(const ku in Ou)ku in Du||(Bu[ku]=1);for(const ku in Du)Lu[ku]||(Pu[ku]=Du[ku],Lu[ku]=1);Cu[Ru]=Du}else for(const ku in Ou)Lu[ku]=1}for(const Ou in Bu)Ou in Pu||(Pu[Ou]=void 0);return Pu}function oe(Cu){Cu&&Cu.c()}function ie(Cu,Tu,Pu,Bu){const{fragment:Lu,after_update:Ru}=Cu.$$;Lu&&Lu.m(Tu,Pu),Bu||Re(()=>{const Ou=Cu.$$.on_mount.map(bc).filter(ds);Cu.$$.on_destroy?Cu.$$.on_destroy.push(...Ou):on(Ou),Cu.$$.on_mount=[]}),Ru.forEach(Re)}function se(Cu,Tu){const Pu=Cu.$$;Pu.fragment!==null&&(on(Pu.on_destroy),Pu.fragment&&Pu.fragment.d(Tu),Pu.on_destroy=Pu.fragment=null,Pu.ctx=[])}function ff(Cu,Tu){Cu.$$.dirty[0]===-1&&(Xn.push(Cu),Lc(),Cu.$$.dirty.fill(0)),Cu.$$.dirty[Tu/31|0]|=1<<Tu%31}function ue(Cu,Tu,Pu,Bu,Lu,Ru,Ou,Du=[-1]){const ku=ti;qn(Cu);const Fu=Cu.$$={fragment:null,ctx:[],props:Ru,update:le,not_equal:Lu,bound:Dr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Tu.context||(ku?ku.$$.context:[])),callbacks:Dr(),dirty:Du,skip_bound:!1,root:Tu.target||ku.$$.root};Ou&&Ou(Fu.root);let Nu=!1;if(Fu.ctx=Pu?Pu(Cu,Tu.props||{},(Gu,zu,...Hu)=>{const Wu=Hu.length?Hu[0]:zu;return Fu.ctx&&Lu(Fu.ctx[Gu],Fu.ctx[Gu]=Wu)&&(!Fu.skip_bound&&Fu.bound[Gu]&&Fu.bound[Gu](Wu),Nu&&ff(Cu,Gu)),zu}):[],Fu.update(),Nu=!0,on(Fu.before_update),Fu.fragment=Bu?Bu(Fu.ctx):!1,Tu.target){if(Tu.hydrate){const Gu=tf(Tu.target);Fu.fragment&&Fu.fragment.l(Gu),Gu.forEach(B)}else Fu.fragment&&Fu.fragment.c();Tu.intro&&M(Cu.$$.fragment),ie(Cu,Tu.target,Tu.anchor,Tu.customElement),Mc()}qn(ku)}class fe{$destroy(){se(this,1),this.$destroy=le}$on(Tu,Pu){if(!ds(Pu))return le;const Bu=this.$$.callbacks[Tu]||(this.$$.callbacks[Tu]=[]);return Bu.push(Pu),()=>{const Lu=Bu.indexOf(Pu);Lu!==-1&&Bu.splice(Lu,1)}}$set(Tu){this.$$set&&!$u(Tu)&&(this.$$.skip_bound=!0,this.$$set(Tu),this.$$.skip_bound=!1)}}function es(Cu){return Object.prototype.toString.call(Cu)==="[object Object]"}function us(Cu,Tu){return Cu===Tu?!0:typeof Cu!=typeof Tu?!1:!!(Number.isNaN(Cu)&&Number.isNaN(Tu))}function xf(Cu,Tu){const Pu=Object.getOwnPropertyNames(Cu),Bu=Object.getOwnPropertyNames(Tu);if(Pu.length!==Bu.length)return!1;for(let Lu=0,Ru=Pu.length;Lu<Ru;Lu++){const Ou=Pu[Lu];if(!us(Cu[Ou],Tu[Ou]))return!1}return!0}function If(Cu,Tu){if(Cu.length!==Tu.length)return!1;for(let Pu=0,Bu=Cu.length;Pu<Bu;Pu++)if(!us(Cu[Pu],Tu[Pu]))return!1;return!0}function Tf(Cu,Tu){return us(Cu,Tu)?!0:es(Cu)&&es(Tu)?xf(Cu,Tu):Array.isArray(Cu)&&Array.isArray(Tu)?If(Cu,Tu):!1}function Bo(Cu,Tu){return us(Cu,Tu)?!0:es(Cu)&&es(Tu)?kf(Cu,Tu):Array.isArray(Cu)&&Array.isArray(Tu)?Sf(Cu,Tu):!1}function Sf(Cu,Tu){if(Cu.length!==Tu.length)return!1;for(let Pu=0,Bu=Cu.length;Pu<Bu;Pu++)if(!Bo(Cu[Pu],Tu[Pu]))return!1;return!0}function kf(Cu,Tu){const Pu=Object.getOwnPropertyNames(Cu),Bu=Object.getOwnPropertyNames(Tu);if(Pu.length!==Bu.length)return!1;for(let Lu=0,Ru=Pu.length;Lu<Ru;Lu++){const Ou=Pu[Lu];if(!Bo(Cu[Ou],Tu[Ou]))return!1}return!0}function St(Cu,Tu,Pu={deep:!1}){return Pu.deep?Bo(Cu,Tu):Tf(Cu,Tu)}function On(Cu){return Cu<.5?4*Cu*Cu*Cu:.5*Math.pow(2*Cu-2,3)+1}function Bc(Cu){const Tu=Cu-1;return Tu*Tu*Tu+1}function vn(Cu,{delay:Tu=0,duration:Pu=400,easing:Bu=zn}={}){const Lu=+getComputedStyle(Cu).opacity;return{delay:Tu,duration:Pu,easing:Bu,css:Ru=>`opacity: ${Ru*Lu}`}}function Or(Cu,{delay:Tu=0,duration:Pu=400,easing:Bu=Bc,x:Lu=0,y:Ru=0,opacity:Ou=0}={}){const Du=getComputedStyle(Cu),ku=+Du.opacity,Fu=Du.transform==="none"?"":Du.transform,Nu=ku*(1-Ou);return{delay:Tu,duration:Pu,easing:Bu,css:(Gu,zu)=>`
			transform: ${Fu} translate(${(1-Gu)*Lu}px, ${(1-Gu)*Ru}px);
			opacity: ${ku-Nu*zu}`}}function ts(Cu,{delay:Tu=0,speed:Pu,duration:Bu,easing:Lu=On}={}){let Ru=Cu.getTotalLength();const Ou=getComputedStyle(Cu);return Ou.strokeLinecap!=="butt"&&(Ru+=parseInt(Ou.strokeWidth)),Bu===void 0?Pu===void 0?Bu=800:Bu=Ru/Pu:typeof Bu=="function"&&(Bu=Bu(Ru)),{delay:Tu,duration:Bu,easing:Lu,css:(Du,ku)=>`stroke-dasharray: ${Du*Ru} ${ku*Ru}`}}const In=[];function Ro(Cu,Tu=le){let Pu;const Bu=new Set;function Lu(Du){if(de(Cu,Du)&&(Cu=Du,Pu)){const ku=!In.length;for(const Fu of Bu)Fu[1](),In.push(Fu,Cu);if(ku){for(let Fu=0;Fu<In.length;Fu+=2)In[Fu][0](In[Fu+1]);In.length=0}}}function Ru(Du){Lu(Du(Cu))}function Ou(Du,ku=le){const Fu=[Du,ku];return Bu.add(Fu),Bu.size===1&&(Pu=Tu(Lu)||le),Du(Cu),()=>{Bu.delete(Fu),Bu.size===0&&(Pu(),Pu=null)}}return{set:Lu,update:Ru,subscribe:Ou}}class ps{constructor(Tu){b(this,"five"),b(this,"hooks",new Subscribe),this.five=Tu}getCurrentState(){return this.state}}class En extends ps{}const ns=window.requestAnimationFrame||(Cu=>setTimeout(Cu,16)),jp=window.cancelAnimationFrame||clearTimeout;function _o(Cu,Tu=60){let Pu=-1,Bu=0,Lu=-1;const Ru=1e3/Tu;function Ou(Du){Lu===-1&&(Lu=Du),Pu=ns(Ou),!(Du-Bu<Ru)&&(Bu=Du,Cu&&Cu(Du-Lu))}return Pu=ns(Ou),function(){jp(Pu)}}new TextureLoader;class im extends exports.Tween{constructor(){super(...arguments),b(this,"disposeMethods",[]),b(this,"animationFrameDisposer"),b(this,"onDispose",Tu=>(this.disposeMethods.push(Tu),this)),b(this,"play",()=>(this.start(0),this.animationFrameDisposer=_o(Tu=>this.update(Tu)),this)),b(this,"dispose",()=>{var Tu;this.stop(),(Tu=this.animationFrameDisposer)==null||Tu.call(this),this.disposeMethods.forEach(Pu=>Pu()),this.disposeMethods=[],exports.remove(this)})}}var Vc={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(Cu){(function(Tu,Pu,Bu,Lu){var Ru=["","webkit","Moz","MS","ms","o"],Ou=Pu.createElement("div"),Du="function",ku=Math.round,Fu=Math.abs,Nu=Date.now;function Gu(Ap,Mp,Fp){return setTimeout(_f(Ap,Fp),Mp)}function zu(Ap,Mp,Fp){return Array.isArray(Ap)?(Hu(Ap,Fp[Mp],Fp),!0):!1}function Hu(Ap,Mp,Fp){var Yp;if(Ap)if(Ap.forEach)Ap.forEach(Mp,Fp);else if(Ap.length!==Lu)for(Yp=0;Yp<Ap.length;)Mp.call(Fp,Ap[Yp],Yp,Ap),Yp++;else for(Yp in Ap)Ap.hasOwnProperty(Yp)&&Mp.call(Fp,Ap[Yp],Yp,Ap)}function Wu(Ap,Mp,Fp){var Yp="DEPRECATED METHOD: "+Mp+`
`+Fp+` AT 
`;return function(){var nm=new Error("get-stack-trace"),Sm=nm&&nm.stack?nm.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Bm=Tu.console&&(Tu.console.warn||Tu.console.log);return Bm&&Bm.call(Tu.console,Yp,Sm),Ap.apply(this,arguments)}}var _h;typeof Object.assign!="function"?_h=function(Ap){if(Ap===Lu||Ap===null)throw new TypeError("Cannot convert undefined or null to object");for(var Mp=Object(Ap),Fp=1;Fp<arguments.length;Fp++){var Yp=arguments[Fp];if(Yp!==Lu&&Yp!==null)for(var nm in Yp)Yp.hasOwnProperty(nm)&&(Mp[nm]=Yp[nm])}return Mp}:_h=Object.assign;var Xc=Wu(function(Ap,Mp,Fp){for(var Yp=Object.keys(Mp),nm=0;nm<Yp.length;)(!Fp||Fp&&Ap[Yp[nm]]===Lu)&&(Ap[Yp[nm]]=Mp[Yp[nm]]),nm++;return Ap},"extend","Use `assign`."),ju=Wu(function(Ap,Mp){return Xc(Ap,Mp,!0)},"merge","Use `assign`.");function _c(Ap,Mp,Fp){var Yp=Mp.prototype,nm;nm=Ap.prototype=Object.create(Yp),nm.constructor=Ap,nm._super=Yp,Fp&&_h(nm,Fp)}function _f(Ap,Mp){return function(){return Ap.apply(Mp,arguments)}}function ep(Ap,Mp){return typeof Ap==Du?Ap.apply(Mp&&Mp[0]||Lu,Mp):Ap}function tp(Ap,Mp){return Ap===Lu?Mp:Ap}function op(Ap,Mp,Fp){Hu(np(Mp),function(Yp){Ap.addEventListener(Yp,Fp,!1)})}function lp(Ap,Mp,Fp){Hu(np(Mp),function(Yp){Ap.removeEventListener(Yp,Fp,!1)})}function up(Ap,Mp){for(;Ap;){if(Ap==Mp)return!0;Ap=Ap.parentNode}return!1}function hp(Ap,Mp){return Ap.indexOf(Mp)>-1}function np(Ap){return Ap.trim().split(/\s+/g)}function rp(Ap,Mp,Fp){if(Ap.indexOf&&!Fp)return Ap.indexOf(Mp);for(var Yp=0;Yp<Ap.length;){if(Fp&&Ap[Yp][Fp]==Mp||!Fp&&Ap[Yp]===Mp)return Yp;Yp++}return-1}function ip(Ap){return Array.prototype.slice.call(Ap,0)}function ap(Ap,Mp,Fp){for(var Yp=[],nm=[],Sm=0;Sm<Ap.length;){var Bm=Mp?Ap[Sm][Mp]:Ap[Sm];rp(nm,Bm)<0&&Yp.push(Ap[Sm]),nm[Sm]=Bm,Sm++}return Fp&&(Mp?Yp=Yp.sort(function(Gm,_g){return Gm[Mp]>_g[Mp]}):Yp=Yp.sort()),Yp}function sp(Ap,Mp){for(var Fp,Yp,nm=Mp[0].toUpperCase()+Mp.slice(1),Sm=0;Sm<Ru.length;){if(Fp=Ru[Sm],Yp=Fp?Fp+nm:Mp,Yp in Ap)return Yp;Sm++}return Lu}var cp=1;function dp(){return cp++}function fp(Ap){var Mp=Ap.ownerDocument||Ap;return Mp.defaultView||Mp.parentWindow||Tu}var vp=/mobile|tablet|ip(ad|hone|od)|android/i,_p="ontouchstart"in Tu,wp=sp(Tu,"PointerEvent")!==Lu,Dp=_p&&vp.test(navigator.userAgent),Pp="touch",Wp="pen",Rp="mouse",Gp="kinect",kp=25,gp=1,mp=2,Sp=4,xp=8,Ep=1,$p=2,Ip=4,Np=8,qp=16,Vp=$p|Ip,pp=Np|qp,bp=Vp|pp,zp=["x","y"],Up=["clientX","clientY"];function Jp(Ap,Mp){var Fp=this;this.manager=Ap,this.callback=Mp,this.element=Ap.element,this.target=Ap.options.inputTarget,this.domHandler=function(Yp){ep(Ap.options.enable,[Ap])&&Fp.handler(Yp)},this.init()}Jp.prototype={handler:function(){},init:function(){this.evEl&&op(this.element,this.evEl,this.domHandler),this.evTarget&&op(this.target,this.evTarget,this.domHandler),this.evWin&&op(fp(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&lp(this.element,this.evEl,this.domHandler),this.evTarget&&lp(this.target,this.evTarget,this.domHandler),this.evWin&&lp(fp(this.element),this.evWin,this.domHandler)}};function Xp(Ap){var Mp,Fp=Ap.options.inputClass;return Fp?Mp=Fp:wp?Mp=Im:Dp?Mp=cm:_p?Mp=bm:Mp=Pm,new Mp(Ap,tm)}function tm(Ap,Mp,Fp){var Yp=Fp.pointers.length,nm=Fp.changedPointers.length,Sm=Mp&gp&&Yp-nm===0,Bm=Mp&(Sp|xp)&&Yp-nm===0;Fp.isFirst=!!Sm,Fp.isFinal=!!Bm,Sm&&(Ap.session={}),Fp.eventType=Mp,lm(Ap,Fp),Ap.emit("hammer.input",Fp),Ap.recognize(Fp),Ap.session.prevInput=Fp}function lm(Ap,Mp){var Fp=Ap.session,Yp=Mp.pointers,nm=Yp.length;Fp.firstInput||(Fp.firstInput=rm(Mp)),nm>1&&!Fp.firstMultiple?Fp.firstMultiple=rm(Mp):nm===1&&(Fp.firstMultiple=!1);var Sm=Fp.firstInput,Bm=Fp.firstMultiple,Gm=Bm?Bm.center:Sm.center,_g=Mp.center=um(Yp);Mp.timeStamp=Nu(),Mp.deltaTime=Mp.timeStamp-Sm.timeStamp,Mp.angle=sm(Gm,_g),Mp.distance=Lp(Gm,_g),am(Fp,Mp),Mp.offsetDirection=hm(Mp.deltaX,Mp.deltaY);var Ym=om(Mp.deltaTime,Mp.deltaX,Mp.deltaY);Mp.overallVelocityX=Ym.x,Mp.overallVelocityY=Ym.y,Mp.overallVelocity=Fu(Ym.x)>Fu(Ym.y)?Ym.x:Ym.y,Mp.scale=Bm?mm(Bm.pointers,Yp):1,Mp.rotation=Bm?dm(Bm.pointers,Yp):0,Mp.maxPointers=Fp.prevInput?Mp.pointers.length>Fp.prevInput.maxPointers?Mp.pointers.length:Fp.prevInput.maxPointers:Mp.pointers.length,fm(Fp,Mp);var nx=Ap.element;up(Mp.srcEvent.target,nx)&&(nx=Mp.srcEvent.target),Mp.target=nx}function am(Ap,Mp){var Fp=Mp.center,Yp=Ap.offsetDelta||{},nm=Ap.prevDelta||{},Sm=Ap.prevInput||{};(Mp.eventType===gp||Sm.eventType===Sp)&&(nm=Ap.prevDelta={x:Sm.deltaX||0,y:Sm.deltaY||0},Yp=Ap.offsetDelta={x:Fp.x,y:Fp.y}),Mp.deltaX=nm.x+(Fp.x-Yp.x),Mp.deltaY=nm.y+(Fp.y-Yp.y)}function fm(Ap,Mp){var Fp=Ap.lastInterval||Mp,Yp=Mp.timeStamp-Fp.timeStamp,nm,Sm,Bm,Gm;if(Mp.eventType!=xp&&(Yp>kp||Fp.velocity===Lu)){var _g=Mp.deltaX-Fp.deltaX,Ym=Mp.deltaY-Fp.deltaY,nx=om(Yp,_g,Ym);Sm=nx.x,Bm=nx.y,nm=Fu(nx.x)>Fu(nx.y)?nx.x:nx.y,Gm=hm(_g,Ym),Ap.lastInterval=Mp}else nm=Fp.velocity,Sm=Fp.velocityX,Bm=Fp.velocityY,Gm=Fp.direction;Mp.velocity=nm,Mp.velocityX=Sm,Mp.velocityY=Bm,Mp.direction=Gm}function rm(Ap){for(var Mp=[],Fp=0;Fp<Ap.pointers.length;)Mp[Fp]={clientX:ku(Ap.pointers[Fp].clientX),clientY:ku(Ap.pointers[Fp].clientY)},Fp++;return{timeStamp:Nu(),pointers:Mp,center:um(Mp),deltaX:Ap.deltaX,deltaY:Ap.deltaY}}function um(Ap){var Mp=Ap.length;if(Mp===1)return{x:ku(Ap[0].clientX),y:ku(Ap[0].clientY)};for(var Fp=0,Yp=0,nm=0;nm<Mp;)Fp+=Ap[nm].clientX,Yp+=Ap[nm].clientY,nm++;return{x:ku(Fp/Mp),y:ku(Yp/Mp)}}function om(Ap,Mp,Fp){return{x:Mp/Ap||0,y:Fp/Ap||0}}function hm(Ap,Mp){return Ap===Mp?Ep:Fu(Ap)>=Fu(Mp)?Ap<0?$p:Ip:Mp<0?Np:qp}function Lp(Ap,Mp,Fp){Fp||(Fp=zp);var Yp=Mp[Fp[0]]-Ap[Fp[0]],nm=Mp[Fp[1]]-Ap[Fp[1]];return Math.sqrt(Yp*Yp+nm*nm)}function sm(Ap,Mp,Fp){Fp||(Fp=zp);var Yp=Mp[Fp[0]]-Ap[Fp[0]],nm=Mp[Fp[1]]-Ap[Fp[1]];return Math.atan2(nm,Yp)*180/Math.PI}function dm(Ap,Mp){return sm(Mp[1],Mp[0],Up)+sm(Ap[1],Ap[0],Up)}function mm(Ap,Mp){return Lp(Mp[0],Mp[1],Up)/Lp(Ap[0],Ap[1],Up)}var pm={mousedown:gp,mousemove:mp,mouseup:Sp},wm="mousedown",$m="mousemove mouseup";function Pm(){this.evEl=wm,this.evWin=$m,this.pressed=!1,Jp.apply(this,arguments)}_c(Pm,Jp,{handler:function(Ap){var Mp=pm[Ap.type];Mp&gp&&Ap.button===0&&(this.pressed=!0),Mp&mp&&Ap.which!==1&&(Mp=Sp),this.pressed&&(Mp&Sp&&(this.pressed=!1),this.callback(this.manager,Mp,{pointers:[Ap],changedPointers:[Ap],pointerType:Rp,srcEvent:Ap}))}});var Nm={pointerdown:gp,pointermove:mp,pointerup:Sp,pointercancel:xp,pointerout:xp},Tm={2:Pp,3:Wp,4:Rp,5:Gp},Dm="pointerdown",km="pointermove pointerup pointercancel";Tu.MSPointerEvent&&!Tu.PointerEvent&&(Dm="MSPointerDown",km="MSPointerMove MSPointerUp MSPointerCancel");function Im(){this.evEl=Dm,this.evWin=km,Jp.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_c(Im,Jp,{handler:function(Ap){var Mp=this.store,Fp=!1,Yp=Ap.type.toLowerCase().replace("ms",""),nm=Nm[Yp],Sm=Tm[Ap.pointerType]||Ap.pointerType,Bm=Sm==Pp,Gm=rp(Mp,Ap.pointerId,"pointerId");nm&gp&&(Ap.button===0||Bm)?Gm<0&&(Mp.push(Ap),Gm=Mp.length-1):nm&(Sp|xp)&&(Fp=!0),!(Gm<0)&&(Mp[Gm]=Ap,this.callback(this.manager,nm,{pointers:Mp,changedPointers:[Ap],pointerType:Sm,srcEvent:Ap}),Fp&&Mp.splice(Gm,1))}});var Um={touchstart:gp,touchmove:mp,touchend:Sp,touchcancel:xp},Wm="touchstart",Lm="touchstart touchmove touchend touchcancel";function Cp(){this.evTarget=Wm,this.evWin=Lm,this.started=!1,Jp.apply(this,arguments)}_c(Cp,Jp,{handler:function(Ap){var Mp=Um[Ap.type];if(Mp===gp&&(this.started=!0),!!this.started){var Fp=Kp.call(this,Ap,Mp);Mp&(Sp|xp)&&Fp[0].length-Fp[1].length===0&&(this.started=!1),this.callback(this.manager,Mp,{pointers:Fp[0],changedPointers:Fp[1],pointerType:Pp,srcEvent:Ap})}}});function Kp(Ap,Mp){var Fp=ip(Ap.touches),Yp=ip(Ap.changedTouches);return Mp&(Sp|xp)&&(Fp=ap(Fp.concat(Yp),"identifier",!0)),[Fp,Yp]}var Qp={touchstart:gp,touchmove:mp,touchend:Sp,touchcancel:xp},Zp="touchstart touchmove touchend touchcancel";function cm(){this.evTarget=Zp,this.targetIds={},Jp.apply(this,arguments)}_c(cm,Jp,{handler:function(Ap){var Mp=Qp[Ap.type],Fp=Mm.call(this,Ap,Mp);!Fp||this.callback(this.manager,Mp,{pointers:Fp[0],changedPointers:Fp[1],pointerType:Pp,srcEvent:Ap})}});function Mm(Ap,Mp){var Fp=ip(Ap.touches),Yp=this.targetIds;if(Mp&(gp|mp)&&Fp.length===1)return Yp[Fp[0].identifier]=!0,[Fp,Fp];var nm,Sm,Bm=ip(Ap.changedTouches),Gm=[],_g=this.target;if(Sm=Fp.filter(function(Ym){return up(Ym.target,_g)}),Mp===gp)for(nm=0;nm<Sm.length;)Yp[Sm[nm].identifier]=!0,nm++;for(nm=0;nm<Bm.length;)Yp[Bm[nm].identifier]&&Gm.push(Bm[nm]),Mp&(Sp|xp)&&delete Yp[Bm[nm].identifier],nm++;if(Gm.length)return[ap(Sm.concat(Gm),"identifier",!0),Gm]}var _m=2500,ym=25;function bm(){Jp.apply(this,arguments);var Ap=_f(this.handler,this);this.touch=new cm(this.manager,Ap),this.mouse=new Pm(this.manager,Ap),this.primaryTouch=null,this.lastTouches=[]}_c(bm,Jp,{handler:function(Ap,Mp,Fp){var Yp=Fp.pointerType==Pp,nm=Fp.pointerType==Rp;if(!(nm&&Fp.sourceCapabilities&&Fp.sourceCapabilities.firesTouchEvents)){if(Yp)Em.call(this,Mp,Fp);else if(nm&&yp.call(this,Fp))return;this.callback(Ap,Mp,Fp)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Em(Ap,Mp){Ap&gp?(this.primaryTouch=Mp.changedPointers[0].identifier,Rm.call(this,Mp)):Ap&(Sp|xp)&&Rm.call(this,Mp)}function Rm(Ap){var Mp=Ap.changedPointers[0];if(Mp.identifier===this.primaryTouch){var Fp={x:Mp.clientX,y:Mp.clientY};this.lastTouches.push(Fp);var Yp=this.lastTouches,nm=function(){var Sm=Yp.indexOf(Fp);Sm>-1&&Yp.splice(Sm,1)};setTimeout(nm,_m)}}function yp(Ap){for(var Mp=Ap.srcEvent.clientX,Fp=Ap.srcEvent.clientY,Yp=0;Yp<this.lastTouches.length;Yp++){var nm=this.lastTouches[Yp],Sm=Math.abs(Mp-nm.x),Bm=Math.abs(Fp-nm.y);if(Sm<=ym&&Bm<=ym)return!0}return!1}var Tp=sp(Ou.style,"touchAction"),Bp=Tp!==Lu,Hp="compute",em="auto",Am="manipulation",xm="none",Fm="pan-x",gm="pan-y",Vm=sx();function Qm(Ap,Mp){this.manager=Ap,this.set(Mp)}Qm.prototype={set:function(Ap){Ap==Hp&&(Ap=this.compute()),Bp&&this.manager.element.style&&Vm[Ap]&&(this.manager.element.style[Tp]=Ap),this.actions=Ap.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ap=[];return Hu(this.manager.recognizers,function(Mp){ep(Mp.options.enable,[Mp])&&(Ap=Ap.concat(Mp.getTouchAction()))}),ox(Ap.join(" "))},preventDefaults:function(Ap){var Mp=Ap.srcEvent,Fp=Ap.offsetDirection;if(this.manager.session.prevented){Mp.preventDefault();return}var Yp=this.actions,nm=hp(Yp,xm)&&!Vm[xm],Sm=hp(Yp,gm)&&!Vm[gm],Bm=hp(Yp,Fm)&&!Vm[Fm];if(nm){var Gm=Ap.pointers.length===1,_g=Ap.distance<2,Ym=Ap.deltaTime<250;if(Gm&&_g&&Ym)return}if(!(Bm&&Sm)&&(nm||Sm&&Fp&Vp||Bm&&Fp&pp))return this.preventSrc(Mp)},preventSrc:function(Ap){this.manager.session.prevented=!0,Ap.preventDefault()}};function ox(Ap){if(hp(Ap,xm))return xm;var Mp=hp(Ap,Fm),Fp=hp(Ap,gm);return Mp&&Fp?xm:Mp||Fp?Mp?Fm:gm:hp(Ap,Am)?Am:em}function sx(){if(!Bp)return!1;var Ap={},Mp=Tu.CSS&&Tu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Fp){Ap[Fp]=Mp?Tu.CSS.supports("touch-action",Fp):!0}),Ap}var Jm=1,qm=2,rx=4,Km=8,Xm=Km,zm=16,Om=32;function jm(Ap){this.options=_h({},this.defaults,Ap||{}),this.id=dp(),this.manager=null,this.options.enable=tp(this.options.enable,!0),this.state=Jm,this.simultaneous={},this.requireFail=[]}jm.prototype={defaults:{},set:function(Ap){return _h(this.options,Ap),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ap){if(zu(Ap,"recognizeWith",this))return this;var Mp=this.simultaneous;return Ap=Zm(Ap,this),Mp[Ap.id]||(Mp[Ap.id]=Ap,Ap.recognizeWith(this)),this},dropRecognizeWith:function(Ap){return zu(Ap,"dropRecognizeWith",this)?this:(Ap=Zm(Ap,this),delete this.simultaneous[Ap.id],this)},requireFailure:function(Ap){if(zu(Ap,"requireFailure",this))return this;var Mp=this.requireFail;return Ap=Zm(Ap,this),rp(Mp,Ap)===-1&&(Mp.push(Ap),Ap.requireFailure(this)),this},dropRequireFailure:function(Ap){if(zu(Ap,"dropRequireFailure",this))return this;Ap=Zm(Ap,this);var Mp=rp(this.requireFail,Ap);return Mp>-1&&this.requireFail.splice(Mp,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ap){return!!this.simultaneous[Ap.id]},emit:function(Ap){var Mp=this,Fp=this.state;function Yp(nm){Mp.manager.emit(nm,Ap)}Fp<Km&&Yp(Mp.options.event+e0(Fp)),Yp(Mp.options.event),Ap.additionalEvent&&Yp(Ap.additionalEvent),Fp>=Km&&Yp(Mp.options.event+e0(Fp))},tryEmit:function(Ap){if(this.canEmit())return this.emit(Ap);this.state=Om},canEmit:function(){for(var Ap=0;Ap<this.requireFail.length;){if(!(this.requireFail[Ap].state&(Om|Jm)))return!1;Ap++}return!0},recognize:function(Ap){var Mp=_h({},Ap);if(!ep(this.options.enable,[this,Mp])){this.reset(),this.state=Om;return}this.state&(Xm|zm|Om)&&(this.state=Jm),this.state=this.process(Mp),this.state&(qm|rx|Km|zm)&&this.tryEmit(Mp)},process:function(Ap){},getTouchAction:function(){},reset:function(){}};function e0(Ap){return Ap&zm?"cancel":Ap&Km?"end":Ap&rx?"move":Ap&qm?"start":""}function ex(Ap){return Ap==qp?"down":Ap==Np?"up":Ap==$p?"left":Ap==Ip?"right":""}function Zm(Ap,Mp){var Fp=Mp.manager;return Fp?Fp.get(Ap):Ap}function Hm(){jm.apply(this,arguments)}_c(Hm,jm,{defaults:{pointers:1},attrTest:function(Ap){var Mp=this.options.pointers;return Mp===0||Ap.pointers.length===Mp},process:function(Ap){var Mp=this.state,Fp=Ap.eventType,Yp=Mp&(qm|rx),nm=this.attrTest(Ap);return Yp&&(Fp&xp||!nm)?Mp|zm:Yp||nm?Fp&Sp?Mp|Km:Mp&qm?Mp|rx:qm:Om}});function ax(){Hm.apply(this,arguments),this.pX=null,this.pY=null}_c(ax,Hm,{defaults:{event:"pan",threshold:10,pointers:1,direction:bp},getTouchAction:function(){var Ap=this.options.direction,Mp=[];return Ap&Vp&&Mp.push(gm),Ap&pp&&Mp.push(Fm),Mp},directionTest:function(Ap){var Mp=this.options,Fp=!0,Yp=Ap.distance,nm=Ap.direction,Sm=Ap.deltaX,Bm=Ap.deltaY;return nm&Mp.direction||(Mp.direction&Vp?(nm=Sm===0?Ep:Sm<0?$p:Ip,Fp=Sm!=this.pX,Yp=Math.abs(Ap.deltaX)):(nm=Bm===0?Ep:Bm<0?Np:qp,Fp=Bm!=this.pY,Yp=Math.abs(Ap.deltaY))),Ap.direction=nm,Fp&&Yp>Mp.threshold&&nm&Mp.direction},attrTest:function(Ap){return Hm.prototype.attrTest.call(this,Ap)&&(this.state&qm||!(this.state&qm)&&this.directionTest(Ap))},emit:function(Ap){this.pX=Ap.deltaX,this.pY=Ap.deltaY;var Mp=ex(Ap.direction);Mp&&(Ap.additionalEvent=this.options.event+Mp),this._super.emit.call(this,Ap)}});function lx(){Hm.apply(this,arguments)}_c(lx,Hm,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xm]},attrTest:function(Ap){return this._super.attrTest.call(this,Ap)&&(Math.abs(Ap.scale-1)>this.options.threshold||this.state&qm)},emit:function(Ap){if(Ap.scale!==1){var Mp=Ap.scale<1?"in":"out";Ap.additionalEvent=this.options.event+Mp}this._super.emit.call(this,Ap)}});function ux(){jm.apply(this,arguments),this._timer=null,this._input=null}_c(ux,jm,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[em]},process:function(Ap){var Mp=this.options,Fp=Ap.pointers.length===Mp.pointers,Yp=Ap.distance<Mp.threshold,nm=Ap.deltaTime>Mp.time;if(this._input=Ap,!Yp||!Fp||Ap.eventType&(Sp|xp)&&!nm)this.reset();else if(Ap.eventType&gp)this.reset(),this._timer=Gu(function(){this.state=Xm,this.tryEmit()},Mp.time,this);else if(Ap.eventType&Sp)return Xm;return Om},reset:function(){clearTimeout(this._timer)},emit:function(Ap){this.state===Xm&&(Ap&&Ap.eventType&Sp?this.manager.emit(this.options.event+"up",Ap):(this._input.timeStamp=Nu(),this.manager.emit(this.options.event,this._input)))}});function tx(){Hm.apply(this,arguments)}_c(tx,Hm,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xm]},attrTest:function(Ap){return this._super.attrTest.call(this,Ap)&&(Math.abs(Ap.rotation)>this.options.threshold||this.state&qm)}});function hx(){Hm.apply(this,arguments)}_c(hx,Hm,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Vp|pp,pointers:1},getTouchAction:function(){return ax.prototype.getTouchAction.call(this)},attrTest:function(Ap){var Mp=this.options.direction,Fp;return Mp&(Vp|pp)?Fp=Ap.overallVelocity:Mp&Vp?Fp=Ap.overallVelocityX:Mp&pp&&(Fp=Ap.overallVelocityY),this._super.attrTest.call(this,Ap)&&Mp&Ap.offsetDirection&&Ap.distance>this.options.threshold&&Ap.maxPointers==this.options.pointers&&Fu(Fp)>this.options.velocity&&Ap.eventType&Sp},emit:function(Ap){var Mp=ex(Ap.offsetDirection);Mp&&this.manager.emit(this.options.event+Mp,Ap),this.manager.emit(this.options.event,Ap)}});function cx(){jm.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_c(cx,jm,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Am]},process:function(Ap){var Mp=this.options,Fp=Ap.pointers.length===Mp.pointers,Yp=Ap.distance<Mp.threshold,nm=Ap.deltaTime<Mp.time;if(this.reset(),Ap.eventType&gp&&this.count===0)return this.failTimeout();if(Yp&&nm&&Fp){if(Ap.eventType!=Sp)return this.failTimeout();var Sm=this.pTime?Ap.timeStamp-this.pTime<Mp.interval:!0,Bm=!this.pCenter||Lp(this.pCenter,Ap.center)<Mp.posThreshold;this.pTime=Ap.timeStamp,this.pCenter=Ap.center,!Bm||!Sm?this.count=1:this.count+=1,this._input=Ap;var Gm=this.count%Mp.taps;if(Gm===0)return this.hasRequireFailures()?(this._timer=Gu(function(){this.state=Xm,this.tryEmit()},Mp.interval,this),qm):Xm}return Om},failTimeout:function(){return this._timer=Gu(function(){this.state=Om},this.options.interval,this),Om},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Xm&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ix(Ap,Mp){return Mp=Mp||{},Mp.recognizers=tp(Mp.recognizers,ix.defaults.preset),new dx(Ap,Mp)}ix.VERSION="2.0.7",ix.defaults={domEvents:!1,touchAction:Hp,enable:!0,inputTarget:null,inputClass:null,preset:[[tx,{enable:!1}],[lx,{enable:!1},["rotate"]],[hx,{direction:Vp}],[ax,{direction:Vp},["swipe"]],[cx],[cx,{event:"doubletap",taps:2},["tap"]],[ux]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var vx=1,fx=2;function dx(Ap,Mp){this.options=_h({},ix.defaults,Mp||{}),this.options.inputTarget=this.options.inputTarget||Ap,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ap,this.input=Xp(this),this.touchAction=new Qm(this,this.options.touchAction),mx(this,!0),Hu(this.options.recognizers,function(Fp){var Yp=this.add(new Fp[0](Fp[1]));Fp[2]&&Yp.recognizeWith(Fp[2]),Fp[3]&&Yp.requireFailure(Fp[3])},this)}dx.prototype={set:function(Ap){return _h(this.options,Ap),Ap.touchAction&&this.touchAction.update(),Ap.inputTarget&&(this.input.destroy(),this.input.target=Ap.inputTarget,this.input.init()),this},stop:function(Ap){this.session.stopped=Ap?fx:vx},recognize:function(Ap){var Mp=this.session;if(!Mp.stopped){this.touchAction.preventDefaults(Ap);var Fp,Yp=this.recognizers,nm=Mp.curRecognizer;(!nm||nm&&nm.state&Xm)&&(nm=Mp.curRecognizer=null);for(var Sm=0;Sm<Yp.length;)Fp=Yp[Sm],Mp.stopped!==fx&&(!nm||Fp==nm||Fp.canRecognizeWith(nm))?Fp.recognize(Ap):Fp.reset(),!nm&&Fp.state&(qm|rx|Km)&&(nm=Mp.curRecognizer=Fp),Sm++}},get:function(Ap){if(Ap instanceof jm)return Ap;for(var Mp=this.recognizers,Fp=0;Fp<Mp.length;Fp++)if(Mp[Fp].options.event==Ap)return Mp[Fp];return null},add:function(Ap){if(zu(Ap,"add",this))return this;var Mp=this.get(Ap.options.event);return Mp&&this.remove(Mp),this.recognizers.push(Ap),Ap.manager=this,this.touchAction.update(),Ap},remove:function(Ap){if(zu(Ap,"remove",this))return this;if(Ap=this.get(Ap),Ap){var Mp=this.recognizers,Fp=rp(Mp,Ap);Fp!==-1&&(Mp.splice(Fp,1),this.touchAction.update())}return this},on:function(Ap,Mp){if(Ap!==Lu&&Mp!==Lu){var Fp=this.handlers;return Hu(np(Ap),function(Yp){Fp[Yp]=Fp[Yp]||[],Fp[Yp].push(Mp)}),this}},off:function(Ap,Mp){if(Ap!==Lu){var Fp=this.handlers;return Hu(np(Ap),function(Yp){Mp?Fp[Yp]&&Fp[Yp].splice(rp(Fp[Yp],Mp),1):delete Fp[Yp]}),this}},emit:function(Ap,Mp){this.options.domEvents&&gx(Ap,Mp);var Fp=this.handlers[Ap]&&this.handlers[Ap].slice();if(!(!Fp||!Fp.length)){Mp.type=Ap,Mp.preventDefault=function(){Mp.srcEvent.preventDefault()};for(var Yp=0;Yp<Fp.length;)Fp[Yp](Mp),Yp++}},destroy:function(){this.element&&mx(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function mx(Ap,Mp){var Fp=Ap.element;if(Fp.style){var Yp;Hu(Ap.options.cssProps,function(nm,Sm){Yp=sp(Fp.style,Sm),Mp?(Ap.oldCssProps[Yp]=Fp.style[Yp],Fp.style[Yp]=nm):Fp.style[Yp]=Ap.oldCssProps[Yp]||""}),Mp||(Ap.oldCssProps={})}}function gx(Ap,Mp){var Fp=Pu.createEvent("Event");Fp.initEvent(Ap,!0,!0),Fp.gesture=Mp,Mp.target.dispatchEvent(Fp)}_h(ix,{INPUT_START:gp,INPUT_MOVE:mp,INPUT_END:Sp,INPUT_CANCEL:xp,STATE_POSSIBLE:Jm,STATE_BEGAN:qm,STATE_CHANGED:rx,STATE_ENDED:Km,STATE_RECOGNIZED:Xm,STATE_CANCELLED:zm,STATE_FAILED:Om,DIRECTION_NONE:Ep,DIRECTION_LEFT:$p,DIRECTION_RIGHT:Ip,DIRECTION_UP:Np,DIRECTION_DOWN:qp,DIRECTION_HORIZONTAL:Vp,DIRECTION_VERTICAL:pp,DIRECTION_ALL:bp,Manager:dx,Input:Jp,TouchAction:Qm,TouchInput:cm,MouseInput:Pm,PointerEventInput:Im,TouchMouseInput:bm,SingleTouchInput:Cp,Recognizer:jm,AttrRecognizer:Hm,Tap:cx,Pan:ax,Swipe:hx,Pinch:lx,Rotate:tx,Press:ux,on:op,off:lp,each:Hu,merge:ju,extend:Xc,assign:_h,inherit:_c,bindFn:_f,prefixed:sp});var yx=typeof Tu<"u"?Tu:typeof self<"u"?self:{};yx.Hammer=ix,typeof Lu=="function"&&Lu.amd?Lu(function(){return ix}):Cu.exports?Cu.exports=ix:Tu[Bu]=ix})(window,document,"Hammer")})(Vc);Vc.exports;new Color(16777215);new Color(6522623);new Color(16777215);new Color(6522623);const vm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==";new TextureLoader().load(vm);var id={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(Cu){(function(){var Tu={}.hasOwnProperty;function Pu(){for(var Bu=[],Lu=0;Lu<arguments.length;Lu++){var Ru=arguments[Lu];if(Ru){var Ou=typeof Ru;if(Ou==="string"||Ou==="number")Bu.push(Ru);else if(Array.isArray(Ru)){if(Ru.length){var Du=Pu.apply(null,Ru);Du&&Bu.push(Du)}}else if(Ou==="object"){if(Ru.toString!==Object.prototype.toString&&!Ru.toString.toString().includes("[native code]")){Bu.push(Ru.toString());continue}for(var ku in Ru)Tu.call(Ru,ku)&&Ru[ku]&&Bu.push(ku)}}}return Bu.join(" ")}Cu.exports?(Pu.default=Pu,Cu.exports=Pu):window.classNames=Pu})()})(id);id.exports;var vs={},t0=n0;function n0(Cu,Tu,Pu){return Cu[0]=Tu[0]+Pu[0],Cu[1]=Tu[1]+Pu[1],Cu}var i0=s0;function s0(Cu,Tu,Pu){return Cu[0]=Tu,Cu[1]=Pu,Cu}var o0=r0;function r0(Cu,Tu){var Pu=Tu[0],Bu=Tu[1],Lu=Pu*Pu+Bu*Bu;return Lu>0&&(Lu=1/Math.sqrt(Lu),Cu[0]=Tu[0]*Lu,Cu[1]=Tu[1]*Lu),Cu}var a0=l0;function l0(Cu,Tu,Pu){return Cu[0]=Tu[0]-Pu[0],Cu[1]=Tu[1]-Pu[1],Cu}var c0=d0;function d0(Cu,Tu){return Cu[0]*Tu[0]+Cu[1]*Tu[1]}var u0=t0,po=i0,od=o0,f0=a0,h0=c0,Ha=[0,0];vs.computeMiter=function(Cu,Tu,Pu,Bu,Lu){return u0(Cu,Pu,Bu),od(Cu,Cu),po(Tu,-Cu[1],Cu[0]),po(Ha,-Pu[1],Pu[0]),Lu/h0(Tu,Ha)};vs.normal=function(Cu,Tu){return po(Cu,-Tu[1],Tu[0]),Cu};vs.direction=function(Cu,Tu,Pu){return f0(Cu,Tu,Pu),od(Cu,Cu),Cu};var Gt=vs,cn=[0,0],Di=[0,0],Na=[0,0],_n=[0,0],p0=function(Cu,Tu){var Pu=null,Bu=[];Tu&&(Cu=Cu.slice(),Cu.push(Cu[0]));for(var Lu=Cu.length,Ru=1;Ru<Lu;Ru++){var Ou=Cu[Ru-1],Du=Cu[Ru],ku=Ru<Cu.length-1?Cu[Ru+1]:null;if(Gt.direction(cn,Du,Ou),Pu||(Pu=[0,0],Gt.normal(Pu,cn)),Ru===1&&Ws(Bu,Pu,1),!ku)Gt.normal(Pu,cn),Ws(Bu,Pu,1);else{Gt.direction(Di,ku,Du);var Fu=Gt.computeMiter(Na,_n,cn,Di,1);Ws(Bu,_n,Fu)}}if(Cu.length>2&&Tu){var Nu=Cu[Lu-2],Gu=Cu[0],zu=Cu[1];Gt.direction(cn,Gu,Nu),Gt.direction(Di,zu,Gu),Gt.normal(Pu,cn);var Hu=Gt.computeMiter(Na,_n,cn,Di,1);Bu[0][0]=_n.slice(),Bu[Lu-1][0]=_n.slice(),Bu[0][1]=Hu,Bu[Lu-1][1]=Hu,Bu.pop()}return Bu};function Ws(Cu,Tu,Pu){Cu.push([[Tu[0],Tu[1]],Pu])}const m0=2,g0=3,v0=3,b0=2;function A0(Cu,Tu){var Pu,Bu,Lu;if(Cu.length<2)return console.warn("positionList length must be greater than 1"),[];const Ru=(Pu=Tu==null?void 0:Tu.unitWidth)!=null?Pu:.5,Ou=(Bu=Tu==null?void 0:Tu.unitHeight)!=null?Bu:.5,Du=(Lu=Tu==null?void 0:Tu.skipPosition)!=null?Lu:!1,ku=new CatmullRomCurve3(Cu,!1,"catmullrom",1);if(Du){const Fu=Math.ceil(ku.getLength()/Ou*1.5),Nu=ku.getPoints(Fu),Gu=[];let zu=0;const Hu=Cu;return Hu.forEach((Wu,_h)=>{let Xc=0,ju=99999999;Nu.forEach((op,lp)=>{const up=op.distanceTo(Wu);up<ju&&(Xc=lp,ju=up)});const _c=Nu[Xc+1],_f=_c==null?void 0:_c.distanceTo(Wu),ep=Nu[Xc-1],tp=ep==null?void 0:ep.distanceTo(Wu);if(Xc>zu&&Xc-zu>1){let op=Xc;ep!==void 0&&tp>.8&&(op=Xc+1),ep!==void 0&&tp>.2&&tp<.3?op=Xc:ju>.2&&ju<.3&&(op=Xc+1);let lp=zu;if(_c!==void 0&&_f>.2&&_f<.3?lp=zu+1:ju>.2&&ju<.3&&(lp=zu),Nu[lp]&&Nu[lp+1]){const np=Hu[_h-1];if(np)if(np.equals(Nu[lp]))lp+=1;else{const rp=new Vector3().subVectors(Nu[lp+1],Nu[lp]),ip=new Vector3().subVectors(np,Nu[lp]);rp.angleTo(ip)<Math.PI/2&&(lp+=1)}}if(op<lp||op-lp<=1)return;const up=Nu.slice(lp,op),hp=Ga(up,Ru,Ou);Gu.push(hp),zu=Xc}}),Gu}else{const Fu=Math.ceil(ku.getLength()),Nu=ku.getPoints(Fu);return[Ga(Nu,Ru,Ou)]}}function Ga(Cu,Tu,Pu){const Bu=Tu/2,Lu=Pu/Tu,Ru=Cu.length,Ou=p0(Cu.map(Xc=>[Xc.x,Xc.z])),Du=(Cu.length-1)*m0*g0,ku=2*Ru,Fu=ku*v0,Nu=ku*b0,Gu=new Uint32Array(Du),zu=new Float32Array(Fu),Hu=new Float32Array(Nu);Cu.forEach((Xc,ju)=>{});let Wu=0;for(let Xc=0;Xc<Cu.length;Xc++){const[ju,_c]=Ou[Xc][0],_f=Cu[Xc],{x:ep,y:tp,z:op}=_f,lp=new Vector3(ep+ju*Bu,tp+.05,op+_c*Bu);zu[Xc*6+0]=lp.x,zu[Xc*6+1]=lp.y,zu[Xc*6+2]=lp.z;const up=new Vector3(ep-ju*Bu,tp+.05,op-_c*Bu);zu[Xc*6+3]=up.x,zu[Xc*6+4]=up.y,zu[Xc*6+5]=up.z,Wu+=Xc>0?Cu[Xc-1].clone().sub(Cu[Xc]).length():0;const hp=Wu/Tu/Lu;Hu[Xc*4+0]=0,Hu[Xc*4+1]=hp,Hu[Xc*4+2]=1,Hu[Xc*4+3]=hp,Xc!==Cu.length-1&&(Gu[Xc*6+0]=Xc*2+0,Gu[Xc*6+1]=Xc*2+2,Gu[Xc*6+2]=Xc*2+1,Gu[Xc*6+3]=Xc*2+2,Gu[Xc*6+4]=Xc*2+3,Gu[Xc*6+5]=Xc*2+1)}const _h=new BufferGeometry;return _h.setAttribute("position",new BufferAttribute(zu,3)),_h.setAttribute("uv",new BufferAttribute(Hu,2)),_h.setIndex(new BufferAttribute(Gu,1)),_h}function y0(Cu){var Tu;const Pu=new TextureLoader().load((Tu=Cu==null?void 0:Cu.textureUrl)!=null?Tu:"//vrlab-static.ljcdn.com/release/web/arrow6.b6ce0c62.png");return Pu.wrapS=Pu.wrapT=RepeatWrapping,Pu.encoding=sRGBEncoding,new MeshBasicMaterial({color:16777215,map:Pu,transparent:!0,opacity:.8})}function os(Cu){return Cu!=null}const rd="v1.0.1",ad="GuideLinePlugin",mo=`${ad}@${rd}`,Fa=Cu=>`${mo}--${Cu}`;class ld extends En{constructor(Tu){super(Tu),b(this,"state",{visible:!1,enabled:!0,disposed:!1}),b(this,"data"),b(this,"linesGroup"),b(this,"disposedErrorLog",()=>{console.error(`${mo} is disposed`)}),b(this,"actionWhenEnabled",Pu=>{if(this.state.enabled)return Pu()}),Object.assign(window,{[`__${ad}_DEBUG__`]:this})}async load(Tu,Pu,Bu=!0){const Lu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Ru=await this.formatData(Tu);this.hooks.emit("dataChange",Ru,Lu),this.data=Ru,this.linesGroup&&this.five.scene.remove(this.linesGroup);const Ou=this.getLinesGroup(Ru.routes);!Ou||(this.linesGroup=Ou,this.five.scene.add(Ou),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),Pu&&this.setState(Pu),this.five.needsRender=!0,this.hooks.emit("dataLoaded",Ru),console.log(`${mo} loaded`,Ru))}async formatData(Tu){return typeof Tu=="object"&&Tu!==null&&Tu.version&&Tu.data?Tu.data:Tu}async show(Tu){this.setState({visible:!0},Tu)}async hide(Tu){this.setState({visible:!1},Tu)}enable(Tu){this.setState({enabled:!0},Tu)}disable(Tu){this.setState({enabled:!1},Tu)}dispose(){this.setState({disposed:!0})}setState(Tu,Pu){var Bu;if(this.state.disposed)return this.disposedErrorLog();const Lu={...this.state};this.state={...this.state,...Tu},Tu.disposed!==void 0&&Tu.disposed!==Lu.disposed&&Tu.disposed&&this.handleDispose(),Tu.visible!==void 0&&Tu.visible!==Lu.visible&&this.handleVisible(Tu.visible,Pu==null?void 0:Pu.userAction),Tu.enabled!==void 0&&Tu.enabled!==Lu.enabled&&this.handleEnable(Tu.enabled,Pu==null?void 0:Pu.userAction),St(Lu,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:Lu,userAction:(Bu=Pu==null?void 0:Pu.userAction)!=null?Bu:!0}),this.five.needsRender=!0)}handleEnable(Tu,Pu=!0){this.linesGroup&&(Tu?(this.five.scene.add(this.linesGroup),this.actionWhenEnabled(()=>this.hooks.emit("enable",{userAction:Pu}))):(this.five.scene.remove(this.linesGroup),this.hooks.emit("disable",{userAction:Pu})))}handleVisible(Tu,Pu=!0){this.linesGroup&&(Tu?(this.linesGroup.visible=!0,this.actionWhenEnabled(()=>this.hooks.emit("show",{userAction:Pu}))):(this.linesGroup.visible=!1,this.actionWhenEnabled(()=>this.hooks.emit("hide",{userAction:Pu}))))}handleDispose(){this.linesGroup&&this.five.scene.add(this.linesGroup)}getLinesGroup(Tu){const Pu=Tu.map(this.getLine.bind(this)).filter(os),Bu=new Group$1;if(Bu.name=Fa("route-group"),Pu.length!==0)return Bu.add(...Pu),Bu}getLine(Tu){const Pu=new Group$1,Bu=Tu.panoIndexList.map(Ou=>{var Du;return(Du=this.five.work.observers[Ou])==null?void 0:Du.standingPosition}).filter(os),Lu=A0(Bu,{skipPosition:!0,unitWidth:.6,unitHeight:.4});if(!Lu)return;const Ru=y0({textureUrl:Tu.arrowTextureUrl});return Lu.forEach(Ou=>{const Du=new Mesh(Ou,Ru);Du.name=Fa("route-line-mesh"),Pu.add(Du)}),Pu}}b(ld,"lasestVersion",rd);const w0=Cu=>new ld(Cu);function Wa(Cu){const Tu=Math.abs(Math.cos(Cu.latitude));return new Vector3(-Math.sin(Cu.longitude)*Tu,-Math.sin(Cu.latitude),-Math.cos(Cu.longitude)*Tu)}function E0(Cu,Tu){const Pu=Wa(Cu),Bu=Wa(Tu);return Pu.angleTo(Bu)}const C0=async Cu=>{try{Cu().then(()=>{},()=>{}).catch(()=>{})}catch{}},Li=Math.PI*2;function P0(Cu){return Cu>=0&&Cu<Li?Cu:(Cu%Li+Li)%Li}function x0(Cu){return{longitude:P0(-Math.atan2(Cu.x,-Cu.z)),latitude:-Math.asin(Cu.y/1)}}function I0(Cu,Tu,Pu,Bu){const Lu=-Cu/Pu,Ru=Cu;return Lu*Bu+Ru}function T0(Cu){return new Promise(Tu=>{setTimeout(()=>{Tu()},Cu)})}const cd="v1.0.6",dd="CruisePlugin",bs=`${dd}@${cd}`,Qa=()=>{console.error(`${bs} is disposed`)},S0=()=>{console.warn(`${bs} is disabled`)},k0=()=>{console.error(`${bs} is disabled`)},Qs=new Map;class ud extends En{constructor(Tu){super(Tu),b(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),b(this,"data"),b(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,disposers:[]}),b(this,"GuideLine"),Object.assign(window,{[`__${dd}_DEBUG__`]:this});const Pu=this.setFiveLinearUpdateCamera.bind(this),Bu=this.setFiveOriginUpdateCamera.bind(this);this.hooks.on("play",Pu),this.hooks.on("broke",Bu),this.hooks.on("end",Bu),this.hooks.on("pause",Bu),this.privateState.disposers.push(()=>{this.hooks.off("play",Pu),this.hooks.off("broke",Bu),this.hooks.off("end",Bu),this.hooks.off("pause",Bu)})}async load(Tu,Pu,Bu){var Lu,Ru,Ou,Du,ku;if(this.state.disposed)return Qa();this.privateState.fiveOriginGetProgress||(Ru=(Lu=this.five.controller)==null?void 0:Lu.cameraMotion)!=null&&Ru.getProgress||(await this.waitFiveLoaded(),this.privateState.fiveOriginGetProgress=(Du=(Ou=this.five.controller)==null?void 0:Ou.cameraMotion)==null?void 0:Du.getProgress),this.clear();const Fu=this.data?JSON.parse(JSON.stringify(this.data)):void 0,Nu=await this.formatData(Tu);this.data=Nu,this.hooks.emit("dataChange",Nu,Fu);let Gu=[],zu;const Hu=this.data.keyframes.filter(Wu=>Wu.data.panoIndex!==void 0);Hu.filter((Wu,_h)=>{var Xc;return Wu.data.panoIndex!==((Xc=Hu[_h-1])==null?void 0:Xc.data.panoIndex)}).map(Wu=>Wu.data.panoIndex).forEach(Wu=>{var _h,Xc;const ju=(_h=this.five.work.observers[Wu])==null?void 0:_h.floorIndex;if(ju!==void 0)if(zu===ju){const _c=Gu.length-1;Gu[_c]=[...(Xc=Gu[_c])!=null?Xc:[],Wu]}else{zu=ju;const _c=Gu.length;Gu[_c]=[Wu]}}),this.GuideLine||(this.GuideLine=w0(this.five)),(ku=this.GuideLine)==null||ku.load({routes:Gu.map(Wu=>({panoIndexList:Wu}))}),this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed),Pu&&this.setState(Pu,{userAction:Bu}),console.log(`${bs} loaded`,Nu),this.hooks.emit("dataLoaded",Nu)}play(Tu){this.setState({playing:!0},Tu)}playFrom(Tu){const{index:Pu,id:Bu,userAction:Lu}=Tu;this.state.playing&&this.setState({playing:!1},{userAction:Lu}),this.setState({playing:!0},{userAction:Lu,playFromIndex:Pu,playFromId:Bu})}playFromStart(Tu){return this.playFrom({...Tu,index:0})}pause(Tu){this.setState({playing:!1},Tu)}async show(Tu){this.setState({visible:!0},Tu)}async hide(Tu){this.setState({visible:!1},Tu)}enable(Tu){this.setState({enabled:!0},Tu)}disable(Tu){this.setState({enabled:!1},Tu)}dispose(){this.setState({disposed:!0})}setState(Tu,Pu){var Bu;if(this.state.disposed)return Qa();if(!this.state.enabled&&Tu.enabled!==!0&&Tu.disposed!==!0)return k0();const Lu={...this.state};this.state={...this.state,...Tu},Tu.disposed!==void 0&&Tu.disposed!==Lu.disposed&&Tu.disposed&&this.handleDispose(),Tu.visible!==void 0&&Tu.visible!==Lu.visible&&this.handleVisible(Tu.visible,Pu==null?void 0:Pu.userAction),Tu.enabled!==void 0&&Tu.enabled!==Lu.enabled&&this.handleEnable(Tu.enabled,Pu==null?void 0:Pu.userAction),Tu.playing!==void 0&&Tu.playing!==Lu.playing&&this.changePlayState(Tu.playing,Pu),Tu.speed!==void 0&&Tu.speed!==Lu.speed&&this.changeSpeed(Tu.speed,Pu==null?void 0:Pu.userAction),St(Lu,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:Lu,userAction:(Bu=Pu==null?void 0:Pu.userAction)!=null?Bu:!0})}async formatData(Tu){this.five.work||await this.waitFiveLoaded();const Pu=this.five.work.observers,Bu=(()=>{const Lu=Tu;return typeof Lu=="object"&&Lu!==null&&Lu.version&&Lu.data?Lu.data:Lu})();if(Bu.keyframes)return{keyframesId:ot(),keyframes:Bu.keyframes.map((Lu,Ru)=>{var Ou;const Du=Bu.keyframes[Ru+1],ku=(()=>!Du||Du.start===void 0||Lu.end===void 0?0:Du.start-Lu.end)();return{id:(Ou=Lu.uuid)!=null?Ou:ot(),moveIndex:Ru,stay:ku,index:Ru,...Lu}})};if(Bu.panoIndexList){let Lu=[];const{moveEffect:Ru,moveToFirstPanoEffect:Ou}=Bu;return this.privateState.moveToFirstPanoEffect=Ou,Bu.panoIndexList.filter((Du,ku)=>Du!==Bu.panoIndexList[ku-1]).forEach((Du,ku)=>{const Fu=(()=>{var Nu,Gu,zu,Hu;const Wu=Bu.panoIndexList[ku+1];if(Wu===void 0)return;const _h=(Nu=Pu[Du])==null?void 0:Nu.position,Xc=(Gu=Pu[Wu])==null?void 0:Gu.position;if(!Xc||!_h||((zu=Pu[Du])==null?void 0:zu.floorIndex)!==((Hu=Pu[Wu])==null?void 0:Hu.floorIndex))return;const ju=new Vector3().subVectors(Xc,_h);return x0(ju)})();Bu.moveType===void 0||Bu.moveType==="justMove"?Lu.push({moveIndex:ku,stay:Bu.stay,data:{effect:"Move",panoIndex:Du,moveEffect:Ru,...Fu!=null?Fu:{}}}):Bu.moveType==="moveAndRotate"&&(Lu.push({moveIndex:ku,stay:Bu.stay,data:{effect:"Move",panoIndex:Du,moveEffect:Ru}}),Fu&&Lu.push({moveIndex:ku,stay:Bu.stay,data:{effect:"Rotate",panoIndex:Du,...Fu}}))}),{keyframesId:ot(),keyframes:Lu.map((Du,ku)=>({id:ot(),index:ku,...Du}))}}else throw new Error("format error: data no keyframes or no panoIndexList")}handleEnable(Tu,Pu=!0){var Bu,Lu;Tu?((Bu=this.GuideLine)==null||Bu.enable(),this.hooks.emit("enable",{userAction:Pu})):((Lu=this.GuideLine)==null||Lu.disable(),this.changePlayState(!1,{userAction:Pu}),this.hooks.emit("disable",{userAction:Pu})),this.state.enabled=Tu}handleVisible(Tu,Pu=!0){var Bu,Lu;Tu?((Bu=this.GuideLine)==null||Bu.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:Pu}))):((Lu=this.GuideLine)==null||Lu.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:Pu}))),this.state.visible=Tu}changePlayState(Tu,Pu){this.actionIfStateIsEnabled(()=>{var Bu;return this.hooks.emit("playStateChange",Tu?"playing":"pause",{userAction:(Bu=Pu==null?void 0:Pu.userAction)!=null?Bu:!0})}),Tu?this.handlePlay(Pu):this.handlePause(Pu),this.state.playing=Tu}async handlePlay(Tu){var Pu;const{data:Bu,state:Lu,privateState:Ru,hooks:Ou}=this;if(Ru.playing||!(Bu!=null&&Bu.keyframes)||(Bu==null?void 0:Bu.keyframes.length)===0)return;const Du=ot();Ru.playId=Du,Ru.playing=!0,Ru.broke=!1;const ku=Bu.keyframes,Fu=this.getPauseData();(Tu==null?void 0:Tu.notEmitEvent)!==!0&&Ou.emit("play",{userAction:(Pu=Tu==null?void 0:Tu.userAction)!=null?Pu:!0});let Nu=!1;const Gu=await(async()=>{var zu,Hu;if((Tu==null?void 0:Tu.playFromIndex)!==void 0)return Tu.playFromIndex;if((Tu==null?void 0:Tu.playFromId)!==void 0)return(zu=this.data)==null?void 0:zu.keyframes.findIndex(Wu=>Wu.id===Tu.playFromId);if(Fu!=null&&Fu.keyframeId){const Wu=(Hu=this.data)==null?void 0:Hu.keyframes.find(_h=>_h.id===Fu.keyframeId);if(Fu!=null&&Fu.fiveState&&await this.move(Fu.fiveState,{moveEffect:Ru.moveToFirstPanoEffect}),Wu){if(Wu.data.effect==="Move")return Wu.index;if(Wu.data.effect==="Rotate"){const _h=Fu.duration!==void 0?Fu.duration*(1-Fu.playedProgress):void 0;return await this.playKeyframe(Wu,{duration:_h}),Nu=!0,Wu.index+1}}}})();this.clearPauseData();for(const zu of ku){if(Ru.broke||!Lu.playing||!Ru.playing||Du!==Ru.playId)return;if(!(Gu!==void 0&&zu.index<Gu))try{Ou.emit("playIndexChange",zu.index,zu),await this.playKeyframe(zu,{moveEffect:Nu===!1?Ru.moveToFirstPanoEffect:void 0,duration:800}),zu.stay&&await T0(zu.stay),Nu===!1&&(Nu=!0)}catch{return Promise.resolve("broke")}}Lu.playing&&Du===Ru.playId&&(this.setState({playing:!1},{userAction:!1}),Ou.emit("end"),this.clearPauseData())}handlePause(Tu){var Pu;const{state:Bu,privateState:Lu,hooks:Ru}=this;Bu.playing=!1,Lu.playing!==!1&&(Lu.playing=!1,this.setPauseData(),Lu.broke||this.forceInteruptUpdateCamera(),(Tu==null?void 0:Tu.notEmitEvent)!==!0&&Ru.emit("pause",{userAction:(Pu=Tu==null?void 0:Tu.userAction)!=null?Pu:!0}))}async playKeyframe(Tu,Pu){var Bu;const{privateState:Lu}=this;return((Bu=this.privateState.currentPlayKeyframe)==null?void 0:Bu.keyframe.id)!==Tu.id&&(this.privateState.currentPlayKeyframe={keyframe:Tu}),Lu.currentPlayQueue.push(this.getPlayPromise(Tu,Pu)),this.actionPromiseQueue()}addInterruptListener(Tu){return this.five.once("gesture",Tu),this.five.once("modeChange",Tu),()=>{this.five.off("gesture",Tu),this.five.once("modeChange",Tu)}}async getPlayPromise(Tu,Pu){const Bu=Tu.data;if((Pu==null?void 0:Pu.duration)!=null||Tu.start!==void 0&&Tu.end!==void 0&&Tu.end-Tu.start,!!Bu)return new Promise((Lu,Ru)=>{let Ou=!1;this.addInterruptListener(()=>{if(!Ou)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),Ou=!0,Ru(new Error("play is interupted"))});try{if(Ou)return;const Du=()=>{Lu(),Ou=!0};switch(Bu.effect){case"Move":this.move(Bu,Pu).then(Du);break;case"Rotate":this.rotate(Bu,Pu).then(Du);break;default:this.rotate(Bu,Pu).then(Du)}}catch{}})}async actionPromiseQueue(){const{privateState:Tu}=this;return new Promise((Pu,Bu)=>{if(Tu.currentPlayQueue.length===0){Pu();return}const Lu=Tu.currentPlayQueue.shift();if(!Lu){Pu();return}Lu.then(Pu,Bu)}).then(()=>Tu.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())}async move(Tu,Pu){if(Tu.mode&&Tu.mode!==this.five.currentMode)await this.changeMode(Tu);else if(Tu.panoIndex!==this.five.panoIndex)await this.changePano(Tu,Pu);else return Promise.resolve()}async rotate(Tu,Pu){if(Tu.mode&&Tu.mode!==this.five.currentMode)await this.changeMode({mode:Tu.mode,panoIndex:Tu.panoIndex});else if(Tu.panoIndex&&Tu.panoIndex!==this.five.panoIndex)return await this.changePano(Tu,Pu);await this.updateCamera(Tu,Pu==null?void 0:Pu.duration)}async updateCamera(Tu,Pu=800){const{five:Bu,privateState:Lu,state:Ru}=this;let Ou=Pu;const Du=(()=>{var Fu,Nu;const Gu=(Fu=Ru.config)==null?void 0:Fu.speedConfig,zu=(Nu=Tu.rotateSpeed)!=null?Nu:Gu==null?void 0:Gu.rotateSpeed;if((Gu==null?void 0:Gu.rotateSpeedUnit)===void 0)return zu;if(zu!==void 0)return Gu.rotateSpeedUnit==="rad/ms"?zu:zu/1e3})();if(Du){const Fu=this.five.getCurrentState();Ou=E0(Fu,Tu)/Du}Lu.currentPlayKeyframe&&(Lu.currentPlayKeyframe.originDuration=Ou);const ku=this.getSpeededDuration(Ou);return new Promise(Fu=>{C0(()=>Bu.updateCamera(Tu,ku)),setTimeout(()=>Fu(),ku)})}async changePano(Tu,Pu){var Bu;const{five:Lu,privateState:Ru,state:Ou}=this;if(typeof Tu.panoIndex!="number"||Tu.panoIndex===Lu.panoIndex)return;let Du=(Bu=Pu==null?void 0:Pu.duration)!=null?Bu:800;const ku=(()=>{var Nu,Gu;const zu=(Nu=Ou.config)==null?void 0:Nu.speedConfig,Hu=(Gu=Tu.moveSpeed)!=null?Gu:zu==null?void 0:zu.moveSpeed;if((zu==null?void 0:zu.moveSpeedUnit)===void 0)return Hu;if(Hu!==void 0)return zu.moveSpeedUnit==="m/ms"?Hu:Hu/1e3})();if(ku&&typeof Lu.panoIndex=="number"&&typeof Tu.panoIndex=="number"){const Nu=Lu.work.observers[Lu.panoIndex].position,Gu=Lu.work.observers[Tu.panoIndex].position;Du=Nu.distanceTo(Gu)/ku}Ru.currentPlayKeyframe&&(Ru.currentPlayKeyframe.originDuration=Du);const Fu=this.getSpeededDuration(Du);return new Promise(Nu=>{var Gu,zu,Hu;Lu.moveToPano(Tu.panoIndex,{latitude:Tu.latitude,longitude:Tu.longitude,fov:Tu.fov,duration:Fu,effect:(Hu=(zu=Pu==null?void 0:Pu.moveEffect)!=null?zu:(Gu=this.state.config)==null?void 0:Gu.moveEffect)!=null?Hu:Tu.moveEffect,moveCancelCallback:()=>Nu(),moveEndCallback:()=>Nu()})})}changeSpeed(Tu,Pu=!0){const{state:Bu,privateState:Lu,hooks:Ru}=this,{currentPlayKeyframe:Ou}=Lu;if(Ru.emit("speedChange",Tu,{userAction:Pu}),Bu.playing&&Ou)try{const Du=Ou.originDuration!==void 0?Ou.originDuration*(1-this.getProgress()):void 0,ku=this.playKeyframe(Ou.keyframe,{duration:Du});Lu.currentPlayQueue.push(ku)}catch{}}getSpeededDuration(Tu){return Tu/this.state.speed}getProgress(){return this.five.controller.cameraMotion.progress}async changeMode(Tu,Pu){Tu.mode&&Tu.mode!==this.five.currentMode&&await this.five.changeMode(Tu.mode,Tu,Pu)}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var Tu,Pu;if((Tu=this.data)!=null&&Tu.keyframesId)return Qs.get((Pu=this.data)==null?void 0:Pu.keyframesId)}setPauseData(){var Tu,Pu,Bu,Lu;if((Tu=this.data)!=null&&Tu.keyframesId)return Qs.set((Pu=this.data)==null?void 0:Pu.keyframesId,{keyframeId:(Bu=this.privateState.currentPlayKeyframe)==null?void 0:Bu.keyframe.id,fiveState:this.five.getCurrentState(),duration:(Lu=this.privateState.currentPlayKeyframe)==null?void 0:Lu.originDuration,playedProgress:this.getProgress()})}clearPauseData(){var Tu,Pu;if((Tu=this.data)!=null&&Tu.keyframesId)return Qs.delete((Pu=this.data)==null?void 0:Pu.keyframesId)}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}handleDispose(){var Tu,Pu;this.setState({playing:!1}),this.clearPauseData(),this.clear(),(Tu=this.GuideLine)==null||Tu.dispose(),this.GuideLine=void 0,(Pu=this.privateState.disposers)==null||Pu.forEach(Bu=>Bu==null?void 0:Bu())}actionIfStateIsEnabled(Tu,Pu){if(this.state.enabled)return Tu();Pu!=null&&Pu.warnLog&&S0()}async waitFiveLoaded(){return new Promise(Tu=>{if(this.five.work){Tu();return}this.five.once("loaded",()=>{Tu()})})}setFiveLinearUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=Tu=>{const Pu=this.five.controller.cameraMotion,Bu=Tu-Pu.startTime;return Bu<0?0:Bu>=Pu.duration?1:1-I0(1,Pu.startVelocity,Pu.duration,Bu)})}setFiveOriginUpdateCamera(){!this.privateState.fiveOriginGetProgress||(this.five.controller.cameraMotion.getProgress=this.privateState.fiveOriginGetProgress)}}b(ud,"PluginVersion",cd);var kt={exports:{}};function rs(Cu){return Cu===null?"null":typeof Cu>"u"?"undefined":typeof Cu=="object"?Array.isArray(Cu)?"array":"object":typeof Cu}function fd(Cu){return rs(Cu)==="object"?vo(Cu):rs(Cu)==="array"?go(Cu):Cu}function go(Cu){return Cu.map(fd)}function vo(Cu){const Tu={};for(const Pu in Cu)!Cu.hasOwnProperty(Pu)||(Tu[Pu]=fd(Cu[Pu]));return Tu}function As(Cu,Tu=[],Pu={}){const Bu={arrayBehaviour:Pu.arrayBehaviour||"replace"},Lu=Tu.map(Ou=>Ou||{}),Ru=Cu||{};for(let Ou=0;Ou<Lu.length;Ou++){const Du=Lu[Ou],ku=Object.keys(Du);for(let Fu=0;Fu<ku.length;Fu++){const Nu=ku[Fu],Gu=Du[Nu],zu=rs(Gu),Hu=rs(Ru[Nu]);if(zu==="object")if(Hu!=="undefined"){const Wu=Hu==="object"?Ru[Nu]:{};Ru[Nu]=As({},[Wu,vo(Gu)],Bu)}else Ru[Nu]=vo(Gu);else if(zu==="array")if(Hu==="array"){const Wu=go(Gu);Ru[Nu]=Bu.arrayBehaviour==="merge"?Ru[Nu].concat(Wu):Wu}else Ru[Nu]=go(Gu);else Ru[Nu]=Gu}}return Ru}kt.exports=function(Cu,...Tu){return As(Cu,Tu)};kt.exports.noMutate=function(...Cu){return As({},Cu)};kt.exports.withOptions=function(Cu,Tu,Pu){return As(Cu,Tu,Pu)};function D0(Cu,Tu){Tu.forEach(Pu=>{const Bu=new SphereGeometry(.02,16,16),Lu=[],Ru=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(Pu.position.length===4)Pu.position.forEach((Ou,Du)=>{const ku=Ru[Du],Fu=new Mesh(Bu,ku);Fu.position.copy(Qt(Ou)),Lu.push(Fu)});else{const Ou=Ru[0],Du=new Mesh(Bu,Ou);Du.position.copy(Qt(Pu.position)),Lu.push(Du)}Lu.forEach(Ou=>{Ou.material.depthTest=!1,Cu.scene.add(Ou)})})}const Oe=Cu=>Cu;function hd(Cu){if(Cu.length<3)return;const Tu=Cu.map(ei),Pu=Tu[1].clone().sub(Tu[0]),Bu=Tu[2].clone().sub(Tu[1]);return Pu.cross(Bu)}function Mi(Cu){if(Array.isArray(Cu)&&Cu.length===4){const Tu=Cu.map(ei);return pc(Tu[0],Tu[2])}else return ei(Cu)}function zi(Cu,Tu){if(Cu===void 0)return;const{min:Pu,max:Bu}=Tu!=null?Tu:{};if(!(Pu===void 0&&Bu===void 0))return!(typeof Bu=="number"&&Bu<Cu||typeof Pu=="number"&&Pu>Cu)}function L0(Cu,Tu){Cu.model.loaded?Tu():Cu.once("modelLoaded",()=>Tu())}function M0(Cu,Tu,Pu){const Bu=new Plane().setFromNormalAndCoplanarPoint(Pu,Tu),Lu=Tu.clone().sub(Cu).cross(new Vector3(0,1,0)).setLength(.01),Ru=new Vector3(0,.01,0);return[Tu.clone().sub(Lu).sub(Ru),Tu.clone().add(Lu).sub(Ru),Tu.clone().add(Lu).add(Ru),Tu.clone().sub(Lu).add(Ru)].map(Ou=>Bu.projectPoint(Ou,new Vector3))}const _a=(Cu,Tu=1e3/60)=>{let Pu=null;const Bu=Cu;return(...Lu)=>{Pu&&clearTimeout(Pu),Pu=setTimeout(()=>{Bu==null||Bu(...Lu),Pu&&clearTimeout(Pu),Pu=null},Tu)}};function z0(Cu,Tu=200){let Pu;return function(...Bu){Pu||(Cu.apply(this,Bu),Pu=setTimeout(function(){Pu=null},Tu))}}function O0(Cu,Tu){const[Pu,Bu]=Tu;if(Pu>=Bu||Bu<=1||Pu<=1)return-1;const Lu={},Ru=Ou=>(Lu[Ou]||(Lu[Ou]=Cu(Ou)),Lu[Ou]);for(let Ou=Pu;Ou<Bu;Ou++){const Du=Ru(Ou),ku=Ru(Ou-1);if(Du<ku)return Ou}return-1}function Xa(Cu,Tu){if(!Tu||typeof ResizeObserver>"u"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",Cu),unobserve:()=>window.removeEventListener("resize",Cu)};{const Pu=new ResizeObserver(Cu);return{observe:()=>Pu.observe(Tu),unobserve:()=>Pu.unobserve(Tu)}}}var Tt=(Cu=>(Cu.Two="2D",Cu.Three="3D",Cu))(Tt||{}),mt=(Cu=>(Cu.PointTag="PointTag",Cu.PlaneTag="PlaneTag",Cu))(mt||{}),At=(Cu=>(Cu.Audio="Audio",Cu.Text="Text",Cu.ImageText="ImageText",Cu.Link="Link",Cu.Marketing="Marketing",Cu.MediaPlane="MediaPlane",Cu.Custom="Custom",Cu))(At||{}),bo=(Cu=>(Cu.VrLink="vr",Cu.NormalLink="normal",Cu))(bo||{});function j0(Cu){ge(Cu,"svelte-1omzoh4",".straight-line.svelte-1omzoh4{display:block;width:100%;height:100%;overflow:visible}")}function Ya(Cu){let Tu,Pu,Bu,Lu;return{c(){Tu=Ie("path"),C(Tu,"fill","none"),C(Tu,"stroke","url(#"+Cu[4]+")"),C(Tu,"stroke-width","1"),C(Tu,"d","M0 0.5 L 148 0.5")},m(Ru,Ou){H(Ru,Tu,Ou),Lu=!0},p(Ru,Ou){Cu=Ru},i(Ru){Lu||(Ru&&Re(()=>{Bu&&Bu.end(1),Pu=wn(Tu,ts,{duration:Cu[1],delay:Cu[0]}),Pu.start()}),Lu=!0)},o(Ru){Pu&&Pu.invalidate(),Ru&&(Bu=Bn(Tu,ts,{duration:Cu[1],delay:Cu[2]})),Lu=!1},d(Ru){Ru&&B(Tu),Ru&&Bu&&Bu.end()}}}function B0(Cu){let Tu,Pu,Bu,Lu,Ru,Ou=Cu[3]&&Ya(Cu);return{c(){Tu=Ie("svg"),Pu=Ie("defs"),Bu=Ie("linearGradient"),Lu=Ie("stop"),Ru=Ie("stop"),Ou&&Ou.c(),C(Lu,"offset","25%"),C(Lu,"stop-color","white"),C(Lu,"stop-opacity","1"),C(Ru,"offset","100%"),C(Ru,"stop-color","white"),C(Ru,"stop-opacity","0.5"),C(Bu,"id",Cu[4]),C(Bu,"gradientUnits","userSpaceOnUse"),C(Tu,"class","straight-line svelte-1omzoh4"),C(Tu,"viewBox","0 0 148 1"),C(Tu,"preserveAspectRatio","none")},m(Du,ku){H(Du,Tu,ku),W(Tu,Pu),W(Pu,Bu),W(Bu,Lu),W(Bu,Ru),Ou&&Ou.m(Tu,null)},p(Du,[ku]){Du[3]?Ou?(Ou.p(Du,ku),ku&8&&M(Ou,1)):(Ou=Ya(Du),Ou.c(),M(Ou,1),Ou.m(Tu,null)):Ou&&(ve(),R(Ou,1,1,()=>{Ou=null}),be())},i(Du){M(Ou)},o(Du){R(Ou)},d(Du){Du&&B(Tu),Ou&&Ou.d()}}}function R0(Cu,Tu,Pu){let{inDelay:Bu=0}=Tu,{duration:Lu=0}=Tu,{outDelay:Ru=0}=Tu,{unfolded:Ou}=Tu;const Du=ot();return Cu.$$set=ku=>{"inDelay"in ku&&Pu(0,Bu=ku.inDelay),"duration"in ku&&Pu(1,Lu=ku.duration),"outDelay"in ku&&Pu(2,Ru=ku.outDelay),"unfolded"in ku&&Pu(3,Ou=ku.unfolded)},[Bu,Lu,Ru,Ou,Du]}class pd extends fe{constructor(Tu){super(),ue(this,Tu,R0,B0,de,{inDelay:0,duration:1,outDelay:2,unfolded:3},j0)}}function H0(Cu){ge(Cu,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function Va(Cu){let Tu,Pu,Bu,Lu,Ru;return{c(){Tu=F("div"),C(Tu,"class","shadow svelte-faoauy"),C(Tu,"style",Pu=`
      left:${pt(Cu[5])};
      bottom:${pt(Cu[6])};
      box-shadow: 0 0 ${pt(Cu[10])} ${pt(Cu[11])} rgba(0, 0, 0, ${Cu[12]});
      ${Cu[8]?"transform: translateX(-50%); left: 50%":""}
      ${Cu[9]?"transform: translateX(-50%); top: 50%":""}
      ${Cu[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),Q(Tu,"width",pt(Cu[3])),Q(Tu,"height",pt(Cu[4])),Q(Tu,"z-index",Cu[13])},m(Ou,Du){H(Ou,Tu,Du),Ru=!0},p(Ou,Du){Cu=Ou,(!Ru||Du&8160&&Pu!==(Pu=`
      left:${pt(Cu[5])};
      bottom:${pt(Cu[6])};
      box-shadow: 0 0 ${pt(Cu[10])} ${pt(Cu[11])} rgba(0, 0, 0, ${Cu[12]});
      ${Cu[8]?"transform: translateX(-50%); left: 50%":""}
      ${Cu[9]?"transform: translateX(-50%); top: 50%":""}
      ${Cu[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&C(Tu,"style",Pu),Du&8&&Q(Tu,"width",pt(Cu[3])),Du&16&&Q(Tu,"height",pt(Cu[4])),Du&8192&&Q(Tu,"z-index",Cu[13])},i(Ou){Ru||(Ou&&Re(()=>{Lu&&Lu.end(1),Bu=wn(Tu,vn,{duration:Cu[0]}),Bu.start()}),Ru=!0)},o(Ou){Bu&&Bu.invalidate(),Ou&&(Lu=Bn(Tu,vn,{duration:Cu[1]})),Ru=!1},d(Ou){Ou&&B(Tu),Ou&&Lu&&Lu.end()}}}function N0(Cu){let Tu,Pu=Cu[2]&&Va(Cu);return{c(){Pu&&Pu.c(),Tu=Pe()},m(Bu,Lu){Pu&&Pu.m(Bu,Lu),H(Bu,Tu,Lu)},p(Bu,[Lu]){Bu[2]?Pu?(Pu.p(Bu,Lu),Lu&4&&M(Pu,1)):(Pu=Va(Bu),Pu.c(),M(Pu,1),Pu.m(Tu.parentNode,Tu)):Pu&&(ve(),R(Pu,1,1,()=>{Pu=null}),be())},i(Bu){M(Pu)},o(Bu){R(Pu)},d(Bu){Pu&&Pu.d(Bu),Bu&&B(Tu)}}}function pt(Cu){return typeof Cu=="number"?Cu/16+"rem":Cu}function G0(Cu,Tu,Pu){let{inDelay:Bu=1e3}=Tu,{outDelay:Lu=1e3}=Tu,{visible:Ru=!0}=Tu,{width:Ou=0}=Tu,{height:Du=0}=Tu,{left:ku=0}=Tu,{bottom:Fu=0}=Tu,{center:Nu=!1}=Tu,{horizontalCenter:Gu=!1}=Tu,{verticalCenter:zu=!1}=Tu,{blurRadius:Hu}=Tu,{spreadRadius:Wu}=Tu,{opacity:_h=.15}=Tu,{zIndex:Xc=void 0}=Tu;return Cu.$$set=ju=>{"inDelay"in ju&&Pu(0,Bu=ju.inDelay),"outDelay"in ju&&Pu(1,Lu=ju.outDelay),"visible"in ju&&Pu(2,Ru=ju.visible),"width"in ju&&Pu(3,Ou=ju.width),"height"in ju&&Pu(4,Du=ju.height),"left"in ju&&Pu(5,ku=ju.left),"bottom"in ju&&Pu(6,Fu=ju.bottom),"center"in ju&&Pu(7,Nu=ju.center),"horizontalCenter"in ju&&Pu(8,Gu=ju.horizontalCenter),"verticalCenter"in ju&&Pu(9,zu=ju.verticalCenter),"blurRadius"in ju&&Pu(10,Hu=ju.blurRadius),"spreadRadius"in ju&&Pu(11,Wu=ju.spreadRadius),"opacity"in ju&&Pu(12,_h=ju.opacity),"zIndex"in ju&&Pu(13,Xc=ju.zIndex)},[Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc]}class Ct extends fe{constructor(Tu){super(),ue(this,Tu,G0,N0,de,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,blurRadius:10,spreadRadius:11,opacity:12,zIndex:13},H0)}}var md={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Vo={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},F0=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],as={CSS:{},springs:{}};function Dt(Cu,Tu,Pu){return Math.min(Math.max(Cu,Tu),Pu)}function Kn(Cu,Tu){return Cu.indexOf(Tu)>-1}function _s(Cu,Tu){return Cu.apply(null,Tu)}var he={arr:function(Cu){return Array.isArray(Cu)},obj:function(Cu){return Kn(Object.prototype.toString.call(Cu),"Object")},pth:function(Cu){return he.obj(Cu)&&Cu.hasOwnProperty("totalLength")},svg:function(Cu){return Cu instanceof SVGElement},inp:function(Cu){return Cu instanceof HTMLInputElement},dom:function(Cu){return Cu.nodeType||he.svg(Cu)},str:function(Cu){return typeof Cu=="string"},fnc:function(Cu){return typeof Cu=="function"},und:function(Cu){return typeof Cu>"u"},nil:function(Cu){return he.und(Cu)||Cu===null},hex:function(Cu){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(Cu)},rgb:function(Cu){return/^rgb/.test(Cu)},hsl:function(Cu){return/^hsl/.test(Cu)},col:function(Cu){return he.hex(Cu)||he.rgb(Cu)||he.hsl(Cu)},key:function(Cu){return!md.hasOwnProperty(Cu)&&!Vo.hasOwnProperty(Cu)&&Cu!=="targets"&&Cu!=="keyframes"}};function gd(Cu){var Tu=/\(([^)]+)\)/.exec(Cu);return Tu?Tu[1].split(",").map(function(Pu){return parseFloat(Pu)}):[]}function vd(Cu,Tu){var Pu=gd(Cu),Bu=Dt(he.und(Pu[0])?1:Pu[0],.1,100),Lu=Dt(he.und(Pu[1])?100:Pu[1],.1,100),Ru=Dt(he.und(Pu[2])?10:Pu[2],.1,100),Ou=Dt(he.und(Pu[3])?0:Pu[3],.1,100),Du=Math.sqrt(Lu/Bu),ku=Ru/(2*Math.sqrt(Lu*Bu)),Fu=ku<1?Du*Math.sqrt(1-ku*ku):0,Nu=1,Gu=ku<1?(ku*Du+-Ou)/Fu:-Ou+Du;function zu(Wu){var _h=Tu?Tu*Wu/1e3:Wu;return ku<1?_h=Math.exp(-_h*ku*Du)*(Nu*Math.cos(Fu*_h)+Gu*Math.sin(Fu*_h)):_h=(Nu+Gu*_h)*Math.exp(-_h*Du),Wu===0||Wu===1?Wu:1-_h}function Hu(){var Wu=as.springs[Cu];if(Wu)return Wu;for(var _h=1/6,Xc=0,ju=0;;)if(Xc+=_h,zu(Xc)===1){if(ju++,ju>=16)break}else ju=0;var _c=Xc*_h*1e3;return as.springs[Cu]=_c,_c}return Tu?zu:Hu}function W0(Cu){return Cu===void 0&&(Cu=10),function(Tu){return Math.ceil(Dt(Tu,1e-6,1)*Cu)*(1/Cu)}}var Q0=function(){var Cu=11,Tu=1/(Cu-1);function Pu(Nu,Gu){return 1-3*Gu+3*Nu}function Bu(Nu,Gu){return 3*Gu-6*Nu}function Lu(Nu){return 3*Nu}function Ru(Nu,Gu,zu){return((Pu(Gu,zu)*Nu+Bu(Gu,zu))*Nu+Lu(Gu))*Nu}function Ou(Nu,Gu,zu){return 3*Pu(Gu,zu)*Nu*Nu+2*Bu(Gu,zu)*Nu+Lu(Gu)}function Du(Nu,Gu,zu,Hu,Wu){var _h,Xc,ju=0;do Xc=Gu+(zu-Gu)/2,_h=Ru(Xc,Hu,Wu)-Nu,_h>0?zu=Xc:Gu=Xc;while(Math.abs(_h)>1e-7&&++ju<10);return Xc}function ku(Nu,Gu,zu,Hu){for(var Wu=0;Wu<4;++Wu){var _h=Ou(Gu,zu,Hu);if(_h===0)return Gu;var Xc=Ru(Gu,zu,Hu)-Nu;Gu-=Xc/_h}return Gu}function Fu(Nu,Gu,zu,Hu){if(!(0<=Nu&&Nu<=1&&0<=zu&&zu<=1))return;var Wu=new Float32Array(Cu);if(Nu!==Gu||zu!==Hu)for(var _h=0;_h<Cu;++_h)Wu[_h]=Ru(_h*Tu,Nu,zu);function Xc(ju){for(var _c=0,_f=1,ep=Cu-1;_f!==ep&&Wu[_f]<=ju;++_f)_c+=Tu;--_f;var tp=(ju-Wu[_f])/(Wu[_f+1]-Wu[_f]),op=_c+tp*Tu,lp=Ou(op,Nu,zu);return lp>=.001?ku(ju,op,Nu,zu):lp===0?op:Du(ju,_c,_c+Tu,Nu,zu)}return function(ju){return Nu===Gu&&zu===Hu||ju===0||ju===1?ju:Ru(Xc(ju),Gu,Hu)}}return Fu}(),bd=function(){var Cu={linear:function(){return function(Bu){return Bu}}},Tu={Sine:function(){return function(Bu){return 1-Math.cos(Bu*Math.PI/2)}},Circ:function(){return function(Bu){return 1-Math.sqrt(1-Bu*Bu)}},Back:function(){return function(Bu){return Bu*Bu*(3*Bu-2)}},Bounce:function(){return function(Bu){for(var Lu,Ru=4;Bu<((Lu=Math.pow(2,--Ru))-1)/11;);return 1/Math.pow(4,3-Ru)-7.5625*Math.pow((Lu*3-2)/22-Bu,2)}},Elastic:function(Bu,Lu){Bu===void 0&&(Bu=1),Lu===void 0&&(Lu=.5);var Ru=Dt(Bu,1,10),Ou=Dt(Lu,.1,2);return function(Du){return Du===0||Du===1?Du:-Ru*Math.pow(2,10*(Du-1))*Math.sin((Du-1-Ou/(Math.PI*2)*Math.asin(1/Ru))*(Math.PI*2)/Ou)}}},Pu=["Quad","Cubic","Quart","Quint","Expo"];return Pu.forEach(function(Bu,Lu){Tu[Bu]=function(){return function(Ru){return Math.pow(Ru,Lu+2)}}}),Object.keys(Tu).forEach(function(Bu){var Lu=Tu[Bu];Cu["easeIn"+Bu]=Lu,Cu["easeOut"+Bu]=function(Ru,Ou){return function(Du){return 1-Lu(Ru,Ou)(1-Du)}},Cu["easeInOut"+Bu]=function(Ru,Ou){return function(Du){return Du<.5?Lu(Ru,Ou)(Du*2)/2:1-Lu(Ru,Ou)(Du*-2+2)/2}},Cu["easeOutIn"+Bu]=function(Ru,Ou){return function(Du){return Du<.5?(1-Lu(Ru,Ou)(1-Du*2))/2:(Lu(Ru,Ou)(Du*2-1)+1)/2}}}),Cu}();function Uo(Cu,Tu){if(he.fnc(Cu))return Cu;var Pu=Cu.split("(")[0],Bu=bd[Pu],Lu=gd(Cu);switch(Pu){case"spring":return vd(Cu,Tu);case"cubicBezier":return _s(Q0,Lu);case"steps":return _s(W0,Lu);default:return _s(Bu,Lu)}}function Ad(Cu){try{var Tu=document.querySelectorAll(Cu);return Tu}catch{return}}function ys(Cu,Tu){for(var Pu=Cu.length,Bu=arguments.length>=2?arguments[1]:void 0,Lu=[],Ru=0;Ru<Pu;Ru++)if(Ru in Cu){var Ou=Cu[Ru];Tu.call(Bu,Ou,Ru,Cu)&&Lu.push(Ou)}return Lu}function ws(Cu){return Cu.reduce(function(Tu,Pu){return Tu.concat(he.arr(Pu)?ws(Pu):Pu)},[])}function Ua(Cu){return he.arr(Cu)?Cu:(he.str(Cu)&&(Cu=Ad(Cu)||Cu),Cu instanceof NodeList||Cu instanceof HTMLCollection?[].slice.call(Cu):[Cu])}function Zo(Cu,Tu){return Cu.some(function(Pu){return Pu===Tu})}function Jo(Cu){var Tu={};for(var Pu in Cu)Tu[Pu]=Cu[Pu];return Tu}function Ao(Cu,Tu){var Pu=Jo(Cu);for(var Bu in Cu)Pu[Bu]=Tu.hasOwnProperty(Bu)?Tu[Bu]:Cu[Bu];return Pu}function Es(Cu,Tu){var Pu=Jo(Cu);for(var Bu in Tu)Pu[Bu]=he.und(Cu[Bu])?Tu[Bu]:Cu[Bu];return Pu}function _0(Cu){var Tu=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(Cu);return Tu?"rgba("+Tu[1]+",1)":Cu}function X0(Cu){var Tu=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Pu=Cu.replace(Tu,function(Du,ku,Fu,Nu){return ku+ku+Fu+Fu+Nu+Nu}),Bu=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Pu),Lu=parseInt(Bu[1],16),Ru=parseInt(Bu[2],16),Ou=parseInt(Bu[3],16);return"rgba("+Lu+","+Ru+","+Ou+",1)"}function Y0(Cu){var Tu=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(Cu)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(Cu),Pu=parseInt(Tu[1],10)/360,Bu=parseInt(Tu[2],10)/100,Lu=parseInt(Tu[3],10)/100,Ru=Tu[4]||1;function Ou(zu,Hu,Wu){return Wu<0&&(Wu+=1),Wu>1&&(Wu-=1),Wu<1/6?zu+(Hu-zu)*6*Wu:Wu<1/2?Hu:Wu<2/3?zu+(Hu-zu)*(2/3-Wu)*6:zu}var Du,ku,Fu;if(Bu==0)Du=ku=Fu=Lu;else{var Nu=Lu<.5?Lu*(1+Bu):Lu+Bu-Lu*Bu,Gu=2*Lu-Nu;Du=Ou(Gu,Nu,Pu+1/3),ku=Ou(Gu,Nu,Pu),Fu=Ou(Gu,Nu,Pu-1/3)}return"rgba("+Du*255+","+ku*255+","+Fu*255+","+Ru+")"}function V0(Cu){if(he.rgb(Cu))return _0(Cu);if(he.hex(Cu))return X0(Cu);if(he.hsl(Cu))return Y0(Cu)}function _t(Cu){var Tu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(Cu);if(Tu)return Tu[1]}function U0(Cu){if(Kn(Cu,"translate")||Cu==="perspective")return"px";if(Kn(Cu,"rotate")||Kn(Cu,"skew"))return"deg"}function yo(Cu,Tu){return he.fnc(Cu)?Cu(Tu.target,Tu.id,Tu.total):Cu}function Lt(Cu,Tu){return Cu.getAttribute(Tu)}function qo(Cu,Tu,Pu){var Bu=_t(Tu);if(Zo([Pu,"deg","rad","turn"],Bu))return Tu;var Lu=as.CSS[Tu+Pu];if(!he.und(Lu))return Lu;var Ru=100,Ou=document.createElement(Cu.tagName),Du=Cu.parentNode&&Cu.parentNode!==document?Cu.parentNode:document.body;Du.appendChild(Ou),Ou.style.position="absolute",Ou.style.width=Ru+Pu;var ku=Ru/Ou.offsetWidth;Du.removeChild(Ou);var Fu=ku*parseFloat(Tu);return as.CSS[Tu+Pu]=Fu,Fu}function yd(Cu,Tu,Pu){if(Tu in Cu.style){var Bu=Tu.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Lu=Cu.style[Tu]||getComputedStyle(Cu).getPropertyValue(Bu)||"0";return Pu?qo(Cu,Lu,Pu):Lu}}function Ko(Cu,Tu){if(he.dom(Cu)&&!he.inp(Cu)&&(!he.nil(Lt(Cu,Tu))||he.svg(Cu)&&Cu[Tu]))return"attribute";if(he.dom(Cu)&&Zo(F0,Tu))return"transform";if(he.dom(Cu)&&Tu!=="transform"&&yd(Cu,Tu))return"css";if(Cu[Tu]!=null)return"object"}function wd(Cu){if(he.dom(Cu)){for(var Tu=Cu.style.transform||"",Pu=/(\w+)\(([^)]*)\)/g,Bu=new Map,Lu;Lu=Pu.exec(Tu);)Bu.set(Lu[1],Lu[2]);return Bu}}function Z0(Cu,Tu,Pu,Bu){var Lu=Kn(Tu,"scale")?1:0+U0(Tu),Ru=wd(Cu).get(Tu)||Lu;return Pu&&(Pu.transforms.list.set(Tu,Ru),Pu.transforms.last=Tu),Bu?qo(Cu,Ru,Bu):Ru}function $o(Cu,Tu,Pu,Bu){switch(Ko(Cu,Tu)){case"transform":return Z0(Cu,Tu,Bu,Pu);case"css":return yd(Cu,Tu,Pu);case"attribute":return Lt(Cu,Tu);default:return Cu[Tu]||0}}function er(Cu,Tu){var Pu=/^(\*=|\+=|-=)/.exec(Cu);if(!Pu)return Cu;var Bu=_t(Cu)||0,Lu=parseFloat(Tu),Ru=parseFloat(Cu.replace(Pu[0],""));switch(Pu[0][0]){case"+":return Lu+Ru+Bu;case"-":return Lu-Ru+Bu;case"*":return Lu*Ru+Bu}}function Ed(Cu,Tu){if(he.col(Cu))return V0(Cu);if(/\s/g.test(Cu))return Cu;var Pu=_t(Cu),Bu=Pu?Cu.substr(0,Cu.length-Pu.length):Cu;return Tu?Bu+Tu:Bu}function tr(Cu,Tu){return Math.sqrt(Math.pow(Tu.x-Cu.x,2)+Math.pow(Tu.y-Cu.y,2))}function J0(Cu){return Math.PI*2*Lt(Cu,"r")}function q0(Cu){return Lt(Cu,"width")*2+Lt(Cu,"height")*2}function K0(Cu){return tr({x:Lt(Cu,"x1"),y:Lt(Cu,"y1")},{x:Lt(Cu,"x2"),y:Lt(Cu,"y2")})}function Cd(Cu){for(var Tu=Cu.points,Pu=0,Bu,Lu=0;Lu<Tu.numberOfItems;Lu++){var Ru=Tu.getItem(Lu);Lu>0&&(Pu+=tr(Bu,Ru)),Bu=Ru}return Pu}function $0(Cu){var Tu=Cu.points;return Cd(Cu)+tr(Tu.getItem(Tu.numberOfItems-1),Tu.getItem(0))}function Pd(Cu){if(Cu.getTotalLength)return Cu.getTotalLength();switch(Cu.tagName.toLowerCase()){case"circle":return J0(Cu);case"rect":return q0(Cu);case"line":return K0(Cu);case"polyline":return Cd(Cu);case"polygon":return $0(Cu)}}function ev(Cu){var Tu=Pd(Cu);return Cu.setAttribute("stroke-dasharray",Tu),Tu}function tv(Cu){for(var Tu=Cu.parentNode;he.svg(Tu)&&he.svg(Tu.parentNode);)Tu=Tu.parentNode;return Tu}function xd(Cu,Tu){var Pu=Tu||{},Bu=Pu.el||tv(Cu),Lu=Bu.getBoundingClientRect(),Ru=Lt(Bu,"viewBox"),Ou=Lu.width,Du=Lu.height,ku=Pu.viewBox||(Ru?Ru.split(" "):[0,0,Ou,Du]);return{el:Bu,viewBox:ku,x:ku[0]/1,y:ku[1]/1,w:Ou,h:Du,vW:ku[2],vH:ku[3]}}function nv(Cu,Tu){var Pu=he.str(Cu)?Ad(Cu)[0]:Cu,Bu=Tu||100;return function(Lu){return{property:Lu,el:Pu,svg:xd(Pu),totalLength:Pd(Pu)*(Bu/100)}}}function iv(Cu,Tu,Pu){function Bu(Nu){Nu===void 0&&(Nu=0);var Gu=Tu+Nu>=1?Tu+Nu:0;return Cu.el.getPointAtLength(Gu)}var Lu=xd(Cu.el,Cu.svg),Ru=Bu(),Ou=Bu(-1),Du=Bu(1),ku=Pu?1:Lu.w/Lu.vW,Fu=Pu?1:Lu.h/Lu.vH;switch(Cu.property){case"x":return(Ru.x-Lu.x)*ku;case"y":return(Ru.y-Lu.y)*Fu;case"angle":return Math.atan2(Du.y-Ou.y,Du.x-Ou.x)*180/Math.PI}}function Za(Cu,Tu){var Pu=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Bu=Ed(he.pth(Cu)?Cu.totalLength:Cu,Tu)+"";return{original:Bu,numbers:Bu.match(Pu)?Bu.match(Pu).map(Number):[0],strings:he.str(Cu)||Tu?Bu.split(Pu):[]}}function nr(Cu){var Tu=Cu?ws(he.arr(Cu)?Cu.map(Ua):Ua(Cu)):[];return ys(Tu,function(Pu,Bu,Lu){return Lu.indexOf(Pu)===Bu})}function Id(Cu){var Tu=nr(Cu);return Tu.map(function(Pu,Bu){return{target:Pu,id:Bu,total:Tu.length,transforms:{list:wd(Pu)}}})}function sv(Cu,Tu){var Pu=Jo(Tu);if(/^spring/.test(Pu.easing)&&(Pu.duration=vd(Pu.easing)),he.arr(Cu)){var Bu=Cu.length,Lu=Bu===2&&!he.obj(Cu[0]);Lu?Cu={value:Cu}:he.fnc(Tu.duration)||(Pu.duration=Tu.duration/Bu)}var Ru=he.arr(Cu)?Cu:[Cu];return Ru.map(function(Ou,Du){var ku=he.obj(Ou)&&!he.pth(Ou)?Ou:{value:Ou};return he.und(ku.delay)&&(ku.delay=Du?0:Tu.delay),he.und(ku.endDelay)&&(ku.endDelay=Du===Ru.length-1?Tu.endDelay:0),ku}).map(function(Ou){return Es(Ou,Pu)})}function ov(Cu){for(var Tu=ys(ws(Cu.map(function(Ru){return Object.keys(Ru)})),function(Ru){return he.key(Ru)}).reduce(function(Ru,Ou){return Ru.indexOf(Ou)<0&&Ru.push(Ou),Ru},[]),Pu={},Bu=function(Ru){var Ou=Tu[Ru];Pu[Ou]=Cu.map(function(Du){var ku={};for(var Fu in Du)he.key(Fu)?Fu==Ou&&(ku.value=Du[Fu]):ku[Fu]=Du[Fu];return ku})},Lu=0;Lu<Tu.length;Lu++)Bu(Lu);return Pu}function rv(Cu,Tu){var Pu=[],Bu=Tu.keyframes;Bu&&(Tu=Es(ov(Bu),Tu));for(var Lu in Tu)he.key(Lu)&&Pu.push({name:Lu,tweens:sv(Tu[Lu],Cu)});return Pu}function av(Cu,Tu){var Pu={};for(var Bu in Cu){var Lu=yo(Cu[Bu],Tu);he.arr(Lu)&&(Lu=Lu.map(function(Ru){return yo(Ru,Tu)}),Lu.length===1&&(Lu=Lu[0])),Pu[Bu]=Lu}return Pu.duration=parseFloat(Pu.duration),Pu.delay=parseFloat(Pu.delay),Pu}function lv(Cu,Tu){var Pu;return Cu.tweens.map(function(Bu){var Lu=av(Bu,Tu),Ru=Lu.value,Ou=he.arr(Ru)?Ru[1]:Ru,Du=_t(Ou),ku=$o(Tu.target,Cu.name,Du,Tu),Fu=Pu?Pu.to.original:ku,Nu=he.arr(Ru)?Ru[0]:Fu,Gu=_t(Nu)||_t(ku),zu=Du||Gu;return he.und(Ou)&&(Ou=Fu),Lu.from=Za(Nu,zu),Lu.to=Za(er(Ou,Nu),zu),Lu.start=Pu?Pu.end:0,Lu.end=Lu.start+Lu.delay+Lu.duration+Lu.endDelay,Lu.easing=Uo(Lu.easing,Lu.duration),Lu.isPath=he.pth(Ru),Lu.isPathTargetInsideSVG=Lu.isPath&&he.svg(Tu.target),Lu.isColor=he.col(Lu.from.original),Lu.isColor&&(Lu.round=1),Pu=Lu,Lu})}var Td={css:function(Cu,Tu,Pu){return Cu.style[Tu]=Pu},attribute:function(Cu,Tu,Pu){return Cu.setAttribute(Tu,Pu)},object:function(Cu,Tu,Pu){return Cu[Tu]=Pu},transform:function(Cu,Tu,Pu,Bu,Lu){if(Bu.list.set(Tu,Pu),Tu===Bu.last||Lu){var Ru="";Bu.list.forEach(function(Ou,Du){Ru+=Du+"("+Ou+") "}),Cu.style.transform=Ru}}};function Sd(Cu,Tu){var Pu=Id(Cu);Pu.forEach(function(Bu){for(var Lu in Tu){var Ru=yo(Tu[Lu],Bu),Ou=Bu.target,Du=_t(Ru),ku=$o(Ou,Lu,Du,Bu),Fu=Du||_t(ku),Nu=er(Ed(Ru,Fu),ku),Gu=Ko(Ou,Lu);Td[Gu](Ou,Lu,Nu,Bu.transforms,!0)}})}function cv(Cu,Tu){var Pu=Ko(Cu.target,Tu.name);if(Pu){var Bu=lv(Tu,Cu),Lu=Bu[Bu.length-1];return{type:Pu,property:Tu.name,animatable:Cu,tweens:Bu,duration:Lu.end,delay:Bu[0].delay,endDelay:Lu.endDelay}}}function dv(Cu,Tu){return ys(ws(Cu.map(function(Pu){return Tu.map(function(Bu){return cv(Pu,Bu)})})),function(Pu){return!he.und(Pu)})}function kd(Cu,Tu){var Pu=Cu.length,Bu=function(Ru){return Ru.timelineOffset?Ru.timelineOffset:0},Lu={};return Lu.duration=Pu?Math.max.apply(Math,Cu.map(function(Ru){return Bu(Ru)+Ru.duration})):Tu.duration,Lu.delay=Pu?Math.min.apply(Math,Cu.map(function(Ru){return Bu(Ru)+Ru.delay})):Tu.delay,Lu.endDelay=Pu?Lu.duration-Math.max.apply(Math,Cu.map(function(Ru){return Bu(Ru)+Ru.duration-Ru.endDelay})):Tu.endDelay,Lu}var Ja=0;function uv(Cu){var Tu=Ao(md,Cu),Pu=Ao(Vo,Cu),Bu=rv(Pu,Cu),Lu=Id(Cu.targets),Ru=dv(Lu,Bu),Ou=kd(Ru,Pu),Du=Ja;return Ja++,Es(Tu,{id:Du,children:[],animatables:Lu,animations:Ru,duration:Ou.duration,delay:Ou.delay,endDelay:Ou.endDelay})}var yt=[],Dd=function(){var Cu;function Tu(){!Cu&&(!qa()||!Me.suspendWhenDocumentHidden)&&yt.length>0&&(Cu=requestAnimationFrame(Pu))}function Pu(Lu){for(var Ru=yt.length,Ou=0;Ou<Ru;){var Du=yt[Ou];Du.paused?(yt.splice(Ou,1),Ru--):(Du.tick(Lu),Ou++)}Cu=Ou>0?requestAnimationFrame(Pu):void 0}function Bu(){!Me.suspendWhenDocumentHidden||(qa()?Cu=cancelAnimationFrame(Cu):(yt.forEach(function(Lu){return Lu._onDocumentVisibility()}),Dd()))}return typeof document<"u"&&document.addEventListener("visibilitychange",Bu),Tu}();function qa(){return!!document&&document.hidden}function Me(Cu){Cu===void 0&&(Cu={});var Tu=0,Pu=0,Bu=0,Lu,Ru=0,Ou=null;function Du(_c){var _f=window.Promise&&new Promise(function(ep){return Ou=ep});return _c.finished=_f,_f}var ku=uv(Cu);Du(ku);function Fu(){var _c=ku.direction;_c!=="alternate"&&(ku.direction=_c!=="normal"?"normal":"reverse"),ku.reversed=!ku.reversed,Lu.forEach(function(_f){return _f.reversed=ku.reversed})}function Nu(_c){return ku.reversed?ku.duration-_c:_c}function Gu(){Tu=0,Pu=Nu(ku.currentTime)*(1/Me.speed)}function zu(_c,_f){_f&&_f.seek(_c-_f.timelineOffset)}function Hu(_c){if(ku.reversePlayback)for(var _f=Ru;_f--;)zu(_c,Lu[_f]);else for(var ep=0;ep<Ru;ep++)zu(_c,Lu[ep])}function Wu(_c){for(var _f=0,ep=ku.animations,tp=ep.length;_f<tp;){var op=ep[_f],lp=op.animatable,up=op.tweens,hp=up.length-1,np=up[hp];hp&&(np=ys(up,function(kp){return _c<kp.end})[0]||np);for(var rp=Dt(_c-np.start-np.delay,0,np.duration)/np.duration,ip=isNaN(rp)?1:np.easing(rp),ap=np.to.strings,sp=np.round,cp=[],dp=np.to.numbers.length,fp=void 0,vp=0;vp<dp;vp++){var _p=void 0,wp=np.to.numbers[vp],Dp=np.from.numbers[vp]||0;np.isPath?_p=iv(np.value,ip*wp,np.isPathTargetInsideSVG):_p=Dp+ip*(wp-Dp),sp&&(np.isColor&&vp>2||(_p=Math.round(_p*sp)/sp)),cp.push(_p)}var Pp=ap.length;if(!Pp)fp=cp[0];else{fp=ap[0];for(var Wp=0;Wp<Pp;Wp++){ap[Wp];var Rp=ap[Wp+1],Gp=cp[Wp];isNaN(Gp)||(Rp?fp+=Gp+Rp:fp+=Gp+" ")}}Td[op.type](lp.target,op.property,fp,lp.transforms),op.currentValue=fp,_f++}}function _h(_c){ku[_c]&&!ku.passThrough&&ku[_c](ku)}function Xc(){ku.remaining&&ku.remaining!==!0&&ku.remaining--}function ju(_c){var _f=ku.duration,ep=ku.delay,tp=_f-ku.endDelay,op=Nu(_c);ku.progress=Dt(op/_f*100,0,100),ku.reversePlayback=op<ku.currentTime,Lu&&Hu(op),!ku.began&&ku.currentTime>0&&(ku.began=!0,_h("begin")),!ku.loopBegan&&ku.currentTime>0&&(ku.loopBegan=!0,_h("loopBegin")),op<=ep&&ku.currentTime!==0&&Wu(0),(op>=tp&&ku.currentTime!==_f||!_f)&&Wu(_f),op>ep&&op<tp?(ku.changeBegan||(ku.changeBegan=!0,ku.changeCompleted=!1,_h("changeBegin")),_h("change"),Wu(op)):ku.changeBegan&&(ku.changeCompleted=!0,ku.changeBegan=!1,_h("changeComplete")),ku.currentTime=Dt(op,0,_f),ku.began&&_h("update"),_c>=_f&&(Pu=0,Xc(),ku.remaining?(Tu=Bu,_h("loopComplete"),ku.loopBegan=!1,ku.direction==="alternate"&&Fu()):(ku.paused=!0,ku.completed||(ku.completed=!0,_h("loopComplete"),_h("complete"),!ku.passThrough&&"Promise"in window&&(Ou(),Du(ku)))))}return ku.reset=function(){var _c=ku.direction;ku.passThrough=!1,ku.currentTime=0,ku.progress=0,ku.paused=!0,ku.began=!1,ku.loopBegan=!1,ku.changeBegan=!1,ku.completed=!1,ku.changeCompleted=!1,ku.reversePlayback=!1,ku.reversed=_c==="reverse",ku.remaining=ku.loop,Lu=ku.children,Ru=Lu.length;for(var _f=Ru;_f--;)ku.children[_f].reset();(ku.reversed&&ku.loop!==!0||_c==="alternate"&&ku.loop===1)&&ku.remaining++,Wu(ku.reversed?ku.duration:0)},ku._onDocumentVisibility=Gu,ku.set=function(_c,_f){return Sd(_c,_f),ku},ku.tick=function(_c){Bu=_c,Tu||(Tu=Bu),ju((Bu+(Pu-Tu))*Me.speed)},ku.seek=function(_c){ju(Nu(_c))},ku.pause=function(){ku.paused=!0,Gu()},ku.play=function(){!ku.paused||(ku.completed&&ku.reset(),ku.paused=!1,yt.push(ku),Gu(),Dd())},ku.reverse=function(){Fu(),ku.completed=!ku.reversed,Gu()},ku.restart=function(){ku.reset(),ku.play()},ku.remove=function(_c){var _f=nr(_c);Ld(_f,ku)},ku.reset(),ku.autoplay&&ku.play(),ku}function Ka(Cu,Tu){for(var Pu=Tu.length;Pu--;)Zo(Cu,Tu[Pu].animatable.target)&&Tu.splice(Pu,1)}function Ld(Cu,Tu){var Pu=Tu.animations,Bu=Tu.children;Ka(Cu,Pu);for(var Lu=Bu.length;Lu--;){var Ru=Bu[Lu],Ou=Ru.animations;Ka(Cu,Ou),!Ou.length&&!Ru.children.length&&Bu.splice(Lu,1)}!Pu.length&&!Bu.length&&Tu.pause()}function fv(Cu){for(var Tu=nr(Cu),Pu=yt.length;Pu--;){var Bu=yt[Pu];Ld(Tu,Bu)}}function hv(Cu,Tu){Tu===void 0&&(Tu={});var Pu=Tu.direction||"normal",Bu=Tu.easing?Uo(Tu.easing):null,Lu=Tu.grid,Ru=Tu.axis,Ou=Tu.from||0,Du=Ou==="first",ku=Ou==="center",Fu=Ou==="last",Nu=he.arr(Cu),Gu=parseFloat(Nu?Cu[0]:Cu),zu=Nu?parseFloat(Cu[1]):0,Hu=_t(Nu?Cu[1]:Cu)||0,Wu=Tu.start||0+(Nu?Gu:0),_h=[],Xc=0;return function(ju,_c,_f){if(Du&&(Ou=0),ku&&(Ou=(_f-1)/2),Fu&&(Ou=_f-1),!_h.length){for(var ep=0;ep<_f;ep++){if(!Lu)_h.push(Math.abs(Ou-ep));else{var tp=ku?(Lu[0]-1)/2:Ou%Lu[0],op=ku?(Lu[1]-1)/2:Math.floor(Ou/Lu[0]),lp=ep%Lu[0],up=Math.floor(ep/Lu[0]),hp=tp-lp,np=op-up,rp=Math.sqrt(hp*hp+np*np);Ru==="x"&&(rp=-hp),Ru==="y"&&(rp=-np),_h.push(rp)}Xc=Math.max.apply(Math,_h)}Bu&&(_h=_h.map(function(ap){return Bu(ap/Xc)*Xc})),Pu==="reverse"&&(_h=_h.map(function(ap){return Ru?ap<0?ap*-1:-ap:Math.abs(Xc-ap)}))}var ip=Nu?(zu-Gu)/Xc:Gu;return Wu+ip*(Math.round(_h[_c]*100)/100)+Hu}}function pv(Cu){Cu===void 0&&(Cu={});var Tu=Me(Cu);return Tu.duration=0,Tu.add=function(Pu,Bu){var Lu=yt.indexOf(Tu),Ru=Tu.children;Lu>-1&&yt.splice(Lu,1);function Ou(zu){zu.passThrough=!0}for(var Du=0;Du<Ru.length;Du++)Ou(Ru[Du]);var ku=Es(Pu,Ao(Vo,Cu));ku.targets=ku.targets||Cu.targets;var Fu=Tu.duration;ku.autoplay=!1,ku.direction=Tu.direction,ku.timelineOffset=he.und(Bu)?Fu:er(Bu,Fu),Ou(Tu),Tu.seek(ku.timelineOffset);var Nu=Me(ku);Ou(Nu),Ru.push(Nu);var Gu=kd(Ru,Cu);return Tu.delay=Gu.delay,Tu.endDelay=Gu.endDelay,Tu.duration=Gu.duration,Tu.seek(0),Tu.reset(),Tu.autoplay&&Tu.play(),Tu},Tu}Me.version="3.2.1";Me.speed=1;Me.suspendWhenDocumentHidden=!0;Me.running=yt;Me.remove=fv;Me.get=$o;Me.set=Sd;Me.convertPx=qo;Me.path=nv;Me.setDashoffset=ev;Me.stagger=hv;Me.timeline=pv;Me.easing=Uo;Me.penner=bd;Me.random=function(Cu,Tu){return Math.floor(Math.random()*(Tu-Cu+1))+Cu};function mv(){return Math.random().toString(36).slice(-6)}const $a=mv();function gv(Cu){ge(Cu,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function el(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[10]=Tu[Pu],Bu[11]=Tu,Bu[12]=Pu,Bu}function tl(Cu){let Tu,Pu=Cu[10]+"",Bu,Lu=Cu[12];const Ru=()=>Cu[6](Tu,Lu),Ou=()=>Cu[6](null,Lu);return{c(){Tu=F("span"),Bu=Ge(Pu),C(Tu,"class","text-char svelte-1b2n9wi")},m(Du,ku){H(Du,Tu,ku),W(Tu,Bu),Ru()},p(Du,ku){Cu=Du,ku&2&&Pu!==(Pu=Cu[10]+"")&&Ye(Bu,Pu),Lu!==Cu[12]&&(Ou(),Lu=Cu[12],Ru())},d(Du){Du&&B(Tu),Ou()}}}function vv(Cu){let Tu,Pu=Cu[1],Bu=[];for(let Lu=0;Lu<Pu.length;Lu+=1)Bu[Lu]=tl(el(Cu,Pu,Lu));return{c(){for(let Lu=0;Lu<Bu.length;Lu+=1)Bu[Lu].c();Tu=Pe()},m(Lu,Ru){for(let Ou=0;Ou<Bu.length;Ou+=1)Bu[Ou].m(Lu,Ru);H(Lu,Tu,Ru)},p(Lu,[Ru]){if(Ru&3){Pu=Lu[1];let Ou;for(Ou=0;Ou<Pu.length;Ou+=1){const Du=el(Lu,Pu,Ou);Bu[Ou]?Bu[Ou].p(Du,Ru):(Bu[Ou]=tl(Du),Bu[Ou].c(),Bu[Ou].m(Tu.parentNode,Tu))}for(;Ou<Bu.length;Ou+=1)Bu[Ou].d(1);Bu.length=Pu.length}},i:le,o:le,d(Lu){jt(Bu,Lu),Lu&&B(Tu)}}}function bv(Cu,Tu,Pu){let Bu,{inDelay:Lu=0}=Tu,{outDelay:Ru=0}=Tu,{content:Ou}=Tu,{unfolded:Du}=Tu,ku,Fu=[],Nu;function Gu(Hu){clearTimeout(ku),ku=setTimeout(function(){!Nu||(Hu&&Nu.reversed||!Hu&&!Nu.reversed)&&(Nu.reverse(),Nu.play())},Hu?Lu:Ru)}wt(function(){const Hu=(()=>{const Wu=O0(_h=>Fu[_h].getBoundingClientRect().x,[Math.min(Fu.length-1,10),Math.min(Fu.length-1,30)]);if(Wu>0)return Wu})();Nu=Me({targets:Fu.filter(os).slice(0,Hu),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:Me.stagger(50),easing:"easeInOutCubic"}),Du&&Nu.seek(Nu.duration)});function zu(Hu,Wu){Je[Hu?"unshift":"push"](()=>{Fu[Wu]=Hu,Pu(0,Fu)})}return Cu.$$set=Hu=>{"inDelay"in Hu&&Pu(2,Lu=Hu.inDelay),"outDelay"in Hu&&Pu(3,Ru=Hu.outDelay),"content"in Hu&&Pu(4,Ou=Hu.content),"unfolded"in Hu&&Pu(5,Du=Hu.unfolded)},Cu.$$.update=()=>{Cu.$$.dirty&16&&Pu(1,Bu=(()=>{const Hu=[],Wu=new RegExp(/\p{Regional_Indicator}\p{Regional_Indicator}|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?(\u200D\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?)+|\p{Emoji_Presentation}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)?|\p{Emoji}(\p{Emoji_Modifier}+|\uFE0F\u20E3?)/gu),_h=`__EMOJI_SPLIT_${$a}__`,Xc=`__EMOJI_${$a}__`;return Ou.slice().replace(Wu,ju=>`${_h}${Xc}${ju}${_h}`).split(_h).forEach(ju=>ju.startsWith(Xc)?Hu.push(ju.slice(Xc.length)):Hu.push(...ju.split(""))),Hu.filter(Boolean)})()),Cu.$$.dirty&32&&Gu(Du)},[Fu,Bu,Lu,Ru,Ou,Du,zu]}class Md extends fe{constructor(Tu){super(),ue(this,Tu,bv,vv,de,{inDelay:2,outDelay:3,content:4,unfolded:5},gv)}}const Av="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",yv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=";function wv(Cu){ge(Cu,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function nl(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu;return Pu=new Ct({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),Bu=q(),Lu=F("div"),C(Lu,"class",Ru="arrow "+Cu[0]+" svelte-1ogmlqq"),Q(Lu,"background-image","url("+Av+")"),C(Tu,"class","arrow-wrapper svelte-1ogmlqq")},m(Gu,zu){H(Gu,Tu,zu),ie(Pu,Tu,null),W(Tu,Bu),W(Tu,Lu),ku=!0,Fu||(Nu=Ne(Lu,"click",Cu[5]),Fu=!0)},p(Gu,zu){Cu=Gu,(!ku||zu&1&&Ru!==(Ru="arrow "+Cu[0]+" svelte-1ogmlqq"))&&C(Lu,"class",Ru)},i(Gu){ku||(M(Pu.$$.fragment,Gu),Gu&&Re(()=>{Du&&Du.end(1),Ou=wn(Lu,vn,{duration:Cu[2],delay:Cu[3],easing:On}),Ou.start()}),ku=!0)},o(Gu){R(Pu.$$.fragment,Gu),Ou&&Ou.invalidate(),Gu&&(Du=Bn(Lu,vn,{duration:Cu[2],delay:Cu[4],easing:On})),ku=!1},d(Gu){Gu&&B(Tu),se(Pu),Gu&&Du&&Du.end(),Fu=!1,Nu()}}}function Ev(Cu){let Tu,Pu,Bu=Cu[1]&&nl(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[1]?Bu?(Bu.p(Lu,Ru),Ru&2&&M(Bu,1)):(Bu=nl(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function Cv(Cu,Tu,Pu){let{direction:Bu="right"}=Tu,{visible:Lu=!0}=Tu,{duration:Ru=0}=Tu,{inDelay:Ou=0}=Tu,{outDelay:Du=0}=Tu;function ku(Fu){lf.call(this,Cu,Fu)}return Cu.$$set=Fu=>{"direction"in Fu&&Pu(0,Bu=Fu.direction),"visible"in Fu&&Pu(1,Lu=Fu.visible),"duration"in Fu&&Pu(2,Ru=Fu.duration),"inDelay"in Fu&&Pu(3,Ou=Fu.inDelay),"outDelay"in Fu&&Pu(4,Du=Fu.outDelay)},[Bu,Lu,Ru,Ou,Du,ku]}class Pv extends fe{constructor(Tu){super(),ue(this,Tu,Cv,Ev,de,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},wv)}}function xv(Cu){ge(Cu,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function il(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[11]=Tu[Pu].id,Bu[12]=Tu[Pu].content,Bu}function sl(Cu,Tu){let Pu,Bu,Lu;return Bu=new Md({props:{unfolded:Tu[0],content:Tu[12],inDelay:500,outDelay:Tu[5]}}),{key:Cu,first:null,c(){Pu=F("div"),oe(Bu.$$.fragment),C(Pu,"class","text svelte-1fuzm7v"),Q(Pu,"transform",Tu[7]),this.first=Pu},m(Ru,Ou){H(Ru,Pu,Ou),ie(Bu,Pu,null),Tu[10](Pu),Lu=!0},p(Ru,Ou){Tu=Ru;const Du={};Ou&1&&(Du.unfolded=Tu[0]),Ou&2&&(Du.content=Tu[12]),Ou&32&&(Du.outDelay=Tu[5]),Bu.$set(Du),Ou&128&&Q(Pu,"transform",Tu[7])},i(Ru){Lu||(M(Bu.$$.fragment,Ru),Lu=!0)},o(Ru){R(Bu.$$.fragment,Ru),Lu=!1},d(Ru){Ru&&B(Pu),se(Bu),Tu[10](null)}}}function ol(Cu){let Tu,Pu,Bu;return Pu=new Pv({props:{direction:Cu[6],visible:Cu[0],inDelay:600,duration:1e3}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),C(Tu,"class","arrow svelte-1fuzm7v")},m(Lu,Ru){H(Lu,Tu,Ru),ie(Pu,Tu,null),Bu=!0},p(Lu,Ru){const Ou={};Ru&64&&(Ou.direction=Lu[6]),Ru&1&&(Ou.visible=Lu[0]),Pu.$set(Ou)},i(Lu){Bu||(M(Pu.$$.fragment,Lu),Bu=!0)},o(Lu){R(Pu.$$.fragment,Lu),Bu=!1},d(Lu){Lu&&B(Tu),se(Pu)}}}function Iv(Cu){let Tu=[],Pu=new Map,Bu,Lu,Ru,Ou=Cu[1];const Du=Fu=>Fu[11];for(let Fu=0;Fu<Ou.length;Fu+=1){let Nu=il(Cu,Ou,Fu),Gu=Du(Nu);Pu.set(Gu,Tu[Fu]=sl(Gu,Nu))}let ku=Cu[3]<Cu[4]&&ol(Cu);return{c(){for(let Fu=0;Fu<Tu.length;Fu+=1)Tu[Fu].c();Bu=q(),ku&&ku.c(),Lu=Pe()},m(Fu,Nu){for(let Gu=0;Gu<Tu.length;Gu+=1)Tu[Gu].m(Fu,Nu);H(Fu,Bu,Nu),ku&&ku.m(Fu,Nu),H(Fu,Lu,Nu),Ru=!0},p(Fu,[Nu]){Nu&167&&(Ou=Fu[1],ve(),Tu=Et(Tu,Nu,Du,1,Fu,Ou,Pu,Bu.parentNode,Yt,sl,Bu,il),be()),Fu[3]<Fu[4]?ku?(ku.p(Fu,Nu),Nu&24&&M(ku,1)):(ku=ol(Fu),ku.c(),M(ku,1),ku.m(Lu.parentNode,Lu)):ku&&(ve(),R(ku,1,1,()=>{ku=null}),be())},i(Fu){if(!Ru){for(let Nu=0;Nu<Ou.length;Nu+=1)M(Tu[Nu]);M(ku),Ru=!0}},o(Fu){for(let Nu=0;Nu<Tu.length;Nu+=1)R(Tu[Nu]);R(ku),Ru=!1},d(Fu){for(let Nu=0;Nu<Tu.length;Nu+=1)Tu[Nu].d(Fu);Fu&&B(Bu),ku&&ku.d(Fu),Fu&&B(Lu)}}}function Tv(Cu,Tu,Pu){let Bu,Lu,Ru,{visible:Ou=!1}=Tu,{textUnfolded:Du=!1}=Tu,{textItems:ku}=Tu,Fu,Nu=0,Gu=0,zu=0;function Hu(Wu){Je[Wu?"unshift":"push"](()=>{Fu=Wu,Pu(2,Fu)})}return Cu.$$set=Wu=>{"visible"in Wu&&Pu(0,Ou=Wu.visible),"textUnfolded"in Wu&&Pu(8,Du=Wu.textUnfolded),"textItems"in Wu&&Pu(1,ku=Wu.textItems)},Cu.$$.update=()=>{if(Cu.$$.dirty&4&&Fu){const{height:Wu,lineHeight:_h}=getComputedStyle(Fu);Pu(4,zu=Number(Wu.replace("px",""))),Pu(3,Gu=Number(_h.replace("px","")))}Cu.$$.dirty&280&&Pu(9,Nu=Du?Gu-zu:0),Cu.$$.dirty&512&&Pu(7,Bu=`translateY(${Nu}px)`),Cu.$$.dirty&256&&Pu(6,Lu=Du?"left":"right"),Cu.$$.dirty&256&&Pu(5,Ru=Du?450:0)},[Ou,ku,Fu,Gu,zu,Ru,Lu,Bu,Du,Nu,Hu]}class zd extends fe{constructor(Tu){super(),ue(this,Tu,Tv,Iv,de,{visible:0,textUnfolded:8,textItems:1},xv)}}function rt(Cu,Tu){return Cu==null?Tu:Cu}function Sv(Cu){ge(Cu,"svelte-18yy5x8",".line.svelte-18yy5x8{position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-18yy5x8{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function rl(Cu){var Tu;let Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu;return Pu=new Ct({props:{visible:Cu[2],left:Cu[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Ru=new pd({props:{unfolded:Cu[2],duration:1e3,outDelay:Cu[5]+40*Math.min(rt((Tu=Cu[4][0])==null?void 0:Tu.content.length,10),15)}}),ku=new zd({props:{visible:Cu[2],textUnfolded:Cu[1],textItems:Cu[4]}}),{c(){oe(Pu.$$.fragment),Bu=q(),Lu=F("div"),oe(Ru.$$.fragment),Ou=q(),Du=F("div"),oe(ku.$$.fragment),C(Lu,"class","line svelte-18yy5x8"),Q(Lu,"width",Cu[3]+"px"),C(Du,"class","content svelte-18yy5x8"),Re(()=>Cu[9].call(Du))},m(Hu,Wu){ie(Pu,Hu,Wu),H(Hu,Bu,Wu),H(Hu,Lu,Wu),ie(Ru,Lu,null),H(Hu,Ou,Wu),H(Hu,Du,Wu),ie(ku,Du,null),Fu=rn(Du,Cu[9].bind(Du)),Nu=!0,Gu||(zu=Ne(Du,"click",Cu[6]),Gu=!0)},p(Hu,Wu){var _h;const Xc={};Wu&4&&(Xc.visible=Hu[2]),Wu&8&&(Xc.left=Hu[3]/2+"px"),Pu.$set(Xc);const ju={};Wu&4&&(ju.unfolded=Hu[2]),Wu&48&&(ju.outDelay=Hu[5]+40*Math.min(rt((_h=Hu[4][0])==null?void 0:_h.content.length,10),15)),Ru.$set(ju),Wu&8&&Q(Lu,"width",Hu[3]+"px");const _c={};Wu&4&&(_c.visible=Hu[2]),Wu&2&&(_c.textUnfolded=Hu[1]),Wu&16&&(_c.textItems=Hu[4]),ku.$set(_c)},i(Hu){Nu||(M(Pu.$$.fragment,Hu),M(Ru.$$.fragment,Hu),M(ku.$$.fragment,Hu),Nu=!0)},o(Hu){R(Pu.$$.fragment,Hu),R(Ru.$$.fragment,Hu),R(ku.$$.fragment,Hu),Nu=!1},d(Hu){se(Pu,Hu),Hu&&B(Bu),Hu&&B(Lu),se(Ru),Hu&&B(Ou),Hu&&B(Du),se(ku),Fu(),Gu=!1,zu()}}}function kv(Cu){let Tu,Pu,Bu=Cu[0].state&&rl(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[0].state?Bu?(Bu.p(Lu,Ru),Ru&1&&M(Bu,1)):(Bu=rl(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function Dv(Cu,Tu,Pu){let Bu,Lu,Ru;var Ou;let{tag:Du}=Tu,ku,Fu=!1,Nu=[];function Gu(){Pu(1,Fu=!Fu)}function zu(){ku=this.clientWidth,Pu(3,ku)}return Cu.$$set=Hu=>{"tag"in Hu&&Pu(0,Du=Hu.tag)},Cu.$$.update=()=>{Cu.$$.dirty&129&&Pu(2,Bu=!!(!(Pu(7,Ou=Du.state)===null||Ou===void 0)&&Ou.unfolded)),Cu.$$.dirty&1&&Pu(8,Lu=Du.data.text),Cu.$$.dirty&256&&Pu(4,Nu=[{id:ot(),content:Lu}]),Cu.$$.dirty&4&&(Bu||setTimeout(()=>{Pu(1,Fu=!1)},20)),Cu.$$.dirty&2&&Pu(5,Ru=Fu?450:0)},[Du,Fu,Bu,ku,Nu,Ru,Gu,Ou,Lu,zu]}class Lv extends fe{constructor(Tu){super(),ue(this,Tu,Dv,kv,de,{tag:0},Sv)}}function Mv(Cu){ge(Cu,"svelte-e72ouh",".line.svelte-e72ouh{width:100%;height:100%;overflow:visible}")}function al(Cu){let Tu,Pu,Bu,Lu;return{c(){Tu=Ie("path"),C(Tu,"fill","none"),C(Tu,"stroke","url(#"+Cu[4]+")"),C(Tu,"stroke-width","1"),C(Tu,"d","M0 21 L14 0.5 L105 0.5")},m(Ru,Ou){H(Ru,Tu,Ou),Lu=!0},p(Ru,Ou){Cu=Ru},i(Ru){Lu||(Ru&&Re(()=>{Bu&&Bu.end(1),Pu=wn(Tu,ts,{duration:Cu[1],delay:Cu[0],easing:Bc}),Pu.start()}),Lu=!0)},o(Ru){Pu&&Pu.invalidate(),Ru&&(Bu=Bn(Tu,ts,{duration:Cu[1],delay:Cu[2],easing:On})),Lu=!1},d(Ru){Ru&&B(Tu),Ru&&Bu&&Bu.end()}}}function zv(Cu){let Tu,Pu,Bu,Lu,Ru,Ou=Cu[3]&&al(Cu);return{c(){Tu=Ie("svg"),Pu=Ie("defs"),Bu=Ie("linearGradient"),Lu=Ie("stop"),Ru=Ie("stop"),Ou&&Ou.c(),C(Lu,"offset","25%"),C(Lu,"stop-color","white"),C(Lu,"stop-opacity","1"),C(Ru,"offset","100%"),C(Ru,"stop-color","white"),C(Ru,"stop-opacity","0.5"),C(Bu,"id",Cu[4]),C(Bu,"gradientUnits","userSpaceOnUse"),C(Tu,"class","line svelte-e72ouh"),C(Tu,"viewBox","0 0 105 21")},m(Du,ku){H(Du,Tu,ku),W(Tu,Pu),W(Pu,Bu),W(Bu,Lu),W(Bu,Ru),Ou&&Ou.m(Tu,null)},p(Du,[ku]){Du[3]?Ou?(Ou.p(Du,ku),ku&8&&M(Ou,1)):(Ou=al(Du),Ou.c(),M(Ou,1),Ou.m(Tu,null)):Ou&&(ve(),R(Ou,1,1,()=>{Ou=null}),be())},i(Du){M(Ou)},o(Du){R(Ou)},d(Du){Du&&B(Tu),Ou&&Ou.d()}}}function Ov(Cu,Tu,Pu){let{inDelay:Bu=0}=Tu,{duration:Lu=0}=Tu,{outDelay:Ru=0}=Tu,{unfolded:Ou}=Tu;const Du=ot();return Cu.$$set=ku=>{"inDelay"in ku&&Pu(0,Bu=ku.inDelay),"duration"in ku&&Pu(1,Lu=ku.duration),"outDelay"in ku&&Pu(2,Ru=ku.outDelay),"unfolded"in ku&&Pu(3,Ou=ku.unfolded)},[Bu,Lu,Ru,Ou,Du]}class jv extends fe{constructor(Tu){super(),ue(this,Tu,Ov,zv,de,{inDelay:0,duration:1,outDelay:2,unfolded:3},Mv)}}function ll(Cu){return Cu!==null&&typeof Cu=="object"&&"constructor"in Cu&&Cu.constructor===Object}function ir(Cu={},Tu={}){Object.keys(Tu).forEach(Pu=>{typeof Cu[Pu]>"u"?Cu[Pu]=Tu[Pu]:ll(Tu[Pu])&&ll(Cu[Pu])&&Object.keys(Tu[Pu]).length>0&&ir(Cu[Pu],Tu[Pu])})}const Od={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ft(){const Cu=typeof document<"u"?document:{};return ir(Cu,Od),Cu}const Bv={document:Od,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(Cu){return typeof setTimeout>"u"?(Cu(),null):setTimeout(Cu,0)},cancelAnimationFrame(Cu){typeof setTimeout>"u"||clearTimeout(Cu)}};function Qe(){const Cu=typeof window<"u"?window:{};return ir(Cu,Bv),Cu}function Rv(Cu){const Tu=Cu.__proto__;Object.defineProperty(Cu,"__proto__",{get(){return Tu},set(Pu){Tu.__proto__=Pu}})}class $t extends Array{constructor(Tu){typeof Tu=="number"?super(Tu):(super(...Tu||[]),Rv(this))}}function oi(Cu=[]){const Tu=[];return Cu.forEach(Pu=>{Array.isArray(Pu)?Tu.push(...oi(Pu)):Tu.push(Pu)}),Tu}function jd(Cu,Tu){return Array.prototype.filter.call(Cu,Tu)}function Hv(Cu){const Tu=[];for(let Pu=0;Pu<Cu.length;Pu+=1)Tu.indexOf(Cu[Pu])===-1&&Tu.push(Cu[Pu]);return Tu}function Nv(Cu,Tu){if(typeof Cu!="string")return[Cu];const Pu=[],Bu=Tu.querySelectorAll(Cu);for(let Lu=0;Lu<Bu.length;Lu+=1)Pu.push(Bu[Lu]);return Pu}function re(Cu,Tu){const Pu=Qe(),Bu=ft();let Lu=[];if(!Tu&&Cu instanceof $t)return Cu;if(!Cu)return new $t(Lu);if(typeof Cu=="string"){const Ru=Cu.trim();if(Ru.indexOf("<")>=0&&Ru.indexOf(">")>=0){let Ou="div";Ru.indexOf("<li")===0&&(Ou="ul"),Ru.indexOf("<tr")===0&&(Ou="tbody"),(Ru.indexOf("<td")===0||Ru.indexOf("<th")===0)&&(Ou="tr"),Ru.indexOf("<tbody")===0&&(Ou="table"),Ru.indexOf("<option")===0&&(Ou="select");const Du=Bu.createElement(Ou);Du.innerHTML=Ru;for(let ku=0;ku<Du.childNodes.length;ku+=1)Lu.push(Du.childNodes[ku])}else Lu=Nv(Cu.trim(),Tu||Bu)}else if(Cu.nodeType||Cu===Pu||Cu===Bu)Lu.push(Cu);else if(Array.isArray(Cu)){if(Cu instanceof $t)return Cu;Lu=Cu}return new $t(Hv(Lu))}re.fn=$t.prototype;function Gv(...Cu){const Tu=oi(Cu.map(Pu=>Pu.split(" ")));return this.forEach(Pu=>{Pu.classList.add(...Tu)}),this}function Fv(...Cu){const Tu=oi(Cu.map(Pu=>Pu.split(" ")));return this.forEach(Pu=>{Pu.classList.remove(...Tu)}),this}function Wv(...Cu){const Tu=oi(Cu.map(Pu=>Pu.split(" ")));this.forEach(Pu=>{Tu.forEach(Bu=>{Pu.classList.toggle(Bu)})})}function Qv(...Cu){const Tu=oi(Cu.map(Pu=>Pu.split(" ")));return jd(this,Pu=>Tu.filter(Bu=>Pu.classList.contains(Bu)).length>0).length>0}function _v(Cu,Tu){if(arguments.length===1&&typeof Cu=="string")return this[0]?this[0].getAttribute(Cu):void 0;for(let Pu=0;Pu<this.length;Pu+=1)if(arguments.length===2)this[Pu].setAttribute(Cu,Tu);else for(const Bu in Cu)this[Pu][Bu]=Cu[Bu],this[Pu].setAttribute(Bu,Cu[Bu]);return this}function Xv(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].removeAttribute(Cu);return this}function Yv(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transform=Cu;return this}function Vv(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transitionDuration=typeof Cu!="string"?`${Cu}ms`:Cu;return this}function Uv(...Cu){let[Tu,Pu,Bu,Lu]=Cu;typeof Cu[1]=="function"&&([Tu,Bu,Lu]=Cu,Pu=void 0),Lu||(Lu=!1);function Ru(Fu){const Nu=Fu.target;if(!Nu)return;const Gu=Fu.target.dom7EventData||[];if(Gu.indexOf(Fu)<0&&Gu.unshift(Fu),re(Nu).is(Pu))Bu.apply(Nu,Gu);else{const zu=re(Nu).parents();for(let Hu=0;Hu<zu.length;Hu+=1)re(zu[Hu]).is(Pu)&&Bu.apply(zu[Hu],Gu)}}function Ou(Fu){const Nu=Fu&&Fu.target?Fu.target.dom7EventData||[]:[];Nu.indexOf(Fu)<0&&Nu.unshift(Fu),Bu.apply(this,Nu)}const Du=Tu.split(" ");let ku;for(let Fu=0;Fu<this.length;Fu+=1){const Nu=this[Fu];if(Pu)for(ku=0;ku<Du.length;ku+=1){const Gu=Du[ku];Nu.dom7LiveListeners||(Nu.dom7LiveListeners={}),Nu.dom7LiveListeners[Gu]||(Nu.dom7LiveListeners[Gu]=[]),Nu.dom7LiveListeners[Gu].push({listener:Bu,proxyListener:Ru}),Nu.addEventListener(Gu,Ru,Lu)}else for(ku=0;ku<Du.length;ku+=1){const Gu=Du[ku];Nu.dom7Listeners||(Nu.dom7Listeners={}),Nu.dom7Listeners[Gu]||(Nu.dom7Listeners[Gu]=[]),Nu.dom7Listeners[Gu].push({listener:Bu,proxyListener:Ou}),Nu.addEventListener(Gu,Ou,Lu)}}return this}function Zv(...Cu){let[Tu,Pu,Bu,Lu]=Cu;typeof Cu[1]=="function"&&([Tu,Bu,Lu]=Cu,Pu=void 0),Lu||(Lu=!1);const Ru=Tu.split(" ");for(let Ou=0;Ou<Ru.length;Ou+=1){const Du=Ru[Ou];for(let ku=0;ku<this.length;ku+=1){const Fu=this[ku];let Nu;if(!Pu&&Fu.dom7Listeners?Nu=Fu.dom7Listeners[Du]:Pu&&Fu.dom7LiveListeners&&(Nu=Fu.dom7LiveListeners[Du]),Nu&&Nu.length)for(let Gu=Nu.length-1;Gu>=0;Gu-=1){const zu=Nu[Gu];Bu&&zu.listener===Bu||Bu&&zu.listener&&zu.listener.dom7proxy&&zu.listener.dom7proxy===Bu?(Fu.removeEventListener(Du,zu.proxyListener,Lu),Nu.splice(Gu,1)):Bu||(Fu.removeEventListener(Du,zu.proxyListener,Lu),Nu.splice(Gu,1))}}}return this}function Jv(...Cu){const Tu=Qe(),Pu=Cu[0].split(" "),Bu=Cu[1];for(let Lu=0;Lu<Pu.length;Lu+=1){const Ru=Pu[Lu];for(let Ou=0;Ou<this.length;Ou+=1){const Du=this[Ou];if(Tu.CustomEvent){const ku=new Tu.CustomEvent(Ru,{detail:Bu,bubbles:!0,cancelable:!0});Du.dom7EventData=Cu.filter((Fu,Nu)=>Nu>0),Du.dispatchEvent(ku),Du.dom7EventData=[],delete Du.dom7EventData}}}return this}function qv(Cu){const Tu=this;function Pu(Bu){Bu.target===this&&(Cu.call(this,Bu),Tu.off("transitionend",Pu))}return Cu&&Tu.on("transitionend",Pu),this}function Kv(Cu){if(this.length>0){if(Cu){const Tu=this.styles();return this[0].offsetWidth+parseFloat(Tu.getPropertyValue("margin-right"))+parseFloat(Tu.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function $v(Cu){if(this.length>0){if(Cu){const Tu=this.styles();return this[0].offsetHeight+parseFloat(Tu.getPropertyValue("margin-top"))+parseFloat(Tu.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function e1(){if(this.length>0){const Cu=Qe(),Tu=ft(),Pu=this[0],Bu=Pu.getBoundingClientRect(),Lu=Tu.body,Ru=Pu.clientTop||Lu.clientTop||0,Ou=Pu.clientLeft||Lu.clientLeft||0,Du=Pu===Cu?Cu.scrollY:Pu.scrollTop,ku=Pu===Cu?Cu.scrollX:Pu.scrollLeft;return{top:Bu.top+Du-Ru,left:Bu.left+ku-Ou}}return null}function t1(){const Cu=Qe();return this[0]?Cu.getComputedStyle(this[0],null):{}}function n1(Cu,Tu){const Pu=Qe();let Bu;if(arguments.length===1)if(typeof Cu=="string"){if(this[0])return Pu.getComputedStyle(this[0],null).getPropertyValue(Cu)}else{for(Bu=0;Bu<this.length;Bu+=1)for(const Lu in Cu)this[Bu].style[Lu]=Cu[Lu];return this}if(arguments.length===2&&typeof Cu=="string"){for(Bu=0;Bu<this.length;Bu+=1)this[Bu].style[Cu]=Tu;return this}return this}function i1(Cu){return Cu?(this.forEach((Tu,Pu)=>{Cu.apply(Tu,[Tu,Pu])}),this):this}function s1(Cu){const Tu=jd(this,Cu);return re(Tu)}function o1(Cu){if(typeof Cu>"u")return this[0]?this[0].innerHTML:null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].innerHTML=Cu;return this}function r1(Cu){if(typeof Cu>"u")return this[0]?this[0].textContent.trim():null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].textContent=Cu;return this}function a1(Cu){const Tu=Qe(),Pu=ft(),Bu=this[0];let Lu,Ru;if(!Bu||typeof Cu>"u")return!1;if(typeof Cu=="string"){if(Bu.matches)return Bu.matches(Cu);if(Bu.webkitMatchesSelector)return Bu.webkitMatchesSelector(Cu);if(Bu.msMatchesSelector)return Bu.msMatchesSelector(Cu);for(Lu=re(Cu),Ru=0;Ru<Lu.length;Ru+=1)if(Lu[Ru]===Bu)return!0;return!1}if(Cu===Pu)return Bu===Pu;if(Cu===Tu)return Bu===Tu;if(Cu.nodeType||Cu instanceof $t){for(Lu=Cu.nodeType?[Cu]:Cu,Ru=0;Ru<Lu.length;Ru+=1)if(Lu[Ru]===Bu)return!0;return!1}return!1}function l1(){let Cu=this[0],Tu;if(Cu){for(Tu=0;(Cu=Cu.previousSibling)!==null;)Cu.nodeType===1&&(Tu+=1);return Tu}}function c1(Cu){if(typeof Cu>"u")return this;const Tu=this.length;if(Cu>Tu-1)return re([]);if(Cu<0){const Pu=Tu+Cu;return Pu<0?re([]):re([this[Pu]])}return re([this[Cu]])}function d1(...Cu){let Tu;const Pu=ft();for(let Bu=0;Bu<Cu.length;Bu+=1){Tu=Cu[Bu];for(let Lu=0;Lu<this.length;Lu+=1)if(typeof Tu=="string"){const Ru=Pu.createElement("div");for(Ru.innerHTML=Tu;Ru.firstChild;)this[Lu].appendChild(Ru.firstChild)}else if(Tu instanceof $t)for(let Ru=0;Ru<Tu.length;Ru+=1)this[Lu].appendChild(Tu[Ru]);else this[Lu].appendChild(Tu)}return this}function u1(Cu){const Tu=ft();let Pu,Bu;for(Pu=0;Pu<this.length;Pu+=1)if(typeof Cu=="string"){const Lu=Tu.createElement("div");for(Lu.innerHTML=Cu,Bu=Lu.childNodes.length-1;Bu>=0;Bu-=1)this[Pu].insertBefore(Lu.childNodes[Bu],this[Pu].childNodes[0])}else if(Cu instanceof $t)for(Bu=0;Bu<Cu.length;Bu+=1)this[Pu].insertBefore(Cu[Bu],this[Pu].childNodes[0]);else this[Pu].insertBefore(Cu,this[Pu].childNodes[0]);return this}function f1(Cu){return this.length>0?Cu?this[0].nextElementSibling&&re(this[0].nextElementSibling).is(Cu)?re([this[0].nextElementSibling]):re([]):this[0].nextElementSibling?re([this[0].nextElementSibling]):re([]):re([])}function h1(Cu){const Tu=[];let Pu=this[0];if(!Pu)return re([]);for(;Pu.nextElementSibling;){const Bu=Pu.nextElementSibling;Cu?re(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Pu=Bu}return re(Tu)}function p1(Cu){if(this.length>0){const Tu=this[0];return Cu?Tu.previousElementSibling&&re(Tu.previousElementSibling).is(Cu)?re([Tu.previousElementSibling]):re([]):Tu.previousElementSibling?re([Tu.previousElementSibling]):re([])}return re([])}function m1(Cu){const Tu=[];let Pu=this[0];if(!Pu)return re([]);for(;Pu.previousElementSibling;){const Bu=Pu.previousElementSibling;Cu?re(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Pu=Bu}return re(Tu)}function g1(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1)this[Pu].parentNode!==null&&(Cu?re(this[Pu].parentNode).is(Cu)&&Tu.push(this[Pu].parentNode):Tu.push(this[Pu].parentNode));return re(Tu)}function v1(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){let Bu=this[Pu].parentNode;for(;Bu;)Cu?re(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Bu=Bu.parentNode}return re(Tu)}function b1(Cu){let Tu=this;return typeof Cu>"u"?re([]):(Tu.is(Cu)||(Tu=Tu.parents(Cu).eq(0)),Tu)}function A1(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){const Bu=this[Pu].querySelectorAll(Cu);for(let Lu=0;Lu<Bu.length;Lu+=1)Tu.push(Bu[Lu])}return re(Tu)}function y1(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){const Bu=this[Pu].children;for(let Lu=0;Lu<Bu.length;Lu+=1)(!Cu||re(Bu[Lu]).is(Cu))&&Tu.push(Bu[Lu])}return re(Tu)}function w1(){for(let Cu=0;Cu<this.length;Cu+=1)this[Cu].parentNode&&this[Cu].parentNode.removeChild(this[Cu]);return this}const cl={addClass:Gv,removeClass:Fv,hasClass:Qv,toggleClass:Wv,attr:_v,removeAttr:Xv,transform:Yv,transition:Vv,on:Uv,off:Zv,trigger:Jv,transitionEnd:qv,outerWidth:Kv,outerHeight:$v,styles:t1,offset:e1,css:n1,each:i1,html:o1,text:r1,is:a1,index:l1,eq:c1,append:d1,prepend:u1,next:f1,nextAll:h1,prev:p1,prevAll:m1,parent:g1,parents:v1,closest:b1,find:A1,children:y1,filter:s1,remove:w1};Object.keys(cl).forEach(Cu=>{Object.defineProperty(re.fn,Cu,{value:cl[Cu],writable:!0})});function E1(Cu){const Tu=Cu;Object.keys(Tu).forEach(Pu=>{try{Tu[Pu]=null}catch{}try{delete Tu[Pu]}catch{}})}function wo(Cu,Tu=0){return setTimeout(Cu,Tu)}function ni(){return Date.now()}function C1(Cu){const Tu=Qe();let Pu;return Tu.getComputedStyle&&(Pu=Tu.getComputedStyle(Cu,null)),!Pu&&Cu.currentStyle&&(Pu=Cu.currentStyle),Pu||(Pu=Cu.style),Pu}function P1(Cu,Tu="x"){const Pu=Qe();let Bu,Lu,Ru;const Ou=C1(Cu);return Pu.WebKitCSSMatrix?(Lu=Ou.transform||Ou.webkitTransform,Lu.split(",").length>6&&(Lu=Lu.split(", ").map(Du=>Du.replace(",",".")).join(", ")),Ru=new Pu.WebKitCSSMatrix(Lu==="none"?"":Lu)):(Ru=Ou.MozTransform||Ou.OTransform||Ou.MsTransform||Ou.msTransform||Ou.transform||Ou.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Bu=Ru.toString().split(",")),Tu==="x"&&(Pu.WebKitCSSMatrix?Lu=Ru.m41:Bu.length===16?Lu=parseFloat(Bu[12]):Lu=parseFloat(Bu[4])),Tu==="y"&&(Pu.WebKitCSSMatrix?Lu=Ru.m42:Bu.length===16?Lu=parseFloat(Bu[13]):Lu=parseFloat(Bu[5])),Lu||0}function Oi(Cu){return typeof Cu=="object"&&Cu!==null&&Cu.constructor&&Object.prototype.toString.call(Cu).slice(8,-1)==="Object"}function x1(Cu){return typeof window<"u"&&typeof window.HTMLElement<"u"?Cu instanceof HTMLElement:Cu&&(Cu.nodeType===1||Cu.nodeType===11)}function ct(...Cu){const Tu=Object(Cu[0]),Pu=["__proto__","constructor","prototype"];for(let Bu=1;Bu<Cu.length;Bu+=1){const Lu=Cu[Bu];if(Lu!=null&&!x1(Lu)){const Ru=Object.keys(Object(Lu)).filter(Ou=>Pu.indexOf(Ou)<0);for(let Ou=0,Du=Ru.length;Ou<Du;Ou+=1){const ku=Ru[Ou],Fu=Object.getOwnPropertyDescriptor(Lu,ku);Fu!==void 0&&Fu.enumerable&&(Oi(Tu[ku])&&Oi(Lu[ku])?Lu[ku].__swiper__?Tu[ku]=Lu[ku]:ct(Tu[ku],Lu[ku]):!Oi(Tu[ku])&&Oi(Lu[ku])?(Tu[ku]={},Lu[ku].__swiper__?Tu[ku]=Lu[ku]:ct(Tu[ku],Lu[ku])):Tu[ku]=Lu[ku])}}}return Tu}function ji(Cu,Tu,Pu){Cu.style.setProperty(Tu,Pu)}function Bd({swiper:Cu,targetPosition:Tu,side:Pu}){const Bu=Qe(),Lu=-Cu.translate;let Ru=null,Ou;const Du=Cu.params.speed;Cu.wrapperEl.style.scrollSnapType="none",Bu.cancelAnimationFrame(Cu.cssModeFrameID);const ku=Tu>Lu?"next":"prev",Fu=(Gu,zu)=>ku==="next"&&Gu>=zu||ku==="prev"&&Gu<=zu,Nu=()=>{Ou=new Date().getTime(),Ru===null&&(Ru=Ou);const Gu=Math.max(Math.min((Ou-Ru)/Du,1),0),zu=.5-Math.cos(Gu*Math.PI)/2;let Hu=Lu+zu*(Tu-Lu);if(Fu(Hu,Tu)&&(Hu=Tu),Cu.wrapperEl.scrollTo({[Pu]:Hu}),Fu(Hu,Tu)){Cu.wrapperEl.style.overflow="hidden",Cu.wrapperEl.style.scrollSnapType="",setTimeout(()=>{Cu.wrapperEl.style.overflow="",Cu.wrapperEl.scrollTo({[Pu]:Hu})}),Bu.cancelAnimationFrame(Cu.cssModeFrameID);return}Cu.cssModeFrameID=Bu.requestAnimationFrame(Nu)};Nu()}let Xs;function I1(){const Cu=Qe(),Tu=ft();return{smoothScroll:Tu.documentElement&&"scrollBehavior"in Tu.documentElement.style,touch:!!("ontouchstart"in Cu||Cu.DocumentTouch&&Tu instanceof Cu.DocumentTouch),passiveListener:function(){let Pu=!1;try{const Bu=Object.defineProperty({},"passive",{get(){Pu=!0}});Cu.addEventListener("testPassiveListener",null,Bu)}catch{}return Pu}(),gestures:function(){return"ongesturestart"in Cu}()}}function Rd(){return Xs||(Xs=I1()),Xs}let Ys;function T1({userAgent:Cu}={}){const Tu=Rd(),Pu=Qe(),Bu=Pu.navigator.platform,Lu=Cu||Pu.navigator.userAgent,Ru={ios:!1,android:!1},Ou=Pu.screen.width,Du=Pu.screen.height,ku=Lu.match(/(Android);?[\s\/]+([\d.]+)?/);let Fu=Lu.match(/(iPad).*OS\s([\d_]+)/);const Nu=Lu.match(/(iPod)(.*OS\s([\d_]+))?/),Gu=!Fu&&Lu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),zu=Bu==="Win32";let Hu=Bu==="MacIntel";const Wu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!Fu&&Hu&&Tu.touch&&Wu.indexOf(`${Ou}x${Du}`)>=0&&(Fu=Lu.match(/(Version)\/([\d.]+)/),Fu||(Fu=[0,1,"13_0_0"]),Hu=!1),ku&&!zu&&(Ru.os="android",Ru.android=!0),(Fu||Gu||Nu)&&(Ru.os="ios",Ru.ios=!0),Ru}function S1(Cu={}){return Ys||(Ys=T1(Cu)),Ys}let Vs;function k1(){const Cu=Qe();function Tu(){const Pu=Cu.navigator.userAgent.toLowerCase();return Pu.indexOf("safari")>=0&&Pu.indexOf("chrome")<0&&Pu.indexOf("android")<0}return{isSafari:Tu(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(Cu.navigator.userAgent)}}function D1(){return Vs||(Vs=k1()),Vs}function L1({swiper:Cu,on:Tu,emit:Pu}){const Bu=Qe();let Lu=null,Ru=null;const Ou=()=>{!Cu||Cu.destroyed||!Cu.initialized||(Pu("beforeResize"),Pu("resize"))},Du=()=>{!Cu||Cu.destroyed||!Cu.initialized||(Lu=new ResizeObserver(Nu=>{Ru=Bu.requestAnimationFrame(()=>{const{width:Gu,height:zu}=Cu;let Hu=Gu,Wu=zu;Nu.forEach(({contentBoxSize:_h,contentRect:Xc,target:ju})=>{ju&&ju!==Cu.el||(Hu=Xc?Xc.width:(_h[0]||_h).inlineSize,Wu=Xc?Xc.height:(_h[0]||_h).blockSize)}),(Hu!==Gu||Wu!==zu)&&Ou()})}),Lu.observe(Cu.el))},ku=()=>{Ru&&Bu.cancelAnimationFrame(Ru),Lu&&Lu.unobserve&&Cu.el&&(Lu.unobserve(Cu.el),Lu=null)},Fu=()=>{!Cu||Cu.destroyed||!Cu.initialized||Pu("orientationchange")};Tu("init",()=>{if(Cu.params.resizeObserver&&typeof Bu.ResizeObserver<"u"){Du();return}Bu.addEventListener("resize",Ou),Bu.addEventListener("orientationchange",Fu)}),Tu("destroy",()=>{ku(),Bu.removeEventListener("resize",Ou),Bu.removeEventListener("orientationchange",Fu)})}function M1({swiper:Cu,extendParams:Tu,on:Pu,emit:Bu}){const Lu=[],Ru=Qe(),Ou=(Fu,Nu={})=>{const Gu=Ru.MutationObserver||Ru.WebkitMutationObserver,zu=new Gu(Hu=>{if(Hu.length===1){Bu("observerUpdate",Hu[0]);return}const Wu=function(){Bu("observerUpdate",Hu[0])};Ru.requestAnimationFrame?Ru.requestAnimationFrame(Wu):Ru.setTimeout(Wu,0)});zu.observe(Fu,{attributes:typeof Nu.attributes>"u"?!0:Nu.attributes,childList:typeof Nu.childList>"u"?!0:Nu.childList,characterData:typeof Nu.characterData>"u"?!0:Nu.characterData}),Lu.push(zu)},Du=()=>{if(Cu.params.observer){if(Cu.params.observeParents){const Fu=Cu.$el.parents();for(let Nu=0;Nu<Fu.length;Nu+=1)Ou(Fu[Nu])}Ou(Cu.$el[0],{childList:Cu.params.observeSlideChildren}),Ou(Cu.$wrapperEl[0],{attributes:!1})}},ku=()=>{Lu.forEach(Fu=>{Fu.disconnect()}),Lu.splice(0,Lu.length)};Tu({observer:!1,observeParents:!1,observeSlideChildren:!1}),Pu("init",Du),Pu("destroy",ku)}const z1={on(Cu,Tu,Pu){const Bu=this;if(!Bu.eventsListeners||Bu.destroyed||typeof Tu!="function")return Bu;const Lu=Pu?"unshift":"push";return Cu.split(" ").forEach(Ru=>{Bu.eventsListeners[Ru]||(Bu.eventsListeners[Ru]=[]),Bu.eventsListeners[Ru][Lu](Tu)}),Bu},once(Cu,Tu,Pu){const Bu=this;if(!Bu.eventsListeners||Bu.destroyed||typeof Tu!="function")return Bu;function Lu(...Ru){Bu.off(Cu,Lu),Lu.__emitterProxy&&delete Lu.__emitterProxy,Tu.apply(Bu,Ru)}return Lu.__emitterProxy=Tu,Bu.on(Cu,Lu,Pu)},onAny(Cu,Tu){const Pu=this;if(!Pu.eventsListeners||Pu.destroyed||typeof Cu!="function")return Pu;const Bu=Tu?"unshift":"push";return Pu.eventsAnyListeners.indexOf(Cu)<0&&Pu.eventsAnyListeners[Bu](Cu),Pu},offAny(Cu){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsAnyListeners)return Tu;const Pu=Tu.eventsAnyListeners.indexOf(Cu);return Pu>=0&&Tu.eventsAnyListeners.splice(Pu,1),Tu},off(Cu,Tu){const Pu=this;return!Pu.eventsListeners||Pu.destroyed||!Pu.eventsListeners||Cu.split(" ").forEach(Bu=>{typeof Tu>"u"?Pu.eventsListeners[Bu]=[]:Pu.eventsListeners[Bu]&&Pu.eventsListeners[Bu].forEach((Lu,Ru)=>{(Lu===Tu||Lu.__emitterProxy&&Lu.__emitterProxy===Tu)&&Pu.eventsListeners[Bu].splice(Ru,1)})}),Pu},emit(...Cu){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsListeners)return Tu;let Pu,Bu,Lu;return typeof Cu[0]=="string"||Array.isArray(Cu[0])?(Pu=Cu[0],Bu=Cu.slice(1,Cu.length),Lu=Tu):(Pu=Cu[0].events,Bu=Cu[0].data,Lu=Cu[0].context||Tu),Bu.unshift(Lu),(Array.isArray(Pu)?Pu:Pu.split(" ")).forEach(Ru=>{Tu.eventsAnyListeners&&Tu.eventsAnyListeners.length&&Tu.eventsAnyListeners.forEach(Ou=>{Ou.apply(Lu,[Ru,...Bu])}),Tu.eventsListeners&&Tu.eventsListeners[Ru]&&Tu.eventsListeners[Ru].forEach(Ou=>{Ou.apply(Lu,Bu)})}),Tu}};function O1(){const Cu=this;let Tu,Pu;const Bu=Cu.$el;typeof Cu.params.width<"u"&&Cu.params.width!==null?Tu=Cu.params.width:Tu=Bu[0].clientWidth,typeof Cu.params.height<"u"&&Cu.params.height!==null?Pu=Cu.params.height:Pu=Bu[0].clientHeight,!(Tu===0&&Cu.isHorizontal()||Pu===0&&Cu.isVertical())&&(Tu=Tu-parseInt(Bu.css("padding-left")||0,10)-parseInt(Bu.css("padding-right")||0,10),Pu=Pu-parseInt(Bu.css("padding-top")||0,10)-parseInt(Bu.css("padding-bottom")||0,10),Number.isNaN(Tu)&&(Tu=0),Number.isNaN(Pu)&&(Pu=0),Object.assign(Cu,{width:Tu,height:Pu,size:Cu.isHorizontal()?Tu:Pu}))}function j1(){const Cu=this;function Tu(np){return Cu.isHorizontal()?np:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[np]}function Pu(np,rp){return parseFloat(np.getPropertyValue(Tu(rp))||0)}const Bu=Cu.params,{$wrapperEl:Lu,size:Ru,rtlTranslate:Ou,wrongRTL:Du}=Cu,ku=Cu.virtual&&Bu.virtual.enabled,Fu=ku?Cu.virtual.slides.length:Cu.slides.length,Nu=Lu.children(`.${Cu.params.slideClass}`),Gu=ku?Cu.virtual.slides.length:Nu.length;let zu=[];const Hu=[],Wu=[];let _h=Bu.slidesOffsetBefore;typeof _h=="function"&&(_h=Bu.slidesOffsetBefore.call(Cu));let Xc=Bu.slidesOffsetAfter;typeof Xc=="function"&&(Xc=Bu.slidesOffsetAfter.call(Cu));const ju=Cu.snapGrid.length,_c=Cu.slidesGrid.length;let _f=Bu.spaceBetween,ep=-_h,tp=0,op=0;if(typeof Ru>"u")return;typeof _f=="string"&&_f.indexOf("%")>=0&&(_f=parseFloat(_f.replace("%",""))/100*Ru),Cu.virtualSize=-_f,Ou?Nu.css({marginLeft:"",marginBottom:"",marginTop:""}):Nu.css({marginRight:"",marginBottom:"",marginTop:""}),Bu.centeredSlides&&Bu.cssMode&&(ji(Cu.wrapperEl,"--swiper-centered-offset-before",""),ji(Cu.wrapperEl,"--swiper-centered-offset-after",""));const lp=Bu.grid&&Bu.grid.rows>1&&Cu.grid;lp&&Cu.grid.initSlides(Gu);let up;const hp=Bu.slidesPerView==="auto"&&Bu.breakpoints&&Object.keys(Bu.breakpoints).filter(np=>typeof Bu.breakpoints[np].slidesPerView<"u").length>0;for(let np=0;np<Gu;np+=1){up=0;const rp=Nu.eq(np);if(lp&&Cu.grid.updateSlide(np,rp,Gu,Tu),rp.css("display")!=="none"){if(Bu.slidesPerView==="auto"){hp&&(Nu[np].style[Tu("width")]="");const ip=getComputedStyle(rp[0]),ap=rp[0].style.transform,sp=rp[0].style.webkitTransform;if(ap&&(rp[0].style.transform="none"),sp&&(rp[0].style.webkitTransform="none"),Bu.roundLengths)up=Cu.isHorizontal()?rp.outerWidth(!0):rp.outerHeight(!0);else{const cp=Pu(ip,"width"),dp=Pu(ip,"padding-left"),fp=Pu(ip,"padding-right"),vp=Pu(ip,"margin-left"),_p=Pu(ip,"margin-right"),wp=ip.getPropertyValue("box-sizing");if(wp&&wp==="border-box")up=cp+vp+_p;else{const{clientWidth:Dp,offsetWidth:Pp}=rp[0];up=cp+dp+fp+vp+_p+(Pp-Dp)}}ap&&(rp[0].style.transform=ap),sp&&(rp[0].style.webkitTransform=sp),Bu.roundLengths&&(up=Math.floor(up))}else up=(Ru-(Bu.slidesPerView-1)*_f)/Bu.slidesPerView,Bu.roundLengths&&(up=Math.floor(up)),Nu[np]&&(Nu[np].style[Tu("width")]=`${up}px`);Nu[np]&&(Nu[np].swiperSlideSize=up),Wu.push(up),Bu.centeredSlides?(ep=ep+up/2+tp/2+_f,tp===0&&np!==0&&(ep=ep-Ru/2-_f),np===0&&(ep=ep-Ru/2-_f),Math.abs(ep)<1/1e3&&(ep=0),Bu.roundLengths&&(ep=Math.floor(ep)),op%Bu.slidesPerGroup===0&&zu.push(ep),Hu.push(ep)):(Bu.roundLengths&&(ep=Math.floor(ep)),(op-Math.min(Cu.params.slidesPerGroupSkip,op))%Cu.params.slidesPerGroup===0&&zu.push(ep),Hu.push(ep),ep=ep+up+_f),Cu.virtualSize+=up+_f,tp=up,op+=1}}if(Cu.virtualSize=Math.max(Cu.virtualSize,Ru)+Xc,Ou&&Du&&(Bu.effect==="slide"||Bu.effect==="coverflow")&&Lu.css({width:`${Cu.virtualSize+Bu.spaceBetween}px`}),Bu.setWrapperSize&&Lu.css({[Tu("width")]:`${Cu.virtualSize+Bu.spaceBetween}px`}),lp&&Cu.grid.updateWrapperSize(up,zu,Tu),!Bu.centeredSlides){const np=[];for(let rp=0;rp<zu.length;rp+=1){let ip=zu[rp];Bu.roundLengths&&(ip=Math.floor(ip)),zu[rp]<=Cu.virtualSize-Ru&&np.push(ip)}zu=np,Math.floor(Cu.virtualSize-Ru)-Math.floor(zu[zu.length-1])>1&&zu.push(Cu.virtualSize-Ru)}if(zu.length===0&&(zu=[0]),Bu.spaceBetween!==0){const np=Cu.isHorizontal()&&Ou?"marginLeft":Tu("marginRight");Nu.filter((rp,ip)=>Bu.cssMode?ip!==Nu.length-1:!0).css({[np]:`${_f}px`})}if(Bu.centeredSlides&&Bu.centeredSlidesBounds){let np=0;Wu.forEach(ip=>{np+=ip+(Bu.spaceBetween?Bu.spaceBetween:0)}),np-=Bu.spaceBetween;const rp=np-Ru;zu=zu.map(ip=>ip<0?-_h:ip>rp?rp+Xc:ip)}if(Bu.centerInsufficientSlides){let np=0;if(Wu.forEach(rp=>{np+=rp+(Bu.spaceBetween?Bu.spaceBetween:0)}),np-=Bu.spaceBetween,np<Ru){const rp=(Ru-np)/2;zu.forEach((ip,ap)=>{zu[ap]=ip-rp}),Hu.forEach((ip,ap)=>{Hu[ap]=ip+rp})}}if(Object.assign(Cu,{slides:Nu,snapGrid:zu,slidesGrid:Hu,slidesSizesGrid:Wu}),Bu.centeredSlides&&Bu.cssMode&&!Bu.centeredSlidesBounds){ji(Cu.wrapperEl,"--swiper-centered-offset-before",`${-zu[0]}px`),ji(Cu.wrapperEl,"--swiper-centered-offset-after",`${Cu.size/2-Wu[Wu.length-1]/2}px`);const np=-Cu.snapGrid[0],rp=-Cu.slidesGrid[0];Cu.snapGrid=Cu.snapGrid.map(ip=>ip+np),Cu.slidesGrid=Cu.slidesGrid.map(ip=>ip+rp)}if(Gu!==Fu&&Cu.emit("slidesLengthChange"),zu.length!==ju&&(Cu.params.watchOverflow&&Cu.checkOverflow(),Cu.emit("snapGridLengthChange")),Hu.length!==_c&&Cu.emit("slidesGridLengthChange"),Bu.watchSlidesProgress&&Cu.updateSlidesOffset(),!ku&&!Bu.cssMode&&(Bu.effect==="slide"||Bu.effect==="fade")){const np=`${Bu.containerModifierClass}backface-hidden`,rp=Cu.$el.hasClass(np);Gu<=Bu.maxBackfaceHiddenSlides?rp||Cu.$el.addClass(np):rp&&Cu.$el.removeClass(np)}}function B1(Cu){const Tu=this,Pu=[],Bu=Tu.virtual&&Tu.params.virtual.enabled;let Lu=0,Ru;typeof Cu=="number"?Tu.setTransition(Cu):Cu===!0&&Tu.setTransition(Tu.params.speed);const Ou=Du=>Bu?Tu.slides.filter(ku=>parseInt(ku.getAttribute("data-swiper-slide-index"),10)===Du)[0]:Tu.slides.eq(Du)[0];if(Tu.params.slidesPerView!=="auto"&&Tu.params.slidesPerView>1)if(Tu.params.centeredSlides)(Tu.visibleSlides||re([])).each(Du=>{Pu.push(Du)});else for(Ru=0;Ru<Math.ceil(Tu.params.slidesPerView);Ru+=1){const Du=Tu.activeIndex+Ru;if(Du>Tu.slides.length&&!Bu)break;Pu.push(Ou(Du))}else Pu.push(Ou(Tu.activeIndex));for(Ru=0;Ru<Pu.length;Ru+=1)if(typeof Pu[Ru]<"u"){const Du=Pu[Ru].offsetHeight;Lu=Du>Lu?Du:Lu}(Lu||Lu===0)&&Tu.$wrapperEl.css("height",`${Lu}px`)}function R1(){const Cu=this,Tu=Cu.slides;for(let Pu=0;Pu<Tu.length;Pu+=1)Tu[Pu].swiperSlideOffset=Cu.isHorizontal()?Tu[Pu].offsetLeft:Tu[Pu].offsetTop}function H1(Cu=this&&this.translate||0){const Tu=this,Pu=Tu.params,{slides:Bu,rtlTranslate:Lu,snapGrid:Ru}=Tu;if(Bu.length===0)return;typeof Bu[0].swiperSlideOffset>"u"&&Tu.updateSlidesOffset();let Ou=-Cu;Lu&&(Ou=Cu),Bu.removeClass(Pu.slideVisibleClass),Tu.visibleSlidesIndexes=[],Tu.visibleSlides=[];for(let Du=0;Du<Bu.length;Du+=1){const ku=Bu[Du];let Fu=ku.swiperSlideOffset;Pu.cssMode&&Pu.centeredSlides&&(Fu-=Bu[0].swiperSlideOffset);const Nu=(Ou+(Pu.centeredSlides?Tu.minTranslate():0)-Fu)/(ku.swiperSlideSize+Pu.spaceBetween),Gu=(Ou-Ru[0]+(Pu.centeredSlides?Tu.minTranslate():0)-Fu)/(ku.swiperSlideSize+Pu.spaceBetween),zu=-(Ou-Fu),Hu=zu+Tu.slidesSizesGrid[Du];(zu>=0&&zu<Tu.size-1||Hu>1&&Hu<=Tu.size||zu<=0&&Hu>=Tu.size)&&(Tu.visibleSlides.push(ku),Tu.visibleSlidesIndexes.push(Du),Bu.eq(Du).addClass(Pu.slideVisibleClass)),ku.progress=Lu?-Nu:Nu,ku.originalProgress=Lu?-Gu:Gu}Tu.visibleSlides=re(Tu.visibleSlides)}function N1(Cu){const Tu=this;if(typeof Cu>"u"){const Fu=Tu.rtlTranslate?-1:1;Cu=Tu&&Tu.translate&&Tu.translate*Fu||0}const Pu=Tu.params,Bu=Tu.maxTranslate()-Tu.minTranslate();let{progress:Lu,isBeginning:Ru,isEnd:Ou}=Tu;const Du=Ru,ku=Ou;Bu===0?(Lu=0,Ru=!0,Ou=!0):(Lu=(Cu-Tu.minTranslate())/Bu,Ru=Lu<=0,Ou=Lu>=1),Object.assign(Tu,{progress:Lu,isBeginning:Ru,isEnd:Ou}),(Pu.watchSlidesProgress||Pu.centeredSlides&&Pu.autoHeight)&&Tu.updateSlidesProgress(Cu),Ru&&!Du&&Tu.emit("reachBeginning toEdge"),Ou&&!ku&&Tu.emit("reachEnd toEdge"),(Du&&!Ru||ku&&!Ou)&&Tu.emit("fromEdge"),Tu.emit("progress",Lu)}function G1(){const Cu=this,{slides:Tu,params:Pu,$wrapperEl:Bu,activeIndex:Lu,realIndex:Ru}=Cu,Ou=Cu.virtual&&Pu.virtual.enabled;Tu.removeClass(`${Pu.slideActiveClass} ${Pu.slideNextClass} ${Pu.slidePrevClass} ${Pu.slideDuplicateActiveClass} ${Pu.slideDuplicateNextClass} ${Pu.slideDuplicatePrevClass}`);let Du;Ou?Du=Cu.$wrapperEl.find(`.${Pu.slideClass}[data-swiper-slide-index="${Lu}"]`):Du=Tu.eq(Lu),Du.addClass(Pu.slideActiveClass),Pu.loop&&(Du.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${Ru}"]`).addClass(Pu.slideDuplicateActiveClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${Ru}"]`).addClass(Pu.slideDuplicateActiveClass));let ku=Du.nextAll(`.${Pu.slideClass}`).eq(0).addClass(Pu.slideNextClass);Pu.loop&&ku.length===0&&(ku=Tu.eq(0),ku.addClass(Pu.slideNextClass));let Fu=Du.prevAll(`.${Pu.slideClass}`).eq(0).addClass(Pu.slidePrevClass);Pu.loop&&Fu.length===0&&(Fu=Tu.eq(-1),Fu.addClass(Pu.slidePrevClass)),Pu.loop&&(ku.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${ku.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicateNextClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${ku.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicateNextClass),Fu.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${Fu.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicatePrevClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${Fu.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicatePrevClass)),Cu.emitSlidesClasses()}function F1(Cu){const Tu=this,Pu=Tu.rtlTranslate?Tu.translate:-Tu.translate,{slidesGrid:Bu,snapGrid:Lu,params:Ru,activeIndex:Ou,realIndex:Du,snapIndex:ku}=Tu;let Fu=Cu,Nu;if(typeof Fu>"u"){for(let zu=0;zu<Bu.length;zu+=1)typeof Bu[zu+1]<"u"?Pu>=Bu[zu]&&Pu<Bu[zu+1]-(Bu[zu+1]-Bu[zu])/2?Fu=zu:Pu>=Bu[zu]&&Pu<Bu[zu+1]&&(Fu=zu+1):Pu>=Bu[zu]&&(Fu=zu);Ru.normalizeSlideIndex&&(Fu<0||typeof Fu>"u")&&(Fu=0)}if(Lu.indexOf(Pu)>=0)Nu=Lu.indexOf(Pu);else{const zu=Math.min(Ru.slidesPerGroupSkip,Fu);Nu=zu+Math.floor((Fu-zu)/Ru.slidesPerGroup)}if(Nu>=Lu.length&&(Nu=Lu.length-1),Fu===Ou){Nu!==ku&&(Tu.snapIndex=Nu,Tu.emit("snapIndexChange"));return}const Gu=parseInt(Tu.slides.eq(Fu).attr("data-swiper-slide-index")||Fu,10);Object.assign(Tu,{snapIndex:Nu,realIndex:Gu,previousIndex:Ou,activeIndex:Fu}),Tu.emit("activeIndexChange"),Tu.emit("snapIndexChange"),Du!==Gu&&Tu.emit("realIndexChange"),(Tu.initialized||Tu.params.runCallbacksOnInit)&&Tu.emit("slideChange")}function W1(Cu){const Tu=this,Pu=Tu.params,Bu=re(Cu).closest(`.${Pu.slideClass}`)[0];let Lu=!1,Ru;if(Bu){for(let Ou=0;Ou<Tu.slides.length;Ou+=1)if(Tu.slides[Ou]===Bu){Lu=!0,Ru=Ou;break}}if(Bu&&Lu)Tu.clickedSlide=Bu,Tu.virtual&&Tu.params.virtual.enabled?Tu.clickedIndex=parseInt(re(Bu).attr("data-swiper-slide-index"),10):Tu.clickedIndex=Ru;else{Tu.clickedSlide=void 0,Tu.clickedIndex=void 0;return}Pu.slideToClickedSlide&&Tu.clickedIndex!==void 0&&Tu.clickedIndex!==Tu.activeIndex&&Tu.slideToClickedSlide()}const Q1={updateSize:O1,updateSlides:j1,updateAutoHeight:B1,updateSlidesOffset:R1,updateSlidesProgress:H1,updateProgress:N1,updateSlidesClasses:G1,updateActiveIndex:F1,updateClickedSlide:W1};function _1(Cu=this.isHorizontal()?"x":"y"){const Tu=this,{params:Pu,rtlTranslate:Bu,translate:Lu,$wrapperEl:Ru}=Tu;if(Pu.virtualTranslate)return Bu?-Lu:Lu;if(Pu.cssMode)return Lu;let Ou=P1(Ru[0],Cu);return Bu&&(Ou=-Ou),Ou||0}function X1(Cu,Tu){const Pu=this,{rtlTranslate:Bu,params:Lu,$wrapperEl:Ru,wrapperEl:Ou,progress:Du}=Pu;let ku=0,Fu=0;const Nu=0;Pu.isHorizontal()?ku=Bu?-Cu:Cu:Fu=Cu,Lu.roundLengths&&(ku=Math.floor(ku),Fu=Math.floor(Fu)),Lu.cssMode?Ou[Pu.isHorizontal()?"scrollLeft":"scrollTop"]=Pu.isHorizontal()?-ku:-Fu:Lu.virtualTranslate||Ru.transform(`translate3d(${ku}px, ${Fu}px, ${Nu}px)`),Pu.previousTranslate=Pu.translate,Pu.translate=Pu.isHorizontal()?ku:Fu;let Gu;const zu=Pu.maxTranslate()-Pu.minTranslate();zu===0?Gu=0:Gu=(Cu-Pu.minTranslate())/zu,Gu!==Du&&Pu.updateProgress(Cu),Pu.emit("setTranslate",Pu.translate,Tu)}function Y1(){return-this.snapGrid[0]}function V1(){return-this.snapGrid[this.snapGrid.length-1]}function U1(Cu=0,Tu=this.params.speed,Pu=!0,Bu=!0,Lu){const Ru=this,{params:Ou,wrapperEl:Du}=Ru;if(Ru.animating&&Ou.preventInteractionOnTransition)return!1;const ku=Ru.minTranslate(),Fu=Ru.maxTranslate();let Nu;if(Bu&&Cu>ku?Nu=ku:Bu&&Cu<Fu?Nu=Fu:Nu=Cu,Ru.updateProgress(Nu),Ou.cssMode){const Gu=Ru.isHorizontal();if(Tu===0)Du[Gu?"scrollLeft":"scrollTop"]=-Nu;else{if(!Ru.support.smoothScroll)return Bd({swiper:Ru,targetPosition:-Nu,side:Gu?"left":"top"}),!0;Du.scrollTo({[Gu?"left":"top"]:-Nu,behavior:"smooth"})}return!0}return Tu===0?(Ru.setTransition(0),Ru.setTranslate(Nu),Pu&&(Ru.emit("beforeTransitionStart",Tu,Lu),Ru.emit("transitionEnd"))):(Ru.setTransition(Tu),Ru.setTranslate(Nu),Pu&&(Ru.emit("beforeTransitionStart",Tu,Lu),Ru.emit("transitionStart")),Ru.animating||(Ru.animating=!0,Ru.onTranslateToWrapperTransitionEnd||(Ru.onTranslateToWrapperTransitionEnd=function(Gu){!Ru||Ru.destroyed||Gu.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd),Ru.onTranslateToWrapperTransitionEnd=null,delete Ru.onTranslateToWrapperTransitionEnd,Pu&&Ru.emit("transitionEnd"))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd))),!0}const Z1={getTranslate:_1,setTranslate:X1,minTranslate:Y1,maxTranslate:V1,translateTo:U1};function J1(Cu,Tu){const Pu=this;Pu.params.cssMode||Pu.$wrapperEl.transition(Cu),Pu.emit("setTransition",Cu,Tu)}function Hd({swiper:Cu,runCallbacks:Tu,direction:Pu,step:Bu}){const{activeIndex:Lu,previousIndex:Ru}=Cu;let Ou=Pu;if(Ou||(Lu>Ru?Ou="next":Lu<Ru?Ou="prev":Ou="reset"),Cu.emit(`transition${Bu}`),Tu&&Lu!==Ru){if(Ou==="reset"){Cu.emit(`slideResetTransition${Bu}`);return}Cu.emit(`slideChangeTransition${Bu}`),Ou==="next"?Cu.emit(`slideNextTransition${Bu}`):Cu.emit(`slidePrevTransition${Bu}`)}}function q1(Cu=!0,Tu){const Pu=this,{params:Bu}=Pu;Bu.cssMode||(Bu.autoHeight&&Pu.updateAutoHeight(),Hd({swiper:Pu,runCallbacks:Cu,direction:Tu,step:"Start"}))}function K1(Cu=!0,Tu){const Pu=this,{params:Bu}=Pu;Pu.animating=!1,!Bu.cssMode&&(Pu.setTransition(0),Hd({swiper:Pu,runCallbacks:Cu,direction:Tu,step:"End"}))}const $1={setTransition:J1,transitionStart:q1,transitionEnd:K1};function eb(Cu=0,Tu=this.params.speed,Pu=!0,Bu,Lu){if(typeof Cu!="number"&&typeof Cu!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof Cu}] given.`);if(typeof Cu=="string"){const _f=parseInt(Cu,10);if(!isFinite(_f))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${Cu}] given.`);Cu=_f}const Ru=this;let Ou=Cu;Ou<0&&(Ou=0);const{params:Du,snapGrid:ku,slidesGrid:Fu,previousIndex:Nu,activeIndex:Gu,rtlTranslate:zu,wrapperEl:Hu,enabled:Wu}=Ru;if(Ru.animating&&Du.preventInteractionOnTransition||!Wu&&!Bu&&!Lu)return!1;const _h=Math.min(Ru.params.slidesPerGroupSkip,Ou);let Xc=_h+Math.floor((Ou-_h)/Ru.params.slidesPerGroup);Xc>=ku.length&&(Xc=ku.length-1);const ju=-ku[Xc];if(Du.normalizeSlideIndex)for(let _f=0;_f<Fu.length;_f+=1){const ep=-Math.floor(ju*100),tp=Math.floor(Fu[_f]*100),op=Math.floor(Fu[_f+1]*100);typeof Fu[_f+1]<"u"?ep>=tp&&ep<op-(op-tp)/2?Ou=_f:ep>=tp&&ep<op&&(Ou=_f+1):ep>=tp&&(Ou=_f)}if(Ru.initialized&&Ou!==Gu&&(!Ru.allowSlideNext&&ju<Ru.translate&&ju<Ru.minTranslate()||!Ru.allowSlidePrev&&ju>Ru.translate&&ju>Ru.maxTranslate()&&(Gu||0)!==Ou))return!1;Ou!==(Nu||0)&&Pu&&Ru.emit("beforeSlideChangeStart"),Ru.updateProgress(ju);let _c;if(Ou>Gu?_c="next":Ou<Gu?_c="prev":_c="reset",zu&&-ju===Ru.translate||!zu&&ju===Ru.translate)return Ru.updateActiveIndex(Ou),Du.autoHeight&&Ru.updateAutoHeight(),Ru.updateSlidesClasses(),Du.effect!=="slide"&&Ru.setTranslate(ju),_c!=="reset"&&(Ru.transitionStart(Pu,_c),Ru.transitionEnd(Pu,_c)),!1;if(Du.cssMode){const _f=Ru.isHorizontal(),ep=zu?ju:-ju;if(Tu===0){const tp=Ru.virtual&&Ru.params.virtual.enabled;tp&&(Ru.wrapperEl.style.scrollSnapType="none",Ru._immediateVirtual=!0),Hu[_f?"scrollLeft":"scrollTop"]=ep,tp&&requestAnimationFrame(()=>{Ru.wrapperEl.style.scrollSnapType="",Ru._swiperImmediateVirtual=!1})}else{if(!Ru.support.smoothScroll)return Bd({swiper:Ru,targetPosition:ep,side:_f?"left":"top"}),!0;Hu.scrollTo({[_f?"left":"top"]:ep,behavior:"smooth"})}return!0}return Ru.setTransition(Tu),Ru.setTranslate(ju),Ru.updateActiveIndex(Ou),Ru.updateSlidesClasses(),Ru.emit("beforeTransitionStart",Tu,Bu),Ru.transitionStart(Pu,_c),Tu===0?Ru.transitionEnd(Pu,_c):Ru.animating||(Ru.animating=!0,Ru.onSlideToWrapperTransitionEnd||(Ru.onSlideToWrapperTransitionEnd=function(_f){!Ru||Ru.destroyed||_f.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd),Ru.onSlideToWrapperTransitionEnd=null,delete Ru.onSlideToWrapperTransitionEnd,Ru.transitionEnd(Pu,_c))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd)),!0}function tb(Cu=0,Tu=this.params.speed,Pu=!0,Bu){if(typeof Cu=="string"){const Ou=parseInt(Cu,10);if(!isFinite(Ou))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${Cu}] given.`);Cu=Ou}const Lu=this;let Ru=Cu;return Lu.params.loop&&(Ru+=Lu.loopedSlides),Lu.slideTo(Ru,Tu,Pu,Bu)}function nb(Cu=this.params.speed,Tu=!0,Pu){const Bu=this,{animating:Lu,enabled:Ru,params:Ou}=Bu;if(!Ru)return Bu;let Du=Ou.slidesPerGroup;Ou.slidesPerView==="auto"&&Ou.slidesPerGroup===1&&Ou.slidesPerGroupAuto&&(Du=Math.max(Bu.slidesPerViewDynamic("current",!0),1));const ku=Bu.activeIndex<Ou.slidesPerGroupSkip?1:Du;if(Ou.loop){if(Lu&&Ou.loopPreventsSlide)return!1;Bu.loopFix(),Bu._clientLeft=Bu.$wrapperEl[0].clientLeft}return Ou.rewind&&Bu.isEnd?Bu.slideTo(0,Cu,Tu,Pu):Bu.slideTo(Bu.activeIndex+ku,Cu,Tu,Pu)}function ib(Cu=this.params.speed,Tu=!0,Pu){const Bu=this,{params:Lu,animating:Ru,snapGrid:Ou,slidesGrid:Du,rtlTranslate:ku,enabled:Fu}=Bu;if(!Fu)return Bu;if(Lu.loop){if(Ru&&Lu.loopPreventsSlide)return!1;Bu.loopFix(),Bu._clientLeft=Bu.$wrapperEl[0].clientLeft}const Nu=ku?Bu.translate:-Bu.translate;function Gu(Xc){return Xc<0?-Math.floor(Math.abs(Xc)):Math.floor(Xc)}const zu=Gu(Nu),Hu=Ou.map(Xc=>Gu(Xc));let Wu=Ou[Hu.indexOf(zu)-1];if(typeof Wu>"u"&&Lu.cssMode){let Xc;Ou.forEach((ju,_c)=>{zu>=ju&&(Xc=_c)}),typeof Xc<"u"&&(Wu=Ou[Xc>0?Xc-1:Xc])}let _h=0;if(typeof Wu<"u"&&(_h=Du.indexOf(Wu),_h<0&&(_h=Bu.activeIndex-1),Lu.slidesPerView==="auto"&&Lu.slidesPerGroup===1&&Lu.slidesPerGroupAuto&&(_h=_h-Bu.slidesPerViewDynamic("previous",!0)+1,_h=Math.max(_h,0))),Lu.rewind&&Bu.isBeginning){const Xc=Bu.params.virtual&&Bu.params.virtual.enabled&&Bu.virtual?Bu.virtual.slides.length-1:Bu.slides.length-1;return Bu.slideTo(Xc,Cu,Tu,Pu)}return Bu.slideTo(_h,Cu,Tu,Pu)}function sb(Cu=this.params.speed,Tu=!0,Pu){const Bu=this;return Bu.slideTo(Bu.activeIndex,Cu,Tu,Pu)}function ob(Cu=this.params.speed,Tu=!0,Pu,Bu=.5){const Lu=this;let Ru=Lu.activeIndex;const Ou=Math.min(Lu.params.slidesPerGroupSkip,Ru),Du=Ou+Math.floor((Ru-Ou)/Lu.params.slidesPerGroup),ku=Lu.rtlTranslate?Lu.translate:-Lu.translate;if(ku>=Lu.snapGrid[Du]){const Fu=Lu.snapGrid[Du],Nu=Lu.snapGrid[Du+1];ku-Fu>(Nu-Fu)*Bu&&(Ru+=Lu.params.slidesPerGroup)}else{const Fu=Lu.snapGrid[Du-1],Nu=Lu.snapGrid[Du];ku-Fu<=(Nu-Fu)*Bu&&(Ru-=Lu.params.slidesPerGroup)}return Ru=Math.max(Ru,0),Ru=Math.min(Ru,Lu.slidesGrid.length-1),Lu.slideTo(Ru,Cu,Tu,Pu)}function rb(){const Cu=this,{params:Tu,$wrapperEl:Pu}=Cu,Bu=Tu.slidesPerView==="auto"?Cu.slidesPerViewDynamic():Tu.slidesPerView;let Lu=Cu.clickedIndex,Ru;if(Tu.loop){if(Cu.animating)return;Ru=parseInt(re(Cu.clickedSlide).attr("data-swiper-slide-index"),10),Tu.centeredSlides?Lu<Cu.loopedSlides-Bu/2||Lu>Cu.slides.length-Cu.loopedSlides+Bu/2?(Cu.loopFix(),Lu=Pu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),wo(()=>{Cu.slideTo(Lu)})):Cu.slideTo(Lu):Lu>Cu.slides.length-Bu?(Cu.loopFix(),Lu=Pu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),wo(()=>{Cu.slideTo(Lu)})):Cu.slideTo(Lu)}else Cu.slideTo(Lu)}const ab={slideTo:eb,slideToLoop:tb,slideNext:nb,slidePrev:ib,slideReset:sb,slideToClosest:ob,slideToClickedSlide:rb};function lb(){const Cu=this,Tu=ft(),{params:Pu,$wrapperEl:Bu}=Cu,Lu=Bu.children().length>0?re(Bu.children()[0].parentNode):Bu;Lu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}`).remove();let Ru=Lu.children(`.${Pu.slideClass}`);if(Pu.loopFillGroupWithBlank){const ku=Pu.slidesPerGroup-Ru.length%Pu.slidesPerGroup;if(ku!==Pu.slidesPerGroup){for(let Fu=0;Fu<ku;Fu+=1){const Nu=re(Tu.createElement("div")).addClass(`${Pu.slideClass} ${Pu.slideBlankClass}`);Lu.append(Nu)}Ru=Lu.children(`.${Pu.slideClass}`)}}Pu.slidesPerView==="auto"&&!Pu.loopedSlides&&(Pu.loopedSlides=Ru.length),Cu.loopedSlides=Math.ceil(parseFloat(Pu.loopedSlides||Pu.slidesPerView,10)),Cu.loopedSlides+=Pu.loopAdditionalSlides,Cu.loopedSlides>Ru.length&&Cu.params.loopedSlidesLimit&&(Cu.loopedSlides=Ru.length);const Ou=[],Du=[];Ru.each((ku,Fu)=>{re(ku).attr("data-swiper-slide-index",Fu)});for(let ku=0;ku<Cu.loopedSlides;ku+=1){const Fu=ku-Math.floor(ku/Ru.length)*Ru.length;Du.push(Ru.eq(Fu)[0]),Ou.unshift(Ru.eq(Ru.length-Fu-1)[0])}for(let ku=0;ku<Du.length;ku+=1)Lu.append(re(Du[ku].cloneNode(!0)).addClass(Pu.slideDuplicateClass));for(let ku=Ou.length-1;ku>=0;ku-=1)Lu.prepend(re(Ou[ku].cloneNode(!0)).addClass(Pu.slideDuplicateClass))}function cb(){const Cu=this;Cu.emit("beforeLoopFix");const{activeIndex:Tu,slides:Pu,loopedSlides:Bu,allowSlidePrev:Lu,allowSlideNext:Ru,snapGrid:Ou,rtlTranslate:Du}=Cu;let ku;Cu.allowSlidePrev=!0,Cu.allowSlideNext=!0;const Fu=-Ou[Tu]-Cu.getTranslate();Tu<Bu?(ku=Pu.length-Bu*3+Tu,ku+=Bu,Cu.slideTo(ku,0,!1,!0)&&Fu!==0&&Cu.setTranslate((Du?-Cu.translate:Cu.translate)-Fu)):Tu>=Pu.length-Bu&&(ku=-Pu.length+Tu+Bu,ku+=Bu,Cu.slideTo(ku,0,!1,!0)&&Fu!==0&&Cu.setTranslate((Du?-Cu.translate:Cu.translate)-Fu)),Cu.allowSlidePrev=Lu,Cu.allowSlideNext=Ru,Cu.emit("loopFix")}function db(){const Cu=this,{$wrapperEl:Tu,params:Pu,slides:Bu}=Cu;Tu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass},.${Pu.slideClass}.${Pu.slideBlankClass}`).remove(),Bu.removeAttr("data-swiper-slide-index")}const ub={loopCreate:lb,loopFix:cb,loopDestroy:db};function fb(Cu){const Tu=this;if(Tu.support.touch||!Tu.params.simulateTouch||Tu.params.watchOverflow&&Tu.isLocked||Tu.params.cssMode)return;const Pu=Tu.params.touchEventsTarget==="container"?Tu.el:Tu.wrapperEl;Pu.style.cursor="move",Pu.style.cursor=Cu?"grabbing":"grab"}function hb(){const Cu=this;Cu.support.touch||Cu.params.watchOverflow&&Cu.isLocked||Cu.params.cssMode||(Cu[Cu.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const pb={setGrabCursor:fb,unsetGrabCursor:hb};function mb(Cu,Tu=this){function Pu(Bu){if(!Bu||Bu===ft()||Bu===Qe())return null;Bu.assignedSlot&&(Bu=Bu.assignedSlot);const Lu=Bu.closest(Cu);return!Lu&&!Bu.getRootNode?null:Lu||Pu(Bu.getRootNode().host)}return Pu(Tu)}function gb(Cu){const Tu=this,Pu=ft(),Bu=Qe(),Lu=Tu.touchEventsData,{params:Ru,touches:Ou,enabled:Du}=Tu;if(!Du||Tu.animating&&Ru.preventInteractionOnTransition)return;!Tu.animating&&Ru.cssMode&&Ru.loop&&Tu.loopFix();let ku=Cu;ku.originalEvent&&(ku=ku.originalEvent);let Fu=re(ku.target);if(Ru.touchEventsTarget==="wrapper"&&!Fu.closest(Tu.wrapperEl).length||(Lu.isTouchEvent=ku.type==="touchstart",!Lu.isTouchEvent&&"which"in ku&&ku.which===3)||!Lu.isTouchEvent&&"button"in ku&&ku.button>0||Lu.isTouched&&Lu.isMoved)return;const Nu=!!Ru.noSwipingClass&&Ru.noSwipingClass!=="",Gu=Cu.composedPath?Cu.composedPath():Cu.path;Nu&&ku.target&&ku.target.shadowRoot&&Gu&&(Fu=re(Gu[0]));const zu=Ru.noSwipingSelector?Ru.noSwipingSelector:`.${Ru.noSwipingClass}`,Hu=!!(ku.target&&ku.target.shadowRoot);if(Ru.noSwiping&&(Hu?mb(zu,Fu[0]):Fu.closest(zu)[0])){Tu.allowClick=!0;return}if(Ru.swipeHandler&&!Fu.closest(Ru.swipeHandler)[0])return;Ou.currentX=ku.type==="touchstart"?ku.targetTouches[0].pageX:ku.pageX,Ou.currentY=ku.type==="touchstart"?ku.targetTouches[0].pageY:ku.pageY;const Wu=Ou.currentX,_h=Ou.currentY,Xc=Ru.edgeSwipeDetection||Ru.iOSEdgeSwipeDetection,ju=Ru.edgeSwipeThreshold||Ru.iOSEdgeSwipeThreshold;if(Xc&&(Wu<=ju||Wu>=Bu.innerWidth-ju))if(Xc==="prevent")Cu.preventDefault();else return;if(Object.assign(Lu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Ou.startX=Wu,Ou.startY=_h,Lu.touchStartTime=ni(),Tu.allowClick=!0,Tu.updateSize(),Tu.swipeDirection=void 0,Ru.threshold>0&&(Lu.allowThresholdMove=!1),ku.type!=="touchstart"){let _c=!0;Fu.is(Lu.focusableElements)&&(_c=!1,Fu[0].nodeName==="SELECT"&&(Lu.isTouched=!1)),Pu.activeElement&&re(Pu.activeElement).is(Lu.focusableElements)&&Pu.activeElement!==Fu[0]&&Pu.activeElement.blur();const _f=_c&&Tu.allowTouchMove&&Ru.touchStartPreventDefault;(Ru.touchStartForcePreventDefault||_f)&&!Fu[0].isContentEditable&&ku.preventDefault()}Tu.params.freeMode&&Tu.params.freeMode.enabled&&Tu.freeMode&&Tu.animating&&!Ru.cssMode&&Tu.freeMode.onTouchStart(),Tu.emit("touchStart",ku)}function vb(Cu){const Tu=ft(),Pu=this,Bu=Pu.touchEventsData,{params:Lu,touches:Ru,rtlTranslate:Ou,enabled:Du}=Pu;if(!Du)return;let ku=Cu;if(ku.originalEvent&&(ku=ku.originalEvent),!Bu.isTouched){Bu.startMoving&&Bu.isScrolling&&Pu.emit("touchMoveOpposite",ku);return}if(Bu.isTouchEvent&&ku.type!=="touchmove")return;const Fu=ku.type==="touchmove"&&ku.targetTouches&&(ku.targetTouches[0]||ku.changedTouches[0]),Nu=ku.type==="touchmove"?Fu.pageX:ku.pageX,Gu=ku.type==="touchmove"?Fu.pageY:ku.pageY;if(ku.preventedByNestedSwiper){Ru.startX=Nu,Ru.startY=Gu;return}if(!Pu.allowTouchMove){re(ku.target).is(Bu.focusableElements)||(Pu.allowClick=!1),Bu.isTouched&&(Object.assign(Ru,{startX:Nu,startY:Gu,currentX:Nu,currentY:Gu}),Bu.touchStartTime=ni());return}if(Bu.isTouchEvent&&Lu.touchReleaseOnEdges&&!Lu.loop){if(Pu.isVertical()){if(Gu<Ru.startY&&Pu.translate<=Pu.maxTranslate()||Gu>Ru.startY&&Pu.translate>=Pu.minTranslate()){Bu.isTouched=!1,Bu.isMoved=!1;return}}else if(Nu<Ru.startX&&Pu.translate<=Pu.maxTranslate()||Nu>Ru.startX&&Pu.translate>=Pu.minTranslate())return}if(Bu.isTouchEvent&&Tu.activeElement&&ku.target===Tu.activeElement&&re(ku.target).is(Bu.focusableElements)){Bu.isMoved=!0,Pu.allowClick=!1;return}if(Bu.allowTouchCallbacks&&Pu.emit("touchMove",ku),ku.targetTouches&&ku.targetTouches.length>1)return;Ru.currentX=Nu,Ru.currentY=Gu;const zu=Ru.currentX-Ru.startX,Hu=Ru.currentY-Ru.startY;if(Pu.params.threshold&&Math.sqrt(zu**2+Hu**2)<Pu.params.threshold)return;if(typeof Bu.isScrolling>"u"){let ju;Pu.isHorizontal()&&Ru.currentY===Ru.startY||Pu.isVertical()&&Ru.currentX===Ru.startX?Bu.isScrolling=!1:zu*zu+Hu*Hu>=25&&(ju=Math.atan2(Math.abs(Hu),Math.abs(zu))*180/Math.PI,Bu.isScrolling=Pu.isHorizontal()?ju>Lu.touchAngle:90-ju>Lu.touchAngle)}if(Bu.isScrolling&&Pu.emit("touchMoveOpposite",ku),typeof Bu.startMoving>"u"&&(Ru.currentX!==Ru.startX||Ru.currentY!==Ru.startY)&&(Bu.startMoving=!0),Bu.isScrolling){Bu.isTouched=!1;return}if(!Bu.startMoving)return;Pu.allowClick=!1,!Lu.cssMode&&ku.cancelable&&ku.preventDefault(),Lu.touchMoveStopPropagation&&!Lu.nested&&ku.stopPropagation(),Bu.isMoved||(Lu.loop&&!Lu.cssMode&&Pu.loopFix(),Bu.startTranslate=Pu.getTranslate(),Pu.setTransition(0),Pu.animating&&Pu.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Bu.allowMomentumBounce=!1,Lu.grabCursor&&(Pu.allowSlideNext===!0||Pu.allowSlidePrev===!0)&&Pu.setGrabCursor(!0),Pu.emit("sliderFirstMove",ku)),Pu.emit("sliderMove",ku),Bu.isMoved=!0;let Wu=Pu.isHorizontal()?zu:Hu;Ru.diff=Wu,Wu*=Lu.touchRatio,Ou&&(Wu=-Wu),Pu.swipeDirection=Wu>0?"prev":"next",Bu.currentTranslate=Wu+Bu.startTranslate;let _h=!0,Xc=Lu.resistanceRatio;if(Lu.touchReleaseOnEdges&&(Xc=0),Wu>0&&Bu.currentTranslate>Pu.minTranslate()?(_h=!1,Lu.resistance&&(Bu.currentTranslate=Pu.minTranslate()-1+(-Pu.minTranslate()+Bu.startTranslate+Wu)**Xc)):Wu<0&&Bu.currentTranslate<Pu.maxTranslate()&&(_h=!1,Lu.resistance&&(Bu.currentTranslate=Pu.maxTranslate()+1-(Pu.maxTranslate()-Bu.startTranslate-Wu)**Xc)),_h&&(ku.preventedByNestedSwiper=!0),!Pu.allowSlideNext&&Pu.swipeDirection==="next"&&Bu.currentTranslate<Bu.startTranslate&&(Bu.currentTranslate=Bu.startTranslate),!Pu.allowSlidePrev&&Pu.swipeDirection==="prev"&&Bu.currentTranslate>Bu.startTranslate&&(Bu.currentTranslate=Bu.startTranslate),!Pu.allowSlidePrev&&!Pu.allowSlideNext&&(Bu.currentTranslate=Bu.startTranslate),Lu.threshold>0)if(Math.abs(Wu)>Lu.threshold||Bu.allowThresholdMove){if(!Bu.allowThresholdMove){Bu.allowThresholdMove=!0,Ru.startX=Ru.currentX,Ru.startY=Ru.currentY,Bu.currentTranslate=Bu.startTranslate,Ru.diff=Pu.isHorizontal()?Ru.currentX-Ru.startX:Ru.currentY-Ru.startY;return}}else{Bu.currentTranslate=Bu.startTranslate;return}!Lu.followFinger||Lu.cssMode||((Lu.freeMode&&Lu.freeMode.enabled&&Pu.freeMode||Lu.watchSlidesProgress)&&(Pu.updateActiveIndex(),Pu.updateSlidesClasses()),Pu.params.freeMode&&Lu.freeMode.enabled&&Pu.freeMode&&Pu.freeMode.onTouchMove(),Pu.updateProgress(Bu.currentTranslate),Pu.setTranslate(Bu.currentTranslate))}function bb(Cu){const Tu=this,Pu=Tu.touchEventsData,{params:Bu,touches:Lu,rtlTranslate:Ru,slidesGrid:Ou,enabled:Du}=Tu;if(!Du)return;let ku=Cu;if(ku.originalEvent&&(ku=ku.originalEvent),Pu.allowTouchCallbacks&&Tu.emit("touchEnd",ku),Pu.allowTouchCallbacks=!1,!Pu.isTouched){Pu.isMoved&&Bu.grabCursor&&Tu.setGrabCursor(!1),Pu.isMoved=!1,Pu.startMoving=!1;return}Bu.grabCursor&&Pu.isMoved&&Pu.isTouched&&(Tu.allowSlideNext===!0||Tu.allowSlidePrev===!0)&&Tu.setGrabCursor(!1);const Fu=ni(),Nu=Fu-Pu.touchStartTime;if(Tu.allowClick){const _c=ku.path||ku.composedPath&&ku.composedPath();Tu.updateClickedSlide(_c&&_c[0]||ku.target),Tu.emit("tap click",ku),Nu<300&&Fu-Pu.lastClickTime<300&&Tu.emit("doubleTap doubleClick",ku)}if(Pu.lastClickTime=ni(),wo(()=>{Tu.destroyed||(Tu.allowClick=!0)}),!Pu.isTouched||!Pu.isMoved||!Tu.swipeDirection||Lu.diff===0||Pu.currentTranslate===Pu.startTranslate){Pu.isTouched=!1,Pu.isMoved=!1,Pu.startMoving=!1;return}Pu.isTouched=!1,Pu.isMoved=!1,Pu.startMoving=!1;let Gu;if(Bu.followFinger?Gu=Ru?Tu.translate:-Tu.translate:Gu=-Pu.currentTranslate,Bu.cssMode)return;if(Tu.params.freeMode&&Bu.freeMode.enabled){Tu.freeMode.onTouchEnd({currentPos:Gu});return}let zu=0,Hu=Tu.slidesSizesGrid[0];for(let _c=0;_c<Ou.length;_c+=_c<Bu.slidesPerGroupSkip?1:Bu.slidesPerGroup){const _f=_c<Bu.slidesPerGroupSkip-1?1:Bu.slidesPerGroup;typeof Ou[_c+_f]<"u"?Gu>=Ou[_c]&&Gu<Ou[_c+_f]&&(zu=_c,Hu=Ou[_c+_f]-Ou[_c]):Gu>=Ou[_c]&&(zu=_c,Hu=Ou[Ou.length-1]-Ou[Ou.length-2])}let Wu=null,_h=null;Bu.rewind&&(Tu.isBeginning?_h=Tu.params.virtual&&Tu.params.virtual.enabled&&Tu.virtual?Tu.virtual.slides.length-1:Tu.slides.length-1:Tu.isEnd&&(Wu=0));const Xc=(Gu-Ou[zu])/Hu,ju=zu<Bu.slidesPerGroupSkip-1?1:Bu.slidesPerGroup;if(Nu>Bu.longSwipesMs){if(!Bu.longSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.swipeDirection==="next"&&(Xc>=Bu.longSwipesRatio?Tu.slideTo(Bu.rewind&&Tu.isEnd?Wu:zu+ju):Tu.slideTo(zu)),Tu.swipeDirection==="prev"&&(Xc>1-Bu.longSwipesRatio?Tu.slideTo(zu+ju):_h!==null&&Xc<0&&Math.abs(Xc)>Bu.longSwipesRatio?Tu.slideTo(_h):Tu.slideTo(zu))}else{if(!Bu.shortSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.navigation&&(ku.target===Tu.navigation.nextEl||ku.target===Tu.navigation.prevEl)?ku.target===Tu.navigation.nextEl?Tu.slideTo(zu+ju):Tu.slideTo(zu):(Tu.swipeDirection==="next"&&Tu.slideTo(Wu!==null?Wu:zu+ju),Tu.swipeDirection==="prev"&&Tu.slideTo(_h!==null?_h:zu))}}function dl(){const Cu=this,{params:Tu,el:Pu}=Cu;if(Pu&&Pu.offsetWidth===0)return;Tu.breakpoints&&Cu.setBreakpoint();const{allowSlideNext:Bu,allowSlidePrev:Lu,snapGrid:Ru}=Cu;Cu.allowSlideNext=!0,Cu.allowSlidePrev=!0,Cu.updateSize(),Cu.updateSlides(),Cu.updateSlidesClasses(),(Tu.slidesPerView==="auto"||Tu.slidesPerView>1)&&Cu.isEnd&&!Cu.isBeginning&&!Cu.params.centeredSlides?Cu.slideTo(Cu.slides.length-1,0,!1,!0):Cu.slideTo(Cu.activeIndex,0,!1,!0),Cu.autoplay&&Cu.autoplay.running&&Cu.autoplay.paused&&Cu.autoplay.run(),Cu.allowSlidePrev=Lu,Cu.allowSlideNext=Bu,Cu.params.watchOverflow&&Ru!==Cu.snapGrid&&Cu.checkOverflow()}function Ab(Cu){const Tu=this;!Tu.enabled||Tu.allowClick||(Tu.params.preventClicks&&Cu.preventDefault(),Tu.params.preventClicksPropagation&&Tu.animating&&(Cu.stopPropagation(),Cu.stopImmediatePropagation()))}function yb(){const Cu=this,{wrapperEl:Tu,rtlTranslate:Pu,enabled:Bu}=Cu;if(!Bu)return;Cu.previousTranslate=Cu.translate,Cu.isHorizontal()?Cu.translate=-Tu.scrollLeft:Cu.translate=-Tu.scrollTop,Cu.translate===0&&(Cu.translate=0),Cu.updateActiveIndex(),Cu.updateSlidesClasses();let Lu;const Ru=Cu.maxTranslate()-Cu.minTranslate();Ru===0?Lu=0:Lu=(Cu.translate-Cu.minTranslate())/Ru,Lu!==Cu.progress&&Cu.updateProgress(Pu?-Cu.translate:Cu.translate),Cu.emit("setTranslate",Cu.translate,!1)}let ul=!1;function wb(){}const Nd=(Cu,Tu)=>{const Pu=ft(),{params:Bu,touchEvents:Lu,el:Ru,wrapperEl:Ou,device:Du,support:ku}=Cu,Fu=!!Bu.nested,Nu=Tu==="on"?"addEventListener":"removeEventListener",Gu=Tu;if(!ku.touch)Ru[Nu](Lu.start,Cu.onTouchStart,!1),Pu[Nu](Lu.move,Cu.onTouchMove,Fu),Pu[Nu](Lu.end,Cu.onTouchEnd,!1);else{const zu=Lu.start==="touchstart"&&ku.passiveListener&&Bu.passiveListeners?{passive:!0,capture:!1}:!1;Ru[Nu](Lu.start,Cu.onTouchStart,zu),Ru[Nu](Lu.move,Cu.onTouchMove,ku.passiveListener?{passive:!1,capture:Fu}:Fu),Ru[Nu](Lu.end,Cu.onTouchEnd,zu),Lu.cancel&&Ru[Nu](Lu.cancel,Cu.onTouchEnd,zu)}(Bu.preventClicks||Bu.preventClicksPropagation)&&Ru[Nu]("click",Cu.onClick,!0),Bu.cssMode&&Ou[Nu]("scroll",Cu.onScroll),Bu.updateOnWindowResize?Cu[Gu](Du.ios||Du.android?"resize orientationchange observerUpdate":"resize observerUpdate",dl,!0):Cu[Gu]("observerUpdate",dl,!0)};function Eb(){const Cu=this,Tu=ft(),{params:Pu,support:Bu}=Cu;Cu.onTouchStart=gb.bind(Cu),Cu.onTouchMove=vb.bind(Cu),Cu.onTouchEnd=bb.bind(Cu),Pu.cssMode&&(Cu.onScroll=yb.bind(Cu)),Cu.onClick=Ab.bind(Cu),Bu.touch&&!ul&&(Tu.addEventListener("touchstart",wb),ul=!0),Nd(Cu,"on")}function Cb(){Nd(this,"off")}const Pb={attachEvents:Eb,detachEvents:Cb},fl=(Cu,Tu)=>Cu.grid&&Tu.grid&&Tu.grid.rows>1;function xb(){const Cu=this,{activeIndex:Tu,initialized:Pu,loopedSlides:Bu=0,params:Lu,$el:Ru}=Cu,Ou=Lu.breakpoints;if(!Ou||Ou&&Object.keys(Ou).length===0)return;const Du=Cu.getBreakpoint(Ou,Cu.params.breakpointsBase,Cu.el);if(!Du||Cu.currentBreakpoint===Du)return;const ku=(Du in Ou?Ou[Du]:void 0)||Cu.originalParams,Fu=fl(Cu,Lu),Nu=fl(Cu,ku),Gu=Lu.enabled;Fu&&!Nu?(Ru.removeClass(`${Lu.containerModifierClass}grid ${Lu.containerModifierClass}grid-column`),Cu.emitContainerClasses()):!Fu&&Nu&&(Ru.addClass(`${Lu.containerModifierClass}grid`),(ku.grid.fill&&ku.grid.fill==="column"||!ku.grid.fill&&Lu.grid.fill==="column")&&Ru.addClass(`${Lu.containerModifierClass}grid-column`),Cu.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(_h=>{const Xc=Lu[_h]&&Lu[_h].enabled,ju=ku[_h]&&ku[_h].enabled;Xc&&!ju&&Cu[_h].disable(),!Xc&&ju&&Cu[_h].enable()});const zu=ku.direction&&ku.direction!==Lu.direction,Hu=Lu.loop&&(ku.slidesPerView!==Lu.slidesPerView||zu);zu&&Pu&&Cu.changeDirection(),ct(Cu.params,ku);const Wu=Cu.params.enabled;Object.assign(Cu,{allowTouchMove:Cu.params.allowTouchMove,allowSlideNext:Cu.params.allowSlideNext,allowSlidePrev:Cu.params.allowSlidePrev}),Gu&&!Wu?Cu.disable():!Gu&&Wu&&Cu.enable(),Cu.currentBreakpoint=Du,Cu.emit("_beforeBreakpoint",ku),Hu&&Pu&&(Cu.loopDestroy(),Cu.loopCreate(),Cu.updateSlides(),Cu.slideTo(Tu-Bu+Cu.loopedSlides,0,!1)),Cu.emit("breakpoint",ku)}function Ib(Cu,Tu="window",Pu){if(!Cu||Tu==="container"&&!Pu)return;let Bu=!1;const Lu=Qe(),Ru=Tu==="window"?Lu.innerHeight:Pu.clientHeight,Ou=Object.keys(Cu).map(Du=>{if(typeof Du=="string"&&Du.indexOf("@")===0){const ku=parseFloat(Du.substr(1));return{value:Ru*ku,point:Du}}return{value:Du,point:Du}});Ou.sort((Du,ku)=>parseInt(Du.value,10)-parseInt(ku.value,10));for(let Du=0;Du<Ou.length;Du+=1){const{point:ku,value:Fu}=Ou[Du];Tu==="window"?Lu.matchMedia(`(min-width: ${Fu}px)`).matches&&(Bu=ku):Fu<=Pu.clientWidth&&(Bu=ku)}return Bu||"max"}const Tb={setBreakpoint:xb,getBreakpoint:Ib};function Sb(Cu,Tu){const Pu=[];return Cu.forEach(Bu=>{typeof Bu=="object"?Object.keys(Bu).forEach(Lu=>{Bu[Lu]&&Pu.push(Tu+Lu)}):typeof Bu=="string"&&Pu.push(Tu+Bu)}),Pu}function kb(){const Cu=this,{classNames:Tu,params:Pu,rtl:Bu,$el:Lu,device:Ru,support:Ou}=Cu,Du=Sb(["initialized",Pu.direction,{"pointer-events":!Ou.touch},{"free-mode":Cu.params.freeMode&&Pu.freeMode.enabled},{autoheight:Pu.autoHeight},{rtl:Bu},{grid:Pu.grid&&Pu.grid.rows>1},{"grid-column":Pu.grid&&Pu.grid.rows>1&&Pu.grid.fill==="column"},{android:Ru.android},{ios:Ru.ios},{"css-mode":Pu.cssMode},{centered:Pu.cssMode&&Pu.centeredSlides},{"watch-progress":Pu.watchSlidesProgress}],Pu.containerModifierClass);Tu.push(...Du),Lu.addClass([...Tu].join(" ")),Cu.emitContainerClasses()}function Db(){const Cu=this,{$el:Tu,classNames:Pu}=Cu;Tu.removeClass(Pu.join(" ")),Cu.emitContainerClasses()}const Lb={addClasses:kb,removeClasses:Db};function Mb(Cu,Tu,Pu,Bu,Lu,Ru){const Ou=Qe();let Du;function ku(){Ru&&Ru()}!re(Cu).parent("picture")[0]&&(!Cu.complete||!Lu)&&Tu?(Du=new Ou.Image,Du.onload=ku,Du.onerror=ku,Bu&&(Du.sizes=Bu),Pu&&(Du.srcset=Pu),Tu&&(Du.src=Tu)):ku()}function zb(){const Cu=this;Cu.imagesToLoad=Cu.$el.find("img");function Tu(){typeof Cu>"u"||Cu===null||!Cu||Cu.destroyed||(Cu.imagesLoaded!==void 0&&(Cu.imagesLoaded+=1),Cu.imagesLoaded===Cu.imagesToLoad.length&&(Cu.params.updateOnImagesReady&&Cu.update(),Cu.emit("imagesReady")))}for(let Pu=0;Pu<Cu.imagesToLoad.length;Pu+=1){const Bu=Cu.imagesToLoad[Pu];Cu.loadImage(Bu,Bu.currentSrc||Bu.getAttribute("src"),Bu.srcset||Bu.getAttribute("srcset"),Bu.sizes||Bu.getAttribute("sizes"),!0,Tu)}}const Ob={loadImage:Mb,preloadImages:zb};function jb(){const Cu=this,{isLocked:Tu,params:Pu}=Cu,{slidesOffsetBefore:Bu}=Pu;if(Bu){const Lu=Cu.slides.length-1,Ru=Cu.slidesGrid[Lu]+Cu.slidesSizesGrid[Lu]+Bu*2;Cu.isLocked=Cu.size>Ru}else Cu.isLocked=Cu.snapGrid.length===1;Pu.allowSlideNext===!0&&(Cu.allowSlideNext=!Cu.isLocked),Pu.allowSlidePrev===!0&&(Cu.allowSlidePrev=!Cu.isLocked),Tu&&Tu!==Cu.isLocked&&(Cu.isEnd=!1),Tu!==Cu.isLocked&&Cu.emit(Cu.isLocked?"lock":"unlock")}const Bb={checkOverflow:jb},hl={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Rb(Cu,Tu){return function(Pu={}){const Bu=Object.keys(Pu)[0],Lu=Pu[Bu];if(typeof Lu!="object"||Lu===null){ct(Tu,Pu);return}if(["navigation","pagination","scrollbar"].indexOf(Bu)>=0&&Cu[Bu]===!0&&(Cu[Bu]={auto:!0}),!(Bu in Cu&&"enabled"in Lu)){ct(Tu,Pu);return}Cu[Bu]===!0&&(Cu[Bu]={enabled:!0}),typeof Cu[Bu]=="object"&&!("enabled"in Cu[Bu])&&(Cu[Bu].enabled=!0),Cu[Bu]||(Cu[Bu]={enabled:!1}),ct(Tu,Pu)}}const Us={eventsEmitter:z1,update:Q1,translate:Z1,transition:$1,slide:ab,loop:ub,grabCursor:pb,events:Pb,breakpoints:Tb,checkOverflow:Bb,classes:Lb,images:Ob},Zs={};class st{constructor(...Tu){let Pu,Bu;if(Tu.length===1&&Tu[0].constructor&&Object.prototype.toString.call(Tu[0]).slice(8,-1)==="Object"?Bu=Tu[0]:[Pu,Bu]=Tu,Bu||(Bu={}),Bu=ct({},Bu),Pu&&!Bu.el&&(Bu.el=Pu),Bu.el&&re(Bu.el).length>1){const Du=[];return re(Bu.el).each(ku=>{const Fu=ct({},Bu,{el:ku});Du.push(new st(Fu))}),Du}const Lu=this;Lu.__swiper__=!0,Lu.support=Rd(),Lu.device=S1({userAgent:Bu.userAgent}),Lu.browser=D1(),Lu.eventsListeners={},Lu.eventsAnyListeners=[],Lu.modules=[...Lu.__modules__],Bu.modules&&Array.isArray(Bu.modules)&&Lu.modules.push(...Bu.modules);const Ru={};Lu.modules.forEach(Du=>{Du({swiper:Lu,extendParams:Rb(Bu,Ru),on:Lu.on.bind(Lu),once:Lu.once.bind(Lu),off:Lu.off.bind(Lu),emit:Lu.emit.bind(Lu)})});const Ou=ct({},hl,Ru);return Lu.params=ct({},Ou,Zs,Bu),Lu.originalParams=ct({},Lu.params),Lu.passedParams=ct({},Bu),Lu.params&&Lu.params.on&&Object.keys(Lu.params.on).forEach(Du=>{Lu.on(Du,Lu.params.on[Du])}),Lu.params&&Lu.params.onAny&&Lu.onAny(Lu.params.onAny),Lu.$=re,Object.assign(Lu,{enabled:Lu.params.enabled,el:Pu,classNames:[],slides:re(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Lu.params.direction==="horizontal"},isVertical(){return Lu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Lu.params.allowSlideNext,allowSlidePrev:Lu.params.allowSlidePrev,touchEvents:function(){const Du=["touchstart","touchmove","touchend","touchcancel"],ku=["pointerdown","pointermove","pointerup"];return Lu.touchEventsTouch={start:Du[0],move:Du[1],end:Du[2],cancel:Du[3]},Lu.touchEventsDesktop={start:ku[0],move:ku[1],end:ku[2]},Lu.support.touch||!Lu.params.simulateTouch?Lu.touchEventsTouch:Lu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Lu.params.focusableElements,lastClickTime:ni(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Lu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Lu.emit("_swiper"),Lu.params.init&&Lu.init(),Lu}enable(){const Tu=this;Tu.enabled||(Tu.enabled=!0,Tu.params.grabCursor&&Tu.setGrabCursor(),Tu.emit("enable"))}disable(){const Tu=this;!Tu.enabled||(Tu.enabled=!1,Tu.params.grabCursor&&Tu.unsetGrabCursor(),Tu.emit("disable"))}setProgress(Tu,Pu){const Bu=this;Tu=Math.min(Math.max(Tu,0),1);const Lu=Bu.minTranslate(),Ru=(Bu.maxTranslate()-Lu)*Tu+Lu;Bu.translateTo(Ru,typeof Pu>"u"?0:Pu),Bu.updateActiveIndex(),Bu.updateSlidesClasses()}emitContainerClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Pu=Tu.el.className.split(" ").filter(Bu=>Bu.indexOf("swiper")===0||Bu.indexOf(Tu.params.containerModifierClass)===0);Tu.emit("_containerClasses",Pu.join(" "))}getSlideClasses(Tu){const Pu=this;return Pu.destroyed?"":Tu.className.split(" ").filter(Bu=>Bu.indexOf("swiper-slide")===0||Bu.indexOf(Pu.params.slideClass)===0).join(" ")}emitSlidesClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Pu=[];Tu.slides.each(Bu=>{const Lu=Tu.getSlideClasses(Bu);Pu.push({slideEl:Bu,classNames:Lu}),Tu.emit("_slideClass",Bu,Lu)}),Tu.emit("_slideClasses",Pu)}slidesPerViewDynamic(Tu="current",Pu=!1){const Bu=this,{params:Lu,slides:Ru,slidesGrid:Ou,slidesSizesGrid:Du,size:ku,activeIndex:Fu}=Bu;let Nu=1;if(Lu.centeredSlides){let Gu=Ru[Fu].swiperSlideSize,zu;for(let Hu=Fu+1;Hu<Ru.length;Hu+=1)Ru[Hu]&&!zu&&(Gu+=Ru[Hu].swiperSlideSize,Nu+=1,Gu>ku&&(zu=!0));for(let Hu=Fu-1;Hu>=0;Hu-=1)Ru[Hu]&&!zu&&(Gu+=Ru[Hu].swiperSlideSize,Nu+=1,Gu>ku&&(zu=!0))}else if(Tu==="current")for(let Gu=Fu+1;Gu<Ru.length;Gu+=1)(Pu?Ou[Gu]+Du[Gu]-Ou[Fu]<ku:Ou[Gu]-Ou[Fu]<ku)&&(Nu+=1);else for(let Gu=Fu-1;Gu>=0;Gu-=1)Ou[Fu]-Ou[Gu]<ku&&(Nu+=1);return Nu}update(){const Tu=this;if(!Tu||Tu.destroyed)return;const{snapGrid:Pu,params:Bu}=Tu;Bu.breakpoints&&Tu.setBreakpoint(),Tu.updateSize(),Tu.updateSlides(),Tu.updateProgress(),Tu.updateSlidesClasses();function Lu(){const Ou=Tu.rtlTranslate?Tu.translate*-1:Tu.translate,Du=Math.min(Math.max(Ou,Tu.maxTranslate()),Tu.minTranslate());Tu.setTranslate(Du),Tu.updateActiveIndex(),Tu.updateSlidesClasses()}let Ru;Tu.params.freeMode&&Tu.params.freeMode.enabled?(Lu(),Tu.params.autoHeight&&Tu.updateAutoHeight()):((Tu.params.slidesPerView==="auto"||Tu.params.slidesPerView>1)&&Tu.isEnd&&!Tu.params.centeredSlides?Ru=Tu.slideTo(Tu.slides.length-1,0,!1,!0):Ru=Tu.slideTo(Tu.activeIndex,0,!1,!0),Ru||Lu()),Bu.watchOverflow&&Pu!==Tu.snapGrid&&Tu.checkOverflow(),Tu.emit("update")}changeDirection(Tu,Pu=!0){const Bu=this,Lu=Bu.params.direction;return Tu||(Tu=Lu==="horizontal"?"vertical":"horizontal"),Tu===Lu||Tu!=="horizontal"&&Tu!=="vertical"||(Bu.$el.removeClass(`${Bu.params.containerModifierClass}${Lu}`).addClass(`${Bu.params.containerModifierClass}${Tu}`),Bu.emitContainerClasses(),Bu.params.direction=Tu,Bu.slides.each(Ru=>{Tu==="vertical"?Ru.style.width="":Ru.style.height=""}),Bu.emit("changeDirection"),Pu&&Bu.update()),Bu}changeLanguageDirection(Tu){const Pu=this;Pu.rtl&&Tu==="rtl"||!Pu.rtl&&Tu==="ltr"||(Pu.rtl=Tu==="rtl",Pu.rtlTranslate=Pu.params.direction==="horizontal"&&Pu.rtl,Pu.rtl?(Pu.$el.addClass(`${Pu.params.containerModifierClass}rtl`),Pu.el.dir="rtl"):(Pu.$el.removeClass(`${Pu.params.containerModifierClass}rtl`),Pu.el.dir="ltr"),Pu.update())}mount(Tu){const Pu=this;if(Pu.mounted)return!0;const Bu=re(Tu||Pu.params.el);if(Tu=Bu[0],!Tu)return!1;Tu.swiper=Pu;const Lu=()=>`.${(Pu.params.wrapperClass||"").trim().split(" ").join(".")}`;let Ru=(()=>{if(Tu&&Tu.shadowRoot&&Tu.shadowRoot.querySelector){const Ou=re(Tu.shadowRoot.querySelector(Lu()));return Ou.children=Du=>Bu.children(Du),Ou}return Bu.children?Bu.children(Lu()):re(Bu).children(Lu())})();if(Ru.length===0&&Pu.params.createElements){const Ou=ft().createElement("div");Ru=re(Ou),Ou.className=Pu.params.wrapperClass,Bu.append(Ou),Bu.children(`.${Pu.params.slideClass}`).each(Du=>{Ru.append(Du)})}return Object.assign(Pu,{$el:Bu,el:Tu,$wrapperEl:Ru,wrapperEl:Ru[0],mounted:!0,rtl:Tu.dir.toLowerCase()==="rtl"||Bu.css("direction")==="rtl",rtlTranslate:Pu.params.direction==="horizontal"&&(Tu.dir.toLowerCase()==="rtl"||Bu.css("direction")==="rtl"),wrongRTL:Ru.css("display")==="-webkit-box"}),!0}init(Tu){const Pu=this;return Pu.initialized||Pu.mount(Tu)===!1||(Pu.emit("beforeInit"),Pu.params.breakpoints&&Pu.setBreakpoint(),Pu.addClasses(),Pu.params.loop&&Pu.loopCreate(),Pu.updateSize(),Pu.updateSlides(),Pu.params.watchOverflow&&Pu.checkOverflow(),Pu.params.grabCursor&&Pu.enabled&&Pu.setGrabCursor(),Pu.params.preloadImages&&Pu.preloadImages(),Pu.params.loop?Pu.slideTo(Pu.params.initialSlide+Pu.loopedSlides,0,Pu.params.runCallbacksOnInit,!1,!0):Pu.slideTo(Pu.params.initialSlide,0,Pu.params.runCallbacksOnInit,!1,!0),Pu.attachEvents(),Pu.initialized=!0,Pu.emit("init"),Pu.emit("afterInit")),Pu}destroy(Tu=!0,Pu=!0){const Bu=this,{params:Lu,$el:Ru,$wrapperEl:Ou,slides:Du}=Bu;return typeof Bu.params>"u"||Bu.destroyed||(Bu.emit("beforeDestroy"),Bu.initialized=!1,Bu.detachEvents(),Lu.loop&&Bu.loopDestroy(),Pu&&(Bu.removeClasses(),Ru.removeAttr("style"),Ou.removeAttr("style"),Du&&Du.length&&Du.removeClass([Lu.slideVisibleClass,Lu.slideActiveClass,Lu.slideNextClass,Lu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Bu.emit("destroy"),Object.keys(Bu.eventsListeners).forEach(ku=>{Bu.off(ku)}),Tu!==!1&&(Bu.$el[0].swiper=null,E1(Bu)),Bu.destroyed=!0),null}static extendDefaults(Tu){ct(Zs,Tu)}static get extendedDefaults(){return Zs}static get defaults(){return hl}static installModule(Tu){st.prototype.__modules__||(st.prototype.__modules__=[]);const Pu=st.prototype.__modules__;typeof Tu=="function"&&Pu.indexOf(Tu)<0&&Pu.push(Tu)}static use(Tu){return Array.isArray(Tu)?(Tu.forEach(Pu=>st.installModule(Pu)),st):(st.installModule(Tu),st)}}Object.keys(Us).forEach(Cu=>{Object.keys(Us[Cu]).forEach(Tu=>{st.prototype[Tu]=Us[Cu][Tu]})});st.use([L1,M1]);function bn(Cu){return typeof Cu=="object"&&Cu!==null&&Cu.constructor&&Object.prototype.toString.call(Cu).slice(8,-1)==="Object"}function en(Cu,Tu){const Pu=["__proto__","constructor","prototype"];Object.keys(Tu).filter(Bu=>Pu.indexOf(Bu)<0).forEach(Bu=>{typeof Cu[Bu]>"u"?Cu[Bu]=Tu[Bu]:bn(Tu[Bu])&&bn(Cu[Bu])&&Object.keys(Tu[Bu]).length>0?Tu[Bu].__swiper__?Cu[Bu]=Tu[Bu]:en(Cu[Bu],Tu[Bu]):Cu[Bu]=Tu[Bu]})}function Eo(Cu={}){return Cu.navigation&&typeof Cu.navigation.nextEl>"u"&&typeof Cu.navigation.prevEl>"u"}function Co(Cu={}){return Cu.pagination&&typeof Cu.pagination.el>"u"}function Po(Cu={}){return Cu.scrollbar&&typeof Cu.scrollbar.el>"u"}function ls(Cu=""){const Tu=Cu.split(" ").map(Bu=>Bu.trim()).filter(Bu=>!!Bu),Pu=[];return Tu.forEach(Bu=>{Pu.indexOf(Bu)<0&&Pu.push(Bu)}),Pu.join(" ")}const Gd=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function Hb(Cu={},Tu=!0){const Pu={on:{}},Bu={},Lu={};en(Pu,st.defaults),en(Pu,st.extendedDefaults),Pu._emitClasses=!0,Pu.init=!1;const Ru={},Ou=Gd.map(ku=>ku.replace(/_/,"")),Du=Object.assign({},Cu);return Object.keys(Du).forEach(ku=>{typeof Cu[ku]>"u"||(Ou.indexOf(ku)>=0?bn(Cu[ku])?(Pu[ku]={},Lu[ku]={},en(Pu[ku],Cu[ku]),en(Lu[ku],Cu[ku])):(Pu[ku]=Cu[ku],Lu[ku]=Cu[ku]):ku.search(/on[A-Z]/)===0&&typeof Cu[ku]=="function"?Tu?Bu[`${ku[2].toLowerCase()}${ku.substr(3)}`]=Cu[ku]:Pu.on[`${ku[2].toLowerCase()}${ku.substr(3)}`]=Cu[ku]:Ru[ku]=Cu[ku])}),["navigation","pagination","scrollbar"].forEach(ku=>{Pu[ku]===!0&&(Pu[ku]={}),Pu[ku]===!1&&delete Pu[ku]}),{params:Pu,passedParams:Lu,rest:Ru,events:Bu}}function Nb({el:Cu,nextEl:Tu,prevEl:Pu,paginationEl:Bu,scrollbarEl:Lu,swiper:Ru},Ou){Eo(Ou)&&Tu&&Pu&&(Ru.params.navigation.nextEl=Tu,Ru.originalParams.navigation.nextEl=Tu,Ru.params.navigation.prevEl=Pu,Ru.originalParams.navigation.prevEl=Pu),Co(Ou)&&Bu&&(Ru.params.pagination.el=Bu,Ru.originalParams.pagination.el=Bu),Po(Ou)&&Lu&&(Ru.params.scrollbar.el=Lu,Ru.originalParams.scrollbar.el=Lu),Ru.init(Cu)}function Gb(Cu,Tu,Pu,Bu,Lu){const Ru=[];if(!Tu)return Ru;const Ou=Du=>{Ru.indexOf(Du)<0&&Ru.push(Du)};if(Pu&&Bu){const Du=Bu.map(Lu),ku=Pu.map(Lu);Du.join("")!==ku.join("")&&Ou("children"),Bu.length!==Pu.length&&Ou("children")}return Gd.filter(Du=>Du[0]==="_").map(Du=>Du.replace(/_/,"")).forEach(Du=>{if(Du in Cu&&Du in Tu)if(bn(Cu[Du])&&bn(Tu[Du])){const ku=Object.keys(Cu[Du]),Fu=Object.keys(Tu[Du]);ku.length!==Fu.length?Ou(Du):(ku.forEach(Nu=>{Cu[Du][Nu]!==Tu[Du][Nu]&&Ou(Du)}),Fu.forEach(Nu=>{Cu[Du][Nu]!==Tu[Du][Nu]&&Ou(Du)}))}else Cu[Du]!==Tu[Du]&&Ou(Du)}),Ru}function Fb({swiper:Cu,slides:Tu,passedParams:Pu,changedParams:Bu,nextEl:Lu,prevEl:Ru,scrollbarEl:Ou,paginationEl:Du}){const ku=Bu.filter(tp=>tp!=="children"&&tp!=="direction"),{params:Fu,pagination:Nu,navigation:Gu,scrollbar:zu,virtual:Hu,thumbs:Wu}=Cu;let _h,Xc,ju,_c,_f;Bu.includes("thumbs")&&Pu.thumbs&&Pu.thumbs.swiper&&Fu.thumbs&&!Fu.thumbs.swiper&&(_h=!0),Bu.includes("controller")&&Pu.controller&&Pu.controller.control&&Fu.controller&&!Fu.controller.control&&(Xc=!0),Bu.includes("pagination")&&Pu.pagination&&(Pu.pagination.el||Du)&&(Fu.pagination||Fu.pagination===!1)&&Nu&&!Nu.el&&(ju=!0),Bu.includes("scrollbar")&&Pu.scrollbar&&(Pu.scrollbar.el||Ou)&&(Fu.scrollbar||Fu.scrollbar===!1)&&zu&&!zu.el&&(_c=!0),Bu.includes("navigation")&&Pu.navigation&&(Pu.navigation.prevEl||Ru)&&(Pu.navigation.nextEl||Lu)&&(Fu.navigation||Fu.navigation===!1)&&Gu&&!Gu.prevEl&&!Gu.nextEl&&(_f=!0);const ep=tp=>{!Cu[tp]||(Cu[tp].destroy(),tp==="navigation"?(Fu[tp].prevEl=void 0,Fu[tp].nextEl=void 0,Cu[tp].prevEl=void 0,Cu[tp].nextEl=void 0):(Fu[tp].el=void 0,Cu[tp].el=void 0))};ku.forEach(tp=>{if(bn(Fu[tp])&&bn(Pu[tp]))en(Fu[tp],Pu[tp]);else{const op=Pu[tp];(op===!0||op===!1)&&(tp==="navigation"||tp==="pagination"||tp==="scrollbar")?op===!1&&ep(tp):Fu[tp]=Pu[tp]}}),ku.includes("controller")&&!Xc&&Cu.controller&&Cu.controller.control&&Fu.controller&&Fu.controller.control&&(Cu.controller.control=Fu.controller.control),Bu.includes("children")&&Tu&&Hu&&Fu.virtual.enabled?(Hu.slides=Tu,Hu.update(!0)):Bu.includes("children")&&Cu.lazy&&Cu.params.lazy.enabled&&Cu.lazy.load(),_h&&Wu.init()&&Wu.update(!0),Xc&&(Cu.controller.control=Fu.controller.control),ju&&(Du&&(Fu.pagination.el=Du),Nu.init(),Nu.render(),Nu.update()),_c&&(Ou&&(Fu.scrollbar.el=Ou),zu.init(),zu.updateSize(),zu.setTranslate()),_f&&(Lu&&(Fu.navigation.nextEl=Lu),Ru&&(Fu.navigation.prevEl=Ru),Gu.init(),Gu.update()),Bu.includes("allowSlideNext")&&(Cu.allowSlideNext=Pu.allowSlideNext),Bu.includes("allowSlidePrev")&&(Cu.allowSlidePrev=Pu.allowSlidePrev),Bu.includes("direction")&&Cu.changeDirection(Pu.direction,!1),Cu.update()}const Wb=Cu=>({virtualData:Cu&512}),pl=Cu=>({virtualData:Cu[9]}),Qb=Cu=>({virtualData:Cu&512}),ml=Cu=>({virtualData:Cu[9]}),_b=Cu=>({virtualData:Cu&512}),gl=Cu=>({virtualData:Cu[9]}),Xb=Cu=>({virtualData:Cu&512}),vl=Cu=>({virtualData:Cu[9]}),Yb=Cu=>({virtualData:Cu&512}),bl=Cu=>({virtualData:Cu[9]});function Al(Cu){let Tu,Pu,Bu;return{c(){Tu=F("div"),Pu=q(),Bu=F("div"),C(Tu,"class","swiper-button-prev"),C(Bu,"class","swiper-button-next")},m(Lu,Ru){H(Lu,Tu,Ru),Cu[13](Tu),H(Lu,Pu,Ru),H(Lu,Bu,Ru),Cu[14](Bu)},p:le,d(Lu){Lu&&B(Tu),Cu[13](null),Lu&&B(Pu),Lu&&B(Bu),Cu[14](null)}}}function yl(Cu){let Tu;return{c(){Tu=F("div"),C(Tu,"class","swiper-scrollbar")},m(Pu,Bu){H(Pu,Tu,Bu),Cu[15](Tu)},p:le,d(Pu){Pu&&B(Tu),Cu[15](null)}}}function wl(Cu){let Tu;return{c(){Tu=F("div"),C(Tu,"class","swiper-pagination")},m(Pu,Bu){H(Pu,Tu,Bu),Cu[16](Tu)},p:le,d(Pu){Pu&&B(Tu),Cu[16](null)}}}function Vb(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du=Eo(Cu[2]),ku,Fu=Po(Cu[2]),Nu,Gu=Co(Cu[2]),zu,Hu,Wu;const _h=Cu[12]["container-start"],Xc=dn(_h,Cu,Cu[11],bl),ju=Cu[12]["wrapper-start"],_c=dn(ju,Cu,Cu[11],vl),_f=Cu[12].default,ep=dn(_f,Cu,Cu[11],gl),tp=Cu[12]["wrapper-end"],op=dn(tp,Cu,Cu[11],ml);let lp=Du&&Al(Cu),up=Fu&&yl(Cu),hp=Gu&&wl(Cu);const np=Cu[12]["container-end"],rp=dn(np,Cu,Cu[11],pl);let ip=[{class:Hu=ls(`${Cu[1]}${Cu[0]?` ${Cu[0]}`:""}`)},Cu[3]],ap={};for(let sp=0;sp<ip.length;sp+=1)ap=je(ap,ip[sp]);return{c(){Tu=F("div"),Xc&&Xc.c(),Pu=q(),Bu=F("div"),_c&&_c.c(),Lu=q(),ep&&ep.c(),Ru=q(),op&&op.c(),Ou=q(),lp&&lp.c(),ku=q(),up&&up.c(),Nu=q(),hp&&hp.c(),zu=q(),rp&&rp.c(),C(Bu,"class","swiper-wrapper"),Ui(Tu,ap)},m(sp,cp){H(sp,Tu,cp),Xc&&Xc.m(Tu,null),W(Tu,Pu),W(Tu,Bu),_c&&_c.m(Bu,null),W(Bu,Lu),ep&&ep.m(Bu,null),W(Bu,Ru),op&&op.m(Bu,null),W(Tu,Ou),lp&&lp.m(Tu,null),W(Tu,ku),up&&up.m(Tu,null),W(Tu,Nu),hp&&hp.m(Tu,null),W(Tu,zu),rp&&rp.m(Tu,null),Cu[17](Tu),Wu=!0},p(sp,[cp]){Xc&&Xc.p&&(!Wu||cp&2560)&&fn(Xc,_h,sp,sp[11],Wu?un(_h,sp[11],cp,Yb):hn(sp[11]),bl),_c&&_c.p&&(!Wu||cp&2560)&&fn(_c,ju,sp,sp[11],Wu?un(ju,sp[11],cp,Xb):hn(sp[11]),vl),ep&&ep.p&&(!Wu||cp&2560)&&fn(ep,_f,sp,sp[11],Wu?un(_f,sp[11],cp,_b):hn(sp[11]),gl),op&&op.p&&(!Wu||cp&2560)&&fn(op,tp,sp,sp[11],Wu?un(tp,sp[11],cp,Qb):hn(sp[11]),ml),cp&4&&(Du=Eo(sp[2])),Du?lp?lp.p(sp,cp):(lp=Al(sp),lp.c(),lp.m(Tu,ku)):lp&&(lp.d(1),lp=null),cp&4&&(Fu=Po(sp[2])),Fu?up?up.p(sp,cp):(up=yl(sp),up.c(),up.m(Tu,Nu)):up&&(up.d(1),up=null),cp&4&&(Gu=Co(sp[2])),Gu?hp?hp.p(sp,cp):(hp=wl(sp),hp.c(),hp.m(Tu,zu)):hp&&(hp.d(1),hp=null),rp&&rp.p&&(!Wu||cp&2560)&&fn(rp,np,sp,sp[11],Wu?un(np,sp[11],cp,Wb):hn(sp[11]),pl),Ui(Tu,ap=Ve(ip,[(!Wu||cp&3&&Hu!==(Hu=ls(`${sp[1]}${sp[0]?` ${sp[0]}`:""}`)))&&{class:Hu},cp&8&&sp[3]]))},i(sp){Wu||(M(Xc,sp),M(_c,sp),M(ep,sp),M(op,sp),M(rp,sp),Wu=!0)},o(sp){R(Xc,sp),R(_c,sp),R(ep,sp),R(op,sp),R(rp,sp),Wu=!1},d(sp){sp&&B(Tu),Xc&&Xc.d(sp),_c&&_c.d(sp),ep&&ep.d(sp),op&&op.d(sp),lp&&lp.d(),up&&up.d(),hp&&hp.d(),rp&&rp.d(sp),Cu[17](null)}}}function Ub(Cu,Tu,Pu){const Bu=["class","swiper"];let Lu=Vi(Tu,Bu),{$$slots:Ru={},$$scope:Ou}=Tu;const Du=af();let{class:ku=void 0}=Tu,Fu="swiper",Nu=!1,Gu=null,zu=null,Hu,Wu,_h,Xc,ju=null,_c=null,_f=null,ep=null,tp=null,op={slides:[]};function lp(){return Gu}const up=dp=>{Pu(9,op=dp),cf().then(()=>{Gu.$wrapperEl.children(".swiper-slide").each(fp=>{fp.onSwiper&&fp.onSwiper(Gu)}),Gu.updateSlides(),Gu.updateProgress(),Gu.updateSlidesClasses(),Gu.lazy&&Gu.params.lazy.enabled&&Gu.lazy.load()})},hp=()=>{Hu=Hb(Lu),Pu(2,Wu=Hu.params),_h=Hu.passedParams,Pu(3,Xc=Hu.rest)};hp(),zu=_h;const np=()=>{Nu=!0};if(Wu.onAny=(dp,...fp)=>{Du(dp,fp)},Object.assign(Wu.on,{_beforeBreakpoint:np,_containerClasses(dp,fp){Pu(1,Fu=fp)}}),Gu=new st(Wu),Sc("swiper",Gu),Gu.virtual&&Gu.params.virtual.enabled){const dp={cache:!1,renderExternal:fp=>{up(fp),Wu.virtual&&Wu.virtual.renderExternal&&Wu.virtual.renderExternal(fp)},renderExternalUpdate:!1};en(Gu.params.virtual,dp),en(Gu.originalParams.virtual,dp)}wt(()=>{!ju||(Nb({el:ju,nextEl:_f,prevEl:_c,paginationEl:tp,scrollbarEl:ep,swiper:Gu},Wu),Du("swiper",[Gu]),!Wu.virtual&&Gu.slides.each(dp=>{dp.onSwiper&&dp.onSwiper(Gu)}))}),jo(()=>{if(!Gu)return;hp();const dp=Gb(_h,zu);(dp.length||Nu)&&Gu&&!Gu.destroyed&&Fb({swiper:Gu,passedParams:_h,changedParams:dp,nextEl:_f,prevEl:_c,scrollbarEl:ep,paginationEl:tp}),Nu=!1,zu=_h}),an(()=>{typeof window<"u"&&Gu&&!Gu.destroyed&&Gu.destroy(!0,!1)});function rp(dp){Je[dp?"unshift":"push"](()=>{_c=dp,Pu(5,_c)})}function ip(dp){Je[dp?"unshift":"push"](()=>{_f=dp,Pu(6,_f)})}function ap(dp){Je[dp?"unshift":"push"](()=>{ep=dp,Pu(7,ep)})}function sp(dp){Je[dp?"unshift":"push"](()=>{tp=dp,Pu(8,tp)})}function cp(dp){Je[dp?"unshift":"push"](()=>{ju=dp,Pu(4,ju)})}return Cu.$$set=dp=>{Tu=je(je({},Tu),yc(dp)),Pu(27,Lu=Vi(Tu,Bu)),"class"in dp&&Pu(0,ku=dp.class),"$$scope"in dp&&Pu(11,Ou=dp.$$scope)},[ku,Fu,Wu,Xc,ju,_c,_f,ep,tp,op,lp,Ou,Ru,rp,ip,ap,sp,cp]}class Zb extends fe{constructor(Tu){super(),ue(this,Tu,Ub,Vb,de,{class:0,swiper:10})}get swiper(){return this.$$.ctx[10]}}const Jb=Cu=>({data:Cu&32}),El=Cu=>({data:Cu[5]}),qb=Cu=>({data:Cu&32}),Cl=Cu=>({data:Cu[5]});function Kb(Cu){let Tu;const Pu=Cu[8].default,Bu=dn(Pu,Cu,Cu[7],El);return{c(){Bu&&Bu.c()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),Tu=!0},p(Lu,Ru){Bu&&Bu.p&&(!Tu||Ru&160)&&fn(Bu,Pu,Lu,Lu[7],Tu?un(Pu,Lu[7],Ru,Jb):hn(Lu[7]),El)},i(Lu){Tu||(M(Bu,Lu),Tu=!0)},o(Lu){R(Bu,Lu),Tu=!1},d(Lu){Bu&&Bu.d(Lu)}}}function $b(Cu){let Tu,Pu,Bu;const Lu=Cu[8].default,Ru=dn(Lu,Cu,Cu[7],Cl);return{c(){Tu=F("div"),Ru&&Ru.c(),C(Tu,"class","swiper-zoom-container"),C(Tu,"data-swiper-zoom",Pu=typeof Cu[0]=="number"?Cu[0]:void 0)},m(Ou,Du){H(Ou,Tu,Du),Ru&&Ru.m(Tu,null),Bu=!0},p(Ou,Du){Ru&&Ru.p&&(!Bu||Du&160)&&fn(Ru,Lu,Ou,Ou[7],Bu?un(Lu,Ou[7],Du,qb):hn(Ou[7]),Cl),(!Bu||Du&1&&Pu!==(Pu=typeof Ou[0]=="number"?Ou[0]:void 0))&&C(Tu,"data-swiper-zoom",Pu)},i(Ou){Bu||(M(Ru,Ou),Bu=!0)},o(Ou){R(Ru,Ou),Bu=!1},d(Ou){Ou&&B(Tu),Ru&&Ru.d(Ou)}}}function eA(Cu){let Tu,Pu,Bu,Lu,Ru;const Ou=[$b,Kb],Du=[];function ku(Gu,zu){return Gu[0]?0:1}Pu=ku(Cu),Bu=Du[Pu]=Ou[Pu](Cu);let Fu=[{class:Lu=ls(`${Cu[3]}${Cu[2]?` ${Cu[2]}`:""}`)},{"data-swiper-slide-index":Cu[1]},Cu[6]],Nu={};for(let Gu=0;Gu<Fu.length;Gu+=1)Nu=je(Nu,Fu[Gu]);return{c(){Tu=F("div"),Bu.c(),Ui(Tu,Nu)},m(Gu,zu){H(Gu,Tu,zu),Du[Pu].m(Tu,null),Cu[9](Tu),Ru=!0},p(Gu,[zu]){let Hu=Pu;Pu=ku(Gu),Pu===Hu?Du[Pu].p(Gu,zu):(ve(),R(Du[Hu],1,1,()=>{Du[Hu]=null}),be(),Bu=Du[Pu],Bu?Bu.p(Gu,zu):(Bu=Du[Pu]=Ou[Pu](Gu),Bu.c()),M(Bu,1),Bu.m(Tu,null)),Ui(Tu,Nu=Ve(Fu,[(!Ru||zu&12&&Lu!==(Lu=ls(`${Gu[3]}${Gu[2]?` ${Gu[2]}`:""}`)))&&{class:Lu},(!Ru||zu&2)&&{"data-swiper-slide-index":Gu[1]},zu&64&&Gu[6]]))},i(Gu){Ru||(M(Bu),Ru=!0)},o(Gu){R(Bu),Ru=!1},d(Gu){Gu&&B(Tu),Du[Pu].d(),Cu[9](null)}}}function tA(Cu,Tu,Pu){let Bu;const Lu=["zoom","virtualIndex","class"];let Ru=Vi(Tu,Lu),{$$slots:Ou={},$$scope:Du}=Tu,{zoom:ku=void 0}=Tu,{virtualIndex:Fu=void 0}=Tu,{class:Nu=void 0}=Tu,Gu=null,zu="swiper-slide",Hu=kc("swiper"),Wu=!1;const _h=(_f,ep,tp)=>{ep===Gu&&Pu(3,zu=tp)},Xc=()=>{!Hu||Wu||(Hu.on("_slideClass",_h),Wu=!0)},ju=()=>{!Hu||(Hu.off("_slideClass",_h),Wu=!1)};wt(()=>{typeof Fu>"u"||(Pu(4,Gu.onSwiper=_f=>{Hu=_f,Xc()},Gu),Xc())}),jo(()=>{if(!(!Gu||!Hu)){if(Hu.destroyed){zu!=="swiper-slide"&&Pu(3,zu="swiper-slide");return}Xc()}}),Oo(()=>{Xc()}),an(()=>{!Hu||ju()});function _c(_f){Je[_f?"unshift":"push"](()=>{Gu=_f,Pu(4,Gu)})}return Cu.$$set=_f=>{Tu=je(je({},Tu),yc(_f)),Pu(6,Ru=Vi(Tu,Lu)),"zoom"in _f&&Pu(0,ku=_f.zoom),"virtualIndex"in _f&&Pu(1,Fu=_f.virtualIndex),"class"in _f&&Pu(2,Nu=_f.class),"$$scope"in _f&&Pu(7,Du=_f.$$scope)},Cu.$$.update=()=>{Cu.$$.dirty&8&&Pu(5,Bu={isActive:zu.indexOf("swiper-slide-active")>=0||zu.indexOf("swiper-slide-duplicate-active")>=0,isVisible:zu.indexOf("swiper-slide-visible")>=0,isDuplicate:zu.indexOf("swiper-slide-duplicate")>=0,isPrev:zu.indexOf("swiper-slide-prev")>=0||zu.indexOf("swiper-slide-duplicate-prev")>=0,isNext:zu.indexOf("swiper-slide-next")>=0||zu.indexOf("swiper-slide-duplicate-next")>=0})},[ku,Fu,Nu,zu,Gu,Bu,Ru,Du,Ou,_c]}class nA extends fe{constructor(Tu){super(),ue(this,Tu,tA,eA,de,{zoom:0,virtualIndex:1,class:2})}}function Pl(Cu){return Cu!==null&&typeof Cu=="object"&&"constructor"in Cu&&Cu.constructor===Object}function sr(Cu={},Tu={}){Object.keys(Tu).forEach(Pu=>{typeof Cu[Pu]>"u"?Cu[Pu]=Tu[Pu]:Pl(Tu[Pu])&&Pl(Cu[Pu])&&Object.keys(Tu[Pu]).length>0&&sr(Cu[Pu],Tu[Pu])})}const Fd={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ke(){const Cu=typeof document<"u"?document:{};return sr(Cu,Fd),Cu}const iA={document:Fd,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(Cu){return typeof setTimeout>"u"?(Cu(),null):setTimeout(Cu,0)},cancelAnimationFrame(Cu){typeof setTimeout>"u"||clearTimeout(Cu)}};function _e(){const Cu=typeof window<"u"?window:{};return sr(Cu,iA),Cu}function sA(Cu){const Tu=Cu.__proto__;Object.defineProperty(Cu,"__proto__",{get(){return Tu},set(Pu){Tu.__proto__=Pu}})}class tn extends Array{constructor(Tu){typeof Tu=="number"?super(Tu):(super(...Tu||[]),sA(this))}}function ri(Cu=[]){const Tu=[];return Cu.forEach(Pu=>{Array.isArray(Pu)?Tu.push(...ri(Pu)):Tu.push(Pu)}),Tu}function Wd(Cu,Tu){return Array.prototype.filter.call(Cu,Tu)}function oA(Cu){const Tu=[];for(let Pu=0;Pu<Cu.length;Pu+=1)Tu.indexOf(Cu[Pu])===-1&&Tu.push(Cu[Pu]);return Tu}function rA(Cu,Tu){if(typeof Cu!="string")return[Cu];const Pu=[],Bu=Tu.querySelectorAll(Cu);for(let Lu=0;Lu<Bu.length;Lu+=1)Pu.push(Bu[Lu]);return Pu}function ae(Cu,Tu){const Pu=_e(),Bu=Ke();let Lu=[];if(!Tu&&Cu instanceof tn)return Cu;if(!Cu)return new tn(Lu);if(typeof Cu=="string"){const Ru=Cu.trim();if(Ru.indexOf("<")>=0&&Ru.indexOf(">")>=0){let Ou="div";Ru.indexOf("<li")===0&&(Ou="ul"),Ru.indexOf("<tr")===0&&(Ou="tbody"),(Ru.indexOf("<td")===0||Ru.indexOf("<th")===0)&&(Ou="tr"),Ru.indexOf("<tbody")===0&&(Ou="table"),Ru.indexOf("<option")===0&&(Ou="select");const Du=Bu.createElement(Ou);Du.innerHTML=Ru;for(let ku=0;ku<Du.childNodes.length;ku+=1)Lu.push(Du.childNodes[ku])}else Lu=rA(Cu.trim(),Tu||Bu)}else if(Cu.nodeType||Cu===Pu||Cu===Bu)Lu.push(Cu);else if(Array.isArray(Cu)){if(Cu instanceof tn)return Cu;Lu=Cu}return new tn(oA(Lu))}ae.fn=tn.prototype;function aA(...Cu){const Tu=ri(Cu.map(Pu=>Pu.split(" ")));return this.forEach(Pu=>{Pu.classList.add(...Tu)}),this}function lA(...Cu){const Tu=ri(Cu.map(Pu=>Pu.split(" ")));return this.forEach(Pu=>{Pu.classList.remove(...Tu)}),this}function cA(...Cu){const Tu=ri(Cu.map(Pu=>Pu.split(" ")));this.forEach(Pu=>{Tu.forEach(Bu=>{Pu.classList.toggle(Bu)})})}function dA(...Cu){const Tu=ri(Cu.map(Pu=>Pu.split(" ")));return Wd(this,Pu=>Tu.filter(Bu=>Pu.classList.contains(Bu)).length>0).length>0}function uA(Cu,Tu){if(arguments.length===1&&typeof Cu=="string")return this[0]?this[0].getAttribute(Cu):void 0;for(let Pu=0;Pu<this.length;Pu+=1)if(arguments.length===2)this[Pu].setAttribute(Cu,Tu);else for(const Bu in Cu)this[Pu][Bu]=Cu[Bu],this[Pu].setAttribute(Bu,Cu[Bu]);return this}function fA(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].removeAttribute(Cu);return this}function hA(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transform=Cu;return this}function pA(Cu){for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].style.transitionDuration=typeof Cu!="string"?`${Cu}ms`:Cu;return this}function mA(...Cu){let[Tu,Pu,Bu,Lu]=Cu;typeof Cu[1]=="function"&&([Tu,Bu,Lu]=Cu,Pu=void 0),Lu||(Lu=!1);function Ru(Fu){const Nu=Fu.target;if(!Nu)return;const Gu=Fu.target.dom7EventData||[];if(Gu.indexOf(Fu)<0&&Gu.unshift(Fu),ae(Nu).is(Pu))Bu.apply(Nu,Gu);else{const zu=ae(Nu).parents();for(let Hu=0;Hu<zu.length;Hu+=1)ae(zu[Hu]).is(Pu)&&Bu.apply(zu[Hu],Gu)}}function Ou(Fu){const Nu=Fu&&Fu.target?Fu.target.dom7EventData||[]:[];Nu.indexOf(Fu)<0&&Nu.unshift(Fu),Bu.apply(this,Nu)}const Du=Tu.split(" ");let ku;for(let Fu=0;Fu<this.length;Fu+=1){const Nu=this[Fu];if(Pu)for(ku=0;ku<Du.length;ku+=1){const Gu=Du[ku];Nu.dom7LiveListeners||(Nu.dom7LiveListeners={}),Nu.dom7LiveListeners[Gu]||(Nu.dom7LiveListeners[Gu]=[]),Nu.dom7LiveListeners[Gu].push({listener:Bu,proxyListener:Ru}),Nu.addEventListener(Gu,Ru,Lu)}else for(ku=0;ku<Du.length;ku+=1){const Gu=Du[ku];Nu.dom7Listeners||(Nu.dom7Listeners={}),Nu.dom7Listeners[Gu]||(Nu.dom7Listeners[Gu]=[]),Nu.dom7Listeners[Gu].push({listener:Bu,proxyListener:Ou}),Nu.addEventListener(Gu,Ou,Lu)}}return this}function gA(...Cu){let[Tu,Pu,Bu,Lu]=Cu;typeof Cu[1]=="function"&&([Tu,Bu,Lu]=Cu,Pu=void 0),Lu||(Lu=!1);const Ru=Tu.split(" ");for(let Ou=0;Ou<Ru.length;Ou+=1){const Du=Ru[Ou];for(let ku=0;ku<this.length;ku+=1){const Fu=this[ku];let Nu;if(!Pu&&Fu.dom7Listeners?Nu=Fu.dom7Listeners[Du]:Pu&&Fu.dom7LiveListeners&&(Nu=Fu.dom7LiveListeners[Du]),Nu&&Nu.length)for(let Gu=Nu.length-1;Gu>=0;Gu-=1){const zu=Nu[Gu];Bu&&zu.listener===Bu||Bu&&zu.listener&&zu.listener.dom7proxy&&zu.listener.dom7proxy===Bu?(Fu.removeEventListener(Du,zu.proxyListener,Lu),Nu.splice(Gu,1)):Bu||(Fu.removeEventListener(Du,zu.proxyListener,Lu),Nu.splice(Gu,1))}}}return this}function vA(...Cu){const Tu=_e(),Pu=Cu[0].split(" "),Bu=Cu[1];for(let Lu=0;Lu<Pu.length;Lu+=1){const Ru=Pu[Lu];for(let Ou=0;Ou<this.length;Ou+=1){const Du=this[Ou];if(Tu.CustomEvent){const ku=new Tu.CustomEvent(Ru,{detail:Bu,bubbles:!0,cancelable:!0});Du.dom7EventData=Cu.filter((Fu,Nu)=>Nu>0),Du.dispatchEvent(ku),Du.dom7EventData=[],delete Du.dom7EventData}}}return this}function bA(Cu){const Tu=this;function Pu(Bu){Bu.target===this&&(Cu.call(this,Bu),Tu.off("transitionend",Pu))}return Cu&&Tu.on("transitionend",Pu),this}function AA(Cu){if(this.length>0){if(Cu){const Tu=this.styles();return this[0].offsetWidth+parseFloat(Tu.getPropertyValue("margin-right"))+parseFloat(Tu.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function yA(Cu){if(this.length>0){if(Cu){const Tu=this.styles();return this[0].offsetHeight+parseFloat(Tu.getPropertyValue("margin-top"))+parseFloat(Tu.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function wA(){if(this.length>0){const Cu=_e(),Tu=Ke(),Pu=this[0],Bu=Pu.getBoundingClientRect(),Lu=Tu.body,Ru=Pu.clientTop||Lu.clientTop||0,Ou=Pu.clientLeft||Lu.clientLeft||0,Du=Pu===Cu?Cu.scrollY:Pu.scrollTop,ku=Pu===Cu?Cu.scrollX:Pu.scrollLeft;return{top:Bu.top+Du-Ru,left:Bu.left+ku-Ou}}return null}function EA(){const Cu=_e();return this[0]?Cu.getComputedStyle(this[0],null):{}}function CA(Cu,Tu){const Pu=_e();let Bu;if(arguments.length===1)if(typeof Cu=="string"){if(this[0])return Pu.getComputedStyle(this[0],null).getPropertyValue(Cu)}else{for(Bu=0;Bu<this.length;Bu+=1)for(const Lu in Cu)this[Bu].style[Lu]=Cu[Lu];return this}if(arguments.length===2&&typeof Cu=="string"){for(Bu=0;Bu<this.length;Bu+=1)this[Bu].style[Cu]=Tu;return this}return this}function PA(Cu){return Cu?(this.forEach((Tu,Pu)=>{Cu.apply(Tu,[Tu,Pu])}),this):this}function xA(Cu){const Tu=Wd(this,Cu);return ae(Tu)}function IA(Cu){if(typeof Cu>"u")return this[0]?this[0].innerHTML:null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].innerHTML=Cu;return this}function TA(Cu){if(typeof Cu>"u")return this[0]?this[0].textContent.trim():null;for(let Tu=0;Tu<this.length;Tu+=1)this[Tu].textContent=Cu;return this}function SA(Cu){const Tu=_e(),Pu=Ke(),Bu=this[0];let Lu,Ru;if(!Bu||typeof Cu>"u")return!1;if(typeof Cu=="string"){if(Bu.matches)return Bu.matches(Cu);if(Bu.webkitMatchesSelector)return Bu.webkitMatchesSelector(Cu);if(Bu.msMatchesSelector)return Bu.msMatchesSelector(Cu);for(Lu=ae(Cu),Ru=0;Ru<Lu.length;Ru+=1)if(Lu[Ru]===Bu)return!0;return!1}if(Cu===Pu)return Bu===Pu;if(Cu===Tu)return Bu===Tu;if(Cu.nodeType||Cu instanceof tn){for(Lu=Cu.nodeType?[Cu]:Cu,Ru=0;Ru<Lu.length;Ru+=1)if(Lu[Ru]===Bu)return!0;return!1}return!1}function kA(){let Cu=this[0],Tu;if(Cu){for(Tu=0;(Cu=Cu.previousSibling)!==null;)Cu.nodeType===1&&(Tu+=1);return Tu}}function DA(Cu){if(typeof Cu>"u")return this;const Tu=this.length;if(Cu>Tu-1)return ae([]);if(Cu<0){const Pu=Tu+Cu;return Pu<0?ae([]):ae([this[Pu]])}return ae([this[Cu]])}function LA(...Cu){let Tu;const Pu=Ke();for(let Bu=0;Bu<Cu.length;Bu+=1){Tu=Cu[Bu];for(let Lu=0;Lu<this.length;Lu+=1)if(typeof Tu=="string"){const Ru=Pu.createElement("div");for(Ru.innerHTML=Tu;Ru.firstChild;)this[Lu].appendChild(Ru.firstChild)}else if(Tu instanceof tn)for(let Ru=0;Ru<Tu.length;Ru+=1)this[Lu].appendChild(Tu[Ru]);else this[Lu].appendChild(Tu)}return this}function MA(Cu){const Tu=Ke();let Pu,Bu;for(Pu=0;Pu<this.length;Pu+=1)if(typeof Cu=="string"){const Lu=Tu.createElement("div");for(Lu.innerHTML=Cu,Bu=Lu.childNodes.length-1;Bu>=0;Bu-=1)this[Pu].insertBefore(Lu.childNodes[Bu],this[Pu].childNodes[0])}else if(Cu instanceof tn)for(Bu=0;Bu<Cu.length;Bu+=1)this[Pu].insertBefore(Cu[Bu],this[Pu].childNodes[0]);else this[Pu].insertBefore(Cu,this[Pu].childNodes[0]);return this}function zA(Cu){return this.length>0?Cu?this[0].nextElementSibling&&ae(this[0].nextElementSibling).is(Cu)?ae([this[0].nextElementSibling]):ae([]):this[0].nextElementSibling?ae([this[0].nextElementSibling]):ae([]):ae([])}function OA(Cu){const Tu=[];let Pu=this[0];if(!Pu)return ae([]);for(;Pu.nextElementSibling;){const Bu=Pu.nextElementSibling;Cu?ae(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Pu=Bu}return ae(Tu)}function jA(Cu){if(this.length>0){const Tu=this[0];return Cu?Tu.previousElementSibling&&ae(Tu.previousElementSibling).is(Cu)?ae([Tu.previousElementSibling]):ae([]):Tu.previousElementSibling?ae([Tu.previousElementSibling]):ae([])}return ae([])}function BA(Cu){const Tu=[];let Pu=this[0];if(!Pu)return ae([]);for(;Pu.previousElementSibling;){const Bu=Pu.previousElementSibling;Cu?ae(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Pu=Bu}return ae(Tu)}function RA(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1)this[Pu].parentNode!==null&&(Cu?ae(this[Pu].parentNode).is(Cu)&&Tu.push(this[Pu].parentNode):Tu.push(this[Pu].parentNode));return ae(Tu)}function HA(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){let Bu=this[Pu].parentNode;for(;Bu;)Cu?ae(Bu).is(Cu)&&Tu.push(Bu):Tu.push(Bu),Bu=Bu.parentNode}return ae(Tu)}function NA(Cu){let Tu=this;return typeof Cu>"u"?ae([]):(Tu.is(Cu)||(Tu=Tu.parents(Cu).eq(0)),Tu)}function GA(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){const Bu=this[Pu].querySelectorAll(Cu);for(let Lu=0;Lu<Bu.length;Lu+=1)Tu.push(Bu[Lu])}return ae(Tu)}function FA(Cu){const Tu=[];for(let Pu=0;Pu<this.length;Pu+=1){const Bu=this[Pu].children;for(let Lu=0;Lu<Bu.length;Lu+=1)(!Cu||ae(Bu[Lu]).is(Cu))&&Tu.push(Bu[Lu])}return ae(Tu)}function WA(){for(let Cu=0;Cu<this.length;Cu+=1)this[Cu].parentNode&&this[Cu].parentNode.removeChild(this[Cu]);return this}const xl={addClass:aA,removeClass:lA,hasClass:dA,toggleClass:cA,attr:uA,removeAttr:fA,transform:hA,transition:pA,on:mA,off:gA,trigger:vA,transitionEnd:bA,outerWidth:AA,outerHeight:yA,styles:EA,offset:wA,css:CA,each:PA,html:IA,text:TA,is:SA,index:kA,eq:DA,append:LA,prepend:MA,next:zA,nextAll:OA,prev:jA,prevAll:BA,parent:RA,parents:HA,closest:NA,find:GA,children:FA,filter:xA,remove:WA};Object.keys(xl).forEach(Cu=>{Object.defineProperty(ae.fn,Cu,{value:xl[Cu],writable:!0})});function QA(Cu){const Tu=Cu;Object.keys(Tu).forEach(Pu=>{try{Tu[Pu]=null}catch{}try{delete Tu[Pu]}catch{}})}function cs(Cu,Tu=0){return setTimeout(Cu,Tu)}function ii(){return Date.now()}function _A(Cu){const Tu=_e();let Pu;return Tu.getComputedStyle&&(Pu=Tu.getComputedStyle(Cu,null)),!Pu&&Cu.currentStyle&&(Pu=Cu.currentStyle),Pu||(Pu=Cu.style),Pu}function XA(Cu,Tu="x"){const Pu=_e();let Bu,Lu,Ru;const Ou=_A(Cu);return Pu.WebKitCSSMatrix?(Lu=Ou.transform||Ou.webkitTransform,Lu.split(",").length>6&&(Lu=Lu.split(", ").map(Du=>Du.replace(",",".")).join(", ")),Ru=new Pu.WebKitCSSMatrix(Lu==="none"?"":Lu)):(Ru=Ou.MozTransform||Ou.OTransform||Ou.MsTransform||Ou.msTransform||Ou.transform||Ou.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),Bu=Ru.toString().split(",")),Tu==="x"&&(Pu.WebKitCSSMatrix?Lu=Ru.m41:Bu.length===16?Lu=parseFloat(Bu[12]):Lu=parseFloat(Bu[4])),Tu==="y"&&(Pu.WebKitCSSMatrix?Lu=Ru.m42:Bu.length===16?Lu=parseFloat(Bu[13]):Lu=parseFloat(Bu[5])),Lu||0}function Bi(Cu){return typeof Cu=="object"&&Cu!==null&&Cu.constructor&&Object.prototype.toString.call(Cu).slice(8,-1)==="Object"}function YA(Cu){return typeof window<"u"&&typeof window.HTMLElement<"u"?Cu instanceof HTMLElement:Cu&&(Cu.nodeType===1||Cu.nodeType===11)}function dt(...Cu){const Tu=Object(Cu[0]),Pu=["__proto__","constructor","prototype"];for(let Bu=1;Bu<Cu.length;Bu+=1){const Lu=Cu[Bu];if(Lu!=null&&!YA(Lu)){const Ru=Object.keys(Object(Lu)).filter(Ou=>Pu.indexOf(Ou)<0);for(let Ou=0,Du=Ru.length;Ou<Du;Ou+=1){const ku=Ru[Ou],Fu=Object.getOwnPropertyDescriptor(Lu,ku);Fu!==void 0&&Fu.enumerable&&(Bi(Tu[ku])&&Bi(Lu[ku])?Lu[ku].__swiper__?Tu[ku]=Lu[ku]:dt(Tu[ku],Lu[ku]):!Bi(Tu[ku])&&Bi(Lu[ku])?(Tu[ku]={},Lu[ku].__swiper__?Tu[ku]=Lu[ku]:dt(Tu[ku],Lu[ku])):Tu[ku]=Lu[ku])}}}return Tu}function Ri(Cu,Tu,Pu){Cu.style.setProperty(Tu,Pu)}function Qd({swiper:Cu,targetPosition:Tu,side:Pu}){const Bu=_e(),Lu=-Cu.translate;let Ru=null,Ou;const Du=Cu.params.speed;Cu.wrapperEl.style.scrollSnapType="none",Bu.cancelAnimationFrame(Cu.cssModeFrameID);const ku=Tu>Lu?"next":"prev",Fu=(Gu,zu)=>ku==="next"&&Gu>=zu||ku==="prev"&&Gu<=zu,Nu=()=>{Ou=new Date().getTime(),Ru===null&&(Ru=Ou);const Gu=Math.max(Math.min((Ou-Ru)/Du,1),0),zu=.5-Math.cos(Gu*Math.PI)/2;let Hu=Lu+zu*(Tu-Lu);if(Fu(Hu,Tu)&&(Hu=Tu),Cu.wrapperEl.scrollTo({[Pu]:Hu}),Fu(Hu,Tu)){Cu.wrapperEl.style.overflow="hidden",Cu.wrapperEl.style.scrollSnapType="",setTimeout(()=>{Cu.wrapperEl.style.overflow="",Cu.wrapperEl.scrollTo({[Pu]:Hu})}),Bu.cancelAnimationFrame(Cu.cssModeFrameID);return}Cu.cssModeFrameID=Bu.requestAnimationFrame(Nu)};Nu()}let Js;function VA(){const Cu=_e(),Tu=Ke();return{smoothScroll:Tu.documentElement&&"scrollBehavior"in Tu.documentElement.style,touch:!!("ontouchstart"in Cu||Cu.DocumentTouch&&Tu instanceof Cu.DocumentTouch),passiveListener:function(){let Pu=!1;try{const Bu=Object.defineProperty({},"passive",{get(){Pu=!0}});Cu.addEventListener("testPassiveListener",null,Bu)}catch{}return Pu}(),gestures:function(){return"ongesturestart"in Cu}()}}function _d(){return Js||(Js=VA()),Js}let qs;function UA({userAgent:Cu}={}){const Tu=_d(),Pu=_e(),Bu=Pu.navigator.platform,Lu=Cu||Pu.navigator.userAgent,Ru={ios:!1,android:!1},Ou=Pu.screen.width,Du=Pu.screen.height,ku=Lu.match(/(Android);?[\s\/]+([\d.]+)?/);let Fu=Lu.match(/(iPad).*OS\s([\d_]+)/);const Nu=Lu.match(/(iPod)(.*OS\s([\d_]+))?/),Gu=!Fu&&Lu.match(/(iPhone\sOS|iOS)\s([\d_]+)/),zu=Bu==="Win32";let Hu=Bu==="MacIntel";const Wu=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!Fu&&Hu&&Tu.touch&&Wu.indexOf(`${Ou}x${Du}`)>=0&&(Fu=Lu.match(/(Version)\/([\d.]+)/),Fu||(Fu=[0,1,"13_0_0"]),Hu=!1),ku&&!zu&&(Ru.os="android",Ru.android=!0),(Fu||Gu||Nu)&&(Ru.os="ios",Ru.ios=!0),Ru}function ZA(Cu={}){return qs||(qs=UA(Cu)),qs}let Ks;function JA(){const Cu=_e();function Tu(){const Pu=Cu.navigator.userAgent.toLowerCase();return Pu.indexOf("safari")>=0&&Pu.indexOf("chrome")<0&&Pu.indexOf("android")<0}return{isSafari:Tu(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(Cu.navigator.userAgent)}}function qA(){return Ks||(Ks=JA()),Ks}function KA({swiper:Cu,on:Tu,emit:Pu}){const Bu=_e();let Lu=null,Ru=null;const Ou=()=>{!Cu||Cu.destroyed||!Cu.initialized||(Pu("beforeResize"),Pu("resize"))},Du=()=>{!Cu||Cu.destroyed||!Cu.initialized||(Lu=new ResizeObserver(Nu=>{Ru=Bu.requestAnimationFrame(()=>{const{width:Gu,height:zu}=Cu;let Hu=Gu,Wu=zu;Nu.forEach(({contentBoxSize:_h,contentRect:Xc,target:ju})=>{ju&&ju!==Cu.el||(Hu=Xc?Xc.width:(_h[0]||_h).inlineSize,Wu=Xc?Xc.height:(_h[0]||_h).blockSize)}),(Hu!==Gu||Wu!==zu)&&Ou()})}),Lu.observe(Cu.el))},ku=()=>{Ru&&Bu.cancelAnimationFrame(Ru),Lu&&Lu.unobserve&&Cu.el&&(Lu.unobserve(Cu.el),Lu=null)},Fu=()=>{!Cu||Cu.destroyed||!Cu.initialized||Pu("orientationchange")};Tu("init",()=>{if(Cu.params.resizeObserver&&typeof Bu.ResizeObserver<"u"){Du();return}Bu.addEventListener("resize",Ou),Bu.addEventListener("orientationchange",Fu)}),Tu("destroy",()=>{ku(),Bu.removeEventListener("resize",Ou),Bu.removeEventListener("orientationchange",Fu)})}function $A({swiper:Cu,extendParams:Tu,on:Pu,emit:Bu}){const Lu=[],Ru=_e(),Ou=(Fu,Nu={})=>{const Gu=Ru.MutationObserver||Ru.WebkitMutationObserver,zu=new Gu(Hu=>{if(Hu.length===1){Bu("observerUpdate",Hu[0]);return}const Wu=function(){Bu("observerUpdate",Hu[0])};Ru.requestAnimationFrame?Ru.requestAnimationFrame(Wu):Ru.setTimeout(Wu,0)});zu.observe(Fu,{attributes:typeof Nu.attributes>"u"?!0:Nu.attributes,childList:typeof Nu.childList>"u"?!0:Nu.childList,characterData:typeof Nu.characterData>"u"?!0:Nu.characterData}),Lu.push(zu)},Du=()=>{if(Cu.params.observer){if(Cu.params.observeParents){const Fu=Cu.$el.parents();for(let Nu=0;Nu<Fu.length;Nu+=1)Ou(Fu[Nu])}Ou(Cu.$el[0],{childList:Cu.params.observeSlideChildren}),Ou(Cu.$wrapperEl[0],{attributes:!1})}},ku=()=>{Lu.forEach(Fu=>{Fu.disconnect()}),Lu.splice(0,Lu.length)};Tu({observer:!1,observeParents:!1,observeSlideChildren:!1}),Pu("init",Du),Pu("destroy",ku)}const ey={on(Cu,Tu,Pu){const Bu=this;if(!Bu.eventsListeners||Bu.destroyed||typeof Tu!="function")return Bu;const Lu=Pu?"unshift":"push";return Cu.split(" ").forEach(Ru=>{Bu.eventsListeners[Ru]||(Bu.eventsListeners[Ru]=[]),Bu.eventsListeners[Ru][Lu](Tu)}),Bu},once(Cu,Tu,Pu){const Bu=this;if(!Bu.eventsListeners||Bu.destroyed||typeof Tu!="function")return Bu;function Lu(...Ru){Bu.off(Cu,Lu),Lu.__emitterProxy&&delete Lu.__emitterProxy,Tu.apply(Bu,Ru)}return Lu.__emitterProxy=Tu,Bu.on(Cu,Lu,Pu)},onAny(Cu,Tu){const Pu=this;if(!Pu.eventsListeners||Pu.destroyed||typeof Cu!="function")return Pu;const Bu=Tu?"unshift":"push";return Pu.eventsAnyListeners.indexOf(Cu)<0&&Pu.eventsAnyListeners[Bu](Cu),Pu},offAny(Cu){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsAnyListeners)return Tu;const Pu=Tu.eventsAnyListeners.indexOf(Cu);return Pu>=0&&Tu.eventsAnyListeners.splice(Pu,1),Tu},off(Cu,Tu){const Pu=this;return!Pu.eventsListeners||Pu.destroyed||!Pu.eventsListeners||Cu.split(" ").forEach(Bu=>{typeof Tu>"u"?Pu.eventsListeners[Bu]=[]:Pu.eventsListeners[Bu]&&Pu.eventsListeners[Bu].forEach((Lu,Ru)=>{(Lu===Tu||Lu.__emitterProxy&&Lu.__emitterProxy===Tu)&&Pu.eventsListeners[Bu].splice(Ru,1)})}),Pu},emit(...Cu){const Tu=this;if(!Tu.eventsListeners||Tu.destroyed||!Tu.eventsListeners)return Tu;let Pu,Bu,Lu;return typeof Cu[0]=="string"||Array.isArray(Cu[0])?(Pu=Cu[0],Bu=Cu.slice(1,Cu.length),Lu=Tu):(Pu=Cu[0].events,Bu=Cu[0].data,Lu=Cu[0].context||Tu),Bu.unshift(Lu),(Array.isArray(Pu)?Pu:Pu.split(" ")).forEach(Ru=>{Tu.eventsAnyListeners&&Tu.eventsAnyListeners.length&&Tu.eventsAnyListeners.forEach(Ou=>{Ou.apply(Lu,[Ru,...Bu])}),Tu.eventsListeners&&Tu.eventsListeners[Ru]&&Tu.eventsListeners[Ru].forEach(Ou=>{Ou.apply(Lu,Bu)})}),Tu}};function ty(){const Cu=this;let Tu,Pu;const Bu=Cu.$el;typeof Cu.params.width<"u"&&Cu.params.width!==null?Tu=Cu.params.width:Tu=Bu[0].clientWidth,typeof Cu.params.height<"u"&&Cu.params.height!==null?Pu=Cu.params.height:Pu=Bu[0].clientHeight,!(Tu===0&&Cu.isHorizontal()||Pu===0&&Cu.isVertical())&&(Tu=Tu-parseInt(Bu.css("padding-left")||0,10)-parseInt(Bu.css("padding-right")||0,10),Pu=Pu-parseInt(Bu.css("padding-top")||0,10)-parseInt(Bu.css("padding-bottom")||0,10),Number.isNaN(Tu)&&(Tu=0),Number.isNaN(Pu)&&(Pu=0),Object.assign(Cu,{width:Tu,height:Pu,size:Cu.isHorizontal()?Tu:Pu}))}function ny(){const Cu=this;function Tu(np){return Cu.isHorizontal()?np:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[np]}function Pu(np,rp){return parseFloat(np.getPropertyValue(Tu(rp))||0)}const Bu=Cu.params,{$wrapperEl:Lu,size:Ru,rtlTranslate:Ou,wrongRTL:Du}=Cu,ku=Cu.virtual&&Bu.virtual.enabled,Fu=ku?Cu.virtual.slides.length:Cu.slides.length,Nu=Lu.children(`.${Cu.params.slideClass}`),Gu=ku?Cu.virtual.slides.length:Nu.length;let zu=[];const Hu=[],Wu=[];let _h=Bu.slidesOffsetBefore;typeof _h=="function"&&(_h=Bu.slidesOffsetBefore.call(Cu));let Xc=Bu.slidesOffsetAfter;typeof Xc=="function"&&(Xc=Bu.slidesOffsetAfter.call(Cu));const ju=Cu.snapGrid.length,_c=Cu.slidesGrid.length;let _f=Bu.spaceBetween,ep=-_h,tp=0,op=0;if(typeof Ru>"u")return;typeof _f=="string"&&_f.indexOf("%")>=0&&(_f=parseFloat(_f.replace("%",""))/100*Ru),Cu.virtualSize=-_f,Ou?Nu.css({marginLeft:"",marginBottom:"",marginTop:""}):Nu.css({marginRight:"",marginBottom:"",marginTop:""}),Bu.centeredSlides&&Bu.cssMode&&(Ri(Cu.wrapperEl,"--swiper-centered-offset-before",""),Ri(Cu.wrapperEl,"--swiper-centered-offset-after",""));const lp=Bu.grid&&Bu.grid.rows>1&&Cu.grid;lp&&Cu.grid.initSlides(Gu);let up;const hp=Bu.slidesPerView==="auto"&&Bu.breakpoints&&Object.keys(Bu.breakpoints).filter(np=>typeof Bu.breakpoints[np].slidesPerView<"u").length>0;for(let np=0;np<Gu;np+=1){up=0;const rp=Nu.eq(np);if(lp&&Cu.grid.updateSlide(np,rp,Gu,Tu),rp.css("display")!=="none"){if(Bu.slidesPerView==="auto"){hp&&(Nu[np].style[Tu("width")]="");const ip=getComputedStyle(rp[0]),ap=rp[0].style.transform,sp=rp[0].style.webkitTransform;if(ap&&(rp[0].style.transform="none"),sp&&(rp[0].style.webkitTransform="none"),Bu.roundLengths)up=Cu.isHorizontal()?rp.outerWidth(!0):rp.outerHeight(!0);else{const cp=Pu(ip,"width"),dp=Pu(ip,"padding-left"),fp=Pu(ip,"padding-right"),vp=Pu(ip,"margin-left"),_p=Pu(ip,"margin-right"),wp=ip.getPropertyValue("box-sizing");if(wp&&wp==="border-box")up=cp+vp+_p;else{const{clientWidth:Dp,offsetWidth:Pp}=rp[0];up=cp+dp+fp+vp+_p+(Pp-Dp)}}ap&&(rp[0].style.transform=ap),sp&&(rp[0].style.webkitTransform=sp),Bu.roundLengths&&(up=Math.floor(up))}else up=(Ru-(Bu.slidesPerView-1)*_f)/Bu.slidesPerView,Bu.roundLengths&&(up=Math.floor(up)),Nu[np]&&(Nu[np].style[Tu("width")]=`${up}px`);Nu[np]&&(Nu[np].swiperSlideSize=up),Wu.push(up),Bu.centeredSlides?(ep=ep+up/2+tp/2+_f,tp===0&&np!==0&&(ep=ep-Ru/2-_f),np===0&&(ep=ep-Ru/2-_f),Math.abs(ep)<1/1e3&&(ep=0),Bu.roundLengths&&(ep=Math.floor(ep)),op%Bu.slidesPerGroup===0&&zu.push(ep),Hu.push(ep)):(Bu.roundLengths&&(ep=Math.floor(ep)),(op-Math.min(Cu.params.slidesPerGroupSkip,op))%Cu.params.slidesPerGroup===0&&zu.push(ep),Hu.push(ep),ep=ep+up+_f),Cu.virtualSize+=up+_f,tp=up,op+=1}}if(Cu.virtualSize=Math.max(Cu.virtualSize,Ru)+Xc,Ou&&Du&&(Bu.effect==="slide"||Bu.effect==="coverflow")&&Lu.css({width:`${Cu.virtualSize+Bu.spaceBetween}px`}),Bu.setWrapperSize&&Lu.css({[Tu("width")]:`${Cu.virtualSize+Bu.spaceBetween}px`}),lp&&Cu.grid.updateWrapperSize(up,zu,Tu),!Bu.centeredSlides){const np=[];for(let rp=0;rp<zu.length;rp+=1){let ip=zu[rp];Bu.roundLengths&&(ip=Math.floor(ip)),zu[rp]<=Cu.virtualSize-Ru&&np.push(ip)}zu=np,Math.floor(Cu.virtualSize-Ru)-Math.floor(zu[zu.length-1])>1&&zu.push(Cu.virtualSize-Ru)}if(zu.length===0&&(zu=[0]),Bu.spaceBetween!==0){const np=Cu.isHorizontal()&&Ou?"marginLeft":Tu("marginRight");Nu.filter((rp,ip)=>Bu.cssMode?ip!==Nu.length-1:!0).css({[np]:`${_f}px`})}if(Bu.centeredSlides&&Bu.centeredSlidesBounds){let np=0;Wu.forEach(ip=>{np+=ip+(Bu.spaceBetween?Bu.spaceBetween:0)}),np-=Bu.spaceBetween;const rp=np-Ru;zu=zu.map(ip=>ip<0?-_h:ip>rp?rp+Xc:ip)}if(Bu.centerInsufficientSlides){let np=0;if(Wu.forEach(rp=>{np+=rp+(Bu.spaceBetween?Bu.spaceBetween:0)}),np-=Bu.spaceBetween,np<Ru){const rp=(Ru-np)/2;zu.forEach((ip,ap)=>{zu[ap]=ip-rp}),Hu.forEach((ip,ap)=>{Hu[ap]=ip+rp})}}if(Object.assign(Cu,{slides:Nu,snapGrid:zu,slidesGrid:Hu,slidesSizesGrid:Wu}),Bu.centeredSlides&&Bu.cssMode&&!Bu.centeredSlidesBounds){Ri(Cu.wrapperEl,"--swiper-centered-offset-before",`${-zu[0]}px`),Ri(Cu.wrapperEl,"--swiper-centered-offset-after",`${Cu.size/2-Wu[Wu.length-1]/2}px`);const np=-Cu.snapGrid[0],rp=-Cu.slidesGrid[0];Cu.snapGrid=Cu.snapGrid.map(ip=>ip+np),Cu.slidesGrid=Cu.slidesGrid.map(ip=>ip+rp)}if(Gu!==Fu&&Cu.emit("slidesLengthChange"),zu.length!==ju&&(Cu.params.watchOverflow&&Cu.checkOverflow(),Cu.emit("snapGridLengthChange")),Hu.length!==_c&&Cu.emit("slidesGridLengthChange"),Bu.watchSlidesProgress&&Cu.updateSlidesOffset(),!ku&&!Bu.cssMode&&(Bu.effect==="slide"||Bu.effect==="fade")){const np=`${Bu.containerModifierClass}backface-hidden`,rp=Cu.$el.hasClass(np);Gu<=Bu.maxBackfaceHiddenSlides?rp||Cu.$el.addClass(np):rp&&Cu.$el.removeClass(np)}}function iy(Cu){const Tu=this,Pu=[],Bu=Tu.virtual&&Tu.params.virtual.enabled;let Lu=0,Ru;typeof Cu=="number"?Tu.setTransition(Cu):Cu===!0&&Tu.setTransition(Tu.params.speed);const Ou=Du=>Bu?Tu.slides.filter(ku=>parseInt(ku.getAttribute("data-swiper-slide-index"),10)===Du)[0]:Tu.slides.eq(Du)[0];if(Tu.params.slidesPerView!=="auto"&&Tu.params.slidesPerView>1)if(Tu.params.centeredSlides)(Tu.visibleSlides||ae([])).each(Du=>{Pu.push(Du)});else for(Ru=0;Ru<Math.ceil(Tu.params.slidesPerView);Ru+=1){const Du=Tu.activeIndex+Ru;if(Du>Tu.slides.length&&!Bu)break;Pu.push(Ou(Du))}else Pu.push(Ou(Tu.activeIndex));for(Ru=0;Ru<Pu.length;Ru+=1)if(typeof Pu[Ru]<"u"){const Du=Pu[Ru].offsetHeight;Lu=Du>Lu?Du:Lu}(Lu||Lu===0)&&Tu.$wrapperEl.css("height",`${Lu}px`)}function sy(){const Cu=this,Tu=Cu.slides;for(let Pu=0;Pu<Tu.length;Pu+=1)Tu[Pu].swiperSlideOffset=Cu.isHorizontal()?Tu[Pu].offsetLeft:Tu[Pu].offsetTop}function oy(Cu=this&&this.translate||0){const Tu=this,Pu=Tu.params,{slides:Bu,rtlTranslate:Lu,snapGrid:Ru}=Tu;if(Bu.length===0)return;typeof Bu[0].swiperSlideOffset>"u"&&Tu.updateSlidesOffset();let Ou=-Cu;Lu&&(Ou=Cu),Bu.removeClass(Pu.slideVisibleClass),Tu.visibleSlidesIndexes=[],Tu.visibleSlides=[];for(let Du=0;Du<Bu.length;Du+=1){const ku=Bu[Du];let Fu=ku.swiperSlideOffset;Pu.cssMode&&Pu.centeredSlides&&(Fu-=Bu[0].swiperSlideOffset);const Nu=(Ou+(Pu.centeredSlides?Tu.minTranslate():0)-Fu)/(ku.swiperSlideSize+Pu.spaceBetween),Gu=(Ou-Ru[0]+(Pu.centeredSlides?Tu.minTranslate():0)-Fu)/(ku.swiperSlideSize+Pu.spaceBetween),zu=-(Ou-Fu),Hu=zu+Tu.slidesSizesGrid[Du];(zu>=0&&zu<Tu.size-1||Hu>1&&Hu<=Tu.size||zu<=0&&Hu>=Tu.size)&&(Tu.visibleSlides.push(ku),Tu.visibleSlidesIndexes.push(Du),Bu.eq(Du).addClass(Pu.slideVisibleClass)),ku.progress=Lu?-Nu:Nu,ku.originalProgress=Lu?-Gu:Gu}Tu.visibleSlides=ae(Tu.visibleSlides)}function ry(Cu){const Tu=this;if(typeof Cu>"u"){const Fu=Tu.rtlTranslate?-1:1;Cu=Tu&&Tu.translate&&Tu.translate*Fu||0}const Pu=Tu.params,Bu=Tu.maxTranslate()-Tu.minTranslate();let{progress:Lu,isBeginning:Ru,isEnd:Ou}=Tu;const Du=Ru,ku=Ou;Bu===0?(Lu=0,Ru=!0,Ou=!0):(Lu=(Cu-Tu.minTranslate())/Bu,Ru=Lu<=0,Ou=Lu>=1),Object.assign(Tu,{progress:Lu,isBeginning:Ru,isEnd:Ou}),(Pu.watchSlidesProgress||Pu.centeredSlides&&Pu.autoHeight)&&Tu.updateSlidesProgress(Cu),Ru&&!Du&&Tu.emit("reachBeginning toEdge"),Ou&&!ku&&Tu.emit("reachEnd toEdge"),(Du&&!Ru||ku&&!Ou)&&Tu.emit("fromEdge"),Tu.emit("progress",Lu)}function ay(){const Cu=this,{slides:Tu,params:Pu,$wrapperEl:Bu,activeIndex:Lu,realIndex:Ru}=Cu,Ou=Cu.virtual&&Pu.virtual.enabled;Tu.removeClass(`${Pu.slideActiveClass} ${Pu.slideNextClass} ${Pu.slidePrevClass} ${Pu.slideDuplicateActiveClass} ${Pu.slideDuplicateNextClass} ${Pu.slideDuplicatePrevClass}`);let Du;Ou?Du=Cu.$wrapperEl.find(`.${Pu.slideClass}[data-swiper-slide-index="${Lu}"]`):Du=Tu.eq(Lu),Du.addClass(Pu.slideActiveClass),Pu.loop&&(Du.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${Ru}"]`).addClass(Pu.slideDuplicateActiveClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${Ru}"]`).addClass(Pu.slideDuplicateActiveClass));let ku=Du.nextAll(`.${Pu.slideClass}`).eq(0).addClass(Pu.slideNextClass);Pu.loop&&ku.length===0&&(ku=Tu.eq(0),ku.addClass(Pu.slideNextClass));let Fu=Du.prevAll(`.${Pu.slideClass}`).eq(0).addClass(Pu.slidePrevClass);Pu.loop&&Fu.length===0&&(Fu=Tu.eq(-1),Fu.addClass(Pu.slidePrevClass)),Pu.loop&&(ku.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${ku.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicateNextClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${ku.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicateNextClass),Fu.hasClass(Pu.slideDuplicateClass)?Bu.children(`.${Pu.slideClass}:not(.${Pu.slideDuplicateClass})[data-swiper-slide-index="${Fu.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicatePrevClass):Bu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}[data-swiper-slide-index="${Fu.attr("data-swiper-slide-index")}"]`).addClass(Pu.slideDuplicatePrevClass)),Cu.emitSlidesClasses()}function ly(Cu){const Tu=this,Pu=Tu.rtlTranslate?Tu.translate:-Tu.translate,{slidesGrid:Bu,snapGrid:Lu,params:Ru,activeIndex:Ou,realIndex:Du,snapIndex:ku}=Tu;let Fu=Cu,Nu;if(typeof Fu>"u"){for(let zu=0;zu<Bu.length;zu+=1)typeof Bu[zu+1]<"u"?Pu>=Bu[zu]&&Pu<Bu[zu+1]-(Bu[zu+1]-Bu[zu])/2?Fu=zu:Pu>=Bu[zu]&&Pu<Bu[zu+1]&&(Fu=zu+1):Pu>=Bu[zu]&&(Fu=zu);Ru.normalizeSlideIndex&&(Fu<0||typeof Fu>"u")&&(Fu=0)}if(Lu.indexOf(Pu)>=0)Nu=Lu.indexOf(Pu);else{const zu=Math.min(Ru.slidesPerGroupSkip,Fu);Nu=zu+Math.floor((Fu-zu)/Ru.slidesPerGroup)}if(Nu>=Lu.length&&(Nu=Lu.length-1),Fu===Ou){Nu!==ku&&(Tu.snapIndex=Nu,Tu.emit("snapIndexChange"));return}const Gu=parseInt(Tu.slides.eq(Fu).attr("data-swiper-slide-index")||Fu,10);Object.assign(Tu,{snapIndex:Nu,realIndex:Gu,previousIndex:Ou,activeIndex:Fu}),Tu.emit("activeIndexChange"),Tu.emit("snapIndexChange"),Du!==Gu&&Tu.emit("realIndexChange"),(Tu.initialized||Tu.params.runCallbacksOnInit)&&Tu.emit("slideChange")}function cy(Cu){const Tu=this,Pu=Tu.params,Bu=ae(Cu).closest(`.${Pu.slideClass}`)[0];let Lu=!1,Ru;if(Bu){for(let Ou=0;Ou<Tu.slides.length;Ou+=1)if(Tu.slides[Ou]===Bu){Lu=!0,Ru=Ou;break}}if(Bu&&Lu)Tu.clickedSlide=Bu,Tu.virtual&&Tu.params.virtual.enabled?Tu.clickedIndex=parseInt(ae(Bu).attr("data-swiper-slide-index"),10):Tu.clickedIndex=Ru;else{Tu.clickedSlide=void 0,Tu.clickedIndex=void 0;return}Pu.slideToClickedSlide&&Tu.clickedIndex!==void 0&&Tu.clickedIndex!==Tu.activeIndex&&Tu.slideToClickedSlide()}const dy={updateSize:ty,updateSlides:ny,updateAutoHeight:iy,updateSlidesOffset:sy,updateSlidesProgress:oy,updateProgress:ry,updateSlidesClasses:ay,updateActiveIndex:ly,updateClickedSlide:cy};function uy(Cu=this.isHorizontal()?"x":"y"){const Tu=this,{params:Pu,rtlTranslate:Bu,translate:Lu,$wrapperEl:Ru}=Tu;if(Pu.virtualTranslate)return Bu?-Lu:Lu;if(Pu.cssMode)return Lu;let Ou=XA(Ru[0],Cu);return Bu&&(Ou=-Ou),Ou||0}function fy(Cu,Tu){const Pu=this,{rtlTranslate:Bu,params:Lu,$wrapperEl:Ru,wrapperEl:Ou,progress:Du}=Pu;let ku=0,Fu=0;const Nu=0;Pu.isHorizontal()?ku=Bu?-Cu:Cu:Fu=Cu,Lu.roundLengths&&(ku=Math.floor(ku),Fu=Math.floor(Fu)),Lu.cssMode?Ou[Pu.isHorizontal()?"scrollLeft":"scrollTop"]=Pu.isHorizontal()?-ku:-Fu:Lu.virtualTranslate||Ru.transform(`translate3d(${ku}px, ${Fu}px, ${Nu}px)`),Pu.previousTranslate=Pu.translate,Pu.translate=Pu.isHorizontal()?ku:Fu;let Gu;const zu=Pu.maxTranslate()-Pu.minTranslate();zu===0?Gu=0:Gu=(Cu-Pu.minTranslate())/zu,Gu!==Du&&Pu.updateProgress(Cu),Pu.emit("setTranslate",Pu.translate,Tu)}function hy(){return-this.snapGrid[0]}function py(){return-this.snapGrid[this.snapGrid.length-1]}function my(Cu=0,Tu=this.params.speed,Pu=!0,Bu=!0,Lu){const Ru=this,{params:Ou,wrapperEl:Du}=Ru;if(Ru.animating&&Ou.preventInteractionOnTransition)return!1;const ku=Ru.minTranslate(),Fu=Ru.maxTranslate();let Nu;if(Bu&&Cu>ku?Nu=ku:Bu&&Cu<Fu?Nu=Fu:Nu=Cu,Ru.updateProgress(Nu),Ou.cssMode){const Gu=Ru.isHorizontal();if(Tu===0)Du[Gu?"scrollLeft":"scrollTop"]=-Nu;else{if(!Ru.support.smoothScroll)return Qd({swiper:Ru,targetPosition:-Nu,side:Gu?"left":"top"}),!0;Du.scrollTo({[Gu?"left":"top"]:-Nu,behavior:"smooth"})}return!0}return Tu===0?(Ru.setTransition(0),Ru.setTranslate(Nu),Pu&&(Ru.emit("beforeTransitionStart",Tu,Lu),Ru.emit("transitionEnd"))):(Ru.setTransition(Tu),Ru.setTranslate(Nu),Pu&&(Ru.emit("beforeTransitionStart",Tu,Lu),Ru.emit("transitionStart")),Ru.animating||(Ru.animating=!0,Ru.onTranslateToWrapperTransitionEnd||(Ru.onTranslateToWrapperTransitionEnd=function(Gu){!Ru||Ru.destroyed||Gu.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd),Ru.onTranslateToWrapperTransitionEnd=null,delete Ru.onTranslateToWrapperTransitionEnd,Pu&&Ru.emit("transitionEnd"))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onTranslateToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onTranslateToWrapperTransitionEnd))),!0}const gy={getTranslate:uy,setTranslate:fy,minTranslate:hy,maxTranslate:py,translateTo:my};function vy(Cu,Tu){const Pu=this;Pu.params.cssMode||Pu.$wrapperEl.transition(Cu),Pu.emit("setTransition",Cu,Tu)}function Xd({swiper:Cu,runCallbacks:Tu,direction:Pu,step:Bu}){const{activeIndex:Lu,previousIndex:Ru}=Cu;let Ou=Pu;if(Ou||(Lu>Ru?Ou="next":Lu<Ru?Ou="prev":Ou="reset"),Cu.emit(`transition${Bu}`),Tu&&Lu!==Ru){if(Ou==="reset"){Cu.emit(`slideResetTransition${Bu}`);return}Cu.emit(`slideChangeTransition${Bu}`),Ou==="next"?Cu.emit(`slideNextTransition${Bu}`):Cu.emit(`slidePrevTransition${Bu}`)}}function by(Cu=!0,Tu){const Pu=this,{params:Bu}=Pu;Bu.cssMode||(Bu.autoHeight&&Pu.updateAutoHeight(),Xd({swiper:Pu,runCallbacks:Cu,direction:Tu,step:"Start"}))}function Ay(Cu=!0,Tu){const Pu=this,{params:Bu}=Pu;Pu.animating=!1,!Bu.cssMode&&(Pu.setTransition(0),Xd({swiper:Pu,runCallbacks:Cu,direction:Tu,step:"End"}))}const yy={setTransition:vy,transitionStart:by,transitionEnd:Ay};function wy(Cu=0,Tu=this.params.speed,Pu=!0,Bu,Lu){if(typeof Cu!="number"&&typeof Cu!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof Cu}] given.`);if(typeof Cu=="string"){const _f=parseInt(Cu,10);if(!isFinite(_f))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${Cu}] given.`);Cu=_f}const Ru=this;let Ou=Cu;Ou<0&&(Ou=0);const{params:Du,snapGrid:ku,slidesGrid:Fu,previousIndex:Nu,activeIndex:Gu,rtlTranslate:zu,wrapperEl:Hu,enabled:Wu}=Ru;if(Ru.animating&&Du.preventInteractionOnTransition||!Wu&&!Bu&&!Lu)return!1;const _h=Math.min(Ru.params.slidesPerGroupSkip,Ou);let Xc=_h+Math.floor((Ou-_h)/Ru.params.slidesPerGroup);Xc>=ku.length&&(Xc=ku.length-1);const ju=-ku[Xc];if(Du.normalizeSlideIndex)for(let _f=0;_f<Fu.length;_f+=1){const ep=-Math.floor(ju*100),tp=Math.floor(Fu[_f]*100),op=Math.floor(Fu[_f+1]*100);typeof Fu[_f+1]<"u"?ep>=tp&&ep<op-(op-tp)/2?Ou=_f:ep>=tp&&ep<op&&(Ou=_f+1):ep>=tp&&(Ou=_f)}if(Ru.initialized&&Ou!==Gu&&(!Ru.allowSlideNext&&ju<Ru.translate&&ju<Ru.minTranslate()||!Ru.allowSlidePrev&&ju>Ru.translate&&ju>Ru.maxTranslate()&&(Gu||0)!==Ou))return!1;Ou!==(Nu||0)&&Pu&&Ru.emit("beforeSlideChangeStart"),Ru.updateProgress(ju);let _c;if(Ou>Gu?_c="next":Ou<Gu?_c="prev":_c="reset",zu&&-ju===Ru.translate||!zu&&ju===Ru.translate)return Ru.updateActiveIndex(Ou),Du.autoHeight&&Ru.updateAutoHeight(),Ru.updateSlidesClasses(),Du.effect!=="slide"&&Ru.setTranslate(ju),_c!=="reset"&&(Ru.transitionStart(Pu,_c),Ru.transitionEnd(Pu,_c)),!1;if(Du.cssMode){const _f=Ru.isHorizontal(),ep=zu?ju:-ju;if(Tu===0){const tp=Ru.virtual&&Ru.params.virtual.enabled;tp&&(Ru.wrapperEl.style.scrollSnapType="none",Ru._immediateVirtual=!0),Hu[_f?"scrollLeft":"scrollTop"]=ep,tp&&requestAnimationFrame(()=>{Ru.wrapperEl.style.scrollSnapType="",Ru._swiperImmediateVirtual=!1})}else{if(!Ru.support.smoothScroll)return Qd({swiper:Ru,targetPosition:ep,side:_f?"left":"top"}),!0;Hu.scrollTo({[_f?"left":"top"]:ep,behavior:"smooth"})}return!0}return Ru.setTransition(Tu),Ru.setTranslate(ju),Ru.updateActiveIndex(Ou),Ru.updateSlidesClasses(),Ru.emit("beforeTransitionStart",Tu,Bu),Ru.transitionStart(Pu,_c),Tu===0?Ru.transitionEnd(Pu,_c):Ru.animating||(Ru.animating=!0,Ru.onSlideToWrapperTransitionEnd||(Ru.onSlideToWrapperTransitionEnd=function(_f){!Ru||Ru.destroyed||_f.target===this&&(Ru.$wrapperEl[0].removeEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].removeEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd),Ru.onSlideToWrapperTransitionEnd=null,delete Ru.onSlideToWrapperTransitionEnd,Ru.transitionEnd(Pu,_c))}),Ru.$wrapperEl[0].addEventListener("transitionend",Ru.onSlideToWrapperTransitionEnd),Ru.$wrapperEl[0].addEventListener("webkitTransitionEnd",Ru.onSlideToWrapperTransitionEnd)),!0}function Ey(Cu=0,Tu=this.params.speed,Pu=!0,Bu){if(typeof Cu=="string"){const Ou=parseInt(Cu,10);if(!isFinite(Ou))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${Cu}] given.`);Cu=Ou}const Lu=this;let Ru=Cu;return Lu.params.loop&&(Ru+=Lu.loopedSlides),Lu.slideTo(Ru,Tu,Pu,Bu)}function Cy(Cu=this.params.speed,Tu=!0,Pu){const Bu=this,{animating:Lu,enabled:Ru,params:Ou}=Bu;if(!Ru)return Bu;let Du=Ou.slidesPerGroup;Ou.slidesPerView==="auto"&&Ou.slidesPerGroup===1&&Ou.slidesPerGroupAuto&&(Du=Math.max(Bu.slidesPerViewDynamic("current",!0),1));const ku=Bu.activeIndex<Ou.slidesPerGroupSkip?1:Du;if(Ou.loop){if(Lu&&Ou.loopPreventsSlide)return!1;Bu.loopFix(),Bu._clientLeft=Bu.$wrapperEl[0].clientLeft}return Ou.rewind&&Bu.isEnd?Bu.slideTo(0,Cu,Tu,Pu):Bu.slideTo(Bu.activeIndex+ku,Cu,Tu,Pu)}function Py(Cu=this.params.speed,Tu=!0,Pu){const Bu=this,{params:Lu,animating:Ru,snapGrid:Ou,slidesGrid:Du,rtlTranslate:ku,enabled:Fu}=Bu;if(!Fu)return Bu;if(Lu.loop){if(Ru&&Lu.loopPreventsSlide)return!1;Bu.loopFix(),Bu._clientLeft=Bu.$wrapperEl[0].clientLeft}const Nu=ku?Bu.translate:-Bu.translate;function Gu(Xc){return Xc<0?-Math.floor(Math.abs(Xc)):Math.floor(Xc)}const zu=Gu(Nu),Hu=Ou.map(Xc=>Gu(Xc));let Wu=Ou[Hu.indexOf(zu)-1];if(typeof Wu>"u"&&Lu.cssMode){let Xc;Ou.forEach((ju,_c)=>{zu>=ju&&(Xc=_c)}),typeof Xc<"u"&&(Wu=Ou[Xc>0?Xc-1:Xc])}let _h=0;if(typeof Wu<"u"&&(_h=Du.indexOf(Wu),_h<0&&(_h=Bu.activeIndex-1),Lu.slidesPerView==="auto"&&Lu.slidesPerGroup===1&&Lu.slidesPerGroupAuto&&(_h=_h-Bu.slidesPerViewDynamic("previous",!0)+1,_h=Math.max(_h,0))),Lu.rewind&&Bu.isBeginning){const Xc=Bu.params.virtual&&Bu.params.virtual.enabled&&Bu.virtual?Bu.virtual.slides.length-1:Bu.slides.length-1;return Bu.slideTo(Xc,Cu,Tu,Pu)}return Bu.slideTo(_h,Cu,Tu,Pu)}function xy(Cu=this.params.speed,Tu=!0,Pu){const Bu=this;return Bu.slideTo(Bu.activeIndex,Cu,Tu,Pu)}function Iy(Cu=this.params.speed,Tu=!0,Pu,Bu=.5){const Lu=this;let Ru=Lu.activeIndex;const Ou=Math.min(Lu.params.slidesPerGroupSkip,Ru),Du=Ou+Math.floor((Ru-Ou)/Lu.params.slidesPerGroup),ku=Lu.rtlTranslate?Lu.translate:-Lu.translate;if(ku>=Lu.snapGrid[Du]){const Fu=Lu.snapGrid[Du],Nu=Lu.snapGrid[Du+1];ku-Fu>(Nu-Fu)*Bu&&(Ru+=Lu.params.slidesPerGroup)}else{const Fu=Lu.snapGrid[Du-1],Nu=Lu.snapGrid[Du];ku-Fu<=(Nu-Fu)*Bu&&(Ru-=Lu.params.slidesPerGroup)}return Ru=Math.max(Ru,0),Ru=Math.min(Ru,Lu.slidesGrid.length-1),Lu.slideTo(Ru,Cu,Tu,Pu)}function Ty(){const Cu=this,{params:Tu,$wrapperEl:Pu}=Cu,Bu=Tu.slidesPerView==="auto"?Cu.slidesPerViewDynamic():Tu.slidesPerView;let Lu=Cu.clickedIndex,Ru;if(Tu.loop){if(Cu.animating)return;Ru=parseInt(ae(Cu.clickedSlide).attr("data-swiper-slide-index"),10),Tu.centeredSlides?Lu<Cu.loopedSlides-Bu/2||Lu>Cu.slides.length-Cu.loopedSlides+Bu/2?(Cu.loopFix(),Lu=Pu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),cs(()=>{Cu.slideTo(Lu)})):Cu.slideTo(Lu):Lu>Cu.slides.length-Bu?(Cu.loopFix(),Lu=Pu.children(`.${Tu.slideClass}[data-swiper-slide-index="${Ru}"]:not(.${Tu.slideDuplicateClass})`).eq(0).index(),cs(()=>{Cu.slideTo(Lu)})):Cu.slideTo(Lu)}else Cu.slideTo(Lu)}const Sy={slideTo:wy,slideToLoop:Ey,slideNext:Cy,slidePrev:Py,slideReset:xy,slideToClosest:Iy,slideToClickedSlide:Ty};function ky(){const Cu=this,Tu=Ke(),{params:Pu,$wrapperEl:Bu}=Cu,Lu=Bu.children().length>0?ae(Bu.children()[0].parentNode):Bu;Lu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass}`).remove();let Ru=Lu.children(`.${Pu.slideClass}`);if(Pu.loopFillGroupWithBlank){const ku=Pu.slidesPerGroup-Ru.length%Pu.slidesPerGroup;if(ku!==Pu.slidesPerGroup){for(let Fu=0;Fu<ku;Fu+=1){const Nu=ae(Tu.createElement("div")).addClass(`${Pu.slideClass} ${Pu.slideBlankClass}`);Lu.append(Nu)}Ru=Lu.children(`.${Pu.slideClass}`)}}Pu.slidesPerView==="auto"&&!Pu.loopedSlides&&(Pu.loopedSlides=Ru.length),Cu.loopedSlides=Math.ceil(parseFloat(Pu.loopedSlides||Pu.slidesPerView,10)),Cu.loopedSlides+=Pu.loopAdditionalSlides,Cu.loopedSlides>Ru.length&&Cu.params.loopedSlidesLimit&&(Cu.loopedSlides=Ru.length);const Ou=[],Du=[];Ru.each((ku,Fu)=>{ae(ku).attr("data-swiper-slide-index",Fu)});for(let ku=0;ku<Cu.loopedSlides;ku+=1){const Fu=ku-Math.floor(ku/Ru.length)*Ru.length;Du.push(Ru.eq(Fu)[0]),Ou.unshift(Ru.eq(Ru.length-Fu-1)[0])}for(let ku=0;ku<Du.length;ku+=1)Lu.append(ae(Du[ku].cloneNode(!0)).addClass(Pu.slideDuplicateClass));for(let ku=Ou.length-1;ku>=0;ku-=1)Lu.prepend(ae(Ou[ku].cloneNode(!0)).addClass(Pu.slideDuplicateClass))}function Dy(){const Cu=this;Cu.emit("beforeLoopFix");const{activeIndex:Tu,slides:Pu,loopedSlides:Bu,allowSlidePrev:Lu,allowSlideNext:Ru,snapGrid:Ou,rtlTranslate:Du}=Cu;let ku;Cu.allowSlidePrev=!0,Cu.allowSlideNext=!0;const Fu=-Ou[Tu]-Cu.getTranslate();Tu<Bu?(ku=Pu.length-Bu*3+Tu,ku+=Bu,Cu.slideTo(ku,0,!1,!0)&&Fu!==0&&Cu.setTranslate((Du?-Cu.translate:Cu.translate)-Fu)):Tu>=Pu.length-Bu&&(ku=-Pu.length+Tu+Bu,ku+=Bu,Cu.slideTo(ku,0,!1,!0)&&Fu!==0&&Cu.setTranslate((Du?-Cu.translate:Cu.translate)-Fu)),Cu.allowSlidePrev=Lu,Cu.allowSlideNext=Ru,Cu.emit("loopFix")}function Ly(){const Cu=this,{$wrapperEl:Tu,params:Pu,slides:Bu}=Cu;Tu.children(`.${Pu.slideClass}.${Pu.slideDuplicateClass},.${Pu.slideClass}.${Pu.slideBlankClass}`).remove(),Bu.removeAttr("data-swiper-slide-index")}const My={loopCreate:ky,loopFix:Dy,loopDestroy:Ly};function zy(Cu){const Tu=this;if(Tu.support.touch||!Tu.params.simulateTouch||Tu.params.watchOverflow&&Tu.isLocked||Tu.params.cssMode)return;const Pu=Tu.params.touchEventsTarget==="container"?Tu.el:Tu.wrapperEl;Pu.style.cursor="move",Pu.style.cursor=Cu?"grabbing":"grab"}function Oy(){const Cu=this;Cu.support.touch||Cu.params.watchOverflow&&Cu.isLocked||Cu.params.cssMode||(Cu[Cu.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const jy={setGrabCursor:zy,unsetGrabCursor:Oy};function By(Cu,Tu=this){function Pu(Bu){if(!Bu||Bu===Ke()||Bu===_e())return null;Bu.assignedSlot&&(Bu=Bu.assignedSlot);const Lu=Bu.closest(Cu);return!Lu&&!Bu.getRootNode?null:Lu||Pu(Bu.getRootNode().host)}return Pu(Tu)}function Ry(Cu){const Tu=this,Pu=Ke(),Bu=_e(),Lu=Tu.touchEventsData,{params:Ru,touches:Ou,enabled:Du}=Tu;if(!Du||Tu.animating&&Ru.preventInteractionOnTransition)return;!Tu.animating&&Ru.cssMode&&Ru.loop&&Tu.loopFix();let ku=Cu;ku.originalEvent&&(ku=ku.originalEvent);let Fu=ae(ku.target);if(Ru.touchEventsTarget==="wrapper"&&!Fu.closest(Tu.wrapperEl).length||(Lu.isTouchEvent=ku.type==="touchstart",!Lu.isTouchEvent&&"which"in ku&&ku.which===3)||!Lu.isTouchEvent&&"button"in ku&&ku.button>0||Lu.isTouched&&Lu.isMoved)return;const Nu=!!Ru.noSwipingClass&&Ru.noSwipingClass!=="",Gu=Cu.composedPath?Cu.composedPath():Cu.path;Nu&&ku.target&&ku.target.shadowRoot&&Gu&&(Fu=ae(Gu[0]));const zu=Ru.noSwipingSelector?Ru.noSwipingSelector:`.${Ru.noSwipingClass}`,Hu=!!(ku.target&&ku.target.shadowRoot);if(Ru.noSwiping&&(Hu?By(zu,Fu[0]):Fu.closest(zu)[0])){Tu.allowClick=!0;return}if(Ru.swipeHandler&&!Fu.closest(Ru.swipeHandler)[0])return;Ou.currentX=ku.type==="touchstart"?ku.targetTouches[0].pageX:ku.pageX,Ou.currentY=ku.type==="touchstart"?ku.targetTouches[0].pageY:ku.pageY;const Wu=Ou.currentX,_h=Ou.currentY,Xc=Ru.edgeSwipeDetection||Ru.iOSEdgeSwipeDetection,ju=Ru.edgeSwipeThreshold||Ru.iOSEdgeSwipeThreshold;if(Xc&&(Wu<=ju||Wu>=Bu.innerWidth-ju))if(Xc==="prevent")Cu.preventDefault();else return;if(Object.assign(Lu,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Ou.startX=Wu,Ou.startY=_h,Lu.touchStartTime=ii(),Tu.allowClick=!0,Tu.updateSize(),Tu.swipeDirection=void 0,Ru.threshold>0&&(Lu.allowThresholdMove=!1),ku.type!=="touchstart"){let _c=!0;Fu.is(Lu.focusableElements)&&(_c=!1,Fu[0].nodeName==="SELECT"&&(Lu.isTouched=!1)),Pu.activeElement&&ae(Pu.activeElement).is(Lu.focusableElements)&&Pu.activeElement!==Fu[0]&&Pu.activeElement.blur();const _f=_c&&Tu.allowTouchMove&&Ru.touchStartPreventDefault;(Ru.touchStartForcePreventDefault||_f)&&!Fu[0].isContentEditable&&ku.preventDefault()}Tu.params.freeMode&&Tu.params.freeMode.enabled&&Tu.freeMode&&Tu.animating&&!Ru.cssMode&&Tu.freeMode.onTouchStart(),Tu.emit("touchStart",ku)}function Hy(Cu){const Tu=Ke(),Pu=this,Bu=Pu.touchEventsData,{params:Lu,touches:Ru,rtlTranslate:Ou,enabled:Du}=Pu;if(!Du)return;let ku=Cu;if(ku.originalEvent&&(ku=ku.originalEvent),!Bu.isTouched){Bu.startMoving&&Bu.isScrolling&&Pu.emit("touchMoveOpposite",ku);return}if(Bu.isTouchEvent&&ku.type!=="touchmove")return;const Fu=ku.type==="touchmove"&&ku.targetTouches&&(ku.targetTouches[0]||ku.changedTouches[0]),Nu=ku.type==="touchmove"?Fu.pageX:ku.pageX,Gu=ku.type==="touchmove"?Fu.pageY:ku.pageY;if(ku.preventedByNestedSwiper){Ru.startX=Nu,Ru.startY=Gu;return}if(!Pu.allowTouchMove){ae(ku.target).is(Bu.focusableElements)||(Pu.allowClick=!1),Bu.isTouched&&(Object.assign(Ru,{startX:Nu,startY:Gu,currentX:Nu,currentY:Gu}),Bu.touchStartTime=ii());return}if(Bu.isTouchEvent&&Lu.touchReleaseOnEdges&&!Lu.loop){if(Pu.isVertical()){if(Gu<Ru.startY&&Pu.translate<=Pu.maxTranslate()||Gu>Ru.startY&&Pu.translate>=Pu.minTranslate()){Bu.isTouched=!1,Bu.isMoved=!1;return}}else if(Nu<Ru.startX&&Pu.translate<=Pu.maxTranslate()||Nu>Ru.startX&&Pu.translate>=Pu.minTranslate())return}if(Bu.isTouchEvent&&Tu.activeElement&&ku.target===Tu.activeElement&&ae(ku.target).is(Bu.focusableElements)){Bu.isMoved=!0,Pu.allowClick=!1;return}if(Bu.allowTouchCallbacks&&Pu.emit("touchMove",ku),ku.targetTouches&&ku.targetTouches.length>1)return;Ru.currentX=Nu,Ru.currentY=Gu;const zu=Ru.currentX-Ru.startX,Hu=Ru.currentY-Ru.startY;if(Pu.params.threshold&&Math.sqrt(zu**2+Hu**2)<Pu.params.threshold)return;if(typeof Bu.isScrolling>"u"){let ju;Pu.isHorizontal()&&Ru.currentY===Ru.startY||Pu.isVertical()&&Ru.currentX===Ru.startX?Bu.isScrolling=!1:zu*zu+Hu*Hu>=25&&(ju=Math.atan2(Math.abs(Hu),Math.abs(zu))*180/Math.PI,Bu.isScrolling=Pu.isHorizontal()?ju>Lu.touchAngle:90-ju>Lu.touchAngle)}if(Bu.isScrolling&&Pu.emit("touchMoveOpposite",ku),typeof Bu.startMoving>"u"&&(Ru.currentX!==Ru.startX||Ru.currentY!==Ru.startY)&&(Bu.startMoving=!0),Bu.isScrolling){Bu.isTouched=!1;return}if(!Bu.startMoving)return;Pu.allowClick=!1,!Lu.cssMode&&ku.cancelable&&ku.preventDefault(),Lu.touchMoveStopPropagation&&!Lu.nested&&ku.stopPropagation(),Bu.isMoved||(Lu.loop&&!Lu.cssMode&&Pu.loopFix(),Bu.startTranslate=Pu.getTranslate(),Pu.setTransition(0),Pu.animating&&Pu.$wrapperEl.trigger("webkitTransitionEnd transitionend"),Bu.allowMomentumBounce=!1,Lu.grabCursor&&(Pu.allowSlideNext===!0||Pu.allowSlidePrev===!0)&&Pu.setGrabCursor(!0),Pu.emit("sliderFirstMove",ku)),Pu.emit("sliderMove",ku),Bu.isMoved=!0;let Wu=Pu.isHorizontal()?zu:Hu;Ru.diff=Wu,Wu*=Lu.touchRatio,Ou&&(Wu=-Wu),Pu.swipeDirection=Wu>0?"prev":"next",Bu.currentTranslate=Wu+Bu.startTranslate;let _h=!0,Xc=Lu.resistanceRatio;if(Lu.touchReleaseOnEdges&&(Xc=0),Wu>0&&Bu.currentTranslate>Pu.minTranslate()?(_h=!1,Lu.resistance&&(Bu.currentTranslate=Pu.minTranslate()-1+(-Pu.minTranslate()+Bu.startTranslate+Wu)**Xc)):Wu<0&&Bu.currentTranslate<Pu.maxTranslate()&&(_h=!1,Lu.resistance&&(Bu.currentTranslate=Pu.maxTranslate()+1-(Pu.maxTranslate()-Bu.startTranslate-Wu)**Xc)),_h&&(ku.preventedByNestedSwiper=!0),!Pu.allowSlideNext&&Pu.swipeDirection==="next"&&Bu.currentTranslate<Bu.startTranslate&&(Bu.currentTranslate=Bu.startTranslate),!Pu.allowSlidePrev&&Pu.swipeDirection==="prev"&&Bu.currentTranslate>Bu.startTranslate&&(Bu.currentTranslate=Bu.startTranslate),!Pu.allowSlidePrev&&!Pu.allowSlideNext&&(Bu.currentTranslate=Bu.startTranslate),Lu.threshold>0)if(Math.abs(Wu)>Lu.threshold||Bu.allowThresholdMove){if(!Bu.allowThresholdMove){Bu.allowThresholdMove=!0,Ru.startX=Ru.currentX,Ru.startY=Ru.currentY,Bu.currentTranslate=Bu.startTranslate,Ru.diff=Pu.isHorizontal()?Ru.currentX-Ru.startX:Ru.currentY-Ru.startY;return}}else{Bu.currentTranslate=Bu.startTranslate;return}!Lu.followFinger||Lu.cssMode||((Lu.freeMode&&Lu.freeMode.enabled&&Pu.freeMode||Lu.watchSlidesProgress)&&(Pu.updateActiveIndex(),Pu.updateSlidesClasses()),Pu.params.freeMode&&Lu.freeMode.enabled&&Pu.freeMode&&Pu.freeMode.onTouchMove(),Pu.updateProgress(Bu.currentTranslate),Pu.setTranslate(Bu.currentTranslate))}function Ny(Cu){const Tu=this,Pu=Tu.touchEventsData,{params:Bu,touches:Lu,rtlTranslate:Ru,slidesGrid:Ou,enabled:Du}=Tu;if(!Du)return;let ku=Cu;if(ku.originalEvent&&(ku=ku.originalEvent),Pu.allowTouchCallbacks&&Tu.emit("touchEnd",ku),Pu.allowTouchCallbacks=!1,!Pu.isTouched){Pu.isMoved&&Bu.grabCursor&&Tu.setGrabCursor(!1),Pu.isMoved=!1,Pu.startMoving=!1;return}Bu.grabCursor&&Pu.isMoved&&Pu.isTouched&&(Tu.allowSlideNext===!0||Tu.allowSlidePrev===!0)&&Tu.setGrabCursor(!1);const Fu=ii(),Nu=Fu-Pu.touchStartTime;if(Tu.allowClick){const _c=ku.path||ku.composedPath&&ku.composedPath();Tu.updateClickedSlide(_c&&_c[0]||ku.target),Tu.emit("tap click",ku),Nu<300&&Fu-Pu.lastClickTime<300&&Tu.emit("doubleTap doubleClick",ku)}if(Pu.lastClickTime=ii(),cs(()=>{Tu.destroyed||(Tu.allowClick=!0)}),!Pu.isTouched||!Pu.isMoved||!Tu.swipeDirection||Lu.diff===0||Pu.currentTranslate===Pu.startTranslate){Pu.isTouched=!1,Pu.isMoved=!1,Pu.startMoving=!1;return}Pu.isTouched=!1,Pu.isMoved=!1,Pu.startMoving=!1;let Gu;if(Bu.followFinger?Gu=Ru?Tu.translate:-Tu.translate:Gu=-Pu.currentTranslate,Bu.cssMode)return;if(Tu.params.freeMode&&Bu.freeMode.enabled){Tu.freeMode.onTouchEnd({currentPos:Gu});return}let zu=0,Hu=Tu.slidesSizesGrid[0];for(let _c=0;_c<Ou.length;_c+=_c<Bu.slidesPerGroupSkip?1:Bu.slidesPerGroup){const _f=_c<Bu.slidesPerGroupSkip-1?1:Bu.slidesPerGroup;typeof Ou[_c+_f]<"u"?Gu>=Ou[_c]&&Gu<Ou[_c+_f]&&(zu=_c,Hu=Ou[_c+_f]-Ou[_c]):Gu>=Ou[_c]&&(zu=_c,Hu=Ou[Ou.length-1]-Ou[Ou.length-2])}let Wu=null,_h=null;Bu.rewind&&(Tu.isBeginning?_h=Tu.params.virtual&&Tu.params.virtual.enabled&&Tu.virtual?Tu.virtual.slides.length-1:Tu.slides.length-1:Tu.isEnd&&(Wu=0));const Xc=(Gu-Ou[zu])/Hu,ju=zu<Bu.slidesPerGroupSkip-1?1:Bu.slidesPerGroup;if(Nu>Bu.longSwipesMs){if(!Bu.longSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.swipeDirection==="next"&&(Xc>=Bu.longSwipesRatio?Tu.slideTo(Bu.rewind&&Tu.isEnd?Wu:zu+ju):Tu.slideTo(zu)),Tu.swipeDirection==="prev"&&(Xc>1-Bu.longSwipesRatio?Tu.slideTo(zu+ju):_h!==null&&Xc<0&&Math.abs(Xc)>Bu.longSwipesRatio?Tu.slideTo(_h):Tu.slideTo(zu))}else{if(!Bu.shortSwipes){Tu.slideTo(Tu.activeIndex);return}Tu.navigation&&(ku.target===Tu.navigation.nextEl||ku.target===Tu.navigation.prevEl)?ku.target===Tu.navigation.nextEl?Tu.slideTo(zu+ju):Tu.slideTo(zu):(Tu.swipeDirection==="next"&&Tu.slideTo(Wu!==null?Wu:zu+ju),Tu.swipeDirection==="prev"&&Tu.slideTo(_h!==null?_h:zu))}}function Il(){const Cu=this,{params:Tu,el:Pu}=Cu;if(Pu&&Pu.offsetWidth===0)return;Tu.breakpoints&&Cu.setBreakpoint();const{allowSlideNext:Bu,allowSlidePrev:Lu,snapGrid:Ru}=Cu;Cu.allowSlideNext=!0,Cu.allowSlidePrev=!0,Cu.updateSize(),Cu.updateSlides(),Cu.updateSlidesClasses(),(Tu.slidesPerView==="auto"||Tu.slidesPerView>1)&&Cu.isEnd&&!Cu.isBeginning&&!Cu.params.centeredSlides?Cu.slideTo(Cu.slides.length-1,0,!1,!0):Cu.slideTo(Cu.activeIndex,0,!1,!0),Cu.autoplay&&Cu.autoplay.running&&Cu.autoplay.paused&&Cu.autoplay.run(),Cu.allowSlidePrev=Lu,Cu.allowSlideNext=Bu,Cu.params.watchOverflow&&Ru!==Cu.snapGrid&&Cu.checkOverflow()}function Gy(Cu){const Tu=this;!Tu.enabled||Tu.allowClick||(Tu.params.preventClicks&&Cu.preventDefault(),Tu.params.preventClicksPropagation&&Tu.animating&&(Cu.stopPropagation(),Cu.stopImmediatePropagation()))}function Fy(){const Cu=this,{wrapperEl:Tu,rtlTranslate:Pu,enabled:Bu}=Cu;if(!Bu)return;Cu.previousTranslate=Cu.translate,Cu.isHorizontal()?Cu.translate=-Tu.scrollLeft:Cu.translate=-Tu.scrollTop,Cu.translate===0&&(Cu.translate=0),Cu.updateActiveIndex(),Cu.updateSlidesClasses();let Lu;const Ru=Cu.maxTranslate()-Cu.minTranslate();Ru===0?Lu=0:Lu=(Cu.translate-Cu.minTranslate())/Ru,Lu!==Cu.progress&&Cu.updateProgress(Pu?-Cu.translate:Cu.translate),Cu.emit("setTranslate",Cu.translate,!1)}let Tl=!1;function Wy(){}const Yd=(Cu,Tu)=>{const Pu=Ke(),{params:Bu,touchEvents:Lu,el:Ru,wrapperEl:Ou,device:Du,support:ku}=Cu,Fu=!!Bu.nested,Nu=Tu==="on"?"addEventListener":"removeEventListener",Gu=Tu;if(!ku.touch)Ru[Nu](Lu.start,Cu.onTouchStart,!1),Pu[Nu](Lu.move,Cu.onTouchMove,Fu),Pu[Nu](Lu.end,Cu.onTouchEnd,!1);else{const zu=Lu.start==="touchstart"&&ku.passiveListener&&Bu.passiveListeners?{passive:!0,capture:!1}:!1;Ru[Nu](Lu.start,Cu.onTouchStart,zu),Ru[Nu](Lu.move,Cu.onTouchMove,ku.passiveListener?{passive:!1,capture:Fu}:Fu),Ru[Nu](Lu.end,Cu.onTouchEnd,zu),Lu.cancel&&Ru[Nu](Lu.cancel,Cu.onTouchEnd,zu)}(Bu.preventClicks||Bu.preventClicksPropagation)&&Ru[Nu]("click",Cu.onClick,!0),Bu.cssMode&&Ou[Nu]("scroll",Cu.onScroll),Bu.updateOnWindowResize?Cu[Gu](Du.ios||Du.android?"resize orientationchange observerUpdate":"resize observerUpdate",Il,!0):Cu[Gu]("observerUpdate",Il,!0)};function Qy(){const Cu=this,Tu=Ke(),{params:Pu,support:Bu}=Cu;Cu.onTouchStart=Ry.bind(Cu),Cu.onTouchMove=Hy.bind(Cu),Cu.onTouchEnd=Ny.bind(Cu),Pu.cssMode&&(Cu.onScroll=Fy.bind(Cu)),Cu.onClick=Gy.bind(Cu),Bu.touch&&!Tl&&(Tu.addEventListener("touchstart",Wy),Tl=!0),Yd(Cu,"on")}function _y(){Yd(this,"off")}const Xy={attachEvents:Qy,detachEvents:_y},Sl=(Cu,Tu)=>Cu.grid&&Tu.grid&&Tu.grid.rows>1;function Yy(){const Cu=this,{activeIndex:Tu,initialized:Pu,loopedSlides:Bu=0,params:Lu,$el:Ru}=Cu,Ou=Lu.breakpoints;if(!Ou||Ou&&Object.keys(Ou).length===0)return;const Du=Cu.getBreakpoint(Ou,Cu.params.breakpointsBase,Cu.el);if(!Du||Cu.currentBreakpoint===Du)return;const ku=(Du in Ou?Ou[Du]:void 0)||Cu.originalParams,Fu=Sl(Cu,Lu),Nu=Sl(Cu,ku),Gu=Lu.enabled;Fu&&!Nu?(Ru.removeClass(`${Lu.containerModifierClass}grid ${Lu.containerModifierClass}grid-column`),Cu.emitContainerClasses()):!Fu&&Nu&&(Ru.addClass(`${Lu.containerModifierClass}grid`),(ku.grid.fill&&ku.grid.fill==="column"||!ku.grid.fill&&Lu.grid.fill==="column")&&Ru.addClass(`${Lu.containerModifierClass}grid-column`),Cu.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(_h=>{const Xc=Lu[_h]&&Lu[_h].enabled,ju=ku[_h]&&ku[_h].enabled;Xc&&!ju&&Cu[_h].disable(),!Xc&&ju&&Cu[_h].enable()});const zu=ku.direction&&ku.direction!==Lu.direction,Hu=Lu.loop&&(ku.slidesPerView!==Lu.slidesPerView||zu);zu&&Pu&&Cu.changeDirection(),dt(Cu.params,ku);const Wu=Cu.params.enabled;Object.assign(Cu,{allowTouchMove:Cu.params.allowTouchMove,allowSlideNext:Cu.params.allowSlideNext,allowSlidePrev:Cu.params.allowSlidePrev}),Gu&&!Wu?Cu.disable():!Gu&&Wu&&Cu.enable(),Cu.currentBreakpoint=Du,Cu.emit("_beforeBreakpoint",ku),Hu&&Pu&&(Cu.loopDestroy(),Cu.loopCreate(),Cu.updateSlides(),Cu.slideTo(Tu-Bu+Cu.loopedSlides,0,!1)),Cu.emit("breakpoint",ku)}function Vy(Cu,Tu="window",Pu){if(!Cu||Tu==="container"&&!Pu)return;let Bu=!1;const Lu=_e(),Ru=Tu==="window"?Lu.innerHeight:Pu.clientHeight,Ou=Object.keys(Cu).map(Du=>{if(typeof Du=="string"&&Du.indexOf("@")===0){const ku=parseFloat(Du.substr(1));return{value:Ru*ku,point:Du}}return{value:Du,point:Du}});Ou.sort((Du,ku)=>parseInt(Du.value,10)-parseInt(ku.value,10));for(let Du=0;Du<Ou.length;Du+=1){const{point:ku,value:Fu}=Ou[Du];Tu==="window"?Lu.matchMedia(`(min-width: ${Fu}px)`).matches&&(Bu=ku):Fu<=Pu.clientWidth&&(Bu=ku)}return Bu||"max"}const Uy={setBreakpoint:Yy,getBreakpoint:Vy};function Zy(Cu,Tu){const Pu=[];return Cu.forEach(Bu=>{typeof Bu=="object"?Object.keys(Bu).forEach(Lu=>{Bu[Lu]&&Pu.push(Tu+Lu)}):typeof Bu=="string"&&Pu.push(Tu+Bu)}),Pu}function Jy(){const Cu=this,{classNames:Tu,params:Pu,rtl:Bu,$el:Lu,device:Ru,support:Ou}=Cu,Du=Zy(["initialized",Pu.direction,{"pointer-events":!Ou.touch},{"free-mode":Cu.params.freeMode&&Pu.freeMode.enabled},{autoheight:Pu.autoHeight},{rtl:Bu},{grid:Pu.grid&&Pu.grid.rows>1},{"grid-column":Pu.grid&&Pu.grid.rows>1&&Pu.grid.fill==="column"},{android:Ru.android},{ios:Ru.ios},{"css-mode":Pu.cssMode},{centered:Pu.cssMode&&Pu.centeredSlides},{"watch-progress":Pu.watchSlidesProgress}],Pu.containerModifierClass);Tu.push(...Du),Lu.addClass([...Tu].join(" ")),Cu.emitContainerClasses()}function qy(){const Cu=this,{$el:Tu,classNames:Pu}=Cu;Tu.removeClass(Pu.join(" ")),Cu.emitContainerClasses()}const Ky={addClasses:Jy,removeClasses:qy};function $y(Cu,Tu,Pu,Bu,Lu,Ru){const Ou=_e();let Du;function ku(){Ru&&Ru()}!ae(Cu).parent("picture")[0]&&(!Cu.complete||!Lu)&&Tu?(Du=new Ou.Image,Du.onload=ku,Du.onerror=ku,Bu&&(Du.sizes=Bu),Pu&&(Du.srcset=Pu),Tu&&(Du.src=Tu)):ku()}function ew(){const Cu=this;Cu.imagesToLoad=Cu.$el.find("img");function Tu(){typeof Cu>"u"||Cu===null||!Cu||Cu.destroyed||(Cu.imagesLoaded!==void 0&&(Cu.imagesLoaded+=1),Cu.imagesLoaded===Cu.imagesToLoad.length&&(Cu.params.updateOnImagesReady&&Cu.update(),Cu.emit("imagesReady")))}for(let Pu=0;Pu<Cu.imagesToLoad.length;Pu+=1){const Bu=Cu.imagesToLoad[Pu];Cu.loadImage(Bu,Bu.currentSrc||Bu.getAttribute("src"),Bu.srcset||Bu.getAttribute("srcset"),Bu.sizes||Bu.getAttribute("sizes"),!0,Tu)}}const tw={loadImage:$y,preloadImages:ew};function nw(){const Cu=this,{isLocked:Tu,params:Pu}=Cu,{slidesOffsetBefore:Bu}=Pu;if(Bu){const Lu=Cu.slides.length-1,Ru=Cu.slidesGrid[Lu]+Cu.slidesSizesGrid[Lu]+Bu*2;Cu.isLocked=Cu.size>Ru}else Cu.isLocked=Cu.snapGrid.length===1;Pu.allowSlideNext===!0&&(Cu.allowSlideNext=!Cu.isLocked),Pu.allowSlidePrev===!0&&(Cu.allowSlidePrev=!Cu.isLocked),Tu&&Tu!==Cu.isLocked&&(Cu.isEnd=!1),Tu!==Cu.isLocked&&Cu.emit(Cu.isLocked?"lock":"unlock")}const iw={checkOverflow:nw},kl={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function sw(Cu,Tu){return function(Pu={}){const Bu=Object.keys(Pu)[0],Lu=Pu[Bu];if(typeof Lu!="object"||Lu===null){dt(Tu,Pu);return}if(["navigation","pagination","scrollbar"].indexOf(Bu)>=0&&Cu[Bu]===!0&&(Cu[Bu]={auto:!0}),!(Bu in Cu&&"enabled"in Lu)){dt(Tu,Pu);return}Cu[Bu]===!0&&(Cu[Bu]={enabled:!0}),typeof Cu[Bu]=="object"&&!("enabled"in Cu[Bu])&&(Cu[Bu].enabled=!0),Cu[Bu]||(Cu[Bu]={enabled:!1}),dt(Tu,Pu)}}const $s={eventsEmitter:ey,update:dy,translate:gy,transition:yy,slide:Sy,loop:My,grabCursor:jy,events:Xy,breakpoints:Uy,checkOverflow:iw,classes:Ky,images:tw},eo={};class bt{constructor(...Tu){let Pu,Bu;if(Tu.length===1&&Tu[0].constructor&&Object.prototype.toString.call(Tu[0]).slice(8,-1)==="Object"?Bu=Tu[0]:[Pu,Bu]=Tu,Bu||(Bu={}),Bu=dt({},Bu),Pu&&!Bu.el&&(Bu.el=Pu),Bu.el&&ae(Bu.el).length>1){const Du=[];return ae(Bu.el).each(ku=>{const Fu=dt({},Bu,{el:ku});Du.push(new bt(Fu))}),Du}const Lu=this;Lu.__swiper__=!0,Lu.support=_d(),Lu.device=ZA({userAgent:Bu.userAgent}),Lu.browser=qA(),Lu.eventsListeners={},Lu.eventsAnyListeners=[],Lu.modules=[...Lu.__modules__],Bu.modules&&Array.isArray(Bu.modules)&&Lu.modules.push(...Bu.modules);const Ru={};Lu.modules.forEach(Du=>{Du({swiper:Lu,extendParams:sw(Bu,Ru),on:Lu.on.bind(Lu),once:Lu.once.bind(Lu),off:Lu.off.bind(Lu),emit:Lu.emit.bind(Lu)})});const Ou=dt({},kl,Ru);return Lu.params=dt({},Ou,eo,Bu),Lu.originalParams=dt({},Lu.params),Lu.passedParams=dt({},Bu),Lu.params&&Lu.params.on&&Object.keys(Lu.params.on).forEach(Du=>{Lu.on(Du,Lu.params.on[Du])}),Lu.params&&Lu.params.onAny&&Lu.onAny(Lu.params.onAny),Lu.$=ae,Object.assign(Lu,{enabled:Lu.params.enabled,el:Pu,classNames:[],slides:ae(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return Lu.params.direction==="horizontal"},isVertical(){return Lu.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:Lu.params.allowSlideNext,allowSlidePrev:Lu.params.allowSlidePrev,touchEvents:function(){const Du=["touchstart","touchmove","touchend","touchcancel"],ku=["pointerdown","pointermove","pointerup"];return Lu.touchEventsTouch={start:Du[0],move:Du[1],end:Du[2],cancel:Du[3]},Lu.touchEventsDesktop={start:ku[0],move:ku[1],end:ku[2]},Lu.support.touch||!Lu.params.simulateTouch?Lu.touchEventsTouch:Lu.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:Lu.params.focusableElements,lastClickTime:ii(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:Lu.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),Lu.emit("_swiper"),Lu.params.init&&Lu.init(),Lu}enable(){const Tu=this;Tu.enabled||(Tu.enabled=!0,Tu.params.grabCursor&&Tu.setGrabCursor(),Tu.emit("enable"))}disable(){const Tu=this;!Tu.enabled||(Tu.enabled=!1,Tu.params.grabCursor&&Tu.unsetGrabCursor(),Tu.emit("disable"))}setProgress(Tu,Pu){const Bu=this;Tu=Math.min(Math.max(Tu,0),1);const Lu=Bu.minTranslate(),Ru=(Bu.maxTranslate()-Lu)*Tu+Lu;Bu.translateTo(Ru,typeof Pu>"u"?0:Pu),Bu.updateActiveIndex(),Bu.updateSlidesClasses()}emitContainerClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Pu=Tu.el.className.split(" ").filter(Bu=>Bu.indexOf("swiper")===0||Bu.indexOf(Tu.params.containerModifierClass)===0);Tu.emit("_containerClasses",Pu.join(" "))}getSlideClasses(Tu){const Pu=this;return Pu.destroyed?"":Tu.className.split(" ").filter(Bu=>Bu.indexOf("swiper-slide")===0||Bu.indexOf(Pu.params.slideClass)===0).join(" ")}emitSlidesClasses(){const Tu=this;if(!Tu.params._emitClasses||!Tu.el)return;const Pu=[];Tu.slides.each(Bu=>{const Lu=Tu.getSlideClasses(Bu);Pu.push({slideEl:Bu,classNames:Lu}),Tu.emit("_slideClass",Bu,Lu)}),Tu.emit("_slideClasses",Pu)}slidesPerViewDynamic(Tu="current",Pu=!1){const Bu=this,{params:Lu,slides:Ru,slidesGrid:Ou,slidesSizesGrid:Du,size:ku,activeIndex:Fu}=Bu;let Nu=1;if(Lu.centeredSlides){let Gu=Ru[Fu].swiperSlideSize,zu;for(let Hu=Fu+1;Hu<Ru.length;Hu+=1)Ru[Hu]&&!zu&&(Gu+=Ru[Hu].swiperSlideSize,Nu+=1,Gu>ku&&(zu=!0));for(let Hu=Fu-1;Hu>=0;Hu-=1)Ru[Hu]&&!zu&&(Gu+=Ru[Hu].swiperSlideSize,Nu+=1,Gu>ku&&(zu=!0))}else if(Tu==="current")for(let Gu=Fu+1;Gu<Ru.length;Gu+=1)(Pu?Ou[Gu]+Du[Gu]-Ou[Fu]<ku:Ou[Gu]-Ou[Fu]<ku)&&(Nu+=1);else for(let Gu=Fu-1;Gu>=0;Gu-=1)Ou[Fu]-Ou[Gu]<ku&&(Nu+=1);return Nu}update(){const Tu=this;if(!Tu||Tu.destroyed)return;const{snapGrid:Pu,params:Bu}=Tu;Bu.breakpoints&&Tu.setBreakpoint(),Tu.updateSize(),Tu.updateSlides(),Tu.updateProgress(),Tu.updateSlidesClasses();function Lu(){const Ou=Tu.rtlTranslate?Tu.translate*-1:Tu.translate,Du=Math.min(Math.max(Ou,Tu.maxTranslate()),Tu.minTranslate());Tu.setTranslate(Du),Tu.updateActiveIndex(),Tu.updateSlidesClasses()}let Ru;Tu.params.freeMode&&Tu.params.freeMode.enabled?(Lu(),Tu.params.autoHeight&&Tu.updateAutoHeight()):((Tu.params.slidesPerView==="auto"||Tu.params.slidesPerView>1)&&Tu.isEnd&&!Tu.params.centeredSlides?Ru=Tu.slideTo(Tu.slides.length-1,0,!1,!0):Ru=Tu.slideTo(Tu.activeIndex,0,!1,!0),Ru||Lu()),Bu.watchOverflow&&Pu!==Tu.snapGrid&&Tu.checkOverflow(),Tu.emit("update")}changeDirection(Tu,Pu=!0){const Bu=this,Lu=Bu.params.direction;return Tu||(Tu=Lu==="horizontal"?"vertical":"horizontal"),Tu===Lu||Tu!=="horizontal"&&Tu!=="vertical"||(Bu.$el.removeClass(`${Bu.params.containerModifierClass}${Lu}`).addClass(`${Bu.params.containerModifierClass}${Tu}`),Bu.emitContainerClasses(),Bu.params.direction=Tu,Bu.slides.each(Ru=>{Tu==="vertical"?Ru.style.width="":Ru.style.height=""}),Bu.emit("changeDirection"),Pu&&Bu.update()),Bu}changeLanguageDirection(Tu){const Pu=this;Pu.rtl&&Tu==="rtl"||!Pu.rtl&&Tu==="ltr"||(Pu.rtl=Tu==="rtl",Pu.rtlTranslate=Pu.params.direction==="horizontal"&&Pu.rtl,Pu.rtl?(Pu.$el.addClass(`${Pu.params.containerModifierClass}rtl`),Pu.el.dir="rtl"):(Pu.$el.removeClass(`${Pu.params.containerModifierClass}rtl`),Pu.el.dir="ltr"),Pu.update())}mount(Tu){const Pu=this;if(Pu.mounted)return!0;const Bu=ae(Tu||Pu.params.el);if(Tu=Bu[0],!Tu)return!1;Tu.swiper=Pu;const Lu=()=>`.${(Pu.params.wrapperClass||"").trim().split(" ").join(".")}`;let Ru=(()=>{if(Tu&&Tu.shadowRoot&&Tu.shadowRoot.querySelector){const Ou=ae(Tu.shadowRoot.querySelector(Lu()));return Ou.children=Du=>Bu.children(Du),Ou}return Bu.children?Bu.children(Lu()):ae(Bu).children(Lu())})();if(Ru.length===0&&Pu.params.createElements){const Ou=Ke().createElement("div");Ru=ae(Ou),Ou.className=Pu.params.wrapperClass,Bu.append(Ou),Bu.children(`.${Pu.params.slideClass}`).each(Du=>{Ru.append(Du)})}return Object.assign(Pu,{$el:Bu,el:Tu,$wrapperEl:Ru,wrapperEl:Ru[0],mounted:!0,rtl:Tu.dir.toLowerCase()==="rtl"||Bu.css("direction")==="rtl",rtlTranslate:Pu.params.direction==="horizontal"&&(Tu.dir.toLowerCase()==="rtl"||Bu.css("direction")==="rtl"),wrongRTL:Ru.css("display")==="-webkit-box"}),!0}init(Tu){const Pu=this;return Pu.initialized||Pu.mount(Tu)===!1||(Pu.emit("beforeInit"),Pu.params.breakpoints&&Pu.setBreakpoint(),Pu.addClasses(),Pu.params.loop&&Pu.loopCreate(),Pu.updateSize(),Pu.updateSlides(),Pu.params.watchOverflow&&Pu.checkOverflow(),Pu.params.grabCursor&&Pu.enabled&&Pu.setGrabCursor(),Pu.params.preloadImages&&Pu.preloadImages(),Pu.params.loop?Pu.slideTo(Pu.params.initialSlide+Pu.loopedSlides,0,Pu.params.runCallbacksOnInit,!1,!0):Pu.slideTo(Pu.params.initialSlide,0,Pu.params.runCallbacksOnInit,!1,!0),Pu.attachEvents(),Pu.initialized=!0,Pu.emit("init"),Pu.emit("afterInit")),Pu}destroy(Tu=!0,Pu=!0){const Bu=this,{params:Lu,$el:Ru,$wrapperEl:Ou,slides:Du}=Bu;return typeof Bu.params>"u"||Bu.destroyed||(Bu.emit("beforeDestroy"),Bu.initialized=!1,Bu.detachEvents(),Lu.loop&&Bu.loopDestroy(),Pu&&(Bu.removeClasses(),Ru.removeAttr("style"),Ou.removeAttr("style"),Du&&Du.length&&Du.removeClass([Lu.slideVisibleClass,Lu.slideActiveClass,Lu.slideNextClass,Lu.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),Bu.emit("destroy"),Object.keys(Bu.eventsListeners).forEach(ku=>{Bu.off(ku)}),Tu!==!1&&(Bu.$el[0].swiper=null,QA(Bu)),Bu.destroyed=!0),null}static extendDefaults(Tu){dt(eo,Tu)}static get extendedDefaults(){return eo}static get defaults(){return kl}static installModule(Tu){bt.prototype.__modules__||(bt.prototype.__modules__=[]);const Pu=bt.prototype.__modules__;typeof Tu=="function"&&Pu.indexOf(Tu)<0&&Pu.push(Tu)}static use(Tu){return Array.isArray(Tu)?(Tu.forEach(Pu=>bt.installModule(Pu)),bt):(bt.installModule(Tu),bt)}}Object.keys($s).forEach(Cu=>{Object.keys($s[Cu]).forEach(Tu=>{bt.prototype[Tu]=$s[Cu][Tu]})});bt.use([KA,$A]);function ow({swiper:Cu,extendParams:Tu,on:Pu,emit:Bu}){let Lu;Cu.autoplay={running:!1,paused:!1},Tu({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function Ru(){if(!Cu.size){Cu.autoplay.running=!1,Cu.autoplay.paused=!1;return}const _h=Cu.slides.eq(Cu.activeIndex);let Xc=Cu.params.autoplay.delay;_h.attr("data-swiper-autoplay")&&(Xc=_h.attr("data-swiper-autoplay")||Cu.params.autoplay.delay),clearTimeout(Lu),Lu=cs(()=>{let ju;Cu.params.autoplay.reverseDirection?Cu.params.loop?(Cu.loopFix(),ju=Cu.slidePrev(Cu.params.speed,!0,!0),Bu("autoplay")):Cu.isBeginning?Cu.params.autoplay.stopOnLastSlide?Du():(ju=Cu.slideTo(Cu.slides.length-1,Cu.params.speed,!0,!0),Bu("autoplay")):(ju=Cu.slidePrev(Cu.params.speed,!0,!0),Bu("autoplay")):Cu.params.loop?(Cu.loopFix(),ju=Cu.slideNext(Cu.params.speed,!0,!0),Bu("autoplay")):Cu.isEnd?Cu.params.autoplay.stopOnLastSlide?Du():(ju=Cu.slideTo(0,Cu.params.speed,!0,!0),Bu("autoplay")):(ju=Cu.slideNext(Cu.params.speed,!0,!0),Bu("autoplay")),(Cu.params.cssMode&&Cu.autoplay.running||ju===!1)&&Ru()},Xc)}function Ou(){return typeof Lu<"u"||Cu.autoplay.running?!1:(Cu.autoplay.running=!0,Bu("autoplayStart"),Ru(),!0)}function Du(){return!Cu.autoplay.running||typeof Lu>"u"?!1:(Lu&&(clearTimeout(Lu),Lu=void 0),Cu.autoplay.running=!1,Bu("autoplayStop"),!0)}function ku(_h){!Cu.autoplay.running||Cu.autoplay.paused||(Lu&&clearTimeout(Lu),Cu.autoplay.paused=!0,_h===0||!Cu.params.autoplay.waitForTransition?(Cu.autoplay.paused=!1,Ru()):["transitionend","webkitTransitionEnd"].forEach(Xc=>{Cu.$wrapperEl[0].addEventListener(Xc,Nu)}))}function Fu(){const _h=Ke();_h.visibilityState==="hidden"&&Cu.autoplay.running&&ku(),_h.visibilityState==="visible"&&Cu.autoplay.paused&&(Ru(),Cu.autoplay.paused=!1)}function Nu(_h){!Cu||Cu.destroyed||!Cu.$wrapperEl||_h.target===Cu.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(Xc=>{Cu.$wrapperEl[0].removeEventListener(Xc,Nu)}),Cu.autoplay.paused=!1,Cu.autoplay.running?Ru():Du())}function Gu(){Cu.params.autoplay.disableOnInteraction?Du():(Bu("autoplayPause"),ku()),["transitionend","webkitTransitionEnd"].forEach(_h=>{Cu.$wrapperEl[0].removeEventListener(_h,Nu)})}function zu(){Cu.params.autoplay.disableOnInteraction||(Cu.autoplay.paused=!1,Bu("autoplayResume"),Ru())}function Hu(){Cu.params.autoplay.pauseOnMouseEnter&&(Cu.$el.on("mouseenter",Gu),Cu.$el.on("mouseleave",zu))}function Wu(){Cu.$el.off("mouseenter",Gu),Cu.$el.off("mouseleave",zu)}Pu("init",()=>{Cu.params.autoplay.enabled&&(Ou(),Ke().addEventListener("visibilitychange",Fu),Hu())}),Pu("beforeTransitionStart",(_h,Xc,ju)=>{Cu.autoplay.running&&(ju||!Cu.params.autoplay.disableOnInteraction?Cu.autoplay.pause(Xc):Du())}),Pu("sliderFirstMove",()=>{Cu.autoplay.running&&(Cu.params.autoplay.disableOnInteraction?Du():ku())}),Pu("touchEnd",()=>{Cu.params.cssMode&&Cu.autoplay.paused&&!Cu.params.autoplay.disableOnInteraction&&Ru()}),Pu("destroy",()=>{Wu(),Cu.autoplay.running&&Du(),Ke().removeEventListener("visibilitychange",Fu)}),Object.assign(Cu.autoplay,{pause:ku,run:Ru,start:Ou,stop:Du})}function rw(Cu){ge(Cu,"svelte-6jwk1w",".media-item.svelte-6jwk1w{height:100%}.media-content.svelte-6jwk1w{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.video-icon.svelte-6jwk1w{width:1.75rem;height:1.75rem;background-size:100%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}")}function Dl(Cu){let Tu,Pu;function Bu(Ou,Du){if(Ou[0].type==="Image")return lw;if(Ou[0].type==="Video")return aw}let Lu=Bu(Cu),Ru=Lu&&Lu(Cu);return{c(){Tu=F("div"),Ru&&Ru.c(),C(Tu,"class","media-item svelte-6jwk1w"),C(Tu,"style",Pu=`object-fit: ${Cu[1]};`)},m(Ou,Du){H(Ou,Tu,Du),Ru&&Ru.m(Tu,null)},p(Ou,Du){Lu===(Lu=Bu(Ou))&&Ru?Ru.p(Ou,Du):(Ru&&Ru.d(1),Ru=Lu&&Lu(Ou),Ru&&(Ru.c(),Ru.m(Tu,null))),Du&2&&Pu!==(Pu=`object-fit: ${Ou[1]};`)&&C(Tu,"style",Pu)},d(Ou){Ou&&B(Tu),Ru&&Ru.d()}}}function aw(Cu){let Tu,Pu,Bu,Lu,Ru,Ou;return{c(){Tu=F("video"),Ru=q(),Ou=F("div"),C(Tu,"class","media-content svelte-6jwk1w"),Ot(Tu.src,Pu=Cu[0].url)||C(Tu,"src",Pu),C(Tu,"poster",Bu=rt(Cu[0].videoCoverUrl,void 0)),C(Tu,"preload",Lu=Cu[0].videoCoverUrl?void 0:"auto"),Tu.playsInline=!0,C(Tu,"paused",""),Tu.loop=!1,C(Tu,"crossorigin",""),Tu.controls=!1,Tu.muted=!0,C(Ou,"class","video-icon svelte-6jwk1w"),Q(Ou,"background-image","url("+yv+")")},m(Du,ku){H(Du,Tu,ku),H(Du,Ru,ku),H(Du,Ou,ku)},p(Du,ku){ku&1&&!Ot(Tu.src,Pu=Du[0].url)&&C(Tu,"src",Pu),ku&1&&Bu!==(Bu=rt(Du[0].videoCoverUrl,void 0))&&C(Tu,"poster",Bu),ku&1&&Lu!==(Lu=Du[0].videoCoverUrl?void 0:"auto")&&C(Tu,"preload",Lu)},d(Du){Du&&B(Tu),Du&&B(Ru),Du&&B(Ou)}}}function lw(Cu){let Tu,Pu,Bu;return{c(){Tu=F("img"),C(Tu,"class","media-content svelte-6jwk1w"),Ot(Tu.src,Pu=Cu[0].url)||C(Tu,"src",Pu),C(Tu,"alt",Bu=Cu[0].name)},m(Lu,Ru){H(Lu,Tu,Ru)},p(Lu,Ru){Ru&1&&!Ot(Tu.src,Pu=Lu[0].url)&&C(Tu,"src",Pu),Ru&1&&Bu!==(Bu=Lu[0].name)&&C(Tu,"alt",Bu)},d(Lu){Lu&&B(Tu)}}}function cw(Cu){let Tu,Pu=Cu[0]&&Dl(Cu);return{c(){Pu&&Pu.c(),Tu=Pe()},m(Bu,Lu){Pu&&Pu.m(Bu,Lu),H(Bu,Tu,Lu)},p(Bu,[Lu]){Bu[0]?Pu?Pu.p(Bu,Lu):(Pu=Dl(Bu),Pu.c(),Pu.m(Tu.parentNode,Tu)):Pu&&(Pu.d(1),Pu=null)},i:le,o:le,d(Bu){Pu&&Pu.d(Bu),Bu&&B(Tu)}}}function dw(Cu,Tu,Pu){let{media:Bu}=Tu,{objectFit:Lu="cover"}=Tu;return Cu.$$set=Ru=>{"media"in Ru&&Pu(0,Bu=Ru.media),"objectFit"in Ru&&Pu(1,Lu=Ru.objectFit)},[Bu,Lu]}class Vd extends fe{constructor(Tu){super(),ue(this,Tu,dw,cw,de,{media:0,objectFit:1},rw)}}function uw(Cu){ge(Cu,"svelte-ai0lv9",".media.svelte-ai0lv9{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}")}function Ll(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[14]=Tu[Pu],Bu}function Ml(Cu){let Tu,Pu,Bu,Lu,Ru,Ou;const Du=[hw,fw],ku=[];function Fu(Nu,Gu){return Nu[11]?0:1}return Pu=Fu(Cu),Bu=ku[Pu]=Du[Pu](Cu),{c(){Tu=F("div"),Bu.c(),C(Tu,"class","media svelte-ai0lv9"),me(Tu,"unfolded",Cu[4])},m(Nu,Gu){H(Nu,Tu,Gu),ku[Pu].m(Tu,null),Ou=!0},p(Nu,Gu){Cu=Nu;let zu=Pu;Pu=Fu(Cu),Pu===zu?ku[Pu].p(Cu,Gu):(ve(),R(ku[zu],1,1,()=>{ku[zu]=null}),be(),Bu=ku[Pu],Bu?Bu.p(Cu,Gu):(Bu=ku[Pu]=Du[Pu](Cu),Bu.c()),M(Bu,1),Bu.m(Tu,null)),(!Ou||Gu&16)&&me(Tu,"unfolded",Cu[4])},i(Nu){Ou||(M(Bu),Nu&&Re(()=>{Ru&&Ru.end(1),Lu=wn(Tu,Or,Cu[5]?{y:4,duration:Cu[3],delay:Cu[1],easing:zn}:void 0),Lu.start()}),Ou=!0)},o(Nu){R(Bu),Lu&&Lu.invalidate(),Nu&&(Ru=Bn(Tu,Or,Cu[5]?{y:4,duration:Cu[3],delay:Cu[2],easing:zn}:void 0)),Ou=!1},d(Nu){Nu&&B(Tu),ku[Pu].d(),Nu&&Ru&&Ru.end()}}}function fw(Cu){let Tu,Pu;return Tu=new Vd({props:{media:Cu[0][0],objectFit:Cu[6]}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&1&&(Ru.media=Bu[0][0]),Lu&64&&(Ru.objectFit=Bu[6]),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function hw(Cu){let Tu,Pu;return Tu=new Zb({props:{style:"height: 100%",modules:[ow],spaceBetween:30,autoplay:Cu[10]?Oe({delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1,loop:!0,$$slots:{default:[mw]},$$scope:{ctx:Cu}}}),Tu.$on("slideChange",Cu[13]),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&1024&&(Ru.autoplay=Bu[10]?Oe({delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1}):!1),Lu&131392&&(Ru.$$scope={dirty:Lu,ctx:Bu}),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function pw(Cu){let Tu,Pu,Bu;return Tu=new Vd({props:{media:Cu[14],objectFit:Cu[6]}}),{c(){oe(Tu.$$.fragment),Pu=q()},m(Lu,Ru){ie(Tu,Lu,Ru),H(Lu,Pu,Ru),Bu=!0},p(Lu,Ru){const Ou={};Ru&256&&(Ou.media=Lu[14]),Ru&64&&(Ou.objectFit=Lu[6]),Tu.$set(Ou)},i(Lu){Bu||(M(Tu.$$.fragment,Lu),Bu=!0)},o(Lu){R(Tu.$$.fragment,Lu),Bu=!1},d(Lu){se(Tu,Lu),Lu&&B(Pu)}}}function zl(Cu){let Tu,Pu;return Tu=new nA({props:{$$slots:{default:[pw]},$$scope:{ctx:Cu}}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&131392&&(Ru.$$scope={dirty:Lu,ctx:Bu}),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function mw(Cu){let Tu,Pu,Bu=Cu[8],Lu=[];for(let Ou=0;Ou<Bu.length;Ou+=1)Lu[Ou]=zl(Ll(Cu,Bu,Ou));const Ru=Ou=>R(Lu[Ou],1,1,()=>{Lu[Ou]=null});return{c(){for(let Ou=0;Ou<Lu.length;Ou+=1)Lu[Ou].c();Tu=Pe()},m(Ou,Du){for(let ku=0;ku<Lu.length;ku+=1)Lu[ku].m(Ou,Du);H(Ou,Tu,Du),Pu=!0},p(Ou,Du){if(Du&320){Bu=Ou[8];let ku;for(ku=0;ku<Bu.length;ku+=1){const Fu=Ll(Ou,Bu,ku);Lu[ku]?(Lu[ku].p(Fu,Du),M(Lu[ku],1)):(Lu[ku]=zl(Fu),Lu[ku].c(),M(Lu[ku],1),Lu[ku].m(Tu.parentNode,Tu))}for(ve(),ku=Bu.length;ku<Lu.length;ku+=1)Ru(ku);be()}},i(Ou){if(!Pu){for(let Du=0;Du<Bu.length;Du+=1)M(Lu[Du]);Pu=!0}},o(Ou){Lu=Lu.filter(Boolean);for(let Du=0;Du<Lu.length;Du+=1)R(Lu[Du]);Pu=!1},d(Ou){jt(Lu,Ou),Ou&&B(Tu)}}}function gw(Cu){let Tu,Pu,Bu=Cu[4]&&Ml(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[4]?Bu?(Bu.p(Lu,Ru),Ru&16&&M(Bu,1)):(Bu=Ml(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function vw(Cu,Tu,Pu){let Bu,Lu,Ru,{mediaData:Ou}=Tu,{inDelay:Du=0}=Tu,{outDelay:ku=0}=Tu,{duration:Fu=0}=Tu,{unfolded:Nu=!0}=Tu,{animation:Gu=!0}=Tu,{objectFit:zu="cover"}=Tu,{enableCarousel:Hu=!0}=Tu,{autoplayConfig:Wu={autoplay:!0,autoplayVideo:!1}}=Tu,_h=null;const Xc=async ju=>{if(!Ru||!Wu.autoplayVideo)return;const _c=ju.detail[0];if(!_c)return;const _f=_c.realIndex;if(_f===_h)return;Pu(9,_h=_f);const ep=Lu[_f];!ep||ep.type==="Video"&&(_c.autoplay.stop(),await new Promise(tp=>{var op;const lp=(op=_c.slides[_c.activeIndex])==null?void 0:op.querySelector("video");if(!lp){tp(Oe(null));return}lp.muted=!0,lp.play(),lp.onerror=()=>tp(Oe(null)),lp.onended=()=>tp(Oe(null)),lp.onclick=()=>{lp.pause(),tp(Oe(null))}}),_c.autoplay.start())};return Cu.$$set=ju=>{"mediaData"in ju&&Pu(0,Ou=ju.mediaData),"inDelay"in ju&&Pu(1,Du=ju.inDelay),"outDelay"in ju&&Pu(2,ku=ju.outDelay),"duration"in ju&&Pu(3,Fu=ju.duration),"unfolded"in ju&&Pu(4,Nu=ju.unfolded),"animation"in ju&&Pu(5,Gu=ju.animation),"objectFit"in ju&&Pu(6,zu=ju.objectFit),"enableCarousel"in ju&&Pu(12,Hu=ju.enableCarousel),"autoplayConfig"in ju&&Pu(7,Wu=ju.autoplayConfig)},Cu.$$.update=()=>{Cu.$$.dirty&4097&&Pu(11,Bu=Hu&&(Ou==null?void 0:Ou.length)>1),Cu.$$.dirty&1&&Pu(8,Lu=Ou),Cu.$$.dirty&384&&Pu(10,Ru=Lu.length>1&&Wu.autoplay)},[Ou,Du,ku,Fu,Nu,Gu,zu,Wu,Lu,_h,Ru,Bu,Hu,Xc]}class Ud extends fe{constructor(Tu){super(),ue(this,Tu,vw,gw,de,{mediaData:0,inDelay:1,outDelay:2,duration:3,unfolded:4,animation:5,objectFit:6,enableCarousel:12,autoplayConfig:7},uw)}}function bw(Cu){ge(Cu,"svelte-1p8f9wy",".line.svelte-1p8f9wy{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%);z-index:10}.text.svelte-1p8f9wy{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;z-index:10;font-weight:600}.media-wrapper.svelte-1p8f9wy{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;z-index:10;font-weight:600}")}function Ol(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[7]=Tu[Pu].id,Bu[1]=Tu[Pu].content,Bu}function jl(Cu){let Tu,Pu,Bu,Lu,Ru,Ou=[],Du=new Map,ku,Fu,Nu;Tu=new Ct({props:{visible:Cu[4],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Lu=new jv({props:{unfolded:Cu[4],duration:1e3,outDelay:400}});let Gu=Cu[2];const zu=Wu=>Wu[7];for(let Wu=0;Wu<Gu.length;Wu+=1){let _h=Ol(Cu,Gu,Wu),Xc=zu(_h);Du.set(Xc,Ou[Wu]=Bl(Xc,_h))}let Hu=Cu[3]&&Rl(Cu);return{c(){oe(Tu.$$.fragment),Pu=q(),Bu=F("div"),oe(Lu.$$.fragment),Ru=q();for(let Wu=0;Wu<Ou.length;Wu+=1)Ou[Wu].c();ku=q(),Hu&&Hu.c(),Fu=Pe(),C(Bu,"class","line svelte-1p8f9wy")},m(Wu,_h){ie(Tu,Wu,_h),H(Wu,Pu,_h),H(Wu,Bu,_h),ie(Lu,Bu,null),H(Wu,Ru,_h);for(let Xc=0;Xc<Ou.length;Xc+=1)Ou[Xc].m(Wu,_h);H(Wu,ku,_h),Hu&&Hu.m(Wu,_h),H(Wu,Fu,_h),Nu=!0},p(Wu,_h){const Xc={};_h&16&&(Xc.visible=Wu[4]),Tu.$set(Xc);const ju={};_h&16&&(ju.unfolded=Wu[4]),Lu.$set(ju),_h&20&&(Gu=Wu[2],ve(),Ou=Et(Ou,_h,zu,1,Wu,Gu,Du,ku.parentNode,Yt,Bl,ku,Ol),be()),Wu[3]?Hu?(Hu.p(Wu,_h),_h&8&&M(Hu,1)):(Hu=Rl(Wu),Hu.c(),M(Hu,1),Hu.m(Fu.parentNode,Fu)):Hu&&(ve(),R(Hu,1,1,()=>{Hu=null}),be())},i(Wu){if(!Nu){M(Tu.$$.fragment,Wu),M(Lu.$$.fragment,Wu);for(let _h=0;_h<Gu.length;_h+=1)M(Ou[_h]);M(Hu),Nu=!0}},o(Wu){R(Tu.$$.fragment,Wu),R(Lu.$$.fragment,Wu);for(let _h=0;_h<Ou.length;_h+=1)R(Ou[_h]);R(Hu),Nu=!1},d(Wu){se(Tu,Wu),Wu&&B(Pu),Wu&&B(Bu),se(Lu),Wu&&B(Ru);for(let _h=0;_h<Ou.length;_h+=1)Ou[_h].d(Wu);Wu&&B(ku),Hu&&Hu.d(Wu),Wu&&B(Fu)}}}function Bl(Cu,Tu){let Pu,Bu,Lu;return Bu=new Md({props:{unfolded:Tu[4],content:Tu[1],inDelay:500}}),{key:Cu,first:null,c(){Pu=F("div"),oe(Bu.$$.fragment),C(Pu,"class","text svelte-1p8f9wy"),this.first=Pu},m(Ru,Ou){H(Ru,Pu,Ou),ie(Bu,Pu,null),Lu=!0},p(Ru,Ou){Tu=Ru;const Du={};Ou&16&&(Du.unfolded=Tu[4]),Ou&4&&(Du.content=Tu[1]),Bu.$set(Du)},i(Ru){Lu||(M(Bu.$$.fragment,Ru),Lu=!0)},o(Ru){R(Bu.$$.fragment,Ru),Lu=!1},d(Ru){Ru&&B(Pu),se(Bu)}}}function Rl(Cu){let Tu,Pu,Bu;return Pu=new Ud({props:{autoplayConfig:{autoplay:!1},unfolded:Cu[4],mediaData:Cu[3],inDelay:500,duration:500}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),C(Tu,"class","media-wrapper svelte-1p8f9wy")},m(Lu,Ru){H(Lu,Tu,Ru),ie(Pu,Tu,null),Bu=!0},p(Lu,Ru){const Ou={};Ru&16&&(Ou.unfolded=Lu[4]),Ru&8&&(Ou.mediaData=Lu[3]),Pu.$set(Ou)},i(Lu){Bu||(M(Pu.$$.fragment,Lu),Bu=!0)},o(Lu){R(Pu.$$.fragment,Lu),Bu=!1},d(Lu){Lu&&B(Tu),se(Pu)}}}function Aw(Cu){let Tu,Pu,Bu=Cu[0].state&&jl(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[0].state?Bu?(Bu.p(Lu,Ru),Ru&1&&M(Bu,1)):(Bu=jl(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function yw(Cu,Tu,Pu){let Bu,Lu,Ru;var Ou,Du;let{tag:ku}=Tu,Fu;return Cu.$$set=Nu=>{"tag"in Nu&&Pu(0,ku=Nu.tag)},Cu.$$.update=()=>{Cu.$$.dirty&1&&Pu(4,Bu=ku.state?ku.state.unfolded:!1),Cu.$$.dirty&97&&Pu(1,Lu=rt(Pu(5,Ou=ku.data.text)===null||Ou===void 0?void 0:Ou.length,0)>7?(Pu(6,Du=ku.data.text)===null||Du===void 0?void 0:Du.substring(0,6))+"...":ku.data.text),Cu.$$.dirty&1&&Pu(3,Ru=ku.data.mediaData),Cu.$$.dirty&2&&Pu(2,Fu=Lu?[{id:ot(),content:Lu}]:[])},[ku,Lu,Fu,Ru,Bu,Ou,Du]}class ww extends fe{constructor(Tu){super(),ue(this,Tu,yw,Aw,de,{tag:0},bw)}}function Ew(Cu){ge(Cu,"svelte-8mby9k",".svelte-8mby9k.svelte-8mby9k{box-sizing:border-box}.marketing.svelte-8mby9k.svelte-8mby9k{transform:translateY(-100%)}.content.svelte-8mby9k .headerImage.svelte-8mby9k{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.line.svelte-8mby9k.svelte-8mby9k{position:absolute;height:2.0625rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.content.svelte-8mby9k.svelte-8mby9k{background-color:white;position:relative;display:flex;flex-direction:column;min-width:11.125rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition:all 500ms}.title.svelte-8mby9k.svelte-8mby9k{position:absolute;background-color:white;border-radius:0.25rem;width:100%;top:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.title.svelte-8mby9k .text.svelte-8mby9k{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem;color:#000}.footer.svelte-8mby9k.svelte-8mby9k{position:relative;padding-left:0.75rem;padding-right:0.75rem;width:100%;height:1.375rem;display:flex;align-items:center}.footer.svelte-8mby9k .goto-button.svelte-8mby9k{flex-shrink:0;white-space:nowrap;background-image:linear-gradient(to right, rgba(87, 144, 253, 1) 0, rgba(42, 114, 254, 1) 100%);color:#fff;font-size:0.625rem;border-radius:0.875rem;font-weight:bold;padding-left:0.5rem;padding-right:0.5rem;height:1.25rem;margin-left:auto;display:flex;align-items:center}.footer.svelte-8mby9k .goto-icon.svelte-8mby9k::after{content:'';display:inline-block;width:0.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAJ3RSTlMAFNO2pYt4bErz8uP6ysawgVtBPDcR5C4s2L6ZmJBzZGJXUyEeDws/0G2zAAAAkklEQVQ4y+3TRw6DMBAF0OAeJ3QCpCe0uf8NwRILLBYfiS1/aT3JoymnI+sERZ5VCH0iVto3QDfBLmeSSMUTogRV9bBEpJAKaYpGijn13aTSLeraeG9D0NZFZv4/rRL5FDHnITlllqjv6tykWsmX4JHr05y7j6oFKq2P8He48B0tAM0EY0EDxquClw6vLz6EI35GmwwSZpe+WOgAAAAASUVORK5CYII=);background-size:100% auto;background-repeat:no-repeat}.price.svelte-8mby9k.svelte-8mby9k{flex-shrink:0;margin-right:0.75rem;white-space:nowrap;color:#ff6600;display:flex;align-items:baseline}.price.svelte-8mby9k .value.svelte-8mby9k{position:relative;top:0.0625rem;font-size:1.125rem;line-height:1.375rem;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0rem}.price.svelte-8mby9k .unit.svelte-8mby9k{padding-left:0.125rem;font-size:0.625rem}.tag.svelte-8mby9k.svelte-8mby9k{position:relative;background-color:white;display:flex;width:-moz-max-content;width:max-content;padding-left:0.75rem;padding-right:0.75rem;min-height:1.75rem}.tag.svelte-8mby9k .base-tag.svelte-8mby9k{height:1rem;margin-top:1.375rem;margin-bottom:0.5rem;margin-right:0.25rem;font-size:0.625rem;line-height:0.875rem;padding:0.0625rem 0.25rem;border-radius:0.125rem;overflow:hidden}.tag.svelte-8mby9k .primary-tag.svelte-8mby9k{background:#e5eefe;color:#0055ff}.tag.svelte-8mby9k .secondary-tag.svelte-8mby9k{background:rgba(255, 102, 0, 0.08);color:rgba(255, 102, 0, 1)}.unfolded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 1)}.folded.svelte-8mby9k .line.svelte-8mby9k{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.unfolded.svelte-8mby9k .content.svelte-8mby9k{opacity:1}.folded.svelte-8mby9k .content.svelte-8mby9k{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}")}function Hl(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[0]=Tu[Pu],Bu}function Nl(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[0]=Tu[Pu],Bu}function Gl(Cu){let Tu,Pu=Cu[0]+"",Bu;return{c(){Tu=F("div"),Bu=Ge(Pu),C(Tu,"class","base-tag primary-tag svelte-8mby9k")},m(Lu,Ru){H(Lu,Tu,Ru),W(Tu,Bu)},p(Lu,Ru){Ru&4&&Pu!==(Pu=Lu[0]+"")&&Ye(Bu,Pu)},d(Lu){Lu&&B(Tu)}}}function Fl(Cu){let Tu,Pu=Cu[0]&&Gl(Cu);return{c(){Pu&&Pu.c(),Tu=Pe()},m(Bu,Lu){Pu&&Pu.m(Bu,Lu),H(Bu,Tu,Lu)},p(Bu,Lu){Bu[0]?Pu?Pu.p(Bu,Lu):(Pu=Gl(Bu),Pu.c(),Pu.m(Tu.parentNode,Tu)):Pu&&(Pu.d(1),Pu=null)},d(Bu){Pu&&Pu.d(Bu),Bu&&B(Tu)}}}function Wl(Cu){let Tu,Pu=Cu[0]+"",Bu;return{c(){Tu=F("div"),Bu=Ge(Pu),C(Tu,"class","base-tag secondary-tag svelte-8mby9k")},m(Lu,Ru){H(Lu,Tu,Ru),W(Tu,Bu)},p(Lu,Ru){Ru&4&&Pu!==(Pu=Lu[0]+"")&&Ye(Bu,Pu)},d(Lu){Lu&&B(Tu)}}}function Ql(Cu){let Tu,Pu=Cu[0]&&Wl(Cu);return{c(){Pu&&Pu.c(),Tu=Pe()},m(Bu,Lu){Pu&&Pu.m(Bu,Lu),H(Bu,Tu,Lu)},p(Bu,Lu){Bu[0]?Pu?Pu.p(Bu,Lu):(Pu=Wl(Bu),Pu.c(),Pu.m(Tu.parentNode,Tu)):Pu&&(Pu.d(1),Pu=null)},d(Bu){Pu&&Pu.d(Bu),Bu&&B(Tu)}}}function _l(Cu){let Tu,Pu,Bu=Cu[2].price.value+"",Lu,Ru,Ou=Cu[2].price.unit&&Xl(Cu);return{c(){Tu=F("div"),Pu=F("span"),Lu=Ge(Bu),Ru=q(),Ou&&Ou.c(),C(Pu,"class","value svelte-8mby9k"),C(Tu,"class","price svelte-8mby9k")},m(Du,ku){H(Du,Tu,ku),W(Tu,Pu),W(Pu,Lu),W(Tu,Ru),Ou&&Ou.m(Tu,null)},p(Du,ku){ku&4&&Bu!==(Bu=Du[2].price.value+"")&&Ye(Lu,Bu),Du[2].price.unit?Ou?Ou.p(Du,ku):(Ou=Xl(Du),Ou.c(),Ou.m(Tu,null)):Ou&&(Ou.d(1),Ou=null)},d(Du){Du&&B(Tu),Ou&&Ou.d()}}}function Xl(Cu){let Tu,Pu=Cu[2].price.unit+"",Bu;return{c(){Tu=F("span"),Bu=Ge(Pu),C(Tu,"class","unit svelte-8mby9k")},m(Lu,Ru){H(Lu,Tu,Ru),W(Tu,Bu)},p(Lu,Ru){Ru&4&&Pu!==(Pu=Lu[2].price.unit+"")&&Ye(Bu,Pu)},d(Lu){Lu&&B(Tu)}}}function Yl(Cu){let Tu,Pu=Cu[2].highlightText+"",Bu;return{c(){Tu=F("div"),Bu=Ge(Pu),C(Tu,"class","goto-button goto-icon svelte-8mby9k")},m(Lu,Ru){H(Lu,Tu,Ru),W(Tu,Bu)},p(Lu,Ru){Ru&4&&Pu!==(Pu=Lu[2].highlightText+"")&&Ye(Bu,Pu)},d(Lu){Lu&&B(Tu)}}}function Cw(Cu){var Tu,Pu;let Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju=Cu[2].title+"",_c,_f,ep,tp,op;Lu=new Ct({props:{visible:Cu[1],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let lp=Cu[2].brandTags||[],up=[];for(let ap=0;ap<lp.length;ap+=1)up[ap]=Fl(Nl(Cu,lp,ap));let hp=Cu[2].tags||[],np=[];for(let ap=0;ap<hp.length;ap+=1)np[ap]=Ql(Hl(Cu,hp,ap));let rp=((Tu=Cu[2].price)==null?void 0:Tu.value)!==void 0&&((Pu=Cu[2].price)==null?void 0:Pu.value)!==null&&_l(Cu),ip=Cu[2].highlightText&&Yl(Cu);return{c(){var ap,sp;Bu=F("div"),oe(Lu.$$.fragment),Ru=q(),Ou=F("div"),Du=q(),ku=F("div"),Fu=F("img"),Gu=q(),zu=F("div");for(let cp=0;cp<up.length;cp+=1)up[cp].c();Hu=q();for(let cp=0;cp<np.length;cp+=1)np[cp].c();Wu=q(),_h=F("div"),Xc=F("div"),_c=Ge(ju),_f=q(),ep=F("div"),rp&&rp.c(),tp=q(),ip&&ip.c(),C(Ou,"class","line svelte-8mby9k"),Q(Ou,"transition-delay",Cu[1]?Hi+"ms":Ni+Ul-Vl-40+"ms"),C(Fu,"class","headerImage svelte-8mby9k"),Ot(Fu.src,Nu=Cu[2].headerPictureUrl)||C(Fu,"src",Nu),C(Fu,"alt",""),C(zu,"class","tag svelte-8mby9k"),C(Xc,"class","text svelte-8mby9k"),C(_h,"class","title svelte-8mby9k"),C(ep,"class","footer svelte-8mby9k"),Q(ep,"height",((ap=Cu[2].price)==null?void 0:ap.value)!==void 0&&((sp=Cu[2].price)==null?void 0:sp.value)!==null&&Cu[2].highlightText?void 0:"1rem"),C(ku,"class","content svelte-8mby9k"),Q(ku,"transition-delay",Cu[1]?Hi+Ni+"ms":"0ms"),C(Bu,"class","marketing svelte-8mby9k"),me(Bu,"unfolded",Cu[1]),me(Bu,"folded",Cu[3])},m(ap,sp){H(ap,Bu,sp),ie(Lu,Bu,null),W(Bu,Ru),W(Bu,Ou),W(Bu,Du),W(Bu,ku),W(ku,Fu),W(ku,Gu),W(ku,zu);for(let cp=0;cp<up.length;cp+=1)up[cp].m(zu,null);W(zu,Hu);for(let cp=0;cp<np.length;cp+=1)np[cp].m(zu,null);W(ku,Wu),W(ku,_h),W(_h,Xc),W(Xc,_c),W(ku,_f),W(ku,ep),rp&&rp.m(ep,null),W(ep,tp),ip&&ip.m(ep,null),op=!0},p(ap,[sp]){var cp,dp,fp,vp;const _p={};if(sp&2&&(_p.visible=ap[1]),Lu.$set(_p),sp&2&&Q(Ou,"transition-delay",ap[1]?Hi+"ms":Ni+Ul-Vl-40+"ms"),(!op||sp&4&&!Ot(Fu.src,Nu=ap[2].headerPictureUrl))&&C(Fu,"src",Nu),sp&4){lp=ap[2].brandTags||[];let wp;for(wp=0;wp<lp.length;wp+=1){const Dp=Nl(ap,lp,wp);up[wp]?up[wp].p(Dp,sp):(up[wp]=Fl(Dp),up[wp].c(),up[wp].m(zu,Hu))}for(;wp<up.length;wp+=1)up[wp].d(1);up.length=lp.length}if(sp&4){hp=ap[2].tags||[];let wp;for(wp=0;wp<hp.length;wp+=1){const Dp=Hl(ap,hp,wp);np[wp]?np[wp].p(Dp,sp):(np[wp]=Ql(Dp),np[wp].c(),np[wp].m(zu,null))}for(;wp<np.length;wp+=1)np[wp].d(1);np.length=hp.length}(!op||sp&4)&&ju!==(ju=ap[2].title+"")&&Ye(_c,ju),((cp=ap[2].price)==null?void 0:cp.value)!==void 0&&((dp=ap[2].price)==null?void 0:dp.value)!==null?rp?rp.p(ap,sp):(rp=_l(ap),rp.c(),rp.m(ep,tp)):rp&&(rp.d(1),rp=null),ap[2].highlightText?ip?ip.p(ap,sp):(ip=Yl(ap),ip.c(),ip.m(ep,null)):ip&&(ip.d(1),ip=null),sp&4&&Q(ep,"height",((fp=ap[2].price)==null?void 0:fp.value)!==void 0&&((vp=ap[2].price)==null?void 0:vp.value)!==null&&ap[2].highlightText?void 0:"1rem"),sp&2&&Q(ku,"transition-delay",ap[1]?Hi+Ni+"ms":"0ms"),(!op||sp&2)&&me(Bu,"unfolded",ap[1]),(!op||sp&8)&&me(Bu,"folded",ap[3])},i(ap){op||(M(Lu.$$.fragment,ap),op=!0)},o(ap){R(Lu.$$.fragment,ap),op=!1},d(ap){ap&&B(Bu),se(Lu),jt(up,ap),jt(np,ap),rp&&rp.d(),ip&&ip.d()}}}const Hi=400,Vl=500,Ni=180,Ul=500;function Pw(Cu,Tu,Pu){let Bu,Lu,Ru;var Ou;let{tag:Du}=Tu;return Cu.$$set=ku=>{"tag"in ku&&Pu(0,Du=ku.tag)},Cu.$$.update=()=>{Cu.$$.dirty&17&&Pu(1,Bu=rt(Pu(4,Ou=Du.state)===null||Ou===void 0?void 0:Ou.unfolded,!1)),Cu.$$.dirty&2&&Pu(3,Lu=!Bu),Cu.$$.dirty&1&&Pu(2,Ru=Du.data)},[Du,Bu,Ru,Lu,Ou]}class xw extends fe{constructor(Tu){super(),ue(this,Tu,Pw,Cw,de,{tag:0},Ew)}}function Iw(Cu){ge(Cu,"svelte-1ku3wt4",`.audio.svelte-1ku3wt4.svelte-1ku3wt4{position:relative;width:100%;height:100%;cursor:pointer}@keyframes svelte-1ku3wt4-playing{25%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='9' cy='9' r='8' transform='translate(-1 -1)' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}50%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.533 6.685L4.169 8.049l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}75%{background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm-.656 4.874l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .875-.333 1.67-.88 2.268l.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}}.paused.svelte-1ku3wt4 .audio-icon.svelte-1ku3wt4{animation:none}.audio-icon.svelte-1ku3wt4.svelte-1ku3wt4{width:100%;height:100%;border-radius:50%;background-size:100%;animation:svelte-1ku3wt4-playing 2s steps(1) infinite;background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm1.428 2.79l-.953.952a6.222 6.222 0 0 1 1.775 4.36c0 1.571-.58 3.006-1.538 4.103l-.184.202.793.794a7.344 7.344 0 0 0 2.21-5.26A7.341 7.341 0 0 0 9.428 2.79zM7.344 4.873l-.906.905A3.35 3.35 0 0 1 7.369 8.1c0 .802-.28 1.537-.748 2.115l-.132.153.906.906A4.628 4.628 0 0 0 8.65 8.101a4.627 4.627 0 0 0-1.306-3.227zm-1.811 1.81L4.169 8.05l1.414 1.413a2.078 2.078 0 0 0-.05-2.777z' fill='%23FFF' fill-rule='nonzero'/%3E%3C/svg%3E")}`)}function Zl(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du,ku=!0,Fu,Nu,Gu,zu,Hu;return Pu=new Ct({props:{center:!0,blurRadius:15,spreadRadius:6}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),Bu=q(),Lu=F("div"),Ru=q(),Ou=F("audio"),C(Lu,"class","audio-icon svelte-1ku3wt4"),Ou.controls=!1,C(Ou,"playsinline",""),Ot(Ou.src,Du=Cu[3])||C(Ou,"src",Du),C(Tu,"class","audio svelte-1ku3wt4"),me(Tu,"paused",Cu[6])},m(Wu,_h){H(Wu,Tu,_h),ie(Pu,Tu,null),W(Tu,Bu),W(Tu,Lu),W(Tu,Ru),W(Tu,Ou),Cu[10](Ou),Gu=!0,zu||(Hu=[Ne(Ou,"play",Cu[11]),Ne(Ou,"pause",Cu[11]),Ne(Tu,"click",zo(Cu[7]))],zu=!0)},p(Wu,_h){Cu=Wu,(!Gu||_h&8&&!Ot(Ou.src,Du=Cu[3]))&&C(Ou,"src",Du),_h&64&&ku!==(ku=Cu[6])&&Ou[ku?"pause":"play"](),(!Gu||_h&64)&&me(Tu,"paused",Cu[6])},i(Wu){Gu||(M(Pu.$$.fragment,Wu),Wu&&Re(()=>{Nu&&Nu.end(1),Fu=wn(Tu,vn,{duration:Cu[2],delay:Cu[0],easing:On}),Fu.start()}),Gu=!0)},o(Wu){R(Pu.$$.fragment,Wu),Fu&&Fu.invalidate(),Wu&&(Nu=Bn(Tu,vn,{duration:Cu[2],delay:Cu[1],easing:On})),Gu=!1},d(Wu){Wu&&B(Tu),se(Pu),Cu[10](null),Wu&&Nu&&Nu.end(),zu=!1,on(Hu)}}}function Tw(Cu){let Tu,Pu,Bu=Cu[4]&&Zl(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[4]?Bu?(Bu.p(Lu,Ru),Ru&16&&M(Bu,1)):(Bu=Zl(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function Sw(Cu,Tu,Pu){let{inDelay:Bu=0}=Tu,{outDelay:Lu=0}=Tu,{duration:Ru=0}=Tu,{url:Ou}=Tu,{unfolded:Du}=Tu,{mediaStore:ku}=Tu,{hooksInfo:Fu={}}=Tu;const Nu=kc("hooks");let Gu,zu=!0;ku.subscribe(({currentMediaUrl:Xc})=>{Xc!==Ou&&(Gu==null||Gu.pause())});function Hu(Xc){ku.set({currentMediaUrl:Ou}),Gu&&(Nu.emit("click",Object.assign({event:Xc,target:"AudioTagPlayIcon",audioInstance:Gu},Fu)),Gu.paused?Gu.play():Gu.pause(),Pu(5,Gu.onplay=ju=>Nu.emit("playStateChange",Object.assign({event:ju,state:"playing",mediaInstance:Gu},Fu)),Gu),Pu(5,Gu.onpause=ju=>Nu.emit("playStateChange",Object.assign({event:ju,state:"paused",mediaInstance:Gu},Fu)),Gu))}function Wu(Xc){Je[Xc?"unshift":"push"](()=>{Gu=Xc,Pu(5,Gu)})}function _h(){zu=this.paused,Pu(6,zu)}return Cu.$$set=Xc=>{"inDelay"in Xc&&Pu(0,Bu=Xc.inDelay),"outDelay"in Xc&&Pu(1,Lu=Xc.outDelay),"duration"in Xc&&Pu(2,Ru=Xc.duration),"url"in Xc&&Pu(3,Ou=Xc.url),"unfolded"in Xc&&Pu(4,Du=Xc.unfolded),"mediaStore"in Xc&&Pu(8,ku=Xc.mediaStore),"hooksInfo"in Xc&&Pu(9,Fu=Xc.hooksInfo)},Cu.$$.update=()=>{Cu.$$.dirty&48&&(Du||Gu==null||Gu.pause())},[Bu,Lu,Ru,Ou,Du,Gu,zu,Hu,ku,Fu,Wu,_h]}class kw extends fe{constructor(Tu){super(),ue(this,Tu,Sw,Tw,de,{inDelay:0,outDelay:1,duration:2,url:3,unfolded:4,mediaStore:8,hooksInfo:9},Iw)}}function Dw(Cu){ge(Cu,"svelte-4r8s18",".audio-tag.svelte-4r8s18.svelte-4r8s18{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.line.svelte-4r8s18.svelte-4r8s18{display:flex;position:absolute;top:0;left:0;width:10.125rem;height:0.0625rem;transform:translate3d(0, -50%, 0.625rem)}.content.svelte-4r8s18.svelte-4r8s18{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-4r8s18.svelte-4r8s18{position:relative;width:100%;height:100%}.audio-icon.svelte-4r8s18.svelte-4r8s18{vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.unfolded.svelte-4r8s18 .audio-icon.svelte-4r8s18{pointer-events:auto}")}function Jl(Cu){var Tu,Pu;let Bu,Lu,Ru,Ou,Du,ku,Fu,Nu,Gu,zu,Hu,Wu,_h,Xc,ju,_c,_f;return Lu=new Ct({props:{visible:Cu[6],left:Cu[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Du=new pd({props:{unfolded:Cu[6],duration:1e3,outDelay:Cu[5]+20*Math.min(rt((Tu=Cu[4][0])==null?void 0:Tu.content.length,10),15)}}),zu=new kw({props:{unfolded:Cu[6],mediaStore:Cu[0],url:Cu[1].data.audioUrl,duration:1e3,outDelay:20*Math.min(rt((Pu=Cu[4][0])==null?void 0:Pu.content.length,10),15),hooksInfo:{tag:Cu[1]}}}),_h=new zd({props:{visible:Cu[6],textUnfolded:Cu[2],textItems:Cu[4]}}),{c(){Bu=F("div"),oe(Lu.$$.fragment),Ru=q(),Ou=F("div"),oe(Du.$$.fragment),ku=q(),Fu=F("div"),Nu=F("div"),Gu=F("div"),oe(zu.$$.fragment),Hu=q(),Wu=F("div"),oe(_h.$$.fragment),C(Ou,"class","line svelte-4r8s18"),Q(Ou,"width",Cu[3]+"px"),C(Gu,"class","audio-icon svelte-4r8s18"),Q(Wu,"display","inline-block"),C(Nu,"class","wrapper svelte-4r8s18"),C(Fu,"class","content svelte-4r8s18"),Re(()=>Cu[10].call(Fu)),C(Bu,"class","audio-tag svelte-4r8s18"),me(Bu,"unfolded",Cu[6])},m(ep,tp){H(ep,Bu,tp),ie(Lu,Bu,null),W(Bu,Ru),W(Bu,Ou),ie(Du,Ou,null),W(Bu,ku),W(Bu,Fu),W(Fu,Nu),W(Nu,Gu),ie(zu,Gu,null),W(Nu,Hu),W(Nu,Wu),ie(_h,Wu,null),Xc=rn(Fu,Cu[10].bind(Fu)),ju=!0,_c||(_f=Ne(Wu,"click",Cu[7]),_c=!0)},p(ep,tp){var op,lp;const up={};tp&64&&(up.visible=ep[6]),tp&8&&(up.left=ep[3]/2+"px"),Lu.$set(up);const hp={};tp&64&&(hp.unfolded=ep[6]),tp&48&&(hp.outDelay=ep[5]+20*Math.min(rt((op=ep[4][0])==null?void 0:op.content.length,10),15)),Du.$set(hp),tp&8&&Q(Ou,"width",ep[3]+"px");const np={};tp&64&&(np.unfolded=ep[6]),tp&1&&(np.mediaStore=ep[0]),tp&2&&(np.url=ep[1].data.audioUrl),tp&16&&(np.outDelay=20*Math.min(rt((lp=ep[4][0])==null?void 0:lp.content.length,10),15)),tp&2&&(np.hooksInfo={tag:ep[1]}),zu.$set(np);const rp={};tp&64&&(rp.visible=ep[6]),tp&4&&(rp.textUnfolded=ep[2]),tp&16&&(rp.textItems=ep[4]),_h.$set(rp),(!ju||tp&64)&&me(Bu,"unfolded",ep[6])},i(ep){ju||(M(Lu.$$.fragment,ep),M(Du.$$.fragment,ep),M(zu.$$.fragment,ep),M(_h.$$.fragment,ep),ju=!0)},o(ep){R(Lu.$$.fragment,ep),R(Du.$$.fragment,ep),R(zu.$$.fragment,ep),R(_h.$$.fragment,ep),ju=!1},d(ep){ep&&B(Bu),se(Lu),se(Du),se(zu),se(_h),Xc(),_c=!1,_f()}}}function Lw(Cu){let Tu,Pu,Bu=Cu[1].state&&Jl(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[1].state?Bu?(Bu.p(Lu,Ru),Ru&2&&M(Bu,1)):(Bu=Jl(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function Mw(Cu,Tu,Pu){let Bu,Lu,Ru;var Ou;let{mediaStore:Du}=Tu,{tag:ku}=Tu,Fu=!1,Nu,Gu=[];function zu(){Pu(2,Fu=!Fu)}function Hu(){Nu=this.clientWidth,Pu(3,Nu)}return Cu.$$set=Wu=>{"mediaStore"in Wu&&Pu(0,Du=Wu.mediaStore),"tag"in Wu&&Pu(1,ku=Wu.tag)},Cu.$$.update=()=>{Cu.$$.dirty&258&&Pu(6,Bu=!!(!(Pu(8,Ou=ku.state)===null||Ou===void 0)&&Ou.unfolded)),Cu.$$.dirty&2&&Pu(9,Lu=ku.data.text),Cu.$$.dirty&512&&Pu(4,Gu=[{id:ot(),content:Lu}]),Cu.$$.dirty&4&&Pu(5,Ru=Fu?450:0)},[Du,ku,Fu,Nu,Gu,Ru,Bu,zu,Ou,Lu,Hu]}class zw extends fe{constructor(Tu){super(),ue(this,Tu,Mw,Lw,de,{mediaStore:0,tag:1},Dw)}}function Ow(Cu){ge(Cu,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function ql(Cu){let Tu,Pu,Bu;return Pu=new Ud({props:{unfolded:Cu[5],mediaData:Cu[4],objectFit:Cu[2],enableCarousel:Cu[1],autoplayConfig:Cu[3],inDelay:500,duration:500}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),C(Tu,"class","media-wrapper svelte-10cw0el")},m(Lu,Ru){H(Lu,Tu,Ru),ie(Pu,Tu,null),Bu=!0},p(Lu,Ru){const Ou={};Ru&32&&(Ou.unfolded=Lu[5]),Ru&16&&(Ou.mediaData=Lu[4]),Ru&4&&(Ou.objectFit=Lu[2]),Ru&2&&(Ou.enableCarousel=Lu[1]),Ru&8&&(Ou.autoplayConfig=Lu[3]),Pu.$set(Ou)},i(Lu){Bu||(M(Pu.$$.fragment,Lu),Bu=!0)},o(Lu){R(Pu.$$.fragment,Lu),Bu=!1},d(Lu){Lu&&B(Tu),se(Pu)}}}function jw(Cu){let Tu,Pu,Bu=Cu[0].state&&Cu[4]&&ql(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,[Ru]){Lu[0].state&&Lu[4]?Bu?(Bu.p(Lu,Ru),Ru&17&&M(Bu,1)):(Bu=ql(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function Bw(Cu,Tu,Pu){let Bu,Lu,Ru,Ou,Du,{tag:ku}=Tu;return Cu.$$set=Fu=>{"tag"in Fu&&Pu(0,ku=Fu.tag)},Cu.$$.update=()=>{Cu.$$.dirty&1&&Pu(5,Bu=ku.state?ku.state.unfolded:!1),Cu.$$.dirty&1&&Pu(4,Lu=ku.data.mediaData),Cu.$$.dirty&1&&Pu(1,Ru=ku.data.enableCarousel),Cu.$$.dirty&3&&Pu(3,Ou=rt(ku.data.autoplayConfig,{autoplay:rt(Ru,!0),autoplayVideo:!0})),Cu.$$.dirty&1&&Pu(2,Du=rt(ku.data.objectFit,(()=>ku.data.adaptationMode==="stretch"?"cover":ku.data.adaptationMode==="proportional"?"contain":void 0)()))},[ku,Ru,Du,Ou,Lu,Bu]}class Rw extends fe{constructor(Tu){super(),ue(this,Tu,Bw,jw,de,{tag:0},Ow)}}function Hw(Cu){ge(Cu,"svelte-7x7u86",".wrapper.svelte-7x7u86{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-7x7u86{position:relative;display:flex;align-items:center;justify-content:center}.icon.svelte-7x7u86{position:relative;margin-bottom:0.6875rem}.arrow0.svelte-7x7u86,.arrow1.svelte-7x7u86,.arrow2.svelte-7x7u86{position:absolute;width:1.625rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAAAkCAYAAAAnxQwhAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATqADAAQAAAABAAAAJAAAAABrx2urAAAGm0lEQVRoBd2ZXbCVUxjH26QSfSCS0JwoFNEZ0cc45iSmUUaqC+KCwUUXxYUZw4yrLhozLlDDRWa6oW5yOFTT0IcyKn1JnIjDKelLPipJcXT8fttaZ95qd+yzv+uZ+e211rvfd61n/ddaz1rv3qkOFWgtLS3n4Vb34NqhVCr1d6W5mao0hxBNwfrCOcG346S7Ee9gKFdEUjHCIZi+XA69E8p4rQVM98EeBLRcdqsI4RCtI0r0h4uCIvo1BZx1b4GzTjsA3yFec7pUxo+yC4doXen/IDg/6GB5GlSH8mbSWXA4lI+SNiDekVAuS1JW4RCtF72+EWI8c6k+A6ZJc5m+BHvCxX9ItyLe/lAueVIW4UI8u4beDkj02FnnTOuUuJbM/kVhNjQkLjaSbyxH3Cu5cIjmUWMoOKti+2PIT4JsrI6blkKMe87GTYhX0iNLdDwbh/O+B9G6UclIMNWcXQ/CrRbaYRu5dz44C7XfYTXimZbESiYconk2GwGdwSOF4j0JV0AuZrybA4plfYq4BvF2kRbdSiIcog2hJ+6StmcnFesJ6AL52DEefgOiWNa/EfG25FNpNs8WVbgQz+7EEc9o0RRxYiwUKDXuJcVqovxRMeNe0YRDtB44Pw4uAc0jx2gYZqEItoE63TSc0fILLEa8oryqFUU4ROuH04oWl6I76WQwzhXTXLILIO6wLuVFiLedtKBWcOEQ7XY8rE146ZvAwxDfDBJfFSX7J7XOgz8Sta9AvE8T5byzBRMuxLP78Mg3Ac3l0gcmWCiD1dPmboh9/JL8+4WKe7HSvPqFaL6cTwGF0jyc3gTOvnLaehr/HOIrnUeYeYj3W75O5S0covnq9AhcEJxpJr0Lrgrlcic7cWAZ+AuM5o8DbyJeY7qU40dewiFaDe26FOOIKppl41olmWK9C1E8V0Q94q3M1cmchAvx7CEaHZ5oWKfGJ8qVmF2EU75hxH67YcxHQK+1y2IFWT+EaBdz81SoCg+59fvCXuh4tjnUf0tIC5WsoyJjnUckbTu8hni/WsjW2iUcog2k4unQPTTglm/HPLcVwpqoZCu4lOLxxeOFocCfneJgkc3LfuDpzyDG5UPkZyHetmxrzVo4RLubSh+FGM8OkHcTuBDyMUfaTihQHJBYn0cafTTVfKFX0KHgzM/HDvPwcugZKnGw5iLeh6HcZvK/woV45gu5wkVTtLGxkEN6jGc2gaJ5lDkXtCjUXvIrQf9qoDckzU56pFC8augMudoSHoziWcdSmIOA8e3Da6dYm8Ihmu+Zz8H14ckYWHONZ19Qz4+go53A9qNYLvtPYBlON5C2Gn4MpuDsHgVxecXvHQQH8krw7JiLuUnohz5pX8NM/PB9N6OdVjicNaa8AHFJROeqMtZ0+ovGk2/AI0o3iGKRTcey9aSO8locbXN3wyc75k4+BoaBYSNZ3yHKHj2ug6uhPdbEzQ6qK0ARXQ0z8MmYe4plFA4Hx3Hn0xB3Hiv0V9qTYxCXMpoie2LX+vyXnPDpiH4Ay3HMe9tt+NiTh0bDPRBXRLIed07tZvDebEzhN4CzV3O5voyPi9KlxMcJwuGMQj0FE8M9Ku9I1MIJ94bvk4mNGORdcr41GLd8xjpM94HxZAmO7CAtmOF3Pyoz5srJ8bCZaw68M95NJU4GshlNf1dAf4i+15F/Bb9b416rGDRuPHsRHCHN2PEz3GahDXMq/wR9wfgTGyObFnE56ULwDxW/K5rRB/tTDa4YY2Imf3Zx/TIwFLVl6/iyF8SNxxX0LH1Ix720cDRoTJgNcbT2hwdUPZPZeCNYsc9EQazPEV4NTm9/zjlKWnKjT11otBYUcRS4AuKgmjrYToxrwUHPZN9z0Ql0afhyL+k0+rQtRQOu/3qIAhjIB0IPSJrrvwEcARvTko44896DhXFUvKESjD66msbD/eBMSw60eQVygAfDyXH8INe2gZPLiaF4ExTucTLPg2aMGg7uVpqzZwu4tm8Ad7UoFtn0q4ti1SHWt16odKO/A/DxAZgAcYVFt+3nV2AcHAIdQTsOa6Ea7P9MhZtB5jHQmsDltwMM8qrszFPpaEfILIYF4H+ZVnrGGf12coyEyXAvdIU4KUydaa4+r/cDl3UVaHMVzun7erp4+g/FWQWK5a6oeGeNoYHijAVFrIG44shmtKkK52x6FSZluMW4pVjvIJbHibPe0MPl61JWxEEZOvw216a3LkEeGMGFO0D1d8KqMyVu4WtRDE2Mh85Az6Wuso/RZA1ph38BBMvNbHuq7kAAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:contain;animation-fill-mode:backwards;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-duration:1.2s}.arrow1.svelte-7x7u86{position:relative}.arrow0.svelte-7x7u86{top:-0.75rem;animation-name:svelte-7x7u86-up0}.arrow1.svelte-7x7u86{animation-name:svelte-7x7u86-up1}.arrow2.svelte-7x7u86{top:0.75rem;animation-name:svelte-7x7u86-up2}.text.svelte-7x7u86{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;word-break:break-all;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}@keyframes svelte-7x7u86-up0{0%{opacity:0.8;transform:translate3d(0, 0, 0) scale(0.84)}33.33%,100%{opacity:0;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up1{0%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}33.33%,100%{opacity:0.8;transform:translate3d(0, -0.75rem, 0) scale(0.84)}}@keyframes svelte-7x7u86-up2{0%{opacity:0}33.33%,100%{opacity:1;transform:translate3d(0, -0.75rem, 0)}}.link.svelte-7x7u86{position:relative;width:1.75rem;height:0.75rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAkCAMAAAAgl+0yAAAAnFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+TINBkAAAAM3RSTlMAjLy6ILM2Fi+Zng3BrPvao4VC9ceneQfKkmNdV1AbEeLOsHA77ujUtn5JLnRraSUUjVLj/+RVAAABhElEQVRIx63V2W6CQBiGYUBUQGDYdwTZQZZa7v/eimik/ket/7yZ4yeTTCYf8+dOX8etxGVoxAvCVbguR3g0uRTMA0w4odGi+CbzFnGKosCqrmHc5rdEwzCwqtGFJlC7DqtOcTxANY67BHnVKOpVoEZRjFPdLgxbqIZhhFTjINChGgThF06NhpGd35OGMcCppyDPfajm+YhUR8cRoeo4+RGlJnnbalBt2x6nHh1dt4Gq6bqDU886y2ZQZVn9jFJ51vcbqPo+Up18UeSgKoo3nHqVJEkGqi1JPk49aLZmQdW2xXf1zP+vUFHsC1QVReK33xdk+w9SaqAq+732UvvdZ2UEqrud8lR5Wc4a7pO8GaoL9VBjy7rMlMosq1lV43LhZlrtF+yuJlbtEXpqXXP3NYwI8VJqakOIziw5aepV1FQuTdfhvlWVZdJCrao6MPe0spRpqV5ZFivqNqYpq3RQ2TST5/h4quoRCmwqq6rymol6plV53IZSomTKE/MroWfxDevL/wAEdPq1eGDh4AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-size:contain;animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:1.2s;animation-name:svelte-7x7u86-left-right}@keyframes svelte-7x7u86-left-right{0%,100%{opacity:0.8;transform:translateX(-0.3125rem)}50%{opacity:1;transform:translateX(0)}}")}function Nw(Cu){let Tu,Pu,Bu,Lu;return Tu=new Ct({props:{visible:!0,outDelay:0,inDelay:0,width:1.4,left:13,bottom:"auto",blurRadius:50,spreadRadius:18}}),{c(){oe(Tu.$$.fragment),Pu=q(),Bu=F("div"),C(Bu,"class","link svelte-7x7u86")},m(Ru,Ou){ie(Tu,Ru,Ou),H(Ru,Pu,Ou),H(Ru,Bu,Ou),Lu=!0},i(Ru){Lu||(M(Tu.$$.fragment,Ru),Lu=!0)},o(Ru){R(Tu.$$.fragment,Ru),Lu=!1},d(Ru){se(Tu,Ru),Ru&&B(Pu),Ru&&B(Bu)}}}function Gw(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du,ku;return Tu=new Ct({props:{visible:!0,outDelay:0,inDelay:0,height:1.2,left:13,bottom:12,blurRadius:50,spreadRadius:18}}),{c(){oe(Tu.$$.fragment),Pu=q(),Bu=F("div"),Lu=q(),Ru=F("div"),Ou=q(),Du=F("div"),C(Bu,"class","arrow0 svelte-7x7u86"),C(Ru,"class","arrow1 svelte-7x7u86"),C(Du,"class","arrow2 svelte-7x7u86")},m(Fu,Nu){ie(Tu,Fu,Nu),H(Fu,Pu,Nu),H(Fu,Bu,Nu),H(Fu,Lu,Nu),H(Fu,Ru,Nu),H(Fu,Ou,Nu),H(Fu,Du,Nu),ku=!0},i(Fu){ku||(M(Tu.$$.fragment,Fu),ku=!0)},o(Fu){R(Tu.$$.fragment,Fu),ku=!1},d(Fu){se(Tu,Fu),Fu&&B(Pu),Fu&&B(Bu),Fu&&B(Lu),Fu&&B(Ru),Fu&&B(Ou),Fu&&B(Du)}}}function Fw(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu,Nu=Cu[0].text+"",Gu,zu;const Hu=[Gw,Nw],Wu=[];function _h(Xc,ju){return Xc[0].linkType===bo.VrLink?0:Xc[0].linkType===bo.NormalLink?1:-1}return~(Bu=_h(Cu))&&(Lu=Wu[Bu]=Hu[Bu](Cu)),Du=new Ct({props:{visible:!0,outDelay:0,inDelay:0,left:"auto",bottom:"auto",width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){Tu=F("div"),Pu=F("div"),Lu&&Lu.c(),Ru=q(),Ou=F("div"),oe(Du.$$.fragment),ku=q(),Fu=F("div"),Gu=Ge(Nu),C(Pu,"class","icon svelte-7x7u86"),C(Fu,"class","text svelte-7x7u86"),C(Ou,"class","text-wrapper svelte-7x7u86"),C(Tu,"class","wrapper svelte-7x7u86")},m(Xc,ju){H(Xc,Tu,ju),W(Tu,Pu),~Bu&&Wu[Bu].m(Pu,null),W(Tu,Ru),W(Tu,Ou),ie(Du,Ou,null),W(Ou,ku),W(Ou,Fu),W(Fu,Gu),zu=!0},p(Xc,[ju]){let _c=Bu;Bu=_h(Xc),Bu!==_c&&(Lu&&(ve(),R(Wu[_c],1,1,()=>{Wu[_c]=null}),be()),~Bu?(Lu=Wu[Bu],Lu||(Lu=Wu[Bu]=Hu[Bu](Xc),Lu.c()),M(Lu,1),Lu.m(Pu,null)):Lu=null),(!zu||ju&1)&&Nu!==(Nu=Xc[0].text+"")&&Ye(Gu,Nu)},i(Xc){zu||(M(Lu),M(Du.$$.fragment,Xc),zu=!0)},o(Xc){R(Lu),R(Du.$$.fragment,Xc),zu=!1},d(Xc){Xc&&B(Tu),~Bu&&Wu[Bu].d(),se(Du)}}}function Ww(Cu,Tu,Pu){let Bu,{tag:Lu}=Tu;return Cu.$$set=Ru=>{"tag"in Ru&&Pu(1,Lu=Ru.tag)},Cu.$$.update=()=>{Cu.$$.dirty&2&&Pu(0,Bu=Lu.data)},[Bu,Lu]}class Qw extends fe{constructor(Tu){super(),ue(this,Tu,Ww,Fw,de,{tag:1},Hw)}}function _w(Cu){ge(Cu,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function Kl(Cu){let Tu,Pu=Cu[0].element+"",Bu;return{c(){Tu=new Zi(!1),Bu=Pe(),Tu.a=Bu},m(Lu,Ru){Tu.m(Pu,Lu,Ru),H(Lu,Bu,Ru)},p(Lu,Ru){Ru&1&&Pu!==(Pu=Lu[0].element+"")&&Tu.p(Pu)},d(Lu){Lu&&B(Bu),Lu&&Tu.d()}}}function Xw(Cu){let Tu,Pu=typeof Cu[0].element=="string"&&Kl(Cu);return{c(){Tu=F("div"),Pu&&Pu.c(),C(Tu,"class","customElement__container svelte-kzl2aj")},m(Bu,Lu){H(Bu,Tu,Lu),Pu&&Pu.m(Tu,null),Cu[2](Tu)},p(Bu,[Lu]){typeof Bu[0].element=="string"?Pu?Pu.p(Bu,Lu):(Pu=Kl(Bu),Pu.c(),Pu.m(Tu,null)):Pu&&(Pu.d(1),Pu=null)},i:le,o:le,d(Bu){Bu&&B(Tu),Pu&&Pu.d(),Cu[2](null)}}}function Yw(Cu,Tu,Pu){let{tag:Bu}=Tu,Lu,Ru;wt(()=>{if(Lu){if(Bu.element instanceof Element){const Du=Bu.element;Lu.appendChild(Du),Ru=()=>Lu==null?void 0:Lu.removeChild(Du)}else if(typeof Bu.element=="function"){const Du=Bu.element;Ru=Du(Lu)}}}),an(()=>{Ru==null||Ru()});function Ou(Du){Je[Du?"unshift":"push"](()=>{Lu=Du,Pu(1,Lu)})}return Cu.$$set=Du=>{"tag"in Du&&Pu(0,Bu=Du.tag)},[Bu,Lu,Ou]}class Vw extends fe{constructor(Tu){super(),ue(this,Tu,Yw,Xw,de,{tag:0},_w)}}function Uw(Cu){ge(Cu,"svelte-6jfp1v",`@font-face{font-family:'TG-TYPE';font-style:normal;font-weight:400;src:local('TG-TYPE-Bold'),
      url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==)
        format('woff2')}.content__container.svelte-6jfp1v{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif}.content__container.unClickable.svelte-6jfp1v{pointer-events:none !important}.content__container.unClickable.svelte-6jfp1v *{pointer-events:none !important}*{-webkit-tap-highlight-color:transparent}.content__wrapper.svelte-6jfp1v{pointer-events:none;width:100%;height:100%}.withAnimation.svelte-6jfp1v{transition:opacity 0.3s linear}.content__container.hide.svelte-6jfp1v{opacity:0;pointer-events:none}.content__container.disable.svelte-6jfp1v{display:none}.content__container.hide.svelte-6jfp1v *{pointer-events:none}.content.svelte-6jfp1v{position:relative;width:100%;height:100%;font-size:0.75rem;line-height:1.125rem;color:#fff}.content.svelte-6jfp1v:not(.unfolded){pointer-events:none}.content.svelte-6jfp1v:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-6jfp1v{pointer-events:auto}`)}function Zw(Cu){let Tu,Pu;return Tu=new Rw({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function Jw(Cu){let Tu,Pu;return Tu=new Qw({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function qw(Cu){let Tu,Pu;return Tu=new xw({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function Kw(Cu){let Tu,Pu;return Tu=new zw({props:{mediaStore:Cu[4],tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&16&&(Ru.mediaStore=Bu[4]),Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function $w(Cu){let Tu,Pu;return Tu=new ww({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function eE(Cu){let Tu,Pu;return Tu=new Lv({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function tE(Cu){let Tu,Pu;return Tu=new Vw({props:{tag:Oe(Cu[1])}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&2&&(Ru.tag=Oe(Bu[1])),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function nE(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du,ku,Fu;const Nu=[tE,eE,$w,Kw,qw,Jw,Zw],Gu=[];function zu(Hu,Wu){return Hu[1].element?0:Hu[1].contentType===At.Text?1:Hu[1].contentType===At.ImageText?2:Hu[1].contentType===At.Audio?3:Hu[1].contentType===At.Marketing?4:Hu[1].contentType===At.Link?5:Hu[1].contentType===At.MediaPlane?6:-1}return~(Lu=zu(Cu))&&(Ru=Gu[Lu]=Nu[Lu](Cu)),{c(){var Hu,Wu,_h;Tu=F("div"),Pu=F("div"),Bu=F("div"),Ru&&Ru.c(),C(Bu,"class","content svelte-6jfp1v"),me(Bu,"unfolded",(Hu=Cu[1].state)==null?void 0:Hu.unfolded),C(Pu,"class","content__wrapper svelte-6jfp1v"),C(Tu,"class","content__container svelte-6jfp1v"),C(Tu,"data-id",Ou=Cu[1].id),me(Tu,"disable",Cu[1].enabled===!1||((Wu=Cu[1].temporaryState)==null?void 0:Wu.visible)===!1),me(Tu,"hide",!Cu[3].visible||!Cu[5].visible||!((_h=Cu[1].state)!=null&&_h.visible)),me(Tu,"withAnimation",Cu[0]),me(Tu,"unClickable",Cu[1].clickable===!1),Q(Tu,"width",Cu[1].pointType==="PointTag"?0:"100%"),Q(Tu,"height",Cu[1].pointType==="PointTag"?0:"100%")},m(Hu,Wu){H(Hu,Tu,Wu),W(Tu,Pu),W(Pu,Bu),~Lu&&Gu[Lu].m(Bu,null),Du=!0,ku||(Fu=Ne(Tu,"click",zo(Cu[13])),ku=!0)},p(Hu,[Wu]){var _h,Xc,ju;let _c=Lu;Lu=zu(Hu),Lu===_c?~Lu&&Gu[Lu].p(Hu,Wu):(Ru&&(ve(),R(Gu[_c],1,1,()=>{Gu[_c]=null}),be()),~Lu?(Ru=Gu[Lu],Ru?Ru.p(Hu,Wu):(Ru=Gu[Lu]=Nu[Lu](Hu),Ru.c()),M(Ru,1),Ru.m(Bu,null)):Ru=null),(!Du||Wu&2)&&me(Bu,"unfolded",(_h=Hu[1].state)==null?void 0:_h.unfolded),(!Du||Wu&2&&Ou!==(Ou=Hu[1].id))&&C(Tu,"data-id",Ou),(!Du||Wu&2)&&me(Tu,"disable",Hu[1].enabled===!1||((Xc=Hu[1].temporaryState)==null?void 0:Xc.visible)===!1),(!Du||Wu&42)&&me(Tu,"hide",!Hu[3].visible||!Hu[5].visible||!((ju=Hu[1].state)!=null&&ju.visible)),(!Du||Wu&1)&&me(Tu,"withAnimation",Hu[0]),(!Du||Wu&2)&&me(Tu,"unClickable",Hu[1].clickable===!1),Wu&2&&Q(Tu,"width",Hu[1].pointType==="PointTag"?0:"100%"),Wu&2&&Q(Tu,"height",Hu[1].pointType==="PointTag"?0:"100%")},i(Hu){Du||(M(Ru),Du=!0)},o(Hu){R(Ru),Du=!1},d(Hu){Hu&&B(Tu),~Lu&&Gu[Lu].d(),ku=!1,Fu()}}}function iE(Cu,Tu,Pu){let Bu,Lu,Ru,Ou;var Du,ku;let{withAnimation:Fu=!1}=Tu,{tag:Nu}=Tu,{hooks:Gu}=Tu,{state:zu}=Tu,{mediaStore:Hu}=Tu,{temporaryState:Wu}=Tu;Sc("hooks",Gu);let _h,Xc;function ju(_f){_f?Gu.emit("exposure",{id:Ou,type:"start"}):Gu.emit("exposure",{id:Ou,type:"end"})}const _c=_f=>Gu.emit("click",{event:_f,target:"TagContent",tag:Nu});return Cu.$$set=_f=>{"withAnimation"in _f&&Pu(0,Fu=_f.withAnimation),"tag"in _f&&Pu(1,Nu=_f.tag),"hooks"in _f&&Pu(2,Gu=_f.hooks),"state"in _f&&Pu(3,zu=_f.state),"mediaStore"in _f&&Pu(4,Hu=_f.mediaStore),"temporaryState"in _f&&Pu(5,Wu=_f.temporaryState)},Cu.$$.update=()=>{Cu.$$.dirty&66&&Pu(11,Bu=Pu(6,Du=Nu.state)===null||Du===void 0?void 0:Du.unfolded),Cu.$$.dirty&130&&Pu(10,Lu=Pu(7,ku=Nu.state)===null||ku===void 0?void 0:ku.visible),Cu.$$.dirty&1064&&Pu(12,Ru=zu.visible&&Wu.visible&&Lu),Cu.$$.dirty&2&&(Ou=Nu.id),Cu.$$.dirty&4096&&ju(Ru),Cu.$$.dirty&3842&&Nu.hooks&&(Bu!==void 0&&Bu!==Xc&&(Pu(9,Xc=Bu),Bu?Nu.hooks.emit("unfolded"):Nu.hooks.emit("folded")),Lu!==void 0&&Lu!==_h&&(Pu(8,_h=Lu),Lu?Nu.hooks.emit("show"):Nu.hooks.emit("hide")))},[Fu,Nu,Gu,zu,Hu,Wu,Du,ku,_h,Xc,Lu,Bu,Ru,_c]}class Zd extends fe{constructor(Tu){super(),ue(this,Tu,iE,nE,de,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},Uw)}}function sE(Cu){ge(Cu,"svelte-jtnm0",".point.svelte-jtnm0.svelte-jtnm0{width:1.5rem;height:1.5rem}.small-point.svelte-jtnm0.svelte-jtnm0,.big-point.svelte-jtnm0.svelte-jtnm0{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-jtnm0.svelte-jtnm0{background-color:rgba(0, 0, 0, 0.1)}.folded.point.svelte-jtnm0.svelte-jtnm0{animation:svelte-jtnm0-breathing 2s linear infinite}.big-point.svelte-jtnm0.svelte-jtnm0::before,.big-point.svelte-jtnm0.svelte-jtnm0::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-jtnm0.svelte-jtnm0::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=)}.folded.svelte-jtnm0 .big-point.svelte-jtnm0::before{animation:svelte-jtnm0-rotate 2s linear infinite}.big-point.svelte-jtnm0.svelte-jtnm0::after{position:absolute;width:1rem;height:1rem;background-image:var(--iconUrl)}.small-point.svelte-jtnm0.svelte-jtnm0::before{content:'';display:block;position:absolute;pointer-events:none;width:0.25rem;height:0.25rem;border-radius:100%;background-color:white}.folded.svelte-jtnm0 .big-point.svelte-jtnm0{opacity:1;scale:1}.unfolded.svelte-jtnm0 .big-point.svelte-jtnm0{opacity:0;scale:0}.folded.svelte-jtnm0 .small-point.svelte-jtnm0{opacity:0;scale:6}.unfolded.svelte-jtnm0 .small-point.svelte-jtnm0{opacity:1;scale:1}@keyframes svelte-jtnm0-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes svelte-jtnm0-breathing{0%{transform:scale(1)}25%{transform:scale(0.9)}50%{transform:scale(1)}}")}function oE(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du;return Pu=new Ct({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),Bu=q(),Lu=F("div"),Ru=q(),Ou=F("div"),C(Lu,"class","small-point svelte-jtnm0"),Q(Lu,"transition-delay",Cu[3]?Cu[2]+"ms":"0ms"),C(Ou,"class","big-point svelte-jtnm0"),Q(Ou,"--iconUrl","url("+Cu[1]+")"),Q(Ou,"transition-delay",Cu[3]?Cu[2]+"ms":"0ms"),C(Tu,"class","point svelte-jtnm0"),me(Tu,"folded",Cu[3]),me(Tu,"unfolded",Cu[0])},m(ku,Fu){H(ku,Tu,Fu),ie(Pu,Tu,null),W(Tu,Bu),W(Tu,Lu),W(Tu,Ru),W(Tu,Ou),Du=!0},p(ku,[Fu]){Fu&12&&Q(Lu,"transition-delay",ku[3]?ku[2]+"ms":"0ms"),(!Du||Fu&2)&&Q(Ou,"--iconUrl","url("+ku[1]+")"),Fu&12&&Q(Ou,"transition-delay",ku[3]?ku[2]+"ms":"0ms"),(!Du||Fu&8)&&me(Tu,"folded",ku[3]),(!Du||Fu&1)&&me(Tu,"unfolded",ku[0])},i(ku){Du||(M(Pu.$$.fragment,ku),Du=!0)},o(ku){R(Pu.$$.fragment,ku),Du=!1},d(ku){ku&&B(Tu),se(Pu)}}}function rE(Cu,Tu,Pu){let Bu,{unfolded:Lu}=Tu,{iconUrl:Ru}=Tu,{foldDelay:Ou=800}=Tu;return Cu.$$set=Du=>{"unfolded"in Du&&Pu(0,Lu=Du.unfolded),"iconUrl"in Du&&Pu(1,Ru=Du.iconUrl),"foldDelay"in Du&&Pu(2,Ou=Du.foldDelay)},Cu.$$.update=()=>{Cu.$$.dirty&1&&Pu(3,Bu=!Lu)},[Lu,Ru,Ou,Bu]}class aE extends fe{constructor(Tu){super(),ue(this,Tu,rE,oE,de,{unfolded:0,iconUrl:1,foldDelay:2},sE)}}function lE(Cu){ge(Cu,"svelte-1rg9uk",".point.svelte-1rg9uk.svelte-1rg9uk{width:1rem;height:1rem}.small-point.svelte-1rg9uk.svelte-1rg9uk,.big-point.svelte-1rg9uk.svelte-1rg9uk{position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all 500ms}.big-point.svelte-1rg9uk.svelte-1rg9uk::before,.big-point.svelte-1rg9uk.svelte-1rg9uk::after{content:'';display:block;position:absolute;background-size:contain;background-repeat:no-repeat;pointer-events:none}.big-point.svelte-1rg9uk.svelte-1rg9uk::before{width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAOHRSTlMABgoNFBsYIhEmHyksMoJ6RZ5aXzpnU03AtqaZjLuGN+zcifnW0cjEqnA+lOZzbWLhkH6i8rGuagnOwPMAAAQOSURBVFjDrZiHctpAEIYXYzvGOvXeUe+IYuD93ywrJAIhFJX8M8zoBHzz757utHvwTETJHJPfGQZfWJXILWCMPuqNbuu6vj+khrHjed40TWvFfQ2jvCl8nGha6lQCl7s07UqcUlfOZrOxVtKsN2a+0uJYK+ScEIqiFifhBSGSsnJ8f8u99cLMVnEUHTKXIOMX6vuk5gpphFYyhmHzHpzcDqNUJGgEER+oz5OaK8ShNcIdt+zx1ys7lhdqiDlRkPF+JaSdWIhasaz6lLPQ1qFDIwYpDeTr62veCS8bGLIQRSsVK78/5nDeOlYIYhovHeOtU0dDXw2KSGiKesQRyjJ10Q66QcyZMTvpTEMUumpMieyWvs9ZLZcmodAOYlorsysBflpjiEJTFBEY5+7sicul34T1iak5U25momN9Ya4wPCT57r8cteW0dk4YuKMTqjXVkgjciFr+8B3ngnmM6kii5X/efB0F+jUHnuiatLJY+Et84EnUNacfiaKZjQhX4oJAwPlqOB3mJaoh4dxxG5Nc3Q8DkywunP6kBalN53J7G3g0JqiNC3qpjQ7TRPvmn2U3L3/kU4JaTn/SKU0qb76dDf0kGNjHJbD+wX1gcMxO6fZVrzXUcQaROkvt3+pljIYugQ0LDi1ZBgeN9JK9MjTCkmgwgPou19I5QzBI5yy5RvqOw6xMMbKzoeGWmnQfBBwa6woj6wyNsYSx7R0chWuOwsjOqR6aboyNyvcpgOsl3ZzNhoNm3bztdAK1x5NuzmCwunkjjq4AEzKXFI1NUmVnwIfydJBoW7CPVAR1uR6XbVwlmgF2xF1yPTbbubYHLZamgyTNhiSmp4PoJIEk+R+gOAFb+x+hxRoctHw6iItsMLT/Mf3RHixbnP5AyhEPmZ1NB+E6A0V3pi9aPqyB6Pz0bSTxXID0kE/d2DgvxBFzEKdutdXawJGSMlM3/3Sd4fA93bnTXkfSuvwGFGOI016QbKm3VdbOn/bKjpd1e6Pg1SlFhPzjdXWNwjNTyprkhz33i4Wpji600FA5h05q4Ywv/bxge7mNRe7YYtQMwqt/kMLixpXHQhBwcCXBYukxBbvkBTv4S5V/HNNC6EF089tPxxGHNzV8sKTgRhSzVYa2Wf5yeadHphlWGdb4IUeEO5K2SHrUiqJuW9GiLFdwVzRbCXTf5tg11mvhYdufZbLUr11XEi/k4KHexUxWSY8DBCby7AU8E3eUhfzVkYZgR6H/agF8C3KNqCeHLIIRR7oEr0XXsixy9P1jH/doJLF2nPXbIlw5y1aC6t4eROW1pduaLs/7b6NEqFiWrWpBzaXuaOy4Nfe6bRfqGwzSXBJZhnF8y9oUhcnzOyM9pI7wCWP0LSkyy1iFWWwsFp8LeKLfd4doRyTLRacAAAAASUVORK5CYII=);background-size:contain;background-repeat:no-repeat}.small-point.svelte-1rg9uk.svelte-1rg9uk::before{content:'';display:block;position:absolute;pointer-events:none;width:0.375rem;height:0.375rem;border-radius:100%;background-color:white}.unfolded.svelte-1rg9uk .big-point.svelte-1rg9uk{opacity:0;transform:scale(0)}.folded.svelte-1rg9uk .big-point.svelte-1rg9uk{opacity:1;transform:scale(1)}.unfolded.svelte-1rg9uk .small-point.svelte-1rg9uk{transform:scale(0.6)}.folded.svelte-1rg9uk .small-point.svelte-1rg9uk{transform:scale(1)}")}function cE(Cu){let Tu,Pu,Bu,Lu,Ru,Ou,Du;return Pu=new Ct({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),Bu=q(),Lu=F("div"),Ru=q(),Ou=F("div"),C(Lu,"class","small-point svelte-1rg9uk"),Q(Lu,"transition-delay",Cu[2]?Cu[1]+"ms":"0ms"),C(Ou,"class","big-point svelte-1rg9uk"),Q(Ou,"transition-delay",Cu[2]?Cu[1]+"ms":"0ms"),C(Tu,"class","point svelte-1rg9uk"),me(Tu,"unfolded",Cu[0]),me(Tu,"folded",Cu[2])},m(ku,Fu){H(ku,Tu,Fu),ie(Pu,Tu,null),W(Tu,Bu),W(Tu,Lu),W(Tu,Ru),W(Tu,Ou),Du=!0},p(ku,[Fu]){Fu&6&&Q(Lu,"transition-delay",ku[2]?ku[1]+"ms":"0ms"),Fu&6&&Q(Ou,"transition-delay",ku[2]?ku[1]+"ms":"0ms"),(!Du||Fu&1)&&me(Tu,"unfolded",ku[0]),(!Du||Fu&4)&&me(Tu,"folded",ku[2])},i(ku){Du||(M(Pu.$$.fragment,ku),Du=!0)},o(ku){R(Pu.$$.fragment,ku),Du=!1},d(ku){ku&&B(Tu),se(Pu)}}}function dE(Cu,Tu,Pu){let Bu,{unfolded:Lu}=Tu,{foldDelay:Ru=800}=Tu;return Cu.$$set=Ou=>{"unfolded"in Ou&&Pu(0,Lu=Ou.unfolded),"foldDelay"in Ou&&Pu(1,Ru=Ou.foldDelay)},Cu.$$.update=()=>{Cu.$$.dirty&1&&Pu(2,Bu=!Lu)},[Lu,Ru,Bu]}class uE extends fe{constructor(Tu){super(),ue(this,Tu,dE,cE,de,{unfolded:0,foldDelay:1},lE)}}function fE(Cu){ge(Cu,"svelte-r4i9gl",".point-click-helper.svelte-r4i9gl{width:2.5rem;height:2.5rem;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}")}function $l(Cu){let Tu,Pu,Bu=Cu[0].contentType!==At.Link&&ec(Cu);return{c(){Bu&&Bu.c(),Tu=Pe()},m(Lu,Ru){Bu&&Bu.m(Lu,Ru),H(Lu,Tu,Ru),Pu=!0},p(Lu,Ru){Lu[0].contentType!==At.Link?Bu?(Bu.p(Lu,Ru),Ru&1&&M(Bu,1)):(Bu=ec(Lu),Bu.c(),M(Bu,1),Bu.m(Tu.parentNode,Tu)):Bu&&(ve(),R(Bu,1,1,()=>{Bu=null}),be())},i(Lu){Pu||(M(Bu),Pu=!0)},o(Lu){R(Bu),Pu=!1},d(Lu){Bu&&Bu.d(Lu),Lu&&B(Tu)}}}function ec(Cu){let Tu,Pu,Bu,Lu,Ru,Ou;const Du=[pE,hE],ku=[];function Fu(Nu,Gu){var zu,Hu,Wu,_h;return((Hu=(zu=Nu[0].style)==null?void 0:zu.point)==null?void 0:Hu.style)==="CustomIcon"&&((_h=(Wu=Nu[0].style)==null?void 0:Wu.point)==null?void 0:_h.iconUrl)?0:1}return Bu=Fu(Cu),Lu=ku[Bu]=Du[Bu](Cu),{c(){Tu=F("div"),Pu=q(),Lu.c(),Ru=Pe(),C(Tu,"class","point-click-helper svelte-r4i9gl")},m(Nu,Gu){H(Nu,Tu,Gu),H(Nu,Pu,Gu),ku[Bu].m(Nu,Gu),H(Nu,Ru,Gu),Ou=!0},p(Nu,Gu){let zu=Bu;Bu=Fu(Nu),Bu===zu?ku[Bu].p(Nu,Gu):(ve(),R(ku[zu],1,1,()=>{ku[zu]=null}),be(),Lu=ku[Bu],Lu?Lu.p(Nu,Gu):(Lu=ku[Bu]=Du[Bu](Nu),Lu.c()),M(Lu,1),Lu.m(Ru.parentNode,Ru))},i(Nu){Ou||(M(Lu),Ou=!0)},o(Nu){R(Lu),Ou=!1},d(Nu){Nu&&B(Tu),Nu&&B(Pu),ku[Bu].d(Nu),Nu&&B(Ru)}}}function hE(Cu){let Tu,Pu;return Tu=new uE({props:{unfolded:Cu[0].state.unfolded,foldDelay:Cu[1]}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&1&&(Ru.unfolded=Bu[0].state.unfolded),Lu&2&&(Ru.foldDelay=Bu[1]),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function pE(Cu){let Tu,Pu;return Tu=new aE({props:{iconUrl:Cu[0].style.point.iconUrl,unfolded:Cu[0].state.unfolded,foldDelay:Cu[1]}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&1&&(Ru.iconUrl=Bu[0].style.point.iconUrl),Lu&1&&(Ru.unfolded=Bu[0].state.unfolded),Lu&2&&(Ru.foldDelay=Bu[1]),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function mE(Cu){var Tu,Pu,Bu;let Lu,Ru,Ou=((Tu=Cu[0].pointTagStyle)==null?void 0:Tu.leftPercent)&&((Pu=Cu[0].pointTagStyle)==null?void 0:Pu.topPercent)&&Cu[0].enabled!==!1&&Cu[0].state&&((Bu=Cu[0].temporaryState)==null?void 0:Bu.visible)!==!1&&$l(Cu);return{c(){Ou&&Ou.c(),Lu=Pe()},m(Du,ku){Ou&&Ou.m(Du,ku),H(Du,Lu,ku),Ru=!0},p(Du,[ku]){var Fu,Nu,Gu;((Fu=Du[0].pointTagStyle)==null?void 0:Fu.leftPercent)&&((Nu=Du[0].pointTagStyle)==null?void 0:Nu.topPercent)&&Du[0].enabled!==!1&&Du[0].state&&((Gu=Du[0].temporaryState)==null?void 0:Gu.visible)!==!1?Ou?(Ou.p(Du,ku),ku&1&&M(Ou,1)):(Ou=$l(Du),Ou.c(),M(Ou,1),Ou.m(Lu.parentNode,Lu)):Ou&&(ve(),R(Ou,1,1,()=>{Ou=null}),be())},i(Du){Ru||(M(Ou),Ru=!0)},o(Du){R(Ou),Ru=!1},d(Du){Ou&&Ou.d(Du),Du&&B(Lu)}}}function gE(Cu,Tu,Pu){let Bu;var Lu;let{tag:Ru}=Tu;return Cu.$$set=Ou=>{"tag"in Ou&&Pu(0,Ru=Ou.tag)},Cu.$$.update=()=>{Cu.$$.dirty&5&&Pu(1,Bu=rt(Pu(2,Lu=Ru.style)===null||Lu===void 0?void 0:Lu.foldedPointDelay,Ru.contentType===At.Marketing?600:void 0))},[Ru,Bu,Lu]}class vE extends fe{constructor(Tu){super(),ue(this,Tu,gE,mE,de,{tag:0},fE)}}function bE(Cu){ge(Cu,"svelte-1vzhbu2",".wrapper.svelte-1vzhbu2{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto}.point.svelte-1vzhbu2{-webkit-tap-highlight-color:transparent;position:absolute;transform:translate(-50%, -50%);left:50%;top:50%}")}function tc(Cu){let Tu,Pu;return Tu=new Zd({props:{mediaStore:Cu[4],withAnimation:Cu[0],tag:Oe(Cu[1]),hooks:Cu[2],state:Cu[3],temporaryState:Cu[5]}}),{c(){oe(Tu.$$.fragment)},m(Bu,Lu){ie(Tu,Bu,Lu),Pu=!0},p(Bu,Lu){const Ru={};Lu&16&&(Ru.mediaStore=Bu[4]),Lu&1&&(Ru.withAnimation=Bu[0]),Lu&2&&(Ru.tag=Oe(Bu[1])),Lu&4&&(Ru.hooks=Bu[2]),Lu&8&&(Ru.state=Bu[3]),Lu&32&&(Ru.temporaryState=Bu[5]),Tu.$set(Ru)},i(Bu){Pu||(M(Tu.$$.fragment,Bu),Pu=!0)},o(Bu){R(Tu.$$.fragment,Bu),Pu=!1},d(Bu){se(Tu,Bu)}}}function nc(Cu){let Tu,Pu,Bu,Lu,Ru;return Pu=new vE({props:{tag:Cu[1]}}),{c(){Tu=F("div"),oe(Pu.$$.fragment),C(Tu,"class","point svelte-1vzhbu2")},m(Ou,Du){H(Ou,Tu,Du),ie(Pu,Tu,null),Bu=!0,Lu||(Ru=Ne(Tu,"click",zo(Cu[11])),Lu=!0)},p(Ou,Du){const ku={};Du&2&&(ku.tag=Ou[1]),Pu.$set(ku)},i(Ou){Bu||(M(Pu.$$.fragment,Ou),Bu=!0)},o(Ou){R(Pu.$$.fragment,Ou),Bu=!1},d(Ou){Ou&&B(Tu),se(Pu),Lu=!1,Ru()}}}function AE(Cu){var Tu,Pu;let Bu,Lu,Ru,Ou,Du=Cu[1].dimensionType===Tt.Two&&tc(Cu),ku=Cu[1].pointType===mt.PointTag&&((Pu=(Tu=Cu[1].style)==null?void 0:Tu.point)==null?void 0:Pu.style)!=="noPoint"&&nc(Cu);return{c(){Bu=F("div"),Du&&Du.c(),Lu=q(),ku&&ku.c(),C(Bu,"class","wrapper svelte-1vzhbu2"),C(Bu,"data-id",Ru=Cu[1].id),me(Bu,"hide",Cu[10]),me(Bu,"unfolded",Cu[6]),Q(Bu,"left",Cu[9]),Q(Bu,"top",Cu[8]),Q(Bu,"z-index",Cu[7])},m(Fu,Nu){H(Fu,Bu,Nu),Du&&Du.m(Bu,null),W(Bu,Lu),ku&&ku.m(Bu,null),Ou=!0},p(Fu,[Nu]){var Gu,zu;Fu[1].dimensionType===Tt.Two?Du?(Du.p(Fu,Nu),Nu&2&&M(Du,1)):(Du=tc(Fu),Du.c(),M(Du,1),Du.m(Bu,Lu)):Du&&(ve(),R(Du,1,1,()=>{Du=null}),be()),Fu[1].pointType===mt.PointTag&&((zu=(Gu=Fu[1].style)==null?void 0:Gu.point)==null?void 0:zu.style)!=="noPoint"?ku?(ku.p(Fu,Nu),Nu&2&&M(ku,1)):(ku=nc(Fu),ku.c(),M(ku,1),ku.m(Bu,null)):ku&&(ve(),R(ku,1,1,()=>{ku=null}),be()),(!Ou||Nu&2&&Ru!==(Ru=Fu[1].id))&&C(Bu,"data-id",Ru),(!Ou||Nu&1024)&&me(Bu,"hide",Fu[10]),(!Ou||Nu&64)&&me(Bu,"unfolded",Fu[6]),Nu&512&&Q(Bu,"left",Fu[9]),Nu&256&&Q(Bu,"top",Fu[8]),Nu&128&&Q(Bu,"z-index",Fu[7])},i(Fu){Ou||(M(Du),M(ku),Ou=!0)},o(Fu){R(Du),R(ku),Ou=!1},d(Fu){Fu&&B(Bu),Du&&Du.d(),ku&&ku.d()}}}function yE(Cu,Tu,Pu){let Bu,Lu,Ru,Ou,Du,ku;var Fu,Nu,Gu,zu,Hu;let{withAnimation:Wu=!1}=Tu,{tag:_h}=Tu,{hooks:Xc}=Tu,{state:ju}=Tu,{mediaStore:_c}=Tu,{temporaryState:_f}=Tu,ep,tp=!1;function op(up){ep!==void 0&&clearTimeout(ep),tp=!0,ep=setTimeout(()=>{tp=!1},800)}const lp=up=>{tp||Xc.emit("click",{event:up,target:"TagPoint",tag:_h})};return Cu.$$set=up=>{"withAnimation"in up&&Pu(0,Wu=up.withAnimation),"tag"in up&&Pu(1,_h=up.tag),"hooks"in up&&Pu(2,Xc=up.hooks),"state"in up&&Pu(3,ju=up.state),"mediaStore"in up&&Pu(4,_c=up.mediaStore),"temporaryState"in up&&Pu(5,_f=up.temporaryState)},Cu.$$.update=()=>{Cu.$$.dirty&4098&&Pu(17,Bu=Pu(12,Fu=_h.state)===null||Fu===void 0?void 0:Fu.visible),Cu.$$.dirty&131072&&Pu(10,Lu=!Bu),Cu.$$.dirty&8194&&Pu(6,Ru=Pu(13,Nu=_h.state)===null||Nu===void 0?void 0:Nu.unfolded),Cu.$$.dirty&16386&&Pu(9,Ou=(Pu(14,Gu=_h.pointTagStyle)===null||Gu===void 0?void 0:Gu.leftPercent)+"%"),Cu.$$.dirty&32770&&Pu(8,Du=(Pu(15,zu=_h.pointTagStyle)===null||zu===void 0?void 0:zu.topPercent)+"%"),Cu.$$.dirty&65538&&Pu(7,ku=_h.contentType===At.Link?20:!(Pu(16,Hu=_h.state)===null||Hu===void 0)&&Hu.unfolded?10:0),Cu.$$.dirty&64&&op()},[Wu,_h,Xc,ju,_c,_f,Ru,ku,Du,Ou,Lu,lp,Fu,Nu,Gu,zu,Hu,Bu]}class wE extends fe{constructor(Tu){super(),ue(this,Tu,yE,AE,de,{withAnimation:0,tag:1,hooks:2,state:3,mediaStore:4,temporaryState:5},bE)}}function EE(Cu){ge(Cu,"svelte-1eci49s",".tag--container.svelte-1eci49s{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tag.hide.svelte-1eci49s{display:none}.withAnimation.svelte-1eci49s{transition:opacity 0.3s linear}.tag--container.hide.svelte-1eci49s{opacity:0;pointer-events:none}.tag--container.hide.svelte-1eci49s *{pointer-events:none}")}function ic(Cu,Tu,Pu){const Bu=Cu.slice();return Bu[6]=Tu[Pu],Bu}function sc(Cu,Tu){let Pu,Bu,Lu,Ru;const Ou=[{tag:Tu[6],hooks:Tu[2],state:Tu[3],mediaStore:Tu[4],temporaryState:Tu[5],withAnimation:Tu[0]}];let Du={};for(let ku=0;ku<Ou.length;ku+=1)Du=je(Du,Ou[ku]);return Bu=new wE({props:Du}),{key:Cu,first:null,c(){var ku,Fu,Nu;Pu=F("div"),oe(Bu.$$.fragment),Lu=q(),C(Pu,"class","tag svelte-1eci49s"),me(Pu,"hide",!((ku=Tu[6].pointTagStyle)!=null&&ku.leftPercent)||!((Fu=Tu[6].pointTagStyle)!=null&&Fu.topPercent)||Tu[6].enabled===!1||!Tu[6].state||((Nu=Tu[6].temporaryState)==null?void 0:Nu.visible)===!1),this.first=Pu},m(ku,Fu){H(ku,Pu,Fu),ie(Bu,Pu,null),W(Pu,Lu),Ru=!0},p(ku,Fu){var Nu,Gu,zu;Tu=ku;const Hu=Fu&63?Ve(Ou,[{tag:Tu[6],hooks:Tu[2],state:Tu[3],mediaStore:Tu[4],temporaryState:Tu[5],withAnimation:Tu[0]}]):{};Bu.$set(Hu),(!Ru||Fu&2)&&me(Pu,"hide",!((Nu=Tu[6].pointTagStyle)!=null&&Nu.leftPercent)||!((Gu=Tu[6].pointTagStyle)!=null&&Gu.topPercent)||Tu[6].enabled===!1||!Tu[6].state||((zu=Tu[6].temporaryState)==null?void 0:zu.visible)===!1)},i(ku){Ru||(M(Bu.$$.fragment,ku),Ru=!0)},o(ku){R(Bu.$$.fragment,ku),Ru=!1},d(ku){ku&&B(Pu),se(Bu)}}}function CE(Cu){let Tu,Pu=[],Bu=new Map,Lu,Ru=Cu[1];const Ou=Du=>Du[6].id;for(let Du=0;Du<Ru.length;Du+=1){let ku=ic(Cu,Ru,Du),Fu=Ou(ku);Bu.set(Fu,Pu[Du]=sc(Fu,ku))}return{c(){Tu=F("div");for(let Du=0;Du<Pu.length;Du+=1)Pu[Du].c();C(Tu,"class","tag--container svelte-1eci49s"),me(Tu,"hide",!Cu[3].visible||!Cu[5].visible),me(Tu,"withAnimation",Cu[0])},m(Du,ku){H(Du,Tu,ku);for(let Fu=0;Fu<Pu.length;Fu+=1)Pu[Fu].m(Tu,null);Lu=!0},p(Du,[ku]){ku&63&&(Ru=Du[1],ve(),Pu=Et(Pu,ku,Ou,1,Du,Ru,Bu,Tu,Yt,sc,null,ic),be()),(!Lu||ku&40)&&me(Tu,"hide",!Du[3].visible||!Du[5].visible),(!Lu||ku&1)&&me(Tu,"withAnimation",Du[0])},i(Du){if(!Lu){for(let ku=0;ku<Ru.length;ku+=1)M(Pu[ku]);Lu=!0}},o(Du){for(let ku=0;ku<Pu.length;ku+=1)R(Pu[ku]);Lu=!1},d(Du){Du&&B(Tu);for(let ku=0;ku<Pu.length;ku+=1)Pu[ku].d()}}}function PE(Cu,Tu,Pu){let{withAnimation:Bu=!1}=Tu,{tags:Lu=[]}=Tu,{hooks:Ru}=Tu,{state:Ou}=Tu,{mediaStore:Du}=Tu,{temporaryState:ku}=Tu;return Cu.$$set=Fu=>{"withAnimation"in Fu&&Pu(0,Bu=Fu.withAnimation),"tags"in Fu&&Pu(1,Lu=Fu.tags),"hooks"in Fu&&Pu(2,Ru=Fu.hooks),"state"in Fu&&Pu(3,Ou=Fu.state),"mediaStore"in Fu&&Pu(4,Du=Fu.mediaStore),"temporaryState"in Fu&&Pu(5,ku=Fu.temporaryState)},[Bu,Lu,Ru,Ou,Du,ku]}class xE extends fe{constructor(Tu){super(),ue(this,Tu,PE,CE,de,{withAnimation:0,tags:1,hooks:2,state:3,mediaStore:4,temporaryState:5},EE)}}const IE={globalConfig:{initialState:{},visibleConfig:{visibleDistance:{max:5},angleRange:{min:-45,max:45}},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"}},tag3DConfig:{ratio:.0035}},contentTypeConfig:{"Any-Link-Any":{unfoldedConfig:{keep:"unfolded"},initialState:{unfolded:!0}},"Any-Marketing-Any":{unfoldedConfig:void 0},"3D-MediaPlane-PlaneTag":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{angleRange:void 0,visibleDistance:void 0},clickable:!1}}};class TE extends ps{constructor(Tu){super(Tu),b(this,"tagCacheByPanoIndex",{})}getCaches({panoIndex:Tu,id:Pu,key:Bu}){var Lu,Ru,Ou,Du;const{five:ku}=this,Fu=(Lu=ku.panoIndex)!=null?Lu:Tu;if(Fu===void 0)throw new Error(`TagCacheController getCache(): fivePanoIndex is ${Fu}`);const Nu=`${(Ou=(Ru=ku.work)==null?void 0:Ru.workCode)!=null?Ou:ku.model.uuid}-${Fu}`;let Gu=this.tagCacheByPanoIndex[Nu];return Gu||(Gu=new Map,this.tagCacheByPanoIndex[Nu]=Gu),Pu===void 0?Gu:Bu===void 0?Gu.get(Pu)||(Gu.set(Pu,{}),Gu.get(Pu)):(Du=Gu.get(Pu))==null?void 0:Du[Bu]}clearCache(){this.tagCacheByPanoIndex={}}}class SE extends TE{constructor(Tu){super(Tu),b(this,"tags",[]),b(this,"config",IE),b(this,"raycaster",new Raycaster)}getTagById(Tu){const Pu=this.tags.find(Bu=>Bu.id===Tu);if(!Pu){console.error(`getTagById(): tag is ${Pu}, id is ${Tu}`);return}return Pu}changeConfig(Tu,Pu=!0){Pu?this.config=kt.exports({},this.config,Tu):this.config=Tu,this.clearCache()}changeGlobalConfig(Tu,Pu=!0){Pu?this.config.globalConfig=kt.exports({},this.config.globalConfig,Tu):this.config.globalConfig=Tu,this.clearCache()}changeContentTypeConfig(Tu,Pu,Bu=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Bu?this.config.contentTypeConfig[Tu]=kt.exports({},this.config.contentTypeConfig[Tu],Pu):this.config.contentTypeConfig[Tu]=Pu,this.clearCache()}getVisibleByPanoIndex(Tu,Pu){var Bu;const Lu=this.getCaches({panoIndex:Pu,id:Tu.id}),Ru=(Bu=this.five.panoIndex)!=null?Bu:Pu;if(Lu.visible!==void 0)return Lu.visible;{const Ou=(()=>{var Du,ku,Fu,Nu,Gu;const zu=(Du=this.getTagConfig(Tu).visibleConfig)!=null?Du:{},Hu=this.getDistance(Tu);if(typeof zu=="function")return zu(this.five,{tag:Tu,distance:Hu});if(zu.keep==="hidden")return!1;if(zu.keep==="visible")return!0;if(zu.visiblePanoIndex!==void 0&&(Ru===void 0||!zu.visiblePanoIndex.includes(Ru))||zu.visibleDistance!==void 0&&zu.visibleDistance!=="unLimited"&&zi(Hu,zu.visibleDistance)===!1)return!1;if(((ku=zu.intersectRaycaster)==null?void 0:ku.enabled)!==!1){if(Ru===void 0)return!1;const Wu=(Fu=this.five.work.observers[Ru])==null?void 0:Fu.position;if(Wu===void 0)throw new Error(`getVisible(): observerPosition is ${Wu}`);const _h=Mi(Tu.position).sub(Wu).normalize();this.raycaster.set(Wu,_h);const[Xc]=this.five.model.intersectRaycaster(this.raycaster),ju=(Gu=(Nu=zu.intersectRaycaster)==null?void 0:Nu.distanceAccuracy)!=null?Gu:.01;if(Xc&&Xc.distance+ju<Hu)return!1}return!(zu.angleRange&&Tu.dimensionType===Tt.Three&&zi(this.getAngle(Tu),zu.angleRange)===!1)})();return Lu.visible=Ou,Lu.visible}}getUnfoldedByPanoIndex(Tu,Pu){if(!this.getVisibleByPanoIndex(Tu))return;const Bu=this.getCaches({panoIndex:Pu,id:Tu.id});if(Bu.unfolded!==void 0)return Bu.unfolded;{const Lu=this.getTagConfig(Tu).unfoldedConfig;if(!Lu)return;const Ru=(()=>{const Du=this.getDistance(Tu);if(typeof Lu=="function")return Lu(this.five,{tag:Tu,distance:Du});if(Lu.keep==="folded")return!1;if(Lu.keep==="unfolded")return!0;if(Lu.disableUnfold===!0)return!1;if(Lu.disableFold===!0)return!0;if(Lu.unfoldDistance&&zi(Du,Lu.unfoldDistance)===!1)return!1})();Bu.unfolded=Ru;const Ou=this.getUnfoldedByCamera(Tu);return Ou!==void 0?Ou:Bu.unfolded}}getUnfoldedByCamera(Tu){return this.getVisibleByPanoIndex(Tu)?(()=>{var Pu;const Bu=this.getDistance(Tu),Lu=this.getTagConfig(Tu).unfoldedConfig;if(Lu){if(typeof Lu=="function")return Lu(this.five,{tag:Tu,distance:Bu});if(Lu.keep==="folded")return!1;if(Lu.keep==="unfolded")return!0;if(Lu.disableUnfold===!0)return!1;if(Lu.disableFold===!0)return!0;if(Lu.autoUnfold===void 0)return;if(Lu.autoUnfold.strategy==="ScreenPostion"){const Ru=this.getTagProject(Tu);if(Ru&&zi(Ru.x,Lu.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(Lu.autoUnfold.strategy==="MinimumDistance"){const Ru=this.filterPointTag().filter(Ou=>this.getVisibleByPanoIndex(Ou)).filter(Ou=>{const Du=this.getTagProject(Ou);if(!Du)return!1;const{x:ku,y:Fu,z:Nu}=Du;return!(Math.abs(Nu)>1||Math.abs(ku)>1||Math.abs(Fu)>1)}).filter(Ou=>{var Du;const ku=this.getTagConfig(Ou).unfoldedConfig;return typeof ku=="object"&&((Du=ku.autoUnfold)==null?void 0:Du.strategy)==="MinimumDistance"}).map(Ou=>({id:Ou.id,distance:this.getDistance(Ou)})).filter(Ou=>Ou.distance!==void 0).sort((Ou,Du)=>Ou.distance-Du.distance).findIndex(Ou=>Ou.id===Tu.id);if(Ru===-1||!(Ru<=((Pu=Lu.autoUnfold.maxNumber)!=null?Pu:1)-1))return!1}return!0}})():void 0}getDistance(Tu,Pu){var Bu,Lu,Ru;const Ou=(Bu=this.five.panoIndex)!=null?Bu:Pu;if(Ou===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Ou}`);const Du=this.getCaches({panoIndex:Pu,id:Tu.id});if(Du.distance!==void 0)return Du.distance;{const ku=(Ru=(Lu=this.five.work)==null?void 0:Lu.observers[Ou])==null?void 0:Ru.position;if(ku===void 0)throw new Error(`getDistance(): observerPosition is ${ku}`);const Fu=(()=>Tu.pointType===mt.PointTag?Qt(Tu==null?void 0:Tu.position):Mi(Tu.position))(),Nu=ku.distanceTo(Fu);return Du.distance=Nu,Nu}}getAngle(Tu,Pu){var Bu,Lu,Ru;const Ou=(Bu=this.five.panoIndex)!=null?Bu:Pu;if(Ou===void 0)throw new Error(`getDistance(): fivePanoIndex is ${Ou}`);const Du=this.getCaches({panoIndex:Pu,id:Tu.id});if(Du.angle!==void 0)return Du.angle;{const ku=(Ru=(Lu=this.five.work)==null?void 0:Lu.observers[Ou])==null?void 0:Ru.position;if(ku===void 0)throw new Error(`getAngleRange(): observerPosition is ${ku}`);const Fu=(()=>Tu.pointType===mt.PointTag?ei(Tu.normal):hd(Tu.position))();if(!Fu)return;const Nu=new Vector3().copy(ku).sub(Mi(Tu.position)),Gu=Fu.angleTo(Nu)*180/Math.PI;return Du.angle=Gu,Du.angle}}getTagConfig(Tu){var Pu;if(!Tu)return(Pu=this.config.globalConfig)!=null?Pu:{};const Bu={};return this.config.contentTypeConfig&&Object.keys(this.config.contentTypeConfig).forEach(Lu=>{const Ru=Lu;if(Bu[Ru])return;const Ou=Ru.split("-"),[Du="Any",ku="Any",Fu="Any"]=Ou||[];(Tu.dimensionType===Du||Du==="Any")&&(Tu.contentType===ku||ku==="Any")&&(Tu.pointType===Fu||Fu==="Any")&&(Bu[Ru]=this.config.contentTypeConfig[Ru])}),kt.exports({},this.config.globalConfig,...Object.values(Bu),Tu.config)}setPointTagPosition(){const Tu=this.filterPointTag();Tu.length!==0&&Tu.forEach(Pu=>{var Bu;if(!((Bu=Pu.state)!=null&&Bu.visible)){Pu.pointTagStyle=void 0;return}const Lu=this.getTagProject(Pu);if(!Lu){Pu.pointTagStyle=void 0;return}Pu.pointTagStyle={leftPercent:(Lu.x+1)/2*100,topPercent:(-Lu.y+1)/2*100}})}setVisibleByPanoIndex(){this.tags.forEach(Tu=>{const Pu=this.getVisibleByPanoIndex(Tu);Tu.state&&(Tu.state.visible=Pu)})}setUnfoldedByPanoIndex(){this.tags.forEach(Tu=>{const Pu=this.getUnfoldedByPanoIndex(Tu);if(!!Tu.state&&(Pu!==void 0&&(Tu.state.unfolded=Pu),Pu&&!Tu.state.visible)){const Bu=this.getTagConfig(Tu);typeof Bu.unfoldedConfig=="object"&&Bu.unfoldedConfig.autoUnfoldWhenHide!==!1&&(Tu.state.unfolded=!1)}})}getTagProject(Tu){if(!this.getVisibleByPanoIndex(Tu))return;const Pu=Mi(Tu.position),{x:Bu,y:Lu,z:Ru}=Pu.project(this.five.camera);if(!(Ru>1))return{x:Bu,y:Lu,z:Ru}}filterPointTag(){return this.tags.filter(Tu=>Tu.pointType===mt.PointTag)}filterTag2D(){return this.tags.filter(Tu=>Tu.dimensionType===Tt.Two)}filter3DPointTag(){return this.tags.filter(Tu=>Tu.dimensionType===Tt.Three&&Tu.pointType===mt.PointTag)}filter3DTag(){return this.tags.filter(Tu=>Tu.dimensionType===Tt.Three)}filterPlaneTag(){return this.tags.filter(Tu=>Tu.dimensionType===Tt.Three&&Tu.pointType===mt.PlaneTag)}}const Jd="1.1.1",xo=`DnalogelPlugin-PanoTagPlugin@${Jd}`,kE=!1;class DE extends SE{constructor(Tu,Pu){super(Tu),b(this,"version",Jd),b(this,"state",{enabled:!0,visible:!0}),b(this,"params"),b(this,"debug"),b(this,"css3DRenderPlugin"),b(this,"PointTagSvelte"),b(this,"temporaryState",{visible:!0}),b(this,"mediaStore",Ro({currentMediaUrl:""})),b(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),b(this,"staticUrl"),b(this,"disposedErrorLog",()=>{console.error(`${xo} is disposed`)}),this.params={debug:!1,mergePluginDefaultConfigToLoadDataConfig:!1,config:this.config,staticConfig:{host:"vrlab-static.ljcdn.com"},...Pu},this.debug=this.params.debug,this.config=this.params.config,this.staticUrl=(()=>{var Bu;const Lu=this.params.staticConfig;if(typeof Lu=="string")return Lu;{const Ru=Lu.protocol?Lu.protocol+":":"",Ou=(Bu=Lu.host)!=null?Bu:"vrlab-static.ljcdn.com",Du=Lu.port?":"+Lu.port:"";return`${Ru}//${Ou}${Du}`}})(),Object.assign(window,{__PANOTAGPLUGIN_DEBUG__:this})}load(Tu,Pu){var Bu,Lu;this.clearTags(),console.log(xo,"load:",{data:Tu}),this.params.mergePluginDefaultConfigToLoadDataConfig?this.config=kt.exports({},this.config,{globalConfig:(Bu=Tu.globalConfig)!=null?Bu:{},contentTypeConfig:(Lu=Tu.contentTypeConfig)!=null?Lu:{}}):(Tu.globalConfig&&(this.config.globalConfig=Tu.globalConfig),Tu.contentTypeConfig&&(this.config.contentTypeConfig=Tu.contentTypeConfig)),this.addTag(Tu.tagList,Pu),this.debug&&D0(this.five,this.tags)}addTag(Tu,Pu){const Bu=(Array.isArray(Tu)?Tu:[Tu]).map(Lu=>{const Ru=this.getTagConfig(Lu);return{...Lu,state:{visible:void 0,unfolded:kE,...Ru.initialState},hooks:new Subscribe,clickable:Ru.clickable}}).filter(Lu=>Lu.position);this.tags.push(...Bu),L0(this.five,()=>{var Lu,Ru,Ou;if(this.store.eventListenerDisposer&&((Ru=(Lu=this.store).eventListenerDisposer)==null||Ru.call(Lu)),this.store.eventListenerDisposer=this.addEventListener(),!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const Du=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=Du,this.store.resizeObserverDisposerAdding=!1},200)}this.checkPanelTag(),this.setVisibleAndUnfolded({withAnimation:(Ou=Pu==null?void 0:Pu.withAnimation)!=null?Ou:!0}).then(()=>this.updateRenderAllTags()),this.updateRenderAllTags()})}clearTags(){this.tags=[],this.clearCache(),this.disposeAllCSS3DContainer(),this.updateRenderAllTags()}async show(Tu){const{userAction:Pu=!0,withAnimation:Bu=!1}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!0},{userAction:Pu,visibleWithAnimation:Bu}),this.hooks.emit("show",{userAction:Pu,withAnimation:Bu})}async hide(Tu){const{userAction:Pu=!0,withAnimation:Bu=!1}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({visible:!1},{userAction:Pu,visibleWithAnimation:Bu}),this.hooks.emit("hide",{userAction:Pu,withAnimation:Bu})}enable(Tu){const{userAction:Pu=!0}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!0},{userAction:Pu}),this.hooks.emit("enable",{userAction:Pu})}disable(Tu){const{userAction:Pu=!0}=Tu!=null?Tu:{};if(this.store.disposed)return this.disposedErrorLog();this.setState({enabled:!1},{userAction:Pu}),this.hooks.emit("disable",{userAction:Pu})}dispose(){var Tu,Pu,Bu,Lu,Ru,Ou;this.disposeAllCSS3DContainer(),(Tu=this.PointTagSvelte)==null||Tu.$destroy(),this.filter3DTag().forEach(Du=>{var ku;return(ku=Du.tag3DContentSvelte)==null?void 0:ku.svelteApp.$destroy()}),this.tags=[],(Pu=this.store.disposers)==null||Pu.forEach(Du=>Du==null?void 0:Du()),this.store.disposers=[],this.store.disposed=!0,(Lu=(Bu=this.store).eventListenerDisposer)==null||Lu.call(Bu),this.store.eventListenerDisposer=void 0,(Ou=(Ru=this.store).resizeObserverDisposer)==null||Ou.call(Ru),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.clearCache(),this.hooks.emit("dispose")}setState(Tu,Pu){if(this.store.disposed)return this.disposedErrorLog();const{userAction:Bu=!0,visibleWithAnimation:Lu=!1}=Pu,Ru={...this.state};this.state=Object.assign(this.state,Tu),this.store.visibleWithAnimation=Lu,Ru.visible!==this.state.visible&&(Tu.visible?this.handleShow():this.handleHide()),Ru.enabled!==this.state.enabled&&(Tu.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Ru,userAction:Bu})}changeTagNormalById(Tu,Pu){const Bu=this.getTagById(Tu);!Bu||!Bu.tag3DContentSvelte||(Bu.tag3DContentSvelte.currentNormal=Qt(Pu),this.updateRenderPlaneTag())}changeDataById(Tu,Pu,Bu=!0){const Lu=this.getTagById(Tu);!Lu||(Bu?Lu.data=kt.exports({},Lu.data,Pu):Object.assign(Lu.data,Pu),this.checkPanelTag(),this.updateRenderAllTags())}changeTagById(Tu,Pu,Bu=!0){const Lu=this.getTagById(Tu);!Pu||(Bu?kt.exports(Lu,Pu):Object.assign(Lu,Pu),(Lu==null?void 0:Lu.tag3DContentSvelte)&&(Pu==null?void 0:Pu.normal)&&(Lu.tag3DContentSvelte.currentNormal=Qt(Pu.normal)),this.updateRenderAllTags(),this.checkPanelTag())}destroyTagById(Tu){(Array.isArray(Tu)?Tu:[Tu]).forEach(Pu=>{const Bu=this.tags.findIndex(Lu=>Lu.id===Pu);Bu!==-1&&this.tags.splice(Bu,1)}),this.updateRenderAllTags()}pauseCurrentMedia(){this.mediaStore.set({currentMediaUrl:""})}async setVisibleAndUnfolded({withAnimation:Tu}={withAnimation:!1}){return this.setVisibleByPanoIndex(),Tu?new Promise((Pu,Bu)=>{setTimeout(()=>{this.setUnfoldedByPanoIndex(),Pu()},10)}):(this.setUnfoldedByPanoIndex(),Promise.resolve())}handleShow(){this.state.visible=!0,this.updateTagContainerVisible()}handleHide(){this.state.visible=!1,this.updateTagContainerVisible()}handleEnable(){this.state.enabled=!0,this.updateRenderAllTags()}handleDisable(){var Tu;this.state.enabled=!1,(Tu=this.PointTagSvelte)==null||Tu.$set({tags:[]}),this.filter3DTag().forEach(Pu=>{var Bu;(Bu=Pu.tag3DContentSvelte)==null||Bu.svelteApp.$destroy(),Pu.tag3DContentSvelte=void 0})}addEventListener(){const{five:Tu,hooks:Pu}=this,Bu=this.handleFiveWantsMoveToPano.bind(this),Lu=this.handleFiveModeChange.bind(this),Ru=this.handleFiveCameraUpdate.bind(this),Ou=this.handleFiveCameraUpdateDebounce(),Du=this.handleFivePanoArrived.bind(this),ku=this.clickhandler.bind(this);return Tu.on("wantsMoveToPano",Bu),Tu.on("modeChange",Lu),Tu.on("cameraUpdate",Ru),Tu.on("cameraUpdate",Ou),Tu.on("panoArrived",Du),Pu.on("click",ku),()=>{Tu.off("wantsMoveToPano",Bu),Tu.off("modeChange",Lu),Tu.off("cameraUpdate",Ru),Tu.off("cameraUpdate",Ou),Tu.off("panoArrived",Du),Pu.off("click",ku),this.store.eventListenerDisposer=void 0}}addResizeObserver(){const Tu=this.five.getElement(),Pu=()=>{this.show(),this.updateRenderAllTags()},{observe:Bu,unobserve:Lu}=Xa(z0(()=>{!this.store.resizeObserverDisposer||this.hide()},500),Tu),{observe:Ru,unobserve:Ou}=Xa(_a(()=>Pu(),400),Tu);return Bu(),Ru(),()=>{Lu(),Ou()}}handleFiveModeChange(Tu){Tu==="Panorama"?this.five.once("panoArrived",()=>this.temporaryShow()):this.temporaryHide()}handleFiveWantsMoveToPano(){this.tags.forEach(Tu=>{const Pu=this.getTagConfig(Tu);typeof Pu.visibleConfig=="object"&&Pu.visibleConfig.keep?Tu.temporaryState={...Tu.temporaryState,visible:Pu.visibleConfig.keep==="visible"}:typeof Pu.visibleConfig=="object"&&Pu.visibleConfig.alwaysShowWhenMovePano?Tu.temporaryState={...Tu.temporaryState,visible:!0}:Tu.temporaryState={...Tu.temporaryState,visible:!1}}),this.updateRenderAllTags()}temporaryShow(){this.temporaryState.visible=!0}temporaryHide(){this.temporaryState.visible=!1}clickhandler(Tu){if(Tu.target==="TagPoint"){if(!Tu.tag.state)return;const Pu=this.getTagConfig(Tu.tag);if(typeof Pu.unfoldedConfig=="object"){if((Pu.unfoldedConfig.disableUnfold||Pu.unfoldedConfig.keep)&&!Tu.tag.state.unfolded)return}else Tu.tag.state.unfolded=!Tu.tag.state.unfolded;Tu.tag.state.unfolded&&this.tags.forEach(Bu=>{Bu.id!==Tu.tag.id&&Bu.state&&(Bu.state.unfolded=!1)}),this.updateRenderAllTags()}}updateRenderAllTags(){this.updateRenderPointTag(),this.updateRenderPlaneTag()}updateTagContainerVisible(){var Tu;(Tu=this.PointTagSvelte)==null||Tu.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation}),this.filter3DTag().forEach(Pu=>{var Bu;(Bu=Pu.tag3DContentSvelte)==null||Bu.svelteApp.$set({state:this.state,temporaryState:this.temporaryState,withAnimation:this.store.visibleWithAnimation})})}handleFiveCameraUpdateDebounce(){return _a(()=>{this.setUnfoldedByCamera(),this.updateRenderAllTags()},100)}handleFiveCameraUpdate(){this.updateRenderPointTag()}async handleFivePanoArrived(){await this.setVisibleAndUnfolded(),this.tags.forEach(Tu=>{Tu.temporaryState={...Tu.temporaryState,visible:!0}}),this.updateRenderAllTags()}setUnfoldedByCamera(){let Tu=!1;this.tags.forEach(Pu=>{const Bu=this.getUnfoldedByCamera(Pu);!Pu.state||Bu!==void 0&&(Bu===!0&&(Tu=!0),Pu.state.unfolded=Bu)}),Tu&&this.tags.forEach(Pu=>{const Bu=this.getTagConfig(Pu).unfoldedConfig;typeof Bu=="object"&&(Bu.autoUnfold||Bu.disableFold||Bu.keep)||Pu.state&&(Pu.state.unfolded=!1)})}updateRenderPointTag(){var Tu;const Pu=this.filterPointTag();if(this.setPointTagPosition(),this.PointTagSvelte)this.PointTagSvelte.$set({tags:Pu,state:this.state,temporaryState:this.temporaryState});else{const Bu=(Tu=this.five.getElement())==null?void 0:Tu.parentElement;if(!Bu)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.PointTagSvelte=new xE({target:Bu,props:{hooks:this.hooks,tags:Pu,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore}})}}updateRenderPlaneTag(){[...this.filterPlaneTag(),...this.filter3DPointTag()].forEach(Tu=>{var Pu;if(Tu.tag3DContentSvelte){const{svelteApp:Bu,domContainer:Lu,initialNormal:Ru,currentNormal:Ou}=Tu.tag3DContentSvelte;if(Bu.$set({tag:Tu,hooks:this.hooks,state:this.state,temporaryState:this.temporaryState}),!Ru.equals(Ou)){const Du=new Quaternion().setFromUnitVectors(Ru,Ou);Lu.css3DObject.setRotationFromQuaternion(Du)}}else{if(((Pu=Tu.state)==null?void 0:Pu.visible)===!1)return;if(this.css3DRenderPlugin||(this.css3DRenderPlugin=Do(this.five)),Tu.pointType===mt.PointTag&&!Tu.normal)return console.error("updateRenderPlaneTag: \u4E09\u7EF4\u70B9\u6807\u7B7E\u7F3A\u5C11\u6CD5\u5411\u91CF\uFF01");const Bu=Tu.pointType===mt.PlaneTag?Tu.position:M0(this.five.camera.position,Qt(Tu.position),Qt(Tu.normal)),Lu=Tu.pointType===mt.PlaneTag?hd(Tu.position):Qt(Tu.normal),Ru=this.getTagConfig(Tu).tag3DConfig,Ou=this.css3DRenderPlugin.create3DDomContainer(Bu,Ru);if(!Ou)return;this.store.css3DRenderDisposer.set(Tu.id,Ou.dispose),Tu.tag3DContentSvelte={svelteApp:new Zd({target:Ou.container,props:{tag:Tu,hooks:this.hooks,state:this.state,mediaStore:this.mediaStore,temporaryState:this.temporaryState}}),domContainer:Ou,initialNormal:Lu,currentNormal:Lu}}}),this.checkPanelTag()}disposeAllCSS3DContainer(){for(const[Tu,Pu]of this.store.css3DRenderDisposer)Pu==null||Pu();this.store.css3DRenderDisposer=new Map}checkPanelTag(){this.tags.forEach(Tu=>{var Pu;Tu.dimensionType===Tt.Two&&Tu.pointType===mt.PointTag&&((Pu=Tu.tag3DContentSvelte)==null||Pu.domContainer.dispose(),Tu.tag3DContentSvelte=void 0)});for(const[Tu,Pu]of this.store.css3DRenderDisposer){const Bu=this.getTagById(Tu);(!Bu||Bu.dimensionType!==Tt.Three)&&(Pu==null||Pu(),this.store.css3DRenderDisposer.delete(Tu))}}}const GC=(Cu,Tu)=>new DE(Cu,Tu);new Vector3;function PanoTag(){const Cu=react$1.exports.useRef(),Tu=useController(),Pu=useFiveInstance(),Bu=react$1.exports.useRef(GC(Pu,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:{strategy:"MinimumDistance"},unfoldDistance:{max:100}}}}}));return react$1.exports.useEffect(()=>{var Ru;if(((Ru=Tu.configs)==null?void 0:Ru.keyframeMap.PanoTag)===!1)return;const Lu=Ou=>{if(!Bu.current)return;const{start:Du,end:ku,data:Fu}=Ou,Nu=Fu,Gu=Date.now().toString(),zu=mt.PointTag,Hu=Tt.Two,Wu=[Nu.vertex.x,Nu.vertex.y,Nu.vertex.z],_h=(()=>Nu.imgUrl?{id:Gu,pointType:zu,position:Wu,dimensionType:Hu,contentType:At.ImageText,data:{text:Nu.text,mediaData:[{type:"Image",url:Nu.imgUrl}]}}:{id:Gu,pointType:zu,position:Wu,dimensionType:Hu,contentType:At.Text,data:{text:Nu.text}})();Bu.current.load({tagList:[_h]}),Cu.current=setTimeout(()=>{var ju;const Xc=Bu.current.getTagById(Gu);Xc.state&&(Xc.state.unfolded=!1,Bu.current.updateRenderAllTags()),(ju=Xc.hooks)==null||ju.on("folded",()=>{setTimeout(()=>{Xc.state&&(Xc.state.visible=!1,Bu.current.destroyTagById(Gu))},1500)})},ku-Du)};return Tu.on(VreoKeyframeEnum.PanoTag,Lu),()=>{Tu.off(VreoKeyframeEnum.PanoTag,Lu),Cu.current&&clearTimeout(Cu.current)}},[Tu]),null}function evenNumber(Cu,Tu){const Pu=Math.round(Cu);return Pu%2===0?Pu:Pu+Number(Tu!=null&&Tu.smaller?-1:1)}function centerPoint(Cu,Tu){return new Vector3((Cu.x+Tu.x)/2,(Cu.y+Tu.y)/2,(Cu.z+Tu.z)/2)}const transformPositionToVector3=({x:Cu,y:Tu,z:Pu})=>new Vector3(Cu,Tu,Pu);function createResizeObserver(Cu,Tu){if(!Tu||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",Cu),unobserve:()=>window.removeEventListener("resize",Cu)};{const Pu=new ResizeObserver(Cu);return{observe:()=>Pu.observe(Tu),unobserve:()=>Pu.unobserve(Tu)}}}const CSS3DRenderPlugin=Cu=>{const Tu={disposeCallbacks:[]},Pu=(...Lu)=>{var ip,ap,sp;const Ru=Lu[0].map(cp=>cp instanceof Vector3?cp:transformPositionToVector3(cp)),Ou=Lu[1];if((Ru==null?void 0:Ru.length)<4)return console.error("points must be equal or greater than than 4");if(!((ip=Cu==null?void 0:Cu.model)!=null&&ip.loaded))return console.error("five.model.loaded is: ",(ap=Cu==null?void 0:Cu.model)==null?void 0:ap.loaded);const Du=Cu.getElement();if(!Du)return console.error("five.getElement() is "+Du);const ku=[],Fu=(Ou==null?void 0:Ou.ratio)||.00216;Fu<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Nu=(Ou==null?void 0:Ou.dpr)||1,Gu=(Ou==null?void 0:Ou.mode)||"front",zu=(sp=Ou==null?void 0:Ou.autoRender)!=null?sp:!0,Hu=(Ou==null?void 0:Ou.behindFiveContainer)||Du.parentElement||document.body,Wu=(Ou==null?void 0:Ou.container)||document.createElement("div");Wu.classList.add("__Vreo-plugin--CSS3DRenderPlugin");const{css3DObject:_h,mesh:Xc}=Bu(Ru,{ratio:Fu,dpr:Nu,container:Wu,mode:Gu});let ju;const _c=Gu==="front"&&!Tu.frontMode,_f=Gu==="behind"&&!Tu.behindMode,ep=!(_c||_f);let tp=!1,op=null;_f&&(Tu.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),_c&&(Tu.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:lp,css3DRenderer:up}=Gu==="behind"?Tu.behindMode:Tu.frontMode,hp=(()=>{if(ep)return()=>{lp.add(_h)};{const cp=()=>{const fp=evenNumber(Du.clientWidth,{smaller:!0}),vp=evenNumber(Du.clientHeight,{smaller:!0});up.setSize(fp,vp)};cp(),ju=createResizeObserver(cp,Du),up.domElement.style.position="absolute",up.domElement.style.top="0",up.domElement.style.userSelect="none",up.domElement.style.pointerEvents="none";const dp=()=>{tp||(op=requestAnimationFrame(dp),up.render(lp,Cu.camera))};return()=>{var fp;lp.add(_h),(fp=ju==null?void 0:ju.observe)==null||fp.call(ju),dp(),Gu==="behind"&&Xc&&(Cu.scene.add(Xc),ku.push(()=>Xc&&Cu.scene.remove(Xc)))}}})();_c&&(Du.parentElement||document.body).appendChild(up.domElement),_f&&Hu.appendChild(up.domElement);const np=()=>{var cp;return tp=!0,ku.forEach(dp=>dp==null?void 0:dp()),lp.remove(_h),typeof op=="number"&&cancelAnimationFrame(op),lp.children.length===0&&(up.domElement.remove(),Gu==="front"&&(Tu.frontMode=void 0),Gu==="behind"&&(Tu.behindMode=void 0),!Tu.behindMode&&!Tu.frontMode&&((cp=ju==null?void 0:ju.unobserve)==null||cp.call(ju))),!0},rp=Tu.disposeCallbacks.findIndex(cp=>cp===np);return rp!==-1?Tu.disposeCallbacks.splice(rp,1):Tu.disposeCallbacks.push(np),zu&&hp(),{container:Wu,dispose:np,css3DObject:_h,render:zu?void 0:hp}},Bu=(Lu,Ru)=>{const{ratio:Ou,dpr:Du,container:ku,mode:Fu}=Ru,Nu=Lu[0].distanceTo(Lu[1]),Gu=Lu[1].distanceTo(Lu[2]),zu=evenNumber(Nu/Ou*Du),Hu=evenNumber(Gu/Ou*Du),Wu=new CSS3DObject(ku);Wu.scale.set(Ou,Ou,Ou),ku.style.width=zu+"px",ku.style.height=Hu+"px",ku.style.pointerEvents="none";const _h=centerPoint(Lu[0],Lu[2]),Xc=Lu[1].clone().sub(Lu[0]),ju=Lu[2].clone().sub(Lu[1]),_c=new Vector3(0,1,0).angleTo(new Vector3(0,ju.y,ju.z)),_f=new Vector3(1,0,0).angleTo(new Vector3(Xc.x,0,Xc.z)),ep=Xc.angleTo(new Vector3(Xc.x,0,Xc.z)),tp=(ju.z>0?-1:1)*_c,op=(Xc.z<0?1:-1)*_f,lp=(Xc.x>0&&Xc.y<0||Xc.x<0&&Xc.y>0?-1:1)*ep;Wu.rotateOnWorldAxis(new Vector3(1,0,0),tp),Wu.rotateOnWorldAxis(new Vector3(0,1,0),op),Wu.rotateOnWorldAxis(new Vector3(0,0,1),lp),Wu.position.set(_h.x,_h.y,_h.z);let up;if(Fu==="behind"){const hp=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),np=new PlaneGeometry(zu,Hu);up=new Mesh(np,hp),up.name="CSS3DRenderPlugin-mesh",up.position.copy(Wu.position),up.rotation.copy(Wu.rotation),up.scale.copy(Wu.scale)}return{css3DObject:Wu,mesh:up}};return{create3DDomContainer:Pu,disposeAll:()=>{Tu.disposeCallbacks.forEach(Lu=>Lu==null?void 0:Lu()),Tu.disposeCallbacks=[]}}},calcPoints=(Cu,Tu,Pu,Bu)=>{const Lu=Pu/375,Ru=Bu/375,Ou=new PlaneGeometry(Lu,Ru);if(Tu){const _c=new Vector3(Tu.x+Cu.x,Tu.y+Cu.y,Tu.z+Cu.z);Ou.lookAt(_c)}const Du=new MeshBasicMaterial({color:16776960,side:DoubleSide}),ku=new Mesh(Ou,Du),Fu=Cu.clone();ku.position.copy(Fu);const[Nu,Gu,zu,Hu]=ku.geometry.vertices,Wu=Fu.clone().add(Hu),_h=Fu.clone().add(zu),Xc=Fu.clone().add(Gu),ju=Fu.clone().add(Nu);return[Wu,_h,ju,Xc]};function PanoTextLabel(){const Cu=react$1.exports.useRef(),Tu=useController(),Pu=useFiveInstance(),Bu=react$1.exports.useRef();return react$1.exports.useEffect(()=>{var Ru;if(((Ru=Tu.configs)==null?void 0:Ru.keyframeMap.PanoTextLabel)===!1)return;const Lu=Ou=>{var tp,op,lp;const{start:Du,end:ku,data:Fu}=Ou,Nu=Fu;if(Fu.text==="")return;const{x:Gu,y:zu,z:Hu}=Nu.vertex,Wu=new Vector3(Gu,zu,Hu),_h=new Vector3((tp=Nu.normal)==null?void 0:tp.x,(op=Nu.normal)==null?void 0:op.y,(lp=Nu.normal)==null?void 0:lp.z),Xc=200,ju=30,_c=calcPoints(Wu,Nu.normal&&_h,Xc,ju);Bu.current||(Bu.current=CSS3DRenderPlugin(Pu));const _f=Bu.current.create3DDomContainer(_c),ep=_f==null?void 0:_f.css3DObject;if(Fu.quaternion){const up=new Quaternion(Fu.quaternion.x,Fu.quaternion.y,Fu.quaternion.z,Fu.quaternion.w);ep==null||ep.quaternion.copy(up)}_f!=null&&_f.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${Fu.fontSize||16}px`},className:"PanoText-innerText",children:Fu.text||""})})}),_f==null?void 0:_f.container),Cu.current=setTimeout(()=>{var up;(up=Bu.current)==null||up.disposeAll()},ku-Du)};return Tu.on(VreoKeyframeEnum.PanoTextLabel,Lu),()=>{Tu.off(VreoKeyframeEnum.PanoTextLabel,Lu),Cu.current&&clearTimeout(Cu.current)}},[Tu]),jsx(Fragment,{})}function Prompter(){const[Cu,Tu]=react$1.exports.useState(""),[Pu,Bu]=react$1.exports.useState(!0),Lu=react$1.exports.useRef(null),Ru=useController();return react$1.exports.useEffect(()=>{var Du;if(((Du=Ru.configs)==null?void 0:Du.keyframeMap.Prompter)===!1)return;const Ou=ku=>{const{start:Fu,end:Nu,data:Gu}=ku;Tu(Gu.text),Bu(!1),Lu.current&&(clearTimeout(Lu.current),Lu.current=null),Lu.current=setTimeout(()=>{Bu(!0),Tu(""),Lu.current&&clearTimeout(Lu.current),Lu.current=null},Nu-Fu)};return Ru.on(VreoKeyframeEnum.Prompter,Ou),()=>{Ru.off(VreoKeyframeEnum.Prompter,Ou)}},[Ru]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":Pu,[`vreo-prompter-left--${Ru.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:Cu})})})}function UpdateVRPanorama(){const Cu=useController(),Tu=useFiveInstance(),Pu=react$1.exports.useRef(null),Bu=react$1.exports.useRef(null),Lu=react$1.exports.useCallback(()=>{if(Bu.current=null,Pu.current){const Du=parseWork(Pu.current);Tu.load(Du)}},[]),Ru=react$1.exports.useCallback(()=>{if(Pu.current){const Du=parseWork(Pu.current);Object.assign(window,{$rawWork:Du}),Tu.load(Du)}},[]),Ou=react$1.exports.useCallback(()=>{!Bu.current||Tu.load(Bu.current)},[]);return react$1.exports.useEffect(()=>{const Du=ku=>{var Gu;Pu.current||(Pu.current=Tu.work.raw.works);const Fu=ku.data;if(Fu.work){Bu.current=parseWork(Fu.work),Tu.load(Bu.current);return}const Nu=(Gu=Tu.work)==null?void 0:Gu.raw.works[0];if(Fu.dynamic_scene&&!Fu.panorama){const Hu=JSON.parse(Nu).panorama,Wu=Fu.dynamic_scene.images.index;Hu.list[Wu]=Fu.dynamic_scene.images,Fu.panorama=Hu,delete Fu.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Nu),$work2:Fu,parseWork}),Bu.current=parseWork([Nu,Fu]),Tu.load(Bu.current)};return Cu.on(VreoKeyframeEnum.UpdateVRPanorama,Du),Cu.on(VreoKeyframeEnum.Exit,Lu),Cu.on("loaded",Lu),Cu.on("paused",Ru),Cu.on("playing",Ou),()=>{Cu.off(VreoKeyframeEnum.UpdateVRPanorama,Du),Cu.off(VreoKeyframeEnum.Exit,Lu),Cu.off("loaded",Lu),Cu.off("paused",Ru),Cu.off("playing",Ou)}},[]),jsx(Fragment,{})}const inlinePlay=Cu=>{if(!Cu)return;const Tu=()=>{Cu.removeEventListener("canplaythrough",Tu);try{Cu.play()}catch{}};Cu.addEventListener("canplaythrough",Tu),Cu.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const Cu=react$1.exports.useRef(null),Tu=react$1.exports.useRef(),Pu=useController(),Bu=react$1.exports.useRef(),[Lu,Ru]=react$1.exports.useState(!1),Ou=useFiveInstance(),Du=ku=>{!Tu.current||(Tu.current.src=ku)};return react$1.exports.useEffect(()=>{const ku=async Fu=>{const{start:Nu,end:Gu}=Fu,{videoSrc:zu,fov:Hu,direction:Wu,panoIndex:_h,vector:Xc}=Fu.data,[ju,_c]=(()=>{if(Xc)return[Xc.longitude,Xc.latitude];if(!Wu)return[0,0];let _f=-Math.atan2(Wu.x,-Wu.z);_f=(_f%PI_2+PI_2)%PI_2;const ep=-Math.asin(Wu.y/1);return[_f,ep]})();Ou.setState({fov:Hu,panoIndex:_h,longitude:ju,latitude:_c},!0),Du(zu),inlinePlay(Tu.current),Ru(!0),Bu.current=setTimeout(()=>{var _f,ep;(_f=Tu.current)!=null&&_f.paused||(ep=Tu.current)==null||ep.pause(),Ru(!1),Du("")},Gu-Nu)};return Pu.on(VreoKeyframeEnum.VideoEffect,ku),()=>{Pu.off(VreoKeyframeEnum.VideoEffect,ku),Bu.current&&clearTimeout(Bu.current)}},[Pu]),react$1.exports.useEffect(()=>{var Fu,Nu;if(!Cu.current)return;const ku=((Nu=(Fu=Pu.configs)==null?void 0:Fu.videos)==null?void 0:Nu.videoEffect)||document.createElement("video");ku.setAttribute("playsinline","true"),ku.setAttribute("webkit-playsinline","true"),ku.setAttribute("autoplay","true"),ku.setAttribute("key","VideoEffect-video"),ku.setAttribute("class","VideoEffect-video"),Tu.current=ku,Cu.current.append(Tu.current),document.addEventListener("WeixinJSBridgeReady",function(){var Gu;(Gu=Tu.current)==null||Gu.play()},!1),Cu.current},[]),jsx("div",{ref:Cu,className:classNames("VideoEffect",{"VideoEffect--visible":Lu})})}const Preloader={blob:Cu=>{const Tu=()=>null;return new Promise((Pu,Bu)=>{const Lu=new XMLHttpRequest,Ru=()=>{Lu.ontimeout=Tu,Lu.onreadystatechange=Tu,Lu.onprogress=Tu,Lu.onabort=Tu};Lu.ontimeout=()=>{Bu(new Error("timeout")),Ru()},Lu.onreadystatechange=()=>{Lu.readyState===4&&(Lu.status===0&&!Lu.response||(Lu.status===200||Lu.status===0?(Pu(Lu.response),Ru()):(Bu(new Error("status:"+Lu.status)),Ru())))},Lu.open("GET",Cu,!0),Lu.responseType="blob",Lu.send(null)})}};class AudioLike extends Subscribe{constructor({duration:Pu}={}){super();Cm(this,"$timestamp",null);Cm(this,"$currentTime",0);Cm(this,"$duration",0);Cm(this,"stopInterval");Cm(this,"muted",!1);Cm(this,"src","");Pu&&(this.$duration=Pu)}setAttribute(Pu,Bu){}play(){this.$currentTime===this.$duration&&(this.$currentTime=0),this.$timestamp===null&&(this.$timestamp=performance.now()-this.$currentTime),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=null}requestAnimationFrameLoop(){if(this.$timestamp===null)return;const Pu=performance.now();this.$currentTime=Pu-this.$timestamp,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(Pu){this.$currentTime=Pu}get duration(){return this.$duration}set duration(Pu){this.pause(),this.$duration=Pu,this.$timestamp=null,this.$currentTime=0}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(Pu,Bu,Lu=!1){this.on(Pu,Bu)}removeEventListener(Pu,Bu,Lu=!1){this.off(Pu,Bu)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(Pu,Bu,Lu,Ru,Ou={preload:!0}){var Wu,_h,Xc;if(!Ou.videoInstance)if(cacheInstance.videoInstance)Ou.videoInstance=cacheInstance.videoInstance;else{const ju=document.createElement("video");ju.style.opacity="0",ju.style.pointerEvents="none",ju.style.display="none",document.body.append(ju),Ou.videoInstance=ju,cacheInstance.videoInstance=ju,ju.playsInline=!0,ju.controls=!1}const Du=new PlaneGeometry(Pu,Bu,Lu,Ru),ku=new VideoTexture(Ou.videoInstance),Fu=new ShaderMaterial({uniforms:{map:{value:ku},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(Du,Fu);Cm(this,"options");Cm(this,"videoUrl");Cm(this,"freeze");Cm(this,"paused");Cm(this,"audioInstance");Cm(this,"audioLikeInstance");Cm(this,"$removeEventListener");if(this.options=Ou,this.freeze=!1,this.paused=!0,Ou.audioInstance)this.audioInstance=Ou.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const ju=document.createElement("audio");ju.crossOrigin="",ju.muted=!1,ju.autoplay=!1,ju.style.display="none",document.body.appendChild(ju),this.audioInstance=ju,cacheInstance.audioInstance=ju}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Nu=ju=>runInAction(()=>this.paused=ju),Gu=()=>Nu(!0),zu=()=>Nu(!1),Hu=()=>console.log("vreo: video \u64AD\u653E\u7ED3\u675F");this.audioInstance.addEventListener("pause",Gu),this.audioInstance.addEventListener("play",zu),(Wu=this.options.videoInstance)==null||Wu.addEventListener("pause",Gu),(_h=this.options.videoInstance)==null||_h.addEventListener("play",zu),this.audioLikeInstance.addEventListener("pause",Gu),this.audioLikeInstance.addEventListener("play",zu),(Xc=this.options.videoInstance)==null||Xc.addEventListener("ended",Hu),this.$removeEventListener=()=>{var ju,_c,_f;this.audioInstance.removeEventListener("pause",Gu),this.audioInstance.removeEventListener("play",zu),(ju=this.options.videoInstance)==null||ju.removeEventListener("pause",Gu),(_c=this.options.videoInstance)==null||_c.removeEventListener("play",zu),this.audioLikeInstance.removeEventListener("pause",Gu),this.audioLikeInstance.removeEventListener("play",zu),(_f=this.options.videoInstance)==null||_f.removeEventListener("ended",Hu)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(Pu){if(this.videoUrl===Pu)return;this.videoUrl=Pu,this.freeze=!0,await this.mediaInstance.pause();const Bu=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Lu=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Bu.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Lu,!1))};this.mediaInstance.addEventListener("timeupdate",Lu,!1)}async play(Pu="",Bu=0,Lu){return Pu=Pu||"",Lu&&!Pu?(this.currentTime&&(this.mediaInstance.currentTime=Bu),this.mediaInstance.duration=Lu,this.videoUrl="",this.mediaInstance.play(),!0):Pu?Pu===this.videoUrl?(this.mediaInstance.currentTime=Bu,await this.mediaInstance.play(),!0):(await this.update(Pu),this.mediaInstance.pause(),await new Promise(Ru=>setTimeout(async()=>{this.mediaInstance.currentTime=Bu,await this.mediaInstance.play(),Ru(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor(Tu,Pu){Cm(this,"videoAgentMesh");Cm(this,"scene",new Scene);Cm(this,"camera",new OrthographicCamera(-240,240,135,-135));Cm(this,"renderer",new WebGLRenderer({alpha:!0}));Cm(this,"disposers",[]);Cm(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});Cm(this,"dispose",()=>{var Tu;(Tu=this.videoAgentMesh)==null||Tu.dispose(),this.disposers.forEach(Pu=>Pu==null?void 0:Pu())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,Pu),Tu){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Bu=this.renderer.domElement;Bu.classList.add("VideoAgent-canvas");const Lu=addResizeListener(Tu,(Ru,Ou)=>{this.renderer.setSize(Ru*window.devicePixelRatio,Ou*window.devicePixelRatio),Bu.style.width=`${Ru}px`,Bu.style.height=`${Ou}px`});this.disposers.push(Lu),Tu.append(Bu),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(Cu){var Ru;const Tu=react$1.exports.useRef(null),Pu=useController(),Bu=react$1.exports.useMemo(()=>{var Ou;return((Ou=Pu.avatar)==null?void 0:Ou.url)&&Pu.avatar.force===!0},[Pu.avatar]),Lu=react$1.exports.useMemo(()=>{var Ou;return Bu?!1:((Ou=Pu.videoAgentScene)==null?void 0:Ou.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[Pu.videoAgentScene]);return react$1.exports.useEffect(()=>{if(!Tu.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(Pu.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Ou=new VideoAgentScene(Tu.current,Cu.options);return Pu.videoAgentScene=Ou,()=>{var Du;Pu.dispose(),(Du=Pu.videoAgentScene)==null||Du.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Bu?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Ru=Pu.avatar)==null?void 0:Ru.url,onClick:()=>{var Ou;return(Ou=Cu.onClick)==null?void 0:Ou.call(Cu)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Lu}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:Tu,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Ou;return(Ou=Cu.onClick)==null?void 0:Ou.call(Cu)}})})})})})]})}function BgMusic(){const Cu=useController(),Tu=react$1.exports.useRef(null),Pu=react$1.exports.useCallback(()=>{Tu.current&&(clearTimeout(Tu.current),Tu.current=null)},[]);return react$1.exports.useEffect(()=>{const Bu=new Audio;Bu.setAttribute("id","vreo-singleton-bgmusic"),Bu.style.display="none",Bu.setAttribute("playsinline","true"),Bu.loop=!0,document.body.append(Bu);const Lu=Ru=>{const{start:Ou,end:Du}=Ru,{url:ku}=Ru.data;Bu.src=ku;const Fu=()=>{Bu.play()};Bu.addEventListener("canplaythrough",Fu),Pu();const Nu=()=>{Bu.pause(),Bu.currentTime=0,Bu.src="",Pu(),Bu.removeEventListener("canplaythrough",Fu)},Gu=Du-Ou||5e3;Tu.current=setTimeout(()=>{Nu()},Gu),Cu.once("paused",()=>{Nu()})};return Cu.on(VreoKeyframeEnum.BgMusic,Lu),()=>{Cu.off(VreoKeyframeEnum.BgMusic,Lu),document.body.removeChild(Bu),Pu()}}),jsx(Fragment,{})}function Wave(Cu){const Tu=React.useMemo(()=>{var Nu;const Pu=(Nu=Cu==null?void 0:Cu.appearance)!=null?Nu:"solid",Bu=typeof navigator!="undefined"?navigator.userAgent:"",Lu=/(iPhone|iPad|iPod)/i.test(Bu),Ru=/safari/i.test(Bu)&&!/chrome/i.test(Bu)&&/version/i.test(Bu),Ou=Lu||Ru,Du=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9"),ku="https://vr-public.realsee-cdn.cn/release/static/image/release/",Fu={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}};return Du?ku+Fu[Pu].vp9:Ou?ku+Fu[Pu].hevc:""},[Cu==null?void 0:Cu.appearance]);return jsx("video",{className:"vreo-wave",width:"100%",preload:"auto",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,disablePictureInPicture:!0,controls:!1,src:Tu})}const AppView=observer(({controller:Cu})=>{var Tu,Pu;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!Cu.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[Cu.waveAppearance&&jsx(Wave,{appearance:Cu.waveAppearance}),jsx(VideoAgent,{onClick:()=>{Cu.playing?Cu.setPlaying(!1):Cu.setPlaying(!0)},options:((Tu=Cu.configs)==null?void 0:Tu.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Pu=Cu.configs)==null?void 0:Pu.customPanelChildren]})})});function App(){const Cu=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:Cu})]})}const DrawerView=observer(({controller:Cu})=>{var Bu;const Tu="400px",Pu=(()=>{var Ru;const Lu=(Ru=Cu.drawerConfig)==null?void 0:Ru.height;return Lu?typeof Lu=="number"?Lu+"px":Lu:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":Cu.drawerConfig&&Cu.drawerConfig.content}),onClick:()=>Cu.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:Pu,maxHeight:Tu},children:((Bu=Cu.drawerConfig)==null?void 0:Bu.content)||""})})});function Drawer(){const Cu=useController();return jsx(DrawerView,{controller:Cu})}const PopUpView=observer(({controller:Cu})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":Cu.popUp}),onClick:()=>Cu.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:Cu.popUp||""})}));function PopUp(){const Cu=useController();return jsx(PopUpView,{controller:Cu})}class Player extends Subscribe{constructor(Pu,Bu={}){var Lu;super();Cm(this,"$five");Cm(this,"controller");Cm(this,"configs");if(this.$five=Pu,Bu.container||(Bu.container=Bu.containter),!Bu.container){const Ru=document.getElementById("vreo-app")||document.createElement("div");reactDom.exports.unmountComponentAtNode(Ru),Ru.setAttribute("id","vreo-app"),Bu.container=Ru;const Ou=(Lu=Pu.getElement())==null?void 0:Lu.parentNode;Ou?Ou.append(Ru):document.body.append(Ru)}Bu.container.classList.contains("vreo-app")||Bu.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Bu)),this.controller=new Controller({five:Pu,container:Bu.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Ru,Ou)=>jsx(Ru,{subscribe:{on:(Du,ku)=>this.on(Du,ku),once:(Du,ku)=>this.once(Du,ku),off:(Du,ku)=>this.off(Du,ku)},five:Pu},Ou))]}),Bu.container),reaction(()=>this.controller.ended,Ru=>{Ru&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Ru=>{this.controller.ended||this.emit(Ru?"playing":"paused")})}async load(Pu,Bu=0,Lu=!1,Ru=!1){var Ou,Du,ku,Fu;if(this.controller.setLoading(!0),Ru&&(Pu=JSON.parse(JSON.stringify(Pu))),this.controller.visible||(this.controller.setVisible(!0),await new Promise(Nu=>{setTimeout(()=>Nu(!0),500)})),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=Pu,(Ou=this.controller.mediaInstance)==null||Ou.pause(),this.$five.imageOptions.size&&((Du=this.configs.imageOptions)==null?void 0:Du.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Lu||Lu===void 0&&this.configs.autoPreload){const Nu=Pu.keyframes.filter(zu=>!(zu.type!==VreoKeyframeEnum.CameraMovement||zu.data.panoIndex===void 0)).reduce((zu,Hu)=>{const Wu=Hu.data.panoIndex;return zu[Wu]||(zu[Wu]=!0),zu},{}),Gu=Object.keys(Nu);for(let zu=0;zu<Gu.length;zu++)await this.$five.preloadPano(Number(Gu[zu]))}return this.emit("loaded",Pu),this.controller.emit("loaded",Pu),(ku=this.controller.videoAgentScene)!=null&&ku.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Bu/1e3),this.controller.setAvatar(Pu.video.avatar),await((Fu=this.controller.videoAgentScene)==null?void 0:Fu.videoAgentMesh.play(Pu.video.url,Bu/1e3,Pu.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Nu,Gu)=>this.emit(Nu,Gu)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(Pu){return this.controller.playing||(Pu&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=Pu/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setPlaying(!0)),!0}setAppearance(Pu){this.controller.setAppearance(Pu)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.pause(),this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`

\u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
\u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
\u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
\u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501

`);var _default="";export{CSS3DRenderPlugin as C,FiveCanvas as F,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,createFiveProvider as c,Raycaster as d,Fragment as e,reactDom as f,jsx as j,parseWork as p,react$1 as r,tweenProgress as t,unsafe__useFiveInstance as u};
